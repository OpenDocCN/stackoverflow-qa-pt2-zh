# StackOverflow 问答 15310000-15310999

# iphone - 从 Facebook 页面获取照片并将其显示在我的 ios 视图中

> ID：15310000
> 
> 赞同：0
> 
> 时间：2013-03-09T11:12:06.763
> 
> 标签：iphone, ios, objective-c, facebook

我需要从 Facebook 页面获取照片并需要将其显示在我的视图中？IOS可以吗。如果有可能怎么办？我用谷歌搜索并没有发现任何线索。

更新：我需要显示相册中的图片。

# android - 使用线程 postdelayed() 的 Android 游戏循环

> ID：15310003
> 
> 赞同：1
> 
> 时间：2013-03-09T11:12:43.100
> 
> 标签：android, frame-rate, postdelayed, game-loop

我以为我很聪明地将这段代码用于游戏线程循环，而不是通常的`while(running)`循环：

```
 @Override
    public void run() {
        Log.d(TAG, "+ run()");
        final long [] old = new long [] { System.currentTimeMillis() };
        Log.w(TAG,"Start time=" + old[0]);

        Thread loop = new Thread() {
            public void run() {
                if( running ) {
                    Canvas canvas = null;
                    try {
                        canvas = mSurfaceHolder.lockCanvas(null);
                        long t = System.currentTimeMillis();
                        Log.w(TAG,"Loop time=" + t + ", delta=" + (t-old[0]));
                        old[0] = t;
                        synchronized( mSurfaceHolder ) {
                            mGame.update();
                            mGame.onDraw(canvas);
                        }
                    }
                    finally {
                        // Do this in finally so that if an exception is thrown
                        // we don't leave the Surface in an inconsistent state
                        if( canvas != null ) {
                            mSurfaceHolder.unlockCanvasAndPost(canvas);
                        }
                    }
                    Log.i(TAG, "Posting thread with delay " + interval + " milliseconds");
                    handler.postDelayed(this, interval);
                }
            };
        };
        Log.i(TAG, "Posting thread with no delay");
        handler.post(loop);
        Log.d(TAG, "- run()");
    } 
```

第一个线程被发布，然后每个线程以给定的延迟将自己发布回队列。

产生了这个日志（部分）：

```
03-09 12:51:22.665: D/GameLoop(3116): + run()
03-09 12:51:22.665: W/GameLoop(3116): Start time=1362826282665
03-09 12:51:22.665: I/GameLoop(3116): Posting thread with no delay
03-09 12:51:22.665: D/GameLoop(3116): - run()
03-09 12:51:22.687: W/GameLoop(3116): Loop time=1362826282691, delta=26
03-09 12:51:22.687: I/GameLoop(3116): Posting thread with delay 50 milliseconds
03-09 12:51:22.687: D/GameView(3116): + onWindowFocusChanged(hasWindowFocus:true)
03-09 12:51:22.687: D/GameLoop(3116): + resume()
03-09 12:51:22.687: D/GameLoop(3116): - resume()
03-09 12:51:22.687: D/GameView(3116): - onWindowFocusChanged()
03-09 12:51:22.745: W/GameLoop(3116): Loop time=1362826282745, delta=54
03-09 12:51:22.745: I/GameLoop(3116): Posting thread with delay 50 milliseconds
03-09 12:51:23.284: W/GameLoop(3116): Loop time=1362826283284, delta=539
03-09 12:51:23.285: I/GameLoop(3116): Posting thread with delay 50 milliseconds
03-09 12:51:23.366: W/GameLoop(3116): Loop time=1362826283367, delta=83
03-09 12:51:23.366: I/GameLoop(3116): Posting thread with delay 50 milliseconds
03-09 12:51:23.425: W/GameLoop(3116): Loop time=1362826283426, delta=59
03-09 12:51:23.425: I/GameLoop(3116): Posting thread with delay 50 milliseconds
03-09 12:51:23.495: W/GameLoop(3116): Loop time=1362826283504, delta=78
03-09 12:51:23.505: I/GameLoop(3116): Posting thread with delay 50 milliseconds
03-09 12:51:23.555: W/GameLoop(3116): Loop time=1362826283561, delta=57
03-09 12:51:23.555: I/GameLoop(3116): Posting thread with delay 50 milliseconds
03-09 12:51:23.615: W/GameLoop(3116): Loop time=1362826283622, delta=61
03-09 12:51:23.615: I/GameLoop(3116): Posting thread with delay 50 milliseconds
03-09 12:51:23.675: W/GameLoop(3116): Loop time=1362826283675, delta=53
03-09 12:51:23.686: I/GameLoop(3116): Posting thread with delay 50 milliseconds
03-09 12:51:23.749: W/GameLoop(3116): Loop time=1362826283750, delta=75
03-09 12:51:23.749: I/GameLoop(3116): Posting thread with delay 50 milliseconds
03-09 12:51:23.807: W/GameLoop(3116): Loop time=1362826283808, delta=58
03-09 12:51:23.807: I/GameLoop(3116): Posting thread with delay 50 milliseconds
03-09 12:51:23.875: W/GameLoop(3116): Loop time=1362826283884, delta=76
03-09 12:51:23.875: I/GameLoop(3116): Posting thread with delay 50 milliseconds
03-09 12:51:23.936: W/GameLoop(3116): Loop time=1362826283938, delta=54
03-09 12:51:23.946: I/GameLoop(3116): Posting thread with delay 50 milliseconds
03-09 12:51:24.006: W/GameLoop(3116): Loop time=1362826284006, delta=68
03-09 12:51:24.006: I/GameLoop(3116): Posting thread with delay 50 milliseconds
03-09 12:51:24.065: W/GameLoop(3116): Loop time=1362826284065, delta=59
03-09 12:51:24.065: I/GameLoop(3116): Posting thread with delay 50 milliseconds
03-09 12:51:24.126: W/GameLoop(3116): Loop time=1362826284126, delta=61
03-09 12:51:24.126: I/GameLoop(3116): Posting thread with delay 50 milliseconds 
```

我知道 postdelay 不准确，但这里每次运行都比所需的 50 毫秒晚。
我的`mGame.update()`方法现在是空的，`mGame.onDraw()`绘制 2 个矩形，一行和一个文本。我认为它不是特别重，仍然无法跟上 20FPS。

他们如何渲染像沥青这样的图形密集型游戏并保持高 FPS？

警告：这在运行英特尔 HAXM 引擎的模拟器中运行，该引擎的速度与模拟器一样快。

要清楚我在问什么，它是：

**我必须做什么才能在（不是计算量很大的）游戏循环中实现高 FPS？**

注意：我知道后延迟将至少为 50 毫。但是有两件事困扰我，总是第二次调用需要几百毫秒，精度从 20 到 10 FPS 不等，我担心屏幕上的运动看起来不均匀。

**编辑**
只是为了测试我将间隔减少到 20 毫（50FPS）并且增量保持在 50-70 毫（模拟器）的范围内。
我将 einterval 增加到 83 毫（12FPS），增量为 87-93（模拟器）。
我在运行 Nvidia 四核的 ASUS TF201 中安装了该应用程序，并且增量没有太大变化。

结论是，对于使用 Canvas 和更新绘制循环的游戏，我无法从 20FPS 开始。令人失望。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T14:08:37.203

伙计，我使用画布并获得 15 毫秒的帧，1 到 4 毫秒的延迟，将 200 个精灵全部位图绘制到同步画布上。不知道你的交易是什么，但我只是在一年前看过 lunarlander api 演示，从那里开始就全是肉汁。清单中的一行可以启用硬件加速，而无需使用模拟器来处理您需要快速和图形化的任何东西。我不会撒谎说它是最简单的游戏开发平台（它是最糟糕的 IMO），但给它一些时间，你会弄明白的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T11:20:12.477

我认为他们使用的是 OpenGL 而不是 Canvas

你为什么使用同步

```
synchronized( mSurfaceHolder ) 
```

# javascript - Javascript背景固定大小

> ID：15310006
> 
> 赞同：0
> 
> 时间：2013-03-09T11:13:16.393
> 
> 标签：javascript, background-image, autoresize, window-resize

您好，我仍在学习过程中，我有一个问题：我正在尝试制作网页，但对 javascript 知之甚少，我正在尝试制作随机图像更改背景，但要固定在屏幕上的图像（如无论浏览器大小如何，都可以看到所有图片）希望我足够清楚......但这是到目前为止我用于随机背景图像的代码，如果有人可以帮我调整图像大小吗？

```
<script type="text/javascript">
var totalCount = 2;
function ChangeIt()
{
    var num = Math.ceil( Math.random() * totalCount );
    document.body.background = 'images/'+num+'.jpg';
    document.body.style.backgroundRepeat = "no-repeat";
    document.body.style.backgroundSize = "cover";
}
</script> 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T11:22:03.550

您需要做的就是调用您的函数。`ChangeIt();`在您的函数定义下方添加。

否则，您的代码在 Windows 7 上的 IE8（哇！）、FF 12 和 Chrome 25 上对我有用。

# facebook - 使用预览 api 登录 Spotify FB

> ID：15310010
> 
> 赞同：1
> 
> 时间：2013-03-09T11:13:45.173
> 
> 标签：facebook, spotify

任何人都知道 facebook 登录如何与新的预览 spotify 应用程序 api 一起使用？

我尝试过这样的事情......

```
require(['$api/facebook'], function(facebook) {
    facebook.session.showConnectui();
} 
```

但没有什么能让我得到我用旧 api 得到的结果。我也尝试使用普通的 FB js sdk，但问题是它需要一些“url”来允许连接......我真的不能放弃 spotify 应用程序吗？

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-16T18:07:08.493

该`auth`模块一开始并不存在，但现在它是 Spotify Apps API 的一部分。您可以在[其文档页面](https://developer.spotify.com/docs/apps/api/1.0/api-auth-auth.html)上阅读更多相关信息。它看起来像这样：

```
 require(['$api/auth#Auth'], function(Auth) {
    var appId = '<your_app_id>',
        permissions = ['user_about_me'];

    var auth = new Auth();
    auth.authenticateWithFacebook(appId, permissions)
      .done(function(params) {
        if (params.accessToken) {
          console.log('Your access token: ' + params.accessToken);
        } else {
          console.log('No access token returned');
        }
      }).fail(function(req, error) {
          console.error('The Auth request failed with error: ' + error);
      });
    }
  }); 
```

此外，[GitHub 上](https://github.com/spotify/apps-tutorial)的Tutorial App 中有[一个工作示例](https://github.com/spotify/apps-tutorial/blob/master/tutorials/facebook/authenticate.html)。

# ruby - 为什么这个简单的 Ruby 代码不能在 HAML 中工作？

> ID：15310022
> 
> 赞同：2
> 
> 时间：2013-03-09T11:14:55.423
> 
> 标签：ruby, sinatra, haml

如果我定期运行这个简单的 Ruby 代码，它可以正常工作：

```
class String
  def add_two
    self + "2"
  end
end
puts "hello".add_two 
```

它应该打印“hello2”。但这失败了：

```
:ruby
  class String
    def add_two
      self + "2"
    end
  end
  puts "hello".add_two 
```

此代码产生错误：

```
NoMethodError at /
undefined method `add_two' for "hello":String 
```

有什么想法有什么问题吗？

（不确定这是否重要，但我将 HAML 与 Sinatra 一起使用，它在 Apache 上运行，带有 Passenger 模块。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T13:23:13.460

我建议 String 在另一个命名空间中，因此在另一个类中。

那会发生什么？

```
class ::String 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T13:22:54.177

我将您的代码按原样放入 Rails 应用程序中的一个 Haml 视图中，但我收到了一个不同的错误：

```
SyntaxError at /
class definition in method body 
```

所以我想知道是不是[Haml 的`:ruby`过滤器](http://haml.info/docs/yardoc/file.REFERENCE.html#ruby-filter)在抱怨，但由于它“使用普通的 Ruby 解释器解析过滤后的文本”，这似乎不太可能。因此，我搜索了有关该错误的更多信息，并找到了导致我这样做的参考资料（见下文），它有效（但实际上，永远不应该使用）：

```
:ruby
  String.module_eval do
    def add_two
      self + "2"
    end
  end
  puts "hello".add_two 
```

参考：

*   [方法体内的类](http://www.ruby-forum.com/topic/199339)
*   [方法体中的类（重新）定义](http://blog.choonkeat.com/weblog/2007/02/class-redefinit.html)

# c - C中的反向链表

> ID：15310023
> 
> 赞同：2
> 
> 时间：2013-03-09T11:15:05.153
> 
> 标签：c

我知道这个问题已经在论坛上发布了，但是我有一个小问题我试图解决但我没有成功

当我尝试此代码甚至代码将其发布到stackoverflow其他线程时，我总是会遇到违规访问错误我尝试了此代码

```
void reverse(node **headRef)
{
    node *current = *headRef, *next,*result=NULL;
    while(current)
    {
      next = current->next;
      current->next = result;
      result =current;
      current = next;
    }
    *headRef = result;
} 
```

在 eclipse cpp、Visual Studio 和代码块中，它总是以违规访问而告终，当我尝试逐步调试员工时，我发现我奇怪地认为光标进入了 while 循环，即使当前为 NULL，甚至当我尝试用 current->next 替换 current->next 光标仍然进入循环，尽管 current->next 已经是 NULL

```
while(current->next)
    {
      next = current->next;
      current->next = result;
      result =current;
      current = next;
    } 
```

我试图重复使用相同的人员以避免循环但是问题仍然存在

```
 void recursiveReverse(node **headRef) {
   node *first = *headRef;
   node *rest = first->next;
   if(rest ==NULL) return;
   recursiveReverse(&rest);
   first->next->next = first;
   first->next = NULL;
   *headRef = rest;
} 
```

这是视觉工作室的错误：

![Visual Studio 执行截图](../Images/c5461ec03a0314aa5e7091c85d8ad7b4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T06:33:32.807

我已经稍微更改了代码以解决错误并将节点也发回。希望这会有所帮助。GCC 编译器没有显示任何访问冲突。

```
#include <stdio.h>

typedef struct Node {
  char data;
  struct Node* next;
} Node;

void print_list(Node* root) {
  while (root) {
    printf("%c ", root->data);
    root = root->next;
  }
  printf("\n");
}

Node* reverse(Node **root) {
  Node *current = *root, *next,*result=NULL;
  while(current){
    next = current->next;
    current->next = result;
    result =current;
    current = next;
  }
  return result;
}

int main() {
  Node d = { 'd', 0 };
  Node c = { 'c', &d };
  Node b = { 'b', &c };
  Node a = { 'a', &b };

  Node* root = &a;
  print_list(root);
  root = reverse(&root);
  print_list(root);

  return 0;
} 
```

输出：

```
a b c d

d c b a 
```

# c# - 无法在新任务中填充数据网格

> ID：15310024
> 
> 赞同：0
> 
> 时间：2013-03-09T11:15:23.580
> 
> 标签：c#, mvvm, datagrid, async-await, fill

我有 DataGrid 的 WPF 项目。我使用 MVVM 模式。这是我的虚拟机的一部分：

```
class LibraryViewModel
{
    #region Members
    //private SimpleLibDBEntities _database;
    ObservableCollection<BooksViewModel> _books = new ObservableCollection<BooksViewModel>();
    int count = 0;
    int sizeOfdb = 1000000;
    #endregion

    public ObservableCollection<BooksViewModel> Books
    {
        get
        {
            return _books;
        }
        set
        {
            _books = value;
        }
    }
    public LibraryViewModel()
    {
        Task task = Task.Factory.StartNew(Generator);
    }
    private void Generator()
    {
        for (count = 0; count < sizeOfdb; count++)
        {
            _books.Add(new BooksViewModel { Book = new BooksSet { Id = count, Title = "Title"+count, Author = "Author", Publisher = "Publisher", Year = 1000, Note = "Note" } });
        }
    } 
```

它有效，但我的 DataGrid 只显示了大约 50 000 -100 000 个元素（随机），而不是我的 int sizeOfdb = 1000000 个元素。为什么会这样？如何修复它？（没有“任务”一切正常）

在这个例子中我如何使用 async/await？类似的东西？（不工作。尝试使用 Dispathcher？）

```
public LibraryViewModel()
{
    GeneratorAsync();
}
private async void GeneratorAsync()
{
        await Task.Factory.StartNew(()=>{
            for (count = 0; count < sizeOfdb; count++)
            {
                _books.Add(...);
            }
        });
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T12:26:03.073

这里的基本问题是它`ObservableCollection`不是完全线程安全的。更具体地说，从一个线程修改集合同时从另一个线程读取可能不安全，并在修改集合的线程上`ObservableCollection`引发其`CollectionChanged`事件。

我猜在这种情况下发生的事情是，您的后台任务会创建许多元素并将它们添加到集合中，然后再创建 UI 并进行绑定。此时，集合中的元素将添加到 DataGrid。但是当添加下一个项目并且`CollectionChanged`在线程池线程上引发事件时，`DataGrid`的事件处理程序现在在线程池线程上运行，违反了它的线程亲和性。这会导致终止您的任务的异常（我猜 - 如果您在调试器下运行并打开用户未处理异常的中断，您应该会看到这一点）。

如果您希望生成集合项会很昂贵（例如，在真实版本中涉及数据库访问），您应该在后台线程上执行此操作，然后将它们添加到`ObservableCollection`UI 线程上 - 但是[这个问题对此有很好的讨论](https://stackoverflow.com/questions/2091988/how-do-i-update-an-observablecollection-via-a-worker-thread)。

您可以看到 await/async 并没有真正帮助您尝试制定，因为您只是试图包装一个即发即弃的任务，以一个即发即弃的“async void”开头。如果您试图将创建移出 UI 线程，那么如何：

```
private async void AddBooks()
{
    var books = await Task.Run(() => GetBooks());
    foreach (var book in books)
    {
        _books.Add(book);
    }
}

private List<BooksViewModel> GetBooks()
{
    List<BooksViewModel> books = new List<BooksViewModel>();
    for (count = 0; count < sizeOfdb; count++)
    {
        books.Add(new BooksViewModel { Book = new BooksSet { Id = count, Title = "Title" + count, Author = "Author", Publisher = "Publisher", Year = 1000, Note = "Note" } });
    }
    return books;
} 
```

在这种情况下，创建是在线程池线程上运行的，然后等待将您带回 UI 线程。

# java - 在 JSTL 中将 java 日期对象转换为毫秒

> ID：15310025
> 
> 赞同：3
> 
> 时间：2013-03-09T11:15:27.010
> 
> 标签：java, date, jstl

如何在 JSTL 中将 java 日期转换为毫秒？我尝试使用`<fmt:formatDate/>`但没有成功。请让我知道实现这一目标的任何方法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-14T15:28:51.970

只需调用[`Date#getTime()`](http://docs.oracle.com/javase/7/docs/api/java/util/Date.html#getTime%28%29).

```
<p>The date property of a bean in milliseconds: ${bean.date.time}</p> 
```

在这种情况下，JSTL 不是必需的，除非您运行的是史前 JSP 1.x 野兽，否则您需要`<c:out>`在模板文本中使用 EL 来显示它，当时不支持。

# three.js - Three.js 在点击按钮时改变纹理或颜色

> ID：15310026
> 
> 赞同：3
> 
> 时间：2013-03-09T11:15:31.807
> 
> 标签：three.js

我的 jQuery：

```
<script type="text/javascript">
$(document).ready(function(){

$("#button").click(function(){
cube[0].mesh.material.uniforms.texture.value = THREE.ImageUtils.loadTexture("textures/envmap.png");
cube[0].mesh.material.uniforms.texture.needsUpdate = true;
});

});
</script> 
```

我有一组立方体，我希望能够在单击#button div 时更改立方体的纹理。

单击 div 时，我在 chrome 中收到此错误：

```
Uncaught TypeError: Cannot read property 'material' of undefined 
```

如何更改作为 THREE.CubeGeometry 对象的立方体 [0] 的纹理或颜色。

我在这里有一个 JS 小提琴：http: [//jsfiddle.net/SCXNQ/559/](http://jsfiddle.net/SCXNQ/559/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T11:34:38.377

按照这个例子： http: [//mrdoob.github.com/three.js/examples/webgl_materials_cars.html](http://mrdoob.github.com/three.js/examples/webgl_materials_cars.html)

使用 console.log 调试您的应用程序，您正在尝试访问不存在的对象，例如 cube[0] 或 cube.mesh。您可以使用 cube.material 获取材质。没有制服数组，因为您使用的是 MeshBasicMaterial。

你需要更新=真应该在纹理的加载监听器中触发。

# android - Listview 在滚动时崩溃

> ID：15310027
> 
> 赞同：1
> 
> 时间：2013-03-09T11:15:37.290
> 
> 标签：android, drag-and-drop, android-listview, indexoutofboundsexception, simpleadapter

你好堆栈溢出，

我的页面上有一个`ListView`- 问题是每次我尝试向某个方向滚动它时它都会崩溃。这不是常规的`ListView`，我使用的是 github 库，可以在这里找到： [https ://github.com/terlici/DragNDropList](https://github.com/terlici/DragNDropList)

这是我的列表的设置：

```
DragNDropListView lv = (DragNDropListView) getListView();
DragNDropSimpleAdapter adapter = new DragNDropSimpleAdapter(this, listItems, R.layout.custom_row_view, new String[]{"name", "current", "reset"},  new int[] {R.id.text1, R.id.text2, R.id.text3}, R.id.handler);
lv.setDragNDropAdapter(adapter); 
```

**更新的LOGACT**

```
03-09 14:48:43.667: E/AndroidRuntime(18869): FATAL EXCEPTION: main
03-09 14:48:43.667: E/AndroidRuntime(18869): java.lang.ArrayIndexOutOfBoundsException
03-09 14:48:43.667: E/AndroidRuntime(18869):    at com.terlici.dragndroplist.DragNDropSimpleAdapter.getView(DragNDropSimpleAdapter.java:66)
03-09 14:48:43.667: E/AndroidRuntime(18869):    at android.widget.AbsListView.obtainView(AbsListView.java:1409)
03-09 14:48:43.667: E/AndroidRuntime(18869):    at android.widget.ListView.makeAndAddView(ListView.java:1745)
03-09 14:48:43.667: E/AndroidRuntime(18869):    at android.widget.ListView.fillDown(ListView.java:670)
03-09 14:48:43.667: E/AndroidRuntime(18869):    at android.widget.ListView.fillGap(ListView.java:641)
03-09 14:48:43.667: E/AndroidRuntime(18869):    at android.widget.AbsListView.trackMotionScroll(AbsListView.java:3399)
03-09 14:48:43.667: E/AndroidRuntime(18869):    at android.widget.AbsListView.onTouchEvent(AbsListView.java:2233)
03-09 14:48:43.667: E/AndroidRuntime(18869):    at android.widget.ListView.onTouchEvent(ListView.java:3446)
03-09 14:48:43.667: E/AndroidRuntime(18869):    at com.terlici.dragndroplist.DragNDropListView.onTouchEvent(DragNDropListView.java:116)
03-09 14:48:43.667: E/AndroidRuntime(18869):    at android.view.View.dispatchTouchEvent(View.java:3885)
03-09 14:48:43.667: E/AndroidRuntime(18869):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:903)
03-09 14:48:43.667: E/AndroidRuntime(18869):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:942)
03-09 14:48:43.667: E/AndroidRuntime(18869):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:942)
03-09 14:48:43.667: E/AndroidRuntime(18869):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:942)
03-09 14:48:43.667: E/AndroidRuntime(18869):    at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1691)
03-09 14:48:43.667: E/AndroidRuntime(18869):    at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1125)
03-09 14:48:43.667: E/AndroidRuntime(18869):    at android.app.Activity.dispatchTouchEvent(Activity.java:2096)
03-09 14:48:43.667: E/AndroidRuntime(18869):    at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1675)
03-09 14:48:43.667: E/AndroidRuntime(18869):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:942)
03-09 14:48:43.667: E/AndroidRuntime(18869):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:942)
03-09 14:48:43.667: E/AndroidRuntime(18869):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:942)
03-09 14:48:43.667: E/AndroidRuntime(18869):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:942)
03-09 14:48:43.667: E/AndroidRuntime(18869):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:942)
03-09 14:48:43.667: E/AndroidRuntime(18869):    at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1691)
03-09 14:48:43.667: E/AndroidRuntime(18869):    at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1125)
03-09 14:48:43.667: E/AndroidRuntime(18869):    at android.app.Activity.dispatchTouchEvent(Activity.java:2096)
03-09 14:48:43.667: E/AndroidRuntime(18869):    at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1675)
03-09 14:48:43.667: E/AndroidRuntime(18869):    at android.view.ViewRoot.deliverPointerEvent(ViewRoot.java:2194)
03-09 14:48:43.667: E/AndroidRuntime(18869):    at android.view.ViewRoot.handleMessage(ViewRoot.java:1878)
03-09 14:48:43.667: E/AndroidRuntime(18869):    at android.os.Handler.dispatchMessage(Handler.java:99)
03-09 14:48:43.667: E/AndroidRuntime(18869):    at android.os.Looper.loop(Looper.java:130)
03-09 14:48:43.667: E/AndroidRuntime(18869):    at android.app.ActivityThread.main(ActivityThread.java:3683)
03-09 14:48:43.667: E/AndroidRuntime(18869):    at java.lang.reflect.Method.invokeNative(Native Method)
03-09 14:48:43.667: E/AndroidRuntime(18869):    at java.lang.reflect.Method.invoke(Method.java:507)
03-09 14:48:43.667: E/AndroidRuntime(18869):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
03-09 14:48:43.667: E/AndroidRuntime(18869):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
03-09 14:48:43.667: E/AndroidRuntime(18869):    at dalvik.system.NativeStart.main(Native Method)
03-09 14:48:48.897: I/Process(18869): Sending signal. PID: 18869 SIG: 9 
```

导致此崩溃的库中的类（`DragNDropSimpleAdapter`第 66 行）：` public class DragNDropSimpleAdapter extends SimpleAdapter implements DragNDropAdapter { int mPosition[]; 诠释 mHandler;

```
 public DragNDropSimpleAdapter(Context context, List<? extends Map<String, ?>> data, int resource, String[] from, int[] to, int handler) {
        super(context, data, resource, from, to);

        mHandler = handler;
        setup(data.size());
    }

    private void setup(int size) {
        mPosition = new int[size];

        for (int i = 0; i < size; ++i) mPosition[i] = i;
    }

    @Override
    public View getDropDownView(int position, View view, ViewGroup group) {
        return super.getDropDownView(mPosition[position], view, group);
    }

    @Override
    public Object getItem(int position) {
        return super.getItem(mPosition[position]);
    }

    @Override
    public int getItemViewType(int position) {
        return super.getItemViewType(mPosition[position]);
    }

    @Override
    public long getItemId(int position) {
        return super.getItemId(mPosition[position]);
    }

    @Override
    public View getView(int position, View view, ViewGroup group) {
        return super.getView(mPosition[position], view, group);
    }

    @Override
    public boolean isEnabled(int position) {
        return super.isEnabled(mPosition[position]);
    }

    @Override
    public void onItemDrag(DragNDropListView parent, View view, int position, long id) {

    }

    @Override
    public void onItemDrop(DragNDropListView parent, View view, int startPosition, int endPosition, long id) {
        int position = mPosition[startPosition];

        if (startPosition < endPosition)
            for(int i = startPosition; i < endPosition; ++i)
                mPosition[i] = mPosition[i + 1];
        else if (endPosition < startPosition)
            for(int i = startPosition; i > endPosition; --i)
                mPosition[i] = mPosition[i - 1];

        mPosition[endPosition] = position;
    }

    @Override
    public int getDragHandler() {
        return mHandler;
    }
} 
```

**我的 XML 代码**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:id="@+id/relativelayout" >

    <LinearLayout
        android:id="@+id/profile_and_reset"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/relativelayout"
        android:orientation="horizontal" >

        <TextView
            android:id="@+id/profileView"
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:layout_weight="0.94"
            android:layout_gravity="center_vertical"
            android:textSize="18sp"/>

        <Button
            android:id="@+id/reset"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="right"
            android:text="@string/reset_button" />
    </LinearLayout>

<View
    android:layout_width="fill_parent"
    android:layout_height="1dp"
    android:background="@android:color/darker_gray"
    android:layout_below="@+id/profile_and_reset"
    android:id="@+id/seperator"/>

    <com.terlici.dragndroplist.DragNDropListView
        android:id="@android:id/list"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_below="@+id/seperator"
        android:layout_above="@+id/second_seperator"/>

<View
    android:layout_width="fill_parent"
    android:layout_height="1dp"
    android:background="@android:color/darker_gray"
    android:id="@+id/second_seperator"
    android:layout_above="@+id/add_and_instructions"/>

    <LinearLayout
        android:id="@+id/add_and_instructions"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/relativelayout"
        android:layout_alignParentBottom="true"
        android:orientation="horizontal" >

    <Button
        android:id="@+id/add"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="bottom"
        android:text="@string/add_button" />

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/instructions" />

    </LinearLayout>

</RelativeLayout> 
```

**更新**

现在我切换到常规活动，这种方法不起作用：

```
@SuppressWarnings("unchecked")
protected void onListItemClick(ListView l, View v, int position, long id) {
        // TODO Auto-generated method stub
        if(lv.isClickable()){
            super.onListItemClick(l, v, position, id);
            Map<String, String> map = (Map<String, String>) lv.getAdapter().getItem(position);
            String scurrents = map.get("current");
            String getnames = map.get("name");
            String getname = java.net.URLEncoder.encode(getnames);

            int current = Integer.parseInt(scurrents);
            if(current>0){
                int newcurrent = current-1;

                SetSql UC = new SetSql(this);
                UC.open();
                UC.changeCurrent(newcurrent, current, getname);
                UC.close();
                onResume();
            }
        }
} 
```

我在 中遇到错误`super.onListItemClick`，因为它不适用于 Activity。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T11:26:47.137

您遇到错误，因为 getView() 试图越界访问数组，我认为这是由于未正确引用 listView 以将其附加到适配器。

`DragNDropListView lv = (DragNDropListView)findViewById(R.id.list);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T12:16:28.963

如您的 Logcat 文件所示：

您必须将您的 id`listview`设置为

```
android.R.id.list 
```

# vba - 展开宏选择文件夹A中的所有“txt”文件，处理完后在其他文件夹B中同名保存

> ID：15310028
> 
> 赞同：2
> 
> 时间：2013-03-09T11:15:42.907
> 
> 标签：vba

EXCEL 2010 您可以在下面找到一个运行良好的书面宏，但它只能逐个处理。原始文件有一个特定的扩展名，想用 Excel 打开它们，然后执行下面的代码。虽然保存应该保留**原始名称**，但只有扩展名是 .xlsm。保存到其他文件夹现在正在工作，但目前不保留名称。我看到有些人问了几乎相同的问题，但我还没有找到正确的答案。我正在寻找打开（使用 excel）所有文件*.ext*或*.FUG*文件夹 A 的方法，处理宏，保存为文件夹 B**并保持原始名称**，但扩展 .xlsm 有没有办法简化宏?

```
Sub tekst_naar_kolom()
'
' tekst_naar_kolom Macro
'
' Sneltoets: Ctrl+x
'
    Columns("A:A").Select
    Selection.TextToColumns Destination:=Range("A1"), DataType:=xlDelimited, _
        TextQualifier:=xlDoubleQuote, ConsecutiveDelimiter:=False, Tab:=False, _
        Semicolon:=True, Comma:=False, Space:=False, Other:=False, FieldInfo _
        :=Array(Array(1, 3), Array(2, 1), Array(3, 1), Array(4, 1), Array(5, 1), Array(6, 1), _
        Array(7, 1), Array(8, 1), Array(9, 1), Array(10, 1), Array(11, 1)), DecimalSeparator:= _
        ".", TrailingMinusNumbers:=True
    Cells.Select
    Cells.EntireColumn.AutoFit
    With Selection
        .HorizontalAlignment = xlRight
        .VerticalAlignment = xlBottom
        .WrapText = False
        .Orientation = 0
        .AddIndent = False
        .IndentLevel = 0
        .ShrinkToFit = False
        .ReadingOrder = xlContext
        .MergeCells = False
    End With
    Range("A4").Select
    ActiveWindow.FreezePanes = True
    ChDir _
        "D:\destinationfolder"
    ActiveWorkbook.SaveAs Filename:= _
        "D:\destinationfolder\**save file with same name**.xlsm" _
        , FileFormat:=xlOpenXMLWorkbookMacroEnabled, CreateBackup:=False
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T21:15:45.697

我建议使用 Windows Scripting Host FileSystemObject，后面的代码会绑定这个对象并遍历源文件夹的文件集合。当它找到以 .ext 或 .FUG 结尾的文件时，它会对其进行处理并将其作为 .xlsm 文件保存在目标文件夹中。
只需调整 Source 和 Destination 文件夹并运行它 - 无论此代码所在的任何工作簿都不会更改，它会单独打开并保存文件，在处理过程中使该工作簿保持打开状态。

```
Sub tekst_naar_kolom()
    Dim FSO As Object
    Dim oFile As Object
    Dim sSourcePath, sDestinationPath As String
    Dim sFileName, sNewFileName As String
    Dim wbProcess As Workbook

    'set source and destination folders
    Set FSO = CreateObject("Scripting.FileSystemObject")
    sSourcePath = "C:\sourceFolder\"
    sDestinationPath = "C:\destinationFolder\"

    For Each oFile In FSO.GetFolder(sSourcePath).Files
        'if the current file ends with .ext or .FUG process it
        If LCase(Mid(oFile.Name, InStrRev(oFile.Name, "."))) = ".ext" Or _
                LCase(Mid(oFile.Name, InStrRev(oFile.Name, "."))) = ".guh" Or _
                LCase(Mid(oFile.Name, InStrRev(oFile.Name, "."))) = ".fug" Then
            'create the new file name & path
            sNewFileName = Left(oFile.Name, InStrRev(oFile.Name, ".") - 1)
            sNewFileName = sDestinationPath & sNewFileName & ".xlsm"

            'if the same file exists in the destination folder, do not process it
            If Not FSO.FileExists(sNewFileName) Then
                'use WorkBooks.OpenText to interpret the file
                Workbooks.OpenText oFile.Path, DataType:=xlDelimited, _
                    TextQualifier:=xlDoubleQuote, ConsecutiveDelimiter:=False, Tab:=False, _
                    Semicolon:=True, Comma:=False, Space:=False, Other:=False, FieldInfo _
                    :=Array(Array(1, 3), Array(2, 1), Array(3, 1), Array(4, 1), Array(5, 1), Array(6, 1), _
                    Array(7, 1), Array(8, 1), Array(9, 1), Array(10, 1), Array(11, 1)), DecimalSeparator:= _
                    ".", TrailingMinusNumbers:=True
                Set wbProcess = ActiveWorkbook
                wbProcess.Sheets(1).Columns("A:A").TextToColumns Destination:=Range("A1"), DataType:=xlDelimited, _
                    TextQualifier:=xlDoubleQuote, ConsecutiveDelimiter:=False, Tab:=False, _
                    Semicolon:=True, Comma:=False, Space:=False, Other:=False, FieldInfo _
                    :=Array(Array(1, 3), Array(2, 1), Array(3, 1), Array(4, 1), Array(5, 1), Array(6, 1), _
                    Array(7, 1), Array(8, 1), Array(9, 1), Array(10, 1), Array(11, 1)), DecimalSeparator:= _
                    ".", TrailingMinusNumbers:=True

                'autofit all columns, format
                wbProcess.Sheets(1).Cells.Select
                wbProcess.Sheets(1).Cells.EntireColumn.AutoFit
                With wbProcess.Sheets(1).Cells
                    .HorizontalAlignment = xlRight
                    .VerticalAlignment = xlBottom
                    .WrapText = False
                    .Orientation = 0
                    .AddIndent = False
                    .IndentLevel = 0
                    .ShrinkToFit = False
                    .ReadingOrder = xlContext
                    .MergeCells = False
                End With
                'freeze panes
                wbProcess.Sheets(1).Range("A4").Select
                wbProcess.Windows(1).FreezePanes = True

                'save in new folder with new file name
                wbProcess.SaveAs Filename:=sNewFileName _
                    , FileFormat:=xlOpenXMLWorkbookMacroEnabled, CreateBackup:=False
                'reset variable for next file
                wbProcess.Close False
                Set wbProcess = Nothing
            End If
        End If
    Next oFile
End Sub 
```

# java - facelet 调试模式不起作用

> ID：15310030
> 
> 赞同：5
> 
> 时间：2013-03-09T11:15:49.977
> 
> 标签：java, jsf, facelets

我在 web.xml 中有这个条目

```
<context-param>
        <param-name>facelets.DEVELOPMENT</param-name>
        <param-value>true</param-value>
</context-param> 
```

尝试 Ctrl+Shift+D 打开调试模式，但没有工作，我的浏览器的书签被打开。

所以放一个页级调试。

```
<ui:debug hotkey="z" rendered="true" /> 
```

调试结果现在在另一个窗口中打开，但不加载组件树信息（但显示范围变量）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T00:55:17.380

> *facelets 版本是 1.1.14*

您对问题描述不是很清楚，但是根据[问题 292](http://java.net/jira/browse/FACELETS-292)在 1.1.15 中修复了一个类似的错误。请注意，调试窗口**确实**加载了组件树信息（它只是通过右键单击和*查看源代码*在生成的 HTML 输出中可见），但由于展开按钮中的 JS 问题，它根本无法展开。

只需升级到 Facelets 1.1.15。它也是最新的 Facelets 1.x 版本。你可以[在这里](https://repository.jboss.org/nexus/content/repositories/thirdparty-releases/com/sun/facelets/jsf-facelets/1.1.15/jsf-facelets-1.1.15.jar)下载。

# c# - C# 中的 N 层架构

> ID：15310032
> 
> 赞同：1
> 
> 时间：2013-03-09T11:15:55.113
> 
> 标签：c#, data-access-layer, business-logic-layer, n-layer

我第一次尝试在我的项目中实现 N 层架构。

我创建了 BLL、DAL 和 GUI

这是在 GUI

```
XmlSettingsBLL xmlSettings = new XmlSettingsBLL();

  var newDict = new NewDictionary()
  {
   StrDataSourceType = "AccessMdb",// DataSourceType.AccessMdb,
   DictionaryID = Guid.NewGuid().ToString(),
   FirstColumnName = "Kelime",
   SecondColumnName = "Karsilik",
   TableName = "kelimelerpro",
   LastShowedID = 0,
   Name = "kpds",
   Path = "kelimeler.mdb"
  };

  xmlSettings.AddNewDictionary(newDict); 
```

这是在 BLL

```
public bool AddNewDictionary(NewDictionary list)
{
list.DatasourceType = (DataSourceType)Enum.Parse(typeof (DataSourceType), list.StrDataSourceType);

IDictionaryList newDictionary =list;

try
{
   helper.AddDictionary(newDictionary);
   return true;
}
catch
{
  return false;
}      
}

 public class NewDictionary : IDictionaryList
{
    public string Name { get; set; }
    public string Path { get; set; }
    public string DictionaryID { get; set; }
    public string TableName { get; set; }
    public int LastShowedID { get; set; }
    public string FirstColumnName { get; set; }
    public string SecondColumnName { get; set; }
    public DataSourceType DatasourceType { get; set; }
    public string StrDataSourceType { get; set; }  
} 
```

这是在 DAL

```
 public void AddDictionary(IDictionaryList list)
 {
   var channelElem = xdoc.Element("MemorizeSettings");
   var dictionaries = channelElem.Element("Dictionaries"); 

   XAttribute[] attrs = new XAttribute[8];
   attrs[0] = new XAttribute("Name", list.Name);
   attrs[1] = new XAttribute("Path", list.Path);
   attrs[2] = new XAttribute("TableName", list.TableName);
   attrs[3] = new XAttribute("DatasourceType", Enum.GetName(typeof(DataSourceType),list.DatasourceType));
   attrs[4] = new XAttribute("LastShowedID", "0");
   attrs[5] = new XAttribute("FirstColumnName", list.FirstColumnName);
   attrs[6] = new XAttribute("SecondColumnName", list.SecondColumnName);
   attrs[7] = new XAttribute("DictionaryID", list.DictionaryID);

   var newdict = new XElement("Dictionary", attrs);

   dictionaries.Add(newdict);
   xdoc.Save(fileName);
 }

public interface IDictionaryList
{
     string Name { get; set; }
     string Path { get; set; }
     string DictionaryID { get; set; }
     string TableName { get; set; }
     int LastShowedID { get; set; }
     string FirstColumnName { get; set; }
     string SecondColumnName { get; set; }
     DataSourceType DatasourceType { get; set; }
} 
```

因此，在 GUI 中，自然需要添加 DAL 作为参考，因为我从 DAL 中的 IDictionary 派生了 NewDictionary。但我想将 GUI 和 DAL 分开。

除了创建一个 IDictionary 对象，我该怎么做？我希望问题很清楚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T11:55:31.827

在双方不能相互引用、合同没有第三方引用的情况下；唯一合乎逻辑的解决方案是将其视为域的更改。您可以使用 DataContract 和 DataContractSerializer 来帮助您。

[从这里借来的序列化器](https://stackoverflow.com/questions/5010191/using-datacontractserializer-to-serialize-but-cant-deserialize-back)

```
 public static string Serialize(object obj)
    {
        using (MemoryStream memoryStream = new MemoryStream())
        {
            DataContractSerializer serializer = new DataContractSerializer(obj.GetType());
            serializer.WriteObject(memoryStream, obj);
            return Encoding.UTF8.GetString(memoryStream.ToArray());
        }
    }

    public static object Deserialize(string xml, Type toType)
    {
        using (MemoryStream memoryStream = new MemoryStream(Encoding.UTF8.GetBytes(xml)))
        {
            XmlDictionaryReader reader = XmlDictionaryReader.CreateTextReader(memoryStream, Encoding.UTF8, new XmlDictionaryReaderQuotas(), null);
            DataContractSerializer serializer = new DataContractSerializer(toType);
            return serializer.ReadObject(reader);
        }
    } 
```

在这里，您实际上在（假装）两个库中定义了相同的对象.. FooA 和 FooB

```
 [DataContract(Name="Foo")]
    public class FooA
    {
        [DataMember] 
        public int Value;
    }

    [DataContract(Name = "Foo")]
    public class FooB
    {
        [DataMember]
        public int Value;
    }

    static public void Main()
    {
        var fooA = new FooA() {Value = 42};

        var serialised = Serialize(fooA);

        // Cross domain

        var fooB = (FooB) Deserialize(serialised, typeof(FooB));

        Console.WriteLine(fooB.Value);

    } 
```

查找[Windows 通信基础](http://msdn.microsoft.com/en-GB/library/ms733127.aspx)

> 数据契约是服务和客户端之间的正式协议，它抽象地描述了要交换的数据。也就是说，为了进行通信，客户端和服务不必共享相同的类型，只需相同的数据契约。数据契约为每个参数或返回类型精确定义了哪些数据被序列化（转换为 XML）以进行交换。

# android - 包含 ImageView 图像的 Android RelativeLayout.setRotation 具有倾斜的边缘

> ID：15310033
> 
> 赞同：2
> 
> 时间：2013-03-09T11:15:57.153
> 
> 标签：android

我有一个包含 ImageView 或 TextView 的 RelativeLayout。我打电话：

```
relativeLayout.setRotation(8); 
```

ImageView 和 TextView 有倾斜的边缘，我想删除。

[屏幕图像](http://www.adoubleu.de/files/Screen.png)

**到目前为止我已经尝试过：**

覆盖所有布局和视图以添加：

```
protected void dispatchDraw(Canvas canvas) {
    canvas.setDrawFilter(new PaintFlagsDrawFilter(0, 
        Paint.DEV_KERN_TEXT_FLAG | Paint.SUBPIXEL_TEXT_FLAG | 
        Paint.ANTI_ALIAS_FLAG | Paint.FILTER_BITMAP_FLAG | 
        Paint.DITHER_FLAG)
    );
    super.dispatchDraw(canvas);
} 
```

有人有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-29T15:11:46.630

尝试将 PaintFlagsDrawFilter 设置为 1 而不是 0：

```
 protected void dispatchDraw(Canvas canvas) {
    canvas.setDrawFilter(new PaintFlagsDrawFilter(1, 
        Paint.DEV_KERN_TEXT_FLAG | Paint.SUBPIXEL_TEXT_FLAG | 
        Paint.ANTI_ALIAS_FLAG | Paint.FILTER_BITMAP_FLAG | 
        Paint.DITHER_FLAG)
    );
    super.dispatchDraw(canvas);
} 
```

# php - 是否可以在 drupal 安装中自动检测未使用的文件？

> ID：15310034
> 
> 赞同：2
> 
> 时间：2013-03-09T11:16:00.413
> 
> 标签：php, drupal-6

我不得不采用一个非常混乱和 hacky 的基于 drupal 的网站。

现在我需要慢慢清除所有问题。有帮助的 drupal 似乎有一个很好的 cron 脚本，它可以清理一些东西。

然而，有大量看似未使用的文件（图像等）。

有没有办法在站点中搜索哪些文件是多余的？

此外，管理员似乎尝试并使用了大量现在未使用的模块，这些模块在数据库中留下了很多东西。

有什么办法可以自动清理吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T11:26:30.610

据我所知，没有脚本可以清理未使用的模块。但是您使用 drush 一次性卸载禁用的模块。如果您使用 drupal-6，请确保模块具有 hook_uninstall 功能以删除由正在卸载的模块创建的表

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T11:28:32.870

据我所知，没有办法删除未使用的文件（非模块文件）。

但是，如果一个模块不再被使用，您可以通过在 /admin/build/modules 禁用它并在 /admin/build/modules/uninstall[卸载它来卸载它。](http://drupal.org/node/250783)

通常，大多数开发良好的模块都有一个相应的[hook_uninstall()](http://api.drupal.org/api/drupal/developer%21hooks%21install.php/function/hook_uninstall/6)应该删除模块创建的任何变量和表。

# iphone - 如何循环播放图像序列，倒序

> ID：15310038
> 
> 赞同：0
> 
> 时间：2013-03-09T11:16:17.480
> 
> 标签：iphone

我正在使用下面的代码

```
 UIImageView* campFireView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 175, 175)];
     // load all the frames of our animation
     campFireView.animationImages = [NSArray arrayWithObjects:
                                     [UIImage imageNamed:@"a1.png"],
                                     [UIImage imageNamed:@"a2.png"],
                                     [UIImage imageNamed:@"a3.png"],
                                     [UIImage imageNamed:@"a4.png"],
                                     [UIImage imageNamed:@"a5.png"],
                                     [UIImage imageNamed:@"a6.png"],
                                     [UIImage imageNamed:@"a7.png"],
                                     [UIImage imageNamed:@"a8.png"],
                                     [UIImage imageNamed:@"a9.png"],
                                     [UIImage imageNamed:@"a10.png"],
                                     nil];

     // all frames will execute in 1.75 seconds
     campFireView.animationDuration = 0.75;
     // repeat the annimation forever
     campFireView.animationRepeatCount = 0;
     // start animating
     [campFireView startAnimating];
     // add the animation view to the main window 
     [self.view addSubview:campFireView];   //  [campFireView release]; 
```

这适用于 a1 到 a10 ，我怎样才能继续以相反的顺序移动，所以它应该连续动画 a1 到 a10 到 a1 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T11:20:25.667

```
campFireView.animationImages = [NSArray arrayWithObjects:
                                [UIImage imageNamed:@"a1.png"],
                                [UIImage imageNamed:@"a2.png"],
                                [UIImage imageNamed:@"a3.png"],
                                [UIImage imageNamed:@"a4.png"],
                                [UIImage imageNamed:@"a5.png"],
                                [UIImage imageNamed:@"a6.png"],
                                [UIImage imageNamed:@"a7.png"],
                                [UIImage imageNamed:@"a8.png"],
                                [UIImage imageNamed:@"a9.png"],
                                [UIImage imageNamed:@"a10.png"],
                                [UIImage imageNamed:@"a9.png"],
                                [UIImage imageNamed:@"a8.png"],
                                [UIImage imageNamed:@"a7.png"],
                                [UIImage imageNamed:@"a6.png"],
                                [UIImage imageNamed:@"a5.png"],
                                [UIImage imageNamed:@"a4.png"],
                                [UIImage imageNamed:@"a3.png"],
                                [UIImage imageNamed:@"a2.png"],
                                [UIImage imageNamed:@"a1.png"],
                                nil]; 
```

# php - 使用 php 查找并显示所有用户

> ID：15310045
> 
> 赞同：-3
> 
> 时间：2013-03-09T11:17:03.853
> 
> 标签：php, mysql

我正在尝试显示与**用户 ID具有相同****ID的所有用户**

 **假设**pim za**是用户并且她的 id = 1 ，我想显示谁都有**oid** = 1。

我在显示它们时遇到问题。我希望它显示所有用户并在没有用户时结束。

我正在使用以下方式：

```
$CheckQuery = mysql_query("SELECT * FROM tblfduser WHERE id='$user->id'"); 
```

显示应如下所示：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T11:19:22.390

尝试

```
$CheckQuery = mysql_query("SELECT * FROM tbluser WHERE id='".$user->id."'"); 
```

现在查询后你可以得到如下的关联数组。

```
while($row = mysql_fetch_assoc($CheckQuery))
{
    echo $row['uname']."<br/>";
} 
```

请不要使用`mysql_*`它已弃用。

小心sql注入

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T11:24:20.767

```
SELECT  a.ID, a.Fname, a.Lname, a.OID,
        b.ID bID, 
        b.Fname oFNAME, 
        b.Lname oLNAME 
FROM    users a
        INNER JOIN users b
            ON a.id = b.oid
ORDER BY a.ID 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/e4815/5)
*   [SQLFiddle 演示（*带过滤器*）](http://www.sqlfiddle.com/#!2/e4815/6)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T11:30:47.163

我会这样做：（我相信这是使用 PDO 的正确方法）

你的班级；你的功能：

```
public static function getByOid( $oid ) {
$conn = new PDO( DB_DSN, DB_USERNAME, DB_PASSWORD );
$sql = "SELECT * FROM users WHERE oid = :oid";
$st = $conn->prepare( $sql );
$st->bindValue( ":oid", $oid, PDO::PARAM_INT );
$st->execute();
$row = $st->fetch();
$conn = null;
if ( $row ) return new YourClass( $row );
} 
```

和调用类::函数：

```
$results['oid'] = YourClass::getByOid( (int)$_GET["oid"] ); 
```

在您的页面上，获取结果：

```
using "foreach" 
```**

# svg - 哪些 Web 浏览器支持将前一层作为源的 SVG 过滤？

> ID：15310046
> 
> 赞同：0
> 
> 时间：2013-03-08T15:27:05.483
> 
> 标签：svg, background, svg-filters

我创建了一个自定义 SVG 过滤器，它使用背景图像作为源。然后它应用一个随机置换贴图来模拟我非常喜欢的光学失真（例如水焦散、热流动空气的翘曲）。

它在 Inkscape 中正确呈现，但在 Internet Explorer 10 和 Chrome 中均不正确。显然，使用背景图像作为过滤器输入是一个模糊的功能，一些 SVG 渲染器可能不支持，因为缓冲中间图像需要额外的内存。我还必须在其中一个 SVG 图层中设置 enable-background=new ，以便 Inkscape 正确显示它。有谁知道哪些网络浏览器或免费提供的独立程序（Inkscape 除外）可以正确显示此类图像？

我在下面附上了一个例子（你应该看到一个下半部分被过滤器扭曲的星星）。

[链接到 JSBin 上的实时 SVG 图像](http://jsbin.com/oveqoh/1/)

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!-- Created with Inkscape (http://www.inkscape.org/) -->
<svg id="svg1380" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"     style="enable-background:new" xmlns="http://www.w3.org/2000/svg" height="190" width="367" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:dc="http://purl.org/dc/elements/1.1/">
<defs id="defs1382">
<filter id="filter1945" style="color-interpolation-filters:sRGB">
<feTurbulence id="feTurbulence1947" baseFrequency="0.034000000000000009" seed="397" result="turbulence" numOctaves="4" type="turbulence"/>
<feDisplacementMap id="feDisplacementMap1949" scale="100" yChannelSelector="G" in2="turbulence" xChannelSelector="R" in="BackgroundImage"/>
</filter>
<radialGradient id="radialGradient5645" gradientUnits="userSpaceOnUse" cy="402" cx="359" gradientTransform="matrix(.0557 -.0464 .178 .207 268 339)" r="417">
<stop id="stop5641" stop-color="#fee" offset="0"/>
<stop id="stop5643" stop-color="#fee" stop-opacity="0" offset="1"/>
</radialGradient>
<radialGradient id="radialGradient5653" gradientUnits="userSpaceOnUse" cy="407" cx="248" gradientTransform="matrix(.537 -.681 .793 .625 -234 -28)" r="47.2">
<stop id="stop5649" stop-color="#f00" offset="0"/>
<stop id="stop5651" stop-color="#784421" offset="1"/>
</radialGradient>
</defs>
<metadata id="metadata1385">
<rdf:RDF>
<cc:Work rdf:about="">
<dc:format>image/svg+xml</dc:format>
<dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/>
<dc:title/>
</cc:Work>
</rdf:RDF>
</metadata>
<g fill-rule="evenodd">
<rect id="rect5726" height="135" width="339" y="0" x="27.9"/>
<path id="path5635" opacity=".998" d="m266 80-36-6-18 31-5-35.4-36-7.5 33-16.1-4-35.9 25 25.8 33-14.8-17 32.1z" fill="url(#radialGradient5653)"/>
<rect id="rect1935" transform="matrix(.435 0 .0110 .656 32.9 -151)" height="189" filter="url(#filter1945)" width="694" y="313" x="-13.6" fill="url(#radialGradient5645)"/>
</g>
</svg> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T20:27:14.940

Background-image 目前仅支持 Opera 和 IE10 作为过滤器输入，因此这在大多数浏览器中不起作用。（并且背景图像似乎不适用于歌剧的内联 SVG - 仅在 .svg 文件中）

# android - 使用 loadDataWithBaseUrl() 时如何设置缓存 WebView？

> ID：15310047
> 
> 赞同：1
> 
> 时间：2013-03-09T11:17:32.340
> 
> 标签：android

```
 final ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    final NetworkInfo active = cm.getActiveNetworkInfo();
    if (active != null && active.isConnected()) {
        String appCachePath = getApplicationContext().getCacheDir()
                .getAbsolutePath();
        webview.getSettings().setAppCachePath(appCachePath);
        webview.getSettings().setCacheMode(
                WebSettings.LOAD_DEFAULT);
        webview.getSettings().setAppCacheMaxSize(1024 * 0124 * 8);
        webview.loadDataWithBaseURL("", "<html><head><title>Cache Test</title></head><body><p>This is Icon</p><br/><img src='http://google.com.us/images/icons/product/chrome-48.png'></body></html>", "text/html", "UTF-8", "");
    } else {
        webview.getSettings().setCacheMode(WebSettings.LOAD_CACHE_ONLY);
        webview.loadDataWithBaseURL("", "<html><head><title>Cache Test</title></head><body><p>This is Icon</p><br/><img src='http://google.com.us/images/icons/product/chrome-48.png'></body></html>", "text/html", "UTF-8", ""); } 
```

清单有：

```
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE"/>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

但是当我离线打开 webview 时，webview 返回“Null”。请帮我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T11:22:15.353

请参阅此[http://alex.tapmania.org/2010/11/html5-cache-android-webview.html](http://alex.tapmania.org/2010/11/html5-cache-android-webview.html)进行扩展讨论，我认为该讨论涵盖了您正在尝试做的事情。

# c++ - 是否有任何用于 C++ 的 Lua 表迭代器包装器？

> ID：15310074
> 
> 赞同：2
> 
> 时间：2013-03-09T11:20:12.733
> 
> 标签：c++, lua, iterator, lua-table

我想从 Lua 代码中调用一些 C++ 函数并在参数中传递 Lua 表，如下所示：

```
call_cpp_function_from_lua({ x = 10, y = 20 }) 
```

在`call_cpp_function_from_lua`我想获取并使用迭代器来表示 Lua 表的 C++，如下所示：

```
std::map<boost::variant<LuaTypesList>, boost::variant<LuaTypesList>>::iterator it = getLuaTableBegin(); 
```

我可以使用 C API 来执行此操作，但它很乏味且容易出错，请参阅[Iterating through a Lua table from C++?](https://stackoverflow.com/q/1438842/72178) .

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T10:57:33.200

[QtLua 库](http://www.nongnu.org/libqtlua/manual/Iterator_class_reference.html)为 Lua 表实现了 C++ 迭代器。它有`Value::iterator`和`Value::const_iterator`类，允许 Lua 表的迭代。以下是有关如何使用它们的简短示例：

```
// code from examples/cpp/value/iterate.cc:32

    QtLua::State state;

    // New lua table value
    state.exec_statements("table = { a = 1, b = 2, c = 3 }");

    QtLua::Value table = state["table"];

    // Iterate over lua table from C++ code
    for (QtLua::Value::const_iterator i = table.begin(); i != table.end(); i++)
      qDebug() << i.key().to_string_p()
               << i.value().to_string_p(); 
```

# rest - RESTful URI 设计

> ID：15310077
> 
> 赞同：1
> 
> 时间：2013-03-09T11:20:42.897
> 
> 标签：rest, restful-url

我正在寻找一种将搜索表示为 RESTful uri 的正确方法。

我有两个模型：国家和国家，国家有一个集合国家。

用 id 或 name 属性表示搜索国家/地区的正确方法是什么？

```
api/countries/1/id

api/countries/Italy/name 
```

或者

```
api/countries?id=1

api/countries?name=Italy 
```

另外，如果我想查看状态列表？

```
api/countries/1/id/states

api/countries/Italy/name/states 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T12:36:40.080

对于这两个模型，即。 `countries`并且`states`，我认为遵循 Uri 模式将是最合适的。

1.  所有国家 ： `api/country`
2.  具体国家：`api/country/{England}`
3.  所有国家：`api/country/{England}/State`
4.  具体状态：`api/country/{England}/State/{Berkshire}`

在上面的例子中，里面`{}`的值代表变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T11:32:46.083

这取决于你的口味。两种变体都可以。

对于状态，可以创建新端点

```
api/states/name/Italy 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-24T06:35:52.413

您在 REST URL 中使用名称的方法是错误的。该名称只是国家的一个属性，而不是子资源，这意味着您不应该在 URL 中看到它。但是，可以选择将其用作键，在这种情况下，可以使用名称的**值**代替 ID。

```
api/countries/Italy 
```

我认为您想要实现的是过滤字段，即仅获取名称：

```
api/countries/Italy/states?fields=name 
```

或者，如果您预定义了一些格式

```
api/countries/Italy/states?format=onlyName 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-20T23:01:32.740

> 用 id 或 name 属性表示搜索国家/地区的正确方法是什么？

tl; dr：**变体一是混淆的秘诀**。如果必须选择，请使用*查询字符串*进行*搜索*。

* * *

就 REST 宣言而言，URI 逻辑只是一个实现细节——唯一需要关注的是该位置的访问机制不能随着时间的推移而中断。内容可能被清空或移动 - 但 URI 必须始终以服务端点结束，该端点为客户端提供他们理解并可以采取行动的预响应（即 3** 重定向或客户端的超媒体重新发现）。

然而，许多成功且设计良好的 API 都试图公开内在一致的逻辑，旨在变得直观可探索。因此，关于开发人员的经验和市场成功，您的第一个示例 `api/countries/1/id` 实际上是**不好的，因为它使用起来令人困惑：**

1.  通过查看 URI，您没有任何线索表明您正在运行（可能是 CPU/内存昂贵的）搜索而不是检索单个资源
2.  许多公共 API 遵循资源层次结构和公开的 URI 之间的逻辑映射 - 因此常见的期望是`api/countries/1/id`检索`{1}`（作为无意义的查询）或`api/countries/1/name`给出`{Italy}`.

因此，*查询*字符串是一个很好的选择——尤其是提供*搜索*功能。从文字中可以看出含义；）

```
api/countries?name=Italy 
api/countries?q=name(Ital*)              // same result
api/countries?q=isoCode=(IT)             // same result

--> api/countries/1/states               // list all states of Italy
    api/states?q=country/name(Italy)     // - same -
    api/states?q=country/id(1)           // - same - 
```

仅通过查看 URI 就可以预期请求的响应正文，这很好。更好的是：它有助于区分资源和视图。“视图”在查询字符串中定义，将其视为镜头或过滤器，通过它您可以查看相同资源（您的国家/地区集合）的摘录。

这种模式在这些方面同样出色，并且也很常见：

```
api/countries/search/Italy
api/countries/search/name=Italy
api/countries/search/isoCode=IT,name=*aly 
```

选择此选项的原因可能与构建 API 时的实际实现细节有关——因为它将对资源的直接访问与搜索操作分开——满足请求所需的 CPU/内存以及响应计数和格式可能从根本上是不同的。

# vector - 长度重复与输入向量不同的排列

> ID：15310078
> 
> 赞同：2
> 
> 时间：2013-03-09T11:20:49.790
> 
> 标签：vector, combinations, octave, linear-algebra, algebra

如何解决显示所有可能的向量组合的问题

```
x ="abcdefghijklmnopqrstuvwxyz" 
```

我会在其中将它自己相乘。我想要这样的解决方案：

```
"aa","ab","ac",..."za","zb",.."zz" 
```

我可以为每个元素编制索引。

我还想要相同乘法的解决方案，我将得到三个和四个相同 x 向量的结果，即解决方案将是：

```
"aaa","aab"..."zzz" and "aaaa","aaab",..."zzzz" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T15:09:33.817

试试这个功能`ndgrid()`。其结果取决于输出参数的数量。这是所有 3 组重复的答案

```
octave> [x y z] = ndgrid ("abcdef");
octave> allcombs = [x(:) y(:) z(:)]; 
```

我没有打印结果，因为它很长。使用函数`ndgrid()`,`perms()`和`nchoosek()`可以很容易地解决这类问题。

对于 n 长度，使用`nthargout()`.

```
octave> cart  = nthargout ([1:n], @ndgrid, "abcdef");
octave> combs = cell2mat (cellfun (@(c) c(:), cart, "UniformOutput", false)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T12:05:03.400

如果将字母映射为整数（请参阅 toascii），则可以通过添加以 25 为底的数字来生成所有组合（toascii('z') - toascii('a')）。例如，0 -> 'a'、25 -> 'z'、26 -> 'ba' 等等。

这样您就可以按顺序生成所有组合

# android - 使用 Fragments 会导致崩溃

> ID：15310082
> 
> 赞同：3
> 
> 时间：2013-03-09T11:21:45.197
> 
> 标签：android, android-fragments

我一直在努力创建最简单的项目，这会导致我遇到问题。我最初认为这是一个地图问题，直到我意识到这可能是一个一般的（*支持库*？）片段问题。（我尝试在我的 SGII v4.1.2 上运行此代码）

Java代码：

```
package com.example.testapp;

import android.os.Bundle;
import android.support.v4.app.FragmentActivity;

public class MSMap extends FragmentActivity {
  @Override
  protected void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.activity_msmap);
  }
} 
```

XML 布局

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" 
    >
    <fragment        
        android:id="@+id/themap"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
         />
</RelativeLayout> 
```

上面用“错误膨胀”给出了这个错误：

> 03-09 12:06:56.850: E/AndroidRuntime(891): 致命异常: main 03-09 12:06:56.850: E/AndroidRuntime(891): java.lang.RuntimeException: 无法启动活动 ComponentInfo{com. example.testapp/com.example.testapp.MSMap}：android.view.InflateException：二进制 XML 文件第 9 行：膨胀类片段时出错 03-09 12:06:56.850：E/AndroidRuntime(891)：在 android.app .ActivityThread.performLaunchActivity(ActivityThread.java:2110) 03-09 12:06:56.850: E/AndroidRuntime(891): 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2135) 03-09 12:06:56.850 : E/AndroidRuntime(891): at android.app.ActivityThread.access$700(ActivityThread.java:140) 03-09 12:06:56.850: E/AndroidRuntime(891): at android.app.ActivityThread$H.handleMessage (ActivityThread.java:1237) 03-09 12:06:56.850: E/AndroidRuntime(891):在 android.os.Handler.dispatchMessage(Handler.java:99) 03-09 12:06:56.850: E/AndroidRuntime(891): 在 android.os.Looper.loop(Looper.java:137) 03-09 12 ：06：56.850：E / AndroidRuntime（891）：在android.app.ActivityThread.main（ActivityThread.java：4921）03-09 12：06：56.850：E / AndroidRuntime（891）：在java.lang.reflect。 Method.invokeNative(Native Method) 03-09 12:06:56.850: E/AndroidRuntime(891): at java.lang.reflect.Method.invoke(Method.java:511) 03-09 12:06:56.850: E /AndroidRuntime(891): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1027) 03-09 12:06:56.850: E/AndroidRuntime(891): 在 com.android.internal。 os.ZygoteInit.main(ZygoteInit.java:794) 03-09 12:06:56.850: E/AndroidRuntime(891): at dalvik.system.NativeStart.main(Native Method) 03-09 12:06:56.850: E /Android 运行时（891）：引起：android.view.InflateException：二进制 XML 文件第 9 行：膨胀类片段时出错 03-09 12:06:56.850：E/AndroidRuntime(891)：在 android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:704 ) 03-09 12:06:56.850: E/AndroidRuntime(891): 在 android.view.LayoutInflater.rInflate(LayoutInflater.java:746) 03-09 12:06:56.850: E/AndroidRuntime(891): 在 android .view.LayoutInflater.inflate(LayoutInflater.java:489) 03-09 12:06:56.850: E/AndroidRuntime(891): 在 android.view.LayoutInflater.inflate(LayoutInflater.java:396) 03-09 12:06 :56.850: E/AndroidRuntime(891): at android.view.LayoutInflater.inflate(LayoutInflater.java:352) 03-09 12:06:56.850: E/AndroidRuntime(891): at com.android.internal.policy。 impl.PhoneWindow.setContentView(PhoneWindow.java:313) 03-09 12:06:56.850: E/AndroidRuntime(891):在 android.app.Activity.setContentView(Activity.java:1924) 03-09 12:06:56.850: E/AndroidRuntime(891): 在 com.example.testapp.MSMap.onCreate(MSMap.java:23) 03- 09 12:06:56.850: E/AndroidRuntime(891): 在 android.app.Activity.performCreate(Activity.java:5206) 03-09 12:06:56.850: E/AndroidRuntime(891): 在 android.app。 Instrumentation.callActivityOnCreate(Instrumentation.java:1094) 03-09 12:06:56.850: E/AndroidRuntime(891): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2074) 03-09 12:06:56.850: E/AndroidRuntime(891): ... 11 更多 03-09 12:06:56.850: E/AndroidRuntime(891): 由: java.lang.NullPointerException: name == null 03-09 12:06:56.850: E/AndroidRuntime(891): 在 java.lang.VMClassLoader.findLoadedClass(Native Method) 03-09 12:06:56.850: E/AndroidRuntime(891): 在 java.lang。ClassLoader.findLoadedClass(ClassLoader.java:354) 03-09 12:06:56.850: E/AndroidRuntime(891): 在 java.lang.ClassLoader.loadClass(ClassLoader.java:491) 03-09 12:06:56.850: E/AndroidRuntime(891): 在 java.lang.ClassLoader.loadClass(ClassLoader.java:461) 03-09 12:06:56.850: E/AndroidRuntime(891): 在 android.support.v4.app.Fragment.instantiate (Fragment.java:391) 03-09 12:06:56.850: E/AndroidRuntime(891): 在 android.support.v4.app.Fragment.instantiate(Fragment.java:369) 03-09 12:06:56.850 : E/AndroidRuntime(891): 在 android.support.v4.app.FragmentActivity.onCreateView(FragmentActivity.java:272) 03-09 12:06:56.850: E/AndroidRuntime(891): 在 android.view.LayoutInflater。 createViewFromTag(LayoutInflater.java:676) 03-09 12:06:56.850: E/AndroidRuntime(891): ... 21 更多354) 03-09 12:06:56.850: E/AndroidRuntime(891): 在 java.lang.ClassLoader.loadClass(ClassLoader.java:491) 03-09 12:06:56.850: E/AndroidRuntime(891): 在java.lang.ClassLoader.loadClass(ClassLoader.java:461) 03-09 12:06:56.850: E/AndroidRuntime(891): 在 android.support.v4.app.Fragment.instantiate(Fragment.java:391) 03 -09 12:06:56.850: E/AndroidRuntime(891): 在 android.support.v4.app.Fragment.instantiate(Fragment.java:369) 03-09 12:06:56.850: E/AndroidRuntime(891):在 android.support.v4.app.FragmentActivity.onCreateView(FragmentActivity.java:272) 03-09 12:06:56.850: E/AndroidRuntime(891): 在 android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:676) 03-09 12:06:56.850: E/AndroidRuntime(891): ... 21 更多354) 03-09 12:06:56.850: E/AndroidRuntime(891): 在 java.lang.ClassLoader.loadClass(ClassLoader.java:491) 03-09 12:06:56.850: E/AndroidRuntime(891): 在java.lang.ClassLoader.loadClass(ClassLoader.java:461) 03-09 12:06:56.850: E/AndroidRuntime(891): 在 android.support.v4.app.Fragment.instantiate(Fragment.java:391) 03 -09 12:06:56.850: E/AndroidRuntime(891): 在 android.support.v4.app.Fragment.instantiate(Fragment.java:369) 03-09 12:06:56.850: E/AndroidRuntime(891):在 android.support.v4.app.FragmentActivity.onCreateView(FragmentActivity.java:272) 03-09 12:06:56.850: E/AndroidRuntime(891): 在 android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:676) 03-09 12:06:56.850: E/AndroidRuntime(891): ... 21 更多491) 03-09 12:06:56.850: E/AndroidRuntime(891): 在 java.lang.ClassLoader.loadClass(ClassLoader.java:461) 03-09 12:06:56.850: E/AndroidRuntime(891): 在android.support.v4.app.Fragment.instantiate(Fragment.java:391) 03-09 12:06:56.850: E/AndroidRuntime(891): 在 android.support.v4.app.Fragment.instantiate(Fragment.java :369) 03-09 12:06:56.850: E/AndroidRuntime(891): 在 android.support.v4.app.FragmentActivity.onCreateView(FragmentActivity.java:272) 03-09 12:06:56.850: E/AndroidRuntime (891): 在 android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:676) 03-09 12:06:56.850: E/AndroidRuntime(891): ... 21 更多491) 03-09 12:06:56.850: E/AndroidRuntime(891): 在 java.lang.ClassLoader.loadClass(ClassLoader.java:461) 03-09 12:06:56.850: E/AndroidRuntime(891): 在android.support.v4.app.Fragment.instantiate(Fragment.java:391) 03-09 12:06:56.850: E/AndroidRuntime(891): 在 android.support.v4.app.Fragment.instantiate(Fragment.java :369) 03-09 12:06:56.850: E/AndroidRuntime(891): 在 android.support.v4.app.FragmentActivity.onCreateView(FragmentActivity.java:272) 03-09 12:06:56.850: E/AndroidRuntime (891): 在 android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:676) 03-09 12:06:56.850: E/AndroidRuntime(891): ... 21 更多391) 03-09 12:06:56.850: E/AndroidRuntime(891): 在 android.support.v4.app.Fragment.instantiate(Fragment.java:369) 03-09 12:06:56.850: E/AndroidRuntime( 891): 在 android.support.v4.app.FragmentActivity.onCreateView(FragmentActivity.java:272) 03-09 12:06:56.850: E/AndroidRuntime(891): 在 android.view.LayoutInflater.createViewFromTag(LayoutInflater.java :676) 03-09 12:06:56.850: E/AndroidRuntime(891): ... 21 更多391) 03-09 12:06:56.850: E/AndroidRuntime(891): 在 android.support.v4.app.Fragment.instantiate(Fragment.java:369) 03-09 12:06:56.850: E/AndroidRuntime( 891): 在 android.support.v4.app.FragmentActivity.onCreateView(FragmentActivity.java:272) 03-09 12:06:56.850: E/AndroidRuntime(891): 在 android.view.LayoutInflater.createViewFromTag(LayoutInflater.java :676) 03-09 12:06:56.850: E/AndroidRuntime(891): ... 21 更多还有 21 个还有 21 个

代码和 XML 之间是否存在某种不匹配？

*   我试过让我的代码扩展活动和片段活动吗？
*   XML 包含围绕片段的相对布局？这是一个问题吗？

在所有情况下，我都尝试了所有我能想到的例子和/或谷歌我的方式。所有导致相同的错误。

**注意：**我的项目中的“参考库”和“Android 依赖项”和“库”中有 android-support-v4.jar。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T11:25:24.337

最后我得到了你的问题的答案

片段的工作方式很像活动，因为您需要一个 Java 类文件来配合它。您不能仅通过创建片段布局来创建片段 - 您需要为片段创建一个类：

为您的活动创建一个布局 XML 和一个 Activity 子类 为您的片段创建一个布局 XML 和一个 Fragment 子类 在您的 Activity 布局 XML 中将两者联系在一起（或者如果您想在 Java 代码中使用 FragmentTransaction）如果您还没有已经这样做了，阅读、重新阅读和消化此页面上的所有内容：http: [//developer.android.com/guide/topics/fundamentals/fragments.html](http://developer.android.com/guide/topics/fundamentals/fragments.html)

那里有很多，但 Fragments 现在是 Android 应用程序的重要组成部分，所以它是必读的。好消息是片段的基础非常简单。

所以你需要有这样的课程

```
<fragment
       class="com.exercise.FragmentTest.MyFragment" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T11:25:08.200

您没有为您的 Fragment 指定名称，您应该在您的片段的名称属性中提供您的片段类

像下面的代码：

```
<fragment        
    android:name="com.yourPackageName.YourFragmentClass" 
    android:id="@+id/themap"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
     /> 
```

# debian - Debian - 自动监视和编译更少

> ID：15310088
> 
> 赞同：0
> 
> 时间：2013-03-09T11:22:08.297
> 
> 标签：debian, less

我想知道如何`.less`自动查看文件并编译它们。没有图形用户界面。

当我在实时 debian 服务器上使用引导程序进行开发时，我真的不想保存较少的文件，`lessc less/bootstrap.less > css/bootstrap.css`每次进行更改时都转到 PuTTY 并键入。如果我每次都必须这样做，我还不如使用纯 CSS。

因此，我将不得不查看目录 /less/ 上的**每个**文件，`.less`并在进行更改时运行`lessc less/bootstrap.less > css/bootstrap.css`. 但是我该怎么做呢？

是的，我可以使用`cron`，但它只提供一分钟刷新一次。所以这不是一个选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T11:26:44.327

我以前使用过[File Watcher](https://github.com/thomasfl/filewatcher)和[FSSM](https://github.com/ttilley/fssm)来执行此操作，具体取决于操作系统（以及我对学习新工具的热情程度）。后者可能是最适合 Linux 的，但它是用 Ruby 编写的。

对于一个可以满足您需求的纯 C 工具，我喜欢[inotify-tools](https://github.com/rvoicilas/inotify-tools/wiki)的 inotifywait 。该网站有一些很好的示例，并且有一个可用于 Debian 的软件包。如果没有任何工具能完全按照您的意愿行事，[这里](http://www.ibm.com/developerworks/linux/library/l-ubuntu-inotify/index.html)有一个如何使用 inotify API 的示例。

# c++ - VC11 中 std::shared_ptr 上的 atomic_load/atomic_store - 为什么是全局自旋锁？

> ID：15310089
> 
> 赞同：5
> 
> 时间：2013-03-09T11:22:09.180
> 
> 标签：c++, visual-studio-2012, shared-ptr, atomic

我试图准确了解如何使用原子操作安全地管理共享指针。原来 VC11 (Visual Studio 2012) 支持 C++11，因此可以允许 std::shared_ptr 上的读/写竞争。我想检查我是否理解了基础知识，然后询问有关 VC11 中 std::shared_ptr 上原子操作的实现细节。

```
std::shared_ptr<A> x, y, z;
x = std::make_shared<A>(args1);
y = std::make_shared<A>(args2); 
```

线程 1

```
std::shared_ptr<A> temp = std::atomic_load(y); 
```

线程 2

```
std::atomic_store(&y, z); 
```

如果没有原子，竞争可能会导致`temp`状态损坏，或者线程 2 可能会删除原始 y 指向的 A 实例，就像线程 1 试图复制和添加 shared_ptr 一样，这将使它指向一个“僵尸”对象。

我关于 VC11 中 atomic_load 和 atomic_store 的问题：

我注意到他们使用了一个对全局变量执行测试和设置的自旋锁。所以我想知道：为什么不在 shared_ptr 本身的引用计数器的最高位上进行测试和设置呢？这样不同shared_ptr上的锁就不会相互竞争。没有这样做是有原因的吗？

编辑：VS 的`atomic_is_lock_free`. 不足为奇，因为它对一切都使用自旋锁。仍然想知道为什么他们不能让它使用 shared_ptr-instance-specific 锁而不是全局锁。

```
template <class _Ty> inline
bool atomic_is_lock_free(const shared_ptr<_Ty> *)
{   // return true if atomic operations on shared_ptr<_Ty> are lock-free
    return (false);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-06-02T01:27:20.463

您不能对 shared_ptr 的引用计数进行原子测试和设置，因为引用计数存储在 shared_ptr 的控制块中。当您开始尝试测试和设置时，另一个线程可能已经释放了最后一个 shared_ptr 引用并从您下方删除了控制块。

```
Thread 1                                  Thread 2
Read control block address

                                          Decrement ref count (now 0)
                                          Delete control block

Test-and-set ref count (undefined behaviour) 
```

请记住，这里的前提是多个线程正在操作*同一个*shared_ptr 实例。如果每个线程都有自己的实例（指向同一个受控对象），那么我们就没有问题，也不需要原子的 shared_ptr 操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T14:28:13.363

修改引用计数的最高位将需要将引用计数作为计数器处理以忽略该最高位的代码。也就是说，它会使最常见的用途变慢，以便在不太常见的情况下提供较小的速度增加。

# perl - XML::Twig.pm vs XML::Twig.pm.slow 这是内部 CPAN 的区别吗？

> ID：15310091
> 
> 赞同：1
> 
> 时间：2013-03-09T11:22:26.863
> 
> 标签：perl, cpan, xml-twig

在 all 选项下搜索 XML + Twig 会为 Xml::Twig 生成两个结果。在清单中，它们显示为 XML::Twig，但链接本身的不同之处在于其中之一的后缀 .slow。

模块有区别吗，或者这是某种 CPAN Area51 的东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T12:21:43.220

_slow 是源之一。它在安装期间被处理以生成 .pm 文件，这是 Perl 加载的文件。该处理内联了一些方法，以提高速度，并为真正旧版本的 perl（5.6 和更早版本）过滤掉一些行。

# html - 模态正文内容被替换：Twitter Bootstrap

> ID：15310094
> 
> 赞同：0
> 
> 时间：2013-03-09T11:22:56.820
> 
> 标签：html, twitter-bootstrap, modal-dialog

我正在使用 twitter bootstrap、smarty、jquery 和 php 开发一个网站。我对 Bootstrap 很陌生。

所以我准备了一个收集申请人数据的页面。

**html内容**：

```
{include file="admin/admin.header.tpl"}
<div class="summary">
    <table class="table table-striped table-hover">
        <thead>
            <tr>
                <th>Applicant Name</th>
                <th>Email</th>
                <th>Mobile No.</th>
                <th>Details<th>
            </tr>
        </thead>
        <tbody>
            {foreach from=$totalApplicantSummary key=key item=value}
                <tr>
                    <td>{$value.applicant_name}</td>
                    <td>{$value.email}</td>
                    <td>{$value.mobile}</td>
                    <td><a data-toggle="modal" href="?e={$value.email}&fid={$formId}" data-target="#myModal" data-keyboard="false">view more</a></td>
                </tr>
            {/foreach}
        </tbody>
    </table>
    <div id="myModal" class="modal hide fade in" aria-hidden="true" style="display: none;">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
            <h3 id="myModalLabel">Modal header</h3>
        </div>
        <div class="modal-body" >
            <h1>Hi</h1>
        </div>
        <div class="modal-footer">
            <button class="btn btn-primary" data-dismiss="modal" aria-hidden="true">Close</button>
        </div>
        <!-- Modal -->
    </div>
</div>
{include file="admin/admin.footer.tpl"} 
```

注意：**admin.footer.tpl**包含 bootstrap.min.js 和 jquery.min.js 。

**我想做的事？**

要查看总申请人数据，我已经给出了**查看更多**链接，该链接将显示在 MODAL 中。

我已将模态定义为“#myModal”，并将用于测试的**“HI ....”**定义为 MODAL BODY CONTENT。

**我的问题是什么？**

**查看更多**链接显示**MODAL**包含以前的内容（总页面，即申请人姓名、电子邮件、手机以及页眉、页脚）而不是“HI....”。

那么如何显示**Hi...**而不是整个页面的内容。

提前致谢。

为了更好地参考输出的问题图像，提供了。

在查看更多链接之前单击：

![在此处输入图像描述](../Images/6248667961411cc87fdc2c210a7c87f2.png)

点击链接后的模态内容：

![在此处输入图像描述](../Images/5cefb4114d152c8e6851b93f866bd98c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-16T05:31:49.380

```
$('#myModal').on('hidden', function () {
  $(this).removeData('modal');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T12:39:55.217

好像您正试图让模态抓取远程页面的内容。

查看以下[页面](http://plnkr.co/edit/yMofRZ?p=preview)以获取在 Bootstrap 中将远程页面与 Modals 一起使用的示例。

基本上，如果提供了远程 url，内容将通过 jQuery 的 load 方法加载并注入到 .modal-body 中。如果您使用的是数据 api，您也可以使用 href 标签来指定远程源。这方面的一个例子如下所示：

```
<a data-toggle="modal" href="remote.html" data-target="#modal">click me</a> 
```

如果您不尝试从远程页面提取数据，那么您的问题是您的 href 标记需要包含模式的 ID，即：#myModal。

# java - jtable中的动态jcombobox渲染

> ID：15310096
> 
> 赞同：1
> 
> 时间：2013-03-09T11:23:28.297
> 
> 标签：java, swing, jtable, dynamic-data, jcombobox

我在 JTable 的 2 列中有一个带有 JCheckboxes 的 JTable。假设 A 列和 B 列是其中包含 JComboBox 的列。A 列的 JCheckbox 的项目是静态的，可以硬编码。但是，B 列的 JComboBox 值的项目是动态的。我想要做的是，当用户启动应用程序时，列 A 的 JcomboBox 应该有静态值，它应该在 ComboBox 中显示默认选择值“---Select---”

即我将combox项设置为["--Select","X","Y","Z"]

此外，在列 B 的 JComboBox 中应显示默认值“请稍候”，这意味着一段时间后它将动态更新。在那之前，它必须显示“请稍候”。

在一组用户操作之后，我想用动态值更新 B 列的 JComboBox。即便如此，B 列的 JcomboBox 值也取决于 A 列的 JcomboBox 选定项。

我可以动态更新这些值，但是将该 Cell 渲染为 JComboBox 没有按预期工作。

我尝试了以下方法，

```
Enumeration<TableColumn> c = myTable.getColumnModel().getColumns();
        int i = 0;
        while (c.hasMoreElements()) {
            TableColumn column = c.nextElement();
            column.setCellRenderer(new ComboBoxCellRenderer(i));
            i++;
        }

   private static class ComboBoxCellRenderer extends JComboBox implements TableCellRenderer {

        public ComboBoxCellRenderer(int column) {
            // for (int i = 0; i < elements.length; i++) {
            if (column == 0) {

                addItem("--Select--");
                addItem("X");
                addItem("Y");
                addItem("Z");

            }
        }

        @Override
        public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {
            setSelectedItem(value);
            return this;
        }
    } 
```

如果我使用此代码，则无法从 JComboBo 中选择项目。即使我选择，它也不会被选中。

我目前正在使用下面链接中提到的代码。

[堆栈溢出](https://stackoverflow.com/questions/15272104/dynamic-jcombobox-items-inside-jtable/15275880#15275880)

如果有人为此提供示例代码，这对我会有很大帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T20:29:23.090

[`DependentColumn`](https://stackoverflow.com/a/7356518/230513)可以提供一些指导。如果依赖列也是可编辑的，请参阅这些[相关示例](https://stackoverflow.com/a/13628183/230513)。

![图片](../Images/07c8f90ae0f77a72a4d6cfb32e248431.png)

# google-app-engine - F1 到 F2 服务器的迁移是否使 Datastore 操作更快

> ID：15310097
> 
> 赞同：1
> 
> 时间：2013-03-09T11:23:44.930
> 
> 标签：google-app-engine, google-cloud-datastore

我有一个适用于 Python 2.5 的谷歌 appengine 应用程序。我知道从 F1 迁移到 F2 对计算和处理有影响，但它也改进了数据存储区的读/写操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T15:57:36.717

不。

GAE 数据库不在前端实例上运行，它是一个单独的服务。因此，增加前端实例上的内存/处理器对数据库操作的速度没有任何帮助。

正确的数据库架构将对数据库速度产生最大的影响，但这是一个相当广泛的话题。只是一些通用提示：

1.  重新组织实体，以便对于最常用的实体，您使用 get 而不是查询。
2.  使用 memcache 缓存您经常获取的实体。
3.  如果执行多个独立操作，请使用 async 并并行执行。
4.  如果您获取/放置多个实体，请使用批量操作。

# c# - 单元测试中新对象的引用

> ID：15310103
> 
> 赞同：1
> 
> 时间：2013-03-09T11:24:31.103
> 
> 标签：c#, unit-testing, moq

我想结合 MOQ 测试以下方法：

```
public Company CreateCompany(Company company)
{
    UnitOfWork.CompanyRepository.Insert(company);
    //Give the user who created a company all permissions
    UnitOfWork.CompanyPermissionRepository.Insert(new CompanyPermission
    {
        Useraccount = UnitOfWork.UseraccountRepository.GetByID(this.GetLoggedInUseraccount(this.Context.Session).Id),
        Company = company,
        AddUser = true,
        CreateProject = true,
        DeleteCompany = true,
        DeleteFile = true,
        DownloadFile = true,
        EditCompany = true,
        ManageProjectPermission = true,
        RemoveUser = true,
        UploadFile = true
   });
   UnitOfWork.Save();

   return company; 
```

}

我基本上想检查新`CompanyPermission`对象是否已插入存储库：

```
companyPermissionRepository.Verify(r => r.Insert(companyPermissions.allCompanyPermissions)); 
```

这是我的设置：

```
companyPermissionRepository = new Mock<IGenericRepository<CompanyPermission>>();
unitOfWork.Setup(r => r.CompanyPermissionRepository).Returns(companyPermissionRepository.Object); 
```

我`allCompanyPermissions`在单元测试中的对象是使用与 CreateCompany 方法中相同的值创建的，但单元测试失败。我认为这是因为这两个对象具有相同的值，但具有不同的引用——内存中有 2 个对象是“不同的”。它是否正确？我将如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T11:33:55.597

由于您每次都在插入一个新`CompanyPermission`对象，并且它不从其依赖项中获取任何参数，因此会想到两件事。

您可以只测试`CompanyPermissionRepository.Insert`用`CompanyPermission`对象调用的那个。

```
companyPermissionRepository.Verify(r => r.Insert(It.IsAny<CompanyPermission>()); 
```

或者，如果您想要彻底（推荐），请使用最小起订量`It.Is`

```
companyPermissionRepository.Verify(r => r.Insert(It.Is<CompanyPermission>(cp => cp.AddUser=true && ....) 
```

# asp.net - Asp.net Web API 一致数据

> ID：15310106
> 
> 赞同：2
> 
> 时间：2013-03-09T11:24:48.523
> 
> 标签：asp.net, c#-4.0, asp.net-mvc-4, asp.net-web-api

所以，我正在尝试使用 MVC 4 构建我的第一个 Web api。一切顺利。我设法在我的网站上使用基本身份验证（使用 SSL），但我有一个问题，有点。

我在每个 ApiController 上都有一小段代码：

```
 private Profile user
    {
        get
        {                
            var UserId = Membership.GetUser(User.Identity.Name).ProviderUserKey.ToString();
            var Profile = new Profile(UserId);
            return Profile;
        }
    } 
```

我这样做是因为我的自定义配置文件中有一些额外的字段；即公司ID。我的所有功能都需要这个 CompanyId 来获取数据。我正在考虑使用 CompanyId 作为令牌，但我无法让它工作：D

所以我的问题是：有没有办法为每个请求全局存储 CompanyId？也许在路由消息处理程序的过滤器中。我知道我不能使用会话等，因为 API 是无状态的，但另一方面我不想一直重复代码......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T13:47:52.200

除了@Alon 提到的选项之外，我强烈建议您查看`Dependency Injection(DI)`DI 容器，例如[`Autofac`](https://code.google.com/p/autofac/). 使用 DI，您可以将这种情况下的依赖项推`Profile`送到 API 控制器中，或者事实上推送到任何需要 Profile 的类中。

由于构造函数注入是首选机制，因此类签名如何变成

```
public class Class1 {
    public Profile CurrentUserProfile { get;private set;}

    public Class1(Profile profile){
       this.CurrentUserProfile=profile;   // Now you can use it throughout the class.
    }
} 
```

您可以将此类依赖项注入到基类中，例如 BaseApiController。

然后 Autofac 注册看起来像

```
builder.Register<Gateway.IRequestContextBuilder>((c) =>
{
            var UserId = Membership.GetUser(User.Identity.Name).ProviderUserKey.ToString();
            var Profile = new Profile(UserId);
            return Profile;

}).InstancePerHttpRequest(); 
```

这将为每个 HTTP 请求创建一次 Profile 对象，然后可以将其注入任何依赖类。

这可能会让您感到困惑，但是一旦您了解了 DI 概念和 Autofac 等容器，这将开始变得更有意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T11:29:18.307

你有两个选择：

1.  （更简单的一种）使用页面处理事件之一（在 Global.asax 中）获取配置文件信息并将其存储在 HttpContext
2.  创建你自己的 HttpModule，它会做同样的事情（获取配置文件并将其存储在 HttpContext 中）

您可以从 API 方法访问 HttpContext。我会选择第一个选项，因为它更简单。

# c# - 在一组时间之间随机睡眠

> ID：15310110
> 
> 赞同：1
> 
> 时间：2013-03-09T11:25:11.327
> 
> 标签：c#

~~我想创建一个程序，当用户单击开始按钮时，程序将在 3 秒到 10 秒之间休眠，然后会出现一个按钮，允许用户单击该按钮，然后打印出时间并告诉用户用户点击按钮需要多长时间（以毫秒为单位）。~~

我知道我需要使用`Thread.Sleep()`和`Environment.TickCount()`

~~问题是我不知道如何让程序在 3-10 秒之间随机休眠~~

谢谢你的回答。一切正常，但是出现了一个小问题

问题是第一个标签没有写出“准备好...”，但它会在打印出“准备好...”之前休眠 3-10 秒。我想要的是程序打印出“准备好......”然后进入睡眠状态 3-10 秒。

这是代码：

```
 //Starts the count
    private void btnStart_Click(object sender, EventArgs e)
    {
        label1.Text = "Get ready...";

        //Generate random sleeptime
        Random waitTime = new Random();
        seconds = waitTime.Next(3 * 1000, 11 * 1000);

        //Put the thread to sleep
        System.Threading.Thread.Sleep(seconds);

        //Show the button
        btnNow.Show();
        label2.Text = "NOW!";

        //Count the time in milliseconds
        start = Environment.TickCount;
    } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-09T11:30:28.653

您必须使用 Random 类：

```
Random rnd = new Random();
int number = rnd.Next(3,11); 
```

看看参考：http: [//msdn.microsoft.com/en-US/library/2dx6wyd4.aspx](http://msdn.microsoft.com/en-US/library/2dx6wyd4.aspx)

请注意，第一个整数参数是包含的，而第二个参数是排除的。所以你必须使用 11 而不是 10。（如果你想排除 10 秒，你当然必须将其更改为“10”）。

您可以将此数字乘以 1000 以获得您的毫秒值并将 Thread.Sleep 与该值一起使用。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-09T11:29:29.457

采用

```
Random random = new Random();
mseconds=random.Next(3, 10) * 1000;   
System.Threading.Thread.Sleep(mseconds); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-01T08:19:38.973

文本没有改变的原因是因为您将 gui 线程置于睡眠模式。您可以在更改标签文本后调用 Application.DoEvents 方法来解决此问题，但最好在单独的线程中进行计数。

# swing - 我怎样才能解决jtable中的这个错误？

> ID：15310114
> 
> 赞同：0
> 
> 时间：2013-03-09T11:25:33.127
> 
> 标签：swing, netbeans, jtable

我想在表中显示数据库中的数据。我收到此错误“无法从静态上下文引用非静态变量 jtable1”。帮我解决这个错误

```
st.executeQuery("select * from course" );
                 ResultSet rs = st.getResultSet();
                 ResultSetMetaData md = rs.getMetaData();
                 int c_count = md.getColumnCount();
                 Vector data = new Vector(c_count);
                 Vector row = new Vector(c_count);
                 Vector colname = new Vector(c_count);
                 for(int i=0;i<c_count;i++)
                 {
                     colname.addElement(md.getColumnName(i));
                 }
                 while(rs.next())
                 {
                 for(int i=0;i<c_count;i++)
                 {
                   row.addElement(rs.getObject(i));  
                 }
                 data.addElement(row);
                 row = new Vector(c_count);
                 }
                 DefaultTableModel model = new DefaultTableModel(data,colname);
                 jTable1.setModel(model); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T13:46:50.093

main 方法有一个静态上下文，因此它不能直接访问任何实例变量。假设您有一个名为 Foo 的类，该类具有静态 main 方法和一个私有变量 jTable1。首先，您必须为 jTable1 变量添加一个 getter，并具有以下签名

```
public JTable getTable() {
 return jTable1;
} 
```

接下来，在您的 main 方法中，您必须创建 Foo 的一个实例

```
Foo fooInstance = new Foo(); 
```

现在，您可以设置模型，如下所示：

```
DefaultTableModel model = new DefaultTableModel(data,colname);
fooInstance.getTable().setModel(model); 
```

最后，Foo 类看起来像

```
public class Foo {

     private javax.swing.JTable jTable1;

     public JTable getTable() {
          return jTable1;
     }

     public static void main(String[] args) {
          //your code

          Foo fooInstance = new Foo();

          DefaultTableModel model = new DefaultTableModel(data,colname);
          fooInstance.getTable().setModel(model);

           //your code
     }
} 
```

一般来说，这个话题是你必须熟悉的东西，所以看看官方的 Java 教程[http://docs.oracle.com/javase/tutorial/](http://docs.oracle.com/javase/tutorial/)或者谷歌一下

# sql - 带有 LEFT JOIN 的 SQLite AVG() 不返回所有行

> ID：15310115
> 
> 赞同：1
> 
> 时间：2013-03-09T11:25:33.780
> 
> 标签：sql, sqlite, select

我的评分系统有问题。

如果 中没有匹配项，`LEFT JOIN`则在使用时根本不会返回该行`AVG()`。

如果连接中没有结果，则返回 NULL。

```
SELECT op_id,
       ...,
       rating_stars 
```

但这会删除该行。

```
SELECT op_id,
       ...,
       AVG(rating_stars) 
```

这是我最后一次尝试：

```
SELECT op_id,
       op_img,
       op_title,
       op_worktime,
       op_cookingtime,
       CASE rating_stars WHEN null THEN 0 ELSE AVG(rating_stars) END
FROM 
 opskrifter
LEFT JOIN 
  rating 
ON 
  rating.fk_op_id = opskrifter.op_id
WHERE 
  fk_type_id=1 
ORDER BY 
  op_id DESC 
```

我需要所有结果，如果它还没有被评级，它应该像这样返回 0：

```
ID        | RATING
--- 1 --- | ---  0  ---
--- 2 --- | ---  4  ---
--- 3 --- | ---  0  --- 
```

但上面的 SQL 返回：

```
ID        | RATING
--- 2 --- | ---  4  --- 
```

我很确定我已经在 MySQL 中做到了这一点，没有任何问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T11:28:27.457

你需要有`GROUP BY`子句，

```
SELECT...
FROM...
WHERE...
GROUP BY op_id,
       op_img,
       op_title,
       op_worktime,
       op_cookingtime 
```

# gis - WMS和WFS之间的结合

> ID：15310117
> 
> 赞同：0
> 
> 时间：2013-03-09T11:25:45.170
> 
> 标签：gis, openlayers, geoserver, wms

我们正在开发一个包含大量数据的项目。我们使用 WMS 图层来显示这些点。我们还使用 WMS 在弹出窗口中返回点信息，
但是为了突出显示选定的点，我们使用了 WFS 层。

现在的问题是，有时显示的弹出窗口没有突出显示选定的点，反之亦然。

我如何结合这两个功能（突出显示选定点并显示它的弹出窗口）？

笔记：

我认为一个原因是点击事件定义了不同的 WFS，使用：

```
selectControl.events.register("featureselected", this, function(e) {  
    select.addFeatures([e.feature]);
} 
```

和 WMS 使用：

```
popupwindow1=new OpenLayers.Control.WMSGetFeatureInfo(
{  
    layers: [layer1],  
    autoActivate: true,  
    maxFeatures: 3,  
    infoFormat: "application/vnd.ogc.gml",  
    eventListeners: { /* .... */ } 
} 
```

我现在的第二个问题是：如何在不将矢量图层添加到地图的情况下从 WFS 层返回要素？

# python - 尝试安装模块 win32clipboard

> ID：15310121
> 
> 赞同：4
> 
> 时间：2013-03-09T11:25:58.643
> 
> 标签：python, python-2.7, installation, raw-input

我是 python 新手，我正在尝试安装 win32clipboard 以便能够使用此代码：

```
import win32clipboard
win32clipboard.OpenClipboard()
win32clipboard.SetClipboardText('testing 123')
win32clipboard.CloseClipboard()

# get clipboard data
win32clipboard.OpenClipboard()
data = win32clipboard.GetClipboardData()
win32clipboard.CloseClipboard()
print data
raw_input() 
```

我如何准确安装必要的模块才能做到这一点？我正在使用python 2.72版。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-09T11:54:28.397

该模块是[pywin32](http://sourceforge.net/projects/pywin32/)模块的一部分。

安装：

1.  转到[http://sourceforge.net/projects/pywin32/files/pywin32/](http://sourceforge.net/projects/pywin32/files/pywin32/)
2.  选择最新的构建，例如：http: [//sourceforge.net/projects/pywin32/files/pywin32/Build%20219/](http://sourceforge.net/projects/pywin32/files/pywin32/Build%20219/)
3.  为您的系统下载安装程序，例如：`pywin32-219.win-amd64-py2.7.exe`
4.  运行安装程序。
5.  使用您安装它的 Python 来运行您的`win32clipboard`脚本。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2020-05-16T10:03:19.807

对于那些 7 年后仍然在这里的人

在您的 shell 或 cmd 中运行它（假设您将 python 添加到 PATH，否则先执行此操作）

```
pip install pywin32 
```

# opencv - 找不到依赖库javacv

> ID：15310129
> 
> 赞同：4
> 
> 时间：2013-03-09T11:26:51.327
> 
> 标签：opencv, netbeans, javacv

我有这个代码：

```
package javacv;
import static com.googlecode.javacv.cpp.opencv_core.*;
import static com.googlecode.javacv.cpp.opencv_imgproc.*;
import static com.googlecode.javacv.cpp.opencv_highgui.*;
import javax.swing.JOptionPane;

/**
 *
 * @author (Mahdi)
 */
public class JavaCv {

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
        // TODO code application logic here
        try {
              IplImage img = cvLoadImage("mehdi.jpg");  
                cvShowImage("Hellow", img);
                cvSmooth(img, img, CV_GAUSSIAN, 13);
                cvShowImage("Blur", img);
                cvWaitKey();
                cvReleaseImage(img);

        } catch (Exception e) {
            JOptionPane.showMessageDialog(null, e.getMessage());
        }

    }
} 
```

运行后抛出此异常：

```
Exception in thread "main" java.lang.UnsatisfiedLinkError: C:\Users\(Mahdi)\AppData\Local\Temp\javacpp66820482987315\jniopencv_core.dll: Can't find dependent libraries
    at java.lang.ClassLoader$NativeLibrary.load(Native Method)
    at java.lang.ClassLoader.loadLibrary1(ClassLoader.java:1939)
    at java.lang.ClassLoader.loadLibrary0(ClassLoader.java:1864)
    at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1825)
    at java.lang.Runtime.load0(Runtime.java:792)
    at java.lang.System.load(System.java:1059)
    at com.googlecode.javacpp.Loader.loadLibrary(Loader.java:566)
    at com.googlecode.javacpp.Loader.load(Loader.java:489)
    at com.googlecode.javacpp.Loader.load(Loader.java:431)
    at com.googlecode.javacv.cpp.opencv_core.<clinit>(opencv_core.java:136)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:266)
    at com.googlecode.javacpp.Loader.load(Loader.java:453)
    at com.googlecode.javacv.cpp.opencv_imgproc.<clinit>(opencv_imgproc.java:97)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:266)
    at com.googlecode.javacpp.Loader.load(Loader.java:453)
    at com.googlecode.javacv.cpp.opencv_highgui.<clinit>(opencv_highgui.java:85)
    at javacv.JavaCv.main(JavaCv.java:23)
Caused by: java.lang.UnsatisfiedLinkError: no opencv_core244 in java.library.path
    at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1860)
    at java.lang.Runtime.loadLibrary0(Runtime.java:845)
    at java.lang.System.loadLibrary(System.java:1084)
    at com.googlecode.javacpp.Loader.loadLibrary(Loader.java:593)
    at com.googlecode.javacpp.Loader.load(Loader.java:481)
    ... 11 more
Java Result: 1 
```

任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T22:46:00.183

Java 试图在 ${java.library.path} 中找到所需的 dll，但它没有被定义。所以你应该：

1.  在 %PATH% 中设置 opencv_java244.dll 的位置（例如“c:\opencv\build\java\x64\”）。
2.  在您的项目目录“lib”目录中创建。
3.  放在那里：
    *   javacpp.jar
    *   javacv.jar
    *   javacv-windows-x86_64.jar
    *   opencv-2.4.4-windows-x86_64.jar
    *   opencv-244.jar

如果您的平台位数为 32，则使用 *x86.jar 版本。

然后您可以使用 opencv/samples/java/ant/ 中的这个修改过的 ant 脚本来运行您的应用程序：

```
<project name="JavaCv" basedir="." default="rebuild-run">

<property name="src.dir" value="src"/>
<property name="lib.dir" value="lib"/>
<path id="classpath">
    <fileset dir="${lib.dir}" includes="**/*.jar"/>
</path>

<property name="build.dir"   value="build"/>
<property name="classes.dir" value="${build.dir}/classes"/>
<property name="jar.dir"     value="${build.dir}/jar"/>

<property name="main-class"  value="${ant.project.name}"/>

<target name="clean">
    <delete dir="${build.dir}"/>
</target>

<target name="compile">
    <mkdir dir="${classes.dir}"/>
    <javac includeantruntime="false" srcdir="${src.dir}" destdir="${classes.dir}" classpathref="classpath"/>
</target>

<target name="jar" depends="compile">
    <mkdir dir="${jar.dir}"/>
    <jar destfile="${jar.dir}/${ant.project.name}.jar" basedir="${classes.dir}">
        <manifest>
            <attribute name="Main-Class" value="${main-class}"/>
        </manifest>
    </jar>
</target>

<target name="run" depends="jar">
    <java fork="true" classname="${main-class}">
        <classpath>
            <path refid="classpath"/>
            <path location="${jar.dir}/${ant.project.name}.jar"/>
        </classpath>
    </java>
</target>

<target name="rebuild" depends="clean,jar"/>

<target name="rebuild-run" depends="clean,run"/> 
```

或者你可以像这样在你的 ant 脚本中定义 ${java.library.path} ：

```
<target name="run" depends="jar">
    <java fork="true" classname="${main-class}">
        <sysproperty key="java.library.path" path="PUT_YOUR_PATH_HERE"/>
        <classpath>
            <path refid="classpath"/>
            <path location="${jar.dir}/${ant.project.name}.jar"/>
        </classpath>
    </java>
</target> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T07:26:07.620

您是否尝试将 opencv 目录解压缩为 c:\opencv？这是解决此问题的简单方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-17T13:44:58.853

java cv和OpenCV的版本有问题。

如果您使用 OpenCV 2.4.7，那么您应该使用 java cv 0.6，如​​果您使用 OpenCV 2.4.8，那么您应该使用 javacv 0.7。

# c# - 使用 EmguCV 在 OpenCV 中实现 push_back

> ID：15310130
> 
> 赞同：1
> 
> 时间：2013-03-09T11:27:02.577
> 
> 标签：c#, opencv, emgucv

我需要`push_back`使用 EmguCV 在 OpenCV 中实现。我在 Matrix 中使用了 add 函数。但是，它似乎不起作用。即使我添加了元素，矩阵也是空的。

这是我的 OpenCV 函数：

```
Mat labels(0, 1, CV_32FC1);
float label=atof(entryPath.filename().c_str());
labels.push_back(label); 
```

这是我写的 EmguCV 代码：

```
Matrix<int> labels = new Matrix<int>(1, 1, 1);
int label = 1;
labels.Add(label); 
```

有人可以帮助我进行这种转换吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-05-08T17:47:47.987

只是想通了一些事情。这行代码对我有用：

```
firstMatrix.Mat.PushBack(secondMatrix.Mat); 
```

希望它会帮助某人

# arrays - 检查 AD 站点是否存在

> ID：15310132
> 
> 赞同：0
> 
> 时间：2013-03-09T11:27:41.747
> 
> 标签：arrays, powershell, csv, foreach, sites

我想在我的 Active Directory 环境中使用包含站点名称的 CSV 导入站点：

我的 CSV 输入示例：

```
New York
Dallas
New Jersey 
```

我想制作一个脚本，在实际创建过程发生之前首先检查站点的存在。但是，我在检查 2 个数组的输入时遇到了一些麻烦：

```
#Clear process
$ADsites = ""
$SitesFilter = ""
$CSV = ""

[array] $ADSites = [System.DirectoryServices.ActiveDirectory.Forest]::GetCurrentForest().Sites 

$csv=Import-Csv c:\sites.csv -header "Site"

#Filtering the Sitenames
Foreach ($ADSite in $ADSites) {
    [array] $SitesFilter += $ADSite.Name
}

$CSV | Foreach-Object {
    if (??? -eq $_.Site) {
        Write-Host "Site" $_.Site "already exists" 
    } else {
        Write-Host "Site" $_.Site "is not found"
    }
} 
```

如何将数组的内容`$SitesFilter`与 CSV 文件中的站点名称进行比较？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T11:57:32.890

希望下面的脚本可以提供帮助，您应该使用`-in`，它可以判断对象是否在数组中

```
[array] $ADSites = [System.DirectoryServices.ActiveDirectory.Forest]::GetCurrentForest().Sites 

$csv=Import-Csv c:\sites.csv -header "Site"

#Get an site name string array
$SitesFilter = @($ADSites | %{"$($_.Name)"}) 

$CSV | Foreach-Object {
    if ($SitesFilter -contains $_.Site ){
                Write-Host "Site $($_.Site) already exists" 
    } Else { Write-Host "Site $($_.Site) is not found" }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T06:28:33.940

```
$array1 = '1','2','3'
$array2 = '2','3','4'
compare $array1 $array2
get-help compare-object -full 
```

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T11:54:11.830

[BobLobLaw 的答案](https://stackoverflow.com/a/15319585/1630171)有一个有趣的想法，但不幸的是太不完整而无法实际使用。我看到它有两个问题：

*   `Import-Csv`生成一个自定义对象数组，而 OP`$SitesFilter`是一个字符串数组。`Compare-Object`除非比较的项目属于同一类型，否则将始终将每个项目报告为不同的。
*   `Compare-Object`将报告双方的差异，即 AD 中不存在的站点以及 AD 中存在但未在 CSV 中列出的站点。如果 OP 只想要 AD 中尚不存在的站点，他将不得不过滤输出`SideIndicator`。但是，您不能同时扩展`InputObject`和。`SideIndicator``select -Expand`

这样的事情可能会奏效：

```
$csv = Import-Csv "c:\sites.csv" -Header "Site" | % { $_.Site }

compare $csv $SitesFilter | ? {
  (select -Input $_ -Expand SideIndicator) -eq "<="
} | select -Expand InputObject 
```

为了报告哪个网站存在或不存在，这样的事情可能会做：

```
compare $csv $SitesFilter | % {
  if ( (select -Input $_ -Expand SideIndicator) -eq "<=" ) {
    "Site '{0}' doesn't exist." -f (select -Input $_ -Expand InputObject)
  } else {
    "Site '{0}' already exists." -f (select -Input $_ -Expand InputObject)
  }
} 
```

或者可以`select`将信息转换为自定义对象：

```
$site   = { select -Input $_ -Expand InputObject }
$exists = { (select -Input $_ -Expand SideIndicator) -ne "<=" }

compare $csv $SitesFilter `
  | select @{n='Site';e=$site},@{n='Exists';e=$exists} `
  | % {
    if ( $_.Exists ) {
      "Site '{0}' exists." -f $_.Site
    } else {
      "Site '{0}' doesn't exist." -f $_.Site
    }
  } 
```

# grails - 编译类中的 neverHappen 变量

> ID：15310136
> 
> 赞同：6
> 
> 时间：2013-03-09T11:28:03.123
> 
> 标签：grails, groovy

我在我的 Grails 项目中更改了几个类并构建了一个 war 文件。然后，我将新战争中的 .class 文件与我更改之前构建的战争中的文件（在另一台机器上，如果这很重要）进行比较，结果发现许多（如果不是全部）.class 文件是不同的。查看反编译的类，似乎差异是因为变量中的时间戳，例如：

```
public static long __timeStamp__239_neverHappen1360886953029; 
```

有谁知道这个变量是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T06:02:23.030

它来自 groovy 类生成。

在这里查看一些讨论[http://groovy.329449.n5.nabble.com/Timestamp-in-class-files-leads-to-huge-patches-td365696.html](http://groovy.329449.n5.nabble.com/Timestamp-in-class-files-leads-to-huge-patches-td365696.html)

为了完整起见，在此引用：-

> 对于 Groovy 自己的重新编译机制。源并不总是文件形式，所以我们不能“仅仅”检查文件时间戳，所以我们必须将该时间戳存储在某个地方......并且比在类本身更好，因为这就是我们所拥有的？
> 
> 2009 年 3 月 3 日星期二 10:39，Jason Dillon <[hidden email]> 写道：
> 
> > 为什么 groovyc 会捕获编译时间戳？那有什么好处？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-01T08:12:48.880

这在 Groovy 2.4 中发生了变化，.class 文件不再包含时间戳字段。

[https://github.com/groovy/groovy-core/commit/bcdb89e](https://github.com/groovy/groovy-core/commit/bcdb89e)

# r - 将值从一个数据帧传输到另一个数据帧

> ID：15310140
> 
> 赞同：7
> 
> 时间：2013-03-09T11:28:40.357
> 
> 标签：r, dataframe

我有两个数据框。第一个看起来像这样：

```
value <- seq(1, 100, length.out=20)
df1 <- data.frame(id=as.character(1:20), 
                  value=value, 
                  stringsAsFactors=F) 
```

我有第二个看起来像这样的数据框

```
df2 <- data.frame(id=as.character(c(1:5, 21:23)),
                  v2=NA, 
                  stringsAsFactors=F) 
```

我需要将值从 转移`df1`到`df2`，但仅限于 where `df1$id == df2$id`。所以我需要的数据框是：

```
df2Needed <- data.frame(id=as.character(c(1:5, 21:23)),
                      v2=c(value[1:5], NA, NA, NA),
                      stringsAsFactors=F) 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T11:31:57.577

使用`data.table`：

```
require(data.table)
dt1 <- data.table(df1, key="id")
dt2 <- data.table(df2)

dt1[dt2$id, value]

#    id     value
# 1:  1  1.000000
# 2:  2  6.210526
# 3:  3 11.421053
# 4:  4 16.631579
# 5:  5 21.842105
# 6: 21        NA
# 7: 22        NA
# 8: 23        NA 
```

或使用 base`merge`作为评论下提到的@TheodoreLytras：

```
# you don't need to have `v2` column in df2
merge(df2, df1, by="id", all.x=T, sort=F)

#   id v2     value
# 1  1 NA  1.000000
# 2  2 NA  6.210526
# 3  3 NA 11.421053
# 4  4 NA 16.631579
# 5  5 NA 21.842105
# 6 21 NA        NA
# 7 22 NA        NA
# 8 23 NA        NA 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-09T11:46:44.027

一种方法是使用`merge()`：

```
df2Needed <- merge(df2,df1,by="id",all.x=TRUE, sort=FALSE)
df2Needed <- df2Needed[,c("id","value")]
colNames(df2Needed) <- c("id","v2") 
```

另一个（我认为更优雅）使用`match()`：

```
df2Needed <- df2
df2Needed$v2 <- df1$value[match(df2$id, df1$id)] 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-09T11:44:51.583

与`LEFT join sql`_`sqldf`

```
library(sqldf)
sqldf('SELECT df2.id , df1.value
      FROM df2
      LEFT JOIN df1
      ON df2.id = df1.id')

 id     value
1  1  1.000000
2  2  6.210526
3  3 11.421053
4  4 16.631579
5  5 21.842105
6 21        NA
7 22        NA
8 23        NA 
```

**编辑**添加一些基准测试：

正如预期的那样，**比赛**在这里非常快。**sqldf**真的很慢！

**对 OP 数据进行测试**

```
library(microbenchmark)
microbenchmark(ag(),ar.dt(),ar.me(),tl())

Unit: microseconds
     expr       min         lq     median        uq       max
1    ag() 23071.953 23536.1680 24053.8590 26889.023 34256.354
2 ar.dt()  3123.972  3284.5890  3348.1155  3523.333  7740.335
3 ar.me()   950.807  1015.2815  1095.1160  1128.112  6330.243
4    tl()    41.340    45.8915    68.0785    71.112   187.735 
```

**用大数据测试**1E6 行数据。

这里我如何生成我的数据：

```
N <- 1e6
df1 <- data.frame(id=as.character(1:N), 
                  value=seq(1, 100), 
                  stringsAsFactors=F)
n2 <- 1000
df2 <- data.frame(id=sample(df1$id,n2),
                  v2=NA, 
                  stringsAsFactors=F) 
```

惊喜 ！！合并比 sqldf 快 16 倍，而**data.table 解决方案是最慢的！**

```
Unit: milliseconds
     expr       min        lq    median        uq        max
1    ag() 5678.0580 5865.3063 6034.9151 6214.3664  8084.6294
2 ar.dt() 8373.6083 8612.9496 8867.6164 9104.7913 10423.5247
3 ar.me()  387.4665  451.0071  506.8269  648.3958  1014.3099
4    tl()  174.0375  186.8335  214.0468  252.9383   667.6246 
```

其中函数 ag, ar.dt,ar.me, tl 定义为：

```
ag <- function(){
require(sqldf)
sqldf('SELECT df2.id , df1.value
      FROM df2
      LEFT JOIN df1
      ON df2.id = df1.id')
}

ar.dt <- function(){
  require(data.table)
  dt1 <- data.table(df1, key="id")
  dt2 <- data.table(df2)
  dt1[dt2$id, value]
}

ar.me  <- function(){
 merge(df2, df1, by="id", all.x=T, sort=F)
}

tl <- function(){
  df2Needed <- df2
 df2Needed$v2 <- df1$value[match(df2$id, df1$id)]
} 
```

**编辑 2**

似乎在基准测试中包括了 data.table 创建一点点`unfair`。为了避免任何混淆，我添加了一个新函数，我认为我已经有了 data.table 结构。

```
ar.dtLight <- function(){
  dt1[dt2$id, value]
}

library(microbenchmark)
microbenchmark(ag(),ar.dt(),ar.me(),tl(),ar.dtLight,times=1)

Unit: microseconds
        expr         min          lq      median          uq         max
1       ag() 7247593.591 7247593.591 7247593.591 7247593.591 7247593.591
2    ar.dt() 8543556.967 8543556.967 8543556.967 8543556.967 8543556.967
3 ar.dtLight       1.139       1.139       1.139       1.139       1.139
4    ar.me()  462235.106  462235.106  462235.106  462235.106  462235.106
5       tl()  201988.996  201988.996  201988.996  201988.996  201988.996 
```

似乎创建键（索引）很耗时。但是一旦创建索引，`data.table`方法是无与伦比的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-25T00:43:25.007

只需在现有的优秀答案列表中添加另一种方法：

```
> library(dplyr)
> library(qdapTools)
> mutate(df2, v2 = id %l% df1)
#  id        v2
#1  1  1.000000
#2  2  6.210526
#3  3 11.421053
#4  4 16.631579
#5  5 21.842105
#6 21        NA
#7 22        NA
#8 23        NA 
```

# jquery - 仅当当前迭代不是悬停元素时才执行每个函数

> ID：15310148
> 
> 赞同：0
> 
> 时间：2013-03-09T11:29:29.720
> 
> 标签：jquery

我想希望我的代码能说明一切。

当我将鼠标悬停在一个元素上时，我想在同一类的所有元素上运行每个函数，但不是当前悬停的元素：

```
$(document).on({
mouseenter: function () {
    $('#%id% .imageStyle').each(function(){
        if($(this) != $(this)){ // obviously this line is incorrect
        // I only want to execute this if the current each iteration is not the element I am hovering over
            $.this.pixastic("desaturate");
        }
    });
    Pixastic.revert(this);
},

mouseleave: function () {
    $(this).pixastic("desaturate");
}
}, '#%id% .imageStyle'); 
```

更新，这个新代码做我现在想要的......

```
$(".%id%desaturate img").addClass("sprightly");

$(document).on({
mouseenter: function () {
    $('.sprightly').not(this).each(function(){
        if($(this).is("img")){
            $(this).trigger("mouseleave");
        }
    });
    Pixastic.revert(this);
},

mouseleave: function () {
    $(this).pixastic("desaturate");
}
}, '#%id% .imageStyle'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T11:40:03.883

**更新**

不需要使用 each 函数，因为`.pixastic()`它将应用于选择器匹配的所有元素。试试这个，我没有测试过

```
$("#container").on({
mouseenter: function () {
    $('#container .imageStyle').not(this).pixastic("desaturate");
    Pixastic.revert(this);
},

mouseleave: function () {
    $(this).pixastic("desaturate");
}
}, '.imageStyle'); 
```

# php - HTML 邮件未显示在客户端 Outlook Express 中

> ID：15310151
> 
> 赞同：1
> 
> 时间：2013-03-09T11:30:04.407
> 
> 标签：php, html, email, header

我正在使用以下代码发送电子邮件：

```
 $to = "****.co.uk";
        $subject = "Membership submission";
        $body = "";

        $date = date('d/m/Y H:i:s');

        $body .= "<b>REF</b>: " . $postId . "<br />";  
        $body .= "<b>On</b>: " . $date . "<br />";
        $body .= "<b>First name</b>: " . $postFirstName . "<br />";
        $body .= "<b>Last name</b>: " . $postLastName . "<br />";
        $body .= "<b>Company name</b>: " . $postCompanyName . "<br />";
        $body .= "<b>Address</b>:<br /> " . nl2br( $postAddress ) . "<br />";
        $body .= "<b>Telephone number</b>: " . $postTelephoneNumber . "<br />";          
        $body .= "<b>Email</b>: " . $postEmail . "<br />";       
        $body .= "<b>Website</b>: " . $postWebsite . "<br />";        
        $body .= "<b>Skills</b>:<br /> " . nl2br( $postSkills ) . "<br />";      
        $body .= "<b>Payment method</b>: " . $postPaying . "<br />";    

        // To send HTML mail, the Content-type header must be set
        $headers  = 'MIME-Version: 1.0' . "\r\n";
        $headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";

        // Additional headers
        $headers .= 'From: noreply@*****.co.uk' . "\r\n";

        if ( mail( $to, $subject, $body, $headers ) ) {
        // 
```

在 outlook.com 和 windows 8 邮件程序中，它可以正常运行。但是当发送到我客户的桌面前景程序时，它会像这样：

```
Content-type: text/html; charset=iso-8859-1

 From: noreply@***
 X-Brightmail-Tracker: AAAAAQAAAlk=

 <b>REF</b>: 513a8440922ea<br /><b>On</b>: 09/03/2013 00:40:59<br /><b>First
 name</b>: a name<br /><b>Last name</b>: a last name<br /><b>Company name</b>: My
 Company name<br /><b>Address</b>:<br /> an address,<br />

 2,<br />

 3,<br />

 4,<br />

 postcode<br /><b>Telephone number</b>: 521213091<br /><b>Email</b>:
 ****.co.uk<br /><b>Website</b>: site.com<br
 /><b>Skills</b>:<br /> I do not have any skills to assist with.<br />

 <br />

 Sorry<br /><b>Payment method</b>: Bank transfer<br /> 
```

我的代码有什么问题吗？

我刚刚尝试添加这个：

```
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit 
```

现在我在 outlook.com 中收到的电子邮件只有 HTML。所以杀了它？啊，这里有什么问题！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T11:36:32.517

您似乎缺少 MIME 规范：添加：

```
$header  .= 'MIME-Version: 1.0' . "\r\n";
$header .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n"; 
```

它也显示在[mail-function 的 PHP 文档中](http://de.php.net/manual/en/function.mail.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T11:48:12.127

我不确定，但这可能是因为您缺少开始`<html>`和结束`</html>`标签。

mail() 函数[的文档](http://php.net/manual/en/function.mail.php#example-3280)中的示例可能会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T11:57:01.117

这是我正在使用的代码片段。我工作得很好。

```
// Boundary 
$innerboundary ="=_".time()."_=";

// Mail-Header 
$header ="MIME-Version: 1.0\n"; 
$header.="From: sender@mail.com\n"; 
$header.="Reply-To: sender@mail.com\n"; 
$header.="X-Mailer: kmPHP-Mailer\n"; 
$header.="Content-Type: multipart/alternative;\n\tboundary=\"".$innerboundary."\"\n";

// Mail-subject 
$subject ="Subject goes here"; 
$body ="";

// HTML part 
$body.="\n--".$innerboundary."\n"; 
$body.="Content-Type: text/html;\n\tcharset=\"iso-8859-1\"\n"; 
$body.="Content-Transfer-Encoding: base64\n\n"; 
$body.=chunk_split(base64_encode(($html_string_goes_here)))."\n\n"; 
$body.="\n--".$innerboundary."--\n"; 
$body.="\n\n"; 
```

# php - 如何在 JavaScript 中使用 php 变量

> ID：15310155
> 
> 赞同：-3
> 
> 时间：2013-03-09T11:30:18.993
> 
> 标签：php, javascript, variables

我想为我网站上的图片添加标签。图像由用户添加并在页面上列出。每个图像下面都有自己的选项卡。我找到了这个来源并应用了它：

```
<style>
  .tabContainer{margin:10px 0;width:400px;}
.tabContainer .digiTabs{list-style:none;display:block;overflow:hidden;margin:0;padding:0px;position:relative;top:1px;}
 .tabContainer .digiTabs li{float:left;background-color:#46AAF7;border:1px solid #e1e1e1;padding:5px!important;cursor:pointer;border-bottom:none;margin-right:10px;font-family:verdana;font-size:.8em;font-weight:bold;color:#fff;}
.tabContainer .digiTabs .selected{background-color:#fff;color:#393939;}#tabContent{padding:10px;background-color:#fff;overflow:hidden;float:left;margin-bottom:10px;border:1px solid #e1e1e1;width:93%;}
</style>
<script type="text/javascript">
 function tabs(x)
 {
  var lis=document.getElementById("sidebarTabs").childNodes; //gets all the LI from the UL

  for(i=0;i<lis.length;i++)
  {
  lis[i].className=""; //removes the classname from all the LI
}
x.className="selected"; //the clicked tab gets the classname selected
var res=document.getElementById("tabContent");  //the resource for the main tabContent
var tab=x.id;
switch(tab) //this switch case replaces the tabContent
{
  case "tab1":
    res.innerHTML=document.getElementById("tab1Content").innerHTML;
    break;

  case "tab2":
    res.innerHTML=document.getElementById("tab2Content").innerHTML;
    break;
  case "tab3":
    res.innerHTML=document.getElementById("tab3Content").innerHTML;
    break;
  default:
    res.innerHTML=document.getElementById("tab1Content").innerHTML;
    break;

}
 }

</script>
     <div class="tabContainer" >
      <ul class="digiTabs" id="sidebarTabs">
         <li  id="tab1" class="selected"  onclick="tabs(this);">Tab 1</li>
         <li id="tab2" onclick="tabs(this);">Tab 2</li>
         <li id="tab3"  onclick="tabs(this);">Tab 3</li>
      </ul>
       <div id="tabContent">Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.</div>
    </div>

       <div id="tab1Content" style="display:none;">Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.</div>
       <div id="tab2Content" style="display:none;"><img src="http://www.digimantra.com/digimantra_ad_125_125.png" alt="digimantra logo" /></div>

      <div id="tab3Content" style="display:none;">The standard chunk of Lorem Ipsum used since the 1500s is reproduced below for those interested. Sections 1.10.32 and 1.10.33 from "de Finibus Bonorum et Malorum" by Cicero are also reproduced in their exact original form, accompanied by English versions from the 1914 translation by H. Rackham.</div> 
```

但是在这种情况下，无论您单击哪个选项卡，都只会打开第一个图像的选项卡。我想尝试为 div 定义变量的解决方案。所以我补充说：

```
{$aPhoto.photo_id} 
```

在div之后喜欢

```
tab3Content_{$aPhoto.photo_id} 
```

所以现在每个项目都有自己的div。（例如：tab3Content_16、tab3Content_17）

但我不知道如何在 Java Script 中应用这个照片 id 变量。我会很高兴你的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T12:22:33.207

通常，如果您想在客户端（JavaScipt、HTML、CSS...）上使用来自服务器端（PHP、Java、C#、python...）的变量，您必须将变量写入页面。

对于 PHP 和 JavaScript，可以这样做：

```
<script type="text/javascript">
  // Create global variable named jsVariable
  var jsVariable = <?php echo $PHPvariable; ?>;
</script> 
```

当`$PHPvariable`包含值 10 时，客户端生成的源代码为：

```
<script type="text/javascript">
  // Create global variable named jsVariable
  var jsVariable = 10;
</script> 
```

如果你使用字符串变量要小心，那么你必须在你的代码中写上引号（“），比如`jsVariable = "<?php= $PHPvariable ?>";`

无论如何，这不适用于您。在您的示例中，您有静态 JavaScript，其使用名称、代码结构和选项卡计数始终为 3。如果用户有可能上传任意数量的图像并且您想在单击相应选项卡时显示它，则必须更改 JavaScript 代码。对您来说最简单的方法是使用[jQuery 库](http://jquery.com/)。

然后你必须意识到你想要使用哪种 HTML 结构。基于您的代码的最小结构是：

```
 <div class="tabContainer" >
   <ul class="digiTabs" id="sidebarTabs">
     <li  id="tab1" class="selected"  onclick="tabs(this);">Tab 1</li>
     <li id="tab2" onclick="tabs(this);">Tab 2</li>
     <li id="tab3"  onclick="tabs(this);">Tab 3</li>
   </ul>
   <div id="tabContent">Lorem Ipsum ...</div>
</div>

<div class="tabHolder" style="display:none;">
  <div id="tab1Content">Lorem Ipsum ...</div>
  <div id="tab2Content"><img src="..."/></div>
  <div id="tab3Content">The standard ...</div>
</div> 
```

该 HTML 代码可以由 PHP 代码生成，例如：

```
 <div class="tabContainer" >
   <ul class="digiTabs" id="sidebarTabs">
     <?php echo '<li id="tab'.$aPhoto.photo_id.'">'.$aPhoto.photo_name.'</li>'; ?>
   </ul>
   <div id="tabContent">Lorem Ipsum ...</div>
</div>

<div class="tabHolder" style="display:none;">
  <?php echo '<div id="tab'.$aPhoto.photo_id.'Content"><img src="'.$aPhoto.photo_src.'"/></div>'; ?>
</div> 
```

然后您可以根据`li`单击的内容编写 JavaScript。使用 jQuery 可能是这样的：

```
// Invoke script when document is ready
$(document).ready(function() {
  // Add click handler to ul.tabContainer > li
  $('ul.tabContainer > li').click(function() {
    // get ID of clicked element
    var id = $(this).attr('id'); // expacted values are tab1, tab2, tab3, ...
    // find hidden content in div.tabHolder
    var content = $('div.tabHolder #' + id + 'Content');
    // Copy HTML content from selected content to div#tabContent
    $('div#tabContent').html(content.html()); // method html() without parameters gets content, method html(htmlData) with one parameter sets content.
    // clear variables to prevent IE memmory leaks
    id = null;
    content = null;
  });
}); 
```

# java - 如何更新主要读取的持久数据？

> ID：15310156
> 
> 赞同：0
> 
> 时间：2013-03-09T11:30:19.267
> 
> 标签：java, networking, architecture, distributed-computing

[这是我之前的问题](https://stackoverflow.com/questions/15303997/back-end-for-auto-complete)的后续。

假设我有一个服务器应用程序，它使用一些*只读*文件。有时（例如几个小时一次）我们更新这个文件并且应用程序开始使用更新的数据。

如何实施？我相信应用程序应该定期检查更新并在有可用更新时更新文件。文件更新后，应用程序应执行所有必要的初始化（例如，使内部缓存无效等），同时仍使用“旧”数据。初始化完成后，它会丢弃“旧”数据并仅使用“新”数据。

是否有意义？这个问题看起来很笼统。是否有任何现成的 Java 基础设施可以解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T11:43:33.050

听起来像缓存。两个灵活的线程安全缓存实现是[Guava 的缓存](https://code.google.com/p/guava-libraries/wiki/CachesExplained)、[EhCache](http://ehcache.org/)或[Hazelcast](http://www.hazelcast.com/docs/2.5/manual/single_html/)。这三个都将以线程安全的方式过期并重新加载。Hazelcast 和 EhCache 可以分布在网络上。Guava 不是分布式的，但更简单。

如果您决定不想使用缓存，那么对于一些长期保存在内存中的对象（例如单例），另一个常见用例是[双重检查锁定](http://www.ibm.com/developerworks/java/library/j-dcl/index.html)。[Guava 的Suppliers memoize 功能](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/Suppliers.html#memoize%28com.google.common.base.Supplier%29)使其更加优雅。

我建议您使用带有缓存的不可变对象或 @MarkoTopolnik 建议的`volatile`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T12:04:20.320

您应该有一个对象，该对象代表从文件中读取的所有数据和派生自它的服务。维护`volatile`对该对象的引用，这将确保线程安全的发布。

# html - 为网络摄像头视频元素添加边框半径

> ID：15310158
> 
> 赞同：0
> 
> 时间：2013-03-09T11:30:31.677
> 
> 标签：html, css

如何为视频元素添加边框半径。这是我的代码。它在 mozilla-firefox 中运行良好，但在 chrome 中失败。视频元素边框半径不支持 chrome。

CSS #视频{

```
-moz-border-radius:40px;
 webkit-border-radius:40px;
 border-radius:40px; 
```

}

HTML：

```
<video id="video"  style="display:block;margin:0 auto;"></video> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T11:35:24.683

你错过了`-`in `-webkit-border-radius`。

我发现这个[css 技巧博客](http://css-tricks.com/almanac/properties/b/border-radius/)对于查找跨浏览器样式非常有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T11:35:49.980

1.  创建父 div 并为其设置边框半径
2.  将视频包含到父 div 中。

顺便说一句：对于现代浏览器，您可以使用“border-radius”而不是“--moz-border-radius”和“-webkit-border-radius”。

例子：

```
<html>
<head>
<style type='text/css'>
.videobox {
    width: 700px;
    border: 5px solid #000;
    border-radius: 40px;
    }
    .video-stream {margin: 30px;}
</style>
</head>
<body>
    <div class="videobox">
        <video class="video-stream"  id=home_video class="video-js vjs-default-skin" controls preload=none width=640 height=264
            poster="http://video-js.zencoder.com/oceans-clip.jpg">
          <source src="http://video-js.zencoder.com/oceans-clip.mp4" type='video/mp4'/>
          <source src="http://video-js.zencoder.com/oceans-clip.webm" type='video/webm'/>
          <track kind=captions src="/video-js/captions.vtt" srclang=en label=English />
        </video>
    </div>
</body>
</html> 
```

# c# - 我可以更新使用 db.ExecuteQuery() 检索到的 LINQ-to-SQL 记录吗？

> ID：15310161
> 
> 赞同：0
> 
> 时间：2013-03-09T11:30:50.947
> 
> 标签：c#, .net, linq, linq-to-sql

我的查询是从 app.config 动态检索的。我知道某些列将被包括在内。我想更新处理后返回的每条记录中的一列。我可以使用`.SubmitChanges()`或类似方法吗？还是我必须`db.ExecuteQuery()`用更新 sql 写另一个？

```
DataClasses1DataContext db = new DataClasses1DataContext();
IEnumerable<invoice> invoices = db.ExecuteQuery<invoice>(ConfigurationManager.AppSettings["query_sql"].ToString());
foreach (invoice i in invoices)
{
    // do something with the invoice
    // flag the invoice as processed
    i.doc_processed = "Y";
    db.SubmitChanges();
} 
```

**更新**

感谢 madd0 的回答，我重新设计了我的应用程序允许动态 SQL 的方式。应用程序不是在 app.config 中输入查询，而是查找具有特定名称的 SQL 视图。这样可以添加视图，LINQ 将自动生成类型/类并允许使用跟踪/更新`.SubmiteChanges()`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T12:11:45.590

为了用于`SubmitChanges`更新您的实体，Linq to Sql 必须能够跟踪它们。最简单的方法是让 Linq 生成你的类型（或者，你也可以用一堆属性装饰 POCO。）

如果`invoice`没有生成您的类型以便 Linq to Sql 可以跟踪它，则无法`DataContext`确定哪些对象已更改并在调用`UPDATE`时生成正确的语句。`SubmitChanges`

如果您*正在*使用跟踪实体并[`ObjectTrackingEnabled`](http://msdn.microsoft.com/en-us/library/system.data.linq.datacontext.objecttrackingenabled.aspx)设置为`true`，但想要使用`ExecuteQuery<T>`而不是让 Linq to Sql 生成查询，您仍然必须确保您的`SELECT`命令返回所有跟踪字段并且您的表有一个主键（这是在[文档中`ExecuteQuery<T>`](http://msdn.microsoft.com/en-us/library/bb361109.aspx)解释。）

最后，正如我在原始答案中解释的那样，您始终可以手动执行`UPDATE`查询`ExecuteCommand`。这就是我进行大部分更新的方式，因为它在大多数情况下更有效，尤其是在更新大量实体时，因为 Linq to SQL 将`UPDATE`在使用时在服务器上为每个更新的记录执行单独的命令`SubmitChanges`，而如果您手动执行，您很可能能够将其编写为单个命令。

如果您决定创建自己的`UPDATE`语句并使用 执行它们`ExecuteCommand`，请记住使用**参数**而**不是**使用连接来这样做，以限制 SQL 注入攻击。参数化查询的示例可[在`ExecuteCommand`](http://msdn.microsoft.com/en-us/library/system.data.linq.datacontext.executecommand.aspx).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T12:29:33.617

一如既往，这取决于。

在您的情况下，这取决于 // 对发票进行操作。如果您在该部分中触​​摸每张发票的许多字段，则此代码很好。除了您可以将 submitchanges 移到循环之外：

```
 foreach (invoice i in invoices)
    {
        // do something with the invoice
        // flag the invoice as processed
        i.doc_processed = "Y";
    }
 db.SubmitChanges(); 
```

因此您将受益于单笔交易（尽管仍然是多次更新，因此在性能方面有大量发票不会是最好的）。

如果 // 做某事相对简单明了，我会在查询中编写整个 // 做某事的逻辑并在 sql 中执行，有效地减少你的代码

```
db.ExecuteQuery<invoice>(ConfigurationManager.AppSettings["do_something_update_query_sql"].ToString()); 
```

这种方式将是最高效的，但您不使用 Linq2sql 的任何 ORM 部分。

# c# - XNA - Foreach 循环有奇怪的行为

> ID：15310165
> 
> 赞同：0
> 
> 时间：2013-03-09T11:31:30.697
> 
> 标签：c#, foreach, xna

我正在使用 XNA 构建游戏。

我有一个 foreach 循环，它遍历一个带有瓷砖的列表。在 foreach 循环中，它会检查鼠标是否被点击、鼠标是否在瓷砖上以及鼠标是否在某个容器内。

哪里出错了，在里面

```
MouseInput.IsTileHovered(tile, camera) 
```

每个图块都有自己的图块位置，范围从 x=1 和 y=1 到 x=20 和 y=15。但是，在 IsTileHovered() 函数中，平铺位置始终为 x=1 和 y=1。这是不正确的。正如我所说，每块瓷砖都有自己的位置，这是独一无二的。tilePosition 用于计算 worldPosition。

**带有 foreach 循环的函数**

```
public void PlaceNewTileOnMap(MapEditorTile newTile)
{
    foreach (Tile tile in tiles)
    {
        if (MouseInput.IsClicked() && MouseInput.IsTileHovered(tile, camera)
            && MouseInput.IsMouseWithinTileContainer(backgroundRectangle))
        {
            tile.SetTileInfo(newTile.GetTileInfo());
            tile.SetCurrentFrame(newTile.GetCurrentFrame());

            Vector2 maxTiles = new Vector2(
                Constants.MAP_EDITOR_DEFAULT_HORIZONTAL_TILES,
                Constants.MAP_EDITOR_DEFAULT_VERTICAL_TILES);

            MainTileGenerator tileGenerator = new MainTileGenerator(tile, tiles, maxTiles);
            UpdateCorrectedTiles(tileGenerator.CorrectTiles());
        }
    }
} 
```

**总是接收位置 x=1 和 y=1 的图块的函数**

```
public static bool IsTileHovered(Tile tile, Camera camera)
{
    Vector2 mouseWorldPosition = Vector2.Transform(new Vector2(newMouseState.X, newMouseState.Y),
        Matrix.Invert(camera.GetTransformation()));

    if (mouseWorldPosition.X > tile.GetWorldPosition().X
        && mouseWorldPosition.X < tile.GetWorldPosition().X + (tile.GetSingleElementSize().X * GameServices.UIService.ScreenScale)
        && mouseWorldPosition.Y > tile.GetWorldPosition().Y
        && mouseWorldPosition.Y < tile.GetWorldPosition().Y + (tile.GetSingleElementSize().Y * GameServices.UIService.ScreenScale))
    {
        return true;
    }
    else
    {
        return false;
    }
} 
```

当我在 foreach 循环中将 tilePositions 写入控制台时，但在 if 语句之前，我得到了所有唯一的 tilePositions，这是正确的。但是，当我在 IsTileHovered() 函数中执行相同操作时，tilePosition 为 x=1 和 y=1，无论它使用列表中的哪个图块。

有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T16:15:37.627

好吧，所以这对我来说太愚蠢了。看来，

```
MouseInput.IsClicked 
```

在 foreach 中的第二个图块上返回 false，即使它仍然是同一帧。所以我所要做的就是改变 if 语句中的顺序

```
if (MouseInput.IsClicked() && MouseInput.IsTileHovered(tile, camera)
        && MouseInput.IsMouseWithinTileContainer(backgroundRectangle)) 
```

到

```
if (MouseInput.IsTileHovered(tile, camera)
    && Input.IsMouseWithinTileContainer(backgroundRectangle)
    && MouseInput.IsClicked()) 
```

它现在会检查鼠标是否最后被点击了，所以现在它会循环遍历所有我想要的图块。:)

# windows - 在代理后面使用 git

> ID：15310167
> 
> 赞同：10
> 
> 时间：2013-03-09T11:31:41.620
> 
> 标签：windows, git, configuration, proxy

我在代理后面。要开始`git`工作，我必须添加

```
proxy = http://username:password@proxy.at.your.org:8080 
```

到`.gitconfig`.

因为`username`并且`password`是我的系统凭据，所以这个解决方案很糟糕，因为我必须将它们存储为`cleartext`.

我正在使用`Google Chrome`不需要设置任何代理设置的地方，因为它使用系统代理设置。

如何做到这一点`git`？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-09T11:45:03.247

2016 年 2 月更新：

使用 git 2.8（2016 年 3 月），您不必在 url 中以明文形式嵌入您的密码。

请参阅[Knut Franke (``)的](https://github.com/)[提交 372370f](https://github.com/git/git/commit/372370f1675c2b935fb703665358dd5567641107)和[提交 ef97639](https://github.com/git/git/commit/ef976395e26a25fb6d048d859a1c8cddb2640b9a)（2016 年 1 月 26 日） 。 帮助者：[Junio C Hamano (](https://github.com/gitster) [)](https://github.com/gitster)、[Eric Sunshine (](https://github.com/sunshinebell28) [)](https://github.com/sunshinebell28)和[Elia Pinto (](https://github.com/devzero2000) [)](https://github.com/devzero2000)。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 30f302f](https://github.com/git/git/commit/30f302f7e7f407c0444b32e264aaa72c4081011e))^(中，2016 年 2 月 3 日）)
[`gitster`](https://github.com/gitster)[`sunshinebell28`](https://github.com/sunshinebell28)[`devzero2000`](https://github.com/devzero2000)
^([`gitster`](https://github.com/gitster))

> ## `http`: 使用凭证 API 处理代理认证
> 
> 目前，将代理凭据传递给 curl 的唯一方法是将它们包含在代理 URL 中。通常，这意味着它们最终会以一种或另一种方式（通过包含在`~/.gitconfig`外壳配置文件或历史记录中）未加密的磁盘上。
> 由于代理身份验证通常使用域用户，因此凭据可能是安全敏感的；因此，需要一种更安全的凭据传递方式。
> 
> 如果配置的代理包含用户名但不包含密码，请在凭证 API 中查询一个。此外，请确保我们正确批准/拒绝代理凭据。所以：
> 
> 除了 curl 可以理解的语法之外，还可以指定一个**带有用户名但没有密码的代理字符串**，在这种情况下，git 将尝试以与其他凭据相同的方式获取一个代理字符串。
> 有关更多信息，请参阅[gitcredentials](https://stackoverflow.com/a/5343146/6309)。
> 因此语法是：

```
[protocol://][user[:password]@]proxyhost[:port] 
```

> 这可以在每个远程的基础上被覆盖；见`remote.<name>.proxy`。

* * *

2015 年 10 月更新

[从 git 1.8.0](https://github.com/git/git/blob/37023ba381b6d251d7140a997b39b566dbc63c42/Documentation/RelNotes/1.8.0.txt#L30-L31)和[commit 7bcb747 开始](https://github.com/git/git/commit/7bcb7473bb14943e172d3dc1dcbf42872b654cba)，默认的 Windows 凭据助手是`wincred`git credential helper，它与 Windows 的凭据管理器交互。

```
 git config --global credential.helper wincred 
```

* * *

原始答案（2013 年 3 月）：

您可以在 Windows 上使用[git-credential-winstore 之](https://github.com/anurse/git-credential-winstore/downloads)类的[凭证助手 (git1.7.9+)](https://stackoverflow.com/a/5343146/6309)来存储您的凭证。 您将使用 ' ' 声明它。 然后，您可以在不输入用户名和密码的情况下声明您的代理：
`git config --global credential.helper winstore`

```
git config --global http.proxy http://proxy.server.com:8080 
```

（虽然我更喜欢[使用环境变量`http_proxy`和`https_proxy`](https://stackoverflow.com/a/397642/6309)）

另请参阅“ [git: ' `credential-cache`' 不是 git 命令](https://stackoverflow.com/a/11889392/6309)”

* * *

# ruby - Ruby on rails 中的字符串操作和连接

> ID：15310168
> 
> 赞同：0
> 
> 时间：2013-03-09T11:31:43.333
> 
> 标签：ruby, string, ruby-on-rails-3.2

我有一个像这样的字符串：

```
"/system/path/513/b02/36a/66ea2557[*,0].swf,16" 
```

我在我的应用程序中使用 Ruby on Rails。我试图通过将 1-16 附加到 66ea2557 的末尾来制作 16 个网址，以获得类似：

```
"/system/path/513/b02/36a/66ea25571.swf"
"/system/path/513/b02/36a/66ea25572.swf"
..
"/system/path/513/b02/36a/66ea255715.swf"
"/system/path/513/b02/36a/66ea255716.swf" 
```

我怎样才能在 Ruby 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T13:52:28.717

假如说：

*   您是`"/system/path/513/b02/36a/66ea2557[*,0].swf,16"`从某个地方获得的，可能超出您的控制范围，需要对其进行解析
*   字符串末尾的数字`16`不一定每次都相同，表示您需要的网址数量
*   您不需要`[*,0]`字符串的任何部分，也不一定表示任何内容

我想出了：

```
string = "/system/path/513/b02/36a/66ea2557[*,0].swf,16"
base_path, _, file_extension, num_urls = string.split(/(\[\*,0\])|,/)
# => ["/system/path/513/b02/36a/66ea2557", "[*,0]", ".swf", "16"]
(1..num_urls.to_i).map { |i| "#{base_path}#{i}#{file_extension}" }
# => ["/system/path/513/b02/36a/66ea25571.swf",
      "/system/path/513/b02/36a/66ea25572.swf",
      ...
      "/system/path/513/b02/36a/66ea255716.swf"] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T12:37:01.237

```
(1..16).each do |i|
  puts "/system/path/513/b02/36a/66ea2557#{i}.swf"
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T12:42:56.033

你可以尝试简单的循环。就像是：

```
#test.rb

arr = Array.new();
for i in 1..16
    arr[i-1] = "/system/path/513/b02/36a/66ea2557" + i.to_s;
end

puts arr; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-09T13:24:48.457

您可以使用[String#%](http://www.ruby-doc.org/core-2.0/String.html#method-i-25)：

```
path = "/system/path/513/b02/36a/66ea2557%s.swf"
(1..16).map {|index| path % index} 
```

# c# - MVC 4 中的 Google OAuth 为同一域提供多个令牌

> ID：15310169
> 
> 赞同：0
> 
> 时间：2013-03-09T11:31:46.863
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4, oauth-2.0

我有一个带有 OAuth 2 的全新 MVC 4 Internet 模板。该应用程序部署到 Internet 域 (somedomain.com) 并通过 google oauth 成功登录用户。然而，即使选择了“记住我的决定”，随后的登录尝试仍将继续要求用户授权访问他们的电子邮件地址，就好像这是第一次一样。查看我的[Google AuthSubTokens 会](https://accounts.google.com/IssuedAuthSubTokens)显示 somedomain.com 的多个实例。

关于为什么谷歌会不断要求授权的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T12:10:46.887

谷歌为同一个帐户的 http:// 和 https:// 提供了不同的令牌。也许那是你的问题。

# knockout.js - 如何在淘汰赛剑道中使用detailTemplate？

> ID：15310172
> 
> 赞同：2
> 
> 时间：2013-03-09T11:32:10.977
> 
> 标签：knockout.js, kendo-ui, kendo-grid

Kendo UI 支持`detailTemplate`使用，但是如何通过 Knockout-kendo 绑定来使用呢？

jsfiddle 代码在[这里](http://jsfiddle.net/Dhana/6ce5K/2/)

只是添加`rowTemplate`并`detailTemplate`不起作用，`rowTemplate`显示但是当我打开打开详细信息时，我得到了各种异常（ASP.NET 中预期的对象和 jsfiddle 中断）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-25T20:22:44.757

这是我想出的（根据您的解释）。我知道你已经做了一个解决方法，但这里有一个答案，所以这个问题至少可以有一个答案，以防其他人遇到这个问题。

**看法**

```
<div data-bind="kendoGrid: { data: items, columns: columns, pageable: { pageSize: 3 }, scrollable: false, rowTemplate: 'rowTmpl', useKOTemplates: true }"> </div>

<script id="rowTmpl" type="text/html">
    <tr>
        <td data-bind="click: $parent.toggleShowDetails">+</td>
        <td data-bind="text: id"></td>
        <td data-bind="text: name"></td>
    </tr>
    <tr data-bind="visible: showDetails">
        <td colspan="3">
            <div data-bind="kendoGrid: { data: $data.details, scrollable: false }"></div>
        </td>
    </tr>
</script> 
```

**视图模型**

```
var ViewModel = function () {
    var self = this;
    self.columns = [{ field: ' ' }, { field: 'id' }, { field: 'name'}];
    self.items = ko.observableArray([
        { id: "1", name: "apple", details: [{ id: "1", name: "subApple"}], showDetails: ko.observable(false) },
        { id: "2", name: "orange", details: [{ id: "2", name: "subOrange"}], showDetails: ko.observable(false) },
        { id: "3", name: "banana", details: [{ id: "3", name: "subBanana"}], showDetails: ko.observable(false) },
        { id: "4", name: "pineapple", details: [{ id: "4", name: "subPineapple"}], showDetails: ko.observable(false) },
        { id: "5", name: "grape", details: [{ id: "5", name: "subGrape"}], showDetails: ko.observable(false) },
        { id: "6", name: "mango", details: [{ id: "6", name: "subMango"}], showDetails: ko.observable(false) }
    ]);

    self.toggleShowDetails = function (data, event) {
        data.showDetails(!data.showDetails());
    };
};

ko.applyBindings(new ViewModel()); 
```

链接到 GitHub 问题评论：[https ://github.com/kendo-labs/knockout-kendo/issues/75#issuecomment-20004008](https://github.com/kendo-labs/knockout-kendo/issues/75#issuecomment-20004008)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-26T09:32:11.603

我采用了另一种方法，其中行模板本身有两行，一行是实际数据，另一行是详细信息行。然后使用手风琴触发详细信息行的显示/隐藏。使用手风琴的引导程序......对我来说效果很好，尽管它是一种绕行的方式。顺便说一句，在内部这也是他们的做法，但是是动态的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-13T21:57:21.933

理想情况下，这可以通过对 kendo-knockout 的拉取请求来解决。取而代之的是，您可以通过以下方式获取敲除数据以在剑道网格详细信息模板中正确绑定和渲染：

首先，将 detailTemplate 添加到 kendoGrid 的模板列表中。为此，打开 knockout-kendo.js，搜索“kendoGrid”，然后将“detailTemplate”添加到模板名称数组中。更改后应如下所示：

```
createBinding({
    name: "kendoGrid",
    defaultOption: DATA,
    watch: {
        data: function(value, options) {
            ko.kendo.setDataSource(this, value, options);
        }
    },
    templates: ["rowTemplate", "altRowTemplate", "detailTemplate"]
}); 
```

其次，除了为您的绑定定义一个 detailTemplate 之外，还添加一个 detailInit 绑定，该绑定绑定到您的视图模型上的方法。这是一个示例绑定：

```
<div data-bind="kendoGrid: { data: items, detailTemplate: 'myKoTemplate',
    useKOTemplates: true, detailInit: myDetailInit } "> </div> 
```

第三，将以下 detailInit 方法添加到您的视图模型中，以便绑定可以找到它：

```
this.myDetailInit = function(e) {
  // Manually fire the databound event on the grid to 
  // get the detail template to unmemoize properly
  e.sender.options.dataBound();
} 
```

这是一支带有此工作示例的笔：[https ://codepen.io/codethug/pen/MXoqZy](https://codepen.io/codethug/pen/MXoqZy)

还在读书？伟大的。那么这里发生了什么，为什么这首先被破坏了？

第一部分很简单。detailTemplate 未列为 kendoGrid 的模板。添加它会使剑道淘汰赛渲染模板。但是，模板会被记忆，但它永远不会被记忆。

在这种情况下，记忆化意味着当 kendo 向 kendo-knockout 模板渲染器请求模板时，该模板又将其交给 kendo-knockout 模板渲染器，模板不会立即渲染，而是以占位符的形式呈现如下所示的 HTML 注释：`<!--[ko_memo:123abc]-->`插入到 DOM 中，而不是呈现的模板中。

Knockout-Kendo 假设在渲染模板后，将在 kendo 网格小部件上触发 dataBound 事件。Knockout-kendo 与该事件挂钩，以使他们取消对模板的记忆。对于像 rowTemplate 这样的模板的使用，这个假设是正确的。设置小部件时，Kendo 调用 render 方法，然后 kendo 调用 dataBound 方法。

但是，对于 detailTemplate，假设不成立。当您单击某个内容以展开剑道网格行上的详细信息时，会调用 renderTemplate 方法，但不会触发 dataBound 事件，可能是因为数据没有更改。

我们可以通过手动触发 dataBound 事件来解决这个问题，如上面的代码所示。实际上没有任何数据发生变化，但是触发该事件将触发 kendo 淘汰，从而取消对 HTML 注释的记忆`<!--[ko_memo:123abc]-->`并用正确呈现的模板替换它。

# node.js - 创建一个全局可访问的 node.js 模块

> ID：15310173
> 
> 赞同：4
> 
> 时间：2013-03-09T11:32:12.750
> 
> 标签：node.js, module, global

我想创建一个全局可访问的 node.js 模块，比如`express`和`mocha`.

因此，我深入研究了他们的源代码，并创建了以下简短示例：

*index.js*文件，位于*hello/*目录中：

```
#!/usr/bin/env node

console.log("Hello world!") 
```

正如你所看到的，它只是一个“hello world”来测试这个概念。

这是位于同一*hello/*目录中的*package.json文件：*

 *```
{
  "name": "Hello",
  "version": "0.0.1",
  "main": "./index",
  "bin": {
    "hello": "./bin/hello"
  }
} 
```

然后，我尝试使用以下内容使用*npm安装节点应用程序：*

```
sudo npm install -g hello/ 
```

但这会返回一个错误：

```
npm ERR! Error: ENOENT, chmod '/usr/local/lib/node_modules/Hello/bin/hello' 
```

我不知道出了什么问题，因为我尊重模块结构，就像我在`express`和`mocha`. 您能否通过以下方式为我提供帮助：

*   指出我的情况有什么问题
*   链接到有关创建可执行节点模块的有用 tuts 和资源

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T16:28:01.083

您正在尝试安装该目录。

如果您想为您在本地安装模块，只需将其复制到`/usr/local/lib/node_modules/npm/node_modules/`.

但是，如果要`npm`安装它（共享），则必须创建一个包。

```
npm login
npm publish
npm install -g hello 
```

如果你害羞，`npm unpublish`会删除它。*

# c# - 如何简化此 C# 代码

> ID：15310176
> 
> 赞同：0
> 
> 时间：2013-03-09T11:32:50.990
> 
> 标签：c#, visual-studio-2010

有没有更好的方法在 vs2010 C# 中编写这个？

```
 public bool IsAccept()
    {
        //check the status is accept
        if (Status == null)
            return false;
        return Status.ToLower() == "accept";
    }

    public bool IsRefer()
    {
        //check the status is refer
        if (Status == null)
            return false;
        return Status.ToLower() == "refer";
    }

    public bool IsAnyReviewState()
    {
        if (IsAccept() || IsRefer())
            return true;
        return false;
    } 
```

也许是我仍在学习的 C# 4 中的一种简化方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T11:37:42.400

您可以使用短路评估来使代码更精确。顺便提一句。C# 4 对此没有任何具体规定。

```
public bool IsAccept()
{
    //check the status is accept
    return Status != null && Status.ToLower() == "accept";
}

public bool IsRefer()
{
    //check the status is refer
    return Status != null && Status.ToLower() == "refer";
}

public bool IsAnyReviewState()
{
    return IsAccept() || IsRefer();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T11:37:43.040

1.  对于像这样的简单访问器，属性语法比方法更好。
2.  使用`String.Equals`or `String.IndexOf`with`StringComparison.OrdinalIgnoreCase`而不是做`String.ToLower() ==`. 此外，如果您绝对必须规范化字符串，那么使用`String.ToUpperInvariant`它会保留在执行时丢失的某些信息`ToLowerInvariant`，这会影响非拉丁语言，例如土耳其语，它具有类似 I 字符的特殊行为。
3.  考虑使用`String.IsNullOrEmpty`
4.  请记住，布尔运算符本身返回布尔值，因此您可以`IsAnyReviewState`大量简化。

以下是我将如何编写您的代码：

```
public bool IsAccept {
    get {
        return String.IsNullOrEmpty( this.Status ) ? false : this.Status.Equals("accept", StringComparison.OrdinalIgnoreCase);
    }
}

public bool IsRefer {
    get {
        return String.IsNullOrEmpty( this.Status ) ? false : this.Status.Equals("refer", StringComparison.OrdinalIgnoreCase);
    }
}

public bool IsAnyReviewState {
    get {
        return this.IsAccept || this.IsRefer;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T11:38:31.500

我会像这样使用[三元运算符](http://msdn.microsoft.com/en-us/library/ty67wk28%28v=vs.80%29.aspx)：

```
 public bool IsAccept()
    {
        //check the status is accept
        return Status == null ? false : Status.ToLower() == "accept";
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-09T11:42:39.493

正如 RvdK 所说，这个问题应该在[CodeReview](http://codereview.stackexchange.com)上。另外，我不确定您是否要使代码更紧凑或更易读。

如果您想让它更具可读性，那么唯一想到的就是修改`return`语句。

例如，而不是

```
return Status.ToLower() == "accept"; 
```

考虑

```
if(Status.ToLower() == "accept") 
        return true;
    else 
        return false; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-09T11:37:14.403

```
 public bool IsAccept()
    {
      return (Status == null)?false:(Status.ToLower() == "accept");
    } 
```

等等...

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-09T11:37:17.143

这个怎么样？

```
public bool IsAnyReviewState()
{
    return new [] {"accept", "refer"}.Contains((Status??string.empty).ToString().ToLower())
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-09T11:39:07.597

就个人而言，我更喜欢使用`string.Equals`字符串比较。在 的情况下`IsAccept()`，我会写：

```
public bool IsAccept()
{
   return string.Equals(Status, "accept", StringComparison.InvariantCultureIgnoreCase);
} 
```

这使您无需编写防御性`null`检查，并且不需要`.ToLower()`.

*更少的代码：=快乐的编码员*

**编辑**：该`Status`属性是否需要是一个`string`？您可以将其替换为枚举吗？

# java - 在 Guice 中获取所有绑定的单例

> ID：15310178
> 
> 赞同：1
> 
> 时间：2013-03-09T11:33:17.547
> 
> 标签：java, binding, guice

我想遍历 Guice 容器的所有绑定对象。例如，当我调用时，`getInstance`我想获取`UserManagerImpl`Guice 容器已经创建的实例。但是 Guice 却创造了一个新的。

```
GuiceModule mainModule = new GuiceModule();
Injector injector = Guice.createInjector(mainModule);
Map<Key<?>, Binding<?>> bindings = injector.getAllBindings();
for (Binding<?> binding : bindings.values()) {
  Object instance = injector.getInstance(binding.getKey());
} 
```

下面是 GuiceModule 的配置示例。

```
public class GuiceModule extends AbstractModule {
    @Override
    protected void configure() {
         bind(UserManager.class).to(UserManagerImpl.class).in(Singleton.class);
     }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T11:48:52.610

您应该改用此绑定：

```
 bind(UserManagerImpl.class).in(Singleton.class);
    bind(UserManager.class).to(UserManagerImpl.class); 
```

这需要注意的`UserManagerImpl`是真正的单例而不是接口。这样调用**两者**

```
injector.getInstance(UserManager.class);
injector.getInstance(UserManagerImpl.class); 
```

将导致相同的实例。通过遍历*所有*绑定并调用`getInstance`它们，您还调用了后者——没有标记`Singleton`和宾果游戏——你有几个实例。

所以....

但是，如果由于其他原因您仍然必须获得所有单例：使用`BindingScopingVisitor`这样的：

```
 BindingScopingVisitor<Boolean> visitor = new IsSingletonBindingScopingVisitor();
    Map<Key<?>, Binding<?>> bindings = injector.getAllBindings();
    for (Binding<?> binding : bindings.values()) {
        Key<?> key = binding.getKey();
        System.out.println("Examing key "+ key);

        Boolean foundSingleton = binding.acceptScopingVisitor(visitor);
        if( foundSingleton ) {
            Object instance = injector.getInstance(key);
            System.out.println("\tsingleton: " + instance);
        }
    }

class IsSingletonBindingScopingVisitor implements BindingScopingVisitor<Boolean> {
    @Override
    public Boolean visitEagerSingleton() {
        System.out.println("\tfound eager singleton");
        return Boolean.TRUE;
    }

    @Override
    public Boolean visitScope(Scope scope) {
        System.out.println("\t scope: "+scope);
        return scope == Scopes.SINGLETON;
    }

    @Override
    public Boolean visitScopeAnnotation(Class<? extends Annotation> scopeAnnotation) {
        System.out.println("\t scope annotation: "+scopeAnnotation);
        return scopeAnnotation == Singleton.class;
    }

    @Override
    public Boolean visitNoScoping() {
        return Boolean.FALSE;
    }
} 
```

输出将是这样的：

```
Examing key Key[type=com.google.inject.Injector, annotation=[none]]
Examing key Key[type=java.util.logging.Logger, annotation=[none]]
Examing key Key[type=com.google.inject.Stage, annotation=[none]]
    found eager singleton
    singleton: DEVELOPMENT
Examing key Key[type=UserManager, annotation=[none]]
Examing key Key[type=UserManagerImpl, annotation=[none]]
     scope: Scopes.SINGLETON
    singleton: UserManagerImpl@1935d392 
```

# javascript - 屏幕截图未发送到钛中的电子邮件

> ID：15310182
> 
> 赞同：1
> 
> 时间：2013-03-09T11:33:54.097
> 
> 标签：javascript, android, titanium

我使用了下面的代码，这是在[http://developer.appcelerator.com/question/135462/save-screenshot-temporarily-then-retrieve-when-ready给出的公认答案](http://developer.appcelerator.com/question/135462/save-screenshot-temporarily-then-retrieve-when-ready)

但是当电子邮件对话框打开时，它会显示一个附件，该文件是屏幕截图，但发送电子邮件后收到的电子邮件中没有附件。这意味着屏幕截图没有发送。

谁能告诉这段代码有什么问题？？？

```
var win = Ti.UI.createWindow({
    // backgroundColor : '#666666'
    backgroundColor : 'red',
    // backgroundImage : 'img/1.jpg'
});

var btn = Ti.UI.createButton({
    width : 100,
    height : 30,
    title : 'Test'
});

btn.addEventListener('click', function(e) {
    Titanium.Media.takeScreenshot(function(e) {
        var f = Ti.Filesystem.getFile(Ti.Filesystem.applicationDataDirectory, 'test.png');
        f.write(e.media);

        var emailDialog = Titanium.UI.createEmailDialog();
        emailDialog.setToRecipients(['test@gmail.com']);
        emailDialog.setSubject('test');
        emailDialog.setMessageBody('testing......');
        emailDialog.setHtml(true);
        emailDialog.setBarColor('black');
        emailDialog.addAttachment(f.read());

        emailDialog.addEventListener('complete', function(e) {
            if(e.result == emailDialog.SENT) {

                alert("message was sent");

            }
        });
        emailDialog.open();
    });
});

win.add(btn);

win.open(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T15:42:58.727

该`addAttachment`函数可以使用 blob，您不必将其保存到磁盘。此外，这可能不起作用，因为您可能没有对`applicationDataDirectory`.

而是`e.media`像这样传递提供的 blob：

```
Titanium.Media.takeScreenshot(function(e) {
    var emailDialog = Titanium.UI.createEmailDialog();
    // Get the supplied blob and attach
    emailDialog.addAttachment(e.media);
    // ...... add other email things here
}); 
```

# c - 当我编译 int main 时真正发生了什么；在 C 中

> ID：15310185
> 
> 赞同：5
> 
> 时间：2013-03-09T11:34:09.623
> 
> 标签：c, codeblocks

当我编译时真正发生了什么：

```
int main; 
```

它不应该是 main() 并导致错误吗？

我试图在 CodeBlocks 中编译代码，它编译得很好，没有错误。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-09T11:41:33.447

这不是错误，因为 C 源文件不需要具有`main`函数，并且您可以定义`main`为您想要的任何内容，只要您不尝试在同一范围内定义两次即可。因为这是您的整个程序，所以很好 - 但程序肯定不会正确运行，因为没有`main`可查找的功能。

它所做的只是声明一个名为 main 的全局（外部）变量，初始化为 0。如果它不存在，链接器通常会发出错误，但它可能会对外部变量的存在感到满意（我希望它假设它是一个指针） .

编辑：我用调试器稍微研究了一下，果然，`main`它的值为 0，即变量被用作没有强制转换的指针。因此，初始化代码尝试运行位于地址 0 的函数，导致我的平台出现段错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-09T12:00:38.583

我认为由于范围不正确（或缺乏理解），您在这里感到困惑。

当您在这里说`int main;`编译器正在传递声明时，我假设您是在函数范围内声明它。但是，如果您尝试在全局范围内声明它，那么编译器将抛出重新定义错误。

因此，只要您在同一范围内没有两个相同的标识符，编译器就会满足并让您随心所欲。

下面的代码将给出重新定义错误：

```
int main;

int main()
{
  printf("In main\n");
} 
```

下面的代码不会，因为 main 的范围仅限于函数内部，编译器认为`int main`变量和结果打印为 5。

```
int main()
{ 
   int main = 5;
   printf("In main, value of main is %d\n", main);
} 
```

然而，下面的代码将打印 main 的地址

```
int main()
{
       printf("In main, value of main is %d\n", main);
} 
```

* * *

**编辑：** 阅读评论后，我觉得这里的关键问题是你根本没有 main 函数，你应该有一个“C”程序开始工作。如果你没有 main 函数，只是声明一个`int main;`变量，你的代码可能仍然可以编译，但是当你执行时会出现混乱和混乱，因为 main 是一个整数变量，而它应该是一个函数。但是，只要您按照我上面的答案控制住您的主电源，您就应该做得很好。

你可以去[这个](http://decodingtech.com/process-of-compilation-and-execution-of-c-program/)链接，它解释了C程序的编译和执行的概念

# android - 从对话框中获取数据到 EditText

> ID：15310186
> 
> 赞同：1
> 
> 时间：2013-03-09T11:34:09.827
> 
> 标签：android

我有一个名为 Select 类的字段，带有编辑文本视图。Onclick 编辑文本，我正在打开具有多项选择的对话框。假设我选择 3 个值并单击确定。我想在两个值之间使用逗号（，）分隔符在编辑文本字段中显示所有选定的值。我卡在这里。请帮助我。

# firefox - Firefox 中的默认剪贴簿保存位置

> ID：15310193
> 
> 赞同：3
> 
> 时间：2013-03-09T11:35:11.553
> 
> 标签：firefox, firefox-addon

**我在 Firefox 中使用剪贴簿**插件保存了一个网站。我可以从剪贴簿选项中打开。

但我无法找到它的保存位置。请帮助我。

提前致谢....

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-08-22T18:50:33.283

对于其他需要解决此问题的人。另一种方法是打开 Mozilla，转到剪贴簿选项卡并单击“在侧边栏中显示”（这将使您的所有链接都可在浏览器一侧查看和选择）从那里您将看到（在侧边栏搜索栏/工具）“工具”的下拉菜单。单击工具后，它会为您提供多个选项，包括“打开数据文件夹”

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-11T17:54:28.837

找出应用程序当前保存位置的一种方法：

*   使用剪贴簿应用程序保存页面（右键单击 -> 保存页面 -> 根文件夹）
*   然后在出现剪贴簿应用程序弹出窗口时单击该页面的链接，通知您保存已完成
*   查看 URL 栏，在“file:///”之后，显示您计算机上保存页面的路径

对于 Windows 7，我的默认位置是：

```
C:/Users/{username}/AppData/Roaming/Mozilla/Firefox/Profiles/{random string}.default/ScrapBook/data 
```

其中括号表示在不同计算机上会有所不同的文本。

此答案是为 Firefox 中安装的 Scrapbook 应用程序编写的。具体来说：

火狐页面：[https ://addons.mozilla.org/en-us/firefox/addon/scrapbook/](https://addons.mozilla.org/en-us/firefox/addon/scrapbook/)

应用程序本身的页面：http: [//amb.vis.ne.jp/mozilla/scrapbook/](http://amb.vis.ne.jp/mozilla/scrapbook/)

# javascript - 从 jQuery-ajax 到微风.js（SharePoint ODATA 示例）

> ID：15310195
> 
> 赞同：1
> 
> 时间：2013-03-09T11:35:22.460
> 
> 标签：javascript, ajax, sharepoint, breeze, webproxy

我开始为我的 ODATA 服务使用微风.js。

我正在使用 SharePoint ODATA api，并且我有一个如何将其与 jQuery-Ajax 一起使用的示例。用微风来完成这项工作真是太棒了。谁能帮我**把这个 jQuery-Ajax 调用翻译成微风**。...或者把我推向正确的方向？

```
$.ajax({
  url: “../_api/SP.WebProxy.invoke”,
  type: “POST”,
  data: JSON.stringify({
    “requestInfo”: {
      “__metadata”: { 
        “type”: “SP.WebRequestInfo” },
        “Url”: “http://get_my_data_from_this_url”,
        “Method”: “GET”,
        “Headers”: {
          “results”: [{
            "__metadata": { "type": "SP.KeyValue" },
            "Key": "Accept",
            "Value": "application/json;odata=verbose",
            "ValueType": "Edm.String"
          }]
        }
     }
  }),
  headers: {
    “Accept”: “application/json;odata=verbose”,
    “Content-Type”: “application/json;odata=verbose”,
    “X-RequestDigest”: $(“#__REQUESTDIGEST”).val()
  },
  success: successHandler,
  error: errorHandler
}); 
```

在这里，您可以看到对 SharePoint WebProxy 的 ODATA 调用。一个处理跨域调用的简洁功能！

我认为此时的问题是：我可以用微风.js 构造数据对象吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T14:50:43.303

_/api 是 OData v3 端点。目前，AFAIK Breeze 和 JayData 都不完全支持这一点。更糟糕的是，_api/$metadata 并未在 SP2013 的发行版中实现。如果没有元数据文档，就无法自动创建所需的数据模型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-15T20:54:15.950

从 Breeze 1.4.4 开始，Breeze 现在支持 OData v3。

# extjs - 将 json 映射到 extjs 模型

> ID：15310199
> 
> 赞同：1
> 
> 时间：2013-03-09T11:35:41.623
> 
> 标签：extjs, extjs4

我正在使用 ExtJs4，我有下面的 json。将其映射到 Extjs 模型时遇到一些问题：

```
 {
      "success": true,
      "data": {
        "bairro": "Vila Paulista",
        "cep": "86730-000",
        "convenio_id": 52,
        "nome": "Peter Parker",
        "consultas": [
          {
            "data": "08/08/2008",
            "paciente_id": 200,
            "senha": null
          },
          {
            "data": "22/02/2010",
            "paciente_id": 200,
            "senha": null
          },
        "convenio": {
          "id": 52,
          "nome": "C80"
        }
      }
    } 
```

这是我的模型：

```
Ext.define('App.model.vo.Paciente', {
    extend: 'Ext.data.Model',
    requires: [
        'App.model.vo.Consulta',
        'App.model.vo.Convenio'
    ],
    fields: [
        {name: 'id', type: 'auto'},
        {name: 'bairro', type: 'auto'},
        {name: 'cep', type: 'auto'},
        {name: 'convenio_id', type: 'auto'},
        {name: 'nome', type: 'auto'}
    ],
    belongsTo: { 
        model: 'App.model.vo.Convenio', 
        name: 'convenio', 
        foreignKey: 'convenio_id', 
        getterName: 'getConvenio'},
    hasMany: { 
        model: 'App.model.vo.Consulta', 
        name: 'consultas'},
        idProperty: 'id',
    proxy: {
        type: 'rest',
        url : '/pacientes',
        format: 'json',
        reader: {
            root: 'data',
            successProperty: 'success'
        },
        writer: {
            getRecordData: function(record) {
                return { paciente: record.data };
            }
        }
    }
}); 
```

并加载数据：

```
App.model.vo.Paciente.load(id, {
        success: function(rec) {
            console.log(rec.consultas());
            console.log(rec.getConvenio());
        }
    }); 
```

rec.consultas() 很好地显示所有子记录，但是 rec.getConvenio() 向服务器发出请求以再次获取数据。

我需要使用已经在 json 文件中的数据，在这种情况下：

```
 "convenio": {
      "id": 52,
      "nome": "C80"
    } 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T01:09:42.010

我只需要声明：

```
{name: 'convenio', type: 'auto'} 
```

在我的模型中并删除 belongsTo 的东西。

# c# - 如何跟踪checkedListBox C#中的检查？

> ID：15310203
> 
> 赞同：7
> 
> 时间：2013-03-09T11:35:49.877
> 
> 标签：c#, .net, winforms, checkedlistbox

我尝试在checkedListBox 中显示已检查项目的数量：`checkedListBox1.CheckedIndices.Count` 但是如果我想在标签上显示它，我该如何更新我的计数？我试图在 ItemCheck 事件中写下所有内容：

```
private void checkedListBox1_ItemCheck(object sender, ItemCheckEventArgs e)
    {            
        label1.Text= checkedListBox1.CheckedIndices.Count;
    } 
```

但是即使我取消选中该项目，计数也会增加:(我将不胜感激任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T11:54:03.890

事件的[文档`CheckedListBox.ItemCheck`](http://msdn.microsoft.com/en-us/library/system.windows.forms.checkedlistbox.itemcheck.aspx)指出：

> 直到 ItemCheck 事件发生后，检查状态才会更新。

所以当事件被调用时，`CheckedIndices.Count`还没有更新。为了克服这个问题，您必须继承`CheckedListBox`该类并在事件之后触发一个新*事件*[`CheckedListBox.ItemCheck`](http://msdn.microsoft.com/en-us/library/system.windows.forms.checkedlistbox.itemcheck.aspx)：

```
public class MyCheckedListBox : CheckedListBox
{
    public event ItemCheckEventHandler ItemCheckedChanged;
    protected virtual void OnItemCheckedChanged(ItemCheckEventArgs ice)
    {
        var h = ItemCheckedChanged;
        if (h != null)
            h(this, ice);
    }

    protected override void OnItemCheck(ItemCheckEventArgs ice)
    {
        base.OnItemCheck(ice);

        ThreadPool.QueueUserWorkItem(new WaitCallback((state) =>
            {
                this.BeginInvoke(new Action<ItemCheckEventArgs>(OnItemCheckedChanged), ice);
            }));
    } 
```

不，您有一个`ItemCheckedChanged`可以订阅的活动。

实际上没有必要子类化。这可以在表单本身中完成，但这更干净。

## 它是如何工作的？

该`ItemCheck`事件在方法内部调用`SetItemCheckState`。此方法在调用事件 ( )*后*更改项目的检查状态。`OnItemCheck`调用`SetItemCheck`也是传递到应用程序消息队列的 Windows 消息的结果。我们希望在处理完这条消息后触发我们的消息，所以我们必须向队列中发布一条新消息，以便在这条消息之后处理我们的消息。该`BeginInvoke`方法实际上将消息发布到消息队列中，但前提是从另一个线程调用。这就是为什么我调用`BeginInvoke`了一个新的线程形式的线程池。

另一个解决方案是注册一条消息并手动将其发布到消息队列，但这将是更多的代码！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T11:45:15.193

只需加一或减一，具体取决于`e.NewValue==CheckState.Checked`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T11:47:58.667

而是执行以下操作：

```
int checkedcount = 0;
foreach(var item in checkedListBox1.CheckedItems){
   if(checkedListBox1.GetItemCheckState(checkedListBox1.Items.IndexOf(item) == System.Windows.Forms.CheckState.Checked)
      checkedcount++;
} 
```

如需进一步参考，请查看[此处](http://msdn.microsoft.com/en-us/library/system.windows.forms.checkedlistbox.checkeditemcollection.aspx)。

# c - __ THROW __nonnull 的定义

> ID：15310205
> 
> 赞同：4
> 
> 时间：2013-03-09T11:36:11.020
> 
> 标签：c, string.h

我看到了 memmove() 和 memcpy() 的定义，它们都包含
**__THROW __nonnull ((1, 2));**
我在哪里可以找到这个定义？

# php - 解码原始 URL

> ID：15310206
> 
> 赞同：1
> 
> 时间：2013-03-09T11:36:31.737
> 
> 标签：php, url

我想将一些 url 解码为它们的原始 URL。当前 URL 采用以下格式。

```
http://www.1channel.ch/external.php?`title=The+Pursuit+of+Happyness&url=aHR0cDovL3d3dy5wdXRsb2NrZXIuY29tL2ZpbGUvRkNFRkNBMUI4RTMwQk`Y3OQ==&domain=cHV0bG9ja2VyLmNvbQ==&loggedin=1 
```

我想用一些 php 代码来做到这一点。请帮帮我。我会很感激的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T11:46:29.157

看起来`url`参数是通过`base64_encode`. 像这样的东西应该工作。

```
$url = "http://www.1channel.ch/external.php?`title=The+Pursuit+of+Happyness&url=aHR0cDovL3d3dy5wdXRsb2NrZXIuY29tL2ZpbGUvRkNFRkNBMUI4RTMwQk`Y3OQ==&domain=cHV0bG9ja2VyLmNvbQ==&loggedin=1";

$params = explode('&', parse_url($url, PHP_URL_QUERY));

foreach($params as $param)
{
    $a = explode('=', $param);
    if($a[0] === "url")
    {
        echo base64_decode($a[1]);
        break 1;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T11:44:01.367

尝试使用 urldecode，正如您在[函数 urldecode](http://php.net/manual/en/function.urldecode.php)中看到的那样。

# c# - 使用 LINQ to SQL 时如何初始化瞬态值？

> ID：15310208
> 
> 赞同：0
> 
> 时间：2013-03-09T11:36:37.427
> 
> 标签：c#, linq-to-sql

我有一个 DataContext 和一个表，定义如下：

```
public class MyDataContext : DataContext
{
    public Table<MyItem> MyItems;

    public MyDataContext(string location) : base(location) { }
}

[Table(Name = "MyItems")]
public class MyItem
{
    // ID
    private string id;

    [Column(Storage = "id", IsPrimaryKey = true, IsDbGenerated = true, DbType = "int NOT NULL IDENTITY")]
    public string Id
    {
        get { return id; }
        private set { id = value; }
    }

    private MyDataContext db;
    private MyTransitiveObject obj;

    public MyItem() {}

    public MyItem(MyDataContext db, MyTransitiveObject obj)
    {
        this.db = db;
        this.obj = obj;
    }
} 
```

当我为表创建一个新表时，无论如何我调用构造函数`MyItem`都没有问题：`MyItem(MyDataContext db, MyTransitiveObject obj)`

```
MyDataContext db = new MyDataContext(someLocation);
MyItem myItem = new MyItem(db, someObj);
db.MyItems.Add(myItem);
db.SubmitChanges(); 
```

但是，如果我想从数据库中检索一堆行，传递成员当然不会被设置。不过，在对检索到的对象进行任何工作之前，我需要初始化它们。

我能想到的唯一解决方案是*使成员成为全局成员*，并在对它们进行任何其他操作之前遍历所有查询的对象并设置它们。但这并不整洁：

```
var q =
   from c in db.Customers
   select c;

var list = q.ToList();

foreach (MyItem m in list)
{
    q.Db = db;
    q.Obj = someObj;
}

/* Do something with list */ 
```

有什么想法最好的处理方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T11:40:35.897

你可以这样做：

```
var q = from c in db.Customers
        select new MyItem
        {
            Id = c.Id,
            // copy rest of c to MyItem
            Db = db,
            Obj = someObj
        }; 
```

这会将转换包装到查询中，因此您不必遍历结果集。不过，需要为每个对象存储上下文似乎确实很奇怪。

虽然这确实意味着如果您向表中添加额外的列，则必须更新`MyItem`构造函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T11:42:43.567

我不知道您为什么要在每个元素中存储上下文和数据库引用。我认为你应该首先重新考虑你的设计。

您可以`select`使用构造函数扩展语句以创建元素，但它无法转换为 SQL，因此您必须先获取元素。但是，您不必公开您的字段。

```
var q =
   from c in db.Customers
   select c;

var list = q.ToList()
            .Select(e => new MyItem(db, someObj) { Id = e.Id })
            .ToList(); 
```

`q.ToList()`有必要在 LINQ to SQL（获取所有元素）和 LINQ to Objects（使用构造函数创建新元素）之间拆分执行。也可以换成`AsEnumerable()`。

# android - Admob 网站/应用网址？

> ID：15310212
> 
> 赞同：1
> 
> 时间：2013-03-09T11:37:28.033
> 
> 标签：android, url, admob

我在任何地方都找不到信息：为什么我需要在 Admob 中填写站点/应用程序的 Android 包 URL？它有什么用，用来做什么？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T12:29:55.273

例如，当您将应用添加到您的 AdMob 帐户时，您会收到此提示（如附图所示）。

![在此处输入图像描述](../Images/104c62104dd2826581e30fe9935fdeae.png)

这是来自同一个弹出窗口的引用。

> AdMob 建议使用以下 URL 格式链接到 Android 电子市场中的应用：
> 
> 市场：//详情？id=
> 
> 我们发现，将用户引导至应用的“详细信息”页面对于推动应用下载具有最佳效果。Android Market 将始终显示应用程序最新版本的“详细信息”页面。
> 
> 如果您要链接到不在 Android Market 中的 Android 应用程序，您可以使用 http://

当您选择/想要在 AdMob *“网络”上**宣传您自己的应用*时，这是一个有用的功能。当其他应用程序显示广告并且您的应用程序的广告被显示，并且用户点击它时，他们将被重定向到您的应用程序在 Google Play 商店中的详细信息页面。

 *更好的是，这是可选的。而且，如果您不会运行自己的广告活动来推广您的应用程序，那么这几乎不是问题。

您还将在此文档标题[注册您的应用程序中找到一些描述（尽管不是很有帮助）](http://support.google.com/admob/answer/1307244?hl=en&ref_topic=1307236)*

# c# - 无法检查 GridView 中的 CheckBox 状态

> ID：15310217
> 
> 赞同：0
> 
> 时间：2013-03-09T11:38:07.540
> 
> 标签：c#, asp.net, sql-server-2008

以下是我的代码...

protected void Button3_Click(object sender, EventArgs e) { fillgrid();

```
 for (int i = 0; i < GridView1.Rows.Count; i++)
        {
            Label lblteachername = (Label)GridView1.Rows[i].FindControl("lblgridteachername");
            CheckBox status = (CheckBox)GridView1.Rows[i].FindControl("chkgridstatus");
            if (status.Checked == true)
            {    
                string q = "insert into teacher (status) values('"+dayList[i].Date+"') where schid='"+dayList[i].SchId+"'";    
            }                
        }
    } 
```

问题是无论我是否选中 girdview 中的复选框，它`if (status.Checked==true)`总是返回。`false`

```
public void fillgrid()
    {
        string q = "select * from teacher where teachername='" + drpteachername.SelectedItem.ToString() + "'  and ('2013-03-01' between date and todate) and '2013-03-31' between date and todate";
        dt = dbo.Getdt(q);
        //NOTE- if you bind gridview with dt, gridview will automatically generate no. of rows equal to the no. of rows returned to dt through the sql query from database.

        abc();
        DataTable dt1 = new DataTable();
        for (int i = 0; i < dayList.Count; i++)
        {
            DataRow dr = dt1.NewRow();
            dt1.Rows.Add(dr);
        }

        GridView1.DataSource = dt1;
        GridView1.DataBind();
        string teachername = drpteachername.SelectedItem.ToString();
        string month = drpmonth.SelectedItem.ToString();
        string strclass = drpclass1.SelectedItem.ToString();
        string section = drpsection1.SelectedItem.ToString();

        //string time=drpstarttime1.SelectedItem.ToString();
        for (int i = 0; i < dayList.Count; i++)
        {

            Label lbldate = (Label)GridView1.Rows[i].FindControl("lblgriddate");
            string fullstring = Convert.ToString(dayList[i].Date);
            lbldate.Text = fullstring.Substring(0, 9);

            //string q1 = "select starttime,endtime from teacher where teachername='"+drpteachername+"', and '"+fullstring+"' between date and todate";
            //dt = dbo.Getdt(q1);
            //int count=dt.Rows.Count;

            Label lblteachername = (Label)GridView1.Rows[i].FindControl("lblgridteachername");
            lblteachername.Text = teachername;

            Label lblclass = (Label)GridView1.Rows[i].FindControl("lblgridclass");
            lblclass.Text = dayList[i].Class;

            Label lblsection = (Label)GridView1.Rows[i].FindControl("lblgridsection");
            lblsection.Text = dayList[i].Section;

            Label lbltime = (Label)GridView1.Rows[i].FindControl("lblgridtime");
            lbltime.Text = dayList[i].StartTime.Substring(0, 5) + "-" + dayList[i].EndTime.Substring(0, 5);

        }
    } 
```

ASPX：

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False">
                        <Columns>
                            <asp:TemplateField HeaderText="TeacherName">
                                <ItemTemplate>
                                    <asp:Label ID="lblgridteachername" runat="server"></asp:Label>
                                </ItemTemplate>
                            </asp:TemplateField>
                            <asp:TemplateField HeaderText="Class">
                                <ItemTemplate>
                                    <asp:Label ID="lblgridclass" runat="server"></asp:Label>
                                </ItemTemplate>
                            </asp:TemplateField>
                            <asp:TemplateField HeaderText="Section">
                                <ItemTemplate>
                                    <asp:Label ID="lblgridsection" runat="server" Text="Label"></asp:Label>
                                </ItemTemplate>
                            </asp:TemplateField>
                            <asp:TemplateField HeaderText="Date">
                                <ItemTemplate>
                                    <asp:Label ID="lblgriddate" runat="server"></asp:Label>
                                </ItemTemplate>
                            </asp:TemplateField>
                            <asp:TemplateField HeaderText="Time">
                                <ItemTemplate>
                                    <asp:Label ID="lblgridtime" runat="server" Text="Label"></asp:Label>
                                </ItemTemplate>
                            </asp:TemplateField>
                            <asp:TemplateField HeaderText="Present">
                                <ItemTemplate>
                                    <asp:CheckBox ID="chkgridstatus" runat="server" />
                                </ItemTemplate>
                            </asp:TemplateField>
                        </Columns>
                    </asp:GridView>
    <br />
                    <asp:Button ID="Button3" runat="server" Text="Insert" onclick="Button3_Click" />
                </td> 
```

abc() 方法只是填充列表。我希望现在上下文更清楚了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T12:04:53.647

他们为什么要拥有`Checked==true`？您正在创建它们，`fillGrid`因为`DataBind`它是`DataSource`. `Checked`因此，如果您注释掉，它们可能会如此`fillgrid()`。

从 aspx 标记和`Text`我`Buttton3`看到您想将其用于插入（使用更好的 ID）。然后我不知道为什么要在插入任何内容*之前重新加载数据源。*只需移动`fillgrid`到最后（插入后重新加载网格）。

```
protected void Button3_Click(object sender, EventArgs e) 
{ 
    //  fillgrid();   <-------------------- from here

    for (int i = 0; i < GridView1.Rows.Count; i++)
    {
        Label lblteachername = (Label)GridView1.Rows[i].FindControl("lblgridteachername");
        CheckBox status = (CheckBox)GridView1.Rows[i].FindControl("chkgridstatus");
        if (status.Checked == true)
        {    
            string q = "insert into teacher (status) values('"+dayList[i].Date+"') where schid='"+dayList[i].SchId+"'";    
        }                
    }

    fillgrid();    // <-------------------- to  here
} 
```

# mysql - MYSQL 获取最低值的记录 | View 的 SELECT 包含 FROM 子句中的子查询

> ID：15310219
> 
> 赞同：4
> 
> 时间：2013-03-09T11:38:24.633
> 
> 标签：mysql, sql, view

我一直在处理这个查询，它让我发疯。

我有一个产品表和一个包含子产品的表。简而言之，我想用产品数据和子产品的最低（折扣）价格创建一个视图。（想想一件衬衫，有几个子产品（颜色/尺寸）等）

其次，我想在 VIEW 中使用这个查询，这部分让我抓狂。

我现在的查询：

```
 SELECT m.* from product_items m join
  (select product_id, min(price_discount) md 
       from product_items group by product_id) mm
  on m.product_id=mm.product_id and m.price_discount=md 
```

这个查询正在工作，我得到了很好的结果。但现在我想创建一个视图（vw_product_lowest）。然后是错误：`ERROR 1349 (HY000): View's SELECT contains a subquery in the FROM clause`

谁能帮我将该查询转换为兼容的 VIEW 查询？谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-09T12:05:29.250

你有几个选择：

1.  将子查询放入视图中（可能会很慢，因为生成的视图没有用于执行后续连接的索引）：

    ```
    CREATE VIEW mm AS
      SELECT   product_id, MIN(price_discount) price_discount
      FROM     product_items
      GROUP BY product_id
    ;

    CREATE VIEW my_view AS
      SELECT * FROM product_items m NATURAL JOIN mm
    ; 
    ```

2.  使用[相关子查询](http://dev.mysql.com/doc/en/correlated-subqueries.html)（也可能很慢，因为必须为表中的每条记录评估子查询 - 使用复合索引可以获得最佳性能`(product_id, price_discount)`）：

    ```
    CREATE VIEW my_view AS
      SELECT * FROM product_items m WHERE price_discount = (
        SELECT MIN(mm.price_discount)
        FROM   product_items mm
        WHERE  mm.product_id = m.product_id
      )
    ; 
    ```

3.  [使用该`EXISTS`策略](https://dev.mysql.com/doc/en/subquery-optimization.html#subquery-optimization-with-exists)优化相关子查询（也将受益于 上的复合索引`(product_id, price_discount)`）：

    ```
    CREATE VIEW my_view AS
      SELECT * FROM product_items m WHERE NOT EXISTS (
        SELECT 1
        FROM   product_items mm
        WHERE  mm.product_id     = m.product_id
           AND mm.price_discount < m.price_discount
        LIMIT  1
      )
    ; 
    ```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-09T11:52:00.797

根据手册，`VIEW`不能包含子查询。如果你真的想`VIEW`在你的查询上创建一个，你需要为你的子查询创建一个单独的视图，例如

**第一个视图**

```
CREATE VIEW MinimumPrice
AS 
SELECT  product_id, MIN(price_discount) md 
FROM    product_items 
GROUP   BY product_id 
```

**第二个视图**

```
CREATE VIEW MinimumPriceList
AS 
SELECT  m.* 
FROM    product_items m 
        INNER JOIN MinimumPrice mm 
            ON  m.product_id = mm.product_id AND 
                m.price_discount = mm.md 
```

* * *

要查询主视图，

```
SELECT * FROM MinimumPriceList 
```

* * *

[视图定义受以下限制：^(FROM MySQL MANUAL)](http://dev.mysql.com/doc/refman/5.0/en/create-view.html)

*   **SELECT 语句不能在 FROM 子句中包含子查询。**
*   SELECT 语句不能引用系统或用户变量。
*   在存储的程序中，定义不能引用程序参数或局部变量。
*   ……

# java - 如何通过按按钮打开pdf？

> ID：15310222
> 
> 赞同：-1
> 
> 时间：2013-03-09T11:38:41.967
> 
> 标签：java, android, pdf

我正在制作一个对想要获得驾驶执照的人有用的 android 应用程序，但我不知道如何进行以下操作：我有主要活动。现在，通过按急救按钮，我想显示带有急救说明的文本或 pdf。基本上我想对机械和立法做同样的事情。对不起我的英语，这不是我的第一语言。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T12:24:32.803

对于单击按钮打开 pdf 文件，请在侦听器中放置以下代码。

```
 String FILE = Environment.getExternalStorageDirectory().getPath()+"/abc.pdf";   

 File file = new File(FILE); 

 //file should contain path of pdf file/
 Uri path = Uri.fromFile(file);
 Intent intent = new Intent(Intent.ACTION_VIEW);
 intent.setDataAndType(path, "application/pdf");
 intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);

 try {
       startActivity(intent);
     } 
     catch (ActivityNotFoundException e)
     {
            Toast.makeText(this, 
                "No Application Available to View PDF", 
                Toast.LENGTH_SHORT).show();
        } 
```

# iphone - Iphone 中的网格视图实现？

> ID：15310224
> 
> 赞同：1
> 
> 时间：2013-03-09T11:39:05.870
> 
> 标签：iphone, ios, gridview, photo-gallery

嗨朋友我必须开发一个照片管理应用程序。在这里，我的图像应该在我的 iphone 中以 gris 视图排列。我在谷歌中分析了一些框架工作。下面的列表是

1.UICollectionView

2.AQGridView [_](https://github.com/AlanQuatermain/AQGridView)

3\. [PSTCollectionView](https://github.com/steipete/PSTCollectionView)

下面列出了我在网格视图中的功能

1.  该应用程序应与 4.3 以上的 iOS 兼容
2.  网格视图单元格允许`UITapGestureRecognizer`删除图像单元格或编辑样式选项，如表格视图。

3.  创建自定义 GridView 单元格

请任何人都可以向我推荐哪一个适合开发

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T07:44:35.737

如果您创建自定义按钮，将图像路径存储在数组中，编写 for 循环以显示每行中的图像数量会更好。将这些图像插入到每个自定义按钮中。它现在看起来像一个缩略图视图。

像这样的东西，

```
imageArray =[[NSMutableArray alloc]init];
               for (NSString* path in imagePath)
               {
                   [imageArray addObject:[UIImage imageWithContentsOfFile:path]];
                   NSLog(@"%@",path);
               }
               NSLog(@"%@",imageArray);

           NSLog(@"Yes");

           myScrollView = [[UIScrollView alloc]initWithFrame:CGRectMake(0.0, 0.0, 320.0, 840.0)];
           myScrollView.delegate = self;
           myScrollView.contentSize = CGSizeMake(320.0, 840.0);
           myScrollView.backgroundColor = [UIColor whiteColor];
           [self.view addSubview:myScrollView];

           float horizontal = 8.0;
           float vertical = 8.0;

           for(int i=0; i<[imageArray count]; i++)
           {
               if((i%4) == 0 && i!=0)
               {
                   horizontal = 8.0;
                   vertical = vertical + 70.0 + 8.0;
               }

               buttonImage = [UIButton buttonWithType:UIButtonTypeCustom];
               [buttonImage setFrame:CGRectMake(horizontal, vertical, 70.0, 70.0)];
               [buttonImage setTag:i];

               [buttonImage setImage:[imageArray objectAtIndex:i] forState:UIControlStateNormal];
               [buttonImage addTarget:self action:@selector(buttonImagePressedSmiley forControlEvents:UIControlEventTouchUpInside];
               [buttonImage setImage:[UIImage imageNamed:@"check.jpg"] forState:UIControlStateSelected];

               [myScrollView addSubview:buttonImage];

               horizontal = horizontal + 70.0 + 8.0;
           }

           [myScrollView setContentSize:CGSizeMake(320.0, vertical + 78.0)]; 
```

**说明**：

图像的路径存储在 imagePath 中。然后我们将 imagePath 存储在一个字符串（路径）中。现在，我们正在向 imageArray 添加路径的内容。因此 imageArray 现在包含所有图像的路径。然后创建一个 for 循环来显示每行 4 张图像。创建一个自定义按钮并在按钮上，一张一张地插入每个图像（使用 imageArray）。创建一个滚动视图以将所有按钮图像放入其中。

您现在已完成为图像创建 4*4 网格视图。快乐的编码...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T11:54:28.893

似乎 PSTCollectionView 是您所需要的。

它类似于 UICollectionView，但适用于 iOS 4.3。

您可以通过覆盖 dataSource 方法来创建自定义单元格：

```
- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath 
```

同样在这种方法中，您可以将手势识别器添加到您的单元格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-24T07:47:59.873

我目前正在使用**`AQGridView`**，所以我推荐它，因为它是最少的错误，它的功能与`UITableView`.

此外，如果您尝试在没有**XIB**的情况下执行此操作，您将很难处理它，但您可以使用 Xib 文件创建视图控制器来创建您选择的界面。[这是有关如何以最佳方式完成此操作的](http://vimeo.com/46408155)视频 `Evadne Wu`。这是示例[项目](https://github.com/evadne/gridViewNibTest)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-26T12:23:23.703

```
ViewController.h

{
   NSMutableArray *galleryarray;
}
@property (retain, nonatomic) IBOutlet UIScrollView *scrolll_photo;

ViewController.m

 [self gallery];

Secondview.h

  NSMutableArray *imagesArraySlide;
     int imageCount;

@property (retain, nonatomic) IBOutlet UIScrollView *photoscroll;
@property (nonatomic, retain) NSMutableArray *imagesArraySlide;
@property (readwrite) int imageCount;
@property (readwrite) int imageID;

Secondview.m

 [self loadphoto];

-(void)loadphoto
{
    NSArray *viewsToRemove = [_photoscroll subviews];
    for (UIView *view in viewsToRemove)
    {
        [view removeFromSuperview];
    }
    imageCount = [imagesArraySlide count];
    _photoscroll.delegate = self;
    _photoscroll.contentSize=CGSizeMake(320*imageCount, 380);
    _photoscroll.scrollEnabled = TRUE;
    _photoscroll.pagingEnabled = TRUE;

    int scroll_x=0;
    for(int i=1; i<=imageCount; i++)
    {
        UIImageView *imageView1 = [[UIImageView alloc] initWithFrame:CGRectMake(scroll_x, 20, 320, 380)];
        imageView1.contentMode = UIViewContentModeScaleAspectFit;
        imageView1.clipsToBounds = NO;
        imageView1.autoresizingMask = UIViewContentModeScaleAspectFit;
        imageView1.image=[UIImage imageNamed:[imagesArraySlide objectAtIndex:i-1]];
        [_photoscroll addSubview:imageView1];
        [imageView1 release];
        scroll_x = scroll_x + 320;
    }
    [_photoscroll setContentOffset:CGPointMake(imageID*320, 0) animated:NO];
    self.title = [NSString stringWithFormat:@"%d of %d",imageID+1,imageCount];
}
-(void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView
{
    imageID = scrollView.contentOffset.x / scrollView.frame.size.width;
    self.title = [NSString stringWithFormat:@"%d of %d",imageID+1,imageCount];
}
- (void)scrollViewDidScroll:(UIScrollView *)scrollView
{
    self.title = [NSString stringWithFormat:@"%d of %d",imageID+1,imageCount];
} 
```

# vbscript - 重命名目录列表中的单个文件

> ID：15310233
> 
> 赞同：0
> 
> 时间：2013-03-09T11:39:59.103
> 
> 标签：vbscript, batch-file, cmd

原谅我的编程无知。这就是你们天才存在的原因！

我想通过 Sched 任务每 30 分钟重命名一个文件。

文件清单：

test1.txt test2.txt test3.txt 等等

进入：test.txt test2.txt text3.txt 等。

test.txt 将被程序删除。因此，在 30 分钟内，我希望将 test2.txt 重命名为 test.txt，依此类推，直到处理完所有文件。

感谢你的帮助。发现[将不同的文件重命名为一个文件名，一次一个，](https://stackoverflow.com/questions/3642675/rename-different-files-to-one-file-name-one-at-a-time)但它只复制文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T12:56:58.220

您可以检查具有给定基本名称的文件是否存在，否则将使用附加到基本名称的最小数字重命名文件。尝试这样的事情：

```
Const basename  = "test"
Const srcFolder = "..."
Const extension = "txt"

Set fso = CreateObject("Scripting.FileSystemObject")

dstFile = fso.BuildPath(srcFolder, basename & "." & extension)

If fso.FileExists(dstFile) Then WScript.Quit 0  'nothing to do

For Each f In fso.GetFolder(srcFolder).Files
  If LCase(fso.GetExtensionName(f.Name)) = extension Then
    If LCase(Left(f.Name, Len(basename))) = basename Then
      num = Mid(fso.GetBaseName(f.Name), Len(basename)+1)
      If Len(num) > 0 Then
        num = CInt(num)
        If IsEmpty(minnum) Or minnum > num Then minnum = num
      End If
    End If
  End If
Next

If Not IsEmpty(minnum) Then
  srcFile = fso.BuildPath(srcFolder, basename & minnum & "." & extension)
  fso.MoveFile srcFile, dstFile
End If 
```

通过对正则表达式进行测试，可以稍微简化对文件名和编号的检查：

```
Set re = New RegExp
re.Pattern    = "^" & basename & "(\d+)\." & extension & "$"
re.IgnoreCase = True

For Each f In fso.GetFolder(srcFolder).Files
  Set m = re.Execute(f.Name)
  If m.Count > 0 Then
    num = CInt(m(0).SubMatches(0))
    If IsEmpty(minnum) Or minnum > num Then minnum = num
  End If
Next 
```

# scala - 由相关类的超特征绑定的列表中的伴随对象

> ID：15310235
> 
> 赞同：0
> 
> 时间：2013-03-09T11:40:15.313
> 
> 标签：scala, generics, companion-object

我正在尝试将伴随对象的“注册表”放在一起 - 通过将它们存储在使用泛型绑定的列表中。

一个例子是最好的：

```
trait Foo
case class A() extends Foo
object A
case class B() extends Foo
object B
case class C() extends Foo
object C

trait HasFoos {
  def allFoos: List[ _ <: Foo.type]
}
case class FooLookup() extends HasFoos { 
  def allFoos = List(A,B,C)
} 
```

FooLookup "def allFoos" 上报告的错误是

*   类型不匹配; 发现：A.type 要求：Foo.type

HasFoos.allFoos 需要看起来像什么，或者 List(A,B,C) 需要看起来像什么。

我也试过`def allFoos: List[ _ <: Foo]`了；但是它也会出错，而且，我确实想使用“伴随对象”而不是类 - 我确信我需要一些更通用的糖粉，但不确定它需要什么。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T12:46:14.063

因此，正如所写，我无法定义案例类 FooLookup，因为在定义特征 HasFoos 时出现错误“未找到：值 Foo”。

为了让 HasFoos 能够按照书面形式进行编译，您必须在某些时候定义一个对象 Foo 以及 trait，不是吗？如果我这样做，HasFoos 将编译。但是“Foo.type”是单例对象 Foo 的类型，而不是扩展特征 Foo 的类的伴生对象的类型。

A.type 将是对象 A 的类型。它不会是实现伴随特征 A 的事物的类型，如果已定义的话。

我认为没有你想要的类型抽象，它会自动捕获描述“实现 Foo 的类型的伴侣对象”。我认为您必须自己定义这样的类型：

```
 trait FooCompanion
 trait Foo
 case class A() extends Foo
 object A extends FooCompanion
 case class B() extends Foo
 object B extends FooCompanion
 case class C() extends Foo
 object C extends FooCompanion

 trait HasFoos {
   def allFoos: List[FooCompanion]
 }

 case class FooLookup() extends HasFoos { 
   def allFoos = List(A,B,C)
 } 
```

祝你好运！

# iphone - 如何计算帧大小以逐行绘制CoreText

> ID：15310236
> 
> 赞同：8
> 
> 时间：2013-03-09T11:40:31.797
> 
> 标签：iphone, ios, objective-c, ipad, core-text

我正在尝试根据长时间`NSAttributedString`拆分成的部分来动态创建书页。

我现在正在做的是将这个类别用于`NSAttributedString`：

```
@interface NSAttributedString (Height)
- (CGFloat)boundingHeightForWidth:(CGFloat)inWidth;
@end

@implementation NSAttributedString (Height)

- (CGFloat)boundingHeightForWidth:(CGFloat)inWidth
{
    CTFramesetterRef framesetter = CTFramesetterCreateWithAttributedString((CFMutableAttributedStringRef)self); 
    CGSize suggestedSize = CTFramesetterSuggestFrameSizeWithConstraints(framesetter, CFRangeMake(0, 0), NULL, CGSizeMake(inWidth, 10000), NULL);
    CFRelease(framesetter);
    return suggestedSize.height ;
}
@end 
```

由于我使用 a 绘制文本`CTFramesetter`，因此效果很好，并且正确返回了框的正确高度。不幸的是，现在我需要逐行绘制文本：

```
-(void)drawRect:(CGRect)rect
{
CGContextRef context = UIGraphicsGetCurrentContext();

// Flip the coordinate system
CGContextSetTextMatrix(context, CGAffineTransformIdentity);
//CGContextTranslateCTM(context, 0, self.bounds.size.height);
CGContextScaleCTM(context, 1.0, -1.0);

NSArray *lines = (__bridge NSArray *)(CTFrameGetLines(ctFrame));

CFIndex lineCount = [lines count];

for(CFIndex idx = 0; idx < lineCount; idx++)
{
    // For each line found from where it starts and it's length
    CTLineRef line = CFArrayGetValueAtIndex((CFArrayRef)lines, idx);
    CFRange lineStringRange = CTLineGetStringRange(line);
    NSRange lineRange = NSMakeRange(lineStringRange.location, lineStringRange.length);
    // Get the line related string 
    NSString* lineString = [displayedString.string substringWithRange:lineRange];
    // Calculate it's range
    NSRange stringRange = NSMakeRange(lineStringRange.location, lineStringRange.length);

    static const unichar softHypen = 0x00AD;
    // Get the last char of the line
    unichar lastChar = [lineString characterAtIndex:stringRange.length-1];
    // Check if it's a soft hyphenation character
    if(softHypen == lastChar) {
        NSMutableAttributedString* lineAttrString = [[displayedString attributedSubstringFromRange:stringRange] mutableCopy];
        NSRange replaceRange = NSMakeRange(stringRange.length-1, 1);
        // Replace it with an hard hyphenation character
        [lineAttrString replaceCharactersInRange:replaceRange withString:@"-"];

        CTLineRef hyphenLine = CTLineCreateWithAttributedString((__bridge CFAttributedStringRef)lineAttrString);
        CTLineRef justifiedLine = CTLineCreateJustifiedLine(hyphenLine, 1.0, self.frame.size.width);

        CGFloat ascent;
        CGFloat descent;
        // Calculate the line height
        CTLineGetTypographicBounds(justifiedLine, &ascent, &descent, NULL);
        // Set the correct position for the line
        CGContextSetTextPosition(context, 0.0, idx*-(ascent + descent)-ascent);
        CTLineDraw(justifiedLine, context);
    }
    else{
        CGFloat ascent;
        CGFloat descent;
        // Calculate the line height
        CTLineGetTypographicBounds(line, &ascent, &descent, nil);
        CGFloat y = idx*-(ascent + descent)-ascent;
        // Set the correct position for the line
        CGContextSetTextPosition(context, 0.0, y);

        CTLineDraw(line, context);
    }
} 
```

这几乎可以正常工作，但并非总是如此。有时会发生这种情况：

![最后一根弦被剪掉](../Images/aedfa26c42d8fdf52deb79b5411d4712.png)

如您所见，最后一行被剪掉了。有人有什么建议可以解决这个烦人的问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-10T11:36:04.777

由于某些原因，这似乎`(ascent + descent)`不是一条线的正确高度。事实上，上升器 + 1 + 下降器等于点大小。

简单地改变这个：

```
CGContextSetTextPosition(context, 0.0, idx*-(ascent + descent)-ascent); 
```

进入这个：

```
CGContextSetTextPosition(context, 0.0, idx*-(ascent - 1 + descent)-ascent); 
```

成功了。参考：[关于 UIFont 的 Cocoanetics 文章](http://www.cocoanetics.com/2010/02/understanding-uifont/)。感谢 jverrijt 的提示！

# 3d - 碰撞检测 - 运动球体和圆柱体之间的响应

> ID：15310239
> 
> 赞同：0
> 
> 时间：2013-03-09T11:41:11.480
> 
> 标签：3d, geometry, collision-detection, game-physics

我正在实现一个包含 3d 逻辑的简单游戏。为了检测运动的球体是否与圆柱体碰撞，程序或/和相关方程是什么？我的圆柱体是静态的正圆形并与 z 轴对齐。在这种情况下，我读到圆柱体的方程是 (x - a)² + (z - b)² = r²，其中

(a, b): 圆柱中心 r: 圆柱半径

如何使用它来查找两个对象是否相交，此外，如何应用球的相应响应？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T15:40:04.860

通常，圆柱体到球体测试可以简化为点到线段测试，其中：

1.  线段表示从一端到另一端穿过圆柱体中心的线，**并且**端点是已知的。
2.  该点表示球体的中心点。
3.  该测试在线段上找到一个最接近 centerPoint 的点，并简单地测量点之间的距离，如果它小于球体半径 + 圆柱体半径，则它正在碰撞。

与此的妥协是，它有效地使其成为一个球体到胶囊测试，而不是球体到圆柱体。如果你能接受这种妥协，这里有一些伪代码。

```
vector cylCenterVector = endPoint2 - endpoint1;
float distanceFactorFromEP1 = Dot(sphereCenter - endPoint1) / Dot(cylCenterVector , cylCenterVector );
if(distanceFactorFromEP1 < 0) distanceFactorFromEP1 = 0;// clamp to endpoints if neccesary
if(distanceFactorFromEP1 > 1) distanceFactorFromEP1 = 1;
vector closestPoint = endPoint1 + (cylCenterVector * distanceFactorFromEP1);

vector collisionVector = sphereCenter - closestPoint;
float distance = collisionVector.Length();
vector collisionNormal = collisionVector / distance;

if(distance < sphereRadius + cylRadius)
{
  //collision occurred. use collisionNormal to reflect sphere off cyl

  float factor = Dot(velocity, collisionNormal);

  velocity = velocity - (2 * factor * collisionNormal);

} 
```

# c# - 在数组中搜索对

> ID：15310249
> 
> 赞同：0
> 
> 时间：2013-03-09T11:42:18.173
> 
> 标签：c#, arrays

我有一个数组`int`，大小为`8`. 我想要做的是搜索`array`对（例如，如果索引 0 上的数字与索引上的数字相同`5`）。

我尝试制作两个数组（第二个是第一个的副本），但这没有意义，因为一切都是成对的。

然后我尝试制作半数组，所以我制作了两个`arrays`大小`4`并比较它们。这并没有解决这些对可以在单个数组中。

为了填充`array`我使用随机数，随机数的最大值是`array` `(8)`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T11:46:01.777

您可以使用 LINQ。

```
int[] array = new[] { 1, 2, 3, 1, 4, 5, 6, 7, 8, 8 };
var duplicates = array
    .GroupBy(i => i)
    .Where(g => g.Count() > 1)
    .Select(g => g.Key);
foreach (var d in duplicates)
    Console.WriteLine(d); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T11:45:46.543

如果你有一个小的最大值，你可以初始化这个长度的位数组。遍历您的原始数组并为每个成员设置适当的位数组。如果这个位置的位数组为真，那么你有一对。如果您想要特定位置，请使用 int 数组。
尝试这样的事情：

```
BitArray bucket = new BitArray(<<your max value>>);
foreach(int i in originalArray)
{
if(bucket[i]) return true;
bucket[i] = true;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T13:53:58.093

查找对的传统方法是对数组进行排序（方法 A，如下）。另一种方法是有两个嵌套循环（方法 B）。

```
Tell("Method A...");
int[] a = new int[]{3, 1, 4, 1, 5, 9, 5, 5};
int lengthA = a.Length;
Array.Sort(a);
for (int i = 1; i < lengthA; i++)
{
  if (a[i-1] == a[i])
  {
    Tell("Method A Found pair in a: "+a[i-1]+" and "+a[i]);
  }
} // for i

Tell("Method B...");
int[] b = new int[]{3, 1, 4, 1, 5, 9, 5, 5};
int lengthB = b.Length;
for (int i = 0; i < lengthB-1; i++)
{
  for (int j = i+1; j < lengthB; j++)
  {
    if (b[i] == b[j])
    {
      Tell("Method B Found a pair in b: "+b[i]+" and "+b[j]);
    }
  } // for j
} // for i 
```

这是输出...

*   方法一...
*   方法 A 在 a 中找到对：1 和 1
*   方法 A 在 a 中找到对：5 和 5
*   方法 A 在 a 中找到对：5 和 5
*   方法B...
*   方法 B 在 b 中找到一对：1 和 1
*   方法 B 在 b 中找到一对：5 和 5
*   方法 B 在 b 中找到一对：5 和 5
*   方法 B 在 b 中找到一对：5 和 5

我希望你能明白为什么方法 B 报告的对比方法 A 多。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-09T11:57:32.513

如果您不仅想获得重复的值列表，还想获得出现该值的索引，您可以使用该 LINQ to Objects 查询：

```
int[] items = new[] { 1, 2, 3, 1, 4, 5, 3, 7 };

var duplicates = items.Select((e, i) => new { e, i })
                      .GroupBy(i => i.e)
                      .Where(g => g.Count() > 1)
                      .Select(g => new { Value = g.Key, Indexes = g.Select(e => e.i).ToList() })
                      .ToList(); 
```

`duplicates`包含2个元素，内容如下：

![在此处输入图像描述](../Images/7d91858805f2164d4e2a678111359f85.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-09T11:58:31.667

您可以创建一个字典（如*dict[i]==>array of indices*）

```
var dubs = array.Select((i, inx) => new { i, inx })
            .GroupBy(x => x.i)
            .ToDictionary(g => g.Key, g => g.Select(y => y.inx).ToList()); 
```

# javascript - xml 到 html 菜单项

> ID：15310251
> 
> 赞同：0
> 
> 时间：2013-03-09T11:42:32.510
> 
> 标签：javascript, jquery, html, xml

想求指点或建议。我需要将现有的 xml 文件呈现为 html 菜单项。我还必须编辑字符串值，但只需要一些关于如何将 xml 项显示为 html 菜单项的建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T11:45:22.780

使用[XSLT](http://en.wikipedia.org/wiki/XSLT)来执行此操作。Javascript 能够做到这一点 -[这](http://www.w3schools.com/xsl/xsl_client.asp)是一些示例代码

# java - 组合在一起的词

> ID：15310252
> 
> 赞同：0
> 
> 时间：2013-03-09T11:42:34.973
> 
> 标签：java

为什么我的代码将旧词与新词组合在一起？输入是“banana” 输出“banana” 新输入“dog” 输出“bananadgo”？

```
public static void main(String [] args)
{
    Scanner keyboard = new Scanner(System.in);
    String word, afc, newWord;
    String s="";

    do
    {
        word=keyboard.next().toLowerCase();
        int i =word.length()-1;
        char firstLetter=word.charAt(0);
        afc=word.substring(1);
        newWord= afc+firstLetter;

        for( ; i>=0 ; )
        {
            s += newWord.charAt(i--);
        } 
        System.out.println(word + "," + s);

        if (s.equals(word))
            System.out.println("Words are equal.");
        else
            System.out.println("Words are not equal.");
    }
    while (!(word.equals("quit")));

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T12:08:04.443

您没有`s`在循环开始时清除变量。

应该

```
 Scanner keyboard = new Scanner(System.in);
    String word, afc, newWord;    

    do
    {
        String s=""; 
        ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T12:03:53.060

试试这个

```
public static void main(String [] args)
{
    Scanner keyboard = new Scanner(System.in);
    String word, afc, newWord;
    String s="";

    do
    {
        s = "";
        word=keyboard.next().toLowerCase();
        int i =word.length()-1;
        char firstLetter=word.charAt(0);
        afc=word.substring(1);
        newWord= afc+firstLetter;

        for( ; i>=0 ; )
        {
            s += newWord.charAt(i--);
        } 
        System.out.println(word + "," + s);

        if (s.equals(word))
            System.out.println("Words are equal.");
        else
            System.out.println("Words are not equal.");
    }
    while (!(word.equals("quit")));

} 
```

# c# - 如何知道 ActiveViewChanged 事件上 MultiView 的最后一个视图索引？

> ID：15310259
> 
> 赞同：1
> 
> 时间：2013-03-09T11:43:36.827
> 
> 标签：c#, asp.net

有没有办法知道事件的最后一个视图索引是`ActiveViewChanged`什么？

```
protected void mltv_ActiveViewChanged(object sender, EventArgs e)
    {
       //Here i nedd to know what it was, because here it is already changed  
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T11:52:29.670

检查财产`mltv.ActiveViewIndex`。到[了这里](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.multiview.activeviewindex.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-17T14:07:51.750

只需将 Load Event 用于用户控制并引用 ActiveViewIndex。它应该在更改之前具有 ActiveViewIndex。对于下面的示例，我只是使用上下文项作为支持，但如果您有一个可以使用的类级别变量：

```
protected void mltv_Load(object sender, EventArgs e)
{
   //Add your property backing or class variable here
   int pos = mltv.ActiveViewIndex;
   if (pos == -1)
       return;
   Context.Items["mltv_ActiveViewIndexOnLoad"] = pos;

}
protected void mltv_ActiveViewChanged(object sender, EventArgs e)
{
   //Retrieve property, private variable, here:
   var lastViewIndex = -1; 
   if (Context.Items["mltv_ActiveViewIndexOnLoad"] != null)
   {
       lastViewIndex = (int)(Context.Items["mltv_ActiveViewIndexOnLoad"]);
   }

} 
```

# php - PHP - 检查数组索引是否存在或为空

> ID：15310261
> 
> 赞同：37
> 
> 时间：2013-03-09T11:43:41.580
> 
> 标签：php, arrays, null, indexing, isset

有没有办法检查数组索引是否**存在或为 null**？ `isset()`不会告诉您索引是不存在还是存在但为空。如果我这样做：`isset($array[$index]) || is_null($array[$index])`它将不起作用，因为如果索引不存在 is_null 将崩溃。

请问这个怎么查？还有一种方法可以只检查某物是否存在，无论它是否设置为空？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-03-09T12:04:27.990

函数[array_key_exists()](http://php.net/manual/en/function.array-key-exists.php)可以做到这一点，而[property_exists()](http://php.net/manual/en/function.property-exists.php)用于对象，加上 Vineet1982 所​​说的。谢谢你的帮助。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-03-09T12:02:45.067

这是一个非常好的问题，您可以为此使用 get_defined_vars() ：

```
$foo = NULL;
$a = get_defined_vars();

if (array_key_exists('def', $a)) {
   // Should evaluate to FALSE
 }; 

if (array_key_exists('foo', $a)) {
   // Should evaluate to TRUE
}; 
```

这将解决您的问题

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-07-23T07:46:12.867

最简单的定义在： http: **[//php.net/manual/en/function.array-key-exists.php](http://php.net/manual/en/function.array-key-exists.php)**

```
<?php
$array=array('raja'=>'value', 'john'=>'value2');
$var='raja';
echo array_key_exists($var, $array);
?> 
```

# django - Django 1.5 - 为组和用户权限创建两个表

> ID：15310262
> 
> 赞同：1
> 
> 时间：2013-03-09T11:43:42.920
> 
> 标签：django, django-1.5

我开始创建我的下一个项目。我首先创建扩展用户。当我运行 syncdb 时，我注意到它为组和 user_permissions（UserProfile 和 User 模型）创建了两个表。

![在此处输入图像描述](../Images/2fa07ebdf93d162ae25c297ee6e07c9f.png)

这是 Django 1.5 的新默认模型吗？我可以禁止它，而不是为 UserProfile 模型创建组和 user_permissions 表吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T12:33:52.640

之后，通过两次测试，我弄清楚了为什么我的 UserProfile 模型创建的表与 User 模型相同。

```
//When I create UserProfile model I extend it by AbstractUser.
//Which results on creating tables the same with User model.
//So be aware when you use User model class, expect it will create multiple tables

class UserProfile(AbstractUser):
    street = models.CharField(max_length=255)
    city = models.CharField(max_length=30)
    state = models.CharField(max_length=12)
    zip = models.CharField(max_length=10)
    phone = models.CharField(max_length=15)
    cell = models.CharField(max_length=15) 
```

我改变了我的扩展模型：

```
class UserProfile(models.Model):
    user = models.OneToOneField(settings.AUTH_USER_MODEL)
    street = models.CharField(max_length=255)
    city = models.CharField(max_length=30)
    state = models.CharField(max_length=12)
    zip = models.CharField(max_length=10)
    phone = models.CharField(max_length=15)
    cell = models.CharField(max_length=15) 
```

# jquery - Jquery 缓存未来选择器

> ID：15310264
> 
> 赞同：1
> 
> 时间：2013-03-09T11:43:48.107
> 
> 标签：jquery, caching, jquery-selectors

我知道如果您要多次使用它，可以缓存一个选择器来提高性能：

```
mySelector = $('#mySelectorId'); 
```

是否可以在不执行以下操作的情况下缓存将来要添加的选择器？

```
var selector;

$('#something').click(function(){
    $('body').append('<div id="futureSelector"></div>');
    selector = $('#futureSelector');
}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T11:48:04.957

我认为不是，因为 jQuery 方法返回对象。而且你不能存储不存在的对象。

# php - PHP删除字符串中的重复模式

> ID：15310269
> 
> 赞同：3
> 
> 时间：2013-03-09T11:44:39.463
> 
> 标签：php, string, pattern-matching

我得到了这个字符串：

> 星球大战 旧共和国**旧共和国**

我用粗体标记了明显的：旧共和国是重复的，我需要摆脱它。

我尝试了这样的*preg_replace*来检测彼此跟随的重复模式，比如 The the ... 但我无法摆脱像旧共和国这样的更长的重复模式。

```
 $str = $game_title;
    $pattern = "/\b([\w'-]+)(\s+\\1)+/i";
    $replacement = "$1";
    print preg_replace($pattern, $replacement, $str) ."<br>"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T11:53:29.850

试试这个

```
$str = 'Star Wars The Old Republic The Old Republic';
echo $str = implode(' ',array_unique(explode(' ', $str))); 
```

这将为您提供**星球大战旧共和国**并从字符串中删除重复项。

# php - 使用 codeigniter 设置下拉列表的默认值来自数据库

> ID：15310270
> 
> 赞同：0
> 
> 时间：2013-03-09T11:44:45.220
> 
> 标签：php, mysql, codeigniter

嘿，伙计们，我是 codeigniter 的大佬，我正在开发一个应用程序，其中我有一个编辑表单，在这个表单中我有一个下拉字段，我想通过数据库中已经存在的值来设置它的值。我发现一个解决方案`set_select`，但我不知道如何使用它以及选择字段的位置请帮助。.

我的看法是。.

```
<td>Moderator :</td>
<td>
    <label for="select"></label>
    <select name="mod" value="" tabindex="1" >
        <?php foreach($dropvalue2 as $value): ?>
        <option value="<?=$value['moderator_id']?>"><?=$value['moderator_name']?></option>
        <?php endforeach; ?>
    </select>
</td> 
```

通过这个我获取下拉列表，但我想在顶部有一个与我要编辑的行相关的值。.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T12:00:20.673

从数据库中获取值。然后在你的循环中使用它。

```
foreach($dropvalue2 as $value)
{
    $string = "";
    if($value['moderator_id'] == $moderator_in_db) $string = "SELECTED"; ?>

    <option value="<?= $value['moderator_id'] ?>" <?= $string ?>><?= $value['moderator_name'] ?></option> <?php
} 
```

# language-agnostic - 尝试/捕获并返回

> ID：15310273
> 
> 赞同：-2
> 
> 时间：2013-03-09T11:45:02.403
> 
> 标签：language-agnostic

你更喜欢什么解决方案？我更喜欢解决方案2，但我想知道是否存在更好的做法谢谢大家

解决方案 1 - try/catch 嵌套

```
try
{
   //some code that could throws Exception1
   try
   {
        //some code that could throws Exception2
        return success;
   }      
   catch (Exception2 e)
   {
      return failure;
   }
}
catch (Exception1 e)
{
  return failure;
} 
```

解决方案 2 - 尝试/捕获顺序

```
try
{
   //some code that could throws Exception1 
}
catch (Exception1 e)
{
  return failure;
}

try
{
    //some code that could throws Exception2
}      
catch (Exception2 e)
{
  return failure;
}

return success; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T11:49:45.570

-4！我认为这是一个合理的问题，尤其是对于刚起步的人。为什么这是一个糟糕的问题？

我个人会使用下面的代码，除非有令人信服的理由不这样做。

```
try
{
   //some code that could throws Exception1 
   //some code that could throws Exception2
   //some code that could throws Exception3
}
catch (Exception e)
{
  return failure;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T11:49:13.120

你可以试试

```
try
{
   //some code that could throws Exception1 
   //some code that could throws Exception2
}
catch (Exception1 e)
{
   return failure;
}
catch (Exception2 e)
{
   return failure;
}

return success; 
```

# java - 计算器的字符串解析错误 - NumberFormatException

> ID：15310275
> 
> 赞同：0
> 
> 时间：2013-03-09T11:45:03.580
> 
> 标签：java, android, string, calculator

我正在尝试制作一个计算器应用程序，但不幸的是我在解析字符串时遇到了困难。

应用程序接受输入并将其显示在`EditText et2`. 当按下“等于”键时，计算器会执行以下工作。

```
et2 = (EditText) findViewById(R.id.editText2);
s = et2.getText().toString();
int k = 0, i = 0, j = 0, operatorTop = -1, operandTop = -1, end = 0;
float left, right;
float operandStack[] = new float[50];
char operatorStack[] = new char[50];

for (i = 0; i < s.length(); i++) {

    if (s.charAt(i) == '+' || s.charAt(i) == '-' || s.charAt(i) == '*'
            || s.charAt(i) == '/') {

        if (i == 0 || i == s.length() - 1) {
            break;
        } else {

            left = Float.valueOf(s.substring(k, i - 1));
            operandStack[++operandTop] = left;

            operatorStack[++operatorTop] = s.charAt(i);
            if (operatorStack[operatorTop] == '*'
                    || operatorStack[operatorTop] == '/') {
                for (j = i + 1; j < s.length(); j++) {
                    if (s.charAt(j) == '+' || s.charAt(j) == '-'
                            || s.charAt(j) == '*' || s.charAt(j) == '/')
                        end = j - 1;
                    if (j == s.length() - 1)
                        end = j;

                }
                right = Float.valueOf(s.substring(i + 1, end));
                if (operatorStack[operatorTop] == '*')
                    operandStack[operandTop] = operandStack[operandTop]
                            * right;
                if (operatorStack[operatorTop] == '/')
                    operandStack[operandTop] = operandStack[operandTop]
                            / right;
                operatorTop--;

            }
            k = i++;

        }
    }
}
operandStack[++operandTop] = Float.valueOf(s.substring(k,
        s.length() - 1));
for (i = operatorTop; i > -1; i--) {
    char ch = operatorStack[operatorTop];
    switch (ch) {
    case '+':
        operandStack[operandTop - 1] += operandStack[operandTop];
        operandTop--;
        operatorTop--;
        break;
    case '-':
        operandStack[operandTop - 1] += operandStack[operandTop];
        operandTop--;
        operatorTop--;
        break;

    }
    et1.setText("" + operandStack[operandTop]);
} 
```

我收到 NumberFormatException 错误。这是错误日志：

```
03-09 16:54:07.493: E/AndroidRuntime(362): FATAL EXCEPTION: main
03-09 16:54:07.493: E/AndroidRuntime(362): java.lang.IllegalStateException: Could not       execute method of the activity
03-09 16:54:07.493: E/AndroidRuntime(362):  at android.view.View$1.onClick(View.java:2072)
03-09 16:54:07.493: E/AndroidRuntime(362):  at android.view.View.performClick(View.java:2408)
03-09 16:54:07.493: E/AndroidRuntime(362):  at android.view.View$PerformClick.run(View.java:8816)
03-09 16:54:07.493: E/AndroidRuntime(362):  at android.os.Handler.handleCallback(Handler.java:587)
03-09 16:54:07.493: E/AndroidRuntime(362):  at android.os.Handler.dispatchMessage(Handler.java:92)
03-09 16:54:07.493: E/AndroidRuntime(362):  at android.os.Looper.loop(Looper.java:123)
03-09 16:54:07.493: E/AndroidRuntime(362):  at android.app.ActivityThread.main(ActivityThread.java:4627)
03-09 16:54:07.493: E/AndroidRuntime(362):  at java.lang.reflect.Method.invokeNative(Native Method)
03-09 16:54:07.493: E/AndroidRuntime(362):  at java.lang.reflect.Method.invoke(Method.java:521)
03-09 16:54:07.493: E/AndroidRuntime(362):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
03-09 16:54:07.493: E/AndroidRuntime(362):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
03-09 16:54:07.493: E/AndroidRuntime(362):  at dalvik.system.NativeStart.main(Native Method)
03-09 16:54:07.493: E/AndroidRuntime(362): Caused by: java.lang.reflect.InvocationTargetException
03-09 16:54:07.493: E/AndroidRuntime(362):  at yadav.sanjay.calculator.CalculatorActivity.click(CalculatorActivity.java:309)
03-09 16:54:07.493: E/AndroidRuntime(362):  at java.lang.reflect.Method.invokeNative(Native Method)
03-09 16:54:07.493: E/AndroidRuntime(362):  at java.lang.reflect.Method.invoke(Method.java:521)
03-09 16:54:07.493: E/AndroidRuntime(362):  at android.view.View$1.onClick(View.java:2067)
03-09 16:54:07.493: E/AndroidRuntime(362):  ... 11 more
03-09 16:54:07.493: E/AndroidRuntime(362): Caused by: java.lang.NumberFormatException: 
03-09 16:54:07.493: E/AndroidRuntime(362):  at org.apache.harmony.luni.util.FloatingPointParser.parseFloat(FloatingPointParser.java:305)
03-09 16:54:07.493: E/AndroidRuntime(362):  at java.lang.Float.parseFloat(Float.java:291)
03-09 16:54:07.493: E/AndroidRuntime(362):  at java.lang.Float.valueOf(Float.java:330)
03-09 16:54:07.493: E/AndroidRuntime(362):  ... 15 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T11:58:29.607

```
Caused by: java.lang.NumberFormatException 
```

所以问题是您的`String`格式无效，无法解析为数字。所以我的建议是在执行解析之前使用例如**正则表达式：**

```
if (yourString.matches("-?[0-9]+")) { // or "[+-]?\\d*(\\.\\d+)?"
   // do your work.
} 
```

**注意：**还添加 try-catch 块来捕获`Exception`并制作一些关于问题的日志（例如打印字符串值）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T11:50:27.903

您正在尝试将一个无整数值解析为 Integer

```
Caused by: java.lang.NumberFormatException: 
```

按照 logcat 中提供的行号更正您的错误

你的错误一定发生在这里

```
 left=Float.valueOf(s.substring(k,i-1)); 
```

其他在这里

```
 right=Float.valueOf(s.substring(i+1,end)); 
```

尝试这样做

```
String leftString=s.substring(k,i-1); 
```

并检查是否`leftString`可以转换为`float/Integer`

# cordova - Windows Phone 7.x / PhoneGap 2.4 - Readfile 混合导致多次读取

> ID：15310279
> 
> 赞同：1
> 
> 时间：2013-03-09T11:45:28.287
> 
> 标签：cordova, windows-phone

我正在将已经在 Android 和 iPhone 上运行的 PhoneGap 应用程序转换为在 windows Phone 7.x 和 8 上运行。

我有一个程序可以在 SD 卡上本地读取许多 XML 文件，并且它们有时会接合到返回的变量不是来自正确的文件，而是来自先前的读取。

我一直在尝试使用内部变量和使用参数调用函数的各种事情，但它并不能始终如一地工作。

有人听说过这个或有解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-02T21:34:38.207

我发现了问题，看起来我所做的调用一直无效，但 PhoneGap 接受了它。但在 2.7 中它已修复。我基本上有一些内部函数定义，我“展开”到单独的函数，现在它作品。

所以基本上你需要 3 或 4 个异步函数。互相打电话来阅读文件..很麻烦但它有效..

谢谢金

# memory-leaks - ng-include 是否有内存泄漏？

> ID：15310282
> 
> 赞同：6
> 
> 时间：2013-03-09T11:45:53.860
> 
> 标签：memory-leaks, angularjs

我`ng-include`用来切换不同的数据页面，这会做大量的数据渲染。

我发现浏览器的内存使用量一直在增长，而且永远不会回落。

## 代码

代码非常简单。

HTML 代码：

```
<body ng-controller="MainCtrl">
  <div>
    <button ng-click="url='nodata.html'">No data</button>
    <button ng-repeat="i in getNumArray(10)" ng-click="loadData(i)">Load data {{i}}</button>
  </div>
  <hr/>
  [{{url}}]
  <div ng-include="url"></div>
</body> 
```

它将显示一个“无数据”按钮和 10 个数据按钮来加载不同的页面。

角码：

```
app.controller('MainCtrl', function($scope) {
  $scope.url = "nodata.html";
  $scope.loadData = function(n) {
    $scope.url = "data" + n + ".html";
  }

  $scope.getNumArray = function(n) {
    var arr = [];
    for(var i =0;i<n;i++) {
      arr.push(i);
    }
    return arr;
  }
});

app.controller('DataCtrl', function($scope, $http){
  $http.get('data.json').success(function(data){
      $scope.data = data;
  })
}); 
```

和“dataN.html”页面：

```
<div ng-controller="DataCtrl">
  <table ng-repeat="x in getNumArray(500)">
    <tbody>
      <tr>
        <td>{{data["key0"]}}</td>
        <td>{{data["key1"]}}</td>
        <td>{{data["key2"]}}</td>
        <td>{{data["key3"]}}</td>
        <td>{{data["key4"]}}</td>
        <td>{{data["key5"]}}</td>
        <td>{{data["key6"]}}</td>
        <td>{{data["key7"]}}</td>
        <td>{{data["key8"]}}</td>
        <td>{{data["key9"]}}</td>
      </tr>
    </tbody>
  </table>
</div> 
```

“nodata.html”页面：

```
<div>No data yet.</div> 
```

和“data.json”：

```
{
  "key0": "sdf sdf sdf sdf sdf sdf sdf sdf sdf sd fds fds fsd fds fds fds fds fsd fds fds f",
  "key1": "sdf sdf sdf sdf sdf sdf sdf sdf sdf sd fds fds fsd fds fds fds fds fsd fds fds f",
  "key2": "sdf sdf sdf sdf sdf sdf sdf sdf sdf sd fds fds fsd fds fds fds fds fsd fds fds f",
  "key3": "sdf sdf sdf sdf sdf sdf sdf sdf sdf sd fds fds fsd fds fds fds fds fsd fds fds f",
  "key4": "sdf sdf sdf sdf sdf sdf sdf sdf sdf sd fds fds fsd fds fds fds fds fsd fds fds f",
  "key5": "sdf sdf sdf sdf sdf sdf sdf sdf sdf sd fds fds fsd fds fds fds fds fsd fds fds f",
  "key6": "sdf sdf sdf sdf sdf sdf sdf sdf sdf sd fds fds fsd fds fds fds fds fsd fds fds f",
  "key7": "sdf sdf sdf sdf sdf sdf sdf sdf sdf sd fds fds fsd fds fds fds fds fsd fds fds f",
  "key8": "sdf sdf sdf sdf sdf sdf sdf sdf sdf sd fds fds fsd fds fds fds fds fsd fds fds f",
  "key9": "sdf sdf sdf sdf sdf sdf sdf sdf sdf sd fds fds fsd fds fds fds fds fsd fds fds f"
} 
```

## 这是一个现场演示：

[http://plnkr.co/edit/KGZVXIBws1kthgN2bxEJ?p=preview](http://plnkr.co/edit/KGZVXIBws1kthgN2bxEJ?p=preview)

当我用chrome打开live demo时，初始化内存使用量小于100M。然后我点击“加载数据”按钮，它很快就会增长到300M并且永远不会回退，即使我点击“无数据”按钮加载“nodata.html”。

正常吗？`ng-include`有内存泄漏还是我遗漏了什么？或者内存使用情况很好，我不需要担心？

## 截屏

我创建了一个截屏视频来展示它：

![ng-包括](../Images/40004176e822a9c1aec14ecb40a69dec.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T16:01:20.760

尝试升级到版本 1.0.5。它似乎没有这个问题。我相信这是因为当模板中有顶级空白节点时，1.0.3/4 中存在内存泄漏。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T17:11:59.397

Stackoverflow 不是提交错误的地方。[请在https://github.com/angular/angular.js/issues](https://github.com/angular/angular.js/issues)提交问题并在那里继续讨论。

我已将用例简化为单个文件：[http ://plnkr.co/edit/Wm4YRsLGJUDqUcww2DQZ?p=preview](http://plnkr.co/edit/Wm4YRsLGJUDqUcww2DQZ?p=preview)

这是我发现的。

1.  仅在 Windows 上泄漏，在 Mac OS X 上不泄漏
2.  仅在 plunker 中泄漏。当我在 plunker 外面运行它时，它工作正常。

你能在 plunker 之外重现这个问题吗？

# database - RavenDB 模型问题

> ID：15310284
> 
> 赞同：0
> 
> 时间：2013-03-09T11:46:02.170
> 
> 标签：database, nosql, ravendb

我正在考虑将 RavenDb 用于我们公司正在进行的一个新项目。该项目将由具有一组基于用户可能附加到它们的标签的动态属性的实体组成。

例子：

名为 Image 的实体具有：

*   ID
*   姓名
*   尺寸

我们希望使用标签（只是系统中的另一个实体）来允许用户为图像创建特定属性。标签由名称组成，并且可能具有父标签。

如果用户创建了两个标签：

*   房子
*   车

House 标签具有以下属性：

*   地点
*   颜色
*   尺寸

Car 标签具有以下属性：

*   牌
*   颜色
*   引擎种类
*   总门数

（这些标签和属性必须由用户在我们的应用程序中使用特殊的编辑屏幕进行管理）。

当用户随后创建图像并为该图像分配特定标签时，该标签的所有属性都必须存在于新图像上。一个图像可以附加多个标签。应单独查询标签以便在 GUI 中显示它们。

我的问题是：

我知道如何在 SQL 中做到这一点。但是当可能有 300000 张具有各种属性的图像时，我有点担心性能。特别是当我们想要搜索这些属性时。任何人都可以为这种设置提供一个快速入门（或现有的教程）吗？我不确定如何为此类数据建模我的实体。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T23:46:42.073

不太清楚您所说的“标签应该单独查询以便在 GUI 中显示它们”是什么意思。但是每个图像的文档以及直接存储的每个标签的属性将是一个起点。

例如

```
 public class Image
    {
        public string Id { get; set; }
        public string Name { get; set; }
        public Dictionary<string, Dictionary<string, object>> LabelProperties { get; set; }
    } 
```

然后，您可以按如下方式填充：

```
var img1 = new Image
{
    Name = "Image1",
    LabelProperties = new Dictionary<string, Dictionary<string, object>> 
    {
        {
            "Car", 
            new Dictionary<string, object>
            {
                { "Brand", "GM"},
                { "Color", "Blue"},
                { "Engine type", "Big"},
                { "Total doors", 4}
            }
        },
        {
            "House", 
            new Dictionary<string, object>
            {
                { "Location", "Downtown"},
                { "Color", "Blue"},
                { "Size", 240}
            }
        }
    }
}; 
```

然后，这最终在数据库中看起来非常漂亮的结构 JSON：

```
{
  "Name": "Image1",
  "LabelProperties": {
    "Car": {
      "Brand": "GM",
      "Color": "Blue",
      "Engine type": "Big",
      "Total doors": 4
    },
    "House": {
      "Location": "Downtown",
      "Color": "Blue",
      "Size": 240
    }
  }
} 
```

然后，您可以使用动态索引进行查询。例如查找所有包含蓝色房子的图像：

```
var blueHouses = session.Query<Image>()
.Customize(x => x.WaitForNonStaleResults())
.Where(x => Equals(x.LabelProperties["House"]["Color"], "Blue"));

Console.WriteLine("--- All Images Containing a House of Color Blue");
foreach (var item in blueHouses)
{
    Console.WriteLine("{0} | {1}", item.Id, item.Name);
} 
```

如果您想查询标签本身，则可能需要索引。有关完整示例，请参阅[要点](https://gist.github.com/pdegenhardt/5138968)。

# android - 将自定义布局添加到 DraggableGridView

> ID：15310287
> 
> 赞同：1
> 
> 时间：2013-03-09T11:46:06.920
> 
> 标签：android, viewgroup

我使用[DraggableGridView](https://github.com/thquinn/DraggableGridView)创建一个 ViewGroup，我想将我的自定义视图添加到其中。
下面是我的自定义布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@color/Green"
    android:gravity="center_horizontal"
    android:orientation="vertical" >

    <ImageView
        android:id="@+id/item_img"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:adjustViewBounds="true"
        android:padding="10dp"
        android:scaleType="fitCenter"
        android:src="@drawable/default_avatar" />

    <TextView
        android:id="@+id/item_name"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="@color/Gray"
        android:gravity="center"
        android:text="Name" />

</LinearLayout> 
```

可以看到，LinearLayout的背景色应该是绿色，在ViewGroup中正确显示。
但是，ImageView 和 TextView 不显示在屏幕上，甚至 TextView 的背景颜色也不显示。

这是我添加自定义视图的代码：

```
LayoutInflater vi = (LayoutInflater) this
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
View v = vi.inflate(R.layout.item, null);
TextView textView = (TextView) v
            .findViewById(R.id.item_name);
textView.setText(contact.getName());
textView.setTextColor(Color.WHITE);

gridView.addView(v); 
```

有什么问题？谢谢你。

# oracle - 将值从 Oracle 对象类型参数传递到 PLSQL 表类型参数

> ID：15310288
> 
> 赞同：2
> 
> 时间：2013-03-09T11:46:07.130
> 
> 标签：oracle, user-defined-types

我们如何将声明为 Oracle 对象类型的参数传递给具有 PLSQL 表类型参数的过程？

例如：

```
Procedure A(p_obj_emp t_obj_emp)
Procedure B(p_emp_tab t_emp_tab) 
```

其中 t_obj_emp = Oracle Object 和 t_emp_tab 是 binary_integer 的 PLSQL 表

我们如何将声明为 Oracle 对象类型的参数传递给具有 PLSQL 记录类型参数的过程？

例如：

```
Procedure C(p_obj_dept t_obj_dept)
Procedure D(p_dept_rec t_dept_rec) 
```

其中 t_obj_dept = 具有 2 个字段（deptid、deptname）的 Oracle 对象，并且 t_dept_rec 在包规范中声明为具有 2 个字段（deptid、deptname）的 t_dept_rec。

请帮忙举个例子。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T12:56:03.683

以下为我编译并且似乎可以执行您想要的操作：

```
CREATE OR REPLACE TYPE t_obj_emp AS OBJECT (
  emp_id      INTEGER,
  emp_name    VARCHAR2(100)
);
/

CREATE OR REPLACE TYPE t_obj_dept AS OBJECT (
  dept_id     INTEGER,
  dept_name   VARCHAR2(100)
);
/

CREATE OR REPLACE PACKAGE my_pkg AS

  TYPE t_emp_tab IS TABLE OF t_obj_emp INDEX BY BINARY_INTEGER;

  TYPE t_dept_rec IS RECORD (
    dept_id     INTEGER,
    dept_name   VARCHAR2(100)
  );

  PROCEDURE A(p_obj_emp t_obj_emp);
  PROCEDURE B(p_emp_tab t_emp_tab);
  PROCEDURE C(p_obj_dept t_obj_dept);
  PROCEDURE D(p_dept_rec t_dept_rec);
END;
/

CREATE OR REPLACE PACKAGE BODY my_pkg AS

  PROCEDURE A(p_obj_emp t_obj_emp)
  IS
    v_emp_tab     t_emp_tab;
  BEGIN 
    v_emp_tab(1) := p_obj_emp;
    B(v_emp_tab);
  END;

  PROCEDURE B(p_emp_tab t_emp_tab) IS BEGIN NULL; END;

  PROCEDURE C(p_obj_dept t_obj_dept)
  IS
    v_dept_rec    t_dept_rec;
  BEGIN
    v_dept_rec.dept_id := p_obj_dept.dept_id;
    v_dept_rec.dept_name := p_obj_dept.dept_name;
    D(v_dept_rec);
  END;

  PROCEDURE D(p_dept_rec t_dept_rec) IS BEGIN NULL; END;
END;
/ 
```

请注意，没有任何“方便”的方法可以从另一个对象/记录创建一个对象/记录，即使它们具有相同的成员（例如上面示例中的 a`t_obj_dept`和`t_dept_rec`）。您必须单独复制所有字段的值。

你说那`t_emp_tab`是一个“二进制整数的PLSQL表”。我猜你的意思是它是*由 索引* 的某种类型的 PL/SQL 表，因为索引这些表比在其中存储 s`binary_integer`更为常见。对于上面的示例，我假设它是一个s 表。如果不是，则必须将对象映射到表中的任何类型的对象或记录。`binary_integer``binary_integer``t_obj_emp``t_obj_emp``t_emp_tab`

# php - 会话开始时的警告消息

> ID：15310289
> 
> 赞同：-1
> 
> 时间：2013-03-09T11:46:09.133
> 
> 标签：php, session, warnings

我已配置`session`，但收到此警告消息。

> PHP 警告：session_start() [function.session-start]：无法发送会话缓存限制器 - 已在 /home/domain/public_html/ 中发送标头（输出开始于 /home/domain/public_html/webroot/getstatus.php:56）第 56 行的 webroot/getstatus.php，引用者：http: [//www.domain.com/index](http://www.domain.com/index)

在第 56 行`getstatus.php: session_start();`

请问有人知道这个警告信息然后请回复吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T13:32:04.683

会话 cookie 作为响应标头的一部分发送，并且标头必须在任何其他内容之前发送到浏览器。

您的`session_start()`电话在第 56 行，要么确保`session_start()`在页面/脚本的开头，要么确保在第 56 行之前不打印任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T12:50:52.327

此消息通常意味着您在调用之前已经输出了一些内容`session_start()`。该`session_start()`函数需要在任何输出之前调用。

# visual-c++ - x64 从内存中反汇编

> ID：15310296
> 
> 赞同：0
> 
> 时间：2013-03-09T11:46:59.523
> 
> 标签：visual-c++, 64-bit, disassembly

我正在 x64 上开发 JIT 编译器；一些代码必须是特定于操作系统的，所以我现在专注于 Windows 版本，Linux 端口稍后会出现。出于调试目的，我将需要某种反汇编程序（由我以外的其他人编写，因此我不只是重复我的错误）来检查我生成的机器代码真正对应的内容。

在 64 位 Windows 上，从 C++ 程序内存中的一大块机器代码中获取反汇编的最简单方法是什么？

*   如果我在调试器下运行我的程序，Visual C++ 肯定有能力为我反汇编生成的代码。有没有办法让它这样做？

*   libopcodes 原则上具有能力，但它是一个 Linux 库；有没有简单的方法让它用 Visual C++ 编译？

*   dumpbin 可以反汇编已写入磁盘的代码，但似乎需要一个适当的目标文件包装器。有没有办法解决这个问题，或者创建一个最小的包装器有多容易？

还是我忽略了其他一些选择？

# python - 你如何正确测试python中的可分性

> ID：15310297
> 
> 赞同：1
> 
> 时间：2013-03-09T11:47:03.703
> 
> 标签：python

我写了一些代码来计算 x 和 y 之间的整数，并检查整数 3 和 5 的可分性。这就是代码。

```
def div_3_5(start, end):
    result = 0
    result2 = 0
    result3 = 0 
    while start < end:
        result2 = start + result 
        result = result2 - start + 1
        if result2 % 3==0 or 5==0:
            result3 = result3 + 1 
        else:
            result3 = result3 + 0
        return result3 
```

我只是一个初学者，但在代码中一切似乎都很好，除非我错误地使用了“或”语句或错误地检查了可分性。这让我想到了主要问题。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-09T11:49:36.010

你需要这样做：

```
if result2 % 3 == 0 or result2 % 5 == 0: 
```

否则它被解析为`if (result2 % 3==0) or (5==0):`，这显然是错误的`5 != 0`。

另一个建议非常有用，因为您有更多数字要检查可分性：

```
if any(result2 % i == 0 for i in (3, 5)): 
```

* * *

这是您似乎正在尝试做的事情的一个更简单的版本（Project Euler 问题 1）：

```
def div_3_5(start, end):
    return sum(1 for i in range(start, end+1) if i % 3 == 0 or i % 5 == 0) 
```

或者，使用德摩根定律和-ish 值`0`的事实：`False`

```
def div_3_5(start, end):
    return sum(1 for i in range(start, end+1) if not (i % 3 and i % 5)) 
```

# ios - 动画一个旋转的精灵环

> ID：15310299
> 
> 赞同：1
> 
> 时间：2013-03-09T11:47:13.850
> 
> 标签：ios, animation, cocos2d-iphone, cube, morphing

我想为 iOS 做一个应用程序，我在 cocos2d 方面有一些专业知识。我搜索了很多，但我发现的只是使用 webkit 的这个动画的 CSS 实现，除了 C、Objective C、VHDL 之外，我不知道任何其他语言。

1-如何在 cocos2d 或任何其他 FrameWork 上制作此动画。

2-我怎样才能让它互动（触摸）。

我可以使它具有交互性，但我需要有关如何制作此动画的指针。我的想法是手动缩放和移动每个精灵并更改不透明度，以创建此效果，但这将花费很多时间。

这是动画的链接

[https://www.webkit.org/blog-files/3d-transforms/morphing-cubes.html](https://www.webkit.org/blog-files/3d-transforms/morphing-cubes.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T09:32:21.293

我这样做了

```
// Create the camera, place it back a bit, and add it to the scene
CC3Camera* cam = [CC3Camera nodeWithName: @"Camera"];
cam.location = cc3v(0.0, 0.0, 200.0);
[self addChild: cam];

// Create a light, place it back and to the left at a specific
// position (not just directional lighting), and add it to the scene
CC3Light* lamp = [CC3Light nodeWithName: @"Lamp"];
lamp.location = cc3v(-110.0, 110.0, 50.0);
lamp.isDirectionalOnly = NO;
[cam addChild: lamp];

// Fetch the die cube model from the POD file.
CC3PODResourceNode* podRezNode = [CC3PODResourceNode nodeFromFile: kDieCubePODFile];
CC3Node* podDieCube = [podRezNode getNodeNamed: kDieCubePODName];

// We want this node to be a SpinningNode class instead of the CC3PODNode class that
// is loaded from the POD file. We can swap it out by creating a copy of the loaded
// POD node, using a different node class as the base.
dieCube = [[podDieCube copyWithName: kDieCubeName
                            asClass: [SpinningNode class]] autorelease];

// Now set some properties, including the friction, and add the die cube to the scene

CCSprite        * markerSprite = [CCSprite spriteWithFile: @"IMG1.PNG"];
marker = [CC3Billboard nodeWithName: @"TouchSpot" withBillboard: markerSprite];

CCSprite        * markerSprite1 = [CCSprite spriteWithFile: @"IMG2.PNG"];
marker1 = [CC3Billboard nodeWithName: @"TouchSpot1" withBillboard: markerSprite1];

CCSprite        * markerSprite2 = [CCSprite spriteWithFile: @"IMG3.PNG"];
marker2 = [CC3Billboard nodeWithName: @"TouchSpot2" withBillboard: markerSprite2];

CCSprite        * markerSprite3 = [CCSprite spriteWithFile: @"IMG4.PNG"];
marker3 = [CC3Billboard nodeWithName: @"TouchSpot3" withBillboard: markerSprite3];

CCSprite        * markerSprite4 = [CCSprite spriteWithFile: @"IMG5.png"];
marker4 = [CC3Billboard nodeWithName: @"TouchSpot4" withBillboard: markerSprite4];

CCSprite        * markerSprite5 = [CCSprite spriteWithFile: @"IMG2.PNG"];
marker5 = [CC3Billboard nodeWithName: @"TouchSpot5" withBillboard: markerSprite5];

CCSprite        * markerSprite6 = [CCSprite spriteWithFile: @"IMG3.PNG"];
marker6 = [CC3Billboard nodeWithName: @"TouchSpot6" withBillboard: markerSprite6];

CCSprite        * markerSprite7 = [CCSprite spriteWithFile: @"IMG4.PNG"];
marker7 = [CC3Billboard nodeWithName: @"TouchSpot7" withBillboard: markerSprite7];

float scale=0.15;

//  marker.scale = cc3v(0.0001f, 0.0001f, 0.0001f);
marker.location = cc3v(0.0f, 0.0f, 50.0);
marker.uniformScale=scale;
marker.isTouchEnabled = YES;

marker1.location = cc3v(35.0, 0.0f, 35.0);
marker1.uniformScale=scale;
marker1.isTouchEnabled = YES;

marker2.location = cc3v(50, 0.0f, 0.0f);
marker2.uniformScale=scale;
marker2.isTouchEnabled = YES;

marker3.location = cc3v(35, 0.0f, -35.0f);
marker3.uniformScale=scale;
marker3.isTouchEnabled = YES;

marker4.location = cc3v(0.0f, 0.0f, -50.0f);
marker4.uniformScale=scale;
marker4.isTouchEnabled = YES;

marker5.location = cc3v(-35.0f, 0.0f, -35.0f);
marker5.uniformScale=scale;
marker5.isTouchEnabled = YES;

marker6.location = cc3v(-50.0f, 0.0f, 0.0f);
marker6.uniformScale=scale;
marker6.isTouchEnabled = YES;

marker7.location = cc3v(-35.0f, 0.0f, 35.0f);
marker7.uniformScale=scale;
marker7.isTouchEnabled = YES;

marker.rotation = cc3v(0.0f, 0.0f, 0.0f);
marker1.rotation = cc3v(0.0f,45.0f,  0.0f);

marker2.rotation = cc3v(0.0f,90.0f,  0.0f);
marker3.rotation = cc3v(0.0f, 130.0f, 0.0f);
marker4.rotation = cc3v(0.0f, 180.0f, 0.0f);
marker5.rotation = cc3v(0.0f, 225.0f, 0.0f);
marker6.rotation = cc3v(0.0f, 270.0f, 0.0f);

marker7.rotation = cc3v(0.0f,  315.0f,0.0f);

CC3Node* runningTrack = [CC3Node nodeWithName: kRunningTrackName];
runningTrack.location = cc3v(0.0, 10.0, 0.0);;
[self addChild: runningTrack];

CCActionInterval* runLap = [CC3RotateBy actionWithDuration: 10.0 rotateBy: cc3v(0.0, 360.0, 0.0)];
[runningTrack runAction: [CCRepeatForever actionWithAction: runLap]];

 [runningTrack addChild:marker];
 [runningTrack addChild:marker1];
 [runningTrack addChild:marker2];
 [runningTrack addChild:marker3];
[runningTrack addChild:marker4];
[runningTrack addChild:marker5];
[runningTrack addChild:marker6];
[runningTrack addChild:marker7];

//[self addChild: dieCube]; 
```

}

即使我是 cocos3d 的新手，但如果您认为我可以帮助，请不要犹豫。卡里姆

# javascript - 清洁 长方形

> ID：15310300
> 
> 赞同：0
> 
> 时间：2013-03-09T11:47:30.777
> 
> 标签：javascript, html, canvas

我在脚本中有一个在画布上绘制矩形的函数。我想清理在“if”条件下绘制的矩形。我在画布上也有文字（它的坐标是 0,80），它不应该被清理。只有矩形必须清洁。

```
function red_stroke_2(yy) 
{ 
    //Red color edges
    context.strokeStyle = "#f00";
    context.strokeRect(0,yy,800,40);
}
 if (Option1==answers[qnumber])
{
     red_stroke_2(80);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T12:12:21.740

Canvas 是“无状态的”，因为它不知道已绘制的图元或已进行的调用。因此，仅撤消某个绘图调用是不可能的。如果需要修改绘图，则需要重新绘制所有不想更改的项目。当然，您可以选择更改单个像素，因此如果您的文本是黑色的并且矩形是红色的，您可以替换所有红色像素，但是如果启用了抗锯齿并且非常复杂，这将不会那么好。

所以要么重绘整个区域（省略矩形绘图但渲染文本）。或者考虑在彼此之上使用 2 个画布（一个带有文本，一个带有背景），那么您当然可以重新渲染背景而不必担心文本。

最后但并非最不重要的一点是，使用 SVG 也可能是一种替代方案，因为它是有状态的，并且由您可以修改/插入/删除的 DOM 元素组成，并且浏览器将进行合成。在这种情况下，您将拥有一个`rect`元素和一个`text`元素，您可以简单地删除前者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T12:14:20.083

这将放置透明像素而不是矩形：

```
function clean_red_stroke(yy)
{
    context.clearRect(0,yy,800,40);
}
//Call it with the same 'yy' you used in the drawing method
clean_red_stroke(80); 
```

但是，我认为可以通过使用更多变量（因此是最通用的函数）来改进您的代码。

# python - 如何获取选定的对象类型

> ID：15310302
> 
> 赞同：1
> 
> 时间：2013-03-09T11:47:33.587
> 
> 标签：python, 3d, maya, mel, pymel

我需要根据当前使用 PYMEL 的选择来基本查询和执行一些任务，例如：

```
from pymel.core import *    
s = selected()
if (s.selType() == 'poly'):
    #do something    
if (s.selType() == 'surface'):
    #do something    
if (s.selType() == 'cv'):
    #do something    
if (s.selType() == 'vertex'):
    #do something    
if (s.selType() == 'face'):    
    #do something
if (s.selType() == 'edge'):  
    #do something
if (s.selType() == 'curve'):
    #do something 
```

我知道这`selType()`不是一个实际的 pymel 函数，我还想利用 pymels api 命令，如果有意义的话，不要使用标准的 mel 命令。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T18:25:36.593

PyMEL 将为您将选择列表转换为节点（与 MEL 不同，其中一切都是简单的数据类型。）至少对于`ls`相关命令来说是这样（`selected`只是`ls(sl=True)`。）

该列表中的所有内容都将是 的子类`PyNode`，因此您可以依靠它们拥有方法`nodeType`。

从那里，很容易根据其类型处理每个选择。

* * *

组件继承自`pymel.core.Component`，每个组件类型都有一个类；`MeshVertex`例如。

您可以使用`isinstance(obj, type_sequence)`过滤掉组件：

```
filter(lambda x: isinstance(x, (pm.MeshVertex, pm.MeshEdge, pm.MeshFace)), pm.selected()) 
```

您可以`general`在 PyMEL 文档的部分下找到它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-23T22:08:55.483

您可以使用 Maya 原生 filterExpand 命令将每个命令分类为各自的类型。它本质上是筛选您的选择并列出与您正在寻找的类型相对应的对象

例如：

```
import maya.cmds as cmds

selection = cmds.ls(sl=1) # Lists the current selection and 
                          # stores it in the selection variable

polyFaces = cmds.filterExpand(sm=34) # sm (selectionMask) = 34 looks for polygon faces.
                                     # Store the result in polyFaces variable.

if (polyFaces != None): # If there was any amount of polygon faces.
   for i in polyFaces:  # Go through each of them.
      print(i)          # And print them out. 
```

有关命令和对应 int-value 的过滤器的更多信息，请参见 python 或 mel 命令参考。

# ajax - 在定义 html 列表的复合组件中使用 f:ajax 时遇到问题

> ID：15310307
> 
> 赞同：1
> 
> 时间：2013-03-09T11:47:56.877
> 
> 标签：ajax, jsf-2, mojarra

我的设置如下：我在另一个（taskList）中有一个复合组件（taskEntry）。

```
<ul class="tableView">
                    <ui:repeat value="#{cc.attrs.taskList}" var="task"> 
                            <jid1:taskEntry task="#{task}" />
                    </ui:repeat>
</ul> 
```

任务入口定义为：

```
<li>
                <h:outputText value="#{cc.attrs.task.title} " />
<h:commandLink actionListener="#{cc.attrs.taskBean.toggle(cc.attrs.task)}">
                            <f:ajax execute="@this" render="??" />
                        </h:commandLink>
</li> 
```

你能建议我应该渲染哪个 ID 吗？

如果我在“li”（例如 panelGroup）中定义一个“id”，第一个 ajax 调用按预期工作，第二个调用什么也不做，第三个给我一个 JS 错误。添加一个 panelgrid 来包围 'li' 根本不会呈现 panelgrid 定义。我不想重新渲染整个列表，只是 jid1:taskEntry

我在第三次点击时得到的错误是：

```
java.lang.IllegalStateException: Component ID j_idt37:j_idt52:j_idt55:j_idt61 has already been found in the view. 
```

# actionscript-3 - 如何访问主时间轴上影片剪辑中的变量？

> ID：15310313
> 
> 赞同：0
> 
> 时间：2013-03-09T11:48:19.233
> 
> 标签：actionscript-3

好的，所以我有一些名为“stat”的变量位于我需要从主时间线访问的影片剪辑中。我尝试了多种方法，但都没有奏效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T11:55:59.077

代码总是有帮助的！执行代码时，movieclip 必须存在。

```
trace("stat value in mc = " + mcName.stat); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T11:59:10.267

# 已编辑。

我把舞台实例Movieclip 命名为“mc”。这是有一个这个脚本。

```
var stat:String ="Test"; 
```

和下一个脚本，主时间线。如果您访问`mc.stat`，您将无法获得价值。控制台显示到`null`. 当您调用 In Main 时间线脚本访问实例 MovieClip 内部变量时。因为脚本中的初始化代码可能还不起作用。所以你应该延迟打电话。

我建议使用`Timer`. 试试这个：

```
import flash.events.Event;
import flash.utils.Timer;
import flash.events.TimerEvent;

trace("check1:" + mc.stat);

var timer:Timer = new Timer(1, 1);
timer.addEventListener(TimerEvent.TIMER, onAdded);
timer.start();

function onAdded(e:TimerEvent):void
{
    timer.removeEventListener(TimerEvent.TIMER, onAdded);
    trace("check2:" + mc.stat);
} 
```

# reporting - openerp 7：报告未显示

> ID：15310314
> 
> 赞同：0
> 
> 时间：2013-03-09T11:48:23.123
> 
> 标签：reporting, openerp

我通过界面创建了一个报告记录，但它没有显示在打印下拉列表中。

在设置 -> 操作 -> 报告中，我添加了一条新记录：

```
Name: My Test

Service Name: my_po_reports

Object: purchase.order

Report Type: pdf

Report file: purchase/report/order.rml (i'm reusing an existing one just to test) 
```

但是当我去采购订单表格时，我的测试没有出现！

我也在 aeroo 报告中尝试了同样的方法，但没有任何结果：

在设置 -> 操作 -> aeroo 报告 -> 报告中，我添加了一条新记录：

```
Name: My Test

Service Name: my_po_report

Object: purchase.order

Template type: odt Output type: odt

Template source: file Template path: myfolder/reports/template.odt 
```

我错过了什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T05:15:08.010

当您为 rml 报告定义操作时。您还必须在操作绑定中为此报告定义一个记录。

```
Settings ==> Actions ===> Action Bindings 
```

名称：采购订单（要显示的报告名称）

型号名称：purchase.order（这里是您的型号）

限定符：client_print_multi

操作参考：ir.actions.report.xml,360（您的报告 xml id 在这里）

希望这对你有帮助

问候，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T15:36:26.120

编辑：用以下内容替换我之前的解决方案，因为这不需要卸载和重新安装：

```
<record id="report_mypo_test" model="ir.actions.report.xml">
    <field name="name">Stock Moves Report</field>
    <field name="type">ir.actions.report.xml</field>
    <field name="model">stock.move</field>
    <field name="report_name">mypo.test</field>
    <field name="report_type">aeroo</field>
    <field name="in_format">oo-odt</field>
    <field name="out_format" model="report.mimetypes" ref="report_aeroo.report_mimetypes_odt_odt"/>
    <field name="parser_loc">myaddon/reports/my_parser.py</field>
    <field name="report_rml">myaddon/reports/template.odt</field>
    <field name="parser_state">loc</field>
    <field name="tml_source">file</field>
</record>

<report auto="False" menu="True" id="report_mypo_test" model="stock.move" 
            name="mypo.test" rml="myaddon/reports/template.odt" string="Stock Moves Report"/> 
```

my_parser.py：

```
import time
from tools.translate import _

from report import report_sxw
from report.report_sxw import rml_parse

from osv import fields, osv
import netsvc

class Parser(report_sxw.rml_parse):
    def __init__(self, cr, uid, name, context):
        super(Parser, self).__init__(cr, uid, name, context)

        ids =  self.pool.get('stock.move').search(self.cr, self.uid, [], context=context)
        self.stockmoves = self.pool.get('stock.move').browse(self.cr, self.uid, ids)

        self.localcontext.update({
            'stockmoves': self.stockmoves
        }) 
```

感谢全能的上帝，以及许多在互联网上贡献自己作品的人。

# c# - ASP .Net 安全实施

> ID：15310315
> 
> 赞同：0
> 
> 时间：2013-03-09T11:48:29.357
> 
> 标签：c#, asp.net, vb.net, security

我希望有人可以建议以下情况是否可以接受，如果不是，我还有什么其他方法可以解决这个问题。

我开发了一个使用表单身份验证的 ASP .Net 站点，使用我们自己的数据库 (SQL) 模型进行身份验证。多个用户可以登录。需要考虑的一点是，**每个用户都不能访问彼此的记录。**

在代码中，我在页面加载时有一个 User 对象，它加载登录用户的详细信息。

当他们访问记录时，我会拥有一个超链接，其中包含传递的记录 ID，该 ID 被重定向到用户可以查看完整记录的详细信息页面。

现在在详细信息页面上，我再次加载当前用户的详细信息，然后使用一些 SQL 来**获取用户登录 ID 和传入记录 ID 的记录。**

到目前为止，这已经奏效，因为我使用访问自己记录的用户 1 登录 - 复制 URL 并将其粘贴到另一个浏览器中，该浏览器将用户重定向到登录页面。这次我使用用户 2 登录。页面已显示**，但没有详细信息。**

这听起来不错还是我需要做的其他事情？当然，如果没有返回详细信息，我将实现对访问被拒绝页面的重定向，而不是显示空白页面。

如果您有任何问题随时问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T11:52:17.330

这一切听起来都很好——尽管我会选择更精细的东西：允许在访问控制列表的基础上访问其他人的记录，但这更复杂。

在您所写的内容中，我唯一要更改的是“重定向”到拒绝访问的页面。**永远不要重定向到错误页面**- 而是在原始响应中返回错误消息。您可以在 ASP.NET WebForms 中执行此操作，方法是使用`Server.Transfer`，或清除响应缓冲区（如有必要）并将页面内容设置为带有正确消息的 ASCX。不要忘记将 HTTP 状态设置为 403。

# python - python/c -- windows 7下连接无线网络

> ID：15310317
> 
> 赞同：1
> 
> 时间：2013-03-09T11:48:50.867
> 
> 标签：python, c, wifi, wlanapi

我在 Python 2.x 方面相对出色，并且刚刚开始学习 C。我得出的结论是，我需要使用[Windows Native Wifi API](http://msdn.microsoft.com/en-us/library/ms705969%28v=vs.85%29.aspx)（随时提供替代方案）。

我想使用给定的名称和密码连接到网络。我真的不明白我将如何使用[WlandConnect](http://msdn.microsoft.com/en-us/library/ms706613%28v=VS.85%29.aspx)（这是正确的功能，对吧？）。

如果有（合理的）方式，我更愿意用 Python 来做。

# javascript - Emberjs：如何一次过滤多个属性

> ID：15310320
> 
> 赞同：8
> 
> 时间：2013-03-09T11:49:07.817
> 
> 标签：javascript, ember.js, ember-data

下面我肯定是按单个属性进行过滤，但是如何一次性按另一个属性进行过滤？也就是说，没有向用户提供包含不同搜索选项的下拉菜单 *示例*：我的搜索词可能是姓名、电子邮件或年龄。

```
var search = this.controllerFor('employees').search; //can be name, email or age

employees = this.get('currentModel').filterProperty('name', search); 
```

上面的方法可以很好地更新主列表，但我一次只能过滤一个属性。

```
//Sample Model
App.Employee = DS.Model.extend({
    email: DS.attr('string'),
    name: DS.attr('string'),
    age: DS.attr('number'),
}) 
```

`length = 0`一种想法是，如果过滤结果以及如何合并结果，则再次重新过滤。但是，我对这个想法并不感兴趣，并且相信 Ember 可能有更好、更优雅的方式来实现这一点。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-09T17:30:27.100

您可以使用该[`filter`](https://github.com/emberjs/data/blob/master/packages/ember-data/lib/system/store.js#L850-L863)功能过滤模型中的多个属性，甚至可以使用控制器中的其他属性。例如：

想象一个这样的模型：

```
App.Person = DS.Model.extend({
    firstName: DS.attr('string'),
    lastName: DS.attr('string'),
    fullName: function() {
        return '%@ %@'.fmt(
            this.get('firstName'),
            this.get('lastName')
        );
    }.property('firstName', 'lastName')
}); 
```

要按多个属性进行过滤，假设您有一个具有*类似*搜索功能的控制器：

```
...
performSearch: function(searchTerm) {
    return this.get('content').filter(function(person) {
        return person.get('firstName').indexOf(searchTerm) !== -1 ||
               person.get('lastName').indexOf(searchTerm) !== -1;
    });
},
... 
```

这将遍历联系人列表`content`并应用一个或多个过滤器，仅返回与过滤器对应的模型对象。

小提琴：http: [//jsfiddle.net/schawaska/ABJN7/](http://jsfiddle.net/schawaska/ABJN7/)

# html - 调整导航栏+页脚大小时出现故障

> ID：15310325
> 
> 赞同：0
> 
> 时间：2013-03-09T11:49:57.140
> 
> 标签：html, css, twitter-bootstrap, responsive-design

我在正在开发的网站上遇到问题：当我将窗口大小重新调整为低于 1170 像素的水平分辨率时，导航栏和页脚都会在页面右侧产生间隙。![调整大小的窗口](../Images/19f1625a9ece362d8b5550fa886639b0.png) ![全屏](../Images/33735e09d165c81d957859f46934f933.png) 这也发生在移动浏览器上（当放大导航栏向右移动时，最后一个对象无法访问）。你能帮我解决这个问题吗？

HTML：[http://pastebin.com/nTW3MrEr](http://pastebin.com/nTW3MrEr) CSS： http: [//pastebin.com/v1TDiK6J](http://pastebin.com/v1TDiK6J) 页脚问题（窗口调整大小，英雄单元/导航栏/和内容都很好，但页脚仍然出现故障，我已经放了一些文本以更好地理解问题：![在此处输入图像描述](../Images/d5138e33f7a5a899675b865c69d2df90.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T13:15:10.760

该网站的问题是因为 min-width:1100px 设置为 hero-unit 和 width:1170px 设置为 div #corpo。由于您使用容器类来包装您的内容，因此在引导响应 css 中，宽度已经是 1170 像素，因此无需在此处设置。

此外，要重新排列布局以使其正确可见，您可以为页面的特定部分编写媒体查询。在平板电脑视图的页面上，导航和页眉之间有很大的上边距，因此您可以将它们排列如下：

```
/* Landscape phone to portrait tablet */
   @media (max-width: 767px) {
     .navbar-fixed-top{
        margin-top:5px;
             }
     .page-header{
          margin-top:5px;
           }
      }

/* Landscape phones and down */
   @media (max-width: 480px) {
          .navbar-fixed-top{
        margin-top:5px;
             }
     .page-header{
          margin-top:5px;
           }

       } 
```

# c - 看不懂struct Barnyard2的sf_ip头文件

> ID：15310326
> 
> 赞同：3
> 
> 时间：2013-03-09T11:50:00.347
> 
> 标签：c, struct

我正在查看 Barnyard2 的 sf_ip.h[源代码](https://github.com/firnsy/barnyard2/blob/master/src/sfutil/sf_ip.h)。我不了解 sfip_t stuct，特别是联合块。

```
typedef struct _ip {
    int family;
    int bits;

    /* see sfip_size(): these address bytes
* must be the last field in this struct */
    union
    {
        u_int8_t u6_addr8[16];
        u_int16_t u6_addr16[8];
        u_int32_t u6_addr32[4];
// u_int64_t u6_addr64[2];
    } ip;
    #define ip8 ip.u6_addr8
    #define ip16 ip.u6_addr16
    #define ip32 ip.u6_addr32
// #define ip64 ip.u6_addr64
} sfip_t; 
```

为什么使用数组？我试图寻找文档，但谷歌一直没有运气。谁能解释一下这里正在做什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-28T08:19:21.053

C 中的联合对其所有元素使用*相同*的内存块。这与结构不同，其中元素在内存中是连续的。

因此，如果您的变量从内存位置开始，那么 while`struct {int x; int y;}`将被布置`0x40000000`：

```
 +-------------+
0x40000000 | x (4 bytes) |
           +-------------+
0x40000004 | y (4 bytes) |
           +-------------+ 
```

一个相关的`union {int x; int y;}`存在是这样的：

```
Address
           +-------------+-------------+
0x40000000 | x (4 bytes) | y (4 bytes) |
           +-------------+-------------+ 
```

换句话说，它一次只能用于*一*件事，从技术上讲，它是`y`您上次用于`x`设置变量时使用的未定义行为 - 尽管在这种情况下，您很可能会发现它会起作用，因为这两个可能性是同一类型。

在您的特定情况下，您具有以下内存布局（假设您的变量位于`0x40000000`）：

```
 +--------------+--------------+--------------+
0x40000000 | u6_addr8[ 0] |              |              |
           +--------------+ u6_addr16[0] |              |
0x40000001 | u6_addr8[ 1] |              |              |
           +--------------+--------------+ u6_addr32[0] |
0x40000002 | u6_addr8[ 2] |              |              |
           +--------------+ u6_addr16[1] |              |
0x40000003 | u6_addr8[ 3] |              |              |
           +--------------+--------------+--------------+
0x40000004 | u6_addr8[ 4] |              |              |
           +--------------+ u6_addr16[2] |              |
0x40000005 | u6_addr8[ 5] |              |              |
           +--------------+--------------+ u6_addr32[1] |
0x40000006 | u6_addr8[ 6] |              |              |
           +--------------+ u6_addr16[3] |              |
0x40000007 | u6_addr8[ 7] |              |              |
           +--------------+--------------+--------------+
0x40000008 | u6_addr8[ 8] |              |              |
           +--------------+ u6_addr16[4] |              |
0x40000009 | u6_addr8[ 9] |              |              |
           +--------------+--------------+ u6_addr32[2] |
0x4000000a | u6_addr8[10] |              |              |
           +--------------+ u6_addr16[5] |              |
0x4000000b | u6_addr8[11] |              |              |
           +--------------+--------------+--------------+
0x4000000c | u6_addr8[12] |              |              |
           +--------------+ u6_addr16[6] |              |
0x4000000d | u6_addr8[13] |              |              |
           +--------------+--------------+ u6_addr32[3] |
0x4000000e | u6_addr8[14] |              |              |
           +--------------+ u6_addr16[7] |              |
0x4000000f | u6_addr8[15] |              |              |
           +--------------+--------------+--------------+ 
```

假设您了解您的特定 C 实现如何布置各种类型，这提供了一种以不同方式引用相同数据的方法。

# scala - 理解 scala 的 _ vs Any/Nothing

> ID：15310329
> 
> 赞同：15
> 
> 时间：2013-03-09T11:50:15.110
> 
> 标签：scala, wildcard, covariance, contravariance, type-systems

如果一个类有一个可变类型参数，比如[`Iterable[+A]`](http://www.scala-lang.org/archives/downloads/distrib/files/nightly/docs-2.10.1/library/index.html#scala.collection.Iterable)，那么声明

```
def foo(bar: Iterable[_]) 
```

和

```
def foo(bar: Iterable[Any]) 
```

?

* * *

如果一个类有一个逆变类型参数，比如[`Growable[-A]`](http://www.scala-lang.org/archives/downloads/distrib/files/nightly/docs-2.10.1/library/index.html#scala.collection.generic.Growable)，那么声明之间有什么区别吗

```
def foo(bar: Growable[_]) 
```

和

```
def foo(bar: Growable[Nothing]) 
```

?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T13:05:48.393

当泛型参数有界时，它确实会有所不同。例如，如果你有

```
class BoundedIterable[+A <: Something]
class BoundedGrowable[-A >: Something] 
```

然后键入`BoundedIterable[Any]`并且`BoundedGrowable[Nothing]`将是非法的。

我不知道是否还有其他区别，但我可以肯定地说，您应该尽可能选择无通配符的变体。那是因为，实际上，声明站点类型差异的真正目的是摆脱通配符（这是使用站点差异的一种形式）。当你说`List[Any]`你的意思是“任何东西的清单”时，但是当你说的`List[_]`时候你的意思是“我们不知道什么的清单”。所以前者更清楚，即使它们在某些特定情况下可能是等价的。

# android - Android应用内计费：消费sku android.test.purchased时出错（回复：5：开发者错误）

> ID：15310332
> 
> 赞同：7
> 
> 时间：2013-03-09T11:50:28.033
> 
> 标签：android, in-app-purchase, in-app-billing

我已经通过标准助手发送了一个测试购买意图：

```
String SKU = "android.test.purchased";
mHelper.launchPurchaseFlow(this, SKU, 10001, mPurchaseFinishedListener); 
```

购买成功，但是当我尝试使用以下方式消费购买的物品时：

```
mHelper.consumeAsync(inv.getPurchase(SKU), mConsumeFinishedListener); 
```

我收到以下错误：

```
Error while consuming: IabResult: Error consuming sku android.test.purchased (response: 5:Developer Error) 
```

*   我创建了一个 Play 商店签名的 apk 并上传到开发者控制台
*   我在开发控制台中设置了一个测试项目
*   我已经实现了 onActivityResult

我错过了什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T01:44:10.330

从 2013/03/08 到现在，我遇到了同样的错误。在 03/08 之前，使用 android.test.purchased 可以正常工作。我观察到这个产品 id，它似乎会在一段时间后自动清除。

编辑一个匿名用户添加了以下内容：

这是问题所在： [https ://code.google.com/p/android/issues/detail?id=53077](https://code.google.com/p/android/issues/detail?id=53077)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-11T12:05:18.743

首先在您的 google play 商店的 alpha 或 beta 版本上发布应用程序。

如果您发布应用程序并且 apk 仅在“alpha 测试”部分中，那么它对公众不可用，仅适用于 alpha 部分中的激活测试人员。

编辑：附加说明：“正常”使用不会在 Google Play 上找到您的应用程序，而且激活的测试人员也无法使用搜索框找到应用程序。

只有应用程序包的直接链接才有效。（仅适用于已激活的测试人员）。 [https://play.google.com/apps/testing/yourpackagename](https://play.google.com/apps/testing/yourpackagename)

# css - 根据每个浏览器中的屏幕分辨率将 div 放置到屏幕中心

> ID：15310333
> 
> 赞同：0
> 
> 时间：2013-03-09T11:50:50.280
> 
> 标签：css, html, margin

如何将容器水平放置到屏幕中心。容器有 8 个要放置的图像。所有图像都将对齐到一条线，并应根据屏幕分辨率进行相应更改。

这是我的 HTML

```
<div id="container">
    <div id="list"   >
        <img src="img/c1.png" style="display:box; width:125px; margin-left:5px; margin-top:9px" />
        <img src="img/c2.png" style="display:box; width:125px;margin-left:5px;margin-top:9px"/>
        <img src="img/c3.png" style="display:box; width:125px;margin-left:5px;margin-top:9px" />    .
        .
        .
    </div>
</div> 
```

CSS：

```
#container{margin-left: auto;margin-right:auto;width:1200px;} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T14:14:48.853

在这里，您改进的 CSS

在这里，图像将表现为文本，因此此代码非常适合您的要求。（如果某些事情没有按您的意愿工作，只需留下您的 HTML 和 CSS 的 jsfiddle 以便我们可以查看实时代码。）

```
#container {
    position: relative;
    margin: auto;
    width:1200px;
}

#list img {
    display: inline-block;
}

#list {
    vertical-align: middle;
    text-align: center;
} 
```

# html - 如果输入的值和 xml 值相同，则显示 xml 文件的第一个元素

> ID：15310336
> 
> 赞同：-1
> 
> 时间：2013-03-09T11:51:26.467
> 
> 标签：html, xml, xpath

这是我的 xml 示例：-

```
<products>
    <product_id value="1">
        <tab_id value="351">
            <date value="30-09-1989" />
        </tab_id>
    </product_id>   
    <product_id value="2">
        <tab_id value="352">
            <date value="03-03-1990" />
        </tab_id>
    </product_id>
</products> 
```

这是我试过的：-

```
<html>
    <head>
    <title>Less,Grater,Equal</title>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script>
        var xml;
        $.get(
        "xml_Converted.xml",
        null,
        function (data) {
            xml = data;
        },
        "xml"
            );
            function get_list()
            {
                var ename = $('#select').val();
                var xPath = '//*["' + ename + '" = ' +
                            ' //date/@value'  + '"]/../../@value';
                var iterator = xml.evaluate(xPath, xml.documentElement, null,
                XPathResult.UNORDERED_NODE_ITERATOR_TYPE, null);
            var thisNode = iterator.iterateNext();
            var str = '';
            while (thisNode) {
                if (str) {
                    str += ', ';
                }
                str += thisNode.textContent;
                thisNode = iterator.iterateNext();
            }

            $("#result").text(str);
        }
    </script>
        <body>
        <input type="text" id="select">
        <input type="button" value="search">
        <div id="result"></div>
        </body>
    </head>
</html> 
```

在这里，如果用户在文本框中输入日期，我想 o/p 然后它在 xml 树上的匹配，它的 soud 返回 xml 树的第一个元素属性值（product_id 值）o/p 是`1`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T11:55:16.593

改变这个：

```
var iterator = xml.evaluate(xPath, xml.documentElement, null,
                  XPathResult.UNORDERED_NODE_ITERATOR_TYPE, null);
var thisNode = iterator.iterateNext();
var str = '';
while (thisNode) {
    if (str) {
        str += ', ';
    }
    str += thisNode.textContent;
    thisNode = iterator.iterateNext();
} 
```

对此：

```
var node = xml.evaluate(xPath, xml.documentElement, null,
                  XPathResult.FIRST_ORDERED_NODE_TYPE, null);
var str = node.singleNodeValue ? node.singleNodeValue.textContent : ''; 
```

应该这样做。

# regex - 使用正则表达式分隔文本

> ID：15310344
> 
> 赞同：0
> 
> 时间：2013-03-09T11:52:18.957
> 
> 标签：regex

我有一个字符串

```
abcdefangners 
```

以及一组数字，指定如何对上述字符串进行分组，例如

```
3,4 
```

在这种情况下，输出应该是

```
abc,defa,gners 
```

使用正则表达式可以实现这样的事情吗？我有一个选择是使用循环来逐个比较集合，但是有更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T11:59:17.397

你可以这样做： -

```
/(.{3})(.{4})(.*)/ 
```

这将为您提供您必须连接在一起的子字符串。

您必须为每组数字创建正则表达式，因此它不像其他字符串操作方法那么容易。

# javascript - 覆盖 tablesorter 行为

> ID：15310347
> 
> 赞同：0
> 
> 时间：2013-03-09T11:52:35.193
> 
> 标签：javascript, jquery, tablesorter

我正在尝试覆盖 tablesorter 行为，但它没有遵循我告诉它的内容。

`determineSorting`是一个确定如何对列进行排序的函数。如果我从一列单击到另一列，它将对该列进行 ASC 排序。否则，它将反转排序。假设此函数返回正确的值。

`tableSort_click`应该对表格进行排序。`columnIndex`并`sortIndex`具有正确的值，但由于某种原因，触发器是错误的。当我移动到另一列时，该列按 DESC 排序。但是，对该列的成功点击是正确的。如果是 DESC，它将成为 ASC。

不正确行为的原因可能是什么？难道是tablesorter的默认排序不能被覆盖？

```
 $('#sortable-table').tablesorter();

 $("#sortable-table th").click(tableSort_click);

function tableSort_click() {

    var sortInfo = determineSorting(this.id);

    var columnId = sortInfo.elemId;
    var sortOrder = sortInfo.sortOrder;

    if (columnId && sortOrder) {
        var columnIndex = $("#" + columnId).index();

        // determine sort index
        var sortIndex = -1;
        if ("asc" == sortOrder) {
            sortIndex = 0;
        } else if ("desc" == sortOrder) {
            sortIndex = 1;
        }

        // sort table
        if (sortIndex > -1) {
            var sorting = [[columnIndex, sortIndex]];
            $('#assign-measures').trigger("sorton",[sorting]);
        }
    }
} 
```

# python - 自动将字典转换为字典列表

> ID：15310348
> 
> 赞同：2
> 
> 时间：2013-03-09T11:53:10.173
> 
> 标签：python, list, dictionary

将以下字典的 filter[X]... 键/值自动转换为（嵌套）字典列表的最简单方法是什么。

```
{'filter[0][data][type]': u'string',
 'filter[0][data][value]': u'T',
 'filter[0][field]': u'company',
 'filter[1][data][comparison]': u'lt',
 'filter[1][data][type]': u'numeric',
 'filter[1][data][value]': u'100',
 'filter[1][field]': u'price',
 'filter[2][data][comparison]': u'gt',
 'filter[2][data][type]': u'numeric',
 'filter[2][data][value]': u'10',
 'filter[2][field]': u'price',
 'limit': u'10',
 'page': u'1',
 'sort': u'[{"property":"company","direction":"ASC"}]',
 'start': u'0'} 
```

我想要的结果如下：

```
[
  {'data': {'type': 'string', 'value': 'T'}, 'field': 'company'},
  {'data': {'comparison': 'lt', 'type': 'numeric', 'value': 100},
   'field': 'price'},
  {'data': {'comparison': 'gt', 'type': 'numeric', 'value': 10},
   'field': 'price'}
] 
```

初始字典来自从 extjs 网格过滤器插件 GET 请求传递的 Pylons

extjs 网格过滤器中还有一个选项可以对过滤器 json 进行编码，所以我最终得到：

```
{ 'filter': u'[{"type":"string","value":"T","field":"company"},{"type":"numeric","comparison":"lt","value":100,"field":"price"},{"type":"numeric","comparison":"gt","value":10,"field":"price"}]',
 'limit': u'10',
 'page': u'1',
 'sort': u'[{"property":"company","direction":"ASC"}]',
 'start': u'0'} 
```

但同样我不知道如何将这个自动转换为 python 列表和字典。

我事先不知道查询的过滤器数量，所以使用创建的字典列表我可以遍历列表并自动生成一个 sql 查询。（虽然也许有更好的方法来做到这一点？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T20:32:38.980

找到了解决方案：将过滤器作为 json 编码传递，然后只需使用 json.loads() 就可以得到一个字典列表。

```
>>> import json

>>> dict = {'filter': u'[{"type":"string","value":"T","field":"company"},{"type":"numeric","comparison":"lt","value":100,"field":"price"},{"type":"numeric","comparison":"gt","value":10,"field":"price"}]',
 'limit': u'10',
 'page': u'1',
 'sort': u'[{"property":"company","direction":"ASC"}]',
 'start': u'0'}

>>> json.loads(dict['filter'])

[{u'field': u'company', u'type': u'string', u'value': u'T'},
 {u'comparison': u'lt',
  u'field': u'price',
  u'type': u'numeric',
  u'value': 100},
 {u'comparison': u'gt', u'field': u'price', u'type': u'numeric', u'value': 10}] 
```

# linux - /etc/rcX.d 中的数字是什么意思？

> ID：15310350
> 
> 赞同：0
> 
> 时间：2013-03-09T11:53:20.067
> 
> 标签：linux, init

为了在 Linux 系统启动时自动运行程序，我必须修改 /etc/rcX.d，在 /etc/init.d 中添加一些脚本链接，我有两个问题：

1.  目录名称“/etc/rcNum.d”中的数字是什么意思？当我将链接文件添加到 rcX.d 时，应该将它们添加到哪个目录？
2.  rcX.d目录下的链接文件，名字里也有一些数字，比如，K90xxx或者S90xxx，那么数字90是什么意思呢？这是优先事项吗？那么当将其更改为更大的数字时，意味着程序将比原来更晚启动？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T15:40:55.613

使用运行级别时应该使用`chkconfig`and命令。`service`不要直接修改 rcX.d 文件夹中的文件。根据 LSB，您应该使用`chkconfig`来启用/禁用您的脚本。您的目录中通常有一个`skeleton`服务文件`/etc/init.d`，您可以使用它来创建自己的服务脚本。如果您的发行版中没有该文件，您可以复制另一个服务脚本并将其修改为您的。拥有自定义服务脚本后，您可以使用以下命令激活它（假设您的服务名为 foo）：

```
chkconfig --add foo 
```

您可以在服务脚本顶部的注释区域中指定所需的运行级别，也可以通过命令的命令行来`chkconfig`执行。

要检查服务是否已激活或确保您的服务已正确注册，您可以执行以下操作：

```
chkconfig --list foo 
```

要手动启动和停止服务，请使用以下`service`命令：

```
service foo start
service foo stop 
```

如果您使用此方法处理运行级别的初始化脚本，系统将自动在您的`rcX.d`文件夹中为每个运行级别创建正确的符号链接。请务必在您的服务脚本中正确设置依赖项，以便系统可以正确设置执行的订单号。

这里有一些链接可以帮助你更多：

*   [LSB 运行级别](http://refspecs.linuxbase.org/LSB_3.0.0/LSB-Core-generic/LSB-Core-generic/runlevels.html)
*   [LSB 初始化脚本注释](http://refspecs.linuxbase.org/LSB_3.0.0/LSB-Core-generic/LSB-Core-generic/initscrcomconv.html)
*   [LSB 初始化脚本安装](http://refspecs.linuxbase.org/LSB_3.0.0/LSB-Core-generic/LSB-Core-generic/initsrcinstrm.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-04T05:46:30.147

rcX.d 中的数字（X）是“运行级别”。运行级别与应登录系统的用户数有关。假设，运行级别 1 表示单用户。3 表示多用户，默认。

# c#-4.0 - 在 C# 中使用 SQLite 时出现错误

> ID：15310352
> 
> 赞同：0
> 
> 时间：2013-03-09T11:53:32.610
> 
> 标签：c#-4.0

我收到一个错误

> *混合模式程序集是针对运行时版本“v2.0.50727”构建的，如果没有额外的配置信息，则无法在 4.0 运行时中加载。*

我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T11:56:24.577

您需要添加一个 app.Config 文件并将 useLegacyV2RuntimeActivationPolicy 设置为 true。

这是在 .NET 4 应用程序中使用混合模式 CLR 2 程序集所必需的。

# c# - 处理不同的表示方法

> ID：15310355
> 
> 赞同：3
> 
> 时间：2013-03-09T11:53:43.830
> 
> 标签：c#, generics

我有一个以这种方式定义的基本 DataTag 类：

```
public abstract class DataTag<TRaw, TVal>
{
    public abstract TVal Value { get; }
    public TRaw RawValue { get; set; }
    public string Name { get; private set; }
    public string Desc { get; private set; }
} 
```

其中 TRaw 是从设备获取的原始数据，而 TVal 是“格式化”值。

所以我可能有来自同一设备的 2 个标签：

```
DataTag t1 = DataTag.Create<ushort,int>();
DataTag t2 = DataTag.Create<ushort[],float()>; 
```

现在我有一个类应该包含一个通用标签列表

```
private IEnumerable<DataTag<?,?> _tags(); 
```

当然 C# 不会在同一个列表中接受不同类型的泛型，但这是我想要实现的。有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T11:57:05.920

一种常见的方法是声明一个非泛型基类。当然，它不会为您提供对数据的强类型访问，但您可能会获得一个普通`object`版本和名称/描述。

```
public abstract class DataTag
{
    public string Name { get; private set; }
    public string Description { get; private set; }
    public abstract object WeakValue { get; }
    public abstract object WeakRawValue { get; }
}

public abstract class DataTag<TRaw, TVal> : DataTag
{
    public abstract TVal Value { get; }
    public TRaw RawValue { get; set; }

    public override object WeakValue { get { return Value; } }
    public override object WeakRawValue { get { return RawValue; } }
} 
```

那么你的列表只是一个`IEnumerable<DataTag>`.

笔记：

*   我为“弱类型”属性赋予了不同的名称。您*可以*使用`Value`and `RawValue`，然后在泛型类型中重新声明它们（with `new`），但这在其他方面会让人头疼。如果可以，请避免命名冲突。
*   我只提供了一个getter——`WeakRawValue`你*也可以*提供一个setter，并在泛型类型中进行强制转换，但这对我来说很难看。哎呀，我个人会尝试完全摆脱 setter，并将值作为构造函数参数传递，使类型更接近不可变。（如果任何一个泛型类型参数本身是可变类型，它就不会是“正确”不可变的，但总比没有好......）

# c - 按特定顺序使用带有分隔符的 strsep()？

> ID：15310356
> 
> 赞同：0
> 
> 时间：2013-03-09T11:53:54.387
> 
> 标签：c, token, strsep

我正在尝试使用strsep（）解析文本字符串（char *），问题是分隔符必须按顺序使用例如：第一个标记由'，'第二个由'：'......

```
sep = " ,:-,.!.";
tofree = string;

while (token = strsep(&string, " ,:-,.!."))            
{
  validate(token);
}

free(tofree); 
```

strsep() 由字符串中的任何 sep 字符分隔。在阅读了 strsep() 和 strtok_r() 之后，仍然没有找到。有没有办法在一段时间内做到这一点？任何想法都会有所帮助。塔克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T11:57:46.893

您可以`strtok()`在循环中使用一组分隔符。

*`strsep()`并且`strtok_r()`不是[ISO/IEC C11 标准](http://www.open-std.org/JTC1/sc22/wg14/www/docs/n1570.pdf)定义的功能。*

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int separate(const char *data, const char **delims) {
  char *dat = malloc(strlen(data) + 1);
  char *p;
  size_t delimindex = 0;

  if (!dat) return 1;
  strcpy(dat, data);
  p = strtok(dat, delims[delimindex++]);
  while (delims[delimindex] && p) {
    printf("%s\n", p);
    p = strtok(NULL, delims[delimindex++]);
  }
  free(dat);
  return 0;
}

int main(void) {
  const char *delims[] = {" ", ",", ":", "-", ",", ".", "!", ".", NULL};
  const char *test1 = "aaa bbb,ccc:ddd-eee,fff.ggg!hhh.iii";
  const char *test2 = "foobar";
  separate(test1, delims);
  separate(test2, delims);
  return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T11:59:58.420

您可以将分隔符放在一个数组中并一个一个地使用它们：

```
const char *seps[] = {
    ",",
    ":",
    "-",
    ",",
    ".",
    "!",
    "."
};

char str[] = "Foo,Bar:Baz-Quirk,Whatever.Foo!Bar.Baz";

char *end;
char *result;

int i;
for (i = 0; i < sizeof(seps) / sizeof(*seps); i++) {
    result = strtok_r(i ? NULL : str, seps[i], &end);
    // do stuff with `result`
    printf("%s\n", result);
} 
```

# .htaccess - RewriteRule 与某个 URL 不匹配

> ID：15310357
> 
> 赞同：0
> 
> 时间：2013-03-09T11:54:00.780
> 
> 标签：.htaccess, mod-rewrite

```
RewriteRule ^(.*)/([^\/]+)/([a-z0-9\-\_]*)/?(company|person)/?$  $1/$2/index\.php\?misc=$3&$4 
```

这不匹配`http://example.com/zufang/zjqj_2-/person/`。

我可以使用什么 RewriteRule 来匹配 `example.com/zufang/zjqj_2-/person/`和`xxx.com/zufang/person/`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T13:24:13.273

您的规则似乎试图匹配该`example.com`部分。但是，域在 RewriteRule 中不匹配。此外，由于整个第二部分是可选的，请注意您的结果可能有问题，`misc=$3&$4`因为那将是`misc=&person`第二部分不存在的情况。这是一个更新的规则，还有一些其他的小清理：

```
RewriteRule ^([^\/]+)/([a-z0-9\-\_]*)?/?(company|person)/?$  /$1/index.php?misc=$2&$3 
```

另外一项我不能 100% 确定，我认为字符不必在字符匹配块中转义。如果是这种情况，以下内容会稍微干净一些：

```
RewriteRule ^([^/]+)/([a-z0-9-_]*)?/?(company|person)/?$  /$1/index.php?misc=$2&$3 
```

# ios - uiimageview旋转，不在中心旋转

> ID：15310368
> 
> 赞同：1
> 
> 时间：2013-03-09T11:55:29.737
> 
> 标签：ios, uiimageview, rotation

我正在尝试为我的一个项目设置仪表。

我有两张图片。一个是仪表背景，第二个是指针。

手是 110 像素 X 110 像素的图像，其中手的中心位于图像的中心。

我将图像加载到 uiimageview。

当我尝试这样做时：

```
imageViewHand.transform = CGAffineTransformMakeRotation(4*[slider value]); 
```

我得到一个旋转，但旋转中心不是图像的中心。

uiimageview 是 110px X 110px 并且模式是中心。

任何想法我做错了什么？

我直接通过情节提要加载手部图像。

还有一个问题，如果我使用 imageViewHand.layer.anchorPoint = CGPointMake(0.25, 0.25); 改变针点，有什么办法可以表明这一点？只是为了获得正确的偏移量？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-29T05:07:16.683

我花了一些时间来了解自动布局的含义以及如何将其关闭：

[http://www.goodbyehelicopter.com/2012/02/arggh-xcode-4-3-auto-layout-is-on-by-default-how-to-turn-off-auto-layout/](http://www.goodbyehelicopter.com/2012/02/arggh-xcode-4-3-auto-layout-is-on-by-default-how-to-turn-off-auto-layout/)

# java - 不允许使用 Math.pow 时计算指数？

> ID：15310375
> 
> 赞同：1
> 
> 时间：2013-03-09T11:56:21.883
> 
> 标签：java, pow

我需要编写一个名为的方法`pow2`，它接受一个实数基数和一个整数指数作为参数。它应该将升高的底座恢复到给定的功率。您的代码应该适用于正指数和负指数。例如，调用`pow2(2.0, -2)`返回`0.25`. 不要在您的解决方案中使用 Math.pow。

这是我到目前为止所拥有的：

```
public double pow2(double x,int y){
    double total=1;
    for(int i=1;i<=y;i++){
        total*=x;
    }
    return total;
} 
```

但问题是当我尝试调用时`pow(2.0, -2)`，它会返回 1.0。我该如何实现这个方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T12:06:41.013

你必须分支，这取决于你是负值还是正值。

这是一个适用于递归的版本：

```
public double pow2(double x,int y){
    return _pow2(1.0, x, y);
}

private double _pow2(double res, double x, int y) {
    if (y < 0) return _pow2(res/x, x, y+1);
    if (y > 0) return _pow2(res*x, x, y-1);
    return res;
} 
```

如果`y`太大或太小，那么您将遇到堆栈溢出，因此将其更改为非递归函数留给操作。

**编辑**：关于你的最后一个问题，你将结果设置为`1.0`，循环的主体从未使用过，因为`!(1 <= -2)`，所以你返回未修改的结果`1.0`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T12:20:50.387

好吧，最后，如果您想以迭代的方式进行操作，只需先检查`y`是正数还是负数。

```
public double pow2(double x, int y)
{
    double total = 1.0;

    if(y > 0)
    {
        for(int i = 1 ; i <= y ; i++)
        {
            total *= x;
        }
    } 
    else 
    {
        for(int i = -1 ; i >= y ; i--)
        {
            total /= x;
        }
    }
    return total;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-09T12:23:51.440

```
public static double pow2(double x,int y){
    double total=1;
    if(y>0){
    for(int i=1;i<=y;i++){
        total*=x;
    }
    return total;
    }
    else if (y<0){
        double temp=1/x;//this makes 2 as 1/2
        y=y*-1;         //to have a meaningful iteration if for loop
        for(int i=1;i<=y;i++){
            total*=temp;
        }   
        return total;
    }else
        return 1;
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-09T12:04:17.183

```
public static void main(String[] args) {

    System.out.println(pow2(2,3));

}

public static double pow2(double x,int y){
    double total=1;
    for(int i=1;i<=y;i++){
        total*=x;
    }
    return total ;
} 
```

# c++ - 在 openCV 中查看 8 位 RAW 图像文件

> ID：15310376
> 
> 赞同：1
> 
> 时间：2013-03-09T11:56:22.820
> 
> 标签：c++, opencv, image-processing, binary-data

我有一个原始文件，其中包含 5 个字节的标头，其中包含每个前两位的行数和列数。第 5 个字节包含图像中每个像素的位数，在所有情况下都是 8 位。之后是图像数据。

由于我是openCV的新手，我想问一下如何使用C++将这个RAW图像文件作为灰度图像查看？

我知道如何在 C++ 中读取二进制数据并将图像存储为二维无符号字符数组（因为每个像素都是 8 位）。

谁能告诉我如何使用 openCV 将这些数据作为图像查看？

我正在使用下面的代码，但得到一个完全奇怪的图像：

```
void openRaw() {
    cv::Mat img(numRows, numCols,CV_8U,&(image[0][0]));
    //img.t();
    cv::imshow("img",img);  
    cv::waitKey();
} 
```

任何帮助将不胜感激。

谢谢，罗希特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T12:00:10.017

您必须将其转换为 IplImage。

如果您想将其视为纯灰度图像，它实际上相当容易。

我在一个应用程序中使用的示例代码：

```
CvSize mSize;
mSize.height = 960;
mSize.width = 1280;

IplImage* image1 = cvCreateImage(mSize, 8, 1);
memcpy( image1->imageData, rawDataPointer, sizeOfImage);
cvNamedWindow( "corners1", 1 );
cvShowImage( "corners1", image1 ); 
```

此时您有一个有效的 IplImage，然后您可以显示它。（最后两行代码显示它）

如果图像是拜耳平铺的，则必须转换为 RGB。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T07:52:47.733

c++ 符号：

```
cv::Mat img(rows,cols,CV_8U,ptrToDat);
cv::imwhow("img",img);
cv::waitkey(); 
```

*数据应按列保存，否则使用：

```
cv::Mat img(cols,rows,CV_8U,ptrToDat);
img=img.t();
cv::imwhow("img",img);
cv::waitkey(); 
```

# php - Mysql查询针对类别显示同一列两次

> ID：15310380
> 
> 赞同：0
> 
> 时间：2013-03-09T11:56:47.347
> 
> 标签：php, mysql, sql

我有一个表名用户，在这个表中用户有他们的名字和类别（例如：学生，员工）。

现在我想将其他表中的用户显示为按类型分隔的用户，就像所有学生用户将显示在学生列中，所有员工用户将显示在员工列中。

例子 ：

用户表：

```
Name       Category
John       Student
Jack       Student
Fred       Employee 
```

输出表：

```
ID    Student    Employee
1     John     
2     Jack
3                 Fred 
```

显示该表的查询将是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T12:00:18.307

```
SELECT  ID,
        MAX(CASE WHEN Category = 'Student' THEN Name ELSE NULL END) Student,
        MAX(CASE WHEN Category = 'Employee' THEN Name ELSE NULL END) Employee
FROM    User
GROUP   BY ID 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/903fa/1)

结果

```
╔════╦═════════╦══════════╗
║ ID ║ STUDENT ║ EMPLOYEE ║
╠════╬═════════╬══════════╣
║  1 ║ John    ║ (null)   ║
║  2 ║ Jack    ║ (null)   ║
║  3 ║ (null)  ║ Fred     ║
╚════╩═════════╩══════════╝ 
```

**更新 1**

如果您有其他类别，则首选*动态 sql ，*

```
SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT
    CONCAT(
      'MAX(case when Category = ''',
      Category,
      ''' then Name end) AS ',
      Category
    )
  ) INTO @sql
FROM User;

SET @sql = CONCAT('SELECT  ID, ', @sql, ' 
                    FROM    User
                    GROUP   BY ID');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/903fa/3)
*   [SQLFiddle Demo（*同其他类*）](http://www.sqlfiddle.com/#!2/d0253/1)

# python - 从 ASP Classic 访问 Python Wrapper

> ID：15310391
> 
> 赞同：0
> 
> 时间：2013-03-09T11:58:16.003
> 
> 标签：python, iis, asp-classic

我已经为 ac dll 编写了一个 python 包装器。

我现在希望通过 ASP 经典脚本与这个包装器进行交互，通过 IIS7 在线提供服务。

你会如何建议我这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T08:34:52.097

如果它是 Python 包装器，则需要 Python 才能使用它。您可以使用 Python 作为 ASP 的脚本语言，我推荐 activestate 的 Python 发行版，因为它默认与 Windows 和 IIS 集成。

您应该能够用 Python 编写一个 ASP 页面并在其中加载您的库。 [这是](http://docs.activestate.com/activepython/2.4/pywin32/ASP_and_Python.html)有关从 ASP 使用 Python 的更多信息。

甚至应该可以在 VBscript 中编写一个页面并在 Python WSC（Windows 脚本组件）中调用一段 Python 代码。[我对此进行了大量研究](https://stackoverflow.com/questions/3879788/how-to-debug-python-inside-a-wsc)，它很有效，但如果你想这样做，你只能将简单的数据类型从一种语言传递到另一种语言（字符串、布尔值、数字）

# ruby-on-rails - Rails turbolinks长请求不显示页面加载

> ID：15310392
> 
> 赞同：9
> 
> 时间：2013-03-09T11:58:19.973
> 
> 标签：ruby-on-rails, turbolinks

在 Rails 中使用 turbolinks，如果请求需要很长时间，无论是否预期，浏览器都没有通常的提示来显示任何事情都在发生。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-09T11:58:19.973

我创建了一个要点，它使用一个加载对话框来解决这个问题，如果请求花费超过 500 毫秒，该对话框会自动弹出，这是可配置的。

[https://gist.github.com/cpuguy83/5016442](https://gist.github.com/cpuguy83/5016442)

```
@PageSpinner =
  spin: (ms=500)->
    @spinner = setTimeout( (=> @add_spinner()), ms)
    $(document).on 'page:change', =>
      @remove_spinner()
  spinner_html: '
    <div class="modal hide fade" id="page-spinner">
      <div class="modal-head card-title">Please Wait...</div>
      <div class="modal-body card-body">
        <i class="icon-spinner icon-spin icon-2x"></i>
        &emsp;Loading...
      </div>
    </div>
  '
  spinner: null
  add_spinner: ->
    $('body').append(@spinner_html)
    $('body div#page-spinner').modal()
  remove_spinner: ->
    clearTimeout(@spinner)
    $('div#page-spinner').modal('hide')
    $('div#page-spinner').on 'hidden', ->
      $(this).remove()

$(document).on 'page:fetch', ->
  PageSpinner.spin() 
```

# javafx-2 - 使用 FileChooser 以默认文件名保存文件

> ID：15310393
> 
> 赞同：5
> 
> 时间：2013-03-09T11:58:22.530
> 
> 标签：javafx-2

我想保存一个文件。我用这个。

```
FileChooser fileChooser = new FileChooser();
File file = fileChooser.showSaveDialog(null); 
```

但是在对话框中我想为文件建议一个名称，以便用户只为给定文件选择一个目录。文件的名称是已知的。所以我想建议该文件名。

谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-01-14T17:00:56.280

这现在在 Javafx 2.2.45（现在与 java 7.0_45 捆绑）中得到修复，您可以使用以下 fileChooser 属性 setInitialFilename 执行 OP 建议的操作，如下所示：

```
 FileChooser myFile = new FileChooser();
        myFile.setInitialFileName("Whatever_file_I_want.coolFile"); 
```

现在，我认为无论如何都不会阻止用户选择不同的文件，但至少这会给他们一个您希望他们选择的默认值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-09T12:47:01.583

提供初始文件名 - 它需要通过本机调用将您的字符串（初始名）传输到本机文件选择器的调用。这是一件复杂的事情，您可以查看有关其实施的这些问题：

[http://javafx-jira.kenai.com/browse/RT-16111](http://javafx-jira.kenai.com/browse/RT-16111)（主要一）

[http://javafx-jira.kenai.com/browse/RT-24588](http://javafx-jira.kenai.com/browse/RT-24588)

[http://javafx-jira.kenai.com/browse/RT-24612](http://javafx-jira.kenai.com/browse/RT-24612)

它们都有修复版本 lombard，所以，它们在 JDK 8 中是固定的。

因此，您可以指定文件的初始文件名，从 JDK 8 开始（您可以访问它，下载 JDK 早期访问）。

最近，我测试了这个功能，它正在工作。

有一个方法 setInitialName() 或类似的东西。

而且，正如我所提到的，它是一件复杂的事情，你不可能自己实现它（直到你能够构建 jfx）。

因此，决定 - 等到 JDK8 发布，或者使用早期访问版本。或者，使用您自己的文件选择器实现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-27T13:03:21.570

这是一个对我有用的解决方法：

您可以使用 javafx.stage.DirectoryChooser 为要保存的文件选择一个目录，并在保存后在该目录中创建一个具有默认名称和扩展名的新文件。

```
DirectoryChooser dc = new DirectoryChooser();
File file = dc.showDialog(null);
if (file != null) {
            file = new File(file.getAbsolutePath() + "/dafaultFilename.extension");} 
```

# javascript - 如何在 d3 Javascript 图中设置 x 轴值？

> ID：15310399
> 
> 赞同：2
> 
> 时间：2013-03-09T11:58:37.213
> 
> 标签：javascript, graph, d3.js

我正在使用 d3 JS 库来绘制一些图表。它工作正常，但我陷入了一个我一直在努力解决一个小时的奇怪问题 - 我无法设置 x 轴值。这是图表（我添加了一个警报，将显示数据格式）：

[http://jovansfreelance.com/bikestats/d3/tipsy.php](http://jovansfreelance.com/bikestats/d3/tipsy.php)

我希望 x 轴显示年份，但由于某种原因，我在代码中看不到任何地方，而是使用十进制值，所以它不是 2006，而是 .006 - 我不知道这是从哪里出现的，就像它取出第一个数字并将其余数字除以 100 一样？！

如果有人可以将我指向正在执行此操作的代码行，那很好，我可以从那里获取它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T21:57:01.757

正如另一个答案中所指出的，处理时间值的更好方法是显式使用时间尺度。但是，要达到您想要的效果，明确指定 x 轴的格式就足够了。也就是说，对

```
var xAxis = d3.svg.axis()
        .scale(x)
        .tickSize(h - margin * 2)
        .tickPadding(10)
        .ticks(7) 
```

添加

```
.tickFormat(d3.format("d")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T23:26:50.907

可能与此[parseDate = d3.time.format("%Y") 不起作用有关](https://stackoverflow.com/questions/13769923/parsedate-d3-time-formaty-not-working)

如果是这样，您可能需要

```
d3.svg.axis()
   .scale(x)
   .tickSize(h - margin * 2).tickPadding(10).ticks(7)
   .tickFormat(function(d) { return d.toString(); }); // force the date value into a string 
```

或者，如果您需要解析日期

```
 .tickFormat(function(d) { 
      var fmt = d3.time.format("%Y"); 
      return format.parse(d).toString() 
    }); 
```

# css - 当窗口非常窄时，响应式 3 列页面最后一列跳下

> ID：15310400
> 
> 赞同：0
> 
> 时间：2013-03-09T11:58:49.460
> 
> 标签：css, responsive-design

html是：

```
<div id="container">

<div id="top-bar">Top Bar</div>    
<div id="nav-bar">
    <a>Blah 1</a>
    <a>Blah 2</a>
    <a>Blah 3</a>
</div>

<div id="main">
    <div id="column-left">
        column left
    </div>
    <div id="column-right">
        column right
    </div>
     <div id="column-right-adsense">
        column right adsense
    </div>
    <div class="spacer"></div>
</div>

<div id="footer">footer</div> 
```

而CSS是：

```
#container {
/* width: 500px; */
border: 1px solid black;
}

#top-bar {
height:60px;
border: 1px solid red;    
}

#column-left {
border: 1px solid blue;    
width: 40%; /* 200 / 500 */
 float: left;
}

#column-right {
    border: 1px solid yellow;    
    width: 40%; /* 200 / 500 */
    float: left;
}
#column-right-adsense {
        border: 1px solid cyan;    
width: 18%; /* 90 / 500 */
 float: left;

}

.spacer {
    clear:both;
} 
```

正如你在[这个小提琴](http://jsfiddle.net/sbel/cVdwE/)上看到的那样，当你调整窗口的大小时，最后一列会向下跳。我怎样才能防止这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T12:18:32.977

您可以签出类似 bootstrap.js 的内容，这将有助于创建这样的页面。

[引导程序](http://twitter.github.com/bootstrap/ "推特引导")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T12:10:53.657

它固定在这里，

检查，[http://jsfiddle.net/cVdwE/2/](http://jsfiddle.net/cVdwE/2/)

```
#column-left {
border: 1px solid blue;     margin:-1px;
width: 40%; /* 200 / 500 */
 float: left;
}

#column-right {
    border: 1px solid yellow;   margin:-1px;  
    width: 40%; /* 200 / 500 */
    float: left;
}
#column-right-adsense {
        border: 1px solid cyan;   margin:-1px;  
width: 20%; /* 90 / 500 */
 float: left;

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T12:15:07.263

发生这种情况是因为 1px 实心边框。

您可以通过两种不同的方式修复：

1.  从第三列中删除`width: 18%;`和添加`float: left;``overflow: hidden;`
2.  添加`box-sizing`到三列

这是一个例子[http://jsfiddle.net/5666G/](http://jsfiddle.net/5666G/)

您绝对应该阅读有关[CSS Box 模型](http://www.w3.org/TR/CSS2/box.html)和[Float 包含的内容](http://colinaarts.com/articles/float-containment/)

# java - Image View 在代码中设置Image Resource

> ID：15310405
> 
> 赞同：1
> 
> 时间：2013-03-09T11:59:17.947
> 
> 标签：java, android, image, android-layout, image-processing

我有一个 imageView，我想显示您当前所在国家的一个小图标。我可以获得国家代码，但问题是我无法动态更改 imageView 资源。我的图像文件都是小写的

```
 String lowerCountryCode = countryCode.toLowerCase();
    String resource = "R.drawable." + lowerCountryCode;
    img.setImageResource(resource);
int id = getResources().getIdentifier(lowerCountryCode, "drawable", getPackageName());
setImageResource(id); 
```

abve 是我的代码。

现在，这当然行不通，因为 set Image Resource 需要一个 int，那么我该怎么做呢？提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T12:21:16.990

我的意思是你知道你想在一个国家和另一个国家使用的文件的名称（Drawable）。

```
ImageView imgView=(ImageView)findViewById(R.id.imageView1);
int id = getResources().getIdentifier(lowerCountryCode.toLowerCase(), "drawable", getPackageName());
imgView.setImageDrawable(res.getDrawable(id)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T12:13:11.177

以下代码应该可以正常工作（假设您的文件夹中确实有一个带有名称`lowerCountryCode`的`res/drawable/`文件）

```
String lowerCountryCode = countryCode.toLowerCase();
int id = getResources().getIdentifier(lowerCountryCode, "drawable", getPackageName());
ivCard[0].setImageResource(id); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T12:10:30.477

我用那个代码....

```
ImageView[] ivCard = new ImageView[1];

@override    
protected void onCreate(Bundle savedInstanceState)  

ivCard[0]=(ImageView)findViewById(R.id.imageView1); 
```

# vim - Vim：如何在 1 个键中转到字符序列 `django/db/loaders.py` 的开头和结尾。（或任何没有空格的字符序列）

> ID：15310409
> 
> 赞同：0
> 
> 时间：2013-03-09T11:59:50.527
> 
> 标签：vim

我用`e`and`b`分别表示单词的结尾和开头。但是**如何在没有空格的情况下到达任何字符序列的结尾和开头？**

*示例*：从第一个字符 (d) 右侧的光标开始， `django/db/loaders.py`需要 7 次按键！是否有一个 vim 命令可以在 1 个键中到达 char 序列的末尾？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T12:11:47.680

您必须使用`W`,`B`和来`E`阅读`:h WORD`单词和 WORD 之间的区别。

# c# - 如何通过我的网络应用程序或通用处理程序使用 httpwebrequest 登录网站并访问内容？

> ID：15310410
> 
> 赞同：0
> 
> 时间：2013-03-09T11:59:54.067
> 
> 标签：c#, asp.net, httpwebrequest

基本上我只为我的大学生制作一个聊天应用程序，为此我必须通过检查 UMS（大学管理系统）的详细信息来确保他们是真实的，并获取他们的基本详细信息，以便他们真正聊天。我几乎完成了我的聊天应用程序，只剩下登录名。

所以我想通过我的网站从通用处理程序登录到我的 UMS 页面。然后导航到其中的另一个页面以访问保持会话活动的基本信息。

我对 httpwebrequest 进行了研究，但未能使用我的凭据登录。

[https://ums.lpu.in/lpuums](https://ums.lpu.in/lpuums) （在 asp.net 中制作）

我确实尝试过其他帖子中的登录代码。

我是这部分的新手，所以请耐心等待.. 任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T12:16:02.933

如果没有通过定义的 API 与 UMS 进行实际握手，您最终会抓取 UMS html，由于各种原因，这很糟糕。

我建议您阅读[Single Sign On (SSO)](http://en.wikipedia.org/wiki/Single_sign-on)。

关于 SSO 和 ASP.NET 的几篇文章 - 1\. [Codeproject](http://www.codeproject.com/Articles/27576/Single-Sign-on-in-ASP-NET-and-Other-Platforms) 2\. [MSDN](http://msdn.microsoft.com/en-us/library/dd577079.aspx) 3\. [asp.net forum](http://forums.asp.net/t/1139783.aspx/1)

**编辑 1**

虽然，我认为这是一个坏主意，因为你说你没有选择，[这里](http://refactoringaspnet.blogspot.in/2010/04/using-htmlagilitypack-to-get-and-post.html)有一个链接显示[Html Agility Pack](http://htmlagilitypack.codeplex.com/)如何帮助抓取网页。

当心屏幕抓取的缺点，UMS 的更改不会传达给您，您会发现您的应用程序突然无法运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T12:40:55.493

```
public string Scrap(string Username, string Password)
    {
        string Url1 = "https://www.example.com";//first url
        string Url2 = "https://www.example.com/login.aspx";//secret url to post request to

        //first request
        CookieContainer jar = new CookieContainer();
        HttpWebRequest request1 = (HttpWebRequest)WebRequest.Create(Url1);
        request1.CookieContainer = jar;
        //Get the response from the server and save the cookies from the first request..
        HttpWebResponse response1 = (HttpWebResponse)request1.GetResponse();

        //second request
        string postData = "***viewstate here***";//VIEWSTATE
        HttpWebRequest request2 = (HttpWebRequest)WebRequest.Create(Url2);
        request2.CookieContainer = jar;
        request2.KeepAlive = true;
        request2.Referer = Url2;
        request2.Method = WebRequestMethods.Http.Post;
        request2.Accept = "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8";
        request2.UserAgent = "Mozilla/5.0 (Windows NT 6.1) AppleWebKit/535.2 (KHTML, like Gecko) Chrome/15.0.874.121 Safari/535.2";
        request2.ContentType = "application/x-www-form-urlencoded";
        request2.AllowWriteStreamBuffering = true;
        request2.ProtocolVersion = HttpVersion.Version11;
        request2.AllowAutoRedirect = true;

        byte[] byteArray = Encoding.ASCII.GetBytes(postData);
        request2.ContentLength = byteArray.Length;

        Stream newStream = request2.GetRequestStream(); //open connection
        newStream.Write(byteArray, 0, byteArray.Length); // Send the data.
        newStream.Close();

        HttpWebResponse response2 = (HttpWebResponse)request2.GetResponse();
        using (StreamReader sr = new StreamReader(response2.GetResponseStream()))
        {
            responseData = sr.ReadToEnd();
        }

        return responseData;
    } 
```

这是对我有用的代码，任何人都可以添加链接和视图状态以供 asp.net 网站报废，您也需要处理 cookie。对于其他网站（非 asp.net），它们不需要视图状态。使用 fiddler 查找添加标题和视图状态或 cookie 所需的内容。如果有人遇到问题，希望这会有所帮助。:)

# sql - 参考数据完整性

> ID：15310413
> 
> 赞同：-1
> 
> 时间：2013-03-09T12:00:02.697
> 
> 标签：sql, sql-server

我正在研究 sql 中的参照数据完整性。

我想创建一个我有三个表名的场景`branch1`，`branch2`并且`branch3`。`Branch2`并`Branch3`与`branch1`带有外键的表连接。

现在我想在表上创建一个系统，`branch1`如果我在表中插入“活动”，`branch1`并且`branch2`表`branch3`将能够在表中插入，当我在表中插入“非活动”时`branch1`，其他 2 个表将无法在表中插入任何东西桌子。

这一切都想用参照数据完整性来创建。

所以请帮助我，我已经尝试过，但我没有成功

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T12:13:43.830

您可以使用触发器。

一个触发器`BRANCH2`，`BRANCH3`可用于`ACTIVE`在您的`BRANCH1`表中检查。如果存在，则插入可以继续，如果不存在，则可以取消插入。

有关语法，请参阅[MSDN Create Trigger](http://msdn.microsoft.com/en-us/library/ms189799.aspx) doco。

这是我在快速谷歌上找到的教程：[SQL 触发器简介@SQL 团队](http://www.sqlteam.com/article/an-introduction-to-triggers-part-i)

* * *

如果您还需要控制参照完整性，也可以使用触发器——例如，如果从一个表中删除父记录，则该表上的触发器可以首先从其他表中删除子记录，以确保约束不会阻塞删除。

但是，由于您的问题中没有描述真正的父/子关系，我看不出参照完整性是如何应用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T12:07:42.007

表不会将数据插入到其他表中。查询可以。您始终可以在查询中添加“where”子句以使更新有条件。

# ruby - 选择第二个下拉值 Watir-Webdriver

> ID：15310415
> 
> 赞同：1
> 
> 时间：2013-03-09T12:00:07.280
> 
> 标签：ruby, watir

## 设计：

第一个下拉菜单：

```
<select id="MainContent_drpVehicleType" style="width:175px;" name="ctl00$MainContent$drpVehicleType">
<option value="">- SELECT -</option>
<option value="1" title="AUTO">AUTO</option>
<option value="2" title="HD">HD</option>
<option value="3" title="MARINE">MARINE</option>
</select> 
```

第二个下拉：

```
<select id="MainContent_drpMake" style="width:175px;" name="ctl00$MainContent$drpVehicleType">
<option value="1" title="ACURA">ACURA</option>
<option value="2" title="ALFA ROMEO">ALFA ROMEO</option>
<option value="74" title="ALLIS CHALMERS LIFT TRUCK">ALLIS CHALMERS LIFT TRUCK</option>
<option value="75" title="ALLIS CHALMERS TRACTOR">ALLIS CHALMERS TRACTOR</option>
<option value="4" title="AMERICAN MOTORS">AMERICAN MOTORS</option
</select> 
```

## 用于执行的代码：

```
b.select_list(:id, "MainContent_drpVehicleType").select("AUTO")

b.select_list(:id, "MainContent_drpMake").select("ACURA") 
```

也试过

```
`b.select_list(:id, "MainContent_drpMake").wait_until_present.option(:text, 'ACURA')` 
```

**我的问题是能够从第一个下拉列表中选择“AUTO”，而无法从第二个下拉列表中选择“ACURA”

## 执行时出错：

```
C:/Ruby193/menu.rb:23:in `<main>': 
C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-webdriver-0.6.2/lib/watir-webdriver/el
ements/select.rb:218:in `no_value_found': "ACURA" not found in select list (Wati
r::Exception::NoValueFoundException)
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-webdriver-0.6.2/lib/watir
-webdriver/elements/select.rb:152:in `rescue in select_by_string'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-webdriver-0.6.2/lib/watir
-webdriver/elements/select.rb:149:in `select_by_string'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-webdriver-0.6.2/lib/watir
-webdriver/elements/select.rb:131:in `select_by'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-webdriver-0.6.2/lib/watir
-webdriver/elements/select.rb:64:in `select'
        from C:/Ruby193/menu.rb:23:in `<main>'** 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T13:56:30.727

听起来您的第二个下拉列表是在选择第一个下拉列表值后填充的。在这种情况下，您需要等待第二个下拉列表被填充（而不是第二个下拉列表出现）。

您可以等待特定选项出现，然后通过执行以下操作进行设置：

```
#The option element that you want:
option = b.select_list(:id, "MainContent_drpMake").option(:text => "ACURA")

#Wait for the option to appear
option.wait_until_present

#Set the option
option.select 
```

或者，如果您想在一行上完成，您可以使用`when_present`：

```
b.select_list(:id, "MainContent_drpMake").option(:text => "ACURA").when_present.select 
```

# bash - BASH 脚本在 crontab 中无法正常工作

> ID：15310416
> 
> 赞同：0
> 
> 时间：2013-03-09T12:00:08.207
> 
> 标签：bash, cron, screen-capture

当我从 crontab 执行时，我的 bash 脚本的下一行不会将输出写入`/tmp/DPE_SC/LoadUnits/ttx/bin/deasn9 -b -a cdrr6 $fnames`文件。`$dst_dir"/"$fstat"-"$fnames".txt`它只创建一个名为`$dst_dir"/"$fstat"-"$fnames".txt` Sure it 的空文件，它可以手动从命令行正常工作。

> /tmp/DPE_SC/LoadUnits/ttx/bin/deasn9 -b -a cdrr6 $fnames > $dst_dir/$fstat-$fnames.txt

我的错误是什么？

这是我的整个剧本

> #!/bin/bash
> 
> 导出 PATH=/tmp/DPE_SC/LoadUnits/ttx/bin:/usr/local/bin:/usr/bin:/bin:/usr/local/sbin:/usr/sbin:/sbin:/tmp/DPE_SC/Tools :/usr/X11R6/bin
> 
> src_dir=/充电/chsLog/就绪
> 
> dst_dir=/核心/cdr
> 
> cd $src_dir
> 
> 最后一个文件=`cat $dst_dir/last_cdr.txt`
> 
> 文件名=`ls -t | grep ^chsLog`
> 
> fcounter=1
> 
> 对于 $filenames 中的 fname
> 
> ```
>  do
> 
>              fstat=`stat -c %y ${fnames} | cut -d '.' -f1`
> 
>              fstat=`echo ${fstat//[^0-9]/}`
> 
>              if [[ $fstat -gt $lastfile ]]
> 
>              then
> 
>                      if [[ $fcounter -eq 1 ]]
> 
>                      then
> 
>                              echo $fstat > $dst_dir/last_cdr.txt
> 
>                              let "fcounter = $fcounter + 1"
> 
>                      fi
> 
>                      deasn9 -b -a cdrr6 ${fnames} > $dst_dir/$fstat-${fnames}.txt
> 
>              fi
> 
>      done 
> ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T12:10:35.717

请记住，您的`.profile`, `.bashrc`, 等。人。不能从 cron 内部获得。

环境变量必须直接在 crontab 中定义。

例如

```
fstat=myValue
fname=aName
@hourly myJob ${fstat} ${fname} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T06:29:39.530

我发现我错了。cdrr6 不仅是选项。它是 cdr 格式化库。然后我从 scipt 导出 LIB 路径。现在它工作得很好。

# perl - 如何从输入文件中读取令牌？

> ID：15310422
> 
> 赞同：-1
> 
> 时间：2013-03-09T12:00:44.103
> 
> 标签：perl

我有一个输入，它看起来像这样

输入文件

```
ID                   Score1  Score2
ABC                     1      2
DEF                     30     50 
```

我想得到每行的ID和两个分数，我成功了，但是我想问有没有什么函数可以得到一个单词？这意味着我调用这个函数三次然后我可以得到 ID 和两个分数....

```
while( eof(Input) !=1)
{
    $C = getc(Input);
    if($C eq "\n")
    {
        $Signal = 0;
        print Output @Elements;
        print Output "\n";
        @Elements = ();
    }
    elsif($C ne " ")
    {
        if($Signal == 1)
        {
            push(@Elements,"-");
            $Signal = 0;
        }
        push(@Elements,$C);
    }
    else
    {
        $Signal = 1;
    }
} 
```

我找到

```
$Line = readline(*Input);
@Line_elements = split(" ",$Line); 
```

能行得通 .....

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T12:17:04.700

我不确定到底应该输出什么（更好的是提供精确的样本输入和精确的样本输出，但是如果您只想要以女巫字符串 id 开头的行，然后是两个数字分数，则可以使用类似的东西：

```
while ( $line = <STDIN> ) {
  my ($id, $score1, $score2) = ( $line =~ /^([A-Z]+)\s+([0-9]+)\s+([0-9]+)$/ );
  print $id;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T12:04:02.857

你也可以这样做：

```
my ($id, $score1, $score2) = split / +/, $Line; 
```

//+/是正则表达式；它关心一个或多个空格

# c++ - 指向数组参数的双指针错误

> ID：15310423
> 
> 赞同：2
> 
> 时间：2013-03-09T12:00:45.497
> 
> 标签：c++, dynamic-arrays

```
int main (void)
{
    int** arr = new int*[4];
    for (int i = 0; i < 4; i++) arr[i] = new int[4] {1, 0, 0, 1};

    const int* p = &(arr[0][0]);

    TFigure* test = new TFigure(arr, 4, 4);
    test->resolve();

    for (int i = 0; i < 4; i++) delete[] arr[i];
    delete[] arr;

    return 0;
} 
```

其中构造函数声明是第 57 行：

```
TFigure(int **ia, int n, int m)
    N = n;
    M =m;

    landscape = new int*[n];
    puddles = new int*[n];
    for (int i = 0; i < n; i++){
        landscape[i] = new int[m];
        puddles[i] = new int[n];
        for (int j = 0; j < m; j++)
            landscape[i][j] = *ia[i][j];
        }

    for (int i = 0; i < n; i++)
        for (int j = 0; j < 0; j++)
            if (i == 0 || i == N || j == 0 || j == M)
                puddles[i][j] = 0;
            else
                puddles[i][j] = 1;

    for (int i = 0; i < N; i++){
    for (int j = 0; j < M; j++)
    std::cout << puddles[i][j] << ' ';
    std::cout << std::endl;
    }
    for (int i = 0; i < N; i++){
    for (int j = 0; j < M; j++)
    std::cout << landscape[i][j] << ' ';
    std::cout << std::endl;
    }

}; 
```

但我有一个错误

> 57:43：错误：一元的无效类型参数`«*»`（有`«int»`）

我不明白这是什么原因造成的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T12:13:42.170

问题在于这一行：

```
landscape[i][j] = *ia[i][j]; 
```

`ia[i][j]`给你一个`int`然后你尝试取消引用。看起来你真的只是想要：

```
landscape[i][j] = ia[i][j]; 
```

我不确定这是否是复制和粘贴时的错误，但是您的构造函数定义缺少一个 opening `{`。

```
TFigure(int **ia, int n, int m) {
//                         Here ^ 
```

# php - 使用存储过程的 PHP 报告

> ID：15310426
> 
> 赞同：-1
> 
> 时间：2013-03-09T12:01:23.243
> 
> 标签：php, mysql, stored-procedures, mysqli, report

如何使用存储过程在 php 中制作报告？根据我的搜索，存储过程使用 mysqli 而不是 mysql。所以我很困惑这是否可能。你能给我一个如何实现这个的例子吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T12:28:45.363

如果你想在 MySQL 中调用一个存储过程，两者都`mysql`可以`mysqli`做到。虽然，无论如何我都会推荐`mysqli`，因为它更好（因此`i`; '改进'；我认为）。

您可以像调用 PHP 中的任何其他 SQL 语句一样调用存储过程：

```
mysqli_query($link, "CALL Procedure('$strVar', $intVar, etc.)"); 
```

虽然我的示例使用`mysqli_query`,`mysql_query`也可以。

无法从 PHP 内部创建存储过程，因为虽然 PHP 确实`multi_query()`在其`mysqli`对象上有一个函数，但它只允许`;`作为分隔符。这很糟糕，因为您将*在*存储过程中需要它，但 PHP 会将它们作为单独的查询执行。

以 MySQL 中的一个存储过程为例：

```
DELIMITER $$
DROP PROCEDURE IF EXISTS `Procedure`$$
CREATE PROCEDURE `Procedure` (
    IN `userid` INT
)
    IF EXISTS (SELECT 1
        FROM `users`
        WHERE `user_id` = `userid`)
    THEN
        SELECT `user_name`
        FROM `users`
        WHERE `user_id` = `userid`;
    ELSE
        SELECT `user_name` = 'No such user';
    END IF;
END $$ 
```

请注意您需要如何重命名定界符（标准定界符是`;`），因为它在存储过程中使用（因为一个过程是多个查询，必须由这样的定界符分隔）。 `$$`是通常推荐的分隔符重命名。

如果我从 PHP 内部运行这个 SQL，使用`multi_query()`，它会将我的查询拆分`;`为五个查询的结果，这都会有语法错误（因为它们是片段）。

因此，要创建存储过程，请为此编写一个 .sql 脚本。然后从终端运行您的脚本：

```
$ mysql --user="$USER" --password="$PASSWORD" $DB < $FILE 
```

如果你想了解更多关于 MySQL 存储过程的知识，我建议你在网上搜索一下，那里有很多优秀的教程。但是与常规 SQL 语句相比，您不需要任何特殊的魔法就可以从 PHP 调用它们。

# visual-studio - 如何使用 NuGet 包添加对 _Layout.cshtml 的脚本引用？

> ID：15310429
> 
> 赞同：4
> 
> 时间：2013-03-09T12:01:38.050
> 
> 标签：visual-studio, nuget, nuget-package

我有一个名为“SelectionOtherInput”的助手，用于在用户在选择列表中选择“其他”时捕获有意义的值。

我已经为它构建了一个 NuGet 包，只要在使用它的页面中有对它的 JavaScript 文件的引用，或者在`_Layout.cshtm file`. 告诉用户“安装 NuGet 包，然后添加此脚本引用”很容易，但为什么不告诉他们，“复制这些文件，然后添加此脚本引用？” 并跳过 NuGet？

我意识到编辑文件可能很复杂并且涉及 CodeDOM< 但它们是风险。

***赏金保证在允许的情况下尽快！***

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T18:45:56.033

它是 Unix _Layout.cshtm 文件吗

```
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
 <title>@ViewBag.Title</title>
<link href="@Url.Content("~/Content/Site.css")" rel="stylesheet" type="text/css" />
<script src="@Url.Content("~/Scripts/jquery-1.5.1.min.js")"></script>
<script src="@Url.Content("~/Scripts/modernizr-1.7.min.js")"></script>
</head>
<body>
<ul id="menu">
 <li>@Html.ActionLink("Home", "Index", "Home")</li>
<li>@Html.ActionLink("Movies", "Index", "Movies")</li>
<li>@Html.ActionLink("About", "About", "Home")</li>
</ul> 
<section id="main">
@RenderBody()
 <p>Copyright W3schools 2012\. All Rights Reserved.</p>
</section>
</body>
</html> 
```

# sql - 以正确的语言获取 Joomla 用户类型值

> ID：15310434
> 
> 赞同：0
> 
> 时间：2013-03-09T12:02:48.693
> 
> 标签：sql, joomla, usertype

当我在管理菜单中查看用户类型时，它们都是俄语，但是当我从 DB 中获取它时，它的语言似乎是英语，无法弄清楚。Sql 看起来像这样：

```
$query = "SELECT cc.title AS category, a.title,
u.username,u.usertype as usertype, a.hits ,ua.avatar as avatar, ar.intotext as introtext,
u.lastvisitDate as lastvisit, s.userid as onlineid
FROM #__content AS a
LEFT JOIN #__categories AS cc ON a.catid = cc.id
LEFT JOIN #__users AS u ON u.id = a.created_by
LEFT JOIN #__comprofiler AS ua ON user_id = a.created_by
LEFT JOIN #__session s ON s.userid = a.created_by AND s.guest = 0
LEFT JOIN #__cck_store_item_cck_store_item_content AS ar ON ar.id = ".(int)$itemid."
WHERE a.id =  ".(int)$itemid."
and a.access = 1"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T14:11:30.543

您不会获得某种语言的内容，而是在准备页面时使用 JText 将数据库中的密钥翻译成用户的适当语言。

如果您要做的是用俄语呈现用户组名称，则需要使用 JText()。

# blackberry - 黑莓应用程序无法安装在较低版本的设备上

> ID：15310438
> 
> 赞同：0
> 
> 时间：2013-03-09T12:03:29.103
> 
> 标签：blackberry

我想在黑莓设备上安装应用程序，问题是我安装的 SDK 版本高于我要安装的黑莓设备版本，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T14:01:54.063

下载与目标设备上安装的操作系统匹配的 SDK。BlackBerry OS 版本向后兼容，5.0 二进制文件将在 OS 7 上运行，但不向前兼容，7.0 二进制文件不会在 OS 5 上运行。

# ruby - 为什么我在迭代时会在数组中得到错误的结果？

> ID：15310439
> 
> 赞同：0
> 
> 时间：2013-03-09T12:03:30.347
> 
> 标签：ruby, arrays

我正在对 Object van 中的数组进行迭代。我正在尝试将数组的元素弹出到另一个对象数组中。见下文。

```
@van.bikes.each { @garage<<( @van.removebike )}

def removebike
   @bikes.pop   
end 
```

当我这样做时，车库中的结果数组缺少元素和/或重复元素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T12:18:18.370

你也可以试试这个。。

```
@garage = []
@van.bikes.each{|bike| @garage << bike} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T12:03:30.347

这样做的原因是，当 ruby​​ 对数组进行迭代时，它会根据原始数组大小设置迭代次数。当您从该数组中弹出一个元素时，大小会发生变化，因此迭代无法正常工作。

你可以改用，

```
@van.bikes.count.times { @garage<<( @van.removebike )} 
```

# amazon-web-services - f4m 文档包含媒体标记中缺少的错误 URL

> ID：15310442
> 
> 赞同：1
> 
> 时间：2013-03-09T12:03:55.803
> 
> 标签：amazon-web-services, amazon-cloudfront, flash-media-server, amazon-cloudformation

对不起，如果这是在错误的地方。

我已经阅读了亚马逊关于使用 CloudFront 和 Flash Media Server 设置实时流的指南，如下所述：http: [//docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/LiveStreamingAdobeFMS4.5.html](http://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/LiveStreamingAdobeFMS4.5.html)

但是，当我开始配置 Flash Media Playback 设置时，我收到以下消息：

> f4m 文档包含
> 媒体标记中缺少的错误 URL

如所述，我复制了`LiveHDSManifest`粘贴在**视频源**字段中的值。我究竟做错了什么？

# scala - 当类型参数之一应该是 Nothing 时，为什么 Scala 的隐式类不起作用？

> ID：15310451
> 
> 赞同：3
> 
> 时间：2013-03-09T12:05:15.727
> 
> 标签：scala, polymorphism, scala-2.10, nothing, enrich-my-library

**更新：**我修改了示例，以便可以编译和测试。

我有一个定义丰富方法的隐式类：

```
case class Pipe[-I,+O,+R](f: I => (O, R));

object Pipe {
  // The problematic implicit class:
  implicit class PipeEnrich[I,O,R](val pipe: Pipe[I,O,R]) extends AnyVal {
    def >->[X](that: Pipe[O,X,R]): Pipe[I,X,R] = Pipe.fuse(pipe, that);
    def <-<[X](that: Pipe[X,I,R]): Pipe[X,O,R] = Pipe.fuse(that, pipe);
  }

  def fuse[I,O,X,R](i: Pipe[I,O,R], o: Pipe[O,X,R]): Pipe[I,X,R] = null;

  // Example that works:
  val p1: Pipe[Int,Int,String] = Pipe((x: Int) => (x, ""));
  val q1: Pipe[Int,Int,String] = p1 >-> p1;

  // Example that does not, just because R = Nothing:
  val p2: Pipe[Int,Int,Nothing] = Pipe((x: Int) => (x, throw new Exception));
  val q2: Pipe[Int,Int,String] = p2 >-> p2;
} 
```

`R`问题是`Nothing`在第二个示例中它不起作用。它会导致编译器错误：在这种情况下，我会收到以下编译器错误：

> ```
> Pipe.scala:19: error: type mismatch;
>  found   : Pipe[Int,Int,R]
>  required: Pipe[Int,Int,String]
>   val q2: Pipe[Int,Int,String] = p2 >-> p2; 
> ```

**为什么会这样？**

* * *

我设法通过为这种情况创建一个单独的隐式类来解决它：

```
trait Fuse[I,O,R] extends Any {
  def >->[X](that: Pipe[O,X,R])(implicit finalizer: Finalizer): Pipe[I,X,R];
}

protected trait FuseImpl[I,O,R] extends Any with Fuse[I,O,R] {
  def pipe: Pipe[I,O,R];
  def >->[X](that: Pipe[O,X,R]) = Pipe.fuse(pipe, that);
  def <-<[X](that: Pipe[X,I,R]) = Pipe.fuse(that, pipe);
}

implicit class PipeEnrich[I,O,R](val pipe: Pipe[I,O,R])
  extends AnyVal with FuseImpl[I,O,R];
implicit class PipeEnrichNothing[I,O](val pipe: Pipe[I,O,Nothing])
  extends AnyVal with FuseImpl[I,O,Nothing]; 
```

但是我可以依赖 Scala 在未来的行为，它不会考虑`Nothing`作为一种选择`R`吗？如果将来发生变化，代码将停止工作，因为我将有两个不同的适用隐式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T21:05:08.440

好吧...您还没有显示所有代码，并且您显示的代码有一些令人困惑的不一致之处。所以这将是一个疯狂的猜测。我怀疑你的问题是`Pipe`它的类型参数是不变的`R`。这是我的简化示例：

```
case class Test[A](a: A)

object Test {
  implicit class TestOps[A](val lhs: Test[A]) extends AnyVal {
    def >->(rhs: Test[A]): Test[A] = ???
  }

  def test {
    def lhs = Test(???)
    def rhs = Test(???)
    lhs >-> rhs
  }
} 
```

我从这段代码中得到的编译错误是：

```
value >-> is not a member of Test[Nothing]
     lhs >-> rhs
         ^ 
```

...我承认与您发布的错误不同。但我并不完全相信你发布的内容，所以我会继续前进！对此的解决方法是`Test`在其类型参数中进行协变`A`：

```
case class Test[+A](a: A) 
```

老实说，我不明白为什么会发生编译错误。似乎编译器不想统一`A =:= Nothing`转换为`TestOps`，但我不明白为什么不这样做。尽管如此，无论如何`Test`都应该是协变的`A`，我猜你的`Pipe`类也应该在`R`.

# 编辑

我只花了几分钟浏览[Scala 错误列表](https://issues.scala-lang.org)，发现了几个可能相关的问题：[SI-1570](https://issues.scala-lang.org/browse/SI-1570)、[SI-4509](https://issues.scala-lang.org/browse/SI-4509)、[SI-4982](https://issues.scala-lang.org/browse/SI-4982)和[SI-5505](https://issues.scala-lang.org/browse/SI-5505)。我真的不知道任何细节，但听起来像是`Nothing`被特殊对待，不应该。保罗和阿德里安会被问到……

# ruby-on-rails - Ruby on Rails：组合框显示的是 id 而不是名称

> ID：15310455
> 
> 赞同：0
> 
> 时间：2013-03-09T12:06:22.227
> 
> 标签：ruby-on-rails, ruby, combobox

我得到了代码

```
<%= f.select :wahl1, options_for_select(@berufs) %> 
```

我在组合框中得到 id´s 或 smth`#<Beruf:0x45ed8e8>`而不是 @berufs 的名称

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T12:12:27.900

`options_for_select`需要一个简单的键和值的数组或散列。然而，您正在向它传递一组模型。

你想要的是`options_from_collection_for_select`，例如：

```
= f.select :wahl1, options_from_collection_for_select(@berufs, 'id', 'name') 
```

# javascript - 使用 Javascript 进行（大量）重定向后获取最终 URL

> ID：15310459
> 
> 赞同：2
> 
> 时间：2013-03-09T12:07:14.210
> 
> 标签：javascript, url, redirect

我想只用 Javascript 获得重定向后的最终 URL。

例如，我有 url ，它使用基于客户端 cookie**的散列和查询参数**`http://example.com/testClient`重定向到不同的地方。我只想使用 Javascript 获取最终 URL。

 **URL 重定向到不同的位置，根据 cookie、用户代理、平台等在不同的客户端上使用不同的哈希和不同的查询参数。

这类似于使用 Javascript 获取 bit.ly 链接的原始（扩展）URL。

关于如何做到这一点的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T12:35:47.247

您可以在此示例中使用 iframe：http: [//jsfiddle.net/BaliBalo/qsX6U/](http://jsfiddle.net/BaliBalo/qsX6U/)

```
iframe.addEventListener('load', function(){
    console.log(iframe.contentWindow.location.href);
}, false); 
```

但是有一个问题：最终 URL 的域必须与运行脚本的域相同，否则会引发跨域错误并且`contentWindow`无法访问属性。**

# sql - 用sql实现自动完成的最佳方法

> ID：15310461
> 
> 赞同：1
> 
> 时间：2013-03-09T12:07:28.093
> 
> 标签：sql, database, autocomplete

我知道这个问题以前就已经提出过，但那是三年前的事了，那是一辈子的:)。

我正在使用 twitter-bootstrap typeahead 来自动完成 mysql db 和 php，它现在运行良好。但是我对每个关键事件都进行了查询，这对于大型应用程序来说并不是一个好的解决方案。

这里最好的方法是什么？我在考虑 memcache，但这是一个会增长的动态数据库，我如何确保数据库中的新信息被缓存到？我愿意接受建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T14:31:46.453

2013 年 2 月，Twitter 发布了**typeahead**（不是引导程序），它是一个强大的自动完成开源库，他的功能之一是：

> 限制网络请求以减轻负载

我建议你试一试。

有用的链接：

[http://twitter.github.com/typeahead.js/examples/](http://twitter.github.com/typeahead.js/examples/)

[https://github.com/twitter/typeahead.js](https://github.com/twitter/typeahead.js)

[http://engineering.twitter.com/2013/02/twitter-typeaheadjs-you-autocomplete-me.html](http://engineering.twitter.com/2013/02/twitter-typeaheadjs-you-autocomplete-me.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T12:16:32.727

对于自动完成，可以使用三元组匹配。

您还可以使用专门的全文搜索引擎，如 Solr/Lucene 或 Sphinx。

另一种选择：切换到 postgresql 并使用 pg_trgm 扩展。

# function - Actionscript 3：如何使用一个输入框函数获取所有类？

> ID：15310462
> 
> 赞同：0
> 
> 时间：2013-03-09T12:07:31.520
> 
> 标签：function, actionscript, frame, enter

我正在用 AS3 制作冒险游戏，并且有很多课程。我听说如果只有一个 Enter Frame 函数并且所有更新函数都从该函数运行，则性能最好。

我目前在我的 main.as 中有一个 mainGameLoop，我的所有类包含从这个单一输入帧函数运行的更新函数的最佳方式是什么？

这是我在 Player 类中运行更新功能的示例，但我根本不喜欢这种解决方案。

如果有人可以提供帮助，将不胜感激，谢谢。

```
public class Main extends MovieClip
{
    // Initialising variables...
    private var m_SceneHandler:SceneHandler;
    private var m_UserInput:UserInput;

    public function Main()
    {
        // Adding main update function...
        addEventListener( Event.ENTER_FRAME, mainGameLoop );

        // Creating the scene handler...
        m_SceneHandler = new SceneHandler();
        addChild( m_SceneHandler );
    }

    private function mainGameLoop( event:Event )
    {
        doUpdate();
    }

    private function doUpdate():void
    {
        // Update player...
        if (m_SceneHandler.m_aCurrentScene[0].m_Player)
        {
             m_SceneHandler.m_aCurrentScene[0].m_Player.doUpdate();
        }       

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T14:47:03.920

将复合模式和代码用于 IUpdateable 接口。

```
包视图{
   公共接口 IUpdateable {
      函数doUpdate（）：无效；
   }
}

```

在您的主游戏循环中，只需切换应更新哪些对象：

```
包裹{
   公共类 Main 扩展 MovieClip 实现 IUpdateable {
     受保护的 var updateChildren：向量。= 新向量.();
     //其他逻辑将管理谁当前可更新，谁不可更新
     公共函数doUpdate（）：无效{
        对于每个 (var updateable:IUpdateable) {
           可更新的.doUpdate();
        }
     }
   }
}

```

那么，如果有子组件需要更新，也可以是IUpdateable，更高级别的IUpdateable可以调用该方法。

# python - python中的字典计算

> ID：15310463
> 
> 赞同：0
> 
> 时间：2013-03-09T12:07:33.363
> 
> 标签：python, loops, dictionary

我有一本像下面这样的字典。

```
{'MADTHNTEYH': ' 7.6518374230562838',
 'MADTHNTEYS': ' 7.9421338120705345',
 'MADTHNTEYW': ' 7.7303738107448217',
 'MALTENAEYS': ' 7.4882848464336709',
 'MALTENTEYH': ' 7.1865554139328083',
 'MALTHNAEYH': ' 7.5424656020912142',
 'MALTHNTEYS': ' 7.8213289476188521',
 'MALTNNTEYW': ' 7.3735279637144355',
 'MFDTENAEYH': ' 7.3250263600055829',
 'MFDTENAEYW': ' 7.4035627476941208',
 'MFDTHNAEYS': ' 7.9597998936916268',
 'MNLTHNFEYH': ' 7.3567715253480195',
 'MNLTNNFEYS': ' 7.4110269317835664',
 'MNLTNNFEYW': ' 7.1992669304578536',
 'MNPTENAEYH': ' 7.0852200293633736',
 'MNPTENAEYW': ' 7.1637564170519115',
 'MNPTENTEYH': ' 7.0737869858767608',
 'MNPTENTEYS': ' 7.3640833748910115',
 'MNPTENTEYW': ' 7.1523233735652987',
 'MNPTHNAEYS': ' 7.7199935630494174',
 'MNPTNNAEYH': ' 7.193656191456463',
 'MNPTNNFEYH': ' 7.0400205169440992',
 'MNPTNNFEYS': ' 7.3303169059583491',
 'MNPTNNFEYW': ' 7.1185569046326371',
 'MNPTNNTEYH': ' 7.1822231479698502',
 'MNPTNNTEYS': ' 7.4725195369841009',
 'MNPTNNTEYW': ' 7.2607595356583889'} 
```

我想要的是一个输出，它应该包含前 10 个（根据值）键及其按降序排列的相应值。我尝试了很多，但我没有得到。在这个例子中，输出应该是

```
MFDTHNAEYS :  7.9597998936916268
MADTHNTEYS :  7.9421338120705345
MALTHNTEYS :  7.8213289476188521
MADTHNTEYW :  7.7303738107448217 
```

像这样到10号。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T12:10:48.013

为此，您可以使用[collections.Counter](http://docs.python.org/2/library/collections.html#collections.Counter)后跟[most_common](http://docs.python.org/2/library/collections.html#collections.Counter.most_common)

```
>>> from collections import Counter
>>> some_dict = {'MNLTHNFEYH': ' 7.3567715253480195', 'MNPTENAEYH': ' 7.0852200293633736',     'MADTHNTEYH': ' 7.6518374230562838', 'MFDTENAEYH': ' 7.3250263600055829', 'MALTHNAEYH': '     7.5424656020912142', 'MFDTHNAEYS': ' 7.9597998936916268', 'MALTENTEYH': ' 7.1865554139328083', 'MFDTENAEYW': ' 7.4035627476941208', 'MALTNNTEYW': ' 7.3735279637144355', 'MADTHNTEYW': ' 7.7303738107448217', 'MNPTENAEYW': ' 7.1637564170519115', 'MADTHNTEYS': ' 7.9421338120705345', 'MNLTNNFEYW': ' 7.1992669304578536', 'MNPTHNAEYS': ' 7.7199935630494174', 'MNLTNNFEYS': ' 7.4110269317835664', 'MNPTNNAEYH': ' 7.193656191456463', 'MNPTNNFEYS': ' 7.3303169059583491', 'MNPTNNTEYW': ' 7.2607595356583889', 'MNPTENTEYW': ' 7.1523233735652987', 'MNPTNNFEYW': ' 7.1185569046326371', 'MNPTNNTEYS': ' 7.4725195369841009', 'MNPTENTEYS': ' 7.3640833748910115', 'MNPTNNFEYH': ' 7.0400205169440992', 'MNPTENTEYH': ' 7.0737869858767608', 'MNPTNNTEYH': ' 7.1822231479698502', 'MALTHNTEYS': ' 7.8213289476188521', 'MALTENAEYS': ' 7.4882848464336709'}
>>> for k, v in Counter(some_dict).most_common(10):
    print "{}:{}".format(k,v)

MFDTHNAEYS: 7.9597998936916268
MADTHNTEYS: 7.9421338120705345
MALTHNTEYS: 7.8213289476188521
MADTHNTEYW: 7.7303738107448217
MNPTHNAEYS: 7.7199935630494174
MADTHNTEYH: 7.6518374230562838
MALTENAEYS: 7.4882848464336709
MNPTNNTEYS: 7.4725195369841009
MNLTNNFEYS: 7.4110269317835664
MFDTENAEYW: 7.4035627476941208 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T13:06:32.143

该类`Counter`是 的子类`dict`，因此使用它会创建一个副本。由于它的`most_common`方法是用 实现的`heapq`，你可以跳过中间人：

[http://docs.python.org/2/library/heapq](http://docs.python.org/2/library/heapq)

```
>>> import heapq
>>> from decimal import Decimal
>>> # d = {...}
>>> 
>>> for k, v in heapq.nlargest(10, d.iteritems(), key=lambda x: Decimal(x[1])):
...   print "{}:{}".format(k, v)
... 
MFDTHNAEYS: 7.9597998936916268
MADTHNTEYS: 7.9421338120705345
MALTHNTEYS: 7.8213289476188521
MADTHNTEYW: 7.7303738107448217
MNPTHNAEYS: 7.7199935630494174
MADTHNTEYH: 7.6518374230562838
MALTHNAEYH: 7.5424656020912142
MALTENAEYS: 7.4882848464336709
MNPTNNTEYS: 7.4725195369841009
MNLTNNFEYS: 7.4110269317835664 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-09T12:18:52.957

我不相信`collections.Counter`是必需的：

```
for key in sorted(d, key=d.get, reverse=True)[:10]:
    print '{}: {}'.format(key, d[key]) 
```

# php - 使用 regex+php 仅显示 youtube url

> ID：15310466
> 
> 赞同：-1
> 
> 时间：2013-03-09T12:07:42.817
> 
> 标签：php, regex, wordpress

我在 wordpress 中创建了自定义视频类型小部件。用户可以在其中使用添加媒体选项添加视频网址。这里的问题是，如果用户添加 youtube url 以及一些文本（文本和 url 的混合）然后前端显示文本和视频。我想从中拆分 youtube url。

例子 ：

```
Eros nisi adipiscing penatibus! Phasellus? A. Dapibus etiam massa! Phasellus lacus, purus tempor! Sagittis, montes rhoncus dolor? Dolor nec, in risus. Augue placerat dis nisi velit enim magnis lorem.

http://www.youtube.com/watch?v=VdvEdMMtNMY

Nisi mus ut magnis vel porta dignissim lectus enim et diam tincidunt sagittis parturient turpis aliquet nunc adipiscing dolor parturient? Auctor! Elementum ultricies parturient porttitor urna hac. Massa elementum dis. 
```

我想要的结果：

```
http://www.youtube.com/watch?v=VdvEdMMtNMY (youtube url only) 
```

我知道正则表达式是 php 中的函数，但我不知道如何使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T12:19:26.097

```
preg_match("/https?:..www\.youtube\.com.\S*\s/", $myText, $treffer);
print_r($treffer); 
```

# wpf - 如何将 DataGridTemplateColumn.Visibility 绑定到 DataGrid.ItemsSource 之外的属性？

> ID：15310467
> 
> 赞同：16
> 
> 时间：2013-03-09T12:07:43.910
> 
> 标签：wpf, data-binding, binding, wpfdatagrid

我需要将`Visibility`a绑定`DataGridTemplateColumn`到外部的属性`DataGrid.ItemsSource`，因为我需要将所有行中的这一列绑定到内部的一个属性`ViewModel`，但据我所知，您可以将其绑定到内部的某个属性，`ItemsSource`或者您应该使用`ElementStyle`，`EditingElementStyle` 我已经尝试过这段代码：

```
 <DataGridTemplateColumn Header="post" 
                      Visibility="{Binding DataContext.ProjectPostVisibility
                    , RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=MvvmCommonControl:DataGrid}}"/> 
```

而且我确定我的绑定是正确的，因为当我绑定`DataGridCell.Visibility`以下内容时它可以正常工作：

```
<DataGridTemplateColumn Header="post">
    <DataGridTemplateColumn.CellStyle>
                        <Style TargetType="DataGridCell">
                            <Setter Property="Visibility" Value="{Binding DataContext.ProjectPostVisibility,RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=MvvmCommonControl:DataGrid}}"/>
                        </Style>
                    </DataGridTemplateColumn.CellStyle>
</DataGridTemplateColumn > 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-09T12:41:42.367

您的绑定是正确的，但它不能`DataGridTemplateColumn`直接使用，因为它不在可视树中。所以它不是继承的`DataContext`。

您需要绑定`DataGridTemplateColumn`后面的代码。[这是一个演示](http://www.thomaslevesque.com/2011/03/21/wpf-how-to-bind-to-data-when-the-datacontext-is-not-inherited/)，展示了一种方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-07-12T16:10:05.403

在 DataGridTemplateColumn.CellStyle 中添加此设置器并完成：

```
 <Setter Property="Visibility" Value="{Binding DataContext.isVisible, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=DataGrid}}"/> 
```

如果您需要更多帮助，请查看下面的示例。我希望删除按钮在项目级别不可见。首先，您必须确保您的视图模型中有 isVisible 属性：

```
 private System.Windows.Visibility _isVisible;
    public System.Windows.Visibility isVisible
    {
        get { return _isVisible; }
        set
        {
            if (_isVisible != value)
            {
                _isVisible = value;
                OnPropertyChanged("isVisible");
            }
        }
    } 
```

然后：

```
 if (isProj == false)
            this.model.isVisible = Visibility.Visible;
        else
            this.model.isVisible = Visibility.Collapsed; 
```

XAML：

```
<DataGridTemplateColumn  >
       <DataGridTemplateColumn.CellTemplate >
            <DataTemplate >
               <Button x:Name="btnRemove" Content="X">
                 <Button.Style>
                    <Style TargetType="{x:Type Button}">
                         <Setter Property="FontWeight" Value="ExtraBold" />
                         <Setter Property="FontSize" Value="50" />
                     </Style>
                 </Button.Style>
            </Button>
         </DataTemplate>
   </DataGridTemplateColumn.CellTemplate>
   <DataGridTemplateColumn.CellStyle>
        <Style TargetType="{x:Type DataGridCell}">
               <Setter Property="Background"  Value="Red"/>
               <Setter Property="Visibility" Value="{Binding DataContext.isVisible, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=DataGrid}}"/>
        </Style>
   </DataGridTemplateColumn.CellStyle> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2021-04-01T14:11:09.440

正如其他答案中提到的那样，该列不是视觉/逻辑树的一部分，也不是从`FrameworkElement`它没有的含义继承而来的`DataContext`。这就是为什么您的绑定不起作用的原因。

`FrameworkElement`但是，您可以在您正在寻找的级别添加一个虚拟（折叠）`DataContext`（以您的示例为例，它将在 DataGrid 的级别），折叠它并将其用作您的绑定源[`x:Reference`](https://docs.microsoft.com/en-us/dotnet/api/system.windows.markup.reference?view=net-5.0)标记扩展。

这是一个例子：

```
<FrameworkElement x:Name="Proxy" Visibility="Collapsed"/>
<DataGrid>
    <DataGrid.Columns>
        <DataGridTemplateColumn Header="post" 
            Visibility="{Binding DataContext.ProjectPostVisibility, Source={x:Reference Name=Proxy}}"/>
    </DataGrid.Columns>
</DataGrid> 
```

# android - 从Activity访问ViewPager中的TextView

> ID：15310468
> 
> 赞同：4
> 
> 时间：2013-03-09T12:07:48.247
> 
> 标签：android, android-fragments, android-viewpager

我有一个包含多个片段的 ViewPager 的 Activity。我现在如何访问其中一个片段中的 TextView 以从主要活动中更改其文本？我尝试了多种方法，它们都以 NullPointerException 结束。

活动：

```
public class SummonerOverview extends SherlockFragmentActivity implements TabListener, OnPageChangeListener {

    private ViewPager mPager;
    private PagerAdapter mAdapter;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.summoner_overview);

        initialize();   
    }

    private void initialize() {

        // initialize Pager
        mPager = (ViewPager) findViewById(R.id.viewpager);
        mAdapter = new PagerAdapter(getSupportFragmentManager());
        mPager.setAdapter(mAdapter);
        mPager.setCurrentItem(1);
        mPager.setOnPageChangeListener(this);

        }
} 
```

寻呼机适配器：

```
public class PagerAdapter extends FragmentPagerAdapter {

    public PagerAdapter(FragmentManager fm) {
        super(fm);
        frags = new Fragment[3];
        frags[0] = new StatisticsFragment(0);
        frags[1] = new RatingsFragment(1);
        frags[2] = new HistoryFragment(2);
    }

    private final int NUM_PAGES = 3;
    Fragment[] frags;

    @Override
    public Fragment getItem(int arg0) {
        if (arg0 == 0)
            return frags[0];
        else if (arg0 == 1)
            return frags[1];
        else
            return frags[2];
    }
    @Override
    public int getCount() {
        return NUM_PAGES;
    }

} 
```

片段：

```
public class StatisticsFragment extends SherlockFragment {

public StatisticsFragment(int fragNr) {
        this.fragNr = fragNr;
    }

@Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View v = inflater.inflate(R.layout.fragment_overview_statistics, container, false);

        return v;
    }

} 
```

StatisticsFragment 中的 Textview 在 fragment_overview_statistics.xml 中标有 id，但是当我尝试

```
TextView tv = (TextView) findViewById(R.id.id_of_the_textview)
tv.setText("text"); 
```

在initialize（）方法之后，从Activity的onCreate（）方法中，我得到一个异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T13:28:21.653

好的，经过一个小时的谷歌搜索，我想我解决了我自己的问题（尽管我确信有更好的方法来解决这个问题）

`onCreateView()`我现在在 MainActivity 中保存 Fragment 显示的所有数据，并通过使用 Activity 的公共方法使 Fragmet 在其方法中使用这些数据。

在 PagerAdapter 中，我将 getItemPosition() 重写为：

```
public int getItemPosition(Object object) {
    return POSITION_NONE;
} 
```

现在，每次我更新一些数据时，我也会调用`mAdapter.notifyDataSetChanged()`它来重新创建所有片段。

它有效，尽管对我来说它看起来像一个糟糕的黑客。我确信必须有一个更好的解决方案，因为现在我必须重新创建所有片段以更改一个片段的一个 TextView，这肯定不是它打算完成的方式。

# javascript - 更改文本字段的 onblur 事件

> ID：15310469
> 
> 赞同：0
> 
> 时间：2013-03-09T12:07:57.793
> 
> 标签：javascript, html

我有一个用于在表单中输入姓名的文本框。文本框下方的 div 在 AJAX 的帮助下显示数据库中注册用户的姓名，以用户输入的字母开头。用户还可以单击用户名和那些名称将放置在文本框中。div 也会消失。我已经为文本框编写了 onblur 事件，以便在失去文本框的焦点时，下面创建的 div 应该消失。这对我有用。我的问题是我无法从下面的 div 中选择名称，因为在模糊事件触发时。我需要 onblur 事件，因为除了选择用户名功能以外的所有其他事件都需要在模糊事件上使用此功能。我的代码是这样的：

```
 <input id="venue" type="text" onkeyup="showData(this.value)" 
        onblur="return removediv()"/>
 <div id="venuesearch">
 </div>//div for displaying the set of usernames with help of AJAX 
```

我的 JavaScript 代码是：

```
 function showData(str)
 {
      if (str.length==0)
      {
          document.getElementById("venuesearch").innerHTML = "";
          document.getElementById("venuesearch").style.border = "0px";
          return;
      }

      // some AJAX code here 
      if (xmlhttp.readyState==4 && xmlhttp.status==200)
      {
          document.getElementById("venuesearch").innerHTML=xmlhttp.responseText;
          document.getElementById("venuesearch").style.border="1px solid #A5ACB2";
          document.getElementById("venuesearch").style.display="block";
          document.getElementById("venuesearch").style.overflow="show";     
      }

      xmlhttp.open("GET","search_venue.php?venue="+str,true);
      xmlhttp.send();
 } 
```

里面`search_venue.php`

有一个方法叫做`showVal()`onClick 列的事件。

```
function showVal(val)
{
    document.getElementById("venue").value = val;
document.getElementById("venuesearch").style.display = "none";
}

function removediv()
{
    document.getElementById("venuesearch").style.display="none";
return false;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T12:14:31.127

尝试这个 ：

```
function removediv()
{
   document.getElementById("venuesearch").style.display="none";
   var venue = document.getElementById("venue").value;
   return false;
} 
```

# dialog - Dialog 的 Smalltalk 自定义按钮

> ID：15310472
> 
> 赞同：1
> 
> 时间：2013-03-09T12:08:12.523
> 
> 标签：dialog, smalltalk, visualworks

有没有办法自定义对话框的按钮？

对话框确认有两个按钮（是/否），但我想将按钮的值更改为（是/否）以外的其他值。

我一直在寻找方法来做到这一点，但给定的 Dialog 方法在可定制按钮方面非常有限。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T10:29:46.883

尝试这个：

```
Dialog choose: 'What is your choice?'
    labels: #('Red' 'Black')
    values: #(#red #black)
    default: #red 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T05:24:25.547

我目前无法访问 VisualWorks 环境，但我似乎记得`Dialog#choose:from:values:`您可以分别传入对话框文本、任何按钮文本和相关值的位置。（可能还有一些争论。）

只需浏览`Dialog`类（及其层次结构），您应该能够找到这样的方法。

如果不存在这样的方法，则应该很容易推出自己的方法。毕竟是 Smalltalk。

# c++ - 使代码反转计数运行得更快

> ID：15310473
> 
> 赞同：0
> 
> 时间：2013-03-09T12:08:13.557
> 
> 标签：c++, algorithm

我使用 mergesort 编写反转计数代码，但因为输入是一个很大的 const

int 数组，如何让它更快？（让 o(nlogn) 的系数更小？）

是否有一些代码提示可以做到这一点？

提前谢谢。

```
#include<iostream>
using namespace std;
int invCount(int*, int);
int merge(int*, int*, int, int*, int);
int NumberOfInversion(const int*, int);

int main(void){
    const int array[] = {0, 1, 4, 3, 2};
    cout << NumberOfInversion(array, 5) << "times" << endl;
    return 0;
}

    int invCount(int *array, int length){

        if(length <= 1)return 0;

        int middle = (length + 1) / 2;

        int left[middle];
        int right[length - middle];

        for(int i = 0; i < middle; i ++)left[i] = array[i];
        for(int i = middle; i < length; i ++)right[i - middle] = array[i];

        return invCount(left, middle) + invCount(right, length - middle
        ) + merge(array, left, middle, right, length - middle);
    }

    int merge(int* array, int* left, int leftLength, int* right, int rightLength){
       int i = 0, j = 0, count = 0;

       while(i < leftLength && j < rightLength){
           if (left[i] <= right[j]){
               array[i + j] = left[i];
               i ++;
           }
           else {
               array[i + j] = right[j];
               j ++;
               count += leftLength - i;
           }
       }
       if(i == leftLength){
            while(j < rightLength){
                array[i + j] = right[j];
                j ++;
            }
       }
       else{
            while(i < leftLength){
                array[i + j] = left[i];
                i ++;
            }
        }
       return count;
    }

    int NumberOfInversion(const int *A, int N)
    {
        int input[N];
        for(int i = 0; i < N; i ++)input[i] = A[i];
        int result = invCount(input, N);
        return result;
    } 
```

ps：大约20%的可能对是倒置的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T15:20:07.653

这是计数反转的C代码

```
#include <stdio.h>
#include <stdlib.h>

int  _mergeSort(int arr[], int temp[], int left, int right);
int merge(int arr[], int temp[], int left, int mid, int right);

/* This function sorts the input array and returns the
   number of inversions in the array */
int mergeSort(int arr[], int array_size)
{
    int *temp = (int *)malloc(sizeof(int)*array_size);
    return _mergeSort(arr, temp, 0, array_size - 1);
}

/* An auxiliary recursive function that sorts the input array and
  returns the number of inversions in the array. */
int _mergeSort(int arr[], int temp[], int left, int right)
{
  int mid, inv_count = 0;
  if (right > left)
  {
    /* Divide the array into two parts and call _mergeSortAndCountInv()
       for each of the parts */
    mid = (right + left)/2;

    /* Inversion count will be sum of inversions in left-part, right-part
      and number of inversions in merging */
    inv_count  = _mergeSort(arr, temp, left, mid);
    inv_count += _mergeSort(arr, temp, mid+1, right);

    /*Merge the two parts*/
    inv_count += merge(arr, temp, left, mid+1, right);
  }
  return inv_count;
}

/* This funt merges two sorted arrays and returns inversion count in
   the arrays.*/
int merge(int arr[], int temp[], int left, int mid, int right)
{
  int i, j, k;
  int inv_count = 0;

  i = left; /* i is index for left subarray*/
  j = mid;  /* i is index for right subarray*/
  k = left; /* i is index for resultant merged subarray*/
  while ((i <= mid - 1) && (j <= right))
  {
    if (arr[i] <= arr[j])
    {
      temp[k++] = arr[i++];
    }
    else
    {
      temp[k++] = arr[j++];

     /*this is tricky -- see above explanation/diagram for merge()*/
      inv_count = inv_count + (mid - i);
    }
  }

  /* Copy the remaining elements of left subarray
   (if there are any) to temp*/
  while (i <= mid - 1)
    temp[k++] = arr[i++];

  /* Copy the remaining elements of right subarray
   (if there are any) to temp*/
  while (j <= right)
    temp[k++] = arr[j++];

  /*Copy back the merged elements to original array*/
  for (i=left; i <= right; i++)
    arr[i] = temp[i];

  return inv_count;
}

/* Driver progra to test above functions */
int main(int argv, char** args)
{
  int arr[] = {1, 20, 6, 4, 5};
  printf(" Number of inversions are %d \n", mergeSort(arr, 5));
  getchar();
  return 0;
} 
```

这里给出了详细的解释： [http ://www.geeksforgeeks.org/counting-inversions/](http://www.geeksforgeeks.org/counting-inversions/)

# jquery - Jquery在鼠标悬停时显示块

> ID：15310478
> 
> 赞同：0
> 
> 时间：2013-03-09T12:08:48.153
> 
> 标签：jquery, jquery-ui, css

这是我正在做我的东西的[现场网站。](http://www.b2bscriptonline.com/)现在，在该链接中，您可以看到`Source from Top Global Suppliers`该部分中有一个部分称为`Hot Regions`. 现在，当您将鼠标悬停时，您可以看到它显示了一个带有某些国家/地区标志的块。但是当您将鼠标移动到其中一个标志时，该框就会隐藏。但是我希望当您将鼠标移动到这些标志中的任何一个仍然存在框。我已经关注[了这个](http://www.alibaba.com/)网站的悬停部分。

我那个块的 jQuery 代码是这样的

```
jQuery(document).ready(function() {
    jQuery('.hr-current').mouseover(function() {
      jQuery('#hot-regions').addClass('hr-hover');
    });
    jQuery('.hr-current').mouseout(function() {
      jQuery('#hot-regions').removeClass('hr-hover');
    });
  }); 
```

**笔记**

这是小提琴的链接这里是小提琴的链接[http://jsfiddle.net/NewUserFiddle/y53WQ/](http://jsfiddle.net/NewUserFiddle/y53WQ/) 我希望结果与引用的链接完全相同...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T12:13:00.960

你需要`mouseout`在`#hot-regions`：

```
jQuery('#hot-regions').mouseout(function() {
    jQuery(this).removeClass('hr-hover');
}); 
```

如果通过使用 mouseenter/mouseleave 而不是 mouseover/mouseout 来修复它：

```
 jQuery(document).ready(function() {

    jQuery('.hr-current').mouseenter(function() {
      jQuery('#hot-regions').addClass('hr-hover');
    });

    jQuery('#hot-regions').mouseleave(function() {
      jQuery(this).removeClass('hr-hover');
    });

  }); 
```

查看您更新的[小提琴](http://jsfiddle.net/soyuka/y53WQ/2/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T14:00:21.290

现场[**演示**](http://jsfiddle.net/r6hg8/7/)

```
jQuery(document).ready(function() {
    jQuery('#hot-regions').mouseenter(function() {
         jQuery(this).addClass('hr-hover');
    });
    jQuery('#hot-regions').mouseleave(function() {
         jQuery(this).removeClass('hr-hover');
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T18:27:43.017

一些东西...

首先，使用[`.mouseenter()`](http://api.jquery.com/mouseenter/)and[`.mouseleave()`](http://api.jquery.com/mouseleave/)而不是[`.mouseover()`](http://api.jquery.com/mouseover/)and [`.mouseout()`](http://api.jquery.com/mouseout/)。

接下来，从您的 jsfiddle 示例中删除以下内容：

CSS：

```
.hr-hover .hr-current {
    margin-top: 0;
} 
```

最后，使用以下内容：

JAVASCRIPT：

```
jQuery(document).ready(function() {
    jQuery('.hr-current').mouseenter(function() {
      jQuery('#hot-regions').addClass('hr-hover');
    });
    jQuery('#hot-regions').mouseleave(function() {
      jQuery('#hot-regions').removeClass('hr-hover');
    });
  }); 
```

演示：http: [//jsfiddle.net/y53WQ/10/](http://jsfiddle.net/y53WQ/10/)

希望这会有所帮助，如果您有任何问题，请告诉我。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-09T12:45:14.353

您可以使用类似的东西，`this`并且`that`是您需要触发事件并添加和删除的 div

```
 $(".ht-current").hover( 
            function(){ 
             $("#hot-regions").addClass('yourHover');
            },
            function(){
             $("#hot-regions").removeClass('yourHover');
            }); 
```

# r - Select consecutive date entries

> ID：15310483
> 
> 赞同：1
> 
> 时间：2013-03-09T12:09:18.877
> 
> 标签：r, date, vector, subset, cumulative-sum

I have updated the question, as a) i articulated the question not clearly on the first attempt, b) my exact need also shifted somewhat.

I want to especially thank Hemmo for great help so far - and apologies for not articulating my question clearly enough to him. His code (that addressed earlier version of problem) is shown in the answer section.

At a high-level - i am looking for code that helps to identify and differentiate the different blocks of consecutive free time of different individuals. More specifically - the code would ideally:

*   Check whehter an activity is labelled as "Free"
*   Check whether consecutive weeks (week earlier, week later) of time spent by the same person where also labelled as "Free".
*   Give the entire block of consecutive weeks of that person that are labelled "Free" an indicator in the desired outcome column. Note that the lenght of time-periods (e.g. 1 consec week, 4 consec weeks, 8 consec weeks) will vary
*   Finally - due to a need for further analysis on the characteristics of these clusters, different blocks should receive different indicators. (e.g. the march block of Paul would have value 1, the May block value 2, and Kim's block in March would be have value 3)

Hopefully this becomes more clear when one looks at the example dataframe (see the desired final column)

Any help much appreciated, code for the test dataframe per below.

Many thanks in advance,

W

Example (note that the last column should be generated by the code, purely included as illustration):

```
 Week Name  Activity Hours Desired_Outcome
1  01/01/2013 Paul      Free    40               1
2  08/01/2013 Paul      Free    10               1
3  08/01/2013 Paul Project A    30               0
4  15/01/2013 Paul Project B    30               0
5  15/01/2013 Paul Project A    10               0
6  22/01/2013 Paul      Free    40               2
7  29/01/2013 Paul Project B    40               0
8  05/02/2013 Paul      Free    40               3
9  12/02/2013 Paul      Free    10               3
10 19/02/2013 Paul      Free    30               3
11 01/01/2013  Kim Project E    40               0
12 08/01/2013  Kim      Free    40               4
13 15/01/2013  Kim      Free    40               4
14 22/01/2013  Kim Project E    40               0
15 29/01/2013  Kim      Free    40               5 
```

Code for dataframe:

```
Name=c(rep("Paul",10),rep("Kim",5))
Week=c("01/01/2013","08/01/2013","08/01/2013","15/01/2013","15/01/2013","22/01/2013","29/01/2013","05/02/2013","12/02/2013","19/02/2013","01/01/2013","08/01/2013","15/01/2013","22/01/2013","29/01/2013")
Activity=c("Free","Free","Project A","Project B","Project A","Free","Project B","Free","Free","Free","Project E","Free","Free","Project E","Free")
Hours=c(40,10,30,30,10,40,40,40,10,30,40,40,40,40,40)
Desired_Outcome=c(1,1,0,0,0,2,0,3,3,3,0,4,4,0,5)
df=as.data.frame(cbind(Week,Name,Activity,Hours,Desired_Outcome))        
df 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T12:17:14.923

EDIT: This was messy already as the question was edited several times, so I removed old answers.

```
checkFree<-function(df){
  df$Week<-as.Date(df$Week,format="%d/%m/%Y")
  df$outcome<-numeric(nrow(df))

  if(df$Activity[1]=="Free"){ #check first
    counter<-1
    df$outcome[1]<-counter    
  } else counter<-0
  for(i in 2:nrow(df)){
    if(df$Activity[i]=="Free"){
       LastWeek <- (df$Week >= (df$Week[i]-7) & 
                        df$Week < (df$Week[i]))  
      if(all(df$Activity[LastWeek]!="Free"))
        counter<-counter+1 
      df$outcome[i]<-counter
    }
  }
  df
}

splitdf<-split(df, Name)

df<-unsplit(lapply(splitdf,checkFree),Name)

uniqs<-unique(df2$Name) #for renumbering
for(i in 2:length(uniqs))
  df$outcome[df$Name==uniqs[i] & df$outcome>0]<-
  max(df$outcome[df$Name==uniqs[i-1]]) +
  df$outcome[df$Name==uniqs[i] & df$outcome>0]
  df 
```

That should do it, although the above code is probably far from optimal.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T17:25:21.377

Using the comment by user1885116 to Hemmo's answer as a guide to what is desired, here is a somewhat simpler approach:

```
N <- 1
x <- with(df, df[Activity=='Free',])
y <- with(x, diff(Week)) <= N*7

df$outcome <- 0
df[rownames(x[c(y, FALSE) | c(FALSE, y),]),]$outcome <- 1

df

##         Week  Activity Hours Desired_Outcome outcome
## 1 2013-01-01 Project A    40               0       0
## 2 2013-01-08 Project A    10               0       0
## 3 2013-01-08      Free    30               1       1
## 4 2013-01-15 Project B    30               0       0
## 5 2013-01-15      Free    10               1       1
## 6 2013-01-22 Project B    40               0       0
## 7 2013-01-29      Free    40               0       0
## 8 2013-02-05 Project C    40               0       0 
```

# sql - 首先按当月日期排序，然后按所有其他日期排序

> ID：15310484
> 
> 赞同：-1
> 
> 时间：2013-03-09T12:09:29.663
> 
> 标签：sql, tsql, sql-server-2005

我在数据库列中有日期，记录如下

```
Startdate 
Dec-1-2011
Dec-1-2012
April-5-2013
Dec-12-2013
Jan-1-2013
Jan-12-2013
Feb-25-2013
March-2-2013
March-3-2013
April-6-2013
Feb-1-2013
Dec-1-2013
Dec-1-2010 
```

我想要sql查询中的所有记录，但按当前月份和年份排序，所以当前月份和年份记录将首先出现，然后是其他记录。

StartDate 列数据类型为日期

我试过这个

如果月份（StartDate）<月份（GetDate（））然后月份（StartDate）+12 ELSE月份（StartDate）END它首先给我当前月份日期+任何年份日期。但我想要当前月份+当前年份日期和其他日期。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T12:23:23.900

假设该`startdate`列是数据类型`date`or `datetime`，并且在当前日期之后有日期，并且您希望那些具有当前年份和月份的日期排在第一位，那么您可以这样做：

```
SELECT *
FROM tablename
ORDER BY CASE 
           WHEN MONTH(startDate) = MONTH(GETDATE())
            AND YEAR(StartDate)  = YEAR(GETDATE()) THEN 0
           ELSE 1
         END, startDate; 
```

[**SQL 小提琴演示**](http://sqlfiddle.com/#!3/2f604/4)

# c++ - 读取标准输出文件

> ID：15310486
> 
> 赞同：1
> 
> 时间：2013-03-09T12:09:40.740
> 
> 标签：c++, linux, file-io, operating-system

我已经创建了以下测试用例来模拟问题。我已经编译了源代码并能够模拟问题。

1）当系统命令时，我们得到了一些控制台（即您提交的作业），它使用 dup2 重定向到文件并创建文件 .stdout。

当我因为需要作业提交信息而尝试读取此文件时，我没有得到控制台上的数据。我能够得到我写的数据。（确认文件操作）。

我们不能从子进程创建的文件中读取控制台输出吗？

*更改rundir和cmd

```
#include <string>
#include <vector>
#include <utility>
#include <sstream>
#include <fstream>
#include <iostream>
#include <iterator>
#include <algorithm>
#include <functional>
#include <map>
#include <sys/stat.h>
#include <fcntl.h>
using namespace std;
int child();
int main()
{
    string rundir = "/temp";
    pid_t id =child();
    string _xafile;
    string _afile;
    string _afilecmd;
    string line;
    stringstream ss(stringstream::in | stringstream::out);
    ss<<int(id);
    _xafile = rundir;
    _xafile = _xafile + "/" + ss.str()+".stdout";
    cout<<" _xafile is "<<_xafile<<endl;
    string cmd ="cat "+ _xafile + ">" + rundir + "/" + "process.txt";
    _afile = rundir;
    _afile = _afile + "/" + "process.txt";
    _afilecmd = "rm -rf "+ _afile;
    system(cmd.c_str());
    ifstream xafile(_afile.c_str());
     while(xafile)
        {
            string word;
            xafile >> word;
            cout<<word<<"    ";
            /* try to read console output but did not read data */
        }
    system(_afilecmd.c_str());
    return 0;
}

int child()
{
    string rundir = "/tmp";
    string cmd    = " tool <input file> -o <outputfile>";
    const char* std_out_file;
    pid_t pid = fork();
    if (pid < 0) {
    return -1;
    }
    if (pid == 0) {
    pid_t mypid = getpid();
    stringstream sm;
    sm << rundir << "/";
    if (strlen(std_out_file) == 0)
        sm << mypid << ".stdout";
    else
        sm << std_out_file;

    int fd = open(sm.str().c_str(), O_WRONLY | O_CREAT | O_TRUNC, 0644);
    dup2(fd, 1);
    dup2(fd, 2);
    int fd2 = open("/dev/zero", O_RDONLY);
    dup2(fd2, 0);
     cout<<cmd <<endl<<endl;    
  //    execl("/bin/sh", "/bin/sh", "-c", cmd, NULL);
    system(cmd.c_str());

    /*When system call it generate console output like : your job submitted */
    /* redirect to file */   
    exit(-1);
  } 

    if (pid > 0)
    return pid;

    cout<<" child is done"<<endl;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-24T06:12:18.960

尚不清楚您的想法是什么-您的代码似乎派生了一个孩子，该孩子做了一堆花哨的 io 东西来尝试将您的应用程序标准输出重定向到文件，然后使用 system() 运行命令。代码中的命令有它自己的重定向，特别是通过“-o”，所以它可能没有写入标准输出。

回到父进程，您尝试打开以读取您的子进程将打开以进行写入的同一文件。您没有同步，因此它们可以按任何顺序发生。您似乎正在尝试使用“cat”来读取文件并尝试读取 cat 的标准输出？

我认为您*实际上*正在尝试做的是 Perl 的 C/C++ 等价物

```
$foo = `ls -l /tmp`; 
```

或类似的东西 - 执行命令并捕获输出。

更好的方法是使用管道。

```
#include <iostream>
#include <fcntl.h>
#include <stdio.h>
#include <unistd.h>

enum { WritePipe = 1, ReadPipe = 0 };

int main(int argc, const char** argv)
{
    int pipes[2];   // each process is going to have its own file descriptor.
    if(pipe(pipes) != 0) {
        perror("pipe failed");
        return -1;
    }

    pid_t pid = fork();
    if(pid == 0) {
        // child
        close(pipes[ReadPipe]); // close the parent pipe in our context.

        // redirect stdout and stderr to the pipe.
        dup2(pipes[WritePipe], STDOUT_FILENO);
                    dup2(pipes[WritePipe], STDERR_FILENO);
                    // close(STDERR_FILENO); // <- or just do this to close stderr.

        int result = system("ls -ltr /etc");
        close(pipes[WritePipe]);
        return result;
    }

    if(pid < 0) {
        perror("fork failed");
        return -1;
    }

    // Parent process has launched the child.
    close(pipes[WritePipe]);

    char buffer[4097];
    int bytesRead;
    while((bytesRead = read(pipes[ReadPipe], buffer, sizeof(buffer) - 1)) > 0) {
        buffer[bytesRead] = 0;
        std::cout << buffer;
    }
    std::cout << std::endl;

    close(pipes[ReadPipe]);

    return 0;
} 
```

# javascript - 在谷歌地图上拖动标记时有没有办法强制拖动事件

> ID：15310488
> 
> 赞同：1
> 
> 时间：2013-03-09T12:09:45.513
> 
> 标签：javascript, google-maps-api-3

我在地图上有一个可拖动的标记，当我到达一个定义的位置（我已经定义过）时，我希望浏览器通过执行 dragend 事件来停止拖动，而无需用户自己放下标记。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T13:03:33.860

您可以绑定到标记的拖动事件，当标记在您想要的位置时，您将标记的可拖动选项设置为 false。看到[这个 jsFiddle](http://jsfiddle.net/mBjbp/)。

```
var aroundPrague = new google.maps.LatLngBounds(
    new google.maps.LatLng(49.69537977711389, 13.93707275390625),
    new google.maps.LatLng(50.400843232947864, 15.17303466796875)
);
google.maps.event.addListener(marker, 'drag', function(ev) {
    if (aroundPrague.contains(ev.latLng)) {
        marker.draggable = false;
    }
}); 
```

# java - Datanucleus RDBMS JPA jar-with-dependencues

> ID：15310489
> 
> 赞同：1
> 
> 时间：2013-03-09T12:09:48.810
> 
> 标签：java, jpa, datanucleus

我配置并使用 Datanucleus JPA 连接到 MySQL。我使用 datanucleus-enhancer-plugin 编译类和增强实体。我可以使用 mvn exec:java 运行我的应用程序，也可以在使用 lib（jar 依赖项）创建存档后运行它。

当我创建一个 jar (jar-with-dependencies) 时出现问题。我收到此错误：

```
javax.persistence.PersistenceException: Explicit persistence provider error(s) occurred for "mysql" after trying the following discovered implementations: org.datanucleus.api.jpa.PersistenceProviderImpl from provider: org.datanucleus.api.jpa.PersistenceProviderImpl
    at javax.persistence.Persistence.createPersistenceException(Persistence.java:244)
    at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:186)
    at cantina.crawler.util.JpaUtil.getRdbmsEntityManager(JpaUtil.java:29)
    at cantina.crawler.bolt.SiteDetectorBolt.prepare(SiteDetectorBolt.java:32)
    at backtype.storm.daemon.executor$fn__4050$fn__4059.invoke(executor.clj:610)
    at backtype.storm.util$async_loop$fn__465.invoke(util.clj:375)
    at clojure.lang.AFn.run(AFn.java:24)
    at java.lang.Thread.run(Thread.java:722)
Caused by: org.datanucleus.exceptions.NucleusException: Error creating handler of type "persistence" for metadata parsing : MetaData handler plugin "persistence" was not found. Please check your CLASSPATH and plugin specification.
    at org.datanucleus.metadata.xml.MetaDataParser.parseMetaDataStream(MetaDataParser.java:269)
    at org.datanucleus.metadata.xml.MetaDataParser.parseMetaDataURL(MetaDataParser.java:137)
    at org.datanucleus.metadata.MetaDataUtils.parsePersistenceFiles(MetaDataUtils.java:956)
    at org.datanucleus.api.jpa.JPAEntityManagerFactory.<init>(JPAEntityManagerFactory.java:342)
at org.datanucleus.api.jpa.PersistenceProviderImpl.createEntityManagerFactory(PersistenceProviderImpl.java:91)
    at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:152)
... 6 more
Caused by: org.datanucleus.exceptions.NucleusUserException: MetaData handler plugin "persistence" was not found. Please check your CLASSPATH and plugin specification.
    at org.datanucleus.metadata.xml.MetaDataParser.parseMetaDataStream(MetaDataParser.java:263)
... 11 more 
```

我解压缩了 jar，datanucleus-core 文件就在那里。我无法弄清楚发生了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T06:08:44.493

当您更改 jar(s) 时，您不必费心照顾 MANIFEST.MF 和 plugin.xml 文件。打包 DataNucleus jar 以允许（基于 OSGi）插件机制识别插件和功能。你已经通过玩那些罐子来禁用它，所以要承担后果。

解决方案：要么使用提供的罐子，要么正确合并它们（在这种情况下，这是你的责任）

# php - 如何在codeigniter php中从今天开始减少5个月

> ID：15310491
> 
> 赞同：0
> 
> 时间：2013-03-09T12:09:49.700
> 
> 标签：php

我有今天的日期，`2013-03-09 02:12:36`我想得到像`2012-10-09 02:12:36`（5 个月前的时间）这样的输出

我今天得到了代码 `$datestring = "%Y-%m-%d: %d:%h:%i"; $time = time(); $today=mdate($datestring, $time);//gives me`2013-03-09 02:12:36``

我想要的是 `$sixmonth= $today - 6 month//how to get this output`

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T12:18:51.910

你可以使用一个名为 的函数`strtotime()`，这将做你想要的。[您应该在此处](http://www.php.net/strtotime)阅读有关该功能如何工作的信息。您还应该查看`date()`格式化日期和时间的功能，您可以[在此处](http://www.php.net/date)执行此操作。

```
echo date("Y-m-d H:i:s", strtotime("-6 months")); 
```

示例输出：

```
root@upstairslinux:~# php 6months.php
2012-09-09 12:20:23

root@upstairslinux:~# 
```

# php - 简单：php不显示一些文本

> ID：15310492
> 
> 赞同：-1
> 
> 时间：2013-03-09T12:09:54.923
> 
> 标签：php, text, show

我是 php 新手，只是学习一些技术，如打印、回显等，我只是检查 uClassify 库，并输出文本：

```
Array
(
    [0] => Array
        (
            [id] => Classify275941362830057
            [classification] => Array
                (
                    [0] => Array
                        (
                            [Klasifikasi] => NonOpini
                            [Nilai] => 0.121026
                        )

                    [1] => Array
                        (
                            [Klasifikasi] => Opini
                            [Nilai] => 0.878974
                        )

                )

            [Teks] => Yg ga pake im3 pasti nyesel .. Ckckck..kasian.. #dutapku -,-
        )

) 
```

如果我只想这样打印：

```
[Klasifikasi] => NonOpini
[Nilai] => 0.121026
[Klasifikasi] => Opini
[Nilai] => 0.878974 
```

这是上面原始代码的链接：[https ://github.com/ashwanthkumar/uClassify-PHP5/blob/master/uClassify.php](https://github.com/ashwanthkumar/uClassify-PHP5/blob/master/uClassify.php)

向我解释一下，如何做到这一点.. thx 的帮助:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T12:14:47.343

```
foreach ($array[0]['classification'] as $a)
    foreach ($a as $k => $v)
        echo "[$k] => $v <br>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T12:20:13.587

假设你的整个事情都存储在一个名为`$arr` 所以你会做如下的事情

```
<?php

foreach($arr[0]['classification'] as $new_array) {
 foreach($new_array as $key=>$value) {
   echo "[".$key."] => ".$value."<br>";
 }
}
?> 
```

希望这可以帮助

# jquery - jQuery slideToggle() 在 firefox 和 IE 中不工作，但在 Chrome 中工作正常

> ID：15310493
> 
> 赞同：0
> 
> 时间：2013-03-09T12:10:20.370
> 
> 标签：jquery

我有使用 slideToggle() jQuery 函数。如果我单击按钮，它会向下滑动，但在 Firefox 和 IE 中它会在几分之一秒内消失。但它在铬中正常工作。我在它旁边使用了三到四个 div 和一个提交按钮。是不是这个问题。请帮助解决这个问题。请检查打击代码。

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js">
</script>
<script> 
$(document).ready(function(){
$("#moreqts").hide();
$("#continue_filling").click(function(){
$("#moreqts").slideToggle("slow");
});
});
</script>

<form action="<?php $this->form->getAction(); ?>" method="post" style="<?php echo $mythoughtOptForm; ?>">
<div>
<p id="continue_filling">Continue filling</p>
</div>
<div id="moreqts">
<div class="food"><table border="1px"><tr style="width:200px; text-align:center;"><td></td><td>Road Side</td><td>Indian</td><td>Fine Dining</td><td>Chinese</td><td>Thai</td><td>Continental</td><td>Italian</td></tr>
<tr><td style="width:90px;">Places to eat</td><td><div class="field">
    <?php echo $this->form->places_junk_food->renderViewHelper(); ?>
</div></td><td><div class="field">
    <?php echo $this->form->places_indian->renderViewHelper(); ?>
</div></td><td><div class="field">
    <?php echo $this->form->places_fine_dining->renderViewHelper(); ?>
</div></td><td><div class="field">
    <?php echo $this->form->places_chinese->renderViewHelper(); ?>
</div></td><td><div class="field">
    <?php echo $this->form->places_thai->renderViewHelper(); ?>
</div></td><td><div class="field">
    <?php echo $this->form->places_continental->renderViewHelper(); ?>
</div></td><td><div class="field">
    <?php echo $this->form->places_italian->renderViewHelper(); ?>
</div></td></tr>   
</table></div>
    <div class="sub-field">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input type="hidden" name="optForm" value="mythought">
    <input type="button" name="opt_back" id="opt_back" value="Back" style='width:100px;'>&nbsp;<input type="submit" name="submitOptMyThought" id="submitOptMyThought" value="Save" style='width:100px;'>&nbsp;<input type="button" name="later" id="later" value="Fill it Later" style='width:100px;'>

</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T12:36:53.393

如果它是 HTML5 就使用`<!doctype html>`，因为我可以看到你是否只使用`src=""`了`type=text/javascript`

# node.js - 在英国通过 Node.js 进行定期付款

> ID：15310494
> 
> 赞同：2
> 
> 时间：2013-03-09T12:10:24.597
> 
> 标签：node.js, payment

我目前正在开发一个基于订阅的小型 SAAS 项目。显然，如果可以的话，我会使用 Stripe，但在英国我的选择是有限的。

所以我的问题是，在英国使用 Node.js 进行定期付款的好方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T16:05:17.237

我发现仅适用于 PayPal 的模块，最受欢迎的是带有简单示例 @ GitHub的[paypal-ec 。](https://npmjs.org/package/paypal-ec)其他七个 npm PayPal[模块](https://npmjs.org/browse/keyword/paypal)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T10:13:16.460

## Stripe UK Beta 现已推出

我之前已经通过他们的全球网页表达了对英国支付的兴趣，因此我可以使用 Stripe UK 测试版账户。

> 我们正在与您取得联系，因为您要求在 Stripe 在英国上市时得到通知。好消息：我们已经启动并在私人测试版中运行......

注册兴趣：

[https://stripe.com/global](https://stripe.com/global)

从今天开始：

*   签证
*   万事达

付款：

*   磅
*   美元

很快：

*   美国运通
*   欧元计价

富有的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T15:33:11.020

你绝对应该看看[Paymill](https://www.paymill.com/en-gb/)。它基本上是条纹的，但在欧洲国家，已经有大量的追随者，而且它是一项超级易于使用的服务。他们可能有一个节点模块来帮助您，如果没有，他们有超级简单的 API，您可以使用这些 API 来设置诸如定期付款之类的事情。

这些天我会完全避免使用PayPal。浪费时间。

**编辑**

刚给你一张支票。有几个 npm 模块在敲，看看[https://github.com/komola/paymill-node](https://github.com/komola/paymill-node)

# mysql - 如何在 clsql 中特殊的 mysql sock 路径？

> ID：15310496
> 
> 赞同：0
> 
> 时间：2013-03-09T12:10:26.017
> 
> 标签：mysql, common-lisp, clsql

当我使用 clsql 连接到 mysql 时，出现以下错误

> 尝试使用数据库类型 MYSQL 连接到数据库 localhost:3306/root/ 时：发生错误 2002 / 无法通过套接字“/var/run/mysql/mysql.sock”(2) 连接到本地 MySQL 服务器。[SQL-CONNECTION-ERROR 类型的条件]

我的 mysql.sock 路径是“/home/myhome/var/run/mysql/mysql.sock”，如何更改 clsql 中的默认 sock 路径？这是我的代码，（SBCL 1.0.50，mysql 5.0，clsql-20130128-git）

> (asdf:operate 'asdf:load-op 'clsql)
> 
> （包内#:clsql-user）
> 
> (clsql:connect '("localhost" "username" "password" "dbname" 3306) :database-type :mysql)"

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T12:33:15.500

我建议创建一个`~/.my.cnf`或（如果您具有 root 访问权限）`/etc/my.cnf`文件并包括套接字的客户端设置，`libmysqlclient`可能会选择这个。

如果失败（或者如果您不想进行全局更改），文档建议您可以将 MySQL 选项列表指定为单独的关联列表 [http://clsql.b9.com/manual/connect.html](http://clsql.b9.com/manual/connect.html)获得通过进入[mysql_options()](https://dev.mysql.com/doc/refman/5.5/en/mysql-options.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T12:50:41.177

有趣的是，答案是将主机从“localhost”更改为“127.0.0.1”

# tabs - JavaFx - 选项卡可关闭按钮

> ID：15310503
> 
> 赞同：8
> 
> 时间：2013-03-09T12:11:14.467
> 
> 标签：tabs, javafx

我创建了一个选项卡并将其添加到 TabPane。我已将其可关闭属性设置为 TRUE。如何让关闭按钮显示？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-09T13:03:23.210

找了很久，答案很简单。

只需设置 TabClos​​ingPolicy

TabPane.TabClos​​ingPolicy.SELECTED_TAB

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-07-29T11:27:09.250

在 fxml 文件中，属性可以在 tabplane 中添加为 tabClos​​ingPolicy="SELECTED_TAB" 或 "ALL_TABS"

# java - 操作 IP 地址 - 在 '.' 上拆分字符串 特点

> ID：15310505
> 
> 赞同：4
> 
> 时间：2013-03-09T12:11:24.577
> 
> 标签：java, regex

```
String address = "192.168.1.1"; 
```

我想拆分地址，分隔符是重点。所以我使用了这段代码：

```
String [] split = address.split("."); 
```

但它不起作用，当我使用这段代码时它起作用了：

```
String [] split = address.split("\\."); 
```

那么为什么在 IPv4 地址中拆分点是这样的：`("\\.")`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-09T12:14:05.793

您需要转义“。” 需要`split`一个正则表达式。但是您还需要将转义符转义为“\”。不能在 java 中工作`String`：

```
String [] split = address.split("\\."); 
```

这是因为 java 中的反斜杠`String`表示[字符文字](http://www.roseindia.net/java/language/java-literals.shtml)的开头。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T12:15:12.980

你应该像这样拆分，小技巧也使用 Pattern.compile

```
String address = "192.168.1.1";
String[] split = address.split("\\.");// you can replace it with private static final Pattern. 
```

# android - 使滚动条从代码中闪烁（如 iOS flashScrollIndicators）

> ID：15310506
> 
> 赞同：9
> 
> 时间：2013-03-09T12:11:27.230
> 
> 标签：android, scrollbar, scrollview

在iOS中有`flashScrollIndicators`方法`UIScrollView`可以让滚动条像第一次显示视图时一样短暂闪烁。

我在文档中找不到与此等效的 Android，以使滚动条在可滚动视图（ScrollView、ListView、WebView 等）上短暂闪烁。我尝试在视图上发出一个`requestLayout()`，但这没有用。

我问这个的原因是因为我的视图包含在 a 中`ViewPager`，当用户滑动到不同的页面时，该页面通常已经被绘制并且不会闪烁滚动条。

**在这里回答我自己的问题**

该方法被调用`awakenScrollBars`并在`View`类中定义。不幸的是，方法是`protected`您必须继承 ScrollView、ListView 或任何您希望其滚动条闪烁的视图。

或者，公共*方法*也会闪烁滚动条，但前提是滚动位置实际发生了变化。所以 fe不起作用，只有在视图不在顶部时才起作用。`scrollTo``scrollBy``listView.scrollBy(0,0)``listView.scrollTo(0,0)`

如果无法对视图进行子类化，则以下方法似乎可行，尽管不可否认这是一种 hack：

```
view.setVisibility(View.INVISIBLE);
view.setVisibility(View.VISIBLE); 
```

将视图设置为不可见，然后立即再次可见似乎不会导致任何重绘，但它具有触发滚动条闪烁的副作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-31T06:06:18.093

我通过强制它直接上下滚动解决了一个类似的问题。

```
scrollView.scrollBy(0, 1);
scrollView.scrollBy(0, -1); 
```

这会导致滚动视图显示垂直滚动条，除非没有可滚动的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-08T05:18:22.673

我尝试`isScrollbarFadingEnabled = false`先设置强制滚动条出现，然后滚动一下，然后`isScrollbarFadingEnabled = true`让它消失。

Kotlin 中的以下代码：

```
scrollview.isScrollbarFadingEnabled = false
        handler.postDelayed(Runnable {
            scrollview.isScrollbarFadingEnabled = true
            scrollview.scrollBy(1, 0)
        }, 600) 
```

# java - Android屏幕坐标到画布视图坐标

> ID：15310507
> 
> 赞同：3
> 
> 时间：2013-03-09T12:11:33.023
> 
> 标签：java, android, matrix, android-canvas

我正在尝试将我的屏幕 x 和 y 坐标转换为用于在屏幕上绘制的坐标。

所以我从我的触摸监听器触发的 MotionEvent 中获取我的屏幕 X 和 Y 坐标。

我认为它应该像将这些乘以用于在画布上绘制的矩阵一样简单，所以我在创建视图时创建了 Matrix 实例

```
matrix = new Matrix(); 
```

当`void onDraw(Canvas canvas)`被调用时，我将画布的矩阵设置为我在构造函数上创建的矩阵，并将我的所有转换应用于矩阵

```
matrix.reset();
canvas.setMatrix(matrix);
canvas.translate(getWidth() / 2, getHeight() / 2);
canvas.scale(mScaleFactor, mScaleFactor);
canvas.translate(-getWidth() / 2, -getHeight() / 2);
canvas.translate(-x, -y); 
```

视图看起来应该是这样，但是当在我的触摸侦听器上时，我尝试使用`mapPoints(float[] points)`它提供的值将屏幕坐标转换为使用该矩阵查看坐标不正确，我在 onDraw 中的 0、0 上绘制十字

```
canvas.drawLine(0f, -100f, 0f, 100f, viewportPaint);
canvas.drawLine(-100f, 0f, 100, 0f, viewportPaint); 
```

当我点击缩放后它出现的位置时，我收到的值甚至不接近 0、0

```
float[] array = new float[]{e.getX(), e.getY()};
matrix.mapPoints(array);

Log.v(TAG, "points transformed are " + array[0] + ", " + array[1]); 
```

当我在清楚地单击 0、0 标记的地方拍摄这张照片时，我收到了以下日志记录：

```
03-09 14:08:48.803: V/XXXX(22181): points transformed are 403.43967, 628.47 
```

![在此处输入图像描述](../Images/a29841132a7c8a3d494beda3ca20779a.png) 附言。除了在我的 onDraw 代码中，我没有在其他任何地方触摸矩阵

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-10T08:46:23.083

这可能会帮助其他人：

在 onDraw()

```
canvasMatrix.postScale(mScaleFactor, mScaleFactor);
canvasMatrix.postTranslate(-getWidth() / 2, -getHeight() / 2);
canvas.setMatrix(canvasMatrix); 
```

您需要映射坐标的其他地方：

```
 Matrix m = new Matrix();
  canvasMatrix.invert(m);

  float[] touch = new float[] { X, Y };
  m.mapPoints(touch);

  X = touch[0];
  Y = touch[1]; 
```

你去吧。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T20:49:14.030

我脑子里的问题是倒置的，当我在休息后（8小时后……）再次想到这个问题时，我明白了，为了执行这个操作，我不得不倒置矩阵。

当我变换画布时，矩阵也没有变换，所以我不得不 canvas.get(matrix)

为了获得与画布使用的相同的矩阵..

# wpf - 找到最近的具有特定属性的祖先

> ID：15310508
> 
> 赞同：0
> 
> 时间：2013-03-09T12:11:38.400
> 
> 标签：wpf, xaml, styles

有没有办法`Style`将属性设置器值绑定到最近的为该属性提供值的父级？例如，如果我有以下层次结构：

`Window`> `Grid`> `GroupBox`> `Grid`>`TextBox`

我写了以下内容`Style`：

```
<Style TargetType="{x:Type TextBox}">
    <Setter Property="Visibility" >
        <Setter.Value>
            <Binding Converter="{StaticResource TagToVisibilityConverter}"
                     RelativeSource="{RelativeSource AncestorType=Window}" Path="Tag" />
            </Binding>
        </Setter.Value>
    </Setter>
</Style> 
```

这将简单地转到顶级父级 ( `Window`) 并获取 Tag 属性。我想要的是搜索使用过`Tag`属性的最近的父级，例如，在上面的层次结构中，如果`UserControl`指定 a `Tag`，那么`GroupBox`它应该从`GroupBox`. 我在想一些巧妙的用法`AncestorLevel`，但看起来它不会那么直截了当。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T12:34:13.153

我认为[属性值继承](http://msdn.microsoft.com/en-us/library/ms753197.aspx)是您所需要的。根据文章，

> 要使属性参与值继承，请创建自定义附加属性，如[如何：注册附加属性](http://msdn.microsoft.com/en-us/library/ms753957.aspx)中所述。[使用元数据 ( FrameworkPropertyMetadata](http://msdn.microsoft.com/en-us/library/system.windows.frameworkpropertymetadata.aspx) )注册属性，并在该元数据的选项设置中指定“继承”选项。还要确保该属性具有已建立的默认值，因为该值现在将继承。

如果您想要更特别的东西，您可以编写自己的[标记扩展](http://msdn.microsoft.com/en-us/library/ee855815.aspx)，它将使用[VisualTreeHelper](http://msdn.microsoft.com/en-US/library/system.windows.media.visualtreehelper.aspx)类遍历 WPF 可视树并查找您需要的元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T21:06:04.577

您可以只检查第一个`FrameworkElement`，因为`FrameworkElement`是包含该`Tag`属性的类。

```
RelativeSource="{RelativeSource AncestorType=FrameworkElement}" Path="Tag" 
```

# perl - 为什么 perldoc 中有这么多 ESC？

> ID：15310509
> 
> 赞同：3
> 
> 时间：2013-03-09T12:11:44.717
> 
> 标签：perl, freebsd

我正在使用 FreeBSD 9.1。

当我输入“perldoc perl”时：

```
 PERL(1)               User Contributed Perl Documentation              PERL(1)

ESC[1mNAMEESC[0m
       perl - The Perl 5 language interpreter

ESC[1mSYNOPSISESC[0m
       ESC[1mperl ESC[22m[<C2> ESC[1m-sTtuUWXESC[22m<C2> ]      [<C2> ESC[1m-hvESC[22m<C2> ]<C2> [<C2> ESC[1m-VESC[22m[:ESC[4mconfigvarESC[24m]<C2> ]
            [<C2> ESC[1m-cwESC[22m<C2> ]<C2> [<C2> ESC[1m-dESC[22m[ESC[1mtESC[22m][:ESC[4mdebuggerESC[24m]
<C2> ]<C2> [<C2> ESC[1m-DESC[22m[ESC[4mnumber/listESC[24m]<C2> ]
            [<C2> ESC[1m-pnaESC[22m<C2> ]<C2> [<C2> ESC[1m-FESC[4mESC[22mpatternESC[24m<C2> ]<C2> [<C2> ESC[1m-lESC[22m[ESC[4moctalESC[24m]<C2> ]<C2> [<C2> ESC[1m-0ESC[22m[ESC[4moctal/hexadecimalESC[24m]<C2> ]
            [<C2> ESC[1m-IESC[4mESC[22mdirESC[24m<C2> ]<C2> [<C2> ESC[1m-mESC[22m[ESC[1m-ESC[22m]ESC[4mmoduleESC[24m<C2> ]<C2> [<C2> ESC[1m-MESC[22m[ESC[1m-ESC[22m]ESC[4m'module...'ESC[24m<C2> ]<C2> [<C2> ESC[1m-f
ESC[22m<C2> ]
            [<C2> ESC[1m-C<C2> [ESC[4mnumber/listESC[24m]<C2> ESC[22m]      [<C2> ESC[1m-SESC[22m<C2> ]      [<C2> ESC[1m-xESC[22m[ESC[4mdirESC[24m]<C2> ]
            [<C2> ESC[1m-iESC[22m[ESC[4mextensionESC[24m]<C2> ]
            [<C2> [ESC[1m-eESC[22m|ESC[1m-EESC[22m]<C2> ESC[4m'command'ESC[24m<C2> ]<C2> [<C2> ESC[1m--ESC[22m<C2> ]<C2> [<C2> ESC[4mprogramfileESC[24m<C2> ]<C2> [<C2> ESC[4margumentESC[24m<C2> ]...

ESC[1mGETTING HELPESC[0m
       The ESC[4mperldocESC[24m program gives you access to all the documentation that
       comes with Perl.  You can get more documentation, tutorials and
       community support online at <http://www.perl.org/>.

       If you're new to Perl, you should start by running "perldoc perlintro",
       which is a general intro for beginners and provides some background to
       help you navigate the rest of Perl's extensive documentation.  Run
       "perldoc perldoc" to learn more things you can do with ESC[4mperldocESC[24m.

       For ease of access, the Perl manual has been split up into several
       sections. 
```

为什么有这么多ESC？（如果我输入 'man perl' 没有这个问题。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T12:16:20.420

您看到的是原始`nroff`格式（这些转义序列包含格式信息）。

在我的本地安装中，`man perldoc`说

> ```
>  perldoc looks up a piece of documentation in .pod format that is
>   embedded in the perl installation tree or in a perl script, and
>   displays it via "pod2man | nroff -man | $PAGER". 
> ```

尝试检查`nroff`您的路径，`$PAGER`设置的内容，并使用输出格式选项（也在该手册页中列出）。

# android - 我第一次运行我的应用程序时可以使用安卓服务吗

> ID：15310512
> 
> 赞同：0
> 
> 时间：2013-03-09T12:11:59.823
> 
> 标签：android, eclipse, service, startup

我想在我第一次使用我的程序时得到事件所以我决定使用这个服务

```
public class PackageChangeReceiver extends BroadcastReceiver {

    Context context;

    @Override
    public void onReceive(Context ctx, Intent intent) {
}} 
```

并在主要的

```
 <receiver android:name=".PackageChangeReceiver" >
            <intent-filter>
                <action android:name="android.intent.action.PACKAGE_REMOVED" />
                <action android:name="android.intent.action.PACKAGE_REPLACED" />
                <action android:name="android.intent.action.PACKAGE_ADDED" />
                <data android:scheme="package" />
            </intent-filter>
        </receiver> 
```

但是这个服务在我第一次安装我的应用程序时不起作用，我怎样才能让它在第一次运行？或者不可能这样做？我必须第二次从 eclipse 更新应用程序才能使该服务正常工作，这是什么问题。

android 系统什么时候可以使用它的服务，我曾经想过我应该运行我的一项活动来使服务可用，是真的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T12:14:43.597

从 Android 3.1 开始，任何希望接收广播的应用都必须在 Android 向其发送任何广播之前至少运行一次其 UI 组件（即 Activity）。这样做是出于安全原因，以防止恶意应用程序自动启动。

# javascript - JQueryMobile 注册 vclick 事件处理程序可防止默认表单提交

> ID：15310513
> 
> 赞同：0
> 
> 时间：2013-03-09T12:12:05.377
> 
> 标签：javascript, jquery, html, jquery-mobile, mobile

我在 jquerymobile 中的按钮和锚标记上注册了一个“vclick”事件处理程序。

```
 <script>
    $(document).bind("pageinit", function(event, ui) {
        $('.show-page-loading-msg').bind('vclick', function() {
            $.mobile.loadingMessage = "Loading...";// "Approved";
            $.mobile.textOnly = false;
            $.mobile.showPageLoadingMsg();

        });
    });
</script> 
```

现在，在大多数情况下，随机事情都可以正常工作，但有时，我看到的只是无限时间加载消息，并且没有提交提交按钮表单的默认功能或不显示锚标记的新移动页面。请注意，有时它可以正常工作。

标记：

```
<form id="test" data-ajax="false" action="/test/login" method="post">
    <!--username password textboxes here-->
            <input class="show-page-loading-msg ui-btn-hidden" type="submit" value="Sign In" data-theme="e">
            <a class="show-page-loading-msg" href="/test/home" data-role="button" data-theme="d">Cancel</a>     
    </form> 
```

随机提交按钮不提交表单，有时甚至锚标签也不显示另一个页面，但它们永远不会显示加载消息。

# c# - WPF 应用程序冻结并说没有响应

> ID：15310515
> 
> 赞同：0
> 
> 时间：2013-03-09T12:12:25.843
> 
> 标签：c#, wpf, multithreading, wpf-controls

我有一个 WPF 应用程序，它将大量文件从源复制到 traget。因此，我使用调度程序来完成这项工作，即使我的应用程序已冻结并在标题栏中显示“未响应”，直到文件复制完成。

```
ButtonPower.Dispatcher.BeginInvoke(
System.Windows.Threading.DispatcherPriority.Send,
new NextPrimeDelegate(this.DoAction)); 
```

我想显示进度条，直到复制操作完成，窗口也不应该冻结。我会提出任何解决方案或建议来解决这个问题

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T12:15:10.430

使用 Dispatcher 并不意味着您的 UI 不会冻结 - 事实上，调度程序确保所有工作都在同一个 UI 线程上完成，因此您*将*冻结 UI。相反，您应该生成一个新线程并在那里执行工作。然后使用调度程序通知 UI 更新，因为在新线程中不允许这样做。这就是dispatcher的主要作用！

请参阅[此答案](https://stackoverflow.com/a/5483644/351836)以获得良好的实施和进一步的想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-10T09:33:59.947

您可以使用`DisableProcessWindowsGhosting`如下

```
[DllImport("user32.dll")]
public static extern void DisableProcessWindowsGhosting(); 
```

# html - 使用 twitter 的引导程序排列输入字段时的标签调整

> ID：15310520
> 
> 赞同：0
> 
> 时间：2013-03-09T12:13:01.537
> 
> 标签：html, css, twitter-bootstrap

HTML：

```
<div class="controls controls-row">
       <label>Good</label>

       <input type="text" class="span3" name="one">
</div>

<div class="controls controls-row">
       <label>Still good</label>

       <input type="text" class="span3" name="two">

       <label>Bad</label>

       <input type="text" class="span3" name="three">
</div> 
```

输出：

![在此处输入图像描述](../Images/2c52772a20d61a2faf6c232b9b60078e.png)

“仍然好”和“坏”应该排成一行。当我删除标签标签时，它们排成一行。但是我需要标签，我找不到任何关于如何正确使用标签与控件行的示例。

我使用最新的 twitter bootstrap 版本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T12:57:56.403

我通过以下方式创建了相同的效果：Jsfiddle [**Demo**](http://jsfiddle.net/shail/dX9NT/show/)

```
<div class="controls controls-row">
    <label>Good</label>
    <input type="text" class="span3" name="one">
</div>
<div class="controls controls-row">
   <div class="row-fluid">
      <div class="span12">
        <div class="span6">
            <label>Still good</label>
            <input type="text" class="span12" name="two">
        </div>
        <div class="span6">
            <label>Bad</label>
            <input type="text" class="span12" name="three">
        </div>
    </div>
  </div> 
```

# python - 使用 Python 3 安装 Django 1.5 时出错

> ID：15310521
> 
> 赞同：0
> 
> 时间：2013-03-09T12:13:06.857
> 
> 标签：python, django, syntax, python-3.x, syntax-error

Django 1.5 应该对 Python 3 有实验性支持。在使用 Python 创建新的 virtualenv 并运行后，`pip install django`我得到了大量的语法错误。最有趣的是，在那之后它说 Django 安装成功。无论如何，当我尝试使用 启动项目时`django-admin.py`，它会给我语法错误并死掉。

我正在使用 Arch Linux，这也是在激活 virtualenv 之后发生的。

**编辑**：这里是[日志](http://vpaste.net/Kazgp)。它似乎下载了 Django 1.4 而不是 1.5。

**编辑#2**：试图明确地将版本设置为 1.5 ( `Django==1.5`)，但它说它找不到它。

**编辑#3**：当然我可以简单地从 Git 存储库中获取最新版本，但是如果它是 Django 稳定的，为什么它不在 Pip 存储库中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T12:40:23.860

您的 pip 可能正在使用过期的镜像。您可以通过创建来停止 pip 使用镜像`~/.pip/pip.conf`：

```
[global]
use-mirrors=false 
```

# pattern-matching - OCaml 中的模式匹配

> ID：15310539
> 
> 赞同：-1
> 
> 时间：2013-03-09T12:15:33.513
> 
> 标签：pattern-matching, ocaml

我有一个 OCaml 类型的列表`(string*int) list`。我必须遍历列表并检查`int`值。如果对于我列表中的所有元素，该属性`int>=0`都成立，那么列表是“好的”，否则，如果它在任何一个实例中失败，那么我必须返回“失败”。为此，我做了以下尝试

```
let rec check tlist = match tlist with
[] -> print_string "finished"
|(s,i)::tail -> if i < 0 then print_string "fail" else check tail 
```

从解释器运行它时，我收到一个警告，指出模式匹配并不详尽。另外，当我在以下输入类型中运行它时

```
let z = [("ask",1);("tell",2);("three",3);("goal",-4)] ;; 
```

它按预期返回失败，但对于

```
let z = [("ask",1);("tell",2);("three",3);("goal",4)] ;; , 
```

它返回异常：

```
Match_failure ("//toplevel//", 7, -22). 
```

如何解决这个问题？

编辑：此外，问题还有另一部分。我必须确保字符串`s`在列表中不重复。该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T12:29:19.433

您发布的代码很好，不会产生任何警告，并且适用于您所说的输入。

如果你想改进它，你应该尝试将算法逻辑和输入/输出分开以获得更灵活的东西：让你的函数返回一个布尔值而不是`unit`.

# vb.net - 如何按日期时间类型的列值对 datagridview 进行排序。？

> ID：15310541
> 
> 赞同：1
> 
> 时间：2013-03-09T12:15:48.477
> 
> 标签：vb.net, datagridview

我在按 column2 排序 datagridview 时遇到问题（我使用的列的名称）

我在列中使用了日期时间类型值，现在我想使用以下命令对网格（命名为 conv_msg_grid）进行排序

```
conv_msg_grid.Sort(Column2, System.ComponentModel.ListSortDirection.Ascending) 
```

但它给出了一个错误“对象必须是字符串类型。”

有什么问题？？？

请帮帮我......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T07:02:02.003

似乎您的表中有不一致的数据类型。您的第一项是字符串类型，但其中一些是日期类型。因此，当您尝试排序并遇到不是字符串的内容时，就会发生此错误。

要解决它，您有两个选择。

1.  在排序之前将所有内容转换为日期时间（或字符串）值。（如果允许用户添加日期，这是更好的选择）

2.  将数据插入 DatagridView 时，请确保所有值都是 DateTime（或字符串）。（如果用户不能输入日期，这是更好的选择）

要执行（或字符串）选项，只需删除 convert.ToDateTime 并对值执行 ToString。

```
Dim Column2 As DataGridViewColumn = DataGridView1.Columns(0)
For Each r As DataGridViewRow In DataGridView1.Rows
    r.Cells(Column2.Index).Value = Convert.ToDateTime(r.Cells(Column2.Index).Value)
Next 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-24T08:36:06.233

conv_msg_grid.Sort(conv_msg_grid.columns(2), System.ComponentModel.ListSortDirection.Ascending)

卡伦切

# spring - STS 版本命名法

> ID：15310542
> 
> 赞同：1
> 
> 时间：2013-03-09T12:16:01.850
> 
> 标签：spring, release-management, spring-tool-suite

[http://www.springsource.org/downloads/sts-ggts](http://www.springsource.org/downloads/sts-ggts)

我正在尝试下载新的 STS 工具。在上面的网站上，我找到了里程碑版本和发布版本。谁能告诉我这些术语是什么意思？要使用哪个用户版本并且完全开发而不是开发不足？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T17:47:26.457

发布版本是您想要的版本，“发布”意味着它被认为已经完成并准备好向公众发布。“里程碑”意味着它是一个稳定的检查点，可供社区开发人员测试。如果您想尝试尚未包含在发布中的新功能或错误修复，您会选择里程碑式的。

# java - 使用java根据月日动态绘制条形图

> ID：15310544
> 
> 赞同：2
> 
> 时间：2013-03-09T12:16:12.703
> 
> 标签：java, swing, jfreechart, bar-chart

我在java中创建了一个`BarChart`使用。`jfreechart`该条是根据一个月中的天数绘制的。例如这个月 March 包含 31 天，因此将有 31 个 bar 。问题是当我单击下一个按钮时，月份变为包含 30 天的 4 月，即 30 个柱。我们如何`BarChart`在按钮单击时根据一个月中的天数来更改。

谁能告诉我该怎么做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T13:05:19.533

您需要更新您`dataset`的每次更改。我添加了一个`updateDataset()`方法并在几个关键位置调用它。

```
private void updateDataset() {
    dataset.clear();
    for (int i = 1; i <= finalday; i++) {
        dataset.setValue(i, "Marks", "" + i);
    } 
```

笔记：

*   不要*使用*绝对布局；让布局发挥作用。

*   不要*自己*做日期算术；使用`Calendar`，[例如](https://stackoverflow.com/q/8940438/230513)。

*   不要在构造函数*中*调用可覆盖的方法。

*   请重构您的代码以限制变量的数量和范围。

*   请务必使用有意义的名称，尤其是实例变量。

![条状图](../Images/e7478846c29c285258b66bea1489cda0.png)

SSCCE，未完全修订：

```
import java.awt.Color;
import java.awt.event.ActionEvent;
import java.awt.event.ItemEvent;
import java.util.Calendar;
import java.util.GregorianCalendar;
import javax.swing.*;
import javax.swing.event.ChangeEvent;
import org.jfree.chart.ChartFactory;
import org.jfree.chart.ChartFrame;
import org.jfree.chart.JFreeChart;
import org.jfree.chart.plot.CategoryPlot;
import org.jfree.chart.plot.PlotOrientation;
import org.jfree.chart.renderer.category.BarRenderer;
import org.jfree.data.category.DefaultCategoryDataset;

public class BarGraph {

    public int count = 0, count1 = 0, count2 = 0, count3 = 0, count4 = 0;
    public int contstatus = 2;
    public int date, year, mon, fn, show = 0, finalday, leapcn = 0, task = 0;
    String startdte, enddte, monthweek, leavedates = "", nneed = "", year4enab, month4enab, days;
    ChartFrame frame;
    public static int st = 0;
    JButton left = new JButton("<");
    JButton right = new JButton(">");
    JComboBox month = new JComboBox();
    JSpinner yearspin = new javax.swing.JSpinner();
    JLabel monthLabel = new javax.swing.JLabel();
    JLabel yearLabel = new javax.swing.JLabel();
    DefaultCategoryDataset dataset = new DefaultCategoryDataset();

    BarGraph() {
        task = 1;
        Calendar cal;

        left.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
        left.setRequestFocusEnabled(false);
        left.addActionListener(new java.awt.event.ActionListener() {
            @Override
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                leftActionPerformed(evt);
            }
        });

        right.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
        right.setRequestFocusEnabled(false);
        right.addActionListener(new java.awt.event.ActionListener() {
            @Override
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                rightActionPerformed(evt);
            }
        });

        month.setMaximumRowCount(12);
        month.setModel(new javax.swing.DefaultComboBoxModel(new String[]{"January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"}));
        month.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
        month.addItemListener(new java.awt.event.ItemListener() {
            @Override
            public void itemStateChanged(java.awt.event.ItemEvent evt) {
                monthItemStateChanged(evt);
            }
        });

        yearspin.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
        yearspin.setValue(year);
        yearspin.addChangeListener(new javax.swing.event.ChangeListener() {
            @Override
            public void stateChanged(javax.swing.event.ChangeEvent evt) {
                yearspinStateChanged(evt);
            }
        });

        monthLabel.setBackground(new java.awt.Color(255, 255, 255));
        monthLabel.setFont(new java.awt.Font("Tahoma", 1, 13)); // NOI18N
        monthLabel.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        monthLabel.setBorder(javax.swing.BorderFactory.createBevelBorder(javax.swing.border.BevelBorder.RAISED, null, java.awt.Color.black, null, null));
        monthLabel.setOpaque(true);
        monthLabel.setText("SEPTEMBER");

        yearLabel.setBackground(new java.awt.Color(255, 255, 255));
        yearLabel.setFont(new java.awt.Font("Tahoma", 1, 13)); // NOI18N
        yearLabel.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        yearLabel.setBorder(javax.swing.BorderFactory.createBevelBorder(javax.swing.border.BevelBorder.RAISED, null, java.awt.Color.black, null, null));
        yearLabel.setOpaque(true);
        yearLabel.setText("2013");
        cal = new GregorianCalendar();
        year = cal.get(Calendar.YEAR);
        mon = cal.get(Calendar.MONTH);
        date = cal.get(Calendar.DATE);
        yearspin.setValue(year);
        month.setSelectedIndex(mon);
        calendar(year, mon);
        month4enab = getMonth(monthLabel.getText());
        year4enab = yearLabel.getText();

        startdte = year4enab + "-" + month4enab + "-01";
        enddte = year4enab + "-" + month4enab + "-" + finalday;
    }

    public static void main(String[] args) {
        new BarGraph().showBar();

    }

    private void leftActionPerformed(ActionEvent evt) {
        show = 0;
        if (mon == 0) {
            year--;
            mon = 11;
        } else {
            mon--;
        }
        yearspin.setValue(year);
        month.setSelectedIndex(mon);
        display();
        calendar(year, mon);
        displayCalendar();
        updateDataset();
    }

    private void rightActionPerformed(ActionEvent evt) {
        show = 0;
        if (mon == 11) {
            year++;
            mon = 0;
        } else {
            mon++;
        }
        yearspin.setValue(year);
        month.setSelectedIndex(mon);
        display();
        calendar(year, mon);
        displayCalendar();
        updateDataset();
    }

    private void displayCalendar() {
        month4enab = getMonth(monthLabel.getText());
        year4enab = yearLabel.getText();
        startdte = year4enab + "-" + month4enab + "-01";
        enddte = year4enab + "-" + month4enab + "-" + finalday;
    }

    private void monthItemStateChanged(ItemEvent evt) {
        show = 0;
        String s = (String) month.getSelectedItem();

        if ("January".equals(s)) {
            mon = 0;
        }
        if ("February".equals(s)) {
            mon = 1;
        }
        if ("March".equals(s)) {
            mon = 2;
        }
        if ("April".equals(s)) {
            mon = 3;
        }
        if ("May".equals(s)) {
            mon = 4;
        }
        if ("June".equals(s)) {
            mon = 5;
        }
        if ("July".equals(s)) {
            mon = 6;
        }
        if ("August".equals(s)) {
            mon = 7;
        }
        if ("September".equals(s)) {
            mon = 8;
        }
        if ("October".equals(s)) {
            mon = 9;
        }
        if ("November".equals(s)) {
            mon = 10;
        }
        if ("December".equals(s)) {
            mon = 11;
        }
        display();
        calendar(year, mon);
        updateDataset();
    }

    private void yearspinStateChanged(ChangeEvent evt) {
        show = 0;
        year = (Integer) yearspin.getValue();
        display();
        calendar(year, mon);
        updateDataset();
    }

    public void display() {
        String month = "", day = "";
        if (mon < 9) {
            month = "0" + (mon + 1);
        } else {
            month = "" + (mon + 1);
        }
        if (nneed.length() < 2) {
            day = "0" + nneed;
        } else {
            day = "" + nneed;
        }

        String datss = year + "-" + (month) + "-" + day;
        switch (mon) {
            case 0:
                monthLabel.setText("JANUARY");
                break;
            case 1:
                monthLabel.setText("FEBRUARY");
                break;
            case 2:
                monthLabel.setText("MARCH");
                break;
            case 3:
                monthLabel.setText("APRIL");
                break;
            case 4:
                monthLabel.setText("MAY");
                break;
            case 5:
                monthLabel.setText("JUNE");
                break;
            case 6:
                monthLabel.setText("JULY");
                break;
            case 7:
                monthLabel.setText("AUGUST");
                break;
            case 8:
                monthLabel.setText("SEPTEMBER");
                break;
            case 9:
                monthLabel.setText("OCTOBER");
                break;
            case 10:
                monthLabel.setText("NOVEMBER");
                break;
            case 11:
                monthLabel.setText("DECEMBER");
                break;

        }
        yearLabel.setText(String.valueOf(year));
    }

    public void calendar(int year, int mon) {
        int year1 = year;
        int count1 = 1, fun = 0, day, day1 = 0, key = 0, k = -1, s = 1, ck = 2, cheak, y = 0;
        day1 = year % 100;
        fun = 1 + (day1 / 4);
        switch (mon) {
            case 0:
                key = 1;
                k = -1;
                break;
            case 1:
                key = 4;
                k = 0;
                break;
            case 2:
                key = 4;
                k = 0;
                break;
            case 3:
                key = 0;
                k = 0;
                break;
            case 4:
                key = 2;
                k = 0;
                break;
            case 5:
                key = 5;
                k = 0;
                break;
            case 6:
                key = 0;
                k = 0;
                break;
            case 7:
                key = 3;
                k = 0;
                break;
            case 8:
                key = 6;
                k = 0;
                break;
            case 9:
                key = 1;
                k = 0;
                break;
            case 10:
                key = 4;
                k = 0;
                break;
            case 11:
                key = 6;
                k = 0;
                break;
        }

        if ((year % 4 == 0 && year % 100 != 0) || (year % 400 == 0)) {
            k = -1;
            day = 29;
            leapcn = 0;
            if (mon == 0 || mon == 1) {
                leapcn = 1;
            }
        } else {
            k = 0;
            day = 28;
            leapcn = 1;
        }

        if (year >= 2000) {
            y = 6;
        }
        if (year <= 1900 && year > 2000) {
            y = 0;

        }
        fun = fun + key + k + y;
        fun = (fun + day1) % 7;
        if (fun == 0) {
            fun = 7;
        }
        if (mon == 0 || mon == 2 || mon == 4 || mon == 6 || mon == 7 || mon == 9 || mon == 11) {
            day = 31;
        }
        if (mon == 3 || mon == 5 || mon == 8 || mon == 10) {
            day = 30;
        }
        finalday = day;
        System.out.println("DAYS IN THIS MONTHS:" + finalday);
        cheak = fun + 1;
        s++;
    }

    public static String getMonth(String s) {
        String mont = "56";
        if ("January".equalsIgnoreCase(s)) {
            mont = "01";
        } else if ("February".equalsIgnoreCase(s)) {
            mont = "02";
        } else if ("March".equalsIgnoreCase(s)) {
            mont = "03";
        } else if ("April".equalsIgnoreCase(s)) {
            mont = "04";
        } else if ("May".equalsIgnoreCase(s)) {
            mont = "05";
        } else if ("June".equalsIgnoreCase(s)) {
            mont = "06";
        } else if ("July".equalsIgnoreCase(s)) {
            mont = "07";
        } else if ("August".equalsIgnoreCase(s)) {
            mont = "08";
        } else if ("September".equalsIgnoreCase(s)) {
            mont = "09";
        } else if ("October".equalsIgnoreCase(s)) {
            mont = "10";
        } else if ("November".equalsIgnoreCase(s)) {
            mont = "11";
        } else if ("December".equalsIgnoreCase(s)) {
            mont = "12";
        }
        return mont;
    }

    private void showBar() {
        for (int i = 1; i <= finalday; i++) {
            dataset.setValue(i, "Marks", "" + i);
        }
        JFreeChart chart = ChartFactory.createBarChart(" ", "Student", "Marks",
            dataset, PlotOrientation.VERTICAL, false, true, false);
        chart.setBackgroundPaint(Color.WHITE);

        CategoryPlot plot = (CategoryPlot) chart.getPlot();
        plot.setBackgroundPaint(new Color(221, 223, 238));
        plot.setRangeGridlinePaint(Color.white);
        BarRenderer renderer = (BarRenderer) plot.getRenderer();
        renderer.setSeriesPaint(0, new Color(231, 175, 61));
        renderer.setSeriesPaint(1, Color.green);
        renderer.setDrawBarOutline(false);
        renderer.setShadowVisible(false);
        chart.setBackgroundPaint(Color.WHITE);
        chart.getTitle().setPaint(Color.blue);
        CategoryPlot p = chart.getCategoryPlot();
        p.setRangeGridlinePaint(Color.BLUE);

        frame = new ChartFrame("Bar Chart", chart);
        frame.add(month);
        frame.add(left);
        frame.add(right);
        frame.add(yearspin);
        frame.add(monthLabel);
        frame.add(yearLabel);
        frame.pack();
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);

    }

    private void updateDataset() {
        dataset.clear();
        for (int i = 1; i <= finalday; i++) {
            dataset.setValue(i, "Marks", "" + i);
        }
    }
} 
```

# java - 测试 Junit 随机类

> ID：15310546
> 
> 赞同：-1
> 
> 时间：2013-03-09T12:16:27.897
> 
> 标签：java, testing, random, junit

我有这个 Game.java 类

```
 package jmine;

import java.util.Random;
import jmine.exceptions.IllegalNumOfMine;

public class Game {

    private Box[][] ground;
    private int width;
    private int height;
    private int numOfMine;
    private boolean gameOver;

    public Game(int pWidth, int pHeight, int pNumOfMine) throws IllegalNumOfMine {
        if (pNumOfMine > (pWidth * pHeight)) {
            throw new IllegalNumOfMine();
        }
        this.ground = new Box[pHeight][pWidth];
        this.width = pWidth;
        this.height = pHeight;
        this.numOfMine = pNumOfMine;
        this.gameOver = false;
        this.newGame();
    }

    public void newGame() {
        this.gameOver=false;
        Random randomizer = new Random(); 
        for (int i = 0; i < this.width; i++) {
            for (int j = 0; j < this.height; j++) {
                this.ground[j][i] = new Box();
            }
        }
        int randI = 0;
        int randJ = 0;

        for(int i=0;i<this.numOfMine;i++){
            if (i<this.width){
            randI=i;
            randJ=(this.width-1)-i;}
            else{
                randI=0;
                randJ=0;
            }

        /*for (int i = 0; i < this.numOfMine; i++) {
            do {
                randI = randomizer.nextInt(this.height);
                randJ = randomizer.nextInt(this.width);
            } while (this.ground[randI][randJ].isMine());*/
            this.ground[randI][randJ].setMine(true);
            if (randI - 1 >= 0 && randJ - 1 >= 0) {
                this.ground[randI - 1][randJ - 1].upNumOfMine();
            }
            if (randI - 1 >= 0) {
                this.ground[randI - 1][randJ].upNumOfMine();
            }
            if (randI - 1 >= 0 && randJ + 1 < this.width) {
                this.ground[randI - 1][randJ + 1].upNumOfMine();
            }
            if (randJ - 1 > 0) {
                this.ground[randI][randJ - 1].upNumOfMine();
            }
            if (randJ + 1 < this.width) {
                this.ground[randI][randJ + 1].upNumOfMine();
            }
            if (randI + 1 < this.height && randJ - 1 >= 0) {
                this.ground[randI + 1][randJ - 1].upNumOfMine();
            }
            if (randI + 1 < this.height) {
                this.ground[randI + 1][randJ].upNumOfMine();
            }
            if (randI + 1 < this.height && randJ + 1 < this.width) {
                this.ground[randI + 1][randJ + 1].upNumOfMine();
            }
        }
    }

    public Box[][] getGround() {
        return this.ground;
    }

    public int getHeight() {
        return this.height;
    }

    public int getNumOfMine() {
        return this.numOfMine;
    }

    public int getWidth() {
        return this.width;
    }

    public boolean getGameOver() {
        return this.gameOver;
    }

    public void flag(int pX, int pY) {
        if (this.ground[pX][pY].isCover()) {
            if (this.ground[pX][pY].isFlagged()) {
                this.ground[pX][pY].setFlagged(true);
            } else {
                this.ground[pX][pY].setFlagged(true);
            }
        }
    }

    public boolean isWinner(){
        for(int i=0; i<this.width; i++){
            for(int j=0; j<this.height; j++){
                if(this.ground[i][j].isCover()){
                    if(!this.ground[i][j].isMine()){
                        return false;
                    }
                }
            }
        }
        return true;
    }

    public void unconver(int pX, int pY) {
        if (this.ground[pX][pY].isCover() && !this.ground[pX][pY].isFlagged()) {
            if (this.ground[pX][pY].isMine()) {
                this.gameOver = true;
            } else {
                this.ground[pX][pY].setCover(false);
                if (this.ground[pX][pY].getNumOfMine() == 0) {
                    if (pX - 1 >= 0 && pY - 1 >= 0) {
                        this.unconver(pX - 1, pY - 1);
                    }
                    if (pX - 1 >= 0) {
                        this.unconver(pY-1, pX);
                    }
                    if (pX - 1 >= 0 && pY + 1 < this.width) {
                        this.unconver(pX - 1, pY + 1);
                    }
                    if (pY - 1 >= 0) {
                        this.unconver(pX, pY - 1);
                    }
                    if (pY + 1 < this.width) {
                        this.unconver(pX, pY + 1);
                    }
                    if (pX + 1 < this.height && pY - 1 >= 0) {
                        this.unconver(pX + 1, pY - 1);
                    }
                    if (pX + 1 < this.height) {
                        this.unconver(pX + 1, pY);
                    }
                    if (pX + 1 < this.height && pY + 1 < this.width) {
                        this.unconver(pX + 1, pY + 1);
                    }
                }
            }
        }
    }
} 
```

我必须用 Junit 测试这个类，但是 Game 类有 newGame () 方法，该方法除其他外负责制作 upNumMine ();它增加了相邻地雷数量的值。我正在尝试测试该方法以验证分支

```
if (randJ - 1> 0) {
                 this.ground [Rand i] [randJ - 1]. upNumOfMine ();
             } 
```

问题是我不知道如何强制我的值为 randJ = 1 以测试框 [Randi] [randJ-1] 会发生什么，其中 randJ-1 = 0。

我能做到这一点的唯一方法是修改原始代码输入插入手动RandI和RandJ，但我认为不是正确的做法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T13:32:00.277

您可以将 Randomizer 对象注入到 Game 类中。然后你可以模拟随机化器并测试游戏类。

# java - 如何在不知道列类型的情况下获取列的值

> ID：15310549
> 
> 赞同：8
> 
> 时间：2013-03-09T12:16:35.400
> 
> 标签：java, mysql, database, servlets

我正在根据用户选择要在结果中显示的字段动态创建查询。问题是当要从数据库中检索数据时，我通常使用`getXXX()`方法来检索适当的类型。但在这种情况下，我不知道合适的类型是什么，因为这些列是随机选择的。

有什么方法可以在不指定数据类型 XXX 的情况下获取字符串格式的数据？我正在使用 MySQL 和 Servlet。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-09T12:19:28.050

您可以使用通用的[getObject](http://docs.oracle.com/javase/6/docs/api/java/sql/ResultSet.html#getObject%28int%29)方法：

> 获取此 ResultSet 对象当前行中指定列的值作为 Java 编程语言中的 Object。
> 
> 此方法将给定列的值作为 Java 对象返回。Java 对象的类型将是与列的 SQL 类型对应的默认 Java 对象类型，遵循 JDBC 规范中指定的内置类型的映射。如果该值为 SQL NULL，则驱动程序返回 Java NULL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T12:32:02.760

据我所知，`getString()`如果您想要 Java String 对象中的结果，您可以简单地使用。我认为 MySQL 驱动程序负责反序列化您通过指定的任何 Java 对象中的字节流`getXXX()`。给定以下初始化脚本：

```
DROP TABLE IF EXISTS thing;

CREATE TABLE thing (
  a_int int,
  a_string text,
  a_date date
);

INSERT INTO thing (a_int, a_string, a_date)
   VALUES ('1234', 'Hello world', CURRENT_DATE() ); 
```

和代码：

```
public static void main(String[] args) throws Exception {
    MysqlDataSource db = new MysqlDataSource();
    db.setDatabaseName("test");
    Connection conn = db.getConnection("test", "test");

    ResultSet res = conn.prepareStatement("SELECT * FROM thing").executeQuery();
    res.next();
    System.out.println("Get a int as a string: " + res.getString("a_int"));

} 
```

它只是打印`Get a int as a string: 1234`。您甚至可以将该`a_date`列作为 Java获取`int`，并将其转换为`2013`在我的机器上。因此，绑定似乎发生**在**驱动程序从服务器检索到无类型的字节流之后。有时转换会失败，例如，如果您尝试`getInt()`在`TEXT`列上。

# javascript - GoogleMaps API V3 在 IE 中显示但在 FF 中不起作用

> ID：15310550
> 
> 赞同：-1
> 
> 时间：2013-03-09T12:16:39.493
> 
> 标签：javascript, asp.net, google-maps-api-3

我编写了代码，使用从数据库中获取的相关信息（地址、纬度、经度、描述等）在谷歌地图上动态显示多个标记。问题是谷歌地图在 IE 中运行良好，但在 FF 中没有显示。

这是显示谷歌地图和标记的代码

```
<style type="text/css">
  html { height: 100% }
  body { height: 100%; margin: 0; padding: 0 }
  #dvMap { height: 100%; }
</style>

<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=myApiKey&sensor=false" > 
</script>

<script type="text/javascript">
    window.onload=function(){                  
        var mapOptions={                 
            center:new google.maps.LatLng(markers[0].lat,markers[0].lng),
            zoom:8,
            mapTypeId:google.maps.MapTypeId.ROADMAP        
        };
        var infoWindow=new google.maps.InfoWindow();
        var map=new google.maps.Map(document.getElementById("dvMap"),mapOptions);
        for(i=0;i<markers.length;i++){                
            var data=markers[i];
            var latlng=new google.maps.LatLng(data.lat,data.lng);
            var marker=new google.maps.Marker({
                position:latlng,
                map:map,
                title:data.title             
            });
            (function(marker,data){
                google.maps.event.addListener(marker,"click",function(e){
                    infoWindow.setContent(data.description);
                    infoWindow.open(map,marker);
                });                
            })(marker,data);
        } 
    }        
</script> 
```

这是我的 aspx 页面

```
<form id="form1" runat="server">
    <div id="dvMap" style="width:50%; height:50%;"></div>     
    <asp:Button ID="Button1" runat="server" Text="Button" onclick="Button1_Click" />
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T12:24:05.877

让我们首先`google.maps.event.trigger(map, 'resize');`在 onload 函数的末尾添加

另请注意，您的内联样式`width:50%; height:50%`将覆盖您`<style>`在页面顶部指定的样式。

据我了解，您正在尝试创建全屏地图，如果我错了，请纠正我

# android - 使用 AsyncTask 为 Facebook 使用 Facebook SDK 实现注销功能

> ID：15310552
> 
> 赞同：0
> 
> 时间：2013-03-09T12:16:49.580
> 
> 标签：android, android-asynctask, facebook-android-sdk

我想创建一个使用 Facebook SDK 登录到 facebook 的应用程序。我成功地使用相同的方法实现了登录功能。（我还要提一下我正在使用已弃用的功能，稍后我将切换到更多内容，我想先解决我在这里遇到的问题）。但是我在实现注销功能时遇到了问题。我进行了研究，发现我需要在 AsyncTasks 中实现网络功能以获得更好的性能。那么，我应该使用 AsyncTask 来实现这个功能吗？以下是我的代码。请提出任何需要的更正以及进一步的阅读和文章以清除我的基本概念。我是 Android 新手，在理解 AsyncTasks 方面遇到问题。

```
public void onClick(View v) {
    // TODO Auto-generated method stub

    switch(v.getId()){
    case R.id.fb_button:

        try{
        if(fb.isSessionValid())
        {
 new myAsyncClass().doInBackground(fb);
            //button close session
        }

        else
        {
            fb.authorize(LoginPage.this, new DialogListener(){

                @Override
                public void onFacebookError(FacebookError e)
                {
                    Toast.makeText(LoginPage.this, "on Facebook error", Toast.LENGTH_SHORT).show();
                }
                @Override
                public void onError(DialogError e)
                {
                    Toast.makeText(LoginPage.this, "on error", Toast.LENGTH_SHORT).show();
                }
                @Override
                public void onComplete(Bundle values)
                {
                    update_fb_buttonimage();

                    Toast.makeText(getBaseContext(), "onComplete works",Toast.LENGTH_LONG).show();
                }
                @Override
                public void onCancel()
                {

                }
            });
            //login in to facebook
        }

        }catch(Exception e){

            Toast.makeText(getBaseContext(), e.toString(), Toast.LENGTH_LONG).show();

        } 
```

我的 asynctask 类如下....

```
 private class myAsyncClass extends AsyncTask<Facebook, Void, Void>{

     protected void onPreExecute() {
           // update the UI immediately after the task is executed
           super.onPreExecute();

          }

    @Override

    protected Void doInBackground(Facebook... arg0) {
        // TODO Auto-generated method stub
        Facebook fb=arg0[0];
        try {
            fb.logout(getApplicationContext());
            update_fb_buttonimage();
        } catch (MalformedURLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        return null;
    } 
```

因此，在我的切换案例中，如果会话无效并且我单击我的按钮，我会毫无问题地登录到 Facebook，并且我的视图（按钮）也会得到更新。但是当会话有效时，我得到了著名的异常

```
android.os.networkonmainthreadexception 
```

我应该把我的

```
new myAsyncClass().doInBackground(fb); 
```

请建议我！我完全被困住了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T12:26:12.650

`doInBackground()`在调用 AsyncTask 时不要直接调用。

您只需简单**`execute()`**的 AsyncTask，它遵循一定的执行顺序，如 onPreExecute()、doInBackground()、onProgressUpdate() 和 onPostExecute()。

因此，您应该调用 execute()，而不是调用 doInBackground()。

```
if(fb.isSessionValid())
        {
          new myAsyncClass().execute(fb);

        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T12:19:14.753

OnClick 按钮退出但这个

```
new myAsyncClass().doInBackground(fb); 
```

# c# - 如何使用 C# 和 Linq 实现动态搜索功能？

> ID：15310557
> 
> 赞同：0
> 
> 时间：2013-03-09T12:17:28.330
> 
> 标签：c#, asp.net, linq

我正在尝试在 C# 中实现动态搜索功能。我的搜索会像

```
Attribute operand Value === > Height > 170 
```

就像上面的搜索列表一样，用户可以根据需要添加尽可能多的数据来过滤该数据。属性匹配我的列名可能来自 SQL DB 中的不同表。

实现此类搜索的最佳方法是什么？我对 Linq 很陌生，我想了解[http://www.albahari.com/nutshell/predicatebuilder.aspx](http://www.albahari.com/nutshell/predicatebuilder.aspx)

如何动态构建查询或对于此类易于维护的搜索的最佳方式是什么？

例子：

```
Attribute operand Value === > Height = 170 
Attribute operand Value === > Altitude > 40000  
Attribute operand Value === > temperature < 105 
```

一切都可以为用户定制并在运行时构建。

实现这一点的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T12:52:01.220

检查[this](https://stackoverflow.com/a/4538550/326543) question in this answer以获取有关如何动态构建表达式的示例。

在你的情况下，我认为这样的事情应该会有所帮助（在我脑海中写下这个，请原谅语法错误）。

```
PropertyInfo propInfo = typeof(T).GetProperty(Attribute);
ParameterExpression pe = Expression.Parameter(typeof(Attribute), Attribute);
Expression right = Expression.Parameter(typeof(int), Value);
Expression predicateBody = Expression.GreaterThan(left, right);

Expression<Func<int, bool>> lambda1 =
                Expression.Lambda<Func<int, bool>>(
                    predicateBody,
                    new ParameterExpression[] { numParam }); 
```

参考 -[表达式树](http://msdn.microsoft.com/en-us/library/bb397951.aspx)和[表达式类型](http://msdn.microsoft.com/en-us/library/bb361179.aspx)。

# file - pyrocms 文件 url 不解码图像

> ID：15310569
> 
> 赞同：0
> 
> 时间：2013-03-09T12:18:30.470
> 
> 标签：file, .htaccess, gzip, pyrocms

我安装了 pyrocms，它不显示或解码任何文件格式。

[http://2013.chocolate6.com/chocolate6pyro/files/cloud_thumb/9](http://2013.chocolate6.com/chocolate6pyro/files/cloud_thumb/9)

它返回无法显示您尝试查看的页面，因为它使用了无效或不受支持的压缩形式。

[http://2013.chocolate6.com/chocolate6pyro/files/cloud_thumb/9](http://2013.chocolate6.com/chocolate6pyro/files/cloud_thumb/9)上的网页可能暂时关闭，或者它可能已永久移动到新网址。错误 330 (net::ERR_CONTENT_DECODEDING_FAILED)：未知错误。

任何帮助建议，我都会非常感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-27T03:56:24.113

将您的 config.php 文件更新为以下内容。

```
$config['compress_output'] = FALSE; 
```

# jquery - 在子元素中悬停时替换不同的类

> ID：15310570
> 
> 赞同：1
> 
> 时间：2013-03-09T12:18:32.230
> 
> 标签：jquery

`.icon-popup`每当我将鼠标悬停在表格行上时，我都想替换（交换）元素的类。On `mouseleave`，我希望将初始类交换回来。

```
<table class="libraryResults">
    <tr>
        <td class="libFormat"> <span><i class="icon-doc-text" data-id="icon-doc-text">a</i></span>  
        </td>
    </tr>
    <tr>
        <td class="libFormat"> <span><i class="icon-video" data-id="icon-video">b</i></span>    
        </td>
    </tr>
    <tr>
        <td class="libFormat"> <span><i class="icon-mic" data-id="icon-mic">c</i></span>    
        </td>
    </tr>
</table> 
```

我成功做到这一点的唯一方法是冗长而繁琐：

```
$(".libraryResults tr").hover(function () {
    $(this).find(".icon-doc-text").attr('class', 'icon-popup');
}, function () {
    $(this).find(".icon-popup").attr('class', 'icon-doc-text');
});

$(".libraryResults tr").hover(function () {
    $(this).find(".icon-video").attr('class', 'icon-popup');
}, function () {
    $(this).find(".icon-popup").attr('class', 'icon-video');
});

$(".libraryResults tr").hover(function () {
    $(this).find(".icon-mic").attr('class', 'icon-popup');
}, function () {
    $(this).find(".icon-popup").attr('class', 'icon-mic');
}); 
```

当然，它并不完全有效。`mouseleave`所有类都被第一个返回函数的类替换`.icon-doc-text`。

有什么线索吗？

更新01：我想我可能必须存储它以前的类，这样我就可以用mouseenter之前的任何东西替换mouseleave上的.icon-popup。

[在这里摆弄](http://jsfiddle.net/snerone/5nc3P/)

更新 02：更好的是我可以使用数据属性并`.data()`检索原始类名`mouseleave`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T12:33:07.907

您可以使用[**toggleClass**](http://api.jquery.com/toggleClass/)将您的附加要求组合到一个选择器中来缩短此时间，类似于以下内容：

```
$(".libraryResults tr td").hover(function() {
    $(this).find(".icon-doc-text, .icon-video, .icon-mic").toggleClass("icon-popup");
}); 
```

* * *

[**DEMO**](http://jsfiddle.net/ufNkX/) - 使用组合选择器和`toggleClass`

* * *

或者，如果您希望整体`td`受到影响，请另外使用[**最接近（）**](http://api.jquery.com/closest/)，类似于：

```
$(".libraryResults tr td").hover(function() {
    $(this).find(".icon-doc-text, .icon-video, .icon-mic").closest("td").toggleClass("icon-popup");
}); 
```

* * *

[**DEMO**](http://jsfiddle.net/JYqSP/) -`closest()`用于应用到完整`td`元素

* * *

如果您将单个类分配给您希望受到影响的所有`i`或元素，则可以进一步改进。`td`这样你就可以写出类似这样的东西：

```
// If class 'myClass' is on all td elements
$(".libraryResults td.myClass").hover(function() {
    $(this).toggleClass("icon-popup");
}); 
```

### 编辑

> 但是，我需要在悬停时替换/交换类，然后将它们交换回来。

如果您可以影响 HTML，那么通过使用 a`data-attribute`您可以编写一个不错的速记解决方案。由于该`class`属性可以指定多个类，因此您可以添加一个 data 属性，指定要换出的类并使用它，类似于：

HTML

```
<tr>
    <td class="libFormat"> <span><i class="icon-doc-text" data-class-name="icon-doc-text">icon text</i></span>

    </td>
    <td class="libFormat"> <span><i class="icon-video" data-class-name="icon-video">icon video</i></span>

    </td>
    <td class="libFormat"> <span><i class="icon-mic" data-class-name="icon-mic">icon mic</i></span>

    </td>
</tr> 
```

脚本

```
$(".libraryResults tr td").hover(function () {
    var $match = $(this).find("[data-class-name]");
    var className = $match.attr("data-class-name");

    $match.removeClass(className);
    $match.addClass("icon-popup");
}, function () {
    var $match = $(this).find("[data-class-name]");
    var className = $match.attr("data-class-name");

    $match.addClass(className);
    $match.removeClass("icon-popup");
}); 
```

* * *

[**DEMO**](http://jsfiddle.net/mgLLp/) - 使用 data 属性指定要切换的类

* * *

这也是非常可扩展的，因为您可以将几个空格分隔的类添加到 data 属性中，它仍然应该可以工作。

# email - 如何根据“Message-ID:”生成动态“Reply-To:”？[+详细]

> ID：15310574
> 
> 赞同：10
> 
> 时间：2013-03-09T12:18:55.627
> 
> 标签：email, emacs, elisp, emacs24, gnus

如何根据**创建的消息的**Message-ID 在 emacs/gnus 中生成动态的“Reply-To:”（和“From:”）标头？我想使用外部（perl）脚本`+detail`根据“Messaged-ID：”标头生成动态部分。

```
user+detail@example.net 
```

我设法用我的外部脚本生成的内容创建了一个标题。该脚本获取 usenet 组名称作为命令行参数。我也想将 message-id 值传递给它。

**我当前的代码**
~/.emacs ：

```
'(gnus-posting-styles ("^pl\\.test$" ("Reply-To" message-make-reply-to))) 
```

~/.gnus

```
(defun message-make-reply-to()
  (my-script ".../reply-to.pl" (message-fetch-field "Message-Id")))

(defun my-script(path &optional param) .... 
```

问题：脚本没有收到 message-id 作为其参数（my-script 得到正确的显式设置参数）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-06-26T11:43:03.100

```
;; Make sure the Message-ID header is present in newly created messages
(setq message-generate-headers-first '(Message-ID))

;; Prevent emacs from resetting the Message-ID before the message is sent.
(setq message-deletable-headers
      (remove 'Message-ID message-deletable-headers))

(setq gnus-posting-styles
      '(("^pl\\.test$"
         ("Reply-To" '(message-make-reply-to))))) 
```

请注意 . 周围的附加引号和括号`message-make-reply-to`。对此的解释是该函数在不同时间运行，具体取决于它是作为符号给出还是作为带引号的 s 表达式给出。

*   如果作为符号给出，它将在 lambda 函数添​​加到时运行`message-setup-hook`。这发生在 a 中`message-mode-hook`，即在新缓冲区创建并切换到 之后`message-mode`。造成这种情况的原因是在创建 lambda 函数期间对值进行了一些疯狂的引用/取消引用。
*   如果作为引用的 sexpr 给出，则评估将延迟到缓冲区充满初始值之后。它接近在消息设置上运行的最后一个代码。

### 替代解决方案（不带`gnus-posting-styles`）

如果应将新标头添加到每条新消息，`Reply-To`标头也可以使用`message-header-setup-hook`. 需要定义一个自定义挂钩来为每条新消息添加标头。

```
(defun reply-to-message-header-setup-hook ()
  (let* ((msg-id (message-fetch-field "Message-ID"))
         (reply-to (my-script ".../reply-to-pl" msg-id)))
    (message-add-header (concat "Reply-To: " reply-to))))

;; Call the hook every time a new message is created
(add-hook 'message-header-setup-hook 'reply-to-message-header-setup-hook)

;; Make sure the Message-ID header is present in newly created messages
(setq message-generate-headers-first '(Message-ID)) 
```

# vb.net - 处理大量文件，被I/O拖慢，如何提高效率？

> ID：15310581
> 
> 赞同：1
> 
> 时间：2013-03-09T12:19:42.257
> 
> 标签：vb.net, multithreading, io

自从创建者停止工作以来，我一直在维护一个应用程序几年。该应用程序对大量图片进行批量操作，例如调整大小、应用文本、添加徽标等。

最近我一直在重写这个应用程序，以提高效率，并尝试通过使用所有可用内存并将操作拆分到多个线程来充分利用系统的所有功能。

以前的维护者以有些糟糕的方式实现了多线程，例如在 UI 线程中执行长时间操作（使停止按钮无法操作）和使用非常小的线程池。

所以我一直在优化代码并尝试增加线程池的大小，但显然没有任何改进，瓶颈似乎是读写磁盘。

有没有办法改善这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T12:31:24.970

准确确定应用程序此时执行的 IO。然后尝试将其转换为顺序访问模式。随机 IO 在磁盘上慢 100 倍，在 SSD 上慢 10 倍。

如果是磁盘，请确保一次只有一个线程顺序写入。如果您被迫进行随机 IO 调整最佳队列长度。

# ruby - 更改视图中日期字段的格式

> ID：15310587
> 
> 赞同：0
> 
> 时间：2013-03-09T12:20:29.183
> 
> 标签：ruby, ruby-on-rails-3, date-format

可能是一个简单的问题，但我像这样在我的模型中输入日期

```
<%= f.label :published_on, 'Published Date' %>
<%= f.date_select  :published_on, :order => [:day, :month, :year] %> 
```

从迁移创建列时，我将该列指定为：date

输出我使用

以这种格式显示

```
2013-01-01 
```

我怎样才能让这个日期显示

2014 年 1 月 1 日

例如，我可以使用此助手将字符串转换为日期

```
def date_format(date)
date.to_date.strftime("#{date.to_date.day.ordinalize} %b %Y")
end 
```

但是反过来做会让我失望

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T12:29:47.987

尝试这个..

```
date.strftime('%e %B %Y') 
```

访问此以获取更多格式[http://strfti.me/](http://strfti.me/)

# sql - 在 SQL Server 2012 的循环引用中保持数据完整性

> ID：15310588
> 
> 赞同：1
> 
> 时间：2013-03-09T12:20:30.210
> 
> 标签：sql, sql-server, tsql, constraints, data-integrity

假设我们有三张表 Customer、City 和 Country

国家表：

*   身份证(PK)
*   姓名。

城市表：

*   身份证（PK）
*   国家 ID (FK)
*   姓名

客户表：

*   身份证(PK)
*   国家 ID(FK)(NULL)
*   CityID(FK)(NULL)
*   姓名等...

正如您可以猜到的那样，客户可能已分配或未分配 CityID 或 CountryID。

那么，确保在插入/更新客户时我们不会得到一个不在指定国家/地区的城市的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T12:41:32.233

我不确定这是否是最好的方法，但您可以添加一个函数并在您的检查约束中使用它：

```
CREATE FUNCTION CheckCityInCountry(@CityID int, @CountryID int)
RETURNS int
AS 
BEGIN
   DECLARE @retval int
   SELECT @retval = COUNT(*) 
     FROM Cityies CI inner join Countries CO on (CI.CountryID, CO.ID)
     WHERE CO.CountryID = @CountryID and CityID = @CityID
   RETURN @retval
END;
GO 
```

如果城市在某个国家/地区，此函数将返回 1，否则返回 0。

然后使用该函数添加检查约束：

```
ALTER TABLE Customers
ADD CONSTRAINT chk_CheckCityInCountry CHECK (
   CityID is null OR
   dbo.CheckCityInCountry(CityID,CountryID) >= 1
);
GO 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T14:39:00.003

将 FK 关系设置为 Country 和 City 表

将 City 表更改为具有 CountryID、CityID 的复合 PK。
FK 关系必须同时引用两者。

FK 不强制为 null。

需要注意的是，您可以输入带有空国家/地区的错误 CityID，因为此时没有强制执行 FK。
但我认为这可以通过检查约束来强制执行。

```
ALTER TABLE dbo.CustomerCountyCity ADD CONSTRAINT CK_CustomerCountyCity
    CHECK (CountryID is not null OR CityID is Null) 
```

# java - 如何在 Spring MVC 中将数据从一个视图传输到另一个视图？

> ID：15310598
> 
> 赞同：1
> 
> 时间：2013-03-09T12:22:06.500
> 
> 标签：java, spring-mvc

该应用程序比这更复杂，因此我尝试提取代码的相关部分。

Web 应用程序的流程是我通过调用`selectItemForOrder()`方法从列表中选择执行商店。

executionShop 的 id 设置正确。

但是当我按下调用`finishOrder()`我得到的方法的 finishOrder 按钮时`NullPointerException`。我如何传输数据，因为我相信控制器类被破坏并且当我按下 finishOrder 按钮时会创建一个新的控制器。

将 id 保存在数据库中不是一种选择（这是我要解决的问题）。

对不起，如果这是一个微不足道的问题。我是 Spring MVC 的新手。

```
public class MyController {

private Integer executingShopId;

public View selectItemForOrder() {

setExecutingShopId(1);
return View;
}

public View finishOrder() {

System.out.println("Shop id: " + getExecutingShopId());
computeOrder(executingShopId);
return View;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T08:38:50.077

是的，您可以使用以下隐藏字段在 jsp 页面上保持 id 的值：

```
<form:hidden path="id"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T08:53:47.647

你是不是改了Controller的配置？对于默认控制器是单例模式，因此您的代码不会导致问题。如果你改变了Controller是原型模式的配置，就会导致问题。绝对可以将值存储在隐藏中，但我建议您将值存储在会话中，因为它更有意义且更安全。

```
public View selectItemForOrder(HttpSession session) {

session.setAttribute(XXXX,YYY);
return View;
}

public View finishOrder(HttpSession session) {
Session.getAttribute(XXXX)
System.out.println("Shop id: " + getExecutingShopId());
computeOrder(executingShopId);
return View;
} 
```

# xcode - 如何让 UIIamgeView 平滑移动？

> ID：15310607
> 
> 赞同：1
> 
> 时间：2013-03-09T12:23:13.567
> 
> 标签：xcode

那里。我有一些关于 xocde 的显示问题。

当我使用 UIView 和 UIIamgeView 增加了我的游戏。我发现最终的结果看起来有点奇怪。它看起来像滞后或不顺利。

当移动速度非常低时会很好。但是当数值超过 3（甚至只有 FPS30）时，它就会变得可见。我检查了很多游戏，即使它们的移动速度比我的快，它们也没有这个问题。

我过去只使用一个更新来控制一切。然后我通过 NSTimer scheduleTimerWithTimeInterval 调用更新。并通过 CGAffineTransform 更改 UIView 或 UIImageView 或更改它自己的框架，这取决于我需要什么。

我该如何解决这个问题？有什么建议吗？谢谢。

ps.我尝试了很多方法，包括UIView Animation，UIScrollView，OpenGL，但仍然遇到同样的问题。请原谅我的英语不好。

# java - 在模拟器中使用 JSON 从数据库接收数据

> ID：15310608
> 
> 赞同：0
> 
> 时间：2013-03-09T12:23:15.373
> 
> 标签：java, android, eclipse, nullpointerexception

我已经构建了一个应用程序，它从我的 MySql 数据库中接收一些字符串。当我在模拟器中运行它时，它可以工作，但每当我尝试在我的设备（Galaxy Nexus）上运行它时，我只是得到一个强制关闭。模拟器是GB（2.2），我的设备是JB（4.2.2）。我还在清单中添加了 INTERNET 权限。

ListDBItems.java

```
public class VideoController extends SherlockListActivity implements OnClickListener{

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        //getWindow().setFormat(PixelFormat.TRANSLUCENT);
        setContentView(R.layout.dblist);
        getSupportActionBar().setDisplayHomeAsUpEnabled(true);
        getSupportActionBar().setTitle("DB ITEMS");

        ArrayList<HashMap<String, String>> mylist = new ArrayList<HashMap<String, String>>();

        JSONObject json = JSONfunctions.getJSONfromURL("http://strongpixel.com/java/getDB.php");

        try{

            JSONArray  shows = json.getJSONArray("items");

            for(int i=0;i<shows.length();i++){                      
                HashMap<String, String> map = new HashMap<String, String>();    
                JSONObject e = shows.getJSONObject(i);

                map.put("id",  String.valueOf(i));
                map.put("name", "" + e.getString("name"));
                map.put("season", "Season: " + e.getString("season"));
                map.put("path", "" +  e.getString("path"));
                mylist.add(map);            
            }       
        }catch(JSONException e)        {
             Log.e("log_tag", "Error parsing data "+e.toString());
        }

        ListAdapter adapter = new SimpleAdapter(this, mylist , R.layout.dbitems, 
                        new String[] { "name", "season" }, 
                        new int[] { R.id.item_title, R.id.item_subtitle });

        setListAdapter(adapter);

        final ListView lv = getListView();
        lv.setTextFilterEnabled(true);  
        lv.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {              
                @SuppressWarnings("unchecked")
                HashMap<String, String> o = (HashMap<String, String>) lv.getItemAtPosition(position);                   
                Toast.makeText(VideoController.this, "ID '" + o.get("id") + "' was clicked.", Toast.LENGTH_SHORT).show(); 

                Intent myIntent = new Intent(VideoController.this, MainActivity.class);
                myIntent.putExtra("name", o.get("name")); 
                myIntent.putExtra("season", o.get("season")); 
                myIntent.putExtra("path", o.get("path")); 
                startActivity(myIntent); 
            }
        });
} 
```

我的清单

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.spxc.ssa.streaming"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/Holo.Theme.Light.DarkActionBar" >
        <activity
            android:name="com.spxc.ssa.streaming.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name="com.spxc.ssa.streaming.VideoController"
            android:label="@string/app_name"
            android:configChanges="orientation">
        </activity>
        <activity
            android:name="com.spxc.ssa.streaming.PlayVideo"
            android:label="@string/app_name" >
        </activity>
    </application>
    <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
</manifest> 
```

最后但不是最后一个，logcat（NULL 异常）

```
03-09 13:22:15.975: E/AndroidRuntime(5141): FATAL EXCEPTION: main
03-09 13:22:15.975: E/AndroidRuntime(5141): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.spxc.ssa.streaming/com.spxc.ssa.streaming.VideoController}: java.lang.NullPointerException
03-09 13:22:15.975: E/AndroidRuntime(5141):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2304)
03-09 13:22:15.975: E/AndroidRuntime(5141):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2354)
03-09 13:22:15.975: E/AndroidRuntime(5141):     at android.app.ActivityThread.access$600(ActivityThread.java:150)
03-09 13:22:15.975: E/AndroidRuntime(5141):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1244)
03-09 13:22:15.975: E/AndroidRuntime(5141):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-09 13:22:15.975: E/AndroidRuntime(5141):     at android.os.Looper.loop(Looper.java:137)
03-09 13:22:15.975: E/AndroidRuntime(5141):     at android.app.ActivityThread.main(ActivityThread.java:5191)
03-09 13:22:15.975: E/AndroidRuntime(5141):     at java.lang.reflect.Method.invokeNative(Native Method)
03-09 13:22:15.975: E/AndroidRuntime(5141):     at java.lang.reflect.Method.invoke(Method.java:511)
03-09 13:22:15.975: E/AndroidRuntime(5141):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:795)
03-09 13:22:15.975: E/AndroidRuntime(5141):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:562)
03-09 13:22:15.975: E/AndroidRuntime(5141):     at dalvik.system.NativeStart.main(Native Method)
03-09 13:22:15.975: E/AndroidRuntime(5141): Caused by: java.lang.NullPointerException
03-09 13:22:15.975: E/AndroidRuntime(5141):     at com.spxc.ssa.streaming.VideoController.onCreate(VideoController.java:44)
03-09 13:22:15.975: E/AndroidRuntime(5141):     at android.app.Activity.performCreate(Activity.java:5104)
03-09 13:22:15.975: E/AndroidRuntime(5141):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
03-09 13:22:15.975: E/AndroidRuntime(5141):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2258)
03-09 13:22:15.975: E/AndroidRuntime(5141):     ... 11 more 
```

谢谢

编辑：JSONfunctions.java

```
package com.spxc.ssa.streaming.task;

import java.io.BufferedReader;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.util.HashMap;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.util.Log;

public class JSONfunctions {

    public static JSONObject getJSONfromURL(String url){
        InputStream is = null;
        String result = "";
        JSONObject jArray = null;

        //http post
        try{
                HttpClient httpclient = new DefaultHttpClient();
                HttpPost httppost = new HttpPost(url);
                HttpResponse response = httpclient.execute(httppost);
                HttpEntity entity = response.getEntity();
                is = entity.getContent();

        }catch(Exception e){
                Log.e("log_tag", "Error in http connection "+e.toString());
        }

      //convert response to string
        try{
                BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
                StringBuilder sb = new StringBuilder();
                String line = null;
                while ((line = reader.readLine()) != null) {
                        sb.append(line + "\n");
                }
                is.close();
                result=sb.toString();
        }catch(Exception e){
                Log.e("log_tag", "Error converting result "+e.toString());
        }

        try{

            jArray = new JSONObject(result);            
        }catch(JSONException e){
                Log.e("log_tag", "Error parsing data "+e.toString());
        }

        return jArray;
    }
} 
```

# css - 之后添加 Font Awesome 图标 使用 CSS

> ID：15310613
> 
> 赞同：10
> 
> 时间：2013-03-09T12:23:41.200
> 
> 标签：css, font-awesome

我正在寻找使用 CSS 设置水平规则的样式。到目前为止，我已经这样做了：

[http://tinkerbin.com/vdzgAZ9q](http://tinkerbin.com/vdzgAZ9q)

但是，我想使用[Font Awesome](http://fortawesome.github.com/Font-Awesome/)中的 'icon-star'而不是`§`符号。

有人能告诉我这是怎么做的吗？

谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-09T12:54:30.270

第一步是从**[fortawesome](http://fortawesome.github.com/Font-Awesome/)**
下载字体 第二步将它们包含在 css 中。**注意字体文件的路径**：

```
@font-face {
  font-family: 'FontAwesome';
  src: url('../font/fontawesome-webfont.eot?v=3.0.1');
  src: url('../font/fontawesome-webfont.eot?#iefix&v=3.0.1') format('embedded-opentype'),
    url('../font/fontawesome-webfont.woff?v=3.0.1') format('woff'),
    url('../font/fontawesome-webfont.ttf?v=3.0.1') format('truetype');
  font-weight: normal;
  font-style: normal;
} 
```

最后，将 hr 选择器的内容规则从“§”替换为“\f005”

```
hr:after { content: "\f005";} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-09T12:53:52.520

你根本不需要这个`hr`元素。

你去：http: [//jsfiddle.net/Qc6J4/](http://jsfiddle.net/Qc6J4/)

# php - 如何插入变量？从表单到 file_get_contents 链接

> ID：15310614
> 
> 赞同：0
> 
> 时间：2013-03-09T12:23:45.363
> 
> 标签：php, string, hyperlink, file-get-contents

如何将表单中的变量插入 file_get_contents("link+formdata")

通过表单提交的变量，包含句号、数字、字母

示例：danny.29 将替换以下链接中的 HERE：

file_get_contents(" [http://userapi.website.com/HERE](http://userapi.website.com/HERE) ");

如您所见，我对此很陌生，非常感谢您提供任何帮助:)

索引.html

```
<html>
<body>

<form action="add.php" method="post">
ID: <input type="text" name="add">
<input type="submit">
</form>

</body>
</html> 
```

添加.php

```
<html>
<body>

<?php $x=$_POST['add'];?>

<?php
echo file_get_contents("http://userapi.website.com/"echo $x;");
?>

<?php echo $_POST["file_get_contents"]; ?>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T12:28:41.507

```
<?php echo $_POST["file_get_contents"]; ?> 
```

没有意义。POST 数组将仅包含`add`第一次加载时的密钥。

```
echo file_get_contents("http://userapi.website.com/". $x); 
```

将正确获取地址页面的内容，但要将其存储到变量中，您只需要做：

```
$var = file_get_contents("http://userapi.website.com/". $x); 
```

这个脚本也不是完全安全的。您应该始终验证用户输入（在这种情况下是您的 POST 变量）。我建议您使用 REGEX 或该变量的可接受值列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T12:26:04.383

```
<?php echo file_get_contents("http://userapi.website.com/" . $x); ?> 
```

点用于[连接](http://php.net/manual/en/language.operators.string.php)

# datagridview - C# winforms 4.0 datagridview 多选复选框

> ID：15310617
> 
> 赞同：1
> 
> 时间：2013-03-09T12:23:53.973
> 
> 标签：datagridview, multi-select, datagridviewcheckboxcell

多选 DataGridView 和其中的复选框列。我想允许用户检查/取消选中所有选定的行，但是当检查一个复选框时，选择将移动到此行（并且其他行变为未选择）。

问：当用户选中/取消选中复选框时，有什么方法可以防止 DatagridView 中的选择更改？

# android - 如何制作一个包含标题和 2 个按钮的操作栏？

> ID：15310620
> 
> 赞同：1
> 
> 时间：2013-03-09T12:24:25.293
> 
> 标签：android, android-actionbar

我想做一个`Action Bar`这样 [的，](http://www.androidside.com/docs/////resources/samples/images/ActionBarCompat1.png)
我在 Android sdk 中尝试过这个示例，但它太复杂`.java`了，这个 Action Bar 有 8 个文件？

* * *

![ActionBarCompat](../Images/9d917e50e9c68b212baff69b32b92fd7.png)

* * *

我希望有人可以为我提供更简单的方法和更简单的方法。因为我认为我不会为了制作`Action Bar`作品而将所有这 8 个文件复制到我的项目中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T12:30:50.977

这是一种方法。

Beginns 在您的 res/menu 文件夹 action_bar_menu.xml 中添加一个简单的布局

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

    <item
        android:id="@+id/action_one"
        android:icon="@drawable/icon1.png"
        android:showAsAction="always"
        android:title="One">
    </item>
    <item
        android:id="@+id/action_two"
        android:icon="@drawable/icon2.png"
        android:showAsAction="always"
        android:title="Two">
    </item>

</menu> 
```

在你的活动中

```
 @Override
  protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    ActionBar actionBar = getActionBar();
    actionBar.setTitle("your title"); 
    // add the custom view to the action bar
    //actionBar.setCustomView(R.layout.actionbar_view);

    actionBar.setDisplayOptions(ActionBar.DISPLAY_SHOW_CUSTOM
        | ActionBar.DISPLAY_SHOW_HOME);
  }

 @Override
   public boolean onCreateOptionsMenu(Menu menu) {
      getMenuInflater().inflate(R.menu.action_bar_menu, menu);
      return true;
   }

   @Override
   public boolean onOptionsItemSelected(MenuItem item) {
      switch (item.getItemId()) {
      case R.id.action_one:
         //put your business logic here
         break;
      case R.id.action_two:
         //put your business logic here
         break;
     case android.R.id.home:
        //put your business logic here
     break;
      default:
         // Nothing to do here 
      }
      return true;
   } 
```

# python - Pexpect 孩子不阅读配置文件

> ID：15310621
> 
> 赞同：0
> 
> 时间：2013-03-09T12:24:30.813
> 
> 标签：python, linux, raspberry-pi, pexpect, pandora

我正在尝试使用 pexpect 打开pianobar（Pandora 在线广播的客户端）。

如果我只是从命令行（不是从我的 Python 程序）启动pianobar，它会使用配置文件中的信息（电子邮件、密码、TLS_fingerprint）自动登录。

如果我在 IDLE 中运行我的脚本，它也可以工作。但是如果我从命令提示符运行它，它就像看不到配置文件一样，并要求我输入我的电子邮件和密码。

我可以将我的电子邮件和密码输入它，但我不知道如何处理 TLS_fingerprint，并以“TLS 握手失败”告终

我是一个完全的新手，在我的头上，但如果我能让这个工作，那就太好了。我正在使用 Raspian Wheezy Linux 发行版在 Raspberry Pi 上执行此操作。

谢谢齐戈

```
Here is the relevant code:
from pexpect import spawn

child = spawn('/usr/bin/pianobar')  
#starts pianobar which then should log me on automatically with info from its config file

print channel
child.expect('station:')    #looks for prompt from pianobar for ‘station:'
print child.before
child.sendline('35')       #tells pianobar I’d like it to play station 35 
```

使用下拉菜单中的运行从空闲窗口正常工作，但如果我从带有 'sudo python' 的 bash 提示符开始，它会启动进程然后挂起。

我从错误消息中发现，当从 bash 提示符运行时它不会自动登录（它在空闲时很好）。
它停下来询问“电子邮件：？”，所以它永远不会到达“站：”

我可以通过在我的脚本中添加“child.expect”和“child.sendline”语句来输入电子邮件和密码来解决这个问题，但后来它停止了，因为“TLS 握手失败”

由于电子邮件、密码和 TLS 信息都是配置文件，我认为由于某种原因它没有访问配置文件。

感谢您花时间看这个，Zygo

# eclipse - 在 Hibernate Tools 3.4.0.CR1 生成的 POJO 中插入 @NotNull 注解

> ID：15310623
> 
> 赞同：0
> 
> 时间：2013-03-09T12:24:34.783
> 
> 标签：eclipse, hibernate, annotations

我正在使用 eclipse juno 的 Hiberate Tool 插件来生成映射 DB 表的 java bean

它创建 java 文件（例如）：

```
@Entity
@Table(name = "ACTIVITIES")
public class Activities implements java.io.Serializable {

    private ActivitiesId id;
    private String title;

    @EmbeddedId
    @AttributeOverrides({
        @AttributeOverride(name = "id", column = @Column(name = "id", nullable = false)),
        @AttributeOverride(name = "codiceCreatore", column = @Column(name = "codice_creatore", nullable = false)) 
    })
    public SynchActivitiesDTOId getId() {
        return this.id;
    }

    public void setId(SynchActivitiesDTOId id) {
        this.id = id;
    }

    @Column(name = "title", nullable = false)
    public String getTitle() {
        return this.title;
    }

    public void setTitolo(String title) {
        this.title = title;
    }

} 
```

我希望它在属性或 get 方法上也写 @NotNull 注释：

```
@Entity
@Table(name = "ACTIVITIES")
public class Activities implements java.io.Serializable {

    @NotNull
    private ActivitiesId id;
    @NotNull
    private String title;

    ...

} 
```

我尝试编辑 Ejb3PropertyGetAnnotation.ftl（在 C:\Program Files\eclipse\plugins\org.hibernate.eclipse.libs_3.4.0.v20120611-2017-H93-Final\lib\tools\hibernate-tools.jar\pojo 中）添加

```
<#if !property.optional>
    @${pojo.importType("org.hibernate.validator.NotNull")}
</#if> 
```

但是Activities.java中没有变化

我该怎么办？

提前致谢

编辑：我试图修改 C:\Program Files\eclipse\plugins\org.hibernate.eclipse.libs_3.4.0.v20120611-2017-H93-Final\lib\tools\hibernate-tools.jar\pojo\PojoFields

```
<#foreach field in pojo.getAllPropertiesIterator()><#if pojo.getMetaAttribAsBool(field, "gen-property", true)> <#if pojo.hasMetaAttribute(field, "field-description")>    /**
     ${pojo.getFieldJavaDoc(field, 0)}
     */
 </#if>    ${pojo.getFieldModifiers(field)} ${pojo.getJavaTypeName(field, jdk5)} ${field.name}<#if pojo.hasFieldInitializor(field, jdk5)> = ${pojo.getFieldInitialization(field, jdk5)}</#if>;
</#if>
+ <#if !field.optional>@${pojo.importType("org.hibernate.validator.NotNull")}</#if>
</#foreach> 
```

但没有任何改变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T10:48:27.630

您可以通过休眠逆向工程 xml 进行调整方法（非常实用）。Eclipse hibernate 工具会让你指定一个。

例如，对于您的表，包括名为 id 的列的以下元属性：

```
<hibernate-reverse-engineering>
    <table-filter package="my.package" match-name="ACTIVITIES" />
    <table name="ACTIVITIES">
        <meta attribute="extra-import">javax.validation.constraints.NotNull</meta>
        <column name="titolo">
            <meta attribute="scope-field">@NotNull private</meta>
        </column>
    </table>
</hibernate-reverse-engineering> 
```

该字段将使用我们为“scope-field”属性提供的限定符限定范围。在那里，我们调整了我们需要的任何额外的限定符。在此示例中，我们将其标记为私有并另外添加 @NotNull 限定符。请参阅上面使用的元属性以获取额外的导入。

有关元属性的完整列表 - 请参阅此[链接](https://access.redhat.com/knowledge/docs/en-US/JBoss_Developer_Studio/4.0/html/Hibernate_Tools_Reference_Guide/codegen.html)

HTH。

# java - BoxLayout动态添加组件（两列）

> ID：15310626
> 
> 赞同：3
> 
> 时间：2013-03-09T12:25:10.363
> 
> 标签：java, swing, layout-manager, boxlayout

我想创建一个 JPanel，我可以在其中添加 Text Fields *min 1 max 12*。（所以我决定创建 JPanel，它有足够的空间来包含 6 行和 2 列中的 12 个文本字段）。这取决于用户将选中多少个复选框。更重要的是，这些文本字段应该在此 JPanel 中以**左对齐的方式****从上到下出现。**并且每次未选中其中一个复选框时，指定的文本字段都会从 JPanel 中删除，其余的会移动到这个空白区域（*向上移动以覆盖其空间*）。

 ***因此，如果有必要，我会创建文本字段，而不是在开头创建所有内容并 setVisible(false)。我认为这是更好的解决方案。

例如：

```
//each JTexyField have the same size

JPanel panel = new JPanel(new LayoutManager()); //in my case BoxLayout
If(checkboxEuro == chcecked) {
   JTextField fieldEuro = new JTextField(); 
   panel.add(fieldEuro);
}
else if(checkbox2 == ...) panel.add(fieldDolar);
...
If(checkboxDolar = = unchecked) panel.remove(fieldDolar); 
```

（而且我不在乎这个按钮出现在哪里，重要的是，这个按钮应该出现在这个面板中的现有按钮之后）

### 我得到了什么

如果 JPanel 底部没有足够的空间，LM 应该在从顶部开始的下一列中添加此文本字段。在此示例 6x2 中，如果我尝试添加另一个（第 7 个）文本字段，并且在此列中没有足够的空间，它应该出现在顶部的第二列中，但事实并非如此。当我使用 BoxLayout 时，第 7 个文本字段一半出现在 JPanel 上，一半出现在上面。

我应该怎么办？更改布局管理器，或者可能有不允许越界 JPanel 的选项？ **（这是最重要的）**

我得到这个：![面板图片1](../Images/7bc2771a3d93d7a0d1b456990f84be8c.png)，并且想要这个：![面板图片2](../Images/6ca286cef3748e88e908ceaa004aa0a5.png)

（对不起语言 - 这是第一次）

- - 编辑 - -

**万一我们误解了：**让我做对了，我正在寻找不同 LM 中的方法/选项，如果没有空间添加 TextField（在本例中为第 7 个），它可以帮助我“滚动”行，应该移动到 TOP 上的下一个（列）。我没有定义 2 列，但是这个 JPanel 的区域让我觉得好像有一个空间可以容纳 2 列 JTextField。当我添加所有 12 个字段并删除例如第二个字段时，它们应该向上移动以覆盖这个空间

```
1 4            2 5
2 5  remove 1  3 6
3 6            4 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T13:19:01.657

在所有这些复选框值都已知之后，您似乎正在构建 JPanel。在这种情况下，只需确定首先需要添加多少文本字段，然后创建布局。为了简化您的代码，我建议您将复选框元素放在一个数组中。然后你可以做这样的事情：

```
JCheckBox[] checkBoxes = new JCeckBox[12];
JTextField[] currencyFields = new JTextField[12];
//Then in your constructor you can initialize the Checkboxes, but not the text fields.
checkBoxes[0] = new JCheckBox("Euros");
checkBoxes[1] = new JCheckBox("Hungarian Forint");
// and so on.

//Compute how many text fields we need:
private int numberOfBoxesChecked() {
   c=0;
   for(JCheckBox cb : checkBoxes ) {
       if(cb.isSelected())
           c++;
   }
   return c;
} 
```

现在，当您构建面板时，您可以使用它`numberOfBoxesChecked()`来确定如何初始化您的布局。***

# maven - 自定义 Maven 以在构建时自动创建 ANTLR4 语法 java 文件

> ID：15310628
> 
> 赞同：2
> 
> 时间：2013-03-09T12:25:22.060
> 
> 标签：maven, antlr4, custom-build-step

如何编译 ANTLR4 语法作为 maven 构建的第一步？

手动从 *.g4 文件创建语法非常简单——在 Linux 上，只需`java -jar /usr/local/lib/antlr-4.0-complete.jar grammarName.g4`从控制台运行即可。这会创建一些需要在下一步构建中编译的 java 文件。

是否可以指示 maven 查找所有 *.g4 文件，然后为每个文件运行上述命令，然后继续构建？如果语法编译失败，构建也应该失败。

或者也许有一个插件可以处理这个任务？

我已经看到[了这个答案](https://stackoverflow.com/questions/14926060/how-to-automatically-generate-lexerparser-with-antlr4-and-maven)- 缺点是它依赖于 IDE。我希望我的构建尽可能独立于 IDE 和系统（而且我使用的是 Netbeans，所以给出的答案是不可接受的）。

**编辑**

我已经尝试了benzonico的建议。我添加了其他答案中引用的 pom.xml 中列出的依赖项。这是我的 pom.xml 的样子：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
<modelVersion>4.0.0</modelVersion>

<groupId>pl.kajman</groupId>
<artifactId>antlr-sandbox</artifactId>
<version>1.0-SNAPSHOT</version>
<packaging>jar</packaging>

<name>antlr-sandbox</name>
<url>http://maven.apache.org</url>

<properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
</properties>

<dependencies>
    <dependency>
        <groupId>org.antlr</groupId>
        <artifactId>antlr4-maven-plugin</artifactId>
        <version>4.0</version>
    </dependency>
    <dependency>
        <groupId>com.tunnelvisionlabs</groupId>
        <artifactId>antlr4-runtime</artifactId>
        <version>4.0</version>
        <scope>compile</scope>
    </dependency>
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.11</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>com.tunnelvisionlabs</groupId>
        <artifactId>antlr4</artifactId>
        <version>4.0</version>
        <classifier>complete</classifier>
    </dependency>
</dependencies>
<build>
    <sourceDirectory>src</sourceDirectory>
    <outputDirectory>bin</outputDirectory>

    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>3.0</version>
            <configuration>
                <source>6</source>
                <target>6</target>
                <showWarnings>true</showWarnings>
                <showDeprecation>true</showDeprecation>
                <compilerArguments>
                    <Xlint />
                </compilerArguments>
            </configuration>
        </plugin>

        <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>build-helper-maven-plugin</artifactId>
            <version>1.7</version>
            <executions>
                <execution>
                    <phase>generate-sources</phase>
                    <goals>
                        <goal>add-source</goal>
                    </goals>
                    <configuration>
                        <sources>
                            <source>target/generated-sources/antlr4</source>
                        </sources>
                    </configuration>
                </execution>
            </executions>
        </plugin>

        <plugin>
            <groupId>com.tunnelvisionlabs</groupId>
            <artifactId>antlr4-maven-plugin</artifactId>
            <version>4.0</version>
            <configuration>
                <sourceDirectory>src</sourceDirectory>
            </configuration>
            <executions>
                <execution>
                    <goals>
                        <goal>antlr4</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>
    </plugins>
</build> 
```

Java 文件是从 g4 文件中自动生成的，但不幸的是有很多错误。它们与我在手动编译并且类路径错误时所拥有的非常相似。一些错误是：

```
/home/kajman/projects/antlr/antlr-sandbox/target/generated-sources/antlr4/main/java/pl/kajman/antlr/sandbox/grammars/ExprListener.java:[6,56] type org.antlr.v4.runtime.tree.ParseTreeListener does not take parameters

/home/kajman/projects/antlr/antlr-sandbox/target/generated-sources/antlr4/main/java/pl/kajman/antlr/sandbox/grammars/ExprParser.java:[44,32] cannot find symbol
symbol:   method 
getRuleContexts(java.lang.Class<main.java.pl.kajman.antlr.sandbox.grammars.ExprParser.StatContext>)
location: class main.java.pl.kajman.antlr.sandbox.grammars.ExprParser.ProgContext 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T12:44:36.410

实际上，您在问题中提到的帖子中提出的解决方案使用`antlr maven plugin`与您需要的完全兼容的解决方案。解决方案的要点是能够在 eclipse 中使用它，但如果您不需要，您可以跳过要点中讨论的部分`m2e`（在`pluginManagement`会话中）并`antlr maven plugin`立即使用。

查看[插件的文档](http://mojo.codehaus.org/antlr-maven-plugin/)

# php - 防止phpmyadmin数据冗余

> ID：15310631
> 
> 赞同：0
> 
> 时间：2013-03-09T12:25:50.757
> 
> 标签：php, html, database, phpmyadmin, redundancy

我要创建一个注册系统，我的数据库中有以下表格：

```
Subject //Primary key: Subj_no
Student //Primary key: Stdnt_no
Subject_Student //Primary key: Subj_Stdnt_no 
```

其中 Subject_Student 与 Subject 和 Student 及其主键相关（索引）。

现在我的问题是：如何防止数据库再次建立相同的关系？示例>例如，我在 Subject_Student 中有以下行：

```
Subj_Stdnt_no | Subject |  Student 
      1       |    1    |     2
      2       |    1    |     6
      3       |    1    |     2       <------How can I prevent that? It's redundant. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T12:27:35.580

PhpMyAdmin 是 mysql 的查询工具，不是数据库。

您需要组合 (Student, Subject) `UNIQUE`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T12:53:08.193

我已经设法通过我使用的@Femaref 的帮助回答了我自己的问题：ALTER TABLE Subject_Student ADD UNIQUE (Subject,Student);

# javascript - javascript将数据发送到url

> ID：15310636
> 
> 赞同：2
> 
> 时间：2013-03-09T12:17:22.213
> 
> 标签：javascript

我已经尝试使用此代码向特定 IP 发送一些信息。该IP是充当服务器的微控制器。

但是，它将信息发送到以该 IP 命名的页面而不是该 IP。

代码是用 JavaScript 编写的。我应该怎么做？使用 post 方法或 Xmlhttprequest 以及如何做到这一点。我认为我的代码很简单：

```
<!DOCTYPE html>
<html>
<head>
<script>
function validateForm()
{
var x=document.forms["myForm"]["fname"].value;
if (x==null || x=="")
  {
  alert("First name must be filled out");
  return false;
  }
}
</script>
</head>

<body>
<form name="myForm" action="192.168.1.250" onsubmit="return validateForm()" method="post">
First name: <input type="text" name="fname">
<input type="submit" value="Submit">
</form>
</body>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T12:29:39.420

您需要包含协议

```
action="http://192.168.1.250" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T13:38:59.643

如果您也想将用户发送到该 IP，那么您将使用 POST。如果实际上您想保持在同一页面上，请发送信息 - 反之亦然，那么 AJAX 调用确实是最足够的。下面我使用 vanilla JavaScript 而不是任何 JavaScript 库，尽管使用 jQuery 会为您提供一些回调/帮助程序以使您的代码更稳定。

jsfiddle：http: [//jsfiddle.net/atjBQ/3/](http://jsfiddle.net/atjBQ/3/)

```
<script>
    /** 
     * Validate Form, else, Send Ajax
    **/
    function validateform() {
       var x = document.forms["myForm"]["fname"].value;
        if ( x == null || x == "" ) { 
            alert( "First Name must be filled out" );  
            return false;
        }

        /** 
         * If POST
         *   use: xmlhttp.setRequestHeader(
         *           "Content-type", 
         *           "application/x-www-form-urlencoded"
         *           );
        **/
        var xmlhttp = new XMLHttpRequest();
        xmlhttp.open("GET", "http://192.168.1.250?q=" + x, true);
        xmlhttp.send();
        return false;
    }
</script>

<form name="myForm" id="myformtosend">
    <label for="fname">First name:</label><input type="text" name="fname" />
    <input type="submit" value="Submit" />
</form> 
```

**使用 jQuery**：

```
/** 
 * Snippet Reference to: 
 * http://api.jquery.com/jQuery.post/   
**/

<script>
   $.ajax({
     type: "POST",
     url: "http://192.168.1.250",
     data: data,
     success: function() {
        /** Some Code **/
     }   
   });
</script> 
```

# android - Google Map V2 安卓地图参考

> ID：15310637
> 
> 赞同：1
> 
> 时间：2013-03-09T12:26:27.093
> 
> 标签：android, google-maps, reference

我正在尝试为 android 设置谷歌地图。我看到两个缩放按钮，但没有显示地图。在过去的 6-7 个小时里，我一直在努力奋斗。早些时候它显示错误（没有打开），现在它没有显示地图。

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.counz.app"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="16" />

<permission
    android:name="com.example.mapdemo.permission.MAPS_RECEIVE"
    android:protectionLevel="signature" />

<uses-feature
    android:glEsVersion="0x00020000"
    android:required="true" />

<uses-permission android:name="com.example.mapdemo.permission.MAPS_RECEIVE" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.counz.app.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <meta-data
        android:name="com.google.android.maps.v2.API_KEY"
        android:value="(mykey)" />
</application> 
```

编辑：这是 LogCat 错误

```
 03-09 23:15:47.210: W/KeyCharacterMap(14440): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
03-09 23:16:24.740: W/dalvikvm(14545): VFY: unable to resolve instance field 23
03-09 23:16:25.540: W/dalvikvm(14545): Unable to resolve superclass of Lmaps/p/s; (427)
03-09 23:16:25.540: W/dalvikvm(14545): Link of class 'Lmaps/p/s;' failed
03-09 23:16:25.540: W/dalvikvm(14545): Unable to resolve superclass of Lmaps/y/bo; (3820)
03-09 23:16:25.540: W/dalvikvm(14545): Link of class 'Lmaps/y/bo;' failed
03-09 23:16:25.540: W/dalvikvm(14545): Unable to resolve superclass of Lmaps/i/k; (4208)
03-09 23:16:25.540: W/dalvikvm(14545): Link of class 'Lmaps/i/k;' failed
03-09 23:16:25.540: E/dalvikvm(14545): Could not find class 'maps.i.k', referenced from method maps.z.ag.a
03-09 23:16:25.540: W/dalvikvm(14545): VFY: unable to resolve new-instance 3540 (Lmaps/i/k;) in Lmaps/z/ag;
03-09 23:16:29.020: I/ActivityThread(14545): queueIdle
03-09 23:16:29.060: V/ActivityThread(14545): Reporting idle of ActivityRecord{4a4a9288 token=android.os.BinderProxy@4a4a8df8 {com.counz.app/com.counz.app.MainActivity}} finished=false
03-09 23:16:29.060: W/ActivityNative(14545): send ACTIVITY_IDLE_TRANSACTION
03-09 23:16:29.750: E/Google Maps Android API(14545): Authorization failure.
03-09 23:16:58.600: I/ActivityThread(14545): queueIdle
03-09 23:16:58.600: V/ActivityThread(14545): Reporting idle of ActivityRecord{4a4a9288 token=android.os.BinderProxy@4a4a8df8 {com.counz.app/com.counz.app.MainActivity}} finished=false
03-09 23:16:58.600: W/ActivityNative(14545): send ACTIVITY_IDLE_TRANSACTION 
```

谢谢。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T15:32:27.717

您引用错误的方式，请查看我为在您的应用程序中获取 Google 地图而编写的这个简短的 8 步指南，请准确按照步骤操作，最后您将获得 Google 地图。

在编写本指南时，我正在创建一个 Google 地图应用程序，您可以在其末尾看到最终结果。

[**创建 Google Map API V2**](https://blog-emildesign.rhcloud.com/?p=435)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T13:22:48.443

`Acrivity`必须扩展`FragmentActivity`以进行适当的片段膨胀。请检查是否`MainActivity`扩展`FragmentActivity`。请记住，如果您为旧版本的 Android 编写应用程序，则必须使用支持库 v4 而`SupportMapFragment`不是`MapFragment`.

顺便提一句。在 Eclipse 中引用 android 库不会改变`AndroidManifest.xml`，只有`project.properties`. 您必须像这样手动添加行

```
<activity android:name="com.example.android.tictactoe.library.GameActivity" /> 
```

仅当您使用`Activity`图书馆中的一些时。在谷歌地图 v2 的情况下，您只需要`MapFragment`，所以您不必这样做。

# android - 从android向jsp发送数据

> ID：15310638
> 
> 赞同：2
> 
> 时间：2013-03-09T12:26:34.470
> 
> 标签：android, jsp, servlets, localhost, http-post

我正在尝试将数据发送到在本地主机上运行的 jsp 文件。当我在手机上单击提交时，应用程序失败，并向我显示*不幸的是，应用程序已停止。*

**登录任务：**

```
public class LoginTask extends AsyncTask<String, Void, Integer> {

    private ProgressDialog progressDialog;
    private LoginActivity activity;
    private int id = -1;
        public LoginTask(LoginActivity activity, ProgressDialog progressDialog)
        {
            this.activity = activity;
            this.progressDialog = progressDialog;
        }

        @Override
        protected void onPreExecute()
        {
            progressDialog.show();
        }

        @Override
        protected Integer doInBackground(String... arg0) 
        {
            String result = "";
            int responseCode = 0;
            try 
            {
                HttpClient client = new DefaultHttpClient();
                HttpPost httppost = new HttpPost("http://192.168.1.100:8080/test/AndroidCheck.jsp");

                List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
                    nameValuePairs.add(new BasicNameValuePair("username", arg0[0]));
                    nameValuePairs.add(new BasicNameValuePair("password", arg0[1]));
                httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

                int executeCount = 0;
                HttpResponse response;
                do
                {
                    progressDialog.setMessage("Logging in.. ("+(executeCount+1)+"/5)");
                                    executeCount++;
                    response = client.execute(httppost);
                    responseCode = response.getStatusLine().getStatusCode();                        
                                } while (executeCount < 5 && responseCode == 408);

                BufferedReader rd = new BufferedReader(new InputStreamReader(
                        response.getEntity().getContent()));

                String line;
                while ((line = rd.readLine()) != null)
                {
                    result = line.trim();
                }
                id = Integer.parseInt(result);
            }
            catch (Exception e) {
                responseCode = 408;
                e.printStackTrace();
            }
            return responseCode;
        }

        @Override
        protected void onPostExecute(Integer headerCode)
        {
            progressDialog.dismiss();
            if(headerCode == 202)
                activity.login(id);
            else
                activity.showLoginError("");
        }
    } 
```

**登录活动：**

```
public class LoginActivity extends Activity {
    protected static final int LOGIN_REQUEST_CODE = 0;
    protected static final int RECOVER_REQUEST_CODE = 1;
    protected static final int REGISTER_REQUEST_CODE = 2;
    public static final int LOGOUT_RESULT_CODE = 2;

    SharedPreferences sharedPreferences;
    private EditText username;
     private EditText password;
      private Button btnLogin;;

        private final Class<?> LOGIN_DESTINATION = AndroidNavigationTabsActivity.class; 

    @Override
    protected void onCreate(Bundle savedInstanceState) 
    {

        sharedPreferences = getPreferences(MODE_PRIVATE);

        super.onCreate(savedInstanceState);

        if( sharedPreferences.getBoolean("user_logged_in", false))
        {

            startActivityForResult(
                new Intent(LoginActivity.this, LOGIN_DESTINATION), 
                LOGIN_REQUEST_CODE);
        }

        setContentView(R.layout.login_activity);
        username=(EditText)this.findViewById(R.id.username);
        password=(EditText)this.findViewById(R.id.password);
        btnLogin=(Button)this.findViewById(R.id.btnLogin);

        btnLogin.setOnClickListener(loginOnClickListener);
    }

    protected OnClickListener loginOnClickListener = new OnClickListener()
    {
        public void onClick(View v) 
        {
            ProgressDialog progressDialog = new ProgressDialog(LoginActivity.this);
            progressDialog.setMessage("Logging in...");
            progressDialog.setCancelable(false);

            LoginTask loginTask = new LoginTask(LoginActivity.this, progressDialog);
            loginTask.execute(username.getText().toString(),password.getText().toString());
        }
    };

    public void showLoginError(String result)
    {
        AlertDialog.Builder builder = new AlertDialog.Builder(LoginActivity.this);
        builder.setPositiveButton(R.string.okay, new DialogInterface.OnClickListener()
        {
            public void onClick(DialogInterface dialog, int which) {
                dialog.cancel();
            }
        });
        builder.setMessage(R.string.login_invalid_error);
        AlertDialog alert = builder.create();
        alert.setCancelable(false);
        alert.show();
    }

    public void login(int id)
    {
        sharedPreferences.edit().putBoolean("user_logged_in", true).commit();
        startActivityForResult(
            new Intent(LoginActivity.this, LOGIN_DESTINATION), 
            LOGIN_REQUEST_CODE);
    }
} 
```

当我在手机上点击**提交**时，它显示错误（吐司）。jsp页面（AndroidCheck.jsp）向我展示`null`（我试图在网页上显示，我在手机中输入的内容：用户名和登录名）。我不知道，问题出在哪里...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T16:07:08.247

这里的问题改变了几次方向（从 GET 到 POST）。为了创建一个可能对您有所帮助的简单但广泛的答案，我在下面提供了一个示例，它可以`HttpClient`在 Android 上同时执行 POST 和 GET（每个都使用`AsyncTask`）。

请记住，此示例并不是在 Android 上执行 HTTP 的唯一方法，并且在某些地方过于简化。它旨在让您开始使用`HttpClient`.

有其他 HTTP 客户端，包括仅`java.net`在某些场景中使用，请参阅此博客文章了解更多信息：[http](http://android-developers.blogspot.com/2011/09/androids-http-clients.html) ://android-developers.blogspot.com/2011/09/androids-http-clients.html 。

此外，您可能需要考虑使用许多优秀的第三方库之一，这些库可以让事情变得更加简单，例如 loopj 的异步 Android Http 客户端：http: [//loopj.com/android-async-http/](http://loopj.com/android-async-http/)。

并且，请注意，我在示例中使用了[http://httpbin.org/](http://httpbin.org/)作为服务器端点。httpbin.org 是一个很好的测试服务器，可以让您发送和检查各种 HTTP 数据。

活动

```
import android.app.Activity;
import android.app.ProgressDialog;
import android.content.Context;
import android.net.http.AndroidHttpClient;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.TextView;

import org.apache.http.Header;
import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.client.methods.HttpRequestBase;
import org.apache.http.message.BasicNameValuePair;
import org.apache.http.protocol.HTTP;

import java.io.InputStream;
import java.util.ArrayList;
import java.util.List;
import java.util.zip.GZIPInputStream;

public class MainActivity extends Activity {

   private ProgressDialog dialog;

   private Button get;
   private Button post;
   private TextView output;

@Override
protected void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
  setContentView(R.layout.activity_main);

  output = (TextView) findViewById(R.id.output);

  get = (Button) findViewById(R.id.get_button);
  post = (Button) findViewById(R.id.post_button);

  get.setOnClickListener(new OnClickListener() {
     @Override
     public void onClick(View v) {
        output.setText("");
        new SimpleHttpGetTask(MainActivity.this).execute("http://httpbin.org/get");
     }
  });

  post.setOnClickListener(new OnClickListener() {
     @Override
     public void onClick(View v) {
        output.setText("");
        new SimpleHttpPostTask(MainActivity.this).execute("http://httpbin.org/post", "param1name", "param1Value");
     }
  });
}

@Override
protected void onPause() {
  super.onPause();
  if (dialog != null) {
     dialog.dismiss();
  }
}

private class SimpleHttpGetTask extends AsyncTask<String, Void, String> {

  private final Context context;

  public SimpleHttpGetTask(Context context) {
     this.context = context;
     dialog = new ProgressDialog(context);
  }

  @Override
  protected void onPreExecute() {
     dialog.setMessage("doing a GET...");
     dialog.show();
  }

  @Override
  protected String doInBackground(String... args) {

     if (args == null || args.length != 1) {
        Log.w("TAG", "args size must be 1: URL to invoke");
        return null;
     }

     String url = args[0];
     Log.d("TAG", "hitting URL:" + url);

     // AndroidHttpClient has more reasonable default settings than "DefaultHttpClient", but it was only added in API 8
     // (if you need to support API levels lower than 8, I'd create your own HttpClient with similar settings [see bottom of page for example])
     AndroidHttpClient client = AndroidHttpClient.newInstance("Android-MyUserAgent");

     HttpRequestBase request = new HttpGet(url);
     HttpResponse response = null;

     try {
        response = client.execute(request);

        int code = response.getStatusLine().getStatusCode();
        String message = response.getStatusLine().getReasonPhrase();

        // use the response here
        // if the code is 200 thru 399 it worked or was redirected
        // if the code is >= 400 there was a problem

        Log.d("TAG", "http GET completed, code:" + code + " message:" + message);

        HttpEntity entity = response.getEntity();
        if (entity != null) {
           InputStream instream = null;
           try {
              instream = entity.getContent();

              // convert stream if gzip header present in response
              Header contentEncoding = response.getFirstHeader("Content-Encoding");
              if (contentEncoding != null && contentEncoding.getValue().equalsIgnoreCase("gzip")) {
                 instream = new GZIPInputStream(instream);
              }

              // returning the string here, but if you want return the code, whatever
              String result = convertStreamToString(instream);
              Log.d("TAG", "http GET result (as String):" + result);
              return result;

           } finally {
              if (instream != null) {
                 instream.close();
              }
           }
        }
     } catch (Exception e) {
        Log.e("TAG", "Error with HTTP GET", e);
     } finally {
        client.close();
     }

     return null;
  }

  @Override
  protected void onPostExecute(String result) {
     dialog.dismiss();

     if (result != null) {
        // use response back on UI thread here
        output.setText(result);
     }
  }
}

private class SimpleHttpPostTask extends AsyncTask<String, Void, String> {

  private final Context context;

  public SimpleHttpPostTask(Context context) {
     this.context = context;
     dialog = new ProgressDialog(context);
  }

  @Override
  protected void onPreExecute() {
     dialog.setMessage("doing a POST...");
     dialog.show();
  }

  @Override
  protected String doInBackground(String... args) {

     if (args == null || args.length != 3) {
        // in real use you might want to make a better request class of your own to pass in, instead of using a bunch of strings
        Log.w("TAG", "args size must be 3: URL to invoke, and 1st param (name/value) to submit");
        return null;
     }

     String url = args[0];
     String param1Name = args[1];
     String param1Value = args[2];
     Log.d("TAG", "hitting URL:" + url);

     // AndroidHttpClient has more reasonable default settings than "DefaultHttpClient", but it was only added in API 8
     // (if you need to support API levels lower than 8, I'd create your own HttpClient with similar settings [see bottom of page for example])
     AndroidHttpClient client = AndroidHttpClient.newInstance("Android-MyUserAgent");

     HttpRequestBase request = new HttpPost(url);
     HttpResponse response = null;

     try {
        // there are different kinds of POSTS, url encoded form is ONE 
        // (which you need depends on what you're trying to post and how the server is implemented)
        List<NameValuePair> params = new ArrayList<NameValuePair>();
        params.add(new BasicNameValuePair(param1Name, param1Value));
        ((HttpPost) request).setEntity(new UrlEncodedFormEntity(params, HTTP.UTF_8));

        response = client.execute(request);

        int code = response.getStatusLine().getStatusCode();
        String message = response.getStatusLine().getReasonPhrase();

        // use the response here
        // if the code is 200 thru 399 it worked or was redirected
        // if the code is >= 400 there was a problem

        Log.d("TAG", "http POST completed, code:" + code + " message:" + message);

        HttpEntity entity = response.getEntity();
        if (entity != null) {
           InputStream instream = null;
           try {
              instream = entity.getContent();

              // convert stream if gzip header present in response
              Header contentEncoding = response.getFirstHeader("Content-Encoding");
              if (contentEncoding != null && contentEncoding.getValue().equalsIgnoreCase("gzip")) {
                 instream = new GZIPInputStream(instream);
              }

              // returning the string here, but if you want return the code, whatever
              String result = convertStreamToString(instream);
              Log.d("TAG", "http GET result (as String):" + result);
              return result;

           } finally {
              if (instream != null) {
                 instream.close();
              }
           }
        }
     } catch (Exception e) {
        Log.e("TAG", "Error with HTTP POST", e);
     } finally {
        client.close();
     }
     return null;
  }

  @Override
  protected void onPostExecute(String result) {
     dialog.dismiss();
     if (result != null) {
        // use response back on UI thread here
        output.setText(result);
     }
  }
}

// this is OVERSIMPLE (for the example), in the real world, if you have big responses, use the stream 
private static String convertStreamToString(InputStream is) {
  try {
     return new java.util.Scanner(is, "UTF-8").useDelimiter("\\A").next();
  } catch (java.util.NoSuchElementException e) {
     return "";
  }
}

/*
// ONE example of some default settings for DefaultHttpClient (if you can't use AndroidHttpClient, or want more fine grained control)
HttpParams params = new BasicHttpParams();
HttpConnectionParams.setConnectionTimeout(params, 15000);
HttpConnectionParams.setSoTimeout(params, 20000);
HttpConnectionParams.setStaleCheckingEnabled(params, false);
HttpConnectionParams.setSocketBufferSize(params, 8192);
HttpClientParams.setRedirecting(params, false);
HttpProtocolParams.setVersion(params, HttpVersion.HTTP_1_1);
HttpProtocolParams.setContentCharset(params, HTTP.UTF_8);
HttpClient client = new DefaultHttpClient(params);
*/
} 
```

布局

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:layout_margin="10dp"
android:orientation="vertical"
android:padding="10dp" >

<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="HTTP BASICS" />

<Button
    android:id="@+id/get_button"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="HTTP GET" />

<Button
    android:id="@+id/post_button"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="HTTP POST" />

<ScrollView
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >
    <TextView
        android:id="@+id/output"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />
</ScrollView> 
```

显现

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.com.totsp.httptest"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" />

<uses-permission android:name="android.permission.INTERNET" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.example.com.totsp.httptest.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

![在此处输入图像描述](../Images/89f60817760246e57ae4974d1bd52fbc.png)

# asp.net-mvc-3 - 渲染局部视图：当前上下文中不存在名称“模型”

> ID：15310639
> 
> 赞同：0
> 
> 时间：2013-03-09T12:26:46.703
> 
> 标签：asp.net-mvc-3, entity-framework, entity-framework-5, partial-views, strongly-typed-view

为了提供有关实体的一些背景知识，我有一个 Course 实体和一个 Module 实体，它们具有一对多的关系。这意味着一门课程可以有许多模块。

我希望能够动态添加尽可能多的模块，所以我当然选择了将部分视图添加到编辑页面的方向。

这里涉及2个视图：

1.  模块 - 课程控制器中的强类型视图，它只是一个显示与课程相关的所有模块的编辑页面
2.  _Add - 模块控制器中的强类型部分视图，它是模块的创建页面

在视图模块中，我添加了这一行来测试是否部分呈现：

```
@Html.Partial("~/Views/Module/_Add") 
```

但是，我总是收到此错误：**当前上下文中不存在名称“模型”**

我尝试通过阅读其他来源的模型传递以下内容：

1.  `@Html.Partial("~/Views/Module/_Add", Model)`
2.  `@Html.Partial("~/Views/Module/_Add", model)`
3.  `@Html.Partial("~/Views/Module/_Add", new RocketLabs.Models.Module())`

但它们都不起作用。有任何想法吗？任何建议或评论将不胜感激。谢谢！

**更新 2 - 完整代码**

模块视图（父）代码：

```
@model RocketLabs.Models.Course

@{
    ViewBag.Title = "Modules";
}

<h2>@Html.DisplayFor(model => model.Name)</h2>

<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

<div class="row-fluid">
    @using (Html.BeginForm()) {
        @Html.ValidationSummary(true)
        <fieldset>
            <legend>Course Modules</legend>
            <div class="row-fluid">
                <div class="span4">
                    @Html.DisplayFor(model => model.Description)
                </div>
                <div class="span4">
                    @Html.HiddenFor(Model => model.Id)
                    @Html.HiddenFor(model => model.Name)
                    @Html.HiddenFor(model => model.Description)
                    @Html.HiddenFor(model => model.Author)
                    @Html.HiddenFor(model => model.CreateDate)
                    @Html.HiddenFor(model => model.IsDeleted)
                    @Html.HiddenFor(model => model.IndustryId)                    
                </div>
                <div class="span4 pull-right">
                    <div class="control-group">
                        <div class="controls">
                            <input type="submit" role="button" class="btn btn-primary btn-medium" value="Save Course" />
                            <a href="@Url.Action("Index", "Course")" role="button" class="btn btn-primary btn-medium">Back to Courses</a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row-fluid">
                <div class="span2">
                    <a href="#" role="button" class="btn btn-success btn-medium"><i class="icon-plus icon-white"></i> Add Module</a>
                </div>
                <div class="row-fluid">
                    <div class="span12">                        
                        @*@{ Html.RenderPartial("~/Views/Module/_Add", Model); }*@
                        @*@Html.Partial("~/Views/Module/_Add", Model)*@
                        @*@Html.Partial("~/Views/Module/_Add", model)*@
                        @*@Html.Partial("~/Views/Module/_Add", new RocketLabs.Models.Module())*@
                    </div>
                </div>
            </div>
        </fieldset>
    }
</div> 
```

_添加部分页面代码：

```
@model RocketLabs.Models.Module

@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>Module</legend>

        <div class="editor-label">
            @Html.LabelFor(model => model.Title)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Title)
            @Html.ValidationMessageFor(model => model.Title)
        </div>
        ... 
```

会不会是子部分中的@model 和父视图中的@model 之间的冲突？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T13:27:29.427

这条线可能会导致问题：

```
@Html.HiddenFor(Model => model.Id) 
```

您应该替换`Model`为`model`.

解决这种拼写错误并不难。如果您在 ASP.NET 中打开了详细的错误消息，您的浏览器中将显示如下内容：

```
说明：在编译服务此请求所需的资源期间发生错误。请查看以下特定错误详细信息并适当修改您的源代码。

编译器错误消息：CS0103：当前上下文中不存在名称“模型”

源错误：

第 20 行：</div>
第 21 行：<div class="span4">
第 22 行：@Html.HiddenFor(Model => model.Id)
第 23 行：@Html.HiddenFor(model => model.Name)

源文件：...\MyView.cshtml 行：22

显示详细的编译器输出：

显示完整的编译源：

```

有问题的行（第 22 行）以红色突出显示，使得错误所在的位置非常明显。

如果你有一个非常糟糕的语法错误，那么标题*源错误*下方显示的代码可能很难理解。在这种情况下，您可以单击文本*Show Complete Compilation Source*以查看编译器难以理解的内容，并希望能够将其与您的 Razer 视图引擎源代码相关联。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-04T19:27:06.223

我知道这已经过时了，但仍然如此。我很聪明地将我的 mvc 项目命名为*WebClient*，它与*System.Net.WebClient*命名空间冲突。

于是razor搜索类，找到了一个，不幸的是在系统dll中。

所以不要像我一样明智地选择项目名称，或者只是在你的类前面加上完整路径。

# mongodb - findOne() 之后的 update() 和直接 update() 有什么区别？

> ID：15310640
> 
> 赞同：1
> 
> 时间：2013-03-09T12:26:50.857
> 
> 标签：mongodb, pymongo

假设我有一个这样的人员集合：

```
{
    {'_id': 1, 'name': 'Tom', 'age': 22}, 
    {'_id': 2, 'name': 'Joe', 'age': 30}
} 
```

***代码1：***

```
p = db.people.find_one({'_id': 1})
db.people.update(p, {'$inc': {'age': 1}}) 
```

***代码2：***

```
db.people.update({'_id': 1}, {'$inc': {'age': 1}}) 
```

我发现代码 1 和代码 2 在 pymongo 中是不同的。但我不知道有什么区别。谁能告诉我？

编辑：

我知道了。

pymongo 中的 Json 文档是乱序的。因此`p = db.people.find_one({'_id': 1})`可能不会返回与 '_id' 字段值为 1 的文档完全相同的文档。`db.people.update(p, {'$inc': {'age': 1}})`可能找不到任何满足查询 p 的文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T12:43:42.997

如果省略详细信息，**代码 1**执行 2 次查询，而**代码 1**执行 1 次查询

```
1\.   client       mongodb          2\. client        mongodb

           find_one                         update
        ------------->                   ------------->
           document
        <-------------

           update
        -------------> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T03:49:40.957

您的示例使用of`code 1`检索完整文档，然后使用完整文档（保存在变量中）作为搜索条件进行更新。这里的副作用是，如果在执行和之间存储在数据库中的文档中的任何字段发生了变化，您的更新将找不到该文档。`_id``1``p``find_one()``update()`

所以这相当于做：

```
db.people.update({'_id': 1, 'name': 'Tom', 'age': 22}, {'$inc': {'age': 1}}) 
```

您的示例正在`code 2`使用搜索条件执行更新。只要文档存在，此更新将始终成功。`_id``1`

# jquery - Flask AJAX 自动完成

> ID：15310644
> 
> 赞同：6
> 
> 时间：2013-03-09T12:27:06.520
> 
> 标签：jquery, python, flask

我正在尝试使 jQuery UI 自动完成小部件与 Flask 框架一起使用。

[http://flask.pocoo.org/docs/patterns/jquery/](http://flask.pocoo.org/docs/patterns/jquery/)

[http://jqueryui.com/autocomplete/#remote](http://jqueryui.com/autocomplete/#remote)

这是我的 HTML：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0.1//EN" "http://w3.org/TR/html4/strict.dtd">
<head>

  <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
  <script type="text/javascript" src="http://jzaefferer.github.com/jquery-validation/jquery.validate.js"></script>
  <script src="http://code.jquery.com/ui/1.10.1/jquery-ui.js"></script>
  <script type=text/javascript>
  $SCRIPT_ROOT = {{ request.script_root|tojson|safe }};
  </script>

  <style>
  .ui-autocomplete-loading {
    background: white url('images/ui-anim_basic_16x16.gif') right center no-repeat;
  }
  </style> 

 <script type="text/javascript">
  $(function() {
    $( "#university" ).autocomplete({
      source: $.getJSON($SCRIPT_ROOT + "/_search_university",
        {search: $('input[name="university"]').val()}),
      minLength: 2,
    });
  });
  </script>

</head>

<body>

  <div class="ui-widget">
    <label for="university">University: </label>
    <input id="university", name="university" />
  </div>

</body> 
```

这是我的 Flask 方法：

```
@app.route('/_search_university')
def search_university():
    search = request.args.get('search')
    results = session.query(University).filter(name.like('%' + search + '%')).all()
    return jsonify(results) 
```

我想我做对了，但它似乎不起作用。一旦我重新加载页面，就会调用该函数（即使没有输入且 minLength = 2），它会查找大学但不显示任何内容（即使他找到了大学）。

在第一次查找（页面之后）加载后，如果我在字段中键入超过 2 个字母，小部件将停止向服务器发送请求。

有人可以在这里帮助我吗？我只是想通过使用 Flask 来获得 AJAX 自动完成小部件的最基本用法。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-09T12:44:19.680

您必须将其包装`$.getJSON()`在一个函数中，该函数将在文本字段的值发生更改时由插件执行

```
source: function( request, response ) {
    $.getJSON($SCRIPT_ROOT + "/_search_university", {
        search: request
    }, response);
} 
```

现在根据您从服务器返回的内容，上述内容可能就足够了。但是，如果您需要过滤或映射数据以便自动完成显示它，您将需要使用该`$.map()`功能将数据转换为自动完成可接受的格式

```
source: function( request, response ) {
        $.getJSON($SCRIPT_ROOT + "/_search_university", {
            search: request
        }, function( data ) {
            response( $.map( data.results, function( item ) {
                return {
                    label: item.name,
                    value: item.id
                }
            }));
        });
} 
```

如果您向我提供服务器返回的 JSON，我可以更具体

检查[http://api.jqueryui.com/autocomplete/#option-source](http://api.jqueryui.com/autocomplete/#option-source)以查看更多信息

# javascript - 为什么“keydown”事件像“keypress”事件一样工作？

> ID：15310647
> 
> 赞同：12
> 
> 时间：2013-03-09T12:27:23.100
> 
> 标签：javascript, jquery

下一个示例代码在我按住按钮时多次输出“keydown”消息。文档[说](http://api.jquery.com/keydown/)keydown 事件发生一次，只需按一下按钮。因此，keydown 事件的工作方式类似于下一个示例中的 keypress 事件。

```
<!DOCTYPE HTML>
<html>
  <head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title></title>

  <script type='text/javascript' src='jquery.js'></script>
  <script type='text/javascript'>
    function onLoad()
    {
        $( '#text' ).on( 'keydown', function() { console.info( 'keydown' ) } ); 
    }   
  </script>

  </head>
  <body onload='onLoad()'>
     <input type='text' id='text'>

  </body>
</html> 
```

我在 Windows、Firefox 19.0.2 和 Google Chrome 25.0.1364.152 上对其进行了测试。我还创建了一个[小提琴](http://jsfiddle.net/7Jxcq/)（问题可以重现）。重现问题的 JQuery 版本：1.8.2、1.9.1。

更新。

我确实意识到了这个问题：[如何避免 JavaScript 中自动重复的 keydown 事件？](https://stackoverflow.com/questions/7686197/how-can-i-avoid-autorepeated-keydown-events-in-javascript).

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-09T12:31:35.643

> 该`keydown`事件在按键被按下时发生，紧随其后的是`keypress`事件。然后在`keyup`释放键时生成事件。
> 
> 为了理解 和 之间的区别`keydown`，`keypress`了解“字符”和“键”之间的区别很有用。“键”是计算机键盘上的物理按钮，而“字符”是通过按下按钮键入的符号。理论上，`keydown`and`keyup`事件代表按键被按下或释放，而`keypress`事件代表一个字符被输入。该理论的实现在所有浏览器中并不相同。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-09T12:35:02.410

非字符键不会引发 KeyPress 事件；但是，非字符键确实会引发 KeyDown 和 KeyUp 事件。

关键事件按以下顺序发生：

1.  按键
2.  按键
3.  键升

[这些事件在窗口、文档、表单、可聚焦元素](http://www.quirksmode.org/dom/events/keys.html)
[测试页上是否可用](http://www.quirksmode.org/dom/events/tests/keys.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T12:30:15.023

keydown 事件在按键被按下时发生，紧随其后的是 keypress 事件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-01-07T19:15:13.690

我在这里有答案，慢慢地跟着我：： `keydown`当您开始键入键或开始更改某些内容时工作，并且 keydown 为您提供一次结果，但在最后一个结果之前给您结果而不是最后一个结果。 `keyup`：当您停止键入键或返回（更改诸如删除字符之类的内容）时工作，它会给您最后的结果。 `keypress`：当您开始键入 key 但未开始更改某些内容时工作，并且 keydpress 为您提供一次结果，但在最后一次之前为您提供结果，（lastResult - 1）

# json - 是否应该在 Restful 错误响应中使用 HTTP 状态？

> ID：15310649
> 
> 赞同：7
> 
> 时间：2013-03-09T12:27:34.387
> 
> 标签：json, api, rest, http-headers

我正在编写一个 Restful API，我必须返回错误消息，但我不确定要走哪条路线。

**路由 1 - HTTP 状态**

客户端发送错误数据时使用 HTTP 错误状态

例如：401 - 未授权，410 - 模型不存在，412 - 模型验证错误等

**路线 2 - JSON 成功或错误失败**

API 返回 json，我正在考虑使用 http 标头 200 返回所有内容，但随后在我的 JSON 中处理错误和成功

例如：{“状态”：“错误”，“消息”：“模型验证错误”，“数据”：[“需要用户名”，“需要用户电子邮件”]}

我应该走哪条路线，为什么？的优点和缺点。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-09T13:39:15.857

> 我正在编写一个 Restful API，我必须返回错误消息，但我不确定要走哪条路线。
> 
> **路由 1 - HTTP 状态**
> 
> 客户端发送错误数据时使用 HTTP 错误状态

HTTP 状态码***绝对***应该用在任何声称是 RESTful 的 Web 服务实现中。该规范的核心原则是利用和扩展 Web 以完全支持*表示状态*的转移。为了允许与现有 Web 基础设施的互操作，REST 实现应该通过适当的 HTTP 状态代码指示请求的状态。例如：

200 - 好的
201 - 内容已创建
401 - 未经授权
403 - 禁止
500 - 服务器错误
501 - 未实施

当响应许多这些状态时，HTTP 规范还允许在响应正文中包含实体表示。在“正常”、非错误响应的情况下，该表示通常是被 HTTP 请求“操作”的实体。在错误响应的情况下，表示（如果包含）应提供有关已发生错误的更多信息。这是我们选择您的选项 2 的地方。

> **路线 2 - JSON 成功或错误失败**
> 
> API 返回 json，我正在考虑使用 http 标头 200 返回所有内容，但随后在我的 JSON 中处理错误和成功

您绝对不应该为所有响应返回 200 OK。*许多*实现良好的 HTTP 客户端依赖于响应中的状态码来确定它是否成功。总是以 200 OK 响应可能会导致第三方客户端库错误地处理传入的数据，并且还要求您的客户端解析响应正文以确定是否确实发生了错误。

话虽如此，添加有关已发生错误的其他信息可能非常有帮助，因此请务必考虑将其添加到响应正文中。您建议的格式看起来不错，但老实说`status`，假设您正确使用 HTTP 状态代码，该元素是多余的。更像是：

```
{
    "message": "Model validation error",
    "data": [
        "user name required",
        "user email required"
    ]
} 
```

# c++ - 当我将构造函数声明为显式时编译错误

> ID：15310655
> 
> 赞同：0
> 
> 时间：2013-03-09T12:27:56.807
> 
> 标签：c++

我写了一个智能指针类。当我将它传递给向量时，它会在编译时显示一些错误消息。但是在我删除显式声明后，它就起作用了。有什么错误？

```
explicit shared_ptr(const shared_ptr<T>& sp) 
```

> 没有匹配的调用函数`shared_ptr<int>::shared_ptr(const shared_ptr<int> &)`

```
 #include <iostream>
    #include <vector>
    using namespace std;

    template<class T>
    class shared_ptr {
    private:
      struct ptr {
        T* ptr;
        size_t count;
        void release() {
          if(-- count == 0) {
            delete ptr;
            delete this;
          }
        }
      };
    private:
      ptr* _ptr;
    public:
      explicit shared_ptr(T* p):
        _ptr(new ptr) {
        _ptr->ptr = p;
        _ptr->count = 1;
      }
      explicit shared_ptr(const shared_ptr<T>& sp):
      //explicit shared_ptr(const shared_ptr& sp):
        _ptr(sp._ptr) {
        ++ _ptr->count;
      }
      shared_ptr<T>& operator=(const shared_ptr<T>& sp) {
        _ptr->release();
        _ptr = sp._ptr;
        ++ _ptr->count;
        return *this;
      }

      shared_ptr<T>& operator=(T* p) {
        _ptr->release();
        _ptr = new ptr;
        _ptr->count = 1;
        _ptr->ptr = p;
      }

      T* get() {
           return _ptr->ptr;
      }

      T& operator*() {
        return *(_ptr->ptr);
      }

      T* operator->() {
          return _ptr->ptr;
      }

      ~shared_ptr() {
        _ptr->release();
      }

    };

    int main() {
        vector<shared_ptr<int> > vec;
        vec.push_back(shared_ptr<int>(new int(10)));
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T12:43:04.737

声明为的构造函数`explicit`只能在*显式*调用时使用。在这一行：

```
vec.push_back(shared_ptr<int>(new int(10))); 
```

您正在传递一个值`vec`，在标准库的**C++03**实现中，最终将被*复制*到向量中，并进行复制初始化，例如：

```
_Tp __x_copy = __x; 
```

此处对复制构造函数的调用是*隐式*的，但您的构造函数被标记为`explicit`. 因此，错误。

请注意，该错误**仅**发生在 C++03 编译器或使用`-std=c++03`标志编译时，因为在 C++11 中，`push_back()`使用右值参数调用函数（如您正在实例化的临时函数）最终会创建通过*显式*调用复制构造函数来实现值。

因此，我假设您正在使用 C++03 编译器。

通常，`explicit`构造函数是接受一个参数*而*不是复制构造函数的构造函数，以避免尴尬的隐式转换（实际上，在 C++11 中，`explicit`对于接受多个参数的构造函数也是有意义的，因为复制初始化通过大括号初始化器列表）。

复制构造函数通常*不*声明为`explicit`.

# javascript - 使用 Chrome 控制台通过 RequireJS 访问 Knockout ViewModel

> ID：15310659
> 
> 赞同：22
> 
> 时间：2013-03-09T12:28:23.707
> 
> 标签：javascript, knockout.js, requirejs, google-chrome-devtools

既然我正在使用 RequireJS，如何在 Chrome 控制台中访问 KnockOut ViewModel 变量？

在使用 RequireJS 之前，我遵循命名空间模式，将所有内容隐藏在一个全局变量中。我可以通过在 Chrome 控制台中输入以下内容来访问全局：window.namespaceVar。

但是现在我使用的是 RequireJS，我所有的变量都隐藏在 require 函数后面。

```
require(['knockout-2.2.0', 'jquery'], function (ko, jQuery) {

    var ViewModel = function () {
            var testVar = ko.observable(true);
        };

    ko.applyBindings(new ViewModel());
} 
```

那么我将如何访问`testVar`示例中的当前值？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-03-09T13:35:10.680

Knockout 包含的功能`ko.dataFor`可以`ko.contextFor`让您访问给定元素的 KO 视图模型信息。

因此，在控制台中，您可以执行以下操作：

```
var vm = ko.dataFor(document.body); 
```

在您的情况下，`testVar`未公开，因此您仍然无法访问它。我认为你的只是一个样本，你的意思是：

```
var ViewModel = function () {
     this.testVar = ko.observable(true);
}; 
```

现在，使用上述方法，您将能够`vm.testVar`通过执行访问及其值`vm.testVar()`

以下是我们关于这些功能的文档：http: [//knockoutjs.com/documentation/unobtrusive-event-handling.html](http://knockoutjs.com/documentation/unobtrusive-event-handling.html)

这里是关于如何使用 chrome 调试 KnockoutJS 的分步指南：http: [//devillers.nl/quick-debugging-knockoutjs-in-chrome/](http://devillers.nl/quick-debugging-knockoutjs-in-chrome/)

使用 Chrome 的 $0_$4 功能：[https ://developers.google.com/chrome-developer-tools/docs/commandline-api#0-4](https://developers.google.com/chrome-developer-tools/docs/commandline-api#0-4)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-04-04T02:42:45.330

正如 Ryan 建议的那样，最快的方法是在控制台中使用`ko.contextFor`和`ko.dataFor`查看 dom 上元素的绑定上下文。

还有一个非常有用的 Chrome 扩展，它使用了名为 KnockoutJS Context Debugger 的原理，可在此处获得：

[Chrome 网上应用店 - KnockoutJS 上下文调试器](https://chrome.google.com/webstore/detail/knockoutjs-context-debugg/oddcpmchholgcjgjdnfjmildmlielhof)

它允许您检查元素并在元素窗格的侧栏中查看它的上下文。如果您在一个页面上有多个绑定上下文，或者非常嵌套的绑定上下文，这是最有用的。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-10-18T05:02:16.013

Require 就是没有全局变量：

```
require(["knockout"],function(ko){ window.ko=ko;}); 
```

再次引入全局变量

您可以在控制台中使用它：

```
require("knockout").dataFor($0);
require("knockout").contextFor($0); 
```

# python - 同一矩阵上的 2 个图

> ID：15310662
> 
> 赞同：0
> 
> 时间：2013-03-09T12:28:42.783
> 
> 标签：python, matplotlib, wxpython

我有两组坐标，我想在同一个矩阵上绘制。

这是我的代码：

```
self.ax.imshow(arr,cmap=plt.cm.Greys_r, interpolation='none')
self.ax.imshow(arr.T, cmap=plt.cm.Greys_r, interpolation = 'none') 
```

但是，这不起作用。它似乎只绘制最后调用的那个。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T12:54:33.073

我不确定我是否完全理解这个问题，但如果你只想绘制两个矩阵的总和，那么试试，

```
self.ax.imshow(arr+are.T,cmap=plt.cm.Greys_r, interpolation='none') 
```

但请注意，它仅在 arr 和 are.T 具有相同形状时才有效。

# java - xerial sqlite-jdbc 3.7.2 在 OSX Mountain Lion 上返回 [SQLITE_NOTADB]

> ID：15310667
> 
> 赞同：2
> 
> 时间：2013-03-09T12:29:10.157
> 
> 标签：java, macos, sqlite, jdbc

我从 iPhone 的 iTunes 备份中提取了 iOS 6 短信数据库。它是一个 sqlite3 数据库。

当我在终端中查询它时，它工作正常：

```
$ sqlite3 sms.db
sqlite> select * from message; 
```

但是当我尝试使用[xerial sqlite-jdbc](https://bitbucket.org/xerial/sqlite-jdbc/)查询它时，我得到了一个 [SQLITE_NOTADB]。

这是我使用的代码：

```
public class Sample {
    public static void main(String[] args) throws ClassNotFoundException {
        String dbFilePath = args[0];
        File dbFile = new File(dbFilePath);
        if (!dbFile.exists()) {
            throw new IllegalArgumentException(String.format("%s does not exist", dbFilePath));
        }

        // load the sqlite-JDBC driver using the current class loader
        Class.forName("org.sqlite.JDBC");

        Connection connection = null;
        try {
            // create a database connection
            connection = DriverManager.getConnection(String.format("jdbc:sqlite:%s", dbFilePath));
            Statement statement = connection.createStatement();
            statement.setQueryTimeout(30);  // set timeout to 30 sec.

            ResultSet rs = statement.executeQuery("select * from message");
            while (rs.next()) {
                // read the result set
                System.out.println(rs.getString("text"));
            }
        } catch (SQLException e) {
            // if the error message is "out of memory",
            // it probably means no database file is found
            System.err.println(e.getMessage());
        } finally {
            try {
                if (connection != null)
                    connection.close();
            } catch (SQLException e) {
                // connection close failed.
                System.err.println(e);
            }
        }
    }
} 
```

我在 OSX Mountain Lion 上使用 xerial sqlite-jdbc 3.7.2。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T12:36:34.190

xerial sqlite-jdbc 的 3.7.2 版本是 Maven 中央存储库中的最新发现，似乎与 OSX Mountain Lion 不兼容。我必须使用在[这里](https://bitbucket.org/xerial/sqlite-jdbc/downloads)找到的 3.7.15-SNAPSHOT 版本。

如果您使用的是 maven，则可以使用以下 sh 文件：

```
#!/bin/sh
wget https://bitbucket.org/xerial/sqlite-jdbc/downloads/sqlite-jdbc-3.7.15-SNAPSHOT.jar
mvn install:install-file -Dfile=sqlite-jdbc-3.7.15-SNAPSHOT.jar -DgroupId=org.xerial -DartifactId=sqlite-jdbc -Dversion=3.7.15-SNAPSHOT -Dpackaging=jar
rm -f sqlite-jdbc-3.7.15-SNAPSHOT.jar 
```

我还在 Ubuntu 12.04 LTS 上尝试了 xerial sqlite-jdbc 3.7.2，它运行良好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-17T23:21:18.157

我在 OSX Maverick 上有同样的问题。切换到 3.7.15-M1，它也可以在 Maven 的中央存储库上找到，解决了这个问题。

# javascript - 如何动态地将图形中的背景颜色更改为两种不同的颜色？

> ID：15310678
> 
> 赞同：0
> 
> 时间：2013-03-09T12:30:04.463
> 
> 标签：javascript, graph, background-color

我想将图表的背景颜色更改为三种不同的颜色。图中有两条线是折线图。我想要表格中的输出。1.整个网格的纯浅绿色背景。2\. 从线条的起点到线条在某一点相遇，线条之间应显示红色背景。3\. 线相交点后，线间应显示蓝色背景。链接到我想要的 garph 是：目前我正在使用它作为背景颜色。

```
window.onload = function () {
    var graph = new JpGraph(
            'line',
            'graph',
            data,
            {gridBackgroundColor   : "lightgreen",}); } 
```

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T12:37:44.327

对于图形颜色，我这个你应该试试这个：[http ://docs.sencha.com/ext-js/4-0/#](http://docs.sencha.com/ext-js/4-0/#)

# iphone - 将 Twitter 与 iOS 集成时回调 url 不起作用

> ID：15310686
> 
> 赞同：3
> 
> 时间：2013-03-09T12:31:15.207
> 
> 标签：iphone, ios, xcode, twitter, mgtwitterengine

我正在使用 mgtwitterengine 在我的 ios 应用程序上实现 twitter 登录。我无法使用此库登录我的应用程序。

提供我的 Twitter 用户名/密码后，我被重定向到我网站的登录页面（在 Twitter 开发设置中，我已将回调 url 提供给[http://mywebsite.com](http://mywebsite.com)并在提供我的用户名后重定向到 mywebsite.com /密码和登录）。如何让它重定向到我的应用程序的主页？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T13:21:11.930

我之前遇到过同样的问题。从开发设置中删除回调 url 将自动重定向到您的应用程序的主页。希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-15T11:34:35.163

您的 iOS 或 Android 应用程序不会使用回调 URL。因此，您在此处输入什么并不重要，只要它是有效的 URL，例如 [ [https://pratik.com](https://pratik.com) ] 或 [ [http://myAppName.com](http://myAppName.com) ]

# canvas - Mozilla getImageDataProblem

> ID：15310691
> 
> 赞同：0
> 
> 时间：2013-03-09T12:31:53.633
> 
> 标签：canvas, mozilla, getimagedata

我在 Mozilla 中遇到 getImageData 问题。我做了一个功能，点击画布后获取鼠标坐标。坐标很好，但有一个问题，在 Mozilla 中它给 mi 错误的 getImageDatas 数字 - 例如在 chrome 中它给出 mi red: 10, green: 0, blue: 10 而 Mozilla 给出 red: 60, green: 255, blue : 10...我不知道问题出在哪里...请您帮忙吗？这是功能： http: [//pastebin.com/MjnG0Nbm](http://pastebin.com/MjnG0Nbm)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T08:36:04.070

也许你的 getMousePos() 并不总是给出想要的结果

```
The amount of scrolling that has been done of the viewport area (or any other
scrollable element) is taken into account when computing the bounding rectangle.
This means that the top and left property change their values as soon as the
scrolling position changes (so their values are relative to the viewport and not
absolute). If this is not the desired behaviour just add the current scrolling
position to the top and left property (via window.scrollX and window.scrollY) to
get constant values independent from the current scrolling position. 
```

试试这个：

```
function getMousePosition(canvas, evt) {
    return {
      x: evt.clientX - canvas.offsetLeft + window.scrollX,
      y: evt.clientY - canvas.offsetTop + window.scrollY
    };        
} 
```

# python - 在 SublimeText2 中设置 PYTHONPATH

> ID：15310694
> 
> 赞同：1
> 
> 时间：2013-03-09T12:32:04.400
> 
> 标签：python, sublimetext2

在过去的一个小时里，我一直在谷歌搜索试图找到答案，并尝试了我遇到的一切。

我有一个特定的 Python 包（MailSnake），当我在 SublimeText2 中构建时，它会返回

**ImportError：没有名为 mailsnake 的模块**

我知道这是因为 SublimeText2 正在运行内置 Python（2.6 版）并且需要在用户设置中设置 PYTHONPATH。

如何正确设置环境路径？这是我目前拥有的。

```
"path": "Users/Me/Library/Python/2.7",
"cmd": ["python2.7", "-u", "$file"],
"env":
{
    "PYTHONPATH": "Users/Me/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages"
},    
"file_regex": "^[ ]*File \"(...*?)\", line ([0-9]*)",
"selector": "source.python", 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T12:53:46.840

编辑 %APPDATA%\Sublime Text 2\Python\Python.sublime-build

将内容更改为：

```
{
    "cmd": ["C:\\python27\\python.exe", "-u", "$file"],
    "file_regex": "^[ ]*File \"(...*?)\", line ([0-9]*)",
    "selector": "source.python"
} 
```

在 Mac 上

```
 { 
   "cmd": ["/Library/Frameworks/Python.framework/Versions/2.7/bin/python2.7", 
   "-u", "$file"], "file_regex": "^[ ]*File \"(...*?)\", line ([0-9]*)", 
   "selector": "source.python"       
 } 
```

完成后尝试以下操作

```
import platform
print platform.python_version() 
```

如果成功，这将编译代码并在我的情况下打印出来`2.7.* your current version *` ，这将是`2.7.2`

此外，看起来您可能没有正确安装 mailsnake。所以尝试以下

*   [下载压缩包](https://github.com/michaelhelmick/python-mailsnake)
*   解压到一个文件夹
*   使用 cmd，导航到该文件夹​​，然后进入`python-mailsnake-master\python-mailsnake-master`.

*   然后在cmd中输入`python setup.py install`，这应该安装mailsnake

    您现在应该可以导入并使用它了

# jquery - 仅针对特定项目的 Jquery 可排序句柄

> ID：15310698
> 
> 赞同：0
> 
> 时间：2013-03-09T12:32:34.980
> 
> 标签：jquery, jquery-ui-sortable

我想知道我们是否可以为 jquery 定义只能为特定项目排序的句柄。

我有可编辑和不可编辑的 div，所以我希望可编辑的 div 仅按它们的句柄排序，不可编辑的 div 可以在没有句柄的情况下拖动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T12:45:41.467

如果我理解正确，您希望所有这些都是可排序的，整个 div 不可编辑，仅可编辑其句柄。

你有一个类.handle？

在可编辑上，使其成为一个小跨度或其他东西，在不可编辑上使其成为整个容器 div。

```
<li class="ui-state-default">
    <span class="handle">handle</span>
    <textarea>editable</textarea>
  </li>
<li class="ui-state-default">
    <div class="handle">Item 2</div>
 </li> 
```

像这样：

[http://jsfiddle.net/Jr8xU/](http://jsfiddle.net/Jr8xU/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-23T08:59:50.533

jQuery sortable 让您通过使用 setter 来动态声明句柄选项，例如：

```
// setter
$( ".sortable" ).sortable( "option", "handle", ".handle" ); 
```

如果您正在编写鼠标接口，您可以尝试监听鼠标悬停/移出事件。然后禁用没有句柄的元素上的句柄：

```
$(".sortable").sortable( "option", "handle", false ); 
```

并在鼠标移出时改回：

```
$(".sortable").sortable( "option", "handle", ".handle" ); 
```

# ios - UITableView操作队列怎么做并发下载

> ID：15310701
> 
> 赞同：1
> 
> 时间：2013-03-09T12:32:58.433
> 
> 标签：ios, objective-c, uitableview, objective-c-blocks

我正在做一个 UITableview 来下载名称 webservice 的数据非常快，所以我最初使用它来填充表格，然后我为图像启动一个操作队列。

然后是其余数据的单独队列，因为它加载非常慢但会影响图像加载时间，我如何同时执行 2 个。

你能找出是什么降低了那里的性能并帮助我解决它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T13:49:35.663

我假设您知道，您可以通过`maxConcurrentOperationCount`在创建队列时进行设置来指定并发请求的数量。四是典型值。

```
self.imageDownloadingQueue.maxConcurrentOperationCount = 4; 
```

问题是，你不能比这更大（由于 iOS 限制和一些服务器限制）。可能有 5 个，但不会比这个大。

就个人而言，我不会用完有限数量的最大并发操作返回文本值。我会提前检索所有这些。您会延迟加载图像，因为它们太大了，但文本条目太小，以至于执行单独的网络请求的开销开始强加其自身的性能损失。如果您要延迟加载描述，我会分批下载 50 个或 100 个左右。

查看您的源代码，至少，您发出的 JSON 请求是您应该发出的两倍（您在`getAnimalRank`和`getAnimalType`）。但是你真的应该改变最初的 JSON 请求来返回你需要的一切，名称、等级、类型、URL（但不是图像本身）。然后在一次调用中，您就可以获得所需的一切（除了图像，我们将异步检索，并且您的服务器为 UX 快速交付图像）。如果您决定保留对排名/类型/url 的各个请求，则需要查看您的服务器代码，因为没有正当理由不应该立即返回，而且目前确实很慢。但是，正如我所说，您真的应该在初始 JSON 请求中返回所有这些，并且您的用户界面会非常快。

最后一点：您正在使用单独的队列来获取详细信息和图像下载。使用`NSOperationQueue`和设置的全部目的`maxConcurrentOperationCount`是 iOS 只能对给定服务器执行 5 个并发请求。通过将它们放在两个单独的队列中，您将失去`maxConcurrentOperationCount`. 事实证明，请求超时需要一分钟，因此您可能不会遇到问题，但它仍然反映了对队列目的的基本误解。

最重要的是，您应该只有一个网络队列（因为系统限制是您的设备和任何给定服务器之间的网络并发连接数量，而不是图像下载数量，以及单独的描述下载数量）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T14:03:48.587

您是否考虑过异步执行此操作？我写了一个类来做一些与你使用块描述的非常相似的事情。您可以通过以下两种方式执行此操作：

1.  只要 cellForRowAtIndexPath 触发就加载异步。这适用于很多情况，但可能会导致错误的图像显示一秒钟，直到正确的图像完成加载。

2.  当拖动停止时调用进程加载图像。这通常是我做事的方式，以便正确的图像始终显示它应该显示的位置。在从 Web 加载图像之前，您可以使用占位符图像。

查看这个 SO question 的详细信息：

[将图像异步加载到 UIImage 中](https://stackoverflow.com/questions/9786018/loading-an-image-into-uiimage-asynchronously/9786513#9786513)

# c++ - 调用C多类子数组中的方法，执行父类

> ID：15310707
> 
> 赞同：-1
> 
> 时间：2013-03-09T12:33:18.863
> 
> 标签：c++, arduino

那是一个 Arduino 项目，它有一个模式按钮。该按钮将当前应用程序变量更改为播放器/收音机/导航/电话。所有应用程序都继承自“App”。

如果我运行“apps[0]->volume_up();”，它会告诉我应用程序中没有方法 volume_up。如果我将它添加到 App，它会在 App 中而不是在 Player 中执行 volume_up。

我究竟做错了什么？

```
int index = 0;
App *apps[4];

void setup(){
    Player *player = new Player();
    Radio *radio = new Radio();
    Navigation *navigation = new Navigation();
    Phone *phone = new Phone();
    apps[0] = player;
    apps[1] = radio;
    apps[2] = navigation;
    apps[3] = phone;
}

void loop(){
    int sensorValue = analogRead(A0);

    if (sensorValue == 156 || sensorValue == 157){ // Mode button
        index = (index + 1) % (sizeof(apps)/sizeof(apps[0]));
        delay(300);
    }

    if (sensorValue == 24 || sensorValue == 23){ // Volume button
        apps[index]->volume_up();
        delay(100);
    }
} 
```

### 编辑

```
#ifndef App_H
#define App_H

#include "Arduino.h"

class App {
    public:
        void volume_up();
    };

#endif

#include "App.h"

void App::volume_up(){
    Serial.println("VOLUME_UP");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T13:02:45.577

如果要从父类调用该方法，`App::volume_up()`请在子类的方法中使用。或将方法标记`virtual`为

```
virtual void App::volume_up(){ } 
```

你可以在子类中调用它。

你需要`App`在你的类中继承类`Phone`，等等。

```
class Phone : public App {

}; 
```

然后要么

```
 void Phone::volume_up() { App::volume_up(); } 
```

如果您不使用虚拟方法，或者

```
 void Phone::volume_up() { //Phone implementation } 
```

如果您使用虚拟方法。

要使用运行时多态性，您需要像以前一样创建指针！

查看维基百科文章*[Virtual function](http://en.wikipedia.org/wiki/Virtual_function)* and Stack Overflow question *[Call a C++ base class method automatically](https://stackoverflow.com/questions/3107974/c-call-a-base-class-method-automatically)*。

# java - Android库项目：调用内部类的方法

> ID：15310709
> 
> 赞同：1
> 
> 时间：2013-03-09T12:33:52.187
> 
> 标签：java, android, scope

我正在将一个Android项目拆分为一个库项目+几个依赖项目，并遇到了这个问题。

库项目的 Android`Service`定义如下：

```
public class UserService extends Service {

    public class LocalBinder extends Binder {
        UserService getService() {
            return UserService.this;
        }
    }
    ...
} 
```

依赖项目调用内部类的方法，`Service`如下所示：

```
public ServiceConnection mConnection = new ServiceConnection() {

    public void onServiceConnected(ComponentName className, IBinder service) {
        LocalBinder binder = (LocalBinder) service;
        mService = binder.getService();
        mBound = true;            
    }
    ...
}; 
```

当一切都在同一个项目中时，这很好用。但是在我将服务移动到库项目之后，它给出了一个编译时错误：

```
The method getService() from the type UserService.LocalBinder is not visible 
```

我需要更改什么才能使其编译？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T12:39:27.820

您的方法没有任何可见性修饰符，因此只能从同一包中的类中看到。将其公开以使其可从任何其他类访问：

```
 public UserService getService() {
        return UserService.this;
    } 
```

阅读[Java 教程](http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html)以了解可见性修饰符。

# ruby-on-rails - 在 Rails 应用程序中随处访问对象

> ID：15310711
> 
> 赞同：2
> 
> 时间：2013-03-09T12:33:56.233
> 
> 标签：ruby-on-rails, ruby, global-variables

我知道这是关于全局对象的第 1001 个问题，但我认为我的情况略有不同。

我正在研究电子商务解决方案，它在单个 Rails 应用程序中提供了几个不同的商店。

有一个类 Shop 提供特定于商店的逻辑和选项。例如：

`@shop.tax`应该可以在模型中访问。税收可能因商店而异。例如 9%、18%。

`@shop.name`并且`@shop.layout`应该可以在控制器和视图中访问。

`@shop.email.general`对于邮寄者。

我需要能够在应用程序控制器中创建 Shop 的实例，并以某种方式将其传递给所有应用程序部分。

```
# controllers/application_controller.rb
class ApplicationController < ActionController::Base
  before_filter :set_shop

  protected

  def set_shop
    requested_shop = if request.domain.match(/^.*shop1\.com$/)
      :shop_1
    elsif request.domain.match(/^.*shop2\.com$/)
      :shop_2
    end
    @shop = Shop.new(requested_shop)
  end
end 
```

我知道不应该在模型中使用基于请求的逻辑，但我确实需要那里的商店选项。在测试中，我可以像`Shop.new(:test_shop)`在 spec_helper 中那样模拟这个“全局”对象。

全局变量是我唯一的选择吗？我从来没有用过它们。

我尝试使用 Settingslogic gem，但它为特定于商店的选项定义了 attr_accessors，并且它们在请求之间持续存在，这不是我所需要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T12:59:32.243

这样做的一种方法是

```
class Shop
  def self.current=(shop)
    Thread.current[:current_shop] = shop
  end

  def self.current
    Thread.current[:current_shop]
  end
end 
```

这允许您为每个请求维护一个单独的当前商店。

另一种方法是绕过当前的商店。起初它可能看起来很乏味，但最终可能比全局或伪全局行为更容易推理

# architecture - 在项目层次结构中避免使用“utils”包

> ID：15310719
> 
> 赞同：1
> 
> 时间：2013-03-09T12:35:03.160
> 
> 标签：architecture, package, project

我讨厌我的项目的源代码有一个名为“utils”的holdall 包。这对我来说没有意义，因为我总是以`Timer`完全不相关的类`VarInt`结束。`Singleton``Base64``Logger`

许多大型项目（如 Java）具有这样的层次结构这一事实可能意味着没有干净的解决方案，但这也可能是一个向后兼容性问题。**最佳做法是什么？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-31T19:26:22.510

我也有同样的问题。在我的上一个项目中，我将这些实用程序放在个人包中，因此随着项目的进展，我得到了其他相关的课程，因此，在这个项目中（针对金融部门）。

干杯

# java - Android 监听禁用按钮的 onClickListener

> ID：15310720
> 
> 赞同：2
> 
> 时间：2013-03-09T12:35:04.213
> 
> 标签：java, android, button, onclicklistener

我已经实现了一个按钮来切换应用程序状态。但是在禁用按钮（setEnabled（false））后，我无法捕获按钮的点击。

有什么办法可以听到禁用按钮的点击？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T12:37:28.167

**[Android 开发人员开发ToggleButton](http://developer.android.com/reference/android/widget/ToggleButton.html)**是有原因的。

您应该使用**ToggleButton**而***不是普通的标准 Button***来实现切换操作。

# svg - 在 json 中为 fabric.js 存储 svg 路径

> ID：15310729
> 
> 赞同：1
> 
> 时间：2013-03-09T12:35:52.787
> 
> 标签：svg, cufon, fabricjs

**Cufon**从面料上消失了，但我想使用自定义字体。我使用 batic 将**ttf 转换为 svg**，然后解析 svg 并将路径存储在 JSON 中。这个想法是使用此路径在织物中构建文本。

我的 JSON 看起来像这样：

```
 {" ":{"d":"","horiz-adv-x":"467"},"!":{"d":"M210 378L150 1122V1466H399V1122L340 378H210ZM160 0V281H390V0H160Z","horiz-adv-x":"559"},"\"":{"d":"M135 945L92 1218V1466H343V1... 
```

如您所见，我使用字符作为键。我想访问感叹号字体的问题。！不会工作。

PS.：也许这个大麻烦是徒劳的，我可以通过cufon访问cufon生成的路径，并在fabric中使用它。但据我所知，织物的路径不会走 cufon 的路径。

# ios - ios -foursquare 访问令牌没有出现

> ID：15310730
> 
> 赞同：0
> 
> 时间：2013-03-09T12:36:09.190
> 
> 标签：ios

我正在遵循foursquare authen指南，但我仍然有问题

这是我的代码

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    self.webView.delegate = self;
    NSString *clientID = @"XXX";
    NSString *redirectURI = @"http://www.example.com";
    NSString *authenticateURLString = [NSString stringWithFormat:@"https://foursquare.com/oauth2/authenticate?client_id=%@&response_type=token&redirect_uri=%@", clientID, redirectURI];
    NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:authenticateURLString]];
    [self.webView loadRequest:request];
}

- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType {
    if ([request.URL.scheme isEqualToString:@"itms-apps"]) {
        [[UIApplication sharedApplication] openURL:request.URL];
        return NO;
    }
    return YES;
}

- (void)webViewDidFinishLoad:(UIWebView *)webView {
    NSString *URLString = [[self.webView.request URL] absoluteString];
    NSLog(@"--> %@", URLString);
    if ([URLString rangeOfString:@"access_token="].location != NSNotFound) {
        NSString *accessToken = [[URLString componentsSeparatedByString:@"="] lastObject];
        NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
        [defaults setObject:accessToken forKey:@"access_token"];
        [defaults synchronize];
        [self dismissViewControllerAnimated:YES completion:nil];
    }
} 
```

但 NSLog 的输出仅为[http://www.example.com](http://www.example.com)。它没有访问令牌返回。我做错什么了吗？

我在桌面谷歌浏览器中打开这个链接并且访问令牌成功返回。（www.example.com#access_token=XXX）但是我在 iPhone 模拟器的 safari 中打开了这个链接，它只返回了 url。

感谢帮助。

@nearonline

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T03:07:02.723

我有同样的问题，原因是 webViewDidFinishLoading 中的 URL 不包含访问令牌。但是 shouldStartLoadWithRequest 中的 URL 会。因此，您应该将代码修改为：

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType {
    NSString *URLString = [[request URL] absoluteString];
    if ([URLString rangeOfString:@"access_token="].location != NSNotFound) {
        NSString *accessToken = [[URLString componentsSeparatedByString:@"="] lastObject];
        NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
        [defaults setObject:accessToken forKey:@"access_token"];
        [defaults synchronize];
        [self dismissViewControllerAnimated:YES completion:nil];
        return NO;
    }
    return YES;
}
- (void)webViewDidFinishLoad:(UIWebView *)webView {

} 
```

# android - Unity3D for Android 中的 Wifi 直接连接

> ID：15310731
> 
> 赞同：2
> 
> 时间：2013-03-09T12:36:12.107
> 
> 标签：android, unity3d, android-wifi

如何统一使用 wifi 直接连接两个 android 设备。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T14:30:31.353

按照[本](http://developer.android.com/guide/topics/connectivity/wifip2p.html)教程了解如何创建 Wi-Fi 直连应用程序。

为了帮助您了解一些基本的 Android API 和编码实践，Android SDK Manager 提供了各种示例代码。有 wifi-direct 文件传输代码 (WiFiDirectDemo)。

您可以在此位置找到所有示例的源代码：

sdk/samples/android-版本/

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-25T10:09:21.577

我建议你看看这个答案：[https ://stackoverflow.com/a/39690512/12130325](https://stackoverflow.com/a/39690512/12130325)

这是一个花费 20-30 美元的插件

如果你想用一个免费的插件来制作它，你可以试试这个：[https ://github.com/saltyJeff/UnityWifiDirect](https://github.com/saltyJeff/UnityWifiDirect)

它也很好用。而且它只有 Wi-Fi Direct。没有其他东西，如 TCP / mySQL 服务器等......

# javascript - JQuery 更改 Embeds Src 属性

> ID：15310734
> 
> 赞同：0
> 
> 时间：2013-03-09T12:36:31.663
> 
> 标签：javascript, jquery, embed, src

我无法更改我的`<embed>` `src`属性。

(jQuery)

```
for (index in Forcast) {
var imageurl = "http://localhost/DesktopVersion/Inc/Images/Weather/";
var imagename = Forcast[0]['icon']+".svg)";
var WeatherIcon = imageurl+imagename;
var parent = $('embed#GetWeatherIcon').parent();
var newImage = "<embed scr=" + WeatherIcon + " />";
var newElement = $(newImage);

$('embed#GetWeatherIcon').remove();
parent.append(newElement);
.... 
```

(HTML)

```
<div>
<embed id="GetWeatherIcon" type="image/svg+xml" />
</div> 
```

(CSS)

```
#GetWeatherIcon {
height:150px; width:150px; margin:30px 0 0 35px; padding:0; border:0; position:absolute;
} 
```

如果有人能指出我需要改变什么，那就太好了。非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T12:48:28.713

`newElement`那里缺少变量。

你应该改变

```
var newImage = "<embed scr="Image" />"; 
```

到

```
var newImage = "<embed scr=" + Image + " />";
var newElement = $(newImage); 
```

然后应该工作

```
$('embed#GetWeatherIcon').remove();
parent.append(newElement); 
```

[这个问题](https://stackoverflow.com/questions/2493706/javascript-changing-src-attribute-of-a-embed-tag)对 src 属性的更改不起作用

```
$('embed#GetWeatherIcon').attr('src', Image); // NOT WORKING 
```

**更新：**

我尝试了您的最新代码，但发现了问题。您在`src`属性名称中犯了一个错误，您写`scr`了它并且它无法工作。你也有一个错误`var imagename = Forcast[0]['icon']+".svg)";`，可能有错误的右括号。

这是我的工作代码：

```
<!DOCTYPE HTML>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF8">
  <meta name="generator" content="HTML hackers, wwww.htmlhackers.com">
  <title>Embed object change</title>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <style>
    #GetWeatherIcon { 
      height:150px; width:150px; margin:30px 0 0 35px; padding:0; border:0; position:absolute;
    }
  </style>
</head>
<body>
  <script>
    $(document).ready(function() {
      $('#change_btn').click(function() {
        var imageurl = "http://upload.wikimedia.org/wikipedia/commons/e/e8/";
        var imagename = "Svg_example3.svg";
        var WeatherIcon = imageurl+imagename;
        var parent = $('embed#GetWeatherIcon').parent();
        var newImage = "<embed id=\"GetWeatherIcon\" src=\"" + WeatherIcon + "\" type=\"image/svg+xml\"/>";
        var newElement = $(newImage);

        $('embed#GetWeatherIcon').remove();
        parent.append(newElement);
      });
    });
  </script>
  <p id="change_btn">Change</p>
  <div>
    <embed id="GetWeatherIcon" src="http://upload.wikimedia.org/wikipedia/commons/c/c9/Svg_example4.svg" type="image/svg+xml" />
  </div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T12:51:07.683

我不确定，bt 从 html 中删除 src 并在源路径中给出其他名称：

```
var newImage = "<embed scr="new source" />"; 
```

# android - 如果我已经有 ACCESS_FINE_LOCATION，我可以省略 ACCESS_COARSE_LOCATION 吗？

> ID：15310742
> 
> 赞同：96
> 
> 时间：2013-03-09T12:37:06.803
> 
> 标签：android, geolocation, android-permissions

我有一个已经`ACCESS_FINE_LOCATION`在清单中请求权限的 GPS 应用程序，现在我想添加一个需要`ACCESS_COARSE_LOCATION`.

我是否正确假设这`ACCESS_FINE_LOCATION`已经足够了，我可以`ACCESS_COARSE_LOCATION`从我的清单中省略？

* * *

## 回答 #1

> 赞同：169
> 
> 时间：2013-03-09T12:43:38.847

[https://developer.android.com/guide/topics/location/strategies.html#Permission](https://developer.android.com/guide/topics/location/strategies.html#Permission)

> 注意：如果您同时使用 NETWORK_PROVIDER 和 GPS_PROVIDER，那么您只需请求 ACCESS_FINE_LOCATION 权限，因为它包含两个提供者的权限。（ACCESS_COARSE_LOCATION 的权限仅包括 NETWORK_PROVIDER 的权限。）

简而言之：是的，`ACCESS_COARSE_LOCATION`如果您已经定义了`ACCESS_FINE_LOCATION`.

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2016-12-01T02:49:50.120

取决于你的需要。

许可明智，`ACCESS_FINE_LOCATION`包括`ACCESS_COARSE_LOCATION`. 但是，有一个问题：

`ACCESS_COARSE_LOCATION`为您提供电池友好的最后已知位置 [https://developer.android.com/training/location/retrieve-current.html#setup](https://developer.android.com/training/location/retrieve-current.html#setup)
例如，如果您的应用执行基于位置的推荐等操作，则最后已知位置是够好了。
这**依赖于 Google Play 服务**

但是，如果您需要像 Pokemon Go 这样的实时/实时位置，请使用`ACCESS_FINE_LOCATION`
它为您提供实时/实时位置。您需要使用`LocationListener`
我上次检查的时间，**这不需要 Google Play 服务**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-12-27T16:40:57.027

不同之处：

[https://developer.android.com/training/location/permissions#accuracy](https://developer.android.com/training/location/permissions#accuracy) [https://developer.android.com/training/location/permissions#approximate-request](https://developer.android.com/training/location/permissions#approximate-request)

***您需要请求这两个权限。***

> 近似 提供设备位置的估计值，大约在 1 英里（1.6 公里）以内。当您声明 ACCESS_COARSE_LOCATION 权限而不是 ACCESS_FINE_LOCATION 权限时，您的应用会使用此级别的位置准确性。精确 提供尽可能准确的设备位置估计，通常在大约 160 英尺（50 米）范围内，有时精确到 10 英尺（几米）或更精确。当您声明 ACCESS_FINE_LOCATION 权限时，您的应用会使用此级别的位置准确性。
> 
> 如果用户授予大概位置权限，那么无论您的应用声明了哪些位置权限，您的应用都只能访问大概位置。
> 
> 当用户仅授予大致位置访问权限时，您的应用程序应该仍然可以工作。如果您的应用中的某个功能绝对需要使用 ACCESS_FINE_LOCATION 权限访问精确位置，您可以要求用户允许您的应用访问精确位置。``

***然后在 Android 12 权限更改***

> 在 Android 12（API 级别 31）或更高版本上，用户可以请求您的应用仅检索大致位置信息，即使您的应用请求 ACCESS_FINE_LOCATION 运行时权限也是如此。
> 
> 要处理这种潜在的用户行为，请不要单独请求 ACCESS_FINE_LOCATION 权限。相反，在单个运行时请求中请求 ACCESS_FINE_LOCATION 权限和 ACCESS_COARSE_LOCATION 权限。如果您尝试仅请求 ACCESS_FINE_LOCATION，系统会在 Android 12 的某些版本上忽略该请求。

# codeigniter - CodeIgniter - 在模型的非对象上调用成员函数...

> ID：15310743
> 
> 赞同：0
> 
> 时间：2013-03-09T12:37:15.307
> 
> 标签：codeigniter, php

我正在使用 CI 2.1.3，但在加载模型和引用 CodeIgniter“超级对象”时遇到问题。

例如：

我正在尝试使用我的登录控制器登录：

```
class Login extends CI_Controller {

    public function __construct()
    {
        parent::__construct();
        $this->load->model('Users_model');
    }

    public function validate_credentials() {
        $this->load->library('form_validation');
        // Some form validation here...

        $query = $this->Users_model->validate();

        if($query) {    // if the user's credentials validated...
            // something
        } else {
            // something
        }
    } 
```

当它到达我的 Users_model 时：

```
class Users_model extends CI_Model {

public function __construct()
{
    parent::__construct();
}

public function validate()
{
    $this->db->where('active', 1);
    $this->db->where('email', $this->input->post('email'));
    $this->db->where('password', md5($this->input->post('password')));
    $query = $this->db->get('user');

    if($query->num_rows == 1)
    {
        return $query;
    }

}
} 
```

我收到错误“致命错误：在第 XX 行的 users_model.php 中的非对象上调用成员函数 where()”，指的是 validate() 函数的第一行。

我可以通过在像 Users_model::validate() 这样的登录控制器中使用双冒号 (::) 运算符来使其工作，但我认为我不应该需要它。

我也可以通过编写如下内容来使其工作：

```
 $ci = get_instance();
    $ci->db->where... 
```

在 Users_model->validate() 函数的开头，但我认为我也不应该这样做。

数据库类正在 autoload.php 中加载。

所以问题是我的模型中的**$this**指的是模型类本身，而不是它应该的“超级对象”。我已经没有动作了，我猜这是关于一些非常简单的事情，但我就是看不到它。请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T12:42:11.913

请尝试加载这样 的**CI 库**

```
 $this->load->library('database'); 
```

在加载模型之前在 __construct() 函数中：或从自动加载文件加载此库，例如：

```
$autoload['libraries'] = array('database','form_validation', 'session'); 
```

# keyboard - 这个密钥的 VK_KEY / 扫描码是什么？

> ID：15310744
> 
> 赞同：3
> 
> 时间：2013-03-09T12:37:19.063
> 
> 标签：keyboard, keyboard-shortcuts, keycode, virtual-keyboard, scancodes

我正在使用 GetASyncKeyState (C++) 来检查密钥。我不知道这个键的名称是什么： ![在此处输入图像描述](../Images/a494eb9126ee1b230f444eecd1badb79.png)

这个键是怎么命名的？什么是 VK_ 或 Scancode？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T12:40:57.287

```
 VK_LMENU : Left menu key (0xA4)
   VK_RMENU : Right menu key (0xA5) 
```

[Source](http://msdn.microsoft.com/en-us/library/windows/desktop/dd375731%28v=vs.85%29.aspx)有许多我什至不知道存在的有趣键，例如“右 Windows 键”oO

显然，此密钥由`VK_APPS`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-07T11:14:51.630

VK_APPS 是一个扩展密钥，它的扫描码是 D5E0（在某些系统上是 D5E1）。更多关于 Windows 键映射[的信息](http://msdn.microsoft.com/en-us/library/windows/hardware/gg463447.aspx)。

# asp.net-mvc-3 - 如何在 WebMail 中从 yahoo 企业帐户发送电子邮件？

> ID：15310747
> 
> 赞同：1
> 
> 时间：2013-03-09T12:37:35.890
> 
> 标签：asp.net-mvc-3, yahoo, webmail

我在我的软件中使用 WebMail。我想从我的雅虎企业帐户发送电子邮件。当我使用通用雅虎帐户时，它可以正常工作。但是，当我尝试从我的雅虎企业帐户发送电子邮件时，电子邮件不会发送。

```
 WebMail.SmtpServer = "smtp.bizmail.yahoo.com";
                WebMail.SmtpPort = 465;
                WebMail.EnableSsl = true;
                WebMail.UserName = "john.smith@mycompanyname.com";
                WebMail.From = "john.smith@mycompanyname.com";
                WebMail.Password ="*****123";

                WebMail.Send(to:"abc123@gmail.com,xyz123@yahoo.com", subject: "CRM Request Testing", body: body, from: null, cc: "pqr123@hotmail.com", filesToAttach: null, isBodyHtml: true, additionalHeaders: null, bcc: "abcxyz@gmail.com", contentEncoding: null, headerEncoding: null, priority: null, replyTo: null);
                return RedirectToAction("EmailSend"); 
```

但不知何故，它不起作用。

错误 ：

```
System.Net.Mail.SmtpException: Failure sending mail. ---> System.IO.IOException: Unable to read data from the transport connection: An existing connection was forcibly closed by the remote host. ---> System.Net.Sockets.SocketException: An existing connection was forcibly closed by the remote host at System.Net.Sockets.Socket.Receive(Byte[] buffer, Int32 offset, Int32 size, SocketFlags socketFlags) at System.Net.Sockets.NetworkStream.Read(Byte[] buffer, Int32 offset, Int32 size) --- End of inner exception stack trace --- at System.Net.Sockets.NetworkStream.Read(Byte[] buffer, Int32 offset, Int32 size) at System.Net.DelegatedStream.Read(Byte[] buffer, Int32 offset, Int32 count) at System.Net.BufferedReadStream.Read(Byte[] buffer, Int32 offset, Int32 count) at System.Net.Mail.SmtpReplyReaderFactory.ReadLines(SmtpReplyReader caller, Boolean oneLine) at System.Net.Mail.SmtpReplyReaderFactory.ReadLine(SmtpReplyReader caller) at System.Net.Mail.SmtpConnection.GetConnection(ServicePoint servicePoint) at System.Net.Mail.SmtpTransport.GetConnection(ServicePoint servicePoint) at System.Net.Mail.SmtpClient.GetConnection() at System.Net.Mail.SmtpClient.Send(MailMessage message) --- End of inner exception stack trace --- at System.Net.Mail.SmtpClient.Send(MailMessage message) at System.Web.Helpers.WebMail.Send(String to, String subject, String body, String from, String cc, IEnumerable`1 filesToAttach, Boolean isBodyHtml, IEnumerable`1 additionalHeaders) at EmailExample.Controllers.HomeController.Feedback(String email, String subject, String body) in C:\Users\Lenovo\Documents\Visual Studio 2010\Projects\EmailExample\EmailExample\Controllers\HomeController.cs:line 45 
```

# gcc - 重新编译gcc：运行旧make就足够了吗？

> ID：15310751
> 
> 赞同：0
> 
> 时间：2013-03-09T12:37:50.960
> 
> 标签：gcc, compiler-construction, compilation

我有4.8`svn update`的本地副本。`gcc`我想重新编译它，基本上杀掉之前的版本，存储在/opt/gcc4.8。我想知道，我必须`config`再次运行，还是只是`make && make install`？也就是可以重复使用之前的配置吗？（现在我写了它，听起来像是“不”，但你介意确认一下吗？）

# php - 如何在简单的 XML 解析脚本中修复字符集？

> ID：15310754
> 
> 赞同：0
> 
> 时间：2013-03-09T12:37:58.177
> 
> 标签：php, xml, character-encoding

有一个简单的 PHP 脚本，它解析 XML 文档并显示项目的属性（属性是俄语，XML 文件使用“utf-8”字符集）：

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<?php
    //header('Content-Type: text/html; charset=utf-8');
    $xml=simplexml_load_file('output.xml');
    echo $xml['moves'];
?>
</body>
</html> 
```

我的 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<game moves="Папа"> 
<a attr="2">123</a>
</game> 
```

使用此代码，我只看到“РџР°РїР°”而不是“Папа”俄语文本。但如果我删除所有 HTML 并通过 header() PHP 方法设置字符集，它将正常工作！我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T13:13:03.543

当创作文档是 HTML 或 XHTML 时，添加 Doctype 声明很重要。它可能会解决你的问题

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T13:27:00.583

如果您不确定，您应该始终仔细检查。让我们这样做。

首先检查 XML 文件是否实际上是[UTF-8 编码的](https://stackoverflow.com/questions/11709410/regex-to-detect-invalid-utf-8-string)。

其次，最后检查您生成的 HTML 是否实际上是 UTF-8 编码的。

这是您上面的示例，其中包含以下两项检查：

```
<?php
ob_start();
?>
    <html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    </head>
    <body>
    <?php
    $buffer = file_get_contents('output.xml');
    if (!preg_match('//u', $buffer)) {
        throw new Exception("XML file is not UTF-8 encoded!");
    }

    $xml = simplexml_load_string($buffer);
    echo $xml['moves'];
    ?>
    </body>
    </html>
<?php
$buffer = ob_get_clean();
if (!preg_match('//u', $buffer)) {
    throw new Exception("HTML is not UTF-8 encoded!");
}
?> 
```

# backbone.js - 在没有 Marionette 的 RegionManager 的情况下关闭 ItemView

> ID：15310759
> 
> 赞同：0
> 
> 时间：2013-03-09T12:38:37.707
> 
> 标签：backbone.js, marionette

我有一个`App.modalRegion`显示的区域`TopicView`，一个显示讲座链接列表的 CompositeView，`sidebar`以及一个`content`在单击链接时播放讲座视频的区域。一切正常，但是`VideoItemView`单击另一个链接时不会关闭。

我的问题是：当点击更改视频内容时`'.link'`，是否存在（其中一种木偶的神奇方式）可以在**不使用子区域和区域**内布局的情况`VideoItemView`下关闭前一个。这是代码：**`App.modalRegion`**

 **```
App.modalRegion.show( new TopicView({ model: topicModel }) );

TopicView = new Backbone.Marionette.CompositeView.extend( {

  template: tpls.TopicTpl,

  ui: {
    sidebar: "#topic-sidebar",
    content: "#topic-content"
  },

  initialize: function(){
    this.listenTo(this.model, "change", this.render);
  },

  onRender: function(){
    this.showContent();

    var collection = this.model.get('lectures'),
      that = this;

    this.ui.sidebar.on('click','.link',function(e) {
      e.preventDefault();
      var sno = $(this).data("sno");

      var vid = new VideoItemView({
        model: collection.get(sno),
        lec_sno: sno
      });

      that.ui.content.html(
        vid.render().el
      );
    });
  },

  showContent : function() {

    var list = new LectListCol({ 
      collection: this.model.get('lectures')
    });

    this.ui.sidebar.html(
      list.render().el
    );
  }

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T00:02:47.403

我会向您添加一个属性，该属性`TopicView`将引用您的`currentVideoItemView`.

Just before you render the new `VideoItemView`, you would check to see if `currentVideoItemView` is an instance of `VideoItemView`.

Then you would call the `close` method on the `currentVideoItemView`, render your new `VideoItemView` and then set the `currentVideoItemView` again.**

# jsp - out.print 不将数据推送到浏览器

> ID：15310762
> 
> 赞同：2
> 
> 时间：2013-03-09T12:39:15.187
> 
> 标签：jsp, buffer, flush, server-push

我有一个`while (true)`将数据发送到浏览器的 JSP。代码片段

```
while (true) {
    out.print("pushing some data to browser");
    out.flush();

    try {
        Thread.sleep(1000);
    } catch (InterruptedException e) {
    }
} 
```

它大部分时间都可以工作，但很少会以 1 秒的间隔将数据发送到浏览器。

而不是排队并同时抛出所有数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T23:49:45.723

Here is the explaination why its not working : JSP is a servlet object at runtime and JSP scriplet/expressions are getting called as part of service() method of Servlet object.

In this case when you access JSP page it will call service() method and keep appending data to out stream until thread is interrupted by app server(InterruptedException) finally it renders page and shows data at once.

You should consider implementing CommetServlet by extending HttpServlet which can leavarage app server support.

App Server comet support examples:

*   Tomcat: [http://tomcat.apache.org/tomcat-6.0-doc/aio.htm](http://tomcat.apache.org/tomcat-6.0-doc/aio.htm)
*   Jetty:[http://download.eclipse.org/jetty/stable7/apidocs/org/eclipse/jetty/continuation/ContinuationSupport.html](http://download.eclipse.org/jetty/stable7/apidocs/org/eclipse/jetty/continuation/ContinuationSupport.html)
*   Resin : [http://caucho.com/resin-3.1/examples/servlet-comet/](http://caucho.com/resin-3.1/examples/servlet-comet/)

# mysql - 在 MySQL 中配对两种类型的值

> ID：15310764
> 
> 赞同：0
> 
> 时间：2013-03-09T12:39:25.217
> 
> 标签：mysql, sql

我有一张桌子：

```
Type | Value
1    | '1test1'
2    | '2test1'
2    | '2test2'
2    | '2test3' 
```

我想得到一个包含一对的结果，其中每种类型的每个条目至少使用一次，但不超过要求。

从上面的示例表中，我想要以下结果：

```
1test1 - 2test1
1test1 - 2test2
1test1 - 2test3 
```

如果表是：

```
Type | Value
1    | '1test1'
1    | '1test2'
1    | '1test3'
2    | '2test1'
2    | '2test2'
2    | '2test3' 
```

我想要以下结果：

```
1test1 - 2test1
1test2 - 2test2
1test3 - 2test3 
```

如果表是：

```
Type | Value
1    | '1test1'
1    | '1test2'
2    | '2test1'
2    | '2test2'
2    | '2test3' 
```

我想要以下结果：

```
'1test1' - '2test1'
'1test2' - '2test2'
'1test1' - '2test3'
'1test1' - '2test1'
'1test2' - '2test2'
'1test1' - '2test3' 
```

我希望每种类型与同一类型中的其他值一样重复。类型中的值不应比同一类型中的其他值更频繁地重复。

使用 SQL 或存储过程，或使用一系列 SQL 语句，最优雅的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T13:22:01.767

这是一个有点做作的答案，但我想它适合这个问题：

```
create table stuff( idx tinyint unsigned, val varchar(50));
insert into stuff( idx, val ) values ( 1, '1val1'), (1, '1val2'), (2,'2val1'),    
   (2,'2val2'), (2, '2val3');

SELECT s0.val v0, s1.val v1 FROM stuff s0 
  JOIN stuff s1 ON s0.idx != s1.idx 
  where s0.idx = 1; 
```

这是一个[小提琴](http://sqlfiddle.com/#!2/b0f71/8/0)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T13:25:41.530

这是你想要的吗

```
SELECT 
    s.val AS One,
    r.val AS Second
FROM stuff AS s
LEFT OUTER JOIN (SELECT * FROM stuff WHERE idx = 2) AS r ON r.idx <> s.idx
WHERE s.idx = 1 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!2/b0f71/19)

输出 ：

```
One     |   Second
--------------------
1val1   |   2val1
1val1   |   2val2
1val1   |   2val3
1val2   |   2val1
1val2   |   2val2
1val2   |   2val3 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T14:45:23.637

当每种类型的行数不同时，这有点容易，但是一旦这样做，它就会变得有些棘手。

所以我想出了这个：

```
CREATE PROCEDURE test()
BEGIN
  DECLARE done INT DEFAULT FALSE;
  DECLARE type1, type2 INT;
  DECLARE value1, value2 VARCHAR(5);
  DECLARE cur1 CURSOR FOR SELECT type,value FROM testtable WHERE Type = 1;
  DECLARE cur1 CURSOR FOR SELECT type,value FROM testtable WHERE Type = 2;
  DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = TRUE;

  if (SELECT COUNT(Value) FROM testtable WHERE Type = 1)
    = (SELECT COUNT(Value) FROM testtable WHERE Type = 2)
  then
      OPEN cur1;
      OPEN cur2;

      CREATE TEMPORARY TABLE test1 (
        Value1 varchar(12),
        Value2 varchar(12)
      )

      read_loop: LOOP
        FETCH cur1 INTO type1, value1;
        FETCH cur2 INTO type2, value2;

        IF done THEN
          LEAVE read_loop;
        END IF;
        INSERT INTO test1 VALUES(value1, value2);
      END LOOP;

      CLOSE cur1;
      CLOSE cur2;

      SELECT * FROM test1;
      DROP TABLE test1;
  ELSE
    SELECT t1.Value, t2.Value
      FROM testtable t1
        LEFT JOIN testtable t2 ON t2.Type = 2
      WHERE t1.Type = 1
    UNION SELECT t1.Value, t2.Value
      FROM testtable t1
        RIGHT JOIN testtable t2 ON t2.Type = 2
      WHERE t1.Type = 1;
  END IF;
END; 
```

这很可怕，但它适用于您的三个示例。有些。

# ios - segue 后无法从下一个 ViewController 上的 UIImagePickerController 加载图像

> ID：15310769
> 
> 赞同：1
> 
> 时间：2013-03-09T12:40:01.330
> 
> 标签：ios, objective-c, uiimagepickercontroller, uistoryboardsegue

我正在尝试加载`UIImagePickerController`在下一个视图控制器上选择的图片。我在类似的线程上进行了一些搜索，发现了一些帮助我设置它的方法，但图像并没有真正“转移”到下一个视图控制器。

这是我的 didFinishPickingImage 和 prepareForSegue 代码：

```
- (void)imagePickerController:(UIImagePickerController *)picker
                              didFinishPickingImage:(UIImage *)image 
                              editingInfo:(NSDictionary *)editingInfo
{
    self.imageChosen = image;
    [picker dismissModalViewControllerAnimated:NO];
    [self performSegueWithIdentifier:@"Edit" sender:self];
}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender 
{
    if ([segue.identifier isEqualToString:@"Edit"]){
    EditViewController *editViewController = 
                       (EditViewController *)segue.destinationViewController;
    editViewController.imageView.image = self.imageChosen;
} 
```

我让 segue 运行到`EditViewController`，但是那里的 imageView 没有加载图片。我猜这个任务在某种程度上是错误的，但我不知道怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T13:07:22.327

当您尝试将图像设置为`EditViewController` `UIImageView`它不存在时，因为`EditViewController`尚未加载。而不是设置图像`UIImageView`直接创建一个实例变量`EditViewController`，将保存图像。而不是将此图像分配`UIImageView`给`viewDidLoad:`

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender 
{
    if ([segue.identifier isEqualToString:@"Edit"]){
    EditViewController *editViewController = 
                   (EditViewController *)segue.destinationViewController;
    editViewController.image = self.imageChosen;
}

//EditViewController.h
...
@property (nonatomic, strong) UIImage *image;
...

//EditViewController.m
- (void)viewDidLoad {
    ...
    self.imageView.image = self.image;
    ...
} 
```

# ruby-on-rails - Rails - 在表单上添加另一个类的数组

> ID：15310771
> 
> 赞同：1
> 
> 时间：2013-03-09T12:40:08.223
> 
> 标签：ruby-on-rails, arrays, forms

如果问题很简单，我很抱歉，我对 Rails 还很陌生。我正在构建一个膳食计划器应用程序，并试图拥有它，以便用户可以创建膳食并将项目添加到该膳食中。例如，一顿“炸鱼薯条”将包括项目“鱼”和“薯条”。据我了解，我认为我需要一种在餐食创建表单上创建一系列项目的方法——但我该怎么做呢？

meal.rb的相关部分：

```
has_many :items
accepts_nested_attributes_for :items 
```

和 item.rb

```
belongs_to :meal 
```

我需要在部分餐单中添加什么才能接受一系列项目？我道歉，我不知道从哪里开始！或者，如果有更简单的方法，请告诉我。但我不想在饭菜上有一个“item_1_id”、“item_2_id”等的列表！！谢谢！！

```
<%= form_for(@meal) do |f| %>
  <% if @meal.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@meal.errors.count, "error") %> prohibited this meal from being saved:</h2>

      <ul>
      <% @meal.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <%= f.label :category %><br />
    <%= f.text_field :category %>
  </div>

  <div class="field">
    <%= f.label :name %><br />
    <%= f.text_field :name %>
  </div>

  <div class="field">
    <%= f.label :child_id %><br />
    <%= f.number_field :child_id %>
  </div>
  <div class="field">
    <%= f.label :time %><br />
    <%= f.date_select :time %>
  </div>
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T13:02:57.867

有一个很棒的 railscast 剧集涵盖了这一点。此外，您可能希望使用 javascript 来获得“添加项目”链接。下面的这个示例将始终有一个新项目可用。

你会想做这样的事情

看法

```
<%= f.fields_for :items do |builder| %>
  <fieldset>

  </fieldset>
<% end %> 
```

控制器

```
@meal.items.build 
```

[http://railscasts.com/episodes/196-nested-model-form-part-1](http://railscasts.com/episodes/196-nested-model-form-part-1)

[http://railscasts.com/episodes/197-nested-model-form-part-2](http://railscasts.com/episodes/197-nested-model-form-part-2)

# php - Zend API Amazon：我如何获得超过 10 件商品？

> ID：15310772
> 
> 赞同：1
> 
> 时间：2013-03-09T12:40:12.887
> 
> 标签：php, api, zend-framework, amazon

我试图开发一个 php 页面，该页面使用关键字显示“视频游戏”类别中的所有项目，只有我可以显示前 10 个项目，但总结果是 254 个项目。有谁能够帮我？最好的，

```
$query  = new ZendService\Amazon\Query($appId, 'ES', $secretKey);
$query->Category($categoria_buscar)->Keywords($keywords_buscar)->AssociateTag($tag)->ResponseGroup('Medium,SalesRank,OfferSummary')->Sort($orden_buscar)->MinimumPrice('no');
$result = $query->search();

foreach($result as $item):?>
    <div class="item">
    <?php echo "Artículo ->".($result->key()+1)."<br />";?>
    <a href="<?php echo $item->DetailPageURL ?>" target="_blank"><?php echo $item->Title?></a>
    <?php 
        if(isset($item->SalesRank)) echo "<br />Ranking de ventas: ".$item->SalesRank;
        if(isset($item->Manufacturer)) echo "<br />Fabricante: ".$item->Manufacturer;
        if(isset($item->Platform)) echo "<br />Plataforma: ".$item->Platform;
    ?>
  <br /><br />
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-02T15:44:19.130

`Page()`在 Zend framework for Amazon 中，您可以使用该函数请求从 1 到 10 的任何页面结果。

例如在你的情况下：

```
$page_num=2;

$query->Category($categoria_buscar)->Keywords($keywords_buscar)->AssociateTag($tag)->ResponseGroup('Medium,SalesRank,OfferSummary')->Sort($orden_buscar)->MinimumPrice('no')->Page($page_num); 
```

请注意，如果您使用“全部”作为类别，则最大页面为 5。

**其他资源**

*   [http://docs.aws.amazon.com/AWSECommerceService/latest/DG/ItemSearch.html](http://docs.aws.amazon.com/AWSECommerceService/latest/DG/ItemSearch.html)

*   [如何在 AWS 中获得第二页的响应？](https://stackoverflow.com/questions/12363032/how-can-i-get-second-pages-response-in-aws/19743465#19743465)

# c++ - VBO不画任何东西

> ID：15310777
> 
> 赞同：1
> 
> 时间：2013-03-09T12:40:41.073
> 
> 标签：c++, blackberry-10, opengl-es-1.1

我试图在我的原生黑莓 10 应用程序中用 VBO 绘制一个正方形。我的实现是，

```
 glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
    glEnable(GL_TEXTURE_2D);
    glEnableClientState(GL_VERTEX_ARRAY);
    glEnableClientState(GL_TEXTURE_COORD_ARRAY);
    glEnable(GL_BLEND);
    glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);
    glGenBuffers(1,&decompressTileImage->VBOId);
    glBindBuffer(GL_ARRAY_BUFFER,decompressTileImage->VBOId);
    glBufferData(GL_ARRAY_BUFFER,sizeof(tileCoordList)+sizeof(tileTextureCoordList),0,GL_STATIC_DRAW);
    glBufferSubData(GL_ARRAY_BUFFER,0,sizeof(tileCoordList),tileCoordList);
    glBufferSubData(GL_ARRAY_BUFFER,sizeof(tileCoordList),sizeof(tileTextureCoordList),tileTextureCoordList);

    glTexCoordPointer(3, GL_FLOAT, sizeof(tileTextureCoordList), (void*)sizeof(this->tileCoordList));
    glVertexPointer(3, GL_FLOAT, sizeof(tileCoordList), 0);

    glDrawArrays(GL_TRIANGLE_STRIP, 0, 4);
    glDisable(GL_BLEND);
    glDisableClientState(GL_VERTEX_ARRAY);
    glDisableClientState(GL_TEXTURE_COORD_ARRAY);
    glDisable(GL_TEXTURE_2D);

    swapBuffers(); 
```

这里 tileCoordList 包含正方形的坐标， tileTextureCoordList 包含相应的纹理。`tileCoordList`是一种`Square3D`类型结构。

```
typedef struct
{
 Vertex3D lowerLeft;
 Vertex3D lowerRight;
 Vertex3D upperLeft;
 Vertex3D upperRight;
}Square3D;

typedef struct
{
GLfloat x;
GLfloat y;
GLfloat z;
} Vertex3D; 
```

4`Vertex3D`表示 tileCoordList 中的一个正方形。也一样`tileTextureCoordList`。不过没有VBO我也能画得很好。我正在使用 opengl-es 1.1

另一个问题。

如果我创建两个 VBO。假设我用它的 id 绑定第一个并复制数据并绘制它。然后是第二个，我也绑定它并复制数据并绘制它。现在如果我想再次绘制第一个，我需要再次绑定它吗？如果我需要再次绑定，是否还需要再次将数据复制到该 VBO 的缓冲区？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T13:49:08.917

它已经在注释中发生`tileCoordList`并且`tileTextureCoordList`是指向`Square3D`结构的指针。

这意味着`sizeof`运算符将为您提供指针的大小，而不是结构的大小。

你可以使用例如

```
glBufferSubData(GL_ARRAY_BUFFER, 0, sizeof(*tileCoordList), tileCoordList); 
```

反而。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T07:56:29.617

您正在对缓冲区做一些奇怪的事情。如果不知道`tileCoordList`是否正确添加数据，很难说是什么。

一般来说，关于您的两个问题：VBO 为您存储数据。这不仅是可能的，而且鼓励这样做：

```
vbo_1, vbo_2;

vbo1.LoadData(data_1);
vbo2.LoadData(data_2);

main_loop {
    vbo1.Bind();
    Draw();
    vbo2.Bind();
    Draw();
} 
```

我在这里使用了伪代码，但你应该明白了。我不明白这个`SubData`电话应该做什么；一般来说，一个简单`glBufferData`的就足够了。`Bind`call 将缓冲区设置为活动缓冲区。

这条线让我畏缩 - 为什么是`VBOId`公开的？对我来说，这闻起来像是一个设计不佳的抽象：

```
glGenBuffers(1,&decompressTileImage->VBOId); 
```

哦，*请*不要使用`this->`. 它在这里唯一做的就是降低可读性。

# box2d - 动态体正在通过地箱

> ID：15310778
> 
> 赞同：0
> 
> 时间：2013-03-09T12:40:50.033
> 
> 标签：box2d, cocos2d-x

我已经搜索了所有内容，但仍然不明白为什么动态体没有与地面体碰撞我的代码是

```
 _debugDraw = new GLESDebugDraw( PTM_RATIO );
  b2Vec2 gravity = b2Vec2(0.0f, -8.0f); 
  world = new b2World(gravity);
  world->SetContinuousPhysics(true);

       // Enable debugging flags.
       uint32 flags = 0;
       flags += b2Draw::e_shapeBit;
       //flags += b2Draw::e_jointBit;
       //flags += b2Draw::e_aabbBit;
       //flags += b2Draw::e_pairBit;
       //flags += b2Draw::e_centerOfMassBit;
       _debugDraw->SetFlags(flags); 
              world->SetDebugDraw(_debugDraw); 

     bool doSleep = false;

   world->SetAllowSleeping(doSleep);
  //////////////////
   b2BodyDef myBodyDef;
   myBodyDef.type = b2_staticBody;

  myBodyDef.position.Set(0, 0);
  b2Body* staticBody = world->CreateBody(&myBodyDef);
  b2PolygonShape polygonShape;
  b2FixtureDef myFixtureDef;
  myFixtureDef.shape = &polygonShape;
  myFixtureDef.density = 1;
  myFixtureDef.friction=0.3f;
//add four walls to the static body
  polygonShape.SetAsBox( 5.5, 0.5, b2Vec2(6, 2), 0);//ground
  staticBody->CreateFixture(&myFixtureDef);

  polygonShape.SetAsBox( 5.5,0.5, b2Vec2(6, 8), 0);//ceiling
  staticBody->CreateFixture(&myFixtureDef);

  polygonShape.SetAsBox( 0.5, 3, b2Vec2(0.6, 5), 0);//left wall
  staticBody->CreateFixture(&myFixtureDef);

  polygonShape.SetAsBox( 0.5, 3, b2Vec2(11.5, 5), 0);//right wall
  staticBody->CreateFixture(&myFixtureDef);

   ///////////////
    b2BodyDef playerspriteBodyDef;
    playerspriteBodyDef.type = b2_dynamicBody;
    playerspriteBodyDef.position.Set( 4,4);
//  playerspriteBodyDef.userData = playerSprite;
    playerspriteBody = world->CreateBody(&playerspriteBodyDef);

    b2PolygonShape playerspriteShape;
    playerspriteShape.SetAsBox(1,1);

    b2FixtureDef playerspriteShapeDef;
    playerspriteShapeDef.shape = &playerspriteShape;
    playerspriteShapeDef.density = 10.0;
    playerspriteShapeDef.friction=0.3;
    playerspriteShapeDef.isSensor = true;
    playerspriteBody->CreateFixture(&playerspriteShapeDef);
    //////////////////////////
    b2BodyDef obstacle1spriteBodyDef;
    obstacle1spriteBodyDef.type = b2_dynamicBody;

    obstacle1spriteBodyDef.position.Set(10,4);  
    obstacle1spriteBody = world->CreateBody(&obstacle1spriteBodyDef);

    b2PolygonShape obstacle1spriteShape;
    obstacle1spriteShape.SetAsBox(0.5,0.5);

    b2FixtureDef obstacle1spriteShapeDef;
    obstacle1spriteShapeDef.friction=0.3;
    obstacle1spriteShapeDef.shape = &obstacle1spriteShape;
    obstacle1spriteShapeDef.density = 10.0;
    obstacle1spriteShapeDef.isSensor = true;
    obstacle1spriteBody->CreateFixture(&obstacle1spriteShapeDef);
    contactListener = new MyContactListener();
    world->SetContactListener(contactListener);

schedule( schedule_selector(HelloWorld::tick) );
    bRet = true;
 } while (0);

return bRet;
 }

 void HelloWorld::draw()
 {
glDisable(GL_TEXTURE_2D);
glDisableClientState(GL_COLOR_ARRAY);
glDisableClientState(GL_TEXTURE_COORD_ARRAY);

world->DrawDebugData();

// restore default GL states
glEnable(GL_TEXTURE_2D);
glEnableClientState(GL_COLOR_ARRAY);
glEnableClientState(GL_TEXTURE_COORD_ARRAY);    

    } 

      void HelloWorld::tick(float dt)
  {

int velocityIterations = 8;//8
int positionIterations = 1;//1

// Instruct the world to perform a single step of simulation. It is
// generally best to keep the time step and iterations fixed.
world->Step(dt, velocityIterations, positionIterations);
world->DrawDebugData();

     } 
```

我需要为此编写联系人监听器吗？我知道如何使用联系监听器，但仍然想知道是否使用它

期待回复

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T12:45:16.093

您的问题是您已将播放器主体固定为传感器：

```
playerspriteShapeDef.isSensor = true; 
```

还要增加 positionIterations，例如：6。

# c - 入口点在正确的位置吗？

> ID：15310779
> 
> 赞同：3
> 
> 时间：2013-03-09T12:40:51.153
> 
> 标签：c, windows, file, assembly, exe

在这些日子里，我正在阅读一些 PE 可执行规范。然后我做了一个小的C程序`push ebp, pop ebp`，我编译了它。成功编译后，我在可执行文件中打开了 PE 文件，并查看了`PE_magic + PE_header_size + PE_OPTHDR_entrypoint`PE 魔术在文件中第一次出现“PE”字符串的位置，根据 PE 和 COFF 规范，PE_header_size 为 24，PE_OPTHDR 为 16。在那个位置我找到了地址 0x1000，但我的文件长度只有 0x600。那么我是在正确的位置上，还是入口点（顺便说一下在 0x200 上）地址设置不正确？

我包括我的文件内容和我的代码的图像。

![0x55 表示 PUSH EBP，0x5D 表示 POP EBP](../Images/6763dc8539613d3bf7231bd981b4f71d.png)

代码（在项目属性中我没有选中添加标准库）：

```
int main() {
    int a = 0;
    __asm {
        push ebp
        pop ebp
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T12:50:24.933

您在文件中看到的内容与内存中的内容不符。如您所见，文件对齐为 200 美元，而内存中的部分对齐为 1000 美元。这通常意味着文件的填充比它所代表的图像少。

更重要的是，您可以看到 .text 的节表条目的相对虚拟地址为 $1000（相对于 Image Base），但原始地址为 $200（相对于文件的开头）。几乎所有说明某个事物在哪里的字段都是 RVA，这意味着它们将它们从 Image Base 中引用的事物的偏移量存储在内存中。

所以不，地址设置不正确 - .text 开始于 1000 美元（相对于 Image Base），这就是入口点指向的位置。

# mysql - 如何从多个表中选择不同的值

> ID：15310782
> 
> 赞同：34
> 
> 时间：2013-03-09T12:41:00.720
> 
> 标签：mysql, sql, database

我需要从 3 个表中获取不同的值。

当我执行此代码时：

```
select DISTINCT(city) from a,b,c 
```

我收到一个错误，说我的列“城市”不明确。

我也试过这个：

```
select DISTINCT(city) from a NATURAL JOIN b NATURAL JOIN c 
```

使用此代码，我不会从我的表中收到任何信息。

让我向您展示我正在尝试做的示例：

```
TABLE A               TABLE B                TABLE C
id  |  city           id  |  city            id  | city
1   |  Krakow         1   |  Paris           1   | Paris
2   |  Paris          2   |  London          2   | Krakow
3   |  Paris          3   |  Oslo
4   |  Rome 
```

我需要得到这样的结果

```
RESULTS
 city
 ----
 Krakow
 Paris
 Rome
 London
 Oslo 
```

城市的顺序对我来说并不重要，我只需要拥有它们，每个城市应该只有一个代表。

任何的想法？我正在考虑使用`id's`但`JOIN`没有连接所以我不能使用它。

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2013-03-09T12:41:50.547

[`UNION`](https://www.w3schools.com/sql/sql_union.asp)关键字将返回结果列表中的`unique`记录。指定时`ALL`（[*UNION ALL*](https://www.w3schools.com/sql/sql_union.asp)）将在结果集上保留重复项，这是 OP 不想要的。

```
SELECT city FROM tableA
UNION
SELECT city FROM tableB
UNION
SELECT city FROM tableC 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/442ef/1)

结果

```
╔════════╗
║  CITY  ║
╠════════╣
║ Krakow ║
║ Paris  ║
║ Rome   ║
║ London ║
║ Oslo   ║
╚════════╝ 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-09T12:44:32.113

```
SELECT city FROM A
UNION DISTINCT
SELECT city FROM B
UNION DISTINCT
SELECT city FROM C 
```

# jquery - Fire bug 说 jQuery 没有定义

> ID：15310784
> 
> 赞同：0
> 
> 时间：2013-03-09T12:41:14.710
> 
> 标签：jquery, lightbox

我正在使用 jQuery 灯箱插件触发错误说

```
Uncaught ReferenceError: jQuery is not defined lightbox.js:47
(anonymous function) lightbox.js:47
(anonymous function) 
```

虽然我包括

```
<!-- Lightbox -->
<script src="/my_site/templates/mt_template/js/lightbox.js"></script> 
```

在标题中，如果我单击此链接，它会显示正确的 js 脚本。

在这个文件中，这是它提示的代码

```
 $ = jQuery; 
```

我也用过`$ = jQuery.noConflict();`，但失败了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T14:37:38.763

可能的原因：

*   您可能根本没有包含 jQuery.js。
*   您可能在 lightbox.js 之后包含了 jQuery.js。正确的顺序是首先包含 jQuery.js，然后是任何其他插件。
*   可能给出的路径无效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T13:09:16.213

在包含灯箱脚本之前，您必须包含一个 jquery 脚本。

# php - 父级中的 ZF2 依赖注入

> ID：15310785
> 
> 赞同：0
> 
> 时间：2013-03-09T12:41:14.700
> 
> 标签：php, dependency-injection, zend-framework2

我想从控制器调用 SteeringWheelMapper->fetchCarBrandList() 方法。这现在很好用，但是有一个问题。

SteeringWheelMapper 扩展了 AbstractWebServiceMapper，它有一个需要 \Zend\Http\Client 实例的构造方法。

正如您在我的 module.config.php 文件中看到的那样，我使用“工厂”来实例化我的 SteeringWheelMapper。供应商有多种产品，所以我将不得不构建多个映射器。在当前情况下，这意味着我必须为扩展 AbstractWebServiceMapper 的每个映射器添加一个工厂配置的键。

例如，当我想添加一个 ExhaustMapper 时，我必须添加

```
SupplierName\Mapper\Exhaust => function ($serviceMapper) {
    $httpClient => new \Zend\Http\Client;

    return new SupplierName\Mapper\ExhaustMapper($httpClient);
} 
```

现在我在重复自己，因为我还必须为 SupplierName\Mapper\SteeringWheelMapper 执行此操作。

我认为应该有一种方法可以为所有映射器创建工厂，而不是在工厂配置中添加新密钥。我的想法对吗？有没有人建议我应该如何做到这一点？

请看下面的代码。

我正在使用 ZF2，并使用此设置：/vendor

*   供应商名称

    *   配置
        *   模块.config.php
    *   日志
        *   日志.log
    *   源代码
        *   供应商名称
            *   实体
                *   抽象实体.php
                *   SteeringWheelEntity.php
            *   映射器
                *   AbstractWebServiceMapper.php
                *   SteeringWheelMapper.php

    $steeringWheelMapper = $this->getServiceLocator()->get('SupplierName\Mapper\SteeringWheel'); $carBrandList = $steeringWheelMapper->fetchCarBrandsList();

SteeringWheelMapper.php

```
<?php

namespace SupplierName\Mapper;

class SteeringWheelMapper extends AbstractWebServiceMapper
{   
    public function fetchCarBrandList()
    {
        // Code for request

        // Dispatch HTTP request
        $this->dispatch();
    }
} 
```

我的 SupplierName/config/module.config.php 看起来像这样：

```
<?php

return array(
    'service_manager' => array(
        'factories' => array(
            'SupplierName\Mapper\SteeringWheel' => function ($serviceManager) {
                $httpClient = new \Zend\Http\Client;

                return new SupplierName\Mapper\SteeringWheelMapper($httpClient);
            },
        ),
    ),
    'supplier_name' => array(
        'api' => array(
            'url' => 'http://api.example.com',
        ),
        'log' => array(
            'file_location' => __DIR__ . '/../log/log.log',
        ),
    ),
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T12:03:36.700

最终工作解决方案：

```
<?php
// module/Application/src/Application/Controller/IndexController.php

namespace Application\Controller;

use Zend\Mvc\Controller\AbstractActionController;
use Zend\View\Model\ViewModel;
use Zend\I18n\Translator\Translator;

class IndexController extends AbstractActionController
{
    protected $translator;

    public function __construct(Translator $translator)
    {
        $this->translator = $translator;
    }

    public function indexAction()
    {                
        $steeringWheelMapper = $this->getServiceLocator()->get('SupplierName\Mapper\SteeringWheel');
        $carBrandList = $steeringWheelMapper->fetchCarBrandList();

        return new ViewModel();
    } 
```

## }

```
<?php
// vendor/SupplierName/src/SupplierName/Module.php

namespace SupplierName;

class Module
{    
    public function getConfig()
    {
        return include __DIR__ . '/../../config/module.config.php';
    }

    public function getServiceConfig()
    {   
        return array(
            'abstract_factories' => array(    
                'SupplierName\Mapper\MapperAbstractFactory'
            ),
        );
    }

    public function getAutoloaderConfig()
    {
        return array(
            'Zend\Loader\StandardAutoloader' => array(
                'namespaces' => array(
                    __NAMESPACE__ => __DIR__,
                ),
            ),
        );
    } 
```

## }

```
<?php
// vendor/SupplierName/src/SupplierName/Mapper/SteeringWheelMapper.php

namespace SupplierName\Mapper;

class SteeringWheelMapper extends AbstractWebServiceMapper
{   
    public function fetchCarBrandList()
    {
        $this->dispatch();
    }
}

<?php
// vendor/SupplierName/src/SupplierName/Mapper/AbstractWebServiceMapper.php

namespace SupplierName\Mapper;

use \Zend\Http\Client;

class AbstractWebServiceMapper
{
    public function __construct(Client $client)
    {

    }

    public function dispatch()
    {       

    } 
```

## }

```
<?php
// vendor/SupplierName/src/SupplierName/Mapper/MapperAbstractFactory.php
namespace SupplierName\Mapper;

use Zend\ServiceManager\AbstractFactoryInterface;
use Zend\ServiceManager\ServiceLocatorInterface;

use \Zend\Http\Client;

class MapperAbstractFactory implements AbstractFactoryInterface
{
    public function canCreateServiceWithName(ServiceLocatorInterface $locator, $name, $requestedName)
    {    
        if (0 === strpos($requestedName, 'SupplierName\Mapper')) {
            $requestedName .= 'Mapper';

            if (class_exists($requestedName)) {
                return true;
            }
        }

        return false;
    }

    public function createServiceWithName(ServiceLocatorInterface $locator, $name, $requestedName)
    {
        $requestedName .= 'Mapper';

        $httpClient = new Client();

        return new $requestedName($httpClient);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T13:19:27.020

您实际上在谈论的是一个抽象工厂，服务管理器支持该概念，但您需要自己编写，这是一个假设您的所有映射器都以开头的示例`SupplierName\Mapper`

```
<?php
namespace SupplierName\Services;

use Zend\ServiceManager\AbstractFactoryInterface;
use Zend\ServiceManager\ServiceLocatorInterface;

class MapperAbstractFactory implements AbstractFactoryInterface
{
    public function canCreateServiceWithName(ServiceLocatorInterface $locator, $name, $requestedName)
    {
        if (0 === strpos($requestedName, 'SupplierName\\Mapper') && class_exists($requestedName)){
            return true;
        }
        return false;
    }

    public function createServiceWithName(ServiceLocatorInterface $locator, $name, $requestedName)
    {
        $httpClient = new \Zend\Http\Client;

        return new $requestedName($httpClient);
    }
} 
```

在您的服务配置中，添加一个抽象工厂键以及抽象工厂的 fqcn，希望在您调用`$sm->get('SupplierName\Mapper\SomeClass');`该类的任何时候，您都会返回一个组合实例

```
public function getServiceConfig()
{       
    return array(
        'abstract_factories' => array(    
            'SupplierName\Services\MapperAbstractFactory'
        ),
    );
} 
```

# c# - 在 MVC 4 中使用 wkhtmltopdf 值不能为空

> ID：15310789
> 
> 赞同：3
> 
> 时间：2013-03-09T12:41:44.707
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4, wkhtmltopdf

我正在尝试生成 PDF，它在开发中完美运行，但在我的生产服务器上却不行。我认为这是一个权限问题。我得到的错误是：

> 值不能为空。参数名称：文件内容

我假设它正在谈论这个 fileContents 参数：

```
 System.Web.Mvc.Controller.File(Byte[] fileContents, String contentType, String fileDownloadName) +28 
```

该方法的代码是：

```
 public ActionResult Pdf(Guid id, string filename)
    {
        string url = Url.Action("RenderReport", "TitleSearchReport", new { id = id }, "http");

        var file = WKHtmlToPdf(url);

        return File(file, "application/pdf", Server.UrlEncode(filename));
    } 
```

生成文件的代码是：

```
 public byte[] WKHtmlToPdf(string url)
    {
        var fileName = " - ";
        //var wkhtmlDir = "C:\\Program Files\\wkhtmltopdf\\";
        //var wkhtml = "C:\\Program Files\\wkhtmltopdf\\wkhtmltopdf.exe";
        var wkhtmlDir = HttpContext.Server.MapPath(@"~/wkhtmltopdf");
        var wkhtml = HttpContext.Server.MapPath(@"~/wkhtmltopdf/wkhtmltopdf.exe");
        var p = new Process();

        p.StartInfo.CreateNoWindow = true;
        p.StartInfo.RedirectStandardOutput = true;
        p.StartInfo.RedirectStandardError = true;
        p.StartInfo.RedirectStandardInput = true;
        p.StartInfo.UseShellExecute = false;
        p.StartInfo.FileName = wkhtml;
        p.StartInfo.WorkingDirectory = wkhtmlDir;

        string switches = "";
        switches += "--print-media-type ";
        switches += "--margin-top 10mm --margin-bottom 10mm --margin-right 10mm --margin-left 10mm ";
        switches += "--page-size Letter ";
        p.StartInfo.Arguments = switches + " " + url + " " + fileName;
        p.Start();

        //read output
        byte[] buffer = new byte[32768];
        byte[] file;
        using (var ms = new MemoryStream())
        {
            while (true)
            {
                int read = p.StandardOutput.BaseStream.Read(buffer, 0, buffer.Length);

                if (read <= 0)
                {
                    break;
                }
                ms.Write(buffer, 0, read);
            }
            file = ms.ToArray();
        }

        // wait or exit
        p.WaitForExit(60000);

        // read the exit code, close process
        int returnCode = p.ExitCode;
        p.Close();

        return returnCode == 0 ? file : null;
    } 
```

再一次，它在我调试时完美运行，但在我部署时却不行。我该怎么做才能使这项工作在生产中发挥作用？

谢谢你的建议。

**编辑：**

将我的方法更改为此，但现在我得到的只是一个空白页......

```
 public void Pdf(Guid id, string filename)
    {
        string url = Url.Action("RenderReport", "TitleSearchReport", new { id = id }, "http");

        var file = WKHtmlToPdf(url);

        if (file != null)
        {
            Response.ContentType = "Application/pdf";
            Response.BinaryWrite(file);
            Response.End();
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T14:27:55.083

解决方案是为网络用户向我的根应用读写权限。不确定安全隐患...

# vb6 - 如何在 vb6 中使用 microsoft internet transfer control 6.0 连接到 ftps 站点

> ID：15310795
> 
> 赞同：2
> 
> 时间：2013-03-09T12:42:31.320
> 
> 标签：vb6, sftp, inet

在我现有的 Visual Basic 6 应用程序中，我连接到一个 ftp 站点。现在对方把协议改成ftps，端口改成22。

我的代码无法正常工作。我收到错误 vb FTP 运行时错误“35753”“此方法不支持协议”。

我只更改了代码中的端口和 url

我的旧网址就像 ftp.xxx.com.tr

我将网址更改为

sftps://ftp.xxx.com.tr

我正在尝试使用 filezilla 连接到同一位置，它将 url 更改为 sftps://ftp.xxx.com.tr 所以我复制了它。stackover 中有类似的问题（[在 MS access 2007 中将 PDF 文件传输到 ftp 服务器](https://stackoverflow.com/questions/13829932/transfer-pdf-file-to-ftp-server-in-ms-access-2007)），但不是 ftps。这是我的代码

```
 With xControl
       .AccessType = icDirect
       .Protocol = icFTP
       .RemotePort = 22
       .RequestTimeout = 50
       .url = xURL
       .UserName = xUserName
       .Password = xPassword
       .Cancel
       .Execute , "DIR " & xFileName
        Do While .StillExecuting
           DoEvents: DoEvents: DoEvents
        Loop
        gLogonFtp = "Connected to Host"
   End With 
```

谢谢你的时间，费尔达

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T09:12:45.577

我使用 psftp 作为 - wqw（3 月 11 日 13:53）在他的评论中建议。这是我的新代码。

这是我的脚本文件

```
 cd to_remotedir
    lcd C:\path2 'local dir
    mget * *
    quit

result = ChangeFileContent("*", xOnlyFileName) //here I change the content of my script file psftpcommand.bat to get a specific file 

Sleep 1000
Shell "C:/path/psftp.exe -v -pw " & xPassword & " " & xUserName & "@" & xURL & ":22 -b C:/path/psftpcommands.bat"
Sleep 1000
 result = ChangeFileContent(xOnlyFileName, "*")//here I rechanged the content of the file. Change file name to ->*

'In the below I check if the requested file has come 
Sleep 1000
If Dir("C:\path2\" & xOnlyFileName) <> "" Then
    gLogonFtp = "Successful"
    frmDataTransfers.lblTransferInfoDownLoad.Caption = "Dosya Çekildi " & xOnlyFileName
    frmDataTransfers.lblTransferInfoDownLoad.Refresh

 End If 
```

就这样。

感谢您的帮助。

费尔达

# ios - 为什么加载数据指示器无法正常工作？

> ID：15310797
> 
> 赞同：1
> 
> 时间：2013-03-09T12:42:41.950
> 
> 标签：ios, objective-c, json, uialertview, uiactivityindicatorview

在我的代码中，我在 UIAlertView 上使用了 UIActivityIndi​​catorView。它工作正常，但我的问题是它没有在正确的时间出现。我的意思是说，当设备从 Web 服务获取数据之后，这个加载指示器最终会出现，我认为这不是一件很平常的事情，因为我希望它在 Web 服务发送或接收数据时出现。

我需要帮助，因为我是 iOS 应用程序开发的新手。如果有任何其他简单的方法来做这件事，那么建议我。我希望我的问题很清楚，我的问题是根据此代码，加载指示器在我从 Web 服务获得回复后出现，但我想运行此指示器，因为用户将按下更新按钮，然后应该调用 Web 服务。告诉我哪里错了。

这是我正在使用的代码

```
-(IBAction)update:(id)sender
{

    av=[[UIAlertView alloc] initWithTitle:@"Updating Image..." message:@"" delegate:self cancelButtonTitle:nil otherButtonTitles:nil];
    ActInd=[[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhiteLarge];
    [ActInd startAnimating];
    [ActInd setFrame:CGRectMake(125, 60, 37, 37)];
    [av addSubview:ActInd];
    [av show];

    {
        NSUserDefaults *defaults=[NSUserDefaults standardUserDefaults];
        int gid=[defaults integerForKey:@"gid"];
        NSString *gameid=[NSString stringWithFormat:@"%i", gid];
        NSLog(@"%@",gameid);
        img=mainImage.image;
        NSData *imgdata=UIImagePNGRepresentation(img);
        NSString *imgstring=[imgdata base64EncodedString];
        NSLog(@"%@",imgstring);
        NSString *escapedString = (NSString *)CFURLCreateStringByAddingPercentEscapes(
                                                                                      NULL,
                                                                                      (CFStringRef)imgstring,
                                                                                      NULL,
                                                                                      CFSTR("!*'();:@&=+$,/?%#[]"),
                                                                                      kCFStringEncodingUTF8);

        NSLog(@"escapedString: %@",escapedString);
        @try
        {
            NSString *post =[[NSString alloc] initWithFormat:@"gid=%@&image=%@",gameid,escapedString];
            NSLog(@"%@",post);

            NSURL *url=[NSURL URLWithString:@"http://mywebspace/updategameimage.php"];

            NSData *postData = [post dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES];

            NSString *postLength = [NSString stringWithFormat:@"%d", [postData length]];

            NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init];
            [request setURL:url];
            [request setHTTPMethod:@"POST"];
            [request setValue:postLength forHTTPHeaderField:@"Content-Length"];
            [request setValue:@"application/json" forHTTPHeaderField:@"Accept"];
            [request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];
            [request setHTTPBody:postData];

            NSError *error = [[NSError alloc] init];
            NSHTTPURLResponse *response = nil;
            NSData *urlData=[NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];

            NSLog(@"Response code: %d", [response statusCode]);
            if ([response statusCode] >=200 && [response statusCode] <300)                {
                NSString *responseData = [[NSString alloc]initWithData:urlData encoding:NSUTF8StringEncoding];
                NSLog(@"Response ==> %@", responseData);

                SBJsonParser *jsonParser = [SBJsonParser new];
                NSDictionary *jsonData = (NSDictionary *) [jsonParser objectWithString:responseData error:nil];
                NSLog(@"%@",jsonData);
                NSInteger type = [(NSNumber *)[jsonData objectForKey:@"type"] integerValue];
                NSLog(@"%d",type);

                if (type==1) {
                    [self alertStatus:@"You can Keep on Drawing" :@"Sketch Updated"];
                }

            }
        }
        @catch (NSException * e) {

            NSLog(@"Exception: %@", e);
            [self alertStatus:@"Unable to connect with game." :@"Connection Failed!"];
        }
    }
    [av dismissWithClickedButtonIndex:0 animated:YES];
    [av release]; av=nil;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T12:48:02.600

UI 更新在主线程上完成。您已经在主线程上启动了活动指示器。很好。

现在，您正在主线程上进行同步网络调用。它应该是异步的。在您收到网络调用的响应之前，您的主线程将保持忙碌状态并且您的 UI 不会更新。

要更新 UI，您可以使网络调用异步，也可以在单独的函数中启动活动指示器，然后通过 performselector:afterdelay 方法延迟网络活动的调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T12:58:04.117

你可以使用[GCD](https://developer.apple.com/library/mac/#documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html) , [Raywenderlich 教程](http://www.raywenderlich.com/4295/multithreading-and-grand-central-dispatch-on-ios-for-beginners-tutorial)

```
-(IBAction)update:(id)sender
{
    /*
      Setup indicator and show it
    */
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_LOW, 0), ^{
        /*
          Do network call
        */
        dispatch_async(dispatch_get_main_queue(), ^{
            /*
              Update UI
            */
        });
    });
} 
```

# java - java.nio.Files.move() - OS X 上的 DirectoryNotEmptyException

> ID：15310799
> 
> 赞同：1
> 
> 时间：2013-03-09T12:43:04.947
> 
> 标签：java, file, osx-lion, nio, move

我正在运行第 3 方库，它的部分操作是将 zip 文件下载到临时目录，解压缩，然后将其从临时目录移动到最终目录......由于某种原因，当我失败时将系统属性保留为默认值：

```
java.nio.file.DirectoryNotEmptyException: /var/folders/j_/1v53z7q15v51wyb00jzht_ch0000gn/T/vertx-68e24a9e-ee15-4b49-a796-7176714865ec
   at sun.nio.fs.UnixCopyFile.move(UnixCopyFile.java:491)
   at sun.nio.fs.UnixFileSystemProvider.move(UnixFileSystemProvider.java:261)
   at java.nio.file.Files.move(Files.java:1345)
   ... 
```

但是，如果我将 java.io.tmpdir 设置为 .tmp（并在我的工作目录中创建一个 .tmp 目录），它就可以工作！

如果我使用 sudo，这也不起作用。

这真的让我很生气......我需要做什么才能让它在 OS X 上运行？

```
> java -version
  java version "1.7.0_17"
  Java(TM) SE Runtime Environment (build 1.7.0_17-b02)
  Java HotSpot(TM) 64-Bit Server VM (build 23.7-b01, mixed mode)

> uname -a
  Darwin daryl-teos-macbook-pro.fritz.box 12.2.0 Darwin Kernel Version 12.2.0: Sat Aug 25 00:48:52 PDT 2012; root:xnu-2050.18.24~1/RELEASE_X86_64 x86_64 
```

问候，达里尔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T14:57:16.210

鉴于[Java API Docs](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#move)中的以下内容`Files.move`：

> 当调用移动非空目录时，如果不需要移动目录中的条目，则移动目录。例如，重命名同一 FileStore 上的目录通常不需要移动目录中的条目。当移动目录需要移动其条目时，此方法将失败（通过抛出 IOException）。移动文件树可能涉及复制而不是移动目录，这可以使用复制方法和 Files.walkFileTree 实用程序方法来完成。

这意味着此功能并非旨在跨网络或不同 FileStore 移动文件。当您更改 tmp 位置时，它对您有用，因为在这种情况下，它只是进行重命名而不是物理移动。

您没有提到如何选择“最终目录”，但如果它是用户控制的，它似乎必须是本地位置。

# android - 在 Android 中使用 ListAdapter 下载数据

> ID：15310810
> 
> 赞同：0
> 
> 时间：2013-03-09T12:44:27.733
> 
> 标签：android, json, android-asynctask, adapter

我正在考虑如何为 Activity 扩展布局，其内容将基于下载的解析 json 数据。

我想过使用AsyncTask 1）下载数据，2）解析它和3）更新UI，但是我使用的ListAdapter必须在主线程上，所以我不能把它放在AsyncTask的onPostExecute方法中。我有点困惑我应该采取什么方法。任何指针都非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T13:06:24.697

像在这个例子中那样做：

```
 private class DownloadFilesTask extends AsyncTask<URL, Integer, Long> {
 protected Long doInBackground(URL... urls) {
     int count = urls.length;
     long totalSize = 0;
     for (int i = 0; i < count; i++) {
         totalSize += Downloader.downloadFile(urls[i]);
         publishProgress((int) ((i / (float) count) * 100));
         // Escape early if cancel() is called
         if (isCancelled()) break;
     }
     return totalSize;
 }

 protected void onProgressUpdate(Integer... progress) {
     setProgressPercent(progress[0]);
 }

 protected void onPostExecute(Long result) {
     showDialog("Downloaded " + result + " bytes");
 } 
```

}

[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

*在doInBackground(Params... para)*中做任何你想做的事情。如果要更新 UI 或 ListAdapter。调用*publishProgress(Params pa)*它将调用*onProgressUpdate(Integer.. progress)*。在这个函数中，你可以更新 UI、更新数据或在主线程上做你想做的事。

希望能帮助到你。

# c# - 通用父集合拆分为子集合

> ID：15310813
> 
> 赞同：4
> 
> 时间：2013-03-09T12:44:35.417
> 
> 标签：c#, list, .net-3.5, ienumerable

我有一个清单`IAnimal`

```
List<IAnimal> Animals 
```

在这个列表中，我有 3 个不同的`Animal`

1.  `Cat`5 个对象
2.  `Dog`10 个对象
3.  `Cow`3 个对象

如何生成 3 个不同的子`Animal`类型列表？

结果应该是

1.  `List<Cat> Cats`包含 5 个对象
2.  `List<Dog> Dogs`包含 10 个对象
3.  `List<Cow> Cows`包含 3 个对象

我不介意使用不同的集合类型`List`。`IEnumerable`或任何其他人？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-09T12:49:13.217

LINQ 使这变得简单：

```
var cats = animals.OfType<Cat>().ToList();
var dogs = animals.OfType<Dog>().ToList();
var cows = animals.OfType<Cow>().ToList(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-09T12:49:52.953

只是使用怎么样[`Enumerable.OfType`](http://msdn.microsoft.com/en-us/library/bb360913.aspx)？

> 根据指定类型过滤 IEnumerable 的元素。

```
Return Value
Type: System.Collections.Generic.IEnumerable<TResult>
An IEnumerable<T> that contains elements from the input sequence of type TResult. 
```

* * *

```
var cat = animals.OfType<Cat>().ToList();
var cow = animals.OfType<Cow>().ToList();
var dog = animals.OfType<Dog>().ToList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T12:49:39.650

`foreach`使用or遍历您的列表`LINQ`并检查类型：

```
 foreach(IAnimal animal in Animals){
  if(animal is Cat)
     Cats.Append(animal);
 //do the same with dogs and cows
 } 
```

# java - 如何使用java检查xml文件是否存在？如果没有 - 创建它

> ID：15310815
> 
> 赞同：0
> 
> 时间：2013-03-09T12:44:48.833
> 
> 标签：java, android, xml, file

类似的东西

```
if(!getContentView(R.layout.mainfile).exits){
  //create the xml file in the layout folder here
  setContentView(R.layout.mainfile);
  initvar();
}
else
{
initvar();
} 
```

另一个小问题是：我可以用 Java 从无到有生成任何 XML 文件吗？（是或否问题）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T13:15:37.367

生成引用的资源（/res 目录中的 XML）`R.java`被编译成 resources.arsc 文件，因此这些 XML 文件甚至无法像设备上的普通文件那样访问。此外，“if exists”语句是在编译时完成的：如果您在代码中引用未定义的资源，它将无法编译。所以不需要在运行时检查。

一般来说，您可以使用例如[XmlPullParser](http://developer.android.com/reference/org/xmlpull/v1/XmlPullParser.html)从您的设备加载 XML 文件，然后`LayoutInflater.inflate()`在布局文件的情况下将其传递给 a。不知道你为什么要这样做。

# android - 录制整个屏幕，包括前置摄像头预览

> ID：15310818
> 
> 赞同：4
> 
> 时间：2013-03-09T12:45:04.113
> 
> 标签：android, surfaceview, mediarecorder

我写了一个小游戏。它实现了前置凸轮预览。我希望能够将整个屏幕录制到 mp4 中。我该怎么做？任何人都知道一个很好的将整个屏幕录制到 mp4 的教程（在代码中，所以不仅仅是屏幕截图.. 我想让用户在玩游戏时进行录制）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T16:10:31.977

事实上，正如@Michael 所说，直接访问屏幕截图和帧缓冲机制是不可能的。但是，如果您想录制游戏会话，这并不意味着您*完全不走运。*这只是更多的工作。

如果您为游戏中的各种操作生成了完美的记录，请保存该记录。然后，您可以构建一个接受记录作为输入的服务（Web 服务、本地服务等）。实际上，它将重播游戏。然后，您将以可以生成视频的方式重建游戏。

您还可以在 Android 模拟器中重播并从中创建视频。不是那么容易部署，但这取决于你想用它做什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T15:31:54.143

不允许应用抓取屏幕内容（请参阅[此讨论](https://groups.google.com/forum/#!msg/android-ndk/9Li2jizwH2Y/M-4eNPzdBtIJ)）。

> [L]让应用程序随意抓取屏幕内容是一个严重的安全风险，这就是平台阻止它的原因（拍摄快照需要用户直接进行物理操作，或者使用调试工具）。

正如@CommonsWare 在他的评论中提到的那样，如果您使用的是 a或它的一个子级（例如），则不能使用该`getDrawingCache`方法来获取 a 。更多细节在[这里](https://stackoverflow.com/questions/5278707/videoview-getdrawingcache-is-returning-black)。`Bitmap``View``SurfaceView``VideoView`

# ios - UICollectionView 单元格消失

> ID：15310824
> 
> 赞同：11
> 
> 时间：2013-03-09T12:45:48.517
> 
> 标签：ios, objective-c, uicollectionview, uicollectionviewcell

我在我的 iPad 应用程序中使用 collectionView。我使用了继承 UICollectionViewFlowLayout 类的自定义布局类。

我正在使用水平滚动方向。问题是，每当我们使用滚动查看集合视图时，有时单元格会消失。我调试了代码，发现在创建单元格后的数据源方法中，它的隐藏属性自动打开。

我尝试使用下面的行但它不起作用

```
 cell.hidden = NO 
```

我还有以下方法可以使绑定更改的布局无效。

```
 - (BOOL)shouldInvalidateLayoutForBoundsChange:(CGRect)newBounds {
          return YES;
        } 
```

但我仍然面临问题。对此有任何解决方案吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T21:23:13.767

有一个已知问题可能导致 UICollectionView 中的单元格[消失](https://openradar.appspot.com/12433891)。如果他们的修复对您不起作用，请尝试[PSTCollectionView](https://github.com/steipete/PSTCollectionView)，它是 UICollectionView 的开源替代品。如果 PSTCollectionView 有效，您应该向 Apple 提交雷达票。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-30T11:11:26.893

在我的项目中， UICollectionViewCell 也消失了，我使用的 flowLayout 是一个名为`UICollectionViewLeftAlignedLayout`. 它的滚动方向是水平的。我一次又一次地调试项目，尝试了我能找到的所有解决方案`google.com`。所有这些都对我不起作用。

最后，我通过以下方式删除`UICollectionViewLeftAlignedLayout`并使用本机 `UICollectionViewFlowLayout`：

```
UICollectionViewFlowLayout *layout   = [[UICollectionViewFlowLayout alloc] init];
[layout setScrollDirection:UICollectionViewScrollDirectionHorizontal];

layout.scrollDirection               = UICollectionViewScrollDirectionHorizontal;
_collectionView.collectionViewLayout = layout;
_CollectionView.autoresizingMask     = UIViewAutoresizingFlexibleWidth|UIViewAutoresizingFlexibleHeight; 
```

我通过storyboard设置单元格间距（也可以通过layout的propery设置）：

[![间距](../Images/ce4f8c5807bfbf597453b871fde96849.png)](https://i.stack.imgur.com/1QifE.jpg)

然后我再次运行该项目，UICollectionViewCell 不再消失。希望我的案例可以帮到你。

# android - 引用drawable中的文件来创建Uri

> ID：15310825
> 
> 赞同：1
> 
> 时间：2013-03-09T12:45:53.893
> 
> 标签：android, android-file

我想将图像设置`res/drawable-hdpi/nasa_image.jpg`为墙纸。

我编写了以下代码，但它引发了`FileNotFoundException`.

```
Uri u1 = Uri.fromFile(new File("res/drawable-hdpi/nasa_image.jpg"));
Uri u2 = Uri.parse("android.resource://com.my.package/drawable/nasa_image.jpg");
Uri u3 = Uri.parse("android.resource://com.my.package/" + R.drawable.nasa_image);
WallpaperManager w = WallpaperManager.getInstance(this);

Bitmap bitmap;
try {
    bitmap = BitmapFactory.decodeStream(getContentResolver().openInputStream(u));
    w.setBitmap(bitmap);
} catch (FileNotFoundException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
```

首先，我尝试了`u1`. 它没有用。然后我搜索并找到[了这个](https://stackoverflow.com/questions/7976141/get-uri-of-mp3-file-stored-in-res-raw-folder-in-android)。然后我尝试了`u2`和`u3`。

我检查了日志。每次都给一样的`FileNotFoundException`。

如何参考它？我哪里错了？我是否使用了错误的根目录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T12:53:35.317

我认为这是在android中这样做的错误方法。为什么不使用资源标识符？

```
ImageView imgView=(ImageView)findViewById(R.id.imageView1);
int id = getResources().getIdentifier(nasa_image, "drawable", getPackageName());
Drawable drawable=res.getDrawable(id);
imgView.setImageDrawable(drawable); 
```

或者

```
ImageView imgView=(ImageView)findViewById(R.id.imageView1);
Drawable drawable= getResources().getDrawable(R.drawable.nasa_image);
imgView.setImageDrawable(drawable);
imgView.setImageDrawable(); 
```

更新从drawable转换为位图只需使用它（假设你的drawable是一个`instanceof Bitmapdrawable`）

```
Bitmap bitmap = ((BitmapDrawable)drawable).getBitmap(); 
```

如果您不确定可绘制实例，请使用此方法

```
public static Bitmap drawableToBitmap (Drawable drawable) {
    if (drawable instanceof BitmapDrawable) {
        return ((BitmapDrawable)drawable).getBitmap();
    }

    Bitmap bitmap = Bitmap.createBitmap(drawable.getIntrinsicWidth(), drawable.getIntrinsicHeight(), Config.ARGB_8888);
    Canvas canvas = new Canvas(bitmap); 
    drawable.setBounds(0, 0, canvas.getWidth(), canvas.getHeight());
    drawable.draw(canvas);

    return bitmap;
} 
```

如果您确定您的文件路径正确，请使用此方法

```
 private Drawable getDrawable(String path) {
      File imgFile = new File(path);
      if (imgFile.exists()) {
         Bitmap bitmap = BitmapFactory.decodeFile(imgFile.getAbsolutePath());
         return new BitmapDrawable(resources, bitmap);
      }
      return null;
   } 
```

您可以根据您的问题调整它以返回位图或可绘制

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-18T15:10:18.750

您不应包含扩展名 (.jpg) 使用：

`Uri.parse("android.resource://" + BuildConfig.APPLICATION_ID + "/drawable/nasa_image");`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-09T12:55:25.383

尝试

```
Uri u1 = Uri.parse("R.drawable.nasa_image"); 
```

# asp.net-mvc-4 - 如何返回 IEnumerable 在 WebAPI 中（手动应用过滤器）

> ID：15310830
> 
> 赞同：0
> 
> 时间：2013-03-09T12:46:59.010
> 
> 标签：asp.net-mvc-4, .net-4.0, asp.net-web-api, odata

我想返回我的进程（Processo 类）的所有 ID（之前应用过滤器和订单），如下所示：

网址：`api/processos/getIds?&$filter=(Id eq 1)`

```
public IEnumerable<int> getIds(ODataQueryOptions opts)
{
    var results = Repositorio.Query<Processo>();

    results = opts.ApplyTo(results) as IQueryable<Processo>;

    return results.Select(p => p.Id).ToArray();
} 
```

## 错误

![WebApi 原始数组错误](../Images/bca5c6c030630579f1db24a3f0d6b954.png)

> 完整图片在：http: [//i.stack.imgur.com/gzJ7n.jpg](https://i.stack.imgur.com/gzJ7n.jpg)

* * *

## 例外

```
System.ArgumentException was unhandled by user code
  HResult=-2147024809
  Message=Cannot apply ODataQueryOptions of 'System.Int32' to IQueryable of 'CreditoImobiliarioBB.Model.Processo'.
Parameter name: query
  Source=System.Web.Http.OData
  ParamName=query
  StackTrace:
       at System.Web.Http.OData.Query.ODataQueryOptions`1.ValidateQuery(IQueryable query)
       at System.Web.Http.OData.Query.ODataQueryOptions`1.ApplyTo(IQueryable query)
       at CreditoImobiliarioBB.Web.Api.processosController.getIds(ODataQueryOptions opts) in w:\Clients\creditoimobiliariobb.com.br\src\CreditoImobiliarioBB\CreditoImobiliarioBB.Web\Api\processosController.cs:line 39
       at lambda_method(Closure , Object , Object[] )
       at System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClass13.<GetExecutor>b__c(Object instance, Object[] methodParameters)
       at System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
       at System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
       at System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
  InnerException: 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T13:25:17.777

您需要给 ODataQueryOptions 一个类型参数，否则它将使用操作的返回类型来构建选项。这是固定代码：

```
public IEnumerable<int> getIds(ODataQueryOptions<Processo> opts)
{
    var results = Repositorio.Query<Processo>();

    results = opts.ApplyTo(results) as IQueryable<Processo>;

    return results.Select(p => p.Id).ToArray();
} 
```

# jquery - jquery ui对话框上的自定义图像

> ID：15310832
> 
> 赞同：1
> 
> 时间：2013-03-09T12:47:17.103
> 
> 标签：jquery, css, jquery-ui

我在我的 asp.net 视图上使用 Jquery UI 对话框，如下所示：

```
$("#dialog-dial-prefix").dialog({
        autoOpen: false,
        modal: true,
        width: 470,
        resizeable: true,
        buttons: {
            "OK": function () {
 $(this).dialog("close");

                                }

                      ,
                       "Cancel": function () {
                           $(this).dialog("close");
                            var selectedDialPrefix = $("#SelecteddialprefixId").val();
                            $("#" + selectedDialPrefix).focus();
                        }
        }
    }); 
```

此对话框有两个按钮 Ok 和 Cancel。我想将自定义图像（我有 png 图像）应用到这些按钮。如何添加按钮并删除显示为 Ok 的文本并在 Jquery ui 对话框按钮上取消

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T13:02:57.680

您可以通过覆盖按钮的默认 css 来实现此目的

```
.ui-dialog .ui-dialog-buttonpane button { 
    text-indent: -9999em; /* hides the text */
    color: transparent; /* also hides text */
    background-image: url(/path/to/image.png); /*replaces default image */
    background-repeat: no-repeat;
} 
```

如果要定位特定对话框，请添加对话框的 ID

# vb.net - 向具有现有数据源的 VSTO ListObject 添加列？

> ID：15310836
> 
> 赞同：1
> 
> 时间：2013-03-09T12:47:37.357
> 
> 标签：vb.net, winforms, excel, vsto

有谁知道如何在 Excel 中的现有列表对象中添加一列，该对象已经从 SQL 源绑定了一个数据源？我只想在该数据列的每个单元格中添加另一个带有公式的列，以匹配当时显示的任何数据量。

到目前为止，我有以下 2 个示例，1\. 仅在运行时给出语法错误`Syntax error: Missing operand before '=' operator`。2\. 给出一个不起眼的 COM 异常。

1.

```
 Dim prodDateCol = New DataColumn("Prod Date", GetType(System.Int32),
    "=LEFT([Production Code],4)")
    ComplaintsListObject.ListColumns.Add(prodDateCol) 
```

2.

```
 Dim objListCol = ProdListObject.ListColumns.Add()
    Dim listColRange = objListCol.DataBodyRange
    listColRange.Cells(1, 1) = "=LEFT([Production Code],4)" 
```

我知道或者我可以在每次列表对象大小发生变化时首先检查之后使用 Excel 单元格执行此操作，但在更详细地研究如何执行此操作之前。我希望有一种方法可以使用列表对象执行此操作本身。

有人有任何例子或建议吗？

谢谢

**更新：** 我已经稍微调整了这个以进行测试，并且更多地查看了它的使用，`.Expression`它只允许某些功能，所以我已经更改`LEFT`为`SUBSTRING`. 这个例子仍然返回一个 COM 异常`Invalid index. (Exception from HRESULT: 0x8002000B (DISP_E_BADINDEX))`

```
 Dim prodDateCol As DataColumn = New DataColumn
    prodDateCol.ColumnName = "Prod Date"
    prodDateCol.DataType = System.Type.GetType("System.Int32")
    prodDateCol.Expression = "SUBSTRING([Production Code],1,4)"

    ComplaintsListObject.ListColumns.Add(prodDateCol) 
```

# java - j2me JAR Manifest、JAD File 和 Nokia Publish QA 失败

> ID：15310843
> 
> 赞同：0
> 
> 时间：2013-03-09T12:49:00.660
> 
> 标签：java, java-me, jar, nokia-s40, jad

最近我开发了一些应用程序，它是简单的 Weider 6 excersises 浏览器。

我已经使用 JAR 清单中的元素手动创建了 JAD 文件，但是诺基亚发布 QA 团队撤销了我的应用程序，原因如下：

```
Dear publisher,
While processing your content we found the following MIDlet-attributes are not present in the JAD and JAR manifest files:

Key 'MicroEdition-Profile' is not in the .jad and .jar.
Key 'MicroEdition-Configuration' is not in the .jad and .jar.
Key 'MIDlet-1' is not in the .jad and .jar.
Key 'MIDlet-Name' is not in the .jad and .jar.
Key 'MIDlet-Version' is not in the .jad and .jar.
Key 'MIDlet-Vendor' is not in the .jad and .jar. 
```

真的很奇怪，因为我的清单如下所示：

```
MIDlet-Version: 1.0.0
MIDlet-Vendor: Michal Kulesza
MIDlet-Jar-URL: Weider6.jar
MicroEdition-Configuration: CLDC-1.0
MicroEdition-Profile: MIDP-2.1
MIDlet-1: Weider6,/1.png,me.kulesza.WeiderExcercises
MIDlet-Name: Weider6 
```

和 JAD 文件几乎一样：

```
MIDlet-Jar-Size: 199784
Sealed: true
MIDlet-Version: 1.0.0
MIDlet-Vendor: Michal Kulesza
MIDlet-Jar-URL: Weider6.jar
MicroEdition-Configuration: CLDC-1.0
MicroEdition-Profile: MIDP-2.1
MIDlet-1: Weider6,/1.png,me.kulesza.WeiderExcercises
MIDlet-Name: Weider6 
```

你们中有人遇到过这样的问题吗？我做错了什么还是他们的错？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-10T00:15:06.390

您可以使用我的 JAD-Checker [jadcheck.appspot.com在线检查 JAD 文件](http://jadcheck.appspot.com/)

您可能还应该包括以下条目： MIDlet-Icon MIDlet-Description 但是这些缺失的条目不能成为您收到错误报告的原因。

在我看来，上传过程中出现了问题。例如，您可以轻松执行错误：选择要上传的文件，但未确认它以开始实际上传。发生在我最后保存整个表格时，文件没有上传，系统使用了我的旧文件，并且QA重新检查了我的旧版本。现在，在我提交给 QA 之前，我总是下载我上传的内容，以检查系统是否真的有我的新文件。

有一个额外的“验证”按钮。它应该捕获像这样的错误。

# c++ - 在 C++ 中创建一个类对象

> ID：15310846
> 
> 赞同：53
> 
> 时间：2013-03-09T12:49:15.657
> 
> 标签：c++, class

首先我来自JAVA。

在java中，我们像这样创建类对象。

```
Example example=new Example(); 
```

Example 类可以有构造函数，也可以不能有构造函数。

我可以像这样在 c++ 中使用相同的

```
Example* example=new Example(); 
```

构造函数是强制性的。

从本教程[http://www.cplusplus.com/doc/tutorial/classes/](http://www.cplusplus.com/doc/tutorial/classes/)

我知道我们可以像这样创建对象。

```
Example example; 
```

不需要构造函数。

我有两个问题。

1.  两种创建类对象的方式有什么区别。

2.  如果我正在创建对象，例如`Example example;`如何在单例类中使用它。

就像我通常那样做。

```
Sample* Singleton::get_sample() {
    if (sample == NULL) {
        sample = new Sample();
    }
    return sample;
} 
```

如果我错了，请指导我。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-03-09T12:58:17.267

> 我可以像这样在 C++ 中使用相同的 [...] 构造函数是强制性的。从[本教程](http://www.cplusplus.com/doc/tutorial/classes/)中我了解到我们可以创建这样的对象 [...] 不需要构造函数。

这是错误的。**必须存在**构造函数才能创建对象。如果您不提供任何构造函数，则编译器*可以*在某些条件下隐式定义构造函数，但如果您希望实例化对象，最终构造函数必须存在。事实上，对象的生命周期被定义为在构造函数例程返回时开始。

来自 C++11 标准的第 3.8/1 段：

> [...] T 类型对象的生命周期开始于：
> 
> — 获得了类型 T 的正确对齐和大小的存储，并且
> 
> — 如果对象有非平凡的初始化，它的初始化就完成了。

因此，必须存在构造函数。

> 1）两种创建类对象的方式有什么区别。

当您实例化具有自动存储持续时间的对象时，如下所示（`X`某些类在哪里）：

```
X x; 
```

您正在创建一个对象，当它超出范围时将自动销毁。另一方面，当你这样做时：

```
X* x = new X(); 
```

您正在动态创建一个对象，并将其地址绑定到一个指针。这样，当您的指针超出范围时，您创建的对象*不会*被销毁。`x`

在现代 C++ 中，这被认为是一种可疑的编程实践：尽管指针很重要，因为它们允许实现**[引用语义](https://stackoverflow.com/questions/14539624/memory-management-patterns-in-c/14539873#14539873)**，但*原始*指针是不好的，因为它们可能导致内存泄漏（对象超过其所有指针并且永远不会被销毁）或悬空指针（指针超过它们指向的对象，在取消引用时可能导致未定义行为）。

事实上，当使用 来创建对象时`new`，您*必须始终*记住使用 来销毁它`delete`：

```
delete x; 
```

如果您需要引用语义并且被迫使用指针，那么在 C++11 中您应该考虑使用**智能指针**：

```
std::shared_ptr<X> x = std::make_shared<X>(); 
```

智能指针负责处理内存管理问题，这让您对原始指针感到头疼。事实上，智能指针与 Java 或 C# 对象引用*几乎*相同。“几乎”是必要的，因为程序员必须注意不要通过拥有智能指针来引入循环依赖。

> 2）如果我正在创建像示例示例这样的对象；如何在单例类中使用它。

你可以做这样的事情（简化代码）：

```
struct Example
{
    static Example& instance()
    {
        static Example example;
        return example;
    }

 private:

    Example() { }
    Example(Example const&) = delete;
    Example(Example&&) = delete;
    Example& operator = (Example const&) = delete;
    Example& operator = (Example&&) = delete;

}; 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2013-03-09T12:55:41.693

```
Example example; 
```

这是一个名为`example`type的变量的声明`Example`。这将默认初始化涉及调用其默认构造函数的对象。该对象将具有自动存储持续时间，这意味着它将在超出范围时被销毁。

```
Example* example; 
```

这是一个名为的变量的声明，它是`example`一个*指向*`Example`. 在这种情况下，默认初始化使其未初始化 - 指针没有特别指向任何地方。这里没有`Example`对象。指针对象具有自动存储期限。

```
Example* example = new Example(); 
```

这是一个名为的变量的声明，它是`example`一个*指向*`Example`. 如上所述，此指针对象具有自动存储持续时间。然后使用 的结果对其进行初始化`new Example();`。此`new`表达式创建一个`Example`具有动态存储持续时间的对象，然后返回一个指向它的指针。所以`example`指针现在指向那个动态分配的对象。该`Example`对象是值初始化的，如果有一个，它将调用用户提供的构造函数，否则将所有成员初始化为 0。

```
Example* example = new Example; 
```

这与上一行类似。不同之处在于`Example`对象是默认初始化的，它将调用的默认构造函数`Example`（或者如果它不是类类型，则保持未初始化）。

动态分配的对象必须是`delete`d （可能带有`delete example;`）。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-10-21T06:24:07.560

在 C++ 中有两种方法可以创建/创建对象。

第一个是：

```
MyClass myclass; // if you don;t need to call rather than default constructor    
MyClass myclass(12); // if you need to call constructor with parameters 
```

第二个是：

```
MyClass *myclass = new MyClass();// if you don;t need to call rather than default constructor
MyClass *myclass = new MyClass(12);// if you need to call constructor with parameters 
```

在 c++ 中，如果使用 new 关键字，对象将存储在堆中。如果您长时间使用此对象并且使用第一种方法，它将非常有用，它将存储在堆栈中。它只能在很短的时间内使用。注意：如果你使用 new 关键字，记住它会返回指针值。您应该用 * 声明名称。如果您使用第二种方法，它不会删除堆中的对象。您必须使用 delete 关键字自行删除；

```
delete myclass; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-09T12:54:25.023

> 1）两种创建类对象的方式有什么区别。

第一个是指向堆中构造对象的指针（by `new`）。第二个是隐式构造的对象。（默认构造函数）

> 2）如果我正在创建像示例示例这样的对象；如何在单例类中使用它。

这取决于您的目标，最简单的方法就是简单地将其作为班级成员。

具有类对象的单例类示例`Example`：

```
class Sample
{

    Example example;

public:

    static inline Sample *getInstance()
    {
        if (!uniqeInstance)
        {
            uniqeInstance = new Sample;
        }
        return uniqeInstance;
    }
private:
    Sample();
    virtual ~Sample();
    Sample(const Sample&);
    Sample &operator=(const Sample &);
    static Sample *uniqeInstance;
}; 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-03-09T12:55:28.473

1）两种创建类对象的方式有什么区别。

a) 指针

```
Example* example=new Example();
// you get a pointer, and when you finish it use, you have to delete it:

delete example; 
```

b) 简单声明

```
Example example; 
```

你得到一个变量，而不是一个指针，它将在声明的范围之外被销毁。

2) 单例 C++

[这个 SO question](https://stackoverflow.com/questions/1008019/c-singleton-design-pattern)可以帮助你

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-03-09T12:56:11.770

首先，这两种情况都调用了构造函数。如果你写

```
Example *example = new Example(); 
```

然后您正在创建一个对象，调用构造函数并检索**指向它的指针**。

如果你写

```
Example example; 
```

唯一的区别是您获取的是对象而**不是**指向它的指针。在这种情况下调用的构造函数与上面相同，默认（无参数）构造函数。

至于单例问题，您必须通过编写简单地调用您的静态方法：

```
Example *e = Singleton::getExample(); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-03-09T12:54:48.940

```
Example example; 
```

这里的例子是堆栈上的一个对象。

```
Example* example=new Example(); 
```

这可以分为：

```
Example* example;
....
example=new Example(); 
```

这里第一条语句创建了一个变量示例，它是一个“指向示例的指针”。调用构造函数时，会在堆上为其分配内存（动态分配）。当不再需要该内存时，程序员有责任释放它。（C++ 没有像 java 这样的垃圾收集）。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-03-09T12:55:01.640

在第一种情况下，您在`heap`using上创建对象`new`。在第二种情况下，您是在 上创建对象`stack`，因此超出范围时将被处理掉。在您不再需要它们时，您需要在明确使用时`C++`删除它们。`heap``delete`

要从类中调用静态方法，请执行

```
Singleton* singleton = Singleton::get_sample(); 
```

在您的主要功能或任何地方。

# c - 在linux c中使用按键打破循环

> ID：15310848
> 
> 赞同：3
> 
> 时间：2013-03-09T12:49:23.067
> 
> 标签：c, keypress

我需要用 C 语言编写一个程序，该程序将执行以下操作：例如，当我按下“a”时，终端将在无休止的循环中写入键入的字符，如下所示：aaaaaaaaaaaaaaaa...直到另一个键，例如“b”将被按下。最终输出应该如下所示：aaaaaaaaabbbbbbq（q 应该终止程序）。我的代码在这里：

```
int main(int argc, char** argv) {

    int c;
    static struct termios staryTermios, novyTermios;

    tcgetattr(STDIN_FILENO, &staryTermios);

    novyTermios = staryTermios;
    novyTermios.c_lflag &= ~(ICANON);
    tcsetattr(STDIN_FILENO, TCSANOW, &novyTermios);
    while ((c = getchar()) != 'q') {
        putchar(c);
    }

    tcsetattr( STDIN_FILENO, TCSANOW, &staryTermios);

    return 0;
} 
```

这个版本只写一次输入的字符，然后等待另一个按键

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T14:00:19.120

为了达到你想要的结果，你需要使标准输入非阻塞。您可以通过对您的代码进行小幅调整来做到这一点。它在 Mac OS X 10.7.5 上运行良好。请注意，`getchar()`当没有准备好读取的字符时返回 EOF（大多数情况下；您和我都无法以足够快的速度键入现代计算机）。我有点担心，在某些系统上，一旦`getchar()`没有字符可读取时返回 EOF，它可能永远不会再返回 EOF 以外的任何内容，但这对于 Mac OS X 来说不是问题。

```
#include <stdio.h>
#include <termios.h>
#include <unistd.h>
#include <fcntl.h>
#include <stdlib.h>

static void err_exit(const char *msg);

int main(void)
{
    int c;
    int oc = '\0';
    struct termios staryTermios, novyTermios;
    int oflags, nflags;

    if (tcgetattr(STDIN_FILENO, &staryTermios) != 0)
        err_exit("tcgetattr() failed");

    novyTermios = staryTermios;
    novyTermios.c_lflag &= ~(ICANON);
    if (tcsetattr(STDIN_FILENO, TCSANOW, &novyTermios) != 0)
        err_exit("tcsetattr() failed to set standard input");

    oflags = fcntl(STDIN_FILENO, F_GETFL);
    if (oflags < 0)
        err_exit("fcntl() F_GETFL failed");

    nflags = oflags;
    nflags |= O_NONBLOCK;
    if (fcntl(STDIN_FILENO, F_SETFL, nflags) == -1)
        err_exit("fcntl() F_SETFL failed");

    while ((c = getchar()) != 'q')
    {
        if (c != EOF)
            oc = c;
        if (oc != '\0')
            putchar(oc);
    }

    if (tcsetattr(STDIN_FILENO, TCSANOW, &staryTermios) != 0)
        err_exit("tcsetattr() failed to reset standard input");

    putchar('\n');
    return 0;
}

static void err_exit(const char *msg)
{
    fprintf(stderr, "%s\n", msg);
    exit(1);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T13:16:23.733

我想您将需要两个线程，它们都将访问一个公共变量。一个线程的工作是连续打印公共变量。第二个的工作是等待来自键盘的输入并相应地更新变量。

# php - $facebook->api('/me') 返回 NULL

> ID：15310854
> 
> 赞同：2
> 
> 时间：2013-03-09T12:49:40.847
> 
> 标签：php, facebook, facebook-graph-api, yii

我正在尝试在 Yii 框架中使用 Facebook 连接。

问题是我想访问用户的电子邮件地址，而 $facebook->api('/me') 返回 NULL。

如何解决这个问题？

这是我的代码：

```
<?php
 Yii::import("ext.fconnect.*");
        $app_id = "xxx";
        $app_secret = "xxxx";
        Facebook::$CURL_OPTS[CURLOPT_SSL_VERIFYPEER] = false;

        $facebook = new Facebook(array(
            'appId' => $app_id,
            'secret' => $app_secret,
        ));

        $user = $facebook->getUser();
        if ($user) {

            try {                 
                $user_profile = $facebook->api('/me');
            } catch (FacebookApiException $e) {
                $user_profile = $e;
                $user = NULL;
            }

        }

        if ($user) {

            $d["logoutUrl"] = $facebook->getLogoutUrl(array(
                'fblogout' => 'true',           
                'next' => $this->createAbsoluteUrl("main/signout")
            ));

            $d["user_info"] = $facebook->api('/' . $user);

        } else {

            $d["loginUrl"] = $facebook->getLoginUrl(array(
                'scope' => 'email, read_stream, publish_stream, user_birthday, user_location, user_work_history, user_hometown, user_photos',
                'redirect_uri' => $this->request->hostInfo . $this->request->url,
            ));
        }
        $d["user"] = $user;
        $d["userprofile"] = $user_profile; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T12:59:58.993

该行：

```
$d["user_info"] = $facebook->api('/' . $user); 
```

在我看来不对。我不知道数据类型`$user`是什么；我只是使用`$facebook->api('/me');`，它将为您提供当前登录和经过身份验证的用户的个人资料。

# java - 文本区域未随着按钮操作执行事件而更新

> ID：15310862
> 
> 赞同：1
> 
> 时间：2013-03-09T12:50:45.307
> 
> 标签：java, swing, concurrency, jtextarea, event-dispatch-thread

我有一个 Text Area swing 元素，我想在其中显示一些执行日志。消息应该出现在每个执行步骤之后。例如“提取已开始”。但问题是所有日志消息仅在按钮操作执行事件完成后出现一次。以下是我用来显示一些文本的方式

```
getXmlButton = new JButton("Fetch Reports");
    getXmlButton.addActionListener((new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent e) {

            createDirectory();
            stutusArea.append("Fetching has been started");
            final String password = passwordTextField.getText();
            final String username = loginTextField.getText();

            OperatingSystemDriver os = new OperatingSystemDriver();
            driver = os.getDriver();

            stutusArea.append("getting some url");
            driver.get(URL);

           try {
               LoginPage login = new LoginPage(driver);
               login.loginAs(username, password);
               stutusArea.append("successful login"); 
           } catch (Exception e1) {
               stutusArea.append("login error"); 
            }
    insertToDbButton.setEnabled(true);
        }
    })); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T12:57:31.183

您必须使用不同的线程，否则您的 GUI 会阻塞。

请注意，从其他线程更新 GUI 是一个坏主意，请使用[SwingUtilities.invokeLater](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingUtilities.html#invokeLater%28java.lang.Runnable%29)来避免一些奇怪的错误/错误。

```
public void actionPerformed(ActionEvent e) {
    new Thread(new Runnable() {
        public void run() {
             SwingUtilities.invokeLater(new Runnable() {
                 public void run() {
                     stutusArea.append("Fetching has been started");
                 }
             })
             final String password = passwordTextField.getText();
             final String username = loginTextField.getText();
             // ...
        }
    }).start();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T12:52:16.787

那是因为您`ActionPerformed`在 GUI 线程中执行所有操作，因此 GUI 冻结，并等待您的`ActionPerformed`操作完成，避免这种情况的一种方法是使用[Threads](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html)，有一个示例：[Thread Example](http://www.javabeginner.com/learn-java/java-threads-tutorial)

# c# - 检测自己的应用程序 HTTP 流量

> ID：15310869
> 
> 赞同：0
> 
> 时间：2013-03-09T12:51:26.910
> 
> 标签：c#, .net, winforms

我需要在我的 winforms 应用程序中添加一个计数器，用于计算我与服务器通信的 MB 数据量。服务器是一个 Web 服务，但我只需要知道客户端正在使用服务器上传/下载多少（兆）字节的数据。

计数器应该在我的应用程序中实现，所以我不依赖第三方应用程序。

# c# - aspx ListBox 不工作 (SelectedIndex)

> ID：15310874
> 
> 赞同：0
> 
> 时间：2013-03-09T12:51:49.443
> 
> 标签：c#, asp.net, listbox

我在我的 aspx 页面中有这个：

```
<asp:ListBox ID="ListBoxDelete" runat="server" AutoPostBack="true" OnSelectedIndexChanged="ListBoxDelete_SelectedIndexChanged1"></asp:ListBox> 
```

后面的代码：

```
protected void Page_Load(object sender, EventArgs e){
   ListBoxDelete.Items.Clear();
   List<string> itens = new List<string>();
   for(var item in itens){
      ListBoxDelete.Items.Add(item);
   }
}

protected void ListBoxDelete_SelectedIndexChanged1(object sender, EventArgs e){
   int x = ListBoxDelete.SelectedIndex;
   doSomething(x);
} 
```

我的 SelectedIndex 不起作用...如果我没记错的话，该值始终为 -1。有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T13:26:08.807

如下更改您的代码并尝试

```
protected void Page_Load(object sender, EventArgs e){
if(!IsPostBack)
{
   ListBoxDelete.Items.Clear();
   List<string> itens = new List<string>();
   for(var item in itens){
      ListBoxDelete.Items.Add(item);
   }
}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T13:26:20.180

`Page_Load`使用 if [IsPostBack](http://msdn.microsoft.com/en-in/library/system.web.ui.page.ispostback.aspx)更新您的

```
protected void Page_Load(object sender, EventArgs e){
 if (!IsPostBack)
    {
     ListBoxDelete.Items.Clear();
     List<string> itens = new List<string>();
      for(var item in itens){
       ListBoxDelete.Items.Add(item);
     }
  }
} 
```

# objective-c - Objective-C 使用属性及其存储位置。不同之处？

> ID：15310875
> 
> 赞同：0
> 
> 时间：2013-03-09T12:51:57.590
> 
> 标签：objective-c, properties

属性名称和属性存储位置有什么区别？我必须只使用属性名称或 mm 使用第一个或第二个有什么意义？这是我的例子：

```
@implementation Car
@synthesize carSpeed = _carSpeed;

-(void) someMethod:(double)speed
{
    self.carSpeed = speed; // this is the same am I right?
    _carSpeed = speed;

}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T13:01:37.653

当直接访问*实例变量*（存储位置）时，无法通知其他代码此更改并对此进行处理。使用属性（使用点语法）只不过是向设置器发送消息。

```
self.carSpeed = speed; 
```

完全一样

```
[self setCarSpeed: speed]; 
```

一旦这使自动 KVO 工作，该属性的观察者将被通知它已更改。

此外，由于这是一条常规消息发送，因此会发生常规消息发送。因此，您可以覆盖子类中的 setter 以更改其行为。或者，您可以更改 getter 和 setter 的实现，以使用其他类型的值存储而不是实例变量，而无需更改任何需要更改或读取该属性值的代码。

在我们拥有 ARC 之前，在任何地方都使用访问器的另一个重要原因是它们应该负责内存管理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T12:53:58.023

```
self.carSpeed = speed; 
```

这使用setter方法

然而，

```
_carSpeed = speed; 
```

通过创建的别名直接使用 ivar 或属性。

* * *

使用 。notation 使您可以从类外部访问它们，并且 setter 和 getter 位于公共区域。

而 _carSpeed 使它成为类的本地对象。而且这是一个古老的约定。

[带下划线前缀的综合属性和变量：这是什么意思？](https://stackoverflow.com/questions/6049269/synthesized-property-and-variable-with-underscore-prefix-what-does-this-mean)

# html - 没有 JavaScript 的 CSS3 和 HTML5 div 移动

> ID：15310876
> 
> 赞同：2
> 
> 时间：2013-03-09T12:51:58.010
> 
> 标签：html, css

我可以只使用 CSS3 和 HTML5 在没有 JavaScript 的页面中通过鼠标移动 div 或表格吗？

我已经这样做了，但是当悬停移动时 div 会自动移动。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T12:54:44.313

您需要 JavaScript 来执行此操作。虽然您可以在 CSS3 中编写动画、过渡等，它们确实为您的网页组件提供动画，但您无法像在 JavaScript 中那样处理点击和拖动等事情。

值得注意的是，HTML5*中确实*存在拖放功能，但不是我假设您想要实现的意义上的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T13:02:21.900

如此处所示：

[http://jsfiddle.net/yy2ak/](http://jsfiddle.net/yy2ak/)

您可以使用 移动 div `CSS3 translate and transition`。或者你可以使用`HTML5 draggable`. 但是，如果您想要更动态的东西，那么`JavaScript and jQuery`您可以选择。

为了实现这一点，`jQuery`你可以这样做：

```
<div id="box" style="width: 50px; height: 50px; background-color: red;" />

$("#box").mouseover(function() {
   var offset = $(this).offset().left + 20;
    $(this).animate({
       left: offset
    }, 1000);
}); 
```

# objective-c - 对块进行类型定义是如何工作的

> ID：15310880
> 
> 赞同：49
> 
> 时间：2013-03-09T12:52:28.450
> 
> 标签：objective-c, objective-c-blocks, typedef

在 C/Obj-C 中，我们执行这样的 typedef，`typedef int MYINT;`这很清楚。

为一个块做 typedef -`typedef void (^MyBlock) (int a);`

现在，我们可以使用`MyBlock`.

它不应该像 -`typedef void (^MyBlock) (int a) MyBlock;`类似于`#define`吗？

语法如何工作？

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2013-03-09T13:12:11.597

请参阅“块编程主题”中[的声明块引用：](http://developer.apple.com/library/ios/#documentation/cocoa/Conceptual/Blocks/Articles/bxDeclaringCreating.html#//apple_ref/doc/uid/TP40007502-CH4-SW3)

> 块变量保存对块的引用。您可以使用类似于声明指向函数的指针的语法来声明它们，不同之处在于您使用 ^ 而不是 *。

所以

```
 typedef void (^myBlock) (int a); 
```

使用与以下相同的语法定义块的类型

```
 typedef void (*myFunc) (int a); 
```

声明一个函数指针。

有关函数指针的更多信息，请参见[了解 C 中函数指针的 typedef 。](https://stackoverflow.com/questions/1591361/understanding-typedefs-for-function-pointers-in-c-examples-hints-and-tips-ple)

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2015-04-11T16:53:01.833

同样来自“块编程主题”，为块创建类型应该是这样的：

```
typedef returnType (^blockName)(argument1, argument2, ...) 
```

下面是一个非常简单的实际例子：

```
typedef float (^MyBlockType)(float, float);
MyBlockType AddTwoFloat = ^(float a, float b) {return a + b;};
MyBlockType MultiplyTwoFloat = ^(float a, float b) {return a * b;};
float c = AddTwoFloat(1, 2); //c = 3
float d = MultiplyTwoFloat(1, 2); //d = 2 
```

# matlab - Matlab：在 uipanel 中使用 surf

> ID：15310881
> 
> 赞同：0
> 
> 时间：2013-03-09T12:52:29.643
> 
> 标签：matlab, graph, figure, geometry-surface

我有一个包含 4 个可能的不同值的二维矩阵。我使用 surf 将其显示为像棋盘一样，效果很好。

现在我正在为我的项目构建一个 UI（没有 GUIDE），我正在尝试在我拥有的一个 uipanel（带有句柄）中为冲浪设置一个父级，我得到：

```
"An object of class surface, can not be a child of class figure" 
```

我怎样才能实现这样的事情？（或类似的东西）。哦，还有矩阵中 surf 的输入。

谢了，兄弟们

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-08T17:28:34.603

我已将项目上传到 git：

[https://github.com/guywald/allele_fixation](https://github.com/guywald/allele_fixation)

# php - 如何将大 CSV 文件导入 MySQL

> ID：15310883
> 
> 赞同：0
> 
> 时间：2013-03-09T12:52:38.393
> 
> 标签：php, mysql, yii

我的 Web 应用程序接收逗号分隔的电话列表，必须将其导入到联系人表中。该列表可以包含 100,000 到 1,000,000 个项目。我实现了存储过程。但它对我来说仍然太慢了。你能帮我改进一下吗？

```
DELIMITER $$

CREATE DEFINER=`root`@`localhost` PROCEDURE `import_phones`
(IN ContactGroupId int, IN strPhones mediumtext, OUT total int, OUT inserted int)
main: BEGIN
    declare delim varchar(1) default(',');
    declare delimPtr int unsigned default(0); -- pointer to current spliter position
    declare startPtr int unsigned default(1);
    declare phone1 nvarchar(20);

    set total = 0; -- counter of total rows
    set inserted = 0; -- counter of inserted rows

    if strPhones is null or length(strPhones) < 1 then 
        leave main;
    end if;

    drop table if exists insertphones;
    create temporary table insertphones(phone nvarchar(20))
        engine = memory;
/***
-- split strPhones by delimiter
*/
    SET delimPtr = locate(delim, strPhones,startPtr);
    loop_label: while(delimPtr > 0) do
        insert into insertphones (phone) values (substring(strPhones,startPtr,delimPtr-startPtr));
        -- select delimPtr,startPtr, substring(strPhones,startPtr,delimPtr-startPtr); 
        set startPtr = delimPtr+1;
        set delimPtr = locate(delim, strPhones,startPtr);
    end while;
    if delimPtr = 0 then
        insert into insertphones (phone) values (substring(strPhones,startPtr,delimPtr-startPtr));
    end if;

    -- select delimPtr,startPtr; 
    select count(*) from insertphones into total;
/***
--  insert phones 
*/

    insert into contacts (Phone, ContactGroupId)
        select distinct(phone), ContactGroupId from insertphones where 
        phone not in (select Phone from contacts where ContactGroupId = ContactGroupId);
    SELECT ROW_COUNT() into inserted ;
    -- select total, inserted;
END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T13:22:51.040

想一想`load data infile`，喜欢

```
load data infile 'filename' into tablename lines terminated by ',' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T08:53:22.547

行。该解决方案的工作速度比初始版本快得多（大约 10 倍至 20 倍）。

```
 $tempFile = tempnam(sys_get_temp_dir(), 'phones');
$tempTable = 'tmp'.$contactGroupId.time();
file_put_contents($tempFile, $phones);
try {
    chmod($tempFile, 0777); //required for MySQL import
    $sql = sprintf(
"set @total = 0;
set @inserted = 0;
drop table if exists %s;
create temporary table %s(phone nvarchar(20)) engine = memory;
LOAD DATA INFILE '%s' INTO TABLE %s FIELDS TERMINATED BY '' LINES TERMINATED BY ',';
SELECT count(*) FROM %s INTO @total;
DELETE FROM %s WHERE length(phone) < 10;
UPDATE %s SET phone = CONCAT('7',phone) WHERE length(phone) = 10;
UPDATE %s SET phone = INSERT(phone,1,1,'7') WHERE phone like '8%%' and length(phone) = 11;
insert into contacts (Phone, ContactGroupId) select distinct(phone), %d from %s where phone not in (select Phone from contacts where ContactGroupId = %d);
SELECT ROW_COUNT() into @inserted;"
    , $tempTable, $tempTable, str_replace('\\','\\\\',$tempFile), $tempTable, $tempTable, $tempTable, $tempTable, $tempTable, $contactGroupId, $tempTable, $contactGroupId );

$command = Yii::app()->db->createCommand($sql);
$command->execute();
$command = false;
$result = Yii::app()->db->createCommand("select @total as total, @inserted as inserted")->queryRow();
$contactCounter['all'] += $result['total'];
$contactCounter['created'] += $result['inserted']; 
```

# database - 更正 DB2 存储过程错误

> ID：15310884
> 
> 赞同：0
> 
> 时间：2013-03-09T12:52:58.320
> 
> 标签：database, stored-procedures, db2

我正在我的 DB2 数据库中创建一个存储过程，这是我的存储过程代码：

```
 CREATE OR REPLACE PROCEDURE PWDCHANGE (UNAME IN VARCHAR(32), 
                                           OLDPWD IN VARCHAR(32), 
                                           NEWPWD IN VARCHAR(32)) 
    AS
    BEGIN
      IF LOGINTABLE.USERNAME = UNAME AND LOGINTABLE.PASSWORD = OLDPWD THEN
      UPDATE LOGINTABLE SET PASSWORD = NEWPWD;
      DBMS_OUTPUT.PUT_LINE('Password Changed Successfully!');
      ELSE DBMS_OUTPUT.PUT_LINE('Incorrect Old Password Input');
    END IF;
    END; 
```

但是当我在我的 IBM Data Studio 中部署它时，它会显示一个错误，上面写着：

```
 Deploy SENJOBLADE.PWDCHANGE(VARCHAR(32), VARCHAR(32), VARCHAR(32))

    Running
    SENJOBLADE.PWDCHANGE - Deploy started.
    Create stored procedure returns SQLCODE: -104, SQLSTATE: 42601.
    SENJOBLADE.PWDCHANGE: 1: An unexpected token "VARCHAR" was found following "PWDCHANGE (UNAME IN".  Expected tokens may include:  ",".. SQLCODE=-104, SQLSTATE=42601, DRIVER=4.13.111
    An unexpected token "VARCHAR" was found following "PWDCHANGE (UNAME IN".  Expected tokens may include:  ",".. SQLCODE=-104, SQLSTATE=42601, DRIVER=4.13.111
    SENJOBLADE.PWDCHANGE - Deploy failed.
    SENJOBLADE.PWDCHANGE - Roll back completed successfully. 
```

我不知道为什么 VARCHAR 是一个意外令牌，我不知道要更改什么才能部署我的存储过程。这个存储过程的功能是接受 3 个用于更改密码的输入、一个用户名、一个当前密码和替换密码，这就是我有 3 个 IN 值的原因。

SENJOBLADE 是我的模式名称，LOGINTABLE 是表名，它有两列，USERNAME & PASSWORD 列

我尝试删除 VARCHAR 并显示此错误：

```
 Deploy SENJOBLADE.PWDCHANGE(IN, IN, IN)

    Running
    SENJOBLADE.PWDCHANGE - Deploy started.
    Create stored procedure returns SQLCODE: -104, SQLSTATE: 42601.
    SENJOBLADE.PWDCHANGE: 2: An unexpected token "BEGIN" was found following "PWD IN) 
            AS
    ".  Expected tokens may include:  ":".. SQLCODE=-104, SQLSTATE=42601, DRIVER=4.13.111

    An unexpected token "BEGIN" was found following "PWD IN) 
            AS
    ".  Expected tokens may include:  ":".. SQLCODE=-104, SQLSTATE=42601, DRIVER=4.13.111

    SENJOBLADE.PWDCHANGE - Deploy failed.
    SENJOBLADE.PWDCHANGE - Roll back completed successfully. 
```

请帮忙，我还在学习存储过程，所以我还不习惯。任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T12:58:49.510

尝试`Deploy SENJOBLADE.PWDCHANGE(UNAME, OLDPWD, NEWPWD)`

# c# - 如何解析本地CSV文件wp7

> ID：15310885
> 
> 赞同：1
> 
> 时间：2013-03-09T12:52:59.243
> 
> 标签：c#, windows-phone-7, csv

我正在开发一个 wp7 应用程序，我需要读取 CSV 文件并存储到列表中

csv 文件有 20 行，名字，姓氏由 ,（逗号）分隔

我尝试使用[http://kbcsv.codeplex.com/](http://kbcsv.codeplex.com/)这个和[http://www.codeproject.com/articles/25133/linq-to-csv-library](http://www.codeproject.com/articles/25133/linq-to-csv-library)当我试图包含这些 dll 时，我得到了**“windows phone项目仅适用于 Windows Phone 程序集”错误**

我如何在 Windows Phone 7 中解析 csv 文件

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T08:52:26.003

使用 IsolatedStorageFileStream 从保存的路径位置获取并打开文件。然后用 StreamReader 对象读取。

```
 IsolatedStorageFileStream fileStream = storage.OpenFile(filePath, FileMode.Open, FileAccess.Read);
    using (StreamReader reader = new StreamReader(fileStream))
    {
      string line;
      while ((line = reader.ReadLine()) != null)
      {
        string[] temp1Arr = line.Split(',');

        //Manipulate your string values stored in array here 
      }
    } 
```

希望能帮助到你！

# jakarta-mail - 文件名中的 JavaMail 和非 ASCII 字符

> ID：15310887
> 
> 赞同：7
> 
> 时间：2013-03-09T12:53:25.850
> 
> 标签：jakarta-mail

我可以在 JavaMail 中发送具有非 ascii 文件名的附件，但我无法下载它们。我专门为那些文件名包含非 ascii 字符的附件获取 java.io.FileNotFoundException。

仅供参考：我正在使用类似`messageBodyPart.setFileName(MimeUtility.encodeText(filename[i]))` 编码文本和`MimeUtility.decodeText(bodyPart.getFileName())`解码非 ascii 文件名的东西

有解决方法吗？

**编辑** @Bill，这是我读取附件的代码的一部分。我还在我的代码中添加了 properties.setProperty("mail.mime.decodeparameters", "true") 和 properties.setProperty("mail.mime.decodefilename", "true") 属性。

```
if (message[a].getContent() instanceof MimeMultipart) {
                Multipart multipart = (Multipart) message[a].getContent();
                for (int i = 0; i < multipart.getCount(); i++) {
                    bodyPart = multipart.getBodyPart(i);                     
                    disposition = bodyPart.getDisposition();                    
                    if (disposition != null && (disposition.equals(BodyPart.ATTACHMENT) || (disposition.equals(BodyPart.INLINE)))) {
                        DataHandler handler = bodyPart.getDataHandler(); 
                        String path = bodyPart.getFileName();
                        String[] str = path.split("/");                         
                        String fileName = str[str.length - 1];                       

                        String filePath = ReadConfigPropertiesFile.getPropertyValue("server.buildpath");
                        System.out.println(fileName);
                        File tempDir = new File(filePath + user);
                        if (!tempDir.exists()) {
                            tempDir.mkdir();
                        }
                        File saveFile = new File(tempDir + "/" + fileName);
                        int count = 0;
                        while (saveFile.exists()) {
                          count++;
                          saveFile = new File(tempDir + "/" + count + "_" + fileName);
                        } 

                        BufferedOutputStream bos = new BufferedOutputStream(new FileOutputStream(saveFile));
                        byte[] buff = new byte[2048];
                        InputStream is = bodyPart.getInputStream();
                        int ret = 0;
                        while ((ret = is.read(buff)) > 0) {
                            bos.write(buff, 0, ret);
                        }
                        bos.close();
                        is.close();
                        //System.out.println(bodyPart.getContentType());

                    }else {
                        //display body (message) of the attachment;
                        //System.out.println(bodyPart.getContent().toString());

                   }
           }
     } 
```

上面的代码在 line 处引发 FileNotFoundException 异常，`BufferedOutputStream bos = new BufferedOutputStream(new FileOutputStream(saveFile))`并且对于文件名是非 ascii 字符的附件（类似于 ሰላም.pdf）会引发此异常。其他一切都很好。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-02-14T14:23:24.433

这个答案取自@semytech (OP) 的评论。在那里很难找到它，所以我将它添加为更多可见性的答案。它帮助我使用希伯来文文件名。

```
MimeBodyPart attachment = new MimeBodyPart();
attachment.setFileName(MimeUtility.encodeText(filename, "UTF-8", null)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T18:48:29.057

您永远不需要自己进行编码或解码。

您可以设置两组属性来告诉 JavaMail 为您进行编码/解码：

*   mail.mime.encodefilename/mail.mime.decodefilename
*   mail.mime.encodeparameters/mail.mime.decodeparameters

有关详细信息，请参阅[javax.mail.internet](https://javaee.github.io/javamail/docs/api/javax/mail/internet/package-summary.html#package.description)包的 javadocs。

第一组使用非标准编码技术，类似于您自己所做的。这适用于一些使用这种技术的旧邮件。

第二组使用 MIME 标准编码技术。此版本适用于大多数现代邮件。

这些都不能解释为什么你会得到 FileNotFoundException，但是你没有提供足够的细节来知道当你得到异常时你在做什么。

# css - 检查硬件加速可用性？（可测试）

> ID：15310894
> 
> 赞同：4
> 
> 时间：2013-03-09T12:53:58.817
> 
> 标签：css, hardware-acceleration, webkit-transform, webkit-perspective

我编写了使用 -webkit-transform、-webkit-perspective 和几个类似的 CSS。我的设计在可以使用硬件加速但实际上无法使用的机器上看起来很像蜜蜂。如何检查硬件加速可用性并提供备用 CSS？

旁注：运行 chrome://gpu-internals/ 以手动检查可用性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T00:24:35.620

可悲的是，答案似乎是“你不能（还）”。

Modernizr 项目在其“不可检测”中列出了硬件加速：[https](https://github.com/Modernizr/Modernizr/wiki/Undetectables) ://github.com/Modernizr/Modernizr/wiki/Undetectables 。

部分问题似乎是在页面上呈现任何内容时，会根据具体情况使用硬件加速。因此，即使浏览器理论上可能支持硬件加速，它是否会用于任何给定的操作（翻译、过渡、重绘等）也不会提前知道。

您可以想象一个检测方案，它使用分析来检测有/没有硬件加速的性能变化——但是使用硬件加速的事情发生在页面视图之外的层中。例如，即使您可以可靠地启用/禁用硬件加速，您也无法检测过渡的帧速率。

webkit 渲染 API 看起来像是可以使用此信息的地方，但它看起来无法通过页面级 Javascript 访问（即使 DOM 中的节点附加了 RenderObjects）：[https://www.webkit。 org/blog/114/webcore-rendering-i-the-basics/](https://www.webkit.org/blog/114/webcore-rendering-i-the-basics/)

看起来唯一可行的选择是用户代理嗅探已知加速浏览器列表（恶心）。

# c++ - 运算符重载 ( = )

> ID：15310895
> 
> 赞同：1
> 
> 时间：2013-03-09T12:54:04.763
> 
> 标签：c++, overloading

我只是 C++ 语言的初学者，我对这段代码有一些疑问。我试图重载一些运算符。

```
string& operator = (char R) { string T = R ; *this = T; return *this; } 
```

**第一个问题：**为什么我需要重载等于运算符而构造函数可以完成这项工作？
**第二个问题：（**不相关）是什么`(char R)`意思？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T12:56:34.943

> **第一个问题**：为什么我需要重载等于运算符而构造函数可以完成这项工作？

构造函数旨在“构造”一个​​对象......虽然有一种称为复制构造函数的东西，但它并不是为了将一个已经存在的对象实际复制到另一个已经存在的相同（或可转换）类型的对象......这就是`operator=`. 此外，您不是“重载”该`operator=`方法，而是创建要使用的方法的用户定义版本，而不是对象类型的默认编译器创建的方法，这将简单地暴力复制内存占用的位一个对象到另一个对象...如果您的对象正在管理它自己的指针等，那么这种暴力复制可能是一件非常糟糕的事情，因为指针所有权变得不明确等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T12:57:47.203

`(char R)`是运算符的右侧参数（此处`=`）

你想这样做，这样你就可以在初始化*后设置一个值*

```
//constructor
Foo a('f')
//copy constructor
Foo b = Foo('p');
// operator=
b = 'g'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T12:57:57.470

`(char R)`是运算符的参数，就像您有一个普通函数的参数一样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-10T15:40:58.947

C++ 中的运算符重载。这里最好的版本之一。

[http://msumca2012.blogspot.in/2013/03/oop-41-operator-overloading-in-c.html](http://msumca2012.blogspot.in/2013/03/oop-41-operator-overloading-in-c.html)

# python - Python 3.x - 数据注释验证等效项

> ID：15310896
> 
> 赞同：1
> 
> 时间：2013-03-09T12:54:23.290
> 
> 标签：python, python-3.x, decorator, assertions

我正在尝试确定一种方法来实现与 Python 中来自 .NET 的数据注释验证相同的概念。这将类似于以下内容：

```
class MyClass:
    @Property
    def Message(self):
        return self._message

    @Message.setter
    @MaxValue(233)
    def Message(self, value):
        self._message = value 
```

我尝试了不同的方法，但没有成功。我想访问“值”参数，以便对其应用特定验证。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T13:14:21.117

这对你有帮助吗？

这样，您可以使用附加参数制作 python 注释

```
def MaxValue(maxValue):
    def wrapFunction(function):
        def replacedMaxValueFunction(self, value):
            assert value <= maxValue
            return function(self, value)
        replacedMaxValueFunction.__name__ = function.__name__
        return replacedMaxValueFunction
    return wrapFunction 
```

所以现在你可以这样做了：我不知道它是否符合 C#，但希望它能完成你想要的检查。

```
>>> @MaxValue(123)
def f(self, value):
    print(value)
>>> f(1, 123)
123
>>> f(1, 124)
Traceback (most recent call last):
  File "<pyshell#9>", line 1, in <module>
    f(1, 124)
  File "<pyshell#1>", line 4, in replacedMaxValueFunction
    assert value <= maxValue
AssertionError 
```

# android - Android webview 相对滚动

> ID：15310905
> 
> 赞同：0
> 
> 时间：2013-03-09T12:55:09.543
> 
> 标签：android, webview

我需要能够缩放到 webview 上的相对位置 `webview.scrollTo(1500, 2000);`我需要像这样使用它，`webview.scrollTo(0.75, 0.5);`这意味着移动到 x 轴的 75% 和 y 轴的 50%

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T14:05:53.060

这是滚动到 webView 的底部（总像素 - webView 高度）：

```
webView.scrollTo(0, (int) ((webView.getScale() * webView.getContentHeight())-webView.getHeight())); 
```

您可以将其乘以所需的百分比：

```
webView.scrollTo(0, (int) 0.5*((webView.getScale() * webView.getContentHeight())-webView.getHeight())); 
```

对 x 轴使用相同的逻辑。

# delphi - 如何在delphi firemonkey2中获取已删除文件夹的文件路径

> ID：15310913
> 
> 赞同：1
> 
> 时间：2013-03-09T12:55:55.863
> 
> 标签：delphi, firemonkey

嗨，正如标题所说，我想知道我应该使用什么代码以及如何设置我的程序，以便当我将文件拖到面板或主窗体上时，它会给我该文件夹的文件路径。

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T18:20:14.923

就这么简单：

*   在主窗体上放置一个 TDropTarget 组件。
*   设置过滤器属性。用 * 代替*.* 如果您希望它接受文件夹和文件。
*   在 OnDropped 事件中，完全限定文件和/或文件夹名称的列表位于 Data.Files 中。你应该能够从那里得到你需要的一切。

这是您要完成的任务，还是您有其他想法？

**更新：**

根据要求，添加了一个示例，该示例显示了已删除的第一个文件的名称。

```
procedure TForm1.DropTarget1Dropped(Sender: TObject; const Data: TDragObject;
  const Point: TPointF);
begin
  ShowMessage(Data.Files[0]);
end; 
```

# javascript - JavaScript - 检查字符串是否以

> ID：15310917
> 
> 赞同：4
> 
> 时间：2013-03-09T12:56:18.970
> 
> 标签：javascript

我正在尝试检查字符串是否以字符开头：/

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-09T12:57:37.937

```
if(someString.indexOf('/') === 0) {
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-09T12:57:30.590

字符串的字符可以通过下标操作符访问`[]`。

```
if (string[0] == '/') {

} 
```

`[0]`表示字符串中的第一个字符，因为索引在 JS 中是从 0 开始的。以上也可以用正则表达式来完成。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-09T13:10:07.787

替代`String.indexOf`：`/^\//.test(yourString)`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-09T13:01:35.777

```
data.substring(0, input.length) === input 
```

请参阅以下示例代码

```
var data = "/hello";
var input = "/";
if(data.substring(0, input.length) === input)
    alert("slash found");
else 
    alert("slash not found"); 
```

[小提琴](http://jsfiddle.net/umairsaleemid/kXY97/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-09T13:00:11.483

```
<script>
   function checkvalidate( CheckString ) {
      if ( CheckString.indexOf("/") == 0 ) 
        alert ("this string has a /!");
   }
</script>

<input type="text" id="textinput" value="" />
<input type="button" onclick="checkvalidate( document.getElementById('textinput').value );" value="Checkme" /> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-09T13:00:41.803

```
var str = "abcd";

if (str.charAt(0) === '/') 
```

# java - Spring Application中的Hibernate DAO：Session对象永远不会自动关闭，为什么？

> ID：15310918
> 
> 赞同：0
> 
> 时间：2013-03-09T12:56:19.117
> 
> 标签：java, spring, hibernate, spring-mvc

我是 Spring 世界的新手，我使用 Hibernate 开发了一个简单的 DAO，它在数据库中的表上执行 CRUD 操作。

在这里阅读：[http](http://www.tutorialspoint.com/hibernate/hibernate_sessions.htm) ://www.tutorialspoint.com/hibernate/hibernate_sessions.htm我可以读到：

> Session 对象是轻量级的，设计为在每次需要与数据库交互时实例化。会话对象不应长时间保持打开状态，因为它们通常不是线程安全的，应根据需要创建和销毁它们。

在线阅读我了解到，当调用@Transactional 方法和关闭它时，Spring 会分别自动打开和关闭 Session 对象连接，我不需要像这里那样手动处理这件事：[http://www. tutorialspoint.com/hibernate/hibernate_examples.htm](http://www.tutorialspoint.com/hibernate/hibernate_examples.htm)（当我进入 CRUD 方法时打开会话并在退出之前关闭它）

我的 DAO 似乎运行良好（在数据库上正确执行所有定义的 CRUD 操作）但似乎会话从未关闭。当我进入第一个调用的 CRUD 方法时它会自动打开，但退出时似乎不会关闭它

我使用了以下架构：我有一个名为**PersonDAO的****接口**，在其中我声明了我希望在我的表上使用的 CRUD 方法，然后我使用一个名为**PersonDAOImpl2**的具体类来实现这个接口，该类实现了 Hibernate 声明的方法。

 ****这是我的**PersonDAOImpl2**类代码：

```
package org.andrea.myexample.HibernateOnSpring.dao;

import java.util.List;

import org.andrea.myexample.HibernateOnSpring.entity.Person;
import org.hibernate.Criteria;
import org.hibernate.SessionFactory;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Repository;
import org.springframework.transaction.annotation.Transactional;

@Repository
@Transactional
public class PersonDAOImpl2 implements PersonDAO {

    // Factory per la creazione delle sessioni di Hibernate:

    private SessionFactory sessionFactory;

        // Metodo Setter per l'iniezione della dipendenza della SessionFactory:

        public void setSessionFactory(SessionFactory sessionFactory) {
            this.sessionFactory = sessionFactory;
            System.out.println("Ho iniettato la SessionFactory: " + sessionFactory);

        }

        public String getConnectionStatus(){

            return " Aperta: " + sessionFactory.getCurrentSession().isOpen() + " Connessa: " + sessionFactory.getCurrentSession().isConnected();
        }

        /** CREATE CRUD Operation:
         * Aggiunge un nuovo record rappresentato nella tabella rappresentato
         * da un oggetto Person
         */
        @Transactional(readOnly = false)
        public Integer addPerson(Person p) {

            System.out.println("Inside addPerson()");
            System.out.println("Connessione aperta: " + sessionFactory.getCurrentSession().isOpen());
            System.out.println("E' connesa:" + sessionFactory.getCurrentSession().isConnected());

            Integer personID = personID = (Integer) sessionFactory.getCurrentSession().save(p);

            return personID;

        }

        // READ CRUD Operation (legge un singolo record avente uno specifico id):
        @Transactional
        public Person getById(int id) {

            Person retrievedPerson = null;

            System.out.println("Inside getById()");

            System.out.println("Inside addPerson()");
            System.out.println("Connessione aperta: " + sessionFactory.getCurrentSession().isOpen());
            System.out.println("E' connesa:" + sessionFactory.getCurrentSession().isConnected());

            retrievedPerson = (Person) sessionFactory.getCurrentSession().get(Person.class, id);

            return retrievedPerson;

        }

        // READ CRUD Operation (recupera la lista di tutti i record nella tabella):
        @SuppressWarnings("unchecked")
        @Transactional
        public List<Person> getPersonsList() {

            System.out.println("Inside getPersonsList()");
            List<Person> personList = null;

            Criteria criteria = sessionFactory.getCurrentSession().createCriteria(Person.class);
            personList = criteria.list();

            return personList;
        }

        // DELETE CRUD Operation (elimina un singolo record avente uno specifico id):
        @Transactional
        public void delete(int id) {
            System.out.println("Inside delete()");

            Person personToDelete = getById(id);
            sessionFactory.getCurrentSession().delete(personToDelete);
        }

        // UPDATE CRUD OPERATION (aggiorna un determinato record rappresentato da un oggetto)
        @Transactional
        public void update(Person personToUpdate) {

            System.out.println("Inside update()");

            sessionFactory.getCurrentSession().update(personToUpdate);
        }

} 
```

如您所见，我注入了 SessionFactory 对象的依赖项，该对象用于创建用于与数据库交互的 Session 对象、所有 CRUD 方法和一个名为**getConnectionStatus()**的方法，它只返回连接的状态（如果连接仍然保持打开和连接）

为了测试我的 DAO，我实现了一个包含 main() 方法的**MainApp**类，并在其中测试了我的所有 CRUD 操作，这个：

```
package org.andrea.myexample.HibernateOnSpring;

import java.util.List;
import java.util.Iterator;

import org.andrea.myexample.HibernateOnSpring.dao.PersonDAO;
import org.andrea.myexample.HibernateOnSpring.entity.Person;
import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;

public class MainApp {

    public static void main(String[] args) {

        ApplicationContext context = new ClassPathXmlApplicationContext(
                "Beans.xml");
        System.out.println("Contesto recuperato: " + context);

        Person persona1 = new Person();

        persona1.setFirstname("Pippo");
        persona1.setLastname("Blabla");

        System.out.println("Creato persona1: " + persona1);

        PersonDAO dao = (PersonDAO) context.getBean("personDAOImpl2");

        System.out.println("Creato dao object: " + dao);

        dao.addPerson(persona1);

        System.out.println("persona1 salvata nel database");
        System.out.println("persona1 ha id: " + persona1.getPid());

        System.out.println("Recupero l'oggetto Person avente id: "
                + persona1.getPid());

        Person personRetrieved = dao.getById(persona1.getPid());

        System.out.println("nome: " + personRetrieved.getFirstname());
        System.out.println("cognome: " + personRetrieved.getLastname());
        System.out.println("ID: " + personRetrieved.getPid());

        System.out.println("Aggiungo altri 2 record nella tabella: ");

        Person persona2 = new Person();
        Person persona3 = new Person();

        persona2.setFirstname("Mario");
        persona2.setLastname("Rossi");
        persona3.setFirstname("Paolino");
        persona3.setLastname("Paperino");

        dao.addPerson(persona2);
        dao.addPerson(persona3);

        List<Person> listaPersone = dao.getPersonsList();

        for (Iterator iterator = listaPersone.iterator(); iterator.hasNext();) {
            Person persona = (Person) iterator.next();
            System.out.print("Nome: " + persona.getFirstname());
            System.out.print(" Cognome: " + persona.getLastname());
            System.out.println("  ID: " + persona.getPid());
        }

        System.out.println("Elimina il primo record dalla tabella");

        Person firstPerson = listaPersone.get(0);
        System.out.println("Persona da eliminare: " + firstPerson);

        dao.delete(firstPerson.getPid());

        listaPersone = dao.getPersonsList();

        for (Iterator iterator = listaPersone.iterator(); iterator.hasNext();) {
            Person persona = (Person) iterator.next();
            System.out.print("Nome: " + persona.getFirstname());
            System.out.print(" Cognome: " + persona.getLastname());
            System.out.println("  ID: " + persona.getPid());
        }

        System.out.println("Aggiorna il primo record della tabella:");

        firstPerson = listaPersone.get(0);

        System.out.println("Persona da aggiornare: " + firstPerson);
        System.out.print("Nome: " + firstPerson.getFirstname());
        System.out.print(" Cognome: " + firstPerson.getLastname());
        System.out.println("  ID: " + firstPerson.getPid());

        System.out.println("CAMBIO DEI DATI:");

        firstPerson.setFirstname("Gatto");
        firstPerson.setLastname("Silvestro");

        System.out.println("Nuovi dati: " + firstPerson);
        System.out.print("Nome: " + firstPerson.getFirstname());
        System.out.print(" Cognome: " + firstPerson.getLastname());
        System.out.println("  ID: " + firstPerson.getPid());

        System.out.println("UPDATING !!!");

        dao.update(firstPerson);

        listaPersone = dao.getPersonsList();

        for (Iterator iterator = listaPersone.iterator(); iterator.hasNext();) {
            Person persona = (Person) iterator.next();
            System.out.print("Nome: " + persona.getFirstname());
            System.out.print(" Cognome: " + persona.getLastname());
            System.out.println("  ID: " + persona.getPid());
        }

        System.out.println(dao.getConnectionStatus()); 

    }

} 
```

这是我的 XML 配置文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns:tx="http://www.springframework.org/schema/tx" 
    xsi:schemaLocation="http://www.springframework.org/schema/beans 
        http://www.springframework.org/schema/beans/spring-beans-3.1.xsd        
        http://www.springframework.org/schema/tx 
        http://www.springframework.org/schema/tx/spring-tx-3.1.xsd ">

    <bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource">
        <property name="driverClassName" value="com.mysql.jdbc.Driver" />
        <property name="url" value="jdbc:mysql://localhost:3306/SpringTestDb" />
        <property name="username" value="root" />
        <property name="password" value="aprile12" />
        <property name="initialSize" value="2" />
        <property name="maxActive" value="5" />
    </bean>

    <bean id="sessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
        <property name="dataSource" ref="dataSource" />
        <property name="packagesToScan" value="org.andrea.myexample.HibernateOnSpring.entity" />
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">org.hibernate.dialect.MySQLDialect</prop>
                <prop key="hibernate.hbm2ddl.auto">update</prop>
                <prop key="hibernate.show_sql">false</prop>
            </props>
        </property>
    </bean>

    <bean id="transactionManager" class="org.springframework.orm.hibernate4.HibernateTransactionManager">
        <property name="sessionFactory" ref="sessionFactory" />
    </bean>

    <tx:annotation-driven transaction-manager="transactionManager"/>

    <bean id="personDAOImpl2" class="org.andrea.myexample.HibernateOnSpring.dao.PersonDAOImpl2" >
        <property name="sessionFactory" ref="sessionFactory" />
    </bean>

    <!-- Register @Autowired annotation -->
    <bean class="org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor" />
</beans> 
```

我的 DAO 似乎运行良好（在数据库上正确执行所有定义的 CRUD 操作）但似乎会话从未关闭。当我进入第一个调用的 CRUD 方法时它会自动打开，但退出它时似乎不会关闭它（我已经在 main() 方法的末尾使用对**getConnectionStatus()**的调用对其进行了测试），我很困惑关于它...

所以我问你：

1) 为什么 Session 没有自动关闭？像我在第一篇 Hibernate 文章中读到的那样糟糕吗？有相同的会话仍然保持打开状态？

2）使用这种架构（接口及其实现）如何在退出CRUD方法时自动关闭会话？

肿瘤坏死因子

安德烈亚

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T13:44:00.893

如果我理解正确，您正在调用您的 DAO `getConnectionStatus()`，它返回会话已打开。

这很正常，因为这个方法就像你的 DAO 的其他方法一样：Spring 拦截对该方法的调用，打开一个会话，执行该方法，因此，在方法内部，你会得到一个打开的当前会话。

请注意，虽然方法上没有 @Transactional 注释，但它是事务性的，因为您还在`@Transactional`类本身上放置了注释，使其所有方法都具有事务性。****

# java - 如何使用 UriInfo 测试 JERSEY 控制器方法

> ID：15310919
> 
> 赞同：5
> 
> 时间：2013-03-09T12:56:20.763
> 
> 标签：java, unit-testing, jakarta-ee, jersey

我正在为 JERSEY 项目编写单元测试。

对于没有查询字符串的方法，我可以实例化控制器并调用该方法。

也适用于路径中的参数，因为它们显示为方法的字符串参数。

但是当我得到 queryStrings 模式有一个特殊的参数`(@Context UriInfo url)`

如何在单元测试中构建 UriInfo 参数？为什么这个类没有构造函数？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-01-23T19:36:49.900

如果您在测试中使用 Mockito，则可以模拟出 UriInfo：

```
import java.net.URI;
import javax.ws.rs.core.UriInfo;

UriInfo mockUriInfo = mock(UriInfo.class);
when(mockUriInfo.getRequestUri()).thenReturn(new URI("http://www.test.com/go")); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-17T08:59:42.020

`UriInfo`是一个接口，所以你不能直接创建它的对象。您需要对其进行子类化并创建自己的`UriInfo`类。因此，您的 uriinfo 类应将 String uri/url 转换为 UriInfo 对象。

```
public class UriInformation implements UriInfo {
    MultivaluedMap<String, String> pathParamMap;
    MultivaluedMap<String, String> queryParamMap;
    public UriInformation(UriInfo uriInfo) {
        //parse uriInfo 
    }
 //setters/getters
} 
```

因此，您可以通过这种方式对资源进行单元测试，而无需在 tomcat/server 中运行它。

# visual-studio-2010 - VS 2012 解决方案和项目 - 与 VS 2010 不兼容？

> ID：15310924
> 
> 赞同：5
> 
> 时间：2013-03-09T12:56:57.403
> 
> 标签：visual-studio-2010, visual-studio-2012, compatibility

我假设在 VS 2012 中创建的解决方案和/或 C# 项目也可以在 VS 2010 中打开（应用了 SP1）。

但我无法这样做 - VS 2010 不想加载解决方案文件，在我手动“调整”它之后，现在它抱怨`*.csproj`项目文件与当前版本的 VS 2010*不兼容*...... ..

我错过了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-10-17T18:24:49.953

您可以通过以下方式修复它，

1-更改`12.00`为`11.00`

2-`*.csproj`通过文本编辑器打开文件并更改此行

```
<TargetFrameworkVersion>v4.5</TargetFrameworkVersion> 
```

到

```
<TargetFrameworkVersion>v4.0</TargetFrameworkVersion> 
```

项目将在 VS 2010 重启后打开

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-09T13:21:21.993

如果您在解决方案文件的顶部使用 Visual Studio 2012 创建解决方案，则有以下两行：

```
Microsoft Visual Studio Solution File, Format Version 12.00
# Visual Studio 2012 
```

您可以将版本 12 替换为 11。而且该解决方案应该在 Visual Studio 2010 中工作。我不确定 Visual Studio 2010 是否可以处理具有目标 .net-framework 4.5 的项目文件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-11T17:07:35.033

删除：

```
<AppContainerApplication>true</AppContainerApplication> 
```

标签下：

```
<PropertyGroup Label="Globals"> 
```

为我解决了。虽然这很有趣，但在另一台 PC（Win10 而不是 7）上它可以工作，包括这条线。

# vba - Dim srt as sort in VBA - 编译错误

> ID：15310928
> 
> 赞同：0
> 
> 时间：2013-03-09T12:57:23.180
> 
> 标签：vba, excel

我是vba的新手。我遇到了[这些](http://msdn.microsoft.com/en-US/office/hh360994)很好的例子，我认为我可以从中学到一些东西。它在他们的 excel vba 官方网站上，但是当我测试[这个时](http://code.msdn.microsoft.com/Excel-2010-Sort-Data-196a8f1b)代码时，它给了我编译错误：模块不是有效类型。它发生在这行代码上：

```
 Dim srt As Sort 
```

我是否遗漏了什么，或者他们输入了错误的代码。

感谢您提供任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T13:04:47.893

代码描述说明代码必须输入到类模块中，而不是常规模块中。这可能是错误消息的来源。您可以通过选择 VBE 编辑器功能区上的插入命令中的第 4 个选项来插入类模块。

# java - 使用正则表达式解析文本文件

> ID：15310929
> 
> 赞同：0
> 
> 时间：2013-03-09T12:57:28.680
> 
> 标签：java, regex, perl

我正在尝试使用正则表达式通过提取某些文本来解析文件。标准包不支持我需要使用的正则表达式`java.util.regex`（因为我需要匹配嵌套结构，例如嵌套`{}`括号和其他类似的东西），所以我决定尝试一下[`JRegex`](http://jregex.sourceforge.net)，它声称可以完全处理 Perl 5.6 正则表达式语法。但是，当我尝试将此包与递归正则表达式一起使用以匹配嵌套`{}`括号时遇到了问题：

```
Pattern p = new Pattern("(\\{(?:(?1)*|[^{}]*)+\\}|\\w+)");  // jregex.Pattern 
```

```
线程“主”jregex.PatternSyntaxException 中的异常：“（？”之后的错误字符：1

```

然而，类似的正则表达式`/(\{(?:(?1)*|[^{}]+)+\}|\w+)/sg`在 Perl 中按预期工作。所以，我的下一个想法是找到一种方法来在*Perl*中解析文件，然后将结果传递给*Java*（最好以字符串数组或类似的形式），我的**问题**是：最好的方法是什么在这种情况下？或者，我忽略了另一种更简单的选择吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T16:50:15.630

JRegex 似乎不支持递归匹配，所以我建议您只使用`java.util.regex`并设置嵌套级别数的限制。

例如，要允许多达 50 层嵌套，每层都有“无限”数量的括号对（最深的除外），您可以使用

```
// Set the maximum number of nested levels required.
int max = 50;
String regex = "(?R)";

while (--max > 0) {
    regex = regex.replace("(?R)", "(?>\\{(?:[^{}]*+|(?R))+\\})");
}

// Ensure no (?R) in the final and deepest replacement.
regex = regex.replace("(?R)", "\\{[^{}]*+\\}") + "|\\w+";

String str = " {{}{}} {abc} {{de}{fg}} hij {1{2{3{4{5{6{7{8{9{10{11{12{13{14{15{16{17{18{19{20{21{22{23{24{25{26{27{28{29{30{31{32{33{34{35{36{37{38{39{40{41{42{43{44{45{46{47{48{49{50}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}} {end}";
Matcher m = Pattern.compile(regex).matcher(str);

while (m.find()) {
    System.out.println(m.group());
}

/*
 {{}{}}
 {abc}
 {{de}{fg}}
 hij
 {1{2{3{4{5{6{7{8{9{10{11{12{13{14{15{16{17{18{19{20{21{22{23{24{25{26{27{28{29{30{31{32{33{34{35{36{37{38{39{40{41{42{43{44{45{46{47{48{49{50}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}
 {end}
*/ 
```

以上构建了一个正则表达式，如果支持递归匹配，则可以使用它`(?>\\{(?:[^{}]*+|(?R))+\\})`并反复替换`(?R)`整个模式。

因为在创建的表达式中有很多嵌套的量词，原子分组`(?>)`和所有格量词`+`用于限制回溯并确保正则表达式在找不到匹配项时快速失败。尽管正则表达式可能很长，但它会很有效。

如果您不想或无法对嵌套设置限制，或者担心冗长的正则表达式的想法，您可以通过简单地遍历文件文本并跟踪打开和关闭括号的数量来解析嵌套括号， 例如

```
List<String> list = new ArrayList<String>();
int strLen = str.length();

for (int i = 0; i < strLen; i++) {
    char c = str.charAt(i);

    if (c == '{') {
        int b = 1;
        StringBuilder sb = new StringBuilder("{");

        while (b > 0 && i < strLen - 1) {
            sb.append( c = str.charAt(++i) );

            if (c == '}') b--;
            else if (c == '{') b++;
        }
        list.add(sb.toString());
    }
}

for (String s : list) { System.out.println(s); } 
```

这似乎比与 Perl 交互的麻烦要少得多，但是请参阅诸如[How should I call a Perl Script in Java?之类的答案。](https://stackoverflow.com/questions/603554/how-should-i-call-a-perl-script-in-java?rq=1)如果那是你想要做的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T13:02:40.013

最好的方法是标记输入并通过标记流将其发送到您的解析器，然后根据您的需要自上而下/自下而上地解析它。正则表达式并不总是有助于解析嵌套结构。

* * *

> JLex 实用程序基于 Lex 词法分析器生成器模型。JLex 采用类似于 Lex 接受的规范文件，然后为相应的词法分析器创建 Java 源文件。

看看[JLex](http://cs.princeton.edu/~appel/modern/java/JLex)，因为它可以帮助您用非常简单的代码为您的案例生成词法分析器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T13:01:08.050

正则表达式不能真正处理嵌套分隔符。我过去曾通过使用正则表达式来查找分隔符，然后使用简单的有限状态机来解析结果数组来解决这个问题。

# c - 无法使用 ALSA 编译

> ID：15310934
> 
> 赞同：3
> 
> 时间：2013-03-09T12:57:37.953
> 
> 标签：c, linker, alsa, portaudio

我正在尝试在使用 PortAudio 接口的 Debian GNU/Linux 上创建一个 C 应用程序。为此，我必须使用`gcc -lrt -lasound -ljack -lpthread -o YOUR_BINARY main.c libportaudio.a`此[文档编译我的程序。](http://portaudio.com/docs/v19-doxydocs/compile_linux.html)

为此我安装了`libasound2-dev`，我检查了文件在哪里使用`apt-file search libasound.so`，这是输出：

```
lib32asound2: /usr/lib32/libasound.so.2
lib32asound2: /usr/lib32/libasound.so.2.0.0
lib32asound2-dev: /usr/lib32/libasound.so
libasound2: /usr/lib/x86_64-linux-gnu/libasound.so.2
libasound2: /usr/lib/x86_64-linux-gnu/libasound.so.2.0.0
libasound2-dev: /usr/lib/x86_64-linux-gnu/libasound.so 
```

所以应该正确安装libasound，但是当我用这个makefile编译我的程序时：

```
DMXTest: main.c libdmx.a
    gcc -static -Wall main.c -L. -ldmx -lusb -lrt -lasound -ljack -lfftw3 -g -o main libportaudio.a 
```

我收到以下错误：`/usr/bin/ld: cannot find -lasound`。

如何正确链接此库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-14T18:57:09.767

To compile my code i used the following command

```
gcc -o rec_mic rec_mic.c -lasound 
```

and it works perfectly, without create my own static library.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-09T13:23:29.923

您没有`libasound.a`for `-static`，您将需要它，或者您几乎可以肯定只是`-static`从`Makefile`（可能在`LDFLAGS`or `CFLAGS`）中删除。

有一个相关的 Debian 错误[522544](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=522544)和一个相关的 Ubuntu 错误[#993959](https://bugs.launchpad.net/ubuntu/+source/alsa-lib/+bug/993959)。

您可能可以从源代码构建自己的 libasound，尽管它还使用其他库（特别是`libpthread.so`和`librt.so`） ，`libdl.so`我怀疑它可能会在您静态构建时删除一些功能，尽管它`./configure --enable-static`在构建时受支持（或 try `--enable-shared=no --enable-static=yes`）。

FWIW，glibc 维护者“[不鼓励](http://www.akkadia.org/drepper/no_static_linking.html)”使用静态二进制文件，尽管我不同意......

# angularjs - angularjs - 扩展递归

> ID：15310935
> 
> 赞同：22
> 
> 时间：2013-03-09T12:57:43.953
> 
> 标签：angularjs

我想扩展一些递归属性（又名深拷贝）。就像 jQuery 一样。我不包括 jquery 仅 b/c 的一件事。

```
jQuery.extend( true, target, object1 ) 
```

你知道有什么优雅的方式可以用简单的 javascript 或 angularjs 来实现吗？

**更新** 请看一下并尝试完成相同的结果 [http://plnkr.co/edit/GHabYbyhsqtfBPtplksO?p=preview](http://plnkr.co/edit/GHabYbyhsqtfBPtplksO?p=preview)

我确实查看了 .copy() 但“属性（用于对象）被删除”

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-09T14:34:24.203

这是一个基于 angular.extend 函数的 extendDeep 函数。如果你把它添加到你的 $scope 中，你就可以调用

```
$scope.meta = $scope.extendDeep(ajaxResponse1.myMeta, ajaxResponse2.defaultMeta); 
```

并获得您正在寻找的答案。

```
$scope.extendDeep = function extendDeep(dst) {
  angular.forEach(arguments, function(obj) {
    if (obj !== dst) {
      angular.forEach(obj, function(value, key) {
        if (dst[key] && dst[key].constructor && dst[key].constructor === Object) {
          extendDeep(dst[key], value);
        } else {
          dst[key] = value;
        }     
      });   
    }
  });
  return dst;
}; 
```

注意：此函数具有将值从后面的参数复制到前面的参数的副作用。对于此副作用的简单修复，您可以更改`dst[key] = value`为`dst[key] = angular.copy(value)`.

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2015-03-19T14:53:15.653

这里的所有答案都对**Angular 1.4 之前的版本有效**

从 Angular 1.4 开始，您可以使用它`angular.merge`来做到这一点：

> 与 extend() 不同，**merge()**递归地下降到源对象的对象属性中，执行**深度复制**。

[https://docs.angularjs.org/api/ng/function/angular.merge](https://docs.angularjs.org/api/ng/function/angular.merge)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-03-09T14:29:36.207

```
function deepExtend(destination, source) {
  for (var property in source) {
    if (source[property] && source[property].constructor &&
     source[property].constructor === Object) {
      destination[property] = destination[property] || {};
      arguments.callee(destination[property], source[property]);
    } else {
      destination[property] = source[property];
    }
  }
  return destination;
} 
```

[普朗克](http://plnkr.co/edit/9qbHHP4RqtpfqyHjzyqV)

来源：[https ://gist.github.com/gregdangelo/2343158](https://gist.github.com/gregdangelo/2343158)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-11-10T15:47:16.457

基于 Ryan 的代码，您可以缩短对象检查，并且您也不应该扩展函数，这样您就不会覆盖对象指针。

```
var extendDeep = function extendDeep(dst) {
    angular.forEach(arguments, function(obj) {
        if (obj !== dst) {
            angular.forEach(obj, function(value, key) {
                if (dst[key] && angular.isObject(dst[key])) {
                    extendDeep(dst[key], value);
                } else if(!angular.isFunction(dst[key])) {
                    dst[key] = value;
                }
            });
        }
    });
    return dst;
}; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-31T09:33:36.957

与 Ryan 相同的解决方案，但支持数组合并

```
function extendDeep(dst) {
      angular.forEach(arguments, function (obj) {
          if (obj !== dst) {
            angular.forEach(obj, function (value, key) {
                if (dst[key] && dst[key].constructor && dst[key].constructor === Object) {
                  extendDeep(dst[key], value);
                } else if (dst[key] && dst[key].constructor && dst[key].constructor === Array) {
                  dst[key].concat(value);
                } else if(!angular.isFunction(dst[key])) {
                  dst[key] = value;
                }
              }
            );
          }
        }
      );
      return dst;
    } 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-03-09T13:05:39.817

Angular 有一个复制方法：

[角复制](http://docs.angularjs.org/api/angular.copy)

# json - 加载这个 JSON 有什么问题？

> ID：15310936
> 
> 赞同：0
> 
> 时间：2013-03-09T12:57:45.420
> 
> 标签：json, fabricjs

加载这个 JSON 有什么问题？选择一个新对象，设置其 ID，添加并保存。尝试重新加载 JSON 对象会导致画布为空。

[http://jsfiddle.net/Sugv4/14/](http://jsfiddle.net/Sugv4/14/)

```
function loadCanvas() {
    canvas.clear();
    window.alert(js);

    canvas.loadFromDatalessJSON(js)
    canvas.renderAll();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T03:00:31.273

尝试将其放入 Javascript 代码中：

```
var canvas;
$(function () {
    canvas = window._canvas = new fabric.Canvas('c');

    fabric.Labeledrect = fabric.util.createClass(fabric.Rect, {
        type: 'labeledRect',
        initialize: function (options) {
            options || (options = {});
            this.callSuper('initialize', options);
            this.set('label', options.label);
            this.set('id', options.id);
        },
        toObject: function () {
            return fabric.util.object.extend(this.callSuper('toObject'), {
                label: this.get('label'),
                id: this.get('id')
            });
        },
        _render: function (ctx) {
            this.callSuper('_render', ctx);
            ctx.font = '10px Helvetica';
            ctx.fillStyle = '#333';
            ctx.fillText(this.label, -this.width / 2, -this.height / 2 + 10);
            ctx.fillText(this.id, -this.width / 2, -this.height / 2 + 30);
        }

    });

    fabric.Labeledrect.fromObject = function (object, callback) {
        return new fabric.Labeledrect(object);
    }
    fabric.Labeledrect.async = true;
});

function voegObjectToe() {

    var myObjects = document.getElementById("myObjects");
    var kenmerk = myObjects.options[myObjects.selectedIndex].text;

    //nieuw object
    var rect = new fabric.Labeledrect({
        left: canvas.width / 2,
        top: canvas.height / 2

    });

    if (kenmerk == 'Camper') {
        rect.set({
            width: 80,
            height: 50,
            fill: '#faa',
            label: 'Camper',
            id: document.getElementById("myObject").value
        });

    } else if (kenmerk == 'Caravan') {
        rect.set({
            width: 80,
            height: 60,
            fill: '#3ac',
            label: 'Caravan',
            id: document.getElementById("myObject").value
        });
    } else if (kenmerk == 'Auto') {
        rect.set({
            width: 70,
            height: 40,
            fill: '#bbb',
            label: 'Auto',
            id: document.getElementById("myObject").value
        });
    } else if (kenmerk == "Boot") {
        rect.set({
            width: 150,
            height: 60,
            fill: '#8d1',
            label: 'Boot',
            id: document.getElementById("myObject").value
        });

    }
    canvas.add(rect);
    rect.set({
        label: kenmerk + ' ' + rect.width * 7 + ' cm',
        rx: 8,
        ry: 8
    });
    canvas.renderAll();

}

function saveCanvas() {
    js = JSON.stringify(canvas.toDatalessJSON());

}

function loadCanvas() {
    //window.alert(js);

    canvas.clear();
    canvas.loadFromDatalessJSON(js);
    canvas.renderAll();
} 
```

# java - RuntimeException : android.view.InflateException: Binary XML file line #8: Error inflating class fragment

> ID：15310942
> 
> 赞同：0
> 
> 时间：2013-03-09T12:58:15.737
> 
> 标签：java, android, facebook, android-fragments

我想将我的 Google 地图与 Facebook SDK 集成以通过 Facebook 检查位置并在相同的布局中共享，但是当我将此代码添加到方法 onCreate() 时，它会强制关闭并显示错误

```
if (savedInstanceState == null) {
    // Add the fragment on initial activity setup
    mainFragment = new MainFragment();

    getSupportFragmentManager().beginTransaction().add(android.R.id.content, mainFragment).commit();
    myFragmentManager = getSupportFragmentManager();
    mainFragment = (MainFragment) myFragmentManager.findFragmentById(R.id.checkIn);
} else {
    // Or set the fragment from restored state info
    mainFragment = (MainFragment) getSupportFragmentManager().findFragmentById(android.R.id.content);
} 
```

这是我的 onCreate() 方法

```
protected void onCreate(final Bundle savedInstanceState) {
    try {

        // Permission StrictMode
        if (android.os.Build.VERSION.SDK_INT > 9) {
            StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder()
                    .permitAll().build();
            StrictMode.setThreadPolicy(policy);
        }

        super.onCreate(savedInstanceState);
        setContentView(R.layout.check_in);

        checkInButton = (Button) findViewById(R.id.shareButton);
        checkInButton.setVisibility(View.VISIBLE);

        authButton = (Button)findViewById(R.id.authButton);
        authButton.setVisibility(View.VISIBLE);

        endLocationEditText = (EditText) findViewById(R.id.endLocationEditText);
        endLocationEditText.setVisibility(View.INVISIBLE);
        startLocationEdittext = (EditText) findViewById(R.id.starLocationEditText);
        startLocationEdittext.setVisibility(View.INVISIBLE);

        toggle = (ToggleButton) findViewById(R.id.togglebutton);
        toggle.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                if (hasConnection(getApplicationContext()) == true) {
                    if (toggle.isChecked()) {
                        endLocationEditText = (EditText) findViewById(R.id.endLocationEditText);
                        endLocationEditText.setVisibility(View.VISIBLE);
                        startLocationEdittext = (EditText) findViewById(R.id.starLocationEditText);
                        startLocationEdittext.setVisibility(View.INVISIBLE);
                        goButton.setVisibility(View.VISIBLE);
                    } else {
                        endLocationEditText = (EditText) findViewById(R.id.endLocationEditText);
                        endLocationEditText.setVisibility(View.INVISIBLE);
                        startLocationEdittext = (EditText) findViewById(R.id.starLocationEditText);
                        startLocationEdittext.setVisibility(View.VISIBLE);
                        goButton.setVisibility(View.VISIBLE);
                    }

                    checkInButton.setVisibility(View.VISIBLE);
                    checkInButton.setOnClickListener(new OnClickListener() {
                        public void onClick(View v) {
                            endLocationEditText
                                    .setVisibility(View.INVISIBLE);
                            AlertDialog.Builder builder = new AlertDialog.Builder(
                                    CheckIn.this);
                            builder.setTitle("Attach photo?");
                            builder.setNegativeButton("No",
                                    new DialogInterface.OnClickListener() {
                                        public void onClick(
                                                DialogInterface dialog,
                                                int which) {

                                        }

                                    });
                            builder.setPositiveButton("Yes",
                                    new DialogInterface.OnClickListener() {
                                        public void onClick(
                                                DialogInterface dialog,
                                                int which) {
                                            Intent captureIntent = new Intent(
                                                    MediaStore.ACTION_IMAGE_CAPTURE);
                                            startActivityForResult(
                                                    captureIntent,
                                                    CAMERA_CAPTURE);
                                        }
                                    });
                            builder.show();

                        }
                    });
                } else {
                    System.out.println("ยังไม่ได้ต่อเน็ต");
                    AlertDialog.Builder builder = new AlertDialog.Builder(
                            CheckIn.this);
                    builder.setTitle("Please connect to the Internet.");
                    builder.show();
                }

            }
        });

        goButton = (Button) findViewById(R.id.goButton);
        goButton.setVisibility(View.INVISIBLE);
        goButton.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                if (toggle.isChecked() == true) {
                    String location = endLocationEditText.getText()
                            .toString();
                    if (location != null && !location.equals("")) {
                        new GeocoderTask().execute(location);
                    }
                } else {
                    String location = startLocationEdittext.getText()
                            .toString();
                    if (location != null && !location.equals("")) {
                        new GeocoderTask().execute(location);
                    }
                }

            }
        });

        myLocationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        Criteria criteria = new Criteria();
        String provider = myLocationManager.getBestProvider(criteria, true);
        Location location = myLocationManager
                .getLastKnownLocation(provider);
        if (location != null) {
            onLocationChanged(location);
        }

        myLocationManager.requestLocationUpdates(
                LocationManager.GPS_PROVIDER, 20000, 0, this);

        // สำหรับแสดง Google maps v2
        FragmentManager myFragmentManager = getSupportFragmentManager();
        SupportMapFragment mySupportMapFragment = (SupportMapFragment) myFragmentManager
                .findFragmentById(R.id.checkIn);
        myMap = mySupportMapFragment.getMap();
        myMap.setMyLocationEnabled(true);
        fromMarkerPosition = new LatLng(location.getLatitude(),
                location.getLongitude());
        toMarkerPosition = fromMarkerPosition;
        myMap.animateCamera(CameraUpdateFactory.newLatLngZoom(
                fromMarkerPosition, 13));
        myMap.setMapType(GoogleMap.MAP_TYPE_NORMAL);
        myMap.addMarker(new MarkerOptions()
                .position(fromMarkerPosition)
                .title("Yor are here!")
                .icon(BitmapDescriptorFactory
                        .defaultMarker(BitmapDescriptorFactory.HUE_AZURE)));
        myMap.getUiSettings().setCompassEnabled(true);
        myMap.getUiSettings().setZoomControlsEnabled(true);
        /* จบการแสดง maps */

        // สร้าง click event สำหรับระบุพิกัดจุด
        myMap.setOnMapClickListener(new OnMapClickListener() {
            public void onMapClick(LatLng arg0) {

                if (hasConnection(getApplicationContext()) == true) {
                    final LatLng coordinate = arg0;
                    AlertDialog.Builder builder = new AlertDialog.Builder(
                            CheckIn.this);

                    endLocationEditText.setVisibility(View.INVISIBLE);
                    startLocationEdittext.setVisibility(View.INVISIBLE);
                    goButton.setVisibility(View.INVISIBLE);
                    System.out
                            .println("@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@");
                    builder.setTitle("Select Marker").setItems(
                            new String[] { "From", "To" },
                            new DialogInterface.OnClickListener() {
                                public void onClick(DialogInterface dialog,
                                        int position) {

                                    try {
                                        if (position == 0) {
                                            fromMarkerPosition = coordinate;
                                            System.out
                                                    .println(fromMarkerPosition
                                                            + " yyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyy");
                                            refreshMarker();
                                        } else if (position == 1) {
                                            toMarkerPosition = coordinate;
                                            System.out
                                                    .println(toMarkerPosition
                                                            + " ttttttttttttttttttttttttttttttttttttttt");
                                            refreshMarker();
                                        }
                                    } catch (Exception ex) {
                                        ex.printStackTrace();
                                        System.out
                                                .println("Please connect to the internet first");
                                    }
                                }
                            });
                    builder.show();
                    myMap.animateCamera(CameraUpdateFactory
                            .newLatLng(coordinate));

                    checkInButton.setVisibility(View.VISIBLE);
                    checkInButton.setOnClickListener(new OnClickListener() {
                        public void onClick(View v) {
                            endLocationEditText
                                    .setVisibility(View.INVISIBLE);
                            AlertDialog.Builder builder = new AlertDialog.Builder(
                                    CheckIn.this);
                            builder.setTitle("Attach photo?");
                            builder.setNegativeButton("No",
                                    new DialogInterface.OnClickListener() {
                                        public void onClick(
                                                DialogInterface dialog,
                                                int which) {

                                        }

                                    });
                            builder.setPositiveButton("Yes",
                                    new DialogInterface.OnClickListener() {
                                        public void onClick(
                                                DialogInterface dialog,
                                                int which) {
                                            Intent captureIntent = new Intent(
                                                    MediaStore.ACTION_IMAGE_CAPTURE);
                                            startActivityForResult(
                                                    captureIntent,
                                                    CAMERA_CAPTURE);
                                        }
                                    });
                            builder.show();

                        }
                    });
                } else {
                    System.out.println("ยังไม่ได้ต่อเน็ต");
                    AlertDialog.Builder builder = new AlertDialog.Builder(
                            CheckIn.this);
                    builder.setTitle("Please connect to the Internet.");
                    builder.show();
                }

            }
        });

        if (savedInstanceState == null) {
            // Add the fragment on initial activity setup

            mainFragment = new MainFragment();
            getSupportFragmentManager().beginTransaction().add(android.R.id.content, mainFragment).commit();
            myFragmentManager = getSupportFragmentManager();
             mainFragment = (MainFragment) myFragmentManager
                    .findFragmentById(R.id.checkIn);
        } else {

            // Or set the fragment from restored state info
            mainFragment = (MainFragment) getSupportFragmentManager()
            .findFragmentById(android.R.id.content);
        }
    } catch (Exception ex) {
        ex.printStackTrace();
    }
}// end onCreate 
```

这是我的 MainFragment 类........

```
public class MainFragment extends Fragment{

private static final List<String> PERMISSIONS = Arrays.asList("publish_actions");
private static final String PENDING_PUBLISH_KEY = "pendingPublishReauthorization";
private boolean pendingPublishReauthorization = false;
private Button shareButton;
private UiLifecycleHelper uiHelper;
private static final String TAG = "MainFragment";

private Session.StatusCallback callback = new Session.StatusCallback() {
    @Override
    public void call(Session session, SessionState state, Exception exception) {
        onSessionStateChange(session, state, exception);
    }
};

@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    uiHelper = new UiLifecycleHelper(getActivity(), callback);
    uiHelper.onCreate(savedInstanceState);

}

@Override
public View onCreateView(LayoutInflater inflater, 
        ViewGroup container, 
        Bundle savedInstanceState) {
    super.onCreateView(inflater, container, savedInstanceState); 
    View view = inflater.inflate(R.layout.check_in, container, false);

    LoginButton authButton = (LoginButton) view.findViewById(R.id.authButton);
    authButton.setFragment(this);
    authButton.setReadPermissions(Arrays.asList("user_likes", "user_status"));

    shareButton = (Button) view.findViewById(R.id.shareButton);
    shareButton.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            publishStory();        
        }
    });

    if (savedInstanceState != null) {
        pendingPublishReauthorization = 
            savedInstanceState.getBoolean(PENDING_PUBLISH_KEY, false);
    }
    return view;
}

private void onSessionStateChange(Session session, SessionState state, Exception exception) {
    if (state.isOpened()) {
        Log.i(TAG, "Logged in...");
    } else if (state.isClosed()) {
        Log.i(TAG, "Logged out...");
    }

    if (state.isOpened()) {
        shareButton.setVisibility(View.VISIBLE);
        if (pendingPublishReauthorization && 
                state.equals(SessionState.OPENED_TOKEN_UPDATED)) {
            pendingPublishReauthorization = false;
            publishStory();
        }
    } else if (state.isClosed()) {
        shareButton.setVisibility(View.INVISIBLE);
    }
}

private void publishStory() {
    Session session = Session.getActiveSession();

    if (session != null){

        // Check for publish permissions    
        List<String> permissions = session.getPermissions();
        if (!isSubsetOf(PERMISSIONS, permissions)) {
            pendingPublishReauthorization = true;
            Session.NewPermissionsRequest newPermissionsRequest = new Session
                    .NewPermissionsRequest(this, PERMISSIONS);
        session.requestNewPublishPermissions(newPermissionsRequest);
            return;
        }

        Bundle postParams = new Bundle();
        postParams.putString("name", "Facebook SDK for Android");
        postParams.putString("caption", "Build great social apps and get more installs.");
        postParams.putString("description", "The Facebook SDK for Android makes it easier and faster to develop Facebook integrated Android apps.");
        postParams.putString("link", "https://developers.facebook.com/android");
        postParams.putString("picture", "https://raw.github.com/fbsamples/ios-3.x-howtos/master/Images/iossdk_logo.png");

        Request.Callback callback= new Request.Callback() {
            public void onCompleted(Response response) {
                JSONObject graphResponse = response
                                           .getGraphObject()
                                           .getInnerJSONObject();
                String postId = null;
                try {
                    postId = graphResponse.getString("id");
                } catch (JSONException e) {
                    Log.i(TAG,
                        "JSON error "+ e.getMessage());
                }
                FacebookRequestError error = response.getError();
                if (error != null) {
                    Toast.makeText(getActivity()
                         .getApplicationContext(),
                         error.getErrorMessage(),
                         Toast.LENGTH_SHORT).show();
                    } else {
                        Toast.makeText(getActivity()
                             .getApplicationContext(), 
                             postId,
                             Toast.LENGTH_LONG).show();
                }
            }
        };

        Request request = new Request(session, "me/feed", postParams, 
                              HttpMethod.POST, callback);

        RequestAsyncTask task = new RequestAsyncTask(request);
        task.execute();
    }

}

private boolean isSubsetOf(Collection<String> subset, Collection<String> superset) {
    for (String string : subset) {
        if (!superset.contains(string)) {
            return false;
        }
    }
    return true;
}

@Override
public void onResume() {
    super.onResume();
    Session session = Session.getActiveSession();
    if (session != null &&
           (session.isOpened() || session.isClosed()) ) {
        onSessionStateChange(session, session.getState(), null);
    }

    uiHelper.onResume();
}

@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    uiHelper.onActivityResult(requestCode, resultCode, data);
}

@Override
public void onPause() {
    super.onPause();
    uiHelper.onPause();
}

@Override
public void onDestroy() {
    super.onDestroy();
    uiHelper.onDestroy();
}

@Override
public void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    outState.putBoolean(PENDING_PUBLISH_KEY, pendingPublishReauthorization);
    uiHelper.onSaveInstanceState(outState);
} 
```

}

xml 第 8 行在这里

```
<fragment
    android:id="@+id/checkIn"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_below="@+id/authButton"
    class="com.google.android.gms.maps.SupportMapFragment" /> 
```

这是一个错误

```
03-09 20:17:15.433: E/AndroidRuntime(12547): Caused by: android.view.InflateException: Binary XML file line #8: Error inflating class fragment
03-09 20:17:15.433: E/AndroidRuntime(12547): Caused by: java.lang.IllegalArgumentException: Binary XML file line #8: Duplicate id 0x7f04000a, tag null, or parent id 0x0 with another fragment for com.google.android.gms.maps.SupportMapFragment 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T08:16:16.653

查看[http://code.google.com/p/gmaps-api-issues/issues/detail?id=5064#c1](http://code.google.com/p/gmaps-api-issues/issues/detail?id=5064#c1)了解如何正确地将 SupportMapFragment 放入片段中。

# java - 在接口内声明数组对象

> ID：15310944
> 
> 赞同：-1
> 
> 时间：2013-03-09T12:58:21.923
> 
> 标签：java

我有这样的场景，这是一个很好的实现吗？

```
public interface Vehicle {
// is it possible to declare array in interface?

//so it is possible and no compilation errors

Vehicle[] vehicles1 = new Vehicle[10];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T13:03:52.267

你这是可能的，但属性是公开的，这不是一个好的风格。`getter`属性应该是私有的，并由`setter`方法访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T13:05:05.013

不，您只能在接口中声明`public`方法和`static final`字段（常量）。

这样的事情是可能的，但不是你想要的：

```
public interface Vehicle {
    public static final Vehicle[] vehicles1 = new Vehicle[10];
} 
```

我建议使用通常的`get`和`set`模式：

```
public interface Vehicle {
    void setVehicles1(Vehicle[] vehicles);
    Vehicle[] getVehicles1();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T13:02:55.483

在技​​术上可以声明这样的字段。即使您没有明确说明，它也会是`public`, `static`and （这基本上使它成为一个常数）。`final`

这是否是一种好的做法，实际上取决于您将使用它的目的。但在大多数情况下不鼓励这样做。

# java - Liferay 的portlet 名称是如何生成的？

> ID：15310945
> 
> 赞同：5
> 
> 时间：2013-03-09T12:58:29.243
> 
> 标签：java, liferay, portlet, liferay-6

在大多数情况下，有必要知道 Liferay portlet 的实际名称。

特别是在 Liferay 的主题中，我可以添加“登录 portlet”，如下所示：

```
$theme.runtime("58", "", $velocityPortletPreferences.toString()) 
```

它有效。但是当我尝试添加一些 ID 为“some-portlet-id”的自定义 portlet

```
$theme.runtime("some-portlet-id", "", $velocityPortletPreferences.toString()) 
```

它不起作用。我怀疑 Liferay portlet 的名称不等于 portlet 的 ID。

在这种情况下，有人可以解释一下，这些名称是如何生成的？

提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-09T13:15:18.187

如果 portlet 在 Liferay 门户中，则 portlet ID 等于 portlet 的名称，即`ROOT`.

但是，如果您尝试在其他 war 文件（例如插件环境）中获取 portlet 的名称，在这种情况下，portlet 名称将根据以下规则生成：

```
[portlet ID] + _WAR_ + [webapp name, where portlet is placed] 
```

请注意，这两者`portlet ID`和从他们的名字中`webapp name`排除。`-`

因此，如果您`some-portlet-id`在 WAR-file中有带有 id`some-portlet`的 portlet，那么 portlet 名称类似于以下内容：

```
someportletid_WAR_someportlet 
```

这也指 Liferay 的主题名称。

另外请记住，Liferay portlet 的名称也有可选的实例 ID：

```
[portlet ID] + _WAR_ + [webapp name, where portlet is placed] + _INSTANCE_ + [portlet instance ID] 
```

它们对于那些 portlet 是必需的，这`instansable`是真的。这基本上是4个任意字母。

```
someportletid_WAR_someportlet_INSTANCE_abcd 
```

但请小心他们，因为您可以忽略该实例 ID 并放置您想要的所有内容。但是，如果您需要使用一些预先填充的数据（例如 portlet 首选项）来获取特定实例，那么您肯定需要以某种方式知道这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T19:11:59.787

如果您不想保留文档（或 n1ckolas 的答案）并查找实际的 portlet id（例如 Liferay 的编号），您也可以手动将所需的 portlet 添加到页面，然后转到“Look&Feel/Advanced样式”，您可以在那里看到 portlet id。如果有一个实例，添加一些您自己的随机内容以使其唯一，但更重要的部分，完整的 portlet id，最容易通过这种方式找到。

# jquery - Ajax 调用形成不同的域与 jQuery 不呈现正确的数据

> ID：15310946
> 
> 赞同：0
> 
> 时间：2013-03-09T12:58:32.423
> 
> 标签：jquery, ajax, node.js

我在javascript中有这段代码

```
var url = 'http://mydomain.com:3000';
url += "/user";

jQuery.ajax({
  url: url,
  type: "GET",
  dataType: "jsonp",
  async: false,
  success: function (data) {alert(1);
    console.log(data);
  }
}); 
```

我的网站在[http://mydomain.com:80](http://mydomain.com:80)上运行，因此它们不在同一台服务器上。

[http://mydomain.com:3000](http://mydomain.com:3000)由 nodejs 提供，代码

```
app.get('/user',function(req,res){    
  var result = {
    result:-1
  };
  res.json(result);
  res.writeHead(200, {"Content-Type": "application/json"});
}); 
```

当我调用 ajax 时，我从 chrome 预览响应中得到

```
{
  "result": -1
} 
```

但是在javascript的控制台中我得到了错误

```
Uncaught SyntaxError: Unexpected token : user:2 
```

而且我没有收到任何警报消息。

我什至在nodejs中尝试过

```
res.end("'"+JSON.stringify(result)+"'"); 
```

并且 chrome 预览响应是

```
'{"result":-1}' 
```

并且控制台错误消失了，但仍然没有触发警报

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T13:52:58.153

`res.json()`立即发送响应。您必须在使用它之前设置标题。

```
res.json(result);
res.writeHead(200, {"Content-Type": "application/json"}); //Response already sent before. 
```

所以`res.writeHead()`不设置标题作为响应。您收到的错误意味着您的响应中有一些非法字符代码。

> Uncaught SyntaxError: Unexpected token : user:2

Try setting headers before, browser will then correctly identify your message as JSON.

**Update**

On checking your code again I saw that you are sending response as `res.json()` but in your AJAX recieving it as `jsonp`. The two are different `json` and `jsonp`. There is a `res.jsonp()` you can use in node or change datatype in your AJAX query as `json`.

# php - 如何在 JA Mero joomla 模板中编辑文章布局

> ID：15310947
> 
> 赞同：0
> 
> 时间：2013-03-09T12:58:33.127
> 
> 标签：php, html, mysql, joomla, joomla2.5

我为我的网站使用 JA Merro joomla 模板。但是当我当时从用户的站点查看添加的文章时，某些类型的 os 垃圾值会显示在文章的开头和结尾。

**"горящие туры в Индонезию история кинематографа"**

![错误图片][1]

我可以检查 com_content 的 tmpl/default.php 文件，但它不起作用。请帮我删除这个....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T13:12:14.040

检查`template/html/com_content/article/default.php`文件以防有模板覆盖

# ffmpeg - 段不包含同步帧

> ID：15310950
> 
> 赞同：4
> 
> 时间：2013-03-09T12:59:02.990
> 
> 标签：ffmpeg, http-live-streaming, video-encoding

每当我使用 Apple 分割视频`mediafilesegmenter`时，使用以下命令：`medifilesegmenter video.ts -t 10`. 除第一个段外，每个段都出现以下错误：

```
segment does not contain sync frame 
```

在拆分之前，我使用以下命令将 .MP4 版本转换为 .TS：

```
avconv -y -i video.mp4 -f mpegts -acodec libmp3lame -ar 48000 -ab 64k -s 640x480 -vcodec libx264 -b 64k -flags +loop -cmp +chroma -partitions +parti4x4+partp8x8+partb8x8 -subq 7 -trellis 0 -refs 0 -coder 0 -me_range 16 -keyint_min 25 -sc_threshold 40 -i_qfactor 0.71 -bt 200k -maxrate 64k -bufsize 64k -rc_eq 'blurCplx^(1-qComp)' -qcomp 0.6 -qmin 30 -qmax 51 -qdiff 4 -level 30 -aspect 640:480 -g 30 -async 2 sample_64.ts 
```

谁能告诉我为什么会出现这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T18:20:11.423

这是因为在 10 秒时需要我的图片。找到您的视频帧速率。如果你想要 10 秒的片段，你需要每 10 秒有一个 I 帧。因此，您可以每秒、2 秒、5 秒或 10 秒插入一个。为此，将 sc_threshold 设置为 0，将 keyint_interval 设置为 frame_rate*[1,2,5,10 之一]，具体取决于您想要的关键帧间隔。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T22:03:25.930

我通过更新到最新版本的 ffmpeg 而不是使用 avconv 解决了这个问题。我最终用来转换`MP4`视频的命令：

```
ffmpeg -y -i video.mp4 -f mpegts -acodec libmp3lame -ar 48000 -ab 64k -s 640x480 -vcodec libx264 -b 150k -flags +loop -cmp chroma -partitions +parti4x4+partp8x8+partb8x8 -subq 7 -trellis 0 -refs 0 -coder 0 -me_range 16 -keyint_min 25 -sc_threshold 40 -i_qfactor 0.71 -bt 200k -maxrate 150k -bufsize 150k -rc_eq 'blurCplx^(1-qComp)' -qcomp 0.6 -qmin 30 -qmax 51 -qdiff 4 -level 30 -aspect 640:480 -g 30 -async 2 sample_150.ts 
```

# php - 使整行可点击 - PHP 方法

> ID：15310951
> 
> 赞同：0
> 
> 时间：2013-03-09T12:59:19.170
> 
> 标签：php, row

嗨程序员和网页设计师，我正在为与我合作的公司开发一个小型系统，一切都差不多完成了（感谢这个网站和其他网站的帮助......）除了这个我想要整行的功能我的 php 代码生成的表，现在我只能让我的第二列可点击。我已经尝试过使用谷歌搜索，但找不到可行的解决方案。仅供参考，我是菜鸟，刚开始学习 php.... 提前谢谢...

```
while($info = mysql_fetch_array( $data ))  
{ echo "<tr> class='tablerows' align=center onclick=\"window.location=http://active_jobs.php?job_ticket='".$info['job_ticket']."'\">
<td>".$info['date']."</td>; 
<td><a> href=somefile.php?job_ticket=".$info['job_ticket'].">".$info['job_ticket']."</td>
<td>".$info['invoice_no']."</td> <td>".$info['customer']."</td>
<td>".$info['job_type']."</td> <td>".$info['complete_date']."</td>
<td>".$info['complete_time']."</td>
<td>".$info['artist_operator_prepress']."</td>
<td>".$info['status_prepress']."</td>
<td>".$info['status_press']."</td>
<td>".$info['status_postpress']."</td> <td
width='300'>".$info['remarks']."</td>"; echo "</tr>"; 
} echo
"</table>"; 
```

在此先感谢您的帮助。马可

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T13:02:11.020

您不能使用 PHP 使整行“可点击”。PHP 是一种服务器端语言；您生成 HTML 并将其吐出。

如果您想让整个表格行可点击，您要么必须将其包装在`<a>`（无效的 HTML）中，要么使用客户端语言（如 JavaScript）应用事件侦听器，侦听`<tr>`被点击并重定向到您想要的任何 URL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T13:03:35.150

您应该检查生成的 html，您正在关闭`<tr>`标签，因此类和 javascript 不再是其中的一部分：

```
{ echo "<tr> class='tablerows' align=center onclick=\"window.location=http://active_jobs.php?job_ticket='".$info['job_ticket']."'\">
           ^ remove this and check the html again; it probably works now 
```

`a`您在标签的第四行有同样的错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T13:21:27.137

对于使用 php 对表值进行实时编辑，您可以使用客户端脚本语言 javascript & jquery with ajax ..

以供参考 ：

[使用 Ajax 实时编辑表格](http://www.9lessons.info/2011/03/live-table-edit-with-jquery-and-ajax.html)

这是值得的...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-09T13:16:55.707

我通过假设您知道 JQUERY 来回答这个问题。编写示例代码将其复制到文件“.html”中并运行。确保您已连接到互联网以让 jquery api 加载。谢谢。

前任：-

```
<html>
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>

$(document).ready(function(){
$('table tr').click( function () {
        alert('i am clicked');
        } );
});
</script>
</head>

<body>
    <table border="1">
<tr><td>1</td><td>apple</td><td>boy</td><td>jjjj</td><td>dddd</td><td></td><td>1010</td><td>1019</td><td>06-Mar-13 21:47:34</td></tr>
<tr><td>2</td><td>strawberry</td><td>girl</td><td>jjjj</td><td>dddd</td><td></td><td>1010</td><td>1019</td><td>06-Mar-13 21:47:34</td></tr>
<tr><td>2</td><td>strawberry</td><td>girl</td><td>jjjj</td><td>dddd</td><td></td><td>1010</td><td>1019</td><td>06-Mar-13 21:47:34</td></tr>
    </table>
</body>
</html> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-01-22T13:52:45.730

好吧，您可以使表格行可点击。这很容易。您只需在每张桌子内制作隐形按钮即可出售。使它们没有边界和颜色。然后，只需将整行作为可点击按钮处理。您需要为行中的每个 TD 执行此操作。此外，您必须为每一行设置一个唯一的 ID，以便按钮可以识别行号。像这样松散的东西：

```
<td><button type='submit' name='click_row' value='" . $info["id"] . "' style='width: 100%; background: none; border: none; box-shadow: none;'>DATA FOR THIS TD</button></td> 
```

然后，您需要处理该行的按钮。（该行中每个 TD 的按钮相同。）大致如下：

```
if (isset($_POST["click_row"])) {
   $clicked_row = $_POST["click_row"];
   //  Handle what you want done with this row...
} 
```

对我来说效果很好！

# ios - UIDatePicker 未在 UITable 上正确显示

> ID：15310958
> 
> 赞同：2
> 
> 时间：2013-03-09T13:00:25.487
> 
> 标签：ios, objective-c, uitableview, uidatepicker

我有一个 UITableCell 并且在那个单元格上我有一个 UITextBox，当单击文本框而不是显示键盘时，将显示一个 UIDatePicker，下面的代码。但我无法定位 UIDatePicker。我需要它从页面的最底部开始，此时它似乎从按下文本框的表格部分的顶部开始。当用户单击首选日期标签时，代码会触发。任何指针？我附上了一张图片来显示它当前的渲染位置。谢谢。

![问题](../Images/a25524e130d60f7650d2726597427115.png)

```
- (IBAction)selectDateBegin:(id)sender {

    //Disable Keyboard
    [self.txtBookingDate resignFirstResponder];
    //Disable Scrolling
    [_tableForm setScrollEnabled:false];

    if ([self.view viewWithTag:9]) {
        return;
    }
    CGRect toolbarTargetFrame = CGRectMake(0, self.view.bounds.size.height-216-44, 320, 44);
    CGRect datePickerTargetFrame = CGRectMake(0, self.view.bounds.size.height-216, 320, 216);

    UIView *darkView = [[UIView alloc] initWithFrame:self.view.bounds];
    darkView.alpha = 0;
    darkView.backgroundColor = [UIColor blackColor];
    darkView.tag = 9;
    UITapGestureRecognizer *tapGesture = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(dismissDatePicker:)] ;
    [darkView addGestureRecognizer:tapGesture];
    [self.view addSubview:darkView];

    UIDatePicker *datePicker = [[UIDatePicker alloc] initWithFrame:CGRectMake(0, self.view.bounds.size.height+44, 320, 216)] ;
    datePicker.tag = 10;
    [datePicker addTarget:self action:@selector(changeDate:) forControlEvents:UIControlEventValueChanged];
    [self.view addSubview:datePicker];

    UIToolbar *toolBar = [[UIToolbar alloc] initWithFrame:CGRectMake(0, self.view.bounds.size.height, 320, 44)];
    toolBar.tag = 11;
    toolBar.barStyle = UIBarStyleBlackTranslucent;
    UIBarButtonItem *spacer = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil];
    UIBarButtonItem *doneButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone target:self action:@selector(dismissDatePicker:)];
    [toolBar setItems:[NSArray arrayWithObjects:spacer, doneButton, nil]];
    [self.view addSubview:toolBar];

    [UIView beginAnimations:@"MoveIn" context:nil];
    toolBar.frame = toolbarTargetFrame;
    datePicker.frame = datePickerTargetFrame;
    darkView.alpha = 0.5;
    [UIView commitAnimations];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T13:15:57.203

我建议你做的是用这个指令替换你的 textField 的 inputView （默认是键盘）：

```
UIDatePicker *datePicker = [[UIDatePicker alloc] init] ;
[datePicker addTarget:self action:@selector(changeDate:) forControlEvents:UIControlEventValueChanged];

[preferredDateField setInputView:datePicker]; 
```

它更合适并符合 Apple 人机界面指南

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T13:15:31.683

不要那样做。创建一个日期选择器并将其设置为`inputView`您的文本字段。然后系统将在正确的位置以正确的动画而不是键盘为您呈现它。

# iphone - 在精灵上播放另一个动画后播放动画

> ID：15310959
> 
> 赞同：0
> 
> 时间：2013-03-09T13:00:34.637
> 
> 标签：iphone, objective-c, animation, cocos2d-iphone

我已经查看了所有内容，但找不到任何有关如何执行此操作的信息。我想运行一个动作动画，然后在该动画完成后我希望它在同一个精灵上运行另一个动作动画。这怎么可能？

```
 [self.mainShip runAction:retractdoor];
    [self.mainShip runAction:activatedoor]; 
```

这让我崩溃。

```
 self.mainShip runAction: [CCSequence actions:retractdoor,activatedoor, nil]; 
```

给我一个黄色通知

不兼容的指针类型将抄送操作发送到 ccfinite 时间操作类型的参数

```
CCAnimation *retractdoorAnimation = [CCAnimation
                                         animationWithSpriteFrames:retractdoorframes delay:0.1f];
    CCAnimation *activatedoorAnimation = [CCAnimation
                                           animationWithSpriteFrames:activatedoorframes delay:0.1f];

self.retractdoorAction = [CCAnimate actionWithAnimation:retractdoorAnimation];
self.activatedoorAction = [CCAnimate actionWithAnimation:activatedoorAnimation]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T13:11:08.843

你错过了 nil 终止。

```
[self.mainShip runAction: [CCSequence actions:retractdoor,activatedoor, nil]]; 
```

这应该工作，不要使用方括号，不要错过逗号..

# php - 只有 1 个输入隐藏表单传递出 2 个

> ID：15310960
> 
> 赞同：0
> 
> 时间：2013-03-09T13:00:37.217
> 
> 标签：php, html

我遇到了这个奇怪的问题，我正在尝试跟踪用户的 + 关键字的位置并即时重定向。

问题是我从 2 个表单 $from 中只得到 1 个隐藏输入，但没有关于 kw 的任何信息) 从来没有他们两个？怎么了？

我是这样设置的：

```
 if (isset($_GET['keyword']) && $_GET['keyword']==$keyword){   

        echo '<html><head></head><body><form action="' . 'http://' . $mainpage . '" method="post" id="form1">

<input type="hidden"  name="from" value="' . $source . '" /></form>
<input type="hidden"  name="kw" value="' . $keyword . '" /></form>

<script language="JavaScript"> 
    document.getElementById(\'form1\').submit();</script></body></html>';
        return true; 
        exit();
} 
```

我使用 $from 或 $kw 检索它，它只适用于谁是第一个 第二个 就像不存在

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T13:02:10.020

您`</form>`在第一个输入框之后结束了标记。因此表单在那里结束并且不会提交$kw。

# java - JDialog vs JOptionPane vs JPanel 正确调整屏幕大小

> ID：15310963
> 
> 赞同：2
> 
> 时间：2013-03-09T13:00:44.780
> 
> 标签：java, swing, screen-resolution, joptionpane, jdialog

当我需要向用户展示一些带有保存或取消按钮的非常复杂的界面并且需要这个界面来正确处理不同的显示器分辨率时，我遇到了无穷无尽的问题。例如，假设这个接口需要在一个 1280 x 768 的显示器中容纳 17 个 JTextField 和一个可调整大小的 JTextArea（我的 13 英寸笔记本电脑的垂直尺寸为 760 像素）。

这是一个SSCCE：

```
import java.awt.*;
import javax.swing.*;

public class OptionPanePanel extends JFrame
{
    private static Container layoutComponents(String title, float alignment)
    {
        JPanel container = new JPanel();
        BoxLayout layout = new BoxLayout(container, BoxLayout.Y_AXIS);
        container.setLayout(layout);

        for (int i = 0, n = 7; i < n; i++)
        {
            JTextField jtextField= new JTextField("jtextfield "+i, n);
            jtextField.setAlignmentX(alignment);
            container.add(jtextField);
            container.add( new javax.swing.Box.Filler(new java.awt.Dimension(0, 20), new java.awt.Dimension(0, 20), 
                    new java.awt.Dimension(32767, 20)));
        }
        JTextArea jTextArea = new JTextArea(15, 30);
        container.add(jTextArea);
        for (int i = 6, n = 13; i < n; i++)
        {
            JTextField jtextField= new JTextField("jtextfield "+i, n);
            jtextField.setAlignmentX(alignment);
            container.add(jtextField);
            container.add( new javax.swing.Box.Filler(new java.awt.Dimension(0, 20), new java.awt.Dimension(0, 20), 
                    new java.awt.Dimension(32767, 20)));
        }
        return container;
    }

    public static void main(String args[])
    {
        Container panel1 = layoutComponents("Left", Component.LEFT_ALIGNMENT);
        JOptionPane.showConfirmDialog(
            null, panel1, "addRecord", JOptionPane.OK_CANCEL_OPTION, JOptionPane.PLAIN_MESSAGE);  
    }
} 
```

现在我希望上面的例子表现得这样：

1.  窗口大小调整不裁剪任何内容
2.  根据显示器的分辨率，窗口的大小会有所不同。
3.  我不必静态指定 maximumSize、MinimumSize 和 preferredSize（例如使用 NetBeans GUI 编辑器），因此每次我必须进行大量测试才能找出正确的大小
4.  JtextArea 根据最大​​垂直分辨率垂直调整自身大小。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T13:47:59.323

您可以将选项窗格添加到对话框中，如此[处](https://stackoverflow.com/a/12451673/230513)和[此处](http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html#stayup)所示。

顺便说一句，调用`setSize()` *after* `pack()`。

附录：这是您的[sscce](http://sscce.org/)的一个变体，它将选项窗格放置在一个滚动窗格中，该窗格具有基于屏幕几何形状的初始大小，如此[处所示](https://stackoverflow.com/q/3680221/230513)。

![图片](../Images/fc14e550b57fc727104332dbbce6dc5c.png)

```
import java.awt.*;
import javax.swing.*;

public class OptionPanePanel extends JFrame {

    private static Container layoutComponents(String title, float alignment) {
        JPanel container = new JPanel();
        BoxLayout layout = new BoxLayout(container, BoxLayout.Y_AXIS);
        container.setLayout(layout);

        for (int i = 0, n = 7; i < n; i++) {
            JTextField jtextField = new JTextField("jtextfield " + i, n);
            jtextField.setAlignmentX(alignment);
            container.add(jtextField);
            container.add(createFiller());
        }
        JTextArea jTextArea = new JTextArea(15, 30);
        container.add(jTextArea);
        for (int i = 6, n = 13; i < n; i++) {
            JTextField jtextField = new JTextField("jtextfield " + i, n);
            jtextField.setAlignmentX(alignment);
            container.add(jtextField);
            container.add(createFiller());
        }
        return container;
    }

    private static Box.Filler createFiller() {
        return new Box.Filler(new Dimension(0, 20), new Dimension(0, 20),
            new Dimension(Short.MAX_VALUE, 20));
    }

    public static void main(String args[]) {
        Container panel = layoutComponents("Left", Component.LEFT_ALIGNMENT);
        final Dimension screenSize = Toolkit.getDefaultToolkit().getScreenSize();
        JScrollPane jsp = new JScrollPane(panel){

            @Override
            public Dimension getPreferredSize() {
                return new Dimension(320, 2 * screenSize.height / 3);
            }
        };
        JOptionPane optPane = new JOptionPane();
        optPane.setMessage(jsp);
        optPane.setMessageType(JOptionPane.PLAIN_MESSAGE);
        optPane.setOptionType(JOptionPane.OK_CANCEL_OPTION);
        JFrame f = new OptionPanePanel();
        f.setDefaultCloseOperation(EXIT_ON_CLOSE);
        f.add(optPane);
        f.pack();
        f.setLocationByPlatform(true);
        f.setVisible(true);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T17:19:42.183

> 我怎样才能显示类似上面的内容，以便：

我不知道那是什么意思。发布您的 SSCCE，向我们准确展示您遇到的问题。

这对我来说很好：

```
import java.awt.*;
import javax.swing.*;

public class OptionPanePanel extends JFrame
{
    public OptionPanePanel()
    {
        JPanel panel = new JPanel( new BorderLayout() );
        JPanel north = new JPanel();
        north.add( new JTextField(10) );
        north.add( new JTextField(10) );
        north.add( new JTextField(10) );
        north.add( new JTextField(10) );
        north.add( new JTextField(10) );
        north.add( new JTextField(10) );
        north.add( new JTextField(10) );

        JTextArea textArea = new JTextArea(5, 20);

        panel.add(north, BorderLayout.NORTH);
        panel.add(new JScrollPane(textArea));

        int result = JOptionPane.showConfirmDialog(
            this, panel, "addRecord", JOptionPane.OK_CANCEL_OPTION, JOptionPane.PLAIN_MESSAGE);
    }

    public static void main(String[] args)
    {
        JFrame frame = new OptionPanePanel();
        frame.setDefaultCloseOperation( EXIT_ON_CLOSE );
        frame.pack();
        frame.setVisible(true);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T12:52:52.820

谢谢你的回答，到目前为止，我提出了这个解决方案：获取监视器高度，如果小于 1024，则在 JscrollPane 中显示一个小对话框（感谢垃圾神指向它），否则显示一个标准高度的普通对话框（我不幸的是，必须通过试验来计算）

```
import java.awt.*;
import javax.swing.*;

public class OptionPanePanel extends JFrame
{

    private static Container layoutComponents(String title, float alignment)
    {
        JPanel container = new JPanel();
        BoxLayout layout = new BoxLayout(container, BoxLayout.Y_AXIS);
        container.setLayout(layout);

        for (int i = 0, n = 7; i < n; i++)
        {
            JTextField jtextField = new JTextField("jtextfield " + i, n);
            jtextField.setAlignmentX(alignment);
            container.add(jtextField);
            container.add(createFiller());
        }
        JTextArea jTextArea = new JTextArea(15, 30);
        container.add(jTextArea);
        for (int i = 6, n = 13; i < n; i++)
        {
            JTextField jtextField = new JTextField("jtextfield " + i, n);
            jtextField.setAlignmentX(alignment);
            container.add(jtextField);
            container.add(createFiller());
        }
        return container;
    }

    private static Box.Filler createFiller()
    {
        return new Box.Filler(new Dimension(0, 20), new Dimension(0, 20),
                new Dimension(Short.MAX_VALUE, 20));
    }

    public static void main(String args[])
    {
        Container panel = layoutComponents("Left", Component.LEFT_ALIGNMENT);
        /*Let's check the monitor height in multi monitor setup */
        GraphicsDevice gd = GraphicsEnvironment.getLocalGraphicsEnvironment().getDefaultScreenDevice();
        int monitorHeight = gd.getDisplayMode().getHeight();
        int result;
        if (monitorHeight <= 1024)
        {
            final Dimension preferredDimension = new Dimension(500, monitorHeight - 110);
            panel.setPreferredSize(preferredDimension);
            JScrollPane jsp = new JScrollPane(panel)
            {
                @Override
                public Dimension getPreferredSize()
                {
                    return new Dimension(500, 700);
                }
            };
            result = JOptionPane.showOptionDialog(null, jsp,
                    "",
                    JOptionPane.OK_CANCEL_OPTION,
                    JOptionPane.PLAIN_MESSAGE,
                    null,
                    new String[]
                    {
                        ("save"), ("cancel")
                    }, // this is the array
                    "default");
        }
        else
        {
            final Dimension preferredDimension = new Dimension(500, 700);
            panel.setPreferredSize(preferredDimension);
            result = JOptionPane.showOptionDialog(null, panel,
                    "",
                    JOptionPane.OK_CANCEL_OPTION,
                    JOptionPane.PLAIN_MESSAGE,
                    null,
                    new String[]
                    {
                        ("save"), ("cancel")
                    }, // this is the array
                    "default");
        }

        if (result == JOptionPane.OK_OPTION)
        {
            //do something
        }
    }
} 
```

# html - CSS 布局问题

> ID：15310965
> 
> 赞同：0
> 
> 时间：2013-03-09T13:01:01.160
> 
> 标签：html, css

我的 CSS 代码有问题。我不希望我的网站中有任何 srcollbars，我希望页脚留在底部。我认为高度和位置值有问题，但我不明白。希望有人可以帮助我。

**HTML**

```
<div class="content">

  <nav>
    <ul class"nav">
      <li><a href="photo.html">Photo</a></li>
      <li><a href="video.html">Video</a></li>
      <li><a href="gear.html">Gear</a></li>
      <li><a href="contact.html">Contact</a></li>
    </ul>
  </nav>

  <div class="mainContent">
    <article class="article">
     <h3>News</h3>
      <p>This site is currently under construction. Please revisit soon.</p>
    </article>
  tsdfsdfsdfsdfsdfsdf</div>

  <footer>
  © <a href="index.html">MAREYUS PICTURES</a> - all rights reserved </footer>

</div> 
```

**CSS**

```
 html{
        height:100%;
        padding:0;
        margin:0;
        /* overflow-x: hidden;
        overflow-y: hidden; */
        background: url(../images/Distortion_Symmetry_Object.jpg) no-repeat center center fixed; 
        -webkit-background-size: cover;
        -moz-background-size: cover;
        -o-background-size: cover;
        background-size: cover;
    }

    body{
        height:100%;
        padding:0;
        margin:0;
    }

    .content{
        position:absolute;
        height:100%;
        width:100%;
        margin:0;
        padding:0;
    }

    nav{
        background-color:#000;
        margin-top:10px;
        height:15px;
        padding:10px;
        color:#FFF;
    }

    .mainContent{
        position: relative;
        height:100%;
        background-color:rgba(0,102,204,1);
        overflow:hidden;
    }

    .article{
        position:absolute;
        right:0;
        bottom:0;
        width:150px;
        height:350px;
        background:#333;
        color:#FFF;
        padding:10px;
        text-align:center;
    }

    footer{
        position:absolute;
        bottom:0;
        width:100%;
        background-color:rgba(255,255,255,1);
        text-align:center;
    }

    nav a:active, nav a:hover, nav a:focus nav a:visited{
        color: #E58459;
    }

    ul{
        list-style-type: none;
        margin: auto;
        margin-right:50px;
    }

    ul a{
        padding-right: 32px;
        padding-left: 32px;
        text-decoration: none;
        color:#FFF;
    }

    li{
        float:right;
    }

    li:nth-child(n+1):before {
        content: " // ";
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T13:10:17.830

只需更改您的`.mainContent`css，如下所示：

```
.mainContent{
    position: absolute;  /*replace with relative */
    top: 45px; /* height :15px; margin-top: 10px; padding:10px; (15 + 10 + 20) of the "nav" */
    bottom: 0; /* give the value equal to the height of the "footer" */
    left: 0;
    right: 0;
    background-color: rgba(0,102,204,1);
    overflow: hidden;
} 
```

**[工作箱](http://jsbin.com/imagaf/2/edit)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T15:21:27.860

请在 CSS 文件中进行一些更改。**删除 .mainContent 的所有 css 代码**。我所做的更改放在 left:0 的页脚中，好像不放置它，然后页脚会在 IE(<=7) 浏览器中引起问题。

```
 .content{
    position:relative;
    min-height:100%;
    width:100%;
    margin:0;
    padding:0;
float:left;
width:100%;
background-color: rgba(0,102,204,1);
}

 nav{
    background-color:#000;
    height:15px;
    padding:10px;
    color:#FFF;
}
 footer{
    position:absolute;
    bottom:0;
    width:100%;
left:0;
    background-color:rgba(255,255,255,1);
    text-align:center;
} 
```

# clojure - 让 cljs repl 工作的跨域问题

> ID：15310974
> 
> 赞同：0
> 
> 时间：2013-03-09T13:01:36.123
> 
> 标签：clojure

我正在尝试让 cljs repl 正常工作。但是我在 chrome 的 js 控制台中收到以下错误-

`Unsafe JavaScript attempt to access frame with URL http://0.0.0.0:3000/ from frame with URL http://localhost:9000/repl? ....... Domains, protocols and ports must match.`

我在 clj repl 中使用`(ring.util.serve/serve app)`. 这会打开一个浏览器`http://0.0.0.0:3000`

如何解决跨域问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T16:56:53.333

在这个上下文中`0.0.0.0`是一个特殊的地址，当它传递给套接字绑定时，意味着您要监听机器上存在的*所有*地址。

要解决您的问题，您应该没问题，如果您使用 URL 打开浏览器，`http://localhost:3000`那么 javascript 和托管它的框架将在同一个域中

# linq-to-xml - LINQ to XML 只返回第一个对象

> ID：15310978
> 
> 赞同：0
> 
> 时间：2013-03-09T13:01:50.540
> 
> 标签：linq-to-xml

XML：

```
<servers ver="1" namespace="RWT.Direct.Processors.Public.ROCTP">
    <procedures>
        <procedure name="Func1" returnType="">
            <params>
                <param name="p1" type="int" />
                <param name="p2" type="int" keyword="out" />
            </params>
        </procedure>
        <procedure name="Func2" returnType="int">
            <params>
                <param name="x" type="int" />
            </params>
        </procedure>
    </procedures>
</servers> 
```

我的代码：

```
FileStream fs = new FileStream(@"D:\DIRECT\bin\base\Servers\Test.xml", FileMode.Open, FileAccess.Read, FileShare.ReadWrite);
StreamReader sr = new StreamReader(fs);
var doc = XDocument.Parse(sr.ReadToEnd());

List<Procedure> procedures = (from _api in doc.Element("servers").Descendants("procedures")
            select new Procedure
            {
                Name = _api.Element("procedure").Attribute("name").Value,
                ReturnType = _api.Element("procedure").Attribute("returnType").Value
            }).ToList();

  foreach (var item in procedures)
  {
      Console.WriteLine(item.Name + " " + item.ReturnType);
  } 
```

我只得到“Func1”回来。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T13:04:08.693

您只得到一个结果，因为您正在查询名为“Procedures”的元素，该元素在您的文档中只出现过一次。检查此查询：

```
List<Procedure> procedures = (from _api in doc.Element("servers").Descendants("procedure")
                              select new Procedure
                              {
                                  Name = _api.Attribute("name").Value,
                                  ReturnType = _api.Attribute("returnType").Value
                              }).ToList();

foreach (var item in procedures)
{
    Console.WriteLine(item.Name + " " + item.ReturnType);

    foreach (var item1 in item.ParamList)
    {
        Console.WriteLine("\t" + item1.Name + " " + item1.Type + " " + item1.Keyword);
    }
} 
```

但是，您正在尝试获取`item.ParamList`您的查询从未设置的内容！

# css - jQuery UI Themeroller 生成的对话框的 CSS 不起作用

> ID：15310986
> 
> 赞同：0
> 
> 时间：2013-03-09T13:02:33.773
> 
> 标签：css, jquery-ui, themeroller

我整理了一个页面，显示了[这里](http://www.eventidewebdesign.com/public/contactFormTest/contact.html)发生的事情。该对话框是对已发送电子邮件的确认，因此您需要填写表格才能弹出对话框。（我想尽可能多地保留原始功能。）

我使用 Themeroller 生成了一个 UI 主题，而我正在使用的对话框**完全没有**任何样式。以至于对话框是完全透明的，对话框中显示的只是对话框 div 中的文本和无样式的关闭按钮。

我尝试了压缩和未压缩的 UI css 和 js 文件，没有任何变化。

我在同一站点的其他地方使用了一些 UI 效果（突出显示等），它们工作正常。

这是 Themeroller 生成器的问题还是我遗漏了什么？

现在我可以只显示一个带有确认消息的标签，但我真的很想使用一个对话框。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T14:00:25.563

您还没有在任何地方链接到 jQuery UI css。这是我注入基本 jQuery UI 主题后的页面截图。

![链接 jQuery UI CSS 的示例](../Images/c1fada8d4a1b08aaf5fb761a475dbf1c.png)

# c++ - 提供方法指针和派生类型对象时 std::bind 的一致性

> ID：15310989
> 
> 赞同：4
> 
> 时间：2013-03-09T13:02:46.790
> 
> 标签：c++, c++11, language-lawyer, stdbind

这个问题基本上是我给出的[这个](https://stackoverflow.com/a/15264126/2073257)答案的后果。我刚刚意识到标准中的措辞似乎省略了一些情况。考虑这段代码：

```
#include <iostream>
#include <functional>

struct foo
{
  void f(int v) { std::cout << v << std::endl; }
};

struct bar : foo {};

int main()
{
  bar obj;
  std::bind(&foo::f, obj, 1)();
} 
```

该标准在 20.8.9.1.2 中描述了`std::bind`调用它时的效果和发生的情况。它转发到20.8.2，相关部分是：

> ### 20.8.2 要求 [func.require]
> 
> ¹按如下方式定义*INVOKE ：*`(f, t1, t2, ..., tN)`
> 
> — `(t1.*f)(t2, ..., tN)`when`f`是指向类的成员函数的指针，`T`并且`t1`是类型对象`T`或对类型对象的`T`引用或对派生于的类型对象的引用`T`；
> 
> — `((*t1).*f)(t2, ..., tN)`when`f`是指向类的成员函数的指针，`T`并且`t1`不是上一项中描述的类型之一；
> 
> —`t1.*f`当`N == 1`and`f`是指向类的成员数据的指针`T`并且`t1`是类型对象`T`或对类型对象的`T`引用或对派生于的类型对象的引用时`T`；
> 
> — `(*t1).*f`when`N == 1`和`f`是指向类的成员数据的指针，`T`并且`t1`不是上一项中描述的类型之一；
> 
> —`f(t1, t2, ..., tN)`在所有其他情况下。

读到这里，第一个列表项似乎允许三种情况：

*   `t1`是类型的对象`T`
*   或对类型对象的引用`T`
*   或对派生自的类型的对象的引用`T`

但在我的例子中，两者都不是。它是派生自 的类型`T`，但没有引用。上面列出的情况不应该是：

*   `t1`是类型的对象`T`
*   或派生自的类型的对象`T`
*   或对类型对象的引用`T`
*   或对派生自的类型的对象的引用`T`

当然，这同样适用于 20.8.2 中的第三个列表项。

**问题 1：**由于 GCC 和 Clang 都接受我的代码，我想知道这是否是违反标准的缺陷报告，或者我只是读错了。

**问题 2：**使用多重/虚拟继承，即使一个类型派生自`T`，也可能无法简单地调用`(t1.*f)(...)`它，对吗？这也是我应该关注的事情，还是标准在给定的上下文中清楚地定义了“源自”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T13:22:17.907

C++11 标准的第 20.8.9.1.3 段定义了以这种方式调用`std::bind()`伪`INVOKE()` *函数*的效果：

> *返回*`g`：具有弱结果类型 (20.8.2)的转发调用包装器。的效果`g(u1, u2, ..., uM)`应为`INVOKE (fd, std::forward<V1>(v1), std::forward<V2>(v2), ..., std::forward<VN>(vN), result_of<FD cv & (V1, V2, ..., VN)>::type)`

请注意，调用`std::forward<>`将始终返回一个**引用类型**，无论是左值引用还是右值引用。根据第 20.2.3/1-2 段，事实上：

> `template <class T> constexpr T&& forward(typename remove_reference<T>::type& t) noexcept;`
> 
> `template <class T> constexpr T&& forward(typename remove_reference<T>::type&& t) noexcept;`
> 
> *返回*：`static_cast<T&&>(t)`

因此，`INVOKE`伪函数（注意：不是`bind()`函数！）将在此处使用引用调用，并且您引用的定义支持这一点。

我相信标准本身从不使用`INVOKE()`伪函数（这只是一些内部形式主义）和派生自`T`.

但是，这并不意味着您不能调用`std::bind()`或其他函数，其定义又是根据`INVOKE()`派生自`T`.

# css - CSS - 没有高度的垂直对齐

> ID：15310990
> 
> 赞同：1
> 
> 时间：2013-03-09T13:02:50.403
> 
> 标签：css, alignment, vertical-alignment, css-tables

我正在尝试在一个高度随宽度变化的框中垂直对齐文本（使其成为一个完美的正方形）。我只是无法让它工作。我有**两个问题**：

1.  我正在尝试垂直对齐“smallbox”类中的文本。
2.  除此之外，我也无法让“文本”类垂直对齐。

这是我的[小提琴](http://jsfiddle.net/RTJGD/)

这是我的CSS：

```
 * {
    margin: 0;
    padding: 0;
}

html, body {
    background: yellow;
    font-size: 2.5vmin;
}

body {
    text-align: center;
}

#container {
    margin: 0 auto;
    width: 100%;
}

.box {
    /*width: 200vmin;*/
    width: 90%;
    margin: 0 auto;
    display: inline-block;
    /*padding-bottom: 5vmin;*/
    padding-bottom: 2.5%;
}
.smallbox {
    position: relative;
    float: left;
    vertical-align: middle;
    width: 16.8%;
    border-radius: 2vmin;
    font-size: 6vmin;
    text-align: center;
    word-wrap: break-word;
    display: table;
    table-layout: fixed;
    color: red;
    background-color: blue;
}
.smallbox b {
    margin-top: 100%;
    display: block;
    zoom: 1.0;
}

.smallbox p {
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    text-decoration: none;
    display: table-cell;
    vertical-align: middle;
}
.content {
    width: 80%;
    min-height: 28vmin;
    background-color: white;
    float: right;
    border-radius: 2vmin;
    font-size: 3.5vmin;
    position: relative;
    padding-bottom: 5vmin;
}
.content:before {
    content: ' ';
    position: absolute;
    width: 0;
    height: 0;
    left: -4.75vmin;
    top: 13.5vmin;
    border-top: 3vmin solid transparent;
    border-bottom: 3vmin solid transparent; 
    border-right: 5vmin solid white;
}
.title {
    height: 5vmin;
    padding: .75vmin 1.5vmin;
    border-radius: 2vmin 2vmin 1vmin 1vmin;
    margin: .5vmin;
    font-weight: bold;
    text-align: left;
    color: red;
    background-color: blue;
}
.text {
    padding: .5vmin 2vmin;
    text-align: center;
}
.left {
    padding: .5vmin 2vmin;
    position: absolute;
    bottom: 0;
    font-weight: bold;
}
.right {
    padding: .5vmin 2vmin;
    position: absolute;
    bottom: 0;
    right: 0;
    font-weight: bold;
    border-radius: 2vmin 2vmin 2vmin 2vmin;
    margin: .5vmin;
    color: red;
    background-color: blue;
}
.right a {
    text-decoration: none;
}
.arrowleft {
    width: 0; 
    height: 0; 
    border-top: 10px solid transparent;
    border-bottom: 10px solid transparent; 
    border-right:10px solid blue; 
} 
```

这是我的 HTML：

```
 <!DOCTYPE html>
<html><head>
        <link rel="stylesheet" href="box.css">
    </head>
<body>
<div id="container">
        <div class="box">
                <div class="smallbox"><b></b><p>Onceuponatimeinafarawayland</p></div>
                <div class="content">
                    <div class="title">Some Title</div>
                    <div class="text"><p>This is just some example text here</p>
</div>
                    <div class="left">Left</div>
                    <a href=""><div class="right">Right</div></a>
                </div>
            </div>

</div>

</body></html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T18:47:49.293

添加这个CSS：

```
.smallbox p:before{
content:" ";
display:inline-block;
vertical-align:middle;
height:100%;
width:1px;
}
.smallbox p span{
display:inline-block;
vertical-align:middle;
width:99%;
} 
```

归功于[保罗](http://www.sitepoint.com/forums/showthread.php?996098-Vertical-Align-with-no-Height&p=5349227&viewfull=1#post5349227)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T13:20:54.203

您在类中使用强制它显示块`position: absolute;`的段落`.smallbox`，因此垂直对齐将无效。在下面的小提琴中，我使用该`line-height`属性来对齐`.smallbox`文本，尽管我认为这不适用于动态高度。

我还通过添加和使用垂直对齐的值来 使`.text`类段落[居中。](http://jsfiddle.net/RTJGD/3/)只需根据您的需要进行调整。`display: inline-block;``px`

# windows - Clang 启动慢（使用 MinGW）

> ID：15310996
> 
> 赞同：3
> 
> 时间：2013-03-09T13:03:16.467
> 
> 标签：windows, mingw, llvm, clang

使用 MinGW 和 CMake，我通过 SVN 或使用已发布的源代码 (3.2) 编译了 LLVM、Clang 和 Compiler-RT。

我已修改 InitHeaderSearch.cpp（在 tools/clang/lib/frontend 中）以查找 GCC 4.7.2 标头。

我已将编译选项设置为 Release 并禁用断言。

Clang 似乎工作正常，但需要 4-5 秒才能启动：即使在控制台中输入“clang --version”也可以做到这一点。编译一个项目需要很多时间。

我错过了什么？我使用了 rubenvb 的旧 MinGW+Clang 构建（GCC 4.6），它没有这个问题。我需要使用任何编译标志吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T23:45:56.600

这个问题在这里讨论[http://lists.cs.uiuc.edu/pipermail/cfe-dev/2012-April/020651.html](http://lists.cs.uiuc.edu/pipermail/cfe-dev/2012-April/020651.html)

AFAIK 问题是由大型重定位表和低效的 MinGW 实现引起的 ( [http://sourceforge.net/p/mingw/bugs/1747/](http://sourceforge.net/p/mingw/bugs/1747/) )。

将*-static*标志添加到链接器标志应该可以解决此问题。你应该调用 cmake

> -DCMAKE_EXE_LINKER_FLAGS=-静态 -DCMAKE_MODULE_LINKER_FLAGS=-静态