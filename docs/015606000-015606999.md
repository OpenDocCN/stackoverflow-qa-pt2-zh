# StackOverflow 问答 15606000-15606999

# wordpress - 缺少 WordPress v3.5.1 可折叠菜单

> ID：15606003
> 
> 赞同：0
> 
> 时间：2013-03-25T00:46:04.937
> 
> 标签：wordpress, web, menu

我有管理员角色，但缺少可折叠菜单（左侧面板），我尝试创建另一个管理员但仍然无济于事。当我将 WP 文件键入为 URL 时，我可以访问它（例如[http://xxx-xxx.com/wp-admin/plugins.php](http://xxx-xxx.com/wp-admin/plugins.php)）请帮助我还是个新手。

非常感谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T01:28:14.027

您可能需要检查已安装主题的 functions.php 文件。查看是否有任何以该行开头的 PHP 代码`if(is_admin())`。其中之一可能会影响管理区域，或者用于前端的功能可能会与管理区域拧在一起，如果`(!is_admin())`包裹在它周围则需要。你熟悉这种 WordPress 的东西吗？

注意：我们在评论中讨论了这个问题，所以我在这里正式添加了答案。

（主题的functions.php有`remove_menu()`一行，被注释掉以恢复管理侧边栏菜单。）

# java - 渲染 VBO 时出错

> ID：15606008
> 
> 赞同：0
> 
> 时间：2013-03-25T00:46:33.607
> 
> 标签：java, opengl, rendering, lwjgl

使用以下方法使用 vbos 进行渲染，我收到此错误：

```
Exception in thread "main" org.lwjgl.opengl.OpenGLException: Cannot use offsets when Array Buffer Object is disabled 
```

渲染方法：

```
 GL15.glBindBuffer(GL15.GL_ARRAY_BUFFER, this.vertexHandle);
    GL11.glVertexPointer(3, GL11.GL_FLOAT, 0, 0L);

    GL15.glBindBuffer(GL15.GL_ARRAY_BUFFER, this.normalHandle);
    GL11.glNormalPointer(GL11.GL_FLOAT, 0, 0L);

    GL11.glEnableClientState(GL11.GL_VERTEX_ARRAY);
    GL11.glEnableClientState(GL11.GL_NORMAL_ARRAY);

    GL11.glDrawArrays(GL11.GL_TRIANGLES, 0, this.faces.size() * 3);

    GL11.glDisableClientState(GL11.GL_VERTEX_ARRAY);
    GL11.glDisableClientState(GL11.GL_NORMAL_ARRAY);

    GL15.glBindBuffer(GL15.GL_ARRAY_BUFFER, 0); 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-12T11:59:55.540

这意味着数组缓冲区对象（在您的情况下为 vertexHandle 或 normalHandle）未链接到任何带有数据的源。尝试检查数组缓冲区对象的初始化。

# entity-framework - EF Code First 配置 - 连接表困境

> ID：15606011
> 
> 赞同：0
> 
> 时间：2013-03-25T00:46:56.117
> 
> 标签：entity-framework, ef-code-first, code-first

我有以下 2 个实体关系，我在正确映射时遇到了很多麻烦（使用流利的 api）

基本上，a`User`既可以是 的贷方，也可以是借方`Item`。也就是说`Item`可以被多个`User`s借用，但只能被一个s拥有`User`

```
public class User {
    public int UserId { get; set; }

    public virtual ICollection<Item> ItemsOwned { get; set; }
    public virtual ICollection<Item> ItemsBorrowed{ get; set; } 
}

public class Item {
    public int ItemId { get; set; }
    public virtual User ItemOwner{ get; set; } 
    public virtual ICollection<User> ItemBorrowers { get; set; }
} 
```

看起来我需要一对多和多对多。我尝试了无数种配置，我想我只是让自己感到困惑。

如何正确处理人际关系？我是否需要连接表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T01:37:19.113

您需要像这样创建映射，

```
 protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {

        modelBuilder.Entity<Item>().HasRequired(i=>i.ItemOwner).WithMany(u=>u.ItemsOwned );          
        modelBuilder.Entity<Item>().HasMany(i=>i.ItemBorrowers ).WithMany(u=>u.ItemsBorrowed);          
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T01:50:51.090

乍一看，这看起来不错（如果它足够直，@Jayantha 建议应该做什么） - 尽管通常你一次借一个“项目”（所以那也是一对多的）。

如果您正在寻找“借用”项目的历史记录（这使其成为多对多） - 那么您需要制作一个带有附加标志（如`active`等）的手工索引表。

对于更复杂的场景，请查看我刚才制作的这些详细示例 - 它具有您可能需要的大部分映射。

[使用codefirst或fluent API与同一实体的多对多（连接表）关系？](https://stackoverflow.com/questions/10041695/many-to-many-join-table-relationship-with-the-same-entity-with-codefirst-or-fl/10048992#10048992)

[联接表中的 Code First Fluent API 和导航属性](https://stackoverflow.com/questions/10154512/code-first-fluent-api-and-navigation-properties-in-a-join-table/10155439#10155439)

[带有附加数据的 EF 代码优先多对多](https://stackoverflow.com/questions/10199158/ef-code-first-many-to-many-with-additional-data/10199455#10199455)

# php - 如何使用 PHP 向已创建的元素添加属性？

> ID：15606012
> 
> 赞同：-1
> 
> 时间：2013-03-25T00:46:57.387
> 
> 标签：php, xml, dom

我有一个已经制作好的 xml 表，我花了几个小时在网上寻找一种向某些元素添加属性的方法。任何帮助都会很棒！如果您需要更多信息（例如 XML 的一部分），请告诉我，我很乐意提供所需的信息！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T01:25:03.423

使用 simplexml 完成工作，使用 DOM 很好地输出它：

```
$xmlstr = <<<XML
<root>
    <fruit origin="Brazil">Banana</fruit>
    <fruit origin="Germany">Apple</fruit>
    <fruit origin="Spain">Tomato</fruit>
</root>
XML;

$xml = simplexml_load_string($xmlstr);

$xml->fruit[0]->addAttribute("state","fresh"); // add state="fresh" to Banana 
```

请参阅这篇文章，了解如何通过将 $xml 传递给 DOM 来生成结构化输出： [PHP simpleXML 如何以格式化方式保存文件？](https://stackoverflow.com/questions/798967/php-simplexml-how-to-save-the-file-in-a-formatted-way)

# angularjs - AngularJS（ng-grid）按原始索引排序

> ID：15606013
> 
> 赞同：1
> 
> 时间：2013-03-25T00:46:57.850
> 
> 标签：angularjs, ng-grid

最初渲染网格时，它遵循其后面的列表（模型）的顺序。在按列排序后，如何恢复到相同的自然顺序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T14:12:58.003

在 ng-repeater 中，您可以将自定义数据属性设置为`{{$index}}`

```
<li class="sortable" ng-repeat="item in items" data-index="{{$index}}"> 
```

然后，当操作 DOM 以生成列排序时，呈现时的索引将保留在`data-index`

# c# - (N)Hibernate Criteria：对多个不同的列求和

> ID：15606019
> 
> 赞同：1
> 
> 时间：2013-03-25T00:48:03.010
> 
> 标签：c#, hibernate, nhibernate, orm, criteria

关于 SO 的措辞相似的问题似乎都不匹配，并且谷歌搜索几乎指向 SO，所以让我们试试这个：

我有一个`JournalEntry`看起来像这样的实体类：

```
public partial class JournalEntry
{
    public virtual Guid JournalEntryId { get; set; }

    public virtual Account Account { get; set; }

    public virtual decimal DebitAmount { get; set; }

    public virtual decimal CreditAmount { get; set; }

    [NotNull]
    public virtual DateTime EffectiveDate { get; set; }

    [NotNull]
    public virtual DateTime PostingDate { get; set; }

    public virtual UserProfile PostedBy { get; set; }

    [FullTextIndexed]
    public virtual string Notes { get; set; }

    public virtual Amortization Amortization { get; set; }

    public virtual ExpenseCategories ExpenseCategory { get; set; }

    [Index]
    public virtual bool IsClosed { get; set; }
} 
```

我还有一个简单的类来保存交易摘要，如下所示：

```
public class JournalEntrySummary
{
    public decimal Credits { get; set; }
    public decimal Debits { get; set; }
} 
```

我想做的是编写一个 Criteria 查询，它将返回 Credits 属性和 Debits 属性的总和。IOW，我想要一些形状像这个 SQL 查询的东西：

```
select
    sum(creditamount) as Credits,
    sum(debitamount) as Debits
from 
    journalentries
where
    ... 
```

...并让它填充我的`JournalEntrySummary`对象。我看过很多关于如何做一列的例子，甚至还有一些将两列加在一起的例子，但没有收集两个不同的摘要并将它们转储到非域对象中的例子。

这可能吗？我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T13:07:09.613

查看标准查询文档[http://nhibernate.info/doc/nh/en/index.html#querycriteria-projection](http://nhibernate.info/doc/nh/en/index.html#querycriteria-projection)，有一些示例可以回答您的问题。

对于你的例子，你应该试试这个

```
// using NHibernate.Criterion;
// using NHibernate.Transform;

session.CreateCriteria<JournalEntry>()
   .SetProjection(
       Projections.Sum<JournalEntry>(x => x.DebitAmount).As("Debits"),
       Projections.Sum<JournalEntry>(x => x.CreditAmount).As("Credits"),
       // you can use other aggregates
       // Projections.RowCount(),
       // Projections.Max<JournalEntry>(x => x.EffectiveDate)
    )
    .SetResultTransformer(Transformers.AliasToBean<JournalEntrySummary>())
    .UniqueResult<JournalEntrySummary>(); 
```

# javascript - 突出显示构建谷歌地图 v3

> ID：15606020
> 
> 赞同：3
> 
> 时间：2013-03-25T00:48:08.317
> 
> 标签：javascript, google-maps, google-maps-api-3

我试图使用谷歌地图 v3 api 突出显示地图中的特定建筑物。我想知道是否有人知道如何做到这一点。我一直在浏览 google api 文档，目前一无所获。

例如： http: [//goo.gl/maps/GyrDB](http://goo.gl/maps/GyrDB) - 这是曼哈顿部分的地图，您可以看到 3d 建筑物。我试图在悬停时突出显示特定的。

感谢：D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T03:08:00.217

如果您有关于建筑物位置的信息，那么您可以使用多边形来突出显示它。如果您没有关于建筑物位置的信息，那么您可能不走运。Google Maps API 没有任何方式与该级别的地图进行交互。

现在，我想你*可以*做的一件事是：

*   下载谷歌地图图块，
*   在图像中找到用户点击的点，
*   用一些可怕的颜色对该点进行泛光填充，
*   设置清除所有不是颜色的像素，
*   将该图像覆盖在地图顶部

您还需要对位于多于一格的建筑物保持聪明。

但是，这可能会使您违反使用条款。我知道他们不允许修改艺术品；我不确定这是否算作修改艺术品；您需要仔细查看使用条款，也许可以咨询律师。或者问谷歌。（别问我，我不是律师。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-05T13:32:57.683

在许多国家/地区，每个建筑物都是一个地籍地块，并且由国家机构免费提供的 Web 地图服务 (WMS) 图层显示它们。

使用这些图层，您可以获得建筑多边形坐标。例如：[https ://snag.gy/WtU7ZT.jpg](https://snag.gy/WtU7ZT.jpg)

# javascript - 未转义 & 或未知实体 "&&" javascript

> ID：15606021
> 
> 赞同：2
> 
> 时间：2013-03-25T00:48:10.113
> 
> 标签：javascript, entity

这是我作业的一部分，但我不知道出了什么问题，任何帮助将不胜感激

```
var InputNum = prompt("Please enter a number between 50 and 100:", "");
if (isNaN(InputNum)) {
    if (InputNum.match(/one|two|three|four|five|six|seven|eight|nine|ten/)) {
        alert("while this is a number, it's not really a number to me.");
    } else {
        alert(InputNum + " doesn't appear to be a number.");
    }
} else if (InputNum >= 99 && InputNum <= 51); {
    alert("theat number, " + inputNum + ", is not between 50 and 100.");
}
document.write("The user gave a number in the range! " + inputNum + "<br>"); 
```

在第 25 行，它提出了标题所述的警告。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-25T01:02:14.390

HTML 中的字符`&`是为实体保留的，例如`&nbsp;`和`&quot;`。这个错误是抱怨`&`被滥用；这是一个标志，您应该将其写成`&amp;`（这是`&`符号的正确实体），或者您应该将脚本放在不被解释为 HTML 的上下文中（例如 CDATA）。

# javascript - Twitter Bootstrap 日期选择器错误

> ID：15606022
> 
> 赞同：3
> 
> 时间：2013-03-25T00:48:14.597
> 
> 标签：javascript, twitter-bootstrap

我尝试了一切，但无法显示日期选择器。

引导版本 v2.3.1。

最新版本[http://www.eyecon.ro/bootstrap-datepicker/](http://www.eyecon.ro/bootstrap-datepicker/)

HTML：

```
<div class="input-append date" id="dpMonths" data-date="102/2012" data-date-format="yyyy-mm" data-date-viewmode="years" data-date-minviewmode="months">
<input class="" size="16" type="text" value="2013-03" readonly>
<span class="add-on"><i class="icon-calendar"></i></span>

<script src="js/bootstrap-datepicker.js"></script>
<script type="text/javascript">
$(function() {
    $('#dpMonths').datepicker();
});
</script> 
```

Javascript 错误：

未捕获的类型错误：无法读取未定义的属性“fn”

未捕获的 ReferenceError：$ 未定义

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-25T00:57:33.950

您需要包含 jquery 才能使引导日期选择器正常工作

```
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script src="js/bootstrap-datepicker.js"></script> 
```

还要在页面顶部添加引导日期选择器的 CSS 文件。

# javascript - 如何在 Kineticjs 中检查组是否有孩子

> ID：15606024
> 
> 赞同：1
> 
> 时间：2013-03-25T00:48:20.010
> 
> 标签：javascript, html, kineticjs

是否有任何功能可以让我们知道一个组是否有孩子？因为如果我在没有孩子的组中尝试像 Mygroup.getChildren() 一样，我会得到错误。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T11:08:05.380

请检查这个小提琴

[http://jsfiddle.net/LvCmT/](http://jsfiddle.net/LvCmT/)

```
 if(group.getChildren().length==0)
      {
        alert("group doesn't has children");
      }
      else
      {
        //do ur stuff
      } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T11:09:55.727

```
if($(Mygroup).children().length==0)
  {
    alert("group doesn't has children");
  }
else
  {
    //do your stuff
  } 
```

# javascript - 动态更改传单中多边形的颜色？

> ID：15606027
> 
> 赞同：35
> 
> 时间：2013-03-25T00:48:55.513
> 
> 标签：javascript, leaflet

对于熟悉 Leaflet 的人，您知道动态更改多边形颜色的方法吗？例如，采用如下定义的圆：

```
window.circle = L.circle([51.508, -0.11], 500, {
color: 'red',
fillColor: '#ffffff',
    fillOpacity: 0.5
}).addTo(map); 
```

然后稍后，在用户单击界面上某处的按钮后（例如），我想像这样更改圆圈的颜色：

```
window.circle.options.fillColor = "#dddddd"; 
```

代码更改了 window.circle.options.fillColor 的值，但更改不会反映在地图上多边形颜色的更改中。我四处寻找，但没有找到任何东西。有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-03-25T08:16:37.417

`L.Circle`扩展`L.Path`（[http://leafletjs.com/reference.html#path](http://leafletjs.com/reference.html#path)），具有方法`setStyle( <Path options> object )`，您可以将新样式应用为`window.circle.setStyle({fillColor: '#dddddd'});`

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-11-24T06:15:23.130

如果您正在寻找这样的东西：

```
const circle = L.circle([lat, lng], {
   style: style,
   onEachFeature: onEachFeature,
}); 
```

这些选项可用于 geoJson 数据，即：L.geojson()..... :D

所以，对于多边形。尝试，

```
circle.setStyle({
    color: 'red'
}); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-03-20T09:49:23.767

我的地图中有一组多边形，此代码可以动态更改每个多边形的填充颜色：

```
// 'file' is a geojson layer
L.geoJSON(file, {
onEachFeature: colorlayer,
style: {
    color: "#00008c",
    opacity: 0.6,
    fillColor: '#333333',
    fillOpacity: 0
}
}).addTo(map);
function colorlayer(feature, layer) {
layer.on('mouseover', function (e) {
    layer.setStyle({
        fillOpacity: 0.4
    });
});
layer.on('mouseout', function (e) {
    layer.setStyle({
        fillOpacity: 0
    });
}); 
```

}

# java - 使用 StringBuilder 附加字符串

> ID：15606030
> 
> 赞同：-2
> 
> 时间：2013-03-25T00:49:34.353
> 
> 标签：java, android, string, android-spinner, stringbuilder

我正在尝试使用布局获取我在 Spinner 中选择的所有项目。我正在动态创建 Spinner 并将项目动态添加到 Spinner，这就是我在这里使用布局来获取`ChildElement`.

以下是代码：-

```
int count = layout.getChildCount();

StringBuilder jsonString = new StringBuilder();

View v = null;
int j = 1;
for(int i=0; i<count; i++) {
    v = layout.getChildAt(i);

    if(v instanceof Spinner) {
        jsonString.append("["+j+":"+((Spinner) v).getSelectedItem()+"]");

        j++;
    }
} 
```

**问题陈述：-**

这是一个简单的字符串操作问题。

我`5 Spinner`目前有。所以我想像`jsonString`这样。

```
[1:CS,2:EE,3:RE,4:TT,5:UU] 
```

这`CS,EE,RE,TT,UU`是我在我的`5 Spinner`

但是使用我的代码，我`jsonString`的显示是这样的-

```
[1:CS][2:EE][3:RE][4:TT][5:UU] 
```

我怎样才能`jsonString`按照我想要的方式制作。我敢肯定，我使用 append 的方式不正确。

有谁可以帮我离开这里吗？谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T01:06:06.813

解决方案似乎很简单。您已将 '[' 和 ']' 放在 append 的循环中，该循环在每次迭代时都附加方括号。尝试以下（我还没有测试过。）

```
 int count = layout.getChildCount();

    StringBuilder jsonString = new StringBuilder();

    View v = null;
    int j = 1;
    jsonString.append("[");
    for(int i=0; i<count; i++) {
        v = layout.getChildAt(i);

        if(v instanceof Spinner) {
            jsonString.append(j+":"+((Spinner) v).getSelectedItem());

        if (j != count) //if this is not the last spinner
            jsonString.append(",");
        j++;
        }
    }
    jsonString.append("]"); 
```

# java - 这个 .NET 正则表达式组捕获操作如何用 Java 编写？

> ID：15606036
> 
> 赞同：0
> 
> 时间：2013-03-25T00:49:57.757
> 
> 标签：java, .net, regex, regex-group

在 .NET 中，如果我想将字符序列与描述捕获组发生任意次数的模式匹配，我可以编写如下内容：

```
String input = "a, bc, def, hijk";
String pattern = "(?<x>[^,]*)(,\\s*(?<y>[^,]*))*";

Match m = Regex.Match(input, pattern);
Console.WriteLine(m.Groups["x"].Value);

//the group "y" occurs 0 or more times per match
foreach (Capture c in m.Groups["y"].Captures)
{
    Console.WriteLine(c.Value);
} 
```

此代码将打印：

```
a
bc
def
hijk 
```

这看起来很简单，但不幸的是，下面的 Java 代码并没有像 .NET 代码那样做。（这是意料之中的，因为 java.util.regex 似乎没有区分组和捕获。）

```
String input = "a, bc, def, hijk";
Pattern pattern = Pattern.compile("(?<x>[^,]*)(,\\s*(?<y>[^,]*))*");

Matcher m = pattern.matcher(input);

while(m.find())
{
     System.out.println(m.group("x"));
     System.out.println(m.group("y"));
} 
```

印刷：

```
a
hijk

null 
```

有人可以解释如何使用 Java 来完成相同的任务，而无需重新编写正则表达式或使用外部库吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T01:05:40.573

你想要的在java中是不可能的。当同一个组被多次匹配时，只保存该组的最后一次出现。有关更多信息，请阅读 Pattern 文档部分[Groups and capture](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html#cg)。在java中，`Matcher`/`Pattern`用于`String`“实时”迭代 a 。

重复示例：

```
String input = "a1b2c3";
Pattern pattern = Pattern.compile("(?<x>.\\d)*");
Matcher matcher = pattern.matcher(input);
while(matcher.find())
{
     System.out.println(matcher.group("x"));
} 
```

打印（null，因为 * 也匹配空字符串）：

```
c3
无效的

```

没有：

```
String input = "a1b2c3";
Pattern pattern = Pattern.compile("(?<x>.\\d)");
Matcher matcher = pattern.matcher(input);
while(matcher.find())
{
     System.out.println(matcher.group("x"));
} 
```

印刷：

```
a1
b2
c3

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T01:14:23.900

您可以在 Java 中使用 Pattern 和 Matcher 类。略有不同。例如下面的代码：

```
Pattern p = Pattern.compile("(el).*(wo)");
Matcher m = p.matcher("hello world");
while(m.find()) {
  for(int i=1; i<=m.groupCount(); ++i) System.out.println(m.group(i));
} 
```

将打印两个字符串：

```
el
wo 
```

# bash - 在所有用户子目录中查找所有 .htaccess 文件并为其添加一个字符串

> ID：15606038
> 
> 赞同：1
> 
> 时间：2013-03-25T00:50:47.580
> 
> 标签：bash, .htaccess, shell, findandmodify

我想在“public_html”（但不是public_html）下的一整串可能的子目录中找到所有用户帐户的所有“.htaccess”文件（如果文件存在，如果不创建）。基本上可以在任何远程类似于可能包含图像的目录中找到它。

这是我的代码：

```
#!/bin/bash 
cat /etc/domainusers | cut -f1 -d: | while read USER; do
find /home/$USER/public_html/ -type d -regex ".*\/public_html\/.*\(img.\|pic.\|pics.\|image.\|images.\|Image.\|Images.\|Pic.\|Pics.\|Img.\|picture.\|pictures.\|Picture.\|Pictures.\|upload.\|Upload.\|download.\|Download.\|Gallery\|gallery\|Galleries\|galleries\|import.\|Import.\|Thumbnail.\|Thumbnails.\|thumbnail.\|thumbnails.\|wpThumbnail.\|thumb.\|Thumb.\)" | while read FOLDER; 
    do
        if [[ -e "$FOLDER/.htaccess" && ! $(grep "AddHandler cgi-script" "$FOLDER/.htaccess") ]]; then
            echo -e "AddHandler cgi-script .php .pl .py .jsp .asp .htm .html .shtml .sh .cgi .php5 .php4 .php3 .phps .txt .bat .cmd .rb .txt .msi .exe .xml .xhtml\nOptions -ExecCGI -Indexes" >> "$FOLDER/.htaccess"
            chattr +ia "$FOLDER/.htaccess"
        fi
    done
done 
```

虽然上面的脚本运行正常，但它实际上并没有做我想要它做的事情。我检查了一个用户的图像目录，并没有在那里找到任何“.htaccess”文件。：/

理想情况下，我还想在屏幕上看到它在执行过程中发生了什么，并且如果可能的话，还将结果输出到一个文本文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T14:08:43.713

出于调试目的，您可以使用该命令`set -xv`（您可以将其放在 下`#!/bin/bash`）。

对于未编写任何 .htaccess 的脚本，我认为罪魁祸首在您的 if 语句中：

您的条件表明，如果 .htaccess 存在并且不包含“AddHandler cgi-script”，那么您可以做一些事情，但是如果文件 .htaccess 不存在，则 if 条件退出而不做任何事情

尝试这个：

```
if [[ ! -e "$FOLDER/.htaccess" || ! $(grep "AddHandler cgi-script" "$FOLDER/.htaccess") ]] 
```

因此，如果文件存在，它将添加“AddHandler cgi-script”，如果文件不存在，它将使用请求的字符串创建它

# lua - Lua：如何解决局部和全局变量标签之间的歧义？

> ID：15606039
> 
> 赞同：-1
> 
> 时间：2013-03-25T00:50:52.300
> 
> 标签：lua

谁能解释 Lua 如何解决这种歧义？我可以定义一个全局`x = 10`然后执行`local x = x`. ~~从文档中不清楚解释器如何处理这种情况。~~编辑：很明显，我看错了部分。别哭。

从观察看来，从那里开始，在本地分配之后的块内，标签`x`将被假定为引用本地。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T00:56:42.623

[文档清楚地解释了这一点。](http://www.lua.org/manual/5.1/manual.html#2.6)

标识符总是首先与本地人进行检查，从最里面的可用范围开始。如果它不引用可见的局部变量，则它引用全局变量。

至于`local x = x`，局部变量的作用域在所有对其求值的表达式求值之后开始*。*所以首先`x`评估（使用现有的可见性），这导致 的值`x`。然后这个值被设置到一个新定义的局部变量`x`中。

# google-app-engine - dev_appserver 返回错误“来自运行时的意外端口响应”

> ID：15606043
> 
> 赞同：0
> 
> 时间：2013-03-25T00:51:25.367
> 
> 标签：google-app-engine, python-2.7

上周，我在 Windows XP SP3 上成功尝试了带有 sdk 版本 1.7.6 和 python 2.7 的 Helloworld 示例。今天它根本不会运行并产生这个错误。

有人可以帮忙吗？

```
D:\helloworld>dev_appserver.py d:\helloworld
INFO     2013-03-24 20:16:18,187 sdk_update_checker.py:244] Checking for updates
 to the SDK.
INFO     2013-03-24 20:16:19,062 sdk_update_checker.py:272] The SDK is up to dat
e.
INFO     2013-03-24 20:16:19,421 api_server.py:152] Starting API server at: http 
://localhost:1868
INFO     2013-03-24 20:16:19,437 dispatcher.py:98] Starting server "default" run
ning at: http ://localhost:8080
INFO     2013-03-24 20:16:19,483 admin_server.py:117] Starting admin server at:
http ://localhost:8000
ERROR    2013-03-24 20:16:29,717 http_runtime.py:221] unexpected port response f
rom runtime ['before instance\r\n']; exiting the development server
INFO     2013-03-24 20:16:30,546 api_server.py:517] Applying all pending transac
tions and saving the datastore
INFO     2013-03-24 20:16:30,546 api_server.py:520] Saving search indexes 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T23:45:20.390

您能否在以下位置提交错误： [https ://code.google.com/p/googleappengine/issues/list](https://code.google.com/p/googleappengine/issues/list)

另外，您是否在 Python 安装中的库中添加了任何打印语句？

蒂姆霍夫曼的回应：“”“检查你的代码中没有任何打印语句。如果你这样做，他们将写入新的开发服务器不喜欢的标准输出，因为它使用标准输入/标准输出在主要任务和工人。""" 不正确。您的应用程序可以打印到 stdout 和 stderr。在您的情况下，看起来在您的应用程序加载*之前正在打印到标准输出。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T14:56:55.410

检查您的代码中没有任何打印语句。~~如果你这样做，他们将写入新的开发服务器不喜欢的标准输出，因为它使用标准输入/标准输出在主要任务和工作人员之间进行对话。您可以阅读更多关于新开发服务器功能的信息 - 以及如何使用 pdb 等进行调试~~

您可以通过运行 old_dev_appserver.py 来运行旧版本的服务器

# html - HTML 关于换行符？

> ID：15606049
> 
> 赞同：0
> 
> 时间：2013-03-25T00:51:59.950
> 
> 标签：html, css, break, word-wrap

所以，我在 Dreamweaver 中创建了一个网站（课程都是关于 Dreamweaver 的），我对页面布局的最后一部分感到困惑。

我目前在我的页面右上角有一个“查看购物车”按钮，左边全是空白，所以我决定在那里放一个 768x15 的广告。但是，如果我将广告与购物车放在同一个组中，它也会向右对齐，并且就在“查看购物车”的左侧。如果我将广告放在查看购物车上方，则会有一个换行，因此会留下更多空白空间，之后也是如此。

我的简单问题：有没有办法让广告和我的“查看购物车”按钮在同一行，而广告不与页面的右侧对齐？

```
<!doctype html public "-//w3c//dtd xhtml 1.0 transitional//en" "http://www.w3.org/tr/xhtml1/dtd/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
            <!--
                ez games
                author: kyle meek
                3/24/2013
            -->
        <meta http-equiv="content-type" content="text/html; charset=utf-8" />
        <title>ez games - home page</title>
        <link href="ez_styles.css" rel="stylesheet" type="text/css" />
        <link href="spryassets/sprymenubarhorizontal.css" rel="stylesheet" type="text/css" />
        <script src="spryassets/sprymenubar.js" type="text/javascript"></script>
    </head>

    <body id="bodyformat">
        <p id="logincart"><a href="viewcart.html">view cart</a></p>
        <script type="text/javascript">
            <!--
            google_ad_client = "ca-pub-0707070728226508";
            /* smalltop */
            google_ad_slot = "4701711529";
            google_ad_width = 728;
            google_ad_height = 15;
            //-->
        </script>
        <script type="text/javascript"
            src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
        </script>
        <p id="logobanner"><img name="ez_logo" src="" width="280" height="150" alt="ez games logo" style="background-color: #ffda00" />
        <img src="" width="1000" height="150" alt="ez games banner" style="background-color: #4212af" /></p>
        <br />
        <h3 id="textalign"><a href="index.html">home</a> &dagger; <a href="about_us.html">about us</a> &dagger; <a href="games.html">games</a> &dagger; <a href="contact_us.html">contact us</a> &dagger; <a href="locate_us.html">locate us</a></h3>

        <div id="ad1" align="center">
            <script type="text/javascript"><!--
                google_ad_client = "ca-pub-0707070728226508";
                /* banner ad */
                google_ad_slot = "9705490722";
                google_ad_width = 468;
                google_ad_height = 60;
                //-->
            </script>
            <script type="text/javascript"
            src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
            </script>
        </div>
        <br />
        <hr />
        <span id="vertnav">
            <h2>systems</h2><hr />
            <ul>
                <li><a href="atari.html">atari</a></li>
                <li><a href="sega_genesis.html">sega genesis</a></li>
                <li><a href="ps1.html">playstation</a></li>
                <li><a href="ps2.html">playstation 2</a></li>
                <li><a href="ps3.html">playstation 3</a></li>
                <li><a href="xbox.html">x-box</a></li>
                <li><a href="xbox360.html">x-box 360</a></li>
                <li><a href="nes.html">nes</a></li>
                <li><a href="snes.html">super nes</a></li>
                <li><a href="nintendo64.html">nintendo 64</a></li>
                <li><a href="gamecube.html">gamecube</a></li>
                <li><a href="wii.html">nintendo wii</a></li>
                <li><a href="wiiu.html">nintendo wii-u</a></li>
            </ul>
        </span>

        <section id="sect1">
            <aside id="sides"><h1>like us on facebook!</h1><br />
                <p><iframe src="http://www.facebook.com/plugins/like.php?href=http://www.facebook.com/ezgamesofficial"
                        scrolling="no" frameborder="0"
                        style="border:none; width:200px; height:80px"></iframe></p>
                <hr />
                <script type="text/javascript">
                    <!--
                    google_ad_client = "ca-pub-0707070728226508";
                    /* smallrect */
                    google_ad_slot = "5399715525";
                    google_ad_width = 180;
                    google_ad_height = 150;
                    //-->
                </script>
                <script type="text/javascript"
                    src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
                </script>
            </aside>
            <article id="art1"><h1>home</h1>
                <p>greetings! content of article one goes here! paragraphs are here. greetings! content of article one goes here! paragraphs are here. greetings! content of article one goes here! paragraphs are here. greetings! content of article one goes here! paragraphs are here. greetings! content of article one goes here! paragraphs are here. greetings! content of article one goes here! paragraphs are here.</p>
            </article>
            <article id="art2"><h1>article numero dos</h1>
                <p>lorem ipsum article 2 blah blah info. lorem ipsum article 2 blah blah info. lorem ipsum article 2 blah blah info. lorem ipsum article 2 blah blah info. lorem ipsum article 2 blah blah info. lorem ipsum article 2 blah blah info. </p>
            </article>
        </section>
        <footer id="foot"><hr />copyright&copy; ez games 2013 &dagger;&dagger;&dagger; all rights reserved.</footer>
    </body>
</html> 
```

和我的 CSS

```
#bodyformat #logincart {
    text-align: right;
}
#bodyformat #logincart a {
    color: #4212af;
    background-color: #ffda00;
    text-decoration: none;
    padding-left: 5px;
    padding-right: 5px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T01:44:36.833

尝试使用浮点数而不是文本对齐。

```
#bodyformat #logincart {
    float: right;
} 
```

更多信息： [http ://www.w3schools.com/cssref/pr_class_float.asp](http://www.w3schools.com/cssref/pr_class_float.asp)

# objective-c - 控件的初始化代码

> ID：15606051
> 
> 赞同：0
> 
> 时间：2013-03-25T00:52:14.650
> 
> 标签：objective-c, xcode

我想知道在哪里放置放置在用户界面上的控件的启动代码，例如放置在故事板上的 UIImageView，因为它将在应用程序运行时自动创建？

我尝试添加 UIImageView 的 Objective-c 类并将代码放在 init 方法中，然后为该类分配我放在故事板上但似乎不起作用的 UIImageView 控件？

我知道我用图像视图做了一个例子，但它是放置在用户界面上的所有控件的一般问题

最亲切的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T02:54:08.257

如果控件在情节提要中，则 initWithCoder: 是在实例化时将调用的 init 方法。所以，放置初始化代码的地方要么在 initWithCoder: 要么 awakeFromNib 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T00:55:54.873

取决于您想要做什么以及“为控件启动代码”的含义，但最好的选择可能是继承 UIImageView，然后确保将情节提要上的对象设为子类的类型。

# html - 浮动右属性块另一个div

> ID：15606053
> 
> 赞同：0
> 
> 时间：2013-03-25T00:53:24.950
> 
> 标签：html, css, css-float

所以你可以看到我有三个 div。在 div“about”中，我设置了背景颜色，并有一些标题，但是当我为 div“boxes”设置 float:right 属性时，它会阻止 div“about”。

谁能告诉我为什么会这样？

谢谢！

这是我的 HTML：

```
<div id="about">

<div id="content_holder">

<div class="boxes_8"><img src="images/jack.jpg" width="227" height="227" alt="jack">      </div>
<div class="boxes"></div>
<div class="boxes"></div>
<div class="boxes"></div>
<div class="boxes"></div>
<div class="boxes"></div>
<div class="boxes"></div>
<div class="boxes"></div> </div>
</div> 
```

和CSS：

```
#content_holder{
display: block;
position: relative;
margin: 0 auto;
margin-top:10px;
width: 910px;
min-height: 20px;}

.boxes{
display:block;
float: left;
width: 227.5px;
height:227.5px;}
#about{
background-image: linear-gradient(bottom, rgb(75,72,71) 0%, rgb(37,37,35) 69%);
background-image: -o-linear-gradient(bottom, rgb(75,72,71) 0%, rgb(37,37,35) 69%);
background-image: -moz-linear-gradient(bottom, rgb(75,72,71) 0%, rgb(37,37,35) 69%);
background-image: -webkit-linear-gradient(bottom, rgb(75,72,71) 0%, rgb(37,37,35) 69%);
background-image: -ms-linear-gradient(bottom, rgb(75,72,71) 0%, rgb(37,37,35) 69%);

background-image: -webkit-gradient(
linear,
left bottom,
left top,
color-stop(0, rgb(75,72,71)),
color-stop(0.69, rgb(37,37,35))
);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T01:19:41.717

我对你试图从你的代码中完成什么感到有点困惑。因为您的 .boxes div 是浮动的，所以它们实际上会滑出 #content_holder 容器，除非您添加以下 css：

```
#content_holder:after{
    content: '';
    display: block;
    visibility: invisible;
    clear: both;
} 
```

这将确保您的 #content_holder 环绕您的 .boxes div（这是我假设您想要的，因为它们在 HTML 中）。你的第一个盒子，里面有 img 的盒子，在你提供的代码中根本没有 CSS 样式，所以它会伸展以填满整行。这是你想要的，还是你想要所有的 .boxes div 排成一行（或几行）？如果是这样，请更改以下行：

```
.boxes{ 
```

对此：

```
.boxes, .boxes_8{ 
```

这将导致 .boxes_8 div 让其他框进入它的右侧。

你想实现什么布局？如果您详细说明，我可以提供更有用的答案。

# java - 从 CSV 文件中读取数据。将数据转换为数组

> ID：15606054
> 
> 赞同：0
> 
> 时间：2013-03-25T00:53:46.577
> 
> 标签：java, csv, multidimensional-array

我正在努力完成一个项目，但没有运气。这是一门在线课程，所以我唯一的交流方式是通过电子邮件。在过去的五天里，他还没有回复我的四封电子邮件。

因此，对于这项任务，我们必须下载一个包含特定公司纳斯达克股票价格信息的 csv 文件。我选择了 GOOG（谷歌）。以下是代码部分的要求。

创建第二个文件 ReadFiles.java。这是将从您的 csv 文件中读取数据的文件。注意：您需要使用较小版本的数据文件（20 行）进行测试。您的 ReadFiles.java 类需要以下方法：

方法：检查文件是否存在

方法：在csv文件中查找行数

方法：将csv文件转换为多维数组

方法：打印数组

方法：使用get方法返回数组

创建文件 DataAnalyzer.java。该文件将用于调用 ReadFiles.java 中的方法。请务必证明您的所有方法都可以通过 DataAnalyzer.java 工作。

这就是我到目前为止所拥有的。

```
package Analysis;

import java.io.BufferedReader;
import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.IOException;
import java.io.Reader;
import java.util.StringTokenizer;
import java.util.Scanner;

public class ReadFiles 
{
    public static int numberOfRows;
    public static int rowNumber = 0;
    public static int columnNumber = 0;

    public static void main(String[] args) 
    {
        Scanner kb = new Scanner (System.in);
        String fileName;
        System.out.print("Enter the file name >> ");
        fileName = kb.nextLine();
        File f = new File("D:\\Java\\Assignment 3\\" + fileName);
        if(f.exists())
        {
            System.out.print("File exists.");
        }
        fileName="D:\\Java\\Assignment 3\\" + fileName;
        try 
        {
            BufferedReader br = new BufferedReader(new FileReader(fileName));
            StringTokenizer st = null;

            while((fileName = br.readLine()) != null)
            {
                rowNumber++;
                numberOfRows++;

                st = new StringTokenizer(fileName, ",");

                while(st.hasMoreTokens())
                {
                        columnNumber++;
                        System.out.println("Row " + rowNumber + 
                                    ", Column " + columnNumber 
                                + ", Entry : "+ st.nextToken());
                }
                columnNumber = 0;
            }
        }       
        catch (FileNotFoundException e) 
        {
            e.printStackTrace();
        } 
        catch (IOException e) 
        {
            e.printStackTrace();
        }
    }
    public static void rows()
    {
        System.out.println("Total Rows: " + numberOfRows);
    }
} 
```

我们为这门课得到的书没有帮助。所有“示例”和“你做”部分都会出错。同样在整章中，这个赋值是基于，没有提到一个数组。

当我运行此代码时，我没有收到任何错误。我看到以下内容：

```
File exists.
Row 1, Column 1, Entry : 30/12/2011
Row 1, Column 2, Entry : 642.02
Row 1, Column 3, Entry : 646.76
Row 1, Column 4, Entry : 642.02
Row 1, Column 5, Entry : 645.9
Row 1, Column 6, Entry : 1782300
Row 1, Column 7, Entry : 645.9
Row 2, Column 1, Entry : 29/12/2011
Row 2, Column 2, Entry : 641.49 
```

我从第 1 行到第 19 行（整个文件）显示。

我不明白的是如何在这个类中创建单独的方法来转换为数组，打印数组并返回数组。

任何帮助将非常感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T02:05:45.117

您需要定义 2 个类，DataAnalyzer 和 ReadFiles。通常每个班级都有一个文件，尽管这不是必需的。已经提供了 ReadFiles 的结构，因此您将拥有一个名为 ReadFiles.java 的文件，如下所示：

```
public class ReadFiles{

    //instance var(s)
    ...

    //constructor(s)
    ...

    //methods(s)

    /**
      * Checks whether the file exists
     */
    public boolean exists(){
        ....
    }

    /*
     * Number of rows in the file
     */
    public int getRowCount(){
        ....
    }

    // add the rest your self!!
} 
```

}

您还需要一个名为 DataAnalyzer.java 的文件：

```
public class DataAnalyzer{

    public static void main(String args){
        //create ReadFiles and call it's methods and check they return what is expected
    }

} 
```

假设 ReadFile 管理单个输入文件；它可能需要一个类变量来保存该信息。DataAnalyzer 需要告诉 ReadFiles 分析哪个文件（构造函数似乎是一个不错的选择）。

我的建议是创建您的骨架结构（您已经被告知它是什么）并开始一次构建每个方法的功能。

# amazon-s3 - 如何将数据从亚马逊 aws S3 传输到谷歌云存储

> ID：15606058
> 
> 赞同：1
> 
> 时间：2013-03-25T00:54:24.390
> 
> 标签：amazon-s3, google-cloud-storage

我正在尝试将数据从 aws S3 加载到谷歌云存储： - 我正在使用 gsutil - 我已将 S3 上的文件公开

在我输入的 Windows 机器上的 gsutil 命令行上：

> > python C:\gsutil\gsutil cp [https://s3.amazonaws.com/my_bucket/myfile.csv.gz](https://s3.amazonaws.com/my_bucket/myfile.csv.gz) gs://my_folder

我收到的错误是： InvalidUriError: Unrecognized scheme "https"

我试过用 http 代替 https

我已成功从本地计算机上传到谷歌云存储，替换为本地文件。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T10:32:58.393

gsutil 命令不支持 http 或 https。尝试...

```
python C:\gsutil\gsutil cp s3://my_bucket/myfile.csv.gz gs://my_folder 
```

# javascript - 设置 localStorage 保存的频率

> ID：15606059
> 
> 赞同：0
> 
> 时间：2013-03-25T00:54:41.767
> 
> 标签：javascript, jquery, local-storage

我正在创建一个在线文本编辑器。

我使用 jQuery 在客户端存储信息

```
$(document).ready(function () {
    $('#type-name').blur(saveSettings);
    loadSettings();
});

function loadSettings() {
    $('#type-name').val(localStorage.typewriter);
}

function saveSettings() {
    localStorage.typewriter = $('#type-name').val();
} 
```

这将保存用户所写的内容，但不会保存所有内容。它似乎只节省了一定数量并恢复到以前的状态。但是当我离开它 20 秒时，它会保存并工作。我可以做些什么来更改保存率？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T01:09:51.267

```
$(document).ready(function () {
    var blur_timeout_id;

    $('#type-name').blur(function () {
        if (blur_timeout_id) {
            clearTimeout(blur_timeout_id);
        }

        blur_timeout_id = setTimeout(function () {
            saveSettings();
        }, 1000); // or 10000, etc.
    });

    loadSettings();
});

function loadSettings() {
    $('#type-name').val(localStorage.typewriter);
}

function saveSettings() {
    localStorage.typewriter = $('#type-name').val();
} 
```

# magento - 在自定义属性 Magento 中计算长度

> ID：15606060
> 
> 赞同：0
> 
> 时间：2013-03-25T00:54:54.753
> 
> 标签：magento

我正在为这个问题找到正确的解决方案而自杀。这是我的问题：

卖电线：

1.  我们会说电汇是 5.00 美元
2.  如果您想要 1 英尺，则 5.00 美元
3.  如果您想要 2 英尺，则需要 10.00 美元
4.  ...

每只脚不是一个单独的 SKU。它是对总数的重新计算。而已。真的很容易，但由于某种原因在 Magento 中非常困难。

我将如何编码？有任何想法吗？

****更新***

这些是可配置的产品。一开始并没有想到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T01:11:15.527

在不添加额外属性或逻辑的情况下做到这一点的一种方法是按脚销售。

以您的 SKU`wire-1-foot`为例，并使用 Magento 的内置[层级定价](http://www.magentocommerce.com/knowledge-base/entry/how-do-i-use-tier-pricing)来自定义多个数量的定价，也就是多英尺的电线。

您可能还希望自定义数量字段周围的块，以使客户更清楚。

**编辑：** 您也可以考虑分组产品，因为它们的行为略有不同，例如[http://www.webshopapps.com/blog/2010/11/tiered-pricing-on-configurable-products/](http://www.webshopapps.com/blog/2010/11/tiered-pricing-on-configurable-products/)

# php - 查询中的php存储过程错误

> ID：15606061
> 
> 赞同：0
> 
> 时间：2013-03-25T00:55:07.287
> 
> 标签：php, mysql

这是代码：

```
<?php
    $sql = mysql_query($db, "CALL selectproducts()");
    if( $sql === FALSE ) {
        die('Query failed returning error: '. mysql_error());
    } else {
        while($row=mysql_fetch_array($sql))
        {
            $id=$row['prodname'];
            $name=$row['proddescription'];
            $desc=$row['prodsupplier'];
            $supp=$row['proddate'];
            $date=$row['prodprice'];
            $qtyleft=$row['prodquantity']; 
```

收到此错误：

```
Warning: mysql_query() expects parameter 2 to be resource, string given in C:\xampp\htdocs\inventory\tableedit.php on line 166

Warning: mysql_fetch_array() expects parameter 1 to be resource, null given in C:\xampp\htdocs\inventory\tableedit.php on line 170 
```

为什么实际上我在调用过程中没有参数时会出现错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T01:09:10.867

我相信你把你的[`mysql_query`](http://php.net/manual/en/function.mysql-query.php)论点弄混了，$db 是第二个参数，第一个是要执行的 MySQL 查询。

尽管此外，您最好使用 mysqli 来代替将来的校对：

```
<?php

    $mysqli = new mysqli('username', 'username', 'password', 'database' );
    $result = $mysqli->query("CALL selectproducts()");

    if( !$result ) {

        die('Query failed returning error: '. $mysqli->connect_errno );

    } else {

        while( $row = $result->fetch_array(MYSQLI_ASSOC)) {
            $id       =  $row['prodname'];
            $name     =  $row['proddescription'];
            $desc     =  $row['prodsupplier'];
            $supp     =  $row['proddate'];
            $date     =  $row['prodprice'];
            $qtyleft  =  $row['prodquantity'];
        }
    }
?> 
```

从检查[`mysqli PHP`](http://php.net/manual/en/mysqli.quickstart.stored-procedures.php)调用存储过程的文档中：

```
<?php 

    /**   
     *  Prepare Stored Procedure 
    **/
    if (!($result = $mysqli->prepare("CALL selectproducts()"))) {
        echo "Prepare failed: (" . $mysqli->errno . ") " . $mysqli->error;
    }

    if (!$result->execute()) {
        echo "Execute failed: (" . $result->errno . ") " . $result->error;
    }

    /**   
     *  Iterate through each result
    **/
    do {
        if ($res = $result->get_result()) {
            printf("---\n");
            var_dump(mysqli_fetch_all($res));
            mysqli_free_result($res);
        } else {
            if ($result->errno) {
                echo "Store failed: (" . $result->errno . ") " . $result->error;
            }
        }
    } while ($result->more_results() && $result->next_result());

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T01:00:49.250

应该：

```
mysql_query("CALL selectproducts()", $db); 
```

[文档](http://php.net/manual/en/function.mysql-query.php)

请注意，这些`mysql_`功能现在已折旧。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T01:06:21.640

试试这个方法：

```
<?php
$link = mysqli_init(); 
mysqli_options($link, MYSQLI_INIT_COMMAND, "SET AUTOCOMMIT=0"); 
mysqli_options($link, MYSQLI_OPT_CONNECT_TIMEOUT, 5); 

mysqli_real_connect($link, $hostname, $username, $password, $dbName); 

if (mysqli_connect_errno()) { 
    printf("Connect failed: %s\n", mysqli_connect_error()); 
    exit(); 
} 

$query = "CALL simpleproc()"; 
if (mysqli_real_query($link,$query)) { 
    if ($result2 = mysqli_store_result($link)) { 
        while ($row = mysqli_fetch_assoc($result2)) { 
            $q = $row["login"]; 

            echo $q; 
        } 
    } 
} 

mysqli_close($link); 
?> 
```

# asp.net - Response.WriteFile 在生产服务器上无法使用 IE 10

> ID：15606063
> 
> 赞同：1
> 
> 时间：2013-03-25T00:55:20.193
> 
> 标签：asp.net, vb.net, report, .net-2.0, internet-explorer-10

我在生产服务器上的 IE 10 中的 ASP.NET/VB Web 窗体应用程序（以 .NET 2.0 为目标）中的 Response.WriteFile 方法（我认为是）有问题。基本上，这段代码已经到位，并且在 IE 10 之前已经运行了很多年。现在，当我通过 Visual Studio 在本地测试它时它工作正常，但是当它在生产服务器（Server 2008 R2，IIS 7）上时，我收到无法下载文件的错误消息。当我强制它时，我得到一个损坏的 PDF。我正在使用 Crystal Reports X 生成 PDF。任何愿意帮助我用正确的措辞来研究这个问题的人都会得到我永远的感激！我已经尝试了各种 IE 10 的所有兼容模式。我已经按照 Scott Hanselman 更新了 App_Browsers 文件夹中的浏览器定义文件[http://www.hanselman.com/blog/BugAndFixASPNETFailsToDetectIE10CausingDoPostBackIsUndefinedJavaScriptErrorOrMaintainFF5ScrollbarPosition.aspx](http://www.hanselman.com/blog/BugAndFixASPNETFailsToDetectIE10CausingDoPostBackIsUndefinedJavaScriptErrorOrMaintainFF5ScrollbarPosition.aspx)。作为一个相对新手开发人员，我不确定我在 IE 10 上如何通过 VS 工作，但在将其投入生产时无法工作。

这是有问题的代码片段：

```
 ...
    Response.ContentType = "application/pdf"
    Response.AddHeader("content-disposition", "attachment; filename=ThisReport_" & Server.UrlEncode(Me.ReportName.Text & "_" & Now.Month.ToString() & "_" & Now.Day.ToString() & "_" & Now.Year.ToString()) & ".pdf")

    Response.WriteFile(strFileName)
    ... 
```

预先感谢您在解决此问题时提供的任何帮助、指导或指导。我在我的应用程序中的很多地方都有这个，所以找到一个根级别的修复程序比在它出现的每个地方修复它更可取。不幸的是，目前还不能升级到 .NET 4.5。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T01:41:14.930

我正在回答我自己的问题，以防以后可能出现的其他人可以从中受益。事实证明，据我所知，IE 10 中的更改会影响 ASP.NET 2.0（或其他版本，我不确定）中的响应对象。我能够通过添加...来解决我的问题

```
 Response.ClearContent()
    Response.ClearHeaders()
    Response.Clear()
    Response.Buffer = True
    Response.ContentType = "application/pdf"
    Response.AddHeader("content-disposition", "attachment; filename=ThisReport_" & Server.UrlEncode(Me.ReportName.Text & "_" & Now.Month.ToString() & "_" & Now.Day.ToString() & "_" & Now.Year.ToString()) & ".pdf")
    Response.WriteFile(strFileName)        
    Response.End() 
```

我尝试使用

```
 Response.Flush()
    Response.Close() 
```

当我这样做时，我得到的是 HTML 页面而不是 PDF 内容。这已经为我解决了这个问题，尽管还有很多关于 ASP.NET 和 IIS 的内部工作原理我还没有学习。如有必要，请随时添加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-14T21:14:42.027

将 Response.Flush() 和 Response.Close() 替换为 HttpContext.Current.ApplicationInstance.CompleteRequest()

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-10T21:00:34.500

我有同样的问题，它可以在我的本地机器上工作，但不能在 PROD 服务器上工作，这使我认为我的本地机器可能从 Microsoft 获得了更新，而 PROD 服务器尚未更新。我们正在测试的应用程序在 IE 兼容性方面做得很好模式，但在 IE 10 中得到了各种奇怪的东西。

我要求使用 Microsoft 2 年前发布的热修复程序更新产品服务器。但是我的服务器上有 2.0 框架，所以我要求他们迁移到 3.5 框架并应用此修复程序。现在该应用程序运行良好，我无需将浏览器模式更改为 IE 10 兼容模式即可使用。

这是修复的链接

[http://support.microsoft.com/hotfix/KBHotfix.aspx?kbnum=2600088&kbln=en-us](http://support.microsoft.com/hotfix/KBHotfix.aspx?kbnum=2600088&kbln=en-us)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-19T11:23:09.307

我面临着同样的问题。我使用的是 Response.Close()，我将它替换为“Response.End()”，它就完成了这项工作。

# php - PHP比较不同表中的字符串

> ID：15606066
> 
> 赞同：0
> 
> 时间：2013-03-25T00:56:01.440
> 
> 标签：php

抱歉，我在最后一个“问题”上确实犯了一个错误……这是真正的问题……

我有这个代码..我在哪里创建或生成优惠券代码..使用时存储在用户表中..在用户行上，每个用户都有一个代码..（他们使用的优惠券）...

有优惠券的表格，和有用户和他们使用的代码优惠券的表格是不同的。

这是我的代码，我的问题是......

我如何比较来自不同表的字符串..我真的是一个新手，你可以看到..英语真的很差:(

```
<?php

$res = mysql_query("SELECT codigo,used FROM codigos;") 
or die(mysql_error());

if (mysql_num_rows($res) > 0) {
echo '<table border="1">';
echo '<th>Codigo</th><th>Usado</th><th>Usuario</th>';
while ($row = mysql_fetch_assoc($res)) {
echo "<tr>
<td>{$row['codigo']}</td>
<td>";

if(strcmp($row['used'],"0") ==0) {
    echo "No Usado";}
    else {
        echo "Usado"; }
echo "</td>
<td>";

//Here GET THE NAME OF USER WITH THAT CODE

echo "</td>
</tr>";
}
echo '</table>';
}
else
echo 'No rows in selected table';
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T01:03:29.777

你的基本想法是正确的。唯一缺少的部分是 POS（或 iPad 或任何离线商店正在使用的东西）还需要将该优惠券传达给您的服务器，服务器会将其存储在数据库中以进行验证。

就安全性而言，确保您在数据库中对数据进行单向散列（因此无法解密），并使用 SSL 将任何数据传输到服务器或从服务器传输。要根据单向哈希验证数据，您需要对传入数据进行哈希处理并比较两个哈希（因为它们基本上是唯一的 GUID，如果它们匹配，您就知道它们完全相同）。

# azure - AS3 与 Azure 云托管的集成

> ID：15606068
> 
> 赞同：0
> 
> 时间：2013-03-25T00:56:13.453
> 
> 标签：azure, ftp, aptana

有谁知道[Aptana Studio 3](http://www.aptana.com/products/studio3)是否可以像与 Heroku 或 Engine Yard 一样直接与 Azure 云托管集成？如果可能的话，希望避免使用 GitHub 选项作为公共帐户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T08:35:06.987

从 Aptana Studio 3 的官方网站上，我看到它支持 FTP 作为标准发布方法。

您可以使用此方法 (ftp) 将您的应用程序部署到[Windows Azure 网站](http://www.windowsazure.com/en-us/home/scenarios/web-sites/)。这里[有一个关于如何使用 FTP 发布到 Azure 网站的快速教程](http://www.windowsazure.com/en-us/develop/php/tutorials/website-w-mysql-and-ftp/)。它将指导您完成创建部署凭据的过程以及如何获取 FTP 站点地址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T12:45:05.353

我一直在研究其他 IDE 解决方案，最近遇到了 PHPStorm——它具有 ftp、SVN 和 Azure 集成作为标准（以及其他），所以我会坚持使用它，因为它也是一个优秀的代码编辑器。快乐的时光！

# twitter - 任何适用于 Common Lisp 的 Twitter API 客户端？

> ID：15606070
> 
> 赞同：2
> 
> 时间：2013-03-25T00:56:29.607
> 
> 标签：twitter, lisp, common-lisp

我只是想使用[cl-twitter ，首先使用](http://common-lisp.net/project/cl-twitter/)[quicklisp](http://www.quicklisp.org/)安装它，在执行其文档中的示例时出现此错误：

```
The function TWITTER:AUTHENTICATE-USER is undefined. 
```

这个软件是最新的吗？或者只是文档不是？是否还有其他适用于 Twitter API 的 Common Lisp 库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T05:50:22.597

我无法提供完整的客户端库，但对于其中的身份验证部分，[cl-oauth](https://github.com/skypher/cl-oauth)效果很好。有关用法示例，请参见[这段代码](https://github.com/hanshuebner/planetwit/blob/master/planetwit.lisp#L53)。

# asp.net - Paypal 与快速结帐以获取 BillingAgreementID

> ID：15606074
> 
> 赞同：2
> 
> 时间：2013-03-25T00:57:07.233
> 
> 标签：asp.net, paypal, paypal-sandbox, paypal-nvp

我正在使用快速结帐与贝宝合作以获取计费协议 ID。

我正在遵循本指南：

[https://www.x.com/developers/paypal/documentation-tools/how-authorize-and-run-reference-transaction-express-checkout](https://www.x.com/developers/paypal/documentation-tools/how-authorize-and-run-reference-transaction-express-checkout)

在我执行“SetExpressCheckout”的第一步中：以下是代码

```
public string SetExpressCheckout(string Amount)
    {
        string returnURL = "http://localhost:50325/ReviewOrder.aspx" + "?amount=" + Amount + "&PAYMENTREQUEST_0_CURRENCYCODE=USD";
        string cancelURL = returnURL.Replace("ReviewOrder", "ExpCheckOut");
        string strCredentials = "USER=" + strUsername + "&PWD=" + strPassword + "&SIGNATURE=" + strSignature;
        string strNVP = strCredentials;
        strNVP += "&PAYMENTREQUEST_0_PAYMENTACTION=AUTHORIZATION&&PAYMENTREQUEST_0_AMT=25" + "&L_BILLINGTYPE0=MerchantInitiatedBilling" + "&RETURNURL=" + returnURL;
        strNVP += "&CANCELURL=" + cancelURL;
        strNVP += "&METHOD=SetExpressCheckout&VERSION=" + strAPIVersion + "&DESC=test EC payment" +"&NOSHIPPING=0" ;
        //Create web request and web response objects, make sure you using the correct server (sandbox/live)
        HttpWebRequest wrWebRequest = (HttpWebRequest)WebRequest.Create(strNVPSandboxServer);
        //Set WebRequest Properties
        wrWebRequest.Method = "POST";
        // write the form values into the request message
        StreamWriter requestWriter = new StreamWriter(wrWebRequest.GetRequestStream());
        requestWriter.Write(strNVP);
        requestWriter.Close();
        // Get the response.
        HttpWebResponse hwrWebResponse = (HttpWebResponse)wrWebRequest.GetResponse();
        StreamReader responseReader = new StreamReader(wrWebRequest.GetResponse().GetResponseStream());
        // and read the response
        string responseData = responseReader.ReadToEnd();
        responseReader.Close();
        return responseData;
    } 
```

回应是：

```
 TOKEN=EC-09082530FY878870B&
    TIMESTAMP=2013-03-25T00:45:56Z&
    CORRELATIONID=3d33037174d55&
    ACK=SuccessWithWarning&
    VERSION=86&
    BUILD=5479129&
    L_ERRORCODE0=11452&
    L_SHORTMESSAGE0=Merchant not enabled for reference transactions&
    L_LONGMESSAGE0=Merchant not enabled for reference transactions&
    L_SEVERITYCODE0=Warning 
```

如何在第 3 步中获得 BillingAgreentd：

第 3 步的代码是：

```
public string GetBillingAgreementID()
    {
        string returnURL = "http://localhost:50325/ReviewOrder.aspx" + "?amount=" + Amount + "¤cy=USD";
        string cancelURL = returnURL.Replace("ReviewOrder", "ExpCheckOut");
        string strCredentials = "USER=" + strUsername + "&PWD=" + strPassword + "&SIGNATURE=" + strSignature;
        string strNVP = strCredentials;
        strNVP += "&RETURNURL=" + returnURL;
        strNVP += "&CANCELURL=" + cancelURL;
        strNVP += "&METHOD=CreateBillingAgreement&VERSION=" + strAPIVersion + "&TOKEN=" + Session["Token"];
        //Create web request and web response objects, make sure you using the correct server (sandbox/live)
        HttpWebRequest wrWebRequest = (HttpWebRequest)WebRequest.Create(strNVPSandboxServer);
        //Set WebRequest Properties
        wrWebRequest.Method = "POST";
        // write the form values into the request message
        StreamWriter requestWriter = new StreamWriter(wrWebRequest.GetRequestStream());
        requestWriter.Write(strNVP);
        requestWriter.Close();
        // Get the response.
        HttpWebResponse hwrWebResponse = (HttpWebResponse)wrWebRequest.GetResponse();
        StreamReader responseReader = new StreamReader(wrWebRequest.GetResponse().GetResponseStream());
        // and read the response
        string responseData = responseReader.ReadToEnd();
        responseReader.Close();
        return responseData;
    } 
```

回应是：

```
 TIMESTAMP=2013-03-25T00:51:34Z&
 CORRELATIONID=854e6beed1e82&
 ACK=Failure&
 VERSION=86&
 BUILD=5479129&
 L_ERRORCODE0=11455&
 L_SHORTMESSAGE0=Buyer did not accept billing agreement&
 L_LONGMESSAGE0=Buyer did not accept billing agreement&
 L_SEVERITYCODE0=Error 
```

如何获得 BillingAgreemntId？是因为“L_SHORTMESSAGE0=Merchant not enabled for reference transactions”这个来自“SetExpressCheckout”的消息我无法获得BillingAgreementID吗？

请帮助我。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T12:57:50.193

如果是真实账户，您需要联系 PayPal 并请求在账户上启用此功能。如果您需要在沙盒上启用它，您需要联系 PayPal MTS 并在您的沙盒帐户上启用它。

# windows - 什么是 Windows Fabric 以及如何在其中托管服务？

> ID：15606078
> 
> 赞同：5
> 
> 时间：2013-03-25T00:57:36.500
> 
> 标签：windows, azure-service-fabric

我最近安装了 Windows Server Service Bus 1.0（在 Windows Server 2008 R2 机器上）。

这也会安装“Windows Fabric”（不是 AppFabric）。

找不到太多关于它的信息，并用谷歌搜索我偶然发现了一个 Lync 服务器帖子（Windows Fabric 也由 Lync Server 2013 安装）。

定义：

> “Windows Fabric 是一项 Microsoft 技术，用于创建高度可靠、可分发和可扩展的应用程序。”

从服务总线架构介绍来看，Fabric 似乎允许服务复制、高可用性和容错。

任何人都知道这是否可用于托管自定义 .NET 服务？或任何类型的方向将不胜感激。

提前致谢。

因数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-05T00:46:41.727

5 月 28 日，我在马萨诸塞州波士顿麻省理工学院附近的微软 NERD 中心参加了 Mark Eisenberg 的演讲。演讲主要是关于 Azure Service Fabric。普遍的共识是，如果您从基础架构即服务的角度使用 Azure，您并没有真正使用它。

下一步是天真地使用 Azure 作为平台，这意味着不是创建 VM 并将它们托管在那里，而是创建云服务、Web 作业和 Web 应用程序，并使用新的 Logic Api 等......

但是，如果您真的想构建一个有状态的、有弹性的服务企业类，您将需要深入 PaaS 并直接针对 Service Fabric 进行编写以获得更好的控制。

那就是钱的所在。

[几天前，我写了一篇关于 Azure Service Fabric 是什么的演讲，并将其发布在这里](http://www.bananagunprogramming.com/?p=330)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-18T15:34:46.900

我实际上并不认为 Windows Fabric 是开放产品。它用于基础设施目的，而不是用于部署自定义服务。对于您的自定义服务，您必须使用构建在 Windows Fabric 之上的平台，例如 Service Bus、Windows Server App Fabric。我认为 Windows Fabric 是供 Windows Azure 和私有云内部使用的，用于集群、负载平衡等。

**更新：** 我已经开始开发 Windows Azure 应用程序，这就是我发现的。我已将服务角色添加到 Azure 应用程序并在本地开发机器（在 Azure 模拟器下）上启动它。我的服务是在 Windows Fabric 下发布并启动的！

所以结论是：Windows Fabric 是一个运行您的云服务的平台。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-17T17:08:49.563

顾名思义，Fabric 就是后端。它与 iSCSI 或 EIGRP 没有什么不同。主要区别在于它在形式上是通用的，而不是像前面提到的服务/协议那样具体。

IIS 是特定于 Web 托管的服务器服务。SQL 相同，但只有数据库..

结构，应用于主机结构感知服务和软件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-01T15:21:29.960

Microsoft 在内部使用 Windows Fabric 构建高度可用、弹性和可扩展的服务。根据此视频，它已用于服务总线、SQL 数据库、文档数据库等：[使用 Microsoft Azure Service Fabric 构建弹性、可扩展的服务](http://channel9.msdn.com/Events/Build/2015/2-700)

到目前为止，它还不能用于外部各方，但现在已宣布为 Service Fabric，它将在 Windows Azure 和 Window Server 2016 上可用。

在此处阅读更多信息：http: [//azure.microsoft.com/en-us/campaigns/service-fabric/](http://azure.microsoft.com/en-us/campaigns/service-fabric/)

# r - 如何将 chisq.test 的十进制数字设为四个数字？

> ID：15606080
> 
> 赞同：0
> 
> 时间：2013-03-25T00:57:47.033
> 
> 标签：r

```
> options(digits=5)
> x<-c(139,138,112,111)
> y<-c(0.3,0.25,0.2,0.25)
> chisq.test(x,p=y)

Chi-squared test for given probabilities

data:  x 
X-squared = 5.1667, df = 3, p-value = 0.16 
```

该命令`options(digits=4)` 不能使 chisq.test 的数字输出四个数字，我怎样才能得到 p-value = 0.15997？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T01:01:38.917

您可以直接访问 p 值并根据需要对其进行四舍五入：

```
> chi_sq <- chisq.test(x,p=y)
> chi_sq$p.value
[1] 0.159992
> round(chi_sq$p.value, 5)
[1] 0.15999 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T03:49:56.270

```
 x <- c(139,138,112,111)
 y <- c(0.3,0.25,0.2,0.25)
 a <- chisq.test(x,p=y)
 print(a,digits=5) 
```

要不就

```
print(chisq.test(x,p=y),digits=5) 
```

...给出：

```
 Chi-squared test for given probabilities

data:  x 
X-squared = 5.1667, df = 3, p-value = 0.15999 
```

* * *

如果您查看对象`chisq.test`创建：

```
str(a) 
```

你会看到它是一流的`htest`。

所以问题是“打印方法如何为 htest 工作？”

如果你看一下`?print`泛型函数，你会看到一些类有`digits=`参数，这就是你所需要的，所以你可以猜到我最初建议的（就像我做的那样），但是因为我们看到它是类的`htest`，我们可以通过以下方式了解它`getAnywhere`：

```
getAnywhere(print.htest) 
```

并且看到它在里面`stats`（无论如何都是显而易见的第一个猜测），我们也可以通过以下方式看到代码：

```
stats:::print.htest 
```

因此，最后两个中的任何一个都向您展示了它的确切作用，以及如何使用 修改其行为`print`，因为您可以看到它肯定具有“数字”参数。如果你真的有心，你甚至可以编写自己的函数。

# php - Twig 的逻辑运算符是否评估这两个表达式？

> ID：15606082
> 
> 赞同：2
> 
> 时间：2013-03-25T00:58:08.047
> 
> 标签：php, symfony, twig

如果我使用 Twig 表达式，例如：

```
{% if a and function(a) %} 
```

如果是假的，`a`Twig 是否仍然评估`function(a)`，或者表达式是否会评估为`false`而不评估第二部分？同样与`or`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T01:39:04.673

tl;dr：如果第一部分为假，则 Twig 的逻辑运算符不计算“和”表达式的第二部分，如果第一部分为真，则同样使用“或”。

正如[zerkms 所指出的](https://stackoverflow.com/questions/15606082/do-twigs-logical-operators-evaluate-both-expressions#comment22132687_15606082)，这可以通过使用 die 进行测试。

例如：

```
{% if water_is_dry and die('water_is_wet') %} 
```

不会死，因为第一个表达式为 null 是错误的。

然而：

```
{% if water_is_dry or die('water_is_wet') %} 
```

会死。

请注意，这仅在您将 die 作为函数添加到 Twig 实例时才有效，如下所示：

```
$twig->addFunction(new Twig_SimpleFunction('die', 'die')); 
```

# java - 春季会话并发

> ID：15606085
> 
> 赞同：1
> 
> 时间：2013-03-25T00:59:00.193
> 
> 标签：java, spring-mvc, spring-security, session-management

我想使用 spring security 来处理会话并发。我想阻止登录相同的帐户。到目前为止，我所做的是通过实现`AuthenticationProvider`. 我覆盖了`authenticate()`方法，我认为身份验证过程现在很好。我的下一步是添加会话并发。我在我的spring xml中添加了这个：

```
<beans:bean id="loginAuthenticator" class="[...]" />

<sec:http auto-config='true'>
    <sec:intercept-url pattern="/login.do" access="IS_AUTHENTICATED_ANONYMOUSLY" />  
    <sec:intercept-url pattern="/**" access="ROLE_USER" />
    <sec:form-login login-page="/login.do" login-processing-url="/j_spring_security_check" default-target-url='/home.do' always-use-default-target='true'/>
    <sec:logout logout-success-url="/login.do"/>

    <sec:session-management session-fixation-protection="migrateSession" session-authentication-error-url="/login.do" invalid-session-url="/login.do">  
        <sec:concurrency-control max-sessions="1" error-if-maximum-exceeded="true" />  
    </sec:session-management>
</sec:http>

<sec:authentication-manager>
    <sec:authentication-provider ref='loginAuthenticator' />
</sec:authentication-manager> 
```

我已经尝试登录相同的帐户，但它仍然能够通过。你能告诉我我错过了什么吗？有什么我需要实施或扩展的吗？我的xml配置错了吗？

谢谢。

编辑：按要求记录

```
INFO: Initializing Coyote HTTP/1.1 on http-8080
Apr 04, 2013 4:40:15 PM org.apache.coyote.http11.Http11Protocol start
INFO: Starting Coyote HTTP/1.1 on http-8080
INFO : com.addressbook.controllers.LoginController - ----------> LoginController - displayLoginPage()
INFO : com.addressbook.security.LoginAuthenticator - ----------> authenticate() - authenticating user credentials
INFO : com.addressbook.utils.HashService - ----------> finally block hashing function
INFO : com.addressbook.security.LoginAuthenticator - ----------> username: testuser1
INFO : com.addressbook.security.LoginAuthenticator - ----------> password: 6ca13d52ca70c883e0f0bb101e425a89e8624de51db2d2392593af6a84118090
INFO : com.addressbook.security.LoginAuthenticator - ----------> user xml file path: C:\Users\jlim\addressbook\xml\users.xml
INFO : com.addressbook.security.LoginAuthenticator - ----------> reached finally block fetchUsers: [com.addressbook.pojos.User@2061b97c, com.addressbook.pojos.User@6fd88c7f, com.
addressbook.pojos.User@71f01f36]
INFO : com.addressbook.security.LoginAuthenticator - ----------> user exists?: true
INFO : com.addressbook.controllers.LoginController - ----------> LoginController - showHomePage()
INFO : com.addressbook.controllers.LoginController - ----------> LoginController - user from session: testuser1
INFO : com.addressbook.dao.impl.ContactDaoImpl - ----------> contacts xml file path: C:\Users\jlim\addressbook\xml\contacts.xml
INFO : com.addressbook.dao.impl.ContactDaoImpl - ----------> reached finally block fetchContactsFromXml(): [com.addressbook.pojos.Contact@32983d64, com.addressbook.pojos.Contact@28e68a
2f, com.addressbook.pojos.Contact@377a28a3]
INFO : com.addressbook.controllers.LoginController - ----------> LoginController - displayLoginPage()
INFO : com.addressbook.security.LoginAuthenticator - ----------> authenticate() - authenticating user credentials
INFO : com.addressbook.utils.HashService - ----------> finally block hashing function
INFO : com.addressbook.security.LoginAuthenticator - ----------> username: testuser1
INFO : com.addressbook.security.LoginAuthenticator - ----------> password: 6ca13d52ca70c883e0f0bb101e425a89e8624de51db2d2392593af6a84118090
INFO : com.addressbook.security.LoginAuthenticator - ----------> user xml file path: C:\Users\jlim\addressbook\xml\users.xml
INFO : com.addressbook.security.LoginAuthenticator - ----------> reached finally block fetchUsers: [com.addressbook.pojos.User@5bdb1d55, com.addressbook.pojos.User@e62e690, com.a
ddressbook.pojos.User@7f0eff50]
INFO : com.addressbook.security.LoginAuthenticator - ----------> user exists?: true
INFO : com.addressbook.controllers.LoginController - ----------> LoginController - showHomePage()
INFO : com.addressbook.controllers.LoginController - ----------> LoginController - user from session: testuser1
INFO : com.addressbook.dao.impl.ContactDaoImpl - ----------> contacts xml file path: C:\Users\jlim\addressbook\xml\contacts.xml
INFO : com.addressbook.dao.impl.ContactDaoImpl - ----------> reached finally block fetchContactsFromXml(): [com.addressbook.pojos.Contact@2971bd51, com.addressbook.pojos.Contact@6a4426
18, com.addressbook.pojos.Contact@20212829] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T13:18:28.273

您是否在您的`web.xml`? 中添加了侦听器：

```
<listener>
    <listener-class>
        org.springframework.security.web.session.HttpSessionEventPublisher
    </listener-class>
</listener> 
```

另外，请查看[文档](http://static.springsource.org/spring-security/site/docs/3.2.x/reference/springsecurity-single.html#ns-session-mgmt)（版本 3.2，但在 3.x 中相同）

# macos - OS X Mountain Lion 上的自制 socat，sctp“不支持协议”

> ID：15606087
> 
> 赞同：4
> 
> 时间：2013-03-25T00:59:18.820
> 
> 标签：macos, osx-mountain-lion, homebrew, sctp, socat

我正在努力开发一个涉及 SCTP 协议的爱好程序，为了掌握基础知识，我尝试使用[homebrew安装](https://brew.sh/)[socat](http://www.dest-unreach.org/socat/)，socat 是一个类似 netcat 的工具，用于测试各种协议。但到目前为止，在 OS X Mountain Lion 上没有任何成功。这是安装和错误日志：

```
$ brew install socat
==> Installing socat dependency: readline
==> Downloading http://ftpmirror.gnu.org/readline/readline-6.2.tar.gz
######################################################################## 100.0%
tar: Failed to set default locale
==> Patching
patching file callback.c
patching file input.c
patching file patchlevel
patching file support/shobj-conf
patching file vi_mode.c
==> ./configure --prefix=/usr/local/Cellar/readline/6.2.4 --mandir=/usr/local/Ce
==> make install
==> Caveats
This formula is keg-only: so it was not symlinked into /usr/local.

OS X provides the BSD libedit library, which shadows libreadline.
In order to prevent conflicts when programs look for libreadline we are
defaulting this GNU Readline installation to keg-only.

Generally there are no consequences of this for you. If you build your
own software and it requires this formula, you'll need to add to your
build variables:

    LDFLAGS:  -L/usr/local/opt/readline/lib
    CPPFLAGS: -I/usr/local/opt/readline/include

==> Summary
??  /usr/local/Cellar/readline/6.2.4: 31 files, 1.6M, built in 34 seconds
==> Installing socat
==> Downloading http://www.dest-unreach.org/socat/download/socat-1.7.2.1.tar.bz2
######################################################################## 100.0%
tar: Failed to set default locale
==> Downloading patches
######################################################################## 100.0%
==> Patching
patching file xioexit.c
==> ./configure --prefix=/usr/local/Cellar/socat/1.7.2.1 --mandir=/usr/local/Cel
==> make install
  /usr/local/Cellar/socat/1.7.2.1: 8 files, 624K, built in 41 seconds 
```

你看，`homebrew`编译完成，安装`socat`成功。验证 SCTP 是否已启用

```
$ socat -V
socat by Gerhard Rieger - see www.dest-unreach.org
socat version 1.7.2.1 on Mar 25 2013 08:43:00
   running on Darwin version Darwin Kernel Version 12.2.1: Thu Oct 18 12:13:47 PDT 2012; root:xnu-2050.20.9~1/RELEASE_X86_64, release 12.2.1, machine x86_64
features:
  #define WITH_STDIO 1
  #define WITH_FDNUM 1
  #define WITH_FILE 1
  #define WITH_CREAT 1
  #define WITH_GOPEN 1
  #define WITH_TERMIOS 1
  #define WITH_PIPE 1
  #define WITH_UNIX 1
  #undef WITH_ABSTRACT_UNIXSOCKET
  #define WITH_IP4 1
  #define WITH_IP6 1
  #define WITH_RAWIP 1
  #define WITH_GENERICSOCKET 1
  #undef WITH_INTERFACE
  #define WITH_TCP 1
  #define WITH_UDP 1
  #define WITH_SCTP 1
  #define WITH_LISTEN 1
  #define WITH_SOCKS4 1
  #define WITH_SOCKS4A 1
  #define WITH_PROXY 1
  #define WITH_SYSTEM 1
  #define WITH_EXEC 1
  #define WITH_READLINE 1
  #undef WITH_TUN
  #define WITH_PTY 1
  #define WITH_OPENSSL 1
  #undef WITH_FIPS
  #undef WITH_LIBWRAP
  #define WITH_SYCLS 1
  #define WITH_FILAN 1
  #define WITH_RETRY 1
  #define WITH_MSGLEVEL 0 /*debug*/ 
```

尝试简单的 SCTP 连接

```
$ socat -  sctp4:my_server:19191
2013/03/25 08:45:46 socat[18838] E socket(2, 1, 132): Protocol not supported 
```

它失败了。在`socat`主页上它声明了 OS X 支持，但显然 sctp 可能不支持。可能是因为使用 sctp 的人太少了，我用谷歌搜索了这个错误到处都找不到任何有用的东西。

我在 Gentoo/Debian 服务器上尝试了同样的事情，它们都工作得很好，我只是无法让它在 OS X 下工作。我对 OS X 世界还很陌生，请问有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T02:26:23.510

看起来 OS X 头文件知道 SCTP 协议，但库实际上并没有实现它。您可以使用第三方扩展来破解它。

我在 OS X 10.8.3 上得到了同样的结果。安装 socat 时，它会在 configure 中检测 SCTP 支持并设置 WITH_SCTP 定义。

```
$ ./配置 | grep -i sctp
配置：警告：未找到包含文件 netpacket/packet.h，禁用接口
检查是否包括 SCTP 支持...是
检查 IPPROTO_SCTP... 是

```

但是，如果您查看`configure`，这是一个非常简单的测试。“是否包括 SCTP 支持”是是否指定了 --enable-sctp，默认情况下是打开的。而“检查 IPPROTO_SCTP”只定义了该协议常量是否在头文件中定义。也就是说，标头可以知道该协议并具有表示它的值，但底层系统可能不会实际使用。我认为情况就是这样：OS X 内核不提供 SCTP 实现。

在较新版本的 OS X 下，对 SCTP 的“初步”第三方支持：[https](https://nplab.fh-muenster.de/groups/wiki/wiki/f366c/) ://nplab.fh-muenster.de/groups/wiki/wiki/f366c/ 。安装这个让 SCTP 在自制软件中为我工作`socat`。

```
[@在~]
$ socat -d -d sctp-listen:99999 -
2013/04/24 22:19:38 socat[270] E socket(2, 1, 132): 不支持协议
2013/04/24 22:19:38 socat[270] N 出口(1)
[✘@in~]
$ sudo kextload /System/Library/Extensions/SCTP.kext
[✘@in~]
$ socat -d -d -d sctp-listen:99999 -
[……剪断……]
2013/04/24 22:20:51 socat[291] I socket(2, 1, 132) -> 3
2013/04/24 22:20:51 socat[291] 我开始接受循环
2013/04/24 22:20:51 socat[291] N 监听 LEN=16 AF=2 0.0.0.0:34463

```

**注意**：这是一个第三方内核扩展，它是“初步的”，没有很多文档，我不能保证来源。这很可能很脆弱，而且可能很难从错误中恢复过来。我会在虚拟机中执行此操作，而*不是*在您的主机中。虚拟机非常适合尝试低级别的东西和各种机器配置。（举个例子：为了弄清楚这个问题，我在我的机器上做了一堆乱七八糟的事情，并以 root 身份做了一些有问题的事情，之后，我将我的虚拟机恢复为快照，就好像它从未发生过一样。）

`libusrsctp`另一种选择是查看Homebrew中提供的“用户空间”（非内核）SCTP 支持。这不会`socat`与 SCTP 一起使用，但可能会支持您的其他爱好编程。

# php - 如何让 PHP 理解 DOCUMENT_ROOT 不是字符串？

> ID：15606088
> 
> 赞同：3
> 
> 时间：2013-03-25T00:59:21.553
> 
> 标签：php, constants

```
Notice: Use of undefined constant DOCUMENT_ROOT - assumed 'DOCUMENT_ROOT' in /home/syole/public_html/includes/config.php on line 21

Notice: Use of undefined constant DOCUMENT_ROOT - assumed 'DOCUMENT_ROOT' in /home/syole/public_html/includes/config.php on line 22 
```

PHP 已经看到一个未定义的常量，它被视为字符串，这导致我的网站只显示一个空白页面，我如何让 php 理解 DOCUMENT_ROOT 是预定义的/应该是预定义的而不是字符串？

我不知道“服务器配置”可能在哪里，但我的网站过去可以工作，现在不能，所以我认为它必须在那里正确定义，无论在哪里，最有可能在 cpanel 上？

我认为 Coda2 在连接到我的 mySQL 数据库时导致了这个问题。

我似乎无法解决这个问题，在添加之前`error_reporting(E_ALL);`，我什至不知道这个错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T01:01:57.363

不要这样做：

```
$_SERVER[DOCUMENT_ROOT] 
```

改为这样做：

```
$_SERVER['DOCUMENT_ROOT'] 
```

您需要引用字符串（这是），而不是常量（不是）。

如果您在插值字符串中使用它，请这样做：

```
$a = "foo {$_SERVER['DOCUMENT_ROOT']} bar"; 
```

大`{}`括号允许您在双引号字符串中使用单引号/双引号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T01:04:11.747

将此添加到您的配置文件中

```
 define('DOCUMENT_ROOT', $_SERVER['DOCUMENT_ROOT']); 
```

如果您想坚持当前的持续通话。或者你应该按照@cal 的建议去做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T01:03:21.713

XDebug 表示这`'DOCUMENT_ROOT'`是一个字符串，在 Array() 内`$_SERVER`。

```
echo $_SERVER['DOCUMENT_ROOT'].'<br />';

echo gettype($_SERVER).'<br />';
echo gettype($_SERVER['DOCUMENT_ROOT']).'<br />';

echo '<pre>';
print_r($_SERVER);
echo '<pre>'; 
```

# java - J2SE JPA 持久性行为

> ID：15606093
> 
> 赞同：0
> 
> 时间：2013-03-25T01:00:39.693
> 
> 标签：java, hibernate, jpa, persistence

我目前正在开发一个桌面应用程序（J2SE）。我正在尝试使用 jpa 来持久化我的对象，但我得到了一些奇怪的结果。
我有一个可以生孩子的实体。当我坚持上层对象时，它不会坚持它的孩子。这是我的实体：

```
@Entity
@Table(name = "Group")
public class Group {

/**
 * The identifier
 */
@Id
@GeneratedValue(generator = "increment")
@GenericGenerator(name = "increment", strategy = "increment")
private int id;
/**
 * The name label
 */ 
@Column(name = "NAME", length = 60, nullable = true)

private String name;
/**
 * The parent
 */

@ManyToOne
@JoinColumn(name="PARENT_ID")
private Group parent;
/**
 * The children
 */
@OneToMany(mappedBy="parent")
private List<Group> children;

/**
 * Default constructor
 */
public Group() {

}

/**
 * Const using fields
 * 
 * @param name
 * @param parent
 * @param children
 */

public Group(String name, Group parent,
        List<Group> children) {
    super();
    this.name = name;
    this.parent = parent;
    this.children = children;
}

/**
 * @return the id
 */
public int getId() {
    return id;
}

/**
 * @param id
 *            the id to set
 */

public void setId(int id) {
    this.id = id;
}

/**
 * @return the name
 */
public String getName() {
    return name;
}

/**
 * @param name
 *            the name to set
 */
public void setName(String name) {
    this.name = name;
}

/**
 * @return the parent
 */
public Group getParent() {
    return parent;
}

/**
 * @param parent
 *            the parent to set
 */

public void setParent(Group parent) {
    this.parent = parent;
}

/**
 * @return the children
 */
public List<Group> getChildren() {
    return children;
}

/**
 * @param children
 *            the children to set
 */
public void setChildren(List<Group> children) {
    this.children = children;
}
} 
```

这是我的测试方法：

```
...

    // the entity manager
    EntityManager entityManager = entityManagerFactory
            .createEntityManager();
    entityManager.getTransaction().begin();

    // create a couple of groups...
    Group gp = new Group("first", null, null);
    Group p = new Group("second", null, null);
    p.setParent(gp);
    Group f = new Group("third", null, null);
    f.setParent(p);

    // set gp children
    List<Group> l1 = new ArrayList<Group>();
    l1.add(p);
    gp.setChildren(l1);

    // set p children
    List<Group> l2 = new ArrayList<Group>();
    l2.add(f);
    p.setChildren(l2);

    // persisting 
    entityManager.persist(gp); 
```

任何想法？
提前
感谢阿姆鲁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T01:05:25.160

您需要单独保留所有实体，或者`cascade=ALL`在`@OneToMany`.

仅仅将实体添加到集合中不会持久化子实体。级联是使其他可访问实体通过单个`entityManager.persist`调用持续存在的魔法。

# c++ - Strupstrup 图形库错误

> ID：15606097
> 
> 赞同：2
> 
> 时间：2013-03-25T01:01:03.547
> 
> 标签：c++, graphics, fltk

我是*C++*新手，在我的编程设计和概念介绍课程中，我们现在讨论图形。我已经能够仅使用*FLTK*的库制作程序，但我们必须使用 Bjarne 的库，例如`GUI.h`, `Graph.h`, `Simple_window.h`, `Point.h`。像简单窗口程序这样的简单程序不会编译并给出通常的响应：

```
Simple_window.h:17: error: reference to ‘Window’ is ambiguous 
```

我也试过编译使用：

```
fltk-config --compile main.cpp 
```

这会产生相同的结果。

我尝试运行 Bjarne 在文件夹中提供的 make 文件，但总是出现错误并且不生成`.o`文件。

注意：我也试过在 mac *OSX*和*Ubuntu*上编译。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T01:38:20.000

我从未使用过这些库中的任何一个，但我看到 FLTK 的教程总是以`using namespace fltk;`语句开头，该语句导入所有 FLTK 类，包括`fltk::Window`到根命名空间。

B. Stroustrup 的库包含在名为的命名空间中`Graph_lib`，它还有一个名为 的类`Window`。现在，该文件在开头`Simple_window.h`有语句，该语句导入到根命名空间。这就是歧义的来源。`using namespace Graph_lib;``Graph_lib::Window`

所以我建议省略该`using`语句（至少 from `using namespace fltk`）并使用具有完整规范的 FLTK 类（例如`fltk::Window`，而不是 just `Window`）。这应该解决歧义。

作为旁注，这是一个很好的例子，为什么`using namespace`在头文件中的文件级别是一个坏主意。

参考资料：
[http ://www.fltk.org/doc-2.0/html/index.html](http://www.fltk.org/doc-2.0/html/index.html) [http://www.stroustrup.com/Programming/Graphics/Simple_window.h](http://www.stroustrup.com/Programming/Graphics/Simple_window.h)

**编辑**：我试图编译包含`Simple_window`我自己的库，至少在 linux 下，它的歧义似乎在库中的类和xlib 中`Graph_lib::Window`的 typedef之间。`Window`xlib 是 C 库，你不能对它做任何事情，所以你必须摆脱`using namespace Graph_lib`Stroustup 的库。

在文件中`Simple_window.h`：

*   删除`using namespace Graph_lib;`
*   更改`Window`为`Graph_lib::Window`
*   `Button`至`Graph_lib::Button`
*   并`Address`_`Graph_lib::Address`

然后在文件中`Simple_window.cpp`：

*   再次更改`Address`为`Graph_lib::Address`
*   并`reference_to<Simple_window>`_`Graph_lib::reference_to<Simple_window>`

然后它应该编译。如果您的版本与 stroustrup.com 上的版本不同，您可能需要完全限定（添加`Graph_lib::`）更多类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-29T18:44:24.620

I just had the same kind of problems (unresolved external symbols) using `Simple_window.h` and trying to compile a the following peace of code:

```
 int main(){

    // create a reference point for the window
    Point topLeft(50,50);
    // initialize a Simple_window object to size: 600x400 pixels, labeled: My window
    Simple_window myWindow(topLeft, 600, 400, "My window");
    // pass control to GUI 
    myWindow.wait_for_button();

    return 0;
    } 
```

The solution was to add to the project (along with the `main.cpp`) all the respective `.cpp` files of the included `.h` files:(`"Graph.h"`, `"Window.h"`, `"Simple_window.h"`, `"GUI.h"`)

# vim - 当 cursorline 突出显示一行时，设置 listchars 的可见性和/或颜色或在 vim 中隐藏 cchar

> ID：15606098
> 
> 赞同：10
> 
> 时间：2013-03-25T01:01:28.767
> 
> 标签：vim, vim-syntax-highlighting

我知道我可以使用 set`list listchars=...`来显示`NonText`和`SpecialKey`字符，以突出显示不同种类的非文本字符。一般来说，这是直截了当的并且有效。但它有一个让我感到不安的视觉副作用——当光标线设置为打开时，将光标“悬停”在一行上时，`listchars`会以不同的颜色突出显示。[该线程](https://stackoverflow.com/questions/8248872/in-vim-can-you-stop-the-color-change-of-white-space-characters-with-set-cursorl)中已经提到了该问题，并且似乎没有解决该行为的解决方案。

结果，我开始使用隐藏功能，这给了我不同的结果。`set concealcursor=n||v||i||c`让我控制隐藏字符在哪些模式下可见。我希望能够始终看到隐藏的字符，所以我设置了以下内容：

```
function! ConcealNonText()
    set conceallevel=1
    set concealcursor=nvic
    syntax match NonText / / conceal cchar=·
endfunction

augroup ConcealNonText
    autocmd!
    autocmd VimEnter * call ConcealNonText()
augroup END 
```

结果，无论我当前处于哪种模式，它都会突出显示始终可见的所有空间。但同样有一个令人不安的副作用 - 当我在可视模式下标记线条或用光标线突出显示线条时，突出显示区域在隐藏的地方被打断字符被找到。只需查看屏幕截图：

具有选定区域的可视模式：

![Vim 在可视模式下隐藏字符](../Images/4c0f0f60c2ccfdfca2b0db4039bdd732.png)

带光标线的普通模式：

![Vim 在普通模式下用光标线隐藏字符](../Images/354fb22109da15fd9e733af73c7b30ee.png)

所以我想让我们试试`set concealcursor=ic`。这导致不间断的突出显示区域，但随后字符被隐藏。

![在此处输入图像描述](../Images/bfedf0909b81ec03457b285ade572028.png)

那么我在这篇文章开头提到的线程是否有某个地方和某种解决方案，或者有什么方法可以使光标线和视觉选择区域在使用时不受干扰`set concealcursor=nvic`？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-04-01T11:22:35.017

我相信您设置了“光标线”。高亮组定义相同的`CursorLine`高亮。你`set nocursorline`，（可以加快线条移动）或更改`CursorLine`高亮组 fg 颜色。

# php - 试图剥离侧边栏登录代码以退出（wordpress / woocommerce）

> ID：15606104
> 
> 赞同：0
> 
> 时间：2013-03-25T01:02:15.467
> 
> 标签：php, ajax, wordpress, logout, woocommerce

我是 php 新手，但我正试图杀死这条龙，就好像我不是一样。

我的 wordpress/woocommerce 网站将用作商店，但有一个错误阻止了作为客户注销的简单解决方案（不是元注销 - 只是商店/用户级别的注销）。

我正在尝试重新使用此代码[http://wordpress.org/extend/plugins/sidebar-login/](http://wordpress.org/extend/plugins/sidebar-login/)以在有人登录时仅显示“注销”，而在用户注销时不显示任何内容。

[侧边栏登录在 github 上。][1]

[1]：[https](https://github.com/mikejolley/sidebar-login) ://github.com/mikejolley/sidebar-login感谢任何人提供的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T03:46:36.940

在 sidebar-login/includes/class-sidebar-login-widget.php 下

[https://github.com/mikejolley/sidebar-login/blob/master/includes/class-sidebar-login-widget.php#L239-L284](https://github.com/mikejolley/sidebar-login/blob/master/includes/class-sidebar-login-widget.php#L239-L284)

更换线路：239 - 284

有了这个：

```
 if ( is_user_logged_in() ) {

        $logged_in_title = $this->replace_tags( apply_filters( 'sidebar_login_widget_logged_in_title', $logged_in_title ) );

        if ( $logged_in_title )
            echo $before_title . $logged_in_title . $after_title;

        do_action( 'sidebar_login_widget_logged_in_content_start' );

        if ( $show_avatar == 1 )
            echo '<div class="avatar_container">' . get_avatar( $this->user->ID, apply_filters( 'sidebar_login_widget_avatar_size', 38 ) ) . '</div>';

        echo '<ul class="pagenav sidebar_login_links"><li class="logout-link"><a href="'. wp_logout_url(home_url()) .'">Logout</a></li></ul>';

        do_action( 'sidebar_login_widget_logged_in_content_end' );

    // Logged out user
    } else {} 
```

# javascript - ext js 树：发生后渲染事件时如何动态加载节点？

> ID：15606116
> 
> 赞同：1
> 
> 时间：2013-03-25T01:03:42.917
> 
> 标签：javascript, extjs, tree, extjs4

主要任务是在加载树面板后使用 ajax 动态打开一个分支。用户不应进行任何点击。它应该在页面加载后自行扩展。

我尝试使用 afterrender 事件递归加载节点。但我无法在那里获得当前的树对象。这一步是空的。

这就像 expandAll 调用。此代码也不适用于 afterrender 事件：

```
 tree.expandAll(function() {
     tree.getEl().unmask();
    toolbar.enable();
  }); 
```

那么，如何使用 ajax 加载节点？

**更新 1：** 上面的代码现在可以工作了。我只是在“树”定义之后添加此代码。但问题仍然存在。如何使用ajax加载一个节点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T07:51:37.423

你不能像大多数例子一样使用树店吗？如果你这样做了，树会自动从 store 中请求节点，并且 store 会从服务器加载东西。鉴于您的服务器代码可以在给定特定节点的情况下发回分支。

[请参阅 Sencha Kitchen Sink 演示，该演示使用 TreeStore 对服务器进行操作。](http://docs.sencha.com/extjs/4.2.0/extjs-build/examples/build/KitchenSink/ext-theme-neptune/#tree-reorder)

如果您在 Chrome 中打开开发人员工具，转到网络选项卡，然后在树中展开一个节点，您将看到 TreeStore 将通过从给定 id 的“get-nodes.php”请求数据来自动加载该节点的子节点展开的节点。

您可以通过简单地调用`.expand()`它来扩展节点。

如果这不起作用，你可以只加载模型，当你拥有它时，将它添加到树中并像这样展开父级：

```
MyApp.model.MyTreeModel.load(someId, {
    success: function (record, operation) {
        // If the third param is true the search will be recursive from the supplied node
        var node = tree.getRootNode().findChild('id', someParentId, true);
        node.addChild(record);
        node.expand();
    },
    scope: this
}); 
```

你的问题有点宽泛，所以我希望这对你有所帮助。

您可能想查看[有关如何操作树的 Ext.data.NodeInterface 文档。](http://docs.sencha.com/extjs/4.1.3/#!/api/Ext.data.NodeInterface)

# php - 为什么首页不滚动

> ID：15606121
> 
> 赞同：0
> 
> 时间：2013-03-25T01:04:20.950
> 
> 标签：php, css, html, twitter-bootstrap

我有一个简单的问题，但我找不到错误：

我的 index.php 包括每个*开关*include1.php 的“index.php?do=show”。这又从 objects.php 调用一个对象，该对象遍历 mysql 查询并将每个项目放入一个*元素。虽然我的项目多于我的屏幕一次能够显示的项目，但我没有滚动条，而且无论如何也无法滚动。我该如何解决？Twitter Bootrstrap 是前端框架。*

 *这里 objects.php 中使用的代码确实显示了 mysql 查询：

```
while ($row = mysql_fetch_array($result, MYSQL_NUM)) {

    echo "
                <div class='row'>
                <div class='span4 showmoment'>".$row[0]."<br>
                <br>
                 - <I>created: ".$row[1]."</I> </div>
            </div><br>
            ";
} 
```

showmoment 是一个由我定义的类。其余的是引导类。

```
.showmoment {
-moz-border-radius:5px; /* Firefox */
-webkit-border-radius:5px; /* Safari, Chrome */
-khtml-border-radius:5px; /* Konqueror */
border-radius:5px; /* CSS3 */
background-color: #E6E6E6;
padding-top:20px;
padding-right:2px;
padding-bottom:10px;
padding-left:12px
} 
```

**解决了：**

我通过发现缺少关闭`</div>`来 解决了这个问题。`<div class="navbar navbar-inverse navbar-fixed-top">`还是要谢谢你的帮助！*

# ruby-on-rails - Rails/NGinx - 无法获得页面工作的 gzip 压缩

> ID：15606123
> 
> 赞同：0
> 
> 时间：2013-03-25T01:04:24.217
> 
> 标签：ruby-on-rails, nginx, passenger

我有一个在 Ubuntu 上运行并使用Passenger 的Rails 应用程序（3.2.x）。

我添加了选项

```
gzip on; 
```

进入 nginx.conf 文件，但测试页面

```
http://www.gidnetwork.com/tools/gzip-test.php 
```

显示未使用压缩。

我的 nginx.conf 文件如下所示：

```
worker_processes  8;
events {
    worker_connections  1024;
}
http {
    passenger_root /usr/local/rvm/gems/ruby-1.9.3-p392/gems/passenger-3.0.19;
    passenger_ruby /usr/local/rvm/wrappers/ruby-1.9.3-p392/ruby;
    include       mime.types;
    default_type  application/octet-stream;
    sendfile        on;
    keepalive_timeout  65;
    gzip  on;
    server {
      listen    80;
      server_name  xxx.com;
      root /var/www/xxx/public;  
      rewrite        ^ https://$server_name$request_uri? permanent;
      passenger_enabled on;
    }
    server {
      listen 443;
      server_name xxx.com;
      root /var/www/xxx/public;
      passenger_enabled on;
      ssl on;
      ssl_certificate     /etc/ssl/private/ssl_xxx_com_certificate.txt;
      ssl_certificate_key /etc/ssl/private/ssl_xxx_com_private_key.txt;
      ssl_client_certificate /etc/ssl/private/cabundle.txt;
      ssl_session_timeout  5m;
      ssl_protocols  SSLv2 SSLv3 TLSv1;
      ssl_ciphers  HIGH:!aNULL:!MD5;
      ssl_prefer_server_ciphers   on;
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T10:54:25.903

你 gzip 正在工作。也许您不应该使用网络浏览器来验证这一点。我使用了 curl，它显示 gzip 已打开。见最后一行。

```
 curl -IL -H "accept-encoding: gzip" http://vircurex.com/
HTTP/1.1 301 Moved Permanently
Server: nginx/1.2.6
Date: Mon, 25 Mar 2013 10:52:42 GMT
Content-Type: text/html
Content-Length: 184
Connection: keep-alive
Location: https://vircurex.com/

HTTP/1.1 200 OK
Content-Type: text/html; charset=utf-8
Connection: keep-alive
Status: 200
X-Powered-By: Phusion Passenger (mod_rails/mod_rack) 3.0.19
X-UA-Compatible: IE=Edge,chrome=1
ETag: "b36d8bb7e713ad93aeb6e5fb1e351135"
Cache-Control: max-age=0, private, must-revalidate
Set-Cookie: v0100session=BAh7CUkiD3Nlc3Npb25faWQGOgZFRkkiJTEyZjQ0ZGJjOWI0NTQ4ZGMwNGQxZWM2YTNiZWJjZDcxBjsAVEkiFmlucHV0X2RldmljZV90eXBlBjsARkkiCk1PVVNFBjsARkkiFGhvdmVyX3N1cHBvcnRlZAY7AEZUSSIQX2NzcmZfdG9rZW4GOwBGSSIxRmNkOGViQXlTL0t1K3l2TTlVVUQwbmFZVW1VZHpoQ1kwT2JkZlhrU3pDZz0GOwBG--3cc39d4d71943811224fb350b8ed6cd0a7d6e363; path=/; HttpOnly
X-Request-Id: c1be4f7e0ebaffbdfd7a1da0b47143c8
X-Runtime: 0.154884
Date: Mon, 25 Mar 2013 10:52:47 GMT
X-Rack-Cache: miss
Server: nginx/1.2.6 + Phusion Passenger 3.0.19
Content-Encoding: gzip 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T01:20:08.207

您的问题是您没有指定 gzip 的类型。将以下行添加`gzip_types`到您的配置文件中：

```
gzip on;
gzip_types text/css text/xml application/x-javascript application/atom+xml text/mathml text/plain text/vnd.sun.j2me.app-descriptor text/vnd.wap.wml text/x-component; 
```

您可能需要调整类型以适合您的配置。

请注意，`text/html`默认情况下是启用的，因此您不必指定它。如果您使用 http 调试器，您将看到您当前的配置（没有上述`gzip_types`行）确实对`php`文件进行了 gzip 压缩，但对其他类型没有。

# validation - 果园 - 电子邮件验证

> ID：15606125
> 
> 赞同：0
> 
> 时间：2013-03-25T01:04:27.997
> 
> 标签：validation, orchardcms

是否可以验证用户是否以正确的格式输入了电子邮件地址？（如果里面有任何东西）。

编辑：是否可以在自定义“内容类型”中执行此操作？例如，当我在“果园”中为“内容类型”和“电子邮件”字段创建表单时。有什么方法可以在 Orchard 中创建可以自我验证的“内容部分”？

谢谢，

雅库布

# php - 传递多个参数 Hello as the title suggests, I am trying to pass over multiple parameters with the option drop down list and dont know how to do it. I have this code below: echo '<select name="tickets">'; wh ID：15606135 赞同：0 时间：2013-03-25T01:05:25.907 标签：php, sql, sql-server 回答 #1 赞同：0 时间：2013-03-25T01:31:30.207 为什么不将门票价格与门票 ID 存储在同一张表中？然后，当您提交表单时，您可以根据票证 ID 从数据库中检索所有票证信息。</select>

# python - 从python中的字符串列表中删除标点符号

> ID：15606138
> 
> 赞同：-1
> 
> 时间：2013-03-25T01:05:50.890
> 
> 标签：python, punctuation

可以说我有一个

```
[["Hello, world!"],["Hello!!, WORLD!!"]] 
```

我希望它产生

```
[["Hello","world"],["Hello","WORLD"]] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T01:10:08.017

我会使用正则表达式：

```
>>> import re
>>> text = "Hello!!, WORLD!!"
>>> re.findall(r'\w+', text)
['Hello', 'WORLD'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T01:14:11.737

```
word_list = #your word list
punctuation_marks = re.compile(r'[.?!,":;]') 
new_word_list = []
for words in word_list:
    sub_list = []
    for word in words:
        w = punctuation_marks.sub("", word)
        sub_list.append(w)
    new_word_list.append(sub_list) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T01:20:04.377

不使用正则表达式的版本：

```
import string

def remove_punctuation_and_split(word):
    return word.translate(None, string.punctuation).split()

remove_punctuation_and_split('Hello, world!!')
['Hello', 'world'] 
```

# php - 如何使用非阻塞会话存储？

> ID：15606141
> 
> 赞同：-1
> 
> 时间：2013-03-25T01:06:01.003
> 
> 标签：php, mysql

我知道会话文件存储会阻止 http 请求。

我知道可以使用 session_write_close() 方法来解锁文件阻塞，

但我想知道如果我使用 mysql store 进行会话，它仍然会阻止 http 请求吗？

如果我使用 mysql store 进行会话，我还需要使用 session_write_close() 方法来解锁吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T01:11:15.747

> 但我想知道如果我使用 mysql store 进行会话，它仍然会阻止 http 请求吗？

不，记录 mysql 不能以标准方式在不同连接之间锁定。

# python - 在 QFrame 内移动（拖动）一个 QLabel

> ID：15606143
> 
> 赞同：1
> 
> 时间：2013-03-25T01:06:08.723
> 
> 标签：python, qt, drag-and-drop, pyqt, pyside

我需要能够在背景图像顶部的屏幕上显示控件。我已经完成了该任务，并且已经创建并显示了一个控件（显示图像的 QLabel）。现在我需要能够通过将标签拖动到我希望移动它的位置来移动标签，我已经遵循了几个关于在 pyqt 中拖动的教程，但我未能完成这项任务

这是我的代码。注意控件可以移动，但是当你移动它时，背景也会移动，当你放下它时，它会保持在原来的位置。我想要的是只移动控件（显示图像的 QLabel）并移动它只是在选项卡内拖动：

```
import sys
from PyQt4.QtCore import *
from PyQt4.QtGui import *

class CentralWidget(QFrame):
    def __init__(self, *args):
    super(CentralWidget, self).__init__(*args)
    self.setStyleSheet("background-image: url(logo.png);")
    self.setAcceptDrops(True)

    def dragEnterEvent(self, e):
        e.accept()

    def dropEvent(self, e):
        # get the relative position from the mime data
        mime = e.mimeData().text()
        x, y = map(int, mime.split(','))
        # move
        # so move the dragged button (i.e. event.source())
        e.source().move(e.pos()-QPoint(x, y))
        # set the drop action as Move
        e.setDropAction(Qt.MoveAction)
        # tell the QDrag we accepted it
        e.accept()

class Selector(QLabel):
    def mouseMoveEvent(self, e):
        if e.buttons() != Qt.LeftButton:
            return

        # write the relative cursor position to mime data
        mimeData = QMimeData()
        # simple string with 'x,y'
        mimeData.setText('%d,%d' % (e.x(), e.y()))

        # let's make it fancy. we'll show a "ghost" of the button as we drag
        # grab the button to a pixmap
        pixmap = QPixmap.grabWidget(self)

        # below makes the pixmap half transparent
        painter = QPainter(pixmap)
        painter.setCompositionMode(painter.CompositionMode_DestinationIn)
        painter.fillRect(pixmap.rect(), QColor(0, 0, 0, 127))
        painter.end()

        # make a QDrag
        drag = QDrag(self)
        # put our MimeData
        drag.setMimeData(mimeData)
        # set its Pixmap
        drag.setPixmap(pixmap)
        # shift the Pixmap so that it coincides with the cursor position
        drag.setHotSpot(e.pos())

        # start the drag operation
        # exec_ will return the accepted action from dropEvent
        if drag.exec_(Qt.MoveAction) == Qt.MoveAction:
            print 'moved'
        # else:
            # print 'copied'

    def mousePressEvent(self, e):
        QLabel.mousePressEvent(self,e)
        if e.button() == Qt.LeftButton:
            print 'press'

class fPrincipal(QMainWindow):
    def __init__(self, parent=None):
    # Call base class constructor
    QMainWindow.__init__(self, parent)

    self.setGeometry(QRect(0, 0, 599+10, 399+10))
    self.move(QDesktopWidget().availableGeometry().center() - self.frameGeometry().center())

    # Creamos el contenedor central, que sera organizado por pestañas
    centralWidget = QTabWidget()
    self.setCentralWidget(centralWidget);

    # Creamos la 1ra pestaña
    tab = CentralWidget()

    tabLayout = QHBoxLayout()
    tab.setLayout(tabLayout)

    # Añadimos la pestaña al contenedor central
    centralWidget.addTab(tab,"Escena 1")

    logDockWidget = QDockWidget("Tools", self)
    logDockWidget.setObjectName("LogDockWidget")
    logDockWidget.setAllowedAreas(Qt.LeftDockWidgetArea | Qt.RightDockWidgetArea)
    self.addDockWidget(Qt.RightDockWidgetArea, logDockWidget)

    def crearMenu():
        mimenu = self.menuBar().addMenu("&Archivo")

    crearMenu()
    selectorLb = Selector()
    picture = QPixmap('D:\Adrian\Tesis\Codigo\selector.png')
    selectorLb.setPixmap(picture)
    tabLayout.addWidget(selectorLb)     

if __name__ == "__main__":
    app = QApplication(sys.argv)

    w = fPrincipal()
    w.show()

    sys.exit(app.exec_()) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T19:08:36.663

查看[PyQt 冰箱磁铁示例](http://ftp.ics.uci.edu/pub/centos0/ics-custom-build/BUILD/PyQt-x11-gpl-4.7.2/examples/draganddrop/fridgemagnets/)，这是一个简化版本：

```
#!/usr/bin/env python
#-*- coding:utf-8 -*-

import sip
sip.setapi('QString', 2)

from PyQt4 import QtCore, QtGui

myMimeType = 'application/MyWindow'

class MyLabel(QtGui.QLabel):
    def __init__(self, parent):
        super(MyLabel, self).__init__(parent)

        self.setStyleSheet("""
            background-color: black;
            color: white;
            font: bold;
            padding: 6px;
            border-width: 2px;
            border-style: solid;
            border-radius: 16px;
            border-color: white;
        """)

    def mousePressEvent(self, event):
        itemData   = QtCore.QByteArray()
        dataStream = QtCore.QDataStream(itemData, QtCore.QIODevice.WriteOnly)
        dataStream.writeString(self.text())
        dataStream << QtCore.QPoint(event.pos() - self.rect().topLeft())

        mimeData = QtCore.QMimeData()
        mimeData.setData(myMimeType, itemData)
        mimeData.setText(self.text())

        drag = QtGui.QDrag(self)
        drag.setMimeData(mimeData)
        drag.setHotSpot(event.pos() - self.rect().topLeft())

        self.hide()

        if drag.exec_(QtCore.Qt.MoveAction | QtCore.Qt.CopyAction, QtCore.Qt.CopyAction) == QtCore.Qt.MoveAction:
            self.close()

        else:
            self.show()

class MyFrame(QtGui.QFrame):
    def __init__(self, parent=None):
        super(MyFrame, self).__init__(parent)

        self.setStyleSheet("""
            background-color: lightgray;
            border-width: 2px;
            border-style: solid;
            border-color: black;
            margin: 2px;
        """)

        y = 6
        for labelNumber in range(6):
            label = MyLabel(self)
            label.setText("Label #{0}".format(labelNumber))
            label.move(6, y)
            label.show()

            y += label.height() + 2

        self.setAcceptDrops(True)

    def dragEnterEvent(self, event):
        if event.mimeData().hasFormat(myMimeType):
            if event.source() in self.children():
                event.setDropAction(QtCore.Qt.MoveAction)
                event.accept()

            else:
                event.acceptProposedAction()

        else:
            event.ignore()

    def dropEvent(self, event):
        if event.mimeData().hasFormat(myMimeType):
            mime       = event.mimeData()
            itemData   = mime.data(myMimeType)
            dataStream = QtCore.QDataStream(itemData, QtCore.QIODevice.ReadOnly)

            text = QtCore.QByteArray()
            offset = QtCore.QPoint()
            dataStream >> text >> offset

            newLabel = MyLabel(self)
            newLabel.setText(event.mimeData().text())
            newLabel.move(event.pos() - offset)
            newLabel.show()

            if event.source() in self.children():
                event.setDropAction(QtCore.Qt.MoveAction)
                event.accept()

            else:
                event.acceptProposedAction()

        else:
            event.ignore()

class MyWindow(QtGui.QMainWindow):
    def __init__(self, parent=None):
        super(MyWindow, self).__init__(parent)

        self.myFrame = MyFrame(self)

        self.setCentralWidget(self.myFrame)

if __name__ == "__main__":
    import sys

    app = QtGui.QApplication(sys.argv)
    app.setApplicationName('MyWindow')

    main = MyWindow()
    main.resize(333, 333)
    main.move(app.desktop().screen().rect().center() - main.rect().center())
    main.show()

    sys.exit(app.exec_()) 
```

![图片](../Images/ceca5f264b36f50c4ef00553ebd4dcbd.png)

# php - 使用 jQ ajax 和 php 返回为空的数据库表值

> ID：15606144
> 
> 赞同：0
> 
> 时间：2013-03-25T01:06:09.110
> 
> 标签：php, ajax, jquery

我正在尝试将存储有文本值的 javascript 变量（名称、标题、描述、类型）传递给使用 AJAX 的 PHP 脚本。PHP 脚本然后将这些变量文本值插入到它们相应的表列中。

但是在 phpMyAdmin 中，我看到每当调用我的 $.get （我也尝试过 $.post ）函数时，都会创建一个新行，但它只是具有**null 值**。下面的代码在语法方面是否有任何错误？可以像我在下面做的那样将变量作为对象传递吗？因为在我见过的所有例子中，我只看到`name: 'smith'`或`type: 1`类似的东西。

我知道将我的变量命名为与表列标题相同可能是不好的做法，但理论上它应该可以工作，对吧？

**jQuery AJAX**

```
var datavar = {
            name: name,
            title: title,
            description: description,
            longitude: longitude,
            latitude: latitude,
            type: type,
        };

        $.get('school2.php', datavar, function(data) {
                $("#output").html(data);
             }); 
```

**PHP**

```
$sql="INSERT INTO markers (name, title, description, type)
VALUES
('$_GET[name]', '$_GET[title]', '$_GET[description]', '$_GET[type]')"; 
```

如果我用数组括号和撇号在对象名称上编写对象文字，如下所示：

```
var datavar = [{
            'name': name,
            'title': title,
            'description': description,
            'longitude': longitude,
            'latitude': latitude,
            'type': type,
            }]; 
```

我看到在我的数据库表中，我得到的只是默认文本值“名称”、“标题”、“描述”等，而不是 null。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T01:09:38.283

`$_GET[x]`不正确，应该是`$_GET['x']`。尝试这个：

```
$sql="INSERT INTO markers (name, title, description, type)
VALUES
('".$_GET['name']."', '".$_GET['title']."', '".$_GET['description']."', '".$_GET['type']."')"; 
```

此外，作为旁注，您可能希望清理数据库输入以防止[SQL 注入](http://www.unixwiz.net/techtips/sql-injection.html)。

# sql - SQL/MYSQL：如何显示 3 个相同的表（来自 3 个不同的数据库文件），就好像它是一个表一样

> ID：15606146
> 
> 赞同：0
> 
> 时间：2013-03-25T01:06:37.143
> 
> 标签：sql, vba, ms-access, ms-access-2007

我有一个包含大约 500 万条记录的 ORACLE 表，并且还在不断增长。他们正在使用访问将数据导出到（从 Oracle 到 Access）。无论我向他们提出什么建议，他们都不会改变他们的系统。

因此，为了能够处理数据并将其导出到 Excel，我必须将数据拆分为 3 个数据库文件。例如，假设我有表

> database1.TBL_A_to_G
> 
> database2.TBL_H_to_O
> 
> 数据库3.TBL_P_to_Z

由于它们来自单个表，因此它们具有相同的字段。比方说，

> 字段 1、字段 2、字段 3...字段 30

如何在访问中获取查询，从 3 个表中获取数据，就好像它是一个一样？

我试过了

> 从 TBL_A_to_G 中选择字段 1、字段 2、字段 3、字段 4、...字段 30
> 
> 联盟
> 
> SELEC Field1, Field2, Field3, Field4, ... Field30 FROM TBL_H_to_O

-我必须将此查询保存为 TBL_A_O 然后，

> 从 TBL_A_O 中选择字段 1、字段 2、字段 3、字段 4、...字段 30
> 
> 联盟
> 
> 从 TBL_P_to_Z 中选择字段 1、字段 2、字段 3、字段 4、...字段 30

这种方法的问题是我不能在一个查询语句中合并三个表。我收到一条错误消息，说我可以合并那么多字段。另外，我仍然遇到一些性能问题。我需要找到一种方法来考虑性能。

我也对替代品持开放态度。目标是从这 3 个表（在三个不同的数据库中）中获取数据，然后将它们作为查询（使用公式等）导出到 excel 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T01:11:12.877

尝试`union all`改用：

```
SELECT Field1, Field2, Field3, Field4, ... Field30 FROM TBL_A_to_G
UNION ALL
SELECT Field1, Field2, Field3, Field4, ... Field30 FROM TBL_H_to_O
union all
SELECT Field1, Field2, Field3, Field4, ... Field30 FROM TBL_P_to_Z 
```

每个表只有 30 个字段，这对于 Access 应该没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T02:18:10.407

首先，您需要知道是否要重复寄存器，如果是，请使用 UNION ALL，否则使用 UNION。可能您必须从 ACCESS 更新统计信息以提高性能。关于字段问题，您是否使用错误的名称来访问数据，请记住 UNION/UNION ALL 将第一个查询的字段名称用于结果表。

# ios - Objective-C 是 @synthesize 是必需的还是可选的？

> ID：15606151
> 
> 赞同：33
> 
> 时间：2013-03-25T01:06:49.943
> 
> 标签：ios, objective-c

对不起，我是一个新手 iOS 开发人员，最近我听说 @synthesize 现在在某个版本的 Xcode 中是 @synthesize 并且编译器将自动合成和属性并将 _ 分配给私有变量。

我已经对此进行了测试：

没有@synthesize，您可以使用访问属性和私有字段

```
self.property_name = something;
_property_name = something; //(used in getter and setters) 
```

使用@synthesize property_name，您可以使用访问属性和私有字段

```
self.property_name = something;
property_name = something; 
```

我的问题是我们真的需要@synthesize 了吗？还是我错过了一个更大的故事？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-03-25T01:11:42.223

不，从 Xcode 4.4 开始，我们不需要这样做，它添加了一个名为 Default Synthesis Of Properties 的功能。

简而言之，它会自动生成：

```
@synthesize name = _name; 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2015-02-25T17:04:42.630

除非你一直像我一样使用它，否则你仍然需要它，据我所知：

在.h中：

```
@property int32_t FwdID; 
```

以 .m 为单位：

```
@synthesize FwdID; 
```

类内用法：

```
FwdID = 0; 
```

据我所知，如果你想让默认值为你工作，你必须输入 _FwdID = 0; 在代码中，这对我来说看起来很难看。

因此，如果您像我一样（打破了我假设的所有标准编码约定），您仍然需要使用 synthesize。

# database - 大CMS数据库结构

> ID：15606152
> 
> 赞同：2
> 
> 时间：2013-03-25T01:06:54.513
> 
> 标签：database, algorithm, data-structures, structure

我正在开发大型 cms，有 2 个级别：管理员、客户。

这是我的数据库结构

**表名：** `app_Clients`

**列：**

```
ID(INT A_I) 

site_code(VARCHAR) 

database_id(INT) - *many-to-many relationship with app_Databases table*

license_id(INT) - *many-to-many relationship with app_Licenses table (not important for the problem)* 
```

**名称：** `app_Databases`

**列：**

```
ID(INT A_I) 

database_user(VARCHAR)

database_name(VARCHAR)

database_password(VARCHAR) 
```

![描述情况的图像](../Images/365932f6bd202e3d238cb59026dbd867.png)

一切都很好，但是如果我向系统中添加了一个新模型，该模型需要客户端数据库上的新表或新列，该怎么办？

我必须遍历每个客户端数据库并更改/编辑结构是没有意义的。

**有人对不同的解决方案有想法吗？**

# ruby-on-rails - RoR Impressionist 捕获外部点击

> ID：15606156
> 
> 赞同：1
> 
> 时间：2013-03-25T01:07:39.187
> 
> 标签：ruby-on-rails, ruby-on-rails-3, web-services, hyperlink, impressions

我正在使用印象派 gem 来记录页面浏览量。
假设我有一个 Question 模型和一个 Answer 模型：

问题.rb：

```
class Question< ActiveRecord::Base
  has_many :answers
  is_impressionable 
```

答案.rb：

```
class Answer< ActiveRecord::Base
  belongs_to :question
  is_impressionable 
```

在 questions\show.html.erb 中，我有一个答案列表。
当用户将鼠标悬停在答案上时，他们会看到 2 个链接出现：详细信息和转到。
详细信息链接仅打开答案显示页面（提供更多详细信息）并记录显示印象并正常工作：

answers_controller.rb：

```
 impressionist(@answer) 
```

转到页面是骗人的。当用户点击链接时：

```
 <%= link_to "Go to", :class => 'answer_link', :remote=>:true,
       :data=>{outval: answer.type_url, cuid: answer.id.to_s, refval: user_question_path(@question.user, @question), txtval: answer.img_url} do %>
            <span class="small_image">
               <%= image_tag(answer.img_url, :alt => 'go to answer', :class =>'img_answer')  %>
             </span>
  <% end %> 
```

，我运行以下 jQuery 片段：

```
 $('.answer_link').click (->
    url_val=''
    url_val = "http://api.somewebservice.com/api/click?key=abc123"
    url_val += "&out=" + $(this).data('outval')
    url_val += "&loc=" + $(this).data('refval')
    url_val += "&cuid=" + $(this).data('cuid')
    url_val += "&ref=" +  $(this).data('refval')
    url_val += "&txt=" +  $(this).data('txtval')
    window.open url_val
  ) 
```

这可以正常工作并运行 Web 服务，然后在新窗口中打开返回的外部链接。
我的问题是试图将此外部点击捕获为印象。
做这个的最好方式是什么？目前，当我单击外部链接时，问题控制器会运行显示操作。

具体问题#1：这个“似乎”是正确的，因为我不想去任何地方（另一个窗口已经打开了外部链接）。使用问题控制器是否正确，显示操作，如果 params[:id]=="Go to" 那么就留在原地。

具体问题#2：如果这是正确的，那么有没有办法向印象派发送一个：action_name（我会发送“go to”而不是现在发送的默认“show”：

具体问题#3：如果不正确，那我该怎么办？也许去 Answers 控制器，去一个自定义的“go_to”？

TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T15:47:18.517

好的 - 我有一个解决方案（不确定它是否是最好的，但它有效）

1.  上面的 question.rb 和 answer.rb 保持不变
2.  为了统计 answer show.html.erb 页面的展示次数，我仍然在 answer_controller 中使用，：

    ```
     impressionist(@answer) 
    ```

3.  为了计算从答案重定向时的展示次数，我在 answer_controller 中创建了一个新的定义：

    ```
    def visit_external_site
      @answer= Answer.find(params[:answer_id])
      impressionist(@answer)
      respond_to do |format|
        format.html {render :nothing => true, :status => 200}
      end
    end 
    ```

（我不确定的部分是 format.html （我不想去任何地方，但仍然......）

1.  我的 routes.rb 有这个：

    ```
    match '/:answer_id' => 'answers#visit_external_site', :as => 'visit_external_site' 
    ```

    1.  questions\show.html.erb 页面现在有这个：

```
 <% @question.answers.each do |answer| %>
  <%= link_to url_for(:controller => :answers, :action => :visit_external_site, :answer_id => answer),
                          :class => 'answer_link', :remote => true,
                          :data => {outval:
                                            answer.type_url, cuid: answer.id.to_s, refval:
                                            user_question_path(@question.user, @question), txtval:
                                            answer.img_url} do %>
                <span class="small_image">
                    <%= image_tag(answer.img_url, :alt => 'go to answer', :class => 'img_answer') %>
                </span>
              <% end %>
<% end %> 
```

1.  我的 jQuery 还是和上面一样

如果有人有更好的方法来做到这一点，请告诉；我不确定这种方式是否“犹太洁食”

# php - 无法使用 PHP base64_encode 获取 Twitter 的 OAuth 签名

> ID：15606158
> 
> 赞同：2
> 
> 时间：2013-03-25T01:08:26.420
> 
> 标签：php, hash, oauth, twitter, base64

我正在处理 Twitter 的[创建签名文档](https://dev.twitter.com/docs/auth/creating-signature)。

按照文档中的建议，我采用了示例签名基本字符串和示例签名密钥，并将其传递给 hash_hmac 函数：

```
$sig_base_str = 'POST&https%3A%2F%2Fapi.twitter.com%2F1%2Fstatuses%2Fupdate.json&include_entities%3Dtrue%26oauth_consumer_key%3Dxvz1evFS4wEEPTGEFPHBog%26oauth_nonce%3DkYjzVBB8Y0ZFabxSWbWovY3uYSQ2pTgmZeNu2VS4cg%26oauth_signature_method%3DHMAC-SHA1%26oauth_timestamp%3D1318622958%26oauth_token%3D370773112-GmHxMAgYyLbNEtIKZeRNFsMKPR9EyMZeS9weJAEb%26oauth_version%3D1.0%26status%3DHello%2520Ladies%2520%252B%2520Gentlemen%252C%2520a%2520signed%2520OAuth%2520request%2521';
$sig_key = 'kAcSOqF21Fu85e7zjz7ZN2U4ZRhfV3WpwPAoE3Z7kBw&LswwdoUaIvS8ltyTt5jkRh4J50vUPVVHtR2YPi5kE';
$sha = hash_hmac('sha1', $sig_base_str, $sig_key);
$sha = strtoupper($sha);
$output = str_split($sha,2);
$output = implode(' ',$output);
echo $output; 
```

这给了我与示例中完全相同的二进制文件：`B6 79 C0 AF 18 F4 E9 C5 87 AB 8E 20 0A CD 4E 48 A9 3F 8C B6`.

现在，文档说将其转换为 base64。我相信我可以使用PHP的`base64_encode()`功能：

```
$sha = hash_hmac('sha1', $sig_base_str, $sig_key);
echo base64_encode($sha); 
```

但这为我的 OAuth_signature 提供了不正确的值：

```
YjY3OWMwYWYxOGY0ZTljNTg3YWI4ZTIwMGFjZDRlNDhhOTNmOGNiNg== 
```

查看[http://ideone.com/Bu0CZi](http://ideone.com/Bu0CZi)以查看正在运行的功能。

我究竟做错了什么？请注意，我还尝试转换为大写并在`base64_encode()`函数前包含空格。我在使用 Twitter API 时遇到了麻烦，我认为这是因为我无法正确获取签名，即使在文档中的示例中也是如此。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T02:47:36.480

我在十六进制字符中获得了正确的散列值，但我需要在原始二进制数据中使用它们：

```
$sha = hash_hmac('sha1', $sig_base_str, $sig_key, true);
echo base64_encode($sha); 
```

输出：`tnnArxj06cWHq44gCs1OSKk/jLY=`与 Twitter 文档中的输出完全一致。

通过查找 twitteroauth 库得到我的答案：[https ://github.com/abraham/twitteroauth/blob/master/twitteroauth/OAuth.php#L116](https://github.com/abraham/twitteroauth/blob/master/twitteroauth/OAuth.php#L116)

# javascript - Highchart GMT 和一小时偏移

> ID：15606161
> 
> 赞同：3
> 
> 时间：2013-03-25T01:08:53.000
> 
> 标签：javascript, highcharts, codeigniter-2

我正在使用 Highchart 和 codeigniter（我认为在这种情况下不相关）。我有一些（日期，数据），我在高图样条图中使用它们。我的铅来自格林威治标准时间。我正在使用时间戳格式（以这种格式存储在我的 MySQL 数据库中），但我的图表中少了一小时。

例如：这个时间戳**1364166000000**给我一个[时代网站](http://www.epochconverter.com/)：格林威治标准时间：星期日，2013 年 3 月 24 日 23:00:00 格林威治标准时间您的时区：lundi 25 mars 2013 00:00:00 GMT+1

但我的图表给了我 23:00:00。它不关心我当地的格林尼治标准时间。我的日期管理有什么错误？

感谢您对此的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-10T15:18:30.503

你试过设置`global.useUTC`吗`false`？默认情况下，Highcharts 将以 UTC 显示所有日期（因此您看到的是 23:00 时间值）。

```
Highcharts.setOptions({
    global: {
        useUTC: false
    }
}); 
```

[请参阅此处](http://api.highcharts.com/highcharts#global.useUTC)的文档和相应的演示。

# sql - db2 不允许在存储过程中使用函数

> ID：15606165
> 
> 赞同：1
> 
> 时间：2013-03-25T01:09:35.587
> 
> 标签：sql, stored-procedures, db2

我有以下错误

```
 An unexpected token "table" was found following "elect .." 
```

这是在下面的代码之后产生的。如果我调用该函数，它可以正常工作

```
 --example
   select * from foo('2013-02-20') 
```

但是当我将它插入存储过程时，它就无法工作了。是否允许调用像我在下面所做的那样的函数？

```
 create function foo( my_date date ) returns table(data integer) 
   language sql READS SQL DATA  return select id,sum(value) from table where date=my_date group by id; 

   create procedure list_open_positions(my_date date) 
   LANGUAGE SQL begin select * from table(foo(my_date)); end; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T10:06:26.617

存储过程不能包含裸 select 语句，因为它们不直接输出查询结果。

表函数应该在作为表达式一部分的 select 语句中正常工作。例如：

```
create procedure bar(my_date date)
language sql
begin
    insert into some_table
         select * from table(foo(my_date));
end 
```

*在不知道您使用的 DB2 的版本和平台的情况下，这个答案不是 100% 确定的。版本之间在功能/过程中允许的内容存在重大差异。上面的示例在 9.7 中适用于 LUW。*

# javascript - 查找和转换 navteq 坐标

> ID：15606167
> 
> 赞同：1
> 
> 时间：2013-03-25T01:09:37.263
> 
> 标签：javascript, web-scraping, gis

我正在尝试从一家公司的网站上获取其零售位置的坐标。我需要弄清楚如何将我得到的结果转换成可用的东西。

在我提交带有所需区域的搜索请求后，我会返回一个页面，其中所有位置都绘制在 Navteq 地图上。我没有任何运气来理解他们使用的坐标系。

例如，当我在东南部斯德哥尔摩 100 公里范围内寻找位置时，我会得到如下信息：

```
<script type="text/javascript">

    function setActionsMapAfterTimer() {

    clearInterval(timerSetMapAfterDomReady);

    if(!document.getElementById("mapArea"))
        return;

    eplatform.map.init({containerId:"mapArea", onReady: function(map) {

    dealocMap = map;

    var centerBubble = [
        '<div style="padding:0;margin:0;font-size:11px;">',
        '<table>',
        '<tr>',
        '<td style="padding-left:5px;"><b style="font-size: 11px;">stockholm</b></td>',
        '</tr>',
        '</table>',
        '</div>'
    ].join('');

    dealocMap.setCenterLocation(3559.9378979999997, 1083.776436,  100000.0);
    dealocMap.addMarker(3559.9378979999997, 1083.776436,   {bubbleInfos: centerBubble}); 
```

而对于第一个位置...

```
 var dealerBubble = [
        '<div style="padding:0;margin:0;">',
        '<table>',
        '<tr>',
        '<td><img src="/img/dealers/ICON.gif " /> </td>',
        '<td style="padding-left:5px;padding-top:7px;"><b style="font-size: 11px;">Name</b></td>',
        '</tr>',
        '</table>',
        '</div>',
        '<div style="padding:0;margin:0;padding-top:5px;padding-bottom:5px;">',
        '<div>',
        '<p style="padding:0;margin:0;">  </p>',
        '<p style="padding:0;margin:0;">Address</p>',
        '<p style="padding:0;margin:0;"></p>',
        '<p style="padding:0;margin:0;">Locality</p>',
        '</div>',
        '<p style="padding:0;margin:0;"><b>Tel.:</b> </p>',
        '<p style="padding:0;margin:0;"><b>Fax:</b> </p>',
        '</div>'
    ].join('');

    dealocMap.addMarker(3549.89404296875 , 1089.7158203125, { bubbleInfos: dealerBubble, icon: "/img/dealers/ICON.gif" }); 
```

以此类推，直到最后：

```
 }
        });

    }

    var timerSetMapAfterDomReady;

    window.addEvent('domready', function() {

        timerSetMapAfterDomReady=setInterval("setActionsMapAfterTimer()", 600);

    });

    /**
    * Keep compatibility with dealoc_content.jsp
     */
    function centerOnCoordinate(longitude, latitude, radius) {
        dealocMap.setCenterLocation(latitude, longitude, radius / 2.5);
    }

</script> 
```

在这种情况下，地图以 (59.332271,18.062961) 为中心，列出的位置为 (59.1649,18.16193)，但我仍然不知道如何转换它们。我可以再次对地址进行地理编码，但我尝试过的地址并不总是像页面上的那样准确。

有任何想法吗？谢谢！

# optimization - Segmented Meteor App(s) - 仅加载一半客户端或共享数据库的两个应用程序

> ID：15606169
> 
> 赞同：2
> 
> 时间：2013-03-25T01:09:39.327
> 
> 标签：optimization, meteor, admin

我了解发布和订阅的安全模型。

但我正在开发一个有点大的应用程序，其中 70% 可能只是管理员，仅限于不到 1% 的用户群。

将仅由管理员使用的所有模板、css 和额外的 javascript 和“附加组件”（如所见即所得的编辑器）发送给所有应用程序用户似乎很可怕。

有没有办法只将客户端的东西发送给某些用户（或者只有当用户触发不同的“部分”时？

如果不是，我认为我唯一的选择是并排拥有两个不同的流星应用程序，它们都使用相同的数据库，但具有完全不同的应用程序/接口/会话。[查看 2 个具有相同数据库的应用程序](https://stackoverflow.com/questions/13115723/how-can-i-share-mongodb-collections-between-meteor-apps)

还有其他建议/想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T00:15:15.887

一个简单但不完整的解决方案是在 Template.mytemplate.created 事件中动态加载 css 和 js 依赖项。您仍然可以共享 html 和包代码，但是，根据应用程序，它可能没问题。

如果您需要对模板进行更多控制，在流星谈话组中发送此对话说明了几种不同的解决方案。

[https://groups.google.com/forum/?fromgroups=#!searchin/meteor-talk/templates$2020/meteor-talk/F3DnoieDK00](https://groups.google.com/forum/?fromgroups=#!searchin/meteor-talk/templates%242020/meteor-talk/F3DnoieDK00)

# php - Symfony2 / Twig - 从动态数组键获取数组

> ID：15606171
> 
> 赞同：19
> 
> 时间：2013-03-25T01:09:48.207
> 
> 标签：php, symfony, twig

在 PHP 中，我会这样做：

```
foreach( $array as $key => $value ) {

    echo $another_array[$key];

} 
```

我看不到如何在 Twig（在 Symfony2 中）中做到这一点。我尝试了各种方法，但这似乎是显而易见的答案，但它不起作用。它返回一个“数组”的项目“the_index”不存在'错误。

```
{% for value in array %}

    {% set the_index = loop.index %}
    {{ another_array.the_index }} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-03-25T08:05:48.523

最快的方法：

```
{% for key,value in array %}
  {{ another_array[key] }}
{% endfor %} 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-03-25T03:13:20.307

可以使用[属性函数](http://twig.sensiolabs.org/doc/functions/attribute.html)。

```
{{ attribute(another_array, the_index) }} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-11-14T21:32:40.143

```
<ul>
    {% for value in array %}
       {% set the_index = attribute(another_array,  loop.index) %}
       <li>{{ the_index }}</li>
    {% endfor %}
</ul> 
```

# linux - 递归查找和替换

> ID：15606176
> 
> 赞同：0
> 
> 时间：2013-03-25T01:10:18.313
> 
> 标签：linux, shell, unix

我有一个文件夹，里面有很多文件夹和文件。我想做一个查找和替换：

*   之前：“我的文件夹”。
*   之后：''（空白）

这是我尝试过的（尽管没有用）

```
find ./ -type f -exec sed -i ‘s/my_folder.//’ {} \; 
```

这里正确的命令是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T04:52:11.197

您正在寻找的命令有点像这样：

```
find ./ -type f -exec sed -e "/my_folder./s/my_folder.//" {} \; 
```

但是您将得到的只是打印在屏幕上的输出，而不是写回文件中。为了完成这样的事情，我认为你应该有不止一行代码，但“意见”再次成为这里的关键字。这样的事情可能会有所帮助

```
for file in $(find ./ -type -f)
do
  cat ${file} | sed -e "/my_folder./s/my_folder.//" > MyTempFile
  cat MyTempFile > ${file} # use this instead of 'mv' command to preserve file perms
done 
```

希望这可以帮助

# git - Git 存储库太大

> ID：15606177
> 
> 赞同：14
> 
> 时间：2013-03-25T01:10:19.673
> 
> 标签：git, git-rewrite-history, git-gc

我有一个项目，其中包含约 12MB 的代码和资产。我一直在使用 Git 跟踪它，只是注意到我的`.git`文件夹现在刚刚超过 1.83GB。它由几个小文件组成，然后只有一个包文件构成了大约 1.82GB 的文件夹。

我已经跑了`git gc --aggressive`和`git gc --prune`。它的大小相同。我试过了：

```
git reflog expire --expire=now --all
git repack -ad  # Remove dangling objects from packfiles
git prune       # Remove dangling loose objects 
```

但它仍然是相同的大小。我什至克隆了它（一次在本地强制重新打包，然后再次从 Git），但每个仍然是 1.83GB。这正常吗？有什么办法可以减少它的大小，还是我只是开始一个新的仓库，复制代码，并接受我过去的提交将会消失？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-26T03:13:02.250

好的，这些评论是了解问题的根本原因可能是什么的一个很好的开始。不过我不太懂这个`git filter-branch`命令，所以我对使用它有点警惕。

我遇到了这个工具：[https ://rtyley.github.io/bfg-repo-cleaner/](https://rtyley.github.io/bfg-repo-cleaner/)

它创造了奇迹。我的仓库现在不到 10MB。

# ios - 在 iOS 中旋转视图时如何计算仿射平移参数？

> ID：15606179
> 
> 赞同：1
> 
> 时间：2013-03-25T01:10:37.847
> 
> 标签：ios, objective-c, cgaffinetransform, screen-rotation, translate-animation

`UIToolbar`我的iOS 应用程序中有一个，我`willRotateToInterfaceOrientation`使用`CGAffineTransform`. 变换需要缩放、旋转和平移。我知道如何计算比例和旋转参数，但似乎无法弄清楚如何计算平移参数，以便视图位于正确的位置。经过大量试验和错误后，我确定了将视图移动到 iPad 上正确位置的确切数字，但我不希望对数字进行硬编码，以免代码过于依赖设备。如何计算翻译参数？

`willRotateToInterfaceOrientation`这是包含工具栏的视图控制器中的当前函数。我想知道如何计算`tx`和`ty`低于而不是硬编码这些值。我尝试过使用工具栏和窗口大小的各种功能，但工具栏总是出现在一个奇怪的位置或完全在窗口之外而不是在窗口底部与窗口重叠。

```
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration
{
    if (UIInterfaceOrientationIsLandscape(toInterfaceOrientation))
    {
        // First, apply identify transformation to simplify later calculations and also because we need the toolbar's frame and Apple's docs say you cannot use a view's frame if the transform property is not the identity matrix.
        self.toolbar.transform = CGAffineTransformIdentity;

        // Calculate affine parameters.

        // Expand width to the window's height when in landscape mode, leaving the toolbar's height unchanged.
        UIWindow *window = [[UIApplication sharedApplication] keyWindow];
        CGFloat sx = 1.0;
        CGFloat sy = window.frame.size.height / window.frame.size.width;

        // Rotate 90 degrees in either direction depending on the orientation direction change.
        CGFloat rotate = M_PI_2;
        if (toInterfaceOrientation == UIInterfaceOrientationLandscapeLeft)
        {
            rotate = -M_PI_2;
        }

        // Reposition the toolbar.
        // TODO: Calculate values rather than hard-coding them. Why is tx not something like ((window.frame.size.width / 2) - (self.toolbar.frame.size.height / 2))?
        // Note that these values work for both the original iPad and iPad Retina, presumably because the values represent points not pixels.
        CGFloat tx = -365.5; 
        CGFloat ty = 359.5;
        if (toInterfaceOrientation == UIInterfaceOrientationLandscapeLeft)
        {
            tx = -tx;
        }

        // Apply affine transformation.
        CGAffineTransform transform = CGAffineTransformMakeScale(sx, sy);
        transform = CGAffineTransformRotate(transform, rotate);
        transform = CGAffineTransformTranslate(transform, tx, ty);
        [UIView animateWithDuration:duration
                         animations:^{
                                self.toolbar.transform = transform;
                            }
                         completion:NULL
         ];
    }
    else if (toInterfaceOrientation == UIInterfaceOrientationPortrait)
    {
        [UIView animateWithDuration:duration
                         animations:^{
                             self.toolbar.transform = CGAffineTransformIdentity;
                         }completion:NULL
         ];
    }
    else if (toInterfaceOrientation == UIInterfaceOrientationPortraitUpsideDown)
    {
        NSLog(@"Upside-down orientation not supported");
    }
} 
```

此外，这里是我的工具栏的声明和基本初始化。请注意，我将工具栏作为子视图添加到主窗口并手动处理旋转，因为我的应用程序有一个`UITabBarController`作为根视图控制器，这是我可以让工具栏出现在选项卡栏顶部的唯一方法。

```
// The toolbar is strong since this controller must maintain ownership as the toolbar is removed from the parent view when this view disappears.
@property (strong, nonatomic) IBOutlet UIToolbar *toolbar;

UIWindow *window = [[UIApplication sharedApplication] keyWindow];

CGFloat height = CGRectGetHeight(self.tabBarController.tabBar.frame); // Completely cover the tab bar.
CGFloat x = window.frame.origin.x;
CGFloat y = window.frame.size.height - height;
CGFloat width = window.frame.size.width;

self.toolbar.frame = CGRectMake(x, y, width, height);

[window addSubview:self.toolbar]; 
```

最后，我使用启用了 ARC 的 Xcode 4.5.1，并在 iPad（Retina 和非 Retina）5.1 和 6.0 模拟器上进行测试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T03:32:36.117

使用 CGAffineTransform，您需要非常小心地执行操作，并且（正如 David 提到的）您需要知道您正在旋转或调整大小的位置。人们常常对旋转的结果感到惊讶，而不管锚点（您使用仿射旋转的点）。

如果我们有这个作为我们的起始视图：

![原始视图](../Images/39fcff939f844682ad24258f1106c5f0.png)

您可以让 anchorPoint 位于 (0, 0) 或图像的中心。任何一个都可以工作。两者都不可能单独给您想要的东西。

这是从 0 到 0：

![旋转 90](../Images/46b1669979d25ead3f7300cba2bfd7f5.png)

如果您只是想旋转视图以显示它，如果您有 0、0 锚点，您会旋转并想知道“我的视图发生了什么！！！” 但是你可以把它翻译到你想要的地方。

这是在图像中心设置的锚点：

![绕中心旋转](../Images/723024e63576be517c786d13e6c65085.png)

您可以看到结果视图，但它在垂直和水平方向上都关闭了，因为它是一个矩形并且边长不同。但是，您可以通过将 x 移动原始高度差并将 y 移动原始宽度差来轻松调整它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T22:26:40.503

在将工具栏的锚点从默认值 (.5, .5) 设置为 (0, 0) 后，我能够解决这个问题。

```
// The toolbar is strong since this controller must maintain ownership as the toolbar is removed from the parent view when this view disappears.
@property (strong, nonatomic) IBOutlet UIToolbar *toolbar;

UIWindow *window = [[UIApplication sharedApplication] keyWindow];

// Set anchor point to the top-left corner instead of to the center (.5, .5) so that affine transformations during orientation changes are easier to calculate.
self.toolbar.layer.anchorPoint = CGPointMake(0, 0);

CGFloat height = CGRectGetHeight(self.tabBarController.tabBar.frame); // Completely cover the tab bar.
CGFloat x = window.frame.origin.x;
CGFloat y = window.frame.size.height - height;
CGFloat width = window.frame.size.width;

self.toolbar.frame = CGRectMake(x, y, width, height);

[window addSubview:self.toolbar]; 
```

这是更正的代码，其中转换参数`tx`和`ty`是作为工具栏和窗口大小的函数计算的，而不是硬编码的。我将逻辑包装在新`willRotateView:toInterfaceOrientation:duration:`函数中，以便更容易重用和旋转任意视图。 `willRotateToInterfaceOrientation:duration:`只需使用我的工具栏作为视图参数将旋转请求转发到此函数。

```
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration
{
    [self willRotateView:self.toolbar toInterfaceOrientation:toInterfaceOrientation duration:duration];
}

- (void)willRotateView:(UIView *)view toInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration
{
    if (UIInterfaceOrientationIsLandscape(toInterfaceOrientation))
    {
        // First, apply identify transformation to simplify later calculations and also because we need the view's frame and Apple's docs say you cannot use a view's frame if the transform property is not the identity matrix.
        view.transform = CGAffineTransformIdentity;

        // Calculate affine parameters.

        // Get the window's post-orientation change dimensions.
        UIWindow *window = [[UIApplication sharedApplication] keyWindow];
        CGFloat rotatedWinWidth = window.frame.size.height;
        CGFloat rotatedWinHeight = window.frame.size.width;

        // Expand width to the window's height when in landscape mode, leaving the view's height unchanged. The scaling is done along the Y axis since the window's origin will change such that the Y axis will still run along the longer direction of the device.
        CGFloat sx = 1.0;
        CGFloat sy = rotatedWinWidth / rotatedWinHeight;

        // Rotate 90 degrees in either direction depending on the orientation direction change.
        CGFloat angle = M_PI_2;
        if (toInterfaceOrientation == UIInterfaceOrientationLandscapeLeft)
        {
            angle = -M_PI_2;
        }

        // Reposition the view, assuming that view.layer.anchorPoint is (0, 0).
        // Note that the height of the view is used as the X offset as this corresponds to the X direction since the rotated window's origin will also rotate. Also, the position has to take into account the width scale factor.
        CGFloat xOffset = view.frame.size.height;
        CGFloat tx = -(rotatedWinWidth - xOffset) / sy;
        CGFloat ty = -view.frame.size.height;
        if (toInterfaceOrientation == UIInterfaceOrientationLandscapeLeft)
        {
            tx = -xOffset / sy;
            ty = rotatedWinHeight - view.frame.size.height;
        }

        // Apply affine transformation.
        CGAffineTransform transform = CGAffineTransformMakeScale(sx, sy);
        transform = CGAffineTransformRotate(transform, angle);
        transform = CGAffineTransformTranslate(transform, tx, ty);
        [UIView animateWithDuration:duration
                         animations:^{
                             view.transform = transform;
                         }
                         completion:NULL
         ];
    }
    else if (toInterfaceOrientation == UIInterfaceOrientationPortrait)
    {
        [UIView animateWithDuration:duration
                         animations:^{
                             view.transform = CGAffineTransformIdentity;
                         }completion:NULL
         ];
    }
    else if (toInterfaceOrientation == UIInterfaceOrientationPortraitUpsideDown)
    {
        DLog(@"Upside-down orientation not supported");
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T02:02:30.227

来自 UIView 类参考： transform - 指定应用于接收器的变换，相对于其边界的中心。这意味着您的 CGAffineTransform 围绕框的中心旋转，而不是框架原点。您需要相对于其旋转位移偏移原点。这些数字是边界框尺寸的函数。

有关使用边界的示例，请参见此处：[iPhone 正确的横向窗口坐标](https://stackoverflow.com/questions/6034584/iphone-correct-landscape-window-coordinates)

# regex - 使用上下文菜单在 Windows 防火墙中阻止 .EXE

> ID：15606180
> 
> 赞同：4
> 
> 时间：2013-03-25T01:10:51.000
> 
> 标签：regex, windows-firewall, regedit

我得到了一个 .REG 文件的以下代码，它在右键单击 .EXE 文件时将“添加到防火墙”添加到上下文菜单中。它只是在 Windows 防火墙中为您选择的特定文件创建出站规则，而不是手动执行。

```
Windows Registry Editor Version 5.00

[HKEY_CLASSES_ROOT\exefile\shell]

[HKEY_CLASSES_ROOT\exefile\shell\Add To Firewall]

[HKEY_CLASSES_ROOT\exefile\shell\Add To Firewall\command]
@="netsh advfirewall firewall add rule name=\"%1\" dir=out action=block program=\"%1\"" 
```

[http://oi46.tinypic.com/2rgnxaf.jpg](http://oi46.tinypic.com/2rgnxaf.jpg)

我的问题是以下语法`name=\"%1\"`将完整目录（C:\New folder\test.exe）作为 Windows 防火墙中的名称，而不仅仅是一个简单的 test.exe

我正在寻找的另一个功能是将其全部添加到鼠标右键单击而不是正常的右键单击中，因为我真的不经常使用该功能，所以我每次右键单击.EXE 时都会看到它

PS。运行以下命令再次将其从上下文菜单中删除。

```
Windows Registry Editor Version 5.00

[-HKEY_CLASSES_ROOT\exefile\shell\Add To Firewall] 
```

希望收到某人的来信，并在此先表示感谢；）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-01T06:14:54.650

以下将完全按照您的要求进行，但它要求您禁用 UAC。如果不创建脚本文件或使用[第三方工具](http://code.kliu.org/misc/elevate/)[，](http://wintellect.com/blogs/jrobbins/elevate-a-process-at-the-command-line-in-vista) [或者](http://jpassing.com/2007/12/08/launch-elevated-processes-from-the-command-line/) 覆盖密钥，我认为您将无法创建 UAC 提示。`runas`

```
Windows Registry Editor Version 5.00

[HKEY_CLASSES_ROOT\exefile\shell\firewallblock]
@="Add to Firewall"         ; String to be displayed in context menu
"HasLUAShield"=""           ; Adds UAC shield icon to the left of the command
"Extended"=""               ; Requires shift to be held when right-clicking

[HKEY_CLASSES_ROOT\exefile\shell\firewallblock\command]
@="cmd.exe /s /c for %%a in (\"%1\") do netsh advfirewall firewall add rule name=\"%%~na\" dir=out action=block program=\"%%~nxa\"" 
```

详细地说，我使用该`FOR`命令不是因为它的循环功能，而是因为它让我可以访问[参数扩展](http://ss64.com/nt/syntax-args.html)。我用to use和to use修改`%%a`（我们会说它的值是`x:\fully\qualified\path\filename.exe`）。`%%~nxa``filename.exe``%%~na``filename`

至于 UAC 的东西，我只需使用上面提到的第三方工具之一并相应地更改命令，例如：

```
@="elevate.exe -c for %%a in (\"%1\") do netsh advfirewall firewall add rule name=\"%%~na\" dir=out action=block program=\"%%~nxa\"" 
```

希望能帮助到你！

# vb.net - 在运行时填充组合框

> ID：15606187
> 
> 赞同：0
> 
> 时间：2013-03-25T01:12:05.960
> 
> 标签：vb.net, if-statement, combobox

我在系统上有两个组合框一个类别和子类别

我的概念必须是当我在 cmbCategory 上选择 COM 或 PRT 时，

cmbSubCategory 将自动显示所选类别的相应子类别

```
Private Sub cmbCategory_SelectedIndexChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles cmbCategory.SelectedIndexChanged
        If cmbCategory.Text = "COM" Then
            cmbSubCategory.Items = "SU, MON"
        End If
    End Sub 
```

我的代码返回错误

属性项是只读的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T01:24:10.027

[Items](http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.items.aspx)是一个集合，因此要将内容放入其中，您需要将它们添加到集合中，而不是直接分配。

如果`SU`并且`MON`打算在组合框中显示为单独的项目，那么您可以执行类似的操作：

```
Private Sub cmbCategory_SelectedIndexChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles cmbCategory.SelectedIndexChanged
    If cmbCategory.Text = "COM" Then
        cmbSubCategory.Items.Clear()
        cmbSubCategory.Items.Add("SU")
        cmbSubCategory.Items.Add("MON")
    End If
End Sub 
```

如果`SU, MON`要显示为单个项目，那么您可以执行以下操作：

```
Private Sub cmbCategory_SelectedIndexChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles cmbCategory.SelectedIndexChanged
    If cmbCategory.Text = "COM" Then
        cmbSubCategory.Items.Clear()
        cmbSubCategory.Items.Add("SU, MON")
    End If
End Sub 
```

请注意，我们使用[Clear](http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.objectcollection.clear.aspx)从组合框中删除项目/确保它是空的，然后再使用正确的选项填充它。

**PS。**我注意到这个问题的标签之一是“SQL”，但从我读过的内容来看，我认为这个问题没有 SQL 组件......

# windows - 在现有 emacs 框架中打开文件 (Windows)

> ID：15606188
> 
> 赞同：7
> 
> 时间：2013-03-25T01:12:33.960
> 
> 标签：windows, emacs, emacs24

我在 Windows 8 上使用 Emacs 24.3。我希望能够右键单击文件并选择“使用 Emacs 编辑”并在现有的 emacs 框架中打开文件。到目前为止我所做的所有步骤都列在下面。其中大部分内容来自[Windows 的 Emacs 文档页面](http://www.gnu.org/software/emacs/windows/Installing-Emacs.html)。

以下是我用来将“使用 Emacs 编辑”添加到上下文菜单中的注册表项：

```
[HKEY_CLASSES_ROOT\*\shell]
[HKEY_CLASSES_ROOT\*\shell\openwemacs]
@="&Edit with Emacs"
[HKEY_CLASSES_ROOT\*\shell\openwemacs\command]
@="C:\\Portable Software\\emacs-24.3\\bin\\emacsclientw.exe -n \"%1\""
[HKEY_CLASSES_ROOT\Directory\shell\openwemacs]
@="Edit &with Emacs"
[HKEY_CLASSES_ROOT\Directory\shell\openwemacs\command]
@="C:\\Portable Software\\emacs-24.3\\bin\\emacsclientw.exe --alternate-editor=\"C:\\Portable Software\\emacs-24.3\\bin\\runemacs.exe\" -n \"%1\"" 
```

我还将`ALTERNATE_EDITOR`环境变量设置为`C:\\path\\to\\runemacs.exe`

在我的开头，我根据[这个答案](https://stackoverflow.com/questions/6397323/how-to-avoid-the-message-of-server-start-while-opening-another-emacs-session?rq=1)`.emacs`添加了以下代码。

```
(require 'server)
(or (server-running-p)
     (server-start)) 
```

添加它可以消除打开第二个文件时出现的“服务器已在运行”错误，但它仍会在新框架中打开。

那么让emacs在现有框架中打开新文件我缺少什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-05-05T23:14:32.193

我在尝试`synctex`使用 SumatraPDF 修复时意外地发现了这一点。看起来除了`ALTERNATE_EDITOR`指向的环境变量之外`runemacs.exe`，您还必须创建一个`EMACS_SERVER_FILE`指向服务器文件的环境变量（我的存储在`.emacs.d\server`目录中）。一旦我这样做了，我告诉用 Emacs 打开的文件会在现有框架中打开，而不是创建自己的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-12T06:32:16.350

This worked for me.

Create `C:\Program Files\runemacs.bat` with the following contents:

```
@echo off

:: Set the path to where the Emacs binaries are
set binpath=C:\Program Files\emacs-26.1-x86_64\bin

:: If no arg is given edit this file
if "%~1"=="" (
  set filename="C:\Program Files\runemacs.bat"
) else (
  set filename="%~1"
)

:: Run Emacsclient
"%binpath%\emacsclientw.exe" --no-wait --alternate-editor="%binpath%\runemacs.exe" %filename% 
```

And open all files via `C:\Program Files\runemacs.bat` instead of `C:\Program Files\emacs-26.1-x86_64\bin\runemacs.exe`.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-25T03:21:48.350

似乎 emacsclient 每次都无法与服务器连接并启动一个新的 emacs 实例。您可能需要取消阻止已安装的任何软件防火墙中的某些内容。

# php - 功能测试 - 模拟服务不会保留在服务容器中

> ID：15606191
> 
> 赞同：3
> 
> 时间：2013-03-25T01:12:42.753
> 
> 标签：php, unit-testing, symfony, doctrine, mocking

我希望有人可以对我面临的这个问题有所了解。

## [问题]

我在我的功能单元测试中模拟了教义.orm.default_entity_manager 服务。我将它注入到客户端服务容器中，这样我就不必在我的功能测试过程中访问我的数据库。对于仅涉及 GET 请求的测试，我能够验证我正在测试的控制器是否正在使用我的模拟服务。

但是，如果我尝试通过使用带有表单提交的爬虫来执行 POST 请求，我的模拟服务不会持续存在。在初始 GET 请求之后，客户端似乎只是在需要时再次注入教义.orm.default_entity_manager 服务，而不是我在客户端服务容器中设置的模拟版本。

总之，在 GET 请求期间使用了我的模拟服务，但在 POST 请求期间，EntityManager5144076565ee8_546a8d27f194334ee012bfe64f629947b07e4919__CG__\Doctrine\ORM\EntityManager 正在使用。 **[参见下面的代码片段]**

## [问题]

有可能做我要求的吗？我想让我的所有请求都使用我定义的模拟服务。我想进行功能测试，但避免从数据库中写入或读取。

## [示例代码]

```
 // Mocks
    $entityRepository = $this
    ->getMockBuilder('Doctrine\ORM\EntityRepository')
    ->setMethods(array('findby'))->disableOriginalConstructor()
    ->getMock();

    $entityRepository->expects($this->any())->method('findBy')
    ->will($this->returnValue(array()));

    $em = $this->getMockBuilder('Doctrine\ORM\EntityManager')
    ->setMethods(
    array('getRepository', 'getClassMetadata', 'flush',
    'persist'))->disableOriginalConstructor()
    ->getMock();

    $em->expects($this->any())->method('flush')
    ->will($this->returnValue(FALSE));

    $em->expects($this->any())->method('persist')
    ->will($this->returnValue(FALSE));

    $em->expects($this->any())->method('getRepository')
    ->will($this->returnValue($entityRepository));

    $em->expects($this->any())->method('getClassMetadata')
    ->will($this->returnValue(new ClassMetadata("test")));

    // Create test client.
    $client = static::createClient();

    // Inject entity mock into service container.
    $client->getContainer()
    ->set('doctrine.orm.default_entity_manager', $em, 'container');

    // Define request
    $crawler = $client->request('GET', '/locations/types/add');

    // Verify a few things
    $form = $crawler->selectButton('submit')->form();
    $form['location_type[title]'] = "TEST TITLE";
    $form['location_type[description]'] = "TEST DESCP";

    $crawler = $client->submit($form); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T17:59:11.133

The issue here is that the kernel is booted after (during) every request:

```
protected function doRequest($request)
{
    // avoid shutting down the Kernel if no request has been performed yet
    // WebTestCase::createClient() boots the Kernel but do not handle a request
    if ($this->hasPerformedRequest) {
        $this->kernel->shutdown();
    } else {
        $this->hasPerformedRequest = true;
    }

    if ($this->profiler) {
        $this->profiler = false;

        $this->kernel->boot();
        $this->kernel->getContainer()->get('profiler')->enable();
    } 
```

[https://github.com/symfony/symfony/blob/master/src/Symfony/Bundle/FrameworkBundle/Client.php](https://github.com/symfony/symfony/blob/master/src/Symfony/Bundle/FrameworkBundle/Client.php)

So you need to replace doctrine with your mock after each request:

```
// Inject entity mock into service container.
$client->getContainer()
->set('doctrine.orm.default_entity_manager', $em, 'container');

// Define request
$crawler = $client->request('GET', '/locations/types/add'); 

// Inject entity mock into service container.
$client->getContainer()
->set('doctrine.orm.default_entity_manager', $em, 'container'); 
```

An easier way to use your mock globally would be to override the doctrine settings in config_test.yml

```
 orm:
        default_entity_manager:  Acme/MyBundle/Test/MockDoctrineEM 
```

[http://symfony.com/doc/master/reference/configuration/doctrine.html](http://symfony.com/doc/master/reference/configuration/doctrine.html)

# joomla2.5 - 前端 joomla 2.5 菜单登录不起作用

> ID：15606192
> 
> 赞同：1
> 
> 时间：2013-03-25T01:12:59.927
> 
> 标签：joomla2.5

我在主菜单中添加了一个“登录表单”类型的菜单项。当它被按下时，它会将我带到一个未知页面，并出现以下错误：

**发生了错误。找不到请求的页面。如果问题仍然存在，请联系本站系统管理员并报告以下错误。

# 404 未找到类别**

我的用户，包括我自己，都无法在前端登录。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T07:29:26.503

菜单类型“登录表单”应该不会产生这样的错误，因为 com_users 中没有使用任何类别。也许仔细检查您是否将菜单项正确设置为所需的类型。您还可以关闭 SEF URL 并检查为菜单项生成的 URL。它应该是这样的：

> index.php?option=com_users&view=登录

您也可以自己使用此链接，它应该会带您进入登录表单。

还要检查是否没有为此菜单项启用可能产生此错误的模块。

# c# - 尝试删除带有子项的注册表项会导致错误

> ID：15606194
> 
> 赞同：11
> 
> 时间：2013-03-25T01:13:10.200
> 
> 标签：c#, .net, registry

当我尝试删除 HKCU 中具有子键的键时，出现错误。

这是我正在使用的代码：

```
using (RegistryKey regkey = Registry.CurrentUser.OpenSubKey(@"Software\Policies\", true))
{
   if (regkey.OpenSubKey("Google") != null)
   {
      regkey.DeleteSubKey("Google");
   }
} 
```

我得到的错误：

> 注册表项具有子项，并且此方法不支持递归删除。

我怎样才能克服它？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-25T01:15:47.423

使用`RegistryKey.DeleteSubKeyTree`方法。

> [**RegistryKey.DeleteSubKeyTree 方法（字符串）**](http://msdn.microsoft.com/en-us/library/h3yfwzfx.aspx)
> 
> 递归删除子项和任何子项。

```
using(RegistryKey regkey = Registry.CurrentUser.OpenSubKey(@"Software\Policies\", true))
{
    if (regkey.OpenSubKey("Google") != null)
    {
        regkey.DeleteSubKeyTree("Google");
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-09T19:37:15.143

```
using(var regkey = Registry.CurrentUser.OpenSubKey(@"Software\Policies\", true))
{
   regkey?.DeleteSubKeyTree("Google");
} 
```

# python - 用于 OS X 10.8.2 的 Enthought Python 上的 Pytables

> ID：15606195
> 
> 赞同：0
> 
> 时间：2013-03-25T01:13:19.637
> 
> 标签：python, hdf5, enthought, pytables

我一直在努力让**pytables**和底层**HDF5 库**在 OS X 中的 python 上运行，所以我想我会尝试一下 Enthought 发行版（这也将大大简化以后跨平台的部署）。

**我为 64 位 OS X**安装了EPD 7.3 （我正在运行 10.8.2），但不幸的是没有成功，我在尝试加载 pytables 时得到以下信息...

```
In [4]: import tables
--------------------------------------------------------------------------- ImportError                               Traceback (most recent call last) /<ipython-input-4-389ecae14f10> in <module>()
----> 1 import tables

/Users/davidperry/Library/Python/2.7/lib/python/site-packages/tables/__init__.py in <module>()
     57 
     58 # Necessary imports to get versions stored on the Pyrex extension

---> 59 from tables.utilsExtension import getPyTablesVersion, getHDF5Version
     60 
     61 __version__ = getPyTablesVersion()

ImportError: dlopen(/Users/davidperry/Library/Python/2.7/lib/python/site-packages/tables/utilsExtension.so, 2): Symbol not found: _SZ_BufftoBuffCompress   Referenced from: /Users/davidperry/Library/Python/2.7/lib/python/site-packages/tables/utilsExtension.so Expected in: flat namespace  in /Users/davidperry/Library/Python/2.7/lib/python/site-packages/tables/utilsExtension.so 
```

我想这意味着***找不到 HDF5 所需的库 szip？如果 EPD 确实缺少它（看起来很奇怪......），我可以自己安装它而不从源代码构建 HDF5 吗？还是只是在一个陌生的地方***？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T12:32:45.377

首先，对于您遇到的问题，我深表歉意。

看起来好像您不是从 EPD 加载 pytables，而是从以前的安装加载。PYTHONPATH 在您的环境中看起来如何？

通常，EPD 安装在 /Library/Frameworks/Python.framework/Versions/7.3 中的某个位置。以下是做什么的？

```
PYTHONPATH= /Library/Frameworks/Python.framework/Versions/7.3/bin/python -c "import tables; print tables.__version__" 
```

或（64 位版本）：

```
PYTHONPATH= /Library/Frameworks/EPD64.framework/Versions/7.3/bin/python -c "import tables; print tables.__version__" 
```

它应该返回类似“2.3.1”（EPD 中可用的实际表格版本）之类的内容。如果这确实有效，那么请让 EPD 成为您环境中的默认 python，您将需要调整 PATH/PYTHONPATH 变量以使其可用。

如果还是不行，可以试试下面的方法（适配 32 位）：

```
 PYTHONPATH= /Library/Frameworks/EPD64.framework/Versions/7.3/bin/python -c "import sys; print sys.path" 
```

并粘贴输出？

# jsf - 使用带有网络过滤器的漂亮面孔

> ID：15606205
> 
> 赞同：10
> 
> 时间：2013-03-25T01:14:02.957
> 
> 标签：jsf, jsf-2, primefaces, prettyfaces

使用 Tomcat 7 --- Primefaces 3.4.1 --- javax faces 2.1.17 --- prettyfaces-jsf2 3.3.3

我在我的项目中正确配置了漂亮的面孔，但我的网络过滤器无法使用由漂亮面孔编写的新网址。

这是一个示例 pretty-config.xml

```
<url-mapping id="home">
    <pattern value="/home"/>
    <view-id value="/secure/homepage.xhtml"/>
</url-mapping>

<url-mapping id="register">
    <pattern value="/register"/>
    <view-id value="/public/register.xhtml"/>
</url-mapping>

<url-mapping id="welcome">
    <pattern value="/"/>
    <view-id value="/public/welcome.xhtml"/>
</url-mapping>

<url-mapping id="profile">
    <pattern value="/profile/#{userId}"/>
    <view-id value="/profile.xhtml"/>
</url-mapping> 
```

login(welcome) 和 register 页面位于“public”文件夹中，它们的 web 过滤器使用注释定义：**@WebFilter("/public/*")**

对于我在“安全”文件夹中的主页（文件夹中确实会有更多页面），我还定义了一个 Web 过滤器及其注释：**@WebFilter("/secure/*)**

漂亮的网址工作正常，**但这些过滤器仅在我编写原始网址时才有效。**

1) 如何修复我的网络过滤器？

2）我还想阻止用户输入原始网址。我知道漂亮的面孔完全隐藏了原始网址，但有没有办法做到这一点？

--已**解决**-- 感谢 BalusC

如果您使用注释定义了过滤器，则可以配置调度程序设置，例如

@WebFilter(urlPatterns = "/public/*", **dispatcherTypes = {DispatcherType.REQUEST, DispatcherType.FORWARD}** )

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-25T01:21:18.633

PrettyFaces 使用许多 URL 重写解决方案[`RequestDispatcher#forward()`](http://docs.oracle.com/javaee/6/api/javax/servlet/RequestDispatcher.html#forward%28javax.servlet.ServletRequest,%20javax.servlet.ServletResponse%29)将请求转发到所需的目标资源。

Servlet 过滤器在没有任何映射时`<dispatcher>`，默认情况下仅侦听“初始”请求，而不是转发、包含或错误请求。

因此，当您在 PrettyFaces`web.xml` *之后*映射另一个 servlet 过滤器时，默认情况下不会触发它，除非您在默认值旁边显式设置一个`<dispatcher>`on （您应该保留这个，以防 PrettyFaces 实际上不需要执行前锋）。`FORWARD``REQUEST`

```
<filter-mapping>
    ...
    <dispatcher>REQUEST</dispatcher>
    <dispatcher>FORWARD</dispatcher>
</filter-mapping> 
```

或者，对于您在[`@WebFilter`](http://docs.oracle.com/javaee/6/api/javax/servlet/annotation/WebFilter.html)过滤器上使用的情况，请使用以下[`dispatcherTypes`](http://docs.oracle.com/javaee/6/api/javax/servlet/annotation/WebFilter.html#dispatcherTypes%28%29)属性：

```
@WebFilter(..., dispatcherTypes = { REQUEST, FORWARD }) 
```

或者，如果有问题的过滤器没有以任何方式更改请求/响应目标，例如设置字符集、使用 Gzip 压缩、监听异常等，那么您也可以将其放在PrettyFaces*之前。*

# html - 优于所有标题的样式类 (h1-h6)

> ID：15606206
> 
> 赞同：0
> 
> 时间：2013-03-25T01:14:04.607
> 
> 标签：html, css, head

有没有办法（一个优于所有 Hs 的类，1-6）来设置一个在所有 Hs 之间共享的属性，这样您就不必手动将它放入每个 Hs 中？例如，如果我想在每个 H 的底部有一个下划线，我会这样做

`border-bottom:1px solid #999;`

现在我必须将它分别放在每个中，而属性是相同的。

我试着做

`h { border-bottom:1px solid #999; }`

但它没有用。

我实际上在做的是：

```
.main-heading
{
    border-bottom:1px solid #999;
} 
```

接着

`<h3 class="main-heading">My Heading</h3>`

这可行，但我宁愿不使用带有 H 标签的类，因为它总是相同的（简单性）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T01:19:12.403

你可以这样做：

```
h1, h2, h3, h4, h5, h6 { border-bottom:1px solid #999; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T01:19:25.303

并不真地。您可以编写一个匹配所有这些的选择器：

```
h1, h2, h3, h4, h5, h6 {
    border-bottom:1px solid #999;
} 
```

# javascript - 如何一个接一个地执行功能？

> ID：15606207
> 
> 赞同：2
> 
> 时间：2013-03-25T01:14:06.880
> 
> 标签：javascript, jquery

也许我用错了，但我想链接 3 个函数，第二个函数在第一个函数完成时开始，第三个函数在第二个函数完成时开始。根据[文档](http://api.jquery.com/jQuery.when/)，我应该可以这样做：

```
$.when( first() ).then( second() ).then(third() ); 
```

他们似乎都在同时执行。是什么赋予了？

[我的小提琴](http://jsfiddle.net/9XECY/2/)

我也试过：

```
first().then( second() ).then(third() ); 
```

这将在第一个 div 中消失，但不会在第二个和第三个 div 中消失；

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T01:22:21.003

您正在强制立即执行这些功能。（顺便说一下，它们不是同时执行的，而是一个接一个地快速执行，因为 JavaScript 是单线程的。）

您需要编写`$.when(first).then(second).then(third)`（首先是一个承诺），然后让库执行它们。不要自己执行它们（这是括号所做的）。

编辑：哦，没看到小提琴。是的，肖恩约翰逊说的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T01:15:52.737

只是`first(); second(); third();`会工作得很好。JavaScript 是单线程的。

`when`and用于`then`集成的事物`Promise`，例如 ajax 请求（至少，这是我作为非 jQuery 用户的理解）

编辑：顺便说一下，这是您的[jsFiddle](http://jsfiddle.net/9XECY/3/)仅使用 CSS 重制的 ^_^

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T01:32:15.097

如果要在动画完成[**JS Fiddle**](http://jsfiddle.net/9XECY/8/)后执行每个功能，

利用：

```
var first = function(callBack1, callBack2){
    $("#div1").fadeIn(2000, function(){callBack1(callBack2)});
}
var second = function(callBack){
  $("#div2").fadeIn(2000, callBack);

}

var third = function(){
  $("#div3").fadeIn(2000);

}

first(second, third); 
```

# python-3.x - 为什么这在 pyscripter 中会失败？

> ID：15606209
> 
> 赞同：1
> 
> 时间：2013-03-25T01:14:10.043
> 
> 标签：python-3.x, tkinter, pyscripter

这个问题开始是一个简单的 Python 3.x 问题，但现在我不确定发生了什么。当我在 shell 中运行以下代码时，它工作正常。当我在 PyScripter 中运行它时，结果总是 0 0。以前有人见过这个问题吗？我对常见问题解答和错误报告的搜索没有找到任何结果。

```
# Simple CheckButton example
# CH 3/24/13

import tkinter as tk
root = tk.Tk()

#function to display checkbutton values
def showVal():
    print(cb1Val.get(), cb2Val.get())

# define value variables
# cb1Val and cb2Val hold 1 if checked and 0 if not
cb1Val = tk.IntVar()
cb2Val = tk.IntVar()

# make instances of my widgets
cb1 = tk.Checkbutton(root, text='cb1', variable=cb1Val)
cb2 = tk.Checkbutton(root, text='cb2', variable=cb2Val)

btn1 = tk.Button(root, text='Show', command=showVal)

# place widgets into the frame
cb1.grid(row=0,column=0)
cb2.grid(row=1, column=0)
btn1.grid(row=2, column=0)

#start the loop
root.mainloop() 
```

# jquery - jquery 验证插件 - 更改边框颜色 + 无文本

> ID：15606211
> 
> 赞同：10
> 
> 时间：2013-03-25T01:14:16.123
> 
> 标签：jquery, jquery-validate

无论如何我可以在错误时将边框颜色更改为红色并摆脱文本？这几乎是我想要显示的唯一错误，一旦输入/文本区域成为焦点，它就会消失。

```
<div id="contact-form">
            <form method="get" id="contacts">
                <div class="contact-controls">
                    <label class="contact-label" for="name-input">NAME</label>
                    <div class="input-wrapper">
                        <input type="text" name="contact-name" id="name-input" placeholder="Your Name" required>
                    </div>
                </div>
                <div class="contact-controls">
                    <label class="contact-label" for="email-input">EMAIL</label>
                    <div class="input-wrapper">
                        <input type="text" name="contact-email" id="email-input" placeholder="Your Email" required>
                    </div>
                </div>
                <div class="contact-controls">
                    <label class="contact-label" for="message-input">MESSAGE</label>
                    <div class="input-wrapper">
                        <textarea name="contact-message" id="message-input" rows="15" placeholder="Hi there&#33;" required></textarea>
                    </div>
                </div>
                <div class="contact-controls">
                    <input type="hidden" name="save" value="contact">  
                    <button type="submit" class="contact-button">Send</button>  
                </div>
            </form>
        </div> 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-25T02:29:11.730

请执行下列操作：

1) 设置`errorPlacement`回调函数`return false`来抑制错误消息文本。

2) 修改插件`.error`&的 CSS 以`.valid` `class`在元素周围显示彩色边框或其他任何东西。默认情况下，插件已经自动应用和删除这两个`class`，因此没有为此设置特殊的插件选项。

**工作演示：http: [//jsfiddle.net/8vQFd/](http://jsfiddle.net/8vQFd/)**

**jQuery** :

```
$(document).ready(function () {

    $('#myform').validate({ // initialize the plugin
        // your rules and options,
        errorPlacement: function(){
            return false;  // suppresses error message text
        }
    });

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-10-13T10:01:24.393

没有 Jquery 没有添加其他/修改任何功能只需添加 Css

```
input[class="error"]{border:1px solid #f00 !important;} input[class="form control error"]{border:1px solid #f00 !important;} .error p{color:#f00 !important;} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-11T06:50:15.870

一个非常简单的基于 css 的方法如下所示：

```
input.error{border: 1px solid red;} 
```

您可能希望对此进行扩展，但这是一个很好的起点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-04T11:55:31.387

您可以定义一个名为**.input-validation-error**的 CSS 类，当验证规则被破坏时，它会通过 jQuery 验证插件添加到输入元素。

```
.input-validation-error {
    border: solid 1px #ff0000;
}
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-25T01:47:35.450

您可以向您的输入/文本区域添加一个类，该类将添加一个红色边框

*我称之为.error*

```
input:focus,textarea:focus{
outline: none !important;
}

input.error, textarea.error{
outline:red groove thin;
} 
```

然后使用 jquery 去查找类 '.error' 的输入 /textareas 并将其值设置为空。

```
$(document).ready(function() {
  $('#contact-form').find('.error').val(' ');
}); 
```

[Jsfiddle V1](http://jsfiddle.net/kx5tg/ "jsfiddle - 更改边框颜色")

**更新**

JS 示例

```
 $(document).ready(function() {
  $('#contact-form').find('.error').val(' ');
    $('input, textarea').click(function() {
    $(this).removeClass('error').val('');
   });

    var name = $('#name-input').val();

    if(name == ''){
      $('#name-input').addClass('error');   
    }
   }); 
```

CSS

```
 input:focus,textarea:focus{
  border-color: initial;
 }

 input.error, textarea.error{
  border:1px solid red;
 } 
```

HTML

```
<div id="contact-form">
        <form method="get" id="contacts">
            <div class="contact-controls">
                <label class="contact-label" for="name-input">NAME</label>
                <div class="input-wrapper">
                    <input type="text" name="contact-name" id="name-input" placeholder="Your Name" value="" class="" required>
                </div>
            </div>
            <div class="contact-controls">
                <label class="contact-label" for="email-input">EMAIL</label>
                <div class="input-wrapper">
                    <input type="email" name="contact-email" id="email-input" placeholder="Your Email" value="" class="" required>
                </div>
            </div>
            <div class="contact-controls">
                <label class="contact-label" for="message-input">MESSAGE</label>
                <div class="input-wrapper">
                    <textarea name="contact-message" id="message-input" rows="15" placeholder="Hi there&#33;" class="" required></textarea>
                </div>
            </div>
            <div class="contact-controls">
                <input type="hidden" name="save" value="contact">  
                <button type="submit" class="contact-button">Send</button>  
            </div>
        </form>
    </div> 
```

[JSfiddle V2](http://jsfiddle.net/3listone/kx5tg/1/)

# android - Android Button Bar - buttonBarButtonStyle 在按钮之间留下空隙

> ID：15606212
> 
> 赞同：2
> 
> 时间：2013-03-25T01:14:17.493
> 
> 标签：android, xml

我在使用内置的 Android 按钮栏样式时遇到了一些问题。在为我的每个按钮提供 0 的宽度和 1 的重量之后，两个按钮之间仍然存在大约 1px 的间隙（见图）。

消除这种差距的最佳方法是什么？为什么它甚至在那里开始？

```
<LinearLayout
    android:id="@+id/button_bar"
    style="?android:attr/buttonBarStyle"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:layout_alignRight="@+id/details_scroll_view"
    android:paddin="0dp" >

    <Button
        android:id="@+id/button1"
        style="?android:attr/buttonBarButtonStyle"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:background="@drawable/button_dark_blue"
        android:text="button1"
        android:textColor="@color/text_color" />

    <Button
        android:id="@+id/button2"
        style="?android:attr/buttonBarButtonStyle"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:background="@drawable/button_light_blue"
        android:text="button2"
        android:textColor="@color/text_color" />
</LinearLayout> 
```

[按钮栏][1] [http://i.stack.imgur.com/9Kwf4.png](http://i.stack.imgur.com/9Kwf4.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-04T10:10:34.100

你看到的空间实际上是一个分隔线。要隐藏这些分隔线，只需添加

```
android:showDividers="none" 
```

到`LinearLayout`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T01:18:39.490

这只会改变按钮的大小。您需要使用该`layout_margin`属性，如下所示：

```
android:layout_marginLeft=<insert value here> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T01:19:53.580

如果你使用 a`RelativeLayout`而不是`LinearLayout`那么你可以使用类似的东西

```
 <Button
        android:id="@+id/button2"
        style="?android:attr/buttonBarButtonStyle"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:background="@drawable/button_light_blue"
        android:text="button2"
        android:textColor="@color/text_color"
        android:layout_toRightOf="@+id/button1" />  //this will put the left edge of this button at the right edge of button1 
```

# php - PHP serialize() 用于输入表单元素？

> ID：15606214
> 
> 赞同：2
> 
> 时间：2013-03-25T01:14:58.470
> 
> 标签：php, forms, serialization, hidden

对于那些知道它的人来说，快速而简单的问题 -

我正在使用序列化将数组放入隐藏的表单元素中 - 但引号（可能还有其他字符？）正在弄乱 html。

是否有在 html 中传递序列化数据的最佳实践？

这是现在的输出：

```
<input type="hidden" value="a:2:{s:8:"buyer_id";i:1;s:11:"buyer_email";s:27:"name@someaddress.com";}" name="custom" /> 
```

正在考虑做某种转义字符功能，但也许有更专业的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T01:18:18.947

除非有更专业/更智能的方法来执行此操作，否则我将使用以下方法：

```
$paypal_vars = array(   
    'buyer_id' => $this->user->ID,
    'buyer_email' => $this->user->user_email,   
);

$paypal_vars = htmlspecialchars(serialize($paypal_vars)); 
```

或者

```
$paypal_vars = array(   
    'buyer_id' => $this->user->ID,
    'buyer_email' => $this->user->user_email,   
);

$paypal_vars = htmlentities(serialize($paypal_vars)); 
```

# java - Java 集合 binarySearch 无法正常工作

> ID：15606219
> 
> 赞同：5
> 
> 时间：2013-03-25T01:16:11.587
> 
> 标签：java, collections, binary-search

我只是想使用本机 Java binarySearch，希望它总能找到第一次出现的地方。但它并不总是返回第一次出现，我在这里做错了什么？

```
import java.util.*;

class BinarySearchWithComparator
{
  public static void main(String[] args)
  {
    // Please scroll down to see 'User' class implementation.
    List<User> l = new ArrayList<User>();
    l.add(new User(10, "A"));
    l.add(new User(10, "A"));
    l.add(new User(10, "A"));

    l.add(new User(20, "B"));
    l.add(new User(20, "B"));
    l.add(new User(20, "B"));
    l.add(new User(20, "B"));
    l.add(new User(20, "B"));
    l.add(new User(20, "B"));
    l.add(new User(20, "B"));

    l.add(new User(30, "C"));
    l.add(new User(30, "C"));
    l.add(new User(30, "C"));
    l.add(new User(30, "C"));

    Comparator<User> c = new Comparator<User>() {
      public int compare(User u1, User u2) {
        return u1.getId().compareTo(u2.getId());
      }
    };

    // Must pass in an object of type 'User' as the key.
    // The key is an 'User' with the 'id' which is been searched for.
    // The 'name' field is not used in the comparison for the binary search,
    // so it can be a dummy value -- here it is omitted with a null.
    //
    // Also note that the List must be sorted before running binarySearch,
    // in this case, the list is already sorted.
    Collections.sort(l,c);

    int index = Collections.binarySearch(l, new User(10, null), c);
    System.out.println(index);

    index = Collections.binarySearch(l, new User(20, null), c);
    System.out.println(index);

    index = Collections.binarySearch(l, new User(30, null), c);
    System.out.println(index);

    index = Collections.binarySearch(l, new User(42, null), c);
    System.out.println(index);
  }
}

class User {
  private int id;
  private String name;

  public User(int id, String name) {
    this.id = id;
    this.name = name;
  }

  public Integer getId() {
    return Integer.valueOf(id);
  }
} 
```

========

```
Result:
2 //not 0 ?
6 //not 3?
10 //ok
-15  ok

Why first 10 is not index 0 ?
Why first 20 is not index 3 ?
OK , 30 first occurrence is index 10 
```

=======================================

更新

现在看来，API 并不能保证这一点！谁能给我一个工作示例，说明如何找到给定元素的第一次出现和最后一次出现（比如用户（10，null）？

非常感谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-25T01:23:31.227

Java 不保证它将返回相等元素中的哪个元素。当您在相等范围内有多个元素时，您需要向下遍历列表以找到与您要查找的内容相等的第一个元素，如下所示：

```
User lookFor = new User(30, null);
index = Collections.binarySearch(l, lookFor, c);
while (index > 0 && c.compare(lookFor, l[index-1]) == 0) {
    index--;
}
// At this point the index is at the first element of the equal range 
```

您可以将此逻辑包装在静态函数中，以避免每次都编写显式循环。

请注意，如果您的集合是随机访问的，这将导致最坏情况下的性能（当有许多相同的元素时）从 O(lg(n)) 降级到 O(n)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-25T01:19:33.027

但是您的列表中有超过 1 个 id 为 10 的元素。所以 binarySearch**没有错**

binarySearch 的 Java 手册是这样说的：

使用二分搜索算法在指定列表中搜索指定对象。在进行此调用之前，列表必须根据其元素的自然顺序（如 sort(List) 方法）按升序排序。如果未排序，则结果未定义。**如果列表包含多个等于指定对象的元素，则无法保证会找到哪一个。**

[http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#binarySearch(java.util.List](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#binarySearch(java.util.List) , T)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T01:21:02.110

来自 Array.binarySearch() 上的 javadoc：

```
Searches a range of the specified array of bytes for the specified value using the
binary search algorithm. The range must be sorted (as by the sort(byte[], int, int) 
method) prior to making this call. If it is not sorted, the results are undefined. 
If the range contains multiple elements with the specified value, there is no 
guarantee which one will be found. 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-25T01:21:18.330

出于排序目的，您列表中的许多项目都是相同的。如果两个项目具有相同的 ID，那么从排序的角度来看，使用哪一个并不重要。Collections.binarySearch 只是将列表分成两半，直到找到匹配项。一旦找到匹配项，它就不会检查前一个项目是否也匹配，它只会返回索引。

考虑一个更健壮的 compareTo 实现，如果项目将具有 ID，它不仅按 ID 排序。

# html - 在 div 元素中居中 H2

> ID：15606221
> 
> 赞同：2
> 
> 时间：2013-03-23T17:17:39.927
> 
> 标签：html, css, header, stylesheet

我想将 h2 居中在 #top 内，但`vertical-align:middle`不起作用......我不知道该怎么做！

```
#top {
    display: block;
    position: relative;
    height: 100px;
    background-color: rgba(89,144,222,.6);
}
#top h2{
    text-shadow: 2px 2px black;
    text-align: center;
    color: white;
    font-family:"Impact";
    font-size: 50px;
} 
```

效果是 - [http://puu.sh/2mz5M](http://puu.sh/2mz5M)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-24T21:57:51.523

我明白了，您为 div 定义了高度，这非常适合这种情况。你可以这样做：

```
#top h2{
    text-shadow: 2px 2px black;
    text-align: center;
    color: white;
    font-family:"Impact";
    font-size: 50px;
    line-height: 100px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T01:44:27.290

如果您设置 div 的 line-height，它应该可以工作。请参阅此处的方法 2：

[http://phrogz.net/css/vertical-align/index.html](http://phrogz.net/css/vertical-align/index.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T01:32:30.297

为垂直对齐和 text-align: center 提供固定的高度和行高以使文本居中。

```
#top {
    position: relative;
    height: 100px;
    line-height: 100px;
    background-color: rgba(89,144,222,.6);
}

    #top h2{
        text-shadow: 2px 2px black;
        text-align: center;
        color: white;
        font-family:"Impact";
        font-size: 50px;
    } 
```

**jsfiddle：http:** [//jsfiddle.net/XvFCT/](http://jsfiddle.net/XvFCT/)

# arrays - 如何在 Perl 中按元素对多个数组求和？

> ID：15606225
> 
> 赞同：1
> 
> 时间：2013-03-25T01:17:34.440
> 
> 标签：arrays, perl, sum

已经有一个与此非常相似的问题，但我想对**多个**数组执行此操作。我有一个数组数组。

```
my @AoA = (
    $arr1 = [ 1, 0, 0, 0, 1 ],
    $arr2 = [ 1, 1, 0, 1, 1 ],
    $arr3 = [ 2, 0, 2, 1, 0 ]
); 
```

我想对所有三个（或更多）数组的项目求和以获得一个新的

```
( 4, 1, 2, 2, 2 ) 
```

`use List::MoreUtils qw/pairwise/`需要两个数组参数。

```
@new_array = pairwise { $a + $b } @$arr1, @$arr2; 
```

想到的一种解决方案是循环遍历**前两个**数组并将其`@AoA`传递给函数。在随后的迭代中，我将把 next in和 the传递给 pairwise 函数。对于奇数大小的数组，在我传入最后一个in 之后，我将传入一个大小相等的数组，其中元素为 0。**`pairwise``@$arr``@AoA``@new_array``@$arr``@AoA`**

 **这是一个好方法吗？如果是这样，我该如何实施？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T02:43:19.837

您实际上可能正在寻找[PDL](http://pdl.perl.org)，即 Perl 数据语言。它是 Perl 的数值数组模块。它具有许多用于处理数据数组的功能。与其他语言的其他数值数组模块不同，它具有在任意维度上使用其功能的便捷能力，它会按照您的意思行事。请注意，这都是在 C 级别完成的，因此高效且快速！

在您的情况下，您正在寻找`sumover`将采用 N 维对象并返回通过对第一维求和创建的 N-1 维对象的投影方法。由于在您的系统中您想对秒求和，我们首先必须通过交换维度 0 和 1 来进行转置。

```
#!/usr/bin/env perl

use strict;
use warnings;

use PDL;

my @AoA = (
    [ 1, 0, 0, 0, 1 ],
    [ 1, 1, 0, 1, 1 ],
    [ 2, 0, 2, 1, 0 ],
);

my $pdl = pdl \@AoA;

my $sum = $pdl->xchg(0,1)->sumover;
print $sum . "\n"; 
# [4 1 2 2 2] 
```

返回 from`sumover`是另一个 PDL 对象，如果你需要一个 Perl 列表，你可以使用`list`

```
print "$_\n" for $sum->list; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-25T01:43:45.093

您可以轻松实现“n-wise”函数：

```
sub nwise (&@) # ← take a code block, and any number of further arguments
{
  my ($code, @arefs) = @_;
  return map {$code->( do{ my $i = $_; map $arefs[$_][$i], 0 .. $#arefs } )}
             0 .. $#{$arefs[0]};
} 
```

该代码有点难看，因为 Perl 不支持多维数组的切片。相反，我使用嵌套`map`的 s。

快速测试：

```
use Test::More;
my @a = (1, 0, 0, 0, 1);
my @b = (1, 1, 0, 1, 1);
my @c = (2, 0, 2, 1, 0);
is_deeply [ nwise { $_[0] + $_[1] + $_[2] } \@a, \@b, \@c], [4, 1, 2, 2, 2]; 
```

我更喜欢将数组作为引用传递，而不是使用`\@`or`+`原型：这允许你做

```
my @arrays = (\@a, \@b, \@c);
nwise {...} @arrays; 
```

从`List::MoreUtils`你也可以使用`each_arrayref`：

```
use List::Util qw/sum/;
use List::MoreUtils qw/each_arrayref/;
my $iter = each_arrayref @arrays;
my @out;
while (my @vals = $iter->()) {
  push @out, sum @vals;
}
is_deeply \@out, [4, 1, 2, 2, 2]; 
```

或者只是简单的旧循环：

```
my @out;
for my $i (0 .. $#a) {
  my $accumulator = 0;
  for my $array (@arrays) {
    $accumulator += $array->[$i];
  }
  push @out, $accumulator;
}
is_deeply \@out, [4, 1, 2, 2, 2]; 
```

以上都假设所有数组的长度相同。

* * *

关于您的片段的注释：

您的数组结构示例当然是合法的 perl，它甚至可以按预期运行，但最好省略内部分配：

```
my @AoA = (
    [ 1, 0, 0, 0, 1 ],
    [ 1, 1, 0, 1, 1 ],
    [ 2, 0, 2, 1, 0 ],
); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-25T01:43:07.433

这是一个简单的迭代方法。对于大型数据集，它可能会表现得非常糟糕。如果您想要一个性能更好的解决方案，您可能需要更改数据结构，或在 CPAN 上查找其中一个统计包。下面假设所有数组的大小都与第一个数组相同。

```
$sum = 0;
@rv = ();
for ($y=0; $y < scalar @{$AoA[0]}; $y++) {
    for ($x=0; $x < scalar @AoA; $x++) {
        $sum += ${$AoA[$x]}[$y];
    }
    push @rv, $sum;
    $sum = 0;
}

print '('.join(',',@rv).")\n"; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-25T02:06:02.837

假设：

*   AoA 中的每一行都将具有与第一行相同的列数。
*   arrayrefs 中的每个值都是一个数字（具体来说，一个与 += 运算符一起“工作”的格式的值）
*   将至少有一个“行”，其中至少有一个“列”

注意：“$#{$AoA[0]}”表示“数组的最后一个元素 ($#) 的索引，它是 @AoA 中的第一个数组引用 ({$AoA[0]})”

```
(shebang)/usr/bin/perl
use strict;
use warnings;

my @AoA = (
    [ 1, 0, 0, 0, 1 ],
    [ 1, 1, 0, 1, 1 ],
    [ 2, 0, 2, 1, 0 ]
);

my @sums;

foreach my $column (0..$#{$AoA[0]}) {
  my $sum;
  foreach my $aref (@AoA){
    $sum += $aref->[$column];
  }
  push @sums,$sum;
}

use Data::Dumper;
print Dumper \@sums; 
```**

# php - 冲突的 Modrewrite 规则

> ID：15606228
> 
> 赞同：0
> 
> 时间：2013-03-25T01:17:55.140
> 
> 标签：php, mod-rewrite

正如我之前的问题可能已经向您展示的那样，我对 modrewrite 不是很好。我试图搜索并为这个特定问题提出空缺。我希望有人可以帮助我解决这个问题；

我使用 modrewrite 作为短 URL 生成器的一部分，直接访问唯一 ID 会将它们转发到它们的目的地。在末尾添加 /v 将允许门户页面显示它们被转发到的 URL（如预览页面）

因为 /v 在 ID 之后，所以它工作得很好，但是我想允许通过**$_GET添加新页面**

**这是提供给用户的快捷链接；**

```
javascript:void(location.href='http://www.website.com/n/?url='+location.href) 
```

**这是 .htaccess 的内容**

```
RewriteEngine On

RewriteRule ^n actions.php?do=new [NS,L,NC]
RewriteRule ^([a-zA-Z0-9]+)$ actions.php?id=$1 [NC]
RewriteRule ^([a-zA-Z0-9]+)/([a-zA-Z0-9]+)$  actions.php?id=$1&do=$2 [NC] 
```

**问题：** 因为**/n**代替了 ID，它显然是冲突的。我尝试过 NS 和 L，因为它们能够在规则匹配后停止执行。经过进一步检查，它们当然不会像我想要的那样工作。

最后，这里有一些示例说明 URL 在最终产品中的外观；

```
 New Submission:
http://www.web.com/n/?url=http://www.google.com      [Outputs new URL as 12345]
   Visit the ID directly:
http://www.web.com/1A2b34D5                       [Forwards to URL Destination]
   Visit the ID Preview Link:
http://www.web.com/1A2b34D5/v             [Displays preview, Delayed Forwarder] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T01:55:20.953

如果您想`url`从查询字符串中获取变量，只需添加[`QSA`](http://httpd.apache.org/docs/current/rewrite/flags.html#flag_qsa)到选项中，它将保存 url`$_GET['url']`

```
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-f   # if the url file does not exist
RewriteRule ^n/?$ actions.php?do=new [NS,L,NC,QSA]
RewriteRule ^([a-zA-Z0-9]+)$ actions.php?id=$1 [NC,L]
RewriteRule ^([a-zA-Z0-9]+)/([a-zA-Z0-9]+)$  actions.php?id=$1&do=$2 [NC,L] 
```

同样在您的 actions.php 中，您必须设置条件：

```
if (isset($_GET['do']))
{
    if ($_GET['do'] == 'new') // http://www.web.com/n/?url=http://www.google.com
    {
        if (!isset($_GET['url'])) die('No url');

        // save the url
        // and outputs new URL
    }
    else if ($_GET['do'] == 'v') // http://www.web.com/1A2b34D5/v
    {
        // Visit the ID Preview Link
    }
}
else // http://www.web.com/1A2b34D5
{
    // Visit the ID directly
} 
```

**编辑：**

我不知道发生了什么，但就像我在评论中所说的那样，我已经在我的 localhost 中进行了测试，它可以按您的预期工作，在我的测试中，即使我创建了一个具有相同内容的文件，我也`test.php`有这个内容以下是我测试过的一些 url 示例：`var_dump($_GET);``actions.php`

**示例 1：**

`http://localhost/n?url=google.com`或者 `http://localhost/n/?url=google.com`

这条规则被执行：

`RewriteRule ^n/?$ actions.php?do=new [NS,L,NC,QSA]`

输出：

`array(2) { ["do"]=> string(3) "new" ["url"]=> string(10) "google.com" }`

**示例 2：**

`http://localhost/n12345`输出：`array(1) { ["id"]=> string(6) "n12345" }` `http://localhost/nnnn456`输出：`array(1) { ["id"]=> string(6) "nnnn456" }`

这条规则被执行：

`RewriteRule ^([a-zA-Z0-9]+)$ actions.php?id=$1 [NC,L]`

**示例 3：**

`http://localhost/n12345/v`输出：`array(2) { ["id"]=> string(6) "n12345" ["do"]=> string(1) "v" }`

这条规则被执行：

`RewriteRule ^([a-zA-Z0-9]+)/([a-zA-Z0-9]+)$ actions.php?id=$1&do=$2 [NC,L]`

# java - 在数组中按姓氏搜索

> ID：15606232
> 
> 赞同：0
> 
> 时间：2013-03-25T01:18:11.563
> 
> 标签：java, arrays, search

我制作了一个包含三个类的联系人列表，ContactList 类包含一个存储姓氏、名字、街道、城市、州、邮编、国家、电子邮件、电话号码和便笺的数组。

我想在 ContactList 类中实现一个按姓氏搜索的功能，它显示了具有用户搜索的姓氏的联系人的所有信息，但我似乎无法工作。:(

```
import java.util.*;

public class ContactList {

    //declaration of an array and its attributes
    private final int SIZE = 10;
    private Person [ ] list;
    private int nextEmptyElementInArray = 0;

    // Constructor for ContactList object
    public ContactList ()   {
        list = new Person [SIZE];
    }

    // Method that adds a new contact into the array
    public void addNewContact() {
        list[nextEmptyElementInArray] = new Person();
        list[nextEmptyElementInArray].read();
        nextEmptyElementInArray++;
    }

    // Method retrieves contacts by last name

    int searchByLastName(Person [] list) {
        Scanner console;
        console = new Scanner(System.in);
        String searchByLastName = console.next();
        for (int i= 0; i< list.length; i++) {
            if (list[nextEmptyElementInArray].lastName.equals(searchByLastName)) 
                return i;
            }
            return -1;
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T01:22:27.740

您的`list`下标似乎是错误的：对于循环的每次迭代，您都在执行以下操作：

```
if (list[nextEmptyElementInArray].lastName.equals(searchByLastName)) 
```

如果我正确理解了这个问题，你应该这样做：

```
if (list[i].lastName.equals(searchByLastName)) 
```

另外，请注意将变量命名为与函数相同。充其量它会引起混乱。

[编辑] 刚刚注意到您正在预先分配列表，然后使用`nextEmptyElementInArray`. 你的`for`循环应该是这样的：

```
for (int i= 0; i< nextEmptyElementInArray; i++) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T04:51:23.003

我建议将搜索方法更改为

```
 int searchByLastName(Person [] list, String lastName) {
        for (int i= 0; i < list.length; i++) {
            if (list[i].lastName.equals(lastName)) 
                return i;
            }
        }
        return -1;
  } 
```

从该函数外部的控制台读取 lastName 并将其作为搜索参数传递

# c - pthread 编程中的共享数据

> ID：15606233
> 
> 赞同：2
> 
> 时间：2013-03-25T01:18:12.657
> 
> 标签：c, pointers, variable-assignment, matrix-multiplication

在 pthread 编程中，我仍然不太确定。如果有人能告诉我一个绝对的答案，我将不胜感激。

我之前的问题在这里： [如何在简单的 Pthread 编程中分配数组变量？](https://stackoverflow.com/questions/15176603/how-do-i-assign-array-variable-in-a-simple-pthread-programming)

现在，我正在研究矩阵乘法。使用它效果很好：

```
typedef struct {
    int rowIdx;
    int (*matA)[SIZE], (*matB)[SIZE], (*matC)[SIZE];
} newType; 

int main (){
    int matriksA[SIZE][SIZE];
    int matriksB[SIZE][SIZE];
    int matriksC[SIZE][SIZE];

    for (i=0;i<NUM_THREAD;i++) {
         (*block).rowIdx = i;
         (*block).matA = matriksA;
         (*block).matB = matriksB;
         (*block).matC = matriksC;
         pthread_create(&arrThread[i], NULL, matrixMul, (void *)block);
         block++;
    }
}

void *matrixMul(void *x){
    newType *p = (newType *) x;
    int i = (*p).rowIdx;
    int j,k;
    for (j=0;j<SIZE;j++){
        int result = 0;
        for(k=0;k<SIZE;k++){
            int MAik = (*p).matA[i][k];
            int MBkj = (*p).matB[k][j];
            result = result + (MAik*MBkj);
        }
        (*p).matC[i][j] = result;
    }
    pthread_exit(NULL);
} 
```

matrixMul 正在执行矩阵乘法 matC = matA x matB。

我之前尝试过使用这个结构，但它没有用。

```
typedef struct {
    int rowIdx;
    int **matA, **matB, **matC;
} newType; 
```

显然，从我读过的内容来看，变量数组可以被认为是一个指针，它保存着数组中第一个元素的地址。至于二维数组，我们必须告诉编译器列的大小。因此，我们必须在 typedef 结构中使用 (*matA)[SIZE] 而不是 **matA。

但我仍然不确定我在那里做什么。我只是通过分配指针将二维数组复制到另一个二维数组还是什么？有点混乱……哈哈……

我的下一个问题是关于这些行：

```
(*block).matA = matriksA;
(*block).matB = matriksB;
(*block).matC = matriksC; 
```

1.  那里究竟发生了什么？上面代码中的每个**块**变量是否都有自己的矩阵数据副本？或者他们只是通过让他们的指针指向内存中的相同位置来共享它，这意味着 matA、matB 和 matC 的行为就像一个静态变量（如在面向对象编程中）？也就是说，matA、matB、matC是否只有一份？线程是否同时访问共享数据？或者是否有许多“matA”副本，并且每个副本在 RAM 中都有自己不同的分配？

2.  我的第一篇文章也有同样的问题，这些线后面发生了什么？(*z).arrA = arrayA; (*z).arrB = arrayB; (*z).arrC = 数组C;

3.  上面的代码是否足够有效地完成任务（数组加法和矩阵乘法）？或者从内存分配的角度来看，还有另一种更有效的方法吗？

@Code-Guru：我已经发布了新问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T01:59:00.663

线程编程的基本问题是确保两个单独的线程不可能同时尝试修改数据，或者读取另一个线程可能正在修改的数据。（如果不存在数据被修改的危险，两个线程同时读取相同的不变数据是完全可以的。）

应用于您的矩阵乘法问题，线程只会读取矩阵 A 和矩阵 B，因此您不必控制对这些变量的访问 - 假设它们在您启动线程之前已初始化。

另一方面，结果 Matrix C 将被访问以进行写入，因此您必须确保已对​​工作负载进行了分区，以便没有两个线程将访问相同的元素（它们正在处理 Matrix 的不相交子集C），或者您必须协调访问，以便在给定时间只有一个线程正在修改给定单元格，并且您已经通过互斥 (a `mutex`) 或等效的东西强制执行此操作。

### 你的问题

除其他事项外，您还没有展示如何`block`定义。如果您向我们展示一个 SSCCE（[简短、独立、正确的示例](http://sscce.org/)），就像我在下面向您展示的那样，这将很有帮助。它使我们不必将您的代码片段反向工程为工作代码。处理得当，它不会占用太多空间。（由于代码不完整，此答案的早期版本偏离了方向！）

在您的原始文件中，您创建了`NUM_THREAD`线程来处理`SIZE`x`SIZE`矩阵。由于您没有显示`SIZE`or的定义`NUM_THREAD`，我们必须假设两个大小相等。根据两个常数的相对大小，可以使用各种不同的灾难配方。

1.  线程都被赋予了相同的矩阵来处理，这就是你真正要问的。每个线程都有一个指向同一内存的指针。

2.  假设`(*z).arrA = arrayA;`您指的是`(*block).arrA = matriksA;`分配，那么您正在分配一个指向 SIZE 整数数组的指针`block->arrA`（相当于`(*block).arrA`）。这有点扭曲，但合法。你需要小心使用它。

3.  你问代码是否足够高效。第一个子问题：它是否会产生正确的答案（并且可以保证）？我还不确定。但是，如果每个线程都在结果矩阵的一列上工作，那应该是足够安全的。

### SSCCE

此代码使用 C99 构造。它不会在 C89 下编译。

```
#include <stdio.h>
#include <pthread.h>

enum { SIZE = 3 };

typedef struct
{
    int   rowIdx;
    int (*matA)[SIZE];
    int (*matB)[SIZE];
    int (*matC)[SIZE];
} newType; 

extern void *matrixMul(void *);

static void print_matrix(const char *tag, int d1, int d2, int matrix[d1][d2])
{
    printf("%s: (%d x %d)\n", tag, d1, d2);
    for (int i = 0; i < d1; i++)
    {
        printf("%d:", i);
        for (int j = 0; j < d2; j++)
            printf(" %6d", matrix[i][j]);
        putchar('\n');
    }
}

int main(void)
{
    int matriksA[SIZE][SIZE] = { {  1,  2,  3 }, {  4,  5,  6 }, {  7,  8,  9 } };
    int matriksB[SIZE][SIZE] = { { 11, 12, 13 }, { 14, 15, 16 }, { 17, 18, 19 } };
    int matriksC[SIZE][SIZE];
    newType  thedata[SIZE];
    newType *block = thedata;
    pthread_t arrThread[SIZE];

    for (int i = 0; i < SIZE; i++)
    {
         block->rowIdx = i;
         block->matA = matriksA;
         block->matB = matriksB;
         block->matC = matriksC;
         //matrixMul(block);
         pthread_create(&arrThread[i], NULL, matrixMul, block);
         block++;
    }

    for (int i = 0; i < SIZE; i++)
        pthread_join(arrThread[i], 0);

    print_matrix("Matrix A", SIZE, SIZE, matriksA);
    print_matrix("Matrix B", SIZE, SIZE, matriksB);
    print_matrix("Matrix C", SIZE, SIZE, matriksC);
}

void *matrixMul(void *x){
    newType *p = (newType *) x;
    int i = p->rowIdx;
    for (int j = 0; j < SIZE; j++)
    {
        int result = 0;
        for(int k = 0; k < SIZE; k++)
        {
            int MAik = p->matA[i][k];
            int MBkj = p->matB[k][j];
            result += MAik * MBkj;
        }
        p->matC[i][j] = result;
    }
    //pthread_exit(NULL);
    return(0);
} 
```

您可能会注意到我添加了矩阵打印功能（并使用了它）。我还为一对 3x3 矩阵添加了样本数据，并且我已经验证了答案是正确的。我分两步进行了测试：

1.  检查代码的单线程版本是否产生了正确的答案。
2.  添加线程。

如果第 1 步产生了错误的答案，你就知道你只需要修正基本的计算；这不是线程引起的问题（因为只有一个线程！）。幸运的是，它产生了正确的答案。然后添加线程很简单。

输出

```
$ ./ta
Matrix A: (3 x 3)
0:      1      2      3
1:      4      5      6
2:      7      8      9
Matrix B: (3 x 3)
0:     11     12     13
1:     14     15     16
2:     17     18     19
Matrix C: (3 x 3)
0:     90     96    102
1:    216    231    246
2:    342    366    390
$ 
```

# powershell - COPY-ITEM Passthru 在遇到错误时不起作用

> ID：15606235
> 
> 赞同：0
> 
> 时间：2013-03-25T01:18:26.867
> 
> 标签：powershell, powershell-2.0

在 ISE 中，我尝试了以下两种方法。两者都不起作用。唯一的方法是`$error`在复制尝试后清除和测试。有什么建议么？

```
$cpy = Copy-Item -Path "D:\~a\2K0NVK0.xt" -Destination "D:\~Bkup-F\2K0NVK10.txt" -Force -passthru -ErrorAction SilentlyContinue

if($cpy){ $cpy   # only displays on successful copy }

Try{
  Copy-Item -Path "D:\~a\2K0NVK0.xt" -Destination "D:\~Bkup-F\2K0NVK10.txt" -Force -ErrorAction SilentlyContinue
} Catch { write-host "Hit a bug!"   # not being displayed } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T03:51:01.443

仅当 ErrorAction 设置为 Stop 时，try/catch 才有效。

# c# - C# 使用类作为字典中的对象

> ID：15606240
> 
> 赞同：3
> 
> 时间：2013-03-25T01:18:56.210
> 
> 标签：c#, class, object, printing, dictionary

我是 C# 的新手，我尝试编写的代码存在一些问题。

我必须制作一个简单的程序来存储学生的一些信息，然后让我打印这些信息。

我的想法是这样的：我创建了一个名为“Aluno”的类，并实现了一系列方法来设置和获取我需要的信息，然后我将这个类作为参数传递给 Dictionary 类似这样的东西：

```
 class Aluno
    {
        private int matricula;
        private string nomeCompleto;

        public int getMatricula() { return matricula; }
        public string getNomeCompleto() { return nomeCompleto;

        public void setMatricula(int m)
        {
            matricula = m;
        }
        public void setNomeCompleto(string nome)
        {
            nomeCompleto = nome;
        } 
```

然后我在字典中使用它

```
 Dictionary<int,object> principal =  new Dictionary<int,object>();
        Aluno a = new Aluno();

        Console.WriteLine("Por favor informe a matricula:");
        a.setMatricula(int.Parse(Console.ReadLine()));
        Console.WriteLine("Por favor informe o nome completo do aluno:");
        a.setNomeCompleto(Console.ReadLine().ToUpper());

        principal.Add(a.getMatricula(), a); 
```

在此之后，我实现了一个类来打印存储在字典中的信息：

```
class ImprimeListagem
    {
        public static void listagemSimples(Dictionary<int,object> origem)
        {
            int contador = 0;

            foreach (KeyValuePair<int, object> chave in origem)
            {
                Console.WriteLine(chave.Key+"|"+chave.Value);

                Console.ReadKey();
            }

        } 
```

当我使用 Visual Studio “查看” chave.value 内部时，存储的所有信息都在那里，但我无法访问它。有人能帮我吗？我将打印整个代码。

```
class Program
{
    static void Main(string[] args)
    {
        const int QTDE_ALUNO_PRINCIPAL = 1;
        const int QTDE_ALUNO_RESERVA = 1;            
        int contadorAlunosPrincial = 0;
        int contadorAlunoReserva = 0;

        Dictionary<int,object> principal =  new Dictionary<int,object>();
        Queue<object> espera = new Queue<object>();

        Aluno a = new Aluno();

        int opcao = 0;

        do
        {
            ImprimeMenu.imprimirMenuPrincipal();
            opcao = int.Parse(Console.ReadLine());

            switch (opcao)
            {
                case 1:
                    if (contadorAlunosPrincial < QTDE_ALUNO_PRINCIPAL)
                    {
                        Console.Clear();
                        Console.WriteLine("Por favor informe a matricula:");
                        a.setMatricula(int.Parse(Console.ReadLine()));
                        Console.WriteLine("Por favor informe o nome completo do aluno:");
                        a.setNomeCompleto(Console.ReadLine().ToUpper());
                        Console.WriteLine("Por favor informe o nome da mãe:");
                        a.setNomeDaMae(Console.ReadLine().ToUpper());
                        Console.WriteLine("Por favor informe o nome do pai:");
                        a.setNomeDoPai(Console.ReadLine().ToUpper());
                        Console.WriteLine("Por favor informe o país");
                        a.setEnderecoPais(Console.ReadLine().ToUpper());
                        Console.WriteLine("Por favor informe o estado:");
                        a.setEnderecoEstado(Console.ReadLine().ToUpper());
                        Console.WriteLine("Por favor informe a rua e o numero");
                        a.setEnderecoRuaNumero(Console.ReadLine().ToUpper());
                        Console.WriteLine("Por favor informe o cep");
                        a.setEnderecoCep(Console.ReadLine().ToUpper());
                        Console.WriteLine("Por favor informe o telefone para contato:");
                        a.setTelefoneContato(Console.ReadLine().ToUpper());

                        principal.Add(a.getMatricula(), a);

                        contadorAlunosPrincial++;

                    }
                    else
                        if (contadorAlunoReserva < QTDE_ALUNO_RESERVA)
                        {
                            Console.Clear();
                            Console.WriteLine("Por favor informe a matricula:");
                            a.setMatricula(int.Parse(Console.ReadLine()));
                            Console.WriteLine("Por favor informe o nome completo do aluno:");
                            a.setNomeCompleto(Console.ReadLine().ToUpper());
                            Console.WriteLine("Por favor informe o nome da mãe:");
                            a.setNomeDaMae(Console.ReadLine().ToUpper());
                            Console.WriteLine("Por favor informe o nome do pai:");
                            a.setNomeDoPai(Console.ReadLine().ToUpper());
                            Console.WriteLine("Por favor informe o país");
                            a.setEnderecoPais(Console.ReadLine().ToUpper());
                            Console.WriteLine("Por favor informe o estado:");
                            a.setEnderecoEstado(Console.ReadLine().ToUpper());
                            Console.WriteLine("Por favor informe a cidade:");
                            a.setEnderecoCidade(Console.ReadLine().ToUpper());
                            Console.WriteLine("Por favor informe o bairro:");
                            a.setEnderecoBairro(Console.ReadLine().ToUpper());
                            Console.WriteLine("Por favor informe a rua e o numero");
                            a.setEnderecoRuaNumero(Console.ReadLine().ToUpper());
                            Console.WriteLine("Por favor informe o cep");
                            a.setEnderecoCep(Console.ReadLine().ToUpper());
                            Console.WriteLine("Por favor informe o telefone para contato:");
                            a.setTelefoneContato(Console.ReadLine().ToUpper());

                            espera.Enqueue(a);

                            contadorAlunoReserva++;
                        }
                        else
                            Console.WriteLine("Não há mais vagas para cadastro de Alunos!\nTente novamente mais tarde.");

                    break;

                case 2:
                    ImprimeMenu.imprimirMenuSecundário();
                    opcao = int.Parse(Console.ReadLine());
                    switch (opcao)
                    {
                        case 1:
                            ImprimeListagem.listagemSimples(principal);
                            break;
                        case 2:
                            break;
                    }
                    break;

            }
        } while (opcao != 7);

    }

    class ImprimeMenu
    {
        public static void imprimirMenuPrincipal()
        {
            Console.Clear();
            Console.WriteLine("Programa de cadastro de alunos! Escolha a opção desejada.\n\n" +
                "1 – Cadastrar aluno\n" +
                "2 – Imprimir lista de alunos\n" +
                "3 – Imprimir lista de espera\n" +
                "4 – Pesquisar aluno\n" +
                "5 – Desistência\n" +
                "6 – Sorteio\n" +
                "7 – Sair");
        }
        public static void imprimirMenuSecundário()
        {
            Console.Clear();
            Console.WriteLine("2 – Imprimir lista de alunos\n\n" +
                "\t1 – Listagem simples\n" +
                "\t2 – Listagem completa");
        }
    }

    class Aluno
    {
        public Aluno()
        {
            matricula = 0;
            nomeCompleto = null;
            nomeDaMae = null;
            nomeDoPai = null;
            enderecoPais = null;
            enderecoEstado = null;
            enderecoCidade = null;
            enderecoBairro = null;
            enderecoRuaNumero = null;
            enderecoCep = null;
            telefoneContato = null; 
        }            

        private int matricula;
        private string nomeCompleto;
        private string nomeDaMae;
        private string nomeDoPai;
        private string enderecoPais;
        private string enderecoEstado;
        private string enderecoCidade;
        private string enderecoBairro;
        private string enderecoRuaNumero;
        private string enderecoCep;
        private string telefoneContato;

        public void setMatricula(int m)
        {
            matricula = m;
        }

        public void setNomeCompleto(string nome)
        {
            nomeCompleto = nome;
        }

        public void setNomeDaMae(string nomeMae)
        {
            nomeDaMae = nomeMae;
        }

        public void setNomeDoPai(string nomePai)
        {
            nomeDoPai = nomePai;
        }

        public void setEnderecoPais(string pais)
        {
            enderecoPais =  pais;
        }

        public void setEnderecoEstado(string estado)
        {
            enderecoEstado = estado;
        }

        public void setEnderecoCidade(string cidade)
        {
            enderecoCidade = cidade;
        }

        public void setEnderecoBairro(string bairro)
        {
            enderecoBairro = bairro;
        }

        public void setEnderecoRuaNumero(string ruaNumero)
        {
            enderecoRuaNumero = ruaNumero;
        }

        public void setEnderecoCep(string cep)
        {
            enderecoCep = cep;
        }

        public void setTelefoneContato(string telefone)
        {
            telefoneContato = telefone;
        }

        public int getMatricula() { return matricula; }
        public string getNomeCompleto() { return nomeCompleto; }
        public string getNomeDaMae() { return nomeDaMae; }
        public string getEnderecoPais() { return enderecoPais; }
        public string getEnderecoEstado() { return enderecoEstado; }
        public string getEnderecoCidade() { return enderecoCidade; }
        public string getEnderecoBairro() { return enderecoBairro; }
        public string getEnderecoRuaNumero() { return enderecoRuaNumero; }
        public string getEnderecoCep() { return enderecoCep; }
        public string getTelefoneContato() { return telefoneContato; }           

    }

    class ImprimeListagem
    {
        public static void listagemSimples(Dictionary<int,object> origem)
        {

            foreach (KeyValuePair<int, object> chave in origem)
            {
                Console.WriteLine(chave.Key+"|"+chave.Value);

                Console.ReadKey();
            }

        }            
    } 
```

提前感谢并为我糟糕的英语感到抱歉，这不是我的母语。:D

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T01:32:45.583

看起来你想要：

```
Dictionary<int,Aluno> principal =  new Dictionary<int,Aluno>(); 
```

一般来说，需要使用`object`泛型类型的参数是非常罕见的。在大多数情况下，您应该使用具体类型（或接口）。

如果您真的发现自己使用`object value;`的是具体类型而不是具体类型 - 您可以将其转换为您期望“值”为的类型：`MyType = (MyType)value;`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T01:35:28.143

您需要像这样明确地将`Object`您从 Dictionary 中获得的内容转换为您的班级`Aluno``((Aluno)chave.Value)`

# python - 用于拉取 html 并完全去相对化它的脚本。（单个文件离线）

> ID：15606242
> 
> 赞同：1
> 
> 时间：2013-03-25T01:19:10.437
> 
> 标签：python, parsing, web-applications, web, lxml

我正在尝试学习 python 并创建一个 Web 实用程序。我试图完成的一项任务是创建一个可以在本地运行但链接到它需要看起来像原始网页的所有内容的 html 文件。（如果你要问我为什么要这个，那是因为它可能是我正在创建的实用程序的一部分，或者如果不是，只是为了教育）所以我有两个问题，一个理论问题和一个实际问题：

1）出于视觉（而不是功能）目的，这可能吗？html 页面可以离线工作，同时链接到它需要在线的所有内容吗？或者如果他们的一些基本的关于让 html 文件本身在 web 服务器上执行而不允许这样做是可能的？我能走多远？

2）我已经启动了一个 python 脚本，它对 html 页面上的链接元素进行去关联（制作那个），但我是一个菜鸟，所以很可能我错过了一些也会链接到外部资源的元素或属性。在尝试了几页之后，我注意到下面代码中的那个不能正常工作，它们似乎是一个链接不正确的 .js 文件。（即将出现的许多问题中的第一个）假设我的第一个问题的答案至少部分是肯定的，任何人都可以帮我修复这个网站的代码吗？

谢谢你。

更新，我错过了这个脚本标签，但即使在我添加它之后它仍然无法正常工作。

```
import lxml
import sys
from lxml import etree
from StringIO import StringIO
from lxml.html import fromstring, tostring
import urllib2
from urlparse import urljoin

site = "www.script-tutorials.com/advance-php-login-system-tutorial/"
output_filename = "output.html"

def download(site):
    response = urllib2.urlopen("http://"+site)
    html_input = response.read()
    return html_input

def derealitivise(site, html_input):

    active_html = lxml.html.fromstring(html_input)

    for element in tags_to_derealitivise:

        for tag in active_html.xpath(str(element+"[@"+"src"+"]")):
            tag.attrib["src"] = urljoin("http://"+site, tag.attrib.get("src"))

        for tag in active_html.xpath(str(element+"[@"+"href"+"]")):
            tag.attrib["href"] = urljoin("http://"+site, tag.attrib.get("href"))

    return lxml.html.tostring(active_html)

active_html = ""
tags_to_derealitivise = ("//img", "//a", "//link", "//embed", "//audio", "//video", "//script")

print "downloading..."
active_html = download(site)

active_html = derealitivise(site, active_html)

print "writing file..."

output_file = open (output_filename, "w")
output_file.write(active_html)
output_file.close() 
```

此外，我可以通过检查所有元素来使代码更加完整......

它看起来有点像这样，但我不知道迭代所有元素的确切方法。这是一个单独的问题，我很可能会在任何人回复时弄清楚......：

```
def derealitivise(site, html_input):

active_html = lxml.html.fromstring(html_input)

for element in active_html.xpath:

    for tag in active_html.xpath(str(element+"[@"+"src"+"]")):
        tag.attrib["src"] = urljoin("http://"+site, tag.attrib.get("src"))

    for tag in active_html.xpath(str(element+"[@"+"href"+"]")):
        tag.attrib["href"] = urljoin("http://"+site, tag.attrib.get("href"))

return lxml.html.tostring(active_html) 
```

*更新*

多亏了 Burhan Khalid 的解决方案，乍一看它似乎太简单了，不可行，我得到了它的工作。代码非常简单，大多数人很可能不需要它，但无论如何我都会发布它，以防它有帮助：

```
import lxml
import sys
from lxml import etree
from StringIO import StringIO
from lxml.html import fromstring, tostring
import urllib2
from urlparse import urljoin

site = "www.script-tutorials.com/advance-php-login-system-tutorial/"
output_filename = "output.html"

def download(site):
    response = urllib2.urlopen(site)
    html_input = response.read()
    return html_input

def derealitivise(site, html_input):

    active_html = html_input.replace('<head>', '<head> <base href='+site+'>')

    return active_html
active_html = ""

print "downloading..."
active_html = download(site)

active_html = derealitivise(site, active_html)

print "writing file..."

output_file = open (output_filename, "w")
output_file.write(active_html)
output_file.close() 
```

尽管如此，尽管它非常简单，但在我在脚本中列出的网站上运行的 .js 对象仍然无法正确加载。有谁知道这是否可以解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T05:38:53.823

> 虽然我试图只使 html 文件脱机，同时使用网络上的链接资源。

这是一个两步过程：

1.  复制 HTML 文件并将其保存到本地目录。
2.  在该部分中添加一个[`BASE`](http://www.w3.org/TR/html4/struct/links.html#h-12.4)标签，并将其属性指向绝对 URL。`HEAD``href`

既然你想自己学习如何做，我就这样吧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T00:51:39.397

@Burhan 使用`<base href="...">`中的标签有一个简单的答案`<head>`，它可以按照您的发现工作。我运行了您发布的脚本，并且页面下载正常。正如您所注意到的，一些 JavaScript 现在失败了。这可能有多种原因。

如果您将 HTML 文件作为本地`file:///`URL 打开，该页面可能无法正常工作。许多浏览器对本地 HTML 文件进行大量沙箱处理，不允许它们执行网络请求或检查本地文件。

该页面可能`XmlHTTPRequests`对远程站点执行或其他网络操作，由于跨域脚本的原因，这些操作将被拒绝。查看 JS 控制台，我看到您发布的脚本出现以下错误：

```
XMLHttpRequest cannot load http://www.script-tutorials.com/menus.php?give=menu. Origin http://localhost:8000 is not allowed by Access-Control-Allow-Origin. 
```

不幸的是，如果您无法控制`www.script-tutorials.com`，则没有简单的方法可以解决这个问题。

# paypal - 为了获得计费协议 ID，我们是否需要为参考交易启用商家？

> ID：15606256
> 
> 赞同：0
> 
> 时间：2013-03-25T01:20:35.597
> 
> 标签：paypal

我正在尝试使用“SetExpressCheckout”和“CreateBillingAgreement”获取 BillingAgreemntId，但得到的响应为

```
L_SHORTMESSAGE0=Merchant not enabled for reference transactions&
L_LONGMESSAGE0=Merchant not enabled for reference transactions& 
```

如何让账户启用参考交易以获取 BillingAgreementId？

很抱歉，如果在这里问这个无效。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T05:35:39.393

您需要致电 PayPal 以请求在您的帐户上启用计费协议。

# c# - 生产中的 Sitecore 自定义 404 处理程序

> ID：15606257
> 
> 赞同：3
> 
> 时间：2013-03-25T01:20:57.300
> 
> 标签：c#, sitecore

我从 Stackoverflow-> 一个重新处理 Sitecore 中的自定义 404 的博客中获取了以下代码（它实际上将 302 重定向到状态为 200 的 404 页面，谷歌将其作为软 404 获取）。

虽然这在我们的本地测试服务器上工作得很好，但当我们将它投入生产时，网站就会出现问题，并且需要 AGES 时间，例如 8-9 分钟来加载和填充。

```
public class ExecuteRequest : Sitecore.Pipelines.HttpRequest.ExecuteRequest
{
    protected override void RedirectOnItemNotFound(string url)
    {
        var context = System.Web.HttpContext.Current;

        try
        {
            // Request the NotFound page
            var domain = context.Request.Url.GetComponents(
                UriComponents.Scheme | UriComponents.Host, 
                UriFormat.Unescaped);

            var content = WebUtil.ExecuteWebPage(
                string.Concat(domain, url));

            // The line below is required for IIS 7.5 hosted 
            // sites or else IIS is gonna display default 404 page
            context.Response.TrySkipIisCustomErrors = true;
            context.Response.StatusCode = 404;
            context.Response.Write(content);
        }
        catch (Exception ex)
        {
            Log.Error(string.Format("Falling back to default redirection behavior. Reason for error {0}", ex), ex);

            // Fall back to default behavior on exceptions
            base.RedirectOnItemNotFound(url);
        }

        context.Response.End();
    }
} 
```

PS：然后我在 web.config 中用我的自定义替换了 ExecuteRequest。

如果您经历过类似的事情或知道任何问题，请务必说明一下。

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T08:50:08.123

在 Sitecore 中有一个设置，您可以通过它摆脱 302 重定向：

```
<setting name="RequestErrors.UseServerSideRedirect" value="true" /> 
```

使用此设置，url 保持不变，状态码为 404。如果您想要一些额外的逻辑（例如将 Sitecore 项目显示为错误页面），[Sitecore Market Place](http://marketplace.sitecore.net/en/Modules/Sitecore_Error_Manager.aspx)上有一个名为 Error Manager 的共享源模块。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-14T10:28:29.100

您可以通过创建新的解析器来解决它。当您想以正确的语言提供用户错误页面时，这是一个很好的解决方案。但在 IIS 7.0 和 7.5 中存在一些差异。

将处理器添加到您的站点核心配置：

```
<processor type="Sitecore.Pipelines.HttpRequest.ItemResolver, Sitecore.Kernel"/>
<processor type="Project.Error404Resolver, Project" /> 
```

处理器解决它：

**对于 IIS 7.0：**

```
public class Error404Resolver : Sitecore.Pipelines.HttpRequest.HttpRequestProcessor
{
    public override void Process(Sitecore.Pipelines.HttpRequest.HttpRequestArgs args)
    {
        if(Sitecore.Context.Item == null && !args.Context.Request.Url.AbsolutePath.StartsWith("/sitecore")
        {
            args.Context.Response.Clear();

            SiteContext site = Sitecore.Context.Site;
            if(site != null)
            {
                Item item404Page = Sitecore.Context.Database.GetItem(site.RootPath + "website/error/404");
                if(item404Page != null)
                {
                    Sitecore.Context.Item = item404Page;
                    args.Context.Response.StatusCode = (int) System.Net.HttpStatusCode.NotFound;
                }
            }
        }
    }
} 
```

**对于 IIS 7.5：**

```
public class Error404Resolver : Sitecore.Pipelines.HttpRequest.HttpRequestProcessor
{
    public override void Process(Sitecore.Pipelines.HttpRequest.HttpRequestArgs args)
    {
        if(Sitecore.Context.Item == null && !args.Context.Request.Url.AbsolutePath.StartsWith("/sitecore")
        {
            args.Context.Response.Clear();

            SiteContext site = Sitecore.Context.Site;
            if(site != null)
            {
                Item item404Page = Sitecore.Context.Database.GetItem(site.RootPath + "website/error/404");
                if(item404Page != null)
                {
                    WebClient webClient = new WebClient();
                    webClient.Encoding = args.Context.Request.ContentEncoding;
                    webClient.Headers.Add("User-Agent", args.Context.Request.UserAgent);
                    string page = webClient.DownloadString(LinkManager.GetItemUrl(item404Page));

                    args.Context.Response.StatusCode = (int) System.Net.HttpStatusCode.NotFound;
                    args.Context.Response.Write(page);
                    args.Context.Response.TrySkipIisCustomErrors = true;
                    args.Context.Response.End();
                }
            }
        }
    }
} 
```

这样，您将在当前页面中呈现错误页面而无需重定向并返回到浏览器代码 404。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T11:29:14.317

检查服务器是否能够访问您网站的主机名。

服务器通常无法访问 DNS，因此无法解析主机名。为了让您的 404 处理程序正常工作，应用程序需要能够访问其自己的主机名来请求 404 页面。

为确保这有效，请编辑服务器的[主机](http://en.wikipedia.org/wiki/Hosts_%28file%29)文件并在其中添加一个主机名条目，将其指向 127.0.0.1

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-03T10:40:37.453

我目前工作的一位客户遇到了同样的问题（看起来代码已粘贴），实际上原因很明显：如果您使用未在 Sitecore 站点配置中注册的 url 执行此调用（但可通过 IIS 访问） )，您还将运行此代码。不幸的是，WebUtil.ExecuteWebPage 调用也是使用错误的 url 执行的，因此您最终会陷入循环。

实际上，您应该在日志中看到很多这样的消息：*回退到默认重定向行为。错误 {0} 的原因*，可能与超时有关。

如果你真的想使用你的自定义处理程序，你应该在调用 WebUtil.ExecuteWebPage 之前检查你是否在正确的站点上下文中。

# php - PHP在会话变量中显示一行Mysql结果的每一列-刷新时的下一行

> ID：15606262
> 
> 赞同：1
> 
> 时间：2013-03-25T01:21:28.297
> 
> 标签：php, mysql, session

好的，

在这里发疯 - 我想一次显示一个数组的每一行（来自 Mysql 查询的结果）。我将它们放在while循环中，所有行都立即显示。然后我被建议放弃while循环并使用会话。

我花了几个小时试图让它工作 - 使用这个网站上的评论和 PHP 教程，但我很困惑，需要帮助。

设想：

例如。Mysql查询：从MyTable中选择col1、col2、col3、col4。（MyTable 大约有 10 行）

> 展示
> 
> col1（第 1 行）
> 
> col2 (row1)
> 
> col3 (row1)
> 
> col4 (row1)
> 
> 刷新浏览器（或首选 - 单击提交按钮）
> 
> 展示
> 
> col1 (row2)
> 
> col2 (row2)
> 
> col3 (row2)
> 
> col4 (row2)

刷新/提交 .... 等等，直到显示所有行。

我相信我必须使用`$_SESSION`变量-我尝试过-在每次刷新中-像这样设置变量

```
$_SESSION['column1']= $rownum;

$_SESSION['column2']= $rownum;

$_SESSION['column3']= $rownum;

$_SESSION['column4']= $rownum; 
```

但我没有正确显示列。

请帮助我解决这个问题 - 如果可能的话，使用代码示例 - 包括会话开始和刷新或它可能需要的任何内容。

提前谢谢了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T01:24:44.317

`session_start();`在使用会话之前添加

```
<?php

session_start();

$_SESSION['pop'] = 12;
echo $_SESSION['pop'];

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T01:41:35.977

有几种方法可以做到这一点。

首先是 mysql 偏移量（没有得到所有行但需要部分（你可能有 10000 行 - 一次都会有问题））。

如果您有很多记录，或者您想为将来做准备，可以使用第一个示例，因为它可以处理大型记录组。

如果您有一小部分记录，或者您对数据库预脚本执行进行某种缓存，则可以使用第二个示例。

示例 #1：

mysql -

```
SELECT col1, col2, col3, col4 FROM MyTable LIMIT 4 OFFSET 0 
```

php -

```
session_start();

$position = isset($_SESSION['display_position']) ? $_SESSION['display_position'] : 0;
$limit    = 4;

if(empty($position))
    $_SESSION['display_position'] = 0;

$sql    = 'SELECT col1, col2, col3, col4 FROM MyTable LIMIT '.$limit.' OFFSET '.$position;
$result = mysql_query($sql);

// We don't want to fetch non existen resource
if($result)
{
    while($rows = mysql_fetch_array($result))
    {
        echo $rows;
    }   
}
else
{
    echo 'No more records';
    exit;
}

// Update session for next run
$_SESSION['display_position'] = $position + $limit; 
```

其他将是例如数组循环和在 $_SESSION 中存储位置。

示例 #2：

mysql -

```
SELECT col1, col2, col3, col4 FROM MyTable 
```

php -

```
session_start();

$records = array('row1', 'row2', 'row3', 'row4', 'row5', 'row6', 'row7', 'row8', 'row9', 'row10');

$position = isset($_SESSION['display_position']) ? $_SESSION['display_position'] : 0;
$limit    = 4;

if(empty($position))
    $_SESSION['display_position'] = 0;

if(count($records) < $position)
{
    echo 'No more records';
    exit;
}

for($i = $position; $i < $position + $limit; $i++)
{
    // Display rows
    if(isset($records[$i]))
        echo $records[$i];
}

// Update session for next run
$_SESSION['display_position'] = $position + $limit; 
```

注意：调整`$limit`变量以满足您的需要。

您的具体用例（**更新**）：

```
session_start();

$records = array(
    array(
        'col1' => 'col1valuerow1',
        'col2' => 'col2valuerow1',
        'col3' => 'col3valuerow1',
        'col4' => 'col4valuerow1'
    ),
    array(
        'col1' => 'col1valuerow2',
        'col2' => 'col2valuerow2',
        'col3' => 'col3valuerow2',
        'col4' => 'col4valuerow2'
    ), 
    array(
        'col1' => 'col1valuerow3',
        'col2' => 'col2valuerow3',
        'col3' => 'col3valuerow3',
        'col4' => 'col4valuerow3'
    ), 
    array(
        'col1' => 'col1valuerow4',
        'col2' => 'col2valuerow4',
        'col3' => 'col3valuerow4',
        'col4' => 'col4valuerow4'
    ), 
    array(
        'col1' => 'col1valuerow5',
        'col2' => 'col2valuerow5',
        'col3' => 'col3valuerow5',
        'col4' => 'col4valuerow5'
    ), 
    array(
        'col1' => 'col1valuerow6',
        'col2' => 'col2valuerow6',
        'col3' => 'col3valuerow6',
        'col4' => 'col4valuerow6'
    ), 
    array(
        'col1' => 'col1valuerow7',
        'col2' => 'col2valuerow7',
        'col3' => 'col3valuerow7',
        'col4' => 'col4valuerow7'
    ), 
    array(
        'col1' => 'col1valuerow8',
        'col2' => 'col2valuerow8',
        'col3' => 'col3valuerow8',
        'col4' => 'col4valuerow8'
    ), 
    array(
        'col1' => 'col1valuerow9',
        'col2' => 'col2valuerow9',
        'col3' => 'col3valuerow9',
        'col4' => 'col4valuerow9'
    ),
    array(
        'col1' => 'col1valuerow10',
        'col2' => 'col2valuerow10',
        'col3' => 'col3valuerow10',
        'col4' => 'col4valuerow10'
    )
);

$position = isset($_SESSION['display_position']) ? $_SESSION['display_position'] : 0;
$limit    = 1;

if(empty($position))
    $_SESSION['display_position'] = 0;

if(count($records) < $position)
{
    echo 'No more records';
    exit;
}

for($i = $position; $i < $position + $limit; $i++)
{
    // Display rows
    if(isset($records[$i])){
        echo $records[$i]['col1'] . '<br/>';
        echo $records[$i]['col2'] . '<br/>';
        echo $records[$i]['col3'] . '<br/>';
        echo $records[$i]['col4'] . '<br/>';
    }
}

// Update session for next run
$_SESSION['display_position'] = $position + $limit; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T01:47:18.960

如果您还没有主键列，请向表中添加主键列。然后，您可以使用以下内容：

```
<?php

session_start();

if(isset($_SESSION["id"])){
    $_SESSION["id"] = $_SESSION["id"] + 1;
}
else{
    $_SESSION["id"] = 1;
}

$id = $_SESSION["id"];

//Your mysql connection 

$results = mysql_query("SELECT * 
                        FROM urtable 
                        WHERE id = $id");

while($row = mysql_fetch_array($results)){
    echo $row["urcol1"];
    echo "<br>";
    echo $row["urcol2"];
    echo "<br><br>";
}

?> 
```

# css - 粘性页脚在 Firefox 中不起作用

> ID：15606267
> 
> 赞同：1
> 
> 时间：2013-03-25T01:22:27.930
> 
> 标签：css, firefox, sticky-footer

我们有一个粘性页脚，在任何基于 WebKit 的东西中都可以很好地工作，但在 Firefox（或新版本的 IE）中似乎不起作用。

在高度约 200 像素的页脚下方生成了额外的空间，该空间继承了主体的背景颜色。

额外的空间似乎不是我们能找到的任何 div 的一部分，包括 html、body、content、wrapper 等。它似乎也不是由任何元素上的任何类型的填充或边距引起的。

我们在[Ryan Fait 的 CSS Sticky Footer](http://ryanfait.com/sticky-footer/)方法上构建了它，该方法在包装 div 内部使用了一个 push div，并带有一个单独的 footer div。

您可以在[redesign.treepuncher.com/freetrial/上查看](http://redesign.treepuncher.com/freetrial/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T01:39:50.260

页面底部的 iframe 和版权正在创造不必要的空间。如果不影响您网站的功能，您可以停止显示 iframe。试试这个代码：

```
.copy {
    color: #FFFFFF;
    float: right;
    font-weight: 100 !important;
    margin: 95px 15px 0 15px; //Fixes margin at the bottom of this div
}

iframe {
    display: none; //Stops iframe from being displayed
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T01:27:33.617

以下 css 应使其具有粘性并删除底部不必要的空间

```
.footer {
    background-color: #006837;
    bottom: 0;
    color: #FFFFFF;
    font-family: "roboto",sans-serif;
    font-size: 12px;
    font-weight: 100;
    height: 120px;
    position: fixed;
    width: 100%;
}
.wrapper {
    height: auto !important;
    margin: 0 auto;
    min-height: 100%;
} 
```

# c++ - 单击 QPushButton 时将数据从 QLineEdit 转换为 QString。

> ID：15606269
> 
> 赞同：0
> 
> 时间：2013-03-25T01:22:29.660
> 
> 标签：c++, qt4

这个网站真是太棒了，我要感谢任何回答我帖子的人。您可能会发现我的帖子是转发的转发，因为它再次与从 QLineEdit 检索数据有关。整整 2 天我一直在尝试解决这个问题，查看 hudge stackoverflow 数据库，但我找不到答案。

基本上我想从 QLineEdit 中检索 IP 地址和从 QLineEdit 中检索端口号，我这样做：

```
myclass::myclass(QWidget *parent = 0)
{
     _mainuilayout = new QGridLayout();
     ipAddress = new QLineEdit();
     portnumber = new QLineEdit();
     QFormLayout *connect2adress = new QFormLayout();
     connect2adress->addRow("Ip Adress : ", ipAddress);
     connect2adress->addRow("Port number : ", portnumber);
     _launch = new QPushButton("Launch server");
     _mainuilayout->addWidget(_launch);
     _mainuilayout->addLayout(connect2adress);

     QObject::connect(_launch, SIGNAL(clicked()), this, SLOT(setipAddress()));
     QObject::connect(_launch, SIGNAL(clicked()), this, SLOT(setportnumber()));

     server->connectTo(thisaddress,thisport);

     QObject::connect(_launch, SIGNAL(clicked()), server, SLOT(launchserver()));
} 
```

在这里，您获得了将 ip 地址存储在 QString 中的代码 thisaddress 是在标头和 thisport 中定义的 QString

```
void myclass::setipAddress()
{
     thisaddress = ipAddress->text();
}

void myclass::setportnumber()
{
    thisport = portnumber->text().toShort();
} 
```

我想要的是当我单击启动按钮时，它将来自 QLineEdit 的数据存储在此地址和此端口中，以便我可以启动服务器，这是 connectTo 的代码

```
void server::connectTo(QString ipAdress,quint16 port)
{
    if(!ipAdress.isEmpty() && port != 0 )
    {
         ipAddress = ipAdress;
         portnumber = port;
    }
} 
```

当我将 QLineEdit 转换为 QString 时，问题真的来了，因为当我直接分配 thisAddress 和 thisportnumber 时，它正在工作

```
 thisAddress = "127.0.0.1"
  thisportnumber = 5855 
```

过度我得到了这个错误：

```
 Unsupported socket Operation 
```

所以各位有什么答案可以帮助我吗？我已经尝试遵循该堆栈中给出的解决方案，在[单击 QPushButton 时将 QLineEdit 的数据存储到 QString 中，](https://stackoverflow.com/questions/13903689/store-qlineedits-data-into-a-qstring-upon-a-qpushbutton-click) 但它仍然无法正常工作，如果我找到让你知道的东西，我仍在努力！感谢您的回复！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T02:28:35.033

自从我使用 Qt 以来已经有很长时间了，但我看到没有人回答你的问题，所以我会加两分钱。

当您将事件连接到多个插槽时，我认为您不会期望特定的调用顺序。您正在按钮上连接`clicked()`事件`_launch`以填充您的 IP 地址和端口号，并调用`launchserver()`. 但是您需要先调用其他两个插槽。

如果您可以将其连接到单个插槽会更好，这将更新适当的成员值*然后*进行连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T19:51:04.357

It looks like I'm either missing something, or there is confusion about what exactly is happening in the connect calls. The connect function only tells Qt what to do when a signal is emitted (usually when the user does something). It does not wait for that event to happen.

```
myclass::myclass(QWidget *parent = 0)
{
     // <snipped construction and layout>

     // Tell Qt what to do when the clicked signal happens:
     QObject::connect(_launch, SIGNAL(clicked()), this, SLOT(setipAddress()));
     QObject::connect(_launch, SIGNAL(clicked()), this, SLOT(setportnumber()));

     // At this point, nothing has been set, because the user hasn't had time to
     // fill in anything -- you've only told the application what to do when they
     // do so.
     server->connectTo(thisaddress,thisport);

     // As pointed out previously, even though you're telling the application what
     // to do, the application says nothing about the order, so you don't know if
     // this will be run before or after the slots to set the ip address and port
     // number.
     // What you do know is that it won't be run before the previous line of code,
     // which does the first connection.
     QObject::connect(_launch, SIGNAL(clicked()), server, SLOT(launchserver()));
} 
```

The following is a more straightforward implementation:

```
myclass::myclass(QWidget *parent = 0)
{
     _mainuilayout = new QGridLayout();
     _ipAddress = new QLineEdit();
     _portnumber = new QLineEdit();
     QFormLayout *connect2adress = new QFormLayout();
     connect2adress->addRow("Ip Adress : ", ipAddress);
     connect2adress->addRow("Port number : ", portnumber);
     _launch = new QPushButton("Launch server");
     _mainuilayout->addWidget(_launch);
     _mainuilayout->addLayout(connect2adress);

     QObject::connect(_launch, SIGNAL(clicked()), server, SLOT(launchserver()));
}

myclass::launchserver()
{
     server->connectTo(_ipAddress->text(),_portnumber->text().toShort());    
} 
```

# xamarin.android - MvvmCross 教程 - 可移植类库程序集引用错误 - MonoDroid

> ID：15606270
> 
> 赞同：2
> 
> 时间：2013-03-25T01:22:33.927
> 
> 标签：xamarin.android, mvvmcross, portable-class-library

我真的很想开始使用 MvvmCross - 它看起来是一个非常有前途的跨平台解决方案框架。无论如何，我在阅读教程时遇到了构建错误，[https://github.com/slodge/MvvmCross/wiki/Tutorial-Part-1](https://github.com/slodge/MvvmCross/wiki/Tutorial-Part-1)。在构建 Android 项目组件时出现错误。这是错误：

> 错误 1 ​​类型“Android.App.Activity”在未引用的程序集中定义。您必须添加对程序集“Mono.Android，Version=0.0.0.0，Culture=neutral，PublicKeyToken=c4c4237547e4b6cd”的引用。C:\Users\Steven\documents\visual studio 2010\Projects\Tutorial\Tutorial.UI.Droid\Views\MainMenuView.cs

我看到发布了一些类似的问题（[MonoTouch/MonoDroid 中的 Portable Class Library strong assembly reference questions](https://stackoverflow.com/questions/13028321/portable-class-library-strong-assembly-reference-problems-in-monotouch-monodroid)），并遵循了建议的解决方案，但没有成功。这是在VS2012中的，所以我在VS2010中尝试过，遇到了同样的问题。有没有人遇到过这个错误？PCL 部分 (Tutorial.Core) 可以自行构建。我检查了 PCL csproj 文件，发现它正在使用 Profile 104，并且我确实已经创建了位于该目录中的 MonoAndroid xml 文件：

C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework.NETPortable\v4.0\Profile\Profile104\SupportedFrameworks\MonoAndroid,Version=v1.6+.xml

Tutorial.UI.Droid 项目中 Mono.Android 的参考似乎很好。dll 的路径是 C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\MonoAndroid\v2.2\Mono.Android.dll 并且 VS 报告 Resolved=True 和 Strong Name=True 用于此参考。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T03:15:58.977

您的问题与 PCL 无关。从 4.2 版开始，Android 程序集的 Mono 是强名称，即 Xamarin 提供的程序集将使用 Xamarin 密钥进行签名。早些时候，程序集要么没有签名，要么只是延迟签名。此更改会影响某些 Xamarin 程序集的强名称。

就像您的情况一样，它要求您添加对以下内容的引用：

```
Mono.Android, Version=0.0.0.0, Culture=neutral, PublicKeyToken=c4c4237547e4b6cd 
```

这是强名称。目前您将使用：

```
Mono.Android, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null 
```

这***不是***强名称。

因此，您需要做的就是使用新的强名称程序集重新构建引用 Mono.Android 的所有程序集（在 MVVMCross 以及您可能拥有的任何其他项目中）。

那应该可以解决您的问题。

# android - 如何通过子视图知道 LinearLayout 的索引？

> ID：15606278
> 
> 赞同：3
> 
> 时间：2013-03-25T01:24:24.580
> 
> 标签：android, android-layout

我的布局是这样的

```
<ParentLinearlayout>
    <ChildLinearlayout>
       <Button>
    </ChildLinearlayout>
    <ChildLinearlayout>
       <Button>
    </ChildLinearlayout>
</ParentLinearlayout1> 
```

ChildLinearlayout的数量被改变，动态添加和删除。

单击按钮时，我想删除作为 Button 父级的 ChildLinearlayout。

但我不知道索引线性布局。索引经常改变，因此不能使用标签。

如何知道 LinearLayout 索引？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-06-02T19:56:42.243

```
int index = linearLayout.indexOfChild(view);
linearLayout.removeViewAt(index); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T01:43:14.730

另一种更强大的方法是在将每个子项添加到父项时为其分配一个标签。

```
View child = // TODO
child.setTag("child" + i);
parent.addView(child); 
```

并使用 findViewByTag() 再次定位它。

```
parent.removeView(parent.findViewByTag("child4")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T01:40:12.297

```
parent.removeView((View)button.getParent()); 
```

不过要小心这一点，因为它非常依赖于您的视图层次结构。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-30T11:05:34.983

```
public void showListofData() {
    if (linearlayout.getChildCount() > 0) {
        linearlayout.removeAllViews();
    }
    for (int i = 0; i < mylist.size(); i++) {
        LayoutInflater inflater = null;
        inflater = (LayoutInflater) context
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        final View mLinearView = inflater.inflate(
                R.layout.row, null);

        TextView cName = (TextView) mLinearView
                .findViewById(R.id.txt_name);
        clinicName.setText(mylist.get(i).name);
        mLinearView.setTag(mylist.get(i));
        linearlayout.addView(mLinearView);

        mLinearView.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
             int pos=(Integer)v.getTag();

            }
        });
    }
} 
```

# javascript - Google World Wide Maze 背后的技术

> ID：15606286
> 
> 赞同：0
> 
> 时间：2013-03-25T01:25:17.537
> 
> 标签：javascript, html, google-chrome

有人知道[Google World Wide Maze](http://chrome.com/maze/)实验背后有哪些技术组合吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:27:47.293

它利用[Web Sockets](http://en.wikipedia.org/wiki/WebSocket)进行同步的客户端-服务器-客户端连接。服务器端使用 node.js 来处理 TCP 连接。

3D 图形由[WebGL](http://en.wikipedia.org/wiki/WebGL)在许多流行的 javascript 库的帮助下呈现，例如 -three.js、Create.js 和 Require.js。

我唯一不确定的是，他们如何将应用程序移植到 Android。但是，我坚信他们会编译已经编写好的 Javascript，而不是用 Java 重写所有内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T01:53:16.007

ChromeExperiments.com 上的[页面](http://www.chromeexperiments.com/detail/world-wide-maze/?f=)表明它正在使用[WebGL](https://stackoverflow.com/tags/webgl/info)。

[这里](http://creativejs.com/2013/03/chrome-world-wide-maze/)的一篇文章表明它也在使用 CreateJS 工具和 RequireJS。

# javascript - 如何在 JavaScript 中使用 Timsort？

> ID：15606290
> 
> 赞同：7
> 
> 时间：2013-03-25T01:26:39.810
> 
> 标签：javascript, timsort

如何以 Javascript 格式使用 Timsort？Java、Python 和 C++ 中有很多文档，在 JS 中也可以使用吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-25T01:28:02.863

## Timsort Javascript

* * *

```
Array.prototype.timsort = function(comp){

    var global_a=this
    var MIN_MERGE = 32;
    var MIN_GALLOP = 7
    var runBase=[];
    var runLen=[];
    var stackSize = 0;
    var compare = comp;

    sort(this,0,this.length,compare);

    /*
         * The next two methods (which are package private and static) constitute the entire API of this class. Each of these methods
         * obeys the contract of the public method with the same signature in java.util.Arrays.
         */

    function sort (a, lo, hi, compare) {

        if (typeof compare != "function") {
            throw new Error("Compare is not a function.");
            return;
        }

        stackSize = 0;
        runBase=[];
        runLen=[];

        rangeCheck(a.length, lo, hi);
        var nRemaining = hi - lo;
        if (nRemaining < 2) return; // Arrays of size 0 and 1 are always sorted

        // If array is small, do a "mini-TimSort" with no merges
        if (nRemaining < MIN_MERGE) {
            var initRunLen = countRunAndMakeAscending(a, lo, hi, compare);
            binarySort(a, lo, hi, lo + initRunLen, compare);
            return;
        }

        /**
                 * March over the array once, left to right, finding natural runs, extending short natural runs to minRun elements, and
                 * merging runs to maintain stack invariant.
                 */
        var ts = [];
        var minRun = minRunLength(nRemaining);
        do {
            // Identify next run
            var runLenVar = countRunAndMakeAscending(a, lo, hi, compare);

            // If run is short, extend to min(minRun, nRemaining)
            if (runLenVar < minRun) {
                var force = nRemaining <= minRun ? nRemaining : minRun;
                binarySort(a, lo, lo + force, lo + runLenVar, compare);
                runLenVar = force;
            }

            // Push run onto pending-run stack, and maybe merge
            pushRun(lo, runLenVar);
            mergeCollapse();

            // Advance to find next run
            lo += runLenVar;
            nRemaining -= runLenVar;
        } while (nRemaining != 0);

        // Merge all remaining runs to complete sort
        mergeForceCollapse();
    }

    /**
         * Sorts the specified portion of the specified array using a binary insertion sort. This is the best method for sorting small
         * numbers of elements. It requires O(n log n) compares, but O(n^2) data movement (worst case).
         *
         * If the initial part of the specified range is already sorted, this method can take advantage of it: the method assumes that
         * the elements from index {@code lo}, inclusive, to {@code start}, exclusive are already sorted.
         *
         * @param a the array in which a range is to be sorted
         * @param lo the index of the first element in the range to be sorted
         * @param hi the index after the last element in the range to be sorted
         * @param start the index of the first element in the range that is not already known to be sorted (@code lo <= start <= hi}
         * @param c comparator to used for the sort
         */
    function binarySort (a, lo, hi, start, compare) {
        if (start == lo) start++;
        for (; start < hi; start++) {
            var pivot = a[start];

            // Set left (and right) to the index where a[start] (pivot) belongs
            var left = lo;
            var right = start;
            /*
            * Invariants: pivot >= all in [lo, left). pivot < all in [right, start).
            */
            while (left < right) {
                var mid = (left + right) >>> 1;
                if (compare(pivot, a[mid]) < 0)
                    right = mid;
                else
                    left = mid + 1;
            }
            /*
            * The invariants still hold: pivot >= all in [lo, left) and pivot < all in [left, start), so pivot belongs at left. Note
            * that if there are elements equal to pivot, left points to the first slot after them -- that's why this sort is stable.
            * Slide elements over to make room to make room for pivot.
            */
            var n = start - left; // The number of elements to move
            // Switch is just an optimization for arraycopy in default case
            switch (n) {
            case 2:
                a[left + 2] = a[left + 1];
            case 1:
                a[left + 1] = a[left];
                break;
            default:
            arraycopy(a, left, a, left + 1, n);
            }
            a[left] = pivot;
        }
    }

    /**
         * Returns the length of the run beginning at the specified position in the specified array and reverses the run if it is
         * descending (ensuring that the run will always be ascending when the method returns).
         *
         * A run is the longest ascending sequence with:
         *
         * a[lo] <= a[lo + 1] <= a[lo + 2] <= ...
         *
         * or the longest descending sequence with:
         *
         * a[lo] > a[lo + 1] > a[lo + 2] > ...
         *
         * For its intended use in a stable mergesort, the strictness of the definition of "descending" is needed so that the call can
         * safely reverse a descending sequence without violating stability.
         *
         * @param a the array in which a run is to be counted and possibly reversed
         * @param lo index of the first element in the run
         * @param hi index after the last element that may be contained in the run. It is required that @code{lo < hi}.
         * @param c the comparator to used for the sort
         * @return the length of the run beginning at the specified position in the specified array
         */
    function countRunAndMakeAscending (a, lo, hi, compare) {
        var runHi = lo + 1;

        // Find end of run, and reverse range if descending
        if (compare(a[runHi++], a[lo]) < 0) { // Descending
            while (runHi < hi && compare(a[runHi], a[runHi - 1]) < 0){
                runHi++;
            }
            reverseRange(a, lo, runHi);
        } else { // Ascending
            while (runHi < hi && compare(a[runHi], a[runHi - 1]) >= 0){
                runHi++;
            }
        }

        return runHi - lo;
    }

    /**
         * Reverse the specified range of the specified array.
         *
         * @param a the array in which a range is to be reversed
         * @param lo the index of the first element in the range to be reversed
         * @param hi the index after the last element in the range to be reversed
         */
    function /*private static void*/ reverseRange (/*Object[]*/ a, /*int*/ lo, /*int*/ hi) {
        hi--;
        while (lo < hi) {
            var t = a[lo];
            a[lo++] = a[hi];
            a[hi--] = t;
        }
    }

    /**
         * Returns the minimum acceptable run length for an array of the specified length. Natural runs shorter than this will be
         * extended with {@link #binarySort}.
         *
         * Roughly speaking, the computation is:
         *
         * If n < MIN_MERGE, return n (it's too small to bother with fancy stuff). Else if n is an exact power of 2, return
         * MIN_MERGE/2\. Else return an int k, MIN_MERGE/2 <= k <= MIN_MERGE, such that n/k is close to, but strictly less than, an
         * exact power of 2.
         *
         * For the rationale, see listsort.txt.
         *
         * @param n the length of the array to be sorted
         * @return the length of the minimum run to be merged
         */
    function /*private static int*/ minRunLength (/*int*/ n) {
        //var v=0;
        var r = 0; // Becomes 1 if any 1 bits are shifted off
        /*while (n >= MIN_MERGE) { v++;
            r |= (n & 1);
            n >>= 1;
        }*/
        //console.log("minRunLength("+n+") "+v+" vueltas, result="+(n+r));
        //return n + r;
        return n + 1;
    }

    /**
         * Pushes the specified run onto the pending-run stack.
         *
         * @param runBase index of the first element in the run
         * @param runLen the number of elements in the run
         */
    function pushRun (runBaseArg, runLenArg) {
        //console.log("pushRun("+runBaseArg+","+runLenArg+")");
        //this.runBase[stackSize] = runBase;
        //runBase.push(runBaseArg);
        runBase[stackSize] = runBaseArg;

        //this.runLen[stackSize] = runLen;
        //runLen.push(runLenArg);
        runLen[stackSize] = runLenArg;
        stackSize++;
    }

    /**
         * Examines the stack of runs waiting to be merged and merges adjacent runs until the stack invariants are reestablished:
         *
         * 1\. runLen[i - 3] > runLen[i - 2] + runLen[i - 1] 2\. runLen[i - 2] > runLen[i - 1]
         *
         * This method is called each time a new run is pushed onto the stack, so the invariants are guaranteed to hold for i <
         * stackSize upon entry to the method.
         */
    function mergeCollapse () {
        while (stackSize > 1) {
            var n = stackSize - 2;
            if (n > 0 && runLen[n - 1] <= runLen[n] + runLen[n + 1]) {
                if (runLen[n - 1] < runLen[n + 1]) n--;
                mergeAt(n);
            } else if (runLen[n] <= runLen[n + 1]) {
                mergeAt(n);
            } else {
                break; // Invariant is established
            }
        }
    }

    /**
         * Merges all runs on the stack until only one remains. This method is called once, to complete the sort.
         */
    function mergeForceCollapse () {
        while (stackSize > 1) {
            var n = stackSize - 2;
            if (n > 0 && runLen[n - 1] < runLen[n + 1]) n--;
            mergeAt(n);
        }
    }

    /**
         * Merges the two runs at stack indices i and i+1\. Run i must be the penultimate or antepenultimate run on the stack. In other
         * words, i must be equal to stackSize-2 or stackSize-3.
         *
         * @param i stack index of the first of the two runs to merge
         */
    function mergeAt (i) {

        var base1 = runBase[i];
        var len1 = runLen[i];
        var base2 = runBase[i + 1];
        var len2 = runLen[i + 1];

        /*
        * Record the length of the combined runs; if i is the 3rd-last run now, also slide over the last run (which isn't involved
        * in this merge). The current run (i+1) goes away in any case.
        */
        //var stackSize = runLen.length;
        runLen[i] = len1 + len2;
        if (i == stackSize  - 3) {
            runBase[i + 1] = runBase[i + 2];
            runLen[i + 1] = runLen[i + 2];
        }
        stackSize--;

        /*
        * Find where the first element of run2 goes in run1\. Prior elements in run1 can be ignored (because they're already in
        * place).
        */

        var k = gallopRight(global_a[base2], global_a, base1, len1, 0, compare);
        base1 += k;
        len1 -= k;
        if (len1 == 0) return;

        /*
        * Find where the last element of run1 goes in run2\. Subsequent elements in run2 can be ignored (because they're already in
        * place).
        */
        len2 = gallopLeft(global_a[base1 + len1 - 1], global_a, base2, len2, len2 - 1, compare);

        if (len2 == 0) return;

        // Merge remaining runs, using tmp array with min(len1, len2) elements
        if (len1 <= len2)
            mergeLo(base1, len1, base2, len2);
        else
            mergeHi(base1, len1, base2, len2);
    }

    /**
         * Locates the position at which to insert the specified key into the specified sorted range; if the range contains an element
         * equal to key, returns the index of the leftmost equal element.
         *
         * @param key the key whose insertion point to search for
         * @param a the array in which to search
         * @param base the index of the first element in the range
         * @param len the length of the range; must be > 0
         * @param hint the index at which to begin the search, 0 <= hint < n. The closer hint is to the result, the faster this method
         *           will run.
         * @param c the comparator used to order the range, and to search
         * @return the int k, 0 <= k <= n such that a[b + k - 1] < key <= a[b + k], pretending that a[b - 1] is minus infinity and a[b
         *         + n] is infinity. In other words, key belongs at index b + k; or in other words, the first k elements of a should
         *         precede key, and the last n - k should follow it.
         */
    function gallopLeft (key, a, base, len, hint, compare) {
        var lastOfs = 0;
        var ofs = 1;
        if (compare(key, a[base + hint]) > 0) {
            // Gallop right until a[base+hint+lastOfs] < key <= a[base+hint+ofs]
            var maxOfs = len - hint;
            while (ofs < maxOfs && compare(key, a[base + hint + ofs]) > 0) {
                lastOfs = ofs;
                ofs = (ofs << 1) + 1;
                if (ofs <= 0) // int overflow
                    ofs = maxOfs;
            }
            if (ofs > maxOfs) ofs = maxOfs;

            // Make offsets relative to base
            lastOfs += hint;
            ofs += hint;
        } else { // key <= a[base + hint]
            // Gallop left until a[base+hint-ofs] < key <= a[base+hint-lastOfs]
            var maxOfs = hint + 1;
            while (ofs < maxOfs && compare(key, a[base + hint - ofs]) <= 0) {
                lastOfs = ofs;
                ofs = (ofs << 1) + 1;
                if (ofs <= 0) // int overflow
                    ofs = maxOfs;
            }
            if (ofs > maxOfs) ofs = maxOfs;

            // Make offsets relative to base
            var tmp = lastOfs;
            lastOfs = hint - ofs;
            ofs = hint - tmp;
        }

        /*
        * Now a[base+lastOfs] < key <= a[base+ofs], so key belongs somewhere to the right of lastOfs but no farther right than ofs.
        * Do a binary search, with invariant a[base + lastOfs - 1] < key <= a[base + ofs].
        */
        lastOfs++;
        while (lastOfs < ofs) {
            var m = lastOfs + ((ofs - lastOfs) >>> 1);

            if (compare(key, a[base + m]) > 0)
                lastOfs = m + 1; // a[base + m] < key
            else
                ofs = m; // key <= a[base + m]
        }
        return ofs;
    }

    /**
         * Like gallopLeft, except that if the range contains an element equal to key, gallopRight returns the index after the
         * rightmost equal element.
         *
         * @param key the key whose insertion point to search for
         * @param a the array [] in which to search
         * @param base the index of the first element in the range
         * @param len the length of the range; must be > 0
         * @param hint the index at which to begin the search, 0 <= hint < n. The closer hint is to the result, the faster this method
         *           will run.
         * @param c the comparator used to order the range, and to search
         * @return the int k, 0 <= k <= n such that a[b + k - 1] <= key < a[b + k]
         */
    function gallopRight (key, a, base, len, hint,  compare) {

        var ofs = 1;
        var lastOfs = 0;
        if (compare(key, a[base + hint]) < 0) {
            // Gallop left until a[b+hint - ofs] <= key < a[b+hint - lastOfs]
            var maxOfs = hint + 1;
            while (ofs < maxOfs && compare(key, a[base + hint - ofs]) < 0) {
                lastOfs = ofs;
                ofs = (ofs << 1) + 1;
                if (ofs <= 0) // int overflow
                    ofs = maxOfs;
            }
            if (ofs > maxOfs) ofs = maxOfs;

            // Make offsets relative to b
            var tmp = lastOfs;
            lastOfs = hint - ofs;
            ofs = hint - tmp;
        } else { // a[b + hint] <= key
            // Gallop right until a[b+hint + lastOfs] <= key < a[b+hint + ofs]
            var maxOfs = len - hint;
            while (ofs < maxOfs && compare(key, a[base + hint + ofs]) >= 0) {
                lastOfs = ofs;
                ofs = (ofs << 1) + 1;
                if (ofs <= 0) // int overflow
                    ofs = maxOfs;
            }
            if (ofs > maxOfs) ofs = maxOfs;

            // Make offsets relative to b
            lastOfs += hint;
            ofs += hint;
        }

        /*
        * Now a[b + lastOfs] <= key < a[b + ofs], so key belongs somewhere to the right of lastOfs but no farther right than ofs.
        * Do a binary search, with invariant a[b + lastOfs - 1] <= key < a[b + ofs].
        */
        lastOfs++;
        while (lastOfs < ofs) {
            var m = lastOfs + ((ofs - lastOfs) >>> 1);

            if (compare(key, a[base + m]) < 0)
                ofs = m; // key < a[b + m]
            else
                lastOfs = m + 1; // a[b + m] <= key
        }
        return ofs;
    }

    /**
    * Merges two adjacent runs in place, in a stable fashion. The first element of the first run must be greater than the first
    * element of the second run (a[base1] > a[base2]), and the last element of the first run (a[base1 + len1-1]) must be greater
    * than all elements of the second run.
    *
    * For performance, this method should be called only when len1 <= len2; its twin, mergeHi should be called if len1 >= len2.
    * (Either method may be called if len1 == len2.)
    *
    * @param base1 index of first element in first run to be merged
    * @param len1 length of first run to be merged (must be > 0)
    * @param base2 index of first element in second run to be merged (must be aBase + aLen)
    * @param len2 length of second run to be merged (must be > 0)
    */
    function mergeLo (base1, len1, base2, len2) {

        // Copy first run into temp array
        var a = global_a;// For performance
        var tmp=a.slice(base1,base1+len1);

        var cursor1 = 0; // Indexes into tmp array
        var cursor2 = base2; // Indexes int a
        var dest = base1; // Indexes int a

        // Move first element of second run and deal with degenerate cases
        a[dest++] = a[cursor2++];
        if (--len2 == 0) {
            arraycopy(tmp, cursor1, a, dest, len1);
            return;
        }
        if (len1 == 1) {
            arraycopy(a, cursor2, a, dest, len2);
            a[dest + len2] = tmp[cursor1]; // Last elt of run 1 to end of merge
            return;
        }

        var c = compare;// Use local variable for performance

        var minGallop = MIN_GALLOP; // "    " "     " "
        outer:
        while (true) {
            var count1 = 0; // Number of times in a row that first run won
            var count2 = 0; // Number of times in a row that second run won

            /*
            * Do the straightforward thing until (if ever) one run starts winning consistently.
            */
            do {
                if (compare(a[cursor2], tmp[cursor1]) < 0) {
                    a[dest++] = a[cursor2++];
                    count2++;
                    count1 = 0;
                    if (--len2 == 0) break outer;
                } else {
                    a[dest++] = tmp[cursor1++];
                    count1++;
                    count2 = 0;
                    if (--len1 == 1) break outer;
                }
            } while ((count1 | count2) < minGallop);

            /*
            * One run is winning so consistently that galloping may be a huge win. So try that, and continue galloping until (if
            * ever) neither run appears to be winning consistently anymore.
            */
            do {
                count1 = gallopRight(a[cursor2], tmp, cursor1, len1, 0, c);
                if (count1 != 0) {
                    arraycopy(tmp, cursor1, a, dest, count1);
                    dest += count1;
                    cursor1 += count1;
                    len1 -= count1;
                    if (len1 <= 1) // len1 == 1 || len1 == 0
                        break outer;
                }
                a[dest++] = a[cursor2++];
                if (--len2 == 0) break outer;

                count2 = gallopLeft(tmp[cursor1], a, cursor2, len2, 0, c);
                if (count2 != 0) {
                    arraycopy(a, cursor2, a, dest, count2);
                    dest += count2;
                    cursor2 += count2;
                    len2 -= count2;
                    if (len2 == 0) break outer;
                }
                a[dest++] = tmp[cursor1++];
                if (--len1 == 1) break outer;
                minGallop--;
            } while (count1 >= MIN_GALLOP | count2 >= MIN_GALLOP);
            if (minGallop < 0) minGallop = 0;
            minGallop += 2; // Penalize for leaving gallop mode
        } // End of "outer" loop
        this.minGallop = minGallop < 1 ? 1 : minGallop; // Write back to field

        if (len1 == 1) {
            arraycopy(a, cursor2, a, dest, len2);
            a[dest + len2] = tmp[cursor1]; // Last elt of run 1 to end of merge
        } else if (len1 == 0) {
            throw new Error("IllegalArgumentException. Comparison method violates its general contract!");
        } else {
            arraycopy(tmp, cursor1, a, dest, len1);
        }
    }

    /**
         * Like mergeLo, except that this method should be called only if len1 >= len2; mergeLo should be called if len1 <= len2.
         * (Either method may be called if len1 == len2.)
         *
         * @param base1 index of first element in first run to be merged
         * @param len1 length of first run to be merged (must be > 0)
         * @param base2 index of first element in second run to be merged (must be aBase + aLen)
         * @param len2 length of second run to be merged (must be > 0)
         */
    function mergeHi ( base1, len1, base2, len2) {

        // Copy second run into temp array
        var a = global_a;// For performance
        var tmp=a.slice(base2, base2+len2);

        var cursor1 = base1 + len1 - 1; // Indexes into a
        var cursor2 = len2 - 1; // Indexes into tmp array
        var dest = base2 + len2 - 1; // Indexes into a

        // Move last element of first run and deal with degenerate cases
        a[dest--] = a[cursor1--];
        if (--len1 == 0) {
            arraycopy(tmp, 0, a, dest - (len2 - 1), len2);
            return;
        }
        if (len2 == 1) {
            dest -= len1;
            cursor1 -= len1;
            arraycopy(a, cursor1 + 1, a, dest + 1, len1);
            a[dest] = tmp[cursor2];
            return;
        }

        var c = compare;// Use local variable for performance

        var minGallop = MIN_GALLOP; // "    " "     " "
        outer:
        while (true) {
            var count1 = 0; // Number of times in a row that first run won
            var count2 = 0; // Number of times in a row that second run won

            /*
            * Do the straightforward thing until (if ever) one run appears to win consistently.
            */
            do {
                if (compare(tmp[cursor2], a[cursor1]) < 0) {
                    a[dest--] = a[cursor1--];
                    count1++;
                    count2 = 0;
                    if (--len1 == 0) break outer;
                    } else {
                        a[dest--] = tmp[cursor2--];
                        count2++;
                        count1 = 0;
                        if (--len2 == 1) break outer;
                    }
            } while ((count1 | count2) < minGallop);

            /*
            * One run is winning so consistently that galloping may be a huge win. So try that, and continue galloping until (if
            * ever) neither run appears to be winning consistently anymore.
            */
            do {
                count1 = len1 - gallopRight(tmp[cursor2], a, base1, len1, len1 - 1, c);
                if (count1 != 0) {
                    dest -= count1;
                    cursor1 -= count1;
                    len1 -= count1;
                    arraycopy(a, cursor1 + 1, a, dest + 1, count1);
                    if (len1 == 0) break outer;
                }
                a[dest--] = tmp[cursor2--];
                if (--len2 == 1) break outer;

                count2 = len2 - gallopLeft(a[cursor1], tmp, 0, len2, len2 - 1, c);
                if (count2 != 0) {
                    dest -= count2;
                    cursor2 -= count2;
                    len2 -= count2;
                    arraycopy(tmp, cursor2 + 1, a, dest + 1, count2);
                    if (len2 <= 1) // len2 == 1 || len2 == 0
                        break outer;
                }
                a[dest--] = a[cursor1--];
                if (--len1 == 0) break outer;
                    minGallop--;
            } while (count1 >= MIN_GALLOP | count2 >= MIN_GALLOP);
            if (minGallop < 0) minGallop = 0;
            minGallop += 2; // Penalize for leaving gallop mode
        } // End of "outer" loop
        this.minGallop = minGallop < 1 ? 1 : minGallop; // Write back to field

        if (len2 == 1) {
            dest -= len1;
            cursor1 -= len1;
            arraycopy(a, cursor1 + 1, a, dest + 1, len1);
            a[dest] = tmp[cursor2]; // Move first elt of run2 to front of merge
        } else if (len2 == 0) {
            throw new Error("IllegalArgumentException. Comparison method violates its general contract!");
        } else {
            arraycopy(tmp, 0, a, dest - (len2 - 1), len2);
        }
    }

    /**
    * Checks that fromIndex and toIndex are in range, and throws an appropriate exception if they aren't.
    *
    * @param arrayLen the length of the array
    * @param fromIndex the index of the first element of the range
    * @param toIndex the index after the last element of the range
    * @throws IllegalArgumentException if fromIndex > toIndex
    * @throws ArrayIndexOutOfBoundsException if fromIndex < 0 or toIndex > arrayLen
    */
    function rangeCheck (arrayLen, fromIndex, toIndex) {
        if (fromIndex > toIndex) throw new Error( "IllegalArgument fromIndex(" + fromIndex + ") > toIndex(" + toIndex + ")");
        if (fromIndex < 0) throw new Error( "ArrayIndexOutOfBounds "+fromIndex);
        if (toIndex > arrayLen) throw new Error( "ArrayIndexOutOfBounds "+toIndex);
    }
}

// java System.arraycopy(Object src, int srcPos, Object dest, int destPos, int length)
function arraycopy(s,spos,d,dpos,len){
    var a=s.slice(spos,spos+len);
    while(len--){
        d[dpos+len]=a[len];
    }
} 
```

* * *

**主动参考**

> [https://github.com/bellbind/stepbystep-timsort](https://github.com/bellbind/stepbystep-timsort)
> [https://github.com/Scipion/interesting-javascript-codes](https://github.com/Scipion/interesting-javascript-codes)

# r - plyr 与嵌套组？

> ID：15606293
> 
> 赞同：2
> 
> 时间：2013-03-25T01:27:32.630
> 
> 标签：r, plyr

是否有一种雄辩的方法可以`ddply()`用来获得不仅定义的最细粒度组的输出，还可以获得这些子组的组的输出？

换句话说，当其中一个分类器是“任何”或“任一”或“无关紧要”时。在两个分组变量的简单情况下，这可以通过单独调用来完成`ddply`；但是，当有三个或更多分类器都可以设置为“任何”时，由于必须`ddply`为“任何”+其他的每个新组合一遍又一遍地运行，这会变得很混乱。

可重现的例子：

```
require(plyr)

## create a data frame with three classification variables
## and two numeric variables:
df1=data.frame(classifier1 = LETTERS[sample(2,200,replace=T)],
classifier2 = letters[sample(3,200,replace=T)],
classifier3 = rep(c("foo","bar"),100),
VAR1 = runif(200,50,250),
VAR2 = rnorm(200,85,20))

## apply an arbitrary function to subsets of df1; that is, all unique
## combinations of the three classifiers.
dlply(df1, .(classifier1,classifier2,classifier3),
      function(df) lm(VAR1 ~ VAR2, data=df))

$A.a.bar

Call:
lm(formula = VAR1 ~ VAR2, data = df)

Coefficients:
(Intercept)         VAR2  
   230.5555      -0.8591  

$A.a.foo

Call:
lm(formula = VAR1 ~ VAR2, data = df)

Coefficients:
(Intercept)         VAR2  
   128.3078       0.3631  

... 
```

现在，如果我想在不包括任何/所有分类器的情况下为更多组获得相同的输出怎么办。例如，如果我想包含 when classifier1="any"，我只会在`dlply`语句中包含 classifier2 和 classifier3，如下所示：

```
dlply(df1, .(classifier2,classifier3), function(df) lm(VAR1 ~ VAR2, data=df)) 
```

如果我想获得分类器 2 和分类器 3 =“任何”时的输出，我将再次从`ddply`调用中删除并且只包括分类器 1：

```
dlply(df1, .(classifier1), function(df) lm(VAR1 ~ VAR2, data=df)) 
```

但是，当我的分类器多于三个时，这会变得笨拙，并且每个分类器都可以取出（即=“任何”）——组合的数量大大增加。是否有一种雄辩/快速的方法来获取我的数据的所有“组组”的输出？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T02:15:29.110

一种方法是创建一个组合列表，然后用于`Map`创建每个`dlply`调用结果的列表

您可以与和`combn`结合使用来创建 1,2, ...,n 变量的所有组合的列表`lapply``do.call('c',...)`

```
xx <- do.call('c',lapply(1:3, function(m) {
           combn(x=names(df1)[1:3],m, simplify = FALSE)})) 
```

然后，您可以在调用中使用它`Map`（它是`mapply(..., SIMPLIFY = FALSE)`

```
results <- Map(f = function(x){dlply(df1,.var=x, .fun = lm, formula = VAR1 ~ VAR2)},xx) 
```

或者你可以将一个函数传递给`combn`-- 它会做同样的事情

```
results <-  do.call('c',lapply(1:3, function(m) {
  combn(x=names(df1)[1:3],m, simplify = FALSE, 
      function(vv) {dlply(df1,.var=vv, .fun = lm, formula = VAR1~VAR2)})
   })) 
```

# bash - Bash：文件描述符

> ID：15606296
> 
> 赞同：15
> 
> 时间：2013-03-25T01:27:49.540
> 
> 标签：bash

我是一个 Bash 初学者，但我正在努力学习这个工具，以便在这些日子里找到一份计算机工作。

我现在正在尝试自学文件描述符。分享一下我的一些实验：

* * *

```
#!/bin/bash

# Some dummy multi-line content
read -d '' colours <<- 'EOF'
        red
        green
        blue
EOF

# File descriptor 3 produces colours
exec 3< <(echo "$colours")

# File descriptor 4 filters colours
exec 4> >(grep --color=never green)

# File descriptor 5 is an unlimited supply of violet
exec 5< <(yes violet)

echo Reading colours from file descriptor 3...
cat <&3
echo ... done.

echo Reading colours from file descriptor 3 again...
cat <&3
echo ... done.

echo Filtering colours through file descriptor 4...
echo "$colours" >&4
echo ... done. # Race condition?

echo Dipping into some violet...
head <&5
echo ... done.

echo Dipping into some more violet...
head <&5
echo ... done. 
```

* * *

当我看到上面的输出时，我想到了一些问题：

1.  fd3在“消耗”后似乎“耗尽”了，是不是第一次使用后也会自动关闭？
2.  fd3 与命名管道有何不同？（我已经看过的东西）
3.  命令*究竟什么*时候`yes`开始执行？在 fd 声明时？之后？
4.  当需要更多紫罗兰色时会`yes`停止（或其他）并重新启动吗？`CTRL-Z`
5.  我怎样才能得到 PID `yes`？
6.  我可以获得“活动”fds 的列表吗？
7.  通过 fd4 过滤的非常有趣的竞争条件，可以避免吗？
8.  只会`yes`在我停止`exec 5>&-`？
9.  我关闭`>&-`或有关系`<&-`吗？

我暂时停在这里。

谢谢！

PS：部分（编号）答案很好..我自己会把不同的点点滴滴放在一起..（尽管一个人的综合回答会令人印象深刻！）

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-25T08:53:06.140

> fd3在“消耗”后似乎“耗尽”了，是不是第一次使用后也会自动关闭？

不，它没有关闭。这是由于工作方式`exec`。在您使用的模式下`exec`（不带参数），它的功能是按照指定给自身的 I/O 重定向的请求排列 shell 自己的文件描述符，**然后保持这种状态，**直到脚本终止或再次更改它们之后。

稍后，`cat`在其标准输入（文件描述符 0）上接收此文件描述符 3 的副本。`cat`的标准输入在退出时被隐式关闭`cat`（或者，虽然不太可能，`cat`在它存在之前将其关闭，但这并不重要）。该文件的原始副本，即 shell 的文件描述符 3，仍然存在。尽管实际文件已达到 EOF，但不会再从中读取任何内容。

> fd3 与命名管道有何不同？（我已经看过的东西）

shell 的`<(some command)`语法（它不是标准的 bourne shell 语法，我相信只能在`zsh`and`bash`中使用，顺便说一句）实际上可能是使用命名管道来实现的。它可能不在 Linux 下，因为有更好的方法（使用`/dev/fd`），但它可能在其他操作系统上。

所以从这个意义上说，这种语法可能是也可能不是设置命名管道的助手。

> 命令 yes 究竟什么时候开始执行？在 fd 声明时？之后？

一旦`<(yes violet)`构造被评估（在评估时发生`exec 5< <(yes violet)`）。

> 是否停止（CTRL-Z 或其他）并在需要更多紫罗兰色时重新启动？

不，它不会停止。但是，当它开始产生比读取管道另一端的任何内容更多的输出时，它会很快阻塞。换句话说，管道缓冲区将变满。

> 我怎样才能得到是的PID？

好问题！`$!`似乎在执行后立即包含它`yes`。然而，似乎有一个中间子shell，你实际上得到了那个子shell的pid。尽量`<(exec yes violet)`避免中间过程。

> 我可以获得“活动”fds 的列表吗？

不是来自壳。但是如果你使用的是像 Linux 这样的操作系统`/proc`，你可以咨询一下`/proc/self/fd`。

> 通过 fd4 过滤的非常有趣的竞争条件，可以避免吗？

`grep`为了避免这种情况，您可能希望在继续执行脚本之前等待该过程完成。如果您获得该进程的进程ID（如上所述），我认为您应该能够`wait`获得它。

> 只有当我执行 5>&- 时才会停止？

是的。然后会发生什么，`yes`它将继续尝试永远产生输出，但是当文件描述符的另一端关闭时，它将得到一个写入错误（`EPIPE`）或`SIGPIPE`默认情况下是致命的信号（）。

> 我用 >&- 还是 <&- 结束有关系吗？

不，为了保持一致性，两种语法都可用。

# opengl - 在不同的 OpenGL 版本中混合

> ID：15606304
> 
> 赞同：0
> 
> 时间：2013-03-25T01:30:03.670
> 
> 标签：opengl, blend

下面是我用来实现混合工作原理的一段代码：

```
glDisable(GL_DEPTH_TEST);
glDisable(GL_BLEND);

glBegin(GL_QUADS);
    glColor4f(1.0f, 0.0f, 0.0f, 0.5f);
    glVertex3i(2, 0, 0);
    glVertex3i(2, 6, 0);
    glVertex3i(6, 6, 0);
    glVertex3i(6, 0, 0);
glEnd();

glEnable(GL_BLEND);

glBlendFunc(GL_ONE_MINUS_DST_ALPHA, GL_DST_ALPHA);

glBegin(GL_QUADS);
    glColor4f(0.0, 1.0, 0.0, 0.5f);
    glVertex3i(3, 2, -1);
    glVertex3i(3, 8, -1);
    glVertex3i(8, 8, -1);
    glVertex3i(8, 2, -1);
glEnd(); 
```

问题是：它在我的笔记本电脑上显示了我想要的东西，这意味着两个四边形的交点是混合的，黑色背景上留下的绿色四边形区域也与 alpha 为 0.0 的背景混合。但是，在另一台 PC 上，只出现红色四边形...

笔记本上的OpenGL是2.0，PC上的OpenGL是4.0以上。我想知道问题是否是OpenGL的版本。

顺便说一句：当我想绘制半透明和不透明的对象时，我知道我应该遵循的顺序；我只是用这个demo来说明如果我们不遵循它会有多大的麻烦......

# java - 在 if-else 子句之外无法识别对象

> ID：15606307
> 
> 赞同：3
> 
> 时间：2013-03-25T01:30:24.910
> 
> 标签：java

在 if-else 分支中，我声明了两个具有相同名称的不同 PrintStream 对象。但是，当我稍后使用 PrintStream 对象时，编译器会说它“找不到符号”。为什么它看不到我创建的对象？该对象与声明它的 if-else 分支一起工作。代码如下：

```
System.out.println("Welcome. Would you like to continue a previous adventure, or begin anew?\n(type: new or old)");
status = scan.nextLine();

if(status.equals("new")) {
    System.out.println("What do you call yourself?");
    name = scan.nextLine();

    System.out.println("And what shall be the title of your saga, after you are gone?");
    game = scan.nextLine();

    System.out.println("Very well. Prepare yourself, for this is the beginning of your end...\n...\n...\nAre you ready?");
    status = scan.nextLine();

    System.out.println("Not that it matters. Let us begin.");
    status = scan.nextLine();

    File file = new File(game + ".txt");
    PrintStream print = new PrintStream(file);
    print.println(name);
    old = false;
} else {
    System.out.println("So you're still alive? What was the title of your tale?");
    game = scan.nextLine();

    File file = new File(game + ".txt");
    Scanner gscan = new Scanner(file);
    String save = "";

    while (gscan.hasNextLine()) {
        save += gscan.nextLine();
        save += "\n";
    }

    System.out.println(save);
    PrintStream print = new PrintStream(file);
    print.println(save);

    old = true;
    name = scan.nextLine();
}

if(old) {

}

print.println("beans"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T01:32:05.180

您遇到范围界定问题。如果要在 if-else 语句之外使用它，则需要在 if-else 语句之外声明它。

Java 程序中有不同级别的作用域。范围通常由一组花括号定义。但是，也有公共、私有和受保护的类型，它们允许使用更多的全局变量，而不仅仅是在它们的大括号内。

这些范围中的每一个都可以有自己的变量，这些变量在其他地方是不可用的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T01:33:29.370

需要在语句外声明变量，*然后*`if`在两个分支中赋值，像这样：

```
PrintStream print;
if (status.equals("new")) {
    ...
    print = new PrintStream(file);
} else {
    ...
    print = new PrintStream(file);
} 
```

更好的是，你可以在`file`里面设置`if`，然后`PrintStream`在条件之后创建：

```
if (status.equals("new")) {
    ...
} else {
    ...
}
File file = new File(game + ".txt");
PrintStream print = new PrintStream(file); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T01:34:06.873

看一下这两段代码：

```
String s;
if ( foo ) {
 s = "one";
} else {
 s = "two";
}

if ( foo ) {
 String s = "one";
} else {
 String s = "two";
} 
```

在第一个中，s 在 if/else 之后可用。在第二种情况下，s 仅在 {}（if/else 块）中可用。每个块碰巧有一个同名的变量，但它不是同一个变量。而且以后不可用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-12T17:09:44.350

为什么要定义`PrintStream print`两次？在这种情况下，您只需在`if`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-25T01:35:23.720

范围内发生的事情留在范围内。

```
if(some condition)
{
  int x = 10;

}

System.out.println(x); 
```

这将不起作用，因为 x 的范围仅限于 if 块。如果您希望它位于 if 块之外，则在 if 块之外声明它。

# sql - 部分键查找

> ID：15606310
> 
> 赞同：2
> 
> 时间：2013-03-25T01:30:47.680
> 
> 标签：sql, sql-server, sqlite, indexing, firebird

假设有一个包含非主键列 (A,B,C,D) 的表，其中 (A,B,C,D) 上有一个索引

涉及 (A,B,C,D) 子集的查询会使用索引吗？如上所述，部分键查找存在哪些特质？

我对它在 SQL Server、Sqlite、Firebird 中的工作方式特别感兴趣。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T01:33:55.137

使用索引初始子集的查询应使用索引。

因此，(A)、(A) 和 (B) 以及 (A) 和 (B) 和 (C) 上的等值连接应该使用索引。

实际上，您也可以添加不等式，因此，索引应该支持以下所有内容：

*   xA = yA
*   xA = yA 和 xB > yB
*   xA = yA 和 xB = yB
*   xA = yA 且 xB = yB 且 xC > yC
*   xA = yA 和 xB = yB 和 xC = yC
*   xA = yA 且 xB = yB 且 xC = yC 且 xD > yD
*   xA = yA 且 xB = yB 且 xC = yC 且 xD = yD

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T01:52:09.287

是的，如果搜索键与索引字段的顺序相同。

否则没有。假设您被指示去图书馆，请查看“了不起的盖茨比”，第 3 章，第三页。这就像使用多字段索引一样。

现在说，你被告知要获得第 3 章，第三页....没有书名。你得看每一本书。

# node.js - 使用 grunt-vows 时 grunt.js 抛出错误

> ID：15606311
> 
> 赞同：0
> 
> 时间：2013-03-25T01:30:48.103
> 
> 标签：node.js, gruntjs, vows

我在以下 gruntfile 中 使用 grunt-vows ( [https://github.com/CMTegner/grunt-vows )：](https://github.com/CMTegner/grunt-vows)

```
module.exports = function(grunt) {  
  // Project configuration.  
  grunt.loadNpmTasks("grunt-vows");  
  grunt.initConfig({  
    vows: {  
      all: {  
        options: {  
          reporter: "spec",  
          verbose: true,  
          silent: false,  
          colors: true,  
          isolate: false,  
          coverage: "json"  
        },  
        src: ["test/*.js"]  
      }  
    }  
  });  
  // Default task.  
  grunt.registerTask('default', 'vows');  
}; 
```

运行时出现以下错误`grunt`：
`TypeError: Object #<Object> has no method 'options'`
`at Object.<anonymous> (/home/dan/playlist/node_modules/grunt-vows/tasks/vows.js:32:33)`
`at Object.<anonymous> (/usr/lib/node_modules/grunt/lib/grunt/task.js:109:15)`
`at Object.thisTask.fn (/usr/lib/node_modules/grunt/lib/grunt/task.js:58:16)`

我确信我在某个地方犯了一个简单的错误，在 gruntfile 中是否有任何不合适的地方？

在此先感谢，
丹

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T10:55:15.630

这是您本地安装的 grunt 和此模块的一些兼容性问题！

如果你安装了 grunt 0.3.x（我认为是你的问题），你可以使用这个插件的旧版本（应该是 grunt-vows@0.3.1 或更早版本）。

可能您能做的最好的事情是将本地安装的 grunt 升级到 0.4.0（请参阅此处的迁移指南：http: [//gruntjs.com/upgrading-from-0.3-to-0.4](http://gruntjs.com/upgrading-from-0.3-to-0.4)），因为您会遇到这个问题如果你想包含新的 grunt-plugins 的话。

当然这会在已经存在的 gruntfiles 中增加一些额外的工作

# ruby-on-rails-3 - 资产未在 Rails 应用程序的生产中加载

> ID：15606312
> 
> 赞同：6
> 
> 时间：2013-03-25T01:31:08.037
> 
> 标签：ruby-on-rails-3, deployment, nginx, capistrano

我正在运行的当前应用程序在其 ubuntu 服务器上的生产环境中运行良好。但是现在我不得不配置一个 Red Hat Enterprise Linux 5.5 服务器来部署应用程序，我遇到了一些问题。首先是一些规格：

*   导轨版本：3.2.11
*   红宝石：1.9.3-p194
*   http 服务器 nginx + 独角兽
*   使用 rbenv 管理 ruby​​ 环境
*   部署方法：capistrano

我的 nginx.conf 和 unicorn 配置文件基于 Ryan Bate 的视频。所以我设法配置了几乎所有东西。我可以部署、连接到数据库等。但是，当我访问我的应用程序页面时，所有资产都无法加载。当我进入我的控制台时，它说他们因为 403 Forbidden 错误而失败。我检查了资产在正确的位置：apps/my_app/shared/assets。但我不断收到这个 403 错误。

到目前为止我已经尝试过：

*   检查父文件夹和实际资产文件的权限。他们都至少对每个人都有读取权限
*   改为`config.assets.compile`真
*   按照此处的说明[使用 nginx & unicorn: 403 disabled error 进行部署，建议删除](https://stackoverflow.com/questions/15459447/rails-deployment-using-nginx-unicorn-403-forbidden-error)**conf.d**中的默认文件并将我的自定义 nginx 配置文件符号链接到**/etc/nginx/conf.d**而不是**.../sites-enabled**

为什么我得到 403 的任何想法或想法？

**编辑 1：添加 /etc/nginx/nginx.conf 文件**

不确定这是否有帮助，但这是 nginx.conf 文件（在 /etc/nginx 下）的样子（不是我的自定义 nginx 文件）：

```
events {
  worker_connections  1024;
}

#----------------------------------------------------------------------
# HTTP Core Module
#
#   http://wiki.nginx.org/NginxHttpCoreModule 
#
#----------------------------------------------------------------------

http {
  include       /etc/nginx/mime.types;
  default_type  application/octet-stream;

  log_format  main  '$remote_addr - $remote_user [$time_local] "$request" '
                    '$status $body_bytes_sent "$http_referer" '
                    '"$http_user_agent" "$http_x_forwarded_for"';

access_log  /var/log/nginx/access.log  main;

sendfile        on;
#tcp_nopush     on;

#keepalive_timeout  0;
keepalive_timeout  65;

#gzip  on;

#
# The default server
#
server {
    listen       80;
    server_name  _;

    #charset koi8-r;

    #access_log  logs/host.access.log  main;

    location / {
        root   /usr/share/nginx/html;
        index  index.html index.htm;
    }

    error_page  404              /404.html;
    location = /404.html {
        root   /usr/share/nginx/html;
    }

    # redirect server error pages to the static page /50x.html
    #
    error_page   500 502 503 504  /50x.html;
    location = /50x.html {
        root   /usr/share/nginx/html;
    }

    # proxy the PHP scripts to Apache listening on 127.0.0.1:80
    #
    #location ~ \.php$ {
    #    proxy_pass   http://127.0.0.1;
    #}

    # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000
    #
    #location ~ \.php$ {
    #    root           html;
    #    fastcgi_pass   127.0.0.1:9000;
    #    fastcgi_index  index.php;
    #    fastcgi_param  SCRIPT_FILENAME  /scripts$fastcgi_script_name;
    #    include        fastcgi_params;
    #}

    # deny access to .htaccess files, if Apache's document root
    # concurs with nginx's one
    #
    #location ~ /\.ht {
    #    deny  all;
    #}
}

# Load config files from the /etc/nginx/conf.d directory
include /etc/nginx/conf.d/*.conf;

} 
```

另外，我注意到**/etc/nginx**下有 nginx.conf 和 nginx.conf.default 文件，有人知道区别吗？也许问题可能在那里？

**编辑 2：从 nginx 日志文件添加条目**

所以我在 nginx 日志文件中找到了这个。所以也许这是一个权限问题，可以用`chmod`?

```
2013/03/24 20:50:53 [error] 10851#0: *5 open() "/home/webapp/apps/my_app/current/public/assets/application-db22bc3811b126e586f5e82e794e7ee4.css" failed (13: Permission denied) 
```

**编辑 3：更新 /etc/nginx/nginx.conf**

```
user  nginx;
worker_processes  2;

# error_log  logs/error.log;
# error_log  logs/error.log  notice;
# error_log  logs/error.log  info;
error_log /var/log/nginx/error.log warn;
pid /var/run/nginx.pid;

events {
  worker_connections  1024;
}

http {
  include       mime.types;
  default_type  application/octet-stream;

  log_format  main  '$remote_addr - $remote_user [$time_local] "$request" '
                  '$status $body_bytes_sent "$http_referer" '
                  '"$http_user_agent" "$http_x_forwarded_for"';

  access_log  /var/log/nginx/access.log;

  sendfile        on;
  #tcp_nopush     on;

  keepalive_timeout  60;

  gzip  on;

  include /etc/nginx/conf.d/*.conf;

  # INSIDE THE /etc/ngin/conf.d/*.conf FILE #

  server {
    listen 80 default deferred;
    # server_name example.com;
    root /home/webapp/apps/my_app/current/public;

    location ^~ /assets/ {
      gzip_static on;
      expires max;
      add_header Cache-Control public;
    }

    try_files $uri/index.html $uri @unicorn;
    location @unicorn {
      proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
      proxy_set_header Host $http_host;
      proxy_redirect off;
      proxy_pass http://unicorn;
    }

    error_page 500 502 503 504 /500.html;
    client_max_body_size 4G;
    keepalive_timeout 10;
  }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T03:12:06.500

所以我设法解决了这个问题。部分建议在这篇文章[http://nginxlibrary.com/403-forbidden-error/](http://nginxlibrary.com/403-forbidden-error/)

对于通向所有资产文件的所有目录，我将目录权限设置为`chmod 775`. **然后对于apps/my_app/shared/assets**中的所有资产（application.js 等），我给了文件这个权限`chmod 775`。

这就是诀窍。在我链接到的文章中，作者提到资产文件需要具有读取和执行权限，而不仅仅是读取。

# java - 如何将自定义方法中的计算调用到主方法

> ID：15606318
> 
> 赞同：0
> 
> 时间：2013-03-25T01:31:38.287
> 
> 标签：java, methods, return

我有一个 main 方法和 4 个其他包含计算的函数类型方法，但是，我如何将每个方法调用到 main 中并继续打印出计算结果。另外，我目前遇到很多语法错误。

我已经尝试在需要时放置括号和大括号，但是，这只会导致更多错误。此外，我尝试在其他地方初始化字符串和整数，但似乎仍然无法正常工作。任何帮助将非常感激！

一些语法错误包括：';' 预计在第 60 行

插入 ';' 在第 60 行完成 localVariableDelcartion

每一行都会重复这些错误

```
import java.io.*;
//create the class

public class CirclemethodsFixedagain

{
    //main method
    public static void main(String[] args) throws IOException
    {

        BufferedReader myInput = new BufferedReader(new InputStreamReader(System.in));

        String numInput;
        String reqInput;
        String amountStr;
        double numInt = 0;
        double num = 0;

        System.out.println("This program will ask for a given user radius, then proceed to calculate the user input");
        System.out.println("The program will use four methods to achieve this, all calling back to the main method");
        System.out.println("Press any key to continue");
        numInput = myInput.readLine();

        // more user questions
        System.out.println("First, what would you like to calculate?");
        System.out.println("Enter '1' for Circumference, '2' for area, '3' for volume, or '4' for surface area");
        System.out.println("*NOTE* Pressing a key outside of this range or a regular character will re-prompt the original message");
        reqInput = myInput.readLine();
        numInt = Double.parseDouble(reqInput);

        // more user questions
        System.out.println("Now enter the radius of the required shape(Half of diameter)");
        System.out.println("*NOTE* Pressing a regular character will re-prompt the original message");
        numInput = myInput.readLine();
        num = Double.parseDouble(numInput);

    }
    //user created method, with each 
    public static int circlemethods(double circumference) throws IOException {

        {

            if (numInt == 1)
            {
                System.out.println("You chose to calculate circumference, given the radius :" + num);
                circumference = (Math.PI) * (2) * (num);
                System.out.print("The circumference of that sphere is :");
                return circumference;

            } 

            public static double circlemethods2 (double area)  throws IOException
            {   
                if (numInt == 2)
                {
                    System.out.println("You chose to calculate area, given the radius :" + num);
                    area = (Math.PI * num * num);
                    System.out.print("The area of the circle is :");

                    return area;   
                }   
            }     
            public static double circlemethods3 (double volume) throws IOException
            {
                if (numInput == 3)
                {
                    System.out.println("You chose to calculate volume, given the radius :" + num);
                    volume = (4 * Math.PI * num * num * num) / 3  ;
                    System.out.print("The volume of that sphere is : cm³");

                    return volume;
                }  
            }  
            public static double circlemethods4 (double surfaceArea) throws IOException  
                if (numInput == 4)
                {
                    System.out.println("You chose to calculate surface area, given the radius :" + num);
                    surfaceArea = 4 * Math.PI * num * num;
                    System.out.print("The Surface area of that sphere is :");

                    return surfaceArea;
                }
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-15T11:49:00.683

以下是将解决问题的输入：

1.  您不能在方法中声明方法，这不是 JAVA 语法。只需正确检查支撑。使用任何 IDE 来做同样的事情。
2.  将 numInt, num 设为静态（类）变量。正如您在静态方法中使用的那样。
3.  使用专有名称和 camelCasing 命名法来命名任何方法。
    |例如calculateCircleArea()、calculateCircleVolume()等。

希望这能解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T01:42:28.550

您的大括号 - { 和 } 字符 - 不匹配。我已经修复了问题中代码的缩进，以便您可以更好地看到问题从哪里开始 - 在方法中`circlemethods`。此外，`circlemethods4`缺少它的大括号。

在整个程序中保持一致的缩进级别会使这类错误更容易被发现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T01:55:29.203

编译错误是由以下原因引起的：

1.  您不能将方法放在其他方法中，将 circlemethods 2、3、4 移到 circlemethod1 之外。

2.  您的 circlemethods 看不到 numInt 局部变量。它在 main 方法中声明，并且仅在该方法中可见。

我相信你不需要每个循环方法开头的 if 语句。你宁愿需要这样的东西：

```
if (numInt == 1)
{ 
    circlemethod1(radius);
} else if (numInt == 2)  { 
    circlemethod2(radius);
} 
```

等在您的主要方法中。

您还可以更改每个 circlemethod 的参数名称，据我所知，它始终是半径。参数的当前名称是方法名称的良好候选者。

# android - Android - 扩展通知 - 如何开始压缩？

> ID：15606319
> 
> 赞同：0
> 
> 时间：2013-03-25T01:31:45.000
> 
> 标签：android, notifications, android-notifications

如何在压缩状态下启动可扩展通知？我确定它是一个简单的值，但我找不到它。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T01:49:05.530

我认为这是自动发生的，并且由系统控制（取决于已经显示了多少通知等）。

我不确定这一点，但我注意到我的 BigNotifitions 默认情况下是压缩的（除非只显示 1 或 2 个其他通知）。

# java - 键盘按下和 J 按钮

> ID：15606325
> 
> 赞同：1
> 
> 时间：2013-03-25T01:32:11.617
> 
> 标签：java, swing, jbutton, keylistener

我有一个计算器应用程序，但在使用 setMnemonic 时遇到问题。我试图让键盘上的键与计算器上的按钮链接。它一直告诉我 < Identifier> 是预期的。这是我从[http://docs.oracle.com/javase/tutorial/uiswing/components/button.html](http://docs.oracle.com/javase/tutorial/uiswing/components/button.html)函数获取信息的页面。

有什么想法可以让它工作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T02:04:07.717

您的问题与 Swing 或助记符无关，而与尝试在方法或构造函数之外进行方法调用有关。你不能这样做：

```
public class calculator_ui implements ActionListener {
  /**Creates a new instance of the window "Buttons"*/
    JFrame frame = new JFrame("Buttons");

    // .... etc...
    JButton buteq = new JButton("=");
    JButton butclear = new JButton("C");
    butclear.setMnemonic(KeyEvent.VK_B); // .... **** this is misplaced
    JButton back = new JButton("<"); 
```

而是将该行代码移到您的类的构造函数中合法的地方。

顺便说一句，设置助记符将设置按钮将响应的 alt 组合键。如果您想变得更漂亮并让按钮响应非 alt 数字键的按下，那么您将需要使用键绑定。

# iphone - 让另一个类的 UITextField 辞职第一响应者

> ID：15606329
> 
> 赞同：1
> 
> 时间：2013-03-25T01:32:33.537
> 
> 标签：iphone, ios, uitextfield, resignfirstresponder

我有一个应用程序，它有一个`UITableView`使用自定义单元格的应用程序，我为它创建了一个新类`CustomCell`。每次按下某个按钮时都会创建一个新单元格，并且每个单元格都有一个`UITextField`. 我想知道在我点击它后如何让`UITextField`单元格中的第一响应者辞职。请记住，它是在另一个名为`CustomCell`.

`UIViewController`代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc]
                                   initWithTarget:self
                                   action:@selector(dismissKeyboard)];

    [self.view addGestureRecognizer:tap];
}
-(void)dismissKeyboard{

    }
 (UITableViewCell *) tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{

    static NSString *CellIdentifier= @"Cell";

    CustomCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[CustomCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"Cell"];
    }
    if (indexPath.row%2==0){

        n=1;

        cell.inOut.text = [NSString stringWithFormat:@"Entrada %d:", indexPath.row/2 +1];

        cell.entryTime.text = [NSString stringWithFormat:@"%@", [_entryArray objectAtIndex:(indexPath.row+2)]];

        if (indexPath.row==0){
            cell.delta.text=@"";
        }
        else {
            cell.delta.text = [_timeSinceLastEntryArray objectAtIndex:indexPath.row];
        }
    }
    else{
        cell.inOut.text = [NSString stringWithFormat:@"Saída %d:", (indexPath.row+1)/2];
        cell.entryTime.text = [NSString stringWithFormat:@"%@",[_entryArray objectAtIndex:(indexPath.row+2)]];

        cell.delta.text = [_timeSinceLastEntryArray objectAtIndex:indexPath.row];
        if (whichButton==YES){}
        else{
            }
        n=2;

    }
    if( [indexPath row] % 2)
        [cell setBackgroundColor:[UIColor whiteColor]];
    else
        [cell setBackgroundColor:[UIColor lightGrayColor]];

    return cell;
} 
```

`CustomCell.h`代码：

```
@interface CustomCell : UITableViewCell 

@property (strong, nonatomic) IBOutlet UITextField *inOut;

@property (strong, nonatomic) IBOutlet UILabel *entryTime;
@property (strong, nonatomic) IBOutlet UILabel *delta;

- (void) dismissInOutKeyboard;

@end 
```

`CustomCell.m`代码：

```
@implementation CustomCell

- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    if (self) {
        _inOut = [[UITextField alloc]init];

        _entryTime = [[UILabel alloc]init];

        _delta = [[UILabel alloc]init];

        [self.contentView addSubview:_entryTime];

        [self.contentView addSubview:_inOut];

        [self.contentView addSubview:_delta];

    }
    return self;
}

- (void)setSelected:(BOOL)selected animated:(BOOL)animated
{
    [super setSelected:selected animated:animated];

    // Configure the view for the selected state
}

@synthesize  inOut=_inOut, entryTime=_entryTime, delta=_delta;
- (id)initWithFrame:(CGRect)frame reuseIdentifier:(NSString *)reuseIdentifier {

    if (self = [super initWithFrame:frame reuseIdentifier:reuseIdentifier]) {

        // Initialization code

        _inOut = [[UITextField alloc]init];

        _inOut.textAlignment = UITextAlignmentLeft;

        _entryTime = [[UILabel alloc]init];

        _entryTime.textAlignment = UITextAlignmentLeft;

        _delta = [[UILabel alloc]init];

        _delta.textAlignment = UITextAlignmentLeft;

        [self.contentView addSubview:_entryTime];

        [self.contentView addSubview:_inOut];

        [self.contentView addSubview:_delta];

    }

    return self;

}

@end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T04:33:36.037

只需调用`findAndResignFirstResponder`您拥有的最顶层视图，即`UIViewController.view`

宣言：

```
@interface UIView (findAndResignFirstResponder)
- (void)findAndResignFirstResponder;
- (UIView *)findFirstResponder;
@end 
```

定义：

```
@implementation UIView (findAndResignFirstResponder)
- (void)findAndResignFirstResponder {
    [self.findFirstResponder resignFirstResponder];
}

- (UIView *)findFirstResponder {
    for (UIView *subView in self.subviews) {
        if (subView.isFirstResponder)
            return subView;
        UIView* firstResponder = subView.findFirstResponder;
        if(firstResponder)
            return firstResponder;
    }
    return nil;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T02:18:02.150

我使用的一个粗略但有效的实现是创建一个新的 UITextField，将其设置为第一响应者，然后立即将其删除。执行此操作（在视图内）的基本方法是执行以下操作：

```
UITextField *cell = [UITextField new];
[self addSubview:cell];

[cell becomeFirstResponder];
[cell resignFirstResponder];

[cell removeFromSuperview];
cell = nil; 
```

这将创建一个新单元格，将其添加到视图中以便可以选择它，使其将键盘的焦点从当前选定的单元格上移开，隐藏键盘，然后删除新单元格。

编辑：如果您之后要将另一个文本字段设置为第一响应者，则此代码完全没有必要。然后，您只需调用`becomeFirstResponder`新的文本字段，键盘焦点就会自动转移。

# printing - Arduino 打印命令

> ID：15606330
> 
> 赞同：2
> 
> 时间：2013-03-25T01:32:42.677
> 
> 标签：printing, wifi, arduino

我目前正在将我的[Arduino Uno](http://arduino.cc/en/Main/ArduinoBoardUno)与 Wi-Fi[扩展板](http://www.arduino.cc/en/Main/ArduinoShields)连接起来，一切顺利。打印命令（例如`WiFi.localIP()`或`Serial.print()`）在哪里打印？

我搜索并找不到它们。我尝试使用我的网络浏览器访问我的[IP 地址](http://en.wikipedia.org/wiki/IP_address)，但没有任何效果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T05:09:55.343

`Serial.print()`无论 Wi-Fi 屏蔽是否连接，都将打印到串行接口。这对于调试特别有用。这些字符不会通过 Wi-Fi 连接消失。

要将字符打印到连接的 WiFi 客户端（使用 Arduino 作为服务器时），请查看示例*[Wi-Fi Web 服务器](http://arduino.cc/en/Tutorial/WiFiWebServer)*。

请注意 HTTP 响应是如何逐行构建的。如果您尝试通过 Web 浏览器连接到您的 Arduino，您可以按照示例中的格式并将其替换为您希望在浏览器中看到的必要文本或 HTML。

# symfony - Symfony2 / Twig 处理获取 URL 查询字符串值

> ID：15606332
> 
> 赞同：35
> 
> 时间：2013-03-25T01:32:50.983
> 
> 标签：symfony, twig

我正在尝试操作 URL 中的查询字符串值。

我可以从 Request 对象或 Twig 的函数中获取当前 URL 或路由，但这是我正在努力解决的查询字符串。

我不需要 app.request.attributes.get('_route_params') 因为这会获取路由中的查询字符串参数。

我需要获取实际在 URL 中的查询字符串参数。

我希望能够在 Symfony2（在 PHP 控制器中）和 Twig（在 Twig 模板中）中执行下面列出的两件事：

1.  获取 URL 中的所有当前查询字符串值并显示它们

2.  执行 1，但在显示它们之前更改其中一个查询字符串值

我找不到任何知道如何做到这一点的人。

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2013-03-25T03:07:16.563

您可以使用`app.request.query.all`来获取您的查询字符串。

如果您想更改 Twig 中的参数，您可以这样做

```
{% set queryParams = app.request.query.all %}
{% set queryParams = queryParams|merge({queryKey: newQueryValue}) %} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-25T08:01:33.370

## 进入控制器

```
use Symfony\Component\HttpFoundation\Request;

public function fooAction(Request $request)
{
  $params = $request->query->all();
} 
```

请**注意**：`$request->query->all();`将返回一个带有名为查询参数的键的数组

## 进入树枝

只要您从控制器传递（一如既往地阅读此内容），您就可以通过这种方式将参数传递给视图

```
use Symfony\Component\HttpFoundation\Request;

public function fooAction(Request $request)
{
  $params = $request->query->all();
  return $this->render('MyFooBundle:Bar:foobar.html.twig', array('params' => $params));
} 
```

在您的 twig 模板`foobar.html.twig`中，您只需使用*params*变量即可访问所有查询字符串参数。

例如，使用此请求 URL：`http://example.com/?foo=bar&secondfoo=secondbar`

```
{% for paramName, paramValue in params %}
  <div>{{ paramName }}: {{ paramValue }}</div>
{% endfor %}
<div>{{ params.secondfoo }}</div> 
```

树枝输出：

```
<div>foo: bar</div>
<div>secondfoo: secondbar</div>
<span>secondbar</span> 
```

另一种方法是`app.request.query.all`在 twig 中使用，而无需从控制器向 twig 传递任何内容。

## 最后说明

如果您想在将数组从控制器传递给 twig 时修改其中一个参数，只需更改其中一个数组值，就像使用普通值一样（即`$params['id'] = $params['id'] - 1;`：）

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-09-29T15:33:47.367

获取查询字符串“ [https://stackoverflow.com?name=jazz](https://stackoverflow.com?name=jazz) ”

```
{{ app.request.query.get('name') | default('default value if not set'); }} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-08T06:03:16.543

嗨，斯蒂芬，我们已经尝试了您的解决方案来获取该值，但它会变为默认值。 [http://localhost:4000/about/investors/key-dates-and-events-details?year=2017#q1](http://localhost:4000/about/investors/key-dates-and-events-details?year=2017#q1)

我在我的树枝文件上用过这样的

{{ app.request.query.get('year') | default('如果没有设置默认值'); }} 第四季度

请告诉我。

# c# - 时间：2019-04-10 标签：c#reliable MouseMove(hop)

> ID：15606335
> 
> 赞同：7
> 
> 时间：2013-03-25T01:33:20.313
> 
> 标签：c#, mousemove

我正在使用此功能来移动光标。

```
[DllImport("user32.dll")]
static extern bool SetCursorPos(int X, int Y); 
```

当我使用热键触发它时，光标将移动到正确的坐标，下次我移动鼠标时，它会从该位置继续。按预期工作。

但是我需要在 MouseMove 事件期间触发 SetCursorPos。如果用户将鼠标移动到某个区域，我希望它跳到另一个地方并从那里继续。但现在它跳到目的地，然后立即跳回（90% 的时间）。我怎样才能避免这种行为？

编辑：我决定通过在 1 x 1 px 正方形中为 1 个 mousemove 事件剪辑光标来解决它。Cursor.Clip(MousePosition, new Rectangle(1, 1));

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T01:56:40.377

我的猜测是，在您要触发事件的区域中，表单顶部还有另一个控件。如果是这样，则控件正在捕获`MouseMove`事件。

例如，这里我在左上角的位置 0, 0 添加了一个绿色的 200x200 面板。如果鼠标在面板上移动，表单的`MouseMove`事件将停止捕获鼠标光标位置。在我的表单`mouse_move`事件中，我将表单的文本设置为显示鼠标坐标。请注意，当鼠标实际位于 0、0 时，Window Text 中的坐标仍然是 200、200（由于必须单击 SnippingTool.exe 来获取屏幕截图，所以看不到我的光标）。

![在此处输入图像描述](../Images/d7cceabfb60818358716fa9201414c24.png)

`MouseMove`要解决此问题，请使用您在面板`MouseMove`事件（或您正在使用的任何控件）中放置在表单事件中的相同代码。这会在表单的文本中产生正确的坐标。

![在此处输入图像描述](../Images/4df6246097ce250f658191fab13c573d.png)

这是代码（这显然可以重构为一个方法）：

```
public partial class Form1 : Form
{
    [DllImport("user32.dll")]
    static extern bool SetCursorPos(int X, int Y);

    public Form1()
    {
        InitializeComponent();
    }

    private void Form1_MouseMove(object sender, MouseEventArgs e)
    {
        this.Text = string.Format("X: {0}, Y: {1}", e.X, e.Y);

        if (e.X >= 0 && e.X <= 200)
        {
            if (e.Y >= 0 && e.Y <= 200)
            {
                SetCursorPos(500, 500);
            }
        }
    }

    private void panel1_MouseMove(object sender, MouseEventArgs e)
    {
        this.Text = string.Format("X: {0}, Y: {1}", e.X, e.Y);

        if (e.X >= 0 && e.X <= 200)
        {
            if (e.Y >= 0 && e.Y <= 200)
            {
                SetCursorPos(500, 500);
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-06T10:21:13.650

很难用这么少的信息说（也许你的 GUI 截图会有所帮助）。你可以试试：

```
 private void Button_MouseMove_1(object sender, MouseEventArgs e)
    {
        SetCursorPos(0, 0);
        e.Handled = true;
    } 
```

# eclipse - 从 Eclipse 推送到 Github 时出现“需要 411 长度”异常

> ID：15606337
> 
> 赞同：6
> 
> 时间：2013-03-25T01:33:37.433
> 
> 标签：eclipse, github

我正在为一个学校项目在 Eclipse 中开发一个 Android 应用程序，并试图推送到 Github。它工作了一段时间，然后突然开始告诉我“推送期间发生内部异常：http://github.com/[my user name]/[repo name].git: 411 Length Required”

我没有更改 Eclipse 或 Git 中的任何设置，所以我不确定为什么它对一次推送有效，但对下一次推送无效。当 Google 告诉我“需要 411 长度”异常通常是与 HTTP 相关的问题时，我更加困惑。

如果有帮助，我已经在 Eclipse 中仔细检查了几次设置，它运行在 http 协议上，始终禁用安全存储，并且 Dry-Runs 似乎总是工作正常。

任何帮助，将不胜感激。

史蒂夫

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-05-28T14:55:57.983

Eclipse>首选项>团队>Git>配置>添加条目

`http.postBuffer`作为键和值输入`524288000`（如果 500M 就足够了）

为我做了诀窍。

# google-app-engine - 在 GAE 中查看 memcache 项

> ID：15606339
> 
> 赞同：2
> 
> 时间：2013-03-25T01:33:48.063
> 
> 标签：google-app-engine

试图在 GAE 中查看内存缓存中的项目。

[https://code.google.com/p/googleappengine/issues/detail?id=7245](https://code.google.com/p/googleappengine/issues/detail?id=7245) [http://googleappengine.blogspot.com/2012/08/app-engine-171-released.html](http://googleappengine.blogspot.com/2012/08/app-engine-171-released.html)

这些链接显示“内存缓存查看器中的命名空间 - 管理控制台现在支持检索存储在非默认命名空间中的内存缓存值。”

但我仍然无法查看项目尝试不同的组合。

尝试过，ns.key, ns_key, key（其中 ns 是命名空间，key 是程序中设置的键）。我使用带有 GO 运行时的 Development SDK 1.7.6。如图所示，我应该在搜索空间中输入什么，或者最好的方法是什么？

![在此处输入图像描述](../Images/6387e93656ee509ab67e9c82d2050f27.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T06:35:04.630

这目前没有在开发服务器中实现（但在生产管理控制台中作为[Jesse](https://stackoverflow.com/users/3737/jesse-rusak)在评论中的指针可用）。

您应该在[dev_appserver2](https://code.google.com/p/appengine-devappserver2-experiment/)项目中打开[一个新功能请求。](https://code.google.com/p/appengine-devappserver2-experiment/issues/entry)

如果您想自己贡献它，您可以通过修补轻松添加支持：

*   [`memcache_viewer.html`](https://code.google.com/p/appengine-devappserver2-experiment/source/browse/google/appengine/tools/devappserver2/admin/templates/memcache_viewer.html#35)添加一个新`<input>`字段来捕获命名空间。
*   [`memcache_viewer.py`](https://code.google.com/p/appengine-devappserver2-experiment/source/browse/google/appengine/tools/devappserver2/admin/memcache_viewer.py#73)添加`namespace`arg 来`memcache.get`调用

# javascript - 点击时设置整个页面的css？

> ID：15606343
> 
> 赞同：2
> 
> 时间：2013-03-25T01:34:13.490
> 
> 标签：javascript, css, click, set, document

有谁知道我如何在点击时更改整个文档的 CSS 文件？我四处搜索，但只找到了一些关于设置类/ID 的 CSS 的结果，而不是整个文档。我的网站有两个主题，浅色/深色，我想从两个链接加载“light.css”或“dark.css”。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T02:49:06.567

您需要更改控制样式的链接标签的 src。例如，你的 head 标签中可能有这个：

```
<link rel="stylesheet" href="light.css"> 
```

单击某些内容时，您需要将链接标签的 href 属性更改为“dark.css”。你可以这样做：

```
document.getElementById('id-of-element').addEventListener('click',function(){
    document.getElementsByTagName('link')[0].setAttribute('href',isDark?'light.css':'dark.css');
    isDark=isDark?false:true;
} 
```

重要提示：您需要在此代码之前将 isDark 设置为 false 或 true，具体取决于页面在开始时应该是深色还是浅色。您还需要更改`id-of-element`为应单击以切换页面状态的元素的 id。

我认为这比其他答案更好，因为它更简单并且不使用 jquery。

编辑：我之前不小心有 src 属性而不是 href 属性。我现在更新它是正确的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T01:36:05.250

是的，你可以使用主题。但是CSS的改变仅限于`<body>`标签。

```
$("a.theme").click(function(){
    $("body").addClass("dark");
}); 
```

我使用[jQuery](http://jquery.com)库来简化编码。并且切换 CSS 并不是一个好主意，您可以更改类。

### 演示

您可以查看[jsBin](http://jsbin.com/welcome/21192)中的工作演示。

查看此答案以获取更多详细信息：[使用一个 CSS 选择网页外观而不重新加载](https://stackoverflow.com/a/15185652/462627)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T12:51:13.783

有两种方法立即浮现在脑海。

1）在页面头部添加样式标签，保证样式标签有唯一的id。然后，您可以设置该元素的 innerHTML。（有点乱）

2）在页面头部添加一个链接标签，同时确保它具有唯一的ID。您设置 type='text/css' 和 rel='stylesheet' 属性。您将此链接元素的 src 设置为适当的 css 文件。

这是每种类型的示例。只需为 theme3() 和 theme4() 函数提供 css 文件。

**例子：**

```
<!DOCTYPE html>
<html>
<head>
<script>
function byId(e){return document.getElementById(e);}
function newEl(tag){return document.createElement(tag);}
function newTxt(txt){return document.createTextNode(txt);}
function toggleClass(element, newStr)
{
    index=element.className.indexOf(newStr);
    if ( index == -1)
        element.className += ' '+newStr;
    else
    {
        if (index != 0)
            newStr = ' '+newStr;
        element.className = element.className.replace(newStr, '');
    }
}
function forEachNode(nodeList, func)
{
    var i, n = nodeList.length;
    for (i=0; i<n; i++)
    {
        func(nodeList[i], i, nodeList);
    }
}

window.addEventListener('load', mInit, false);

function mInit()
{
    var style = newEl('style');
    style.setAttribute('id', 'dynCss');
    document.head.appendChild(style);

    var style2 = newEl('link');
    style2.setAttribute('type', 'text/css');
    style2.setAttribute('rel', 'stylesheet');
    style2.setAttribute('id', 'dynCss2');
    document.head.appendChild(style2);
}

function theme1()
{
    var style = byId('dynCss');
    style.innerHTML = "h1{color: red;}";

    var style2 = byId('dynCss2');
    style2.setAttribute('href', '');
}

function theme2()
{
    var style = byId('dynCss');
    style.innerHTML = "h1{color: blue;}";

    var style2 = byId('dynCss2');
    style2.setAttribute('href', '');
}

function theme3()
{
    var style = byId('dynCss');
    style.innerHTML = "";

    var style2 = byId('dynCss2');
    style2.setAttribute('href', 'style3.css');
}

function theme4()
{
    var style = byId('dynCss');
    style.innerHTML = "";
    var style2 = byId('dynCss2');
    style2.setAttribute('href', 'style4.css');
}
</script>
<style>
</style>
</head>
<body>
    <h1>This is the heading</h1>
    <input type='button' onclick='theme1();' value='Theme 1'/>
    <input type='button' onclick='theme2();' value='Theme 2'/>

    <input type='button' onclick='theme3();' value='Theme 3'/>
    <input type='button' onclick='theme4();' value='Theme 4'/>
</body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T02:00:12.823

尝试这样的事情：

```
<a href="#" id="light">Light</a>
<a href="#" id="dark">Dark</a>
<script type="text/javascript" charset="utf-8">
    $('a#light, a#dark').click(function(){
        $('style').remove();
        $.ajax({
            url:'http://www.example.com/' + $this.attr('id') + '.css',
            success:function(data){
                $('<style></style>').appendTo('head').html(data);
            }
        })
    })
</script> 
```

当然，您需要先加载 jQuery。

# c - 哔声命令正在破坏我的功能

> ID：15606344
> 
> 赞同：2
> 
> 时间：2013-03-25T01:34:28.270
> 
> 标签：c, while-loop, compare, beep

我整天都在摆弄这段代码，但我又被困住了……提前谢谢

基本上这个程序给了我问题，下面是我认为导致问题的代码片段。基本上，用户可以更改他们的“当前温度”，如果它超过上限或下限的阈值，则会调用“compareLimit”函数......然后此函数会调用各种其他函数（例如哔哔声，并允许一条线传感器记录打印在屏幕上）。但是，以下是我的问题（请记住，我必须使用哔哔声，但如果您有更好的方法，请告知）：

*   哔哔声让人头疼，我的整个“警报”模式都围绕哔哔声的持续时间展开。这意味着每次我想按字母“O”来打印报告时，它都会随着哔哔声的结束而随心所欲地打印。我该如何消除这个？

*   我想让用户即使在警报模式的“while循环”中仍然能够访问最后一个代码块（case语句），以便他们可以通过按 r 或 f 来更改实际退出警报模式温度，并使系统恢复正常。

    ```
    void updateDisplay()
    {
    clrscr();
        HANDLE hConsole; //standard c library call 
    hConsole = GetStdHandle(STD_OUTPUT_HANDLE); //used for output screen buffer to allow for coloured text

    SetConsoleTextAttribute(hConsole, 2); //sets output screen colour for following text
    printf("\nCurrent Temperature for channel 1 is %d\n\n", temperatureSensor1Reading);
    printf("Upper Limit for channel 1 is  %d\n\n", getHighLimit(CH1));
    printf("Lower Limit for channel 1 is  %d\n\n", getLowLimit(CH1));
    setCurrentTemperature(CH1,temperatureSensor1Reading); 
    ```

这个代码块是我从同一个项目中的其他 cpp 源文件中调用我的函数的地方，以开始将当前温度与设置的限制进行比较。

```
comparedLimits1 = compareLimit(CH1);
SetConsoleTextAttribute(hConsole, 14);

if (comparedLimits1 == TRUE) {
    printf("please press O to print out a temperature report for channel %i \n \n", selectChannel + 1);
    printf("please press P to silence the alarm for channel %i \n \n", selectChannel + 1);
}

while(comparedLimits1 == TRUE) {
    activateAlarm(CH1,temperatureSensor1Reading);
    comparedLogs1 = sensorLog();
    if (comparedLogs1 == TRUE) {
        printf("\n Channel %i has registered a temperature of %i \n \n ", selectChannel+1, temperatureSensor1Reading);
    }
} 
```

这是我的功能，它将当前温度与设定的温度限制进行比较，并调用其他功能“哔”或允许用户打印出一行“报告”。

```
temperature_t compareLimit (int channelID)
{
    temperature_t limitIsExceeded = FALSE;
    if ((temperatureChannel[channelID].currentTemperature > temperatureChannel[channelID].highLimit) | (temperatureChannel[channelID].currentTemperature < temperatureChannel[channelID].lowLimit))
    limitIsExceeded = TRUE;

    return limitIsExceeded;
}

void activateAlarm(int channelID, temperature_t temperature)
{   
    int key = 0;

    if ((temperatureChannel[channelID].currentTemperature > temperatureChannel[channelID].highLimit) | (temperatureChannel[channelID].currentTemperature < temperatureChannel[channelID].lowLimit))
        callBeep();

    sensorLog();
if (_kbhit())
        key = _getch();

    if ((key == 'P') | (key == 'p')) {
        silenceBeep();
    }       
}

void callBeep()
{
    Beep(250,2000);
}

void silenceBeep()
{
    Beep(0,2000);
}

temperature_t sensorLog()
{   
    int key = 0;
    temperature_t notedLog = FALSE;
    if (_kbhit())
        key = _getch();

    if ((key == 'O') | (key == 'o')) {
        notedLog = TRUE;
        return notedLog;
    }
} 
```

这是我仍然希望在用户处于“警报”模式时能够操作的一段代码。为了让用户摆脱“警报”模式，他们必须能够降低当前温度，这可以从以下案例语句中完成

```
if( _kbhit()  ) {
    selectedCommand = _getch();

    switch(selectedCommand) {
        case 'R': //if user input is R
        case 'r'://if user input is r
            (*temperatureSensorReadings[selectChannel])++;
            break; //exits loop

        case 'F': //if user input is 'F'
        case 'f': //if user input is 'f'            
            (*temperatureSensorReadings[selectChannel])--;          
            break; //exits loop 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T02:58:28.437

而不是`Beep`用于[`PlaySound`](http://msdn.microsoft.com/en-us/library/dd743680.aspx)播放 .wav 文件，而是使用`SND_ASYNC`标志立即返回并异步播放声音。您甚至可以将其中一种系统声音与预定义值之一一起使用。

# zend-framework - 无法在 Zend View 上设置受保护的成员

> ID：15606345
> 
> 赞同：1
> 
> 时间：2013-03-25T01:34:28.700
> 
> 标签：zend-framework, zend-view

我到处都是方便的方法。我现在已经将这些推送到了几个帮助类中，并且我让帮助类保护了我的层超类型的成员。

在我来到 Zend View 之前，一切都进行得很顺利。我扩展了 Zend View 以使我的图层超类型，但是当我尝试附加受保护的成员时，它会抛出：

> Zend View 例外：不允许设置私有或受保护的类成员。

首先，为什么不允许这样的成员？有任何想法吗？其次，你过去有没有绕过它？那是怎么回事？（似乎框架通过前导下划线的存在来检测受保护的成员。这似乎有点偶然，也很容易绕过）。

注意 - 我并不是说我会规避它。我只是想找出其他人过去做了什么（因为这似乎是一个奇怪的限制）。

这对我来说很重要，因为我使用特征将助手和相关代理方法带入每个超类。我不想只为视图维护一个单独的特征。或者，我不想让助手成为每个超类的公共成员。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T22:13:13.070

数据封装。

不允许使用下划线属性，主要是为了让开发人员不会意外覆盖作为框架一部分的视图属性。

这实质上保护了框架的所有 View 属性，并允许开发人员对您希望设置的任何公共属性进行免费雨淋。

Zend View 的作者可以确定两件事：（1）他们控制（和创作）私有和受保护的类属性，（2）您控制公共属性。这使得逻辑数据封装和可维护的类重载成为可能。

# ios - HTML 视频播放后 UIWebview 应用程序崩溃

> ID：15606348
> 
> 赞同：1
> 
> 时间：2013-03-25T01:34:32.627
> 
> 标签：ios, objective-c, video, uiwebview, brightcove

我在从 UIWebview 播放完 HTML-5 视频后发生崩溃。UIWebview 加载一个包含brightcove 嵌入式视频播放器的页面。视频启动正常，视频播放。但是，如果您在横向观看视频然后按完成，则当被带回 UIWebview 并与之交互（例如开始滚动）时，应用程序崩溃：

```
0    libobjc.A.dylib     objc_msgSend + 15
1    UIKit   -[UIWindow warpPoint:] + 710
2    UIKit   _UIApplicationHandleEvent + 3382
3    GraphicsServices    _PurpleEventCallback + 590
4    GraphicsServices    PurpleEventCallback + 34
5 ...    CoreFoundation  __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 34
11   UIKit   UIApplicationMain + 1120 
```

NSZombies 报告：

```
*** -[MPTransportButton _isChargeEnabled]: message sent to deallocated instance 0x258f75d0 
```

该项目使用 ARC，我**不是**在本地播放视频，它全部由嵌入式播放器中的 UIWebview 处理。所以这个明显的内存管理问题是 UIWebview 托管代码的内部问题。

我怀疑它与方向变化有关，因为它似乎与横向观看视频有关。不幸的是，这是一个要求。

[可以在其支持论坛Brightcove Crash](http://forum.brightcove.com/t5/HTML5-Mobile-Video/Native-app-UIWebView-with-Brightcove-player-crashes-once/td-p/22654)上的相关链接中找到嵌入的 Brightcove 代码

我见过其他问题但没有答案[UIWebView Crash](https://stackoverflow.com/questions/7075134/uiwebview-load-crash-nscfdictionary-ischargeenabled)和[UIWindow warpPaint](https://stackoverflow.com/questions/12479139/ios-app-crash-issue-uiwindow-warppoint)

# java - 无法从使用 XSteam 的应用程序执行 jar 文件

> ID：15606351
> 
> 赞同：1
> 
> 时间：2013-03-25T01:34:57.017
> 
> 标签：java, deployment, xstream, outputstream, jdeveloper

我正在测试使用 XStream 使用持久数据，当我从 JDeveloper 运行它时它工作正常，但是当我部署应用程序时它只是不执行。

框架很简单，一个按钮和一个文本字段，应该在 xml 代码中创建一个包含对象的文件，它在我运行它时有效，但在我部署它时无效，我在 jar 文件中包含库，请帮助我.

这里是按钮事件的代码：

```
private void jButton1_actionPerformed(ActionEvent e) {    
    try {        
        XStream xstream=new XStream(new DomDriver());
        xstream.alias("person", Person.class);
        File file=new File("D:\\out\\personas.xml");
        file.getParentFile().mkdirs();
        OutputStream outputStream= new FileOutputStream(file);      
        ObjectOutputStream out = xstream.createObjectOutputStream(outputStream);            
        out.writeObject(new Person(jTextField1.getText()));
        out.close();
        JOptionPane.showConfirmDialog(this, jTextField1.getText());            
    } catch (FileNotFoundException f) {
    } catch (IOException f) {
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T08:18:37.000

如果 jar 包含其他 jar，则不能直接从 jar 运行应用程序。类加载器不考虑需要的罐子。您从 jdev 运行应用程序，您会看到命令行。您会看到所有需要的 jar 都添加到类路径中。

# apache - PhpMailer 能够从 Windows 但不能从 CentOS 发送邮件

> ID：15606356
> 
> 赞同：1
> 
> 时间：2013-03-25T01:35:30.587
> 
> 标签：apache, centos, phpmailer, php

我的 Windows 上有 Apache w/php 用于测试目的。我的生产 CentOS 6.4 服务器上也有 Apache w/php。

我能够使用 PHPMailer 在我的 Windows 服务器上完美地发送电子邮件。但是，我无法在我的 centos 服务器上发送它。

这是我的代码：

```
 require_once('phpmailer/class.phpmailer.php');
    $mail = new PHPMailer();  
    $mail->IsSMTP(); 
    $mail->SMTPDebug = 1;  
    $mail->SMTPAuth = true;
    $mail->Host = 'mail.example.com';
    $mail->Port = 25; 
    $mail->Username = "mail-daemon@example.com";  
    $mail->Password = "secret";
    $mail->SMTPSecure = 'tls';       
    $mail->SetFrom('mail-daemon@example.com', "$name");
    $mail->Subject = "$subj";
    $mail->Body = $body;
    $mail->AddAddress("Support@example.com");
    if(!$mail->Send()) {
        $error = 'Mail error: '.$mail->ErrorInfo; 
        echo "We're sorry, however, an error has occurred. You may manually e-mail us at support@example.com.";
        return false;
    } else {
        echo "Thanks! Your message was successfully sent.";
        return true;
    }
?> 
```

再一次，它在我的 Windows Apache 上完美运行。但是，在 CentOS 上出现以下错误。

```
SMTP -> ERROR: Failed to connect to server: Connection timed out (110) <br />The following From address failed: mail-daemon@example.com : Called Mail() without being connected 
```

我已经测试了防火墙，我认为这不是问题。我什至完全关闭了它（用于测试），它仍然给我这个错误。

我在我的 php 上安装并启用了 openssl。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T03:18:26.547

我从消息中了解到的是

*   您的客户无法访问邮件服务器或
*   在客户端发送所有命令之前，邮件服务器会在一段时间后关闭连接。

如果我是你，我会按顺序尝试以下操作：

1.  ping mail.example.com 以确保我可以解析域。
2.  Telnet 到 mail.example.com 的第 25 个端口，以确保我的服务器可以连接到邮件服务器。
3.  使用 telnet 或其他邮件客户端测试邮件服务器。

您应该陷入其中一个步骤，它应该有助于解决该问题。

# java - 无法从哈希表中的对象调用方法

> ID：15606357
> 
> 赞同：0
> 
> 时间：2013-03-25T01:35:42.833
> 
> 标签：java

所以我要做的就是创建这个对象，然后将它和其他类似的对象存储在哈希表中，然后稍后使用它的一些方法。但是当我尝试获取对象并使用它的方法时，我得到了一个错误。

我的代码：

```
D_Object obj;
Hashtable player_table;

obj = new D_Object("pikachu",pikachu,PLAYER_X,PLAYER_Y,PIKA_WIDTH,PIKA_HEIGHT,PIKA_OFFSETX,PIKA_OFFSETY,PLAYER_SPEED);

player_table.put(obj.getObjNum(),obj); 
```

....然后我尝试使用对象方法 getObjNum() 它给了我一个错误

```
for(int i=1;i<=obj.getNumObjs();i++){
    if(player_table.get(i).getObjNum() != obj.getObjNum()){ 
```

……

错误如下：

```
appletGameExample.java:319: cannot find symbol
symbol  : method getObjNum()
location: class java.lang.Object 
```

每当我尝试使用此对象中的方法时，它都会给出相同的错误

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T01:38:32.487

用它作为`Hashtable<int, D_Object>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T01:37:45.847

因为您没有指定保存的对象类型，所以默认情况下`Hashtable`它会检索它们（所有内容的类）。An没有您尝试对其调用的方法。您需要在访问它们时执行类型转换，或指定持有的内容，如下所示：`Object``extend``Object``Hashtable`

`Hashtable<String, D_Object> player_table = new Hashtable<String, D_Object>();`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T01:48:32.307

```
((D_Object)player_table.get(i)).getObjNum() 
```

# javascript - 使用 JavaScript 创建 .doc 文件

> ID：15606362
> 
> 赞同：0
> 
> 时间：2013-03-25T01:36:18.387
> 
> 标签：javascript, file-io, doc

是否可以在 JavaScript 中创建 .doc 格式的文件？
目前我有一个 Mozilla 插件，它可以创建 .txt 文件，但很想知道它是否可以扩展到 .doc ..

```
file = Components.classes["@mozilla.org/file/local;1"]
                     .createInstance(Components.interfaces.nsILocalFile);
file.initWithPath(fullPathToFile);

if (file.exists() === false) 
    {file.create(Components.interfaces.nsIFile.NORMAL_FILE_TYPE, 420);}

var outputStream = Components.classes["@mozilla.org/network/file-output-stream;1"]
                    .createInstance(Components.interfaces.nsIFileOutputStream),
converter = Components.classes["@mozilla.org/intl/converter-output-stream;1"]
                    .createInstance(Components.interfaces.nsIConverterOutputStream);

outputStream.init(file, 0x02 | 0x08 | 0x20, 420, 0);
converter.init(outputStream, "UTF-8", 0, 0);
converter.writeString('\n --------------------------------------------------- \n');
converter.close(); 
```

# android - Google C2D_MESSAGE 权限错误

> ID：15606363
> 
> 赞同：1
> 
> 时间：2013-03-25T01:36:25.937
> 
> 标签：android, permissions, android-manifest, android-c2dm

我正处于将 Google C2D 功能添加到我的应用程序的初期阶段。我仔细阅读了文档，但仍然收到 IllegalStateException。首先是我尝试运行应用程序时的堆栈：

```
03-24 21:29:36.425: E/AndroidRuntime(3380): FATAL EXCEPTION: main
03-24 21:29:36.425: E/AndroidRuntime(3380): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.maxap.lj3/com.maxap.lj3.MainActivity}:   java.lang.IllegalStateException: Application does not define permission com.maxap.lj3.permission.C2D_MESSAGE
03-24 21:29:36.425: E/AndroidRuntime(3380):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180) ....... 
```

我确实在我的清单中定义了该权限。这是我的清单的副本：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.maxap.lj3"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="11"
    android:targetSdkVersion="17" />
   <uses-permission  android:name="android.permissions.INTERNET" />

 <uses-permission android:name="com.maxap.lj3.gcm.permission.C2D_MESSAGE" android:protectionLevel="signature"/>
        <uses-permission android:name="com.maxap.lj3.gcm.permission.C2D_MESSAGE" /> 
        <uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" /> 
```

我很感激任何帮助。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T01:40:48.160

尝试改变：

```
<uses-permission android:name="com.maxap.lj3.gcm.permission.C2D_MESSAGE" android:protectionLevel="signature"/> 
```

至

```
<permission android:name="com.maxap.lj3.gcm.permission.C2D_MESSAGE" android:protectionLevel="signature"/> 
```

您试图使用该`com.maxap.lj3.gcm.permission.C2D_MESSAGE`权限，但在您的清单中您没有正确声明它。您需要使用`<permission>`not`<uses-permission>`来声明它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T01:40:46.753

尝试将清单稍微更改为以下内容：

```
<!-- Settings for GCM -->
<permission
    android:name="com.maxap.lj3.permission.C2D_MESSAGE"
    android:protectionLevel="signature" />

<uses-permission android:name="com.maxap.lj3.permission.C2D_MESSAGE" />

<!-- App receives GCM messages. -->
<uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />
<!-- GCM requires a Google account. -->
<uses-permission android:name="android.permission.GET_ACCOUNTS" />
<!-- Keeps the processor from sleeping when a message is received. -->
<uses-permission android:name="android.permission.WAKE_LOCK" /> 
```

# wpf - 当内容属性从加载的用户控件中的调用更改时，内容控件无法更新

> ID：15606369
> 
> 赞同：0
> 
> 时间：2013-03-25T01:37:21.043
> 
> 标签：wpf, mvvm, user-controls, mvvm-light, contentcontrol

我有一个包含单个 ContentControl 的 MainView，ContentControl 在应用程序加载时加载默认用户控件。

```
<ContentControl x:Name="MainContentArea" Content="{Binding ActiveControl}"/> 
```

加载的用户控件，加载一些插件（不相关），并在从组合框中选择一个项目时，它使用 MVVM Light 的 ViewModelLocator 概念触发存在于 Parent(MainViewModel) 中的 ICommand。

```
private void CreateSelectedPlugin(IExtendedUIViewFactory plugin)
    {
        var pluginStartControl = plugin.Create();
        _locator.Main.DefaultCommand.Execute(pluginStartControl);
    } 
```

问题是 ContentControl 没有更新，我可以设置断点并查看命令在 MainViewModel 中执行，并且我发送的变量有效。

```
public ICommand DefaultCommand { get; set; }
    public MainWindowViewModel()
    {
        DefaultCommand = new RelayCommand<object>(LoadSection, o => true);
    }

    private void LoadSection(object plugin)
    {
        ActiveControl = plugin;
        //does not matter if i set it to null here
    } 
```

从 MainView/MainViewModel 调用仅将 ContentControl 设置为 null 的 LoadSection 或 testfunction，它按预期工作。

我从控件中发送的命令对 Contentcontrol 有什么保留，使其不想加载其他内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T04:33:02.427

您需要通知 UI 发生了变化。实现 INotifyPropertyChanged 并将其添加到 ActiveControl 分配中：

```
private void LoadSection(object plugin)
{
    ActiveControl = plugin;
    NotifyPropertyChanged();
} 
```

[这是文档](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx)

**编辑#1**

我认为您应该使用用户控件中的按钮绑定到主窗口中的命令。这比尝试将主窗口视图模型传递给用户控件要好，后者会创建依赖关系并违反 MVVM 模式。在您给我的示例中将此按钮添加到您的 usercontrol1

```
 <Button Content="Set MyContent to null using binding to main window command" Height="40" Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}},Path=DataContext.PublicCommand}"></Button> 
```

它使用相对绑定到主窗口中的命令，在我的应用程序中，我使用一个主窗口来保存所有用户控件/视图。这样我就可以控制显示的内容，并且只在一个我知道总是可用的地方使用命令定义。

希望这可以帮助

# java - 当它们相同时，如何在 ArrayList 中找到多个对象的索引

> ID：15606374
> 
> 赞同：1
> 
> 时间：2013-03-25T01:38:19.527
> 
> 标签：java, arraylist, indexof

在此，我将单词存储在一个数组列表中，并将与其对应的相应电话号码存储在另一个数组列表中。我希望能够输入一个数字并返回另一个列表中对应的所有单词。我有这样的数组列表设置。

```
List<String> listWords = new ArrayList<String>(); // An ArrayList which stores all added words.
List<String> listNum = new ArrayList<String>();// An ArrayList which stores all phone numbers that correspond to all the added words 
```

单词的转换就像在电话键盘上一样（即 2 = a,b,c 3 = d,e,f 等）。

我也像这样简单地添加单词；

```
public void readWords() 
{
    PhoneWords ph = new PhoneWords();
    try
    {
        // Open the file that is the first 
        // command line parameter
        FileInputStream fstream = new FileInputStream("words.txt");

        BufferedReader br = new BufferedReader(new InputStreamReader(fstream));
        String strLine;

        //Read File Line By Line
        while ((strLine = br.readLine()) != null)   
        {
            String phNum = ph.word2Num(strLine);
            listWords.add(position, strLine);
            listNum.add(position, phNum);
            position++; // index position, only used when initally adding the words
        }

    }catch (Exception e)
    {
        //Catch exception if any
        System.err.println("Error: " + e.getMessage());
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T01:41:50.640

在您的情况下，我宁愿使用以下数据结构将电话号码映射到单词列表

`HashMap<String, List<String>> phoneNumbersMap = new HashMap<String, List<String>>();`

HashMap 的参考在这里[http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html)

如果您的列表在未来增长，它也将使检索单词更快！

要向 HashMap 添加数据，您可以执行以下操作：

```
if (map.containsKey(phNum)) {
    List<String> words = map.get(phNum);
    words.add(strLine);
} else {
    List<String> words = new ArrayList<String>();
    words.add(strLine);
    map.put(phNum, words);
} 
```

# java - Java EE WebLogic 和带有 SSO 的 Spring

> ID：15606376
> 
> 赞同：3
> 
> 时间：2013-03-25T01:38:22.047
> 
> 标签：java, spring, javabeans, single-sign-on, waffle

我试图让 SSO 在部署在 WebLogic 11 上的 Spring 应用程序中工作。我为此使用了 Waffle 实现。

我设置：
`entry-point-ref="negotiateSecurityFilterEntryPoint"`
和
`<custom-filter ref="waffleNegotiateSecurityFilter" position="BASIC_AUTH_FILTER" />`

我也加了

```
<beans:bean id="waffleWindowsAuthProvider" class="waffle.windows.auth.impl.WindowsAuthProviderImpl" />

<beans:bean id="negotiateSecurityFilterProvider" class="waffle.servlet.spi.NegotiateSecurityFilterProvider">
    <beans:constructor-arg ref="waffleWindowsAuthProvider" />
</beans:bean>

<beans:bean id="basicSecurityFilterProvider" class="waffle.servlet.spi.BasicSecurityFilterProvider">
    <beans:constructor-arg ref="waffleWindowsAuthProvider" />
</beans:bean>

<beans:bean id="waffleSecurityFilterProviderCollection" class="waffle.servlet.spi.SecurityFilterProviderCollection">
    <beans:constructor-arg>
        <beans:list>
            <beans:ref bean="negotiateSecurityFilterProvider" />
            <beans:ref bean="basicSecurityFilterProvider" />
        </beans:list>
    </beans:constructor-arg>
</beans:bean>

<beans:bean id="negotiateSecurityFilterEntryPoint" class="waffle.spring.NegotiateSecurityFilterEntryPoint">
    <beans:property name="Provider" ref="waffleSecurityFilterProviderCollection" />
</beans:bean>

<beans:bean id="waffleNegotiateSecurityFilter" class="com.myapp.security.CustomNegotiateSecurityFilter">
    <beans:property name="Provider" ref="waffleSecurityFilterProviderCollection" />
</beans:bean> 
```

My`CustomNegotiateSecurityFilter`只是标准 Waffle 类的副本，因此没有影响。

当我使用 IP 地址访问应用程序时，此配置工作正常，但是当使用主机名（带域）时，我无法让 SSO 工作 - 401 Unauthorized response。

也许有人可以告知这种行为的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T14:23:04.910

由于使用 IP 有效，但使用名称无效，这很可能是 SPN 的问题。您将需要使用 setspn 来修复它。从标准故障排除开始：[https ://github.com/dblock/waffle/blob/master/Docs/Troubleshooting.md](https://github.com/dblock/waffle/blob/master/Docs/Troubleshooting.md)

# python - Python Tesseract 分段错误 11

> ID：15606379
> 
> 赞同：4
> 
> 时间：2013-03-25T01:38:45.183
> 
> 标签：python, segmentation-fault, tesseract

我正在使用 tesseract 和 opencv 来读取图像作为不同程序的一部分。我写这篇文章是为了解决我在主程序中遇到的错误。test() 函数将被复制并粘贴到最终程序中。我遇到的问题是 tesseract 似乎以 Segmentation Fault 11 退出了 python。这种情况间歇性地发生。有时这个示例代码完全运行，有时它在 56 次迭代后失败（每次）。我安装的所有东西都在自制软件中（我遵循了这些说明：[https](https://code.google.com/p/python-tesseract/wiki/HowToCompilePythonTesseractForHomebrewMacMountainLion) ://code.google.com/p/python-tesseract/wiki/HowToCompilePythonTesseractForHomebrewMacMountainLion ）在搜索了我的问题的解决方案后，我尝试了以下说明：[http：/ /www.janeriksolem.net/2011/12/installing-opencv-python-interface-on.html](http://www.janeriksolem.net/2011/12/installing-opencv-python-interface-on.html)，我很确定我做的一切都是正确的，但我仍然偶尔会遇到段错误。

```
import time
import tesseract
import cv2
import cv2.cv as cv
import Image
def test():
    image0=cv2.imread("test.jpg")
    offset=20
    height,width,channel = image0.shape
    image1=cv2.copyMakeBorder(image0,offset,offset,offset,offset,cv2.BORDER_CONSTANT,value=(255,255,255)) 

    api = tesseract.TessBaseAPI()
    api.Init(".","eng",tesseract.OEM_DEFAULT)
    api.SetPageSegMode(tesseract.PSM_AUTO)
    height1,width1,channel1=image1.shape
    print image1.shape
    print image1.dtype.itemsize
    width_step = width*image1.dtype.itemsize
    print width_step
    #method 1 
    iplimage = cv.CreateImageHeader((width1,height1), cv.IPL_DEPTH_8U, channel1)
    cv.SetData(iplimage, image1.tostring(),image1.dtype.itemsize * channel1 * (width1))
    tesseract.SetCvImage(iplimage,api)

    text=api.GetUTF8Text()
    conf=api.MeanTextConf()
    image=None
    print "..............."
    return (text, conf)

for x in xrange(200):
    print "x: %d" %x
    test()
    print
time.sleep(1)
print "Done" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-22T00:22:59.990

我知道这是一个很晚的答案，但我在使用 OS X Lion、python2.7、OpenCV 2.4 和 Tesseract 3.0 时遇到了同样的问题

使用eclipse+pydev调试的时候发现了三个问题...

首先是提供给 tesseract 的图像总是必须是二值图像。

第二个问题`cv2.imread()`有时不起作用，它只是返回一个空的 ndarray。我真的不知道为什么会发生这种情况，以及它是否与在 eclipse+pydev 中运行 python 有关。

因此，当我尝试使用空的 ndarray`shape`并且`dtype`我有空字符时，这会在使用`cv.SetData()`. 当`api.GetUTF8Text()`试图处理这个空的iplimage时，一切都以一种奇怪的方式崩溃了，我得到了“Segmentation Error 11”

第三，事实证明 cv2 和 cv 处理数组的方式非常不同，并且它们的轴互换了。所以如果你做了类似的事情......

```
image = cv2.imread('something.jpg',0) # flag = 0 is for converting to grayscale
image = cv2.threshold(image,128,255,cv2.THRESH_BINARY)
height,width,channel = image.shape 
```

那么你需要做...

```
iplimage = cv.CreateImageHeader((width,height), cv.IPL_DEPTH_8U, 1)
cv.SetData(iplimage, image.tostring(),image.dtype.itemsize * (width)) #the number of channels is 1 
```

我看到你已经解决了第三个问题。

奇怪的是，如果我`img0 = cv.fromarray(scr)`在该行之后有一个代码，`scr = cv2.imread('textSample.jpg',0)`那么一切正常。

使用图像“textSample.jpg”（在这篇文章的底部）尝试以下代码并取消注释行（除了第一行不是注释），以便您可以看到您的代码正在处理的图像. `scr`，`img0`并且`img1`最终应该是相同的：

```
#!/usr/bin/env python

import cv2
import cv2.cv as cv
import tesseract

scr = cv2.imread('textSample.jpg',0)
#img0 = cv.fromarray(scr)
#cv.SaveImage('img0.jpg',img0)

api = tesseract.TessBaseAPI()
api.Init(".","eng",tesseract.OEM_DEFAULT)
api.SetPageSegMode(tesseract.PSM_AUTO)

image = cv.CreateImageHeader((scr.shape[1],scr.shape[0]), cv.IPL_DEPTH_8U, 1)
cv.SetData(image, scr.tostring(), scr.dtype.itemsize*scr.shape[1])

#cv.SaveImage('img1.jpg',image)

tesseract.SetCvImage(image,api)
text=api.GetUTF8Text()
conf=api.MeanTextConf()

print text
print conf 
```

你应该得到类似...

```
OE3456789
!"#$%&'()* .-./

76 
```

![文本示例.jpg](../Images/68417a1658d5d93ae08089014037e7ab.png)

# c# - 知道为什么这个 RavenDB 查询只返回 6 个结果吗？

> ID：15606383
> 
> 赞同：1
> 
> 时间：2013-03-25T01:39:44.807
> 
> 标签：c#, .net, indexing, ravendb

我们在 Raven 中被这个问题难住了，无法弄清楚它对我们的生活有什么问题。我们有一个相当大的索引。它还有一个运行转换，可以根据包含标签数组的白名单文档过滤掉结果。

这是索引：

```
public class Entries_ByWhiteListSearchableFields
        : AbstractIndexCreationTask<Entry, Entries_ByWhiteListSearchableFields.Result>
    {
        public class Result
        {
            public string Id { get; set; }
            public IEnumerable<string> Search { get; set; }
            public DateTimeOffset? LastPublishedAtUtc { get; set; }
            public DateTimeOffset LastModifiedAtUtc { get; set; }
            public DateTimeOffset DisplayAtUtc { get; set; }
            public PublishStatus PublishStatus { get; set; }
            public IEnumerable<string> BylineIds { get; set; }
            public IEnumerable<string> TagIds { get; set; }
            public IEnumerable<string> ReferenceIds { get; set; }
            public string SourceStreamConfigId { get; set; }
            public bool Deleted { get; set; }
            public IEnumerable<string> FullyQualifiedTagIds { get; set; }
            public DateTimeOffset? ExpireAtUtc { get; set; }
        }

        public Entries_ByWhiteListSearchableFields()
        {
            this.Map = entries => from entry in entries
                                  let entrySection = entry.Tags.FirstOrDefault(tag => tag.Schema == "EntrySection")
                                  where entrySection != null
                                  select new
                                  {
                                      Id = entry.Id,
                                      Search = entry.Tags
                                          .Select(x => x.Label)
                                          .Concat(new[] { entry.Headline }),

                                      LastPublishedAtUtc = entry.LastPublishedAtUtc,
                                      LastModifiedAtUtc = entry.LastModifiedAtUtc,
                                      DisplayAtUtc = entry.LastPublishedAtUtc ?? entry.LastModifiedAtUtc,
                                      PublishStatus = entry.PublishStatus,
                                      BylineIds = entry.BylineIds,
                                      TagIds = entry.Tags.Select(x => x.Id),
                                      ReferenceIds = entry.References.Select(x => x.Id),
                                      Deleted = entry.Deleted,
                                      EntrySectionId = entrySection.Id,
                                      FullyQualifiedTagIds = entry.Tags.Select(t => t.Schema + "." + t.Id),
                                      ExpireAtUtc = entry.ExpireAtUtc
                                  };

            this.TransformResults =
                (database, entries) => from entry in entries
                                       let whitelist = database.Load<WhiteList>("whitelistdocid")
                                       where database.Load<Entry>(entry.Id)
                                                     .Tags
                                                     .Select(t => t.Schema + "." + t.Id)
                                                     .Intersect(
                                                        whitelist.WhiteList.Select(s => "EntrySection." + s))
                                                     .Any()
                                       select entry;
            this.Index(x => x.Search, FieldIndexing.Analyzed);
        }
    } 
```

我们已经运行了这个完全相同的索引，但没有转换，它运行良好。

这个索引似乎也可以工作，但在一个领域，我们有这样的查询：

```
query = this.session.Advanced.LuceneQuery<Entry, Entries_ByWhiteListSearchableFields>()    
.Statistics(out stats)
.WhereEquals("Deleted", false)
.OrderBy("-DisplayAtUtc")
.Skip(queryModel.PageSize * (queryModel.Page - 1))
.Take(queryModel.PageSize)
.Include("BylineIds")
.Include("Tags,Id")
.Include("References,Id")
.Select(factory.GetEntryDashboardItemViewModel); 
```

此查询在没有原始索引且没有转换的情况下完美运行。但是，使用新索引，当我们请求 pageSize 为 100 时，它只返回 6 个结果。当我们要求 50 时，它只返回几个。当我们要求 25 时，它返回 0。

但是，这一行：

```
.OrderBy("-DisplayAtUtc") 
```

似乎引起了问题。当我们注释掉这一行时，它可以工作，但结果没有明显排序。当我们把它放回去时，同样的问题只返回了几个结果。

我重命名了一些东西以使其更有意义。如果需要更多信息，请告诉我。

任何帮助或建议表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T10:41:27.803

我会假设`where`在`TransformResults`. 请注意，TR 发生*在*分页发生之后。因此，您向它提供 100 个项目，TR 将它们过滤掉，但没有尝试获取任何其他结果来填充页面的其余部分。

一般来说，TR 不应该进行过滤。

您应该在查询中执行此操作。

# java - java --classpath 是否覆盖 CLASSPATH 或附加到它？

> ID：15606395
> 
> 赞同：6
> 
> 时间：2013-03-25T01:41:59.397
> 
> 标签：java, classpath

如果我有

```
CLASSPATH=/blah;/foo 
```

然后运行

```
java -cp bar.jar com.yourcompany.SomeMain 
```

现在是类路径

```
bar.jar 
```

或者是

```
/blah;/foo;bar.jar 
```

基本上命令行开关会覆盖或增加现有的`CLASSPATH`?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T01:53:11.917

看起来 -cp 选项覆盖了 CLASSPATH 环境变量。

```
$ export CLASSPATH=Tests
$ java Printf
Team Name                      No. of Wins          No. of Losses        
Bobcats                        0                    0                    
Tigers                         1                    1                    
Lions                          2                    2                    
Cheetahs                       3                    3                    
Jackals                        4                    4                    
Leopards                       5                    5                    
Snow Leopards                  6                    6                    
Cougars                        7                    7                    
Mountain Lions                 8                    8                    
Bobcats                        9                    9                    
$ java -cp . Printf
Error: Could not find or load main class Printf 
```

CLASSPATH 环境变量仍设置为文件夹 Tests，但是，当我使用该`-cp`选项时，它会覆盖它，并将类路径更改为`.`当前目录，因此我的类文件无法再找到。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T01:49:41.530

是的！，cp 或 classpath 选项会覆盖系统变量。了解更多信息

[http://docs.oracle.com/javase/1.5.0/docs/tooldocs/windows/java.html](http://docs.oracle.com/javase/1.5.0/docs/tooldocs/windows/java.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-25T02:16:15.410

-cp 命令行开关覆盖。事实上，还有一些其他的东西会覆盖 CLASSPATH 环境变量，例如 -jar 开关或 IDE 特定的类路径设置。

在任何情况下，如果您想快速查看在运行代码时引用了哪个类路径，您可以考虑在您的类中显示这一行。

```
System.getProperty("java.class.path"); 
```

# javascript - iPhone 上的日期字段显示不正确

> ID：15606397
> 
> 赞同：7
> 
> 时间：2013-03-25T01:42:13.803
> 
> 标签：javascript, html, css

在[此页面](http://festivals.ie/show/741/music/barn-dance-v)的住宿选项卡上，有几个使用[此日期选择器](https://github.com/Aymkdn/Datepicker-for-Bootstrap)的日期字段。在桌面浏览器上一切正常，但在 iPhone 上查看页面时，日期显示在字段下方：

![在此处输入图像描述](../Images/073f11a1f5c5b8c2f50a96097363a1cd.png)

顺便说一句，我尝试从当前的（已弃用的）日期选择器升级到[这个较新的版本](https://github.com/eternicode/bootstrap-datepicker)，但没有成功。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-30T11:22:50.523

我浏览了一下代码，发现其中一个 css 中的声明是导致问题的原因。你似乎合并了你所有的风格，所以我不知道它到底是哪一个（datepicker.css？），无论如何，声明

```
 .datepicker:before{content:''; display:inline-block;} 
```

是什么导致了问题。我不知道在宏伟计划中这样做的确切目的，但只需删除声明或将`display`类型从更改`inline-block`为`block`，一切都会好起来的。

尝试从那里开始调查，避免破坏其他已经工作的浏览器的样式，并理解那些的含义`inline-block`，因为它们同时存在于`.datepicker:before`和`.datepicker:after`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T09:20:49.137

试试 CSS：

```
#booking label { width: 100% } 
```

或类似的带有宽度参数的东西，或者可能是：

```
#booking label { display: block; } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T12:12:03.800

从 iOS 5 开始，可以使用本机日期选择器，而不是使用第三方日期选择器：

```
<input type="date"> 
```

也可以[检查浏览器是否支持`input type="date"`](https://stackoverflow.com/questions/10193294/how-can-i-tell-if-a-browser-supports-input-type-date). 如果可用，您可以使用浏览器的本机解决方案，并使用第三方日期选择器作为后备。

# c# - 我的 HttpWebRequest POST 请求有什么问题

> ID：15606398
> 
> 赞同：1
> 
> 时间：2013-03-25T01:42:16.313
> 
> 标签：c#, post, httpwebrequest

我在将 http 包发送到网站时遇到了麻烦，在嗅探器中，屏幕截图中的[http://data2.floomby.com/files/previews/25_3_2013/KUi91GEdh02qmEM94LQtw.jpg](http://data2.floomby.com/files/previews/25_3_2013/KUi91GEdh02qmEM94LQtw.jpg)`POST`看起来像这样。我认为，有些东西在发送之前混合了我的帖子内容数据，但字符串看起来很正常。这是我的方法代码：`postdata`

```
 public ResponseData AdvancedRequest(string method, string url, string postdata, string proxydata, string referer, int timeout)
    {
        var req = WebRequest.Create(url) as HttpWebRequest;
        req.Method = "GET";
        IWebProxy myProxy = new WebProxy(proxydata.Split(':')[0],  Convert.ToInt32(proxydata.Split(':')[1]));
        req.Proxy = null;
        //req.ServicePoint.ConnectionLimit = 1;
        req.ProtocolVersion = HttpVersion.Version10;
        req.KeepAlive = true;
        //req.UserAgent = "Mozilla/5.0 (Windows NT 6.1; WOW64; rv:19.0) Gecko/20100101 Firefox/19.0";
        req.UserAgent = "Mozilla/5.0 (Windows NT 6.1; WOW64; rv:19.0) Gecko/20100101 Firefox/19.0";
        req.AllowAutoRedirect = false;
        req.Timeout = timeout*1000;
        req.ReadWriteTimeout = timeout*1000;
        req.ContentType = "application/x-www-form-urlencoded";
        req.Accept = "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8";
        req.Headers.Add("Accept-Language", "en-US,en;q=0.5");
        //req.Headers.Add("Accept-Charset", "ISO-8859-1,utf-8;q=0.7,*;q=0.3");
        req.Headers.Add("Accept-Encoding", "gzip, deflate");
        //req.Headers.Add("cache-control", "max-age=0");
        req.CookieContainer = _cookies;
        //req.Headers.Add("Keep-Alive", "115");
        //req.Connection = "keepalive";
        if (!String.IsNullOrEmpty(referer))
        {
            req.Referer = referer;
        }

        req.AutomaticDecompression = DecompressionMethods.GZip | DecompressionMethods.Deflate;
        if (method == "POST")
        {
            req.Method = "POST";
            req.ServicePoint.Expect100Continue = false;
            System.Text.Encoding enc = System.Text.Encoding.UTF8;
            var bytedata = enc.GetBytes(postdata);
            req.ContentLength = bytedata.Length;
            //Stream postStream = req.GetRequestStream();
            try
            {
                using (var postStream = req.GetRequestStream())
                {
                    postStream.Write(bytedata, 0, bytedata.Length);
                    postStream.Close();
                }
            }
            catch (WebException except)
            {

            }

        }

        HttpWebResponse resp = (HttpWebResponse)req.GetResponse() as HttpWebResponse;
        this._cookies.Add(resp.Cookies);
        //resp.Close();
        ResponseData rdata = new ResponseData(resp);
        resp.Close();
        return rdata;
        //StreamReader strdr = new StreamReader(resp.GetResponseStream());
        //string response = strdr.ReadToEnd();
        //strdr.Close();

        //return response;
    } 
```

这是正确的帖子数据：

> session%5Busername_or_email%5D=LoginHere&session%5Bpassword%5D=PasswordHere&return_to_ssl=true&scribe_log=&redirect_after_login=%2F&authenticity_token=auth_token_here

这是我的错误帖子数据：

> session%5Busername_or_email%5D=AsyncCallback&session%5Bpassword%5D=De2zmcc6093&return_to_ssl=true&scribe_log=&redirect_after_login=%2F&authenticity_token=0e67f8df715c79f81a9b2be203848ad7f805b21csession%5Busername_or_email%5D=AsyncCallback&session%5Bpassword%5D=De2zmcc6093&return_to_ssl=true&scribe_log=&redirect_after_login=%2F&authenticity_token=0e67f8df715c79f81a9b2be203848ad7f805b21c

的值为`postdata`：

> session%5Busername_or_email%5D=***登录***&session%5Bpassword%5D=***密码***&return_to_ssl=true&scribe_log=&redirect_after_login=%2F&authenticity_token=0e67f8df715c79f81a9b2be203848ad7f805b21c

# arrays - 在数组中查找条件最小差异的算法

> ID：15606408
> 
> 赞同：-2
> 
> 时间：2013-03-25T01:43:16.753
> 
> 标签：arrays, algorithm, sorting, min

假设你有一个不同整数的数组： A=[a1,a2,a3,a4,a5...] 我需要找到数组的两个元素，比如 A[i] 和 A[j] 使得 i 更小比 j 和 A[j]-A[i] 是最小的。

以下是有效的解决方案吗？

1.  首先对数组进行排序并跟踪每个元素的原始索引（即：原始（未排序）数组中元素的索引。
2.  遍历排序数组并计算任何两个连续元素之间的差异，以验证较大元素的原始索引大于较小元素的原始索引的初始条件。
3.  答案将是所有这些差异的最小值。

以下是这在示例中的工作方式：

```
A=[0,-5,10,1]  (in this case the result should be 1 coming from the difference between      A[3] and A[0])
sort A : newA=[-5,0,1,10]
since OriginalIndex(-5)>OriginalIndex(0), do not compute the difference
since OriginalIndex(1)>OriginalIndex(0),we compute the difference =1
since OriginalIndex(10)>OriginalIndex(1), we compute the difference =9
The result is the minimal difference, which is 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T02:45:28.690

如果您要找到的是正的最小差异，那么基本上，您的问题是：

```
Find two closest elements in an array. 
```

O(nlogn) 解决方案很简单：

1.  排序——O(nlogn)
2.  获取两个相邻元素之间的差异并找到最小的 - O(n)

所以整体运行时间是O(nlogn)

您不必关心索引。因为你是什么都`abs(A[i]-A[j])=abs(A[j]-A[i])`无所谓`i>j``j>i`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T02:06:07.340

这是一种解决方案，时间上为 O(n^2)，空间上为 O(1)。在伪代码中：

```
for i = 0; i < array.length; i++
    for j = i + 1; j < array.length; j++
        if a[j] - a[i] < min
            min = a[j] - a[i]
return min 
```

# iphone - Cocos2d - 如何相对于彼此缩放两个 CCNode

> ID：15606412
> 
> 赞同：1
> 
> 时间：2013-03-25T01:43:46.790
> 
> 标签：iphone, cocos2d-iphone, scale, ccnode

我在 Cocos2d 中有两个 CCNode，我想动态地相互同步缩放。两个 CCNode 都是后台节点。从视觉上看，一个 CCNode NodeA 在 y 方向上位于另一个 CCNode NodeB 之上。但是当我在下面的代码中同时缩放两个节点时：

**编辑＃1 -**

节点 B 是 CCLayer、HUDLayer 的一部分。HUDLayer 无法扩展，但 HUDLayer 中的 NodeB 可以扩展。所以代码看起来像

```
NodeA.anchorPoint = ccp(0.5f, 0.0f);
NodeA.scale = scale;
HUDLayer.NodeB.anchorPoint = ccp(0.5f, 0.0f);
HUDLayer.NodeB.scale = scale;

4)  Would NodeB being part of a CCLayer effect the Nodes scaled relative positions? 
```

**结束编辑#1**

**编辑#2**

```
 The contentSize of CCNode is (0,0).  How do I set the contentSize of CCNode manually? 
```

**结束编辑#2**

**编辑#3**

我发现这篇[文章](https://stackoverflow.com/questions/10234746/rotate-a-sprite-around-an-anchor-point)，其中一个答案谈到了将 CCNode 的 relativeToAnchorPoint 属性设置为 YES。我在 Google 上找不到如何执行此操作。有谁知道如何设置 relativeToAnchorPoint？

**结束编辑#3**

NodeA 在 y 方向下降到 NodeB 之下。所以这带来了几个问题：

```
1)  Are CCNodes scaled with respect to an anchorPoint?
2)  Why is NodeA dropping below NodeB in the y direction?
3)  How can two CCNodes be scaled with their relative positions remaining constant? 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T08:15:50.960

1.  是的
2.  特别是如果它们的尺寸不同，请参见 1
3.  将它们的锚点设置为 0.5,0 以便在缩放时它们都在底部对齐

# java - 如何将不同的动作监听器添加到同一个对象

> ID：15606414
> 
> 赞同：0
> 
> 时间：2013-03-25T01:43:55.003
> 
> 标签：java, applet, actionlistener, calculator, japplet

如何向 p1 对象添加不同的动作侦听器。我希望程序能够在使用适当的按钮按下时将文本栏设置为适当的数字。由于它们不是不同的变量，我不能简单地使用下面的代码（在我的 actionPerformed 函数中），

`if (e.getSource() == button1){ txtField.setText("1"); }`

```
import java.awt.*;
import java.applet.*;
import java.awt.event.*;

public class Telephone extends Applet implements ActionListener
{
   TextField txtField;

   public void init() {
       setLayout(new BorderLayout());

       txtField = new TextField("");
       add(txtField, BorderLayout.NORTH);

       Panel p1 = new Panel();
       p1.setLayout(new GridLayout(4, 3));
       p1.add(new Button("1"));
       p1.add(new Button("2"));
       p1.add(new Button("3"));
       p1.add(new Button("4"));
       p1.add(new Button("5"));
       p1.add(new Button("6"));
       p1.add(new Button("7"));
       p1.add(new Button("8"));
       p1.add(new Button("9"));
       p1.add(new Button("*"));
       p1.add(new Button("0"));
       p1.add(new Button("#"));       
       add(p1, BorderLayout.CENTER);

   }

   public void actionPerformed(ActionEvent e) {

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T01:45:25.347

不要让您的 GUI 类也成为您的侦听器类，因为这要求该类做太多事情。而是考虑使用匿名内部侦听器类或私有内部类。顺便说一句，我看不到您在哪里向按钮添加了任何侦听器。另外，为了我的钱，我会创建一个 Swing GUI，而不是 AWT GUI，因为 Swing 更加健壮和灵活。

另请注意，对于上面的示例，我实际上会给所有按钮对象提供相同的动作侦听器。如果使用 Swing，我可以简单地获取 ActionEvent 对象的 actionCommand，它是感兴趣的数字字符串。不需要 10 个 if 块或 switch 块。

例如，这演示了在 JTextField 中显示数字的非常简单的逻辑，但没有计算逻辑：

```
import java.awt.BorderLayout;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;

import javax.swing.*;

public class CalcEg {
   private static final float BTN_FONT_SIZE = 18f;
   private static final String[][] BTN_LABELS = {
      {"7", "8", "9", "-"},
      {"4", "5", "6", "+"},      
      {"1", "2", "3", "/"},
      {"0", ".", "=", "*"}
   };
   private JPanel mainPanel = new JPanel();
   private JTextField textField = new JTextField(10);

   public CalcEg() {
      int rows = BTN_LABELS.length;
      int cols = BTN_LABELS[0].length;
      int gap = 4;

      JPanel buttonPanel = new JPanel(new GridLayout(rows, cols, gap, gap));
      for (String[] btnLabelRow : BTN_LABELS) {
         for (String btnLabel : btnLabelRow) {
            JButton btn = createButton(btnLabel);
            if ("0123456789.".contains(btnLabel)) {
               btn.setAction(new NumberListener(btnLabel));
            } 
            buttonPanel.add(btn);
         }
      }

      textField.setFont(textField.getFont().deriveFont(BTN_FONT_SIZE));

      mainPanel.setLayout(new BorderLayout(gap, gap));
      mainPanel.setBorder(BorderFactory.createEmptyBorder(gap, gap, gap, gap));
      mainPanel.add(textField, BorderLayout.PAGE_START);
      mainPanel.add(buttonPanel, BorderLayout.CENTER);
   }

   private JButton createButton(String btnLabel) {
      JButton button = new JButton(btnLabel);
      button.setFont(button.getFont().deriveFont(BTN_FONT_SIZE));
      return button;
   }

   public JComponent getMainComponent() {
      return mainPanel;
   }

   private class NumberListener extends AbstractAction {
      NumberListener(String actionCommand) {
         super(actionCommand);
      }

      @Override
      public void actionPerformed(ActionEvent e) {
         String actionCommand = e.getActionCommand();
         textField.setText(textField.getText() + actionCommand);
      }
   }

   private static void createAndShowGui() {
      CalcEg mainPanel = new CalcEg();

      JFrame frame = new JFrame("CalcEg");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(mainPanel.getMainComponent());
      frame.pack();
      frame.setLocationByPlatform(true);
      frame.setVisible(true);
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }
} 
```

# python - 使用 facebook 登录然后发出信号以创建用户配置文件

> ID：15606420
> 
> 赞同：0
> 
> 时间：2013-03-25T01:44:40.017
> 
> 标签：python, django, facebook

我在 Django 包上花了一些时间来研究 Facebook 集成的大量选项。我希望有人可以缩小我想做的选择。我希望能够使用 python 访问 API 并执行各种任务。目前的主要任务如下：

我需要从 cookie 中获取用户的 facebook 电子邮件，然后使用它来创建一个本地配置文件，其中将存储其他信息。如果有人这样做的一个很好的例子，或者如果一个特定的模块有好的文档就足够了。

编辑：另请注意 - 我不想使用注册。我希望在用户使用 FB 登录时创建配置文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T01:55:15.703

脸书：[http ://catherinetenajeros.blogspot.com/2013/03/facebook-login.html](http://catherinetenajeros.blogspot.com/2013/03/facebook-login.html)

```
 def get_profile(request, token=None):
    args = {
        'client_id': settings.FACEBOOK_APP_ID,
        'client_secret': settings.FACEBOOK_APP_SECRET,
        'redirect_uri': request.build_absolute_uri(reverse('pets:fb_callback')),
        'code': token,
    }

    target = urllib.urlopen('https://graph.facebook.com/oauth/access_token?' + urllib.urlencode(args)).read()
    response = cgi.parse_qs(target)
    access_token = response['access_token'][-1]

    return access_token 

def fb_login(request):
    args = {
        'client_id': settings.FACEBOOK_APP_ID,
        'scope': settings.FACEBOOK_SCOPE,
        'redirect_uri': request.build_absolute_uri(reverse('app_name:fb_callback')),
    }
    return HttpResponseRedirect('https://www.facebook.com/dialog/oauth?' + urllib.urlencode(args))

def fb_callback(request):
    access_token = get_profile(request, request.GET.get('code'))  
    fb_profile = urllib.urlopen('https://graph.facebook.com/me?access_token={0}'.format(access_token))
    fb_profile = json.load(fb_profile)

    fb_username = fb_profile.get('username', fb_profile['email'].split('@')[0])
    fb_id = fb_profile.id
    fb_email = fb_profile.email

    [.........] 
```

# java - 如何将简单的 Servlet 与 JDBC 结合起来？代码导致 ClassNotFoundException

> ID：15606425
> 
> 赞同：2
> 
> 时间：2013-03-25T01:45:03.420
> 
> 标签：java, mysql, servlets, jdbc, classnotfoundexception

我编写了一个简单的 JDBC，它运行良好（我使用 java 和 javac 在命令提示符下运行它）。

我还编写了一个简单的 HelloworldServlet，它运行良好（使用 Apache Tomcat 7.0）。我使用浏览器[http://www.myhost.com:8088/projecthello/servlethello](http://www.myhost.com:8088/projecthello/servlethello)访问 servlet ，它会显示 Helloworld。

现在我正在尝试结合一个简单的 servlet 和 JDBC。我想查询 SELECT 到一个表，并使用这个 URL 在我的浏览器中显示它：[http ://www.myhost.com:8088/projectmovie/directors-view](http://www.myhost.com:8088/projectmovie/directors-view)

在文件夹 /WEB-INF/classes 中，我有 2 个文件：DirectorsViewServlet.java 和 DirectorSelect.java

这是 DirectorViewServlet.java：

```
 import java.io.*;
 import javax.servlet.*;
 import javax.servlet.http.*;
 import java.sql.*;

 public class DirectorsViewServlet extends HttpServlet {

  public void doGet(HttpServletRequest req, HttpServletResponse res) throws IOException, ServletException {
    res.setContentType("text/html");
    PrintWriter out = res.getWriter();
    DirectorSelect ds = new DirectorSelect();
    out.println(ds.selectDirectors());
  }

  public void doPost(HttpServletRequest req, HttpServletResponse res) throws IOException, ServletException {
    doGet(req, res);
  }

} 
```

这是 DirectorSelect.java：

```
 import java.sql.*;

 class DirectorSelect{
  public String selectDirectors() {
    Connection koneksi = null;
    Statement stat = null;
    String str = "";
    try{
        Class.forName("com.mysql.jdbc.Driver");
        koneksi = DriverManager.getConnection("jdbc:mysql://localhost/dbizza","root","");
        stat = koneksi.createStatement();
        ResultSet hasil = stat.executeQuery("SELECT * FROM directors");
        while (hasil.next()) {
            str = str + (hasil.getInt(1) + "\t" + hasil.getString(2)+ "\t" + hasil.getString(3)+ "\t" + hasil.getDate(4)+ "\t" + hasil.getString(5));
        }
        stat.close();
        koneksi.close();
    } catch (SQLException sqle) {
        str = "SQLException error";
    } catch (ClassNotFoundException cnfe) {
        str = "ClassNotFoundException error";
    }
    return str;
 }
} 
```

这是我的 web.xml 文件：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<web-app xmlns="http://java.sun.com/xml/ns/javaee"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
 http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
 version="2.5"> 
<servlet>
    <servlet-name>DirViewServlet</servlet-name>
    <servlet-class>DirectorsViewServlet</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>DirViewServlet</servlet-name>
    <url-pattern>/directors-view</url-pattern>
</servlet-mapping>
</web-app> 
```

问题是，当我在浏览器中使用此本地 URL [http://www.myhost.com:8088/projectmovie/directors-view访问它时](http://www.myhost.com:8088/projectmovie/directors-view)

结果是“ClassNotFoundException 错误”。如何解决？

我读到有人说 servlet 和 JDBC 在某种程度上是正交技术。任何进一步的解释是什么意思？为什么？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T02:22:18.640

A`ClassNotFoundException`是一个相当简单的异常，与 servlet/JDBC 无关（看，它来自`java.lang`包，表示基本 Java，而不是来自`javax.servlet`或`java.sql`包，否则表示 Servlet 或 JDBC 问题）。这只是意味着运行时类路径中缺少异常消息中提到的类。

不幸的是，在您的情况下，异常消息中提到的类没有打印/记录。给定代码中的异常处理非常糟糕。该代码完全抑制异常并返回自定义消息，就好像它是来自数据库的结果一样。该代码的调用者甚至无法区分数据库交互是否成功。**如果您以正确抛出**异常的方式重写代码，或者至少打印其堆栈跟踪，那么您应该在异常消息中看到缺少的类，如下所示

```
java.lang.ClassNotFoundException: com.mysql.jdbc.Driver
    at .... 
```

这又是不言自明的：运行时类路径中缺少 JDBC 驱动程序类（或在此特定情况下，包含 JDBC 驱动程序类的 JAR 文件）。

只需将 JDBC 驱动程序 JAR 文件放到 webapp 的运行时类路径中。该`/WEB-INF/lib`文件夹参与 webapp 的运行时类路径。只需将 JAR 文件直接放在那里并重建/重新部署/重新启动。

### 也可以看看：

*   [java.lang.ClassNotFoundException 尽管使用了 CLASSPATH 环境变量](https://stackoverflow.com/questions/2591505/java-lang-classnotfoundexception-com-mysql-jdbc-driver/)
*   [如何在不遇到 java.lang.ClassNotFoundException 的情况下将 JAR 库添加到 WAR 项目？类路径 vs 构建路径 vs /WEB-INF/lib](https://stackoverflow.com/questions/6792197/when-and-where-to-add-jar-files-to-war-project-build-path-vs-web-inf-lib/)

* * *

**与具体问题无关**，我建议仔细阅读这篇文章以获取 JSP+Servlet+JDBC 的正确启动示例：[使用 MVC 和 DAO 模式在 JSP 页面中的 HTML 中显示 JDBC](https://stackoverflow.com/questions/5003142/jsp-using-mvc-and-jdbc/5003701#5003701)结果集。代码不仅在处理异常方面很差，而且在处理数据库资源方面也很差。如果出现异常，这些可能会泄漏。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-11-01T05:52:16.643

如果您得到 Class not found for 'com.mysql.jdbc.Driver' 类，则意味着您的项目缺少 jdbc 驱动程序 jar 文件。您需要根据您的数据库下载 jdbc 驱动程序，并将该 .jar 文件放在项目的“WebContent\WEB-INF\lib”中。

如果您使用的是 MySQL，那么您可以从[这里](http://dev.mysql.com/downloads/connector/j/)下载驱动程序。

我希望这有帮助。

# c++ - 如何为我的应用程序分配 Visual Studio 中的所有可用内存？

> ID：15606429
> 
> 赞同：8
> 
> 时间：2013-03-25T01:45:54.713
> 
> 标签：c++, c, visual-studio-2010, visual-studio

我想在我的基于 Windows 的软件中渲染 400 万个三角形，该软件是用 Visual Studio C++ 2010（以发布模式构建）编写的。当我渲染 390 万个三角形时，软件消耗的总 RAM 内存为 400MB。但是当我尝试渲染 400 万个三角形（仅多出 100K）时，系统给了我一个错误。

```
For Example:
Point *P = new (std::nothrow) Point[nb_triangles]; //==> "(std::nothrow)" is for catching the run time memory allocation error. (Point is X, Y, Z floats)
If(P == NULL)
   message("System can't allocate this much memory.");  // System gives me this error. It means the system can't reserve huge memory for this operation. 
```

我必须为顶点、面法线、顶点法线等分配内存。

实际上我没有得到的是，我有 8 GB RAM 内存，（但在 32 位 XP windows = 3.2GB 内存），软件只保留 400MB，可用内存超过 1 GB，但是当我尝试再渲染 100K 三角形，它给了我一个错误。为什么它给我一个错误？因为它仍然有超过 1 GB 的可用 RAM 内存？

无论如何要解决这个问题，我怎样才能为我的应用程序分配所有可用内存？因为这个问题，我不得不在软件中做一个限制，只为渲染 390 万个三角形，这并不好。

我心中的另一个问题是，用于内存分配的 c++“new”运算符给了我错误，那么 c“malloc”运算符呢？“malloc”可以解决这个问题，这两者之间有什么区别吗？

请指导我。谢谢。

**更新＃1：**

我已经尝试了很多，修改代码，消除内存泄漏等，但我无法分配超过400万的内存。不可能将我的整个代码更改为“向量”。我不能变成“向量”，我现在必须用“新”来坚持我自己的数据结构。以下是我要分配以呈现 1 个对象的指针。

```
P = new points[10000000]; // points is the class with 3 floats X, Y, Z;
N = new Norm[10000000]; // Norm is the class with 3 floats X, Y, Z;
V = new vNorm[10000000]; // vNorm is the class with 3 floats X, Y, Z;
T = new Tri[10000000]; // Tri is the class with 3 integers v1, v2, v3; 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-25T02:10:54.073

这是 Windows 编程的一大神话，一个进程**永远不会**耗尽 RAM。Windows 是一个按需分页的虚拟内存操作系统，如果一个进程需要更多的 RAM，那么操作系统会通过分页出其他进程拥有的其他内存页面来腾出空间。或者进程本身，交换一段时间未使用的页面。

任务管理器以默认设置报告进程的内存使用情况的方式鼓励了这个神话。它显示*工作集*，即 RAM 中进程的实际字节数。该值通常远小于进程分配的虚拟内存量。当一个进程无法再分配*虚拟内存*时，它会在 OOM 上死掉。Taskmgr 中的另一个统计数据，VM 大小值。它通常不是因为所有的虚拟机都被使用了，而是因为没有一个足够大的洞。SysInternals 的 VMMap 实用程序是查看进程如何使用其地址空间的好方法。

获得更大的虚拟内存地址空间需要进行相当基本的检修。尽管今天很容易，但只需将 x64 定位为平台目标。64 位进程有大量可用的地址空间，仅受页面文件最大大小的限制。只要您可以使用 /LARGEADDRESSAWARE 链接器选项在 64 位操作系统上实际运行，您就可以在 32 位模式下跛行。这会将 64 位操作系统上的 VM 大小从 2 GB 增加到 4 GB。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T02:00:18.263

对于其中一个问题：

`is there any diffirence between these two?`

new 和 malloc 的区别如下：

1.  `malloc`在 C 中使用，`malloc`分配未初始化的内存。分配的内存必须用`free`.

2.  `new`通过调用相应的构造函数来初始化分配的内存。分配的内存`new`应该被释放`delete`（调用析构函数）。您无需提供内存块的大小即可释放分配的内存。

并不清楚是否`new`和`malloc`是否按照标准相关（这取决于具体的编译器是否实现`new`using `malloc`），因此问题可能通过简单地替换`new`为`malloc`.

从您显示的代码中，很难发现错误的原因。您可以尝试将动态数组替换为`vector`，看看它是否能解决您的问题。同时，您可以`valgrind`检查您的代码中是否存在内存泄漏（如果您可以使用 makefile 将您的代码移植到 Linux，因为不幸的是 valgrind 在 Windows 上不可用。）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-25T02:03:38.217

> 我心中的另一个问题是，用于内存分配的 c++“new”运算符给了我 >error，那么 c“malloc”运算符呢？“malloc”可以解决这个问题吗，这两者之间有什么区别吗？

`malloc`和之间有区别`new`，例如，`new`会初始化你的内存并自动调用类的构造函数。或者如果它们是原始类型（例如`float`,`int`等`char`）则进行初始化。`new`此外，应使用`delete`调用析构函数的关键字删除分配的内存。

C`malloc()`以及`new`Visual Studio 中的运算符在内部调用`HeapAlloc()`. 如果所需的内存太大或在进程之间共享，则`HeapAlloc()`调用。`VirtualAlloc()`因此，它不一定能解决您的问题。事实上，如果您使用 C++，请坚持使用`new`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-01T05:40:00.803

```
P = new points[10000000]; // points is the class with 3 floats X, Y, Z;
N = new Norm[10000000]; // Norm is the class with 3 floats X, Y, Z;
V = new vNorm[10000000]; // vNorm is the class with 3 floats X, Y, Z;
T = new Tri[10000000]; // Tri is the class with 3 integers v1, v2, v3; 
```

这段代码分配了 30M 个向量，每个向量包含 3 个浮点数，因此是 30M * 3 * 4 = 360MB 的数据，加上每个 3 个整数的 10M 向量，10M * 3 * 2 = 60MB 的数据。

这通常应该工作。为了向自己证明它有效，您应该将此代码**放在一个独立的项目**中。你必须从有效的开始。它确实有效。去尝试一下：

```
// main.cpp

struct Vector3 { float x, y, z; }
struct Tri { int v1, v2, v3; }

int main() {
  const int N = 10000000;
  new Vector3[N]; // no need to assign to variables in this simple test
  new Vector3[N];
  new Vector3[N];
  new Tri[N];
  // At this point, all four arrays are dynamically allocated although
  // inaccessible as we don't have any variables to work with. That's fine
  // for what we want to show: that the allocations do succeed. If they won't,
  // the code will "crash", i.e. abort via std::terminate.

  // No need to deallocate - it's a waste of time. The process is exiting,
  // the memory will be freed no matter what you do at this point. The OS
  // is taking over
} 
```

如果您的系统上有 > 2GB 的 RAM，它会正常工作。我确实在虚拟机中尝试了 Windows XP SP 6（32 位），并使用了稍微更新的 MSVC（2017）。MSVC 版本在这方面不会有太大的不同，除非 MSVC 2010 中存在一些可怕的错误（我认为像 array new 这样基本的东西不会被严重破坏）。

如图所示，`new` **从不返回 nullptr**！如果`new`返回，则返回一个有效值。如果分配失败，它不会返回，所以没有问题。

怎么不回来？它抛出一个异常，并且程序以错误指示终止，因为该异常将在未处理的情况下传播。

> 不可能将我的整个代码更改为“向量”

嗯？这是相当微不足道的。向量可以像 C 样式数组一样被索引，因此使用向量的代码将保持不变。

就是这样：

```
// main.cpp
#include <algorithm>
#include <vector>
#define CPP20 (__cplusplus > 201703L)
#if CPP20
#  include <ranges>
#endif

struct Vector3 { float x, y, z; }
struct Tri { int v1, v2, v3; }

int main() {
  const int N = 10000000;
  auto P = std::vector<Vector3>(N);
  auto N = std::vector<Vector3>(N);
  auto V = std::vector<Vector3>(N);
  auto T = std::vector<Tri>(N);

  // awful C code as an example
  for (int i = 0; i < N; ++i)
    N[i] = P[i];

  // more idiomatic C++ code
  std::copy(P.begin(), P.end(), N.begin());

  // even more idiomatic on C++20
  #if CPP20
  std::ranges::copy(P, N);
  #endif

  // KISS code
  P = N; // you can't do that with raw C arrays!

  // C++20 KISS with superpowers
  std::ranges::copy(P | std::views::reverse, N)
} 
```

# google-app-engine - Python 2.5 和 Python 2.7 之间存在严重的 GAE 兼容性问题

> ID：15606430
> 
> 赞同：0
> 
> 时间：2013-03-25T01:45:56.963
> 
> 标签：google-app-engine

对于在glowscript.org 上找到的应用程序，我在将GAE 从Python 2.5 更新到Python 2.7 时遇到了一个严重问题。我目前正在使用 GAE Launcher 1.7.6 在 Windows 上进行本地测试。

用户可以创建名称包含空格的文件夹，应用程序将空格转换为“%20”以形成数据存储区的密钥；这些文件夹中的文件名也是如此。在glowscript.org 上存在相当数量的用户，他们的数据依赖于这些键。

在尝试本地调试 Python 2.7 版本中的一些奇怪问题时，很明显 GAE 数据存储机制发生了重大变化。假设用户创建了一个名为“Test Cases”的文件夹。与 gloomscript.org 一致，此文件夹名称转换为“Test%20Cases”并用作 PUT 操作中的键：

folder = 'Test%20Cases' f = Folder( parent = username, key_name = folder, public=True ) # Folder 继承自 db.Model f.put()

在使用 Python 2.7 和启动器 1.7.6 运行时，我在日志中看到的是 '%20' 已转换回空格：

“PUT /api/user/test0324k/folder/Test Cases HTTP/1.1” 200 -

当我使用 Python 2.5 和 GAE Launcher 1.7.2 执行相同的操作（本地）时，这就是我在日志中看到的内容：

“PUT /api/user/test0324k/folder/Test%20Cases HTTP/1.1” 200 -

如果我部署到网络上，用户会收到错误，因为他们的数据有包含“%20”的键，现在无法访问这些键。我不能继续使用 Python 2.5 版本，因为它已经被弃用并且很快就会消失。在不破坏许多人的工作的情况下，我能做些什么来继续前进？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T03:44:47.783

“我不能继续使用 Python 2.5 版本，因为它已经被弃用，很快就会消失。”

我们于 2013 年 3 月 8 日在一篇[博](http://googleappengine.blogspot.com/2013/03/python-25-thanks-for-good-times.html)文中宣布弃用 Python 2.5 ，其中引用了我们的弃用政策（[https://developers.google.com/appengine/terms](https://developers.google.com/appengine/terms)的第 7.2 节）。我建议阅读它。该部分很简短，而且中肯。

您在我们的 Python 2.5 和 2.7 堆栈之间看到的任何意外变化都值得报告。[请通过正常渠道](http://code.google.com/p/googleappengine/issues/list)提交报告。（您几乎可以复制/粘贴您在此处编写的内容。）

也就是说（这是我个人的观点，而不是谷歌的观点）制作一个带有 %20 的密钥，然后将其放入一个 url 而不转义它是非常薄的冰。

# php - 带有 List NameValuePair 的 android sqlite 光标结果

> ID：15606432
> 
> 赞同：0
> 
> 时间：2013-03-25T01:46:29.397
> 
> 标签：php, android, xml, sqlite

我使用购物车处理存储在 data/data/.../cartlist.db 中的一堆选择来构建 android 4.0 应用程序，并且需要知道如何将光标结果与 List NameValuePair 相关联，这是我的活动

```
 public void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
  setContentView(R.layout.sendorder);

  postData();
    ActionBar actionBar = getActionBar();
    actionBar.setDisplayHomeAsUpEnabled(true); 

      String[] columns = new String[] { "_id","name",
              "qty", "price"  };

      Cursor messagesCursor= getContentResolver().query(
            MyContentProvider.CONTENT_URI, columns, null, null,
              null);    

        int theTotal = messagesCursor.getCount();
        Toast.makeText(this, "Total6: " + theTotal, Toast.LENGTH_LONG).show();

        int idCol = messagesCursor.getColumnIndex("_id");
        int nameCol = messagesCursor.getColumnIndex("name");
        int qtyCol = messagesCursor.getColumnIndex("qty");
        int priceCol = messagesCursor.getColumnIndex("price");

        while (messagesCursor.moveToNext()) {
            columns[0] = Integer.toString((messagesCursor.getInt(idCol)));
            quantity = messagesCursor.getString(nameCol);
            product = messagesCursor.getString(qtyCol);
            cost = messagesCursor.getString(priceCol);

        }   

            }    
 public void postData() {

        // Creating HTTP client
        HttpClient httpClient = new DefaultHttpClient();
        // Creating HTTP Post
        HttpPost httpPost = new HttpPost( "http://example.com/droid/order.php");

        // Building post parameters
        // key and value pair
        List<NameValuePair> nameValuePair = new ArrayList<NameValuePair>();
        nameValuePair.add(new BasicNameValuePair("qty", quantity));
        nameValuePair.add(new BasicNameValuePair("product",product));
        nameValuePair.add(new BasicNameValuePair("price",cost));
        // Url Encoding the POST parameters
        try {
            httpPost.setEntity(new UrlEncodedFormEntity(nameValuePair));
        } catch (UnsupportedEncodingException e) {
            // writing error to Log
            e.printStackTrace();
        }

        // Making HTTP Request
        try {
            HttpResponse response = httpClient.execute(httpPost);

            // writing response to log
            Log.d("Http Response:", response.toString());
        } catch (ClientProtocolException e) {
            // writing exception to log
            e.printStackTrace();
        } catch (IOException e) {
            // writing exception to log
            e.printStackTrace();

        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T10:08:08.110

我发现只是放错了名称值对并清理了一些大括号希望答案能帮助一些人

public void onCreate(Bundle savedInstanceState) { super.onCreate(savedInstanceState); setContentView(R.layout.sendorder);

```
ActionBar actionBar = getActionBar();
actionBar.setDisplayHomeAsUpEnabled(true); 

  String[] columns = new String[] { "_id","name",
          "qty", "price"  };

  Cursor messagesCursor= getContentResolver().query(
        MyContentProvider.CONTENT_URI, columns, null, null,
          null);    

    int theTotal = messagesCursor.getCount();
    Toast.makeText(this, "Total6: " + theTotal, Toast.LENGTH_LONG).show();

    int idCol = messagesCursor.getColumnIndex("_id");
    int nameCol = messagesCursor.getColumnIndex("name");
    int qtyCol = messagesCursor.getColumnIndex("qty");
    int priceCol = messagesCursor.getColumnIndex("price");

    while (messagesCursor.moveToNext()) {
        columns[0] = Integer.toString((messagesCursor.getInt(idCol)));
        quantity = messagesCursor.getString(nameCol);
        product = messagesCursor.getString(qtyCol);
        cost = messagesCursor.getString(priceCol);
    // Building post parameters
    // key and value pair
    List<NameValuePair> nameValuePair = new ArrayList<NameValuePair>();
    nameValuePair.add(new BasicNameValuePair("qty", quantity));
    nameValuePair.add(new BasicNameValuePair("product",product));
    nameValuePair.add(new BasicNameValuePair("price",cost));

    // Creating HTTP client
    HttpClient httpClient = new DefaultHttpClient();
    // Creating HTTP Post
    HttpPost httpPost = new HttpPost( "http://example.com/droid/order.php");

    // Url Encoding the POST parameters
    try {
        httpPost.setEntity(new UrlEncodedFormEntity(nameValuePair));
    } catch (UnsupportedEncodingException e) {
        // writing error to Log
        e.printStackTrace();
    }

    // Making HTTP Request
    try {
        HttpResponse response = httpClient.execute(httpPost);

        // writing response to log
        Log.d("Http Response:", response.toString());
    } catch (ClientProtocolException e) {
        // writing exception to log
        e.printStackTrace();
    } catch (IOException e) {
        // writing exception to log
        e.printStackTrace();
      }
    }
} 
```

# coldfusion - Coldfusion 条件选择选项在 IE9、Chrome 和 Firefox 中不起作用

> ID：15606434
> 
> 赞同：0
> 
> 时间：2013-03-25T01:46:55.673
> 
> 标签：coldfusion

很抱歉可能会问初学者问题并且对我的英语感到抱歉，但我似乎无法完成这项工作（我没有开发这个）。

我在 Coldfusion 中有 3 个选择下拉框。第一个下拉状态由数据库 onload 填充：

```
 <cfquery name="qState" datasource="#Variables.fw.Config.DSN#">
    SELECT * from refState WHERE State = '#url.BindID#' AND status = 'Active' order by ldesc
</cfquery>

<select name="State">
                <option value="" <cfif isDefined("url.PrevID") and #url.PrevID# EQ "">selected</cfif>></option>
                <cfoutput query="qState">
                    <option value="#qState.State#" <cfif isDefined("url.PrevID") and #url.PrevID# EQ #qState.State#>selected</cfif>>#qState.Ldesc#</option>
                </cfoutput>
            </select> 
```

然后它将选定的值传递给第二个下拉列表，即 City：

```
<cfdiv id="City" bind="url:index.cfm?section=public&action=City&txtReff=#txtReff#&BindStateID={State}&PrevCityID=#txtCity#"> 
```

查询获取州下的城市：

```
<!--- loop to fix the state, returns the correct value even though i hav limited knowledge on this --->
    <cfset num = 0>
    <cfloop index="i" list="#url.BindStateID#" delimiters=",">
        <cfset num = #num# + 1>
        <cfif #num# EQ 2>
            <cfset p = #i#>
        </cfif>
    </cfloop>

<!--- then the query to get cities under the state --->
    <cfquery name="qCity" datasource="#Variables.fw.Config.DSN#">
        SELECT * from refCity WHERE State = '#p#' AND status = 'Active' order by ldesc
    </cfquery 
```

>

最后显示要选择的城市

```
<select name="City">
                <option value="" <cfif isDefined("url.PrevCityID") and #url.PrevCityID# EQ "">selected</cfif>></option>
                <cfoutput query="qCity">
       <option value="#qCity.City#" <cfif isDefined("url.PrevCityID") and #url.PrevCityID# EQ #qCity.City#>selected</cfif>>#qCity.Ldesc#</option>

                </cfoutput>
            </select> 
```

问题是这仅适用于 IE6、7 和 8。它不适用于 Chrome、IE 9 及更高版本和 firefox。

任何帮助将非常感激。感谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T02:15:08.543

我添加了标签以防止 SQL 注入，并删除了包含 ## 的额外标签。您不需要它们，而是 cfif 语句。

此外，在州区域，你有一个看起来有点奇怪的循环。似乎您只有一个选择下拉框，因此它只有 1 个变量，但是，您正在循环遍历它，就好像它有多个并取第二个值一样。我不明白这一点，并且觉得您的代码在该位置可能出错了。

我建议将您的代码更改为以下内容：

```
 <!--- Personal Preference --->
 <cfparam name="url.prefid" default="">

 <cfquery name="qState" datasource="#Variables.fw.Config.DSN#">
    SELECT * from refState 
    WHERE State = <cfqueryparam cfsqltype="cf_sql_varchar" value="#url.BindID#">
          AND status = 'Active' 
    order by ldesc
</cfquery>

<select name="State" id="State">
    <option value="" <cfif trim(url.PrevID) eq "">selected</cfif>></option>
    <cfoutput query="qState">
      <option value="#qState.State#" <cfif trim(url.previd) eq qState.State>selected</cfif>>#qState.Ldesc#</option>
    </cfoutput>
</select> 
```

然后你的下一个文件：

```
<cfparam name="url.bindstateid" default="">

<!--- then the query to get cities under the state --->
    <cfquery name="qCity" datasource="#Variables.fw.Config.DSN#">
        SELECT * 
        from refCity 
        WHERE 1=0 
        <cfif trim(url.bindstateid) is not "">
        OR (State = <cfqueryparam cfsqltype="cf_sql_varchar" value="#url.bindstateid#"> AND status = 'Active')
        </cfif>
        order by ldesc
    </cfquery 
```

最后

```
<cfparam name="url.prevcityid" default="">

<select name="City">
    <option value="" <cfif trim(url.prevCityid) eq "">selected</cfif>></option>
    <cfoutput query="qCity">
        <option value="#qCity.City#" <cfif trim(url.PrevCityID) is "">selected</cfif>>#qCity.Ldesc#</option>
    </cfoutput>
</select> 
```

# python - Python 3.3 中的 time.sleep() 函数？

> ID：15606437
> 
> 赞同：3
> 
> 时间：2013-03-25T01:47:18.193
> 
> 标签：python, python-3.x

我正在尝试连续运行 WHILE 循环以每十五分钟检查一次条件。当使用 time.sleep(900) 时，它最初会推迟执行 WHILE 循环十五分钟，然后在满足条件后停止运行。

我相信 Python 2 出于这个原因使用了这个功能，Python 3.3 不再遵循这个功能了吗？如果不是，即使满足条件，我将如何无限期地运行 while 循环？

以下是我目前的代码片段：

```
if price_now == 'Y':
    print(get_price())
else:
    price = "99.99"
    while price > "7.74":
        price = get_price()
        time.sleep(5) 
```

**编辑：** *根据 eandersson 的反馈进行更新。*

```
if price_now == 'Y':
    print(get_price())
else:
    price = 99.99
    while price > 7.74:
        price = get_price()
        time.sleep(5) 
```

`get_price()`功能：

```
def get_price():
    page = urllib.request.urlopen("link redacted")
    text = page.read().decode("utf8")
    where = text.find('>$')
    start_of_price = where + 2
    end_of_price = start_of_price + 4
    price = float(text[start_of_price:end_of_price])
    return(price) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T01:52:02.223

我认为这种情况下的问题是您正在比较一个字符串，而不是一个浮点数。

```
price = 99.99
while price > 7.74:
    price = get_price()
    time.sleep(5) 
```

你需要改变`get_price`函数来返回一个浮点数，或者用`float()`

我什至做了一个小测试功能来确保它与睡眠功能一样正常工作。

```
price = 99.99
while price > 7.74:
    price += 1
    time.sleep(5) 
```

**编辑：** `Updated based on comments.`

```
if price_now == 'Y':
    print(get_price())
else:
    price = 0.0
    # While price is lower than 7.74 continue to check for price changes.
    while price < 7.74: 
        price = get_price()
        time.sleep(5) 
```

# c++ - C++ builder滚动框组件响应鼠标滚轮

> ID：15606439
> 
> 赞同：2
> 
> 时间：2013-03-25T01:47:31.777
> 
> 标签：c++, c++builder, c++builder-xe2, tscrollbox

我一直在寻找使鼠标滚轮与滚动框组件一起使用的选项，到目前为止我得到了这个

```
void __fastcall TForm1::ScrollBox1MouseWheelDown(TObject *Sender, TShiftState Shift,
          TPoint &MousePos, bool &Handled)
{
    Form1->ScrollBox1->VertScrollBar->Position++;
}

void __fastcall TForm1::ScrollBox1MouseWheelUp(TObject *Sender, TShiftState Shift,
          TPoint &MousePos, bool &Handled)
{
    Form1->ScrollBox1->VertScrollBar->Position--;
} 
```

到目前为止，它可以工作，但滚动速度非常慢。有什么方法可以让它滚动得更快，或者在 c++ builder 中处理滚动的更好方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T17:48:57.860

`TScrollBox`在 C++Builder XE2 中，原生支持通过鼠标滚轮进行垂直滚动。您无需执行任何额外操作即可启用该行为。我刚刚测试了它，它工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-17T14:58:49.107

我使用 C++Builder XE2，它本身不支持滚动 TScrollBox，所以我使用你的方法，但只是 OnMouseWheel 事件，如果 WheelDelta 低于 0 则向下滚动，如果高于 0 则向上滚动。

关于滚动速度，您不能只在 Position 变量中添加/减去更高的常数吗？像：

```
Form1->ScrollBox1->VertScrollBar->Position += 3; 
```

# java - 线程声明

> ID：15606441
> 
> 赞同：0
> 
> 时间：2013-03-25T01:48:03.037
> 
> 标签：java, multithreading, swing, user-interface, declaration

我有以下代码：

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

public class Try extends JFrame implements ActionListener{
JButton n1 = new JButton("1");
JButton n2 = new JButton("2");
JButton n3 = new JButton("3");
JButton show = new JButton("Show");

{
show.addActionListener(this);
n1.setEnabled(false);
n2.setEnabled(false);
n3.setEnabled(false);

}

public Try(){
  super("Try");
  setVisible(true);
  setSize(500, 200);
  setLayout(new GridLayout(1, 4));
  add(n1);
  add(n2);
  add(n3);
  add(show);
}  

public void actionPerformed(ActionEvent a) {
Object clicked = a.getSource();
if(show == clicked){
new Trial().start();
}
}

class Trial extends Thread{
  public void run(){
        try {
            n1.setEnabled(true);
            Thread.sleep(1000);
            n1.setEnabled(false);
            n2.setEnabled(true);
            Thread.sleep(1000);
            n2.setEnabled(false);
            n3.setEnabled(true);
            Thread.sleep(1000);
            n3.setEnabled(false);    
        } catch (InterruptedException e){
        }
}
}      

    public static void main(String[] args){
      Try frame = new Try();
      frame.setVisible(true);
    }
    } 
```

我对某些部分有一些疑问：

```
1.--->     new Trial().start();
2.--->     class Trial extends Thread
3.--->     public void run() 
```

1.  他为什么要更新它而不是试用？还是第 1 行是“制作”线程的代码？是在线程中启动一个方法来创建它们吗？
2.  为什么要扩展线程？为什么不能简单地进行课堂试验？还有为什么不公开呢？
3.  为什么是公开的？我知道 run 会运行线程，但为什么要公开？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T02:04:09.657

您应该阅读一些关于 Java 线程的不错的教程，这些教程很容易在线获得，并且您可以在进行一些研究后找到您的答案，在此处发布您的问题之前您必须这样做。

您的问题的简短答案是；

```
new Trial().start(); 
```

new 关键字是创建类对象的java 运算符，start() 是开始执行线程。也可以这样写；

```
Trial t = new Trial();
t.start(); 
```

这意味着，每当您创建扩展 Thread 的类的对象时，都会创建一个新线程，该线程将在您调用 start() 时开始执行

```
class Trial extends Thread 
```

Class Trial 正在扩展一个 Thread 类以继承行为，并且能够为自己的实现覆盖 run() 函数。简而言之，run() 是 Thread 完成所有工作的函数。

```
public void run() 
```

run() 函数在派生类中被覆盖（即在您的情况下为 Trial），因此它必须是公共的，以便您可以在任何地方创建和启动线程，只需创建 Trial 类的对象。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T02:24:41.093

同样，您的 Swing 线程是错误的，但无论如何，我什至不会直接使用线程，而是会为此使用 Swing Timer。例如：

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

public class Try extends JFrame implements ActionListener {
   private static final int TIMER_DELAY = 1000;
   JButton n1 = new JButton("1");
   JButton n2 = new JButton("2");
   JButton n3 = new JButton("3");
   private JButton[] buttons = {n1, n2, n3};
   JButton show = new JButton("Show");
   private Timer timer = null;

   public Try() {
      super("Try");
      // setSize(500, 200);
      setLayout(new GridLayout(1, 4));
      add(n1);
      add(n2);
      add(n3);
      add(show);

      show.addActionListener(this);
      n1.setEnabled(false);
      n2.setEnabled(false);
      n3.setEnabled(false);

      setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      pack();
   }

   public void actionPerformed(ActionEvent a) {
      Object clicked = a.getSource();
      if (show == clicked && timer == null) {
         timer = new Timer(TIMER_DELAY, new TimerListener());
         timer.setInitialDelay(0);
         timer.start();
      }
   }

   private class TimerListener implements ActionListener {
      private int count = 0;

      @Override
      public void actionPerformed(ActionEvent evt) {
         for (JButton btn : buttons) {
            btn.setEnabled(false);
         }

         if (count != buttons.length) {
            buttons[count].setEnabled(true);
            count++;
         } else {
            timer.stop();
            timer = null;
         }
      }
   }

   private static void createAndShowGui() {
      new Try().setVisible(true);
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }
} 
```

# paypal - PayPal 此处的文档

> ID：15606443
> 
> 赞同：2
> 
> 时间：2013-03-25T01:48:23.790
> 
> 标签：paypal

有谁知道与“PayPal Here”集成相关的任何文档的位置？

我搜索了包括 PayPal 网站在内的网络，但没有发现任何有用的信息，他们的“支持论坛”指向这里，所以我想我会问。他们的 API 似乎有很多文档，但他们的“PayPal Here”集成却没有。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-04-24T19:51:24.197

这是我们最新的文档：

[https://github.com/paypal/here-sideloader-api-samples](https://github.com/paypal/here-sideloader-api-samples)

也请让我知道您正在寻找哪些论据缺少...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T02:44:48.847

这与您将获得的一样接近：[https](https://github.com/paypal/PayPal-iOS-SDK/issues/1#issuecomment-14680084) ://github.com/paypal/PayPal-iOS-SDK/issues/1#issuecomment-14680084除非您像我一样向他们发送大量电子邮件迄今为止的版本，大声笑。这些链接之一具有即将发布的文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T03:22:53.130

据我所知，实际的 Here API 仍处于早期测试阶段，直到今年晚些时候才会公开发布。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T15:28:45.073

如果您正在寻找 PayPal Here Sideloader API 文档，Tim 在[https://www.paypal-labs.com/devblog/paypal-here-sideloader-api/](https://www.paypal-labs.com/devblog/paypal-here-sideloader-api/)的开发人员博客上发布了相关信息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-18T21:17:41.227

适用于 iOS 和 Android 的 PayPal Here SDK 现已在 developer.paypal.com 上发布：

[https://developer.paypal.com/webapps/developer/docs/integration/mobile/pph-sdk-overview/](https://developer.paypal.com/webapps/developer/docs/integration/mobile/pph-sdk-overview/)

还有一个适用于 Windows 8.1+ 的 Beta 版本，可根据要求提供。您可以通过电子邮件向 DL-PayPal-Here-SDK@ebay.com 寻求任何帮助。

# ruby-on-rails - 在 Rails 中显示数据库值？

> ID：15606447
> 
> 赞同：0
> 
> 时间：2013-03-25T01:48:41.187
> 
> 标签：ruby-on-rails, ruby

我的桌子是：

```
|  1 | Electronics     | Cameras         
|  2 | Electronics     | Computers       
|  3 | Electronics     | Mobile Phone    
|  4 | Electronics     | Sound & Vision  
|  5 | Clothes         | womens clothing 
|  7 | Clothes         | women shoes     
|  8 | Clothes         | women hand bags 
|  9 | Clothes         | Mens clothing   
| 10 | Clothes         | Kids clothing 
```

我试图在我的索引页面上显示一个链接，如下所示：

```
**Electronics**
Computers
Mobile Phone 
Sound & Vision
**Clothes**
womens clothing
women shoes 
Mens clothing 
```

我该怎么做呢？

我的模型是这样的：

```
class Category < ActiveRecord::Base
  has_many :products
   attr_accessible :division,:subdivision
  end 

class Product < ActiveRecord::Base
        has_many :photos,:dependent => :destroy
        has_many :line_items, :through => :product_id
        belongs_to :merchant
        belongs_to  :category
        attr_accessor :quantity
        accepts_nested_attributes_for :photos, :line_items 
```

类别表是父表，产品有一个`category_id`. 我想以上述方式显示类别，前提是有任何产品并且我的产品模型如下所示：

当我单击链接时显示链接后，我计划显示所有相关产品。

谁能指导我如何显示有产品的类别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T02:13:20.273

您可以使用 Enumerable#group_by 轻松完成此操作

```
<% Category.all.group_by{|c| c.division }.each do |division, subdivisions| %>
  <%= "**#{division}**" %><br>
  <% subdivisions.each do |subdivision| %>
    <%= subdivsion %><br>
  <% end %>
<% end %> 
```

[http://railscasts.com/episodes/29-group-by-month?view=asciicast](http://railscasts.com/episodes/29-group-by-month?view=asciicast)

您传递给 group_by 的块被评估，并且评估为相同值的每条记录都在哈希键下分组在一起，您可以使用 .each 循环

# linux - 用于生成带有日期戳的新日志的 shell 脚本

> ID：15606450
> 
> 赞同：1
> 
> 时间：2013-03-25T01:49:07.533
> 
> 标签：linux, shell, unix, logging

有没有办法从日志文件中提取最后修改的日期和时间并将该日期和时间附加到文件中？

我有一个每次运行时都会生成appslist.log 文件的工具。当我运行该工具时，通过我的脚本，applist.log 文件已经存在，然后我可能必须将它与它的创建时间和日期相关联。

喜欢：

```
mv applist.log applist_+%Y%m%d_%H%M%S.log 
```

就像我第一次运行该工具并生成 applist.log 一样：

```
applist.log     Mon 03-29-2013 
```

下次我在 2013 年 3 月 30 日运行该工具时，我想使用包含创建日期和时间的新名称移动现有的 applist.log 文件：

```
like applist_03-29-2013.log 
```

因为该工具会在 2013 年 3 月 30 日再次生成 applist.log。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T00:55:08.947

```
mv applist.log applist_`date -r applist.log +%Y%m%d%H%M%S`.log 
```

这会将文件移动到名称中带有日期的新文件。date 命令允许您以任何格式显示。有关`man date`这些字符序列的完整描述，请参阅 。使用反引号将首先运行里面的命令。日期选项将`-r`获取相关文件的日期。

例子：

```
[me@host temp]$ mv applist.log applist_`date -r applist.log +%Y%m%d%H%M%S`.log
[me@host temp]$ ls -l
total 196
-rw-rw-r--. 1 me me     0 Mar 25 20:55 applist_20130325205532.log 
```

我假设你的程序是一个 cron 并且每秒不会运行超过一次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T01:10:14.297

获取文件的创建时间取决于您使用的文件系统。
并非所有文件系统都支持检索文件创建时间。尝试：

```
stat --format=%w applist.log 
```

如果您得到一个“-”，则您的文件系统不会*报告*创建时间。否则，它会打印时间。

如果您以这种方式获得创建时间，则可以使用以下方法进行移动：

```
fileName="applist.log"  
creationTimeEpoch="$(stat --format=%W "${fileName}")"  
creationTime="$(date +%Y%m%d_%H%M%S --date="@${creationTimeEpoch}")"  
mv -i "${fileName}" "${fileName%.log}_${creationTime}.log" 
```

如果没有，您可以使用文件的修改时间：

```
fileName="applist.log"  
modificationTime="$(date +%Y%m%d_%H%M%S --reference="${fileName}")"  
mv -i "${fileName}" "${fileName%.log}_${modificationTime}.log" 
```

# javascript - 删除用户输入上 textarea 周围的红色边框（已加载 ajax）

> ID：15606454
> 
> 赞同：1
> 
> 时间：2013-03-25T01:49:42.267
> 
> 标签：javascript, jquery

我在这样的页面上有一个 textarea 和一个按钮：

```
<div id="add_comment_container">
    <textarea id="comment_field" rows="4" cols="40"></textarea>
    <button id="add_comment">Add</button>
</div> 
```

如果用户点击添加按钮而不在 textarea 字段中输入文本，我会显示一条消息并在 textarea 字段周围添加一个红色边框。我要做的是在用户开始输入文本区域时删除该边框。问题是文本区域和按钮是通过 ajax 加载的（因此它们稍后会添加到 DOM 中）。

我尝试像这样使用 .delegate() 函数，但 keyup 事件甚至没有执行：

```
$('#add_comment_container').delegate('#comment_field', 'keyup', function(){
    $(this).css('border', '');
}); 
```

请问有什么帮助吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T01:53:44.190

**[jsFiddle 演示](http://jsfiddle.net/Z8VFS/)**

这里有两个问题。您正在委托一个不存在的元素。使用“身体”。此外，您需要设置不同的 css 样式以移除焦点边框，即：`outline to 0px`

来自演示的 html

```
<div id="main"></div> 
```

来自演示的 js

```
var response = '<div id="add_comment_container"><textarea id="comment_field" rows="4" cols="40"></textarea><button id="add_comment">Add</button></div>';
$("body").delegate('#comment_field', 'keyup', function(){
 $(this).css('outline', '0px');
});
setTimeout(function(){
   $('#main').html(response);
 },1000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T01:55:01.017

将边框设置为空值将不起作用。您需要将其设置为“无”或其他值。

# html - 图例表单中的水平表单

> ID：15606455
> 
> 赞同：0
> 
> 时间：2013-03-25T01:49:47.283
> 
> 标签：html, css, twitter-bootstrap

如何将水平表单添加到图例表单？当我尝试这样做时，水平形式看起来不应该：http: [//i.imgur.com/tJAT5k4.png](http://i.imgur.com/tJAT5k4.png)

**这是我的代码：**

```
<form>
 <fieldset>
 <legend>Legend Text</legend>
 <form class="form-horizontal">
   <div class="control-group">
   <label class="control-label" for="inputEmail">Email</label>
   <div class="controls">
   <input type="text" id="inputEmail" placeholder="Email">
   </div>
   </div>
   <div class="control-group">
   <label class="control-label" for="inputPassword">Password</label>
   <div class="controls">
   <input type="password" id="inputPassword" placeholder="Password">
   </div>
   </div>
   <div class="control-group">
   <div class="controls">
   <label class="checkbox">
   <input type="checkbox"> Remember me
   </label>
   <button type="submit" class="btn">Sign in</button>
   </div>
   </div>
 </form>
 </fieldset>
</form> 
```

所有的 CSS 都是 bootstrap 默认的 CSS。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T01:56:21.537

移除外部`<form>`标签。

```
<fieldset>
 <legend>Legend Text</legend>
 <form class="form-horizontal">
   <div class="control-group">
   <label class="control-label" for="inputEmail">Email</label>
   <div class="controls">
   <input type="text" id="inputEmail" placeholder="Email">
   </div>
   </div>
   <div class="control-group">
   <label class="control-label" for="inputPassword">Password</label>
   <div class="controls">
   <input type="password" id="inputPassword" placeholder="Password">
   </div>
   </div>
   <div class="control-group">
   <div class="controls">
   <label class="checkbox">
   <input type="checkbox"> Remember me
   </label>
   <button type="submit" class="btn">Sign in</button>
   </div>
   </div>
 </form>
</fieldset> 
```

# c# - 遍历 Microsoft.TeamFoundation.WorkItemTracking.Client.WorkItem' 链接属性很慢

> ID：15606457
> 
> 赞同：2
> 
> 时间：2013-03-25T01:51:09.847
> 
> 标签：c#, tfs, processing-efficiency

我的目的是获取 WorkItems 的父子链接类型的链接关系。

处理 165 s需要**90s**`WorkItem`，而微软的 Team Explorer 仅使用**3s**来显示相同​​的结果。

```
foreach (WorkItem wi in wic)    //165 count,and takes 90s to process  
{  
    foreach(WorkItemLink wil in wi.WorkItemLinks) //I only need Parent and Child linktype
    {  
        string linktype = wil.LinkTypeEnd.Name.ToString();  
        if (linktype == "Parent")  
        {  
            //some;  
        }  
        else if (linktype == "Child")  
        {  
            //some;  
        }  
    }  
} 
```

# android - 使用 Parcelable 是在应用程序之间发送数据的正确方式吗？

> ID：15606460
> 
> 赞同：7
> 
> 时间：2013-03-25T01:52:03.497
> 
> 标签：android, marshalling, unmarshalling, parcelable, multiple-processes

我试图了解如何在 Android 中的应用程序之间进行通信——而不仅仅是在`Activity`实例之间。

我设置了一个“客户端”，将 Messenger obj 发送到服务（在`Intent`发送到服务中）；该服务创建一个`Message`obj 并使用`messenger.send(message)`. 这工作正常，直到我尝试使用 Message.obj 来保存一个对象。

我在服务中创建了自己的`Parcelable`类`MyParcelable`并将其放入消息中。一切正常，直到消息在“客户端”中解组。解组失败，因为“客户端”无权访问`MyParcelable`该类。这很明显 - 它们位于不同的包中（比如`com.whatever.myclient`和`com.whatever.myserver`）。这完全是错误的方法吗？

我也尝试过创建一个`Parcel`并发送它（两个应用程序都可以访问该类） - 但`Parcel`不是`Parcelable`. 我已阅读有关正在使用的类加载器的信息，但不了解如何在单独的应用程序（进程，如果我了解这方面的 Android 架构）中分离类加载器。也就是说，一个类加载器如何“教授”另一个类加载器中存在的类？似乎应该有一个明显的“这就是你的做法”，但我还没有看到。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T02:43:31.550

您不能在不了解此类的进程中解组该类（正如您已经正确指出的那样）。如果你想`MyParcelable`被发送到你的`Service`，那么你需要`MyParcelable`在`Service`构建时包含，**并且**包含`ClassLoader`在解组时使用的权利，因为解组是由系统线程完成的，它不知道什么`MyParcelable`，因为解组是由系统线程完成的，即使你包含它是什么在编译时。

*编辑*：

> (a) 将 MyParcelable 包含到 2 个不同的 pkg 中，并将它们视为同一类

创建一个公共类库并将其包含在两个应用程序（应用程序和`Service`）中。您可以将其标记为 Android 库（在 Eclipse 中，它位于项目的 Android 属性下）或将其导出为 JAR 并在两个应用程序中导入。*在库中拥有独立*的类而不是直接将它们放在应用程序中总是一个好主意。这样你就可以在其他项目中重复使用它们；）

> (2) 包括正确的类加载器（例如，我从哪里获得正确的类加载器）

执行代码时，您可以`ClassLoader`从当前线程中获取。显然，这`ClassLoader`知道您的类，因为它正在执行您的代码；）例如`Activity#onCreate()`，您可以在`Thread.currentThread.getContextClassLoader()`. 由于您的`MyParcelable`课程也包含在 中`Service`，因此您可以执行相同的操作来获得有效`ClassLoader`的解组。

IPC 的另一个解决方案是定义一个[AIDL 接口](http://developer.android.com/guide/components/aidl.html)，这样您就不必实现`Parcelable`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T02:58:07.430

如果您不想在某处使用持久层（我使用云 API），您可以在单独的进程中运行服务并将需要共享值持有者类型对象数据的相应应用程序绑定到该服务。该服务将是您代表连接（绑定）应用程序构建和获取 obj 值的地方。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T03:44:19.130

好的，我找到了我正在寻找的“简单方法”。您可以将 Bundle 放入 Message.obj 字段中。Bundle 是 Parcelable 的，因此可以在客户端和服务器之间传输。服务器不知道它正在接收什么类是没有问题的，因为 Bundle 是“内置”到 Android Java 中的。并且 Bundle 显然可以在 in 中包含“子捆绑包”。这比确保双方都知道用户定义类的定义要简单。感谢上面的答案 - 我当然很感激这些信息！

# sparql - 在 sparql 中搜索部分匹配的字符串

> ID：15606464
> 
> 赞同：0
> 
> 时间：2013-03-25T01:52:38.137
> 
> 标签：sparql

假设我有一个如下所示的 RDF 图：

```
entity1 [
    title [ obect1.svg]       
    description [
         "This is sentence 1\.  This is sentence 2." ]
         ] .
entity2 [
    title [ obect2.svg]       
    description [
         "This is sentence 3\.  This is sentence 4." ]
].
entity3 [
    title [ obect3.svg]       
    description [
         "This is sentence 1\.  This is sentence 4." ]
] . 
```

我将如何编写查询来查找这是第 2 句？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T08:46:11.503

见[http://www.w3.org/TR/sparql11-query/#func-strings](http://www.w3.org/TR/sparql11-query/#func-strings)

函数`REGEX`或`CONTAINS`.

# php - IF 在 WHILE 内（使用未定义的常量）

> ID：15606467
> 
> 赞同：0
> 
> 时间：2013-03-25T01:52:54.637
> 
> 标签：php, if-statement, while-loop, undefined

我对每个员工都有一个暂停的布尔值。在表格中显示工作人员时，我想显示文本“暂停”或“未暂停”而不是 1 或 0。

我不断收到错误，注意：使用未定义的常量 Staff_Suspension - 假定为'Staff_Suspension' 我确定这对 php 来说很简单，我只是卡住了，不想再浪费时间试图解决这个问题，却一无所获。帮助表示赞赏

```
while ($row = mysql_fetch_array($result, MYSQL_ASSOC))
{
    echo "\t<tr>\n";
        echo "\t\t<td> $row[Staff_ID] </td>\n";
        echo "\t\t<td> $row[Staff_Forename] </td>\n";
        echo "\t\t<td> $row[Staff_Surname] </td>\n";
        echo "\t\t<td> $row[Staff_Email] </td>\n";
        echo "\t\t<td>";

        if ($row[Staff_Suspension] == 1){
            echo 'Suspended';
        } else if ($row[Staff_Suspension] == 0){
            echo 'Not Suspended';
        }

        echo "</td>\n";
        echo "\t\t<td> $row[Staff_Delete_Permissions] </td>\n";
    echo "\t</tr>\n";

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T02:04:38.407

**回答：**

```
while ($row = mysql_fetch_array($result, MYSQL_ASSOC))
{
    echo "\t<tr>\n";
        echo "\t\t<td>". $row['Staff_ID'] ".</td>\n";
        echo "\t\t<td>". $row['Staff_Forename'] ."</td>\n";
        echo "\t\t<td>". $row['Staff_Surname']". </td>\n";
        echo "\t\t<td>". $row['Staff_Email'] ".</td>\n";
        echo "\t\t<td>";

        if ($row['Staff_Suspension'] == 1){
            echo 'Suspended';
        } else if ($row['Staff_Suspension'] == 0){
            echo 'Not Suspended';
        }

        echo "</td>\n";
        echo "\t\t<td>". $row['Staff_Delete_Permissions'] ".</td>\n";
    echo "\t</tr>\n";

} 
```

**粗略解释**

常量的使用主要来自于`define();` 你不需要一个变量来获取**常量值**

出现此错误的原因来自以下几行：

```
 if ($row[Staff_Suspension] == 1){
        echo 'Suspended';
    } else if ($row[Staff_Suspension] == 0){
        echo 'Not Suspended';
    } 
```

因为您通过名称指定数组的键。你应该用引号括起来，双引号或单引号由你决定。

常量示例：

```
define ('Name', 'ConstantValue');
echo Name; 
```

这将输出：`ConstantValue`

现在，通过阅读以上内容：

[http://php.net/manual/en/function.define.php](http://php.net/manual/en/function.define.php)

该链接是对常量值的粗略解释。

现在针对您的具体问题。

`$row[Staff_Suspension]` 您已经定义了一个常量值，因为这是一个列名，所以应该用引号括起来。

如果您从键号指定： `$row[0];` 这是一个不同的故事，与您的问题无关。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T02:04:30.487

您必须引用索引。否则，PHP 假定您已经[定义了一个](http://php.net/manual/en/function.define.php)名为`Staff_Suspension`. 如果不存在这样的常量，则假定您要指定字符串文字。引用消除了任何猜测工作（因此，任何通知）：

```
if ($row['Staff_Suspension'] == 1) {
    echo 'Suspended';
} elseif ($row['Staff_Suspension'] == 0) {
    echo 'Not Suspended';
} 
```

或者，简化：

```
echo $row['Staff_Suspension'] ? 'Suspended' : 'Not Suspended'; 
```

# javascript - 使用现代 Web 框架（特别是 meteor.js）进行浏览器检测

> ID：15606468
> 
> 赞同：0
> 
> 时间：2013-03-25T01:52:58.987
> 
> 标签：javascript, browser, cross-browser

因此，我正在使用meteor.js 编写和应用程序，并尝试将其展示给使用古老浏览器的人。该网站完全搞砸了，可能是因为混合了不受支持的 CSS、javascript 和 html 功能。

没有适度现代的浏览器（IE9 +等......），将任何人踢到路边的最佳方法是什么？

在我们超越自己之前

*   首先，我不想做特征检测（我不知道meteor需要什么特征，尽管我看到一些建议它甚至可以在IE6上工作）
*   其次，我不想在过时的浏览器上进行测试（所以即使功能检测可以工作，我也不想努力确保它可以在最新的浏览器上运行）
*   第三，不想付出任何努力来支持旧版浏览器并且对使用它们的人没有同情心，这难道是错误的吗？

# android - Android - 在每周的特定日期/时间启动 IntentService

> ID：15606470
> 
> 赞同：0
> 
> 时间：2013-03-25T01:53:13.753
> 
> 标签：android, broadcastreceiver, boot, intentservice

我正在开发一个具有 IntentService 的应用程序，该应用程序显示带有本地场地放映时间的通知。我希望每周五早上 5 点或周五早上开机时调用 IntentService。

最好的方法是什么？

现在我正在考虑有一个父 IntentService 将在每次启动时启动并检查它是哪一天并相应地运行子服务，但我不知道如何处理用户不重启的情况。

另外，我如何在启动时只运行 IntentService 而不是整个 GUI？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T01:59:56.897

您可以使用[AlarmManager](http://developer.android.com/reference/android/app/AlarmManager.html)并使用[setRepeating()](http://developer.android.com/reference/android/app/AlarmManager.html#setRepeating%28int,%20long,%20long,%20android.app.PendingIntent%29)方法设置每周同时响起的警报。

您的启动要求可能不值得付出努力，因为很少有人经常重启他们的移动设备。我个人已经几个月没有关闭手机了。

但是，您不需要父服务。您可以检查子服务首次启动的日期，如果不是星期五，则让它自行终止。

# java - 寻找离玩家最近的物体（障碍物）

> ID：15606473
> 
> 赞同：0
> 
> 时间：2013-03-25T01:53:48.807
> 
> 标签：java, oop, object, coordinates, distance

我有一个程序可以检查距离以及玩家是否与障碍物发生碰撞。我现在正在尝试计算障碍数组中的哪个障碍最接近移动的玩家，然后返回该障碍的索引。

这是我到目前为止所拥有的：

```
 public static int closestBarrier(GameObject object, GameObject[] barriers)
// TODO stub
{
    int closest = 0;

    for (int i = 0; i < barriers.length - 1; i++) {

        if (Math.sqrt((object.getX() - barriers[i].getX())
                * (object.getX() - barriers[i].getX()))
                + ((object.getY() - barriers[i].getY()) * (object.getY() - barriers[i]
                        .getY())) <= Math
                .sqrt((object.getX() - barriers[i + 1].getX())
                        * (object.getX() - barriers[i + 1].getX()))
                + ((object.getY() - barriers[i + 1].getY()) * (object
                        .getY() - barriers[i + 1].getY()))) {

            closest = i;
        } else
            closest = i + 1;

    }

    return closest;
} 
```

我对 java 还是很陌生，所以我知道我已经拥有的可能不是很有效或最好的方法（甚至完全正确！？）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T13:47:03.783

我会像这样重构它更简单一点：

```
public static int closestBarrier(GameObject object, GameObject[] barriers)
    {
        int closest = -1;
        float minDistSq = Float.MAX_VALUE;//ridiculously large value to start
        for (int i = 0; i < barriers.length - 1; i++) {
            GameObject curr = barriers[i];//current
            float dx = (object.getX()-curr.getX()); 
            float dy = (object.getY()-curr.getY()); 
            float distSq = dx*dx+dy*dy;//use the squared distance
            if(distSq < minDistSq) {//find the smallest and remember the id
                minDistSq = distSq;
                closest = i;
            }
        }

        return closest;
    } 
```

这样您就可以减少距离检查（您的版本每次迭代进行两次距离检查）并且您只需要 id，而不是实际距离，因此您可以通过不使用`Math.sqrt()`并简单地使用平方距离来获得一点速度.

我能想到的另一个想法取决于布局。假设您有一个自上而下的垂直滚动条，您首先要检查障碍物的 y 属性。如果您有它们的散列或排序列表，对于屏幕底部的对象，您将开始从最大的 y 障碍到最小的循环。在 Y 轴上找到最近的障碍后，如果超过 1 个，您可以在 x 轴上检查最近的障碍。您不需要使用平方或平方根，因为您基本上将检查从每个障碍的 2D 中的 1 个检查拆分为 1D 中的 2 个检查，缩小障碍并丢弃远处的障碍，而不是一直检查每个**对象**.

更高级的版本将使用[空间分区](http://en.wikipedia.org/wiki/Collision_detection#Spatial_partitioning)，但希望您在学习时不需要它来进行简单的游戏。

# java - 在 Servlet 类中创建会话

> ID：15606474
> 
> 赞同：0
> 
> 时间：2013-03-25T01:53:51.637
> 
> 标签：java, servlets

我想在没有浏览器请求的情况下创建新会话。只有一个目的是存储来自其他系统的 API 的数据（我将创建计时器调度程序以从 API 获取数据）然后处理它。

我使用tomcat服务器。我在 web.xml 中配置如下：

```
<?xml version="1.0" encoding="UTF-8"?>
 <web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"    xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID" version="2.5">
<display-name>TestSession</display-name>
<servlet>
  <servlet-name>initSmsSchedule</servlet-name>
  <servlet-class>test.TestSession</servlet-class>
   <load-on-startup>2</load-on-startup>
</servlet> 
```

和我的 TestSession.java 类：

```
public class TestSession extends HttpServlet {

   public void init(ServletConfig config) throws ServletException {
     super.init(config);

     //I want to create a HttpSession in here

  } 
```

所以有了这个配置。当tomcat启动时，它将运行到TestSession中的init()方法。

在 init() 方法中，我想在这里创建一个 HttpSession。我该怎么办？

（通常我们通常会在收到来自浏览器的请求时收到请求中的会话。但在我的情况下，我们不能，因为它是从应用程序本身调用的）谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T03:36:26.387

根据定义，会话是存储用户数据的地方。

如果您没有将提出请求的用户，则无法为他们创建会话。

您说您想从另一个 API 获取一些数据并对其进行处理，如果是这样，您为什么需要将这些数据保留在会话中？

如果来自 API 的数据是针对每个用户的，那么您可以将其存储在该用户会话中，如果是针对整个应用程序，您可以将其存储在应用程序级别并根据需要进行刷新。

这是如果数据需要在处理之前存储在内存中，在检索之后的某个时间。否则为什么不直接从调度程序处理它呢？

您的解决方案对我来说似乎有点误导，但可能是我遗漏了一些明显的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T05:45:49.577

您的问题中的问题是通信的多样性及其相互关联性，这通常被理解为 Web 应用程序中的范围界定。

简单地说，您不能从应用程序范围的 bean 或 servlet 访问会话，也不能从会话访问请求范围的数据。另一方面，反之亦然：您可以从会话访问应用程序数据，并从请求范围的上下文访问会话数据（当然要记住可能的并发问题）。

如果您仔细考虑，这很有意义：您如何从以下位置访问会话数据`Servlet#init`：每个应用程序范围的上下文中有许多会话范围的对象。相反，您可以创建一个应用程序范围的 bean，它与数据范围具有一一对应的关系。

最后，除了 Thihara 的回答，我想说创建 HTTP 会话所需的不是用户*本身*，而是至少一个不同的请求，无论是通过用户身份验证、匿名访客的操作（如创建购物车或计算机机器人）通过您的 Web 应用程序进行爬网。在这方面，如其他地方所述，会话将与发起该请求的主题相关联（对会话有一些操作）。

要着手解决问题的可能方法，您必须仔细重新考虑 Web 应用程序的数据范围。SO上有很多很好的答案，包括最近的答案，解决了我的问题，我会留给你去寻找。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T13:31:09.343

我认为 Web 应用程序中可用的不同范围是用于存储内容的不同框。

在我看来，您希望将来自其他 API 的数据存储在会话范围内，尽管没有会话。我认为将它存储在会话中根本不会对您有任何好处-它只能从同一个会话中访问，并且当会话到期时（在启动 tomcat 后不久）将根本无法访问数据. 那有什么意义呢？

如果您存储在应用程序范围内，则可以从任何其他（真实）会话访问数据。

从 servlet，可以通过以下方式访问应用程序 (Servlet) 范围：

```
getServletContext().setAttribute("key", object);  
Object object = getServletContext().getAttribute("key"); 
```

就像 Session 范围一样，它仍然由 Map 支持。

# calayer - 从非零时间开始 CAKeyframeAnimation

> ID：15606475
> 
> 赞同：0
> 
> 时间：2013-03-25T01:53:52.200
> 
> 标签：calayer, cakeyframeanimation

我定义了一个子层关键帧动画，用于沿 BSpline 对图像进行动画处理，并与旋转动画组合在一起。将 sub-layer.speed 设置为 0，我可以通过根据拖动距离调整 animationsGroup.timeOffset 值沿曲线来回拖动图像。我想要做的是，在某个阈值（比如 %15）之后将动画速度设置为 1，以便动画自行完成，但这并不是那么简单。动画要么立即完成并将所有内容重置回起始位置，要么动画到达路径的末端，循环到零，然后继续动画，直到它回到动画开始的位置。

我想要的是：

Tstart -> 拖动 -> T0.15 -> 动画 -> Tend

但我得到的是

Tstart -> 拖动 -> T0.15 -> 动画 -> Tend -> Tstart -> T0.15

我已经研究了 timeOffset 和 time-warps 的使用，并摆弄了参数但无济于事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T20:29:34.387

您可以通过将动画组包装在一个新的动画组中来获得该结果，该动画组的持续时间是动画组持续时间的 0.85 倍。这里有一些代码可以做到这一点：

```
- (void) setTimeOffset:(double)value
{
    if (value < 0.15) {

        // This is what you are already doing.
        _animGroup.timeOffset = value;
        [_someSublayer addAnimation:_animGroup forKey:@"animGroup"];

    } else if (_animGroup.speed == 0.0) {

        // You must set the final position before animating otherwise the 
        // layer will come back to it's original position.

        _someSublayer.position = _theEndPointOfYourPath;

        // Now set the speed of the animation group to 1 so that it animates.
        // Be sure to leave the timeOffset alone so that is starts where you want it.

        _animGroup.speed = 1.0;

        // Create a new animation group around it whose duration is the remaining time
        // of the animation group and add that to the layer instead. It will prevent
        // animGroup from wrapping.

        CAAnimationGroup *outerGroup = [[CAAnimationGroup alloc] init];
        outerGroup.animations = @[_animGroup];
        outerGroup.duration = _animGroup.duration - _animGroup.timeOffset;

        [_someSublayer addAnimation:outerGroup forKey:@"animGroup"];
    }    
} 
```

# javascript - setInterval() 如何与 button.onclick 一起工作

> ID：15606480
> 
> 赞同：2
> 
> 时间：2013-03-25T01:54:48.250
> 
> 标签：javascript, setinterval

我希望仅在单击按钮时才调用 alertMe 函数，但只要页面加载，它就会被调用（调用 setInterval 来调用它）。但是如果我把 pageLoad 函数拿走，那么 startButton 是空的，我不能用它做任何事情。提前谢谢大家！

```
/when user clicks start, start the animation
window.onload = pageLoad;

function pageLoad() {
    var startButton = document.getElementById("start");

    startButton.onclick = setInterval(alertMe,200);
}

function alertMe() {
  alert("hi");
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-25T01:57:28.907

```
function pageLoad() {
    var startButton = document.getElementById("start");

    startButton.onclick = alertMe;
}

function alertMe() {
  setInterval(function(){
    alert("hi");
  },200);
} 
```

将您的区间移动到`alertMe`函数内，并将其作为引用传递给`startButton.onclick`

演示：http: [//jsfiddle.net/gHS4a/](http://jsfiddle.net/gHS4a/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T01:58:10.973

基本上你需要这样做：

```
startButton.onclick = function() {
    interval = setInterval(alertMe, 200);
} 
```

它的作用是发送对`alertMe`函数的引用

另一种方法是：

```
startButton.onclick = function() {
    interval = setInterval(function(){
        alertMe();
    }, 200);
} 
```

这将发送对匿名函数的引用，该函数将调用该`alertMe`函数

# php - 替换数组值

> ID：15606491
> 
> 赞同：2
> 
> 时间：2013-03-25T01:56:28.597
> 
> 标签：php, arrays

新手来了 我正在尝试创建一个 WordPress 插件，我得到以下代码来显示字体选择的下拉菜单。它可以工作，但看起来只是错误且效率不高，在不编写那些 if 语句的情况下更改数组的值以进行显示的方法是什么？

```
$plugin_options = get_option('plugin_options');
$plugin_fonts_array = array('Chunk', 'Crimson', 'Deja Vu Sans', 'Deja Vu Sans Condensed', 'Deja Vu Mono', 'Deja Vu Serif', 'Deja Vu Serif Condensed', 'IM Fell French Canon', 'Junction', 'Lato Light', 'Lato Regular', 'Lato Black', 'League Gothic Condensed', 'League Gothic Regular', 'League Script Number One', 'Linux Libertine', 'Linux Libertine Display', 'Linux Libertine Mono', 'OCRB', 'Open Baskerville', 'Open Sans Light', 'Open Sans', 'Open Sans Semi Bold', 'Open Sans Extra Bold', 'Prociono', 'Raleway Thin', 'Source Sans Pro Extra Light', 'Source Sans Pro Light', 'Source Sans Pro', 'Source Sans Pro Semi Bold', 'Source Sans Pro Black');
foreach ($plugin_fonts_array as $font) {
    if ($font == $plugin_options['dropdown1']) {
        $plugin_front_font = $plugin_options['dropdown1'];      
    if ($plugin_front_font == 'Chunk') { $plugin_front_font = 'chunk'; }
    if ($plugin_front_font == 'Crimson') { $plugin_front_font = 'crimson'; }
    if ($plugin_front_font == 'Deja Vu Sans') { $plugin_front_font = 'DejaVuSans'; }
    if ($plugin_front_font == 'Deja Vu Sans Condensed') { $plugin_front_font = 'DejaVuSansCondensed'; }
    if ($plugin_front_font == 'Deja Vu Mono') { $plugin_front_font = 'DejaVuSansMono'; }
    if ($plugin_front_font == 'Deja Vu Serif') { $plugin_front_font = 'DejaVuSerif'; }
    if ($plugin_front_font == 'Deja Vu Serif Condensed') { $plugin_front_font = 'DejaVuSerifCondensed'; }
    if ($plugin_front_font == 'IM Fell French Canon') { $plugin_front_font = 'imfellfrenchcanon'; }
    if ($plugin_front_font == 'Junction') { $plugin_front_font = 'junction'; }
    if ($plugin_front_font == 'Lato Light') { $plugin_front_font = 'latolight'; }
    if ($plugin_front_font == 'Lato Regular') { $plugin_front_font = 'latoregular'; }
    if ($plugin_front_font == 'Lato Black') { $plugin_front_font = 'latoblack'; }
    if ($plugin_front_font == 'League Gothic Condensed') { $plugin_front_font = 'leaguegothiccondensedregular'; }
    if ($plugin_front_font == 'League Gothic Regular') { $plugin_front_font = 'leaguegothicregular'; }
    if ($plugin_front_font == 'League Script Number One') { $plugin_front_font = 'leaguescriptnumberone'; }
    if ($plugin_front_font == 'Linux Libertine') { $plugin_front_font = 'linuxlibertine'; }
    if ($plugin_front_font == 'Linux Libertine Display') { $plugin_front_font = 'linuxlibertinedisplay'; }
    if ($plugin_front_font == 'Linux Libertine Mono') { $plugin_front_font = 'linuxlibertinemono'; }
    if ($plugin_front_font == 'OCRB') { $plugin_front_font = 'ocrb10'; }
    if ($plugin_front_font == 'Open Baskerville') { $plugin_front_font = 'openbaskerville'; }
    if ($plugin_front_font == 'Open Sans Light') { $plugin_front_font = 'opensanslight'; }
    if ($plugin_front_font == 'Open Sans') { $plugin_front_font = 'opensans'; }
    if ($plugin_front_font == 'Open Sans Semi Bold') { $plugin_front_font = 'opensanssemibold'; }
    if ($plugin_front_font == 'Open Sans Extra Bold') { $plugin_front_font = 'opensansextrabold'; }
    if ($plugin_front_font == 'Prociono') { $plugin_front_font = 'prociono'; }
    if ($plugin_front_font == 'Raleway Thin') { $plugin_front_font = 'ralewaythin'; }
    if ($plugin_front_font == 'Source Sans Pro Extra Light') { $plugin_front_font = 'sourcesansproextralight'; }
    if ($plugin_front_font == 'Source Sans Pro Light') { $plugin_front_font = 'sourcesansprolight'; }
    if ($plugin_front_font == 'Source Sans Pro') { $plugin_front_font = 'sourcesanspro'; }
    if ($plugin_front_font == 'Source Sans Pro Semi Bold') { $plugin_front_font = 'sourcesansprosemibold'; }
    if ($plugin_front_font == 'Source Sans Pro Black') { $plugin_front_font = 'sourcesansproblack'; }
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T02:02:02.913

我只是制作一个关联数组：

```
$plugin_options = get_option('plugin_options');

$font_map = array(
    'Chunk' => 'chunk',
    'Crimson' => 'crimson',
    'Deja Vu Sans' => 'DejaVuSans',
    'Deja Vu Sans Condensed' => 'DejaVuSansCondensed',
    'Deja Vu Mono' => 'DejaVuSansMono',
    'Deja Vu Serif' => 'DejaVuSerif',
    'Deja Vu Serif Condensed' => 'DejaVuSerifCondensed',
    'IM Fell French Canon' => 'imfellfrenchcanon',
    'Junction' => 'junction',
    'Lato Light' => 'latolight',
    'Lato Regular' => 'latoregular',
    'Lato Black' => 'latoblack',
    'League Gothic Condensed' => 'leaguegothiccondensedregular',
    'League Gothic Regular' => 'leaguegothicregular',
    'League Script Number One' => 'leaguescriptnumberone',
    'Linux Libertine' => 'linuxlibertine',
    'Linux Libertine Display' => 'linuxlibertinedisplay',
    'Linux Libertine Mono' => 'linuxlibertinemono',
    'OCRB' => 'ocrb10',
    'Open Baskerville' => 'openbaskerville',
    'Open Sans Light' => 'opensanslight',
    'Open Sans' => 'opensans',
    'Open Sans Semi Bold' => 'opensanssemibold',
    'Open Sans Extra Bold' => 'opensansextrabold',
    'Prociono' => 'prociono',
    'Raleway Thin' => 'ralewaythin',
    'Source Sans Pro Extra Light' => 'sourcesansproextralight',
    'Source Sans Pro Light' => 'sourcesansprolight',
    'Source Sans Pro' => 'sourcesanspro',
    'Source Sans Pro Semi Bold' => 'sourcesansprosemibold',
    'Source Sans Pro Black' => 'sourcesansproblack'
);

$dropdown_font = $plugin_options['dropdown1'];

if (array_key_exists($dropdown_font, $font_map)) {
    $plugin_front_font = $font_map[$dropdown_font];
} else {
    echo "Invalid font";
} 
```

尽管由于大多数字体名称都是小写且没有标点符号，但您也可以创建一个通用函数，然后只考虑特殊情况。

不管怎样，这段代码太复杂了。为什么需要这样做？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T02:04:55.867

你可以尝试这样的事情：

```
$plugin_options = get_option('plugin_options');
$plugin_fonts_array = array('Chunk', 'Crimson', 'Deja Vu Sans', 'Deja Vu Sans Condensed', 'Deja Vu Mono', 'Deja Vu Serif', 'Deja Vu Serif Condensed', 'IM Fell French Canon', 'Junction', 'Lato Light', 'Lato Regular', 'Lato Black', 'League Gothic Condensed', 'League Gothic Regular', 'League Script Number One', 'Linux Libertine', 'Linux Libertine Display', 'Linux Libertine Mono', 'OCRB', 'Open Baskerville', 'Open Sans Light', 'Open Sans', 'Open Sans Semi Bold', 'Open Sans Extra Bold', 'Prociono', 'Raleway Thin', 'Source Sans Pro Extra Light', 'Source Sans Pro Light', 'Source Sans Pro', 'Source Sans Pro Semi Bold', 'Source Sans Pro Black');
$plugin_fonts_flipped_array = array_flip($plugin_fonts_array);
foreach ($plugin_fonts_array as $font) {
    if ($font == $plugin_options['dropdown1']) {
    $plugin_front_font = $plugin_options['dropdown1'];
        if(isset($plugin_fonts_flipped_array[$plugin_front_font])){
            $plugin_front_font = strtolower(str_replace(' ', '', $plugin_front_font)); // remove the whitespace and convert to lower space
        }
    }
} 
```

# html - 表头间距相等

> ID：15606495
> 
> 赞同：0
> 
> 时间：2013-03-25T01:56:45.840
> 
> 标签：html, html-table, navbar, dreamweaver

我目前正在为我的 Arma 2 部队（第 88 空降师）创建一个练习网站，我使用超链接的表头创建了一个简单的导航栏，但是表头之间的空间取决于单词的长度。有没有办法让标题之间的空间相等？

HTML 代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>88th Airborne Division</title>
<link href="style.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="container">
  <div id="banner"><img src="images/logo.png" width="680" height="125" alt="logo" /></div>
  <div id="navbar"><table width="680" border="0">
  <tr>
    <th>Home</th>
    <th>About Us</th>
    <th>Members</th>
    <th>Apply</th>
  </tr>
</table>
</div>
</div>
</body>
</html> 
```

代码：

```
*{
    margin:0;

    }

#container {
    height: 100%;
    width: 100%;
}
#banner {
    height: 125px;
    width: 680px;
    margin-left:auto;
    margin-right:auto;
}

#navbar {
    background-color:#333;
    width: 680px;
    height:25px;
    margin-right: auto;
    margin-left: auto;
    text-align:center;
}
th{
    border-right-width:medium;
    border-right-color:#000;
    border-right-style:groove;

    } 
```

![在此处输入图像描述](../Images/a64fe77406a037c41cbdf274075ce92d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T02:09:01.507

因为`table width=680`，你可以放入 CSS `tr{ width: 170px; }`，或者，你可以`th`在 CSS中改变

```
tr{  
    position: relative; /* you may put it out, maybe it will work without it */
}

th{
    border-right-width:medium;
    border-right-color:#000;
    border-right-style:groove;
    width: 25%;
} 
```

这为您提供更灵活的尺寸。另外，我不知道您是否有任何额外的边框或边距。如果是这样，`td`s 将不适合 25%（因为尺寸是在没有边距、填充和边框的情况下测量的），所以请使用它（降低百分比，直到你得到正确的外观）。

# cakephp - 如何知道 core.php 中的 webroot

> ID：15606496
> 
> 赞同：0
> 
> 时间：2013-03-25T01:57:17.063
> 
> 标签：cakephp

我正在使用 CakePHP 2.3.1。

我们的服务器在一台服务器上有一些独立的应用程序。所以我想按照[Cookbook](http://book.cakephp.org/2.0/en/development/sessions.html)`session.cookie_path`更改设置：

```
Configure::write('Session', array(
    'defaults' => 'php',
    'ini' => array(
        'session.cookie_path' => '/app/dir'
    )
)); 
```

我可以用这个成功地改变它。但这里有一个问题。我需要将`session.cookie_path`值设置为`webroot`动态（没有字符串文字值，例如`'/app/dir'`）。

我试过`$this->webroot`按照[这个 Q&A 使用](https://stackoverflow.com/questions/1182512/how-to-get-my-application-directory-name)，但它当然不起作用，因为文件中没有控制器`app/Config/core.php`。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T02:22:34.983

我意识到一个 php 变量是可用的：`$_SERVER['REQUEST_URI']`。所以我可以解决问题。

```
$requestURI = $_SERVER['REQUEST_URI'];
$webroot = preg_replace('/(^\/[^\/]+\/).*$/', '$1', $requestURI);
//echo $webroot;
Configure::write('Session', array(
    'defaults' => 'cake',
    'ini' => array(
        'session.cookie_path' => $webroot   // looks like '/app/'
    )
)); 
```

但是这个解决方案没有足够的可重用性：它不适用于位于更深目录的应用程序，例如`/apps/app1/`.

我仍在等待更好的解决方案。

# sql - 当右表与左表不匹配时，左连接将不返回任何结果

> ID：15606498
> 
> 赞同：0
> 
> 时间：2013-03-25T01:57:27.810
> 
> 标签：sql, database, sqlite

例如有两个表：*用户*和*评论*

*用户*

```
| id              | integer          
| name            | text 
```

*评论*

```
| id              | integer
| uid             | integer          
| comment         | text 
```

询问：

```
SELECT u.name, c.comment 
FROM   user u LEFT JOIN comment c ON c.uid = u.id 
WHERE  u.id = 1234; 
```

如果没有评论匹配用户，sql 将不返回任何结果，我想要一个用户结果（其 id 为 1234）即使没有评论匹配该用户，我应该如何修复 sql？

# mysql - 多个 auto_increment 字段

> ID：15606500
> 
> 赞同：0
> 
> 时间：2013-03-25T01:57:35.787
> 
> 标签：mysql

我有一个设置为 auto_increment 的唯一 PK 'id'。我有一个名为“标签”的第二个字段，它是一个字母数字字段（例如 W1000），旨在使用 PHP 逻辑在每次插入时递增。

“标签”字段可能有许多字母前缀之一，后跟递增数字。每个前缀应独立递增。例如，该表可能有 W1000 和 F1123。下一个 W 是 W1001，下一个 F 是 F1124。

当前方法（PHP 选择最大标签，插入最大标签 + 1）创建了一个竞争条件，偶尔我会得到一个重复的“标签”。我需要解决这些重复的“标签”并确保该字段是唯一的。如果有帮助，我愿意将前缀和数字分成两个字段。

实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T02:33:17.240

避免生成重复标签值的一种方法是使用 MyISAM 表来生成唯一的序列号。MyISAM 支持您需要的 AUTO_INCREMENT 行为。

请参阅 MySQL 参考[3.6.9 中的“MyISAM 注释”部分。使用 AUTO_INCREMENT](http://dev.mysql.com/doc/refman/5.5/en/example-auto-increment.html)

对于这种方法，您将创建一个单独的 MyISAM 表；该表的目的是生成唯一的序列号：例如

```
CREATE TABLE foo 
( prefix  VARHCAR(1) NOT NULL
, num     INT UNSIGNED AUTO_INCREMENT
, PRIMARY KEY (prefix, num)
) Engine=MyISAM 
```

假设标签前缀是一个字符，余数是一个数字：

```
INSERT INTO foo (prefix, num)
SELECT SUBSTR(t.label,1,1) AS prefix
     , MAX(SUBSTR(t.label,2,8) AS num
  FROM mytable
 GROUP BY SUBSTR(t.label,1,1) 
```

获取一个新的序列号，在新表中插入一行，为 prefix 提供一个值，为 num 列提供一个 NULL，然后检索为 num 列插入的值：

```
INSERT INTO foo (prefix,num) VALUES ('W',NULL); 
SELECT LAST_INSERT_ID(); 
```

您可以使用它来构造要用于`label`原始表中的列的值。

请注意，只有 MyISAM 引擎具有您想要的行为（为每个前缀分别递增 AUTO_INCREMENT 序列。）您的原始表可以是任何引擎。

这种方法避免了竞态条件，但确实引入了并发瓶颈，这是由于在 MyISAM 表上为插入而采取的排他锁。

* * *

避免竞争条件的另一种方法是在表上获得排他锁，然后执行 SELECT MAX()，然后执行插入，然后释放锁。但是这种方法引入了更多的并发瓶颈，序列化对单个资源的访问。

* * *

如果您的问题是关于识别现有的重复`label`值，那么此查询将为您提供具有“重复”标签的行。（这只是为每个重复的标签挑选一行。）

```
SELECT t.label
     , MAX(t.id)
  FROM mytable t
 GROUP BY t.label
HAVING COUNT(1) > 1 
```

要将标签更新为唯一，您需要为这些行生成一个新标签。

在一条 SQL 语句中完成这项工作有点棘手。我试图提出一个声明，但它被破坏了，我没有时间修复它。

# java - Java：获取项目的绝对路径

> ID：15606503
> 
> 赞同：1
> 
> 时间：2013-03-25T01:58:10.220
> 
> 标签：java, file-io

我正在尝试在当前包之外的路径中运行 exe 文件。我运行它的 code.java 文件在

```
%Workspace_path%\Project\src\main\java\com\util\code.java 
```

但是exe所在的目录

```
%Workspace_path%\Project\src\main\resources\program.exe 
```

如果可能的话，这里最好的解决方案似乎是获取项目的绝对路径，然后将“src\main\resources\”附加到它。有没有好的方法可以做到这一点，还是有替代的解决方案？我正在使用 Eclipse，但如果它也可以在其他 IDE 中使用，那就太好了。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T02:17:03.117

解决此问题的实际方法是将 EXE 捆绑为类路径资源。看来你已经安排好了。

使用类路径资源时，成熟的程序不应假定资源在文件系统中。资源可以打包在 JAR 文件中，甚至可以打包在 WAR 文件中。那时您唯一可以信任的是在 Java 中访问资源的标准方法，如下所示。

[`Class.getResourceAsStream`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Class.html#getResourceAsStream%28java.lang.String%29)那么，解决问题的方法是使用调用（或）的事实标准访问资源内容`ClassLoader.getResourceAsStream`，将内容保存到临时文件，然后从该文件执行。这将保证您的程序无论其包装如何都能正常工作。

换句话说：

1.  调用`getClass().getResourceAsStream("/program.exe")`. 从静态方法中，您不能调用`getClass`，因此请改用当前类的名称，如`MyClass.class.getResourceAsStream`. 这将返回一个`InputStream`.
2.  创建一个临时文件，最好使用[`File.createTempFile`](http://docs.oracle.com/javase/1.5.0/docs/api/java/io/File.html#createTempFile%28java.lang.String,%20java.lang.String%29). 这将返回一个`File`标识新创建文件的对象。
3.  打开`OutputStream`这个临时文件。
4.  使用这两个流将数据从资源复制到临时文件中。[`IOUtils.copy`](http://commons.apache.org/proper/commons-io//apidocs/org/apache/commons/io/IOUtils.html#copy%28java.io.InputStream,%20java.io.OutputStream%29)如果您喜欢 Apache Commons 工具，则可以使用。完成此步骤后，不要忘记关闭两个流。
5.  执行这样存储在临时文件中的程序。
6.  清理。

换句话说（后来添加的代码片段）：

```
private void executeProgramFromClasspath() throws IOException {
    // Open resource stream.
    InputStream input = getClass().getResourceAsStream("/program.exe");
    if (input == null) {
        throw new IllegalStateException("Missing classpath resource.");
    }

    // Transfer.
    OutputStream output = null;
    try {
        // Create temporary file. May throw IOException.
        File temporaryFile = File.createTempFile(getClass().getName(), "");

        output = new FileOutputStream(temporaryFile);
        output = new BufferedOutputStream(output);
        IOUtils.copy(input, output);
    } finally {
        // Close streams.
        IOUtils.closeQuietly(input);
        IOUtils.closeQuietly(output);
    }

    // Execute.
    try {
        String path = temporaryFile.getAbsolutePath();
        ProcessBuilder processBuilder = new ProcessBuilder(path);
        Process process = processBuilder.start();
        process.waitFor();
    } catch (InterruptedException e) {
        // Optional catch. Keeps the method signature uncluttered.
        throw new IOException(e);
    } finally {
        // Clean up
        if (!temporaryFile.delete()) {
            // Log this issue, or throw an error.
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T04:50:55.917

好吧，在您的上下文中，项目根目录恰好是*当前路径*

> **.**

，这就是 java.exe 开始执行的地方，所以一个简单的方法是：

```
String exePath="src\\main\\resources\\program.exe";
File exeFile=new File(".",exePath);
System.out.println(exeFile.getAbusolutePath());
... 
```

我在Eclipse上测试了这段代码，没问题。我认为应该在不同的ide上工作。祝你好运！

# c# - C# 数组实现对页面文件架构的支持

> ID：15606505
> 
> 赞同：0
> 
> 时间：2013-03-25T01:58:26.243
> 
> 标签：c#, memory-management

让我解释一下我需要完成什么。我需要将文件加载到 RAM 中并分析其结构。我正在做的是这样的：

```
//Stream streamFile;

byte[] bytesFileBuff = new byte[streamFile.Length];
if(streamFile.Read(bytesFileBuff, 0, streamFile.Length) == streamFile.Length)
{
    //Loaded OK, can now analyze 'bytesFileBuff'
    //Go through bytes in 'bytesFileBuff' array from 0 to `streamFile.Length`
} 
```

但在我[之前](https://stackoverflow.com/questions/15595061/outofmemoryexception-while-populating-memorystream-256mb-allocation-on-16gb-sys)使用 Windows 和 32 位进程的经验中，似乎更少量的 RAM 也很难分配。（在那个特定的例子中，我未能在安装了 16GB RAM 的 Windows 7 机器上分配 512MB。）

所以我很好奇，是否有一个特殊的类可以让我处理假设为任意长度的文件的内容（通过实现页面文件架构的内部模拟）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T03:13:09.267

如果线性流访问（即使是多次通过）不是一个可行的选项，Win32 中的解决方案是使用具有相对较小视图的内存映射文件。

我不认为你可以在 C# 中轻松做到这一点，但我错了。事实证明，.NET 4.0 及更高版本提供了包装内存映射文件 API 的类。

请参阅[http://msdn.microsoft.com/en-us/library/dd997372.aspx](http://msdn.microsoft.com/en-us/library/dd997372.aspx)

如果您在 C/C++ 中使用过内存映射文件，您将知道该怎么做。

基本思想是使用[MemoryMappedFileCreateFromFile](http://msdn.microsoft.com/en-us/library/dd988186.aspx)来获取[MemoryMappedFile](http://msdn.microsoft.com/en-us/library/dd267535.aspx)对象。使用该对象，您可以调用[CreateViewAccessor](http://msdn.microsoft.com/en-us/library/dd267577.aspx)方法来获取表示文件块的不同[MemoryMappedViewAccessor对象；](http://msdn.microsoft.com/en-us/library/dd267585.aspx)您可以使用这些对象从您选择的块中读取文件。确保您`MemoryamappedViewAccessors`努力释放内存缓冲区。

您必须制定正确的策略来使用内存映射文件。您不想创建太多的小视图，否则您将遭受大量开销。大视图太少，您将消耗大量内存。

（正如我所说，我不知道 .NET 中的这些类包装器。请仔细阅读 MSDN 文档：在我花在审查它们的几分钟内，我可能很容易错过了一些重要的东西）

# node.js - 一个文件监视所有 socket.io 连接

> ID：15606508
> 
> 赞同：1
> 
> 时间：2013-03-25T01:59:21.920
> 
> 标签：node.js, socket.io

我有一个监视文件更改的应用程序。文件更改后，将向所有 socket.io 客户端发出事件。这是代码：

```
io.sockets.on('connection', function(socket) {
    fs.watchFile('./file.txt', {persistent:true}, function(data) {
        socket.emit('server', {message: 'File changed'});
    });
}); 
```

我的问题是，上面的代码是否会运行与 socket.io 客户端连接一样多的文件监视进程？

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T08:45:19.267

是的，您的代码将在`fs.watchFile()`每次客户端连接到服务器时运行，而不是您可以尝试。

```
io.sockets.on('connection',function(socket){
 socket.emit('server',{message:'hello'});
});

// the code below will check for change every 100secs and emit a message to all clients of / , and inform that the file has changed
fs.watchFile('FILEPATH', {
    persistent: true,
    interval: 100000,
  },
  function(data) {
    io.emit('server', { message:'FileChanged' });
  },
) 
```

# html - HTML/CSS 对齐（内联，水平）并保持正确

> ID：15606510
> 
> 赞同：0
> 
> 时间：2013-03-25T01:59:48.640
> 
> 标签：html, css, alignment

我试图让这些图标在标题中彼此相邻并在中间（垂直）对齐，并保持在页面的右侧（可能是浮动？）

[http://jsfiddle.net/qNWeV/1/](http://jsfiddle.net/qNWeV/1/)

这是我要完成的工作的图像：

![我想要完成的事情](../Images/abc137841b41b763a9c1791805692c1f.png)

```
<!-- HEADER -->
    <div class="header">
        <img class="center-header" src="images/center_header.png" />

        <!-- BUTTONS (header) -->
        <div class="header-buttons-right">
            <!-- Notification Icon -->
            <div class="notify-div" class="right-margin"> <span id="notify-span"> 1 </span> </div>
            <div class="gear-settings"> <!-- Gear Settings --> </div>
            <div class="menu-button"> <!-- Menu Button --> </div>
        </div>

    </div>

/* ******************* */
/*        TOP-NAV      */
/* ******************* */
.header {
    background-color:rgb(243,243,243);
    width:100%;
    height:60px;
    border-color:rgb(243,243,243);
    border-width:2px;
    /* Firefox v1.0+ */
    -moz-border-radius:0%;
    /* Safari v3.0+ and by Chrome v0.2+ */
    -webkit-border-radius:0%/3%;
    /* Firefox v4.0+ , Safari v5.0+ , Chrome v4.0+ , Opera v10.5+  and by IE v9.0+ */
    border-radius:0%/3%;
    border-style:solid;
}
.center-header {
    position: fixed;
    z-index: 1002;
    left: 50%;
    top: -45px;
    margin-left: -135px;
}
.header-buttons-right {
    float: right;
}
.notify-div {
    width: 24px;
    height: 24px;
    background: url('../images/notify-round.png') no-repeat center;
    text-align: center;
}
    #notify-span {
        position: relative;
        top: 3px;
        font-family:"Futura LT Bold";
        font-size:12px;
        font-weight:bold;
        line-height:117%;
        color:rgb(255,255,255);
    }
.gear-settings {
    background: url('../images/gear-settings.png') no-repeat center;
    width: 24px;
    height: 24px;
    display: inline-block;
}
.menu-button {
    background: url('../images/menu.png') no-repeat center;
    width: 24px;
    height: 21px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T02:42:43.463

由于您知道标题的高度，我建议为您的图标的容器提供相同的高度和行高。

然后，您可以将此容器向右浮动，如果图标是内联块，您可以设置它们的`vertical-align: middle;`

在这里，我删除了图标图像并给出了 divs 背景颜色，以更好地说明结果：

[http://jsfiddle.net/qNWeV/1/](http://jsfiddle.net/qNWeV/1/)

如果你注意到我已经删除了每个图标的结束 div 标记和开始 div 标记之间的空格。因为它们被设置为内联块，浏览器会添加一个空格，我更愿意用一个边距来控制它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T02:25:27.277

HTML：

```
<!-- HEADER -->
<div class="header"> 
    <img class="center-header" src="images/center_header.png" /> 
                <!-- BUTTONS (header) -->
    <div class="header-buttons-right"> 
        <!-- Notification Icon -->
        <span class="notify-div right-margin">
            <span id="notify-span"> 1 </span> 
        </span>
        <span class="gear-settings"> G</span>
        <span class="menu-button">M</span>
    </div>
</div> 
```

CSS：

```
/* ******************* */
/*        TOP-NAV      */
/* ******************* */

.header {
    background-color: rgb(243,243,243);
    width: 100%;
    height: 60px;
    line-height: 60px;
    border:2px solid rgb(243,243,243);
/* Firefox v1.0+ */
-moz-border-radius:0%;
/* Safari v3.0+ and by Chrome v0.2+ */
-webkit-border-radius:0%/3%;
/* Firefox v4.0+ , Safari v5.0+ , Chrome v4.0+ , Opera v10.5+  and by IE v9.0+ */
border-radius:0%/3%;
}
.center-header {
    position: fixed;
    z-index: 1002;
    left: 50%;
}
.header-buttons-right {
    float: right;
    width:200px;
}
.notify-div {
    width: 24px;
    height: 24px;
    background: url('../images/notify-round.png') no-repeat center;
    text-align: center;

}
#notify-span {
    font-family: "Futura LT Bold";
    font-size: 12px;
    font-weight: bold;
    color: rgb(255,255,255);
}
.gear-settings {
    background: url('../images/gear-settings.png') no-repeat center;
    width: 24px;
    height: 24px;
}
.menu-button {
    background: url('../images/menu.png') no-repeat center;
    width: 24px;
    height: 21px;
} 
```

**jsfiddle：http:** [//jsfiddle.net/VJGUM/](http://jsfiddle.net/VJGUM/)

# android - Android Facebook SDK - 获取用户事件

> ID：15606514
> 
> 赞同：3
> 
> 时间：2013-03-25T02:00:45.010
> 
> 标签：android, facebook-android-sdk

我已经能够使用以下代码登录并从 api 获取用户信息：

```
Facebook facebook = new Facebook("XX");
    AccessToken token = AccessToken.createFromExistingAccessToken("XX", new Date(facebook.getAccessExpires()), 
            new Date(facebook.getLastAccessUpdate()), 
            AccessTokenSource.FACEBOOK_APPLICATION_NATIVE, Arrays.asList(permissions));
    Session.openActiveSessionWithAccessToken(getActivity(), token, callback);

    session = Session.getActiveSession();

    Request.executeMeRequestAsync(session, new Request.GraphUserCallback() {

        @Override
        public void onCompleted(GraphUser user, Response response) {
            Object proper = user.getFirstName();
            System.out.println(proper);

        }
    }); 
```

我正在使用这个固定令牌，因为它总是来自与某种主机相同的用户，但我需要获取用户事件并且没有看到任何说明如何做到这一点的文档，有没有人知道如何获取他创建的用户事件？

谢谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T01:29:02.377

我已经设法通过以下代码使用 FQL 查询来实现我想要的：

```
String fqlQuery = "SELECT eid, name, pic, creator, start_time FROM event WHERE eid IN (SELECT eid FROM event_member WHERE uid='XX' and rsvp_status='attending')";       
    Bundle params = new Bundle();
    params.putString("q", fqlQuery);
    Request request = new Request(session, "/fql", params, HttpMethod.GET, 
            new Request.Callback() {

                @Override
                public void onCompleted(Response response) {
                    System.out.println("Result: " + response.toString());                       
                }
            });
    Request.executeBatchAsync(request); 
```

# python - OpenCV 的 Cascade 分类器人脸检测冻结

> ID：15606515
> 
> 赞同：0
> 
> 时间：2013-03-25T02:01:03.160
> 
> 标签：python, opencv, numpy, computer-vision

我一直在研究一个人脸检测脚本，它可以让你一次检测多个人脸，使用 OpenCV 的 (cv2) Haar Cascade Classifier，但是，每次我调用这个函数时，程序都会无限期冻结而没有显示任何错误迹象，这里是我的功能代码：

```
 import cv2
 import cv2.cv
 def detect(img, cascade_fn='haarcascade_frontalface_alt2.xml',
           scaleFactor=1.3, minNeighbors=4, minSize=(20, 20),
           flags=cv.CV_HAAR_SCALE_IMAGE):
    cascade = cv2.CascadeClassifier(cascade_fn)
    faces = list()
    test = True
    while test == True:
        rect = cascade.detectMultiScale(img, scaleFactor=scaleFactor,
                                         minNeighbors=minNeighbors,
                                         minSize=minSize, flags=flags)
        if len(rect) == 0:
            test = False
        else:
            for x1, y1, x2, y2 in rect:
                faces.append(img[y1:y2, x1:x2])
                cv2.rectangle(img, (x1, y1), (x2, y2), color, (0, 0, 0))
    return faces 
```

所以请，有人能指出我面临这个错误的原因吗，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T09:28:09.813

如果`detectMultiScale`找不到任何面孔，`test`则分配`False`并结束循环。如果它确实检测到人脸，它们会被添加到列表中`faces`，并且会按照您（大概）的意图绘制一个矩形。

但是`test`仍然存在`True`，这意味着您的循环将再次执行。并且由于没有任何输入变量被更改，`detectMultiScale`因此将检测到相同的面孔并再次将它们添加到列表中`faces`。因此，在这种情况下，循环将永远不会结束。

您可能想要这样做：

```
import cv2
def detect(img, cascade_fn='haarcascade_frontalface_alt2.xml',
       scaleFactor=1.3, minNeighbors=4, minSize=(20, 20),
       flags=cv2.cv.CV_HAAR_SCALE_IMAGE):
    cascade = cv2.CascadeClassifier(cascade_fn)
    faces = list()
    rect = cascade.detectMultiScale(img, scaleFactor=scaleFactor,
                                     minNeighbors=minNeighbors,
                                     minSize=minSize, flags=flags)
    for x1, y1, x2, y2 in rect:
        faces.append(img[y1:y2, x1:x2])
        cv2.rectangle(img, (x1, y1), (x2, y2), color, (0, 0, 0))
    return faces 
```

# ruby-on-rails - form_for 参数

> ID：15606517
> 
> 赞同：5
> 
> 时间：2013-03-25T02:01:23.677
> 
> 标签：ruby-on-rails, form-for

我需要向外部 URL 提交表单，所以我有这个：

```
form_for(@task, :url => "https://www.external.com/Submit") do |f|)
    <%= f.hidden_field :assignmentId, :value => @assignment %>
    <%= link_to image_tag(@imagelocation) %>
.... 
```

我正在使用`form_for`，因为我需要访问我的控制器变量。

外部服务器寻找一个参数，`assignmentId`. 提交表单时，参数实际上是可用的

```
params[:task][:assignmentId] 
```

未能在外部服务器上通过验证。

我该如何解决这个问题？如何从我的控制器访问变量并将“裸”参数传递给外部服务器？

[编辑] 这是提交参数的样子

> utf8=%E2%9C%93&_method=put&task%5BassignmentId%5D=2LVQ39Z0B6UWI8NXYWJTYRKGQXIMXN&task%5Boutput%5D=carpet&commit=Post

我希望它没有引用任务。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T11:26:20.363

使用`hidden_field_tag`而不是`f.hidden_field`. 顺便说一句，如果您希望此字段存储分配的 id，您应该使用`@assignment.id`，而不仅仅是`@assignment`.

```
<%= hidden_field_tag :assignmentId, @assignment.id %> 
```

# c++ - 赋值操作和对象传递期间的构造函数调用

> ID：15606518
> 
> 赞同：2
> 
> 时间：2013-03-25T02:01:31.673
> 
> 标签：c++

我对通过引用和值传递对象到特定类的函数之间的区别感到困惑。如果我按值传递对象，我知道默认的复制构造函数会生成对象的逐个成员副本，以便在给定函数中使用。但是，如果我将对象作为需要深度复制的类的 const 引用传递，是否仍然调用复制构造函数？说我有一个功能

```
 void debug(const MyClass& object1); 
```

传递 object1 会调用复制构造函数吗？还是直接将对象传递给函数而不进行复制？还有一个问题——如果我有一个名为 Fraction 的课程——

```
 Fraction A(1,2); // 1 is this numerator, 2 the denominator

     A = Fraction(2,3); 
```

上述行是否调用默认构造函数来创建一个临时对象 Fraction(2,3)，然后是赋值运算符？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T02:22:01.003

在下文中，我们将考虑`[x]`表示 x 是可选的。

> 我对通过引用和值传递对象到特定类的函数之间的区别感到困惑。

当你通过值传递一个对象时，程序必须创建函数的本地对象，因此它调用类的复制构造函数来创建这个对象。当您通过引用（并且看似通过指针）`object1`传递时，函数内的变量只是您传递给函数的对象的别名；因此，如果您在函数内部编辑一个，则编辑也将应用于外部对象。

> 上述行是否调用默认构造函数来创建一个临时对象 Fraction(2,3)，然后是赋值运算符？

它是赋值运算符。考虑`A`到它是一个已经声明的类型变量，`X`它将被调用`X Fraction::operator=([const] Fraction[&])`或任何兼容的类型。

*注意：当声明`Fraction x = Fraction(2, 3)`它不会`operator=`像你期望的那样被使用时，将调用相应的构造函数（在这种情况下`Fraction::Fraction([const] Fraction[&])`）。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T02:23:27.810

`Would passing object1 call the copy constructor?`

不，它不会调用复制构造函数，因为通过引用传递 在这种情况下不进行复制

```
A = Fraction(2,3); 
```

是的，它将调用带有两个参数的构造函数（如果两个参数都有默认值，则调用默认构造函数），然后调用复制赋值运算符。

您可以看到以下代码的输出：

```
 #include <iostream>
 using namespace std;
 class Fraction
 {
  public:
  int denom;
  int nominator;
  Fraction(int d , int n ):denom(d), nominator(n)
  {
    cout << "call non-copy constructor" <<endl;
  }

  Fraction(const Fraction&  rhs)
  {
    cout << "call copy constructor" <<endl;
    denom = rhs.denom;
    nominator = rhs.nominator;
  }

  const Fraction& operator=(const Fraction&  rhs)
  {
   cout << "call copy assignment operator" << endl;
   if (this == &rhs)
   {
      return *this;
   }

   denom = rhs.denom;
   nominator = rhs.nominator;
   return *this;
   }
};

void debug(const Fraction& obj)
{
  cout << "this is debug: pass by reference " <<endl;
}

void debugPassByValue(Fraction obj)
{
  cout << "this is debug: pass by value" <<endl;
}

int main()
{
  Fraction A(1,2);
  cout << "--------------" <<endl;
  debug(A);
  cout << "--------------" <<endl;
  A = Fraction(2,3);
  cout << "--------------" <<endl;
  debugPassByValue(A);
  cout << "--------------" <<endl;
  cin.get();
  return 0; 
```

}

您将看到以下输出：

```
call non-copy constructor  //Fraction A(1,2);
--------------
this is debug: pass by reference  //debug(A);
--------------
call non-copy constructor    //A = Fraction(2,3);---> construct temporary object
call copy assignment operator  //A = Fraction(2,3);
--------------
call copy constructor   //debugPassByValue(A);
this is debug: pass by value
-------------- 
```

现在您将对所谓的内容有更清晰的认识。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T02:06:46.623

事实上，在`debug`没有复制的情况下。

在第二种情况下，我不太确定我是否理解您的问题。这一行：

```
A = Fraction(2,3); 
```

应该使用`Fraction`' 赋值运算符。`A`已经存在，所以它使用实例上的赋值运算符`A`来分配它`Fraction(2,3)`，它是一个临时对象。

# c# - C# 中的类持久性

> ID：15606519
> 
> 赞同：2
> 
> 时间：2013-03-25T02:01:42.943
> 
> 标签：c#

对于一个类项目，我正在 C# 中创建一个 RSS 阅读器。我有为频道、订阅源和文章构建的课程。

我的主类 MainView 有一个 List Channels 将保存所有频道。

Channel 只是一个保存提要的组织类。（即“体育”、“技术”可以是频道）。一个频道有一个包含所有提要的列表提要。因此，如果您有一个频道“体育”，并且您为 ESPN 创建了一个 RSS 提要，那么我将实例化一个提要类。

但是，我不确定如何使 MainView 类中的频道列表在所有其他类中持续存在。当我想添加一个频道时，我创建了一个允许用户输入的弹出表单类（addChannel 类）。但是为了访问 MainView 中的频道列表，我必须将它传递给 addChannel 的构造函数，它只是复制列表正确吗？所以现在当我在 addChannel 类中操作列表时，我不是在修改原来的对吗？

我已经习惯了 C 语言，我可以在其中传递指针并直接在内存中修改原始变量。因此，在我继续让我的程序变得最糟糕之前，我想看看我这样做是否正确。

如果您希望我发布任何特定代码，请告诉我。

此代码在我的 MainView 类中

```
 private void addBtn_Click(object sender, EventArgs e)
        {

            addChannel newChannel = new addChannel(channelTree, Channels);
            newChannel.Show();

        }

 public List<Channel> Channels; 
```

这段代码在 addChannel 类中

```
private void button1_Click(object sender, EventArgs e)
        {

            // I want to access the channelTree treeView here
            channel = new Channel(this.channelTitle.Text, this.channelDesc.Text);

            // Save the info to an XML doc
            channel.Save();

            // So here is where I want to add the channel to the List, but am not sure if it persists or not
            channels.Add(channel);

            // Now add it to the tree view
            treeView.Nodes.Add(channel.Title);

            this.Close();
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T14:44:43.203

假设您没有在`MainView.Channels`某个地方重置（例如`this.Channels = new List<Channels>;`，或者`this.Channels = GetMeSomeChannels();`当您调用 `channels.Add(channel);`它时添加到同一个列表，因为两个变量都引用同一个列表。

例如下面的[演示](http://ideone.com/0H96Mw)将 a 传递`List<string>`给另一个类。然后另一个类将一个字符串添加到列表中。然后两个类都观察到这个新字符串。

```
using System;
using System.Collections.Generic;

public class Test
{

    public static void Main()
    {
        List<string> Channels = new List<string>() {"a","b", "c"};
        AddChannel ac = new AddChannel(Channels);
                ac.AddSomthing("foo");

                foreach(var s in Channels)
        {
            Console.WriteLine(s);
        }

    }

}
public class AddChannel 
{
        private List<string> Channels {get;set;}
    public AddChannel(List<string> Channels )
        {
        this.Channels = Channels ; 
    }

        public void AddSomthing(string s)
        {
            this.Channels.Add(s);
        }

} 
```

补充阅读

*   Jon Skeet[在 C# 中传递参数](http://www.yoda.arachsys.com/csharp/parameters.html)

# javascript - this.$ 在 jquery / javascript

> ID：15606532
> 
> 赞同：0
> 
> 时间：2013-03-25T02:04:34.593
> 
> 标签：javascript, jquery, backbone.js

我刚刚开始使用 Javascript、Backbone 和 jQuery。我遇到了一些看起来像这样的代码：

```
someBackboneFunction: function () {
    this.$('#index1').attr('disabled', 'disabled');
} 
```

该函数在主干视图子类中声明。据我所知，这是指使用此主干视图创建的对象的函数上下文。声明了这个函数的视图是用`new`关键字创建的。如果这是正确的，我不确定是什么

```
this.$('#index1') 
```

实际上的意思。这是否只是意味着在使用`new`关键字创建的对象本身上，找到 index1 id 并禁用它？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T02:12:49.060

`this.$('#index1')`正在查找与选择器匹配的元素`#index1`，作为视图元素本身的子元素。

为了在视图中使用，将有一个`this.$el`代表视图元素的 jQuery 对象。`this.$('selector')`是一样的`this.$el.find('selector')`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T02:12:51.440

我记得在 Backbone`this.$`中是 jQuery 的包装器，它允许您在视图范围内选择元素。

所以`this.$('#index1')`应该表示“`#index1`在我的视图中选择”并将`.attr('disabled', 'disabled')`其禁用属性设置为 true。

# php - PHP如果不大于1，打印文本

> ID：15606535
> 
> 赞同：0
> 
> 时间：2013-03-25T02:04:45.570
> 
> 标签：php, mysql, printing, echo

在下面可以找到的代码中，我让服务器检查此人是否在团队中。如果是，它会显示一些东西，如果不是，它会显示一些不同的东西。如果这个人在一个团队中，它会起作用（它打印正确的东西），但如果这个人不在一个团队中，它不会显示任何内容。有什么帮助吗？

```
 if($_SESSION["username"]){
                $sql2 = mysql_query("SELECT * FROM teams WHERE game='bl2' AND players LIKE '%$sessiongamt%'") or die("Could not allocate information!");
                $num1 = 0;
                while($row = mysql_fetch_assoc($sql2)){
                  $num = ++$num;
                  $amount = mysql_num_rows($sql2);
                  $id = $row["id"];
                  $name = $row["name"];
                  $link = $row["link"];

                  if($amount < 0 || $num1 < 0){
                    print '<hr/>
                      <img src="../../img/games/black-ops-2-img.png" />
                      <h2>Black Ops 2: XBOX360</h2>
                      <hr/>
                        <div class="btn-group" style="margin-left: 210px;">
                          <a href="../findamatch.php?g=bl2" class="btn">Find a Match</a>
                          <a href="../reportamatch.php?g=bl2" class="btn">Report a Match</a>
                          <a href="../matchissue.php?g=bl2" class="btn">Match Issue</a>
                          <a href="../support.php?id=bl2" class="btn">Support</a>
                        </div>
                      <hr/>
                      <h2>Featured Teams</h2><hr/>';
                  }else{
                    print '<hr/>
                      <img src="../../img/games/black-ops-2-img.png" />
                      <h2>Black Ops 2: XBOX360</h2>
                      <hr/>
                        <div class="btn-group" style="margin-left: 210px;">
                          <a href="../findamatch.php?g=bl2" class="btn">Find a Match</a>
                          <a href="../reportamatch.php?g=bl2" class="btn">Report a Match</a>
                          <a href="../matchissue.php?g=bl2" class="btn">Match Issue</a>
                          <a href="../support.php?id=bl2" class="btn">Support</a>
                        </div>
                      <hr/>
                      <h2>Featured Teams</h2><hr/>';
                  }
              }
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T02:08:27.567

为什么不进行这样的简单检查

```
if(isset($players) && $players < 1){
  $team = "You are not a team";
}else{
.. 
} 
```

# python - 找到最小的差异

> ID：15606537
> 
> 赞同：2
> 
> 时间：2013-03-25T02:05:03.930
> 
> 标签：python, arrays, algorithm, sorting, minimum

我有一个数组 A=[a1,a2,a3,a4,a5...] 我想找到数组的两个元素，比如 A[i] 和 A[j] 使得 i 小于 j 和 A [j]-A[i] 是最小的。

此代码是否可以完成这项工作：

```
def findMinDifference(A):
    Unsorted=[]
    minDiff=1000000
    Unsorted=A
    Sorted=quickSort(A)
    for i in range(0,len(Sorted)):
        if i>=1:
         SmallElement=Sorted[i-1]
         indexOfSmaller=Unsorted.index(SmallElement)
         BigElement=Sorted[i]
         indexOfBig=Unsorted.index(BigElement)
        if indexOfSmaller<inexOfBig:
             diff=Sorted[i]-Sorted[i-1]
             if diff<minDiff:
                 minDiff=diff
    return minDiff 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T02:19:01.240

您的代码可以稍微更新一下：

```
a = [1,2,5,9,10,20,21,45]
a, size = sorted(a), len(a)

res = [a[i + 1] - a[i] for i in xrange(size) if i+1 < size]

print "MinDiff: {0}, MaxDiff: {1}.".format(min(res), max(res)) 
```

用两个词 - 找到最小或最大差异可以简化为获取列表的最小/最大元素，该元素由排序后的原始值列表中每对元素的差异组成

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T05:49:29.997

使用[`itertools`成对](http://docs.python.org/2/library/itertools.html#recipes)配方：

```
>>> from itertools import tee, izip
>>> def pairwise(iterable):
        "s -> (s0,s1), (s1,s2), (s2, s3), ..."
        a, b = tee(iterable)
        next(b, None)
        return izip(a, b)

>>> nums = [1, 3, 7, 13, 9, 18, 22]
>>> min(pairwise(sorted(nums)), key=lambda x: x[1] - x[0])
(1, 3) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T02:13:18.643

不知道为什么排序。您可以调整此伪代码。

```
for i = 0; i < array.length; i++
    for j = i + 1; j < array.length; j++
        if a[j] - a[i] < min
            min = a[j] - a[i]
 return min 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T02:23:33.003

这是另一种方法，使用更多的可迭代对象并且更多地依赖默认值：

```
from itertools import imap, islice, izip

def find_min_diff(iterable, sort_func=sorted):
    sorted_iterable = sort_func(iterable)
    return min(imap(
        lambda a, b: b - a,
        izip(sorted_iterable, islice(sorted_iterable, 1)),
    )) 
```

# iphone - Segue 和 NSString 错误

> ID：15606541
> 
> 赞同：-2
> 
> 时间：2013-03-25T02:05:15.600
> 
> 标签：iphone, objective-c, xcode, segue

我目前正在制作一个 Note 应用程序，但遇到了一个奇怪的 segue 问题。

我目前有一个`Note`名称和描述字段的对象。然后我在一个视图上创建一个注释。完成创建该笔记后，该应用程序将返回到您拥有的所有笔记的表格列表。如果您单击表格列表中的注释，您将进入编辑注释屏幕。

我遇到的问题是 segue `NSString`。这真的很奇怪，因为名称字段很好，它只是描述字段。如果我输入的是默认文本，`@"default"`那么应用程序就可以了，但是如果我将其更改为 textfield.text ( `textfield`is an `UITextfield`) 之类的东西，那么应用程序就会崩溃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T02:09:09.470

`description`已经是一种方法，`NSObject`因此您不能拥有同名的属性。

您必须将其重命名为 descriptionView

```
@property (weak, nonatomic) IBOutlet UITextView *description; 
```

# html - 如何覆盖或保存在 UIWebView 中编辑的现有本地 HTML 文件？

> ID：15606542
> 
> 赞同：0
> 
> 时间：2013-03-25T02:05:16.410
> 
> 标签：html, ios, file, uiwebview, local

该应用程序使用 UIWebView 加载本地 HTML 文件（现在只是文本）以进行编辑。我需要将用户编辑的内容保存回本地文件。这是我能想到的唯一方法：

用户编辑文本后，我编写了一个保存方法，该方法在 Web 视图中获取当前 HTML，并将其保存到写入文档目录的 HTML 文件（与原始文件名相同）。理论上这应该覆盖原来的。但事实并非如此。

```
-(void)save{
    NSError *err;
    NSString * docsDir = [NSHomeDirectory() stringByAppendingPathComponent:@"Documents"];
    NSString *oldFile = [self.webView.request.URL lastPathComponent];
    //Above line gets the actual HTML file name that's in the webview
    NSString * path = [docsDir stringByAppendingPathComponent:oldFile];
    //The following line gets what html code is in the actual webview
    NSString *html = [self.webView stringByEvaluatingJavaScriptFromString:@"document.getElementsByTagName('html')[0].innerHTML"];

    [html writeToFile:path atomically:YES encoding:NSUTF8StringEncoding error:nil];
} 
```

似乎没有写入任何文件。它不会覆盖原始文件，也不会写入新文件。

也许我不应该以这种方式保存它，但我想不出任何其他方法来做到这一点。

# java - 左移和加号的Java奇怪行为

> ID：15606544
> 
> 赞同：1
> 
> 时间：2013-03-25T02:05:29.660
> 
> 标签：java, bit-manipulation

有人可以向我解释为什么这会打印出 0 而不是 2 吗？这里一定有一些简单的（读作愚蠢的）错误，但我无法弄清楚。谢谢。

```
public class test{
    public static void main(String[] args){
        int result[] = new int[]{0,0,1,0};
        int out = 0;
        for(int i = 0;i < result.length; i ++){
            out = out << 1 + result[i];
        }
        System.out.println(out);
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-25T02:08:05.923

这是因为`+`优先级高于`<<`，因此您需要使用括号来强制执行所需的评估顺序：

```
out = (out << 1) + result[i]; 
```

这是[ideone 上演示的链接](http://ideone.com/IxdBhb)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T02:09:52.917

我尝试运行这个程序（添加括号）：

```
public class test{
    public static void main(String[] args){
        int result[] = new int[]{0,0,1,0};
        int out = 0;
        for(int i = 0;i < result.length; i ++){
            out = (out << 1) + result[i];
        }
        System.out.println(out);
    }
} 
```

有效... - 问题似乎与运算符优先级有关。`+`优先于`<<`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T02:08:43.313

这就是为什么 ：）

```
 public static void main(String[] args){
    int result[] = new int[]{0,0,1,0};
    int out = 0;
    for(int i = 0;i < result.length; i ++){
        out = **(out << 1)** + result[i];
    }
    System.out.println(out);
} 
```

请注意，** 是为了让您查看您缺少的内容

# maven - Maven“跳过javadoc生成”为什么？

> ID：15606545
> 
> 赞同：8
> 
> 时间：2013-03-25T02:05:33.583
> 
> 标签：maven, maven-2, maven-3, javadoc, maven-javadoc-plugin

我正在做一个 maven 项目，想生成最基本的 javadocs。

这是我添加到我的 pom.xml 的插件

```
<build>
<plugins>
    <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-javadoc-plugin</artifactId>
        <version>2.8.1</version>
        <executions>
            <execution>
                <id>attach-javadocs</id>
                <phase>package</phase>
                <goals>
                    <goal>jar</goal>
                </goals>
            </execution>
        </executions>
    </plugin>
</plugins>
</build> 
```

然后我运行目标 mvn clean package 并在成功清理和打包我的项目后显示

```
[INFO] --- maven-javadoc-plugin:2.8.1:jar (attach-javadocs) @ project-name ---
[INFO] Skipping javadoc generation. 
```

我试过添加属性：

```
<properties>
    <maven.javadoc.skip>false</maven.javadoc.skip>
</properties> 
```

并且在 cmd 提示符下也试过这个：

```
mvn clean package -Dmaven.javadoc.skip=false 
```

没有区别...

有什么我公然失踪的吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-07-07T21:57:59.110

你必须使用

`-Dmaven.javadoc.skip=true`<-- 跳过 javadoc

`-Dmaven.javadoc.skip=false`<<-- 不跳过

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-25T11:09:40.203

通过键入 mvn help:effective-pom 或通过 pom 的 eclipse effective-pom 视图在命令行上查看项目的有效 pom。这将为您提供真正的配置。如果标志设置为真，则：

1.  您是否在非活动配置文件中添加配置？检查 mvn help:active-profiles
2.  你有pom继承并从父母那里继承配置吗？检查父 poms

我认为更改版本不会对您有太大帮助，因为 2.5 版中提供了“skip”参数

# git - 本地访问github账号出错

> ID：15606557
> 
> 赞同：0
> 
> 时间：2013-03-25T02:07:31.837
> 
> 标签：git, github, config

我已经为我的本地仓库添加了 ssh 密钥（我从我的 github 仓库中克隆了它。

当我尝试将提交推送到远程 github 存储库时，我收到以下消息：

```
fatal: 'git@github.com/username/reponame.git' does not appear to be a git repository
fatal: Could not read from remote repository.
Please make sure you have the correct access rights
and the repository exists. 
```

我也尝试将远程名称更改为`git://github.com/username/reponame.git`，但它没有用。

我在哪里可以指定我的用户名/密码来访问远程仓库（或者如果它嵌入在唯一的 ssh 密钥中，只是我做错了什么，那么请帮忙）？

注意 - 我在我的 github 帐户中输入了我的 ssh 密钥。

请指导我正确的方向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T03:01:13.097

您似乎在 github 存储库的 URL 中有错字：

```
git@github.com/username/reponame.git 
```

相反，您应该使用：

```
git@github.com:username/reponame.git 
```

要更新远程命名源的 URL：

```
git remote set-url origin git@github.com:username/reponame.git 
```

之后再试一试`git fetch origin`，看看您是否能够从远程获取更改。如果可行，您应该也可以运行`git push origin`（前提是您的 SSH 密钥有效并且您已按照步骤将它们正确添加到您的 github 帐户）。

# ruby-on-rails - 在 ruby on rails 中保护参数

> ID：15606560
> 
> 赞同：2
> 
> 时间：2013-03-25T02:07:43.620
> 
> 标签：ruby-on-rails, ruby-on-rails-3, web-services, security, parameters

我有一个实际上不保存模型的表单，所以当我发布表单时，有电子邮件和密码，但不知何故我不想将我的密码暴露给其他人。我做了这个 config.filter_parameters 来过滤日志

但是当我发布并检查浏览器时，我的密码仍然有纯文本，我不想这样做。当我在浏览器中检查时，发送时是否有任何适当的方法来加密参数，每个人都会看到哈希或加密。

哦，我的意思是不使用 SSL 的方式>.<

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T10:41:25.973

如果您不能使用 SSL，那么您就不会安全。

即使您在通过网络发送密码之前使用 JS 进行了私钥/公钥加密，您也不能相信您的加密 JS 代码在发送到客户端时没有受到损害。毕竟，你想加密是因为你担心网络漏洞。

当然，您可以在不安全的协议上使用 JS 加密来给人一种安全的*假象*。公平地说，在这种情况下破坏密码的攻击需要比简单的网络嗅探更复杂。

关于这个主题的一篇很棒的文章在这里： http: [//www.matasano.com/articles/javascript-cryptography/](http://www.matasano.com/articles/javascript-cryptography/)

# iphone - 比较两个数组？

> ID：15606561
> 
> 赞同：0
> 
> 时间：2013-03-25T02:07:50.610
> 
> 标签：iphone, objective-c, nsarray

我想将两个数组与以下设置进行比较，但不知道如何使用代码。

有一个数组arrayOne，与另一个数组arrayTwo 进行比较。

找到两个数组的差异后，将这些差异添加到 arrayOne 并从 arrayTwo 中删除所有内容。

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T03:15:04.007

**如果 array1 具有唯一值：**

```
NSArray *array1=@[@"A",@"B",@"C",@"D"];
NSArray *array2=@[@"A",@"E",@"C"];

NSMutableOrderedSet *set1=[[NSMutableOrderedSet alloc]initWithArray:array1];
NSMutableOrderedSet *set2=[[NSMutableOrderedSet alloc]initWithArray:array2];
[set1 unionOrderedSet:set2];

array1=[set1 array];
array2=@[];

NSLog(@"array1: %@,  array2: %@",array1,array2); 
```

输出：

> 数组1：（A，B，C，D，E），数组2：（）

**如果 array1 没有唯一值：**

```
NSMutableArray *unionArray=[NSMutableArray arrayWithArray:array1];
for (NSString *element in array2) {  //compared only for string, if it is some other object need to compare them.
    if (![array1 containsObject:element]) {
        unionArray[unionArray.count]=element;
    }
}
array1=unionArray;
array2=@[];
NSLog(@"array1: %@, array2: %@",array1,array2); 
```

输出：

> 数组1：（A，B，C，D，A，E），数组2：（）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T04:40:28.200

尝试这个。希望这对您有所帮助。

```
NSMutableArray *array1 = [NSMutableArray arrayWithObjects:@"One", @"Two", @"Three", nil];

NSMutableArray *array2 = [NSMutableArray arrayWithObjects:@"Two", @"Four", @"One", nil];

NSMutableArray *intermediate = [NSMutableArray arrayWithArray:array2];

[intermediate removeObjectsInArray:array1];

for(int i = 0; i < [intermediate count]; i++)
{
    [array1 addObject:[intermediate objectAtIndex:i]];
} 
```

# php - 为什么我在页面更改时丢失了 PHP 会话？

> ID：15606564
> 
> 赞同：0
> 
> 时间：2013-03-25T02:08:04.593
> 
> 标签：php, session

我设置了一个登录系统，该系统存储了一个会话变量并在每个页面上检查它，但后来我转移到了一个新服务器。

现在，我设置的任何会话变量仅在设置它的页面上可用。我一直在寻找可能发生这种情况的原因，并且已经解决了权限问题。这可能与不正确的网址有关吗？服务器上的其他一切似乎工作正常。

如果有帮助的话，我正在运行最新版本的 PHP 和 Apache。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T02:10:12.750

因为您可能（只是假设）没有`session_start();`在需要的地方浏览您的其他页面。例如，创建一个名为 session.php 的页面

**会话.php**

```
session_start(); 
if (!isset($_SESSION))
{
 // Enforce logout as session is not set.
} 
```

然后：

`include "session.php";`

在需要登录功能的页面中使用此代码段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T05:48:27.433

我以前遇到过这样的问题。您可以尝试在第一次使用 启动会话时设置会话 id `session_id()`，然后在每次之前使用相同的会话 id `session_start()`。

例如：

```
<?php
   session_id(integer);
   session_start();
?> 
```

# c# - 尝试捕捉不起作用

> ID：15606565
> 
> 赞同：3
> 
> 时间：2013-03-25T02:08:05.877
> 
> 标签：c#, exception, try-catch, webclient

```
class XWebClient : WebClient
{
    protected override WebRequest GetWebRequest(Uri Url)
    {
        var Request = base.GetWebRequest(Url);
        ...........
        return Request;
    }
} 
```

使用：

```
try
{
    XWebClient Client = new XWebClient();
    Client.DownloadString(new Uri("badurl:100500"));
}
catch
{
    MessageBox.Show("exception");
} 
```

我希望得到一个消息框，但我得到一个未处理的异常。我究竟做错了什么？

* * *

异常：System.NotSupportedexception

消息：无法识别 URI 前缀

痕迹：

```
 System.Net.WebRequest.Create(Uri requestUri, Boolean useUriBase)
   System.Net.WebRequest.Create(Uri requestUri)
   System.Net.WebClient.GetWebRequest(Uri address)
   XWebClient.GetWebRequest(Uri Url) в [path]\XWebClient.cs:строка 28
   System.Net.WebClient.DownloadDataInternal(Uri address, WebRequest& request) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T02:52:40.807

在我看来，您在调试器下运行它并启用了“中断所有托管异常”。如果是这种情况，调试器将在处理程序运行之前在引发异常的行上中断。您的处理程序仍在工作，调试器只是让您事先检查错误。

# bash - UNIX 日期：如何将周数（日期 +%W）转换为日期范围（周一至周日）？

> ID：15606567
> 
> 赞同：12
> 
> 时间：2013-03-25T02:08:14.393
> 
> 标签：bash, unix, date, sh, unix-timestamp

我有从巨大的日志文件中提取的周数列表，它们是使用语法提取的：

```
$ date --date="Wed Mar 20 10:19:56 2012" +%W;
12 
```

我想创建一个简单的 bash 函数，可以将这些周数转换为日期范围。我想函数应该接受 2 个参数：$number 和 $year，例如：

```
$ week() { ......... }
$ number=12; year=2012
$ week $number $year
"Mon Mar 19 2012" - "Sun Mar 25 2012" 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-25T02:56:13.520

与`GNU date`：

```
$ cat weekof.sh
function weekof()
{
    local week=$1 year=$2
    local week_num_of_Jan_1 week_day_of_Jan_1
    local first_Mon
    local date_fmt="+%a %b %d %Y"
    local mon sun

    week_num_of_Jan_1=$(date -d $year-01-01 +%W)
    week_day_of_Jan_1=$(date -d $year-01-01 +%u)

    if ((week_num_of_Jan_1)); then
        first_Mon=$year-01-01
    else
        first_Mon=$year-01-$((01 + (7 - week_day_of_Jan_1 + 1) ))
    fi

    mon=$(date -d "$first_Mon +$((week - 1)) week" "$date_fmt")
    sun=$(date -d "$first_Mon +$((week - 1)) week + 6 day" "$date_fmt")
    echo "\"$mon\" - \"$sun\""
}

weekof $1 $2
$ bash weekof.sh 12 2012
"Mon Mar 19 2012" - "Sun Mar 25 2012"
$ bash weekof.sh 1 2018
"Mon Jan 01 2018" - "Sun Jan 07 2018"
$ 
```

* * *

### 笔记：

正如 OP 所提到的，**周数**是由`date +%W`. 根据 GNU 日期[手册](http://man7.org/linux/man-pages/man1/date.1.html)：

> `%W`: 一年中的周数，**周一为一周的第一天**(00..53)

所以：

1.  每周从星期一开始。
2.  如果 1 月 1 日是星期一，那么*第一*周将是*第 #1 周*。
3.  如果 1 月 1 日不是星期一，那么前几天将是*第 0*周，*第 1 周*从第一个星期一开始。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-09-01T14:25:01.207

星期一是一周的第一天，[ISO 周数](https://en.wikipedia.org/wiki/ISO_week_date#Calculating_the_week_number_of_a_given_date)：

```
function week2date () {
  local year=$1
  local week=$2
  local dayofweek=$3
  date -d "$year-01-01 +$(( $week * 7 + 1 - $(date -d "$year-01-04" +%u ) - 3 )) days -2 days + $dayofweek days" +"%Y-%m-%d"
}

week2date 2017 35 1
week2date 2017 35 7 
```

输出：

```
2017-08-28
2017-09-03 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-05-11T15:36:39.607

一切都取决于您所使用的周数的定义。

## 欧洲 (ISO 8601)

此[ISO 8601 标准](https://en.wikipedia.org/wiki/ISO_week_date)在世界范围内广泛使用：欧盟和其他大多数欧洲国家、亚洲大部分地区和大洋洲

ISO 8601 标准规定如下：

*   一周有7天
*   一周的第一天是*星期一*
*   第一周是一年中的第一周，其中包含一个 *Thursday*。这意味着它是 1 月的第一周，有 4 天或更多天。

使用此定义，可以有第 53 周。这些发生在 1 月 1 日是星期五（例如 2016-01-01、2010-01-01）。或者，如果前一年是闰年，也是星期六。（例如 2005-01-01）

```
 December 2015               January 2016        
 Mo Tu We Th Fr Sa Su CW    Mo Tu We Th Fr Sa Su CW
     1  2  3  4  5  6 49                 1  2  3 53
  7  8  9 10 11 12 13 50     4  5  6  7  8  9 10 01
 14 15 16 17 18 19 20 51    11 12 13 14 15 16 17 02
 21 22 23 24 25 26 27 52    18 19 20 21 22 23 24 03
 28 29 30 31          53    25 26 27 28 29 30 31 04

function week_range() {
    local _u _F _V
    # dow Jan 01 (Mon 01 ... Sun 07)
    _u="$(date -d "$1-01-01" "+%u")"
    # First Monday
    _F="$(date -d "$1-01-01 + $(( (8 - _u) % 7)) days" "+%F")"
    # Week number of first Monday
    _V="$(date -d "$_F" "+%V")"
    printf -- "%s-%s\n" "$(date -d "$_F + $(( 7*($2 - _V) )) days" "+%F")"       \
                        "$(date -d "$_F + $(( 7*($2 - _V) + 6 )) days" "+%F")"
}

$ week_range 2016 1; done
2016-01-04 - 2016-01-10
$ week_range 2020 1; done
2019-12-30 - 2020-01-05     << week one starts in the previous year
$ week_range 2020 20
2020-05-11 - 2020-05-17 
```

## 美国或伊斯兰（非 ISO 8601）

并非所有国家都使用 ISO 8601 系统。他们使用更绝对的方法。美式系统用于加拿大、美国、新西兰、印度、日本……伊斯兰系统一般用于中东。这两个系统非常相似。

### *美国人：*

*   一周有7天
*   一周的第一天是*星期日*
*   第一周从 1 月 1 日开始

使用此定义，一年的开始和结束时可能会有部分星期。因此，一年中的第一周和最后一周不能包含所有工作日。

```
 December 2015                January 2016       
 Su Mo Tu We Th Fr Sa CW     Su Mo Tu We Th Fr Sa CW
        1  2  3  4  5 49                     1  2 01
  6  7  8  9 10 11 12 50      3  4  5  6  7  8  9 02
 13 14 15 16 17 18 19 51     10 11 12 13 14 15 16 03
 20 21 22 23 24 25 26 52     17 18 19 20 21 22 23 04
 27 28 29 30 31       53     24 25 26 27 28 29 30 05
                             31                   06

function week_range() {
    local _w _F _V _d1 _d2
    # dow Jan 01 (Sun 01 ... Sat 07)
    _w="$(date -d "$1-01-01" "+%w")"
    (( _w = _w + 1 ))
    # First Saturday
    _F="$(date -d "$1-01-01 + $(( (8 - _w) % 7)) days" "+%F")"
    # Week number of first Sunday
    [[ "$_F" == "$1-01-01" ]] && _V=1 || _V=2
    # Start and end
    _d1="$(date -d "$_F + $(( 7*($2 - _V) )) days" "+%F")"
    _d2="$(date -d "$_F + $(( 7*($2 - _V) + 6 )) days" "+%F")"
    [[ "$_d1" < "$1-01-01" ]] && _d1="$1-01-01"
    [[ "$_d2" > "$1-12-31" ]] && _d2="$1-12-31"
    [[ "$_d1" > "$1-12-31" ]] && echo "invalid week number" > /dev/stderr && return
    printf -- "%s - %s\n"               \
        "$(date -d "$_d1" "+%m/%d/%Y")" \
        "$(date -d "$_d2" "+%m/%d/%Y")"
}
$ week_range 2015 53
12/27/2015 - 12/31/2015
$ week_range 2016 1
01/01/2016 - 01/02/2016
$ week_range 2020 20
05/10/2020 - 05/16/2020 
```

### *伊斯兰：*

*   一周有7天
*   一周的第一天是*星期六*
*   第一周从 1 月 1 日开始

使用此定义，一年的开始和结束时可能会有部分星期。因此，一年中的第一周和最后一周不能包含所有工作日。

```
 December 2015                 January 2016       
 Sa Su Mo Tu We Th Fr CW     Sa Su Mo Tu We Th Fr CW
           1  2  3  4 49                        1 01
  5  6  7  8  9 10 11 50      2  3  4  5  6  7  8 02
 12 13 14 15 16 17 18 51      9 10 11 12 13 14 15 03
 19 20 21 22 23 24 25 52     16 17 18 19 20 21 22 04
 26 27 28 29 30 31    53     23 24 25 26 27 28 29 05
                             30 31                06

function week_range() {
    local _w _F _V _d1 _d2
    # dow Jan 01 (Sat 01 ... Fri 07)
    _w="$(date -d "$1-01-01" "+%w")"
    (( _w = (_w + 8) % 7 + 1 ))
    # First Saturday
    _F="$(date -d "$1-01-01 + $(( (8 - _w) % 7)) days" "+%F")"
    # Week number of first Saturday
    [[ "$_F" == "$1-01-01" ]] && _V=1 || _V=2
    # Start and end
    _d1="$(date -d "$_F + $(( 7*($2 - _V) )) days" "+%F")"
    _d2="$(date -d "$_F + $(( 7*($2 - _V) + 6 )) days" "+%F")"
    [[ "$_d1" < "$1-01-01" ]] && _d1="$1-01-01"
    [[ "$_d2" > "$1-12-31" ]] && _d2="$1-12-31"
    [[ "$_d1" > "$1-12-31" ]] && echo "invalid week number" > /dev/stderr && return
    printf -- "%s - %s\n" "${_d1//-//}" "${_d2//-//}"
}

$ week_range 2015 53
2015/12/26 - 2015/12/31
$ week_range 2016 1
2016/01/01 - 2016/01/01
$ week_range 2020 20
2020/05/09 - 2020/05/15 
```

**注意：**还有其他定义周数的方法。尽管如此，方法保持不变。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-04T15:45:19.940

如果有人需要它：我找到了一个更短的方法（不确定是否更容易）：

```
function weekof() {
        local year=$2
        local week=`echo $1 | sed 's/^0*//'` # Fixes random bug
        local dateFormat="+%a %b %d %Y"
        # Offset is the day of week, so we can calculate back to monday
        local offset="`date -d "$year/01/01 +$((week - 1)) week" "+%u"`"
        echo -n "`date -d "$year/01/01 +$((week - 1)) week +$((1 - $offset)) day" "$dateFormat"`" # Monday
        echo -n " - "
        echo "`date -d "$year/01/01 +$((week - 1)) week +$((7 - $offset)) day" "$dateFormat"`" # Sunday    } 
```

我选择一年中的第一天，然后前进 n 周，以便在正确的一周内找到某个地方。然后我会在工作日返回/前进以到达星期一和星期日。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-27T19:12:23.983

如果一周的开始是星期日，您可以使用以下版本的 weekof：

```
function weekof()
{
    local week=$1 year=$2
    local week_num_of_Jan_1 week_day_of_Jan_1
    local first_Sun
    local date_fmt="+%Y-%m-%d"
    local sun sat

    week_num_of_Jan_1=$(date -d $year-01-01 +%U)
    week_day_of_Jan_1=$(date -d $year-01-01 +%u)

    if ((week_num_of_Jan_1)); then
        first_Sun=$year-01-01
    else
        first_Sun=$year-01-$((01 + (7 - week_day_of_Jan_1) ))
    fi

    sun=$(date -d "$first_Sun +$((week - 1)) week" "$date_fmt")
    sat=$(date -d "$first_Sun +$((week - 1)) week + 6 day" "$date_fmt")
    echo "$sun $sat"
} 
```

# cakephp - 仍然停留在更新行 cakephp

> ID：15606568
> 
> 赞同：0
> 
> 时间：2013-03-25T02:08:19.040
> 
> 标签：cakephp

我已经发布了一个问题并得到了帮助，但我仍然没有成功。我试图更新 cakePHP 2.3.1 中的一行。我有类测试扩展 AppModel 与 $validates 数组，以及控制器（简化）：

```
public function editstudent()   {
if($this->request->data)    {
    $this->Test->stuId= $this->data['Test']['stuId'];
    if ($this->Test->save($this->request->data))    {
        $this->set('state',1);
    }
} 
```

我根据用户的建议编辑后的观点：D：

```
class Test extends AppModel {
var $name= 'Test';
var $primaryKey= 'stuId';
public $validate= array(.......);
} 
```

我在 View 中设置了 $primaryKey，在控制器中设置了 $this->Test->$primaryKey 但仍然出现错误：

> 数据库错误错误：SQLSTATE [23000]：违反完整性约束：1062 键“PRIMARY”SQL 查询的重复条目“”：INSERT INTO cakePhp.tests (stuName, stuDoB, stuAdd) VALUES ('Đào Đức Anh', '2013-03 -25', '金莲')

谁能帮帮我，我真的需要帮助，我被困在这个问题上 2 天，无法弄清楚:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T06:45:19.530

我认为您必须更改以下行

```
$this->Test->stuId = $this->data['Test']['stuId']; 
```

至

```
$this->Test->id = $this->data['Test']['stuId']; 
```

因为它是`id`包含主键值的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T05:00:40.147

**快速尝试：**

尝试在您的控制器代码中更改`$this->data`为。`$this->request->data`

**更多的东西：**

最重要的是，您的主键没有设置。

1.  尝试使用（根据 CakePHP book）这个语法：

    `public $primaryKey = 'stuId'; //notice "public" instead of "var"`

2.  检查以找出为什么“studId”不在正在保存的数据中。

    `debug($this->request->data);`

3.  我的假设是，它不在请求数据中 - 如果是的话，你会没事的。

> 将 studId 添加到正在提交的表单中，或者以您认为合适的任何其他方式将 ID 添加到请求数据中

**边注：**

你一直说“视图”，但你真正的意思是“模型”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-07T05:05:01.360

在 AppModel.php 中添加您的主键 public $primaryKey='username';

# sql - “[columnname] 不包含在聚合函数或 GROUP BY 子句中。”

> ID：15606570
> 
> 赞同：0
> 
> 时间：2013-03-25T02:08:32.363
> 
> 标签：sql, sql-server, sql-server-2012

查询在 MySQL 中工作正常，但在 MSSQL 中不行。小提琴：

MySQL：[http ://sqlfiddle.com/#!8/f1959/2](http://sqlfiddle.com/#!8/f1959/2)

MSSQL：[http ://sqlfiddle.com/#!6/4d276/2](http://sqlfiddle.com/#!6/4d276/2)

似乎 MySQL 让它工作的事实将使查询速度更快，因为 int 的搜索速度比可变长度字符串更快。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T02:09:23.670

该查询之所以有效，`MySQL`是因为它具有[`Extended GROUP BY`](http://dev.mysql.com/doc/refman/5.0/en/group-by-extensions.html). 如果启用SQL 模式，`MySQL`则可以限制此行为。[`ONLY_FULL_GROUP_BY`](http://dev.mysql.com/doc/refman/5.0/en/server-sql-mode.html#sqlmode_only_full_group_by)

但是在 中`SQL Server`，您需要显式定义`GROUP BY`子句中未聚合的所有列，这些列在子句中`SELECT`定义

```
SELECT t.name, COUNT(d.data)
FROM   types AS t
       LEFT JOIN data AS d ON d.typeId = t.id
GROUP  BY d.typeId, t.name; 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!6/4d276/3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T04:31:46.467

下面是两个 SQL Server 查询 ( [SQL Fiddle](http://sqlfiddle.com/#!6/4d276/17) )，它们可以为您提供所需的结果，而无需额外的 GROUP BY 项。

```
SELECT t.name, a.ct
FROM types AS t
OUTER APPLY (
  SELECT COUNT(d.data) AS ct
  FROM data AS d
  WHERE d.typeId = t.id
) as A

SELECT
  t.name,
  (SELECT COUNT(d.data)
   FROM data AS d
   WHERE d.typeId = t.id
  ) AS ct
FROM types AS t 
```

在任何一种情况下（如在 MySQL 中），您都应该确保 types.name 和 types.id 之间存在一对一的关系。至少在 SQL Server 中，如果不是这样，结果是明确定义的。在 MySQL 中，如果给定的 types.id 有多个 types.name 值，您可能会得到任何匹配的名称。

# java - Java：我可以在 switch 语句中只遇到一种情况吗

> ID：15606572
> 
> 赞同：18
> 
> 时间：2013-03-25T02:08:47.140
> 
> 标签：java, switch-statement

在 Java 中，我可以只通过一个`switch`语句中的一种情况吗？我明白，如果我`break`，我会坚持到`switch`陈述结束。

这就是我的意思。给定以下代码，在案例 2 上，我想执行案例 2 和案例 1。在案例 3 上，我想执行案例 3 和案例 1，但不执行案例 2。

```
switch(option) {
    case 3:  // code
             // skip the next case, not break
    case 2:  // code
    case 1:  // code
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-25T02:10:45.590

不，你所追求的东西是不可能的`switch`。你会跌倒每一个`case`，直到你击中一个`break`。也许您想`case 1`在您的`switch`语句之外，以便它无论如何都被执行。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-25T02:10:25.973

将代码放入方法并酌情调用。按照你的例子：

```
void case1() {
    // Whatever case 1 does
}

void case2() {
    // Whatever case 2 does
}

void case3() {
    // Whatever case 3 does
}

switch(option) {
    case 3:
        case3();
        case1();
        break;
    case 2:
        case2();
        case1();
        break;
    case 1: 
        case1();   // You didn't specify what to do for case 1, so I assume you want case1()
        break;
    default:
        // Always a good idea to have a default, just in case demons are summoned
} 
```

当然`case3()`，`case2()`... 是非常糟糕的方法名称，您应该将其重命名为更有意义的名称，以了解该方法的实际作用。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-03-25T02:23:39.877

**我的建议是除了以下情况外，不要对任何事情**使用 fallthrough ：

```
switch (option) {
    case 3:
        doSomething();
        break;
    case 2:
    case 1:
        doSomeOtherThing();
        break;
    case 0:
        // do nothing
        break;
} 
```

也就是说，为几个案例提供**完全相同**的代码块来处理它们（通过“堆叠”`case`标签），使这里的流程或多或少显而易见。我怀疑大多数程序员会直观地检查大小写是否通过（因为缩进使大小写看起来像一个正确的块）或者是否可以有效地读取依赖它的代码 - 我知道我没有。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-25T02:20:07.007

```
switch(option) 
{
    case 3:
        ...
        break;
    case 2: 
        ...
        break;
}

... // code for case 1 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-05-31T05:14:32.777

如果要拆分案例，可以自定义条件

```
const { type, data } = valueNotifications

    let convertType = ''
    if (data?.type === 'LIVESTREAM' && type === 'NORMAL') { 
      convertType = 'LIVESTREAM1' 
    } else convertType = type 

    switch (convertType) 
```

我的用例已将类型与值通知分开，但我有一个特定的 LiveStream 案例，仅在 data.type 中显示为“LIVESTREAM”

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-03-25T02:16:39.023

可能是这样的。

```
switch(option) {
    case 3:  // code
             // skip the next case, not break
        // BLOCK-3
    case 2:  // code
        if(option == 3) break;
        // BLOCK-2
    case 1:  // code
        // BLOCK-1
} 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2013-03-25T02:19:00.337

在 switch 语句中，如果你不`break`执行后续的 case。举个简单的例子

```
 int value = 2;
    switch(value) {
    case 1: 
        System.out.println("one");
        break;
    case 2: 
        System.out.println("two");
    case 3: 
        System.out.println("three");
        break;
    } 
```

将输出

```
two
three 
```

因为`break`不想在案例 2 上执行

# php - 使用fancybox iframe登录wordpress，然后重新加载原始页面

> ID：15606577
> 
> 赞同：0
> 
> 时间：2013-03-25T02:09:05.700
> 
> 标签：php, jquery, html, wordpress

在我的一个网站上，我向 footer.php 添加了一个自定义 div，该 div 转到 wordpress 网站的登录页面：

```
<p id="login" align="left"><?php if ( is_user_logged_in() ) {  ?>
   <a href="http://mydomain.com/wp-login.php?action=logout&_wpnonce=518b41a419" alt="logout">[-] logout</a>
<?php } else { ?> 
   <a href="http://mydomain.com/wp-login.php" alt="login">[+] members login</a>
<?php } ?></p> 
```

我使用“Fancybox for Wordpress”插件为联系表格等加载 iframe。我想知道如何在 iframe 中显示登录信息，以便在登录成功时，iframe 关闭并重新加载它们所在的页面（因此它们不会被带到 cms）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T02:36:51.427

我认为您不需要 iframe 来完成此操作。听起来您只是想要一个让人们留在当前页面的登录。使用 iframe 的问题在于，其余的交互将在该 iframe 内发生。试试这个：只需指示 WordPress 在用户登录后将其返回到当前页面。

```
<a href="<?php echo wp_login_url(get_permalink()); ?>" title="Login">Login</a> 
```

更多信息请访问[http://codex.wordpress.org/Function_Reference/wp_login_url](http://codex.wordpress.org/Function_Reference/wp_login_url)。

# c# - C# 创建 .icx 日历文件 - 删除/取消约会

> ID：15606580
> 
> 赞同：1
> 
> 时间：2013-03-25T02:09:13.207
> 
> 标签：c#, asp.net

我看到了一些通过 .icx 文件动态创建约会的示例，但我没有遇到任何允许用户下载动态创建的 .icx 文件以从他们的日历中删除项目的示例。有什么建议么？我不确定哪些属性需要与现有项目匹配 - 开始/结束/和主题？任何帮助，将不胜感激。

谢谢！

# shopping-cart - Simplecart 附加隐藏项属性

> ID：15606583
> 
> 赞同：0
> 
> 时间：2013-03-25T02:09:31.820
> 
> 标签：shopping-cart, simplecart

使用 simpleCart_shelfItem div 时，我正在尝试向我的 simplecart 项目添加一个额外的隐藏字段。我尝试了隐藏输入、附加跨度，但无法让我的属性显示在 Simplecarts 表单结帐传递的 JSON 中。

当我初始化 simplecart 时没什么特别的：

```
 // Init shopping cart
    script(type='text/javascript')
        simpleCart({
            checkout: {
                type: "SendForm",
                url: "/cart/checkout"
            },
            currency: "USD",
            cartStyle: "table"
        }); 
```

这是我加载货架项目的地方（请注意，这是使用 Jade 引擎，但 HTML 符合预期）：

```
 div.simpleCart_shelfItem
            p.item_name My Special Item
            input.item_Quantity(type='text', value='1')
            input.item_secretId(type='hidden', value='A hidden identifier')
            br
            span.item_price $0.99
            br
            a.item_add(href="javascript:;") Add to Cart 
```

我也尝试过使用：

```
span.item_secretId A hidden identifier 
```

当我将购物车传递给 /cart/checkout 时，当我在服务器端代码中执行 req.body 的控制台日志时，找不到 secretId ：

```
Checkout passed with: {"currency":"USD","shipping":"0","tax":"0","taxRate":"0","itemCount":"1","item_name_1":"4x6 Print","item_quantity_1":"4","item_price_1":"0.99","item_options_1":""} 
```

我已经在 API 文档中看到了将自定义列添加到购物车的功能，但我不希望此字段显示在购物车中，它完全是内部的，以方便服务器端处理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T17:18:41.833

它不是特别漂亮，但我通过在我的新数据元素周围使用 div 标签解决了这个问题，然后将它们隐藏在这样的样式表中

HTML：

```
 input(class="item_internalId", type='text', value='1234') 
```

CSS：

```
 input.item_internalId {
            display: none;
        } 
```

# bitbucket - bitbucket 中的增强和提议有什么区别

> ID：15606586
> 
> 赞同：33
> 
> 时间：2013-03-25T02:10:05.213
> 
> 标签：bitbucket, issue-tracking

在 bitbucket 上创建新问题时，我可以选择`proposal`和`enhancement`. 它们之间有什么区别？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-03-25T02:13:39.047

*提案是对新*功能的请求，而增强功能是对*现有*功能的增强。

# spring-mvc - org.springframework.dao.InvalidDataAccessApiUsageException：一旦类被编译或使用，配置就不能改变

> ID：15606588
> 
> 赞同：1
> 
> 时间：2013-03-25T02:10:18.463
> 
> 标签：spring-mvc

我在 spring 中使用 simpleJdbcInsert 将一些数据插入到 DB 中，它适用于第一步（我的意思是第一次插入），当我尝试第二次保存数据时，我得到异常：org.springframework.dao.InvalidDataAccessApiUsageException：配置可以'一旦类被编译或使用，就不能被改变。”

任何人都可以帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T02:33:41.263

当您尝试（再次）配置已**编译**的simpleJdbcInsert 时，通常会发生此异常。

**编译**意味着您已经实例化了一个 simpleJdbcInsert 实例并已经设置了**数据源**和**表名**。一旦一个 simpleJdbcInsert 实例被**编译**，你不应该再次重新配置它；例如，设置另一个表名。如果需要，请创建一个新的 simpleJdbcInsert 实例。

要全面了解**simpleJdbcInsert的工作原理，请查看****simpleJdbcInsert**和**AbstractJdbcInsert**的源代码。尤其是 AbstractJdbcInsert.java 中的方法compile **(** **)**

# parsing - scrapy item：什么时候退货？

> ID：15606594
> 
> 赞同：-2
> 
> 时间：2013-03-25T02:10:57.433
> 
> 标签：parsing, return, scrapy

这是问题所在：

1.  我可以在 A 网页中找到 Item 数据，然后按照 A 的外链获取更多 Item 数据。
2.  附加项目数据在 B 和 C 网页中。有一个`parse_b()` for B，一个`parse_c()`for C（这两个解析是parse_A（）中的回调）。此项目数据完成后。

那么，在哪个`parse()`退货项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T14:25:21.400

看向[https://github.com/darkrho/scrapy-inline-requests](https://github.com/darkrho/scrapy-inline-requests)

看起来像这样：

```
class FooSpider(BaseSpider):
    @inline_request
    def parse_a(self, response):
        l = FooLoader()
        l.add_value("A", "A")
        b = yield Request(response.url + '/b)
        l.add_value("B", b)
        c = yield Request(response.url + '/c)
        l.add_value("C", c)
        yield l.load_item()

    @inline_request
    def parse_b(self, response):
        # Doing what you want
        return "B"

    @inline_request
    def parse_c(self, response):
        # Doing what you want
        return "C" 
```

# wxpython - wx.aui 中没有 EVT_AUINOTEBOOK_TAB_RIGHT_DOWN

> ID：15606606
> 
> 赞同：0
> 
> 时间：2013-03-25T02:12:47.760
> 
> 标签：wxpython, wxwidgets

我正在尝试为 AuiNotebook ctrl 添加右键单击事件处理程序。在文档中，它说 AuiNotebook 可以发出 EVT_AUINOTEBOOK_TAB_RIGHT_DOWN 事件。但是当我尝试将事件绑定到笔记本时，出现以下错误：

“模块”对象没有属性“EVT_AUINOTEBOOK_TAB_RIGHT_DOWN”

有什么问题？wxPython 不支持？

我在 Mac OS X 上并使用 wxPython 2.9.4

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-05T12:26:09.200

出于某种原因（我不知道为什么）它使用双下划线，

即你必须使用

EVT__AUINOTEBOOK_TAB_RIGHT_DOWN

对于其他感兴趣的人，这些是 AuiNotebook 从 wxPython 2.9.4(.1) 开始出现的事件

```
EVT_AUINOTEBOOK_ALLOW_DND
EVT_AUINOTEBOOK_BEGIN_DRAG
EVT_AUINOTEBOOK_BG_DCLICK
EVT_AUINOTEBOOK_BUTTON
EVT_AUINOTEBOOK_DRAG_DONE
EVT_AUINOTEBOOK_DRAG_MOTION
EVT_AUINOTEBOOK_END_DRAG
EVT_AUINOTEBOOK_PAGE_CHANGED
EVT_AUINOTEBOOK_PAGE_CHANGING
EVT_AUINOTEBOOK_PAGE_CLOSE
EVT_AUINOTEBOOK_PAGE_CLOSED
EVT__AUINOTEBOOK_TAB_MIDDLE_DOWN
EVT__AUINOTEBOOK_TAB_MIDDLE_UP
EVT__AUINOTEBOOK_TAB_RIGHT_DOWN
EVT__AUINOTEBOOK_TAB_RIGHT_UP 
```

# python - 缩短 Matplotlib 图中的线段

> ID：15606613
> 
> 赞同：1
> 
> 时间：2013-03-25T02:13:27.210
> 
> 标签：python, matplotlib

是否可以缩短 matplotlib 图中的线段以生成如下图所示的图像，其中线段未完全到达点标记？

![用缩短的边绘图](../Images/572678f9bf4b29acda0d5eadfa0a9d80.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T05:58:52.753

我找到了以下愚蠢的方法，但对我来说它有效

```
import matplotlib.pyplot as plt

x = [0, 1, 2, 3, 4, 5]
y = [1, 3, 2, 5, 3, 1]
plt.figure()
plt.plot(x,y,'b-')
plt.plot(x,y,'wo', markersize=25, markeredgecolor = 'w')
plt.plot(x,y,'bo', markersize=7, markeredgecolor = 'w')
plt.show() 
```

# javascript - 如何使用 JavaScript 创建 @ 符号？

> ID：15606615
> 
> 赞同：-4
> 
> 时间：2013-03-25T02:13:32.093
> 
> 标签：javascript, jquery, ajax, flickr

我正在创建一个包含使用 @ 符号的字符串的变量。我怎样才能在 Javascript 中做到这一点，而不会将 @ 符号解析为 url 中的不同内容？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T02:16:49.643

您可能正在通过连接字符串来构建 URL：

```
var ajax_url = 'foo.json?' + key + '=' + value; 
```

不要那样做。使用 jQuery 的 AJAX 函数并传递一个对象：

```
$.ajax({
    url: 'foo.json',
    type: 'GET',
    cache: false, // You might need that
    data: {
        key: value
    },
    success: function(data) {
        ...
    }
}); 
```

`key`并`value`会自动转义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T02:14:46.130

`@`不是 JavaScript 字符串中的特殊字符。如果您需要将它放在字符串中，只需将其放入字符串中，就像放置任何其他普通字符一样。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-25T02:19:56.590

是 /@ 还是 @@？这些通常是其他语言中使用的约定。

# database - r* 树重新插入

> ID：15606616
> 
> 赞同：0
> 
> 时间：2013-03-25T02:13:36.593
> 
> 标签：database, tree, spatial, r-tree

重新插入如何工作？当我选择要重新插入的条目时，我再次运行插入算法？所以重新插入的条目可以在[树](http://en.wikipedia.org/wiki/R%2a_tree "r*-树")中的任何地方？或者这些条目只能在兄弟叶子中，事实上，只在叶子中，它们与我重新插入的叶子具有相同的父节点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T08:42:51.183

它们必须以**相同的高度**插入。

但除此之外，它的工作原理与插入相同。事实上，如果这能提高树的质量，您真的希望允许在其他子树中重新插入。

# c# - 在winform应用程序中关闭富文本框中的自动换行

> ID：15606618
> 
> 赞同：0
> 
> 时间：2013-03-25T02:13:42.173
> 
> 标签：c#, winforms, richtextbox, word-wrap

我正在尝试将具有非常宽记录（6000 多个字符）的文件的内容读入富文本框中。虽然我已经关闭了自动换行记录，但在一行显示几千个字符后仍然显示换行。无论如何我可以防止换行，直到遇到回车/换行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T06:26:55.063

~~富文本框.WordWrap = false;~~

~~这是你想要的吗？~~

认为这个问题可以解决您的问题：

[.NET - RichTextBox 中的长行在 3,510 个字符后换行](https://stackoverflow.com/questions/4541619/net-long-line-in-richtextbox-wrapped-after-3-510-characters)

# c# - Visual Studio 2012-s 自定义项目模板不可见

> ID：15606619
> 
> 赞同：9
> 
> 时间：2013-03-25T02:13:44.407
> 
> 标签：c#, visual-studio-2012, extensibility, visual-studio-sdk

我完成了来自 msdn 的自定义模板项目[教程第一部分，](http://msdn.microsoft.com/en-us/library/cc512961.aspx)并在 File - New - Project 菜单中获得了一个正常工作和可见的基本项目结构。然后我进入[msdn 第二部分](http://msdn.microsoft.com/en-us/library/cc826178.aspx)，无法通过“*测试 Visual Studio 模板*”部分。

当我在自定义项目模板文件夹中添加 .vstemplate 文件时，将我的自定义`Build Action`项目模板文件夹下的所有文件`ZipProject`的对话框中的自定义模板不再。`[ProvideProjectFactory]``null``".\\NullPath"`

模板 zip 文件夹被放置在正确的文件夹中，我可以打开以前创建的自定义项目（如果没有安装项目模板，这将不起作用），但我无法创建任何新的自定义项目，因为它们不是t 可见。

有人有创建自定义项目模板的经验吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T21:20:12.283

创建 Visual Studio 2012 扩展时，您实际上可以为要发布的每个项目模板创建一个单独的项目。创建这些项目的模板位于新建项目向导中的以下路径。您创建的每个模板都需要一个项目。

> Visual C# → 可扩展性 → C# 项目模板

然后，您的主扩展项目（生成 VSIX 文件的项目）将需要执行以下操作：

1.  为您的新项目模板添加对项目的引用
2.  选择引用并按 F4 跳转到“属性”窗口。确保设置了以下属性。
    *   VSIX 中包含的输出组：`TemplateProjectOutputGroup;`
    *   模板类型：`Project`
    *   VSIX 子路径：`ProjectTemplates`
    *   参考输出组件：`False`
3.  打开您的`source.extension.vsixmanifest`并在下面添加以下内容`<Content>`（您只需要一次，无论引用的项目模板数量如何。）
    *   `<ProjectTemplate>ProjectTemplates</ProjectTemplate>`
4.  将 的第 6 个参数更改`[ProvideProjectFactory(...`为`"ProjectTemplates"`。

笔记：

*   在此过程之后，您的主项目中将不再有`Templates`文件夹。

# winapi - vc++ 2010 添加编译器开关

> ID：15606620
> 
> 赞同：-2
> 
> 时间：2013-03-25T02:13:56.760
> 
> 标签：winapi, visual-c++, compiler-construction, static-libraries

我正在尝试构建一个库（这是我第一次尝试），文档中的说明对于了解如何但不适合像我这样的新手的人来说已经足够了。

这是文档所说的“要创建一个库，请执行以下最少步骤：

*   创建一个名为“库”的“Win32 静态库”，

*   将所有源文件添加到该项目中，

*   添加符号“TETLIBRARY”来编译开关。

*   构建项目。"

好的，我完成了前 2 个要点。只有 3 个源文件，我添加了它们。创建一个 win32 静态库很容易。我花了最后半小时/四十五分钟来寻找如何“添加编译开关”，最接近的是在属性中将“TETLIBRARY”添加到命令行，并且只返回“没有这样的文件”错误

所以我对你们这些可爱的方眼蛋头的问题是：如何添加符号“TETLIBRARY”来编译开关。”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T08:44:10.990

我认为这意味着定义`TETLIBRARY`为预处理器符号。去做这个：

打开项目属性。在“配置”下拉列表（位于对话框的左上角）中选择“所有配置”。导航到：

配置属性 | C/C++ | 预处理器

您应该会看到如下内容：

预处理器定义：`WIN32;<different options>`

将其更改为：

预处理器定义：`TETLIBRARY;WIN32;<different options>`

关闭对话框。你完成了。

请`<different options>`参阅调试和发布构建选项。如果您返回对话框，您应该会看到`TETLIBRARY`为两个版本定义的。

# java - 格式化 HTMLEditorKit

> ID：15606622
> 
> 赞同：1
> 
> 时间：2013-03-25T02:14:21.793
> 
> 标签：java, html, swing, dom, htmleditorkit

我正在尝试在 JTextPane 中进行一些基本的格式化。为此，我决定使用 html（HTMLDocument 和 HTMLEditorKit）。

这是按钮的动作监听器代码，应该使选定的文本变为粗体

```
boldButton.addActionListener(new ActionListener(){

            @Override
            public void actionPerformed(ActionEvent arg0) {

                    System.out.print(outputTextPane.getSelectedText());

                        int offset = outputTextPane.getSelectionStart();
                        int length = outputTextPane.getSelectionEnd()-outputTextPane.getSelectionStart();
                        String content = "";
                        try {
                            content = outputDoc.getText(offset, length);
                        } catch (BadLocationException e1) {
                            // TODO Auto-generated catch block
                            e1.printStackTrace();
                        }                   
                        try {
                            outputDoc.replace(offset, length, "", null);
                            outputKit.insertHTML(outputDoc, outputTextPane.getSelectionStart(), "<b>"+content+"</b>", 0, 0, HTML.Tag.B);

                        } catch (BadLocationException | IOException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        }

            }

        }); 
```

除非您尝试使粗体文本也加下划线（基本上相同的动作侦听器），否则它可以工作。源代码如下所示：

```
text -> select "text" and press bold button
<b>text</b> -> select "x" and press underline button
<b>te</b><u>x</u><b>t</b> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T03:28:48.953

> 这是按钮的动作监听器代码，应该使选定的文本变为粗体

不要创建自己的动作。使用编辑器工具包提供的操作。例如：

```
JButton bold = new JButton( new StyledEditorKit.BoldAction() ); 
```

# html - 将 HTML 添加到 Wordpress CSS 样式表

> ID：15606628
> 
> 赞同：0
> 
> 时间：2013-03-25T02:14:58.493
> 
> 标签：html, css, wordpress, stylesheet

是否可以将 html 代码添加到 css 样式表？喜欢设置一个css代码来处理html通过吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T02:26:06.893

我不确定您要做什么...但是，据我所知，html 不能放在样式标签或外部样式表中。

您是否正在尝试使用内联样式？像这样：

```
<p style="color:red;">Hello World?</p> 
```

[你试过什么？](http://whathaveyoutried.com)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T02:57:36.990

尝试这个：

`<div style="position: fixed; left:0px; top:0px"><script type="text/javascript"><!-- google_ad_client = "ca-pub-2558981689087321"; /* AdVertical */ google_ad_slot = "9183597492"; google_ad_width = 120; google_ad_height = 600; //--> </script> <script type="text/javascript" src="pagead2.googlesyndication.com/pagead/show_ads.js">; </script> </div>`

# c++ - C ++ - 如何在仅在运行时知道的类型之间进行转换

> ID：15606632
> 
> 赞同：2
> 
> 时间：2013-03-25T02:15:39.077
> 
> 标签：c++, types, type-conversion

我希望设计一个类型安全的 NxM *cross-connect*。这是一种允许 N 个函数输出中的任何一个连接到 M 个输入中的任何一个的机制。或者换句话说，将一个函数（来自一组函数）的返回值与另一个函数的参数连接起来。一个关键方面是这些*连接*必须在运行时可配置。我遇到的主要问题是输入的*类型*与输出的类型不同，具体取决于每个连接。

假设在程序中的某个任意点，我想将 的返回值连接`float foo()`到`val`.`void bar(double val)`

我目前有两个代表输入和输出的参数化类，分别命名为`Source<T>`和`Dest<U>`. T & U 应该是 float、double、bool、int、unsigned int 等。我有一个异构的`Source<T>`实例集合，一些 double、一些 float、一些 int、一些 bool。还有一个异构的`Dest<U>`实例集合，也有一些 double、一些 float、一些 int、一些 bool。有时 T 和 U 是同一类型。对于更多上下文，这些实例都与唯一名称相关联，允许更高级别的系统说“现在请连接 source::foo 与 dest::bar”，或“删除 source::red 和 dest::blue 之间的关联”。

在前面的示例中，在编译时，`foo()`程序员知道 from 的返回值类型是 float 并且可以在源代码中指定，因此`Source<float>`可以实例化 a 并与此函数关联。并且参数 to 的类型`bar()`也是已知的，因此`Dest<double>`可以实例化 a 并将其与此函数关联（使用`std::function`包装器）。然后在**运行时** `Source<float>`可以与 相关联并通过多态指针（通过所有实例共享的继承接口）`Dest<double>`将值传递给。然后将使用包装器调用该函数。`Dest<double>``Dest<U>``Dest<double>``bar()``std::function`

因此，在运行时，目标是将 any`Source`与 any关联`Dest`任意时间，并随时重新关联。所以我需要一种方法来创建一个函数，该函数可以将`T`只在运行时知道的类型转换为另一种`U`也只在运行时知道的类型。

稍微复杂一点的是，返回值和参数值实际上可能是任意大小的数组。例如，`foo()`可能返回一个`float[32]`数组，但`bar()`可能期望一个`double[8]`数组（可能会丢弃每 4 个值中的 3 个）。我的想法是，一旦它可以处理类型转换，这个“桥”机制就会处理这个问题。

坦率地说，我并没有真正看到如何实现这一点。如果 Source-to-Dest 关联在编译时已修复，我可以编写一系列模板`Bridge<T,U>`函数来进行转换，但因为这一切都需要在运行时发生，我认为这不是答案。

`Bridge<T,U>`编写通用函数，然后创建某种动态调度机制以在运行时根据 T 和 U 选择合适的调度机制是最好的方法吗？为了选择正确的实例，我将如何在运行时确定 T 和 U 的类型`Bridge`？我还想抓住 T 和 U 是同一类型的情况，因此避免任何不必要的转换（作为优化）。

还是有更好的方法来完成我想做的事情？

# java - 如何使用单独文件中的类编译 java 文件

> ID：15606633
> 
> 赞同：0
> 
> 时间：2013-03-25T02:15:40.307
> 
> 标签：java

并且对编译过程有点困惑：

这是我的文件结构

bin/test/A.java test/B.java

```
# B.java

package test; 
private class B{
    public static void say(){
        System.out.println("Hello.");
    };
}

# A.java

package test;
public class A{
    public static void main(String arg[]){
        test.B.say();
    }
} 
```

然后我编译 A.java

javac -cp test/*.java test/A.java

它给了我错误：

```
test/A.java:4: cannot find symbol
symbol  : class B
location: package test
        test.B.say();
            ^
1 error 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T02:19:13.403

`B`应该是公共课程而不是私人课程。从 更改`private class B`为`public class B`工作并成功编译。

# html - 水平手风琴的变换（270度）宽度和左侧css问题

> ID：15606635
> 
> 赞同：0
> 
> 时间：2013-03-25T02:15:53.340
> 
> 标签：html, css

我正在创建一个水平手风琴，但宽度、左侧和顶部位置有问题。我想要的是 h3 标签在转换后填充手风琴的整个高度，所以我使用宽度为 100%，但它弄乱了手风琴，并且 h3 标签彼此不相邻，两者之间存在间隙每个选项卡。如果有人知道将我的元素设置为彼此相邻并且没有间隙并且顶部的位置是对齐的，那就太好了。如果你希望我在完成教程后只使用 h3，你可以使用不同的元素这里是我的[jsFiddle](http://jsfiddle.net/SpaKe/)

html:

```
<div class="accordian" data-type="horizontal">
<h3 id="special_offers">Special Offers</h3>
<div></div>
<h3 id="new_products">New Products</h3>
<div></div>
<h3 id="reduced_to_clear">Reduced To Clear</h3>
<div></div>
<h3 id="coming_soon">Coming Soon</h3>
<div></div> 
```

CSS：

```
accordian {
height:300px;
}
.accordian h3, .accordian div {
display:block; float:left;  position:relative
}
.accordian h3 {
padding:6px
}
.accordian h3{
-webkit-transform:rotate(-270deg);
-moz-transform:rotate(-270deg);
-ms-transform:rotate(-270deg);
filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=1);
}
.accordian #special_offers {
background:#C90;
}
.accordian #new_products {
background:#C60;    
}
.accordian #reduced_to_clear {
background:#C30;    
}
.accordian #coming_soon {
background:#C00;    
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T09:41:34.230

最大的困惑是，通过旋转 div，宽度变为高度，高度变为宽度。除此之外，还有一个选择器可用于 div 应该转动的角（另请参阅[如何将 270 度旋转的文本对齐到左上角？](https://stackoverflow.com/questions/7668703/how-do-you-align-270deg-rotated-text-to-top-left)）。

我设置了一个高度 = 宽度 [http://jsfiddle.net/SpaKe/2/](http://jsfiddle.net/SpaKe/2/)的示例， 因为您可以看到所有事情都很好

现在，如果您想制作一个高 300 像素、宽 50 像素的矩形，并且您希望将 div 彼此相邻对齐。然后你必须引入 margin-right: -xxx px 。然后计算 height-width = 250px 之间的差异。所以margin-right:-250px; 应该做的伎俩。

再举一个例子： http: [//jsfiddle.net/SpaKe/5/](http://jsfiddle.net/SpaKe/5/) 正如我们在这里看到的，它适用于大多数浏览器（目前我无法测试 IE 行为）

```
.accordian h3{
width:300px;
    height:50px;
    margin-right:-250px;
    float:left;
    position:relative;

    -webkit-transform: rotate(-270deg);
    -webkit-transform-origin: left bottom;
    -moz-transform: rotate(-270deg);
    -moz-transform-origin: left bottom;
    -ms-transform: rotate(-270deg);
    -ms-transform-origin: left bottom;
    -o-transform: rotate(-270deg);
    -o-transform-origin: left bottom;
    transform: rotate(-270deg);
    transform-origin: left bottom;
} 
```

所以请记住：旋转时改变宽度和高度，您可以设置 div 应该旋转的角。

# cakephp - CakePHP - 如何重新分配 Paginator 参数

> ID：15606636
> 
> 赞同：0
> 
> 时间：2013-03-25T02:16:14.063
> 
> 标签：cakephp, pagination

我面临一个我不明白的问题。

在我的控制器中：

```
$this->paginate = $a;
$list1 = $this->paginate('Model');
$this->paginate = $b;
$list2 = $this->paginate('Model'); 
```

我的问题是，为什么 $list2 与 $list1 完全相同，而我在获得 $list1 后已经更改了 $this->paginate？而且，如何使这些代码工作，以便我可以根据 $a 和 $b 得到 $list1 和 $list2？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T04:11:00.897

只是预感：当您执行以下操作时会发生什么：

```
$this->paginate = $a;
$list1 = $this->paginate('Model');
$this->paginate = array();
$this->paginate = $b;
$list2 = $this->paginate('Model'); 
```

$a 和 $b 的值是否不同？

# php - jQuery 模态表单提交

> ID：15606639
> 
> 赞同：3
> 
> 时间：2013-03-25T02:16:48.897
> 
> 标签：php, jquery, ajax

我正在尝试提交一个模态 jQuery 表单。我几乎从网站上获取了代码，只做了一些调整，并将 javascript 移到了它自己的文件中。

我正在努力将表单信息传递给我正在尝试通过 AJAX 的 php 脚本。当我拉出表单的 serializedArray() 时，我得到表单中每个元素的 [object Object]。我已经将 php 简化为电子邮件字段，直到我可以正常工作为止。我误解了这背后的逻辑吗？

HTML

```
<div id="dialog-form">
        <form id="sign_up_form" name="sign_up_form" method="post">
            <fieldset>
              <label for="name">Name*</label>
              <input type="text" name="name" id="name" class="text ui-widget-content ui-corner-all" />
              <label for="email">Email*</label>
              <input type="text" name="email" id="email" value="" class="text ui-widget-content ui-corner-all" />
              <label for="password">Password*</label>
              <input type="password" name="password" id="password" value="" class="text ui-widget-content ui-corner-all" />
              <label for="code">Code</label>
              <input type="code" name="code" id="code" value="" class="text ui-widget-content ui-corner-all" />
            </fieldset>
        </form>
    </div> 
```

JQuery - bValid 是表单验证并按预期工作

```
$(  "#dialog-form"  ).dialog({
    autoOpen: false,
    height: 300,
    width: 350,
    modal: true,
    buttons: {
        "Create an account": function() {

        var data_string = $( "#sign_up_form" ).serializeArray();

        alert(data_string);

        if ( bValid ) {
            $.ajax({
                type: "POST",
                url: url,
                dataType: "json",
                data: data_string,
                success: function(data){
                    alert(data)
                }
            });
            $( this ).dialog( "close" );
        }
      },
      Cancel: function() {
        $( this ).dialog( "close" );
      }
    },
    close: function() {
      allFields.val( "" ).removeClass( "ui-state-error" );
    }
}); 
```

PHP

```
if (isset($_POST['email'])) {
    $jsonReceiveData = $_POST['email']; 
}
else{
    $jsonReceiveData = "didn't pass";
}
echo json_encode($jsonReceiveData); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T02:19:43.590

使用`var data_string = $( "#sign_up_form" ).serialize();`而不是`var data_string = $( "#sign_up_form" ).serializeArray();`. [serializeArray()](http://api.jquery.com/serializeArray/)返回一个数组而不是查询字符串

[。连载（）](http://api.jquery.com/serialize/)

# javascript - 在jquery中的标签之间替换文本节点？

> ID：15606643
> 
> 赞同：1
> 
> 时间：2013-03-25T02:17:54.870
> 
> 标签：javascript, jquery

我一直在寻找我的问题的答案，但找不到确切的答案。这是我拥有且无法更改的 HTML：

```
<div class="metadata"> 
    <span class="meta"> 
        <span>    
        </span>     
    </span> 
    <a class="sourceTitle" href="#">Link to site</a> 
      11d

     &nbsp;//&nbsp; 
    <span class="action">preview</span> 
</div> 
```

基本上我需要将 更改`11d`为`March 13th`. 我弄清楚了它背后的所有算法，但看在上帝的份上，我找不到替代它的方法。我在这里有一个 JSFiddle：http: [//jsfiddle.net/7tPTu/2/](http://jsfiddle.net/7tPTu/2/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T02:30:43.440

选择文本节点，然后替换文本：

```
var text = $(".metadata").contents().filter(function () {
    return this.nodeType === 3;
}).wrap("<span class='textNode'>");

var target = $("span.textNode:contains('11d')");
target.text(target.text().replace(/11d/, "March 13th")); 
```

演示：http: [//jsfiddle.net/DerekL/eBwjT/](http://jsfiddle.net/DerekL/eBwjT/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T02:24:21.430

您需要将“11d”放入它自己的跨度并给它一个ID。然后你可以这样做：

```
$("#yourSpanId").text(yourText); 
```

这将使用 yourText 更新 yourSpanId。（如果您对字符串进行硬编码，则需要加上引号：

```
$("#yourSpanId").text("some text"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T02:32:13.027

你也可以在没有 jQuery 的情况下使用 innerHTML 或 innerText 属性来做到这一点。

```
document.querySelector(".sourceTitle").innerHTML = "March 13th"; 
```

# php - 在 PHP 中使用 simple_html_dom 类抓取数据

> ID：15606645
> 
> 赞同：0
> 
> 时间：2013-03-25T02:18:06.633
> 
> 标签：php, screen-scraping

我正在尝试从[该网站的搜索结果中抓取数据](http://www.birthdatabase.com/)

有人告诉我，最好的方法是使用[http://simplehtmldom.sourceforge.net/](http://simplehtmldom.sourceforge.net/)中的 simple_html_dom 类 。结果页面非常繁忙，我无法优化抓取的数据。

我通过以下方式获取页面内容：

```
$html = file_get_html('http://www.birthdatabase.com/cgi-bin/query.pl?textfield=' . $first . '&textfield2=' . $last . '&age=&affid='); 
```

我收到的代码是：

```
$n = 0;
foreach($html->find('table tbody tr td div font b table tbody') as $element) {
    @$row[$n]['tr']  = $element->find('tr')->text;
    $n++;
}

// output your data
print_r($row); 
```

这个 DOM 导航正确吗？有没有更好的方法来获取抓取的数据？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T05:47:04.240

你杀了我的时间。试试它是否是你想要的：`:)`

```
<?php
include 'simple_html_dom.php';

$html = file_get_html('http://www.birthdatabase.com/cgi-bin/query.pl?textfield=richard&textfield2=chun');
$people = array();
$cell = $html->find('table',2)->find('table',0)->find('tr');
$total = count($cell);
$i = -1;
foreach($cell as $element){
    if($i == -1) { $i++; continue; }
    if($i == $total-2) break;
    $people[$i]['f_name'] = $element->find('td',0)->plaintext;
    $people[$i]['l_name'] = $element->find('td',2)->plaintext;
    $people[$i]['b_day'] = $element->find('td',3)->plaintext;
    $people[$i]['city'] = $element->find('td',4)->plaintext;
    $people[$i]['state'] = $element->find('td',5)->plaintext;
    $i++;

}

var_dump($people);

?> 
```

# javascript - 地理编码器的 Google 地图 API 问题

> ID：15606660
> 
> 赞同：0
> 
> 时间：2013-03-25T02:21:13.133
> 
> 标签：javascript, google-maps-api-3

我想我只是在做一些愚蠢的事情，因为我的 javascript 技能不是最好的。以下代码生成一个空白的灰色地图：

```
function initialize() {
        directionsDisplay = new google.maps.DirectionsRenderer();
        geocoder = new google.maps.Geocoder();
        var address = "Minneapolis, MN";
        geocoder.geocode( { 'address': address}, function(results, status) {
        if (status == google.maps.GeocoderStatus.OK)
           {
               lat = results[0].geometry.location.lat();
               lng = results[0].geometry.location.lng();
               addresslatlng = new google.maps.LatLng(results[0].geometry.location.lat(),results[0].geometry.location.lng());  
           }
           else
           {
                   alert(status);
           }
        });
        var mapOptions = {
          zoom: 7,
          mapTypeId: google.maps.MapTypeId.ROADMAP,
          center: addresslatlng
        };
        var map = new google.maps.Map(document.getElementById('map-canvas'),
            mapOptions);
        directionsDisplay.setMap(map);
        directionsDisplay.setPanel(document.getElementById('directions-panel'));
      } 
```

但是，如果只是将“中心：addresslatlng”更改为：

```
center: new google.maps.LatLng(-34.397, 150.644) 
```

它工作正常。

我尝试使用**lat**和**lng**但这也不起作用：

```
center: new google.maps.LatLng(lat, lng) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T02:39:41.967

地理编码是异步的。您需要在回调函数中使用结果：

```
function initialize() {
    directionsDisplay = new google.maps.DirectionsRenderer();
    geocoder = new google.maps.Geocoder();
    var address = "Minneapolis, MN";
    geocoder.geocode( { 'address': address}, function(results, status) {
    if (status == google.maps.GeocoderStatus.OK)
       {
           lat = results[0].geometry.location.lat();
           lng = results[0].geometry.location.lng();
           addresslatlng = new google.maps.LatLng(results[0].geometry.location.lat(),results[0].geometry.location.lng());  
    var mapOptions = {
      zoom: 7,
      mapTypeId: google.maps.MapTypeId.ROADMAP,
      center: addresslatlng
    };
    var map = new google.maps.Map(document.getElementById('map_canvas'),
        mapOptions);
    directionsDisplay.setMap(map);
    directionsDisplay.setPanel(document.getElementById('directions-panel'));
       }
       else
       {
               alert(status);
       }
    });
  } 
```

[工作示例](http://www.geocodezip.com/v3_simpleMap_geocoder.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T02:32:17.310

我认为这

```
lat = results[0].geometry.location.lat();
lng = results[0].geometry.location.lng(); 
```

真的应该更像这样

```
lat = results[0].geometry.location.lat;
lng = results[0].geometry.location.lng; 
```

您也可以创建`lat`然后`lon`不要在下一行使用它们。改变这个

```
addresslatlng = new google.maps.LatLng(results[0].geometry.location.lat(),results[0].geometry.location.lng()); 
```

对此

```
addresslatlng = new google.maps.LatLng(lat, lng); 
```

# excel-2007 - Excel 电子表格搜索和替换

> ID：15606661
> 
> 赞同：-1
> 
> 时间：2013-03-25T02:21:13.493
> 
> 标签：excel-2007

我有一个电子表格，其中包含 100 行中的 1000 行，其中软件版本号的值如下

11.2.4.5

8.4.1.1

8.0.0.1

2

4

1

无效的

未知

我想改成

11.X

8.X

2.X

4.X

1.X

版本未知

版本未知

这可能吗，是否可以将公式集成到电子表格中或一个按钮供用户单击并选择列/行范围

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T12:34:19.887

在我看来，否决票可能部分是因为您的问题不是很清楚（例如“用户单击并选择列/行范围的按钮”），但下面的公式应该会有所帮助。[顺便说一句，在请求公式解决方案时，它可以帮助指定数据的位置。]我建议将直接提取数值与查找表（内容由您选择）结合起来用于文本：

`=IFERROR(IFERROR(VLOOKUP(A1,F:G,2,FALSE),LEFT(A1,FIND(".",A1))&"X"),A1&".X")`

这会尝试在 F:G 中查找文本值，如果未找到则默认搜索句号，如果未找到则添加`.X`.

假设您的数据在 ColumnA 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T12:34:28.337

在原始版本号旁边为您的数据添加一列。将其放入新列顶部的单元格中，将 (C3) 引用更改为您的第一个单元格引用：

```
=IF(ISNUMBER(FIND(".",C3)),CONCATENATE(LEFT(C3,(FIND(".",C3))),"X"),IF(ISNUMBER(C3),CONCATENATE(C3,".X"),"Version Unknown")) 
```

抄下来。

# c++ - 初始化数组可以正常工作，但是当尝试将其打印出来时，它会打印一个额外的列和一个意外的字符

> ID：15606665
> 
> 赞同：0
> 
> 时间：2013-03-25T02:21:59.827
> 
> 标签：c++, multidimensional-array, tic-tac-toe

所以这编译没有问题。我遇到的问题是，当它打印到控制台时，右下角有一个额外的列和一个奇怪的 ascii 字符。如果我试图减小数组的大小，我不能再用 9 个元素初始化它——我必须有 9 个元素才能使它成为一个井字游戏板。我认为这是一个错误，但如果是这样，我不知道如何解决它。我已经阅读了很多“tic tac toe”类似的问题，但他们似乎没有遇到同样的问题。

```
#include <iostream>

using namespace std;

int main ()
{
int countrow, countcol, play=1, subscript1, subscript2;
int ARRAY_ROWS = 3, ARRAY_COLS =3;
char board [3][3] = {{42, 42,42}, {42, 42,42}, {42, 42,42}};
char input;
while(play>0)
{
    for(countrow = 0; countrow<ARRAY_ROWS; countrow++)
    {
        for(countcol=0; countcol<ARRAY_COLS; countcol++)
        {
            cout<<board [countrow][countcol];
        }
        cout<<board[countrow][countcol];
        cout<<endl;
    }
cout<<"Player 1, enter your mark using a row column coordinate system.\n";
cin>>subscript1>> subscript2;
subscript1+=1;
board[subscript1][subscript2] = 88;
cout<<"Player 2, enter your mark using a row column coordinate system.\n";
cin>>subscript1>> subscript2;
board[subscript1][subscript2] = 79;
}
system("pause");
return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T02:26:20.710

这是问题所在：

```
for(countrow = 0; countrow<ARRAY_ROWS; countrow++)
{
    for(countcol=0; countcol<ARRAY_COLS; countcol++)
    {
        cout<<board [countrow][countcol];
    }
    cout<<board[countrow][countcol]; 
    //^^^^^This one is redundant and you are accessing invalid memory block
    //^^^^^^ countcol is out of bound
    cout<<endl;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T02:26:30.180

您有以下行的冗余副本：

```
cout<<board[countrow][countcol]; 
```

这将导致每行带有垃圾数据的额外列（countcol = 3，在数组边界之外）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T02:27:27.930

在你的内循环之后，你有另一个

```
 cout<<board[countrow][countcol]; 
```

您不需要...删除它，多余的列就消失了。

# java - 如何为此设计存储系统？

> ID：15606667
> 
> 赞同：0
> 
> 时间：2013-03-25T02:22:04.557
> 
> 标签：java, database

我真的坚持为此设计一个数据库。

这是我自己的 CS 项目。这意味着整个代码都是我的想法。无论如何，我想知道存储图片中显示的所有信息的最有效方法。

我考虑过使用 ArrayList，但我反复质疑自己是否可以使用 ArrayList。我可能可以使用数据库，但我还没有学会它。

图片应该是不言自明的。所有这些信息仅属于 1 名学生。那么，如何设计出最好的数据存储系统来存储至少 20 个学生的信息呢？

由于我无法发布图片，请点击此链接：http: [//j.stack.imr.com/0Q.png](http://j.stack.imr.com/0Q.png)

感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T02:37:35.033

看起来像一个数据库表，每个学生一行，另一个数据库表，每个作业一行。我要么让数据库在我存储它时为每个学生记录创建一个索引（关系数据库中的当前方式），要么我可以使用学生 ID 号，假设它是唯一且永久的（我认为它是一个较弱的选择）。每个学生记录和每个作业记录中都有这个索引，因此每个作业都与一个且只有一个学生相关联，但您可以将多个作业与一个学生相关联。

有许多免费数据库可用；我用过并喜欢德比；如果您只是从这个程序访问它，您可以将它用作“嵌入式”数据库，从而为您的程序连接运行数据库服务器省去一些麻烦。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T02:38:09.797

我相信最好的方法是通过数据库。
既然您提到您对 DB 了解不多，让我为您指明正确的方向
首先安装[XAMPP](http://www.apachefriends.org/en/xampp-windows.html)（这将允许您在本地计算机上创建 MySQL 数据库）

您必须将 JDBC 驱动程序安装到您的 IDE 中（无论您使用的是 netbeans 还是 eclipse）

在您的项目中创建一个或多或少像这样的类

```
public class SQLConnect 
{
    public static Connection ConnectDb() 
    {
      try
      {
          Class.forName("com.mysql.jdbc.Driver");
          Connection conn = null;
            try {
                conn = DriverManager.getConnection("jdbc:mysql://localhost/w1283057", "root", "");
            } catch (SQLException ex) {
                Logger.getLogger(SQLConnect.class.getName()).log(Level.SEVERE, null, ex);
            }
          return conn;
      }
      catch (ClassNotFoundException e)
      {
         System.out.println("not connected");
         e.printStackTrace();//print extra info if error is thrown
         return null; 
      }

  }

} 
```

然后你可以在你的另一个类上创建 SaveActionPerformed （你有表单表）
它可能看起来像这样（请不要这是你与 SQLConnect 类建立连接以及将数据插入数据库的地方

```
public class Something extends javax.swing.JFrame 
{
      Connection conn = null; //A connection (session) with a specific database
      ResultSet rs = null; //A table of data representing a database result set, which is usually generated by executing a statement that queries the database.
      PreparedStatement pst = null; //An object that represents a precompiled SQL statement.A SQL statement is precompiled and stored in that object

     private void SaveActionPerformed(jawa.awt.event.ActionEvent evt)
     {  
        try{
        conn = SQLConnect.ConnectDb();
        //inserting all values to database            
        String sql = "INSERT INTO bla"
                   + "(foo, foo1, foo2, foo3, foo4, etc"
                   + "VALUES (?, ?, ?, ?, ?)";  
        pst = conn.prepareStatement(sql);

    //Than you take all values from the fields and put them into db
    // i.e. You have field name Mark. In order to put this into db you need 

     pst.setString(1, Mark);  <- this means that preparestatement will put whatever is in the mark into first column.
     pst.executeUpdate(); <- order to execute

      } 
```

希望这会让你走上正确的轨道

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T02:39:11.663

对我来说，最好的方法是使用 Postgresql。您只需要一个表学生（例如）将存储所有学生数据。之后，您可以创建一个或多个类（取决于您）来描述表格并执行一些操作，例如搜索学生或其他。Postgresql 的主要优点是不需要服务器！这是一个[教程](http://zetcode.com/db/postgresqljavatutorial/)

# architecture - ZF2 Skeleton 和 Doctrine ORM xml 模式合并

> ID：15606670
> 
> 赞同：3
> 
> 时间：2013-03-25T02:22:17.327
> 
> 标签：architecture, orm, doctrine-orm, xsd, zend-framework2

我在 Zend Framework 2 中使用[Doctrine Module](https://github.com/doctrine/DoctrineModule) for ORM 功能。我正在尝试构建一个基于 Zend Skeleton Application 的模块化架构，它可以覆盖和扩展模块 B 中模块 A 的功能。我还必须扩展实体只需通过新模块中的插件即可。

现在我的问题是实体的 xml 模式在模块 A 中是非常静态的。不可能用模块 B 覆盖它。我想实现一个服务，告诉学说模块在哪里可以找到用于特定的 xml 模式实体，但这还不够。

例如，当模块 B 扩展模块 A 但模块 C 也扩展模块 A - 使用哪个 xml 模式 - 来自模块 B 或来自模块 C ？所以我想从两个或多个模式文件中动态构建 xml 模式——一个在模块 B 中，一个在模块 C 中。

实现这种架构的最佳方式是什么？编写可以从所有模块调用以收集所有 xml 模式文件的服务是否是一种好方法？如何告诉 Doctrine 合并这些文件？有没有比接触 Doctrine Module 更好的方法——例如在配置文件中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-04T13:15:20.720

@ibo_s 运气不好。试图写一个适配器，但那样复杂，我很快就卡在那里了。最后，我只是复制了一些实体 dcm.xml 并使用配置覆盖来指向正确的实体。所以放弃了扩展实体。

# mysql - 用户的“分钟工作”。如何进行此查询？

> ID：15606675
> 
> 赞同：0
> 
> 时间：2013-03-25T02:23:18.890
> 
> 标签：mysql, sql

我有一个这种格式的表：

```
id, user, action, date
1, user1, a1, 2013-03-20 10:00:01
2, user2, a1, 2013-03-20 10:00:03
3, user2, a1, 2013-03-20 10:00:12
4, user3, a1, 2013-03-20 10:00:20
5, user2, a1, 2013-03-20 10:00:24
....
... 
```

并与 30 个不同的用户一起继续所有分钟和小时 (24x7)...

现在我需要知道“分钟工作”......例如：

1.  如果我整天只有一个用户，那么我今天有 24 小时 * 60 分钟 = 1440 分钟的工作时间。
2.  如果全天（24 小时）有 2 个用户，则为：2880 分钟工作...

但是......用户不整天工作（当然......）我怎么能做这个查询？

**一些问题的答案：**

*   我需要让所有用户的分钟工作（所有用户的分钟总和）
*   如果他们在 5 分钟内没有采取任何行动，我假设用户“注销”。
*   我可以使用一些 PHP 代码来完成这项工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T19:18:24.657

这个查询做到了。

```
SELECT user, CAST(date AS DATE) day, (SUM(worked_seconds) / 60) minutes
FROM (
      SELECT    w1.user
      ,         w1.date
      ,         UNIX_TIMESTAMP(
                  LEAST(
                    MIN(IFNULL(w2.date, w1.date + INTERVAL 5 MINUTE)),
                    CAST(w1.date AS DATE) + INTERVAL 1 DAY
                  )
                )
                - UNIX_TIMESTAMP(w1.date) worked_seconds 
      FROM      work w1
      LEFT JOIN work w2
      ON        w1.user = w2.user
      AND       w1.date < w2.date
      AND       w1.date + INTERVAL 5 MINUTE > w2.date
      AND       CAST(w1.date AS DATE) = CAST(w2.date AS DATE)
      GROUP BY  w1.user, w1.date
) work
GROUP BY user, day 
```

该查询将每个工作行与同一用户 (ON w1.user = w2.user) 在 5 分钟间隔内 (AND w1.date < w2.data AND w1.date + INTERVAL 5 MINUTE > w2.日期），前提是工作发生在同一天 (CAST(w1.date AS DATE) = CAST(w2.date AS DATE)。

根据定义，在特定日期的最后一行不会有后面的行，并且因为我们使用 LEFT JOIN 这将导致 NULL 值。我们假设对于最后一行，按照注销规则完成了 5 分钟的工作 (IFNULL(w2.date, w1.date + INTERVAL 5 MINUTE)

对于每个（日期，用户）行，可能会找到多个后面的行，在这种情况下，我们希望找到最早的行，以便我们可以计算两个日期之间的差异。这是使用 MIN 函数完成的。

现在，由于最后一行 + 5 分钟间隔可能会超出一天的结束时间，我们使用 LEAST 来防止这种情况。

UNIX_TIMESTAMP 用于将日期时间转换为秒，因此我们可以轻松地减去它们并获得工作秒数。

在外部查询中，最后我们对每个用户的工作求和并除以 60 以获得从秒到分钟的结果。

# java - 无法访问 GreenMail 收到的电子邮件的属性

> ID：15606678
> 
> 赞同：2
> 
> 时间：2013-03-25T02:23:36.843
> 
> 标签：java, email, imap, greenmail

我正在尝试使用 GreenMail 作为样机邮件服务器进行单元测试。它的工作是等待 IMAP/POP3 请求并发送虚拟邮件，但我无法让它工作。

```
public class EMailMonitoringTest {
private static final String USER_PASSWORD = "test";
private static final String USER_NAME = "jDownloaderTestUser";
private static final String EMAIL_USER_ADDRESS = "jdtest@localhost";
private static final String EMAIL_TO = "someone@localhost.com";
private static final String EMAIL_SUBJECT = "Test E-Mail";
private static final String EMAIL_TEXT = "This is a test e-mail.";
private static final String LOCALHOST = "127.0.0.1";
private GreenMail mailServer;

@Before
public void setUp() {
    mailServer = new GreenMail(ServerSetupTest.ALL);
    mailServer.start();
}

@After
public void tearDown() {
    mailServer.stop();
}

@Test
public void getMails() throws AddressException, MessagingException, FolderException, UserException, IOException {
    // create user on mail server
    GreenMailUser user = mailServer.setUser(EMAIL_USER_ADDRESS, USER_NAME, USER_PASSWORD);

    // create an e-mail message using javax.mail ..
    MimeMessage message = new MimeMessage((Session) null);
    message.setFrom(new InternetAddress(EMAIL_TO));
    message.addRecipient(Message.RecipientType.TO, new InternetAddress(EMAIL_USER_ADDRESS));
    message.setSubject(EMAIL_SUBJECT);
    message.setText(EMAIL_TEXT);

    // use greenmail to store the message
    user.deliver(message);

    // check received messages
    Message[] messages = mailServer.getReceivedMessages();
    for (Message m : messages) {
        System.out.println("*** Class: " + m.getClass() + " ***");
        System.out.println("From: " + m.getFrom()[0]);
        System.out.println("To: " + m.getRecipients(Message.RecipientType.TO)[0]);
        System.out.println("Subject: " + m.getSubject());
        System.out.println("Content: " + m.getContent());
    } 
```

这里没问题，到目前为止的输出是这样的：

> ** 类：类 javax.mail.internet.MimeMessage **
> 
> 来自：某人@localhost.com
> 
> 收件人：jdtest@localhost
> 
> 主题：测试电子邮件
> 
> 内容：这是一封测试邮件。

之后，我尝试从 GreenMail IMAP 服务器获取邮件：

```
 // fetch the e-mail via imap using javax.mail ..
    Properties props = new Properties();
    Session session = Session.getInstance(props);
    URLName urlName = new URLName("imap", LOCALHOST,
    ServerSetupTest.IMAP.getPort(), null, user.getLogin(),
    user.getPassword());
    Store store = session.getStore(urlName);
    store.connect();

    Folder folder = store.getFolder("INBOX");
    folder.open(Folder.READ_ONLY);
    messages = folder.getMessages();
    System.out.println("Size of Messages: " + messages.length);
    for (Message m : messages) {
        System.out.println("** Class: " + m.getClass() + " **");
        System.out.println("From: " + m.getFrom()[0].toString());
        System.out.println("To: " + m.getRecipients(Message.RecipientType.TO)[0].toString());
        System.out.println("Subject: " + m.getSubject().toString());
        System.out.println("Content: " + m.getContent().toString());
    } 
```

我的奖励是

> 消息大小：1
> 
> ** 类：类 com.sun.mail.imap.IMAPMessage **

和一个 FolderClosedException：

> javax.mail.FolderClosedException：* BYE JavaMail 异常：com.sun.mail.imap.IMAPMessage.loadEnvelope(IMAPMessage.java:1217) 处 com.sun.mail.imap.IMAPMessage.getFrom(IMAPMessage. java:252) 在 jd.controlling.EMailMonitoringTest.test(EMailMonitoringTest.java:85) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) 在 sun.reflect .DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke(Method.java:601) at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44) at org .junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15) 在 org.junit.runners.model.FrameworkMethod。在 org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20) 在 org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28) 调用Explosively(FrameworkMethod.java:41)在 org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:31) 在 org.junit.runners.BlockJUnit4ClassRunner.runNotIgnored(BlockJUnit4ClassRunner.java:79) 在 org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner .java:71) 在 org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:49) 在 org.junit.runners.ParentRunner$3.run(ParentRunner.java:193) 在 org.junit.runners.ParentRunner$1。在 org.junit.runners.ParentRunner.access$000（ParentRunner.java:42) 在 org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184) 在 org.junit.runners.ParentRunner.run(ParentRunner.java:236) 在 org.eclipse.jdt.internal.junit4。 runner.JUnit4TestReference.run(JUnit4TestReference.java:50) 在 org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38) 在 org.eclipse.jdt.internal.junit.runner.RemoteTestRunner。 runTests(RemoteTestRunner.java:467) at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683) at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner. java:390) 在 org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)java:236) 在 org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50) 在 org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)在 org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467) 在 org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683) 在 org.eclipse .jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390) 在 org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)java:236) 在 org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50) 在 org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)在 org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467) 在 org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683) 在 org.eclipse .jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390) 在 org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)runTests(RemoteTestRunner.java:467) at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683) at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner. java:390) 在 org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)runTests(RemoteTestRunner.java:467) at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683) at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner. java:390) 在 org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)

尝试访问 folder.getMessage(0) 只会导致 IndexOutOfBoundsException，但在数组中存储了一个 IMAPMessage 类的消息。有人知道这件事吗？

啊，是的，我尝试了[hashCode](http://www.hascode.com/2012/07/integration-testing-imap-smtp-and-pop3-with-greenmail/#IMAP)上的示例，但它们也因同样的原因而失败......访问接收到的 IMAP 消息的属性时出现 FolderClosedException......

感激地接受任何提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-07T08:20:29.743

使用 IMAP 时，您配置了 LOCALHOST，但在启动/创建 GreenMail 时从未告诉 GreenMail 使用 LOCALHOST。

使用 GreenMail 服务器**ServerSetupTest.IMAP.getBindAddress()**的绑定地址而不是**LOCALHOST**：

```
// fetch the e-mail via imap using javax.mail ..
// Hint: Create session via GreenMailUtil
Session session = GreenMailUtil.getSession(ServerSetupTest.IMAP);
// Use configured host address instead of supplying a 
URLName urlName = new URLName("imap", ServerSetupTest.IMAP.getBindAddress(),
   ServerSetupTest.IMAP.getPort(), null, user.getLogin(),
   user.getPassword());
Store store = session.getStore(urlName);
store.connect();` 
```

# java - 线程“AWT-EventQueue-0”中的异常 java.lang.NumberFormatException：空字符串

> ID：15606685
> 
> 赞同：1
> 
> 时间：2013-03-25T02:24:33.900
> 
> 标签：java, swing, parsing, variables, floating-point

我在运行它编译但无法正常运行的程序时遇到问题。当我运行它并尝试执行计算时，它会吐出一堆错误。我认为它必须与变量类型有关。这是程序：

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;
public class area extends JFrame implements ActionListener, ItemListener{

 //row 1
  JPanel row1 = new JPanel();
  JLabel select = new JLabel("Please select what you would like to caculate the area and volume of.");
 //row 2
  JPanel row2 = new JPanel();
  JCheckBox circle = new JCheckBox("Circle", false);
  JCheckBox cube = new JCheckBox("Cube", false);
 //row 3 
  JPanel row3 = new JPanel();
  JLabel radlab = new JLabel("Radius of the circle (in cm)");
  JTextField rad = new JTextField(3);
  JLabel sidelab = new JLabel("A side of the cube (in cm)");
  JTextField side = new JTextField(3); 
//row4
  JPanel row4 = new JPanel(); 
  JButton solve = new JButton("Solve!");
//row 5
  JPanel row5 = new JPanel();
  JLabel areacallab = new JLabel("Area");
  JTextField areacal = new JTextField(10);
  JLabel volumelab = new JLabel("Volume");
  JTextField volume = new JTextField(10);
public area(){
  setTitle("Area Caculator");
    setSize(500,400);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setVisible(true);
//disables all text areas 
  rad.setEnabled(false);
  side.setEnabled(false);
  areacal.setEnabled(false);
  volume.setEnabled(false);
//add listeners
  circle.addItemListener(this);
  cube.addItemListener(this);
  solve.addActionListener(this);
FlowLayout one = new FlowLayout(FlowLayout.CENTER);
   setLayout(one);

  row1.add(select);
   add(row1);

  row2.add(circle);
  row2.add(cube);
   add(row2);

  row3.add(radlab);
  row3.add(rad);
  row3.add(sidelab);
  row3.add(side);
   add(row3);

  row4.add(solve);
   add(row4);

  row5.add(areacallab);
  row5.add(areacal);
  row5.add(volumelab);
  row5.add(volume);
   add(row5);

}
public void circlepick(){
  //cube.setCurrent(false);
  cube.setEnabled(false);
  rad.setEnabled(true); 
}
public void cubepick(){
  circle.setEnabled(false);
  side.setEnabled(true);
}
@Override
public void itemStateChanged(ItemEvent event) {
  Object item = event.getItem();
    if (item == circle){
      circlepick();
    }
    else if (item == cube){
      cubepick();
    }
  }
@Override
public void actionPerformed(ActionEvent evt){
  //String radi = rad.getText();
  //String sid = side.getText(); 

   //circlesolve();
   //cubesolve();
String radi = rad.getText();
String sid = side.getText(); 
double radius = Double.parseDouble(radi);
double length = Double.parseDouble(sid);

  double cirarea = Math.PI * Math.pow(radius, 2);
  double cirvolume =  (4.0 / 3) * Math.PI * Math.pow(radius, 3);
  double cubearea = Math.pow(length, 2);
  double cubevolume = Math.pow(length, 3);
  areacal.setText("" + cirarea + cubearea + "");
  volume.setText("" + cirvolume + cubevolume + "");
}
public static void main(String[] args) {
    area are = new area(); 

}
} 
```

这是尝试执行数学运算时打印出的错误（对不起，它真的很长）。

> 线程“AWT-EventQueue-0”java.lang.NumberFormatException 中的异常：区域 的 java.lang.Double.parseDouble(Double.java:548) 处
> 的 sun.misc.FloatingDecimal.readJavaFormatString(FloatingDecimal.java:1038)处的空字符串.actionPerformed(area.java:112) ...

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T02:31:15.210

调用函数时：

```
double radius = Double.parseDouble(radi);
double length = Double.parseDouble(sid); 
```

要么 要么`radi`是`sid`空`String`, 就是这样

```
java.lang.NumberFormatException: empty String 
```

告诉你。
您可能会考虑`System.out.println(raid + ", " + sid)`在解析之前添加一个以检查哪些值是空字符串并确保字符串不为空。

`Double.parseDouble(String s)``NumberFormatException`当给定的`String s`不能被解析成一个`double`值时抛出一个。

# jquery - 如何将 flexslider 的缩略图 controlnav 移动到主滑块上方？

> ID：15606688
> 
> 赞同：0
> 
> 时间：2013-03-25T02:25:32.290
> 
> 标签：jquery, slider, flexslider

我正在使用带有缩略图控制导航的 Flexslider 2，就像在[示例](http://flexslider.woothemes.com/thumbnail-controlnav.html)中一样，但我希望缩略图位于主滑块上方，而不是下方。有没有办法做到这一点？

顺便说一句，我将完全接受 X 滑块作为答案非常简单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T03:01:21.053

我不认为这会是个问题。您只需要编辑一些 CSS 代码。我在浏览器中使用 firebug 进行了尝试：

```
.flex-control-thumbs { margin: -185px 0 0; } // height of the thumb-nav

.flex-control-nav { position: absolute !important; } 
```

我还没有下载滑块来测试这个，但我希望这会对你有所帮助。;)

# assembly - 创建 ARM 反汇编程序 需要有关 MUL 指令的帮助（ARM 汇编）

> ID：15606689
> 
> 赞同：0
> 
> 时间：2013-03-25T02:25:36.540
> 
> 标签：assembly, arm, multiplication

我正在尝试为 ARM 创建一个反汇编程序，因为我想学习 ARM 汇编语言。我从另一个 StackOverflow 线程中读到这是最好的方法。所以我遇到的一件事是正确解码乘法。

这是一个反汇编的目标文件的示例。

00008054 <_start>：==============省略不相关的指令====

```
8064:   e0010092    mul r1, r2, r0 
```

从参考手册 ( [http://www.nyx.net/~troddis/ARM.html](http://www.nyx.net/~troddis/ARM.html) ) 中，乘法指令的值应为“1001”位 [4-7]（含）。但是，二进制中的 e0010092 是“11100010000000000001000000000010”，其中第 4-7 位为 0000。

我有什么明显的遗漏吗？我正在使用 CodeSourcery 的 ARM 2012.09-64 交叉编译器...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T02:29:24.570

你是怎么把它转换成二进制的？十六进制 9 正好是二进制 1001。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T08:09:55.787

如果您还记得的话，可以在很大程度上“在您的脑海中”将十六进制转换为二进制：

```
8421|8421...
===========
1011|1001...
8 21|8  1... 
```

上面一行是构成十六进制数字的 2 的幂 - `8+4+2+1 == 0xf`。下面的行是一些任意二进制；要将其转换为十六进制，请在第三行添加 4 位二进制单位（“半字节”）中设置的 2 的幂。每个半字节都是一个十六进制数字。所以对每一个半字节都这样做，你就得到了二进制的十六进制。在上面的情况下，`8+2+1 == 0xb`所以`8+1==9`你有`10111001 == 0xB9`（假设你把零位计算为最右边的一位；如果你认为零位是最左边的一位，那就是`0x9B`，欢迎来到字节序的世界......但这是另一个问题）

反过来也很简单；你的号码：

```
e   |0   |0   |1   |0   |0   |9   |2   |
842 |    |    |   1|    |    |8  1|  2 |
1110|0000|0000|0001|0000|0000|1001|0010| 
```

同样，最上面一行是十六进制数字，中间一行是 2 的幂，它们相加得到十六进制数字，底部是位序列。

我倾向于使用计算器将十进制转换为十六进制，反之亦然，但是二进制到/从十六进制，按照上面的方法在我的脑海中进行。

如果你真的想用计算器，UN*X`bc`对各种数字转换都有帮助：

```
$ echo "ibase=16;obase=2;B8F7D335" | bc
10111000111101111101001100110101
$ echo "ibase=16;B8F7D335" | bc
3103249205
$ echo "obase=16;ibase=2;10111000111101111101001100110101" | bc
B8F7D335 
```

默认的“基数”是 10，因此如果要转换为/从 10，则无需明确指定输入/输出数基数。`bc`网上都有介绍；喜欢[这个](http://www.basicallytech.com/blog/?/archives/23-command-line-calculations-using-bc.html)。

# vb.net - 更新 dbf 文件时运算符/操作数类型不匹配

> ID：15606690
> 
> 赞同：0
> 
> 时间：2013-03-25T02:25:42.340
> 
> 标签：vb.net, oledb, foxpro, dbf, visual-foxpro

我有一个程序需要更新 dbf 文件中的数据。但它不断出现错误“运算符/操作数类型不匹配”。这是示例代码：

```
 Dim con As OleDbConnection = New OleDbConnection("Provider=vfpoledb;Data Source=C:\folder\paytran.dbf;Collating Sequence=machine;")
    Try

        Dim strSQL As String = "UPDATE paytran.dbf SET workhr = 20  WHERE empno = 102"
        Dim cmd As OleDbCommand = New OleDbCommand(strSQL, con)
        con.Open()
        Dim myDA As OleDbDataAdapter = New OleDbDataAdapter(cmd)
        Dim myDataSet As DataSet = New DataSet()
        ' Using DataAdapter object fill data from database into DataSet object
        myDA.Fill(myDataSet, "MyTable")
        ' Binding DataSet to DataGridView
        DGV.DataSource = myDataSet.Tables("MyTable").DefaultView
        con.Close()
        con = Nothing
    Catch ex As Exception
        MessageBox.Show(ex.Message, "Error Select Data")

    Finally
        If con IsNot Nothing Then
            con.Close()
        End If
    End Try 
```

请帮我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T10:04:52.733

它是您的连接字符串。连接字符串应该只需要指向数据文件所在的 PATH，然后所有基于 SQL 的命令将默认能够看到该路径中的任何 .DBF 表（如果存在子路径，则转发）。

```
Data Source=C:\folder 
```

代替

```
Data Source=C:\folder\paytran.dbf 
```

因此，现在如果您在“C:\folder”中有 30 个表，您现在可以根据需要从所有表中查询。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-25T08:27:09.963

您需要显式打开和关闭 DBF。尝试：

```
Dim strSQL As String = "Use paytran in 0 shared;UPDATE paytran SET workhr = 20  WHERE empno = 102;use in select('paytran')" 
```

# wpf - StoryBoard.Begin 在 ItemControl 项目上？

> ID：15606691
> 
> 赞同：1
> 
> 时间：2013-03-25T02:25:42.417
> 
> 标签：wpf, animation, storyboard

我有一个 ItemsControl，它的 ItemsSource 是一个 ObservableCollection。我还有一个 DataTemplate 来显示每个 MyPerson。

```
<ItemsControl Name="ic_People" ItemTemplate="{StaticResource dtPerson}">
<ItemsControl.ItemsPanel>
<ItemsPanelTemplate>
<Canvas />
</ItemsPanelTemplate>
</ItemsControl.ItemsPanel>
</ItemsControl> 
```

DataTemplate 本身有点复杂，但其中一部分是 Image。

在代码隐藏中，我想通过移动图像（使用 Canvas.Top 等）为部分/所有这些 DataTemplate 设置动画。

我的代码隐藏在这里卡住了；

```
Storyboard sb = new Storyboard();
DoubleAnimation da = new DoubleAnimation();
da.From = 0;
da.By = 68;
da.Duration = new Duration(TimeSpan.FromSeconds(.2));
sb.Children.Add(da);
object prop = Canvas.TopProperty;
Storyboard.SetTargetProperty(da, new PropertyPath(prop));
sb.Begin(???, true); <---- needs a FrameworkElement 
```

我可以访问 ObservableCollection。如何访问 DataTemplate 或 Person 作为 FrameworkElement（这是 Begin 方法所需要的）？谢谢

# ruby-on-rails - 更新到 Rails 4 后资产预编译的问题

> ID：15606692
> 
> 赞同：3
> 
> 时间：2013-03-25T02:25:45.800
> 
> 标签：ruby-on-rails, sprockets

我正在将 Rails 应用程序从 3.2.12 更新到 4.0.0.beta1。我遇到了一些小问题，但我可以让应用程序运行并且所有测试都再次通过。问题是当我尝试预编译所有资产以进行部署时，出现以下错误：

```
vagrant@precise64:/vagrant$ RAILS_ENV=production bundle exec rake assets:precompile
rake aborted!
No such file to load -- bootstrap_flash_helper
/vagrant/config/environment.rb:5:in `<top (required)>'
Tasks: TOP => environment
(See full trace by running task with --trace) 
```

这是我的 Gemfile：

```
source 'https://rubygems.org'

gem 'rails', '4.0.0.beta1'

gem 'pg'
gem 'github_api'
gem 'haml-rails'
gem 'jquery-rails'
gem 'simple_form', github: 'plataformatec/simple_form'
gem 'devise', github: 'plataformatec/devise', branch: 'rails4'
gem 'omniauth'
gem 'omniauth-github'
gem 'rails-backbone', '~> 0.9.10'
gem 'inherited_resources'
gem 'app_configuration'
gem 'unicorn'
gem 'foreman'
gem 'coveralls', require: false

group :assets do
  gem 'sprockets-rails',  github: 'rails/sprockets-rails'
  gem 'coffee-rails',     github: 'rails/coffee-rails'
  gem 'therubyracer',     platforms: :ruby
  gem 'less-rails',       github: 'metaskills/less-rails'
  gem 'twitter-bootstrap-rails'
  gem 'uglifier', '>= 1.0.3'
end

group :development do
  gem 'better_errors'
  gem 'binding_of_caller'
  gem 'meta_request'
end

group :test, :development do
  # Debugging
  gem 'pry'
  gem 'debugger'
  gem 'debugger-pry'
  gem 'pry-nav'
  gem 'pry-stack_explorer'

  # Testing
  gem 'timecop'
  gem 'rspec-rails'
  gem 'shoulda-matchers'
  gem 'factory_girl_rails'
  gem 'faker'
  # gem 'cucumber-rails', '~>1.3.0', :require => false
  gem 'database_cleaner', github: 'bmabey/database_cleaner'
end 
```

该项目是开源的（正在进行中），这里是 github 存储库[https://github.com/wolox/mgmt](https://github.com/wolox/mgmt)

知道我错过了什么吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T22:36:37.163

我有一个类似的问题，然后我发现该***组 :assets***不再存在。克隆你的仓库后，我从你的 Gemfile 中删除了***组 :assets ，然后你的资产预编译好了！***

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T18:58:52.013

:assets 组默认不会加载到**生产**环境中，你可以在你的 config/application.rb ( [https://github.com/Wolox/mgmt/blob/master/config/application.rb#L7](https://github.com/Wolox/mgmt/blob/master/config/application.rb#L7) in你的回购）

建议的做法是在开发中编译您的资产，然后在您满意之后将 /public/assets 目录推送到生产环境中。

改用这条线，你应该没问题：

```
RAILS_ENV=development bundle exec rake assets:precompile 
```

# java - 尽管使用了正确的布局管理器等，但 JButton 没有出现在 JPanel 上

> ID：15606696
> 
> 赞同：0
> 
> 时间：2013-03-25T02:26:09.530
> 
> 标签：java, swing, layout, jpanel, jbutton

我在我的 CS 项目上使用 Swing 已经有一段时间了，这听起来可能是多余的，但我无法在我的 JPanel 中弹出我的 JButton。还有另外两个按钮遵循相同的代码，它们会显示出来，但我创建的这个按钮只是拒绝显示。该按钮是“查看问题”按钮。OK 和 CANCEL 等类似按钮工作正常。任何帮助将非常感激。编码：

```
public class CatNodePicker {

private final JDialog dialog;
private String selectedNodeCode;
private XMLTreeNode selectedNode;
private JTree cat;

public CatNodePicker(Container container, JTree cat) {
    this.cat = cat;
    selectedNodeCode = null;
    selectedNode = null;
    dialog =new JDialog(findParentFrame(container), "Pick a LEAF node", true);
    JPanel buttonPanel = new JPanel();
    final JButton okButton = new JButton("OK");
    okButton.setEnabled(false);
    okButton.addActionListener(new ActionListener() {

        @Override
        public void actionPerformed(ActionEvent arg0) {
            dialog.dispose();
        }
    });
    JButton cancelButton = new JButton("Cancel");
    cancelButton.addActionListener(new ActionListener() {

        @Override
        public void actionPerformed(ActionEvent arg0) {
            selectedNodeCode = null;
            selectedNode = null;
            dialog.dispose();
        }
    });

    JButton viewQuestion = new JButton("View Question");
    viewQuestion.addActionListener(new ActionListener() {

        @Override
        public void actionPerformed(ActionEvent arg0) {
            getQuestionLabel();
        }
    });

    buttonPanel.add(okButton);
    buttonPanel.add(viewQuestion);
    buttonPanel.add(cancelButton);

    cat.expandRow(1);
    JScrollPane jsp = new JScrollPane(cat);

    cat.addTreeSelectionListener(new TreeSelectionListener() {

        @Override
        public void valueChanged(TreeSelectionEvent e) {
            TreePath path=e.getNewLeadSelectionPath();
            if(path==null) {
                selectedNodeCode = null;
                selectedNode = null;
            }

            if (path.getLastPathComponent().equals(path.getPathComponent(1))) {
                selectedNodeCode = null;
                selectedNode = null;
            }
            else {
                XMLTreeNode n=((XMLTreeNode)path.getLastPathComponent());
                //System.out.println(n.toString());
                if(n.isLeaf() || n.isFilter() || n.isLayer()) {
                    selectedNodeCode = n.getCode();
                    selectedNode = n;
                    okButton.setEnabled(true);
                }
                else
                    okButton.setEnabled(false);
            }

        }
    });

    dialog.addWindowListener(new WindowAdapter() {
        public void windowClosing(WindowEvent e) {
            selectedNodeCode = null;
            selectedNode = null;
            dialog.dispose();
        }
    });  

    dialog.getContentPane().add(jsp, BorderLayout.CENTER);
    dialog.getContentPane().add(buttonPanel, BorderLayout.SOUTH);
    dialog.setDefaultCloseOperation(JFrame.DO_NOTHING_ON_CLOSE);
    dialog.setSize(new Dimension(600,800));
    dialog.setLocationRelativeTo(null);
    dialog.pack();

}

public JComponent getQuestionLabel(){

    JLabel questionText= new JLabel("Question here");
    return questionText;

} 
```

}

简而言之，我想要在 OK 和 CANCEL 按钮之间有一个“查看问题”按钮。请帮忙。太感谢了 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T17:42:12.060

虽然我不希望它有很大帮助，但我正在发布这个。它说明了您正在做的事情在简单案例中有效，并且要回答您的问题，我们需要弄清楚您在哪里偏离了简单案例（以及正确的 Swing 用法）。

```
import java.awt.BorderLayout;

import javax.swing.JButton;
import javax.swing.JDialog;
import javax.swing.JPanel;

public class Dialoger
{
    public static void main(String[] args)
    {
        Dialoger dialoger = new Dialoger();
        dialoger.go();
    }

    public void go()
    {
        JDialog jd = new JDialog();
        JButton one = new JButton("one");
        JButton two = new JButton("two");
        JButton three = new JButton("three");
        JPanel panel = new JPanel();
        panel.add(one);
        panel.add(two);
        panel.add(three);
        jd.add(panel, BorderLayout.SOUTH);
        jd.pack();
        jd.setVisible(true);
    }

} 
```

# vb.net - 不区分大小写

> ID：15606701
> 
> 赞同：5
> 
> 时间：2013-03-25T02:26:49.207
> 
> 标签：vb.net, visual-studio, case-insensitive

```
If TextBox2.Text = "a" AndAlso TextBox21.Text = "a" Then
        'MessageBox.Show("A")
        totCorrect = totCorrect + corAns
    ElseIf TextBox2.Text = "b" AndAlso TextBox21.Text = "b" Then
        'MessageBox.Show("B")
        totCorrect = totCorrect + corAns
    ElseIf TextBox2.Text = "c" AndAlso TextBox21.Text = "c" Then
        'MessageBox.Show("C")
        totCorrect = totCorrect + corAns
    ElseIf TextBox2.Text = "d" AndAlso TextBox21.Text = "d" Then
        'MessageBox.Show("D")
        totCorrect = totCorrect + corAns
    Else
        totWrong = totWrong + wrgAns
        Label13.Visible = True
    End If 
```

我正在尝试使用户输入的字母 a、b、c、d 不敏感。尝试使用 UCase，但它不起作用（不确定我是否使用错误）。我在 Visual Studio 2012 中并使用 VB。任何参考都会很棒。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-25T02:36:56.917

您可以使用[String.Compare](http://msdn.microsoft.com/en-us/library/zkcaxw5y%28v=vs.80%29.aspx)方法：`String.Compare (String strA, String strB, Boolean ignoreCase)`

传递`ignoreCase`参数 with`true`将执行不区分大小写的比较。

```
If String.Compare(TextBox2.Text, "a", true) = 0 AndAlso String.Compare(TextBox21.Text, "a", true) = 0 Then
        'MessageBox.Show("A")
        totCorrect = totCorrect + corAns
    ElseIf String.Compare(TextBox2.Text, "b", true) = 0 AndAlso String.Compare(TextBox21.Text, "b", true) = 0 Then
        'MessageBox.Show("B")
        totCorrect = totCorrect + corAns
    ElseIf String.Compare(TextBox2.Text, "c", true) = 0 AndAlso String.Compare(TextBox21.Text, "c", true) = 0 Then
        'MessageBox.Show("C")
        totCorrect = totCorrect + corAns
    ElseIf String.Compare(TextBox2.Text, "d", true) = 0 AndAlso String.Compare(TextBox21.Text, "d", true) = 0 Then
        'MessageBox.Show("D")
        totCorrect = totCorrect + corAns
    Else
        totWrong = totWrong + wrgAns
        Label13.Visible = True
    End If 
```

另一个想法是使用[ToUpper](http://msdn.microsoft.com/en-us/library/ewdd6aed.aspx)或[ToLower](http://msdn.microsoft.com/en-us/library/e78f86at.aspx)将输入大写或小写。

```
If TextBox2.Text.ToUpper() = "A" AndAlso TextBox21.Text.ToUpper() = "A" Then
            'MessageBox.Show("A")
            totCorrect = totCorrect + corAns
        ElseIf TextBox2.Text.ToUpper() = "B" AndAlso TextBox21.Text.ToUpper() = "B" Then
            'MessageBox.Show("B")
            totCorrect = totCorrect + corAns
        ElseIf TextBox2.Text.ToUpper() = "C" AndAlso TextBox21.Text.ToUpper() = "C" Then
            'MessageBox.Show("C")
            totCorrect = totCorrect + corAns
        ElseIf TextBox2.Text.ToUpper() = "D" AndAlso TextBox21.Text.ToUpper() = "D" Then
            'MessageBox.Show("D")
            totCorrect = totCorrect + corAns
        Else
            totWrong = totWrong + wrgAns
            Label13.Visible = True
        End If 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-06-23T08:55:49.317

根据 VB.NET 中的 MSDN，您[`Option Compare Statement`](https://msdn.microsoft.com/en-us/library/8t3khw5f.aspx)只需在文件中添加 1 行代码即可使用：

```
Option Compare Text 
```

如果将上述行添加到代码的开头，则表示 CLR 从默认 ( `Option Compare Binary`) 切换到不区分大小写的比较作为`=`运算符的新默认值。

我不知道是否有任何 C# 替代方案。

# jquery - Div 在鼠标移入时显示并在移出时隐藏

> ID：15606704
> 
> 赞同：0
> 
> 时间：2013-03-25T02:26:53.803
> 
> 标签：jquery, css

所有，请原谅我，我不知道如何用语言表达这个问题。所以我认为更好地了解我的代码以及我想用它做什么。谢谢。

假设您有此代码。

```
<div class="father">
<div id ="container1" class="container">
    <div class="head">

    </div>
    <div class="content">
    </div>
</div>
<div id ="container2" class="container">
    <div class="head">

    </div>
    <div class="content">
    </div>
</div>
</div>

.father
{
    min-height:300px;
    border:1px solid black;

}
#container1
{
    float:left;
    border:1px solid red;
    width:48%;
    min-height:200px;
}
#container2
{
    float:left;
    border:1px solid blue;
    width:48%;
    min-height:200px;
}
.head
{
     height:20px;
     border:1px solid purple;

}
.content
{
    height:40px;
    border:1px solid green;

}
$(function(){
    $(".head").css("display","none");
    $(".container").hover(function(){$(".head",this).css("display","block");},function(){$(".head",this).css("display","none");});

}) 
```

[http://jsfiddle.net/malaikuangren/LuPhd/](http://jsfiddle.net/malaikuangren/LuPhd/)

我想做的是当鼠标在 $(".container) 中移动时，我想在当前的 $(".container) 中显示 $(".head")，但是到目前为止。这个 div 显示和隐藏使布局中断（当 .head 显示和隐藏时，你可以看到 $(".content") 正在移动。）。这意味着我想要 $(".head") 显示一遍又一遍鼠标进入时的 $(".container)。请帮助我，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T02:45:03.670

你必须稍微改变你的 CSS 和 jQuery 代码......

jQuery：

```
// get the width of the container
    var box_width = $(this).css("width");
    $(".head",this).css("width",""+box_width+""); 
```

CSS：

```
.head{
 height:20px;
 border:1px solid purple;
position:absolute;} 
```

希望这会有所帮助；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T02:31:51.793

你可以像这样改变你的`.head`班级

```
.head
{
     height:20px;
     border:1px solid purple;
     position: absolute;    

} 
```

和你这样的javascript代码

```
$(function(){
     $(".head").css("display","none");
    $(".container").hover(function(){$(".head",this).css("display","block");
         $(".head",this).width($(this).width());},
                          function(){$(".head",this).css("display","none");}
                         );}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T02:36:02.973

[**在这里**](http://jsfiddle.net/62HEH/8/)生活小提琴[](http://jsfiddle.net/62HEH/8/)

 ****HTML**

```
<div class="father">
<div id ="container1" class="container">
     <div class="head">
    </div>
    <div class="content">
    </div>
</div>
<div id ="container2" class="container">
    <div class="head">

    </div>
    <div class="content">
    </div>
</div>
</div> 
```

**CSS**

```
.father
{
    min-height:300px;
    border:1px solid black;

}
.container
{
    width:48%;
    min-height:200px;
}
#container1
{
    float:left;
    border:1px solid red;
}
#container2
{
    float:left;
    border:1px solid blue;
}
.head
{
    height:20px;
    border:1px dotted purple;
    z-index:9999;
    position:absolute;
    display:none;
}
.content
{
    height:40px;
    border:1px solid green;
} 
```

**jQuery**

```
$(function(){
    $(".head").width($('.container').width());
    $(".container").hover(function(){$(".head", this).show()},function(){$(".head",this).hide();});  
}); 
```

你应该使用**`show()`**而不是`.css("display","block")`和**`hide()`**而不是`.css("display","none")`，更多信息[**在这里**](http://api.jquery.com/show/)和[**这里**](http://api.jquery.com/hide/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T03:02:20.663

您也可以使用不透明度来显示/隐藏 .head 样式

例子：[http://jsfiddle.net/LuPhd/13/](http://jsfiddle.net/LuPhd/13/)

当您使用它时`display:none;`，`display:block;`它会删除并添加整个 .head div，这就是布局中断的原因。

查询：

```
$(function(){
    $(".container").hover(function()    
      {$(".head",this).css("opacity","1");},function()
      {$(".head",this).css("opacity","0");});                      
}) 
```

CSS：

```
.head
{
     opacity:0;
     height:20px;
     border:1px solid purple;

} 
```

或者，您可以使用`.show`and`.hide`而不是 Opacity。**

# asp-classic - 如何处理 URL 参数中的 & 符号？

> ID：15606706
> 
> 赞同：2
> 
> 时间：2013-03-25T02:27:17.160
> 
> 标签：asp-classic, urlencode

我有以下问题：

我正在使用一个允许用户连接文本以构建通过 GET 方法将参数传递给 ASP 页面的 URL 的应用程序，例如：

```
http://myhostname/process.asp?param1=value1&param2=value2 
```

问题是 value1 和 value2 可以包含与符号，它不会被解释为文本字符。

这个问题最流行的解决方案是对 URL 进行编码，这对我来说不是一个选项，因为我无法修改构建 URL 的程序。我可以修改 process.asp 页面，但不能修改连接文本字段并构建 URL 的程序。

我试图搜索的内容是：

*   如何直接在浏览器中使用 javascript 对 URL 进行编码

*   读取 & 时如何更改 IIS 默认行为

*   传递参数的替代方法，例如将它们作为用管道分隔的单个字符串传递

希望你能给我一些指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T04:42:34.253

您可以读取整个查询字符串并自行解析，如下所示：

```
 q = Request.QueryString
  a = Split(q, "=")
  i = 1
  For Each s In a
    If i mod 2 = 0 Then
      If InStr(s, "&") <> InStrRev(s, "&") Then
        Response.Write "Value: " & Left(s, InStrRev(s, "&") - 1) & "<br/>"
        hidingParam = Right(s, Len(s) - InStrRev(s, "&"))
        Response.Write "PAramName: " & hidingParam & "<br/>"
        i = i + 1
      Else
        Response.Write "Value: " & s & "<br/>"
      End If
    Else
      Response.Write "PAramName: " & s & "<br/>"
    End If
    i = i + 1
  Next 
```

**结果：**

网址：`...?Q=abc&def&P=123`生产

> 参数名称：Q
> 值：abc&def
> 参数名称：P
> 值：123

请注意，这不够稳健。我只是说明我的想法。我没有用 no 测试`&`。

它也不处理多个“=”字符（如果这也是可能的话）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-25T03:25:35.833

如果等号之间有 2 个（或更多）与号，则只有最后一个是参数分隔符。因此，使用上面的 URL，并假设*value1* =“ **abc&def** ”和*value2* =“ **123** ”，那么 URL 将如下所示：

```
http://myhostname/process.asp?param1=abc&def&param2=123 
```

请注意，在 2 个等于之间有 2 个与号。最后一个将是您的参数分隔符，其余的是值的一部分。最后一个等号之后的任何＆符号也是值的一部分。

您必须剖析传入的 URL 并应用适当的逻辑。

# git - git Mergetool - 无法选择要保存的代码

> ID：15606709
> 
> 赞同：0
> 
> 时间：2013-03-25T02:27:56.600
> 
> 标签：git, mergetool

我在 git Mergetool 中。我正在尝试选择我的本地更改，当我选择下拉菜单以选择左侧时，没有任何反应。这是屏幕截图

![在此处输入图像描述](../Images/3993723efb3fb04d7084739ddaa40a69.png)

有什么我做错了吗？为什么我不能让合并工具实际选择代码？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-06-18T14:58:22.680

选择左侧后只需保存文件并关闭它。您将返回到终端进行下一次冲突。

# java - 休息; 线路不可达

> ID：15606712
> 
> 赞同：1
> 
> 时间：2013-03-25T02:28:09.610
> 
> 标签：java, while-loop, unreachable-code

字符串用户年龄；

```
 while(true){
        System.out.println("Enter user Age");
        userAge = scInput.nextLine();
            if(tryParseInt(userAge)){
             return userInfo[row][1] = userAge;
             break;
            }else{
                System.out.println("Please Enter an integer.");
                }
    } 
```

这里的初学者，名字是里根。

我的问题是我的代码因为“break;”而无法编译。它说这是一个无法访问的代码。我觉得我在这里做错了，我几乎可以肯定它与变量类型有关..不知道该怎么做。这是来自一种要求用户年龄的方法。

我的目标是通过我的 tryParseInt() 方法传递一个字符串来测试并确保输入数据是一个整数，但将其保留为字符串类型变量。

我正在创建一个多维字符串数组来存储用户的数据。即姓名；年龄; 地点。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-25T02:29:02.973

`break`语句后的`return`语句无法访问，因为函数在`break`到达语句之前退出。删除`break;`，您的代码应该可以编译。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T02:46:31.497

判断输入是否为整数：

```
Scanner scanner = new Scanner(System.in);
try {
    userInfo[row][1] = scanner.nextInt());
    return;
} catch (InputMismatchException e) {
    System.out.println("Please enter a integer.");
}
finally{
    scanner.close();
} 
```

并在您的代码中，在返回语句后中断语句，因此无法访问。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T02:35:09.503

```
while(true){
        System.out.println("Enter user Age");
        userAge = scInput.nextLine();
            if(tryParseInt(userAge)){
             return userInfo[row][1] = userAge;
             //you don't need break here because return at above line will make function to exit - break the loop
             //break; 
            }else{
                System.out.println("Please Enter an integer.");
                }
    } 
```

# php - 如何保护 PHP 网站（尚未上传到互联网）

> ID：15606715
> 
> 赞同：0
> 
> 时间：2013-03-25T02:28:52.387
> 
> 标签：php, security

我在服务器中有一个 PHP 系统，该系统尚未上传到 Internet，只能使用网络访问。（例如`192.168.1.190/php_system/index.php`）如何修复此 URL 以避免其他计算机访问文件夹内的`php_system`文件？以及如何避免他们使用另一个窗口访问文件`CTRL + Left Click`或在其中打开文件？`iframe`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T02:43:55.573

编辑您的 Apache 虚拟主机以仅允许来自某些 IP 的访问。像这样的东西：

```
<VirtualHost *:80>
    ServerName EDIT.THIS.com
    ServerAlias EDIT.THIS.IF.YOU.HAVE.ONE.com
    DocumentRoot "/full/path/to/root"
    <Directory /full/path/to/root>
            Options FollowSymLinks
            Order Allow,Deny
            Allow from 192.168.0.1 EDIT.TO.ANOTHER.IP AND.ANOTHER
    </Directory>
</VirtualHost> 
```

或者，添加一个“auth”值（需要登录名和密码），如下所示：

```
<Directory /full/path/to/root>
        AuthType Basic
        AuthName "Admin"
        // NOTE: do not include this in your website folder
        AuthUserFile /path/to/.passwd_file 
        Require user user1 user2
</Directory> 
```

编辑：更正了`Order`值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T02:43:42.307

在要保护的目录中，添加一个名为`.htaccess`（句号很重要）的文件

在此文件中，放入以下三行（根据 Sven 的输入进行编辑）

```
order deny,allow
allow from 127.0.0.1
deny from all 
```

现在除了您（在运行 Apache 的机器上登录）之外的任何人都应该不可能看到这些内容。任何处于活动状态的文件共享都必须单独关闭。或者，您添加一行，其中包含您要从中访问服务器的机器的 IP 地址，而不是`127.0.0.1`- 您甚至可以拥有多行允许的地址，包括范围，...

您可以在[http://httpd.apache.org/docs/2.4/mod/mod_access_compat.html#order找到更多信息](http://httpd.apache.org/docs/2.4/mod/mod_access_compat.html#order)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T02:39:37.593

试试[http://httpd.apache.org/docs/trunk/platform/windows.html](http://httpd.apache.org/docs/trunk/platform/windows.html)。这将向您展示有关如何在 Windows 上配置 Apache 服务器的指令。

# ruby-on-rails - 为什么在安装 Rails 时出现 OpenSSL::SSL::SSLError？

> ID：15606718
> 
> 赞同：8
> 
> 时间：2013-03-25T02:29:11.147
> 
> 标签：ruby-on-rails, ruby, gem, openssl

当我运行`'sudo gem install rails'`时，会发生此错误：

```
ERROR:  While executing gem ... (OpenSSL::SSL::SSLError)
    SSL_connect SYSCALL returned=5 errno=0 state=SSLv3 read server session ticket A 
```

顺便说一句，我正在运行 Ruby 版本 1.9.3p0、Gem 版本 2.0.3 和 OpenSSL 版本 OpenSSL 1.0.1。

有什么建议吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-06-11T09:46:45.767

请尝试以下命令

**根本原因**

1) 过时的开放 SSL

```
$ rvm -v
$ rvm get head 
```

2) 过时的捆绑包

```
$ gem install bundle 
```

希望它会解决

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-18T17:02:10.513

尝试这个 ：

```
$ gem update --system 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-05T19:42:36.050

当我正在安装导轨时，我也遇到了完全相同的错误。正如 Aye Mon Chit 之前提到的，此错误可能是由过时的开放 SSL 引起的。这是我的解决方案：更新您的 openssl 在我的 Wheezy 中，我只需运行：

```
apt-get install openssl 
```

就这样。希望这可以帮助那里的人。

# jquery - Angularjs：使用 jquery 自动完成指令后，它不能正常工作。似乎有错误

> ID：15606722
> 
> 赞同：0
> 
> 时间：2013-03-25T02:30:13.430
> 
> 标签：jquery, autocomplete, angularjs, angularjs-directive

作为标题，当我尝试使用 angularjs 指令应用自动完成时。插件本身可以工作，但是指令初始化后的其余代码，它不起作用。并且没有显示任何错误。

这里是在线测试。

[http://jsbin.com/ufihip/4](http://jsbin.com/ufihip/4)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T04:11:07.303

这对我来说似乎是一个黑客，但我认为这可能没问题。这是我在 SO 上问另一个问题时发现的（实际上是 charlieftl 的提示）。

当您在指令中进行 DOM 操作时，最好在所有内容都初始化后进行（有点像`ready`jQuery 中的回调）。为此，您可以使用`setTimeout`or `$timeout`（由于某种原因在您的示例中不起作用）。

这是对您的指令的修复：

```
myApp.directive('uicomplete', function($http) {
    return function(scope, element, attrs) {
        setTimeout(function() {
            element.autocomplete({
                source: ["ActionScript","AppleScript","Asp"]
            });
        }, 1);
    }
}); 
```

在代码中：http: [//jsbin.com/ufihip/7/](http://jsbin.com/ufihip/7/)

# mysql - MySQL没有捕获错误

> ID：15606723
> 
> 赞同：2
> 
> 时间：2013-03-25T02:30:41.283
> 
> 标签：mysql, sql, exception-handling, exit-code

当我尝试删除不存在的行时，为什么这段代码没有捕捉到错误？无论我作为行的名称传入什么参数，它总是返回“1 行已删除”并且不使用退出处理程序。应该只捕获这种类型的错误。

```
USE yoga;

DROP PROCEDURE IF EXISTS delete_warmup;

DELIMITER //

CREATE PROCEDURE delete_warmup 
(
    warmup_name_param               VARCHAR(100)
)
BEGIN
DECLARE row_not_found       TINYINT DEFAULT FALSE;
DECLARE sql_exception       TINYINT DEFAULT FALSE;

BEGIN
    DECLARE EXIT HANDLER FOR 1329
        SET row_not_found = TRUE;
    DECLARE EXIT HANDLER FOR SQLEXCEPTION
        SET sql_exception = TRUE;

    DELETE FROM warmup
    WHERE warmup_name = warmup_name_param;

    SELECT '1 row was deleted.' AS message;
END;

IF row_not_found = TRUE THEN
    SELECT 'Row not deleted - row not found' AS message;
ELSEIF sql_exception = TRUE THEN
    SHOW ERRORS;
END IF;

END//

DELIMITER ;

CALL delete_warmup ('Monkey business'); 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-25T03:14:10.033

您正在为重复参数使用退出处理程序：[http](http://www.briandunning.com/errors/596) ://www.briandunning.com/errors/596，即您指定的 1329

也许您应该尝试错误代码 1011：[http ://www.briandunning.com/errors/278](http://www.briandunning.com/errors/278)

另外，尝试寻找`NOT FOUND`以及`SQLException`

此外，尝试将退出处理程序放在开始/结束子句之外。

所以你的`BEGIN`and`END`子句是

```
DECLARE EXIT HANDLER FOR 1011
DECLARE EXIT HANDLER FOR SQLEXCEPTION, NOT FOUND
BEGIN
        SET row_not_found = TRUE;
        SET sql_exception = TRUE;

    DELETE FROM warmup
    WHERE warmup_name = warmup_name_param;

    SELECT '1 row was deleted.' AS message; 
END; 
```

# c++ - OpenCV 编译错误未定义对 `cv::createEigenFaceRecognizer(int, double)' 的引用

> ID：15606729
> 
> 赞同：0
> 
> 时间：2013-03-25T02:31:27.033
> 
> 标签：c++, visual-studio-2010, opencv, dll, mingw

三天以来，我一直试图弄清楚这一点，但我对 C++ 还是很陌生，而且似乎碰壁了。

我想更改其中一个 opencv 源文件，尤其是 bytefish 编写的 eigenfaces 函数。我想让它返回许多面孔而不是一个。我相信我已经弄清楚了这部分。

问题是，当我重新编译opencv时，无论我使用什么dll，在编译演示面部识别代码时，都会出现几个错误：

```
SET: IncDir = C:\opencv\build\include
$(INCDIR) = C:\opencv\build\include
SET: LibDir = C:\opencv\build\x86\mingw\lib
$(LIBDIR) = C:\opencv\build\x86\mingw\lib
g++ -I"C:\opencv\build\include" -L"C:\opencv\build\x86\mingw\lib"     facerec_eigenfaces.cpp -lopencv_calib3d243  -lopencv_contrib243 -lopencv_core243     -lopencv_features2d243 -lopencv_flann243 -lopencv_gpu243 -lopencv_highgui243 -lopencv_imgproc243 -lopencv_legacy243 -lopencv_ml243 -lopencv_nonfree243 -lopencv_objdetect243 -lopencv_photo243 -lopencv_stitching243 -lopencv_video243 -lopencv_videostab243 -o facerec_eigenfaces
Process started >>>
C:\Users\Nate\AppData\Local\Temp\ccDRRGhr.o:facerec_eigenfaces.cpp:(.text+0x8a0):     undefined reference to `cv::createEigenFaceRecognizer(int, double)'
C:\Users\Nate\AppData\Local\Temp\ccDRRGhr.o:facerec_eigenfaces.cpp:(.text+0xdf5): undefined reference to `cv::applyColorMap(cv::_InputArray const&, cv::_OutputArray const&, int)'
collect2: ld returned 1 exit status
<<< Process finished.
SET: Libs = -lopencv_calib3d243  -lopencv_contrib243 -lopencv_core243     -lopencv_features2d243 -lopencv_flann243 -lopencv_gpu243 -lopencv_highgui243 -lopencv_imgproc243 -lopencv_legacy243 -lopencv_ml243(...)
$(LIBS) = -lopencv_calib3d243  -lopencv_contrib243 -lopencv_core243 -lopencv_features2d243 -lopencv_flann243 -lopencv_gpu243 -lopencv_highgui243 -lopencv_imgproc243 -lopencv_legacy243 -lopencv_ml243 -lopen(...)
facerec_eigenfaces 
```

我已经看到了几个类似的问题，并且我尝试实现其中列出的所有方法，但无济于事。这是我的第一个 C++ 项目，所以我可能遗漏了一些基本的东西，但看起来通过使用所有的 opencv 指南，它构建的 contrib dll 不正确。

如果我需要在这里包含其他任何内容，我会的。我讨厌这个。

**更新**

我得到了它的这一部分工作。似乎我正在混合和匹配使用 Visual C 构建的 dll 文件和非可视化 C 构建的文件，我认为这无关紧要，但无论如何，代码都可以工作。

基本上我一直使用 Notepad++ 作为我的 IDE，配置为使用 G++ 和 MinGW 进行编译，然后我用 Visual C 更改了一些文件并尝试将它们插入到我以前的项目中。然后我用记事本++重新编译它会爆炸。

所以为了让它工作，我使用 Visual C 作为我唯一的编辑器。我按照 OpenCV 安装指南 (google) 中的说明构建了它，并且仅使用 Visual C 进行了更改。然后我也使用 Visual C 进行了编译。

我是 C++ 新手，所以如果有人想就发生的事情给出更好的答案，我会投票给它最好的答案。

# php - PHP - FTP 错误处理

> ID：15606730
> 
> 赞同：1
> 
> 时间：2013-03-25T02:31:36.717
> 
> 标签：php, error-handling, ftp, ftp-client

所以，我正在使用 PHP 创建一个 FTP 客户端。

我想要的是，如果上传失败（超时、连接错误等），它将在 1 分钟内再次尝试上传文件，如果再次失败则在 10 分钟内尝试，直到达到最大时间上传文件。

假设我的本地文件夹中有这些文件： `File1.ext, File2.ext, File3.ext`. 我成功上传`File1.ext`和`File3.ext`. 我应该重新上传`File2.ext`，我该怎么做？有任何想法吗？

我正在使用 后台运行我的脚本`exec()`，如果上传完成，它将向我发送一封有关该过程的电子邮件。我正在递归上传，它会检查我本地文件夹中的文件，然后一一上传，然后在上传后将其删除。

谢谢！

# module - 在 OCaml 中使用一流的模块

> ID：15606734
> 
> 赞同：4
> 
> 时间：2013-03-25T02:31:49.683
> 
> 标签：module, ocaml, functor

```
module type Arity =
sig 
   val arity : nat (* in my real code it has another type *)
end

module S =
 functor (A : Arity) -> struct
   let check = ...
end 
```

我想在没有实现签名的情况下使用仿函数`check`内部的函数。我阅读了一流的模块，但仍然不明白如何编写它（在实践中）。这是我的草稿代码：`S``Arity`

```
let A = has type of (module Arity) 
```

然后

```
let M = S (A) 
```

然后我可以通过调用`check`函数

```
M.check 
```

我试过了：

```
let f arity = (module (val arity : Arity) : Arity) 
```

它返回：`val f : (module Arity) -> (module Arity)`

你能帮我写这个一流的模块吗？我可以写进去`Ocaml`吗？

同样在（[http://caml.inria.fr/pub/docs/manual-ocaml-4.00/manual021.html#toc81](http://caml.inria.fr/pub/docs/manual-ocaml-4.00/manual021.html#toc81)）第 7.14 节中它说：

“模块表达式`(val expr : package-type)`不能在函子的主体中使用，......”

我不明白。你能举个例子帮助我理解吗？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T04:52:21.757

我不清楚您想在这里了解什么。显然，您对普通 OCaml 模块和函子的一些词以及 OCaml 的较新的“一流模块”感到困惑。无论如何，我给你一个使用 OCaml 4.00.1 的简​​短工作示例（不要尝试使用 3.12.1，因为 4 中的情况有所改进），它可能会对你有所帮助：

```
module type Arity = sig
  val arity :int
end

module S = functor (A : Arity) -> struct
  let check = A.arity = 2 (* or whatever *)
end 
```

以上是你给我们的一些简单的修复来编译。通常要使用检查，您提供签名 Arity 的实现并将其提供给函子 S：

```
module AR = struct
  let arity = 3
end

module SAR = S(AR)

let () = Printf.printf "%b\n" SAR.check 
```

让我们使用一流的模块：

```
let a = (module AR : Arity) 
```

这会将模块 AR 转换为一个值并将其绑定到变量 a。请注意，括号对于语法是必需的。您还需要提供签名 Arity。你也可以这样写：

```
let a' : (module Arity) = (module AR) 
```

因此 a 和 a' 的类型是（模块 Arity），您需要以某种方式将其提供给编译器。不幸的是，类型推断在这里对我们没有帮助。

您可以将值返回到模块，如下所示：

```
module A' = (val a) 
```

现在您还可以为仿函数 S 制作一等模块值：

```
module type RESULT = sig
  val check : bool
end

let s (a : (module Arity)) = 
  let module A = (val a) in
  let module SA = S(A) in
  (module SA : RESULT) 
```

s 所做的是：取一个值，将其返回到模块，将仿函数 S 应用于它，然后从仿函数应用的结果中生成另一个值。签名 RESULT 是转换所必需的。你不能写（模块 SA : sig val check bool end）。我不擅长这里的事情，但我听说，第一类模块值的输入不是结构性的而是名义上的。您需要在（模块 M : X）处为签名命名。

s 的类型是（模块 Arity）->（模块 RESULT）。让我们将 s 应用于 a：

```
let m = s a 
```

要访问 m 内部的检查，您需要将其重新设置为模块：

```
let m_check =
  let module M = (val m) in
  M.check 
```

您可能会失望地看到 value<->module 转换是明确的，但这就是它的工作原理......

# java - 将字符转换为其二进制值

> ID：15606740
> 
> 赞同：5
> 
> 时间：2013-03-25T02:32:28.803
> 
> 标签：java

我怎样才能得到一个字符的二进制值例如：字母C（ASCII码= 067）到二进制值01000011。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-25T02:34:46.640

利用`Integer.toBinaryString(character...);`

# mysql - 具有不同查询的简单 SQL 计数

> ID：15606741
> 
> 赞同：1
> 
> 时间：2013-03-25T02:32:41.737
> 
> 标签：mysql, sql, phpmyadmin

我在 phpmyadmin 中有一个包含实体“StudentID”和“ProgrammeID”的表（学生）。我试图弄清楚如何进行查询，列出每个特定程序中的学生人数并显示 programID 本身，但似乎无法弄清楚。

```
SELECT count(`StudentID`) FROM Student WHERE `ProgrammeID` = DISTINCT 
```

给出了一个几乎不同的合成错误。

我确信它相当简单，但在这个时候它超出了我的范围。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T02:33:50.653

我想你想计算`Student`每个`ProgrammeID`. 在这种情况下，使用`GROUP BY`子句。

```
SELECT ProgrammeID, COUNT(StudentID) TotalStudentCount
FROM   Student 
GROUP  BY ProgrammeID 
```

# c++ - 使用lookAt进行相机旋转

> ID：15606744
> 
> 赞同：2
> 
> 时间：2013-03-25T02:32:51.800
> 
> 标签：c++, opengl, glut, glm-math

嘿伙计们，我正在尝试做一个使用 glm 库中的 lookAt 的 Camera 类。我有4个点，第一个是eye，即相机在空间中的位置，第二个是look，即相机正在看的点，第三个是upp，设置相机的方向，第四个是边，它是look-eye和upp-eye的叉积。

所以最后我得到了一个由 3 个向量组成的基础，所有这些向量都以眼点为原点。我得到了相机的坐标系。

在我的相机类中，我希望能够围绕相机的坐标系而不是世界的坐标系旋转。所以我正在做的是围绕相机坐标系的轴之一旋转。

我用这样的初始值构造类：

```
void Observer::initialize(glm::vec3 eye, glm::vec3 look, glm::vec3 upp, glm::vec3 side) 
{
    this->eye = eye;        // (0.0, 0.0,  0.0)
    this->look = look;      // (0.0, 0.0, -1.0)
    this->upp = upp;        // (0.0, 1.0,  0.0)
    this->side = side;      // (1.0, 0.0,  0.0)
} 
```

例如，当我想围绕 x 轴旋转坐标系时，我从 glm 调用函数，如下所示：

```
void Observer::pitch(GLfloat pitch) 
{
    glm::mat4 rotate(1.0f);

    rotate = glm::rotate(rotate, pitch, side - eye);

    look = glm::vec3(rotate * glm::vec4(look, 1.0f));
    upp = glm::vec3(rotate * glm::vec4(upp, 1.0f));
} 
```

到目前为止，我了解到我的所有点仍然构成相机的坐标系，并且所有矢量彼此垂直。

但随后我使用通过lookAt 函数获得的这些点来定位相机在世界中的位置。

```
 glm::mat4 view = glm::lookAt(eye, look, upp); 
```

并将此矩阵与来自 OpenGL 的模型视图矩阵相乘

如果我开始旋转很多，旋转几次后的相机会“反映”旋转，就像我以另一种方式旋转一样（我不知道如何以更好的方式描述真正发生的事情=s）。

我真的不明白发生了什么。应用旋转后我应该对向量进行归一化吗？我的云台锁有问题吗（我对云台锁不太了解）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T03:25:37.400

当您像以前那样对向量进行增量旋转时，数值错误会增加。当错误导致向上和观察向量几乎指向相同方向或彼此相反时，相机变换计算不稳定并且可能发生奇怪的事情。万向节锁。长度变化会导致不同的问题。

一个对我有用的解决方案是在每次旋转后重新正交化向上和查看向量。为此，计算它们的叉积 L，然后通过将 L 与 lookAt 相交来调整（真正替换）向上向量。毕竟，这将重新规范化和查看单位长度。

尽管正交化归一化是一种快速操作，但您实际上不必对每个摄像机运动都进行此操作。

请注意，当您像这样更正向量时，您实际上是在进行 lookAt 矩阵计算的一部分，因此请考虑实施您自己的向量以避免不必要的叉积。例如，请参阅[有关此主题的此先前 SO 文章](https://stackoverflow.com/questions/349050/calculating-a-lookat-matrix)。

# c++ - 如何在 C++ 中搜索字符串数组

> ID：15606745
> 
> 赞同：0
> 
> 时间：2013-03-25T02:33:02.557
> 
> 标签：c++, string, search

我希望能够在 C++ 中搜索字符串数组。我有这个数据：

```
"Foo Becky, 924-334-2514", 
"Becky Warren, 555-1223", 
"Geri Palmer, 555-8787", 
"Ron Palmer, 555-2783" 
```

如果用户键入`Bec`，程序会找到名称`Foo Becky, 924-234-2314`。如果用户键入`Palmer`，则程序应显示`Geri Palmer, 555-8787`和`Ron Palmer, 555-2783`

这是我到目前为止所拥有的：

```
#include <iostream>
#include <string>
using namespace std;
int main(){
    int n;
    string search;

    while(1){
        cout << "How many data you want to input: "<< endl;
        cin >> n;
        cin.ignore(1000, 10);

        if(n > 0 && n < 20){
            break;
        }
        cout << "Number of data can not be negative or more than 20\. "<< endl;
    }

    string* data = new string[n];

    for(int i=0; i< n; i++){
        cout << "Enter [First Name] [Last Name], [Phone-Number] and then hit "
             << "enter." << endl << "e.g: Foo Becky, 925-245-413"<< endl;
        getline(cin,data[i]);
        cout << endl;
    }

    cout << "Enter what you want to search for: "<< endl;
    getline(cin, search);

    for(int i =0; i< n; i++){
        if(search == data[i]){
            cout << data[i]<< endl;
        }
    }
    delete [] data;
    return 0;
} 
```

如何在 C++ 中搜索字符串数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T02:44:54.873

你必须使用[find](http://www.cplusplus.com/reference/string/string/find/)的方法`std::string`。此函数返回在搜索的字符串中搜索的字符串的起始位置。如果未找到匹配项，则返回[npos](http://www.cplusplus.com/reference/string/string/npos/)女巫实际上只是`-1`.

```
if(data[i].find(search, 0) != std::string::npos);
{
    cout << data[i]<< endl;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T03:18:39.497

您应该使用 find，正如 A4L 已经提到的那样。我只想补充一点，如果输入错误值，您对 cin.ignore 的使用将无法正常工作。你需要

```
cin.clear() 
```

还。有关更多详细信息，请参阅[此链接](https://stackoverflow.com/questions/4865561/how-do-i-prevent-a-runaway-input-loop-when-i-request-a-number-but-the-user-enter?answertab=active#tab-top)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-05T21:18:08.937

**如何在 C++ 中搜索字符串数组示例：**

这是蛮力搜索方法。蛮力意味着我们逐步遍历整个字符串数组，并在数组的每个索引处搜索匹配的字符串。

```
#include<iostream>
#include<string>
using namespace std;
int main(){
    //Create a structure to hold the data:
    string data[] = {"pidgeon", "abcd", "1234", "%^*#"};

    //Get the length of the array.
    int size = 4;

    //loop through all the items and print them if they match
    string matchString = "bc";
    for(int x = 0; x < size; x++){
        if (data[x].find(matchString, 0) != std::string::npos){
            cout << data[x] << endl;
        }
    }
} 
```

上面的代码打印：

```
abcd 
```

您应该像这样在脑海中从上到下将上述代码表达出来：

一个名为 data 的字符串数组被初始化为包含 4 个元素并给定四个值`pidgeon`、`abcd`和。创建了一个名为 size 的 int 变量，它表示字符串数组中的元素数。创建了一个名为 matchString 的字符串变量，其中包含字符串“bc”。`1234``%^&#`

for 循环索引从位置 0 开始并以 1 递增，直到它比数组的大小小 1。所以for循环经过：0、1、2、3。x的第一个值是0。if语句将data[0]解析为pidgeon。对该字符串应用 find 方法并传入两个参数。要匹配的字符串，以及要在搜索中考虑的字符串中第一个字符的位置 (0)。

如果 'bc' 存在于 'pidgeon' 中，那么它将返回第一个匹配的第一个字符的位置，否则它将打印 std::string:npos 这是 size_t 指定未找到的最大值。

bc 在 pidgeon 中不存在，因此它跳过了 for 循环的内部。for 循环继续索引位置 1。bc 包含在 abcd 中。所以该字符串被打印出来。搜索完所有项目后，for 循环结束，程序完成。

# c - Autoconf 检查结构群

> ID：15606746
> 
> 赞同：13
> 
> 时间：2013-03-25T02:33:10.623
> 
> 标签：c, linux, unix, autotools, autoconf

`fcntl()`使用`struct flock`结构来定义和检查文件锁。不幸的是，在不同的 Unix 系统上，此结构中的字段顺序不同。有谁知道如何使用 autoconf 进行检查，或者至少检查结构是否为特定格式（例如问题是 - 结构格式是否与 Linux 格式匹配）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T02:50:01.080

您可以使用此 autoconf 宏来查找某个成员是否`struct flock`存在：

```
AC_CHECK_MEMBERS([struct flock.l_type],[],[],[[#include <fcntl.h>]]) 
```

Github 有各种 autoconf 文件，您可以通过[在 *.ac 文件中搜索“struct flock”来查看更多想法。](https://github.com/search?q=extension%3Am4+extension%3Aac+%22struct+flock%22&ref=searchresults&type=Code)

**更新：**[debian-bugs 列表上的一篇旧文章讨论了](http://www.mail-archive.com/debian-bugs-dist@lists.debian.org/msg1027496.html)`struct flock`顺序问题。

我们可以从该错误中获取灵感，并在配置中执行此操作：

```
AC_MSG_CHECKING("whether flock struct is linux ordered or not")
AC_TRY_RUN([
  #include <fcntl.h>
  struct flock lock = { 1, 2, 3, 4, 5 };
  int main() { return lock.l_type==1 ? 0 : 1; }
], [
    AC_DEFINE(HAVE_FLOCK_LINUX) 
    AC_MSG_RESULT("yes")
], AC_MSG_RESULT("no") ) 
```

您也可以在运行时在您的程序中执行此检查，它不必是配置步骤。

# jquery - 通过javascript验证后表单不重定向

> ID：15606748
> 
> 赞同：0
> 
> 时间：2013-03-25T02:33:27.213
> 
> 标签：jquery, validation, registration

我使用代码来验证我的注册表单：[http](http://rickharrison.github.com/validate.js/) : //rickharrison.github.com/validate.js/ 这是我的自定义代码：

```
<!DOCTYPE html>
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">

     <link href="./js/main.css" rel="stylesheet" type="text/css">

    <script type="text/javascript" async="" src="./js/ga.js"></script>
    <script type="text/javascript" src="./js/jquery.min.js"></script>
    <script type="text/javascript" src="./js/validate.min.js"></script>
</head>
<body>

    <form name="createAccount" action="validate.php" method="POST">
        <label for="fname">First name:</label>
        <input name="fname" id="fname">

        <label for="lname">Last name:</label>
        <input name="lname" id="lname">
         <br/>
        <label for="email">Email:</label>
        <input name="email" id="email">
         <br/>
        <label for="password">Password:</label>   
        <input name="password" id="password" type="password">
         <br/>
        <label for="vPassword">Re-type password:</label> 
        <input name="vPassword" id="vPassword" type="password">
         <br/>
        <button class="button gray" type="submit" name="submit">Submit</button>
    </form>
    <div class="success_box">Si jvois ca ben tbnk</div>
    <div class="error_box"></div>
<script type="text/javascript">

    new FormValidator('createAccount', [{
        name: 'fname', 
        display: 'Please enter your first name.',
        rules: 'required'
    }, {
        name: 'lname',
        display: 'Please enter your name.',
        rules: 'required'
    }, {
        name: 'email',
        display: 'Please enter a valid email address.',
        rules: 'valid_email'
    }, {
        name: 'password',
        display: 'Please enter a password of at least 8 characters.',
        rules: 'required|min_length[8]'
    }, {
        name: 'vPassword',
        display: 'The passwords do not match.',
        rules: 'required|matches[password]'
    },  ], function(errors, event) {
        var SELECTOR_ERRORS = $('.error_box'),
            SELECTOR_SUCCESS = $('.success_box');
        if (errors.length > 0) {
            SELECTOR_ERRORS.empty();

            for (var i = 0, errorLength = errors.length; i < errorLength; i++) {
                SELECTOR_ERRORS.append(errors[i].message + '<br />');
            }

            SELECTOR_SUCCESS.css({ display: 'none' });
            SELECTOR_ERRORS.fadeIn(200);
        } else {
            SELECTOR_ERRORS.css({ display: 'none' });
            SELECTOR_SUCCESS.fadeIn(200);
        }

        if (event && event.preventDefault) {
            event.preventDefault();
        } else if (event) {
            event.returnValue = false;
        }
    });

    </script>

</body>
</html> 
```

我尝试将“success_box”更改为重定向到我的 validate.php 页面的函数，但没有任何效果。我尝试将所有内容删除到success_box，并在错误数为0时创建一个重定向函数

```
if (errors === 0){ window.location = "http://www.google.com/";} 
```

但这也没有用。我没有答案了...

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T02:41:33.690

尝试

`if (errors == 0){ window.location = "[http://www.google.com/](http://www.google.com/)";}`

你不能`=`在一个条件下使用 single。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T03:18:27.733

[看看它的工作是真实的！](http://jsbin.com/uyagod/3)

我刚刚删除了`}, ], function(errors, event) {`验证器规则数组中最后一个对象之后的逗号。

好的，现在我明白了。如果您希望您的表单在数据有效的情况下充当常规表单，请不要调用`preventDefault()`这种情况（因为您想要默认表单行为）。

# javascript - AngularJS 在扩展页面中将 URL 更改为“不安全：”

> ID：15606751
> 
> 赞同：189
> 
> 时间：2013-03-25T02:33:50.183
> 
> 标签：javascript, angularjs, security, google-chrome-extension

我正在尝试将 Angular 与应用程序列表一起使用，每个应用程序都是一个链接，可以更详细地查看应用程序（`apps/app.id`）：

```
<a id="{{app.id}}" href="apps/{{app.id}}" >{{app.name}}</a> 
```

每次我单击其中一个链接时，Chrome 都会将 URL 显示为

```
unsafe:chrome-extension://kpbipnfncdpgejhmdneaagc.../apps/app.id 
```

从哪里来`unsafe:`？

* * *

## 回答 #1

> 赞同：363
> 
> 时间：2013-04-02T16:51:10.307

您需要使用正则表达式将 URL 协议显式添加到 Angular 的白名单中。默认情况下仅启用`http`、`https`和。当使用诸如.`ftp``mailto``unsafe:``chrome-extension:`

将协议列入白名单的好地方`chrome-extension:`是在模块的配置块中：

```
var app = angular.module( 'myApp', [] )
.config( [
    '$compileProvider',
    function( $compileProvider )
    {   
        $compileProvider.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|chrome-extension):/);
        // Angular before v1.2 uses $compileProvider.urlSanitizationWhitelist(...)
    }
]); 
```

当您需要使用 和 等协议时，同样的过程也`file:`适用`tel:`。

请参阅 AngularJS [$compileProvider API 文档](http://docs.angularjs.org/api/ng.$compileProvider)了解更多信息。

* * *

## 回答 #2

> 赞同：57
> 
> 时间：2015-03-02T23:22:42.947

如果有人对图像也有这个问题：

```
app.config(['$compileProvider', function ($compileProvider) {
    $compileProvider.imgSrcSanitizationWhitelist(/^\s*(https?|local|data|chrome-extension):/);
}]); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-02-16T12:28:18.057

如果您只需要邮件、电话和短信，请使用：

```
app.config(['$compileProvider', function ($compileProvider) {
    $compileProvider.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|file|sms|tel):/);
}]); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-26T00:21:07.340

谷歌浏览器需要它的扩展来配合`Content Security Policy (CSP)`。

您需要修改扩展以满足`CSP`.

[https://developer.chrome.com/extensions/contentSecurityPolicy.html](https://developer.chrome.com/extensions/contentSecurityPolicy.html)

[https://developer.mozilla.org/en-US/docs/Security/CSP](https://developer.mozilla.org/en-US/docs/Security/CSP)

此外，angularJS 具有`ngCsp`您需要使用的指令。

[http://docs.angularjs.org/api/ng.directive:ngCsp](http://docs.angularjs.org/api/ng.directive:ngCsp)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-07-06T07:32:08.210

```
<a href="{{applicant.resume}}" download> download resume</a>

var app = angular.module("myApp", []);

    app.config(['$compileProvider', function($compileProvider) {
         $compileProvider.aHrefSanitizationWhitelist(/^\s*(https?|local|data|chrome-extension):/);
        $compileProvider.imgSrcSanitizationWhitelist(/^\s*(https?|local|data|chrome-extension):/);

        }]); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-08-02T07:42:19.730

因为`Angular 2+`你可以使用`DomSanitizer`'`bypassSecurityTrustResourceUrl`方法。

```
import {DomSanitizer} from '@angular/platform-browser';

class ExampleComponent {
    sanitizedURL : SafeResourceUrl;

    constructor(
        private sanitizer: DomSanitizer){
        this.sanitizedURL = this.sanitizer.bypassSecurityTrustResourceUrl(); 
    }
} 
```

# wordpress - wordpress 菜单中的列表项分隔符

> ID：15606754
> 
> 赞同：0
> 
> 时间：2013-03-25T02:34:07.237
> 
> 标签：wordpress, list, menu, menuitem

我列出了菜单项。我有一个我想要的自定义分隔符。目前，我已经使用位于左侧的分隔线的背景图像来设置菜单项的样式。我想删除第一个。

即我的菜单如下所示：/work/about/resume/contact/store

我希望它看起来像：/工作/关于/简历/联系/商店

菜单样式：

```
.main-nav ul li a {
    font-family: 'Roboto Condensed', sans-serif;
    font-weight: 300;
    font-size: 22pt;
    color:#999999;
    vertical-align:middle;
    text-decoration:none;
    display: block;
    padding:0;
    text-align:center;
    width:190px;
    float:left;
    background-image:url(data/img/navdivider.png);
    background-position: top left;
    background-repeat:no-repeat;
    height:65px;
    padding-top:8px;
} 
```

试图摆脱第一个：

```
.main-nav ul li a:first-child {
    background-image:none;
} 
```

但它不工作。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T02:41:11.413

我编辑了整个答案，因为它是错误的。问题是您的目标`a`是 a `:first-child`，它始终是（它的父元素是那个`li`元素）。所以，试试这个目标：

```
.main-nav ul li:first-child a {
    background-image:none;
} 
```

# javascript - 如何创建 Bootstrap Popover 关闭选项

> ID：15606760
> 
> 赞同：6
> 
> 时间：2013-03-25T02:34:50.167
> 
> 标签：javascript, jquery, html, css, twitter-bootstrap

正如您在[jQuery](http://jsfiddle.net/LRCNm/1/)中看到的那样，我已经使用[这个问题](https://stackoverflow.com/questions/8947749/how-can-i-close-a-twitter-bootstrap-popover-with-a-click-from-anywhere-else-on)的答案来使 Bootstrap Popover 在外部单击时消失。现在我希望在右上角添加一个“x”，以在单击时关闭弹出窗口。

有没有一种简单的方法可以在弹出框的右上角创建一个可点击的“x”，点击后会关闭弹出框？

HTML：

```
<h3>Live demo</h3>
<div class="bs-docs-example" style="padding-bottom: 24px;">
    <a href="#" class="btn btn-large btn-danger" data-toggle="popover" title="A Title" data-content="And here's some amazing content. It's very engaging. right?">Click to toggle popover</a>
</div> 
```

jQuery：

```
var isVisible = false;
var clickedAway = false;

$('.btn-danger').popover({
    html: true,
    trigger: 'manual'
}).click(function(e) {
    $(this).popover('show');
    clickedAway = false
    isVisible = true
    e.preventDefault()
});

$(document).click(function(e) {
    if (isVisible & clickedAway) {
        $('.btn-danger').popover('hide')
        isVisible = clickedAway = false
    } else {
        clickedAway = true
    }
}); 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-25T03:12:12.887

这是jQuery代码：

这个只是在右上角添加了 X 按钮：

```
 var isVisible = false;
            var clickedAway = false;

            $('.btn-danger').popover({
                    html: true,
                    trigger: 'manual'
                }).click(function(e) {
                    $(this).popover('show');
                    $('.popover-title').append('<button type="button" class="close">&times;</button>');
                    clickedAway = false
                    isVisible = true
                    e.preventDefault()
                });

            $(document).click(function(e) {
              if(isVisible & clickedAway)
              {
                $('.btn-danger').popover('hide')
                isVisible = clickedAway = false
              }
              else
              {
                clickedAway = true
              }
            }); 
```

只有在单击 X 按钮时才会关闭弹出窗口：

```
 $('.btn-danger').popover({
                    html: true,
                    trigger: 'manual'
                }).click(function(e) {
                    $(this).popover('show');
                    $('.popover-title').append('<button type="button" class="close">&times;</button>');
                    $('.close').click(function(e){
                        $('.btn-danger').popover('hide');
                    });
                    e.preventDefault();
                }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-14T04:11:31.697

我知道这个问题已经得到了回答，但你的帖子对我有所帮助。偶然发现了一种更简单的方法来完成这个任务假设你有所有带有“.pop”类的弹出框，这应该可以解决你所有的问题

```
$('.pop').on({
  click:function(){
    $('.pop').not(this).popover('hide');
  }
}); 
```

# compiler-errors - 构建android源码报错

> ID：15606762
> 
> 赞同：2
> 
> 时间：2013-03-25T02:35:02.413
> 
> 标签：compiler-errors, makefile, android-source, building

当我尝试使用命令 make -j4 构建 android 源代码时，出现错误：

```
*** Done with the cleaning, now starting the real build.
Checking build tools versions...
build/core/base_rules.mk:130: 
*** Android/android-ndk-r8d/sources//android/cpufeatures:
MODULE.TARGET.STATIC_LIBRARIES.cpufeatures already defined by Android/android-ndk-r8d/sources/android/cpufeatures。stoped。 
```

这是什么意思，有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-29T09:30:36.083

这可能是一个很长的猜测，但你能检查一下你没有两次相同的模块吗？

```
find . |grep cpufeatures 
```

可能会给你答案。在该区域进行的检查是验证每个模块是唯一的，如果您在 2 个地方有相同的模块（例如复制错误），那么它在这个阶段会失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-24T14:53:00.667

确保您没有在与 AOSP 相同的目录中打开 NDK 或 SDK tarball，后者已经有自己的 ndk 和 sdk 目录。这个错误对我造成了与 OP 报告的相同的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-17T07:46:09.343

我有同样的问题。原来是因为我把NDK放在AOSP目录下。AOSP 的构建脚本之一尝试执行目录 travelsal 并包含一些 NDK 的配置文件。在我搬出 NDK 后，问题就消失了。

# ruby-on-rails - Rails 4 中的命名路线

> ID：15606763
> 
> 赞同：0
> 
> 时间：2013-03-25T02:35:09.053
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-4

我在测试应用程序中使用 Rails 4。我有一个不标准的任意 URL，如`resources :foo`类型 URL。理想情况下，我想要的最终结果是能够：

`/contests/:id/enter`

在视图中，如果我可以使用命名助手设置链接，那就太好了，例如：

`edit_contests_enter(:id)`?

定义上述路由的最佳方法是什么，以便我可以将辅助路径与上述任意 URL 一起使用？不一定非要如此，`edit_contests_enter(:id)`但只要帮助程序路径指向上面建议的 URL，那就太好了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T03:20:07.460

我假设您的比赛是一种资源，当您的访问者去`/contests/:id/enter`您希望他们创建一个对象时`user <=> contest`。让我们称之为`participation`。

Now`participation`与 Rails 应用程序中的任何其他资源完全一样，因此您的`routes.rb`文件看起来像

```
resources :contests do 
  resources :participations
end 
```

除了创建参与之外，您不希望人们做任何事情，例如编辑或销毁它们。也许您想要一个不错的 URI，例如`/contests/:id/enter`. 你所要做的就是

```
resources :contests do 
  resources :participations, :only => [:new, :create]
  get "enter" => "participations#new"
end 
```

这样做会给你一个名为`contest_enter`. 在您的`participations#new`表格中，您将`POST`像往常一样将`/contests/:id/participations`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T02:49:14.120

如果你有一个`resources`块`:contests`，你可以使用以下方法在 ContestsController 上定义一个新的“成员”路由：

```
resources :contests do
  member do
    get :enter
  end
end 
```

这将自动为您生成一个命名的[成员路由](http://guides.rubyonrails.org/routing.html#adding-more-restful-actions)，您可以通过运行找到其名称`rake routes`。

# php - AJAX 发布到 php 请求问题

> ID：15606765
> 
> 赞同：0
> 
> 时间：2013-03-25T02:35:11.510
> 
> 标签：php, javascript, ajax

嗨，我想将 ajax js 文件中的变量发布到 php 文件中。到目前为止，这是我的尝试。

```
 var request = createRequest();
      var deletenode = node.id;
   window.alert("nodeid=" + deletenode);
       var vars = "deletenode="+deletenode;
       request.open("POST", "deletenode.php", true);
      request.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
       request.onreadystatechange = function() {
    handleRequest(request);
};
       request.send("deletenode=" + encodeURIComponent(deletenode)); 
```

这是我的 php 文件

```
 <?php
 print_r($_POST);
 $node = $_POST['deletenode'];
 print "node to be deleted: $node";
 ?> 
```

我的 php 文件中没有任何内容，可能是什么问题。我的 ajax 请求是完整的并且工作正常。谢谢，这是我的处理请求。

```
function handleRequest(request) {
    // we only care for now about when we get to readyState 4
    // which means the request completed and we have the response back
    if(request.readyState == 4){
        //alert("response: " + request.responseText); // check to see what
        // we got back just for testing
        // now get response's TEXT and put into document (specify where)
        // below we have an html element with the id as timeLoc
        json= eval ("(" + request.responseText + ")");;

        //alert ("json="+json); //tests what was recieved
        //clicking the close button
        closeButton.onclick = function() {
            node.setData('alpha', 0, 'end');
            node.eachAdjacency(function(adj) {
                adj.setData('alpha', 0, 'end');
                var request = createRequest();
                var deletenode = node.id;
                window.alert("nodeid=" + deletenode);
                var vars = "deletenode="+deletenode;
                request.open("POST", "deletenode.php", true);
                request.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
                request.onreadystatechange = function() {
                    handleRequest(request);
                };
                request.send("deletenode=" + encodeURIComponent(deletenode));
            });       
        }// end readystate=4
    }//end handle request 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T02:37:05.663

请记住，您必须将数据作为键/值对发送 -`request.send("deletenode=" + encodeURIComponent(deletenode));`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T03:12:17.337

我不确定这是否是复制/粘贴错误，但如果这是您的实际代码，您似乎缺少一些花括号关闭。并有一个双;; 在 eval 行的末尾。这是用额外的花括号整理的代码，这行得通吗？

```
 function handleRequest(request) {
    if(request.readyState == 4){
        json= eval ("(" + request.responseText + ")");
        closeButton.onclick = function() {
            node.setData('alpha', 0, 'end');
            node.eachAdjacency(function(adj) {
                adj.setData('alpha', 0, 'end');
                var request = createRequest();
                var deletenode = node.id;
                window.alert("nodeid=" + deletenode);
                var vars = "deletenode="+deletenode;
                request.open("POST", "deletenode.php", true);
                request.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
                request.onreadystatechange = function() {
                    handleRequest(request);
                };
                request.send("deletenode=" + encodeURIComponent(deletenode));
            });
        }
    }
} 
```

# ruby-on-rails - Ruby on Rails 中模型之间的交互逻辑？

> ID：15606767
> 
> 赞同：0
> 
> 时间：2013-03-25T02:35:32.583
> 
> 标签：ruby-on-rails, ruby, design-patterns, refactoring, models

我正在研究 Rails，现在正在尝试组织模型之间的交互。我写的东西很有效，但我认为代码闻起来很糟糕。

例如，我有两个带有数据库表的模型`Parcel`和`Warehouse`. 当我创建一个新 Parcel 时，我想增加`:current_weight`与这个新 Parcel 相关的 Warehouse 实例的数量。

再次，一切正常，但是这种类型的代码，两个不同对象之间的交互，将被频繁使用，我内心深处的一句话是：“伙计，这个代码很糟糕，将来会引起问题！”。

也许有一些好的做法来组织或重构它？也许最好为这种交互创建一个通用模块，或者甚至创建 `method_missing`逻辑来使用具有universal `put_`, `remove_`, `check_`, like `warehouse.put_parcel`and的方法`warehouse.remove_parcel`。

在红宝石控制台中：

```
parcel = Parcel.new
parcel.weight = 10
parcel.warehouse_id = 1
parcel.save

# Create parcel and increase :current_weight of related warehouse by 10 after save 
```

仓库.rb：

```
class Warehouse < ActiveRecord::Base
    has_many :parcels
  attr_accessible :name, :current_weight
end 
```

包裹.rb：

```
class Parcel < ActiveRecord::Base
    belongs_to :warehouse
    belongs_to :vehicle
  attr_accessible :name, :weight, :warehouse_id, :vehicle_id

  after_save :set_current_weight

  #Bad code:
  def set_current_weight
    @wh = self.warehouse
    @wh.current_weight = @wh.current_weight + self.weight
    @wh.save
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T02:59:28.517

怎么样

```
warehouse.parcels.sum(:weight) 
```

这样，您就可以根据当前数据运行“实时”查询，而不是递增。

您当前模型的稍微更简洁的版本：

```
 def set_current_weight
    @wh = self.warehouse
    @wh.current_weight += self.weight
    @wh.save
  end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T03:34:19.477

`current_weight`仓库真的不是`Parcel`对象授权的一部分。你也给了它不止一个改变的理由。因此，这打破了[单一责任原则](http://butunclebob.com/ArticleS.UncleBob.SrpInRuby)。

我建议完全删除`:current_weight`和`set_current_weight`。像这样获取仓库内的总重量：

```
def Warehouse < ActiveRecord::Base
  has_many :parcels
  # ...

  def current_weight
    parcels.sum(:weight)
  end
end 
```

正如@muttonlamb 在他的帖子中所建议的那样。

# php - WordPress - 分类元数据检索

> ID：15606769
> 
> 赞同：1
> 
> 时间：2013-03-25T02:35:43.147
> 
> 标签：php, wordpress

我正在使用[https://github.com/bainternet/My-Meta-Box](https://github.com/bainternet/My-Meta-Box)在我的分类“组”中创建元数据

如何检索该数据？截至目前，我有每个组 ID，但我不知道如何检索元数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T02:54:11.417

刚刚想通了。不幸的是，[https://github.com/bainternet/My-Meta-Box](https://github.com/bainternet/My-Meta-Box)使用数据库中的 WP_Options 表，而不是 Meta 表，就像它应该的那样。

以下是获取信息的方法。

```
<?$meta = get_option('tax_meta_'.$category->term_id)?> 
```

# python - 您可以通过 numpy 数组广播字典定义吗？

> ID：15606771
> 
> 赞同：3
> 
> 时间：2013-03-25T02:36:03.707
> 
> 标签：python, numpy

我正在研究一个非常简单的使用 numpy 进行随机游走模拟的示例。我的教授坚持我们尽可能多地使用 numpy 的广播功能而不是 for 循环，我想知道是否可以广播字典定义。

例如，我有数组 [EWNS]。使用字典遍历该数组将导致 [[1, 0] [-1, 0] [0, 1] [0, -1]]。

```
import numpy as np
import matplotlib.pyplot as plt

def random_path(origin, nsteps, choices, choice_probs, choice_map):
    directions = np.random.choice(choices, size=(15,), p=choice_probs)
    print directions

def main():
    directions = ['N', 'S', 'E', 'W']
    dir_probabilities = [.2, .3, .45, .05]
    dir_map = {'N': [0, 1], 'S': [0, -1], 'E': [1, 0], 'W': [-1, 0]}
    origin = [0, 0]

    np.random.seed(12345)
    path = random_path(origin, 15, directions, dir_probabilities, dir_map)

main() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T02:49:05.670

为什么不忽略实际的方向标签并将方向存储为`(4,2)`形状的 numpy 数组？然后，您只需直接索引该数组即可。

```
def random_path(origin, nsteps, choices, choice_probs, choice_map):
    directions = np.random.choice(choices, size=(15,), p=choice_probs)
    return directions

dir_map = np.array([[0,1], [0,-1], [1,0], [-1,0]])
# Everything else is the same as defined by OP

path_directions = random_path(origin, 15, np.arange(4), dir_probabilities, dir_map)
path = dir_map[path_directions] 
```

现在`path`是一个`(15,2)`成形的 numpy 数组，其中包含从`dir_map`.

# ruby-on-rails - 'rake routes' 中没有显示路线的路线

> ID：15606772
> 
> 赞同：2
> 
> 时间：2013-03-25T02:36:06.673
> 
> 标签：ruby-on-rails

我在我的 rails 应用程序中添加了一条额外的路由到我的嵌套资源中，就像这样。

```
 resources :questions do 
    resources :answers do 

       match "/bestanswer", :to => "answers#bestanswer", :via => :post

      end
  end 
```

运行 'rake routes' 显示以下路径

```
question_answer_bestanswer POST   /questions/:question_id/answers/:answer_id/bestanswer(.:format) answers#bestanswer 
```

我尝试以这样的形式使用路径（每个答案重复多次）

```
<%= form_tag question_answer_bestanswer_path, method: :post do%>
   <%= hidden_field_tag :answer_id, answer.id %>
   <%= hidden_field_tag :question_id, answer.question.id %>
   <%= submit_tag "Accept this answer as the best answer", :class => 'btn ' %>
<% end %> 
```

但是，当我转到显示此表单的页面时，我收到此错误

```
No route matches {:controller=>"answers", :action=>"bestanswer"} 
```

你能解释一下我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T02:41:35.940

您缺少路由参数，您的表单应为：

```
<%= form_tag question_answer_bestanswer_path( answer.question, answer ), method: :post do%>
   <%= submit_tag "Accept this answer as the best answer", :class => 'btn ' %>
<% end %> 
```

并且`hidden_field_tag`'s 不是必需的。

# sql - ORA-02291: 违反完整性约束 (NAVY10.SYS_C00317513) - 未找到父键

> ID：15606773
> 
> 赞同：2
> 
> 时间：2013-03-25T02:36:15.510
> 
> 标签：sql, oracle, ora-02291

我必须使用 INSERT SQL 语句和 SQL LOADER 实用程序创建表并插入数据。我正在使用 Oracle 10g。以下是创建表语句：

```
CREATE TABLE Employee_C (
    EID char(3), 
    Name varchar2(20), 
    Salary number(7,2), 
    MID char(3), 
    PRIMARY KEY (EID), 
    FOREIGN KEY (MID) REFERENCES Employee_C (EID)
);

CREATE TABLE Conference_C (
    ConfID char(6),
    Title varchar2(20), 
    Location varchar2(20), 
    Sdate date,  
    PRIMARY KEY (ConfID)
); 

CREATE TABLE Topic_C (
    Tnum char(3), 
    Title varchar2(20), 
    PRIMARY KEY (Tnum)
);

CREATE TABLE Includes_C (
    Tnum char(3), 
    ConfID char(6), 
    PRIMARY KEY (Tnum,ConfID), 
    FOREIGN KEY (Tnum) REFERENCES Topic_C, 
    FOREIGN KEY (ConfID) REFERENCES Conference_C
);

CREATE TABLE Deals_C (
    EID char(3), 
    ConfID char(6), 
    PRIMARY KEY (EID,ConfID), 
    FOREIGN KEY (EID) REFERENCES Employee_C, 
    FOREIGN KEY (ConfID) REFERENCES Conference_C
); 
```

我使用 INSERT SQL 语句将数据插入到 Topic_C 表中，并使用 sql loader 实用程序将数据插入到其他 4 个表中。

所以我的问题是当我运行 sql loader 时，出现以下错误：

```
Record 1: Rejected - Error on table INCLUDES_C.
ORA-02291: integrity constraint (NAVY10.SYS_C00317513) violated - parent key not found 
```

其他表工作得很好！

不知道哪里出错了，求指点 谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T03:10:21.677

正如上面提到的@OMGPonies，当您将记录加载到`Includes_C`以下一项或两项中时，会发生以下情况：

1.  `Includes_C.Tnum`不在`Topic_C`
2.  `Includes_C.ConfID`不在`Conference_C`

最好的方法是首先加载父表，然后通过子表进行处理。为此，只需按照您定义的顺序加载表。如果这不起作用，则意味着您确实有一个`Tnum`和/或`ConfID`违反外键的值。

# vb.net - 在 DataGridView 中填充值

> ID：15606780
> 
> 赞同：0
> 
> 时间：2013-03-25T02:38:46.320
> 
> 标签：vb.net

我想在查询中的`DataGridView`where 子句中显示选择查询的结果。条件在标签的值中指定。IE

```
select * 
from hospital_details 
where location_name= '" & Label6.Text & "'" 
```

以下是代码

```
Public Sub fill()

    Try
        createConnection()
        da = New SqlDataAdapter
        Dim c As String
        c = Label6.Text
        comm.CommandText = "select * from hospital_details where location_name= '" & Label6.Text & "'"
        da.SelectCommand = comm
        da.Fill(ds, "hospital_details")
        DataGridView2.DataSource = ds.Tables(0)
        DataGridView2.DataMember = "hospital_details"
        DataGridView2.ReadOnly = True

    Catch ex As Exception

        MsgBox("Error: " & ex.Source & ": " & ex.Message, MsgBoxStyle.OkOnly, "Connection Error !!")

    End Try

End Sub 
```

但它的显示错误：`NullException`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-25T12:56:54.217

您可以从 sql server 加载数据，点击链接 [http://mssqlguid.blogspot.in/2013/07/how-to-load-data-into-datagridview-from.html](http://mssqlguid.blogspot.in/2013/07/how-to-load-data-into-datagridview-from.html)

# forms - 在 HTML 编辑表单上，重置和记住发布值功能的好方法是什么？

> ID：15606781
> 
> 赞同：0
> 
> 时间：2013-03-25T02:38:57.823
> 
> 标签：forms

我有一个同时具有服务器端和客户端验证的表单。它是一个编辑表单，因此原始用户值最初是预先填充的。

```
e.g. The original pre-populated values are:
username = yeo
surname = yang
phonenumber = 11-12345 
```

现在，用户对以下内容进行编辑并提交。

```
e.g. The edited submitted values are:
username = yeoNew
surname = yangNew
phonenumber = 12-1111 
```

这被提交到服务器端并且服务器端验证失败，因为不允许以 12 开头的电话号码。

无论如何，因此表单将显示回给用户

```
e.g. The redisplayed form values are:
username = yeoNew
surname = yangNew
phonenumber = 12-1111 
```

这是因为我的表单允许用户记住他们提交的值。

在这个阶段，我想让用户能够使用客户端 javascript 将表单值重置为原始值。这就像一个重置功能。

```
e.g. The reset button will restore the form values to:
username = yeo
surname = yang
phonenumber = 11-12345 
```

此重置功能的原因是我希望用户可以选择从原始值再次编辑电话号码。

我的问题是：跟踪 HTML 中的原始值以便我可以使用 javascript 恢复它的好方法是什么？

我正在考虑表单元素中一个名为 orig='' 的新属性，它将存储该值。这是一个好主意吗？还有其他方法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T02:44:31.007

我会使用 HTML5 本地存储。见[http://www.w3schools.com/html/html5_webstorage.asp](http://www.w3schools.com/html/html5_webstorage.asp)

使用 jquery 我会这样做：

```
 <script type="text/javascript">
      function load() {
        if (localStorage["username"]) {
            $('#username').val(localStorage["username"]);
        }
        if (localStorage["surname"]) {
            $('#surname').val(localStorage["surname"]);
        }
        if (localStorage["phone"]) {
            $('#phone').val(localStorage["phone"]);
        }
      }

      function save() {
        localStorage["username"] =  $('#username ').val();
        localStorage["surname"] =  $('#surname').val();
        localStorage["phone"] =  $('#phone').val();
      }
   </script> 
```

# arrays - 算法奥林匹克：数组中的条件最小值

> ID：15606782
> 
> 赞同：0
> 
> 时间：2013-03-25T02:39:05.227
> 
> 标签：arrays, algorithm, sorting, minimum

我有一个数组 A = [a1, a2, a3, a4, a5...] 我想找到数组的两个元素，比如 A[i] 和 A[j] 使得**i 小于 j**和**A [j]-A[i] 是最小且正的**。

运行时间必须是 O(nlog(n))。

此代码是否可以完成这项工作：

1.  首先对数组进行排序并跟踪每个元素的原始索引（即：原始（未排序）数组中元素的索引。

2.  遍历排序数组并计算任何两个连续元素之间的差异，以验证较大元素的原始索引大于较小元素的原始索引的初始条件。

3.  答案将是所有这些差异的最小值。

以下是这在示例中的工作方式：

```
A = [0, -5, 10, 1] 
```

在这种情况下，结果应该是 1 来自 和 之间的`A[3]`差异`A[0]`。

*   排序 A：newA=[-5,0,1,10]

*   由于 OriginalIndex(-5)>OriginalIndex(0)，不计算差异

*   由于 OriginalIndex(1)>OriginalIndex(0)，我们计算差 = 1

*   由于 OriginalIndex(10)>OriginalIndex(1)，我们计算差值 = 9

结果是最小差异，即 1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T03:32:47.267

与另一篇文章中的主张相反，您的算法的运行时间不会有任何问题。例如，使用 heapsort 可以将数组排序`O(n log n)`为问题中给定的上限。沿着排序的数组额外`O (n)`运行一次不会再有任何损害，所以你仍然会继续使用 runtime `O (n log n)`。

不幸的是，您的答案似乎仍然不正确，因为它没有给出正确的结果。

仔细查看给出的示例，您应该能够自己验证。您的示例中给出的数组是：`A=[0,-5,10,1]`

从 0 开始计数，选择​​索引`i=2`并`j=3`满足给定的`i < j`要求`2 < 3`。计算`A[j] - A[i]`与所选值的差异归结为`A[3] - A[2]`计算`1 - 10 = -9`肯定小于`1`算法示例应用程序中计算的最小值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T03:05:17.633

由于您要最小化元素之间的距离，因此它们在排序列表中必须彼此相邻（如果它们不是，那么它们之间的元素与其中一个的距离将更短 -> 矛盾）。您的算法按照指定在 O(nlogn) 中运行，因此对我来说看起来不错。

# excel - 如何将“Worksheet_SelectionChange”事件中“目标”范围的内容传递给子对象？

> ID：15606785
> 
> 赞同：1
> 
> 时间：2013-03-25T02:39:20.163
> 
> 标签：excel, vba

我的工作簿的表 1 包含（除其他数据外）A 列中其他工作表的列表。我希望能够单击 A5:A50 列中的任何单元格并转到该单元格中列出的相应工作表。我的 Sheet1 代码是：

```
Private Sub Worksheet_SelectionChange(ByVal Target As Range)
    If Not Intersect(Target, Me.Range("A5:A50")) Is Nothing Then SelectWorksheet
End Sub 
```

模块 2 是：

```
Sub SelectWorksheet()
    Dim strName As String
    strName = Sheet1.Range("Target").Text (Error occurrs here: "Method 'Range' of object 'Worksheet' failed")
    Sheets(strName).Select
End Sub 
```

我如何让它按我的预期工作？我知道我可以单击相应的工作表选项卡，但我正在尝试学习如何在 VBA 中编码。谢谢。顺便说一句，我如何让我的帖子显示问题框中输入的代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T02:50:29.883

像这样。您可能想使用`_SelectionChange`事件而不是`_Change`事件。或者您可能会发现有必要同时使用这两个事件来触发它。无论如何，这里是您将变量传递给另一个子例程/模块的方式：

```
Sub Worksheet_SelectionChange(byVal Target as Range)
'Some code...
'
Call OtherMacro(Target) 
'
End Sub 
```

然后在你的另一个宏中，声明一个范围变量作为必需的参数，如下所示：

```
Sub SelectWorksheet(rng as Range)
'
Dim strName as String

' at this point you can work with the "rng" variable, because it's been received from the other subroutine    
strName = rng.Value
Sheets(strName).Activate
'
End Sub 
```

您需要添加额外的测试以确保用户没有选择多个单元格等，但这应该可以帮助您入门。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T10:52:44.000

为什么不将工作表名称从单元格传递给子？

```
Private Sub Worksheet_SelectionChange(ByVal Target As Range)
    If Not Intersect(Target, Me.Range("A5:A50")) Is Nothing _
        And Target.Cells.Count = 1 Then SelectWorksheet (Target.Value)
End Sub

Sub SelectWorksheet(strName As String)
    Sheets(strName).Select
End Sub 
```

我还进行了检查以确保选择中只有一个单元格。

# java - 如何将整数从 0 到 2000 转换为长度为 2 的字节数组，反之亦然？爪哇

> ID：15606789
> 
> 赞同：0
> 
> 时间：2013-03-25T02:39:44.903
> 
> 标签：java, arrays, int

好吧，问题几乎就像标题一样。在我的应用程序中，我使用 UDP 数据包发送 2 个字节的数组。我想知道是否有办法将整数从 0 到 2000 转换为大小为 2 的字节数组，然后将该字节数组转换回整数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T04:24:51.157

您可以使用 java.nio ByteBuffer 转换

为字节

```
int[] ia = { 1, 2, 3 };
ByteBuffer bb = ByteBuffer.allocate(ia.length * 4);
for (int i : ia) {
    bb.putShort((short)i);
}
byte[] ba = bb.array(); 
```

为整数

```
ShortBuffer sb = ByteBuffer.wrap(ba).asShortBuffer();
int[] ia = new int[sb.limit() / 2];
for(int i = 0; i < ia.length; i++) {
    ia[i] = sb.get();
} 
```

# java - 关闭开关时如何使android编辑文本不可编辑？

> ID：15606792
> 
> 赞同：0
> 
> 时间：2013-03-25T02:40:21.560
> 
> 标签：java, android

我是 android 开发的新手，在将开关设置为关闭后尝试使我的 editText 不可编辑时遇到了困难。问题是开关功能不起作用。即使将其设置为关闭，我仍然可以编辑文本。这是我的代码：

```
public void onCreate(Bundle savedInstanceState) {
        this.getWindow().setSoftInputMode(
                WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN);
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_profile);
        final View switch1 = (Switch) findViewById(R.id.editSwitch);
        final EditText mEdit = (EditText) findViewById(R.id.bioTxt);
        switch1.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                if (switch1.getContext().toString().equals("On")) {

                    mEdit.setEnabled(true);
                }

                else if (switch1.getContext().toString().equals("Off")) {

                    EditText mEdit = (EditText) findViewById(R.id.bioTxt);
                    mEdit.setEnabled(false);
                }
            }
        });

    };
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T02:52:36.330

`Switch``isChecked()`如果开关处于“打开”位置，则具有返回 true 的函数。因此，您的 onClick 方法可以是：

```
public void onClick(View v) {
    mEdit.setEnabled(switch1.isChecked());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T02:46:19.273

```
switch1.getContext().toString() 
```

你想在这里做什么？视图上的 getContext 返回拥有它的活动。它不会返回任何会变成“开”或“关”的东西。您需要调用其他一些函数。我不确定哪个，因为它看起来像是自定义视图。

# android - 尝试发出通知时出错

> ID：15606795
> 
> 赞同：0
> 
> 时间：2013-03-25T02:41:03.410
> 
> 标签：android, notifications

我试图让我的应用程序创建一个通知，但这段代码给了我编译错误：

```
public void makeRing(Context context, boolean notify)
    {

        if (notify)
        {
            NotificationCompat.Builder mBuilder =
                    new NotificationCompat.Builder(context)
                    //.setSmallIcon(R.drawable.notification_icon)
                    .setContentTitle("My notification")
                    .setContentText("Hello World!");
            // Creates an explicit intent for an Activity in your app
            Intent resultIntent = new Intent(context, MainActivity.class);

            // The stack builder object will contain an artificial back stack for the
            // started Activity.
            // This ensures that navigating backward from the Activity leads out of
            // your application to the Home screen.
            TaskStackBuilder stackBuilder = TaskStackBuilder.create(context);
            // Adds the back stack for the Intent (but not the Intent itself)
            stackBuilder.addParentStack(MainActivity.class);
            // Adds the Intent that starts the Activity to the top of the stack
            stackBuilder.addNextIntent(resultIntent);
            PendingIntent resultPendingIntent =
                    stackBuilder.getPendingIntent(
                        0,
                        PendingIntent.FLAG_UPDATE_CURRENT
                    );
            mBuilder.setContentIntent(resultPendingIntent);
            NotificationManager mNotificationManager =
                (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);
            // mId allows you to update the notification later on (first number)
            mNotificationManager.notify(5954, mBuilder.build());

        } 
```

它是直接取自 Android 开发者网站的代码。错误出现在“TaskStackBuilder stackBuilder = TaskStackBuilder.create(context);”的行中，其中 create 带有下划线，它表示“对于 TaskStackBuilder 类型，方法 create(Context) 未定义”。

此外，在最后一行 build() 带有下划线，它表示“对于 NotificationCompat.Builder 类型的 build() 方法未定义。

我该如何解决这些？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-16T15:57:29.757

我在使用支持库时遇到了同样的问题。似乎它没有实现这些方法。这是有效的代码：

```
NotificationCompat.Builder builder = new NotificationCompat.Builder(this)
        .setSmallIcon(R.drawable.ic_action_search)
        .setContentTitle("New search")
        .setContentText("Que hay de nuevo, viejo");
Intent resultIntent = new Intent(this, Temporal.class);
TaskStackBuilder stackBuilder = TaskStackBuilder.from(this);
stackBuilder.addParentStack(Temporal.class);
stackBuilder.addNextIntent(resultIntent);
PendingIntent resultPendingIntent = stackBuilder.getPendingIntent(0, PendingIntent.FLAG_UPDATE_CURRENT);
builder.setContentIntent(resultPendingIntent);
NotificationManager manager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);
manager.notify(112, builder.getNotification()); 
```

变化是

```
TaskStackBuilder stackBuilder = TaskStackBuilder.from(this); 
```

代替

```
TaskStackBuilder stackBuilder = TaskStackBuilder.create(this); 
```

和

```
manager.notify(112, builder.getNotification()); 
```

代替

```
manager.notify(112, mBuilder.build()); 
```

**已编辑**

**更好的解决方案：只需下载最新的 Android 支持库。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T03:25:06.573

您可能尚未下载所需版本的支持库。您可以在[此处](http://developer.android.com/tools/extras/support-library.html)查看所有版本，并找出您需要的版本。

我相信这是包含 Notifications 更改的最新版本：

> 支持包，第 10 版（2012 年 8 月）
> 
> v4 支持库的更改：
> 
> ```
>  Added support for notification features introduced in Android 4.1 (API level 16) with additions to NotificationCompat. 
> ```

但您可能可以下载最新版本，以防万一。

# html5-video - 找不到支持格式和 MIME 类型的视频

> ID：15606797
> 
> 赞同：9
> 
> 时间：2013-03-25T02:41:12.017
> 
> 标签：html5-video

我的视频索引中有下一个代码：

```
<video width="100%"  controls>
  <source src="video/v1.ogv" type="video/ogg">
  <source src="video/v1.webm" type="video/webm">
  <source src="video/v1.mp4" type="video/mp4">
Your browser does not support the video tag.
</video> 
```

当我尝试在 Firefox 中加载它时，它会返回**“没有找到支持格式和 MIME 类型的视频”。**

Firebug 将返回

```
"NetworkError: 500 Internal Server Error - https://root/folder/video/v1.ogv"

v1.ogv

HTTP load failed with status 500\. Load of media resource https://root/folder/video/v1.ogv failed.

...,c=l.length;c--;)(f=l[c])&&(v[d[c]]=!(y[d[c]]=f));if(i){if(o||e){if(o){for(l=[],...

jquery.min.js (line 2)

"NetworkError: 500 Internal Server Error - https://root/folder/video/v1.webm"

v1.webm

HTTP load failed with status 500\. Load of media resource https://root/folder/video/v1.webm failed.

Specified "type" attribute of "video/mp4" is not supported. Load of media resource video/v1.mp4 failed.

All candidate resources failed to load. Media load paused. 
```

有什么线索吗？它也不适用于 Google Chrome。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-03T11:22:15.467

路径是否有效？

*   `https://root/folder/video/v1.ogv`
*   `https://root/folder/video/v1.webm`

[Firefox 不支持](https://developer.mozilla.org/en-US/docs/HTML/Supported_media_formats)解释`Specified "type" attribute of "video/mp4" is not supported.`错误的 .mp4 文件。

如果您使用的是 Apache，您可以强制它使用正确的 MIME 类型。将以下内容添加到您的 .htaccess 文件中。

```
# MIME types for Video
AddType video/mp4 mp4 m4v f4v f4p
AddType video/ogg ogv
AddType video/webm webm
AddType video/x-flv flv 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-07T06:40:13.747

@Gonzalo- 正如@Daniel 在他的回答中指出的那样-确保源标签中的 /video 文件夹是可访问的。例如 - 您正在访问您的页面

`https://abcdomain/approot/somepage`

并假设你在 approot 中有这个视频文件夹，那么你需要修改源标签，它会像 -

`<source src="/approot/video/v1.ogv" type="video/ogg">`

希望这可以帮助。

# python - 夹层中的前端博客帖子表单

> ID：15606808
> 
> 赞同：0
> 
> 时间：2013-03-25T02:42:54.947
> 
> 标签：python, django

我正在尝试实现一个 BlogPost 视图以在我的夹层项目的前端添加帖子。可以在此处找到的快速博客表单是我试图用来创建视图的表单。 [https://github.com/stephenmcd/mezzanine/blob/master/mezzanine/blog/forms.py](https://github.com/stephenmcd/mezzanine/blob/master/mezzanine/blog/forms.py)

将以下行添加到 urls.py：

```
url("^%sadd%s$" % _slashes, "blog_post_add", name="blog_post_add"), 
```

将此功能添加到views.py：

```
@user_passes_test(lambda u: u.is_superuser)
def blog_post_add(request):
    form = BlogPostForm(request.POST or None)
    if form.is_valid():
        BlogPost = form.save(commit=False)
        BlogPost.save()
        return redirect(BlogPost)
    return render_to_response('blog/blog_post_add.html',
                              { 'form': form },
                              context_instance=RequestContext(request)) 
```

这就是我在这些文件中所做的全部更改。[https://github.com/stephenmcd/mezzanine/blob/master/mezzanine/blog/urls.py](https://github.com/stephenmcd/mezzanine/blob/master/mezzanine/blog/urls.py)

我完全错过了什么吗？我没有收到任何错误，它根本不起作用。感谢您的帮助和抱歉 - 我对 Python 很陌生！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T03:11:00.553

添加你的settings.py

```
BLOG_SLUG = "/"
APPEND_SLASH = "/" 
```

更新：

```
url("^add%s$" % _slashes[1], "blog_post_add", name="blog_post_add"),
//this is equivalent to url("^add/$", "blog_post_add", name="blog_post_add") 
```

在斜线的夹层实现中：

```
_slashes = (
    "/" if settings.BLOG_SLUG else "",
    "/" if settings.APPEND_SLASH else "",
) 
```

`if BLOG_SLUG is True and not EMPTY then it is equivalent to "/", the same also in APPEND_SLASH`

# c - C语言，如何解决分段错误

> ID：15606823
> 
> 赞同：-1
> 
> 时间：2013-03-25T02:45:15.077
> 
> 标签：c, arrays, file, segmentation-fault

到目前为止，这是我的代码

```
#define MAXROWS     60
#define MAXCOLS     60
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <math.h>

main()
{
char TableFileName[100];
char PuzzleFileName[100];
char puzzle[MAXROWS][MAXCOLS];
char line[MAXCOLS];
FILE *TableFilePtr;
int cols;
int rows;
cols=0;
rows=0;
printf("Please enter the table file name: ");
scanf("%s",TableFileName);

/* ... */

TableFilePtr = fopen(TableFileName, "r");
//printf("\n how many rows and colums are there?  separate by a space: ");
 //  scanf("%d %d",&rows, &cols);

while(fgets(line, sizeof line, TableFilePtr) != NULL)
{
    for(cols=0; cols<(strlen(line)-1); ++cols)
    {
        puzzle[rows][cols] = line[cols];
    }
    /* I'd give myself enough room in the 2d array for a NULL char in 
       the last col of every row.  You can check for it later to make sure
       you're not going out of bounds. You could also 
       printf("%s\n", puzzle[row]); to print an entire row */
    puzzle[rows][cols] = '\0';
    ++rows;
}
/*int c;
for(c=0; c<MAXROWS; ++c){
    fgets(puzzle[rows], sizeof puzzle[rows], TableFilePtr);
}*/
printf("%s",puzzle[5][5]);
} 
```

我想做的是让它从一个文本文件中读取，该文本文件在 txt 文件中包含一个 wordsearch，因此它只有随机字母。我希望能够做到，这样我就可以说拼图[5][5]，它给了我第 4 行和第 4 列中的字符。我遇到了分段错误，但我不知道如何修复它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T02:49:06.130

您正在尝试打印一个字符串`printf("%s", puzzle[rows][cols])`并给出 a `char` `puzzle[rows][cols]`is 1 个字符而不是字符串。

这样做：`printf("%c", puzzle[rows][cols]);`相反。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T03:11:19.417

除了在将字符写入拼图数组时没有检查拼图数组的边界外，我没有看到明显的错误。所以我认为可能的原因是您的输入文件太大而无法放入拼图数组中，然后数组已溢出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T02:57:46.433

```
char puzzle[MAXROWS][MAXCOLS];
char line[MAXCOLS];
//...
while(fgets(line, sizeof line, TableFilePtr) != NULL)
{
    for(cols=0; cols<(strlen(line)-1); ++cols)
    {
        puzzle[rows][cols] = line[cols];
    }
    puzzle[rows][cols] = '\0';
    ++rows;
} 
```

这是危险的，因为您永远不会检查行数是否小于 MAXROWS 或每行的长度是否小于 MAXCOLS。这意味着格式错误的数据文件可能会导致您写入超出`puzzle`数组的范围，这可能会导致分段错误、内存损坏或其他问题。

要修复，您需要在循环条件中包含限制，如下所示：

```
while (frets(line, sizeof line, TableFilePtr) != NULL && rows < MAXROWS) {
    for (cols=0; cols<(strlen(line)-1) && cols < MAXCOLS; ++cols) {
        //... 
```

# f# - F# distinctBy 行为

> ID：15606825
> 
> 赞同：3
> 
> 时间：2013-03-25T02:45:31.313
> 
> 标签：f#, identity

我不理解此代码段中 distinctBy 的行为：

```
let s  = [123; 231; 321]
let s1 = s |> Seq.map        (string >> Seq.sort)
let s2 = s |> Seq.distinctBy (string >> Seq.sort) 
```

产生：

```
s1 = seq [seq ['1'; '2'; '3']; seq ['1'; '2'; '3']; seq ['1'; '2'; '3']] 
```

正如预期的那样，但是：

```
s2 = seq [123; 231; 321] 
```

我期望只有一个元素，因为 3 个键是相同的。我错了哪一部分？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T03:21:17.683

F# 不比较序列是否相等，请参阅此示例

```
(123 |> string |> Seq.sort) = (123 |> string |> Seq.sort)
val it : bool = false 
```

我想这是为了支持无限序列。

您可以通过映射到列表来解决此问题

```
let s  = [123; 231; 321] |> Seq.distinctBy (string >> Seq.sort >> Seq.toList);;
val s : seq<int>

> s;;
val it : seq<int> = seq [123] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T02:55:13.827

`Seq.sort`可能没有实现比较逻辑。所以底层实现看到三个不同的对象。

如果您执行以下操作，则类似：

```
object.ReferenceEquals("1", 1.ToString()); 
```

# html - LI不遵守祖先的填充

> ID：15606828
> 
> 赞同：0
> 
> 时间：2013-03-25T02:46:18.027
> 
> 标签：html, css, html-lists

我的 LI 不遵守祖先的填充设置：

![在此处输入图像描述](../Images/1d5db3b94680957bcb9067952557b1d3.png)

这是HTML：

```
<div class="expUnit">
    <h4>Company</h4>
    <p>Lorem ipsum.</p>
    <ul class="project-list">
        <li>Line 1</li>
        <li>Line 2</li>
    </ul>
</div> 
```

CSS：

```
.expUnit 
{
    line-height:17px;
    color: #444;
    border-left:1px solid #fadc66;
    padding-left:15px;
}

.expUnit .project-list li
{
    list-style-type: circle;
} 
```

然而，在[fiddle](http://jsfiddle.net/ux2hm/9/)中，它确实缩进了它。我没有得到子弹与“Lorem ipsum”对齐的原因可能是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T04:13:16.563

看起来您正在将填充应用到您的父容器，而不是您的`project-list`.

此外，由于您使用的是`reset.css`，因此您需要`ul{padding:0}`使用更具体的声明来覆盖 。

尝试：

```
.expUnit ul
  {
    padding-left:15px;
    list-style-type: circle;
  } 
```

另外，请仔细检查您的 CSS 文件是否被调用`reset.css`

# javascript - crm2011插件调用js函数

> ID：15606835
> 
> 赞同：2
> 
> 时间：2013-03-25T02:46:37.913
> 
> 标签：javascript, plugins, call, dynamics-crm-2011

如何使用 CRM2011 中的插件从适当的 Web 资源运行 JavaScript 函数。

我在互联网上找不到任何信息。大多数资源都描述了如何从 JS 触发插件，但并非相反。

这是将注释复制到描述字段的 JS 代码。单击保存时。您可以看到数据正确显示在描述字段中。但是，如果您按保存并关闭并再次打开表单，说明字段将为空。我认为这样做的原因是 JS 在安全事件之后执行，但后来的测试发现它是错误的。有人能指出这个 JS 代码中的错误导致数据没有保存吗？或者建议如何编写一个插件，该插件从相关实体中检索数据并将其写入表单中的字段。谢谢

![在此处输入图像描述](../Images/aa9bd20771db19c0979facb622e613df.png)

```
function copyNotes()
 {
// CLEAR DESCRIPTION FIELD
alert("JS");
    Xrm.Page.getAttribute("description").setValue('');
// GET ID OF THE CASE AND CLEAN IT AND GET URL for oData stuff
//THEN CALL RETRIEVE FUNCTION
    var caseID = Xrm.Page.data.entity.getId();
    caseID = caseID.replace('{', '').replace('}', '');
    var oDataPath = Xrm.Page.context.getServerUrl() + "/xrmservices/2011/organizationdata.svc";
    ODataPath = Xrm.Page.context.getServerUrl() + "/XRMServices/2011/OrganizationData.svc";
    retrieveRecord(caseID);
}
// CREATE AN HTTP REQUEST AND SEND IT
function retrieveRecord(Id) {

var retrieveReq = new XMLHttpRequest();
retrieveReq.open("GET", ODataPath + "/AnnotationSet?$filter=ObjectId/Id" + " eq (guid'" + Id + "')", true);

retrieveReq.setRequestHeader("Accept", "application/json");
retrieveReq.setRequestHeader("Content-Type", "application/json; charset=utf-8");
retrieveReq.onreadystatechange = function() {
// THIS HANDLES A CALLBACK 
        retrieveReqCallBack(this);
    };
    retrieveReq.send();
}

function retrieveReqCallBack(retrieveReq) {
    if (retrieveReq.readyState == 4 /* complete */  )
 {
        if (retrieveReq.status == 200) {
            //Success
            var retrieved = this.parent.JSON.parse(retrieveReq.responseText).d;
// ITERATE THROUGH THE NOTES FOR THIS CASE
            for (var i = 0; i < retrieved.results.length; i++) {
// IF IS AN EMPTY FIELD ADD 'case details:'
                if (Xrm.Page.getAttribute("description").getValue() == null || Xrm.Page.getAttribute("description").getValue() == 'null') {
                    Xrm.Page.getAttribute("description").setValue('Case details:');
                }
                // BOF PARSE DATE
                var date = retrieved.results[i].CreatedOn;
                date = new Date(parseInt(date.replace("/Date(", "").replace(")/", ""), 10));
                // EOF PARSE DATE
                var newtext = "--------------------\r\n" + "Created by: " + retrieved.results[i].CreatedBy.Name + " - " + date + "\r\n" + retrieved.results[i].NoteText + "\r\n--------------------\r\n";
                var text = Xrm.Page.getAttribute("description").getValue() + "\r\n" + newtext;
                Xrm.Page.getAttribute("description").setValue(text);
            }
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T03:17:26.687

插件内不支持从服务器回调客户端的方式。我也不知道有任何不受支持的方式。

我认为这个问题甚至没有意义。插件仅在进行某种 CRUD 操作时触发。由 GUI 触发的任何 CRUD 操作都会以任何方式刷新实体。您可以通过 javascript 和 Odata 调用执行更新，但是一旦插件完成，您就可以运行您想要运行的任何 javascript。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T06:01:56.737

没有（合理的）方法可以做到这一点。

原因是插件是一个服务器大小的执行对象。它甚至不能假设有一个 GUI。（当然，我们知道但一般来说，服务器大小的代码不能直接与 GUI 交互）。

JavaScript 是客户端代码，客户端假定服务器。这（大致）就是为什么 JS 可以调用插件（尽管我不会那样说），但反过来不行。

我从来不需要这样的手术，所以我很好奇你的任务是什么。你问的是纯粹的学术兴趣还是设计的一部分？也许有更好的方法来实现你的目标？

# java - Java gui如何获取文本框的大小

> ID：15606838
> 
> 赞同：1
> 
> 时间：2013-03-25T02:47:05.257
> 
> 标签：java, swing, user-interface, jframe

嗨，伙计们/女孩们，我正在尝试制作一个盒子，它将接受用户输入的数字。现在我已经制作了一个文本字段，但是如何更改文本字段的大小。

这是我到目前为止得到的

```
public class example extends JFrame {
    private JTextField example1;

   example() {    
        box1 = new JTextField(10);
        add(example1); 
```

现在它只是在尝试 2 变得像一个正方形大小的文本字段，这将允许用户在那里写一个数字。这将是一个数字。任何帮助都会很棒。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T03:20:11.807

你说：

> 我正在尝试制作一个计算器。所以我用这个盒子来保存一个数字。

我所知道的大多数计算器都没有用于显示当前数字的小字段，而是有一个覆盖其 GUI 顶部整个宽度的文本组件，而使用 Java Swing 实现这一点的关键在于使用正确的布局管理器和正确的组件放置。例如，这个 GUI 设计可以通过使用一个使用 BorderLayout 的容器来解决，并将您的显示 JTextField（不是 JTextArea）放在 BorderLayout.PAGE_START 位置，并将另一个 JPanel 中的按钮放在主容器的 BorderLayout.CENTER 位置。

例如，请在[此处查看](https://stackoverflow.com/a/15606426/522444)我的答案中的代码。它创建了一个如下所示的 GUI ![在此处输入图像描述](../Images/c075179347cd6310a5e95c55a7c8f41c.png)：. 这显示了两个计算器，它们仅根据所选字体的大小而有所不同。

关键代码是：

```
 textField.setFont(textField.getFont().deriveFont(BTN_FONT_SIZE));

  mainPanel.setLayout(new BorderLayout(gap, gap));
  mainPanel.setBorder(BorderFactory.createEmptyBorder(gap, gap, gap, gap));
  mainPanel.add(textField, BorderLayout.PAGE_START);
  mainPanel.add(buttonPanel, BorderLayout.CENTER); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T03:08:23.733

`JTextField`使用字符数（列数）而不是像素大小。如果您正在寻找可以指定大小的文本框，请使用`JTextArea`.

# php - 使用 mysqli_multi_query 在插入查询后获取自动增量 id

> ID：15606841
> 
> 赞同：0
> 
> 时间：2013-03-25T02:47:13.677
> 
> 标签：php, mysqli

这是我需要使用mysqli_multi_query对多个表进行多次插入的问题，当第一个插入的id需要作为FK插入到第二个表中时，我知道如果它们使用两个不同的连接该怎么做，但是如何自从imce使用mysqli_multi_query以来，它们都在同一个查询中时可以完成吗？

%% 顺便说一下，我使用 MySQLi 和 PHP

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T03:06:54.860

`SELECT LAST_INSERT_ID()`与您的第二个插入语句一起使用

# c++ - 在 tinyxml2 中获取子元素

> ID：15606842
> 
> 赞同：11
> 
> 时间：2013-03-25T02:47:33.867
> 
> 标签：c++, tinyxml2

这可能是一个新手问题，但我是 tinyxml2 的新手，对此一无所知。

我正在尝试使用 tinyxml2 遍历 XML 文件。

```
<images>
    <correctImage>image1.png</correctImage>
    <image>image2.png</image>
    <image>image3.png</image>
</images> 
```

我有图像元素的 XMLElement，但我不确定如何获取内部元素。

任何手将不胜感激。

作为记录，这是我获取 XML 元素的方式：

```
tinyxml2::XMLElement *levelElement = doc.FirstChildElement("reactor")->FirstChildElement("level")->FirstChildElement("images"); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-25T03:45:29.820

您可以按照现在的方式执行此操作，只是您没有指定要查找的元素的值。

例如

```
tinyxml2::XMLElement *levelElement = doc.FirstChildElement("reactor")->FirstChildElement("level")->FirstChildElement("images");
for (tinyxml2::XMLElement* child = levelElement->FirstChildElement(); child != NULL; child = child->NextSiblingElement())
{
    // do something with each child element
} 
```

# mysql - 无效使用空值

> ID：15606843
> 
> 赞同：10
> 
> 时间：2013-03-25T02:47:34.633
> 
> 标签：mysql, sql, mysql-error-1138

我在使用 mySQL 时遇到问题。

弹出此错误：

`Invalid use of null value`

我试图将表中的两个属性作为主键；这是我的代码：

```
alter table contact_info
add primary key(phone_number, contactID); 
```

以下是我放入我的contact_info 表的alter 语句：

```
alter table contact_info
add contactID varchar(10);

alter table contact_info
add suffixID varchar(8);

alter table contact_info
add titleID varchar(12);

alter table contact_info
add companyID varchar(12);

alter table contact_info
add phonetypeID char(2); 
```

有人知道出了什么问题吗？提前致谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-25T02:54:52.790

在 phone_number 或contactID 中查找具有空值的contact_info。您不能在表中添加具有现有空值的主键。

```
select *
from contact_info
where (phone_number is null or contactID is null) 
```

运行该 SQL 以查找值为空的任何记录。更新记录，然后再次尝试应用您的主键。

我不确定你在做什么，但你可能想先**备份你的数据！！！**在运行任何更新之前。以下是您可以用来设置联系人 ID 的更新：

```
update contact_info
set contactID = (select max(contactID) from contact_info) + 1
where contactID is null

update contact_info
set phone_number = '555-1212'
where phone_number is null 
```

如果您的数据中有重复项，您需要找到它们并更新它们。以下是查找重复项的方法：

```
-- Assuming the phone_number is duplicate (2 people living in the same house with the same phone number)
select a.phone_number, count(1)
from contact_info a
group by a.phone_number
having count(1) > 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T02:56:14.143

运行此查询将告诉您有问题的列在哪里。您不能将`NULL`值设置为主键。

```
SELECT *
FROM contact_info
WHERE phone_number IS NULL
OR contactID IS NULL 
```

# php - PHP：缓存 Facebook Graph API 结果

> ID：15606845
> 
> 赞同：1
> 
> 时间：2013-03-25T02:47:39.803
> 
> 标签：php, facebook-graph-api

我使用 Facebook Graph API 来获取我的 Facebook 粉丝页面（总共 7 个 Facebook 页面），代码如下：

```
<?php
header('Content-Type: text/plain; charset=utf-8');
require_once('facebook.php');
$facebook = new Facebook(array(
    'appId'  => 'MY_APP_ID',
    'secret' => 'MY_APP_SECRET',
));

$page_feed_1 = $facebook->api('MY_FB_PAGE_ID_1/feed');
$page_feed_2 = $facebook->api('MY_FB_PAGE_ID_2/feed');
// ... etc
?> 
```

我计划将 JSON 结果缓存到文件中，然后从缓存文件中加载输出页面（显示 Facebook 页面的内容）。但是，如果我不能使用 cron 作业（是的，我的 Web 服务器是基于 Linux 的），我的加载顺序应该是什么？

我目前的计划是：

1.  当输出页面加载时，检查缓存文件，如果是，加载缓存文件
2.  使用延迟的 JavaScript 创建对 PHP 脚本的 AJAX 调用，以从 Facebook 获取更新的内容并保存到缓存文件

我现在能想到的问题是，当很多用户访问输出页面时，缓存会刷新很多次。如何查看我的 Facebook 页面的最后更新时间？如果内容相同，则缓存不会刷新。

注意：我的问题不是关于在 PHP 中解析 JSON / Array。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-09T09:37:39.920

我的最终解决方案是使用 PHP 脚本调用 Facebook API，该脚本由 cronjob 定期执行。

棘手的部分是使用 Facebook 令牌交换从 Facebook 获取永不过期的静态令牌，这样可以节省请求新令牌的时间，并且无需使用用户帐户登录。

# vbscript - 通过excel文件排序时类型不匹配

> ID：15606846
> 
> 赞同：2
> 
> 时间：2013-03-25T02:47:48.107
> 
> 标签：vbscript

我收到此错误：

> 类型不匹配：'objExcel.Cells(...).Value'

运行此程序时：

```
Set objExcel = CreateObject("Excel.Application")
objExcel.Visible = True
Set objWorkbook = objExcel.Workbooks.Open("myFile.xlsx")

strMach = "string1,string2,string3"
arrMach = Split(strMach, ",")

for j = 0 to Ubound(arrMach) 
  remove(arrMach(j))
Next

Function remove(strValue)
  i = 1
  removeCounter = 0

  Do Until objExcel.Cells(i, 2).Value = ""
    If objExcel.Cells(i, 2).Value = strValue Then
      Set objRange = objExcel.Cells(i, 2).EntireRow
      objRange.Delete
      i = i - 1
      removeCounter = removeCounter + 1
    End If

    i = i + 1
  Loop

  wscript.echo strValue & " - REMOVED!"
  wscript.echo "Removed " & removeCounter & " results."
End Function 
```

该程序用于从所有现有行中搜索字符串，如果找到，则删除整行。

该错误似乎来自以下行：

```
Do Until objExcel.Cells(i, 2).Value = "" 
```

我已经尝试在大约 50 行的 excel 文件上对此进行测试，并且效果很好。但是，一旦我在大约 25,000 行的 excel 文件上使用它，我总是会收到错误消息。任何人都可以帮忙吗？文件的大小会在运行时影响我的代码吗？

谢谢你。

**编辑：** 我已经在超过 50,000 行的 excel 表上进行了测试，效果很好。但是，每当我在实际文件上使用它时，仍然会出现相同的错误。是否有任何我应该注意的特殊字符/值不能被上面的代码正确处理？再次感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T11:45:23.333

当您检查的单元格包含错误时，可能会出现这样的错误，例如，由于删除的行导致引用丢失。

添加一些调试代码来识别罪魁祸首：

```
On Error Resume Next
Do Until objExcel.Cells(i, 2).Value = ""
  If Err Then Exit Do
  If objExcel.Cells(i, 2).Value = strValue Then
    Set objRange = objExcel.Cells(i, 2).EntireRow
    objRange.Delete
    i = i - 1
    removeCounter = removeCounter + 1
  End If

  i = i + 1
Loop

If Err Then
  WScript.Echo "Error " & Err.Number & " in row "& i & ": " & Err.Description
  WScript.Echo "Value is: " & objExcel.Cells(i, 2).Value
End If
On Error Goto 0 
```

# python - 查询集到以公共字段为键的字典

> ID：15606847
> 
> 赞同：0
> 
> 时间：2013-03-25T02:48:05.247
> 
> 标签：python, django

给定这样的查询集：

```
[<'item', 'category1'>, <'item2', 'category1'>, <'item3', 'category2'>] 
```

将其“压缩”到一个字典的 Pythonic 方法是什么，其中常见类别是键，值作为列表？例如

```
{ category1: [item, item2], category2: [item3] } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T02:54:21.100

使用`defaultdict`. 如果字典中不存在键，则返回默认构造的项。在它下面返回一个空列表，因此可以附加每个项目而无需对不存在的键进行特殊处理。

```
from collections import defaultdict
D = defaultdict(list)
data = [('item', 'category1'), ('item2', 'category1'), ('item3', 'category2')]

for item,category in data:
    D[category].append(item)
print(D) 
```

输出：

```
defaultdict(<class 'list'>, {'category2': ['item3'], 'category1': ['item', 'item2']}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T03:17:12.307

我确信他们是一种更清洁的方法，但以下方法肯定会起作用：

```
qs = [('item', 'category1'), ('item2', 'category1'), ('item3', 'category2')]
for item, cat in qs:
if cat not in cat_dict:
    cat_dict[cat] = []
cat_dict[cat].append(item) 
```

# java - 如何使用网站的数据库连接到服务器，使用 GET 更安全

> ID：15606849
> 
> 赞同：3
> 
> 时间：2013-03-25T02:48:24.420
> 
> 标签：java, php, mysql

我有一个 java 服务器，我想使用论坛的用户详细信息连接到我的服务器。

但有一个问题。

我正在使用 Xenforo，但我真的不知道 xenforo 的算法。是的，我想通了，它是

```
public static String encryptPassword(String password) {
 return sha1(sha1(password)+theSalt);
} 
```

盐在 xenforo 中是 $salt，但我已经检查过，Xenforo 为每个用户生成一个新盐。这使得在服务器端做起来更加困难，我真的找不到它是如何生成它的，它是如何加密密码的，它是如何发现加密的，如果我没记错的话，xenforo 有 70 多个课程。

sha1(sha1 $password 是对的，salt 是错的。

我放弃了它，并制作了一个 php 文件来检查登录详细信息是否正确（使用 Xenforo 的功能）。

```
<?php
$startTime = microtime(true);
//FULL PATH.
require('/var/www/mydir/forums/library/XenForo/Autoloader.php');
XenForo_Autoloader::getInstance()->setupAutoloader('/var/www/mydir/forums/library');

XenForo_Application::initialize('/var/www/mydir/forums/library');
XenForo_Application::set('page_start_time', $startTime);

//Crypt code you set for your login, if you dont have it, then just comment $crypt out, but this is VERY useful agaisnt brute forces.
$crypt = $_POST['crypt'];

if (isset($_POST['username']) && isset($_POST['password']) && $crypt === 911895326) {

    //Username you're posting from server.
    $username = $_POST['username'];
    //Password you're posting from server.
    $password = $_POST['password'];

    $db = XenForo_Application::getDb();

    $data = $db->fetchOne('
    SELECT
    auth.data
    FROM xf_user_authenticate AS auth
    INNER JOIN xf_user AS user ON
    (user.user_id = auth.user_id)
    WHERE user.username = ?
    ', $username);

    //Gets the auth from Xenforo classes
    $auth = XenForo_Authentication_Abstract::createDefault();

    $auth->setData($data);

    //Checks if equal through the hash
    $check = $auth->authenticate($username, $password);

    //dump for testing (true/false)
    Zend_Debug::dump($check);

    /* CHECKING METHOD */ 

        //Checks if login details are equal to the ones that are in the database.
        if ($check) {
            //Prints "Success" string, so you can check in java if the printed string is that, if yes, then create login.
            echo 'Success';
        } else {
            echo 'Failed';
        }
    }

?> 
```

java 服务器将通过 GET 方法发送类似这样的内容：

[http://yourwebsite.com/password.php?crypt=123456789&username=jony&password=1234567](http://yourwebsite.com/password.php?crypt=123456789&username=jony&password=1234567)

然后PHP会检查密码是否正确，用户是否匹配，密码是否匹配。

如果详细信息正确，系统将打印“true”。从java服务器我可以检查那个页面上是否有一个名为“true”的字符串。如果是，创建登录，如果不是，给出错误。

有人告诉我，这是非常不安全的，您可以使用 wireshark 程序获取 URL，然后使用该 URL 暴力破解密码。

这是真的？这种方法不安全吗？

除此之外还有其他选择，或者直接匹配数据库中的密码吗？或者对这种方法有什么改进？：

```
public class letLogin {

    private static final string CRYPTION_ID = 'faCuGujuF32XaNeWr3t7';
    private static final String WEBSITE_DOMAIN = "http://yourwebsite.com/";

    public static int processUser(Client client){
        try {
            String URL = WEBSITE_DOMAIN + "loginProtocol.php?crypt=" + CRYPTION_ID + "&name="+client.playerName.toLowerCase().replace(" ","_")+"&pass="+client.playerPass;
            HttpURLConnection CONNECTION_HANDLE = (HttpURLConnection) new URL(URL).openConnection();
            BufferedReader OUTPUT_HANDLE = new BufferedReader(new InputStreamReader(CONNECTION_HANDLE.getInputStream()));
            String OUTPUT_DATA = OUTPUT_HANDLE.readLine().trim();
            try {
                if (!OUTPUT_DATA.contains("success"))
                    return 3;

            } catch(Exception e){
                System.out.println("Web server not responding for query: " +OUTPUT_DATA);
                return 8;               
            }
        } catch(Exception e2){ }
        return 2;
    }
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T03:08:11.703

首先，当你在 GET 中传递变量时，你不会得到变量，但你在 POST 中得到它们。如果使用GET是不安全的，我不需要使用wireshark，我可以通过查看你的浏览器历史知道你的密码......我不知道XenForo，但我的偏好是：sha1原始密码->发布用户名和加密密码 -> 使用该密码和 db 中的密码检查哈希

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T03:02:43.963

这种方法非常不安全。但是，如果您将 URL 更改为使用 https，它将是安全的，您可以像这样通过纯文本发送密码。

```
https://yourwebsite.com/password.php?crypt=123456789&username=jony&password=1234567 
```

如果您保持原样并在没有 SSL（通过 http）的情况下发送它，当有人使用wireshark 时，他们甚至不必强行输入密码。他们只会看到它。

HTTPS 是安全的，来源：

*   [https://stackoverflow.com/a/962194/809278](https://stackoverflow.com/a/962194/809278)
*   [https://stackoverflow.com/a/1582986/809278](https://stackoverflow.com/a/1582986/809278)
*   [https://security.stackexchange.com/a/7058](https://security.stackexchange.com/a/7058)

您还需要在服务器端代码上将 $_POST 更改为 $_GET。

# c++ - 为什么 gcc 链接器看不到我的析构函数？

> ID：15606850
> 
> 赞同：1
> 
> 时间：2013-03-25T02:48:53.670
> 
> 标签：c++, gcc, linker

我正在尝试按照[https://code.google.com/p/wkhtmltopdf/wiki/compilation](https://code.google.com/p/wkhtmltopdf/wiki/compilation)的说明在 Linux 机器上编译 wkhtmltopdf-qt 。

现在我被链接器拒绝链接。它打印了几个错误，但引起我注意的是：

```
/home/ubuntu/wkhtmltopdf-qt/lib/libwebcore.a(AccessibilityRenderObject.o): In function `WebCore::AccessibilityRenderObject::~AccessibilityRenderObject()':
AccessibilityRenderObject.cpp:(.text._ZN7WebCore25AccessibilityRenderObjectD0Ev+0x5): undefined reference to `WebCore::AccessibilityRenderObject::~AccessibilityRenderObject()' 
```

至少可以说这很奇怪。首先，因为链接器声称析构函数试图引用自己和下一个 - 因为它没有这样做！疯狂的东西......无论如何，一切似乎都已定义。请注意：

```
ubuntu@ip-10-245-78-162:~$ nm --defined-only -C -A /home/ubuntu/wkhtmltopdf-qt/lib/libwebcore.a | grep ~AccessibilityRenderObject
/home/ubuntu/wkhtmltopdf-qt/lib/libwebcore.a:AccessibilityRenderObject.o:0000000000000000 T WebCore::AccessibilityRenderObject::~AccessibilityRenderObject()
/home/ubuntu/wkhtmltopdf-qt/lib/libwebcore.a:AccessibilityRenderObject.o:0000000000000000 T WebCore::AccessibilityRenderObject::~AccessibilityRenderObject()
/home/ubuntu/wkhtmltopdf-qt/lib/libwebcore.a:AccessibilityRenderObject.o:0000000000000000 T WebCore::AccessibilityRenderObject::~AccessibilityRenderObject()
ubuntu@ip-10-245-78-162:~/wkhtmltopdf-qt/src/3rdparty/webkit/Source/WebCore/accessibility$ 
```

接下来，在 AccessibilityRenderObject.cpp 文件中：

```
#include <wtf/unicode/CharacterNames.h>

using namespace std;

namespace WebCore {

using namespace HTMLNames;

AccessibilityRenderObject::AccessibilityRenderObject(RenderObject* renderer)
    : AccessibilityObject()
    , m_renderer(renderer)
    , m_ariaRole(UnknownRole)
    , m_childrenDirty(false)
    , m_roleForMSAA(UnknownRole)
{
    m_role = determineAccessibilityRole();

#ifndef NDEBUG
    m_renderer->setHasAXObject(true);
#endif
}

AccessibilityRenderObject::~AccessibilityRenderObject()
{
    ASSERT(isDetached());
} 
```

所以，析构函数定义得很好。但我更进一步——我再次编译了 AccessibilityRenderObject.cpp，这次在预处理器处停止。肯定有析构函数：

```
class AccessibilityRenderObject : public AccessibilityObject {
protected:
    AccessibilityRenderObject(RenderObject*);
public:
    static PassRefPtr<AccessibilityRenderObject> create(RenderObject*);
    virtual ~AccessibilityRenderObject();
.
.
.
AccessibilityRenderObject::~AccessibilityRenderObject()
{
    ((void)0);
} 
```

用于编译该文件（以及许多其他文件）的编译行是这样的：

```
g++ -c -m64 -pipe -Wall -Wextra -Wreturn-type -fno-strict-aliasing -Wcast-align -Wchar-subscripts -Wformat-security -Wreturn-type -Wno-unused-parameter -Wno-sign-compare -Wno-switch -Wno-switch-enum -Wundef -Wmissing-noreturn -Winit-self -Wno-c++0x-compat -ffunction-sections -fdata-sections -O2 -fPIC -fvisibility=hidden -fvisibility-inlines-hidden -D_REENTRANT -DNDEBUG -DBUILDING_QT__=1 -DNDEBUG -DQT_ASCII_CAST_WARNINGS -DENABLE_XSLT=0 -DENABLE_WEB_TIMING=0 -DENABLE_JAVASCRIPT_DEBUGGER=1 -DENABLE_DATABASE=1 -DENABLE_EVENTSOURCE=1 -DENABLE_OFFLINE_WEB_APPLICATIONS=1 -DENABLE_DOM_STORAGE=1 -DENABLE_ICONDATABASE=1 -DENABLE_CHANNEL_MESSAGING=1 -DENABLE_DIRECTORY_UPLOAD=0 -DENABLE_FILE_SYSTEM=0 -DENABLE_QUOTA=0 -DENABLE_SQLITE=1 -DENABLE_DASHBOARD_SUPPORT=0 -DENABLE_FILTERS=1 -DENABLE_XPATH=1 -DENABLE_WCSS=0 -DENABLE_SHARED_WORKERS=1 -DENABLE_WORKERS=1 -DENABLE_XHTMLMP=0 -DENABLE_DETAILS=1 -DENABLE_METER_TAG=1 -DENABLE_PROGRESS_TAG=1 -DENABLE_BLOB=1 -DENABLE_NOTIFICATIONS=1 -DENABLE_INPUT_SPEECH=0 -DENABLE_INSPECTOR=1 -DENABLE_3D_RENDERING=1 -DENABLE_WEB_AUDIO=0 -DENABLE_WEBGL=0 -DENABLE_MEDIA_STATISTICS=0 -DENABLE_VIDEO_TRACK=0 -DENABLE_TOUCH_ICON_LOADING=0 -DENABLE_ANIMATION_API=0 -DENABLE_SVG=1 -DENABLE_SVG_FONTS=1 -DENABLE_SVG_FOREIGN_OBJECT=1 -DENABLE_SVG_ANIMATION=1 -DENABLE_SVG_AS_IMAGE=1 -DENABLE_SVG_USE=1 -DENABLE_DATALIST=1 -DENABLE_TILED_BACKING_STORE=1 -DENABLE_NETSCAPE_PLUGIN_API=1 -DENABLE_WEB_SOCKETS=1 -DWTF_USE_QT_BEARER=1 -DENABLE_TOUCH_EVENTS=1 -DENABLE_VIDEO=0 -DENABLE_VIDEO=0 -DSQLITE_CORE -DSQLITE_OMIT_LOAD_EXTENSION -DSQLITE_OMIT_COMPLETE -DXP_UNIX -DENABLE_NETSCAPE_PLUGIN_METADATA_CACHE=1 -DBUILDING_JavaScriptCore -DBUILDING_WTF -DBUILDING_WEBKIT -DQT_MAKEDLL -D_LARGEFILE64_SOURCE -D_LARGEFILE_SOURCE -DQT_NO_DEBUG -DQT_GUI_LIB -DQT_NETWORK_LIB -DQT_CORE_LIB -I../../../../../mkspecs/linux-g++-64 -I. -I../../../../../include/QtCore -I../../../../../include/QtNetwork -I../../../../../include/QtGui -I../../../../../include -I../JavaScriptCore -I../../Source -I../ThirdParty -I../JavaScriptCore/assembler -I../JavaScriptCore/bytecode -I../JavaScriptCore/bytecompiler -I../JavaScriptCore/heap -I../JavaScriptCore/dfg -I../JavaScriptCore/debugger -I../JavaScriptCore/interpreter -I../JavaScriptCore/jit -I../JavaScriptCore/parser -I../JavaScriptCore/profiler -I../JavaScriptCore/runtime -I../JavaScriptCore/wtf -I../JavaScriptCore/wtf/gobject -I/home/ubuntu/wkhtmltopdf-qt/src/3rdparty/webkit/Source/JavaScriptCore/wtf/symbian -I../JavaScriptCore/wtf/unicode -I../JavaScriptCore/yarr -I../JavaScriptCore/API -I../JavaScriptCore/ForwardingHeaders -I../JavaScriptCore/generated -Ibridge/qt -Ipage/qt -Iplatform/graphics/qt -Iplatform/network/qt -Iplatform/qt -I../WebKit/qt/Api -I../WebKit/qt/WebCoreSupport -I. -Iaccessibility -Ibindings -Ibindings/generic -Ibridge -Icss -Idom -Idom/default -Iediting -Ifileapi -Ihistory -Ihtml -Ihtml/canvas -Ihtml/parser -Ihtml/shadow -Iinspector -Iloader -Iloader/appcache -Iloader/archive -Iloader/cache -Iloader/icon -Imathml -Inotifications -Ipage -Ipage/animation -Iplatform -Iplatform/animation -Iplatform/audio -Iplatform/graphics -Iplatform/graphics/filters -Iplatform/graphics/filters/arm -Iplatform/graphics/texmap -Iplatform/graphics/transforms -Iplatform/image-decoders -Iplatform/leveldb -Iplatform/mock -Iplatform/network -Iplatform/sql -Iplatform/text -Iplatform/text/transcoder -Iplugins -Irendering -Irendering/mathml -Irendering/style -Irendering/svg -Istorage -Isvg -Isvg/animation -Isvg/graphics -Isvg/graphics/filters -Isvg/properties -Itesting -Iwebaudio -Iwebsockets -I/home/ubuntu/wkhtmltopdf-qt/src/3rdparty/webkit/Source/WebCore/wml -Iworkers -Ixml -Ibridge/jsc -Ibindings/js -I/home/ubuntu/wkhtmltopdf-qt/src/3rdparty/webkit/Source/WebCore/bindings/js/specialization -Ibridge/c -Itesting/js -Igenerated -I../../Source -I../../include -I../include/QtWebKit -I../include -I../../../sqlite -I/usr/X11R6/include -I.moc/release-static -o .obj/release-static/AccessibilityRenderObject.o accessibility/AccessibilityRenderObject.cpp 
```

最后，失败的链接器命令行是这样的：

```
g++ -Wl,-rpath-link,/home/ubuntu/wkhtmltopdf-qt/lib -m64 -Wl,-O1 -Wl,-rpath,/home/ubuntu/wkhtmltopdf-qt/src/3rdparty/webkit/Source/lib -Wl,-rpa
th,/home/ubuntu/wkqt/lib -Wl,-rpath,/home/ubuntu/wkqt/lib -o tst_qwebframe .obj/release-static/tst_qwebframe.o .obj/release-static/qrc_tst_qweb
frame.o    -L/home/ubuntu/wkhtmltopdf-qt/lib -L/usr/X11R6/lib64 -L/home/ubuntu/wkhtmltopdf-qt/lib -lQtWebKit -L../../WebCore/release -L../../Ja
vaScriptCore/release -L/usr/X11R6/lib64 -Wl,--start-group -lwebcore -lQtWebKit -Wl,--end-group -ljscore -lQtTest -lQtGui -lXrender -lXext -lX11
 -lQtNetwork -lQtCore -lm -ldl -lrt -lpthread -lXrender -lXext -lX11 -lm 
```

所有引用上述析构函数的链接器错误都是：

```
/home/ubuntu/wkhtmltopdf-qt/lib/libwebcore.a(AccessibilityRenderObject.o): In function `WebCore::AccessibilityRenderObject::~AccessibilityRenderObject()':
AccessibilityRenderObject.cpp:(.text._ZN7WebCore25AccessibilityRenderObjectD2Ev+0x3): undefined reference to `vtable for WebCore::AccessibilityRenderObject'
/home/ubuntu/wkhtmltopdf-qt/lib/libwebcore.a(AccessibilityRenderObject.o): In function `WebCore::AccessibilityRenderObject::~AccessibilityRenderObject()':
AccessibilityRenderObject.cpp:(.text._ZN7WebCore25AccessibilityRenderObjectD0Ev+0x5): undefined reference to `WebCore::AccessibilityRenderObject::~AccessibilityRenderObject()' 
```

有许多可疑的链接器错误，例如：

```
/home/ubuntu/wkhtmltopdf-qt/lib/libwebcore.a(AccessibilityMenuList.o):(.data.rel.ro._ZTIN7WebCore21AccessibilityMenuListE[typeinfo for WebCore:
:AccessibilityMenuList]+0x10): undefined reference to `typeinfo for WebCore::AccessibilityRenderObject' 
```

但据我所见，所有虚函数都已正确声明和定义，并且所有源代码树中的 makefile 都没有提到**rtti**。

谁能向我解释发生了什么事？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T10:14:58.117

编译命令包括选项：（[在此处](http://gcc.gnu.org/onlinedocs/gcc-4.8.0/gcc/Optimize-Options.html#Optimize-Options)`-ffunction-sections -fdata-sections`记录）。将每个函数放在目标文件的自己的部分中，而不是简单地将它们全部放在一个部分中。同样，适用于全局/静态数据。`-ffunction-sections``.text``-fdata-sections`

这个想法是，通过指定`--gc-sections`（[未使用输入部分的垃圾收集](http://sourceware.org/binutils/docs/ld/Options.html)），链接器可以在将“无法访问”部分合并到`.text`二进制文件的最后部分之前丢弃它们。简而言之，在不为每个函数使用单独的编译单元的情况下减少代码大小。

这就是预感。无论如何，我都希望它可以在没有该`--gc-sections`选项的情况下工作。显然没有任何好处，因为没有任何东西被丢弃。为什么会失败？

当实现析构函数时，gcc、clang 等使用的 C++ ABI 通常会生成 3 个析构函数变体，以：`D0Ev`、`D1Ev`、`D2Ev`以及该类的数据`vtable`结尾。`typeinfo`我的猜测是这些单独的部分没有正确合并。这是一个错误，还是链接器（或链接规范）的限制，我不知道。

* * *

*这在构建共享*库时也是无用的，因为无法提前知道将使用哪些符号。编译器是用 调用的`-fPIC`，这应该没问题，因为对象只是被归档。然而，这些`-fvisibility`选项可能会使问题复杂化。

# jquery - 动态创建的复选框和标签

> ID：15606856
> 
> 赞同：1
> 
> 时间：2013-03-25T02:49:34.563
> 
> 标签：jquery, dom, appearance, on-the-fly

当我使用 jQuery“动态”创建一个复选框和一个标签时，它的功能很好（即：如果我单击标签，复选框被选中），但浏览器分配给的默认视觉外观标签与为非动态创建的标签分配的默认视觉外观不同。

```
[x] normal label
[x]label created on the fly 
```

区别在于标签和复选框之间有一个空格（边距）。

**关于这里发生的事情有什么想法吗？**

动态创建复选框/标签的代码如下：

```
 $('<input type="checkbox" id="foo"/><label for="foo">bar</label>') 
```

非即时创建复选框/标签的代码如下：

```
 <input type="checkbox" id="baz"/><label for="baz">quz</label> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T03:15:02.477

这就是发生的事情：http: [//jsfiddle.net/kSjJZ/](http://jsfiddle.net/kSjJZ/)

```
 <body>
     <ul id="bla">
         <li>
             <input type="checkbox" id="baz"/><label for="baz">quz</label>
         </li>
         <li>
             <input type="checkbox" id="foo"/>
             <label for="foo">quz</label>
         </li>
     </ul>
 </body> 
```

基本上，如果这两个标签（输入和标签）由 \r\n 分隔，则存在空格解释

# node.js - 如何在 Mac Os 中实时获取顶级命令输出

> ID：15606858
> 
> 赞同：4
> 
> 时间：2013-03-25T02:49:56.773
> 
> 标签：node.js, child-process

我想监控服务器并在网页上实时显示顶级命令输出。*在Mac OS*`error: initializing curses`上启动程序后出现错误。我不知道如何处理，我的问题是如何通过Node.JS实时获取顶级命令输出？

 *```
var spawn = require('child_process').spawn,
    com = spawn('/usr/bin/top', []); 
var io = require('socket.io').listen(5555);
  com.stdout.on('data', function(data){
    io.sockets.emit('get result', data);
  }
  );
com.stderr.on('data', function(data){
console.log('stderr: ' + data);
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T09:23:41.420

如果您`top`在命令窗口中运行，它会使用 curses 库更新屏幕上的数据。尝试在顶部使用批处理模式“-b”选项，看看是否允许节点将其输出通过管道传输到您的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-25T12:05:35.400

看起来 OSX 的`top`命令必须用`-l`flag 调用（其他 UNIX 使用`-b`）。有了那个标志，“curses”库就不再需要了（这个库为默认交互模式做了花哨的格式化），所以管道开始工作了。

这是开始的代码：

```
var top = spawn("top", ["-l 0"]);
top.stdout.pipe(process.stdout);
top.stderr.on("data", function(data) {
  console.log("ps stderr: " + data);
}); 
```*

# php - 在表单文本字段中加载选定的文件名

> ID：15606862
> 
> 赞同：0
> 
> 时间：2013-03-25T02:50:13.193
> 
> 标签：php, html, forms, file, include

我正在制作和更新数据库表格。我用 php 加载更新表单，呈现要从数据库更新的数据。表单字段之一是包含图像文件名的输入文本字段。
在这种形式中，我想选择一个新图像（），并在选择图像后，在输入文本字段中插入图像的选定文件名。

这是**CMS_formSchema_list.php**的一部分。它加载一个帖子列表，每个帖子都有一个更新按钮。单击按钮时，表单操作会通过自己发送 $_POST['update_ID']，并加载填充了 update_ID 数据的更新表单。

```
 if (isset($_POST['update_ID']) and $_POST['update_ID']==$row_ID){
   echo '<tr style="background-color:#DDD">';
   echo '<td colspan="9"><form action="" method="post">';
   $functionDisplay = 'Editar ID:'.$_POST['update_ID'];
   echo $functionDisplay.'<br>';
   if(!include 'CMS_formSchema_edit_inline.php'){
     echo "CMS_formSchema_edit_inline.php include error!!!!"; 
   }
   echo '</td>';
   echo '</tr>';
 } 
```

**我通过include 'CMS_formSchema_edit_inline.php'**执行更新表单的加载到 这一点，一切都很好，并且工作正常。我不知道为什么选择它后没有使用 $_FILES['fileup']['name'] 填充“Archivo”文本字段。我应该怎么做才能在文本字段中加载文件名？

```
 <form action="" method="post" enctype="multipart/form-data">
        <input type="file" name="fileup" style="width:450px;"/><br/>
        <input type="hidden" name="update_ID" value="<?php echo $_POST['update_ID'] ?>"/><br/>
        <p class="white caption">Año (YYYY):<br/><input  id="year" type="text" name="year" maxlength="4" size="40" value="<?php echo $post_AÑO ?>"/><br/>
        Sección:<br/><input  id="section" type="text" name="section" maxlength="30" size="40" value="<?php echo $post_SECCION ?>"/><br/>
        Categoría:<br/><input  id="category" type="text" name="category" maxlength="30" size="40" value="<?php echo $post_CATEGORIA ?>"/><br/>
        Cliente:<br/><textarea  id="client" name="client" maxlength="100" rows="3" cols="40"><?php echo $post_CLIENTE ?></textarea><br/>
        Descripción:<br/><textarea  id="description" name="description" maxlength="200" rows="5" cols="40"><?php echo $post_DESCRIPCION ?></textarea><br/>
        <?php echo "update_ID (edit) = ". $_POST['update_ID'];  ?>
        Archivo:<br/><input  id="files" type="text" name="files" value="
<?php 
 if (isset($_FILES['fileup'])){
    echo basename( $_FILES['fileup']['name']);
 } else {
    echo $post_ARCHIVO;
 }?>"/></p>
        <input type="submit" value="Guardar"/>
    </form> 
```

# scroll - SAP 经典输出报告重新分配标准工具栏按钮/向下滚动页面

> ID：15606863
> 
> 赞同：0
> 
> 时间：2013-03-25T02:50:20.557
> 
> 标签：scroll, reporting, sap

我有一个 SAP 经典输出报告，它可以有可变数量的页面，并且每个页面可以有可变数量的行。我希望能够一次向上或向下滚动一页。标准工具栏为此提供了一个按钮，但这不起作用，因为我没有指定页面有多少行 - 它只是向下滚动几行。使用

```
SCROLL LIST FORWARD 1 PAGES INDEX 0. 
```

虽然达到了要求的效果。有没有办法重新分配标准工具栏上的按钮，让它触发运行该代码的事件？或者实现类似的东西？

我在想我可以做类似的事情

```
AT USER-COMMAND.
    CASE sy-ucomm.
        WHEN 'pgdn'.
            SCROLL LIST FORWARD 1 PAGES INDEX 0.
     ENDCASE. 
```

但我还不能让它工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T15:17:35.390

我认为你必须创建一个 GUI 状态。像这样：

![图形界面状态](../Images/fecc2642f37d14a51d42102e31c8c673.png)

然后设置 GUI 状态并编写命令：

```
report  zscroll.

data lines type i.

start-of-selection.
set pf-status 'ZSCROLL_GUI'. " Set GUI status

while lines <= 100\. " Print sample data
  write / lines.
  add 1 to lines.
endwhile.

at user-command. " Your code here
    case sy-ucomm.
        when 'EXIT'.
          leave screen.
        when 'PGDN'.
          "Your code
        when 'PGUP'.
          "Your code
     endcase. 
```

结果是这样的：

![设置 GUI 状态并编写命令](../Images/551aec35086a67b80d2f6b67a5f1088e.png)

最后，您从菜单或工具栏中单击一个按钮，您将看到“AT USER-COMMAND”事件正在工作：

![调试](../Images/393e824dc2414a937d42477d68d9a20d.png)

希望能帮助到你

# javascript - Three.js：地图和属性未定义并在本地使用图像

> ID：15606866
> 
> 赞同：2
> 
> 时间：2013-03-25T02:50:37.497
> 
> 标签：javascript, three.js

我正在编写一个使用纹理的 WebGL - Three.js 应用程序，并且一直在使用[http://stemkoski.github.com/Three.js/](http://stemkoski.github.com/Three.js/)上的教程。当我尝试在本地运行页面时，出现以下错误。

```
Uncaught TypeError: Cannot read property 'map' of undefined Three.js:2728
Cross-origin image load denied by Cross-Origin Resource Sharing policy. index.html:1
Uncaught TypeError: Cannot read property 'attributes' of undefined Three.js:3600
Cross-origin image load denied by Cross-Origin Resource Sharing policy. index.html:1
Uncaught TypeError: Cannot read property 'attributes' of undefined Three.js:3600
Uncaught TypeError: Cannot read property 'attributes' of undefined Three.js:3600 
```

我知道跨域资源共享策略与在本地使用图像有关。但是，即使在使用目标打开的 Chrome 窗口中，它仍然会发生：

```
C:\Program Files (x86)\Google\Chrome\Application\chrome.exe" --allow-file-access-from-files 
```

我可以使用过时的开关吗？我所做的是通过快捷方式打开 Chrome 浏览器，然后查看地址历史记录以查找我的 index.html 文件的位置。

这是我编写的一些代码，以及我认为与手头的问题最相关的代码。

```
var materialArray = [];
materialArray.push( new THREE.MeshBasicMaterial( { map: THREE.ImageUtils.loadTexture( "img/skybox-xpos.png" ) } ) );
materialArray.push( new THREE.MeshBasicMaterial( { map: THREE.ImageUtils.loadTexture( "img/skybox-xneg.png" ) } ) );
materialArray.push( new THREE.MeshBasicMaterial( { map: THREE.ImageUtils.loadTexture( "img/skybox-ypos.png" ) } ) );
materialArray.push( new THREE.MeshBasicMaterial( { map: THREE.ImageUtils.loadTexture( "img/skybox-yneg.png" ) } ) );
materialArray.push( new THREE.MeshBasicMaterial( { map: THREE.ImageUtils.loadTexture( "img/skybox-zpos.png" ) } ) );
materialArray.push( new THREE.MeshBasicMaterial( { map: THREE.ImageUtils.loadTexture( "img/skybox-zneg.png" ) } ) );
for ( var i = 0; i < 6; i++ )
{
    materialArray[ i ].side = THREE.BackSide;
}
var skyboxMaterial = new THREE.MeshFaceMaterial( materialArray );
var skyboxGeom = new THREE.CubeGeometry( 5000, 5000, 5000, 1, 1, 1 );
ShapeShifter.skybox = new THREE.Mesh( skyboxGeom, skyboxMaterial );
ShapeShifter.scene.add( ShapeShifter.skybox ); 
```

我认为这个问题：[Problems with MeshFaceMaterial since revision 54（Update 2）](https://stackoverflow.com/questions/14075094/problems-with-meshfacematerial-since-revision-54-update-2)也可能与我面临的问题有关，但是，我不确定如何实现答案。对 THREE.GeometryUtils.setMaterialIndex 的调用会去哪里？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T20:41:26.457

`--allow-file-access-from-files`使用本地网络服务器的一个很好的替代方法是使用[Dropbox](http://www.dropbox.com)中的 Public 文件夹。

它消除了使用标志的安全问题以及在您想要查看页面时启动本地网络服务器的麻烦。

您可以在本地处理您的页面，一旦同步，您可以通过访问 Dropbox 自动为文件生成的公共链接来查看该页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-31T00:34:00.187

XAMPP 将解决您的问题。我已经用了5年多了，超级简单。

[https://www.apachefriends.org/index.html](https://www.apachefriends.org/index.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T09:48:20.040

`--allow-file-access-from-files`（和其他标志）只有在启动时没有打开任何其他选项卡/窗口时才会起作用。但是，这会使您的其余浏览体验不那么安全，因此在本地运行的真正解决方案是使用小型本地 Web 服务器来提供文件。[在three.js wiki](https://github.com/mrdoob/three.js/wiki/How-to-run-things-locally)甚至是[three.js 源代码](https://github.com/mrdoob/three.js/tree/master/utils/servers)中都有很多示例。

查看`THREE.CubeGeometry` [消息来源](https://github.com/mrdoob/three.js/blob/master/src/extras/geometries/CubeGeometry.js)，似乎已经为每个面设置了不同的材质索引。对于替代方法，[这是我的基于立方体贴图的 skybox 代码](https://github.com/tapio/darkcorners/blob/1034926ee0b6bc195f0f4356edfcbe319ba61caa/js/dungeon.js#L341)。

# javascript - Phonegap - onDeviceReady() 没有被解雇

> ID：15606870
> 
> 赞同：1
> 
> 时间：2013-03-25T02:51:19.007
> 
> 标签：javascript, cordova

请看一下并帮助我解决此问题。我头痛了2天。永远不会调用 onDeviceReady 函数。这是我的代码：

```
 <!DOCTYPE HTML>
<html>
    <head>
        <meta charset="UTF-8">
            <title>DemoSimpleControls</title>
            <meta name="viewport"
                content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=0">
                <link rel="shortcut icon" href="images/favicon.png">
                    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
                        <link href="jqueryMobile/jquery.mobile-1.3.0.css" rel="stylesheet">
                            <link rel="stylesheet" href="css/DemoSimpleControls.css">

                                <script src="jqueryMobile/jquery.mobile-1.3.0.js"></script>
                                <script src="../js/jquery-1.9.1.min.js"></script>
                                < script  type="text/javascript" charset="utf-8" src="../cordova-2.5.0.js"></script>
                                <script type="text/javascript" charset="utf-8">
                                    $(document).ready(function() {
                                                      // Handler for .ready() called.
                                                      document.addEventListener("deviceready", onDeviceReady, true);
                                                      });
                                    $(function() {
                                      document.addEventListener("deviceready", onDeviceReady, true);
                                      });
                                    function onDeviceReady(){
                                        alert("ready");
                                        $("#mysavedData").html("XYZ");
                                        $("#mysavedData").html(window.localStorage.getItem("data"));
                                    }

                                </script>
                                </head>

    <body id="content" onLoad="onLoad();" >
        <div data-role="page" id="page">
            <div data-role="header" >
                <a data-rel="back" href="#" >Back</a>
                <h1>My page</h1>

            </div>
            <div data-role="content" style="padding: 15px" data-theme="e">
                <div id="mysavedData">My data</div>

            </div>

        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T05:42:36.990

那件事太可怕了，而且有很多问题，不值得使用它。相反，只需通过检查`window.device`.

**演示：** [[[[![jsFiddle](../Images/827f57786617d886d70c0bce0ccca6b6.png)](http://jsfiddle.net/ThinkingStiff/Hg9bX/)]]]

### Javascript：

```
function initializePhoneGap( success, failure ) {
    var timer = window.setInterval( function () {
        if ( window.device ) {
            window.clearInterval( timer );
            success();
        };
    }, 100 );
    window.setTimeout( function () { //failsafe
        if ( !window.device ) { //phonegap failed
            window.clearInterval( timer );
            failure();
        };
    }, 5000 ); //5 seconds
};

window.onload = function () {
    initializePhoneGap( function success() {
        //start app
        document.getElementById( 'result' ).textContent = 'phonegap: success';
    }, function failure() {
        //phonegap failed 
        document.getElementById( 'result' ).textContent = 'phonegap: failure';
    } );

}; 
```

### HTML：

```
should fail on desktop after 5 seconds
<div id="result">phonegap:</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-08T14:29:17.870

这段代码对我有用

```
<body onload="init()"></body>

function init() {
    document.addEventListener("deviceready", onDeviceReady, false);
}
function onDeviceReady() {
    // Now safe to use the Cordova API
} 
```

快乐的编码......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-29T09:36:01.970

似乎您不知道要触发此事件，您还需要包含**`phonegap.js`**文件，
并且还像我一样使用它，以便首先加载您的视图，然后应用程序处理 phonegap 否则用户将不得不等待更多时间。

```
<html>
  <head>
  ....
  <title>Index file</title>
   </head>
 <body>
   ....

    <script type="text/javascript" src="phonegap.js"></script> //you forgot this
</body>
</html> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-25T05:22:46.907

请看以下来自 PhoneGap 网站的示例。将事件侦听器放入 onLoad() 并将其从 jQuery 就绪函数中删除。

```
<script type="text/javascript" charset="utf-8" src="cordova-2.5.0.js"></script>
<script type="text/javascript" charset="utf-8">

// Call onDeviceReady when Cordova is loaded.
//
// At this point, the document has loaded but cordova-2.5.0.js has not.
// When Cordova is loaded and talking with the native device,
// it will call the event `deviceready`.
//
function onLoad() {
    document.addEventListener("deviceready", onDeviceReady, false);
}

// Cordova is loaded and it is now safe to make calls Cordova methods
//
function onDeviceReady() {
    // Now safe to use the Cordova API
}

</script> 
```

说明：Cordova 由两个代码库组成：native 和 JavaScript。在加载本机代码时，会显示自定义加载图像。但是，只有在 DOM 加载后才会加载 JavaScript。这意味着您的 Web 应用程序可能会在加载之前调用 Cordova JavaScript 函数。

一旦 Cordova 完全加载，就会触发 Cordova deviceready 事件。设备启动后，您可以安全地调用 Cordova 函数。

通常，一旦 HTML 文档的 DOM 加载完毕，您将希望使用 document.addEventListener 附加一个事件侦听器。

# c# - 在博客文章详细信息上显示评论

> ID：15606874
> 
> 赞同：0
> 
> 时间：2013-03-25T02:52:01.357
> 
> 标签：c#, asp.net, asp.net-mvc

目前我有一个部分视图，显示来自与某个 blogid 关联的数据库的评论。我不能让它为我的生活工作。我什至不知道如何将 blogid 传递给部分，所以我提取了正确的评论。这是我到目前为止所拥有的。

/博客/详情评论部分

```
<h2>Comments</h2>
<hr/>
@if (!User.Identity.IsAuthenticated)
{
    <p>You Must Be Logged In To Comment.</p>
} 
else
{
    @: Posting comments as @User.Identity.Name<hr/>
    @Html.Action("Create", "Comment", new {blogId = Model.Id}); 
    @: <hr/>
}
@Html.Partial("_Comments") 
```

_评论部分视图

```
@model IEnumerable<GregG.Models.Comment>

@foreach (var item in Model) {
    if (item.BlogId == 1) //I need to make this dynamic but can't figure out how to pass the id
    {
        <small>Posted by: @Html.DisplayFor(modelItem => item.UserName) on:                    @Html.DisplayFor(modelItem => item.PostedDate)</small>
        @Html.DisplayFor(modelItem => item.Meat)<hr/>
    }
} 
```

我的第一个问题是：如何将我的博客 ID 传递给部分。我的第二个问题是为什么我的部分行会收到此错误。

> 传入字典的模型项的类型为“System.Data.Entity.DynamicProxies.Blog_18032B13AD6163845F0AE57E827683E3638FD813CA4EE066F28D05E5406E633D”，但此字典需要“System.Collections.Generic.IEnumerable`1[GregG.Models.Comment]”类型的模型项。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T02:56:58.990

[`Patial`](http://msdn.microsoft.com/en-us/library/ee402902%28v=vs.108%29.aspx)支持指定视图模型的方法有几个重载。如果您要显示的评论已经是您当前视图模型的一部分，请使用此选项。

```
@Html.Partial("_Comments", Model.Comments) 
```

但是，如果它们不是您的视图模型的一部分，我建议在您的和中创建一个单独的操作，`CommentController`如下所示：

```
Action List(int blogId)
{
    // query comments from database
    var model = db.Comments.Where(c => c.BlogId == blogId);
    return View(model);
} 
```

`/Blog/Details.cshtml`并像这样从您的文件中调用它：

```
@Html.Action("List", "Comment", new { blogId = Model.Id }) 
```

# android - Android ActionBar：如何在顶部垂直对齐视图

> ID：15606877
> 
> 赞同：1
> 
> 时间：2013-03-25T02:52:38.720
> 
> 标签：android, android-actionbar

我为我的操作栏设置了一个背景图像，它有一个木质纹理和一个底部透明的阴影，问题是我的操作栏内的视图在中间垂直对齐，所以它们看起来像是在操作栏“外面” . 我想知道是否有办法将这些视图放置在操作栏的顶部（我已经尝试更改重力和 paddingTop 但我仍然没有让它工作）。

这是我没有成功的尝试：

```
<style name="UniversiaTheme" parent="@android:style/Theme.Holo">
    <item name="android:actionBarStyle">@style/ActionBar</item>
    <item name="android:actionBarSize">68dp</item> 
    <item name="android:windowBackground">@drawable/background</item>
</style>

<style name="ActionBar" parent="@android:style/Widget.Holo.ActionBar">
    <item name="android:layout_gravity">top</item>
    <item name="android:gravity">top</item>
    <item name="android:background">@drawable/ab_background</item>
    <item name="android:titleTextStyle">@style/ActionBar.TitleTextStyle</item>
</style>

<style name="ActionBar.TitleTextStyle" parent="@android:style/TextAppearance.Holo.Widget.ActionBar.Title">
    <item name="android:textColor">@color/brown</item>
    <item name="android:textSize">@dimen/titleSize_default</item>
</style> 
```

这是我的操作栏的屏幕截图：

![在此处输入图像描述](../Images/456723dd8d385557fe0beae7ffc2d011.png)

**编辑：** 也许这张图片将有助于更好地解释这个问题。请注意背景图像具有透明度并且仅覆盖操作栏空间的一半。（这就是为什么我将操作栏内的视图放在顶部，而不是在操作栏的中间）

[![在此处输入图像描述](../Images/40b1f78cfd0c5f00938e54bdf43b1c26.png)](https://i.stack.imgur.com/d9n2R.png)

在此先感谢您，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T16:57:16.987

尝试在 ActionBar 样式中使用“android:layout_marginBottom”或“android:paddingBottom”的设置而不是重力。我正在玩一个示例项目，它看起来会起作用。10-20dp 之间的东西应该可以解决问题。

# c - c windows多线程文件锁

> ID：15606880
> 
> 赞同：0
> 
> 时间：2013-03-25T02:53:09.840
> 
> 标签：c, windows, multithreading, filelock

在 Windows 上，是否有任何简单的方法可以在多线程 C 代码中以独占方式（为我的软件读取和写入）锁定文件？我已经尝试过 LockFileEx，但它仅适用于进程之间，而不适用于线程（同一进程）。

注意：我的问题是我做了一个小文件服务器（多线程），当一个文件请求到来时，三分之一的“A”必须以独占方式访问请求的“file1.txt”，但如果另一个线程“ B”想要相同的“file1.txt”，它必须等待才能使用此文件。如果线程“A”使用 dwSharedMode 为“0”的 CreateFile() 来打开/创建“file1.txt”，确保只有它读取或打开此文件，如果线程“B”尝试打开“file1”，则会发生错误。文本”。现在线程“B”如何等待“file1.txt”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T02:57:29.850

`dwShareMode`您可以通过设置为`0`in `CreateFile()`function以独占模式打开文件。

在此处阅读更多信息：http: [//msdn.microsoft.com/en-us/library/windows/desktop/aa363874 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363874(v=vs.85).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T03:21:36.870

我将您的问题理解为以下问题：**如何为多线程组织对资源（文件）的访问（应该解决读者-作者问题）**。

如果您的**资源应该在同一进程内操作的线程之间共享**：
使用同步原语`critical_section`（它比系统对象同步原语更有效，但仅适用于同一进程内的线程）
**否则**使用`mutex`；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T03:01:19.830

[超薄读取器/写入器 (SRW) 锁](http://msdn.microsoft.com/en-us/library/windows/desktop/aa904937%28v=vs.85%29.aspx)

SRW 锁提供了两种线程可以访问共享资源的模式：

*   *共享模式*，授予对多个读取器线程的共享只读访问权限，使它们能够同时从共享资源中读取数据。如果读取操作超过写入操作，则与临界区相比，这种并发性会提高性能和吞吐量。

*   *独占模式*，一次授予对一个写入器线程的读/写访问权限。当以独占模式获得锁时，在写入者释放锁之前，没有其他线程可以访问共享资源。

# sass - 如何在 SASS 中使用媒体查询？

> ID：15606885
> 
> 赞同：1
> 
> 时间：2013-03-25T02:53:54.960
> 
> 标签：sass, media-queries

如何“打开媒体查询代码块”以便开始定义我的样式？

谷歌没有帮助（完全是关于 scss 而不是 SASS - 我不认为布局不一样）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T03:38:34.630

要查找 SASS 文档，而不是 SCSS，我会`SASS_REFERENCE`从 Sass gem 的旧（3.x 之前）版本中查看文件。

查看官方[Sass Github repo](https://github.com/nex3/sass)中 2.2.24 标记中的[`doc-src/SASS_REFERENCE`文件](https://github.com/nex3/sass/blob/2.2.24/doc-src/SASS_REFERENCE.md)，我找到了以下查询参考：`@media`

```
@media print
  #sidebar
    display: none

  #main
    background-color: white 
```

编译为：

```
@media print {
  #sidebar {
    display: none; }

  #main {
    background-color: white; } } 
```

[有关详细信息，请参阅参考文件](https://github.com/nex3/sass/blob/2.2.24/doc-src/SASS_REFERENCE.md)的其余部分。

# scala - 使用 Scalaz7 和 Json4s 时出现 Scala 编译器错误

> ID：15606890
> 
> 赞同：0
> 
> 时间：2013-03-25T02:54:20.323
> 
> 标签：scala, scalaz

将 Scala7-M9 和 json4s 3.0.1 与编译器版本 2.10.0 和 2.10.1 一起使用时，我遇到了编译器问题

在编译 JSON 解析代码的简短片段时，我收到以下编译器错误：

```
[error] JSON.scala:25: erroneous or inaccessible type
[error]                 JArray(children) <- json \ "children"
[error]                                          ^ 
```

从此代码：

```
import scalaz._                                                                 
import Scalaz._                                                                 

import org.json4s._                                                             
import org.json4s.native.JsonMethods._                                          

object JSON {                                                                   

    def main(args: Array[String]) = {                                           
        val json = parse("""                                                    
            {   "name": "joe",                                                  
                "children": [                                                   
                    {                                                           
                        "name": "Mary",                                         
                        "age": 5                                                
                    },                                                          
                    {                                                           
                        "name": "Mazy",                                         
                        "age": 3                                                
                    }]                                                          
            } """)                                                              

        val names = for {                                                       
                JArray(children) <- json \ "children"                           
                JObject(child) <- children                                      
                JField("name", JString(name)) <- child                          
             } yield(name)                                                       

        println("Names: " + names)                                              
     }                                                                           
 } 
```

将导入更改为：

```
 import scalaz.{Scalaz, \/}                                                                    
 import Scalaz.ToIdOps._ 
```

（在我的真实项目中，我只需要 / monad 进行一些验证）解决了这个问题。

只是想知道当我导入整个 scalaz 命名空间时是否有任何来自 Scalaz/编译器世界的人知道是什么导致了编译器错误，以及它是否是我需要归档的 BUG。

谢谢。

# click - 如何阅读 Window Spy re ControlClick

> ID：15606899
> 
> 赞同：1
> 
> 时间：2013-03-25T02:56:12.410
> 
> 标签：click

我希望 AHK 点击 WordPress 中的“发布”按钮。我认为我可以使用 ControlClick，但帮助说从 Window Spy 获取信息。无论光标是否在按钮上，Window Spy 都会给我相同的 NN 类。我无法发布屏幕截图，但它说：

> > > > > > > > > （现在在鼠标光标下）<<<<<<<<

ClassNN：Chrome_RenderWidgetHostHWND2 文本：颜色：0xA2&223

（颜色确实是蓝绿色）。

谢谢。

# php - 使用 POST 的 codeigniter 多阶段表单并使后退按钮工作

> ID：15606902
> 
> 赞同：1
> 
> 时间：2013-03-25T02:56:29.890
> 
> 标签：php, forms, codeigniter, browser-cache, back

我有使用 POST 从一页转到下一页的 codeigniter 表单。每个阶段都使用用户提交数据。我读到：

[https://stackoverflow.com/a/13559805/1021360](https://stackoverflow.com/a/13559805/1021360)

我需要使用 get-post-get 方法 (GPG) 以允许后退按钮工作。

我在正在跟踪的会话变量中有很多数据，会话设置为仅在您返回主页或 1 小时后过期，因此后退按钮应该可以使用。这也是存储所有核心数据的地方。（POST 并不是那么相关，因为后台页面可以从会话中全部读回，假设我知道如何使后退按钮缓存这样做）。

当前后退按钮会导致：“此文档不再可用。” 错误页面。

我的视图有一个表单，其中调用了一个名为“/nextquestion”的函数。

此函数执行表单验证，将表单值存储到 CI_session，然后在表单通过验证检查时呈现下一页。

我不确定如何将它传递给第三个“文件”（因为 codeigniter 使用函数调用，而不是 php 文件）然后从中读取它......？

我想要实现的是后退按钮按预期工作：它应该向您显示上一页，它的呈现方式。

任何有关如何使浏览器缓存与 codeigniter 的表单提交工作良好的提示或帮助都将受到欢迎！

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T04:44:24.130

我通常这样做的方式是将表单提交到同一页面，然后我检查 $_POST 数组是否存在。如果它不存在，那么我假设该页面尚未提交并检查会话中可能存在的任何数据。

代码如下所示：

```
// Check if we have any post data (form was submitted or not)
if(count($_POST) > 0) {

    // Save post array to the session
    $this->session->set_userdata('post_data', $_POST );

    // Redirect to the same page (REMOVES POST FROM HTTP HEADERS)
    redirect('/form/page1','location');

} else {

    // There is no $_POST array, but we have the POST data in session 
    // I.E. RETURNING TO FORM VIA BACK BUTTON
    if($this->session->userdata('post_data')) {

        // Set POST array from session data
        $_POST = $this->session->userdata('post_data');

        // Clear the session
        $this->session->unset_userdata('post_data');
    }
}

// Your other code, validation rules, etc, etc

// VALIDATION FAILS - Validation fails
if ($this->form_validation->run() == FALSE) {

    // Load view
}

// VALIDATION SUCCEEDS - Proceed to confirmation  
else {
    redirect('/form/page2', 'location', 303);
} 
```

假设提交的数据通过了你的验证规则，上面的一般流程是：

*   用户浏览`/form/page1`、填写并提交表格。
*   表单被 POSTED 到自身，$_POST 数组被保存到会话中
*   然后用户被重定向到同一页面，`/form/page1`在该页面上 $_POST 数组为空，并且 POST 标头已从 HTTP 请求中删除。
*   然后从会话数据中恢复 $_POST 数组，并且表单重定向到`/form/page2`. 用户不会注意到这一步。
*   现在，如果用户按下后退按钮。不会有错误，因为前一页在技术上没有发布到/从它发布的数据。

# c# - C# 结合 Find()

> ID：15606904
> 
> 赞同：0
> 
> 时间：2013-03-25T02:56:31.043
> 
> 标签：c#, linq, find

是否可以执行以下操作？

```
Interaction interaction=interactions.Find(i=>i.day==action.day,i=>i.scene==action.scene); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T02:57:46.100

我认为您正在寻找的是：

```
IEnumerable<Interaction> matchingInteractions = interactions.Where(
    i => (i.day==action.day && i.scene == action.scene)
); 
```

这使用了 LINQ [`Where`](http://msdn.microsoft.com/en-us/library/bb534803.aspx)，它返回另一个`IEnumerable`仅与谓词函数匹配的项目。

或者，有[`First`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.first.aspx)，它返回与谓词匹配的第一个项目。

```
Interaction firstInteraction = interactions.First(
    i => (i.day==action.day && i.scene == action.scene)
); 
```

最后，如果您确定只存在一个匹配项，则存在[`Single`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.single.aspx).

# arrays - 如何检查 AS3 2D 数组中的匹配对象？

> ID：15606908
> 
> 赞同：0
> 
> 时间：2013-03-25T02:57:08.987
> 
> 标签：arrays, actionscript-3, actionscript

我正在使用 Actionscript 3“人造”2D 数组在游戏中存储图块，并且我希望让我的玩家仅移动到有效图块。数组像“array[x][y]”一样构建，并且我有适当的值，知道数组值和玩家移动值。我知道 indexOf 适用于常规数组，但我如何检查二维数组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T03:21:46.933

如果您的数组实例是`myArray`，则可以使用 for 循环，如下所示：

```
private function search(element:Object):Point
{
    for (var columIndex:int = 0; columIndex < myArray.length; i++)
    {
        var rowIndex:int = myArray[columIndex].indexOf(element);
        if (rowIndex != -1)
        {
            return new Point(columIndex, rowIndex);
        }
    }
    return null;
} 
```

类`Point`将是这样的：

```
package
{
    public class Point
    {
        public var x:int;
        public var y:int;

        public function Point(x:int, y:int)
        {
            this.x = x;
            this.y = y;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T04:00:25.497

为了`indexOf()`在 2D 数组上运行，您应该遍历嵌套数组，返回 2D 坐标（`flash.geom.Point`用于此，或您为此定制的任何其他类）。但是，如果您通过在数组中查询该位置来检查玩家是否移动到有效位置并检查其有效性，您会做得更好。

```
function isValid(player:Player,playerWantsToMoveTo:Point):Boolean {...} 
```

# javascript - 如何使用 Jquery 将表用作数据源

> ID：15606910
> 
> 赞同：-1
> 
> 时间：2013-03-25T02:57:28.847
> 
> 标签：javascript, jquery, arrays, datasource

我想我会与其他用户分享这个，因为它似乎没有被覆盖，但可能会帮助一些处理表格和数据的人。此外，任何关于更好代码的建议将不胜感激。我试图使它尽可能简单和流线型。经过数小时试图找到一个超级简单的解决方案来使用表中的 td 作为数据源后，我编写了这段代码。DataTables 只是没有削减它，因为体积太大。我需要一些超级高效的东西，让我可以使用来自我选择的任何表和任何列的数据，并且我知道我想要的特定 td/列。这本质上应该允许您使用任何具有特定列的表来直接提取数据并将其填充到数组中。然后您可以在全球范围内使用它。

我希望这可以帮助任何希望将表用作真正的数据源的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T02:57:28.847

```
var thisismyarray = []

$( "table tr td:nth-child(2)" ).each(function( index ) {
var thecolumnIwant = $(this).text();
thisismyarray.push(thecolumnIwant);
console.log(thecolumnIwant);

});

console.log("this is the array stuff:"+thisismyarray.toString())   ; 
```

# c - 通过 C 中的引用正确地将 char 数组和 char 指针传递给函数

> ID：15606919
> 
> 赞同：4
> 
> 时间：2013-03-25T02:58:15.437
> 
> 标签：c, arrays, pointers, c-strings

是否有正确的方法来调用 char 数组和 char 指针以转到函数，但它是通过引用传递的，它也将被操纵？

像这样的东西：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

void manipulateStrings(char *string1, char *string2[])
{

    strcpy (string1, "Apple");
    strcpy (string2, "Banana");

    printf ("2 string1: %s", string1);
    printf ("2 string2: %s", &string2);

}

int main ()
{
    char *stringA;
    char stringB[1024];

    stringA = (char *) malloc ( 1024 + 1 );

    strcpy (stringA, "Alpha");
    strcpy (stringB, "Bravo");
    printf ("1 stringA: %s", stringA);
    printf ("1 stringB: %s", stringB);

    manipulateStrings(stringA, stringB);

    printf ("3 stringA: %s", stringA);
    printf ("3 stringB: %s", stringB);

    return 0;
} 
```

我不确定我是否正确理解如何将这些变量传递给函数并更改那些碰巧是 char / strings 的变量的值

编辑：我的问题是 - 你将如何更改函数中两个字符串的值？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-25T03:03:35.607

C 中没有通过引用传递这样的东西。C 中的所有内容都是按值传递的。这会导致您需要的解决方案；添加另一个间接级别。

但是，您的代码还有其他问题。您不需要传递指向指针（或指向数组的指针）的指针，因为您没有改变*input*，只有它所指的内容。你想复制一个字符串。伟大的。为此，您需要一个指向 char 的指针，该指针已初始化以指向足够的内存量。

将来，如果您需要改变输入（即，为其分配*新*值），则使用指向指针的指针。

```
int mutate(char **input) 
{
    assert(input);
    *input = malloc(some_size);
}

int main(void)
{
    /* p is an uninitialized pointer */
    char *p;
    mutate(&p);
    /* p now points to a valid chunk of memory */
    free(p);
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T03:05:43.960

您目前正在做：

`manipulateStrings(stringA, stringB);`

并从内部打印`manipulateStrings`。相反，为了验证您是否正确执行此操作，我会这样做：

```
manipulateStrings(stringA, stringB);
printf ("2 string1: %s", string1);
printf ("2 string2: %s", &string2); 
```

而不是从该功能内打印。这样，您可以测试变量是按值复制还是按引用复制。

# c++ - 在c ++中将任意长度的数字从十进制转换为十六进制

> ID：15606921
> 
> 赞同：2
> 
> 时间：2013-03-25T02:58:25.187
> 
> 标签：c++, string, algorithm, hex, decimal

我已经看到了几个将数字从十进制转换为十六进制（或以 10 为底为 16）的示例，但我对我正在尝试做的事情有一些限制。我需要能够将带有十进制数字的字符串转换为另一个字符串作为十六进制数字。该数字可能太大而无法容纳在任何原始数据类型中 - 即：不能使用整数、无符号整数、双精度数等...

这应该能够执行与此页面上列出的相同的计算。[http://www.kaagaard.dk/service/convert.htm](http://www.kaagaard.dk/service/convert.htm)

我试过这个，但它对我没有用。

对函数的调用：

```
const int maxLen = 256;
char destination[maxLen];
int retVal = convertBase(destination, maxLen, "123487032174829820348320429437483266812812"); 
```

函数定义：

```
int convertBase(char* dest, int maxDestLength, const char* inputInBase10)
{
    const char lookUpTable[] = { "0123456789abcdef" };
    const std::string input = inputInBase10;
    const unsigned int inputSize = input.length();

    std::string output;
    output.reserve(2 * inputSize);

    for(unsigned int i = 0; i < inputSize; ++i)
    {
        const unsigned char c = input[i];
        output.push_back(lookUpTable[c >> 4]);  
        output.push_back(lookUpTable[c & 15]);
    }

    if(output.length() < maxDestLength)
        strcpy_s(dest, output.length(), output.c_str());
    else
        strcpy_s(dest, maxDestLength, output.c_str());

    cout << dest << endl;

    return strlen(dest);
} 
```

预期的十六进制数：“16ae5514d07e120126dfbcb3073fddb2b8c”

生成的实际十六进制数：“313233343837303332313734383239383230333438333230343239343337343833323636383132383132”

另外，当传递回 char* 时，我不断收到一个错误，即缓冲区太小（在下面重复）

```
 if(output.length() < maxDestLength)
        strcpy_s(dest, output.length(), output.c_str());
    else
        strcpy_s(dest, maxDestLength, output.c_str()); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T04:22:09.743

所以如果你急于得到*任何东西*，并且不太关心效率，试试这个。我已经修改了我为以下 SO 问题编写的函数：[c++ string (int) + string (int)](https://stackoverflow.com/questions/15375366/c-string-int-string-int/15375420#15375420)

首先，我修改了`Add`函数以适用于 2 到 36 之间的任何基数：

```
const int MIN_BASE = 2;
const int MAX_BASE = 36;

static bool tablesInitialised = false;
static char tblIntToChar[MAX_BASE] = {0};
static int tblCharToInt[256] = {0};

void InitTables()
{
    if( tablesInitialised ) return;

    for( int i = 0; i < 10; i++ ) {
        tblIntToChar[i] = '0' + i;
        tblCharToInt[tblIntToChar[i]] = i;
    }

    for( int i = 0; i < 26; i++ ) {
        tblIntToChar[i+10] = 'a' + i;
        tblCharToInt['a' + i] = i + 10;
        tblCharToInt['A' + i] = i + 10;
    }

    tablesInitialised = true;
}

// Adds two numbers using long addition.
string Add( const string& a, const string& b, int base=10 )
{
    InitTables();
    if( base > MAX_BASE || base < MIN_BASE ) return "";

    // Reserve storage for the result.
    string result;
    result.reserve( 1 + std::max(a.size(), b.size()) );

    // Column positions and carry flag.
    int apos = a.size();
    int bpos = b.size();
    int carry = 0;

    // Do long arithmetic.
    while( carry > 0 || apos > 0 || bpos > 0 )
    {
        if( apos > 0 ) carry += tblCharToInt[(unsigned char)a[--apos]];
        if( bpos > 0 ) carry += tblCharToInt[(unsigned char)b[--bpos]];
        result.push_back(tblIntToChar[carry%base]);
        carry /= base;
    }

    // The result string is backwards.  Reverse and return it.
    reverse( result.begin(), result.end() );
    return result;
}

// Converts a single value to some base, intended for single-digit conversions.
string AsBase( int number, int base )
{
    InitTables();
    if( number <= 0 ) return "0";
    string result;
    while( number > 0 ) {
        result += tblIntToChar[number%base];
        number /= base;
    }
    reverse( result.begin(), result.end() );
    return result;
} 
```

并且，使用上述所有内容，这是一个从一个任意基数转换为另一个基数的函数：

```
// Converts a number from one base to another.
string ConvertBase( const string & number, int oldBase, int newBase )
{
    InitTables();
    string result;

    for( unsigned digit = 0; digit < number.size(); digit++ )
    {
        int value = tblCharToInt[(unsigned char)number[digit]];
        if( result.empty() )
        {
            result = AsBase( value, newBase );
        }
        else 
        {
            string temp = result;
            for( int i = 1; i < oldBase; i++ ) {
                temp = Add( result, temp, newBase );
            }
            result = Add( temp, AsBase(value, newBase), newBase );
        }
    }

    return result;
} 
```

这只是我使用我的 StackOverflow 'for fun' 沙箱中的代码破解的东西。它执行`oldBase`加法而不是仅执行一次乘法的方式非常笨拙。`Multiply`如果你创建一个函数来做长乘法，这会好很多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T03:16:23.737

您无法通过单独检查每个字符来解决问题。原因是在决定需要使用哪个十六进制数字时需要考虑两个字符。

例如，“12”将正确表示为“C”，而您的算法不会考虑到这一点。

你也应该从右到左而不是从左到右阅读

# cakephp - Cakephp保存数据，检查是否属于authed用户

> ID：15606923
> 
> 赞同：0
> 
> 时间：2013-03-25T02:58:32.260
> 
> 标签：cakephp, authentication, cakephp-2.0, cakephp-model

这是它的样子：

网址：/Category/Edit/(category.id)

控制器：

从类别加载信息并将其放入编辑表单 - >提交表单然后你有：

$this->Category->id=$id;

$this->Category->save($this->request->data);

因为它从 url 获取 id，所以它可以很容易地更改为属于另一个用户的 id 我如何确保它是否执行检查该类别是否属于经过身份验证的用户。

已建立关联，用户->类别（一对多）

但是在写这篇文章的时候，我可能发现了一些东西，我可以在模型中使用 beforeSave 如果你知道如何更好地做到这一点，请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T03:13:59.067

一些东西：

1.  id 应该在 POSTed 数据中，而不是在提交的 URL 中
2.  使用安全组件来帮助防止表单被篡改
3.  您的 URL 示例应该是 '/categories/edit/(category.id)'
4.  在你的模型中构建一个方法，而不是仅仅使用`save()`Controller 中的默认值。在您的方法中，您可以检查以确保类别的所有者（基于`user_id`字段）与登录`Auth`用户的所有者匹配。

# c# - C# DateTime 更改为另一种格式

> ID：15606925
> 
> 赞同：0
> 
> 时间：2013-03-25T02:59:17.433
> 
> 标签：c#, .net, oracle, datetime, timestamp

先生/女士，

我将执行 Oracle 批量插入，但绑定参数 Papameters 无效：System.dateTime 在这里发出警告。

Created Date 的字段是 timestamp(0)，其中 22-MAR-13 08.13.27.000000000 PM 是唯一可接受的格式。

但是当我尝试从字符串转换为 DateTime 时，如下所示：

2013 年 3 月 22 日晚上 8:00:00

使用以下方法：

```
 item.CreatedDate = Convert.ToDateTime("19-MAR-13 08.13.27 PM"); 
```

// 下面是 ORACLE 大容量插入

```
 using (OracleConnection myConnection = new OracleConnection(myConnectionString))
        {
            myConnection.Open();
            using (var copy = new OracleBulkCopy(myConnection))
            {
                copy.DestinationTableName = "T_BQ";
                copy.BulkCopyTimeout = 10;
                copy.BatchSize = 1000;
                var query = from item in list select item;
                var dt = new System.Data.DataTable();
                dt = ConvertToDataTable(query);
                copy.WriteToServer(dt);
                copy.Dispose();
                copy.Close();
            }
            myConnection.Dispose();
            myConnection.Close();
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T07:11:52.223

您可以将 [DateTime.TryParseExact](http://msdn.microsoft.com/en-IN/library/system.datetime.tryparseexact.aspx)用于自定义`datetime`格式：

```
 string strDateStarted = "19-MAR-13 08.13.27 AM";
 DateTime datDateStarted;
 DateTime.TryParseExact(strDateStarted, new string[] { "dd-MMM-yy hh.mm.ss tt" }, System.Globalization.CultureInfo.InvariantCulture, System.Globalization.DateTimeStyles.None, out datDateStarted);
 Console.WriteLine(datDateStarted); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T03:06:03.650

您应该使用`:`for 时间分隔符`.`

尝试这个：

```
item.CreatedDate = Convert.ToDateTime("19-MAR-13 08:13:27 PM"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-25T03:19:14.720

尝试这个，

```
dateVariable.ToString("MM/dd/yyyy hh:mm:sstt"); 
```

# wcf-data-services - 我可以在不引用服务元数据的情况下使用 WCF 数据服务客户端使用 JSON 灯光格式吗？

> ID：15606934
> 
> 赞同：2
> 
> 时间：2013-03-25T03:01:14.657
> 
> 标签：wcf-data-services, odata

我有一个正在使用 WCF 数据服务 OData 服务的客户端应用程序（两者都是 v5.3.0）。我希望客户端应用程序使用 JSON 与服务进行通信，而不是使用默认的 Atom Pub XML。

如果不提供 IEdmModel 实例，这可能吗？使用 Atom 格式时可以这样做：

```
 var ctx = new DataServiceContext(_oDataSvcUri, DataServiceProtocolVersion.V3)
        {
            IgnoreMissingProperties = true
        };

        // this isn't explicitly needed, as it uses Atom by default
        ctx.Format.UseAtom();

        return ctx; 
```

而要使用 JSON，这是需要的示例：

```
 var ctx = new DataServiceContext(_oDataSvcUri, DataServiceProtocolVersion.V3)
            {
                IgnoreMissingProperties = true
            };

        const string svcMetadata = "*insert contents of http://example.com/YourData.svc/$metadata here*";

        var xmlReader = XmlReader.Create(new StringReader(svcMetadata));

        IEdmModel edmModel = EdmxReader.Parse(xmlReader);

        ctx.Format.UseJson(edmModel);

        ctx.ResolveName = type => type.FullName;
        ctx.ResolveType = typeName => Type.GetType(typeName + ", " + "MyDomainModelAssemblyName");

        return ctx; 
```

我希望能够在不指定 IEdmModel 的情况下使用 JSON 格式，就像使用 Atom 一样。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T06:14:42.083

如果没有服务器模型客户端，则无法使用 WCF 数据服务客户端读取 JSON Light 有效负载。JSON Light 有效负载干净且小巧，正是因为它们假定客户端了解服务器模型，并且可以计算使用该模型遗漏的所有额外元数据。

但是，您不一定必须自己使用 EdmxReader 来解析服务器的 $metadata 文档。如果您在 Visual Studio 中使用“添加服务引用”生成客户端类，并且使用派生的 DataServiceContext 类（而不是直接使用 DataServiceContext），则生成的派生类已经设置了一些配置，让您`ctx.Format.UseJson()`无需显式提供模型。

# python - 如何让 numpy.einsum 与 sympy 配合得很好？

> ID：15606937
> 
> 赞同：12
> 
> 时间：2013-03-25T03:01:29.503
> 
> 标签：python, numpy, nested, sympy

好的，所以我有几个 sympy 对象（表达式）的多维 numpy 数组。例如：

```
A = array([[1.0*cos(z0)**2 + 1.0, 1.0*cos(z0)],
          [1.0*cos(z0), 1.00000000000000]], dtype=object) 
```

等等。

我想做的是使用 einsum 将这些数组中的几个相乘，因为我已经从我之前做的数值计算中获得了它的语法。问题是，当我尝试做类似的事情时

```
einsum('ik,jkim,j', A, B, C) 
```

我收到一个类型错误：

```
TypeError: invalid data type for einsum 
```

当然，所以在谷歌上的快速搜索显示我 einsum 可能无法做到这一点，但没有理由说明原因。特别是，在这些数组上调用 numpy.dot() 和 numpy.tensordot() 函数就像一个魅力。我*可以*使用 tensordot 来做我需要的事情，但是当我想到必须用嵌套的 tensordot 调用替换 50 个左右的 Einsten 求和（如上面的那个（其中 indeces 的顺序非常重要））时，我的大脑很痛。更可怕的是不得不调试该代码并寻找那个放错位置的索引交换。

长话短说，有谁知道为什么 tensordot 可以处理对象但 einsum 不能？对解决方法有什么建议吗？如果没有，关于我将如何编写自己的包装器来嵌套 tensordot 调用的任何建议，这有点类似于 einsum 表示法（数字而不是字母很好）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T11:38:57.110

Einsum 基本上取代了 tensordot（不是 dot，因为 dot 通常使用优化的线性代数包），在代码方面它完全不同。

这是一个对象 einsum，它未经测试（对于更复杂的事情），但我认为它应该可以工作......在 C 中做同样的事情可能更简单，因为你可以从真正的 einsum 函数中窃取除循环本身之外的所有内容。因此，如果您愿意，请实施它并让更多人开心...

[https://gist.github.com/seberg/5236560](https://gist.github.com/seberg/5236560)

我不会保证任何事情，尤其是对于更奇怪的极端情况。当然，您也可以将 einsum 表示法转换为 tensordot 表示法，我敢肯定，这可能会更快一些，因为循环最终大部分都在 C 中......

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2021-02-28T13:55:00.233

有趣的是，添加`optimize="optimal"`对我有用

`einsum('ik,jkim,j', A, B, C)`产生错误，但是

`einsum('ik,jkim,j', A, B, C, optimize="optimal")`与 sympy 完美配合。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-25T16:26:59.807

这是一个更简单的实现，它将`einsum`in 多个`tensordot`s 分开。

```
def einsum(string, *args):
    index_groups = map(list, string.split(','))
    assert len(index_groups) == len(args)
    tensor_indices_tuples = zip(index_groups, args)
    return reduce(einsum_for_two, tensor_indices_tuples)[1]

def einsum_for_two(tensor_indices1, tensor_indices2):
    string1, tensor1 = tensor_indices1
    string2, tensor2 = tensor_indices2
    sum_over_indices = set(string1).intersection(set(string2))
    new_string = string1 + string2
    axes = ([], [])
    for i in sum_over_indices:
        new_string.remove(i)
        new_string.remove(i)
        axes[0].append(string1.index(i))
        axes[1].append(string2.index(i))
    return new_string, np.tensordot(tensor1, tensor2, axes) 
```

首先，它将`einsum`（索引，张量）元组中的参数分开。然后它减少列表如下：

*   获取前两个元组，并对`einsum_for_two`它们进行简单计算。它还打印出新的索引签名。
*   的值`einsum_for_two`与列表中的下一个元组一起用作 的新参数`einsum_for_two`。
*   继续直到只剩下元组。索引签名被丢弃，只返回张量。

它可能很慢（但无论如何你正在使用`object` `dtype`）。它不会对输入进行很多正确性检查。

正如@seberg 所指出的，我的代码不适用于张量的痕迹。

# ios - 如何将@NO 和@YES 与优雅进行比较并且没有误报/否定的风险？

> ID：15606938
> 
> 赞同：9
> 
> 时间：2013-03-25T03:01:30.713
> 
> 标签：ios, objective-c, comparison, boolean

我想使用 bool 文字，如

```
if (condition == @NO) {

}
else if (condition == @YES) {

{ 
```

当我尝试这个时，XCode 希望我使用 NSNumber 方法进行比较，比如 isEqualTo。有没有更简单的方法来做到这一点（没有 isEqualTo）？如果不能，我应该使用 isEqualTo、isEqualToValue 还是 isEqualToNumber？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-25T03:30:22.010

是什么`condition`？它是一个`BOOL`还是一个`NSNumber`？

* * *

如果`condition`是 a `BOOL`，那么您不想使用`@NO`或根本不想使用`@YES`。你想说

```
if (condition) // test if condition is true

if (!condition) // test if condition is false

if (condition == NO) // same as previous, based on personal preference 
```

请注意，你永远不应该说

```
if (condition == YES) 
```

因为`BOOL`实际上并不局限于`0`and`1`作为值，它可以在 中保存任何东西`char`，所以如果`condition`不小心持有，比如说，`3`，那么`if (condition)`和`if (condition == YES)`会表现不同。

* * *

如果`condition`是`NSNumber`，那么您仍然不想使用`@NO`and `@YES`。您只想将其转换为`BOOL`using `-boolValue`，如

```
if ([condition boolValue]) // test if condition is true

if (![condition boolValue]) // test if condition is false

if ([condition boolValue] == NO) // same as previous, based on personal preference 
```

* * *

这里的基本要点是，不要使用`@NO`和`@YES`文字进行比较。这是没有意义的，也不优雅，因为你能用它们做的就是将它们转换回`BOOL`s。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-25T03:06:37.617

假设数据类型`condition`是`BOOL`，那么你想要：

```
if (condition) {
    // true (YES)
} else {
    // false (NO)
} 
```

如果条件是`NSNumber`然后使用：

```
if ([condition boolValue]) {
    // true (YES)
} else {
    // false (NO)
} 
```

如果`condition`基于一些任意数字，则`0`视为`NO`并将非零视为`YES`。

同样，如果`condition`是`NSNumber`那么做：

```
if ([condition intValue]) {
    // non-zero - true (YES)
} else {
    // zero - false (NO)
} 
```

**更新**：基于 OP 的以下评论：

> Condition 是一个布尔值，例如 if (myView.frame.size.height == 30)

这意味着实际问题想要进行以下检查：

```
if ((myView.frame.size.height == 30) == YES) 
```

这是非常不寻常的。正确的做法是：

```
if (myView.frame.size.height == 30) {
    // true - height is 30
} else {
    // false - height is not 30
} 
```

无需担心误报或误报。条件要么为真，要么不为真。没有第三种可能。如果条件给出错误的结果，则解决方案是修复条件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-08-13T21:42:16.937

您可以将@NO 保存在字典中，因为@NO 是一个对象。您不能将 NO 保存在字典中。所以在需要时使用@NO.boolValue。例如：

```
NSDictionary *userSetting = (NSDictionary *)[[NSUserDefaults standardUserDefaults] objectForKey:@"user"];
//Suppose you have done: userSetting[@"canWriteCode"] = @YES;
if ([userSetting[@"canWriteCode"] boolValue])
    [self helloProgrammer]; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-25T03:07:56.727

是`condition`一个`NSNumber`？如果是这样，只需使用：

```
if(condition.integerValue) {
    //condition is YES
} else {
    //condition is NO
} 
```

顺便说一句，值为 0 表示 NO，任何其他值为 YES；

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-03-25T03:06:57.020

您可以使用`@YES.boolValue`和`@NO.boolValue`。

因此，要与 bool 文字进行比较，您可以编写类似的内容（鉴于事实`condition`是`BOOL`）

```
if (condition == @NO.boolValue) {
  // Do something
} 
```

# azure - Monotouch 和 Azure 移动服务

> ID：15606943
> 
> 赞同：0
> 
> 时间：2013-03-25T03:02:15.867
> 
> 标签：azure, xamarin.ios, azure-mobile-services

我看过[github 项目](https://github.com/xamarin/azure-mobile-services/tree/master/sdk/xamarin/ios)，但我有点迷茫。我试图编译解决方案但出现错误，似乎有很多文件丢失了。究竟应该添加哪些文件/项目以使 azure 移动服务与新项目一起使用？

另外，鉴于移动服务的新[变化](http://www.johanlaanstra.nl/?p=217)，上述方法是否可行？是否可以在 monotouch 中使用便携式库？

请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-25T15:34:48.863

尝试从 Xamarin Studio（或 Visual Studio，如果你有 Xamarin Business 订阅或更高版本）中将[Azure 移动服务组件添加到你的项目。](https://components.xamarin.com/view/azure-mobile-services/)此组件包括使用 Xamarin.iOS 项目中的 AMS 所需的一切，并将使用必要的引用自动配置你的项目。

# git - 如何让 git 显示正在跟踪的文件列表？

> ID：15606955
> 
> 赞同：663
> 
> 时间：2013-03-25T03:04:06.263
> 
> 标签：git

使用命令行 git，如何让 git 显示存储库中正在跟踪的文件的列表？

* * *

## 回答 #1

> 赞同：783
> 
> 时间：2013-03-25T03:09:47.250

如果要列出当前在分支下跟踪的所有文件`master`，可以使用以下命令：

```
git ls-tree -r master --name-only 
```

如果您想要一个曾经存在的文件列表（即包括已删除的文件）：

```
git log --pretty=format: --name-only --diff-filter=A | sort - | sed '/^$/d' 
```

* * *

## 回答 #2

> 赞同：231
> 
> 时间：2013-03-25T03:09:57.593

git 管理的文件以`git ls-files`. 查看其手册页。

* * *

## 回答 #3

> 赞同：44
> 
> 时间：2019-03-09T20:16:18.387

接受的答案仅显示当前目录树中的文件。要显示*所有*已提交的跟踪文件（在当前分支上），请使用

```
git ls-tree --full-tree --name-only -r HEAD 
```

*   `--full-tree`使命令像在 repo 的根目录中一样运行。
*   `-r`递归到子目录。结合`--full-tree`，这将为您提供所有已提交、已跟踪的文件。
*   `--name-only`当您只需要文件路径时删除 SHA / 权限信息。
*   `HEAD`指定要跟踪的已提交文件列表的分支。您可以将其更改为`master`或任何其他分支名称，但这`HEAD`是您现在签出的提交。

这是从接受的答案到〜重复问题[https://stackoverflow.com/a/8533413/4880003](https://stackoverflow.com/a/8533413/4880003)的方法。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2019-08-03T22:11:19.897

您可能希望使用它进行彩色输出。

我使用这个单行来列出当前分支的当前目录中的跟踪文件和目录：

```
ls --group-directories-first --color=auto -d $(git ls-tree $(git branch | grep \* | cut -d " " -f2) --name-only) 
```

您可能希望将其添加为别名：

```
alias gl='ls --group-directories-first --color=auto -d $(git ls-tree $(git branch | grep \* | cut -d " " -f2) --name-only)' 
```

如果要递归列出文件：

```
'ls' --color=auto -d $(git ls-tree -rt $(git branch | grep \* | cut -d " " -f2) --name-only) 
```

还有一个别名：

```
alias glr="'ls' --color=auto -d \$(git ls-tree -rt \$(git branch | grep \\* | cut -d \" \" -f2) --name-only)" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-11-07T02:42:14.640

在现有答案的基础上，您可以使用`tree`它来更漂亮地查看它：

```
git ls-tree --full-tree --name-only -r HEAD | tree --fromfile . 
```

您可能想要对此进行分页：

```
git ls-tree --full-tree --name-only -r HEAD | tree -C --fromfile . | ${PAGER:-less} 
```

`tree`这当然值得在 git config 中作为别名 :)

# javascript - 在更改函数中为 jQuery 项目设置条件

> ID：15606958
> 
> 赞同：1
> 
> 时间：2013-03-25T03:05:02.973
> 
> 标签：javascript, jquery, html

我想在函数的代码的一部分中为 jquery 元素设置一个条件。这个想法是 input.other[type="checkbox"] 无法取消选中另一个复选框，但可以很好地执行其他操作。这是[小提琴](http://jsfiddle.net/r6MXA/16/)

HTML

```
<input type="checkbox" name="accs" icost="5000" class="arms" />Arm 1: $5000
<br/>
<input type="checkbox" name="accs" icost="6000" class="arms" />Arm 2: $6000
<br/>
<input type="checkbox" name="accs" icost="7000" class="neck" />Neck 1: $7000
<br/>
<input type="checkbox" name="accs" icost="8000" class="neck" />Neck 2: $8000
<br/>
<input type="checkbox" name="accs" icost="12000" class="other" />Other 1: $12000
<br />
<input type="checkbox" name="accs" icost="8000" class="other" />Other 2: $20000
<br />
<div id="total">$5000</div> 
```

javascript代码：

```
var items = $('input.arms[type="checkbox"], input.neck[type="checkbox"], input.other[type="checkbox"]');
// get the initial total and store in a data for use later (resets as needed)
var total = $('#total');
total.data("currentvalue", parseFloat(total.text().replace(/[^0-9\,]+/g, "")));
items.change(function () {
var currenttotal = total.data("currentvalue");
//exlude input.other[type="checkbox"] from here
var myClass = $(this).attr('class');
var thisGroup = $('.' + myClass);
var notme = $('.' + myClass + ':checked').not(this);
var notmeCost = (notme.length ? notme.attr('icost') : ($(this).is(':checked') ? 0 :  $(this).attr('icost')));

notme.prop('checked', false);
//ends here
//include input.other[type="checkbox"] from here
currenttotal = currenttotal - notmeCost;
total.fadeOut(300);
thisGroup.filter(':checked').each(function (i) {
    var cost = $(this).attr('icost');
    currenttotal = currenttotal + parseFloat(cost);
});
total.data("currentvalue", currenttotal);
total.text("$" + currenttotal.formatMoney(0, ',', '.')); // fix your format here as needed
total.fadeIn(300);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T12:33:08.393

我会为那些你想像单选按钮集一样对待的人添加一个“likeRadio”类，然后管理它：

修改后的标记：（最后一项更改了值以匹配文本 - 如果它不同，您可以修复它）

```
<input type="checkbox" name="accs" icost="5000" class="arms likeRadio" />Arm 1: $5000
<br/>
<input type="checkbox" name="accs" icost="6000" class="arms likeRadio" />Arm 2: $6000
<br/>
<input type="checkbox" name="accs" icost="7000" class="neck likeRadio" />Neck 1: $7000
<br/>
<input type="checkbox" name="accs" icost="8000" class="neck likeRadio" />Neck 2: $8000
<br/>
<input type="checkbox" name="accs" icost="12000" class="other" />Other 1: $12000
<br />
<input type="checkbox" name="accs" icost="20000" class="other" />Other 2: $20000
<br />
<div id="total">$5000</div> 
```

代码：这不是一个严格的依赖关系，如果你有多个类，第一个是你为单选按钮功能“分组”的那个。（见拆分功能）

```
Number.prototype.formatMoney = function (c, d, t) {
    c = isNaN(c = Math.abs(c)) ? 2 : c;
    d = d === undefined ? "." : d;
    t = t === undefined ? "," : t;
    var n = this,
        s = n < 0 ? "-" : "",
        i = parseInt(n = Math.abs(+n || 0).toFixed(c), 10) + "",
        j = (j = i.length) > 3 ? j % 3 : 0;
    return s + (j ? i.substr(0, j) + t : "") + i.substr(j).replace(/(\d{3})(?=\d)/g, "$1" + t) + (c ? d + Math.abs(n - i).toFixed(c).slice(2) : "");
};
// get the initial total and store in a data for use later (resets as needed)
var total = $('#total');
var originalValue = parseFloat(total.text().replace(/[^0-9\,]+/g, ""));
total.data("currentvalue", originalValue);
total.data("originalvalue", originalValue);

var items = $('input.arms[type="checkbox"], input.neck[type="checkbox"], input.other[type="checkbox"]');
items.change(function () {
    var currenttotal = total.data("originalvalue");
    var arrayOfClasses = $(this).attr('class').split(' ');
    var myClass = arrayOfClasses[0];
    var thisGroup = $('.' + myClass);
    if ($(this).hasClass('likeRadio')) {
        var notme = $('.' + myClass + ':checked').not(this);
        var notmeCost = (notme.length ? notme.attr('icost') : ($(this).is(':checked') ? 0 : $(this).attr('icost')));
        notme.prop('checked', false);
        currenttotal = total.data("currentvalue");
        currenttotal = currenttotal - notmeCost;
    } else {
        thisGroup = items;
    }
    total.fadeOut(300);
    thisGroup.filter(':checked').each(function (i) {
        var cost = $(this).attr('icost');
        currenttotal = currenttotal + parseFloat(cost);
    });
    total.data("currentvalue", currenttotal);
    total.text("$" + currenttotal.formatMoney(0, ',', '.')); // fix your format here as needed
    total.fadeIn(300);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T05:52:28.187

我在 jsfiddle 中进行了更改：

```
Number.prototype.formatMoney = function(c, d, t){
        var n = this, c = isNaN(c = Math.abs(c)) ? 2 : c, d = d == undefined ? "." : d, t = t == undefined ? "," : t, s = n < 0 ? "-" : "", i = parseInt(n = Math.abs(+n || 0).toFixed(c)) + "", j = (j = i.length) > 3 ? j % 3 : 0;
           return s + (j ? i.substr(0, j) + t : "") + i.substr(j).replace(/(\d{3})(?=\d)/g, "$1" + t) + (c ? d + Math.abs(n - i).toFixed(c).slice(2) : "");
         };

        var items = $('input.arms[type="checkbox"], input.neck[type="checkbox"], input.other[type="checkbox"]');
        // get the initial total and store in a data for use later (resets as needed)
        var total = $('#total');
        total.data("currentvalue", parseFloat(total.text().replace(/[^0-9\,]+/g, "")));
        items.change(function () {
            var currenttotal = total.data("currentvalue");
            var myClass = $(this).attr('class');
            if(myClass=='other')
            {
                  var notmeCost=$(this).attr('icost');

                  if($(this).is(':checked')==false)
                      notmeCost=0-parseFloat(notmeCost);
                 currenttotal = currenttotal + parseFloat(notmeCost);

      total.fadeOut(300);
            }
            else
            {
            var thisGroup = $('.' + myClass);
            var notme = $('.' + myClass + ':checked').not(this);
            var notmeCost = (notme.length ? notme.attr('icost') : ($(this).is(':checked') ? 0 : $(this).attr('icost')));

            notme.prop('checked', false);

            currenttotal = currenttotal - notmeCost;
            total.fadeOut(300);
            thisGroup.filter(':checked').each(function (i) {
                var cost = $(this).attr('icost');
                currenttotal = currenttotal + parseFloat(cost);
            });
            }

            total.data("currentvalue", currenttotal);
            total.text("$" + currenttotal.formatMoney(0, ',', '.')); // fix your format here as needed

        }); 
```

在这里，我认为您输入错误：

```
<input type="checkbox" name="accs" icost="8000" class="other" />Other 2: $20000;// icost is incorrect 
```

将其更改为

```
<input type="checkbox" name="accs" icost="20000" class="other" />Other 2: $20000; 
```

# python - 如何使用 Zelle 的“graphics.py”库创建循环以替代硬编码窗口坐标？

> ID：15606959
> 
> 赞同：0
> 
> 时间：2013-03-25T03:05:12.513
> 
> 标签：python, loops, coordinates

**问题：**我浪费了大量时间，并且通过手动编码我的坐标来创建错误、臃肿的代码。我需要帮助来学习如何用这个冗长的代码替换将给出相同结果的循环结构。目前，x 和 y 坐标分别存储在名为 xCoords 和 yCoords 的单独数组中。我怎样才能简化它并编写这个程序的更优雅的版本？

[注意：这是我的*第一*篇 StackOverflow 帖子。请告知我的风格、礼仪或发布错误，我会修复它们。这个论坛对我来说是不可或缺的，感谢大家的帮助。]

**相关细节：**

*   我正在创建一个名为“点阵”的两人 GUI 游戏。用户使用鼠标点击与窗口交互。该游戏的在线版本可[在此链接](http://www.papg.com/show?1TX6)中找到。绘制坐标点很重要，因为它可以引导玩家并且是整个游戏板。此代码片段不包含实际的游戏逻辑，因为我还没有编写它。
*   我正在使用John Zelle 的*Python Programming*书中的[图形库。](http://mcsp.wartburg.edu/zelle/python/)

 ***源代码：**

```
 # dotmatrix.py
    # Dot Matrix Game
    # Michael Morelli
    # mmorelli at live dot com
    # Created: 03-24-13 with Python 2.7.3 and PyScripter

    from graphics import *

    win = GraphWin("Dot Matrix", 500, 500)
    win.setCoords(0.0, 0.0, 10.0, 10.0)
    win.setBackground("white")

    xCoords = [1,1,1,1,1,1,1,1,1,
               2,2,2,2,2,2,2,2,2,
               3,3,3,3,3,3,3,3,3,
               4,4,4,4,4,4,4,4,4,
               5,5,5,5,5,5,5,5,5,
               6,6,6,6,6,6,6,6,6,
               7,7,7,7,7,7,7,7,7,
               8,8,8,8,8,8,8,8,8,
               9,9,9,9,9,9,9,9,9]

    yCoords = [1,2,3,4,5,6,7,8,9,
               1,2,3,4,5,6,7,8,9,
               1,2,3,4,5,6,7,8,9,
               1,2,3,4,5,6,7,8,9,
               1,2,3,4,5,6,7,8,9,
               1,2,3,4,5,6,7,8,9,
               1,2,3,4,5,6,7,8,9,
               1,2,3,4,5,6,7,8,9,
               1,2,3,4,5,6,7,8,9]

    for i in range(81):
        Text(Point(xCoords[i], yCoords[i]), "*").draw(win)
        i+=1 # This for loop iterates through each of the coordinate arrays
             # and plots an * asterisk at each coordinate locus. There is a plot()
             # method included with the graphics library, but it plots single-pixel
             # points and are hardly visible. I do not think this will affect the game.

    input("Press <Enter> to quit.")
    win.close() 
```

谢谢您的帮助！-迈克尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T03:37:14.313

代码逻辑似乎等同于使用两个嵌套循环：

```
for xCoord in xrange(1, 10):
    for yCoord in xrange(1, 10):
        Text(Point(xCoord , yCoord ), "*").draw(win) 
```*

# sql - 匿名程序 PLS-00103：在预期以下情况之一时遇到符号“文件结尾”：：=（；不是空范围默认字符

> ID：15606961
> 
> 赞同：1
> 
> 时间：2013-03-25T03:05:17.217
> 
> 标签：sql, oracle, anonymous-methods

这是代码：

```
http://sqlfiddle.com/#!4/ee7da/4247

CREATE TABLE supportContacts 
(
 id int primary key, 
 type varchar2(20), 
 details varchar2(40)
)
/

INSERT INTO supportContacts
(id, type, details)
VALUES
(1, 'Email', 'admin@sqlfiddle.com')

/

INSERT INTO supportContacts
(id, type, details)
VALUES
(2, 'Twitter', '@sqlfiddle')

DECLARE
 x supportContacts.type%type;
 y supportContacs.details%type;
BEGIN 
  select type,details into x,y from supportContacts where id = 1;
  dbms_output.put_line(x);
  dbms_output.put_line(y);
END; 
/ 
```

我想知道为什么这不起作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T03:17:07.690

这个： `y supportContacs.details%type;`

应该：`y supportContacts.details%type;`

如果我做出改变，它对我有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T08:56:36.297

您需要使用右下角按钮（如组合框）更改查询终止符；见证明 [SQLFiddle](http://sqlfiddle.com/#!4/5f93f7/3/0)

# mongodb - 聚合管道和索引

> ID：15606963
> 
> 赞同：9
> 
> 时间：2013-03-25T03:05:25.817
> 
> 标签：mongodb, indexing, aggregation-framework

从[http://docs.mongodb.org/manual/core/indexes/#multikey-indexes](http://docs.mongodb.org/manual/core/indexes/#multikey-indexes)，可以使用多键索引在数组字段上创建索引。[http://docs.mongodb.org/manual/applications/aggregation/#pipeline-operators-and-indexes](http://docs.mongodb.org/manual/applications/aggregation/#pipeline-operators-and-indexes)列出了如何在聚合框架中使用索引的一些方法。但是，有时我可能需要对`$unwind`数组字段执行`$group`. 我的问题是，多键索引（或使用此类数组字段的任何索引）一旦在管道中间进行操作，是否仍然可以使用？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-25T03:19:53.880

通常，只有可以展平为普通查询（`$match`、`$limit`、`$sort`和`$skip`）的管道运算符才能使用集合上的索引。这是`$geoNear`2.4 中添加的运算符必须位于管道开头的原因之一。

`$project`一旦您使用,`$group`或索引对文档进行变异，`$unwind`则该索引不再有效/可用。

如果您在数组字段上有索引，您仍然可以在 之前使用它`$unwind`来加快选择要流水线的文档，然后再进一步细化所选文档`$match`。

考虑以下文件：

```
{ tags: [ 'cat', 'bird', 'blue' ] } 
```

上的索引`tags`。

如果您只想对以开头的标签进行分组，`b`则可以执行如下聚合：

```
{ pipeline: [
      { $match : { tags : /^b/ } },
      { $unwind : '$tags' },
      { $match : { tags : /^b/ } },
      /* the rest */
  ] } 
```

第一个`$match`使用 上的索引进行粗粒度匹配`tags`。

之后的第二个匹配项`$unwind`将无法使用索引（上面的文档现在是 3 个文档），但可以评估每个文档以过滤掉创建的额外文档（删除 { tags : 'cat' } from这个例子）。

HTH - 抢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T10:48:35.627

嗯@Rob 确实给出了正确的答案，但我知道他是如何引导你走错路的：

> 如果您在数组字段上有索引，您仍然可以在 $unwind 之前和之后使用它来加快选择要流水线的文档，然后进一步细化所选文档。

基本上他给出的例子：

```
{ pipeline: [
      { $match : { tags : /^b/ } },
      { $unwind : '$tags' },
      { $match : { tags : /^b/ } },
      /* the rest */
  ] } 
```

过去不会使用多键索引`$unwind`。因此，它将能够搜索所有具有标签名称的 ROOT 文档，`b`但是，它将无法使用索引`$unwind`在第二个中过滤掉子文档。`$match`

`$match`仅适用于突变之前的索引。

所以基本上一旦你改变了文档并将其加载到管道上，目前几乎不可能使用索引。

# d3.js - 尝试从 d3.js SVG 图上的 x 坐标检索 x 值

> ID：15606964
> 
> 赞同：3
> 
> 时间：2013-03-25T03:05:41.410
> 
> 标签：d3.js

我有点卡在某事上，我希望也许有人可以为我指出解决方案的正确方向。由于搜索的措辞，在 Google 上运行搜索对我没有多大帮助。

我想要做的是获取图表上 x 位置的“值”。在我的图表上，我的 x 轴由日期组成。因此，如果我知道图表上绘制的 x 坐标点是 200，例如，我想要 x 位置 200 的日期标签。有很多教程和示例演示如何检索 x 坐标（ 200），但不是 x 坐标值（x 位置 200 的日期对象）。

我最终要做的是构建一个用户注释功能，它允许用户在图表上选择一个 x 位置，然后在该点做一个注释。我需要为该笔记存储一个对象，其中包含其坐标的 x 和 y 值，并且由于通过将 Date 对象应用于 .x 来映射和重新映射图表上的点，因此我需要获取任何点的 Date我在图表上绘制，以便可以记录和重新应用它们，甚至在用户决定移动笔记工具时移动它们。

无论如何，我正在寻找一种方法来对这个进行逆向工程......

```
function getDateX(x, data) {
    var dateX = x(data.Date);
    return dateX;
} 
```

...但在这种情况下，不是取回 x 坐标位置，而是根据提供的 x 坐标位置取回日期。

任何指向您可以为我提供的解决方案的指针将不胜感激。谢谢你的时间。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T07:15:26.430

```
var x = d3.scale.linear()
          .domain([0,200])
          .range([new Date("2000-01-01"), new Date("2001-01-01")]);

new Date(x(150))

// Sun Oct 01 2000 21:00:00 GMT+0900 (東京 (標準時)) 
```

或者，如果您已经有一个日期 -> 数字的比例

```
var x = d3.time.scale()
          .range([0,200])
          .domain([new Date("2000-01-01"), new Date("2001-01-01")]);

x.invert(150)

// Sun Oct 01 2000 21:00:00 GMT+0900 (東京 (標準時)) 
```

# ruby - 如何理解动态方法创建

> ID：15606975
> 
> 赞同：0
> 
> 时间：2013-03-25T03:07:12.780
> 
> 标签：ruby

我看到了代码：

```
class MyClass
  define_method :my_method do |my_arg|
    my_arg*3
  end
end 

obj = MyClass.new
obj.my_method(2)  # => 6 
```

当我们创建时`obj`，我们还没有调用`define_method`，所以`my_method`不应该被创建。`obj.my_method(2)`那么，为什么我们可以直接调用呢？换句话说，是在实例化`define_method`的时候执行的吗？`MyClass`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T03:25:47.973

当任何方法直接出现在被读取的上下文中时，它都会被执行。method 也不例外`define_method`，它定义了一个方法。该方法在第 2 行`define_method`被调用（因此该方法`my_method`被定义），`obj`在第 7 行创建之前。定义的方法不是对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T03:16:23.417

该方法将在解释定义类的代码时定义。

```
[6] pry(main)> class Foo
[6] pry(main)*   puts 'in Foo'
[6] pry(main)*   define_method :foo do |arg|
[6] pry(main)*     puts arg
[6] pry(main)*   end
[6] pry(main)* end
in Foo
=> #<Proc:0x007fcc1b176558@(pry):12 (lambda)>
[7] pry(main)> Foo.instance_methods(false)
=> [:foo] 
```

# php - 从 PHP 中的关联数组获取 JSON 数据类型

> ID：15606978
> 
> 赞同：0
> 
> 时间：2013-03-25T03:07:18.360
> 
> 标签：php, arrays, json, types

大家晚上好！

所以，我有一个 JSON 字符串......

```
{"username":"87db3983285d395ca0af9f","password":"f4f0bb1533ef5034ce6b0a8a7c49a43b","email":"xxx@gmail.com","hnum":3,"splicenum":22,"reg_ip":"71.126.122.217","reg_date":1364175245,"cur_ip":"71.126.122.217","ip_array":["71.126.122.217"],"logins":[],"about":""} 
```

我使用 json_decode() 将此字符串解码为 PHP 中的关联数组。

我正在做的是尝试创建 1 个函数来查询已在 PHP 中转换为关联数组的 JSON 对象。对于这个功能，我现在正在编辑/更新字段。

例子：

```
json_edit(array(
    "set"=>array(
        "email"=>"yyy@yahoo.com"
    )
)); 
```

键“set”表示设置字符串或布尔值。另一个键是“push”以追加到数组，或“delete”以删除字符串或数组。

我想知道的是，如何在 PHP 中获取当前数组部分的数据类型？

意思是，我怎样才能让 PHP 说，“好的，字段 'username' 是一个字符串，而 'ip_array' 是一个数组”？

我不想能够将字符串值“设置”为 SUPPOSED 只是一个布尔值或数组。

有没有办法在 PHP 中获取 JSON 数据类型？

提前非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T05:36:38.993

gettype() 呢？Gettype() 将返回任何变量的数据类型。[http://php.net/manual/en/function.gettype.php](http://php.net/manual/en/function.gettype.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T03:41:37.613

我会使用这样的东西；

```
<?php
function json_edit($json, $changes = array()){

    $decoded = json_decode($json);

    foreach($changes as $action => $data){
        swith($action){
            case 'SET':

                foreach($data as $key => $value){
                    $decoded[$key] = $value;
                }

            break;

            case 'DELETE' :

            break;
            default;

        }
    }

    return json_encode($decoded);
}
?> 
```

# c# - Python和C#中的按位左移

> ID：15606981
> 
> 赞同：0
> 
> 时间：2013-03-25T03:07:32.290
> 
> 标签：c#, python, bit-manipulation

为什么 Python 和 C# 中的按位左移具有不同的值？

Python：

```
 >>> 2466250752<<1
    4932501504L 
```

C＃：

```
 System.Console.Write((2466250752 << 1).ToString()); // output is 637534208 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T03:10:12.950

您在 C# 中**溢出**了 32 位（无符号）整数。

在python中，所有整数都是任意大小的。这意味着整数将扩展到所需的任何大小。请注意，我添加了下划线：

```
>>> a = 2466250752
>>>
>>> hex(a)
'0x9300_0000L'     
>>>
>>> hex(a << 1)
'0x1_2600_0000L'
   ^-------------- Note the additional place 
```

* * *

在 C# 中，`uint`只有 32 位。当您向左移动时，您超出了整数的大小，导致溢出。

换挡前：

![在此处输入图像描述](../Images/19a04dc2e294e6e27fe63859a9ae7b77.png)

换档后：

![在此处输入图像描述](../Images/e3ca927c2b9bbee58c3b992e53f6446c.png)

注意`a`没有`1`python显示的领先。

* * *

要解决这种情况下的限制，您可以使用`ulong`64 位而不是 32 位的 a。这适用于高达 2 ^(64) -1 的值。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-25T03:10:24.293

Python 确保您的整数不会溢出，而 C# 允许溢出（但在检查的上下文中在溢出时抛出异常）。实际上，这意味着您可以将 Python 整数视为具有无限宽度，而 C#`int`或`uint`始终为 4 个字节。

请注意，在您的 Python 示例中，值“4932501504L”有一个尾随 L，表示长整数。`long`当 int 值发生溢出时，Python 会自动以 long（可用内存宽度的大小，与 C# 的 8 个字节不同）整数执行数学运算。[你可以在PEP 237](http://www.python.org/dev/peps/pep-0237/)中看到这个想法背后的基本原理。

编辑：要在 C# 中获得 Python 结果，您不能使用普通的`int`或`long`- 这些类型的大小有限。一种大小仅受内存限制的类型是[BigInteger](http://msdn.microsoft.com/en-us/library/system.numerics.biginteger.aspx)。它会比算术慢`int`，`long`所以我不建议在每个应用程序上都使用它，但它可以派上用场。

例如，您可以编写与 C# 中几乎相同的代码，并获得与 Python 中相同的结果：

```
Console.WriteLine(new BigInteger(2466250752) << 1);
// output is 4932501504 
```

这适用于任意班次大小。例如，你可以写

```
Console.WriteLine(new BigInteger(2466250752) << 1000);
// output is 26426089082476043843620786304598663584184261590451906619194221930186703343408641580508146166393907795104656740341094823575842096015719243506448572304002696283531880333455226335616426281383175835559603193956495848019208150304342043576665227249501603863012525070634185841272245152956518296810797380454760948170752 
```

当然，这会溢出很长时间。

# postgresql - 根据txt文件更新表行

> ID：15606990
> 
> 赞同：1
> 
> 时间：2013-03-25T03:08:40.943
> 
> 标签：postgresql, shell

我一直在搜索，但到目前为止，我只找到了如何将日期插入基于 csv 文件的表中。

我有以下情况：

目录名称 = ticketID

在此目录中，我有几个文件，例如：

*   `Description.txt`
*   `Summary.txt` - 包含票头并已成功导入。
*   `Progress_#.txt`- 这是每次更新票证时。我得到一个新文件。
*   `Solution.txt`

导入`Issue.txt`很容易，因为这实际上是一个 CSV。

现在我的问题是描述和进度文件。

我需要使用此文件中的数据更新现有行。线上的东西

```
update table_ticket set table_ticket.description = Description.txt where ticket_number = directoryname 
```

我正在使用 PostgreSQL，该`COPY`命令对新数据有效，但由于 ',;/ 特殊字符，它仍然会失败。

我想使用 bash 脚本来做到这一点，但似乎这是不可能的：

```
for i in `find . -type d`
do
  update table_ticket 
  set table_ticket.description = $i/Description.txt
  where ticket_number = $i
done 
```

当然，上面的代码会考虑到数据库的连接。

任何人都知道如何使用 shell 脚本来实现这一点。还是只用 Java 制作一些东西并读取和更新记录会更好，尽管我想避免这种方法。

谢谢亚历克斯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T07:40:53.183

感谢您的回答，但我遇到了这个：

```
psql -U dbuser -h dbhost db 
\set content = `cat PATH/Description.txt`
update table_ticket set description = :'content' where ticketnr = TICKETNR; 
```

将其放入一个简单的脚本中，我创建了以下内容：

```
#!/bin/bash
for i in `find . -type d|grep ^./CS`
do
    p=`echo $i|cut -b3-12 -`
    echo $p
    sed s/PATH/${p}/g cmd.sql > cmd.tmp.sql
    ticketnr=`echo $p|cut -b5-10 -`
    sed -i s/TICKETNR/${ticketnr}/g cmd.tmp.sql
    cat cmd.tmp.sql
    psql -U supportAdmin -h localhost supportdb -f cmd.tmp.sql
done 
```

缺点是它总是会创建一个新连接，稍后我将更改为创建单个文件

但它完全符合我的要求，将内容放在单个列中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T04:31:58.543

`psql`除非您打算将其存储为大对象，否则无法直接为您读取文件，在这种情况下您可以使用`lo_import`. 见`psql`命令[`\lo_import`](http://www.postgresql.org/docs/current/static/app-psql.html)。

* * *

**更新**：@AlexandreAlves 指出，您实际上*可以*在使用时啜饮文件内容

```
 \set myvar = `cat somefile` 
```

然后将其作为`psql`变量引用`:'myvar'`。便利。

* * *

虽然可以使用 shell 读取文件并将其提供给它，`psql`但充其量是很尴尬的，因为 shell 既不提供具有参数化查询支持的本机 PostgreSQL 数据库驱动程序，也不提供任何文本转义功能。您必须滚动自己的字符串转义。

即使这样，您也需要知道输入文件的文本编码对您有效，`client_encoding`否则您将插入垃圾和/或出错。通过与 PostgreSQL （如 Python、Perl、Ruby 或 Java）的适当集成，它很快就会变得更容易用一种语言来完成。

但是，如果你真的必须的话，有*一种*方法可以在 bash 中做你想做的事情：使用 Pg 的[分隔美元引号](http://www.postgresql.org/docs/current/static/sql-syntax-lexical.html)和随机分隔符来帮助防止 SQL 注入攻击。它并不完美，但非常接近。我现在正在写一个例子。

* * *

鉴于有问题的文件：

```
$ cat > difficult.txt <__END__
Shell metacharacters like: $!(){}*?"'
SQL-significant characters like "'()
__END__ 
```

和样品表：

```
psql -c 'CREATE TABLE testfile(filecontent text not null);' 
```

你可以：

```
#!/bin/bash
filetoread=$1
sep=$(printf '%04x%04x\n' $RANDOM $RANDOM)
psql <<__END__
INSERT INTO testfile(filecontent) VALUES (
\$x${sep}\$$(cat ${filetoread})\$x${sep}\$
);
__END__ 
```

这可能有点难以阅读，并且随机字符串生成是特定于 bash 的，尽管我确信可能有可移植的方法。

生成一个由字母数字字符组成的随机标签字符串（为方便起见，我使用了十六进制）并存储在`seq`.

`psql`然后使用未引用的 here-document 标记调用。缺少引号很重要，因为它`<<'__END__'`会告诉`bash`不要解释字符串中的 shell 元字符，而 plain`<<__END__`允许 shell 解释它们。我们需要 shell 来解释元字符，因为我们需要替换`sep`到 here 文档中，并且还需要使用`$(...)`（相当于反引号）来插入文件文本。`x`每次替换之前都存在，`seq`因为 here-document 标记必须是有效的 PostgreSQL 标识符，因此它们必须以字母而不是数字开头。每个标签的开头和结尾都有一个转义的美元符号，因为 PostgreSQL 美元引号的形式是`$taghere$quoted text$taghere$`.

因此，当脚本被调用时，`bash testscript.sh difficult.txt`此处的文档会扩展为以下内容：

```
INSERT INTO testfile(filecontent) VALUES (
$x0a305c82$Shell metacharacters like: $!(){}*?"'
SQL-significant characters like "'()$x0a305c82$
); 
```

其中标签每次都不同，这使得依赖于过早结束引用的 SQL 注入漏洞变得困难。

我仍然建议您使用真正的脚本语言，但这表明它确实是可能的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T04:31:13.397

最好的办法是创建一个临时表，从相关文件中复制这些表，然后运行更新。

您的次要选择是使用 pl/perlu 之类的语言创建一个函数并在存储过程中执行此操作，但是您将失去很多从临时表更新时可以执行的性能优化。

# php - 当涉及 WHERE 语句时，涉及 VARCHAR 的 PHP PDO SELECT SQL 不起作用

> ID：15606991
> 
> 赞同：1
> 
> 时间：2013-03-25T03:08:42.087
> 
> 标签：php, sql, pdo

添加 WHERE 语句时，我的 select 语句不起作用。

以下代码返回一些内容：

```
$sql = "SELECT * FROM statement";
$stmt = $dbconn->prepare($sql);
$stmt->execute(array(':words'=>$words)); 
```

但这不会：

```
$sql = "SELECT * FROM statement WHERE words='(:words)'";
$stmt = $dbconn->prepare($sql);
$stmt->execute(array(':words'=>$words)); 
```

我不确定为什么。您可能认为这是因为没有“words”元素等于 $words 的 statements 对象，但是有...我可以使用第一个代码运行此循环：

```
foreach ($stmt as $s)
{
    var_dump($words, $s['words'], ($words==$s['words']));
    echo "<br>";
} 
```

这是我的输出：

```
string(4) "test" string(5) "test1" bool(false) 
string(4) "test" string(5) "test2" bool(false) 
string(4) "test" string(4) "test" bool(true) 
```

那么有什么关系呢？我不知道为什么这不起作用。如果我在做一些非常愚蠢的事情，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T06:32:38.873

根据 PDO 的工作原理，您可能不需要为参数添加额外的撇号。PDO 将根据变量的类型自动工作。所以这会很好。

```
$sql = "SELECT * FROM statement WHERE words=:words";
$stmt = $dbconn->prepare($sql);
$stmt->execute(array(':words'=>$words)); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-25T03:20:20.933

你可以在下面试试这个：

`$sql = "SELECT * FROM statement WHERE words in (':words')";` `$statement->execute(array(':words' => $words));`

如果您在单引号内使用 ()，它不会给您结果。

谢谢

# c++ - g++ 优化标志：-fuse-linker-plugin vs -fwhole-program

> ID：15606993
> 
> 赞同：21
> 
> 时间：2013-03-25T03:09:15.330
> 
> 标签：c++, linux, g++, x86-64, ld

我正在阅读： http:
[//gcc.gnu.org/onlinedocs/gcc/Optimize-Options.html](http://gcc.gnu.org/onlinedocs/gcc/Optimize-Options.html)

它首先建议：不应
与`-flto`使用此选项 ( ) 结合使用。`-fwhole-program`相反，依赖链接器插件应该提供**更安全、更精确的信息。**

然后，它建议：
如果程序不需要导出任何符号，则可以组合`-flto`并`-fwhole-program`允许过程间优化器使用更积极的假设，这可能会导致改进的优化机会。`-fwhole-program`当链接器插件处于活动状态时，不需要使用（请参阅 参考资料`-fuse-linker-plugin`）。

这是否意味着在理论上，使用`-fuse-linker-plugin`with`-flto`总是比使用`-fwhole-program`with获得更好的优化可执行文件`-flto`？

我尝试使用单独`ld`链接`-fuse-linker-plugin`和链接`-fwhole-program`，并且可执行文件的大小至少是不同的。

PS 我在 CentOS 6 上使用 gcc 4.6.2 和 ld 2.21.53.0.1。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2017-02-09T06:54:20.950

更新：请参阅下面的@PeterCordes 评论。本质上，不再需要*-fuse-linker-plugin 。*

这些差异是微妙的。首先，了解*-flto*的实际作用。它本质上创建了一个可以稍后优化的输出（在“链接时”）。

-fwhole *-program*所做的是假设“**当前编译单元代表正在编译的整个程序**”，无论实际情况是否如此。因此，GCC 将假定它知道调用特定函数的所有位置。正如它所说，它可能会使用更积极的过程间优化器。我稍后会解释。

最后，*-fuse-linker-plugin*所做的实际上是在链接时执行优化，这通常会在执行每个编译单元时完成。所以，这个被设计为与*-flto*配对，因为*-flto*意味着保存足够的信息以便以后进行优化，而*-fuse-linker-plugin*意味着实际进行这些优化。

那么，它们有什么不同呢？*好吧，正如 GCC 文档所建议的那样，原则上使用-fwhole-program*没有任何优势，因为该选项假定您必须确保某些东西是正确的。要打破它，只需在一个 .cpp 文件中定义一个函数并在另一个文件中使用它。您将收到链接器错误。

*-fhole-program*有什么优势吗？好吧，如果您只有一个编译单元，那么您可以使用它，但老实说，它不会更好。通过使用等效程序，我能够获得不同大小的可执行文件，但是在检查实际生成的机器代码时，它们是相同的。事实上，我看到的唯一区别是带有调试信息的行号不同。

# unix - 真正的so文件和ln -s有什么区别

> ID：15606994
> 
> 赞同：1
> 
> 时间：2013-03-25T03:09:29.480
> 
> 标签：unix, shared-libraries

例如，我的目录是这样的：

```
lib
|
+--foo.so
+--bar.so -> bar.so.1.0.0.0
+--bar.so.1.0.0.0 
```

这两种方式总是相同的吗？

我问这个问题的原因是我发现unix会在我复制到真实的so文件时

```
cp -r lib /path/to/ 
```

像这样的新目录：

```
/path/to/lib
|
+--foo.so
+--bar.so
+--bar.so.1.0.0.0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T03:17:27.737

`so`和之间`ls -s`的区别是文件和符号链接之间的区别。符号链接就像其他文件的别名，对它们的操作会导致链接文件发生变化。当您这样做时`cp`，它会将链接文件复制到目标目录，并以链接名称作为文件名，即在打开符号链接时读取链接文件进行复制。因此，丢失链接并获取链接文件的副本。如果您使用`-P`该命令的选项，`cp`您可以保留符号链接信息。

```
cp -P lib /path/to/ 
```

# php - Laravel 4找不到类数据库

> ID：15606999
> 
> 赞同：0
> 
> 时间：2013-03-25T03:10:09.750
> 
> 标签：php, laravel, laravel-4

**问题：**我正在尝试引导 L4 框架以供某些文件（位于 php-resque 工作人员`app/workers`）使用，但工作人员似乎无法在`DB`使用`DB::table('tablename')...`. `composer dumpautoload`没有帮助。

我使用的引导程序没有加载`DB`类吗？它似乎已经加载了工人阶级。

**L4 引导失败**

```
<?php

// Bootstrap the laravel environment for our resque workers.
require __DIR__.'/bootstrap/autoload.php'; 
```

**错误**

```
PHP Fatal error:  Class 'DB' not found in /var/www/dev/app/libraries/test.php on line 50 
```

**作曲家.json**

```
{
    "require": {
        "laravel/framework": "4.0.*",
        "chrisboulton/php-resque": "@stable"
    },
    "autoload": {
        "classmap": [
            "app/commands",
            "app/controllers",
            "app/models",
            "app/database/migrations",
            "app/database/seeds",
            "app/tests/TestCase.php",
            "app/libraries",
            "app/workers"
        ]
    },
    "scripts": {
        "post-update-cmd": "php artisan optimize"
    },
    "minimum-stability": "dev"
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T16:01:21.247

您可以尝试：

1）加载 Composer 自动加载文件，位于`vendor/autoload.php`（你实际上是在调用 laravel 之一）

`public/index.php`2）在你的文件中复制文件中的调用`test.php`，特别是：

```
require __DIR__.'/../bootstrap/autoload.php';
$app = require_once __DIR__.'/../bootstrap/start.php';
$app->run();
$app->shutdown(); 
```

编辑：经过进一步检查，您可以尝试使用裸机来执行此操作：

```
<?php
require '../vendor/autoload.php';
use Illuminate\Support\Facades\DB as DB;
// Test the DB Instance
$dbInstance = new DB;
var_dump ($dbInstance); 
```

将输出

```
object(Illuminate\Support\Facades\DB)[2] 
```