# StackOverflow 问答 14100000-14100999

# javascript - 如何禁用 Jquery 简单地滚动鼠标悬停？

> ID：14100000
> 
> 赞同：0
> 
> 时间：2012-12-31T09:45:52.107
> 
> 标签：javascript, jquery, jquery-plugins, simplyscroll

我只需要为 jquery simpleScroll 插件禁用鼠标悬停吗？客户只问点击功能...请任何人帮助我？提前致谢... ：）

```
(function($) {
    $(function() {
        $("#scroller").simplyScroll({
            auto: false,
            speed: 50
        });
    });
})(jQuery); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T09:49:35.667

我不确定我的问题是否正确，但如果你想禁用“鼠标悬停”功能

```
(function($) {
    $(function() {
        $("#scroller").simplyScroll({
            auto: false,
            speed: 50,
            pauseOnHover : false    // <--- just use the option
        });
    });
})(jQuery); 
```

..应该做的伎俩。如手册[http://logicbox.net/jquery/simplyscroll/中所示](http://logicbox.net/jquery/simplyscroll/)

# android - Android - 触摸通知时提示对话框窗口

> ID：14100004
> 
> 赞同：4
> 
> 时间：2012-12-31T09:46:10.543
> 
> 标签：android, dialog, notifications

我是android应用程序开发的新手。我正在为我的最后一年项目申请。

我的应用程序会提醒用户预约。到目前为止，我设法在约会日期的通知栏上显示警报。

我的主管要求添加一个功能，即当通知栏上的用户选项卡时，将有一个对话窗口并显示详细信息（约会标题和位置）。

我如何实现这一目标？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-31T09:49:28.927

试试这个：

```
Intent notifyIntent = new Intent(context,YourActivityClassHere.class);
notifyIntent.setFlag(Intent.FLAG_ACTIVITY_NEW_TASK);
//UNIQUE_ID if you expect more than one notification to appear
PendingIntent intent = PendingIntent.getActivity(SimpleNotification.this, UNIQUE_ID, 
            notifyIntent, PendingIntent.FLAG_UPDATE_CURRENT); 
```

1.  使**PendingIntent**打开您的一项活动
2.  使该活动完全透明并打开一个对话框。

如果你想从通知点击事件中打开一个活动：

假设**notif**是您的**Notification**对象：

```
Intent notificationIntent = new Intent(this.getApplicationContext(), ActivityToStart.class);
PendingIntent contentIntent = PendingIntent.getActivity(this.getApplicationContext(), 0, notificationIntent, 0);
notif.contentIntent = contentIntent; 
```

如需其他帮助，您可以查看此[示例项目](https://github.com/commonsguy/cw-android/tree/master/Notifications/Notify1/)，它将帮助您：

# android - 如何查看TextView中的所有文本

> ID：14100006
> 
> 赞同：1
> 
> 时间：2012-12-31T09:46:12.557
> 
> 标签：android, textview

我的 TextView 有问题。

当我的文本视图中的文本太长时，我无法再查看它，因为我无法在手机上滚动它。

我的代码如下：

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:tools="http://schemas.android.com/tools"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="@color/lightgray"
        tools:context=".BucketItemDescActivity" >

        <TextView
            android:id="@+id/textView3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_below="@+id/imageView1"
            android:layout_marginLeft="25dp"
            android:layout_marginRight="25dp"
            android:layout_marginTop="19dp"
            android:text="The Godfather is a 1972 American epic crime film directed by Francis Ford Coppola and produced by Albert S. Ruddy from a screenplay by Mario Puzo and Coppola. Based on Puzo&apos;s 1969 novel of the same name, the film stars Marlon Brando and Al Pacino as the leaders of a powerful New York crime family. The story, spanning the years 1945 to 1955, centers on the ascension of Michael Corleone (Pacino) from reluctant family outsider to ruthless Mafia boss while also chronicling the Corleone family under the patriarch Vito Corleone (Brando)
The Godfather is a 1972 American epic crime film directed by Francis Ford Coppola and produced by Albert S. Ruddy from a screenplay by Mario Puzo and Coppola. Based on Puzo&apos;s 1969 novel of the same name, the film stars Marlon Brando and Al Pacino as the leaders of a powerful New York crime family. The story, spanning the years 1945 to 1955, centers on the ascension of Michael Corleone (Pacino) from reluctant family outsider to ruthless Mafia boss while also chronicling the Corleone family under the patriarch Vito Corleone (Brando)."
            android:textSize="12sp" />

        <LinearLayout
            android:id="@+id/frameLayout1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_alignParentRight="true"
            android:layout_alignParentTop="true"
            android:background="#336699" >

            <TextView
                android:id="@+id/textView1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_margin="10dp"
                android:layout_marginLeft="25dp"
                android:textSize="15sp" 
                android:textColor="#FFFFFF"
                android:text="The Godfather (1972)" />

        </LinearLayout>

        <ImageView
            android:id="@+id/imageView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/frameLayout1"
            android:layout_centerHorizontal="true"
            android:layout_marginTop="18dp"
            android:src="@drawable/movie1" />

    </RelativeLayout> 
```

我该如何解决这个问题？

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T09:47:55.987

将所有视图放在[**ScrollView**](http://developer.android.com/reference/android/widget/ScrollView.html)中。

例如：

```
<RelativeLayout
       xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:tools="http://schemas.android.com/tools"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="@color/lightgray"
        tools:context=".BucketItemDescActivity">

  <ScrollView>
     <TextView/>
     <TextView/>
     ..........
     ..........
     ..........

  </ScrollView>
</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T09:53:20.270

请使用下面的 XML 代码而不是您的代码，它将解决您的问题。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@color/lightgray" >

    <ScrollView
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

        <RelativeLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <TextView
                android:id="@+id/textView3"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:layout_below="@+id/imageView1"
                android:layout_marginLeft="25dp"
                android:layout_marginRight="25dp"
                android:layout_marginTop="19dp"
                android:text="The Godfather is a 1972 American epic crime film directed by Francis Ford Coppola and produced by Albert S. Ruddy from a screenplay by Mario Puzo and Coppola. Based on Puzo&apos;s 1969 novel of the same name, the film stars Marlon Brando and Al Pacino as the leaders of a powerful New York crime family. The story, spanning the years 1945 to 1955, centers on the ascension of Michael Corleone (Pacino) from reluctant family outsider to ruthless Mafia boss while also chronicling the Corleone family under the patriarch Vito Corleone (Brando)
The Godfather is a 1972 American epic crime film directed by Francis Ford Coppola and produced by Albert S. Ruddy from a screenplay by Mario Puzo and Coppola. Based on Puzo&apos;s 1969 novel of the same name, the film stars Marlon Brando and Al Pacino as the leaders of a powerful New York crime family. The story, spanning the years 1945 to 1955, centers on the ascension of Michael Corleone (Pacino) from reluctant family outsider to ruthless Mafia boss while also chronicling the Corleone family under the patriarch Vito Corleone (Brando)."
                android:textSize="12sp" />

            <LinearLayout
                android:id="@+id/frameLayout1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:layout_alignParentRight="true"
                android:layout_alignParentTop="true"
                android:background="#336699" >

                <TextView
                    android:id="@+id/textView1"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_margin="10dp"
                    android:layout_marginLeft="25dp"
                    android:text="The Godfather (1972)"
                    android:textColor="#FFFFFF"
                    android:textSize="15sp" />
            </LinearLayout>

            <ImageView
                android:id="@+id/imageView1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@+id/frameLayout1"
                android:layout_centerHorizontal="true"
                android:layout_marginTop="18dp"
                android:src="@drawable/movie1" />
        </RelativeLayout>
    </ScrollView>

</RelativeLayout> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-31T09:48:59.630

将 ScrollView 添加到 yourTextView，

```
<ScrollView android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_below="@+id/imageView1"
            android:layout_marginLeft="25dp"
            android:layout_marginRight="25dp"
            android:layout_marginTop="19dp"
            android:scrollbars="none">
        <TextView
            android:id="@+id/textView3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="The Godfather is a 1972 American epic crime film directed by Francis Ford Coppola and produced by Albert S. Ruddy from a screenplay by Mario Puzo and Coppola. Based on Puzo&apos;s 1969 novel of the same name, the film stars Marlon Brando and Al Pacino as the leaders of a powerful New York crime family. The story, spanning the years 1945 to 1955, centers on the ascension of Michael Corleone (Pacino) from reluctant family outsider to ruthless Mafia boss while also chronicling the Corleone family under the patriarch Vito Corleone (Brando)
The Godfather is a 1972 American epic crime film directed by Francis Ford Coppola and produced by Albert S. Ruddy from a screenplay by Mario Puzo and Coppola. Based on Puzo&apos;s 1969 novel of the same name, the film stars Marlon Brando and Al Pacino as the leaders of a powerful New York crime family. The story, spanning the years 1945 to 1955, centers on the ascension of Michael Corleone (Pacino) from reluctant family outsider to ruthless Mafia boss while also chronicling the Corleone family under the patriarch Vito Corleone (Brando)."
            android:textSize="12sp" />

</ScrollView> 
```

**编辑**

要在 scrollView 中添加 ImageView，请从其所在位置删除 ImageView 并像这样添加它，

```
<ScrollView  android:layout_width="wrap_content"
    android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
            android:layout_below="@+id/imageView1"
            android:layout_marginLeft="25dp"
            android:layout_marginRight="25dp"
            android:layout_marginTop="19dp"
            android:scrollbars="none">

    <LinearLayout  android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="vertical">

            <ImageView
            android:id="@+id/imageView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_horizontal"
            android:layout_marginTop="18dp"
            android:src="@drawable/ic_launcher" />

        <TextView
            android:id="@+id/textView3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="The Godfather is a 1972 American epic crime film directed by Francis Ford Coppola and produced by Albert S. Ruddy from a screenplay by Mario Puzo and Coppola. Based on Puzo&apos;s 1969 novel of the same name, the film stars Marlon Brando and Al Pacino as the leaders of a powerful New York crime family. The story, spanning the years 1945 to 1955, centers on the ascension of Michael Corleone (Pacino) from reluctant family outsider to ruthless Mafia boss while also chronicling the Corleone family under the patriarch Vito Corleone (Brando)
The Godfather is a 1972 American epic crime film directed by Francis Ford Coppola and produced by Albert S. Ruddy from a screenplay by Mario Puzo and Coppola. Based on Puzo&apos;s 1969 novel of the same name, the film stars Marlon Brando and Al Pacino as the leaders of a powerful New York crime family. The story, spanning the years 1945 to 1955, centers on the ascension of Michael Corleone (Pacino) from reluctant family outsider to ruthless Mafia boss while also chronicling the Corleone family under the patriarch Vito Corleone (Brando)."
            android:textSize="12sp" />
      </LinearLayout>  
</ScrollView> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-31T09:49:14.170

```
<ScrollView ... >
  <TextView fill_parent etc./>

</ScrollView> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-31T09:49:55.997

试试这个 ：

将此设置为您的`TextView`：

```
android:maxLines = "AN_INTEGER"    
android:scrollbars = "vertical" 
```

然后从你的`Activity`：

```
yourTextView.setMovementMethod(new ScrollingMovementMethod()); 
```

谢谢。

# javascript - Highcharts - redraw() 与新的 Highcharts.chart

> ID：14100011
> 
> 赞同：78
> 
> 时间：2012-12-31T09:46:23.617
> 
> 标签：javascript, highcharts

我正在努力理解更新 highcharts 图表的正确方法。假设我已经渲染了一个图表，然后我想以某种方式更新它。例如，我可能想要更改数据系列的值，或者我可能想要启用 dataLabels。

目前，我能弄清楚如何做到这一点的唯一方法是改变图表选项，并`new Highcharts.chart`用来告诉 highcharts 重绘。

但是，我想知道这是否可能是矫枉过正，并且有可能“原位”改变图表，而不必从头开始`new Highcharts.chart`。我注意到有一种`redraw()`方法，但我似乎无法让它发挥作用。

很感谢任何形式的帮助。

谢谢，

罗宾

示例代码如下，底部有一个jsFiddle

```
$(document).ready(function() {

chartOptions = {
    chart: {
        renderTo: 'container',
        type: 'area',
    },
    series: [{
        data: [1,2,3]
    }]
};

chart1 = new Highcharts.Chart(chartOptions);

chartOptions.series[0].data= [10,5,2];
chart1 = new Highcharts.Chart(chartOptions);

//The following seems to have no effect
chart1.series[0].data = [2,4,4];
chart1.redraw();

});​ 
```

[http://jsfiddle.net/sUXsu/18/](http://jsfiddle.net/sUXsu/18/)

[编辑]：

对于这个问题的任何未来观众，值得注意的是没有隐藏和显示数据标签的方法。下面展示了如何做到这一点：http: [//jsfiddle.net/supertrue/tCF8Y/](http://jsfiddle.net/supertrue/tCF8Y/)

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2013-03-15T10:40:16.470

`chart.series[0].setData(data,true);`

方法本身会`setData`调用redraw方法

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-02-01T10:31:53.470

在调用重绘之前，您必须在图表对象上调用**set**和**add函数。**

```
chart.xAxis[0].setCategories([2,4,5,6,7], false);

chart.addSeries({
    name: "acx",
    data: [4,5,6,7,8]
}, false);

chart.redraw(); 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2016-06-25T06:47:59.310

```
var newData = [1,2,3,4,5,6,7];
var chart = $('#chartjs').highcharts();
chart.series[0].setData(newData, true); 
```

说明：
变量`newData`包含要在图表中**更新的值。**变量`chart`是图表的对象。`setData`是highchart提供的一种更新数据的方法。

方法 setData 包含两个参数，在第一个参数中我们需要将新值作为数组传递，第二个参数是布尔值。如果`true`然后图表更新自己，如果`false`那么我们必须使用`redraw()`方法来更新图表（即`chart.redraw();`）

[http://jsfiddle.net/NxEnH/8/](http://jsfiddle.net/NxEnH/8/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-04T14:31:02.423

@RobinL 正如之前的评论中提到的，您可以使用 chart.series[n].setData()。首先，您需要确保已将图表实例分配给图表变量，这样它就会采用访问和操作图表所需的所有属性和方法。

我还使用了 setData() 的第二个参数并将其设置为 false，以防止图表的自动呈现。这是因为我有多个数据系列，所以我宁愿更新每个系列，使用render=false，然后运行chart.redraw()。这成倍的性能（我有 10,000-100,000 个数据点并每 50 毫秒刷新一次数据集）。

# android - 在列表视图上设置动画背景

> ID：14100012
> 
> 赞同：2
> 
> 时间：2012-12-31T09:46:28.490
> 
> 标签：android, android-listview, android-animation, android-cursoradapter, android-drawable

我有一个 ListView，每行有 2 个 TextView 和一个 CheckBox。

我有一个可绘制对象（一条线），一旦用户检查复选框，可绘制对象将在选中的复选框行的背景上缩放为动画，我就可以在我的自定义适配器上使用**getView()**方法，将drawable设置为背景动画，但它也会缩放2个TextView和CheckBox，我希望只有drawable背景可以缩放为动画，我该怎么做？

这是我在自定义适配器上的**getView()方法：**

```
public View getView(final int position, View convertView, final ViewGroup parent) {
    final ViewHolder holder;

    LayoutInflater inflater = LayoutInflater.from(context);
    convertView = inflater.inflate(R.layout.listview_item_row, parent, false);
    // cache view fields into the holder
    holder = new ViewHolder();
    holder.itemTitle = (TextView) convertView.findViewById(R.id.itemTitle);
    holder.itemQuantity = (TextView) convertView.findViewById(R.id.itemQuantity);
    holder.itemCheck = (CheckBox) convertView.findViewById(R.id.itemCheck);
    convertView.setTag(holder);

    final Cursor cursor = getCursor();
    final View rowView = convertView;
    cursor.moveToPosition(position);
    holder.itemTitle.setText(cursor.getString((cursor.getColumnIndex(MySQLiteHelper.KEY_NAME))));
    holder.itemQuantity.setText(cursor.getString((cursor.getColumnIndex(MySQLiteHelper.KEY_QUANTITY))));
    holder.itemCheck.setChecked(cursor.getInt(cursor.getColumnIndex(MySQLiteHelper.KEY_CHECKED)) == 1);

    holder.itemCheck.setOnCheckedChangeListener(new OnCheckedChangeListener() { 
            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
                if (isChecked) {
                    cursor.moveToPosition(position);
                    itemsDataSource.updateItemCheckBox(1, cursor.getLong(cursor.getColumnIndex(MySQLiteHelper.KEY_ID)));
                    itemsDataSource.updateRoute(cursor.getString(cursor.getColumnIndex(MySQLiteHelper.KEY_NAME)), true);
                    Animation drawLine = AnimationUtils.loadAnimation(context, R.anim.item_done);
                    rowView.setBackgroundResource(R.drawable.line);
                    rowView.startAnimation(drawLine);
                    ShowListActivity.PRIORITY++;
                }
                else {
                    cursor.moveToPosition(position);
                    itemsDataSource.updateItemCheckBox(0, cursor.getLong(cursor.getColumnIndex(MySQLiteHelper.KEY_ID)));
                    itemsDataSource.updateRoute(cursor.getString(cursor.getColumnIndex(MySQLiteHelper.KEY_NAME)), false);
                    rowView.setBackgroundResource(0);
                    ShowListActivity.PRIORITY--;
                }

            }
        });
    if (holder.itemCheck.isChecked()) rowView.setBackgroundResource(R.drawable.line);
    else rowView.setBackgroundResource(0);
    return rowView;
}
private static class ViewHolder {
    TextView itemTitle;
    TextView itemQuantity;
    CheckBox itemCheck;     
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T21:26:51.180

**更新**

我设法解决了这个问题：

首先，我更改了自定义行布局文件，如下所示：

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/frameRowLayout"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:paddingLeft="5dp"
android:paddingRight="5dp"
android:weightSum="10">

<LinearLayout android:id="@+id/rowLayout" 
        android:layout_width="fill_parent" 
        android:layout_height="fill_parent" >

        <CheckBox android:id="@+id/itemCheck" 
            android:layout_width="0dp" 
            android:layout_height="wrap_content" 
            android:layout_marginBottom="5dp" 
            android:layout_marginTop="5dp" 
            android:layout_weight="2" android:gravity="center" 
            android:focusable="false" 
            android:focusableInTouchMode="false" 
            android:singleLine="false" />

       <TextView android:id="@+id/itemTitle" 
           android:layout_width="0dp" 
           android:layout_height="fill_parent" 
           android:layout_marginBottom="5dp" 
           android:layout_marginTop="5dp" 
           android:layout_weight="6" 
           android:gravity="center" 
           android:text="some text1" 
           android:textColor="#2B89A8" 
           android:textSize="22dp" 
           android:textStyle="bold" />

       <TextView android:id="@+id/itemQuantity" 
           android:layout_width="0dp" 
           android:layout_height="fill_parent" 
           android:layout_marginBottom="5dp" 
           android:layout_marginTop="5dp" 
           android:layout_weight="2" 
           android:gravity="center" 
           android:text="some text2" 
           android:textColor="#2B89A8" 
           android:textSize="22dp" 
           android:textStyle="bold" />

</LinearLayout>

<View
    android:id="@+id/backgroundView"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" />

</FrameLayout> 
```

Framelayout的整个想法是视图可以相互重叠，LinearLayout之后的View与LinearLayout重叠。

然后我在我的自定义适配器中更改了我的**getView()**方法，如下所示：

```
public View getView(final int position, View convertView, final ViewGroup parent) {
    final ViewHolder holder;

    LayoutInflater inflater = LayoutInflater.from(context);
    convertView = inflater.inflate(R.layout.listview_item_row, parent, false);
    // cache view fields into the holder
    holder = new ViewHolder();
    holder.itemTitle = (TextView) convertView.findViewById(R.id.itemTitle);
    holder.itemQuantity = (TextView) convertView.findViewById(R.id.itemQuantity);
    holder.itemCheck = (CheckBox) convertView.findViewById(R.id.itemCheck);
    holder.rowView = (View) convertView.findViewById(R.id.backgroundView);
    convertView.setTag(holder);

    final Cursor cursor = getCursor();
    cursor.moveToPosition(position);
    holder.itemTitle.setText(cursor.getString((cursor.getColumnIndex(MySQLiteHelper.KEY_NAME))));
    holder.itemQuantity.setText(cursor.getString((cursor.getColumnIndex(MySQLiteHelper.KEY_QUANTITY))));
    holder.itemCheck.setChecked(cursor.getInt(cursor.getColumnIndex(MySQLiteHelper.KEY_CHECKED)) == 1);

    holder.itemCheck.setOnCheckedChangeListener(new OnCheckedChangeListener() { 
            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
                if (isChecked) {
                    cursor.moveToPosition(position);
                    itemsDataSource.updateItemCheckBox(1, cursor.getLong(cursor.getColumnIndex(MySQLiteHelper.KEY_ID)));
                    itemsDataSource.updateRoute(cursor.getString(cursor.getColumnIndex(MySQLiteHelper.KEY_NAME)), true);
                    Animation drawLine = AnimationUtils.loadAnimation(context, R.anim.item_done);
                    holder.rowView.setBackgroundResource(R.drawable.line);
                    holder.rowView.startAnimation(drawLine);
                    ShowListActivity.PRIORITY++;
                }
                else {
                    cursor.moveToPosition(position);
                    itemsDataSource.updateItemCheckBox(0, cursor.getLong(cursor.getColumnIndex(MySQLiteHelper.KEY_ID)));
                    itemsDataSource.updateRoute(cursor.getString(cursor.getColumnIndex(MySQLiteHelper.KEY_NAME)), false);
                    holder.rowView.setBackgroundResource(0);
                    ShowListActivity.PRIORITY--;
                }

            }
        });
    if (holder.itemCheck.isChecked()) holder.rowView.setBackgroundResource(R.drawable.line);
    else holder.rowView.setBackgroundResource(0);
    return convertView;
}
private static class ViewHolder {
    TextView itemTitle;
    TextView itemQuantity;
    CheckBox itemCheck; 
    View rowView;
} 
```

希望你能理解我的所作所为。

# magento - magento自定义模块中的寻呼机工具栏

> ID：14100014
> 
> 赞同：0
> 
> 时间：2012-12-31T09:46:56.830
> 
> 标签：magento, magento-1.7

我使用本[教程](http://asia-connect.com.vn/2009/07/magento-filter-by-multiple-categories/)并根据多个类别显示产品，但现在我遇到的问题是寻呼机工具栏无法正常工作。我的块代码是：

```
<reference name="content"> 
    <block name="mymodule" type="mymodule/product_listcategories"  template="catalog/product/list.phtml">
        <action method="setCategories">
            <ids>2,3,4</ids>
        </action>
    </block>
</reference> 
```

我还在上面添加了这段代码

```
<block type="catalog/product_list_toolbar" name="product_list_toolbar" template="catalog/product/list/toolbar.phtml">
    <block type="page/html_pager" name="product_list_toolbar_pager"/>
    </block>
    <action method="setToolbarBlockName"><name>product_list_toolbar</name></action>
</block> 
```

它显示工具栏，但工具栏不工作（限制，orderby）。我的块代码是

```
class Mymodule_Block_Product_Listcategories extends Mage_Catalog_Block_Product_List
{
    protected function _getProductCollection()
    {

        $this->_productCollection = Mage::getModel('catalog/product')->getCollection();
        $this->_productCollection->addAttributeToSelect('*');

        if($this->getCategories()!="")
            $this->_productCollection->addCategoriesFilter($this->getCategories());

            return $this->_productCollection;
        }
    }
} 
```

有谁知道问题出在哪里？我想我错过了寻呼机的一些代码？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T12:56:14.720

经过大量搜索后，我得到了解决方案。我不知道它是对还是错，但它解决了我的问题。在我的块上，我创建实例 `$cpBlock = $this->getLayout()->getBlockSingleton('Mage_Catalog_Block_Product_List_Toolbar');` 并访问寻呼机核心功能，如 `$this->_itemPerPage = $cpBlock->getLimit();`。在上面的代码项中，perpage 是总没有要在列表页面上显示的项目。如果您创建自定义模块并从列表块扩展您的块，则此代码有效。谢谢

# iphone - 使用自动引用计数时的内存分配

> ID：14100018
> 
> 赞同：0
> 
> 时间：2012-12-31T09:47:19.387
> 
> 标签：iphone, objective-c, automatic-ref-counting

我在我的项目中使用自动引用计数。我有三个屏幕。在第一个屏幕上，有一个按钮可以在第二个屏幕上显示带有链接的表格视图。当我单击链接时，它会在另一个视图控制器的 Web 视图中打开。我正在使用导航控制器在屏幕之间导航。现在，在分析应用程序时，我正在监视内存分配。我发现第一个屏幕上的活动字节为 5.27，当我单击按钮进入下一个屏幕时，读数为 5.45，当我再次返回第一个屏幕时读数为是 5.36，第一个屏幕上的初始值（5.27）和最终值（5.36）之间的差异很小。很好。但是当我再次进入第二个屏幕并从第二个屏幕打开网页视图中的链接时，读数为 7.93。当我再次导航到第一个屏幕时，读数为 6.57。因此，当我打开网页视图时，第一个屏幕上的初始读数和最终读数之间存在很大差异。我得到读数之间差异的原因是什么？当我得到内存泄漏 0 时，那个 ext 字节在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T10:05:27.007

由于缓存，当你收到内存警告时调用它来释放所有的脂肪

```
 [[NSURLCache sharedURLCache] removeAllCachedResponses]; 
```

当APP启动时，您可以通过以下调用配置缓存

```
 int cacheSizeMemory = 4*1024*1024; 
int cacheSizeDisk = 32*1024*1024; 
NSURLCache *sharedCache = [[NSURLCache alloc] initWithMemoryCapacity:cacheSizeMemory diskCapacity:cacheSizeDisk diskPath:@"nsurlcache"];
[NSURLCache setSharedURLCache:sharedCache]; 
```

# spring - 如何使用 Spring+ jpa 和自定义 UI（如 vaadin）为人工任务实现 JBPM？

> ID：14100019
> 
> 赞同：2
> 
> 时间：2012-12-31T09:47:31.263
> 
> 标签：spring, jpa, jbpm

我想使用**Vaadin ui**与过程中分配给特定用户的**人工任务** 进行交互。我还使用**jpa**来实现持久性，并使用**spring**来创建诸如 taskService、ksesion、kbase 等 bean ......！！我还需要有关如何在特定节点上使用业务域来更新、插入或删除数据的帮助。

# javascript - 无法安装 js-bson

> ID：14100027
> 
> 赞同：2
> 
> 时间：2012-12-31T09:48:18.180
> 
> 标签：javascript, node.js, npm, bson

我正在使用 Windows 7 64 位，试图安装 bson 作为 mongodb 的依赖项。我收到此错误：

```
npm WARN package.json Wochenplaner@0.0.1 No README.md file found!
npm http GET https://registry.npmjs.org/bson
npm http 304 https://registry.npmjs.org/bson

bson@0.1.5 install C:\Users\Administrator\Dropbox\Projekte\Wochenplaner\node_m
odules\bson
node install.js || (exit 0)
CreateProcessW: Das System kann die angegebene Datei nicht finden.
npm ERR! error rolling back Error: ENOTEMPTY, rmdir 'C:\Users\Administrator\Drop
box\Projekte\Wochenplaner\node_modules\bson'
npm ERR! error rolling back bson@0.1.5 { [Error: ENOTEMPTY, rmdir 'C:\Users\Adm
inistrator\Dropbox\Projekte\Wochenplaner\node_modules\bson']
npm ERR! error rolling back errno: 53,
npm ERR! error rolling back code: 'ENOTEMPTY',
npm ERR! error rolling back path: 'C:\Users\Administrator\Dropbox\Projekte
\Wochenplaner\node_modules\bson' }
npm ERR! bson@0.1.5 install: node install.js || (exit 0)
npm ERR! cmd "/c" "node install.js || (exit 0)" failed with 127
npm ERR!
npm ERR! Failed at the bson@0.1.5 install script.
npm ERR! This is most likely a problem with the bson package,
npm ERR! not with npm itself.
npm ERR! Tell the author that this fails on your system:
npm ERR! node install.js || (exit 0)
npm ERR! You can get their info via:
npm ERR! npm owner ls bson
npm ERR! There is likely additional logging output above.

npm ERR! System Windows_NT 6.1.7600
npm ERR! command "C:\Program Files\nodejs\\node.exe" "C:\Program Files\nod
ejs\node_modules\npm\bin\npm-cli.js" "install" "bson"
npm ERR! cwd C:\Users\Administrator\Dropbox\Projekte\Wochenplaner
npm ERR! node -v v0.8.16
npm ERR! npm -v 1.1.69
npm ERR! code ELIFECYCLE
npm ERR!
npm ERR! Additional logging details can be found in:
npm ERR! C:\Users\Administrator\Dropbox\Projekte\Wochenplaner\npm-debug.log
npm ERR! not ok code 0 
```

我得到这个日志： http: [//pastebin.com/B6F2C5um](http://pastebin.com/B6F2C5um)

问题是什么？另外：我尝试安装 0.1.1、0.1.2、0.1.3 等版本。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-02T22:22:42.990

我遇到了同样的问题，并记得我`PATH`最近摆弄了我的变量。它无法运行`cmd.exe`。

添加`c:\windows\system32`到我的`PATH`.

如下（注意节点问题提到了socket.io，当我测试它时也引起了类似的问题）：

[https://github.com/joyent/node/issues/4222](https://github.com/joyent/node/issues/4222)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T10:00:57.153

尝试删除`C:\Users\Administrator\Drop box\Projekte\Wochenplaner\node_modules`并重新安装。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-31T12:41:32.737

我刚刚在我的 Win7（也是 64 位）机器上安装了 bson 包，没有任何问题。

检查以下几点。

*   您的节点可执行文件是否可以从任何地方访问？（检查打开命令行并输入`node`+ Enter，如果弹出shell，你应该没问题）
*   您对相关目标文件夹有足够的访问权限吗？

由于主要错误似乎是`CreateProcessW: Das System kann die angegebene Datei nicht finden.`，我很确定第一点就是问题所在。

您可以通过重新安装 node.js 或手动将节点可执行文件的路径添加到 PATH 环境变量来轻松解决该问题。

# javascript - 如何使这个 javascript 验证工作？

> ID：14100028
> 
> 赞同：0
> 
> 时间：2012-12-31T09:48:23.077
> 
> 标签：javascript, jquery, ajax

在 下`validateMail()`，变量`chump`正在返回`undefined`，但它应该是 true 或 false 值。

我不明白，因为`alert()`两个条件语句下的语句`finalFlash()`工作正常，我在那里得到一个真值或假值。

```
<script>
function validateRecipient()
{
var recipient=document.messageForm.recipient.value;

if (recipient==null || recipient=="")
  {
  document.getElementById("recipientError").innerHTML='<div style="font-size:13px; color:#b94a48; clear:both">Please enter a username</div>';
  document.getElementById("recipient_error").className="control-group error";
  return false;
  }

else
  {
  document.getElementById("recipientError").innerHTML="";
  document.getElementById("recipient_error").className="control-group";
  return true;
  }  

}

function validateMessage()
{
var message=document.messageForm.message.value;
if (message==null || message=="")
  {
  document.getElementById("messageError").innerHTML='<div style="font-size:13px; color:#b94a48; clear:both">Please enter a message</div>';
  document.getElementById("message_error").className="control-group error";
  return false;
  }

else
  {
  document.getElementById("messageError").innerHTML="";
  document.getElementById("message_error").className="control-group";
  return true;
  }    

}

function validateMail()
{
var items = [validateRecipient(), validateMessage(), validateUser()];
var chump = validateUser()
alert(chump)

for (var i in items)
   {
   var item = items[i];
   item
   }

if (validateRecipient() && validateMessage() && validateUser())
   {
   return true;
   }

return false;
}

function validateUser(){
    $.get("/trivia/xhr_test/",
    {
      username: document.messageForm.recipient.value
    },
    function(data){
      return finalFlash(data); // edit suggested by Aamir Adnan
    });
}

function finalFlash(data){
    if (data == "True")
      {
      document.getElementById("recipientError").innerHTML="";
      document.getElementById("recipient_error").className="control-group";
      alert(true)
      return true
      }

    else if (data != null && data != "" && data == "False")
      {
      document.getElementById("recipientError").innerHTML='<div style="font-size:13px; color:#b94a48; clear:both">That username does not exist</div>';
      document.getElementById("recipient_error").className="control-group error";
      alert(false)
      return false
      }
}

</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T10:02:05.567

您的 validateUser 函数启动异步获取请求并立即返回。当 get 完成时调用 finalFlash，但与 validateUser 的返回值无关。

请参阅[如何让 jQuery 执行同步而不是异步的 Ajax 请求？](https://stackoverflow.com/questions/133310/how-can-i-get-jquery-to-perform-a-synchronous-rather-than-asynchronous-ajax-re)了解如何将其转换为同步请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T10:20:07.513

希望此代码对您有所帮助

```
<script>
function validateRecipient()
{
var recipient=document.messageForm.recipient.value;

if (recipient==null || recipient=="")
  {
  document.getElementById("recipientError").innerHTML='<div style="font-size:13px; color:#b94a48; clear:both">Please enter a username</div>';
  document.getElementById("recipient_error").className="control-group error";
  return false;
  }

else
  {
  document.getElementById("recipientError").innerHTML="";
  document.getElementById("recipient_error").className="control-group";
  return true;
  }  

}

function validateMessage()
{
var message=document.messageForm.message.value;
if (message==null || message=="")
  {
  document.getElementById("messageError").innerHTML='<div style="font-size:13px; color:#b94a48; clear:both">Please enter a message</div>';
  document.getElementById("message_error").className="control-group error";
  return false;
  }

else
  {
  document.getElementById("messageError").innerHTML="";
  document.getElementById("message_error").className="control-group";
  return true;
  }    

}

function validateMail()
{
  validateUser();
}

function validateAll(chump){

var items = [validateRecipient(), validateMessage()];

for (var i in items)
   {
   var item = items[i];
   item
   }

if (validateRecipient() && validateMessage() && chump)
   {
   return true;
   }

return false;

}
function validateUser(){
    $.get("/trivia/xhr_test/",
    {
      username: document.messageForm.recipient.value
    },
    function(data){
      validateAll(finalFlash(data)); // edit suggested by Aamir Adnan
    });
}

function finalFlash(data){
    if (data == "True")
      {
      document.getElementById("recipientError").innerHTML="";
      document.getElementById("recipient_error").className="control-group";
      alert(true)
      return true
      }

    else if (data != null && data != "" && data == "False")
      {
      document.getElementById("recipientError").innerHTML='<div style="font-size:13px; color:#b94a48; clear:both">That username does not exist</div>';
      document.getElementById("recipient_error").className="control-group error";
      alert(false)
      return false
      }
}

</script> 
```

在这里，这个脚本将帮助你做你想做的事。您所做的错误是您在 validateUser 方法上调用了 ajax，并且您已经调用了两次。每次触发 ajax 请求时，它都会异步执行，其余代码将永远不会等待 ajax 调用完成。因此，我进行了必要的更改，以允许代码在 ajax 请求完成后执行。

# jsf - 托管 bean 的相同方法被调用两次

> ID：14100029
> 
> 赞同：0
> 
> 时间：2012-12-31T09:48:23.863
> 
> 标签：jsf, jsf-1.2

我正在使用 JSF1.2 开发分页逻辑，在此过程中，我有 4 个链接，分别指向与结果相对应的第一页、上一页、下一页和最后一页。我在“搜索”页面中输入搜索条件，然后单击“提交”以获取一些记录。我有一个与每条记录对应的查看链接，可以查看完整的详细信息。所以我有两个托管 bean，一个用于搜索/分页功能，另一个用于查看完整的记录详细信息。

那有什么问题呢？

当我搜索记录时，分页工作得很好。但是，当我查看记录的详细信息并返回搜索页面时，我发现每次单击下一步按钮时，next() 方法都会被调用两次。

有什么解决办法吗？

```
The code is as follows:-

Inside search:-
 <h:commandLink value="#{msg['heading.nextLink']}"
                                            binding="#{searchRoutesForView.nextLink}" 
                                            actionListener="#{searchRoutesForView.next}">
                                        </h:commandLink>

Inside SearchManagedbean:-

public void next(ActionEvent actionEvent) {

        if ((pointer + noOfRecordsToBeDisplayed) >= readConfig.length) {
            readRoutingResponse.setReadConfig(Arrays.copyOfRange(readConfig,
                    pointer, readConfig.length));
            pointer = readConfig.length;
            System.out.println("pointer inside next =" + pointer);
            setOrDisableLinks(false, false, true, true);
        } else {
            readRoutingResponse.setReadConfig(Arrays.copyOfRange(readConfig,
                    pointer, pointer + noOfRecordsToBeDisplayed));
            pointer += noOfRecordsToBeDisplayed;
            System.out.println("pointer inside next -- else =" + pointer);
            setOrDisableLinks(false, false, false, false);
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T12:16:30.047

请看一下[JSF的生命周期](http://balusc.blogspot.in/2006/09/debug-jsf-lifecycle.html)

下面的方法可能不是最好的..

```
public void next(ActionEvent actionEvent)
{
   if((pointer + noOfRecordsToBeDisplayed) >= readConfig.length) && (isVisitedOnce == false))
     {
        visitedOnce = true //set one boolean indicating this method is already visited 
      }
} 
```

如果 bean 在请求范围内，这将不起作用。

# java - Java 中的消息处理程序 - Flash 套接字服务器

> ID：14100037
> 
> 赞同：0
> 
> 时间：2012-12-31T09:49:15.637
> 
> 标签：java, actionscript-3, flash

所以我试图在开始项目之前的停机时间做一些研究。

[我正在](http://www.broculos.net/en/article/how-make-multi-client-flash-java-server)和朋友一起学习本教程，以尝试制作基于 Flash 的在线游戏。我在做项目的 flash 方面，她在做 java 方面。在查看此内容时，我无法在 java 服务器代码上找到消息处理程序。

这是有道理的，因为本教程试图尽可能简单易懂。

[我读过的另一个教程（但没有使用，因为它的服务器由外部方处理）使用了我无法使用的内置消息处理程序。](http://playerio.com/documentation/tutorials/building-flash-multiplayer-games-tutorial/gamebasics)

所以我想知道的是如何构建一个可以接收具有不同数量参数的消息的消息处理程序，以及如何在闪存中格式化初始消息？

从 PLAYER.IO 教程到专有系统的理解转变是一个巨大的飞跃，因此非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T10:00:40.257

第一个教程通过简单地创建一个扩展 Thread 的类来实现服务器。它在每个客户端连接上启动一个新实例，`PolicyServerConnection`该类负责反序列化从客户端接收到的数据并为请求提供服务。这是一个非常简单和低级的解决方案。在这种情况下，您需要定义客户端如何将请求发送到服务器，它将如何序列化参数以及服务器将如何解释它们。

您可以改为使用例如 BlazeDs，它可以导出方法和参数，并提供基础设施来反序列化客户端的请求并将其路由到带有接收到的参数的适当方法。

# java - 使用任务调度程序运行 java jar（来自批处理文件）

> ID：14100042
> 
> 赞同：3
> 
> 时间：2012-12-31T09:49:28.917
> 
> 标签：java, jar, windows-server-2008, scheduled-tasks, executable-jar

我正在安排一个任务（使用 Windows 任务调度程序），它只运行一个批处理文件。

这批正在运行一个带有简单“Java -jar test.jar”的 jar 文件（Java 程序）。

当我从命令行手动运行脚本时，java程序运行良好，没有显示异常。

但是当任务计划执行相同的操作（调用命令）时，java程序以异常结束：我的jar中的一个类的“ClassNotFoundException”。

**这是什么原因造成的？从命令行和任务调度程序调用 jar 时有什么区别？**

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-31T09:54:03.760

我认为“当前目录”可能不同，因此 java 根本找不到 jar。在你的 .bat 的第一行，你可以`cd \path\that\you\expect`在执行 java 之前做一个吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T10:06:07.943

你`jar`有任何依赖吗？此外，了解您的文件夹结构以及如何在命令行中运行它会很有帮助。
无论如何，根据您的情况，您可以按照以下方式进行操作：

```
cd /path/to/exec/folder   // set current directory
java -cp /all-classpath-jars/and-or-bin-folders/ test.jar your.package.MainClass [args...] 
```

如果您正确指定所需的一切，这必须有效。

# ios - 从地址簿中邀请朋友示例 xcode ios

> ID：14100046
> 
> 赞同：1
> 
> 时间：2012-12-31T09:49:46.587
> 
> 标签：ios, xcode, addressbook

需要在我的应用中邀请我的朋友。我收到电子邮件、电话号码和姓名，但不正确。需要获取与姓名相关的每个联系人。如果姓名不可用，则显示空白。数据应显示在表格视图中。

# jsp - 显示标签错误

> ID：14100047
> 
> 赞同：0
> 
> 时间：2012-12-31T09:49:54.107
> 
> 标签：jsp, displaytag

我有一个具有以下属性的对象列表

公共类 ViewTestCasesBean {

```
private String testcaseName;
private String subject;
private String description;
private List<TestCaseDetailsBean> testList = new ArrayList<TestCaseDetailsBean>();

// GETTERS AND SETTERS SECTION.......///////

public String getTestcaseName() {
    return testcaseName;
}

public void setTestcaseName(String testcaseName) {
    this.testcaseName = testcaseName;
}

public String getSubject() {
    return subject;
}

public void setSubject(String subject) {
    this.subject = subject;
}

public String getDescription() {
    return description;
}

public void setDescription(String description) {
    this.description = description;
}

public List<TestCaseDetailsBean> getTestList() {
    return testList;
}

public void setTestList(List<TestCaseDetailsBean> testList) {
    this.testList = testList;
} 
```

}

现在我的操作代码是......

```
 public String execute() {

    detailsList = viewTestCasesTransaction.fetchTestCases();
    session.put("testcaseList", detailsList);

    if (detailsList.size() > 0) {

        return SUCCESS;
    }
    return ERROR;
} 
```

这里的 detailsList 是上面要显示在 display 标签中的对象的 List。

我尝试了以下

```
 <jsp:root version="1.2" xmlns:jsp="http://java.sun.com/JSP/Page"
xmlns:c="urn:jsptld:http://java.sun.com/jstl/core">
<%@page import="org.apache.jasper.tagplugins.jstl.core.Import"%>
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<%@ page import="java.util.*"%>
<%@ page import="com.harmony.cloud.bean.TestCaseDetailsBean"%>
<%@ page import="com.harmony.cloud.action.ViewTestCasesAction"%>

<%@ page import="java.sql.*"%>
<%@ page isELIgnored="false"%>

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<%@ taglib uri="/struts-tags" prefix="s"%>
<%@ taglib uri="http://displaytag.sf.net" prefix="display"%>

<html>
   <head>
 <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">

 <title>Test Cases List</title>

  </head>
   <body>
<%session.getAttribute("testcaseList"); %>
<display:table name="detailsList" id="parent">
    <display:column property="testcaseName" />
    <display:column property="subject" />
    <display:column property="description" title="Comments" />

    <c:set var="nestedName"
        value="detailsList[${parent_rowNum -1}].testcaseList}" />
 <display:table  name="${nestedName}" id="child${parent_rowNum}" >
    <display:column title="Steps">
</display:table>
</display:column>

  <display:setProperty name="paging.banner.placement" value="top" />

        </display:table>

  </body>
</html> 
```

但是出现以下错误......

org.apache.jasper.JasperException: /testCasesView.jsp (line: 3, column: 3) 元素的内容必须由格式良好的字符数据或标记组成。org.apache.jasper.compiler.DefaultErrorHandler.jspError(DefaultErrorHandler.java:42) org.apache.jasper.compiler.ErrorDispatcher.dispatch(ErrorDispatcher.java:408) org.apache.jasper.compiler.ErrorDispatcher.jspError(ErrorDispatcher. java:89) org.apache.jasper.compiler.JspDocumentParser.parse(JspDocumentParser.java:207) org.apache.jasper.compiler.ParserController.doParse(ParserController.java:226) org.apache.jasper.compiler.ParserController。 parseDirectives(ParserController.java:119) org.apache.jasper.compiler.Compiler.generateJava(Compiler.java:193) org.apache.jasper.compiler.Compiler.compile(Compiler.java:373) org.apache.jasper。 compiler.Compiler.compile（编译器。

编码有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T17:40:11.263

**注意以下元素：**

1)`<jsp:root ...>`没有结束标签

2）值表达式有额外的花括号和类属性`testcaseList`不存在`<c:set var="nestedName" value="detailsList[${parent_rowNum -1}].testcaseList}" />`，所以将其更改为`<c:set var="nestedName" value="detailsList[${parent_rowNum -1}].testList" />`

3）显示：嵌套表缺少`property`属性的列标记`<display:column title="Steps">`

4）将doctype放在文件的第一行`<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">`

5）这只是一个问题，您正在检索会话属性但没有分配它。这是故意的吗？

来自 displaytag-examples-1.2.war -> [example-nestedtables.jsp 的示例](http://www.jarvana.com/jarvana/view/displaytag/displaytag-examples/1.2/displaytag-examples-1.2.war!/example-nestedtables.jsp?format=ok)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T08:35:21.600

如果您使用的是 Eclipse IDE，当您创建 JSP 时，请按照向导创建一个带有 html 标记或 xhtml 标记的 JSP。您不想创建带有 JSP 2.0 特定标记、xhtml 标记的 JSP。项目 -> 新建 -> JSP 文件 -> 选中使用 JSP 模板 -> 带有 xhtml/html 标记的新 JSP 文件。

# java - 每次点击过滤器时实例化一个新对象

> ID：14100049
> 
> 赞同：0
> 
> 时间：2012-12-31T09:49:58.497
> 
> 标签：java, servlet-filters

我有一个应用程序，每次点击特定页面时都需要查询数据库。

我已经为此页面实现了一个过滤器。过滤器进行查询，设置属性，然后将请求传递给 jsp。

通过对象查询数据库。目前，每次点击过滤器时，我都会实例化一个新对象。

有没有解决的办法？我可以创建一个可以重复使用的对象吗？

在 doBeforeProcessing 方法中，我有这个：

```
 doBeforeProcessing(ServletRequest request, ServletResponse response)
    throws IOException, ServletException {
        ServletContext ctx = this.getFilterConfig().getServletContext();
        String status = (new GetData()).getStatus();
        ctx.setAttribute("msg",status);
    } 
```

我的主要烦恼是是否每次都以正确的方法创建一个新对象。因为，最终我将在相当多的其他页面上使用相同的方法，并且我担心内存问题。

# wordpress - 带有apply_filters的Wordpress跳过功能？

> ID：14100050
> 
> 赞同：0
> 
> 时间：2012-12-31T09:50:11.287
> 
> 标签：wordpress, translation

我正在使用一个翻译插件，它为 the_title、the_content 和其他东西创建了一个钩子。除了不显示标题的一点代码外，一切正常。它使用以下代码：

```
$page_title = apply_filters('the_title',get_the_title()); 
```

如果我尝试使用[get_the_title()](http://codex.wordpress.org/Function_Reference/get_the_title)或[the_title()](http://codex.wordpress.org/Function_Reference/the_title)，它会中断。

应用过滤器有什么作用，我如何让它不跳过翻译插件的钩子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T15:30:14.287

`the_title`并且`the_content`也存在于 Wordpress 核心中。它们被用于许多事情。如果您知道什么是钩子，那么为什么这样的行很有用是显而易见的。

过滤钩子和动作钩子本质上是洗衣清单。您可以将函数一个接一个地放在一个钩子上，这样它们就形成了一个队列，当这个钩子被（分别）调用时，`do_action`Wordpress`apply_filters`将一个接一个地取消队列。正如它所做的那样，它将执行它们。

```
add_action( 'test', 'func1' );
add_action( 'test', 'func2' );
do_action( 'test' ); // Executes func1 and then func2 
```

动作和过滤器之间的区别在于，虽然它们都可以接受值，但只有过滤器会返回修改后的值。行动做一些本身很重要的事情；过滤器接受一个值并返回它的修改版本，以后可以使用。例如，要将打印的每个标题大写，`the_title`我们可以使用以下代码：

```
add_filter( 'the_title', function( $title ) {
    return strtoupper( $title );
}); 
```

因为我们知道所有被钩住`the_title`的函数——钩子而不是函数——只会被`apply_filters`我们期望在函数中的某个地方找到它来执行`the_title`。实际上，该功能基本上是`echo get_the_title`这样的，`get_the_title`外观如下：

```
function get_the_title( $id = 0 ) {
        $post = &get_post($id);

        $title = isset($post->post_title) ? $post->post_title : '';
        $id = isset($post->ID) ? $post->ID : (int) $id;

        if ( !is_admin() ) {
                if ( !empty($post->post_password) ) {
                        $protected_title_format = apply_filters('protected_title_format', __('Protected: %s'));
                        $title = sprintf($protected_title_format, $title);
                } else if ( isset($post->post_status) && 'private' == $post->post_status ) {
                        $private_title_format = apply_filters('private_title_format', __('Private: %s'));
                        $title = sprintf($private_title_format, $title);
                }
        }
        return apply_filters( 'the_title', $title, $id );
} 
```

我发布整个函数是因为学习在源代码中寻找钩子对于新兴的 Wordpress 开发人员来说至关重要。源代码中充满了钩子，因此它们可用于修改 Wordpress 内置函数的许多方面。现在您已经找到`apply_filters( 'the_title', ... )`了源代码，您可以体会到它的重要性！

`the_title`简单地回显给它的值，您可以通过将过滤器附加到钩子`get_the_title`来修改甚至替换返回的值！`get_the_title``the_title`

现在，我希望你不要认为我到目前为止所写的一切都是无偿的。事实上，现在我们可以轻松回答您的主要问题，即“为什么它不起作用？”

首先，你永远不能传递`the_title`给一个函数！这就像写作一样`somefunction( $var1, echo $var2, $var3 )`。我们不能使用 echo 将值传递给函数，因为 echo 会将其输出发送到浏览器。

更好的尝试是你发布的那个

```
$page_title = apply_filters('the_title',get_the_title()); 
```

但正如我们所见，它`get_the_title`已经应用于`the_title`它的返回值。您只是再次应用所有这些功能。`the_title`如果您附加了一些自定义过滤器，或者它什么都不做，它可能会导致奇怪。所以它要么混淆了结果，要么是无缘无故的。这就是为什么你应该这样做：

```
$page_title = get_the_title(); 
```

现在，你还说

> 一切正常，除了一点代码不显示标题

这很令人困惑，因为我们不希望变量赋值输出任何东西！要输出标题，您可以这样做

```
$page_title = get_the_title();
echo $page_title; 
```

但正如我们所了解的，这实际上（查看源代码中的细微差别）与以下内容相同：

```
the_title(); 
```

所以我写了很多，只是为了得出你可能想单独使用的结论`the_title`。但我希望这也能成为过滤器/动作挂钩的一个很好的资源。

欢迎提出任何问题。

# java - 从界面停止活动

> ID：14100053
> 
> 赞同：1
> 
> 时间：2012-12-31T09:50:37.790
> 
> 标签：java, android, android-activity

我有一个用于制作某些东西的按钮的 onClickListener，然后我想停止活动，但由于我在界面上，因此无法获得活动 Intent。

这就是它的样子：

```
 b1.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) 
        {
            //blah blah blah
            this.stopService(this.getIntent()); // <-- impossiblee, compliation error.
        }
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T09:53:27.897

采用

```
MyActivity.this.getIntent() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T09:52:38.523

要停止 Activity，您将需要使用`finish()`Activity 方法

```
 b1.setOnClickListener(new View.OnClickListener() {

    @Override
    public void onClick(View v) 
    {
        //blah blah blah
        Current_Activity.this.finish();
    }
  }); 
```

以及`stopService`用于停止服务而不是 Activity 的服务方法

**编辑：**如果你想停止服务然后使用

```
 Current_Activity.this.stopService(Current_Activity.this.getIntent()); 
```

# javascript - 在 NetSuite 中，如何根据账单编写授权返回按钮的脚本..？

> ID：14100057
> 
> 赞同：0
> 
> 时间：2012-12-31T09:50:59.070
> 
> 标签：javascript, netsuite

这是一个与 netsuite 和 javascript 以及套件脚本相关的问题。在这个问题中，我需要一个关于如何在 netsuite 脚本中创建新按钮的提示，如果有人能用更少的代码解释，源代码会更好......:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T17:20:44.637

在**Suitlet 脚本中**

```
var form = nlapiCreateForm('Form Title');
form.addSubmitButton('Proceed'); 
```

在**用户事件脚本中**

```
function beforeLoadFunction(type, form){
  form.addButton('custpage_btn_btnaction', 'Button Action');
} 
```

# http - 如何在运行 localhost squid 代理时通过主机名访问 localhost？

> ID：14100061
> 
> 赞同：1
> 
> 时间：2012-12-31T09:51:49.210
> 
> 标签：http, networking, iis-7, squid

我可以通过 localhost 代理访问 localhost:49250。我可以在没有代理的情况下访问 myhost:49250。如何通过 localhost squid 代理访问 myhost:49250？

鱿鱼2.7

# solr - SOLR (lucene) XML 支持

> ID：14100062
> 
> 赞同：0
> 
> 时间：2012-12-31T09:51:55.930
> 
> 标签：solr, full-text-search

关于 SOLR 作为全文搜索引擎，我正在寻找有关它对 XML 文档的支持的文档。[1] 它在 XPath 中是否有任何支持（从使用 XPath 概念询问“字段”的角度来看）？[2] 是否支持 XQuery 查询？[3] 它有层次结构支持吗？例如，假设我得到以下 XML

```
<A>
  <B>kdflsdk</B>
  <C>
    <B>222</B>
  </C>
</A> 
```

有没有一种方法可以查询 C 标签内的 222，或者查询 B 元素范围内的 kdflsdk？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T17:22:39.660

> 我正在寻找有关它对 XML 文档的支持的文档。

您最好使用`XsltUpdateRequestHandler`[1] 来处理任意 XML 文档，并使用`DIH XPathEntityProcessor`[2] 来批量索引 XML 文档。这两种技术都有很好的文档记录——对于初学者来说，wiki 页面应该足以满足您的即时需求。

> 它在 XPath 中是否有任何支持（从使用 XPath 概念询问“字段”的角度来看）？它对 XQuery 查询有任何支持吗？

您可能想深入了解 Solr 索引如何工作的基础知识 [3]...但基本上，当您将文档摄取到 Solr 索引时，您是在使其可被 Solr 搜索；这就是 Solr 具有特定摄取格式的原因 [4]。一旦你索引它们，就忘记你的源文件的结构。

> 它有层次结构支持吗？例如，假设我得到以下 XML

Solr 隐含地为您处理这个问题；索引数据时考虑“Solr”——一旦索引数据，就使用 Solr API 发出查询。

> 有没有一种方法可以查询 C 标签内的 222，或者查询 B 元素范围内的 kdflsdk？

这里需要注意几点：
1\. 在将 XML 文件格式提取到 Solr 索引期间，您将 XML 文件格式展平
2\. Solr 接受 HTTP 请求，因此您可能会重命名`/A/B/C/B`为其他名称，因为您已经有一个二级 B 标记，然后发出一个类似于下面的 HTTP 请求，用于获取“kdflsdk”的第三级 B 标记的值....

`http://localhost:8983/solr/select?q=B:kdflsdk&fl=CB`

您必须阅读此 [5] 以了解如何查询 Solr。

[1] [http://wiki.apache.org/solr/XsltUpdateRequestHandler](http://wiki.apache.org/solr/XsltUpdateRequestHandler)
[2] [http://wiki.apache.org/solr/DataImportHandler#XPathEntityProcessor](http://wiki.apache.org/solr/DataImportHandler#XPathEntityProcessor)
[3] [http://www.solrtutorial.com/solr-in -5-minutes.html](http://www.solrtutorial.com/solr-in-5-minutes.html)
[4] [http://wiki.apache.org/solr/UpdateXmlMessages](http://wiki.apache.org/solr/UpdateXmlMessages)
[5] [http://wiki.apache.org/solr/SolrQuerySyntax](http://wiki.apache.org/solr/SolrQuerySyntax)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T10:52:31.727

You can index the data using [DIH for XML](http://wiki.apache.org/solr/DataImportHandler#Usage_with_XML.2BAC8-HTTP_Datasource) and use Solr to search over the fields.

# php - 复杂的 Preg_Match - 找到关键字后匹配 500 个字符，但直到下一个换行符才开始

> ID：14100071
> 
> 赞同：0
> 
> 时间：2012-12-31T09:52:18.517
> 
> 标签：php, preg-match, substr

首先解释一下我是 php 新手和我对 preg_match 非常陌生并且觉得它很混乱，我试图做的是找到一个关键字：异常：然后从下一行开始拉出 300 个字符

我已经为此准备了一个预匹配但想改进它，我正在做的是从关键字中提取 300 个字符，但问题是关键字之后是异常名称，然后在下一行是代码错误，异常可以用任意数量的语言编写，但异常后的代码错误与语言无关，所以我想过滤掉异常，因为它因语言而异，所以我知道稍后比较时异常是否 100% 匹配。

以下是一些异常示例：

```
Exception: System.Runtime.InteropServices.COMException (0x800401D0): OpenClipboard Failed (Exception from HRESULT: 0x800401D0 (CLIPBRD_E_CANT_OPEN))
at System.Runtime.InteropServices.Marshal.ThrowExceptionForHRInternal(Int32 errorCode, IntPtr errorInfo)
at System.Windows.Clipboa

exception: Specified cast is not valid.
Query:Select * from TourneyData where Player_id = 1412
14:14:18.868 [SetCurrentPlayer:12 - DatabaseBase.HandleDatabaseConnectionException] 4: System.InvalidCastException: Specified cast is not valid.
at NpgsqlTypes.NpgsqlTimeStamp.op_I

Exception: System.NullReferenceException: Object reference not set to an instance of an object.
at System.Windows.Forms.Application.ThreadContext.ExitCommon(Boolean disposing)
at System.Windows.Forms.Application.ExitInternal()
at System.Windows.Forms.Application.Exit(C 
```

所以我打算如何解决代码错误是在关键字异常之后的下一行显示所有信息：

在最后一个示例中，我想要的输出是：

```
at System.Windows.Forms.Application.ThreadContext.ExitCommon(Boolean disposing)
at System.Windows.Forms.Application.ExitInternal()
at System.Windows.Forms.Application.Exit(C 
```

好的，这是我已经用来在关键字后面收集 300 个字符的代码：

```
// Snippet length constant
define(SNIPPET_LENGTH, 300);

$pos = stripos($body,$keyword);   
$snippet_pre = substr($body, $pos, SNIPPET_LENGTH); 
```

现在我还在一些函数中使用 preg_match 来提取信息，例如代码有这个查找日志信息：

```
12:19:42.787 [Main:1 - Bootstrapper.LogSystemInfo] Current culture: it-IT
12:19:42.865 [Main:1 - Bootstrapper.LogSystemInfo] Operating System Name: Microsoft Windows 7 Home Premium 
12:19:42.865 [Main:1 - Bootstrapper.LogSystemInfo] Operating System Architecture: 64 bit
12:19:42.865 [Main:1 - Bootstrapper.LogSystemInfo] Operating System Service Pack: Service Pack 1 
```

这是 preg_match，仅包括因为它可能有助于区分如何区分换行符，因为这会捕获换行符之前的所有信息，但我无法弄清楚如何在换行符之后获取 300 个字符：

```
 preg_match('/Current culture: (.*)/', $body, $culture_pre);
preg_match('/Operating System Name: (.*)/', $body, $os_name_pre);
preg_match('/Operating System Architecture: (.*)/', $body, $os_bit_pre);
preg_match('/Operating System Service Pack: (.*)/', $body, $os_service_pack_pre); 
```

如果您需要任何其他信息，请告诉我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T10:36:46.823

`preg-match`并且当遇到 a `\n`or时，所有正则表达式通常都很难处理`\r\n`。

您可以使用`m`修饰符来解决某些情况，但它唯一要做的就是更改保留字符的行为`$`并使`^`它们匹配字符串的结尾或开头，`\n`因为它会将字符串拆分为不同的子字符串。我认为这对您的问题不起作用，但您可以尝试。

还有其他可能的方法来解决这个问题，尽管并非所有方法都是完全干净的：

1-简单的方法：在应用正则表达式之前删除`\r\n`or ：`\r`

```
$chars=array("\r\n", "\n", "\r");
$string=str_replace($chars, '', $string); 
```

正则表达式将像这样工作，但如果你想保持多行，你会丢失字符串的格式。

2-简单且不那么干净的方法：将 更改为`\n`您知道它不会出现在字符串中的特殊字符（例如`#`），应用正则表达式，再次将特殊字符更改为`\n`. 这不是很漂亮，但如果你的时间很短，它会起作用。

3-不是那么简单，干净的方式：使用`\n`as 键拆分字符串，逐行读取`preg_match()`，如果匹配，则保存以下 2 或 3（或您需要保存的任何数字）行。

# iphone - Storyboard 中的 Container View 不允许超过一个 segue

> ID：14100074
> 
> 赞同：-1
> 
> 时间：2012-12-31T09:52:34.007
> 
> 标签：iphone, ios, uiviewcontroller, storyboard, container-view

![在此处输入图像描述](../Images/ef2da7b987d4fc435f5c24cb77d64713.png) 我尝试为 Container 视图添加更多子项，但阻止我并且只进行一个 segue。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T12:06:42.727

从视图控制器而不是从子视图进行连接。

# xml - 需要使用 Xpath 替换 XML 文件中属性的值

> ID：14100077
> 
> 赞同：2
> 
> 时间：2012-12-31T09:52:45.927
> 
> 标签：xml, powershell, xpath, replace, web-config

下面是源/目标 XML(Web.Config) 文件的内容，我必须在其中替换属性的值。这需要为多个配置文件完成，因此需要您的帮助才能使用 powershell 完成此操作。我确实尝试过使用stackOverFlow中可用的替换字符串的代码 - 但dint使它..

```
<?xml version="1.0"?>
<!--
For more information on how to configure your ASP.NET application, please visit
http://go.microsoft.com/fwlink/?LinkId=169433
-->

<configuration>
<connectionStrings>

<add name="PrcEntities"
   providerName="System.Data.SqlClient"
   connectionString="Server=DDD05DB01,63518;Database=BBBDB001;Trusted_Connection=true;multipleactiveresultsets=true;Pooling=false"/>

<add name="CoreItemContext"
 providerName="System.Data.SqlClient"
 connectionString="Server=DDD15DB03,63520;Database=BBBDB002;Trusted_Connection=true;multipleactiveresultsets=true;Pooling=true"/>

</connectionStrings>
..

..

....

</configuration> 
```

这是我的 Powershell 代码，用于从上述 XML 文件中查询名为“ConnectionString”的属性

```
$Path = "C:\Ps\Web.config" 
$con="connectionString"   
[xml]$Types = Get-Content $Path 
Select-Xml -Xml $Types -XPath "//add" | Select-Object -ExpandProperty Node|Select-Object name,$con | Format-List 
```

这将导致：

*名称：PrcEntities* 连接字符串：服务器=DDD05DB01,63518；数据库=BBBDB001；Trusted_Connection=true；多个活动结果集=真；池=假

*名称：CoreItemContext* 连接字符串：服务器=DDD15DB03,63520；数据库=BBBDB002；Trusted_Connection=true；多个活动结果集=真；池=真

现在，我想用以下细节替换属性“ **connectionString** ”的值：Server=DBD05DB01,63518;Database=DDBDB001;Trusted_Connection=true;multipleactiveresultsets=true;Pooling=false 在这两个地方（PrcEntities & CoreItemContext）

此更改应保存到相同的源文件。请帮我解决这个问题！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-31T13:04:52.383

```
$path = "D:\Web.Config"
[xml]$xml = Get-Content $path 

$xml.configuration.connectionStrings.add | Foreach-Object {
    $_.connectionString = 'Server=DBD05DB01,63518;Database=DDBDB001;Trusted_Connection=true;multipleactiveresultsets=true;Pooling=false'
}

$xml.Save($path) 
```

# c++ - 检查是否在 unix 中加载了共享对象

> ID：14100079
> 
> 赞同：1
> 
> 时间：2012-12-31T09:52:54.497
> 
> 标签：c++, unix, shared-libraries

在编写 Windows 应用程序时，我可以使用以下方法检查当前进程是否加载了特定的 dll：

```
GetModuleHandle(TEXT("Dll Name")); 
```

如何在 unix 系统中获得相同的功能？也就是说，是否有任何常见的系统调用可以为我提供有关当前进程（动态）加载的共享对象的一些信息？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T13:46:20.397

寻找：`dlopen`_`RLTD_NOLOAD`

> **`RTLD_NOLOAD`（从 glibc 2.2 开始）**
> 
> 这不会加载库。这可用于测试库是否已经常驻（如果不是则`dlopen()`返回，或者如果库是常驻的，则返回该库的句柄）。`NULL`

# android - 我可以更改android wifi扫描参数吗？

> ID：14100082
> 
> 赞同：3
> 
> 时间：2012-12-31T09:53:15.420
> 
> 标签：android, wifi

似乎是一个简单的问题，但我无法轻易找到答案......

当我进行 wifi 扫描 ( `wifi.startscan()`) 时，我可以控制它的运行方式吗？
我可以控制它搜索的频道吗？
它在每个频道中停留的持续时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-10T16:28:13.923

If you use the shell and are willing to install `iw`, you can at least [control the frequencies](https://stackoverflow.com/questions/10680867/android-customize-wifi-scan/17028425#17028425) you scan. I'm not sure about the duration though.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-30T16:40:52.577

这可能来得太晚了，但这里是：我在今年的 PERCOM 会议上阅读了一篇论文，名为“Incremental Wi-Fi Scanning for Energy-Efficient Localization”。他们基本上根植了 Android 手机并更改了 API，以便他们可以完全完成您所描述的内容（出于能源管理原因，仅在某些频率下进行扫描）。

# php - PHP表单验证不起作用

> ID：14100084
> 
> 赞同：-3
> 
> 时间：2012-12-31T09:53:26.680
> 
> 标签：php

我有一个 html 注册表单，我在其中使用 php 设置验证。这是行不通的。如果我把这个函数放在我的 signup.php 表单中，那么它就不起作用了。但是当我删除这个函数**inputvalid()**然后它工作。

**Function.php 页面**

```
function inputvalid($para){
mysql_real_escape_string(htmlspecialchars(trim($para)));
return;
} 
```

**Signup.php 页面**

```
$fname = inputvalid($_POST['fname']);
$lname = inputvalid($_POST['lname']); 
```

如果它是

```
$fname = $_POST['fname']; 
```

然后它的工作。为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T09:56:03.307

添加`return`关键字以从您的函数中返回一些值

```
function inputvalid($para){
    return mysql_real_escape_string(htmlspecialchars(trim($para)));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T09:56:12.567

**你没有**从你的函数中返回任何东西，像这样使用，

```
function inputvalid($para){
  return mysql_real_escape_string(htmlspecialchars(trim($para)));
} 
```

# c++ - 二进制-十进制负位设置

> ID：14100090
> 
> 赞同：0
> 
> 时间：2012-12-31T09:54:16.740
> 
> 标签：c++, binary, decimal

如何判断二进制数是否为负？

目前我有下面的代码。它可以很好地转换为二进制。转换为十进制时，我需要知道最左边的位是否为 1 以判断它是否为负数，但我似乎不知道该怎么做。

另外，我怎样才能让它返回一个整数，而不是让我的 Bin2 函数打印 1 和 0？我不想将它存储在字符串中，然后转换为 int。

编辑：我使用的是 8 位数字。

```
int Bin2(int value, int Padding = 8)
{
    for (int I = Padding; I > 0; --I)
    {
        if (value & (1 << (I - 1)))
            std::cout<< '1';
        else
            std::cout<<'0';
    }

    return 0;
}

int Dec2(int Value)
{
    //bool Negative = (Value & 10000000);

    int Dec = 0;
    for (int I = 0; Value > 0; ++I)
    {
        if(Value % 10 == 1)
        {
            Dec += (1 << I);
        }
        Value /= 10;
    }

    //if (Negative) (Dec -= (1 << 8));

    return Dec;
}

int main()
{
    Bin2(25);
    std::cout<<"\n\n";
    std::cout<<Dec2(11001);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T10:50:18.200

我完全不清楚这是否是 OP 正在寻找的，但值得一试：

如果您知道有符号`int`中的值应该表示有符号的 8 位值，则可以将其拆开，将其存储在有符号的 8 位值中，然后将其提升回`int`像这样的本机有符号值：

```
#include <stdio.h>

int main(void)
{
    // signed integer, value is 245\. 8bit signed value is (-11)
    int num = 0xF5;

    // pull out the low 8 bits, storing them in a signed char.
    signed char ch = (signed char)(num & 0xFF);

    // now let the signed char promote to a signed int.
    int res = ch;

    // finally print both.
    printf("%d ==> %d\n",num, res);

    // do it again for an 8 bit positive value
    //  this time with just direct casts.
    num = 0x70;
    printf("%d ==> %d\n", num, (int)((signed char)(num & 0xFF)));
    return 0;
} 
```

**输出**

```
245 ==> -11
112 ==> 112 
```

*那*是你想要做的吗？简而言之，上面的代码将把位于底部的`num`8 位，将它们视为有符号的 8 位值，然后将它们提升为有符号的 native `int`。结果是您现在不仅可以“知道” 8 位是否为负数（因为如果是负数，则 res 将为负数），您还可以`int`在此过程中将 8 位有符号数作为本机。

另一方面，如果您关心的只是第 8 位是否在 input 中设置`int`，并且应该表示负值状态，那么为什么不只是：

```
int IsEightBitNegative(int val)
{
    return (val & 0x80) != 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T09:58:46.333

您正在错误地检查负值。请改为执行以下操作：

```
bool Negative = (value & 0x80000000); //It will work for 32-bit platforms only 
```

或者可能只是将它与 0 进行比较。

```
bool Negative = (value < 0); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-31T09:59:28.860

为什么不直接比较一下`0`。应该可以正常工作，几乎可以肯定你不能以比编译器更有效的方式来做到这一点。

# javascript - Angularjs 分页指令

> ID：14100092
> 
> 赞同：7
> 
> 时间：2012-12-31T09:54:42.883
> 
> 标签：javascript, angularjs, directive

我正在尝试使用[simplePagination](http://flaviusmatis.github.com/simplePagination.js/) 中使用的概念编写一个指令来生成分页链接，上一个和下一个链接是唯一生成的链接，单击它们会产生错误：

```
 Uncaught SyntaxError: Unexpected token : 
```

这是小提琴[http://jsfiddle.net/kelvo/zZURe/](http://jsfiddle.net/kelvo/zZURe/)

## 编辑 1

得到了其余的链接来显示，但双向绑定“=”似乎不起作用。

这是新的小提琴[http://jsfiddle.net/kelvo/zZURe/7/](http://jsfiddle.net/kelvo/zZURe/7/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-31T11:14:40.917

您正在更新 Angular 之外的一段代码，需要让 Angular 知道重新处理自己。

```
 $scope.selectPage = function(pageIndex) {
            $scope.currentPage = pageIndex;
            $scope.draw();
            $scope.$apply();                        
        } 
```

我添加了 $scope.$apply(); 现在 currentPage 在输入中正确更新。以下是有关 $apply 方法的文档：[http ://docs.angularjs.org/api/ng.$ro​​otScope.Scope#$apply](http://docs.angularjs.org/api/ng.$rootScope.Scope#$apply)

**jsfiddle**：http: [//jsfiddle.net/zZURe/14/](http://jsfiddle.net/zZURe/14/)

# python - 什么相当于nodejs中的Python“pickle”

> ID：14100093
> 
> 赞同：13
> 
> 时间：2012-12-31T09:54:47.713
> 
> 标签：python, node.js, amqp

Python 的功能之一是**pickle**函数，它允许您存储任意任何内容，并将其完全恢复为原始形式。一种常见的用法是获取一个完全实例化的对象并将其腌制以备后用。在我的情况下，我有一个不可序列化的 AMQP 消息对象，我希望能够将它存储在会话存储中并检索它，这可以使用 pickle 来完成。主要区别是我需要在对象上调用一个**方法**，我不只是在寻找数据。

但是这个项目是在 nodejs 中的，似乎所有 node 的低级库都必须有某种方法来保存这个对象，以便它可以在 web 调用之间持续存在。

用例是网页获取 RabbitMQ 消息并显示从中派生的信息。在对消息采取行动之前，我不想确认消息。我通常只是将数据保存在会话状态，但这不是一个选项，除非我能以某种方式将其保存为原始形式。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-08-03T01:27:12.810

请参阅 pickle-js 项目：[https ://code.google.com/p/pickle-js/](https://code.google.com/p/pickle-js/)

此外，来自 findbestopensource.com：

> pickle.js 是 Python pickle 格式的 JavaScript 实现。它支持包含原始类型的跨语言子集的泡菜。pickle.js 和 pickle.py 之间的主要区别：仅文本 pickle 某些类型被有损转换（例如 int） 某些类型不受支持（例如 class）

此处提供更多信息：[http ://www.findbestopensource.com/product/pickle-js](http://www.findbestopensource.com/product/pickle-js)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-31T09:58:52.790

据我所知，JavaScript（或标准节点库）中没有与 pickle 等效的东西。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-31T11:56:40.287

查看[https://github.com/carlos8f/hydration](https://github.com/carlos8f/hydration)看看它是否符合您的需求。我不确定它是否完整，`pickle`但它非常棒。

免责声明：模块作者和我是同事。

# actionscript-3 - 我们如何使用 AS3 在电子邮件中发送小型表单

> ID：14100097
> 
> 赞同：0
> 
> 时间：2012-12-31T09:55:14.593
> 
> 标签：actionscript-3, flash, flash-cs5

我在 Flash 中创建小表单（姓名、电子邮件、主题、消息）。想要使用 AS3 代码通过电子邮件发送。

我们可以离线使用吗？就像，我们填写所有详细信息，提交后，它上线并通过电子邮件接收详细信息

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T11:12:50.113

正如@esimov 所说，安全不是主要问题，那么您必须使用[SMTPMailer](http://www.bytearray.org/?p=27)，因为您的邮件以纯文本形式发送到电子邮件服务器。但是如果你想使用 SMTPMailer 那么你可以在其中使用一些加密和解密方法。这个带有密钥的加密包是可追踪的。所以如果安全是主要问题，那么你必须使用用actionscript编写的[airxmail](http://code.google.com/p/airxmail/)，这样你就可以使用SMTP、POP3、IMAP4协议发送和接收邮件。[最好的例子是发送和接收邮件](http://flex.coltware.com/as3-flex-air/airxmail/)。

愿这对你有所帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-31T10:07:33.530

如果您想使用 Flash 技术直接使用电子邮件客户端，您需要坚持使用 Flex。它具有强大的后端交互，甚至还允许进行一些跨脚本交互。

但是，如果您希望使用 Flash 而不是 Flex，实际上有一个名为[SMTPMailer](http://www.bytearray.org/?p=27)的电子邮件发送应用程序，它通过具有 Player 9 和 AS3 中可用的 Socket 类的电子邮件发送附件。请注意，出于安全原因，最好从应用程序的服务器端发送电子邮件。因此，另一种可能性是将电子邮件发送部分集成到服务器端脚本中。

# c# - 发出 System.Object 作为类型过滤器的一般 catch 子句有什么实际意义吗？

> ID：14100102
> 
> 赞同：11
> 
> 时间：2012-12-31T09:55:53.720
> 
> 标签：c#, .net, cil

我记得曾经听说过抛出某种类型的对象`System.Exception`（或扩展它的对象）在技术上是合法的 CIL，尽管 C# 没有支持它的功能。所以我有兴趣看到以下 C# 代码：

```
try {
    throw new Exception();
} catch(Exception x) {
    try {
        throw;
    } catch {
        Console.Write("yes");
    }
} 
```

编译为以下 CIL：

```
 .try
  {
    IL_0000:  newobj     instance void [mscorlib]System.Exception::.ctor()
    IL_0005:  throw
  }  // end .try
  catch [mscorlib]System.Exception 
  {
    IL_0006:  pop
    .try
    {
      IL_0007:  rethrow
    }  // end .try
    catch [mscorlib]System.Object 
    {
      IL_0009:  pop
      IL_000a:  ldstr      "yes"
      IL_000f:  call       void [mscorlib]System.Console::Write(string)
      IL_0014:  leave.s    IL_0016
    }  // end handler
    IL_0016:  leave.s    IL_0018
  }  // end handler 
```

我们看到嵌套的通用 catch 子句编译为：

```
catch [mscorlib]System.Object 
```

`System.Object`在 C# 中，一般 catch 子句作为类型过滤器而不是发射是否有任何实际影响`System.Exception`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T15:51:11.580

.NET-2.0 之前的版本有所*不同*。我在 .NET 1.1 天读到了它。

[这里有解释（我不会复制它）](https://stackoverflow.com/a/3391815/122718)。请注意，第一个答案是错误的，第二个是正确的。

至于它是否实用：不。我想这对于晦涩的互操作场景很重要。

# python - python多处理get（）性能

> ID：14100104
> 
> 赞同：0
> 
> 时间：2012-12-31T09:56:03.533
> 
> 标签：python, performance, multiprocessing

我在 python 上使用多处理解码消息。我有20个工人。工人解码消息。解码后的消息大小约为 0.1 - 1MB。

```
def do_work(message):
    try:
        msg = pickle.loads(message[1])
        decoded_msg = codec.DECODE(Message(**msg).content)
    except:
        decoded_msg = "Unable to decode message" 
```

我有大约 2k - 5k 条消息。解码过程比较快。但是当我试图从工人那里接收结果时：

```
decoded_msg.append(outQ.get()) 
```

它非常慢。

我的问题是为什么接收过程如此缓慢以及如何提高它的性能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T09:52:50.533

decode_msg 是一个对象。因此，如果我先将其转换为字符串，然后通过 outQ.get() 接收它，然后再次将其作为对象，则此过程非常快。

# php - domdocument 获取段落内的内容，而不是超链接

> ID：14100114
> 
> 赞同：2
> 
> 时间：2012-12-31T09:56:50.810
> 
> 标签：php, domdocument

我正在使用 DOMDocument 遍历 HTML 以获取`<p>`标签中的内容。但与此同时，我不想从标签中`href`获取任何内容`div`和`span`信息。`<p>`我应该如何从下面的代码开始：

```
$doc = new DOMDocument();
$doc->loadHTML($data);
$pas = $domDoc->getElementsByTagName("p");
foreach ($pas as $pa)
    $pa->textContent 
```

我可以进一步`getElementsByTagName()` 为 div、span、href做一个 DOMDocument`$pas`吗？或者我需要做一个正则表达式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T10:18:45.763

你可以这样使用

```
$doc = new DOMDocument();
$doc->loadHTML($data);
$rootElement = $document->documentElement;//selecting document root

$pTags = $rootElement->getElementsByTagName("p");//selecting all p tags from DOM
$pas = $pTags->item(0);// selecting first p tag

foreach ($pas as $pa) {
    if($pa->nodeName == 'div' || $pa->nodeName == 'span' || $pa->nodeName == 'a')
    continue;
    // do everything else here
} 
```

# testing - SAML2 测试客户端

> ID：14100115
> 
> 赞同：3
> 
> 时间：2012-12-31T09:56:52.240
> 
> 标签：testing, cas, saml-2.0

我正在按照[官方程序](https://wiki.jasig.org/pages/viewpage.action?pageId=6063484)在现有的 CAS 服务器上启用 SAMLv2 。现在我期待着对其进行测试。

由于我还没有访问最终的 SP，我正在寻找一个测试客户端，它允许我制作请求并将服务器的响应视为 XML。

你知道这样的工具吗？

我发现最接近的是[OpenSAML 2](https://wiki.shibboleth.net/confluence/display/OpenSAML/OSTwoUserManual)，但它对我的需求来说太低了......

谢谢你。皮埃尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T02:28:49.783

查看[testhib](https://www.testshib.org/)或[OneLogin 的 SAML 工具包](https://onelogin.zendesk.com/entries/20186386-introduction-to-onelogin-s-saml-toolkits)。

在查看 XML 方面，请参阅[ADFS ：我想查看 SAML 数据](http://nzpcmad.blogspot.co.nz/2012/10/adfs-i-want-to-see-saml-data.html)

# java - 在hadoop中使用mapreduce读取大文件

> ID：14100116
> 
> 赞同：1
> 
> 时间：2012-12-31T09:56:55.220
> 
> 标签：java, hadoop, mapreduce, elastic-map-reduce, amazon-emr

我有一个从 FTP 服务器读取文件并将其写入`HDFS`. 我已经实现了一个自定义`InputFormatReader`，将`isSplitable`输入的属性设置为。`false`但是这给了我以下错误。

```
INFO mapred.MapTask: Record too large for in-memory buffer 
```

我用来读取数据的代码是

```
Path file = fileSplit.getPath();
                FileSystem fs = file.getFileSystem(conf);
                FSDataInputStream in = null;
                try {
                    in = fs.open(file);

                    IOUtils.readFully(in, contents, 0, contents.length);

                    value.set(contents, 0, contents.length);

                } 
```

任何想法如何在`java heap space error`不拆分输入文件的情况下避免？或者如果我让我`isSplitable` `true`如何去阅读文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T18:24:38.747

如果我说得对 - 你将整个文件加载到内存中。与 hadoop 无关——你不能在 Java 上做到这一点，并确保你有足够的内存。
我建议定义一些合理的块并使其成为“记录”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T16:12:00.790

当 Map 函数运行时，hadoop 会在名为 MapOutputBuffer 的内存缓冲区中收集输出记录。

内存缓冲区的总大小由 io.sort.mb 属性设置，默认为 100 MB。

尝试在 mapred-site.xml 中增加此属性值

# android - 自己的android应用无法在模拟器上访问互联网

> ID：14100117
> 
> 赞同：1
> 
> 时间：2012-12-31T09:57:02.393
> 
> 标签：android, android-emulator, connection

我正在修改一个 android 应用程序，我想在我的机器上使用模拟器对其进行测试，以便检查应用程序数据。

我自己的应用程序遇到了一些互联网连接问题，但模拟器上的浏览器可以正常工作。现在我已经阅读了十几篇关于这个主题的文章，但到目前为止还没有适合我的解决方案。

我试过： - 将 dns-server 添加到启动参数。- 禁用 LAN，仅启用我的笔记本电脑的 wifi - 在模拟器中切换 3G 连接 - 向模拟器添加 GSM 调制解调器支持 - 重新启动 Eclipse - 重新启动笔记本电脑 - 仔细检查清单中的互联网权限

我在这里没有选择，希望有人能给我一些智慧。

我正在运行所有这些 - Mac OS X - 10.6.8 - Eclipse Indigo Service Release 1 - Build id: 20110916-0149 - Android MinSdk 7 - Emulator is using SDK level 16

一个小脚注，我对真实设备上的互联网问题没有任何问题。我可以在装有 Android 4.1.1 的 Google Nexus 上运行该应用程序

任何信息将不胜感激！

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T11:52:16.170

您是否尝试在`Run Configuration`应用程序中设置命令行 Artument。

![运行配置](../Images/1ff0113c130b05184a33870420d52aba.png)

# winapi - GetGuiThreadInfo 不起作用

> ID：14100119
> 
> 赞同：1
> 
> 时间：2012-12-31T09:57:18.337
> 
> 标签：winapi, visual-c++

我正在尝试通过单击另一个窗口将鼠标输入发送到一个窗口。根据[使用 PostMessage 模拟按键仅适用于某些应用程序？](https://stackoverflow.com/questions/11890972/simulating-key-press-with-postmessage-only-works-in-some-applications)，我正在尝试找到将事件发送到的正确句柄。这是我到目前为止所拥有的：

```
case WM_LBUTTONDOWN:
  GetCursorPos( reinterpret_cast<POINT *>( &mousePosition ) );  
  hWnd = WindowFromPoint(mousePosition);
  threadID = GetWindowThreadProcessId(otherWindow, &procID);

  GetGUIThreadInfo(threadID, &currentWindowGuiThreadInfo);

  otherWindow = currentWindowGuiThreadInfo.hwndFocus;

  ScreenToClient(hWnd, &mousePosition);
  ClientToScreen(otherWindow, &mousePosition);
  ScreenToClient(otherWindow, &mousePosition);
  dw = MAKELPARAM(mousePosition.x, mousePosition.y);
  PostMessage(otherWindow, WM_LBUTTONDOWN, MK_LBUTTON, dw);             

  break; 
```

在找到这个线程之前，我正在向 WindowFromPoint 返回的句柄发送一个 PostMessage 并使用 Spy++ 我可以看到消息通过（但这种方法仅适用于某些窗口）。但是现在GetGuiThreadInfo返回错误码87（参数不正确）。我将 currentWindowGuiThreadInfo.cbSize 设置为 sizeof(GUITHREADINFO)。我哪里错了？请帮助。我在 Windows 7 64 位和 Visual Studio 2010 上使用 Visual C++、win32。

非常感谢！

**编辑**

我很抱歉没有清楚地回答。这是代码的更完整版本：

```
POINT mousePosition;
DWORD dw, procID, threadID;
HWND hWnd;
GUITHREADINFO currentWindowGuiThreadInfo;
currentWindowGuiThreadInfo.cbSize = sizeof(GUITHREADINFO);
INPUT Input={0};
HWND hw;
int e;
int xPos, yPos;
MSLLHOOKSTRUCT *mouseParameters = (MSLLHOOKSTRUCT*)lParam;
int a = 2;
if (nCode == HC_ACTION) {
    switch(wParam) {

        case WM_LBUTTONDOWN:

          GetCursorPos( reinterpret_cast<POINT *>( &mousePosition ) );
          hWnd = WindowFromPoint(mousePosition);

          threadID = GetWindowThreadProcessId(otherWindow, &procID); //otherWindow exists and I can see the proper threadID

          GetGUIThreadInfo(threadID, &currentWindowGuiThreadInfo); //currentWindowGuiThreadInfo returns null for all the handles. The cbSize is 48\. But no error is returned. The return value is 1

          otherWindow= currentWindowGuiThreadInfo.hwndFocus;
          ScreenToClient(hWnd, &mousePosition);
          ClientToScreen(otherWindow, &mousePosition);
          ScreenToClient(otherWindow, &mousePosition);
          dw = MAKELPARAM(mousePosition.x, mousePosition.y);

          PostMessage(otherWindow, WM_LBUTTONDOWN, MK_LBUTTON, dw);
          break; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T10:04:06.037

你正在传递`otherWindow`给`GetWindowThreadProcessId`. 但`otherWindow`此时尚未初始化。我猜你是想通过`hWnd`。

我猜调用`GetWindowThreadProcessId`返回的线程 ID 为 0，因为您传递的窗口不存在。这导致`GetGUIThreadInfo`.

另一个明显的失败向量是你没有`currentWindowGuiThreadInfo.cbSize`正确设置。你说你正在这样做，但由于你没有显示代码，我们只能相信你的话。

顺便说一句，我注意到您没有在对 Windows API 函数的任何调用中检查错误。我计算了该代码中的 8 个 API 调用，其中没有一个具有错误检查功能。你真的必须养成检查错误的习惯。

# java - 刚连接数据库时出现com.mysql.jdbc.PacketTooBigException

> ID：14100121
> 
> 赞同：2
> 
> 时间：2012-12-31T09:57:27.840
> 
> 标签：java, mysql, database, jdbc, database-connection

我试图在java中使用以下命令连接到我的sql数据库

```
connection = DriverManager.getConnection(url, user, pass); 
```

网址在哪里

```
jdbc:mysql://www.SampleSite.net:2222/DatabaseName 
```

虽然我只是执行上面的命令，但我收到以下错误

```
`com.mysql.jdbc.PacketTooBigException: Packet for query is too large (5526600 > 1048576). You can change this value on the server by setting the max_allowed_packet' variable.

at com.mysql.jdbc.MysqlIO.readPacket(MysqlIO.java:605)
    at com.mysql.jdbc.MysqlIO.doHandshake(MysqlIO.java:1078)
    at com.mysql.jdbc.ConnectionImpl.coreConnect(ConnectionImpl.java:2412) 
```

...

我该做什么？我只尝试连接，因此查询不是那么长。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T11:02:51.507

在数据库服务器上，您必须更改 mysql 配置文件。见[https://dev.mysql.com/doc/refman/5.6/en/option-files.html](https://dev.mysql.com/doc/refman/5.6/en/option-files.html)

您根本不需要在客户端上做任何事情。

# testing - while 和 IF 控制器 - Jmeter

> ID：14100127
> 
> 赞同：4
> 
> 时间：2012-12-31T09:58:18.497
> 
> 标签：testing, jmeter, load-testing, stress-testing

我有一个有条件的 While 控制器

```
${__javaScript("${DONE}"!="Downloaded")} 
```

效果很好。

现在我想添加另一个条件

```
${__javaScript("${Temp}"!="No Exceptions found")} 
```

循环必须在上述条件之一中退出。

为此，我添加了一个“If Controller”作为 While Controller 的子节点，并`${__javaScript("${Temp}"!="No Exceptions found")}`在 If Controller 中给出了这个条件（），但没有得到如何退出循环。

如果它没有首先找到“已下载”，如果它发现“未找到异常”，如何退出此循环？

此外，Jmeter 在评估 If Condition 时在 .log 文件中生成错误，我做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-31T10:16:28.907

您不需要将 If Controller 放在 While Controller 中。您可以在 While 控制器中使用此条件：

```
${__javaScript("${DONE}"!="Downloaded" && "${Temp}"!="No Exceptions found")} 
```

# ssl - file_get_contents() 不适用于 youtube

> ID：14100131
> 
> 赞同：5
> 
> 时间：2012-12-31T09:59:07.437
> 
> 标签：ssl, php

我想从 youtube 获取数据，我正在使用`file_get_contents()`方法。

有时它工作正常，但有时它不起作用并显示以下错误

```
file_get_contents() [function.file-get-contents]: SSL: crypto enabling timeout
file_get_contents() [function.file-get-contents]: Failed to enable crypto
file_get_contents(https://gdata.youtube.com/feeds/api/users/default?access_token=token&v=2&alt=json) [function.file-get-contents]: failed to open stream: operation failed
Maximum execution time of 30 seconds exceeded 
```

上述错误是什么意思？

什么是`SSL: crypto enabling timeout`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-31T10:02:46.103

有时你不能，因为 SSL。使用卷曲

这应该足够了：

```
$ch = curl_init('https://youtube.com');
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
curl_setopt($ch, CURLOPT_USERAGENT, 'Mozilla/5.0 (X11; Linux i686; rv:20.0) Gecko/20121230 Firefox/20.0');
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, false);
echo curl_exec($ch); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T11:24:31.510

您看到的错误是您要连接的服务器与系统上的 SSL 库不兼容。

请检查您使用的 OpenSSL 库是否已过时。要验证这一点，您可能需要联系您的系统管理员。

如果 curl 库使用相同的 SSL 库，David Harris 建议的解决方法也不起作用。

或者，您可以尝试显式地使用 TLS1，这有时会起作用。我建议先在命令行上进行测试，例如使用`curl`.

此外，您可能想查看包装器使用的PHP [^(*Docs*)](http://php.net/context.ssl)[中的 SSL 上下文选项（在](http://php.net/context.ssl)*[HTTP](http://php.net/context.http) [^(*Docs*)](http://php.net/context.http)`https://`旁边）。[](http://php.net/context.http)*

 *** * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-12-31T10:07:45.170

这个错误意味着php页面的执行时间已经结束。默认情况下，php 模块为任何 php 页面的执行设置 30 秒。您可以使用增加它

```
ini_set('max_execution_time', time in seconds as per your need); 
```

请在 php 页面的开头编写此函数，并根据需要设置时间。它将覆盖 php 为该特定页面设置的默认执行时间。**

# css - 使用 HTML5/JS 在 Windows Store 应用程序中实现内联滚动查看器

> ID：14100137
> 
> 赞同：1
> 
> 时间：2012-12-31T09:59:40.353
> 
> 标签：css, html, windows-8, windows-store-apps

我正在开发一个带有 html5/JS 的 Windows 8 Store 应用程序，一个阅读应用程序。内容页面如下所示： ![在此处输入图像描述](../Images/ab552e38b213737fb80f491633d636ee.png)

我正在使用 CSS-Grid-Layout 来管理页面布局，如下所示：

```
<body>
    <div class="contentPagepage fragment">
        <header aria-label="Header content" role="banner">
            <button class="win-backbutton black-button" aria-label="Back" disabled type="button"></button>
            <h1 class="titlearea win-type-ellipsis">
                <span class="pagetitle"></span>
            </h1>
            <h2>
                <span class=""></span>
            </h2>
        </header>
        <div class="content clearfix" aria-label="Main content">
            <div id="leftContainer">
                <p>Left container</p>
            </div>

            <section id="rightContainer">
                <div id="navContainer">
                    <button type="button">button 1</button>
                    <button type="button">button 2</button>
                    <button type="button">button 3</button>
                </div>
                <!--<article>-->
                    <div id="contentContainer" class="item-content" aria-label="Main content">
                    html content 
                    </div>
            </section>

        </div>

    </div>
</body> 
```

而css文件是：

```
.contentPagepage, .black-button {
    background-color: #EEEEEE;
    color: black;
}

.clear{ clear: both; }
.clearfix:after{ 
content:"."; display:block; height:0; clear:both; 
visibility:hidden; 
font-size: 0;
}

*html .clearfix{ 
 height:1%; 
}

*+html .clearfix{ 
 height:1%; 
}

.contentPagepage .content {
    -ms-grid-row-span: 2;
    display: -ms-grid;
    -ms-grid-columns: 40% 60%;
    height: calc(100% - 183px);
    margin: 133px 120px 0 120px;
    border: 1px solid #000;
}

#leftContainer {
    height: calc(100% - 183px);
    -ms-grid-column: 1;
    background-color: greenyellow;
    margin: 0 10px 10px 0;
}

#rightContainer{
    -ms-grid-column: 2;
    display: -ms-grid;
    -ms-grid-rows: 30px auto;
}

#navContainer {
    -ms-grid-row: 1;
}

#contentContainer {
    -ms-grid-row: 2;
    overflow-y: auto;
    height: calc(100% - 0px);
}

.contentPagepage .content #contentContainer {
    -ms-grid-row: 2;
    height: auto;
    background-color: red;
    display: block;
    overflow-y: auto;
} 
```

现在布局系统工作正常，但内容区域也得到了修复，这意味着如果我使用 "lement.querySelector(".content .item-content").innerHTML = item.content;" 要加载一些 html 内容，即使内容的高度大于容器，也没有滚动条。

那么，我该如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T11:59:25.163

首先`.contentPagepage` `.content` `#contentContainer`从 CSS 中删除 " " 块。然后将`#rightContainer`and替换为`#contentContainer`：

```
#rightContainer{
    -ms-grid-column: 2;
    -ms-grid-rows: 30px 1fr;
    display: -ms-grid;
    height: calc(100% - 183px);
}

#contentContainer {
    -ms-grid-row: 2;
    overflow-y: scroll;
    background-color: red;
    height: 100%;
} 
```

# c# - 使用 asp.net 从 SQL 数据库中检索二进制数据

> ID：14100141
> 
> 赞同：-1
> 
> 时间：2012-12-31T10:00:05.643
> 
> 标签：c#, asp.net, sql-server, image

我想用 asp.net 从 SQL 数据库中检索二进制数据。但是输出中显示的数据与我插入的数据不匹配。这是我的代码：

```
string EQuery = "SELECT * FROM Ph_Tbl_Contacts WHERE (Contact_ID =" + Contact_ID + ")";

DataSet DSs = new DataSet();
DataTable dt = new DataTable();
DataRow dr = dt.NewRow();

DSs = DB.ExecuteQueryData(EQuery);
dt = DSs.Tables[0];

// dr = dt.NewRow();
dr = dt.Rows[0];
byte[] pic;
byte[] raw = (byte[])dr["Contact_CardImage"];
//  Session[OpenDialog.STORED_IMAGE] = raw ; 
```

这是插入部分：

```
byte[] IMAGEbYTE ;
IMAGEbYTE = (byte[])(Session["SessionImage"]);
string Query = "INSERT INTO Ph_Tbl_Contacts (Contact_Name, Contact_LName, " + 
               "Contact_Company, Contact_Email, Contact_Tel, " + 
               "Contact_Mobile,Contact_CardImage,Is_Public,User_ID,Save_Date)" + 
               "VALUES (N'" + Txt_Name.Text + "', N'" + Txt_LastName.Text + "', N'" + 
               Txt_CompanyName.Text + "', N'" + Txt_Mail.Text + "', N'" + 
               Txt_Telephone.Text + "', N'" + Txt_Mobile.Text + "','" + 
               IMAGEbYTE + "','" + CheckValue + "'," + 
               Session["User_ID"] + ", N'" + DateStr + "')";

DB.ExecuteQueryNoData(Query) ; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-31T10:26:56.377

好吧，让我们从清理代码开始吧。首先是修复你的 INSERT 代码，因为现在它很容易受到 SQL 注入的攻击。您需要使用参数化查询：

```
using (var conn = new SqlConnection("Your ConnectionString comes here"))
using (var cmd = conn.CreateCommand())
{
    conn.Open();
    cmd.CommandText =
    @"INSERT INTO Ph_Tbl_Contacts 
          (Contact_Name, 
           Contact_LName, 
           Contact_Company, 
           Contact_Email, 
           Contact_Tel, 
           Contact_Mobile, 
           Contact_CardImage, 
           Is_Public, 
           User_ID, 
           Save_Date)
      VALUES 
          (@Contact_Name, 
           @Contact_LName, 
           @Contact_Company, 
           @Contact_Email, 
           @Contact_Tel, 
           @Contact_Mobile, 
           @Contact_CardImage, 
           @Is_Public, 
           @User_ID, 
           @Save_Date)
    ";
    cmd.Parameters.AddWithValue("@Contact_Name", Txt_Name.Text);
    cmd.Parameters.AddWithValue("@Contact_LName", Txt_LastName.Text);
    cmd.Parameters.AddWithValue("@Contact_Company", Txt_CompanyName.Text);
    cmd.Parameters.AddWithValue("@Contact_Email", Txt_Mail.Text);
    cmd.Parameters.AddWithValue("@Contact_Tel", Txt_Telephone.Text);
    cmd.Parameters.AddWithValue("@Contact_Mobile", Txt_Mobile.Text);
    cmd.Parameters.AddWithValue("@Contact_CardImage", IMAGEbYTE);
    cmd.Parameters.AddWithValue("@Is_Public", CheckValue);
    cmd.Parameters.AddWithValue("@User_ID", Session["User_ID"]);
    cmd.Parameters.AddWithValue("@Save_Date", DateStr); 
    cmd.ExecuteNonQuery();
} 
```

这里值得一提的是，如果`Save_Date`您的数据库中的列是 a `datetime`，您应该为参数传递一个实例，`DateTime`而不是尝试将其转换为字符串 =>`DateStr`必须是 DateTime。

好的，既然您已将记录正确插入到数据库中，您就可以读取它了：

```
using (var conn = new SqlConnection("Your ConnectionString comes here"))
using (var cmd = conn.CreateCommand())
{
    conn.Open();
    cmd.CommandText = 
    @"SELECT
          Contact_CardImage
      FROM 
          Ph_Tbl_Contacts 
      WHERE 
          Contact_ID = @Contact_ID
    ";
    cmd.Parameters.AddWithValue("@Contact_ID", Txt_Name.Text); 
    using (var reader = cmd.ExecuteReader())
    {
        if (reader.Read())
        {
            byte[] raw = (byte[])reader.Items["Contact_CardImage"];
            // TODO: do something with the raw data
        }
    }
} 
```

# python - 使用 python 的一组网站的 web 图表

> ID：14100142
> 
> 赞同：0
> 
> 时间：2012-12-31T10:00:19.540
> 
> 标签：python, graph, nodes, edges

我已经提取了一组关于同一主题的网址。我想找到它们之间的链接，以便我可以使用 python 形成图形。url 或网站将表示为节点和它们之间的链接，表示为边缘。请帮我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T10:26:57.657

You can follow this simple approach -

Parse web pages using `BeautifulSoup`[1] and keep anchor tags' `href` property stored in a nested list(assume lst). So, if a web page(assume web1) links to 3 other web pages(assume with links href1, href2, href3), then -

```
lst['web1'][0] = 'href1'
lst['web1'][1] = 'href2'
lst['web1'][2] = 'href3' 
```

Similarly parse other web pages and created lists for them. This web1 can be hrefx for webx. Hope you got the idea.

[1] [http://www.crummy.com/software/BeautifulSoup/](http://www.crummy.com/software/BeautifulSoup/)

# c# - Sql中的日期转换错误

> ID：14100146
> 
> 赞同：1
> 
> 时间：2012-12-31T10:01:23.397
> 
> 标签：c#, sql, entity-framework

我得到错误：

> *从字符串转换日期和/或时间时转换失败。*

我这样调用存储过程：

```
var result = (from x in db.spStoredProc(sStart, sEnd) select x).ToList(); 
```

其中`sStart`和`sEnd`是具有此值的字符串：

```
sStart = "CONVERT(date,GETDATE())" 
```

和

```
sEnd = "DATEADD(d,1,CONVERT(date,GETDATE()))" 
```

存储过程有两个参数类型`varchar(max)`

在存储过程中，我进行了左连接，并像这样使用它们：

```
where date_expire >= @sStartSQL AND date_expire < @sEndSQL 
```

为什么我会收到错误消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T10:06:00.310

您只能将文字作为参数传递。所以 SQL Server 从字面上尝试将其转换为日期：

```
sEnd = "DATEADD(d,1,CONVERT(date,GETDATE()))" 
```

相反，通过：

```
sEnd = DateTime.Now.AddDays(1).ToString("yyyy-MM-dd HH:mm:ss") 
```

作为参数。

# c# - MEF 插件找不到引用的库

> ID：14100148
> 
> 赞同：4
> 
> 时间：2012-12-31T10:01:29.793
> 
> 标签：c#, .net, plugins, dll, mef

我正在用 MEF 实现一个插件系统，到目前为止它运行良好。不过，我最近遇到了一个问题：主应用程序使用 SQLite 数据库，现在我有一个插件也必须访问该数据库。当我将插件复制到我的插件目录时，mef 会正确选择它，但是一旦它尝试使用 SQlite 访问任何内容，我就会收到一个 System.IO 异常，告诉我它找不到它所依赖的 sqlite dll。

我也尝试将 sqlite dll 复制到插件目录，但它仍然无法正常工作。我在主应用程序中引用的任何库不应该在我的插件中也可用吗？即使没有，如果库位于同一目录中，插件是否应该找到它们？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T10:23:16.457

SQLite 程序集应该在您的路径中，或者在您的应用程序目录中，而不是在您的模块目录中。[如果是这种情况，并且您仍然遇到相同的错误，那么这听起来与我在此处](https://stackoverflow.com/questions/8564761/c-sharp-deserialization-of-system-type-throws-for-a-type-from-a-loaded-assembly)发布的完全相同的问题，使用以下解决方案：

```
public static class AssemblyResolverFix
{
  //Looks up the assembly in the set of currently loaded assemblies,
  //and returns it if the name matches. Else returns null.
  public static Assembly HandleAssemblyResolve( object sender, ResolveEventArgs args )
  {
    foreach( var ass in AppDomain.CurrentDomain.GetAssemblies() )
      if( ass.FullName == args.Name )
        return ass;
    return null;
  }
}

//in main
AppDomain.CurrentDomain.AssemblyResolve += AssemblyResolverFix.HandleAssemblyResolve; 
```

# android - 来电者会听到我的语气

> ID：14100150
> 
> 赞同：-1
> 
> 时间：2012-12-31T10:01:39.803
> 
> 标签：android, telephony

我需要开发像拨号音一样的应用程序，

呼叫者（呼叫我的人）应该听到我预设的音调。

**例如**，如果 A 呼叫 B，则 B 的声音应该被 A 听到。

我需要知道在android中是否可能..？请给我一些想法来做这个朋友。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T10:14:20.673

我猜你的意思是DTMF音或类似的东西。

您可以做到这一点的唯一方法是创建您自己的修改过的 Android ROM 并将其放到有根手机上。默认情况下，不允许应用程序通过语音呼叫上行链路发送音调。自己生成音调并将 PCM 数据注入上行链路也行不通，因为 Android 中没有允许应用程序执行此操作的 API（即使平台可能支持它）。

# javascript - 异常：java.lang.NullPointerException

> ID：14100151
> 
> 赞同：0
> 
> 时间：2012-12-31T10:01:41.503
> 
> 标签：javascript, webdriver

我正在使用以下代码来验证图像是否已完全加载到网页上。

```
public static boolean IsImageVisible1(WebDriver driver, By locator)
  {
    WebElement image = driver.findElement(locator);
    //if the element not present you'll get the NoSuchElementException exception
    JavascriptExecutor js = (JavascriptExecutor) driver;
    boolean imageLoaded1  = (boolean) js.executeScript("return arguments[0].complete && (typeof arguments[0].naturalWidth !== \"undefined\") && (arguments[0].naturalWidth > 0)", image);      
    return imageLoaded1;
  } 
```

在运行此方法时，我遇到了以下异常

```
java.lang.NullPointerException
at pack2.image.IsImageVisible1(image.java:58)
at pack2.image.test(image.java:23)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)

function call to above method: IsImageVisible1(driver, By.id("homepage-preview")); 
```

让我知道我在上面的 javascript 代码中缺少什么。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T16:22:15.073

1.  `typeof`应该是一个字。那应该解决它。
2.  你可以`imageLoaded1`在那之后返回。无需提出`if`条件。

**更新：**

您可能会收到 NullPointer 异常，因为`executeScript`返回 null。我对代码进行了一些修改（主要是我放了括号以确保逻辑运算符的正确顺序）

尝试这个：

```
public static boolean IsImageVisible1(WebDriver driver, By locator)
  {
    WebElement image = driver.findElement(locator);
    //if the element not present you'll get the NoSuchElementException exception
    JavascriptExecutor js = (JavascriptExecutor) driver;
    boolean imageLoaded1  = (boolean) js.executeScript("return arguments[0].complete && (typeof arguments[0].naturalWidth !== \"undefined\") && (arguments[0].naturalWidth > 0)", image);      
    return imageLoaded1;
  } 
```

# php - PHP Mail 表单调整

> ID：14100152
> 
> 赞同：0
> 
> 时间：2012-12-31T10:01:54.727
> 
> 标签：php, email

如果用户想向我的网络邮箱发送电子邮件，此代码是否足够？还是我需要做出改变？

```
<?php
$mail = $_POST['mail'];
$name = $_POST['name'];
$subject = $_POST['subject'];
$text = $_POST['text'];

  $to = "youremail@domain.com";

 $message =" You received  a mail from ".$name;
 $message .=" Text of the message : ".$text;

 if(mail($to, $subject,$message)){
echo "Your message was sent successfully.";
} 
else{ 
echo "there's some errors to send the mail, verify your server options";

}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T10:44:13.020

**这段代码肯定对你有用。**

```
<?php 
    $to = 'xyz@xyz.com';
    $subject = "Your Subject";
    $message ="<html><body>
    <div>Here Write Your Message</div>
    </body></html>";

    $header='';
    $header .= 'MIME-Version: 1.0' . "\r\n";
    $header .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";
    $header .= 'From: abc@abc.com'. "\r\n";

    mail($to,$subject,$message,$header);
?> 
```

**注意：邮件功能仅适用于实时服务器而不适用于本地服务器。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T10:46:39.970

我建议使用编码 (UTF8) 在电子邮件中添加标题，对主题行进行编码，这样您就不会出现乱码（例如，如果您使用其他非拉丁字符）并处理基本事件，无论成功与否。

```
<?php 
$name = $_POST['name'];
$text = $_POST['text'];
$from = $_POST['mail'];
$to = "youremail@domain.com";
$subject = "=?utf-8?B?".base64_encode($_POST['subject'])."?=";
$message = " You received  a mail from ".$name;
$message .= " Text of the message : ".$text;

$headers = "MIME-Version: 1.0\r\n";
$headers .= "Content-type: text/html; charset=utf-8\r\n";
$headers .= "To: <$to>\r\n";
$headers .= "From: $name <$from>\r\n";    

if (mail($to,$subject,$message,$headers)) {
    // Do something if the email is sent
} else {
    // Do something if there's an error
}
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T10:09:57.250

这对于简单的邮件来说是可以的。但mail()函数不适合循环处理大量邮件。该函数为每封邮件打开和关闭一个SMTP套接字，效率不高。要发送大量电子邮件，请参阅 [PEAR::Mail](http://pear.php.net/package/Mail)和[PEAR::Mail_Queue](http://pear.php.net/package/Mail_Queue)包。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-31T10:17:47.713

不，如果您想通过在标题中设置类型的内容类型来发送电子邮件，并且邮件的接收者必须知道邮件的发件人，则此代码是不够的。代码如下：

```
 $to = "youremail@domain.com";

 $message =" You received  a mail from ".$name;
 $message .=" Text of the message : ".$text;
 $headers = "Content-Type: text/html; charset=iso-8859-1\r\n"; 
 $headers = "From: ". Please enter the name of sender . "\r\n";

 if(mail($to, $subject,$message,$headers)){
echo "Your message was sent successfully.";
} 
else{ 
echo "there's some errors to send the mail, verify your server options";

} 
```

# java - JSON解析问题未解决

> ID：14100154
> 
> 赞同：9
> 
> 时间：2012-12-31T10:02:13.070
> 
> 标签：java, php, android, mysql, json

我的 LogCat 错误是：

```
 12-31 14:45:14.920: E/WindowManager(3420): Activity com.example.visit.record.My_Task has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@4054ed00 that was originally added here
    12-31 14:45:14.920: E/WindowManager(3420): android.view.WindowLeaked: Activity com.example.visit.record.My_Task has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@4054ed00 that was originally added here
    12-31 14:45:14.920: E/WindowManager(3420):  at android.view.ViewRoot.<init>(ViewRoot.java:277)
    12-31 14:45:14.920: E/WindowManager(3420):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:148)
    12-31 14:45:14.920: E/WindowManager(3420):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
    12-31 14:45:14.920: E/WindowManager(3420):  at android.view.Window$LocalWindowManager.addView(Window.java:433)
    12-31 14:45:14.920: E/WindowManager(3420):  at android.app.Dialog.show(Dialog.java:288)
    12-31 14:45:14.920: E/WindowManager(3420):  at com.example.visit.record.My_Task$GetTaskDetails.onPreExecute(My_Task.java:137)
    12-31 14:45:14.920: E/WindowManager(3420):  at android.os.AsyncTask.execute(AsyncTask.java:391)
    12-31 14:45:14.920: E/WindowManager(3420):  at com.example.visit.record.My_Task.onCreate(My_Task.java:105)
    12-31 14:45:14.920: E/WindowManager(3420):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1093)
    12-31 14:45:14.920: E/WindowManager(3420):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1785)
    12-31 14:45:14.920: E/WindowManager(3420):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1842)
    12-31 14:45:14.920: E/WindowManager(3420):  at android.app.ActivityThread.access$1500(ActivityThread.java:132)
    12-31 14:45:14.920: E/WindowManager(3420):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1038)
    12-31 14:45:14.920: E/WindowManager(3420):  at android.os.Handler.dispatchMessage(Handler.java:99)
    12-31 14:45:14.920: E/WindowManager(3420):  at android.os.Looper.loop(Looper.java:143)
    12-31 14:45:14.920: E/WindowManager(3420):  at android.app.ActivityThread.main(ActivityThread.java:4268)
    12-31 14:45:14.920: E/WindowManager(3420):  at java.lang.reflect.Method.invokeNative(Native Method)
    12-31 14:45:14.920: E/WindowManager(3420):  at java.lang.reflect.Method.invoke(Method.java:507)
    12-31 14:45:14.920: E/WindowManager(3420):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
    12-31 14:45:14.920: E/WindowManager(3420):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
    12-31 14:45:14.920: E/WindowManager(3420):  at dalvik.system.NativeStart.main(Native Method)
12-31 14:54:22.360: E/AndroidRuntime(4423):     at com.example.visit.record.My_Task$GetTaskDetails.doInBackground(My_Task.java:163)
12-31 15:10:51.470: W/System.err(6457):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
12-31 15:10:51.470: W/System.err(6457):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
12-31 15:10:51.470: W/System.err(6457):     at java.lang.Thread.run(Thread.java:1027)
12-31 15:10:51.480: E/Buffer Error(6457): Error converting result java.lang.NullPointerException
12-31 15:10:51.480: E/JSON Parser(6457): Error parsing data org.json.JSONException: End of input at character 0 of 
12-31 15:10:51.480: W/dalvikvm(6457): threadid=9: thread exiting with uncaught exception (group=0x400205a0)
12-31 15:10:51.490: E/AndroidRuntime(6457): FATAL EXCEPTION: AsyncTask #1
12-31 15:10:51.490: E/AndroidRuntime(6457): java.lang.RuntimeException: An error occured while executing doInBackground()
12-31 15:10:51.490: E/AndroidRuntime(6457):     at android.os.AsyncTask$3.done(AsyncTask.java:200)
12-31 15:10:51.490: E/AndroidRuntime(6457):     at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:274)
12-31 15:10:51.490: E/AndroidRuntime(6457):     at java.util.concurrent.FutureTask.setException(FutureTask.java:125)
12-31 15:10:51.490: E/AndroidRuntime(6457):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:308)
12-31 15:10:51.490: E/AndroidRuntime(6457):     at java.util.concurrent.FutureTask.run(FutureTask.java:138)
12-31 15:10:51.490: E/AndroidRuntime(6457):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088) 
```

我在**dialog.show() 上遇到错误；**在 getTaskDetail 类的 Preexecute 对话框中。**并在Log.d("Single Task Details", json.toString())**上显示错误 ； 并在 **new GetTaskDetails().execute() 上出错；**

请指导为什么它没有从我的 php 应用程序数据库中获取值。它通过生成“强制关闭”错误意外停止。请指导我哪里出错了。我想使用 JSONParsing 从 MySql 获取数据到 android

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T10:56:50.513

我认为您在模拟器中运行时出现的 url 问题将 url 更改为

这个

```
private static final String url_read_mytask = "http://10.0.2.2/evisiting_records/read_mytask.php"; 
```

和

```
private static final String url_update_mytask = "http://10.0.2.2/evisiting_records/update_mytask.php" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T10:16:57.367

json 没有问题，它接缝你尝试从后台线程与 ui 线程交互。看看： [Activity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@46368a28 原来是加在这里的](https://stackoverflow.com/questions/5181508/activity-has-leaked-window-com-android-internal-policy-impl-phonewindowdecorvie)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T14:34:26.417

我认为这是导致泄漏窗口的 JSON 的问题：

```
Error parsing data org.json.JSONException: End of input at character 0 of 
```

您可以发布 JSON（通过在浏览器或 CURL 中打开 url 并复制内容）。JSON 似乎无效。

# ruby-on-rails - 如果没有路由匹配，则重定向到根页面

> ID：14100155
> 
> 赞同：12
> 
> 时间：2012-12-31T10:02:35.553
> 
> 标签：ruby-on-rails, ruby-on-rails-3

如果我输入了错误的路由或者没有路由匹配错误出现，那么我想重定向到 root_path。我怎样才能做到这一点？

预先感谢

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-08-10T08:01:49.990

在 Rails 4/5 中，您可以

```
get '*path' => redirect('/') 
```

编辑。正如@VenkatK 所指出的，这应该是最后一条路线。评估路线的方式是顶部的比底部的更重要。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-12-31T10:10:12.357

将此语句放在`config/routes.rb`文件中的最后一个：

```
match "*path" => redirect("/") 
```

将`"*path"`匹配任何内容并将重定向到根路径。

有关更多信息，请查看官方 Rails 指南中的[路线](http://guides.rubyonrails.org/routing.html#route-globbing)通配和[重定向](http://guides.rubyonrails.org/routing.html#redirection)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-31T10:05:08.270

您可以通过将其放入您的路线文件（在底部）来重定向 404。

```
map.connect '*path', :controller => 'some_controller', :action => 'some_action' 
```

要重定向到 root，您可以这样做。

```
match "*path" => redirect("/") 
```

[这个答案](https://stackoverflow.com/questions/5233657/rails-handle-404-with-url-redirect)中有更多细节以及通过捕获异常来实现它的替代方法。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-03-13T19:31:49.583

对于最新的 Rails 4.2+，`match`语法略有变化：

把它放在项目的底部`config/routes.rb`

`match '*path', to: redirect('/'), via: :all`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-05-20T19:43:23.483

在“public/404.html”中创建文件并重定向到，如果找不到路径：

```
get '*path' => redirect('/404.html') 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-09-27T08:46:18.280

另外，当您使用上述任何建议的答案时，您可能会收到错误消息`You should not use the "match" method in your router without specifying an HTTP method`。

如果是这种情况，您可以添加`:via => [:get, :post]`到重定向：

```
match '*path' => redirect('/'), :via => [:get, :post] 
```

# objective-c - 是否有 iTunes Connect 游戏中心 REST API？

> ID：14100156
> 
> 赞同：0
> 
> 时间：2012-12-31T10:02:36.767
> 
> 标签：objective-c, ios

有没有办法连接 iTunes Connect 以管理游戏中心。具体来说，我想为我的游戏添加 500 个不同的排行榜，其中包含不同的 500 张地图。而且这个数字可以增加。因此，我想从我将编程的外部服务器动态添加这些排行榜。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T12:18:54.213

有一个命令行工具（有关详细信息，请参阅[此问题](https://stackoverflow.com/questions/13191678/where-to-find-apples-new-command-line-delivery-tool-transporter)）可以上传它们。你也许可以在你的服务器上运行它？

# jquery - 如何使用 jquery 删除表行 id？

> ID：14100159
> 
> 赞同：0
> 
> 时间：2012-12-31T10:02:47.687
> 
> 标签：jquery

我使用了两个表。我想使用特定表 tr id 删除一行。我使用代码

```
$("#tabDisplay1 #"+pmRowId).remove();  
$("#tabDisplay2 #"+pmRowId).remove(); 
```

但有时我有相同的 id occuar remove 不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T10:04:23.493

ID 只能在文档中出现一次。你应该

*   使用不同的 id
*   或使用一个类

我建议使用一个类：

```
$("#tabDisplay1 ."+pmRowClass).remove();  
$("#tabDisplay2 ."+pmRowClass).remove(); 
```

[示范](http://jsfiddle.net/qVa99/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T10:05:33.963

您应该为每一行维护唯一的 id，然后只有您可以删除预期的行。

# javascript - 拉斐尔无延迟地重复动画

> ID：14100160
> 
> 赞同：0
> 
> 时间：2012-12-31T10:03:00.310
> 
> 标签：javascript, raphael

```
obj.animate(anim.repeat('Infinity').delay(500)); 
```

这样的循环，其实就是：延迟，动画，延迟，动画，延迟动画……等等。

如何制作：延迟、动画、动画、动画……等等——延迟只在第一个周期。

我不想使用`setTimeout`，因为我正在为很多元素设置动画，并且每个 setTimeout 都有不同的 javascript 浏览器计时器实例，并且动画 od 不同的元素可能是异步的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T13:50:32.793

这很奇怪。我认为您可以使用可选的回调参数巧妙地更新它，但这不起作用：

```
anim = Raphael.animation({transform: "r45"}, 500, function(e) {  anim.del = 0; }).delay(1000); 
```

从源头看，动画的参数似乎在每次迭代时都没有更新（我认为）。

这可行，但我不知道它与 setTimeout 方法在功能上有何不同：

```
var paper = Raphael(0,0,500,500),
    square = paper.rect(50,50,50,50).attr("fill", "#009900"),
    //anim = Raphael.animation({transform: "r45"}, 500, function(e) {  console.log(anim); anim.del = 0; }).delay(1000);
    anim = Raphael.animation({opacity: 0}, 1000, function() { this.attr("opacity", 1); /* this callback is just to reset the effect for my dummy animation */ }),
    wait = Raphael.animation({opacity: 1}, 500, function () { this.animate(anim.repeat("Infinity")); /* this callback triggers the actual animation after a 500ms placebo animation */ });

square.animate(wait); 
```

[jsFiddle](http://jsfiddle.net/ktbWX/1/)

正如你所看到的，这只是一次运行一个没有视觉效果的 500 毫秒动画，然后在回调时调用实际的动画。

# cocoa - ReactiveCocoa 的引用所有权语义是什么？

> ID：14100161
> 
> 赞同：28
> 
> 时间：2012-12-31T10:03:01.323
> 
> 标签：cocoa, reactive-programming, reactive-cocoa

当我创建一个信号并将其带入函数范围时，根据 Cocoa 约定，它的有效保留计数为 0：

```
RACSignal *signal = [self createSignal]; 
```

当我订阅信号时，它会保留订阅者并返回一个一次性的，根据 Cocoa 约定，它的保留计数也为零。

```
RACDisposable *disposable = [signal subscribeCompleted:^ {
    doSomethingPossiblyInvolving(self);
}]; 
```

大多数情况下，订阅者将关闭并引用`self`其 ivars 或封闭范围的其他部分。因此，当您订阅信号时，该信号具有对订阅者的拥有引用，而订阅者具有对您的拥有引用。并且您获得的一次性产品具有对信号的拥有引用。

```
disposable -> signal -> subscriber -> calling scope 
```

假设您持有该一次性用品，以便您可以在某个时候取消订阅（例如，如果信号正在从 Web 服务检索数据并且用户导航离开屏幕，取消她查看正在检索的数据的意图）。

```
self.disposeToCancelWebRequest = disposable; 
```

此时我们有一个循环引用：

```
calling scope -> disposable -> signal -> subscriber -> calling scope 
```

负责任的事情是确保在取消请求时或在请求完成后中断循环。

```
 [self.disposeToCancelWebRequest dispose]
 self.disposeToCancelWebRequest = nil; 
```

`self`请注意，在被释放时您不能这样做，因为由于保留周期，这永远不会发生！在回调订阅者期间打破保留周期似乎也有些可疑，因为信号可能在其实现仍在调用堆栈上时被释放。

我还注意到该实现保留了一个活动信号的全局进程列表（截至我最初提出这个问题时）。

使用 RAC 时我应该如何考虑所有权？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-12-31T12:33:21.423

ReactiveCocoa 的内存管理是相当复杂的，老实说，但有价值的最终结果是**您不需要保留信号来处理它们**。

如果框架要求您保留每个信号，那么使用起来会更加笨拙，尤其是对于像期货一样使用的一次性信号（例如，网络请求）。您必须将任何长期存在的信号保存到属性中，然后确保在完成后将其清除。不好玩。

# 订户

在继续之前，我应该指出`subscribeNext:error:completed:`（及其所有变体）使用给定的块创建一个*隐式*订阅者。因此，从这些块引用的任何对象都将保留为订阅的一部分。就像任何其他对象一样，`self`如果没有直接或间接引用它，就不会被保留。

*（根据您问题的措辞，我认为您已经知道这一点，但它可能对其他人有帮助。）*

# 有限或短期信号

RAC 内存管理最重要的准则是**订阅在完成或错误时自动终止，并且订阅者被删除**。要使用您的循环引用示例：

```
calling scope -> disposable -> signal -> subscriber -> calling scope 
```

......这意味着`signal -> subscriber`关系一旦`signal`完成就会被拆除，从而打破保留周期。

**这通常是您所需要**的，因为`RACSignal`内存中的生命周期自然会匹配事件流的逻辑生命周期。

# 无限信号

然而，无限信号（或寿命如此之长以至于它们可能是无限的信号）永远不会自然而然地消失。这就是一次性用品大放异彩的地方。

**处置订阅将删除关联的订阅者**，并且通常只清理与该订阅关联的所有资源。对于那个订阅者来说，就好像信号已经完成或出错了，只是没有在信号上发送最终事件。所有其他订阅者将保持不变。

但是，作为一般经验法则，**如果您必须手动管理订阅的生命周期，则可能有更好的方法来做您想做的事。**像`-take:`or之类的方法`-takeUntil:`将为您处理处置，您最终会得到更高级别的抽象。

# 来自的信号`self`

不过，这里仍然有一个棘手的中间情况。任何时候信号的生命周期都与调用范围相关联，您将有一个更难打破的循环。

这通常发生在使用`RACAble()`或`RACAbleWithStart()`在相对于 的关键路径上`self`，然后应用需要捕获的块时`self`。

这里最简单的答案就是**弱****捕获`self`**：

```
__weak id weakSelf = self;
[RACAble(self.username) subscribeNext:^(NSString *username) {
    id strongSelf = weakSelf;
    [strongSelf validateUsername];
}]; 
```

或者，在导入包含的[EXTScope.h](https://github.com/jspahrsummers/libextobjc/blob/master/extobjc/EXTScope.h)标头后：

```
@weakify(self);
[RACAble(self.username) subscribeNext:^(NSString *username) {
    @strongify(self);
    [self validateUsername];
}]; 
```

*（如果对象不支持弱引用，请分别用or替换`__weak`or 。）`@weakify``__unsafe_unretained``@unsafeify`*

但是，**您可能可以使用更好的模式。**例如，上面的示例也许可以写成：

```
[self rac_liftSelector:@selector(validateUsername:)
           withObjects:RACAble(self.username)]; 
```

或者：

```
RACSignal *validated = [RACAble(self.username) map:^(NSString *username) {
    // Put validation logic here.
    return @YES;
}]; 
```

与无限信号一样，通常有一些方法可以避免`self`从信号链中的块引用（或任何对象）。

* * *

为了有效地使用 ReactiveCocoa，以上信息确实是您所需要的。然而，我想再谈一点，只是为了技术上的好奇或任何有兴趣为 RAC 做贡献的人：

> 我还注意到该实现保留了一个进程全局活动信号列表。

这是绝对正确的。

“无需保留”的设计目标引出了一个问题：我们如何知道何时应该释放信号？如果它刚刚创建，从自动释放池中逃脱，并且还没有被保留怎么办？

真正的答案是*我们不这样做*，但我们通常可以假设调用者将在当前运行循环迭代中保留信号，如果他们想保留它。

最后：

1.  创建的信号会自动添加到一组全局活动信号中。
2.  该信号将等待主运行循环的单次通过，然后*如果它没有订阅者*，则将其从活动集中移除。除非信号以某种方式被保留，否则它将在此时解除分配。
3.  如果在该运行循环迭代中确实订阅了某些东西，则信号将保留在集合中。
4.  稍后，当所有订阅者都消失时，再次触发#2。

如果运行循环是递归旋转的（就像在 OS X 上的模态事件循环中），这可能会适得其反，但对于大多数或所有其他情况，它会使框架使用者的生活变得更加容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-05T16:33:12.940

我正在尝试解决 ReactiveCocoa 2.5 的内存管理之谜

```
RACSubject* subject = [RACSubject subject];
RACSignal* signal = [RACSignal return:@(1)];
NSLog(@"Retain count of RACSubject %ld", CFGetRetainCount((__bridge CFTypeRef)subject));
NSLog(@"Retain count of RACSignal %ld", CFGetRetainCount((__bridge CFTypeRef)signal)); 
```

第一行输出`1`，第二行输出`2`。似乎`RACSignal`会保留在某个地方，而`RACSubject`不是。如果您没有明确地保留`RACSubject`，它将在程序退出当前范围时被释放。

# jquery-mobile - 我可以只使用 jQuery 创建移动原生应用程序吗？

> ID：14100164
> 
> 赞同：0
> 
> 时间：2012-12-31T10:03:10.473
> 
> 标签：jquery-mobile, mobile

我是开发移动应用程序的初学者。我已经护目镜，但没有找到相关信息。我想知道，jquery可以开发原生移动应用吗？请建议..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T14:18:56.373

最简洁的答案是不。您可以使用直接的 HTML 和 JavaScript 构建基于 Web 的应用程序，但包含 jQuery 和 jQuery Mobile 将使您能够更轻松地以移动友好的方式设计您的应用程序。您还可以包含一个清单，甚至构建一个可以脱机工作的 HTML 应用程序，但这些都不会使其成为原生应用程序。

要生成可以通过其中一个应用商店下载和安装的原生应用程序，您需要将网页包装在原生框架中，其中最受欢迎的是 Adob​​e 的[PhoneGap](http://phonegap.com/)

PhoneGap 还允许您直接访问移动设备上的许多本机 API 点，这些点通常无法从直接的 HTML 和 JavaScript 中访问。

# ios - 已单击后停止 masterview 单元上的用户交互

> ID：14100167
> 
> 赞同：0
> 
> 时间：2012-12-31T10:03:40.813
> 
> 标签：ios, ipad, uitableview, uisplitviewcontroller, master-detail

对于`UISplitViewController`，我`UITableView`在我的主视图中有一个。

当我单击其中一个单元格时，我修改`DetailViewController`如下：

```
 [self.detailVCObj.navigationController pushViewController:settingsVCObj animated:YES]; 
```

但是，如果我再次单击同一个单元格，而不是什么都不做，则会再次推送一个新视图。
我应该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T12:01:09.497

尝试这个 ：

```
if(![[self.navigationController.viewControllers lastObject] isKindOfClass:[settingsClass Class]])
{
   // Push viewController
   [self.detailVCObj.navigationController pushViewController:settingsVCObj animated:YES];
} 
```

# java - 从字符串中删除随机表达式

> ID：14100168
> 
> 赞同：3
> 
> 时间：2012-12-31T10:03:47.150
> 
> 标签：java, sql, regex, oracle, substr

我有一个类似这样的字符串/列

```
String a = "000003023_AggregateStopLossLimit_W x3A 973911_2012-12-22.PDF"; 
```

我想创建一个没有该部分的子字符串`' x3A 973911'`。

这意味着我想要这样的东西，

```
000003023_AggregateStopLossLimit_W_2012-12-22.PDF 
```

有一个此类字符串的列表，这些字符串将具有不同的值但格式相同。我希望删除在第一个空格之后并在下一个'_'结束的字符串部分。

这是我已经做过的，工作正常，但想知道是否有更好的方法。

```
String b = a.replaceAll(a.substring(a.indexOf(" "), a.indexOf("_",a.indexOf(" "))),""); 
```

如果我可以在 db 本身（即 oracle）中而不是在 java 中执行此操作，那就更好了。任何想法直接使用选择从列中获取此格式化字符串？

还有一个要求，我不想显示文件的扩展名。
所以在“。”之后什么都没有。应该显示，这意味着像这样`'000003023_AggregateStopLossLimit_W_2012-12-22'`
我使用以前的 APC 解决方案尝试了以下操作

```
 select regexp_replace ( your_string
                          , '([^[:space]]*) (.*)_(.*)....'
                          , '\1_\3') as new_string from your_table 
```

这目前工作正常。
这应该删除最后 4 个字符，并且如果扩展名大于或小于 3 或字符串未被截断，则可能无法获得正确的结果。
我正在寻找一种更美观的方式来做到这一点。
任何机会？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T10:13:36.537

```
final String r = a.replaceAll(" .*?(?=_)", ""); 
```

如果你打印 r，它会给出输出：

```
000003023_AggregateStopLossLimit_W_2012-12-22.PDF 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-31T11:02:11.843

要在数据库中执行此操作：

```
select regexp_replace ( your_string
                         , '([^[:space]]*) (.*)_(.*)'
                         , '\1_\3') as new_string
from your_table 
```

* * *

不幸的是，Oracle 在其正则表达式实现中没有任何语法来强制执行惰性（非贪婪）。这就是为什么我原来的 '(.*) ' 包括`x3A`: 它与最后一个空格匹配，并带有以下下划线。但是，否定语法会将字符串隔离到第一个空格。

> “W后面的'_'不见了。还有机会得到它吗？”

您可以随意格式化替换字符串。简单的方法是做我所做的，并硬编码两个匹配模式之间的下划线。或者，您可以将其作为自己的搜索模式并将其包含在替换字符串中（尽管对于更复杂的搜索，您更有可能这样做）。

* * *

Oracle 在 10g 中引入了正则表达式；[文档](http://docs.oracle.com/cd/B19306_01/server.102/b14200/functions001.htm#sthref918)中介绍了这些功能。正则表达式实现是 POSIX 兼容的，所以它缺少一些你在 Perl 中可能遇到的功能。正则表达式支持[在 SQL ref 的附录中有详细说明。](http://docs.oracle.com/cd/B19306_01/server.102/b14200/ap_posix.htm#i691974)

至于教程，我有一本 O'Reilly 袖珍书，翻阅次数很多。我在 Open World 2003 上收到了我的副本，但是这本电子书价格合理。 [在这里买](http://shop.oreilly.com/product/9780596006013.do)。另一个好的起点是`cd`OTN 论坛上的一系列主题：[从这里开始阅读](https://forums.oracle.com/forums/thread.jspa?threadID=427716&tstart=0)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-31T11:01:32.773

如果您需要 SQL 解决方案，这将更新行：

```
update yourtable
set field = substr(field, 0, instr(field, ' ')-1) || substr(field, instr(field, '_', instr(field, ' ')))
; 
```

这将只显示转换后的值：

```
select
  yourtable.field,
  case
    when instr(field, '_', instr(field, ' '))>instr(field, ' ')
    then substr(field, 0, instr(field, ' ')-1) || substr(field, instr(field, '_', instr(field, ' ')))
    else field
  end as new_field
from
  yourtable 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-31T10:06:47.907

`replaceAll`将正则表达式作为参数，如果子字符串包含正则表达式标记（例如`[`，`+`例如），您将得到意外的行为。

您可以`replace`改用它做同样的事情，但将字符串作为参数。

除此之外，如果您知道您将有一个空格和 a`_`作为分隔符，并且中间的子字符串不会出现在其他地方，那么您的方法看起来不错。您可以使用中间变量使其更具可读性：

```
int start = a.indexOf(" ");
int end = a.indexOf("_", start);
String b = a.substring(0, start) + a.substring(end, a.length()); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-31T10:09:40.523

除了您提供的代码中的正则表达式问题外，我发现它的可读性也较差。

尝试以下操作：

```
int f = a.indexOf(" ");
int l = a.lastIndexOf("_");
a = a.substring(0,f+1) + a.substring(l+1, a.length); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-31T10:21:15.540

您应该替换 REGEX_REPLACE 函数。

[http://docs.oracle.com/cd/B12037_01/server.101/b10759/functions115.htm#SQLRF06302](http://docs.oracle.com/cd/B12037_01/server.101/b10759/functions115.htm#SQLRF06302)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-12-31T16:13:46.973

上面@Kent 给出的Java 解决方案非常优雅，我推荐它。也就是说，如果您想使用 Oracle 的正则表达式引擎完成此操作，您可以尝试以下操作：

```
WITH t1 AS (
    SELECT '000003023_AggregateStopLossLimit_W x3A 973911_2012-12-22.PDF' AS filename
      FROM dual
)
SELECT filename, REGEXP_REPLACE(filename, ' [^_]*', '')
  FROM t1 
```

# algorithm - 查找出现一次的元素

> ID：14100169
> 
> 赞同：17
> 
> 时间：2012-12-31T10:03:50.280
> 
> 标签：algorithm

查找出现一次的元素

给定一个数组，其中每个元素都出现 3 次，除了一个元素只出现一次。找到出现一次的元素。

预期时间复杂度为 O(n) 和 O(1) 额外空间。

例子：

输入：arr[] = {12, 1, 12, 3, 12, 1, 1, 2, 3, 3}

输出：2

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-31T10:39:36.873

如果不存在 O(1) 空间约束，那么您可能已经使用了值作为出现次数的哈希图。

```
int getUniqueElement(int[] arr)
{
    int ones = 0 ; //At any point of time, this variable holds XOR of all the elements which have appeared "only" once.
    int twos = 0 ; //At any point of time, this variable holds XOR of all the elements which have appeared "only" twice.
    int not_threes ;

    for( int x : arr )
    {
        twos |= ones & x ; //add it to twos if it exists in ones
        ones ^= x ; //if it exists in ones, remove it, otherwise, add it

        // Next 3 lines of code just converts the common 1's between "ones" and "twos" to zero.

        not_threes = ~(ones & twos) ;//if x is in ones and twos, dont add it to Threes.
        ones &= not_threes ;//remove x from ones
        twos &= not_threes ;//remove x from twos
    } 
    return ones;
} 
```

基本上，它利用了`x^x = 0`和`0^x=x`. 所以所有成对的元素都会被异或并消失，留下孤独的元素。

简而言之 ：

如果一个位已经在一个中，则将其添加到两个中。

如果它不存在，XOR 会将这个位添加到那些，或者如果它已经存在，则从这些位中删除这个位。

如果一个位在一个和两个中，从一个和两个中删除它。

完成后，ones 包含仅出现 3*n+1 次的位，即仅出现一次的元素的位。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-11-29T03:48:10.243

JavaScript 解决方案：

```
function findElement(arr) {
  var ones = 0;
  var twos = 0;
  for (var i = 0; i < arr.length; i++) {
    ones = (ones ^ arr[i]) & ~twos;
    twos = (twos ^ arr[i]) & ~ones;
  }
  return ones;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-31T12:47:13.777

如此处所述，可以在最坏情况 O(n) 时间和 O(1) 额外空间中找到数组元素的中值[。](http://en.wikipedia.org/wiki/Selection_algorithm#Linear_general_selection_algorithm_-_Median_of_Medians_algorithm)所以我们可以用分治法来解决这个问题：

在 O(n) 时间内找到中位数并计算 O(n) 中小于或等于中位数的元素数。如果这个数字是 3k+1，则表示答案小于或等于中位数，所以在 O(n) 中省略大于中位数的元素。否则，省略那些小于或等于中位数的。然后递归地在 T(n/2) 的剩余元素中找到答案。注意：剩余元素的数量是 n/2，因为我们省略了一半的元素。

所以 T(n) = T(n/2)+O(n) = O(n) 我们需要 O(1) 额外的空间。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-03-12T03:25:13.560

```
// as we know every number is present thrice except one number means   that if we observe the bits at each place we will find that the set bits at each place are either multiple of 3n or 3n+1 ( when unique num has set bit at that place ) 
```

前 - 12、1、12、3、12、1、1、2、3、3

```
12- 1 1 0 0
1 - 0 0 0 1
12- 1 1 0 0
3 - 0 0 1 1
12- 1 1 0 0
1 - 0 0 0 1
1 - 0 0 0 1
2 - 0 0 1 0
3 - 0 0 1 1
3 - 0 0 1 1 
```

* * *

```
 3 3 4 6    ( 3n or 3n+1 ) form 
```

它是 3n+1 形式的地方意味着唯一编号在这里设置了位，所以现在我们很容易提取唯一编号，因为我们知道它的设置位位置。

```
#include<iostream>

using namespace std;

int main() {

   int n,num,j;
   int set[64]={0}; // maximum bits
   cin>>n;
   for(int i=0;i<n;i++){
       cin>>num;
       j=0;

       while(num){
           set[j]+=(num&1);
           num=num>>1;
           j++;
       }
   }
int ans=0,p=1;
for(int i=0;i<n;i++){

    ans+=(set[i]%3)*p;
    p=p*2;
}
cout<<ans<<endl;

} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-31T14:53:51.287

我提出了一个类似于 mhsekhavat 提出的解决方案。我建议使用荷兰国旗问题的划分算法而不是确定中位数[http://en.wikipedia.org/wiki/Dutch_national_flag_problem](http://en.wikipedia.org/wiki/Dutch_national_flag_problem)（是的，我是荷兰人并且接受了 Dijkstra 风格的教育）。

应用该算法的结果是一个分成红色、白色和蓝色部分的数组。白色部分可以被认为是枢轴。请注意，白色部分由等于枢轴的所有元素组成，因此白色部分将包含 1 或 3 个元素。红色部分由小于枢轴的元素组成，蓝色部分由大于枢轴的元素组成。（注意红蓝部分没有排序！）

接下来，计算红色、白色和蓝色部分的元素数量。如果任何部分由 1 个元素组成，那么这就是您要查找的数字。否则，对于给定数量的 k，红色或蓝色部分由 3k+1 个元素组成。对包含 3k+1 个元素的部分重复该算法。最终其中一个零件的尺寸为 1。

该算法在 O(n) 中运行并且需要 O(1) 个变量。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-10-02T06:23:43.807

尽管问题已经得到解答，但我发现以下内容更直观，因此将其添加为答案。最初从[这里](https://www.quora.com/Given-an-integer-array-such-that-every-element-occurs-3-times-except-one-element-which-occurs-only-once-how-do-I-find-that-single-element-in-O-1-space-and-O-n-time-complexity)

```
int singleNumber(vector<int>& nums) {
    /*Bits in 'ones' are set to 1, when that particular bit 
      occurs for the first time. Bits in 'twos' are set to 1, 
      when that particular bit occurs for the second time. If a 
      bit is occurring for more than 2 times, we throw it away 
      and start counting again.*/
    int ones = 0;
    int twos = 0;
    for (auto elem : nums) {
        int onesOld = ones;
        /* (ones ^ elem): consider the ith bit in 'ones' be 0 (i.e. ith 
           bit has not occurred till now or has occurred 2 times) and in 
           'elem' be 1\. So, for the ith bit (ones ^ elem) gives 1\. Now,
           ith bit could have occurred even number of times as well (i.e. 
           ith bit in twos is set to 1). If that was the case, we 
           would like to ignore such bit. This last part is taken care 
           of by '&' with '~twos' 
           */
        ones = (ones ^ elem) & ~twos;
        /* (onesOld & elem) gives the bits which have occurred ones 
           and also occur in this particular element. (twos & ~elem) 
           gives the bits that have occurred twice and do not occur 
           in this element. Both these cases take care of the bits 
           that have occurred 2 times (although a bit might be set 
           more than 2 times, like 5,7... but we take only modulo 3 
           count).
        */
        twos = (onesOld & elem) | (twos & ~elem);
    }
    return ones;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-11-16T07:06:18.800

考虑它们的二进制表示并将每个位置的位数相加。例如 [ 1, 1, 1, 2, 2, 2, 3] 给出 [4, 4]，只考虑表示这些数字所需的两位。取其中的 mod 3 给出 [1,1] ，它是二进制的 11 = 3，这是正确的答案。这仍然是 O(1) 空间，因为它不随元素数量而缩放，但仍然可能有一个巨大的前置因子。

一些草率的cpp代码：

```
int l = arr.size();
int nbits = 32;
vector<int> bits(nbits,0);

for( int i = 0; i < l; i++ ){
    for( int j = 0; j < nbits; j++ ){
        bits[j] +=  ( A[i] >>j ) & 1;
    }
}
int missing = 0;
for( int j = 0 ; j < nbits; j++ ){
    if( bits[j]%3 == 1 ){
         set_bit( missing, j );
    }
} 
```

几乎可以肯定，这可以由比我更了解按位运算的人来优化（没有人喜欢循环中的循环......）。无论如何，我认为这应该适用于任何“k-duplicates 除了其中一个”类型的问题，假设丢失的只出现一次。

编辑：Leo Polovets 在这里也详细说明了这个答案 [https://www.quora.com/Given-an-integer-array-such-that-every-element-occurs-3-times-except-one-element-仅发生一次，我如何在 O-1 空间和时间复杂度中找到单个元素](https://www.quora.com/Given-an-integer-array-such-that-every-element-occurs-3-times-except-one-element-which-occurs-only-once-how-do-I-find-that-single-element-in-O-1-space-and-O-n-time-complexity)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-05-13T11:13:01.410

最好的解决方案是使用 XOR。所有数组元素的 XOR 为我们提供了一次出现的数字。这个想法是基于以下两个事实。a) 一个数与自身的 XOR 是 0。 b) 一个数与 0 的 XOR 是数字本身。

```
int findSingle(int ar[], int ar_size) 
    { 
        // Do XOR of all elements and return 
        int res = ar[0]; 
        for (int i = 1; i < ar_size; i++) 
            res = res ^ ar[i]; 

        return res; 
    } 
```

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2019-01-08T20:47:30.960

将每个数字相加一次并将总和乘以 3，我们将得到数组中每个元素的总和的三次。将其存储为 thrice_sum。从 thrice_sum 中减去整个数组的总和，然后将结果除以 2。我们得到的数字就是所需的数字（在数组中出现一次）。

```
def singlenumbers(arr):
   return (3* sum(set(arr)) - sum(arr))//2
arr =  [6, 1, 3, 3, 3, 6, 6]
print(singlenumbers(arr)) 
```

* * *

## 回答 #10

> 赞同：-3
> 
> 时间：2018-07-06T19:04:40.203

```
def apperasonce(arr1):
    n=len(arr1)
    for i in range(0,n):
        if arr1.count(arr1[i]) == 1:
            return arr1[i]

arr1=[12,1,12,3,12,1,1,2,3,3]
a=apperasonce(arr1)
print(a) 
```

# iphone - 使标签中的单词触发方法

> ID：14100170
> 
> 赞同：0
> 
> 时间：2012-12-31T10:03:51.470
> 
> 标签：iphone, xcode, cocoa-touch, ios6, uilabel

`UILabel`有没有一种方法或框架可以让我在触发器中单击一个/多个单词？我在其他地方找到的那些并没有给我这样做的选项，它们只解析电话号码、url、事件等。

**编辑：**

我忘了补充一点，标签是从一些解析的数据动态创建的。所以我还需要能够动态地做到这一点。

**编辑：**

另外，我需要选择这个词作为参数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T10:22:20.270

请参阅以下链接： [从 UILabel 获取单词](https://stackoverflow.com/questions/8811909/getting-the-word-touched-in-a-uilabel-uitextview)

通过从 UILabel 获取单词，您可以通过触摸 UILabel 对您得到的单词应用条件。并对您正在获取的单词触发操作。

愿这对你有帮助..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T10:07:37.547

您可以在该单词（标签上方）上放置一个 uibutton，并创建按钮事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T10:09:00.450

1.  使用以下代码创建动态自定义按钮

    ```
    UIButton *btn = [UIButton buttonWithType:UIButtonTypeCustom];

    [btn setFrame:CGRectMake(lbl.frame.origin.x - 5, lbl.frame.origin.y - 5, lbl.frame.size.width + 10, lbl.frame.size.height + 10)];

    [btn setBackgroundColor:[UIColor clearColor]];
    [self.view addSubview:btn]; *where lbl = <YOUR DYNAMIC LABLE>* 
    ```

2.  给出一个内部修饰的方法，如下所述

    ```
    [btn addTarget:self action:@selector(<YOUR_METHOD_NAME_TO_INVOKE>) forControlEvents:UIControlEventTouchUpInside]; 
    ```

创建一个没有图像的自定义按钮。将标签放在它前面。& 将方法委托集成到自定义按钮。你会发现和你想要的一样。。

享受编程！

# c++ - 模板构造函数优先于普通复制和移动构造函数？

> ID：14100171
> 
> 赞同：6
> 
> 时间：2012-12-31T10:03:55.020
> 
> 标签：c++, c++11

以下程序的输出...

```
#include <iostream>

using namespace std;

struct X
{
    X(const X&)              { cout << "copy" << endl; }
    X(X&&)                   { cout << "move" << endl; }

    template<class T> X(T&&) { cout << "tmpl" << endl; }
};

int main()
{
    X x1 = 42;
    X x2(x1);
} 
```

是

```
tmpl
tmpl 
```

所需的输出是：

```
tmpl
copy 
```

为什么具体的复制构造函数不优先于模板构造函数？

无论如何要修复它，以便复制和移动构造函数重载优先于模板构造函数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-31T10:13:06.267

**嗯，这是因为[reference-collapsing](http://thbecker.net/articles/rvalue_references/section_08.html)**。

在重载解析阶段，当函数模板被实例化时，`T`被推断为`X&`，因此`T&&`（即`X& &&`）成为`X&`由于引用折叠，并且从函数模板中实例化的函数变为*精确匹配*并且复制构造函数*需要*从`X&`to `const X&`（这就是为什么不选择*劣质匹配*的原因）。

但是，如果您`const`从复制构造函数中删除 ，则将首选复制构造函数。试试这个：

```
X(/*const*/ X&) { cout << "copy" << endl; } 
```

按预期[输出。](http://ideone.com/wAOpyo)

或者，如果您将函数模板中的参数设置为 as`const T&`然后将调用复制构造函数（即使它保持不变！），因为引用折叠现在不会出现：

```
template<class T> X(const T &) { cout << "tmpl" << endl; } 
```

再次预期[输出。](http://ideone.com/MvWoKB)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-31T10:50:32.873

如果您不想添加另一个构造函数（如其他答案所建议的那样），您可以使用 SFINAE 来约束调用，方法是用以下替换模板构造函数：

```
template<class T
    , typename std::enable_if<not std::is_same<X, typename std::decay<T>::type>::value, int>::type = 0 
> X(T&&) { cout << "tmpl " << endl; } 
```

这仅涉及添加`dummy`默认模板参数（一种已知技术： http: [//www.boost.org/doc/libs/1_52_0/libs/utility/enable_if.html](http://www.boost.org/doc/libs/1_52_0/libs/utility/enable_if.html)）。不需要额外的标题。

您将获得所需的输出。

我从一个相关问题中得到了这个答案：http: [//flamingdangerzone.com/cxx11/2012/06/05/is_related.html](http://flamingdangerzone.com/cxx11/2012/06/05/is_related.html)。这一切看起来相当不雅，但似乎是目前唯一的出路。我仍然希望看到一个更优雅的解决方案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-31T10:14:30.327

选择构造函数时，正常的重载解析规则仍然适用 - 采用非 const 左值引用的构造函数（对于参数推导后的模板构造函数）比采用 const 左值引用的构造函数更匹配。

当然，您可以添加另一个采用非常量左值引用的重载，即

```
X(X&)              { cout << "copy" << endl; } 
```

**更新**：模板构造函数更匹配的其他情况：

```
const X f()
{ return X(); }

struct Y : X
{ Y() { } };

int main()
{
  X x3(f()); // const-qualified rvalue
  Y y;
  X x4(y); // derived class
} 
```

# android - 如何实现基于语音的事件？

> ID：14100176
> 
> 赞同：4
> 
> 时间：2012-12-31T10:04:30.920
> 
> 标签：android, voice, voice-recognition

我想在我的应用程序中进行基于语音的操作。例如，当我想在收藏夹列表中添加一些东西时，我们通常遵循的方式是单击一个按钮，但这里我想通过***语音***触发该任务，比如说“ `Add to Favorites`”..

这可能吗？如果是这样，我们应该使用哪个库？

请提供任何相关的超链接或建议与之相关的 github 库（如果有）。

[在http://vimeo.com/52775114](http://vimeo.com/52775114)有一个示例视频

问候，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T10:38:06.407

[http://developer.android.com/reference/android/speech/RecognizerIntent.html](http://developer.android.com/reference/android/speech/RecognizerIntent.html)

您可以使用识别语音来识别将数据返回为字符串数组的语音。它不需要任何额外的库等，实际上它非常容易编码。您开始按按钮等的意图，它会听取并返回对所说内容的解释。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-31T12:46:55.510

是的，这是可能的。Android 原生提供 Speech to Text API 的功能来构建这种支持语音的应用程序。本教程对你来说是一个很好的开始..
[Android Speech to Text Coversion](http://viralpatel.net/blogs/android-speech-to-text-api/)

# java - 将 JAR 文件转换为 EXE 后，程序抛出异常

> ID：14100180
> 
> 赞同：-1
> 
> 时间：2012-12-31T10:04:42.587
> 
> 标签：java, jar, exe

我有 .java 文件。它运行完美。我将其转换为 .jar 文件。然后我尝试使用名为“exe4j”的程序将其转换为 .exe 文件，并成功转换。但是，当我打开这个 .exe 文件时，会出现一条错误消息：

```
java.util.NoSuchElementException
     at java.util.Scanner.throwFor(Unknown Source)
     at java.util.Scanner.next(Unknown Source)
     at penghitung.persentase(programguru.java:27)
     at programguru.main(programguru.java:361)
     at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
     at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
     at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
     at java.lang.reflect.Method.invoke(Unknown Source)
     at com.exe4j.runtime.LauncherEngine.launch(Unknown Source)
     at com.exe4j.runtime.WinLauncher.main(Unknown Source) 
```

什么意思？我很困惑，因为 .java 文件运行完美。

这是我的代码：

```
import java.util.*;
import java.io.*;

class penghitung
{
Scanner input = new Scanner(System.in);
int banyak, nilai, jumlah1, jumlah2, jumlah3, jumlah4, a, b, c, d, e, f, aa, bb, cc, dd, rata7;
long pengetahuan;
double numerik, rata1, rata2, rata3, rata4, rata5, rata6;
String pers, absen, predikat, prak, coba;

public void persentase()
{
    System.out.print("\n           *************************************");
    System.out.print("\n           ************START PROGRAM************");
    System.out.print("\n           *************************************");

    System.out.print("\n\nDEFAULT : ");
    System.out.print("\n  Tugas Sekolah  : 10 %");
    System.out.print("\n  Tugas Rumah    : 10 %");
    System.out.print("\n  Ulangan Harian : 20 %");
    System.out.print("\n  UTS            : 25 %");
    System.out.print("\n  UAS            : 30 %");
    System.out.print("\n  Keaktifan      : 5%");

    System.out.print("\n\nApakah anda ingin mengganti persentase tiap kategori? (Y/T) : ");
    pers = input.next();

    a = 10;
    b = 10;
    c = 20;
    d = 25;
    e = 30;
    f = 5;

    if (pers.equals("Y") || pers.equals("y"))
    {
        System.out.print("\n(Dalam persen)");
        System.out.print("\n  Tugas Sekolah  : ");
        a = Integer.parseInt(input.next());
        System.out.print("  Tugas Rumah    : ");
        b = Integer.parseInt(input.next());
        System.out.print("  Ulangan Harian : ");
        c = Integer.parseInt(input.next());
        System.out.print("  UTS            : ");
        d = Integer.parseInt(input.next());
        System.out.print("  UAS            : ");
        e = Integer.parseInt(input.next());
        System.out.print("  Keaktifan      : ");
        f = Integer.parseInt(input.next()); 
    }

    System.out.print("\nBanyak nilai Tugas Sekolah  : ");
    aa = Integer.parseInt(input.next());
    System.out.print("Banyak nilai Tugas Rumah    : ");
    bb = Integer.parseInt(input.next());
    System.out.print("Banyak nilai Ulangan Harian : ");
    cc = Integer.parseInt(input.next());

    System.out.print("\nApakah ada nilai Praktikum? (Y/T) : ");
    prak = input.next();
    if (prak.equals("Y") || prak.equals("y"))
    {   System.out.print("Banyak nilai Praktikum : ");
        dd = Integer.parseInt(input.next());
    }
}   

public void absen()
{
    System.out.print("\n----------------------------------------------------------------");
    System.out.print("\nNomor absen murid : ");
    absen = input.next();
    try 
    {
        FileWriter out = new FileWriter("Data Nilai.txt", true);
        out.write("\r\n#################### NOMOR ABSEN MURID : "+ absen + "\r\n");
        out.close();
    }
    catch (IOException e) 
    {
        e.printStackTrace();
    }
}

public void tugasSekolah()
{
    System.out.print("\nTUGAS SEKOLAH\n");
    try 
    {
        FileWriter out = new FileWriter("Data Nilai.txt", true);
        out.write("\r\nTUGAS SEKOLAH\r\n");

        for (int i = 1; i <= aa; i++)
        {
            if(aa==1)
            {
                System.out.print("  Nilai : ");
                out.write("  Nilai = " + nilai + "\r\n");
                nilai = Integer.parseInt(input.next());
            }
            else 
            {   
                System.out.print("  Nilai ke-" +i+ " : ");
                nilai = Integer.parseInt(input.next());
                out.write("  Nilai ke-" +i+ " = " + nilai + "\r\n");
            }
            jumlah1 += nilai;
            rata1 = jumlah1 / aa * a / 100;   
        }
            out.close();
    }
    catch (IOException e) 
    {
        e.printStackTrace();
    }
}

public void tugasRumah()
{
    System.out.print("\nTUGAS RUMAH\n");
    try 
    {
        FileWriter out = new FileWriter("Data Nilai.txt", true);
        out.write("\r\nTUGAS RUMAH\r\n");

        for (int i=1; i<=bb; i++)
        {
            if(bb==1)
            {
                System.out.print("  Nilai : ");
                out.write("  Nilai = " + nilai + "\r\n");
                nilai = Integer.parseInt(input.next());
            }
            else 
            {
                System.out.print("  Nilai ke-" +i+ " : ");
                nilai = Integer.parseInt(input.next());
                out.write("  Nilai ke-" +i+ " = " + nilai + "\r\n");
            }
            jumlah2 += nilai;
            rata2 = jumlah2 / bb * b / 100;
        }
            out.close();
    } 
    catch (IOException e) 
    {
        e.printStackTrace();
    } 
}

public void ulanganHarian()
{
    System.out.print("\nULANGAN HARIAN\n");
    try 
    {
        FileWriter out = new FileWriter("Data Nilai.txt", true);
        out.write("\r\nULANGAN HARIAN\r\n");

        for (int i=1; i<=cc; i++)
        {
            if(cc==1)
            {
                System.out.print("  Nilai : ");
                out.write("  Nilai = " + nilai + "\r\n");
                nilai = Integer.parseInt(input.next());
            }
            else 
            {
                System.out.print("  Nilai ke-" +i+ " : ");
                nilai = Integer.parseInt(input.next()); 
                out.write("  Nilai ke-" +i+ " = " + nilai + "\r\n");
            }
            jumlah3 += nilai;
            rata3 = jumlah3 / cc * c / 100;
        }
            out.close();
    } 
    catch (IOException e) 
    {
        e.printStackTrace();
    } 
}

public void uts()
{
    System.out.print("\nUTS\n");
    System.out.print(" Nilai : ");
    nilai = Integer.parseInt(input.next());
    rata4 = nilai * d / 100;
    try 
    {
        FileWriter out = new FileWriter("Data Nilai.txt", true);
        out.write("\r\nUTS\r\n");
        out.write("  Nilai = " + nilai + "\r\n");
        out.close();
    }
    catch (IOException e) 
    {
        e.printStackTrace();
    } 
}

public void uas()
{
    System.out.print("\nUAS\n");
    System.out.print(" Nilai : ");
    nilai = Integer.parseInt(input.next()); 
    rata5 = nilai * e / 100;
    try 
    {
        FileWriter out = new FileWriter("Data Nilai.txt", true);
        out.write("\r\nUAS\r\n");
        out.write("  Nilai = " + nilai + "\r\n");
        out.close();
    }
    catch (IOException e) 
    {
        e.printStackTrace();
    } 
}

public void keaktifan()
{
    System.out.print("\nKEAKTIFAN\n");
    System.out.print(" Nilai : ");
    nilai = Integer.parseInt(input.next());
    rata6 = nilai * f / 100;
    try 
    {
        FileWriter out = new FileWriter("Data Nilai.txt", true);
        out.write("\r\nKEAKTIFAN\r\n");
        out.write("  Nilai = " + nilai + "\r\n");
        out.close();
    }
    catch (IOException e) 
    {
        e.printStackTrace();
    } 
}   

public void praktikum()
{
    if (prak.equals("Y") || prak.equals("y"))
    {
        System.out.print("\nPRAKTIKUM\n");
        try 
        {
            FileWriter out = new FileWriter("Data Nilai.txt", true);
            out.write("\r\nPRAKTIKUM\r\n");

            for (int i=1; i<=dd; i++)
            {
                if(dd==1)
                {
                    System.out.print("  Nilai : ");
                    out.write("  Nilai = " + nilai + "\r\n");
                    nilai = Integer.parseInt(input.next());
                }
                else 
                {
                    System.out.print(" Nilai ke-" +i+ " : ");
                    nilai = Integer.parseInt(input.next()); 
                    out.write("  Nilai ke-" +i+ " = " + nilai + "\r\n");
                }
                jumlah4 += nilai;
                rata7 = Math.round(jumlah4 / dd);
            }
                out.write("\r\n>>> NILAI PRAKTIK: " +rata7);
                out.close();
        } 
        catch (IOException e) 
        {
            e.printStackTrace();
        } 

        System.out.print("\n\n***NILAI PRAKTIK***     : "+rata7);

    }
}   

public void pengetahuan()
{
    System.out.print("\n***NILAI PENGETAHUAN*** : ");
    pengetahuan = Math.round(rata1 + rata2 + rata3 + rata4 + rata5 + rata6);
    System.out.print(pengetahuan);
    try 
    {
        FileWriter out = new FileWriter("Data Nilai.txt", true);
        out.write("\r\n>>> NILAI PENGETAHUAN: " +pengetahuan);
        out.close();
    }
    catch (IOException e) 
    {
        e.printStackTrace();
    } 
}

public void predikat()
{
    if(pengetahuan > 75)
    {
        predikat = "TINGGI";
    } else if(pengetahuan == 75)
    {
        predikat = "SEDANG";
    } else
    {
        predikat = "KURANG";
    }
    System.out.print("\n***PREDIKAT***          : " +predikat);
    try 
    {
        FileWriter out = new FileWriter("Data Nilai.txt", true);
        out.write("\r\n>>> PREDIKAT : " +predikat+ "\r\n");
        out.close();
    }
    catch (IOException e) 
    {
        e.printStackTrace();
    } 
}

public void menu()
{
    System.out.print("\n\nTambah lagi? (Y/T) : ");
    coba = input.next();

    if (coba.equals("Y") || coba.equals("y"))
    {
        absen();
        tugasSekolah();
        tugasRumah();
        ulanganHarian();
        uts();
        uas();
        keaktifan();
        praktikum();
        pengetahuan();
        predikat();
        menu();
    }
    else 
    {
        System.out.print("\n           **************************************");
        System.out.print("\n           *************EXIT PROGRAM*************");
        System.out.print("\n           **************************************");
    }
}
}

public class programguru
{
public static void main (String args[])
{       
    penghitung penghitungku = new penghitung();

    //PERSENTASE NILAI
    penghitungku.persentase();

    //NOMOR ABSEN
    penghitungku.absen();

    //NILAI TUGAS SEKOLAH
    penghitungku.tugasSekolah();

    //NILAI TUGAS RUMAH
    penghitungku.tugasRumah();

    //NILAI ULANGAN HARIAN
    penghitungku.ulanganHarian();

    //NILAI UTS
    penghitungku.uts();

    //NILAI UAS
    penghitungku.uas();

    //NILAI KEAKTIFAN
    penghitungku.keaktifan();

    //NILAI PRAKTIKUM
    penghitungku.praktikum();

    //NILAI PENGETAHUAN
    penghitungku.pengetahuan();

    //PREDIKAT
    penghitungku.predikat();

    //MENU TAMBAH
    penghitungku.menu();
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T17:16:16.460

这里只是猜测，因为信息不完整：错误消息表明您在第一次执行“input.next();”的位置有错误 除了表明“没有这样的元素”之外。如果您在 Windows 上，并且您通过双击文件夹中的图标来启动此可执行文件，那么您必须弄清楚“System.in”的来源。Windows 不会自动打开命令窗口供您输入；如果你想要那样，你必须以不同的方式运行它。

# c# - 删除动态创建的文本框

> ID：14100181
> 
> 赞同：0
> 
> 时间：2012-12-31T10:04:51.797
> 
> 标签：c#, forms, textbox

我编写了一个代码来从单个文本框的输入动态创建文本框![生成文本框的图像](../Images/dac7d50bb9b941797d451e7957171f68.png)。

当用户输入数据时，它应该自动生成这样的文本框......

![带图像](../Images/91516fcf7a96f0f851bc9f6a5d558db6.png)

我用过这段代码

```
private void textBoxInput_TextChanged(object sender, EventArgs e)
    {
        if (!string.IsNullOrEmpty(textBoxInput.Text))
        {
            //Get the number of input text boxes to generate
            int inputNumber = Int32.Parse(textBoxInput.Text);

            //Initialize list of input text boxes
            inputTextBoxes = new List<TextBox>();

            //Generate labels and text boxes
            for (int i = 1; i <= inputNumber; i++)
            {
                //Create a new label and text box
                Label labelInput = new Label();
                TextBox textBoxNewInput = new TextBox();

                //Initialize label's property
                labelInput.Text = "Product" + i;
                labelInput.Location = new Point(30, textBoxInput.Bottom + (i * 30));
                labelInput.AutoSize = true;

                //Initialize textBoxes Property
                textBoxNewInput.Location = new Point(labelInput.Width, labelInput.Top - 3);

                //Add the newly created text box to the list of input text boxes
                inputTextBoxes.Add(textBoxNewInput);

                //Add the labels and text box to the form
                this.Controls.Add(labelInput);
                this.Controls.Add(textBoxNewInput);
            }

        }
 } 
```

它工作得很好，但如果用户更改文本框中的值，我想更新该文本框，它应该动态更改。但它没有发生

我也尝试过其他条件

```
 else
        {
            MessageBox.Show("Enter Value");

            this.Controls.Clear();
            this.Controls.Clear();

        } 
```

但它会删除此表单中的所有值。

我怎样才能只删除生成的文本框

**更新** 在这里，我根据@New Developer 的想法进行了更改

```
 if (!string.IsNullOrEmpty(textBoxInput.Text))
        {
            //Get the number of input text boxes to generate
            int inputNumber = Int32.Parse(textBoxInput.Text);

            if (inputTextBoxes != null && inputTextBoxes.Count > inputNumber)
            {
                int removecount = inputTextBoxes.Count - inputNumber;

                for (int i = 0; i < removecount; i++)
                {
                    TextBox t = inputTextBoxes[inputTextBoxes.Count - 1];
                    inputTextBoxes.RemoveAt(inputTextBoxes.Count - 1);
                    t.Dispose();
                }

                return;
            }

            if (inputlabels != null && inputlabels.Count > inputNumber)
            {
                int removecount2 = inputlabels.Count - inputNumber;

                for (int i = 0; i < removecount2; i++)
                {
                    Label l = inputlabels[inputlabels.Count - 1];
                    inputlabels.RemoveAt(inputlabels.Count - 1);
                    l.Dispose();
                }

                return;
            }

            //Generate labels and text boxes
            for (int i = 1; i <= inputNumber; i++)
            {
                //Create a new label and text box
                Label labelInput = new Label();
                TextBox textBoxNewInput = new TextBox();

                //Initialize label's property
                labelInput.Text = "Product" + i;
                labelInput.Location = new Point(30, textBoxInput.Bottom + (i * 30));
                labelInput.AutoSize = true;

                //Initialize textBoxes Property
                textBoxNewInput.Location = new Point(labelInput.Width, labelInput.Top - 3);

                //Add the newly created text box to the list of input text boxes
                inputTextBoxes.Add(textBoxNewInput);
                inputlabels.Add(labelInput);

                //Add the labels and text box to the form
                this.Controls.Add(labelInput);
                this.Controls.Add(textBoxNewInput);
            }
        }
    } 
```

并且还添加了

```
 List<TextBox> inputTextBoxes = new List<TextBox>();
    List<Label> inputlabels = new List<Label>(); 
```

在这里它工作，但价值每次都会改变

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T10:13:48.657

有两种方法可以做到这一点：

一种方法是在创建它们时维护指向文本框和标签的指针列表：

在您的类定义中，添加一个私有列表变量：

```
public partial class Form1 : Form
{
    private List<TextBox> generatedTextboxes = new List<TextBox>();
    private List<Label> generatedLabels = new List<Label>();

.... 
```

现在，当您创建它们时，将它们添加到列表中：

```
//Generate labels and text boxes
for (int i = 1; i <= inputNumber; i++)
{
    //Create a new label and text box
    Label labelInput = new Label();
    TextBox textBoxNewInput = new TextBox();
    //Keep track of the references
    generatedTextboxes.Add(textBoxNewInput);
    generatedLabels.Add(labelInput );
    .... 
```

现在，当您希望删除它们时：

```
for (int i = 1; i <= generatedTextboxes.Count; i++)
{
    this.Controls.Remove(generatedTextboxes[i]);
    this.Controls.Remove(generatedLabels[i]);
}

generatedTextboxes.Clear();
generatedLabels.Clear(); 
```

另一种方法是在您的表单上放置一个`Panel`控件，并将新的文本框/标签添加到该表单上，而不是直接添加到主表单上。然后，执行`panel1.Controls.Clear()`- 清除面板上的控件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T10:56:28.523

**编辑**
抱歉，我的代码中有错误。这绝对应该没问题。试试这个。如果这也不起作用，请告诉我。

```
 List<TextBox> inputTextBoxes =  new List<TextBox>();

    private void textBoxInput_TextChanged(object sender, EventArgs e)
    {
        if (!string.IsNullOrEmpty(textBoxInput.Text))
        {
            //Get the number of input text boxes to generate
            int inputNumber = Int32.Parse(textBoxInput.Text);
            if (inputTextBoxes != null && inputTextBoxes.Count > inputNumber)
            {
                int removecount = inputTextBoxes.Count - inputNumber;

                for (int i = 0; i < removecount; i++)
                {
                    TextBox t = inputTextBoxes[inputTextBoxes.Count-1];
                    inputTextBoxes.RemoveAt(inputTextBoxes.Count - 1);
                    t.Dispose();
                }

                return;
            }                

            //Generate labels and text boxes
            for (int i = 1; i <= inputNumber; i++)
            {
                //Create a new label and text box
                Label labelInput = new Label();
                TextBox textBoxNewInput = new TextBox();

                //Initialize label's property
                labelInput.Text = "Product" + i;
                labelInput.Location = new Point(30, textBoxInput.Bottom + (i * 30));
                labelInput.AutoSize = true;

                //Initialize textBoxes Property
                textBoxNewInput.Location = new Point(labelInput.Width, labelInput.Top - 3);

                //Add the newly created text box to the list of input text boxes
                inputTextBoxes.Add(textBoxNewInput);

                //Add the labels and text box to the form
                this.Controls.Add(labelInput);
                this.Controls.Add(textBoxNewInput);
            }
        } 
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T10:29:34.710

**这是新代码**

```
 if (!string.IsNullOrEmpty(textBoxInput.Text))
        {
            //Get the number of input text boxes to generate
            int inputNumber = Int32.Parse(textBoxInput.Text);

            if (inputTextBoxes != null && inputTextBoxes.Count > inputNumber)
            {
                int removecount = inputTextBoxes.Count - inputNumber;

                for (int i = 0; i < removecount; i++)
                {
                    TextBox t = inputTextBoxes[inputTextBoxes.Count - 1];
                    inputTextBoxes.RemoveAt(inputTextBoxes.Count - 1);
                    t.Dispose();

                    Label l = inputlabels[inputlabels.Count - 1];
                    inputlabels.RemoveAt(inputlabels.Count - 1);
                    l.Dispose();
                }

                return;
            }

        //Generate labels and text boxes
        for (int i = 1; i <= inputNumber; i++)
        {
            //Create a new label and text box
            Label labelInput = new Label();
            TextBox textBoxNewInput = new TextBox();

            //Initialize label's property
            labelInput.Text = "Product" + i;
            labelInput.Location = new Point(30, textBoxInput.Bottom + (i * 30));
            labelInput.AutoSize = true;

            //Initialize textBoxes Property
            textBoxNewInput.Location = new Point(labelInput.Width, labelInput.Top - 3);

            //Add the newly created text box to the list of input text boxes
            inputTextBoxes.Add(textBoxNewInput);
            inputlabels.Add(labelInput);

            //Add the labels and text box to the form
            this.Controls.Add(labelInput);
            this.Controls.Add(textBoxNewInput);
        }
    } 
```

如果还有问题请告诉我。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-31T10:11:23.547

您需要跟踪已添加的控件，然后调用 remove：

```
this.Controls.Remove(labelInput);
this.Controls.Remove(textBoxNewInput); 
```

您可以通过多种方式保持跟踪：

*   创建私有字段
*   将它们存储在字典中
*   用一些唯一标识符标记控件，以便您可以再次找到它们。

你使用哪一个取决于你。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-31T10:12:14.720

当您将控件拖放到表单中时，Visual Studio 会在后台创建代码来添加这些控件。这些创建类似于您创建文本框的方式，因此您必须引入一些方法来识别您认为“生成”的控件。

一种方法是将这些控件添加到 a 中`List<Control>`，以便您保留对“您的”控件的引用。

另一种方法是添加一个`Panel`向其添加生成的控件，这样您就可以`myPanel.Controls.Clear()`只清除添加到其中的控件。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-31T10:13:47.257

您可以使用自己的变量

```
inputTextBoxes.Add(textBoxNewInput); 
```

删除文本框

```
else
{
  MessageBox.Show("Enter Value");
  this.Controls.Remove(inputTextBoxes[YourIndex/NameOfControl]);
 } 
```

# android - 如何在两个长值上过滤自定义 ListView？

> ID：14100183
> 
> 赞同：2
> 
> 时间：2012-12-31T10:05:10.610
> 
> 标签：android, android-listview, android-arrayadapter

我有带有自定义适配器的 ListView 扩展了 ArrayAdapter。每个项目都是对象：

```
public class ListItemObject {

    public String messageText;
    public long messageTime;
    public long fromId;
    public long toId;

} 
```

我想在菜单中添加可检查项以进行过滤切换。因此，当此项目未选中时，我将显示所有项目，并且当此项目选中ListView时，必须只包含此条件的过滤的项目：

```
if(fromId==myId || toId==myId) {
//show item
} else {
//don't show item
} 
```

我看到了两种实现方式：

1.  让我自己的过滤器扩展过滤器。然后调用 adapter.getFilter().filter(string_with_fromId_and_toId_in_JSON)。我在这里看到一个问题：所有外观适配器只能包含一个过滤器。如果我以后想添加另一个过滤器，我不能这样做。

2.  保存适配器外部的所有项目，将其清除并再次填充过滤数据。这对我来说不是方便的方法，但我可以做到。

如何更好地实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T10:35:26.057

我都用过。我创建了一个类似的标志并将其作为参数`FILTER_BY_CUSTOM_COLLECTION`发送到过滤函数。`constraint`如果约束等于我的标志，我会做我的自定义过滤器，否则我会将该约束用作真正的文本约束：

```
MyFilter filter = (MyFilter) adapterDocumentDetails.getFilter();

filter.itemsForFilterResult = anyCollection

filter.filter(MyFilter.FILTER_BY_CUSTOM_COLLECTION,
            new FilterListener() {
                @Override
                public void onFilterComplete(int count) {

                }
            }); 
```

在我的过滤器中：

```
 public final static String FILTER_BY_CUSTOM_COLLECTION = "@@FILTER_BY_CUSTOM_COLLECTION@@";
    @Override
    protected FilterResults performFiltering(CharSequence constraint) {

    if (constraint.toString().compareTo(
                                    FILTER_BY_CUSTOM_COLLECTION) == 0
                                    && itemsForFilterResult != null) 
    {
       filteredCollection = itemsForFilterResult;
    }
    else
    {
       for (int i = 0; i < allItems.size(); i++) 
       {
         ListItemObject  item= allItems.get(i);
         if(item.messageText.contains(constraint))
         {
            filteredCollection.add(item);
         }
       }    
    }
 } 
```

# .net - 使用 SQL Server 数据库部署 C# Winforms

> ID：14100187
> 
> 赞同：0
> 
> 时间：2012-12-31T10:05:31.807
> 
> 标签：.net, winforms, deployment, sql-server-2008-r2

我有一个 Winforms 应用程序和一个 SQL Server 2008 R2 数据库（离线桌面应用程序）。我想把它变成一个可执行文件，这样我就可以在其他电脑上运行它。

我尝试使用 ClickOnce 发布它，但某些功能不起作用，并且某些标签/图片位置甚至不同（因为我认为数据库不包含在资源中？）检查其他类似的帖子我选择了嵌入资源`dataset.xsd`但没有不行。

我应该如何/在哪里“添加”数据库？还是我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T12:13:08.923

关于您的 Winforms 应用程序 - 您应该在 Visual Studio 中创建一个安装项目 - 它将创建一个安装程序，其中包含您需要的 exe 文件和资源。

我不明白数据库的部分。您想在安装程序中集成 XSD（XML 架构定义）文件还是集成 SQLite 或 Access 等离线数据库？

# file - Phonegap 2.2.0 的 FileReader 的 seek 方法在哪里？

> ID：14100200
> 
> 赞同：2
> 
> 时间：2012-12-31T10:06:31.547
> 
> 标签：file, cordova, filereader, seek, random-access

我需要一个像[FileWriter.seek(offset)](http://docs.phonegap.com/en/2.2.0/cordova_file_file.md.html#FileWriter)这样的方法用于 FileReader。

我搜索了很多但没有找到任何东西？FileWriter 有 seek 方法对我来说很奇怪，但 FileReader 没有它！我想读取 100MB 文件中的 1MB。我真的不想加载整个文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T13:51:59.793

FileReader 没有 seek 方法。它不是 FileReader 接口的 W3C 规范的一部分。

**更新：**从 PhoneGap 2.4.0 开始，将实现 File.slice() 方法，因此您几乎应该从中得到您想要的。

# android - 使用 MySql 的 Android 应用程序，它安全吗？

> ID：14100205
> 
> 赞同：1
> 
> 时间：2012-12-31T10:07:19.397
> 
> 标签：android, mysql, security, apk

我正在考虑制作一个新的 Android 应用程序。但是在这个我需要使用 MySql 连接到我的一个网页。但我想知道这安全吗？能反编译一个apk app，找到安卓app使用的用户名和密码吗？如果是这样，创建这样的应用程序最安全的方法是什么？

感谢所有帮助和重播。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T10:43:29.093

当有人试图嗅探/窥探应用程序和服务器之间的数据时，加密 sql 查询将保护您的应用程序，但是在反编译应用程序时，任何人都会获得您的连接参数，包括用户名和密码。

您有 2 个**干净**的解决方案可供查看：

(1) 使用webservices，你可以选择使用SOAP webservices，这些是最标准化的服务，你在其他应用程序/语言中重用你的webservices没有问题，因为互操作性是标准化webservices的来源，但是SOAP意味着更多的数据传输、解析和反解析；SOAP 是一个重量级的 XML 标准，它以文档传递为中心，对于高吞吐量应用程序来说速度很慢。

REST Web 服务非常轻量级，并且依赖于 HTTP 标准来完成它的工作。快速启动并运行有用的 Web 服务非常棒。如果您不需要严格的 API 定义，这就是要走的路。大多数网络服务都属于这一类。REST 更快，但其中没有真正的互操作性政治。

(2) 如果您的应用程序通过网络服务（视频、文件上传...）消耗大量数据，请使用数据流（或网络套接字）

# jquery - 使用 turbolinks (rails) 时，发送多个 ajax 请求而不是一个

> ID：14100206
> 
> 赞同：2
> 
> 时间：2012-12-31T10:07:26.053
> 
> 标签：jquery, ruby-on-rails, turbolinks

查看`firebug`，这一行是导致此问题的行：

```
xhr.send( ( s.hasContent && s.data ) || null ) 
```

在`jquery.js`文件中。如果没有 remote: `true`，`form`or`link_to`可以正常工作，`turbolink`并且在 include 之前也可以工作`turbolink`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T12:06:56.390

我不时有同样的问题。并且每次问题出现在多个 javascripts 文件中时（在这种情况下，我认为 jquery 被多次包含）。看一下这个

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-17T15:35:37.420

我在github页面提出问题后找到了答案，这显然是因为在head标签之外使用了javascript标签。现在，在 head 标记中包含 javascript 标记后，一切正常。

# lucene.net - 为最终用户提供对一组不相关业务对象的搜索能力的 lucene 索引和搜索策略应该是什么？

> ID：14100211
> 
> 赞同：-1
> 
> 时间：2012-12-31T10:07:39.627
> 
> 标签：lucene.net, lucene

我想为最终用户提供对所有业务对象进行自由形式搜索的能力。用户将提供 Lucene 搜索表达式。业务对象完全不相关，没有任何共同之处。

每个业务对象都包含有自己的特定属性。对于这个问题，以下是业务对象：

博客{标题; 身体; }

用户{名字；姓; 国家; 电子邮件地址; 性别（男/女）；}

我如何创建一个可以服务于以下用例的索引：

1.  博客和用户中的自由格式文本搜索。例如，搜索出现“印度”一词的用户和博客条目。不应要求最终用户在所有 Lucene 文档字段之间指定 ORing。

2.  仅针对用户的自由格式文本搜索。例如，搜索出现“雅虎”一词的用户。不应要求最终用户在与用户相关的所有 Lucene 文档字段之间指定 ORing。

3.  自由格式文本仅搜索博客条目。例如，搜索那些出现“Skeet Async”一词的博客条目。不应要求最终用户在与博客相关的所有 Lucene 文档字段之间指定 ORing。

4.  按属性搜索博客条目的自由格式文本。例如，搜索那些在“标题”属性中出现“异步”的博客条目。

5.  按属性为用户搜索自由格式文本。例如，搜索那些“Skeet”出现在“姓氏”属性中的用户。

如何定义索引策略 - 单个索引或多个索引，使用的分析器，如何在搜索查询中提供上下文等。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T04:28:30.677

对于给定的业务对象，最简单的方法是让 lucene 文档具有以下字段：

```
title, body, firstName, lastName, country, emailAddress, gender 
```

您可能希望将与标题和用户相关的字段设置为 STORED。

分析器的选择取决于您的搜索要求（例如您是否希望支持部分匹配、后缀查询、词干提取等）。

给定用例的查询：

```
1) title:india OR body:india OR country:india
2) title:yahoo OR body:yahoo OR emailAddress:yahoo
3) title:(Skeet OR Async) OR body:(Skeet OR Async)
4) title:asynchronous
5) lastName:skeet 
```

# excel - 如何将一些数字作为Excel中的文本转换为数字？

> ID：14100216
> 
> 赞同：2
> 
> 时间：2012-12-31T10:08:09.903
> 
> 标签：excel, vbscript, vba

我刚刚运行了一个宏并得到了以下信息：

```
Sub Macro1()
'
' Macro1 Macro
'

'
    Columns("B:B").Select
    Range("B4").Activate
    Selection.NumberFormat = "0.00"
    Selection.NumberFormat = "@"
End Sub 
```

现在无法理解和之间的区别`Selection.NumberFormat = "0.00"`你`Selection.NumberFormat = "@"`能帮我理解相同的吗？

**我还试图将一些数字作为 Excel 中的文本转换为数字。这样做的好语法是什么？**

快照：

![现有号码格式](../Images/00fdb5fc058379c3f22e10400eabd69f.png)

**编辑**

我试图将所有存储`text`在下面的数字转换为数字，但没有任何改变。如果我错了，请指导：

```
objSheet1.Columns(11).NumberFormat = "0" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T13:08:03.070

这是你正在尝试的吗？

```
Sub Sample()
    Dim ws As Worksheet
    Dim lRow As Long, i As Long

    '~~> Change this to the relevant sheet name
    Set ws = ThisWorkbook.Sheets("Sheet1")

    With ws
        '~~> Col B
        .Columns(2).NumberFormat = "0.00"

        '~~> Get the last row
        lRow = .Range("B" & .Rows.Count).End(xlUp).Row

        For i = 1 To lRow
            .Range("B" & i).Formula = .Range("B" & i).Value
        Next i
    End With
End Sub 
```

**截屏**

![在此处输入图像描述](../Images/ebb8cbda99361fd28ec015502232016d.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T10:11:35.383

要将存储为单元格中数字的文本转换为数字，您可以尝试以下操作：

```
Sub ConvertTextInCellToNumber(ByVal cellLocation As String)

Dim txt As String
txt = range(cellLocation).text

On Error GoTo Catch

Dim txtAsNumber As Double
txtAsNumber = txt

range(cellLocation).Value = txtAsNumber

Catch:

End Sub 
```

# asp.net-mvc - 使用 Signalr 的优缺点是什么

> ID：14100218
> 
> 赞同：4
> 
> 时间：2012-12-31T10:08:15.503
> 
> 标签：asp.net-mvc, signalr

在用 asp .net MVC 编写的基于 javascript 的数据驱动应用程序中，使用 Signalr 作为通信方法有哪些优点和缺点？

谢谢，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-31T19:38:42.890

当然，你不应该使用 SignalR，除非你需要它提供的东西，也就是说，一个简单的、专注于 JavaScript 客户端的双工 Web 服务层。如果您是 ASP.NET 的新手，那么这可能不是您马上需要的——在您开始编写复杂的、数据驱动的 JavaScript 应用程序之前，您需要学习很多其他东西. 如果您只打算使用 .NET 客户端，请坚持使用 WCF：它更灵活，并且它的静态类型更适合 C# 和 VB.NET。

也就是说，当您*确实*需要为 JavaScript 应用程序提供基于 .NET 的 Web 服务后端时，SignalR 是一个不错的选择。它的配置肯定比 Windows Communication Foundation 更简单，而且对于 JavaScript 应用程序，它具有一组更好的功能。它似乎是由 Microsoft 赞助的（他们允许它位于 Microsoft.AspNet 命名空间中），并且负责它的人似乎很聪明并且非常努力工作（如果有时有点尖刻）。我曾经在午夜报告了一个错误，在 15 分钟内得到了响应，并在我早上起床时修复。当然，它是开源的，而且他们愿意考虑拉取请求，所以如果你需要修复一些东西，你会比微软以前的闭源模型有更好的运气。

它唯一真正的缺点是它非常新——它最近达到了 1.0 RC1 状态——因此缺少一些很好的功能，并且仍然有一些错误（当然，这些最终会得到修复）。

这是一个仍然有点新的例子。如果您尝试序列化复杂的对象图，您几乎肯定会遇到的一个问题是它使用 Json.NET 的专有格式进行对象引用，因此您最终会得到很多如下所示的 JSON：

```
{
  "$id": "57",
  "Name": "_default",
  "User": {
      "$id": "58",
      "UserTag": "ken",
      "Sessions": [{
          "$id": "59",
          "SessionId": "0ca7474e-273c-4eb2-a0c1-1eba2f1a711c",
          "User": {
              "$ref": "58"
          },
          "Room": {
              "$ref": "57"
          }
      }],
  },

  "Sessions": [{
      "$ref": "59"
  }]
} 
```

`Session[]`读取数组并发现其中唯一的对象根本不是 a`Session`而是具有单个`$ref`属性的任意对象并不是很有帮助。为了解决这个问题，您需要使用 JsonNetDecycle 之类的东西来包装所有 SignalR[调用](https://bitbucket.org/smithkl42/jsonnetdecycle)。不难，但在 SignalR 本身中处理会很好。（当然，如果我是一个更好的人，我会自己编写代码并将其作为拉取请求提交 - 只是还没有解决。）

# jqxgrid - jqxgrid-寻呼机渲染器

> ID：14100220
> 
> 赞同：0
> 
> 时间：2012-12-31T10:08:21.760
> 
> 标签：jqxgrid

我想在寻呼机中添加额外按钮，而不会干扰默认的 ui 元素，例如 1) Gotopage 2) 显示行 3) 寻呼信息等，

我可以编写自定义页面渲染器。但它通过重写 pager.js 中存在的所有功能来增加我的代码空间。你能帮忙吗，因为我是这个网格的新手

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T15:54:52.560

The id of the div default pager is 'pager', so you can try add elements into the div. This work for me :
Html :

```
<div id="jqxgrid"></div>
<div id="custonPager">
    <a class="jq-btn" id="btnRefresh"><i class="icon-refresh"></i></a>
</div> 
```

JS Code

```
// init jqxgrid
$("#jqxgrid").jqxGrid({..});
//add custom buttons in pager div
$("#pager").children().each(function(){
    $(this).append($("#custonPager").children());
});
$(".jq-btn").jqxButton(); 
```

# android - 自定义列表视图中的复选框问题

> ID：14100224
> 
> 赞同：0
> 
> 时间：2012-12-31T10:08:41.667
> 
> 标签：android, android-layout, checkbox

我想在单击 Button 时从**Custom ListView中选择所有****CheckBox 。**

 **但是当我在 ListView 中有超过 9 个项目时，我在第二行代码下面得到 NullPointerException。

```
View vi= diffeneceLv.getChildAt(i);
CheckBox cb = (CheckBox) vi.findViewById(R.id.conschkbx); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T10:16:06.897

你弄错了，`ListView`重新使用你的行，这意味着内存中创建的行/布局的数量不等于你在数组中的项目。

通常`ListView`在滚动时将新数据重新设置为前一行。

我建议你研究[这篇博](http://vikaskanani.wordpress.com/2011/07/20/android-custom-image-gallery-with-checkbox-in-grid-to-select-multiple/)文，这里作者维护 Checked 状态，然后在`getView()`适配器中相应地设置它。

作者创建了一个这样的布尔数组：

```
private boolean[] thumbnailsselection; 
```

并存储检查或取消检查的状态，然后从 访问它`getView()`，您将要做的是，您将存储`true`所有索引并刷新您的适配器。它会选择你所有的行。

这是[另一个帖子](http://lalit3686.blogspot.com/2012/06/today-i-am-going-to-show-how-to-deal.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T10:54:41.273

You should NOT hold references of individual views for this purpose, as they are recycled.

For your convenience, `ListView` holds a `BooleanSparseArray` to store what items are checked. This array contains a map of item id (index/position of items in adapter) to a boolean value.

Since `ListView` does all that for you, its good to **avoid re-inventing the wheel** and use `ListView`'s capability to hold checked state of its items. All you have to do is to set a choice mode for `ListView`: [`setChoiceMode(int choiceMode)`](http://developer.android.com/reference/android/widget/AbsListView.html#setChoiceMode%28int%29)

*   To get any item's state, call [`isItemChecked(int position)`](http://developer.android.com/reference/android/widget/AbsListView.html#isItemChecked%28int%29) on `ListView`. Useful, if you are overriding `getView()` of adapter.

*   To get all what's checked, call [`getCheckedItemPositions()`](http://developer.android.com/reference/android/widget/AbsListView.html#getCheckedItemPositions%28%29) on `ListView`.

*   To set checked value, call [`setItemChecked(int position, boolean value)`](http://developer.android.com/reference/android/widget/AbsListView.html#setItemChecked%28int,%20boolean%29) on `ListView`.**

# php - jquery数据表分页按钮单击

> ID：14100225
> 
> 赞同：4
> 
> 时间：2012-12-31T10:08:44.283
> 
> 标签：php, jquery, datatable, pagination, charisma

我正在使用[Charisma 管理面板](http://usman.it/free-responsive-admin-template/)。
其中，使用了 jQuery 数据表。

在我的表中，一行包含以下内容：

> ```
> column1 = integer
> column2 = text
> column3 = 2 buttons (view and delete) 
> ```

查看按钮负责从服务器获取一些数据并在模式弹出窗口中显示这些数据。

只有当我在第一页时，我才能查看该弹出窗口。对于其他页面，当我单击查看按钮时，会从服务器获取所需的数据（能够在萤火虫中看到它），但它没有再次显示该模式弹出窗口。

我认为这是因为现场直播。
请提供任何帮助。

点击事件使用如下：

```
$('.btn-setting').click(function(e){ 
e.preventDefault();
$('#myModal').modal('show'); 
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T10:38:49.730

尝试使用' `on`'：

```
$('.btn-setting').on('click', function(e){ 
    e.preventDefault();
    $('#myModal').modal('show'); 
}); 
```

或者

```
$(document).on('click', '.btn-setting', function(e){
  e.preventDefault();
  $('#myModal').modal('show'); 
}); 
```

# 3d - 3D 标量场和平面的交集

> ID：14100226
> 
> 赞同：0
> 
> 时间：2012-12-31T10:08:47.377
> 
> 标签：3d, plot, intersection, plane

我需要绘制 3D 标量场的切片。例如，我有一个格式为：

```
x1, y1, z1, f1
x2, y2, z2, f2
...

```

其中 fs 是标量，x, y, z 是坐标（z 是最快的坐标）。我想得到这个 3D 数据和某个平面之间的交点，然后将它们提供给 matplotlib。但首先我需要插入数据......你能告诉我怎么做吗？可能有一些关于这个主题的链接。

任何建议将不胜感激！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T09:41:19.013

对于插值，使用来自 scipy.interpolate 的 griddata：

[网格数据](http://docs.scipy.org/doc/scipy/reference/generated/scipy.interpolate.griddata.html#scipy-interpolate-griddata)

这个页面有一个很好的例子，函数的签名非常接近你的数据。

您仍然必须以某种方式定义平面上要插入数据的点。如果你有一个 x,y->z 形式的函数来描述你的平面，你可以使用 np.mgrid：

x_values, y_values = np.mgrid[xmin:xmax:100j, ymin:ymax:100j] z_values = plane_function(x_values, y_values)

并将这些用作 griddata 的输入。

不过，对于此类情况，VTK（或 Python、TVTK 和[MayaVi2](http://code.enthought.com/projects/mayavi/)）可能是更好的选择。为 3d 数据优化了算法，并且可以提供交互式剖切面，您可以在体积数据中拖动。我在我的程序[PyLocator](http://pylocator.thorstenkranz.de/index.html)中使用 VTK，它（除其他外）正是这样做的。

# java - 免费的 MySQL 网络主机连接 java 桌面应用程序

> ID：14100228
> 
> 赞同：0
> 
> 时间：2012-12-31T10:08:56.690
> 
> 标签：java, mysql

在涉及数据库应用程序时，我很菜鸟，这是场景，

我开发了一个需要远程连接到 MySQl 数据库的桌面应用程序。所以我的问题是我在哪里可以获得免费的服务器来托管我的数据库以及我必须进行哪些具体配置才能从任何具有互联网连接的机器成功连接到数据库。我目前为应用程序使用本地 db(H2)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T10:21:21.750

连接到远程机器上的数据库与连接到本地机器上的数据库没有什么不同。

当您使用驱动程序[MySQL 连接器/J-JDBC Type 4 驱动程序](http://dev.mysql.com/doc/refman/5.0/en/connector-j-overview.html)时，您可以指定托管数据库的机器的地址，例如：

```
String connectionString="jdbc:mysql://172.27.60.84:3306/"+dbName; 
```

这适用于远程机器，是本地机器的语法：

```
String connectionString="jdbc:mysql://localhost:3306/"+dbName; 
```

或者

```
String connectionString="jdbc:mysql://127.0.0.1:3306/"+dbName; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T12:50:17.793

我认为 mysql 将是内部的，您只能通过其服务器上的网站或提供的 phpmyadmin 或 simular 访问它。

你最好租一个VPS。我从 HostMedia 租了一个，这对于网络服务器和 mysql 服务器来说很好。（您需要自己安装 apache2 php mysql）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T13:02:56.503

您可以从[Heroku](http://www.heroku.com/pricing)或[OpenShift](https://openshift.redhat.com/community/developers/pricing)等平台（都是 PostgreSQL 而不是 MySQL，但这是一件好事）获得免费数据库，作为其托管计划免费层的一部分。

但是，我怀疑您是否可以直接从远程机器访问数据库。它们在那里支持也在这些平台上运行的 Web 应用程序，而不是远程应用程序。您需要编写一个 Web 应用程序来充当某种代理，并提供对数据库的访问。

正常的做法不是简单地写一个代理来传递数据库请求，而是将你的一些应用程序逻辑迁移到服务器上，这样它就可以在靠近数据库的地方运行，并以更高的速度与客户端进行通信。等级。

# packages - 在java中打开包时出错

> ID：14100231
> 
> 赞同：-4
> 
> 时间：2012-12-31T10:09:09.930
> 
> 标签：packages

```
import C.Users.mihir.Downloads.IntroNeuralJavaExampesEdition2.JavaIntroNeuralNetworkEdition2.src.com.heatonresearch.book.introneuralnet.neural.matrix;

public class test1 {
    public test1() {
    }

    public class Test {
        public Test() {
        }
        public static void main(String args[])
        {
            boolean b= BiPolarUtil.double2bipolar(2);
                    System.out.println(b);
        }
         double matrixdata={{1.0,2.0,3.0},{4.0,5.0,6.0}};
         double mat=new Matrix(matrixdata);
    }
} 
```

错误：

> 包
> C.Users.mihir.Downloads.IntroNeuralJavaExampesEdition2.JavaIntroNeuralNetworkEdition2.src.com.heatonresearch.book.introneuralnet.neural
> 不存在
> 找不到符号类矩阵 double 的非法初始化程序
> 找不到符号类矩阵

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T12:24:39.357

此导入看起来错误：

```
C.Users.mihir.Downloads.IntroNeuralJavaExampesEdition2.JavaIntroNeuralNetworkEdition2.src.com.heatonresearch.book.introneuralnet.neural.matrix; 
```

这不是您应该导入自定义类的方式。您收到此错误是因为 Java 找不到它。您通常不会在`import`语句中指定完整路径，并允许 Java 搜索您的`CLASSPATH`.

阅读[本文](http://suite101.com/article/how-to-create-a-java-package-a91474)，作为创建和使用自定义包的示例。

# iphone - 应用程序因 InterfaceOrientation 而崩溃

> ID：14100233
> 
> 赞同：1
> 
> 时间：2012-12-31T10:09:18.807
> 
> 标签：iphone, ios, xcode, uiinterfaceorientation

我的应用程序是`Landscape`基于。当应用程序在我的设备上运行时，应用程序会立即崩溃。

我选择了这两个字段

```
UIInterfaceOrientationLandscapeLeft
UIInterfaceOrientationLandscapeRight 
```

我收到此错误：

> 由于未捕获的异常 UIApplicationInvalidInterfaceOrientation 终止应用程序，原因：支持的方向与应用程序没有共同的方向，并且 shouldAutorotate 正在返回 YES

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T11:02:49.370

将**shouldAutorotate**和**supportedInterfaceOrientations**方法添加到您的控制器。

```
 -(BOOL)shouldAutorotate
    {
        return YES; //this will auto-rotate the orientation.
    }

-(NSUInteger)supportedInterfaceOrientations
{

     return UIInterfaceOrientationMaskLandscape; // will force the app to load in landscape, you can change it as per your need.

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T11:38:43.597

您应该使用 UIInterfaceOrientationMaskLandscape 而不是 UIInterfaceOrientationLandscapeLeft 和 UIInterfaceOrientationLandscapeRight。在 iOS SDK 6.0+ 中，新的 enum(UIInterfaceOrientationMask) 用于返回支持的方向。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T10:59:26.053

shouldAutorotateToInterfaceOrientation 只返回那些你想支持的

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return ((interfaceOrientation == UIInterfaceOrientationLandscapeLeft) || (interfaceOrientation == UIInterfaceOrientationLandscapeRight));
} 
```

请检查另外一件事，`File's Owner and View`如果视图不会与文件的所有者附加它之间的连接，它将崩溃。

# css - jquery 移动排序按钮，显示带有选择器的对话框

> ID：14100235
> 
> 赞同：0
> 
> 时间：2012-12-31T10:09:29.343
> 
> 标签：css, html, sorting, jquery-mobile

我昨天使用的是 Skyscanner 应用程序，结果页面上有一个我想复制的“排序”选项。

您单击页脚导航栏中的按钮，然后加载一个对话框，其中包含选项列表，然后您可以滚动选择。该对话框是同一页面上的叠加层。

我附上了截图：

![在此处输入图像描述](../Images/ee1723b37535ddf45201688217dca0d3.png)

你会怎么做？可能很简单，但对 jQuery mobile 来说是新手，只是学习它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T14:09:27.210

一个解决方案可能是使用弹出窗口，[请参阅此处的文档](http://jquerymobile.com/demos/1.2.0/docs/pages/popup/index.html)
，例如[弹出菜单](http://jquerymobile.com/demos/1.2.0/docs/pages/popup/index.html#popupMenu)

![在此处输入图像描述](../Images/c941dc14e5124b4201b1952a2e9511ad.png)

# intellij-idea - IntelliJ IDEA 生成主版本 46 的类文件

> ID：14100236
> 
> 赞同：1
> 
> 时间：2012-12-31T10:09:38.127
> 
> 标签：intellij-idea, javacard

我想使用 IntelliJ IDEA 进行 JavaCard 2.2.1 开发。javacard 转换器要求类文件的主要版本为 46。

所以我的问题是如何将类文件兼容设置为 1.2（这将生成具有主要版本 46 的类文件）？

以下是类文件版本供您参考：

```
主要 次要 Java 平台版本
45 3 1.0
45 3 1.1
46 0 1.2
47 0 1.3
48 0 1.4
49 0 1.5
50 0 1.6

```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-31T10:15:25.803

```
File > Setting > Compiler > Java Compiler ... and choose 1.2 
```

# c++ - 2 暗淡数组和双指针

> ID：14100240
> 
> 赞同：0
> 
> 时间：2012-12-31T10:09:52.070
> 
> 标签：c++, c, arrays, pointers, multidimensional-array

> **可能重复：**
> [创建指向二维数组的指针](https://stackoverflow.com/questions/1052818/create-a-pointer-to-two-dimensional-array)

当我调用函数 func4() 和 func5() 时，出现以下错误：

> func4() 错误：无法将参数 '1' 的 'short int (*)[3]' 转换为 'short int**' 到 'int func4(short int**)'| func5() 错误：无法将参数 '1' 的 'short int (*)[3]' 转换为 'short int**' 到 'int func5(short int**)'|

如何更正调用函数 func4() 和 func5() 的错误？这是我的代码：

```
#include <cstdio>

int func1(short mat[][3]);
int func2(short (*mat)[3]);
int func3(short *mat);
int func4(short **mat);
int func5(short *mat[3]);

int main()
{

short mat[3][3],i,j;

for(i = 0 ; i < 3 ; i++)
    for(j = 0 ; j < 3 ; j++)
    {
        mat[i][j] = i*10 + j;
    }

printf(" Initialized data to: ");
for(i = 0 ; i < 3 ; i++)
{
    printf("\n");
    for(j = 0 ; j < 3 ; j++)
    {
        printf("%5.2d", mat[i][j]);
    }
}

printf("\n");

func1(mat);
func2(mat);
func3(&mat[0][0]);
func4(mat); //error: cannot convert ‘short int (*)[3]’ to 
            //‘short int**’ for argument ‘1’ to       ‘int func4(short int**)’|
func5(mat); //error: cannot convert ‘short int (*)[3]’ to 
            //‘short int**’ for argument ‘1’ to ‘int func5(short int**)’|

return 0;
}

/*
Method #1 (No tricks, just an array with empty first dimension)
===============================================================
You don't have to specify the first dimension!
*/

int func1(short mat[][3])
{
register short i, j;

printf(" Declare as matrix, explicitly specify second dimension: ");
for(i = 0 ; i < 3 ; i++)
{
    printf("\n");
    for(j = 0 ; j < 3 ; j++)
    {
        printf("%5.2d", mat[i][j]);
    }
}
printf("\n");

return 0;
}

/*
Method #2 (pointer to array, second dimension is explicitly specified)
======================================================================
*/

int func2(short (*mat)[3])
{
register short i, j;

printf(" Declare as pointer to column, explicitly specify 2nd dim: ");
for(i = 0 ; i < 3 ; i++)
{
    printf("\n");
    for(j = 0 ; j < 3 ; j++)
    {
        printf("%5.2d", mat[i][j]);
    }
}
printf("\n");

return 0;
}

/*
Method #3 (Using a single pointer, the array is "flattened")
============================================================
With this method you can create general-purpose routines.
The dimensions doesn't appear in any declaration, so you
can add them to the formal argument list.

The manual array indexing will probably slow down execution.
*/

int func3(short *mat)
{
register short i, j;

printf(" Declare as single-pointer, manual offset computation: ");
for(i = 0 ; i < 3 ; i++)
{
    printf("\n");
    for(j = 0 ; j < 3 ; j++)
    {
        printf("%5.2d", *(mat + 3*i + j));
    }
}
printf("\n");

return 0;
}

/*
Method #4 (double pointer, using an auxiliary array of pointers)
================================================================
With this method you can create general-purpose routines,
if you allocate "index" at run-time.

Add the dimensions to the formal argument list.
*/

int func4(short **mat)
{
short    i, j, *index[3];

for (i = 0 ; i < 3 ; i++)
    index[i] = (short *)mat + 3*i;

printf(" Declare as double-pointer, use auxiliary pointer array: ");
for(i = 0 ; i < 3 ; i++)
{
    printf("\n");
    for(j = 0 ; j < 3 ; j++)
    {
        printf("%5.2d", index[i][j]);
    }
}
printf("\n");

return 0;
}

/*
Method #5 (single pointer, using an auxiliary array of pointers)
================================================================
*/

int func5(short *mat[3])
{
short i, j, *index[3];
for (i = 0 ; i < 3 ; i++)
    index[i] = (short *)mat + 3*i;

printf(" Declare as single-pointer, use auxiliary pointer array: ");
for(i = 0 ; i < 3 ; i++)
{
    printf("\n");
    for(j = 0 ; j < 3 ; j++)
    {
        printf("%5.2d", index[i][j]);
    }
}
printf("\n");
return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T10:31:59.090

You `can't` send a two dimensional array to function without specifying the `length or size of second dimension` of the array. This is what causing the error.

Try this:

```
int func4(short mat[][3])
{
short    i, j, *index[3];

for (i = 0 ; i < 3 ; i++)
index[i] = (short *)mat + 3*i;

printf(" Declare as double-pointer, use auxiliary pointer array: ");
for(i = 0 ; i < 3 ; i++)
{
printf("\n");
for(j = 0 ; j < 3 ; j++)
{
    printf("%5.2d", index[i][j]);
}
}
printf("\n");

return 0;
}

int func5(short mat[][3])
{
short i, j, *index[3];
for (i = 0 ; i < 3 ; i++)
index[i] = (short *)mat + 3*i;

printf(" Declare as single-pointer, use auxiliary pointer array: ");
for(i = 0 ; i < 3 ; i++)
{
printf("\n");
for(j = 0 ; j < 3 ; j++)
{
    printf("%5.2d", index[i][j]);
}
}
printf("\n");
return 0; 
```

}

`Remember` this that if something can be done easily and cleanly through one way, don't try to do it through a dirty and difficult way as it will confuse yourself when you are revising or updating your code in the future.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T11:40:32.563

1.它们是一样的：

```
int func(short **mat);
int func(short *mat[]);
int func(short *mat[3]); 
```

并且与`short **`不兼容`short (*)[3]`，因为它们指向的类型不同。`short **`指向`short *`while`short (*)[3]`指向`short[3]`.

2.也许你可以试试这个：

```
int funcMy(void *mat)   // OK! -added by Justme0 2012/12/31
{
    short i, j, *index[3];
    for (i = 0 ; i < 3 ; i++)
        index[i] = (short *)mat + 3*i;

    printf(" Declare as (void *) pointer, use auxiliary pointer array: ");
    for(i = 0 ; i < 3 ; i++)
    {
        printf("\n");
        for(j = 0 ; j < 3 ; j++)
        {
            printf("%5.2d", index[i][j]);
        }
    }
    printf("\n");
    return 0;
} 
```

3.我认为第三个功能是最好的！*它使用了我在POINTERS ON C*中读到的一个名为“扁平化数组”的技巧。

> 方法#3（使用单个指针，数组被“扁平化”）================================== =========================== 使用此方法，您可以创建通用例程。维度不会出现在任何声明中，因此您可以将它们添加到正式参数列表中。
> 
> 手动数组索引可能会减慢执行速度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T10:21:49.473

问题在于 和 的矩阵定义不`func4()`正确`func5()`。

您将其定义为`short mat[3][3]`，但在这种情况下，您实际上并未分配指向矩阵行的指针数组。您将获得一个指向一个连续内存块的指针。

如果要将参数矩阵传递为`short int**`，则应将其定义如下：

```
#include <stdlib.h>

short int** mat;

for(int i = 0; i < 3; i++) {
    mat[i] = (short int*)malloc (3*sizeof(short int));
    for(int j = 0; j < 3; i++) {
         mat[i][j] = i*10 + j;
    }
} 
```

# jquery - jQuery 多文件上传插件不适用于多文件类型属性

> ID：14100249
> 
> 赞同：1
> 
> 时间：2012-12-31T10:11:09.930
> 
> 标签：jquery

我正在使用 fyneworks 的 jQuery Multiple File Upload 插件。它不适用于多文件类型属性。

HTML

```
 <input id="bImage" name="data[BusinessImage][image][]" type="file" multiple /> 
```

JS

```
$('#bImage').MultiFile ({}); 
```

请推荐一些修复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-03T09:07:15.703

正如其他答案所暗示的，您需要添加 class="multi" 来调用插件。

完成此操作后，新版本的插件将支持多个属性并按照您的配置执行验证。

在此处查看新版本的插件，支持 HTML5： [http ://www.fyneworks.com/jquery/multifile](http://www.fyneworks.com/jquery/multifile)

如果您想帮助我们改进插件，请在此处分叉我们：http: [//github.com/fyneworks/multifile](http://github.com/fyneworks/multifile)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T10:13:19.753

您需要添加`class="multi"`输入标签才能使其工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T10:15:52.700

您必须添加 class = multi

```
<input id="bImage" name="data[BusinessImage][image][]" type="file" multiple class="multi" /> 
```

# c++ - QCTemplate 已编译但无法链接

> ID：14100258
> 
> 赞同：0
> 
> 时间：2012-12-31T10:11:55.193
> 
> 标签：c++, qt, linker-errors, google-ctemplate

我下载了 QCTemplate (http://code.google.com/p/qctemplate/)。提供的 CTemplate (0.95) 版本中存在错误，因此将该版本更改为 CTemplate 2.2。

我编译了库，但是当我尝试运行 helloworld 示例时，我收到 5 个关于 ctemplate::TemplateCache 的错误，例如：

```
qctemplate.lib(template.obj):-1: error: LNK2019: unresolved external symbol "private: bool __thiscall ctemplate::TemplateCache::ExpandLocked(class ctemplate::TemplateString const &,enum ctemplate::Strip,class ctemplate::ExpandEmitter *,class ctemplate::TemplateDictionaryInterface const *,class ctemplate::PerExpandData *)" (?ExpandLocked@TemplateCache@ctemplate@@AAE_NABVTemplateString@2@W4Strip@2@PAVExpandEmitter@2@PBVTemplateDictionaryInterface@2@PAVPerExpandData@2@@Z) referenced in function "private: bool __thiscall ctemplate::TemplateTemplateNode::ExpandOnce(class ctemplate::ExpandEmitter *,class ctemplate::TemplateDictionaryInterface const &,char const * const,class ctemplate::PerExpandData *,class ctemplate::TemplateCache const *)const " (?ExpandOnce@TemplateTemplateNode@ctemplate@@ABE_NPAVExpandEmitter@2@ABVTemplateDictionaryInterface@2@QBDPAVPerExpandData@2@PBVTemplateCache@2@@Z) 
```

我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T10:45:46.880

解决了。我编译了 QCtemplate 的 src 但不知何故在 Qt Creator 中没有导入 template_cache.cc 并且它没有被编译。我手动添加它并再次编译，它现在可以工作了。

# ajax - AJAX 触发 no_connection(); 太早了

> ID：14100259
> 
> 赞同：1
> 
> 时间：2012-12-31T10:12:06.947
> 
> 标签：ajax, google-chrome, google-chrome-extension

我有这个谷歌浏览器扩展..

清单.json：

```
{
  "name": "My extension",
  "manifest_version": 2,
  "version": "1.0",
  "permissions": [
    "tabs", "http://*/*"
  ],
  "browser_action": {
    "default_icon": "icon.png",
    "default_popup": "popup.html"
  },
  "content_scripts": [
    {
      "matches": ["http://*/*", "https://*/*"],
      "js": ["jquery-1.8.3.min.js", "content.js"],
      "run_at": "document_end"
    }
  ]
} 
```

popup.html：

```
<!doctype html>
<html>
  <head>
    <title>Getting Started Extension's Popup</title>
    <style>
      body {
        min-width:357px;
        overflow-x:hidden;
      }

      img {
        margin:5px;
        border:2px solid black;
        vertical-align:middle;
        width:75px;
        height:75px;
      }
    </style>

    <!-- JavaScript and HTML must be in separate files for security. -->
    <script src="popup.js"></script>
  </head>
  <body>
    <div id="ajax">
    </div>
  </body>
</html> 
```

popup.js：

```
function start() {
    var reg = false;
    if (window.ActiveXObject){
        reg = new ActiveXObject("Microsoft.XMLHTTP");
    }else {
        reg = new XMLHttpRequest();
    }
    reg.open("GET","http://www.dr.dk/",true); // Insert a reference of the php page you wanna get instead of yourpage.php
    reg.send(null);
    reg.onreadystatechange = function () {
        if (reg.readyState == 4 && reg.status == 200) {
            document.getElementById('ajax').innerHTML = reg.responseText;
        }else {
            no_connection();
        }
    }
}

function no_connection() {

    var reg = false;
    if (window.ActiveXObject){
        reg = new ActiveXObject("Microsoft.XMLHTTP");
    }else {
        reg = new XMLHttpRequest();
    }
    reg.open("GET","no_connection.html",true); // Insert a reference of the php page you wanna get instead of yourpage.php
    reg.send(null);
    reg.onreadystatechange = function () {
        if (reg.readyState == 4 && reg.status == 200) {
            document.getElementById('ajax').innerHTML = reg.responseText;
        }else {
            document.getElementById('ajax').innerHTML = 'An Unknown Error did happened.';
        }
    }
}

start(); 
```

这总是会出现来自 no_connection.html 的内容，但如果我注释掉该行：

```
no_connection(); 
```

来自：

```
function start(); 
```

然后它工作正常，然后它显示的内容`http://www.dr.dk/`

这怎么会发生，当`no_conncection();`它在一个`if else`语句中时，它怎么能覆盖它呢？

知道如何解决这个问题，因为这变得很奇怪。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T10:16:20.157

reg.onreadystatechange是一个块函数，每次你的状态改变时都会被调用**。**因此，它在通话期间以及通话后都被调用。（两次，可能更多）

另外，一个旁注，请记住，当有人从他们的网站上窃取内容，甚至只是从其他网站上链接到他们时，dk 博士会非常愤怒......

在你的 else 语句中，你需要在失败时特别倾听。建议结构：

```
request[requestid].onreadystatechange = function() {
  /* This is a slightly confusing part of the script.  We don't wait to hear back from the server before we continue
  with the communicate() function.  It sends the request, and if and when the server gets back to us, whatever's
  specified as request[requestid].onreadystatechange is performed.  So, we have to define .onreadystatechange
  BEFORE we actually make contact with the server.  If you're reading this and trying to learn how it works,
  you may want to take a glance at the last part of the communicate() function first, and then come back here. */
  try {
   /* We use try and catch because Javascript will give an error when we try to access request[requestid].status if the
   server is down or if the user navigates away from the page. */
   if (request[requestid].readyState == 4 && request[requestid].status == 200) {
    window.clearTimeout(timeout[requestid]);
    document.body.style.cursor = 'default';
    /* 4 = The AJAX Request is complete; 200 = The HTTP server found the data we needed and was able to send it to us. */
    eval(request[requestid].responseText);
    } else if (request[requestid].readyState == 4 && request[requestid].status != 200) {
    window.clearTimeout(timeout[requestid]);
    if (failure) eval(failure);
    document.body.style.cursor = 'default';
    alert ('Error ' + request[requestid].status + ':  Server error.  If you entered data, it may or may not have been saved.  Please contact your systems administrator.');
    }
   } catch(e) {
   window.clearTimeout(timeout[requestid]);
   document.body.style.cursor = 'default';
   if (failure) eval(failure);
   alert ('Error:  Unable to communicate with server.  Please contact your systems administrator.  You may want to try again in a few minutes to see if the problem fixes itself. \n\n(Either the server was down, the communication was interrupted, or there was an error in the data sent by the server.)\n' + e + '\n\n' + request[requestid].responseText);
   }
  } 
```

# ruby-on-rails-3 - gmaps4rails 未居中且未显示圆圈

> ID：14100270
> 
> 赞同：0
> 
> 时间：2012-12-31T10:13:01.213
> 
> 标签：ruby-on-rails-3, gmaps4rails

在我的 Rails 应用程序中，地图标记加载得非常好，但我无法让地图以加拿大 AB 的卡尔加里市为中心。我正在使用用户的位置（按 IP 进行地理编码），而且我似乎无法在地图上显示一个红色圆圈（描绘范围）。

我的控制器中有以下内容：

```
if !request.xhr?
  @json = @students.to_gmaps4rails do |student, marker|
    marker.infowindow render_to_string(:partial => "/map/infowindow", :locals => {:student => student}) 
    marker.title "#{student.name}, Grade: #{student.grade}"
    marker.json({:name => student.name, :address => student.full_address, :grade => student.grade, :subjects => student.subjects})
  end
  @mapOptions = "[{ 'map_options' => { 'type' => 'SATELLITE', 'detect_location' => true, 'center_on_user' => true, 'center_latitude' => 50, 'center_longitude' => -114, 'auto_adjust' => true} }]"
end
  @circles = "[{'lng': '#{results['address']['lng']}', 'lat': '#{results['address']['lat']}', 'radius': '#{(results['radius'] * 1000)}', 'strokeColor': '#{ '#FF0000'}'}]"
.
.
.
respond_to do |format|
  format.html
  format.xml {render :xml => [@subjects,@students,@address].to_xml}
  format.json {render :json => [@subjects,@students,@address].to_json}
end 
```

索引.haml：

```
= gmaps({"map_options" => {"data" => @mapOptions}, "markers" => {"data" => @json}, "circles" => {"data" => @circles} }) 
```

现在，最终，我希望能够通过使用 ajax 请求来更改地址。

# html - 多个导航元素的 HTML5 语义？

> ID：14100279
> 
> 赞同：2
> 
> 时间：2012-12-31T10:13:44.930
> 
> 标签：html, semantics, nav

我正在学习 HTML5，并获得了一个将 CSS Zen Gardens 转换为 HTML5 语义版本的项目。我已经能够轻松转换其中的大部分内容，但是底部的链接/导航给我带来了一些问题。
转换此/处理多个导航的最佳方法是什么？

```
<div id="linkList2">
     <div id="lselect">
          <h3 class="select"><span>Select a Design:</span></h3>
          <ul>
          <!-- Links -->
          </ul>
     </div>
     <div id="larchives">
          <h3 class="archives"><span>Archives:</span></h3>
          <ul>
          <!-- Links -->
          </ul>
     </div>
     <div id="lresources">
          <h3 class="resources"><span>Resources:</span></h3>
          <ul>
          <!-- Links -->
          </ul>
     </div>
</div> 
```

目前，我在认为 linkList2 应该是一个部分，每个子 div 元素应该是导航元素，或者 linkList2 应该是导航，子 div 元素是部分之间纠结。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-31T11:54:40.797

如果你做`linkList2`了一个，`section`那么你的语义是“这是本节的导航”。请注意，`nav`它已经在对[content 进行分段](http://www.whatwg.org/specs/web-apps/current-work/multipage/elements.html#sectioning-content)，因此将其包装在 a`section`中会有些多余。

另请注意，[规范](http://www.whatwg.org/specs/web-apps/current-work/multipage/sections.html#the-nav-element)说：

> 并非页面上的所有链接组都需要位于 nav 元素中——该元素主要用于由主要导航块组成的部分。

没有必要`nav`仅仅为了它而将每组链接都放在一个中。我认为您制作`linkList2`a的方法`nav`是最好的，尽管我不会太担心制作子元素`section`：

```
<nav id="linkList2">
     <div id="lselect">
          <h1 class="select"><span>Select a Design:</span></h1>
          <ul>
          <!-- Links -->
          </ul>
     </div>
     <div id="larchives">
          <h1 class="archives"><span>Archives:</span></h1>
          <ul>
          <!-- Links -->
          </ul>
     </div>
     <div id="lresources">
          <h1 class="resources"><span>Resources:</span></h1>
          <ul>
          <!-- Links -->
          </ul>
     </div>
</nav> 
```

正如我上面提到的，`nav`是对内容进行分段，所以所有的标题都应该是`h1`它们各自部分中的所有最高级别的标题（我已经在上面更改了它们）。但是，我认为，从实际可访问性的角度来看，仍然允许将它们保留为标记中的`h3`前面`h2`和`h1`标题。

另一种可以的方法是：

```
<div id="linkList2">
     <nav id="lselect">
          <h1 class="select"><span>Select a Design:</span></h1>
          <ul>
          <!-- Links -->
          </ul>
     </nav>
     <nav id="larchives">
          <h1 class="archives"><span>Archives:</span></h1>
          <ul>
          <!-- Links -->
          </ul>
     </nav>
     <nav id="lresources">
          <h1 class="resources"><span>Resources:</span></h1>
          <ul>
          <!-- Links -->
          </ul>
     </nav>
</div> 
```

正如我之前提到的，不要用`section`（或`article`）包装`nav`就足够了。

最后一点，因为您的问题是关于语义的。我知道您正在处理 CSS Zen Garden 的标记，所以重点可能是让您的新页面中的元素与所有旧页面相对应，以便所有样式表仍然有效，但您应该知道这*不是*一个好的示例'语义标记'。以下是您应该注意的一些事项：

*   这个标记[创建于 2003 年](http://en.wikipedia.org/wiki/CSS_Zen_Garden)，所以它永远不会成为我们*目前*认为好的语义标记的一个很好的例子。
*   *按照设计，CSS Zen Garden上*的标记必须保持不变——它是 CSS 的演示，而不是 HTML 的演示。
*   因为在[2003 年 IE6 是占主导地位的浏览器](http://www.onestat.com/html/aboutus_pressbox18.html)，而且无论如何都没有其他人在 CSS3 方面真正走得那么远，所以这个标记包含许多不必要的额外元素作为样式的可供性。值得注意的`span`是标题中的所有元素和（更有争议的）子`div`元素`lselect`和。`larchives``lresources`
*   除了缺少[OOOCSS 之外](https://github.com/stubbornella/oocss/wiki/faq)，这个标记还展示了[classitis](http://www.steveworkman.com/html5-2/standards/2009/classitis-the-new-css-disease/) - 不需要到处都有多个`id`和`class`属性。例如，不需要同时具有`id`of`lselect`和 a `class`of `select`，而是可以只使用选择器`#lselect h1`。
*   最后，`linkList2`是一个可怕的`id`语义。它不在链表上，它是否是第二个取决于标记的所有其余部分。使用的`id`s 和`class`名称也是语义标记的一部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-10-09T13:23:54.093

您应该使用`<nav>`HTML5 元素，因为这不仅是您想要的最语义化的元素，而且它还允许使用屏幕阅读器的人使用地标（`<nav>`将对应于`navigation`地标）导航页面。

现在，如果您网站的多个区域带有链接（例如：主导航和辅助导航），您应该确保`<nav>`正确标记不同的元素。这使得屏幕阅读器正确地宣布地标（例如：**“主要，导航”**，**“次要，导航”**），而不是一般地宣布​​一切为**“导航”**），这可能会造成混淆。

要标记`<nav>`元素，您可以执行以下操作之一：

## 选项 1：屏幕上没有可见文本

用于`aria-label`为元素提供文本替换。

```
<nav aria-label=’primary’&gt;
  <ul>
    ...List on links here...
  </ul>
</nav>
<nav aria-label=’secondary’&gt;
  <ul>
    ...List on links here...
  </ul>
</nav> 
```

## 选项 2：屏幕上的可见文本

如果屏幕上有可以识别区域的文本（例如：**“相关内容”**），您可以使用`aria-labelledby`.

```
<nav aria-label="Site Menu">
  <ul>
    ...List on links here...
  </ul>
</nav>
<article>
  <h1>Title</h1>
  ...
  <nav aria-labelledby="id-1">
    <h2 id="id-1">
      Related Content
    </h2>
    <ul>
      ...List on links here...
    </ul>
  </nav>
</article> 
```

这里有一些资源可以进一步解释这一点：

*   [多个导航地标](https://www.aditus.io/patterns/multiple-navigation-landmarks/)
*   [咏叹调标签](https://www.aditus.io/aria/aria-label/)

# c++ - 未知的时间戳格式

> ID：14100283
> 
> 赞同：2
> 
> 时间：2012-12-31T10:13:48.643
> 
> 标签：c++, timestamp

外部设备定期向我发送我无法翻译的时间戳。具有以下格式：

```
31.12.2012 12:00:00 = 3B 3E C0 00

31.12.2012 12:00:01 = 3B 3E C0 01

31.12.2012 12:00:10 = 3B 3E C0 0A

31.12.2012 12:01:00 = 3B 3E C0 40

31.12.2012 13:00:00 = 3B 3E D0 00

31.12.2012 12:30:00 - 3B 3E C7 80 

31.12.2012 12:30:59 - 3B 3E C7 BB 

31.12.2012 12:44:59 - 3B 3E CB 3B 

31.12.2012 12:45:00 - 3B 3E CB 40

31.13.2013 12:30:00 - 3F 3E C7 80 
```

我不知道这个时间戳是如何编码的，它不是常规的 unix 时间戳。看起来 LSB 包含秒数，但并不总是这样（与 比较`12:00:10`）。有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T10:20:22.107

我不明白 12:00:10 的例子有什么奇怪的，0x0A 等于 10。 12:01:00 的例子看起来有点奇怪：

12:01:00 3B 3E C0 40

二进制中的 40 是`0100 0000`- 我的猜测是最后 6 位是秒，这足以容纳 0-59。

为确保您必须提供不同分钟值的数据。

日期似乎也存储在部分字节中：

31 二进制是`11111` 12 二进制是`1100`

查看其他数据，我的最佳猜测是：

```
3B 3E C0 40 = 
0011 1011 0011 1110 1100 0000 1000 0000
yyyy yyMM MMdd dddh hhhh mmmm mmss ssss 
```

001110（其余位）应该是年份，但该值是十进制的 14。最好等到明天，这样你就有了 2013 年的数据 :-)

# internationalization - 具有 MVC4 资源的多语言站点

> ID：14100285
> 
> 赞同：0
> 
> 时间：2012-12-31T10:14:15.333
> 
> 标签：internationalization, asp.net-mvc-4

从技术上讲，翻译网站上的标签等小段文本的最佳方法是什么？

*   包含整个站点使用的所有标签的 Global_resources 文件？
*   连接到我的文化表（保存语言）的数据库表。该表基本上与资源文件相同。
*   另一个解决方案？

请记住，非技术用户将能够登录 CMS 并调整内容，尽管不在标签等级别。

但是，如果可以在 Visual Studio 2012 之外更改标签，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T10:17:46.127

看看下面的帖子：[本地化/全球化应该是数据库驱动或资源/Web 框架（ASP.NET）驱动或自定义的东西](https://stackoverflow.com/questions/7783112/localization-globalization-should-be-database-driven-or-resource-web-frameworka)我想你会在那里找到你的答案。

我还想补充一点，资源文件是纯 XML。因此，更改标签文本等不需要 DBA 或有权访问数据库的其他人的知识和/或特权。您可以将资源文件的值更改为新值。

```
<root>
<!-- code ommited -->
  <data name="PropertyValueRequired" xml:space="preserve">
    <value>Can't be empty</value>
  </data>
</root> 
```

# eclipse - 无法从 web-inf 下的 jsp 访问 css 文件

> ID：14100287
> 
> 赞同：0
> 
> 时间：2012-12-31T10:14:23.153
> 
> 标签：eclipse, jsp

我的我的项目文件夹目录如下

```
SpringMVCTest/WebContent/WebInf/jsp/index.jsp 
```

和

css 文件位于

```
SpringMVCTest/WebContent/style/main.css 
```

我的问题是我无法从 index.jsp 访问 css 文件。我试过了

```
<link rel="stylesheet" type="text/css" href="../style/main.css"> 
```

和其他人。

请有任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T10:24:18.333

您是否将以下内容添加到您的 servlet-context.xml 文件中？
**编辑**
您可以在下面的 Web.xml 文件中找到该文件的读取位置：至少这是 Spring Mvc 3.1 中的位置，这是我的项目使用的.

```
<!-- Processes application requests -->
<servlet>
    <servlet-name>appServlet</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/spring/appServlet/servlet-context.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet> 
```

您的 servlet-context.xml 文件：

```
<!-- Handles HTTP GET requests for /WebContent/** by efficiently serving up static resources in the ${webappRoot}/WebContent directory -->
<resources mapping="/WebContent/**" location="/WebContent/" /> 
```

然后从你的jsp你应该能够使用：

```
<link rel="stylesheet" type="text/css" href="/WebContent/style/main.css"> 
```

上面告诉spring不要通过DispatcherServlet处理这些静态资产

# node.js - 将 node.js 与 socketstream 一起使用时，客户端 js 文件未加载

> ID：14100290
> 
> 赞同：0
> 
> 时间：2012-12-31T10:14:30.667
> 
> 标签：node.js, socketstream

我正在使用带有socketstream的node.js。客户端js文件未加载，并且在调用服务器方法时，我在客户端获取ss未定义错误。

```
 This is my  app.js file

   var ss = require('socketstream'), 
  express = require('express');
  var app = express(); 
 // Code & Template Formatters 
 ss.client.formatters.add(require('ss-stylus')); 
 ss.client.templateEngine.use(require('ss-hogan')); 
   ss.client.define('main',
    { view: 'app.html', 
    css: ['libs/reset.css', 'app.styl'], 
   code: ['libs/jquery.min.js', 'app'], 
     tmpl: '*' }); 
 // Use Express to route requests 
  app.get('/', function(req, res){ 
  res.serveClient('main'); });
  server = app.listen(3000); 
  ss.start(server);
  // Append SocketStream middleware to the stack 
  app.stack = ss.http.middleware.stack.concat(app.stack);

   This is my server side method rpc method
     exports.actions = function(req, res, ss){

    return {

        saveUserInfo: function(name,pwd){
        console.log(name);
        console.log(pwd);
        res('name is '+name + '&'+'password is '+pwd);

      }

        }
       } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T10:56:16.420

ss.rpc 函数采用 rpc 文件的名称，后跟函数名称。例如，如果文件名为*server/rpc/authentication.js*，那么您可以从客户端调用它：

```
ss.rpc('authentication.saveUserInfo', name, pwd, function(response){
  console.log(response);
}); 
```

# asp.net-mvc - Html.DropDownListFor() 更改 ASP.NET MVC 中的 SelectListItems

> ID：14100291
> 
> 赞同：1
> 
> 时间：2012-12-31T10:14:37.117
> 
> 标签：asp.net-mvc, html.dropdownlistfor

我在页面中需要一个 DropDownList，所以我尝试这种方式：

行动：

```
[HttpGet]
public ActionResult GetPoint() {

  ...
  List<SelectListItem> zooms = new List<SelectListItem>();
    for (int i = 0; i <= 21; i++) {
      if (i == 9)
        zooms.Add(new SelectListItem() { Selected = true, Text = i.ToString(), Value = i.ToString() });
      else
        zooms.Add(new SelectListItem() { Selected = false, Text = i.ToString(), Value = i.ToString() });
            }
  model.myselectlist = zooms;
  ...

  return View(model);
} 
```

在视图中：

```
@Html.DropDownListFor(model => model.Zoom, Model.myselectlist , new { @class = "dropdown" }) 
```

因此，正如我所料，我们有一个带有`9`is Selected Item 的 DropDownList。

但是在同一个视图中我需要另一个 DropDown 所以这是我的实现：

```
[HttpGet]
public ActionResult GetPoint() {

  ...

  List<SelectListItem> places = new List<SelectListItem>();
  places.Add(new SelectListItem() { Text = "NY", Value = "NY", Selected = false });
  places.Add(new SelectListItem() { Text = "CA", Value = "CA", Selected = false });
  places.Add(new SelectListItem() { Text = "TX", Value = "TX", Selected = false });
  places.Add(new SelectListItem() { Text = "NH", Value = "NH", Selected = true });
  places.Add(new SelectListItem() { Text = "NV", Value = "NV", Selected = false });
  model.myselectlistII = places;

  ...

  return View(model);
} 
```

在视图中我有：

```
@Html.DropDownListFor(model => model.Place, Model.myselectlistII , new { @class = "dropdown" }) 
```

因此，如您所见，我有一个`NH`Item 具有的列表`selected = true`。

而且我希望有一个下拉列表，该下拉列表已`NH`选择但未发生，并且始终是第一个选择的项目。

鉴于我有一个奇怪的行为，我在操作末尾和`@Html.DropDownListFor`视图页面的行首调试代码，一切正常，但在此行之后我再次检查`Model.myselectlistII`所选项目已更改并且所有项目都已选择财产`false`，我不明白发生了什么？哪里有问题？为什么第一个`DropDownFor`没有改变任何东西，但第二个改变了我的清单？你的建议是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T13:02:57.083

Samuel Caillerie 是正确的。您正在使用 DropDownList将**您**的属性 Zoom 和 Place 绑定到选择列表。无论这些属性的值是什么，都将在视图呈现时选择。还没有找到一个很好的文档，但是这里有另一个堆栈溢出帖子来帮助支持它：

[asp.net mvc 3 预选 Html.DropDownListFor 不在书呆子晚餐中工作](https://stackoverflow.com/questions/4800447/asp-net-mvc-3-pre-select-html-dropdownlistfor-not-working-in-nerd-dinner)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T23:20:03.930

我在我的一个项目中所做的并且有点用处的是，开发了另外两个
`DropDownListFor`接受的重载`selectedValue`。

```
namespace MyMvcApplication.Helpers
{
    public static class ExtensionMethods
    {
        public static MvcHtmlString DropDownListFor<TModel, TProperty>
                             (this HtmlHelper<TModel> helper,
                              Expression<Func<TModel, TProperty>> expression,
                              string selectedValue,
                              IEnumerable<SelectListItem> selectList,
                              string optionLabel,
                              object htmlAttributes)
        {
            if (string.IsNullOrEmpty(selectedValue))
                selectedValue = string.Empty;
            if (selectList != null)
            {
                foreach (SelectListItem sli in selectList)
                {
                    if (sli.Value.ToLower().Trim() == selectedValue.ToLower().Trim())
                    {
                        sli.Selected = true;
                        break;
                    }
                }
            }
            else 
            { 
                selectList = new List<SelectListItem>() 
                                  { new SelectListItem() 
                                          { Text = "", Value = "", Selected = true }
                                  };
            }
            return helper.DropDownListFor(expression, selectList, optionLabel, htmlAttributes);
        }

        public static MvcHtmlString DropDownListFor<TModel, TProperty>
                             (this HtmlHelper<TModel> helper,
                              Expression<Func<TModel, TProperty>> expression,
                              string selectedValue,
                              IEnumerable<SelectListItem> selectList,
                              string optionLabel,
                              IDictionary<string, object> htmlAttributes)
        {
            if (string.IsNullOrEmpty(selectedValue))
                selectedValue = string.Empty;
            if (selectList != null)
            {
                foreach (SelectListItem sli in selectList)
                {
                    if (sli.Value.ToLower().Trim() == selectedValue.ToLower().Trim())
                    {
                        sli.Selected = true;
                        break;
                    }
                }
            }
            else 
            { 
                selectList = new List<SelectListItem>() 
                                  { new SelectListItem() 
                                          { Text = "", Value = "", Selected = true } 
                                  };
            }
            return helper.DropDownListFor(expression, selectList, optionLabel, htmlAttributes);
        }

    }
} 
```

所以在视图中，我可以将一个字符串作为 selectedValue 传递给`DropDownListFor`，例如：

```
@using MyMvcApplication.Helpers

@Html.DropDownListFor(model => model.MyData,
                               "Default Value for DropDownList", //Or Model.MySelectedValue
                               Model.MySelectList, null, null) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T16:19:35.943

请注意是否有同名的**查询字符串**，它将覆盖该行为，不确定是否有**同名的****隐藏字段**

 **IE

> 如果找到 Blockquote ，DropDownListFor 将使用DinnerID的**查询字符串的值**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-01T10:03:45.143

这个问题的解决方案比我们都认为的更简单......

当从控制器返回视图时，我们需要做的就是在视图模型上为下拉绑定到的元素设置属性 - 例如：model.Zoom = 'NH'

这样当我们这样做时

```
@Html.DropDownListFor(model => model.Zoom, Model.myselectlist , new { @class = "dropdown" }) 
```

HtmlHelper 会自动选取默认值显示在 DropDownList

简单！

希望它可以帮助你和所有其他人 - 像我一样！- 已经浪费了很多时间来寻找这个明显问题的解决方案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-08T13:45:20.597

小伙伴们看看吧！！！超级静态功能懒惰的方式来选择/选择/绑定下拉列表用于 mvc razor bootstrap 样式；）作为奖励去插入法语或英语描述！你的改进，但你会很容易得到这个想法。玩得开心！万事通...

```
 <div class="form-group">
                    <label>@(HttpContext.Current.Session["culture"].ToString().Equals("fr-CA") ? "Quel est votre niveau d'expertise" : "What is your skill level")</label>
                    @if (Model.ClientLevel == null)
                    {
                        <select class="form-control" name="ClientLevel">
                            <option selected value="0">@(HttpContext.Current.Session["culture"].ToString().Equals("fr-CA") ? "Choisir un niveau" : "Choose a level")</option>
                            <option value="1">@(HttpContext.Current.Session["culture"].ToString().Equals("fr-CA") ? "Débutant" : "Beginner")</option>
                            <option value="2">@(HttpContext.Current.Session["culture"].ToString().Equals("fr-CA") ? "Intermédiaire" : "Intermediate")</option>
                            <option value="3">@(HttpContext.Current.Session["culture"].ToString().Equals("fr-CA") ? "Advanced" : "Advanced")</option>
                            <option value="4">@(HttpContext.Current.Session["culture"].ToString().Equals("fr-CA") ? "Expert" : "Expert")</option>
                            <option value="5">@(HttpContext.Current.Session["culture"].ToString().Equals("fr-CA") ? "Autre" : "Other")</option>
                        </select>
                    }
                    else
                    {

                        List<SelectListItem> listItems = new List<SelectListItem>();
                        listItems.Add(new SelectListItem() { Text = "Choose a level", Value = "Choose a level"});
                        listItems.Add(new SelectListItem() { Text = "Beginner", Value = "Beginner" });
                        listItems.Add(new SelectListItem() { Text = "Intermediate", Value = "Intermediate"});
                        listItems.Add(new SelectListItem() { Text = "Advanced", Value = "Advanced"});
                        listItems.Add(new SelectListItem() { Text = "Expert", Value = "Expert"});
                        listItems.Add(new SelectListItem() { Text = HttpContext.Current.Session["culture"].ToString().Equals("fr-CA") ? "Autre" : "Other", Value = "Other"});

                        @Html.DropDownListFor(m => m.ClientLevel, listItems, new { @class = "form-control" })
                    }
                </div> 
```**

# php - Jquery：加载 PDF 时显示对话框（例如使用 jquery.fileDownload.js）

> ID：14100292
> 
> 赞同：2
> 
> 时间：2012-12-31T10:14:41.263
> 
> 标签：php, jquery

在我的网站上，我有一个 php 文件，它使用 mpdf-plugin 通过对 MYSQL 数据库进行查询来创建 pdf 文件。

基本网址：pdf_report.php?VARa=b&VARb=c。（VARa 和 VARb 用作 GET 变量来对数据库进行查询。）

不是我真正的问题：我想显示一个在生成 PDF 时显示的加载对话框。完成后，加载对话框应该会消失，并且 PDF 文件会下载（或显示在浏览器中）。[为了实现这一点，我想我可以通过使用示例](http://jqueryfiledownload.apphb.com)来使用“jquery.fileDownload”文件。但由于我是 Jquery 的初学者，我找不到让它工作的方法。

到目前为止，我提出的是（完全按照示例）：

```
<?php 
header('Set-Cookie: fileDownload=true');
header("Content-type: text/pdf");
header('Content-Disposition: attachment; filename="report_b_c.pdf"');
//b and c are the values of the variables VARa and VARb
?>

<html>
<head>
<title>PDF Wait dialog</title>
<link href="css/jquery-ui.css" rel="stylesheet" type="text/css"/>
<script src="js/jquery-ui.js" type="text/javascript"></script>
<script src="js/jquery-1.8.3.js" type="text/javascript"></script>
<script src="js/jquery.fileDownload.js" type="text/javascript"></script>
enter code here
</head>
<body>
<script>
$(function () {
$(document).on("click", "a.fileDownloadCustomRichExperience", function () {

    var $preparingFileModal = $("#preparing-file-modal");

    $preparingFileModal.dialog({ modal: true });

    $.fileDownload($(this).attr('href'), {
        successCallback: function (url) {

            $preparingFileModal.dialog('close');
        },
        failCallback: function (responseHtml, url) {

            $preparingFileModal.dialog('close');
            $("#error-modal").dialog({ modal: true });
        }
    });
    return false; //this is critical to stop the click event which will trigger a normal file download!
});
});
</script>
<div id="preparing-file-modal" title="Preparing report..." style="display: none;">
We are preparing your report, please wait...

<div class="ui-progressbar-value ui-corner-left ui-corner-right" style="width: 100%; height:22px; margin-top: 20px;"></div>
</div>

<div id="error-modal" title="Error" style="display: none;">
There was a problem generating your report, please try again.
</div>
<a class="fileDownloadCustomRichExperience" href="pdf_logboek_report.php?VARa=b&VARb=c">Report.pdf</a>
</body>
</html> 
```

[编辑] 运行此 php 文件时，不会显示错误。有时会在 0.5 秒内显示一个对话框并下载一个 pdf 文件。文件名：logboek_report_.pdf（这不是预期的文件，内容为空！）

当我运行 pdf_logboek_report.php?VARa=b&VARb=c 时，会创建并显示预期的 pdf 文件（或根据浏览器支持下载）。

[编辑] 我要加载的 pdf 通常需要 30-60 秒才能生成。

但不幸的是，它没有按预期工作，因为我（作为初学者）做错了什么。或者是一种更简单的方法来实现我想要的对话？！

请帮帮我！

# javascript - 带有播放符号的漂亮照片黑色拇指

> ID：14100298
> 
> 赞同：0
> 
> 时间：2012-12-31T10:15:37.380
> 
> 标签：javascript, prettyphoto

我`prettyphoto lightbox`用来显示数据库中的图片。

缩略图全是黑色的，上面有播放图标，并且没有显示图像。顺便说一句，当您按下其中一个图标时，它会将您指向正确的图像。[你可以在这里](http://davidsinay.com)看到我的网站。

在浏览器 URL 中，我正在传递（例如）：`Test2.aspx#prettyPhoto[44]/2/` 从 fireBug 我拉出图像地址：（以 http 开头） `ImageHandler.ashx?ImID=44&isLogo=false&in=On%20Air%20Card`

请指教...

```
 <asp:DataList ID="dlLogos" runat="server" RepeatColumns="3" CellPadding="7" 
            RepeatDirection="Horizontal" ShowFooter="False" ShowHeader="False" >

    <ItemTemplate>

     <div class=hovergallery>
        <a id="imageLink"  href='<%# "ImageHandler.ashx?ImID="+ Eval("CompanyID") + "&isLogo=true" %>'  rel='<%# "prettyPhoto[" +  Eval("CompanyID") + "]" %>'  title='<%# Eval("Description") %>'   runat="server">
            <asp:Image ID="Image1" CssClass=hovergallery ImageUrl= '<%# "PPImgHandeler.ashx?ImID="+ Eval("CompanySorting") %>'  runat="server" width="300px" height="170px"  /> </a> 

        </div>

</ItemTemplate>

</asp:DataList>

<asp:DataList ID="dlNotLogos" runat="server">
<ItemTemplate>

    <div style="display:none" class=hovergallery>
        <a id="imageLink"  href='<%# "ImageHandler.ashx?ImID="+ Eval("CompanyID") + "&isLogo=false&in=" + Eval("ImageName") %>'   rel='<%# "prettyPhoto[" +  Eval("CompanyID") + "]" %>'  title='<%# Eval("Description") %>'    runat="server">
            <asp:Image ID="Image1" CssClass=hovergallery ImageUrl= '<%# "PPImgHandeler.ashx?ImID="+ Eval("CompanySorting") %>'  runat="server"   width="300px" height="170px" /> </a> 
      </div>

</ItemTemplate>
</asp:DataList> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T19:16:47.943

从改变：

```
pp_images[i].match(/\b(jpg|jpeg|png|gif)\b/gi) 
```

至：

```
pp_images[i].toLowerCase() 
```

在 prettyPhoto.js 中。

一切都奏效了。希望它可以帮助某人。

# objective-c - 图片仅在 ios6 中以纵向模式显示

> ID：14100303
> 
> 赞同：0
> 
> 时间：2012-12-31T10:16:09.110
> 
> 标签：objective-c, ios, xcode

我的方向设置为横向，iphone 模拟器加载并以横向模式启动我的应用程序。从 ios6 开始，上面的代码以纵向模式而不是横向模式加载图片。请指教。

**编辑：**问题从这里开始：

```
- (void)viewDidLoad {
    [super viewDidLoad];
    [self.view setBackgroundColor:[[UIColor alloc] initWithPatternImage:[UIImage imageNamed:@"480x320-background.png"]]];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)anInterfaceOrientation{
    return anInterfaceOrientation==UIInterfaceOrientationLandscapeLeft || anInterfaceOrientation==UIInterfaceOrientationLandscapeRight;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T10:32:14.500

在 iOS6`shouldAutorotateToInterfaceOrientation`中已弃用。您必须使用`supportedInterfaceOrientations`和`shouldAutorotate`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T11:47:54.370

要修复 IOS6 中的自动旋转问题，请执行以下操作：

内部`AppDelegate.m`文件

添加以下内容

```
if ( [[UIDevice currentDevice].systemVersion floatValue] < 6.0)
{
    // Note : addSubView doesn't work on IOS6
    [window addSubview: viewController.view];
}
else
{
    // For IOS6, use this method
    [window setRootViewController:viewController];
} 
```

代替

```
[window addSubview: viewController.view]; 
```

内部`RootViewController.m`文件

// 对于 IOS6，使用`supportedInterfaceOrientations`&`shouldAutorotate`代替`shouldAutorotateToInterfaceOrientation`

```
- (NSUInteger) supportedInterfaceOrientations
{
  return UIInterfaceOrientationMaskLandscape;   
}

- (BOOL) shouldAutorotate 
{
  return YES;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T11:52:13.797

在 iOS 6 中，旋转方式发生了变化。您应该实现此方法，并返回 YES。

```
- (BOOL) shouldAutorotate 
{
  return YES;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-01T06:48:14.950

那是什么解决了我的问题：在`didFinishLaunchingWithOptions` `[window setRootViewController:headiPhone];`

# algorithm - 带消元的最大子数组

> ID：14100306
> 
> 赞同：2
> 
> 时间：2012-12-31T10:16:22.027
> 
> 标签：algorithm, arrays

我知道如何在 O(n) 中找到数组的最大连续子数组。然而，以下链接中的第二个问题要求在可以消除某些元素 (k) 时找到最大连续子数组： [http](http://www.iarcs.org.in/inoi/2011/inoi2011/inoi2011-qpaper.pdf) ://www.iarcs.org.in/inoi/2011/inoi2011/inoi2011-qpaper.pdf 我似乎找不到有效的方法来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T10:26:08.607

鉴于我相信做一个 O(N^2) 解决方案的约束条件。我不会告诉你如何解决这个问题，但会给你一些提示：

1.  请注意，这些数字的价值非常有限 - 它们可能只在 [-10^4, 10^4] 范围内，这使得有一个数组可以计算给定值有多少数字（总体而言数组或仅在给定的间隔内）
2.  迭代您将选择的子数组的长度，并在线性时间内解决每个长度的问题
3.  请注意，对于给定的数组，如果它们小于 k，您将始终丢弃最小的 k 值或子数组中的所有负数

希望这能帮助您解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T14:12:31.340

有一个 O(NK) 动态规划解决方案：

让`d[i][j]`(0<= `i`<=N, 0<= <=K) 是通过消除元素以第 th 个元素`j`结尾的任何（可能为空）子数组的最大和。`i``j`

初始值： `d[0][j] = 0`对于 0<= `j`<=K

更新动态值：

```
for i = 1 to N:
     d[i][0] = max (d[i-1][0]+a[i], 0)
     for j = 1 to K:
         d[i][j] = max(d[i-1][j]+a[i], d[i-1][j-1]) 
```

解决方案是`max{d[N][j]}`0<= `j`<=K

# java - 无法接收数据报包

> ID：14100309
> 
> 赞同：1
> 
> 时间：2012-12-31T10:16:39.673
> 
> 标签：java, udp, packet, datagram

我无法收到`DatagramPacket`s。但是，使用wireshark，我可以验证数据包是否到达。我在这个站点上看到了类似的问题以及可能的解决方案，但它们对我没有多大帮助（我已经尝试过停用防火墙等）。我的代码很简单：

```
// Create socket
DatagramSocket socket = new DatagramSocket(5554);
socket.connect(InetAddress.getByName("192.168.1.1"), 5554);

try {           
    while(!stop) {
        keepAwake(); // This sends some bytes using socket.send(...), works perfectly fine
        DatagramPacket packet = new DatagramPacket(new byte[2048], 2048);
        socket.receive(packet); // Does not work :(
        System.out.println("[DEBUG] Packet received!"); // Never happens

        // Parse packet
    }
} catch (Exception e) {
    e.printStackTrace(); // Also no exceptions are thrown
} 
```

这里可能是什么问题？顺便说一句，我的操作系统是 Ubuntu 12.10，数据包是从用 C 语言编写的服务器发送的，我没有其源代码（DatagramSocket 是否只接收从 Java DatagramSocket 发送的 DatagramPackets？）。

我真的很感激任何建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T10:47:14.747

尝试使用 IP 为 0.0.0.0 和您想要的端口而不是“connect()”的 bind()。

**编辑：**实际上，构造函数已经绑定了它，省略连接就足够了。

从文档：

> 当套接字连接到远程地址时，数据包只能发送到该地址或从该地址接收。

这可能就是您没有收到数据包的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T20:14:10.173

解决了！问题不在于`DatagramSocket`：我需要接收的数据包被发送到某个奇怪的地址（不是我的 PC）。由于我想要接收的数据包是 AR.Drone，我终于设法告诉它应该将数据包发送到我的 PC。现在我可以收到它们了！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T11:22:39.897

如果 192.168.1.1 是路由器，则数据包可能不是来自那里，因此您不应该连接到它。实际上，您根本不需要调用 connect() ，除非您需要过滤掉来自其他来源的数据包。否则连接到数据包的实际源地址。

不，DatagramSocket 不限于从其他 DatagramSocket 接收。

# c# - 如何在 C# 中创建可私有设置的只读结构（例如 Size）？

> ID：14100312
> 
> 赞同：3
> 
> 时间：2012-12-31T10:16:51.890
> 
> 标签：c#, struct, constants, structure, readonly

不确定这是否可以做到，但我需要计算一个大小并将其存储在一个基类中，然后将该结果作为只读方式公开给子类。将 Size 本身设置为只读很容易，只需将其隐藏在具有受保护的 getter 和私有 setter 的属性后面，就像这样......

```
private Size _someSize;
protected Size SomeSize
{
    get{ return _someSize; }
    private set{ _someSize = value; }
} 
```

然后从基类中，我可以像这样设置它......

```
SomeSize = new Size(23.0, 14.7); 
```

...但是我不能从子类中做到这一点，因为 setter 是基类私有的。

但是，我也不希望子类也能够修改 Size 结构的成员。

## 更新

在子类中，如果您尝试编译它...

```
SomeSize.Width = 17.0; 
```

...您将收到错误“无法修改 SomeSize 的返回值，因为它不是变量”，因此确实像我希望的那样保护了基类中的值。

不过，如果有人能弄清楚如何让 getter 返回一个*真正*的只读结构（如果这样的事情甚至可能，我对此表示怀疑），我会给你答案。当然，这个问题实际上并不需要这样做，但是知道它是否可以完成仍然是一件好事。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-31T10:36:45.033

您一定没有尝试编译它，因为您提出的内容已经满足您的需求。该`Size`类型是`structure`（值类型），而不是`class`（引用类型），因此属性 getter 将返回存储在 _someSize 中的值的副本，而不是对它的引用。因此，如果子类实际上试图更改`SomeSize.Width`属性，它实际上不会触及私有 _someSize 变量。它只是更改返回的值的副本。然而，编译器认识到这样做是无效的，因此，它甚至不会让以下行编译：

```
SomeSize.Width = 17.0; 
```

您可以更改值并仍然使其编译的唯一方法是这样的：

```
Size temp = SomeSize;
temp.Width = 17.0; 
```

但是，就像我说的那样，由于这只是值的副本，它实际上不会改变`SomeSize`属性的值——它只会改变`temp`.

但是，如果`Size`类型是一个类，您仍然可以通过简单地返回对象的克隆而不是对原始对象的引用来实现相同的保护。例如， if `Size`, 实际上是一个看起来像这样的类：

```
public class MySize
{
    public MySize(float height, float width)
    {
        Height = height;
        Width = width;
    }

    public float Height { get; set; }
    public float Width { get; set; }

    public MySize GetCopy()
    {
        return (MySize)MemberwiseClone();
    }
} 
```

即使它的属性不是只读的，您仍然可以像这样从中创建一个伪只读属性：

```
private MySize _someSize;
protected MySize SomeSize
{
    get { return _someSize.GetCopy(); }
    private set { _someSize = value; }
} 
```

但是，如果您真的希望返回对象的属性是只读的，那么唯一的方法就是实现您自己的原始类型的只读版本。例如，该`List<T>`类型支持获取其自身的只读版本的能力，以便您可以将其用于只读列表属性。因为`List<T>`具有该内置功能，您可以轻松地执行以下操作：

```
private List<string> _list = new List<string>();
public ReadOnlyCollection<string> List
{
    get { return _list.AsReadOnly(); }
} 
```

但是，如您所见，该`AsReadOnly`方法不返回`List<T>`对象。相反，它返回一个`ReadOnlyCollection`对象，该对象是一个全新的类型，被定制为列表的只读版本。因此，换句话说，真正创建只读`Size`属性的唯一方法是创建自己的`ReadOnlySize`类型，如下所示：

```
public struct ReadOnlySize
{
    public ReadOnlySize(Size size)
    {
        _size = size;
    }

    private Size _size;

    public float Height 
    {
        get { return  _size.Height; } 
    }

    public float Width
    {
        get { return _size.Width; }
    }
} 
```

然后你可以像这样制作你的只读属性：

```
private Size _someSize;
public ReadOnlySize SomeSize
{
    get { return new ReadOnlySize(_someSize); }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T18:55:59.290

.net 语言中结构类型的主要限制之一是，虽然可写结构类型存储位置的字段（变量、字段、参数、数组槽等）本身是可写存储位置（如果它们是结构类型，它们的字段同样是可写的存储位置），这种访问只适用于结构类型的*存储位置*`System.Array`，并且除了可以公开像存储位置一样工作的*属性*之外，没有任何其他类型可以通过它来公开。

如果一个类提供了一种方法，该方法可以将该存储位置作为`ref`参数传递给提供的回调，则类可以将私有存储位置公开为受控情况下的存储位置。

例如：

```
public delegate void ActByRef<T1>(ref T1 p1);
public delegate void ActByRef<T1,T2>(ref T1 p1, ref T2 p2);
public delegate void ActByRef<T1,T2,T3>(ref T1 p1, ref T2 p2, ref T3 p3);

public void ActOnSize(ActByRef proc) 
  { proc( ref _someSize); }
public void ActOnSize<XT1>(ActByRef proc, ref XT1 xp1) 
  { proc( ref _someSize, ref xp1); }
public void ActOnSize<XT1,XT2>(ActByRef proc, ref XT1 xp1, ref XT2 xp2)
  { proc( ref _someSize, ref xp1, ref xp2); } 
```

如果希望在暴露这种方法的某物的宽度上增加 5，则可以使用

```
thing.ActOnSize((ref Size sz) => sz.Width += 5); 
```

如果有一个局部变量“HeightAdder”，并且希望将其添加到对象的高度，可以使用

```
thing.ActOnSize((ref Size sz, ref int adder) =>
  sz.Height += adder, ref HeightAdder); 
```

请注意，由于编写的 lambda 表达式不会捕获任何局部变量，因此可以将其评估为静态委托（如果`HeightAdder`委托已将范围，并且每次执行方法调用时都需要生成一个委托；将数量作为参数传递可以避免这种开销）。`ref``adder``HeightAdder``ref`

如果访问方法包括索引或键的参数，则类似的方法可以由类似于`List<T>`或`Dictionary<TKey,TValue>`允许回调方法直接作用于列表槽或字典条目的类使用。

这种方法的一个很好的特点是它允许集合提供并发访问的样式，否则这些访问是很困难的。如果集合中的事物属于可与`Interlocked`方法一起使用的类型（或者是其字段可与此类方法一起使用的公开结构类型），则客户端代码可以使用此类方法对底层数据执行线程安全的原子操作。如果集合中的东西不是这种类型，那么集合可能能够比其他方法更安全地实现锁定。例如， a`ConcurrentIndexedSet<T>`可能有一个`ActOnItem(int item, int timeout, ActByRef<T> proc)`; 将在锁内的项目上调用的方法`proc`（相信客户端提供`proc`可以信任在合理的时间范围内返回）。虽然这样的代码无法防止出现`proc`死锁或以其他方式被搁置的可能性，但它可以确保在将控制权返回给调用代码之前释放锁。

# asp.net - 如何让asp.net v1.1验证控件兼容IE9

> ID：14100315
> 
> 赞同：-1
> 
> 时间：2012-12-31T10:17:07.143
> 
> 标签：asp.net

如何让ASP.net v1.1 兼容IE9？我已经尝试了论坛中提供的所有选项，但似乎没有任何效果。一旦我启动应用程序，它的登录页面就会出现，但没有显示图像（应该出现图像），图像出现十字标记，输入用户名和密码后，提交按钮不起作用。这意味着 IE9 不支持 v1.1 的验证控件。谁能给我一个修复，我不想更改代码。

按钮命令不起作用，并且在加载页面时，它的图像也没有显示，并且图像出现十字标记。

问候， 安舒尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T11:31:28.233

我不知道您是否尝试过，但过去我们使用以下配置部分正确呈现其他浏览器，尤其是 FF，因为 IE 9 的代理字符串格式已更改，您可以尝试一下。将它放在该`System.Web`部分下并为 IE 9 添加另一个案例。我希望它可以解决您的问题。

```
 <browserCaps>
<!-- GECKO Based Browsers (Netscape 6+, Mozilla/Firebird, ...) //-->
<case match="^Mozilla/5\.0 \([^)]*\) (Gecko/[-\d]+)? (?'type'[^/\d]*)([\d]*)/(?'version'(?'major'\d+)(?'minor'\.\d+)(?'letters'\w*)).*">
    browser=Gecko
    type=${type}
    frames=true
    tables=true
    cookies=true
    javascript=true
    javaapplets=true
    ecmascriptversion=1.5
    w3cdomversion=1.0
    css1=true
    css2=true
    xml=true
    tagwriter=System.Web.UI.HtmlTextWriter
    <case match="rv:(?'version'(?'major'\d+)(?'minor'\.\d+)(?'letters'\w*))">
        version=${version}
        majorversion=${major}
        minorversion=${minor}
        <case match="^b" with="${letters}">
            beta=true
        </case>
    </case>
</case>
<!-- AppleWebKit Based Browsers (Safari...) //-->
<case match="AppleWebKit/(?'version'(?'major'\d)(?'minor'\d+)(?'letters'\w*))">
    browser=AppleWebKit
    version=${version}
    majorversion=${major}
    minorversion=0.${minor}
    frames=true
    tables=true
    cookies=true
    javascript=true
    javaapplets=true
    ecmascriptversion=1.5
    w3cdomversion=1.0
    css1=true
    css2=true
    xml=true
    tagwriter=System.Web.UI.HtmlTextWriter
    <case match="AppleWebKit/(?'version'(?'major'\d)(?'minor'\d+)(?'letters'\w*))( \(KHTML, like Gecko\) )?(?'type'[^/\d]*)/.*$">
        type=${type}
    </case>
</case>
<!-- Konqueror //-->
<case match="Konqueror/(?'version'(?'major'\d+)(?'minor'\.\d+)(?'letters'));\w*(?'platform'[^\)]*)">
    browser=Konqueror
    version=${version}
    majorversion=${major}
    minorversion=${minor}
    platform=${platform}
    type=Konqueror
    frames=true
    tables=true
    cookies=true
    javascript=true
    javaapplets=true
    ecmascriptversion=1.5
    w3cdomversion=1.0
    css1=true
    css2=true
    xml=true
    tagwriter=System.Web.UI.HtmlTextWriter
</case> 
```

# android - 操作栏或选项卡

> ID：14100316
> 
> 赞同：0
> 
> 时间：2012-12-31T10:17:14.933
> 
> 标签：android, eclipse, android-actionbar

我对**ActionBar**和**Tabs**的使用有点困惑。我想两者都用于同一件事，即在整个应用导航中提供一些链接。**ActionBar**也可以根据屏幕自行调整。它也有库来支持早期版本的android。那么我们将使用选项卡或两者一起使用的情况会怎样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T10:21:54.487

拥有一个操作栏与拥有标签无关。操作栏是您的应用程序中的标准功能，它提供导航，但也只是让用户知道他在哪里以及他正在使用您的应用程序的锚点。

只要看起来合适，您就可以轻松地使用操作栏下的选项卡。

我建议您从阅读 Google[对此](http://developer.android.com/design/patterns/actionbar.html)页面的意见开始

看看每个[例子](https://play.google.com/store/apps/details?id=com.actionbarsherlock.sample.demos)

看看操作栏的可能性是什么。

# java - 在 2 个活动之间来回移动

> ID：14100321
> 
> 赞同：0
> 
> 时间：2012-12-31T10:17:49.970
> 
> 标签：java, android, android-activity

我有 2 个活动，A 和 B。主要活动是 A，但在 AI 的 OnCreate 方法上，我想移动到 B，这意味着。A 处于 onStop 状态，B 正在运行。在 BI 上有一个按钮，当我点击他时，会破坏活动（B）并返回到 A。

*   开始一个
*   移动到 B
*   毁灭B
*   回到A

-- 第四步（回到 A）必须在 OnClickListener 中完成。

我该如何实现？我无法访问 onRestart 方法，所以我应该以某种方式手动重新启动活动吗？如果是的话如何？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T10:19:43.223

`finish()`在`Button.onClickListener`ActivityB 中调用

调用`finish()`将销毁当前活动并返回上一个活动（此处为活动A）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T10:22:04.910

在活动 B 中，像这样编写您的按钮单击，

```
backBTN.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {

                finish();

            }
        }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T10:23:06.973

在 Activity B 的后退按钮点击监听器中，

```
 backButton.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                finish();
            }
        }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-31T10:36:12.893

> //先去活动然后结束
> 
> //ActivityA.class

```
 Intent intentB = new Intent(context, ActivityB.class);
    startActivity(intentB);
    finish(); 
```

> //也返回到activityb然后完成
> 
> //ActivityB.class

```
 Intent intentB = new Intent(context, ActivityA.class);
    startActivity(intentB);
    finish(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-31T10:48:49.610

活动1.类：

```
Intent intent=new Intent(Activity1.this,Activity2.class);

startActivity(intent); 
```

Activity2.class

```
b.setOnClickListener(new OnClickListener()

 {

 public void onClick(View v) 

{
                this.finish();

            }

        }
); 
```

# jquery - 使用 html 文本通过 jquery 写入 json 数据的示例

> ID：14100323
> 
> 赞同：6
> 
> 时间：2012-12-31T10:18:16.003
> 
> 标签：jquery, html, json

我是编程初学者，我希望有人给我一个例子来告诉我如何用文本编写`JSON`数据`HTML`

```
<!DOCTYPE html>
<html>
    <head>
        <script src="http://code.jquery.com/jquery-1.8.3.min.js"></script>
    </head>
    <body>
        <h1>antar<h2>
        <script>
            $.getJSON('http://api.wipmania.com/jsonp?callback=?', function (data) {
                document.open();    
                document.write('Latitude: ' + data.latitude + '\nLongitude: ' + data.longitude + '\nCountry: ' + data.address.country);
                document.close();
            });
        </script>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-31T10:31:37.877

您可以在 html 中添加如下内容：

```
 <h2 id='lat'></h2>
    <h2 id='long'></h2>
    <h2 id='country'></h2> 
```

然后将您的脚本重构为：

```
$(document).ready(function(){

$.getJSON('http://api.wipmania.com/jsonp?callback=?', function (data) {

  $("#lat").text(data.latitude);  
  $("#long").text(data.longitude);  
  $("#country").text(data.country);      

});
 }); 
```

[​这是一个你可以玩的工作示例](http://jsfiddle.net/65Cbh/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T10:22:00.200

使用 JSON.stringify 并将其注入到任何带有 div 的 DOM 元素示例中`mydiv`

```
var a = JSON.stringify(myJSON);

document.getElementById('mydiv').innerHTML(a); 
```

参考：

[https://github.com/douglascrockford/JSON-js](https://github.com/douglascrockford/JSON-js)

# asp.net-mvc-3 - ASP .Net MVC 中表单的迭代发布

> ID：14100327
> 
> 赞同：0
> 
> 时间：2012-12-31T10:19:12.443
> 
> 标签：asp.net-mvc-3

我有一种情况，我需要从我的“视图”多次发布表单，但只需单击提交按钮。

在视图模型中，我有一个“列表”以及其他字段。我想为模型的 list-type 属性中的每个不同值发布表单，并将每个响应的结果附加到 div。

假设我的模型是：

公共类 VMSendSMS { 公共字符串 GroupId { 获取；放; }，公共 IList 移动 { 获取；放; } }

现在，我想发布表单的次数与“IList Mobile”中的项目一样多。

我是这个领域的新手，所以如果有任何解决方案，请尽可能简单地回复。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-02T07:56:29.873

搜索

```
$.when.apply("").done() 
```

# c# - 无法从 GridView 中的 EditItemTemplate 访问控件

> ID：14100329
> 
> 赞同：1
> 
> 时间：2012-12-31T10:19:44.183
> 
> 标签：c#, asp.net, gridview, edititemtemplate

尝试更新我的 gridview 时找不到我想要的控件。控件是来自 EditItemTemplate 的文本框和下拉列表。但是，如果我尝试在 ItemTemplate 中找到一个标签，它就可以正常工作。问题似乎是它在我有机会获得控件之前“跳出”编辑模式。

我的网格视图的标记：

```
<asp:GridView ID="ProductGridView" runat="server" AllowPaging="True" AllowSorting="True"
    AutoGenerateColumns="False" DataKeyNames="Id" OnRowEditing="ProductGridView_RowEditing"
    OnRowCancelingEdit="ProductGridView_RowCancelingEdit" OnRowUpdating="ProductGridView_RowUpdating"
    OnRowDeleting="ProductGridView_RowDeleting" OnRowDataBound="ProductGridView_RowDataBound">
    <Columns>
        <asp:CommandField ShowDeleteButton="True" ShowEditButton="True" CausesValidation="false" />
        <asp:TemplateField HeaderText="Name" SortExpression="Name">
            <EditItemTemplate>
                <asp:TextBox ID="txtName" runat="server" Text='<%# Bind("Name") %>'></asp:TextBox>
            </EditItemTemplate>
            <ItemTemplate>
                <asp:Label ID="lblName" runat="server" Text='<%# Eval("Name") %>'></asp:Label>
            </ItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="Quantity" SortExpression="Quantity">
            <EditItemTemplate>
                <asp:TextBox ID="txtQuantity" runat="server" Text='<%# Bind("Quantity") %>'></asp:TextBox>
            </EditItemTemplate>
            <ItemTemplate>
                <asp:Label ID="lblQuantity" runat="server" Text='<%# Eval("Quantity") %>'></asp:Label>
            </ItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="Family" SortExpression="Family.Name">
            <EditItemTemplate>
                <asp:DropDownList ID="ddlFamily" runat="server" OnInit="ddlFamily_Init">
                </asp:DropDownList>
            </EditItemTemplate>
            <ItemTemplate>
                <asp:Label ID="lblFamily" runat="server" Text='<%# Eval("Family.Name") %>'></asp:Label>
            </ItemTemplate>
        </asp:TemplateField>
    </Columns>
</asp:GridView> 
```

这是我的 RowUpdating 方法的代码隐藏。如何从 EditItemTemplate 访问控件？我错过了一些非常简单的东西吗？

```
protected void ProductGridView_RowUpdating(object sender, GridViewUpdateEventArgs e)
    {            
        // Get the controls

        GridViewRow row = ProductGridView.Rows[e.RowIndex];
        Label lblName = (row.FindControl("lblName") as Label); // Returns this label, from the row being edited, just fine
        TextBox txtName = (row.FindControl("txtName") as TextBox); // null
        TextBox txtQuantity = (row.FindControl("txtQuantity") as TextBox); // null
        DropDownList ddlFamily = (row.FindControl("ddlFamily") as DropDownList); // null

        // More code to populate product etc.
    }

protected void ProductGridView_RowEditing(object sender, GridViewEditEventArgs e)
    {
        ProductGridView.EditIndex = e.NewEditIndex;
        BindGridView(_productRepo.GetAll());
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T10:26:40.197

```
protected void ProductGridView_RowUpdating(object sender, GridViewUpdateEventArgs e)
{            
    // Get the controls
    GridViewRow row = (GridViewRow)ProductGridView.Rows[e.RowIndex];
    TextBox tname = (TextBox)row.FindControl("txtName");

    // More code to populate product etc.
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T10:43:32.627

而不是命令字段，尝试使用like

```
 <asp:TemplateField HeaderText="Action" HeaderStyle-Width="20%" ItemStyle-HorizontalAlign="Center">
                <ItemTemplate>
                    <asp:LinkButton ID="LnkManageTitle" runat="server" Text="Manage Title" CommandName="Edit"></asp:LinkButton>
                </ItemTemplate>
                <EditItemTemplate>
                    <asp:LinkButton ID="LnkManageTitle" runat="server" Text="Save" CommandName="Update"></asp:LinkButton>
                </EditItemTemplate>
            </asp:TemplateField> 
```

休息似乎很好。

`OnRowUpdating="Gridview1_RowUpdating"`对于更新，在 html 页面和 CS 页面上调用声明一个事件。

```
Protected Void Gridview1_RowUpdating(object sender, GridViewUpdateEventArgs e)
{
} 
```

不要忘记`CommandName="Update"`致电`LinkButton`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-07-29T11:48:51.920

也许？

```
protected void ProductGridView_RowUpdating(object sender, GridViewUpdateEventArgs e){
            Label lblName = (Label)ProductGridView.Rows[e.RowIndex].FindControl("lblName");
            TextBox txtName = (TextBox)ProductGridView.Rows[e.RowIndex].FindControl("txtName"));
            TextBox txtQuantity = (TextBox)ProductGridView.Rows[e.RowIndex].FindControl("txtQuantity"); 
            DropDownList ddlFamily = (DropDownList)ProductGridView.Rows[e.RowIndex].FindControl("ddlFamily"); 
} 
```

# iphone - 搜索栏不返回搜索结果（NSpredicate）

> ID：14100331
> 
> 赞同：0
> 
> 时间：2012-12-31T10:19:51.993
> 
> 标签：iphone, objective-c, uitableview, uisearchbar

我按照这里的教程创建了一个搜索栏：http: [//www.appcoda.com/how-to-add-search-bar-uitableview/](http://www.appcoda.com/how-to-add-search-bar-uitableview/)

但是我的搜索结果没有返回任何内容。我能想到的唯一一件事`NSArray`是 不是可变的，但是当更改 resultPredicate 给我一个指针类型不兼容的错误时。

**。H**

```
@interface plistTableViewController : UITableViewController<UISearchBarDelegate, UITableViewDataSource, UITableViewDelegate>

{
    NSArray *tabledata;
    NSArray *searchResults;
}

@end 
```

**.m**

```
#import "plistTableViewController.h"
#import "DetailViewController.h"
@interface plistTableViewController ()

@end

@implementation plistTableViewController

- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{

    NSString *mylist = [[NSBundle mainBundle] pathForResource:@"lodges" ofType:@"plist"];
    tabledata = [[NSArray alloc]initWithContentsOfFile:mylist];
    NSLog(@"%@", tabledata);

    [super viewDidLoad];

   }

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{

    // Return the number of sections.
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{

    if (tableView == self.searchDisplayController.searchResultsTableView) {
        return [searchResults count];

    } else {
        return [tabledata count];

    }
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    static NSString *simpleTableIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:simpleTableIdentifier];

    if( cell == nil ) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:@"Cell"];
    }

    if (tableView == self.searchDisplayController.searchResultsTableView) {
        cell.textLabel.text = [searchResults objectAtIndex:indexPath.row];
        cell.detailTextLabel.text = [searchResults objectAtIndex:indexPath.row];
    } else {
        cell.textLabel.text = [[tabledata objectAtIndex:indexPath.row]objectForKey:@"cellName"];
        cell.detailTextLabel.text = [[tabledata objectAtIndex:indexPath.row]objectForKey:@"cellSubtitle"];
        cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
    }

    return cell;
}

// search bar code

- (void)filterContentForSearchText:(NSString*)searchText scope:(NSString*)scope
{
    NSPredicate *resultPredicate = [NSPredicate predicateWithFormat:@"SELF contains[cd] %@",searchText];

    searchResults = [tabledata filteredArrayUsingPredicate:resultPredicate];
}

-(BOOL)searchDisplayController:(UISearchDisplayController *)controller
shouldReloadTableForSearchString:(NSString *)searchString
{
    [self filterContentForSearchText:searchString
                               scope:[[self.searchDisplayController.searchBar scopeButtonTitles]
                                      objectAtIndex:[self.searchDisplayController.searchBar
                                                     selectedScopeButtonIndex]]];

    return YES;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (tableView == self.searchDisplayController.searchResultsTableView) {
        [self performSegueWithIdentifier: @"lodgedetail" sender: self];
    }
}

// end of searchbar code

-(void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{

    NSIndexPath *indexPath = [[self tableView] indexPathForSelectedRow];
    NSDictionary *contactInfo = tabledata[indexPath.row];
    DetailViewController *dvc = (DetailViewController *)[segue destinationViewController];
    dvc.contactInfo = contactInfo;

    if ([segue.identifier isEqualToString:@"lodgedetail"]) {
        DetailViewController *dvc = segue.destinationViewController;

        NSIndexPath *indexPath = nil;

        if ([self.searchDisplayController isActive]) {
            indexPath = [self.searchDisplayController.searchResultsTableView indexPathForSelectedRow];
            dvc.contactInfo = [searchResults objectAtIndex:indexPath.row];

        } else {
            indexPath = [self.tableView indexPathForSelectedRow];
            dvc.contactInfo = [tabledata objectAtIndex:indexPath.row];
        }
    }

}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T11:24:19.777

然后，假设如果您基于 搜索`cellName`，那么您`NSPredicate`应该是这样的：

```
[searchResults removeAllObjects];

NSPredicate *resultPredicate = [NSPredicate predicateWithFormat:@"cellName contains[cd] %@",searchText];

[searchResults addObjectsFromArray:[tabledata filteredArrayUsingPredicate:resultPredicate]]; 
```

试试这个，你的问题就解决了……

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T18:04:22.173

它需要有单引号，`%@`否则您将基于对象而不是字符串进行比较。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T01:38:07.557

```
// searchbar code

- (void)filterContentForSearchText:(NSString*)searchText scope:(NSString*)scope
{
    NSPredicate *resultPredicate = [NSPredicate predicateWithFormat:[NSString stringWithFormat:@"cellName contains[cd] '%@'",searchText]];
    NSLog(@"%@", self.tabledata);

    self.searchResults = [NSMutableArray arrayWithArray:[self.tabledata filteredArrayUsingPredicate:resultPredicate]];
}

-(BOOL)searchDisplayController:(UISearchDisplayController *)controller
shouldReloadTableForSearchString:(NSString *)searchString
{
    [self filterContentForSearchText:searchString
                               scope:[[self.searchDisplayController.searchBar scopeButtonTitles]
                                      objectAtIndex:[self.searchDisplayController.searchBar
                                                     selectedScopeButtonIndex]]];

    return YES;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (tableView == self.searchDisplayController.searchResultsTableView) {
        [self performSegueWithIdentifier: @"lodgedetail" sender: self];
    }
}

// end of searchbar code

-(void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{

    NSIndexPath *indexPath = [[self tableView] indexPathForSelectedRow];
    NSDictionary *contactInfo = tabledata[indexPath.row];
    DetailViewController *dvc = (DetailViewController *)[segue destinationViewController];
    dvc.contactInfo = contactInfo;

    if ([segue.identifier isEqualToString:@"lodgedetail"]) {
        DetailViewController *dvc = segue.destinationViewController;

        NSIndexPath *indexPath = nil;

        if ([self.searchDisplayController isActive]) {
            indexPath = [self.searchDisplayController.searchResultsTableView indexPathForSelectedRow];
            dvc.contactInfo = [searchResults objectAtIndex:indexPath.row];

        } else {
            indexPath = [self.tableView indexPathForSelectedRow];
            dvc.contactInfo = [tabledata objectAtIndex:indexPath.row];
        }
    }

}

@end 
```

# linux - 如何计算从特定主机收到的数据包数？

> ID：14100336
> 
> 赞同：1
> 
> 时间：2012-12-31T10:20:56.100
> 
> 标签：linux, iptables, tcpdump

我想检查哪个主机向我的服务器发送的流量最多。我怎样才能得到这样的东西：

```
172 192.168.1.1
19  192.168.1.56 
```

这意味着在特定时间间隔内，我的服务器收到了 172 个数据包`192.168.1.1`和 19 个数据包`192.168.1.56`。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-06-28T12:54:32.373

您可以尝试为此使用 tcpdump：

```
#!/bin/sh

while [ 1 ]
do
  timeout -t 5 tcpdump -n -i eth0 "tcp port 22" 2> /dev/null > /tmp/capture.txt
  echo
  date
  cat /tmp/capture.txt | grep -oE "((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)[.]){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)" | sort | uniq -c
done 
```

它将通过从`tcpdump`.

使用`pcap`过滤器，您可以轻松限制所需的流量。在示例脚本`"tcp port 22"`中，将流量限制为 SSH。

示例输出：

```
Fri Jun 28 16:05:10 UTC 2019
     53 10.0.0.2
     53 10.0.0.99

Fri Jun 28 16:05:16 UTC 2019
     37 10.0.0.2
     37 10.0.0.99

Fri Jun 28 16:05:21 UTC 2019

Fri Jun 28 16:05:26 UTC 2019
      5 10.0.0.2
      5 10.0.0.99 
```

由于 tcpdump 并非一直在运行，因此有时可能会丢失一些数据包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T11:35:02.093

我相信你可以使用这个： http: [//www.catonmat.net/blog/traffic-accounting-with-iptables/](http://www.catonmat.net/blog/traffic-accounting-with-iptables/)

您只需稍微编辑 awk 脚本即可打印数据包数而不是字节数 [如果这很关键，则打印第二个而不是第一个 IP 地址]。

# wordpress - 检测到 iphone 或 ipad 时如何激活 wordpress 主题

> ID：14100338
> 
> 赞同：0
> 
> 时间：2012-12-31T10:21:17.030
> 
> 标签：wordpress

我想在检测到 iPhone 或 iPad 时激活/切换 wordpress 主题.. 我已经有正在运行的移动主题`Tablet (galaxy nexus)`，`Apple iPod`但是失败了`iPhone`，`iPad`所以我需要切换主题。

我正在使用此代码。但是检测到 iPhone/iPad 后不知道该写什么

```
add_filter('browser_detect_function','browser_detect');
    function browser_detect(){
        //setting the variables
            $ipod = stripos($_SERVER['HTTP_USER_AGENT'],"iPod");
            $iphone = stripos($_SERVER['HTTP_USER_AGENT'],"iPhone");

            //detecting device
            if ($ipod == true || $iphone == true){
                //does'nt know what to write here. means which funciton         
            }   
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T10:46:51.273

试试[WPTouch](http://wordpress.org/extend/plugins/wptouch/)插件。它会自动检测用户的设备。否则检查这个[链接](http://www.1stwebdesigner.com/css/quick-wordpress-theme-switcher-plugin/)是否有帮助。

# jquery - jQuery 可排序表行 - 排序后行改变高度

> ID：14100340
> 
> 赞同：0
> 
> 时间：2012-12-31T10:21:25.057
> 
> 标签：jquery, jquery-ui, html-table, jquery-ui-sortable

我正在尝试在表格上使用可排序的 jQuery UI，但遇到了问题。一旦我放下一行，高度就不完全是以前的了。它变得更小，并且由于某种原因行不会用完整个表。

我能做些什么来防止这种情况发生？当表中只有 2 行时它非常明显，但当有很多行可用时几乎看不到，我仍然希望对此进行控制。

**编辑：**

这是关于可排序表中发生的事情，而不是结果表。

显然这个问题只出现在 webkit 中，而不会出现在 Mozilla 或 IE 中。

**演示：**

[http://jsbin.com/ucopun/66/edit](http://jsbin.com/ucopun/66/edit)

**这是我的js代码：**

```
$(document).ready(function() {
    //sort
    $("#myTable").on('click', '.up, .down', function(event) {
        var row = $(this).closest("tr");
        if ($(this).is(".up")) {
            row.insertBefore(row.prev());
        } else {
            row.insertAfter(row.next());
        }
        row.fadeOut();
        row.fadeIn();
    });
    //fix dd width of rows
    $(function() {
        var fixHelper = function(e, ui) {
            ui.children().each(function() {
                $(this).width($(this).width());
            });
            return ui;
        };

        $("#myTable tbody").sortable({
            helper: fixHelper
        });
        $("#myTable tbody").disableSelection();
    });

    //buttons  
    var savebtn = "<div class=\"save\">Save</div>";

    var editbtn = "<div class=\"edit\">Edit</div>";

    var removebtn = "<div class=\"remove\">Remove</div>";

    var upbtn = "<a class=\"up\">up</a><a class=\"down\">down</a>";

    $("#target").click(function() {
        //add  
        var speise = $(".addnew").val();
        var beschr = $(".addnew2").val();
        $('#myTable tr:last').after('<tr class="frst"><td class="content"><span class="speise">' + speise + '</span><span class="beschr">' + beschr + '</span></td><td class="btns">' + removebtn + '</td><td class="btns">' + editbtn + upbtn + '</td></tr>');
    });
    $("#myTable").on('click', '.remove', function(event) {
        $(this).parent().parent().remove();
    });

    //edit
    $("#myTable").on('click', '.edit', function(event) {
        var speise = $(this).closest("tr").find(".speise").text();
        var beschr = $(this).closest("tr").find(".beschr").text();
        $(this).closest("tr").find(".content").html('<input class="sp" value="' + speise + '"/><br><input class="be" value="' + beschr + '"/>');

        $(this).parent().html(savebtn);

    });

    //save
    $("#myTable").on('click', '.save', function(event) {
        var speise = $(this).closest("tr").find(".sp").val();
        var beschr = $(this).closest("tr").find(".be").val();
        $(this).closest("tr").find(".content").html('<span class="speise">' + speise + '</span><span class="beschr">' + beschr + '</span>');

        $(this).parent().html(editbtn);

    });
    //result
});

$("button").click(function() {
    var data = "";
    $("#myTable tr td:first-child").each(function() {
        data += "<tr><td>" + $(this).text() + "</td></tr>";
    });
    $(".result").html(data);
}); 
```

**HTML**

```
<!DOCTYPE html>
<html>
<head>
<link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1/themes/base/jquery-ui.css" rel="stylesheet" type="text/css" />
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1/jquery-ui.min.js"></script>
<meta charset=utf-8 />
<title>JS Bin</title>
</head>
<body>

<table id="myTable">
  <tr>
    <td class="content">
      <span class="speise">SPEISE</span>
      <span class="beschr">BESCHREIBUNG</span>
    </td>
    <td class="btns">
      <div class="remove">REMOVE</div></td>
    <td class="btns">
      <div class="edit">edit</div>
      <a class="up">up</a>
    <a class="down">down</a>
    </td>

  </tr>
    <tr>
    <td class="content">
            <span class="speise">SPEISE</span>
      <span class="beschr">BESCHREIBUNG2</span>

      </td>
    <td class="btns">
      <div class="remove">REMOVE</div></td>
          <td class="btns">
      <div class="edit">edit</div>

     <a class="up">up</a>
    <a class="down">down</a>
      </td>

  </tr>

</table>
  Speise<br>
  <input class="addnew" type="text" id="name" />
  <br>Beschreibung <br>
  <input class="addnew2" type="text" id="name" />
<div id="target">Add</div>
<div id="target2">Add2</div>
  <button>Result me</button>
  <div><table class="result"></table></div>
  <div class="test"></div>
</body>
</html> 
```

**CSS**

```
table {
    border:solid black 1px;
    height:200px;
}
td {
  border:solid 1px red;
}
#target {
    width:50px;
    border:solid red 2px;
}
.remove {
  color:red;
    font-wieght:bold;
}
.result {
  border:solid red 2px;
}

td span, a {
  display:block;
}
a {cursor:pointer;}
tr {
  cursor:move;
}
.btns {
  cursor:auto;
} 
```

此外，如果有一种简单的方法可以在没有 jQuery UI 但仅使用 jQuery 的情况下进行拖放排序，我会很感激一个链接，因为我觉得这个问题，还有许多其他问题是由 jQuery UI 创建的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T10:51:26.857

为您的表格 tr 使用固定高度：

```
#myTable tr{height:100px} 
```

[看演示](http://jsbin.com/ucopun/70/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T11:11:56.870

`height:200px;`从中删除`table`，它会好的。

要获得具有相同高度的结果表，请执行以下操作：

```
$("button").click(function() {
    var data = "";
    $("#myTable tr td:first-child").each(function(){
        data+= '<tr style="height:' + $("#myTable tr").height() + '"><td>' + $(this).text() + '</td></tr>';
    });
    $(".result").html(data);
}); 
```

结果比你有相同的高度..

在你的 jsbin 上播放：http: [//jsbin.com/ucopun/73/edit](http://jsbin.com/ucopun/73/edit)

# regex - 匹配号码的正则表达式

> ID：14100341
> 
> 赞同：1
> 
> 时间：2012-12-31T10:21:32.513
> 
> 标签：regex, linux, unix, sed, awk

我有文件调用 phonenum.txt ，其中包含已通过 procmail 配方从文件中过滤的电话号码列表：

```
60123456098,60135673434,60149023459,60123456334 
```

根据此文件，需要满足两个条件才能获得其输出。

1.  输出必须通过数字 60（它的国家代码，所以它是我可以在所有数字之间使用的唯一常量）和这些数字前面的“，”符号来区分。例如：**60135673434** ..
2.  如果号码 60 在电话号码中间怎么办？例如：**60123456098**如何获得整数的输出？

无论如何，我可以通过在 awk 或 sed 中使用匹配正则表达式来获取电话号码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T10:28:52.087

```
awk -F, '{for(i=1;i<=NF;i++)if($i~/^60/){print "phone number is ",substr($i,3)}}' your_file 
```

Tested Below:

```
> cat temp
60123456098,60135673434,60149023459,60123456334,90123456789
> nawk -F, '{for(i=1;i<=NF;i++)if($i~/^60/){print "phone number is ",substr($i,3)}}' temp
phone number is  123456098
phone number is  135673434
phone number is  149023459
phone number is  123456334
> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T13:28:16.630

你可以做

```
awk -v RS="," '{gsub(/^60/,"")} 1' file 
```

如果你想要回一行

```
awk -v RS="," '{gsub(/^60/,"")} {printf s $0; s=","}' file 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T13:47:02.750

`sed`使用 using进行全局替换怎么样`(^|,)60`：

```
$ sed -r 's/(^|,)60/\1/g' <<< 60123456098,60135673434,60149023459,60123456334 
123456098,135673434,149023459,123456334 
```

正则说明：

```
s/          # Substitution 
(^|,)       # Match start of the line or comma (captured)
60          # Followed by the literal 60 
/           # Replace with
\1          # Captured group (put back the comma) 
/g          # Global flag 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-31T14:54:49.877

```
$ grep -oP '(?<=\b60)\d+' <<< "60123456098,60135673434,60149023459,60123456334"
123456098
135673434
149023459
123456334 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-02T18:51:00.170

这可能对您有用（GNU sed）：

```
sed 's/^60//;s/,60/\n/g;P;D' file 
```

# javascript - 为什么即使没有执行块，变量也会初始化为未定义？

> ID：14100346
> 
> 赞同：0
> 
> 时间：2012-12-31T10:22:04.767
> 
> 标签：javascript

> **可能重复：**
> [JavaScript 变量范围](https://stackoverflow.com/questions/500431/javascript-variable-scope)

```
var flag = false;
if(flag === true)
{
     var you = "great";
} 
```

变量“you”用未定义初始化，打印时显示未定义而不是显示参考错误。为什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-31T10:23:46.910

在 Javascript 中，所有变量都被“提升”到声明它们的函数/作用域的顶部。也就是说，您的代码在编译器看来真的像这样：

```
var flag = false;
var you;
if (flag === true)
{
    you = "great"
} 
```

# c# - 分针动画

> ID：14100360
> 
> 赞同：0
> 
> 时间：2012-12-31T10:23:06.090
> 
> 标签：c#, xaml, windows-8, windows-runtime, winrt-xaml

我正在为 Windows 8 实现一个模拟时钟。但是我正在努力获得完美的分针动画。

当秒针到达 12 时，分针应该“滑”6 度到下一个数字，而不是突然出现在下一个数字上。这是正在使用的代码

XAML 中的动画

```
<converter:ThemeTimeConverter
    x:Key="minuteHandTransform"
    Component="MinuteHandFromAngle" />

<converter:ThemeTimeConverter
    x:Key="minuteHandToTransform"
    Component="MinuteHandToAngle" />

<!-- Minute Hand -->
                <Image
                    Source="{Binding Time, Converter={StaticResource MinHandBackground}}"
                    HorizontalAlignment="Left"                        
                    VerticalAlignment="Top"                        
                    Canvas.Left="118"
                    Canvas.Top="118">
                    <Image.RenderTransform>
                        <TransformGroup>
                            <TranslateTransform
                                X="-11"
                                Y="-90" />

                            <RotateTransform
                                x:Name="minHandTransform" />
                        </TransformGroup>
                    </Image.RenderTransform>
                    <Image.Triggers>
                        <EventTrigger
                            RoutedEvent="Image.Loaded">
                            <BeginStoryboard>
                                <Storyboard
                                    x:Name="myStoryboard2">
                                    <DoubleAnimation
                                        x:Name="minuteAnimation"
                                        Storyboard.TargetName="minHandTransform"
                                        Storyboard.TargetProperty="Angle"
                                        Duration="0:0:1"
                                        From="{Binding Time, Converter={StaticResource minuteHandTransform}}"
                                        To="{Binding Time, Converter={StaticResource minuteHandToTransform}}"
                                        RepeatBehavior="forever">
                                        <DoubleAnimation.EasingFunction>
                                            <SineEase
                                                EasingMode="EaseOut" />
                                        </DoubleAnimation.EasingFunction>
                                    </DoubleAnimation>
                                </Storyboard>
                            </BeginStoryboard>
                        </EventTrigger>
                    </Image.Triggers>
                </Image> 
```

这些是转换器用于确定动画的起点和终点

```
case ThemeComponents.MinuteHandFromAngle:
                {
                    double minangle = (((float)dt.Minute) / 60) * 360;
                    _RotateTransform.Angle = minangle;

                    return _RotateTransform.Angle;
                }
            case ThemeComponents.MinuteHandToAngle:
                {
                    double minangle = (((float)dt.Minute) / 60) * 360;

                    if (((float)dt.Second) == 59)
                    {
                        _RotateTransform.Angle = minangle + 6;
                    }
                    else
                    {
                        _RotateTransform.Angle = minangle;
                    }

                    return _RotateTransform.Angle;
                } 
```

使用此代码，分针滑动到下一个数字，然后弹回前一个数字，然后再次弹回下一个数字。我只想让它滑到下一个数字。

如果您有任何想法或建议，请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T16:06:18.130

我不确定我是否理解为什么您的动画将 RepeatBehavior 设置为 Forever。那只会在两个值之间保持动画。在大多数情况下，您也不应该需要 From 值，除非您的最后一个动画在 360 度处停止并且您想再次从 0 动画到 6。时间线的默认[FillBehavior](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.media.animation.timeline.fillbehavior.aspx)是在动画超过其持续时间时保持 To 值。在某些情况下，最好处理 Storyboard 的[Completed](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.media.animation.timeline.completed.aspx)事件，并将动画目标的属性显式设置为其 To 值，以避免这些抖动。您也可以这样做并在该点设置下一个动画。

顺便说一句，我还会检查 BounceEase 而不是 SineEase 的缓动功能。

# c++ - 如何避免链接器错误

> ID：14100368
> 
> 赞同：0
> 
> 时间：2012-12-31T10:24:00.590
> 
> 标签：c++, namespaces, linker-errors

General.h 内部

```
#ifndef GENERAL
#define GENERAL
namespace counternamespace{
    int upperbound;
    int lowerbound;
}
#endif 
```

Analyzer.h 内部

```
#ifndef ANALYZER
#define ANALYZER
#include"General.h"

class Analyzer
{
public :
     int var ;
     int func();
};
#endif 
```

内部测试.h

```
#ifndef TEST
#define TEST
#include"Analyzer.h" //Error
class Test2
{
public:
    Test2(void);

public:
    ~Test2(void);
};
#endif 
```

在上面的代码中，当我没有在里面添加分析器时，`Test.h`一切正常。但添加后显示以下链接器错误。

```
1>Test2.obj : error LNK2005: "int counternamespace::lowerbound" (?lowerbound@counternamespace@@3HA) already defined in Analyzer.obj
2>Test2.obj : error LNK2005: "int counternamespace::upperbound" (?upperbound@counternamespace@@3HA) already defined in Analyzer.obj 
```

我添加了`#ifndef`/ `#endif`。那我在哪里做错了？谁能告诉我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T10:38:00.287

是的，阿洛克是对的。您大概有 Analyser.cpp 和 Test2.cpp，它们都是不同的编译单元。你打电话时

```
g++ Analyser.cpp Test2.cpp 
```

编译器实际上分别制作了 Analyser.obj 和 Test2.obj 并将它们链接在一起。当编译器尝试将 Analyser.obj 和 Test2.obj 链接在一起时，它会意识到 Test2.obj 中的两个变量也存在于 Analyser.obj 中。

您的`#define`指令不起作用，因为它们仅存在于单个编译单元中，因此 General.h 包含*在*Analyser.obj 和 Test2.obj 中。

为避免此类重复，[解决方案是使用函数将命名空间变量包装起来](https://stackoverflow.com/a/13893423/1031191)。它是这样的：

General.h 内部

```
#ifndef GENERAL
#define GENERAL
namespace counternamespace{
    int& upperbound();
    int& lowerbound();
}
#endif 
```

在General.cpp里面

```
#include "General.h"
namespace counternamespace{
  int& upperbound(){static int local; return local;}
  int& lowerbound(){static int local; return local;}
} 
```

所以你现在可以说

```
counternamespace::upperbound()=3;
counternamespace::lowerbound()=1; 
```

它的意思和你说的一样

```
counternamespace::upperbound = 3;
counternamespace::lowerbound = 1; 
```

别担心，编译器会优化掉函数调用，所以也没有开销。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T10:27:03.943

您不应在头文件中定义任何变量。
当您将头文件包含在其他文件中时，会在每个翻译单元中创建变量的副本，从而违反了**一个定义规则**并导致链接错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-01T17:49:57.307

```
Inside General.h

#ifndef GENERAL
#define GENERAL
namespace counternamespace{
    extern int upperbound;
    extern int lowerbound;
}
#endif

Inside General.cpp

#include"General.h"
using namespace counternamespace ;
int counternamepace::upperbound = 12;
int counternamepace::lowerbound = 12; 
```

然后做任何需要的事情。

# delphi - Delphi DBLookupCombo 总是重叠的模态对话框

> ID：14100369
> 
> 赞同：0
> 
> 时间：2012-12-31T10:24:09.197
> 
> 标签：delphi, user-interface, combobox, delphi-xe2

我正在使用 Delphi XE2，我遇到了一个问题，即从 DBLookupCombo 框中选择一个选项后，将显示一个模式对话框。

但是出现了一个问题，即当显示模态对话框时，LookupCombo 将保留在模态对话框的顶部。

这只是一个小问题，但它让我发疯。以编程方式对组合使用“SendToBack”无效。

关于这个问题，我还能做些什么吗？

代码片段：

```
 else if (getUserName  <> cboUserName.Text) and (userHasPerm2 = 1) then
   begin

    ValidUser := false;
    frmValidateUser := TfrmValidateUser.Create(self);
    frmValidateUser.txtUsername.ReadOnly := true;
    frmValidateUser.txtUsername.enabled := false;
    frmValidateUser.FormStyle := fsStayOnTop;
    cboUsername.SendToBack;
    frmValidateUser.ShowModal; 
```

因此，如果选择的用户不是登录用户并且没有适当的权限，则 ValidateUser 表单将以模态方式显示。如您所见，我尝试将 from 样式设置为“保持领先”，并将组合框设置为“sendtoback”，但没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T11:17:34.593

弹出窗口（下拉矩形）的行为是这样的。将组合框发送到后面没有帮助，因为模式对话框不知道这一点。

您可以尝试将 设置`frmValidateUser.FormStyle`为`fsStayOnTop`。如果这没有帮助，那么您必须告诉 Windows 将对话框设置在**最**顶部：

```
SetWindowPos(frmValidateUser.Handle, HWND_TOPMOST, 0,0,0,0, SWP_NOMOVE+SWP_NOSIZE); 
```

但老实说，这不是一个好的解决方案。此对话框还将隐藏可能从其他应用程序甚至 Windows 本身弹出的任何其他最顶层消息。

为什么不尝试在下拉菜单消失后让对话框弹出？

更新：我试图通过创建一个只有一个组合框的简单表单来复制这个问题。在组合框的 OnSelect-Event 中，我只需创建一个相同表单的新实例，并使其出现在与组合框相同的坐标处；

```
procedure TForm1.ComboBoxSelect(Sender: TObject);
Var
  f : TForm1;
  p : TPoint;
begin
  f := TForm1.Create(nil);
  p := ComboBox.ClientToScreen(point(0,0));
  f.Left := p.x;
  f.Top := p.y;
  f.ShowModal;
end; 
```

（请原谅愚蠢的变量名称，但对于像这样的简单测试，我认为没问题）。

该应用程序按预期工作。选择条目后，下拉列表消失并显示新表单。

# java - 在 Eclipse 中安装新的 JRE 后，我所有的 java 项目都出现错误

> ID：14100370
> 
> 赞同：8
> 
> 时间：2012-12-31T10:24:12.923
> 
> 标签：java, eclipse

我安装了旧版本的 JRE，我的所有项目都开始出现编译器错误。（项目的Build Path上有一个交叉和（未绑定）消息）当我检查时，他们仍然在路径中看到卸载的JRE。我做了其中的一些并一一更改，但是没有一种快速的方法可以一次将新的 JRE 添加到我当前的所有项目中吗？我有将近 80 个项目，一个一个地制作它们很耗时。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T10:31:45.770

右键单击任何项​​目->属性-> java构建路径->

```
 1)mark the JRE version in order and support 

      2)Add JRE system library in libraries. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T21:06:49.020

您的项目可能会在首选项中使用其名称来引用其 JRE。进入您已安装的 JRE 首选项页面，并确保实际存在的新的正确 JRE 与已卸载的旧 JRE 具有相同的“名称”。将来，使用执行环境设置项目的 JRE（从库选项卡编辑该条目）。 ![项目的 Java 构建路径属性页面](../Images/46912c134ff50b90c03b797428d94c6f.png) ![在此处输入图像描述](../Images/646ef42290ab5a6f2fbbfc9231512f20.png)

要快速修复所有项目，请打开已修复项目和损坏项目的项目 .classpath 文件，然后使用“搜索”菜单开始大量查找/替换所有 .classpath 文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T10:33:40.797

这将通过正确使用 IDE 来完成。您的项目必须设置为使用工作区运行时，在这种情况下，在工作区中设置新的默认运行时会将其换出到所有项目中。但是您可能必须先运行“更新项目配置”，我不确定。

另一种方法是做我所做的，那就是使用 Maven；然后你从你的 pom 中控制一切，而不是 Eclipse 配置，加上这些设置在不使用 Eclipse 时仍然适用。无需先启动 IDE 即可构建二进制文件，或者将其全部集成到构建服务器/持续集成环境中，这非常有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-31T10:34:29.443

可能这个页面应该可以解决您的问题。

[帮助 Eclipse 平台](http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.jdt.doc.user%2Ftasks%2Ftask-assign_default_jre.htm)

# c++ - Microsoft语言环境如何获取小数点后的数字？

> ID：14100375
> 
> 赞同：0
> 
> 时间：2012-12-31T10:24:53.877
> 
> 标签：c++, localization

在我想知道的 Windows 上，使用 C++ 的小数点后会有多少位数。我在 windows 中使用了 locale.h 标头，有 struct lconv ，它提供了很多关于语言环境设置的信息，但它只给出了货币（金钱）数量的小数点后的位数，但我必须获取语言环境设置正常值。请帮帮我，我怎样才能得到小数点后的小数位数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T11:35:25.823

数字中十进制字符的数量与语言环境无关。`std::ostream`您可以使用调整 a 显示的小数位数[`std::setprecision`](http://en.cppreference.com/w/cpp/io/manip/setprecision)。见那里的例子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T12:29:08.660

我第一次看错了这个问题。我的错。这是修改后的答案。

这不是“C++”的答案，但既然你说的是“在 Windows 上”，我会告诉你如何用 Win32 完成它。

[GetLocalInfoEx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd318103%28v=vs.85%29.aspx) (lcid, [LOCALE_IDIGITS](http://msdn.microsoft.com/en-us/library/windows/desktop/dd373767%28v=vs.85%29.aspx) , ...) 获取小数点后的位数。

```
#include <Windows.h>
#include <Winnls.h>
#include <stdio.h>

int GetNumberOfDigitsForDecimal()
{
    const int stringsize = 2; // docs for LOCALE_IDIGITS says this won't be more than 2 including the null char

    wchar_t value[stringsize] = {};
    GetLocaleInfoEx(LOCALE_NAME_USER_DEFAULT, LOCALE_NOUSEROVERRIDE|LOCALE_IDIGITS, value, stringsize);
    return _wtoi(value);
} 
```

您没有建议如何获取语言环境（lcid）值，所以我假设当前登录的用户。请注意，在 Windows 上，用户可以转到控制面板并更改他的时间、数字和日期格式说明符。（控制面板->区域->其他设置）。如果您想尊重他的设置而不是该语言的默认设置，您可以删除上面的 LOCALE_NOUSEROVERRIDE 标志。

如果您需要支持 Windows XP，请使用[GetLocaleInfo](http://msdn.microsoft.com/en-us/library/windows/desktop/dd318101%28v=vs.85%29.aspx)而不是 GetLocaleInfoEx

# android - BroadcastReceiver 自动启动启用

> ID：14100376
> 
> 赞同：0
> 
> 时间：2012-12-31T10:25:01.427
> 
> 标签：android

我编写了一个扩展 BroadcastReceiver 的类 Autostart。这从每次重新启动android时开始。在这个类中有一些意图和警报管理器。一切运行完美。现在我添加了“首选项”来启用/禁用这个类。问题是：当我禁用这个类（使用 IF/ELSE），然后启用它时，我必须重新启动移动设备。

**如何解决这个问题？**

```
public void onReceive(Context context, Intent intent) {

Calendar cal1 = Calendar.getInstance();
[...]

Intent intent2 = new Intent(context, AlarmReceiver.class);
[...]

AlarmManager alarmManager = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);
[...] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T12:35:03.190

> 问题是：当我禁用这个类（使用 IF/ELSE），然后启用它时，我必须重新启动移动设备。

将您在启动时执行的代码移动到某处的静态方法中。`BroadcastReceiver`从启动时和“启用此逻辑”代码路径都调用该代码。

# objective-c - 注释中的objective c mapkit单击按钮

> ID：14100377
> 
> 赞同：1
> 
> 时间：2012-12-31T10:25:03.747
> 
> 标签：objective-c, annotations, mapkit

嗨，我的应用中有一个地图视图页面，其中显示了 200 多个标记。

我目前发起这些

```
MapViewAnnotation *newAnnotation = [[MapViewAnnotation alloc] initWithTitle:currentobjectarray.title andCoordinate:location]; 
```

单击标记时，这些会生成一个文本标签。如何将按钮添加到注释视图，以便在单击它时可以导航到所选标记的“更多信息”页面？我不确定它的按钮部分。

非常感谢任何帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T12:34:16.667

您需要创建一个`UIButton`并将其分配给`rightCalloutAccessoryView`您的 MKAnnotationView 的属性。

在`mapView:viewForAnnotation:`返回自定义`MKAnnotationView`实例的方法中，插入此代码以创建按钮并将其与操作相关联。

我假设您的`MKAnnotationView`实例被调用`annotationView`并且您要调用的方法是`presentMoreInfo`.

```
UIButton * disclosureButton = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
[disclosureButton addTarget:self
                     action:@selector(presentMoreInfo)
           forControlEvents:UIControlEventTouchUpInside];
annotationView.rightCalloutAccessoryView = disclosureButton; 
```

你的`presentMoreInfo`方法可以是

```
- (void)presentMoreInfo {
    DetailsViewController * detailsVC = [DetailsViewController new];

    //configure your view controller
    //...

    [self.navigationController pushViewController:detailsVC animated:YES];
} 
```

# matlab - 如何在不留任何边距的情况下将图像转换为 EPS 文件？

> ID：14100382
> 
> 赞同：3
> 
> 时间：2012-12-31T10:25:50.667
> 
> 标签：matlab, eps

我正在使用以下脚本将图像转换为 EPS 文件。

```
%% Image 2 eps file.
% - img: the image.
% - eps: eps filename.
function Image2Eps(img, eps)
    imshow(img,'border','tight','InitialMagnification',100);
    print(gcf,'-depsc',eps);
end 
```

生成的文件几乎将图像紧紧地结合在一起。但是在顶部和右侧总是会留下一个小的边距。如何使 EPS 文件与位图图像的大小完全一致？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T06:59:58.520

如果你不是太锁定 Matlab。您可以使用[Image Magick](http://www.imagemagick.org/script/index.php)进行转换。我在命令行中使用它：

```
imgtops2.exe imge.ppm -e -c 0,0 -o image.eps 
```

我在 Windows 机器上使用它，但我相信他们也有适用于其他操作系统的二进制文件。

此外，一旦你有一个可用的命令行，`dos`或者`shell`你可以从 Matlab 中使用[`system`](http://www.mathworks.com/help/matlab/ref/system.html)、[`dos`](http://www.mathworks.com/help/matlab/ref/dos.html)或[`unix`](http://www.mathworks.com/help/matlab/ref/unix.html)命令调用它。

PS。

我使用了旧版本的 ImageMagick，在最近的版本中它们可能已更改`imgtops2`为`convert`，您必须查看他们的文档。

# jquery-tools - Jquery tools overlay , i can not close page with javascript

> ID：14100384
> 
> 赞同：0
> 
> 时间：2012-12-31T10:25:56.157
> 
> 标签：jquery-tools

I use this code ... [http://jquerytools.org/demos/overlay/external.html](http://jquerytools.org/demos/overlay/external.html)

But I can not close page with ajax code. When I click "X" image page is closed, but I want to make this action with javascript.

I try to close page external-content.htm in external-content.htm.

`$(".contentWrap").hide("slow")` code is close page content, but it not close all page .

# haskell - 从 Haskell 中的 [String] 列表创建新列表

> ID：14100387
> 
> 赞同：0
> 
> 时间：2012-12-31T10:26:21.617
> 
> 标签：haskell

假设我有一个这样的列表

```
let a =[["Warning:","Route","1543","must","Stop","on","Link","11881"],["Warning:","Route","1578","must","Stop","on","Link","12171"]] 
```

我想提取其中每个列表的第三个元素，即我想得到结果为`["1543","1578"]`

我编写了以下代码来获取它，但它不起作用：

```
foldr (\acc x -> (x !! 2):acc) [] a 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T16:36:10.290

[这是一种使用列表理解](http://learnyouahaskell.com/starting-out#im-a-list-comprehension)和[模式匹配](http://learnyouahaskell.com/syntax-in-functions#pattern-matching)来做你想做的事情的安全方法

```
let a' = [x | (_:(_:(x:_))) <- a] 
```

这将遍历 list `a`，查看所有长度至少为 的子列表`3`，并返回每个此类子列表的第三个元素。

此解决方案将默默地忽略长度小于的子列表`3`。为了解决这个问题并获得一些灵活性，您可以编写一个`Maybe`在其返回类型中使用的函数；如果列表有第三个元素，则返回`Just`第三个元素，否则返回`Nothing`.

```
takeThird :: [a] -> Maybe a
takeThird (_:(_:(x:_))) = Just x
takeThird _             = Nothing 
```

然后，您可以使用列表推导编写安全版本的操作：

```
let safea = [takeThird x | x <- a] 
```

从中您可以创建一个可能会删除元素的版本：

```
let maybedropa = [x | Just x <- safea] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T22:23:39.053

使用最近的[镜头](http://hackage.haskell.org/package/lens)库 (Control.lens) 的替代解决方案是：

```
import Control.Lens
>a^..traverse.(element 2)
["1543","1578"] 
```

不使用中缀表示法：

```
>toListOf (traverse.(element 2)) a
["1543","1578"] 
```

'traverse' 访问可遍历的每个元素，在本例中为列表，并且 (element 2) 获取索引为 2 的元素，toListOf 将其全部收集到一个列表中。这种方法的优点是，如果以后决定使您的数据结构复杂化，您只需要编写自己的镜头接口（如果它还没有的话）。

假设你有 [[(Annotation, String)]] 而不是 [[String]] 并且你只想要上面的 String 部分。那么你需要做的就是 _2 元组访问器。

```
a^..traverse.(element 2)._2 
```

# sql - Remove a random expression from column

> ID：14100392
> 
> 赞同：-2
> 
> 时间：2012-12-31T10:27:01.840
> 
> 标签：sql, oracle, select, substr

> **Possible Duplicate:**
> [Remove a random expression from string](https://stackoverflow.com/questions/14100168/remove-a-random-expression-from-string)

I have a column which contains values like this

```
 "000003023_AggregateStopLossLimit_W x3A 973911_2012-12-22.PDF"; 
```

I want to create a substring which doesn't have the part `x3A 973911` in it.

Whic means I want something like this,

```
000003023_AggregateStopLossLimit_W_2012-12-22.PDF 
```

The value `x3A 973911` is not constant, so basically, in words, I want the part of string to be removed which comes after the first space and ends at the next '_'.

Any ideas ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T11:10:52.747

```
 String phrase="000003023_AggregateStopLossLimit_W x3A 973911_2012-12-22.PDF";
 phrase.replace("x3A 973911",""); 
```

//不确定您是否必须修剪（），但我想这将回答您的问题。

# r - 按一天中的时间拆分 xts 对象，无论日期如何

> ID：14100394
> 
> 赞同：1
> 
> 时间：2012-12-31T10:27:03.780
> 
> 标签：r, date, split, xts

> **可能重复：**
> [XTS 将函数应用于一天中的时间子集？](https://stackoverflow.com/questions/9087361/xts-apply-function-to-time-of-day-subset)

我对这种模式很感兴趣：每天 09:45 到 09:55 之间是否会发生一些有趣的事情[不管是今天还是其他天]。我正在使用 xts，但我找不到**忽略 date**的方法，**只使用 time**进行分析。

以下是一些代码作为示例：

```
times = c(as.POSIXct("2012-11-03 09:45:00 IST"),
          as.POSIXct("2012-11-04 09:45:00 IST"),
          as.POSIXct("2012-11-05 12:45:00 IST"),
          as.POSIXct("2012-11-08 09:45:01 IST"))

xts.obj = xts(c(1,2,3,4),order.by = times)

#the resulting xts object:
#2012-11-03 09:45:00    1
#2012-11-04 09:45:00    2
#2012-11-05 12:45:00    3
#2012-11-08 09:45:01    4 
```

我的目标是能够聚合例如（09:45-09:55），无论一天。这将导致条目（1,2,4）：它们都发生在这个时间范围内[在不同的日期]

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T10:47:51.547

使用时间子集：

```
xts.obj["T09:45/T09:55"] 
                    [,1]
2012-11-03 09:45:00    1
2012-11-04 09:45:00    2
2012-11-08 09:45:01    4 
```

# php - 计算字节数组的 SHA-256

> ID：14100397
> 
> 赞同：3
> 
> 时间：2012-12-31T10:27:12.667
> 
> 标签：php

我`$concate`在以下代码中有一个字符串。我计算了字符串的字节数组如下：

```
for($i = 0; $i < strlen($concate); $i++){
    $binary[] = ord($concate[$i]);
} 
```

现在我想计算字节数组的 SHA-256 哈希`$binary`，但我不知道该怎么做。有人会建议吗？

我要做的是：-

1.  计算字符串的二进制（使用 utf-8 编码）（例如 - “hello world”）。

2.  计算第 1 步结果的 SHA-256。

3.  计算步骤 2 的输出的十六进制。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-31T10:33:33.657

字符串本身是二进制格式。所以`hash('sha256', $concate)`就足够了。如果您希望输出为二进制，请将第三个参数设置为 true。

```
$hash = hash('sha256', $concate, true); // or
$hash = hex2bin(hash('sha256', $concate)); // provides same output as above 
```

它将是二进制字符串而不是十六进制字符串。

有关说明，请参[见此示例](http://codepad.org/06o3znUJ)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T10:33:41.177

您可以将二进制数据存储在 PHP 字符串中。无需将其转换为字节数组。我想这就是你要找的。

```
echo hash('sha256', $concate); 
```

# encryption - 在 Biztalk 中解码 MIME/SMIME 消息

> ID：14100398
> 
> 赞同：-1
> 
> 时间：2012-12-31T10:27:23.053
> 
> 标签：encryption, biztalk

我正在 biztalk 中开发示例加密/解密解决方案。为此，我使用 Testcert 实用程序创建了测试证书。然后我使用测试证书通过 MIME/SMIME 编码器成功加密了一条消息。我的问题是当我尝试解密以前加密的文件时，我收到以下错误消息：

执行接收管道失败：“EncryptionDecryption.ReceivePipeline1, EncryptionDecryption, Version=1.0.0.0, Culture=neutral, PublicKeyToken=de95fc107454e1ca” 来源：“MIME/SMIME 解码器” 接收端口：“ReceivePort4” URI：“C:\ BIZTalkProjects\EncryptionDecryption\DecIN*.xml" 原因：身份验证失败。“解码 S/MIME 消息失败。S/MIME 消息可能无效。

可能是什么原因？请帮我。我正在使用 biztalk 服务器 2010。

问候， 沙比尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T23:30:31.580

您是否检查了写入和读出数据的程序？解码通常发生在内容被解密之前。在调用解密方法之前，确保文件完整且在内存中完全可用。

# c# - 不读取 wpf 中文件的内容

> ID：14100401
> 
> 赞同：-3
> 
> 时间：2012-12-31T10:28:03.213
> 
> 标签：c#, file, fileinfo, directoryinfo

```
 var dir = new DirectoryInfo(Path);
        foreach (FileInfo flInfo in dir.GetFiles())
        {
            String name = flInfo.Name;
            long size = flInfo.Length;
            DateTime creationTime = flInfo.CreationTime;
            const int counter = 0;
            int count = counter + 1;
        } 
```

我正在获取路径但没有读取内容和文件信息

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T10:34:17.717

1.  我不明白，为什么你需要计数器变量
2.  您不要尝试阅读内容。如果要读取文件，请使用流读取它：

    ```
    using (StreamReader reader = flInfo.OpenText())
    {
    Console.WriteLine(reader.ReadToEnd());
    } 
    ```

# spring - spring：在列表中使用绑定错误

> ID：14100402
> 
> 赞同：0
> 
> 时间：2012-12-31T10:28:12.117
> 
> 标签：spring, spring-mvc

我有一个包含用户的列表。我正在尝试在 JSP 中打印它，但有些我无法让它打印出来。得到这个异常`HTTP Status 500 - javax.servlet.ServletException: javax.servlet.jsp.JspTagException: Neither BindingResult nor plain target object for bean name 'users[0]' available as request attribute`

JSP 中的代码

```
<c:forEach items="${users}" var="user" varStatus="status">
   <spring:bind path="users[${status.index}].name">
      <c:out value="${status.value}" />
   </spring:bind>
</c:forEach> 
```

控制器

```
ModelAndView modelAndView = new ModelAndView("go_some_JSP_page");
List<UserEntity> users = userManager.getAllObjects();
modelAndView.addObject("users", users); 
```

顺便说一句，UserEntity 有名称字段。如果我删除绑定并尝试`user.name`使用`<c:out value="user.name" />`它打印值

我哪里出错了，我需要做什么？谢谢

下面的代码不起作用。`status`[我必须在字段@NumberFormat 上调用格式化，所以必须使用变量尝试它]

```
<spring:bind path="user.name">
   <c:out value="${status.value}" />
</spring:bind> 
```

得到这个错误 -->`javax.servlet.ServletException: javax.servlet.jsp.JspTagException: Neither BindingResult nor plain target object for bean name 'user' available as request attribute`

所以添加了一个bean绑定然后我得到空表:(。我相信那是因为实例是空的。所以这似乎不是一个正确的方法。

```
@ModelAttribute("user")
public UserEntity userEntityBinding() {
    return UserEntity.newInstance();
} 
```

[https://github.com/hth/StatusInvoke.git](https://github.com/hth/StatusInvoke.git)上有一个工作代码

如果您在部署它时遇到任何问题，请告诉我。

这个问题已经解决了。感谢您查看它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T12:25:08.763

您可以尝试使用`LazyList`而不是简单列表。如果你想看看这个例子，那么你可以参考我的一个[问题](https://stackoverflow.com/questions/10614718/how-to-validate-dynamically-generated-fields-server-side)。在问题陈述中，我提到了如何使用 LazyList。

希望对您有所帮助。干杯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T10:52:55.927

如果返回模型和视图，这是填充列表的正确方法

```
ModelAndView modelAndView = new ModelAndView("go_some_JSP_page");
List<UserEntity> users = userManager.getAllObjects();
modelAndView.addObject("users", users); 
```

这是引用列表的正确方法

```
<c:forEach items="${users}" var="user" varStatus="status">
    <spring:bind path="user.name">
      <c:out value="${status.value}" />
   </spring:bind>
</c:forEach> 
```

您的问题必须在其他地方是肯定填充的名称字段，是否调用了正确的jsp......上面的代码是正确的并且应该可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T01:19:25.653

调用 @NumberFormat 注释的正确答案是使用`spring:eval expression`标签

```
<spring:eval expression="user.balance" /> 
```

这会调用注释并执行注释中提到的格式化

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T18:54:33.480

我不认为你可以使用 spring:bind 在这种情况下，AFAIK 它试图从 ModelMap 中获取变量，它无法从“for”var 中获取它。

# java - 无法在 Java.util.Calendar 中设置月份

> ID：14100403
> 
> 赞同：5
> 
> 时间：2012-12-31T10:28:21.560
> 
> 标签：java, android, calendar

我在 Android 中有一个 onClickListener，它根据单击的 +/- 按钮更改 Java.util.Calendar 对象的月份。设置日历的代码如下。看来我无法将月份设置为“10”。这里到底发生了什么？

```
Calendar c2 = Calendar.getInstance();
int newmonth = 9;
Log.d (TAG, "month before: "+ c2.get (Calendar.MONTH));
c2.set (Calendar.MONTH, newmonth);
Log.d (TAG, "month now: " + c2.get(Calendar.MONTH)); 
```

**前一个月：11 个月现在：9**

```
Calendar c2 = Calendar.getInstance();
int newmonth = 10;
Log.d (TAG, "month before: "+ c2.get (Calendar.MONTH));
c2.set (Calendar.MONTH, newmonth);
Log.d (TAG, "month now: " + c2.get(Calendar.MONTH)); 
```

**前一个月：11 个月现在：11**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-31T10:29:54.737

月份从 0 开始，因此 9 是 10 月，10 是 11 月，而 11 月没有 31 天。

如果添加：

```
Log.d (TAG, "day of month now: " + c2.get(Calendar.DAY_OF_MONTH)); 
```

您会看到，在第二个示例中，这一天已从 31 日移至 1 日。

要获得所需的行为，您应该使用：

```
c2.add(Calendar.MONTH, -1); // or +1 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-31T10:33:26.170

你需要类似的东西：

```
c2.set(Calendar.DAY_OF_MONTH, 1) 
```

因为今天的 DAY_OF_MONTH (31) 恰好不是 11 月 :-)

# iphone - Synchronizing issues of MBO in SUP 2.1.3

> ID：14100406
> 
> 赞同：0
> 
> 时间：2012-12-31T10:29:04.710
> 
> 标签：iphone, ios, ipad, sybase, sup

I am trying to run an iOS application which is migrated from SUP2.1.2 to SUP2.1.3\. An application is working fine with device registration and connection, but the problem arises when i try to synchronize 3 MBO synchronization group. The synchronization is working fine for the first time, but when i click over different item to synchronize its detail i am getting following error:

```
 *** -[CFString retain]: message sent to deallocated instance 0x6465650 
```

I think problem is coming under the following MBO method

```
 + (ITEMSSynchronizationParameters*)getSynchronizationParameters
 {
     return (ITEMSSynchronizationParameters*)[(SUPSyncParamEntityDelegate*)([[ITEMDATABASE delegate]           getDelegate:@"ITEMSSynchronizationParameters"]) getSynchronizationParameters];
 } 
```

and i am calling this method while synchronizing app details as follows

```
 ITEMSynchronizationParameters *syncParam = [ITEMSynchronizationParameters getSynchronizationParameters];
    [syncParam setSYNC_NO:@"101"];
    [syncParam save]; 
```

While It also not allowing me to delete sync parameter so that on each items click i should get different information details as [syncParam delete] is causing the same *** -[CFString retain]: message sent to deallocated instance 0x6465650 error. I have used patch 01 and 02 but the problem is still present. Any help would be appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T12:37:59.573

我们有同样的问题。在我的情况下，这个问题的答案是为 SynchronizationParameters 创建一个语言环境属性并使用该属性。我不知道为什么，但现在微妙的错误消失了。

```
@property (nonatomic, retain) ITEMSynchronizationParameters *item_sp;

 item_sp = [Item getSynchronizationParameters];
 item_sp.syncparam =  @"XXXXX";
 [item_sp save]; 
```

# android - --- SkImageDecoder::Factory returned null in android while displaying images

> ID：14100407
> 
> 赞同：2
> 
> 时间：2012-12-31T10:29:19.463
> 
> 标签：android, image, sqlite

I am storing images into sqlite in byte array and displaying those images from the sqlite but the problem is i am unable to display those images as they are showing

```
 --- SkImageDecoder::Factory returned null 
```

the code i used for that is

```
img.setImageBitmap(BitmapFactory.decodeByteArray(map.get(POSITION), 0, map.get(POSITION).length)); 
```

could anyone tell me to solve this issue?

# linux - bash：设置数组 env 变量并从任何 shell 脚本中取消引用它失败

> ID：14100409
> 
> 赞同：7
> 
> 时间：2012-12-31T10:29:42.430
> 
> 标签：linux, bash, environment-variables

我以这种方式将数组设置为环境变量，例如。脚本`test.sh`

在 test.sh

```
#!/bin/bash
export STRING=( "str1" "str2" ) 
```

源测试.sh

现在在脚本中`test-1.sh`

```
#!/bin/bash
echo ${STRING[0]} 
```

响应什么都不是，只是一个空行，而如果我尝试`STRING="str1"`在 test.sh 中设置并`echo $STRING`在中执行`test-1.sh`，则可以。

测试仅从 root 用户执行，现在如何将数组设置为 env 变量，以便我可以根据需要调用数组的元素？早些时候，我什至尝试过修改`/etc/bashrc`，但这也没有产生任何积极的结果。

我需要将数组设置为 env 变量，因为我可能需要编写许多脚本来使用这些变量设置。

任何人都可以向我提供建议以纠正我做错的地方吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-31T10:46:32.183

阅读精美的手册“错误”部分。

> 数组变量可能（尚未）被导出。

不过，我不知道有多少人认为这是一个实际的错误。其他支持 ksh 样式数组的 shell 也不允许导出它们。

您可以通过参数或变量或环境轻松地传递数组定义。虽然它通常不是很有用。

```
function f {
    unset -v "$2"
    typeset "$2"
    eval "${!1}"
    typeset -p "$2"
}

typeset -a a=(a b c)
myArr=$(typeset -p a) f myArr a 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T12:11:03.040

误解是认为环境变量仅由外壳使用 - 它们不是。不能将任何属性（包括只读、整数和数组）导出到环境块中。环境变量可以被任何语言读取，C、C++、Perl、Java、Python、PHP 等等。它们也存在于 Windows 上。

那么，另一种语言如何支持 Bash 特定属性呢？所有环境变量都转换为字符串，除了在 Bash 中根本不导出数组值。

Korn shell 将只导出第一个元素。ksh93 还进行了一些`exec`利用来保留导出到 Korn shell 子级的变量属性。

顺便说一句，对变量名使用大写被认为是不好的做法，因为它们可能与 shell 使用的那些冲突。此外，在 Bash 3 上，名称 STRING 在导出时存在问题（在 Bash 4 中已修复）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-05-18T11:17:06.830

从进程传递给子进程的环境变量是非结构化字符串；不支持数组。你可以在 Bash 中证明这一点：

```
export x=foo
printenv x 
```

那输出`foo`。如果我现在导致`x`成为一个数组

```
x=(foo bar)
printenv x 
```

我们看不到输出（`x`未导出）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-31T10:43:54.520

您试图将数组放入环境变量中，而环境变量只能是字符串。bash 没有正确序列化/反序列化数组的方法；手动进行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-09-16T13:48:23.773

[这](https://www.tldp.org/LDP/Bash-Beginners-Guide/html/sect_10_02.html)表示尽管使用 bash 脚本可以将数组作为 env 变量传递。它适用于在 bash 命令中定义和取消引用数组，但在从 bash 脚本（ubuntu 18.04）取消引用时不起作用。

# c# - How to add certificate rule through command line or programmatically?

> ID：14100410
> 
> 赞同：0
> 
> 时间：2012-12-31T10:29:45.877
> 
> 标签：c#, certificate

I want to add a new certificate rule through command line in Additional Rules which is under Software Restriction Policies. If any one know how to achieve it please answer me. I have searched a lot in net. But i could not found any clue for this.

The Additional Rules is present under secpol.msc\Software Security\Software Restriction Policies\Additional Rules

# ruby-on-rails - Backbone.js - 将参数从初始化传递给模型“url”

> ID：14100411
> 
> 赞同：1
> 
> 时间：2012-12-31T10:29:49.673
> 
> 标签：ruby-on-rails, backbone.js, coffeescript

路由器：entry_router.js.coffee

```
show: (id) ->
  @model = new Raffler.Models.Entry({id: id})
  @model.fetch() 
```

型号：entry.js.coffee

```
class Raffler.Models.Entry extends Backbone.Model

  initialize: (options) ->
    alert(options.id)

  url: '/api/entries/' + id 
```

我得到了正确的警报。但是如何将 options.id 传递给 URL 呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T12:42:38.660

如果您的模型不是集合的一部分，请指定[Model.urlRoot](http://backbonejs.org/#Model-urlRoot)而不是`url`. Backbone 会自动生成一个格式为的 URL `[urlRoot]/id`。

```
class Raffler.Models.Entry extends Backbone.Model
    urlRoot: '/api/entries' 
```

如果您的模型是集合的一部分，则无需设置`url`or `urlRoot`。改为指定`collection.url`，Backbone 将自动推断该集合中所有模型的 URL。

# ruby-on-rails - 显示两个以上模型的动作

> ID：14100415
> 
> 赞同：0
> 
> 时间：2012-12-31T10:30:36.083
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有一个包含 many_invoice 项目的发票模型

```
class Invoice < ActiveRecord::Base
  belongs_to :customer, :inverse_of => :invoices
  attr_accessible :approved_by, :due_date, :invoice_date, :reading_ids, :terms, :customer_id, :customer, :status

  validates :invoice_date, presence: true
  validates :due_date, presence: true
  validates :customer, presence: true
  has_many :invoice_items
  accepts_nested_attributes_for :invoice_items
end 
```

发票项目模型

```
class InvoiceItem < ActiveRecord::Base
  belongs_to :invoice
  attr_accessible :amount, :description, :rate, :tax_amount
end 
```

我现在在我的 Invoices_controller 中有一个显示操作

```
def show
@invoice = Invoice.find(params[:id])
respond_to do |format|
    format.html
end
end 
```

我希望能够在发票的显示页面中显示发票项目，如描述、税额和税率，但是，这给了我很大的挑战。我是否必须在其中创建一个处理发票项目的部分？下面是我的展示页面

```
<p id="notice"><%= notice %></p>
<div class="row">
<div class="span12">
    <h3> Customer Invoices </h3>
<table class="table table-striped">
  <thead>
    <tr>
      <th>Invoice ID </th>
      <th>Customer Name </th>
      <th>Invoice Date </th>
      <th>Due Date </th>
      <th>Amount</th>     
   </tr>
</thead>
<tbody>
  <tr>
    <td><%= @invoice.customer.name %></td>
    <td><%= @invoice.invoice_date %></td>
    <td><%= @invoice.due_date %></td>   
  </tr>
</tbody>
</table>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T10:45:40.977

使用部分不是必须的，但你可以通过任何一种方式来做到这一点

**1 - 没有部分**

```
in your show.html.erb

#your invoice code
<% invoice_items = @invoice.invoice_items %>
<% invoice_items.each to |invoice_item|%>
<tr>
  <td><%= invoice_item.amount%></td>
</tr>
<% end %> 
```

**2）带偏**

```
in your show.html.erb

#your invoice code
    <% invoice_items = @invoice.invoice_items %>
    <% invoice_items.each to |invoice_item|%>
    <tr>
      <td>
         <%= render :partial => 'invoice_item', :locals => {:item => invoice_item}%>
      </td>
    </tr>
    <% end %>

 in your _invoice_item.html.erb

 <%= item.name %> 
```

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T10:41:14.093

您可以使用部分来保持整洁，但没有理由不能在显示视图模板中执行此操作。

```
<% @invoice.invoice_items.each do |item| %>
 <td><%= item.amount %></td>
 <td><%= item.description %></td>
 # etc
<% end %> 
```

发票项目与`@invoice`您在视图中拥有的对象相关，因此您可以访问发票`invoice_items`。

# javascript - 限制文件类型/扩展名的 S3 api 策略条件

> ID：14100416
> 
> 赞同：1
> 
> 时间：2012-12-31T10:30:51.487
> 
> 标签：javascript, amazon-web-services, amazon-s3, amazon, jquery-file-upload

我正在阅读[此处的文档，](http://doc.s3.amazonaws.com/proposals/post.html#Access_Control)但我看不到如何添加条件以限制上传到某些扩展/mime 类型的白名单。

即：我只想允许人们上传扩展名为“xls”、“xlsx”、“ppt”、“pptx”、“doc”、“docx”、“txt”、“csv”的文件

这可能吗？

PS：我正在使用`jquery-file-upload`并且已经在我的 to s3 之前检查了客户端，`POST`但是有些浏览器不支持 File api，所以我需要仔细检查。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T13:01:57.533

您可能会通过它的 mime 类型进行验证

（这可能没用，因为如果未注册 mimetype，它将为二进制未知类型选择默认的，从浏览器的角度来看）。

在文档中，它被称为：

```
 ["starts-with", "$Content-Type", "image/"], 
```

我不确定是否允许集合。至少，您可以组合多种策略，每种策略对应一种允许的 mime 类型。

至于扩展，我想你别无选择。

编辑：我前段时间写了一篇文章，[概述了整个过程的工作原理](http://www.newvem.com/beyond-get-and-put-sharing-s3-objects-effectively-via-http-with-some-sdk-help/)以及如何使用它（免责声明：我为 Newvem 写）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T13:56:48.143

```
 $('#fileupload').fileupload('option', {
        maxFileSize: 25000000,
        acceptFileTypes: /(\.|\/)(gif|jpe?g|png)$/i,
        process: [
            {
                action: 'load',
                fileTypes: /^image\/(gif|jpeg|png)$/,
                maxFileSize: 20000000 // 20MB
            },
            {
                action: 'save'
            }
        ]
    }); 
```

fileTypes 选项似乎是您正在寻找的。更改正则表达式以过滤您想要的类型。我的示例显示了图像文件的那些。

# javascript - Add class to parent LI where A = current document?

> ID：14100417
> 
> 赞同：0
> 
> 时间：2012-12-31T10:30:57.550
> 
> 标签：javascript, jquery

I'm trying to append a class to an LI automatically if the filename matches the href (e.g; if the anchor has the href attribute set to about.php and the filename of the current page is about.php then it would append the class.) however, along the way I've hit some complications and I've been getting myself confused with the syntax a little...

So far I have this...

```
var filename = location.pathname.substring(1)

$(document).ready(function(){
    $('a').each(function() {
        if (this.href === filename) {
            $(this).parent('li').addClass('current_page_item');
        }
    });
}); 
```

My navigation is constructed as shown [here](http://jsfiddle.net/sgySp/3/) and as you can see, it works and everything but only when the class is set manually... so I'm trying to get it to be automatic from the actual filename.

I hope this make some sense to someone, as I'm really confused on how to get this working now!

Thank-you to anyone who contributes, it's of great help and will help me understand the jquery syntax further, actually selecting something specific and writing a logical statement in jquery really confuses me as it's very different to PHP, which is what I'm used to.

My markup looks like this, since I didn't include it before and just *assumed* people would look at the source code to understand what I was meaning (though, I should have put it here)

```
<nav>
    <div class="container">
        <ul class="group" id="effects">
            <li><a href="index.php" title="View the latest news">News</a></li>
            <li><a href="about.php" title="Find out more about us">About</a></li>
            <li><a href="#" title="Find out about races">Races</a></li>
            <li><a href="#" title="Find out what tools we use">Tools</a></li>
            <li><a href="#" title="Read the Frequently Asked Questions">FAQ</a></li>
            <li><a href="contactus.php" title="Contact us">Contact Us</a></li>
        </ul>
    </div>
</nav> 
```

Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T10:48:26.057

我认为您可以像这样简单地做到这一点：

```
$(function(){
    $('a').filter(function() {
      return (this.href == location.href);
    }).parent('li').addClass('current_page_item');
}); 
```

​按其 href 属性过滤锚标签。似乎在这个[JSFiddle](http://jsfiddle.net/bozdoz/sgySp/)上工作。出于某种原因，您必须点击运行才能使其工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T10:34:45.480

I assume that li tag is parent of anchor tag than you can try this-

```
$(this).parent().addClass('current_page_item'); 
```

instead:

```
$(this).parent('li').addClass('current_page_item'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T10:36:55.623

根据您在问题中提供的少量信息，我建议（尽管这是未经测试的）：

```
var file = document.location.href.split('/').pop();
$('li a').filter(function(){
    return this.href.indexOf(file) !== -1;
}).parent().addClass('current_page_item'); 
```

这将获取当前页面 URL 的内容并按`/`字符拆分，然后将数组的最后一个元素分配给变量`file`，例如：

```
'http://example.com/directory/page.html' 
```

转换为数组：

```
["http:", "", "example.com", "directory", "page.html"] 
```

并且该数组的最后一个元素被分配给变量，因此`file`等于：

```
'page.html' 
```

jQuery 遍历`a`元素中的每个元素`li`，然后，如果`page.html`在`href`属性中找到字符串，则返回该`a`元素，并将类名添加到其父元素。

当然，您可以使用 full `document.location.href`；这将给出：

```
var page = document.location.href;
$('li a').filter(function(){
    return this.href == page;
}).parent().addClass('current_page_item'); 
```

其工作方式大致相同，但不是查看是否可以在 URL 中找到文件名，而是检查`href`元素的 是否*完全*等于当前的`document.location.href`.

参考：

*   JavaScript：
    *   [`Array.pop()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/pop).
    *   [`String.indexOf()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/indexOf).
    *   [`String.split()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/split). *jQuery:
    *   [`filter()`](http://api.jquery.com/filter/).

# c# - Could not load file or assembly CrystalDecisions.VSDesigner Version=10.5.3700.0

> ID：14100418
> 
> 赞同：0
> 
> 时间：2012-12-31T10:31:00.727
> 
> 标签：c#, asp.net, .net

i have a web application with visual studio 2008 and crystal report 2008 and all thing is fine

BUT

when i installed SAP crystal report 2010 , my be it crash with CR 2008

when i run my APP i get this message ***Could not load file or assembly CrystalDecisions.VSDesigner Version=10.5.3700.0***

i do some solutions 1 - i open web.config file and delete the row of CrystalDecisions.VSDesigner - my app run fine but reports not working

when i add this row again my app not running

please . i do alot of research about this problems but no HOPE

thanks for ur time

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T11:39:15.010

在 Vs 2003 中，当您创建安装程序并安装时，Crystal 报表的运行时已捆绑在程序设置中，但在 vs 2005 及更高版本中，您必须安装它。我想在这里你可以找到微星

[http://scn.sap.com/docs/DOC-27917](http://scn.sap.com/docs/DOC-27917)

vs自带的runtime的dll版本和各种版本的水晶报表都不一样，所以要安装对的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T11:14:07.530

安装新版本的 Crystal Reports 很有可能会从 GAC 中清除您以前的程序集并用更新的版本替换它们。来自[SAP](http://wiki.sdn.sap.com/wiki/pages/viewpage.action?pageId=56787567)：

> 由于每个版本的 Crystal Reports 都有其必须正确部署的特定运行时，因此部署的运行时与项目中引用的 Visual Studio .NET 的 Crystal Reports 程序集一致至关重要。

您的错误看起来像是试图从 Crystal Reports 10.5 中查找 DLL，并且正如上面的链接所示，它不喜欢同时运行不同版本的 Crystal 报表。

# java - How can I atomically add a new key to google appengine's memcache?

> ID：14100429
> 
> 赞同：1
> 
> 时间：2012-12-31T10:32:32.177
> 
> 标签：java, google-app-engine, concurrency, memcached

I'd like to *atomically add* a new key to google appengine's memcache service using the Java API. This means that the put operation should fail (e.g. throw an exception or return `false` ) if the key is already present in the memcache, preventing concurrent additions (which would result in overwriting) to the memcache.

I don't see how this can be accomplished with the `getIdentifiable` / `putIfUntouched` pair of methods. Also, `synchronize` does not help because I want control concurrency across different instances of my servlet.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T01:46:09.310

您想使用 SetPolicy.ADD_ONLY_IF_NOT_PRESENT ，如果密钥不存在，则只会写入一个值。

```
boolean put(java.lang.Object key,
      java.lang.Object value,
      Expiration expires,
      MemcacheService.SetPolicy policy) 
```

返回值会告诉你一个值是否已经存在。

# iphone - How to Download a video using UIWebView

> ID：14100430
> 
> 赞同：5
> 
> 时间：2012-12-31T10:32:36.217
> 
> 标签：iphone, ios, xcode, video, uiwebview

I want to download a the video using web-view but I am not getting how to download it? my video link is [here](http://player.vimeo.com/video/32983838)

the sample code for playing video which I am using is

```
-(void)embedYouTubeInWebView:(NSString*)url theWebView:(UIWebView *)aWebView {
    NSString* html = [NSString stringWithFormat:@"%@", url];
    [aWebView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:html]]];
}

- (void)viewDidLoad
{
    [super viewDidLoad];

   [self embedYouTubeInWebView:@"http://player.vimeo.com/video/32983838" theWebView:myWebView];
    // Do any additional setup after loading the view, typically from a nib.
} 
```

can anyone please help me to download this video?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-31T11:19:40.850

要下载文件，我使用了以下代码。希望它也对你有用。

```
- (IBAction)getFileFromFtpServer:(UIView *)sender
{

  NSString *stringURL = @"http://player.vimeo.com/video/32983838";
NSURL  *url = [NSURL URLWithString:stringURL];
NSData *urlData = [NSData dataWithContentsOfURL:url];
if ( urlData )
{
  NSArray       *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
  NSString  *documentsDirectory = [paths objectAtIndex:0];  

  NSString  *filePath = [NSString stringWithFormat:@"%@/%@", documentsDirectory,@"filename.mpeg4"];
  [urlData writeToFile:filePath atomically:YES];
}

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T11:17:30.660

```
 Try this here your video is playing..

 - (void)viewDidLoad
{
  [super viewDidLoad];
  UIWebView*  webView = [[UIWebView alloc] initWithFrame:CGRectMake(0, 0, 320, 380)]; 
    webView.delegate=self;
   [webView setOpaque:NO];
    webView.backgroundColor=[UIColor clearColor];
    CGRect screen = [[UIScreen mainScreen] bounds];
    CGFloat width = CGRectGetWidth(screen);
    CGFloat height = CGRectGetHeight(screen);
   UIActivityIndicatorView * activityIndicator = [[UIActivityIndicatorView alloc]        initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhite];
    activityIndicator.frame=CGRectMake((width/2) - 10,(height/2) - 54, 20, 20);
    activityIndicator.center=self.view.center;
    [activityIndicator hidesWhenStopped];

   [self  playVideo];
}
  -(void) playVideo
    {
     NSURL *url = [NSURL URLWithString:@"http://player.vimeo.com/video/32983838"];
            NSURLRequest *request = [NSURLRequest requestWithURL:url];
            [self.webView loadRequest:request];
            [activityIndicator startAnimating];
            [webView addSubview:activityIndicator];
    }

    /*   WebViewDidStartLoad   */
    - (void)webViewDidStartLoad:(UIWebView *)webView
    {
       [activityIndicator startAnimating];
        [[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:YES]; 
    }

    /*   WebViewDidFinishLoad   */
    - (void)webViewDidFinishLoad:(UIWebView *)webView
    {
         [activityIndicator stopAnimating];
        [[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:NO]; 
    }
    /*   WebViewdidFailLoadWithError   */
    - (void)webView:(UIWebView *)webView didFailLoadWithError:(NSError *)error
    {
        [[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:NO]; 
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T17:03:57.517

如果我理解正确并回应上述内容，由于侵犯版权，谷歌已经关闭了几个“转换器网站”： [http](http://www.real.com/resources/youtube-to-mp3-converter) ://www.real.com/resources/youtube-to-mp3-converter 还有其他网站可供下载视频内容来自（同样，假设您遵守版权准则）：这列出了五个网站，您可以在其中免费找到和下载在线视频。为确保视频可以合法下载，请查找有关视频的许可信息。通常，具有“知识共享”许可的视频可以合法下载，但可能对您使用视频的方式有限制。 [http://www.real.com/resources/download-one-video](http://www.real.com/resources/download-one-video)

# java - How to make my own compilation error in java ?

> ID：14100433
> 
> 赞同：-6
> 
> 时间：2012-12-31T10:33:07.297
> 
> 标签：java

how can I enforce the compiler to give me an error if the parameter (String Path) that is sent to the constructor can't be a directory?

```
import java.io.File;
public class Folder {

    protected File file;

    public Folder(String Path){
    file = new File(Path);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T10:36:34.487

你不能让它成为编译错误（除非你当然重写编译器，即使那样，我认为你不能在编译时确定一个字符串是否是一个有效的目录）。

在 java 中处理这个问题的标准方法是抛出异常，例如：

```
if (isNotValid(path)) { //condition to be defined
    throw new IllegalArgumentException(path + " is not a valid path");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T10:54:04.313

A compile time error won't be possible.

Yet consider this implementation :

```
public class Folder {

    private final File folder;

    public Folder(String path) {
        this(new File(path));
    }

    public Folder(File folder) {
        if (!folder.exists() || !folder.isDirectory()) {
            throw new IllegalArgumentException();
        }
        this.folder = folder;
    }

    // add useful methods possibly delegating to contained File object ...
} 
```

This effectively prevents making Folder objects that contain a non directory File. Also note that I've set the folder field private, so no other class can tamper with it.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T10:36:46.980

可能带有某种注释处理器。

但这是一个非常奇怪的要求。如果它在编译时是一个目录，但不是运行时会发生什么？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-31T10:42:24.907

*不能是*什么目录？在 Windows 中？在 Linux 中？

Java 是跨平台的，每个平台都有自己的规范（例如，在 Windows 中，您不能`*`在目录名称中使用，但在 Linux 中，您可以......）；

我认为您只需要在运行时从方法内部检查File 类的[isDirectory()](http://docs.oracle.com/javase/1.5.0/docs/api/java/io/File.html#isDirectory%28%29)方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-31T12:01:07.043

您可以通过使用在每个构建上运行的自动单元测试来实现类似的功能。

首先，您需要验证`Folder`构造函数中的参数，以便`Exception`在路径无效时抛出 a。

然后你编写单元测试，运行和测试你的所有代码。如果测试失败，BUILD 也会失败——项目的整个打包都会失败。（例如，硬编码的目录不可访问） 这很像编译器错误，构建过程会失败。（确定不一样）

测试确保您测试的代码以所需的方式工作。

当然，如果您使用像 maven 这样的构建工具，这会更容易，单元测试会在每个构建中自动运行。

# java - How to migrate Java EE application to rails

> ID：14100438
> 
> 赞同：5
> 
> 时间：2012-12-31T10:33:30.860
> 
> 标签：java, mysql, ruby-on-rails

We are in the process of migrating our CRM app built using (JBoss AS, JDBC, Hibernate, MySQL) into Rails 3.2.x

We would like to keep the database schema as it is, so that we have minimal effort while we move into a new web architecture with Rails. Are there any tools which will help me generate the models/controllers and handle migrations from a database perspective.

What strategy should we use so that we can keep the old application humming in production before we move to the newer Rails app.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T10:53:34.273

Here is what I think, and what I have done the same past :)

1 - first write the models coupling with your existing DB (I think you are using ActiveRecord with Rails , if not you should :D)

2 - Try your level best to use ActiveRecord and its components, avoid using pure SQL, because later that will create a mess

3 - cover with good unit tests and make sure your models are working with existing DB and all the relations etc.

4 - then move to the controller and view layer

5 - **Golden rule, try to keep Rails conventions as much as possible, because the beauty of rails is that, if you follow the rails way things will "just work"**

(Since you are using the same database you will not have the headache of data migration).

And +1 migrating from Java to Ruby :)

# dojo - 自定义小部件中的 dijit 小部件——处理它们的事件

> ID：14100442
> 
> 赞同：1
> 
> 时间：2012-12-31T10:33:45.727
> 
> 标签：dojo

JS：

```
define(["dojo/_base/declare","dojo/dom",
    "dijit/_Widget", "dijit/_TemplatedMixin",
    "dojo/text!./templates/MainViewWidget.html",
    "dijit/layout/TabContainer", "dijit/layout/ContentPane","dijit/layout/BorderContainer","dijit/form/TextBox", "dijit/layout/AccordionContainer"],
    function(declare, dom, _Widget, _TemplatedMixin, template){
        return declare("package.MainViewWidget", [_Widget, _TemplatedMixin], {
            widgetsInTemplate: true,
            templateString: template,
            constructor: function(){

            },
            startup: function(){

            },
            search: function(evt){
                alert('hi');
                alert(evt);
            }
        });
    }); 
```

模板/MainViewWidget.html：

```
<div class="mainContainer">

<div data-dojo-type="dijit.layout.BorderContainer" data-dojo-props="design:'sidebar', gutters:true, liveSplitters:true" style="width:100%;height:100%;">
    <div data-dojo-type="dijit.layout.ContentPane" data-dojo-props="region:'left', splitter:true"> 
        <h2>List of trips</h2>
        <br />
        <input type="text" data-dojo-type="dijit.form.TextBox" data-dojo-props="placeHolder:'Search...'" data-dojo-attach-event="onchange:'search'"/>
        <br />

    </div>

    <div data-dojo-type="dijit.layout.TabContainer" data-dojo-attach-point="tabContainerDiv" data-dojo-props="region: 'center', tabPosition: 'top', tabStrip:'true', style:'width:80%;height:100%'">
        <div data-dojo-type="dijit.layout.ContentPane" title="Summary" data-dojo-props="selected:'true', title:'About'">Welcome. Navigate through the Left pane.</div>
    </div>
</div>
</div> 
```

问题是，我想在`TextBox`. 正如您从`data-dojo-attach-event="onchange:'search'"`. 我已经尝试了很多变体，但我无法让它工作。基本上我想要的是在 JS 中定义一个函数并将其作为处理程序附加到标记中。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T23:44:59.820

尝试：

```
data-dojo-attach-event="onChange:search" 
```

Camelcase onChange，搜索周围没有引号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-02T14:37:07.693

遗憾的是，这不受支持。我花了大约两个小时才发现这一点。模板中具有`data-dojo-type`属性的任何节点都会被忽略`_TemplatedMixin._attachTemplateNodes`（参见[第 177 行](https://github.com/dojo/dijit/blob/1.8/_TemplatedMixin.js#L177)）。换句话说，`data-dojo-attach-event`只会绑定到普通的 DOM 节点（不是 Dijits）。

这至少适用于 v1.8。v1.9 中的附加处理不同（有一个[`_AttachMixin`](https://github.com/dojo/dijit/blob/master/_AttachMixin.js)），所以它可能在那里工作。

# javascript - Jquery jstorage issue on IE8?

> ID：14100445
> 
> 赞同：4
> 
> 时间：2012-12-31T10:34:28.537
> 
> 标签：javascript, jquery, jstorage

i am using jquery jstorage in my jsp

importing statement

```
<script type="text/javascript" src='<s:url value="/script/jstorage.min.js"/>'></script> 
```

here is i am setting the value in jstorage var customerId = $.jStorage.get("customerId", true);//line

```
i can see below errors in my console

SCRIPT5022: jQuery, MooTools or Prototype needs to be loaded before jStorage! 
     jstorage.min.js?ver=4.5.8, line 2 character 315
SCRIPT5007: Unable to get value of the property 'get': object is null or undefined 
```

**somehow $.jStorage is null in IE at line1 but not firefox/chrome(so works on firefox/chrome).**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T10:51:18.863

Folks got the fix.Need to import jquery.json-2.3.min.js to make it work on IE

# c++ - object_detection using opencv in c/c++ on eclipse

> ID：14100449
> 
> 赞同：1
> 
> 时间：2012-12-31T10:34:44.487
> 
> 标签：c++, eclipse, opencv

I am trying to detect faces and eyes from a video captured by webcam. I am using eclipse and opencv-2.3.1 on ubuntu 11.10\. I want to write this code in C/C++. I configured eclipse by looking at the tutorials.I got the code online as [`objectDetection.cpp`](http://fossies.org/dox/OpenCV-2.4.3/objectDetection_8cpp.html)

I am getting the error as below:

```
> **** Build of configuration Release for project opencv_try **** make all 
> Building file: ../objectDetection2.cpp 
> Invoking: GCC C++ Compiler 
> g++ -I/home/vidula/OpenCV-2.3.1/include/opencv -O3 -Wall -c -fmessage-length=0 -MMD -MP -MF"objectDetection2.d" -MT"objectDetection2.d" -o"objectDetection2.o" "../objectDetection2.cpp" 
> Finished building: ../objectDetection2.cpp  
> Building target: opencv_try 
> Invoking: GCC C++ Linker 
> g++ -L/usr/lib -L/home/vidula/OpenCV-2.3.1/lib -L/home/vidula/OpenCV-2.3.1/modules/imgproc/include/opencv2/imgproc -o"opencv_try"  ./objectDetection2.o   -lopencv_core -lopencv_highgui 
> /usr/bin/ld: ./objectDetection2.o: undefined reference to symbol 'cv::cvtColor(cv::_InputArray const&, cv::_OutputArray const&, int, int)' 
> /usr/bin/ld: note: 'cv::cvtColor(cv::_InputArray const&, cv::_OutputArray const&, int, int)' is defined in DSO /usr/local/lib/libopencv_imgproc.so.2.3 so try adding it to the linker command line 
> /usr/local/lib/libopencv_imgproc.so.2.3: could not read symbols: Invalid operation collect2: ld returned 1 exit status make:
> *** [opencv_try] Error 1 
```

I tried linking it to linkers but I don't know what I am doing wrong. Can anyone help me figure out what is wrong?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T19:32:13.457

看起来它告诉您`cv::cvtColor`您需要的符号在`libopencv_imgproc`库中，因此您需要使用 option 将该符号添加到链接器选项中`-lopencv_imgproc`，就像您对`core`and所做的那样`highgui`

# python - 列表插入删除任意值 - np.interp

> ID：14100460
> 
> 赞同：1
> 
> 时间：2012-12-31T10:36:30.603
> 
> 标签：python, list, interpolation

我是 python 编码的新手：

我有一个温度列表，对于没有记录温度的日子，使用值 9999。我想通过列表使用 np.interp tp interpolate 来删除 9999，并带有估计值。例如

max_temp = [40, 35, 32, 31, 9999, 9999, 9999, 26, 27, ... ... 40, 42]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T12:21:00.280

已解决 - 已使用：

```
from pandas import *
a = [1,2,3,None,5]
b = Series(a).interpolate()
b = [1,2,3,4,5] 
```

比 np.interp() 更简单

# c - 如何在C中扩展二维动态数组？

> ID：14100468
> 
> 赞同：0
> 
> 时间：2012-12-31T10:36:58.617
> 
> 标签：c, arrays

我有这个代码：

```
FILE *fr,*fr2,*fr3; 
fr = fopen("med.txt","r");
fr2 = fopen("moje.txt","w");
fr3 = fopen("zaloha.txt","rw");

int  pRadku, nc, inword, pMezery;
int pSlov = 0;
inword =  0;
pRadku = 1;
inword = 0;  
int radky = 20;
int sloupce = 50;
nc = pMezery = 0;
int pocitadlo = 0;
int pocitadlo2 = 0;
int i,j;
char c;

int tex = 255;

char text; 
for(i= 0; i<tex ;i++){
     text[i]='\0';     
}  

 char **pole;
 int pocet = 1000;
 char *p_pom1, *p_pom2, **p_nove;
 pole = (char **)malloc(pocet * sizeof(char));
 for(i=0; i<pocet; i++){
      pole[i] = (char*)malloc(tex * sizeof(char));    
 }

while(( c=fgetc(fr)) != EOF){

        ++nc;
    if(c == '\n'){
        ++pRadku;
            }
    if(c ==' '){
         pMezery++;
             }
    if(c == ' ' || c == '\n' || c == '\t'){
        inword = 0;
    }else if(inword == 0){
            inword = 1;
            ++pSlov;            
    }

  if(pocitadlo >= (pocet-1)){

         int pomPocet = pocet;      
         pocet+=1000;
         pole = (char **)realloc(pole, pocet * sizeof(char));

  }

  if((c != ' ')){
      if(c != '\0'){
           if(c != '\n'){
                if(c != '\t'){
                     if(c != '.'){
                        if(c != ','){
                          text[pocitadlo2]=c;
                          pocitadlo2++;
                        }  
                     }
                }
           }
      }
  }

  if((c == ' ')){
      text[pocitadlo2] = '\0';
      for(i=0;i<tex;i++){
        pole[pocitadlo][i] = text[i];
      }
      for(i=0;i<tex;i++){
        text[i]='\0';
      }
      pocitadlo2=0;
      pocitadlo++;  

  }else if(c == '\0'){
     text[pocitadlo2] = '\0';
      for(i=0;i<tex;i++){
        pole[pocitadlo][i] = text[i];
      }
      for(i=0;i<tex;i++){
        text[i]='\0';
      }
      pocitadlo2=0;
      pocitadlo++;  

  }else if(c == '\n'){
     text[pocitadlo2] = '\0';
      for(i=0;i<tex;i++){
        pole[pocitadlo][i] = text[i];
      }
      for(i=0;i<tex;i++){
        text[i]='\0';
      }
      pocitadlo2=0;
      pocitadlo++;  

  }else if(c == '.'){
      text[pocitadlo2] = '\0';
      for(i=0;i<tex;i++){
        pole[pocitadlo][i] = text[i];
      }
      for(i=0;i<tex;i++){
        text[i]='\0';
      }
      pocitadlo2=0;
      pocitadlo++;  

  }else if(c == ','){
      text[pocitadlo2] = '\0';
      for(i=0;i<tex;i++){
        pole[pocitadlo][i] = text[i];
      }
      for(i=0;i<tex;i++){
        text[i]='\0';
      }
      pocitadlo2=0;
      pocitadlo++;  

  }

} 
```

我的问题是我是否正确扩展了我的二维数组？还是应该以不同的方式来做？

该程序从一个文件中读取 300 000 个单词并将它们保存到一个数组中。

谢谢你的时间。

编辑**

```
int row = 5;
int column = 5;
int countr = 0;
int countr2 = 0;

int c;
int **array;

array = (int **)malloc(size * sizeof(int*));
 for(i=0; i<row; i++){
    pole[i] = (int*)malloc(column * sizeof(int*));    
}

while(read letters form file (c=fgetc()) != EOF{

if(coutr>=(size-1)){
    row+=10;
     array = (int **)realloc(array, row * sizeof(int*));
}

array[countr][countr2] = c;
countr2++;
if(c == '\0' || c == ' '){
    countr2=0;
    countr++;
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T11:07:54.720

这段代码被破坏了，以至于无法诊断出问题所在。举个例子，

```
int tex = 255;

char texttex 
for(i= 0; tex ;i++){
     text[i]='\0';     
} 
```

后面缺少分号`char texttex`并且是无限循环，因为`tex`始终是 255。请提供**完整的最小可编译代码**。如果您希望别人为您花时间，您应该先花一些时间为我们服务。谢谢你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T10:40:57.993

错误的大小被传递给 malloc 函数： `sizeof(char)` **应该是** `sizeof(char*)`：

```
pole = (char **)malloc(pocet * sizeof(*char)); 
```

`sizeof(char) != sizeof(char*)`并且不要对 malloc() 使用类型转换。

我可以在您的代码中看到类似的错误`realloc` ：

错误在： `pole = (char **)realloc(pole, pocet * sizeof(char));`

也是一个语法错误，`;`缺少：

字符文本

# php - 在 page.tpl.php 文件中的 .module 文件的函数中渲染存储在变量中的 html 数据

> ID：14100471
> 
> 赞同：1
> 
> 时间：2012-12-31T10:37:16.383
> 
> 标签：php, drupal-7

我刚开始使用drupal，对流程有点困惑。`$var = "<div>Render in View</div>"`我的 .module 文件中的函数中有一个变量。如何在 page.tpl.php 文件中呈现这个确切的 html？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T20:46:29.003

这可能有效： http: [//api.drupal.org/api/drupal/modules%21system%21theme.api.php/function/hook_preprocess/7](http://api.drupal.org/api/drupal/modules%21system%21theme.api.php/function/hook_preprocess/7)

```
function mymodule_preprocess(&$variables, $hook) {
  if ($hook == 'page') {
    $variables['my_custom_page_var'] = '<div>Render in page.tpl.php</div>';
  }
} 
```

或使用动态挂钩名称

```
function mymodule_preprocess_page(&$variables) {
  $variables['my_custom_page_var'] = '<div>Render in page.tpl.php</div>';
} 
```

那么这应该可以在 page.tpl.php 中作为`$my_custom_page_var`.

# ios - 使用带有 NSTimer 的 startMonitoringSignificantLocationChanges 来提高电池使用率

> ID：14100473
> 
> 赞同：3
> 
> 时间：2012-12-31T10:37:22.950
> 
> 标签：ios, optimization, nstimer, cllocationmanager

我目前正在使用其他开发人员启动的 iOS 应用程序。该应用需要监控位置变化，因为它需要以低精度（百米）了解用户位置。之前的位置实现是使用`NSTimer`and完成的`startUpdatingLocation`。执行是这样的：

```
// Fire each 10 seconds start updating location
self.timerPosition = [NSTimer scheduledTimerWithTimeInterval:ti
                                                      target:self
                                                    selector:@selector(location)
                                                    userInfo:nil
                                                     repeats:YES];
[self.timerPosition fire]; 
```

位置选择器执行此操作

```
// Configure & check location services enabled
...
self.locman.delegate = self;
self.locman.desiredAccuracy = kCLLocationAccuracyHundredMeters;
[self.locman startUpdatingLocation]; 
```

然后在位置管理器委托中

```
[manager stopUpdatingLocation]; 
```

但是阅读有关在 Apple 文档中获取用户位置的信息，似乎以低功耗获取位置的正确方法是使用`startMonitoringSignificantLocationChanges`.

`startMonitoringSignificantLocationChanges`我的问题是，将位置计时器与而不是相结合是一个好的决定`startUpdatingLocation`，还是一种无意义的方法？

当应用程序在后台时，我不需要获取位置，但我想知道当应用程序处于活动状态时用户何时更改了它的位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T20:35:12.833

我可以告诉你，当你使用低功耗 -startMonitoringSignificantLocationChanges 时，定时器不能也不需要。该方法仅在设备检测到更改时响应来自委托的回调。此位置检查不使用 GPS，它使用 Wifi 和已经发生的蜂窝塔三角测量。因此，通过使用这种方法，无需减慢速度以节省电池寿命。只需设置委托方法并做出相应的响应。

我不确定您实施位置的目的是什么，但区域监控也是另一种使用很少或不使用电池来获取位置更新的好方法。当您需要监控特定位置而不是一般用户位置时，区域监控会更有帮助。希望这可以解决问题。

# iphone - 带有原始数据导出的 iOS 的免费事件跟踪

> ID：14100474
> 
> 赞同：-1
> 
> 时间：2012-12-31T10:37:24.807
> 
> 标签：iphone, ios, ipad, google-analytics, analytics

我正在寻找一个免费的分析工具来跟踪 iOS 上的事件。但是，我对图表或汇总数据不感兴趣。我只需要这样的事件的原始日志：

> *   2012 年 1 月 1 日晚上 10:58：用户#3001 在视频 #1828 上单击“播放”
> *   2012 年 1 月 1 日晚上 11:08：用户 #2829 在视频 #1837 上单击“播放”
> *   2012 年 1 月 1 日晚上 11:27：用户 #2829 在视频 #1827 上单击“停止”
> *   2012 年 1 月 1 日晚上 11:37：用户 #3001 在视频 #1827 上单击“暂停”
> *   ......

我看过[Flurry](http://www.flurry.com/flurry-analytics.html)，但它们似乎只支持聚合数据。同样，[Google Analytics](https://developers.google.com/analytics/devguides/collection/ios/)的文档也没有提到原始数据导出。[Localytics](http://www.localytics.com/plans/)上的免费计划不支持事件跟踪。

是否有任何移动分析服务提供可访问原始事件数据的免费计划？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T17:48:03.507

Flurry 确实包括记录事件的能力。看看`+ (void)logEvent:(NSString *)eventName withParameters:(NSDictionary *)parameters;`。`NSDictionary`可以包括您指定的信息类型。

# extjs4 - 如何在不更改按钮形状的情况下提供指向按钮的链接？

> ID：14100480
> 
> 赞同：1
> 
> 时间：2012-12-31T10:38:07.950
> 
> 标签：extjs4

我试图在 extJs 4 中创建按钮。但是由于添加了属性 href 和 hrefTarget 它改变了它的形状。我应该怎么做才能给我的 Button 提供链接而不将我的按钮作为锚标记？实际上我想在按钮点击时打开新标签..

```
 var startButton = Ext.create('Ext.Button', {
                text:'Start',
                id: 'startButton',
                href : 'http://www.google.com',
                hrefTarget: '_blank',
                baseCls:'deviceAuthenticationButtonCls button-link',
                handler : function() {                                          
                                        console.log(Ext.getCmp('startButton'));
                                        console.log("Form ",form.getForm().getValues());
                                        form.getForm().setValues([
                                                                   {id:'First', value: "0006660767C7"},
                                                                   {id:'Second', value: "00066607644D"}
                                                                   ]);
                                        var data = form.getForm().getValues();
                                        console.log("Data To Send :- ",data);
                                        form.getForm().submit({
                                            url: './mmaGlove/',
                                            method:'POST', 
                                            params : {
                                                deviceAuthenticationData: JSON.stringify(data)

                                            },
                                            success: function(){                                                                                                        
                                                window.location = "http://www.google.com";                                                                                                                                          
                                            },
                                            failure : function(){
                                                alert('Got Error..');
                                            }
                                        });                                 
                }

        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-22T19:02:59.130

也许您可以在函数处理程序中重定向：

```
function() { window.location = "http://www.sencha.com" } 
```

... 例如。在这种情况下，您没有设置 href 属性，因此按钮不会成为`<a></a>`标签。

# android - 如何更改 android 中的软键盘“Enter”按钮文本？

> ID：14100482
> 
> 赞同：7
> 
> 时间：2012-12-31T10:38:17.993
> 
> 标签：android, android-keypad

我想将软键盘设置为“输入”键文本为“完成”。有什么办法可以改变安卓设备软键盘的回车键的文字吗？请建议是否有人有任何想法。

先感谢您。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-31T10:40:09.513

在 XML 中用于`editText`put

```
android:imeOptions="actionDone" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-11-01T09:59:54.353

```
 Apply inputType and imeOptions tag in EditText. Here inputType property is the type of data to be inserted and imeOptions is the action. this action may be go to next edittext, search, enter etc. This property change the icon on bottom right corner of the soft keyboard.

 <EditText
            android:id="@+id/username"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:inputType="text"
            android:hint="user name" />

        <EditText
            android:id="@+id/password"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:hint="password"
            android:inputType="numberPassword"
            android:imeOptions="actionSearch"/> 
```

Java 代码

```
 EditText userName = findViewById(R.id.username);
                EditText password = findViewById(R.id.password);

// Set the action listener on editText

            userName.setOnEditorActionListener(editorActionListener);
            password.setOnEditorActionListener(editorActionListener);
        }

 // and based on the emeOptions define in EditText add listeners when the 
 //enter key key pressed in softKeyboad 

        private TextView.OnEditorActionListener editorActionListener = new TextView.OnEditorActionListener() {
            @Override
            public boolean onEditorAction(TextView v, int actionId, KeyEvent event) {
                switch (actionId){
                     case EditorInfo.IME_ACTION_NEXT:
                        Toast.makeText(MainActivity.this, "Next", Toast.LENGTH_SHORT).show();
                        break;

                    case EditorInfo.IME_ACTION_SEARCH:
                        Toast.makeText(MainActivity.this, "SEARCH", Toast.LENGTH_SHORT).show();
                        break;
                }
                return false;
            }
        }; 
```

# c# - 如何在 datalist 模板项中将 System.Drawing.Image 设置为 System.ui.WebControls.Image

> ID：14100486
> 
> 赞同：0
> 
> 时间：2012-12-31T10:38:50.150
> 
> 标签：c#, asp.net, datalist, system.drawing

我正在制作一个书店网站。我使用 Visual Studio 2010 和 MS SQL 数据库。我有关于书籍的图片。我在数据库中有一个 Book 表，并且该表中有一个图像列。

我将这些图像（以字节数组格式）保存在数据库中。

我在 Windows 窗体应用程序中对其进行了测试，一切正常。我的意思是我可以检索图像并将其保存到数据库中。当我从数据库中检索它们时，我将它们（以 System.Drawing.Image 格式）保存在 Book 类中。

```
 public Book
    {
          private int id;
          private System.Drawing.Image image;
          // name and other .. informations,  constructor, get and set methods;
    }

    public BookLayer
    {
           // after call this method i can get all informations from database
           public static List<Book> getBooks()
           {
            }
    } 
```

我在 Asp.net 4 Web 项目中使用 datalist 和 objectdatasource。我为 objectdatasource 编写了 Book 和 BookLayer 类。我可以在数据列表中显示除图像之外的所有信息。因为图像是 Book 类中的 System.Drawing.Image，但图像是 Datalist 模板项中的 System.ui.WebControls.Image。格式不同。我怎样才能做到这一点 ？那是错的吗？请给我任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T12:01:03.020

是的，使用处理程序。您可以像添加模板字段一样

```
 <ItemTemplate>
<img border="2" width="150px" src="../images/loading.gif" onload="getpic(this,'<%# Eval("bkid")%>');"/>
</ItemTemplate> 
```

使用以下 java 脚本函数 getpic(img, pid) {

```
try {
img.onload = null;
img.src = '../Getimage.ashx?id=' + pid;
} catch (e) {
alert(e);
}
}
</script> 
```

在你的 getimage.ashx

```
byte[] imageBytes = ;// ToDOget your byte
            Bitmap newBmp = ConvertToBitmap(imageBytes);
            if (newBmp != null)
            {
                newBmp.Save(context.Response.OutputStream, System.Drawing.Imaging.ImageFormat.Jpeg);
                newBmp.Dispose();
            } 
```

# php - 如何使用 php 和 mysql 计算广告发布时间

> ID：14100488
> 
> 赞同：0
> 
> 时间：2012-12-31T10:39:07.417
> 
> 标签：php, mysql

大家好， 有人可以告诉我如何计算在线帖子的时间。意味着我有一个广告发布网站，我想计算如何计算发布广告的在线时间，比如

2 天不见广告在线 3 天不见广告在线

这是一个例子 [http://www.buyandsell.ie/motors/classic-cars/kerry/head-gasket-sealer-3](http://www.buyandsell.ie/motors/classic-cars/kerry/head-gasket-sealer-3)

你可以在这个网站上看到，在线时间是广告发布后的 9 天。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T10:49:08.597

假设您在圣诞节发布了广告。日期在 mysql 中保存为`2012-12-25`. 现在你想显示它已经发布了多少天。像这样使用[DateTime](http://php.net/DateTime)，[DateInterval](http://php.net/DateInterval)类。

```
$d = DateTime::createFromFormat("Y-m-d", "2012-12-25");
$interval = $d->diff(new DateTime());
echo $interval->format("%a days"); // echos '6 days' 
```

查看更多实际[代码](http://codepad.viper-7.com/dFzrIz)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-31T10:40:49.040

```
<?php

//time() will give current time and
//$time will have the time from database when the post was posted on your site.
$time_difference = time() - $time ;

//calculate the difference and show accordingly.
$seconds = $time_difference ;
$minutes = round($time_difference / 60 );
$hours = round($time_difference / 3600 );
$days = round($time_difference / 86400 );
$weeks = round($time_difference / 604800 );
$months = round($time_difference / 2419200 );
$years = round($time_difference / 29030400 );
if($seconds <= 60)
{
    echo "<font id='big'>a few seconds ago</font>";
}
//Minutes
else if($minutes <=60)
{
    if ($minutes==1) {
        echo "1 minute ago";
    }
    else {
        echo $minutes." minutes ago";
    }
}
else if($hours <=24) {
    if ($hours==1) {
        echo "1 hour ago";
    }
    else {
        echo $hours." hours ago";
    }
}
else if($days <= 7)
{
    if ($days==1) {
        echo "Yesterday";
    }
    else {
        echo $days." days ago";
    }
}
else if($weeks <= 4)
{
    if ($weeks==1) {
        echo "1 week ago";
    }
    else {
        echo $weeks." weeks ago";
    }
}
else if($months <=12)
{
    if ($months==1) {
        echo "1 month ago";
    }
    else {
        echo $months." months ago";
    }
}
else
{
    if ($years==1) {
        echo "1 year ago";
    }
    else {
        echo $years." years ago";
   }
}
?> 
```

# java - 检查 Url 是指文件还是目录。(HTTP)

> ID：14100489
> 
> 赞同：6
> 
> 时间：2012-12-31T10:39:16.840
> 
> 标签：java, android, file, url

如何确定 url 是指文件还是目录。链接[http://example.com/test.txt](http://example.com/test.txt)应该返回它是一个文件[http://example.com/dir/](http://example.com/dir/)是一个目录

我知道您可以使用 Uri 类执行此操作，但此对象 IsFile 函数仅适用于 file:/// 方案。我正在使用 http:// 方案。有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-03-14T23:51:33.930

我不确定为什么这个问题很长一段时间都没有得到回答/被忽视。我在服务器端 java 中遇到了同样的情况（估计 Android 风格的情况类似）。唯一的输入信息是资源的 URL，我们需要判断资源是目录还是文件。所以这是我的解决方案。

```
if ("file".equals(resourceUrl.getProtocol())
    && new File(resourceUrl.toURI()).isDirectory()) {
    // it's a directory
} 
```

希望这对下一位读者有所帮助。

注意：请参阅@awwsmm 评论。提供上述答案时，这是我的假设。基本上，测试远程资源是否是目录或任何东西是没有意义的。完全由站点决定为每个请求返回什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-24T15:07:12.153

它不起作用，因为协议是 http:// 而不是 file://。

```
 class TestURL{
   public static boolean isDirectory(URL resourceUrl){
     if ("file".equals(resourceUrl.getProtocol())
       && new File(resourceUrl.toURI()).isDirectory()) {
        true;
     }
     return false;
   }
   public static void main(String[] args){
     System.out.println(TestURL.isDirectory("http://example.com/mydir/"));
   }
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-20T17:03:45.953

我认为目录`http://example.com/some/dir`会重定向到`http://example.com/some/dir/`，文件不会。

即可以检查`Location`HEAD 响应中的 http 字段：

```
$ curl -I http://example.com/some/dir | grep Location
Location: http://example.com/some/dir/ 
```

# android - 是否可以在android上运行java servlet

> ID：14100491
> 
> 赞同：1
> 
> 时间：2012-12-31T10:39:29.513
> 
> 标签：android

我写了一个 servlet，我想在我的 android 手机上运行它。这可能吗？如果不是将此 servlet 合并到我的 android 手机上的最简单方法是什么？

简而言之，我可以在android中使用servlet吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T11:01:30.757

Servlet 是为 Web 应用程序设计的，您可以最好地将 servlet 中的逻辑分离到[POJO](http://en.wikipedia.org/wiki/Plain_Old_Java_Object)中，然后您可以使用此 POJO 在 Android 活动组件中正确执行。但是，如果您只想从您的 Android 执行 Servlet，这就像一个 URL 调用..那么您可以使用[Webview](https://developer.android.com/reference/android/webkit/WebView.html)组件...在这种情况下，Servlet 仍在服务器中执行，而不是在您的设备本身。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T10:45:21.820

您可以尝试在 android [https://code.google.com/p/i-jetty/](https://code.google.com/p/i-jetty/)上将 jetty 作为应用程序服务器运行。另外看看这个线程：[I-Jetty 或 Jetty](https://stackoverflow.com/questions/3391019/i-jetty-or-jetty)

# r - 线框：具有多个表面和透明度的图例颜色

> ID：14100494
> 
> 赞同：4
> 
> 时间：2012-12-31T10:39:38.857
> 
> 标签：r, graphics, lattice, wireframe

以下代码使用 lattice 的线框功能绘制了 3 个彩色平面。但是，我无法理解为什么通过设置颜色组不会改变图例。我尝试手动完成，但最终只更改了文本颜色。顺便问一下，有谁也知道如何使表面透明 70%？

```
library(lattice)
library(akima)

SurfaceData <- data.frame(
               x=rep(seq(0,100,length.out=10),each=10,times=3),
               y=rep(rep(seq(0,100,length.out=10),times=10),times=3),
               z=c(rep(25,100),seq(30,70,length.out=100),seq(95,75,length.out=100)),
               type=factor(rep(c("A","B","C"),each=100))
                          )

wireframe(z~x*y,data=SurfaceData,group=type,
          col.groups=c("red","green","blue"),
          scales = list(arrows=FALSE, col="black",font=10),
          xlab = list("Variable X",rot=30),
          ylab = list("Variable Y",rot=-30),
          zlab = list("Variable Z",rot=90),
          zlim = c(0,100),
          #auto.key=TRUE,
          auto.key=list(text=c("A","B","C"),col=c("red","green","blue"),lines=TRUE),
          par.settings = list(axis.line = list(col = "transparent")),
          ) 
```

结果：

![在此处输入图像描述](../Images/75cdd95b1521a01cf8c7fe79567b75a0.png)

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-31T11:07:37.633

要更改线条的颜色，您应该替换`auto.key`并`key`提供文本和线条的值列表。

```
wireframe(z~x*y,data=SurfaceData,group=type,
          col.groups=c("red","green","blue"),
          scales = list(arrows=FALSE, col="black",font=10),
          xlab = list("Variable X",rot=30),
          ylab = list("Variable Y",rot=-30),
          zlab = list("Variable Z",rot=90),
          zlim = c(0,100),
          key=list(text=list(c("A","B","C"),col=c("red","green","blue")),
                   lines=list(lty=c(1,1,1),col=c("red","green","blue"))),
          par.settings = list(axis.line = list(col = "transparent")),
) 
```

要使颜色透明，您可以使用 function `rgb()`。`mycolors.trans`在这里，我定义了包含透明颜色和`mycolors`相同颜色但对于图例条目不透明的新变量。

```
mycolors.trans = rgb(c(255,0,0), 
               c(0,255,0), 
               c(0,0,255),alpha = 70,maxColorValue = 255) 

mycolors = rgb(c(255,0,0), 
                     c(0,255,0), 
                     c(0,0,255),maxColorValue = 255) 

wireframe(z~x*y,data=SurfaceData,group=type,
          col.groups=mycolors.trans,
          scales = list(arrows=FALSE, col="black",font=10),
          xlab = list("Variable X",rot=30),
          ylab = list("Variable Y",rot=-30),
          zlab = list("Variable Z",rot=90),
          zlim = c(0,100),
          #auto.key=TRUE,
          key=list(text=list(c("A","B","C"),col=mycolors),
                   lines=list(lty=c(1,1,1),col=mycolors)),
          par.settings = list(axis.line = list(col = "transparent")),
) 
```

![在此处输入图像描述](../Images/e4cbf8e074398a3fbfa0b8a0680cdad2.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T11:21:24.830

看 ？`simpleTheme`, 对于透明部分

```
 par.settings =  simpleTheme(alpha = 0.7) 
```

# c++ - 黑莓10中ScrollView的视口大小调整

> ID：14100496
> 
> 赞同：1
> 
> 时间：2012-12-31T10:39:52.727
> 
> 标签：c++, scrollview, viewport, blackberry-10

嗨，我需要调整 ScrollView 的视口，使其显示在屏幕中间。我尝试了所有我能想到的属性。

```
 Page *page = new Page();
Container *container = new Container();
AbsoluteLayout *absoluteLayout = new AbsoluteLayout();
container->setLayout(absoluteLayout);
for(int y=0;y<1536;y+=256)
{
    for(int x=0;x<1536;x+=256)
    {
        AbsoluteLayoutProperties *imageProperties = AbsoluteLayoutProperties::create().x(x).y(y);
        ImageView *imageView = ImageView::create().layoutProperties(imageProperties);
        imageView->setImage(Image("assets/tile256.jpg"));
        container->add(imageView);
    }
}
ScrollView *scrollView = ScrollView::create(container).preferredSize(300,300);
scrollView->setHorizontalAlignment(HorizontalAlignment::Center);
scrollView->setVerticalAlignment(VerticalAlignment::Center);
scrollView->setMaxHeight(300);
scrollView->setMaxWidth(300);
ScrollViewProperties *scrollViewProperties = scrollView->scrollViewProperties();
scrollViewProperties->setScrollMode(ScrollMode::Both);
scrollView->zoomToPoint(300,500,1);
QRectF qRectf = scrollView->viewableArea();
qRectf.setX(300);
qRectf.setY(300);
page->setContent(scrollView);
app->setScene(page); 
```

这是我尝试过的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T13:06:17.313

要将控件停靠在特定区域，请设置容器 DockLayout 的布局并在其中添加控件。因此，即使控件展开/收缩，它也会停靠在指定区域。在这里，在 Container 中添加 ScrollView 并将该容器设置为页面的内容。

```
Page *page = new Page();

Container *mainContainer = new Container(); //This is the main container of the page
mainContainer->setLayout(new DockLayout()); //To dock scroll view at center of the screen

Container *container = new Container();
...
...
...
mainContainer->add(scrollView);//Add scroll view to the main container
page->setContent(mainContainer);//Set main container as the content
app->setScene(page); 
```

# iphone - 直接使用 NSFetchedResultsController vs NSManagedObjectContext 获取

> ID：14100505
> 
> 赞同：0
> 
> 时间：2012-12-31T10:40:49.887
> 
> 标签：iphone, cocoa-touch, core-data, nsfetchedresultscontroller, nsmanagedobjectcontext

我遇到了一个问题并且可以解决它，但我很想知道究竟是什么原因。

我有一个共享类，它应该给我一个员工的休假/休假信息。我的实用程序类中有一个获取请求，它提供了获取对象的休假信息。

这部分代码负责获取叶子：

```
#define FETCH_DIRECTLY 1
-(NSArray*)targetHoursArrayOnDate:(NSDate*)inDate
{
#if FETCH_DIRECTLY
    NSFetchRequest *targetHoursFR = [CSUtilities fetchRequestForVacationOrLeave];
    CSAppDelegate *appDelegate = [[UIApplication sharedApplication] delegate];
    NSArray *arrayOfTargetHours = [[appDelegate managedObjectContext] executeFetchRequest:targetHoursFR
                                                      error:NULL];
#else
    NSArray *arrayOfTargetHours = [self.targetHoursFRC fetchedObjects];
#endif
    NSPredicate *checkDatePredicate = [NSPredicate predicateWithBlock:^BOOL(id evaluatedObject, NSDictionary *bindings)
                                       {
                                           BOOL dateExists = NO;
                                           if ([evaluatedObject isKindOfClass:[CSTargetHours class]])
                                           {
                                               CSTargetHours *aTargetHour = (CSTargetHours*)evaluatedObject;
                                               if ([aTargetHour.leaveDate isEqualToDate:inDate])
                                                   dateExists = YES;
                                           }
                                           return dateExists;
                                       }];

    NSArray *targetHoursOnQueriedDate = [arrayOfTargetHours filteredArrayUsingPredicate:checkDatePredicate];
    if (0==[targetHoursOnQueriedDate count])
        targetHoursOnQueriedDate = nil;
    return targetHoursOnQueriedDate;
} 
```

请注意，FETCH_DIRECTLY 是我怀疑的场景。如果我使用 FRC 来获取叶子，它会失败。而如果我直接使用 App 委托的 managedObjectContext，它会成功获取对象！这让我很困惑。

创建我的 FRC 的方式在这里：

```
@synthesize targetHoursFRC = targetHoursFRC_;
-(NSFetchedResultsController*)targetHoursFRC
{
    if (nil==targetHoursFRC_)
    {
        NSFetchRequest *targetHoursFR = [CSUtilities fetchRequestForVacationOrLeave];
        CSAppDelegate *appDelegate = [[UIApplication sharedApplication] delegate];
        targetHoursFRC_ = [[NSFetchedResultsController alloc] initWithFetchRequest:targetHoursFR
                                                              managedObjectContext:appDelegate.managedObjectContext
                                                                sectionNameKeyPath:nil
                                                                         cacheName:nil];
    }
    return targetHoursFRC_;
}

- (id)init
{
    self = [super init];
    if (self) {
        [self.targetHoursFRC performFetch:NULL];
    }
    return self;
} 
```

我在这里唯一遗漏的是，我没有设置 FRC 的代表。但我不需要它，因为我对听这些变化不感兴趣。相反，当从其他模块询问时，请假/假期信息应该准备好。

coredata 的内部结构是否以某种方式设计为仅在 FRC 有任何委托时才通知 FRC 更改？失败了，无论我们何时触发 FRC 上的 -fetchedObjects 调用，它都会给出一些旧的结果集？

谢谢，拉吉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T11:06:28.713

如果您没有为 FRC 设置委托，并且至少实现了 FRC 委托功能之一（例如`controllerDidChangeContent:`），则 FRC 以“无跟踪模式”运行。

这意味着将始终返回初始操作`fetchedObjects`的结果集。`performFetch:`

（请参阅文档中的“概述”部分`NSFetchedResultsController`）。

# iphone - tableView 属性声明或链接

> ID：14100507
> 
> 赞同：0
> 
> 时间：2012-12-31T10:40:57.637
> 
> 标签：iphone, xcode, cocoa-touch, properties, tableview

我有一个带有 SearchDisplayController 和 TableView 的视图（SearchView）

在.h中：

```
@property (nonatomic, retain) IBOutlet UITableView *tableView; 
```

我将 .xib 文件中的这个链接到 TableView：> ![在此处查看链接](../Images/34a73cb41fed6b6447e85ea9bfd36619.png)

然后在 cellforrow 中：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath

if(listGoal){

    Goal *goalz = nil;

    if (tableView == self.searchDisplayController.searchResultsTableView)
    {
        goalz = [self.filteredListContent objectAtIndex:indexPath.row];
        cell.textLabel.text = goalz.goalNaam;
    }
    else
    {

        goalz = [arr objectAtIndex:indexPath.row];
        cell.textLabel.text = goalz.goalNaam;
        cell.detailTextLabel.text = goalz.goalBeschrijving;
    }
} 
```

我测试我是否需要filteredListContent 或原始数组arr。（因为我使用的是 SearchDisplayController）这是有效的。

在另一种方法中，

```
 if (tableView == self.searchDisplayController.searchResultsTableView) 
```

不再工作了，所以我尝试使用

```
self.tableView 
```

但这也不起作用

```
 (UITableView *)tableView 
```

也不工作。我知道我的财产声明或链接有问题，但有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T10:52:39.557

One way you can access search view in your custom method would be keep a strong reference to your search view when you get it. But I am NOT sure whether it would be valid across multiple searches.

May be you can just have a BOOL variable set and use that in your custom method. I think you would not be able to access search view in your custom method otherwise.

# php - 仅使用 Phing 部署较新的文件

> ID：14100508
> 
> 赞同：0
> 
> 时间：2012-12-31T10:40:57.513
> 
> 标签：php, phing

我正在使用 Phing 作为我正在开发的网站的构建工具。我有一个在本地主机上运行的服务器来测试我自己的系统上的东西，我在它最终要运行的服务器上有一个测试环境。部署到该测试环境目前是通过对所有构建的文件进行 tar 处理，将 tar 文件上传到服务器并在那里解压缩来完成的。

但是，由于我还使用了很多图像，所以这需要很长时间；本地部署需要 10 秒，远程部署需要 4 分钟。有什么方法可以比较 2 个目录中的文件，并且只 tar 一个目录中较新的文件（这样我可以保留构建目录的卷影副本以比较文件日期）或另一种最佳实践？

我一直在考虑尝试的其他方法是使用 git 上传网站。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T15:03:50.157

昨天我遇到了同样的问题，这个答案解决了我的问题

[Phing - 使用 FTP 部署，但仅在大小更改时覆盖](https://stackoverflow.com/questions/7728206/phing-deploy-with-ftp-but-only-overwrite-when-size-has-changed/12342733#12342733)

# asp.net-mvc-4 - 由数据库中的多个表组成的模型的数据注释

> ID：14100510
> 
> 赞同：0
> 
> 时间：2012-12-31T10:41:04.750
> 
> 标签：asp.net-mvc-4, data-annotations, models, validationsummary

我有一个显示数据库中 2 个表的字段的表单。我想使用 MVC4 中的数据注释模型验证技术来验证这个表单。我很困惑是否应该将数据注释验证属性应用于单个模型（表），或者我应该创建由两个表中的字段组成的单独模型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T10:46:28.153

您应该创建一个新模型，其中包含要在视图上显示的信息。这个特定的模型有一个名字：它叫做**view model**。您应该始终将视图模型从控制器操作传递给您的视图，并且您的控制器操作应始终将视图模型作为参数。然后，您可以使用验证属性装饰此视图模型上的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T12:37:38.900

你可以做这两件事。你可以装饰你的领域模型类和视图模型。两件事都是正确的。问题是对于您的视图，最好使用视图模型而不是模型类。无需在您的视图中公开整个域模型

只需添加`using System.ComponentModel.DataAnnotations;`命名空间并在每个属性上添加您需要的属性。

例如：

```
public class BankAccount 
{
    [Required]
    public Person Person { get; set; }
    [Required]
    public AccountType AccountType { get; set; }
    [Required, StringLength(256)]
    public string BankName { get; set; }
} 
```

# objective-c - 如何从单独的 IBAction 检测 UISegmentedControl 的变化

> ID：14100512
> 
> 赞同：13
> 
> 时间：2012-12-31T10:41:48.137
> 
> 标签：objective-c, ios, uisegmentedcontrol

我有一个`UISegmentedControl`包含三个部分的按钮。在`ViewController.m`这种情况下工作得很好——按下按钮会触发正确的方法。

我还有另一个单独`UIButton`的地方，当它被按下时，它需要首先检查`UISegmentedControl`（查看当前按下哪个按钮）的状态，然后根据该段值触发一个方法。

这是我单独的代码`UIButton`。按钮本身正在工作，但我似乎无法弄清楚如何获取`UISegmentedControl`.

非常感谢您在这里提供的任何帮助。我是新手`OBJ-C`。我知道如何在 中执行此操作`VisualBasic`，因此最详细的答案将不胜感激，因为我需要知道“为什么”。谢谢你。

```
- (IBAction)decodeButton:(id)sender {
    UISegmentedControl *segment = [UISegmentedControl alloc];  // THIS DOES NOT WORK.

    if (segment.selectedSegmentIndex == 0) {
                decode(textToDecode);
    } else if(segment.selectedSegmentIndex == 1) {
                decode1(textToDecode);
    } else if(segment.selectedSegmentIndex == 2) {
                decode2(textToDecode); 
    }
} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-31T11:08:12.457

[这是](http://www.mobisoftinfotech.com/blog/iphone/iphone-segmented-controluisegmentedcontrol-tutorial/)[在 iOS 中使用 UISegmentedControl](http://www.mobisoftinfotech.com/blog/iphone/iphone-segmented-controluisegmentedcontrol-tutorial/)的教程。

只需创建一个参考对象并将其正确连接到文件所有者。

```
IBOutlet UISegmentedControl *segmentedControl; 
```

然后设置属性

```
@property (strong, nonatomic) IBOutlet UISegmentedControl * segmentedControl; 
```

在 .m 文件中合成

```
@synthesize segmentedControl; 
```

现在您可以随时访问选定的索引。

```
- (IBAction)decodeButton:(id)sender {

    if (segmentedControl.selectedSegmentIndex == 0) {
                decode(textToDecode);
    } else if(segmentedControl.selectedSegmentIndex == 1) {
                decode1(textToDecode);
    } else if(segmentedControl.selectedSegmentIndex == 2) {
                decode2(textToDecode); 
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-31T11:09:37.723

您的代码`alloc`每次`UISegmentedControl`在按钮按下动作。因此，使用以下代码进行`sUISegmentedControl`创建及其操作。

```
 SegmentChangeView=[[UISegmentedControl alloc]initWithItems:[NSArray arrayWithObjects:@"Segment1",@"Segment2",@"Segment3",nil]];
    SegmentChangeView.frame=CGRectMake(5, 44, self.view.bounds.size.width-10, 33);
    SegmentChangeView.selectedSegmentIndex=0;
    SegmentChangeView.segmentedControlStyle=UISegmentedControlStyleBar;
    SegmentChangeView.momentary = YES;
    [SegmentChangeView setTintColor:[UIColor blackColor]];
    NSDictionary *attributes =[NSDictionary dictionaryWithObjectsAndKeys:[UIFont fontWithName:@"Arial" size:13],UITextAttributeFont,nil];
    [SegmentChangeView setTitleTextAttributes:attributes forState:UIControlStateNormal];
    [SegmentChangeView addTarget:self action:@selector(SegmentChangeViewValueChanged:) forControlEvents:UIControlEventValueChanged];
    SegmentChangeView.autoresizingMask=UIViewAutoresizingFlexibleWidth|UIViewAutoresizingFlexibleBottomMargin;
    [self.view addSubview:SegmentChangeView];

-(IBAction)SegmentChangeViewValueChanged:(UISegmentedControl *)SControl
{
    if (SControl.selectedSegmentIndex==0)
    {
          decode(textToDecode);
    }
    else if (SControl.selectedSegmentIndex==1)
    {
            decode1(textToDecode);
    }
else if (SControl.selectedSegmentIndex==2)
    {
            decode2(textToDecode);
    }

} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-31T11:07:55.197

您应该`UISegmentedControl *segment = [UISegmentedControl alloc] ;`从您的代码中删除，因为它每次都分配一个新的 UISegmentedControl 实例，而不是，

`UISegmentController`为你创造一个出口

```
@property (strong, nonatomic) IBOutlet UISegmentedControl * segment; 
```

然后稍后在`viewcontroller.m`文件中的任何位置，您都可以使用

```
segment.selectedSegmentIndex; 
```

希望这是有道理的，

问候

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-10-05T10:44:23.427

**像这样试试**

```
- (IBAction)segmentedControlChanged:(id)sender
{
   UISegmentedControl *s = (UISegmentedControl *)sender;

   if (s.selectedSegmentIndex == 1)
   {
      //code
   }
   else
   {
      //code
   }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-31T10:50:28.997

此代码意味着您在每次点击时创建一个新对象

```
 UISegmentedControl *segment = [UISegmentedControl alloc] ; 
```

你必须做的事情拿走你的`IBOutlet`（财产）`segmentedControl`然后我会为你工作。不要在按钮方法中创建新对象。当您制作 IBOutlet 时，它将与 at 链接，`segmentControl`并且您的代码将在那时起作用。谢谢

# php - 用复选框删除多行

> ID：14100514
> 
> 赞同：0
> 
> 时间：2012-12-31T10:42:10.340
> 
> 标签：php, jquery, mysql

我有以下 jquery 代码来删除多行表：

```
$(function(){
    $("a.delete").click(function(){
        page=$(this).attr("href");
        ids=new Array()
        a=0;
        $("input.chk:checked").each(function(){
            ids[a]=$(this).val();
            a++;
        })

        if(confirm("Are you sure want to delete?")){

                el=$(this)
                $.ajax({
                    url:page,
                    data:"id="+ids,
                    type:"GET",
                    success:function(res)
                    {
                        if(res==1)
                        {
                            $("input.chk:checked").each(function(){
                                $(this).parent().parent().remove();
                            })
                        }
                    }
                })
        }
        return false;
    })
}) 
```

复选框（名称为 question_id 的值是可以的，复选框在 while 循环内）：

```
<input name="chk[]" class="chk" type="checkbox" value="'<?php echo $row1['question_id'];?>'" /> 
```

删除链接（循环外）：

```
<a href="delete_quiz_questions.php" class="delete">delete</a> 
```

和删除记录的php页面：

```
<?php
   session_start();
   include('connect_db.php');

   $delete_id = $_GET['id'];

   $id = count($delete_id);

   if (count($id) > 0){
       foreach ($delete_id as $id_d){
           $sql = "DELETE FROM quiz_questions WHERE id_questions ='$id_d' AND id_quiz ='".$_SESSION['quiz_id']."'";
           $delete = mysql_query($sql);
       }
   }

?> 
```

当我单击 href 按钮删除记录时，显示此消息

```
Notice: Undefined index: id in C:\wamp\www\diplomatiki\delete_quiz_questions.php on line 5

Warning: Invalid argument supplied for foreach() in C:\wamp\www\diplomatiki\delete_quiz_questions.php on line 11

Notice: Undefined variable: delete in C:\wamp\www\diplomatiki\delete_quiz_questions.php on line 18 
```

你能帮我吗？？

发送数据的php页面

```
$result=mysql_query("SELECT * FROM quiz_questions WHERE id_quiz='".$quiz_id."' ");

    if(mysql_num_rows($result)>0){
    $index = 1;

    while($row=mysql_fetch_array($result))
    {

    $result1=mysql_query("SELECT * FROM questions WHERE question_id ='".$row['id_questions']."'");

    if(mysql_num_rows($result1)>0){

    while($row1=mysql_fetch_array($result1))
    {

   $result2=mysql_query("SELECT * FROM question_".$row1['type']." WHERE id_question='".$row1['question_id']."' LIMIT 1");
   if(mysql_num_rows($result2)>0){
   $row2=mysql_fetch_array($result2);
    ?>
    <tr>
      <td><?php echo $index++; ?> </td>
      <td><input name="chk[]" class="chk" type="checkbox" value="'<?php echo $row1['question_id'];?>'" /></td>
      <td><?php echo $row1['type']; ?></td>
      <td><?php echo $row2['question']; ?></td>

    </tr>
    <?php  }}

    }

}
echo '<input type="hidden" name="quiz_id" id="quiz_id" style="text-align: center" value="' . $quiz_id . '" size=5/>';

?>

  </tbody>
</table>
<caption><a href="delete_quiz_questions.php" class="delete">delete</a></caption>

<?php } else echo 'sorry'; ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T10:49:31.483

您必须使用`explode`将 ID 字符串转换为`Array`.

```
$delete_id = explode(",", $_GET['id'])
$id = count($delete_id);
if (count($id) > 0) 
```

最初您必须这样做。

```
if (isset($_GET['id'])) { 
```

所以你不会得到任何`Notice`或`Warning`

```
session_start();
include('connect_db.php');

if (isset($_GET['id'])) {
   $delete_id = explode(",", $_GET['id'])

   $id = count($delete_id);

   if (count($id) > 0)
   {
       foreach ($delete_id as $id_d)
       {
                $sql = "DELETE FROM quiz_questions WHERE id_questions ='$id_d' AND id_quiz ='".$_SESSION['quiz_id']."'";
                $delete = mysql_query($sql);
       }
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T11:04:28.667

首先，您必须检查会话 quiz_id 是否存在。如果存在，您应该检查该会话是否分配了任何值。

# ravendb - 提升 AbstractMultiMapIndexCreationTask 支持的整个文档 使用 Reduce 功能？

> ID：14100518
> 
> 赞同：0
> 
> 时间：2012-12-31T10:42:36.687
> 
> 标签：ravendb

我正在尝试根据[此答案中讨论的](https://stackoverflow.com/questions/13863739/how-can-you-boost-documents-by-recency-in-ravendb#answer-13866033)最新发布时间来提升文档。

以下索引定义可以很好地创建一个填充了文章和食谱实体的索引。

```
public class TestIndex : AbstractMultiMapIndexCreationTask<Result>
{
    public TestIndex()
    {
        AddMap<Article>(docs => from doc in docs
                                where !doc.IsDeleted
                                select new Result
                                {
                                    Id            = doc.Id,
                                    Title         = doc.Title,
                                    DatePublished = doc.DatePublished
                                }.Boost(doc.DatePublished.Ticks / 1000000f));

        AddMap<Recipe>(docs => from doc in docs
                               where !doc.IsDeleted
                               select new Result
                               {
                                   Id            = doc.Id,
                                   Title         = doc.Title,
                                   DatePublished = doc.DatePublished
                               }.Boost(doc.DatePublished.Ticks / 100000f));
    }

    public override string IndexName
    {
        get { return "Tests/WithBoost"; }
    }
} 
```

当我尝试添加 Reduce 以将文档存储为`Result`项目时，索引停止生成任何结果。

```
public class TestIndex : AbstractMultiMapIndexCreationTask<Result>
{
    public TestIndex()
    {
        AddMap<Article>(docs => from doc in docs
                                where !doc.IsDeleted
                                select new Result
                                {
                                    Id            = doc.Id,
                                    Title         = doc.Title,
                                    DatePublished = doc.DatePublished
                                }.Boost(doc.DatePublished.Ticks / 100000f));

        AddMap<Recipe>(docs => from doc in docs
                               where !doc.IsDeleted
                               select new Result
                               {
                                   Id            = doc.Id,
                                   Title         = doc.Title,
                                   DatePublished = doc.DatePublished
                               }.Boost(doc.DatePublished.Ticks / 100000f));

        Reduce = docs => from doc in docs
                         group doc by doc.Id into g
                         select new Result
                         {
                             Id            = g.First().Id,
                             Title         = g.First().Title,
                             DatePublished = g.First().DatePublished
                         };
    }

    public override string IndexName
    {
        get { return "Tests/WithBoost"; }
    }
} 
```

**使用 Reduce 功能时是否支持提升文档`AbstractMultiMapIndexCreationTask<T>`？**

我的一个想法是`Boost()`返回 a `BoostedValue`，所以实际上是传递给 Reduce 表达式的集合`IEnumerable<BoostedValue>`而不是`IEnumerable<Result>`，因此不能针对输入编译 Reduce 表达式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T17:19:20.923

（这个答案从原始帖子中的评论中继承）

如果您只想按发布日期排序，请不要使用 boost - 使用`.OrderByDescending(x=> x.DatePublished)`。

如果您只是想知道如何查询组合的多图结果，您可以像这样轻松地做到这一点：

```
var results = session.Query<Result, TestIndex>()
                     .Search(x=> x.Title, "whatever")
                     .As<object>()
                     .ToList();

var articles = results.OfType<Article>();
var recipies = results.OfType<Recipe>(); 
```

我假设你想搜索，因为你正在提升。您还应该将可搜索字段标记为已分析，如文档所述[处](http://ravendb.net/docs/client-api/querying/linq-extensions/search)所述。

我还假设您希望将文章和食谱分成单独的列表。如果你不这样做，那么你可以直接使用对象列表。或者，如果您有一些它们都使用的基类或接口，那么您可以使用它而不是对象，如`.As<IWhatever>()`.

# javascript - 返回值未定义

> ID：14100521
> 
> 赞同：0
> 
> 时间：2012-12-31T10:42:43.860
> 
> 标签：javascript, jquery, cordova, jquery-mobile

我正在尝试使用 phonegap 实现抖动检测，不幸的是，我遇到了一个问题，即返回未定义的值。

这是我的代码片段：

```
function acc() {
var accOpt = { frequency: 1000 };   
watchPot = navigator.accelerometer.watchAcceleration(win, fail, accOpt);    
}

function win (acceleration) {

    var tiltLR = 0;
    var tiltFB = 0;

    var facingUp = -1;
    if (acceleration.z > 0) {
      facingUp = +1;
    }

    tiltLR = Math.round(((acceleration.x) / 9.81) * -90);
    tiltFB = Math.round(((acceleration.y + 9.81) / 9.81) * 90 * facingUp);

      previousReading = {
        x   :   null,
        y   :   null,
        z   :   null,
        lr  :   null,
        fb  :   null            
      };

      var changes = {};

      if (previousReading.x !== null) {
          changes.x = Math.abs(previousReading.x-acceleration.x);
          changes.y = Math.abs(previousReading.y-acceleration.y);
          changes.z = Math.abs(previousReading.z-acceleration.z);
          changes.lr = Math.abs(previousReading.lr-tiltLR);
          changes.fb = Math.abs(previousReading.fb-tiltFB);
      }

      previousReading = {
          x: acceleration.x,
          y: acceleration.y,
          z: acceleration.z,
          lr: tiltLR,
          fb: tiltFB
      };

    console.log('previousReading x: ' + previousReading.x + ' previousReading y: ' + previousReading.y + ' previousReading z: ' + previousReading.z+ ' previousReading lr: ' + tiltLR + ' previousReading fb: ' + tiltFB);

    console.log('changes x: ' + changes.x  + ' changes y: ' + changes.y + ' changes z: ' + changes.z + ' changes lr: ' + changes.lr + ' changes fb: ' + changes.fb);

    console.log(acceleration.x + ' ' + acceleration.y + ' ' + acceleration.z);

 } 
```

基本上，加速度 x、y、z 的值和先前读数的值都已正确记录在控制台中。

然而，问题在于changes.x、changes.y 和changes.z 的值，它们都出于某种原因返回未定义。

我也尝试检查 typeof(changes.x) 并且它也返回了 undefined 。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T10:46:05.333

根据您提供的代码，`changes.x, changes.y`并且`changes.z`未设置，因为 `if (previousReading.x !== null) {`将评估为 false，因为`previousReading.x`此处明确设置为 null：

```
 previousReading = {
    x   :   null,
    y   :   null,
    z   :   null,
    lr  :   null,
    fb  :   null            
  }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T10:45:40.483

好吧，你正在使用整数，所以使用这个：

```
 previousReading = {
    x   :   0,
    y   :   0,
    z   :   0,
    lr  :   0,
    fb  :   0            
  }; 
```

# stack - 反向波兰表示法Java

> ID：14100522
> 
> 赞同：0
> 
> 时间：2012-12-31T10:42:45.407
> 
> 标签：stack, switch-statement, case, token, rpn

我想制作反向波兰表示法算法，但我的代码不起作用。谁能解释我为什么？在我的代码中，我想使用字符，直到 "/+-*"tokens 。如果此标记是下一个，则进行操作，其中包含 in case 。

```
import java.util.Stack;
import java.util.StringTokenizer;

import javax.swing.JOptionPane;

public class ONP {

    public static void main(String[] args) {
        Stack<Double> stack = new Stack<Double>();
        double number1;
        double number2;

        String x = JOptionPane.showInputDialog("Tokens");
        StringTokenizer str = new StringTokenizer(x);

        while (str.hasMoreElements()) {
            str.nextElement();
            stack.push((Double) str.nextElement());

            for (int i = 0; i < x.length(); i++) {

                switch (x.charAt(i)) {
                case '+':
                    number1 = stack.pop();
                    number2 = stack.pop();
                    System.out.println(number1 + number2);
                    break;
                case '-':
                    number1 = stack.pop();
                    number2 = stack.pop();
                    System.out.println(number1 - number2);
                    break;
                case '/':
                    number1 = stack.pop();
                    number2 = stack.pop();
                    System.out.println(number1 / number2);
                    break;
                case '*':
                    number1 = stack.pop();
                    number2 = stack.pop();
                    System.out.println(number1 * number2);
                    break;
                }

            }
            System.out.println(stack.pop());
        }
    }

} 
```

我想在没有 StringBuilder 或类似的情况下编写它。

输入：

```
2 2 + 2 / 2 / 
```

输出 ：

```
(2+2) / 2 / 2 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T11:08:35.290

试试这个

```
String s1;  

while (str.hasMoreElements()) 
{ 
     s1 = str.nextElement();

     if(s1.equals("+") || s1.equals("-") || s1.equals("*") || s1.equals("/"))
     {
          switch (s1) 
          {
                case '+':
                    number1 = stack.pop();
                    number2 = stack.pop();
                    System.out.print(number1 + " + " + number2);
                    break;
                case '-':
                    number1 = stack.pop();
                    number2 = stack.pop();
                    System.out.print(number1 +" - "+ number2);
                    break;
                case '/':
                    number1 = stack.pop();
                    number2 = stack.pop();
                    System.out.print(number1 +" / "+ number2);
                    break;
                case '*':
                    number1 = stack.pop();
                    number2 = stack.pop();
                    System.out.print(number1 +" * "+ number2);
                    break;
                }
         }
         else
         {
                 stack.push(s1);
         }

    } 
```

代替

```
 while (str.hasMoreElements()) {
        str.nextElement();
        stack.push((Double) str.nextElement());

        for (int i = 0; i < x.length(); i++) {

            switch (x.charAt(i)) {
            case '+':
                number1 = stack.pop();
                number2 = stack.pop();
                System.out.println(number1 + number2);
                break;
            case '-':
                number1 = stack.pop();
                number2 = stack.pop();
                System.out.println(number1 - number2);
                break;
            case '/':
                number1 = stack.pop();
                number2 = stack.pop();
                System.out.println(number1 / number2);
                break;
            case '*':
                number1 = stack.pop();
                number2 = stack.pop();
                System.out.println(number1 * number2);
                break;
            }

        }
        System.out.println(stack.pop());
    } 
```

# php - 适用于 PHP 的 Freelancer API snowtigerlib Wrapper Class 不起作用

> ID：14100526
> 
> 赞同：0
> 
> 时间：2012-12-31T10:43:22.440
> 
> 标签：php, freelancer.com-api

我使用了 snowtigerlib freelancer api，它是一个 php 包装类。我从这个[链接下载了完整的代码](http://code.google.com/p/snowtigerlib/download/list)

然后我`SnowTigerLib_Config.inc`用我的密钥和秘密设置文件。然后我做了以下步骤：

1.  首先它转到以下[网址](http://www.sandbox.freelancer.com/users/api-token/auth.php?oauth_token=7740e3104f545e168d8880d850e333c95ff2b37b)。
    然后我用我的用户名和密码登录到沙盒。
2.  下一步，它去了以下[url](https://www.sandbox.freelancer.com/users/api-token/auth.php?oauth_token=47b9d304df6f67dc59430016f3f0038cb3e1213f)。
    这里 Authenticate API Access 被授权。
3.  在授权 API 访问之后，它进入了以下[url](https://www.sandbox.freelancer.com//users/api-token/onauth.php)

在这里它显示它已被授权并自动重定向到我的回调 url 并出现以下错误：

**错误**

```
Notice: Undefined index: token in ..........\callback.php on line 4
HTTP Error: http_code:401 in ...............\SnowTigerLib.php on line 455
Details: http://api.sandbox.freelancer.com/RequestAccessToken/requestAccessToken.xml?oauth_consumer_key=7484ba1fdfa9138ec77ead0c881966ad43f194ba&oauth_nonce=5a9b4e19b1fcd551e416d8e1fa86ab50&oauth_signature=LKRcVWNRdE%2BIzAzem2svR%2F0OiG8%3D&oauth_signature_method=HMAC-SHA1&oauth_timestamp=1356949656&oauth_verifier=4a24c84d5b49465a51ca990e2114945894896ed6&oauth_version=1.0 
```

如果有人知道这个问题，请给我答复。

# android - 用户没有资格购买 android inapp 购买

> ID：14100528
> 
> 赞同：4
> 
> 时间：2012-12-31T10:43:34.923
> 
> 标签：android, in-app-purchase, in-app-billing

我已经为 Android 应用开发了**InApp 购买。**

我的**APK 已签名**并上传到开发者控制台并创建一个订阅产品，该产品也已发布，我的 APK 处于草稿模式并创建一个测试邮件帐户。

如果我使用测试产品，它工作正常，但当我使用真实产品时，它的显示

> `User is not eligible to this purchase error`

但在后台显示产品描述和产品名称。

我也在使用测试邮件 ID 作为我设备的主要邮件 ID，但它仍然显示相同的错误。我谷歌有人说访问 APK 需要一点时间，但我 2 天前上传了我的 APK 仍然显示相同的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T14:07:46.950

我解决了上述问题，我的 Eclipse 将 InApp 计费版本 2 升级到了 InApp 计费版本 3。

但我正在使用 Inapp 计费版本 2 相关代码，因此它显示此错误。

当我将 InApp 计费版本代码 3 降级为 2 时，它工作正常。

# java - 为什么 else 语句是一个无限循环？

> ID：14100531
> 
> 赞同：1
> 
> 时间：2012-12-31T10:44:00.380
> 
> 标签：java, loops, infinite-loop

我对 Java 还很陌生，我正在尝试进行数据验证。当我使用有效数据时，代码运行良好，但是当我输入字符串而不是整数时，代码只会永远循环。它只是循环“输入错误。请输入一个数字”。提前致谢！

```
 //Get input from user
    System.out.print("What is your name (Last, First)? ");
    String name = scan.nextLine();
    System.out.print("enter a date:");
    String datein = scan.nextLine();

    boolean valid = false;
    while (valid != true)
    {   
        System.out.print("Electricity used (KW):");
        if (scan.hasNextDouble())
        {
            electricityUsed = scan.nextDouble();
            valid = true;
        }
        else
            System.out.println("Bad input. Please enter a number.");
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-31T10:45:19.267

因为`hasNextDouble`总是返回 false。

这是[文档](http://docs.oracle.com/javase/6/docs/api/java/util/Scanner.html#hasNextDouble%28%29)。你回答你自己的问题：

> 但是当我输入一个字符串而不是一个整数时

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-31T10:46:49.247

要修复它，请添加`scan.nextLine()`到您的 else 分支。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-31T10:49:06.327

一种更简单的方法是使用以下方法。

```
System.out.print("Electricity used (KW):");
while(!scan.hasNextDouble()) {
    scan.nextLine();
    System.out.println("Bad input. Please enter a number.");
    System.out.print("Electricity used (KW):");
}
double electricityUsed = scan.nextDouble(); 
```

# c++ - mysql连接超时

> ID：14100532
> 
> 赞同：3
> 
> 时间：2012-12-31T10:44:01.097
> 
> 标签：c++, mysql

我需要为 mysql_real_connect 设置超时。问题是当服务器未运行时，超时时间非常长，这会“冻结”我的应用程序。我尝试使用 MYSQL_OPT_CONNECT_TIMEOUT，但从 mysql_real_connect 返回仍然需要时间。

示例代码：

```
MYSQL mysql;
unsigned int conn_timeout=1;

mysql_init(&mysql);
mysql_options(&mysql, MYSQL_OPT_CONNECT_TIMEOUT, &conn_timeout);

if(mysql_real_connect(&mysql, "localhost","root", "root", NULL, 3306, NULL,0) == FALSE)
{  
    cout<<"Connection Failed" ;       
    return 1;
}    
cout<<"Connection Success"; 
```

如果服务器没有运行，从 mysql_real_connect 返回需要 20 秒。

有没有办法为 mysql_real_connect 设置超时，以便它在指定的超时后返回？请帮忙。

# html - 将 pdf 保存在 html5 本地存储中

> ID：14100533
> 
> 赞同：3
> 
> 时间：2012-12-31T10:44:10.903
> 
> 标签：html, local-storage

我正在使用 mozilla pdf.js 在浏览器上读取和显示 pdf 文件的内容。后来我想把这个功能离线并利用本地存储。

到目前为止，我能够创建一个离线应用程序，它利用清单使我的应用程序离线，但我面临的真正挑战是如何阅读我服务器上的 pdf。

有什么方法可以将该 pdf 保存在本地存储中，或者有任何其他方法可以将 pdf 数据保存为本地存储中的 blob，然后使用 blob 数据即时制作 pdf。

Kindle 云阅读器具有此功能，但我不确定他们是如何做到的。

另外，我不是在寻找代码（如果有人可以显示很棒的代码）。只要引导我走向正确的方向，因为我知道这是可能的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T10:53:11.247

You can use indexed DB. [http://hacks.mozilla.org/2012/02/storing-images-and-files-in-indexeddb/](http://hacks.mozilla.org/2012/02/storing-images-and-files-in-indexeddb/)

[http://msdn.microsoft.com/en-us/library/ie/hh779017%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/ie/hh779017%28v=vs.85%29.aspx)

Also work on your accept rate..seems too low..

# javascript - 如何调试 phantomJs 中的页面加载错误

> ID：14100536
> 
> 赞同：7
> 
> 时间：2012-12-31T10:44:25.143
> 
> 标签：javascript, phantomjs

有没有办法调试 phantomjs 的 page.open 方法？我的应用程序加载了一些本地保存的文件，但不幸的是，打开页面时唯一可以获得的信息是它是否加载成功。更有趣的是，在浏览器中打开同一页面时会正确加载。

这是我的代码：

```
var system = require('system'),
    page   = require('webpage').create(); 

var openPage = function () {

    var url = 'http:\\localhost:53794/file.html';

    page.open(url, function (status) {
        if (status !== 'success') {
            console.log("FAIL:" + url);
            phantom.exit(2);
        }

        var date            = new Date().getTime();
        var outputFilename  = outputPath + 'print-' + date + '.png';

        setTimeout(function () {
            page.render(outputFilename);
            outputArray.push(outputFilename);

            setTimeout(function () {
                phantom.exit(1);
            }, 1);
        }, 1);        
    });
}

openPage(); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-07-22T14:32:07.840

通过： http: [//newspaint.wordpress.com/2013/04/25/getting-to-the-bottom-of-why-a-phantomjs-page-load-fails/](http://newspaint.wordpress.com/2013/04/25/getting-to-the-bottom-of-why-a-phantomjs-page-load-fails/)

创建`page`变量后，但在调用之前`page.open()`添加以下代码：

```
page.onResourceError = function(resourceError) {
    page.reason = resourceError.errorString;
    page.reason_url = resourceError.url;
}; 
```

`page.open()`现在您可以在回调中打印出问题的原因，例如：

```
var page = require('webpage').create();

page.onResourceError = function(resourceError) {
    page.reason = resourceError.errorString;
    page.reason_url = resourceError.url;
};

page.open(
    "http://www.nosuchdomain/",
    function (status) {
        if ( status !== 'success' ) {
            console.log(
                "Error opening url \"" + page.reason_url
                + "\": " + page.reason
            );
            phantom.exit( 1 );
        } else {
            console.log( "Successful page open!" );
            phantom.exit( 0 );
        }
    }
); 
```

### 调试功能

如果您进一步阅读博客，他会添加更多建议的事件处理程序。我将它们改编成一个函数，您可以使用该函数将事件处理程序注入您的页面对象（而不是在您的主代码中定义它们）

```
// this method injects some debugging event handlers 
// into a PhantomJS page object.
// usage:
//   var page = require('webpage').create();
//   var system = require('system');
//   addDebugEvents(page,system);
function addDebugEvents(page, system) {

    page.onResourceError = function (resourceError) {
        page.reason = resourceError.errorString;
        page.reason_url = resourceError.url;
    };

    page.onResourceRequested = function (request) {
        system.stderr.writeLine('= onResourceRequested()');
        system.stderr.writeLine('  request: ' + JSON.stringify(request, undefined, 4));
    };

    page.onResourceReceived = function (response) {
        system.stderr.writeLine('= onResourceReceived()');
        system.stderr.writeLine('  id: ' + response.id + ', stage: "' + response.stage + '", response: ' + JSON.stringify(response));
    };

    page.onLoadStarted = function () {
        system.stderr.writeLine('= onLoadStarted()');
        var currentUrl = page.evaluate(function () {
            return window.location.href;
        });
        system.stderr.writeLine('  leaving url: ' + currentUrl);
    };

    page.onLoadFinished = function (status) {
        system.stderr.writeLine('= onLoadFinished()');
        system.stderr.writeLine('  status: ' + status);
    };

    page.onNavigationRequested = function (url, type, willNavigate, main) {
        system.stderr.writeLine('= onNavigationRequested');
        system.stderr.writeLine('  destination_url: ' + url);
        system.stderr.writeLine('  type (cause): ' + type);
        system.stderr.writeLine('  will navigate: ' + willNavigate);
        system.stderr.writeLine('  from page\'s main frame: ' + main);
    };

    page.onResourceError = function (resourceError) {
        system.stderr.writeLine('= onResourceError()');
        system.stderr.writeLine('  - unable to load url: "' + resourceError.url + '"');
        system.stderr.writeLine('  - error code: ' + resourceError.errorCode + ', description: ' + resourceError.errorString);
    };

    page.onError = function (msg, trace) {
        system.stderr.writeLine('= onError()');
        var msgStack = ['  ERROR: ' + msg];
        if (trace) {
            msgStack.push('  TRACE:');
            trace.forEach(function (t) {
                msgStack.push('    -> ' + t.file + ': ' + t.line + (t.function ? ' (in function "' + t.function + '")' : ''));
            });
        }
        system.stderr.writeLine(msgStack.join('\n'));
    };

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T12:32:12.443

您应该更改网址

从

```
http:\\localhost:53794/file.html 
```

到

```
http://localhost:53794/file.html 
```

# python - 如何根据条件拆分列表？

> ID：14100538
> 
> 赞同：5
> 
> 时间：2012-12-31T10:44:51.580
> 
> 标签：python

到目前为止，我还没有找到一种方便的方法来按某些条件拆分列表，例如，我有一个记录列表：

```
 a = ((0,1),(1,0),(0,2),(1,0),(3,0),(4,0),(0,3),(1,5)....) 
```

我想将内容分成 2 个列表

```
alist = []
blist = []
for x in a:
    if x[0] == 0:
        alist.append(x)
    elif x[0] == 1:
        blist.append(x) 
```

不是很简洁。

写成列表推导：

```
aList = [x for x in a if x[0] == 0]
bList = [x for x in a if x[0] == 1] 
```

列表推导通常有利于阅读和性能，但在这种情况下，列表必须迭代两次。

有没有更好的方法来完成这项工作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-31T10:49:42.287

嗯，条件不同，难怪需要两个循环。但是如果你想牺牲一些可读性，

```
aList, bList = [[x for x in a if x[0] == i] for i in (0, 1)] 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-31T10:59:32.187

添加一行将使循环更加简洁，但代价是可读性（和 FPness）。

```
alist = []
blist = []
bothlists = [alist, blist]
for x in a:
  bothlists[x[0]].append(x) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-31T11:03:53.267

如果你真的想让事情变得复杂，你可以导入一些函数来`itertools`进一步混淆你的可读解决方案：

```
from operator import itemgetter
from collections import defaultdict

d = defaultdict(list)

for key, value in itertools.groupby(a, itemgetter(0)):
    d[key].append(list(value)) 
```

这是输出：

```
>>> print d[0]
[[(0, 1)], [(0, 2)], [(0, 3)]]
>>> print d[1]
[[(1, 0)], [(1, 0)], [(1, 5)]]
>>> print d[4]
[[(4, 0)]] 
```

此代码只是使用第一个元组中的值作为键将项目分组到字典中。它比您的代码更通用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-31T14:19:55.220

我会使用`filter`，请参阅：[http ://docs.python.org/2/library/functions.html#filter](http://docs.python.org/2/library/functions.html#filter)

```
>>> a = ((0,1), (1,0), (0,2), (1,0), (3,0), (4,0), (0,3), (1,5))
>>> filter(lambda x: x[0] == 1, a)
((1, 0), (1, 0), (1, 5)) 
```

为了避免冗余代码，您可以在可迭代中收集条件，如下所示：

```
>>> fs = (lambda x: x[0] == 0, lambda x: x[0] == 1)
>>> for f in fs:
...     filter(f, a)
...
((0, 1), (0, 2), (0, 3))
((1, 0), (1, 0), (1, 5)) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-01-05T04:34:43.783

dict 可以更简洁。

```
alist, blist = [], []
for x in a:
    {0: alist, 1: blist}.get(x[0]).append(x) 
```

这是一种灵活的模式，您可以扩展它以涵盖其他情况。

例如，您可以添加更多选择。`.get(x[0])`您还可以通过更改为来优雅地处理意外值`.get(x[0], [])`。

# linux - iptables：只允许 OUTPUT 用于 http 和 ssh

> ID：14100539
> 
> 赞同：1
> 
> 时间：2012-12-31T10:45:00.857
> 
> 标签：linux, http, ssh, iptables

如何只允许 http 和 ssh 的传出流量？

我试过了：

```
 iptables -A OUTPUT -p tcp --dport ssh -j ACCEPT
 iptables -A OUTPUT -p tcp --dport http -j ACCEPT 
```

但只要我添加

```
iptables -A OUTPUT -j DROP 
```

没有任何作用，它阻止了一切。

```
Chain INPUT (policy ACCEPT)
target     prot opt source               destination
ACCEPT     tcp  --  anywhere             anywhere            tcp dpt:ssh
ACCEPT     tcp  --  anywhere             anywhere            tcp dpt:22151
ACCEPT     tcp  --  anywhere             anywhere            tcp dpt:http
ACCEPT     tcp  --  anywhere             anywhere            tcp dpt:sso-service
ACCEPT     all  --  anywhere             anywhere
DROP       all  --  anywhere             anywhere

Chain FORWARD (policy ACCEPT)
target     prot opt source               destination

Chain OUTPUT (policy ACCEPT)
target     prot opt source               destination
ACCEPT     all  --  anywhere             anywhere 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T10:50:49.713

尝试使用`--sport`而不是`--dport`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T11:04:51.867

首先，您的 iptables 配置的输出与您输入的规则不匹配。您是否重新启动了 iptable 服务？其次，您需要允许端口 53 上的 udp 以使 DNS 也正常工作：

```
 iptables -A OUTPUT -p udp --dport 53 -j ACCEPT 
```

# java - 不使用 super.oncreate() 停止循环并扩展 MainActivity

> ID：14100542
> 
> 赞同：3
> 
> 时间：2012-12-31T10:45:35.260
> 
> 标签：java, android, oncreate

我从 MainActivity 扩展了一个“登录”类。

MainActivity 看起来像这样：

```
 public class MainActivity extends FragmentActivity {
/** Called when the activity is first created. */
private static String TAG = "MainActivity";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    //setContentView(R.layout.main);

    Intent login_activity = new Intent(this, Login.class);
    startActivity(login_activity);
    Log.d(TAG,"Login created");
}
} 
```

在 login.class 我只是调用布局：

```
public class Login extends MainActivity {

@Override
public void onCreate(Bundle savedInstanceState) {
    //super.onCreate(savedInstanceState);
    setContentView(R.layout.login);
     }
} 
```

你可以看到，我在登录类中注释掉了“super.oncreate”。在这里再次调用 MainActivity oncreate 是没有意义的。但是这个被淘汰的 super.oncreate 我会得到一些例外：

```
12-31 11:37:47.688: E/AndroidRuntime(4206): FATAL EXCEPTION: main
12-31 11:37:47.688: E/AndroidRuntime(4206): android.app.SuperNotCalledException: Activity {de.svennergr.htn/de.svennergr.htn.Login} did not call through to super.onCreate()
12-31 11:37:47.688: E/AndroidRuntime(4206):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2146)
12-31 11:37:47.688: E/AndroidRuntime(4206):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
12-31 11:37:47.688: E/AndroidRuntime(4206):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
12-31 11:37:47.688: E/AndroidRuntime(4206):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
12-31 11:37:47.688: E/AndroidRuntime(4206):     at android.os.Handler.dispatchMessage(Handler.java:99)
12-31 11:37:47.688: E/AndroidRuntime(4206):     at android.os.Looper.loop(Looper.java:137)
12-31 11:37:47.688: E/AndroidRuntime(4206):     at android.app.ActivityThread.main(ActivityThread.java:5039)
12-31 11:37:47.688: E/AndroidRuntime(4206):     at java.lang.reflect.Method.invokeNative(Native Method)
12-31 11:37:47.688: E/AndroidRuntime(4206):     at java.lang.reflect.Method.invoke(Method.java:511)
12-31 11:37:47.688: E/AndroidRuntime(4206):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
12-31 11:37:47.688: E/AndroidRuntime(4206):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
12-31 11:37:47.688: E/AndroidRuntime(4206):     at dalvik.system.NativeStart.main(Native Method) 
```

当我不评论 super.oncreate 时，我会得到一个不停止的循环，创建许多“登录”对象/活动。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T10:52:30.057

In Android, you must adhere to the life cycle of the Activities. Each time you override a life cycle method, you must call super to ensure consistency with Activities life cycle.

The point here is not to call MainActivity.onCreate but Activity.onCreate. If you don't want to inherit from the behavior of MainActivity inside LoginActivity, then don't extend from it. Maybe you need an intermediate parent common parent class to group only the desired behavior.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T10:54:05.360

You **must always explicitly call onCreate() superclass method** when subclassing Activity so the system could properly initialize it so you can't just eliminate the call to superclass onCreate().

It's generally not a very good idea to start an activity in another activity's `onCreate()` method. Just think about other ways of launching your Login activity (make a button that launches it e.g.).

If you are planning to have multiple subclasses of your MainActivity just incapsulate the common behavior and components in it and launch your subclasses (Login activity) directly. Or if you want the Login activity appear in the beginning you can make it a `LAUNCHER` activity in `AndroidManifest.xml`.

Please, read more about [activity lifecycles](http://developer.android.com/training/basics/activity-lifecycle/index.html) and study some theory before development.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T10:55:17.067

规则是，如果您覆盖 onCreate()，则必须调用 super.onCreate()...您可以做的是在 MainActivity 上设置 setContentView()，如下所示： setContentView(getCurrentViewLayoutId()) 和 getCurrentViewLayoutId() 将是LoginActivity.java 将实现的方法......像这样，您可以从 LoginActivity.java 中完全删除 onCreate() 实现......然后“super.onCreate() 检查”不会有任何问题。但在 onResume() 中调用 startActivity 可能是个好主意。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-31T10:56:39.383

是否有任何扩展 MainActivity 以进行登录的具体原因？

由于您在 MainActivity 中调用 Login 意图并且 Login 需要调用 super.onCreate() 它将进入无限循环。所以，我认为最好扩展 Activity 而不是 MainActivity。

# c++ - 模板构造函数的重载解析？

> ID：14100557
> 
> 赞同：2
> 
> 时间：2012-12-31T10:47:28.887
> 
> 标签：c++, c++11

```
struct X
{
    X(X&);         // (1)
    X(X&&);        // (2)
    X(const X&);   // (3)
    X(const X&&);  // (4)
}; 
```

考虑将绑定和分派这四个构造函数之一的所有可能用法的集合**U。**`X`

例如，**U**的一个元素是：

```
int main()
{
    X x1 = ...;
    X x2(x1);  // <-- (1) used
} 
```

现在想象我们添加第五个构造函数，如下所示：

```
struct X
{
    X(X&);                    // (1)
    X(X&&);                   // (2)
    X(const X&);              // (3)
    X(const X&&);             // (4)

    template<class T> X(T&&); // (5)
}; 
```

是否有任何新的重载解决方案，其中**U**的元素之一现在将`(5)`作为更好的匹配而不是`(1)`,`(2)`或以前那样`(3)`调度？`(4)`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T10:50:09.283

考虑派生类：

```
struct Y : X
{ Y() { } };

int main()
{
  Y y;
  X x1(y); // derived class
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T11:10:00.517

好的，我现在明白了。我想，这种情况适用于任何可转换为 X 的 T。例如：

```
struct R
{
 operator X() const;
};

int main()
{
  R r{};
  X x{r};
} 
```

如果您的目标是拥有一个仅处理您的 (1) 到 (4) 的模板构造函数，而没有其他内容，则您必须通过以下方式“SFINAE 离开”其他人：

```
template <typename T, typename U>
constexpr bool IsSame() {
  return is_same<
    typename decay<T>::type, 
    typename decay<U>::type
  >::value;
}

struct X
{
  template <class T, typename enable_if<IsSame<T, X>()>::type* = 0> 
  X(T&&);
}; 
```

或者，如果您的目标是将 T 可转换为 X 与其他 T 区分开来，请考虑以下解决方案：

```
struct X
{
  template <
    class T, 
    typename enable_if<is_convertible<T, X>::value>::type* = 0
  > 
  X(T&&); // do something

  template <
    class T, 
    typename enable_if<!is_convertible<T, X>::value>::type* = 0
  > 
  X(T&&); // do something else
}; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-31T10:55:53.750

```
int main()
{
    X x2(12);  // <-- (5) used
} 
```

（推导 T 为 int）

# ruby-on-rails - ActionView::Template::Error: 未定义的方法 `to'

> ID：14100560
> 
> 赞同：1
> 
> 时间：2012-12-31T10:47:39.717
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

当我测试我的应用程序错误日志时出现错误

```
1) Static pages Home page should have the h1 'Sample App'
     Failure/Error: visit root_path
     ActionView::Template::Error:
       undefined method `to' for #<#<Class:0xa66470c>:0xa674fa8>
     # ./app/views/layouts/_header.html.erb:4:in `_app_views_layouts__header_html_erb___446387253_86947970'
     # ./app/views/layouts/application.html.erb:11:in `_app_views_layouts_application_html_erb__887388821_90453380'
     # ./spec/requests/static_pages_spec.rb:5:in `block (3 levels) in <top (required)>'

  2) Static pages Home page should have the base title
     Failure/Error: visit root_path
     ActionView::Template::Error:
       undefined method `to' for #<#<Class:0xa66470c>:0xa8eaf58>
     # ./app/views/layouts/_header.html.erb:4:in `_app_views_layouts__header_html_erb___446387253_86947970'
     # ./app/views/layouts/application.html.erb:11:in `_app_views_layouts_application_html_erb__887388821_90453380'
     # ./spec/requests/static_pages_spec.rb:9:in `block (3 levels) in <top (required)>'

  3) Static pages Home page should not have a custom page title
     Failure/Error: visit root_path
     ActionView::Template::Error:
       undefined method `to' for #<#<Class:0xa66470c>:0xb63d804>
     # ./app/views/layouts/_header.html.erb:4:in `_app_views_layouts__header_html_erb___446387253_86947970'
     # ./app/views/layouts/application.html.erb:11:in `_app_views_layouts_application_html_erb__887388821_90453380'
     # ./spec/requests/static_pages_spec.rb:13:in `block (3 levels) in <top (required)>'

  4) Static pages Help page should have the h1 'Help'
     Failure/Error: visit help_path
     ActionView::Template::Error:
       undefined method `to' for #<#<Class:0xa66470c>:0xa65f284>
     # ./app/views/layouts/_header.html.erb:4:in `_app_views_layouts__header_html_erb___446387253_86947970'
     # ./app/views/layouts/application.html.erb:11:in `_app_views_layouts_application_html_erb__887388821_90453380'
     # ./spec/requests/static_pages_spec.rb:19:in `block (3 levels) in <top (required)>'

  5) Static pages Help page should have the title 'Help'
     Failure/Error: visit help_path
     ActionView::Template::Error:
       undefined method `to' for #<#<Class:0xa66470c>:0xa56dcb8>
     # ./app/views/layouts/_header.html.erb:4:in `_app_views_layouts__header_html_erb___446387253_86947970'
     # ./app/views/layouts/application.html.erb:11:in `_app_views_layouts_application_html_erb__887388821_90453380'
     # ./spec/requests/static_pages_spec.rb:23:in `block (3 levels) in <top (required)>'

  6) Static pages About page should have the h1 'About'
     Failure/Error: visit about_path
     ActionView::Template::Error:
       undefined method `to' for #<#<Class:0xa66470c>:0xb839450>
     # ./app/views/layouts/_header.html.erb:4:in `_app_views_layouts__header_html_erb___446387253_86947970'
     # ./app/views/layouts/application.html.erb:11:in `_app_views_layouts_application_html_erb__887388821_90453380'
     # ./spec/requests/static_pages_spec.rb:29:in `block (3 levels) in <top (required)>'

  7) Static pages About page should have the title 'About Us'
     Failure/Error: visit about_path
     ActionView::Template::Error:
       undefined method `to' for #<#<Class:0xa66470c>:0xa65a464>
     # ./app/views/layouts/_header.html.erb:4:in `_app_views_layouts__header_html_erb___446387253_86947970'
     # ./app/views/layouts/application.html.erb:11:in `_app_views_layouts_application_html_erb__887388821_90453380'
     # ./spec/requests/static_pages_spec.rb:33:in `block (3 levels) in <top (required)>'

  8) Static pages Contact page should have the h1 'Contact'
     Failure/Error: visit contact_path
     ActionView::Template::Error:
       undefined method `to' for #<#<Class:0xa66470c>:0xa56d808>
     # ./app/views/layouts/_header.html.erb:4:in `_app_views_layouts__header_html_erb___446387253_86947970'
     # ./app/views/layouts/application.html.erb:11:in `_app_views_layouts_application_html_erb__887388821_90453380'
     # ./spec/requests/static_pages_spec.rb:40:in `block (3 levels) in <top (required)>'

  9) Static pages Contact page should have the title 'Contact'
     Failure/Error: visit contact_path
     ActionView::Template::Error:
       undefined method `to' for #<#<Class:0xa66470c>:0xb835be8>
     # ./app/views/layouts/_header.html.erb:4:in `_app_views_layouts__header_html_erb___446387253_86947970'
     # ./app/views/layouts/application.html.erb:11:in `_app_views_layouts_application_html_erb__887388821_90453380'
     # ./spec/requests/static_pages_spec.rb:44:in `block (3 levels) in <top (required)>'

Finished in 0.45434 seconds
9 examples, 9 failures

Failed examples: 
```

我的 routes.rb 文件是

```
Sample::Application.routes.draw do
 root to: 'static_pages#home'

match '/help', to: 'static_pages#help'
match '/contact', to: 'static_pages#contact'
match '/about' , to: 'static_pages#about'
  end 
```

我的 _header.html.erb 代码是

```
<header class="navbar navbar-fixed-top">
<div class="navbar-inner">
<div class="container">
<%= link to "sample app", '#', id: "logo" %>

<nav>
<ul class="nav pull-right">
<li><%= link_to "Home",  '#' %></li>
<li><%= link_to "Help", '#' %></li>
<li><%= link_to "Sign in", '#' %></li>
</ul>
</nav>
</div>
</div>
</header> 
```

和 application.html.erb 代码是

```
<!DOCTYPE html>
<html>
<head>
<title><%= full_title(yield(:title)) %></title>
<%= stylesheet_link_tag "application", media: "all" %>
<%= javascript_include_tag "application" %>
<%= csrf_meta_tags %>
<%= render 'layouts/shim' %>
</head>
<body>
<%= render 'layouts/header' %>
<div class="container">
<%= yield %>
<%= render 'layouts/footer' %>
</div>
</body>
</html> 
```

任何人都可以请帮助我为什么得到这个未定义的方法错误以及如何摆脱它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T10:56:43.793

试试这个：

```
Sample::Application.routes.draw do
   match '/help' => 'static_pages#help'
   match '/contact' => 'static_pages#contact'
   match '/about' => 'static_pages#about'
   root :to => 'static_pages#home'
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T11:25:22.990

可能你在 _header 文件中有错字，因为每个错误都有它，再次检查 _header 文件，如果是这种情况，你应该在运行 rails server 并尝试访问页面时遇到同样的错误。

# javascript - 如何在另一个页面上重定向并从表中传递 url 中的参数？

> ID：14100563
> 
> 赞同：35
> 
> 时间：2012-12-31T10:48:04.033
> 
> 标签：javascript, jquery, templates, jquery-mobile, tornado

如何在另一个页面上重定向并从表中传递 url 中的参数？我在 tornato 模板中创建了这样的东西

```
<table data-role="table" id="my-table" data-mode="reflow">
    <thead>
        <tr>
            <th>Username</th>
            <th>Nation</th>
            <th>Rank</th>
            <th></th>
        </tr>
    </thead>
    <tbody>
        {% for result  in players %}
        <tr>
            <td>{{result['username']}}</td>
            <td>{{result['nation']}}</td>
            <td>{{result['rank']}}</td>
            <td><input type="button" name="theButton" value="Detail"
                       ></td>
        </tr>
    </tbody>
    {% end %}
</table> 
```

我希望当我按下详细信息以重定向`/player_detail?username=username` 并显示有关该播放器的所有详细信息时。我尝试使用`href="javascript:window.location.replace('./player_info');"`内部输入标签，但不知道如何将结果 ['username'] 放入。如何做到这一点？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-12-31T11:41:12.803

将用户名设置为`data-username`按钮的属性以及类：

*HTML*

```
<input type="button" name="theButton" value="Detail" class="btn" data-username="{{result['username']}}" /> 
```

*JS*

```
$(document).on('click', '.btn', function() {

    var name = $(this).data('username');        
    if (name != undefined && name != null) {
        window.location = '/player_detail?username=' + name;
    }
});​ 
```

**编辑：**

此外，您可以简单地检查`undefined`&&`null`使用：

```
$(document).on('click', '.btn', function() {

    var name = $(this).data('username');        
    if (name) {
        window.location = '/player_detail?username=' + name;
    }
});​ 
```

正如在这个[答案中提到的](https://stackoverflow.com/a/5515349/1823841)

```
if (name) {            
} 
```

如果 value 不是，将评估为 true：

*   无效的
*   不明确的
*   钠
*   空字符串 ("")
*   0
*   错误的

上面的列表代表了 ECMA/Javascript 中所有可能的虚假值。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-31T10:52:47.550

Do this :

```
<script type="text/javascript">
function showDetails(username)
{
   window.location = '/player_detail?username='+username;
}
</script>

<input type="button" name="theButton" value="Detail" onclick="showDetails('username');">

```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-31T10:50:43.200

Bind the button, this is done with jQuery:

```
$("#my-table input[type='button']").click(function(){
    var parameter = $(this).val();
    window.location = "http://yoursite.com/page?variable=" + parameter;
}); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-08-10T13:22:37.153

Here is a general solution that doesn't rely on JQuery. Simply modify the definition of window.location.

```
<html>
   <head>
      <script>
         function loadNewDoc(){ 
            var loc = window.location;
            window.location = loc.hostname + loc.port + loc.pathname + loc.search; 
         };
      </script>
   </head>
   <body onLoad="loadNewDoc()">
   </body>  
</html> 
```

# extjs - 面板没有显示 sencha touch 2

> ID：14100564
> 
> 赞同：1
> 
> 时间：2012-12-31T10:48:11.607
> 
> 标签：extjs, views, touch, panels

在工具栏中点击“登录”时，我正在尝试切换面板。我的控制器收到事件，我通过添加活动项目并将其设置到我想要的面板进行切换。但是，屏幕保持空白（并且没有调试错误）。

这是我面板的代码，知道错误可能是什么吗？

```
Ext.define('App.view.LoginView', {
extend: 'Ext.Panel',
xtype: 'loginpanel',
alias: 'widget.loginView',

fullscreen: true,
layout: 'fit',

items: [
    {
        xtype: 'TopToolBar'
    },
    {
            xtype: 'formpanel',
            items: [
            {
                xtype: 'fieldset',
                title: 'Login',
                instructions: 'Have a great day!',
                items: [
                    {
                        xtype: 'emailfield',
                        name: 'email',
                        label: 'Email'
                    },

                    {
                        xtype: 'passwordfield',
                        name: 'password',
                        label: 'Password'
                    }
                ]
            },

            {
                xtype: 'button',
                text: 'Login',
                ui: 'confirm',
                handler: function()
                {
                    this.up('loginpanel').submit();
                }
            }
        ]
    }]}) 
```

我的工具栏类的代码：

```
Ext.define('App.view.TopToolBar', {
extend: 'Ext.Toolbar',
xtype: 'TopToolBar',
dock: 'top',
initialize: function() {
    var loginButton = {
        xtype: 'button',
        text: 'Login',
        ui: 'action',
        handler: this.onLoginTap,
        scope: this
    };

    this.add(loginButton);
},

onLoginTap: function(){
    console.log('login tap');
    this.fireEvent('loginBtnHandler', this);
}}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T12:24:16.863

用 定义类[`Ext.define`](http://docs.sencha.com/ext-js/4-1/#!/api/Ext-method-define)。

```
Ext.define('My.Toolbar', {
    extend: 'Ext.Toolbar',
    alias: 'widget.mytoolbar'
    //configuration
}); 
```

创建（实例化）类[`Ext.create`](http://docs.sencha.com/ext-js/4-1/#!/api/Ext-method-create)

```
var tlb= Ext.create('My.Toolbar', {
    //configuration
}); 
```

# c# - 用户可以看到其他人的详细信息。FirstOrDefault 返回错误的记录？还是缓存问题？帮助！:)

> ID：14100574
> 
> 赞同：2
> 
> 时间：2012-12-31T10:49:19.903
> 
> 标签：c#, asp.net-mvc, linq-to-sql

我网站的用户昨天遇到了一些奇怪的行为（我第一次看到这个问题），不幸的是我没有太多的错误日志来试图弄清楚发生了什么。该站点同时在线的人数高于正常数量，尽管在总体规划中并不多（可能有 50 到 100 个用户都在尝试执行类似的功能）。我无法在我的开发环境中重现该问题，以前从未见过，也不知道为什么会发生。

问题的症结在于，用户可以注册或登录成功，但少数用户可以看到其他用户的数据。

该站点是 ASP.NET MVC 3。

用户正在登录，我设置了身份验证 cookie - 这是登录操作：

```
 [HttpPost]
    public ActionResult LogOn(AccountLogOnViewModel model, string returnUrl)
    {
        if (ModelState.IsValid)
        {
            if (!Membership.ValidateUser(model.UserName, model.Password))
            {
                ModelState.AddModelError("login-message", "Incorrect username or password");
            }
        }

        if (ModelState.IsValid)
        {
            FormsAuthentication.SetAuthCookie(model.UserName, model.RememberMe);
            Session.Remove("MenuItems");
            return Redirect(returnUrl ?? Url.Action("Index", "Home"));
        }
        else
        {
            model.ReturnUrl = returnUrl;
            return View(model);
        }
    } 
```

AccountLogOnViewModel 是一个简单的对象，具有两个字符串属性，用户名和密码。

据我所知，这很好 - 如果您以 NickW 身份登录，然后正确执行 User.Identity.Name 之类的操作会为您提供“NickW”（当用户看到其他用户的数据时，他们报告说“欢迎，NickW”屏幕上的文本向他们显示了正确的值 - 这是使用 User.Identity.Name 写出的）

该站点还使用自定义成员资格提供程序。它覆盖了 ValidateLogin 方法和 GetUser 方法。ValidateLogin 似乎工作得很好，所以我不担心。

重写的 GetUser 方法如下：

```
 public override MembershipUser GetUser(string username, bool userIsOnline)
    {
        User user = _userRepository.Users.FirstOrDefault(u => u.UserName == username);
        MembershipUser membershipUser = null;

        if (user == null)
            return membershipUser;

        membershipUser = new MembershipUser(this.Name,
            user.UserName,
            user.Id,
            user.Email,
            null,
            user.Comments,
            user.IsActivated,
            user.IsLockedOut,
            user.CreatedDate,
            user.LastLoginDate,
            user.LastLoginDate,
            user.LastModifiedDate,
            Convert.ToDateTime(user.LastLockedOutDate));

        return membershipUser;
    } 
```

所以我试图从我的数据库中检索一个用户对象，并使用它来创建一个新的 MembershipUser 对象。我的数据库用户表在会员资格提供商要求的列之上还有其他列 - 例如姓名、地址、电话号码等。

在网站其余部分的各个点（例如，如果您转到个人资料页面），我从数据库中检索一个用户对象并使用它来填充屏幕。我用来检索用户对象的行是：

```
User user = userRepository.Users.FirstOrDefault(u => u.UserName == Membership.GetUser().UserName); 
```

这是 userRepository 的精简版本（即仅删除不相关的代码）。

```
public class SqlUserRepository : IUserRepository
{
    private Table<User> usersTable;
    private string _connectionString;

    public SqlUserRepository(string connectionString)
    {
        _connectionString = connectionString;
        usersTable = (new DataContext(connectionString)).GetTable<User>();
    }

    public IQueryable<User> Users
    {
        get { return usersTable; }
    }

    public void CreateUser(AccountRegisterViewModel user)
    {
        User newUser = new User();

        newUser.UserName = user.UserName;
        newUser.Salutation = user.Salutation;
        newUser.PhoneNumber = user.PhoneNumber;
        newUser.SecondaryPhoneNumber = user.SecondaryPhoneNumber;
        newUser.FirstName = user.FirstName;
        newUser.LastName = user.LastName;
        newUser.PasswordSalt = CreateSalt();
        newUser.Password = CreatePasswordHash(user.Password, newUser.PasswordSalt);
        newUser.Email = user.Email;
        newUser.CreatedDate = DateTime.UtcNow;
        newUser.Comments = "Created from web registration";
        newUser.LastModifiedDate = DateTime.UtcNow;
        newUser.LastLoginDate = DateTime.UtcNow;
        newUser.IsActivated = true;
        newUser.IsLockedOut = false;
        newUser.MayContact = user.MayContact;

        usersTable.InsertOnSubmit(newUser);
        usersTable.Context.SubmitChanges();
    }
} 
```

所以在我看来，好像我设置的 auth cookie 很好，但是：当我第一次进入会员提供者的 GetUser() 方法时，它从数据库中检索错误的记录，因此设置了一个 MembershipUser 对象错误的用户名；随后，当我在数据库中查找“此”用户时，我实际上是在寻找错误的用户名。

或者：当我执行 userRepository.FirstOrDefault(x => x.UserName == Membership.GetUser().Name) 时，它会间歇性地检索错误的记录。

或者：我没有想到的其他事情出错了。

正如我所说，当网站处于负载状态时，这似乎是一个问题，所以我想知道这是否是某个地方的某种缓存问题？但我真的不知道。

我的一个想法是改变我检索用户的方式，以防问题出在成员资格提供者上，并改用它：

```
userRepository.FirstOrDefault(x => x.UserName == User.Identity.Name)
// or HttpContext.Current.User.Identity.Name if not within a controller 
```

但实际上我什至不确定发生了什么，所以不知道这是否会解决问题。会不会是某个地方的缓存问题？看起来（但我不能 100% 确定）当用户 A 可以看到用户 B 的详细信息时，用户 B 总是在系统中处于活动状态（或者在前 20 分钟内处于活动状态）。

我知道这是一个很长的镜头，但有人知道这是怎么发生的吗？显然这是一个主要问题，需要紧急修复，但不知道为什么会发生，我无法修复它！

在此先感谢您的帮助，尼克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T14:07:19.443

需要考虑的一些事项：

1.  而不是使用`FirstOrDefault`，使用`SingleOrDefault`。`FirstOrDefault`假设将有超过 1 条与您的查询匹配的数据记录。由于您是按用户名查询，因此应该只有 1 个匹配行，对吗？在这种情况下，请`SingleOrDefault`改用。当有多行匹配查询时，`SingleOrDefault`会抛出异常。

2.  要获取用户名，而不是调用`Membership.GetUser().UserName`，请使用`User.Identity.Name`. MVC 控制器上的`User`属性引用`IPrincipal`应该与用户的表单身份验证 cookie 值匹配的值。由于您有一个自定义成员资格提供程序，这应该有助于消除其方法作为问题的根源。

3.  如果您为 MVC 项目设置了缓存，则可能存在缓存问题。您是否在任何控制器或操作方法上使用`OutputCacheAttribute`( )？`[OutputCache]`您是否将其设置为 global.asax 文件中的全局过滤器？或者您认为可能会发生某种基于 SQL 的缓存？

4.  查看您覆盖的`GetUser`方法，我认为它应该采用 2 个参数：`string username`和`bool isOnline`. 但是，当您使用 调用它时`Membership.GetUser().UserName`，您没有传递任何参数。您是否有此方法的另一个不带参数的重写重载？它是什么样子的？当没有通过时，它是否`System.Threading.CurrentPrincipal.Identity.Name`用于嗅出当前用户名？

# ruby-on-rails - 在 Ruby on Rails 中搜索 MongoDB 中的两个条件

> ID：14100575
> 
> 赞同：2
> 
> 时间：2012-12-31T10:49:20.803
> 
> 标签：ruby-on-rails, ruby, mongodb, mongoid

我正在使用 rails cast 视频[http://railscasts.com/episodes/240-search-sort-paginate-with-ajax](http://railscasts.com/episodes/240-search-sort-paginate-with-ajax)。我必须使用两个条件在我的数据库中进行搜索。

```
# In my form for search 
<%= form_tag products_path, :method => 'get', :id => "products_search" do %>
  <p>
    <%= text_field_tag :search, params[:search] %>
    <%= submit_tag "Search", :name => nil%>
  </p> 
```

对于一种情况，这很好用：

```
# In my model product.rb
def self.search(search)
  if search
    where(name: /#{Regexp.escape(search)}/i) 
  else
    scoped
  end
end

# In my controller products_controller.rb
@products = Product.search(params[:search]).page(params[:page]).per(5) 
```

现在我必须使用另一个参数进行搜索，`role`. 我的产品模型中有角色字段。角色是1,2,3。如果给定了角色，那么它应该使用给定的输入角色搜索字符串，否则只搜索名称。

```
def self.search(search,role)
            if search
where(name: /#{Regexp.escape(search)}/i)(and role: should be equal to value of role) 
```

另外，我应该在我的 products_controller.rb 中做哪些更改？在我上面的搜索表单中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T19:14:35.933

Not sure if `role` is part of your Product model or not, but if so:

```
def self.search(paramsname, role = nil) 
  if role
    @products = Product.where(:name => Regexp.new(name, true), :role => role)
  else
    @products = Product.where(:name => Regexp.new(name, true))
  end
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T04:22:44.010

将字段添加到您的表单：

```
<%= form_tag products_path, :method => 'get', :id => 'products_search' do %>
  <p>
    <%= text_field_tag :search, params[:search] %>
    <%= select_tag :role, options_for_select([1, 2, 3]) %>
    <%= submit_tag 'Search', :name => nil %>
  </p>
<% end %> 
```

在控制器中使用新`:role`参数：

```
@products = Product.search(params[:search], params[:role])
                   .page(params[:page]).per(5) 
```

在您的产品模型中使用新`role`参数：

```
def self.search(search, role)
  q = scoped
  if search
    q = q.where(:name => Regexp.new(name, true))
  end

  if role
    q = q.where(:role => role)
  end
  q
end 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-09T15:40:38.843

我没有测试过，但是看你的问题，似乎你需要更好地分离职责。考虑到这一点，您可能更容易将这些搜索过滤器隔离在单独的类中。

我想出了这个：

```
 class SearchService
        def self.perform_search(params, klass)
            search = klass.scoped
            search = search.where(:name => Regexp.new(params[:name], true)) if params[:search]
            search = search.where(:role => params[:role]) if params[:role]
            search      
        end
    end 
```

也许有些东西不正确，但我认为您可以理解。

因此，在您的控制器中，您只需将其用作：

```
 SearchService.perform_search(params, Product) 
```

它仍然不是很好抽象，但我认为这是进入该思路的一种更容易和更好的方法。

希望这可以帮助。

# php - 一个 php 网页浏览器

> ID：14100576
> 
> 赞同：2
> 
> 时间：2012-12-31T10:49:22.223
> 
> 标签：php, browser

我随机尝试开发一个在 PHP 中工作的网络浏览器。我知道这是一个非常小的程序，如果你研究它，但我似乎没有让它工作。虽然我已经解决了，但我无法让它显示页面。

请查看下面的代码并告诉我我缺少什么。

```
<?php
    $address = $_GET['address']
?>

<html>
    <head>
        <title>NeXon Web</title>
        <link href="css/style.css" type="text/css" media="all"/>
    </head>

    <body>
        <div id="header">
            <img src="images/logo.png" id="logo"/>
            <img src="images/back.png" id="back" />
            <img src="images/fwd.png" id="fwd"/>
            <form method="GET" action="index.php">
                <input name="address" type="address" id="address" placeholder="Address..."/>
                <input type="submit" value="Go" id="submit"/>
            </form>
        </div>
        <div id="body">
            <iframe src="<?php $address ?>" id="frame" height="800px" width="1100px" />
        </div>
    </body>
</html> 
```

我写了这段代码，但似乎没有让网页显示。我尝试了 POST 和 GET 方法。请帮忙，我还是个新手：/

第二个代码是由其他人编写的，在他告诉我该怎么做后我无法联系，我需要第二个代码的认真帮助，

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>Untitled Document</title>
<style>
@import="style.css";
</style>
</head>

<body>
<?php
if($_POST){

$url=$_POST['url'];

}
?>
<script language="javascript">

function w(){  window.open('$url');  }

</script>

<div class="box">
    <form method="post" action="index.php">
        Address: <input type="text" name="url" id="url" class="input_text" />
        <input type="submit" value="submit" class="button">
    </form>
</div>

<div class="url">

</div>
</body>
</html> 
```

老实说，我真的不知道第二个代码是如何工作的：/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T10:50:54.007

您的第一个代码看起来非常接近：

```
<iframe src="<?php $address ?>" id="frame" height="800px" width="1100px" /> 
```

做那个

```
<iframe src="<?php echo $address; ?>" id="frame" height="800px" width="1100px" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-21T14:27:18.260

首先，我要说的是，如今许多网站不会出现在未存储在同一服务器上的 iframe 中。例如，我不能使用以下代码并期望它能够工作。

```
<iframe src="http://www.google.com"></iframe> 
```

上面的代码将在我的页面上显示一个大白框。这是由于[同源政策](http://en.wikipedia.org/wiki/Same-origin_policy)

现在，您可以对一些公司进行窃听以允许您访问。如果他们在那里使用 PHP，他们可以使用以下方法来完成。

```
<?php header('Access-Control-Allow-Origin: *'); ?> 
```

然而，这不仅对您而且对公司来说都是一个麻烦。更不用说他们的安全风险了。使用您的代码，我玩弄了它。它使用 POST 而不是 GET 在我的服务器上工作。但就像我说的那样，使用 iframe 甚至许多标准形式的 ajax 请求很难实现您的目标。你需要非常有创意才能让它作为网络浏览器工作。

你可能想尝试一些类似的东西

```
<?php
ini_set("user_agent","Mozilla/5.0 (Linux; Android 4.4; Nexus 5 Build/BuildID) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/30.0.0.0 Mobile Safari/537.36");
$data = file_get_contents("http://www.example.com",0);
?> 
```

用您选择的用户代理替换上述用户代理。我将不得不更多地解决这个问题，但我希望我能有所帮助。

# php - 如何取消设置具有特定前缀的会话变量

> ID：14100577
> 
> 赞同：0
> 
> 时间：2012-12-31T10:49:25.780
> 
> 标签：php, session-variables

> **可能重复：**
> [如何取消设置/销毁除某些特定键之外的所有会话数据？](https://stackoverflow.com/questions/7214369/how-to-unset-destroy-all-session-data-except-some-specific-keys)

我有某些以“汽车”开头的会话变量，例如

```
$_SESSION["cars_registration"];
$_SESSION["cars_make"];
$_SESSION["cars_model"];
$_SESSION["cars_variant"];
.
.
.
$_SESSION["cars_date_created"]; 
```

我想知道仅取消设置/删除/清空那些以汽车作为前缀的会话变量的代码，如上面。

到目前为止，我已经实现了这一点，但对取消它们的代码一无所知。

```
foreach($_SESSION as $key => $value)
{
    if (strpos($key, 'cars_') === 0)
    {
      // Need to delete / unset the session variables  
    }
} 
```

请帮帮我

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-31T10:57:12.220

好吧，我很高兴看到[php](/questions/tagged/php "显示标记为“php”的问题")仍然能够忽略显而易见的问题。

有很多方法可以用循环和各种各样的东西来做到这一点，但是*正确*的方法是使用一个子数组`cars`，你可以轻松地一次性销毁它。

所以而不是创造

```
$_SESSION["cars_registration"];
$_SESSION["cars_make"]; 
```

等，您将创建：

```
$_SESSION["cars"]["registration"];
$_SESSION["cars"]["make"]; 
```

因此，当您取消设置时，您只需执行以下操作：

```
unset($_SESSION["cars"]); 
```

`$_SESSION`可以像任何其他数组一样将数据保存在多维结构中 - 它不需要是值的平面集合。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-31T10:51:42.973

你几乎明白了！

```
 foreach($_SESSION as $key => $value)
    {
        if (strpos($key, 'cars_') === 0)
        {
          unset($_SESSION[$key]); //add this line
        }
    } 
```

这里有一些解释。在里面`foreach`你设置`$key`为一个变量来保存每次迭代`key`的`$_SESSION`数组，它与`$value`

参考：

[http://php.net/manual/en/control-structures.foreach.php](http://php.net/manual/en/control-structures.foreach.php)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-31T10:51:13.427

只需使用`unset`.

```
foreach($_SESSION as $key => $value)
{
    if (strpos($key, 'cars_') === 0)
    {
      unset($_SESSION[$key]);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-31T10:52:52.573

**session_unregister** — 从当前会话中取消注册全局变量 自 PHP 5.3.0 起，该函数已被弃用。强烈建议不要依赖此功能。

**session_unset** — 释放所有会话变量 不要使用 unset($_SESSION) 取消设置整个 $_SESSION，因为这将禁用通过 $_SESSION 超全局变量注册会话变量。

**session_destroy** — 销毁注册到会话的所有数据

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-31T10:53:08.617

使用 PHP，您可以使用[`unset`](http://php.net/manual/en/function.unset.php)“销毁”变量。因此，一旦您确信密钥符合您的标准，您可以执行以下操作：

```
unset($_SESSION($key)); 
```

# orbeon - orbeon：将 xforms 实例与 xml 模式复杂类型绑定

> ID：14100579
> 
> 赞同：0
> 
> 时间：2012-12-31T10:49:38.557
> 
> 标签：orbeon

我正在尝试根据 XML Schema 绑定 XForms 实例。它适用于构面，例如在以下情况下，`ValeurNoteType`对类型的限制在哪里`xs:decimal`：

```
<xforms:bind nodeset="instance('note-template')">
    <xforms:bind nodeset="Valeur" type="ValeurNoteType"/>
</xforms:bind> 
```

XForms 1.1 似乎不支持用于绑定的复杂类型，如下例所示，其中`ExamenType`是序列：

```
<xforms:bind nodeset="instance('examen-template')">
    <xforms:bind nodeset="Examen" type="ExamenType"/>
</xforms:bind> 
```

我想要的是避免为xml 模式中存在的类型的`<xforms:bind nodeset="Titre" required="true()"/>`每个元素（或其他条件，如序列中元素的类型等）编写。`ExamenType``Min Occurs = 1``xs:date`

有没有办法用 Orbeon 做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T03:11:47.767

XForms 1.1 清楚地指定了如何`type`处理属性：

> “`type`模型项属性不适用于包含子元素的实例节点。`type`模型项属性将数据类型（如 [XML Schema 第 2 部分] 中定义）与字符串值（如 [XPath 1.0] 中定义）相关联实例节点。被关联的数据类型可以从 simpleType 定义中获取，也可以从 complexType 中获取 simpleContent 定义。如果无法如前所述获取数据类型，则使用 Default Value of `xsd:string`。

换句话说，该`type`属性仅用作验证文本内容的一种方式，而不是文档的结构。

如果存在模式，则验证整个实例（Orbeon 表单具有控制它的扩展，请参阅[验证](http://wiki.orbeon.com/forms/doc/developer-guide/xforms-validation#TOC-Controlling-the-XML-Schema-validation-mode)），并且在该过程中节点也可以标记为无效，包括由于复杂的内容验证。但我不确定这是否会对您的情况有所帮助。无论如何，这是一个独立于`type`属性处理的过程。

# python - Python - 通过自动化过程添加字典

> ID：14100581
> 
> 赞同：1
> 
> 时间：2012-12-31T10:49:43.087
> 
> 标签：python, dictionary

我正在编写一个渗透程序，通过它检查两个坐标，如果它们在给定的半径内，我将它们添加到字典（字典中的列表，如果有帮助）以显示它们是通过类似的东西连接的以下：

```
def connected(x1,y1,x2,y2,radiusvalue):
    radius = ((x1-x2)**2 + (y1-y2)**2)**.5
    if radius <= radiusvalue:
                # Search pre-existing dictionaries
                # Create new dictionary and add (x1, y1) & (x2, y2)
                #   or add to pre existing dictionary containing either (x1, y1) 
                #   or (x2, y2)
    else:
        return False 
```

但是，我被注释掉的部分卡住了，主要是因为我不知道如何在没有 d = {datahere} 的情况下创建字典。如果无法做到这一点，我将如何去做我想做的事情？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T11:23:24.673

对于这个问题，您不需要直接使用字典。

这个问题可以直接用union-find数据结构解决，不用字典。

相反，当您实施 union-find 时，您可以选择使用字典，但不仅限于此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T11:03:53.037

这是一个开始，但您并没有确切说明该算法的用途，因此这可能不是最有效的方法。

```
def add(pointdict,x1,y1,x2,y2):
    # If (x1,y1) isn't present yet, create an empty list of points
    if (x1,y1) not in pointdict:
        pointdict[(x1,y1)] = []
    # Add (x2,y2) to the list of points connected to (x1,y1)
    pointdict[(x1,y1)].append((x2,y2))

def connected(x1,y1,x2,y2,radiusvalue,pointdict):
    radius = ((x1-x2)**2 + (y1-y2)**2)**.5
    if radius <= radiusvalue:
        # Connect (x1,y1) to (x2,y2)
        add(pointdict,x1,y1,x2,y2)
        # Connect (x2,y2) to (x1,y1)
        add(pointdict,x2,y2,x1,y1)
        return True
    else:
        return False 
```

# cassandra - 如何使用java从cassandra读取所有数据类型的行？

> ID：14100586
> 
> 赞同：0
> 
> 时间：2012-12-31T10:50:10.383
> 
> 标签：cassandra, hector, cql

我想读取 Cassandra 中给定键空间和列族的所有数据类型的行。要读取数据，我尝试使用 CQL，如下所示

```
CqlQuery<String, String, ByteBuffer> cqlQuery = new CqlQuery<String, String, ByteBuffer>(keyspaceOperator, se, se, be);

cqlQuery.setQuery("select * from colfam1");

QueryResult<CqlRows<String, String, ByteBuffer>> result = cqlQuery.execute(); 
```

甚至我也尝试过使用 Hector 切片查询 API

```
 Cluster cluster = HFactory.getOrCreateCluster("Test Cluster", "localhost:9160");

 Keyspace keyspace = HFactory.createKeyspace("rajesh", cluster);
    SliceQuery<String, String, String> sliceQuery = HFactory.createSliceQuery(keyspace, stringSerializer, stringSerializer, stringSerializer);
    sliceQuery.setColumnFamily("colfam1").setKey("key123");
    sliceQuery.setRange("", "", false, 4);

 QueryResult<ColumnSlice<String, String>> result = sliceQuery.execute(); 
```

但在这两种方式中，我都能够读取所有行，但我无法读取数据类型。

任何人都可以帮助我使用 java 读取具有来自 cassandra 的数据类型的行值。？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T11:16:04.577

读取具有值的行非常简单。但我也想阅读元数据。这是解决方案

```
public Map<String, ArrayList<String>>  getMetaData(Client _client, String _keyspace) throws SQLException, NotFoundException, InvalidRequestException, TException{
    ArrayList<String> columnfamilyNames = new ArrayList<String>();
    ArrayList<String> columnNames = new ArrayList<String>();
    ArrayList<String> validationClasses = new ArrayList<String>();
    Map<String, ArrayList<String>> metadataMapList =new HashMap<String,ArrayList<String>>();
    KsDef keyspaceDefinition = _client.describe_keyspace(_keyspace);
    List<CfDef> columnDefinition = keyspaceDefinition.getCf_defs();
    for(int i=0;i<columnDefinition.size();i++){
        List<ColumnDef> columnMetadata = columnDefinition.get(i).getColumn_metadata();
        for(int j=0;j<columnMetadata.size();j++){
            columnfamilyNames.add(columnDefinition.get(i).getName());
            columnNames.add(new String((columnMetadata.get(j).getName())));
            validationClasses.add(columnMetadata.get(j).getValidation_class());
        }
    }
    metadataMapList.put("columnfamilyName", columnfamilyNames);
    metadataMapList.put("ColumnName", columnNames);
    metadataMapList.put("validationClass", validationClasses);
    return metadataMapList;
} 
```

仅供参考这里我使用节俭客户端。

# perl - 在 perl 中，使用默认参数调用多个子例程是不好的做法吗？

> ID：14100589
> 
> 赞同：17
> 
> 时间：2012-12-31T10:50:16.487
> 
> 标签：perl, subroutine, shift

我正在学习 perl，并且了解使用 shift 解压缩子例程参数是一种常见且公认的做法。我也明白，省略函数参数以使用默认`@_`数组是常见且可接受的做法。

考虑到这两件事，如果您调用不带参数的子例程，则`@_`可以（并且将，如果使用 shift）被更改。这是否意味着使用默认参数调用另一个子例程，或者实际上，`@_`在此之后使用数组，被认为是不好的做法？考虑这个例子：

```
sub total { # calculate sum of all arguments
    my $running_sum;
    # take arguments one by one and sum them together
    while (@_) {
       $running_sum += shift;
    }
    $running_sum;
}

sub avg { calculate the mean of given arguments
    if (@_ == 0) { return }
    my $sum = &total; # gets the correct answer, but changes @_
    $sum / @_ # causes division by zero, since @_ is now empty
} 
```

我的直觉告诉我，使用 shift 来解包参数实际上是不好的做法，除非您的子例程实际上应该更改传递的参数，但我在多个地方读到过，包括 Stack Overflow，这不是一个不好的做法。

所以问题是：如果使用 shift 是常见的做法，我是否应该总是假设传递的参数列表可能会被更改，作为子例程的副作用（如`&total`引用示例中的子例程）？有没有办法按值传递参数，所以我可以确定参数列表不会改变，所以我可以再次使用它（就像`&avg`引用文本中的子例程一样）？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-31T13:01:03.627

一般来说，`shift`从参数中 ing 是可以的——使用`&`sigil 来调用函数是不行的。（除了一些你可能永远不会遇到的非常特殊的情况。）

您的代码可能会被重新编写，因此它`total`不会`shift`来自`@_`. 使用 for 循环甚至可能更有效。

```
sub total {
  my $total = 0;
   $total += $_ for @_;
  $total;
} 
```

或者您可以使用以下`sum`功能`List::Util`：

```
use List::Util qw(sum);

sub avg { @_ ? sum(@_) / @_ : 0 } 
```

除了在面向对象的 Perl中提取外，使用`shift`并不常见。`$self`但是，由于您*总是*将函数称为`foo( ... )`，因此参数数组是否为s 并不*重要。* （关于一个函数，唯一值得注意的是它是否分配给 in 的元素，因为这些是您作为参数提供的变量的别名。分配给 in 的元素通常是不好的。）`foo` `shift``shift`
`@_``@_`

即使您不能更改 的实现`total`，使用显式参数列表调用 sub 也是安全的，因为参数列表是数组的副本：

(a) `&total`— 调用`total`相同的`@_`, 并覆盖原型。
(b) —`total(@_)`调用`total`. (c) — 调用, 的副本并覆盖原型。`@_`
`&total(@_)``total``@_`

表格 (b) 是标准的。表格 (c) 不应该被看到，除非在极少数情况下，同一包内的 subs 具有原型（并且不使用原型），并且由于某些模糊的原因必须覆盖它们。糟糕设计的证明。形式 (a)*仅*适用于尾调用 ( `@_ = (...); goto &foo`) 或其他形式的优化（*过早优化是万恶之源*）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-31T18:26:04.727

除非您有充分的理由，否则您应该避免使用`&func;`打电话的方式，并相信其他人也会这样做。

为了防止您`@_`被被调用者修改，只需执行`&func()`or `func`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-31T11:13:45.810

Perl 有时有点过于松懈，并且有多种访问输入参数的方法可能会使代码变得很臭且不一致。如果想要更好的答案，请尝试强加自己的标准。

这是我使用和看到的一些方法

狡猾的

```
sub login
{
    my $user = shift;
    my $passphrase = shift;
    # Validate authentication    
    return 0;
} 
```

扩大`@_`

```
sub login
{
    my ($user, $passphrase) = @_;
     # Validate authentication   
    return 0;
} 
```

显式索引

```
sub login 
{
    my user = $_[0];
    my user = $_[1];
    # Validate authentication
    return 0;
} 
```

使用函数原型强制执行参数（但这[并不流行](https://stackoverflow.com/questions/297034/why-are-perl-5s-function-prototypes-bad)）

```
sub login($$)
{
    my ($user, $passphrase) = @_;   
    # Validate authentication
    return 0;
} 
```

遗憾的是，您仍然必须执行自己复杂的输入验证/污点检查，即：

```
return unless defined $user;
return unless defined $passphrase; 
```

或者更好的是，提供更多信息

```
unless (defined($user) && defined($passphrase)) {
    carp "Input error: user or passphrase not defined";
    return -1;
} 
```

[Perldoc perlsub](http://perldoc.perl.org/perlsub.html)确实应该是您的第一个停靠点。

希望这可以帮助！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-31T15:59:45.210

以下是一些谨慎使用`@_`事项的示例。

**1\. Hash-y 参数**

有时您想编写一个可以获取键值对列表的函数，但其​​中一个是最常见的用途，您希望它无需键即可使用。例如

```
sub get_temp {
  my $location = @_ % 2 ? shift : undef;
  my %options = @_;
  $location ||= $options{location};
  ...
} 
```

所以现在如果你用奇数个参数调用函数，第一个是位置。这允许`get_temp('Chicago')`或`get_temp('New York', unit => 'C')`什至`get_temp( unit => 'K', location => 'Nome, Ak')`。对于您的用户来说，这可能是一个更方便的 API。通过移动奇数参数，now`@_`是一个偶数列表，并且可以分配给一个散列。

**2\. 调度**

假设我们有一个类，我们希望能够按名称调度方法（可能 AUTOLOAD 可能有用，我们将手动滚动）。也许这是一个命令行脚本，其中参数是方法。在这种情况下，我们定义了两种调度方法，一种是“干净的”，一种是“脏的”。如果我们用`-c`旗子跟注，我们会得到干净的旗子。这些方法通过名称找到方法并调用它。不同的是如何。肮脏的将自己留在堆栈跟踪中，干净的必须更加切割，但调度时不会出现在堆栈跟踪中。我们制作了一种`death`方法，可以为我们提供该痕迹。

```
#!/usr/bin/env perl

use strict;
use warnings;

package Unusual;

use Carp;

sub new { 
  my $class = shift;
  return bless { @_ }, $class;
}

sub dispatch_dirty { 
  my $self = shift;
  my $name = shift;
  my $method = $self->can($name) or confess "No method named $name";
  $self->$method(@_);
}

sub dispatch_clean { 
  my $self = shift;
  my $name = shift;
  my $method = $self->can($name) or confess "No method named $name";
  unshift @_, $self;
  goto $method;
}

sub death { 
  my ($self, $message) = @_;
  $message ||= 'died';
  confess "$self->{name}: $message";
}

package main;

use Getopt::Long;
GetOptions 
  'clean'  => \my $clean,
  'name=s' => \(my $name = 'Robot');

my $obj = Unusual->new(name => $name);
if ($clean) {
  $obj->dispatch_clean(@ARGV);
} else {
  $obj->dispatch_dirty(@ARGV);
} 
```

所以现在如果我们`./test.pl`调用死亡方法

```
$ ./test.pl death Goodbye
Robot: Goodbye at ./test.pl line 32
    Unusual::death('Unusual=HASH(0xa0f7188)', 'Goodbye') called at ./test.pl line 19
    Unusual::dispatch_dirty('Unusual=HASH(0xa0f7188)', 'death', 'Goodbye') called at ./test.pl line 46 
```

但我们`dispatch_dirty`在跟踪中看到。相反，如果我们调用`./test.pl -c`，我们现在使用干净的调度程序并获取

```
$ ./test.pl -c death Adios
Robot: Adios at ./test.pl line 33
    Unusual::death('Unusual=HASH(0x9427188)', 'Adios') called at ./test.pl line 44 
```

这里的关键是[`goto`](http://p3rl.org/goto)（不是邪恶的 goto），它接受子例程引用并立即将执行切换到该引用，使用当前的`@_`. 这就是为什么我必须`unshift @_, $self`让调用者为新方法做好准备。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-31T12:20:01.390

参考：

```
sub refWay{
    my ($refToArray,$secondParam,$thirdParam) = @_;
    #work here
}

refWay(\@array, 'a','b'); 
```

哈希方式：

```
sub hashWay{
   my $refToHash = shift; #(if pass ref to hash)
   #and i know, that:
   return undef unless exists $refToHash->{'user'};
   return undef unless exists $refToHash->{'password'};   

   #or the same in loop:
   for (qw(user password etc)){
       return undef unless exists $refToHash->{$_};
   }
}

hashWay({'user'=>YourName, 'password'=>YourPassword}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-31T13:02:56.230

我尝试了一个简单的例子：

```
#!/usr/bin/perl

use strict;

sub total {

    my $sum = 0;
    while(@_) {
        $sum = $sum + shift;
    }
    return $sum;
 }

sub total1 {

my ($a, $aa, $aaa) = @_;

return ($a + $aa + $aaa);
}

my $s;
$s = total(10, 20, 30);
print $s;
$s = total1(10, 20, 30);
print "\n$s"; 
```

两个打印语句都给出了 60 的答案。

但我个人认为，应该以这种方式接受这些论点：

```
 my (arguments, @garb) = @_; 
```

为了避免以后出现任何问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-31T13:17:57.630

[我在http://perldoc.perl.org/perlsub.html](http://perldoc.perl.org/perlsub.html)找到了以下 gem ：

> “是的，仍然存在与 @_ 的可见性有关的未解决问题。我暂时忽略了这个问题。（但请注意，如果我们使 @_ 词法作用域，那些匿名子例程可以像闭包一样......（哎呀，这听起来有点口语吗？（没关系。））”

您可能遇到了这些问题之一:-(

OTOH amon 可能是对的 -> +1

# jquery - jPlayer 停止调用 jQuery.load() 方法以刷新 chrome 上的内容，但适用于 firefox

> ID：14100591
> 
> 赞同：5
> 
> 时间：2012-12-31T10:50:26.410
> 
> 标签：jquery, google-chrome, safari, jplayer

我正在使用 jPlayer 播放音频。我们需要不间断的播放。为此，我们使用 jQuery.load() 方法来加载页面内容并替换页面上的内容。

我们不会以任何方式刷新 jPlayer 内容。

该代码在 Firefox 中运行良好，jPlayer 可以不间断地播放音频。但是在 chrome 和 safari 上，jPlayer 会在 jquery load 方法执行后停止然后重新启动。

此外，当我在本地机器上运行代码时，它们在任何浏览器中都不会中断。只有当我在服务器上运行代码时，它们才会中断。

我们需要音乐不间断。

我的代码如下：

```
function loadContent(pagePath) {
    //Method called on menu click to load content without page refresh
    //Loading the said page (pagePath - relative path of page)
    jQuery('#containerDiv').fadeOut(200, function() {
    jQuery('#waitingDiv').show();
        jQuery(this).empty();
        jQuery(this).load(pagePath, function() {
        jQuery(this).fadeIn(200, function() {
            jQuery('#waitingDiv').hide();
        });
    });
    });
}

//JPlayer initiation code on first page load
jQuery("#jquery_jplayer_1").jPlayer({
    ready: function () {
        jQuery(this).jPlayer("setMedia", {mp3: '../'+path});
    },
    swfPath: "../swf",
    supplied: "mp3",
    wmode: "window"
}); 
```

有什么建议么？

感谢 Akhilesh Aggarwal

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T18:53:30.453

尝试将 JPlayer 启动代码移到 loadContent 函数上方

# ubuntu - 图像未显示在 ubuntu 的 xampp 中

> ID：14100603
> 
> 赞同：0
> 
> 时间：2012-12-31T10:51:33.237
> 
> 标签：ubuntu, xampp

我在 ubuntu 12.10 中使用 xampp。我的问题是，当我从 htdocs 打开文件夹时，图像无法显示，但它在 windows xp 中运行良好，即使当我在不运行 apache 服务器的情况下正常打开此文件夹时它也能正常工作，这意味着当我使用“localhost/somefolder/index .html”它的图像不显示，但如果我使用“file:///opt/lampp/htdocs/somefolder/index.html”，它在同一个文件中效果很好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T00:36:21.120

我有几次同样的问题。当我将文件权限更改为：

```
 chmod -R 777 path-to-your-folder 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-07T03:25:42.003

我无权更改信息。所以我更改了该文件夹的权限。我执行以下操作::

```
1) **cd **

2) **cd /opt/lampp/htdocs**

3) **chmod 777 * -R** 
```

# wpf - wpf（MVVM）中列表视图中的项目选择

> ID：14100608
> 
> 赞同：0
> 
> 时间：2012-12-31T10:52:27.280
> 
> 标签：wpf, listview, mvvm

我有两个列表视图和两个按钮（添加和删除）。我可以从一个列表视图中选择一个项目到另一个列表视图。我已经实现了项目从一个列表到另一个列表的移动。但我也希望在另一个列表视图中选择移动的项目。如果我选择多个项目并移动它，那么我希望在移动的列表视图中选择多个项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T11:37:59.680

在您将项目添加到 second`ListBox`之后，它们也添加到 second`ListBox`的`SelectedItems`属性中。您可以在向其添加项目之前调用该属性的`Clear()`方法，`SelectedItems`以便仅选择新项目。

例子：

```
list2.SelectedItems.Clear();

foreach (var item in list1.SelectedItems.OfType<object>().ToArray())
{
     list1.Items.Remove(item);
     list2.Items.Add(item);
     list2.SelectedItems.Add(item);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T11:56:22.873

[在视图模型中管理多项选择](http://www.codeproject.com/Articles/412417/Managing-Multiple-selection-in-View-Model-NET-Metr) - 本文使用 Windows 8 现代 UI 应用程序特定库，但基本概念相似。

本文说明了如何保持 Multiple `SelectedItems`of Different`ItemsControl`同步。

# ruby - 在模块化 Sinatra 应用程序中标准化 api 响应

> ID：14100617
> 
> 赞同：0
> 
> 时间：2012-12-31T10:52:55.803
> 
> 标签：ruby, api, sinatra, rack, middleware

我正在开发一个 api 作为模块化 Sinatra Web 应用程序，并希望标准化返回的响应而不必明确这样做。我认为这可以通过使用中间件来实现，但在大多数情况下都失败了。下面的示例应用程序是我到目前为止所拥有的。

**配置.ru**

```
require 'sinatra/base'
require 'active_support'
require 'rack'

class Person
  attr_reader :name, :surname
  def initialize(name, surname)
    @name, @surname = name, surname
  end
end

class MyApp < Sinatra::Base

  enable :dump_errors, :raise_errors
  disable :show_exceptions

  get('/string') do
    "Hello World"
  end

  get('/hash') do
    {"person" => { "name" => "john", "surname" => "smith" }}
  end

  get('/array') do
    [1,2,3,4,5,6,7, "232323", '3245235']
  end

  get('/object') do
    Person.new('simon', 'hernandez')
  end

  get('/error') do
    raise 'Failure of some sort'
  end
end

class ResponseMiddleware
  def initialize(app)
    @app = app
  end

  def call(env)
    begin
      status, headers, body = @app.call(env)
      response = {'status' => 'success', 'data' => body}
      format(status, headers, response)
    rescue ::Exception => e
      response = {'status' => 'error', 'message' => e.message}
      format(500, {'Content-Type' => 'application/json'}, response)
    end
  end

  def format(status, headers, response)
    result = ActiveSupport::JSON.encode(response)
    headers["Content-Length"] = result.length.to_s
    [status, headers, result]
  end
end

use ResponseMiddleware
run MyApp 
```

示例（以 JSON 格式）：

```
/string
  Expected: {"status":"success","data":"Hello World"}
  Actual:   {"status":"success","data":["Hello World"]}

/hash (works)
  Expected: {"status":"success","data":{"person":{"name":"john","surname":"smith"}}}
  Actual:   {"status":"success","data":{"person":{"name":"john","surname":"smith"}}}

/array
  Expected: {"status":"success","data": [1,2,3,4,5,6,7,"232323","3245235"]}
  Actual:   {"status":"error","message":"wrong number of arguments (7 for 1)"}

/object
  Expected: {"status":"success","data":{"name":"simon","surname":"hernandez"}}
  Actual:   {"status":"success","data":[]}

/error (works)
  Expected: {"status":"error","message":"Failure of some sort"}
  Actual:   {"status":"error","message":"Failure of some sort"} 
```

如果您执行代码，您将看到 /hash 和 /error 会返回所需的响应，但其余的则不会。理想情况下，我不想更改 MyApp 类中的任何内容。它目前正在 Sinatra 1.3.3、ActiveSupport 3.2.9 和 Rack 1.4.1 之上构建。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T14:49:04.177

在 irc.freenode.org 上的#sinatra 的帮助下，我设法将它归结为我想要的。我将以下内容添加到**MyApp**：

```
def route_eval
  result = catch(:halt) { super }
  throw :halt, {"result" => result}
end 
```

然后我在 ResponseMiddleware 中更改了以下行：

```
response = {'status' => 'success', 'data' => body} 
```

到

```
response = {'status' => 'success', 'data' => body["result"]} 
```

我所有的测试用例都通过了。

# c# - asp.net 中的替代图像显示

> ID：14100618
> 
> 赞同：2
> 
> 时间：2012-12-31T10:53:00.087
> 
> 标签：c#, javascript, asp.net, datalist

我正在尝试提供替代图像，因为某些图像已损坏并且无法显示，我尝试使用 js 但没有成功，因此需要有关如何执行相同操作的帮助和建议。场景是在页面加载时，学生的信息绑定到 DataList，并在此基础上通过 GetImage 类从另一个表中提取图像，但问题是某些图像已损坏，因此我想显示另一个虚拟图像。我使用 CSS 更改了 BG 图像，但效果不如预期。

```
 <asp:DataList ID="DataList1" CssClass="slider" r RepeatColumns="6" RepeatDirection="Vertical" runat="server" OnEditCommand="DataList1_EditCommand" OnItemCommand="DataList1_ItemCommand">
<ItemTemplate>
    <ul>
    <li><a class="info" href="#">
        <asp:ImageButton CssClass="imagetest" AlternateText=" " ID="Image1" name="mybutton" runat="server" Width="140" Height="140" CommandName="image" OnLoad="changeImage();" CommandArgument="image" CausesValidation="false" ImageUrl='<%# "GetImage.aspx?source=" + Eval("city") +"&RollNo="+ Eval("RollNo") +"&state="+ Eval("state")+"&fname="+Eval("FirstName") +"&lname=" + Eval("LastName") %>'
        </li>
    </ul>
</ItemTemplate>
</asp:DataList>

protected void Page_Load(object sender, EventArgs e)
{       
    string city = Request.QueryString["city"];
    string RollNo = Request.QueryString["RollNo"];
    string state = Request.QueryString["state"];
    string fname = Request.QueryString["fname"];
    string lname = Request.QueryString["lname"];
    DataAccess dao = new DataAccess();
    dao.openConnection();
    byte[] arr = dao.GetPicture(city, RollNo, state, fname, lname);
    //Response.BinaryWrite(arr);
    try
    {    
        Response.BinaryWrite(arr);
    }    
    catch (Exception) { }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-31T11:09:19.830

如果未加载，您可以使用`onerror`图像并显示替代图像。

这是一个带有一个 img 标签的基本示例，在 asp.net 上，您可以进行类似的`onerror`调用

```
<img id="one" src="image.gif" onerror="imgError(this)">​ 
```

和 javascript

```
function imgError(me)
{
   // place here the alternative image
   var AlterNativeImg = "/images/emptyimage.gif";

   // to avoid the case that even the alternative fails        
   if(AlterNativeImg != me.src)
     me.src = AlterNativeImg;
} 
```

并直播： http: [//jsfiddle.net/DxN69/2/](http://jsfiddle.net/DxN69/2/) 和[http://jsfiddle.net/DxN69/3/](http://jsfiddle.net/DxN69/3/)

最后：http: [//jsfiddle.net/DxN69/4/](http://jsfiddle.net/DxN69/4/)

## 在 asp.net 图片按钮上

您只需将`onerror="imgError(this)"`您的 asp.net 标签添加为：

```
<asp:ImageButton ID="ImageButton1" runat="server" onclick="ImageButton1_Click" ImageUrl="image.jpg" onerror="imgError(this)" /> 
```

即使图像按钮被渲染为`input`最终结果也是一样的。

## 图片从后面的代码发送

在您上次更新之后，您清楚地知道您在尝试将页面作为图像发送时犯了一个大错误，而您甚至没有更改`ContentType`它。所以使用 a `handler`，例如创建一个名为的新处理程序`loadImage.ashx`，并将您的代码编写为：

```
 public void ProcessRequest(HttpContext context)
    {
      // this is a header that you can get when you read the image
      context.Response.ContentType = "image/jpeg";
      // cache the image - 24h example
      context.Response.Cache.SetExpires(DateTime.Now.AddHours(24));
      context.Response.Cache.SetMaxAge(new TimeSpan(24, 0, 0));
      // render direct
      context.Response.BufferOutput = false;

      // load here the image as you do
      ....

      // the size of the image
      context.Response.AddHeader("Content-Length", imageData.Length.ToString());
      // and send it to browser
      context.Response.OutputStream.Write(imageData, 0, imageData.Length);
    } 
```

你的电话将是这样的：

```
<asp:ImageButton CssClass="imagetest" AlternateText=" " ID="Image1" name="mybutton" runat="server" Width="140" Height="140" CommandName="image" OnLoad="changeImage();" CommandArgument="image" CausesValidation="false" ImageUrl='<%# "loadImage.ashx?source=" + Eval("city") +"&RollNo="+ Eval("RollNo") +"&state="+ Eval("state")+"&fname="+Eval("FirstName") +"&lname=" + Eval("LastName") %>' 
```

现在在这里您可以仔细检查图像是否存在，如果不存在则发送一些默认图像。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T11:21:03.453

```
<img src="images.png" onerror="this.onerror=null;this.src='default.png'"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T11:01:24.590

我更愿意为您要显示的设置`imageURL`属性。`default image`如果图像存在于`database`记录中，则将其替换`imageURL`为该记录，否则保持原样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-31T11:45:26.990

只需使用`onerror event`

```
<img src="image.gif" onerror="alert('The image could not be loaded.')"> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-29T16:16:02.180

而不是创建一个服务器端图像按钮为什么你不创建一个带有链接的 html 图像，它充当一个图像按钮。

```
<a class="info" href="#">
    <img src="<%# GetImage.aspx?source=" + Eval("city") +"&RollNo="+ Eval("RollNo") +"&state="+ Eval("state")+"&fname="+Eval("FirstName") +"&lname=" + Eval("LastName") %>" onerror="this.src='<%=Page.ResolveClientUrl("~/images/emptyimage.gif") %>'" alt="" class="imagetest" />
</a> 
```

# javascript - How to access div id from next page in jquery mobile

> ID：14100621
> 
> 赞同：0
> 
> 时间：2012-12-31T10:53:14.563
> 
> 标签：javascript, jquery, html, jquery-mobile

**page1.html**

```
<!DOCTYPE html>
<html>
    <head>
        <script src="common_script.js"></script>
    </head>
    <body onload="init()">
        <h1>My First Page</h1>
        <p id="demo">This is a paragraph.</p>
    </body>
</html> 
```

**page2.html**

```
<!DOCTYPE html>
<html>
    <head>
        <script src="common_script.js"></script>
    </head>
    <body>
        <h1>My second Page</h1>
        <div id="nextpageId">I want to access my div</div>
    </body>
</html> 
```

**common_script.js**

```
function init() {
    alert($("#nextpageId").text());
} 
```

In the following code I have two pages i.e. `page1.html` & `page2.html` and these contain the common JavaScript file.

My problem is to access `page2.html` `div#id` when `page1.html` is loading.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T11:52:15.407

在你的 javascript 中使用它

```
$('body').attr('unique_id') 
```

并在正文标签中为您的页面提供唯一 ID

```
<body id='unique_id'> 
```

或者你也可以传入 url

或使用此代码

```
function init() {
    alert( $('div').attr('id') == "nextpageId" )
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T14:12:25.020

您没有明确声明您正在使用 jQuery Mobile，但您已经将您的问题标记为这样并且正在使用 PhoneGap，所以我会假设......

您的页面不符合标准的 jQuery Mobile 布局。他们缺少必需`data-role`的 s。特别`data-role="page"`是与子`data-role="content"`声明一起。

[http://jquerymobile.com/demos/1.2.0/docs/pages/page-anatomy.html](http://jquerymobile.com/demos/1.2.0/docs/pages/page-anatomy.html)

您的第二页将通过 Ajax 加载，`<script>`第二页上的标记将被忽略。实际上，只会`<div data-role="page">`加载嵌套部分的内容。

要提取该标记，您可以简单地访问`<div>`给定的 ID，并且该 ID 应该是唯一的。您可以使用`pageinit`或`pageshow`事件来控制 Ajax 加载的时间。

[http://jquerymobile.com/demos/1.2.0/docs/api/events.html](http://jquerymobile.com/demos/1.2.0/docs/api/events.html)

# magento - 奇怪...无法在自定义页面上的 magento 中获取购物车项目（仅当客户登录时）

> ID：14100626
> 
> 赞同：0
> 
> 时间：2012-12-31T10:53:38.197
> 
> 标签：magento, shopping-cart, magento-1.7, cart

这是我用于获取购物车物品及其属性的标准代码，仅在客户未登录时才有效。一旦我使用我的帐户登录，此脚本就会停止工作并且不会返回购物车中的物品。购物车项目数也是 0。但只要我关闭浏览器（会话结束..），脚本就会正确返回购物车项目！很奇怪，一直查不出原因。请指导，有人吗？

```
require_once('../app/Mage.php') ;
umask(0);
Mage::app();
Mage::getSingleton('core/session', array('name'=>'frontend'));

$session = Mage::getSingleton('checkout/session');
$items = $session->getQuote()->getAllVisibleItems();
foreach ($items as $item) {
//$canProceed=0;
echo $productname = $item->getName();   //HERE IS THE COMPLETE CODE:<?php 
ini_set('display_errors',true);
require_once('../app/Mage.php') ;
Mage::setIsDeveloperMode(true);
umask(0);
Mage::app();

  //Getting buyer's country label

 $bcountry1 =  $_REQUEST['country']; //gets country code

$_countries = Mage::getResourceModel('directory/country_collection')
                                ->loadData()
                                ->toOptionArray(false);

foreach($_countries as $_country){
if ($_country['value']==$bcountry1){$bcountry = $_country['label'];}
}
//Fetching vendor for each product

$config  = Mage::getConfig()->getResourceConnectionConfig("default_setup");

$dbinfo = array("host" => $config->host,
        "user" => $config->username,
        "pass" => $config->password,
        "dbname" => $config->dbname    );

$hostname = $dbinfo["host"];
$user2 = $dbinfo["user"];
$password = $dbinfo["pass"];
$dbname = $dbinfo["dbname"];

$dbhandle = mysql_connect($hostname,$user2,$password) or die("Unable to connect"); 
$selected = mysql_select_db("myart2",$dbhandle);

$Proceed=0;

//Getting all products in the cart
//echo $cart = Mage::getSingleton('checkout/cart')->getItemsCount();
// Secret Sauce - Initializes the Session for the FRONTEND
// Magento uses different sessions for 'frontend' and 'adminhtml'
Mage::getSingleton('core/session', array('name'=>'frontend'));

$session = Mage::getSingleton('checkout/session');
$items = $session->getQuote()->getAllVisibleItems();
foreach ($items as $item) {
//$canProceed=0;
$productname = $item->getName();

$product = Mage::getModel('catalog/product')->loadByAttribute('sku',     $item->getSku(), array('manufacturer'));
    $manufacturer =   $product->getResource()->getAttribute('manufacturer')->getFrontEnd()->getValue($product);

 $qry="select * from vendors WHERE company_name='$manufacturer'";
$result =  mysql_query($qry) or die("Unable to run select query");
  $row = mysql_fetch_array($result) or die("Unable to fetch data");

if( strcasecmp($row['country'],$bcountry)!=0 && $row['ships_abroad']!=1)
{$Proceed=1;$productnames[]=$productname;}
}

if($Proceed==1)
{
echo implode(',',$productnames);
}
else {echo 1; }
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T16:38:03.503

我已经测试了以下四个主要排列，并且代码在所有情况下都适用于股票 CE1.7 实例：

*   创建客人报价
*   通过登录将客人报价转换为客户报价
*   通过登录实例化现有客户报价
*   通过登录将客人报价与客户报价合并

如下调整服务器和应用程序环境参数以查看并排除任何错误（**编辑 - 添加完整脚本；*注意关闭“}”*）**：

```
<?php

error_reporting(E_ALL | E_STRICT);
ini_set('display_errors',true);
require_once('../app/Mage.php') ;
Mage::setIsDeveloperMode(true);
umask(0);
Mage::app();

$session = Mage::getSingleton('checkout/session');
$items = $session->getQuote()->getAllVisibleItems();

foreach ($items as $item) {
    //$canProceed=0;
    echo $productname = $item->getName();
} 
```

# mysql - GROUP CONCATing multiple rows

> ID：14100631
> 
> 赞同：0
> 
> 时间：2012-12-31T10:54:07.177
> 
> 标签：mysql, sql, select, group-concat

I'm using MySQL 5.1.66 and I came up with a select query to select all the men's shirts and their sizes and prices. I used `GROUP CONCAT` to merge the size column and price column from their parent tables into the same column. Here's the statement I made

```
SELECT shirts.shirt_name, shirts.men AS main_photo, 
       GROUP_CONCAT(shirt_sizes.size_name,shirt_prices.price) AS sizes
FROM shirts 
JOIN shirts_link ON shirts_link.shirt_id=shirts.id
JOIN shirt_sizes ON shirt_sizes.id=shirts_link.size_id
JOIN shirt_prices ON shirt_prices.id=shirts_link.price_id
WHERE shirts.men!='' AND shirts_link.adult='y'
GROUP BY shirts.id 
```

By doing this, are the size columns and price columns still two separate entities within that one column in the select statement? Another thing I noticed is the order of the sizes is all mixed up. For example, this is a row from one of the columns

```
medium29.22,large29.22,1x-large29.22,2x-large30.44,small29.22,3x-large31.70 
```

why isn't it going from small-3x like it's organized on the table? I imagine in the event of what I'm trying to do in terms of injecting it into we website through PHP if it were to auto load it would go in that unorganized manner as well. How can I fix this?

My ultimate goal here is to be able to create a selection that can auto populate each row into the javascript apps I created. I need the load the shirt name, main picture, then each size and price into the divs I have coded for them. Let me know if you need to see the actual tables being used. Thanks in advance :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T10:58:43.293

首先 group_concat 函数的目的是将特定列的所有值保留在分组操作中。例如，

```
Table1
ID   field1    field2
1     ram      science
2     ramesh   maths
1     ram      maths 
```

如果您的要求是获取特定人的主题，那么 GROUP_CONCAT 将产生如下结果，

```
ID  field1   field3
1   ram      science,maths
2   ramesh   maths 
```

希望这能提供一些见解

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T12:55:20.370

尝试这个：

```
SELECT s.shirt_name, s.men AS main_photo, 
       GROUP_CONCAT(CONCAT(ss.size_name, '.', sp.price)) AS sizes
FROM shirts s 
INNER JOIN shirts_link sl ON sl.shirt_id = s.id
INNER JOIN shirt_sizes ss ON ss.id = sl.size_id
INNER JOIN shirt_prices sp ON sp.id = sl.price_id
WHERE s.men!='' AND sl.adult='y'
GROUP BY s.id 
```

# mysql - mysql pivot table or something

> ID：14100634
> 
> 赞同：0
> 
> 时间：2012-12-31T10:54:14.300
> 
> 标签：mysql, sql, pivot, pivot-table

Ok, I'm still a beginner in sql and can not figure this one out yet. I have four tables: companies, persons, details, person_details.

```
companies: 
id, compname
(1, ACME), 
(2, ACME Group), ...

persons: 
id, name, lastname, company id
(1, donald, duck, 1), 
(2, lucky, luke, 1), 
(3, mickey, mouse, 2)

details: 
id, description
(1, 'weight'), 
(2, 'height'), 
(3, 'haircolor'), ...

person_details: 
id, persons id, details id, value
(1, 1, 1, 70), 
(2, 1, 3, 'red'), 
(3, 2, 1, 90), 
(4, 3, 2, 180) 
```

As you can see, not all persons have all the details and the list of available details is variable.

Now, for a given arary of person ids and detail ids, I would like to get rows containing: company name and id, person name and last name, detail name and value for each of the details in the supplied array. Let's say persons(1,2), details(1,3) should result in:

```
companies.id, companies.name, name, lastname, details.description, person_details.value,...    
    1, ACME, donald, duck, 'weight', 70, 'haircolor', 'red'
    2, ACEM, lucky, luke, 'weight', 90, 'haircolor', null 
```

Help, please...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T14:23:34.227

根据您的描述，您似乎想要对数据进行*透视*，但不幸的是 MySQL 没有*透视*函数，因此您需要使用带有`CASE`语句的聚合函数来复制它。

如果您提前知道描述值，则可以将查询硬编码为以下内容：

```
select c.id,
  c.compname,
  p.name,
  p.lastname,
  max(case when d.description = 'weight' then pd.value end) weight,
  max(case when d.description = 'haircolor' then pd.value end) haircolor,
  max(case when d.description = 'height' then pd.value end) height
from companies c
left join persons p
  on c.id = p.`company id`
left join person_details pd
  on p.id = pd.`persons id`
left join details d
  on pd.`details id` = d.id
-- where p.id in (1, 2)
group by c.id, c.compname, p.name, p.lastname 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/5949d/8)

如果您有未知数量的值，则可以使用[准备好的语句来动态生成](http://buysql.com/mysql/14-how-to-automate-pivot-tables.html)类似于以下内容的值：

```
SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT
    CONCAT(
      'MAX(CASE WHEN d.description = ''',
      description,
      ''' then pd.value end) AS ',
      description
    )
  ) INTO @sql
FROM details;

SET @sql = CONCAT('SELECT c.id,
                      c.compname,
                      p.name,
                      p.lastname, ', @sql, ' 
                  from companies c
                  left join persons p
                    on c.id = p.`company id`
                  left join person_details pd
                    on p.id = pd.`persons id`
                  left join details d
                    on pd.`details id` = d.id
                  -- where p.id in (1, 2)
                  group by c.id, c.compname, p.name, p.lastname');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/5949d/10)

两个版本都会生成结果：

```
| ID |   COMPNAME |   NAME | LASTNAME | WEIGHT | HEIGHT | HAIRCOLOR |
---------------------------------------------------------------------
|  1 |       ACME | donald |     duck |     70 | (null) |       red |
|  1 |       ACME |  lucky |     luke |     90 | (null) |    (null) |
|  2 | ACME Group | mickey |    mouse | (null) |    180 |    (null) | 
```

# matlab - the push button in matlab exe file doesn't work

> ID：14100640
> 
> 赞同：0
> 
> 时间：2012-12-31T10:54:40.863
> 
> 标签：matlab, matlab-figure, matlab-guide

I developed a Matlab GUI program which it has four editbox & one pushbutton; my application works properly when I run it with Matlab software, but after converting it to exe file (standalone), the pushbutton doesn't work, means it doesn't show the output in 'Result' editbox. so what's the problem? here is my pushbutton code:

```
function btnCal_Callback(hObject, eventdata, handles)
a=str2num(get(handles.txbLow,'string'));
b=str2num(get(handles.txbHi,'string'));
f=get(handles.txbForm,'string');
x=0.5*((b-a)*(-1*(3/5)^0.5)+b+a);
g=subs(f,'x',x);
sum=(g)*(5/9);
x=0.5*(b+a);
g=subs(f,'x',x);
sum=sum+(g)*(8/9);
x=.5*((b-a)*((3/5)^.5)+b+a);
g=subs(f,'x',x);
sum=sum+g*(5/9);
result=sum*((b-a)/2);
set(handles.txbResult,'string',result); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T11:27:54.253

首先，我有点困惑

```
result=sum*((b-a)/2);   % "result" is numeric
set(handles.txbResult,'string',result);   % "result" should be string 
```

接下来，只是作为一个提示。要“调试”您部署的代码，请尝试从 cmd 启动您的 exe，在这种情况下，您会在那里看到一些消息，它们可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-31T13:03:57.100

您的“结果”必须是双精度、字符或单元格。您可以通过例如

```
set(handles.txbResult,'String',char(result); 
```

但是：我在 Mac 上使用非常相似的代码遇到了完全相同的问题。如果通过 Matlab 中的“运行”执行，应用程序运行得非常好，但是一旦我将它编译为一个独立的应用程序，按下按钮时就会听到这种错误声音，没有其他任何事情发生。

尝试将“结果”变量设置为“全局”有助于解决我编写的另一个程序的这个问题（一个非常简单的“计算 a+b”的事情），但不适用于提到的稍微复杂的代码（3 个而不是 2 个输入和 3 个输出而不是 1)。

正在运行的超级简单代码：

```
function pushbutton1_Callback(hObject, eventdata, handles) %the button to push
...some code...
global statText;
set(statText,'String',char(output));

function text1_CreateFcn(hObject, eventdata, handles) %the outputfield
global statText;
statText = hObject; 
```

# c# - 当单元测试中预期失败时，验证方法调用仍然通过

> ID：14100642
> 
> 赞同：2
> 
> 时间：2012-12-31T10:55:19.130
> 
> 标签：c#, unit-testing, moq

我刚刚开始在我的单元测试中使用 Moq，但是在单元测试通过时遇到了问题——我认为不应该这样。

我有两个对象，一个将数据发送到队列，另一个实现`INotifier`在调度程序失败时调用的对象，它们看起来像这样（为简洁起见）：

```
public class EmailNotifier : INotifier
{
    public void Notify(string message) 
    {
        // sends the notification by email
    }
}

public class Despatcher
{
    public void Despatch(int batchNumber, INotifier failureNotifier)
    {
        try
        {
            if (batchNumber.Equals(0)) throw new InvalidOperationException("Error message");
        }
        catch (InvalidOperationException ex)
        {
            failureNotifier.Notify(ex.ToString());

            throw ex;
        }
    }
} 
```

我正在对 进行单元测试，`Despatcher`以专门验证在提供的（我在嘲笑）失败时`Notify`正在调用它（我故意通过传递 0 批号来强制失败）。我这样设置我的模拟：`INotifier``Despatcher`

```
[TestMethod]
[ExpectedException(typeof(InvalidOperationException))]
public void Despatcher_notifies_on_failure()
{
    var mockNotifier = new Mock<EmailNotifier>();
    mockNotifier.Setup(n => n.Notify(It.IsAny<string>())).Verifiable();

    var despatcher = new Despatcher();
    despatcher.Despatch(0, mockNotifier.Object);

    mockNotifier.Verify(n => n.Notify(It.IsAny<string>()), Times.Once());
} 
```

这很好地通过了测试，这是预期的，因为 0 批号会引发导致`INotifier`调用的异常`Notify`（当我逐步完成测试时，一切都按预期工作）。

所以，我继续注释掉该`failureNotifier.Notify(ex.ToString())`行并再次运行测试 - 通过了吗？我不确定我是否正确设置和验证，因为我现在只使用 Moq 大约 2 小时，但我认为我理解正确，但这让我有点失望。我希望这个测试失败，因为我特别想确保`Notify`在失败的情况下被调用 - 任何人都可以在这里看到任何明显的错误吗？提前感谢您一如既往的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-31T11:26:59.780

您的测试永远不会进入验证部分。为什么？这条线

```
despatcher.Despatch(0, mockNotifier.Object); 
```

抛出异常，由`ExpectedException`属性消耗，测试**结束**。该`mockNotifier.Verify`行永远不会执行。

你想要的是两个*单元*测试，而不是：

*   一项测试在异常时调用通知程序（使用`.Verify`）。请注意，您必须将`.Despatch`调用包装到`try { } catch { }`中，以便忽略该异常。
*   其次，检查是否重新抛出异常（使用`ExpectedException`）

# r - If语句在R中具有多个动作

> ID：14100643
> 
> 赞同：17
> 
> 时间：2012-12-31T10:55:20.680
> 
> 标签：r

我想写一个如下形式的 if 语句：

```
a=5
b=2

la<-function(a,b){
if(a>3){a}
else{b}
} 
```

现在我想做的不仅仅是在 if 语句中有一个动作，而是两个，例如：

```
if(a>3){a and c<<-1000} 
```

在这种情况下，返回 'a' 并在变量 'c' 中写入 1000

我的问题是如何在 if 语句之后执行多个操作。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-31T10:57:33.263

你应该使用分号

```
if(a>3){c<-1000;a} 
```

最后一条语句是返回值。

编辑这也适用于多个语句。如果使用换行符，可以省略分号，如

```
if(a>3) {
  c<-1000
  d<-1500
  a
} else {
  e <- 2000
  b
} 
```

编辑：这也应该适用`ifelse`。但是，您必须记住，您正在对向量进行操作。这是一个例子：

```
x <- sample(10, 100, replace=TRUE)
ifelse(x>3, {y <- 100; y+x}, x) 
```

这只会给 x 中大于 3 的元素加 100。

# php - 删除数据前弹出消息

> ID：14100644
> 
> 赞同：3
> 
> 时间：2012-12-31T10:55:25.420
> 
> 标签：php, popup

我试图在用户删除数据之前将弹出消息放入此代码中。这是我的代码。

```
while ($test = mysql_fetch_array($result))
{
    $id = $test['FailID'];

    echo "<tr align='center'>"; 
    echo"<td><font color='black'>" .$test['FailID']."</font></td>";
    echo"<td><font color='black'>" .$test['TajukFail']."</font></td>";
    echo"<td><font color='black'>". $test['JilidFail']. "</font></td>";
    echo"<td><font color='black'>". $test['StatusFail']. "</font></td>";    
    echo"<td> <a href ='daftarkemaskini.php?FailID=$id'>Edit</a>";
    echo"<td> <a href ='padamfail.php?FailID=$id'><center>Delete</center></a>";

    echo "</tr>";
} 
```

但是当我把它放在那里时，它根本不起作用。

```
echo"<td> <a href ='padamfail.php?FailID=$id' onClick="return confirm('are you sure you want to delete??');"><center>Delete</center></";>" 
```

谁可以帮我这个事？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-31T10:57:40.367

您需要转义双引号。您的代码最后还有另一个语法错误。

```
echo "<td> <a href='padamfail.php?FailID=$id' onClick=\"return 
confirm('are you sure you want to delete??');\"><center>Delete</center></a>"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T10:58:44.870

您将 javascript onclick 代码放在双引号内，用于终止回声。转义双引号：

```
echo"<td> <a href ='padamfail.php?FailID=$id' onClick=\"return confirm('are you sure you want to delete??');\"><center>Delete</center></a>" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-31T11:00:59.833

你可以试试这个——

```
echo "<td> <a href ='padamfail.php?FailID=$id' onClick=return confirm('are you sure you want to delete??');><center>Delete</center></;>"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-31T10:58:23.517

尝试转义字符串：

```
echo "<td> <a href ='padamfail.php?FailID=$id' onClick=\"return confirm('are you sure you want to delete??');\"><center>Delete</center></";>" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-31T11:03:38.993

请换行

```
 echo"<td> <a href ='padamfail.php?FailID=$id' onClick="return confirm('are you sure you want to delete??');"><center>Delete</center></";>" 
```

至

```
echo "<td> <a href ='padamfail.php?FailID=$id' onClick='return confirm('are you sure you want to delete??');' ><center>Delete</center></a>"; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-31T11:04:01.147

```
<div class="third">
<input type="button" value="Remove" class="remve" name="<?php echo $row['choice_id']; ?>" onClick="deleteImage(<?php echo $row['choice_id']; ?>)"style="cursor:pointer;">
</div>

<script type="text/javascript">
function deleteImage(x){
var conf = confirm("Are you sure you want to delete this choice?");
if(conf == true){
window.location = "addnewentry/choiceRemove.php?id="+x;
}
}
</script> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-03-31T13:00:09.540

`echo"<td><a href='delete.php?id={$row['id']}' onclick='return confirm_alert(this);' >Delete</a></td>";` **你应该试试这个代码，它肯定会工作**

=

```
<script>

//alert on delete

function confirm_alert(node) {

    return confirm("You are about to permanently delete a product. Click OK to continue or CANCEL to quit.");

}

</script>
```

```
<script>

//alert on delete

function confirm_alert(node) {

    return confirm("You are about to permanently delete a product. Click OK to continue or CANCEL to quit.");

}

</script>
```

希望这会帮助你

# ruby-on-rails - 设计测试数据库记录同时测试的冲突

> ID：14100646
> 
> 赞同：2
> 
> 时间：2012-12-31T10:55:26.903
> 
> 标签：ruby-on-rails, devise, tdd, factory-bot, rspec-rails

我从以下工厂生成用户、客户和发票

```
FactoryGirl.define do
  factory :user do
    sequence(:email) { |n| "person_#{n}@example.com" }
    password "foobar"
    password_confirmation "foobar"
  end

  factory :client do
    sequence(:name) { |n| "Client Name #{n}" }
    sequence(:address1) { |n| "#{n} Street name" }
    sequence(:address2) { |n| "#{n} Area name" }
    city "Chennai"
    state "Tamil Nadu"
    country "India"
    zipcode "600001"
    contactname "Sathish Manohar"
    sequence(:email) { |n| "person_#{n}@example.com"}
    user
  end

  factory :invoice do
    client
  end
end 
```

我有一些要求和型号规格，以下是我的主要要求规格：

[https://gist.github.com/4418869-clients_pages_spec.rb](https://gist.github.com/4418869)
[https://gist.github.com/4418876-invoices_pages_spec.rb](https://gist.github.com/4418876) _ _

在调用`users`中删除`after(:all) { User.delete_all }`所有内容时，所有测试在运行时都通过，以便使用`bundle exec rspec spec --order default`

当所有`users`都没有被删除时`after(:all) { User.delete_all }`，运行测试时会出现电子邮件唯一性错误。这是设计验证每个用户电子邮件的唯一性的错误，所以我认为在第二次运行测试时，`factory_girl`会尝试创建相同的用户。

这是错误消息：
`/home/sathish/.rvm/gems/ruby-1.9.3-p194@invoice_jet/gems/activerecord-3.2.8/lib/active_record/validations.rb:56:in `save!': Validation failed: Email has already been taken (ActiveRecord::RecordInvalid)`

如何摆脱此错误消息，并创建设计用户以进行正确的测试？

*背景信息：*
`spec_helper.rb`使用mysql作为数据库所有表都`config.use_transactional_fixtures = true`
使用`InnoDB`引擎

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T19:50:21.750

我认为您应该在每个规范之后定义一个完全清理数据库的默认策略，并通过这样做来保证每个测试的隔离。

看看[https://github.com/bmabey/database_cleaner](https://github.com/bmabey/database_cleaner)上的 Database Cleaner gem 。

您所要做的就是将 gem 放入您的 Gemfile 中，运行`bundle`（假设您使用的是 bundler）并定义一个策略，如下所示：

```
RSpec.configure do |config|

  config.before(:suite) do
    DatabaseCleaner.strategy = :transaction
    DatabaseCleaner.clean_with(:truncation)
  end

  config.before(:each) do
    DatabaseCleaner.start
  end

  config.after(:each) do
    DatabaseCleaner.clean
  end

end 
```

希望能帮助到你！

# javascript - 寻找一个绘制饼图的jQuery插件

> ID：14100647
> 
> 赞同：3
> 
> 时间：2012-12-31T10:55:29.990
> 
> 标签：javascript, jquery, html

> **可能重复：**
> [带有 jQ​​uery 的饼图](https://stackoverflow.com/questions/1223537/pie-chart-with-jquery)

我搜索了一个 jQuery 插件，它可以帮助我创建饼图，我找到了一些有用的插件。但我还想要为饼图的每个扇区附加点击函数事件处理程序。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-31T11:03:27.310

你应该试试谷歌图表。我在我的一个项目中使用了它，谷歌图表很容易集成和定制。尝试这个

[https://developers.google.com/chart/](https://developers.google.com/chart/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-31T11:11:34.523

> # d3.js 和 NVD3.js：

* * *

[http://nvd3.org/ghpages/scatter.html](http://nvd3.org/ghpages/scatter.html)

美的东西。是的，它们具有点击功能，包括深度钻取和重新定向、枢轴和 OLAP 风格的功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-31T11:05:12.113

您可以使用 jquery 的 jqplot 插件[http://www.jqplot.com/](http://www.jqplot.com/)。它是免费的，可以根据您的需要轻松修改，它有很多示例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-31T11:07:32.470

[http://filamentgroup.com/lab/update_to_jquery_visualize_accessible_charts_with_html5_from_designing_with/](http://filamentgroup.com/lab/update_to_jquery_visualize_accessible_charts_with_html5_from_designing_with/)

这也完全是 HTML5，只要给它一个 HTML`table`和一些选项，然后它就会把它变成一个图表。您只需要包含`type: 'pie'`在`options`.

虽然你没有得到你所追求的交互性，可悲的是。但是可以使用这个改进的版本添加它：[https ://github.com/irae/jquery-visualize](https://github.com/irae/jquery-visualize)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-31T11:16:24.373

这肯定会对你有所帮助。

[馅饼基本演示](http://www.highcharts.com/demo/pie-basic)

您可以从这里下载库文件和示例代码

[Highcharts 下载](http://www.highcharts.com/download)

# graph - 排除高于某个点的图形值

> ID：14100654
> 
> 赞同：1
> 
> 时间：2012-12-31T10:55:56.153
> 
> 标签：graph, graphite

我想确保在查看我的网络服务器响应时间图表时，我可以在图表的范围内看到从 0 到 5k 的详细程度。然而，偶尔会有超过 5k（文件下载）标记的指标，这会增加图表的比例，使得很难看到在常规值范围内发生了什么。

如何排除超过 5k 的度量值？请记住，我不希望指标本身被排除在外。

或者也许最好的办法是使用 log 缩小高点，但随后我会丢失实际的比例信息，这乍一看非常有用。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T19:18:43.370

从[石墨文档](http://graphite.readthedocs.org/en/0.9.10/)：

[http://graphite.readthedocs.org/en/latest/render_api.html#ymax](http://graphite.readthedocs.org/en/latest/render_api.html#ymax)

> *默认值：显示的任何系列的最高值*
> 
> 手动设置图形的上限。可以传递任何整数或浮点数。
> 
> 例子：
> 
> ```
> &yMax=0.2345 
> ```

看起来`yMax`参数只是一个建议。据报道，自 0.9.5 起严格执行。更多信息：[https ://bugs.launchpad.net/graphite/+bug/412663](https://bugs.launchpad.net/graphite/+bug/412663)

此外，来自： http: [//graphite.wikidot.com/url-api-reference](http://graphite.wikidot.com/url-api-reference)

> `yMin`并`yMax`为生成的图像设置最小和最大 y 值。`min=0&max=100`当您绘制的值是百分比时，这些参数的一个很好的用途是。

* * *

其他一些发现。不确定它们是否完全相关；可能会有所帮助。

**graphite-graph-dsl：**描述石墨图的小型 DSL
[https://github.com/behrendsj/graphite-graph-dsl](https://github.com/behrendsj/graphite-graph-dsl)

*   添加了定义正确 y 轴最小值和最大值的功能：
    [https ://github.com/behrendsj/graphite-graph-dsl/commit/11e146b0b3eb82faa7c1f5db5af324c81db66144](https://github.com/behrendsj/graphite-graph-dsl/commit/11e146b0b3eb82faa7c1f5db5af324c81db66144)

**graphene：** Graphene 是一个基于 D3 和 Backbone 的实时仪表板和图形工具包。
[https://github.com/jondot/graphene](https://github.com/jondot/graphene)

*   定义`yMax`支持：[https ://github.com/jondot/graphene/pull/33](https://github.com/jondot/graphene/pull/33)

# javascript - 简单功能说明

> ID：14100658
> 
> 赞同：3
> 
> 时间：2012-12-31T10:56:16.893
> 
> 标签：javascript

为什么这个功能会提示 10？

```
function b (x, y, a) {
  arguments[2] = 10;
  alert(a);
}

b(1, 2, 3); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-31T10:58:11.053

javascript数组是零索引的，参数是指作为参数传递给函数的参数：

```
arguments[2] === a === 10 
```

和

```
1 === x === arguments[0];
2 === y == arguments[1]; 
```

（和[三等式](https://stackoverflow.com/a/523647/106261)运算符不是一个错误）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-31T10:58:37.147

因为您将第三个参数设置为 10。来自[MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/arguments)：

> 您可以使用 arguments 对象在函数中引用函数的参数。该对象包含传递给函数的每个参数的条目，第一个条目的索引从 0 开始。例如，如果一个函数传递了三个参数，您可以按如下方式引用该参数：
> 
> ```
> arguments[0]
> arguments[1]
> arguments[2] 
> ```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-31T11:06:03.990

arguments 对象是所有函数中可用的局部变量；不能再使用作为 Function 属性的参数

使用此参考进一步

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/arguments](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/arguments)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-31T10:59:23.857

此函数接受三个输入，丢弃前两个并在模式弹出窗口中显示最后一个，但在将值分配`10`给 index `2`of之前`arguments`- 有效地将输入设置`a`为`10`from `3`- 然后它退出范围而不返回任何内容。

# c++ - `X::X(const X&&)` 常量移动构造函数？

> ID：14100660
> 
> 赞同：3
> 
> 时间：2012-12-31T10:56:33.620
> 
> 标签：c++, c++11

> **可能重复：**
> [移动构造函数签名](https://stackoverflow.com/questions/14067539/move-constructor-signature)

```
struct X
{
    X(X&);         // (1)
    X(X&&);        // (2)
    X(const X&);   // (3)
    X(const X&&);  // (4)
}; 
```

是否有任何情况`(4)`会在重载解决方案中被选中？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-31T10:58:56.077

是的。一种情况是当你有一个带有`const`返回值的函数时：

```
const X f();

X x(f()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T12:32:01.227

另一种情况是当您应用于`std::move`对象`const`时，如下例所示：

```
#include <iostream>

using namespace std;

struct X
{
    X() { cout << "default" << endl; }
    X(X&) { cout << "non const copy" << endl; }    // (1)
    X(X&&) { cout << "non const move" << endl; }   // (2)
    X(const X&) { cout << "const copy" << endl; }  // (3)
    X(const X&&){ cout << "const move" << endl; }  // (4)
};

void f(X const x)
{
}

int main()
{
    X const x;
    f(std::move(x));

    return 0;
} 
```

`X const f()`上一个答案（

将一个对象*作为逻辑操作*`const`移动到另一个`const`对象中确实有意义，如果您没有定义移动构造函数，那么您将不被允许这样做。搬家只是转移所有权，所以在我看来，作为一种合乎逻辑的操作，它应该得到支持。*`const`*

 *尽管从高级的角度来看，您不应该修改`const`对象并且确实移动对象需要修改它（在大多数情况下），但在众所周知的类似情况下，可以在`const`“后面”修改对象场景”，以实现*更高层次的*概念操作。例如`const`，需要锁定非常量成员互斥锁的成员函数：您可以将互斥锁变量声明为`mutable`将其视为非常量对象。

因此，即使在这种情况下，我也将其视为`const`移动构造函数中的合法操作（只要需要），以修改`mutable`移动对象的成员（可能是对象的析构函数要检查的一些布尔标志）。请注意，如果您`const`从上面的代码中删除构造函数 (3) 和 (4)，那么它将无法编译。如果只删除 (4)，将选择复制构造函数 (3) - 这意味着您将无法移动`const`对象。*

# android - XML 错误膨胀异常

> ID：14100662
> 
> 赞同：0
> 
> 时间：2012-12-31T10:56:42.437
> 
> 标签：android, xml

我试图在 WebView 对象中显示 HTML，当我调用

```
setContentView(R.layout.help); 
```

我得到一个 InflateException。这是 help.xml 的全部内容：

```
<?xml version="1.0" encoding="utf-8"?> 
<WebView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent" 
android:id="@+id/webViewHelp">
</WebView> 
```

我收到以下错误消息：

> 12-31 12:46:04.398: E/AndroidRuntime(18684): java.lang.RuntimeException: 无法启动活动 ComponentInfo{com.lomda.ong2/com.lomda.ong2.ShowHelp}: android.view.InflateException: Binary XML 文件第 6 行：膨胀类 html 时出错

据我所知，这实际上与[WebView 文档](http://developer.android.com/reference/android/webkit/WebView.html)中显示的示例文件相同。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T13:53:07.670

好吧，这很尴尬。我在 layout-he 下有一个不同的 help.xml 文件，因为我的手机已本地化为希伯来语，所以打开的文件就是这个文件。显然，该文件有错误。
正如 Andro Selva 所指出的，在父布局标志中嵌入 WebView 是不必要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T10:59:14.340

您应该使用任何布局作为父标签。因为 webview 不是容器标签

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    >

   <WebView
android:layout_width="match_parent"
android:layout_height="match_parent" 
android:id="@+id/webViewHelp">
</WebView>

</RelativeLayout> 
```

我希望它对你有帮助..

# android - 谷歌地图中的自定义标记与坐标不匹配

> ID：14100674
> 
> 赞同：0
> 
> 时间：2012-12-31T10:57:44.683
> 
> 标签：android, google-maps, google-maps-markers

我正在使用自定义标记（因为我是新用户无法上传图像），它的标记位于图像的左侧。

问题是图像与我要显示的坐标不匹配。它转到坐标的左侧，这是因为箭头在图像的左侧。我对此进行了一些搜索，并在我应该用来解决它的[android自定义地图标记边界中进行了搜索。](https://stackoverflow.com/questions/9975553/android-custom-map-marker-bounds)`SetBounds`但是第二个问题是，通过使用`Setbounds`它会改变图像的大小，并且在屏幕上看起来质量很差。没有其他方法可以将自定义标记与坐标匹配吗？这是我在覆盖构造函数中使用的代码：

```
 marker .SetBounds (0, -(int) Common.convertPixelsToDp (marker .IntrinsicHeight  ,act.ApplicationContext ) ,
                          (int) Common.convertPixelsToDp (marker .IntrinsicWidth ,act.ApplicationContext )/2,0); 
```

# c# - 根据 aspxgridview 中一行中的另一个单元格值禁用一个单元格

> ID：14100678
> 
> 赞同：0
> 
> 时间：2012-12-31T10:58:06.700
> 
> 标签：c#, asp.net, devexpress, aspxgridview

我的代码：

```
protected void ASPxGridView1_HtmlDataCellPrepared(object sender, DevExpress.Web.ASPxGridView.ASPxGridViewTableDataCellEventArgs e)
{
    if (e.DataColumn.FieldName == "col7name")
    {
        // Here I can disable the same cell by the following code:
        if ( < condition > )
        {
            e.Cell.Enabled = false;
        }
        // But my question is that how to disable another cell in the same row.
    }
} 
```

如何根据devexpress aspxgridview中的另一个单元格值禁用同一行中的另一个单元格？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T11:58:39.643

我使用`e.GetValue("fieldname")`并实现了我的目标。

# ios5 - MBProgressHUD 添加到应用程序窗口

> ID：14100686
> 
> 赞同：0
> 
> 时间：2012-12-31T10:58:53.783
> 
> 标签：ios5, mbprogresshud

```
`UIWindow *tempKeyboardWindow = [[[UIApplication sharedApplication] windows]objectAtIndex:0];

MBProgressHUD *hud = [MBProgressHUD showHUDAddedTo:tempKeyboardWindow animated:YES];

hud.animationType = MBProgressHUDAnimationZoomOut;

hud.dimBackground = YES;

hud.labelText = showString; 
```

`

我需要将 hud 添加到我的应用程序窗口中，所以我使用了上面的代码但没有工作。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T11:15:14.293

首先你需要分配初始化它，如下所示

```
self.progressHud = [[MBProgressHUD alloc]initWithView:self.navigationController.view]; 
```

然后设置它的必需属性如下

```
self.progressHud.labelText = @"Processing Image";
self.progressHud.dimBackground = YES;
self.progressHud.animationType = MBProgressHUDAnimationZoom;
self.progressHud.delegate = self; 
```

然后为了显示它使用下面的代码

```
[self.navigationController.view addSubview:self.progressHud];
[self.progressHud show:NO]; 
```

# php - 我不断收到关于 paypal php 自适应支付 API 支付的错误“您的支付无法完成......”

> ID：14100690
> 
> 赞同：1
> 
> 时间：2012-12-31T10:59:03.557
> 
> 标签：php, api, paypal, paypal-adaptive-payments

我尝试在最新的 php API 中使用示例文件进行自适应支付（1.96）并创建初级支付。然后用我的沙盒帐户付款，一切正常。 

我使用相同的流程并将 API 与我的 php 应用程序集成。

我能够创建主要付款并获得 payKey。我使用payKey并付款。我使用我的沙盒个人帐户登录并点击支付然后看到这个问题：

您的付款无法完成。请返回参与网站并重试。

**注意**：我没有更改任何 config.ini 信息。

我在我的开发人员中创建了多个 pre-confiq 帐户，并通过示例和应用程序测试将它们作为发送者或接收者。

API 示例和应用程序环境都是虚拟托管在我的本地计算机上的。

[这是 paymentDetail 对象信息](http://pastebin.com/dY40Qhqm)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T07:06:37.323

我发现了问题。我正在重置测试帐户并创建新的测试电子邮件，这些电子邮件记录了一个建议的解决方案，却忘记在我的集成应用程序中替换新电子邮件。

顺便更换新电子邮件解决了我的问题。

# android - 带有文本视图的 Android 自定义控件

> ID：14100691
> 
> 赞同：0
> 
> 时间：2012-12-31T10:59:12.933
> 
> 标签：android

我正在制作一个自定义控件，我想在其中添加**TextViews**。我怎样才能做到这一点 ？有任何想法吗？

自定义控件将用于显示电子节目指南 (EPG)。我的应用程序用于 google tv，将用于频道列表和播放以及 EPG，在 EPG 屏幕中，我将显示时间间隔和每个间隔中的节目，我想使用 Textviews 作为节目名称并为它们提供自定义字体和样式。

任何形式的帮助将不胜感激，非常感谢，![在此处输入图像描述](../Images/b705a5391c20e69db4e59d9cbdce252f.png)

这是我的 custo control 的屏幕截图？添加我想使用 textviews 的文本样式。我希望它现在清楚了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T11:15:11.627

尝试在此示例代码的基础上进一步构建：

```
public class CustomView extends LinearLayout {
    public CustomView(Context context, AttributeSet attributeSet) {
        super(context, attributeSet);
    }

    public CustomView(Context context) {
        super(context);
    }

    public void addTextView(String text) {
        TextView tv = new TextView(getContext());
        tv.setText(text);
        this.addView(tv);
        this.invalidate(); //I think this is called implicitly, but just in case.
    }
} 
```

但是，您必须自己做诸如边距、滚动、布局等的事情，因为您的上下文没有提供太多线索。

编辑：加上一些上下文，我建议你使用`TableLayout`. 不过，您可以使用给定的示例代码构建它。

# php - 如何描述全局消息，如通知，codeigniter 中的错误？

> ID：14100699
> 
> 赞同：2
> 
> 时间：2012-12-31T10:59:37.913
> 
> 标签：php, codeigniter

我想描述如下定义的全局消息，但我不知道在哪里定义它以及如何使用它，如果有人可以帮助我..

 `````
<?php
    $messages=array(
            'JAVASCRIPT_DISABLED'=>'Please enable JavaScript in your browser or upgrade to a JavaScript-enable browser to use '.$site_name,
    );

$common_messages=array(
    'REQ'=>'requied',
    'EXISTS'=>' already exists',
    'ADDED'=>' added successfully',
    'MODIFIED'=>' modified successfully',
    'SIZE_EXCEED'=>'Invalid file format or size',

);

//ADMIN PANEL MESSAGE...
$validation_messages=array(
        'INVALID_EMAIL'=>'Valid email '.$common_messages['REQ'],
        'INVALID_PASSWORD'=>'Valid password '.$common_messages['REQ'],
        'INVALID_LOGIN'=>'Invalid login detail',
        'ACCOUNT_DISABLED'=>'Account disabled or Deleted by admin',
        'SIZE_EXCEED'=>'Invalid file format or size',
        'FILE_CANNOT_EMPTY'=>'File cannot be empty'
);

//NOTIFICATION FLAGS
$notify=array(
    'error'=>'m=e',
    'added'=>'m=a',
    'modified'=>'m=m'
); 
```` 

`?>`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-31T12:38:03.897

在配置文件夹中创建文件，例如 messageerror.php

向其添加代码

```
$config['errormessage'] = your message here; 
```

如果你想调用它。

```
$this->load->config('messageerror'); 
```

用这个`$this->config->item('errormessage')`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-31T14:27:37.990

为什么不使用`config/constants.php`？

您可以简单地添加常量，例如：

```
 define('ERROR_INVALID_EMAIL','Please provide a valid email address'); 
    define('NOTIFY_LOGGED_IN','You are now logged in'); 
   //... and so on 
````

# javascript - 将不同的 Maven 网络项目组合成一个项目

> ID：14100700
> 
> 赞同：2
> 
> 时间：2012-12-31T10:59:39.473
> 
> 标签：javascript, maven

我想将 3 个以上的 maven 项目（基于 HTML、javascript 和 CSS）组合成一个。我的主项目使用来自其他项目的依赖项。那么，如何在不更改这些依赖项的情况下构建单个项目呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T20:48:48.493

假设您有一个多模块项目：

1.  `mysite`: 父 pom 模块。
2.  `mysite-core`：一个ja​​va模块
3.  `mysite-web`: 一个网络资源模块 (javascript, html, ...)
4.  `mysite-webapp`：一个战争模块

`mysite`具有`packaging pom`并包括其他 3 个`modules`：

```
<groupId>mysite</groupId>
<artifactId>mysite</artifactId>
<packaging>pom</packaging>
<modules>
   <module>../mysite-core</module>
   <module>../mysite-web</module>
   <module>../mysite-webapp</module>
</modules> 
```

`mysite-core`使用标准`jar packaging`：

```
<parent>
   <artifactId>mysite</artifactId>
   <groupId>mysite</groupId>
   <relativePath>../mysite/</relativePath>
</parent>
<groupId>mysite</groupId>
<artifactId>mysite-core</artifactId> 
```

`mysite-web`很相似：

```
...
<artifactId>mysite-web</artifactId> 
```

`mysite-webapp`包括 java 和 web 资源模块作为依赖项：

```
...
<artifactId>mysite-webapp</artifactId>
<packaging>war</packaging>

<dependency>
   <groupId>mysite</groupId>
   <artifactId>mysite-core</artifactId>
</dependency>
<dependency>
   <groupId>mysite</groupId>
   <artifactId>mysite-web</artifactId>
</dependency> 
```

使用[maven-war-plugin的](http://maven.apache.org/plugins/maven-war-plugin/)[overlays](http://maven.apache.org/plugins/maven-war-plugin/overlays.html)属性，您可以将资源添加到战争中：

```
<overlays>
   <overlay>
      <groupId>mysite</groupId>
      <artifactId>mysite-web</artifactId>
      <type>jar</type>
   </overlay>
</overlays> 
```

**注意：**最好有一个[平面项目布局](http://maven.apache.org/plugins/maven-eclipse-plugin/reactor.html)，例如：

*   根
    *   父 pom 模块
    *   java pom模块
    *   java-1 jar 模块
    *   java-2 jar 模块
    *   网页资源jar模块
    *   战争模块

而不是分层布局：

*   根
    *   父 pom 模块
        *   java pom模块
        *   java-1 jar 模块
        *   java-2 jar 模块
        *   网页资源jar模块
        *   战争模块

我注意到像 Eclipse 这样的工具不喜欢分层结构（缓慢甚至无穷无尽的构建）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-31T11:05:18.513

使用 Maven 模块。这里有大量文档：

[http://maven.apache.org/guides/mini/guide-multiple-modules.html](http://maven.apache.org/guides/mini/guide-multiple-modules.html)

# c++ - linux上的jsoncpp集成

> ID：14100705
> 
> 赞同：1
> 
> 时间：2012-12-31T11:00:27.073
> 
> 标签：c++, cmake, jsoncpp, xubuntu

我正在尝试将 jsoncpp 集成到一个项目中。我的平台是 32 位 xubuntu，gcc 版本为 4.7.2。我尝试使用 debian 包，也是从最新的 jsoncpp 源构建的，两者都导致相同的问题。

我使用 CMake 进行构建。已成功找到 jsoncpp 包含和库。但是当我将包含添加到我的 CMake 包含时，我的空 brConfig 类（在第 51 行中只有一个 #include）的构建失败并出现以下错误：

```
[100%] Building CXX object CMakeFiles/brCore.dir/src/brConfig.cpp.o 
In file included  from /usr/include/c++/4.7/i686-linux-gnu/bits/c++config.h:414:0, 
from /usr/include/c++/4.7/string:40, 
from /home/hellhound/Repository/binrevengine/modules/brCore/trunk/include/brCore/brConfig.h:51, 
from /home/hellhound/Repository/binrevengine/modules/brCore/trunk/src/brConfig.cpp:25:
/usr/include/c++/4.7/i686-linux-gnu/bits/os_defines.h:45:19: Fehler: fehlender binärer Operator vor Token »(« 
In file included from /usr/include/c++/4.7/cwchar:46:0, 
from /usr/include/c++/4.7/bits/postypes.h:42, 
from /usr/include/c++/4.7/bits/char_traits.h:42, 
from /usr/include/c++/4.7/string:42, 
from /home/hellhound/Repository/binrevengine/modules/brCore/trunk/include/brCore/brConfig.h:51, 
from /home/hellhound/Repository/binrevengine/modules/brCore/trunk/src/brConfig.cpp:25: 
/usr/include/wchar.h:75:43: Fehler: fehlender binärer Operator vor Token »(« 
In file included from /usr/include/sched.h:43:0, 
from /usr/include/pthread.h:25, 
from /usr/include/c++/4.7/i686-linux-gnu/bits/gthr-default.h:41, 
from /usr/include/c++/4.7/i686-linux-gnu/bits/gthr.h:150, 
from /usr/include/c++/4.7/ext/atomicity.h:34, 
from /usr/include/c++/4.7/bits/basic_string.h:41, 
from /usr/include/c++/4.7/string:54, 
from /home/hellhound/Repository/binrevengine/modules/brCore/trunk/include/brCore/brConfig.h:51, 
from /home/hellhound/Repository/binrevengine/modules/brCore/trunk/src/brConfig.cpp:25: 
/usr/include/i386-linux-gnu/bits/sched.h:133:20: Fehler: fehlender binärer Operator vor Token »(« 
/usr/include/i386-linux-gnu/bits/sched.h:171:20: Fehler: fehlender binärer Operator vor Token »(« 
In file included from /usr/include/c++/4.7/cwchar:46:0, 
from /usr/include/c++/4.7/bits/postypes.h:42, 
from /usr/include/c++/4.7/bits/char_traits.h:42, 
from /usr/include/c++/4.7/string:42, 
from /home/hellhound/Repository/binrevengine/modules/brCore/trunk/include/brCore/brConfig.h:51, 
from /home/hellhound/Repository/binrevengine/modules/brCore/trunk/src/brConfig.cpp:25: 
/usr/include/wchar.h:104:1: Fehler: »__BEGIN_NAMESPACE_C99« bezeichnet keinen Typ /usr/include/wchar.h:107:1: Fehler: »__END_NAMESPACE_C99« bezeichnet keinen Typ /usr/include/wchar.h:135:1: Fehler: »__END_NAMESPACE_STD« bezeichnet keinen Typ /usr/include/wchar.h:149:6: Fehler: expected initializer before »__THROW« /usr/include/wchar.h:153:39: Fehler: expected initializer 
    [...] 
```

在我看来，这个问题是由 std::string 包含调用的。知道出了什么问题吗？

这是我的简单课程：

```
#ifndef BINREV_CONFIG_H__
#define BINREV_CONFIG_H__

#include <string>      // compile fails here if I add JSON includes to CMAKE

namespace binrev{
namespace brCore{

class CORE_LIBRARY_API brConfig
{
   public: 
     brConfig();     
     virtual ~brConfig();

};
}//ns-brCore
}//ns-binrev
#endif //BINREV_CONFIG_H__ 
```

# java - 如何找到我的文件夹的路径

> ID：14100708
> 
> 赞同：1
> 
> 时间：2012-12-31T11:00:54.517
> 
> 标签：java

我们正在研究项目。每个同事都有不同的安装文件夹在我的情况下，我的文件文件夹在

`C:\\p4_3202\\CAR\\car.rt.appl\\dev\\car.components\\cars\\res\\car.rt.components.cars\\resources\\js;`

对于其他同事，它可能在

`C:\\my_3202\\CAR2\\car.rt.appl\\dev\\car.components\\cars\\res\\car.rt.components.cars\\resources\\js;`

这取决于你如何配置你的 perforce。

我需要从我的文件夹中读取文件，但我不知道文件夹的名称（正如我解释的那样，它可能不同）

```
 File folderFile = new File(folder); 
```

我怎样才能找到我的文件夹的位置？（ c:\p4\......test.js ）我试过了

```
 System.getProperty("sun.java.command");
 System.getProperty("user.home") 
```

但它没有给我我的文件夹的路径

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T13:00:07.997

我会为每个用户使用一个系统属性。因此，所有用户都会告诉 perforce 的安装位置（可能已经存在此属性，请查看文档）。然后可以通过您的代码读取，例如：

```
 System.getenv().get("PROP"); 
```

在 unix/Linux 系统上，您可以使用以下命令在 shell/环境变量中设置属性：

```
 export PROP=thepath 
```

Windows 对我来说是很久以前的事了，但如果我没记错的话它在控制面板上的系统下的某个地方:)

更新： [http ://www.itechtalk.com/thread3595.html](http://www.itechtalk.com/thread3595.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T11:28:08.767

```
String path = new java.io.File(".").getCanonicalPath(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T13:58:40.267

如果它是只读文件，存储在最终生成的 jar 中，则使用`URL url = getClass().getResource("/.../...")`or `InputStream in = getClass().getResourceAsStream("/.../...")`。

这使用了 jar/class 路径中的路径。仅使用 jar 永远不会使用 File。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-31T11:05:05.733

`file.getAbsolutePath()`或者`file.getAbsoluteFile()`

# c++ - CreateProcessAsUser 内存泄漏

> ID：14100710
> 
> 赞同：3
> 
> 时间：2012-12-31T11:01:00.087
> 
> 标签：c++, windows, memory-leaks, windows-services

我有一个运行以下代码的服务。每次点击 CreateProcessAsUser 时，内存都会增加 4K（我可以在任务管理器中看到它）。当我在 CreateProcess 中使用时没有发生这种情况。

为什么会发生这种情况以及如何释放这段记忆？

```
PWTS_SESSION_INFO pSessionInfo = 0;
DWORD dwCount = 0;
int dwSessionId = 0;

WTSEnumerateSessions(WTS_CURRENT_SERVER_HANDLE, 0, 1, &pSessionInfo, &dwCount);
for(DWORD i = 0; i < dwCount; ++i)
{
    WTS_SESSION_INFO si = pSessionInfo[i];
    if (WTSActive == si.State)
    {
        dwSessionId = si.SessionId;
        break;
    }
}
WTSFreeMemory(pSessionInfo);

HANDLE currentToken;
BOOL bRet = WTSQueryUserToken(dwSessionId, &currentToken);
if (bRet == false)
{
    return 0;
}

PROCESS_INFORMATION pi;
STARTUPINFO si;
memset(&si, 0, sizeof(si));
si.cb = sizeof(si);
if (CreateProcessAsUser(currentToken, "MY_EXE.exe", "MY_ARGS_STR", NULL, NULL, false, 0, NULL, NULL, &si, &pi))
{
    if (pi.hProcess != NULL)
    {
        CloseHandle(pi.hProcess);
    }
    if (pi.hThread != NULL)
    {
        CloseHandle(pi.hThread);
    }
}
CloseHandle(currentToken);

return 0; 
```

# mysql - 在 MySQL 中，如何优先考虑写入/更新而不是读取？

> ID：14100717
> 
> 赞同：1
> 
> 时间：2012-12-31T11:01:31.030
> 
> 标签：mysql, concurrency, innodb

在我的应用程序中，我希望在请求写入一些数据时立即执行对数据库的任何插入。

我正在使用 InnoDB 引擎。

由于插入需要排他锁，因此当当前读取查询具有共享锁时，可能会出现一些其他读取再次具有共享锁，并且写入操作可能需要等待很长时间。

我希望当队列中有写操作时，没有读操作获得共享锁。一旦在当前写请求之前启动的读取完成，就应该执行写操作。之后，应该进行所有其他读取操作。

如何实施？

## 编辑

由于我使用的是 InnoDB 表并且我没有实现表锁，所以 select 和 insert 之间不应该有冲突。这将是选择和更新。（如果选择和插入之间也存在冲突，请纠正我）

在 MySQL 中，update 的优先级高于 select。但是如果有一些读取查询正在执行，那么更新查询就会出现，然后是一些读取查询。在这种情况下，更新后的读取查询是否会等待更新完成，如此处所述[http://dev.mysql.com/doc/refman/5.0/en//table-locking.html](http://dev.mysql.com/doc/refman/5.0/en//table-locking.html)或者他们将获得共享锁以及在更新查询被触发之前存在的读取查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T11:28:32.450

从数据库读取时不需要获取共享锁。事实上，使用默认事务隔离级别[REPEATABLE READ](http://dev.mysql.com/doc/refman/5.5/en/set-transaction.html#isolevel_repeatable-read)一个事务内的普通`SELECT`查询从一致的快照中读取。没有获取和需要锁，在这个事务中，您根本不会看到其他事务中提交的任何更改。

由于没有获取共享锁，用于更新查询的排他锁会立即按照提交顺序授予其他会话。

MySQL 文档说以下

> 一致读取是 InnoDB 在 READ COMMITTED 和 REPEATABLE READ 隔离级别处理 SELECT 语句的默认模式。一致读取不会对其访问的表设置任何锁定，因此其他会话可以在对表执行一致读取的同时自由修改这些表。
> 
> 假设您在默认的 REPEATABLE READ 隔离级别下运行。当您发出一致读取（即普通的 SELECT 语句）时，InnoDB 会为您的事务提供一个时间点，根据该时间点您的查询会看到数据库。如果另一个事务在分配您的时间点后删除了一行并提交，您不会看到该行已被删除。插入和更新的处理方式类似。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T11:45:43.600

您可以尝试查看`INSERT DELAYED` [Mysql Insert Delayed](http://dev.mysql.com/doc/refman/5.5/en/insert-delayed.html)

不幸的是，它在 innodb 上不可用。

PS：如果表上已经存在共享锁，则无法获取排他锁。所以基本上，在你的情况下：3次读取获得一个共享锁，一次插入需要排他锁。只有在选择完成后，插入才能获得锁。

# java - 录音耳机输出：安卓

> ID：14100720
> 
> 赞同：1
> 
> 时间：2012-12-31T11:01:46.000
> 
> 标签：java, android, audio-recording, headphones

我必须记录通过耳机收听的任何用户。例如，用户听歌、与某人交谈（通话中）等。没有耳机我可以录音，但戴耳机我就没有运气了。我尽一切可能尝试[了这个](https://stackoverflow.com/questions/11077161/android-audiorecord-headphones-with-mic)链接，`Audiosource`但`MediaRecorder`没有得到预期的结果。因此，非常感谢帮助或任何线索。

**编辑：**我想记录耳机输出，但迈克尔的回答似乎不可能。所以，我的要求如上。非常感谢任何关于如何实现这一目标的建议或线索。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-31T11:56:52.397

Android 不支持记录输出流。可能有手机以某种方式支持它，但这将完全取决于供应商，而不是您可以期望在任何 Android 设备上工作的东西。

语音通话录音是一种特殊情况，因为语音通话音频不是由应用程序管理的常规流。许多 Android 设备都支持使用 VOICE_CALL/VOICE_DOWNLINK/VOICE_UPLINK 音频源录制语音呼叫上行链路和下行链路。

当你说你可以在没有耳机的情况下录制回放时，我怀疑实际发生的是麦克风拾取了扬声器发出的声音，而不是某种形式的输出流的内部录制。通过主麦克风录制扬声器输出当然是一种方法，但最终的录音可能听起来很糟糕。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-03-25T04:26:02.257

我通常只是将我的 Android 手机连接到我最初制作的用于将 PlayStation 1 音频录制到我的电脑中的设备上。

*   立体声 RCA 电缆端接在每侧的双母端（3 美元）与两个立体声适配器相结合，将信号从两个母 RCA 插头接收到单个标准耳机插孔。

*   连接，将一个现在标准的男性立体声耳机插头插入手机，另一个插入计算机的音频麦克风输入。

*   启动像 WireTap 或类似的程序

*   调整设置，以便您可以听到通过流媒体电话传入的接收音频，然后按录制按钮。

它可能不是 FLAC 质量 - 但足够好。设备总成本（不包括电话或电脑）：约**15**美元。

# iphone - FBConnect 已弃用端点错误

> ID：14100721
> 
> 赞同：0
> 
> 时间：2012-12-31T11:02:08.353
> 
> 标签：iphone, ios, facebook, fbconnect

我正在我的项目中做 facebook 集成部分。我从 rey wenderlich 下载了 facebook 集成示例项目，然后更改了 appkey 和 appsecretkey。当我运行这个应用程序时，登录验证工作正常，然后它显示错误。这在 login 之后出现在同一个弹出窗口中。

**错误：此端点已被弃用。要暂时重新启用它，您可以禁用“august_2012”平台迁移。我将在 2012 年 8 月 1 日永久禁用**

如何修复此错误我使用的功能与 FbConnect 示例代码相同

```
- (void)session:(FBSession*)session didLogin:(FBUID)uid {

self.usersession =session;
NSLog(@"User with id %lld logged in.", uid);
[self getFacebookName];
}

- (void)getFacebookName {
NSString* fql = [NSString stringWithFormat:
             @"select uid,name from user where uid == %lld", self.usersession.uid];
NSDictionary* params = [NSDictionary dictionaryWithObject:fql forKey:@"query"];
[[FBRequest requestWithDelegate:self] call:@"facebook.fql.query" params:params];
self.post=YES;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T05:57:01.690

[这有一个很好的文档和示例](http://developers.facebook.com/docs/tutorials/ios-sdk-tutorial/authenticate/)

# cuda - 使用 C++ 在 CUDA 中为 GPGPU 创建 2D 网格

> ID：14100723
> 
> 赞同：0
> 
> 时间：2012-12-31T11:02:18.617
> 
> 标签：cuda

我正在尝试将我的网格从一维网格扩展到二维网格。有没有办法做到这一点？

这是我当前的代码：

```
int idx = threadIdx.x + blockDim.x * blockIdx.x; 
```

在`#include`列表中，我有以下定义：

```
#define BLOCKS_PER_GRID 102

#define THREADS_PER_BLOCK 1024 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T06:32:19.750

假设您希望每个块有 1024 个线程，则可以轻松地将块重塑为 2D。

`32 x 32 = 1024;`

所以你的块看起来像这样：

```
dim3 Block(32,32); //1024 threads per block. Will only work for devices of at least 2.0 Compute Capability. 
```

我不知道您的确切要求是什么，但通常块数不是固定的（正如您在宏中定义的那样）。块的数量取决于输入数据的大小，因此网格可以动态缩放。

与你的情况一起，你有很多选择，但你的网格最接近的最佳尺寸是`17 x 6`or `6 x 17`。

```
dim3 Grid(17,6); 
```

现在您可以使用以下参数调用内核：

```
kernel<<<Grid,Block>>>(); 
```

在内核内部，线程的二维索引计算如下：

```
int xIndex = blockIdx.x * blockDim.x + threadIdx.x;
int yIndex = blockIdx.y * blockDim.y + threadIdx.y; 
```

或者，如果您遵循行/列约定而不是 x/y，则：

```
int row    = blockIdx.y * blockDim.y + threadIdx.y;
int column = blockIdx.x * blockDim.x + threadIdx.x; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T21:48:50.237

您还可以拥有一维线程块的 2D 网格，以绕过每个网格维度 65535 个块的限制（对于 cc3.0 之前的设备）。这可能是一种更简单的方法，可以将根本上的一维问题扩展到极限之外，而无需为数据引入二维数组表示。

假设我们有一个`DATA_ELEMENTS`参数定义为内核将处理的元素数量（每个线程一个元素）。如果`DATA_ELEMENTS`大于 65535*1024，那么如果每个线程只处理 1 个元素，则无法使用一维网格处理它们。

你可以让你的`THREADS_PER_BLOCK`参数保持不变。您在内核中的线程索引计算将更改为：

```
int idx = threadIdx.x + (blockDim.x * ((gridDim.x * blockIdx.y) + blockIdx.x)); 
```

您需要确保使用以下内容调整内核计算：

```
if (idx < DATA_ELEMENTS){
   (kernel code)
  } 
```

您的网格尺寸如下：

```
dim3 grid;
if (DATA_ELEMENTS > (65535*THREADS_PER_BLOCK)){ // create a 2-D grid
  int gridx = 65535;  // could choose another number here
  int gridy = ((DATA_ELEMENTS+(THREADS_PER_BLOCK-1))/THREADS_PER_BLOCK)/gridx;
  if ((((DATA_ELEMENTS+(THREADS_PER_BLOCK-1))/THREADS_PER_BLOCK)%gridx) != 0) gridy++;
  grid.x=gridx;
  grid.y=gridy;
  grid.z=1;
  }
else{ // create a 1-D grid
  int gridx = (DATA_ELEMENTS+(THREADS_PER_BLOCK-1))/THREADS_PER_BLOCK;
  grid.x=gridx;
  grid.y=1;
  grid.z=1;
  } 
```

你会启动你的内核：

```
 kernel<<<grid, THREADS_PER_BLOCK>>>(...); 
```

解决此类问题的另一种方法是创建某个维度的一维网格（假设网格中的线程总数为`NUM_THREADS_PER_GRID`），并让每个线程处理数据元素数组中的多个元素，使用类似 for 循环或 while 循环的东西：

```
while (idx < DATA_ELEMENTS) {
    (code to process an element)
    idx += NUM_THREADS_PER_GRID
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-31T07:10:54.517

我喜欢罗伯特上面的解决方案。我对他的第一个解决方案的唯一评论是，`gridx`当`DATA_ELEMENTS > (65535*THREADS_PER_BLOCK)`. 原因是，如果数据元素的数量是`65535*THREADS_PER_BLOCK + 1`，并且`gridx`是`65535`，则`65535*2*THREADS_PER_BLOCK`启动，所以几乎一半的线程将什么都不做。如果`gridx`更小，那么什么都不做的线程就会更少。

# php - 根据类别 ID 在数据库中显示产品

> ID：14100726
> 
> 赞同：0
> 
> 时间：2012-12-31T11:02:35.903
> 
> 标签：php, mysql

目前，我能够根据产品类别实现所需的效果。但是，我觉得我所采取的方式并不是最好的方式。在产品页面上，产品顶部和底部之间存在间隙，如[HERE](http://www.imagesocket.com/photos/guest/2563264)。我假设差距是由于我的 php 代码中的错误，而不是我布置 html 的方式。任何帮助将不胜感激。

因此，为了澄清，我想知道所使用的代码是否是实现这一目标的正确方法，以及是否有人能发现为什么存在差距，那将是完美的。

只是为了澄清这绝对不是css的问题。没有应用边距，我希望黑线完全消失。它应该是全白的。

谢谢你，祝你新年快乐。

**PHP 代码**

```
<?php
function get_posts($id = null, $cat_id = null) {
    $posts = array();

    $query ="SELECT  `products`.`id` AS  `name` ,  `products_cat`.`id` AS  `category_id` , `products`.`name` AS `title` ,  `description` ,  `price` ,  `sale` ,  `picture` 
FROM  `products` 
INNER JOIN  `products_cat` ON  `products`.`prod_id` =  `products_cat`.`id` ";

    if ( isset($id) ) {
    $id = (int) $id;
    $query .= " WHERE `products`.`id` = {$id}";
    }

    if ( isset($cat_id) ) {
        $cat_id = (int) $cat_id;
        $query .= " WHERE `products_cat`.`id` = {$cat_id}";
}

    $query .= " ORDER BY `products`.`price` DESC";

    $query = mysql_query($query);
    echo mysql_error();
    while ( $row = mysql_fetch_assoc($query) ) {
        $posts[] = $row;
        }

    return $posts;
}

function category_exists($field, $value) {
    $field = mysql_real_escape_string($field);
    $value = mysql_real_escape_string($value);

    $query = mysql_query("SELECT COUNT(1) FROM `products_cat` WHERE `{$field}` = '{$value}'");

    echo mysql_error();

    return ( mysql_result($query, 0) == '0' ) ? false : true; 
}

?> 
```

**代码**

```
<?php
include("../script/dbconnect.php");
include("../script/get_product.php");

$posts = get_posts(null, $_GET['id']);

?>

<div style="width:100%; height:150px; background-color:white;"><span style="font-family:saxMonoRegular; letter-spacing:2px; display:block; font-size:4.5em; text-align:center; padding-top:15px;"> Blog </span></div>

<div class="link" style="width:100%; background-color: white">
<?php
foreach ( $posts as $post ) {
    if ( ! category_exists('name', $post['name']) ) {
        $post['name'] = 'Uncategorised';
    }
    ?>      
    <ul class='featured'>

            <li class='headhighlight'><?php echo $post['title']; ?></li>  
            <li class='pricehigh'><?php echo $post['price']; ?></li>
            <li class='imagefeat'><img class='imagelink' src='<?php echo $post['picture']; ?>' alt='$name'></li>                
            </ul>   

    <?php
    }
?>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T11:18:29.087

如果我理解正确，我不舒尔，但我会说它更多是 CSS 的问题。

尝试：

```
div.link {
  padding: 0px; 
```

}

```
ul.featured {
  display: block;
  width: 200px;
  margin: 0px;
} 
```

# opencv - SurfFeaturesFinder

> ID：14100734
> 
> 赞同：0
> 
> 时间：2012-12-31T11:03:12.193
> 
> 标签：opencv

我尝试使用“SurfFeatureDetector”和“SurfDescriptorExtractor”，但在新版本 2.4.1 中，我们只有“SurfFeaturesFinder”和需要结构“ImageFeatures”的运算符，我开发了一个示例以在功能描述中使用它，如下所示：

```
//Detect the keypoints and Calculate descriptors using SURF Detector
int minHessian = 400;
detail::SurfFeaturesFinder detector(minHessian);
detail::ImageFeatures myobjfeatures,myscnfeatures;

detector (img_object,myobjfeatures);// i have an error here
detector (img_scene,myscnfeatures); 
```

我有这个错误：Microsoft C++ 异常：cv::Exception at memory location 0x001cbe30..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T11:30:49.247

两个班都在那里。您需要包含`<opencv2/nonfree/nonfree.hpp>`并链接到`opencv_nonfree241.lib`.

# iphone - 如何在 iPhone 日历应用中实现开始和结束视图功能

> ID：14100738
> 
> 赞同：1
> 
> 时间：2012-12-31T11:03:37.717
> 
> 标签：iphone, ios, xcode, cocoa

大家知道吗，如何像在 iPhone 日历应用程序中那样实现开始和结束视图。我知道这是一个分组表视图，顶部有自定义单元格。但是我如何实现`NSDatePicker`视图底部的。我试图用 Storyboard 来实现，但视图的底部和底部`NSDatePicker`之间总是有一个小的差距。`NSDatePicker`

它应该如下所示：

![iPhone 日历应用程序中的 NSDatePicker 实现](../Images/d94123e9b04fca1e186a22a237f1891d.png)

**编辑：**这个问题的解决方案很简单。我添加了两个容器视图，一个作为分组表视图，一个作为带有 NSDatePicker 的视图控制器。

# python - NameError：名称“httplib”未定义

> ID：14100745
> 
> 赞同：1
> 
> 时间：2012-12-31T11:04:23.567
> 
> 标签：python, httplib

我在 Python 2.6.x 上收到以下错误，我应该如何解决这个问题？

```
 except (httplib.IncompleteRead), e:
NameError: name 'httplib' is not defined 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-31T11:07:00.403

文件导入模块

```
import httplib 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T11:05:28.683

在文件顶部导入模块。

# php - Disable datepicker without disabling input field

> ID：14100751
> 
> 赞同：2
> 
> 时间：2012-12-31T11:04:52.977
> 
> 标签：php, jquery, jquery-ui, jquery-ui-datepicker

> **Possible Duplicate:**
> [Remove Datepicker Function dynamically](https://stackoverflow.com/questions/6107465/remove-datepicker-function-dynamically)

In my web application i am using the datepicker. I am using the same page for create and edit the details. While editing the page the date should not be editable. I am disabling the datepicker by using the following code.

```
$( "#datepicker" ).datepicker("disable"); 
```

But the above code also disables the input field also.(If the input field is disabled in edit mode the data is not posted to the PHP). I want to disable the datepicker without disabling the input field and i want to show the "ui-datepicker-trigger" icon. Can anyone help me out. Following is the link to JSFIDDLE

[http://jsfiddle.net/Xppj6/1/](http://jsfiddle.net/Xppj6/1/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T11:07:33.633

Try,

```
$( "#datepicker" ).datepicker( "destroy" ); 
```

In response to your comment: if you want to preserve icon just do it manually, i.e. copy icon from DOM tree, destroy datepicker (this will remove icon from DOM) then reinsert it into DOM. May be not best performant but no human should notice unless you execute this thousands of times per second :)

basically my idea is to do something like that:

```
 $img = $('#datepicker').parent().find('img'); //fetch datepicker icon from DOM
   $( "#datepicker" ).datepicker("destroy"); //destroy datepicker
   $('#datepicker').parent().append($img); //reappend icon into its original place 
```

in js fiddle: [http://jsfiddle.net/Xppj6/7/](http://jsfiddle.net/Xppj6/7/) and a fiddle with both "disable" and "enable" button: [http://jsfiddle.net/Xppj6/14/](http://jsfiddle.net/Xppj6/14/)

**Note:** You will have to recreate datepicker completely if you need to undo this operation. You will also have to destroy manually appended icon before creating new datepicker (as new datepicker will createn ew icon)

**Refrence:** [http://api.jqueryui.com/datepicker/#method-destroy](http://api.jqueryui.com/datepicker/#method-destroy)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T11:09:09.923

I don't know how to disable the datepicker without disabling the input field, but one thing you can do is create a hidden variable in which you can copy the value of the input field before psoting the data and then retrieve it on server.

# ios - 引用可能定义或未定义的变量的预处理器宏

> ID：14100753
> 
> 赞同：1
> 
> 时间：2012-12-31T11:05:00.400
> 
> 标签：ios, objective-c, xcode, macos, c-preprocessor

我有两个在调用方法时记录的预处理器宏。一个宏只记录一个方法的名称；我用于 UITableViewDelegate 方法的另一个宏来记录方法的名称和参数的值`indexPath`（具有两个索引的 NSIndex*）。

```
#define LogMethodName  \
    { NSLog(@"%s", __PRETTY_FUNCTION__) ; }
#define LogMethodNameAndIndexPath  \
    { NSLog(@"%s  {%lu, %lu}", __PRETTY_FUNCTION__, [indexPath indexAtPosition:0] , [indexPath indexAtPosition:1] ) ; } 
```

我怀疑这是否可能，但我想要一个宏来完成这两者的工作：当在有`indexPath`参数的方法中使用时，它会执行类似于 的代码`LogMethodNameAndIndexPath`，并且在缺少的方法中使用时`indexPath`参数（因此`indexPath`未定义），它会执行类似`LogMethodName`.

这可能吗？我已经查看了几十个 Stack Overflow 问题，但我还没有找到我能理解的答案。我已经尝试过下面看到的代码，但是 Xcode 不喜欢我`indexPath`在第 4 行中引用它，如果它之前没有定义，并且没有办法让 Xcode 保证我会要求它仅在`indexPath`定义时执行第 4 行。

```
#define LogMethodNameAndIndexPathWhenPresent {                                                                                                    \
    NSString* stringToLog = [NSString stringWithUTF8String:__PRETTY_FUNCTION__] ;                                                                 \
    if ( [stringToLog hasSuffix:@"AtIndexPath:]" )                                                                                                \
        stringToLog = [stringToLog stringByAppendingFormat:@"  {%lu, %lu}", [indexPath indexAtPosition:0] , [indexPath indexAtPosition:1] ] ;     \
    NSLog(@"%@", stringToLog) ;                                                                                                                   \
} 
```

# jquery - Mouseenter 和 Mouseleave 工作不顺利

> ID：14100760
> 
> 赞同：0
> 
> 时间：2012-12-31T11:05:45.053
> 
> 标签：jquery

我有多个图像。当我将鼠标悬停在每个图像上时，它会更改为另一个图像，并且在鼠标移出时会返回到其先前的图像。问题在于，当我们对每个图像快速执行此过程时，每个图像都完好无损地保留在其悬停图像上，但无法恢复到其先前的图像。但是当我慢慢地这样做时，效果和功能正常工作。我只为两个图像提供以下代码片段。请帮我解决这个问题。对不起我写得不好的英语。

# HTML 部分

```
<div style="float:left;">
   <a class="dialog-link" href="#" >
        <img src="images/twitter.png" width="126" height="78" border="0" class="twitter_h"/>     
   </a>
</div>

<div style="float:left; margin-left:83px;">
<a class="dialog-link" href="#" target="_blank">
<img src="images/linkedin.png" width="232" height="78" border="0" class="linkedin_h"/></a>
</div> 
```

# 查询部分

```
<script>
$(function(){

    var link_open=false;
    var openGif_t = $(".twitter_h").attr("src");    
    var closedGif_t = openGif_t.replace("twitter.png", "follow1.png");

    var openGif_l = $(".linkedin_h").attr("src");   
    var closedGif_l = openGif_l.replace("linkedin.png", "connect1.png");

$(".twitter_h")
   .mouseenter(function() {
    $(this).fadeOut(function(){
           $(this).attr("src", closedGif_t);
           $(this).fadeIn(150);
       });
   })
   .mouseleave(function() {
    $(this).fadeOut(function(){
           $(this).attr("src", openGif_t);
           $(this).fadeIn(150);
       });
   });

$(".linkedin_h")
   .mouseenter(function() {
       //alert(closedGif)
       $(this).fadeOut(function(){
           $(this).attr("src", closedGif_l);
           $(this).fadeIn(150);
       });
   })
   .mouseleave(function() {
      // alert($(this).attr("src"));
       $(this).fadeOut(function(){
           $(this).attr("src", openGif_l);
           $(this).fadeIn(150);
       });
   });

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T11:23:44.503

hover() 方法指定当鼠标指针悬停在选定元素上时要运行的两个函数。

此方法同时触发 mouseenter 和 mouseleave 事件。

```
 $(function(){

        var link_open=false;
        var openGif_t = $(".twitter_h").attr("src");    
        var closedGif_t = openGif_t.replace("twitter.png", "follow1.png");

        var openGif_l = $(".linkedin_h").attr("src");   
        var closedGif_l = openGif_l.replace("linkedin.png", "connect1.png");

    $(".twitter_h").hover(function() {
        $(this).fadeOut(function(){
               $(this).attr("src", closedGif_t);
               $(this).fadeIn(150);
           });
       },
       function() {
        $(this).fadeOut(function(){
               $(this).attr("src", openGif_t);
               $(this).fadeIn(150);
           });
       });

    $(".linkedin_h").hover(function() {
           //alert(closedGif)
           $(this).fadeOut(function(){
               $(this).attr("src", closedGif_l);
               $(this).fadeIn(150);
           });
       },
       function() {
          // alert($(this).attr("src"));
           $(this).fadeOut(function(){
               $(this).attr("src", openGif_l);
               $(this).fadeIn(150);
           });
       });

    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T14:00:00.313

如果有许多具有相同行为的图像恕我直言，则代码过多且要做的事情太多。尝试使用 CSS 过渡和平面 javascript，如果您想使用 jquery 更改类，请使用 $(...).toggleClass(...)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T11:14:11.470

您可以使用方便的方法绑定鼠标进入和鼠标离开事件，`hover()`.

这是一个简单的例子：

```
$(".twitter_h").hover(

function() {
    console.log("mouseEnter");
    $(this).stop().fadeOut(function() {
        $(this).attr("src", closedGif_t).fadeIn(150);
    });

}, function() {
    console.log("mouseLeave");
    $(this).stop().fadeOut(function() {
        $(this).attr("src", openGif_t).fadeIn(150);
    });
});​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-01T07:32:49.557

正如我在上面的评论中所说，我认为`.stop()`应该解决眼前的问题。

为了保持代码紧凑，您可以考虑按照以下方式组织它：

```
$(function() {
    var srcArr = [
        {jq: $(".twitter_h"),  over: "twitter.png",  out: "follow1.png"},
        {jq: $(".linkedin_h"), over: "linkedin.png", out: "connect1.png"}
        //additional lines here
    ];

    $.each(srcArr, function(i, srcObj) {
        obj.mouseover = srcObj.jq.attr("src");
        obj.mouseout = srcObj.mouseover.replace(srcObj.over, srcObj.out);
        obj.jq.on('mouseenter mouseleave', function(e) {
            var $this = $(this).stop().fadeOut(function() {
                $this.attr("src", obj[e.type]);
                $this.fadeIn(150);
            });
        });
    }
}); 
```

*未经测试*

要处理其他图像，只需将行添加到 array `srcArr`。

# java - 我可以在 GWT 按钮旁边放一个 JavaScript 按钮吗？

> ID：14100763
> 
> 赞同：0
> 
> 时间：2012-12-31T11:05:52.113
> 
> 标签：java, javascript, gwt, jsni

是否可以创建一个带有 2 个按钮（一进一`GWT`进）的水平面板`JavaScript`？

例如，我有这个对象：

```
HorizontalPanel panelHeader = new HorizontalPanel();

Button buttonexample = new Button(); 
```

现在，我`.js`用按钮创建了一个文件：

```
function javascriptbutton(){
    document.write('<input type="button" name="try" value="try">');
} 
```

并创建了一个`jsni`方法来调用

```
public native static void javascriptTest() /*-{
    $wnd.javascriptbutton(); // JSNI 
}-*/; 
```

我的问题是：如何`jsni`在水平面板上添加包含按钮的方法？通常`GWT`，我会这样做`panelheadr.add(button)`，但我怎样才能为`javascript`按钮做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T11:29:52.263

您必须将 JS 与 HTML 分开。

在 GWT 中创建这两个按钮。为需要外部 JavaScript 的按钮分配一个 id。将点击处理程序附加到您的按钮，并从此点击处理程序调用您的本机 JS：

```
myButton.getElement().setId("jsButton");
myButton.addClickHandler(new ClickHandler() {

    @Override
    public void onClick(ClickEvent event) {
        // Here you call your JSNI native method
        javascriptTest();
    }

}); 
```

在你的原生 JS 方法中，你可以通过它的 id 来引用这个按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T10:47:37.517

在 javascript 中创建像 Button 这样的简单小部件并在 GWT 中使用应该是您最后的手段，而且很棘手，因为它可能会导致跨浏览器兼容性问题。此外，如果您必须调试该代码将很困难。无论如何，有一个更好的解决方案。

您的自定义按钮应该是一个 GWT 小部件，以便将其添加到布局容器中。这意味着按钮类应该至少实现`IsWidget`这允许将添加按钮的布局容器调用`asWidget`方法并为按钮返回一个简单的包装容器，从而使您可以轻松地布局按钮。以下示例使用 SimplePanel 作为包装器。

 `````
public class MyTextButton implements IsWidget, HasClickHandlers
{
    private SimplePanel panel = new SimplePanel();
    private Button button;
    public MyTextButton()
    {
        button = Button.create(panel.getElement());
    }

    @Override
    public Widget asWidget()
    {
        return panel;
    }
    //Use JavaScriptObject to create the DOM element for button which resides in the SimplePanel
    private static class Button extends JavaScriptObject
    {
        private static native Button create(Element parent)/*-{
            //create your javascript button here using parent element as the wrapper.
            //ex: if your function is correct
            //$wnd.javascriptbutton(parent);
        }-*/;
    }

    @Override
    public void fireEvent(GwtEvent<?> event)
    {
    }

    @Override
    public HandlerRegistration addClickHandler(ClickHandler handler)
    {
        //bind this handler to native button's onClick, return the registration for removal, on remove you need to reset the onClick
        return null;
    }
} 
````  `但理想情况下，如果您想获得内置功能，`MyTextButton`该类可以由任何其他特定类扩展。`UIObject```

# asp.net - 将灯箱（或类似的东西）添加到 ASP.NET 项目

> ID：14100765
> 
> 赞同：0
> 
> 时间：2012-12-31T11:06:12.603
> 
> 标签：asp.net, lightbox

我需要实现一些，让我们在我接管的一些旧 ASP.NET 项目中将其称为“对话框”。这是一个巨大的项目，所以我不允许实施新事物。

我有一个表单，用户最多可以在该表单上附加 3 个文件附件，输入大约 10-15 个字段，并在填写必填字段后，启用提交按钮获取。

需要做的是按下提交，等待服务器的任何可能响应，然后显示某种对话框、警报、灯箱，其中将显示简短摘要和正确上传文件的列表。

在 ASP.NET 中执行此操作的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T11:20:01.390

考虑到 jQuery Lightbox 是为覆盖图像而不是 HTML 而设计的，我建议使用[FancyBox](http://fancybox.net/)或[FaceBox](http://defunkt.io/facebox/)。

# ios - 从 'UIView *const_strong' 分配给 'AAViewController *__strong' 的不兼容指针类型

> ID：14100778
> 
> 赞同：1
> 
> 时间：2012-12-31T11:07:38.390
> 
> 标签：ios, uiview, uiviewcontroller, uinavigationcontroller, ios6

检查导航控制器堆栈中的控制器，但分配控制器值会收到警告“不兼容的指针类型从 'UIView *const_strong' 分配给 'AAViewController *__strong'”

AAViewController *控制器；

```
for(UIView *view in self.navigationController.viewControllers)
{            
     if([view isKindOfClass:[AAViewController class]])
     {
         controller = view;
         break;
     }
} 
```

我在控制器中遇到错误=提前查看谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-31T11:11:29.130

类型转换它。

```
controller=(AAViewController *)view; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T11:11:41.463

像这样做

```
AAViewController *controller;

for(UIViewController *viewController in self.navigationController.viewControllers)
{

    if([viewController isKindOfClass:[AAViewController class]])
    {
        controller = viewController;
        break;
    }
} 
```

# ruby-on-rails - 如何在 MongoDB/Mongoid 中仅按小时：分钟格式对数据进行排序？（没有日期！）

> ID：14100782
> 
> 赞同：1
> 
> 时间：2012-12-31T11:07:59.920
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mongodb, mongoid, mongoid3

我在我的项目中使用 MongoDB 和 Mongoid。我在订购“时间”字段数据时遇到了一些困难。

如您所知，即使您`Time`在 Mongoid 文档中设置了字段类型，时间数据也会以这种格式存储（请注意，我使用 +2 小时偏移量来获取我自己的时区时间而不是 UTC）：

`Mon, 31 Dec 2012 08:30:00 EET +02:00`

我不确定我是否遗漏了什么，但这就是发生在我身上的事情。

我想在`Time`我的一个视图中使用该数据。我需要按 ONLY`Hour:Minute`格式对一些相关的东西进行排序。我不希望 Rails 处理字段数据的 DATE 部分。因为每当将新`Time`记录插入数据库时​​，都会将日期信息作为当前日期。

## 问题是：

因为它为每条新`Time`记录保存了当前日期，所以当我尝试`order_by("hour DESC")`新记录时总是首先检索到，即使 HOUR 部分数据更大！

## 例如：

```
First data:
=> Tue, 27 Nov 2012 19:50:00 EET +02:00
Second data:
=> Mon, 24 Dec 2012 18:45:00 EET +02:00 
```

如您所知，通常 19:50 大于 18:45。但在这种情况下，由于 Rails 将`day`信息纳入计算，18:45 看起来比 19:50 大！

那么这个问题的解决方法是什么？

提前感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T11:57:27.567

我在 Mongoid 的问题列表中找到了答案： [https ://github.com/mongoid/mongoid/issues/1169](https://github.com/mongoid/mongoid/issues/1169)

这真的很奇怪...

如果我理解得很好，`Time`字段类型完全没用！`DateTime`和然后有什么区别`Time`？？

您甚至无法仅在`Time`字段内比较小时和分钟。

屏住呼吸，为周围的工作...

## 解决方案是：

不要使用`Time`字段类型！只需`String`通过该程序使用和比较小时和日期。

```
Person.where(:time.gt => "13:00") 
```

如果有人能解释这种奇怪的情况，我会很高兴。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-29T20:31:21.903

存储一天中时间的最佳方式是在 Integer 字段中作为 seconds_since_midnight。然后就可以正常排序了。

```
field :time, type: Integer
validates :time, presence: true, numericality: { greater_than_or_equal_to: 0, less_than_or_equal_to: 86399 } 
```

[http://api.rubyonrails.org/classes/DateTime.html#method-i-seconds_since_midnight](http://api.rubyonrails.org/classes/DateTime.html#method-i-seconds_since_midnight) [http://api.rubyonrails.org/classes/Time.html#method-i-seconds_since_midnight](http://api.rubyonrails.org/classes/Time.html#method-i-seconds_since_midnight)

# java - 为什么流畅的实现比非流畅的实现慢？

> ID：14100786
> 
> 赞同：2
> 
> 时间：2012-12-31T11:08:23.627
> 
> 标签：java, performance, fluent-interface

我写了一些测试代码，比较了使用8 次顺序的`append()`方法 作为一个[流畅的接口](http://en.wikipedia.org/wiki/Fluent_interface)与分别在 8 行中调用它的速度。[`StringBuilder`](http://docs.oracle.com/javase/6/docs/api/java/lang/StringBuilder.html)

流利的：

```
StringBuilder s = new StringBuilder();
s.append(x)
.append(y)
.append(z); //etc 
```

作为非流利的：

```
StringBuilder s = new StringBuilder();
s.append(x)
s.append(y)
s.append(z); //etc 
```

每个方法被调用了 1000 万次。在每个块之间调用 GC。执行版本的顺序颠倒了相同的结果。

我的测试表明，流畅的代码版本慢了大约 10%（仅供参考，测试代码对于匹配但不可预测的附加是公平的，我给了 JVM 预热等时间）。

这是一个惊喜，因为流畅的代码是一行。

为什么非流利的代码会更快？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-31T11:51:05.323

我怀疑这是某些 Java 版本的功能。

如果我运行以下

```
public class Main {

    public static final int RUNS = 100000000;

    static final ThreadLocal<StringBuilder> STRING_BUILDER_THREAD_LOCAL = new ThreadLocal<StringBuilder>() {
        @Override
        protected StringBuilder initialValue() {
            return new StringBuilder();
        }
    };

    public static final StringBuilder myStringBuilder() {
        StringBuilder sb = STRING_BUILDER_THREAD_LOCAL.get();
        sb.setLength(0);
        return sb;
    }

    public static long testSeparate(String x, String y, String z) {
        long start = System.nanoTime();
        for (int i = 0; i < RUNS; i++) {
            StringBuilder s = myStringBuilder();
            s.append(x)
                    .append(y)
                    .append(z);
            dontOptimiseAway = s.toString();
        }
        long time = System.nanoTime() - start;
        return time;
    }

    public static long testChained(String x, String y, String z) {
        long start = System.nanoTime();
        for (int i = 0; i < RUNS; i++) {
            StringBuilder s = myStringBuilder();
            s.append(x);
            s.append(y);
            s.append(z);
            dontOptimiseAway = s.toString();
        }
        long time = System.nanoTime() - start;
        return time;
    }

    static String dontOptimiseAway = null;

    public static void main(String... args) {
        for (int i = 0; i < 10; i++) {
            long time1 = testSeparate("x", "y", "z");
            long time2 = testChained("x", "y", "z");
            System.out.printf("Average time separate %.1f ns, chained %.1f ns%n",
                    (double) time1 / RUNS, (double) time2 / RUNS);
        }
    }
} 
```

使用 Java 7 更新 4

```
Average time separate 49.8 ns, chained 49.0 ns
Average time separate 50.7 ns, chained 49.3 ns
Average time separate 46.9 ns, chained 46.5 ns
Average time separate 46.6 ns, chained 46.4 ns
Average time separate 46.6 ns, chained 46.6 ns
Average time separate 47.6 ns, chained 47.3 ns
Average time separate 46.7 ns, chained 47.2 ns
Average time separate 46.7 ns, chained 47.0 ns
Average time separate 46.0 ns, chained 46.6 ns
Average time separate 46.7 ns, chained 46.3 ns 
```

使用 Java 7 更新 10

```
Average time separate 50.4 ns, chained 50.0 ns
Average time separate 50.1 ns, chained 50.1 ns
Average time separate 45.9 ns, chained 46.5 ns
Average time separate 46.6 ns, chained 46.7 ns
Average time separate 46.3 ns, chained 46.4 ns
Average time separate 46.7 ns, chained 46.5 ns
Average time separate 46.2 ns, chained 46.4 ns
Average time separate 46.6 ns, chained 46.0 ns
Average time separate 46.4 ns, chained 46.2 ns
Average time separate 45.9 ns, chained 46.2 ns 
```

最初可能看起来有轻微的偏差，但如果您的运行更新 10 随着时间的推移没有明显的偏差。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-31T11:16:13.070

首先，请用更大的测试重复您的基准测试（即 10000 次而不是 8 次调用），在多次迭代中运行基准测试，并多次运行整个测试以查看结果是否一致。

源代码行数与结果的速度无关。流畅的调用有一个需要处理的返回值，而非流畅的调用只是访问一个从未写入的变量，忽略返回值。这可能是差异的可能解释，尽管我认为它不应该那么大。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-31T11:29:39.583

我尝试了下面的测试并获得了两种方法的非常接近的结果（在某些运行中完全匹配） - 所有方法都在实际测试之前编译：

```
public class Test1 {

    public static void main(String[] arg) {
        //warm up
        for (int i = 0; i < 1_000; i++) {
            method1("" + i);
        }

        for (int i = 0; i < 1_000; i++) {
            method2("" + i);
        }

        //full gc + test method1
        System.gc();
        System.out.println("method1");
        long start = System.nanoTime();
        for (int i = 0; i < 1_000; i++) {
            method1("" + i);
        }
        long end = System.nanoTime();
        System.out.println("method1: " + (end - start) / 1_000_000);

        //full gc + test method2
        System.gc();
        System.out.println("method2");
        start = System.nanoTime();
        for (int i = 0; i < 1_000; i++) {
            method2("" + i);
        }
        end = System.nanoTime();
        System.out.println("method2: " + (end - start) / 1_000_000);
    }

    public static void method1(String seed) {
        StringBuilder sb = new StringBuilder(seed);
        for (int i = 0; i < 10000; i++) {
            sb.append(seed + i)
                    .append(seed + i)
                    .append(seed + i)
                    .append(seed + i)
                    .append(seed + i)
                    .append(seed + i);
        }
        if (sb.length() == 7) {
            System.out.println("ok"); //pretending we are doing something
        }
    }

    public static void method2(String seed) {
        StringBuilder sb = new StringBuilder(seed);
        for (int i = 0; i < 10000; i++) {
            sb.append(seed + i);
            sb.append(seed + i);
            sb.append(seed + i);
            sb.append(seed + i);
            sb.append(seed + i);
            sb.append(seed + i);
        }
        if (sb.length() == 7) {
            System.out.println("ok"); //pretending we are doing something
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-31T12:17:44.287

这一切都取决于 JVM 优化，其行为难以预测。如果您将其关闭（-Xint），那么您会看到 v.1 更快。在我有 1,000,000 次调用的 PC 上，v.1 提供 1466 毫秒，v.2 提供 1544 毫秒。随着优化“开启”，我看不到任何真正的区别。无论如何，v.1 的字节码看起来更好（我使用 A.Loskutov 的 Eclipse 字节码大纲插件）

为了

```
s.append(x)
.append(y)
.append(z); 
```

它是

```
 ALOAD 1
    ALOAD 0
    GETFIELD test/Test1.x : Ljava/lang/String;
    INVOKEVIRTUAL java/lang/StringBuilder.append(Ljava/lang/String;)Ljava/lang/StringBuilder;
    ALOAD 0
    GETFIELD test/Test1.y : Ljava/lang/String;
    INVOKEVIRTUAL java/lang/StringBuilder.append(Ljava/lang/String;)Ljava/lang/StringBuilder;
    ALOAD 0
    GETFIELD test/Test1.z : Ljava/lang/String;
    INVOKEVIRTUAL java/lang/StringBuilder.append(Ljava/lang/String;)Ljava/lang/StringBuilder; 
```

并且对于

```
 s.append(x);
    s.append(y);
    s.append(z); 
```

它是

```
 ALOAD 1
    ALOAD 0
    GETFIELD test/Test1.x : Ljava/lang/String;
    INVOKEVIRTUAL java/lang/StringBuilder.append(Ljava/lang/String;)Ljava/lang/StringBuilder;
    POP
    ALOAD 1
    ALOAD 0
    GETFIELD test/Test1.y : Ljava/lang/String;
    INVOKEVIRTUAL java/lang/StringBuilder.append(Ljava/lang/String;)Ljava/lang/StringBuilder;
    POP
    ALOAD 1
    ALOAD 0
    GETFIELD test/Test1.z : Ljava/lang/String;
    INVOKEVIRTUAL java/lang/StringBuilder.append(Ljava/lang/String;)Ljava/lang/StringBuilder; 
```

# sql - 选择所有部分并按用户 ID 标记具有用户权限的部分

> ID：14100788
> 
> 赞同：1
> 
> 时间：2012-12-31T11:08:44.557
> 
> 标签：sql, sql-server, tsql

我在具有列 ( ) 的表中存储在数据库中的部分列表和具有列`Sections`( `sectionId, sectionTypeId, sectionName`) 的表中的权限。`UserPrivilages``userPrivilagesId, userId, sectionTypeId`

我想从表中选择所有部分，`Sections`但将它们标记`sectionTypes`为`sectionTypeId`存储在`UserPrivilages`by中`userId`。

就像是：

```
SELECT sectionId, sectionTypeId, sectionName, (true/false) as privilage
FROM Sections 
```

如果我用表加入这个结果，`UserPrivilages`我得到的结果只存在于两个表中，但我还想拥有用户`t have`没有特权的部分。

`UserPrivilages`如果表存在于表中，则此 true/false 来自`sectionTypeId`表，否则返回 true，否则为 false`Sections``UserPrivilages``userId`

所以结果将是例如

```
SectionId   sectionTypeId   sectionName   privilage
1           1               Name1         true or 1
2           2               Name2         false or 0 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T11:12:51.563

听起来您想要一个左连接，并且可能`COALESCE`在特权中不存在行时替换一个答案：

```
SELECT
  s.sectionId,
  s.sectionTypeId,
  s.sectionName,
  COALESCE(p.privilage,0) as privilage
FROM
  Sections s
    left join
  Privilages p
    on
       s.sectionTypeId = p.sectionTypeId and
       p.UserId = @User 
```

这将有一个`0`不存在匹配的地方。

* * *

或者，可能，重新阅读问题，您不是从 中选择一列`p`，您只是想检查是否存在：

```
SELECT
  s.sectionId,
  s.sectionTypeId,
  s.sectionName,
  CASE WHEN p.userPrivilagesId is NULL THEN 0 ELSE 1 END as privilage
FROM
  Sections s
    left join
  Privilages p
    on
       s.sectionTypeId = p.sectionTypeId and
       p.UserId = @User 
```

（假设`userPrivilagesId`是 中的非 NULL 列`p`）。

# mysql - 通过运行查询更新表以防止重复记录

> ID：14100789
> 
> 赞同：1
> 
> 时间：2012-12-31T11:09:03.500
> 
> 标签：mysql, sql

避免表中重复记录

我有一张像下面这样的表

```
CREATE TABLE models(model_id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
                         model_no varchar(255));                             

INSERT INTO models(model_no)
                 VALUES('M24'),
                       ('M22'),
                       ('M25'),
                       ('M24'),
                       ('M24'),              
                       ('M35'),
                       ('M15'),
                       ('M18'),
                       ('M25'),
                       ('M15'),
                       ('M15'),
                       ('M17'),
                       ('M19'),
                       ('M29'),
                       ('M29'),
                       ('M12'),
                       ('M12'),
                       ('M13'),
                       ('M29'); 
```

我想通过运行删除或更新查询从该表中删除重复的模型，以便该模型将只出现一次，如下所示

```
1    M24
2    M22
3    M25
6    M35
7    M15
8    M18
12   M17
13   M19
14   M29
16   M12
18   M13 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T11:30:31.347

要删除表中已存在的重复项，您可以使用：

```
CREATE TEMPORARY TABLE tmp (ModelID INT NOT NULL);

INSERT tmp (ModelID)
SELECT  t1.Model_ID
FROM    Models t1
WHERE   EXISTS
        (   SELECT  1
            FROM    Models t2
            WHERE   t1.Model_No = t2.Model_No
            AND     t2.Model_ID < t1.Model_ID
        );

DELETE  
FROM    Models
WHERE   Model_ID IN (SELECT ModelID FROM tmp); 
```

**[SQL小提琴](http://www.sqlfiddle.com/#!2/fe893/1)**

然后继续前进，您应该添加一个唯一索引以阻止进一步的重复。

```
CREATE UNIQUE INDEX UQ_Models ON Models (Model_No); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T11:42:48.377

```
delete m from models m
join models m2 on m2.model_no = m.model_no and m.model_id > m2.model_id 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-31T11:31:00.500

尝试使用临时表。

```
create temporary table tmpTable (model_id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
                     model_no varchar(255));

 insert  tmpTable
    (model_id)
 select  model_id
 from    models m
 where   exists
    (
    select  *
    from   models m2
    where   m2.model_no = m.model_no

            and m2.model_id> m.model_id
    );

delete  
from    models
where   model_id in (select model_id from tmpTable); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-31T11:33:44.603

试试这个：

```
ALTER IGNORE TABLE `models`   
ADD UNIQUE INDEX (`model_no`); 
```

# python - 在 OpenERP6.1 中比较 one2many 表中的两行

> ID：14100792
> 
> 赞同：2
> 
> 时间：2012-12-31T11:09:20.180
> 
> 标签：python, openerp

我们如何在 OpenERP6.1 中比较 oneTomany 表中的两行？

我有一个主表，说“XX”，我有一个 oneTomany 表，说与该表相对应的“YY”。

现在，我在“YY”表中有三列。每次我在该表中创建记录时，我都想检查三列中的值是否相同。

即，如果我单击创建按钮并输入值为“快乐”、“新”、“年”的第一行，

下次输入相同的值时，系统会提示您不要重复这些值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T14:22:38.187

您可以至少使用以下两种方法之一： 1\. 在列上使用具有唯一性的 _sql_constraint，例如

```
 _sql_constraints = [
    ('number_uniq', 'unique(number, company_id, journal_id, type)', 'Invoice Number must be unique per Company!'),
] 
```

来自 account.invoice 对象，或

覆盖 yy 对象的创建/写入方法并为您的字段编写 onchange 函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T14:19:49.260

为什么不能使用`_constraint`？只有在保存记录时才会收到警告。

# mysql - 获取一年中每个月创建的行数

> ID：14100793
> 
> 赞同：-1
> 
> 时间：2012-12-31T11:09:31.653
> 
> 标签：mysql

我有一个名为的数据库表`APPLICATION`，其中包含以下列

```
applicationnumber varchar,
createddate datetime, 
applicantname varchar, 
material varchar, 
location varchar 
```

我需要编写一个查询，显示每个月为这些位置创建的应用程序数量

例如。查询结果应如下所示

```
Location  | Jan2012 | Feb2012 | Mar2012 | Apr2012 
-----------------------------------------------------------------
London | 34322342 | 4342424 | 54353454 | 5434  
Chicago| 43242345 | 9943455 | 85748294 | 544 
```

结果是每个月为特定位置创建的应用程序数量。

每列将执行相同的查询逻辑，只是月份发生变化。我尝试使用该`MONTH()`函数，但我需要将月份矩阵作为一列而不是作为一行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T11:27:28.663

您可以使用`DATE_FORMAT`createddate 字段上的函数仅获取月份和年份，然后获取`GROUP BY`位置。这样的事情应该这样做：

```
SELECT
    `location`,
    COUNT(`applicationnumber`),
    DATE_FORMAT(`createddate`, '%M %Y') AS `date`
FROM `APPLICATION`
GROUP BY `location`; 
```

应该给出每月行数的结果。

# python - Python：通过迭代加速矩阵坐标映射

> ID：14100796
> 
> 赞同：3
> 
> 时间：2012-12-31T11:09:50.583
> 
> 标签：python, multidimensional-array, numpy, coordinates

我试图让这段代码尽可能快地运行，目前效率很低。

我有一个标量数据的 4D 矩阵。4 个维度对应于纬度、经度、高度和时间。数据存储在一个 numpy 数组中，其形状为 (5,5,30,2)。

在 4 个不同的列表中，我为每个轴保留“地图”，存储与每个索引对应的值。例如，地图数组可能如下所示：

```
mapLatitude = [45.,45.2,45.4,45.6,45.8]
mapLongitude = [-10.8,-10.6,-10.4,-10.2,-10.]
mapAltitude = [0,50,100,150,...,1450]
mapTime = [1345673,1345674] 
```

这意味着在数据矩阵中，位置 0,1,3,0 的数据点对应于
Lat = 45, Lon = -10.6, Alt = 150, Time = 1345673。

现在，我需要生成一个新数组，其中包含数据矩阵中每个点的坐标。

到目前为止，这是我写的：

```
import numpy as np

# data = np.array([<all data>])
coordinateMatrix = [ 
   (mapLatitude[index[0]],
    mapLongitude[index[1]],
    mapAltitude[index[2]],
    mapTime[index[3]] ) for index in numpy.ndindex(data.shape) ] 
```

这可行，但需要很长时间，尤其是当数据矩阵的大小增加时（我需要将其与形状类似 (100,100,150,30) 的矩阵一起使用）。

如果有帮助，我需要生成此坐标矩阵以将其提供给`scipy.interpolate.NearestNDInterpolator`.

关于如何加快速度的任何建议？
非常感谢你！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T11:47:07.553

如果您将列表转换为`ndarray`'s，您可以使用以下广播：

```
coords = np.zeros((5, 5, 30, 2, 4))
coords[..., 0] = np.array(mapLatitude).reshape(5, 1, 1, 1)
coords[..., 1] = np.array(mapLongitude).reshape(1, 5, 1, 1)
coords[..., 2] = np.array(mapAltitude).reshape(1, 1, 30, 1)
coords[..., 3] = np.array(mapTime).reshape(1, 1, 1, 2) 
```

对于更一般的输入，这样的东西应该可以工作：

```
def makeCoordinateMatrix(*coords) :
    dims = len(coords)
    coords = [np.array(a) for a in coords]
    shapes = tuple([len(a) for a in coords])
    ret = np.zeros(shapes + (dims,))
    for j, a in enumerate(coords) :
        ret[..., j] = a.reshape((len(a),) + (1,) * (dims - j - 1))
    return ret

coordinateMatrix = makeCoordinateMatrix(mapLatitude, mapLongitude,
                                        mapAltitude, mapTime) 
```

# linux - 在 VM 完全启动之前运行 Vagrant 配置脚本？

> ID：14100797
> 
> 赞同：3
> 
> 时间：2012-12-31T11:09:58.977
> 
> 标签：linux, ubuntu, vagrant

我有一个正在准备的 Vagrant 盒子，以及一个作为配置文件的 shell 脚本。我花了几天时间让它工作，现在它看起来稳定且完整。基础版是 Ubuntu 12.04（32 位），在 VM 上运行 Postgres、Redis 和 Memcached。配置脚本设置 Nginx 配置，创建一个空白数据库，并进行一些基本的内务管理。

当我来打包 VM 并尝试在家里的另一台机器上重新运行它时，我在第一次运行时一直遇到一个问题`vagrant up`（.`dropdb``createdb`

深入了解为什么会发生这种情况（我是一名前 Windows 人员，所以这需要做一些事情），我发现自己处于运行级别和`/etc/rc[0-6,S].d`文件的深处。

我有我感兴趣的三个服务的相关 S（启动）文件：

```
vagrant@precise32:~$ ls -l /etc/rc2.d
total 4
-rw-r--r-- 1 root root 677 Apr 14  2012 README
lrwxrwxrwx 1 root root  20 Dec 29 10:05 S19postgresql -> ../init.d/postgresql
lrwxrwxrwx 1 root root  19 Dec 29 10:05 S20memcached -> ../init.d/memcached
lrwxrwxrwx 1 root root  15 Dec 29 10:05 S20nginx -> ../init.d/nginx
lrwxrwxrwx 1 root root  22 Dec 29 10:05 S20redis-server -> ../init.d/redis-server
... 
```

和运行级别 0（关闭）的 K 文件，所以一切看起来都井井有条：

```
vagrant@precise32:~$ ls -l /etc/rc0.d
total 4
lrwxrwxrwx 1 root root  19 Dec 29 10:05 K20memcached -> ../init.d/memcached
lrwxrwxrwx 1 root root  15 Dec 29 10:05 K20nginx -> ../init.d/nginx
lrwxrwxrwx 1 root root  22 Dec 29 10:05 K20redis-server -> ../init.d/redis-server
lrwxrwxrwx 1 root root  20 Dec 29 10:05 K21postgresql -> ../init.d/postgresql
.... 
```

这似乎表明底层 VM 运行级别不是 2，因此为了调试此问题，我创建了一个新的配置脚本来输出 a.) 配置时的运行级别，以及 b.) 是否预期的进程正在运行（memcache、prostgres、redis）：

```
ps aux | grep memcache
ps aux | grep postgres
ps aux | grep redis
# expected output is 'N 2'
runlevel 
```

我跑了`vagrant destroy`，然后`vagrant up`就这个，结果如下：

```
[default] Running provisioner: Vagrant::Provisioners::Shell...
root       791  0.0  0.2   4624   840 ?        S    10:33   0:00 grep memcache
root       793  0.0  0.2   4624   836 ?        S    10:33   0:00 grep postgres
root       795  0.0  0.2   4624   840 ?        S    10:33   0:00 grep redis
unknown 
```

即，在运行配置脚本时服务没有运行，更令人困惑的`runlevel`是，甚至无法识别该命令。

如果我然后在正在运行的 VM 上重复重新运行配置脚本，使用`vagrant provision`，我在前几次运行它时得到相同的结果，然后最终（2-3 分钟后）我看到了我第一次预期的结果：

```
[default] Running provisioner: Vagrant::Provisioners::Shell...
memcache  1103  0.2  0.2  46336  1072 ?        Sl   10:56   0:00 /usr/bin/memcached -m 64 -p 11211 -u memcache -l 127.0.0.1
root      1267  0.0  0.2   4624   840 ?        S    10:56   0:00 grep memcache
postgres  1073 13.0  2.0  50440  7828 ?        S    10:56   0:02 /usr/lib/postgresql/9.1/bin/postgres -D /var/lib/postgresql/9.1/main -c config_file=/etc/postgresql/9.1/main/postgresql.conf
postgres  1077  0.3  0.3  50440  1248 ?        Ss   10:56   0:00 postgres: writer process
postgres  1078  0.3  0.3  50440  1244 ?        Ss   10:56   0:00 postgres: wal writer process
postgres  1079  0.1  0.6  50860  2296 ?        Ss   10:56   0:00 postgres: autovacuum launcher process
postgres  1080  0.0  0.3  20640  1284 ?        Ss   10:56   0:00 postgres: stats collector process
root      1269  0.0  0.2   4624   836 ?        S    10:56   0:00 grep postgres
redis     1123  0.6  0.2   3292  1036 ?        Ss   10:56   0:00 /usr/bin/redis-server /etc/redis/redis.conf
root      1271  0.0  0.2   4624   840 ?        S    10:56   0:00 grep redis
N 2 
```

看起来一切都需要一些时间，这是有道理的，但对我来说是一个巨大的问题，因为配置脚本*总是*第一次失败。

这是已知情况吗？如果是，解决方案是什么？理想情况下，配置脚本会暂停，直到运行级别更改为 2，即机器已准备好接受 shell 命令。

**[更新：黑客]**

我已经设法通过破解以下脚本来解决这个问题：

```
while [ "`runlevel`" = "unknown" ]; do
    echo "runlevel is 'unknown' - waiting for 10s"
    sleep 10
done
echo "runlevel is now valid ('`runlevel`'), kicking off provisioning..." 
```

我已将其保存为“pre-provision.sh”，我的 Vagrantfile 现在看起来像：

```
# Enable provisioning with a shell script.
config.vm.provision :shell, :path => "pre-provision.sh"
config.vm.provision :shell, :path => "provision.sh", :args => "myapp" 
```

给出以下输出：

```
[default] Running provisioner: Vagrant::Provisioners::Shell...
runlevel is 'unknown' - waiting for 10s
runlevel is 'unknown' - waiting for 10s
runlevel is 'unknown' - waiting for 10s
runlevel is 'unknown' - waiting for 10s
runlevel is 'unknown' - waiting for 10s
runlevel is 'unknown' - waiting for 10s
runlevel is 'unknown' - waiting for 10s
runlevel is 'unknown' - waiting for 10s
runlevel is 'unknown' - waiting for 10s
runlevel is 'unknown' - waiting for 10s
runlevel is 'unknown' - waiting for 10s
runlevel is now valid ('N 2'), kicking off provisioning...
[default] Running provisioner: Vagrant::Provisioners::Shell...
... 
```

然后原来的`provision.sh`运行，一切正常。

**我没有将此标记为答案（尽管它是*一个*答案），因为我仍然想知道我应该做什么 - 这肯定不是它的工作方式吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T17:57:42.243

事实证明，最简单的方法是查找相关进程的 PID 文件（有关 pid 文件的说明，请参阅本文 -[什么是 .pid 文件，它包含什么？](https://stackoverflow.com/questions/8296170/)）

```
NGINX_PID=/var/run/nginx.pid

...

## set up nginx configuration using .config from shared directory
if [ ! -f $NGINX_PID ]; then
    echo "---> Waiting for for Nginx process to spin up"
    while [ ! -f $NGINX_PID ]; do
        echo .
        sleep 1
    done
fi 
```

# ruby-on-rails - 在 redmine 中使用 project.identifier 作为变量

> ID：14100800
> 
> 赞同：0
> 
> 时间：2012-12-31T11:10:01.203
> 
> 标签：ruby-on-rails, ruby, plugins, redmine

在我们的 redmine 设置中，对应于 project.identifier（不是 :project_id），我们在另一台服务器中有文件夹，开发人员存储与他们的项目相关的 mysql 数据库转储。我正在尝试编写一个仅显示所有数据库转储列表的插件。

为此，我最初尝试使用 net/ssh，然后插件登录到 db 转储所在的另一台服务器并执行 ls。我在插件视图的无序列表中显示 ls 输出。为此，我应该将 project.identifier 作为参数发送给 ls 以获取特定于该项目的转储列表。无法弄清楚如何通过 Net::SSH 发送局部变量。

然后我改变了使用 net/ssh 的想法，现在只需执行一个执行 ssh 和 ls 的本地脚本。现在我想再次使用 project.identifier 作为参数。如何将 project.identifier 的值作为参数传递给系统调用中的命令？

这是我的控制器。

```
require 'rubygems'
require 'net/ssh'

class BackupsController < ApplicationController
  helper :projects
  unloadable

  def index
  #host = '192.168.122.245'
  #user = 'root'
  #Net::SSH.start( host, user ) do |ssh|
  #@result = ssh.exec!('dumplist website')
  #end
  @identifier = "#{project.identifier}"
  @result = %x[dumpshow @identifier]
  end
end 
```

dumpshow 是我运行 ssh 的脚本`ls $1`。我想将 project.identifier 作为 $1 发送

使用上面的脚本，我收到以下错误。 `NameError (undefined local variable or method 'project' for #<BackupsController:0x7ff5b4a756a0>):`

总而言之，我想使用 Redmine 的核心控制器和模型中的变量。这似乎很简单，但我在某处错过了它。或者当我们找到 USer.Current 时，应该有一种非常简单的方法来找到当前项目的标识符。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T20:09:41.680

我让它工作了。它只是参数 [:project_id]。我花了一些时间来了解 redmine 的词汇。我觉得开发文档有限。

# spring - java.net.ConnectException：连接到 ldap 时连接超时

> ID：14100806
> 
> 赞同：3
> 
> 时间：2012-12-31T11:10:47.960
> 
> 标签：spring, active-directory, ldap, spring-ldap

我正在尝试使用**spring ldap 1.3.1.RELEASE连接到****windows server 2008**上的**ldap 活动目录** ，ldap 配置如下：

 *****   **ldap 网址**是：ldap://dc.fabrikam.com
*   **用户名**：管理员
*   **密码**：123456

**- spring ldap配置**如下：

```
 <bean id="contextSource" 
    class="org.springframework.ldap.core.support.LdapContextSource">
    <property name="url" value="ldap://dc.fabrikam.com" />
    <property name="base" value="dc=fabrikam,dc=com" />     
    <property name="userDn" value="CN=administrator,CN=Users,DC=fabrikam,DC=com" />     
    <property name="password" value="123456" />

    <property name="baseEnvironmentProperties">
    <map>
        <entry key="java.naming.referral">
            <value>follow</value>
        </entry>
    </map>
    </property>

</bean>

<bean id="ldapTemplate" class="org.springframework.ldap.core.LdapTemplate">
    <constructor-arg ref="contextSource" />
</bean> 
```

*   **LDAPContactDAO：**

    ```
    @Service
    public class LDAPContactDAO implements ContactDAO {

    @Autowired
    private LdapTemplate ldapTemplate;

    public List getAllContactNames() {
        return ldapTemplate.search("", "(objectclass=person)",
                new AttributesMapper() {
                    public Object mapFromAttributes(Attributes attrs)
                            throws NamingException {
                        return attrs.get("cn").get();
                    }
                });
    }

    } 
    ```

- 异常前的调试：

```
2012-12-31/15:50:36.425 [localhost-startStop-1] DEBUG AuthenticationSource not set - using default implementation
2012-12-31/15:50:36.428 [localhost-startStop-1] DEBUG Not using LDAP pooling
2012-12-31/15:50:36.428 [localhost-startStop-1] DEBUG Trying provider Urls: ldap://192.168.1.118/dc=fabrikam,dc=com
2012-12-31/15:50:37.558 [http-bio-8080-exec-5] DEBUG Got Ldap context on server 'ldap://192.168.1.118/dc=fabrikam,dc=com' 
```

尝试使用 getAllContactNames 方法时，出现以下异常：

```
org.springframework.ldap.CommunicationException: fabrikam.com.com:389; nested exception is javax.naming.CommunicationException: fabrikam.com.com:389 [Root exception is java.net.ConnectException: Connection timed out: connect]
org.springframework.ldap.support.LdapUtils.convertLdapException(LdapUtils.java:100)
org.springframework.ldap.core.LdapTemplate.search(LdapTemplate.java:319)
org.springframework.ldap.core.LdapTemplate.search(LdapTemplate.java:259)
org.springframework.ldap.core.LdapTemplate.search(LdapTemplate.java:571)
org.springframework.ldap.core.LdapTemplate.search(LdapTemplate.java:556)
org.springframework.ldap.core.LdapTemplate.search(LdapTemplate.java:411)
org.springframework.ldap.core.LdapTemplate.search(LdapTemplate.java:431)
org.springframework.ldap.core.LdapTemplate.search(LdapTemplate.java:451)
com.xeno.advancedphonedirectory.LDAPContactDAO.getAllContactNames(LDAPContactDAO.java:20)
com.xeno.advancedphonedirectory.web.IndexController.get(IndexController.java:20)
sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
java.lang.reflect.Method.invoke(Method.java:597)
org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:176)
org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:426)
org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:414)
org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:790)
org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719)
org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:644)
org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:549)
javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
javax.servlet.http.HttpServlet.service(HttpServlet.java:722)

java.net.ConnectException: Connection timed out: connect
    at java.net.PlainSocketImpl.socketConnect(Native Method)
    at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:351)
    at java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:213)
    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:200)
    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:366)
    at java.net.Socket.connect(Socket.java:529)
    at java.net.Socket.connect(Socket.java:478)
    at java.net.Socket.<init>(Socket.java:375)
    at java.net.Socket.<init>(Socket.java:189)
    at com.sun.jndi.ldap.Connection.createSocket(Connection.java:352)
    at com.sun.jndi.ldap.Connection.<init>(Connection.java:187)
    at com.sun.jndi.ldap.LdapClient.<init>(LdapClient.java:118)
    at com.sun.jndi.ldap.LdapClient.getInstance(LdapClient.java:1580)
    at com.sun.jndi.ldap.LdapCtx.connect(LdapCtx.java:2652)
    at com.sun.jndi.ldap.LdapCtx.<init>(LdapCtx.java:293)
    at com.sun.jndi.ldap.LdapCtxFactory.getUsingURL(LdapCtxFactory.java:175)
    at com.sun.jndi.ldap.LdapCtxFactory.getLdapCtxInstance(LdapCtxFactory.java:134)
    at com.sun.jndi.url.ldap.ldapURLContextFactory.getObjectInstance(ldapURLContextFactory.java:35)
    at javax.naming.spi.NamingManager.getURLObject(NamingManager.java:584)
    at javax.naming.spi.NamingManager.processURL(NamingManager.java:364)
    at javax.naming.spi.NamingManager.processURLAddrs(NamingManager.java:344)
    at javax.naming.spi.NamingManager.getObjectInstance(NamingManager.java:316)
    at com.sun.jndi.ldap.LdapReferralContext.<init>(LdapReferralContext.java:93)
    at com.sun.jndi.ldap.LdapReferralException.getReferralContext(LdapReferralException.java:132)
    at com.sun.jndi.ldap.LdapCtx.searchAux(LdapCtx.java:1838)
    at com.sun.jndi.ldap.LdapCtx.c_search(LdapCtx.java:1749)
    at com.sun.jndi.toolkit.ctx.ComponentDirContext.p_search(ComponentDirContext.java:368)
    at com.sun.jndi.toolkit.ctx.PartialCompositeDirContext.search(PartialCompositeDirContext.java:338)
    at com.sun.jndi.toolkit.ctx.PartialCompositeDirContext.search(PartialCompositeDirContext.java:321)
    at javax.naming.directory.InitialDirContext.search(InitialDirContext.java:248)
    at org.springframework.ldap.core.LdapTemplate$4.executeSearch(LdapTemplate.java:253)
    at org.springframework.ldap.core.LdapTemplate.search(LdapTemplate.java:293)
    at org.springframework.ldap.core.LdapTemplate.search(LdapTemplate.java:259)
    at org.springframework.ldap.core.LdapTemplate.search(LdapTemplate.java:571)
    at org.springframework.ldap.core.LdapTemplate.search(LdapTemplate.java:556)
    at org.springframework.ldap.core.LdapTemplate.search(LdapTemplate.java:411)
    at org.springframework.ldap.core.LdapTemplate.search(LdapTemplate.java:431)
    at org.springframework.ldap.core.LdapTemplate.search(LdapTemplate.java:451)
    at com.xeno.advancedphonedirectory.LDAPContactDAO.getAllContactNames(LDAPContactDAO.java:20)
    at com.xeno.advancedphonedirectory.web.IndexController.get(IndexController.java:20)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:176)
    at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:426)
    at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:414)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:790)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:644)
    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:549)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662) 
```

请指教。

**更新：**

我设法使用以下配置使用**jxplorer连接到活动目录：**

1.  **主持人：** dc.fabrikam.com
2.  **端口：** 389
3.  **基础 DN：** dc=fabrikam,dc=com
4.  **用户 DN：** CN=administrator,CN=Users,DC=fabrikam,DC=com
5.  **密码：**秘密

但我仍然通过spring ldap连接超时。

**更新2：**

现在问题已缩小到 spring ldap，因为我尝试使用 JNDI 进行上述配置，并且与 ldap 的连接工作正常，如此处所述：

[ldap 搜索很慢](https://stackoverflow.com/questions/14136091/ldap-search-is-very-slow)

我认为推荐属性可能是问题所在。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-10-09T23:51:21.003

我们发现此问题是由于 DNS 中不存在域控制器造成的。如果您使用的是域名而不是 IP，请执行 NSLOOKUP 以显示该域指向的所有 IP：

```
NSLOOKUP fabrikam.com 
```

确保来自 NSLOOKUP 的所有 IP 在端口 389 上都可以访问：

```
Test-NetConnection 172.30.2.1 -port 389 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T13:59:42.377

连接到远程资源时，可能会出现一千件事。要缩小原因范围，请执行以下操作：

*   检查 Windows 日志（使用事件查看器）
*   如果启用，请禁用 dc.fabrikam.com 上的 Windows 防火墙（然后确保端口 389 已打开）
*   尝试从您手动运行 Java 应用程序的主机连接到 LDAP，例如`telnet dc.fabrikam.com 389`
*   如果可能的话，将您的 Java 应用程序部署在同一主机 dc.fabrikam.com 上以排除连接问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-15T09:55:23.970

要解决这个问题，您需要在您的计算机上添加一个**LDAP** DNS 配置，以允许与 LDAP 服务器建立**弹簧** **连接。**

*   Linux：/etc/hosts

*   Windows：C:\Windows\System32\drivers\etc\hosts

打开 cmd使用**NSLOOKUP命令查看****LDAP**地址，然后将 ldap 服务器地址添加到 windows hosts 文件中：**`<server IP> <server host name>`**

 ****例子：**

> 192.168.1.123 ldap.atlassian.com

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-11-25T14:27:53.797

您遇到的问题是您只需将这些 aumetnar 渗入基础的连接进行分组，例如您的配置是：

```
<property name="base" value="dc=fabrikam,dc=com" /> 
```

改成：

```
<property name="base" value="ou=grupo,dc=fabrikam,dc=com" /> 
```******

# algorithm - 如何平衡 BK-Tree，是否有必要？

> ID：14100808
> 
> 赞同：7
> 
> 时间：2012-12-31T11:10:50.707
> 
> 标签：algorithm, data-structures, levenshtein-distance, edit-distance, bk-tree

我正在研究使用[编辑距离](http://en.wikipedia.org/wiki/Edit_distance)算法在名称数据库中实现模糊搜索。

我发现了一种数据结构，据说可以通过分而治之的方法帮助加快这一[进程——Burkhard-Keller Trees](http://en.wikipedia.org/wiki/BK-tree)。问题是我找不到关于这种特定类型树的太多信息。

*如果我用任意节点填充我的 BK-tree，我有多大可能遇到平衡问题？*

*如果我可能或可能对 BK-Trees 有平衡问题，有没有办法在这种树建成后平衡它？*

*正确平衡 BK-tree 的算法是什么样的？*

**到目前为止我的想法：**

似乎子节点在距离上是不同的，所以我不能简单地旋转树中的给定节点而不重新校准它下面的整个树。但是，如果我能找到一个最佳的新根节点，这可能正是我应该做的。不过，我不确定如何找到最佳的新根节点。

我还将尝试一些方法，看看是否可以通过从一棵空树开始并插入预分布数据来获得一个相当平衡的树。

*   从按字母顺序排列的列表开始，然后从中间排队。（我不确定这是一个好主意，因为按字母排序与按编辑距离排序不同）。
*   完全洗牌的数据。（这在很大程度上依赖于运气来偶然选择一个“不那么糟糕”的根。它可能会严重失败并且可能在概率上保证是次优的）。
*   从列表中的任意单词开始，然后按照与该项目的编辑距离对其余项目进行排序。然后从中间排队。（我觉得这会很昂贵，并且仍然做得很差，因为它不会计算所有单词之间的度量空间连接 - 只是每个单词和一个参考单词）。
*   使用任何方法构建初始树，将其展平（基本上就像前序遍历），然后从中间排队等待新树。（这也会很昂贵，而且我认为它可能仍然表现不佳，因为它不会提前计算所有单词之间的度量空间连接，并且只会得到不同且仍然不均匀的分布）。
*   按名称频率排序，首先插入最流行的，抛弃平衡树的概念。（这可能是最有意义的，因为我的数据分布不均，而且我不会输入纯随机词）。

仅供参考，我目前并不担心名称同义词问题（Bill vs William）。我会分开处理，我认为完全不同的策略会适用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T12:48:06.340

文章中有一个 lisp 示例： http: [//cliki.net/bk-tree](http://cliki.net/bk-tree)。关于不平衡树我认为数据结构和方法似乎足够复杂，而且作者没有说任何关于不平衡树的内容。当您遇到不平衡的树时，也许它不适合您？

# jquery - 自动完成未在列表中显示数据

> ID：14100810
> 
> 赞同：0
> 
> 时间：2012-12-31T11:10:54.733
> 
> 标签：jquery, asp.net-mvc, jquery-autocomplete

这可能只是我忽略的一个简单问题，下面的代码从缓存中检索数据，所以当我输入“g”时，例如我得到 3 个结果，或者“f”我得到 1 个结果。

问题出在带有自动完成功能的页面上，当我输入“g”时，我得到文本框下方的下拉菜单，其中 3 行大约 5px 高，当我输入“f”时，我得到 1 行，但里面没有文本，或者我看不到它的小文本点击。

但是，如果我使用硬编码的值，它就可以了。

谁能发现我错过了什么。？

控制器：

```
public ActionResult QuickSearch(string term)
{
    var wq = LocationList(term).Select(a => new
    {
        Value = a.strLocationName
    });
    return Json(wq, JsonRequestBehavior.AllowGet);
}

private List<DisplayTopOneThousandAutoCompleteWeatherLocations> LocationList(string searchString)
{
    var wq = _IGTOTACWL.DisplayTopWeatherLocations()
        .Where(a => a.strLocationName.StartsWith(searchString, StringComparison.OrdinalIgnoreCase)).ToList();

    return wq.ToList();
} 
```

看法：

```
@using (Html.BeginForm("Index", "SearchResults", FormMethod.Get, new { @id = "frmWeather" })) 
{ 
<div id="dvWL"> 
    <ul id="ulWeatherSearch"> 
        <li> 
            <input id="wns" name="q" title="Change location" type="text"/></li> 
        <li> 
            <input id="wsb" name="b" type="submit" title="Click to search" value="Weather" /></li> 
    </ul> 
</div> 
<input id="hsho" name="o" type="hidden" value="5" /> 
} 
<p class="pIP">Location based on IP Address<br />@ViewBag.IPAddr</p> 
<script> 
    $("#wns").autocomplete({ 
    //source: [ "c++", "java", "php", "coldfusion", "javascript", "asp", "ruby" ], 
    source: '@Url.Action("QuickSearch","Weather")' 
}); 
</script> 
```

我也试过下面的代码，但没有运气

```
<script>
$("#wns").autocomplete({
//source: [ "c++", "java", "php", "coldfusion", "javascript", "asp", "ruby" ],
    source: '@Url.Action("QuickSearch","Weather")',
    dataType: 'json',
    parse: function (data) {
        var rows = new Array();
        for (var i = 0; i < data.length; i++) {
            rows[i] = { data: data[i].strLocationName};
        }
        return rows;
    },
    formatItem: function (row, i, n) {
        return row.strLocationName;
    }
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T10:42:31.547

下面的链接修复了我的问题 [jquery-autocomplete](http://theycallmemrjames.blogspot.co.uk/2010/03/jquery-autocomplete-with-aspnet-mvc.html)

# cassandra - 如何使用java读取键空间的模式。？

> ID：14100813
> 
> 赞同：0
> 
> 时间：2012-12-31T11:11:11.350
> 
> 标签：cassandra, cql

我想在 cassandra 中读取键空间的模式。我知道，在 Cassandra-cli 中，我们可以执行以下命令来获取 Schema

```
show schema keyspace1; 
```

但我想使用 java 从远程机器读取模式。

我怎么能解决这个问题？Lzzz 帮帮我....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T11:26:23.733

我通过使用节俭客户端解决了这个问题

```
 KsDef keyspaceDefinition = _client.describe_keyspace(_keyspace);
 List<CfDef> columnDefinition = keyspaceDefinition.getCf_defs(); 
```

这里的键空间定义包含整个架构细节，因此我们可以从 KsDef 中读取任何我们想要的内容。在我的情况下，我想读取元数据，所以我从上面的列定义中读取列元数据，如下所示。

```
 for(int i=0;i<columnDefinition.size();i++){
         List<ColumnDef> columnMetadata = columnDefinition.get(i).getColumn_metadata();
        for(int j=0;j<columnMetadata.size();j++){
            columnfamilyNames.add(columnDefinition.get(i).getName());
            columnNames.add(new String((columnMetadata.get(j).getName())));
            validationClasses.add(columnMetadata.get(j).getValidation_class());
            //ar.add(coldef.get(i).getName()+"\t"+bb_to_str(colmeta.get(j).getName())+"\t"+colmeta.get(j).getValidationClass());
        }
    } 
```

这里的 columnfamilyNames、columnNames 和 validationClasses 是数组列表。

# asp.net - ASP.NET MVC 禁用移动页面版本？

> ID：14100819
> 
> 赞同：0
> 
> 时间：2012-12-31T11:11:50.520
> 
> 标签：asp.net, asp.net-mvc-4

我从响应式 site.css 文件中删除了移动 CSS 样式，但页面仍会在移动设备上加载移动版本。我希望我的页面在移动设备上加载的方式与在桌面上加载的方式相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T11:18:06.710

查看 site.css 的头部并确保它没有媒体标签。默认的 MVC4 站点有一个最大宽度约束，它会影响何时使用哪些样式表（请参阅[MSDN 教程](http://msdn.microsoft.com/en-us/vs11trainingcourse_aspnetmvc4_topic2.aspx)）。

您正在寻找这样的行：

```
@media only screen and (max-width: 850px) { 
```

# android - 如何在基于android设备的屏幕中适应图像视图？

> ID：14100822
> 
> 赞同：-1
> 
> 时间：2012-12-31T11:12:24.093
> 
> 标签：android, android-ui

我需要在android设备中设计UI部分是，

![在此处输入图像描述](../Images/76bc893c24601efc231f7e9b41fc8d5c.png)

实际上我有一个标题栏图像和四个菜单图像。

我正在使用相对布局来设计此菜单。但是每次在设备中显示最后一张图像时都会遇到问题。

我该如何设计这个？请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T11:22:19.320

你应该使用下面的代码来实现它..

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<Button
    android:id="@+id/btnHeader"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_marginTop="10dip" />

<Button
    android:id="@+id/btnMenu1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/btnHeader"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="10dip" />

<Button
    android:id="@+id/btnMenu2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/btnMenu1"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="10dip" />

<Button
    android:id="@+id/btnMenu3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/btnMenu2"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="10dip" />

<Button
    android:id="@+id/btnMenu4"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/btnMenu3"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="10dip" />

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T11:53:33.450

试试下面的代码。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:src="@drawable/image1" />

    <ImageView
        android:id="@+id/imageView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/image2" 
        android:layout_marginTop="10dp"
        android:layout_gravity="center"/>
    <ImageView
        android:id="@+id/imageView3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/image3" 
        android:layout_marginTop="10dp"
        android:layout_gravity="center"/>
    <ImageView
        android:id="@+id/imageView4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/image4" 
        android:layout_marginTop="10dp"
        android:layout_gravity="center"/>

</LinearLayout> 
```

# php - 如何确保所有内容都出现在单元格上，而不仅仅是第一个单词？

> ID：14100827
> 
> 赞同：1
> 
> 时间：2012-12-31T11:12:54.530
> 
> 标签：php, html, mysql, css

我在从数据库中的 mysql 表到 PHP 中的表单的表上显示内容时遇到问题。我的问题是，例如，地址字段上只显示第一个单词。

请查看我的页面：[http ://www3.londonmet.ac.uk:8008/~iia0014/employeeManager.php](http://www3.londonmet.ac.uk:8008/~iia0014/employeeManager.php)

而且单元格与标题不对齐。

谁能帮我解决这个问题？

在我的 CSS 上，我有：

```
table {
table-layout:fixed;
width:180%;
overflow:hidden;
border:1px ;
word-wrap:nowrap;
text-align:left;
} 
```

但即使删除 CSS，也只会出现第一个单词。

PHP代码：

```
<?php
// Connect to server and select databse.
$con = mysql_connect("$host","$username","$password");
if (!$con){
die("Can not connect: " . mysql_error());
}
mysql_select_db("$db_name",$con);

if(isset($_POST['update'])){
$UpdateQuery = "UPDATE employees SET 
Name='$_POST[name]', 
DOB='$_POST[dob]', 
Tel='$_POST[tel]', 
Address='$_POST[address]', 
Department='$_POST[department]',
PayRate='$_POST[payrate]', 
Skills='$_POST[skills]', 
Gender='$_POST[gender]' 
WHERE EmpNo='$_POST[hidden]'";               
mysql_query($UpdateQuery, $con);
 };

 if(isset($_POST['delete'])){
$DeleteQuery = "DELETE FROM employees WHERE EmpNo='$_POST[hidden]'";          
mysql_query($DeleteQuery, $con);
};

if(isset($_POST['add'])){
$AddQuery = "INSERT INTO employees (EmpNo, Name, DOB, Tel, Address, Department, PayRate,                   Skills, Gender) VALUES ('$_POST[uempNo]','$_POST

[uname]','$_POST[udob]', '$_POST[utel]','$_POST[uaddress]','$_POST[udepartment]',         '$_POST[upayrate]','$_POST[uskills]','$_POST[ugender]')";         
mysql_query($AddQuery, $con);
};

$sql = "SELECT * FROM employees";
$myData = mysql_query($sql,$con);
?>

<table border="1"  width="10%">

<?php

echo "<tr>

<th>Number</th>
<th >Employee Name</th>
<th>DOB</th>
<th>Telephone</th>
<th>Address</th>
<th>Department</th>
<th>Pay Rate</th>
<th>Skills</th>
<th>Gender</th>
</tr>";

while($record = mysql_fetch_array($myData)){
echo "<form action=employeeManager.php method=post>";
echo "<tr>";
echo "<td>" . "<input type=hidden name=hidden value=" . $record['EmpNo'] . " </td>";
echo "<td>" . "<input type=text name=name value=" . $record['Name'] . " </td>";
echo "<td>" . "<input type=text name=dob value=" . $record['DOB'] . " </td>";
echo "<td>" . "<input type=text name=tel value=" . $record['Tel'] . " </td>";
echo "<td>" . "<input type=text name=address value=" . $record['Address'] . " </td>";
echo "<td>" . "<input type=text name=department value=" . $record['Department'] . "     </td>";
echo "<td>" . "<input type=text name=payrate value=" . $record['PayRate'] . " </td>";
echo "<td>" . "<input type=text name=skills value=" . $record['Skills'] . " </td>";
echo "<td>" . "<input type=text name=gender value=" . $record['Gender'] . " </td>";
echo "<td>" . "<input type=submit name=update value=update" . " </td>";
echo "<td>" . "<input type=submit name=delete value=delete" . " </td>";
echo "</tr>";
echo "</form>";
}
echo "<form action=employeeManager.php method=post>";
echo "<tr>";
echo "<td><input type=text name=uempNo></td>";
echo "<td><input type=text name=uname></td>";
echo "<td><input type=text name=udob></td>";
echo "<td><input type=text name=utel></td>";
echo "<td><input type=text name=uaddress></td>";
echo "<td><input type=text name=udepartment></td>";
echo "<td><input type=text name=upayrate></td>";
echo "<td><input type=text name=uskills></td>";
echo "<td><input type=text name=ugender></td>";
echo "<td>" . "<input type=submit name=add value=add" . " </td></tr>";
echo "</form>";
echo "</table>";
mysql_close($con);

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T11:36:10.723

在下面的引号中，您缺少引号并且标签未正确关闭！

```
while($record = mysql_fetch_array($myData)){
    echo "<form action='employeeManager.php' method='post'>";
    echo "<tr>";
    echo "<td><input type='hidden' name=hidden value='" . $record['EmpNo'] . "'> </td>";
    echo "<td><input type='text' name='name' value='" . $record['Name'] . "'> </td>";
    echo "<td><input type='text' name='dob' value='" . $record['DOB'] . "'> </td>";
    echo "<td><input type='text' name='tel' value='" . $record['Tel'] . "'> </td>";
    echo "<td><input type='text' name='address' value='" . $record['Address'] . "'> </td>";
    echo "<td><input type='text' name='department' value='" . $record['Department'] . "     </td>";
    echo "<td><input type='text' name='payrate' value='" . $record['PayRate'] . "'> </td>";
    echo "<td><input type='text' name='skills' value='" . $record['Skills'] . "'> </td>";
    echo "<td><input type='text' name='gender' value='" . $record['Gender'] . "'> </td>";
    echo "<td><input type='submit' name='update' value='update'> </td>";
    echo "<td><input type='submit' name='delete' value='delete'> </td>";
    echo "</tr>";
    echo "</form>";
} 
```

为了更好地理解您的错误，请注意您的代码：

```
echo "<td><input type=text></td>"; 
```

它应该是这样的：

```
echo "<td><input type='text'></td>"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T11:37:02.703

它有效，只是您没有关闭标签，这会导致：

<输入类型=文本名称=地址值=一二三

浏览器将其读取为 value=one 和“two”和“three”，就像单独的参数一样。你需要的是这样的报价：

<input type=text name=address value="一二三"/>

# c++ - Qt 5.0 与 MingW？

> ID：14100828
> 
> 赞同：2
> 
> 时间：2012-12-31T11:13:03.490
> 
> 标签：c++, qt, mingw

我[在此页面中](http://qt-project.org/downloads)没有看到任何可以与 MingW 一起使用的 Qt 5 库。

如果我想将 Qt 5 与 MingW 一起使用，并在 Windows 上开发软件，我有哪些选择？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T11:16:59.943

从该页面下载 QT 源代码并使用 MinGW 构建它！

# php - 带有多个单词的按钮作为文本

> ID：14100833
> 
> 赞同：0
> 
> 时间：2012-12-31T11:14:04.533
> 
> 标签：php, zend-framework

我有一个表单中的这个按钮：

```
$this->addElement('submit', 'save and next', array(
            'id' => 'next'
            )); 
```

但是当我渲染它时，按钮中的文本都是在一起的：`saveandnext`.

有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T11:28:11.893

如果您在标签中指定文本，它应该可以工作。

```
$this->addElement('submit', 'save and next', array(
    'id' => 'next',
    'label' => 'Save and Next'
)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T11:25:57.837

尝试做这样的事情

```
 $save_next = new Zend_Form_Element_Submit(FORM_BUTTON_PREFIX . 'save_next', array(
                                                            'class'     => 'btnSubmit save_next',
                                                            'label'     => 'Save & Next',
                                                            'ignore'    => true
                                                    ));
            $save_next->removeDecorator('DtDdWrapper');
            $this->addElement($save_next); 
```

# php - 如何使用 php 中的 html 邮件发送包含特殊字符的联系表格？

> ID：14100836
> 
> 赞同：0
> 
> 时间：2012-12-31T11:14:20.333
> 
> 标签：php, html

我有一个与`Name`,`CompanyName`和的联系表`Enquiry`。当我在字段中提交带有 html 实体的表单时`Enquiry`（比如`<a href="link-to-page">Link</a>`Or `<script>alert('Hello World!');</script>`）。它出现在邮件中，例如，`<a href=\"link-to-page\">Link</a>`或`<script>alert(\'Hello World!\');</script>`。这里两个引号都被转义了。如何删除转义的斜线？

我在下面附上片段。

```
//I have used htmlspecialchars() to get the html entities in mail as it is.

$senderName  =  htmlspecialchars($_REQUEST['contactName'],ENT_QUOTES);
$senderCompany  = htmlspecialchars($_REQUEST['contactCompany'],ENT_QUOTES);
$senderEnquiry  = htmlspecialchars($_REQUEST['contactEnquiry'],ENT_QUOTES); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T11:30:51.993

您应该将标题的内容类型设置为 text/html 或者请在发布时检查该值，我认为这是因为双引号和单引号问题。例如看下面的代码： -

```
$new = htmlspecialchars("<script>alert(\'Hello World!\');</script>", ENT_QUOTES);
echo $new; // This will print output as <script>alert(\'Hello World!\');</script> 
```

但是如果您将使用双引号更改代码，请参见下文：-

```
$new = htmlspecialchars("<script>alert(\"Hello World!\");</script>", ENT_QUOTES);
echo $new; // This will print output as <script>alert("Hello World!");</script> 
```

所以请在发帖时检查是否有单引号和双引号问题

通过表单获取价值

# java - 选择什么技术？Spring Batch 还是 Hadoop？

> ID：14100858
> 
> 赞同：2
> 
> 时间：2012-12-31T11:16:47.050
> 
> 标签：java, spring, hadoop, spring-batch

我需要每天处理 300 GB 的日志文件 ( `Import`-> `Convert to other format`-> `Upload`)。

选择哪种技术最好？**Spring Batch**还是**Apache Hadoop**？我对这些技术很陌生，无法追踪那里的限制。此外，文件大小可能会无限增长。除此之外，我需要使用给定的硬件设计应用程序 3 Sun Blade Servers with Disaster Recovery 方法。请建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T11:19:21.193

如果只是文件格式转换，那么使用 Hadoop 是没有意义的，除非你可以将文件分成可以以令人尴尬的并行方式分布的块。

此外，如果您不需要进一步存储/索引/处理这些信息，则无需将其存储在某个地方。

最后但并非最不重要的一点是，评估将文件分解为单元的成本作为整体计算成本的一部分。

# ruby-on-rails - 如何在 RubyMine 中删除以前生成的表

> ID：14100863
> 
> 赞同：0
> 
> 时间：2012-12-31T11:17:10.957
> 
> 标签：ruby-on-rails, rubymine

所以这可能很容易。我在 RubyMine 文档或 Google 中找不到任何内容。我之前生成了一个迁移：

```
Proposal name:string date:date title:string text:text user:references 
```

在想要进行更改之后，我经历并删除了所有内容，或者我想到了我的 Rails 项目。这是我尝试重新生成并运行 db:migrate 时得到的

> SQLite3::SQLException: 表 "proposals" 已经存在: CREATE TABLE "proposals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "date" date, "title" varchar(255), " text" text, "user_id" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)

那么我还需要去哪里删除我的表呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T11:21:14.423

Ruby mine 我不确定，但如果你想回滚最新的迁移，它

在您的控制台中

```
rake db:rollback 
```

如果您想恢复之前的生成器操作，例如：

```
rails g scaffold User name:string 
```

并且您想要还原所有生成的代码

```
rails destroy scaffold User 
```

高温高压

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T11:24:27.030

看到这个

[http://guides.rubyonrails.org/migrations.html](http://guides.rubyonrails.org/migrations.html)

并在您的终端中尝试 -`rake db:rollback`

# iphone - 在 Unity3d 中为 iPhone 和 Android 打开设备相机

> ID：14100864
> 
> 赞同：6
> 
> 时间：2012-12-31T11:17:23.000
> 
> 标签：iphone, android-camera, unity3d

我正在开发一个应用程序，我需要在其中以全视图打开设备相机，并且我正在为 iOS 和 Android 制作这个应用程序。那么谁能告诉我如何在 Unity 中为所有 Android 和 iPhone 设备打开全屏设备摄像头。这对我会有很大的帮助。提前致谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2014-06-17T11:55:23.640

在对谷歌和官方文档进行了更多挖掘之后。我得到了我要与你分享的解决方案，它可以帮助某人..有一天..

**1.创建新项目。**

**2.在GameObject中选择Main Camera并通过Inspector改变Transform**

位置 X= -90 Y=785 Z=0 旋转 X=90 Y=90 Z=0 缩放 X=1 Y=1 Z=1

![在此处输入图像描述](../Images/c0b5612400b744103b541f9514320767.png)

**3.现在转到GameObject -> Create Other -> Plane。**

**4.在GameObject中选择Main Camera并**

*4.1 通过 Inspector 改变 Transform*

位置 X=0 Y=0 Z=0 旋转 X=0 Y=0 Z=0 比例 X=100 Y=100 Z=100 ![在此处输入图像描述](../Images/ab069870e64f9a45da25f4d0098218e0.png)

*4.2 更改标签=播放器*

现在创建名称为“CameraController”的 ac# 脚本，并将代码替换为以下代码

```
using UnityEngine;
using System.Collections;

public class CameraController : MonoBehaviour
{
        public WebCamTexture mCamera = null;
        public GameObject plane;

        // Use this for initialization
        void Start ()
        {
                Debug.Log ("Script has been started");
                plane = GameObject.FindWithTag ("Player");

                mCamera = new WebCamTexture ();
                plane.renderer.material.mainTexture = mCamera;
                mCamera.Play ();

        }

        // Update is called once per frame
        void Update ()
        {

        }
} 
```

**5.最后保存并将这个脚本文件拖到“Plane”游戏对象上**

注意 - 您可能会在 Unity 游戏视图中看到旋转的预览，但在 RealDevice 上它运行良好。在 iPhone5 和 Android - Nexus 5 上测试。

这是将旋转角度更改为 180 度时的快照： ![在此处输入图像描述](../Images/9464ccb84bcf9b543e6566ec50477155.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-01T00:45:44.257

如果您的意思是要使用相机拍摄和保存照片，我会推荐 Prime31 的 iOS 和 Android 插件。不幸的是，每个平台的 Etcetera 插件是 65 美元，但我都使用过它们，而且效果很好。

[http://u3d.as/content/prime31/i-os-etcetera-plugin/2CU](http://u3d.as/content/prime31/i-os-etcetera-plugin/2CU)

[http://u3d.as/content/prime31/android-etcetera-plugin/2CY](http://u3d.as/content/prime31/android-etcetera-plugin/2CY)

如果您只想在应用场景中显示相机的实时输出，您可以创建一个平面并使用 WebCamTexture 来显示相机的实时视频输出。

[http://docs.unity3d.com/Documentation/ScriptReference/WebCamTexture.html](http://docs.unity3d.com/Documentation/ScriptReference/WebCamTexture.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-21T13:23:39.150

有一个工具包可用于统一为 iOS 和 Android 打开设备相机，称为 CameraCaptureKit - ( [https://www.assetstore.unity3d.com/en/#!/content/56673](https://www.assetstore.unity3d.com/en/#!/content/56673) )

所有源代码均可用，并且与 Unity UI 一样，它具有简单明了的即插即用演示 - 它解决了使用设备上的相机拍摄静止图像时遇到的一些障碍。

由于 WebCamTexture 是拍摄静止图像的通用解决方案，因此它不能锐化图像，因此在 iOS 上的质量也更低分辨率，因为它使用用于捕获实时视频的配置。

如果你想在那里打开闪光灯/手电筒，你可以使用工具包来做到这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-28T05:09:12.613

有一个很棒的插件名为[Android native Camera](https://assetstore.unity.com/packages/tools/integration/android-native-camera-116383)用于打开设备相机并将视频或图像保存在设备内。目前，它只适用于安卓。

# python - python多个正则表达式

> ID：14100868
> 
> 赞同：3
> 
> 时间：2012-12-31T11:17:43.437
> 
> 标签：python, expression

我需要在我这样做的字符串上应用多个正则表达式：

```
regex = re.compile("...")
regex2 = re.compile("...")
regex3 = re.compile("...")
regex4 = re.compile("...")
if regex.match(string) == None and regex2.match(string) == None and regex3.match(string) == None and regex4.match(string) == None: 
```

我想知道是否有另一种方法可以以某种方式合并或组合单个正则表达式，或者我是否已经在以“正确的方式”进行操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T11:28:22.560

```
r_list = [re.compile("..."),
          re.compile("..."),
          re.compile("..."), 
          re.compile("...")]
if any(r.match(string) for r in r_list):
    # if at least one of the regex's matches do smth 
```

# c - 使用 RubyInline 在 C 中修改 Ruby 数组

> ID：14100869
> 
> 赞同：3
> 
> 时间：2012-12-31T11:17:50.100
> 
> 标签：c, ruby

我在 Ruby 中有数组，我想用 .normalize 方法扩展它们。此方法应该修改数组，使其所有元素的总和为 1。这在 Ruby 中太昂贵了，所以我想在 C 中使用 RubyInline 来完成。

```
require "rubygems"
require "inline"

class Array
inline do |builder|
    builder.c_raw '
     static VALUE normalize(VALUE self) {
        double total_size = 0, len;
        int i;

        VALUE* array = RARRAY_PTR(self);
        len = RARRAY_LEN(self);

        for(i=0; i < len; i++){
            total_size += NUM2DBL(array[i]);
        }

        for(i=0; i < len; i++){
            array[i] = INT2NUM(NUM2DBL(array[i])/total_size);
        }

        return array;
    }'
  end
end

a = [1,2,0,0,0,0,0,3,0,4]

puts a.normalize.inspect 
```

这导致

```
$ ruby tmp.rb 
tmp.rb:29: [BUG] Segmentation fault
ruby 1.8.7 (2011-06-30 patchlevel 352) [x86_64-linux]

Aborted (core dumped) 
```

编辑：经过一些调试，崩溃似乎来了

```
VALUE* array = RARRAY_PTR(self); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T18:08:32.337

这里有几件事需要解决：

当您使用`c_raw`ruby​​inline 时，不会尝试检测 arity，而是假设您要使用可变数量的参数。您可以覆盖它（通过：arity => 0）或将您的方法签名更改为

```
VALUE normalize(int argc, VALUE *argv, VALUE self) 
```

目前 ruby​​inline 假设您的方法具有该签名，因此您可能将整数 0 重新解释为指针。

接下来，此时您总是用零填充数组，因为所有数组元素都 < 1，然后您将转换为整数，因此您得到 0 - 用于`rb_float_new`将 double 转换回 ruby`Float`​​ 。

最后，您的返回值是错误的，它是 a`VALUE *`而不是 a `VALUE`。您可能想返回`self`。

最后，调用你的方法会更像红宝石`normalize!`。默认情况下，ruby inline 从 c 函数名称中提取方法名称，这当然不允许您使用这样的感叹号。您可以使用该`method_name`选项覆盖它。

总而言之，我的示例版本看起来像

```
require "rubygems"
require "inline"

class Array
  inline do |builder|
    builder.c_raw <<-'SRC', :method_name => 'normalize!', :arity => 0
     static VALUE normalize(VALUE self) {
        double total_size = 0;
        size_t len, i;

        VALUE* array = RARRAY_PTR(self);
        len = RARRAY_LEN(self);

        for(i=0; i < len; i++){
            total_size += NUM2DBL(array[i]);
        }
        for(i=0; i < len; i++){
            array[i] = rb_float_new((NUM2DBL(array[i])/total_size));
        }

        return self;
    }
    SRC
  end
end

a = [1,2,0,0,0,0,0,1,0,4]

puts a.normalize!.inspect 
```

# jquery - 获取链接点击的ID

> ID：14100870
> 
> 赞同：2
> 
> 时间：2012-12-31T11:17:52.717
> 
> 标签：jquery, jquery-selectors

我的fancybox脚本中有这段代码：

```
<a href="#" class="approve" id="178">yes</a> 
```

当我尝试使用时：

```
 var getid = $(this).attr('id');
 alert(getid); 
```

我总是不确定。有人可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T11:19:22.423

您在`this`没有任何先前选择对象的情况下使用返回任何选定的 DOM 元素，获取所需目标元素的 id 的可能方法是使用`class`目标元素上的属性

```
 var getid = $(".approve").attr('id');
   alert(getid); 
```

或者您可以使用元素的名称，`a`但它会选择您的 html 页面中的所有链接

```
 var getid = $("a").attr('id');
  alert(getid); 
```

或元素的任何属性。

```
 var getid = $("a[href]").attr('id');
 alert(getid); 
```

参考：

[http://api.jquery.com/category/selectors/](http://api.jquery.com/category/selectors/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-31T11:19:40.503

使用此代码

```
var getid = $('.approve').attr('id');
alert(getid); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-31T11:21:30.603

试试这个：

```
$(document).on('click', '.approve', (function() {
    var getid = $(this).prop('id');
    alert(getid);
});​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-31T11:33:50.793

使用类名而不是这个

```
var getid = $(".approve").attr('id');
 alert(getid); 
```

或使用标签名称

```
var getid = $("a").attr('id');
 alert(getid); 
```

或使用属性名称

```
var getid = $("a[href]").attr('id');
 alert(getid); 
```

如果您想使用以下示例引用`<a>`标签`this`

```
$("a").click(function(){             
    var getid = $(this).attr('id');
    alert(getid);
 }); 
```

jquery 选择器参考 [http://www.w3schools.com/jquery/jquery_ref_selectors.asp](http://www.w3schools.com/jquery/jquery_ref_selectors.asp)

# c# - 在 MVC3 Razor 中以 2 位十进制值显示文本框

> ID：14100871
> 
> 赞同：2
> 
> 时间：2012-12-31T11:17:57.307
> 
> 标签：c#, asp.net-mvc-3

文本框十进制值的格式为“0,0000”（, 是小数分隔符）。我希望只有 2 位小数。我怎样才能做到这一点 ？

**我的模型有：**

```
 [DisplayFormat(DataFormatString = "{0:n2}", ApplyFormatInEditMode = true)]
    public decimal DisplayOrder { get; set; } 
```

**看法：**

```
@Html.EditorFor(model => model.DisplayOrder) 
```

但它不起作用

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T13:41:57.090

[您可以参考此主题以获取有关asp.net mvc3](https://stackoverflow.com/questions/5428289/mvc3-decimal-truncated-to-2-decimal-places-on-edit)中 MVC3 十进制格式的十进制格式的更多信息

和这个链接类似的问题 [Formatting decimal in asp.net mvc3](https://stackoverflow.com/questions/8870931/how-to-show-a-decimal-corretly-formatted-in-0-00-format)

如果上述方法均无效，您可以尝试将您的数字转换为字符串并将其传递给此函数。

```
 /// <summary>
    /// Formatting a given number to 0,00
    /// </summary>
    /// <param name="number"></param>
    /// <returns></returns>
    string NumberFormatting(string number)
    {
        if (number.Contains(','))
        {
            string[] str = number.Split(',');
            if (str[1].Length == 1)
            {
                number += "0";
            }
        }
        else
        {
            number += ",00";
        }
        return DecreaseNumberDigits(number);
    }

    /// <summary>
    /// To allow only two digits after the decimal mark
    /// </summary>
    /// <param name="number"></param>
    /// <returns></returns>
    string DecreaseNumberDigits(string number)
    {
        if (number.Contains(','))
        {
            string[] str = number.Split(',');
            if (str[1].Length > 2)
                number = str[0] + "," + str[1].ToCharArray()[0].ToString() + str[1].ToCharArray()[1].ToString();
        }
        return number;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T12:30:33.123

您可以使用**正则表达式**来完成您的工作。

尝试如下。

```
[RegularExpression(@"^\d+.\d{0,2}$",ErrorMessage = "Price must can't have more than 2 decimal places")]
public decimal DisplayOrder { get; set; } 
```

有关更多信息，请[**在此处查看正则表达式库**](http://regexlib.com/DisplayPatterns.aspx?cattabindex=2&categoryId=3&AspxAutoDetectCookieSupport=1)

我希望这对你有帮助。

# php - ebay 集成出错 - “21916250：未指定退货政策。必须指定退货政策。”

> ID：14100884
> 
> 赞同：0
> 
> 时间：2012-12-31T11:19:29.893
> 
> 标签：php, ebay-api

我想开发一个系统，例如将产品从我的站点导出到 ebay 站点。我创建了开发者帐户并获得了将产品添加到 ebay 的示例代码。我从[https://www.x.com/developers/eBay/documentation-tools/code-sample/219177](https://www.x.com/developers/eBay/documentation-tools/code-sample/219177)获得了 PHP 示例代码。我在示例代码中添加了沙盒 API 详细信息，当我运行代码时出现此错误：

```
eBay returned the following error(s):

21916250 : Return policy is not specified.
A return policy must be specified. 
```

我是 ebay 集成的新手？如何在 ebay 示例代码中指定退货政策。我正在添加示例代码供您参考：

```
<?php require_once('../get-common/keys.php') ?>
<?php require_once('../get-common/eBaySession.php') ?>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML>
<HEAD>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<TITLE>AddItem</TITLE>
</HEAD>
<BODY>
<FORM action="AddItem.php" method="post">
<TABLE cellpadding="2" border="0">
    <TR>
        <TD>listingType</TD>
        <TD>
          <select name="listingType">
            <option value="Chinese">Chinese</option>
            <option value="Dutch">Dutch</option>
            <option value="FixedPriceItem">Fixed Price Item</option>
            <option value="StoresFixedPrice">Stores Fixed Price</option>
          </select>
        </TD>
    </TR>
    <TR>
        <TD>primaryCategory</TD>
        <TD>
          <select name="primaryCategory">
        <option value="14111">Test Category</option>
            <option value="57889">Boys Athletic Pants</option>
            <option value="57890">Boys Corduroys Pants</option>
            <option value="57891">Boys Jeans Pants</option>
            <option value="57892">Boys Khakis Pants</option>
          </select>
        </TD>
    </TR>
    <TR>
        <TD>itemTitle</TD>
        <TD><INPUT type="text" name="itemTitle" value="TEST IN SANDBOX BEFORE PROD - DO NOT BID" size=30></TD>
    </TR>
    <TR>
        <TD>itemDescription</TD>
        <TD><INPUT type="text" name="itemDescription" value="TEST IN SANDBOX BEFORE PROD - DO NOT BID - This will incur prod listing fees" size=30></TD>
    </TR>
    <TR>
      <TD>listingDuration</TD>
        <TD>
          <select name="listingDuration">
            <option value="Days_1">1 day</option>
            <option value="Days_3">3 days</option>
            <option value="Days_5">5 days</option>
            <option value="Days_7">7 days</option>
          </select>
          (defaults to GTC = 30 days for Store)
        </TD>
    </TR>
    <TR>
        <TD>startPrice</TD>
        <TD><INPUT type="text" name="startPrice" value="<?php echo rand(1,200) / 100 ?>"></TD>
    </TR>
    <TR>
        <TD>buyItNowPrice</TD>
        <TD><INPUT type="text" name="buyItNowPrice" value="<?php echo rand(299,599) / 100; ?>"> (set to 0.0 for Store)</TD>
    </TR>
    <TR>
        <TD>quantity</TD>
        <TD><INPUT type="text" name="quantity" value="1"> (must be 1 for Chinese)</TD>
    </TR>
    <TR>
        <TD colspan="2" align="right"><INPUT type="submit" name="submit" value="AddItem"></TD>
    </TR>
</TABLE>
</FORM>

<?php
    if(isset($_POST['listingType']))
    {
        ini_set('magic_quotes_gpc', false);    // magic quotes will only confuse things like escaping apostrophe
        //Get the item entered
        $listingType     = $_POST['listingType'];
        $primaryCategory = $_POST['primaryCategory'];
        $itemTitle       = $_POST['itemTitle'];
        if(get_magic_quotes_gpc()) {
            // print "stripslashes!!! <br>\n";
            $itemDescription = stripslashes($_POST['itemDescription']);
        } else {
            $itemDescription = $_POST['itemDescription'];
        }
        $itemDescription = $_POST['itemDescription'];
        $listingDuration = $_POST['listingDuration'];
        $startPrice      = $_POST['startPrice'];
        $buyItNowPrice   = $_POST['buyItNowPrice'];
        $quantity        = $_POST['quantity'];

        if ($listingType == 'StoresFixedPrice') {
          $buyItNowPrice = 0.0;   // don't have BuyItNow for SIF
          $listingDuration = 'GTC';
        }

        if ($listingType == 'Dutch') {
          $buyItNowPrice = 0.0;   // don't have BuyItNow for Dutch
        }

        //SiteID must also be set in the Request's XML
        //SiteID = 0  (US) - UK = 3, Canada = 2, Australia = 15, ....
        //SiteID Indicates the eBay site to associate the call with
        $siteID = 0;
        //the call being made:
        $verb = 'AddItem';

        ///Build the request Xml string
        $requestXmlBody  = '<?xml version="1.0" encoding="utf-8" ?>';
        $requestXmlBody .= '<AddItemRequest xmlns="urn:ebay:apis:eBLBaseComponents">';
        $requestXmlBody .= "<RequesterCredentials><eBayAuthToken>$userToken</eBayAuthToken></RequesterCredentials>";
        $requestXmlBody .= '<DetailLevel>ReturnAll</DetailLevel>';
        $requestXmlBody .= '<ErrorLanguage>en_US</ErrorLanguage>';
        $requestXmlBody .= "<Version>$compatabilityLevel</Version>";
        $requestXmlBody .= '<Item>';
        $requestXmlBody .= '<Site>US</Site>';
        $requestXmlBody .= '<PrimaryCategory>';
        $requestXmlBody .= "<CategoryID>$primaryCategory</CategoryID>";
        $requestXmlBody .= '</PrimaryCategory>';
        $requestXmlBody .= "<BuyItNowPrice currencyID=\"USD\">$buyItNowPrice</BuyItNowPrice>";
        $requestXmlBody .= '<Country>US</Country>';
        $requestXmlBody .= '<Currency>USD</Currency>';
        $requestXmlBody .= "<ListingDuration>$listingDuration</ListingDuration>";
        $requestXmlBody .= "<ListingType>$listingType</ListingType>";
        $requestXmlBody .= '<Location><![CDATA[San Jose, CA]]></Location>';
        $requestXmlBody .= '<PaymentMethods>PaymentSeeDescription</PaymentMethods>';
        $requestXmlBody .= "<Quantity>$quantity</Quantity>";
        $requestXmlBody .= '<RegionID>0</RegionID>';
        $requestXmlBody .= "<StartPrice>$startPrice</StartPrice>";
        $requestXmlBody .= '<ShippingTermsInDescription>True</ShippingTermsInDescription>';
        $requestXmlBody .= "<Title><![CDATA[$itemTitle]]></Title>";
        $requestXmlBody .= "<Description><![CDATA[$itemDescription]]></Description>";
        $requestXmlBody .= '</Item>';
        $requestXmlBody .= '</AddItemRequest>';

        //Create a new eBay session with all details pulled in from included keys.php
        $session = new eBaySession($userToken, $devID, $appID, $certID, $serverUrl, $compatabilityLevel, $siteID, $verb);

        //send the request and get response
        $responseXml = $session->sendHttpRequest($requestXmlBody);
        if(stristr($responseXml, 'HTTP 404') || $responseXml == '')
            die('<P>Error sending request');

        //Xml string is parsed and creates a DOM Document object
        $responseDoc = new DomDocument();
        $responseDoc->loadXML($responseXml);

        //get any error nodes
        $errors = $responseDoc->getElementsByTagName('Errors');

        //if there are error nodes
        if($errors->length > 0)
        {
            echo '<P><B>eBay returned the following error(s):</B>';
            //display each error
            //Get error code, ShortMesaage and LongMessage
            $code     = $errors->item(0)->getElementsByTagName('ErrorCode');
            $shortMsg = $errors->item(0)->getElementsByTagName('ShortMessage');
            $longMsg  = $errors->item(0)->getElementsByTagName('LongMessage');
            //Display code and shortmessage
            echo '<P>', $code->item(0)->nodeValue, ' : ', str_replace(">", "&gt;", str_replace("<", "&lt;", $shortMsg->item(0)->nodeValue));
            //if there is a long message (ie ErrorLevel=1), display it
            if(count($longMsg) > 0)
                echo '<BR>', str_replace(">", "&gt;", str_replace("<", "&lt;", $longMsg->item(0)->nodeValue));

        } else { //no errors

            //get results nodes
            $responses = $responseDoc->getElementsByTagName("AddItemResponse");
            foreach ($responses as $response) {
              $acks = $response->getElementsByTagName("Ack");
              $ack   = $acks->item(0)->nodeValue;
              echo "Ack = $ack <BR />\n";   // Success if successful

              $endTimes  = $response->getElementsByTagName("EndTime");
              $endTime   = $endTimes->item(0)->nodeValue;
              echo "endTime = $endTime <BR />\n";

              $itemIDs  = $response->getElementsByTagName("ItemID");
              $itemID   = $itemIDs->item(0)->nodeValue;
              echo "itemID = $itemID <BR />\n";

              $linkBase = "http://cgi.sandbox.ebay.com/ws/eBayISAPI.dll?ViewItem&item=";
              echo "<a href=$linkBase" . $itemID . ">$itemTitle</a> <BR />";

              $feeNodes = $responseDoc->getElementsByTagName('Fee');
              foreach($feeNodes as $feeNode) {
                $feeNames = $feeNode->getElementsByTagName("Name");
                if ($feeNames->item(0)) {
                    $feeName = $feeNames->item(0)->nodeValue;
                    $fees = $feeNode->getElementsByTagName('Fee');  // get Fee amount nested in Fee
                    $fee = $fees->item(0)->nodeValue;
                    if ($fee > 0.0) {
                        if ($feeName == 'ListingFee') {
                          printf("<B>$feeName : %.2f </B><BR>\n", $fee); 
                        } else {
                          printf("$feeName : %.2f <BR>\n", $fee);
                        }      
                    }  // if $fee > 0
                } // if feeName
              } // foreach $feeNode

            } // foreach response

        } // if $errors->length > 0
    }
?>

</BODY>
</HTML> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T08:46:04.377

就像 Ignacio 所说，只需在`ReturnPolicy`标签后添加一个标签`Description`，例如：

```
<ReturnPolicy>
    <ReturnsWithinOption>Days_14</ReturnsWithinOption>
    <ReturnsAcceptedOption>ReturnsAccepted</ReturnsAcceptedOption>
    <Description>ReturnPolicy text</Description>
    <WarrantyDurationOption>Years_2</WarrantyDurationOption>
    <ShippingCostPaidByOption>Seller</ShippingCostPaidByOption>
</ReturnPolicy> 
```

# c# - xml 自动还是 xml 路径？

> ID：14100885
> 
> 赞同：0
> 
> 时间：2012-12-31T11:19:31.847
> 
> 标签：c#, asp.net, sql, xml

执行以下查询

```
SELECT     AssessmentFileGUID as '@FileId',AssessmentFileTypeId as '@FileTypeId',AssessmentFileName
FROM         rat.AssessmentFile where AssessmentId=17 
for xml path('File'),root('Files') 
```

给我以下结果：

```
<Files>
  <File FileId="2A23D836-612F-418E-BDE8-F182C5432A0D" FileTypeId="1">
    <AssessmentFileName>File-123213.pdf</AssessmentFileName>
  </File>
  <File FileId="CDA853B9-C587-4365-BAF5-972F8D217BAC" FileTypeId="2">
    <AssessmentFileName>File-343455.png</AssessmentFileName>
  </File>
</Files> 
```

* * *

但是我需要以下格式：

```
<Files>
  <File FileId="2A23D836-612F-418E-BDE8-F182C5432A0D" FileTypeId="1">File-123213.pdf</File>
  <File FileId="CDA853B9-C587-4365-BAF5-972F8D217BAC" FileTypeId="2">File-343455.png</File>
</Files> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T11:48:17.490

指定应该作为内容的列，[`data()`](http://msdn.microsoft.com/en-us/library/bb510419.aspx)它应该放在正确的位置：

```
declare @T table (
    AssessmentFileGUID uniqueidentifier not null,
    AssessmentFileTypeId int not null,
    AssessmentFileName varchar(max) not null,
    AssessmentId int not null
)
insert into @T(AssessmentFileGUID,AssessmentFileTypeId,AssessmentFileName,
     AssessmentId) values
('2A23D836-612F-418E-BDE8-F182C5432A0D',1,'File-123213.pdf',17),
('CDA853B9-C587-4365-BAF5-972F8D217BAC',2,'File-343455.png',17)

SELECT     AssessmentFileGUID as '@FileId',AssessmentFileTypeId as '@FileTypeId',
     AssessmentFileName as 'data()' //Change here
FROM         @T where AssessmentId=17 
for xml path('File'),root('Files') 
```

结果：

```
<Files>
    <File FileId="2A23D836-612F-418E-BDE8-F182C5432A0D" FileTypeId="1">File-123213.pdf</File>
    <File FileId="CDA853B9-C587-4365-BAF5-972F8D217BAC" FileTypeId="2">File-343455.png</File>
</Files> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T11:37:24.683

不确定，但试试这个

```
SELECT     
    AssessmentFileGUID as '@FileId',
    AssessmentFileTypeId as '@FileTypeId',
    AssessmentFileName as "File/text()"
FROM         
    rat.AssessmentFile 
where 
    AssessmentId = 17 
FOR XML PATH('File'), ROOT('Files') 
```

# jquery - 实例化工具栏后模拟 TinyMCE RTL 按钮单击

> ID：14100886
> 
> 赞同：3
> 
> 时间：2012-12-31T11:19:34.843
> 
> 标签：jquery, css, tinymce, right-to-left

有没有办法通过直接使用插件中创建的相同命令来更改连接到 TinyMCE 工具栏的文本区域的方向性？我的意思是，我想以编程方式运行 RTL 方向性，而无需实际单击工具栏的图标。

在`directionality`插件的源代码中，包含以下代码：

```
 ed.addCommand('mceDirectionRTL', function() {
            setDir("rtl");
        }); 
```

这意味着这`mceDirectionRTL`是一个命令。我可以直接在代码中使用它吗？我试过但它不被识别。

我问的原因是我想在启动 tinyMCE 实例后运行此命令，而不是在 TinyMCE 工具栏的初始化/设置功能期间。我有一堆 texraeas，有些是英语，有些有类`ar`来表示它们是用于阿拉伯语的，即 RTL。

但是当我这样做时： `$('ID of my textarea'_ifr').contents().find('body').attr('dir', 'rtl');`

然后一切都很好，除了`mceExternalToolbar`（整个工具栏！）不仅仅是textarea，变成rtl。所以外部工具栏基本上是不合适的，并且倾向于页面的右侧。但我只希望它连接的文本区域有 RTL 文本，而不是整个工具栏！

所以我想在工具栏实例化之后以某种方式在外部模拟单击工具栏上的 RTL 按钮。这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T11:38:08.397

设置和重绘可能是一个解决方案：

[http://www.tinymce.com/forum/viewtopic.php?id=9735](http://www.tinymce.com/forum/viewtopic.php?id=9735)

```
tinyMCE.settings['directionality'] = 'rtl';
tinyMCE.execCommand( 'mceRemoveControl', false, 'editor );
tinyMCE.execCommand( 'mceAddControl', false, 'editor ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-03T12:07:57.137

如果你“安装”方向性插件，你可以做这样的事情。您还需要对 tinyMCE 的引用。

```
function(directionality){
    var command = directionality == 'ltr' ? 'mceDirectionLTR' : 'mceDirectionRTL'
    for(var i = 0; i++; i<tinyMCE.editors.length;{
    tinyMCE.editors[i].execCommand(command)
    }
} 
```

我的网站上有两个编辑。它似乎为我完成了工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-07T08:39:15.437

无需构建新插件

1.  使用`directionality`插件
2.  然后将 rtl & ltr 按钮添加到`toolbar`

```
 options:{
          selector: '#editor1',
          height: 350,
          language: 'fa_IR',
          plugins: 'directionality',
          toolbar: 'rtl ltr',
      } 
```

[![样本输出](../Images/1b93e9f4656d7dad5e72baba858ba538.png)](https://i.stack.imgur.com/kfw2r.png)

# android - 是否可以让用户在 Android 中完成操作？

> ID：14100887
> 
> 赞同：1
> 
> 时间：2012-12-31T11:19:35.750
> 
> 标签：android, user-activity

我想列出用户使用设备完成的操作（例如：打开应用程序、来电等...）。是否可以获得使用操作列表？

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T11:26:46.393

是的，它可以使用广播接收器...有关更多信息，您应该阅读本教程... [广播接收器教程](http://developer.android.com/reference/android/content/BroadcastReceiver.html)

# objective-c - 点击按钮时将数据传递给方法

> ID：14100890
> 
> 赞同：-1
> 
> 时间：2012-12-31T11:19:45.740
> 
> 标签：objective-c, ios, annotations, uibutton, mapkit

我在我的 iPhone 应用程序中的地图视图页面的注释标记中添加了一个按钮

```
UIButton* rightButton = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
[rightButton addTarget:self
                action:@selector(go_to_detail_page:)    
      forControlEvents:UIControlEventTouchUpInside];
annView.rightCalloutAccessoryView = rightButton; 
```

我的接收功能是

```
-(IBAction)go_to_detail_page:(id)sender;{
} 
```

我的问题如下。我在我的页面上创建了很多标记，我想在按下特定的注释视图按钮时传递一个唯一标识符，即使是一个字符串也可以。`go_to_detail_page`按下注释后，如何将字符串传递给方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T11:30:10.347

使用`rightButton.tag = 1` 并在

```
-(IBAction)go_to_detail_page:(id)sender{
    UIButton *button = (UIButton *)sender;
    if(button.tag==1){//this is the rightButton
         //your logic goes here

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T11:53:49.003

在我看来，你可以有两种选择。

第一个选项是分配给每个按钮 a`tag`然后在其操作中检索它。因此，例如，您将为每个按钮分配一个不同的标签。

```
rightButton.tag = // a tag of integer type 
```

然后你会像这样使用

```
- (void)goToDetailedPage:(id)sender
{
    UIButton *senderButton = (UIButton *)sender;

    int row = senderButton.tag;        
    // do what you want with the tag
} 
```

另一种选择是使用**关联引用**。通过它们，无需子类`UIButton`化，您只需创建一个属性（类型`NSString`）并将其用作标识符。

要使用它们，请查看[Subclass UIButton to add a property](https://stackoverflow.com/questions/5500327/subclass-uibutton-to-add-a-property)。

这是一个相当复杂的概念，但通过它你有很大的灵活性。

*笔记*

您不需要使用 IBAction。取而代之的是 void。IBAction 或 IBOutlet 旨在与 IB（Interface Builder）一起使用。它们只是占位符。在引擎盖下，它们意味着无效。

使用驼峰式表示法。例如，正如我在回答中所写`go_to_detail_page`，使用. 而不是`goToDetailedPage`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T11:39:20.143

您可以将唯一标识符设置为按钮`tag`

```
UIButton* rightButton = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
[rightButton addTarget:self
                action:@selector(go_to_detail_page:)    
      forControlEvents:UIControlEventTouchUpInside];
annView.rightCalloutAccessoryView = rightButton; 
rightButton.tag == any unique number // it would act as unique identifier 
```

并按如下方式检索它

```
- (IBAction)go_to_detail_page:(id)sender;{

    UIButton *button = (UIButton *)sender;
    if(button.tag==unique identifier){
        // this is the rightButton
        // your logic
    }
    else
    {

    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-31T11:31:19.580

嘿，您可以将 UIButton 子类化并将 NSString* 成员标记为每个按钮实例。

# android - Listview 的最后一行与父 Layout 的 Footer 重叠

> ID：14100891
> 
> 赞同：1
> 
> 时间：2012-12-31T11:19:48.587
> 
> 标签：android, listview, scroll, android-edittext

我正在尝试创建一个 UI，`EditText`其中`listview`. 当我添加最后一行的行时，`listview`最后一行停留在 editText 下，用户无法看到它，除非他手动向上拖动列表。我希望这以编程方式发生但无法这样做..到目前为止我已经尝试过了

```
 list_con.post(new Runnable(){
                  public void run() {
                      list_con.setSelection(list_con.getCount());
                  }}); 
```

添加一行后，我尝试以编程方式将其向下滚动。但是与 重叠的最后一行`edittext`仍然存在编辑：

我的布局是：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="#000000"
android:orientation="vertical" >

<LinearLayout
    android:id="@+id/lay1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="#000000"
    android:orientation="horizontal" >

    <ImageView
        android:id="@+id/myimage"
        android:layout_width="30dp"
        android:layout_height="30dp"
        android:contentDescription="@string/desc"
        android:scaleType="centerCrop" 
        android:padding="5dp"/>

    <TextView
        android:id="@+id/header"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginLeft="10dip"
        android:textColor="#fafafa"
        android:textStyle="bold"
        android:textSize="15sp" />
</LinearLayout>

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="390dip"
    android:orientation="vertical" 
    android:layout_below="@+id/lay1"
    android:layout_marginBottom="90dip"
    >

    <ListView
        android:id="@android:id/list"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_above="@+id/footerlayout"
        android:background="#00000A"
        android:stackFromBottom="true" />
<!--          android:transcriptMode="alwaysScroll -->
</LinearLayout>

<LinearLayout
android:id="@+id/footerlayout"
android:layout_width="fill_parent"
android:layout_height="50dp"
android:gravity="center_horizontal"
android:layout_alignParentBottom="true"
android:orientation="horizontal" 
android:weightSum="3">

    <EditText
        android:id="@+id/textbox"

        android:layout_width="wrap_content"
        android:layout_weight="2.5"
        android:background="@drawable/textbox2"
         android:gravity="top|left"
        android:hint="Type to text" 
        android:layout_height="fill_parent"
        android:inputType="textMultiLine"
        android:scrollbars="vertical"
        android:paddingLeft="5dp"
        android:paddingTop="5dp">

        <requestFocus />
    </EditText>

<Button
    android:id="@+id/sendbutton"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:background="@drawable/send2323"
    android:gravity="center" 

    android:text="SEND"
    android:layout_weight="0.5"
    />

 </LinearLayout>

</RelativeLayout> 
```

# youtube-api - YouTube Java API 为除位置之外的所有 userprofileentry (ies) 年龄、性别返回 null

> ID：14100894
> 
> 赞同：0
> 
> 时间：2012-12-31T11:19:54.780
> 
> 标签：youtube-api, user-profile

我尝试重复一些 YouTube java API 请求以收集 userprofileentry (ies) 以获取评论，并注意到年龄和性别现在对除位置之外的所有用户返回 null。抱歉，如果已经回答了这个问题，如果有人可以重定向我，我将不胜感激。

这是我使用 YouTubeService 初始化的代码，使用 devKey 和 ID ans 几个月前工作正常（即使发生了一些更改，例如删除了视频标签）。

```
UserProfileEntry userProfileEntry = YouTubeService.getEntry(new URL("http://gdata.youtube.com/feeds/api/users/" + UserID), UserProfileEntry.class);

System.out.print("  "+userProfileEntry.getAge());
System.out.print("  "+userProfileEntry.getGender());
System.out.print("  "+userProfileEntry.getLocation()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T22:09:28.893

该信息最近已从 YouTube 网络界面的频道页面中删除，然后从数据 API 响应中删除。

# android - 将照片从 android 上传到 picasa？

> ID：14100895
> 
> 赞同：2
> 
> 时间：2012-12-31T11:19:58.730
> 
> 标签：android, google-api, image-uploading, picasa

我是android编程的新手。我正在寻找一种将图片发送到 Picasa 的简单方法，我查看了很多关于它的项目。我只是想发送一个 JPEG 或 PNG 按钮，我单击、发送并显示一条消息，它是好的。我知道这需要 Google API 和客户端身份验证，但很多人都表现出相同的意图发送。请帮忙（对不起英语：P）

我发现了这个： [http ://code.google.com/p/google-api-java-client/source/browse?repo=samples#hg/picasa-android-sample](http://code.google.com/p/google-api-java-client/source/browse?repo=samples#hg/picasa-android-sample)

有人知道怎么用吗？但从基础上看，我迷路了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T12:57:12.787

在线将照片上传到 Picasa 的唯一现有代码就是这个。

*   [Picasa 照片上传器](http://code.google.com/p/picasaphotouploader/source/browse/trunk/src/com/android/picasaphotouploader/ImageUploader.java)

试试这个是否满足您的要求。如果满足，则使用按钮单击事件并在 notification.finished() 事件上显示消息以确保文件已上传。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-03T23:46:19.547

相当老的帖子，但仅供参考，我成功地直接使用http post将我的图片上传到Picasa。他们自己的 Java API 不断返回错误。

我在[这里](https://theneewpotato.wordpress.com/2017/08/02/android-using-picasa-api-to-upload-images/)详细介绍了这种方法：

```
File image = new File("/path/to/image.jpg");
byte[] imageContent = null;
try {
    imageContent = Files.toByteArray(image);
} catch (Exception e) {
    // do something
}

HttpClient httpClient = HttpClientBuilder.create().build();
HttpPost httpPost = new HttpPost("https://picasaweb.google.com/data/feed/api/user/default/albumid/default");
httpPost.addHeader("Authorization",  "Bearer " + mAccessToken);
httpPost.addHeader("Content-Type", "image/jpeg");
httpPost.setEntity(new ByteArrayEntity(imageContent));

try {
    HttpResponse httpResponse = httpClient.execute(httpPost);
    // log the response
    logd(EntityUtils.toString(httpResponse.getEntity()));
} catch (IOException e){
    // do something
} 
```

此方法使用 Apache 的 HttpClient。如果你的 Android 版本不支持它，你仍然可以在 Gradle 文件中包含这一行来编译它：

```
compile 'cz.msebera.android:httpclient:4.4.1.1' 
```

# r - 绘制线而不是点 R

> ID：14100897
> 
> 赞同：5
> 
> 时间：2012-12-31T11:20:09.027
> 
> 标签：r

这可能是一个简单的问题，但我无法找到解决方案。

我有以下情节（我正在使用情节 CI，因为我无法用情节（）填充点）。

```
leg<-c("1","2","3","4","5","6","7","8")
Col.rar1<-c(rgb(1,0,0,0.7), rgb(0,0,1,0.7), rgb(0,1,1,0.7),rgb(0.6,0,0.8,0.7),rgb(1,0.8,0,0.7),rgb(0.4,0.5,0.6,0.7),rgb(0.2,0.3,0.2,0.7),rgb(1,0.3,0,0.7))
library(plotrix)
plotCI(test$size,test$Mean, 
pch=c(21), pt.bg=Col.rar1,xlab="",ylab="", ui=test$Mean,li= test$Mean)
legend(4200,400,legend=leg,pch=c(21),pt.bg=Col.rar1, bty="n", cex=1) 
```

![在此处输入图像描述](../Images/71610acf84977d832c9afed51c04f342.png)

我想创建相同的效果，但用线而不是点（继续线）

有什么建议吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-31T12:16:10.000

您有 2 个解决方案：

1.  使用`lines()`函数在 (x, y) 位置之间画线。
2.  `plot`与`type = "l"`同类行一起使用

如果没有可重现的示例，很难展示它，但您可以这样做：

```
Col.rar1<-c(rgb(1,0,0,0.7), rgb(0,0,1,0.7), rgb(0,1,1,0.7),rgb(0.6,0,0.8,0.7),rgb(1,0.8,0,0.7),rgb(0.4,0.5,0.6,0.7),rgb(0.2,0.3,0.2,0.7),rgb(1,0.3,0,0.7))

x <-  seq(0, 5000, length.out=10)
y <- matrix(sort(rnorm(10*length(Col.rar1))), ncol=length(Col.rar1))
plot(x, y[,1], ylim=range(y), ann=FALSE, axes=T,type="l", col=Col.rar1[1])

lapply(seq_along(Col.rar1),function(i){
  lines(x, y[,i], col=Col.rar1[i])
  points(x, y[,i])  # this is optional
}) 
```

![在此处输入图像描述](../Images/dff7aaecf1d1cf9ba81c39ae6536f457.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-31T11:42:49.233

在生成希望根据某些分组变量连接线的图时，您希望摆脱 base-R 图并检查`lattice`and `ggplot2`。Base-R 图在 xy 图中没有简单的“组”概念。

一个简单的`lattice`例子：

```
library( lattice )
dat <- data.frame( x=rep(1:5, times=4), y=rnorm(20), gp=rep(1:4,each=5) )
xyplot( y ~ x, dat, group=gp, type='b' ) 
```

`test`如果您有一个类似于您定义的颜色矢量的变量，您应该能够使用类似的东西。

# jar - 如何在 Java FX 2 中正确签署 jar？

> ID：14100899
> 
> 赞同：3
> 
> 时间：2012-12-31T11:20:14.950
> 
> 标签：jar, sign

基本上，Oracle 声明自包含应用程序（我想使用）将在沙盒环境中运行，并且除非您签署 jar，否则将无法访问 OS 文件系统、剪贴板等。他们的示例代码是：

```
<fx:signjar keyStore="${basedir}/sample.jks" destdir="dist"
alias="javafx" storePass="****" keyPass="****">
    <fileset dir='dist/*.jar'/>
</fx:signjar> 
```

但这确实只为我认为的主 jar 签名。我在 dist/lib 文件夹中也有一些库，所以我正在使用此代码将它们添加到我的主 jar 中：

```
<fx:resources>
    <fx:fileset dir="dist" includes="lib/*.jar"/>
</fx:resources> 
```

我是否必须将另一个文件集添加到 fx:signjar，以便也对其进行签名，或者仅对主 jar 进行签名就足够了？

问候， 奥勒良

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T20:42:51.653

部署指南不正确。来自 Oracle Java 部署团队的一位工程师：“自包含应用程序与任何独立的 Java 应用程序（例如 java -jar helloworld.jar）相同 - 默认情况下它在没有安全管理器的情况下运行，并且拥有执行任何操作的所有权限，只是像任何其他本机应用程序一样。” [我已在http://javafx-jira.kenai.com/browse/RT-27483](http://javafx-jira.kenai.com/browse/RT-27483)上针对部署指南提交了 Jira 票证，以便您可以跟踪它，并感谢 John Smith 提醒我们注意此错误。我为这花费了您的时间而道歉。Nancy Hildebrandt，Oracle 技术作家

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T16:11:08.363

如果您需要对您的应用程序进行签名，请对您的所有 jar 进行签名，而不仅仅是主 jar。

对于需要在各自沙箱之外运行的浏览器嵌入式或 webstart 类型的部署，您可以只签署一个 jar 而不签署其他 jar，但这会导致最终用户混淆[混合代码警告对话框](http://docs.oracle.com/javase/7/docs/technotes/guides/jweb/mixed_code.html)，因此完全不推荐。

例如，以下文件集将包含所有用于签名的分发 jar：

```
<fileset dir='dist' includes='**/*.jar'/> 
```

无需为自包含应用程序签名即可访问特权资源，因为它们默认情况下不在沙箱中运行。

某些应用程序平台（例如 OS X Gatekeeper）可能会受益于使用[平台特定工具](https://developer.apple.com/library/mac/documentation/ToolsLanguages/Conceptual/OSXWorkflowGuide/DistributingApplicationsOutside/DistributingApplicationsOutside.html)对自包含应用程序进行签名。但此类签名超出了 JavaFX 2.2.3 打包工具的范围。

# php - mysql表设计中的继承

> ID：14100903
> 
> 赞同：0
> 
> 时间：2012-12-31T11:20:38.510
> 
> 标签：php, mysql, sql, inheritance, entity-relationship

我正在学习cakePHP，我可以根据它们在数据库中的对应表关系在具有特殊类属性（如`$hasOne`，`$hasMany`等）的模型类中定义模型关系`$belongsTo`。现在我应该像在 PHP 中那样用 super 定义我的表和它们的关系吗？继承与否的类和子类？

例如，一家公司有客户，有一个客户表，`customers`公司为每个客户提供不同的服务，如网页设计、提供共享主机、销售域名等。这里的服务来自不同的类型，有些领域是相同的比如`customer_id`, `cost`, `activation_date`,`expiration_date`等等，还有一些特定的字段比如`host_space`, `domain_name`, `host_type`, `design_type`, `control_panel`...

我应该为所有服务条目创建一个基表`services`，并为每种服务创建一个表，例如`domains`域服务的特定信息将存储在其中 -`one-to-one`关系 - 还是为每个服务创建一个单独的表，这样就没有`service`表了？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T11:35:39.193

> 现在我是否应该像在 PHP 中那样定义我的表和它们的关系，使用超类和继承的子类？

不，因为您不能在 MySQL 中使用继承。它使用关系数据库范例。继承是面向对象编程中使用的概念。

> 我应该为所有服务条目创建一个基表服务，并为每种服务（如域）创建一个表，并且有关域服务的特定信息将存储在其中 - 一对一的关系

是的，这正是你应该做的。有一个基表，其中包含在所有类型的服务中一致的列，为额外的数据添加额外的表。

如果您发现额外的重复列，您甚至可以将您的服务进一步划分为服务组。

# android - 如何在Android中使用opengl es绘制yuv缓冲区

> ID：14100905
> 
> 赞同：1
> 
> 时间：2012-12-31T11:20:42.537
> 
> 标签：android, opengl-es

我正在使用 android 表面视图来显示图像。我有一个从 ffmpeg 解码的 yuv 帧缓冲区。如何使用 opengl es 将 yuv 转换为 rgb 并显示。是否有任何示例可以在 android 本机代码中将 yuv 转换为 rgb。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T14:30:26.370

你可能想看看下面的论文，它给出了基本的 c++ 代码和我也采用的这种转换的许多改进（除了 SIMD 部分：）。

[http://lestourtereaux.free.fr/papers/data/yuvrgb.pdf](http://lestourtereaux.free.fr/papers/data/yuvrgb.pdf)

此外，根据您使用的 opengl 版本，您可以将此转换放入均匀着色器中。

希望这可以帮助... ：）

# java - 模式更新后 jOOQ 生成的类的运行时验证？

> ID：14100907
> 
> 赞同：3
> 
> 时间：2012-12-31T11:20:45.243
> 
> 标签：java, sql, validation, code-generation, jooq

我`org.jooq.util.DefaultGenerator`在构建过程中使用 生成 jOOQ 类来表示我的数据库模式。

当应用程序运行时，模式预计会在应用程序不知道的情况下发生变化。此类更改可能与已生成的代码兼容，也可能不兼容。

*如何在运行时检测生成的代码对于某个模式是否仍然有效？*

我正在寻找类似的东西`boolean stillValid = new SchemaValidator(existingGeneratedCodePath, jdbcUrl, jdbcProps).validate();`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T14:13:34.643

### 使用 org.jooq.Meta 的 jOOQ 3.0 解决方案

在即将到来的 jOOQ 3.0 中，`DatabaseMetaData`可以通过新[`org.jooq.Meta`](https://github.com/jOOQ/jOOQ/blob/master/jOOQ/src/main/java/org/jooq/Meta.java)对象以“jOOQ 方式”访问 JDBC（通过功能请求[#1968](https://github.com/jOOQ/jOOQ/issues/1968)实现）。该对象提供对这些类型的各种对象的访问：

*   `org.jooq.Catalog`
*   `org.jooq.Schema`
*   `org.jooq.Table`
*   `org.jooq.Field`
*   `org.jooq.DataType`

这些可以与您生成的类进行比较，例如

```
MY_SCHEMA.getTables().equals(create.meta().getTables()) 
```

### 使用 JDBC DatabaseMetaData 的 jOOQ 2.x 解决方案

上述解决方案可以手动实现，查询[`Connection.getMetaData()`](http://docs.oracle.com/javase/7/docs/api/java/sql/Connection.html#getMetaData%28%29). 当然，这将是更多的工作

### 查询所有表的技巧

另一个简单的解决方案是查询所有生成的表，如下所示：

```
List<Table<?>> invalidTables = new ArrayList<>();

for (Table<?> table : MY_SCHEMA.getTables()) {
    try {
        create.selectFrom(table).where(Factory.falseCondition()).fetch();
    }

    // If table names / column names change, the above query would fail
    catch (DataAccessException e) {
        invalidTables.add(table);
    }
} 
```

这个技巧将允许检测增量是否兼容

# ruby - Sinatra session.clear 不工作

> ID：14100909
> 
> 赞同：3
> 
> 时间：2012-12-31T11:21:13.223
> 
> 标签：ruby, sinatra

我正在编写一个简单的登录/退出网络应用程序。以下是相关代码：

```
get '/logout' do
    session.clear
end

get '/self' do
    if session[:user_id]
        user = User.find session[:user_id]
        user.to_json
    else
        status 401
        {"error" => "Not logged in."}.to_json
    end
end 
```

如果我调用`logout`, 然后`self`，它不会返回`"Not logged in".`而是`:user_id`仍然存在并且我返回了用户的详细信息。我究竟做错了什么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T15:15:53.047

这应该工作

```
get '/logout' do
  session[:user_id] = nil
  redirect '/self'
emd 
```

# html - 仅使用 id 启用复选框

> ID：14100913
> 
> 赞同：0
> 
> 时间：2012-12-31T11:21:34.470
> 
> 标签：html, mechanize, python-2.6

我想填写一个 HTML 表单，我正在使用 python 的机械化模块。我的 HTML 代码类似于复选框，下拉菜单是：

```
<div id="post_cd">
<input role="checkbox" id="cd_info" class="cbox" type="checkbox">
<span class="s-iso" style="display:none"></div>

<label for="type" id="cdtype" class="cd" style="width:60px;margin:1px;float:left;text-align:right;">CD type:</label>
<select id='cdtype' class=" ui-iso" style="width:100px;margin:1px;float:left;">
                <option value="CD1">Error1</option>
                <option value="CD2">Error1</option>
                <option value="CD3">Error2</option>
             </select> 
```

我尝试了以下但收到错误：

对于复选框： `form.find_control("cd_info").items[0].selected = True` 对于下拉列表： `form['cdtype']= ['Error1']`

错误：

```
 raise ControlNotFoundError("no control matching "+description)
mechanize._form.ControlNotFoundError: no control matching name 'cd_info'

    raise ControlNotFoundError("no control matching "+description)
mechanize._form.ControlNotFoundError: no control matching name 'cdtype' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T07:09:48.103

您的 HTML 代码中没有`<form>`。因此，可能`form`不是指向您在调用时提供的 HTML 代码`find_control`或订阅运营商周围的元素。

您可以尝试打印表单的文本，以确保您查看的是正确的内容：

```
print form 
```

# php - 在第 n 次出现连字符之前和之后获取文本

> ID：14100917
> 
> 赞同：5
> 
> 时间：2012-12-31T11:22:25.860
> 
> 标签：php

问题：

```
ABC-101-Description-text-1
ABC-2001-Description-text-with-more-text-2
ABC-20001-Some-more-Description-text-with-more-text-3 
```

有人可以帮我在第 n 次出现连字符之前获取所有文本，所以如果我在一个实例中想要 ABC-20001 或者想要 ABC-2001 之后的所有内容。

我知道我需要使用 strstr 或 strpos 但我不确定，希望得到一些帮助......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-31T11:25:32.930

如果您已经知道下面的“n”是一个整数：

```
$parts = explode('-',$string,$n); 
```

让我们来看看这个字符串：

```
$string = "ABC-20001-Some-more-Description-text-with-more-text-3"; 
```

如果您想要第二个连字符之前的内容：

```
$parts = explode('-',$string,$n+1); // n=2,
$parts[0] = 'ABC-20001';
$parts[1] = 'Some-more-Description-text-with-more-text-3'; 
```

这里的第三个例子：http: [//uk1.php.net/manual/en/function.explode.php](http://uk1.php.net/manual/en/function.explode.php)。

# xpath - 如何使用 xpath 在 selenium 中使用 verifyText() 命令？

> ID：14100919
> 
> 赞同：0
> 
> 时间：2012-12-31T11:22:34.453
> 
> 标签：xpath, selenium

我已经关注一个元素的 XPath，并希望在 selenium 中使用 verifyText() 命令提取文本。

完整的 XPATH：**html/body/table[2]/tbody/tr/td[3]/table/tbody/tr[4]/td/table/tbody/tr[2]/td/table/tbody/tr[2 ]/td**

部分 html 如下所示，如何在 selenium 中使用 verifyText() 命令获取文本，即“当您...时会出现加载图标”？

此文本是动态的，可以更改。

```
<table width="730" cellspacing="0" cellpadding="0" border="0" align="center">
 <tbody>
  <tr>
  <tr>
   <td height="30" colspan="2">
   <strong>A Loading icon will appear when you click "Login" button.</strong>
 In case you do not see such icon, it would mean that you are not using a compatible browser
   </td>
  </tr>
  <form id="form1" method="post" autocomplete="off" action="/Login/Password"/>
  <tr>
  <tr>
  <tr>
  <tr>
 </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T12:03:54.293

您可以使用命令 verifyTextPresent 接受与页面文本匹配的模式。

或者如果只有你提到的标签，你可以使用 verifyText("//td","Message to verify")

# php - 将数组插入到相应的 excel 列中

> ID：14100920
> 
> 赞同：0
> 
> 时间：2012-12-31T11:22:35.423
> 
> 标签：php, arrays, rows, multiple-columns, fgetcsv

m 有 3 个数组说：

```
$first_array = array('val11','val21','val31');
$Second_array = array('val12','val22','val32');
$third_array = array('val13','val23','val33'); 
```

是否可以使用 php 的函数将这个数组值存储`fgetcsv()`到每一列中，我的意思是，
first_array 应该存储在第一列中，
第二个数组存储在第二列中，第三到第三个 .. 所以数据应该像

```
val11 val12 val31
val21 val22 val32
val31 val32 val33 
```

无论如何请让我知道。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T11:26:49.960

最简单的方法是将数组从列翻转到行。

假设所有数组都具有相同数量的元素，这应该可以完成工作：

```
$rows = array();

// Converts the arrays of columns into arrays of rows
$length = count($first_array);
for ($i = 0; $i < $length; $i++) {
  $rows[$i] = array($first_array[$i], $second_array[$i], $third_array[$i]);
}

// Writes the rows to the file
$fp = fopen('outfile.csv', 'w');
foreach ($rows as $row) {
  fputcsv($fp, $row);
}
fclose($fp); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T11:59:34.810

检查此代码

```
<?php
    $list = array (
        array('aaa', 'bbb', 'ccc', 'dddd'),
        array('123', '456', '789'),
        array('"aaa"', '"bbb"')
    );
    $fp = fopen('test.csv', 'w');
    foreach ($list as $fields) {
        fputcsv($fp, $fields);
    }
    fclose($fp);
 ?> 
```

# android - 检查/取消选中单选按钮状态

> ID：14100922
> 
> 赞同：2
> 
> 时间：2012-12-31T11:22:40.693
> 
> 标签：android, listview, radio-button, radiobuttonlist, radio-group

我正在开发一个具有自定义列表视图的应用程序。此列表视图包含 1 `CheckBox`、 1`RadioButton`和 1 `TextBox`。我不能使用 Radio Group，因为我只有一个 RadioButton。我很难维持那个唯一单选按钮的状态。我想要的是：

**从列表中的所有条目中，仅选择一行的单选按钮。**

这意味着，如果我从列表中的其他行中选择一个 RadioButton，则应取消选中第一个单选按钮，而必须选中较新的单选按钮，依此类推。

谁能帮帮我。提前致谢...：-）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T11:45:23.177

实际上我不知道 Android 但这是我为 iPhone 应用程序做的事情。希望这也适用于android。

为每个单选按钮设置一个`Tag`（`tag=row`编号）并根据标签编号更改其状态。

# javascript - rails 3 jQuery UI Datepicker只想启用特定日期

> ID：14100927
> 
> 赞同：1
> 
> 时间：2012-12-31T11:23:28.233
> 
> 标签：javascript, ruby-on-rails, ruby-on-rails-3, jquery-ui, ruby-on-rails-3.1

我有一个使用日期选择器的注册模型和表单。我希望用户只能选择与事件相对应的日期（另一个模型）。

我的问题是我找不到将事件数组传递给 javascript 的正确方法。

这是在控制器中：

```
@available_dates = Event.pluck(:start_time).as_json 
```

这是在视图中：

```
 <script>
       var availableDates = [<%= @available_dates.to_s.html_safe %>] ;
    </script> 
```

这是js：

```
function available(date) {
    ymd = date.getFullYear() + "-" + ('0' + (date.getMonth()+1)).slice(-2) + "-" + ('0' + date.getDate()).slice(-2);
    console.log(ymd+' : '+($.inArray(ymd, availableDates)));
    if ($.inArray(ymd, availableDates) != -1) {
        return [true, "","Available"];
    } else {
        return [false,"","unAvailable"];
    }
}
$("#registration_date").datepicker({ beforeShowDay: available, dateFormat: "yy-mm-dd"}); 
```

我认为我在视图中做错了什么，因为 js 数组在控制台中似乎是空的......

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T11:35:33.463

在您提到的问题评论中`@available_dates.to_s`返回`"[\"2013-01-05\", \"2013-02-02\", \"2013-03-02\"]"`。这本身将在页面上呈现数组，因此无需再次“装箱”。

尝试更改以下行：

```
var availableDates = [<%= @available_dates.to_s.html_safe %>] ; 
```

对此：

```
var availableDates = <%= @available_dates.to_s.html_safe %>; 
```

希望能帮助到你。

如果不是，您要么清除`@available_dates`代码中某处的值，要么在`@available_dates`您的视图上下文中不可用。您是否尝试过使用 单步执行代码`debugger;`？

# android - 黑莓安卓原生动态壁纸？

> ID：14100930
> 
> 赞同：2
> 
> 时间：2012-12-31T11:23:56.013
> 
> 标签：android, blackberry-10, blackberry-android

我目前正在考虑将我的一些 Android 动态壁纸移植到黑莓。这可能吗？

我似乎找不到任何有关黑莓设备是否支持 Nartive Android 动态壁纸的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T15:03:53.220

在最初的版本中，RIM 声明不支持动态壁纸，我没有看到任何相反的情况。实际 Android 设备上可用的其他功能（例如 Java Native Interface）也不太可能得到支持。请记住，BlackBerry Android 运行时环境旨在允许 Android Java 应用程序运行。您可能会认为 BlackBerry 运行时提供了一个 Dalvik VM（尽管我认为这在技术上并不准确）。每个 Android 应用程序都在其自己的运行时环境副本中运行。它不像 VMWare、VirtualBox 或 QEMU 那样提供整个 Android 操作系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T14:24:54.297

我不相信它会支持 Android 动态壁纸。每个移植的 Android 应用程序都在与 BB OS 的其余部分隔离的特殊运行时中运行。

在我看来，Android 端口只是 RIM 在没有足够的原生应用程序时选择弥补差距的临时解决方案。

Cascades/QML 是很棒的框架，所以我几乎可以肯定 Android 应用程序将很快被原生应用程序取代。

# python - 写入文件后无法读取文件

> ID：14100937
> 
> 赞同：1
> 
> 时间：2012-12-31T11:24:42.990
> 
> 标签：python

我目前正在阅读“Learn Python the hard way”并已读到第 16 章。
写入文件后我似乎无法打印文件的内容。它只是不打印任何内容。

```
from sys import argv

script, filename = argv print "We are going to erase the contents of %s" % filename print "If you don\'t want that to happen press Ctrl-C" 
print "If you want to continue press enter"

raw_input("?") print "Opening the file..." target = open(filename, "w")

print "Truncating the file..." target.truncate()

print "Now i am going to ask you for 3 lines"

line_1 = raw_input("Line 1: ") 
line_2 = raw_input("Line 2: ") 
line_3 = raw_input("Line 3: ") 

final_write = line_1 + "\n" + line_2 + "\n" + line_3

print "Now I am going to write the lines to %s" % filename

target.write(final_write)

target.close

print "This is what %s look like now" %filename

txt = open(filename)

x = txt.read() # problem happens here 
print x

print "Now closing file"

txt.close 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T11:33:58.783

您不是在调用函数`target.close`，`txt.close`而是只是获取它们的*指针*。由于它们是函数（或方法，更准确地说），您需要`()`在函数名称之后调用它：`file.close()`.

那就是问题所在; 您以写入模式打开文件，这会删除文件的所有内容。您在文件中写入但从不关闭它，因此永远不会提交更改并且文件保持为空。接下来，您以读取模式打开它并简单地读取空文件。

要手动提交更改，请使用`file.flush()`. 或者干脆关闭文件，它会自动刷新。

此外，调用`target.truncate()`是无用的，因为它已经在`write`模式下打开时自动完成，如评论中所述。

**编辑**：评论中也提到， using`with`语句非常强大，您应该使用它。您可以从[http://www.python.org/dev/peps/pep-0343/](http://www.python.org/dev/peps/pep-0343/)阅读更多内容，但基本上当与文件一起使用时，它会打开文件并在您取消缩进后自动关闭它。这样您就不必担心关闭文件，而且当您可以清楚地看到文件正在使用的位置时，它看起来会更好，这要归功于缩进。

快速示例：

```
f = open("test.txt", "r")
s = f.read()
f.close() 
```

`with`通过 using语句可以做得更短更好看：

```
with open("test.txt", "r") as f:
    s = f.read() 
```

# xmpp - 我需要 Strophe 叮当声插件文档或任何教程/示例

> ID：14100938
> 
> 赞同：0
> 
> 时间：2012-12-31T11:24:43.597
> 
> 标签：xmpp, javascript, openfire, strophe, libjingle

我创建了基于浏览器的聊天客户端，它使用 strophe JavaScript lib 连接到 openfire 服务器。现在我需要支持该应用程序中的 VOIP 和视频流功能。

我已经在 strophe 网站上查看了上述功能的特定插件，他们提供了[jingle 插件/扩展](https://github.com/mweibel/strophejs-plugins/tree/jingle/jingle)，但没有任何文档或示例。

我试图按照[XMPP](http://xmpp.org/extensions/xep-0166.html)上提供的规范构建库，但它需要很多时间。

因此，如果有人有任何文档或工作示例，那么它将帮助我开发该功能。或在 strophe 顶部创建的任何其他扩展，提供叮当声支持，这将很有帮助。

提前感谢您的任何建议或指导。

问候， 卡姆莱什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-04T13:46:31.880

我也有类似的情况。我在互联网上搜索过，我找到了 strophe.jingle。我还没有测试过它，但它看起来很简单而且很好。它使用 WebRTC 协议来支持视频和音频。[https://github.com/ESTOS/strophe.jingle](https://github.com/ESTOS/strophe.jingle)

# java - 工作流内容处理

> ID：14100940
> 
> 赞同：3
> 
> 时间：2012-12-31T11:24:50.550
> 
> 标签：java, liferay, liferay-6

我正在使用 Liferay 6.1.1 CE。

通过在 xml 文件 (leaveapproval.xml) 中编写定义并将其加载到服务器，我创建了一个多级 kaleo 工作流程（即具有两个级别的批准）。它工作正常，因为我在博客中测试了这个工作流程。

所以现在，我想在完成二级审批后将工作流的内容提交到 Web 服务。

我如何处理工作流的内容？

可能吗？

```
<?xml version="1.0"?>
<workflow-definition
        xmlns="urn:liferay.com:liferay-workflow_6.1.0"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="urn:liferay.com:liferay-workflow_6.1.0 http://www.liferay.com/dtd/liferay-workflow-definition_6_1_0.xsd">
    <name>LEAVE IN ACTION USER ACTION</name>
    <description>A sample multilevel approver can approve a workflow content.</description>
    <version>1</version>

    <state>
        <name>created</name>
        <metadata>
            <![CDATA[
            {"xy":[36,51]}
            ]]>
        </metadata>
        <initial>true</initial>
        <transitions>
            <transition>
                <name>review</name>
                <target>review</target>
                <default>true</default>
            </transition>
        </transitions>
    </state>

    <task>
        <name>review</name>
        <metadata>
            <![CDATA[
            {"xy":[168,36]}
            ]]>
        </metadata>
        <actions>
            <notification>
                <name>Review Notification</name>
                <template>You have a new submission waiting for review in the workflow.</template>
                <template-language>text</template-language>
                <notification-type>email</notification-type>
                <execution-type>onAssignment</execution-type>
            </notification>
            <notification>
                <name>Review Completion Notification</name>
                <template>
                    Your submission has been reviewed and the reviewer has applied the following ${taskComments}.</template>
                <template-language>freemarker</template-language>
                <notification-type>email</notification-type>
                <recipients>
                    <user />
                </recipients>
                <execution-type>onExit</execution-type>
            </notification>
        </actions>
        <assignments>
            <roles>
                <role>
                    <role-type>regular</role-type>
                    <name>Portal Head</name>
                </role>
                <role>
                    <role-type>regular</role-type>
                    <name>Portal Content Reviewer</name>
                </role>
            </roles>
        </assignments>
        <transitions>
            <transition>
                <name>approve</name>
                <target>recommended</target>
            </transition>
            <transition>
                <name>reject</name>
                <target>update</target>
                <default>false</default>
            </transition>
        </transitions>
     </task>

     <task>
        <name>recommended</name>
        <metadata>
            <![CDATA[{"xy":[168,36]}]]>
        </metadata>
        <actions>
            <notification>
                <name>Review Notification</name>
                <template>You have a new submission waiting for your review in the workflow.</template>
                <template-language>text</template-language>
                <notification-type>email</notification-type>
                <execution-type>onAssignment</execution-type>
            </notification>
            <notification>
                <name>Review Completion Notification</name>
                <template>
                    Your submission has been reviewed and the reviewer has applied the following ${taskComments}.</template>
                <template-language>freemarker</template-language>
                <notification-type>email</notification-type>
                <recipients>
                    <user />
                </recipients>
                <execution-type>onExit</execution-type>
            </notification>
        </actions>
        <assignments>
            <user>
                <user-id>13379</user-id>
            </user>
        </assignments>
        <transitions>
            <transition>
                <name>approve</name>
                <target>approved</target>
            </transition>
            <transition>
                <name>reject</name>
                <target>update</target>
                <default>false</default>
            </transition>
        </transitions>
    </task>

    <task>
        <name>update</name>
        <metadata>
            <![CDATA[
            {"transitions":{"resubmit":{"bendpoints":[[303,140]]}},"xy":[328,199]}
            ]]>
        </metadata>
        <actions>
            <action>
                <name>reject</name>
                <script>
                    <![CDATA[
                    Packages.com.liferay.portal.kernel.workflow.WorkflowStatusManagerUtil.updateStatus(
                        Packages.com.liferay.portal.kernel.workflow.WorkflowConstants.toStatus("denied"),
                        workflowContext);

                    Packages.com.liferay.portal.kernel.workflow.WorkflowStatusManagerUtil.updateStatus(
                        Packages.com.liferay.portal.kernel.workflow.WorkflowConstants.toStatus("pending"),
                        workflowContext);
                    ]]>
                </script>
                <script-language>javascript</script-language>
                <execution-type>onAssignment</execution-type>
            </action>
            <notification>
                <name>Creator Modification Notification</name>
                <template>Your submission was rejected by a reviewer, please modify and resubmit.</template>
                <template-language>text</template-language>
                <notification-type>email</notification-type>
                <execution-type>onAssignment</execution-type>
            </notification>
        </actions>
        <assignments>
            <user />
        </assignments>
        <transitions>
            <transition>
                <name>resubmit</name>
                <target>review</target>
            </transition>
        </transitions>
    </task>

    <state>
        <name>approved</name>
        <metadata>
            <![CDATA[
                {"xy":[380,51]}
            ]]>
        </metadata>
        <actions>
            <action>
                <name>approve</name>
                <script>
                    <![CDATA[Packages.com.liferay.portal.kernel.workflow.WorkflowStatusManagerUtil.updateStatus      (Packages.com.liferay.portal.kernel.workflow.WorkflowConstants.toStatus("approved"), workflowContext);]]>

                </script>
                <script-language>javascript</script-language>
                <execution-type>onEntry</execution-type>
            </action>
        </actions>
    </state>
</workflow-definition> 
```

帮我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-25T20:48:58.663

要在某个工作流程步骤上以编程方式运行任何内容，您通常只需要一个`<script>`标签，就像您正在更新状态一样。

因此，在您的 approved`<state>`中，您可能想要添加另一个`<action>`标签，这个标签来处理 Web 服务调用（并让其他操作保持原样）。

您为脚本使用的语言将取决于您对什么感到满意。我会使用 groovy，因为它可以很好地处理纯 java 代码，这就是我所知道的。

这是它的样子（仅包括最后一个`<state>`标签）：

```
<state>
    <name>approved</name>
    <metadata>
        <![CDATA[
        {"xy":[380,51]}
        ]]> 
    </metadata>
    <actions>
        <action>
            <name>approve</name>
            <script>
                <![CDATA[
                Packages.com.liferay.portal.kernel.workflow.WorkflowStatusManagerUtil.updateStatus(
                    Packages.com.liferay.portal.kernel.workflow.WorkflowConstants.toStatus("approved"),
                    workflowContext);
                ]]>
            </script>
            <script-language>javascript</script-language>
            <execution-type>onEntry</execution-type>
        </action>
        <action>
            <name>submit-web-service</name>
            <script>
                <![CDATA[
                import java.io.*
                import java.net.*

                URL url = new URL(
                    "www.my-web-service.com/api/whatever?theParam=" +
                        ${theRelevantContextVariable});

                URLConnection urlConnection = url.openConnection();

                // if necessary to read response data:
                // BufferedReader bufferedReader = new BufferedReader(
                //    new InputStreamReader(urlConnection.getInputStream()));
                // String something = bufferedReader.readLine();
                // etc.
                ]]>
            </script>
            <script-language>groovy</script-language>
            <execution-type>onEntry</execution-type>
        </action>
    </actions>
</state> 
```

您可能需要一个 POST 请求，在这种情况下，您会以不同的方式实现 Web 服务调用。但在任何情况下，您都会在操作标记中编写 Web 服务代码。像这样的东西应该工作。

# javascript - 如何从 HTML5 画布将图像另存为磁盘

> ID：14100946
> 
> 赞同：2
> 
> 时间：2012-12-31T11:25:33.240
> 
> 标签：javascript, html, html5-canvas

我有一个在画布上绘制的图像。我的页面中有一个另存为 html 输入按钮。当我单击此按钮时，它应该显示一个另存为对话框，我必须将此图像以 jpeg 格式保存在磁盘上。如何使用 javascript 实现此功能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-31T11:32:44.917

使用 base64 URI from[`canvas.toDataURL`](https://developer.mozilla.org/en-US/docs/DOM/HTMLCanvasElement)作为`href`链接，以及`download` [属性](http://davidwalsh.name/download-attribute)。

它应该看起来像：

```
<a href="data:image/png;base64,iVBORw0..." download="my-image">Save Image</a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T11:29:46.243

使用 eligrey polyfill 将图像保存到磁盘。

W3C 文件 API 包括一个 FileSaver 接口，这使得保存生成的数据就像 saveAs(data, filename) 一样简单，但不幸的是它最终会从规范中删除。`a JavaScript library called FileSaver.js`，它在所有现代浏览器中实现了 FileSaver。现在可以在浏览器中生成您想要的任何类型的文件，文档编辑器可以拥有一个不依赖在线连接的即时保存按钮。当与标准的 HTML5 canvas.toBlob() 方法配合使用时，FileSaver.js 可以让您立即保存画布并为其指定文件名，这对于 HTML5 图像编辑 web 应用程序非常有用。

对于尚不支持 canvas.toBlob() 的浏览器，请使用[canvas-toBlob.js。](https://github.com/eligrey/canvas-toBlob.js)

[文章](http://eligrey.com/blog/post/saving-generated-files-on-the-client-side)

[演示](http://eligrey.com/demos/FileSaver.js/)

# c# - ajax 调用会话超时

> ID：14100950
> 
> 赞同：11
> 
> 时间：2012-12-31T11:25:59.187
> 
> 标签：c#, asp.net, ajax, session, session-timeout

我知道这是重复的，但我无法获得可靠的解决方案（对于 asp.net web）。

如果会话过期，我只想重定向到登录页面。我试过以下：

# 1.使用jquery状态码

```
 $.ajax({
     type: "POST",
     url: "stream.asmx/SomeMethod",
     contentType: "application/json; charset=utf-8",
     dataType: "json",
     success: function (msg) {
        //success msg
     },
     error: function (request, status, error) {
        if (status = 403) {
            location.href = 'login.aspx';
        }
     }
    }); 
```

**问题：**这也会为其他错误返回相同的状态代码（403），我只希望会话超时。

# 2.会话是否过期发送json消息

后面的代码：

```
 if (!object.Equals(HttpContext.Current.Session["User"], null))
    {
        Id = int.Parse(HttpContext.Current.Session["User"].ToString());
    }
    else
    {
        result = from row in dtscrab.AsEnumerable()
                 select new
                 {
                     redirectUrl = "login.aspx",
                     isRedirect = true
                 };
    } 
```

关于 $.ajax 成功：

```
 success: function (msg) {
        if (msg.d[0].isRedirect) {
            window.location.href = msg.d[0].redirectUrl;
        }
        else {
            //load containt
        }
     } 
```

**问题：**如果会话过期（它确实返回正确的 json），它会以某种方式不调用 ajax 成功行。如果页面中有很多 ajax 请求（应该全局处理），即使这也不是正确的方法。

但是，我看到这篇文章确实是一个很好的解决方案，但它适用于 mvc 使用`AuthorizeAttribute`：[handling-session-timeout-in-ajax-calls](https://stackoverflow.com/questions/5238854/handling-session-timeout-in-ajax-calls)

**那么，我可以在 asp.net web api 中使用 AuthorizeAttribute 使用 mvc 中使用的相同概念吗？如果没有，我该如何解决我面临的那些问题（上述两个中的任何一个）？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T14:34:16.317

403 状态码将导致 jQuery 调用失败方法。在第二次尝试时保留相同的代码，但将重定向处理程序移动到失败方法而不是成功方法。在成功方法中，像往常一样对待它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-20T10:53:29.980

## 问题：

我的 Razor MVC 应用程序在会话超时时进行 ajax 调用时抛出异常时遇到了同样的问题。

我设法解决此问题的方法是通过使用简单的轻量级操作方法 (RAZOR MVC) 监视每个 ajax 请求，该方法返回一个布尔变量，无论请求是否经过身份验证。请在下面找到代码..

## 布局/母版页/脚本文件：

```
<script>
var AuthenticationUrl = '/Home/GetRequestAuthentication';
var RedirectUrl = '/Account/Logon';

function SetAuthenticationURL(url) {
AuthenticationUrl = url;
}

function RedirectToLoginPage() {
window.location = RedirectUrl; 
}

 $(document).ajaxStart(function () {
 $.ajax({
    url: AuthenticationUrl,
    type: "GET",
    success: function (result) {
        if (result == false) {
            alert("Your Session has expired.Please wait while redirecting you to login page.");
            setTimeout('RedirectToLoginPage()', 1000);
        }
    },
    error: function (data) { debugger; }
}); 
```

})

然后在家庭控制器/服务器端，您需要一种方法来验证请求并返回布尔变量..

```
 public ActionResult GetAuthentication ( )
    {
        return Json(Request.IsAuthenticated, JsonRequestBehavior.AllowGet);
    } 
```

这将验证每个 ajax 请求，如果会话因任何 ajax 请求而过期，它将通过消息提醒用户并将用户重定向到登录页面。

我还建议不要使用标准的 Alert to Alert。使用一些工具提示类型的格式化 div 警报。标准 JS 警报可能会强制用户在重定向之前单击确定。

希望能帮助到你.. ：）

谢谢， 里亚兹

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-07-28T14:51:06.930

最后，我最终追了上去。

```
public class IsAuthorizedAttribute : ActionFilterAttribute
    {
        public override void OnActionExecuting(ActionExecutingContext filterContext)
        {
            if (filterContext.HttpContext.Request.IsAjaxRequest())
            {
                var sessions = filterContext.HttpContext.Session;
                if (sessions["User"] != null)
                {
                    return;
                }
                else
                {
                    filterContext.Result = new JsonResult
                    {
                        Data = new
                        {
                            status = "401"
                        },
                        JsonRequestBehavior = JsonRequestBehavior.AllowGet
                    };

                    //xhr status code 401 to redirect
                    filterContext.HttpContext.Response.StatusCode = 401;

                    return;
                }
            }

            var session = filterContext.HttpContext.Session;
            if (session["User"] != null)
                return;

            //Redirect to login page.
            var redirectTarget = new RouteValueDictionary { { "action", "LogOn" }, { "controller", "Account" } };
            filterContext.Result = new RedirectToRouteResult(redirectTarget);
        }
    } 
```

处理客户端

```
<script type="text/javascript">
    $(document).ajaxComplete(
       function (event, xhr, settings) {
           if (xhr.status == 401) {
               window.location.href = "/Account/LogOn";
           }
    });
</script> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-31T11:30:14.880

您可以设置会话超时过期警告，例如 ....

```
<script type="text/javascript"> 

//get a hold of the timers
var iddleTimeoutWarning = null;
var iddleTimeout = null;

//this function will automatically be called by ASP.NET AJAX when page is loaded and partial postbacks complete
function pageLoad() { 

    //clear out any old timers from previous postbacks
    if (iddleTimeoutWarning != null)
        clearTimeout(iddleTimeoutWarning);
    if (iddleTimeout != null)
        clearTimeout(iddleTimeout);
    //read time from web.config
    var millisecTimeOutWarning = <%= int.Parse(System.Configuration.ConfigurationManager.AppSettings["SessionTimeoutWarning"]) * 60 * 1000 %>;
    var millisecTimeOut = <%= int.Parse(System.Configuration.ConfigurationManager.AppSettings["SessionTimeout"]) * 60 * 1000 %>; 

    //set a timeout to display warning if user has been inactive
    iddleTimeoutWarning = setTimeout("DisplayIddleWarning()", millisecTimeOutWarning);
    iddleTimeout = setTimeout("TimeoutPage()", millisecTimeOut);
} 

function DisplayIddleWarning() {
    alert("Your session is about to expire due to inactivity.");
} 

function TimeoutPage() {
    //refresh page for this sample, we could redirect to another page that has code to clear out session variables
    location.reload();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-11T01:23:09.990

4xx 是 HTTP 错误状态代码，会导致 jquery 执行 onFailure 回调。

此外，当您想要处理有效负载时，请注意使用 3xx 进行重定向。根据我的经验，Internet Explorer 只会在返回 3xx 状态代码时进行重定向（不查看有效负载）。

我会说，抛出 403 并处理这种情况。对于客户端 403 意味着资源访问被禁止。可能有多种原因，我想这没关系。

# ruby-on-rails - 在 Rails 中使用两个数据库？

> ID：14100951
> 
> 赞同：1
> 
> 时间：2012-12-31T11:26:03.570
> 
> 标签：ruby-on-rails, postgresql, mongodb

是否可以在 Rails 应用程序中使用 2 种类型的数据库？

我正在使用 2 个数据库 - **Postgres**存储可能变化不大的数据，而**MongoDB** 存储动态变化的数据。

这是有效的方法吗？是否可以在这两个数据库之间连接并在单个 Rails 应用程序中运行？

请纠正，如果我错了。

问候， 巴兰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T11:51:06.430

是的，这是可能的，这是我的旧代码中的一个示例（但这里我们对两个数据库都使用了 mysql，但我认为你可以得到一个想法）

在 database.yml 文件中定义两个数据库

```
development: &defaults
  adapter: mysql
  encoding: utf8
  database: DB1
  enable_call: true
  username: 
  password: 
  host: 

portal_development: &defaults
  adapter: mysql
  encoding: utf8
  database: DB2
  enable_call: true
  username: 
  password: 
  host: 
```

在您的模型中必须将模型与上述数据库相结合

portal_base.rb

```
class PortalBase < ActiveRecord::Base
  self.abstract_class = true
  establish_connection "portal_#{Rails.env}"

  def self.table_name_prefix
    "DB1."
  end
end 
```

default_base.rb

```
class DefaultBase < ActiveRecord::Base

  self.abstract_class = true

  establish_connection "#{Rails.env}"

  def self.table_name_prefix
    "DB2."
  end

end 
```

并相应地推导出您的模型

```
class Client < PortalBase
  #code
end 
```

希望你现在有一个想法:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T12:23:58.133

**找到解决方案：**

我们可以使用`mongoid`gem 来实现这一点。

**安装步骤**

1）通过添加`"gem mongoid"`Gemfile并运行`bundle`命令来安装mongoid

2）通过输入生成mongoid配置，这将在文件附近`"rails g mongoid:config"`创建一个配置文件，您可以在此文件中将配置添加到Mongo服务器。`mongoid.yml``database.yml`

**注意：**添加 Mongoid 后，所有创建的模型都会默认为 MongoDB 创建，您可以指定`--orm`选项为 Postgres 生成模型。

# javascript - 获取当前目录中的文件夹/文件列表

> ID：14100953
> 
> 赞同：1
> 
> 时间：2012-12-31T11:26:18.763
> 
> 标签：javascript, html

在其主目录的 html 页面上显示文件夹/文件名称的最佳方式是什么。这个 html 文件在客户端机器上，只需要在本地和从它自己的主目录访问。正如我尝试使用`var fso = new ActiveXObject("Scripting.FileSystemObject");`的，但它只能在 中访问，`IE`而我无法在`firefox/chrome`.

请让我知道我们是否可以访问我想在 html 页面上显示的文件/文件夹列表。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-31T14:18:06.003

我将在浏览器中重复@Arum Killu 的话“实际上 js 无法访问本地文件系统”。恕我直言，您正朝着死胡同方向前进。如果您想要一个本地离线独立系统，您可以尝试本地 http 服务器或使用本地存储。或者，您可以将页面放在本地并制作一个索引页面或框架，以显示带有链接的结构。

# android - 在相对布局中显示按钮

> ID：14100957
> 
> 赞同：1
> 
> 时间：2012-12-31T11:26:47.657
> 
> 标签：android, button, android-relativelayout

我在使用相对布局向我的应用程序添加按钮时遇到问题。当我使用图形布局工具时，它会在我拖放按钮时显示，但是当我在模拟器上编译和运行 apk 时，只有原始的“短信”按钮在那里。新按钮应该在“短信”按钮的左侧

![在此处输入图像描述](../Images/97e43625a4941aa77dcc7dd51b0d6798.png)

这是xml文件中的代码

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="#FF000000" >

   <EditText
       android:id="@+id/edit_message_input"
       android:layout_width="match_parent"
       android:layout_height="100dp"
       android:hint="@string/edit_message_input"
       android:inputType="textMultiLine"
       android:background="#ff000000"
       android:textColor="#CCCCCC"

        />

    <Button
        android:id="@+id/button2"
        android:layout_width="150dp"
        android:layout_height="40dp"
        android:layout_alignParentRight="true"
        android:layout_centerVertical="true"
        android:layout_marginRight="36dp"
        android:text="@string/translate_to_english"
        android:onClick="sendToEnglish"
        android:background="#CCCCCC"

         />

   <Button
        android:id="@+id/button1"
        android:layout_width="150dp"
        android:layout_height="40dp"
        android:layout_alignParentLeft="true"
        android:layout_centerVertical="true"
        android:text="@string/translate_to_text"
        android:onClick="sendToText"
        android:background="#CCCCCC" />

   <EditText
       android:id="@+id/editText1"
       android:layout_width="wrap_content"
       android:layout_height="100dp"
       android:layout_above="@+id/button3"
       android:layout_alignParentLeft="true"
       android:layout_alignParentRight="true"
       android:layout_marginBottom="31dp"
       android:ems="10"
       android:hint="@string/edit_message_output"
       android:inputType="textMultiLine"
       android:background="#ff000000"
       android:textColor="#CCCCCC" />

   <Button
       android:id="@+id/button3"
       android:layout_width="150dp"
       android:layout_height="40dp"
       android:layout_alignParentBottom="true"
       android:layout_alignRight="@+id/button2"
       android:layout_marginRight="22dp"
       android:background="#CCCCCC"
       android:onClick="sendSMS"
       android:text="@string/send_as_sms" />

<!-- test save button -->

   <Button
       android:id="@+id/save_word_button"
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"
       android:layout_alignParentBottom="true"
       android:layout_alignParentLeft="true"
       android:background="#cccccc"
       android:text="@string/save_word" />

</RelativeLayout> 
```

非常感谢任何帮助或指示！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T11:30:19.987

不要假设你在 XML 布局中设计的东西在每台设备上都看起来不错，因为市场上有各种各样的 android 设备。

如果要支持多个屏幕，请不要采用固定的高度/宽度布局。

```
 android:layout_width="150dp"
 android:layout_height="40dp" 
```

相反，您可以提及“wrap_content”或“fill_parent”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T11:58:39.537

老实说，我建议您阅读 android 开发者文档并花一些时间阅读有关设计界面的建议。

两个特别有用的部分是：

[http://developer.android.com/design/style/metrics-grids.html](http://developer.android.com/design/style/metrics-grids.html)

和

[http://developer.android.com/guide/topics/ui/layout/relative.html](http://developer.android.com/guide/topics/ui/layout/relative.html)

[http://developer.android.com/reference/android/widget/RelativeLayout.LayoutParams.html](http://developer.android.com/reference/android/widget/RelativeLayout.LayoutParams.html)

您的 xml 中有许多固定尺寸和冲突的对齐属性，这似乎导致了一些问题。

# php - preg_match 连续匹配三个数字的子字符串？

> ID：14100965
> 
> 赞同：-1
> 
> 时间：2012-12-31T11:28:00.287
> 
> 标签：php, regex, string, preg-match, expression

我有一个`$text_arr="101104105106109111112113114116117120122123124"` 相当大的字符串

如果我想从它们中拆分三个数字并将它们`101,104,105`存储在 .`$array`我该怎么办？

我试过这样做：

```
preg_match_all('/[0-9]{3}$/',"$text_arr",$array); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-31T11:30:53.840

最简单的方法是使用[`preg_split()`^(*Docs*)](http://php.net/preg_split)：

```
$result = preg_split('/(\d{3})/', $str, -1, PREG_SPLIT_DELIM_CAPTURE | PREG_SPLIT_NO_EMPTY); 
```

[看到它工作](http://codepad.viper-7.com/6RpTsD)，或结果：

```
Array
(
    [0] => 101
    [1] => 104
    [2] => 105
    [3] => 106
    [4] => 109
    [5] => 111
    [6] => 112
    [7] => 113
    [8] => 114
    [9] => 116
    [10] => 117
    [11] => 120
    [12] => 122
    [13] => 123
    [14] => 124
) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T11:54:48.503

尽管您*可以*为此使用正则表达式，但使用简单的标准函数*可能*会更高效：

```
$groups = str_split($numbers, 3);//returns array you want 
```

[在这里阅读所有相关信息](http://uk3.php.net/str_split)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-31T11:38:17.480

**您必须从表达式中删除带有 $ 的结尾**，这导致只返回一个结果

试试这样

```
preg_match_all('/[0-9]{3}/', $text_arr, $array); 
```

[在这里](http://codepad.viper-7.com/CjCdnl)检查这个工作

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-31T11:39:37.407

选择这个最简单的代码

```
<?php
    $string = "101104105106109111112113114116117120122123124";
    $parts = str_split($string, 3);
    $res=implode(',',$parts);
    echo($res);
?> 
```

# sql - 如何在 SQL 中对重叠数据进行分组

> ID：14100966
> 
> 赞同：1
> 
> 时间：2012-12-31T11:28:03.540
> 
> 标签：sql, vertica

我有以下时尚的数据

```
Prog_Id Low_latency Max_Latency
一个 1 4
一个 -1 5
一个 3 8
一个 11 12
一个 12 15

```

现在我希望看到输出为

```
Prog_Id Low_latency Max_Latency
一个 -1 8
一个 11 15

```

基本上我希望合并重叠数据。谁能帮我写代码。如果有 OVERLAPS 子句的解决方案，我可以在延迟的地方管理时间。

谢谢里沙布

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T11:45:22.633

我最初的答案并不总是有效。现在看起来是这样的：

```
select distinct *
from (
   select
     t1.Prog_ID,
     min(least(l, Low_latency)),
     max(greatest(g, Max_Latency))
   from yourtable t1 inner join (select
                                   t1.Prog_ID,
                                   least(t1.Low_latency, t2.Low_latency) l,
                                   greatest(t1.Max_Latency, t2.Max_Latency) g
                                 from
                                   yourtable t1 inner join yourtable t2
                                   on t1.Prog_ID=t2.Prog_ID
                                      and t1.Low_latency<=t2.Max_Latency
                                      and t1.Max_Latency>=t2.Low_Latency) t2
     on t1.Prog_ID=t2.Prog_ID
        and t1.Low_latency<=t2.g
        and t1.Max_Latency>=t2.l
   group by t1.Low_latency, t1.Max_latency) s 
```

请看[这里](http://sqlfiddle.com/#!2/2f1b6/11)。它是 MySql 代码，但可以转换为其他 DBMS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T11:41:02.283

这取决于您使用的数据库服务器 (DBMS)。但是没有简单的解决方案。有可能使用[存储过程](http://en.wikipedia.org/wiki/Stored_procedure)。但我更喜欢用编程语言（你使用哪种语言？）

在用其他人的查询进行了一些测试后，我发现在 SQL 中没有办法。

这是在java中映射reduce的类似东西

```
public class YourData {
    Double Low_latency;
    Dobule Max_Latency;
    int Prog_Id;

    // add getter and setter here

    public boolean tesetOverlapping(YourData data) {
        if ((this.Low_latency<=data.Low_latency && data.Low_latency<=t1.Max_Latency) ¦¦ (this.Low_latency<=data.Max_Latency && data.Max_Latency<=this.Max_Latency)) {
                this.Low_latency = Math.min(this.Low_latency, data.Low_latency);
                this.Max_Latency = Math.min(this.Max_Latency, data.Max_Latency);

                return true
        }

        return false;
    }
}

String sql = "
  SELECT
    t1.Prog_Id,
    t1.Low_latency,
    t1.Max_Latency
  FROM yourtable t1"

ArrayList<ArrayList<Double>> values = new ArrayList<ArrayList<Double>>();

while (row = get sql rows) {

    int progIndex = values.indexOf(row.Prog_Id);

    if (progIndex == -1) {
        progIndex = values.indexOf(row.Prog_Id);

        values.add(progIndex, new ArrayList<Double>());
    }

    values[progIndex].add(new YourData(row));
}  

boolean foundOverlapping = false;
for (int progIndex = 0; progIndex < values.size(); progIndex++) {
    // Do map reduce for each progIndex
    do {
        foundOverlapping = false;
        for (int i = 0; i < values[progIndex].size(); i++) {
            if (!values[progIndex].contains(i)) {
                continue;
            }

            YourData cur = values[progIndex][i];

            for (int x = 0; x < values[progIndex].size(); x++) {
                if (i != x && values[progIndex].contains(x)) {
                    if (cur.tesetOverlapping(values[progIndex][x])) {
                        foundOverlapping = true;
                        values[progIndex].remove(x);
                    }
                }
            }
        }

    } while (foundOverlapping == true);
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-31T11:35:27.123

假设您想以`-infinity...9`, `10...19`,`20...29`模式分组以降低延迟，您将需要类似

```
SELECT
  Prog_Id,
  MIN(Low_latency) AS Low_latency,
  MAX(Max_Latency) AS Max_Latency
FROM
  your_table_name
GROUP BY
  Prog_Id,
  IF(FLOOR(Low_latency/10)<0,0,FLOOR(Low_latency/10)) 
```

显然最后一行将取决于所使用的 RDBMS，但在大多数情况下应该非常相似。

您可能还想添加一个`ORDER BY`子句。

# javascript - 仅使用手指最小化和最大化地 图 - Android

> ID：14100970
> 
> 赞同：0
> 
> 时间：2012-12-31T11:28:20.297
> 
> 标签：javascript, android, html, google-maps

我有一个用 Html5 构建并用 PhoneGap 包装的应用程序。

在我的应用程序中，我使用谷歌的地图地图，

在智能手机中，我无法仅使用手指最小化和最大化地​​图，

是否有一个设置应该允许这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T08:11:04.713

在更**高级**的智能手机版本上，

只用手指变焦**有效**！

然后在旧版本中我添加了**缩放按钮**。

# android - 从标签中获取图标并将其加载到图像按钮？

> ID：14100977
> 
> 赞同：2
> 
> 时间：2012-12-31T11:29:25.933
> 
> 标签：android, spinner, imagebutton

我有一个微调器和一个图像按钮。微调器加载了我从包管理器获得的标签。当用户选择新标签时，图像按钮应更新其可绘制对象。

到目前为止，这是我的代码：

```
 @Override
public void onItemSelected(AdapterView<?> parent, View view, int position, long arg3) {

    Spinner spinner = (Spinner) findViewById(R.id.spinner); 
    spinner.setOnItemSelectedListener(this);
    PackageManager pm = getPackageManager();
    Drawable icon = (Drawable) (parent.getItemAtPosition(position));
    ImageButton image = (ImageButton) findViewById(R.id.appIcon);
    image.setImageDrawable(icon.loadIcon(pm));

} 
```

在“loadIcon”有错误信息：

**对于 Drawable 类型，方法 loadIcon(PackageManager) 未定义**

任何提示或想法如何让这个工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T11:47:36.987

像这样重新编码。它会工作

```
Spinner spinner = (Spinner) findViewById(R.id.spinner); 
spinner.setOnItemSelectedListener(this);
PackageManager pm = getPackageManager();
Drawable icon = (Drawable) (parent.getItemAtPosition(position));
ImageButton image = (ImageButton) findViewById(R.id.appIcon);
image.setBackgroundDrawable(icon); 
```

# apache - 如何限制对我的 apache 服务器的访问仅限于服务器范围内的局域网客户端？

> ID：14100978
> 
> 赞同：0
> 
> 时间：2012-12-31T11:29:26.210
> 
> 标签：apache

我正在寻找的指令如下：

```
Order deny,allow
Deny from all
Allow from 192.168.*.* 
```

但是，我不知道把它放在哪里，这样它会影响所有网站。

**编辑**：查看 Alvaro 的链接，它似乎`<Directory />`只会被覆盖，并且在尝试过之后`<Directory />`也不会`<Directory ~ ".*">`阻止覆盖`Order`.

有没有办法将这个指定为更高的优先级？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T11:34:40.857

从[手册](http://httpd.apache.org/docs/2.2/en/mod/mod_authz_host.html#allow)：

> Allow 指令
>   *描述：*控制哪些主机可以访问服务器的某个区域
>   *语法：* Allow from all|host|env=[!]env-variable [host|env=[!]env-variable] ...
>   **上下文：目录，. htaccess**
>   *覆盖：* 限制
>   *状态*：基本
>   *模块：* mod_authz_host

所以你没有太多的选择。有关详细信息，请参阅[`<Directory>`](http://httpd.apache.org/docs/2.2/en/mod/core.html#directory)。

# php - jQuery 和 PHP - 彗星

> ID：14100979
> 
> 赞同：0
> 
> 时间：2012-12-31T11:29:28.380
> 
> 标签：php, jquery, ajax, comet, long-polling

我在谷歌上搜索了很多。`Comet`在所有具有with`PHP`和的示例中`jQuery`。他们在：

```
setTimeout(function(){ check_new_data_function() }, 5000); 

function check_new_data_function(){
    $.ajax{
    blah
    }
} 
```

是的，使用 Comet 非常简单，每 5 秒检查一次。但这根本不能称为“彗星”，彗星的目的不就是不循环我们的请求吗？而是获取从服务器***推送的数据？***

[请参阅此示例。](http://www.zeitoun.net/articles/comet_and_php/start) 或者[另一个剪辑。](http://www.screenr.com/SNH) 他们都有一个函数，可以`$.ajax`通过循环从另一个文件中获取数据。但他们真的`Long Polling/Comet`吗？

据我所知，当我们不想将服务器置于`$.ajax`循环的许多请求下时，我们会使用 Comet，在 Comet 中，数据将从服务器推送到客户端浏览器，我错了吗？

有人可以让我清楚这个想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T11:33:53.570

[**我可以**](http://caniuse.com/#search=web%20sockets)在*Web Sockets 上使用 - 工作草案*：

* * *

> 部分支持是指使用旧版本协议的 websockets 实现和/或默认禁用的实现（由于旧协议的安全问题）。微软目前正在试验这项技术。

![在此处输入图像描述](../Images/44eff426c274ac3bc66a58ddcc784cc3.png)

[http://i.imgur.com/20X5z.png](https://i.imgur.com/20X5z.png)

技术还没有。如果您想更好地了解 HTTP 和 REST 规范的*含义*，请观看此[来自 SymfonyLive 的视频](http://www.youtube.com/watch?v=NEWTPFzt2-E)。这很有趣，而且显然 Twitter 搞砸了。

 *另见：

[http://en.wikipedia.org/wiki/Comparison_of_WebSocket_implementations](http://en.wikipedia.org/wiki/Comparison_of_WebSocket_implementations)*

# android - 让我们的 Android 应用程序作为预装应用程序工作

> ID：14100985
> 
> 赞同：3
> 
> 时间：2012-12-31T11:29:58.133
> 
> 标签：android

我想将自己的应用程序作为预装的 android 应用程序。

为了实现这一点，我尝试将我的应用程序 apk 推送到`/system/app`文件夹中，但无法做到。首先，我使用命令安装了文件夹`r/w`的权限，但我也无法做到。有没有人有想法。`/system/app``adb shell`

如何解决这个问题？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T21:08:41.353

> **首先，您必须根您的手机才能做到这一点！**

现在您正在尝试将您的应用程序打包为系统应用程序。classes.dex 文件从系统应用程序中提取并保存为优化的 ODEX 文件。所以在设置之前，你应该将APK文件转换为DEX到ODEX，然后放到系统文件夹中。

> 您可以在此处获取有关 ODEX/DEX 的更多信息[。](http://www.alliance-rom.com/community/wiki/odex-and-deodex/)

您可以通过在设备上获得 root 访问权限后将它们添加到 system/app 文件夹来直接安装 apk。ODEX 文件将是开发系统应用程序的最佳选择。**三星、HTC 和更多公司**使用它来交付他们定制的预安装应用程序。

# dalvik - DalvikVM如何处理切换和尝试smali代码

> ID：14100992
> 
> 赞同：8
> 
> 时间：2012-12-31T11:30:24.877
> 
> 标签：dalvik, smali

我正在尝试学习 smali，但我有一些问题无法通过谷歌搜索找到。

1）我创建了一个简单的测试用例来更好地解释自己

```
const-string v1, "Start"
:try_start_0
const-string v1, "Try Block"
invoke-static {v1}, Lcom/example/test/Main;->print(Ljava/lang/String;)V
:try_end_0
.catchall {:try_start_0 .. :try_end_0} :catchall_0 
```

.catch 语句：这两个参数是指从该标签获取该标签并捕获它（两个标签之间的代码）还是意味着从 :try_start_0 开始执行 try 直到它到达 :try_end_0 （允许 goto 跳转执行不在两个标签内的代码）？

尝试的标签是否始终采用 try_start_%d 格式，或者它们可以是任何标签吗？

2）另一种情况

```
packed-switch v0, :pswitch_data_0

const-string v1, "Default Case"

invoke-static {v1}, Lcom/example/test/Main;->print(Ljava/lang/String;)V

:goto_0

const-string v1, "The End"

invoke-static {v1}, Lcom/example/test/Main;->print(Ljava/lang/String;)V

return-void

:pswitch_0
const-string v1, "Case 1"

invoke-static {v1}, Lcom/example/test/Main;->print(Ljava/lang/String;)V

goto :goto_0

:pswitch_data_0
.packed-switch 0x1
:pswitch_0
.end packed-switch 
```

switch 语句：是否要求 switch 语句位于 switch 数据和 switch 调用之间？又是固定标签的命名还是为了方便起见？

3）如果标签可以不同，baksmali 会生成带有不同标签的 smali 代码吗？

4）反编译dex时不总是显示的可选行是什么？

我知道 .parameter 和 .line 是可选的，但哪些可能不存在？

先感谢您。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-31T17:57:18.920

1)

前两个标签（示例中的 try_start_0 和 try_end_0）定义了 try 块所涵盖的代码范围。如果在覆盖的代码中发生异常，则执行立即跳转到第三个标签（catchall_0）。标签的名称并不重要，它可以是任何有效的标识符。

还有 .catch 指令，with 是一样的，只是它只处理特定类型的异常（类似于 java 的 catch 语句）。

一段代码可以被多个catch语句覆盖，最多1个catch all语句。.catch 语句的位置并不重要，但是，覆盖相同代码的 catch 语句的相对顺序是 import。例如，如果您有

```
.catch Ljava/lang/Exception; {:try_start_0 .. :try_end_0} :handler1
.catch Ljava/lang/RuntimeException; {:try_start_0 .. :try_end_0} :handler2 
```

永远不会使用第二个 catch 语句。如果在涵盖的代码中抛出 RuntimeException，则始终使用第一个 catch，因为 RuntimeException 是一个异常。

但是，如果它们的顺序相反，它将像您期望的那样工作 - RuntimeException 处理程序用于 RuntimeExceptions，而 Exception 处理程序用于任何其他类型的异常。

最后，与 java 不同，.catch 语句中的代码范围不需要严格嵌套。例如，拥有类似的东西是完全合法的

```
:a
const-string v1, "Start"
:b
const-string v1, "Try Block"
:c
invoke-static {v1}, Lcom/example/test/Main;->print(Ljava/lang/String;)V
:d
.catch Ljava/lang/RuntimeException; {:a .. :c} :d
.catch Ljava/lang/Exception; {:b .. :d} :d 
```

你也可以有一些非常奇怪的结构，像这样。

```
.method public static main([Ljava/lang/String;)V
    .registers 3

    :second_handler
    :first_try_start
        new-instance v0, Ljava/lang/RuntimeException;
        invoke-direct {v0}, Ljava/lang/RuntimeException;-><init>()V
        throw v0
    :first_try_end
    .catch Ljava/lang/Exception; {:first_try_start .. :first_try_end} :first_handler
    :first_handler
    :second_try_start
        new-instance v0, Ljava/lang/RuntimeException;
        invoke-direct {v0}, Ljava/lang/RuntimeException;-><init>()V
        throw v0
    :second_try_end
    .catch Ljava/lang/Exception; {:second_try_start .. :second_try_end} :second_handler
.end method 
```

上述示例都不会从编译的 java 代码生成，但字节码本身允许这样做。

2) switch 语句可以是与 switch 语句或 switch 数据相关的任何位置。这里的标签名称也是任意的。

3) Baksmali 可以通过以下两种方式之一生成标签。默认方式是使用标签的通用“类型”，并附加标签的字节码地址。如果您指定 -s/--sequential-labels 选项，而不是使用字节码地址，它会为每个标签类型保留一个计数器，并在每次生成该类型的标签时递增它。

4）通常是调试信息的一部分。.parameter, .line, .prologue, .epilogue, .source, .local, .restart local, .end local... 我认为这涵盖了它。

# ruby - ElasticSearch / Ruby - 返回日期直方图格式？

> ID：14100996
> 
> 赞同：3
> 
> 时间：2012-12-31T11:30:32.483
> 
> 标签：ruby, elasticsearch, tire

我有一个 ElasticSearch 模型（由轮胎坚持，没有 ActiveRecord）。如果我查询它，我会得到一些带有某些方面的结果（如预期的那样）。

```
The format is: 

class Mention
  include Tire::Model::Persistence
  index_name 'mentions'

  # basic display attributes
  property :created_at, :type => 'date'
end 
```

查询返回结果很好。当我检查返回的日期时，我得到一个字符串。

```
1.9.2p320 :046 > a.results[0].created_at
 => "2012-12-26T02:55:50+01:00" 
1.9.2p320 :047 > a.results[0].created_at.class
 => String 
1.9.2p320 :048 > a.results[1].created_at
 => "2012-12-26T02:55:50+01:00" 
1.9.2p320 :049 > a.results[2].created_at
 => "2012-12-26T02:56:33+01:00" 
1.9.2p320 :050 > a.results[2].created_at.class
 => String 
```

我有一个返回 date_histogram 的简单方面，只是为了按天检索与查询匹配的结果量。格式如下：

```
 facet 'volumes' do 
    date :created_at
  end 
```

不幸的是，这似乎返回了一个疯狂的 Unix 时间戳。

```
1.9.2p320 :069 > d = a.helper.facets["volumes"]["entries"][0]["time"].to_s
 => "1356307200000" 
1.9.2p320 :070 > d.class
 => String 
1.9.2p320 :071 > Date.strptime(d, "%s")
 => Sun, 31 Aug 44949 
1.9.2p320 :072 > 
```

我一定是做错了什么。我是吗？如果是这样，是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-31T14:21:18.700

Tire 不操纵方面响应，因此它返回 Elasticsearch 返回的原始值。

对于facet，时间戳以自纪元以​​来的*毫秒*`date_histogram`数返回。另一方面，Ruby[从 epoch 开始使用](http://www.ruby-doc.org/core-1.9.3/Time.html#method-i-to_i)[*秒数*](http://www.ruby-doc.org/core-1.9.3/Time.html#method-i-to_i)。*[](http://www.ruby-doc.org/core-1.9.3/Time.html#method-i-to_i)*

 **您可以做的最简单的事情是简单地除以 1000：

```
>> d = a.helper.facets["volumes"]["entries"][0]["time"].to_i
=> 1356307200000
>> Time.at(d/1000)
=> 2012-12-24 01:00:00 +0100 
```

可以说，*轮胎*可以/应该在这里为您进行转换。**

# php - Zend Db 结果转义和 html url 编码

> ID：14100997
> 
> 赞同：0
> 
> 时间：2012-12-31T11:30:40.797
> 
> 标签：php, zend-framework, zend-db

当我使用 Zend DB（PDO Mysql 适配器）时，我得到的结果不仅是转义的，而且是 HTML url 编码的。

我按原样将行插入数据库，而不是转义或 html 编码。我很想知道：

*   如何获取未转义和 html 编码的结果，
*   如果我应该在插入之前做一些事情来处理数据，
*   如果无法取回未转义和 html url 编码的结果，如何自己做。

我想知道以转义和 html 编码的形式检索结果是否实际上是正确的处理方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T12:40:02.007

实际上，我想您只是想知道为什么要对字符串进行编码。

AFAIK ZF 不会按照您的描述行事。所以“错误”必须在您的数据处理中的某个地方。

> *附加说明：*为了在将来改进您的问题，我会更直接地提出问题并提供一些代码，您实际上在做什么，否则您的问题很容易让人猜测。举一个具体的例子，它通常效果最好。

# gmail - How to retrieve gmail filters list via "Google Apps Email Settings API"?

> ID：14100998
> 
> 赞同：2
> 
> 时间：2012-12-31T11:30:44.930
> 
> 标签：gmail, google-api, google-email-settings-api

I'd like to retrieve all mail filters list of a given google account and eventually delete some of them.

I've found only the API for adding filters, but not the ones for listing and deleting. I think it's strange but I am not able to find that APIs,

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T13:25:35.880

You are correct. There is no API call to export / retrieve Gmail filters. You can only create filters via the Email Settings API. The user can export their filters from the UI though:

[http://gmailblog.blogspot.com/2009/03/new-in-labs-filter-importexport.html](http://gmailblog.blogspot.com/2009/03/new-in-labs-filter-importexport.html)