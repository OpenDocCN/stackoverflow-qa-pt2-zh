# StackOverflow 问答 13100000-13100999

# sql - 如何在我的 sql 查询结果中创建一个临时序列列？

> ID：13100000
> 
> 赞同：2
> 
> 时间：2012-10-27T12:01:35.120
> 
> 标签：sql, oracle

我有一张看起来像这样的桌子。

```
NAME    AGE
james   22
ames    12
messi   32
....
.... 
```

我可以使用查询此表`Select name, age from emp;`

现在我想要的是在 name 之前有一个额外的列，如果查询返回 n 行，它将是 1,2,3..N。

```
SEQUENCE    NAME    AGE
1    james  22
2    ames   12
3    messi  32
4    ....
    .... 
```

我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T12:24:30.383

如果您只想在显示时添加一个包含序列号的列（实际上并不将该数据存储在表中），您可以使用`ROWNUM`伪列或`row_number()`分析函数。

```
select row_number() over(order by name) seq
     , name
     , age
  from your_table

      SEQ NAME               AGE
---------- ----------- ----------
         1 ames                12
         2 james               22
         3 messi               32 
```

上述查询的输出按顺序排序，`NAME`但您可以按任何列或您想要的列组合排序。

第二种方法是使用`rownum`伪列。`name` 结果也被排序

```
 select rownum seq
      , name
      , age
   from ( select name
               , age
           from your_table
          order by name
         )

       SEQ NAME               AGE
---------- ----------- ----------
         1 ames                12
         2 james               22
         3 messi               32 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T12:03:53.700

你可以试试

```
Select ROWNUM sequence, name , age from emp; 
```

对于查询返回的每一行，ROWNUM 伪列返回一个数字，指示 Oracle 从表或连接行集中选择行的顺序。选择的第一行的 ROWNUM 为 1，第二行为 2，依此类推。

# c# - 工具条崩溃

> ID：13100011
> 
> 赞同：1
> 
> 时间：2012-10-27T12:02:56.277
> 
> 标签：c#, .net, winforms, crash

我收到用户说我的应用程序崩溃了，他在事件查看器中看到了这个：

```
Framework Version: v4.0.30319    
Description: The process was terminated due to an unhandled exception.
    Exception Info: System.AccessViolationException
    Stack:
       at System.Drawing.SafeNativeMethods+Gdip.GdipDrawRectangleI(System.Runtime.InteropServices.HandleRef, System.Runtime.InteropServices.HandleRef, Int32, Int32, Int32, Int32)
       at System.Drawing.Graphics.DrawRectangle(System.Drawing.Pen, Int32, Int32, Int32, Int32)
       at System.Windows.Forms.ToolStripTextBox+ToolStripTextBoxControl.WmNCPaint(System.Windows.Forms.Message ByRef)
       at System.Windows.Forms.ToolStripTextBox+ToolStripTextBoxControl.WndProc(System.Windows.Forms.Message ByRef)
       at System.Windows.Forms.Control+ControlNativeWindow.OnMessage(System.Windows.Forms.Message ByRef)
       at System.Windows.Forms.Control+ControlNativeWindow.WndProc(System.Windows.Forms.Message ByRef)
       at System.Windows.Forms.NativeWindow.Callback(IntPtr, Int32, IntPtr, IntPtr)
       at System.Windows.Forms.UnsafeNativeMethods.CallWindowProc(IntPtr, IntPtr, Int32, IntPtr, IntPtr)
       at System.Windows.Forms.NativeWindow.DefWndProc(System.Windows.Forms.Message ByRef)
       at System.Windows.Forms.Form.DefWndProc(System.Windows.Forms.Message ByRef)
       at System.Windows.Forms.Control.WndProc(System.Windows.Forms.Message ByRef)
       at System.Windows.Forms.ScrollableControl.WndProc(System.Windows.Forms.Message ByRef)
       at System.Windows.Forms.Form.WndProc(System.Windows.Forms.Message ByRef)
       at DeskandArchive.MainWindow.WndProc(System.Windows.Forms.Message ByRef)
       at System.Windows.Forms.Control+ControlNativeWindow.OnMessage(System.Windows.Forms.Message ByRef)
       at System.Windows.Forms.Control+ControlNativeWindow.WndProc(System.Windows.Forms.Message ByRef)
       at System.Windows.Forms.NativeWindow.Callback(IntPtr, Int32, IntPtr, IntPtr)
       at System.Windows.Forms.UnsafeNativeMethods.PeekMessage(MSG ByRef, System.Runtime.InteropServices.HandleRef, Int32, Int32, Int32)
       at System.Windows.Forms.Application+ComponentManager.System.Windows.Forms.UnsafeNativeMethods.IMsoComponentManager.FPushMessageLoop(IntPtr, Int32, Int32)
       at System.Windows.Forms.Application+ThreadContext.RunMessageLoopInner(Int32, System.Windows.Forms.ApplicationContext)
       at System.Windows.Forms.Application+ThreadContext.RunMessageLoop(Int32, System.Windows.Forms.ApplicationContext)
       at System.Windows.Forms.Application.Run(System.Windows.Forms.Form)
       at A.cc1462b28845fccfe3634174d36bc619a.ce1b648a1c328cbefe2529fb98bf21b8c() 
```

据我通过互联网搜索，并且我可以从中读到，还包括这样一个事实，即如果我的代码崩溃它应该显示对话框以报告用户没有看到的错误，我得出的结论是这是一个错误.NET 框架绘制工具条。

我说得对吗？有什么方法可以解决这个问题吗？我已经阅读了重新安装 .NET 框架的建议，但大多数人报告说它没有帮助？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-27T13:00:20.197

崩溃的不是 ToolStrip，而是 GDI+。GDI+ 是一大块在 .NET 出现之前就已经存在的非托管代码，System.Drawing 是带有包装类的命名空间。与此堆栈跟踪中使用的 Graphics 类一样。

让 GDI+ 崩溃是非常罕见的，.NET 包装类非常擅长防止错误的参数传递给 GDI+ 的函数。获得这样的 AccessViolation 需要破坏 GDI+ 使用的堆。堆被非托管代码中的指针错误损坏。这可能是您的代码，值得注意的是您正在覆盖 WndProc()。但更典型的是，它是一些将自身注入您的流程的应用程序。要么是故意的，比如病毒扫描程序，要么是意外地像使用 OpenFileDialog 时加载的 shell 扩展处理程序。这样的扩展也可以使用 GDI+，这很常见，或者只是有一个错误的指针，可以在任何地方喷洒垃圾。

您永远不会从托管堆栈跟踪中发现，损坏早在 GDI+ 崩溃之前就已完成。这使得诊断堆损坏错误变得异常困难，这也是 Java 和 .NET 成为非常流行的平台的重要原因。当您无法完全复制用户的运行时环境时，这将变得不可能。像这样的错误几乎总是以“无复制”的方式关闭，就像您将它提交给 Microsoft 时仅使用堆栈跟踪作为证据一样。追求重现场景取决于您，但请注意您将很难处理它。告诉用户最好的办法是使用另一台机器，或者通过卸载不必要的或有风险的程序让她的机器再次稳定。特别是外壳扩展。

# c - 在 c 中使用 fscanf 读取整数失败

> ID：13100014
> 
> 赞同：2
> 
> 时间：2012-10-27T12:03:16.090
> 
> 标签：c, scanf

```
FILE *fin = fopen("figura.in", "r");
if(fscanf(fin, "%d %d %d %d", &int[0], &int[1], &int[2], &int[3]) == 1)     {
        printf("%d\t%d\t%d\t%d\n", int[0], int[1], int[2], int[3]);
    } else {
        printf("failed to read integer.\n");
    } 
```

我无法读取整数。该文件没问题，它包含 4 个整数。怎么了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-27T12:04:12.937

您应该检查是否`fscanf`返回 4，即格式字符串中的输入数：

```
if(fscanf(fin, "%d %d %d %d", &arr[0], &arr[1], &arr[2], &arr[3]) == 4) 
```

从[手册页](http://linux.die.net/man/3/scanf)：

> 返回成功匹配和分配的输入项的数量，可以少于提供的数量，或者在早期匹配失败的情况下甚至为零。

# .htaccess - 重复内容 - 使用 htaccess 的 Joomla 网站的 301 重定向部分

> ID：13100016
> 
> 赞同：0
> 
> 时间：2012-10-27T12:03:22.840
> 
> 标签：.htaccess

我有一个带有论坛的网站，我正在尝试清理重复的内容问题。

我想要做的是 301 将任何带有 mywebsite.com/recent-topics/category-title/post-title.html 的 URL 重定向到 mywebsite.com/forum/category-title/post-title.html。

这是一个 Joomla 网站，并且一个 htaccess 文件已经在使用中。我已将此字符串添加到 htaccess 文件的末尾，但它不起作用：

```
RewriteRule ^/recent-topics/(.*) /forum [R=301,L] 
```

完整的 htaccess 文件：

```
RewriteEngine On

RewriteCond %{QUERY_STRING} base64_encode.*\(.*\) [OR]
RewriteCond %{QUERY_STRING} (\<|%3C).*script.*(\>|%3E) [NC,OR]
RewriteCond %{QUERY_STRING} GLOBALS(=|\[|\%[0-9A-Z]{0,2}) [OR]
RewriteCond %{QUERY_STRING} _REQUEST(=|\[|\%[0-9A-Z]{0,2})
RewriteRule ^(.*)$ index.php [F,L]

##
# Uncomment following line if your webserver's URL
# is not directly related to physical file paths.
# Update Your Joomla! Directory (just / for root).
##

#RewriteBase /

## Begin - Joomla! core SEF Section.
#
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !^/index.php
RewriteCond %{REQUEST_URI} (/component/) [OR]
RewriteCond %{REQUEST_URI} (/|\.php|\.html|\.htm|\.feed|\.pdf|\.raw|/[^.]*)$  [NC]
RewriteRule (.*) index.php
RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization},L]
#
## End - Joomla! core SEF Section.

RewriteRule ^/recent-topics/(.*) /forum [R=301,L] 
```

任何人都可以就我做错了什么提供任何建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T14:01:24.393

您需要在`RewriteEngine On`. 重定向需要在任何类型的路由发生*之前发生。*Joomla 规则执行路由，因此您的重定向规则`/forum`永远不会被应用。

# mysql - 存储 1TB 数据的数据库软件

> ID：13100018
> 
> 赞同：0
> 
> 时间：2012-10-27T12:03:26.837
> 
> 标签：mysql, sqlite, database

我正在寻找可以存储 1TB+ 数据的数据库软件。
一行的平均大小将是 5KB。
在过去的一个月里，我一直在做这方面的功课，我已经入围了两个软件：

1.  SQLite
2.  MySQL MyISAM

本质上，数据库不应该使用太多额外的数据来存储行，它应该符合 ACID。
我也对任何其他数据库软件建议持开放态度。
我计划使用的应用程序将只有一个并发连接。

SQLite 很好并且满足要求，除了当您删除 ROW 时，它不会从文件中删除数据并保留释放的资源，直到数据被新数据覆盖。需要使用 VACUUM 来清理免费资源，这可能需要相当多的时间和资源。SQLite 在存储数据方面也非常有效。它不会向内容添加太多数据。SQLite 也不允许分离 INDEX 文件，以便可以将其放在 SSD 上以便更快地查找。

MySQL MyISAM 很好，它在存储数据和不添加内容方面也非常有效。但是 MyISAM 不符合 ACID 标准，在断电等情况下可能导致数据丢失。另一方面，INNODB 存储数据效率不高，与 MyISAM 相比，它添加到存储每一行​​的附加数据相当高。

那么是否有任何免费数据库软件可以克服这些限制，或者这是我拥有的最佳选择？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T12:11:22.637

你应该问问自己你将如何使用这些数据。1TB 很大，但可以管理，但问题是如何存储这些数据。它是单个表还是关系结构？是否有任何结构，或者您是否从像 MongoDB 这样的数据库中受益更多，它本质上可以让您存储对象。

读取次数与写入次数，这些是更重要的数字。

我认为现在您过于关注开销大小。几个额外的 GB 不会花费您，但是因为您做出错误的选择而迁移到不同的数据库会。

# java - 为什么我不能添加两个字节并获得一个 int，而我可以添加两个最终字节获得一个字节？

> ID：13100019
> 
> 赞同：32
> 
> 时间：2012-10-27T12:03:30.070
> 
> 标签：java, int, variable-assignment, scjp, ocpjp

```
public class Java{
    public static void main(String[] args){
        final byte x = 1;
        final byte y = 2;
        byte z = x + y;//ok
        System.out.println(z);

        byte a = 1;
        byte b = 2;
        byte c = a + b; //Compiler error
        System.out.println(c);
    }
} 
```

如果涉及任何 int 大小或更小的表达式的结果始终是 int，即使两个字节的总和适合一个字节。

**当我们添加两个适合一个字节的最终字节时，为什么会发生这种情况？** 没有编译器错误。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-10-27T12:06:58.177

[来自 JLS 5.2 赋值转换](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.2)

> 此外，**如果表达式是 byte、short、char 或 int 类型的常量表达式（第 15.28 节）**： - 如果变量的类型是 byte、short 或 char，并且值常量表达式的类型可以表示为变量的类型。

简而言之，表达式的值（在编译时是已知的，因为它是一个常量表达式）可以用字节变量的类型来表示。

考虑你的表情

```
 final byte x = 1;
 final byte y = 2;
 byte z = x + y;//This is constant expression and value is known at compile time 
```

因此，当求和适合字节时，它不会引发编译错误。

现在如果你这样做

```
final byte x = 100;
final byte y = 100;
byte z = x + y;// Compilation error it no longer fits in byte 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-27T12:05:32.387

```
byte z = x + y;  // x and y are declared final 
```

在这里，因为`x`和`y`被声明`final`，所以表达式的值`RHS`在编译时是已知的，它是固定的`(1 + 2 = 3)`，不能改变。所以，你不需要明确地进行类型转换

```
byte c = a + b;   // a and b are not declared final 
```

然而，在这种情况下，`a`和`b`的价值并未被宣布为最终的。因此，表达式的值在编译时是未知的，而是在运行时进行评估。因此，您需要进行显式转换。

* * *

但是，即使在第 1 段代码中，如果 的值`a + b`超出范围`-128 to 127`，它也将无法编译。

```
final byte b = 121;
final byte a = 120;
byte x = a + b;  // This won't compile, as `241` is outside the range of `byte`

final byte b1 = 12;
final byte a1 = 12;
byte x1 = a1 + b1;  // Will Compile. byte can accommodate `24` 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-08-19T18:54:47.267

每当我们在两个变量 a 和 b 之间执行任何算术运算时，结果总是，

```
max(int, type of a, type of b)

byte a=10;
byte b=20;
byte c=a+b(C.E ) 
```

*解释*：如上所述 max(int, type of a, type of b)

最大（整数，字节，字节）

结果是类型： int ，找到的是 int 但需要以字节为单位

所以我们需要要求类型转换为字节

```
 byte a=10;
    byte b=20;
    byte c=(byte) (a+b); 
```

# django - 动态添加到模型的 Meta 类？

> ID：13100023
> 
> 赞同：0
> 
> 时间：2012-10-27T12:03:53.110
> 
> 标签：django, django-models

通常，您通过放入模型类来为模型指定一个表名：

```
class MyModel(models.Model):
    class Meta:
        db_table = 'desired_tablename' 
```

我想在models.py的末尾动态添加我所有模型的表名。这可以在 Django 中完成吗？如果是，如何？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-27T12:22:45.867

是的，这可以像这样简单地完成：

```
MyModel._meta.db_table = 'desired_tablename' 
```

# r - 在 R 中，使用“plot(region)”时如何包含标题？

> ID：13100027
> 
> 赞同：0
> 
> 时间：2012-10-27T12:04:40.987
> 
> 标签：r, mapping

R 的“绘图（区域）”命令没有打印出任何标题——我该如何纠正这个问题？“main”命令在下面的任何“plot”行中都不起作用。

```
library(OpenStreetMap)
library(rJava)
library(rgdal)
library(UScensus2000)

data(louisiana.tract)
m65 = na.omit(louisiana.tract@data$age.65.up)
a65 = cut(m65,breaks=c(min(m65),500,750,1000,3500))  
levels(a65) = c("0-500","501-750","751-1000",">1000")

la <- spTransform(louisiana.tract,osm())
lat <- c(30.4, 29.5)
lon <- c(-90.7, -89.5)
region <- openmap(c(lat[1],lon[1]),c(lat[2],lon[2]),zoom=10,'osm')
windows()
plot(region, main = "New Orleans area: \n residents 65 and over by ZIP")
plot(la,add=TRUE,col=c("light cyan","light blue", "cyan" ,"dodgerblue"))
  legend(locator(1), cex=.8, levels(a65), fill=c("light cyan","light blue", "cyan" ,"dodgerblue") ) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-27T18:56:51.807

如果绘图例程缺少“主”参数，您可以简单地放置一个“主”标题：

```
title( main = "New Orleans area: \n residents 65 and over by ZIP") 
```

# android - 通过街道名称在地图上显示位置的咨询

> ID：13100028
> 
> 赞同：0
> 
> 时间：2012-10-27T12:04:48.573
> 
> 标签：android

我如何使用 android 和 java 按街道名称在地图上显示位置？

例如：我将输入我的程序 street,city - 然后我会在地图上找到位置

我有这个样本：

```
Intent i = new
        Intent(android.content.Intent.ACTION_VIEW,
        Uri.parse("geo:31.06221,33.781642"));
        startActivity(i); 
```

如何更改此代码以插入街道和城市？我试试这个：

就像是：`Uri.parse("geo:empire state building"));`

但它不起作用）：

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T14:53:21.933

`Geocoder`对类使用反向地理编码

获取帝国大厦坐标的示例：

```
Geocoder geoCoder = new Geocoder(this, Locale.getDefault());    
        try {
            List<Address> addresses = geoCoder.getFromLocationName(
                "empire state building", 5);
            String add = "";
            if (addresses.size() > 0) {
                String coords = "geo:" + String.valueOf(addresses.get(0).getLatitude()) + "," + String.valueOf(addresses.get(0).getLongitude());
                Intent i = new
                      Intent(android.content.Intent.ACTION_VIEW,
                             Uri.parse(coords));
                startActivity(i);
            }  
    } catch (IOException e) {

            e.printStackTrace();
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-31T20:35:48.923

地理编码器很棒，感谢 llya。

此查询应在单独的线程中执行，例如 AsyncTask，这是一个示例代码，希望对您有所帮助。

```
public class AsyncTaskToQueryLocation extends
    AsyncTask<String, Integer, LatLng> {

private WeakReference<Context> m_Context;
private WeakReference<UserLocationManager> m_Manager;
private WeakReference<OnGeoLocationQueryListener> m_Listener;
private Locale m_Locale;
private String m_ParsedLocation;

public AsyncTaskToQueryLocation(Context context,
        UserLocationManager manager, OnGeoLocationQueryListener listener,
        Locale locale) {

    m_Context = new WeakReference<Context>(context);
    m_Manager = new WeakReference<UserLocationManager>(manager);
    m_Listener = new WeakReference<OnGeoLocationQueryListener>(listener);
    m_Locale = locale;
    m_ParsedLocation = null;
}

@Override
protected LatLng doInBackground(String... params) {

    Context context = m_Context.get();
    if (context == null) {
        return null;
    }

    if ((params == null) || (params.length == 0) || (params[0] == null)) {
        return null;
    }

    m_ParsedLocation = params[0];
    Geocoder geoCoder = new Geocoder(context, m_Locale);
    try {
        List<Address> addresses = geoCoder.getFromLocationName(
                m_ParsedLocation, 1);

        if (addresses.size() > 0) {
            return new LatLng(addresses.get(0).getLatitude(), addresses
                    .get(0).getLongitude());
        }
    } catch (IOException e) {

        e.printStackTrace();
    }

    return null;
}

@Override
protected void onPostExecute(LatLng latLng) {

    OnGeoLocationQueryListener listener = m_Listener.get();
    if (listener != null) {
        listener.onGeoLocationQueryFinished(m_ParsedLocation, latLng);
    }

    onCancelled();
}

@Override
protected void onCancelled() {

    UserLocationManager manager = m_Manager.get();
    if (manager != null) {
        manager.notifyAsyncTaskFinish(AsyncTaskToQueryLocation.class
                .getSimpleName());
    }

    clearReference();
}

private void clearReference() {

    // release the weak reference.
    m_Listener.clear();
    m_Manager.clear();
    m_Context.clear();
} 
```

}

# objective-c - NSTask 数据按换行符分割 \n

> ID：13100029
> 
> 赞同：0
> 
> 时间：2012-10-27T12:04:56.153
> 
> 标签：objective-c, event-handling, nstask

我是 Objective-C 的新手，所以如果我遗漏了什么，请原谅我。但我们都必须从某个地方开始:)

我有一个从另一个开源项目获得的代码片段，它执行一个命令并将结果传递给另一个方法。我需要做的是听取打印到标准输出的每一行新行并对每一行做一些事情。

我正在使用的代码片段如下：

```
 NSMutableArray *args  = [NSMutableArray array];

    NSString *input = [details valueForKey:@"input"];

    for (NSString *i in [input componentsSeparatedByCharactersInSet:[NSCharacterSet whitespaceCharacterSet]]) {
        [args addObject:i];
    }

    NSTask *scriptTask = [NSTask new];
    NSPipe *outputPipe = [NSPipe pipe];

    if ([_NSFileManager() isExecutableFileAtPath:scriptPath] == NO) {
        NSArray *chmodArguments = @[@"+x", scriptPath];

        NSTask *chmod = [NSTask launchedTaskWithLaunchPath:@"/bin/chmod" arguments:chmodArguments];

        [chmod waitUntilExit];
    }

    [scriptTask setStandardOutput:outputPipe];
    [scriptTask setLaunchPath:scriptPath];
    [scriptTask setArguments:args];

    NSFileHandle *filehandle = [outputPipe fileHandleForReading];

    [scriptTask launch];
    [scriptTask waitUntilExit];

    NSData *outputData = [filehandle readDataToEndOfFile];

    NSString *outputString  = [NSString stringWithData:outputData encoding:NSUTF8StringEncoding];

    if (NSObjectIsNotEmpty(outputString)) {
        [self.world.iomt inputText:outputString command:IRCPrivateCommandIndex("privmsg")];
    } 
```

因此，与其等待过程完成然后对结果做一些事情，我需要等待命令打印到标准输出的每一行新行。

我的背景主要是 web 开发，所以我想如果你使用 Node.js 和事件发射器，我的目标会类似于以下内容：

```
task = new Task("ls");

task.addListener("newline", function(data) {
    somethingElse("sendmsg", data);
});

task.run(); 
```

希望您了解我要实现的目标。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T12:39:30.783

您可以做的是向 NSFileHandle 添加一个观察者，以便在它读取某些内容时通知您。

例子：

```
[fileHandler readInBackgroundAndNotify];
//Need to set NSTask output pipes
[self.task setStandardOutput: outputPipe];
[self.task setStandardError: outputPipe];

[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(readFromTask:) name:NSFileHandleReadCompletionNotification object:fileHandler];

-(void)readFromTask:(NSNotification *)aNotifcation;
    {
        NSData *data = [[aNotifcation userInfo] objectForKey: NSFileHandleNotificationDataItem];
        if (data != 0) {
            NSString *text = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];

                // Do something with the text

            [text release];
            [[aNotifcation object] readInBackgroundAndNotify];  
        }
    } 
```

然后，您可以将通知添加到任务中以指示其何时完成，以便您进行清理。

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(taskEnded:) name:NSTaskDidTerminateNotification object:task];

- (void)taskEnded:(NSNotification *) aNotifcation
{
    NSData *data = [[aNotifcation userInfo] objectForKey: NSFileHandleNotificationDataItem];
    if (data != 0) {
        NSString *text = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];

    [text release];

}

[self.task release]; 
```

}

因此，从您的代码中，您可以删除：

```
 [scriptTask waitUntilExit]; 
```

并将数据处理移动到通知中。

```
NSData *outputData = [filehandle readDataToEndOfFile];

NSString *outputString  = [NSString stringWithData:outputData encoding:NSUTF8StringEncoding];

if (NSObjectIsNotEmpty(outputString)) {
    [self.world.iomt inputText:outputString command:IRCPrivateCommandIndex("privmsg")];
} 
```

这是一个粗略的想法，有一个很好的帖子

> [http://www.cocoabuilder.com/archive/cocoa/306145-nstask-oddity-with-getting-stdout.html](http://www.cocoabuilder.com/archive/cocoa/306145-nstask-oddity-with-getting-stdout.html)

# iphone - 如何在您的应用程序运行期间出现广告

> ID：13100035
> 
> 赞同：-1
> 
> 时间：2012-10-27T12:05:22.390
> 
> 标签：iphone, ios, iad

我希望在您的应用程序运行之间出现广告。在 iAd 中，广告在顶部或您放置 iAd 横幅的位置运行。有时，用户可能不会按下广告。但是，我希望我的应用程序有一个广告，这样人们别无选择，只能点击它。意思是说广告出现在应用程序运行和用户必须单击以取消它之间。这样，他就使用了广告。这种类型的应用程序的一个例子是 Touch 4。我对制作这种类型的应用程序很感兴趣。

需要一些关于如何开始的指导。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T13:16:53.100

看一下这个。它只适用于 iPad。（在 iPhone 上做同样的事情是违反规则的）

[http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/iAd_Guide/Full-ScreenAdvertisements/Full-ScreenAdvertisements.html#//apple_ref/doc/uid/TP40009881-CH5-SW1](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/iAd_Guide/Full-ScreenAdvertisements/Full-ScreenAdvertisements.html#//apple_ref/doc/uid/TP40009881-CH5-SW1)

# android - 片段内的自定义视图 - 如何保存状态？

> ID：13100037
> 
> 赞同：2
> 
> 时间：2012-10-27T12:05:31.890
> 
> 标签：android

我有一个自定义视图，它在使用 setRetainInstance(true); 的片段内绘制音量波；

我需要在用户旋转屏幕时保持paint对象处于活动状态，所以我认为paint对象必须在onSaveInstanceState中保存和恢复，在onRestoreInstanceState中恢复。

现在，我知道如何在包中保存任何可打包的对象，但我不知道如何传递 Paint 对象。

我该如何解决我的问题？

# android - 如何使用 POST 方法在 google-api-java-client 中上传文件？

> ID：13100040
> 
> 赞同：0
> 
> 时间：2012-10-27T12:05:59.160
> 
> 标签：android, google-api-java-client

google-api-java-client 是 Android 上一个很好的 web 服务 api 客户端，但是我的意思是一个问题并且在它上面花费了很多时间。

我想通过POST方法上传文件，所以我研究了google-drive API源代码，但它使用媒体上传器将文件上传到google drive。

那么如何通过 google-api-java-client 中的 POST 方法上传文件？

例如 Imgur 上传 API 方法有两个 require 参数。

假设像这样用 google-api-java-client 编写的上传文件 API，但我不知道应该如何填写标记为 ??? 的“图像”字段

```
public class ImgurImage extends GenericJson {
  @com.google.api.client.util.Key("key")
  private String mKey;

  @com.google.api.client.util.Key("image")
  private ??? mImage
}

public class Upload extends JsonHttpRequest {
  private static final String REST_PATH = "/2/upload.json"

  private Upload(ImgurImage content) {
    super(ImgurClient.this, HttpMethod.POST, REST_PATH, content);
  }

  public void execute() throws IOException {
    executeUnparsed();
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T13:48:30.883

我建议在[http://samples.google-api-java-client.googlecode.com/hg/drive-cmdline-sample/instructions.html上查看我们的 Drive API 示例](http://samples.google-api-java-client.googlecode.com/hg/drive-cmdline-sample/instructions.html)

这是一个代码片段：

```
 private static final java.io.File UPLOAD_FILE = new java.io.File(UPLOAD_FILE_PATH);

  /** Uploads a file using either resumable or direct media upload. */
  private static File uploadFile(boolean useDirectUpload) throws IOException {
    File fileMetadata = new File();
    fileMetadata.setTitle(UPLOAD_FILE.getName());
    InputStreamContent mediaContent = new InputStreamContent("image/jpeg", new BufferedInputStream(
        new FileInputStream(UPLOAD_FILE)));
    mediaContent.setLength(UPLOAD_FILE.length());
    Drive.Files.Insert insert = drive.files().insert(fileMetadata, mediaContent);
    MediaHttpUploader uploader = insert.getMediaHttpUploader();
    uploader.setDirectUploadEnabled(useDirectUpload);
    uploader.setProgressListener(new FileUploadProgressListener());
    return insert.execute();
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T13:46:28.683

我使用 httpClient 并使用 FileBody 将文件发送到服务器，作为 MultiPartEntity 的一部分。这适用于 Picasa、Flickr 等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T15:07:47.613

看起来您采用了一个上传文本的示例（内容中的 json，REST URL 端点中的 json）并使用它来尝试上传图像（ upload(ImgurImage) ）。

所以，看看'GenericJson.upload（ImgurImage）'的来源......

查看此方法在在 POST 上调用 'exec' 之前设置 'content' 字段时的作用。

了解这些框架将允许内容中包含字符串和文本，或者允许位图（字节）用于图像和音频类型的上传。

寻找一个设置“内容”的处理程序，并了解它如何处理 json 示例的字节和字符串。

这应该可以帮助您使用您选择的框架。

# android - Android 背景图形和颜色随着设备类型的变化而变化

> ID：13100041
> 
> 赞同：1
> 
> 时间：2012-10-27T12:06:07.630
> 
> 标签：android

使用图像（纯色填充图像）作为背景来表示任何视图。通过改变设备和模拟器来改变屏幕颜色。

我知道如果我们使用图像，它们不应该在 GUI 设计中显式拉伸。我只使用了 wrap_content，没有 GUI 布局变化。

此外，当我使用 color(#ebebeb) 代替 image 时，问题仍然存在。

在 Samsung-Gtab 上运行视图时，颜色显示为“#efebef”，在模拟器上显示为“#e8e8e8”。

请提出建议，尽管我对设备密度有先决条件，但我仍然面临这个问题。

如何在不同的 android 平台上为应用程序提供完全相同的 GUI 对比度......？？？

# jquery - 用于播放不同扩展名的视频文件的jQuery插件

> ID：13100044
> 
> 赞同：0
> 
> 时间：2012-10-27T12:06:58.973
> 
> 标签：jquery, asp.net-mvc, jquery-plugins

我想知道一个可以用来播放不同扩展名的视频文件的插件。在这里，我从数据库中传递了一个视频文件路径。我很困惑，从未使用过这个..

我已经尝试过`<embed>`了，但它对我不起作用。

```
<embed id="ShowVideo" allowscriptaccess="always"
    autostart="false" src="@viewVideo" controller="true" 
    allowfullscreen="true" width="280" wmode="transparent" height="200">
</embed> 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T12:07:50.050

试试[http://flowplayer.org/](http://flowplayer.org/)

这是一个很棒的播放器，有很多自定义选项

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T12:42:59.983

对`embed`标签的支持有限，它最初是 Netscape 视频标签，但今天所有现代浏览器都支持该`object`标签。如果您打算播放支持 HTML5 的视频，则应使用该`video`标签。

您可以通过文件扩展名确定视频是否支持 HTML5 格式并显示支持的标签：

**HTML5 视频**

```
<video width="320" height="240" controls="controls">
  <source src="movie.mp4" type="video/mp4">
  <source src="movie.ogg" type="video/ogg">
  <source src="movie.webm" type="video/webm">
</video> 
```

**对于其他格式：对象（为 Netscape 兼容而包含嵌入）**

```
<object data="movie.wmv" width="320" height="240">
  <embed src="movie.wmv" width="320" height="240">
</object> 
```

**对于 HTML5 视频的最大浏览器支持：将两者结合起来**

```
<video width="320" height="240" controls="controls">
  <source src="movie.mp4" type="video/mp4">
  <source src="movie.ogg" type="video/ogg">
  <source src="movie.webm" type="video/webm">
  <object data="movie.mp4" width="320" height="240">
    <embed src="movie.mp4" width="320" height="240">
  </object> 
</video> 
```

# java - 集合铸造为 SuperCollection

> ID：13100051
> 
> 赞同：1
> 
> 时间：2012-10-27T12:07:55.210
> 
> 标签：java, casting

在 java 中，可以将类的实例转换为提供的类`B`的实例extends 。`A``B``A`

这也可以用于类型参数化的类吗？例如，对于`B`扩展`A`，我想做以下事情：

```
List<A> l = new ArrayList<B>(); 
```

我认为这应该是合法的，但是编译器在这一点上不同意我的观点，所以我用以下 hack 欺骗了它：

```
List<A> l = (List<A>)(List) new ArrayList<B>(); 
```

……但我想我会被[迅猛龙击中](https://xkcd.com/292/)。有没有一种优雅的方式来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T12:19:25.823

> 我认为这应该是合法的，但编译器在这一点上不同意我的看法

通常，当人类和编译器不同意时，站在编译器一边是安全的。而不是欺骗编译器，您应该首先了解它为什么不允许转换。

考虑一下：你制作一个`List<B>`，像这样：

```
List<B> listB = new ArrayList<B>(); 
```

到目前为止，每个人都很高兴。现在让我们做你认为正确的事情：

```
// This does not compile, but let's pretend that it does
List<A> listA = (List<A>)listB; 
```

在这一点上，我们拥有`listA`这完全是我们的！让我们玩一下：假设我们有另一个类`C`扩展`A`. 我们可以这样做吗？

```
listA.add(new C()); // Why not? The compiler should allow it! 
```

但是等等，你看到我们做了什么吗？我们`listB`包含一个`C`现在！这就是编译器不允许转换的原因；这也是为什么在您尝试向列表中添加任何内容时您的代码不安全的原因。

要解决此问题，您可以使用通配符：`List<? extends A>`. 但是，这会将您的列表限制为只读访问。如果您必须允许编写（并且您知道您将只设置正确的内容），请改用非泛型`List`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T12:13:14.047

```
List<? extends A> l = new ArrayList<B>(); 
```

[您应该在此处](http://docs.oracle.com/javase/tutorial/extra/generics/index.html)阅读有关 java 中的泛型

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T12:22:05.283

有两种方法可以做到......

**-**这种处理方式`Collections`已经完成，原因**在编译期间和运行时**`Array`检查，但仅在.**`Collections``Compile time`**

 ****-**所以不应该**将另一种类型的对象意外添加到另一种类型的 Collection 中**，即将 Dog 对象添加到 Cat 集合中。

**1.**

```
public <T extends A> void go(ArrayList<T> aList){

} 
```

**2.**

```
public void go(ArrayList<? extends A> aList){

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-27T12:22:12.483

在非通用上下文中，如果 B“是”A，则 B 可以替代 A，但 A 不能替代 B。

对于泛型，List 和 List 都是 "is a" `Collection<E>`；也就是说，List 不是 List 的子类，因此不能用 List 代替 List。

您正在寻找的有关泛型的具体内容可以在[这里](http://docs.oracle.com/javase/tutorial/java/generics/inheritance.html)找到，为方便起见，复制如下。

> 给定两个具体类型 A 和 B（例如 Number 和 Integer），MyClass 与 MyClass 没有关系，无论 A 和 B 是否相关。MyClass 和 MyClass 的共同父对象是 Object。**

# oracle - oracle 数据库 AUDIT 不显示 SQL 文本和绑定值

> ID：13100054
> 
> 赞同：3
> 
> 时间：2012-10-27T12:08:31.810
> 
> 标签：oracle, audit

根据本[教程](http://www.oracle-base.com/articles/10g/auditing-10gr2.php)，我使用以下选项在数据库上配置了审计：

```
AUDIT ALL BY db BY ACCESS;
AUDIT SELECT TABLE, UPDATE TABLE, INSERT TABLE, DELETE TABLE BY db BY ACCESS;
AUDIT EXECUTE PROCEDURE BY db BY ACCESS; 
```

我从 java 准备查询并运行`SELECT`查询。`DBA_AUDIT_TRAIL`表显示我的`SELECT`查询，但`SQL_TEXT`字段`SQL_BIND`为空。我怎么能看到他们？我应该启用任何其他选项吗？我正在使用 Oracle 11.2 快捷版。这是因为它是特快版吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-27T13:08:17.957

列`SQLTEXT`并`SQLBIND`仅在`AUDIT_TRAIL`选项设置为时填充`db, extended`。这是一个例子：

```
SQL> alter system set audit_trail=db,extended scope=spfile;

System altered 
```

重启实例。

```
SQL> audit select on your_table;

Audit succeeded

SQL> select sqltext from sys.aud$ where obj$name = 'YOUR_TABLE';

SQLTEXT
--------------------------------------------------------------------------------
null

SQL> select count(*) from your_table;

  COUNT(*)
----------
         3

SQL> select sqltext from sys.aud$ where obj$name = 'YOUR_TABLE';

SQLTEXT
--------------------------------------------------------------------------------
select count(*) from your_table

SQL> 
```

# javascript - 等待函数完成

> ID：13100057
> 
> 赞同：3
> 
> 时间：2012-10-27T12:09:50.033
> 
> 标签：javascript

我有 2 个功能。第二个比第一个快，函数怎么能等待完成第一个的工作？

```
function1(); // slow 

function2(); // fast 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-27T12:11:18.783

JavaScript 是命令式和单线程的，它就是这样*工作*的。`function2()`在完成之前不会开始`function1()`。

如果*慢*是指通过 AJAX 异步调用一些外部服务，那么我们正在谈论。`function1()`必须提供某种回调，以便在异步请求完成时`function2()`调用：

```
function1(function2); 
```

实现很简单，例如使用 jQuery：

```
function function1(callback) {
  $.ajax({url: 'some-url'}).done(callback);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T12:11:50.840

您必须使用一些 AJAX 请求。所以，ajax完成后调用回调函数如：

```
function1 = new function(callback) {
    $.ajax({...}).done(callback());
}

function1(function2); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-27T12:17:19.643

如果要异步调用函数，除了明显的回调方法外，它们的排序可以基于事件框架。您可以添加一个带有 function1 作为处理程序的事件侦听器，并在 function2 中触发该事件。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-27T12:12:03.653

如果您一个接一个地调用一个函数，那么它将完成第一个函数，它可能会很慢或很快。

# c# - 使用 .NET4 MVC4 代码优先的多对多关系的 LINQ 相交查询

> ID：13100062
> 
> 赞同：0
> 
> 时间：2012-10-27T12:11:04.450
> 
> 标签：c#, asp.net-mvc, linq, asp.net-mvc-4, many-to-many

在使用 Code First 的 .NET4 MVC 4 中，我有两个类形成多对多关系。如何编写一个简单的 LINQ 查询以从给定的流派列表中查找至少具有一种或多种流派的所有游戏？（即检索所有策略和/或沙盒类型的游戏）

```
public class Game
{
    public int ID { get; set; }
    public virtual ICollection<Genre> Genres { get; set; }
}

public class Genre
{
    public int ID { get; set; }
    public virtual ICollection<Game> Games { get; set; }
} 
```

请注意，我使用的是 Code First，因此我无法访问抽象连接表 GenreGames。

我尝试了以下方法来从数组 gid 中找到至少包含一个流派 ID 的游戏：

```
var gid = new int[] { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 };
var result = from g in unitOfWork.GameRepository.dbSet
             where (
                 from gen in unitOfWork.GenreRepository.dbSet
                 where gid.Contains(gen.ID)
                 select gen.ID
             ).Any()
             select g; 
```

检索结果时

```
List<Game> similiarGames = result.ToList<Game>(); 
```

出现以下错误。

> 无法创建类型为“GratifyGaming.Domain.Models.Genre”的常量值。此上下文仅支持原始类型或枚举类型。

如何仅使用原始类型或枚举类型获得我想要的结果？有解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T12:15:45.557

试试这个：

```
var test = unitOfWork.GameRepository.dbSet
                         .Where(G => G.Genres.Where(genre => 
                                     gid.Contains(genre .ID)).Count() > 0); 
```

祝你好运 ！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T12:18:32.420

尝试这个：

```
var result = unitOfWork.GameRepository.dbSet
    .Where(game => game.Genres.Any(genre => gid.Contains(genre.ID)); 
```

# .net - EF 4.1 Null 插入的 GUID 不为空

> ID：13100070
> 
> 赞同：1
> 
> 时间：2012-10-27T12:12:12.323
> 
> 标签：.net, entity-framework-4.1

我不断收到此错误：

> 无法将值 NULL 插入到列“Id”、表“database.dbo.Employees”中；列不允许空值。INSERT 失败。\r\n语句已终止。

但是该对象的此属性设置为`Guid.NewGuid()`

我使用实体框架 4.1 和 .net 框架 4.0。

该列是主键，不为空。我没有使用 Code First 方法。

编辑：如果我手动编辑文件 edmx.Run Custom 工具似乎不会更新文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T12:27:02.047

如果您使用 Fluent API 或数据注释在模型中将关键属性标记为自动生成的身份，则可能会发生这种情况......

```
[DatabaseGenerated(DatabaseGeneratedOption.Identity)]
public Guid Id { get; set; } 
```

...（其效果是 EF 不会将`Id`值发送到数据库，因为它希望在那里生成密钥）但是在您的数据库表中，您没有指定该`Id`列的默认值，`newid()`以便数据库不会生成新密钥。

我想`Guid`手动将值从客户端发送到数据库，`DatabaseGeneratedOption.Identity`从模型中删除规范。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T14:24:46.103

导致错误的问题是*运行自定义工具*没有完全更新实体。来自 SQL 的插入有效，因此我尝试从 Slauma 建议的更改和实体的其他更改中恢复。

# powershell - Powershell 脚本问题（新手）

> ID：13100077
> 
> 赞同：1
> 
> 时间：2012-10-27T12:13:16.720
> 
> 标签：powershell

好的，我的脚本有一些问题，它们可能很明显，但这是脚本。非常感谢您对脚本进行审查，并提供一些反馈，说明它们被破坏的原因。

```
## Script Startup
$Computers = Get-Content .\computers.txt
$Total = $Computers.length
$consoleObject = (Get-Host).UI.RawUI

## Set Variables
$Run = 0
$Successful = 0

# Checks to see if there is a log file already created. If so check number of successful computer ran against, if not, create the log file.
IF ( test-path .\~temp.txt ) {
    $Log = Get-Content .\~temp.txt
    ForEach ($LogLine in $Log) {
    $LogCheck = $LogLine.ToString().Split(",")[2]
        IF ( "$LogCheck" -eq "Successful" ) {
            $Successful += 1
        }
    }
} ELSE {
    add-content .\~temp.txt "Computer Name,Attempts,Last Attempt,Time,Date"
}

while ( "$Completed" -le "$total" ) {
    $Run += 1
    $Time = Get-Date
    $consoleObject.WindowTitle = “Admin Check - $Successful Out Of $Total Successful `| Run`: $Run”

    ForEach ($Computer in $Computers) {
        IF ( Select-String .\~temp.txt -pattern "$Computer" -quiet ) {
            $LogUpdate = Select-String .\~Temp.txt -pattern $Computer
            $Attempts = $LogUpdate.ToString().Split(",")[1]
            $Result = $LogUpdate.ToString().Split(",")[3]
        } ELSE {
            add-content .\~temp.txt "$Computer,0,Not Checked,Not Run Yet,Not Run Yet"
            $Attempts = ""
            $Result = ""
        }

        IF ( "$Result" -eq "Successful") {
            write-output "$Computer Already Completed"
        } ELSE {
            IF ( test-connection $Computer -quiet ) {
                # Command Here
                $Successful += 1
                $IsOn = "True"
            } ELSE {
                $IsOn = "False"
            }
            $Attempts += 1
        }
        ( Get-Content .\~temp.txt ) | Foreach-Object {$_ -replace "$Computer,.*", ($Computer + "," + $Attempts + "," + $IsOn + "," + $Result + "," + $Time.ToShortTimeString() + "," + $Time.ToShortDateString())} | Set-Content .\~temp.txt
    }
} 
```

~temp.txt

```
Computer Name,Attempts,Last Attempt Result,Time,Date
52qkkgw-94210jv,11111111111111,False,,8:47 PM,10/27/2012
HELLBOMBS-PC,11111111111111111111111111111111111111111111111111111111111,True,,8:47 PM,10/27/2012
52qkkgw-94210dv,11111111111111111111111111111111111111111111111111111111,False,,8:46 PM,10/27/2012 
```

当前问题： - 当成功等于总数时实际上不会停止。- 不检查结果与成功，所以永远重做所有的比赛。- Attempts 选项卡只是不断地在最后一次或某事上加 1，所以它会产生一些奇怪的连续“1111”的东西。可能更多只是还没有注意到它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T09:16:54.597

这是工作代码：

```
clear
## Script Startup
$Computers = Get-Content \computers.txt
cd c:\pst
$Total = $Computers.length
$consoleObject = (Get-Host).UI.RawUI

## Set Variables
$Run = 1
$Successful = 0

# Checks to see if there is a log file already created. If so check number of successful         computer ran against, if not, create the log file.
IF ( test-path .\~temp.txt ) {
$Log = Get-Content .\~temp.txt
ForEach ($LogLine in $Log) {
$LogCheck = $LogLine.ToString().Split(",")[2]
    IF ( "$LogCheck" -eq "Successful" ) {
        $Successful += 1
    }
}
} ELSE {
add-content .\~temp.txt "Computer Name,Attempts,Last Attempt,Time,Date"
}

while ( $Run -ne $total ) {
$Run += 1
$Time = Get-Date
$consoleObject.WindowTitle = “Admin Check - $Successful Out Of $Total Successful `| Run`: $Run”

ForEach ($Computer in $Computers) {
    IF ( Select-String .\~temp.txt -pattern "$Computer" -quiet ) {
        $LogUpdate = Select-String .\~Temp.txt -pattern $Computer
        $Attempts = $LogUpdate.ToString().Split(",")[1]
        $Result = $LogUpdate.ToString().Split(",")[3]
    } ELSE {
        add-content .\~temp.txt "$Computer,0,Not Checked,Not Run Yet,Not Run Yet"
        $Attempts = ""
        $Result = ""
    }

    IF ( "$Result" -eq "Successful") {
        write-output "$Computer Already Completed"
    } ELSE {
        IF ( test-connection $Computer -quiet ) {
            # Command Here
            $Successful += 1
            $IsOn = "True"
        } ELSE {
            $IsOn = "False"
        }
        $Attempts += 1
    }
    ( Get-Content .\~temp.txt ) | Foreach-Object {$_ -replace "$Computer,.*", ($Computer + "," + $Attempts + "," + $IsOn + "," + $Result + "," + $Time.ToShortTimeString() + "," + $Time.ToShortDateString())} | Set-Content .\~temp.txt
}
} 
```

# ios - 崩溃 CGDataProviderCreateWithCopyOfData：vm_copy 失败：状态 1

> ID：13100078
> 
> 赞同：8
> 
> 时间：2012-10-27T12:13:55.337
> 
> 标签：ios, objective-c, image, crash, cgbitmapcontextcreate

我正面临以下错误的崩溃：

> “CGDataProviderCreateWithCopyOfData：vm_copy 失败：状态 1。”

我有多个问题，你可以帮忙。

1.  vm_copy failed 中的状态 1 代表什么？

2.  仅当我在数据副本的内部 for 循环中设置断点时，才会发生此崩溃。然后恢复并删除断点。如果没有断点，函数会执行但我得到一个空白图像。如何确保即使我没有设置断点，也能捕获此类崩溃并且应用程序停止执行？

3.  当我执行 CGBitmapContextCreateImage 时出现此错误。有谁知道如何解决这个问题？

```
-(UIImage *) convertBitmapRGBA8ToUIImage:(UInt8**)img 
                                    :(int) width
                                    :(int) height 
{

CGImageRef inImage = m_inFace.img.CGImage;

UInt8*piData = calloc( width*height*4,sizeof(UInt8));

int iStep,jStep;
for (int i = 0; i < height; i++) 
{
    iStep = i*width*4;
    for (int j = 0; j < width; j++) 
    {
        jStep = j*4;
        piData[iStep+jStep] =img[i][j];
        piData[iStep+jStep+1] =img[i][j];
        piData[iStep+jStep+2] = img[i][j];

    }
}

CGContextRef ctx = CGBitmapContextCreate(piData,
                                         CGImageGetWidth(inImage),  
                                         CGImageGetHeight(inImage),  
                                         CGImageGetBitsPerComponent(inImage),
                                         CGImageGetBytesPerRow(inImage),  
                                         CGImageGetColorSpace(inImage),  
                                         CGImageGetBitmapInfo(inImage) 
                                         ); 

CGImageRef imageRef = CGBitmapContextCreateImage(ctx);  
UIImage *finalImage = [UIImage imageWithCGImage:imageRef];
CGContextRelease(ctx);
CGImageRelease(imageRef);
free(piData);
return finalImage;

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-28T10:58:57.177

kern_return.h[头](http://www.opensource.apple.com/source/xnu/xnu-1456.1.26/osfmk/mach/kern_return.h)文件给出：

```
#define KERN_INVALID_ADDRESS        1
  /* Specified address is not currently valid.
   */ 
```

这对应于相关的错误代码`vm_copy failed: status 1`。

我怀疑这是与内存对齐有关的问题，因为[vm_copy 文档](http://web.mit.edu/darwin/src/modules/xnu/osfmk/man/vm_copy.html)指出*address[es] must be on a page boundary*。

为了确保您使用正确对齐的缓冲区，您应该`piData`以与`inImage`输入图像相同的步幅分配缓冲区：

```
size_t bytesPerRow = CGImageGetBytesPerRow(inImage);
UInt8*piData = calloc(bytesPerRow*height,sizeof(UInt8)); 
```

然后使用这个`bytesPerRow`值而不是`width*4`在你的`for`循环中，即：

```
iStep = i*bytesPerRow; 
```

这应该可以解决您的问题（注意：我假设`CGImageGetWidth(inImage)`和`width`是相同的）。

# cakephp - CakePHP 星级

> ID：13100083
> 
> 赞同：0
> 
> 时间：2012-10-27T12:14:53.760
> 
> 标签：cakephp, rating, cakephp-2.2, rating-system

我希望在 CakePHP 中使用 jQuery Ajax 实现 5 星评级。我遇到了一些插件，但它们似乎仅适用于 1.x 版本。

有没有人在2.2版本的CakePHP中实现过相同的

旧版本：

[http://bakery.cakephp.org/articles/infest696/2011/05/21/star_rating_helper_with_jquery](http://bakery.cakephp.org/articles/infest696/2011/05/21/star_rating_helper_with_jquery)

[http://bakery.cakephp.org/articles/schneimi/2010/08/19/ajax-star-rating-plugin-1](http://bakery.cakephp.org/articles/schneimi/2010/08/19/ajax-star-rating-plugin-1)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T15:44:38.597

[https://github.com/cakedc/ratings](https://github.com/cakedc/ratings)

文档 (readme.md) 包含您需要的一切。我刚刚在我正在处理的一个个人项目中实现了它 - 使用 AJAX - 它很容易设置并且工作正常。

# sql-server - 如何添加新列（作为主键列）查看

> ID：13100088
> 
> 赞同：0
> 
> 时间：2012-10-27T12:15:42.673
> 
> 标签：sql-server, sql-server-2008, view, primary-key

是否可以添加列（PK）来查看。如果是的话..我们怎么能？

这是我的观点：

```
CREATE VIEW [dbo].[SalesDetailView]
AS
SELECT
    DATENAME(yyyy, SH.CreatedDateTime) AS Year,
    DATENAME(mm, SH.CreatedDateTime) AS Month, SH.CreatedDateTime AS Date,
    SH.TransactionName AS Type, SH.SalesHeaderID AS No,
    Customer.CustomerName AS Customer,
    CustomerGroup.CustomerGroupName AS Customer_Group, SH.Reference AS Memo,
    Item.ItemName AS Item, SD.LineDescription AS Item_Description,
    Item.ItemType AS Item_Type, Item.UOM,
    ItemGroup.ItemGroupName AS Item_Group,
    CAST (SD.Quantity AS INT) AS Quantity, CAST(SD.Amount AS MONEY) AS Amount,
    SD.Price, SD.Discount, SH.ExchangeRate AS Exchange_Rate,
    Currency.CurrencyDescription AS Currency, SD.ClassID AS Class_ID,
    SD.SalesTaxID AS SalesTax_ID, SalesTaxGroup.SalesTaxGroupName AS Tax_Group,
    Employee.EmployeeName AS Salesperson,
    ShippingMethod.ShippingMethodName AS Shipping_Method,
    PaymentTerm.PaymentTermName AS Payment_Term,
    PaymentMethod.PaymentMethodName AS Payment_Method
FROM
    SalesHeader SH, Customer
LEFT OUTER JOIN 
    SalesDetail SD ON SH.SalesHeaderID = SD.SalesHeaderID
LEFT OUTER JOIN 
    Item ON SD.ItemID = Item.ItemID
LEFT OUTER JOIN 
    ItemGroup ON Item.ItemGroupId = ItemGroup.ItemGroupID
LEFT OUTER JOIN 
    CustomerGroup ON Customer.CustomerGroupId = CustomerGroup.CustomerGroupID
LEFT OUTER JOIN 
    Employee ON Customer.EmployeeID = Employee.EmployeeID
LEFT OUTER JOIN 
    Currency ON Customer.CurrencyID = Currency.CurrencyID
LEFT OUTER JOIN 
    SalesTaxGroup ON Customer.SalesTaxGroupID = SalesTaxGroup.SalesTaxGroupID
LEFT OUTER JOIN 
    PaymentTerm ON Customer.PaymentTermID = PaymentTerm.PaymentTermID
LEFT OUTER JOIN 
    ShippingMethod ON Customer.ShippingMethodID = ShippingMethod.ShippingMethodID
LEFT OUTER JOIN 
    PaymentMethod ON Customer.PaymentMethodID = PaymentMethod.PaymentMethodID
WHERE
    SH.CustomerID = Customer.CustomerID
    AND SH.TransactionName <> 'SalesOrder'
    AND Sh.TransactionName <> 'Quote' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T12:50:45.257

您可以添加一个独特的列`row_number`，例如：

```
CREATE VIEW [dbo].[SalesDetailView]
AS
SELECT
    row_number() over (order by SH.CreatedDateTime) as PK,
    DATENAME(yyyy, SH.CreatedDateTime) AS Year, 
```

如果这不是你的意思，请澄清你的问题。一些示例结果总是有帮助的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T19:48:18.963

当您看到视图的 sp_help 时，所提到的标识列只不过是基础表的标识。

如果您已经在基础表中添加了标识列，则只需更改视图并在 select stmt 中添加标识列。

否则，您需要先将标识添加到表中，然后编辑视图以在您的选择 stmt 中添加列。

```
ALTER  VIEW [dbo].[SalesDetailView]
AS
SELECT
    DATENAME(yyyy, SH.CreatedDateTime) AS Year,
    DATENAME(mm, SH.CreatedDateTime) AS Month, SH.CreatedDateTime AS Date,
    SH.TransactionName AS Type, SH.SalesHeaderID AS No,
    Customer.CustomerName AS Customer,
    CustomerGroup.CustomerGroupName AS Customer_Group, SH.Reference AS Memo,
    Item.ItemName AS Item, SD.LineDescription AS Item_Description,
    Item.ItemType AS Item_Type, Item.UOM,
    ItemGroup.ItemGroupName AS Item_Group,
    CAST (SD.Quantity AS INT) AS Quantity, CAST(SD.Amount AS MONEY) AS Amount,
    SD.Price, SD.Discount, SH.ExchangeRate AS Exchange_Rate,
    Currency.CurrencyDescription AS Currency, SD.ClassID AS Class_ID,
    SD.SalesTaxID AS SalesTax_ID, SalesTaxGroup.SalesTaxGroupName AS Tax_Group,
    Employee.EmployeeName AS Salesperson,
    ShippingMethod.ShippingMethodName AS Shipping_Method,
    PaymentTerm.PaymentTermName AS Payment_Term,
    PaymentMethod.PaymentMethodName AS Payment_Method,
    [your column] as  PK
FROM
    SalesHeader SH, Customer
LEFT OUTER JOIN 
    SalesDetail SD ON SH.SalesHeaderID = SD.SalesHeaderID
LEFT OUTER JOIN 
    Item ON SD.ItemID = Item.ItemID
LEFT OUTER JOIN 
    ItemGroup ON Item.ItemGroupId = ItemGroup.ItemGroupID
LEFT OUTER JOIN 
    CustomerGroup ON Customer.CustomerGroupId = CustomerGroup.CustomerGroupID
LEFT OUTER JOIN 
    Employee ON Customer.EmployeeID = Employee.EmployeeID
LEFT OUTER JOIN 
    Currency ON Customer.CurrencyID = Currency.CurrencyID
LEFT OUTER JOIN 
    SalesTaxGroup ON Customer.SalesTaxGroupID = SalesTaxGroup.SalesTaxGroupID
LEFT OUTER JOIN 
    PaymentTerm ON Customer.PaymentTermID = PaymentTerm.PaymentTermID
LEFT OUTER JOIN 
    ShippingMethod ON Customer.ShippingMethodID = ShippingMethod.ShippingMethodID
LEFT OUTER JOIN 
    PaymentMethod ON Customer.PaymentMethodID = PaymentMethod.PaymentMethodID
WHERE
    SH.CustomerID = Customer.CustomerID
    AND SH.TransactionName <> 'SalesOrder'
    AND Sh.TransactionName <> 'Quote' 
```

# windows-phone-7 - 如何在 windows phone 7.1 的饼图中显示带有标签的百分比

> ID：13100091
> 
> 赞同：1
> 
> 时间：2012-10-27T12:15:59.190
> 
> 标签：windows-phone-7

```
<charting:PieSeries 
          IndependentValueBinding="{Binding Name}" DependentValueBinding="{Binding Count}">
    <charting:PieSeries.LegendItemStyle>
        <Style TargetType="charting:LegendItem">
            <Setter Property="Margin" Value="4 0 5 4"/>
            <Setter Property="Background" Value="Maroon"></Setter>
            <Setter Property="Foreground" Value="Silver"></Setter>
        </Style>
    </charting:PieSeries.LegendItemStyle>
</charting:PieSeries> 
```

我想在饼图中显示一个带有百分比的名称。以上方式它只是生成一个没有标签百分比的饼图

# java - for循环中的多个变量

> ID：13100101
> 
> 赞同：8
> 
> 时间：2012-10-27T12:16:41.467
> 
> 标签：java, for-loop

```
 else
    {
        r=Power(s,n-1);
        System.out.println(r);
        int d=r.length;
        char ch=s.charAt(n);
        int v=d+1;
        p[v]=Character.toString(ch);
        String q = p[v];

        for(i=d+2,j=0;i<2d+3,j<d;i++,j++)
        {
            p[i]=r[j].concat(q);
        }
} 
```

显示语法错误，即使在声明后也无法识别 var j...请帮助我。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-27T12:23:09.247

问题是循环的条件。正确的应该是：

```
for(i=d+2,j=0;i<2d+3 && j<d;i++,j++){ ... 
```

或者

```
for(i=d+2,j=0;i<2d+3 || j<d;i++,j++){ ... 
```

在 java 中用逗号分隔两个布尔条件是没有意义的。

正如评论中所见，变量`j`并`i`没有被声明。

# java - 通过 CDI 从不同的部署注入 bean

> ID：13100102
> 
> 赞同：1
> 
> 时间：2012-10-27T12:16:49.173
> 
> 标签：java, jboss, cdi

这可能有点复杂。

我有一个`EAR`和一个并排`WAR`部署在一个容器中。`JBoss 7`有`EAR`一个`service.jar`模块，`EJBs`在其`lib`文件夹中有另一个实用程序 jar。在实用程序 jar 中有一个资源生产者类，如下所示：

```
public class BaseResources {

@Produces
private Logger getLogger(InjectionPoint ip) {
    String category = ip.getMember()
            .getDeclaringClass()
            .getName();
    return LoggerFactory.getLogger(category);
}
} 
```

现在 WAR 依赖于 EAR 并看到它的所有类。

但是当我尝试将一个`Logger`实例注入到类中时`WAR`，有一个`org.jboss.weld.exceptions.DeploymentException: WELD-001408 Unsatisfied dependencies for type [Logger] with qualifiers [@Default] at injection point`抛出，告诉我没有`Logger`实例可以注入。

有没有办法将 注入`Logger`到类中`WAR`？

# java - JFrame 尺寸太小

> ID：13100103
> 
> 赞同：8
> 
> 时间：2012-10-27T12:16:57.537
> 
> 标签：java, swing, jframe, preferredsize

我在 netbeans 中创建了一个 JFrame。但是当我运行程序时，Jframe 尺寸太小了。这是我的代码。

```
import javax.swing.JFrame;    

public class Window {

    private static void demo()
    {
        JFrame frame =new JFrame();
        frame.setVisible(true);
    }
    public static void main(String[] args) {
       javax.swing.SwingUtilities.invokeLater(new Runnable(){
      public void run()
      {
          demo();
      }
        });
    }
} 
```

![输出窗口如下所示。](../Images/66ee1fd7ed185a2de5357f57931daee4.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-27T12:17:51.887

您可以使用`frame.setSize(width, height)`它来设置它的大小或`frame.setBounds(x, y, width, height)`设置位置和大小。

更好的选择是`frame.pack()`在将一些组件添加到其内容窗格之后调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T12:30:08.433

试试这个方法...

使用**JFrame**`setSize(width, height)`的方法。

 **```
public class Myframe extends JFrame{

  public Myframe(){    
      this.setSize(300,300);    
  }

public static void main(String[] args){

    EventQueue.invokeLater(new Runnable(){

          public void run(){          
            Myframe f = new Myframe("Frame");
            f.setVisible(true);     
          }
      }); 
    }    
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T14:33:53.513

如果你想最大化它，你可以尝试

```
 this.setVisible(false);
    this.setExtendedState(MAXIMIZED_BOTH);
    this.setVisible(true);
   this.setResizable(false); 
```

其他用于某些特定尺寸的用途

```
this.setSize(width,height); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-28T07:51:12.673

你只需要添加一条线，这样你就可以给你的框架一个大小。这条线是

```
frame.setSize(300,300); 
```

这是完整的代码：

```
import javax.swing.JFrame;    

public class Window {

private static void demo()
{
    JFrame frame =new JFrame();
    frame.setSize(300,300);
    frame.setVisible(true);
}
public static void main(String[] args) {
   javax.swing.SwingUtilities.invokeLater(new Runnable(){
  public void run()
  {
      demo();
  }
    });
}
} 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2018-07-31T14:52:09.953

您必须有一个公共组件方法，例如

```
public gestion_name_of_class() {
    initComponents();
} 
```**

# javascript - 使用 JavaScript 重定向简单的 HTML 页面

> ID：13100108
> 
> 赞同：2
> 
> 时间：2012-10-27T12:17:27.480
> 
> 标签：javascript, html

我在一个简单的 HTML 页面上执行 JavaScript 验证。出错时，我试图将页面重定向到 Error.html，使用`window.location.href="Error.html"`.

我得到显示错误的 JavaScript 弹出窗口，但页面没有重定向。

**JS：**

```
function checkifFormIsFilled() {

    var txtUserName = document.getElementById("txtUserName").value;
    var txtFirstName = document.getElementById("txtFirstName").value;
    var txtLastName = document.getElementById("txtLastName").value;
    var txtEmail = document.getElementById("txtEmail").value;
    var txtArea = document.getElementById("txtArea").value;

    var errMessage = "";
    var errorInForm = false;

    if (txtUserName === "") {
        errMessage = "UserName";
        errorInForm = true;
    }
    if (txtFirstName === "") {
        errMessage += ", First Name";
        errorInForm = true;
    }
    if (txtLastName === "") {
        errMessage += ", Last Name";
        errorInForm = true;
    }
    if (txtEmail === "") {
        errMessage += ", Email";
        errorInForm = true;
    }
    if (txtArea === "") {
        errMessage += ", Address";
        errorInForm = true;
    }

    if (errorInForm == true) {
        errMessage += " are required fields";
        window.alert(errMessage);
        //window.location.href = "Error.html";        
        window.navigate("Error.html");
    }
} 
```

**HTML：**

```
<form method="post" style="width: 560px; height: 850px; margin-left: 10px; margin-top:10px">
    <fieldset>
        <legend>New User</legend>
        <table>
            <tr>
                <td>
                    <label>User Name:</label></td>
                <td>
                    <input type="text" id="txtUserName" name="User Name" onblur="checkRequired(this)" maxlength="10" /></td>
            </tr>

            <tr>
                <td>
                    <label>First Name:</label></td>
                <td>
                    <input type="text" id="txtFirstName" name="First Name" maxlength="10" onblur="checkRequired(this)" /></td>
            </tr>

            <tr>
                <td>
                    <label>Last Name:</label></td>
                <td>
                    <input type="text" id="txtLastName" name="Last Name" maxlength="10" onblur="checkRequired(this)" /></td>

            </tr>
            <tr>
                <td>
                    <label>Email: </label>
                </td>
                <td>
                    <input type="text" name="emailInput" id="txtEmail" onblur="checkRequired(this)" /></td>
            </tr>

            <tr>

                <td>
                    <label for="lblAddress">Address</label></td>
                <td>
                    <textarea id="txtArea" name="txtAddress" cols="50" rows="5" maxlength="1000" onblur="checkRequired(this)"></textarea></td>
            </tr>

            <tr>
                <td>Groups</td>
                <td>
                    <select name="selGroups">
                        <option value="c1">Employee</option>
                        <option value="c1">HR</option>
                        <option value="c1">Director</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td>Status</td>
                <td>
                    <select name="selStatus">
                        <option value="c1">Active</option>
                        <option value="c2">Inactive</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td>
                    <input id="btnSubmit" value="Add User" type="submit" onclick="checkifFormIsFilled();" />
                </td>
                <td>
                    <button id="btnCancel">Cancel</button>
                </td>
            </tr>

        </table>
    </fieldset>

</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T12:36:09.797

这应该这样做：

```
 if (errorInForm == true) {
            errMessage += " are required fields";
            window.alert(errMessage);
            window.location = "Error.html";
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T14:44:02.657

将函数调用放在元素的`onsubmit`属性中。`form`如果发现错误，您可能还必须返回 false，以防止它转到同一页面而不是您的错误页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T12:27:59.100

试试这个：

```
<input id="btnSubmit" value="Add User" type="button" onclick="checkifFormIsFilled();" /> 
```

由于表单提交给自己，重定向没有发生。

[演示](http://jsfiddle.net/4VwFP/6/)

# silverlight - 广告在 WP7 模拟器中不起作用

> ID：13100113
> 
> 赞同：0
> 
> 时间：2012-10-27T12:18:02.487
> 
> 标签：silverlight, windows-phone-7

我在我的`WP7`应用程序中使用以下代码来显示虚拟广告`Microsoft`。当我运行模拟器时，没有显示广告。这里有什么问题？

```
 <my:AdControl AdUnitId="Image480_80" ApplicationId="test_client" Grid.ColumnSpan="3" Height="80" HorizontalAlignment="Left" Margin="0,550,0,0" Name="adControl1" VerticalAlignment="Top" Width="480" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T01:56:43.273

你必须去[http://advertising.microsoft.com/mobile-apps](http://advertising.microsoft.com/mobile-apps)

注册您的应用程序，然后您必须将以下内容添加到您的控件中： AdUnitId="" ApplicationId=""

您现在的代码只是显示一个占位符。

仅供参考，我发现广告有时在模拟器上不起作用。

# android - 为什么在 Android 上，OpenCV 摄像头在捕获视频时比 Android 摄像头快

> ID：13100114
> 
> 赞同：4
> 
> 时间：2012-10-27T12:18:09.863
> 
> 标签：android, opencv, android-camera, video-capture

在 Android 上的一个项目中，我试图捕捉视频并实时处理它（如 Kinect）。我尝试了两种方法：使用 OpenCV 不断调用 mCamera.grab() 和 capture.retrieve(mRgba,Highgui.CV_CAP_ANDROID_COLOR_FRAME_RGBA); 或Android的相机通过不断捕捉图像。

我觉得 OpenCV 相机捕捉图像的能力比 Android 相机快。但为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-28T10:13:41.003

OpenCV 使用 hack 来获得对 Android 相机的低级别访问权限。它允许避免在本机层和托管层之间进行多次数据复制和转换。

# macos - 在 Mac OS X 上使用 IUP

> ID：13100116
> 
> 赞同：4
> 
> 时间：2012-10-27T12:18:24.510
> 
> 标签：macos, lua, iup

你们在 MacOS 上使用 IUP 时是否遇到过这个问题？

```
Gizak-Pro:iup-3.6_MacOS107_bin Gizak$ ./iupview 
dyld: Library not loaded: /sw/lib/fontconfig2/lib/libfontconfig.1.dylib
  Referenced from: /Users/Gizak/Downloads/iup-3.6_MacOS107_bin/./iupview
  Reason: image not found
Trace/BPT trap: 5 
```

那么..如何使它工作？那将非常有帮助！

操作系统：Mac OS X 10.7.5 通过端口安装 lua5.1 IUP 版本：3.6

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T16:47:52.520

该应用程序依赖于一些未安装在您的系统上的库。

在[IUP 文档](http://www.tecgraf.puc-rio.br/iup/)中，您将能够找到如何在 MacOSX 上运行 IUP 的指南。相关部分位于 IUP / System / Drivers / GTK 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T21:18:25.207

您使用的二进制文件链接到 Fink 提供的路径，请查看 IUP sf 项目下载目录中的 README.md。您可以：

*   安装 Fink 并填充依赖项

*   使用 install_name_tool 重写依赖项

*   设置 DYLD_FALLBACK_LIBRARY_PATH 以匹配另一个源安装的依赖项

# php - 在下拉菜单中填充树结构中的许多复选框

> ID：13100122
> 
> 赞同：0
> 
> 时间：2012-10-27T12:19:36.963
> 
> 标签：php, javascript, jquery, ajax, populate

伙计们 这是复选框，它以树状结构显示。我需要它显示在下拉列表中。

```
<html>

    <head>

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>

        <script type="text/javascript">

            $(document).ready(function(){

                $('.team').on('click',function(){
                    if($(this).is(':checked')){
                        $(this).next().next().show();
                    }else{
                        $(this).next().next().hide();
                    }
                });
            });

        </script>

    </head>

    <body>

        <form name="FootballClubs">

            <input type="checkbox" class="team" value="RealMadrid"/>Real Madrid<br />
            <div style="padding:10px 10px 10px 15px;display:none;">     
                <input type="checkbox" class="player" value="CR"/>Cristiano Ronaldo<br />
                <input type="checkbox" class="player" value="SA"/>Shabi Alanso<br />
                <input type="checkbox" class="player" value="IC"/>Iker Casillias<br />
            </div>  
            <input type="checkbox" class="team" value="ManCity"/>Man City<br /> 
            <div style="padding:10px 10px 10px 15px;display:none;">
                <input type="checkbox" class="player" value="SA"/>Sergio Aguero<br />
                <input type="checkbox" class="player" value="SM"/>Super Mario<br />
            </div>
        </form>

    </body>

</html> 
```

我正在尝试填充下拉列表。帮我。

提前致谢。！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T14:06:00.210

查看 jquery [UI 小部件](http://www.erichynds.com/examples/jquery-ui-multiselect-widget/demos/)和[jSTree](http://www.jstree.com/)

# jquery - 根据现有元素添加/删除主体类

> ID：13100123
> 
> 赞同：0
> 
> 时间：2012-10-27T12:19:48.867
> 
> 标签：jquery, class, background, addclass, removeclass

我希望有不同的背景图像，具体取决于您是否登录。到目前为止，我已经尝试使用 jQuery 向正文添加/删除一个类（使用登录框来确定您是否已登录），但它没有按预期工作。

第一个 if 语句有效，并且类 'index' 设置为主体，但是，当您登录时，不会删除该类，即使登录表单不再存在。

那么，如何更改此代码以使其按我的意愿工作？提前致谢。

```
if($('#loginForm')) {
    $('body').addClass('index');
}
else {
    $('body').removeClass('index');
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T12:25:10.470

`if($('#loginForm'))`将始终返回 true ，因为即使元素不存在，jquery 也会创建一个空对象。用于`length`测试jQuery元素对象是否存在

```
$('body').toggleClass('index', $('#loginForm').length ); 
```

使用toggleClass可以缩短代码，第二个参数是一个布尔值

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T12:24:45.880

您可以使用该`length`属性来测试元素是否存在：

```
if ($('#loginForm').length) {
    $('body').addClass('index');
}
else {
    $('body').removeClass('index');
} 
```

您也可以使用 jQuery 的内置`size()`方法，但最好尽可能使用本机属性。

# c# - 无法使用 Visual Studio 2012 RTM 在 Silverlight 5 项目中添加 XAML 断点

> ID：13100124
> 
> 赞同：1
> 
> 时间：2012-10-27T12:19:53.623
> 
> 标签：c#, silverlight, debugging, xaml, visual-studio-2012

所以问题是当我尝试使用绑定标记扩展设置断点时，我收到错误消息，告诉我它无法在此位置设置断点。

**视觉工作室**

```
Microsoft Visual Studio Ultimate 2012
Version 11.0.50727.1 RTMREL
Microsoft .NET Framework
Version 4.5.50709
Installed Version: Ultimate 
```

**平台设置**

![乙](../Images/9cdf469051e7a1d59a121ca631233303.png)

除 Silverlight 之外的所有平台目标都是 x86（选择框锁定在那里）

调试信息到处都设置为完整。

**调试设置** ![在此处输入图像描述](../Images/02babc432f3b9b3650fc3035fa3cf26e.png)

清理并重建解决方案，没有错误。

转到 Binding 按 F9 或 Debug->Toggle breakpoint 并查看：

![在此处输入图像描述](../Images/a247c52f2cbef3343bca527322277694.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T13:17:46.663

当我遇到这个错误时，我通常可以通过执行以下操作来解决它：

*   确保启用 Silverlight 调试：`Project properties -> Web -> Debuggers -> Activate the` **Silverlight** `CheckBox.`

*   使用**Internet Explorer 进行调试**。虽然*它可能*适用于其他浏览器，但我经常遇到一些奇怪的问题，比如断点设置不正确。

最重要的：

*   **清除 IE 浏览器缓存**。浏览器很可能缓存了旧版本的 Silverlight 应用程序，并且由于某种原因没有使用它的最新版本。

*   如果这对您有用，您还可以考虑将临时 Internet 文件的缓存配置为“从不”，以确保 IE 始终使用最新版本的 SL 应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T12:03:13.417

您应该提供更多详细信息以获得准确的解决方案。根据经验，您应该尝试：

1 - 检查配置管理器并断言所有项目都在为调试而构建，并针对 x86。（x64 有一些调试限制）。

2 - 在项目属性页面 > 构建 > 高级中，断言调试信息设置为完整。

3 - 清理并重建您的解决方案。（在 ASP.NET 上为我工作）。

另外，当我无法解决这个问题时，我使用了一种解决方法；为 DataBind 事件创建一个事件处理程序，并在那里中断代码。然后踏入。最终，您将进入 xaml 文件。

如果有帮助，请标记答案。谢谢。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T12:06:40.677

如果我通过选择 Internet Explorer 作为要运行的浏览器来修复它。然后在它运行时设置绑定reakpoint。从那时起，它运行良好。

# url - onload 主页更改 iframe url

> ID：13100126
> 
> 赞同：0
> 
> 时间：2012-10-27T12:20:16.550
> 
> 标签：url, iframe, onload

在我的主页上，我有这个：

```
<a href="http://mypage.com/myurl" target="iframename">click here</a> 
```

它工作正常，更改 iframe 中的 url。我怎样才能在主页上加载这个，而不必点击链接“点击这里”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T12:39:20.610

将以下内容放在主页面正文元素的 onload 事件中：

```
<body onload="document.getElementById('iframename').src='http://mypage.com/myurl'"> 
```

**更新：**
根据评论中发布的代码，请尝试以下操作：

```
<body onload="document.getElementByName('hellaspanorama_iframe').src='http://hellaspanorama.eu/000.html?startpano=images%2F12'"> 
```

# biztalk - 适配器“HTTP”在接收位置“Receive_AS2”上使用 URI“/Contoso/BTSHTTPReceive.dll”接收的消息被挂起

> ID：13100127
> 
> 赞同：0
> 
> 时间：2012-10-27T12:20:20.593
> 
> 标签：biztalk, biztalk-2010, edi

我正在使用异步 MDN 开发基于 AS2 的 EDI 演示，但在执行 Sender.exe 时收到此错误，此错误显示在事件查看器中...

> 适配器“HTTP”在接收位置“Receive_AS2”上使用 URI“/Contoso/BTSHTTPReceive.dll”接收的消息被挂起。错误详细信息：接收管道“Microsoft.BizTalk.EdiInt.DefaultPipelines.AS2EdiReceive, Microsoft.BizTalk.Edi.EdiIntPipelines, Version=3.0.1.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35”的输出消息路由失败，因为没有订阅编排或发送端口。
> 
> 挂起消息的序号为 3。
> 
> 消息 ID：{D81813E2-9057-41CD-8A44-1528AEF85476}
> 
> 实例 ID：{2B08DCAF-3D26-4BFC-AB04-8282891AA399}

我不知道出了什么问题，我按照 MSDN 教程逐行执行，但执行不正确....

有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T12:53:45.467

Ben，'...由于没有订阅编排或发送端口而导致路由失败'这行是这里的关键。您需要有一个发送端口或编排订阅（即侦听）接收到的消息。

不知道您的特定应用程序，我建议您要么没有订阅的发送端口或编排，要么它们没有启动。

[这个 MSDN 论坛帖子](http://social.msdn.microsoft.com/Forums/en/biztalkediandas2/thread/45835d2c-d325-4446-b129-dfa5df261492)也可能会有所帮助。

# bash - 如何使守护进程 --stop 阻塞直到底层进程死亡？

> ID：13100128
> 
> 赞同：1
> 
> 时间：2012-10-27T12:20:39.037
> 
> 标签：bash, signals, daemon

`daemon`我有一个使用命令（RHEL 6.2）守护进程的java进程。我正在使用以下行来启动该过程，并使用以下行来停止它：

```
daemon --command "/opt/my-service" --respawn --name=my-service --verbose
daemon --stop --name=my-service --verbose 
```

在我尝试使用停止/启动方法重新启动我的过程之前，一切正常：

```
daemon --stop --name=my-service --verbose
daemon --command "/opt/my-service" --respawn --name=my-service --verbose 
```

如果在执行上述命令之前进程正在运行，则现有进程将停止但不会创建新进程。相反，以下行将记录到`/var/log/messages`：

> `Oct 27 07:59:46 myhostname my-service: my-service: fatal: failed to become a daemon: Resource temporarily unavailable`

据我了解，这意味着我们试图获取 pid 文件的锁，但另一个进程正在持有它的锁。或者换句话说：原始进程仍在运行。

有趣的是，它无法通过以下命令复制：

```
daemon --command "sleep 30s" --respawn --name=sleeper --verbose
daemon --stop --name=sleeper --verbose
daemon --command "sleep 30s" --respawn --name=sleeper --verbose 
```

那么在我的过程中一定有一些东西会导致/利用`--stop`.

如何进行`--stop`阻塞？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T17:14:30.277

这可能会有所帮助：

```
while true; do
  daemon --name=my-service --running --verbose | grep not
  [ $? -eq 0 ] && exit
  sleep 1
done 
```

描述为 p 代码：forever { 检查是否`daemon --name=my-service --running --verbose`返回包含单词的东西，`not` 如果是，`exit` 否则`sleep a second` }

# android - 如何在 AndEngine 中使用方向传感器

> ID：13100134
> 
> 赞同：0
> 
> 时间：2012-10-27T12:21:43.947
> 
> 标签：android, orientation, andengine

我正在使用 AndEngine 开发游戏。我想根据我设备的当前方位角绘制一个精灵。我该怎么做？
对不起，我的英语不好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T13:23:30.307

简而言之，您需要：

*   让您的类从***BaseGameActivity***派生并实现***IOrientationListener***接口（即覆盖***onOrientationChanged()***方法）
*   在初始化过程结束时，调用 mEngine 的***enableOrientationSensor()***
*   您将从***onOrientationChanged()***的 OrientatonData 参数接收方向数据，通常会使用`getRoll()`，但根据游戏手势的复杂性，`getPitch()`和`getYaw`会给您其他方向。
*   如果需要，您可以像其他输入传感器一样更改方向传感器的设置（例如，使其刷新频率更高或更低，精度更高或更低等）

试探性地，[**AugmentedRealityHorizo​​nExample**](http://code.google.com/p/andengineexamples/source/browse/src/org/anddev/andengine/examples/AugmentedRealityHorizonExample.java?r=9362dff04f9e65f6aecbe2501cc65899f615189c)源代码向您展示了这一切是如何组合在一起的，尽管此示例可能比您的需要复杂一些，因为它使用`BaseAugmentedRealityGameActivity`.

# c# - 更新 CSV 文件 C# 中的一列

> ID：13100139
> 
> 赞同：2
> 
> 时间：2012-10-27T12:22:28.740
> 
> 标签：c#, asp.net, csv

我想根据 CSV 文件中数据库的条件更新一列（第三列）。想要删除 100，并将其替换为 ,，对于 CSV 文件中具有 Dept 1500 的员工

数据库表：

```
EmpID DeptID

100 1500

101 1300

102 1500 
```

CSV 文件如下图所示：

```
EmpID,EmpName,Score,Grade1,Grade2,Grade3
100,emp1,100,A1,A3
101,emp2,250,A1,A5,A2
102,emp3,100,A1 
```

结果应该是这样的：

```
100,emp1,,A1,A3
101,emp2,250,A1,A5,A2
102,emp3,,A1 
```

首先，我无法替换第三列中的值，请参见下面的代码：

```
string file1 = @"F:\test.csv"; string[] lines = System.IO.File.ReadAllLines(file1);
System.IO.StreamWriter sw = new System.IO.StreamWriter(file1);    
foreach(string s in lines) { 
    sw.WriteLine(s.Replace("100", ""));    
}    
sw.Close(); 
```

如果我在 foreach 循环中给出以下行：

```
sw.WriteLine(Regex.Replace(s, s.Split(',')[2], m => s.Split(',')[2].ToString().Replace("100", ""))); 
```

它将所有值从 100 替换为空字符串。

你能告诉我如何替换第三列中的值吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T12:40:33.230

```
var lines = new string[10];
var splitLines = lines.Select(l => l.Split(','));
foreach (var splitLine in splitLines)
{
    if (splitLine[2] == "100")
    {
        splitLine[2] = "0";
    }
    var line = string.Join(",", splitLine);

    // And then do what you wish with the line.
} 
```

# java - Java Math.cos(Math.toRadians( )) 返回奇怪的值

> ID：13100144
> 
> 赞同：0
> 
> 时间：2012-10-27T12:23:11.140
> 
> 标签：java, math, angle, trigonometry

我的`Math.cos()`方法有点问题。我知道，我必须在使用之前将角度转换为弧度`Math.cos()`。但如果我这样做：

```
System.out.println(Math.cos(Math.toRadians(90)); 
```

它输出：6.123233995736766E-17

`Math.sin()`运作良好。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-27T12:34:52.353

从三角函数：

```
sin x ~= x, for small values of x
sin x = cos x+pi/2 
```

因为 pi/2 不能在 IEEE-754 浮点中精确表示，这意味着它必须由某个值 x 表示，即它由 pi/2 +- x 表示，其中 x < 中的最低有效位浮点系统。在这种情况下是 2^-53 = 1.1102e-16。

在这种特殊情况下，x ~= 6.123233995736766E-17，大约是最大误差的 55%。所以，这是一个相当不错的结果......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-27T12:28:35.907

请参阅 Javadoc。“从度数到弧度的转换通常是不精确的。”

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-27T12:26:58.933

该值非常接近正确结果。将度数转换为弧度的浮点运算似乎失去了精度。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-27T14:36:55.210

暂时站在肥皂盒上，我认为人们对[准确与精确](http://www.mathsisfun.com/accuracy-precision.html)的概念感到困惑。这是否像某些人所说的那样是一个问题？这是个问题吗？一个错误？或者它是浮点运算的预期行为？

90 度是一个可以完美表示为整数的数字，即使是双精度数。但是 pi/2 弧度是一个没有精确表示的实数，因此表示会稍微不准确。损失在于准确性。事实是，这是预期的行为。我们永远不应该相信结果中最不重要的部分。

接下来，当我们计算三角函数的值时，可能会有额外的精度损失。我们并没有得到我们知道在象征意义上是真实的结果。因此 sin(pi/3) 可能不完全是 sqrt(3)/2，但无论如何我们不能完全表示 sqrt(3)/2。所有这些都是意料之中的，并且是应该由好的代码处理的行为，而不是信任这些数字的 LSB。

# joomla - 包含 JHTMLString 类的正确方法？

> ID：13100147
> 
> 赞同：0
> 
> 时间：2012-10-27T12:23:50.103
> 
> 标签：joomla, joomla2.5, joomla1.7

在 Joomla 2.5 中包含类 JHTMLString 的正确方法是什么？

```
jimport('joomla.html.html.string'); 
```

和

```
jimport('joomla.html.string'); 
```

不起作用。我设法包含此类的唯一方法是通过：

```
JLoader::register('JHTMLString'), pathtotheclass); 
```

这可能是一个错误还是我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T17:03:33.383

似乎您以唯一，*至少 atm*正确的方式加载它：

[http://docs.joomla.org/API16:JHtmlString](http://docs.joomla.org/API16:JHtmlString)

因为正常的方式：

[http://docs.joomla.org/JHtmlString/1.6](http://docs.joomla.org/JHtmlString/1.6)

好像没用，我测试过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-12T13:56:29.513

有点晚了，但我在 Joomla 2.5 上遇到了同样的问题，所以我不得不这样称呼它

```
JHtml::_('string.truncate', $text, 200); 
```

# javascript - 如何计算 SVG 转换的旋转/缩放枢轴坐标（我使用的是 Raphael.js）？

> ID：13100149
> 
> 赞同：4
> 
> 时间：2012-10-27T12:24:35.037
> 
> 标签：javascript, svg, raphael

我很难理解如何使用*Raphael.js 计算*SVG 转换的旋转/缩放枢轴（例如旋转点）的坐标。简而言之，如果您应用诸如之类`image.transform("S1.5R45")`的变换，则这些变换是相对于默认旋转和缩放轴心应用的，我不确定如何计算。

举例来说，我整理了一个小提琴（[jsfiddle.net/GVEqf/](http://jsfiddle.net/GVEqf/)），其目的是在两个视口中具有完全相同的输出，以便对图像对象进行几次转换。在第一个视口中，我没有指定旋转点，但在第二个视口中我指定了。但是，我无法得到相同的结果。我需要输入第二个视口的旋转坐标，以便输出与第一种情况相同。

请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-27T18:28:08.057

如果未指定，则枢轴是元素的中心。在这里，您必须注意已应用于图像的位置以及将要完成的缩放。由于在这种情况下您的缩放是相对于图像的左上角的，我们可以将中心坐标乘以它。

```
// Compute rotation pivot coordinates
var scaling = 1.5;
rx = (x + (img_width / 2)) * scaling;
ry = (y + (img_height / 2)) * scaling;

// Apply transformations
image1.transform("S1.5,1.5,0,0R45");
image2.transform("S1.5,1.5,0,0R45,"+rx+","+ry); 
```

[http://jsfiddle.net/TYCJ7/](http://jsfiddle.net/TYCJ7/)

# iphone - 如何让 iPhone Share Sheet 变黑？

> ID：13100150
> 
> 赞同：0
> 
> 时间：2012-10-27T12:24:39.003
> 
> 标签：iphone, xcode, action

嗨，谁能告诉我如何使 iOS 6 中的共享表变黑？我知道如何使操作表变黑。我将此代码用于操作表：

```
[actionsheetshare setActionSheetStyle:(UIActionSheetStyleBlackTranslucent)]; 
```

![黑色半透明操作表](../Images/1f6e2281d3066b9a8efbfffe201f6926.png)

[编辑] ![默认](../Images/c6debd9b3cac79bbd4e03de3363c497d.png)

默认情况下看起来也是如此

这是我使用的代码：`NSString* someText = @""; NSArray* dataToShare = @[someText]; // ...or whatever pieces of data you want to share. UIActivityViewController* activityViewController = [[UIActivityViewController alloc] initWithActivityItems:@[someText] applicationActivities:nil]; [self presentViewController:activityViewController animated:YES completion:^{}];`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T15:41:52.200

您需要在 Info.plist 中将 UIStatusBarHidden 设置为“NO”。如果您将此属性设置为“YES”，则 UIActivityViewController 始终显示为灰色。

我相信这是一个错误，我已经在 Radar 上提交了它（问题 #12682274）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T14:26:47.890

你写了什么代码，我只有以下几行..显示黑色半透明，使用这个检查..

```
NSArray* arr = [[NSArray alloc] initWithObjects:[NSURL URLWithString:@"http://www.google.com"],@"Hello Guys", nil];
UIActivityViewController* activity = [[UIActivityViewController alloc] initWithActivityItems:arr applicationActivities:nil];
[self presentViewController:activity animated:YES completion:nil]; 
```

整个视图是带有集合视图的简单 UIView，您可以使用它的子视图如下所示进行修改

```
activity.view.subviews 
```

# scheme - 球拍是否支持内部“定义”？

> ID：13100160
> 
> 赞同：3
> 
> 时间：2012-10-27T12:25:35.227
> 
> 标签：scheme, racket, sicp

我是函数式语言的新手，我正在使用 Racket 进行 SICP 编程作业。

下面是一段代码，Racket`define: expected only one expression for the function body, but found 5 extra parts`在第 5 行 ( `(define (y k)`) 中告诉我：

```
(define (simpson f a b n)

 (define h (/ (- b a) n))

 (define (y k)
  (f (+ a (* k h))))

 (define (factor k)
  (cond ((or (= k 0) (= k n))
         1)
   ((odd? k)
    4)
   (else
    2)))

 (define (term k)
  (* (factor k)
   (y k)))

 (define (next k)
  (+ k 1))

(if (not (even? n))
 (error "n can't be odd")
 (* (/ h 3)
  (sum term (exact->inexact a) next n)))) 
```

我猜这个问题与语言设置有关，但我已经使用了“高级”选项。

有人知道如何正确配置 Racket，还是不支持内部“定义”？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-27T12:49:47.393

确实，正如您所说：`define`高级语言不支持 internal 。对于 SICP 练习，我被告知最好使用该`neil/sicp`软件包：[此处详细介绍了使用说明](http://planet.racket-lang.org/package-source/neil/sicp.plt/1/17/planet-docs/sicp/index.html#%28part._installation%29)。

但是，即使是标准的 Racket 语言 ( ) 也可以毫无问题地`#lang racket`支持 internal s。`define`

# python - 有没有更好的方法将此 Python/Django 代码格式化为有效的 PEP8？

> ID：13100163
> 
> 赞同：2
> 
> 时间：2012-10-27T12:26:11.307
> 
> 标签：python, django, pep8

我有两种方式编写的代码，我发现它们都有缺陷。有没有另一种方法来写这个，或者一种方法比另一种更“正确”？

```
def functionOne(subscriber):
    try:
        results = MyModelObject.objects.filter(
            project__id=1,
            status=MyModelObject.STATUS.accepted,
            subscriber=subscriber).values_list(
                'project_id',
                flat=True).order_by('-created_on')
    except:
        pass 
```

```
def functionOne(subscriber):
    try:
        results = MyModelObject.objects.filter(
            project__id=1,
            status=MyModelObject.STATUS.accepted,
            subscriber=subscriber)
        results = results.values_list('project_id', flat=True)
        results = results.order_by('-created_on')
    except:
        pass 
```

这是有效的代码，这不是正确的代码，我撕掉了一段类似的代码来给出 objects.filter 部分的示例。请不要浪费时间评论代码的其他部分。我把 try/except 放在那里强制缩进将某些元素推到新行（80列）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T12:27:51.490

我会这样做：

```
def functionOne(subscriber):
    try:
        results = MyModelObject.objects.filter(
            project__id=1,
            status=MyModelObject.STATUS.accepted,
            subscriber=subscriber
        ).values_list(
           'project_id',
           flat=True
        ).order_by(
            '-created_on'
        )
    except:
        pass 
```

使用缩进使层次结构更具可读性。但是，这段代码并不是特别好。直接在视图中使用这样的代码应该被认为是一种反模式。对于此类重复代码， Model `Manager`s 可能是更好的选择。

您可能想阅读[http://dabapps.com/blog/higher-level-query-api-django-orm/](http://dabapps.com/blog/higher-level-query-api-django-orm/)

# java - 需求 `T 扩展 Comparable ` 仅适用于某些方法

> ID：13100165
> 
> 赞同：2
> 
> 时间：2012-10-27T12:26:27.377
> 
> 标签：java, generics

我正在尝试用 Java 编写一个泛型类。该类中的一些方法需要`T extends Comparable<T>`. 我怎样才能使它`T`只有在使用其中一种方法时才需要具有可比性？或者也许还有其他方式我应该组织我的课程？

这是我要实现的类。我计划在可比较和不可比较类型上使用它和数组。

```
// I know Java has its own containers, but this
// is homework and I'm not allowed to use them
class Array<T>
{
    // Some methods that pose no
    // special restrictions on T

    // These require that T be comparable
    public Array<T> union(...) {...}
    public Array<T> intersect(...) {...}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T12:34:06.660

您可以隐藏`T`方法的类型。`T`of和这里`Test`的 of 不一样。`T``CompareMethod`

```
public static class Test<T> {
    <T extends Comparable<T>> void compareMethod(T t, Class<T> classt) {
    }
    void normalMethod(T t) {
    }
} 
```

现在的例子

```
 Test<String> test = new Test<String>();//Comparable class
    test.compareMethod("",String.class);//works fine
    Test<Random> tes1t = new Test<Random>();//Non Comparable class
    tes1t.compareMethod(new Random(),Random.class);//Compilation error here 
    tes1t.normalMethod(new Random());//Works fine
    new Test<Random>().compareMethod("",String.class);// Not a good but can be valid
new Test<String>().compareMethod(new Random(),Random.class);//Compilation error here 
```

**更新：**

在被这个解决方案诅咒之后，我在 java API 中进行了一些搜索，并且这种做法得到了`toArray()`遵循

```
ArrayList<String> string = new ArrayList<String>();
string.toArray(new Integer[5]);<--Illegal however <T> is hide by toArray method 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T12:32:45.210

编辑：看起来这毕竟是可能的（见 AmitD 的帖子）。但无论如何，其他可能的解决方案是

1.  将需要可比较的方法重构为子类
2.  只需在相关方法中使用强制转换，这意味着该部分只会在运行时检查。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-27T12:41:25.887

通过常规方法（例如使用可比性）是不可能的。

如果您分享确切的要求会更好。

如果在 ArrayList/Arrays 中排序是您的目标，那么比较不可比较的类是没有用的。排序只能在相同或子类型的对象中进行。

但是，如果您要使用 compare 来检查对象是否相等，那么我建议您覆盖 equals(Object O) 方法。

# python - 在mysql中存储倒排索引

> ID：13100166
> 
> 赞同：1
> 
> 时间：2012-10-27T12:26:27.343
> 
> 标签：python, mysql, database, database-design, inverted-index

我正在努力创建一个非常大的倒排索引术语。你会建议什么方法？

**第一的**

```
termId - > docId
  a        doc2[locations],doc5[locations],doc12[locations] 
  b        doc5[locations],doc7[locations],doc4[locations] 
```

**第二**

```
termId - > docId
  a        doc2[locations]
  a        doc5[locations]
  a        doc12[locations]
  b        doc5[locations]
  b        doc7[locations] 
  b        doc4[locations] 
```

**ps** Lucene 不是一个选项

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T12:30:46.380

正确的表格设计取决于您计划如何使用数据。如果您打算按原样使用字符串`"doc2[locations],doc5[locations],doc12[locations]"` *——*无需任何进一步的后处理，那么您的`First`设计就可以了。

但是，如果 - 正如您的问题所暗示的那样 - 您有时可能希望将`doc2[locations]`,`doc5[locations]`等视为单独的实体，那么您绝对应该使用您的`Second`设计。

以下是一些用例，说明了为什么`Second`设计更好：

*   如果你使用`First`并询问所有文档，`termID = a`那么你会得到一个字符串 `doc2[locations],doc5[locations],doc12[locations]`，然后你必须拆分它。

    如果您使用 Second，您会将每个文档作为单独的行。没有分裂！

    `Second`结构更方便。

*   或者，假设在某些时候发生了`doc5[locations]`变化，您需要更新您的表格。如果您使用该`First`设计，则必须使用一些相对复杂的[MySQL 字符串函数](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_substring)来查找和替换包含它的所有行中的子字符串。（请注意，MySQL 没有内置[正则表达式替换。）](https://stackoverflow.com/questions/986826/how-to-do-a-regular-expression-replace-in-mysql)

    如果您使用该`Second`设计，更新很容易：

    ```
    UPDATE table SET docId = "newdoc5[locations]" where docId = "doc5[locations]" 
    ```

# .htaccess - 仅允许域用于具有 hatccess 的某些扩展

> ID：13100171
> 
> 赞同：0
> 
> 时间：2012-10-27T12:27:11.473
> 
> 标签：.htaccess

我有一个域 abc.com

带有子域

```
abc.com
www.abc.com
img.abc.com 
```

都指向我服务器上的同一个文件夹。

由于我打算将 img.abc.com 用作 cdn，因此需要防止 img.abc.com/pqr.html 与 www.abc.com/pqr.html 重复。

IE

```
abc.com/* should redirect to www.abc.com/*
img.abc.com/*.jpg/gif/png should be allowed
[img.abc.com/*.other extension] should be redirected to [www.abc.com/*.other extension] 
```

可能包含哪些 htaccess 规则？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T13:58:18.683

将这些规则添加到文档根目录中的 htaccess 文件中：

```
RewriteEngine On

# abc.com/* should redirect to www.abc.com/*
RewriteCond %{HTTP_HOST} ^abc\.com$ [NC]
RewriteRule ^(.*)$ http://www.abc.com/$1 [L,R]

# img.abc.com/*.jpg/gif/png should be allowed
RewriteCond %{HTTP_HOST} ^img\.abc\.com$ [NC]
RewriteRule \.(jpe?g|png|gif)$ - [L,NC]

# [img.abc.com/*.other extension] should be redirected to [www.abc.com/*.other extension]
RewriteCond %{HTTP_HOST} ^img\.abc\.com$ [NC]
RewriteRule ^(.*)$ http://www.abc.com/$1 [L,R] 
```

# ravendb - RavenDb Management Studio 未在浏览器中打开

> ID：13100172
> 
> 赞同：0
> 
> 时间：2012-10-27T12:27:27.590
> 
> 标签：ravendb

存储初始化：

```
private static IDocumentStore CreateDocumentStore()
    {
        var store = (DocumentStore) new EmbeddableDocumentStore
                                        {
                                            ConnectionStringName = "RavenDb",
                                        };

        NonAdminHttp.EnsureCanListenToWhenInNonAdminContext(8080);

        store.Initialize();

        store.Conventions.MaxNumberOfRequestsPerSession = 500;

        return store;
    } 
```

配置：

```
</configSections>
<appSettings>
    <add key="Raven/Port" value="8080"/>
    <add key="Raven/DataDir" value="~\@App_Data"/>
    <add key="Raven/AnonymousAccess" value="Get" />
</appSettings>
<connectionStrings>
    <clear/>
    <add name="RavenDb" connectionString="DataDir=~\@App_Data\Raven" />
</connectionStrings> 
```

应用程序正常工作，乌鸦保留了一些数据，我就是无法进入管理工作室

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T12:56:53.130

默认情况下，工作室不提供服务。在构建存储实例时，您必须启用 RavenDB 的嵌入式 Web 服务器：

```
var store = (DocumentStore) new EmbeddableDocumentStore
    {
        ConnectionStringName = "RavenDb",
        UseEmbeddedHttpServer = true
    }; 
```

# php - 单个帖子下一个和上一个链接

> ID：13100177
> 
> 赞同：0
> 
> 时间：2012-10-27T12:28:03.307
> 
> 标签：php, wordpress

（我在别处问过这个问题，但没有得到任何答复）

显示单个帖子时，我有上一个/下一个链接。这可行，但我希望“下一个”链接在显示最后一个帖子时指向第一个帖子，而“上一个”链接在显示第一个帖子时指向最新的帖子。根据文档 get_boundary_post() 应该能够获得第一个或最后一个帖子。这是我的 single.php 中的内容：

```
<?php
    $prev_post = get_adjacent_post( true, '', true );
    $next_post = get_adjacent_post( true, '', false );
    if($next_post == '')
    {
        $next_post = get_boundary_post();
    }
    if($prev_post == '')
    {
        $prev_post = get_boundary_post(); //???
    }
    $prev_post_id = $prev_post->ID;
    $next_post_id = $next_post->ID;   

<a href="<?php echo get_permalink($prev_post); ?>">previous</a>
<a href="<?php echo get_permalink($next_post); ?>">next</a>

?> 
```

获取最后一篇文章的第一篇文章链接有效，但获取第一篇文章的最新文章链接无效。我不确定如何调用 get_boundary_post() 来获取最新帖子，我尝试将其“开始”参数设置为 false（默认为 true），但链接仍指向第一篇帖子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T13:15:30.210

get_boundary_post 接受三个参数：

*   $in_same_cat（默认为假）
*   $excluded_categories (默认 '')
*   $start（默认为真）

尝试

```
get_boundary_post(false, '', false); 
```

获取最新帖子。

# java - Android：BroadcastReceiver 或 Wakefulintentservice 应该以 finish() 结尾吗？

> ID：13100181
> 
> 赞同：0
> 
> 时间：2012-10-27T12:28:27.370
> 
> 标签：java, android, broadcastreceiver, commonsware-cwac

在我的应用程序中，我使用警报管理器设置警报，该警报触发广播接收器，该接收器启动 Commonsware 的 Wakefulintent 服务，该服务会下载一些数据。

我的问题是：是否应该以该方法结束或两者`BroadcastReceiver`或`WakefulIntentService`两者都不以该`finish()`方法结束？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T12:35:53.933

`finish()`用于停止活动。服务和广播接收器有自己的生命周期，它们的处理方式不同。

# iphone - 钛和PhoneGap

> ID：13100184
> 
> 赞同：0
> 
> 时间：2012-10-27T12:29:00.967
> 
> 标签：iphone, windows, cordova, android-fragments, titanium

我是 Titanium 和 PhoneGap 的新手，稍微分析一下这两者是不可能用带有 Windows 的 PC 开发 iPhone 的，对吗？好吧，我的意思是在 PhoneGap 中，最新版本只能在不发布的情况下进行开发。我想知道这是否真的正确，以及是否有一种方法可以将这两种技术（Titanium 和 PhoneGap）片段中的一种应用程序作为 Android 和 iPhone / iPad 的原生 Android 设备的视图。改进问题，让一个应用程序来查看设备可以适应智能手机和平板电脑，以便更好地使用屏幕？如果是，有一些示例代码和/或研究来源吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T14:29:51.723

PhoneGap 提供了一个名为[PhoneGap build](https://build.phonegap.com/)的产品，该产品刚刚推出测试版。它允许您在没有 Mac 的情况下在云中构建您的应用程序。

您可能仍需要 Mac 来生成证书（p12 捆绑包），或者您可以使用[Mobundler 之](http://mobundler.com)类的服务。

对于 Titanium，最近一项名为[Foundry22](http://foundry22.com)的服务可让您在没有 Mac 或本地安装任何本机 SDK 的情况下构建应用程序。您只需要[Titanium Studio](http://www.appcelerator.com/platform/titanium-studio/)和托管的 Git 存储库。

# c - 使用 memmove 时出现总线错误

> ID：13100187
> 
> 赞同：-1
> 
> 时间：2012-10-27T12:29:16.060
> 
> 标签：c, gcc, runtime-error, bus, memmove

> **可能重复：**
> [总线错误故障排除](https://stackoverflow.com/questions/7458854/bus-error-troubleshooting)

要从字符串中删除重复项，这是我编写的程序：

```
#include<stdio.h>
#include<string.h>
#include<stdlib.h>

void remDup(char str[])
{
    int i=0,len;
int arr[256]={[0 ... 255] = 0};

while(str[i]!='\0')
{   
    len=strlen(str);
    if(arr[str[i]]==1)
    {
        memmove(str+i,str+i+1,len);
    }
    else
        arr[str[i]]=1;
    i++;
}

printf("String with Unique Characters:%s\n",str);

}

main()
{
remDup("kjijhgfedcaba");
} 
```

但是运行程序时显示的错误是： Bus error: 10

必须对代码进行哪些更改？提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T12:32:58.347

`"kjijhgfedcaba"`是字符串文字，您不能在 C 中修改字符串文字。

顺便说一句，如果您想将所有`arr`元素初始化为`0`, 而不是 this （这是 GNU 扩展）：

```
int arr[256]={[0 ... 255] = 0}; 
```

你可以简单地这样做：

```
int arr[256]= {0}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T12:32:42.197

尝试`len-i`移动内存的大小。你肯定会移动不属于你的记忆。（也就是说，我还没有真正阅读过代码）。

# objective-c - 获取播放列表 MPMediaQuery

> ID：13100193
> 
> 赞同：0
> 
> 时间：2012-10-27T12:30:31.067
> 
> 标签：objective-c

我正在尝试获取 iphone 播放列表中歌曲的标题。

我努力了：

```
MPMediaQuery *playlistsQuery = [MPMediaQuery songsQuery];
NSArray *list = [[NSArray alloc] initWithArray:[playlistsQuery colkections]; 
MPMediaItem *song = [list objectAtIndex:position];
NSString *title = [song valieForProperty:MPMediaItemPropertyTitle];
NSLog(@"%@", title); 
```

而这个称号又回来了`"(null)"`。该数组返回 50 个 itens，即我 iphone 中音乐的数量

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-20T16:13:48.913

可能是，这对你有用。这里的“播放列表”是 NSArray。

```
playlistsQuery = [MPMediaQuery playlistsQuery];
    playlists = [playlistsQuery collections];
    NSArray *playlistsss = [myPlaylistsQuery collections];
    for (MPMediaPlaylist *playlist in playlistsss) {
        NSLog (@"%@", [playlist valueForProperty: MPMediaPlaylistPropertyName]);
        NSArray *songs = [playlist items];

        for (MPMediaItem *song in songs) {

            NSString *songTitle =[song valueForProperty: MPMediaItemPropertyTitle];
            NSString *str_artistName =[song valueForProperty: MPMediaItemPropertyArtist];
            NSLog(@"teh artist name is --->%@",str_artistName);
            playlists=[song valueForProperty: MPMediaItemPropertyTitle];
            NSLog(@"the songs titles---->%@",array_playList);

        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T08:58:57.677

它应该`valueForProperty`代替`valieForProperty`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T13:57:24.807

Apple 有一个名为[AddMusic](https://developer.apple.com/library/ios/#samplecode/AddMusic/Introduction/Intro.html#//apple_ref/doc/uid/DTS40008845-Intro-DontLinkElementID_2)的示例代码，演示了 MPMediaPlayer 框架。查看此示例代码，可能会帮助您解决问题。

# android - java错误：无法启动活动ComponentInfo：java.lang.NullPointerException

> ID：13100195
> 
> 赞同：0
> 
> 时间：2012-10-27T12:31:25.303
> 
> 标签：android, greendroid

我一直面临这种关于**java.lng.NullPointerExeption**的错误。有人知道如何解决吗？

main.java 包 com.example.shoppingassistantnew；

```
import greendroid.app.GDActivity;
import greendroid.widget.ActionBarItem;
import greendroid.widget.ActionBarItem.Type;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;
import android.view.MenuItem;
import android.support.v4.app.NavUtils;

public class main extends GDActivity {

    private static final int EXPAND = 0;

    private static final int ADD = 1;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
       setActionBarContentView(R.layout.shoppinglist);

        initActionBar();
    }
    private void initActionBar(){

        addActionBarItem(Type.List,EXPAND);
        addActionBarItem(Type.Add,ADD);

    }

     @Override
        public boolean onHandleActionBarItemClick(ActionBarItem item, int position) {
            // TODO Auto-generated method stub
         switch(item.getItemId()){
         case ADD:
             Intent intent=new Intent(main.this,AddShoppingList.class);
             startActivity(intent);

         }
            return super.onHandleActionBarItemClick(item, position);
        }

     static final class ProductData{

            String barcode;
            String format;
        }
} 
```

AddShoppingList.java

```
package com.example.shoppingassistantnew;

import com.cyrilmottier.android.greendroid.R;
import com.example.shoppingassistantnew.main.ProductData;

import android.app.ActionBar.LayoutParams;
import android.app.Activity;
import android.app.AlertDialog;
import android.app.Dialog;
import android.content.Context;
import android.content.DialogInterface;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.WindowManager;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ListView;
import greendroid.app.GDActivity;

public class AddShoppingList extends Activity implements OnClickListener {
    private static final ProductData mProductData = new ProductData();
    private Button mSaveBttn;
    EditText mBarcodeEdit;
    EditText mFormatEdit;
    ProductDatabase mProductDb;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.addshoppinglist);
        mBarcodeEdit = (EditText) findViewById(R.id.shoppingListNameEdit);
        mFormatEdit = (EditText) findViewById(R.id.shoppingDateEdit);

        mSaveBttn.setOnClickListener(this);

    }

    private void showInfoDialog(Context context, String title,
            String information) {
        new AlertDialog.Builder(context).setMessage(information)
                .setTitle(title)
                .setPositiveButton("OK", new DialogInterface.OnClickListener() {

                    public void onClick(DialogInterface dialog, int which) {
                        dialog.dismiss();

                    }
                }).show();
    }

    public void onClick(View v) {
        // TODO Auto-generated method stub

    }

} 
```

产品数据库.java

```
package com.example.shoppingassistantnew;
import com.example.shoppingassistantnew.main.ProductData;
import android.content.ContentValues;
import android.content.Context;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteDatabase.CursorFactory;
import android.database.sqlite.SQLiteOpenHelper;
import android.util.Log;

public class ProductDatabase  {
private static final String PRODUCT_TABLE="products";
private static final String DATABASE_NAME="spot_pay.db";
private static final int DATABASE_VERSION=1;
private SQLiteDatabase db;

private static class ProductDatabaseHelper extends SQLiteOpenHelper {

    private static final String TAG = null;

    public ProductDatabaseHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
        // TODO Auto-generated constructor stub
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        // TODO Auto-generated method stub
        StringBuilder sql=new StringBuilder();

        sql.append("create table ").append(PRODUCT_TABLE)
            .append("(  ")
            .append("   _id integer primary key,")
            .append("   barcode text,")
            .append("   format text,")
          .append(")  ");

        db.execSQL(sql.toString());
          Log.d(TAG, PRODUCT_TABLE + "table created");    
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // TODO Auto-generated method stub
         db.execSQL("drop table if exists " + PRODUCT_TABLE);                    
            onCreate(db);
    }

}

public ProductDatabase(Context context){
     ProductDatabaseHelper helper = new ProductDatabaseHelper(context);
  db = helper.getWritableDatabase();

}
public boolean insert(ProductData product){
    ContentValues vals = new ContentValues();
      vals.put("barcode", product.barcode);
        vals.put("format", product.format);
     return db.insert(PRODUCT_TABLE, null, vals) != -1;
}
} 
```

AndroidManifest.xml

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.shoppingassistantnew"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="7"
        android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
         android:theme="@style/Theme.GDActionBarExample"
            android:name=".GDIntroApp">
        <activity
            android:name=".main"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <activity android:name=".AddShoppingList" android:theme="@style/myDialog"></activity>
    </application>

</manifest> 
```

LOGCAT

```
10-27 10:18:15.545: D/AndroidRuntime(1633): Shutting down VM
10-27 10:18:15.545: W/dalvikvm(1633): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
10-27 10:18:15.555: E/AndroidRuntime(1633): FATAL EXCEPTION: main
10-27 10:18:15.555: E/AndroidRuntime(1633): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.shoppingassistantnew/com.example.shoppingassistantnew.AddShoppingList}: java.lang.NullPointerException
10-27 10:18:15.555: E/AndroidRuntime(1633):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
10-27 10:18:15.555: E/AndroidRuntime(1633):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
10-27 10:18:15.555: E/AndroidRuntime(1633):     at android.app.ActivityThread.access$2300(ActivityThread.java:125)
10-27 10:18:15.555: E/AndroidRuntime(1633):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
10-27 10:18:15.555: E/AndroidRuntime(1633):     at android.os.Handler.dispatchMessage(Handler.java:99)
10-27 10:18:15.555: E/AndroidRuntime(1633):     at android.os.Looper.loop(Looper.java:123)
10-27 10:18:15.555: E/AndroidRuntime(1633):     at android.app.ActivityThread.main(ActivityThread.java:4627)
10-27 10:18:15.555: E/AndroidRuntime(1633):     at java.lang.reflect.Method.invokeNative(Native Method)
10-27 10:18:15.555: E/AndroidRuntime(1633):     at java.lang.reflect.Method.invoke(Method.java:521)
10-27 10:18:15.555: E/AndroidRuntime(1633):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
10-27 10:18:15.555: E/AndroidRuntime(1633):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
10-27 10:18:15.555: E/AndroidRuntime(1633):     at dalvik.system.NativeStart.main(Native Method)
10-27 10:18:15.555: E/AndroidRuntime(1633): Caused by: java.lang.NullPointerException
10-27 10:18:15.555: E/AndroidRuntime(1633):     at com.example.shoppingassistantnew.AddShoppingList.onCreate(AddShoppingList.java:39)
10-27 10:18:15.555: E/AndroidRuntime(1633):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
10-27 10:18:15.555: E/AndroidRuntime(1633):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
10-27 10:18:15.555: E/AndroidRuntime(1633):     ... 11 more
10-27 10:18:17.825: I/Process(1633): Sending signal. PID: 1633 SIG: 9 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T12:33:27.243

首先从`AddShoppingList.java ,` `mSaveBttn is null`xml 给参考，然后使用它

```
 mFormatEdit = (EditText) findViewById(R.id.shoppingDateEdit);

    mSaveBttn =(Button)findViewById(R.id.mSaveBttn);<<<< Give Refrence from xml
    mSaveBttn.setOnClickListener(this);
    ^^^^^^^^^ 
```

# java - 在Java android中制作间隔计时器

> ID：13100196
> 
> 赞同：16
> 
> 时间：2012-10-27T12:31:36.147
> 
> 标签：java, android, timer, intervals

我计划使用计时器创建一个间隔应用程序。它应该只是最基本的，所以当我了解了基础知识后，我将不得不添加更多内容。我想要实现的是选择一个间隔应该持续的分钟数，但是这个间隔应该持续多少次。就像一个持续 1 分钟并持续 8 次的间隔。问题是最好使用哪个计时器？我已经在 Android 倒数计时器上试过了，它似乎可以工作。但是还有其他更好的吗？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-10-27T13:33:20.557

我总是建议使用`Handler`.

它比内置类多一点工作，但我发现它的效率要高得多，而且你可以更好地控制它。

Handler 是一个类，默认情况下将在特定的`Looper`/上处理代码执行`Thread`，它是在其中创建的 Thread ，否则您可以通过将 传递`Looper`给`Handler`构造函数来指定 Handler 执行其代码的位置，例如 -`new Handler(Looper.getMainLooper());`

我推荐 looper 的原因是因为你有更高的控制灵活性，因为它是对方法的稍微降低的抽象`TimerTask`。

通常，它们对于跨线程执行代码非常有用。例如，对于跨线程传输数据很有用。

两个主要用途是：

```
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);

    final Handler h = new Handler();
    h.postDelayed(new Runnable()
    {
        private long time = 0;

        @Override
        public void run()
        {
            // do stuff then
            // can call h again after work!
            time += 1000;
            Log.d("TimerExample", "Going for... " + time);
            h.postDelayed(this, 1000);
        }
    }, 1000); // 1 second delay (takes millis)
} 
```

使用简单！

或者您可以使用减少对象创建的消息。如果您正在考虑高速更新 UI 等 - 这将减少垃圾收集器的压力。

```
class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);

        MyTimers timer = new MyTimers();
        timer.sendEmptyMessage(MyTimers.TIMER_1);
        timer.sendEmptyMessage(MyTimers.TIMER_2);

    }

    public static class MyTimers extends Handler
    {

        public static final int TIMER_1 = 0;
        public static final int TIMER_2 = 1;

        @Override
        public void handleMessage(Message msg)
        {
            switch (msg.what)
            {
                case TIMER_1:
                    // Do something etc.
                    Log.d("TimerExample", "Timer 1");
                    sendEmptyMessageDelayed(TIMER_1, 1000);
                    break;
                case TIMER_2:
                    // Do another time update etc..
                    Log.d("TimerExample", "Timer 2");
                    sendEmptyMessageDelayed(TIMER_2, 1000);
                    break;
                default:
                    removeMessages(TIMER_1);
                    removeMessages(TIMER_2);
                    break;
            }
        }
    }
} 
```

显然这**不是**一个完整的实现，但它应该给你一个良好的开端。

# php - 购物输入行的正则表达式

> ID：13100197
> 
> 赞同：1
> 
> 时间：2012-10-27T12:31:41.627
> 
> 标签：php, regex

我有这样的输入行：

```
1 soccer ball at 10
2 Iphones 4s at 199.99
4 box of candy at 50 
```

我想得到第一个数字，商品本身和价格（我不想要“at”）。

我已经完成了以下正则表达式：

```
/^(\d+)\sat\s(\d+\.?\d*)$/ 
```

但正如你所看到的，我错过了“at”之前的内容。我应该放什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T12:34:27.957

这应该适合你。

`/(\d+)\s+(.+?)\s+at\s+([\d\.,]+)/`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T13:05:36.843

这是我的版本：

```
// double escaped \ as it's supposed to be in PHP
'~(\\d+)\\s+(.+?)\\s+at\\s+(\\d+(?:,\\d+)?(?:\\.\\d+)?)~'
// catches thousands too but stays strict about the order of , and . 
```

*干杯!*

**PS：编码超过 100 万美元的产品可能会失败**:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T12:34:15.003

```
/^(\d+)\s(.+?)\sat\s(\d+\.?\d*)$/ 
```

应该管用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-27T12:35:19.840

[正则表达式演示](http://regex101.com/r/fE7aV8)

在这里你有`(\d+)\s([\w ]+)\sat\s(\d+(?:\.\d+)?)`

正如您在演示中看到的，解释

```
/(\d+)\s([\w ]+)\sat\s(\d+(?:\.\d+)?)/g
1st Capturing group (\d+) 
    \d infinite to 1 times. Digit [0-9] 
\s Whitespace [\t \r\n\f] 
2nd Capturing group ([\w ]+) 
    Char class [\w ] infinite to 1 times. matches one of the following chars: \w 
        \w Word character [a-zA-Z_\d] 
\s Whitespace [\t \r\n\f] 
at Literal `at`
\s Whitespace [\t \r\n\f] 
3rd Capturing group (\d+(?:\.\d+)?) 
    \d infinite to 1 times. Digit [0-9] 
    Group (?:\.\d+) 1 to 0 times. 
        \. Literal `.`
        \d infinite to 1 times. Digit [0-9] 
```

g 修饰符：全局。所有比赛（第一场比赛不返回）

# asp.net-mvc - MVC：使用 Jquery.ajax() 将参数传递给操作

> ID：13100198
> 
> 赞同：2
> 
> 时间：2012-10-27T12:31:41.683
> 
> 标签：asp.net-mvc, jquery, parameter-passing

我很陌生`MVC`。我需要`ajax`使用. 这个我过不去。。`Action``html.Action()`

希望它对其他 MVC 初学者也有帮助..

**HTML：**

```
<%: Html.ActionLink("Add Race", "AddRace", 
        new {eventId = Model.EventId, fleetId=Model.SelectedFleet.ID}, 
        new{@onclick=string.Format("return checkFleetAddedandScroing()")}) %> 
```

**查询：**

```
 function checkFleetAddedandScroing() {
        debugger;
        $.ajax({
            type: "GET",
            url: '<%=Url.Action("CheckFleetExists")%>',
            dataType: "json",
            cache: false,
            success: function (data, textStatus) {
                data = eval("(" + data + ")");
                if (data == true) {
                    return true;
                }
                else {
                    alert("Cannot Add race becasue you have not yet added any fleets and fleet scoring is checked.");
                    return false;
                }
            }, //success
            error: function (req) {

            }
        });           
    } 
```

**行动：**

```
 public JsonResult CheckFleetExists(Guid fleetId )
    {
        bool exists = false;
        try
        {
            exists = !db.Races.Any(r => r.FleetID == fleetId);
        }
        catch
        {
        }
        return Json(exists, JsonRequestBehavior.AllowGet);
    } 
```

我需要传递`fleetid`给`Model.SelectedFleet.ID`. 它在页面上的某个地方使用。但我无法以某种方式使用它..

请建议我在哪里做错了......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-27T15:20:44.167

看起来您正在尝试在单击链接时使用 AJAX 调用控制器操作，并且根据此调用的结果，要么允许用户被重定向到实际`AddRace`操作，要么被提示错误消息。

您的代码的问题是您试图从成功的 AJAX 回调中返回 true/false，这没有任何意义。您需要始终从单击回调中返回 false，并且在成功回调中，根据服务器返回的值，使用该`window.location.href`函数手动重定向。

**HTML：**

```
<%: Html.ActionLink(
    "Add Race", 
    "AddRace", 
    new {
        eventId = Model.EventId, 
        fleetId = Model.SelectedFleet.ID
    }, 
    new {
        data_fleetid = Model.SelectedFleet.ID,
        @class = "addRace"
    }
) %> 
```

**查询：**

```
<script type="text/javascript">
    $(function () {
        $('.addRace').click(function (evt) {
            $.ajax({
                type: 'GET',
                url: '<%= Url.Action("CheckFleetExists") %>',
                cache: false,
                data: { fleetId: $(this).data('fleetid') },
                success: function (data) {
                    if (data.exists) {
                        // the controller action returned true => we can redirect
                        // to the original url:
                        window.location.href = url;
                    }
                    else {
                        alert("Cannot Add race becasue you have not yet added any fleets and fleet scoring is checked.");
                    }
                },
                error: function (req) {

                }
            });

            // we make sure to cancel the default action of the link
            // because we will be sending an AJAX call
            return false;
        });
    });
</script> 
```

**行动：**

```
public ActionResult CheckFleetExists(Guid fleetId)
{
    bool exists = false;
    try
    {
        exists = !db.Races.Any(r => r.FleetID == fleetId);
    }
    catch
    {
    }
    return Json(new { exists = exists }, JsonRequestBehavior.AllowGet);
} 
```

备注：在您的`AddRace`控制器操作中，不要忘记执行与您在`CheckFleetExists`. 用户可以简单地禁用 javascript，AJAX 调用将永远不会完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T12:52:36.613

像这样改变你的动作：

```
 public JsonResult CheckFleetExists(string fleetId)
    {
        var fleetGuid = Guid.Parse(fleetId);
        bool exists = false;
        try
        {
            exists = !db.Races.Any(r => r.FleetID == fleetGuid );
        }
        catch
        {
        }
        return new JsonResult{ Data = exists};
    } 
```

并改变你的 ActionLink ：

```
<%: Html.ActionLink("Add Race", "AddRace", 
    new {eventId = Model.EventId, fleetId=Model.SelectedFleet.ID}, 
    new{onclick=string.Format("return checkFleetAddedandScroing({0})",Model.SelectedFleet.ID)}) %> 
```

你的脚本块可能看起来像这样：

```
function checkFleetAddedandScroing($fleetId) {
        $.ajax({
            type: "POST",
            url: '<%=Url.Action("CheckFleetExists")%>',
            dataType: "json",
            data : { "fleetId" : $fleetId },
            cache: false,
            success: function (data, textStatus) {
                data = eval("(" + data + ")");
                if (data == true) {
                    return true;
                }
                else {
                    alert("Cannot Add race becasue you have not yet added any fleets and fleet scoring is checked.");
                    return false;
                }
            }, //success
            error: function (req) {

            }
        });           
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-28T14:06:47.430

问题在于行动的网址不完整的答案..我用这种方式做到了

```
function checkFleetAddedandScroing() {
       // debugger;
        $.ajax({
            type: "POST",
            url: '<%=Url.Action("CheckFleetExists", new {eventId=Model.EventId})%>',
            dataType: "json",                
            cache: false,
            success: function (data, textStatus) {
                data = eval("(" + data + ")");
                if (data == true) {
                    return true;
                }
                else {
                    alert("Cannot Add race becasue you have not yet added any fleets and fleet scoring is checked.");
                    return false;
                }
            }, //success
            error: function (req) {

            }
        });
    } 
```

# javascript - 鼠标拖动选择多个项目，然后拖放所选项目

> ID：13100200
> 
> 赞同：0
> 
> 时间：2012-10-27T12:31:53.227
> 
> 标签：javascript, jquery, jquery-ui

我有物品清单。

我需要将鼠标拖动到要选择的项目上的功能，然后我需要将选定的多个项目拖放到购物车中。

我尝试了很多来获得它，但我失败了。

我尝试使用 jquery ui 可选择项和可拖动项。我一直在关注一些 stackoverflow 问题的解决方案，但仍然没有任何用处。

（很抱歉，我的代码没有透露，因为其中混合了一些服务器代码）

更新：

看看这个演示（http://jsfiddle.net/PDPZx/）这只是选择多个项目，但我需要拖放选定的项目。

# openam - 如何在 SAML 断言中获取用户名 (OpenAM)

> ID：13100201
> 
> 赞同：2
> 
> 时间：2012-10-27T12:31:55.710
> 
> 标签：openam

这是我来自 OpenAM IDP 的 SAML 断言

```
<saml:Subject>
<saml:NameID Format="urn:oasis:names:tc:SAML:2.0:nameid-format:transient" NameQualifier="http://idp.ntech.com:9090/openam">/81OhgvXhHdM/+STdnPlhgkVJzDo</saml:NameID>     <saml:SubjectConfirmation Method="urn:oasis:names:tc:SAML:2.0:cm:bearer">
<saml:SubjectConfirmationData InResponseTo="FEDE98AB33A4049999504522AB01C664219893A2"  NotOnOrAfter="2012-10-27T10:56:22Z"  Recipient="http://sp.ntech.com/SampleApp/fedletapplication.aspx" /></saml:SubjectConfirmation>
</saml:Subject> 
```

但我需要用户名而不是 NameId，我正在使用 OpenAM。请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T10:44:15.067

由于您使用的是临时 NameID 格式，因此来自 OpenAM 的 NameID 将只包含一个随机字符串。如果您确实需要有关用户的任何信息，那么您需要将 NameID-Format 从瞬态更改为其他内容（可能还使用 OpenAM 中的 NameID 值映射功能），或者您需要将这些额外属性作为一部分发送断言（属性陈述）。为此，您需要在 IdP 上配置属性映射。

# eclipse - Eclipse Juno 安装上的 STS Spring 插件

> ID：13100203
> 
> 赞同：1
> 
> 时间：2012-10-27T12:32:08.397
> 
> 标签：eclipse, spring, plugins

我在 Eclipse Juno 实例上安装 STS 插件时遇到问题。我正在运行带有 64 位 eclipse 和 64 位 java 的 windows 7 64 位。Eclipse 安装在 Program Files 目录之外 我收到的错误消息：

无法在 [http://dist.springsource.com/release/TOOLS/update/e4.2/compositeContent.xml读取存储库](http://dist.springsource.com/release/TOOLS/update/e4.2/compositeContent.xml)

我已经尝试了这里列出的所有内容[https://issuetracker.springsource.com/browse/STS-2890](https://issuetracker.springsource.com/browse/STS-2890)

# c - 用于反转列表的更简单更快的代码？

> ID：13100204
> 
> 赞同：1
> 
> 时间：2012-10-27T12:32:20.857
> 
> 标签：c, algorithm, linked-list

我编写了用于反转包含每个节点中的单词的双向链表的代码，它工作得非常好。我的老师说该算法很难理解，并且可以使整个代码更高效（减少开销和内存消耗）。我可以对代码/逆向算法进行哪些更改？还有没有一种方法可以输入句子而不必提前询问单词的数量？这是代码：

```
#include<stdio.h>
#include<conio.h>
#include<string.h>
typedef struct NODE
{
    char *item;
    struct NODE *next;
    struct NODE *prev;
}NODE;
void Insert(char data[],NODE **List)
{
    NODE *temp,*last;
    last=(*List);
    temp=(NODE*)malloc(sizeof(NODE));
    temp->item=(char*)malloc(strlen(data));
    temp->item=data;
    temp->next=NULL;
    temp->prev=NULL;
    if((*List)->item==NULL)
        (*List)=temp;
    else
    {
        while(last->next!=NULL)
            last=last->next;
        temp->prev=last;
        last->next=temp;
        last=temp;
    }
}
void Reverse(NODE **List)
{
    int flag1=0;
    NODE *temp,*temp1,*last,*flag;
    temp1=(NODE*)malloc(sizeof(NODE));
    last=(*List);
    while(last->next!=NULL)
        last=last->next;
    temp=last;
    while(temp->prev!=NULL)
    {
        temp1->item=temp->item;
        temp1->next=temp->next;
        temp1->prev=temp->prev;
        temp->next=temp->prev;
        temp->prev=temp1->next;
        temp=temp->next;
        if(flag1==0)
        {
            flag1++;
            flag=temp;
        }
    }
    temp1->item=temp->item;
    temp1->next=temp->next;
    temp1->prev=temp->prev;
    temp->next=NULL;
    temp->prev=temp1->next;
    (*List)=flag->prev;
    free(temp1);
};
void display(NODE *List)
{
    if(List->next==NULL)
    {
        printf("%s",List->item);
        return;
    }
    NODE *temp;
    temp=List;
    do
    {
        printf("%s<-->",temp->item);
        temp=temp->next;
    }while(temp->next!=NULL);
    printf("%s\n",temp->item);
}
int main()
{
    int i=0,n;
    char s[10][50];
    NODE *List;
    List=(NODE*)malloc(sizeof(NODE));
    List->item=NULL;
    List->next=NULL;
    List->prev=NULL;
    printf("Provide number of words(max 10): ");
    scanf("%d",&n);
    printf("Enter string of words for the list: ");
    while(i<n)
    {
        scanf("%s",s[i]);
        Insert(s[i],&List);
        i++;
    }
    printf("\nOriginal List is: ");
    display(List);
    Reverse(&List);
    printf("\nReversed List is: ");
    display(List);
    getch();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-27T12:39:47.177

因为它是一个双链表，你可以只写两个遍历函数。一正一反。在控制结构中为列表保存两个锚点：一个用于第一个元素，一个用于最后一个元素。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-27T12:39:22.650

您可以只交换每个节点的下一个和上一个指针，并交换尾指针和头指针。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-27T13:18:31.553

```
void reverse (struct node *ptr)
{
struct node *tmp, *kid;

if (!ptr) return;

for (kid = ptr->next; kid; kid = kid->prev) {
        tmp = kid->prev;
        kid->prev = kid->next;
        kid->next = tmp;
        }

for (kid = ptr->prev; kid; kid = kid->next) {
        tmp = kid->prev;
        kid->prev = kid->next;
        kid->next = tmp;
        }

tmp = ptr->prev;
ptr->prev = ptr->next;
ptr->next = tmp;

return;
} 
```

注意：我删除了 typedef。我讨厌 typedef。

# linux - Shell 脚本：无法在路径中使用 $HOME 或 ~ 遍历文件

> ID：13100205
> 
> 赞同：0
> 
> 时间：2012-10-27T12:32:28.883
> 
> 标签：linux, shell

我正在编写一个对文件执行一些操作的 shell 脚本。该脚本将在各种服务器上运行，因此我想保留这些文件的路径来自主目录。

```
DAT_FILE_PATH='$HOME/projs/build/dat' 
```

我使用 ksh 作为外壳。上述路径确实存在。如果我在控制台中运行 cd

```
cd $HOME/projs/build/dat 
```

这行得通。但是如果我在脚本中执行 ls $HOME/projs/build/dat'。它说 **没有这样的文件或目录。**

同样，如果我使用`sed`on `$HOME/projs/build/dat/abc.dat`，结果是一样的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T13:02:28.247

试试双引号

```
DAT_FILE_PATH="$HOME/projs/build/dat" 
```

“当您在命令行上处理变量时，单引号和双引号之间的区别变得更加重要” [Go here for more details](http://www.howtogeek.com/howto/29980/whats-the-difference-between-single-and-double-quotes-in-the-bash-shell/)

# c - 不能声明两个字符指针

> ID：13100206
> 
> 赞同：0
> 
> 时间：2012-10-27T12:32:33.883
> 
> 标签：c, string, pointers

> **可能重复：**
> [为什么 c 允许在没有声明的情况下初始化字符串？](https://stackoverflow.com/questions/13099983/why-does-c-allow-initialization-of-string-without-declaration)

我正在尝试这个相当简单的代码：

```
#include<stdio.h>
void copy(char *,char *);
main() {
char *name;
char *surname;
printf("Enter name: ");
scanf("%s",name);

printf("%s",name);
} 
```

但是由于某种原因，在我输入名称并按`Enter`后，程序挂起并给出消息，例如**程序已停止工作。**但是，当我删除第二个字符指针声明时，即`char *surname;`，它按预期工作。这里有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T12:35:51.793

您没有为指针分配内存，因此[`scanf`](http://en.cppreference.com/w/c/io/fscanf)访问任意未指定的内存，这是未定义的行为。

您需要将指向足够大内存块的指针传递给scanf，或者声明

```
char s1[100], s2[100]; 
```

（如果 100 足够大），或者[`malloc`](http://en.cppreference.com/w/c/memory/malloc)内存

```
char *s1 = malloc(100);
char *s2 = malloc(100);
if (!s1 || !s2) {
    // malloc failure
    exit(EXIT_FAILURE);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T12:35:30.300

您正在写入未分配的内存。也就是说`undefined behavior`，

你可以在这里做两件事：

1.  在编译时将您的字符数组声明为具有固定大小，如下所示：（`char name[100];`这意味着您不能在运行时更改它们的大小）
2.  `char *name`为使用[malloc()](http://linux.die.net/man/3/malloc)或[calloc()](http://linux.die.net/man/3/calloc)函数分配空间`stdlib.h`

在任何情况下，您**都必须**确保只允许用户输入您分配的字节数，否则可能会发生坏事！

如果您未能定义所述边界，可以在这里找到一个关于邪恶的人可以（并且将会；）做什么的小型研究：[http ://www.cultdeadcow.com/cDc_files/cDc-351/](http://www.cultdeadcow.com/cDc_files/cDc-351/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-27T12:36:59.647

因为您没有为它分配内存，而您放入其中的字符串会破坏程序的代码。尝试使用[sscanf](http://www.cplusplus.com/reference/clibrary/cstdio/sscanf/)和[getline](http://crasseux.com/books/ctutorial/sscanf.html)：

```
#include <stdio.h>

int main()
{
  int nbytes = 100;
  char *my_string;
  int int1, int2, int3;
  int args_assigned;

  args_assigned = 0;

  while (args_assigned != 3)
    {
      puts ("Please enter three integers separated by whitespace.");
      my_string = (char *) malloc (nbytes + 1);
      getline (&my_string, &nbytes, stdin);
      args_assigned = sscanf (my_string, "%d %d %d", &int1, &int2, &int3);
      if (args_assigned != 3)
    puts ("\nInput invalid!");
    }

  printf ("\nThanks!\n%d\n%d\n%d\n", int1, int2, int3);

  return 0;
} 
```

看看这个：

[在 C 中读取可变长度字符串用户输入](https://stackoverflow.com/questions/7672560/reading-in-a-variable-length-string-user-input-in-c)

和这个 ：

[http://en.wikipedia.org/wiki/Buffer_overflow](http://en.wikipedia.org/wiki/Buffer_overflow)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-27T12:39:09.423

您声明了一个指针并且没有给它一个有效的内存地址，它指向一个随机地址。您不能使用此指针读取或写入。指针应该这样使用：

```
char s1[100],s2[100];
char * name=s1;
char * surname=s2; 
```

# c - 使用已实现函数的 C 中的 Unix 尾部程序

> ID：13100211
> 
> 赞同：-2
> 
> 时间：2012-10-27T12:33:04.983
> 
> 标签：c, unix, fgets, tail

我已经实现了自己的动态内存版本的 getline 函数：

```
char * fgetline(FILE * f) 
```

从 30 个字符的缓冲区开始，当缓冲区已满时分配一个新的缓冲区，复制内容并释放旧缓冲区。当我们从函数中获取`EOF`或`\n`返回时。

我想用这个函数来实现程序tail的一个版本。输入来自标准输入，输出到标准输出。如果第一个参数以 开头`-`，则后面的所有内容都是`-`要打印的行数。当没有给出参数时，默认打印的行数是 10。

到目前为止，我一直认为我应该使用该功能：

```
int atoi (const char *s) 
```

from`stdlib.h`并且有一个指向行的指针数组，但我不知道该怎么做。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T12:54:23.760

将您的`main`功能声明为

```
 int main (int argc, char**argv) {
 } 
```

如果您将程序编译为`myprog`可执行文件并调用它，`myprog -20 somefile anotherfile`那么您将拥有：

```
argc == 4 
&& strcmp(argv[0], "myprog") == 0
&& strcmp(argv[1], "-20") == 0
&& strcmp(argv[2], "somefile") == 0
&& strcmp(argv[3], "anotherfile") == 0
&& argv[4] == NULL 
```

换句话说，您可能希望您的程序包含

```
int nblines = 10;

int main(int argc, char**argv) {
  int argix = 1;
  if (argc>1) {
    if (argv[1][0]=='-') 
      { 
         nblines = atoi(argv[1]+1);
         argix = 2;
      }
     for (; argix < argc; argix++)
        tail (argv[argix]);
  }
  return 0;
} 
```

您可以适当地实现您的`void tail(char*filename);`功能。不要忘记编译所有警告和调试信息，例如`gcc -Wall -g`在 Linux 上。使用您的调试器（`gdb`在 Linux 上）调试您的程序。考虑到`fopen`可能会失败，并使用`errno`来显示适当的错误消息。

请注意，您不需要您的`fgetline`功能。[getline(3)](http://www.kernel.org/doc/man-pages/online/pages/man3/getline.3.html)函数是标准的 （在 Posix 2008 中）并且动态分配行缓冲区。

# linux - 获取前 5 行并放入另一个文件的 bash 脚本

> ID：13100216
> 
> 赞同：0
> 
> 时间：2012-10-27T12:33:32.197
> 
> 标签：linux, bash

大家好，我需要编写一个简单的 bash 脚本，列出目录中的所有 PHP 文件，并将每个 PHP 文件的前 5 行写入名为 PHP_header 的新文件

我只知道linux命令行中的基本知识

```
#!/bin/bash
    grep –r stringsearch
    find /opt/-name ‘log_*’
    du –s foldername
    head -10 filename
    mkdir filername.php 
```

请解释一下我该如何完成这个

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T12:50:50.107

这应该这样做：

```
#!/bin/bash

for f in *.php; do
  head -5 "$f"
done > PHP_header 
```

添加一些解释：

*   `for f in *.php`

    循环遍历`.php`当前工作目录中的所有文件。

*   `head -5`

    此命令将文件的前五行打印到`STDOUT`.

*   `done > PHP_header`

    `>`循环结束时的重定向 ( ) 将循环`STDOUT`内打印的所有内容重定向到文件`PHP_header`。

# c# - 如何让一种方法在我的 C# 项目中以所有形式工作

> ID：13100218
> 
> 赞同：-1
> 
> 时间：2012-10-27T12:33:52.493
> 
> 标签：c#, sql-server, methods

我编写了代码（连接字符串）以在 form1 中打开 sql 数据库，然后我需要在 form2 中打开相同的数据库。所以我想写方法来做到这一点？如何让这个方法在我的 C# 项目中以所有形式工作，我需要让它在所有项目形式中工作？？？？请帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-27T12:35:45.083

为您的表单创建一个具有所有共享功能的基类并从中继承您的表单。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T12:46:10.967

您可以将这些功能放在一个单独的类中，并从您的表单中调用它们

```
public class MyDBService
{

   public static DataTable GetEmployees()
   {
      //Connect to DB
      //return Employees
   }

   public static DataTable GetDepartments()
   {
      //Connect to DB
      //return Departments
   }

   public static DataTable GetLocations()
   {
      //Connect to DB
      //return Locations
   }

} 
```

然后在你的每一个表格中你都可以拥有

```
var employees = MyDBService.GetEmployees();
var depts = MyDBService.GetDepartments(); 
```

从而将您的数据访问与您的 UI/Presentation 分开

你也可以看看

*   [存储库模式](http://msdn.microsoft.com/en-us/library/ff649690.aspx)
*   [活动记录模式](https://www.google.com.ng/search?q=active%20record%20pattern&oq=active%20record%20pattern&sugexp=chrome,mod=0&sourceid=chrome&ie=UTF-8)等
*   3层设计/应用

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-27T12:59:14.350

```
public static class MyClass
{

public static string GetConnection()
{
//Write Code

}

public static void Methods()
{

//Write Code
}

} 
```

/// 如何使用这个类

//在您的 .cs 或 .vb 文件中

```
string con=MyClass.GetConnection();
MyClass.Method2(); 
```

# ios - 在发布版本中加载 CoreData 失败

> ID：13100221
> 
> 赞同：0
> 
> 时间：2012-10-27T12:34:08.783
> 
> 标签：ios, core-data, optimization, release

我的应用程序有一个与`Trip`实体有**一对多**关系的`Spot`实体，我需要在后台线程中加载行程及其地点列表。在调试版中运行良好，但在发布版中，点列表为空！所以我挖了一点，发现除非我将编译器优化级别设置为`-O0`. 我认为这可能是编译器的错误。

是否有任何建议可以使其适用于更高的优化级别，或者我必须发布未优化的应用程序？谢谢！

这是代码：

主线程

```
[self performSelectorInBackground:@selector(calcRoute:) withObject:self.trip.objectID]; 
```

后台线程

```
- (void)calcRoute:(NSManagedObjectID *)tripId
{
    //get trip entity
    CoreDataHelper * helper = nil;  //responsible for init model, persistentStore and context
    TripEntity * t = nil;
    helper = [[CoreDataHelper alloc] initWithAnother:mainThreadHelper];  //only take the resource name and storeURL
    t = (TripEntity *)[helper.context objectWithID:tripId];   //retrieve trip
    if (0 == t.spotList.count) {
        [self performSelectorOnMainThread:@selector(drawRouteFailed) withObject:nil waitUntilDone:FALSE];
        return;   //I got here!
    }
//...
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T03:46:31.960

最后我解决了这个问题。原因是：我'*用*'主线程行实体。这是实际的代码：

```
- (void)calcRoute:(NSManagedObjectID *)tripId
{
    //get trip entity
    CoreDataHelper * helper = nil;  //responsible for init model, persistentStore and context
    TripEntity * t = nil;
    if (self.backgroundDrow) {  //sometimes I don't need background drawing
        helper = [[CoreDataHelper alloc] initWithAnother:mainThreadHelper];  //only take the resource name and storeURL
        t = (TripEntity *)[helper.context objectWithID:tripId];   //retrieve trip
    } else
        t = self.mainThreadTrip;         //HERE is the problem!!!
    if (0 == t.spotList.count) {
        [self performSelectorOnMainThread:@selector(drawRouteFailed) withObject:nil waitUntilDone:FALSE];
        return;   //I got here!
    }
    //...
} 
```

我评论后`t = self.mainThreadTrip;`，后台加载就OK了！

但我还是没明白重点！有人能告诉我真正的原因吗？非常感谢！

# .net - 类库中的 Membership.CreateUser()

> ID：13100223
> 
> 赞同：6
> 
> 时间：2012-10-27T12:34:27.253
> 
> 标签：.net, class, asp.net-membership

我正在将代码移出`App_Code`类库。

我使用`Membership.CreateUser`.

如何在无法访问我已配置的成员资格提供程序的类库中继续执行此操作`web.config`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T19:41:18.833

在我向您展示代码部分的工作原理之前 - 您需要了解在这种情况下如何加载设置。

当您有一个要加载`.dll`文件的 Web 应用程序 - 并且该`.dll`文件要访问`MembershipProvider`应用程序配置的文件时 - 您必须做出一些假设。

1.  Web 应用程序有一个`MembershipProvider`
2.  Web 应用程序`MembershipProvider`在其`Web.Config`
3.  `.dll`Web 应用程序正确加载您的

因为您的`.dll`文件应该包含在 Web 应用程序的`/bin`目录中，所以您应该能够依赖*Web 应用程序的配置*，而不必提供您自己的配置。

为此，请从 Oded 在他的回答中提到的内容开始 -`System.Web.Security`在您`.dll`的代码中创建一个引用 - 然后在该文件中您可以执行以下操作：

```
if (Membership.Provider != null) {
    Membership.Provider.CreateUser( ... );
} else {
    // Do something appropriate in a case where there is no Membership Provider
} 
```

此时 - 如果上述方法不起作用，很可能是因为您的 Web 应用程序没有配置适当的提供程序。

**关于*为什么*要这样做的说明...**

您应该让 Web 应用程序提供配置的原因是为了遵守[关注点分离](http://en.wikipedia.org/wiki/Separation_of_concerns)的原则。这[`MembershipProvider`](http://msdn.microsoft.com/en-us/library/system.web.security.membershipprovider.aspx)是一个提供默认功能的抽象类 - 几乎没有实现。

换句话说 - 它定义了要管理成员，您需要能够执行诸如`CreateUser()`和之类的操作`GetAllUsers()`。它还说您应该能够配置设置，例如指定 a`PasswordFormat`并确定每个用户是否`RequiresUniqueEmail`.

它不会告诉您在哪里存储您的用户信息。它留给实现者（`System.Web.Providers.DefaultMembershipProvider`或`YourNS.YourMembershipProvider`）。

然后使用的应用程序`MembershipProvider`确定要提供什么设置以及要使用哪个实现。换句话说 -`YourNS.YourMembershipProvider`指定如何管理信息是一项工作，但很可能是应用程序应该确定`ConnectionString`在其存储中使用什么等。

所以 - 按照我上面概述的模式，您可以提供三个单独的层：

1.  一个将消耗`MembershipProvider`,
2.  提供`MembershipProvider`实现的程序集，以及
3.  使用任何`MembershipProvider`配置的程序集 - 并代表应用程序对其进行处理（*这是您在帖子中描述的层，我相信）

请注意，如果您遵循此模式 - 您现在可以`MembershipProviders`稍后切换*而无需更改任何其他层*- 因为这些层依赖于基类`MembershipProvider`- 而不是依赖于您的特定实现。这可能非常有价值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T01:50:48.427

我通过将整个 web.config 复制到我的 app.config 来解决我的问题。我正在使用控制台应用程序。我以为我已经复制了必要的部分，但是在复制所有内容之前，数据没有进入数据库

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T12:38:29.700

在类的命名空间中添加 using 指令`System.Web.Security`​​- 这将使您可以直接访问`Membership`该类。

C＃：

```
using System.Web.Security; 
```

VB.NET：

```
Imports System.Web.Security 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-27T12:40:33.417

您可以在任何地方访问它，因为 Membership 类是 ASP.NET 提供程序系统设置的当前提供程序的静态表示。

# bash - shell脚本第一行中的环境变量扩展

> ID：13100226
> 
> 赞同：1
> 
> 时间：2012-10-27T12:34:44.943
> 
> 标签：bash, environment-variables, interpreter

我的 ruby​​ shell 脚本在脚本的第一行将 ruby​​ 解释器指定为：

```
#!/Users/me/.rvm/rubies/ruby-1.9.3-p194/bin/ruby 
```

问题是当我升级到一个新的 ruby​​ 版本时，我必须编辑所有的脚本文件来更新解释器。有一个可用的环境变量 $MY_RUBY_HOME，它扩展到当前路径（减去 /bin/ruby 部分）。但是，我所有尝试使用：

```
#!{$MY_RUBY_HOME}/bin/ruby
#!${MY_RUBY_HOME}/bin/ruby
etc 
```

失败（“错误的解释器：没有这样的文件或目录”）。我怀疑第一行没有完成环境扩展，所以我可能只是不走运。如果有人能够在 shell 脚本的程序定义行上使用环境变量扩展，我会很感兴趣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T12:48:12.120

放入`${MY_RUBY_HOME}/bin`你的`$PATH`并使用`#!/usr/bin/env ruby`。见[这里](http://en.wikipedia.org/wiki/Shebang_%28Unix%29#Portability)。

# coldfusion - 如何动态调用 CFC 函数

> ID：13100227
> 
> 赞同：2
> 
> 时间：2012-10-27T12:34:44.913
> 
> 标签：coldfusion, cfc

我使用 CFBuilder“创建 CFC”插件为表创建服务，所以我可以玩 OOD。现在我正在努力使用以动态方式生成的“更新”功能。

我调用 cfc 来获取帐户的结构，并传递一个 ID。

```
<cfinvoke component="cfc.Account.accountService" method="getAccount" returnvariable="Account" AccountID="#session.auth.AccountID#"> 
```

我可以使用手动代码调用更新函数。

```
<cfset Account.setAccountFirstname('#form.AccountFirstname#')> 
```

这很好用，但我想根据表单中的数据动态更新结构。所以我想循环表单中的字段并生成以下内容

```
<!--- Dynanic call of submitted fields --->
<cfloop list="#form.FieldNames#" index="i">
    <cfset Account.set[i]('#Evaluate('#i#')#')>
    </cfloop> 
```

现在当然不行了！有什么想法可行吗？还是有更好的处理方式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T16:44:43.347

您尝试对调用执行的操作将不起作用，这是因为您将属性作为独立组件参数（即类路径）传递，而您需要传入对象实例。

编辑添加：

```
<cfset account = new Account()/>
<cfset data = {
  accountId = session.auth.AccountID
}/>
<cfset fieldNames = listToArray(form.fieldNames)/>
<cfif ! arrayIsEmpty(fieldNames)>
  <cfloop array="#fieldNames#" index="fieldName">
    <cfinvoke 
      component="#account#"
      method="set#FieldName#" 
      returnVariable="methodResult" 
      argumentCollection="#data#"
    />
  </cfloop>
</cfif> 
```

# eclipse - Eclipse 链接器找不到我的库

> ID：13100228
> 
> 赞同：0
> 
> 时间：2012-10-27T12:34:49.123
> 
> 标签：eclipse, gcc, gpu, nvidia, nsight

我在让 NSight Eclipse 链接到我的库时遇到问题：

```
构建目标：SA_V1
调用：NVCC 链接器

nvcc -L/home/streaming/VidApp_V1.0/src/AudioPreconditioning6Ch/dist/Release/GNU-Linux-x86 -L/home/streaming/cuda-workspace/libConfig/Debug -L/usr/lib32 -link -o " SA_V1" ./V1.1/DeckLinkAPIDispatch.o ./V1.1/DeckLinkAPIDispatch_v7_6.o ./V1.1/audio.o ./V1.1/capture.o ./V1.1/cudaEngine.o ./V1 .1/decklink.o ./V1.1/engine.o ./V1.1/filter.o ./V1.1/filterKernel.o ./V1.1/initialize.o ./V1.1/main. o ./V1.1/playback.o ./V1.1/utils.o ./V1.1/videoFuncThread.o ./V1.1/vif.o ./V1.1/vof.o -llibAudioPreconditioning6Ch.so -lliblibConfig.so -llibtiff.so.4.3.2

/usr/bin/ld: 找不到 -llibAudioPreconditioning6Ch.so

```

==> 搜索我得到的库：

```
/home/streaming/VidApp_V1.0/src/AudioPreconditioning6Ch/dist/Debug/GNU-Linux-x86/libAudioPreconditioning6Ch.so
/home/streaming/VidApp_V1.0/src/AudioPreconditioning6Ch/dist/Release/GNU-Linux-x86/libAudioPreconditioning6Ch.so
/home/streaming/dist/lib64/libAudioPreconditioning6Ch.so

```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T14:42:37.677

Library names in Linux are not the same as in Windows. in VS, i was linking libConfig.lib, so when eclipse asked for the name of the library i typed in: liblibConfig.so which is the name of the file. Uh uh. In Linux the prefix lib is understood as a prefix and the suffix .so is also not part of the name. so entering: libConfig as the library to load (which gets inserted into make as: -llibConfig) solves the problem

# javascript - 发送到 Facebook 活动的 YouTube 帖子已发送并显示在活动页面上 - 但不播放

> ID：13100232
> 
> 赞同：0
> 
> 时间：2012-10-27T12:35:24.167
> 
> 标签：javascript, facebook, facebook-graph-api

[解决了这个问题](https://stackoverflow.com/questions/13007621/post-youtube-video-into-a-facebook-event-wall)后，我现在可以将 YouTube 链接发送到 Facebook 活动墙。但是，当我尝试播放它们时，会弹出此错误：

![在此处输入图像描述](../Images/4d5342962f07c2fd68087842ded6511f.png)

您可以看到直接在 Facebook 中创建的 YouTube 帖子和 API 发送的 YouTube 帖子之间的外观有所不同（上面的帖子是 API，下面的帖子是直接从 Facebook 事件页面创建的）。

![在此处输入图像描述](../Images/81877c2da2e098b9f2639131815893fa.png)

我通过 Graph API Explorer 检查了提要，并注意到来自 Facebook 的工作帖子有一个`"type": "video"`属性，而来自 API 的不可播放帖子有一个`"type": "swf"`属性。

我的代码是：

```
var eventObj =
{
    source:'http://www.youtube.com/v/'+youTubeID,
    picture:'http://img.youtube.com/vi/'+youTubeID+'/0.jpg',
    message: messageText,
    name: eventName,
    caption: newDateArray[0] + ' ' + newDateArray[1].substr(0, 5)
}; 

FB.api('/'+facebookEventID+'/feed', 'post', eventObj, function(response){

//response code...

} 
```

当通过 Graph API Explorer 发送相同的值时，我得到了相同的不可播放的帖子。我尝试修改发送的属性，只发送所需的源和图片属性，但结果是相同的不可播放的帖子。

# ios6 - MKMapView NSInvalidArgumentException Invalid Region crash in ios6

> ID：13100237
> 
> 赞同：14
> 
> 时间：2012-10-27T12:35:46.787
> 
> 标签：ios6, mkmapview

使用 MKMapView 设置位置坐标时程序崩溃。日志：

> 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“无效区域`<center:+112.57075000, +37.87049600 span:+0.05165163, +0.43945312>`”

我的程序中的跨度是

```
MKCoordinateSpan span;
span.latitudeDelta = .05;
span.longitudeDelta = .02; 
```

编码后：

```
 self.mMKMapview.region = [self.mMKMapview regionThatFits:region]; 
```

如日志所示，跨度更改为：+0.05165163, +0.43945312

请大家帮忙，我已经在这里停了两天了。

谢谢！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-27T13:35:54.980

问题是`center`坐标：

> +112.57075000, +37.87049600

纬度必须在 -90 到 +90 之间，因此 +112.57075 超出范围。

检查中心坐标是如何设置的，或者数据是否向后。

此外，您不需要显式调用`regionThatFits`，因为地图视图会在您正常设置区域时自动执行（即只需调用`setRegion`）。顺便说一下，地图视图根据需要调整跨度以适应地图视图尺寸或缩放级别是正常的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-10-14T11:06:39.793

我使用以下代码设置区域：

```
if( centerLat > -89 && centerLat < 89 && centerLng > -179 && centerLng < 179 ){
    [self.mapView setRegion:region animated:YES];
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-07-26T16:50:05.230

我宁愿建议使用[CLLocationCoordinate2DIsValid](https://developer.apple.com/documentation/corelocation/1423806-cllocationcoordinate2disvalid)

所以像

```
guard CLLocationCoordinate2DIsValid(centerLat) else {

     return
} 
```

# git - 如何从终端访问“GitHub for Mac”命令行实用程序？

> ID：13100242
> 
> 赞同：5
> 
> 时间：2012-10-27T12:36:26.570
> 
> 标签：git, osx-lion, github-for-mac

我最近安装了 GitHub for Mac，来自 GitHub 的图形 Git 客户端，以及它的菜单中的命令行实用程序，如下所示：

![GitHub for Mac 菜单](../Images/0d80c244da59701c5370ea2c837ad06b.png)

我被告知命令行实用程序已安装在 中`/usr/local/github`，但当我检查它实际上已被放入时`/usr/local/bin/github`- 详细信息如下所示：

![终端结果](../Images/c6a0187464a2bd3ed6559bc61d8d5459.png)

当我尝试运行时，`git`我得到`-bash: git: command not found`了，所以我补充说它`export PATH=/usr/local/bin:$PATH`会`~/.profile`解决问题，但它没有 - 似乎不同的是我现在可以通过键入从终端启动 GitHub for Mac `github`。

请有更多知识的人解释这里发生了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-27T13:15:14.783

“GitHub for Mac”命令行实用程序只是在当前目录中启动“GitHub for Mac”的工具。

要安装`git`命令行工具，请使用[Homebrew](http://mxcl.github.com/homebrew/) ( `brew install git`) 或[Git for OS X](http://code.google.com/p/git-osx-installer/)安装程序。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-05-21T07:06:51.810

从 2013 年 5 月起，您现在有了不同的选择：

请参阅“[从 Mac 版 GitHub 安装 Git](https://github.com/blog/1510-installing-git-from-github-for-mac) ”

> 您现在可以轻松地安装 Git 以在命令行上使用，而无需下载任何单独的包。
> 每当我们更新 GitHub for Mac 中包含的 Git 版本时，您将自动获得更改——您无需任何工作！
> 
> 您可能会注意到“首选项”窗口发生了一些变化。
> 在新重命名的“ `Advanced`”选项卡上，只需单击“ `Install Command Line Tools`”。

![点击安装](../Images/671aaaa49678e540b27576e047707e73.png)

> 系统将提示您输入管理员密码，以便可以将 Git 安装到`/usr/local/bin`中，然后您应该很快就会看到它成功了：

![在此处输入图像描述](../Images/18907644fa448ed49510ba47bbf95a37.png)

# java - 将 GWT 应用程序分解为模块、入口点和片段

> ID：13100247
> 
> 赞同：0
> 
> 时间：2012-10-27T12:37:00.093
> 
> 标签：java, gwt, module

我对 GWT 模块的*理解*是它是一个“可重用单元”。

我对an的*理解*`EntryPoint`是，它是一个与客户端浏览器交互的模块。因此，我认为`EntryPoint`一个“可执行 JAR”是一种“可执行 JAR”，而一个模块则是一个库 JAR 或 DLL。

我对片段的*理解*是，它是模块的子组件，用于延迟绑定和代码拆分。

因此，首先，如果我对这些断言中的任何一个不正确，请首先纠正我或为我澄清事情！

如果我是正确的，那么很明显您根据*需要*将模块分解为片段。您编写模块，以各种方式对其进行测试，查看`soyc`编译器报告，如果发现瓶颈，则开始根据需要进行分段和代码拆分，是吗？

但是您如何将应用程序分解为模块和入口点？！？同样，我确信这一切都归结为*需要*并且是特定于应用程序的。我刚刚阅读[了这篇关于构建 GWT 应用程序的文章](http://www.summa-tech.com/blog/2011/02/22/structuring-gwt-modules-for-large-applications/)，虽然它很有帮助，但它仍然没有提供任何将应用程序分解为模块/入口点的试金石或指导方针。

我已经计划将我的应用程序拆分为两个模块：a`WebModule`和`AppModule`. 这`WebModule`将是应用程序的“公共”部分（*网站*，如果你愿意的话），并且`AppModule`将在用户成功登录后下载（我这样做是出于安全目的）。

但除此之外，**我不确定如何将我`AppModule`的模块分解为其他模块**，以及如何确定这些模块是否需要入口点。所以我问：如果你对一个模块进行分段以规避代码下载的网络延迟问题，你什么时候/为什么要模块化一个应用程序，什么时候模块需要一个入口点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T12:04:17.393

`EntryPoint`不是一个单独的模块。它是模块的一部分，并具有将在应用程序启动时调用的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T14:22:23.793

模块的重点是对逻辑功能进行分组，以便您可以在不同项目之间共享代码。没有其他的。GWT 已经附带了一堆模块（HTTP、Activity、Places、Debug）。如果您决定像这样对它进行分组，您的应用程序中可能有一个 COMMENT 或 USER 模块。

只应在需要时使用代码分割。您只能通过`GWT.runAsync()`. 我建议您仅在您的应用程序加载缓慢时才执行此步骤。

# jquery - jQuery.createUploadForm 不是一个函数

> ID：13100248
> 
> 赞同：0
> 
> 时间：2012-10-27T12:37:05.203
> 
> 标签：jquery, jquery-plugins, ajax-upload

我正在使用[ajaxupload](http://www.phpletter.com/Our-Projects/AjaxFileUpload/)上传和使用 jQuery 1.7.2。我收到这样的错误

```
TypeError: jQuery.createUploadForm is not a function
[Break On This Error]   

... jQuery.createUploadForm(id, s.fileElementId, (typeof(s.data)=='undefined'?false... 
```

我的代码是

```
function ajaxFileUpload()
    {
        jQuery.ajaxFileUpload
        (
            {
                url:'<?php echo $currenturl.&fileupload=enable;?>',
                secureuri:false,
                fileElementId:'fileToUpload',
                dataType: 'json',
                success: function (data, status)
                {
                    if(typeof(data.error) != 'undefined')
                    {
                        if(data.error != '')
                        {
                            alert(data.error);
                        }else
                        {
                            alert(data.msg);
                        }
                    }
                }
            }
        )

        return false;

    } 
```

和 html 是

```
<div class="upload-button"><input type="button" value="upload" id="upload-btn" onclick="return ajaxFileUpload();"/></div> 
```

请帮我解决这个问题。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T12:42:45.833

该`is not a function`错误可能由多种原因引起......最常见的是：

*   插件文件的路径不正确或根本不包含在页面中。易于在浏览器控制台中检查它正在作为页面资源加载
*   脚本加载顺序不正确。插件必须在您尝试使用它之前加载
*   jQuery.js 没有在所有插件和依赖代码之前加载

**编辑：**另一个真正常见的问题，尤其是在 wordpress 网站上，是在某些插件加载后加载额外版本的 jQuery。如果在之前的插件加载后第二次加载 jQuery，它会清除它们

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T12:44:25.367

您需要将代码放入`$(document).ready(function(){...});`事件中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T12:39:21.727

确保你已经包含`jquery.js`在插件 js 文件之前。

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
<script type="text/javascript" src="/js/myplugin.js"></script> 
```

此外，避免`on*`在 HTML 中使用过时的属性。由于您已经在函数中使用了 jQuery，因此您可以简单地将点击处理程序附加到元素以运行函数，如下所示：

```
$(function() {
    $("#upload-btn").click(ajaxFileUpload);
}); 
```

# linux - Shell 脚本嵌套 if

> ID：13100251
> 
> 赞同：0
> 
> 时间：2012-10-27T12:38:14.927
> 
> 标签：linux, shell, unix

shell脚本中的以下代码有什么问题：

**下面的代码抛出意外的 else 错误：**

```
if [ $result -eq 0 ];
then
  echo "SFTP completed successfully to Prod Remote Server" >> $LOG_FILE
else
    errorConnectToProd=1
   if [[ $result -eq 4 || $result -eq 5 ]];
  echo "FAILED to connect to Server. " >> $LOG_FILE

   else
 echo "FAILED to SFTP to  Remote Server. " >> $LOG_FILE
   fi
fi 
```

**下面的行给出 /usr/bin/sftp not found 错误：**

```
/usr/bin/sftp –v -oPort=$SFTP_PORT -b $SFTP_BATCH_FILE $SOURCE_FUNCTIONAL_ID@$REMOTE_SERVER_PROD >> $LOG_FILE 2 >> $LOG_FILE 
```

问候，

柴

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T12:57:25.240

您在第二个 if 语句之后缺少**then 。**

它应该是

```
 if [[ $result -eq 4 || $result -eq 5 ]];
 then
   echo "FAILED to connect to Server. " >> $LOG_FILE 
```

至于第二个命令，要么 sftp 未安装，要么不在`/usr/bin`.

跑去`which sftp`看看它在哪里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T12:56:53.133

```
if [[ $result -eq 4 || $result -eq 5 ]]; 
```

您忘记了 if 构造之后的“then”。

找不到时，检查路径中是否找到了 sftp。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T17:55:11.967

有两个错误。语法错误是缺少`then`. 另一个错误是这应该是一个`case`声明：

```
exec >> $LOG_FILE
case "$result" in
0)   echo "SFTP completed successfully to Prod Remote Server";;
4|5) errorConnectToProd=1
     echo "FAILED to connect to Server. ";;
*)   echo "FAILED to SFTP to  Remote Server. ";;
esac 
```

# javascript - 使用 Javascript 获取页面中的顶部节点

> ID：13100253
> 
> 赞同：1
> 
> 时间：2012-10-27T12:38:30.670
> 
> 标签：javascript, html, dom, nodes

我正在尝试递归迭代整个页面。问题是是否有一个'TOP'节点，所有其他人都是孩子的后代，或者是否有一系列顶级节点。以及如何仅获得顶级节点？

我注意到整个页面是一个名为“HTML”的节点 ![节点名称：](../Images/a2e3e50811b565df3c753c11e47510e0.png)

所以我尝试了这个：

```
document.getElementsByName("HTML")[0] 
```

但它不起作用...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-27T12:47:37.987

有...

```
var topNode = document.documentElement; 
```

这是`html`DOM 中的元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T12:40:17.580

你应该使用`getElementsByTagName`

```
document.getElementsByTagName("HTML")[0] 
```

# php - 获取 mysql 数据进行比较，但不工作或显示任何内容

> ID：13100254
> 
> 赞同：0
> 
> 时间：2012-10-27T12:38:35.227
> 
> 标签：php, html, mysql, database

下面是php代码。它将表单中的数据与数据库值进行比较。

但是，当我单击登录按钮时，它什么也没做？

```
mysql_connect($host, $databaseUsername, $databasePassword) or die(mysql_error());
mysql_select_db("login") or die(mysql_error());;

$uname = $_POST['inputEmail'];
$pword = $_POST['inputPassword'];

$result = mysql_query("SELECT * FROM login 
WHERE Usernames='$uname' AND Passowrds='$pword'");

if ($row = mysql_fetch_array($result))
{
  echo "correct login information";
} else {
  echo "wrong login information";
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T12:45:00.780

您错误地使用了mysql。使用 mysqli 或 PDO 并在此旁边准备好语句，您的查询字符串中有拼写错误，我认为您的环境不会发送任何错误消息，因此请打开错误报告，然后您会看到问题所在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T12:49:37.127

尝试检查mysql是否返回任何错误然后检查返回数据的计数

```
if($result = mysql_query("SELECT * FROM login WHERE Usernames='$uname' AND Passowrds='$pword'")){
// $result != false
// count the returned data
echo mysql_num_rows($result);
}
else{
// call mysql_error(); to print out mysql error
echo mysql_error();
} 
```

# jquery - CSS渲染后调用JQuery函数

> ID：13100255
> 
> 赞同：3
> 
> 时间：2012-10-27T12:38:41.763
> 
> 标签：jquery, css

当我使用`$(document).ready(function() {...}`时，在 DOM 准备好之后调用该函数，但（我认为）在加载 CSS 样式之前。

我想检索元素的宽度，但是当我尝试在 ready() 事件中检索它时，返回的值与 CSS 值不匹配。但是，当我在 10 秒后使用计时器调用此函数时，它会按预期工作。

那么，有没有办法用 jQuery 来监听 CSS 渲染呢？

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-27T12:47:13.043

```
$(window).bind("load", function() {
   // code here
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-27T12:52:33.117

为了完成我的第一篇文章，我使用了 JSF 框架 (Mojarra) + PrimeFaces 组件。我所有的 JS 都是这个：

```
$(document).ready(function() {      
    alert("parent : " + $("#j_idt14\\:panelGrid label").parent().css("width"));

    window.setInterval(function(){alert("parent : " + $("#j_idt14\\:panelGrid label").parent().css("width"));}, 5000);

}); 
```

我得到 416px，5 秒后又是 522px。

我通过 JSF 调用 JS 脚本，如下所示：

```
<h:outputStylesheet name="styles/styles.css" /> 
```

就这样。我不明白

# c# - 将文本计算为十六进制

> ID：13100263
> 
> 赞同：0
> 
> 时间：2012-10-27T12:39:23.003
> 
> 标签：c#

我想收到一个十六进制计算：

```
 static int count = 0;
  string s;
  private void SetClock_Click(object sender, EventArgs e)
   {
        count++;
        label5.Text = count.ToString("X2");
        DateTime time = DateTime.Now;
        s = "4D-" + "1A-" + "2B-" + "3C-" +(label5.Text);
        txtSend.Text = s;
   } 
```

之后，我删除了代码之间的“-”，我想在“（label5.text）”之后添加十六进制计算结果：

4D 1A 2B 3C（label5.text）（（4D 1A 2B 3C（label5.text））上的十六进制结果）。

我不明白如何告诉我的程序获取不同的字节 - 4D/1A/2B ......这实际上是我们可以用计算器在科学模式下选择“十六进制函数”并输入所有那些 4D 1A .. by按异或。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T13:15:11.443

正如我正确理解的那样，您想应用`XOR`您的`s`价值并将其结果存储`HEX`到`txtSend.Text`If 中，您可以试试这个

```
s = "4D-" + "1A-" + "2B-" + "3C-" +(label5.Text);
string [] allHaxValues= s.Split(new char[]{'-'});
int result = 0;

foreach(string haxValue in allHaxValues)
{
   result = result ^ Convert.ToInt32(haxValue, 16);
}
txtSend.Text = result.ToString("X"); 
```

如果`label5.Text`包含`1`然后结果将是`41`

像

```
result = 4D XOR 1A XOR 2B XOR 3C XOR 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T13:19:16.060

我认为这可能是您正在寻找的内容，请注意我已替换`'-'`为，`' '`因此您可以在代码中使用它。

```
count++;
label5.Text = count.ToString("X2");
DateTime time = DateTime.Now;
s = "4D-" + "1A-" + "2B-" + "3C-" + label5.Text;
s = s.Replace('-', ' ');
string[] strings = s.Split(new char[]{' '}, StringSplitOptions.RemoveEmptyEntries);
List<int> ints = strings.Select(a => int.Parse(a,System.Globalization.NumberStyles.AllowHexSpecifier)).ToList<int>();
int xor = ints[0];
for(int i=1;i<ints.Count;i++)
{
      xor ^= ints[i];
}
txtSend.Text = s + " (" + xor.ToString("X2") + ")"; 
```

# javascript - JQuery - 获取居中元素的绝对 x,y 位置

> ID：13100268
> 
> 赞同：1
> 
> 时间：2012-10-27T12:40:18.873
> 
> 标签：javascript, jquery, css, position, text-align

我想从一个元素中找到左上角的位置。但是，这个元素的父容器有 text-align: center; 因此，如果底行有几个，第一个是 0px，而不是说 450px。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T12:42:03.180

使用[`offset`](http://api.jquery.com/offset/)：

```
offset = $( yourselectorhere ).offset() 
```

# eclipse - eclipse：在编辑的行中将制表符更改为空格

> ID：13100270
> 
> 赞同：1
> 
> 时间：2012-10-27T12:40:25.713
> 
> 标签：eclipse, tabs, space

eclipse 中是否有办法仅在已编辑的行中将制表符更改为空格？

我知道我们可以将所有选项卡更改为空格，但我只想更改用户在工作区中编辑的行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-29T06:23:49.463

您可以为此使用查找和替换对话框。

使用的测试数据。

```
fdff fdfdf fdfdfd
    fdfdf fdfdf fdfdf dfdfd fdfdf fdfdfd
fdfdf
fd
fdf

fdff fdfdf fdfdfd
    fdfdf fdfdf fdfdf dfdfd fdfdf fdfdfd
dfd

fdf
df
dfd
ffdfdf

```

第 1,2 行被复制到第 7 行和第 8 行。在编辑器中选择第 7 行和第 8 行（有制表符和空格）。按`Ctrl`+ `F` 。

参考下图。

![在此处输入图像描述](../Images/dfc8fb315113f3c8bd26d240b883f351.png)

* * *

**另请参阅[AnyEdit](http://andrei.gmxhome.de/anyedit/)插件。**

# java - 如何获得任何给定网络接口的最大传输速率

> ID：13100272
> 
> 赞同：0
> 
> 时间：2012-10-27T12:40:29.393
> 
> 标签：java, networking, ifconfig

有没有办法通过 ifconfig 或任意给定网络接口的路由获取最大和当前数据传输速率 (kbps)？我不确定我是否完全理解我正在寻找的究竟是什么。

我考虑过解析 /proc/net/dev 并找到接收的字节和传输的字节之间的类比。MTU 是否与最大数据传输率相同？如果是这样，我可以改用 netstat -in 吗？

PS 在 Java 中工作。（Ubuntu 10.04）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T13:10:49.637

`/proc/net/dev`定期阅读将为您提供传输率。

**更新**（澄清我想使用以下措辞表示的内容：“*定期阅读......* ”）：

`/proc/bnet/dev`为您提供传输的数据量。要获得传输率，您需要读取两次并将差值除以两次读取之间经过的时间。

# c++ - 用位集中的位填充 int 数组。

> ID：13100275
> 
> 赞同：0
> 
> 时间：2012-10-27T12:40:41.513
> 
> 标签：c++, arrays, int, fill, bitset

```
#define CHAR_BIT 8
union
{
     float input;   // assumes sizeof(float) == sizeof(int)
     int   output;
}    data;

data.input = 122.5;

bitset<sizeof(float) * CHAR_BIT>   bits(data.output);

int ieee[32];
for(int i = 0 ; i < 32 ; ++i){
    ieee[i] = (int)bits[i];
} 
```

我的意图是`ieee`用浮点数的 IEEE 表示填充数组，并完成（我使用了另一个问题的代码），但有两件事我不明白：

1）为什么我必须使用`#define CHAR_BIT 8`正确的输出？

2）如何`ieee`用正确的位值填充数组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T12:44:43.857

1）因为您需要将字节大小（就是这样`sizeof(float)`）转换为位大小（这是`bitset`预期的）。

2）在我看来，您已经将正确的位值放入`ieee`. 你能举个例子并说明你为什么认为它是错误的。

# qt - 在 ubuntu 12.04 上编译和构建 qt4

> ID：13100276
> 
> 赞同：5
> 
> 时间：2012-10-27T12:40:48.817
> 
> 标签：qt, qt4

我正在尝试从源代码编译和构建 Qt 4.8.3。当我执行 ./configure 时，我收到以下错误消息：

```
./configure: 183: ./configure: /^(QMAKE_CXX)=/ { print substr($0, index($0, "=") + 1) }: not found
ERROR: Cannot set the compiler for the configuration tests 
```

这是因为我需要显式设置 QMAKE_CXX 变量吗？谢谢

# emacs - Latex 片段与 Emacs 中的 Rnw 模式相关联

> ID：13100277
> 
> 赞同：1
> 
> 时间：2012-10-27T12:41:11.697
> 
> 标签：emacs, latex, sweave, yasnippet

我想让我的乳胶模式的 yasnippets 可用于 .Rnw 文件。如何解决这个问题？此外，如果有 R 片段可用也很好。

**编辑：** 我发现真正的问题是，在 .Rnw 中，`TAB`密钥未绑定到 yasnippets。有谁知道如何解决这个问题而不搞砸任何事情？（它必然`noweb-indent-line`）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T20:33:14.287

我厌倦了无法更改 , 的键盘映射`noweb-minor-mode-map`以及我放弃的任何内容，只是从 ess-indent 中删除了代码并将其替换为`ess-noweb-mode-map`( )`local-set-key``yas-expand`

# vb.net - 如何在 windows phone 7 上从 vb.net 打开浏览器窗口？

> ID：13100288
> 
> 赞同：0
> 
> 时间：2012-10-27T12:43:59.717
> 
> 标签：vb.net, windows-phone-7, url

这是一个非常简单的问题，但我找不到解决方案。当用户单击按钮时，我在 VB.NET for Windows Phone 7 上的应用程序需要打开一些 Web 链接。

单击按钮 -> 带有链接的 Internet Explorer 应用程序打开。

但是如何实现呢？:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T13:44:53.927

1）将以下语句添加到您的代码中。

```
Imports Microsoft.Phone.Tasks 
```

2) 将以下代码添加到您需要的应​​用程序中，例如在按钮单击事件中。

```
Dim webBrowserTask as WebBrowserTask = new WebBrowserTask()
webBrowserTask.Uri = new Uri("http://www.google.com", UriKind.Absolute)
webBrowserTask.Show() 
```

# asp.net-mvc - RequireHttpsAttribute 是否对托管服务提供商有任何要求？

> ID：13100290
> 
> 赞同：0
> 
> 时间：2012-10-27T12:44:21.963
> 
> 标签：asp.net-mvc, security, https, hosting, web-hosting

我想发布一个网站。我希望网站通过 HTTPS 运行。我已经阅读了requirehttpsattribute：http: [//msdn.microsoft.com/en-us/library/system.web.mvc.requirehttpsattribute.aspx](http://msdn.microsoft.com/en-us/library/system.web.mvc.requirehttpsattribute.aspx)

https 是在应用程序级别完成的，还是托管服务提供商也需要支持？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T12:47:47.083

HTTPS（或带有 SSL 的 HTTP）是常规的 HTTP，但在 OSI 模型中有一个额外的层。在 HTTP 层之前是 SSL 层。实际上，在您访问 HTTP 协议之前，您必须解密 SSL 协议。由于 .NET 与 HTTP 协议（​​有点……）对抗，因此必须首先解密 SSL 协议，并且该人是您的 Web 服务器。

所以是的，您的托管服务提供商必须支持 SSL，并为您的应用程序配置 SSL，除此之外，您可能需要一个专用的 IP 地址和证书。

不，HTTPS 对 SEO 没有负面影响。

# objective-c - iPhone 4 和 5 的图像

> ID：13100298
> 
> 赞同：0
> 
> 时间：2012-10-27T12:45:10.420
> 
> 标签：objective-c, ios, image, cocoa-touch

我想知道，因为我使用这种方法让我的应用程序根据它是 iPhone 4 还是 5 屏幕自动选择背景图像：

```
NSString *background = @"image.png";
NSString *background5 = @"image-568.png"; 

CGRect screenBounds = [[UIScreen mainScreen] bounds];
if (screenBounds.size.height == 568) {
    // code for 4-inch screen
    self.view.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:background5]];
} else {
    // code for 3.5-inch screen
    self.view.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:background]];

} 
```

但我的问题是。如果我有一个我也想自动选择的按钮的图像，我可以为我用于背景的按钮使用相同的代码：

```
self.view.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:background]]; 
```

或者我应该有一些其他的按钮代码？我使用 Xcode 4.5

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T12:49:22.730

您应该使用 UIButton 的方法来设置图像：

```
UIImage *btnImage = [UIImage imageNamed:@"image.png"];
[button setImage:btnImage forState:UIControlStateNormal]; 
```

或者

```
[button setBackgroundImage:btnImage forState:UIControlStateNormal]; 
```

# c++ - 如何将 const weak_ptr 放入 STL 容器

> ID：13100300
> 
> 赞同：1
> 
> 时间：2012-10-27T12:45:52.827
> 
> 标签：c++, stl, c++11, smart-pointers

我有一个类*TileManager*管理对象的生命周期，因此在它们上保存一个 shared_ptr ：

```
class TileManager {
private:
    std::vector<std::shared_ptr<const Tile>> tiles;
} 
```

现在我有另一个类*Map它包含对**TileManager*管理的对象的非拥有引用：

```
class Map {
private:
    std::vector<std::weak_ptr<const Tile>> tiles;
} 
```

我的问题是：我不希望*Map*类能够操纵指向*Tile*的智能指针。因此，我想在*向量*const 中创建指针：

```
class Map {
private:
    std::vector<const std::weak_ptr<const Tile>> tiles;
} 
```

不幸的是，不可能将 const 对象放入 STL 容器中。

有人知道解决方案吗？也许是完全不同的设计？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T12:55:14.893

存储在 a 中的元素`vector`不能是`const`因为它们必须是可分配的。`vector`可以以任何可观察的方式“操纵”指针的唯一方法是销毁`weak_ptr`给定对象的最后一个，这将导致相应对象的控制块`shared_ptr`被释放（假设没有其他`shared_ptr`仍然引用它） .

简而言之，您可以安全地将 non- 存储`const` `weak_ptr`在向量中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T12:51:55.690

如果可能，您可以使用`std::set`. 由于从集合中访问数据的唯一方法仅提供 const 引用或 const 迭代器，因此您不能直接操作这些值。

为此，您将使用

`std::set<std::weak_ptr<const Tile>, std::owner_less<std::weak_ptr<const Tile>>>`.

另一种非技术解决方案是通过设计来实现，因为它可能是您的类的私有成员：只需在您的类设计中说“不要重置或覆盖弱指针”。

# c++ - 虚拟表的解释

> ID：13100302
> 
> 赞同：9
> 
> 时间：2012-10-27T12:46:17.250
> 
> 标签：c++, gcc, g++, vtable

> **可能重复：**
> [了解 vtable 条目](https://stackoverflow.com/questions/5712808/understanding-the-vtable-entries)

使用 g++ 4.6.3 版，64 位机器。我知道编译器可以随意实现虚函数。我想知道这里发生了什么。

我的课：

```
#include <iostream>
class test
{
    public:
    virtual void func(){std::cout<<"in class test";}
};

int main()
{
    test obj;
    obj.func();
    return 0;
} 
```

查看编译器生成的虚拟表，

```
Vtable for test
test::_ZTV4test: 3u entries
0     (int (*)(...))0 (<---- what is this? )
8     (int (*)(...))(& _ZTI4test)
16    (int (*)(...))test::func 
```

在偏移量 8 处是 RTTI

在偏移量 16 处，它是虚拟功能的入口。

我的问题是为什么在偏移量 0 处有 NULL 条目，或者换句话说，第一个条目的目的是什么？

PS 我认为这可能与对齐有关，但后来我添加了更多虚拟功能，但 RTTI 条目仍然在偏移量 8 处。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-27T13:40:49.137

我相信第一个条目或 0 处的条目是顶部指针的偏移量。

请参阅[以下相关的 stackoverflow 问题](https://stackoverflow.com/questions/5712808/understanding-the-vtable-entries)

从您的源代码中查看剩余的 -fdump-class-hierarchy ，大多数类似乎都有第一个条目作为`(int (*)(...))0`，唯一没有将它作为第一个条目的类将它作为第二个条目并将第一个条目作为给定流的 C++ STL 类层次结构的父类的偏移量。

在相关问题中，给出了一些 vtable 示例的死链接，我相信该链接的实时版本可[在此处获得](http://mentorembedded.github.com/cxx-abi/cxx-vtable-ex.html)

另一个详细说明 vtables 结构的有用资源在[这里](http://cppcoder.blogspot.jp/2008/04/virtual-table.html)。

# c - （C基础）LinkedList：插入方法后局部元素被删除

> ID：13100303
> 
> 赞同：0
> 
> 时间：2012-10-27T12:46:25.073
> 
> 标签：c, linked-list

我需要用 C 编写一个 LinkedList，我在文件中定义了结构，因为`struct element { int value; struct element * next; };` 我还定义了一个 head 元素。这两个都不是本地的，它们是在整个运行时持续存在的变量。当我尝试使用来自外部的 -values 将元素插入到 LinkedList 中`int`时，我需要`element`在 this 周围加上一个`int`. 我通过创建一个局部变量来做到这一点`struct element e = { value; 0 };`。如果 head 为空，我将其设为 head，否则我使用 for 循环附加它。

`e`我想的问题是，类型的局部变量`struct element`在终止该函数时被删除。因此，如果我将头指向`e`，它将继续指向未分配的内存点，因为局部变量`e`不会在函数调用之后持续存在。

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-27T12:49:19.513

那是因为`struct element e = { value; 0 };`在堆栈上分配元素。当函数范围终止时，堆栈会自动释放（删除）。寻址活动范围的堆栈内存是完全有效的，但已终止的范围是未定义的行为。

您需要通过在堆上分配它`malloc(sizeof(struct element));`以使其在函数范围内持续存在。

```
struct element *e = calloc(1, sizeof(struct element));
e->value = value;

return e; 
```

注意：`calloc`分配归零内存，`malloc`分配未定义内容的内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T12:53:50.793

您必须使用**struct element**类型列表的动态分配项。

```
p_element = (struct element*)malloc(sizeof(struct element));
// check if successfully allocated
// initialize element fields: p_element->value = ...
p_element->next = NULL; // always terminator
if (!gp_head_element)
    // initialize head
    gp_head_element = p_element;
else {
    //  search for the end of list and append
} 
```

# c - “if”语句的三元运算符

> ID：13100308
> 
> 赞同：1
> 
> 时间：2012-10-27T12:47:30.937
> 
> 标签：c, ternary-operator

嘿，伙计们，我想知道是否有一种方法可以在不使用三元运算符的情况下通过使用 if 语句来编写此代码，这是我在 time 运算符时遇到的代码：

```
 int x1 = place.getX();
 int x2 = x1 +
   ((direction == direction.NORTH || direction == direction.SOUTH ? shipLength : shipWidth) - 1) *
   (direction == direction.NORTH || direction == direction.EAST ? -1 : 1);
 int y1 = place.getY();
 int y2 = y1 +
   ((direction == direction.NORTH || direction == direction.SOUTH ? shipWidth : shipLength) - 1) *
   (direction == direction.WEST || direction == direction.NORTH ? -1 : 1); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T15:32:12.747

少意大利面的版本：

```
int x1 = place.getX();
int y1 = place.getY();
int x2, y2;
switch(direction) {
case NORTH:
  x2 = x1-(shipLength-1);
  y2 = y1-(shipWidth-1);
  break;
case SOUTH:
  x2 = x1+(shipLength-1);
  y2 = y1+(shipWidth-1);
  break;
case EAST:
  x2 = x1-(shipWidth-1);
  y2 = y1+(shipLength-1);
  break;
case WEST:
  x2 = x1+(shipWidth-1);
  y2 = y1-(shipLength-1);
  break;
default:
  x2 = x1+(shipWidth-1);
  y2 = y1+(shipLength-1);
  //printf("Your ship seems to be sinking!\n");
  //exit(1);
} 
```

如果你特别想要`if`-`else if`版本，上面的转换应该是微不足道的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T12:57:39.917

```
int x1 = place.getX();
int x2
if(direction == direction.NORTH || direction == direction.SOUTH){
    x2 = x1 + shipLength -1;
    if(direction == direction.NORTH || direction == direction.EAST)
        x2 *= -1;
}else{
    int x2 = x1 + shipWidth-1;
    if(direction == direction.NORTH || direction == direction.EAST)
        x2 *= -1;
}

int y1 = place.getY();
int y2;
if(direction == direction.NORTH || direction == direction.SOUTH){
    y2 = y1 + shipWidth-1;
    if(direction == direction.NORTH || direction == direction.WEST)
        y2 *= -1;
}else{
    int y2 = y1 + shipLength-1;
    if(direction == direction.NORTH || direction == direction.WEST)
        y2 *= -1;
} 
```

我认为三元运算符在语句较小的情况下是一个不错的选择，`int x = (y == 10? 1 : -1);`否则代码开始变得不可读并且问题的纠正开始变得更加复杂

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T12:54:59.610

以下是如何将 x2 转换为条件的方法：

```
int x2 = x1 + shipWidth-1;
if(direction == direction.NORTH || direction == direction.SOUTH)
{
     x2 = x1 + shipLength-1;
}
if (direction == direction.NORTH || direction == direction.EAST)
{
     x2 = -x2;
} 
```

您可以将相同的原则应用于 y2，但三元语句更清晰（我认为可能存在性能差异，不确定） - 我个人会按原样使用它。

三元运算符只是编写条件的一种更简单的方法，对于内联添加它们最有用（就像这里的情况一样），语法很简单：

```
CONDITION ? (DO IF TRUE) : (DO IF FALSE) 
```

它们也可以用于赋值：

```
int myInt = aCondition ? 1 : -1;//Makes myInt 1 if aCondition is true, -1 if false 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-27T13:04:24.053

在 GNU 语法中，以下语句是等价的

```
condition ? a : b 
```

和

```
({if (condition)
    a;
else
    b;}) 
```

后一个是 GNU 扩展，但大多数编译器都支持它。第一个是内联写虽然简单得多

# d3.js - 更改 x 轴上的刻度

> ID：13100314
> 
> 赞同：35
> 
> 时间：2012-10-27T12:48:01.357
> 
> 标签：d3.js

我正在尝试找出 d3.js。在定义轴时，如何在 x 轴上获得自定义标签。例如，我得到的默认标签是：

```
|------|------|------|------|------|------|
20    30     40     50     60     70     80 
```

鉴于，我想要类似的东西：

```
|------|------|------|------|------|------| ....
20    26      32    38     44     50     56 
```

我目前正在学习它并从提供的官方示例中处理代码（稍作修改）：

```
var xAxis = d3.svg.axis().scale(x).tickPadding(7).orient("bottom");
var yAxis = d3.svg.axis().scale(y).tickPadding(5).orient("left"); 
```

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-10-27T16:45:53.487

定量刻度的默认刻度是 2、5 和 10 的倍数。您似乎想要 6 的倍数；虽然不寻常，但根据基础数据的性质，这可能是有意义的。因此，虽然您可以使用[axis.ticks](https://github.com/d3/d3-axis#axis_ticks)来增加或减少滴答计数，但它始终会返回 2、5 和 10 的倍数，而不是 6。

如果您想要 6 的倍数，您可以使用[axis.tickValues](https://github.com/d3/d3-axis#axis_tickValues)明确指定刻度值。这通常与[d3.range](https://github.com/d3/d3-array/blob/master/README.md#range)结合使用。例如：

```
xAxis.tickValues(d3.range(20, 80, 4)); 
```

如果要动态计算值，请使用 x-scale 的域来检索最低和最高值。还要记住，范围的上限是互斥的，因此在上面的示例中，最大刻度值为 76。您可以通过使范围的停止值稍大（例如，81）来使上限包含在内。

# php - 一般来说，如何防止 PHP 中的 Mysql_fetch_assoc 错误？

> ID：13100315
> 
> 赞同：-3
> 
> 时间：2012-10-27T12:48:08.810
> 
> 标签：php, mysql, syntax

> **可能重复：**
> [警告：mysql_fetch_array() 期望参数 1 是资源，布尔值在 problema con el wile 中给出](https://stackoverflow.com/questions/13049348/warning-mysql-fetch-array-expects-parameter-1-to-be-resource-boolean-given-i)

当我执行 login form 时，我会遇到以下错误：

> 警告：mysql_fetch_assoc() 期望参数 1 是资源，布尔值在第 22 行的 C:\xampp\htdocs\login\check.php 中给出

```
 <?php

  include_once ("function.php");

  $username = $_POST['tfuser'] ;
  $password = $_POST['tfpass'] ;

  if (isset($username) && isset($password)){

    $link = mysql_connect('localhost','root','') or die ('error in connecting to db');
    mysql_select_db('login',$link) or die ('error select db');

    $sql = "select from * from administration 
    where username='$username' and password='$password'";

    $result = mysql_query($sql,$link);

    if (mysql_fetch_assoc($result)){
         //login to panel 
         redirect("panel.php");
    } else {
        //back to login page
    }

  } else {
      //back to login page
      redirect("index.php");
  }

  ?> 
```

现在如何防止此错误显示并防止 Mysql_fetch_assoc 错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T12:55:34.010

## 请阅读[SQL 注入](http://php.net/manual/en/security.database.sql-injection.php)。

您收到以下错误，因为您的 SQL 语句执行失败。

`Warning: mysql_fetch_assoc() expects parameter 1 to be resource, boolean given in C:\xampp\htdocs\login\check.php on line 22`

您的 SQL 查询位于：

```
$result = mysql_query($sql,$link); 
```

返回`FALSE`。这就是为什么当你使用`mysql_fetch_assoc()`它时会返回一个警告。

要解决此问题，请确保您`$result`包含 mysql 资源。一种方法是在 SQL 查询失败的情况下停止脚本执行。你可以这样做：

```
$result = mysql_query($sql,$link) OR die(mysql_error()); 
```

这将向您展示您的 SQL 执行失败的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T13:21:13.987

您的 mysql 查询为 false，结果显示错误警告：mysql_fetch_assoc() 期望参数 1 是资源，在第 22 行的 C:\xampp\htdocs\login\check.php 中给出的布尔值您得到了这个，因为您使用了错误的方式 $result = mysql_query($sql,$link);//方法不正确 $result = mysql_query($sql);//方法正确

发生此错误是因为查询无法获取任何结果。处理这些类型错误的最佳方法是回显查询并在浏览器屏幕中查看查询的输出。剪切查询部分并将其粘贴到 sql 并运行。确保它会返回错误.. ……

# iphone - 如何实现从网站到表格视图单元格的值和文本？

> ID：13100317
> 
> 赞同：0
> 
> 时间：2012-10-27T12:48:16.363
> 
> 标签：iphone, ios

抱歉，我是 ios 编程的新手。所以我的问题是：

我有一个网站，在这个网站上有一些包含特定汽车信息的单元格。现在我将把其中一些信息，比如价格，放入带有图像的 tableview 单元格的一行中。我用来显示图像：

```
imageview.image = [UIImage imageWithData: [NSData dataWithContentsOfURL:[NSURL URLWithString:"link of image"]]]; 
```

我想在 tableview 上显示汽车的标题，你可以在网站上找到它。

网站是：[这里](http://home.mobile.de/MOLTER-UNFALLWAGEN#ses)

有没有人建议这样做？

感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T13:10:58.560

使用 html 解析并获取数据“[使用此链接](https://stackoverflow.com/questions/3020849/simple-libxml2-html-parsing-example-using-objective-c-xcode-and-htmlparser-h)”，[示例](https://github.com/zootreeves/Objective-C-HMTL-Parser)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T15:19:19.853

然后，如果您可以访问数据库，那么您可以编写自己的服务器端代码以使用 php 生成 xml 或 json 数据从数据库中获取数据。在服务器上有这个 php 代码，通过使用链接，您的应用程序以 xml 或 json 形式从服务器获取数据。

然后解析这些数据并显示在您的应用程序中。

您可以通过 raywenderlich 完成本教程，

[如何为 iOS 应用编写简单的 PHP/MySQL Web 服务](http://www.raywenderlich.com/2941/how-to-write-a-simple-phpmysql-web-service-for-an-ios-app)

# android - GCM：来自 GCMIntentService 的 onMessage() 永远不会被调用

> ID：13100318
> 
> 赞同：0
> 
> 时间：2012-10-27T11:27:22.337
> 
> 标签：android

我正在`GCM (Google Cloud Messaging- PUSH Notifications)`我的应用程序中实施。我已按照 developer.android.com 的 GCM 教程中给出的所有步骤进行操作

我的应用程序的构建目标指向`Goolge API 8 (Android 2.2 version)`.

我能够从 GCM 成功获取注册 ID，并将此 ID 传递给我的应用程序服务器。这样注册步骤就成功执行了。

现在，当我的应用程序服务器向我的设备发送 PUSH 消息时，服务器收到的消息为`SUCCESS=1 FAILURE=0, etc.`，即服务器发送消息成功，但我的设备从未收到消息。

经过大量搜索，我知道 GCM 在端口号 5228、5229 或 5230 上推送消息。

最初，我的设备和笔记本电脑被限制访问某些网站，但后来我被授予访问所有网站的所有权限，所以我猜这些端口号对我的设备是开放的。

所以我的问题是：**我从未收到来自 GCM 的任何 PUSH 消息。我的 GCMIntenService 类的 onMessage() 永远不会被调用。可能是什么原因？**

请参阅我的以下代码并相应地指导我：

我在我的清单中声明了以下内容：

```
<uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="8" />

    <permission
        android:name="package.permission.C2D_MESSAGE"
        android:protectionLevel="signature" />

    <!-- App receives GCM messages. -->
    <uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />

    <!-- GCM connects to Google Services. -->
    <uses-permission android:name="android.permission.INTERNET" />

    <!-- GCM requires a Google account. -->
    <uses-permission android:name="android.permission.GET_ACCOUNTS" />

    <!-- Keeps the processor from sleeping when a message is received. -->
    <uses-permission android:name="android.permission.WAKE_LOCK" />
    <uses-permission android:name="package.permission.C2D_MESSAGE" />
    <uses-permission android:name="android.permission.INTERNET" />

    <receiver
            android:name="com.google.android.gcm.GCMBroadcastReceiver"
            android:permission="com.google.android.c2dm.permission.SEND" >
            <intent-filter>
                <action android:name="com.google.android.c2dm.intent.RECEIVE" />
                <action android:name="com.google.android.c2dm.intent.REGISTRATION" />

                <category android:name="packageName" />
            </intent-filter>
        </receiver>
        <receiver
            android:name=".ReceiveBroadcast"
            android:exported="false" >
            <intent-filter>
                <action android:name="GCM_RECEIVED_ACTION" />
            </intent-filter>
        </receiver>

        <service
            android:name=".GCMIntentService"
            />

/**
 * @author Shrikant.
 * 
 */
public class GCMIntentService extends GCMBaseIntentService {

    /**
     * The Sender ID used for GCM.
     */
    public static final String SENDER_ID = "myProjectID";

    /**
     * This field is used to call Web-Service for GCM.
     */
    SendUserCredentialsGCM sendUserCredentialsGCM = null;

    public GCMIntentService() {
        super(SENDER_ID);
        sendUserCredentialsGCM = new SendUserCredentialsGCM();
    }

    @Override
    protected void onRegistered(Context arg0, String registrationId) {
        Log.i(TAG, "Device registered: regId = " + registrationId);
        sendUserCredentialsGCM.sendRegistrationID(registrationId);
    }

    @Override
    protected void onUnregistered(Context context, String arg1) {
        Log.i(TAG, "unregistered = " + arg1);
        sendUserCredentialsGCM
                .unregisterFromGCM(LoginActivity.API_OR_BROWSER_KEY);
    }

    @Override
    protected void onMessage(Context context, Intent intent) {
        Log.e("GCM MESSAGE", "Message Recieved!!!");
        String message = intent.getStringExtra("message");
        if (message == null) {
            Log.e("NULL MESSAGE", "Message Not Recieved!!!");
        } else {
            Log.i(TAG, "new message= " + message);
            sendGCMIntent(context, message);
        }
    }

    private void sendGCMIntent(Context context, String message) {
        Intent broadcastIntent = new Intent();
        broadcastIntent.setAction("GCM_RECEIVED_ACTION");
        broadcastIntent.putExtra("gcm", message);
        context.sendBroadcast(broadcastIntent);
    }

    @Override
    protected void onError(Context context, String errorId) {
        Log.e(TAG, "Received error: " + errorId);
        Toast.makeText(context, "PUSH Notification failed.", Toast.LENGTH_LONG)
                .show();
    }

    @Override
    protected boolean onRecoverableError(Context context, String errorId) {
        return super.onRecoverableError(context, errorId);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T12:36:28.513

如果您重命名了包名称，您应该覆盖 GCMBroadcastReceiver 子类中的 getGCMIntentServiceClassName() 方法。[这里](http://dexxtr.com/post/28188228252/rename-or-change-package-of-gcmintentservice-class)的例子。

# c# - 为什么我会得到这个内存不足异常？

> ID：13100319
> 
> 赞同：0
> 
> 时间：2012-10-27T12:48:27.550
> 
> 标签：c#, .net, bitmap

我有这个 C# 段代码：

```
 string fileName = Path.GetTempPath() + "\\temp.bmp";
        image.Save(fileName);
        bmp = (Bitmap)Image.FromFile(fileName); 
```

在这一行： bmp = (Bitmap)Image.FromFile(fileName);

我得到这个例外：

```
**System.OutOfMemoryException was unhandled
Message=Out of memory.
Source=System.Drawing
StackTrace:
   at System.Drawing.Image.FromFile(String filename, Boolean useEmbeddedColorManagement)
   at System.Drawing.Image.FromFile(String filename)
   at WindowsFormsApplication1.ShowContoursForm..ctor(Templates samples, IImage image) in C:\Michael work\MyContourAnalysis\WindowsFormsApplication1\ShowContoursForm.cs:line 40
   at WindowsFormsApplication1.Form1.tsbDislpayContours_Click(Object sender, EventArgs e) in C:\Michael work\MyContourAnalysis\WindowsFormsApplication1\MainForm.cs:line 170
   at System.Windows.Forms.ToolStripItem.RaiseEvent(Object key, EventArgs e)
   at System.Windows.Forms.ToolStripButton.OnClick(EventArgs e)
   at System.Windows.Forms.ToolStripItem.HandleClick(EventArgs e)
   at System.Windows.Forms.ToolStripItem.HandleMouseUp(MouseEventArgs e)
   at System.Windows.Forms.ToolStripItem.FireEventInteractive(EventArgs e, ToolStripItemEventType met)
   at System.Windows.Forms.ToolStripItem.FireEvent(EventArgs e, ToolStripItemEventType met)
   at System.Windows.Forms.ToolStrip.OnMouseUp(MouseEventArgs mea)
   at System.Windows.Forms.Control.WmMouseUp(Message& m, MouseButtons button, Int32 clicks)
   at System.Windows.Forms.Control.WndProc(Message& m)
   at System.Windows.Forms.ScrollableControl.WndProc(Message& m)
   at System.Windows.Forms.ToolStrip.WndProc(Message& m)
   at System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m)
   at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
   at System.Windows.Forms.NativeWindow.DebuggableCallback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)
   at System.Windows.Forms.UnsafeNativeMethods.DispatchMessageW(MSG& msg)
   at System.Windows.Forms.Application.ComponentManager.System.Windows.Forms.UnsafeNativeMethods.IMsoComponentManager.FPushMessageLoop(IntPtr dwComponentID, Int32 reason, Int32 pvLoopData)
   at System.Windows.Forms.Application.ThreadContext.RunMessageLoopInner(Int32 reason, ApplicationContext context)
   at System.Windows.Forms.Application.ThreadContext.RunMessageLoop(Int32 reason, ApplicationContext context)
   at System.Windows.Forms.Application.Run(Form mainForm)
   at WindowsFormsApplication1.Program.Main() in C:\Michael work\MyContourAnalysis\WindowsFormsApplication1\Program.cs:line 18
   at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
   at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
   at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
   at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.ThreadHelper.ThreadStart() 
```

内部异常：**

任何想法为什么我会得到这个异常，我该如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T12:54:21.633

看起来这是您的图像文件的格式问题。有关[FromFile 方法](http://msdn.microsoft.com/en-us/library/stf701f5.aspx)异常，请参见此处。

# ruby - 在输入行中查找产品种类

> ID：13100320
> 
> 赞同：1
> 
> 时间：2012-10-27T12:48:31.450
> 
> 标签：ruby, regex, match

这是我试图解决的以下问题。我将说明我是如何做到的，并且我正在寻找一种**不太复杂**（并且更简洁：P）的方法。

给定这样的输入：

第一次输入

```
1 soccer ball costs 30 
1 piano costs 500
1 guitars costs 200 
```

第二输入

```
1 luxury bottle of whiskey costs 10.20
1 package of luxury caviar costs 53 
```

我想计算每行的最终价格和每个输入的最终价格。为了计算每条线的最终价格，我考虑到：

*   如果处理的项目与运动有关，我想加 2（所以第一行是 32）。如果是音乐项目，我想加 4（所以第二行是 504）。
*   如果处理的项目与食物相关，我想加 5（所以第二个输入的两行都会增加 5）。
*   如果加工的商品是奢侈品，我想加10。

我在一件事上遇到了麻烦：

*   识别并映射特定行中的项目类型。

使用正则表达式，我能够找到应该是项目的那部分行：

```
soccer ball
piano
guitars
bottle of whisky
package of caviar 
```

我知道这可能是一个非常通才的问题，但我想知道什么是找到每个项目的好方法的好方法。

现在我有一个这样的结构：

```
{"soccer" => "sports", "piano" => "music", "guitars" => "music", "whisky" => "food", "caviar" => "food"} 
```

然后我尝试将我的哈希的任何键与特定行中的项目匹配。你能想出更好的方法、API 或任何可以降低复杂性的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T12:51:18.867

你有一个倒置的层次结构。数组中的每个键都应该是一个类别，值应该是属于该类别的所有项目的数组。

```
{"sports"=> ["soccer"], "music" => ["guitars", "piano"], "food" => ["caviar","whisky"]} 
```

# php - 由 MySQL 填充的下拉菜单上的子类别

> ID：13100321
> 
> 赞同：0
> 
> 时间：2012-10-27T12:48:45.070
> 
> 标签：php, mysql

我是通过 MySQL 创建菜单的新手，需要一个树结构。但是，它不起作用，如[http://www.mattmaclennan.co.uk/a2所示](http://www.mattmaclennan.co.uk/a2)

我需要做的是将型号分组到每个类别中，但不知道该怎么做。这是我的PHP代码：

```
<?
$output = mysql_query("SELECT * FROM bikes, bikeTypes WHERE bikes.model_id = bikeTypes.model_id");
echo "<ul>";
while($row = mysql_fetch_array($output))
{
echo "<li>" . $row['model'];
echo "<ul>";
echo "<li>" . $row['bikeName'] . "</li>";
echo "</ul>";
echo "</li>";
}
echo "<ul>";
?> 
```

我有一个包含类别的表（例如 Adventure、125CC 等）和一个型号表。它发现数据很好，只是将其组织在正确的结构中，这令人困惑。有什么想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T13:01:41.200

尝试

```
$result = array();
while($row = mysql_fetch_array($output))
{
  $result[$row['your_category_field_name']][] = $row;
}

foreach ($result as $category => $values) {
  echo '<h4>'.$category.'</h4><ul>';
  foreach ($values as $value) {
    echo "<li>" . $value['model'];
    echo "<li>" . $value['bikeName'] . "</li>";
  }
  echo '</ul>'; 
```

}

# javascript - .html 中的 Jquery if 语句

> ID：13100322
> 
> 赞同：1
> 
> 时间：2012-10-27T12:48:58.377
> 
> 标签：javascript, jquery

我一直在尝试让一些 jQuery 运行来替换对象的 html。但是我怎样才能在里面放一个 if 语句，就像这样。

```
$(this).html("<select id=\'status\' name=\'status[]\' multiple><option value=\'1\'"+if(string_contains(selected, 1)) { document.write(\' SELECTED\'); }+"></option></select>"); 
```

if 语句使它停止工作。

还有一个小问题。

为什么我不能像这样打破 .html 内部：

```
 $(this).html("
<select id=\'status\' name=\'status[]\' multiple>
<option value=\'1\'"+if(string_contains(selected, 1)) { document.write(\' SELECTED\'); }+"></option>
</select>"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-27T12:52:24.910

你所拥有的只是语法不正确。

```
$(this).html("<select id=\'status\' name=\'status[]\' multiple><option value=\'1\'" +
  (string_contains(selected, 1) ? "\' SELECTED\'" : "") +
  "></option></select>"
); 
```

`if`声明就是——一个**声明**。它不能作为 JavaScript 表达式的一部分。但是，`? :`运营商会做你想做的事。它采用以下形式：

```
query ? expr1 : expr2 
```

`query`表达式被评估。如果结果是“真实的”，则总体结果是`expr1`; 否则，它是 的值`expr2`。的运算符优先级`? :`非常低，因此将整个内容括起来通常是个好主意。

# c++ - 升级到 g++ 4.7（支持 c++11）：任何 ABI 不兼容？

> ID：13100324
> 
> 赞同：2
> 
> 时间：2012-10-27T12:49:19.623
> 
> 标签：c++, windows, mingw, chilkat

在 Windows 上，当使用 g++ 4.6 (mingw) 和 -std=c++0x 并与第三方静态库（由供应商提供用于 mingw 的）链接时，应用程序运行良好。当我切换到 g++ 4.7.2 (mingw) 以便可以使用 -std=c++11 时，应用程序构建良好，但运行时崩溃。如果我注释掉对供应商提供的库的调用，那么它不会崩溃。我询问了图书馆供应商的客户支持，并被告知不支持此功能。

我的问题是，在使用更新版本的 g++ 编译器时，“是否存在任何 ABI 不兼容性”？它不向后兼容吗？新版本的编译器不应该与现有和遗留的第 3 方静态库一起使用吗？

请注意，这只发生在 Windows (mingw) 平台上。在 Linux 上运行良好。

我已经添加了更多信息：

有没有人在 Windows 应用程序中使用过 Chilkat 的 MinGW C++（静态）库，其源代码是用 g++ 4.7.2 和 -std=c++11 编译选项编译的？访问 Chilkat api 时应用程序崩溃（例如，实例化 CkString 对象）。在 g++ 4.6.2（我使用 std=c++0x）上运行良好。在带有 g++ 4.7.2 的 Linux 上，该程序运行良好。如果从 4.6.2 迁移到 4.7.2 时 ABI 不兼容，那么它也不应该在 Linux 上工作，对吧？为什么供应商创建的用于 MINGW 的静态库 chilkat-9.3.2/lib/libchilkat.a 会关心是否使用最新的 g++ 编译器编译程序的其余部分 --- 这是 ABI 中 MINGW 的特定更改吗？

```
#include <windows.h>
#include <stdio.h>
#include <CkString.h>
int main(int argc, char *argv[]) {
  printf("测试chilkat\n");
  CKString str1;
  printf("测试完成\n");
}

```

```
gdb -i=mi test_chilkat.exe
启动程序：test_chilkat.exe
[新线程 4704.0x1a44]

程序收到信号 SIGSEGV，分段错误。
0x00404442 在 CkObject::CkObject() ()

```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T07:59:15.313

MinGW 4.6.2 肯定会生成与`CkString`4.7.2 不同的代码来调用构造函数。

这是我用来将您的测试程序编译为汇编代码文件的命令行（`./include`Chilkat 标头的位置在哪里）：

```
g++ -I ./include -S -masm=intel -std=gnu++0x test.cpp 
```

`printf()`以下是由两个调用（GCC 生成为`puts()`调用）所记录的带注释的反汇编。

*   4.6.2：

    ```
    call    _puts

    lea eax, [esp+28]           ; eax gets pointer to `str1` being constructed
    mov DWORD PTR [esp], eax    ; put the `str1` pointer on the stack
    call    __ZN8CkStringC1Ev   ; call `CkString::CkString()` ctor

    mov DWORD PTR [esp], OFFSET FLAT:LC1
    call    _puts 
    ```

*   4.7.2：

    ```
    call    _puts

    lea eax, [esp+28]           ; eax gets pointer to `str1` being constructed
    mov ecx, eax                ; ecx gets `str1` "this" pointer
    LEHB0:
    call    __ZN8CkStringC1Ev   ; call `CkString::CkString()` ctor

    mov DWORD PTR [esp], OFFSET FLAT:LC1
    call    _puts 
    ```

如您所见，4.6.2 将“this”指针传递给堆栈上的构造函数（这是 Chilkat 库所期望的）。4.7.2 将“this”指针传入`ecx`.

它看起来像从 4.7.0 开始。MinGW 将 C++ 类成员调用约定更改为`__thiscall`. 见[http://mingw-users.1079350.n2.nabble.com/MinGW-GCC-4-7-0-released-td7578133.html](http://mingw-users.1079350.n2.nabble.com/MinGW-GCC-4-7-0-released-td7578133.html)

看起来您可以使用该`-mabi=sysv`选项覆盖该默认值，这使您的测试程序对我有用：

```
C:\temp>g++ --version
g++ (GCC) 4.7.2
...

C:\temp>g++ -mabi=sysv -I ./include -g -Wl,--enable-auto-import test.cpp -o test.exe libchilkat-9.3.2.a

C:\temp>test
test chilkat
test done 
```

但是，您可能会在更复杂的程序中使用其他库给自己带来更多麻烦——例如，您几乎可以肯定`libstdc++.a`至少需要重新构建。

我会向 Chilkat 开发人员要求更多 4.7.x 库...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T14:54:48.720

我是供应商 (Chilkat)，对 Babu 的回答不是“不支持”，而是“尚未支持”。

在每个 Chilkat 版本之间，不可避免地会有需要支持的新系统。每一个都需要时间（在 Chilkat）来生产用于构建和分发的自动化系统。站在新事物的最前沿，并期望它立即得到 Chilkat 的支持，这有点不合理。

目前，Chilkat 计划支持以下新系统：Windows Phone 8、Embarcadero XE3、Mono（跨平台适用于 Windows、Linux、MAC OS X、iOS、Android 等）、任何新版本的 Perl、 Python、PHP 等，例如 Python 3.3.0、Android for MIPS 和 x86。Chilkat 还将以其他不一定是“新”的方式提供 API，例如以类似于“C”API 的方式提供 DLL/.so/.dylib 功能库。

作为跨平台 API 合理性的一部分，重要的内部开发正在进行中。例如，“Ck*”C++ 头文件和实现将完全生成。.NET 程序集托管的标头和实现也是如此，它们中的每一个都调用相同的内部实现。这将做两件事（1）消除平台之间的任何不一致，以及（2）允许对外层进行改进/更改。例如，如果需要为每个 C++ 类方法添加调用约定修饰符。也许添加“ _stdcall *”或“* _chilkat_call”，其中“__chilkat_call”可以在一个地方定义为空，“_ *stdcall”或“*_thiscall" 会有所帮助。这将在生成 Ck* 标头和方法时成为可能。

总而言之，您的需求将在未来几个月内得到支持，而不是现在。对此我很抱歉，但我希望你能理解。

# ruby-on-rails-3 - 独角兽加载初始化器

> ID：13100330
> 
> 赞同：0
> 
> 时间：2012-10-27T12:49:51.773
> 
> 标签：ruby-on-rails-3, unicorn

我正在从 Thin 迁移到 Unicorn。除了加载特定的 Gem 包外，我在大多数网站上都取得了成功。我不认为这是包本身，而是 Unicorn 如何与 Initializer 文件交互。

这是我目前的`unicorn.rb`设置。因为我使用的是 Mongoid，所以我没有使用 before_fork 或 after_fork。

```
worker_processes 3
timeout 30
preload_app true 
```

初始化文件在`/config/initializers/asin.rb`

```
ASIN::Configuration.configure do |config|
  config.secret        = ENV['AMAZON_SECRET']
  config.key           = ENV['AMAZON_KEY']
  config.associate_tag = ENV['AMAZON_TAG']
  config.version       = ENV['AMAZON_VERSION']
end 
```

Rails 会自动加载初始化文件中的信息吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T00:42:42.140

如果您要使用`preload_app true` *并且*在加载时打开了套接字，那么除非您花时间编写`before_fork`和`after_fork`独角兽钩子，否则您可能会遇到麻烦。

[preload_app 上](http://unicorn.bogomips.org/Unicorn/Configurator.html#method-i-preload_app)的Unicorn 文档对此进行了更详细的讨论。

> *[预加载] 在使用写时复制友好的 GC 时可以节省内存，但当主进程在加载时打开套接字等资源并由多个子进程共享时，可能会导致坏事发生。*

一般来说，我建议保留`preload_app false`，直到你确定一切正常。当您准备好优化部署时，您可以考虑采取必要的步骤来预加载应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T14:28:22.610

是的。只要你把它放进去`config/initializers`，它就会被加载。

# java - GWT：运行 GWT.runAsync 时会下载哪些类？

> ID：13100333
> 
> 赞同：0
> 
> 时间：2012-10-27T12:50:38.047
> 
> 标签：java, gwt

我已经看到`GWT.runAsync(...)`从模块的`onModuleLoad()`方法内部以及其他方法中调用，因此从 GWT 应用程序内的任何地方拉下片段似乎是“合法的”。

但这让我开始思考：如果您可以从应用程序内的任何地方下载代码分割片段，那么当您运行此方法时，哪些 Java 类（在运行时已被编译为 JavaScript）实际上被拉下? 显然这是可配置的，但我找不到任何代码示例来说明如何配置从服务器端拉回的内容。即使在[Codesplitting 的官方文档中，](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodeSplitting)也只有客户端如何*调用* `GWT.runAsync`的示例，而不是如何将其连接到服务器端片段。

在[JavaDocs](http://google-web-toolkit.googlecode.com/svn/javadoc/2.4/com/google/gwt/core/client/GWT.html#runAsync%28com.google.gwt.core.client.RunAsyncCallback%29)中，此方法被重载，并且有两种变体：

*   `runAsync(java.lang.Class<?> name, RunAsyncCallback callback)`; 和
*   `runAsync(RunAsyncCallback callback)`

我*猜*前者允许您指定要从服务器拉回的特定类？如果是这种情况，您是否需要进行任何配置（配置类路径、搜索路径等），以便可以在运行时在服务器上找到该类并将其拉回？

最重要的是，后者的重载是如何工作的？！如果您没有指定要拉回的类，GWT 怎么知道要拉回什么？

**例子**

假设我的应用程序中有以下`Something`类，然后（以某种方式）放置在特定模块的片段之一中，然后编译成 JavaScript。此外，假设我正确配置了一些东西，因此存在于其中的片段`Something`被延迟并且不会与模块初始片段一起下载（因此它还没有“存在”在客户端浏览器中）。

```
public class Something {
    // ... Whatever
} 
```

现在用户单击一个按钮小部件，我希望`Something`下载包含的片段，以便我们可以创建一个`Something`实例并对其进行操作。**我如何使用`GWT.runAsync`来指定包含的片段`Something`？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T14:11:29.677

正如 Thomas 在上面发布的那样，GWT 编译器会自动计算出它需要哪些片段。它通过分析您的代码并跟踪所有可能的执行路径来查看可以从哪里访问哪些代码来实现这一点。例如，假设您有类 A（主入口点类）、B、C、D、E、F 和 G，并且您有以下**直接**调用（即不使用 GWT.runAsync）：

*   A呼叫B
*   B 呼叫 C
*   D 呼叫 E
*   F 呼叫 E

然后编译器将（可能）将您的代码拆分为以下块：

*   A，B，C（立即加载，因为立即需要 A
*   D（在 D 上调用 GWT.runAsync 时加载）
*   E（在 D、E 或 F 上调用 GWT.runAsync 时加载）
*   F（在 F 上调用 GWT.runAsync 时加载）
*   G（在 G 上调用 GWT.runAsync 时加载）

最近（在 GWT 2.5 中）在进行拆分以优化共享段的下载大小（上例中的 E）的方式方面发生了最近的变化。

因此，虽然没有设置本身允许您配置分割点的确切内容，但您可以通过构建代码的方式“选择”它们。无论如何，手动跟踪所有依赖项以确保所有需要的代码都可用，对您来说可能太难了。

如果您有兴趣了解编译器如何打包您的代码以及为什么打包，您可以打开[编译报告](https://developers.google.com/web-toolkit/doc/latest/DevGuideCompileReport)。在这里，GWT 不仅会显示每个包的大小和内容，还会显示导致每个内容包含在段中的执行路径（A 调用 B，B 从上面调用 C）。这真的是一个非常了不起的工具。

因此，总而言之：稍微玩弄一下您的代码，以确保您了解编译器如何以及为什么做出打包决策，但除此之外，只需坐下来，让 GWT 编译器发挥其神奇的魔力！:)

更新：

回复：您添加的示例：美妙之处在于，GWT 编译器知道要加载哪个段，因此您无需告诉它任何内容。所有这一切都发生在幕后，您无需担心会发生什么（但了解正在发生的事情可能非常有用）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T13:36:53.627

它不可配置，由 GWT 编译器决定。在运行时没有什么特别的事情要做，编译器只是将生成的 JavaScript 拆分为几个`.cache.`文件而不是生成一个文件，然后`GWT.runAsync`用代码替换 以加载适当的`.cache.`文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-27T14:10:40.100

假设在 runAsync 中创建了 MyUIScreen 类的实例。如果您的代码中的其他任何地方都没有引用该类，并且唯一的地方是在 runAsync 中，那么编译器会解决这个问题并将您的代码分解为 MyUIScreen 和其他所有内容。这大概就是将要发生的事情。因此，代码片段将在您从 runAsync 访问它的那一刻被下载

# c++ - 将渲染过滤器保存为变量

> ID：13100335
> 
> 赞同：0
> 
> 时间：2012-10-27T12:50:48.797
> 
> 标签：c++, image, opengl

我正在为我正在开发的游戏编写图像类，并且我需要使用与其他过滤器不同的过滤器渲染一些图像，有没有办法将 OpenGL 过滤器（GL_LINEAR、GL_NEAREST 等）保存在变量中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T13:01:15.007

Well of course it is possible. But you can use any value you like, as long as you use the right token when doing the call to `glTexParameteri` for actually setting the filter before commencing drawing with the texture in question. In later versions of OpenGL you can also use sampler objects to encapsulate a set of filtering settings.

# asp.net-mvc - 如何使用 LINQ lambda 表达式仅返回要列出的特定字段

> ID：13100337
> 
> 赞同：1
> 
> 时间：2012-10-27T12:51:00.077
> 
> 标签：asp.net-mvc, linq, asp.net-web-api

> **可能重复：**
> [从没有一个字段的实体框架中检索对象](https://stackoverflow.com/questions/8973529/retrieve-an-object-from-entityframework-without-one-field)

我正在研究 asp.net mvc。目前我正在使用 EF 4.1 代码优先模型。这里我有记录列表（43）。我的课就像，

```
public class MyTable
{
public string field1{get; set;}
public string field2{get; set;}
.
.
.
public string field20{get; set;}
} 
```

我将它们作为 List 之类的列表返回。但我不希望 field20 返回。所以我怎么能跳过我列表中的特定字段。我曾经使用过，

```
(from m in context.MyTable select new{m.field1,m.field2,...,m.field19}).ToList(); 
```

它工作得很好。但我希望使用 lambda 表达式语法得到相同的结果，例如

```
context.MyTable.Skip() or any etc. 
```

如何仅返回要列出的特定字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T12:55:34.600

好吧，你可以写

```
context.MyTable.Select(x => new { x.field1, x.field2, ..., x.field19}).ToList(); 
```

如果你不想写所有 19 个字段，你可以让你`MyTable`的类实现`IEnumerable`

```
public class MyTable : IEnumerable<object>

public IEnumerator<object> GetEnumerator()
{
    List<object> list = new List<object>();
    list.Add(field1);
    list.Add(field2);
    ...
    list.Add(field20);
    return list.GetEnumerator();
}

System.Collections.IEnumerator System.Collections.IEnumerable.GetEnumerator()
{
    return GetEnumerator();
} 
```

然后你可以写

```
context.MyTable.Select(x => x.Take(19).ToList()).ToList(); 
```

# java - ArrayList：仅从中克隆一些项目

> ID：13100340
> 
> 赞同：1
> 
> 时间：2012-10-27T12:51:21.697
> 
> 标签：java

我有一个 ArrayList 人员（姓名、姓氏、年龄）。现在我想克隆这个 ArrayList 的一个子集。假设我想从中创建一个年龄 > 30 的新 ArrayList。
设置一个从 Person 读取所有属性并将其添加到新 ArrayList 的迭代并不太复杂。但是我只是想知道是否有更“优雅”并且可能更灵活的方式来实现这一点，也许实现我目前缺少的一些接口。只有一个要求：我想坚持使用基本的 Java JDK API，为此目的，合并一个外部库将是一种矫枉过正。
谢谢马克斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T13:09:44.740

我知道你说过你不想使用外部库，但如果你确实选择了，这个片段会有所帮助：

```
List<Person> persons = getSomePersons();
Collection<Person> greaterThan30 = Collections2.filter(persons, new Predicate<Person>() {
    public boolean apply(Person person) {
        return person.age > 30;
    }
}); 
```

它需要[Guava 库](http://code.google.com/p/guava-libraries/)。基本上，它是一个接收带有类型参数的 Predicate 类的函数。它有一种“应用”方法，可以返回您想要接受的条件。

这也是人们抱怨使用 Java 的原因之一。没有适当的高阶函数支持。例如，在 Scala 中，您可以这样做：

```
val greaterThan30 = persons.filter(_.age > 30) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T13:44:07.540

这种操作应该是使用 LINQ。但是 LINQ 在 Java 中尚不可用。按照计划，它将使用 Java 8。

但是在此之前，请尝试 LambdaJ [http://code.google.com/p/lambdaj/](http://code.google.com/p/lambdaj/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-27T12:58:31.530

What you want is a [filter](http://en.wikipedia.org/wiki/Filter_%28higher-order_function%29), but there is no implementation of one in the Standard API library, and due to the lack of closures/lambdas, the implementations found in several third-party libraries such as [lambdaj](http://code.google.com/p/lambdaj/) all have to be a bit more verbose than they would be in other languages. This will probably change in Java 8, though.

So just go ahead and do a loop - it's not as if there's something dirty about that, and even if there were a more elegant way, it would ultimately execute a loop as well.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-27T13:07:10.040

`Collections.binarySearch`可能会为您解决问题。

在这里你可以找到一些例子。[在对象中实现二分查找](https://stackoverflow.com/questions/901944/implement-binary-search-in-objects)

# android - “包括其他布局”如何动态更改文本？

> ID：13100345
> 
> 赞同：0
> 
> 时间：2012-10-27T12:52:06.527
> 
> 标签：android, layout, include, abstract-class

我有 10 个布局，每个布局都是用标题 + 副标题构建的，所以我做了：

```
public abstract class Menu_Segnalazione extends Activity {
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    Intent intent = getIntent();
    final String titolo = intent.getStringExtra("titolo");
    final String sottoT = intent.getStringExtra("sottoT");

    //Display back arrow on actionbar
    ActionBar ab = getActionBar();
    ab.setDisplayHomeAsUpEnabled(true);

    setContentView(R.layout.intestazione);
    ((TextView) findViewById(R.id.titolo)).setText("ahh");
    ((TextView) findViewById(R.id.sottoTitolo)).setText("xcvxcv");
} 
```

和：

```
public class ActivityPalinePensiline extends Menu_Segnalazione {
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.anomalia_paline);

    palineAction();

} 
```

R.layout.anomalia_palina 是具有 menu_segnalazione+其他内容的布局 menu_segnalazione 是布局标题+副标题

问题是 R.id.titolo 和 R.id.sottoTitolo 中的文本不会改变....

怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T13:00:39.683

您正在执行的视图初始化`Menu_Segnalazione::onCreate`已完成，但`ActivityPalinePensiline::onCreate`您正在通过在 parent::onCreate 之后加载新布局来覆盖它。

您应该将您的标题/副标题初始化代码外部化为您在该方法之后`initView()`每次调用的代码`onCreate()``setContentView()`

例子 ：

```
public abstract class Menu_Segnalazione extends Activity {
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
}

protected void initViews() {
    Intent intent = getIntent();
    final String titolo = intent.getStringExtra("titolo");
    final String sottoT = intent.getStringExtra("sottoT");

    //Display back arrow on actionbar
    ActionBar ab = getActionBar();
    ab.setDisplayHomeAsUpEnabled(true);

    setContentView(R.layout.intestazione);
    ((TextView) findViewById(R.id.titolo)).setText("ahh");
    ((TextView) findViewById(R.id.sottoTitolo)).setText("xcvxcv");
} 
```

和

```
public class ActivityPalinePensiline extends Menu_Segnalazione {
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.anomalia_paline);

    initViews();

    palineAction();

}

@Override
protected void initViews() {
   super.initViews();

   // add here custom initialisation for this activity
} 
```

# xcode - 应用程序仅在 iOS 6 中旋转，在 iOS 5 中不旋转

> ID：13100347
> 
> 赞同：4
> 
> 时间：2012-10-27T12:52:14.347
> 
> 标签：xcode, ios5, ios6, xcode4.5, autorotate

我制作了一个针对 iOS 5 和 iOS 6 的应用程序，由于某种原因，它仅在使用 iOS 6 的设备（无论是在 iPhone 还是 iPad 上）时才会旋转，而不会在使用 iOS 5 的设备上旋转。我的应用程序是通用的。请帮我解决这个问题！谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-06T06:22:20.457

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation
{
    return ((toInterfaceOrientation == UIInterfaceOrientationPortrait) || (toInterfaceOrientation == UIInterfaceOrientationPortraitUpsideDown));
}

- (NSUInteger)supportedInterfaceOrientations
{
    return (UIInterfaceOrientationMaskPortrait | UIInterfaceOrientationMaskPortraitUpsideDown);
} 
```

在所有 uiviewcontroller 子类中覆盖这两个方法......这将适用于 ios 6 及更早版本

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-27T18:08:30.290

iOS 5 和 iOS 6 调用不同的方向和旋转代理。在 iOS 5 中，实现：

shouldAutorotateToInterfaceOrientation:，在 iOS 6 中已弃用。

所以，在 iOS 6 中，确保你设置了一个根视图控制器，并实现：

shouldAutorotate:、supportedInterfaceOrientations 和supportedInterfaceOrientationsForWindow:

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T13:41:57.920

shouldAutorotateToInterfaceOrientation 在 ios6 中已弃用。

所以如果你想在两个操作系统版本上运行应用程序，那么添加 shouldAutorotateToInterfaceOrientation 如下

```
//for ios6
 - (BOOL)shouldAutorotate {

        UIInterfaceOrientation orientation = [[UIDevice currentDevice] orientation];

        if (orientation == UIInterfaceOrientationLandscapeLeft  ||orientation ==  UIInterfaceOrientationLandscapeRight ) 
{

            return YES;
        }
        return NO;
        }

//for ios5

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    //interfaceOrientation == UIInterfaceOrientationLandscapeRight; 
    if (interfaceOrientation == UIInterfaceOrientationLandscapeLeft  ||interfaceOrientation ==  UIInterfaceOrientationLandscapeRight ) {

        return YES;
    }
    return NO;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-28T02:41:04.333

我有一个类似的问题。你可以检查这个问题的答案：

[旋转在 iOS6 上表现不同](https://stackoverflow.com/questions/12536645/rotation-behaving-differently-on-ios6/12540375#12540375)

总而言之，要让自动旋转在 iOS 5 和 iOS 6 中充分发挥作用，并且还要处理 PortraitUpsideDown 方向，我必须实现一个自定义 UINavigationController 并将其分配给`self.window.rootViewController`应用程序委托`didFinishLaunchingWithOptions`方法。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-08-22T07:29:12.823

为了在 ios5 和 ios6 中支持自动旋转，我们需要在 ios6 的情况下提供回调......`[[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications];

```
[[NSNotificationCenter defaultCenter]addObserver:self selector:@selector(orientationChanged:) name:UIDeviceOrientationDidChangeNotification object:nil]; 
```

我们需要打电话

```
- (NSUInteger)supportedInterfaceOrientations {
return UIInterfaceOrientationMaskPortrait; 
```

}

```
-(BOOL)shouldAutoRotate{
    return YES;
  } 
```

适用于 iOS5

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation 
```

{ return ((toInterfaceOrientation == UIInterfaceOrientationPortrait) || (toInterfaceOrientation == UIInterfaceOrientationPortraitUpsideDown)); }

# windows - 64 位 DLL 入口点覆盖

> ID：13100348
> 
> 赞同：1
> 
> 时间：2012-10-27T12:52:15.737
> 
> 标签：windows, 64-bit, kernel, hook, driver

简而言之，问题是这样的。我正在编写内核模式 Windows 驱动程序，当加载内核模式 DLL（或其他可执行模块）时会收到通知。在某些情况下，我必须拦截 DLL 入口点例程。也就是说，覆盖它以便首先调用我的例程，然后我可以将控制权传递给原始入口点。

在 32 位（确切地说是 x86）上，这样做没有问题。我得到了模块基映射地址，它实际上以标准 PE 头（由 Windows 可执行文件使用）开头。DLL 入口点有一个 RVA（相对于映像库的地址）。我只是用我的例程地址减去模块基地址来覆盖它。瞧！

现在，64 位的情况更加复杂。问题是 RVA 仍然是 32 位整数。这样的 RVA 覆盖了从映像基地址开始到 4GB 偏移量结束的地址范围。引用同一个可执行模块中的任何符号都没有问题（假设它不超过 4GB 大小），但这会给跨模块拦截带来问题。自然地，我的可执行模块和我试图挂钩的模块不必落入相同的 4GB 范围内，因此存在问题。

暂时我通过无条件地覆盖原始例程序言代码`jmp`到我的代码中来解决这个问题。这在 64 位平台上需要 12 个字节。然后，为了从我的例程中调用原始代码，我恢复了被覆盖的 12 个字节（意味着 - 我在覆盖之前保存它们）。

到目前为止 - 没有问题。但是现在情况正在发生变化，我将不得不支持对入口点例程的多线程访问（请不要问为什么，它与加载到所谓的“用户空间”中的多会话DLL有关，单独对于每个终端会话）。

解决方案之一是使用全局锁，但我想避免这种情况。

我知道所谓的“蹦床功能”，但我也想避免这种情况。这样做需要对函数序言代码进行运行时解码，以正确识别指令边界和可能的分支。

最近我想到了另一个想法。如果我能找到原始 DLL 的一些“不需要的”部分，它的长度至少为 12 个字节（大小为`mov RAX addr`+ `jmp RAX`）怎么办。然后这部分可能会被`jmp`我的手中覆盖。然后可以将入口点 RVA 设置为此部分！

要使其工作，只需要可以覆盖的适当部分。我想有这种可能性，因为 PE 标头包含许多几十年来不再使用的历史字段。

这个想法值得尝试，还是这是一种众所周知的技术？安迪还有其他建议吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T09:34:31.000

你有几个选择。不幸的是，您只能从这 3 个中选择 2 个： 100% 固体；易于实施；便宜的。

在 .TEXT 部分的末尾，您很有可能会发现未使用的空间。这是因为 Windows 以 4k 的块将图像部分映射到内存中，并且通常 .text 部分不是精确的乘法。

另一个易于实现的是使用 PE 标头。一个非常安全的覆盖区域是 DOS 存根。问题在于不能保证 PE 标头与入口例程位于同一部分（Microsoft 链接器将其放在同一部分，但不了解 GNU 或其他）。

另一个简单但仅适用于系统 DLL 的方法是执行“热补丁”正在执行的操作，并在每个函数前面重用设置为“nop”的 15 个字节和“mov edi,edi”指令。这是所有随 Windows 一起发布的 DLL 的情况，以支持热补丁。

可靠但困难的选择是按照@David Heffeman 的建议去做。这种技术称为“登陆函数”，您将前 12 个字节复制到登陆函数中，然后该函数将跳转到原始函数。

简单可靠的选择是使用 MS Detour。Microsoft Detour 是 Microsoft Research 的一款产品，它完全可以做到这一点，并且效果很好，并且受到支持，它可以处理可能出现的一堆极端情况和竞争条件（以及其他东西），它的 x86 版本是开放的资源。缺点是商业用途非常昂贵 - 我上次检查它是 10k。

# android - ActionBarCompat：在菜单项之间添加分隔符

> ID：13100349
> 
> 赞同：1
> 
> 时间：2012-10-27T12:52:18.773
> 
> 标签：android, android-actionbar

我使用 ActionBarCompat 将 ActionBar 添加到我的活动中。

在 ActionBar 中，可以添加 3 个以图标显示的项目。我想在项目之间有一个分隔符（垂直线）。我正在寻找一个布局文件，我可以在其中为 Imagebutton 添加边距，但不幸的是他们正在以编程方式添加它。

有人可以指导我该怎么做。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T13:18:41.100

不要这样做。ActionBar 的菜单项之间的分隔符在 Android 上完全不常见。这会破坏您应用的整体用户体验。

这不是您正在寻找的答案，但是请遵循常见的样式-除非您有很好的偏离理由。您的应用将从中受益！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T13:37:57.857

首先，我同意 Wolfram 的观点，即最好不要添加分隔符。其次，如果您将它们添加到 ActionBarCompat，我假设您也想将它们添加到 ActionBar？我看到添加分隔符的唯一方法是将它们添加到您的图形中。这与使用分隔符不同，但很接近。

# grails - 项目的 Web2py 或 Grails 框架

> ID：13100351
> 
> 赞同：1
> 
> 时间：2012-10-27T12:52:30.747
> 
> 标签：grails, web2py

我要开始新项目，不是那么大（不是企业）。而且我不知道哪个框架好。选择的要点是我主持项目时的简易编码和服务器价格。我很了解java，还有一些grails。但我的蟒蛇不是很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T13:30:44.563

这里有几件事需要考虑：

*   你将最有效率地使用你已经知道的东西，这表明 Grails

*   您需要研究托管成本 - 支持 Java 的托管通常更昂贵，但并非总是如此。例如，如果它是相对较小且非商业的，您可以在 Heroku 上免费托管一个 Grails 应用程序。

*   Groovy 和 Python 是您所知道的唯一语言吗？这些是每个可用的最佳/唯一框架吗？您没有说明您是否考虑过可能性，并将其缩小到这两种语言/框架组合，或者它们是否仅仅是您最熟悉的那些。如果是前者，那就太好了。如果是后者，您可能需要在决定之前做更多的研究。

# java - 创建功能有限的 Java 应用程序的试用版

> ID：13100353
> 
> 赞同：2
> 
> 时间：2012-10-27T12:52:35.810
> 
> 标签：java, licensing, trial

我正在寻找有关如何实现我的 java 应用程序试用版的想法。大多数帖子都是关于创建一个在停止工作时有时间限制的试用软件。就我而言，我想创建一个功能有限的应用程序，并且可以通过购买产品来解锁应用程序的所有功能。我将感谢社区对以下几点的看法。这个问题的一个转折是使这个解决方案尽可能通用，以便它可以在 Mac 和 Windows 上运行。

我对此解决方案的方法包括在应用程序启动时检查“注册”文件是否存在。如果存在有效的注册文件，则应用程序将完全正常运行。该文件将放置在用户的应用程序数据目录中。这样在 Windows 中卸载应用程序将不会触及该文件。另外，在 Mac 上，一般情况下删除 app 文件夹应该没有问题，除非用户安装了 AppCleaner 之类的软件，它会提示删除 ~/Library/Application Support 文件夹下的应用程序目录。

所以，这是我的第一个问题。对于已经购买应用程序的用户，注册文件被删除的情况，社区对此有何看法？

我认为这也与首先如何完成注册/购买有关。这是我的第二个问题。我不会在软件中处理任何信用卡交易，我宁愿贝宝做这一切。所以，假设有人购买了软件后，我给了他们一个可以解锁软件的注册码。我首先担心的是任何拥有此注册密钥的人都可以解锁该软件。我该如何限制这个？想法？

这个话题可能需要一点讨论，我希望没问题。期待听到您的意见。

编辑：我只是想回到这篇文章并更新它，提到我最终在评估了 TrueLicense 和 License3j 之后，我选择了使用 TrueLicense。我仍在弄清楚如何使用它，因为文档并不那么容易。我正在尝试研究该示例，并希望我能尽快为我的应用程序启动并运行该示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T15:40:29.920

最近我一直在对同一主题进行一些研究。我发现有必要实施许可证管理器。我为此找到[了 TrueLicence](http://truelicense.java.net/)开源库和带有代码示例的[教程。](http://alvinalexander.com/java/java-license-key-generator-manager-free)

> ...当使用 True License 或任何其他 Java 许可证管理器库时，您将需要创建两个组件：
> 
> *   软件许可证服务器，每当客户购买您的软件副本时，它都会生成新的软件许可证，以及
> *   软件许可证客户端，它是您嵌入到 Java/Swing 客户端应用程序中以安装和验证许可证的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T13:16:11.540

您可以使用 license.properties 文件，每次软件启动时都会获取其密钥/令牌。该软件将具有一些拦截器代码，该代码将从 license.properties 文件中读取密钥/令牌并将其解密并生成一个值。因此，当用户购买您的软件时，您会向他发放一个新令牌。现在这个令牌在解密时会产生一些与通常不同的值，因此您将解锁其余的功能。

您可以在网络上搜索 100 多种加密算法并将它们用于您的软件，但基本思想是这样的。

# liferay - 没有与资源关联的操作

> ID：13100358
> 
> 赞同：1
> 
> 时间：2012-10-27T12:53:10.870
> 
> 标签：liferay, portlet

我正在按照 Liferay In Action 指令使用 Service Builder 构建一个 portlet，而且我是新手。我添加了 addProduct 方法。你可以看到下面的代码：

```
public PRProduct addProduct(
        long companyID, long groupID, String productName,
        String serialNumber, long userID)
    throws SystemException, PortalException{

        PRProduct product = prProductPersistence.create(
            counterLocalService.increment(PRProduct.class.getName()));      

        resourceLocalService.addResources(
            companyID, groupID, userID, PRProduct.class.getName(),
            product.getPrimaryKey(), false, true, true);

        product.setProductName(productName);
        product.setSerialNumber(serialNumber);
        product.setCompanyId(companyID);
        product.setGroupId(groupID);

        return prProductPersistence.update(product, false);
} 
```

当我从我的 portlet 类中调用此方法时，我得到“没有与资源 com.inkwell.internet.productregistration.model.PRProduct 关联的操作”。我不明白它在说什么，我不知道如何解决它。提前感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T04:21:32.647

罪魁祸首是`resourceLocalService.addResources(....)`。`PRProduct`如果您使用[Liferay 的权限系统](http://www.liferay.com/web/guest/community/wiki/-/wiki/Main/Using+Liferay%27s+Permission+System+from+a+portlet)，则只需将您的添加为资源。

# drawing - Gtk#MonoDevelop的绘图工具

> ID：13100359
> 
> 赞同：1
> 
> 时间：2012-10-27T12:53:17.953
> 
> 标签：drawing, cross-platform, monodevelop, gtk#

我想使用 Gtk# 和 MonoDevelop 来绘制一些图形基元（例如，线条、矩形等）。在 .NET Framework 中，我使用了下一个代码

```
Graphics graphics=pictureBox1.CreateGraphics();
graphics.DrawLine(new Pen(Color.Black), 0,0,100,100); 
```

但是我怎样才能通过 Gtk# 来做到这一点？我找到了 DrawingArea 类，但我怎样才能在该类中绘图？请问你能帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T00:08:03.877

在 Expose 处理程序中，创建一个 Cairo 上下文并使用它进行绘制。

有关教程，请参阅[http://www.zetcode.com/tutorials/gtksharptutorial/drawing/](http://www.zetcode.com/tutorials/gtksharptutorial/drawing/)

# iphone - 删除动画完成后更新 TableView

> ID：13100361
> 
> 赞同：4
> 
> 时间：2012-10-27T12:53:49.090
> 
> 标签：iphone, ios, ipad, uitableview, animation

我有一个表格视图，其中填充了来自对象数组的数据。对象有价格、名称等。

当一个单元格被删除时，数据源（数组）被更新，并且该行使用 UITableViewRowAnimationFade 滑出屏幕。

当一个项目被删除时，数组中对象的某些属性（例如价格）可能会发生变化，因此我需要更新屏幕上的所有单元格，因为它们的数据可能已经更改。

我查看了文档，发现*reloadRowsAtIndexPaths:withRowAnimation*可以与*indexPathsforVisibleRows*结合使用以重新加载屏幕上的行，但是在 tableView:commitEditingStyle:forRowAtIndexPath 中执行此操作看起来非常讨厌，因为它尝试执行删除动画同时还重新加载...

有没有办法在执行任务之前等待删除动画完成？

这是我的 ViewController 中的代码

```
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (editingStyle == UITableViewCellEditingStyleDelete) 
    {
        // update the datasource
        [self.dataController deleteItemAtIndex:indexPath.row];

        // update the table
        [tableView deleteRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationFade];

        // reload the table to show any changes to datasource from above deletion
        [self.tableView reloadRowsAtIndexPaths:[self.tableView indexPathsForVisibleRows] withRowAnimation:UITableViewRowAnimationNone];
    }
} 
```

asd

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T13:56:05.950

编辑：

好的，下次试试。:) 这绝对可以工作，但需要相当多的努力......

您需要准确跟踪数据源中的更改（添加、删除、更新）并在 TableVC 上调用适当的方法。

数据源源需要提供以下委托方法：

```
- (void)dataControllerWillUpdateData;
- (void)dataControllerDidRemoveObjectAtIndexPath:(NSIndexPath *)indexPath;
- (void)dataControllerDidAddObjectAtIndexPath:(NSIndexPath *)indexPath;
- (void)dataControllerDidUpdateObjectAtIndexPath:(NSIndexPath *)indexPath;
- (void)dataControllerDidUpdateData; 
```

然后你像这样改变 tableVC 的实现：

```
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (editingStyle == UITableViewCellEditingStyleDelete) 
    {
    // update the datasource
    [self.dataController deleteItemAtIndex:indexPath.row];
    }
}

- (void)dataControllerWillUpdateData
{
    [tableView beginUpdates];
}

- (void)dataControllerDidRemoveObjectAtIndexPath:(NSIndexPath *)indexPath
{
    [tableView deleteRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationFade];
}

- (void)dataControllerDidAddObjectAtIndexPath:(NSIndexPath *)indexPath
{
    [tableView insertRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationFade];
}

- (void)dataControllerDidUpdateObjectAtIndexPath:(NSIndexPath *)indexPath
{
    [self configureCell:[tableView cellForRowAtIndexPath:indexPath] atIndexPath:indexPath];
}

- (void)dataControllerDidUpdateData
{
    [tableView endUpdates];
} 
```

因此，如果用户删除了一个单元格，您的数据源必须确定哪些其他对象受到影响，创建一个更改列表（小心计算正确的 indexPaths），调用`dataControllerWillUpdateData`，为每个更改的对象调用上述适当的方法，最后调用`dataControllerDidUpdateData`.

当然你也可以考虑在你的项目中使用 CoreData。这可能需要一些工作来设置所有内容，但结果是您将获得上述所有内容以及更多“免费”。就我个人而言，我倾向于将它用于几乎所有包含动态 tableViews 的项目。它有很多好处，以至于大部分时间都值得付出努力。

# prolog - DCG 扩展：坚定不移被忽视了吗？

> ID：13100364
> 
> 赞同：6
> 
> 时间：2012-10-27T12:54:14.180
> 
> 标签：prolog, dcg, iso-prolog

假设我有以下 DCG 规则：

```
 factor(X) --> "(", expr(X), ")". 
```

通常这将被翻译为：

```
 factor(X, A, B) :-
    [40|C] = A, expr(X, C, D), [41|B] = D. 
```

是否允许 Prolog 系统将其翻译如下，
即将统一合并为头部和目标？

```
 factor(X, [40|A], B) :-
    expr(X, A, [41|B]). 
```

如果 DCG 扩展不坚定，则不允许
将 [41|B] 放在 expr 调用的第三个参数中。

但我想踏实已经到位，所以一切都应该没问题吧？

再见

PS：有关坚定的非正式定义，请参见：
**Richard O'Keefe，2009：**
“作为 Prolog 编程中“坚定”一词的发明者，
我应该赞成它。坚定基本上
意味着你不能强行降低谓词通过错误地填写输出参数来错误的路径
。”
[http://blog.gmane.org/gmane.comp.ai.prolog.swi/month=20090301](http://blog.gmane.org/gmane.comp.ai.prolog.swi/month=20090301)

PSS：有关其他 DCG 翻译，请参见最新的
DCG 标准提案。附录包含 DCG 转换器
源代码：
**ISO/IEC DTR 13211–3:2006**
定句语法规则
Klaus Daessler
2012 年 11 月 20 日
[N238 DIN Draft 2012-11-20](http://www.complang.tuwien.ac.at/ulrich/iso-prolog/dcgs/dcgsdin121120.pdf)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-27T21:25:56.317

您的翻译是有效的。它不影响坚定性。但是，它仍然可能不是很理想。但这取决于您使用的精确实现。考虑：

```
opcl --> "".
opcl --> "(", opcl, ")". 
```

将 Prolog 标志[`double_quotes`](https://stackoverflow.com/a/8269897/772868)设置为`chars`，第二个子句现在可以扩展为

```
opcl1(['('|S0],S) :-
   opcl1(S0,S1),
   S1 = [')'|S]. 
```

或者

```
opcl2(['('|S0],S) :-
   opcl2(S0,[')'|S]). 
```

现在考虑目标`phrase(opcl,"(((())))"`。

在 WAM（例如 YAP、SICStus）、ZIP (SWI)、TOAM Jr. (B) 等常见机器上：

## opcl1

`opcl1`将简单地测试列表的有效性，使用调用堆栈进行程序控制。成功后，将不会创建任何 cons-cell，并且调用堆栈将再次为空。实际上，上述实现无法检测到目标是确定的，因此它们会留下一个选择点。你可以在顶层看到这个：

```
?- 短语(opcl,"(((())))")。
真的 ;
错误的。

```

可以使用 干净、安全地删除这个选择点[`call_semidet/1`](https://stackoverflow.com/questions/12939794/stack-overflow-in-prolog-dcg-grammar-rule-how-to-handle-large-lists-efficiently/12942551#12942551)。

## opcl2

`opcl2`将在需要被 GC 回收的堆上创建四个 [')'|_] 实例。但是他们正在保存调用堆栈。也就是说，只有尾递归调用在 WAM 上得到了非常有效的处理，在 TOAM Jr. 上的处理效率最低，在 SWI 上的处理成本相对较高。

当我们考虑使用发生检查执行时，事情变得更加昂贵。在 Qu-Prolog 中它始终处于开启状态，而在 SWI、XSB 和 CX 中，您可以使用如下标志启用它：

```
?- 短语（opcl，Xs，Xs）。
真的 ;
Xs = ['(',')'|Xs] ;
Xs = ['(','(',')',')'|Xs] ...

?- set_prolog_flag(occurs_check,true)。
真的。

?- 短语（opcl，Xs，Xs）。
真的 ;
**循环**

```

SWI 不需要对`opcl1`. 但它对`)`.`opcl2`

因此，对于这些机器，您的翻译似乎并不受欢迎。但它可能对另一台机器感兴趣，它没有单独的调用堆栈并且**不**基于延续。

# 通话//1

您的翻译将改变`call//1`. 但是，内在的目标`call//1`必须始终以坚定的方式编写！否则，调用时已经可以看到差异`phrase(call(Cont),Xs0,Xs)`！对于符合要求`Cont`，这将与`phrase(call(Cont),Xs0,XsC), XsC=Xs`

* * *

至于您对坚定不移的引用：这是对该概念的非常非正式的定义。毕竟，“错误地”是什么意思？

`phrase/3`到目前为止，我所知道的对坚定不移的最佳定义是：

> `phrase(NT, Xs0,Xs)`和一个新的变量，总是一样的`phrase(NT, Xs0, XsC), XsC = Xs`。`XsC`

# windows - winapi中的简单鼠标移动检测（但没有光标移动）

> ID：13100375
> 
> 赞同：1
> 
> 时间：2012-10-27T12:55:39.733
> 
> 标签：windows, winapi, input, mouse

我需要获取鼠标移动事件值（id est mouse_delta_x，mouse_delta_y）但不移动鼠标光标（应该完全关闭它）只需要使用鼠标移动但没有移动窗口光标的副作用。我知道我可以用 RawInput 做到这一点，但我正在寻找最简单的方法。在winapi中可以轻松完成吗？

（3d游戏中移动相机需要）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T12:59:33.263

> 在winapi中可以轻松完成吗？

本身并非如此，因为 Win32 API 假定指针位于屏幕上的某个位置——如果指针碰到屏幕边缘，它将不会进一步移动。您可以做的是在接收到将指针包发送到屏幕中心的鼠标移动事件后，忽略此指针扭曲创建的鼠标移动事件。

如果您不想跳那个圈，则必须为此使用 RawInput 或 DirectInput。

# excel - 在 Excel 中隐藏从 200 到最大行的行

> ID：13100376
> 
> 赞同：0
> 
> 时间：2012-10-27T12:55:47.233
> 
> 标签：excel, vba

> **可能重复：**
> [VBA代码隐藏行n-maximum](https://stackoverflow.com/questions/13099486/vba-code-to-hide-rows-n-maximum)

我目前正在使用此代码在 Excel VBA 上隐藏从 200 到最大值的行，但它似乎不起作用。知道出了什么问题吗？

我已经在第 1-200 行有数据。

```
Sub HideEm()
Dim ws As Worksheet
Dim rng1 As Range
Set ws = Sheets("main")
Set rng1 = ws.Cells.Find("*", ws.[a1], xlValues, , , xlPrevious)
If Not rng1 Is Nothing Then
    If rng1.Row > 200 Then ws.Rows("200:" & rng1.Row).Hidden = True
End If
End Sub 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-27T14:17:28.013

试试这个

```
xlsRange = xlsSheet.Range("A0", "B999") 'select your range, probably need a way to specify from row 200 to maximum, i'm too lazay to do this
xlsRange.EntireRow.Hidden = True 
```

这些文章将帮助您在 VBA 中创建动态范围

[http://social.msdn.microsoft.com/Forums/en-IE/isvvba/thread/ef1f8134-f6fc-4f1a-8405-418d4817b0c3](http://social.msdn.microsoft.com/Forums/en-IE/isvvba/thread/ef1f8134-f6fc-4f1a-8405-418d4817b0c3)

[http://www.ozgrid.com/News/excel-dynamic-ranges-vba.htm](http://www.ozgrid.com/News/excel-dynamic-ranges-vba.htm)

# java - 通过 Internet 保存的 Java 属性

> ID：13100377
> 
> 赞同：1
> 
> 时间：2012-10-27T12:55:49.920
> 
> 标签：java, url, properties, web, fileoutputstream

我正在尝试通过网站 (http://www.dasolorfire.freehostia.com/) 将属性加载并存储到属性文件中。我的目标是在游戏中编辑属性，然后保存新属性。

这是存储代码：

```
URL url = new URL("http://www.dasolorfire.freehostia.com/config.properties");
prop.store(new FileOutputStream(url.getFile()), null); 
```

问题是当我运行它时，什么也没有发生。相反，它将它保存在 C:/ 驱动器中。当我使用 prop.load(url.openSream()); 时，它可以工作。您如何使用 FileOutputStream 通过 Internet 保存文件。

如果我不能让它在互联网上工作，我怎么能把它保存在罐子里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T13:05:27.423

> 您如何使用`FileOutputStream`通过 Internet 保存文件。

除非您通过 Internet 安装了文件系统，否则您不会这样做，您可以这样做，但可能不是您实际在做的事情。

要将数据发送到服务器，通常情况下，您需要与一些设计用于执行此操作的服务器进程（HTTP、FTP、SSH 等）通信。

例如，在您的情况下，您可能有一个 servlet 容器作为 HTTP 服务器运行，因此使用[`HttpURLConnection`](http://docs.oracle.com/javase/7/docs/api/java/net/HttpURLConnection.html)或类似于`POST`servlet 的数据，这反过来会更新配置文件。这也为您提供了在服务器端实施安全性的机会，这一点很重要，因为从客户端发送的所有内容都是可疑的，除非另有证明。

# php - Wordpress 管理表单发布必填类别

> ID：13100385
> 
> 赞同：0
> 
> 时间：2012-10-27T12:57:37.330
> 
> 标签：php, javascript, wordpress, admin, custom-post-type

我试图在 WP 中找到一种方法，使自定义帖子类型必须使用类别/分类法。这意味着验证是否在表单提交时选择了一个类别，否则会显示错误消息。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T19:32:42.923

这是来自我的一个网站的一些代码，用于创建自定义帖子类型元框。它使用 jQuery 验证类别值，如果该值不存在，则取消表单提交。

```
add_action( 'load-post.php', 'gallery_meta_boxes_setup' );
add_action( 'load-post-new.php', 'gallery_meta_boxes_setup' );

/* Meta box setup function. */
function gallery_meta_boxes_setup() {
    /* Add meta boxes on the 'add_meta_boxes' hook. */
    add_action( 'add_meta_boxes', 'gallery_add_post_meta_boxes' );

}
/* Create one or more meta boxes to be displayed on the post editor screen. */
function gallery_add_post_meta_boxes() {

    add_meta_box(
        'gallery-class',            // Unique ID
        'Select Gallery',        // Title
        'gallery_class_meta_box',        // Callback function
        'cj-gallery',                    // Admin page (or post type)
        'normal',                    // Context
        'default'                    // Priority
    );
}

/* Display the post meta box. */
function gallery_class_meta_box( $object, $box ) {
?>
    <script type="text/javascript">
        jQuery(function($) {
                /********** Form Validation ***********/
            $('form').submit(function(event) {

                if ($('.categorydiv input[type="checkbox"]:checked').length == 0) {
                    alert('Please select a category!');
                    $('#ajax-loading').css('visibility', 'hidden');  // hide the ajax loading graphic
                    event.preventDefault();  // cancel form submission
                }
            })
        });
    </script>
<?php } 
```

# clojure - 安装 REPL-y clojure - lein compile 不起作用

> ID：13100387
> 
> 赞同：0
> 
> 时间：2012-10-27T12:57:54.693
> 
> 标签：clojure, leiningen

我正在尝试安装[REPL-y](https://github.com/trptcolin/reply)。lein 项目工作正常，但是当我尝试运行`lein compile`时会发生这种情况：

> 线程“主”java.lang.NoSuchMethodError 中的异常：clojure.lang.KeywordLookupSite.(ILclojure/lang/Keyword;)V

有什么建议么？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T22:14:47.667

从项目页面：

> 从 2.x 预览系列开始，REPLy 现在是 leiningen 的一部分。一般来说，它绝对是安装和 Clojure 开发的最佳选择。

所以也许使用 leiningen 2 可以做到这一点。

# php - 使用 ajax 和 php 在下拉列表中动态更新谷歌图表

> ID：13100390
> 
> 赞同：5
> 
> 时间：2012-10-27T12:58:07.290
> 
> 标签：php, ajax, drop-down-menu, google-visualization

我必须根据下拉值显示谷歌图表，其中包含商店 id 我正在从 mysql 检索数据，值没有问题，我正在根据 ajax 的商店 id 检索数据，并在输入框中确认它是也很好。

但我不知道如何在不重新加载页面的情况下使用这些值更新该图表。这是我的带有硬编码值的谷歌图表代码。

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
    <title>newChart</title>
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
        <script type="text/javascript"> 
          google.load("visualization", "1", {packages:["corechart"]});
          google.setOnLoadCallback(drawChart);
          function drawChart()
          {var data = google.visualization.arrayToDataTable([['Company & Model', 'Views'],['Samsung Hero Music E1232B',5],['Samsung Galaxy Y S5360',7],['Samsung Galaxy Ace S5830',7],['Karbonn K 1212',2],]);      
            var options = {
              title: 'Most Popular Item ',
              hAxis: {title: 'Brand', titleTextStyle: {color: 'red'}}};
            var chart = new google.visualization.ColumnChart(document.getElementById('MPI_chart_div'));
            chart.draw(data, options);
          }
          </script>
    </head>
    <body>
    <h3>COLUMN CHART FOR MOST POPULAR ITEM </h3>
        Select Shop  <select id="MPI_selected_shop" onchange="MPI_set_shop(this.value);">           
                <option value="all_Shops">All Shops</option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                 </select>
<input type="text" id="sd"  />

        <div id="MPI_chart_div" style="width: 800px; height: 400px;"></div> 
    </body>
    </html> 
```

这是我在脚本标签内同一页面中的 ajax 代码

```
var xmlHttp

                function MPI_set_shop(str)
                { 
                    alert(str);
                    xmlHttp=GetXmlHttpObject();
                    if (xmlHttp==null)
                    {
                      alert ("Your browser does not support AJAX!");
                      return;
                    } 
                    var url="chart.php";
                    url=url+"?q="+str;
                    alert(url);

                    xmlHttp.onreadystatechange=stateChanged;
                    xmlHttp.open("GET",url,true);
                    xmlHttp.send(null);
                }

                function stateChanged() 
                { 
                    if (xmlHttp.readyState==4)
                    { 
                        document.getElementById("sd").value=xmlHttp.responseText;

                        $st=xmlHttp.responseText;

                        alert($st);

                    }
                } 
```

这是我的chart.php，我从中使用ajax从mysql获取格式化数据

```
<?php
 $testid=0;
$testid=$_REQUEST["q"];
//echo $testid;

$con = mysql_connect("localhost","root","");
                if (!$con)
                {
                    die('Could not connect: ' . mysql_error());
                }
                // Select Database
                mysql_select_db("mysql", $con) or die('Could not connect: ' . mysql_error());;

                                    $qMostPopularItem = "SELECT t.pr_id,p.pdt_company_name,p.pdt_model_name,SUM(t.count) AS count FROM tmp AS t INNER JOIN product_mapping AS p ON t.pr_id = p.pr_id AND t.shop_id =$testid GROUP BY pr_id ORDER BY t.count DESC;";

                                        $mpi = mysql_query($qMostPopularItem,$con) or die('Could not fetch MPI: ' . mysql_error());

                                      while($infoMPISW = mysql_fetch_assoc($mpi)) 
                                        { 
                                                echo "['".$infoMPISW['pdt_company_name']." ";
                                                echo $infoMPISW['pdt_model_name'] ."',";
                                                echo $infoMPISW['count'],"],";

                                        }

                      ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T20:27:35.557

在 Ajax 响应上再次使用新值调用 drawChart() 函数。以下是我尝试过的代码。

索引文件

```
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
        <script type="text/javascript"> 
          google.load("visualization", "1", {packages:["corechart"]});
          google.setOnLoadCallback(drawChart);
          function drawChart()
          {
            alert('called');
            var data = google.visualization.arrayToDataTable([['Company & Model', 'Views'],['Samsung Hero Music E1232B',5],['Samsung Galaxy Y S5360',7],['Samsung Galaxy Ace S5830',7],['Karbonn K 1212',2],]);      
            var options = {
              title: 'Most Popular Item ',
              hAxis: {title: 'Brand', titleTextStyle: {color: 'red'}}};
            var chart = new google.visualization.ColumnChart(document.getElementById('MPI_chart_div'));
            chart.draw(data, options);
          }
          function drawChart2()
          {
            alert('called2');
            var data = google.visualization.arrayToDataTable([['Company & Model', 'Views'],['Samsung Music E1232B',5],['Samsung S5360',7],['Samsung S5830',7],['Karbonn K 1212',2],]);      
            var options = {
              title: 'Most Popular Item ',
              hAxis: {title: 'Brand', titleTextStyle: {color: 'red'}}};
            var chart = new google.visualization.ColumnChart(document.getElementById('MPI_chart_div'));
            chart.draw(data, options);
          }
          </script>
<script>
var xmlHttp

                function MPI_set_shop(str)
                { 
                    alert(str);
                    if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
        alert(xmlhttp.responseText);
        //google.load("visualization", str, {packages:["corechart"]});
        //google.setOnLoadCallback(drawChart);
        drawChart2(); // Note down here..
    }
  }
xmlhttp.open("GET","chart.php?q="+str,true);
xmlhttp.send();
                }                
</script>

<h3>COLUMN CHART FOR MOST POPULAR ITEM </h3>
        Select Shop  <select id="MPI_selected_shop" onchange="MPI_set_shop(this.value);">           
                <option value="all_Shops">All Shops</option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                 </select>
<input type="text" id="sd"  />

        <div id="MPI_chart_div" style="width: 800px; height: 400px;"></div> 
```

请注意，我创建了另一个名为 drawChart2() 的函数，但如果您调用 drawChart()，它也会给您“被调用”的警报。您只需要在其中传递新值。希望以上回答对您有所帮助。最重要的是，除了回调函数，我什么都没做。[虽然我更改了 javascript ajax 代码，但这不会有任何问题。]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T14:18:19.100

您是否查看过谷歌图表的仪表板，您可以在其中将图表（例如条形图）与控件（字符串过滤器 - 文本框，类别选择器 - 下拉菜单，数字范围选择器 - 滑块）绑定？这是因为我没有看到 ChartWrapper 和 Data Table View 选项的实例。

在不使用仪表板的情况下，一种简单的方法是 ajax 请求新数据并调用 chart_name.draw(new_chart_data, options); 这将重绘整个图表。此外，根据数据集的大小，您可能会面临分辨率/显示问题。

# java - 如何在单元测试中检查该实体已添加到持久性上下文中

> ID：13100391
> 
> 赞同：0
> 
> 时间：2012-10-27T12:58:15.707
> 
> 标签：java, jakarta-ee, jpa, junit

我创建了一个实体，其中包括一个`private int id;`字段。现在，我想编写一个单元测试，它只是确认它已添加到持久性上下文中并且它有一个 id。但是我应该检查什么？该字段默认初始化为 0，并且由于我不使用包装类 Integer（我不会），我不知道如何确认它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T13:47:45.380

而不是`entityManager.persist(entity)`您可以使用`entityManager.merge(entity)`which 返回已保存的对象。您可以从返回的对象中获取 id 并检查您想要的任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T13:34:51.647

该测试不会是单元测试，因为您想确保有人在调用`setId()`您的实体。在这种情况下，单元测试将验证是否`entityManager.persist(myEntity)`调用了 mocked `entityManager`。

据我了解，您希望对此进行集成测试。试试[Arquillian](http://www.jboss.org/arquillian.html)，一个相当不错的集成测试框架。它可以在 JUnit 框架中使用。您可以将 EJB 和模拟注入`EntityManager`到您的 JUnit 中，它维护一个内存数据库，您可以针对该数据库运行 JPA 查询。

[Arquillian 参考指南](https://docs.jboss.org/author/display/ARQ/Reference+Guide)

# javascript - 如何在中附加css属性 tag in IE

[问问题](https://stackoverflow.com/questions/ask)问问题 2012-10-27T12:58:17.3971022 次This question shows research effort; it is useful and clear0This question does not show any research effort; it is unclear or not usefulBookmark this question.Show activity on this post.

I have an ajax web application, loading all parts in a single page such as index.html. Inner parts to be loaded in index.html exceeded 32 page(html, js, css).

Now I have trouble with CSS files to be include or `@import`. I thought I can merge all styles in a style tag using JS at client side. The problem is, IE doesn't allow me to change the style tag in head of the page using JS.

Any suggestion?

[Here](http://jsfiddle.net/dP29q/) is the fiddle of what I want to do in IE. It's working fine in other standard browsers.

[javascript](/tags/javascript "show questions tagged 'javascript'")[jquery](/tags/jquery "show questions tagged 'jquery'")[html](/tags/html "show questions tagged 'html'")[css](/tags/css "show questions tagged 'css'")[internet-explorer](/tags/internet-explorer "show questions tagged 'internet-explorer'")4

## 3 回答 3

This answer is useful1

您可以将新样式表附加到`<head>`：

```
$('head').append('<style >body {background:red;}</style >'); 
```

或者您可以将样式与远程页面一起导入，它们根本不需要`<head>`。

于 2012-10-27T14:19:27.600 回答This answer is useful0

这适用于 IE 9 和 Chrome 22：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> <html> <head> <style id="styleTag" type="text/css"> </style> <script type="text/javascript"> window.onload = function() { // append a stylesheet to the page's head (optional) var el = document.createElement("link"); el.type = "text/css"; el.rel = "stylesheet"; document.getElementsByTagName("HEAD")[0].appendChild(el); // get a reference to the newly added stylesheet var css = document.styleSheets[document.styleSheets.length - 1]; // OR get a reference to an existing stylesheet // var css = document.styleSheets[0]; // add rules to the stylesheet css.insertRule("body {background:red;}", css.cssRules.length); } </script> </head> <body> <h1>Hello, world.</h1> </body> </html> 
```

因此，您希望专注于引用样式对象、解析样式表的规则并使用`insertRule`.

于 2012-10-27T14:16:55.020 回答This answer is useful0

这是一个愚蠢的 IE 错误，好吧

尝试`@import url("extra.css") all;`在您的 css 文件中使用

于 2012-10-27T13:03:55.300 回答

#### Related

[1](/questions/16642259 "Question score (upvotes - downvotes)")[javascript - 为什么我们需要单页应用程序？](/questions/16642259)[2](/questions/16642261 "Question score (upvotes - downvotes)")[php - 在 PHP 中输 出 UTF-8 数组的第一个字符](/questions/16642261)[1](/questions/16642264 "Question score (upvotes - downvotes)")[android - android 使用 ViewPager 显示图像](/questions/16642264)[3](/questions/16642274 "Question score (upvotes - downvotes)")[mysql - Meaning of ">" in MySQL update statement](/questions/16642274)[1](/questions/16642281 "Question score (upvotes - downvotes)")[android - Android Studio/Gradle 构建找不到自定义应用程序类](/questions/16642281)[2](/questions/16642283 "Question score (upvotes - downvotes)")[nhibernate - Fluent NHibernate - ORA-00904: : 标识符无效，因为对象属性名称是 oracle 关键字](/questions/16642283)[4](/questions/16642286 "Question score (upvotes - downvotes)")[c++ - Slicing std::array](/questions/16642286)[3](/questions/16642291 "Question score (upvotes - downvotes)")[c - Address of a variable stored in a register](/questions/16642291)[6](/questions/16642292 "Question score (upvotes - downvotes)")[excel - Extract 1st letter from cell concatenate with another cell paste in third cell, then next row](/questions/16642292)[2](/questions/16642294 "Question score (upvotes - downvotes)")[c++ - Why must 'auto' declarations all be of the same type?](/questions/16642294)

#### Reference

[php](https://php.github.net.cn) × 1429865[c/c++](https://c-cpp.com) × 756500[nginx](https://nginx.github.net.cn) × 49975[mongodb](https://mongodb.net.cn) × 159057[mybatis](https://mybatis.net.cn) × 3233[anaconda](https://anaconda.org.cn) × 13410[pycharm](https://pycharm.net.cn) × 14671[python](https://python.github.net.cn) × 1902243[vscode](https://vscode.github.net.cn) × 56040[docker](https://dockerdocs.cn) × 110988[github](https://github.net.cn) × 49000[flask](https://flask.github.net.cn) × 49129[ffmpeg](https://ffmpeg.github.net.cn) × 24037[jmeter](https://jmeter.net) × 16910[matplotlib](https://matplotlib.net) × 63493[bootstrap](https://getbootstrap.net) × 54641[](https://stackoverflow.com)

##### [Stack Overflow 中文网](https://stackoverflow.org.cn)

遵从 CC BY-SA 知识共享许可协议。

> ID：13100392
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

# ruby-on-rails - Backbone + Rails 'Paperclip' Async Uploads

> ID：13100393
> 
> 赞同：5
> 
> 时间：2012-10-27T12:58:28.923
> 
> 标签：ruby-on-rails, backbone.js, coffeescript, paperclip, ajax-upload

I'm implementing async photo uploads using backbone & the rails 'paperclip' gem:

**Questions:**

1.  Do I need to use jQuery upload (or equivalent lib)?
2.  If so, do I simply override photocollection.sync to call the library?

Item.rb

```
class Item < ActiveRecord::Base
   has_many: photos
   ... 
```

Photo.rb

```
class Photo < ActiveRecord::Base

  attr_accessible :photo
  belongs_to :item

  has_attached_file :photo
... 
```

ItemView.js.coffee

```
class MySite.Views.Items.Edit extends Backbone.View

  template: JST['items/edit']

  initialize: ->
    @modelBinder = new Backbone.ModelBinder
    @model.on('change', @render(), this)

  events: ->
    'submit #edit_item_form' : 'save_item'

  render: ->
    $(@el).html @template( item: @model )

    @new_photo = @model.new_photo()

    @modelBinder.bind @model, $("#item_fields")
    @modelBinder.bind @new_photo, $("#photo_fields")
    @

  save_item: (e) ->
    e.preventDefault()
    @model.save()
    @new_photo.save() 
```

Edit.jst.eco

```
<form id="edit_item_form" accept-charset="UTF-8" data-remote="true" enctype="multipart/form-data">
<div id="item_fields"> .... </div>
<div id="photo_fields">
   <input type="file" id="upload_photo" name="photo[photo]" />
</div>
... 
```

*Suggestions for overall design improvement are welcome*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T05:41:42.093

我最终选择了 iframe 上传的简单性和跨浏览器支持。实现实际上非常简单：

MyView.js.coffee：

```
 events: ->
    'change #upload_photos' : 'upload_photo'

  upload_photo: (e) ->
    upload_frame = $('#add_photo_form')
    upload_frame.prop 'target', 'upload_frame'
    upload_frame.submit() 
```

MyTemplate.jst.eco：

```
<form id="add_photo_form" method="POST" action="/api/v1/photos" enctype="multipart/form-data">
  <div id="photo_fields">
      <input type="file" id="upload_photos" name="photo[photo]" multiple>
      <input type="hidden" name="authenticity_token" value="<%= $("meta[name='csrf-token']").attr("content") %>">
  </div>
</form>
<iframe id='upload_frame' name='upload_frame' src=''></iframe> 
```

注意添加了 CSRF Token。没有它，请求将失败并清除您的会话。

# android - 如何使用 android NDK 编译 glib？

> ID：13100404
> 
> 赞同：2
> 
> 时间：2012-10-27T13:00:19.933
> 
> 标签：android, android-ndk, glib

有几个带有 glib 端口到 android 平台的存储库，我如何使用 android NDK 编译这些库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T15:34:20.053

我遇到了同样的问题，例如使用[https://github.com/ieei/glib](https://github.com/ieei/glib)以下对我有用：

```
…/android-ndk-r8d/ndk-build NDK_PROJECT_PATH=. APP_BUILD_SCRIPT=./Android.mk 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-28T16:33:42.453

就我而言，我将下一行添加到 Android.mk

```
TARGET_FORMAT_STRING_CFLAGS := -Wformat -Wno-error 
```

之后我使用以下代码编译代码：

```
<android-ndk-path>/ndk-build NDK_PROJECT_PATH=. APP_BUILD_SCRIPT=./Android.mk 
```

# android - Android - 如何确定坐标是否位于谷歌地图中的道路上

> ID：13100412
> 
> 赞同：5
> 
> 时间：2012-10-27T13:00:56.330
> 
> 标签：android, google-maps, location, coordinates

我需要在我的应用程序中进行检查，以确定给定坐标是否位于 Google 地图中的道路上。

Google Maps API 中是否有任何功能可以帮助我解决这个问题？

提前致谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-06T16:14:22.290

据我所知，这无法使用 Google Maps API 完成。

我认为您最好的选择是使用众包数据集，例如[OpenStreetMap (OSM)](http://www.openstreetmap.org/)。

您需要建立自己的空间数据库（例如[PostGIS](http://postgis.refractions.net/)）并将 OSM 数据导入数据库。

然后，您将创建一个服务器端 API（托管在[Tomcat](http://tomcat.apache.org/download-60.cgi)或[Glassfish](http://glassfish.java.net/)等 Web 服务器中）来接收手机的当前位置，以一定的半径缓冲该位置以给您一个圆形多边形，并进行[空间查询通过 PostGIS](http://www.bostongis.com/postgis_intersection_intersects.snippet)确定缓冲区是否与任何道路相交（例如，带有“highway=primary”或“highway=secondary”标签的方式，具体取决于您要包含的道路类型 - 请参阅[此站点](http://wiki.openstreetmap.org/wiki/Highway)），并返回 true 或 false对电话的回应。

**编辑 2015 年 8 月**

现在在[android-maps-utils 库](https://github.com/googlemaps/android-maps-utils)中有一个名为的方法，`PolyUtil.isLocationOnPath()`它允许您在 Android 应用程序本身内进行这种类型的计算，假设您有一组构成道路（或任何其他线）的点。

这是[库中代码的样子](https://github.com/googlemaps/android-maps-utils/blob/master/library/src/com/google/maps/android/PolyUtil.java#L146)：

```
 /**
     * Computes whether the given point lies on or near a polyline, within a specified
     * tolerance in meters. The polyline is composed of great circle segments if geodesic
     * is true, and of Rhumb segments otherwise. The polyline is not closed -- the closing
     * segment between the first point and the last point is not included.
     */
    public static boolean isLocationOnPath(LatLng point, List<LatLng> polyline,
                                           boolean geodesic, double tolerance) {
        return isLocationOnEdgeOrPath(point, polyline, false, geodesic, tolerance);
    } 
```

要使用此库，您需要将该库添加到您的`build.gradle`：

```
dependencies {
    compile 'com.google.maps.android:android-maps-utils:0.4+'
} 
```

然后，当你有你的观点和你的路径时，你需要将你的纬度/经度转换为[`LatLng`](https://developers.google.com/android/reference/com/google/android/gms/maps/model/LatLng)对象（特别是，分别是 a`LatLng point`和`List<LatLng> line`），然后在你的代码调用中：

```
double tolerance = 10; // meters
boolean isLocationOnPath = PolyUtil.isLocationOnPath(point, line, true, tolerance); 
```

...查看您的点是否在您的线的 10 米范围内。

有关如何使用它的更多信息，请参阅此库的[入门指南。](http://googlemaps.github.io/android-maps-utils/#start)

# wmi - WMI: PCIExpress

> ID：13100413
> 
> 赞同：2
> 
> 时间：2012-10-27T13:01:10.670
> 
> 标签：wmi, pci-e

Does anybody know the way to get devices attached to PCI Express slots by using WMI?

I've been using Win32_PnPEntity class, but I can't make a distinguish between PCI and PCI Express devices.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T15:04:19.470

AFAIK 没有 WMI 类或属性可以直接以可靠的方式检测 PCI Express 设备，但作为解决方法，您可以检查WMI 类属性中的`PCI Express`字符串。`Description`[`Win32_PnPEntity`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394353%28v=vs.85%29.aspx)

```
SELECT * FROM Win32_PnPEntity Where Description LIKE "%PCI Express%" 
```

# oop - 从数组中删除 matlab 对象，删除空数组空间

> ID：13100414
> 
> 赞同：0
> 
> 时间：2012-10-27T13:01:13.463
> 
> 标签：oop, matlab

对于此示例对象：

```
 classdef TestObject < handle
    %UNTITLED Summary of this class goes here
    %   Detailed explanation goes here

    properties
        a;
    end

    methods
    end

end 
```

这个示例脚本：

```
 tbarray = TestObject.empty();

for i=1:3
    newTestObject=TestObject;
    newTestObject.a=i;
    if(i==1)
        firstTestObject=newTestObject;
    end
    tbarray(end+1,1)=newTestObject;
end
delete (firstTestObject) ; 
```

运行后，tbarray 的第一个位置有一个空的 TestObject。是否可以调整 tbarray 的大小、删除空对象或使用某种删除调用，例如

```
index=tbarray.remove(firstObject);
tbarray.add(index,laterTestObject); 
```

或者`tbarray.Replace(firstObject,laterObject);`

**更新：** 如何找到要删除/替换的对象的数组索引。此示例使用 1，但每次可能不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T14:32:10.127

`tbarray(1) = []`将删除索引 1 并调整数组的大小（因此它现在的长度减少了 1）。 `tbarray(1) = laterObject`将在索引 1 处替换。

在 Matlab 中没有任何类的键（而不仅仅是原语/字符串）的 Set 或 Map，所以`tbarray.Replace(firstObject,laterObject);`在不知道索引的情况下几乎不可能实现类似的事情。

* * *

**编辑**
如果要查找数组中某些元素出现的索引，可以使用`find(tbarray == firstObject)`.
请注意，它`tbarray == firstObject`返回一个可以直接用作索引的逻辑数组，例如`tbarray(tbarray == firstObject) = []`or `tbarray(tbarray == firstObject) = laterObject`。

但是，您应该记住，这些操作很昂贵，因为要遍历整个数组。如果您可以为您的对象定义一些类型为`double`、`single`、数组`char`或有符号或无符号 32 位或 64 位整数的唯一键，则可以将它们存储在`containers.Map`.

在此示例中，您使用句柄类。如果您需要一个值类，您还需要在其上定义一个向量化的 eq() 方法。

# php - Looking for a portfolio CMS or virtual business card CMS

> ID：13100416
> 
> 赞同：0
> 
> 时间：2012-10-27T13:01:18.390
> 
> 标签：php, web-applications

Is there a portfolio cms? To build an about me page with my resume and portfolio?

**Edited:**

I want a content management system just for portfolio.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T13:06:15.407

[IDSlot 是一个投资组合 CMS](http://idslot.org/)。（它是免费和开源的）

> IDSlot 是一组用于在 Internet 上生成一个人的显着 Web 存在的方法。这种存在由某种涉及个人/身份的内容组成，包括关于、投资组合、（社交）链接、联系信息和作为​​默认插件的简历。它是可定制的和主题化的。

# php - 如何通过多选表单向多个电子邮件地址发送电子邮件？

> ID：13100420
> 
> 赞同：1
> 
> 时间：2012-10-27T13:01:39.137
> 
> 标签：php, html, forms, email, multiple-select

我正在尝试使用 PHP`mail`函数向通过多选表单选择的多个电子邮件地址发送一封电子邮件，而无需为每个循环执行一次。我目前将电子邮件地址保存为一个数组，但是 PHP 邮件函数返回一个错误，指出它只接受一个参数。关于如何使这项工作的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T13:11:18.560

我假设您的选择看起来像这样：

```
<select multiple="multiple" size="3" name="emails[]">
    <option value="jane@domain.com">Jane</option>
    <option value="jimmy@domain.com">Jimmy</option>
    <option value="john@domain.com">John</option>
    <option value="james@domain.com">James</option>
</select> 
```

在这种情况下，电子邮件地址列表将作为数组返回给您的 PHP（注意`name`属性中的空方括号）。要在没有循环的情况下向所有选定的地址发送电子邮件，您可以使用逗号对数组进行内爆并将其输入 PHP`mail`函数的第一个参数，如下所示：

```
<?php
    $addresses=implode(", ", $_POST["emails"]);
    mail($addresses, "Important message", "To whom it may concern, bla bla bla");
?> 
```

# android - 列表视图行自定义

> ID：13100425
> 
> 赞同：2
> 
> 时间：2012-10-27T13:01:51.307
> 
> 标签：android

> **可能重复：**
> [如何在列表视图的行之间留出空白空间？](https://stackoverflow.com/questions/13099714/how-to-give-empty-space-between-rows-of-listview)
> [如何在 pulltorefresh -listview 项目或行之间留出空白空间？](https://stackoverflow.com/questions/13099832/how-to-give-empty-space-between-pulltorefresh-listview-items-or-rows)

在我的应用程序中，我需要有一个自定义 listView。我想在行之间有空白，这样它看起来像一些行块。

我尝试在行 XML 中保留填充，但没有找到解决方案。

我正在使用`pullToRefresh`ListView api 来刷新列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T13:18:07.560

ListView 动态计算 ListView 行，因此在 ListItem 根布局上设置边距等内容并不总是有效。

更简单的解决方案：

创建一个自定义可绘制对象（res/drawable/listview_spacer.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<shape
  xmlns:android="http://schemas.android.com/apk/res/android">
    <!-- #00000000 is transparent -->
     <solid android:color="#00000000"/>
</shape> 
```

然后使用以下属性设置 ListView：

```
<ListView 
  ...
  android:divider="@drawable/listview_spacer"
  android:dividerHeight="10dp" /> 
```

这将在您的列表项之间创建一个 10dp 的透明空间。

干杯，克里斯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T14:38:47.910

您可以为 ListView 编写自己的适配器。看这个教程[custom ListView 1](http://www.ezzylearning.com/tutorial.aspx?tid=1763429) , [custom ListView 2](http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/) 然后你就可以为 ListView 行创建一个布局文件并自定义它的外观

# c# - 2 个同名进程。我如何只结束其中一个？

> ID：13100426
> 
> 赞同：4
> 
> 时间：2012-10-27T13:02:12.260
> 
> 标签：c#, .net

我有一个小“问题”窗口有一个无法杀死 csrss.exe 的系统文件，但是如果在另一个文件夹中有另一个名为 csrss.exe 的文件并且它正在运行，我该如何结束它的进程？我只知道该文件的位置和名称/大小..基本文件信息。

大声笑我用一个问题回答了我的问题.. 无论如何，我只想说我不想杀死系统文件 csrss 的进程，我想杀死恰好具有相同文件名和进程名的文件的进程。有可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T13:07:58.027

我并不是说应该*终止 csrss.exe*`ProcessModule.FileName`进程，但是如果您想查找具有相同名称的特定进程，可以检查包含可执行文件完整路径的 main属性：

```
Process process = // Get your process here
process.Modules[0].FileName == "C:\\MyPath\csrss.exe"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T14:37:30.017

如果你想结束一个基于它的进程，`FileInfo`比如大小/属性/等等……那么，这是可能的！这是一个简单的例子

**例子**

```
int FileSize = 0; //This belongs to the process you would like to terminate
//Create the process csrss for every process with the name csrss
foreach (Process csrss in Process.GetProcessesByName("csrss"))
{ 
     FileInfo csrssFile = new FileInfo(csrss.StartInfo.FileName); //Get the properties of its file name
     if (csrssFile.Length == FileSize)
     {
         csrss.Kill(); //Terminate the process based on its file length (size)
     }

} 
```

**另一个例子**

```
int FileSize = 0;
Process[] RunningProcesses = Process.GetProcesses();
foreach (Process csrss in RunningProcesses)
{
     if (csrss.ProcessName == "csrss")
     {
          FileInfo csrssFile = new FileInfo(csrss.StartInfo.FileName);
          if (csrssFile.Length == FileSize)
          {
               csrss.Kill();
          }
     }
} 
```

谢谢，
我希望你觉得这有帮助:)

# php - mysql查询的静态方法调用结果

> ID：13100427
> 
> 赞同：3
> 
> 时间：2012-10-27T13:02:21.243
> 
> 标签：php, mysql, oop

我有

```
class Check
{
    public function __construct()
    {
        $this->db = new Database();
    }

    public function query()
    {
        $login = Session::get("login");
        $sth = $this->db->prepare('SELECT admin FROM accounts WHERE login=:login');
        $sth->execute(array(':login' => $login));
        $result = $sth->fetch(PDO::FETCH_NUM);
        return $result[0];
    }

    public static function admin()
    {
        echo self::query();
    }
} 
```

我在另一个带有 PDO 连接的地方有数据库类。

```
class Database extends PDO
{
    public function __construct()
    {
        parent::__construct('mysql:host=localhost;dbname=name','root','pass');
        $this->query('SET NAMES utf8');
    }
} 
```

所以在 Check::admin() 代码之后我得到错误：

> 未定义的属性：View::$db

为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-27T13:05:53.280

您正在使用一种`static`方法，它想要使用一个`instance`变量。

您的管理方法调用查询方法，而查询方法正在使用`db`实例变量。由于您的类未实例化，因此该`db`变量不存在。

我的建议是使管理方法非静态并像这样使用您的代码：

```
$mycheck = new Check();
$mycheck->admin(); 
```

或者，如果您使用的是 php 5.4 并且想要坚持使用 oneliner：

```
(new Check())->admin(); 
```

**更新**

注意：不要`db`在构造函数中创建类，而是注入它：

```
public function __construct(Database $db)
{
   $this->db = $db;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T13:55:02.457

抱歉，这不是您问题的直接答案，但您的代码存在一些问题，因此请花一些时间检查一下，并询问您是否不清楚。

```
<?php

class Check {
    protected $_db;

    public function __construct(Database $db) {
        $this->_db = $db;
    }

    public function query(ISession $sessionData) {
        //WHY IS THE SESSION STATIC?
        //$login = Session::get("login");
        $sth = $this->_db->Connection()->prepare('SELECT admin FROM accounts WHERE login=:login');
        $sth->execute(array(':login' => $sessionData->get("login")));
        $result = $sth->fetch(PDO::FETCH_NUM);
        return $result[0];
    }

    public function admin(ISession $sessionData) {
        // REALLY BAD TO ECHO HERE
        echo $this->query($sessionData);
    }
}

class Database {

    private $_name;
    private $_password;
    private $_connStr;
    private $_settings;

    private $_pdo;

    public function __construct($connstr, $name, $password, array $settings = array()) {
        $this->_name = $name;
        $this->_password = $password;
        $this->_connStr = $connstr;
        $this->_settings = $settings;
    }

    public function Connection() {
        if ($this->_pdo == NULL) {
            $this->_pdo = new PDO($this->_connStr, $this->_name, $this->_password);
        }

        return $this->_pdo;
    }

    /* other fancy methods */

    public function Close() {
        $this->_pdo = NULL;
    }

    public function __destruct() {
        $this->Close();
    }
} 
```

而且我不明白为什么你需要一个 Check 类来处理这一切，因为如果我是你，我会像这样创建一些东西：

```
$currentSession = Session::GetCurrent();
$currentSession->User()->IsInRole('admin'); 
```

请注意，会话不是静态的，如果我要编写更完整的解决方案，我会避免 Session::GetCurrent() 调用，因为当前会话将是某个类实例中的一个字段（例如 HttpApplication）。

# php - PHP preg_match 和多行直到空行

> ID：13100434
> 
> 赞同：-3
> 
> 时间：2012-10-27T13:03:06.613
> 
> 标签：php, preg-match, string

我想通过 php preg_march 从电子邮件中获取文本，我的文本如下所示：

```
Details: Cras ultrices quam id nisl

Additional Informations
Lorem ipsum dolor sit amet, consectetur adipiscing elit.
Nunc eu enim non ipsum feugiat aliquam. Cras eget orci tellus, ac feugiat ligula.
Proin tristique lobortis lacinia. Morbi facilisis

Next line with value: Lorem ipsum dolor sit 
```

我想在“附加信息”下方获取所有信息，直到空行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T13:10:00.487

```
'~Additional Informations\\r?\\n(.+?)\\r?\\n\\r?\\n~si' 
```

试试这个。

它确实有效：

```
$string = <<<SZ
Details: Cras ultrices quam id nisl

Additional Informations
Lorem ipsum dolor sit amet, consectetur adipiscing elit.
Nunc eu enim non ipsum feugiat aliquam. Cras eget orci tellus, ac feugiat ligula.
Proin tristique lobortis lacinia. Morbi facilisis

Next line with value: Lorem ipsum dolor sit
SZ;
preg_match('~Additional Informations\\r?\\n(.+?)\\r?\\n\\r?\\n~si', $string, $matches);
var_dump($matches[1]); 
```

# php - 获取一个简短的服务器端 php 脚本以在 apache 上工作

> ID：13100438
> 
> 赞同：0
> 
> 时间：2012-10-27T13:03:14.163
> 
> 标签：php, apache

我刚刚在 Windows 7 安装上安装了 apache 和 php。

在 apache htdocs 目录中，我放置了一个名为“testing.php”的文件

我在里面写了

```
<?php
echo "Maple|Pine|Oak|Ash";
?> 
```

当我访问该页面时，尽管它只是吐出所有内容（而不是实际呼应这些话）。

这是我第一次运行 Web 服务器或其他任何东西，所以我想知道我做错了什么？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-27T13:12:49.283

**您还需要安装 PHP。**Apache 没有附带 PHP，它必须安装并正确启用。考虑[**WAPM**](http://www.wampserver.com/en/) *（也学习 .htaccess，用于 Linux 托管）*或[**IIS Express** + **Web 平台安装程序**](http://www.iis.net/learn/extensions/introduction-to-iis-express/iis-express-overview) *（+ PHP + PHP Win Cache + URL Rewrite - 这些都可以在 WebPI 中找到并且易于安装）*。

# javascript - 如何向此 JSON 数组添加“阅读更多”按钮？

> ID：13100441
> 
> 赞同：0
> 
> 时间：2012-10-27T13:03:36.293
> 
> 标签：javascript, json, html-table

我创建了一个动态产品比较图表。如果选择在 thead 下拉列表中发生更改，则基本上是将哪些数据写入单个单元格。我现在想添加一个名为“tlink”的数组，它将动态更改“到网站”按钮。

**桌子**

```
<table class="table table-bordered table-striped">
<thead>
<tr>
    <th class="center"><strong>Select Product:</strong></th>
    <th>
        <select class="col2 select">
            <option>Prod1</option>
            <option>Prod2</option>
            <option>Prod3</option>
            <option>Prod4</option>
            <option>Prod5</option>
            <option>Prod6</option>
        </select>
    </th>
    <th>
        <select class="col3 select">
            <option>Prod2</option>
            <option>Prod3</option>
            <option>Prod4</option>
            <option>Prod5</option>
            <option>Prod6</option>
        </select>
    </th>
    <th>
        <select class="col4 select">
            <option>Prod3</option>
            <option>Prod4</option>
            <option>Prod5</option>
            <option>Prod6</option>
        </select>
    </th>
 </tr>
</thead>
<tbody>
<tr>
    <td><strong>Logo</strong></td>
    <td class="col2 logo"><img src="http://www.ar-productions.eu/images/demo/arp-compare-demo1.jpg"></td>
    <td class="col3 logo"><img src="http://www.ar-productions.eu/images/demo/arp-compare-demo2.jpg"></td>
    <td class="col4 logo"><img src="http://www.ar-productions.eu/images/demo/arp-compare-demo3.jpg"></td>
</tr>
<tr>
    <td><strong>Details 1</strong></td>
    <td class="col2 d1"><img src="http://www.ar-productions.eu/images/icons/green-tick.png"></td>
    <td class="col3 d1"><img src="http://www.ar-productions.eu/images/icons/red-x.png"></td>
    <td class="col4 d1"><img src="http://www.ar-productions.eu/images/icons/green-tick.png"></td>
</tr>
<tr>
    <td><strong>Details 2</strong></td>
    <td class="col2 d2">Some Details</td>
    <td class="col3 d2">Details go here</td>
    <td class="col4 d2">Details or some other things</td>
</tr>
  <tr>
    <td><strong>Details 3</strong></td>
    <td class="col2 d3">More text about this</td>
    <td class="col3 d3">wow, more text</td>
    <td class="col4 d3">More details go here wow</td>
  </tr>
  <tr>
    <td><strong>Details 4</strong></td>
    <td class="col2 d4">Even more details here</td>
    <td class="col3 d4">Even more text and details</td>
    <td class="col4 d4">Almost forgot - more here</td>
  </tr>
 <tr>
    <td><strong>Rating Icons</strong></td>
    <td class="col2 rating">3 stars</td>
    <td class="col3 rating">1 stars</td>
    <td class="col4 rating">5 stars</td>
  </tr>
  <tr>
    <td><strong>Link to website</strong></td>
    <td class="col2 tlink"><a href="#" target="_blank" class="button-more">Link Button</a></td>
    <td class="col3 tlink"><a href="#" target="_blank" class="button-more">Link Button</a></td>
    <td class="col4 tlink"><a href="#" target="_blank" class="button-more">Link Button</a></td>
  </tr>
  </tbody>
</table> 
```

**剧本**

```
var data = {
"details":
    {
    "info": [
        {
        "name": "Prod1",
        "logo": "http://www.ar-productions.eu/images/demo/arp-compare-demo1.jpg",
        "d1": "http://www.ar-productions.eu/images/icons/green-tick.png",
        "d2": "Some Details",
        "d3": "More textsbout this",
        "d4": "Even more details here",
        "rating": "3 stars",
        "tlink": ""
        },
    {
        "name": "Prod2",
        "logo": "http://www.ar-productions.eu/images/demo/arp-compare-demo2.jpg",
        "d1": "http://www.ar-productions.eu/images/icons/red-x.png",
        "d2": "Details go here",
        "d3": "wow, more text",
        "d4": "Even more text and details",
        "rating": "1 star",
        "tlink": ""
        },
    {
        "name": "Prod3",
        "logo": "http://www.ar-productions.eu/images/demo/arp-compare-demo3.jpg",
        "d1": "http://www.ar-productions.eu/images/icons/green-tick.png",
        "d2": "Details or some other things",
        "d3": "More details go here wow",
        "d4": "Almost forgot - more here",
        "rating": "5 stars",
        "tlink": ""
        },
    {
        "name": "Prod4",
        "logo": "http://www.ar-productions.eu/images/demo/arp-compare-demo4.jpg",
        "d1": "http://www.ar-productions.eu/images/icons/red-x.png",
        "d2": "Some other things",
        "d3": "What should I say",
        "d4": "details go here wow",
        "rating": "4 stars",
        "tlink": ""
        },
     {
        "name": "Prod5",
        "logo": "http://www.ar-productions.eu/images/demo/arp-compare-demo5.jpg",
        "d1": "http://www.ar-productions.eu/images/icons/green-tick.png",
        "d2": "Dunno what to say",
        "d3": "Nice Optics",
        "d4": "State of the art blabla",
        "rating": "4 stars",
        "tlink": ""
        },
     {
        "name": "Prod6",
        "logo": "http://www.ar-productions.eu/images/demo/arp-compare-demo6.jpg",
        "d1": "http://www.ar-productions.eu/images/icons/red-x.png",
        "d2": "cheap case",
        "d3": "pictures pixeled",
        "d4": "red eyes from flash",
        "rating": "1 star",
        "tlink": ""
        }
    ]}
};

$(".select").change(function() {
var jthis = $(this);
var whichCol;
if (jthis.hasClass("col2")) {
    whichCol = "col2";
} else if
    (jthis.hasClass("col3")) {
    whichCol = "col3";
} else if
(jthis.hasClass("col4")) {
    whichCol = "col4";
}
$.each(data.details.info, function(i, v) {
    if (v.name == jthis.val()) {
        $("td." + whichCol + ".name").html(v.name);
        $("td." + whichCol + ".logo").html("<img src='" + v.logo + "' />");
        $("td." + whichCol + ".d1").html("<img src='" + v.d1 + "' />");
        $("td." + whichCol + ".d2").html(v.d2);
        $("td." + whichCol + ".d3").html(v.d3);
        $("td." + whichCol + ".d4").html(v.d4);
        $("td." + whichCol + ".rating").html(v.rating);
        $("td." + whichCol + ".tlink").html(v.tlink);
        return;
    }
});

}); 
```

您还可以在我的[jfiddle](http://jsfiddle.net/HammerMan/ddXYt/)上查看图表。要加载的字符串是：

```
<a href="#" target="_blank" class="button-more">Link Button</a> 
```

正如你所看到的，它已经包含了一个类，它是绘制 CSS 按钮的主题框架的一部分。所以我需要能够调用确切的字符串。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T16:23:39.263

只需使用该行

```
$("td." + whichCol + ".tlink").html('<a href="'+v.tlink+'" target="_blank" class="button-more">Link Button</a>'); 
```

设置 td 单元格的内部 HTML。由于 v.tlink 设置为 href 属性，只需将[http://www.google.com](http://www.google.com)设置为数据中的 tlink。

# mysql - 只有存在一定的时间差时，Mysql才选择不同的

> ID：13100444
> 
> 赞同：2
> 
> 时间：2012-10-27T13:04:06.877
> 
> 标签：mysql, datetime, gaps-and-islands, group-by

我有一个相当奇怪的问题。我有一个非常大的表，它是我的网络服务中每个人提出的所有请求的日志。该表具有 id、user_id 和一个日期时间字段。我现在想选择不同的“会话”。通过会话，我的意思是我认为具有超过 5 分钟差异和相同 user_id 的请求是不同的“会话”。如果不以编程方式解析每一行，这是否可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T14:14:07.760

将 datetime 字段舍入为 5 分钟块（添加/删除值中的分钟和秒），然后选择不同的 user_id 和 datetime 行。

# postgresql - 在 PostgreSQL 的表中添加缺少的日期

> ID：13100445
> 
> 赞同：4
> 
> 时间：2012-10-27T13:04:19.843
> 
> 标签：postgresql, datetime

我有一个包含 2002 年每一天的数据的表格，但它有一些缺失的日期。即，2002 年有 354 条记录（而不是 365 条）。对于我的计算，我需要在表中包含 Null 值的缺失数据

```
+-----+------------+------------+
| ID  |  rainfall  | date       |
+-----+------------+------------+
| 100 |  110.2     | 2002-05-06 |
| 101 |  56.6      | 2002-05-07 |
| 102 |  65.6      | 2002-05-09 |
| 103 |  75.9      | 2002-05-10 |
+-----+------------+------------+ 
```

你看到 2002-05-08 不见了。我希望我的决赛桌是这样的：

```
+-----+------------+------------+
| ID  |  rainfall  | date       |
+-----+------------+------------+
| 100 |  110.2     | 2002-05-06 |
| 101 |  56.6      | 2002-05-07 |
| 102 |            | 2002-05-08 |
| 103 |  65.6      | 2002-05-09 |
| 104 |  75.9      | 2002-05-10 |
+-----+------------+------------+ 
```

有没有办法在 PostgreSQL 中做到这一点？

我是否将结果作为查询结果（不一定是更新的表）并不重要

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-28T05:16:11.163

`date`是标准 SQL 中的[保留字](https://www.postgresql.org/docs/current/sql-keywords-appendix.html)，也是 PostgreSQL 中数据类型的名称。PostgreSQL 允许它作为标识符，但这并不是一个好主意。我`thedate`改为用作列名。

不要依赖代理 ID 中没有空白。这几乎总是一个坏主意。将这样的 ID 视为*没有意义的唯一编号*，即使它在*大多数情况下*似乎带有某些其他属性。

在这种特殊情况下，正如[@Clodoaldo 所评论](https://stackoverflow.com/questions/13100445/adding-missing-date-in-a-table-in-postgresql#comment17805541_13100445)的那样，它`thedate`似乎是一个完美的主键，并且该列`id`只是杂乱无章 - 我将其删除：

```
CREATE TEMP TABLE tbl (thedate date PRIMARY KEY, rainfall numeric);
INSERT INTO tbl(thedate, rainfall) VALUES
  ('2002-05-06', 110.2)
, ('2002-05-07', 56.6)
, ('2002-05-09', 65.6)
, ('2002-05-10', 75.9); 
```

### 询问

查询全表：

```
SELECT x.thedate, t.rainfall  -- rainfall automatically NULL for missing rows
FROM (
   SELECT generate_series(min(thedate), max(thedate), '1d')::date AS thedate
   FROM   tbl
   ) x
LEFT   JOIN tbl t USING (thedate)
ORDER  BY x.thedate 
```

类似于[@a_horse_with_no_name](https://stackoverflow.com/a/13100734/939860)发布的内容，但简化并忽略了pruned `id`。

填补表格中第一个和最后一个日期之间的空白。如果可能存在领先/落后差距，请相应扩展。您可以`date_trunc()`像[@Clodoaldo](https://stackoverflow.com/a/13100726/939860)演示的那样使用 - 但他的查询存在语法错误并且可以更简单。

### 插入缺失的行

最快和最易读的方法是`NOT EXISTS`反半连接。

```
INSERT INTO tbl (thedate, rainfall)
SELECT x.thedate, NULL
FROM (
   SELECT generate_series(min(thedate), max(thedate), '1d')::date AS thedate
   FROM   tbl
   ) x
WHERE NOT EXISTS (SELECT 1 FROM tbl t WHERE t.thedate = x.thedate) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-27T13:48:30.490

只需对返回 2002 年所有日期的查询进行外连接：

```
with all_dates as (
  select date '2002-01-01' + i as date_col
  from generate_series(0, extract(doy from date '2002-12-31')::int - 1) as i
)
select row_number() over (order by ad.date_col) as id, 
       t.rainfall,
       ad.date_col as date
from all_dates ad
  left join your_table t on ad.date_col = t.date
order by ad.date_col; 
```

这不会改变您的表格，它只会产生所需的结果。

请注意，生成的 id 列不会包含与表中的 ID 列相同的值，因为它只是结果集中的一个计数器。

您也可以将`row_number()`功能替换为`extract(doy from ad.date_col)`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-27T13:47:30.323

填补空白。这不会重新排序 ID：

```
insert into t (rainfall, "date") values
select null, "date"
from (
    select d::date as "date"
    from (
        t
        right join
        generate_series(
            (select date_trunc('year', min("date")) from t)::timestamp,
            (select max("date") from t),
            '1 day'
        ) s(d) on t."date" = s.d::date
    where t."date" is null
    ) q
) s 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-27T13:24:21.583

您必须完全重新创建表，因为索引必须更改。

更好的方法是使用您喜欢的 dbi 语言，创建一个忽略 ID 的循环并将值放入具有新序列化 ID 的新表中。

```
for day in (whole needed calendar)
    value = select rainfall from oldbrokentable where date = day
    insert into newcleanedtable date=day, rainfall=value, id=serialized 
```

（这不是真正的代码！只是概念性的，以适应您喜欢的脚本语言）

# c++ - 缓冲区中的垃圾字符

> ID：13100448
> 
> 赞同：0
> 
> 时间：2012-10-27T13:04:26.237
> 
> 标签：c++, linux

我有这个功能。

```
void cast(char *buf)
{
    string str(buf);
    string  s=str.substr(0,5);
    std::transform(s.begin(), s.end(), s.begin(),::toupper);
    DemoInput=s;
} 
```

*buf 是客户端发送的消息。我正在尝试接收该消息，无论将其剥离为五个字符并使其大写。如果消息> 5，则此方法有效，但如果消息< 5，则其末尾有垃圾字符。例如：如果 buf 为“long”，则 DemoInput 变为“LONG\\r”

我考虑过使用正则表达式（“[:upper:]”），但认为必须有一种更简单的方法来做到这一点。例如，我发现 posix regex 比 python regex 更复杂一些。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T13:12:02.450

如果您只需要前 5 个字符，请不要复制整个`buf`. 那只是浪费空间和时间。此外，您不应复制 telnet control character 之后的任何内容`\r`。

```
void cast(char *buf)
{
    size_t len = 0;
    while (len < 5 && buf[len] != '\0' && buf[len] != '\r') {
        ++len;
    }
    string s(buf, len);
    std::transform(s.begin(), s.end(), s.begin(),::toupper);
    DemoInput=s;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T13:10:06.540

为什么不更改将 buf 提供给 cast 函数的代码。附加 '\0' 以表示字符串的结尾，尽管它可能不是以空值结尾的。

# android - android os可以捕获蓝牙鼠标右键和滚轮事件吗？

> ID：13100451
> 
> 赞同：2
> 
> 时间：2012-10-27T13:04:37.410
> 
> 标签：android, android-widget, android-hardware

我有一部安卓2.3.5的手机，可以连接蓝牙鼠标。但我发现它只响应左键单击和鼠标移动。

```
if (event.getAction() == MotionEvent.ACTION_DOWN) {//Left Button

} else if (event.getAction() == MotionEvent.ACTION_UP) {//Left Button
} else if (event.getAction() == MotionEvent.ACTION_MOVE) {

} 
```

其他动作代码是什么，例如右键，滚轮？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-27T13:41:17.713

显然，您使用的 API 级别 (10) 仍然无法区分一个鼠标按钮或另一个鼠标按钮，并且所有点击都被视为屏幕上的触摸。如果您使用 14 岁以上的人，您可以`MotionEvent.getButtonState()`检查它是按下的主要按钮、次要按钮还是其他按钮。

[来源](https://stackoverflow.com/a/12743948/363262)

# java - 用 Java 读取 CSV 文件

> ID：13100453
> 
> 赞同：1
> 
> 时间：2012-10-27T13:04:44.687
> 
> 标签：java, csv, io

我编写了一个程序，它读取 csv 文件并将其放入 TableModel。我的问题是我想扩展程序，如果 csv 文件从我的 tablemodel 外部获取更改，则会更新并获取新值。

我现在将编写一个调度程序，以便线程休眠大约一分钟，如果文件的时间戳发生变化，则每分钟检查一次。如果是这样，它将再次读取文件。但是我不知道如果我使用调度程序会发生什么整个程序，因为我编写的这个小软件将成为在 JDK 6 上运行的更大软件的一部分。所以我寻找一个高性能且独立于更大软件的软件获取 tablemodel 更改的解决方案。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T13:19:45.557

`java.nio.file`包现在包含[Watch Service API](http://docs.oracle.com/javase/7/docs/api/java/nio/file/WatchService.html)。这有效地：

> 此 API 使您能够向监视服务注册一个（或多个目录）。注册时，您告诉服务您感兴趣的事件类型：文件创建、文件删除或文件修改。当服务检测到感兴趣的事件时，它会被转发到注册的进程。注册的进程有一个线程（或线程池）专门用于监视它注册的任何事件。当一个事件进来时，它会根据需要进行处理。

请参阅[此处](http://docs.oracle.com/javase/tutorial/essential/io/notification.html)的参考。

哦！此 API 仅适用于 JDK 7（更高版本）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-04T11:15:04.513

```
**OpenCsv is a best way to read csv file in java.
if your are using maven then you can use below dependency or download it's jar from web.**

 @SuppressWarnings({"rawtypes", "unchecked"})
  public void readCsvFile() {
    CSVReader csvReader;
    CsvToBean csv;
    File fileEntry; 
    try {
      fileEntry = new File("path of your file");
      csv = new CsvToBean();
      csvReader = new CSVReader(new FileReader(fileEntry), ',', '"', 1);
      List list = csv.parse(setColumMapping(), csvReader);
     //List of LabReportSampleData class
    } catch (IOException e) {
      e.printStackTrace();
    }
  }

  //Below function is used to map the your csv file to your mapping object. 
  //columns String array: The value inside your csv file. means 0 index map with degree variable in your mapping class.
  @SuppressWarnings({"rawtypes", "unchecked"})
  private static ColumnPositionMappingStrategy setColumMapping() {
    ColumnPositionMappingStrategy strategy = new ColumnPositionMappingStrategy();
    strategy.setType(LabReportSampleData.class);
    String[] columns =
        new String[] {"degree", "radian", "shearStress", "shearingStrain", "sourceUnit"};
    strategy.setColumnMapping(columns);
    return strategy;
  } 
```

# matlab - 用 MATLAB 创建高斯随机变量

> ID：13100454
> 
> 赞同：2
> 
> 时间：2012-10-27T13:05:14.087
> 
> 标签：matlab, statistics, distribution, normal-distribution, probability-density

通过使用`randn`函数，我想创建一个高斯随机变量`X`，`X ~ N(2,4)`并将这个模拟的 PDF 与理论曲线一起绘制。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-27T14:44:36.593

Matlab`randn`从均值为零且标准差为 1 的正态分布生成实现。任何其他正态分布的样本都可以通过以下方式简单地生成：

```
numSamples = 1000;
mu = 2;
sigma = 4;
samples = mu + sigma.*randn(numSamples, 1); 
```

您可以通过绘制直方图来验证这一点：

```
figure;hist(samples(:)); 
```

请参阅[matlab 帮助](http://www.mathworks.com/help/matlab/ref/randn.html)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-27T14:46:29.987

```
N = 1000;
x = [-20:20];
samples = 2 + 4*randn(N, 1);
ySamples = histc(samples,x) / N;
yTheoretical = pdf('norm', x, 2, 4);
plot(x, yTheoretical, x, ySamples) 
```

`randn(N, 1)`创建一个`N`×1 向量。

`histc`是按给出的 bin 的直方图计数`x`- 您可以使用它`hist`来立即绘制结果，但在这里我们想将它除以`N`.

`pdf`包含许多有用的 PDF，普通只是一个例子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-13T16:09:24.640

记住这一点：X ~ N（均值，方差）

matlab 中的 randn 产生具有零均值和单位方差的正态分布随机变量 W。要将均值和方差更改为随机变量 X（具有自定义均值和方差），请遵循以下等式： X = mean + standard_deviation*W 请注意，standard_deviation 是方差的平方根。

```
N = 1000;
x = [-20:20];
samples = 2 + sqrt(4)*randn(N, 1);
ySamples = histc(samples,x) / N;
yTheoretical = pdf('norm', x, 2, sqrt(4)); %put std_deviation not variance
plot(x, yTheoretical, x, ySamples) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-08T12:17:37.793

使用一行代码实现此目的的一种快速简便的方法是使用：

```
mu = 2;
sigma = 2;
samples = normrnd(mu,sigma,M,N); 
```

这将生成一个**MxN**矩阵，从`N(μ,)`, （`= N(2,2)`在这种特殊情况下）采样。有关其他信息，请参阅[`normrnd`](https://www.mathworks.com/help/stats/normrnd.html)。

# asp.net-mvc-3 - MVC 3 Request.Cookies 值无目的动态切换

> ID：13100455
> 
> 赞同：1
> 
> 时间：2012-10-27T13:05:26.393
> 
> 标签：asp.net-mvc-3

我的 BaseController (MVC 3) 中的重定向有问题 我有两个语言版本的网站波兰语和英语（由`$.cookie`插件设置）。如果，设置为英语并且用户想要转到波兰语 URL - 我想要进行正确的重定向。但是，每当我在方法中进行重定向`OnActionExecuting`时，在`ExecuteCore`方法中，我都会看到语言出于某种原因切换 - 请参阅该`(*)`行。

`OnActionExecuting`更重要的是，在那种情况下，我得到了和`ExecuteCore`方法之间的无限重定向。为什么 ？

```
public class BaseController : Controller
{
    protected override void ExecuteCore()
    {
        if (Request.Cookies["language"] != null)
        {
            if (Request.Cookies["language"].Value != "pl-PL" && Request.Cookies["language"].Value != "en-US")
                Request.Cookies["language"].Value = "en-US";
        }
        else
            Request.Cookies.Add(new HttpCookie("language", "en-US"));

        Thread.CurrentThread.CurrentCulture = new System.Globalization.CultureInfo(Request.Cookies["language"].Value);
        Thread.CurrentThread.CurrentUICulture = Thread.CurrentThread.CurrentCulture;

        base.ExecuteCore();
    }

    protected override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        switch (filterContext.ActionDescriptor.ActionName)
        {
            case "Onas":
                if (Request.Cookies["language"].Value == "en-US")
                {
                    filterContext.Result = new RedirectResult("/About", true);
                    return;
                }
                break;
            case "About":
                if (Request.Cookies["language"].Value == "pl-PL")
                {
(*)                 filterContext.Result = new RedirectResult("/Onas", true); // Request.Cookies["language"].Value will be en-US inside the ExecuteCore method - why ?
                    return;
                }
                break;
        }

        base.OnActionExecuting(filterContext);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T19:30:04.317

检查 cookie 路径属性。`/Onas`您可以通过在 url 上使用 en-US 并在url 上使用 pl-PL来获得无限重定向`/About`。

确保使用 jQuery 插件设置全局 cookie`{ path: '/' }`

# list - 使用相同的列表值扩展方案列表

> ID：13100459
> 
> 赞同：-1
> 
> 时间：2012-10-27T13:05:45.627
> 
> 标签：list, scheme, racket

我需要创建一个接收列表和所需新大小的方案函数，然后该函数使用相同的列表值扩展列表大小。例如：

```
'(1 2 3) to size 6 will turn to '(1 2 3 1 2 3)
'(1 2) to size 5 will turn to '(1 2 1 2 1)
'(4 5 6 1) to size 7 will turn to '(4 5 6 1 4 5 6) 
```

新的长度函数参数可以等于或大于当前列表大小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T13:18:09.250

您可以使用[SRFI 1](http://srfi.schemers.org/srfi-1/srfi-1.html)功能`circular-list`（与 Racket 的内置功能一起`take`）来执行此操作：

```
(require srfi/1)
(define (take-circular lst n)
  (take (apply circular-list lst) n)) 
```

如果你想避免使用 SRFI 1，另一种方法是这样的：

```
(define (take-circular lst n)
  (let ((size (length lst)))
    (if (> n size)
        (append lst (take-circular lst (- n size)))
        (take lst n)))) 
```

# emacs - pymacs-load 不会从 pymacs-load-path 变量的路径加载 python 模块

> ID：13100475
> 
> 赞同：0
> 
> 时间：2012-10-27T13:08:23.900
> 
> 标签：emacs, elisp, emacs24, pymacs

我在 ~/ 中有名为 qwe.py 的模块

执行下一行：

```
(setq pymacs-load-path (list "~/"))
(pymacs-load "qwe") 
```

返回错误：

```
 Debugger entered--Lisp error: (error "Pymacs loading qwe...failed")
  signal(error ("Pymacs loading qwe...failed"))
  pymacs-report-error("Pymacs loading %s...failed" "qwe")
  (cond (lisp-code (let ((result (eval lisp-code))) (message "Pymacs loading %s...done" module) result)) (noerror (message "Pymacs loading %s...failed" module) nil) (t (pymacs-report-error "Pymacs loading %s...failed" module)))
  (let ((lisp-code (pymacs-call "pymacs_load_helper" module prefix))) (cond (lisp-code (let ((result (eval lisp-code))) (message "Pymacs loading %s...done" module) result)) (noerror (message "Pymacs loading %s...failed" module) nil) (t (pymacs-report-error "Pymacs loading %s...failed" module))))
  pymacs-load("qwe")
  (progn (pymacs-load "qwe"))
  eval((progn (pymacs-load "qwe")) t)
  eval-last-sexp-1(nil)
  eval-last-sexp(nil)
  call-interactively(eval-last-sexp nil nil) 
```

如果将 qwe.py 复制到 /usr/lib/python2.7/ 中，一切正常。我究竟做错了什么？

Pymacs 0.25

Emacs 24.2

# 在 pymacs.el 中更改了这个变量，它正在工作，请原谅 :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T13:20:08.597

我应该在 pymacs.el 中更改这个变量

# ruby-on-rails - 使用轮胎从弹性搜索中的查询中提升

> ID：13100476
> 
> 赞同：2
> 
> 时间：2012-10-27T13:08:30.443
> 
> 标签：ruby-on-rails, elasticsearch, tire

我有一组具有背景（例如“计算机科学”）和技能（例如“php”）的用户。我试图在强调背景或技能的同时搜索它们（用户在搜索时选择任一选项）。

我已经设法使用带有这个 JSON 字符串的 curl 来完成这个工作（在这种情况下，我强调背景）：

```
'"query" : { 
    "bool" : {
        "should" : [
            {
                "text" : {"skills" : {"query" : "php mysql html css"}}
            },
            {
                "text" : {"backgrounds" : {"query" : "computer science", "boost" : 5}}
            }
        ]
    } 
}' 
```

现在我的问题是我不知道如何在 Tyre 中使用这个 JSON 作为查询，或者在 Tire DSL 中编写等价物。

**编辑**

实际上，我是通过查看轮胎源代码才知道的。

这是它的样子：

```
results = Users.search(:load => true) do
  query do
    boolean do
      should { string "skills:#{skills_query}", {:boost => skills_boost}}
      should {string "backgrounds:#{backgrounds_query}", {:boost => backgrounds_boost}}
    end
  end
end 
```

我将要强调的一项设置为 5，另一项设置为 0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T23:18:16.473

似乎严重缺乏关于如何在轮胎中正确执行此操作的良好文档。经过几个小时的搜索，我找到了这篇文章。稍后我将在博客上讨论这个问题，希望能让人们不必像我一样永远挖掘。无论如何，以下是我根据您的建议所做的，并且通过将名称字段提升到其他属性匹配项之上，它就像一个魅力。

```
page = params[:page].present? ? params[:page] : 1
tire.search(page: page, per_page: ApplicationHelper::MAX_SEARCH_LENGTH) do
  query do
    boolean do
      should { string "name:#{params[:q]}*", {:boost => 100}}
      should { string "#{params[:q]}*"}
    end
  end
end 
```

# xcode4 - 在 Xcode Storyboard 中编辑具有多个部分的静态分组表视图

> ID：13100478
> 
> 赞同：0
> 
> 时间：2012-10-27T13:08:55.337
> 
> 标签：xcode4, storyboard, uitableview

在 XCode 故事板中，如果它是静态的，则可以在表格视图中编辑单元格。是否可以在 Storyboard 下输入多个数据部分（即在组视图中的多个组），还是我需要使用数据源委托？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T16:44:31.633

我不确定我是否完全理解这个问题，但如果您问是否可以在 Interface Builder 中完成所有操作，答案是肯定的。在属性检查器中将表格内容设置为“静态单元格”后，将节数设置为所需的数据节数，然后通过选择节修改每个节，更改页眉、页脚和数量行。您还可以通过双击来快速编辑标题。

该部分中的每一行都可以以相同的方式进行修改。

# gwt - 在 GWT 的 DevMode 中使用 Websocket

> ID：13100482
> 
> 赞同：6
> 
> 时间：2012-10-27T13:09:31.153
> 
> 标签：gwt, websocket, jetty

有谁知道，如何使用有效的 WebsocketConnection 在 DevMode 中运行我的应用程序？首先，我认为丢失的码头罐子（websocket、continuation、http、io、server 和 util）是错误的原因，因为当我编译应用程序并将其放在外部码头上时，WebsocketConnection 没有问题。所以我搜索了它们并将它们添加到我的项目中。但是现在每次我在 DevMode 中启动它时，我都会遇到这样的异常：

```
[WARN] /testchat/WebSocketChatServlet
java.lang.NullPointerException
at org.eclipse.jetty.websocket.WebSocketFactory.upgrade(WebSocketFactory.java:197)
at org.eclipse.jetty.websocket.WebSocketFactory.acceptWebSocket(WebSocketFactory.java:304)
at org.eclipse.jetty.websocket.WebSocketServlet.service(WebSocketServlet.java:78)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:487)
at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:362)
at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:181)
at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:729)
at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:405)
at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
at org.mortbay.jetty.handler.RequestLogHandler.handle(RequestLogHandler.java:49)
at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
at org.mortbay.jetty.Server.handle(Server.java:324)
at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:505)
at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:829)
at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:513)
at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:211)
at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:380)
at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:395)
at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:488) 
```

[错误] 500 - 获取 /testchat/WebSocketChatServlet (127.0.0.1) 3129 字节

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-28T23:38:35.907

Jetty 团队非常乐意帮助 Google 将 GWT 移植到 jetty-7。实际上，在几年的时间里，我们已经多次联系过他们，包括发送代码，但我们从未收到过他们的回复。所以谷歌，如果你在听，我们是来帮忙的:)

简

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-27T13:32:55.423

DevMode 的嵌入式服务器是 Jetty 6，它不支持 WebSockets。谷歌几年前曾尝试将其升级到 Jetty 7，但类加载器存在无法解决的问题。

使用 WebSockets 的唯一方法是使用外部服务器（或者，如果您可以解决类加载问题，请编写自己的）并在模式下[`ServletContainerLauncher`](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/core/ext/ServletContainerLauncher.html)运行 DevMode 。 请参阅[在开发模式下使用我自己的服务器而不是 GWT 的内置 Jetty 实例](https://developers.google.com/web-toolkit/doc/latest/DevGuideCompilingAndDebugging#How_do_I_use_my_own_server_in_development_mode_instead_of_GWT%27s)`-noserver`

# django - Django inlineformset_factory 不删除记录

> ID：13100495
> 
> 赞同：1
> 
> 时间：2012-10-27T13:11:30.073
> 
> 标签：django, django-forms

这是我的代码：

```
PartFormSet = inlineformset_factory(ReservationPaper, ReservationPaperPart,
                                    ReservationPaperPartEditForm, extra=0)
if request.method == "POST":
    try:
        part_formset = PartFormSet(data=request.POST, instance=rp)
    except:
        return HttpResponseRedirect(request.path_info)
    rp_form = ReservationPaperForm(instance=rp, data=request.POST)

    if part_formset.is_valid() and rp_form.is_valid():
        rp_form.save()
        for part_form in part_formset.forms:
            part_form.save()
        return HttpResponseRedirect(reverse("internal:documents:display_reservation_paper",
                                        args=[rp.id]))
else:
    rp_form = ReservationPaperForm(instance=rp)
    part_formset = PartFormSet(instance=rp) 
```

它为每个 part_formset 实例呈现删除复选框，但是，当我提交表单条目时，它只被编辑，而不是被删除。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T14:40:22.587

保存表单集时，您没有做任何特别的事情，因此您可以调用`part_formset.save()`而不是单独遍历表单。

# c# - C# App.config 与设置文件

> ID：13100498
> 
> 赞同：22
> 
> 时间：2012-10-27T13:12:33.290
> 
> 标签：c#, .net, app-config

这听起来像是一个微不足道的问题，但是我简要地浏览了网络，我发现这`app.config`基本上是一种用于存储应用程序密钥/数据对的旧机制。

我想知道我们（作为 .NET 开发人员）是否有任何理由选择`app.config`使用`Settings file`?

- 有人可以提供一些优点和缺点，以便我们可以正确使用它们。

再次感谢

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-10-27T15:33:22.543

用于桌面应用程序的 App.config 和用于 Web 应用程序的 Web.config 是 .NET 配置系统的一部分。它们主要用于控制与我们的应用程序相关的 .NET 框架设置。这些配置设置如程序集版本的替换（<assemblyBinding> 部分）、.NET 框架版本 (<startup>) 的替换等。（有关完整的 app.config 架构，请参见[msdn](http://msdn.microsoft.com/en-us/library/1fk1t1t0%28v=vs.100%29.aspx)。）其中一个部分专门用于自定义设置应用程序开发人员 (<appSettings>)。还可以创建自定义部分。因此，当我们需要存储设置时，我们可以搭载 app.config 或创建我们自己的单独配置文件。

以下是使用 app.config 的优缺点：

1.  优点：.NET 中已经有一个标准 API 可以从 appSettings 部分读取设置。如果你只需要几个配置设置，使用这个现成的 API 比开发和测试你自己的类来读取你的配置文件要容易得多。此外，app.config 文件已经包含在 VS 项目中。

2.  Pro: machine.config/app.config 有一个标准的层次结构。如果您计划这样的设置可以在机器范围内设置并覆盖或保留为单个应用程序，您应该使用 app.config。

3.  优缺点：App.config 在运行时缓存。如果您希望在应用程序运行时对其进行更新，则需要专门请求刷新配置文件的某些部分。对于 web.config，当文件中的某些内容发生更改时，Web 应用程序会自动重新启动。这很方便。

4.  缺点：app.config 与 .exe 文件存储在同一目录中。通常它会在 C:\Program Files 的子文件夹中。此目录在 Windows 7 中受到额外保护，不会被写入。您需要成为管理员组的成员才能在此处写入，如果您在控制面板中的 UAC（用户访问控制）级别未设置为 0（通常不是），操作系统将要求您确认写入 c:\程序文件。因此，没有管理员权限的用户将无法更改 app.config 中的配置。以编程方式更改设置也是如此：如果应用程序不是在 Windows 7 上的管理员用户下运行，则在尝试编写 app.config 时会出现异常。您自己的配置文件通常位于 C:\ProgramData\ 或 c:\Users 子文件夹（在 Windows 7 上）。这些位置对用户或程序编写更友好。

5.  缺点：如果用户编辑了您的 app.config 文件并意外损坏了它，则整个应用程序将不会以一些晦涩的错误消息启动。如果您的单独配置文件已损坏，您将能够提供更详细的错误消息。

总之：app.config 为您提供了更简单（更快的开发）的方法，主要适用于只读设置。自定义设置文件为您提供更多自由（存储文件的位置、验证/错误处理、其架构的更大灵活性），但在开发过程中需要更多工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T13:21:25.240

反过来说，设置文件（或最初称为的 ini 文件）是在 Windows 95 之前用于保存应用程序设置（键/值对）的机制。随着 Windows 95 的发布，建议应用程序设置为移入 Windows 注册表（这被证明是有问题的，因为如果您搞砸了注册表，您的 Windows 可能不再能够启动）。

.config 文件与 .Net 一起发挥作用。XML 格式允许比简单的键/值对更动态和复杂的设置配置。

现代用户/设置文件是 .config 文件的 XML 扩展名（在特定条件下可以覆盖 .config 中某些设置的设置）。

# c# - 路由到MVC4中动态用户名路径下的用户页面

> ID：13100502
> 
> 赞同：0
> 
> 时间：2012-10-27T13:12:51.727
> 
> 标签：c#, .net, asp.net-mvc

我有一些动态用户路线，例如

```
 routes.MapRoute(
            "UserNames", // Route name
            "{username}", // URL with parameters
            new { controller = "Home", action = "UserName" }); 
```

在**HomeController.cs下**

```
public ActionResult UserName(string username)
        {
            ViewBag.Message = username;

           return RedirectToAction("Register","Account"); // Test...
        } 
```

它工作正常。

但我需要的是让 URL 像

```
http:\\mywebsite.com\UserNameBob\MyGallery\1
http:\\mywebsite.com\UserNameBob\Profile
http:\\mywebsite.com\UserNameBob\MyFriends 
```

我该如何存档？

任何俱乐部？

谢谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T13:18:18.530

你的意思是这样的：

```
routes.MapRoute(
    "UserNames", // Route name
    "{username}/{action}/{id}", // URL with parameters
     new { controller = "Home", action = "UserName", id = UrlParameter.Optional }); 
```

然后在`HomeController`你里面放这样的动作：

```
public ActionResult MyGallery(string username, int id) {
    // code
}

public ActionResult Profile(string username) {
    // code
} 
```

编辑：当然，如果画廊 ID 不是 int，只需使用`string`或任何合适的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T13:24:25.307

在 ASP.NET 中查找[URL 重写以在路由时处理动态参数。](http://msdn.microsoft.com/en-us/library/ms972974.aspx)

# recursion - OCaml 递归函数

> ID：13100503
> 
> 赞同：2
> 
> 时间：2012-10-27T13:13:00.430
> 
> 标签：recursion, functional-programming, eval, ocaml, reduce

我是 OCaml 的新手。我写了这段代码来减少代数表达式：

```
type expr =
    | Int of int
    | Float of float
    | Add of expr*expr
    | Sub of expr*expr
    | Mult of expr*expr
    | Div of expr*expr
    | Minus of expr

let rec eval expression = match expression with
    | Add (e1, e2) -> (eval e1) +. (eval e2)
    | Sub (e1,e2) -> (eval e1) -. (eval e2)
    | Mult (e1,e2) -> (eval e1) *. (eval e2)
    | Div (e1, e2) -> (eval e1) /. (eval e2)
    | Minus (e1) -> -.(eval e1)
    | Int i -> (float) i
    | Float f -> f

let rec simplify_expr e = match e with
| Add (e1,e2) -> if (eval e1) == 0.0 then simplify_expr e2 
                                    else if (eval e2) == 0.0 then simplify_expr e1 
                                    else Add (simplify_expr e1, simplify_expr e2)
| Mult(e1,e2) -> if (eval e1) == 1.0 then simplify_expr e2 
                                    else if (eval e2) == 1.0 then simplify_expr e1 
                                    else Mult (simplify_expr e1, simplify_expr e2)
| Sub (e1, e2) -> if (eval e1) == 0.0 then simplify_expr e2 
                                    else if (eval e2) == 0.0 then simplify_expr e1 
                                    else Sub (simplify_expr e1, simplify_expr e2)
| Div (e1, e2) -> if (eval e1) == 1.0 then simplify_expr e2 
                                    else if (eval e2) == 1.0 then simplify_expr e1 
                                    else Div (simplify_expr e1, simplify_expr e2)
| Int i -> e
| Minus e1 -> simplify_expr(e1)
| Float f -> e 
```

我以这种方式调用 simple_expr：

```
Expr.simplify_expr Expr.Mult (Expr.Int 4, Expr.Add (Expr.Int 1, Expr.Int 0));; 
```

我得到了错误的答案：

```
- : Expr.expr = Expr.Mult (Expr.Int 4, Expr.Add (Expr.Int 1, Expr.Int 0)) 
```

下面我粘贴调用的堆栈。

```
Expr.simplify_expr <--
  Expr.Mult (Expr.Int 4, Expr.Add (Expr.Int 1, Expr.Int 0))
Expr.eval <-- Expr.Int 4
Expr.eval --> 4.
Expr.eval <-- Expr.Add (Expr.Int 1, Expr.Int 0)
Expr.eval <-- Expr.Int 0
Expr.eval --> 0.
Expr.eval <-- Expr.Int 1
Expr.eval --> 1.
Expr.eval --> 1.
Expr.simplify_expr <-- Expr.Add (Expr.Int 1, Expr.Int 0)
Expr.eval <-- Expr.Int 1
Expr.eval --> 1.
Expr.eval <-- Expr.Int 0
Expr.eval --> 0.
Expr.simplify_expr <-- Expr.Int 0
Expr.simplify_expr --> Expr.Int 0
Expr.simplify_expr <-- Expr.Int 1
Expr.simplify_expr --> Expr.Int 1
Expr.simplify_expr --> Expr.Add (Expr.Int 1, Expr.Int 0)
Expr.simplify_expr <-- Expr.Int 4
Expr.simplify_expr --> Expr.Int 4
Expr.simplify_expr -->
  Expr.Mult (Expr.Int 4, Expr.Add (Expr.Int 1, Expr.Int 0))
- : Expr.expr = Expr.Mult (Expr.Int 4, Expr.Add (Expr.Int 1, Expr.Int 0)) 
```

我不知道，为什么在用 1（第 9 行）simplify_expr 返回 eval 之后，用 Add 调用。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-27T13:35:55.127

替换`==`为`=`。参见例如[!= 在 OCaml 中是否有意义？](https://stackoverflow.com/questions/1412668/does-have-meaning-in-ocaml).

不是问题，还要检查: is not和is not的`Sub`,`Div`和`Minus`case ...`simplify_expr``0 - e2``e2``1 / e2``e2`

# cgi - DreamHost CGI 结果显示为文本

> ID：13100505
> 
> 赞同：0
> 
> 时间：2012-10-27T13:13:12.773
> 
> 标签：cgi

我正在测试一个在本地作为 HTML 可以正常工作的 CGI，但是当从 DreamHost 执行时，它显示为文本：

[http://www.fivetechsoft.net/cgi-bin/tutor01.cgi](http://www.fivetechsoft.net/cgi-bin/tutor01.cgi)

如果在本地执行，则显示正常：

本地主机/cgi-bin/tutor01.cgi

任何提示为什么它不被视为来自 DreamHost 的 HTML？Content-Type 正确设置为“Content-Type: text/html”，谢谢

安东尼奥

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T20:35:19.830

看起来您的 Apache 正在发送一些虚假标头，似乎是 ANSI 转义码。这意味着您的 Content-Type 行无效，Apache 将其替换为其默认的 Content-Type。

```
$ curl -si http://www.fivetechsoft.net/cgi-bin/tutor01.cgi | less
HTTP/1.1 200 OK
Date: Sat, 27 Oct 2012 20:31:38 GMT
Server: Apache
ESC[0mESC[1;1HESC[?25hESC[0;10;37;40mESC[mContent-Type: text/html
Transfer-Encoding: chunked
Content-Type: text/plain

<html>
<head>
... 
```

# wicket - Wicket 气氛初始化异常

> ID：13100508
> 
> 赞同：1
> 
> 时间：2012-10-27T13:13:54.503
> 
> 标签：wicket, atmosphere

我有以下设置： wicket: 6.1.0 wicket-atmosphere: 0.4

（通过 Maven）

在 Application.init() 上，我在 EventBus 实例化期间收到 NullPointerException

```
 new EventBus(this); 
```

例外：

```
 java.lang.NullPointerException
at org.apache.wicket.atmosphere.EventBus.<init>(EventBus.java:105) 
```

这是因为方法

```
 public synchronized static BroadcasterFactory getDefault() 
```

传递 null（受保护的静态成员“工厂”未初始化）。

如何正确使用 Wicket/Atmosphere？我忘记了要初始化的东西吗？我将 Wicket 作为 ServletFilter 启动。

```
<filter>
    <filter-name>AtmosphereTest</filter-name>
    <filter-class>org.apache.wicket.protocol.http.WicketFilter</filter-class>
    <init-param>
        <param-name>applicationClassName</param-name>
        <param-value>com.atmosphere.wicket.Application</param-value>
    </init-param>
    <init-param>
        <param-name>configuration</param-name>
        <param-value>development</param-value>
    </init-param>
    <init-param>
        <param-name>ignorePaths</param-name>
        <param-value>/css,/js,/images,/icons</param-value>
    </init-param>
</filter>

<filter-mapping>
    <filter-name>AtmosphereTest</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

我没有氛围配置，需要吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T18:17:27.520

根据用户检票口列表中的[这封电子邮件](http://osdir.com/ml/users-wicket.apache.org/2012-06/msg00248.html)`AtmosphereServlet`，您应该在您的 web.xml 中设置它并为其提供一个大气.xml 配置文件，该文件告诉大气如何加载而不是直接在您的 web.xml`WicketFilter`中配置。`WicketFilter`

我没有使用气氛，所以我不能保证这一点，但听起来很明智。

上面引用的电子邮件具有 web.xml 和大气.xml 配置，可以帮助您进行此设置。

# css - CSS仅显示选择性图像？

> ID：13100514
> 
> 赞同：0
> 
> 时间：2012-10-27T13:15:12.697
> 
> 标签：css

我的 css 有问题，这真的让我很困惑。基本上，我在样式表中设置了“背景图像：url”，由于某种原因，它不会显示我的文件“form_bg.png”，但刚刚在“1.png”目录中粘贴了一张照片，这会显示出来。无论我尝试什么，我是否重命名文件或类似'form_bg.png'的东西都不会显示？

显然目录路径是正确的，因为它指向“1.png”而不是其他文件。

谁能让我知道为什么会发生这种情况？

谢谢

```
#main form {
    width: 440px;
    height: 450px;
    background-image: url(assets/img/form/icons.png) no-repeat;
    padding-top: 50px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T14:09:21.597

我认为该图像不是原始的 png 格式，它可能只是重命名了文件扩展名，因此不会显示该图像以检查是否在 Photoshop 中打开该图像，如果扩展名已更改，则不会打开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T13:20:06.590

在背景图像中使用 no-repeat 是不正确的。要在一行中使用它们，请像这样使用“背景”：

```
background: url('xyz.png') no-repeat; 
```

关于您的问题，请尝试使用图像的绝对路径，如下所示：

```
background: url('http://www.google.com/images/srpr/logo3w.png'); 
```

# mathematical-optimization - 分配分配（线性规划）相似

> ID：13100516
> 
> 赞同：3
> 
> 时间：2012-10-27T13:15:22.010
> 
> 标签：mathematical-optimization, linear-programming

我有工作需要在 14 天内完成。我有5个工人。一天正好需要3个工人。每个工人最多只能工作 9 天。每个工人都有自己的一天偏好，每个工人每天都有不同的成本。

现在，我如何用数学术语解决这个问题？我如何找到工人分配的最低成本？

我不认为这是分配问题，因为匈牙利算法的设计使我只能找到一对一的分配。（在这种情况下，1 名工人 1 天）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T18:11:17.110

这可以作为二分图上的[最小成本网络流问题来解决。](http://en.wikipedia.org/wiki/Minimum-cost_flow_problem)每个工人代表一个供应量为 9 单位的源，每天代表一个需求量为 3 的汇点。供需之间的弧线各有容量 1，以及与他们在当天关闭的偏好相对应的成本。如果沿弧线流动，则意味着当天应该有特定的工人工作。

虽然这不能用匈牙利方法解决，但是用几种快速算法，包括[网络单纯形](http://www.me.utexas.edu/~jensen/models/network/net8.html)法。

代数上，公式是

```
minimize sum_w sum_d p_wd x_wd
subject to
\sum_w x_wd = 3    forall d
\sum_d x_wd <= 5   forall w 
```

如果 p_wd 是工人 w 对第 d 天的偏好。这是一个[完全单模](http://en.wikipedia.org/wiki/Total_unimodularity)的约束矩阵，因此不需要混合整数求解器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T07:24:42.230

你需要解决这个问题是一个**IP（整数编程）公式。**你的直觉是对的，这与分配问题非常相似——我们本质上是指派工人在某些日子工作。

以下是制定问题的步骤：

**决策变量**：（英文）哪个工人在哪几天工作？

让我们标记天**t** (1..14) 和工人**w1 到 w5**。

所以，

`X_wt = 1 if worker w works on day t`

`X_wt = 0 otherwise`

这些限制现在可以相当直接地写下来。每天正好需要 3 名工人。

```
X_1t + X_2t + X_3t + X_4t + X_5t = 3 for each t (1..14) 
```

每个工人最多可以工作 9 天：

```
(sum over t=1..14) X_wt <= 9 for each w (1..5) 
```

最后，**目标函数**：

设`C_wt`在第 t 天雇用工人 w 的成本。双重求和：

```
Min (sum over w 1..5)(sum over t 1..14) C_wt 
```

为了适应工人几天的偏好，您可以叠加另一组成本，例如`P_wt`。

这是基本的公式。然后，您将需要一个 IP/LP 求解器（例如`CPLEX`or`Excel Solver`或 R 的`optim`库）来获得实际的解决方案。

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T13:45:04.200

这可能是一个装箱和 tsp 问题。寻找有容量的车辆路线问题。它有很多问题，但你正好有 3 个工人。在有能力的车辆路线中，有 x 个工人。它认为您需要更多信息。

# ruby-on-rails - Rails “不安全的世界可写目录 /Library/Ruby/Gems/1.8 在 PATH，模式 040777

> ID：13100522
> 
> 赞同：0
> 
> 时间：2012-10-27T13:16:19.760
> 
> 标签：ruby-on-rails

对 Rails 来说是全新的。昨天我花了几个小时把头撞在砖墙上，试图在我的 Mac 上正确安装所有东西。最后，我认为我已经成功了，所以我开始尝试完成本教程： http: [//net.tutsplus.com/tutorials/ruby/the-intro-to-rails-screencast-i-wish-i -有/](http://net.tutsplus.com/tutorials/ruby/the-intro-to-rails-screencast-i-wish-i-had/)

一切顺利，直到大约 4 分钟，当我在命令行输入给定指令并收到此错误消息时。

```
> rails g
/Library/Ruby/Gems/1.8/gems/bundler-1.2.1/lib/bundler/runtime.rb:199: warning: Insecure world writable dir /Library/Ruby/Gems/1.8 in PATH, mode 040777
gem install minitest
/Library/Ruby/Gems/1.8/gems/turn-0.9.6/lib/turn/minitest.rb:9:in `require': no such file to load -- minitest/unit (LoadError)
    from /Library/Ruby/Gems/1.8/gems/turn-0.9.6/lib/turn/minitest.rb:9
    from /Library/Ruby/Gems/1.8/gems/turn-0.9.6/lib/turn.rb:13:in `require'
    from /Library/Ruby/Gems/1.8/gems/turn-0.9.6/lib/turn.rb:13
    from /Library/Ruby/Gems/1.8/gems/bundler-1.2.1/lib/bundler/runtime.rb:68:in `require'
    from /Library/Ruby/Gems/1.8/gems/bundler-1.2.1/lib/bundler/runtime.rb:68:in `require'
    from /Library/Ruby/Gems/1.8/gems/bundler-1.2.1/lib/bundler/runtime.rb:66:in `each'
    from /Library/Ruby/Gems/1.8/gems/bundler-1.2.1/lib/bundler/runtime.rb:66:in `require'
    from /Library/Ruby/Gems/1.8/gems/bundler-1.2.1/lib/bundler/runtime.rb:55:in `each'
    from /Library/Ruby/Gems/1.8/gems/bundler-1.2.1/lib/bundler/runtime.rb:55:in `require'
    from /Library/Ruby/Gems/1.8/gems/bundler-1.2.1/lib/bundler.rb:128:in `require'
    from /Applications/MAMP/htdocs/railstest/tasks/config/application.rb:13
    from /Library/Ruby/Gems/1.8/gems/railties-3.2.8/lib/rails/commands.rb:24:in `require'
    from /Library/Ruby/Gems/1.8/gems/railties-3.2.8/lib/rails/commands.rb:24
    from script/rails:6:in `require'
    from script/rails:6 
```

我在这里看到了一些其他类似问题的帖子，这表明这与文件权限有关。即使在摆弄权限之后，我仍然无法让它工作。权限是：

```
/Library:               rwxr-xr-x
/Library/Ruby:          rwxr-xr-x 
/Library/Ruby/Gems:     rwxr-xr-x
/Library/Ruby/Gems/1.8: rwxrwxrwx 
```

尝试在 Gems/1.8 上 chmod 给我一条错误消息：“无法更改 /Library/Ruby/Gems/1.8 上的文件模式：不允许操作”

那么我需要做什么呢？

我正在运行 Mac OS 10.7.5，并且我有 XCode 4.5.1，还安装了命令行工具，如果有的话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T18:20:46.757

我不能承认自己是 Rails 专家，但严格从 UNIX 方面来看，1.8 目录是全局可写的。rwxrwxrwx 部分意味着所有者、组和其他人可以读取 (r)、写入 (w) 和执行 (x) 该目录中的任何文件。所以，我不能保证这会奏效，因为这里可能存在更根深蒂固的问题，但请尝试输入`sudo chmod og-w /Library/Ruby/Gems/1.8`. 这将剥夺“组”和“其他”用户写入目录的能力；因此，它将不再是“世界可写”的，因此权限应显示为 rwxr-xr-x。`sudo`另外，如果您在尝试之前没有输入`chmod`以前，这可能是您无法更改权限的错误，因为您正在尝试更改系统目录的权限。对不起，如果我觉得我很迂腐；我只是想确保其他可能遇到此背景可能较少的人也能理解。

如果这不起作用，还有一些其他解决方案可能适用于[这个问题](https://stackoverflow.com/questions/5360327/installed-ruby-on-rails-but-when-i-try-to-run-rails-sever-it-doesnt-load-webric)。如果没有别的，根据那里给出的答案之一，我确实建议使用 rvm，因为它会使 OS X 附带的系统副本保持完整，这也将防止系统更新造成任何可能的破坏。

最后，如果您还没有，请查看[此网站。](http://ruby.railstutorial.org/ruby-on-rails-tutorial-book)这是作者本人免费提供的[本书](https://rads.stackoverflow.com/amzn/click/com/0321832051)全文。我自己并没有超过安装阶段，但是按照这些说明，我发现它非常轻松。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T13:21:10.450

我认为该警告实际上与您遇到的问题没有任何关系。`rails`可执行文件无法识别该命令，`generator`因为正确的命令是`generate`.

您也可以键入`rails g`作为快捷方式。

# directx - WinRT 的 2D 精灵游戏：我应该使用 Direct2D BitmapSourceEffect 还是使用自定义简单着色器进行渲染？

> ID：13100524
> 
> 赞同：2
> 
> 时间：2012-10-27T13:16:35.907
> 
> 标签：directx, windows-runtime, sprite, direct2d, sharpdx

## 语境

我正在构建这个多人 D&D 遭遇工具（在 C# 中用于 WinRT），它是一个简单的基于 2D 网格的实用程序，每个玩家都可以控制他们的角色，DM 能够控制整个环境以及生物等。我决定使用 DirectX （通过[SharpDX](http://sharpdx.org/)包装器）而不是标准 XAML 元素（可能也可以处理这种情况）主要是为了学习 DirectX 并可能在较低规格的 PC 上实现更好的性能（不确定 XAML 将如何处理屏幕上的数千个精灵）。

## 问题

由于我是 DirectX 新手，我想知道**绘制精灵**（角色、道具、背景图块等）的最佳*方法是什么？

*最好的意思是性能和 GPU 内存要求。我的目标是让这个工具即使在低规格的 ARM 平板电脑上也能很好地运行，我不知道每种方法的要求有多高。

目前我正在使用 Direct2D [BitmapSourceEffect并使用](http://msdn.microsoft.com/en-us/library/windows/desktop/hh973240%28v=vs.85%29.aspx)[WIC](http://msdn.microsoft.com/en-us/library/windows/desktop/ee719655%28v=vs.85%29.aspx) API加载每个精灵批次。在这个 SO 问题中描述了我在各种 DirectX 书籍中也遇到的另一种方法：[在 DirectX 11 中渲染精灵的最佳实践是什么？](https://stackoverflow.com/questions/3884885/what-is-the-best-pratice-to-render-sprites-in-directx-11)

使用 BitmapSourceEffect 似乎更容易，但它是完成这项工作的正确工具吗？我计划在今天晚些时候比较这两种方法（在 FPS 方面，渲染大量精灵），但也许你们可以提供更多关于这个问题的见解。谢谢！

# asp.net - 会话变量和返回按钮

> ID：13100530
> 
> 赞同：0
> 
> 时间：2012-10-27T13:17:41.120
> 
> 标签：asp.net

请看下面的代码：

```
Partial Class _Default
    Inherits System.Web.UI.Page

    Protected Sub Page_Init(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Init
        Session("Test") = Request.QueryString("ID")
    End Sub

    Protected Sub Button1_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles Button1.Click
        Response.Write(Session("Test"))
    End Sub
End Class 
```

请按照以下步骤操作：

> 1) 转到 Default.aspx?id=1
> 2) 单击按钮
> 3) 转到 Default.aspx?id=2
> 4) 单击按钮
> 5) 使用后退按钮返回步骤 1
> 6) 单击按钮

是否存在步骤6之后的ID可以是2而不是1的情况？我正在尝试捕获一个错误。我不认为这可能是因为按钮启动了 ASP.NET 生命周期，并且首先执行了页面 init。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T13:30:14.160

不会。在每个页面请求（例如点击）上，页面都会触发其 Init 事件——这意味着会话变量被分配了来自 URL 字符串的值。

但是可能发生的情况（至少我认为是这样，请验证这一点！）是您的浏览器将以前的版本保存在缓存中，因此当您单击后退按钮时，它可能会显示错误的值。但是，刷新后它应该可以按预期工作。尝试使用 VS 调试您的网站以查看存储在变量中的实际值。

# string - 如何连接没有空格？

> ID：13100531
> 
> 赞同：3
> 
> 时间：2012-10-27T13:17:53.460
> 
> 标签：string, concatenation, dart, concat

Dart 为我们提供了一种不使用 + 运算符来连接字符串的新方法。

旧方法是：

```
 String foo = "foo";
    String newString = "Hello" + " foo " + "bar"; 
```

飞镖的方式是：

```
 String foo = "foo";
    String newString = "Hello $foo bar"; 
```

两者都会导致：

```
 Hello foo bar 
```

但是，如果我想在没有空格的情况下连接怎么办？

旧方法是：

```
 String foo = "foo";
    String newString = "Hello" + "foo" + "bar"; 
```

结果将是：

```
 Hellofoobar 
```

但是当我在 Dart 尝试这个时，它给了我一个明显的语法错误：

```
 String foo = "foo";
    String newString = "Hello $myString bar"; 
```

解决方案是什么？我应该使用 String.concat 吗？字符串缓冲区？我真的很喜欢这种连接字符串的新方法，但我认为我无法适应这种情况。

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-27T14:57:09.600

存在多种选择。

首先，您可以只使用多个字符串文字，而不是使用 +：

```
String str = 'foo' ' bar ' 'zap'; // any whitespace between literals 
```

其次，如果你想使用字符串插值，你可以像括号一样帮助范围：

```
String foo = 'foo';
String str = 'Hello${foo}bar'; 
```

# r - 评估公式的快速方法？

> ID：13100532
> 
> 赞同：2
> 
> 时间：2012-10-27T13:17:58.243
> 
> 标签：r, regression, linear-regression

我使用 dyn 或 dynlm 来预测使用滞后变量的时间序列。

然而，在任何一种情况下，预测函数一次只评估一个时间步，在我的计算机上每步花费 24 毫秒的恒定时间，或者我的数据集大约需要 1.8 小时，这是超长的，因为整个回归需要大约10 秒。

所以，我在想也许最快的事情可能就是手动评估公式？

那么，是否有某种方法可以评估 data.frame 或当前环境或类似环境中给定值的公式？

我正在考虑以下内容：

```
evalMagic( load ~ temperature + time, data.frame( temperature = 10, time = 4 ) ) 
```

我想，在我写这篇文章的时候，我们需要以某种方式处理系数，比如：

```
evalMagic( load ~ temperature + time, data.frame( temperature = 10, time = 4 ), model$coefficients ) 
```

....所以这提出了以下问题：

*   这不是 predict 应该做的吗？
*   为什么预测这么慢？
*   我有什么选择可以使预测更快一点？毕竟，它不是反转任何矩阵或其他东西，它只是一点算术！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T18:24:34.363

最后我编写了自己的滞后实现。它很hacky而且不漂亮，但是速度要快得多。它可以在我蹩脚的笔记本电脑上在 4 秒内处理 1000 行。

```
# lags is a data.frame, eg:
#   var  amount
#   y    1
#   y    2
addLags <- function( dataset, lags ) {
    N <- nrow(dataset)
    print(lags)
    if( nrow(lags) > 0 ) {
        print(lags)
        for( j in 1:nrow(lags) ) {
            sourcename <- as.character( lags[j,"var"] )
            k <- lags[j,"amount"]
            cat("k",k,"sourcename",sourcename,"\n")
            lagcolname <- sprintf("%s_%d",sourcename,k)
            dataset[,lagcolname] <- c(rep(0,k), dataset[1:(N-k),sourcename])
        }
    }
    dataset
}

lmLagged <- function( formula, train, lags ) {
    # get largest lag, and skip that
    N <- nrow(train)
    skip <- 0
    for( j in 1:nrow(lags) ) {
        k <- lags[j,"amount"]
        skip <- max(k,skip)
    }
    print(train)
    train <- addLags( train, lags )
    print(train)
    lm( formula, train[(skip+1):N,] )
}

# pass in training data, test data,
# it will step through one by one
# need to give dependent var name
# lags is a data.frame, eg:
#   var amount
#   y    1
#   y    2
predictLagged <- function( model, train, test, dependentvarname, lags ) {
    Ntrain <- nrow(train)
    Ntest <- nrow(test)
    test[,dependentvarname] <- NA
    testtraindata <- rbind( train, test )
    testtraindata <- addLags( testtraindata, lags )
    for( i in 1:Ntest ) {
       thistestdata <- testtraindata[Ntrain + i,]
       result <- predict(model,newdata=thistestdata)
       for( j in 1:nrow(lags) ) {
            sourcename <- lags[j,"var"]
            k <- lags[j,"amount"]
            lagcolname <- sprintf("%s_%d",sourcename,k)
            testtraindata[Ntrain + i + k,lagcolname] <- result
       }
       testtraindata[Ntrain+i,dependentvarname] <- result
    }
    return( testtraindata[(Ntrain+1):(Ntrain + Ntest),dependentvarname] )    
}

library("RUnit")

# size of training data
N <- 6
predictN <- 50

# create training data, which we can get exact fit on
set.seed(1)
x = sample( 100, N )
traindata <- numeric()
traindata[1] <- 1 + 1.1 * x[1]
traindata[2] <- 2 + 1.1 * x[2]
for( i in 3:N ) {
   traindata[i] <- 0.5 + 0.3 * traindata[i-2] - 0.8 * traindata[i-1] + 1.1 * x[i]
}
train <- data.frame(x = x, y = traindata, foo = 1)
#train$x <- NULL

# create testing data, bunch of NAs
test <- data.frame( x = sample(100,predictN), y = rep(NA,predictN), foo = 1)

# specify which lags we need to handle
# one row per lag, with name of variable we are lagging, and the distance
# we can then use these in the formula, eg y_1, and y_2
# are y lagged by 1 and 2 respectively
# It's hacky but it kind of works...
lags <- data.frame( var = c("y","y"), amount = c(1,2) ) 

# fit a model
model <- lmLagged(  y ~ x + y_1 + y_2, train, lags )
# look at the model, it's a perfect fit. Nice!
print(model)

print(system.time( test <- predictLagged( model, train, test, "y", lags ) ))
#checkEqualsNumeric( 69.10228, test[56-6], tolerance = 0.0001 )
#checkEquals( 2972.159, test$y[106-6] )
print(test)

# nice plot
plot(test, type='l') 
```

输出：

```
> source("test/test.regressionlagged.r",echo=F)

Call:
lm(formula = formula, data = train[(skip + 1):N, ])

Coefficients:
(Intercept)            x          y_1          y_2  
        0.5          1.1         -0.8          0.3  

   user  system elapsed 
  0.204   0.000   0.204 
 [1]  -19.108620  131.494916  -42.228519   80.331290  -54.433588   86.846257
 [7]  -13.807082   77.199543   12.698241   64.101270   56.428457   72.487616
[13]   -3.161555   99.575529    8.991110   44.079771   28.433517    3.077118
[19]   30.768361   12.008447    2.323751   36.343533   67.822299  -13.154779
[25]   72.070513  -11.602844  115.003429  -79.583596  164.667906 -102.309403
[31]  193.347894 -176.071136  254.361277 -225.010363  349.216673 -299.076448
[37]  400.626160 -371.223862  453.966938 -420.140709  560.802649 -542.284332
[43]  701.568260 -679.439907  839.222404 -773.509895  897.474637 -935.232679
[49] 1022.328534 -991.232631 
```

这 91 行代码大约需要 12 个小时的工作时间。好吧，我承认我玩过植物与僵尸。所以，10个小时。加上午餐和晚餐。尽管如此，还是有很多工作要做。

如果我们将 predictN 更改为 1000，我会得到大约 4.1 秒的`system.time`调用时间。

我认为它更快，因为：

*   我们不使用时间序列；我怀疑这会加快速度
*   我们不使用动态 lm 库，只使用普通 lm；我想这稍微快一点
*   我们只将单行数据传递给每个预测的预测，我认为这要快得多，例如使用 dyn$lm 或 dynmlm，如果滞后为 30，则需要将 31 行数据传递给预测 AFAIK
*   更少的 data.frame/matrix 复制，因为我们只是在每次迭代时就地更新滞后值

编辑：更正了 predictLagged 返回多列数据框而不是数字向量的小错误 Edit2：更正了无法添加多个变量的较小错误。还协调了滞后的注释和代码，并将滞后结构更改为“var”和“amount”，而不是“name”和“lags”。此外，更新了测试代码以添加第二个变量。

编辑：这个版本有很多错误，我知道，因为我已经对其进行了更多的单元测试并修复了它们，但是复制和粘贴非常耗时，所以我会在几天内更新这篇文章，一旦我的最后期限结束。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T16:15:56.417

也许你正在寻找这个：

```
fastlinpred <- function(formula, newdata, coefs) {
   X <- model.matrix( formula, data=newdata)
   X %*% coefs
}
coefs <- c(1,2,3) 
dd <- data.frame( temperature = 10, time = 4 )
fastlinpred(  ~ temperature + time, 
      dd , coefs ) 
```

这假设该公式只有一个 RHS（您可以通过执行 摆脱公式的 LHS `form[-2]`）。

这当然消除了很多开销`predict.lm`，但我不知道它是否像你想要的那样快。 `model.matrix`也有很多内部机器。

# java - 关于 Spring 事务管理重新设计的建议

> ID：13100536
> 
> 赞同：1
> 
> 时间：2012-10-27T13:18:16.950
> 
> 标签：java, spring, hibernate, jpa-2.0

我将尝试描述我要解决的问题。我意识到我开发的一个应用程序的 Spring 事务管理实现得很差。我在 DAO 接口方法 (CRUD) 上定义事务，而不是在服务层方法上使用声明性方法。它是一个 Web 应用程序，它执行某种消息处理，并且多个线程同时对同一个消息实例进行操作。以下是典型序列中的步骤：

1.  消息在 T1（事务 1）中创建并放入出站队列。T1 终止。
2.  消息由不同的线程从队列中取出，发送和更新发送时间和一些附加信息。设置消息对象的属性并调用 dao.update(m)，t2 开始。
3.  在 t2 提交之前，接收到传递报告并且 Tread3 开始处理相同的消息对象，方法是在 db 中找到它（保存在步骤 1 中），更新它的 state 属性并调用 dao.upate(m) 以便 t3 在 t2 仍在进行中时启动。
4.  另一个线程（线程 4）通过在 t4 中再次更改它的状态来进一步处理相同的消息对象。

不时发生的结果是，从 t2 开始的更改丢失，db 中的发送时间为空。我需要帮助来弄清楚如何改进应用程序设计并通过防止并发处理同一消息来消除此问题。

1.  我应该专注于事务重新设计（在服务级别而不是 dao 上使用它）并使用可序列化的隔离级别（或其他）还是

2.  我应该使用 JPA 实体管理器锁定吗？

应用程序使用带有休眠实现的 spring 3 和 JPA2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T15:22:21.963

是的，我会将事务转移到服务级别，但我会重新考虑整个设计，看看您是否可以将整个过程放到一个线程中。如果我没记错的话，Spring 的事务管理是基于线程的——我怀疑您是否能够拥有跨线程的事务。

另外，如果可能的话，尽量简化一些事情，这样你就只访问数据库一次。如果您确实需要四个单独的更新，请在同一线程的同一事务中按顺序运行它们。否则，您将无法愉快地尝试使交易生效。

显式锁定也要求一个伤害世界——你很可能会遇到死锁。

编辑：回应OP的评论：

我建议找到一种方法将 T3 更新与 T2 更新分开，并在进行 T3 更新之前让 T2 事务提交。

也许将传递报告放在消息队列中。然后想出一个策略，在 T3 中找到该项目，如果存在则进行更新，如果不存在则稍后再试。

如果您知道在收到交货报告和 T2 事务结束之间有最短或平均时间量，也许您可​​以将该延迟量构建到处理交货收据以创建 T3 更新。

# visual-studio-2010 - 有没有开发 VB.NET 应用程序的免费工具？

> ID：13100540
> 
> 赞同：0
> 
> 时间：2012-10-27T13:18:35.813
> 
> 标签：visual-studio-2010

有没有开发 VB.NET 应用程序的免费工具？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T13:22:18.230

Microsoft 工具有免费的快速版本：http: [//www.microsoft.com/visualstudio/eng/products/visual-studio-express-products](http://www.microsoft.com/visualstudio/eng/products/visual-studio-express-products)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T13:27:25.033

如果您不愿意购买 microsoft 产品，那么这里有一款非常棒的产品，它是开源的，而且体积更小：

它被称为Sharp Develop：

[http://www.icsharpcode.net/opensource/sd/](http://www.icsharpcode.net/opensource/sd/) [下载和信息链接]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-20T03:52:26.073

Microsoft Visual Studio Community (Visual Studio Express) 是一个免费且功能齐全的 IDE，用于使用包括 C#、C++、HTML/JavaScript 和 Visual Basic 在内的编程语言为 Web、Windows 应用商店、Windows 桌面甚至 Android 和 iOS 构建应用程序。

[https://www.visualstudio.com/en-us/products/visual-studio-express-vs.aspx](https://www.visualstudio.com/en-us/products/visual-studio-express-vs.aspx)

但它仅被许可用于学术/研究类项目。见条款：

[https://www.visualstudio.com/support/legal/dn877550](https://www.visualstudio.com/support/legal/dn877550)

CodePlex 提供了一个很好的免费 IDE，称为 SharpDevelop。 [https://sharpdevelop.codeplex.com/releases/view/111370](https://sharpdevelop.codeplex.com/releases/view/111370)

但是您仍然需要确保项目中使用的控件已获得许可。

# java - 从另一个类中构造的对象创建一个类中的数组列表

> ID：13100541
> 
> 赞同：0
> 
> 时间：2012-10-27T13:18:34.813
> 
> 标签：java, object, arraylist

**我有 3 节课：-**

> **Tell** - 主程序
> **Item** - 单独的电话簿项目
> **Directory** - 存储所有项目的目录对象。

* * *

我正在尝试做的是在目录中创建一个数组列表，该列表存储来自项目类的对象，这就是我正在做的事情。

*从 Tell 开始，*我将方法调用为：-

```
Directory.add(name, telNo); 
```

*目录类：-*

```
public class Directory
{
    ArrayList<Entry> entries = new ArrayList<Entry>();
    // Add an entry to theDirectory
    public static void add(String name, String telNo)      
    {
         entries.add(new Entry(name, telNo));
    }
} 
```

*入学等级：-*

```
public class Entry
{
    String name;
    String telNo;
    public TelEntry(String aName, String aTelNo )
    {
        setNumber(aTelNo);
        setName(aName);
    }

    private void setNumber(String aTelNo)
    {
        telNo = aTelNo;
    }
    private void setName(String aName)
    {
        name = aName;
    }

} 
```

但是我的程序没有编译，它显示这个错误： -

```
"non-static variable entries cannot be referenced from a static context" 
```

谁能解释我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T13:19:56.483

您需要在类中将*ArrayList*`Directory`声明为静态，因为您是从*静态上下文*（您的*`add`*方法）中使用它的。而且您也可以制作它`private`，因为您的字段应该是私有的，并提供`public`访问它的访问器方法。

```
private static ArrayList<Entry> entries = new ArrayList<Entry>(); 
```

您只能从静态上下文访问静态变量。因为，非静态变量需要使用您的类的实例，并且在静态上下文中没有可用的实例，因此您不能使用它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T13:20:08.653

声明`entries` `static`。您只能访问静态上下文中的静态变量。

```
static ArrayList<Entry> entries = new ArrayList<Entry>(); 
```

# php - jquery 将数据发布到 php 脚本并立即显示在同一个 php 脚本文件中

> ID：13100554
> 
> 赞同：0
> 
> 时间：2012-10-27T13:21:04.760
> 
> 标签：php, jquery, ajax

如何使用 ajax 将数据发布到 php 脚本 (showitemid.php) 并在超链接单击的厚框中立即打开相同的脚本 (showitemid.php) 并显示发布的数据。下面是我的代码：

**postitemid.php**

该文件由多个复选框组成。用户将勾选复选框并单击超链接。单击超链接后，所有选中的复选框值都将发布到 showitemid.php，然后 showitemid.php 将立即在厚框中打开并显示接收到的值。但它在我的代码中没有收到任何值？需要帮忙。

```
$('#showitem).click(function()
{
    var data = $('input:checkbox:checked').map(function()   {
        return this.value;
    }).get();

    $.ajax({type: 'POST', 

             url: 'showitemid.php',
             data: data,success: success,dataType: dataType});
        }); 
```

**showitemid.php**

```
$data = ''; 

if (isset($_POST['data']))
{
    $data = $_POST['data'];
}
elseif (isset($_GET['data']))
{
    $data = $_GET['data'];
}

echo 'd='.$data; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T13:23:25.580

使用这样的东西

```
 $('#showthickbox').click(function()
{
    var data = $('input:checkbox:checked').map(function()   {
        return this.value;
    }).get();//your code

    $.post("showitemid.php",{data:data},function(data){
       $("#thickbox").html(data);
      }) 
    })
}) 
```

在你的`showitemid.php`

```
echo "your data"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T13:34:09.357

原始代码的主要问题是发送的数据没有`data`匹配的键名，`$_POST['data'])`所以`$_POST['data'])`是空的。您必须发送键/值对，您只发送一个没有键的值。你可能会有点困惑，因为你经常使用相同的变量名

```
var dataArray = $('input:checkbox:checked').map(function()   {
        return this.value;
    }).get();

var dataToServer= { data : dataArray} /* now have the key to match $_REQUEST in php */ 
```

现在可以使用 AJAX 速记方法`load()`来填充内容

```
$('#myContainer').load( "yourfile.php", dataToServer, function(){
/* new html exists run open thickbox code here*/
}) 
```

# php - mysql_connect 错误

> ID：13100557
> 
> 赞同：5
> 
> 时间：2012-10-27T13:21:15.270
> 
> 标签：php

在下面的代码中，我看到了`echo1`声明，之后我在 UI 上看不到任何打印内容。用户名和密码是正确的。但是 PHP 似乎没有连接到 MySQL。甚至没有看到模具声明我做错了什么。遇到之后`mysql_connect`，其余代码不起作用：

```
<?php    
echo "echo1==========";
$con = mysql_connect("localhost","root", "xxxx123") or die("Error connecting to database");
echo "+++++++++ echo2";
echo $con;
mysql_close($con);
  ?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-27T13:24:29.717

你应该错过了一个错误。添加 ：

```
ini_set('display_errors', 1);
error_reporting(E_ALL); 
```

在脚本的开头

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T13:33:24.423

没有输出意味着致命错误。唯一可能的致命错误是“未定义的函数`mysql_connect`（除非某处真的搞砸了）。这意味着该`mysql`库未安装，或者它可能只是未在`php.ini`文件中启用。

检查所述文件，然后在打开时打开`error_reporting`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T13:28:44.813

如果你像这样使用你的代码，那么它很容易受到 SQL 注入的攻击。我强烈建议您在将数据插入数据库时​​使用[mysql_real_escape_string](http://www.php.net/manual/en/function.mysql-real-escape-string.php)以防止[SQL 注入](https://stackoverflow.com/questions/11939226/sql-injections-and-adodb-library-general-php-website-security-with-examples/11941396)，作为一种快速解决方案或更好地使用[PDO](http://php.net/manual/en/book.pdo.php)或[MySQLi](http://php.net/manual/en/book.mysqli.php)。

如果您要使用，`mysql_*`那么我建议您阅读有关`mysql_*`函数的 PHP 手册章节，他们指出，不建议使用此扩展来编写新代码。相反，他们说，您应该使用[MySQLi](http://www.php.net/manual/en/book.mysqli.php)或[PDO_MySQL](http://www.php.net/manual/en/ref.pdo-mysql.php)扩展。

我还检查`mysql_connect`并发现了一个奇怪的规律，那就是 - 如果你`"`在`mysql_connect`参数上使用，那么它无法连接，在我的情况下，当我测试它时，它发生的只是描述的方式，所以，请试试这个：

`$con = mysql_connect('localhost','username','password');`

替换`"`为[PHP 手册](http://php.net/manual/en/function.mysql-connect.php)`'`示例中显示的那样，它可能会起作用！

**已编辑**

对于那些不赞成投票的人-先*尝试*！我在我的服务器上测试了它`"`，它给了我一个错误：**`Warning: mysql_connect(): Access denied for user`**. 我使用 PHP 5.4.6 版！

使用 SSH 登录到您的服务器并运行`php --modules`- 如果您没有`mysql`在列表中看到 - 那么这就是您的致命错误的原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-27T17:17:11.743

问题是 ph5-mysql 驱动程序没有安装。安装它并让它工作..现在 mysql_connect() 函数工作..感谢所有帮助

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-08T12:14:54.717

对于 Tomcat 7，php.ini 的默认目录实际上是 C:\windows。因此修改（启用模块、扩展等）php.ini 应复制到 C:\windows。然后运行 ​​phpinfo();。即使在 PHP 5.x 旁边的 Tomcat 7 上，它也应该可以正常工作。当我希望 mysql 语句正常工作时，我遇到了这个问题并且挣扎了很多。

即使按照 [779246] 中答案的所有说明（[使用 tomcat 运行 php 应用程序？](https://stackoverflow.com/questions/779246/run-a-php-app-using-tomcat)），mysql 语句也不起作用（Windows 7 上的 Tomcat 7、PHP 5.2.16、PECL 5.2.5、MySql 5.6）。所以我开始研究“phpinfo();” 如前一段所述，仔细输出并使用解决方案。如果您想使用 PDO（这是 PHP 中普通 mysql_* 方法的未来），请务必在 php.ini 中启用 mysql dll 扩展和 PDO 扩展。

# ios - 如何在 ios6 模拟器中显示虚拟键盘

> ID：13100558
> 
> 赞同：1
> 
> 时间：2012-10-27T13:21:24.100
> 
> 标签：ios

如何在 ios6 Simulator（iphone 或 iPad）中显示虚拟键盘？我试过切换键盘选项，但什么都没有出现，你只能用代码让它出现吗？如果是这样，如何？

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T13:40:05.567

没有“目标”就无法显示键盘。系统需要知道它应该将输入的文本发送到哪里。

因此，如果您有一个接受文本输入的 UIView 子类（例如 UITextField），则当用户点击该视图时会显示键盘，或者您可以通过调用以编程方式触发它：

```
[textField becomeFirstResponder]; 
```

来自[iOS 文档管理键盘](http://developer.apple.com/library/ios/#documentation/StringsTextFonts/Conceptual/TextAndWebiPhoneOS/KeyboardManagement/KeyboardManagement.html)：

> 显示键盘
> 
> 当用户点击一个视图时，系统会自动将该视图指定为第一响应者。当包含可编辑文本的视图发生这种情况时，视图会启动该文本的编辑会话。在编辑会话开始时，视图会要求系统显示键盘（如果键盘尚不可见）。如果键盘已经可见，则第一响应者的更改会导致从键盘输入的文本重定向到新点击的视图。
> 
> 因为当视图成为第一响应者时键盘会自动显示，所以您通常不需要做任何事情来显示它。但是，您可以通过调用该视图的 becomeFirstResponder 方法以编程方式显示可编辑文本视图的键盘。调用此方法使目标视图成为第一响应者并开始编辑过程，就像用户点击了视图一样。
> 
> 如果您的应用程序在单个屏幕上管理多个基于文本的视图，最好跟踪当前哪个视图是第一响应者，以便您稍后可以关闭键盘。

# java - W3i 报价墙 SDK

> ID：13100560
> 
> 赞同：0
> 
> 时间：2012-10-27T13:21:49.543
> 
> 标签：java, android

我有一个问题，我正在尝试将 w3i 报价墙添加到我的应用程序中，以实现获利...这是 sdk 指南：[https](https://associate.w3i.com/integration/index.html) : //associate.w3i.com/integration/index.html 我已经轻松添加了报价墙，但现在我必须在一个变量中计算用户所获得的收入......指南告诉：

兑换货币 货币兑换应在应用程序打开时进行，每次启动时。如果您正在显示优惠警报对话框，我们建议您先调用redeemCurrency()，然后立即使用showFeaturedOffer()。这为用户创建了一个逻辑流程，该用户在收到优惠警报提示之前从他们完成的最后一次优惠中获得货币奖励。处理兑换货币的方法是redeemCurrency()，它具有以下签名：

```
public void redeemCurrency(final Activity context, W3iCurrencyListener listener ) 
```

此方法需要当前的 Activity 上下文，而不是 Application 上下文，因为它会在兑换货币时向用户显示消息对话框。此外，您需要提供 W3iCurrencyListener 接口的实现。接下来，您的应用程序需要提供 W3iCurrencyListener 接口的实现。W3iCurrencyListener 接口用于通知游戏货币被退回。余额作为 List 集合返回。示例实现如下：

```
W3iCurrencyListener callback = new W3iCurrencyListener() {
              @Override
              onRedeem(List<Balance> balances) {

                     //Take possession of the balances returned here.             

              }
}; 
```

如果您的应用程序支持多种货币，则 Balance 对象的集合可能用于不同的货币类型。如果对兑换货币（）的调用成功，您将收到一组余额。如果没有，onRedeem() 回调将不会触发。除非用户通过下载和安装应用程序或完成非应用程序优惠的其他操作来转换优惠，否则此方法不会返回货币。

现在我不知道如何使用此代码，如何将返回设置为变量？现在我希望他们的办公室关门了，所以我问你... Thakns，matteo

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T10:33:26.030

我也遇到了类似的问题。我实现了他们的 com.w3i.offerwall.W3iCurrencyListener 并用它来调用redeemCurrency()。

我在启动器活动中调用兑换货币（）。我的 W3IListener 覆盖 onRedeem() 方法。希望下面的代码片段能消除您的疑虑。

```
 public class MyGame extends Acitvity{
     private W3iCurrencyListener w3iListener = new W3iListener(this);
     public static int coins = 0;
     @Override
     protected void onResume(){
         try{
             w3iInstance.redeemCurrency(this, w3iListener);
         }
         catch (Exception e){
            e.printStackTrace();
         }
     }
 }

public class W3iListener implements com.w3i.offerwall.W3iCurrencyListener{

    private Context mContext = null;

    public W3iListener(Context context){
        mContext = context;
    }   

    @Override
    public void onRedeem(List<Balance> paramList) {
            if(paramList.size()>0)
            {
                int coins = 0;
                for(int i=0; i<paramList.size(); i++){
                    coins += Integer.parseInt(paramList.get(i).getAmount());
                }
                MyGame.coins = coins + MyGame.coins;
            }
    }
} 
```

# c - 基数 4 到基数 2 转换器

> ID：13100561
> 
> 赞同：0
> 
> 时间：2012-10-27T13:21:50.710
> 
> 标签：c, output, memmove

该程序是将基数为 4 的数转换为基数为 2 的数，它应该在原地完成

```
#include<stdio.h>
#include<string.h>

void shiftr(char num[],int i)
{
     memmove(num+i,num+i+1,strlen(num)-i);
}

char* convert4to2(char num[])
{
int i=0,len;
char ch;

    while(num[i]!='\0')
    {
        ch=num[i];
        shiftr(num,i);
        switch(ch)
        {
            case '0':num[i++]='0';
                 num[i++]='0';
                 break;

            case '1':num[i++]='0';
                 num[i++]='1';
                 break;

            case '2':num[i++]='1';
                 num[i++]='0';
                 break;

            case '3':num[i++]='1';
                 num[i++]='1';
                 break;

            default:printf("Error");
        }
    }

    num[i]='\0';
    return(num);
}

void main()
{
    char num[20];
    printf("Enter the Base 4 Number:");
    scanf("%s",&num);
    printf("The Binary Equivalent is:%s\n",convert4to2(num));   
} 
```

输入 121（以 4 为基数）的输出应该是 011001，但它只显示 01。对于像 12101 这样的较大数字，它显示 0100，取第一个和最后一个数字。可能是什么问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T13:45:42.160

您可以将字符串放入函数中，而不是使用字符直接从 base 4 转换为 base 2，该[`strtol`](http://en.cppreference.com/w/c/string/byte/strtol)函数将任意基数的整数字符串转换为`long`. 从那里很容易打印出二进制表示。

**编辑：**示例：

```
char* convert4to2(const char input[], char *output, const size_t output_length)
{
    /* First make sure the output string is long enough */
    if (output_length < (sizeof(long) * 8 + 1))  /* +1 for '\0' */
        return NULL;  /* Not enouth space */

    /* Convert from the input string to a `long` */
    long value = strtol(input, NULL, 4);  /* The last `4` is the base of the input string */

    /* Convert the number to binary */
    char *output_ptr = output;

    /* Multiply with 8 to get the number of bits */
    /* Subtract 1 because bits a numbered from zero */
    for (int bit = sizeof(long) * 8 - 1; bit >= 0; bit--)
    {
        /* `value >> bit` make the current bit the lowest bit */
        /* `& 1` to mask out all but the lowest bit */
        /* `+ '0'` to make it a proper character digit */
        *output_ptr++ = ((value >> bit) & 1) + '0';
    }

    /* Terminate the string */
    *output_ptr = '\0';

    /* Return the converted string */
    return output;
} 
```

像这样称呼它：

```
const char num[] = "121";
char output[65];  /* `long` can be 64 bits, plus one for the string terminator */

printf("%s in base 4 is %s in base 2\n",
    num, convert4to2(num, output, sizeof(output))); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T13:28:21.333

您正在积极破坏您的输入。例如，对于第一次迭代，您将数字移动一个位置，然后用您的二进制输出覆盖第 0 位和第 1 位的数据（其中包含 4 基数中的下 2 位）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T14:10:41.907

无需向上移动，只需向后工作：

```
#include <stdio.h>
#include <string.h>

void convert4to2(char *str)
{
size_t idx;
char ch;
static char *conv[4] = {"00", "01","10", "11" };

idx = strlen(str);
str[idx*2] = 0;

while(idx--) {
    ch=str[idx];
    if (ch < '0' || ch > '3') return; /* replace by relevant error handler */
    memcpy(str+2*idx, conv[ ch - '0' ], 2 );
    }

return;
}

int main(void)
{
char quad[21] = "0123321023" ;

printf("Old:%s\n", quad);
convert4to2(quad);
printf("New:%s\n", quad);

return 0;
} 
```

# excel - 防止发生验证错误的双重实例

> ID：13100563
> 
> 赞同：0
> 
> 时间：2012-10-27T13:22:26.390
> 
> 标签：excel, vba

我在一次验证三个下拉菜单时遇到问题。以下是测试用例：

```
cbo_fac1 - user must select this as a pre-requisite for cbo_fac1 and cbo_fac2
cbo_fac2 - user must select cbo_fac1 as a pre-requisite
cbo_fac3 - user must select cbo_fac1 and cbo_fac2 as a pre-requisite 
```

这是我到目前为止使用的代码。不幸的是，在某些情况下，即如果用户首先尝试选择**cbo_fac3**，它似乎会循环一些错误。有什么方法可以合并这些函数并让它在每种情况下只显示一次错误？

```
 Private Sub cbo_fac2_Enter()

    If Len(cbo_fac1.Value) = 0 Then
        MsgBox ("Please select a first preference before selecting a second preference")
        cbo_fac1.SetFocus
        Exit Sub
    End If

End Sub

Private Sub cbo_fac3_Enter()

    If Len(cbo_fac2.Value) = 0 & Len(cbo_fac3.Value) = 0 Then
        MsgBox ("Please select a first preference before selecting a second/third preference")
        cbo_fac1.SetFocus
        Exit Sub
    End If

    If Len(cbo_fac2.Value) = 0 Then
        MsgBox ("Please select a second preference before selecting a third preference")
        cbo_fac2.SetFocus
        Exit Sub
    End If

End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T14:50:44.400

这从另一端解决了问题，根据是否填写了先前的组合框来启用或禁用组合框。在第三个组合框的情况下，级联事件是您的朋友，因为清除第一个组合框会触发第二个组合框的更改，这清除了第三个。将此代码添加到您的用户表单：

```
Private Sub cbo_fac1_Change()
With cbo_fac2
.Enabled = Len(cbo_fac1.Value) > 0
If Not .Enabled Then
    .ListIndex = -1
End If
End With
End Sub

Private Sub cbo_fac2_Change()
With cbo_fac3
    .Enabled = Len(cbo_fac2.Value) > 0
    If Not .Enabled Then
        .ListIndex = -1
    End If
End With
End Sub 
```

请注意，如果您最终得到更长的系列，您将需要查看 WithEvents 控件类。

此外，尽可能避免在用户输入控件时出现错误消息框。尝试用视觉提示引导他们 - 在这种情况下禁用，空控件 - 或者等到他们点击 OK 然后告诉他们他们需要更改什么。

如果其他人想试试这个，用 3 个组合框创建一个表单，然后将此初始化代码添加到您的表单中：

```
Private Sub UserForm_Initialize()
Dim i As Long

With Me
    With .cbo_fac1
        For i = 1 To 10
            .AddItem .Name & i
        Next i
    End With
    With .cbo_fac2
        For i = 1 To 10
            .AddItem .Name & i
        Next i
        .Enabled = False
    End With
    With .cbo_fac3
        For i = 1 To 10
            .AddItem .Name & i
        Next i
        .Enabled = False
    End With
End With
End Sub 
```

# javascript - javascript 帮助日期/显示

> ID：13100564
> 
> 赞同：0
> 
> 时间：2012-10-27T13:22:30.637
> 
> 标签：javascript, date, if-statement

我正在尝试建立一个出现日历，其中的框只在某个日期出现。但我只是不会工作..

```
<html>
<head>
<script type="text/javascript">
var currentTime = new Date()
var month = currentTime.getMonth() + 1
var day = currentTime.getDate()

if(month == 10)
{
    document.write (month);
    document.getElementById("Ueberschrift").style.display = 'block';}
else {
    document.getElementById("Ueberschrift").style.display = 'none';}
</script>
</head>
<body>
<h1 id="Ueberschrift" style="display:none">Day 1</h1>
</body></html> 
```

我不知道该怎么办......也许你们可以帮助我

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T13:26:30.070

将脚本移到下面：（脚本正在运行`before`它可以找到任何`H1`）

```
<html>
<head>

</head>
<body>
<h1 id="Ueberschrift" style="display:none">Day 1</h1>
</body>

<script type="text/javascript">
var currentTime = new Date()
var month = currentTime.getMonth() + 1
var day = currentTime.getDate()

if(month == 10)
{
    document.write (month);
    document.getElementById("Ueberschrift").style.display = 'block';}
else {
    document.getElementById("Ueberschrift").style.display = 'none';}
</script>
</html> 
```

[http://jsbin.com/olijiv/2/edit](http://jsbin.com/olijiv/2/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T13:47:08.063

您可以将脚本留在 head 部分，但在页面加载后触发它：

```
<html>
<head>
<script type="text/javascript">
window.onload = function()
{
    var currentTime = new Date()
    var month = currentTime.getMonth() + 1
    var day = currentTime.getDate()

    if(month == 10)
    {
        // document.write (month);
        document.getElementById("Ueberschrift").style.display = 'block';
    }
    else
    {
        document.getElementById("Ueberschrift").style.display = 'none';
    }
}
</script>
</head>
<body>
<h1 id="Ueberschrift" style="display:none">Day 1</h1>
</body></html> 
```

此外，该`document.write (month)`语句替换了整个正文内容，因此下一条语句失败，因为页面中不再有“Ueberschrift”元素。远离`document.write`（使用测试元素和`innerHTML`or`innerText`属性）。

# android - 覆盖 OrientationEventListener 时不返回

> ID：13100568
> 
> 赞同：1
> 
> 时间：2012-10-27T13:22:51.637
> 
> 标签：android, listener, sensormanager

这是有问题的代码：

```
 m_myOrientationEventListener
    = new OrientationEventListener(getApplicationContext(),SensorManager.SENSOR_DELAY_NORMAL){
        @Override
         public void onOrientationChanged(int arg0) {
             // TODO Auto-generated method stub
             Toast.makeText(getApplicationContext(), "Orientation changed !", Toast.LENGTH_SHORT).show();
         }
    }; 
```

在我添加此代码之前一切正常，添加后，我在模拟器上看到一个“空白”布局

正如我从调试中看到的那样，函数（OrientationEventListener）被调用了两次......

有任何想法吗 ？

谢谢

# ruby-on-rails - 有没有更简单的方法来使用 ActiveAdmin 创建/选择相关数据？

> ID：13100569
> 
> 赞同：10
> 
> 时间：2012-10-27T13:23:14.223
> 
> 标签：ruby-on-rails, activeadmin

想象一下，我有以下模型：

```
class Translation < ActiveRecord::Base
  has_many :localizations
end

class Localization < ActiveRecord::Base
  belongs_to :translation
end 
```

如果我在 ActiveAdmin 中这样做：

```
ActiveAdmin.register Localization do
  form do |f|
    f.input :word
    f.input :content
  end 
end 
```

单词的关联只允许我从现有单词中进行选择。但是，我希望可以选择动态创建一个新单词。我认为在本地化模型中接受嵌套属性可能很有用（但是，我只能选择创建一个 Word，而不是从现有的中选择）。我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-15T01:14:38.687

我认为您可以尝试为此使用虚拟属性

示例（未测试）

```
class Localization < ActiveRecord::Base
  attr_accessor :new_word #virtual attribute 
  attr_accessible :word_id, :content, :new_word
  belongs_to :translation
  before_save do
     unless @new_word.blank?
       self.word = Word.create({:name =>  @new_word})
     end
  end
end 
```

主要思想是在保存本地化之前创建和存储新的 Word 实例并使用它而不是下拉菜单中的 word_id。

```
ActiveAdmin.register Localization do
  form do |f|
    f.input :word
    f.input :content
    f.input :new_word,  :as => :string

  end 
end 
```

关于虚拟属性有很棒的 rails-cast [http://railscasts.com/episodes/167-more-on-virtual-attributes](http://railscasts.com/episodes/167-more-on-virtual-attributes)

# opencv - 如何在opencv中使用矩阵R和T（外部参数矩阵）转换图像？

> ID：13100573
> 
> 赞同：4
> 
> 时间：2012-10-27T13:23:39.980
> 
> 标签：opencv, camera-calibration, projective-geometry

我有一个旋转平移矩阵 [RT] (3x4)。

opencv 中是否有执行 [RT] 描述的旋转平移的函数？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-28T03:23:09.853

我认为这个问题的很多解决方案都做出了隐藏的假设。我将尝试快速总结一下我对这个问题的看法（过去我不得不考虑很多）。两个图像之间的变形是一个二维过程，由称为单应性的 3x3 矩阵完成。你所拥有的是一个 3x4 矩阵，它定义了一个 3 维的变换。您可以通过将图像视为 3 维空间中的平面来在两者之间进行转换。然后，诀窍是确定图像平面在世界空间中的初始位置。然后，您可以使用相机内在矩阵变换其位置并将其投影到新的图像平面上。

第一步是确定您的初始图像在世界空间中的位置，注意这不必与您的初始 R 和 T 矩阵指定的相同。那些在世界坐标中，我们说的是那个世界创建的图像，图像中的所有对象都被压平成一个平面。这里最简单的决定是将图像设置在 z 轴上的固定位移并且不旋转。从这一点开始，我将假设没有轮换。如果您想查看一般情况，我可以提供它，但它稍微复杂一些。

接下来，您在 3d 空间中定义两个图像之间的变换。由于您有两个关于同一原点的变换，因此从 [A] 到 [B] 的变换与从 [A] 到原点的变换相同，然后是从原点到 [B] 的变换。你可以通过

```
transform = [B]*inverse([A]) 
```

现在从概念上讲，您需要做的是拍摄您的第一张图像，将其像素投影到 3d 空间中图像的几何解释上，然后通过上面的变换在 3d 空间中转换这些像素，然后将它们投影回新的 2d 图像上你的相机矩阵。这些步骤需要组合成一个 3x3 矩阵。

```
cv::Matx33f convert_3x4_to_3x3(cv::Matx34f pose, cv::Matx33f camera_mat, float zpos)
{   
//converted condenses the 3x4 matrix which transforms a point in world space 
//to a 3x3 matrix which transforms a point in world space.  Instead of 
//multiplying pose by a 4x1 3d homogeneous vector, by specifying that the
//incoming 3d vectors will ALWAYS have a z coordinate of zpos, one can instead 
//multiply converted by a homogeneous 2d vector and get the same output for x and y.

cv::Matx33f converted(pose(0,0),pose(0,1),pose(0,2)*zpos+pose(0,3),
                      pose(1,0),pose(1,1),pose(1,2)*zpos+pose(1,3),
                      pose(2,0),pose(2,1),pose(2,2)*zpos+pose(2,3));

//This matrix will take a homogeneous 2d coordinate and "projects" it onto a 
//flat plane at zpos.  The x and y components of the incoming homogeneous 2d 
//coordinate will be correct, the z component is dropped.  
cv::Matx33f projected(1,0,0,
                      0,1,0,
                      0,0,zpos);
projected = projected*camera_mat.inv();

//now we have the pieces.  A matrix which can take an incoming 2d point, and 
//convert it into a pseudo 3d point (x and y correspond to 3d, z is unused) 
//and a matrix which can take our pseudo 3d point and transform it correctly.  
//Now we just need to turn our transformed pseudo 3d point back into a 2d point 
//in our new image, to do that simply multiply by the camera matrix.

return camera_mat*converted*projected;
} 
```

这可能是一个比您正在寻找的更复杂的答案，但我希望它能让您了解您在问什么。这可能非常令人困惑，我很快就对它的某些部分进行了研究，请随时要求澄清。如果您需要解决方案在不假设初始图像没有旋转出现的情况下工作，请告诉我，我只是不想让它变得比需要的更复杂。

# php - 在没有 arsort 的情况下正确排序数组

> ID：13100577
> 
> 赞同：1
> 
> 时间：2012-10-27T13:24:22.850
> 
> 标签：php, arrays, sorting

我需要对具有这种形式的数组进行排序：

```
Array
(
    [18] => 9
    [14] => 4
    [53] => 9
    [10749] => 4
    [28] => 9
    [12] => 6
    [878] => 7
    [35] => 8
    [10769] => 1
    [9648] => 1
    [10751] => 1
    [27] => 1
    [80] => 3
) 
```

该`arsort`功能给了我：

```
Array
(
    [53] => 9
    [28] => 9
    [18] => 9
    [35] => 8
    [878] => 7
    [12] => 6
    [14] => 4
    [10749] => 4
    [80] => 3
    [27] => 1
    [10769] => 1
    [9648] => 1
    [10751] => 1
) 
```

这很好，但问题是当值相同时，我想让它们按它们排序`keys`，这可能吗？所以我会得到：

```
Array
(
    [18] => 9
    [28] => 9
    [53] => 9
    [35] => 8
    [878] => 7
    [12] => 6
    [14] => 4
    [10749] => 4
    [80] => 3
    [27] => 1
    [9648] => 1
    [10751] => 1
    [10769] => 1
) 
```

谁能告诉我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T13:52:26.920

这是一个使用 php 函数而不是非常慢的冒泡排序的解决方案

```

$arr = array(
    '18'    => 9,
    '14'    => 4,
    '53'    => 9,
    '10749' => 4,
    '28'    => 9,
    '12'    => 6,
    '878'   => 7,
    '35'    => 8,
    '10769' => 1,
    '9648'  => 1,
    '10751' => 1,
    '27'    => 1,
    '80'    => 3
    );

print_r($arr);

arsort( $arr );
print_r($arr);

$last = null;
$tmp = array();
$result = array();
foreach( $arr as $k => $v ) {
    if ( $last && $v != $last ) {
        krsort($tmp);

        foreach ( $tmp as $kt => $vt ) {
            $result[ $kt ] = $vt;
        }

        $tmp = array();
    }
    $tmp[$k] = $v;

    $last = $v;
}

krsort($tmp);

foreach ( $tmp as $kt => $vt ) {
    $result[ $kt ] = $vt;
}

print_r($result); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T13:27:02.180

你的意思是你不想使用

```
rsort( ) – Sorts a Scalar array in reverse order
arsort( ) - Sorts the Values in an Associative array in reverse order
krsort( ) - Sorts the Keys in an Associative array in reverse order 
```

你可以试试冒泡排序

```
function bubble_sort($arr) {
    $size = count($arr);
    for ($i=0; $i<$size; $i++) {
        for ($j=0; $j<$size-1-$i; $j++) {
            if ($arr[$j+1] > $arr[$j]) {
                swap($arr, $j, $j+1);
            }
        }
    }
    return $arr;
}

function swap(&$arr, $a, $b) {
    $tmp = $arr[$a];
    $arr[$a] = $arr[$b];
    $arr[$b] = $tmp;
}

 /* test bubble sort */

$arr = array(1,3,2,8,5,7,4,0);

print("Before sorting");
print_r($arr);

print("After sorting");
print_r(bubble_sort($arr));

  ?> 
```

# asp.net - ASMX 技术完全过时了吗

> ID：13100580
> 
> 赞同：2
> 
> 时间：2012-10-27T13:24:35.347
> 
> 标签：asp.net, web-services, asmx, asp.net-4.0, asp.net-3.5

不久前，大约 2 年前，我正在研究使用 .NET 2.0 开发的 Web 门户。并且有很多 asmx 页面。

前几天，我的一位更擅长 ASP .NET 的同事说：“ASMX 又旧又丑，我们应该重写它”。所以我们做到了，据我所知，我们转移到了 ashx 处理程序。

但是现在，当我准备通过 70-515 时，我遇到了一些仍然建议学习 asmx 服务的材料（关于 AJAX）。那么这种方法在新的 ASP .NET 3.5/4.0 Web 项目中仍然有效吗？如果是这样，那么我应该何时何地使用它？

或者也许是 2 年前，我太无知了，我们使用了某种旧版本的 asmx，然后我们转向了新的 asmx。

PS 当我输入标签“asmx”时，我看到一条消息：“asmx 已过时”：[https ://stackoverflow.com/tags/asmx/info](https://stackoverflow.com/tags/asmx/info)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T13:33:22.130

如果您可以使用 WCF，那么是的，ASMX 服务已经过时，因为 WCF 可以用更高的性能和灵活性（多绑定）功能完全取代它们。如果您可以编写 WCF 服务，那么如果由于某种原因您将被要求创建 ASMX 服务，那么您将不会有任何问题。

从 ASMX 迁移到 ASHX 并不是明智之举，因为它们不是为了相互替换。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-12T13:39:32.280

奇怪的是，我们从 ASMX 转移到了 WCF，然后又回到了 ASMX。WCF 有很多缺点，最重要的是跨平台兼容性问题。如果使用您的服务的每个人都在 .NET 上，这不是问题，但并非所有其他框架都支持完整的堆栈，而且它们通常无法执行 WCF 生成的操作。我们还发现，在 WCF 中处理安全和测试是一件很痛苦的事情。如果您的 Web 服务被标记为安全，它必须在 WCF 中是安全的，即使在您的测试环境中也是如此，这意味着为每个开发人员获取实际的 SSL 证书。可以肯定的是巨大的痛苦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T13:48:51.980

ASMX 和 WCF 是在 .NET 中构建 Web 服务的技术。WCF 是在 .NET 3.0 中引入的。它的目标是为所有通信技术提供标准抽象，并且是在 .NET 中实现 Web 服务的推荐方式。

[WCF 和 ASMX Web 服务有什么区别？](https://stackoverflow.com/questions/2448472/wcf-vs-asmx-web-service)

ASHX 是一种在 .NET 中编写 HTTPHandlers 的方法。有关什么是 HTTPHandler 的更多信息

[http://forums.asp.net/t/1166701.aspx/1](http://forums.asp.net/t/1166701.aspx/1)

.NET 支持 ASMX 服务。但是建议迁移到 WCF。此外，您应该在 WCF 中编写所有新服务。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-15T12:05:30.393

是的，asmx 对于 WCF 服务已经过时了。当您使用 < 4.0 aspx 时，您可以使用 asmx。

ashx 不会完全替代 asmx。

如果您有编码格式问题/标准/大量代码，那么您可以使用 MVC Web API 2（4.0 本身）。但与 WCF 相比，您必须确保接收者的响应期望是什么（“WCF 是 Web 服务 (ASMX) 的演变，并支持 TCP、HTTP、HTTPS、命名管道、MSMQ 等各种协议。但 Web api 仅适用于 HTTP( s)")。

# c - 通过套接字发送后文件大小发生变化

> ID：13100582
> 
> 赞同：-1
> 
> 时间：2012-10-27T13:25:17.563
> 
> 标签：c, linux, sockets, networking, network-programming

当通过套接字从客户端向服务器发送文件时，文件大小会发生变化。问题可能出在哪里？

这是客户端的代码：

```
char chunk[512];
host_info = gethostbyname(server);
if (host_info == NULL) {
    perror("get host by name");
    exit(errno);
}

socket_desc = socket(AF_INET, SOCK_STREAM, 0);
if (socket_desc < 0) {
    perror("socket");
    exit(errno);
}

server_address.sin_family = host_info->h_addrtype;
memcpy((char *) &server_address.sin_addr.s_addr, host_info->h_addr_list[0], host_info->h_length);
server_address.sin_port = htons(PORT);

if (connect(socket_desc, (struct sockaddr *) &server_address, sizeof(server_address)) < 0) {
    perror("connect");
    exit(errno);
}

file_to_send = fopen (lfile,"rb");
if(!file_to_send) {
    perror("fopen");
    close(socket_desc);
    exit(errno);
} else {
    long file_size;
    fseek (file_to_send, 0, SEEK_END);     
    file_size = ftell (file_to_send);
    rewind(file_to_send);
while(totally_read < file_size){
    chunk[0] = '\0';
    bytes_read = fread(chunk, sizeof(char), sizeof(chunk), file_to_send);
    totally_read += bytes_read;
    int sent = send(socket_desc, chunk, bytes_read, 0);
    if(sent < 0){
        perror("connect");
        exit(errno);
    }
    totally_sent += sent;
    printf("read: %7db sent: %7db totally read: %7db totally sent: %7db\n", bytes_read, sent, totally_read, totally_sent);
} 
```

这是服务器端：

```
char chunk[512];
listen_socket = socket(AF_INET, SOCK_STREAM, 0);
if (listen_socket < 0) {
    perror("socket");
    close(listen_socket);
    exit(errno);
}

server_address.sin_family = AF_INET;
server_address.sin_addr.s_addr = htonl(INADDR_ANY);
server_address.sin_port = htons(PORT);

if (bind(listen_socket, (struct sockaddr *) &server_address, sizeof(server_address)) < 0) {
    perror("bind");
    close(listen_socket);
    exit(errno);
}

listen(listen_socket, 5);
client_address_length = sizeof(client_address);

while(1){    
    connect_socket = accept(listen_socket, (struct sockaddr *) &client_address, &client_address_length);
    if (connect_socket < 0) {
    perror("accept");
    close(listen_socket);
    exit(errno);
}

recv_file = fopen(filename,"wb");
int received = 0;
int totally_wrote = 0, totally_received = 0;
while(1){
    chunk[0] = '\0';
    received = recv(connect_socket, chunk, sizeof(chunk), 0);
    if(received < 0) {
        perror("recv");
    } else if(received > 0) {
        int wrote = fwrite(chunk, sizeof(char), received, recv_file);
        totally_wrote +=wrote;
        totally_received += received;
        printf("received: %7db wrote: %7db totally received: %7db torally wrote: %7db\n", received, wrote, totally_received, totally_wrote);
    } else {
        printf("Complete!\n");
        break;
    }
} 
```

发送文本文件时，我在客户端得到以下输出：

```
totally read:  299695b   |   totally sent:  299695b 
```

但在服务器端：

```
totally received:  303279b   |   torally wrote:  303279b 
```

我已经用编辑器打开了文件。传输的文件与源文件几乎相同，只是开头有些奇怪的数据。如果块大小为 512 字节，则传输文件开头添加 3584 字节的二进制数据。如果我将块大小更改为 256 字节，它会增加 3840 字节。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T14:23:48.863

您没有检查 send() 的返回值 Send() 可以返回 -1 和第三个（长度）参数之间的任何值，包括在内。您假设任何返回值 > 0 都等于第三个参数。他们不需要。

要处理短的 send()s（或 recv()s（或 read() / write()），你需要类似的东西：

```
int sent, pos, bytes_read;
bytes_read = fread(chunk, sizeof(char), sizeof(chunk), file_to_send);

totally_read += bytes_read;

for (pos = 0; pos < bytes_read; pos += sent) {
    sent = send(socket_desc, chunk+pos, bytes_read-pos, 0)
    switch(sent) {
    case -1: /* handle errno here, especially EAGAIN/EINTR */
    case 0: /*handle EOF here */
        break;
    default:
        break;
        }
    }
totally_sent += pos; 
```

# c# - 通过类的静态Instance调用方法

> ID：13100583
> 
> 赞同：0
> 
> 时间：2012-10-27T13:25:25.473
> 
> 标签：c#, asp.net, design-patterns

我创建了一个名为 ICountry 的接口

```
public  interface ICountry
    {
        List<CountryProperty> GetAllCountry();
        List< CountryProperty> GetCountryById(int countryid);

    } 
```

然后在我创建了一个名为 CountryProvider 的抽象类之后，我在其中实现了 ICountry 接口的方法，如下所示

```
public abstract   class CountryProvider:ICountry
  {

      public static CountryProvider Instance
      {
          get
          {
              return new Country();
          }
      }

      public abstract List<CountryProperty> GetAllCountry();

      public abstract List<CountryProperty> GetCountryById(int countryid);

    } 
```

然后在我创建了一个名为 Country 的简单类并继承类 CountryProvider 并覆盖抽象方法之后

```
public   class Country: CountryProvider 
  {
      private DbWrapper _objDataWrapper;
      private DataSet _dataSet;

      public override List<CountryProperty> GetAllCountry()
      {   _dataSet=new DataSet();
          _objDataWrapper = new DbWrapper(Common.CnnString, CommandType.StoredProcedure);
          var objCountryList = new List<CountryProperty>();
          try
          {
             _dataSet=_objDataWrapper.ExecuteDataSet("Aj_Proc_GetCountryList");
              objCountryList = BindCountryObject(_dataSet.Tables[0]);

          }
          catch (Exception ex)
          {

          }
          return objCountryList;
      }

      public override List<CountryProperty> GetCountryById(int countryid)
      {
          _dataSet = new DataSet();
          _objDataWrapper = new DbWrapper(Common.CnnString, CommandType.StoredProcedure);
          var objCountryList = new List<CountryProperty>();
          try
          {
              _objDataWrapper.AddParameter("@CountryId", countryid);
              _dataSet = _objDataWrapper.ExecuteDataSet("Aj_Proc_GetCountryList");
              objCountryList = BindCountryObject(_dataSet.Tables[0]);

          }
          catch (Exception ex)
          {
              var err = ex.Message;

          }
          return objCountryList;
      }

      private List <CountryProperty> BindCountryObject(DataTable dataTable )
      {
          if (dataTable == null) throw new ArgumentNullException("dataTable");
          var objCountryList = new List<CountryProperty>();

        try
          {
              if(dataTable.Rows.Count>0 )
              {

                  for(var j=0;j<dataTable.Rows.Count;j++)
                  {
                      var objCountry = new CountryProperty
                                           {
                                               CountryId = Convert.ToInt32(dataTable.Rows[j]["AjCountryId"]),
                                               CountryCode = Convert.ToString(dataTable.Rows[j]["AjCountryCode"]),
                                               CountryName = Convert.ToString(dataTable.Rows[j]["AjCountryName"])
                                           };
                      objCountryList.Add(objCountry);
                  }
              }
          }
          catch (Exception ex)
          {

          }
          return objCountryList;
      }
  } 
```

然后在我调用这样的方法之后

```
 var data = CountryProvider.Instance.GetAllCountry(); 
```

我的问题是是否遵循严格的方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T13:31:17.730

如果您想要跨应用程序的单个实例，则需要使用[单例模式-](http://msdn.microsoft.com/en-us/library/ff650316.aspx)

```
private static Country country;
public static CountryProvider Instance
{
   get
   {
      if(country == null)
      {
         country = new Country();
      }
      return country;
   }
} 
```

而你，`don't need an abstract class`因为每次你想返回一个国家的实例。因此，Country 类应该直接实现该接口，因为其他两个方法无论如何都是抽象的，您在 Country 类中重写了它们。

# javascript - jasmine 的最佳 JavaScript 模式

> ID：13100585
> 
> 赞同：2
> 
> 时间：2012-10-27T13:26:13.817
> 
> 标签：javascript, jasmine

我们已经使用茉莉花有一段时间了。我们已经为大约 20% 的代码编写了规范。我们的大部分代码都与 DOM 元素紧密耦合，这使得测试变得极其困难。现在我们想重构我们的代码并使其可以用 jasmine 进行测试。

所以我的问题是：**哪种 JavaScript 模式在测试（茉莉花）方面具有优势，为什么？**

更新：我做了一些研究，发现了一些有用的提示：

*   私有方法和属性很难测试，所以如果测试是首选，请避免。
*   JQuery 链接：再次建议使用链接以提高性能，但不建议在单元测试中过度使用。

# javascript - Meteor - 客户无法获得收藏

> ID：13100586
> 
> 赞同：2
> 
> 时间：2012-10-27T13:26:16.123
> 
> 标签：javascript, coffeescript, meteor

我仍在尝试了解 Meteor 的整个发布/订阅方面。

这是我想要实现的要点。

在服务器端，在“Meteor.startup”，我从博客中获取 RSS 提要。这部分有效。基本上，我的服务器代码看起来像

```
Items = new Meteor.Collection "items"

Meteor.startup ->
  ..
  .. # code for fetching the RSS feeds
  ..
  for each feed
    Items.insert
      title:item.title

  console.log Items.find().count() # this returns the correct count

  Meteor.publish "items", ->
    Items.find() 
```

现在我已经发布了“项目”，我想从客户端订阅它。

```
Items = new Meteor.Collection "items"
Meteor.subscribe("items")
console.log Items.find().count() 
```

但上面给了我“0”。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T00:12:53.617

订阅是异步的，您需要通过回调函数等待订阅完成，然后再尝试访问集合中的数据。Javascript 中的示例：

```
Meteor.subscribe('items', function () {
    console.log(Items.find().count());
}); 
```

# javascript - window.setInterval 可能的范围问题？

> ID：13100587
> 
> 赞同：0
> 
> 时间：2012-10-27T13:26:16.487
> 
> 标签：javascript, jquery

感谢您花时间阅读这篇文章。终于鼓起足够的勇气在这里提出问题:) 希望我以正确的方式提出我的问题。

我的问题是我试图在页面周围随机设置“正方形”动画，但 setInterval 方法存在问题。

你可以在这里找到它[http://jsfiddle.net/xEMXh/](http://jsfiddle.net/xEMXh/)

在初始化函数中，我试图遍历每个幽灵元素并将其设置为间隔函数，然后使其每隔 X 秒以随机方向动画。

```
for (ghostCount = 0; ghostCount < ghosts.length; ghostCount += 1) {
            var speed = LesMccutcheon.GhostHunter.GetSpeed($(ghosts[ghostCount]).attr('data-speed')),
                activeGhost = ghosts[ghostCount];
            window.setInterval(function() {
                LesMccutcheon.GhostHunter.MoveInDirection(activeGhost);
            }, speed);
        } 
```

正在发生的只是最后一个“幽灵”元素正在动画。我知道这是因为在 for 循环中我覆盖了变量，并且在第一个间隔被称为 activeGhost 时是 for 循环中的最后一组。

我尝试直接在 set.Interval 中使用*ghosts[ghostCount]*但似乎 set interval 无法访问它。我尝试将其设置为 set.Interval anom 函数内的变量，但它记录为未定义。

我唯一的另一个半生不熟的想法是尝试设置一个增量 var 标识符，但这似乎适得其反，而且不是一个好方法。

提前感谢您的任何建议！

莱斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T13:30:09.637

`activeGhost`在您的代码中，每个循环都会覆盖该变量。只需将调用`setInterval`放入这样的闭包中

```
( function (activeGhost) {
    window.setInterval(function() {
        LesMccutcheon.GhostHunter.MoveInDirection(activeGhost);
    }, speed);
} ( activeGhost) ); 
```

这样，应保留对正确元素的引用。

# macos - 如何使用私有核心图形方法以编程方式缩放屏幕（如何查找函数参数）

> ID：13100589
> 
> 赞同：4
> 
> 时间：2012-10-27T13:26:36.373
> 
> 标签：macos, cocoa, core-graphics, private

你可能知道 Mac OS X 内置了一个非常棒的屏幕缩放功能，可以在 System Preferences => Universal Access 中启用。

现在我试图以编程方式触发这个屏幕缩放。我可以通过发送键盘快捷键来做到这一点，但它不像它应该的那样流畅。所以我对系统如何做到这一点进行了一些研究。

似乎有一些私有核心图形方法可以做我想做的事情，但我无法找到它们采用的参数。

这些是我发现的功能：

*   CGSZoomPoint
*   CGSU缩放点
*   CGSGetZoomParameters
*   CGSSetZoomParameters
*   CGSI 放大

有些人已经对核心图形框架的一些私有方法进行了逆向工程，并为它们创建了标头。（参见例如[http://pwproject.googlecode.com/svn/trunk/Mac%20OS%20X/Vector%20Grab/](http://pwproject.googlecode.com/svn/trunk/Mac%20OS%20X/Vector%20Grab/)）不幸的是，我似乎需要的方法丢失了。（CGSIsZoomed，其实是包含

```
CG_EXTERN CGError CGSIsZoomed(CGSConnectionID cid, bool *outIsZoomed); 
```

)

我还发现了一个似乎可以缩放屏幕的应用程序，这似乎是相关的反汇编，但我对汇编不太了解，因此我无法阅读它;-(

```
0000000100015c21    callq   0x10002c212 ; symbol stub for: _CGEventCreate
0000000100015c26    movq    %rax,%rbx
0000000100015c29    movq    %rbx,%rdi
0000000100015c2c    callq   0x10002c22a ; symbol stub for: _CGEventGetLocation
0000000100015c31    movsd   %xmm0,0xffffff48(%rbp)
0000000100015c39    movsd   %xmm1,0xffffff58(%rbp)
0000000100015c41    movsd   %xmm0,0xa8(%rbp)
0000000100015c46    movsd   %xmm1,0xb0(%rbp)
0000000100015c4b    movq    %rbx,%rdi
0000000100015c4e    callq   0x10002c362 ; symbol stub for: _CFRelease
0000000100015c5a    jle 0x100015d01
0000000100015c60    movq    0x00098a71(%rip),%rax
0000000100015c67    movq    0x18(%rax),%rcx
0000000100015c6b    movq    %rcx,0x18(%rsp)
0000000100015c70    movq    0x10(%rax),%rcx
0000000100015c74    movq    %rcx,0x10(%rsp)
0000000100015c79    movq    (%rax),%rcx
0000000100015c7c    movq    0x08(%rax),%rax
0000000100015c80    movq    %rax,0x08(%rsp)
0000000100015c85    movq    %rcx,(%rsp)
0000000100015c89    movsd   0xffffff48(%rbp),%xmm0
0000000100015c91    movsd   0xffffff58(%rbp),%xmm1
0000000100015c99    callq   0x10002c266 ; symbol stub for: _CGRectContainsPoint
0000000100015c9e    cmpl    $0x02,0x00098a43(%rip)
0000000100015ca5    jl  0x100015d01
0000000100015ca7    movl    $0x    00000001,%r15d
0000000100015cad    movl    $0x00000020,%ebx
0000000100015cb2    movsd   0xa8(%rbp),%xmm0
0000000100015cb7    movsd   0xb0(%rbp),%xmm1
0000000100015cbc    movq    0x00098a15(%rip),%rax
0000000100015cc3    movq    0x18(%rax,%rbx),%rcx
0000000100015cc8    movq    %rcx,0x18(%rsp)
0000000100015ccd    movq    0x10(%rax,%rbx),%rcx
0000000100015cd2    movq    %rcx,0x10(%rsp)
0000000100015cd7    movq    (%rax,%rbx),%rcx
0000000100015cdb    movq    0x08(%rax,%rbx),%rax
0000000100015ce0    movq    %rax,0x08(%rsp)
0000000100015ce5    movq    %rcx,(%rsp)
0000000100015ce9    callq   0x10002c266 ; symbol stub for: _CGRectContainsPoint
0000000100015cee    addq    $0x20,%rbx
0000000100015cf2    incq    %r15
0000000100015cf5    movslq  0x000989ec(%rip),%rax
0000000100015cfc    cmpq    %rax,%r15
0000000100015cff    jl  0x100015cb2
0000000100015d01    movsd   0xc0(%rbp),%xmm0
0000000100015d06    movsd   %xmm0,0xffffff58(%rbp)
0000000100015d0e    leaq    0xa8(%rbp),%rsi
0000000100015d12    leaq    0x98(%rbp),%rdx
0000000100015d16    movl    %r14d,%edi
0000000100015d19    callq   0x10002c296 ; symbol stub for: _CGSZoomPoint
0000000100015d1e    movsd   0xffffff58(%rbp),%xmm2
0000000100015d26    testl   %eax,%eax
0000000100015d28    jne 0x100015d99
0000000100015d2a    movapd  %xmm2,%xmm0
0000000100015d2e    mulsd   0xffffff60(%rbp),%xmm0
0000000100015d36    addsd   0x98(%rbp),%xmm0
0000000100015d3b    movsd   0x00017255(%rip),%xmm1
0000000100015d43    ucomisd %xmm0,%xmm1
0000000100015d47    ja  0x100015d78
0000000100015d49    ucomisd 0x0001749f(%rip),%xmm0
0000000100015d51    ja  0x100015d78
0000000100015d53    mulsd   0xffffff50(%rbp),%xmm2
0000000100015d5b    addsd   0xa0(%rbp),%xmm2
0000000100015d60    movsd   0x00017230(%rip),%xmm0
0000000100015d68    ucomisd %xmm2,%xmm0
0000000100015d6c    ja  0x100015d78
0000000100015d6e    ucomisd 0x00017482(%rip),%xmm2
0000000100015d76    jbe 0x100015d99
0000000100015d78    movzbl  0xbf(%rbp),%edx
0000000100015d7c    andl    $0x01,%edx
0000000100015d7f    movsd   0xc0(%rbp),%xmm0
0000000100015d84    leaq    0xc8(%rbp),%rsi
0000000100015d88    movl    %r14d,%edi
0000000100015d8b    movl    $0x    00000001,%ecx
0000000100015d90    xorpd   %xmm1,%xmm1
0000000100015d94    callq   0x10002c290 ; symbol stub for: _CGSSetZoomParameters
0000000100015d99    movsd   0xffffff70(%rbp),%xmm1
0000000100015da1    addsd   0xffffff50(%rbp),%xmm1
0000000100015da9    movsd   0xffffff68(%rbp),%xmm0
0000000100015db1    addsd   0xffffff60(%rbp),%xmm0
0000000100015db9    movb    0x000988f1(%rip),%al
0000000100015dbf    xorl    %edi,%edi
0000000100015dc1    cmpb    $0x01,%al
0000000100015dc3    jne 0x100015dde
0000000100015dc5    movl    $0x    00000006,%esi
0000000100015dca    xorl    %edx,%edx 
```

如果有人知道如何使用这些私人功能，你会让我的一周:-)

最好的，托马斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-07-18T22:11:42.250

好吧，这个问题已经很久没有答案了，但碰巧我只是想出了如何使用`CGSGetZoomParameters`和`CGSSetZoomParameters`我自己的工作，它们都可以用来控制和检索有关屏幕缩放状态的信息。函数定义如下：

```
CG_EXTERN CGError CGSGetZoomParameters(CGSConnectionID cid, CGPoint *origin, double * zoomFactor, int8_t *smoothed);
CG_EXTERN CGError CGSSetZoomParameters(CGSConnectionID cid, CGPoint *origin, double zoomFactor, int8_t smoothed); 
```

where`origin`确定使用以下方法缩放屏幕的哪个部分：

要尽可能向左缩放区域，请设置`origin.x`为：`(desktopWidth / 2) / zoomFactor`

要尽可能向右缩放区域，请设置`origin.x`为：`desktopWidth - ((desktopWidth / 2) / zoomFactor)`

要尽可能放大区域，请设置`origin.y`为：`(desktopHeight / 2) / zoomFactor`

要尽可能向右缩放区域，请设置`origin.y`为：`desktopHeight - ((desktopHeight / 2) / zoomFactor)`

For`desktopWidth`和`desktopHeight`是当前桌面边界矩形的总宽度/高度，包括当前排列的所有显示器。因此，如果您有两个完全水平排列的 1080p 显示器，那么桌面的总宽度和高度为 3840x1080。

要缩放中间区域，请使用`origin`介于两个极值之间的值。数学计算出来，因此它们之间的整数点数完全对应于任何给定的缩放屏幕可以具有的位置数`zoomFactor`。

这些功能是低级的，会干扰标准的 macOS 无障碍缩放功能。例如，如果您的屏幕未缩放，您可以使用 将其放大`CGSSetZoomParameters`，然后使用辅助功能之一，例如按住 Control 并滚动鼠标滚轮来更改缩放，它们将像屏幕未缩放一样工作。此外，当屏幕缩放时，无论如何配置辅助功能缩放功能，都无法使用鼠标进行平移，所以要小心！您可能会导致屏幕放大并让用户无法再次缩小。

我不确定如何使用`CGSZoomPoint`或`CGSUnzoomPoint`使用 - 我无法让它们产生任何效果。但如前所述，屏幕缩放的低级控制可以通过其他两个功能来完成。

# java - Java中的自省

> ID：13100590
> 
> 赞同：0
> 
> 时间：2012-10-27T13:26:54.020
> 
> 标签：java, object, introspection

我有一堆对象，在这个堆栈中我推送 ClassA 和 ClassB 对象。我有一个必须从这个堆栈返回对象的方法

```
public Object method(Stack s){
    ClassA a = new ClassA();
    stack.push(a);
    ClassB b = new ClassB();
    stack.push(b);
    while(stack has two elements) stack.pop();
    return stack.pop()// I return the last element
} 
```

问题是：当我调用这个方法 instanceof 不起作用时，它不能再告诉 ClassA 和 ClassB

```
Object o = method(s);
if ( o instanceof ClassA){
    //do something
} else if (o instanceof ClassB) {
    //do something else
} 
```

内部方法(Stack s) instanceof 有效，外部无效，但 toString() 方法工作正常，它为每个类返回正确的字符串。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-27T13:38:17.607

在某些情况下，您的自省代码可能无法按预期工作：

*   如果`o`是`null`，则`instanceof`运算符返回`false`。根据 JLS，该`null`值不是任何类型的实例。

*   如果`ClassB`是 的子类型`classA`，`o instanceof ClassA`则将返回`true`的实例`ClassB`。

*   如果您使用类加载器做一些复杂的事情，可以使用不同的类加载器加载相同的“.class”文件。如果这样做，您将遇到类的两个“副本”实际上具有不同类型的问题......并且`instanceof`会返回`false`. （此行为也在 JLS 中指定。）

最后一种情况可能特别令人困惑，因为当您查看两个类的名称时，它们将是相同的。但是`class1.equals(class2)`or`class1 == class2`会给你关于两个类是否实际上相同的明确答案。

# jquery - 跨域 iframe jquery 选择器

> ID：13100600
> 
> 赞同：1
> 
> 时间：2012-10-27T13:28:27.407
> 
> 标签：jquery, iframe

我想在本地 jquery 对话框中制作跨域 iframe 内容。当我在同一个应用程序中开发它时，一切都很好。当我尝试使用另一个 url 在另一个应用程序上测试它时，我收到错误：

```
Error: Permission denied to access property ... 
```

我知道，安全策略存在问题，但我需要在框架内进行选择。

让我向您展示我的工作：
`foo/plugin.js:`

```
    变量框架DOM；
    功能框架加载（）{
        for (var i = 0; i < window.frames.length; i++) {
            if (window.frames[i].name == "frame-name-here") {
                frameDOM = window.frames[i].document;
                休息;
            }
        }
    }

    $（函数（）{
        var frame = "<iframe src='http://bar:222/Home/frame' id='frame-content' name='frame-name-here' onload='frameLoaded()' />";

    $("#dialog-form").dialog({ autoOpen: true, height: 450, width: 500, modal: true, resizable: false,
                纽扣： {
                    "Deliver": function () { //这里有些长代码
                        }
                }
                创建：函数（事件，用户界面）{
                    $(this).append(frame);
                }
            });

```

加载框架后，我可以轻松访问框架内的内容：

```
 $("#frame-input", frameDOM).val(); 
```

跨域我失去了这种可能性。是否有其他方法可以控制取自另一个域的选择器内框？

PS我不需要[调整框架大小](https://stackoverflow.com/questions/153152/resizing-an-iframe-based-on-content)，该解决方案没有帮助。我正在寻找替代方法，因为这个方法不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T13:35:25.537

不幸的是，除非您可以通过 PHP 或其他脚本语言（可能在 PHP 中使用[cURL](http://php.net/manual/en/book.curl.php)）获取 HTML，然后将其从同一域传递回您的 JavaScript 应用程序，否则这是不可能的。请参阅[同源政策](http://en.wikipedia.org/wiki/Same_origin_policy)。

# asp.net - 无法在 Sharepoint 2007 List Edit.aspx 上工作的用户控件的功能不起作用

> ID：13100601
> 
> 赞同：0
> 
> 时间：2012-10-27T13:28:31.890
> 
> 标签：asp.net, sharepoint, sharepoint-2010, sharepoint-2007, moss

我在 sharepoint 2007 列表 Edit.aspx 页面上部署了一个用户控件。它在我的测试服务器上运行良好，但在生产中只加载了用户控件的 UI。页面加载时没有文本框或组合框被填充。请查看用户控件默认值的屏幕截图，而不是填写的数据。还可以找到下面的代码，它从查询字符串中获取 ID 并在页面加载时加载所需的数据。我使用 createdby value 来检查谁在分配列表项。如果用户正在访问不是由他创建的数据，则将其重定向到其他页面。请指导我。我应该做什么或检查以使其工作。

![空的用户控件](../Images/f1b3156081a6ce5dbdfda818fb80792b.png)

```
public partial class Class1 : System.Web.UI.UserControl
{

    static string name, lname, Number;  

    protected void Page_Load(object sender, EventArgs e)
    {
        try
        {
            string c1,c2,c3,c4,c5, Created;
            if (!Page.IsPostBack)
            {

                     EditID = Convert.ToInt32(Request.QueryString["ID"]);
                     name = SPContext.Current.Web.CurrentUser.Name;
                     lname = SPContext.Current.Web.CurrentUser.LoginName;

                SPSecurity.RunWithElevatedPrivileges(delegate()
             {
                 using (SPSite site = new SPSite("site name"))
                 {
                     using (SPWeb web = site.OpenWeb())
                     {
                         SPList list = web.Lists["list1"];
                         SPList UserSkill = web.Lists["list2"]; 
                         ItemForEdit = UserSkill.GetItemById(EditID);
                         c1 = ItemForEdit["col1"].ToString();
                         c2 = ItemForEdit["col2"].ToString();
                         c3 = ItemForEdit["col3"].ToString();
                         c4 = ItemForEdit["col4"].ToString();
                         c5 = ItemForEdit["col5"].ToString();
                         Created = ItemForEdit["Author"].ToString();
                         Number = ItemForEdit["col6"].ToString();
                         string[] extract;
                         extract = Created.Split('#');
                         if (name == extract[1])
                         {

                             WholeData = web.Lists["list1"].Items.GetDataTable(); 
                             Roles = WholeData.DefaultView.ToTable(true, "Title");
                             txtnumber.Text = Number;
                             ddlRole.DataSource = Roles;
                             ddlRole.DataTextField = "Title";
                             ddlRole.DataValueField = "Title";
                             ddlRole.DataBind();
                             ddlRole.SelectedValue = c1;

            //more code

            }
                         else
                         {
                             Response.Redirect("/IM/pages/Intrusion.aspx", false);
                         }
                     }
                 }
             });

            }
        }
        catch (Exception exc)
        {
            HttpContext.Current.Response.Write("<script>alert('Exception on page load: " + exc.Message + "')</script>");

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T21:13:41.253

乍一看，它看起来是一个数据问题。

要在您的生产机器上进行调试，您可以使用[远程调试器](http://msdn.microsoft.com/en-us/library/bt727f1t.aspx)，或者您可以添加一个调用来检查是否返回了 0 个项目并生成错误或记录结果。

# image - 使用 OpenCV 2 进行背景减法

> ID：13100605
> 
> 赞同：3
> 
> 时间：2012-10-27T13:29:48.780
> 
> 标签：image, image-processing, opencv, computer-vision, background-subtraction

是否有任何实现图像背景减法算法的 OpenCV 2.4.2 函数或类？

我将处理的图像将是肖像，例如来自网络摄像头的图像。我只想保留身体的上半部分（从胸部向上）并删除背景中的其他所有内容。

如果可能的话，我想避免自己实现这些算法。但是，如果 OpenCV 中目前不存在，那么请给我一些建议。

我试图寻找答案，但到目前为止，我发现的所有内容都只涉及视频或图片序列中的背景减法，这不是我想要的。我只想处理单个、静态和独立的图像。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T17:21:03.417

您可以使用 OpenCV（或任何其他库）中的 cvRunningAvg 函数尝试运行平均方法。

在此，您将平均许多帧作为背景。如果相机是静态的，它会提供很好的效果，尤其是当您有一些只有背景的帧时。

查看示例结果：

![原始框架](../Images/5c3796f4fc60b73d7b29bf4f96b1f72d.png) ![背景](../Images/7d2457db5dc1105996cc14aecc826464.png)

在抓帧时，最好应用一些形态学操作，如腐蚀、膨胀等来消除小噪声。

您可以在此处阅读代码和说明：[BackGround Extraction using Running Average](http://opencvpython.blogspot.in/2012/07/background-extraction-using-running.html)

# c# - 替换 AppDomain.GetCurrentThreadId(); 使用 ManagedThreadId

> ID：13100609
> 
> 赞同：6
> 
> 时间：2012-10-27T13:30:43.960
> 
> 标签：c#, multithreading

GetCurrentThreadId() 已被弃用，MSDN 声明 ManagedThreadId 替换它。

但是，我得到了不同的结果，后者导致我的代码出现异常。我的代码改编自[这篇文章](https://stackoverflow.com/questions/12328751/set-thread-processor-affinity-in-microsoft-net)。

```
 public static void SetThreadProcessorAffinity(params byte[] cpus)
        {
            if (cpus == null)
            {
                throw new ArgumentNullException("cpus");
            }

            if (cpus.Length == 0)
            {
                throw new ArgumentException(@"You must specify at least one CPU.", "cpus");
            }

            // Supports up to 64 processors
            long cpuMask = 0;
            byte max = (byte)Math.Min(Environment.ProcessorCount, 64);

            foreach (byte cpu in cpus)
            {
                if (cpu >= max)
                {
                    throw new ArgumentException(@"Invalid CPU number.");
                }

                cpuMask |= 1L << cpu;
            }

            // Ensure managed thread is linked to OS thread; does nothing on default host in current .NET versions
            Thread.BeginThreadAffinity();

#pragma warning disable 618
            // The call to BeginThreadAffinity guarantees stable results for GetCurrentThreadId,
            // so we ignore the obsolete warning.
            int osThreadId = AppDomain.GetCurrentThreadId();
            osThreadId = Thread.CurrentThread.ManagedThreadId;// NOT THE SAME VALUE
#pragma warning restore 618

            // Find the ProcessThread for this thread
            ProcessThread thread = Process.GetCurrentProcess().Threads.Cast<ProcessThread>()
                .Where(t => t.Id == osThreadId).Single();

            // Set the thread's processor affinity
            thread.ProcessorAffinity = new IntPtr(cpuMask);
        } 
```

我可以看到问题是一个获取线程的进程 ID，而另一个获取应用程序的进程 ID。

如何在不使用不推荐使用的方法的情况下使其工作？最初的 Stack Overflow 文章声明要使用[P/Invoke](http://en.wikipedia.org/wiki/Platform_Invocation_Services)，但我不知道如何使用，这不是 MSDN 所说的。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-27T13:44:29.783

不，ManagedThreadId 与操作系统的线程 ID 完全没有关系。CLR 只是简单地对线程进行编号，从 1 开始。这是 SQL Server 组中试图用纤程模拟 .NET 线程的项目的一个相当可悲的副作用。该项目被放弃了，他们无法使其足够稳定。遗憾的是，线程 ID 映射保留了 .NET 2.0 发布时的样子。从技术上讲，自定义 CLR 主机仍然可以使用该功能以他们想要的方式实现线程，我不知道有任何主流实现实际上这样做。SQL Server 组故障是一个巨大的危险信号。

绕过过时警告的唯一方法是 pinvoke [GetCurrentThreadId()](http://www.pinvoke.net/default.aspx/kernel32/GetCurrentThreadId.html)。该链接将带您进行正确的 pinvoke 声明。

# javascript - 将 youtube 中的 url 替换为嵌入代码 - 错误：访问属性“toString”的权限被拒绝

> ID：13100611
> 
> 赞同：43
> 
> 时间：2012-10-27T13:30:45.577
> 
> 标签：javascript, jquery, youtube

我在 FireBug 中有这个代码和这个错误：

> 错误：访问属性“toString”的权限被拒绝

我该如何解决这个错误？

HTML：

```
<div class="yturl">http://www.youtube.com/watch?v=UNMLEZrukRU</div> 
```

JS：

```
$("div.yturl").each(function(){
    var regex = /(\?v=|\&v=|\/\d\/|\/embed\/|\/v\/|\.be\/)([a-zA-Z0-9\-\_]+)/;
    var youtubeurl = $(this).text();
    var regexyoutubeurl = youtubeurl.match(regex);
    if (regexyoutubeurl) 
    {
         $(this).html("<iframe width=\"390\" height=\"315\" src=\"http://www.youtube.com/embed/"+regexyoutubeurl[2]+"\" frameborder=\"0\" allowfullscreen></iframe>");
    }
}); 
```

**演示：http:** [//jsfiddle.net/9e48p/](http://jsfiddle.net/9e48p/)

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-10-27T14:39:36.627

该错误可以由 Adob​​e 的 Flash Player 团队或 Google 工程师修复 - 您现在应该忽略它。它连接到 Flash Player 安全设置和嵌入到 Youtube 页面的 SWF 文件。IBM 过去曾[报告过](http://www-01.ibm.com/support/docview.wss?uid=swg21370430)该问题，并且还有一个[Mozilla Bugzilla 条目](https://bugzilla.mozilla.org/show_bug.cgi?id=434522)。

当我在 Firefox 16.0.2 中停用 Flash Player 时，错误消息消失了。检查评论 #37：[https ://bugzilla.mozilla.org/show_bug.cgi?id=434522#c37](https://bugzilla.mozilla.org/show_bug.cgi?id=434522#c37)

> 对于它的价值，我看到这个错误发生在*任何*Flash 文件，即使是那些根本没有动作脚本调用（ExternalInterface 等）的文件，被加载到页面域和 iframe 域的页面上的 iframe 中是不同的。这意味着当实际上存在跨域情况时会导致 iframe 问题。但是，尚不完全清楚是否真的试图进行跨域调用，*应该*阻止并出错。
> 
> 因为 Flash SWF 本身试图调用来执行“Location.toString”并没有什么，页面上的 JavaScript 也没有什么，唯一的选择是 Flash 插件本身有一些东西（9.0.124 是什么我正在测试），它试图调用父/顶部窗口来执行 Location.toString()。

虽然错误被标记为已解决，但附加的测试用例[https://bug434522.bugzilla.mozilla.org/attachment.cgi?id=321956](https://bug434522.bugzilla.mozilla.org/attachment.cgi?id=321956)在最新的 Firefox 版本中产生相同的错误消息（在 Firebug 控制台或Firefox 错误控制台窗口）。

**更新：**
该错误也已在旧错误数据库中提交给 Adob​​e：[FP-561“Location.toString”未捕获（安全）异常，由不正确的 Flash 插件行为引起](http://bugs.adobe.com/jira/browse/FP-561)（您需要一个帐户才能查看错误详细信息）。关闭错误时的最后一条评论：

> 在 Firefox 4 和 5 上使用最新的 Flash Player 10.3.181.34 进行测试，未引发此类异常。所以这个bug可能已经修复了，对吧？如果您仍然遇到此问题，请在我们的新错误系统 [https://bugbase.adobe.com/](https://bugbase.adobe.com/)中提交错误，并在新错误中添加指向原始 JIRA 报告的链接。我们很高兴在新的错误系统中跟进您的报告。

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2013-11-13T09:12:01.813

不要仅仅因为它与您的代码没有直接关系而忽略此错误。

当您的嵌入最初隐藏时，它似乎会发生。

只需添加`?html5=1`到您的嵌入网址。IE8 仍将采用 flash 版本。或使用 Youtube api 加载您的视频。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-27T13:51:53.770

您的 Iframe url 构造函数可能有问题。该错误是在加载到 Iframe 中的 youtube 脚本中引发的。未随脚本动态添加的硬编码 html Iframe 会引发相同的错误

```
<iframe width="390" height="315" src="http://www.youtube.com/embed/UNMLEZrukRU" frameborder="0" allowfullscreen></iframe> 
```

仅 HTML 版本演示 [http://jsfiddle.net/Lgt5f/](http://jsfiddle.net/Lgt5f/)

仔细检查 url 是否缺少参数，否则我会检查 youtube 支持资源

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-27T13:33:09.060

该问题可能是由无法正常工作的扩展程序引起的。

使用安全模式在 Firefox 问题疑难解答中启动 Firefox，以检查是否是某个扩展或硬件加速导致了问题（切换到默认主题：Firefox/工具 > 附加组件 > 外观/主题）。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-27T20:58:35.773

忽略该错误，它与您的代码无关。只是一个浏览器错误。

# memory - cudaFree 没有释放内存

> ID：13100615
> 
> 赞同：2
> 
> 时间：2012-10-27T13:31:27.153
> 
> 标签：memory, cuda, free

下面的代码计算两个向量 a 和 b 的点积。正确的结果是 8192。当我第一次运行它时，结果是正确的。然后当我第二次运行它时，结果是前一个结果 + 8192 等等：

```
1st iteration: result = 8192
2nd iteration: result = 8192 + 8192
3rd iteration: result = 8192 + 8192 
and so on. 
```

我通过在屏幕上打印它进行了检查，并且设备变量 dev_c 没有被释放。更重要的是，写入它会导致类似总和的结果，结果是先前的值加上写入它的新值。我想这可能与 atomicAdd() 操作有关，但毕竟 cudaFree(dev_c) 应该删除它。

```
#define N 8192
#define THREADS_PER_BLOCK 512
#define NUMBER_OF_BLOCKS (N/THREADS_PER_BLOCK)
#include <stdio.h>

__global__ void dot( int *a, int *b, int *c ) {

    __shared__ int temp[THREADS_PER_BLOCK];

    int index = threadIdx.x + blockIdx.x * blockDim.x;

    temp[threadIdx.x] = a[index] * b[index];

    __syncthreads();

    if( 0 == threadIdx.x ) {

        int sum = 0;
        for( int i= 0; i< THREADS_PER_BLOCK; i++ ){
        sum += temp[i];
        }
        atomicAdd(c,sum);
    }
}

    int main( void ) {

        int *a, *b, *c;
        int *dev_a, *dev_b, *dev_c; 
        int size = N * sizeof( int); 

        cudaMalloc( (void**)&dev_a, size );
        cudaMalloc( (void**)&dev_b, size );
        cudaMalloc( (void**)&dev_c, sizeof(int));

        a = (int*)malloc(size);
        b = (int*)malloc(size);
        c = (int*)malloc(sizeof(int));

        for(int i = 0 ; i < N ; i++){
            a[i] = 1;
            b[i] = 1;
        }

        cudaMemcpy( dev_a, a, size, cudaMemcpyHostToDevice);
        cudaMemcpy( dev_b, b, size, cudaMemcpyHostToDevice);

        dot<<< N/THREADS_PER_BLOCK,THREADS_PER_BLOCK>>>( dev_a, dev_b, dev_c);

        cudaMemcpy( c, dev_c, sizeof(int) , cudaMemcpyDeviceToHost);

        printf("Dot product = %d\n", *c);

        cudaFree(dev_a);
        cudaFree(dev_b);
        cudaFree(dev_c);    

        free(a); 
        free(b); 
        free(c);

        return 0;

    } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-27T13:39:23.410

cudaFree 不会擦除任何内容，它只是将内存返回到池中以进行重新分配。cudaMalloc 不保证已分配的内存值。您需要初始化程序使用的内存（全局和共享），以获得一致的结果。[顺便说一下， malloc 和 free](https://stackoverflow.com/questions/8029584/why-does-malloc-initialize-the-values-to-0-in-gcc)也是如此。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-27T13:39:28.900

来自[cudaMalloc()](http://www.clear.rice.edu/comp422/resources/cuda/html/group__CUDART__MEMORY_gc63ffd93e344b939d6399199d8b12fef.html)的文档；

> 内存没有被清除。

这意味着 dev_c 未初始化，您`atomicAdd(c,sum);`将添加到恰好存储在返回位置的内存中的任何随机值。

# ip-address - 通过本地网络访问全球 IP

> ID：13100625
> 
> 赞同：0
> 
> 时间：2012-10-27T13:33:18.240
> 
> 标签：ip-address

如何在本地网络中访问我的全局 IP 地址 84.151.219.x？如果我在浏览器中输入 84.151.219.x，我将转到我的路由器配置页面..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T13:41:51.210

您可能会发现，从您的网络内部您无法做到这一点。

在较大的路由器上，您尝试做的有时称为长号（想想长号幻灯片的形状），并且被称为“[水平分割](http://searchnetworking.techtarget.com/definition/split-horizon)”的东西阻止（通常可以在这些设备中关闭）。

在较小的家用设备中，路由器通常保持外向内和内向内。

唯一的可能性是网络外部的代理服务器来反弹流量，以便从外部访问您的路由器并通过外部访问规则处理您的流量。

# java - Java 多播在 Windows 中不起作用

> ID：13100629
> 
> 赞同：0
> 
> 时间：2012-10-27T13:33:25.487
> 
> 标签：java, windows, udp, multicast, lan

我有这个代码，但它在两台不同的计算机上不起作用，我改变了我的防火墙，但它不起作用。

```
import java.io.IOException;
import java.lang.management.ManagementFactory;
import java.net.DatagramPacket;
import java.net.InetAddress;
import java.net.MulticastSocket;
import java.rmi.RMISecurityManager;
import java.util.ArrayList;
import java.util.HashMap;

public class TestingDota{

private static String name;
public static void main(String args[]){
    name = args[0];

    final InetAddress group;
    final String address = "230.0.0.1";
    final int port = 9876;
    try{
        group = InetAddress.getByName(address);
    }catch(Exception e){
        e.printStackTrace();
        return;
    }
    HashMap<String, Tupla> map = new HashMap<String,Tupla>();
    try{
        final MulticastSocket socket = new MulticastSocket(port);
        socket.setReuseAddress(true);
        socket.joinGroup(group);
        socket.setTimeToLive(2);
        new Thread(){

            public void run(){
                while(true){
                    String msg = ManagementFactory.getRuntimeMXBean().getName()+ "," + name;
                    DatagramPacket packet = new DatagramPacket(msg.getBytes(), msg.length(), group, port);
                    try {
                        socket.send(packet);
                        Thread.sleep(1000);
                    } catch (IOException e){
                        e.printStackTrace();
                    } catch (InterruptedException e) {
                        e.printStackTrace();
                    }

                }

            }
        }.start();

        while(true){
            byte[] buf = new byte[512];
            DatagramPacket packet = new DatagramPacket(buf, buf.length);
            socket.receive(packet);
            String msg = new String(packet.getData()).trim();
            int index = msg.indexOf(',');
            String key = msg.substring(0,index);
            String name = msg.substring(index+1, msg.length());
            long time = System.currentTimeMillis();
            if(map.containsKey(key)){
                Tupla t = map.get(key);
                t.time = time;
            }else{
                Tupla t = new Tupla();
                t.name = name;
                t.time = time;
                map.put(key, t);
                mostrar(map);
            }
            int size = map.size();
            ArrayList<String> list = new ArrayList<String>();
            for(String k : map.keySet()){
                Tupla t = map.get(k);
                if(time - t.time> 1500 ){
                    list.add(k);
                }
            }
            for(String x : list) map.remove(x);
            if(size > map.size()){
                mostrar(map);
            }
            Thread.sleep(100);
        }
    }catch(Exception e){
        e.printStackTrace();
    }
}

private static void mostrar(HashMap<String, Tupla> map) {
    for(String k : map.keySet()){
        Tupla t = map.get(k);
        System.out.println(t.name);
    }
    System.out.println();
}

static class Tupla{
    String name;
    long time;
}
} 
```

要运行这个程序，请写： $ java TestingDota someName，它可以在同一台计算机上使用多个终端，但在不同的计算机上不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T06:44:36.040

230.0.0.1 是[保留的多播地址](http://www.iana.org/assignments/multicast-addresses/multicast-addresses.xml#multicast-addresses-9)。你不能使用它。

# c# - “客户”不包含带有 5 个参数的构造函数 ASP.NET

> ID：13100633
> 
> 赞同：-4
> 
> 时间：2012-10-27T13:34:16.390
> 
> 标签：c#, asp.net, constructor

我不知道为什么我会收到这个错误。由于代码很多，而且我不明白可能有什么问题，我发布了所有文件的链接。如果有人可能会弄清楚为什么我会收到此错误“'客户'不包含带有 5 个参数的构造函数”......一个小时我被困在这个......[这是文件](https://dl.dropbox.com/u/92037912/Pets%20Hotel%202.zip) 错误在 page book.aspx

```
if (Page.IsPostBack) 
{ 
   Customer c1 = new Customer(txtFirstname.Text, txtLastname.Text, txtAddress.Text, txtZip.Text, txtCity.Text); 
   Pet p1 = new Pet(txtSpecies.Text, txtName.Text,c1); 
   service.pets.Add(p1); 
} 
```

客户->

```
public Customer(int customerId, string firstname, string lastname, string address, string zipcode, string city, string email, string phone) 
     : base(firstname, lastname) 
{ 
    this.firstname = firstname; 
    this.lastname = lastname; 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T13:40:38.080

Customer 类的构造函数是 -

```
public Customer(int customerId, string firstname, string lastname,
                string address, string zipcode, string city, string email,
                string phone) 
```

从 Book.aspx.cs 您正在创建实例，例如 -

```
Customer c1 = new Customer(txtFirstname.Text, txtLastname.Text,
            txtAddress.Text, txtZip.Text, txtCity.Text); 
```

将其替换为 -

```
Customer c1 = new Customer(txtFirstname.Text, txtLastname.Text,
            txtAddress.Text, txtZip.Text, txtCity.Text, string.Empty,
              string.Empty, string.Empty); 
```

# web-services - RESTful 服务中的本地化

> ID：13100637
> 
> 赞同：1
> 
> 时间：2012-10-27T13:34:56.793
> 
> 标签：web-services, rest, localization, content-negotiation

我有一个返回枚举的 RESTful 服务。

当我想到返回字符串将取决于客户端的语言环境时，我正在考虑是否为枚举值返回整数或字符串。

那么应该如何处理 REST 中的本地化呢？语言环境是 conneg 的一部分吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-27T14:04:55.733

本地化*是*内容协商的一部分，语言首选项使用`Accept-Language`标头 ( [RFC](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.4) ) 指定。

RFC 对允许服务返回的内容非常严格——例如，如果没有发送标头，那么您可以选择任何语言，但如果包含标头，那么您只能返回一种请求的语言，并且不允许退回到不同的语言。

换句话说，如果一个资源只有英文版本，那么请求的资源`Accept-Language: de`应该返回`406 Unacceptable`而不是默认显示英文版本。

[在其他几个问题（ 8204816、7892502](https://stackoverflow.com/questions/8204816/multi-lingual-rest-resources-url-naming-suggestions)）中讨论了不使用规范但允许回退选项的其他替代[方案](https://stackoverflow.com/questions/7892502/restful-url-where-should-i-put-locale-example-com-en-page-vs-example-com-page)。

# javascript - JQM PageShow Event 使加载时屏幕闪烁

> ID：13100647
> 
> 赞同：2
> 
> 时间：2012-10-27T13:37:05.217
> 
> 标签：javascript, jquery, events, pageload

我正在制作的应用程序有一个列表视图，当单击列表视图项目时，它会打开一个显示一些信息的新页面。

当我最初单击一个列表视图项目时，该页面可以正常打开，没有任何问题。当我单击后退按钮并单击另一个列表视图项时，页面加载但根本没有 JQM 样式。

我设法用下面的代码解决了上面的问题，但是现在页面第二次加载显示无样式的页面，屏幕闪烁并且正确加载。如何在没有在 pageshow 事件上重新加载屏幕的情况下获得相同的最终结果。

重新加载页面的代码：

```
$("#moduleinfo").live('pageshow', function() {
    $('#infoPara').trigger("create");
}); 
```

根据单击的列表视图项创建页面的代码

```
var output = "Module Code: " + results.rows.item(0).module +
    "<br/>Room No: " + results.rows.item(0).room +
    "<br/>URL:" + results.rows.item(0).url + 
    "<b/r><a href='#' data-role='button' data-theme='d' onclick='openURL(\"" 
    + results.rows.item(0).url + "\")'>Open URL</a>" +
    "</br><a href='#' data-role='button'  onclick='deleteEntry(\"" 
    + results.rows.item(0).id + "\")'>Delete Entry</a>";

$('#infoPara').html(output);
$.mobile.changePage( "index.html#moduleinfo", { transition: "slide"} ); 
```

页面 HTML

```
<div data-role="primary-content" id="modinfo">
    <p id="infoPara"></p>
</div> 
```

很确定我的问题与这个问题有关：
[How to get jQuery mobile magic to work in "pageshow" event handler? (JQM 1.1.0)](https://stackoverflow.com/questions/11168889/how-to-get-jquery-mobile-magic-to-work-in-pageshow-event-handler-jqm-1-1-0?answertab=active#tab-top)

谢谢！

# apache - 从 example.com 重定向到 www.example.com

> ID：13100658
> 
> 赞同：3
> 
> 时间：2012-10-27T13:38:28.030
> 
> 标签：apache, url-rewriting, http-redirect

我的网站使用 AJAX，当我使用它来访问功能时，似乎我必须包含完整路径。这很好，因为我可以对其进行编码。问题是，我已经硬编码了[http://www.example.com](http://www.example.com) ...但是如果用户访问了[http://example.com](http://example.com)（没有 www）这个出现访问问题，AJAX 不会执行。

我认为解决这个问题的最简单方法是确保如果用户访问 mysite.com，他们会被重定向到`www.example.com`.

我可以在网上找到解决方案，但它们都涉及我的服务器不支持的 htaccess 文件——我必须改用 rewrite.script。

我如何使用 rewrite.script 来做到这一点，或者有没有其他方法可以解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T11:50:59.943

感谢您的建议 - 我被定向到此：[http](http://seo-website-designer.com/Zeus-Server-301-Redirect-Generator) : //seo-website-designer.com/Zeus-Server-301-Redirect-Generator 它创建了我需要的 rewrite.script 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T13:46:49.773

在根文档中找到的 .htaccess 中：

```
Redirect http://example.com/ http://www.example.com/ 
```

如果您的服务器上不支持 .htaccess，您可能必须在页面头部包含元标记重定向。或使用 javascript 检查 URL 源然后重定向它。

# php - 使用 XAMPP 1.8.0、MercuryMail 和 mail() 在收件箱中没有收到邮件

> ID：13100659
> 
> 赞同：6
> 
> 时间：2012-10-27T13:38:40.870
> 
> 标签：php, email, smtp, xampp, sendmail.exe

我使用包含 Apache 2.4.2、PHP 5.4.5 和 MySQL 5.5 的 XAMPP 1.8.0 升级了我的本地服务器。我通过运行 MercuryMail 使用 PHP mail() 函数发送邮件，但我的收件箱中没有收到电子邮件。
当我使用 Mozilla Thunderbird 进行测试时，发送邮件正常。并且 mail() 函数似乎没有发出错误。

我在我的 XAMPP 安装路径**D:\xampp\php**中检查了**php.ini**。我在下面看到了这个

 **```
[mail function]  
; XAMPP: Comment out this if you want to work with an SMTP Server like Mercury  
; SMTP = localhost  
; smtp_port = 25  

; For Win32 only.  
; http://php.net/sendmail-from  
; sendmail_from = postmaster@localhost  

; XAMPP IMPORTANT NOTE (1): If XAMPP is installed in a base directory with spaces (e.g. c:\program filesD:\xampp) fakemail and mailtodisk do not work correctly.  
; XAMPP IMPORTANT NOTE (2): In this case please copy the sendmail or mailtodisk folder in your root folder (e.g. C:\sendmail) and use this for sendmail_path.    

; XAMPP: Comment out this if you want to work with fakemail for forwarding to your mailbox (sendmail.exe in the sendmail folder)  
; sendmail_path = "\"D:\xampp\sendmail\sendmail.exe\" -t"  

; XAMPP: Comment out this if you want to work with mailToDisk, It writes all mails in the D:\xampp\mailoutput folder  
; sendmail_path = "D:\xampp\mailtodisk\mailtodisk.exe" 
```

我调整了一些 SMTP 设置的组合。
我注释掉了主机和端口

```
; XAMPP: Comment out this if you want to work with an SMTP Server like Mercury  
SMTP = localhost  
smtp_port = 25 
```

我注释掉了**sendmail_path**，但它没有用。无法发送邮件。

```
; XAMPP: Comment out this if you want to work with fakemail for forwarding to your mailbox (sendmail.exe in the sendmail folder)  
sendmail_path = "\"D:\xampp\sendmail\sendmail.exe\" -t" 
```

再次，我注释掉了另一个 sendmail_path 以使用 mailToDisk

```
; XAMPP: Comment out this if you want to work with mailToDisk, It writes all mails in the D:\xampp\mailoutput folder  
sendmail_path = "D:\xampp\mailtodisk\mailtodisk.exe" 
```

它似乎工作，但收件箱中没有收到邮件。在**D:\xampp\mailoutput中找不到任何内容**

在 php 邮件日志 (D:\xampp\php\logs\php_mail.log) 中，我发现了几行可能表明正在发送邮件的日志行。

```
mail() on [D:\xampp\htdocs\....:127]: To: sithu@localhost.com -- Headers: MIME-Version: 1.0  Content-type: text/html; charset=text/html  Return-Path:Sithu <stk@localhost.com>  From: Sithu <stk@localhost.com>  Reply-To: Sithu <stk@localhost.com>  
mail() on [D:\xampp\htdocs\....:127]: To: test@localhost.com -- Headers: MIME-Version: 1.0  Content-type: text/html; charset=text/html  Return-Path:admin@localhost.com  From: admin@localhost.com  Reply-To: admin@localhost.com  
mail() on [D:\xampp\htdocs\....:127]: To: test@localhost.com -- Headers: MIME-Version: 1.0  Content-type: text/html; charset=text/html  Return-Path:Members <admin@localhost.com>  From: Members <admin@localhost.com>  Reply-To: Members <admin@localhost.com> 
```

我也尝试注释掉**sendmail_from**，但没有运气。

```
; For Win32 only.  
; http://php.net/sendmail-from  
sendmail_from = postmaster@localhost 
```

我仍然缺少任何配置吗？

**[编辑]**
Mercury 邮件服务器正在运行。
每当我更新**php.ini**时，我都会重新启动 Apache 服务器。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-19T14:56:43.810

我只需要配置**D:\xampp\sendmail\sendmail.ini** 默认包含该行

```
smtp_server=mail.mydomain.com 
```

我不得不把它改成

```
smtp_server=localhost 
```

无需在旧版本的 XAMPP 中进行配置。**D:\xampp\php\php.ini**中
的正确配置 是`[mail function]`

 **```
; XAMPP: Comment out this if you want to work with an SMTP Server like Mercury
SMTP = 127.0.0.1
smtp_port = 25

; XAMPP IMPORTANT NOTE (1): If XAMPP is installed in a base directory with spaces (e.g. c:\program filesD:\xampp) fakemail and mailtodisk do not work correctly.
; XAMPP IMPORTANT NOTE (2): In this case please copy the sendmail or mailtodisk folder in your root folder (e.g. C:\sendmail) and use this for sendmail_path.  

; XAMPP: Comment out this if you want to work with fakemail for forwarding to your mailbox (sendmail.exe in the sendmail folder)
sendmail_path = "\"D:\xampp\sendmail\sendmail.exe\" -t"

; XAMPP: Comment out this if you want to work with mailToDisk, It writes all mails in the D:\xampp\mailoutput folder
; sendmail_path = "D:\xampp\mailtodisk\mailtodisk.exe" 
```

现在，我正在收件箱中接收邮件。请注意，“D:\xampp\”是我的 XAMPP 安装路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T13:42:30.727

确保水星邮件服务器正在运行，它默认不运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T05:57:20.080

```
#GMAIL mit XAMPP 1.8.1 und sendmail
[CODE]
[sendmail]
; HOTMAIL
smtp_server=smtp.gmail.com
smtp_port=25
smtp_ssl=tls
tls_certcheck off
error_logfile=error.log
debug_logfile=debug.log
auth_username= xxxx.xxxx@gmail.com
auth_password=xxxxxxx

 this settings in php.ini   
 [mail function]
    ; XAMPP: Comment out this if you want to work with an SMTP Server like Mercury
    ; SMTP = smtp.gmail.com
    ; smtp_port = 25

    ; For Win32 only.
    ; http://php.net/sendmail-from
    sendmail_from = xxxx.xxxx@gmail.com

    ; XAMPP IMPORTANT NOTE (1): If XAMPP is installed in a base directory with spaces (e.g. c:\program filesC:\xampp) fakemail and mailtodisk do not work correctly.
    ; XAMPP IMPORTANT NOTE (2): In this case please copy the sendmail or mailtodisk folder in your root folder (e.g. C:\sendmail) and use this for sendmail_path.  

    ; XAMPP: Comment out this if you want to work with fakemail for forwarding to your mailbox (sendmail.exe in the sendmail folder)
    sendmail_path = "\"C:\sendmail\sendmail.exe\" -t"

    ; XAMPP: Comment out this if you want to work with mailToDisk, It writes all mails in the C:\xampp\mailoutput folder
    ;sendmail_path = "C:\xampp\mailtodisk\mailtodisk.exe"

    ; Force the addition of the specified parameters to be passed as extra parameters
    ; to the sendmail binary. These parameters will always replace the value of
    ; the 5th parameter to mail(), even in safe mode.
    ;mail.force_extra_parameters =

    ; Add X-PHP-Originating-Script: that will include uid of the script followed by the filename
    mail.add_x_header = Off

    ; Log all mail() calls including the full path of the script, line #, to address and headers
    mail.log = "C:\xampp\php\logs\php_mail.log" 
```****

# xamarin.android - 从 monodroid 类库访问资产

> ID：13100666
> 
> 赞同：2
> 
> 时间：2012-10-27T13:39:28.680
> 
> 标签：xamarin.android, assets

是否可以从引用类库的 monodroid 应用程序中的 monodroid 类库访问文件（使用构建操作“AndroidAsset”）？

我在类库中创建了一个“Assets”文件夹并添加了一个带有构建操作“AndroidAsset”的文本文件，但是从应用程序中我无法通过 Assets.Open("file.txt");

我希望类库和主应用程序中的资产可以以某种方式“合并”......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T22:46:45.097

不——你不能从类库中访问资产——只能从主 exe 项目中访问。

这类似于 Java Android 项目的情况。

* * *

解决这个问题的一种方法可能是使用嵌入式资源 - 请参阅我在 xamarin 论坛上提出的这个问题的答案 - [http://forums.xamarin.com/discussion/186/is-there-a-cross-platform-way- to-include-string-resources-from-class-library-projects](http://forums.xamarin.com/discussion/186/is-there-a-cross-platform-way-to-include-string-resources-from-class-library-projects) - 请注意，我还没有尝试过这个

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T19:02:09.430

> 是否可以从引用类库的 monodroid 应用程序中的 monodroid 类库访问文件（使用构建操作“AndroidAsset”）？

是的。[只需通过Context.Assets.Open](http://androidapi.xamarin.com/?link=M%3aAndroid.Content.Res.AssetManager.Open%28System.String%29) “正常”访问它们。应用程序中只有一个资产来源，因此任何组件都可以访问任何和所有资产，只要它们有权访问`AssetManager`实例。

*但是*，这只是您所要求的表面价值。图书馆项目可以使用该`Context.Assets`属性吗？当然，如果你提供一个`Context`实例。

但是图书馆项目*可以提供*它自己的资产以包含在应用程序中吗？不。

> 我在类库中创建了一个“Assets”文件夹并添加了一个带有构建操作“AndroidAsset”的文本文件，但是从应用程序中我无法通过 Assets.Open("file.txt");

图书馆项目不能提供将包含在更大的应用程序中的资产。Java也不支持这个，afaik。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-24T03:23:15.303

## 要记住的事情

1 Build Action 是**AndroidAsset** (Properties)

2 复制到输出目录**不要复制**（属性）

3 将文件添加到**Assets**文件夹

```
var destinationPath = Path.Combine(System.Environment.GetFolderPath(System.Environment.SpecialFolder.Personal), "yourfilename.txt");
            using (Stream source = Assets.Open("yourfilename.txt"))
            using (var dest = System.IO.File.Create (destinationPath)) {
                source.CopyTo (dest);
            } 
```

有时这仍然会失败，monodroid bug。最好的办法是检查文件是否正确包含。

```
Load up Eclipse, in the device browser, you should see your simulator.  
Go to the directory data/app/    download the file yourappname.apk
This is just a zip file, so change the extension to .zip and open the
zip archive. And goto the folder /assets and see if the file you are trying 
to load is in there. 
```

此外，如果您尝试从测试的物理设备上获取文件，有些允许，有些则不允许。这是最容易在模拟器上测试的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-02T10:53:23.097

可以从库中访问资产文件：

```
var sourcePath = System.Environment.GetFolderPath(System.Environment.SpecialFolder.Personal);
//var files = Directory.GetFiles(sourcePath);
var filePath = Path.Combine(sourcePath, "MyAssetFile.bin");
var content = File.ReadAllBytes(filePath); 
```

# php - 可在 Chrome、Firefox 和 Safari 中运行但不能在 IE 或 Opera 中运行的代码

> ID：13100677
> 
> 赞同：0
> 
> 时间：2012-10-27T13:41:22.677
> 
> 标签：php, html, browser, pdo, mysqli

我的应用程序发生了一些奇怪的事情。下面是我的代码，其中用户在文本输入中输入 courseid 并提交文本输入。如果它从数据库中找到课程，则显示找到课程的回声，否则表明课程未找到。现在这适用于所有浏览器（IE、Opera、Safari、Firefox 和 Chrome）。下面是这个的代码：

```
<h1>CREATING A NEW ASSESSMENT</h1>

<form action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>" method="post">
<p>Course ID: <input type="text" name="courseid" /><input id="courseSubmit" type="submit" value="Submit" name="submit" /></p>      <!-- Enter User Id here-->
</form>

<?php
if (isset($_POST['submit'])) {

$query = "
SELECT cm.CourseId, cm.ModuleId, 
c.CourseName,
m.ModuleName
FROM Course c
INNER JOIN Course_Module cm ON c.CourseId = cm.CourseId
JOIN Module m ON cm.ModuleId = m.ModuleId
WHERE
(c.CourseId = ?)
ORDER BY c.CourseName, m.ModuleId
";

$qrystmt=$mysqli->prepare($query);
// You only need to call bind_param once
$qrystmt->bind_param("s",$courseid);
// get result and assign variables (prefix with db)

$qrystmt->execute(); 

$qrystmt->bind_result($dbCourseId,$dbModuleId,$dbCourseName,$dbModuleName);

$qrystmt->store_result();

$num = $qrystmt->num_rows();

if($num ==0){
echo "<p>Sorry, No Course was found with this Course ID '$courseid'</p>";
} else { 

echo "<p>Course Found: '$courseid'</p>";

} 
```

但现在我决定更改设置，因此他们可以从下拉菜单中选择课程 ID，而不是在文本输入中输入 courseID。所以我把代码改成下面这样：

```
$sql = "SELECT CourseId, CourseName FROM Course"; 

$sqlstmt=$mysqli->prepare($sql);

$sqlstmt->execute(); 

$sqlstmt->bind_result($dbCourseId, $dbCourseName);

$courses = array(); // easier if you don't use generic names for data 

$courseHTML = "";  
$courseHTML .= '<select name="courses" id="coursesDrop">'.PHP_EOL; 
$courseHTML .= '<option value="">Please Select</option>'.PHP_EOL;  

while($sqlstmt->fetch()) 
{ 
$course = $dbCourseId;
$coursename = $dbCourseName; 
$courseHTML .= "<option value='".$course."'>" . $course . " - " . $coursename . "</option>".PHP_EOL;  
} 

$courseHTML .= '</select>'; 
$courseHTML .= '</form>'; 

?>

<h1>CREATING A NEW ASSESSMENT</h1>

<form action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>" method="post">
<table>
<tr>
<th>Course: <?php echo $courseHTML; ?><input id="courseSubmit" type="submit" value="Submit" name="submit" /></th>
</tr>
</table>
</form>

<?php
if (isset($_POST['submit'])) {

$submittedCourseId = $_POST['courses'];

$query = "
SELECT cm.CourseId, cm.ModuleId, 
c.CourseName,
m.ModuleName
FROM Course c
INNER JOIN Course_Module cm ON c.CourseId = cm.CourseId
JOIN Module m ON cm.ModuleId = m.ModuleId
WHERE
(c.CourseId = ?)
ORDER BY c.CourseName, m.ModuleId
";

$qrystmt=$mysqli->prepare($query);
// You only need to call bind_param once
$qrystmt->bind_param("s",$submittedCourseId);
// get result and assign variables (prefix with db)

$qrystmt->execute(); 

$qrystmt->bind_result($dbCourseId,$dbModuleId,$dbCourseName,$dbModuleName);

$qrystmt->store_result();

$num = $qrystmt->num_rows();

if($num ==0){
echo "<p style='color: red'>Please Select a Course</p>";
} else { 

echo "<p style='color: green'>Course Found '$courseid'</p>";

} 
```

但这很奇怪，下拉菜单在 Chrome、Firefox 和 Safari 中有效，但在 Opera 和 IE 中无效。那么我的问题是，第二个代码块中有什么东西阻止它在 IE 或 Opera 中工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T13:46:20.290

删除`$courseHTML .= '</form>';`，它会工作。

事实是当您在表单中添加`</form>`和`$coureseHTML`添加它时。表单结束标记完成表单。并且其余代码不属于表单。这里，`<input id="courseSubmit" type="submit" value="Submit" name="submit" />`不属于前面的形式。所以单击此按钮将不起作用。它不应该在任何浏览器中工作。可能是幸运地在 chrome、firefox 和 safari 上工作。

# android - 如何使这个静态

> ID：13100680
> 
> 赞同：0
> 
> 时间：2012-10-27T13:41:46.247
> 
> 标签：android, andar

```
public static Bitmap bmp;
bmp = BitmapFactory.decodeResource(this.getResources(), R.drawable.nehe); 
```

上面代码的错误“令牌上的语法错误“;”，，预期”我已经在后面加上了一个分号，`bmp`但仍然发生错误

这是完整的代码：

```
public class CustomActivity extends AndARActivity {

ARToolkit artoolkit;
CustomObject someObject;
CustomObject1 someObject1;

public static Bitmap bmp = BitmapFactory.decodeResource(this.getResources(), R.drawable.nehe);  

@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    CustomRenderer renderer = new CustomRenderer();     

    super.setNonARRenderer(renderer);

    try {
        //register a object for each marker type
        artoolkit = super.getArtoolkit();

        someObject = new CustomObject
            ("test", "androidpirate.patt", 80.0, new double[]{0,0});
        artoolkit.registerARObject(someObject);

        someObject = new CustomObject
        ("test", "andson.patt", 80.0, new double[]{0,0});
        artoolkit.registerARObject(someObject);

        someObject1 = new CustomObject1("test","andrev.patt", 80.0, new double[]{0,0});
        artoolkit.registerARObject(someObject1);

        someObject1 = new CustomObject1("test","androidpat.patt", 80.0, new double[]{0,0});
        artoolkit.registerARObject(someObject1);

    } catch (AndARException ex){
        //handle the exception, that means: show the user what happened
        System.out.println("");
    }       
    startPreview();
}

@Override
public void uncaughtException(Thread thread, Throwable ex) {
    Log.e("AndAR EXCEPTION", ex.getMessage());
    finish();
}   
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T13:54:25.483

`public`声明只能用于类变量，不能用于函数变量

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T14:24:34.390

您在静态上下文中调用“this”，“this”指的是类*实例对象*，因此以静态方式使用它不是有效的 Java 语法。此外，在调用 onCreate(Bundle) 方法之前，我认为“this.getResources()”不会返回任何内容，但会返回 null。

您应该执行以下操作：

```
public static Bitmap bmp;

public void onCreate(Bundle savedInstanceState) {
    if(bmp!=null) {
        BitmapFactory.decodeResource(this.getResources(), R.drawable.nehe);
    }
...other code here 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T13:45:13.363

```
public static Bitmap bmp =
    BitmapFactory.decodeResource(this.getResources(), R.drawable.nehe); 
```

或者

```
public static Bitmap bmp;

static {
    bmp = BitmapFactory.decodeResource(this.getResources(), R.drawable.nehe);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-27T13:46:05.600

如果您在方法中编写这些语句，则`public`不是局部变量的有效访问修饰符。

如果您在类中的方法之外编写这些语句，则应将这些语句组合如下：

```
public Bitmap bmp = 
    BitmapFactory.decodeResource(this.getResources(), R.drawable.nehe); 
```

这是因为，在方法或块之外只允许使用初始化器，但不允许像第二个语句那样的赋值语句。

由于您似乎依赖于`getResources()`成员方法的返回值，因此 bmp 不能是静态的。`getResources()`此外，最好仅在确定方法的返回值有意义时才初始化 bmp 。您应该从您的课程中展示更多代码以获得更好的帮助。

# shell - 在 shell 脚本中查找具有多个链接的文件

> ID：13100686
> 
> 赞同：0
> 
> 时间：2012-10-27T13:42:25.220
> 
> 标签：shell

我想找到具有多个链接的文件。我正在使用 ubuntu 10.10。

```
find -type l 
```

它将显示文件的所有链接，但我想计算特定文件的链接。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T14:45:21.267

使用此命令，您将获得链接文件的摘要：

```
find . -type l -exec readlink -f {} \; | sort | uniq -c | sort -n 
```

或者

```
find . -type l -print0 | xargs -n1 -0 readlink -f | sort | uniq -c | sort -n 
```

# c++ - C++：调用抽象函数的递归函数

> ID：13100689
> 
> 赞同：0
> 
> 时间：2012-10-27T13:42:47.997
> 
> 标签：c++, abstract

我想知道如何使用 C++ 调用抽象类的递归函数。

```
 //A.h
        class A {
    public: 
    virtual void some() = 0 ; 

    };

    //B.h
       #include "A.h"
    class B : public A {
    public:
     void some() ; 

    };

    // B.cpp

    void B::some(){
  system("pause"); 
 } ; 

    //C.h
  #include "B.h" 
class C : public B  {
public:
static void callF() ; 

};

    // C.cpp

    void C::callF(){ 
    some(); 
```

} ;

我已经编辑了代码。还是行不通。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T13:48:04.640

在 A 和 B 中，函数应该是公共的或受保护的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T13:46:15.003

只需`somefunction()`在体内使用，`C::callingF()`例如

```
void C::callingF() 
{
   if (somecondition) 
     somefunction();
} 
```

你可以使用`ptr->somefunction()`if`ptr`是指向 some 的指针，`C`或者`B`是指向 some`A`

但是，请花几个小时阅读一本关于 C++ 编程语言的好书。我们无法在几分钟内解释它。一本书解释得更好...

# entity-framework - 实体框架代码首先删除没有父实体的实体

> ID：13100690
> 
> 赞同：1
> 
> 时间：2012-10-27T13:42:55.187
> 
> 标签：entity-framework, entity-framework-4.1, ef-code-first, cascade

我有两个实体用户和电话。关系是一对一的。映射是

```
public class User 
{
    public virtual Phone Phone { get; set;}

    public virtual int PhoneId { get; set;}
}

public class Phone 
{
    public virtual string Number { get; set;}
} 
```

我的用户映射是：

```
HasRequired(x => x.Phone).WithMany().HasForeignKey(x => x.PhoneId) 
```

我有分配电话的用户。铁

```
Phone oldPhone = new Phone();
Phone newPhone = new Phone();
User user = new User();
user.Phone = old;

///Save user with phone.

user.Phone = newPhone;
///Save user  with phone. 
```

现在我有分配电话的用户 - newPhone 并且未在数据库中分配 oldPhone 行。

如何设置映射以删除没有父级（oldPhone）的实体。

已编辑。

我已根据本文将映射[更改](http://weblogs.asp.net/manavi/archive/2010/12/19/entity-association-mapping-with-code-first-one-to-one-shared-primary-key-associations.aspx)为

```
 HasRequired(x => x.Phone).WithOptional(); 
```

为了保存，我使用这种方法：

```
public override void Save(TEntity entity)
        {
            if (entity == null)
            {
                throw new ArgumentNullException("entity");
            }

            if (entity.Id > 0)
            {
                DbContext.Set<TEntity>().Attach(entity);
                DbContext.Entry(entity).State = System.Data.EntityState.Modified;
            }
            else
            {
                DbContext.Set<TEntity>().Add(entity);   
            }            
        } 
```

当我附加新实体时，旧实体不会从数据库中删除，所以在我的示例中，我在数据库 oldPhone 和 newPhone 中有两个实体。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T10:11:55.690

我不知道如何通过 EF 中的映射来做到这一点。对于我的一个项目，我制作了一个 Parent 属性，我可以在 Save 上进行检查。我想你可以在这里使用它。我已经用代码写了一篇博客文章；[使用 parentvalidator 扩展实体框架 4](http://wimpool.nl/blog/DotNet/extending-entity-framework-4-with-parentvalidator)。它需要将 User 属性添加到 Phone 实体。

```
[Parent]
public virtual User User { get; set;} 
```

# objective-c - NSInvalidArgumentException/EXC_BAD_ACCESS 与 UICollectionView

> ID：13100692
> 
> 赞同：2
> 
> 时间：2012-10-27T13:43:11.263
> 
> 标签：objective-c, cocoa-touch, uiscrollview, exc-bad-access, uicollectionview

我有一个实现 UICollectionView 的视图控制器（它是委托、数据源和流布局委托）。我在下一个滚动视图上显示它：

```
 UIViewController *playlistController = [[TNSPlaylistsController alloc] initWithNibName:@"TNSPlaylistsController" bundle:nil];
   [self.scrollView addSubview:playlistController.view]; 
```

TNSPlaylistsController.h：

```
#import <UIKit/UIKit.h>

@interface TNSPlaylistsController : UIViewController <UICollectionViewDataSource, UICollectionViewDelegate, UICollectionViewDelegateFlowLayout>

@end 
```

TNSPlaylistsController.m:

```
#import "TNSPlaylistsController.h"

@interface TNSPlaylistsController () <UICollectionViewDataSource, UICollectionViewDelegate, UICollectionViewDelegateFlowLayout> // tried removing these on the m too

@end

@implementation TNSPlaylistsController
@synthesize musicStructure = _musicStructure, collectionView = _collectionView;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (NSInteger)collectionView:(UICollectionView *)view numberOfItemsInSection:(NSInteger)section {
    return [self.musicStructure count];
}

- (UICollectionViewCell *)collectionView:(UICollectionView *)cv cellForItemAtIndexPath:(NSIndexPath *)indexPath {
    NSString *cellData = [self.musicStructure objectAtIndex:indexPath.row];

    static NSString *cellIdentifier = @"cvCell";

    UICollectionViewCell *cell = [self.collectionView dequeueReusableCellWithReuseIdentifier:cellIdentifier forIndexPath:indexPath];

    UILabel *titleLabel = (UILabel *)[cell viewWithTag:100];

    [titleLabel setText:cellData];

    return cell;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    self.musicStructure = [[NSArray alloc] initWithObjects:@"aaa",@"aaa",@"aaa",@"aaa",@"aaa",@"aaa", nil];

    UINib *cellNib = [UINib nibWithNibName:@"TNSPlaylistCell" bundle:nil];
    [self.collectionView registerNib:cellNib forCellWithReuseIdentifier:@"cvCell"];

    UICollectionViewFlowLayout *flowLayout = [[UICollectionViewFlowLayout alloc] init];
    [flowLayout setItemSize:CGSizeMake(100, 100)];
    [flowLayout setScrollDirection:UICollectionViewScrollDirectionHorizontal];

    [self.collectionView setCollectionViewLayout:flowLayout];

    NSLog(@"%@\n%@\n%@\n%@\n%@", self, self.musicStructure, self.collectionView, flowLayout, cellNib);
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

XIB 包含连接到实现文件的 UICollectionView。

问题是它在启动应用程序时独立地给出 EXC_BAD_ACCESS 或 NSInvalidArgumentException （视图控制器加载到应用程序的第一个视图上）。如果我将视图控制器呈现为普通的模态视图，它可以正常工作

**NSInvalidArgumentException**跟踪：

```
2012-10-27 15:32:47.144 Tunes[19255:c07] -[NSConcreteMapTable collectionView:numberOfItemsInSection:]: unrecognized selector sent to instance 0x76524c0
2012-10-27 15:32:47.146 Tunes[19255:c07] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[NSConcreteMapTable collectionView:numberOfItemsInSection:]: unrecognized selector sent to instance 0x76524c0'
*** First throw call stack:
(0x1598012 0x12a5e7e 0x16234bd 0x1587bbc 0x158794e 0x71b25f 0x71b2fa 0x71cbb4 0x6f4f14 0x70ab14 0x70b72b 0x707aea 0x71b38a 0x71b9cb 0x6f3273 0x23d92d 0x12b96b0 0x107fc0 0xfc33c 0x107eaf 0x2dc8cd 0x2251a6 0x223cbf 0x223bd9 0x222e34 0x222c6e 0x223a29 0x226922 0x2d0fec 0x21dbc4 0x21ddbf 0x21df55 0x226f67 0x2e75 0x1ea7b7 0x1eada7 0x1ebfab 0x1fd315 0x1fe24b 0x1efcf8 0x25fadf9 0x25faad0 0x150dbf5 0x150d962 0x153ebb6 0x153df44 0x153de1b 0x1eb7da 0x1ed65c 0x2bad 0x2ad5)
libc++abi.dylib: terminate called throwing an exception
(lldb) 
```

**EXC_BAD_ACCESS**跟踪： ![汇编代码](../Images/c7f41dbc024de9b812c1f594f3a793dd.png)

我从来没有遇到过这种错误，所以我完全迷路了。我以几乎相同的方式在其他应用程序上实现了这个 UICollectionView（除了它不在滚动视图上，而是在主视图上）。有什么问题？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T18:25:11.627

我建议您在“诊断”选项卡的“编辑方案”中启用 NSZombie。您会发现所有 EXC_BAD_ACCESS 错误。

# java - 致命异常/无法在 Android 中实例化错误

> ID：13100694
> 
> 赞同：1
> 
> 时间：2012-10-27T13:43:34.330
> 
> 标签：java, android

请看下面的代码

**activity_main.xml**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <EditText
        android:id="@+id/text"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        />

</LinearLayout> 
```

**MainActivity.java**

```
package com.example.textbox;

import android.os.Bundle;
import android.app.Activity;
import android.content.DialogInterface;
import android.view.KeyEvent;
import android.view.Menu;
import android.view.View;
import android.view.View.OnKeyListener;
import android.widget.EditText;
import android.widget.Toast;

public class MainActivity extends Activity {

    private EditText text = (EditText)findViewById(R.id.text);

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        text.setOnKeyListener(new TextMaker());
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    private class TextMaker implements OnKeyListener
    {

        String str = text.getText().toString();

        public boolean onKey(View arg0, int keyCode, KeyEvent event)
        {
            if((event.getAction() == KeyEvent.ACTION_DOWN) && (keyCode == KeyEvent.KEYCODE_ENTER))
            {
                Toast.makeText(MainActivity.this, str, Toast.LENGTH_LONG).show();
                return true;
            }
            else
            {
                return false;
            }
        }
    }
} 
```

当我运行此应用程序时，我收到以下错误

```
10-27 19:05:46.487: D/AndroidRuntime(339): Shutting down VM
10-27 19:05:46.487: W/dalvikvm(339): threadid=1: thread exiting with uncaught exception (group=0x40015560)
10-27 19:05:46.527: E/AndroidRuntime(339): FATAL EXCEPTION: main
10-27 19:05:46.527: E/AndroidRuntime(339): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.example.textbox/com.example.textbox.MainActivity}: java.lang.NullPointerException
10-27 19:05:46.527: E/AndroidRuntime(339):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1569)
10-27 19:05:46.527: E/AndroidRuntime(339):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
10-27 19:05:46.527: E/AndroidRuntime(339):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
10-27 19:05:46.527: E/AndroidRuntime(339):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
10-27 19:05:46.527: E/AndroidRuntime(339):  at android.os.Handler.dispatchMessage(Handler.java:99)
10-27 19:05:46.527: E/AndroidRuntime(339):  at android.os.Looper.loop(Looper.java:123)
10-27 19:05:46.527: E/AndroidRuntime(339):  at android.app.ActivityThread.main(ActivityThread.java:3683)
10-27 19:05:46.527: E/AndroidRuntime(339):  at java.lang.reflect.Method.invokeNative(Native Method)
10-27 19:05:46.527: E/AndroidRuntime(339):  at java.lang.reflect.Method.invoke(Method.java:507)
10-27 19:05:46.527: E/AndroidRuntime(339):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
10-27 19:05:46.527: E/AndroidRuntime(339):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
10-27 19:05:46.527: E/AndroidRuntime(339):  at dalvik.system.NativeStart.main(Native Method)
10-27 19:05:46.527: E/AndroidRuntime(339): Caused by: java.lang.NullPointerException
10-27 19:05:46.527: E/AndroidRuntime(339):  at android.app.Activity.findViewById(Activity.java:1647)
10-27 19:05:46.527: E/AndroidRuntime(339):  at com.example.textbox.MainActivity.<init>(MainActivity.java:15)
10-27 19:05:46.527: E/AndroidRuntime(339):  at java.lang.Class.newInstanceImpl(Native Method)
10-27 19:05:46.527: E/AndroidRuntime(339):  at java.lang.Class.newInstance(Class.java:1409)
10-27 19:05:46.527: E/AndroidRuntime(339):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
10-27 19:05:46.527: E/AndroidRuntime(339):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1561)
10-27 19:05:46.527: E/AndroidRuntime(339):  ... 11 more 
```

为什么是这样？请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T13:45:52.890

我们需要`EditText`在指定我们正在考虑的布局之后参考。我认为`setContentView()`可以帮助您了解我们正在考虑的布局。因此，请尝试`findViewById()`在语句之后使用 EditText 初始化`setContentView()`。

代替

```
private EditText text = (EditText)findViewById(R.id.text);

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        text.setOnKeyListener(new TextMaker());
    } 
```

和

```
private EditText text ;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        text = (EditText)findViewById(R.id.text);
        text.setOnKeyListener(new TextMaker());
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T13:46:24.573

只需`findViewById()`在您的内部使用`onCreate()`

# c# - 渲染流上的“未知错误”

> ID：13100698
> 
> 赞同：0
> 
> 时间：2012-10-27T13:44:28.247
> 
> 标签：c#, .net, directshow, video-processing, directshow.net

我已经成功地利用 directshownet DirectShow 包装器来生成视频文件的缩略图。对于许多测试实例，代码工作得**很好**。

**但是**对于某些人来说，它会在 RenderStream 函数调用中引发“未知异常”。

我一直无法追踪异常的原因，错误代码是'-2147467259'，InnerException：null。我没有太多调查COM接口故障的经验，但错误代码似乎没有形成任何逻辑值。

我的第一个想法是缺乏适当的编解码器等。但是问题仍然存在于几台测试机器上，大多数流行的编解码器包都已安装（ffdshow、k-lite 编解码器包等）。该视频在应用程序之外也可以正常播放。

这些机器运行的是x64版本的windows（windows 7和win server 2008 r2），已经安装了x64版本的ffdshow编解码器包，然后进行了其他设置，例如安装了32位版本的ffdshow，以及在x64中编译测试应用程序与 x86 构建模式一样。在示例剪辑上始终失败。还尝试在 FFDSHOW 设置面板中启用/禁用特定编解码器，特别是查看 h264 的。没有什么。有问题的示例视频使用以下规范进行编码：v-codec:H264 - MPEG-4 AVC (part 10) avc1 Resolution:1280x768 FPS:23..

我认为构建 Graph 的代码很好，因为它适用于很多测试用例，但是这里是：

```
 private void SetupGraph( string FileName)
 {
     int hr;

     // Get the graphbuilder object
     m_FilterGraph = new FilterGraph() as IFilterGraph2;

     // Get a ICaptureGraphBuilder2 to help build the graph
     ICaptureGraphBuilder2 icgb2 = new CaptureGraphBuilder2() as ICaptureGraphBuilder2;

     try
     {
         // Link the ICaptureGraphBuilder2 to the IFilterGraph2
         hr = icgb2.SetFiltergraph(m_FilterGraph);
         DsError.ThrowExceptionForHR(hr);

         // Add the filters necessary to render the file.  This function will
         // work with a number of different file types.
         IBaseFilter sourceFilter = null;

         hr = m_FilterGraph.AddSourceFilter(FileName, null, out sourceFilter);
         DsError.ThrowExceptionForHR(hr);

         // Get the SampleGrabber interface
         m_sampGrabber = (ISampleGrabber)new SampleGrabber();
         IBaseFilter baseGrabFlt = (IBaseFilter)m_sampGrabber;

         // Configure the Sample Grabber
         ConfigureSampleGrabber(m_sampGrabber);

         // Add it to the filter
         hr = m_FilterGraph.AddFilter(baseGrabFlt, "Ds.NET Grabber");
         DsError.ThrowExceptionForHR(hr);

         // Connect the pieces together, use the default renderer
         hr = icgb2.RenderStream(null, null, sourceFilter, baseGrabFlt, null);
         DsError.ThrowExceptionForHR(hr); // **HERE** is where the 'unknown exception' is thrown.

         // Now that the graph is built, read the dimensions of the bitmaps we'll be getting
         SaveSizeInfo(m_sampGrabber);

         // Configure the Video Window
         IVideoWindow videoWindow = m_FilterGraph as IVideoWindow;
         videoWindow.put_AutoShow(OABool.False);
         // ConfigureVideoWindow(videoWindow, hWin);
         //
         // Grab some other interfaces
         m_mediaEvent = m_FilterGraph as IMediaEvent;
         m_mediaCtrl = m_FilterGraph as IMediaControl;
         m_mediaSeeking = m_FilterGraph as IMediaSeeking;
         m_mediaSample = m_FilterGraph as IMediaSample;
         m_mediaPosition = m_FilterGraph as IMediaPosition;

     }
     catch
     { }
     finally
     {
         if (icgb2 != null)
         {
             Marshal.ReleaseComObject(icgb2);
             icgb2 = null;
         }
     }

 } 
```

仍在尝试缩小问题范围。任何评论都将不胜感激，因为我已经没有想法了。 **更新**：似乎问题可以更具体：如何修改上图以使 DirecShow utlize h264 编解码器在系统上可用？从表面上看，它不会自行发生。另一个我认为值得更新的内容：我已经深入研究了构建 grapsh 等主题。我还下载了 GrapStudio 软件以使用不同的过滤器设置。**但是**，一旦我选择了“渲染媒体文件”子菜单并将其指向有问题的视频，它就会显示“无法渲染文件”！仅此而已，视频文件在 Windows 媒体播放器或 VLC 中播放得很好。它使用 FFDSHOW 提供的 h264video 编解码器进行编码。

另一个更新：我已经设法使用 K-Lite 编解码器包 x64 制作了 GraphStudio 渲染电影（文件->渲染媒体文件）。该图已构建（使用 LAV Video Decoder）。我的应用程序仍然无法自动生成图表，尽管它也针对 x64 平台并且从我读过的 GraphStudio 中调用了相同的 API 函数。这很奇怪。所以我决定建立一个半自动图。

```
 Guid gui = new Guid("EE30215D-164F-4A92-A4EB-9D4C13390F9F");
Object o;
ty = Type.GetTypeFromCLSID(gui);
o = Activator.CreateInstance(ty, false);
IBaseFilter ibfVideoDec = (IBaseFilter)o;
hr=m_FilterGraph.AddFilter(ibfVideoDec, "LAV Video decoder");
DsError.ThrowExceptionForHR(hr); 
```

在添加我需要的其他过滤器时，然后调用 RenderFile。没有什么。所有过滤器均由其相应的 CLSID 初始化，没有错误。它不会渲染。有人吗？如果您问我 DirectShowNet 或 DirectShow 整体在使用现代编解码器等方面的文档非常丰富。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T01:53:31.420

错误是`0x80004005` `E_FAIL`“未指定的错误”。图形生成器会从某些内部组件向您转发错误，而不会向您提供详细信息。如果不以更精细的步骤构建图表，就无法找到原因。它可以是任何东西，包括系统中出现故障的第三方组件（这很可能是您安装的编解码器包一个接一个）。分解`RenderStream`成个体`Connect`s和`AddFitler`s会解释原因。

# java - android open socket在设备上崩溃，适用于AVD

> ID：13100700
> 
> 赞同：0
> 
> 时间：2012-10-27T13:44:30.953
> 
> 标签：java, android, sockets

我尝试使用套接字创建客户端-服务器应用程序。我已经用 AVD 成功地做到了这一点，并在我的电脑上运行服务器和客户端。但是当我尝试让它在我设备上的同一个 Wifi 网络中工作时，应用程序就会崩溃。

是的，我正在使用单独的线程进行连接，并且已经将 Internet 的使用添加到清单中。

这是一些代码...

客户端线程：

```
package com.mainlauncher;

import java.io.*;
import java.net.*;

public class ConnectionThread extends Thread {

private static final int SERVERPORT = 7777;
private static final String SERVERADDRESS = "My-PC";
private Socket socket;
private DataInputStream in;
private DataOutputStream out;

@Override
public void run() {
    super.run();
    open();
    close();
}

void open(){
    try{
        socket = new Socket(SERVERADDRESS,SERVERPORT);
        in = new DataInputStream(socket.getInputStream());
        out = new DataOutputStream(socket.getOutputStream());
    }
    catch(IOException e){}
}

void close(){
    try {
        if(in!=null)
            in.close();
        if(out!=null)
            out.close();
        if(socket!=null)
            socket.close();
    } 
    catch (IOException e) {}
    socket=null;

}

} 
```

服务器端主要：

```
import java.io.IOException;
import java.net.*;

public class Main {

public static void main(String[] args) {
    int port = 7777;
    new Main().handleClients(port);
}

private void handleClients(int port) {
    ServerSocket serverSocket = null;
    try{
        serverSocket = new ServerSocket(port);
        System.out.println("Server is ready...");
        for(int i=1; ; i++){
            Socket socket = serverSocket.accept();
            ServerThread thread = new ServerThread(i,socket);
            System.out.println(i + " Connected");
            thread.run();
        }
    }
    catch (Exception e){
        System.err.println(e.getMessage());
    }
    finally{
        if(serverSocket != null){
            try{ serverSocket.close(); }
            catch(IOException x){}
        }

    }

}

} 
```

和服务器线程：

```
import java.io.*;
import java.net.*;

public class ServerThread extends Thread {

private int serverIndex;
private Socket socket;
private DataOutputStream out;
private DataInputStream in;

public ServerThread (int serverIndex, Socket socket){
    this.serverIndex = serverIndex;
    this.socket = socket;
}

@Override
public void run() {
    super.run();

    try {
        in = new DataInputStream(socket.getInputStream());
        out = new DataOutputStream(socket.getOutputStream());
    } catch (IOException e) {
        System.out.println(serverIndex + " Disconnected");
    }

    finally{
        try {
            in.close();
            out.close();
            socket.close();
        } catch (IOException e) {}
    }
}
} 
```

我试着在这里寻找答案\谷歌等......没有任何帮助。没有防火墙或任何东西可以阻止我电脑上的传入连接。

有什么想法吗？

谢谢， 利奥兹

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T13:56:38.213

这不会立即解决您的问题，但是您有几个错误会导致您的程序丢弃真正问题的证据。

1）这只是压制了异常，丢弃了它曾经发生过的所有证据。

```
 catch(IOException e){} 
```

2）这有点好，但它只打印出异常消息......而不是堆栈跟踪。

```
 catch (Exception e){
        System.err.println(e.getMessage());
    } 
```

2) 的另一个问题是它捕获所有异常......而不仅仅是 IOExceptions。这包括未经检查的异常，例如`NullPointerException`，`SecurityException`等等。

应该像这样诊断异常：

```
 catch (IOException e){
        e.printStackTrace();
    } 
```

或登录。

* * *

最后，您处理请求的方式是错误的：

```
 Socket socket = serverSocket.accept();
    ServerThread thread = new ServerThread(i,socket);
    System.out.println(i + " Connected");
    thread.run(); 
```

错误出现在最后一条语句中。这实际上是在当前线程中简单地调用`thread`对象的`run()`方法......。要在不同的线程中运行该`run()`方法，您需要调用该`start`方法。像这样：

```
 Socket socket = serverSocket.accept();
    ServerThread thread = new ServerThread(i,socket);
    System.out.println(i + " Connected");
    thread.start(); 
```

# c++ - c++ 11中的运算符模数变化？

> ID：13100711
> 
> 赞同：11
> 
> 时间：2012-10-27T13:46:12.850
> 
> 标签：c++, c++11, language-lawyer, modulo, c++03

> **可能重复：**
> [C++ 运算符 % 保证](https://stackoverflow.com/questions/12710801/c-operator-guarantees)

在 C++ 98/03 中

5.6-4

> 二元 / 运算符产生商，二元 % 运算符产生第一个表达式除以第二个表达式的余数。如果 / 或 % 的第二个操作数为零，则行为未定义；否则 (a/b)*b + a%b 等于 a。**如果两个操作数都是非负数，则余数是非负数；如果不是，则余数的符号是​​ implementation-defined**。

在 C++ 11 中：

5.6 -4

> 二元 / 运算符产生商，二元 % 运算符产生第一个表达式除以第二个表达式的余数。如果 / 或 % 的第二个操作数为零，则行为未定义。对于整数操作数，/ 运算符产生代数商，其中任何小数部分被丢弃；81 如果商 a/b 可以用结果类型表示，则 (a/b)*b + a%b 等于 a。

如您所见，缺少为符号位定义的实现，它会发生什么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-27T13:57:08.603

的行为`%`在 C++11 中得到了加强，现在已经完全指定（除了除以`0`）。

向零截断和恒等式的组合`(a/b)*b + a%b == a`意味着`a%b`对正数始终为正`a`，对负数始终为负`a`。

* * *

其数学原因如下：

设`÷`数学除法，`/`C++除法。

对于任何 a 和 b，我们有`a÷b = a/b + f`（其中 f 是小数部分），并且根据标准，我们也有`(a/b)*b + a%b == a`.

`a/b`已知向 截断`0`，所以我们知道如果`a÷b`为正，小数部分将始终为正，负`a÷b`为负：

`sign(f) == sign(a)*sign(b)`

`a÷b = a/b + f`可以重新排列给`a/b = a÷b - f`。`a`可以展开为`(a÷b)*b`：

`(a/b)*b + a%b == a`=> `(a÷b - f)*b+a%b == (a÷b)*b`。

现在左侧也可以展开：

`(a÷b)*b - f*b + a%b == (a÷b)*b`

`a%b == f*b`

回想一下之前的`sign(f)==sign(a)*sign(b)`，所以：

`sign(a%b) == sign(f*b) == sign(a)*sign(b)*sign(b) == sign(a)`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-27T14:08:22.003

算法说`(a/b)*b + a%b = a`，如果你记得它是`truncate(a/b)*b + a%b = a` 使用代数，它更容易阅读，`a%b = a - truncate(a/b)*b`。也就是说，`f(a,b) = a - truncate(a/b)*b`. 价值是`f(a,b) < 0`什么？

不管`b`是消极的还是积极的。它抵消了自己，因为它出现在分子和分母中。即使`truncate(a/b) = 0`and`b`是负数，好吧，当它是 的乘积时，它也会被抵消掉`0`。

因此，只有 的符号`a`决定`f(a,b)`或的符号`a%b`。

# c# - Url.Content 和阅读 ~ 来自 xml 文件的 URL 中的波浪号

> ID：13100713
> 
> 赞同：2
> 
> 时间：2012-10-27T13:46:19.133
> 
> 标签：c#, xml, asp.net-mvc, asp.net-mvc-3

我正在使用带有 .aspx 视图引擎的 ASP.NET MVC 3。我有 Maps.xml 文件：

```
 <imgurl>
        ../../Content/Img/BrandsLogo/samsung_logo.png
    </imgurl>
</map> 
```

……

在 MapView.aspx 我有：

```
<%: Url.Content( Model.ImgUrl ) %> 
```

这很好用，图像按应有的方式显示。

问题是：我想在 xml 文件中使用波浪号：

```
 <imgurl>
        ~/Content/Img/BrandsLogo/samsung_logo.png
    </imgurl> 
```

但是随后图像的 URL 被破坏了；不知何故，它在其中添加了 Mobile/MapView。像这样的文件夹和 .aspx 文件是哪个？

**/Mobile/MapView/~/Content/Img/BrandsLogo/samsung_logo.png**

当我在 xml 文件中使用 ../../ 时，URl 是正确的： **/Content/Img/BrandsLogo/samsung_logo.png**

我已经尝试了解决方案： [Using Url.Content with semi-relative URL](https://stackoverflow.com/questions/5331777/using-url-content-with-semi-relative-url)

但后来我得到了一些额外的空间： **/Content/Img/BrandsLogo%20%20%20%20%20%20%20%20%20%20%20%20/samsung_logo.png**

如何`(~/Content/Img/BrandsLogo/samsung_logo.png)`从 xml 文件中读取波浪号 url 并使用`Url.Content`方法？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T14:01:08.573

`Trim()`您可以使用您提供 URL 的解决方案，并通过 using方法稍作修改：

```
<img src="@Url.Content("~/Content/Img/BrandsLogo" + Model.ImageUrl.Trim())" /> 
```

# php - 寻找下次营业时间；mysql小时数计算

> ID：13100717
> 
> 赞同：5
> 
> 时间：2012-10-27T13:46:31.687
> 
> 标签：php, mysql, sql, select

我想知道一家商店目前是否在营业时间内，如果没有，则选择下次营业时间。

最后，我需要能够将开幕日设置为特定日期。

有人可以给我一个提示如何构建这个查询吗？

提前致谢

```
CREATE TABLE `shop_hours` (
  `id` int(11) NOT NULL,
  `shop_id` int(11) unsigned NOT NULL,
  `day_of_week` int(11) unsigned NOT NULL,
  `open_time` time NOT NULL,
  `close_time` time NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

INSERT INTO `shop_hours` (`id`, `shop_id`, `day_of_week`, `open_time`, `close_time`)
VALUES
    (1, 1, 0, '08:00:00', '24:00:00'),
    (2, 1, 1, '08:00:00', '24:00:00'),
    (3, 1, 2, '08:00:00', '24:00:00'),
    (4, 1, 3, '08:00:00', '24:00:00'),
    (5, 1, 4, '08:00:00', '24:00:00'),
    (6, 1, 5, '08:00:00', '24:00:00'),
    (7, 1, 6, '08:00:00', '24:00:00'); 
```

**编辑：**

为了澄清一点，我不想找到开放的商店，而只是寻找一个特定商店的营业时间。根据开/关时间以及现在的时间。我将生成一些以 15 分钟递增的可选时间戳。

例如，如果一家商店刚刚关门（下午 1 点），我将需要改用下一个营业日的开/关时间。（这家店不一定每天都开门，周日可能不营业）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T14:09:03.343

找出shop_id，这是开放的`NOW()`

```
SELECT *
  FROM `shop_hours`
 WHERE `day_of_week` = DATE_FORMAT(NOW(), '%w')
   AND CURTIME() BETWEEN `open_time` AND `close_time` 
```

*过时的*：

要查找*明天*的可用`open_time`s：

```
SELECT *
  FROM `shop_hours`
 WHERE `day_of_week` = DATE_FORMAT(DATE_ADD(NOW(), INTERVAL 1 DAY), '%w') 
```

**编辑**2：

要查找下一个可用`open_time`的 s：

```
 SELECT `shop_id`,
         MIN(CAST(CONCAT(DATE(DATE_ADD(NOW(), INTERVAL ((7 + DATE_FORMAT(NOW(), '%w') - `day_of_week`) % 7) DAY)), ' ', `open_time`) AS DATETIME)) AS `next_open_datetime`
    FROM `shop_hours`
GROUP BY `shop_id` 
```

**编辑**：

`DATE_FORMAT(*DATE*, '%w')`使用格式`0 = Sunday ... 6 = Saturday`

如果你想`1 = Monday ... 7 = Sunday`在你的`day_of_week`字段中使用 ISO 格式，你应该将 php 绑定`date('N')`到你的查询（或使用 Mysql 的 if 函数`IF(DATE_FORMAT(NOW(), '%w') = 0, 7, DATE_FORMAT(NOW(), '%w'))`，但这很难看）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T14:08:34.190

1）检查商店是否营业。结果为空，如果商店关门：

```
select * from shop_hours
where shop_id = $id
      and dayofweek(curdate()) = day_of_week
      and curtime() between open_time and close_time; 
```

2）查找下一个开放时间：

```
(select open_time from shop_hours
 where shop_id = $id and curtime() < open_time
       and day_of_week >= dayofweek(curdate()))
union
(select open_time from shop_hours
 where shop_id = $id and curtime() < open_time
 order by day_of_week)
 union
(select open_time from shop_hours
 where shop_id = $id and curtime() > close_time
       and day_of_week >= dayofweek(curdate()))
union
(select open_time from shop_hours
 where shop_id = $id and curtime() > close_time
 order by day_of_week)
limit 1; 
```

未经测试，但这*应该*尊重周末的环绕和一周中的漏洞（即关闭日）。

请记住，[dayofweek()](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_dayofweek)数字 1 = 星期日，2 = 星期一，... 如果您的表以不同的格式存储工作日，则必须相应地调整查询。

# c# - 在 appdomains 之间来回传递集合对象

> ID：13100718
> 
> 赞同：3
> 
> 时间：2012-10-27T13:46:34.277
> 
> 标签：c#, .net, remoting, appdomain

以下示例基于“[来回传递值 appdomains](https://stackoverflow.com/questions/1250774/passing-values-back-and-forth-appdomains) ”，其中 Marc Gravell 为有关 appdomains 之间的 .Net 远程处理的问题提供了一个非常好的答案。我所做的是将它扩展为（非常天真的？）期望它也应该适用于字符串数组。

问题是它只能以一种方式工作——创建的 appdomain 可以访问数组，但只能是只读的。我想要的是将更新后的数组元素也恢复到原始 appdomain 中。我什至想用 List<> 和 Dictionary<> 对象来做这件事。这可能吗？

```
using System;

namespace StackoverflowSample
{
   class MyBoundaryObject : MarshalByRefObject
   {
      public void SomeMethod(AppDomainArgs ada)
      {
         Console.WriteLine(AppDomain.CurrentDomain.FriendlyName + "; executing");
         ada.MyString = "working!";
         ada.MyStringArray[0] = "working!";
         string s = ada.MyStringArray[0];  // s is assigned value "a"!!!
      }
   }

   public class AppDomainArgs : MarshalByRefObject
   {
      public string MyString { get; set; }
      public string[] MyStringArray { get; set; }
   }

   static class Program
   {
      static void Main()
      {
         AppDomain domain = AppDomain.CreateDomain("Domain666");
         MyBoundaryObject boundary = (MyBoundaryObject)
              domain.CreateInstanceAndUnwrap(
                 typeof(MyBoundaryObject).Assembly.FullName,
                 typeof(MyBoundaryObject).FullName);

         AppDomainArgs ada = new AppDomainArgs();
         ada.MyString = "abc";
         ada.MyStringArray = new string[] { "a", "b" };
         Console.WriteLine("Before: " + ada.MyString + " " + ada.MyStringArray[0]);

         boundary.SomeMethod(ada);

         Console.WriteLine("After: " + ada.MyString + " " + ada.MyStringArray[0]);
         Console.ReadKey();
         AppDomain.Unload(domain);
      }
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T14:24:56.447

有时，我也有将更新后的列表返回给 Main AppDomain 的要求，我使用创建一个`new instance of a List`and的解决方法解决了这个问题`assign the desired values`。这应该适合你 -

```
ada.MyStringArray = new string[] { "working!", "b" };
string s = ada.MyStringArray[0];  // s will be assigned value "working!"!!! 
```

**更新**

我猜你必须在从远程方法返回之前`clone`实例化并实例化 a 。`new instance`它之所以`working`简单的原因`string`是-

字符串是`immutable`ie 每次你用不同的值初始化它时，`new instance`在幕后为它创建一个有点像`new String()`. 因此，更新在其他 appDomain 中可见。

我尝试了这个小东西，`StringBuilder`即`mutable`当您更改对象的内容时，不会为它们创建新实例。

```
public class AppDomainArgs : MarshalByRefObject
{
    public StringBuilder MyStringBuilder { get; set; }
}

public void SomeMethod(AppDomainArgs ada)
{
    Console.WriteLine(AppDomain.CurrentDomain.FriendlyName + "; executing");
    ada.MyString = "working!";
    ada.MyStringBuilder.Append(" working!");
} 
```

现在，看看输出 -

```
Console.WriteLine("Before: " + ada.MyString + " " + ada.MyStringArray[0] + " " + 
                      ada.MyStringBuilder);    
boundary.SomeMethod(ada);    
Console.WriteLine("After: " + ada.MyString + " " + ada.MyStringArray[0] + " "
                      ada.MyStringBuilder); 
```

您将看到该`StringBuilder`对象未更改。理想情况下，它的值应该是`"a working!"`但仍然是`"a"`。

# java - 休眠条件 addOrder 弄乱结果

> ID：13100720
> 
> 赞同：0
> 
> 时间：2012-10-27T13:46:52.543
> 
> 标签：java, hibernate, spring-mvc, criteria, displaytag

我的用户表如下所示：

```
USER (
    "USER_ID" NUMBER(15,0) NOT NULL, 
    "TYPE" NUMBER(2,0), 
    "DOMAIN_ID" NUMBER(15,0), 
    "FIRST_NAME" VARCHAR2(64), 
    "LAST_NAME" VARCHAR2(64) NOT NULL, 
    "EMAIL" VARCHAR2(256), 
    "PHONE_NUMBER" VARCHAR2(11), 
    "IS_ENABLED" NUMBER(1,0),
) 
```

ORM 看起来像这样：

```
@Entity
@Table(name = "\"USER\"")
public class User implements Serializable
{
    @Id
    @GeneratedValue(generator = "USER_SEQ")
    @GenericGenerator(name = "USER_SEQ", strategy = "sequence", parameters = @Parameter(name = "sequence", value = "SEQ_USER_ID"))
    @Column(name = "USER_ID", nullable = false)
    private Long userId;

    @Column(name = "FIRST_NAME")
    private String firstName;

    @Column(name = "LAST_NAME")
    private String lastName;

    @Column(name = "EMAIL")
    private String email;

    @Column(name = "PHONE_NUMBER")
    private String phoneNumber;

    @ManyToOne(fetch = FetchType.LAZY)
    @Cascade(CascadeType.ALL)
    @JoinColumn(name = "DOMAIN_ID")
    @ForeignKey(name = "DOMAIN_ID")
    private Domain domain;

    @Column(name = "IS_ENABLED")
    private Boolean isEnabled;

    @Column(name = "TYPE")
    private Integer type;
} 
```

我正在为用户列表做标准：

```
@SuppressWarnings("unchecked")
public List<User> getUsersList( String firstName, String lastName, Integer domainId, Boolean activeFlag, String email,
                                String phoneNr, int pageNr, int pageSize, String sortColumn, Boolean sortAscending )
{
    Session session = sessionFactory.getCurrentSession();
    Criteria criteria = createUserCriteria( firstName, lastName, domainId, activeFlag, email, phoneNr, session );

    criteria.createAlias( "domain", "domain" );
    criteria.setFirstResult( pageSize * pageNr );
    criteria.setMaxResults( pageSize );
    criteria.setFetchSize( pageSize );

    Order order;
    if ( sortColumn != null && sortAscending != null )
    {
        order = (sortAscending) ? Order.asc( sortColumn ) : Order.desc( sortColumn );
    } else
    {
        order = Order.asc( "lastName" );
    }

    criteria.addOrder( order );

    return criteria.list();
}

private Criteria createBusinessUserCriteria( String firstName, String lastName, Integer domainId, Boolean activeFlag, String email, String phoneNr, Session session )
{
    Criteria criteria = session.createCriteria( User.class );
    // only businness users
    criteria.add( Restrictions.eq( "type", UserTypeEnum.BUSINESS_USER.getUserTypeId() ) );

    if ( firstName != null )
    {
        criteria.add( Restrictions.like( "firstName", firstName + "%" ).ignoreCase() );
    }
    if ( lastName != null )
    {
        criteria.add( Restrictions.like( "lastName", lastName + "%" ).ignoreCase() );
    }
    if ( domainId != null )
    {
        criteria.add( Restrictions.eq( "domain.domainId", domainId ) );
    }
    if ( activeFlag != null )
    {
        criteria.add( Restrictions.eq( "isEnabled", activeFlag ) );
    } else
    {
        criteria.add( Restrictions.eq( "isEnabled", true ) );
    }
    if ( email != null )
    {
        criteria.add( Restrictions.like( "email", email + "%" ).ignoreCase() );
    }
    if ( phoneNr != null )
    {
        criteria.add( Restrictions.like( "phoneNumber", phoneNr + "%" ).ignoreCase() );
    }
    return criteria;
} 
```

很简单，当没有 Order 参数传递给方法时，我使用默认的 user 排序`Lastname`。PageSize 为 25，pageNr 取自 httpRequest 参数（DisplayTag），从 0 开始向上。

用于此的 Spring MVC 控制器：

```
@RequestMapping(value = "/GetNotificationUsers/", method = RequestMethod.GET)
public String getNotificationUsers( @ModelAttribute("eventNotifUserSearchForm") UsersSearchForm searchForm, Model model,
                                     HttpServletRequest request ) throws IOException
{
    searchForm.setDefaultsToNull();

    Integer pageNr = 0;
    String pageNoParamAsString = request.getParameter( new ParamEncoder( "eventNotifUsers" ).encodeParameterName(
            TableTagParameters.PARAMETER_PAGE ) );
    if ( pageNoParamAsString != null && !pageNoParamAsString.isEmpty() )
    {
        pageNr = Integer.parseInt( pageNoParamAsString ) - 1;
    }

    List<User> resultUsersList = administrativeManager.getUsersList( searchForm.getFirstName(),
            searchForm.getLastName(), userManager.getLoggedInUser().getDomain().getDomainId(), searchForm.getEnabledFlag(),
            searchForm.getEmail(), searchForm.getPhoneNumber(), pageNr, PAGE_SIZE, null, null );

    Long size = administrativeManager.getUsersListCount( searchForm.getFirstName(), searchForm.getLastName(),
            searchForm.getDomainId(), searchForm.getEnabledFlag(), searchForm.getEmail(), searchForm.getPhoneNumber() );
    //for ( User user : resultUsersList )
    //{
    //   System.out.println( user );
    //}
    model.addAttribute( "eventUserListSize", size.intValue() );
    model.addAttribute( "eventNotifUsers", resultUsersList );
    model.addAttribute( "pageSize", PAGE_SIZE );

    return "notifications/EventNotificationUserList";
} 
```

显示标签jsp：

```
<display:table name="${eventNotifUsers}" id="eventNotifUsers" pagesize="${pageSize}"
               cellspacing="0" cellpadding="10" requestURI="" partialList="true" size="eventUserListSize" sort="external" defaultsort="2">
    <display:column title="FirstName" property="firstName"/>
    <display:column property="lastName" title="LastName"/>
    <display:column property="email" title="Email"/>
    <display:column property="phoneNumber" title="Phone"/>
</display:table> 
```

但是当我显示实际列表时，第一页看起来不错，但直到最后第一页被重复。当我删除`Order`它工作正常。我不知道为什么......可能出了什么问题？

**编辑**

经过一番研究，我发现问题仅出在按姓氏排序时。有可能是因为我的测试都一样`lastName`吗？当按其他列排序时，它工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T15:09:46.683

如果您有多个姓氏相同的用户，按姓氏排序将返回按姓氏排序的用户，但您无法保证姓氏相同的用户的顺序。所以你应该添加一个额外的排序标准来保证一个确定的顺序。例如：

```
order by lastName asc, userId asc 
```

在这种情况下，共享相同姓氏的用户将始终按 ID 排序，并且顺序将具有确定性。

# android - Android Facebook SDK SSO Logcat“找不到 com.facebook.katana.provider.AttributionIdProvider 的提供者信息”

> ID：13100724
> 
> 赞同：1
> 
> 时间：2012-10-27T13:47:17.413
> 
> 标签：android, facebook, single-sign-on

我在 Logcat 中有这个错误

> 找不到 com.facebook.katana.provider.AttributionIdProvider 的提供商信息

当我使用虚拟设备时，应用程序似乎忽略了这个错误，我可以登录 Facebook。但是，如果我在设备上运行该应用程序，则不会出现登录对话框，只会出现白屏。我曾多次尝试运行密钥哈希，但我认为这不会导致错误

任何人都可以帮助我吗？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T12:01:16.453

此消息表示您的设备上未安装 Facebook 应用程序。

# iphone - 在 iphone 中使用地图 api 绘制路线的限制

> ID：13100732
> 
> 赞同：1
> 
> 时间：2012-10-27T13:48:22.283
> 
> 标签：iphone, google-maps, ios6-maps

我已使用[此](https://github.com/kishikawakatsumi/MapKit-Route-Directions)链接在地图上绘制路线。我正在使用 iOS 6 地图视图。但我认为这是使用 google map api 在地图上绘制路线。当我放下第 26 个引脚时，它给了我错误。

我想知道这是谷歌地图的限制吗？路点的作用是什么，如果我想一个接一个地丢掉超过 25 个以上的针，那我该怎么办？谁能给我一个链接，我们可以在其中连续绘制超过 25 个引脚之间的路线？如果没有，还有其他方法吗？

错误消息是：无法成功解析方向请求。错误代码 400

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T14:22:14.747

听起来该软件使用的是[Google Maps API v2](https://developers.google.com/maps/documentation/javascript/v2/reference)，它有[25 个航路点的限制](https://developers.google.com/maps/documentation/javascript/v2/reference#GDirections.loadFromWaypoints)。Google Maps API v3 有 10 个航点（起点、终点和 8 个航点）的限制，如果有营业执照，可以增加到 25 个。

此外，仅供参考，Google Maps API v2 已弃用，最早可能在 2013 年 5 月停止工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T13:51:59.090

我记得一个应用程序对谷歌地图 api 的请求限制是每天 250 个。我还记得当您在一段时间内发送多个请求时，谷歌可以停止响应。告诉你在第 26 点从 google maps api 得到什么字符串？

# asp.net - wget不能保存asp页面

> ID：13100733
> 
> 赞同：0
> 
> 时间：2012-10-27T13:48:25.093
> 
> 标签：asp.net, wget

似乎在没有问题的`wget`情况下无法获取`asp`文件`html`。我编写了一个脚本来获取一些 URL 并将它们保存为`csv`格式。脚本是

```
wget -qO- http://www.wunderground.com/weatherstation/WXDailyHistory.asp?ID=KPAPALMY1&format=1 | sed 's+<br />++g' > $1.csv 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T14:20:33.217

您必须在该 URL 周围加上引号！不加引号，Bash（或您正在使用的任何外壳）将`&`视为在后台运行的请求`wget`- 以及格式参数，该参数来自`&`永远不会发送到服务器。试试这个：

```
wget -qO- 'http://www.wunderground.com/weatherstation/WXDailyHistory.asp?ID=KPAPALMY1&format=1' | sed 's+<br>++g' > $1.csv 
```

请注意，我也调整了您的`sed`命令-`<br>`您得到的 s 没有终止斜杠。另外：删除那些`<br>`s 意味着只有*其他*每一行都有数据。希望这不会是一个问题，因为删除换行符`sed`有点痛苦，但如果是这样，请参阅[这个问题](https://stackoverflow.com/q/1251999/589985)以了解如何操作。

希望有帮助！

# sql - SQL, JOIN?.. 来自三个表的信息

> ID：13100735
> 
> 赞同：-1
> 
> 时间：2012-10-27T13:48:31.640
> 
> 标签：sql, join

有表`orders`, `shipping_types`, 和`shipping_modules`

如何打印表格中的信息和表格中的`orders`一个*字段*`shipping_modules`？

```
where 
    o.shipping_type_id = st.shipping_type_id 
and st.shipping_module_id = sm_shipping_module_id 
```

也就是这里的JOIN之类的不能用，因为这里是连用的，不是两个表而是三个表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T13:51:22.700

不，这里仍然允许加入。如果需要，您可以连接多个表。

```
SELECT  a.*, c.shipping_module_id
FROM    orders a
        INNER JOIN shipping_types b
            ON a.shipping_type_id = b.shipping_type_id
        INNER JOIN shipping_modules c
            ON b.shipping_module_id = c.shipping_module_id 
```

*只需更改`c.shipping_module_id`为您想要的列名即可显示。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T13:51:40.943

您可以`JOIN`根据需要使用任意数量的表格，并且只使用需要在`SELECT`.
IE

```
SELECT table1.fld1, table3.fld3
FROM table1
JOIN table2 ON ...
JOIN table3 ON ...
... 
```

# windows-phone-7 - 我第一次导航到全景页面时加载时间过长

> ID：13100738
> 
> 赞同：0
> 
> 时间：2012-10-27T13:48:36.143
> 
> 标签：windows-phone-7, xaml, windows-phone-7.1, panorama-control

我正在开发一个具有全景页面的 Windows Phone 7.1 应用程序。

这个全景页面有两个全景项目，一个带有两个文本块，另一个带有 bing 地图控件。我还设置了一个 1,5MB 的图像作为全景控制背景。

这是全景的 XAML：

```
<phone:PhoneApplicationPage 
    x:Class="XxXClass.DemoDetail"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
    xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone"
    xmlns:controls="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone.Controls"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
    xmlns:toolkit="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone.Controls.Toolkit"
    mc:Ignorable="d" d:DesignWidth="480" d:DesignHeight="800"
    FontFamily="{StaticResource PhoneFontFamilyNormal}"
    FontSize="{StaticResource PhoneFontSizeNormal}"
    SupportedOrientations="Portrait"  Orientation="Portrait"
    shell:SystemTray.IsVisible="False" Foreground="{x:Null}" xmlns:my="clr-namespace:Microsoft.Phone.Controls.Maps;assembly=Microsoft.Phone.Controls.Maps">
    <toolkit:TransitionService.NavigationInTransition>
        <toolkit:NavigationInTransition>
            <toolkit:NavigationInTransition.Backward>
                <toolkit:TurnstileTransition Mode="BackwardIn"/>
            </toolkit:NavigationInTransition.Backward>
            <toolkit:NavigationInTransition.Forward>
                <toolkit:TurnstileTransition Mode="ForwardIn"/>
            </toolkit:NavigationInTransition.Forward>
        </toolkit:NavigationInTransition>
    </toolkit:TransitionService.NavigationInTransition>
    <toolkit:TransitionService.NavigationOutTransition>
        <toolkit:NavigationOutTransition>
            <toolkit:NavigationOutTransition.Backward>
                <toolkit:TurnstileTransition Mode="BackwardOut"/>
            </toolkit:NavigationOutTransition.Backward>
            <toolkit:NavigationOutTransition.Forward>
                <toolkit:TurnstileTransition Mode="ForwardOut"/>
            </toolkit:NavigationOutTransition.Forward>
        </toolkit:NavigationOutTransition>
    </toolkit:TransitionService.NavigationOutTransition>
    <!--LayoutRoot contains the root grid where all other page content is placed-->
    <Grid x:Name="LayoutRoot">
        <controls:Panorama Title="Demonstation Tracker">
            <controls:Panorama.Background>
                <ImageBrush Stretch="Fill" ImageSource="/Images/demonstrationPanorama.png"/>
            </controls:Panorama.Background>

            <!--Panorama item one-->
            <controls:PanoramaItem Header="Details">
                <Grid Background="#73000000" Margin="0,0,0,26">
                    <TextBlock Height="42" Margin="8,8,174,0" TextWrapping="Wrap" Text="XXXX" VerticalAlignment="Top" FontSize="{StaticResource PhoneFontSizeLarge}"/>
                    <TextBlock Margin="8,54,8,8" TextWrapping="Wrap" HorizontalAlignment="Center" VerticalAlignment="Center" Height="413" Width="381" FontSize="{StaticResource PhoneFontSizeMedium}"><Run Text="xxx."/><Run Text=".."/></TextBlock>
                </Grid>
            </controls:PanoramaItem>

            <!--Panorama item two-->
            <controls:PanoramaItem Header="Map">
                <Grid>
                    <my:Map Name="map1" Margin="0,0,0,26" Height="420" Width="420" />
                </Grid>
            </controls:PanoramaItem>
        </controls:Panorama>
    </Grid>

    <!--Panorama-based applications should not show an ApplicationBar-->

</phone:PhoneApplicationPage> 
```

我第一次导航到全景页面时显示时间过长，如果我点击后退按钮并返回它，它会加载得更快。

**如何使全景页面加载更快？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T17:06:12.333

1.5Mb 太大了。在运行时，图像将被解压缩并存储在内存中。第二次很快，因为它已经在内存中了。如果您以 256Mb 内存为目标设备，则必须减少内存使用量。

试试这些：

*   使用压缩的 jpeg。尝试最小化文件大小。
*   背景图像应介于 480 x 800 像素和 1024 x 800 像素（宽 x 高）之间，以确保良好的性能、最短的加载时间和无缩放。
*   背景图像应该是一种资源。
*   禁用工具包动画
*   将 PanoramaItems 限制为 4

由于可用性，我还会考虑将 bing 地图移动到非幻灯片启用页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T20:14:16.363

尝试评论地图控件。我确定地图控制的问题。我总是在后台线程中进行数据初始化。然后当数据准备好时，进行 BeginInvoke 并重绘 UI。当然 1.5 MB 太大了，减少它。

# java - Android：将 textView 放在 ListView 下面

> ID：13100741
> 
> 赞同：1
> 
> 时间：2012-10-27T13:49:02.373
> 
> 标签：java, android, listview, layout, textview

在我的应用程序中，我希望在 ListView 下方有一个*TextView 。*因此，如果 ListView 在屏幕的一半处结束，则 TextView 必须在屏幕中间。但是如果 ListView 覆盖的范围比屏幕多，所以你必须滚动它，你还必须滚动 TextView，因为它位于 ListView 的下方。您对如何做到这一点有任何想法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T13:54:14.407

您可以在`ListView`. 您可以使用此[链接中提供的示例](https://stackoverflow.com/a/4265324/886001)

```
View footerView = ((LayoutInflater) ActivityContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE)).inflate(R.layout.footer_layout, null, false);
ListView.addFooterView(footerView); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T13:53:22.340

您可以将页眉和页脚视图添加到 ListView。然后两个视图都与其他列表项一起滚动。检查[addFooterView()](http://developer.android.com/reference/android/widget/ListView.html#addFooterView%28android.view.View%29)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-27T14:13:12.517

您可以使用以下布局

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:android1="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<ListView
    android1:id="@+id/listView1"
    android1:layout_width="match_parent"
    android1:layout_height="wrap_content"
    android1:layout_alignParentLeft="true"
    android1:layout_alignParentTop="true" >

</ListView>

   <TextView
       android1:id="@+id/textView1"
       android1:layout_width="wrap_content"
       android1:layout_height="wrap_content"
       android1:layout_alignParentBottom="true"
       android1:layout_below="@+id/listView1"
       android1:layout_centerHorizontal="true"
       android1:text="TextView" />

</RelativeLayout> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-27T14:11:51.333

使用 layout_weight 设置视图的权重。

> ```
>  <ListView android:layout_width="fill_parent"
>  android:layout_height="0dp" 
>  android:layout_weight="8"
>  android:id="@+id/ght" /> 
> 
>  <EditText android:id="@+id/eld" 
>   android:layout_height="wrap_content"
>   android:layout_width="fill_parent"
>   android:layout_weight="2">
>  </EditText> 
> ```

# node.js - 提取 .zip，然后使用 Node.js 将内容存储在 S3 中

> ID：13100746
> 
> 赞同：1
> 
> 时间：2012-10-27T13:50:14.927
> 
> 标签：node.js, amazon-s3, amazon-ec2

大多数关于 NodeJS、S3 和 Zips 的问题都与我想做的相反。上传 zip，然后将文件解压缩到 S3。

我有一个在 Amazon EC2 实例上运行的快速应用程序，其 Node.JS 通过 POST 请求接受文件上传。目的是上传一个包含图像的 zip 文件，提取它们，然后将每个单独的图像放在 Amazon S3 上。

我正在使用 express.js 来接受发布的文件，并且我一直在使用 AdmZip 来读取上传的 zip 文件。使用 AdmZip，我可以将 zip 文件解压缩到服务器磁盘，然后在临时目录中循环提取每个提取的图像，然后将其发送到 Amazon S3，但这似乎非常低效。我已经阅读了很多关于将文件从 S3 流式传输到 Node 并即时压缩的内容。我想我想知道的是这是否可能反过来。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T18:37:53.570

我认为您无法在“S3”上提取文件。您必须将 zip 保存在 /temp 中，解压缩并将单个文件上传到 s3。

尝试这样的事情：

```
app.post('/upload', function (req, res, next) { 

  myZip = req.files.myZipfile

  var zip = new require('node-zip')(myZip, {base64: false, checkCRC32: true});

  knox = require('knox');
  s3 = knox.createClient({"key": "", "secret": "", "bucket": ""})

  // You might need to try something like async here to throttle the putFile command
    for (var i = zip.files.length - 1; i >= 0; i--) { 

        s3.putFile(zip.files[i], path.basename(zip.files[i]), function(err, res) {

        });
    };

}); 
```

# java - Eclipse 密码恢复

> ID：13100747
> 
> 赞同：2
> 
> 时间：2012-10-27T13:50:25.923
> 
> 标签：java, eclipse, equinox, password-recovery, eclipse-rse

我尝试找到如何获取我存储在 Eclipse 中用于 FTP 的几个密码的方法。

我在 Ubuntu 12.04 上使用 Eclipse 4 (juno)，所有 ftp 都使用 RSE 插件存储。

找到了本教程[Eclipse 密码恢复（cvs、subversion、..），](http://waf-devel.blogspot.com/2009/07/eclipse-password-recovery-cvs.html)但似乎已经过时了。而且我不是Java程序员，所以对我来说有点困难。

注意到在新的 Eclipse 中，所有密码都使用 Equinox 存储，所以我还找到了这个[Interface ISecurePreferences](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/equinox/security/storage/ISecurePreferences.html)文档。

与上面的第一个链接一样，我尝试安装**Eclipse-shell**并在那里执行下一个代码：

```
import org.eclipse.equinox.security.storage.SecurePreferencesFactory;
import org.eclipse.equinox.security.storage.ISecurePreferences;

ISecurePreferences root = SecurePreferencesFactory.getDefault();

root.nodeExists("org.eclipse.rse.core.security");
ISecurePreferences coresec = root.node("org.eclipse.rse.core.security");

coresec.nodeExists("org.eclipse.rse.systemtype.ftp");
ISecurePreferences typeftp = root.node("org.eclipse.rse.systemtype.ftp");

pass = typeftp.get("HERE_FTP_HOST/HERE_MY_FTP_USER_NAME", "test"); 
```

但我得到的不是密码“测试”

我也尝试使用检查所有键`typeftp.keys()`，但在 Eclipse 控制台中我得到了`[Ljava.lang.String;@c5d03e6`

如何在 Eclipse 中找到密码恢复？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T03:05:30.410

一篇基于上面引用的教程博客文章，但有解释，以及用于恢复 SVN/FTP/SFTP 远程连接密码[的可下载源文件在这里](http://vanappdeveloper.com/2013/01/13/recovering-eclipse-zendstudio-saved-remote-passwords/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-02T21:11:14.180

在 Kepler 和 Luna 中，密码似乎在 ~/.eclipse/org.eclipse.equinox.security/secure_storage 中。[例如这里](https://github.com/jhahkala/secureStoragePrinter)是一个基于 hello world 插件的简单插件，用于打印安全存储的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T07:34:10.430

好的，我发现....我的代码有错误。

获取存储在 Eclipse RSE 中的 FTP 密码的正确代码是：

```
import org.eclipse.equinox.security.storage.SecurePreferencesFactory;
import org.eclipse.equinox.security.storage.ISecurePreferences;

ISecurePreferences root = SecurePreferencesFactory.getDefault();

ISecurePreferences coresec = root.node("org.eclipse.rse.core.security");

ISecurePreferences typeftp = coresec.node("org.eclipse.rse.systemtype.ftp");

pass = typeftp.get("HERE_FTP_HOST//HERE_MY_FTP_USER_NAME", "test"); 
```

结果我在 Eclipse 控制台中得到了我的解密密码

但如果有人向我解释如何使用某些东西来获取所有密码以进行更简单的导出，而不是手动复制/粘贴每个值，那也会很好

# python - 限制导入到特定路径，不限制导入模块的路径

> ID：13100748
> 
> 赞同：4
> 
> 时间：2012-10-27T13:50:35.593
> 
> 标签：python, import, sys.path

是否可以从特定目录导入模块，而不影响导入模块的导入路径？

如果我要临时替换`sys.path`为所需的目录，则导入的模块将无法导入该目录之外的任何内容。

我不想只`sys.path`添加目录，因为我不想导入回退到另一个来源。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-27T18:22:57.003

标准库的[imp 模块](http://docs.python.org/library/imp)允许您搜索路径列表以查找和导入模块，而无需更改`sys.path`. 例如：

```
import imp

search_paths = [path_to_spam]
modfile, modpath, description = imp.find_module('spam', search_paths)
with modfile:
    spam = imp.load_module('spam', modfile, modpath, description) 
```

# jsf - confirmDialog 出现但立即消失

> ID：13100749
> 
> 赞同：0
> 
> 时间：2012-10-27T13:50:40.993
> 
> 标签：jsf, primefaces

我在 SA 和 Primefaces 论坛上阅读过类似的问题，但没有帮助。这是xhtml：

```
<h:form id="form2" prependId="false">
    <p:remoteCommand name="sendNameClicked" actionListener="#{reportBean.passName}"/>
    <p:remoteCommand name="updateDialog" update=":form3:dialogBox"/>

    <p:commandButton style="display: none" id="displayDialog" type="button" onclick="cd.show(); return false;"/>
</h:form>
<h:form id="form3">
    <p:confirmDialog id ="dialogBox" message= "#{reportBean.getClickedAuthorLaius()}"
                     header="#{reportBean.nameClicked}#{reportBean.authorClicked.mostRecentAffiliation}"
                     widgetVar="cd"
                     severity="info"
                     >
        <h:outputText styleClass="ui-widget"  value="" escape="false" />
        <p:commandButton value="Draw the ring of #{reportBean.obtainFullName()}?" actionListener ="#{controllerBean.prepareNewSearch()}" action ="index?faces-redirect=true" oncomplete="cd.hide();"/>
        <p:commandButton value="No, stay on this page" onclick="cd.hide();" type="button" />
    </p:confirmDialog>
</h:form> 
```

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T14:45:16.057

在`onclick`发送表单提交请求之前触发。在`update`表单提交响应到达后执行。因此，确认对话框在打开后会更新，从而再次获得其默认外观。

您需要在更新*后打开它。*使用`oncomplete`属性而不是`onclick`.

```
<p:commandButton ... oncomplete="cd.show()"/> 
```

# python - 查找目录中的所有扩展名并按字母顺序排列

> ID：13100750
> 
> 赞同：0
> 
> 时间：2012-10-27T13:50:58.683
> 
> 标签：python

我有一个我无法解决的作业:(

我必须使用`os`and `os.path`。

1.  我必须编写一个程序来询问您的目录，但如果您不输入任何内容，该目录是当前工作目录，那么它会按字母顺序打印所有文件的扩展名。

    该程序应该像这样工作：

    目录： `/Users/Andrew/Desktop`

    ```
    .ai
    .docx
    .jpg
    .png
    .py
    .rar
    .zip 
    ```

2.  我必须编写一个程序，再次询问您的目录，但如果您不输入任何内容，该目录是当前工作目录，然后它会按字母顺序打印所有文件的扩展名，但这次它应该为每个文件类型画一条线并列出具有适当扩展名的文件。

    目录： `/Users/Andrew/Desktop`

    ```
    .ai
    ----------
    cat.ai

    .docx
    ----------
    Job application.docx

    .png
    ----------
    Screen Shot1.png
    Untitled-1.png

    .py
    ----------
    1.py
    2.py
    4.py
    5.py
    6.py

    .xls
    ----------
    PlanB.xls
    Tommorow.xls 
    ```

您的帮助将不胜感激。

这是我解决第一个问题的尝试：

```
import os

directory=input("Directory:")

if directory:
    files=os.listdir(directory)
else:
    files=os.listdir(os.getcwd())

for filetypes in files:
    print(os.path.splitext(filetypes)[1]) 
```

我终于完成了第一个任务，但我无法解决第二个任务。我真的需要帮助。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T14:11:43.407

要对文件扩展名进行排序，您需要将它们添加到列表中，然后使用`sorted()`.

要跳过文件夹，您需要检查遍历文件列表的 for 循环中的文件。你可以使用[`isfile()`](http://docs.python.org/library/os.path.html#os.path.isfile)它。

# colorbox - 颜色框不显示 - 错误 $.data(this, colorbox) 未定义

> ID：13100751
> 
> 赞同：0
> 
> 时间：2012-10-27T13:51:01.057
> 
> 标签：colorbox, opencart

我正在尝试在类别页面上加载弹出图像，但单击图像时出现此错误。

```
Timestamp: 10/27/2012 7:15:10 PM
Error: TypeError: $.data(this, colorbox) is undefined
Source File: http://woodanta.6point9.in/catalog/view/javascript/jquery/colorbox/jquery.colorbox.js
Line: 246 
```

颜色框在产品页面上工作，但不在类别上。谁能帮我这个？

类别：[http ://woodanta.6point9.in/index.php?route=product/category&path=60](http://woodanta.6point9.in/index.php?route=product/category&path=60)

产品：[http ://woodanta.6point9.in/index.php?route=product/product&product_id=50](http://woodanta.6point9.in/index.php?route=product/product&product_id=50)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T06:03:56.690

Colorbox 使用 jQuery.data() 将它的设置对象添加到分配给它的元素中。在您分配颜色框和单击链接之间，此设置对象将从您的元素中删除。这通常发生在复制/替换文档中的元素（使用 $.html()）时，它不会复制使用 $.data 存储的数据，而不是克隆它们或附加/添加现有元素。

我建议禁用与颜色框无关的脚本以确定导致问题的脚本。此外，您可以通过等到其他脚本执行后再将颜色框分配给您的元素来避免此问题。

# java - 在 java String 中打印转义序列

> ID：13100753
> 
> 赞同：0
> 
> 时间：2012-10-27T13:51:05.050
> 
> 标签：java, character-encoding, escaping, unicode-escapes

> **可能重复：**
> [如何在 Java 中打印转义字符](https://stackoverflow.com/questions/7888004/how-do-i-print-escape-characters-in-java)

我正在编写一个程序，它从文件中读取字符串并从该文件生成令牌。

例如。如果文件是 '1\t .\n$$$'

那么我想要的java字符串是完全一样的。所以 String str 应该看起来像 '1\t .\n$$$'

问题是，一旦我遇到可以表示 \t 或 \n 的“\”（反斜杠），那么下一个字符（t 或 n）就会丢失。

我正在使用 bufferedreader 类并使用函数 read 逐个字符地读取文件。这是一段代码。

```
 Charset encoding = Charset.defaultCharset();
    InputStream in = new FileInputStream(new File (filepath));
    Reader reader = new InputStreamReader(in, encoding);
    // buffer for efficiency
    buffer = new BufferedReader(reader);
    String temp = "";
    while ((r = buffer.read()) != -1) {
        ch = (char) r;
        if (ch != '\\') {
        temp += ch;
        } else if (ch == '\\'){
         ch = (char) buffer.read();
         if (ch == 'n') {
            temp += "\\n";
         } else {
            temp += "\\t";
         }
        }
    } 
```

我也尝试过使用 UTF-8 字符集进行编码

```
 (Charset encoding = Charset.forName("UTF-8");) 
```

但这无济于事。

提前致谢。

# html - 处理：如何使事物以随机曲线而不是直线移动？

> ID：13100755
> 
> 赞同：0
> 
> 时间：2012-10-27T13:51:14.970
> 
> 标签：html, canvas, processing

我有沿直线移动的经典球：

```
class Circle{
  float x,y,vx,vy,size;        

 Circle(float ax,float ay){
   x = ax;
   y = ay;
   size = 5;
   vx = random(-.1,.1);
   vy = random(-.1,.1);
}

void update(int w,int h){
   x += vx;
   y += vy;
   if(x < 0 || x > w) vx *= -1;
   if(y < 0 || y > h) vy *= -1;
 }

void draw(){
  pushStyle();
  noStroke();
  fill(0);
  ellipse(x,y,size,size);
  popStyle();
}

} 
```

但是，我不希望他们排成一行。

我希望它们以不规则的曲线移动。我可以添加什么？噪音？罪？因为？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T05:41:20.753

取决于你想要什么，但如果你想让它们按照正弦曲线移动，例如，你可以这样做：

```
class Circle{
    float x,y,vx,vy,size;
    float sinCtr = 0;

    // ...

    void update(int w,int h){
        x += vx;
        y = h/2 + 50 * Math.sin(sinCtr);
        sinCtr += 0.02;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T04:18:35.003

你可能想看看[这个页面](http://gizma.com/easing/)。使用工作样本简化方程的简单指南。请注意，相同的技术可用于时间或空间曲线。

编辑：忘了说该网站是用于 Flash 的，但无论如何，即使您像我一样没有 Flash 知识，也很容易理解。并且代码示例很容易适应。

# pthreads - pthread_cleanup_pop 参数为 0

> ID：13100761
> 
> 赞同：0
> 
> 时间：2012-10-27T13:52:04.087
> 
> 标签：pthreads

根据 pthread_cleanup_pop 的手册页，如果此函数的参数不为零，则将调用清理处理程序，否则从匹配的 pthread_cleanup_push 安装的清理处理程序中将被删除。

我正在使用 Ubuntu 3.2.0-32-generic-pae。但我看到虽然参数为 0，但清理处理程序被调用。

线程例程：

```
void *func_a (void *arg)
{      
    pthread_t thr_e;
    void *status;

    pthread_t tid = pthread_self();
    printf("[%2d] D: In thread D [%s]\n", my_time(), (char *)thread_name(tid));

    pthread_cleanup_push(cleanup, NULL);
    pthread_setcanceltype(PTHREAD_CANCEL_DEFERRED, NULL);
    pthread_setcancelstate(PTHREAD_CANCEL_ENABLE, NULL);

    //sleep(1);
    pthread_create(&thr_e, &attr, func_e, NULL);
    printf("[%2d] D: Created thread E [%s]\n", my_time(), (char *)thread_name(thr_e));
    sleep(20);
    printf("[%2d] D: Thread exiting...\n", my_time());
    pthread_cleanup_pop(0);
    return (void *)55;
} 
```

清理程序：

```
void
cleanup (void *arg)
{
    printf("[%2d] Calling cleanup...\n", my_time());
} 
```

主线程例程：

```
int main()
{
    ......
    printf("[%2d] Main: Created thread C [%s]\n", my_time(),
               (char *)thread_name(thr_c));
    //sleep(20);
    printf("[%2d] Main: Cancelling Thread D\n", my_time());
    error1 = pthread_cancel(thr_d);
    //sleep(1);
    printf("[%2d] Main: Calcel status %d, %s, %d\n",
               my_time(), error1, (char *)strerror(errno), (int)thr_d);
    printf("[%2d] Main; Exiting...\n", my_time());
} 
```

输出如下：

```
 [ 0] Main: Calcel status 0, Success, -1218630848
    [ 0] Main; Exiting...
    [ 0] Calling cleanup... 
```

那么为什么 cleanup() 被调用呢？请让我知道这里发生了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T14:23:58.097

由于没有打印“D: Thread exiting”，因此可以假设主线程在 push 和 pop 之间取消了 D（在示例代码中的 sleep 期间）。这会导致执行尚未弹出的清理。

根据[手册页](http://www.kernel.org/doc/man-pages/online/pages/man3/pthread_cleanup_push.3.html)（强调添加）：

1.  当一个线程被取消时，所有堆叠的清理处理程序都被弹出**并**按照它们被压入堆栈的相反顺序执行。

# git - 使用两个存储库，其中一个具有“已清理”的历史记录

> ID：13100762
> 
> 赞同：6
> 
> 时间：2012-10-27T13:52:12.820
> 
> 标签：git

所以我有一个私人代码库，我正在与一些外部合作者共同开发。我希望他们能够为代码做出贡献，但我不希望他们拥有我们项目的整个提交历史来仔细阅读。我知道可以使用以下方法“压缩”我们存储库的历史记录`rebase`：这是理想的，可以将我们的整个历史记录压缩为一次提交。那么，是否有可能拥有两个存储库，一个具有我们的合作者可以使用的“压缩”历史记录，另一个存储库包含我们可以在内部使用的历史记录，并在它们之间主动推送和拉取？（没有将更详细的存储库的历史暴露给更简单的存储库？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T15:59:39.293

你不能在两个不同的历史之间推动或拉动。但是，如果需要，您可以保留两个历史记录（即使在同一个存储库中作为单独的分支）。您将不得不使用`git rebase`和/或`git cherry-pick`将新提交从一个历史记录移植到另一个历史记录。

# java - 在套接字中发送完整的数据包

> ID：13100764
> 
> 赞同：0
> 
> 时间：2012-10-27T13:52:24.520
> 
> 标签：java, sockets

我正在制作基于客户端-服务器的游戏，但服务器有时会在发送数据包时出现问题。

每个连接到服务器的客户端都有自己的实例（类名`Peer`）。此实例有一个`ByteBuffer`名为 的变量`buffer`。对等类是 Runnable，因此每个客户端都有自己的线程。

服务器可以向客户端发送不同类型的数据包，数据包的第一个字节是“操作码”，以便客户端知道它是什么数据包。当客户端知道操作码时，它也知道数据包的大小。

在 Peer 类的线程中的每个滴答声中`while-loop`，ByteBuffer 中的所有数据包都将发送到客户端。但有时字节缓冲区中有一半数据包，因为另一个线程同时将字节放入其中。然后客户端读取操作码但缺少数据包的字节。

这是发送字节缓冲区中字节的 Peer 类的代码：

```
 ByteBuffer buffer = this.buffer.duplicate();
                this.buffer.clear();
                int size = buffer.position();
                buffer.flip();
                byte[] data = new byte[size];
                buffer.get(data);
                out.write(data); 
```

如何确保它发送完整的数据包？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T14:18:00.193

使用生产者-消费者范式，带有一个 ByteBuffer 队列和一个单独的线程来发送数据包。确保每个生产者线程都有自己的 ByteBuffer，并且每个 ByteBuffer 仅在完成后放入队列。

# jquery - 为 jQuery 自动完成插件过滤长 JSON 文件

> ID：13100769
> 
> 赞同：0
> 
> 时间：2012-10-27T13:52:56.623
> 
> 标签：jquery, autocomplete, twitter-bootstrap, typeahead

我今天需要你们一些关于 jQuery Autocomplete 的小提示——确切地说——Bootstrap 的 Typeahead 插件（在功能上与 jQuery Autocomplete 并没有真正的不同）。

自动完成的来源是一个本地 JSON 变量，存在于另一个包含以下信息的 javascript 文件中

```
var autoResults = [
{"name":"SOME-NAME","type":"SOME-TYPE","manuf":"SOME-MANUF"},
{"name":"SOME-NAME","type":"SOME-TYPE","manuf":"SOME-MANUF"},
{"name":"SOME-NAME","type":"SOME-TYPE","manuf":"SOME-MANUF"},
{"name":"SOME-NAME","type":"SOME-TYPE","manuf":"SOME-MANUF"}
] 
```

现在的问题是这些项目的数量目前超过 10,000 个，文件已变为 1.35Mb。它将进一步增加，因为这些物品的生产量应该是 100,000 件。

有没有可能我可以将文件分成几部分但保持相同的变量 - 在加载之前将 JSON 变量连接成一个 JSON 变量等。

但是在任何一种情况下，文件都会从服务器加载= 1.35Mb - 所以很困惑。我正在使用一个局部变量来保存服务器搜索一次超过 100,000 条记录的自动完成查询。

处理相同的任何其他提示将不胜感激。与此同时，我将尝试[http://benalman.com/projects/jquery-throttle-debounce-plugin/](http://benalman.com/projects/jquery-throttle-debounce-plugin/)，它看起来很棒，但并不能真正解决文件大小问题。

提前致谢！

# .net - 空白 DataGridView 问题

> ID：13100770
> 
> 赞同：0
> 
> 时间：2012-10-27T13:52:59.080
> 
> 标签：.net, sql, vb.net, datagridview

> **可能重复：**
> [在 DataGridView 中显示 SQL 结果的问题](https://stackoverflow.com/questions/13094959/issue-with-displaying-sql-result-in-datagridview)

我以前问过这个问题，但从来没有解决过。基本上，我试图用 SQL 查询的结果在我的表单上填充一个 datagridview。我没有从这段代码中得到任何错误，但我只是得到了一个完全空白的 datagridview，即它没有显示任何东西，甚至没有显示列标题。

另请注意，我知道我目前对我的 sql 上的 SQL 注入持开放态度，我只想在对它进行排序之前让它工作。

这是我的全班代码：

```
Imports System.Data.OleDb
Imports System.Data

Public class TechScreen_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load

Dim con As OleDbConnection = New OleDbConnection("Provider=Microsoft.Jet.OLEDB.4.0: Data Source = C:\Users\Dave\Documents\jobList.mdb;")
Dim cmd As OleDbCommand = New OleDbCommand("SELECT * FROM jobList WHERE techID = " &  TechScreenID &"", con)
con.Open()
Dim DA As OleDbDataAdapter = New OleDbDataAdapter(cmd)
Dim mydataset As DataSet = New DataSet
DA.Fill(mydataset, "MyTable")
DataGridView1.DatSource = mydataset.Tables("MyTable").DefaultView
con.Close()
con = Nothing

End sub
End class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T16:24:46.963

首先，虽然它可能是也可能不是问题的根源，但这条线：

```
DataGridView1.DatSource = mydataset.Tables("MyTable").DefaultView 
```

包含一个错字。应该是 DataGridView1.DataSource。似乎这会导致编译器错误。

除此之外，尝试简化类似于下面的内容，如果您仍然遇到绑定问题，请在调试器中逐步检查以确保一切按预期工作。此外，检查 dgv 控件上的“自动生成列”属性是否设置为 true。

我不清楚您要做什么，因此以下是我将如何处理此问题的一个非常一般的示例。

*   首先，将您的连接字符串移动到项目设置文件，并使用 My.Settings.MyConnectionStringName 来引用它。
*   其次，在 SQL 中使用参数，而不是内联。
*   将您的数据访问内容包装在“使用”块中。Using 将为您处理块范围内的对象的处置，通常是一种更清洁的方法。
*   只是我个人的喜好，但我不喜欢数据集带来的所有 bs 开销，一个简单的数据表就可以做到。
*   我在这里没有尽可能完全地做到这一点，但我建议将数据检索与分配给 UI 控件分开。更重要的是，我可能会进行下一步，并将控件分配与表单加载事件分开。您可能会发现表单中有多个地方需要刷新或重置数据源。

有多种方法可以解决这个问题，我的不一定是“流行的方式。但是，下面的方法刚刚对我有用。

简化您的代码，并进行一些重构：

```
Imports System.Data
Imports System.Data.OleDb

Public Class TechScreen

    Private Sub TechScreen_Load(sender As System.Object, e As System.EventArgs) Handles MyBase.Load

        'Not sure where your TechScreenID input parameter is coming from, so this is just for example:
        Dim TechID As Integer = 1

        ' Use a function to return the data to be used as the DataSource for the dgv control:
        DataGridView1.DataSource = Me.JobListTable(TechID)

    End Sub

    Private Function JobListTable(TechID As Integer) As DataTable
        Dim dt As DataTable = Nothing

        Dim SQL As String = "SELECT * FROM joblist WHERE techID = @TechID"

        ' The Using block handles disposal of objects initialized:
        Using con As OleDbConnection = New OleDbConnection(My.Settings.MyConnection)
            Using cmd As OleDbCommand = New OleDbCommand(SQL, con)

                ' Use parameters instead of inline concatenation for cleaner code,
                ' and protection against sql injection attacks:
                cmd.Parameters.AddWithValue("@TechID", TechID)
                con.Open()

                dt = New DataTable()

                Try
                    dt.Load(cmd.ExecuteReader())
                Catch
                    MsgBox("There was an error retrieving data")
                Finally
                    con.Close()
                End Try
            End Using
        End Using

        Return dt

    End Function

End Class 
```

# html - 如何摆脱垂直滚动条

> ID：13100771
> 
> 赞同：0
> 
> 时间：2012-10-27T13:53:03.243
> 
> 标签：html, css

在我的网站中，当我改变高度时出现垂直滚动，怎么可能：

我的 html 如下：

```
<html>
<body>
 <div class="wrapper"> 
 <section>
 <section class="tall-section">
 </section>
 <section>
 </div> 
<body>
</html> 
```

CSS：

```
.tall-section{
height:1100px !Important;
} 
```

这是它出现的时候。

但是，如果我删除`tall-section`，则没有垂直滚动条，并且 css 采用以前设置的旧高度`#wrapper > section > section`，即`763px`.

我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T14:00:31.893

您看到的滚动条适用于具有固定高度的外部。不要用另一个部分包裹你的新部分，或者使用上面的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T13:54:59.290

使用`min-height`. 如果内容多于 1100 像素，这将允许 div 扩展。

# compiler-construction - 缺少变量 cmake_3_compiler kdevelop cmake

> ID：13100777
> 
> 赞同：3
> 
> 时间：2012-10-27T13:53:56.763
> 
> 标签：compiler-construction, cmake, kdevelop

我曾经在 Linux Mint 上使用 Kdevelop，效果很好。现在我重新安装了 Linux，我无法让 Kdevelop 和 cmake 工作。

当我编译我得到这个错误：

```
make: *** No targets specified and no makefile found.  Stop. 
```

当我尝试配置 cmake 时，我得到：

```
/home/benedikt/projects/Exercise 3/build> /usr/bin/cmake -DCMAKE_INSTALL_PREFIX=/usr/local -DCMAKE_BUILD_TYPE=Debug /home/benedikt/projects/Exercise 3/  
-- Configuring incomplete, errors occurred!  
CMake Error: Error required internal CMake variable not set, cmake may be not be built correctly.  
Missing variable is:  
CMAKE_3_COMPILER_ENV_VAR  
CMake Error: Error required internal CMake variable not set, cmake may be not be built correctly.  
Missing variable is:  
CMAKE_3_COMPILER  
CMake Error: Could not find cmake module file:/home/benedikt/projects/Exercise 3/build/CMakeFiles/CMake3Compiler.cmake  
CMake Error: Could not find cmake module file:CMake3Information.cmake  
CMake Error: CMAKE_3_COMPILER not set, after EnableLanguage 
```

我必须将变量设置为什么，我在哪里做？

编辑： CMakeList.txt 是：

```
project(exercise 3)

add_executable(exercise 3 main.cpp) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T17:14:03.523

查看[project() 命令文档](http://cmake.org/cmake/help/v2.8.9/cmake.html#command%3aproject)。

它的第一个参数是项目名称，其他参数是使用的语言。CMake 认为这`3`是一种编程语言，并试图找到它的编译器。

从项目名称中删除空格或使用引号：`project("exercise 3")`.

# javascript - 计算对象中的函数数

> ID：13100782
> 
> 赞同：0
> 
> 时间：2012-10-27T13:54:30.787
> 
> 标签：javascript

是否可以计算此 JavaScript 对象中的函数和属性的数量：

```
var Obj = {

    prop1: 'Property1',

    fun1: function() {
        console.log('function 1');
    },
    fun2: function() {
        console.log('function 2');
    }
} 
```

所以对于属性，我在这里喊得到 1 和 2 的功能？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-27T13:57:50.757

```
var fCount = 0,
    pCount = 0;

for ( var i in Obj ) {
    if ( Obj.hasOwnProperty(i) ) {
        if ( typeof Obj[i] === "function" ) {
            fCount++;
        } else {
            pCount++;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-27T14:11:18.930

干得好：

```
Object.properties_size = function(obj) {
  var size = 0, key;
  for (key in obj) {
    if (obj.hasOwnProperty(key) && !(obj[key] instanceof Function)) size++;
  }
  return size;
};

Object.functions_size = function(obj) {
  var size = 0, key;
  for (key in obj) {
    if (obj.hasOwnProperty(key) && obj[key] instanceof Function) size++;
  }
  return size;
};

var prop_size = Object.properties_size(Obj);
var func_size = Object.functions_size(Obj); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-27T13:56:28.807

当然，很简单：

```
var numFunctions = 0;
for (var p in Obj)
{
    if (Obj.hasOwnProperty(p) && typeof Obj[p] === 'function')
    {
        numFunctions++;
    }
} 
```

**注意** `prop1`, `fun1`, 和`fun2`都是*的*属性`Obj`。JavaScript 中的对象属性值可以保存任何值，而不仅仅是字符串。（[大卫的回答](https://stackoverflow.com/a/13100812/139010)正确地显示了如何获得非函数属性计数。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-27T13:58:01.613

你可以这样做

```
var num = 0;
for ( var k in Obj ) {
    num += ( Obj[k] && Function == Obj[k].constructor );
} 
```

# windows - MinGW，使用控制台构建 GUI 应用程序

> ID：13100785
> 
> 赞同：5
> 
> 时间：2012-10-27T13:54:37.810
> 
> 标签：windows, debugging, linker, console, mingw

我正在使用 MinGW 在 Windows 上构建我的应用程序。编译和链接时，在命令行中加入“-mwindows”选项以拥有Win32 API函数。

更具体地说：在没有“-mwindows”的情况下调用MinGW的GCC时：

```
c:\>g++ -c main.cpp 
c:\>g++ -o main.exe main.o 
```

上面2个命令行后面的'main.exe'将在控制台中运行，Win32 API函数将无法使用。

当像这样使用“-mwindows”调用 MinGW 的 GCC 时：

```
c:\>g++ -c main.cpp
c:\>g++ -o main.exe main.o -mwindows 
```

现在与“-mwindows”链接，“main.exe”可以使用 Win32 API，但是，当应用程序运行时它不会启动控制台。

这个“-mwindows”选项禁用控制台，这使我无法打印出调试信息。有什么方法可以**同时保留控制台和选项 '-mwindows'**？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-27T16:56:53.750

该`-mconsole`开关用于指定您希望以控制台子系统为目标。如果从控制台应用程序启动，您确实希望这样做以确保您的进程连接到现有控制台。例如，假设您确实`AllocConsole()`按照您自己的答案定位了 GUI 子系统，然后调用 . 然后你会发现你的应用程序显示一个全新的控制台，而不是从另一个控制台应用程序启动时使用现有的控制台，例如`cmd.exe`.

如果您需要使用其他库，那么您可以在命令行中使用`-l`. 控制台应用程序没有什么特别之处，这意味着它不能链接到任何 Win32 API 函数。只是与相关联的默认库集`-mconsole`缺少一些您想要的库。

另一方面，您可以同时使用两者，也可以`-mconsole`在`-mwindows`构建应用程序时使用。它们不是相互排斥的。

```
gcc -mconsole -mwindows main.c 
```

这将生成一个以控制台子系统为目标的应用程序。并且您将获得`-mwindows`自动链接的标准 Win32 库集。这可能是实现目标的最简单方法。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-27T15:11:56.130

我没有这个答案的证据，只有一些成功的实验。如果我有一个 hello 应用程序，如下所示：

```
#include <stdio.h>
#include <windows.h>

int main(void)
{
    puts("hi");
    MessageBox(NULL, "test", "test", NULL);
    GetStockObject(0);
    return 0;
} 
```

我不能**用 编译它`-mconsole`**，因为链接器抱怨`GetStockObject`. 但是当我在命令**行上****添加必要的库时`-lgdi32`**，应用程序会编译并干净地执行。也许这是同时保留控制台和 gdi 的方式。这是命令行：

```
gcc -mconsole test_gdi.c -lgdi32 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-27T15:06:37.907

我找到了答案。取自[Using STDIN with an AllocConsole()](https://stackoverflow.com/questions/9020790/using-stdin-with-an-allocconsole)

```
AllocConsole();
freopen("CONIN$", "r",stdin); 
freopen("CONOUT$","w",stdout); 
freopen("CONOUT$","w",stderr); 
```

它像魔术一样工作！

“freopen”的参考：[http ://www.cplusplus.com/reference/clibrary/cstdio/freopen/](http://www.cplusplus.com/reference/clibrary/cstdio/freopen/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-02T18:48:30.763

您需要手动捕获 hInstance 和 nCmdShow（WinMain 参数）。您可以使用以下 C 函数来执行此操作：

```
HINSTANCE GetHInstance( ) {
   return (HINSTANCE) GetModuleHandleW(NULL);
}

int GetNCmdShow() {
   STARTUPINFOW startupInfo;
   GetStartupInfoW(&startupInfo);
   if ((startupInfo.dwFlags & STARTF_USESHOWWINDOW) != 0) {
      return startupInfo.wShowWindow;
   }
   return SW_SHOWDEFAULT;
} 
```

# embedded - 在嵌入式 Linux (ARM7) 上构建 Mono

> ID：13100792
> 
> 赞同：5
> 
> 时间：2012-10-27T13:55:25.420
> 
> 标签：embedded, arm

我使用以下命令配置单声道

```
./configure --host=arm-linux --build=arm-none-linux-gnueabi --target=arm-linux --cache-file=arm-linux.cache --disable-mcs-build 
```

文件 arm-linux.cache 是

```
mono_cv_clang=no
mono_cv_uscore=no
with_tls=no
with_sigaltstack=no 
```

当我制作单声道时，错误消息是：

> 在 mini-arch.h:21、
> mini.h:35、
> genmdesc.c:9 中包含的文件中：
> mini-arm.h:39:2: error: #error "ARM_FPU_NONE、ARM_FPU_FPA、ARM_FPU_VFP 中的至少一个或必须定义 ARM_FPU_VFP_HARD。”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T13:57:56.620

您需要为`floating point hardware`您拥有的目标定义/选择其中一个选项，例如：

```
make CFLAGS=-DARM_FPU_NONE 
```

# c# - Delphi 的 TList 的 C# 等价物是什么？

> ID：13100793
> 
> 赞同：-2
> 
> 时间：2012-10-27T13:55:34.093
> 
> 标签：c#, delphi

在 Delphi 中，我有一个类并将此类的实例存储在一个列表中，使用以下代码：

```
type
    TMyClass = class
    public
        name: String;
        old: Integer;
        anx: boolean;
    end; 
```

...

```
function x(aList: TList): String;
var
    aObj: TMyClass;
    i: Integer;
begin
    for i:= 1 to aList.Count do
    begin
        aObj := aList[i-1];
    end;
end; 
```

我怎样才能在 C# 中做到这一点？

我的班级将如何获得`TList`？以及如何`TList`在 C# 中编写等价物？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-27T13:56:59.503

C# 等效项是通用列表容器[`List<T>`](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx)。它与 Delphi 非常相似，`TList`但由于使用了泛型，它是一个类型安全的容器。事实上，在现代 Delphi 代码中，由于类型安全，泛型 Delphi 类[`TList<T>`](http://docwiki.embarcadero.com/Libraries/XE3/en/System.Generics.Collections.TList)将优于非泛型类。`TList`

假设您想要一个`MyClass`对象列表，您将实例化`List<MyClass>`.

```
List<MyClass> list = new List<MyClass>(); 
```

然后你可以添加项目

```
list.Add(obj); 
```

等等。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-27T14:00:42.707

```
//this is the class with fields.
public class TMyClass
{
    public String Name;
    public int old;
    public bool anx;
}

//this is the class with properties.
public class TMyClass
{
    public String Name { get; set; };
    public int old { get; set; };
    public bool anx { get; set; };
}

public string x(List<TMyClass> list)
{
    TMyClass aObj;
    for(int i = 0; i++; i < list.Count)
    {
        aObj = list[i];
    }
    //NEED TO RETURN SOMETHING?
} 
```

这是您的类和功能的翻译。但我确实相信你的函数需要返回一些东西......

# ruby - 检查 ruby 中的数字格式

> ID：13100802
> 
> 赞同：0
> 
> 时间：2012-10-27T13:56:50.850
> 
> 标签：ruby

在我的一个测试中，我想检查一个值是否是 0-9 之间的八位数字并使其更通用，我该如何在 Ruby 中做到这一点？

示例：36756786、38796809 等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T13:59:01.073

试试这个：

```
numberString =~ /\A(\d){8}\Z/ 
```

# linux - GCC 4.8 和 4.7 会在同一台机器上和平共存吗？

> ID：13100804
> 
> 赞同：1
> 
> 时间：2012-10-27T13:56:59.910
> 
> 标签：linux, macos, gcc, compiler-construction

gcc 4.7 和 4.8 的安装会在同一台机器上和平共存吗？这最初是一台装有 Ubuntu 12.10（Quantal Quetzal）的机器，但以后可能会将其扩展到其他机器和发行版，甚至可能是我的 mac（它将是 4.8 和 Mountain Lion 上最后提供的苹果 gcc）。我正在尝试测试 gcc 在 4.8 中改进的诊断，将它们与 clang 进行比较，因此我需要 gcc 4.8。

如果上面的答案是肯定的，你如何调用 gcc 的每个安装？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-27T14:13:32.113

首先：是的，您可以在您的机器上安装多个 gcc。

如果您从默认的 Ubuntu 存储库安装 gcc，您可以使用`gcc-4.6`, `gcc-4.7`, ... 调用不同的版本。Ubuntu 工具链测试存储库`ubuntu-toolchain-r/test`有一个 gcc-4.7 包。AFAIK 它还没有 gcc-4.8 包。存在维护 gcc 包的其他存储库（即使对于当前的 4.8 开发版本；对于 ubuntu gcc 存储库只有 google）。

除此之外，您还可以始终从源代码 ( [http://gcc.gnu.org/install/index.html](http://gcc.gnu.org/install/index.html) ) 编译 gcc 并拥有多个版本 ( [http://gcc.gnu.org/faq.html#multiple](http://gcc.gnu.org/faq.html#multiple) )。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T14:01:36.770

根据 gcc FAQ，您可以安装多个版本。看看这个链接[http://gcc.gnu.org/faq.html#multiple](http://gcc.gnu.org/faq.html#multiple)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-27T14:42:36.213

如果您自己构建 GCC（确保构建目录在源目录之外），您可以`../gcc-trunk-srcdir/configure`使用 eg `--program-suffix=-trunk`（可能还有一些`--prefix`）然后将其安装为`gcc-trunk`等`g++-trunk`。因此您可以安装多个版本的 GCC。

^(但是，我建议避免使用 GCC 的混合物来编译程序。使用相同的 GCC 编译给定的应用程序或库。请注意，您可能会在`libstdc++`库中遇到轻微的不兼容问题。)

不要忘记`--enable-plugins`最近 GCC 的选项（遗憾的是，默认情况下未启用此选项，IIRC）。您甚至可能想尝试[MELT](http://gcc-melt.org/)（一种用于扩展 GCC 的高级域特定语言）。

在某些发行版上，GCC 主干的最新快照可能被打包为`gcc-snapshot`

# android - 在 Android 中倾斜和旋转位图

> ID：13100806
> 
> 赞同：0
> 
> 时间：2012-10-27T13:57:18.610
> 
> 标签：android, matrix, bitmap

我是第一次使用矩阵和画布，但找不到关于此的教程。我已经能够通过仅旋转位图或倾斜位图来获得良好的效果。

目前我可以使用以下方法旋转图像：

```
Matrix.rotate(amount); 
```

还有一些其他细节可以使形状在旋转时以它的位置为中心，但这不是我问题的主要焦点。

我现在要做的是让图像旋转，同时倾斜成不同的形状。例如，想象一下，当从任何方向（但正好是侧面）看纺车时，它的外观是怎样的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T14:01:36.877

请通过此链接。可能这对你有帮助

[http://android-er.blogspot.in/2010/07/rotate-bitmap-image-using-matrix.html](http://android-er.blogspot.in/2010/07/rotate-bitmap-image-using-matrix.html)

也试试这个

[Android：如何根据目的地坐标旋转移动的动画精灵](https://stackoverflow.com/questions/6003823/android-how-to-rotate-a-moving-animated-sprite-based-on-the-coordinates-of-its/6004218#6004218)

# php - 将 div 包裹在 php 循环周围

> ID：13100809
> 
> 赞同：0
> 
> 时间：2012-10-27T13:57:26.763
> 
> 标签：php, css, loops, html, word-wrap

我在尝试将 HTML Div 包装在创建分页链接的 php 部分时遇到了一些麻烦。

我将 div 包裹在代码周围，但由于某种原因，div 出现在分页链接之前（外部）。正如您所看到的，所有 CSS 目前正在做的就是在 div 周围放置一个边框。

我无法弄清楚我错过了什么。任何指针将不胜感激。先感谢您。

PHP/HTML

```
echo '<div class = "pagination">';

/******  build the pagination links ******/
// range of num links to show
$range = 3;

// if not on page 1, don't show back links

  if ($currentpage > 1) {
   // show << link to go back to page 1
   echo " <a  href='{$_SERVER['PHP_SELF']}?currentpage=1'><div class = 'pagination_button'> << </div></a> ";
   // get previous page num
   $prevpage = $currentpage - 1;
   // show < link to go back to 1 page
   echo " <a href='{$_SERVER['PHP_SELF']}?currentpage=$prevpage'><div class = 'pagination_button'> < </div></a> ";
   }

// loop to show links to range of pages around current page
for ($x = ($currentpage - $range); $x < (($currentpage + $range) + 1); $x++) {
   // if it's a valid page number...
   if (($x > 0) && ($x <= $totalpages)) {
      // if we're on current page...
      if ($x == $currentpage) {
         // 'highlight' it but don't make a link
         echo " <div class = 'pagination_button_current'><b>$x</b></div> ";
      // if not current page...
      } else {
         // make it a link
         echo " <a  href='{$_SERVER['PHP_SELF']}?currentpage=$x'><div div class = 'pagination_button'>$x</div></a> ";
      } // end else
   } // end if 
} // end for

   if ($currentpage != $totalpages) {
   // get next page
   $nextpage = $currentpage + 1;
    // echo forward link for next page 
   echo " <a href='{$_SERVER['PHP_SELF']}?currentpage=$nextpage'><div div class = 'pagination_button'> > </div></a> ";
   // echo forward link for lastpage
   echo " <a  href='{$_SERVER['PHP_SELF']}?currentpage=$totalpages'><div div class = 'pagination_button'> >> </div></a> ";
   }
/****** end build pagination links ******/

?>

</div> <!-- End pagination div --> 
```

CSS

```
.pagination {
    border:1px solid;
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T14:04:05.543

HTML 的语法有一些错误

不要写`<<`或者`<`，更好`&lt;&lt;`

甚至不使用`>>`or `>`，更好`&gt;&gt;`

还有一些奇怪的符号，比如`<div div class = 'pagination_button'>`，应该是`<div class = 'pagination_button'>`

至少，只是为了有效性：不要使用`<div>`inside of`<a>`

# python - 如何在 Sublime Text 2 上运行 python？

> ID：13100810
> 
> 赞同：0
> 
> 时间：2012-10-27T13:57:29.070
> 
> 标签：python, sublimetext2, user-input

> **可能重复：**
> [Python 3.1 和 Sublime Text 2 错误](https://stackoverflow.com/questions/9142290/python-3-1-and-sublime-text-2-error)
> [Sublime Text 2 控制台输入](https://stackoverflow.com/questions/10604409/sublime-text-2-console-input)

我刚刚在我的 Mac 上安装了 Sublime Text，我正在尝试用 Python 运行简单的代码，但我不知道该怎么做。

> 打印“你好”

当我按 Cmd+B (Build) 输出 hello 时，这将运行

> s = input('你好吗？')

但是当我尝试运行它时，我总是会得到一个错误。

请帮忙？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T14:04:02.363

我想你打算这样做：s = raw_input('你好吗？')

# delphi - 更改 TdxAlertWindowManager 上的现有消息

> ID：13100815
> 
> 赞同：0
> 
> 时间：2012-10-27T13:57:58.727
> 
> 标签：delphi, devexpress, alerts

我使用这样的一段代码来显示使用`TdxAlertWindowManager`. 这给了我一个警报窗口，在这个窗口中有几条消息。我想做的是显示一个带有第一行文本的警报窗口，并且在同一个窗口上我想放置一个新文本。该程序用于将计算机连接到某些网络共享，我想输入的消息如下所示：

```
Connecting drive y: to \\server\foldery
Connecting drive x: to \\server\folderx 
```

其余股份以此类推。但我不知道该怎么做`TdxAlertWindowManager`

几年前，当我`nxAlert`从 Berg 软件中制作我使用的程序时，但我不再提供它了。这样做是没有问题的。

```
if fAlertWindow = nil then
  dxAlertWindowManager.Show(sHpAlertCaption, AlertText, fIndex).Tag := 1
else
  begin
    fAlertWindow.MessageList.Add(sHpAlertCaption, AlertText, fIndex);
    fAlertWindow.RestartDisplayTimer;
  end; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T17:46:34.177

我不知道如何`TdxAlerWindowManager`显示新行，但我知道如何更改当前消息。只需编辑`Items[0]`. `MessageList`我在计时器里做。

```
var
fAlertWindow: TdxAlertWindow;

procedure TFMain.Timer1Timer(Sender: TObject);
begin
  fAlertWindow := dxAlertWindowManager1.Show('Caption', 'Hello1');
  Timer1.Enabled := False;
end;

procedure TFMain.Timer2Timer(Sender: TObject);
begin
  fAlertWindow.BeginUpdate;
  fAlertWindow.MessageList.Items[0].Text := 'Hello2';
  fAlertWindow.EndUpdate;
  Timer2.Enabled := False;
end; 
```

工作 100%

# jquery - 更改完整日历的按钮位置

> ID：13100820
> 
> 赞同：2
> 
> 时间：2012-10-27T13:58:24.880
> 
> 标签：jquery, fullcalendar

我有一个要求，应该在哪里使用 fullcalendar jquery 插件。但我需要自定义它。就像，我需要将（日/月/周）视图按钮的位置更改到屏幕的最左侧。当我尝试修改 fullcalendar.js 时，我可以看到它只能移动到日历的右侧/左侧。不止于此。我需要将这些按钮放在左侧，就像在页面的侧边栏中一样。可能吗？？或者还有其他选择吗？？

我想一种方法是自己创建按钮并将它们连接到 Fullcalendar 小部件。但我不是 jquery 专业人士，我更愿意尝试更简单的东西。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-27T14:48:53.717

一个简单快捷的解决方案是不理会插件 JS，只需隐藏内置按钮并在您想要的位置添加您自己的按钮。

在您的按钮的单击处理程序中，您触发对关联的插件按钮的单击。就像检查浏览器控制台 html 视图中每个按钮的类并添加到我开始的代码一样简单

例子

```
/* quick hide with script for a test, best done with css */
$('.fc-header-right').hide();

$('#myWeekViewButton').click(function(){
    $('.fc-button-agendaWeek').click();
}); 
```

这在演示站点的浏览器控制台中测试良好

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T20:30:17.477

首先，您可以从 FullCalendar 初始化的标题定义中删除日/月/周按钮。接下来，您可以使用类似于以下的函数来连接自定义按钮以执行视图切换操作：

```
function switchView(viewName) {
  $('#calendar').fullCalendar('changeView', viewName);
} 
```

让我知道这是否有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-11T11:27:28.923

您可以对 headerToolbar 使用 de 预设

```
var calendar = new FullCalendar.Calendar(calendarEl, {
        headerToolbar: {
            center: 'dayGridMonth,timeGridFourDay'
        },..... 
```

[https://fullcalendar.io/docs/custom-view-with-settings](https://fullcalendar.io/docs/custom-view-with-settings)

# c - C99 printf中的可变前导零

> ID：13100821
> 
> 赞同：6
> 
> 时间：2012-10-27T13:58:26.170
> 
> 标签：c, printf

我正在用 C99 编写一个多精度库。根据我的代码编译的平​​台，我选择不同的表示基础。

因此，例如，假设在平台 X 上系统选择 BASE=100; 在平台 Y BASE=10000 上；

假设我代表 big unsigned int 如下：

```
typedef struct a {
       big_enough_uint *digits;
       unsigned int length;
       unsigned int last;
} bigUint; 
```

所以当我在 BASE-100 系统上时，我希望我的打印功能是

```
void my_print(bigUint *A){
     unsigned int i=0;

     fprintf(stdout,"%d",A->digits[0]);
     if(i!= A->last){
          for(;i<=A->last;i++)
                fprintf(stdout,"%02d",A->digits[i]);
     }
     printf(stdout,"\n");
} 
```

在 BASE-10000 系统上，我希望它类似于

```
void my_print(bigUint *A){
     unsigned int i=0;

     fprintf(stdout,"%d",A->digits[0]);
     if(i!= A->last){
          for(;i<=A->last;i++)
                fprintf(stdout,"%04d",A->digits[i]);
     }
     printf(stdout,"\n");
} 
```

我为什么要这样做？？

假设我有以下号码：

```
12345600026789 
```

在 BASE-100 表示中，digits 数组将是（小端形式）：

```
12|34|56|0|2|67|89
         ^ ^ I want ONE LEADING ZEROES 
```

在 BASE-10000 中：

```
12|3456|2|6789
        ^ I want THREE LEADING ZEROES 
```

有没有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-27T14:01:21.970

阅读 中有关`*`字段宽度的占位符`man printf`。

```
printf("%0*d", 3, 42); 
```

给

```
042 
```

和

```
printf("% *s", 42, "alk"); 
```

给

```
<39 spaces>alk 
```

# php - htaccess mod_rewrite 子域到子域

> ID：13100822
> 
> 赞同：0
> 
> 时间：2012-10-27T13:58:28.680
> 
> 标签：php, linux, .htaccess, mod-rewrite

> **可能重复：**
> [使用 mod_rewrite 从子域重定向到主域](https://stackoverflow.com/questions/1698230/using-mod-rewrite-to-redirect-from-subdomain-to-maindomain)

我在 cpanel 上设置了一个现有的子域，它指向 Web 根目录中的一个文件夹。因此，go.example.com 指向位于 www.example.com/go 的 php 应用程序。Cpanel 处理所有这些。

在 www.example.com/go，我有一个 .htaccess 文件如下，它基本上从 url 中删除了 index.php 前端控制器：

```
DirectoryIndex index.php
RewriteEngine on
RewriteCond $1 !^(index\.php|images|css|js|robots\.txt|favicon\.ico)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ ./index.php/$1 [L,QSA] 
```

这一切都很好。

但是，我现在需要添加另一个子域 (api.example.com)，它指向位于 www.example.com/go/api 的另一个文件夹：

首先，应该 api.example.com 指向 www.example.com/go/api 还是 go.example.com/api ？其次，我将如何在 htaccess 文件中实现这一点？

# windows-8 - Windows 应用商店内购买（插件、消耗品、订阅）？

> ID：13100827
> 
> 赞同：4
> 
> 时间：2012-10-27T13:59:32.263
> 
> 标签：windows-8, in-app-purchase, in-app-billing, windows-store-apps, windows-store

1.  是否可以通过 Windows 应用商店购买以下项目作为应用内购买？
    *   添加在
    *   消耗品（一次性使用）
    *   订阅

2.  我在哪里可以找到有关如何在插件、消耗品、订阅的应用内购买中编码的资源？

* * *

是的，我曾尝试使用谷歌搜索示例，但除了有关 Windows 8 的技术文章而不是开发博客/文章之外，我似乎无法在其中找到任何内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-27T14:14:30.927

[要支持应用内购买](http://msdn.microsoft.com/en-us/library/windows/apps/hh694067.aspx)，请执行以下操作：

1.  使用该类设置您的应用程序以进行许可[`LicenseInformation`](http://msdn.microsoft.com/en-us/library/windows/apps/windows.applicationmodel.store.licenseinformation.aspx)（该类也是您对购买订阅设置时间限制的地方）。

2.  将应用中的功能命名为代码：

```
if (licenseInformation.productLicenses.lookup("featureName").isActive) 
{
    // the customer can access this feature
}
else 
{
    // the customer can't access this feature
} 
```

1.  在 Windows 应用商店中配置应用内优惠

> 在将应用提交到商店之前，将每个应用内优惠添加到提交应用工作流程中的高级功能页面。您可以在此处指定应用内优惠的代币、价格和功能生命周期。确保您将其配置为与您在测试时在 WindowsStoreProxy.xml 中设置的配置相同，否则您花费在测试上的所有辛勤工作可能都白费了！

目前不支持消耗品（除非您使用的是 xbox live api？）。有关更多详细信息和解决方法，请参见[此处](http://social.msdn.microsoft.com/Forums/en-US/windowsstore/thread/07222726-3adc-4d49-91d7-ed64381b8057)。

# ios - 加载大量远程图像 - 内存问题

> ID：13100828
> 
> 赞同：2
> 
> 时间：2012-10-27T13:59:48.587
> 
> 标签：ios, memory-management, uiimageview, uiimage

首先，我没有使用 ARC，因为我遇到了更大的问题，我需要完全控制我的内存管理。

情况如下：我需要从服务器加载大量远程 JPEG 图像并将它们显示在滚动视图中。一旦用户向下滚动一点，滚动视图中的顶部图像就会被释放。那是工作，包含的视图都正常释放。问题是，在加载远程图像后，大量内存仍然被分配并且没有被释放。这是我获取远程图像的代码（继承 UIImageView）：

```
- (void)downloadImage    {
    NSData *posterData = [[NSData alloc] initWithContentsOfURL:self.url options:NSDataReadingUncached error:nil];
    UIImage *img = [[UIImage alloc] initWithData:posterData];
    [posterData release];
    self.image = img;
    [img release];
}
// that gets called from:
- (void)setImageFromURL:(NSURL *)_url{
    [NSThread detachNewThreadSelector:@selector(downloadAndLoadImage) toTarget:self withObject:nil];
} 
```

当我使用 Instruments 检查我的代码时，我的 UIImageView 会按预期释放，但以下内容仍然停留在我的内存中并发送垃圾邮件： [![仪器](../Images/e39a340b3052dbb3f57301a5ffbeb9bb.png)](https://i.stack.imgur.com/HrwQv.png)

显然 CFData、Malloc 9.00 KB、NSConcreteData 都是由我的 downloadImage 方法产生的。我究竟做错了什么？这让我发疯......你如何安全地加载大量远程图像内存？我也尝试了 NSURLConnection，但它是更糟然后更好。:(

图像大小从 6 到 25KB 不等。

提前谢谢了！

**更新**

我最终使用了[SDWebImage](https://github.com/SDWebImage/SDWebImage)，它效果很好并且非常易于使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T14:21:12.293

是否在后台线程上下载图像？如果是，那么在哪里`NSAutoreleasePool`？您必须添加：

```
NSAutoreleasePool* pool = [[NSAutoreleasePool alloc] init];

// your downloading thread code here

[pool release]; 
```

或者对于 ARC：

@autoreleasepool {

```
 // your downloading thread code here 
```

}

此外，如果图像下载发生在后台线程上，你不能这样做`self.image = img;`，你应该在主线程上调用它，因为 UI 元素只能从主线程修改：

```
[self performSelectorOnMainThread:@selector(setImage:) withObject:img waitUntilDone:YES]; 
```

实际上[SDWebImage 库](https://github.com/rs/SDWebImage)为您做所有事情，并且有 memcache 和磁盘缓存

# symfony - 控制器中的密码解码

> ID：13100829
> 
> 赞同：5
> 
> 时间：2012-10-27T14:00:03.407
> 
> 标签：symfony

我用它来编码我的密码：

```
 $entity->setSalt(md5(time()));
 $encoder = new MessageDigestPasswordEncoder('sha1');
 $password = $encoder->encodePassword($editForm->get('password')->getData(), $entity->getSalt());
 $entity->setPassword($password); 
```

但 relizar 怎么会反其道而行之呢？也就是说，我怎样才能得到未加密的密码？如果我用这个

```
$entity->getPassword() 
```

给我看这个：

```
xOGjEeMdi4nwanOustbbJlDkug8= 
```

* * *

非常感谢你的答复。我正在尝试创建一个表单，用户可以在其中输入旧密码并验证它是否正确。以我的形式：

```
 ->add('antigua', 'password', array('property_path' => false))
        ->add('password', 'repeated', array('first_name' => 'Nueva contraseña','second_name' => 'Repite contraseña','type' => 'password')); 
```

当我去编辑crud中的用户时，我有这个：在更新操作中：

```
public function updateAction($id)
    {
        $em = $this->getDoctrine()->getEntityManager();

        $entity = $em->getRepository('miomioBundle:Empleado')->find($id);

        if (!$entity) {
            throw $this->createNotFoundException('Unable to find Empleado entity.');
        }

        $editForm   = $this->createForm(new EmpleadoType(), $entity);
        $deleteForm = $this->createDeleteForm($id);

        $request = $this->getRequest();
        **$entity->getPassword() is blank why?**
        $editForm->bindRequest($request);

        if ($editForm->isValid()){
            $em->persist($entity);
            $em->flush();
        }
            return $this->redirect($this->generateUrl('empleado_edit', array('id' => $id)));

        return array(
            'entity'      => $entity,
            'edit_form'   => $editForm->createView(),
            'delete_form' => $deleteForm->createView(),
        );
    } 
```

问题是我无法获得编码密码为空白。（在分贝是正确的）谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-11T16:45:07.527

您应该以与旧密码相同的方式加密，即用户输入的密码。结果加密密码应该是一样的。

```
$encoder = new MessageDigestPasswordEncoder('sha1');
$password = $encoder->encodePassword($editForm->get('antigua')->getData(), $entity->getSalt()); 
```

现在您可以将旧的加密密码与新用户输入的密码进行比较...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T15:42:36.410

无法解密以 sha1 或 md5 编码的密码，这些加密方法被创建为不可能被解密！

**自定义编码器：**

唯一的方法是使用自制方法创建自己的自定义编码器来加密（并解密）您的密码，这里是一个示例：[http ://blogsh.de/2011/09/29/create-a-custom-password -symfony 的编码器/](http://blogsh.de/2011/09/29/create-a-custom-password-encoder-for-symfony/)

您不必在 encodePassword() 中使用 $salt，例如，您可以将每个字母替换为特定数字，以便您可以通过相反的操作来检索密码，您也可以削减盐并在密码中添加部分， ETC...

**纯文本，不推荐：**

或者不太推荐，不要加密你的密码，让他们明文：

```
# app/config/security.yml
security:
    encoders:
        Symfony\Component\Security\Core\User\User: plaintext 
```

# c# - 从 C# 跨平台调用 C++

> ID：13100830
> 
> 赞同：1
> 
> 时间：2012-10-27T14:00:28.710
> 
> 标签：c#, c++, .net, mono

嗨，我正在寻找一个如何从 C# 调用一个简单的 C++ 函数或类的示例，该函数或类可以跨平台工作，即视觉工作室和单声道，我在网上找到的大多数东西似乎只能通过视觉工作室工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T14:36:41.423

您可以使用 SWIG 从 C# 调用 C++ 代码。它似乎与单声道同样适用，请参阅[http://www.swig.org/Doc1.3/CSharp.html](http://www.swig.org/Doc1.3/CSharp.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T14:20:38.820

由于名称重整，您不能调用 C++ 函数，但您可以`extern "C"`通过 P/Invoke 调用函数。

这可能是一个很好的阅读：http: [//msdn.microsoft.com/en-us/library/42b9ea93.aspx](http://msdn.microsoft.com/en-us/library/42b9ea93.aspx)

谷歌当然也很有价值。

我想说您不太可能编写完全跨平台的 P/Invoke 代码，因为跨平台的东西很多。

# .net - 在动态程序集中扩展私有类

> ID：13100835
> 
> 赞同：3
> 
> 时间：2012-10-27T14:00:54.500
> 
> 标签：.net, reflection.emit

我正在开发一个框架，它允许为任意对象定义我所说的表示——您可以将这样的表示理解为对象的一个​​方面。例如：某个应用程序的对象应该由渲染引擎可视化。您无需扩展对象本身的类型，而是提供由服务（渲染引擎）提供的表示，该服务从对象读取数据（并可能在其他表示的上下文中写入数据）。

该框架期望某些接口由应用程序类型实现，以便使用该功能。但是，如果应用程序不提供这些接口的实现，框架会自动继承该类型并为这些接口添加默认实现，如下所示：

框架（托管 C++）：

```
namespace Spoc::Claire
{
  public interface class IEntity
  {
    void DoSomething() ;
  } ;
} 
```

这是一个简单的应用程序（C#）：

```
namespace Spoc.Samples
{
  class Hello
  {
    public Hello()
    {
      Console.WriteLine("Hello world") ;
    }

    static void Main(string[] args)
    {
      Entity.New(typeof(Hello)) ; // creates the "Hello" object within the context of the framework
    }
  }
} 
```

框架在动态程序集中通过反射创建的是：

```
namespace Internal
{
  class Hello : Spoc.Samples.Hello, Spoc.Claire.IEntity
  {
    public void Hello()
    {
      // call the base class constructor
    }
    public void DoSomething()
    {
      // default implementation for IEntity
    }
  }
} 
```

该对象返回给应用程序，并且由于从给定类型继承，因此可以不受任何限制地使用它。

所以有什么问题？如果应用程序将其类型定义为“公共”，则一切运行良好。如果不是，就像上面描述的例子一样，我会从 TypeBuilder::CreateType() 方法中得到一个 TypeLoadException，说“Spoc.Samples.Hello 类型的访问被拒绝”。

乍一看，有人可能会说：好吧，您正试图在其程序集之外扩展一个私有类。我的论点是：是的，我确实从一个私有类派生，但在一个动态程序集中，顺便说一句，用“RunAndCollect”标记，所以它永远不能保存，因此，类型不能在其他地方使用，只能在当前实例中使用应用程序域。从理论上讲，我并没有违反私有原则，因为新类型仍然是私有的，坦率地说，在更严格的意义上：对当前的 AppDomain 实例是私有的。

我玩过朋友装配范式，但除了友谊确实违反了严格的面向对象设计这一事实之外，我很难将我的动态装配指定为朋友。我还找到了 ReflectionPermission 属性，但也停止了该属性。

有没有人可以给我一些建议？

PS：是的，我可以用一种务实的方式说，每个试图利用该框架的对象都需要公开。不幸的是，我将框架视为一种工具，它不应该限制底层语言的可能性，也不应该包含隐含的知识。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T15:13:49.090

由于有人建议我这样做，所以我最终将我的发现作为答案。

为托管动态程序集的 AppDomain 实例设置 RefectionPermissionFlag::MemberAccess 并为程序集提供足够的证据以使其运行完全受信任，动态程序集应该能够调用/设置甚至在受信任的程序集中的私有成员/类型。但是它没有，这已由 MicroSoft 明确说明 - RefectionPermissionFlag::MemberAccess 不适用于动态程序集。

有效的是：[assembly:InternalsVisibleTo("")] 在程序集的 AssemblyInfo.cs 中设置，其私有类型/方法应从动态程序集中访问。苦涩的是，你不能对来自第三方的程序集这样做。

# javascript - Ajax 内容未在 IE7 和 8 上显示 - 在 IE9 和 FF 上有效

> ID：13100837
> 
> 赞同：3
> 
> 时间：2012-10-27T14:01:17.870
> 
> 标签：javascript, jquery, ajax, internet-explorer

我正在尝试将一些内容（相同的域）加载到 div 中。它在 FF 和 IE9 中完美运行，但是 IE7 和 8 什么都没有显示。经过几天的反复试验，在这里和其他地方找到了所有可能的解决方案，我真的需要一些帮助。这是我的代码：

```
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js" charset="utf-8">
</script>

<div id="test">
<script type="text/javascript">
    $('#test').load('http://localhost/abc2012/competitie/team.php?teamID=3');
</script>
</div> 
```

我将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T15:28:42.697

尝试将您的“加载”脚本放入[jQuery 文档就绪](http://docs.jquery.com/Tutorials%3aIntroducing_%24%28document%29.ready%28%29)块中

# c# - 测验总是告诉玩家他/她是正确的

> ID：13100841
> 
> 赞同：0
> 
> 时间：2012-10-27T14:01:33.037
> 
> 标签：c#

我试图在这里做一个简单的小测验，但是无论用户输入什么，用户总是会被告知他们有正确的答案，即使它是错误的。

这是我的源代码：您在这里看到的第一个类是 Program.cs：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace TheQuiz
{
class Program
{
    static void Main(string[] args)
    {

        Console.WriteLine("Welcome to the Quiz! \nYou'll be asked 20 questions! If you get one question wrong, you'll be out.\nHowever if you answer all 20 questions correctly, you'll be the MASTER!");
        Console.WriteLine("\nLet us begin! Are you ready?\n\n");

        Console.WriteLine("(Remember, TYPE in the correct answer. Every answer has ONE word only!\nAnd ALWAYS use a capital letter at the beginning of the answer: 'Answer')\n\n(Press Enter to continue...)");
        Console.ReadKey();
        Console.Clear();

        Console.WriteLine("In what country was Adolf Hitler born?");

        Console.ReadLine();

        if (Answers.AnswerOne.Equals("Austria"))
        {
            Console.WriteLine("Congratulations! {0} is the correct answer!", Answers.AnswerOne);
        }
        else if (!Answers.AnswerOne.Equals(Answers.AnswerOne))
        {
            Console.WriteLine("Sorry! You wrote the wrong answer!\nThe correct answer was {0]", Answers.AnswerOne);
        }
        Console.ReadKey();

    }
}
} 
```

这是我的另一堂课，Answers.cs：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace TheQuiz
{
public class Answers
{

    public static string AnswerOne = "Austria";
    public static string AnswerTwo = "";
    public static string AnswerThree = "";
    public static string AnswerFour = "";
    public static string AnswerFive = "";
    public static string AnswerSix = "";
    public static string AnswerSeven = "";
    public static string AnswerEight = "";
    public static string AnswerNine = "";
    public static string AnswerTen = "";
    public static string AnswerEleven = "";
    public static string AnswerTwelve = "";
    public static string AnswerThirteen = "";
    public static string AnswerFourteen = "";
    public static string AnswerFifteen = "";
    public static string AnswerSixteen = "";
    public static string AnswerSeventeen = "";
    public static string AnswerEighteen = "";
    public static string AnswerNineteen = "";
    public static string AnswerTwenty = "";

}
} 
```

所以正确的答案是奥地利，但是如果用户输入了德国之类的其他东西，它仍然表明它是正确的答案。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T14:09:16.140

您的代码中没有任何地方存储用户答案，您只需编写`Console.ReadLine();`正确答案并将其与自身进行比较。

你可能想要类似的东西

`string userAnswer = Console.ReadLine();`

然后是正确答案和用户答案之间的比较

`if (Answers.AnswerOne.Equals(userAnswer))`

请注意，字符串相等的 Equals 方法区分字符和大小写，因此如果用户键入“Austria”或“austria”，程序会告诉他们它们不正确。

您可以通过告诉比较使用不区分大小写的比较来避免区分大小写，例如使用or 通过使用or`string.Equals(a, b, StringComparison.CurrentCultureIgnoreCase);` 将两个字符串转换为相同的大小写。`String.ToLower(string)``String.ToUpper(string)`

您还需要更改 else if to `else if (!Answers.AnswerOne.Equals(userAnswer))`或 to just else，以便在给出错误答案时显示错误答案消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T14:04:23.550

您正在比较`Answers.AnswerOne`，`"Austria"`这将*始终*是正确的，因为*这就是它的设置。*

您需要做的是将您从用户（从`Console.ReadLine`）获得的内容与`Answers.AnswerOne`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T14:04:55.687

您必须将 console.readline 的值放入一个字符串变量中，然后将其与您的 answer1 值进行比较。另外，请确保检查大小写，因为 c# 区分大小写。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-27T14:05:46.370

Answers.AnswerOne.Equals("Austria") 总是正确的。Answers 是您创建的包含正确答案的类。

您没有做的是将用户响应存储在变量中。您只是从控制台读取它，而不是保留它以进行比较。

# html - 透明像素在 PC 和 iPhone 上呈现不同

> ID：13100847
> 
> 赞同：-6
> 
> 时间：2012-10-27T14:01:42.757
> 
> 标签：html, css

在 Photoshop 中生成透明像素。

在 PC 上它看起来像预期的那样，在 iPhone 上它看起来更暗。

[http://jsfiddle.net/QMrLB/](http://jsfiddle.net/QMrLB/)

```
div {
    background-image: url('/images/pixel-white.png');
} 
```

浏览器：

PC - Chrome 版本 22.0.1229.96 m

iPhone - 21.0.1180.82

像素：PNG-24 / 透明层：rgb 255 255 255，透明度60%

问题：如何使这个像素在 PC、iPhone 和所有其他浏览器上看起来一样？

添加：

![在此处输入图像描述](../Images/4d5d80a002ce8972f9b1d3489af487a1.png)

![在此处输入图像描述](../Images/7008ef6beeada0502fc529affd7b3958.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T14:05:32.673

您不只是使用应该有一个非常特殊的原因：

```
background: rgba(255,255,255,0.6); 
```

或类似的东西。

（这不是评论，请使用`rgba`。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T14:14:38.823

> 如何使这个像素在 PC 和 iPhone 上看起来一样？

你不能。它不仅取决于浏览器，还取决于操作系统和显示设备，以及使用设备的用户如何配置显示。

这是您无法从映像内部或服务器端控制的事情，尤其是当您在这里尝试比较不同的计算机系统时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T16:09:46.290

为了实现与所有浏览器 (IE6+) 的 100% 兼容性，我使用了以下帖子中的建议：

[Alpha 透明 PNG 在 Mobile Safari 中无法正确显示](https://stackoverflow.com/questions/1374618/alpha-transparent-pngs-not-displaying-correctly-in-mobile-safari)

尽管上述主题仅适用于 Mobile Safari 浏览器 - 我确认将透明像素设置为超过 1px 的宽度/高度的做法正在解决所有主要浏览器 (IE6+) 的外观不一致的问题。

换句话说，根据 PNG 的 RFC：[http](http://www.ietf.org/rfc/rfc2083.txt) ://www.ietf.org/rfc/rfc2083.txt，您的透明像素需要至少 2px 宽/高才能在所有浏览器中看起来像预期的那样。

# python - GAE python：在部署时不刷新源代码

> ID：13100848
> 
> 赞同：0
> 
> 时间：2012-10-27T14:01:49.523
> 
> 标签：python, google-app-engine, backend

我的应用程序在 GAE python API 中有错误。

错误是：

文件“/base/data/home/apps/s~graph-coloring/coloring.362739865286670993/main.py”，第 249 行，在 txn Gfile.put()

我已经删除了 txn 功能，但它仍然出现。我也更改了应用程序版本，部署了几次，但 GAE 仍在调用 txn 函数。

可能是什么问题？我在后端运行处理程序

我已经在开发服务器上进行了测试，并且可以正常工作。

**注意：** 似乎每个后端都有自己的应用程序副本？因此，为了部署应用程序，您还需要更新每个后端？似乎这样做解决了我的问题。

有人可以证实这一点吗？

```
2012-10-27 15:43:35.901

invalid handle: 11954713935722084435
Traceback (most recent call last):
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 1511, in __call__
    rv = self.handle_exception(request, response, e)
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 1505, in __call__
    rv = self.router.dispatch(request, response)
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 1253, in default_dispatcher
    return route.handler_adapter(request, response)
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 1077, in __call__
    return handler.dispatch()
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 547, in dispatch
    return self.handle_exception(e, self.app.debug)
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 545, in dispatch
    return method(*args, **kwargs)
  File "/base/data/home/apps/s~graph-coloring/coloring.362739865286670993/main.py", line 252, in post
    db.run_in_transaction(txn,key,alpha)
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/api/datastore.py", line 2433, in RunInTransaction
    return RunInTransactionOptions(None, function, *args, **kwargs)
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/api/datastore.py", line 2571, in RunInTransactionOptions
    ok, result = _DoOneTry(new_connection, function, args, kwargs)
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/api/datastore.py", line 2593, in _DoOneTry
    result = function(*args, **kwargs)
  File "/base/data/home/apps/s~graph-coloring/coloring.362739865286670993/main.py", line 249, in txn
    Gfile.put()
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/ext/db/__init__.py", line 1074, in put
    return datastore.Put(self._entity, **kwargs)
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/api/datastore.py", line 579, in Put
    return PutAsync(entities, **kwargs).get_result()
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/api/apiproxy_stub_map.py", line 604, in get_result
    return self.__get_result_hook(self)
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/datastore/datastore_rpc.py", line 1569, in __put_hook
    self.check_rpc_success(rpc)
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/datastore/datastore_rpc.py", line 1224, in check_rpc_success
    raise _ToDatastoreError(err)
BadRequestError: invalid handle: 11954713935722084435 
```

# python - python中定义的函数在完成后摆脱了变量

> ID：13100850
> 
> 赞同：1
> 
> 时间：2012-10-27T14:02:02.320
> 
> 标签：python, python-3.x

用python做了一个模块。它充当机器代码的模型。我有一个名为累加器的变量。

如在

```
accumulator=0 
```

然而，在我运行一个改变累加器的函数之后，如

```
def function(number):
  accumulator=number
  return 
```

然后打印累加器以显示其中的内容，它只是说`0`。

即使在创建它的函数完成后，我怎样才能使变量保持被识别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T14:29:36.347

这是因为它`accumulator`是全局的，并且函数内部正在绑定一个等于数字`accumulator=number`的新本地名称。`accumulator`在`function`你可以使用`accumulator`但你不能在不使用`global`语句的情况下分配给它。

您将使用以下方法获得所需的结果：

```
def function(number):
    global accumulator
    accumulator = number 
```

注意 return 是多余的，就像 Python 语句不返回一样，它默认为返回`None`。

# python - 从python访问C结构

> ID：13100852
> 
> 赞同：3
> 
> 时间：2012-10-27T14:02:36.563
> 
> 标签：python, c, python-3.x, structure, ctypes

我将创建一个将访问 windows dll 函数的 python 脚本。我成功访问了 dll 及其功能。现在，我有 ac 功能

```
FIOSCR331_API int FIOCreateDeviceInfoList (PDEVINFO pDevInfoSet) 
```

问题是`PDEVINFO`结构。我必须在 python 中创建一个结构并访问这个结构。

C结构如下

```
typedef struct tagDEVINFO
{

    char                    szDeviceName[MAX_PATH];
    char                    szPCSCName[MAX_PATH];
    BOOL                    bPassedFilter;
    BOOL                    bUpdatePassed;
    DWORD                   dwUpdateOrder;
    DWORD                   dwPnP_ID;
    DWORD                   dwFWVersion;
    PDEVEXTENSION   pDevExtension;

} DEVINFO, *PDEVINFO; 
```

C函数如下

```
FIOSCR331_API int FIOCreateDeviceInfoList (PDEVINFO pDevInfoSet)
{

    int nFIOStatus;
    do
    {
            if ( NULL == pDevInfoSet )
            {
                printf("this is inside C code\n");
                    nFIOStatus = IDS_GENERIC_ERROR; //(200)
                    break;
            }
            else
                printf ("\n%s ",pDevInfoSet->szPCSCName);

    }while(false);
} 
```

现在我实现的 Python 代码

```
class DEVINFO(Structure):
    _fields_ = [("szDeviceName",c_char_p),
                ("szPCSCName",c_char_p),
                ("bPassedFilter",c_bool),
                ("bUpdatePassed",c_bool),
                ("dwUpdateOrder",c_ulong),
                ("dwPnp_ID",c_ulong),
                ("dwFWVersion",c_ulong),
                ("pDevExtention",DEVEXTENSION)]

lib = cdll.LoadLibrary('libFIOXXXXX.dll')
print (lib)
devInfo = DEVINFO()
devInfo.szPCSCName = c_char_p(b"this is test")
if devInfo is None:
    print("hi")
else:
    print("britto")
funcCreateList = lib.FIOCreateDeviceInfoList(devInfo)
print (funcCreateList) 
```

我得到的结果是

```
britto
this is inside C code
200 
```

问题是代码总是进入 NULL 条件，即**devInfo 是 NULL**。这是为什么？

**新增**

在上面的python结构DEVINFO中，它包含了另一个结构DEVEXTENSION。我将如何访问 DEVEXTENSION 错误的成员？

```
print (devInfo.pDevExtension.szName) 
```

这抛出：

```
AttributeError: 'LP_DEVEXTENSION" object has no attribute szName 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-27T16:03:21.367

你的结构声明是错误的。它应该是：

```
class DEVINFO(Structure):
    _fields_ = [
        ("szDeviceName", c_char*wintypes.MAX_PATH),
        ("szPCSCName", c_char*wintypes.MAX_PATH),
        ("bPassedFilter", wintypes.BOOL),
        ("bUpdatePassed", wintypes.BOOL),
        ("dwUpdateOrder", wintypes.DWORD),
        ("dwPnp_ID", wintypes.DWORD),
        ("dwFWVersion", wintypes.DWORD),
        ("pDevExtension", POINTER(DEVEXTENSION))
    ] 
```

`DEVINFO`调用时还必须传递一个指向结构的指针`FIOCreateDeviceInfoList()`。我会这样做：

```
funcCreateList = lib.FIOCreateDeviceInfoList(byref(devInfo)) 
```

正如@eryksun 有用地指出的那样，添加

```
lib.FIOCreateDeviceInfoList.argtypes = [POINTER(DEVINFO)] 
```

在调用`FIOCreateDeviceInfoList()`将`ctypes`执行运行时类型检查之前。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T15:56:30.747

告诉 ctypes 参数的类型`FIOCreateDeviceInfoList`是指向 DEVINFO 结构的指针，方法是`argtypes`如下设置它的属性：

```
lib.FIOCreateDeviceInfoList.argtypes = [POINTER(DEVINFO)] 
```

# c - 在c中运行时更改大小数组

> ID：13100853
> 
> 赞同：1
> 
> 时间：2012-10-27T14:02:36.870
> 
> 标签：c

这是我在 C 中的代码，我正在尝试动态更改数组大小，但它使我变为空指针。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
int main() {
char *message = {"xxzz"};

message=realloc(message,5 * sizeof(*message));

if ( message == NULL)printf("Memory exhausted\n");

printf("%s",message);

return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-27T14:04:37.420

您只能传递`realloc`使用`malloc`或`calloc`或其他内存分配函数分配内存的指针。
不这样做会导致未定义的行为，这就是您在代码中所拥有的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T14:05:56.840

改成

```
char *message = malloc(5); 
```

# php - APC 工作但 apc.php 抛出 500

> ID：13100854
> 
> 赞同：1
> 
> 时间：2012-10-27T14:03:26.357
> 
> 标签：php, apc

没有运气找到我的问题的参考，所以......

我在 CENTOS 5.8 x86_64 服务器上安装了 APC 3.1.9，带有 WHM 11.32.5、Apache 2.2、PHP 5.3.18。

它似乎正在工作。使用以下代码上的 apc.enable_cli 选项可以按预期工作：

```
$bar = 'BAR';
apc_store('foo', $bar);
var_dump(apc_fetch('foo')); 
```

输出为：string(3) "BAR"

APC 是从源代码编译并作为 PHP 扩展安装的。为了消除任何可能的配置问题，我在 php.ini 文件中设置了最低配置：

```
[apc]
extension="apc.so"
apc.enabled=1
apc.enable_cli=1 
```

（请注意，无论是 0 还是 1，enable_cli 对我的问题都没有影响）

我遇到的问题是将 apc.php 文件从 APC 源文件夹复制到我的 Web 文件夹的根目录并在浏览器中打开 apc.php 后，服务器抛出 500 错误。真正奇怪的是，如果我从命令行 php apc.php 运行 apc.php，我会看到预期的结果（带有缓存信息的 HTML，但因为它在 CLI 上，所以缓存信息非常少。）

希望这是足够的信息来帮助解决这个傻瓜！

[编辑]

上面的测试代码在浏览器中不起作用。它还会引发 500 错误。

Apache 错误日志显示：

```
[Sat Oct 27 08:12:14 2012] [error] [client 174.51.36.143] SoftException in Application.cpp:357: UID of script "/home/eduki/public_html/apc.php" is smaller than min_uid 
```

# c - 为什么这个 C 程序中的所有输出都相同？

> ID：13100855
> 
> 赞同：4
> 
> 时间：2012-10-27T14:03:28.603
> 
> 标签：c, function, pointers, function-pointers

```
#include<stdio.h>
int main(){
    extern void fun(int);
    void (*p)(int) = fun;
        fun(2);
    (*fun)(2);
    (*p)(2);
    p(2);
    printf("%x %x %x\n",p,fun,*fun);
}

void fun(int i){
    printf("hi %d\n",i);
} 
```

这里所有的函数调用都给出相同的输出。甚至`p, fun, *fun`给出相同的地址。我们如何解释这一点？

```
How can fun and *fun be same? 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-27T14:05:20.913

因为 C 说：

> （C99，6.5.3.2p4）“一元 * 运算符表示间接。如果操作数指向函数，则结果是函数指示符；”

`fun`并且`*fun`具有相同的值，因为它们是等价的。

# android - 如何有效地回收根据以下代码创建的位图？

> ID：13100872
> 
> 赞同：1
> 
> 时间：2012-10-27T14:05:37.027
> 
> 标签：android, bitmap, recycle

我创建了如下所示的位图，

`// create bitmap in the below line Bitmap myBitmap = BitmapFactory.decodeResource(getResources(), R.drawable.googlelogo320x480);` 我已将其设置为 ImageView。

我的问题是： 1> 我需要在上面的位图上显式调用 Bitmap.recycle() 吗？2> 如果是，那么我应该什么时候打电话？我尝试在第 3 行之后立即调用它，即将位图设置为 ImageView 之后，但是我得到一个异常，即 Canvas 试图绘制一个回收的对象。3> 如果在我的代码中从未在位图上调用 recycle()，是否会导致内存泄漏？PS：我正在研究ICS或更高版本。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-27T14:41:43.810

在这种特殊情况下，不，您不应该调用 recycle(); 完成`ImageView`后将调用 recycle()。这已经有一段时间了，ICS 没有采取任何措施来改变这一事实。

当您的代码处理完图像后，您需要调用 recycle()。例如，如果您对一个图像应用 10 个过滤器并在每一步生成一个新的位图，那么您应该在每一步之后对旧位图调用 recycle()。

也就是说，您不能同时拥有无限数量的位图，尤其是大型位图。那是你需要聪明并动态加载/卸载的时候。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T14:18:17.913

不调用 recycle()*不会*导致内存泄漏，但*可能会*导致你的应用程序超出内存限制并爆炸，请参阅下面的应用程序是否符合条件：

1.  如果您只对 ICS 及更高版本感兴趣，则无需担心调用 recycle()，因为 Bitmap 的实际支持数据存储在 Dalvik 控制的内存中。因此，只要您不保留对 Bitmap 的引用，Dalvk 应该能够毫无问题地对其进行 GC。
2.  即使您希望支持 Android 2.3 或更早版本，Bitmaps*最终*也会发布，因此如果您的应用程序不是 Bitmap 密集型的，您也不必担心。
3.  但是，如果您支持 Android 2.3 或更早版本，并且使用大量位图，那么您应该在完成后立即回收位图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T14:09:58.443

试试这个

```
if (myBitmap != null) {
    myBitmap.recycle();
    myBitmap = null;
}
Bitmap original = BitmapFactory.decodeFile(myFile);
myBitmap = Bitmap.createScaledBitmap(original, displayWidth, displayHeight, true);
original.recycle();
original = null; 
```

# javascript - JQuery绑定在同一个元素上，独特的行为

> ID：13100873
> 
> 赞同：0
> 
> 时间：2012-10-27T14:05:38.227
> 
> 标签：javascript, jquery, html, oop

我的问题很简单。我正在使用 CMS，网站的编辑可以在同一页面上拖放多个小部件。

小部件都具有完全相同的 html。例如，可以有一个轮播、照片库等。我已经编写了 javascript 来使这些小部件具有交互性，但是我如何让每个小部件独立运行。

例如，单击一个轮播上的下一个按钮，不应滚动页面中的所有轮播。

所以我不能做这样的事情：

```
 function bindEvents() { 
       $('.next').on({ 
           click: function () { 
              ...
           }
        });
    } 
```

因为所有的小部件都有相同的 html ，例如：

```
<div class='carousel'>
    ....
    <span class='next'>Next</span>
    ....
</div> 
```

我真的很感激一些帮助。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T14:13:27.543

通过使用小部件包装器作为所有代码的上下文，隔离页面中的重复元素通常相当简单

```
$('.next').on('click', function() {
    /* store the current widget element and make all searches from this point*/
    var $carousel = $(this).closest('.carousel');
    $carousel.find('.someClass').doSomething();
    $carousel.find('.anotherClass').doSomethingElse()
}); 
```

只有与按钮相同的轮播中的元素才会受到影响，因为它们仅在按钮的父轮播中被搜索

您可以通过检查额外的小部件类来扩展它

```
<div class='carousel slideshow'>

/* within above handler code */
if( $carousel.is('.slideshow') ){
  /* run code specific to slideshow class of carousel only */
} 
```

# ruby-on-rails - 如何正确覆盖模块混合的方法？

> ID：13100874
> 
> 赞同：2
> 
> 时间：2012-10-27T14:05:42.397
> 
> 标签：ruby-on-rails, ruby, module, include, overriding

我正在使用 Ruby 1.9.2 和 Ruby on Rails 3.2.2。我有以下情况：

```
class MyClass < ActiveRecord::Base
  include MyModule1
  include MyModule2
  include ...

  # Note: This method statement should override the method mixedin by MyModule1.
  def my_method(*args)
    # ...
  end
end

module MyModule1
  def my_method(*args)
    raise "NotImplementedError - The :my_method is not implemented yet"
  end
end

# /app/views/layouts/application.html.erb
if @my_class.my_method
  All right!
end 
```

当我启动我的 Web 应用程序浏览页面时，我得到错误`"NotImplementedError - The :my_method is not implemented yet"`，即使我覆盖了`my_method`包含`MyClass`的内容`MyModule`（如您可以在上面的代码中阅读的那样）。发生这种情况是因为它加载了类之前的视图吗？或者是什么？我应该如何处理这种情况才能`MyClass`正确覆盖`my_method`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T15:30:40.140

肯定比您在此处显示的内容更多，因为您在此处显示的代码肯定不会调用`#my_method`from `MyModule1`。非常仔细地检查`def my_method`in`MyClass`没有拼写错误，并且它实际上出现在一个`class MyClass`块中，而不是在嵌套`class << self`块或类似的东西中。

如果这没有显示任何内容，请转到代码中出现异常的位置，并添加一些调试打印语句：

```
<% p @my_class.class %>
<% p @my_class.class.ancestors %> 
```

查看控制台中打印的内容。

# html - 为什么我的左 div 与底部对齐

> ID：13100877
> 
> 赞同：0
> 
> 时间：2012-10-27T14:05:49.323
> 
> 标签：html, css, alignment

```
<!DOCTYPE html>
<html>
    <head>
        <style type="text/css">
        .left, .right {
            display: inline-block;
            width: 49%;
        }
        .left {
            height: 20px;
            background-color: #dddddd;
        }
        .right {
            height: 100px;
            background-color: #eeeeee;
        }
        </style>
    </head>
    <body>
        <div>
            <div class="left"></div>
            <div class="right"></div>
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T14:07:01.813

因为默认情况下内联元素与基线垂直对齐。你需要改变它。

```
.left, .right { vertical-align: top; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T14:10:50.413

这是因为你正在使用`display:inline-block;`. 所以所有元素都与给定的垂直对齐方式相对应。

你可以做`.left, .right { vertical-align: top; }`

或者只是漂浮你的盒子

`.left, .right { float:left; display:block; }`

IE会更好

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T18:39:01.627

因为你正在使用`display:inline-block;`

```
.left {
    height: 20px;
    background-color: #DDD;
    vertical-align: top;
    } 
```

试试这个。

# c++ - OpenGL 光照

> ID：13100878
> 
> 赞同：1
> 
> 时间：2012-10-27T14:05:56.107
> 
> 标签：c++, opengl

我试图弄清楚如何在 OpenGL 中使用 Lighting 引擎。我的目标是模拟相机方向的手电筒。

```
gluLookAt(  x, y, z,
        x+lx, y+ly,  z+lz,
        0.0f, 1.0f,  0.0f);
GLfloat light_position[] = { x+1, y, z+1, 0.0f };
GLfloat light_direction[] = { x+lx,y+ly,z+lz};
GLfloat light_angle[] ={20};
glLightfv(GL_LIGHT0, GL_POSITION, light_position);
glLightfv(GL_LIGHT0, GL_SPOT_DIRECTION,light_direction);
glLightfv(GL_LIGHT0,GL_SPOT_CUTOFF,light_angle); 
```

但是当我执行它时，只显示少量的环境光，不像一个方向的光束。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-27T14:10:20.127

OpenGL 灯光不会绘制“光束”，它们只会[影响几何体的光照方式](http://en.wikipedia.org/wiki/Blinn%E2%80%93Phong_shading_model)。

可见的“光束”（就像你在浓密的空气中看到的强定向光，如雾或轻云）通常被称为“光轴”。这是您希望看到的效果吗？

[http://developer.amd.com/media/gpu_assets/Mitchell_LightShafts.pdf](http://developer.amd.com/media/gpu_assets/Mitchell_LightShafts.pdf)

* * *

还要记住旧的 OpenGL 1 光照模型是逐顶点的。如果您将光线引导到平坦的表面上，那么要么..

*   细分曲面以具有足够的顶点以使灯光形状清晰可见，
*   在着色器中实现逐像素着色。

# mysql - mysql错误1064创建视图语法

> ID：13100883
> 
> 赞同：0
> 
> 时间：2012-10-27T14:06:54.050
> 
> 标签：mysql

我不想让互联网上的人检查一个相当简单的 MySQL 视图的语法，但我无法弄清楚语法有什么问题。我已经尝试了我能想到的一切，但我一直收到 1064 错误，没有具体的错误消息。tblProjectClient 表具有 tblClient 和 tblProject 的外键。此视图的目的是获取客户的完整列表，并有一列显示他们当前与他们关联的项目数量。如果我不使用 UNION 部分，当没有 ProjectClient 记录时，我会得到一个空列表。有没有人有任何想法？干杯。

```
CREATE VIEW viewClientList AS (
select
  tblClient.strName      AS 'Name',
  (select
     count(*)
   from tblProjectClient
   where (tblProjectClient.intClientID = tblClient.intClientID)) AS 'Projects',
  tblClient.intClientID AS 'ID'
from (tblClient
   join tblProjectClient)) 
   union select 
tblClient.strName as 'Name',
   '0' as 'Projects',
   tblClient.intClientID as 'ID'
   from tblClient
   where (not(tblClient.intClientID 
   in(select intClientID as 'ID' from tblClient JOIN tblProjectClient))); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T14:09:23.377

用 ` not ' 转义列名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T01:06:04.877

感谢您的帮助，但我找到了一个更简单的解决方案。对于其他想要做类似事情的人来说，这里是查询：

```
CREATE VIEW viewClientList AS (
SELECT
tblClient.strName      AS 'Name',
COUNT(tblProjectClient.intProjectID) AS 'Projects',
tblClient.intClientID AS 'ID'
FROM tblClient LEFT JOIN tblProjectClient ON tblClient.intClientID = tblProjectClient.intClientID); 
```

# iphone - 加载到 UIScrollview 中的图像尺寸错误

> ID：13100884
> 
> 赞同：1
> 
> 时间：2012-10-27T14:06:55.110
> 
> 标签：iphone, objective-c, ios

我正在开发一个从 UIImagePickerController 加载图像并将它们加载到 UIScrollview 的应用程序。将图像加载到 ScrollView 工作正常。但是，图像将以不同的比例加载（底部的代码，要演示的图像）。应用程序加载的第一个图像可以正常加载，但第二个图像会缩小得太小。两者都是通过相同的代码块加载的。

通过 UIImagePickerController 首次加载图像：

![全尺寸图像](../Images/7254a1e3f46d4a85892634eee078a476.png)

相同图像的第二次加载：

![图像已加载但未填充视图](../Images/7ce5546ad8deb0d9f5492e7961c21a8b.png)

这是 loadImage 方法，它们都是通过以下方式加载的：

```
-(void)loadImage:(UIImage *)image
{
        imageView.image = image;
    [imageScrollView setFrame: CGRectMake(0.0, 0.0, self.view.frame.size.width, self.view.frame.size.height)];
    [imageScrollView setDelegate:self];

    [imageScrollView setShowsHorizontalScrollIndicator:NO];
    [imageScrollView setShowsVerticalScrollIndicator:NO];
    [imageScrollView setMaximumZoomScale:2.0];

    CGRect rect;
    rect.size.width = imageView.image.size.width;
    rect.size.height = imageView.image.size.height;
    [imageView setFrame:rect];

    [imageScrollView setContentSize:[imageView frame].size];

    float minimumScale = [imageScrollView frame].size.width  / [imageView frame].size.width;
    [imageScrollView setMinimumZoomScale:minimumScale];
    [imageScrollView setZoomScale:minimumScale];

} 
```

尽管花了 4 到 5 个小时来寻找应该是一个简单问题的答案，但我还是被难住了。我自己的努力并没有改变任何东西，我还没有找到有人为这个问题寻求帮助的例子。我需要在我的代码中进行什么更改，以便图像始终在第一次正确显示 - 也就是说，它们显示为缩放以便显示整个图像，或者（更好）图像以最小尺寸完全显示在屏幕上？

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T17:45:46.660

我认为您只需要这样做，`[self.imageScrollView setZoomScale:1.0f];`但您可能会遇到复杂的问题。

由于您已经花了一些时间尝试调试此问题，因此让我介绍一些可以帮助您识别问题的提示。我的第一个建议是回归基础。

1 - 确保您的视图构造正确。如果您启用了自动布局；也许将其关闭以使事情变得超级简单。你应该有你的 UIScrollView 和一个 UIImageView 在里面。

2 - 继续小步骤，将每个视图的背景颜色设置为令人讨厌的颜色。视图=红色；滚动视图=绿色；图像视图 = 蓝色。调整滚动视图的大小，使其比您的视图小；并调整图像视图的大小，使其小于您的滚动视图。在您的图像视图上设置“剪辑子视图”选项。

3 - 在 vi​​ewDidLoad 方法中设置更重要的属性。

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    [self.scrollView setDelegate:self];
    [self.scrollView setMinimumZoomScale:0.5f];
    [self.scrollView setMaximumZoomScale:2.5f];
    [self.imageView setContentMode:UIViewContentModeScaleAspectFit];
} 
```

4 - 注释掉所有 loadImage 代码，除了将 imageView 设置为图像的行。试验一下 imageView 的内容模式设置如何改变视图的行为。请注意，如果您设置`self.imageView.contentMode = UIViewContentModeScaleAspectFit;`将调整图像大小以适应 imageView 内部，而不改变其比例。但是，如果将模式设置为 topLeft；它会将视图的大小调整为图像的大小！

还要考虑滚动视图是如何工作的。您希望滚动视图的框架保持与您在界面构建器中制作的大小相同。如果它必须显示的“内容”大于滚动视图的框架，则滚动视图将滚动。您可以拥有一个小图像，只需将滚动视图的内容高度设置为较大的值，即可在滚动视图中滚动它。如果您将 imageView 框架的大小调整为更大，那么您的滚动视图的框架；您可能也想调整滚动视图的内容区域。但是从你的描述来看，我觉得你不是这个意思。

5 - 当您恢复图像时，只需将其粘贴在图像视图中即可。设置 zoomScale = 1.0 以防您在上一张图像上进行缩放。将内容偏移设置为 0,0，以防您滚动...

```
- (void)imagePickerController:(UIImagePickerController *) picker didFinishPickingMediaWithInfo:(NSDictionary *)info {
    NSLog(@"Picked: %@", info);
    [self dismissModalViewControllerAnimated:YES];
    UIImage * image = [info objectForKey:UIImagePickerControllerOriginalImage];
    [self.imageView setImage:image];
    // You want to resize the image to fit inside our view, not fit view to image, right?
    //[self.imageView setFrame:CGRectMake(0, 0, image.size.width, image.size.height)];
    //[self.scrollView setContentSize:image.size];
    [self.scrollView setZoomScale:1.0f];
    [self.scrollView setContentOffset:CGPointZero];
} 
```

根据您的描述，上述内容应该适合您。抱歉，如果有太多细节，但我认为添加一些提示/技术来可视化事物可能会有所帮助。

**更新** 我应该澄清......您的代码有效，但视图的大小正在由滚动视图缩放；这会影响您的计算。在您的 loadImage 顶部设置 zoomScale=1.0，其余部分应按您的预期工作。也就是说，您可以根据您想要的行为对事物进行更多改进。

--d

# ios - 从 NSMutable 数组中解析/提取和组合字符串

> ID：13100885
> 
> 赞同：0
> 
> 时间：2012-10-27T14:06:56.667
> 
> 标签：ios, nsstring, nsmutablearray

我试图弄清楚如何做到这一点......

我有一个从 RSS 提要填充的 NSMutable 数组，如下所示：

第 1 项（日期、标题、描述）

第 2 项（日期、标题、描述）

第 3 项（日期、标题、描述）

ETC....

我想要做的是循环遍历它并创建一个用于动画代码的字符串，如下所示：

项目 1 日期 - 项目 1 标题 [几个空格] 项目 2 日期 - 项目 2 标题 [几个空格] 等等.....

我了解如何从数组中提取单个元素 - 例如：

```
NSString *testString1 = [[_parseResults objectAtIndex:0] objectForKey:@"date"];
NSString *testString2 = [[_parseResults objectAtIndex:0] objectForKey:@"title"]; 
```

但是对于遍历整个事物并构造组合字符串的最佳方法感到困惑 - 即项目 1 日期 +“-”+ 项目 1 标题 + 项目 2 日期 +“-”+ 项目 2 标题等？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T14:35:08.647

如果你想遍历它们，一个简单的方法可能是这样的：

```
NSString* finalStr = nil;
for (int i = 0; i < [_parseResults count]; i++)
{
    NSDictionary* nextItem = [_parseResults objectAtIndex:i];
    NSString* dateStr = [nextItem objectForKey:@"date"]; // You might want to make the keys be named constants
    NSString* titleStr = [nextItem objectForKey:@"title"];
    ...
    finalStr = [finalStr stringByAppendingFormat:@"\t%@-%@", dateStr, titleStr];
} 
```

最后，`finalStr`将包含您想要的整个字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T14:41:19.700

您可以使用快速枚举，让编译器选择最佳方式来遍历您的数组元素。

```
for(NSDictionary *rssItem in _parseResults)
{
    NSString* dateString = [rssItem objectForKey:@"date"];
    NSString* titleString = [rssItem objectForKey:@"title"];
    result = [result stringByAppendingFormat:@" %@-%@", dateString, titleString];
} 
```

# java - 打印出数组列表中的每个项目

> ID：13100888
> 
> 赞同：0
> 
> 时间：2012-10-27T14:07:21.553
> 
> 标签：java, arraylist

我试图从另一个类中列出数组列表中的项目。

我总共有 3 节课

Tell - 主程序

Item - 创建单个电话簿项目的类

目录 - 存储所有项目的目录对象。

我想要做的是列出在“目录”中创建的数组列表中的所有项目，我这样做是这样的......

告诉

```
if (Directory.entries.size>0)
{
     for (int i=0; i<Directory.entries.size(); i++) // Check size of array
     {
           Directory.entries.get(i).showRecord();
     }
} 
```

目录

```
public void printItem()      
{
     //I HAVE NO IDEA WHAT GOES HERE
} 
```

入口

```
public class Entry
{
String name;
String telNo;
public Entry(String aName, String aTelNo )
{
    setNumber(aTelNo);
    setName(aName);
}
// Add methods here
private void setNumber(String aTelNo)
{
    telNo = aTelNo;
}

public String getNumber()
{
    return telNo;
}

private void setName(String aName)
{
    name = aName;
}

public String getName()
{
    return name;
}

public String toString()
{
    return name + "." + telNo;
}

} 
```

但是，我还没有弄清 printItem() 方法中需要做什么，以允许我打印目录中的各个项目。

有人能指出我正确的方向吗？这是我第一次真正跨多个类使用数组列表，我很困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T14:11:44.187

由于您已经覆盖了`toString`类中的`Entry`，所以您需要做的就是遍历您的 List 并打印每个项目。它将自动调用您的 Entry 类的 toString 并打印返回值：-

将此代码放入您的`print`方法中，该方法在`Directory`类中。

```
public static void print() {
    for (Entry entry: Directory.entries) {
        System.out.println(entry);
    }
} 
```

`entries`是`static`您在`Directory`班级中的列表。

从您的`Tell`课程中，只需调用您的`print`方法：-

```
Directory.print(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T14:19:18.880

现在你没有电话给`printItem()`; 我假设您的呼叫将`.showRecord()`被替换`printItem()`或被删除，因为他们正试图完成同样的事情。

假设您删除`.showRecord()`并仅使用`printItem()`它，并且您正在使用某种类型的集合，其中包含`entries`在`Directory`类中命名的数据成员：

```
public void printItem() {
    for (Entry entry : this.entries) {
        System.out.println(entry);
    }
} 
```

是您所需要的，因为您已经覆盖了类中的`toString()`函数`Entry`。这会为您遍历目录中的每个条目，并一次将它们打印在不同的行上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T14:19:28.773

您可以使用`TreeMap<String, String>`保存电话簿的项目列表。TreeMap 将确保您的键按自然顺序（按人名）排序，并且目录中没有重复的名称（每个人的名字都是唯一的）。打印一个条目将是一个简单的`String treeMap.get(key);`

# c# - 函数动态列表调用

> ID：13100890
> 
> 赞同：-2
> 
> 时间：2012-10-27T14:08:08.230
> 
> 标签：c#, .net

如何使这个函数动态化。我不想要全局变量例如：

**我开始：调用true**

我需要一些数据，但我知道`List<string> Files`不包含。所以`List<string> Files`应该接收数据表单`List<string> RealFile`功能

> for foreach（文件中的字符串 arg（真））{}

**只需给我数据：调用 false** previous 并且不刷新信息

> for foreach（文件中的字符串 arg（假））{}

**刷新并返回新数据：调用 true**我需要新数据

> for foreach（文件中的字符串 arg（真））{}

```
public static List<string> Files = RealFile(bool state);
private static List<string> RealFile(Boolean Reload)
{
    if (!Reload)
        return Files(false);
    try
    {
        return Files(true);
    }
    catch (Exception) { return Files(false); }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T14:10:01.507

您可以使用**[可选参数](http://msdn.microsoft.com/en-us/library/dd264739.aspx)**并将其设置`default value for the parameters`为可选。这使得调用带有或不带参数的 ReadFile 成为可能。`You can call ReadFile(true) or ReadFile();`

```
public static List<string> Files = RealFile(true);
private static List<string> RealFile(Boolean Reload=true)
{
      if (!Reload)
          return Files;
      try
      {
          return Files;
      }
      catch (Exception) { return Files; }
} 
```

# php - Storing images in a database

> ID：13100900
> 
> 赞同：0
> 
> 时间：2012-10-27T14:09:25.183
> 
> 标签：php, objective-c, ios, database, image

I realise that this is quite a broad question, so any general guidance would be helpful.

I have an app, whereby data is downloaded from a sever, and displayed in a table view. Each entry to the tableview also has a picture associated with it. This is where i'm stuck. Do I somehow store the image on my FTP server, and include a link to the image? Or do I directly store the image in the database? Are there any tutorials explaining how to do this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T14:12:40.877

I would say store image path as I'd image file system access to be faster than database.

Read what [Facebook](http://perspectives.mvdirona.com/2008/06/30/FacebookNeedleInAHaystackEfficientStorageOfBillionsOfPhotos.aspx) do/say.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T14:15:22.470

You can either store the path to your file as a VARCHAR field, but then have to verify the data really exists (someone might have deleted the file and the record in the DB won't indicate that), or you store the image itself as a BLOB field.
The 2nd approach is more consistent, but makes the DB larger and make you handle BLOB fields. I'd go with the 1st one unless you really need to store the image in the DB.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-27T14:47:15.963

The best way to do this will be storing images path in **database**, because it is good performance wise and gives you more control over it when you work with directories.

# carousel - 我的轮播图像在 IE9 或 FF 中不显示

> ID：13100901
> 
> 赞同：2
> 
> 时间：2012-10-27T14:09:36.497
> 
> 标签：carousel

我是一个简单的网页设计师和技术作家，我的任务是为我客户的 Jive 网站上的四个页面创建轮播。

我使用了他们在此页面上已有的一些代码：[https](https://communities.bmc.com/communities/community/bsm_initiatives) ://communities.bmc.com/communities/community/bsm_initiatives 。

我已编辑该代码并将其放置在 Jive 概述页面上。图像在 Chrome 中完美显示和旋转，但在 IE9 中无法显示和旋转，在 IE9 中我得到了可怕的红色 X 或在 FF12 中，你只能看到点）。

一页在这里：[https](https://communities.bmc.com/communities/community/tap) ://communities.bmc.com/communities/community/tap 除图像外，所有页面上的代码都相同。

我已经用相对链接和绝对链接两种方式对其进行了测试，但这似乎没有什么区别（不是我认为会，但我们最近将网站从 http 更改为 https，所以我认为值得一试） .

代码如下。谢谢你的帮助！

```
<div id="container">
  <div id="bmc_banner">
    <ul class="bjqs">
      <li><a href="https://communities.bmc.com/communities/community/tap/product_directory?view=documents"><img src="https://communities.bmc.com/communities/servlet/JiveServlet/download/21201-6-31470099/Find-an-Integration.jpg" width="940" height="300" border="0"/></a></li>
      <li><a href="https://communities.bmc.com/communities/docs/DOC-19908"><img src="https://communities.bmc.com/communities/servlet/JiveServlet/download/21201-5-31470094/Market-Solutions.jpg" width="940" height="300" border="0"/></a></li>
      <li><a href="https://communities.bmc.com/communities/community/tap/technology_alliances_directory"><img src="https://communities.bmc.com/communities/servlet/JiveServlet/download/21201-5-31470091/TAP-Partners.jpg" width="940" height="300" border="0"/></a></li>
      <li><a href="http://www.bmc.com/education"><img src="https://communities.bmc.com/communities/servlet/JiveServlet/download/21201-5-31470096/BMC-Education.jpg" width="940" height="300" border="0"/></a></li>
    </ul>
  </div>      
</div>

<script src="https://communities.bmc.com/communities/themes/generated_advanced_skin_global/template/widget/7summits/scripts/basic-jquery-slider.min.js"></script>    
<script>
  $j(document).ready(function() {

    $j('#bmc_banner').bjqs({
      'animation' : 'fade',
      'width' : 940,
      'height' : 300,
      'showControls' : false,
      'animationDuration' : 1000,
      'rotationSpeed' : 6000
    });

  });
</script> 
```

# java - sqlite 查询当前时间和时间戳

> ID：13100902
> 
> 赞同：0
> 
> 时间：2012-10-27T14:09:42.270
> 
> 标签：java, sql, database, sqlite

我的 sqlite3 数据库中有一个表，其中包含以下字段：

```
id text not null, phonenum text not null, timeofcall text not null 
```

时间戳基本上是插入的时间（在我的应用程序中，当有人打电话时，它会插入电话号码以及通话时间。）

我想在最后一分钟内获取特定数字的所有行，例如：

```
SELECT * FROM callstbl WHERE phonenum = '07857463756' AND timeofcall < 1 minute ago; 
```

这样的事情是如何完成的？

编辑：

当我按照顶部海报的建议使用此查询时，我会返回与“phonenum”匹配的每一行，就像它忽略了时间函数一样

```
String sql = "select * FROM callstbl WHERE timeofcall >= datetime('now', '-1 minutes') AND phonenum='"+num+"'"; 
```

我的日期时间字符串（timeofcall）的格式是 yyyy-MM-dd HH:mm:ss

如果我只是这样做

```
SELECT * FROM callstbl WHERE timeofcall >= datetime('now', '-1 minutes'); 
```

我取回数据库中的每一行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T14:45:48.350

假设这`timeofcall`是[SQLite 可以理解的格式](http://www.sqlite.org/lang_datefunc.html)，请使用：

```
... WHERE timeofcall >= datetime('now', '-1 minutes') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T17:00:58.960

我建议最好在你的表中有一个列**timeOfCallMili** ，它以毫秒为单位存储时间。这样，您可以更轻松地根据日期/时间进行查询。您的查询将类似于

```
WHERE timeOfCallMili >= System.currentTimeMillis() - 60000 
```

或者说您想在 7 天内（或任何特定日期）获取记录，您可以使用 Calendar 对象来表示该日期/时间。

```
Calendar queryTime = Calendar.getInstance(); //this instance gets the current date/time as default values
    queryTime.set(Calendar.DATE, queryTime.get(Calendar.DATE) - 7); //setting date to 7 days back
    queryTime.set(Calendar.HOUR, 0);    //setting time to 0, as its set to current time by default. 
    queryTime.set(Calendar.MINUTE, 0); 
```

所以现在你的查询变成了

```
 WHERE timeOfCallMili >= queryTime.getTimeInMillis(); 
```

这样，您就可以在任何类型的基于时间的查询上获得完全的灵活性。

# windows-phone-7 - 在 WindowsPhone 应用程序中显示现有评论和新评论的文本框

> ID：13100903
> 
> 赞同：1
> 
> 时间：2012-10-27T14:09:48.707
> 
> 标签：windows-phone-7

我正在为 Windows Phone 7.5 编写我的第一个应用程序。我试图实现的场景之一的简化​​版本是：

**场景：**我正在尝试为用户添加功能，以便能够在某个“线程”/“帖子”/“标题”上写一个“评论”，同时向他展示其他人已经发布的评论。类似于 Facebook 帖子在 WP 中的显示方式。

**试过：**我试过 ListBox 和 ItemsControl。但是对于这种情况，这些都不容易使用。WP SDK 中是否有任何内置控件，可以帮助我实现上述场景。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T16:08:58.407

您需要找到一些第三方控件。[以这个](http://www.scottlogic.co.uk/blog/colin/2011/07/a-wp7-conversation-view/)为例。

# android - 意图未正确传递数据

> ID：13100906
> 
> 赞同：0
> 
> 时间：2012-10-27T14:10:11.067
> 
> 标签：android, android-intent

我是android开发的新手，面临一些意图问题。我在屏幕上显示了一个项目列表，并希望在单击列表中的任何项目时调用不同的活动。

我正在使用以下代码在单击列表项时调用不同的活动-

```
@Override
    protected void onListItemClick(ListView lv, View view, int position, long id){
        super.onListItemClick(lv, view, position, id);
        //code to call activity to edit the task
        Intent intent = new Intent(this, ReminderModificationActivity.class);
        intent.putExtra("RowId", id);
        Log.i(TAG, "row clickd --> " + id);
        startActivityForResult(intent, ACTIVITY_EDIT);

    } 
```

在上面的代码中，我得到了单击为 1,2 或 3 的列表项的正确 ID。对于“ReminderModificationActivity”，我的 onCreate() 函数中有这段代码-

```
Log.i(TAG, "getIntent --> " + getIntent().getExtras().getInt("RowId") );

        //code to check what row id have been passed
        if(getIntent() != null) {                                        
            Bundle extras = getIntent().getExtras();                     
            int mRowId = extras != null ? extras.getInt("RowId") : -1;    
            // Do stuff with the row id here
            if(mRowId != -1){
                //code if RowId valid

            }
        } 
```

Log.i 中收到的值始终为 0。任何人都可以帮助我了解我在这里缺少的内容吗？请详细说明，因为我对这个平台完全陌生。

ans - ~~int~~同时捕获意图。

提前致谢， 雷

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T14:19:05.197

你为什么不使用 Intent.putExtra 传递一个长值而不是一个包？

然后你就做一个

```
intent.putExtra("RowId", id); 
```

并检索

```
long incomingID = getLongExtra("RowId", -1); 
```

顺便说一句，尝试在两段代码中将数据处理得一样长

# php - SimpleTest，设置 $_SESSION 变量

> ID：13100908
> 
> 赞同：1
> 
> 时间：2012-10-27T14:10:28.053
> 
> 标签：php, simpletest

我正在对此网络服务发出 POST 请求

```
<?
    session_start();
    $request = array();
    $request = $_POST;
    echo $_SESSION['USER'];
    echo $_SESSION['ORG'];
?> 
```

使用最简单的 API，

```
class GetTest extends WebTestCase
{
    /**
     * Unit Test function checking POST requests
     * 
     * @return NULL
     */
    function testPostRequest()
    {
        session_start();
        $_SESSION['ORG'] = 'someorg';
        $_SESSION['USER'] = 'someuser';
        $value = array("postdata"=>"somepost")
        $temp = $this->post("127.0.0.1/create.php",$value);
        print $temp;
    }
} 
```

当我执行 unittest 脚本时，它没有打印任何东西，这意味着会话变量没有被设置。还有其他方法可以使它工作吗？这两个脚本都在同一台服务器上。

# java - 如何获取使用 RMI 发送的对象的字节大小？

> ID：13100912
> 
> 赞同：3
> 
> 时间：2012-10-27T14:10:41.660
> 
> 标签：java, stream, size, inputstream, rmi

我正在使用 MongoDB 和 ConcurrentHashMap java 类实现缓存服务器。当有可用空间将对象放入内存时，它将放入。否则，该对象将保存在 mongodb 数据库中。允许用户为内存缓存指定内存中的大小限制（这显然不应超过堆大小限制！）。客户端可以使用通过 RMI 连接的缓存服务。我需要知道每个对象的大小，以验证是否可以将新传入的对象放入内存。我在互联网上搜索，我得到了这个解决方案来获得大小：

```
 public long getObjectSize(Object o){
    try {

        ByteArrayOutputStream bos = new ByteArrayOutputStream();
        ObjectOutputStream oos = new ObjectOutputStream(bos);
        oos.writeObject(o);
        oos.close();

        return bos.size();      
    } catch (Exception e) {
        return Long.MAX_VALUE;
    }
} 
```

这个解决方案效果很好。但是，在内存使用方面并不能解决我的问题。:( 如果多个客户端同时验证对象大小，这会导致堆栈溢出，对吧？嗯……有人会说：为什么你没有得到特定的对象大小并将其存储在内存中，而另一个对象是需要放入内存检查对象大小？这是不可能的，因为对象的大小是可变的。:(

有人可以帮助我吗？我正在考虑从 RMI 通信中获取套接字，但我不知道该怎么做......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T14:22:19.693

您可以使用自定义 FilterOutputStream 解决限制序列化对象大小的问题：

1.  `write`计算方法调用写入的字节数，以及
2.  `IOException`当计数超过您的限制时抛出一个自定义子类。

然后把这个过滤器放在`ByteArrayOutputStream`和之间`ObjectOutputStream`。

这就是代码的样子（未经测试！）：

```
 public LimitExceededException extends IOException { ... }

    public class LimitingOutputStream extends FilterOutputStream {
        private int limit;
        private int count;

        public LimitingOutputStream(OutputStream out, int limit) {
            super(out);
            this.limit = limit;
        }

        @Override
        public void write(byte b) throws IOException {
            if (count++ > limit) {
                throw LimitExceededException(...);
            }
            super.write(b);
        }

        @Override
        // (This override is not strictly necessary, but it makes it faster)
        public void write(byte[] bytes, int from, int size) throws IOException {
            if (count += size > limit) {
                throw LimitExceededException(...);
            }
            super.write(bytes, from, size);
        }
    }

    /**
     * Return the serialization of `o` in a byte array, provided that it is
     * less than `limit` bytes.  If it is too big, return `null`.
     */
    public byte[] serializeWithLimit(Object o, int limit) {
        try {
            ByteArrayOutputStream bos = new ByteArrayOutputStream();
            LimitingOutputStream los = new LimitingOutputStream(bos, limit);
            ObjectOutputStream oos = new ObjectOutputStream(los);
            oos.writeObject(o);
            oos.close();
            return bos.toByteArray(); 
        } catch (LimitExceededException e) {
            return null;
        }
    } 
```

^(是的，当超出限制时，这使用异常“退出”，但这是 IMO 对异常的一个**很好**的使用。我**挑战**任何不同意这一点的人提出更好的解决方案。把它放在另一个答案中。)

* * *

顺便说一句，这是非常糟糕的代码：

```
} catch (Exception e) {
    return Long.MAX_VALUE;
} 
```

除了`IOException`您可能期望被抛出的 s 之外，您还会捕获各种未经检查的异常，其中大部分是由错误引起的……您需要了解：

1.  `Exception`除非您尝试进行最后的诊断，否则捕捉是不好的做法。

2.  每当您捕获意外异常时，请务必记录它们以便可以记录堆栈跟踪（取决于记录器配置）。或者，如果您的应用程序不使用日志框架，那么让它调用`e.printStackTrace()`.

^(（如果你不想在生产代码中这样做，也不要在 StackOverflow 问题中这样做......'因为一些复制和粘贴编码器可能只是复制它。）)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T04:54:37.083

这是我对在不使用异常的情况下实现所请求功能的挑战的回应。这是@StephenC 对先前答案的相对较小的重新工作，除了这个实际上可以编译和工作。

```
 import java.io.*;

 public class LimitingOutputStream extends FilterOutputStream {
     private int limit;
     private int count;
     private boolean limitExceeded = false;

     public LimitingOutputStream(OutputStream out, int limit) {
         super(out);
         this.limit = limit;
     }

     public boolean isLimitExceeded() {
         return limitExceeded;
     }

     @Override
     public void write(int b) throws IOException {

         if(!limitExceeded) {
            if(count++ > limit) {
                limitExceeded = true;
            } else {
                super.write(b);
            }
         }
     }

     @Override
     // (This override is not strictly necessary, but it makes it faster)
     public void write(byte[] bytes, int from, int size) throws IOException {
         if(!limitExceeded) {
            if ( (count += size) > limit) {
                limitExceeded = true;
            } else {
                super.write(bytes, from, size);
            }
        }
    }

    /**
     * Return the serialization of `o` in a byte array, provided that it is
     * less than `limit` bytes.  If it is too big, return `null`.
     */
    public static byte[] serializeWithLimit(Object o, int limit) throws IOException {
         ByteArrayOutputStream bos = new ByteArrayOutputStream();
         LimitingOutputStream los = new LimitingOutputStream(bos, limit);
         ObjectOutputStream oos = new ObjectOutputStream(los);
         oos.writeObject(o);
         oos.close();
         return los.isLimitExceeded() ? null : bos.toByteArray(); 
    }

 } 
```

# android - 在android中隐藏图像的最佳方法？

> ID：13100913
> 
> 赞同：5
> 
> 时间：2012-10-27T14:10:45.980
> 
> 标签：android, hide, photo

我对android dev很陌生...我想知道在android中隐藏图像的最佳方法是什么。我有一个应用程序，我可以在其中拍照，我想要那张照片，只能在我的应用程序内显示。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-27T14:26:41.050

最好的方法是使用设备的内部存储。根据开发商的网站：

> 您可以将文件直接保存在设备的内部存储中。默认情况下，保存到内部存储的文件对您的应用程序是私有的，其他应用程序无法访问它们（用户也不能）。

您可以在此处找到所有详细信息：[使用内部存储](http://developer.android.com/guide/topics/data/data-storage.html#filesInternal)

请记住，您应该考虑一些事项；例如，如果您提到的那张照片是通过相机意图拍摄的，则必须首先将图像保存在公共文件夹中（即在外部存储中），以便相机正常工作，然后您应该将其移动到内部存储中（或复制它然后删除原件）。

还有其他方法：

*   您也可以尝试将图像保存在外部存储中（其他人可以访问），但在文件名中使用前面的点命名文件以使其不可见，但任何应用程序都可以访问该文件，如果他们知道文件名，并且大多数文件管理器可以显示隐藏文件
*   在文件夹中添加“.nomedia”文件以防止图库显示您的图片。
*   使用不带扩展名的随机字符串命名您的文件。

这真的取决于您是否想让其他应用程序完全无法访问它们，或者将其隐藏一点就足够了

# vim - 征服 SML 退格

> ID：13100914
> 
> 赞同：2
> 
> 时间：2012-10-27T14:10:49.333
> 
> 标签：vim, sml

我在使用 conque 的 vim 中运行 SML 时遇到问题。如果我从终端运行解释器，那么一切正常。如果我将使用 Conque 运行它，它会没问题，除了如果我使用光标它会写“^[[C”或“^[[A”等。（“^H”代表退格）。我能做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T22:50:05.927

您可能在谈论 SML/NJ，在这种情况下，REPL 众所周知缺乏 readline 支持（为什么？我真的不知道）。我猜你看到的那些有趣的击键是模拟箭头按键等的结果。

大多数对 SML/NJ 中缺乏 readline 支持感到恼火的人都使用[rlwrap](http://utopia.knoware.nl/~hlub/rlwrap/)。也许您可以找到一种方法来使这项工作与您选择的环境一起工作。

# ms-word - 如何在word中创建超链接以打开目标文件的包含文件夹

> ID：13100917
> 
> 赞同：2
> 
> 时间：2012-10-27T14:10:49.773
> 
> 标签：ms-word

目的是从 word 文档中的文章创建链接，以打开包含一些相关文件的文件夹。

OSX 上的 MS.Word 超链接可以打开包含此 Applescript 的父文件夹

```
tell application "Finder"
  open POSIX path of ((container of (path to me))
end tell 
```

如何在 Windows 上的 MS.Word 中创建这样的功能？所以单击一个单词超链接会打开一个文件夹，该文件夹是链接指向的文件的包含文件夹？

如果父文件夹位置发生更改，则无法从 MS.Word 创建到父文件夹的快捷方式并指向它。有没有办法在不使用 3rd 方程序的情况下在 Windows 中创建具有相对路径的快捷方式？

# java - Java中4gl“RECORD LIKE”语句的等价物

> ID：13100921
> 
> 赞同：2
> 
> 时间：2012-10-27T14:11:26.167
> 
> 标签：java, informix, 4gl

在 4gl 中，语句`DEFINE IO_AFPOPF1 RECORD LIKE AFPOPF1.*`表示将表 AFPOPF1 的所有内容分配给 IO_AFPOPF1 变量。如果 AFPOPF1 表发生更改，IO_AFPOPF1 也会自动更改。

我可以在 Java 中执行相同的功能吗？现在我只定义一个类来存储表 AFPOPF1 的所有内容。如果 AFPOPF1 发生变化，我必须在班级中添加或删除字段。例如下面的代码：

```
public class Afpopf1 {
    private int var1;
    private int var2;

    public Afpopf1(int var1,int var2) { this.var1=var1; this.var2=var2;}
    public int getVar1() { return var1; } 
    public int getVar2() { return var2; }
} 
```

# perl - 如何在 Perl 中打印相对路径的文件夹？

> ID：13100936
> 
> 赞同：1
> 
> 时间：2012-10-27T14:13:41.860
> 
> 标签：perl, directory

我有一个脚本，它采用文件夹的相对路径。有没有办法获取指向的文件夹/目录的名称？如果需要，它可能是绝对路径，我将使用正则表达式来剥离它。

假设我正在执行：

```
/example/a/b/c/d/perl.pl 
```

例如 1

如果他们输入：

```
../../ 
```

我希望它能够返回“b”（或到 b 的绝对路径，我可以编写一个脚本来剥离它）。

例2

如果他们输入：

```
./ 
```

我希望它能够返回“d”（或者再次返回到 d 的绝对路径）。

有没有一种简单的方法可以做到这一点，因为我能想到的唯一方法是计算数量`../`并使用它在文件的绝对路径上执行正则表达式，这需要大量处理。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-27T14:36:54.370

这很简单 - 只需使用[Cwd](https://metacpan.org/module/Cwd)模块：

```
use Cwd 'abs_path';
my $abs_path = abs_path($file); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T17:44:05.617

相对于正在执行的脚本（根据您的要求）：

```
use Cwd            qw( realpath );
use File::Basename qw( dirname );

my $script_dir = dirname(realpath($0));
my $abs_path = real_path("$script_dir/$rel_path"); 
```

相对于当前工作目录：

```
use Cwd qw( realpath );

my $abs_path = realpath($rel_path); 
```

在这两种情况下，符号链接都会被解析。File::Spec 提供不解析符号链接的函数，如果这是您喜欢的。

# php - 使用 php 脚本为数据库创建表，不起作用？

> ID：13100937
> 
> 赞同：2
> 
> 时间：2012-10-27T14:13:49.287
> 
> 标签：php

我正在尝试从 php 为我的数据库创建表。我有点想建立一个社交网站，无论如何，我编写了代码并且正在工作，但是新表不会在数据库中创建，我不知道代码似乎有什么问题。帮助将不胜感激谢谢！

```
<?php

    $host = "host";   
    $user = "user";
    $pswd = "password";
    $dbnm = "db";

    $conn = @mysqli_connect($host, $user, $pswd, $dbnm);
    if (!$conn)
        die ("<p>Couldn't connect to the server!<p>");

    $selectData = @mysqli_select_db ($conn, $dbnm);
    if(!$selectData)
    {
        die ("Database Not Selected");
    }

        $sql = "CREATE TABLE IF NOT EXIST 'friends' 
            (
            'friend_id' INT NOT NULL auto_increment, 
            'friend_email' VAR CHAR(20) NOT NULL,
            'password' VAR CHAR(20) NOT NULL,
            'profile_name' VAR CHAR(30) NOT NULL,
            'date_started' DATE NOT NULL,
            'num_of_friends' INT unsigned,
            PRIMARY KEY ('friend_id')
            )";

    $query_result = @mysqli_query($conn, $sql);

    mysqli_close($conn);

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T14:21:56.367

首先，在调试脚本时，去掉函数前的“@”。他们将抑制警告，否则会迅速引导您发现错误。

您的 create table 语句有很多语法错误。尝试更正的 -

```
 CREATE TABLE IF NOT EXISTS `friends` 
        (
        `friend_id` INT NOT NULL auto_increment, 
        `friend_email` VARCHAR(20) NOT NULL,
         `password` VARCHAR(20) NOT NULL,
        `profile_name` VARCHAR(30) NOT NULL,
        `date_started` DATE NOT NULL,
        `num_of_friends` INT unsigned,
        PRIMARY KEY (`friend_id`)
        ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T14:26:28.990

您还需要在运行脚本时检查错误，因此要么关闭抑制（删除 @ 符号），要么在运行后检查错误。

实际上有多个错误：

1.  你有`EXIST`而不是`EXISTS`
2.  您使用了单引号 ( ' ) 而不是 ` 标记
3.  你有`VAR CHAR`两个词，而不是正确的`VARCHAR`（一个词）

    ```
     CREATE TABLE IF NOT EXISTS  `friends`  
          (  
          `friend_id` INT NOT NULL auto_increment,   
          `friend_email` VARCHAR(20) NOT NULL,  
          `password` VARCHAR(20) NOT NULL,  
          `profile_name` VARCHAR(30) NOT NULL,  
          `date_started` DATE NOT NULL,  
          `num_of_friends` INT unsigned,  
          PRIMARY KEY (`friend_id`)  
          ) 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T14:29:23.707

您在 CREATE TABLE 中有错误。你应该写`CREATE TABLE tablename IF NOT EXISTS`（EXISTS 应该以 S 结尾）。我还建议您不要抑制错误，也不要在每次查询后打印错误，如下所示：

```
if(!mysqli_query($conn, $sql) { die("The query ".$sql." failed: ".mysqli_eror } 
```

# youtube-api - 如何使用 yt:uploaderId 与 yt:userId

> ID：13100940
> 
> 赞同：1
> 
> 时间：2012-10-27T14:13:59.770
> 
> 标签：youtube-api

希望澄清如何正确解释出现在收藏夹和播放列表视频源中的 yt:uploaderId 值。

它似乎始终包含 24 个字符（有人可以确认这是一个固定的字段长度吗？），似乎包含一个 22 个字符的 yt:userId（同样有助于了解该字段是否始终为 22 个字符），前面加上字符“UC”。

所以问题是，我怎样才能准确地确定播放列表和收藏夹中的原始上传者？

将 yt:uploaderId 减去前两个字符作为始终映射到正确的相应 yt:userId 对我来说是否安全？

了解固定字段长度是否有助于 db 设计，例如我是否需要 char 或 varchar 字段以及多长时间。任何人都可以指出我的最佳实践指南？

已阅读有关 V2.1 的澄清和处理用户唯一标识符（使用 yt:userId，如果我理解正确的话）和用户显示名称（根据 yt:userName 的属性）的最新出版物，但这个查询是关于 Id 的更详细点实际上在 yt:uploaderId 字段中使用的似乎被省略了？

任何和所有的见解都表示赞赏！向那些不厌其烦的人致以诚挚的问候，并提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T01:17:11.960

`yt:userId`是给定用户的唯一标识符。`yt:userId`前缀 with`UC`是给定频道的唯一标识符，表示该用户上传的视频。

在 GData API 的第 1 版和第 2 版（以及 2.1）中，在构建用于访问配置文件或用户上传供稿的 URL 时，您可以或多或少地交替使用普通的 YouTube 用户名、`yt:userId`值或`UC`+值。`yt:userId`（在某些极端情况下，某些操作不支持一种格式，在这种情况下最好[提交一个错误](https://code.google.com/p/gdata-issues/issues/entry?template=YouTube%20%28Defect%20Report%29)。）

在 API 的第 3 版中，与旧版本没有相同的遗留兼容性问题，这些值用于不同的目的。普通的 YouTube 用户名根本没有真正使用，用户 id 值用作频道 id，`UC`+ 用户 id 值用作播放列表 id。

# java - 无法从我的自定义 Layout 类调用方法

> ID：13100944
> 
> 赞同：1
> 
> 时间：2012-10-27T14:14:56.347
> 
> 标签：java, android, roboguice

我有一个奇怪的问题，认为应该简单。我已经创建了我的自定义操作栏类，并将它放在一些活动中。我希望我的自定义操作栏有方法“设置文本”和“setBackButtonVisible”。这些方法应该从我的操作栏所在的活动类中调用。关键是从我的活动类主体中调用这些方法会导致错误。现在我被迫将按钮/文本视图从我的操作栏注入到活动中，以便我可以操纵它们。（请注意，我使用的是 RoboGuice 2.0）类，您可以在错误日志中看到。

编辑：我忘了提到我的 MainMenuActivity 位于 TabBar

动作栏类：

```
 public class CustomActionBar extends RelativeLayout{

    //View v;

    @InjectView(R.id.action_back_button)
    Button backButton;

    @InjectView(R.id.action_bar_text)
    TextView    tv;

    public CustomActionBar(Context context, AttributeSet attrs){
        super(context, attrs);

        LayoutInflater layoutInflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        /*v = */layoutInflater.inflate(R.layout.action_bar, this);

    }

    public CustomActionBar(Context context) {
        super(context);

        LayoutInflater layoutInflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        /*v = */layoutInflater.inflate(R.layout.action_bar, this);

    }

    // Cannot invoke those methods from MainMenuActivity
    public void setText(String text){
        tv.setText(text);
    }

    public void setBackButtonVisible(boolean set){
        // invoking this method in MainMenuActivity constructor will produce funny error
        if(!set){
            backButton.setVisibility(View.GONE);
        }else{
            backButton.setVisibility(View.VISIBLE);
        }
    }
} 
```

活动课

```
 @ContentView(R.layout.activity_main_menu)
    public class MainMenuActivity extends RoboActivity {

    @InjectView(R.id.action_back_button)
    Button actionBackButton;

    @InjectView(R.id.action_bar_text)
    TextView actionBarText;

    @InjectView(R.id.action_bar)
    CustomActionBar actionBar;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        actionBackButton.setVisibility(View.GONE);
        // Hardcoded title for actionbar

        // This one works: actionBarText.setText("TEST");
        actionBar.setText("Main Menu");
    }

    public void onBackButtonClick(View v){
         this.finish();
     }

    } 
```

错误日志

```
main java.lang.reflect.InvocationTargetException
at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:507)
    at roboguice.event.eventListener.ObserverMethodListener.onEvent(ObserverMethodListener.java:32)
    at roboguice.event.EventManager.fire(EventManager.java:130)
    at roboguice.activity.RoboActivity.onCreate(RoboActivity.java:80)
    at com.activities.MainMenuActivity.onCreate(MainMenuActivity.java:31)
    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1623)
    at android.app.ActivityThread.startActivityNow(ActivityThread.java:1499)
    at android.app.LocalActivityManager.moveToState(LocalActivityManager.java:127)
    at android.app.LocalActivityManager.startActivity(LocalActivityManager.java:339)
    at android.widget.TabHost$IntentContentStrategy.getContentView(TabHost.java:731)
    at android.widget.TabHost.setCurrentTab(TabHost.java:403)
    at android.widget.TabHost.addTab(TabHost.java:242)
    at com.altiweb.explorius.activities.TabHostActivity.addTab(TabHostActivity.java:77)
    at com.altiweb.explorius.activities.TabHostActivity.onCreate(TabHostActivity.java:33)
    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1623)
    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1675)
    at android.app.ActivityThread.access$1500(ActivityThread.java:121)
    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:943)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:130)
    at android.app.ActivityThread.main(ActivityThread.java:3701)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:507)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:866)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:624)
    at dalvik.system.NativeStart.main(Native Method)
    Caused by: android.view.InflateException: Binary XML file line #7: Error inflating class com.custom.ActionBar
    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:581)
    at android.view.LayoutInflater.rInflate(LayoutInflater.java:623)
    at android.view.LayoutInflater.inflate(LayoutInflater.java:408)
    at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
    at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:227)
    at android.app.Activity.setContentView(Activity.java:1657)
    at roboguice.inject.ContentViewListener.optionallySetContentView(ContentViewListener.java:21)
    ... 29 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T15:13:09.237

好，我知道了。

这是我的可怕错误。

出了什么问题？我通过调用我的自定义 ActionBar

```
 @InjectView(R.id.action_bar)
 CustomActionBar actionBar; 
```

关键是 R.id.action_bar 不是操作栏 ID ...这是我的操作栏主布局 ID ...

# powershell - PowerShell ScriptBlock 和多种功能

> ID：13100945
> 
> 赞同：2
> 
> 时间：2012-10-27T14:15:09.180
> 
> 标签：powershell, powershell-remoting, scriptblock

我写了以下代码：

```
cls
function GetFoo() { 
    function GetBar() {
        $bar = "bar"
        $bar
    }

    $foo = "foo"
    $bar = GetBar
    $foo
    $bar
}

$cred = Get-Credential "firmwide\srabhi_adm"
$result = Invoke-Command -Credential $cred -ComputerName localhost 
-ScriptBlock ${function:GetFoo}
Write-Host $result[0]
Write-Host $result[1] 
```

它有效，但我不想`GetBar`在`GetFoo`.

我可以做这样的事情吗？

```
cls
function GetBar() {
    $bar = "bar"
    $bar
}

function GetFoo() {     
    $foo = "foo"
    $bar = GetBar
    $foo
    $bar
}

$cred = Get-Credential "firmwide\srabhi_adm"
$result = Invoke-Command -Credential $cred -ComputerName localhost 
-ScriptBlock ${function:GetFoo; function:GetBar; call GetFoo}
Write-Host $result[0]
Write-Host $result[1] 
```

基本上我有选择地将我想要的函数放在 ScriptBlock 中，然后调用其中一个。这样我就不必在函数内部定义函数，我可以通过注入我想成为该 ScriptBlock 一部分的函数来构造 ScriptBlock。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T09:00:23.263

问题是`Invoke-Command`只能看到里面的东西`ScriptBlock`，看不到外面定义的功能。如果您真的想要 - 您可以在一行中运行所有内容，如下所示：

```
$result = Invoke-Command  -ComputerName localhost  -ScriptBlock { function GetBar() { $bar = "bar"; $bar }; function GetFoo() { $foo = "foo"; $bar = GetBar; $foo;  $bar }; GetFoo } 
```

但我个人建议您将函数保存在脚本中并`Invoke-Command`使用`-FilePath`参数调用，如下所示：

```
$result = Invoke-Command  -ComputerName localhost  -FilePath "\1.ps1" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-05-23T19:44:12.457

我知道这是一个旧线程，但我希望它可以帮助某人。

```
[CmdletBinding()]
param()
$barScriptBlock = {
    function GetBar() {
        $bar = "bar"
        $bar
    }
}
$fooScriptBlock = {
    function GetFoo() {     
        $foo = "foo"
        $bar = GetBar
        $foo
        $bar
    }
}
# Concatenate all functions into a script block; add a parameter for extra credit.
$scriptBlockString = @"
param(`$hello)
$($barScriptBlock.ToString())
$($fooScriptBlock.ToString())
`$hello
GetFoo
"@
Write-Verbose $scriptBlockString
# Convert combined string to script block.
$finalScriptBlock = [ScriptBlock]::Create($scriptBlockString)
# Run synchronously, passing runtime parameter.
$result = & $finalScriptBlock "Hola"
# (Async results would not be reiably accessed here yet.)
Write-Host $result[0]
Write-Host $result[1]
Write-Host $result[2] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-06-07T11:33:40.290

我最近得到了这个工作：

```
function GetBar() {
    $bar = "bar"
    $bar
}

function GetFoo() {     
    $foo = "foo"
    $bar = GetBar
    $foo
    $bar
}

$NewScriptBlock = [scriptblock]::Create("function GetBar() { ${function:GetBar} } function GetFoo() { ${function:GetFoo} } GetFoo")
Invoke-Command -ComputerName localhost -ScriptBlock $NewScriptBlock 
```

或者，您可以使用以下方法备用一条线：

```
Invoke-Command -ComputerName localhost -ScriptBlock ([scriptblock]::Create("function GetBar() { ${function:GetBar} } function GetFoo() { ${function:GetFoo} } GetFoo")) 
```

诀窍是 ScriptBlock 类的 Create 方法将代码添加到函数*内部*，但没有添加标题和最终括号。您需要自己添加，加上最后的调用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-17T15:42:09.010

基于[Joe Zamora 的回答](https://stackoverflow.com/questions/13100945/powershell-scriptblock-and-multiple-functions/61977716#61977716)，这里有一个我认为更适合这个问题的命令：

```
$result = Invoke-Command -Credential $cred -ScriptBlock ([ScriptBlock]::Create("${function:GetFoo}; ${function:GetBar}; GetFoo")) 
```

# ios - NSNotification MPVideoplayercontroller 崩溃 - ARC

> ID：13100955
> 
> 赞同：0
> 
> 时间：2012-10-27T14:16:35.327
> 
> 标签：ios, automatic-ref-counting, mpmovieplayercontroller, nsnotifications

我的应用程序使用视图控制器（视图 1）中显示的视频作为应用程序菜单/导航的背景。按钮位于视频的顶部，根据视频的位置，按钮导航到应用程序的不同部分。它工作正常，直到我导航到另一个部分（视图 2 等），然后返回到视图 1。之后，通知在视图 1 中崩溃：

> [NSKeyValueObservance movieStateChangeCallback:]：无法识别的选择器发送到实例 0x13e920 2012-10-27 08:50:04.830 AppName[13707:707] ***由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[NSKeyValueObservance movieStateChangeCallback:]：无法识别选择器发送到实例 0x13e920'

以下是我添加到 View 1 的 init 方法的通知：

```
 [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(movieStateChangeCallback:) name:MPMoviePlayerPlaybackStateDidChangeNotification object:player];

       [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(movieFinishedCallback:) name:MPMoviePlayerPlaybackDidFinishNotification object:player]; 
```

*player*是 View 1 的属性，因此声明如下：

```
@property (strong) MPMoviePlayerController *player; 
```

我意识到这可能意味着播放器正在被释放？当我返回视图 1 时，包括视频在内的其他一切都正常，只是通知崩溃了。

当用户返回视图 1 时，它正在重新初始化。

我正在使用 ARC。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T15:30:44.663

如果视图控制器当前不可见并且发生内存警告，它将删除所有视图。然后当它再次可见时重新创建它们。当 View1 被释放时，您并没有将自己从通知中心移除，因此它仍然要求接收通知。

尝试将此添加到您的 View1 类：

```
- (void)dealloc {
    [[NSNotificationCenter defaultCenter] removeObserver:self];
} 
```

# haskell - 受限 Monoid 类型值组合

> ID：13100958
> 
> 赞同：11
> 
> 时间：2012-10-27T14:16:59.850
> 
> 标签：haskell

我有一个数据类型，它是一个实例，`Monoid`因此我可以获得很好的值组合：

```
data R a = R String (Maybe (String → a))

instance Monoid (R a) where
  mempty = R "" Nothing
  R s f `mappend` R t g = R (s ++ t) (case g of Just _ → g; Nothing → f) 
```

接下来，我不想将所有`R a`值相互结合，这在我的领域没有意义。所以我介绍幻象类型`t`：

```
{-# LANGUAGE DataKinds, KindSignatures #-}

data K = T1 | T2
data R (t ∷ K) a = R String (Maybe (String → a))

instance Monoid (R t a) where … 
```

所以我有“限制”的价值观：

```
v1 ∷ R T1 Int
v2 ∷ R T2 Int
-- v1 <> v2 => type error 
```

和“无限制”：

```
v ∷ R t Int
-- v <> v1 => ok
-- v <> v2 => ok 
```

但现在我有一个问题。例如，当涉及到`v30`时：

*   我会有大量的~~数据~~类型声明（`data K = T1 | … | T30`）。我可以通过使用类型级别的自然来获得无限的幻像类型来解决（治愈比疾病更糟糕，不是吗？）
*   在依赖代码中编写类型签名时，我应该记住要使用哪种幻像类型（这*真的很*烦人）

有没有更简单的方法来以某种方式限制构图？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T11:52:53.447

**寻找 ConstrainedMonoid**

我最近遇到了一个非常相似的问题，我终于解决了本文末尾描述的方式（不涉及幺半群，而是使用类型上的谓词）。但是，我接受了挑战并尝试编写一个`ConstrainedMonoid`类。

这是想法：

```
class ConstrainedMonoid m where
  type Compatible m (t1 :: k) (t2 :: k) :: Constraint
  type TAppend m (t1 :: k) (t2 :: k) :: k
  type TZero m :: k

  memptyC :: m (TZero m)
  mappendC :: (Compatible m t t') => m t -> m t' -> m (TAppend m t t') 
```

好的，有一个简单的实例，它实际上并没有添加任何新的东西（我交换了`R`s 类型参数）：

```
data K = T0 | T1 | T2 | T3 | T4
data R a (t :: K) = R String (Maybe (String -> a))

instance ConstrainedMonoid (R a) where
  type Compatible (R a) T1 T1 = ()
  type Compatible (R a) T2 T2 = ()
  type Compatible (R a) T3 T3 = ()
  type Compatible (R a) T4 T4 = ()
  type Compatible (R a) T0 y = ()
  type Compatible (R a) x T0 = ()

  type TAppend (R a) T0 y = y 
  type TAppend (R a) x T0 = x
  type TAppend (R a) T1 T1 = T1
  type TAppend (R a) T2 T2 = T2
  type TAppend (R a) T3 T3 = T3
  type TAppend (R a) T4 T4 = T4
  type TZero (R a) = T0

  memptyC = R "" Nothing
  R s f `mappendC` R t g = R (s ++ t) (g `mplus` f) 
```

不幸的是，这需要大量冗余类型实例（`OverlappingInstances`似乎不适用于类型族），但我认为它在类型级别和值级别都满足幺半群定律。

但是，它没有关闭。它更像是一组不同的幺半群，索引为`K`. 如果这就是你想要的，它应该就足够了。

**如果你想要更多**

让我们看一个不同的变体：

```
data B (t :: K) = B String deriving Show

instance ConstrainedMonoid B where
  type Compatible B T1 T1 = ()
  type Compatible B T2 T2 = ()
  type Compatible B T3 T3 = ()
  type Compatible B T4 T4 = ()

  type TAppend B x y = T1
  type TZero B = T3 

  memptyC = B ""
  (B x) `mappendC` (B y) = B (x ++ y) 
```

这可能是一个在您的领域中有意义的案例——但是，它不再是一个幺半群了。如果您尝试制作其中之一，它将与上面的实例相同，只是使用不同的`TZero`. 我实际上只是在这里推测，但我的直觉告诉我，唯一有效的幺半群实例正是像 for `R a`; 仅具有不同的单位值。

否则，您最终会得到一些不一定具有关联性的东西（我认为可能还有一个终端对象），它在合成下*不会*关闭。如果您想将组合限制为等于`K`s，您将失去单位值。

**更好的方法（恕我直言）**

以下是我实际解决问题的方法（当时我什至没有想到幺半群，因为它们无论如何都没有意义）。该解决方案基本上剥离了除`Compatible`“约束生产者”之外的所有内容，它作为两种类型的谓词留下：

```
type family Matching (t1 :: K) (t2 :: K) :: Constraint
type instance Matching T1 T1 = ()
type instance Matching T2 T1 = ()
type instance Matching T1 T2 = ()
type instance Matching T4 T4 = () 
```

像这样使用

```
foo :: (Matching a b) => B a -> B b -> B Int 
```

这使您可以完全控制兼容性的定义，以及您想要什么样的组合（不一定是单曲面），而且它更通用。它也可以扩展到无限种：

```
-- pseudo code, but you get what I mean
type instance NatMatching m n = (IsEven m, m > n) 
```

* * *

回答你的最后两点：

*   是的，您必须在您的种类中定义足够多的类型。但我认为无论如何他们都应该自我解释。您还可以将它们分成组，或定义递归类型。

*   您主要需要在两个地方提醒索引类型的含义：约束的定义，以及工厂方法（`mkB1 :: String -> B T1`）。但我认为这不应该是问题，如果类型命名得当。（不过，这*可能*非常多余——我还没有找到避免这种情况的方法。可能 TH 会起作用。）

**这会更容易吗？**

我实际上希望能够写的是以下内容：

```
type family Matching (t1 :: K) (t2 :: K) :: Constraint
type instance Matching T1 y = ()
type instance Matching x T1 = ()
type instance Matching x y = (x ~ y) 
```

我担心这有严重的理由不被允许；但是，也许，它只是没有实施......

**编辑：**如今，我们有[封闭型家庭](http://www.haskell.org/haskellwiki/GHC/Type_families#Detailed_definition_of_type_synonym_families)，正是这样做的。

# python - 根据元素的比较从嵌套列表中删除项目（子列表）

> ID：13100963
> 
> 赞同：3
> 
> 时间：2012-10-27T14:17:17.390
> 
> 标签：python, for-loop, nested-lists

第一次在这里发帖，所以我希望我没有重复任何问题（不过我检查过）。

这是交易：

我有一个列表，包含 4 个元素子列表，例如`[[10,1,3,6],[22,3,5,7],[2,1,4,7],[44,3,1,0]]`

我想做的是：

1）删除所有第四个子元素等于零的元素，例如`[44,3,1,0]`（简单的部分）

2）删除具有相同第二个元素的项目，仅保留具有最大第一个元素的项目，例如`[[10,1,3,6],[2,1,4,7]] -> [10,1,3,6]`

我一直在尝试使用嵌套循环和第二个列表来获取我想要保留的元素的解决方案，但我似乎无法确定它。

我可以使用一个优雅的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T14:42:21.880

如果 listA 是您的原始列表，而 listB 是您的新列表，似乎第 (2) 部分可以通过遍历 listA 来解决，检查当前元素（嵌套列表）是否包含重复的第二个元素，如果是，比较查看哪个嵌套列表保留在 listB 中的第一个元素。所以在伪代码中：

```
sizeOfListA = # whatever the original size is
sizeOfListB = 0

for i in (sizeOfListA):
  for j in (sizeOfListB):
    if listA[i][1] == listB[j][1]:  # check if second element is a duplicate
      if listA[i][0] > listB[j][0]: # check which has the bigger first element
        listB[j] = listA[i]
    else:   # if second element is unique, append nested list and increment size
      listB.append(listA[i])
      sizeOfListB += 1 
```

这仅适用于第 (2) 部分。就像 Burhan 的评论一样，我确信有一种更优雅的方法可以做到这一点，但我认为这可以完成工作。此外，问题并没有说明当第一个元素相等时会发生什么，因此也需要考虑这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T14:43:51.050

你可以使用`itertools.groupby`：

```
from itertools import groupby
from operator import itemgetter as ig

data = [[10,1,3,6],[22,3,5,7],[2,1,4,7],[44,3,1,0]]

# filter and sort by main key
valid_sorted = sorted((el for el in data if el[3] != 0), key=ig(1))
# ensure identical keys have highest first element first
valid_sorted.sort(key=ig(0), reverse=True)
# group by second element
grouped = groupby(valid_sorted, ig(1))
# take first element for each key
selected = [next(item) for group, item in grouped]
print selected
# [[22, 3, 5, 7], [10, 1, 3, 6]] 
```

或使用`dict`：

```
d = {}
for el in valid_sorted: # doesn't need to be sorted - just excluding 4th == 0
    d[el[1]] = max(d.get(el[1], []), el)
print d.values()
# [[10, 1, 3, 6], [22, 3, 5, 7]] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-27T17:38:26.507

这是第二部分：

```
from itertools import product

lis = [[10, 1, 3, 6], [22, 3, 5, 7], [2, 1, 4, 7]]
lis = set(map(tuple, lis))   #create a set of items of lis
removed = set()             #it will store the items to be removed

for x, y in product(lis, repeat=2):
    if x != y:
        if x[1] == y[1]:
            removed.add(y if x[0] > y[0] else x)

print "removed-->",removed

print lis-removed       #final answer 
```

**输出：**

```
removed--> set([(2, 1, 4, 7)])
set([(22, 3, 5, 7), (10, 1, 3, 6)]) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-27T14:44:17.870

如果您不关心最终列表的顺序，您可以按第二项排序并使用生成器找到第一项的最大值：

```
l = [[10,1,3,6],[22,3,5,7],[2,1,4,7],[44,3,1,0]]

remove_zeros_in_last = filter(lambda x: x[3] != 0, l)

ordered_by_2nd = sorted(remove_zeros_in_last, key=lambda x: x[1])

def group_equal_2nd_by_largest_first(ll):
    maxel = None
    for el in ll:
        if maxel is None:
            maxel = el  # Start accumulating maximum
        elif el[1] != maxel[1]:
            yield maxel
            maxel = el
        elif el[0] > maxel[0]:
            maxel = el  # New maximum
    if maxel is not None:
        yield maxel     # Don't forget the last item!

print list(group_equal_2nd_by_largest_first(ordered_by_2nd))

# gives [[10, 1, 3, 6], [22, 3, 5, 7]] 
```

# c# - WPF WebBrowser 控件和安全消息

> ID：13100975
> 
> 赞同：3
> 
> 时间：2012-10-27T14:19:09.600
> 
> 标签：c#, wpf, webbrowser-control

我使用 WPF WebBrowser 如下。当我在一个新的自治应用程序中使用它时，我在浏览器顶部变成了以下消息： ![在此处输入图像描述](../Images/19fafebef0f6948b6e4057a2a88add12.png)

关于英文：

显示出于安全原因访问计算机已限制此文件的活动内容。单击此处获取更多选项...

当我在同一台机器上的现有应用程序中使用相同的代码（完全相同的代码 - 作为单独的窗口）时，不会显示消息。有人可以帮助我，为什么当我在现有应用程序中使用 webbrowser-Control（复制代码）时未显示此消息？- 谢谢。

代码隐藏：

```
public partial class MainWindow : Window {
    public MainWindow() {
        InitializeComponent();
    }

    private void Button_Click_1(object sender, RoutedEventArgs e) {
        var path = @"C:\temp\WpfApplication1\MHTBody_5f9d8e2b-9dee-42a6-959c-0edfc43b5daf.proconactNavigating.mht";
        this.webBrowser.Navigate(path);
    }
} 
```

XAML：

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="1674.761" Width="900.637">
    <Grid>
        <Button Height="20" VerticalAlignment="Top" Click="Button_Click_1" />
        <WebBrowser x:Name="webBrowser" Margin="0,31,0,0" />

    </Grid>
</Window> 
```

**新信息：**

当我添加示例应用程序（在新的自治应用程序中）时，在 MainWindow 所在的位置并显示安全栏设置到应用程序并访问它，在我打开 MainWindow 之前，安全栏将不再显示，它会需要更长的时间来加载 mht。

混凝土：

当我点这个时，它不会显示安全栏：

```
public partial class App : Application {
    protected override void OnStartup(StartupEventArgs e) {
        var x = Settings.Default.test;
        base.OnStartup(e);
    }
} 
```

# c# - 引用瞬间错误

> ID：13100976
> 
> 赞同：0
> 
> 时间：2012-10-27T14:19:12.753
> 
> 标签：c#

我正在尝试根据给定的工作编号来选择工作，如果该编号与工作中的编号匹配，宾果游戏，请将其退回。应该是简单的东西，但我看到了一个我以前从未见过的错误。

我有类似的方法使用相同的技术来提取其他细节，但由于某种原因，这不起作用。我所能想到的只是这是一个 Getter/Setter 问题，但我已经看过但无法弄清楚。

如果有人有任何想法，我将不胜感激。谢谢。

我收到的错误在这行代码上，错误如下：

```
if (j.JobNum.Equals(JobRef, StringComparison.OrdinalIgnoreCase))
                JobSet.Add(j); 
```

'object.Equals(object, object)' 不能用实例引用访问；而是用类型名称来限定它。

该方法如下所示：

```
 public List<Job> SelectJob(String JobRef)
    {
        List<Job> JobSet = new List<Job>();

        foreach (Job j in Jobs)
        {
            if (j.JobNum.Equals(JobRef, StringComparison.OrdinalIgnoreCase))
                JobSet.Add(j);
        }

        return JobSet;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T14:24:29.720

更改

```
if (j.JobNum.Equals(JobRef, StringComparison.OrdinalIgnoreCase))
// Its calling `object.Equals(object, object)` method. 
```

到

```
if (j.JobNum.ToString().Equals(JobRef, StringComparison.OrdinalIgnoreCase))
// Its calling `string.Equals(string, StringComparison)` method 
```

因为`JobNum`是类型`int`或任何其他数字数据类型。

# c++ - 如何识别增强融合向量中的类型

> ID：13100982
> 
> 赞同：4
> 
> 时间：2012-10-27T14:19:39.680
> 
> 标签：c++, boost, boost-fusion

如何识别 boost::fusion 向量中的类型？

例如

```
fusion::vector<int, double, string> v; 
```

然后是可以让我识别`v[0]`为 type `int`，`v[1]`as type`double`和`v[2]`as type的东西`string`。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-27T14:36:57.260

为了从 a 中提取元素，`boost::fusion::vector`您需要使用`boost::fusion::at_c`，如下所示：

```
boost::fusion::vector<int, std::string> v(1, "hello");
std::cout << boost::fusion::at_c<0>(v) << std::endl; // prints 1 
```

位置 N 的类型是：

```
boost::fusion::result_of::at_c<boost::fusion::vector<int, std::string>, 1>::type 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T14:34:05.513

[此链接](http://www.boost.org/doc/libs/1_51_0/libs/fusion/doc/html/fusion/sequence/intrinsic/metafunctions/value_at.html)描述了我正在尝试做的事情。

详细地说，以下是我试图实现的目标：

```
template<int N, typename T>
struct a_struct{
typedef typename T::value_type etype;
typedef typename boost::fusion::result_of::value_at<etype, boost::mpl::int_<N> >::type a_type;
}; 
```

其中 T 是 boost::fusion 向量的 std::vector。

# python - 优化 Oracle 数据库查询/fetchall

> ID：13100984
> 
> 赞同：0
> 
> 时间：2012-10-27T14:20:05.983
> 
> 标签：python, oracle, query-optimization, cx-oracle, fetchall

数据库设计远非最佳，但我必须处理它，现在我真的被困住了。

编辑：我正在使用`cx_Oracle`

好的，这是我的查询：

```
query="select degree, spectraldev.event.eventnumber \
       from spectraldev.degree \
       join spectraldev.alignment on \
            (spectraldev.version_id = alignment.version_id) \
       join spectraldev.event on \
            (alignment.timestamp between event.eventstart and event.eventstop) \
       join spectraldev.eventsetup on \
            (spectraldev.event.eventsetup = spectraldev.eventsetup.oid) \
       where spectraldev.event.eventnumber>=" + options.start + " AND spectraldev.event.eventnumber<=" + options.stop + " AND \
            HITS>=" + str(options.minimum_hits)+" \
       order by spectraldev.event.eventnumber"

db_cursor.execute(query) 
```

它为许多事件返回一堆`degree`s （12.34 等），这些事件由唯一编号（`eventnumber`如 346554）标识。

所以我得到一个这样的表：

```
454544    45.2
454544    12.56
454544    41.1
454544    45.4
454600    22.3
454600    24.13
454600    21.32
454600    22.53
454600    54.51
454600    33.87
454610    32.7
454610    12.99 
```

等等……</p>

现在我需要创建一个字典，其中包含每个事件的*平均度数*（将所有相应的浮点数相加并除以它们的数量）。

我认为这可以在 SQL 中完成，但我无法让它工作。目前我正在使用 python 来执行此操作，但是 fetch 命令需要 1-2 小时才能完成大约 2000 个事件，这太慢了，因为我需要处理大约 1000000 个事件。

这是我的获取部分，需要很长时间：

```
_degrees = []
for degree, eventNumber in cursor.fetchall():
    _degrees.append([eventNumber, degree]) 
```

然后排序（非常快，< 1 秒）并计算平均值（也非常快）：

```
_d={}
for eventNumber, degree in _degrees:
    _d.setdefault(eventNumber, []).append(degree)

for event in events:
    _curDegree = _degrees[int(event)]
    _meanDegree = sum(_curDegree) / float(len(_curDegree))
    meanDegrees.append(_meanDegree) 
```

有没有办法在 SQL 中执行 python 部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T16:33:47.747

这是一个旁白，但很重要。你对 SQL 注入很开放。在您的特定情况下*可能*无关紧要，但最好始终为最坏的情况编写代码。

您没有提及您正在使用什么模块，但假设它是符合[PEP 249](http://www.python.org/dev/peps/pep-0249/)的模块（您可能正在使用 cx_Oracle），那么您可以传递一个带有命名绑定参数的字典。一个典型的查询可能如下所示：

```
query = """select column1 from my_table where id = :my_id"""
bind_vars = {'my_id' : 1}

db_cursor.execute(query, bind_vars) 
```

在您的实际查询中，您将一些变量（`options.start`例如）转换为 Python 中的字符串，但没有在 SQL 中引用它们，这意味着它们被隐式转换回数字。这几乎绝对不需要。

* * *

就您的实际问题而言，完成 2,000 个事件需要 1-2 小时，您说得对，荒谬可笑。您尚未发布架构，但我猜您缺少任何[索引](http://docs.oracle.com/cd/E11882_01/server.112/e25789/indexiot.htm#CNCPT811)。

要获得每个事件编号的平均度数，您应该使用该[`avg()`](http://www.techonthenet.com/oracle/functions/avg.php)函数。这将使您的查询：

```
select spectraldev.event.eventnumber, avg(degree) as degree
  from spectraldev.degree
  join spectraldev.alignment 
        -- I think this is wrong on your query
    on (degree.version_id = alignment.version_id)
  join spectraldev.event 
    on (alignment.timestamp between event.eventstart and event.eventstop)
  join spectraldev.eventsetup 
    on (spectraldev.event.eventsetup = spectraldev.eventsetup.oid)
 where spectraldev.event.eventnumber >= :start
   and spectraldev.event.eventnumber <= :stop
   and hits >= :minimum_hits
 group by spectraldev.event.eventnumber
 order by spectraldev.event.eventnumber 
```

我已经对您的查询进行了格式化，使其更具可读性（从我的角度来看），并使其在您需要索引的地方更加明显。

由此判断，您需要对以下表格和列进行索引；

*   事件 - `eventnumber`, `eventstart`, `eventstop`,`eventsetup`
*   程度 -`version_id`
*   对齐 - `version_id`,`tstamp`
*   活动设置 -`oid`

`hits`以及可能在哪里。

说了这么多，你的问题可能*是*索引。你没有提供你的解释计划或模式，或者行数，所以这将是一个猜测。但是，如果您在表中选择很大比例的行，CBO*可能*会在不应该使用索引时使用索引。例如，使用完整提示强制进行全表扫描可能会解决您的[问题](http://docs.oracle.com/cd/E11882_01/server.112/e26088/sql_elements006.htm#SQLRF50401)。`/*+ full(event) */`

`order by`如果不需要，删除, 也可能会显着加快您的查询速度。

# linux - linux查找命令不需要的数据

> ID：13100991
> 
> 赞同：1
> 
> 时间：2012-10-27T14:20:59.647
> 
> 标签：linux, bash, find

我正在尝试编写简单的 bash 脚本，但我坚持使用`find`命令。

当我输入时`find . zad*`，我得到如下输出：

```
.
./lab2.sh~
./#zad2.sh#
./zad2.sh~
./zad1a.sh
./zad2.sh
./lab2.sh
./Azad2.sh~
./cdlinux.ftp.log
./Azad2.sh
./zad1a.sh~
./zad1.sh
./cdlinux.www.log
./zad1.sh~
zad1a.sh
zad1a.sh~
zad1.sh
zad1.sh~
zad2.sh
zad2.sh~ 
```

为什么它会列出我文件夹中的所有文件（`./`文件名之前），然后我得到正确的查找结果。有什么办法可以删除该`./`输出？使用 sed 命令并非在所有情况下都有效（当搜索路径不同于 时`.`）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-27T14:26:01.573

您必须使用flag 指定要搜索的名称，并将模式括在引号中，因此 bash 在通配符传递给之前`-name`不会对其执行自动扩展：`*``find`

```
 find . -name "zad*" 
```

此外，您不需要指定 cwd 路径`.`

使用：

```
 find -name "zad*" 
```

应该可以正常工作=）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T14:30:02.440

首先，要按名称搜索文件，您需要使用该`-name`选项。其次，您需要将模式包含在引号中。

glob 模式的`*`工作方式是 bash 会*在你的命令被调用之前*扩展模式。因此，find 将获得所有匹配该模式的文件。没有引号，就好像您键入了一个命令`find . -name zad1.sh zad2.sh zad3.sh ...`（取决于当前目录中与您的模式匹配的文件）

为防止这种情况，请将您的模式包含在单引号中。这会导致将文字字符串`zad*`作为参数传递给 find 命令，从而允许 zad 将模式与其找到的每个文件进行比较。

例如：

```
find . -name 'zad*' 
```

# java - 如何在添加项目时动态调整列表的大小？

> ID：13100992
> 
> 赞同：1
> 
> 时间：2012-10-27T14:21:00.333
> 
> 标签：java, swt

我正在使用`org.eclipse.swt.widgets.List`动态添加一些项目。

但是，每个字符串的大小都大于`List`.

`String`每次将新添加到列表中时，如何重新计算列表的大小`List`？

**编辑 1**
抱歉这个问题太天真了，SWT 还是个新手。

这就是我创建它的方式：

```
Group parentGrp = new Group(threeColComposite,SWT.NONE);  
parentGrp.setText("Interfaces Present in Selected jar");  
parentGrp.setLayout(new GridLayout(1,false));  
parentGrp.setLayoutData(new GridData(SWT.FILL,SWT.FILL,true,true));  
myList = new List(parentGrp, SWT.BORDER | SWT.V_SCROLL | SWT.MULTI);  
myList.setLayoutData(new GridData(SWT.FILL, SWT.FILL, true, true)); 
```

我没有使用单独的布局，`list`因为它是父组的唯一子项。如果没有使用布局是错误的吗？

**编辑 2**
@Baz：我在方法中使用了您在此处[回答的片段](https://stackoverflow.com/questions/12741208/how-to-make-swt-jface-dialogs-which-show-similar-behaviourlayouts-under-all-wi/12743043#12743043)`createMiddleContent()`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-21T17:49:50.887

我认为最好的方法是创建您赢得的自定义列表（例如查看[http://www.snip2code.com/Snippet/11489/Custom-SWT-List-Box](http://www.snip2code.com/Snippet/11489/Custom-SWT-List-Box)以创建这样的列表），然后在此处直接管理事件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T18:04:11.633

Layout 类及其子类提供了调整大小的行为，尽管是间接的。布局缓存列表的原始大小并使用该大小，即使在您向列表中添加更多（和更长）项目后也是如此。修复方法是告诉布局在刷新其缓存后布局特定控件及其子项（所有一种布局方法）。您传入的小部件/控件取决于列表周围有多少小部件需要调整大小，因为列表已调整大小。

当然，您使用的布局必须与最初布置小部件的布局相同。

# iphone - 以编程方式加载 ViewController 时，iPhone 应用程序在第二次启动时崩溃

> ID：13100994
> 
> 赞同：2
> 
> 时间：2012-10-27T14:21:19.400
> 
> 标签：iphone, objective-c

当我在模拟器中第二次启动应用程序时，应用程序崩溃并出现错误“线程 1：信号 SIGKILL”。第一次它会完美运行，但如果我完全关闭应用程序（双击主页按钮并关闭应用程序）并再次启动它 - 它会崩溃。

我发现其他人有同样的问题（应用程序第二次崩溃），但原因不同。

我尝试创建一个新项目来隔离错误，当我尝试以编程方式加载 ViewController 时会发生这种情况。

我做了两个简单的类：MainView 和 Loader（应该加载 MainView）。

在 Loader 类的 viewDidAppear 方法中，我有以下代码：

```
[super viewDidAppear:YES];

sleep(1); //Simulating to be doing stuff
MainView* mainView = [self.storyboard instantiateViewControllerWithIdentifier:@"MainView"];
[self presentViewController:mainView animated:YES completion:nil]; 
```

我得到以下回溯：

```
* thread #1: tid = 0x1f03, 0x9b5f5c22 libsystem_kernel.dylib`mach_msg_trap + 10, stop reason = signal SIGKILL
frame #0: 0x9b5f5c22 libsystem_kernel.dylib`mach_msg_trap + 10
frame #1: 0x9b5f51f6 libsystem_kernel.dylib`mach_msg + 70
frame #2: 0x0139b10a CoreFoundation`__CFRunLoopServiceMachPort + 186
frame #3: 0x012fe550 CoreFoundation`__CFRunLoopRun + 1312
frame #4: 0x012fdd84 CoreFoundation`CFRunLoopRunSpecific + 212
frame #5: 0x012fdc9b CoreFoundation`CFRunLoopRunInMode + 123
frame #6: 0x012b07d8 GraphicsServices`GSEventRunModal + 190
frame #7: 0x012b088a GraphicsServices`GSEventRun + 103
frame #8: 0x00011626 UIKit`UIApplicationMain + 1163
frame #9: 0x00001c4d progLoadingTest`main + 141 at main.m:16
frame #0: 0x9b5f5c22 libsystem_kernel.dylib`mach_msg_trap + 10
frame #1: 0x9b5f51f6 libsystem_kernel.dylib`mach_msg + 70
frame #2: 0x0139b10a CoreFoundation`__CFRunLoopServiceMachPort + 186
frame #3: 0x012fe550 CoreFoundation`__CFRunLoopRun + 1312
frame #4: 0x012fdd84 CoreFoundation`CFRunLoopRunSpecific + 212
frame #5: 0x012fdc9b CoreFoundation`CFRunLoopRunInMode + 123
frame #6: 0x012b07d8 GraphicsServices`GSEventRunModal + 190
frame #7: 0x012b088a GraphicsServices`GSEventRun + 103
frame #8: 0x00011626 UIKit`UIApplicationMain + 1163
frame #9: 0x00001c4d progLoadingTest`main + 141 at main.m:16 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T19:44:26.193

我发现这对于您在模拟器中关闭然后在模拟器中重新启动的任何应用程序来说都是正常行为。我只是碰巧正在加载一个 ViewController。因此，它确实不是崩溃。

# python - 在 Mac 上附加到日志被拒绝错误的权限，但在 Windows 上没有

> ID：13100999
> 
> 赞同：0
> 
> 时间：2012-10-27T14:22:01.517
> 
> 标签：python, macos, logging, permissions, ctypes

我正在尝试将我的应用程序移植到 Mac，但我不明白是什么导致了这个问题。

在某些时候，我尝试使用 ctypes' 加载第三方提供的几个 C++ 库`LoadLibrary`。对于 Windows，我有 dll，对于 Mac，我有 dylibs。加载 dylibs 也会产生一个错误，我也在尝试解决这个错误，但这在这里不应该是一个问题，因为我确实有一个 try/except 块来解决这个问题。

```
try:
    self.log('Lib exists? %s: %s' % (libpath, os.path.exists(libpath)))       
    origdir = os.getcwd()
    os.chdir(os.path.dirname(libpath))
    self.lib = cdll.LoadLibrary(os.path.basename(libpath))
    os.chdir(origdir)
    self.log("Loaded Library!")
except Exception as e:
    self.log('Error importing Library! %s' % e)
    self.lib_loaded = False 
```

任何问题都会写入日志文件。问题是，它以某种方式附加到第一次调用的日志文件中，但在上面的片段中第二次调用时不起作用，在
`self.log('Error importing Library! %s' % e)`.

日志方法很明显：

```
def log(self, text):
    if self.debug:
        print text
        with open('logfile.log', 'a') as w:
            w.write('%s\n' % text) 
```

在 Windows 上，这可以正常工作。找到库时，它会加载，当找不到时，我会打印相应的消息并将其写入日志。但在 Mac 上，我得到了错误

```
Lib exists? /usr/local/lib/path/to/Mylib: True
Error importing Library! dlopen(lib.dylib, 6): no suitable image found.  Did find:
    lib.dylib: mach-o, but wrong architecture
    /usr/local/lib/lib.dylib: mach-o, but wrong architecture
Traceback (most recent call last):
  File "myapp.py", line 987, in <module>
    foo = Foo(pyqtapp, splash)
  File "myapp.py", line 83, in __init__
    self.thelibLink = libLink.libLink(0.05, a, b)
  File "libLink.py", line 100, in __init__
    self.log('Error importing Library! %s' % e)
  File "libLink.py", line 326, in log
    with open(self.logfile, 'a') as w:
IOError: [Errno 13] Permission denied: 'logfile.log' 
```

`logfile.log`有权限`-rw-r--r--`并且归我所有，所以这对我来说没有任何意义。此外，运行程序后，日志文件包含以下内容：

```
==Log of date/time==
Lib exists? /usr/local/lib/path/to/Mylib: True 
```

所以不知何故，我确实有权在`self.log`第一次调用时附加到文件中。有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T14:29:05.437

您正在使用相对路径打开日志文件，但在失败之前更改了目录：

```
os.chdir(os.path.dirname(libpath)) 
```

而是使用绝对路径打开日志文件，因为您显然无法写入`os.path.dirname(libpath)`.