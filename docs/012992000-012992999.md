# StackOverflow 问答 12992000-12992999

# html - kml 地图中的地标在复选框处于非活动状态时可见

> ID：12992000
> 
> 赞同：0
> 
> 时间：2012-10-20T19:41:20.460
> 
> 标签：html, google-maps, maps, kml, google-earth

我的项目地图出现故障。当我在代码中上传地图时，我不希望文件夹显示出来，并且它们未被选中且不可见，但地图上仍然有很多点......有什么问题？

这是网页 [http://mio.com.co/mapa/mapa.html](http://mio.com.co/mapa/mapa.html) ,

这是kml（很抱歉没有发布代码，因为它太长了）

[http://mio.com.co/mapa/kml/sept.kml](http://mio.com.co/mapa/kml/sept.kml)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T17:10:15.390

如果您希望不可见，在 KML 中执行此操作的正确方法是设置：

```
<visibility>0</visibility> 
```

[KML 参考](https://developers.google.com/kml/documentation/kmlreference#visibility)

不知道为什么您的版本不起作用（我怀疑它与您加载它的方式有关，但我不是 Lance Dyas 的 GeoXml-V3 专家），[这个版本（基于简单示例项目主页）](http://www.geocodezip.com/geoxml3_test/v3_dyasdesigns_com_geoxml_closed_sept.html)似乎做对了。

# c# - 小游戏形式

> ID：12992006
> 
> 赞同：2
> 
> 时间：2012-10-20T19:41:51.730
> 
> 标签：c#, winforms

我正在尝试用 C#（windows 形式）制作一个迷你游戏，比如太空入侵者。飞船飞得很好，但我没有得到多张照片，我有一种`timer_Tick`制作动画的方法，当我按空格拍摄时，第一张效果很好，但第二张效果很好。在这个半位置的第一枪消失了。镜头是`pictureBox`，我尝试了 List of `pictureBox`，但没有成功。

我有这样的事情：

```
 public void Form1_Load(object sender, EventArgs e)
    {
        shootP = new PictureBox();
        shootP.Image = Properties.Resources.shoot_1;
        shootP.SizeMode = PictureBoxSizeMode.Zoom;
        shootP.Size = new Size(10, 72);  
        ListShoot = new List<PictureBox>();      
        int i = -1;
    }
     private void Form1_KeyDown(object sender, KeyEventArgs e)
     {

        if (e.KeyCode == Keys.Space)
        {
        control = false;
        i++;
        ListShoot.Add(shootP);
        timeShoot.Start();
     }

      private void timeShoot_Tick(object sender, EventArgs e)
      {
        if (control == false)
        {   
            ListShoot[i].Location = new Point(spacecraft._imageBox.Location.X + 50, spacecraft._imageBox.Location.Y - 55);  // align the shoot with spacecraft
            control = true;     
        }

            ListShoot[i].Top -= 40;
      } 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T21:52:17.750

您每次都需要创建一个新图像，就像在 aliassce 的答案中一样。

```
private void Form1_KeyDown(object sender, KeyEventArgs e)
 {
    if (e.KeyCode == Keys.Space)
    {
      control = false;
      shootP = new PictureBox();
      shootP.Image = Properties.Resources.shoot_1;
      shootP.SizeMode = PictureBoxSizeMode.Zoom;
      shootP.Size = new Size(10, 72);
      ListShoot.Add(shootP);
      timeShoot.Start();
    }
 } 
```

然后您需要更新列表中所有图像的位置。使用 foreach 循环并放弃 int 迭代器。

```
private void timeShoot_Tick(object sender, EventArgs e)
  {
    if (control == false)
    {   
       foreach PictureBox shot in ListShot
       {
           shot.Location = new Point(spacecraft._imageBox.Location.X + 50, spacecraft._imageBox.Location.Y - 55);  // align the shoot with spacecraft
           shot.Top -= 40;
       }
       control = true;
    }
  } 
```

您可能还必须更新绘制图像的代码以循环遍历列表。有类似的东西：

```
foreach PictureBox shot in ListShoot
{
   draw(shot);
} 
```

最后，您可能需要时不时地清理列表，以摆脱不再出现在屏幕上且不再需要更新或绘制的任何镜头。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T19:48:00.193

您正在添加相同的 PictureBox。您可以尝试创建一个新的。将此圆锥添加到`Form1_KeyDown`.

```
 shootP = new PictureBox();
    shootP.Image = Properties.Resources.shoot_1;
    shootP.SizeMode = PictureBoxSizeMode.Zoom;
    shootP.Size = new Size(10, 72); 
```

另一方面，您应该尽快使用 OOP

# c++ - 使用 std::list 作为循环列表是否安全？

> ID：12992007
> 
> 赞同：6
> 
> 时间：2012-10-20T19:41:51.770
> 
> 标签：c++, list, iterator, std

那么增加或减少 end() 迭代器是在标准中定义的吗？在 linux 上，begin() 被实现为 end()++。

```
#include <list>
#include <iostream>

int main()
{
  std::list<int> numbers;
  for (int i = 0; i < 10; i++)
    numbers.push_back(i);

  auto it = numbers.begin();
  int count = 3;
  while (count)
  {
    std::cout << *it++;
    if (it == numbers.end())
    {
      ++it; // is this ok ???
      --count;
      std::cout << '\n';
    }
  }
} 
```

那么每个平台上的输出总是相同的吗？

输出：

```
0123456789
0123456789
0123456789 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-20T19:47:05.327

递增从`end()`任何标准 C++ 库容器返回的迭代器会导致未定义的行为。由于大多数实现通用的实现细节，`std::list<T>`它可能会增加`list.end()`，但不能保证它会增加。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-20T19:48:45.330

不，这不行。`std::list`迭代器是一个[BidirectionalIterator](http://www.sgi.com/tech/stl/BidirectionalIterator.html)，它是[ForwardIterator](http://www.sgi.com/tech/stl/ForwardIterator.html)的一种改进。ForwardIterator`++i`的前提条件是：`i++`

> `i`是可取消引用的

它不成立，`end()`因为它指向*列表*的最后一项。

# c# - 为什么使用 params 关键字

> ID：12992008
> 
> 赞同：1
> 
> 时间：2012-10-20T19:41:55.530
> 
> 标签：c#, parameters, console-application

我正在复习我的 C# 技能并阅读 C# 书籍。`params`我在数组章节中遇到了关键字。为什么有人会实际使用`params`关键字而不是仅将常规数组传递给方法。`params`我测试了两种方法都传递了一个带有和不带关键字的数组。他们都工作得很好。是否有任何现实世界的理由使用该`params`关键字？

这是我的代码：

```
using System;

namespace ConsoleApplication9
{
    class Program
    {
        static void Main(string[] args)
        {
            string[] classname = new string[5] { "cs150", "cs250", "cs270", "cs300", "cs350" };
            Prints(classname);

            Console.Read();
        }

        public static void Prints(params string[] t)
        {
            foreach (var s in t)
            {
                Console.WriteLine(s);
            }
        }
    }
} 
```

这是没有参数的代码：

```
using System;

namespace ConsoleApplication9
{
    class Program
    {
        static void Main(string[] args)
        {
            string[] classname = new string[5] { "cs150", "cs250", "cs270", "cs300", "cs350" };
            Prints(classname);

            Console.Read();
        }

        public static void Prints(string[] t)
        {
            foreach (var s in t)
            {
                Console.WriteLine(s);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-20T19:43:28.900

`Console.WriteLine`你觉得这些电话中哪一个更清楚？

```
Console.WriteLine("Hello {0}, you are {1}", person.Name, person.Age); 
```

或者

```
Console.WriteLine("Hello {0}, you are {1}",
                  new object[] { person.Name, person.Age }); 
```

`new[]`（在上述情况下，您甚至不能使用隐式类型数组 ( )，除非其中一个`person.Name`或`person.Age`是类型`object`......如果它们都是类型`string`你会没事的，但它会创建一个字符串数组......）

我更喜欢第一个。阅读起来更简单。这就是全部`params`- 它只是允许调用者使用更简洁的语法。您仍然可以像在代码中那样以正常方式传递数组引用 - 但您也*可以*只写：

```
Prints("cs150", "cs250", "cs270", "cs300", "cs350"); 
```

...这又比声明一个单独的变量更容易阅读。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-20T19:44:13.630

使用参数，您可以像这样调用您的方法：

```
Prints("1", "2", "3", "4", "5"); 
```

没有参数，你不能。

此外，在这两种情况下，您都可以使用数组作为参数调用该方法：

```
Prints(new string[] { "1", "2", "3", "4", "5" }); 
```

也就是说，params 允许您在调用方法时使用快捷方式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-20T19:43:52.783

使用参数，您可以在不创建数组的情况下调用方法：

```
Prints("cs150", "cs250", "cs270") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T11:08:44.540

如果你传递没有“params”关键字的参数，那么你只能传递数组（数组大小）中指定的元素，但是使用“params”你不需要指定数组中的参数数量（数组大小）并且可以传递任意数量的根据需要调用函数的参数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-21T14:18:34.533

params 关键字的目的是

> 简化使用您创建的库或方法的编码人员的编码体验。

# events - 事件聚合器模式如何为其订阅者管理不同的发布者？

> ID：12992014
> 
> 赞同：0
> 
> 时间：2012-10-20T19:42:24.203
> 
> 标签：events, design-patterns, event-handling, eventaggregator

在事件聚合器模式中，发布者将事件发布到聚合器，订阅者通过聚合器订阅特定事件。

假设有 3 个订阅者`SubscriberA`，`SubscriberB`和`SubscriberC`。他们都想订阅一个名为`OnPowerUpEvent`. `OnPowerUpEvent`可以由或`PowerItemA`触发`PowerItemB`。和也可以有多个*实例*。`PowerItemA``PowerItemB`

基于这种情况，我不明白事件聚合器模式如何能够允许订阅者订阅特定发布者发布的事件。在我看来，订阅者通常只能订阅事件`OnPowerUpEvent`，并且无论发布者是谁都可以响应事件。

例如，`SubscriberA`可能想要订阅*任何*实例`OnPowerUpEvent`发布的事件。可能想要订阅由 的*特定实例*发布的事件。并且可能希望订阅该事件，*而不管*发布者是谁。 *`PowerItemA``SubscriberB``OnPowerUpEvent`*`PowerItemB``SubscriberC``OnPowerUpEvent`**

 ***在这 3 种不同的情况下，事件聚合器模式如何管理呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T19:47:29.833

流行的事件聚合器实现不仅提供简单的发布/订阅功能，还提供更复杂的订阅过滤基础设施，例如 Prism EventAggregator 允许提供谓词和处理程序：（[请参阅 MSDN](http://msdn.microsoft.com/en-us/library/ff921122%28v=pandp.20%29.aspx)）

```
FundAddedEvent fundAddedEvent = eventAggregator.GetEvent<FundAddedEvent>();

fundAddedEvent.Subscribe(FundAddedEventHandler, 
                         ThreadOption.UIThread, false,
                         fundOrder => fundOrder.CustomerId == _customerId); 
```***

# css - 如何根据控件宽度而不是视口宽度编写css媒体查询

> ID：12992020
> 
> 赞同：0
> 
> 时间：2012-10-20T19:42:39.587
> 
> 标签：css, media-queries

是否可以根据控件宽度而不是视口宽度编写 css mediaquery。

示例：如果容器 min-width > 1000px 设置 color=red ，否则使用 css 设置 color=red ？或者代替媒体查询，有没有其他方法可以实现这个场景？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T20:14:24.423

CSS 不是这项工作的合适工具。它不是一种脚本语言，几乎没有使用[条件](http://dev.w3.org/csswg/css3-conditional/)语句。那太好了！这就是它应该的样子。幸运的是，我们有 JavaScript。JS使它变得容易。[jsfiddle](http://jsfiddle.net/tXCkg/2/)

```
<div style="width: 1000px" id="content">
   <h2>some title here</h2>
   <p>some content here</p>
</div>

<script>
var div = document.getElementById('content');
var el = div.style.width;
document.write ("SomeText");
if(el === '1000px')
{
    document.body.style.backgroundColor="red";
}
else
{
     document.body.style.backgroundColor="blue";
}
</script> 
```

请记住，如果用户关闭了 JavaScript，这将破坏您的风格。没什么大不了的，但值得记住。

# jquery - jquery .on() 没有找到点击

> ID：12992022
> 
> 赞同：0
> 
> 时间：2012-10-20T19:42:54.210
> 
> 标签：jquery

我有以下代码，如下所示：

```
<div id="container">
// 3 lines other code here
<a hef="#" id="agreelink"><input id="agree" name="agree" value="Agree" style="position:relataive;border-style:none" /></a>
<input id="disagree" name="disagree" value="Disagree" style="position:relataive;border-style:none" />
<input id="abstain" name="abstain" value="Abstain" style="position:relataive;border-style:none" />
// 2 more lines here
</div> 
```

然后我有一个我正在使用的功能，`.live()`因为元素是动态的并且它不断复制火，我需要移动到`.on()`. 因此，我尝试触发任何这些按钮的功能代码如下：

```
<$('#container').on('click', 'input', function() {
alert($(this).attr('name'));
}); 
```

和

```
<$('#container').on('click', '#agree', function() {
alert($(this).attr('name'));
}); 
```

和

```
<$('#container').on('click', 'a', function() {
alert($(this).attr('id'));
}); 
```

但是我不能让它着火，我已经在网上搜索并尝试并测试了它，但我确定我做的不对，只是不确定它是什么。谁能建议我哪里出错了？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T19:58:15.323

尝试将它们包裹起来`$(document).ready()`

```
$(document).ready(function(){

    $('#container').on('click', 'input', function() 
    { 
       alert($(this).attr('id')); 
    });

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T20:03:45.410

你也可以试试这个： http: [//jsfiddle.net/VVfUK/](http://jsfiddle.net/VVfUK/) 我用过`live()`，因为它是你的首选，用来`e.stopPropagation()`阻止`click`事件冒泡。

希望能帮助到你 ：-）

# iis - 同一域上的 Sitecore 和非 Sitecore 站点

> ID：12992024
> 
> 赞同：0
> 
> 时间：2012-10-20T19:43:29.047
> 
> 标签：iis, dns, sitecore, sitecore6

我们目前正在运行 Sitecore 6.0.0 (090120)。在你问这个明显的问题之前，我在公司才不到四个月，所以我没有答案。我有一个网站的一部分，我想把它拉到它自己的子域中。新站点将是一个在 Sitecore 外部创建的独立动态站点（很可能是 ASP.NET MVC）（不使用任何 Sitecore 资源），其内容将**不会**存放在 Sitecore 中。我想这样做，以便新站点可以在与 Sitecore 解决方案相同的域上具有类似*newsite.mycompany.com*的 URL ，但不是 Sitecore 解决方案的一部分。我建议设置子域并使用 IIS 6 中的虚拟目录来容纳新站点，但我被告知 Sitecore 不允许这种类型的配置。

任何人都可以对这个主题有所了解吗？提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T10:27:59.273

因此，如果我理解正确，您想在您的域上运行（静态）网站并在虚拟目录中运行 sitecore 站点？有可能，对配置进行一些修改，请参阅：[Sitecore 站点内的嵌套虚拟目录或应用程序，是否可能](https://stackoverflow.com/questions/4795022/nested-virtual-directory-or-application-within-sitecore-site-is-it-possible)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T17:40:24.240

Sitecore 肯定会允许这样做，您被误导了。没有明确支持的是 Sitecore 本身耗尽了虚拟目录。但是，您描述的场景根本不需要虚拟目录。为什么要用一个？我建议尽可能避免这种情况，因为这只是一个额外的并发症。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T19:14:29.253

如果新站点与 Sitecore 完全无关，那么只需在 IIS 中建立一个全新的站点并将其绑定到您的子域。

即使 Sitecore 站点绑定到默认网站，通过创建新站点，您也可以指示 IIS 将“newsite.mycompany.com”上的流量路由到您的新站点。在 IIS6 中，您在新站点向导的“此 Web 站点的主机标头”字段中进行了设置。如果该站点存在，则调出该网站的属性，在“网站”选项卡上单击“高级”并在“此网站的多个身份”中添加子模块

# java - 在 Java 中声明布尔变量的正确方法是什么？

> ID：12992025
> 
> 赞同：15
> 
> 时间：2012-10-20T19:43:31.193
> 
> 标签：java, variables, boolean

我刚开始学习Java。在我关注的在线课程中，我被要求尝试以下代码：

```
String email1 = "meme@me.coh";
String email2 = "meme@me.com";
Boolean isMatch = false;

isMatch = email1.equals (email2);

if (isMatch == true){
    System.out.println("Emails match");
}
else{
    System.out.println("Emails don't match");
} 
```

我不明白为什么`isMatch`在下一行我比较电子邮件地址并将值分配给时，我被要求声明为假`isMatch`。
我已经尝试过以下代码，它似乎工作起来是一样的：

```
String email1 = "meme@me.coh";
String email2 = "meme@me.com";
Boolean isMatch;

isMatch = email1.equals (email2);

if (isMatch == true){
    System.out.println("Emails match");
}
else{
    System.out.println("Emails don't match");
} 
```

在课程中，它没有解释为什么我`isMatch`首先宣布为假。`isMatch`在比较电子邮件地址之前，我是否有理由必须声明为假？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-20T19:45:51.087

不仅不需要先声明它`false`，我还要添加一些其他改进：

*   使用`boolean`代替`Boolean`（也可以是`null`无缘无故的）

*   在声明期间分配：

    ```
    boolean isMatch = email1.equals(email2); 
    ```

*   ...`final`如果可以的话，使用关键字：

    ```
    final boolean isMatch = email1.equals(email2); 
    ```

最后但并非最不重要的：

```
if (isMatch == true) 
```

可以表示为：

```
if (isMatch) 
```

这使得该`isMatch`标志没有那么有用，内联它可能不会损害可读性。我建议在那里寻找一些更好的课程/教程......

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-20T19:44:52.010

您不必这样做，但有些人喜欢显式初始化所有变量（我也这样做）。尤其是那些使用多种语言编程的人，更容易拥有始终初始化变量的规则，而不是逐个案例/逐个语言地决定。

例如，Java 具有 Boolean、int 等的默认值。另一方面，C 不会自动给出初始值，除非您自己明确分配值，否则内存中发生的任何事情都是您最终得到的。

正如您所发现的，在上述情况下，代码在没有初始化的情况下也能正常工作，尤其是因为变量设置在下一行，这使得它显得特别多余。有时您可以结合这两行（声明和初始化——如其他一些帖子中所示）并充分利用这两种方法，即使用`email1.equals (email2);`操作结果初始化变量。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-20T19:45:50.033

没有理由这样做。事实上，我会选择将声明和初始化结合起来，如

```
final Boolean isMatch = email1.equals (email2); 
```

使用`final`关键字，因此您以后也不能（意外地）更改它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-20T19:46:09.777

首先，你不应该使用它们。您正在使用`wrapper`类型，如果您有原始类型，则很少使用该类型。所以，你应该使用`boolean`相当。

此外，我们将`boolean`变量初始化`false`为保存初始默认值，即 false。如果您已将其声明为实例变量，它将自动初始化为`false`.

但是，无论您是否分配默认值，这完全取决于您。我宁愿在声明时初始化它们。

但是如果你是立即给你的变量赋值，那么你可以直接给它赋值，而不必定义一个`default`值。

所以，在你的情况下，我会这样使用它： -

```
boolean isMatch = email1.equals (email2); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-20T19:52:00.290

**在您的示例中，您不需要。**作为标准的编程实践，所有变量都在某个代码块内被引用，例如`try{} catch(){}`，并且在块外被引用，您需要首先在 try 块之外声明变量，例如

当您的 equals 方法调用引发一些异常时，这很有帮助，例如`NullPointerException`；

```
 boolean isMatch = false;

     try{
         isMatch = email1.equals (email2);
      }catch(NullPointerException npe){
         .....
      }
      System.out.print("Match=="+isMatch);
      if(isMatch){
        ......
      } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-20T19:46:18.607

正如 Levon 所说，这不是文档中所述的强制性要求：http: [//docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)

这可能是其他不保证原始数据类型默认值的语言的习惯。

# php - 无法将 $push\/$pushAll 修饰符应用于嵌入对象上的非数组

> ID：12992030
> 
> 赞同：0
> 
> 时间：2012-10-20T19:44:02.913
> 
> 标签：php, mongodb, doctrine-orm, doctrine-odm

我有一个包含嵌入文档的文档，但我收到“无法将 $push/$pushAll 修饰符应用于非数组”错误，即使数据被保留。

这是我的文件：

```
/**
 * @MongoDB\EmbeddedDocument
 */
class Author
{
   /**
    * @MongoDB\Int
    */
   protected $id;

   /**
    * @MongoDB\String
    */
    protected $name;
} 
```

这是嵌入作者文档的我的评论文档：

```
/**
 *@MongoDB\Document(collection="discussions")
 */
class Discussion
{

   /**
    * @MongoDB\Id
    */
        protected $id;

    /**
     * @MongoDB\ObjectId
     */
    protected $discussion_id;

   /**
     * @MongoDB\String
     */
    protected $slug;

   /** @MongoDB\EmbedOne(targetDocument="Author") */
    protected $author;

     /**
     * @MongoDB\String
     */
    protected $text;

    /**
     * @MongoDB\Date
     */
    protected $createdAt;
} 
```

最后，这是我嵌入讨论文件的上市文件

```
class Listing
{
    /**
     * @MongoDB\Id
     */
    protected $id;

      /** @MongoDB\ReferenceMany(targetDocument="Discussion") */
    protected $discussions;

    public function __construct()
    {
        $this->discussions = new \Doctrine\Common\Collections\ArrayCollection();
    }

     /**
     * Add discussions
     *
     * @param Main\SomeBundle\Document\Discussion $discussions
     */
    public function addDiscussions(\Main\SomeBundle\Document\Discussion $discussions)
    {
        $this->discussions[] = $discussions;
    }

    /**
     * Get discussions
     *
     * @return Doctrine\Common\Collections\Collection $discussions
     */
    public function getDiscussions()
    {
        return $this->discussions;
    }

} 
```

因此，在我的代码中，我正在执行以下操作以将数据放入：

```
 $author = new Author();
         $author->setId( 1 );
         $author->setName("blahblah"); //for now the user name is the author name
         $discussion = new Discussion();
         $discussion->setAuthor($author);
         $dm->persist($discussion);
         $listing->addDiscussions($discussion); <---- I GET THIS HERE!!!!
         $dm->persist($listing);
         $dm->flush(); 
```

我得到的错误是在“$listing->addDiscussions($discussion);”这一行。因为当我删除它时，它就会消失。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T18:10:10.540

您收到该错误是因为您试图将讨论变量用作数组，但您尚未将其声明为这样。当您在 Listing 类中声明讨论时，您需要将其声明为一个空数组：

```
$discussions = array(); 
```

# linq - 无法使用 LINQ 语法编译我的项目

> ID：12992033
> 
> 赞同：3
> 
> 时间：2012-10-20T19:44:15.857
> 
> 标签：linq, c#-4.0, entity-framework-4

我一直在使用实体框架，现在想用 LINQ 代码进行查询。我假设如果我从我的参考书“Entity Framework 4 In Action”中几乎逐字复制我的代码就可以编译。

这是我的代码：

```
from a in db.addresses
where a.accountId == 1
Select o; 
```

出乎意料的是，智能感知不接受我的任何代码。所以我做了一些研究并添加了项目参考、web.config 程序集参考和使用对 LINQ 的参考

```
using System.Data.Linq; 
```

并编辑了 web.config 以包含

```
<assemblies>
<add assembly="System.Data.Linq, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"/> 
```

即便如此，Intellisense 和编译后的不接受关键字“in”或 db.addresses（db 是上下文，在我的文件中的其他地方，我可以毫无问题地进行如下调用：

```
users currentUser = db.users.Single(m => m.email == User.Identity.Name); 
```

所以问题也不是我的数据库上下文。我搜索了堆栈、asp.net，并用谷歌搜索了“LINQ 语法未编译”，但找不到任何进一步的线索。

这是我的编译器错误：

> 错误 14 ; 预计 147 20 AdamsStore
> 
> 错误 15 ; 预计 147 23 AdamsStore
> 
> 错误 16 ; 预计 148 23 AdamsStore
> 
> 错误 17 ; 预计 148 39 AdamsStore
> 
> 错误 13 无效的表达式术语 'in' 147 20 AdamsStore
> 
> 错误 8 只有赋值、调用、递增、递减和新对象表达式可以用作语句 147 18 AdamsStore
> 
> 错误 10 只有赋值、调用、递增、递减和新对象表达式可以用作语句 148 23 AdamsStore
> 
> 错误 7 找不到类型或命名空间名称“from”（是否缺少 using 指令或程序集引用？） 147 13 AdamsStore
> 
> 错误 11 找不到类型或命名空间名称“select”（是否缺少 using 指令或程序集引用？） 149 21 AdamsStore

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T19:46:57.803

1.  `select`需要小写
2.  `using System.Linq`即使你有你仍然需要`using System.Data.Linq`

# objective-c - 如何制作动态命名的方法参数？

> ID：12992034
> 
> 赞同：1
> 
> 时间：2012-10-20T19:44:18.797
> 
> 标签：objective-c, methods, parameters

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T19:55:52.447

# android - Android 更快的数据库插入

> ID：12992038
> 
> 赞同：4
> 
> 时间：2012-10-20T19:44:49.113
> 
> 标签：android, xml, sqlite, parsing

我正在解析一个包含近 20000 个标签的巨大 xml，一旦我解析它们，我就会将 xml 中的所有条目保存到我的 sqlite 数据库中。

但显然 xml 在没有插入操作的情况下很快就被解析了，但是当我尝试插入每个值时，它需要很长时间。（大约 10 分钟）。

数据库插入代码：

```
for (int i = 0; i < tracksList.size(); i++) {
    dataSource.addTracks(tracksList.get(i));                        
}

public long addTracks(Tracks tracks) {

    long insertId = 0;

    ContentValues values = new ContentValues();
    values.put(TRACKS_ID, tracks.getStrId());
    values.put(TRACKS_ARTISTID, tracks.getStrArtistId());
    values.put(TRACKS_ARTISTNAME, tracks.getStrArtistName());
    values.put(TRACKS_ALBUMNAME, tracks.getStrAlbumName());
    values.put(TRACKS_FILENAME, tracks.getStrFileName());
    values.put(TRACKS_TRACKNAME, tracks.getStrTrackName());

    insertId = database.insert(TRACKS_TABLE, null, values);

    return insertId;
} 
```

是否有任何替代方法可以从我的数组列表中获取每个元素并以更快的速度保存它们。

**编辑：得到它的工作，thnx all..**

```
 database.beginTransaction();
    try {
        //standard SQL insert statement, that can be reused
        SQLiteStatement insert = 
                database.compileStatement("insert into " + TRACKS_TABLE
                    + "(" + TRACKS_ID + "," + TRACKS_ARTISTID
                    + "," + TRACKS_ARTISTNAME 
                    + "," + TRACKS_ALBUMNAME 
                    + "," + TRACKS_FILENAME 
                    + "," + TRACKS_TRACKNAME + ")"
                    +" values " + "(?,?,?,?,?,?)");

        for (Tracks value : tracksList){
            //bind the 1-indexed ?'s to the values specified

            System.out.println(value.getStrId());

            insert.bindLong(1, value.getStrId());
            insert.bindString(2, value.getStrArtistId());
            insert.bindString(3, value.getStrArtistName());
            insert.bindString(4, value.getStrAlbumName());
            insert.bindString(5, value.getStrFileName());
            insert.bindString(6, value.getStrTrackName());
            insert.execute();
        }
        database.setTransactionSuccessful();

    } finally {
        database.endTransaction();
    } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-20T20:06:07.467

对所有插入使用一个事务，否则每次插入都会产生存储同步开销：

```
database.beginTransaction();
try {
    for (int i = 0; i < tracksList.size(); i++)
        dataSource.addTracks(tracksList.get(i));                        

    database.setTransactionSuccessful();
} finally {
    database.endTransaction();
} 
```

# unix - UNIX sendmail 不支持 Javascript

> ID：12992047
> 
> 赞同：0
> 
> 时间：2012-10-20T19:45:50.947
> 
> 标签：unix

在脚本中我有

```
(
echo "From: me@xyz.com "
echo "To: them@xyz.com "
echo "MIME-Version: 1.0"
echo "Content-Type: multipart/alternative; " 
echo ' boundary="some.unique.value.ABC123/server.xyz.com"' 
echo "Subject: Test HTML e-mail." 
echo "This is a MIME-encapsulated message" 
echo "--some.unique.value.ABC123/server.xyz.com" 

echo "Content-Type: text/html"
cat output.htm
echo "--some.unique.value.ABC123/server.xyz.com"

) | sendmail -t 
```

在这里，我所有的 HTML 内容都可以正常工作。包含 javascript 的内容未反映在输出中。

上面的 output.htm 文件包含：

```
<html>
<head>
<script type='text/javascript'>
......
......
<script>
<style>
......
......
</style>
</head>

<body>
.....
.....
</body>

</html> 
```

当我尝试在**sendmail**中发送上述代码时，javascript 部分被注释掉，我得到的输出除了 Javascript 代码。

有什么办法可以解决吗？

# jquery - 获取所有未悬停的元素并对其进行处理

> ID：12992049
> 
> 赞同：3
> 
> 时间：2012-10-20T19:45:58.410
> 
> 标签：jquery, css, hover

我的问题可能很简单，但不知何故我无法解决它。在一组有一个对象悬停的对象中，我希望悬停的对象保持不变，但所有其他对象都应该改变。

更具体地说：我有一个无序列表的菜单项。每当我将鼠标悬停在其中一个上时，所有其他项目都应该变小。当我“悬停”该项目时，它们应该再次变回来。

我找到了这篇文章，但它的答案对我不起作用： [仅为非悬停元素设置样式](https://stackoverflow.com/questions/9685073/set-style-for-not-not-hovered-elements-only)

这是我到目前为止所尝试的：

```
/*This is the default size*/
#navigation ul li a
{
    font-size: 14px;    
}
/*When the list is hovered, change font-size (does’nt work)*/
#navigation ul:hover
{
    font-size: 13px;    
}
/*When the a menu-item is hovered change it’s font-size back to default*/
#navigation ul li a:hover
{
    font-size: 14px;    
} 
```

这是我在我提到的帖子中找到的答案之一。如果可以简单地使用纯 CSS 来完成，那就太好了。但它不起作用。我做错什么了吗？

尽管我不是专家，但我也尝试过使用 jQuery。

```
for(var i=1; i <= anzahlNavipunkte; i++)
{
    var naviId = "navi" + i; // id name for every menu-item
    var currentMenuItem = "#navigation li:nth-child(" + i + ") a"; 

    $(currentMenuItem).attr('id', naviId); // gives the current menu-item a specific id

    $('#navigation li a').hover(function()
    {   
        var hoveredId = $(this).attr("id"); // get the id of of the hovered element

        $('#' + hoveredId).hover(function()
        {   
            console.log(hoveredId);
            $('#' + hoveredId).css('font-size', '14px'); // hovered element gets default font-size
            $('#navigation ul').css('font-size', '13px'); // other elements change to 13px
        }, function()
        {
            $('#navigation ul').css('font-size', '14px'); // other elements change back
        })
    });
}; 
```

它也不起作用。可能是因为它与普通 CSS 解决方案的方法相同。有人可以帮帮我吗？

我希望我的解释是可以理解的。如果还有问题请追问。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T19:55:37.360

HTML：

```
<div id="container" >
   <div id="children">
   </div>
</div> 
```

CSS：

```
#container:HOVER #children {
    /* your style */
} 
```

试试这个...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T20:04:50.460

由于特异性`#navigation ul li`覆盖 `#navigation ul:hover`，这就是您的规则集不起作用的原因。
在您的列表中添加“a”：悬停规则，您应该没问题

```
#navigation ul:hover a
{
   font-size: 13px;    
} 
```

[http://jsfiddle.net/DRJCg/](http://jsfiddle.net/DRJCg/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T20:06:00.617

安装`#navigation ul`，我想应该是`#navigation ul li`

一种更直接的方法是将一个类添加到您的 li 并指向该类。

我你会使用一个函数 li 所以：

```
function reduceOtherLi(li_to_keep_big){
 var eList = $('#navigation ul li')`//put all the li in an array
    // for each li in the array
    for (i=0; i<eList.length; i++){
        var e = eList[i]; //get current li

        //if it not the clicked one, make the size smalle
        if (e != li_to_keep_big) $(e).css({'font-size':'13px'}); 
        else $(e).css({'font-size':'14px'});
    }
} 
```

然后您可以使用鼠标悬停处理程序来触发该功能

```
$("#navigation ul li").mouseover(function() { reduceOtherLi(this);}); 
```

要重置它们，只需添加以下行：

```
$("#navigation ul li").mouseout(function() { $('#navigation ul li').css({'font-size':'14px'});}); 
```

基本上你可以把它放在一个标签中，它会像你想要的那样工作。

请注意 .css()，您可以轻松地使用 .addClass() 和 .removeClass() 并在其中指定字体大小（和其他 css 的 bunh）。

至于事件处理程序，“this”将代表悬停元素。并作为 li_to_keep_big 传递。

希望这可以帮助。

# java - 迭代器、列表迭代器和列表

> ID：12992051
> 
> 赞同：1
> 
> 时间：2012-10-20T19:46:11.213
> 
> 标签：java, list, iterator, listiterator

我遇到了一个我无法弄清楚的问题。如果你们能帮助我，那就太好了=）

我有一个 Lobby.Class 有一个 draw() 方法：

```
public void draw() {
    //USE ITERATOR TO DRAW
    Iterator<Player> itr = players.iterator();
    while(itr.hasNext()) {
        Player player = itr.next();
        int off = players.indexOf(player); //THE CORRECT HEIGHT
        player.draw(off);
    }
} 
```

请注意，这是一个服务器/客户端游戏

Lobby.Class 还有 1 个名为 addPlayer() 的方法

```
public void addPlayer(String _playerName, String _class, String _string_id) {

    int _id = Integer.parseInt(_string_id);

    //CREATE THE NEW PLAYER
    Player new_player = new Player(x, y, _id, _playerName, _class);

    //IF THIS PLAYER IS ME
    if(new_player.getID() == id) {

        me = new_player;

    } else {

        //TELL THE NEW PLAYER I EXIST
        ClientValue.getClient().iExist(_id);

                    //THIS WILL SEND TO CLIENT THAT WILL SEND TO THE SERVER
                    //THAT WILL LOOK FOR THE ID AND SEND TO CLIENT OF THAT ID
                    //AND THE CLIENT WILL SEND TO LOBBY UPDATE PLAYERS()
    }

    players.add(new_player);

    chat.appendChat(chat.joinString(_playerName, _class));
} 
```

Lobby.Class 也有 1 个名为 updatePlayers() 的方法

```
public void updatePlayers(String _playerName, String _class, String _string_id) {

    //THIS IS CALLED WHEN THE SERVER TELLS THIS PLAYER
    //ABOUT OTHER PLAYERS

    int _id = Integer.parseInt(_string_id);

    //CREATE THE NEW PLAYER
    Player new_player = new Player(x, y, _id, _playerName, _class);
    players.add(new_player);

} 
```

现在我的问题是**玩家**列表，当我进入大厅`addPlayer()`时，当 2 名玩家加入时会同时运行，或者当他们`updatePlayers()`一起运行时`addPlayer()`

我得到的异常是：**ConcurrentModificationException**

我缺少两种方法，1 用于**添加**带有 Iterator 的玩家（如果可能），1 用于**删除玩家**。这样我就不会在通过它或添加/删除它时收到修改玩家列表的错误。

我曾尝试过使用 Iteror 和 ListIterator，但由于我以前从未使用过它们，所以我不知道该怎么做。我需要一些关于如何做到这一点的建议。非常感谢提前=）

**解决方案：**

```
private List<Player> players = Collections.synchronizedList(new ArrayList<Player>());

    public synchronized void playersList(String cmd, Player _player) {

    Iterator<Player> itr = players.iterator();

    if(cmd.equals("draw")) {

        while(itr.hasNext()) {

            Player player = itr.next();
            int off = players.indexOf(player);
            player.draw(off);
        }

    } else if(cmd.equals("add")) {

        players.add(_player);

    } else if(cmd.equals("remove")) {

        players.remove(_player);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T20:11:13.770

您需要同步访问列表，一次只允许一个线程访问列表。

您可以`synchronized`在每个访问点周围使用一个块（包括整个绘制方法），或者您可以使用 player 方法将播放器列表包装在线程安全列表中，[`Collections#synchronizedList`](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#synchronizedList%28java.util.List%29)或者代替迭代器，您可以使用player`toArray`方法

```
Player[] arrayOfPlayers = players.toArray(new Player[players.size()]); 
```

您仍然要`synchronized`拨打此电话，但您只锁定了一行，而不是整个循环

# ruby - =~ 在 Ruby 中的含义

> ID：12992065
> 
> 赞同：1
> 
> 时间：2012-10-20T19:47:42.277
> 
> 标签：ruby

我在 Ruby 文档中遇到了一个示例，并且对它的确切含义感到困惑。我指的是`=~`. 下面的示例使用它，但我不确定它的目的是什么`==`。

```
a = %w{ a b c d e f }
a.select {|v| v =~ /[aeiou]/}   #=> ["a", "e"] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T19:49:20.753

```
if v =~ /[aeiou]/ # if this value matches this regex
if v == /[aeiou]/ # if this value IS this regex 
```

看到不同？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T19:49:26.567

它与正则表达式匹配。

# c++ - 从 std::vector 转换 > 浮动**

> ID：12992072
> 
> 赞同：0
> 
> 时间：2012-10-20T19:48:47.187
> 
> 标签：c++, vector

有一个接受`float**`参数的函数。我有一个类型变量的值`std::vector<std::vector<float>>`。

是否可以在不分配临时地址的情况下进行这样的转换`float*[]`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T19:52:30.760

不是直接的，但您不必从“内部”向量中复制数据。相反，您可以创建一个指向`data()`每个内部向量属性的指针数组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T19:52:47.157

这将起作用：

```
std::vector<std::vector<float>> source;

std::vector<float*> target(source.size());
for (int i = 0; i < source.size(); ++i)
  target[i] = &*source[i].begin(); 
```

如您所见，您不需要复制内部`std::vector<>`s，但需要重新创建外部。A`std::vector<>`保证其成员的线性存储（意味着它与 C 数组兼容），因此它适用于内部向量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-20T19:52:36.440

您必须手动进行转换，用两个循环填充您`float**`的值。`vector<vector<float> >`

`float*`无论如何，您都必须分配内部。

# xcode4 - InstantiateViewControllerWithIdentifier 崩溃（Xcode 4）

> ID：12992076
> 
> 赞同：0
> 
> 时间：2012-10-20T19:49:15.163
> 
> 标签：xcode4, uiviewcontroller, uistoryboard, segue, uistoryboardsegue

我在尝试加载我的 CafesViewController 时遇到了崩溃。我在文件检查器中将我知道的所有标识符都设置为 CafesViewController，并且还检查了“使用情节提要 ID”。

我的主菜单视图加载完美，因为它被定义为我的 plist 中的默认故事板，但是，当按下按钮加载我的咖啡馆列表时，加载咖啡馆选项时断开连接（我的应用程序是一个城市目录的事情要做）。

我目前的代码是：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([mlabel.text isEqualToString: @" Cafés " ])
    {        
    UIStoryboard *cafesViewController = segue.destinationViewController;
    cafesViewController = [self.storyboard instantiateViewControllerWithIdentifier:@"CafesViewController"];
    }
} 
```

如果有人可以提供意见，我将不胜感激，因为我不知道断开连接在哪里。错误当然是“'NSInvalidArgumentException'，原因：'Storyboard () 不包含标识符为'CafesViewController' 的视图控制器”

我认为我的号召性用语是错误的，但有人可以给我他们的意见吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T21:58:02.173

我用下面的简单代码解决了我的问题：

```
-(void)mainButton
{
  if ([mlabel.text isEqualToString: @" Arts " ])
  {
    [self performSegueWithIdentifier:@"Arts" sender:self];
  }
} 
```

在研究中，我了解到我可以通过上面指定的按钮而不是 PrepareForSegue 简单地通过示例来做我想做的事情。好简单。

# javascript - javascript onclick事件，每次点击相同元素的不同功能

> ID：12992079
> 
> 赞同：0
> 
> 时间：2012-10-20T19:49:30.700
> 
> 标签：javascript, jquery, function, events, onclick

我正在尝试创建一个 onclick 函数，该函数在每次单击时具有 2 个结果中的 1 个。换句话说，当用户第一次点击 onclick 元素时，结果 1 出现；然后用户第二次单击相同的元素，结果 2 发生。当用户第三次点击元素时，结果 1 再次发生；第四次点击，结果 2 出现；等等，就像一个循环。下面是一些伪 jQuery 来说明......

```
$(function(){
            var hits = 0;
    $('#myButton').click(function(){
                    if  (var hits = pos ) 
                    {
              $('#content1').fadeIn("slow");
              $('#content2').fadeOut("slow");
                    }
                    else
                    {
              $('#content1').fadeOut("slow");
              $('#content2').fadeIn("slow");
                    }
        return false;
    });
}); 
```

我很难找到答案，因为术语可能会有很大差异。从“变量”到“触发器”到“数组”到“侦听器”到“处理程序”到“条件”到“绑定”......我从哪里开始搜索？我知道有多种方法可以创建我的函数，但我知道这是找到最简单、最有效方法的最佳站点。因此，除了在语法上帮助我之外，我还希望对我列出的词组有一些术语帮助。我知道每个术语的一般含义，但是当将它们应用于我试图创建的场景/功能时，它们各自在哪里发挥作用？我认为这将有助于解决很多人的问题。提前致谢。

**感谢大家快速、详尽、专业的反馈。我将利用这些新知识来发挥它的优势。JQuery 确实让事情变得简单，几乎太容易了。但是，我问这个问题的主要原因是将其应用于 keydown 函数，而不是 click 函数。我想我可以找到答案并交换一些代码，也许使用普通的 javascript 就可以了。我发布了一个新问题，该问题使用了大家提供的知识和反馈，并提出了一个涉及 keydown 功能的不同场景。由于您的帮助，我认为我的语法非常接近，但是几乎没有。如果你想看，这里是 url**：[在 keydown 监听函数上绑定事件处理程序 JavaScript jQuery](https://stackoverflow.com/questions/12993188/bind-event-handler-on-keydown-listen-function-javascript-jquery) **你们真的很摇滚。**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T19:55:34.597

jQuery 具有[`.toggle(handlers)`](http://api.jquery.com/toggle-event/)交替点击功能：

```
$('#myButton').toggle(function() {
    $('#content1').fadeIn("slow");
    $('#content2').fadeOut("slow");
}, function() {
    $('#content1').fadeOut("slow");
    $('#content2').fadeIn("slow");
}); 
```

[**小提琴**](http://jsfiddle.net/ult_combo/FTCQG/)

现在，如果您只想通过分别淡入/淡出来切换 2 个元素，您可以使用[`.fadeToggle()`](http://api.jquery.com/fadeToggle/)：

```
$('#myButton').click(function() {
    $('#content1, #content2').fadeToggle("slow");
}); 
```

[**小提琴**](http://jsfiddle.net/ult_combo/FTCQG/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T20:30:53.807

如您想知道一些术语等。我将为您提供一些与语言无关的术语。

基本上，我将您的要求称为“状态机”。

在它非常基本的情况下，状态机包含“状态”、“事件”和“转换函数”。在您的情况下，您有 2 个状态（我们称它们为“可见”和“隐藏”）、一个事件（“单击”）和 2 个转换函数（我们可以称它们为“showContentOne”和“showContentTwo”）。

两个澄清术语：

*   状态是你的记忆（它告诉你过去发生了什么）
*   事件是任何会导致状态变化的外部活动
*   转换函数是一个函数，当状态改变事件发生时调用，目标是从一个状态改变（或“转换”）另一个状态（可能执行一些副作用）。

接下来，我将为您提供非常基本（实际上太基本）的概念解释，但请记住，我在这里过于简单化了 - 阅读书籍甚至维基百科中的适当文章以获得更准确的信息。

在您的情况下，状态机最好用图表来描述：

![状态机图](../Images/bbd739fb74abe2f710175666be1207f1.png)

那么如何正确实现这个东西呢？

您必须有一些变量来存储元素的状态。在您的代码片段中，您使用了名为“hits”的全局变量。当您使用 jQuery 时，我会改用它的“数据”功能，它可以让您将任意数据绑定到您的 DOM 元素（这样您就可以在单个 DOM 树中安装许多独立的状态机）。然后您需要绑定事件处理程序（这很容易，因为您只需要考虑一个事件 - 单击）并定义您的状态转换函数。最后，您需要一个函数来检查元素的状态、分析传入事件并调用适当的状态转换函数。

一些基本实现可能如下所示（我不会测试此代码，将其视为伪代码以帮助您获得可执行的解决方案）

```
function showContentOne($element) {
     $('#content1').fadeIn("slow");
     $('#content2').fadeOut("slow");
     $element.data('state', 'hidden');
}

function showContentTwo($element) {
     $('#content1').fadeOut("slow");
     $('#content2').fadeIn("slow");         
     $element.data('state', 'visible');
}

function transitState($element, event) {
     var state = $element.data('state');
     if (state == 'visible' && event == 'click') {
          showContentTwo($element);
     } else if (state == 'hidden' && event == 'click') {
          showContentOne($element);
     } else {
          //unsupported transition - do nothing or raise error
     }
}

$(function(){
    $('#myButton')
        .data('state', 'visible') //initialize a state
        .click(function() { //install event handler
          transitState($(this), 'click');
        }
        //here you can possibly install more event handlers
    });
}); 
```

现在，如果您重新实现“transitState”以使用一些数组或对象，如状态机定义，您可以获得非常强大的解决方案来添加/删除事件和其他状态转换函数。您可以在任何元素上安装状态机，也许用 jquery 插件包装它。

注意：在您的情况下，我的解决方案是严重过度设计此任务。我提供它是为了给你一些术语。您的非常基本的问题（2 个状态、2 个转换、一个事件）可以很容易地以您在原始问题中展示的方式轻松实现，我要做的唯一更改不是使用全局变量，而是使用数据函数来维护状态。因为你有两个状态，所以保存它的布尔变量会很好。

```
$(function(){

$('#myButton')
    .data('isVisible', true)
    .click(function(){
         if  ($(this).data('isVisible')) { 
              $('#content1').fadeIn("slow");
              $('#content2').fadeOut("slow");
         } else {
              $('#content1').fadeOut("slow");
              $('#content2').fadeIn("slow");
         }
         $(this).data('isVisible', !$(this).data('isVisibile'));
         return false;
    });
}); 
```

正如其他人所说的改变连续点击元素的可见性，您可以使用切换功能。

对不起我糟糕的英语：/

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-20T19:55:52.210

尝试：

```
$(function(){
            var hits = 0; //->variable
    // Everything below this line is called "binding" a handler to an event (click event)
    $('#myButton').click(function(){ // --> This whole function is the handler or listener
                    if  (hits % 2 !== 0) //for hits 2,4,6,8 etc. Also the condition
                    {
              $('#content1').fadeIn("slow");
              $('#content2').fadeOut("slow");
                    }
                    else
                    { // for hits 1,3,5,7
              $('#content1').fadeOut("slow");
              $('#content2').fadeIn("slow");
                    }
                   hits++;
        return false;
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-20T19:56:20.230

我可以建议你看看[jQuery 的 toggle()](http://api.jquery.com/toggle-event/)方法，它的用法如下：

```
$(function() {
    $('#myButton').toggle(function(){...}, function(){...});
}); 
```

我还给你一个修改版的DIY方式：

```
$(function(){
    var hits = 0;

    $('#myButton').click(function(){
        hits ^= 1;

        if  ( hits ) {
            $('#content1').fadeIn("slow");
            $('#content2').fadeOut("slow");
        } else {
            $('#content1').fadeOut("slow");
            $('#content2').fadeIn("slow");
        }

        return false;
    });
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-20T19:57:41.587

轻松实现这一点的一种方法，也许让它更优雅一些，是编写这个简单的插件：

```
(function ($) {
    $.fn.rollerClick = function (handlers) {
        this.each(function () {
            this.hits = 0;
            $(this).click(function () {
                handlers[this.hits ++](this);
                if (this.hits == handlers.length) {
                    this.hits = 0;
                }
            }); 
        });
    };
)(jQuery); 
```

现在你可以像这样使用它：

```
$("selector").rollerClick([
    function (element) {
        alert('1');
    },
    function (element) {
        alert('2');
    },
    function (element) {
        alert('3');
    }
]); 
```

然后通过重复单击所选项目，您将滚动处理程序，看到弹出的警报显示“1”、“2”、“3”、“1”、“2”……。

# iphone - 登录成功后转到 View Controller Xcode

> ID：12992081
> 
> 赞同：1
> 
> 时间：2012-10-20T19:49:56.720
> 
> 标签：iphone, objective-c, ios, xcode, login

当 URL 请求成功完成后，我如何将用户定向到定义的视图控制器。我有一个带有用户名和密码字段的登录页面。下面是我的代码。任何帮助将不胜感激。

```
#import "LoginTableViewController.h"

@interface LoginTableViewController ()
@property (weak, nonatomic) IBOutlet UITextField *UIEmailTextField;
@property (weak, nonatomic) IBOutlet UITextField *UIPasswordTextField;

@end

@implementation LoginTableViewController
@synthesize UIEmailTextField;
@synthesize UIPasswordTextField;

- (id)initWithStyle:(UITableViewStyle)style
{
self = [super initWithStyle:style];
if (self) {
    // Custom initialization
}
return self;
}

- (void)viewDidLoad
{
[super viewDidLoad];
}

- (void)viewDidUnload
{
[self setUIEmailTextField:nil];
[self setUIPasswordTextField:nil];
[super viewDidUnload];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

#pragma mark - barButton Outlet

- (IBAction)loginButtonPressed:(UIBarButtonItem *)sender {
NSString *data = [NSString stringWithFormat:@"username=%@&password=%@",UIEmailTextField.text, UIPasswordTextField.text];
NSData *postData = [data dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES];
NSString *postLength = [NSString stringWithFormat:@"%d", [postData length]];

// preaparing URL request to send data.

NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init] ;
NSString *url = [NSString stringWithFormat:@"http://www.twitter.com"];
[request setURL:[NSURL URLWithString:url]];
[request setHTTPMethod:@"POST"];
[request setValue:postLength forHTTPHeaderField:@"Content-Length"];
[request setHTTPBody:postData];
[request setTimeoutInterval:7.0];

NSURLResponse *response;
NSError *error;

NSData *urlData = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];
NSString *str=[[NSString alloc]initWithData:urlData encoding:NSUTF8StringEncoding];

NSLog(@"Login response:%@",str);

NSLog(@"Log In button was pressed!");
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T20:02:55.223

你现在设置它的方式，你的 NSURLConnection 将阻塞主线程，直到它完成。如果您使用异步 NSURLConnection，您可以成为它的委托人，并对失败和成功做出适当的响应，如下所示：

```
NSURLConnection* connection = [[NSURLConnection alloc] initWithRequest:request delegate:self startImmediately:YES];  //Conform to NSURLConnectionDelegate before you use this.

-(void)connection:(NSURLConnection*)connection didReceiveResponse:(NSURLResponse*)response
{
    //Got a response.  Not necessarily an error, so login might have been successful,
    //or it might not have.
}
-(void)connection:(NSURLConnection*)connection didReceiveData:(NSData*)data
{
    //The connection returned data.  Really only useful for requesting files.
}
-(void)connection:(NSURLConnection*)connection didFailWithError:(NSError*)error
{
    //Handle the error properly
}
-(void)connectionDidFinishLoading:(NSURLConnection*)connection
{
    //Connection's finished completely.  Probably a good time to check for an error,
    //Or change the view controller 
} 
```

*此外，更多的旁注，属性不应以***ObjC***中的大写字母开头，这是类使用的情况。而且最好不要进入 UI 命名空间来获取变量名。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T20:03:25.160

如果您正在尝试创建登录页面，我建议您采用不同的方法：首先放置成功登录将带您进入的页面，并将其设为您的根视图控制器。然后，立即将登录控制器推送为模态控制器。这样，即使登录失败，您也可以再次将登录屏幕向上推。如果您允许用户保留其凭据并且不必在启动后再次登录（如果适用），这也会清除您的代码。无论如何，这是一种更清洁的方法。您没有在 rootViewController 级别返回登录屏幕。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T20:13:54.783

设置您的视图控制器，以便`LoginTableViewController`在成功登录后关闭将显示适当的视图控制器。

例如：

```
 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    UIViewController *rootViewController = [[UIViewController alloc] init];
    self.window.rootViewController = rootViewController;

    LoginTableViewController *loginViewController = [[LoginTableViewController alloc] init];
    [rootViewController presentViewController:loginViewController animated:NO completion:nil];

    return YES;
} 
```

登录成功后，关闭`LoginTableViewController`：

```
[self dismissViewControllerAnimated:YES completion:nil]; 
```

# jquery - jquery post 对象和 perl cgi

> ID：12992087
> 
> 赞同：1
> 
> 时间：2012-10-20T19:50:58.153
> 
> 标签：jquery, perl, cgi

使用 jquery 我试图将标准对象发布到 perl cgi 脚本

js 变量数据：

```
{
 alias: ["a1","a2","a3"],
 ip: "127.0.0.1",
 name: "name",
 port: "80",
} 
```

js jquery 帖子：

```
`$.post('/vhosts.cgi',{action: 'save',data: data);` 
```

perl:

```
my $q = CGI->new;
print Dumper($q->param('data')); 
```

导致 Dumper 为空；$q 的转储显示参数名称是`data[ip],data[name]`etc，

自卸车（$q）：

```
$VAR1 = bless( {
             '.parameters' => [
                                'action',
                                'data[name]',
                                'data[ip]',
                                'data[port]',
                                'data[alias][]'
                              ],
             'data[alias][]' => [
                                  'a1',
                                  'a2',
                                  'a3'
                                ],
             '.charset' => 'ISO-8859-1',
             'data[ip]' => [
                             '127.0.0.1'
                           ],
             'data[port]' => [
                               '80'
                             ],
             'action' => [
                           'savevhost'
                         ],
             'data[name]' => [
                               'name'
                             ],
             '.fieldnames' => {},
             'escape' => 1
           }, 'CGI' ); 
```

我如何`data`在 perl 中获得对象或哈希？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T20:21:14.330

如果您不想为`data[...]`-like 结构编写自己的解析器实用程序并遇到 unicode 问题等，最好使用 JSON 编码/解码：

客户端：

```
$.post('/vhosts.cgi',{action: 'save',data: JSON.stringify(data, null, 2)); 
```

服务器端：

```
use CGI;
use JSON;
use Data::Dumper;

my $q = CGI->new;
my $data = decode_json($q->param('data'));

print Dumper $data; 
```

我不认为这是很难的方式。

# html - 检测手机与非手机移动设备？

> ID：12992091
> 
> 赞同：3
> 
> 时间：2012-10-20T19:51:33.180
> 
> 标签：html, asp.net-mvc, mobile, jquery-mobile

在你忽略这篇文章之前，我已经阅读了无数关于如何使用屏幕分辨率、用户代理等来检测移动平台是否显示“全功能”或更大的网站与更小的网站的文章。

我正在使用 .Net MVC4 并且已经可以通过 global.asax.cs 和 _Layout.Mobile 文件毫无障碍地重定向到我的 .mobile 页面。

因此，我的问题是：一旦进入移动页面，我想知道这是否是平板电脑（iPad、Android 等）的手机，以便在页面上呈现“呼叫我们”按钮。我正在使用 jQueryMobile，所以到目前为止我已经获得了执行以下操作的代码：

```
<a href="tel:+15559876543" data-role="button">Call Us Today</a> 
```

基本上，我正在检查设备是否有收音机并且可以拨打电话，以免让单击“呼叫我们”链接但无法到达任何地方的仅使用 WiFi 的 iPad 用户感到沮丧。

我完全认识到可能有更好的方法来处理我正在做的事情，我也很感激这些建议。

在此先感谢，丹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T22:16:33.900

用电话号码替换“今天给我们打电话”文本。（IMO）这让我点击它时按钮的作用更加明显，如果我想将它添加到我的联系人中，允许我在我的 iPad 上点击它，或者拿起我旁边的电话并在我响铃时响铃实际上可以看到数字。

# c# - Regex.Match 简单数组

> ID：12992094
> 
> 赞同：2
> 
> 时间：2012-10-20T19:51:50.387
> 
> 标签：c#, regex

这是我正在使用的。

```
{"allCharacters":[{"id":"410199","name":"D4rkness1939pwnz","gender":"1","skipLevel":"1","role":"alt","level":"30","generation":"1","xp":"4420578","gold":"2593","xpNextLevel":8735843},{"id":"250004","name":"Fallen_Sir_Illuminati","gender":"0","skipLevel":"0","role":"alt","level":"1","generation":"1","xp":"0","gold":"100","xpNextLevel":3000},{"id":"402615","name":"PRO_Illuminati","gender":"0","skipLevel":"0","role":"alt","level":"1","generation":"1","xp":"0","gold":"100","xpNextLevel":3000},{"id":"146314","name":"PRO_Illuminati_BRD","gender":"1","skipLevel":"0","role":"main","level":"25","generation":"17","xp":"1897767","gold":"375492","xpNextLevel":1929158},{"id":"342584","name":"PRO_Sir_Illuminati","gender":"0","skipLevel":"0","role":"alt","level":"1","generation":"1","xp":"2000","gold":"200","xpNextLevel":3000},{"id":"252818","name":"Sir_Ashton_of_Illuminati","gender":"0","skipLevel":"0","role":"alt","level":"1","generation":"1","xp":"2000","gold":"200","xpNextLevel":3000},{"id":"336515","name":"Sir_Illuminati","gender":"0","skipLevel":"0","role":"alt","level":"1","generation":"1","xp":"0","gold":"100","xpNextLevel":3000}],"currentCharacter":0} 
```

我试图得到一个 for `PRO_Illuminati_BRD`，角色":"main 部分是正则表达式匹配中最具体的部分。所以基本上是这条线。

```
{"id":"146314","name":"PRO_Illuminati_BRD","gender":"1","skipLevel":"0","role":"main","level":"25","generation":"17","xp":"1897767","gold":"375492","xpNextLevel":1929158}, 
```

以下是`Regex.Match`我使用过的所有内容，但它们都只匹配 D4rkness1939pwnz。

```
Match RealMain = Regex.Match(RawRes, "\"id\":\"(.*?)\",\"name\":\"(.*?)\",\"gender\":\"[0-9]\",\"skipLevel\":\"0\",\"role\":\"main\""); 
```

和

```
Match RealMain = Regex.Match(RawRes, "\"id\":\"(.*?)\",\"name\":\"(.*?)\",\"gender\":\"(.*?)\",\"skipLevel\":\"0\",\"role\":\"main\""); 
```

和

```
Match RealMain = Regex.Match(RawRes, "\"id\":\"(.*?)\",\"name\":\"(.*?)\",\"gender\":\"[0-9]\",\"skipLevel\":\"0\",\"role\":\"main\",\"level\":\"(.*?)\",\"generation\":\"(.*?)\",\"xp\":\"(.*?)\",\"gold\":\"(.*?)\",\"xpNextLevel\""); 
```

和

```
Match RealMain = Regex.Match(RawRes, "\"id\":\"(.*?)\",\"name\":\"(.*?)\",\"gender\":\"(.*?)\",\"skipLevel\":\"0\",\"role\":\"main\",\"level\":\"(.*?)\",\"generation\":\"(.*?)\",\"xp\":\"(.*?)\",\"gold\":\"(.*?)\",\"xpNextLevel\""); 
```

但他们总是返回 D4rkness1939pwnz 一个。:S

我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T20:00:33.333

如何使用[json 解析器](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptserializer.aspx)而不是正则表达式

```
string json = @"{""allCharacters"":[{""id"":""410199"",""name"":""D4rkness1939pwnz"",""gender"":""1"",""skipLevel"":""1"",""role"":""alt"",""level"":""30"",""generation"":""1"",""xp"":""4420578"",""gold"":""2593"",""xpNextLevel"":8735843},{""id"":""250004"",""name"":""Fallen_Sir_Illuminati"",""gender"":""0"",""skipLevel"":""0"",""role"":""alt"",""level"":""1"",""generation"":""1"",""xp"":""0"",""gold"":""100"",""xpNextLevel"":3000},{""id"":""402615"",""name"":""PRO_Illuminati"",""gender"":""0"",""skipLevel"":""0"",""role"":""alt"",""level"":""1"",""generation"":""1"",""xp"":""0"",""gold"":""100"",""xpNextLevel"":3000},{""id"":""146314"",""name"":""PRO_Illuminati_BRD"",""gender"":""1"",""skipLevel"":""0"",""role"":""main"",""level"":""25"",""generation"":""17"",""xp"":""1897767"",""gold"":""375492"",""xpNextLevel"":1929158},{""id"":""342584"",""name"":""PRO_Sir_Illuminati"",""gender"":""0"",""skipLevel"":""0"",""role"":""alt"",""level"":""1"",""generation"":""1"",""xp"":""2000"",""gold"":""200"",""xpNextLevel"":3000},{""id"":""252818"",""name"":""Sir_Ashton_of_Illuminati"",""gender"":""0"",""skipLevel"":""0"",""role"":""alt"",""level"":""1"",""generation"":""1"",""xp"":""2000"",""gold"":""200"",""xpNextLevel"":3000},{""id"":""336515"",""name"":""Sir_Illuminati"",""gender"":""0"",""skipLevel"":""0"",""role"":""alt"",""level"":""1"",""generation"":""1"",""xp"":""0"",""gold"":""100"",""xpNextLevel"":3000}],""currentCharacter"":0}";
var obj = new JavaScriptSerializer().Deserialize<Root>(json);

//var character = obj.allCharacters.First(i => i.name == "PRO_Illuminati_BRD");
var character = obj.allCharacters.First(i => i.role == "main"); 
```

--

```
public class Root
{
    public List<AnItem> allCharacters;
}

public class AnItem
{
    public string id;
    public string name;
    public string gender;
    public string skipLevel;
    public string role;
    public string generation;
    public string xp;
    public string gold;
    public int xpNextLevel;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T20:19:49.680

您面临的问题是您只阅读了第一场比赛。

要遍历所有匹配项，您应该使用 Matches：

```
MatchCollection matches = Regex.Matches(RawRes, "\"id\":\"(.*?)\",\"name\":\"(.*?)\",\"gender\":\"[0-9]\",\"skipLevel\":\"0\",\"role\":\"main\"");
foreach(Match item in matches)
{
    if (item.Groups[2].Value == "PRO_Illuminati_BRD")
        return item;
} 
```

或者，您应该将您的正则表达式更改为以下内容：

```
Regex.Matches(RawRes, "^.*\"id\":\"(.*?)\",\"name\":\"PRO_Illuminati_BRD\",\"gender\":\"[0-9]\",\"skipLevel\":\"0\",\"role\":\"main\""); 
```

这回答了您的问题，但如果您需要更多项目而不仅仅是单个项目，我建议您使用其他人已经描述的 JSON 解析器。

# php - 加载时的jquery代码片段

> ID：12992100
> 
> 赞同：1
> 
> 时间：2012-10-20T19:52:23.847
> 
> 标签：php, jquery

我正在为我的博客使用此代码片段插件：[http](http://www.steamdev.com/snippet/) ://www.steamdev.com/snippet/ ，但该插件在页面加载时不起作用。它仅在第一页刷新时有效。

我使用 jquery.ajax 请求将我的内容加载到特定的 div 中，我正在尝试这个：

```
$(window).on("load", function(){ 
  $("pre.cplus").snippet("cpp",{style:"acid"});
  $("pre.php").snippet("php",{style:"acid"});
  }); 
```

我也尝试触发加载事件，但我不知道它是否正确..

另一个问题：我用 php 字符串构建我的 html，如下例所示：

```
$string = '<pre class="cplus">  
           #include <iostream>   
           int main()
           {
            //c++ code             
           }           
           </pre>

           <pre class="php">
           <?php
           function foo()
           {
            // PHP code
           }
           ?>
           </pre>';

echo $string;   // ajax -> success 
```

但 PHP 片段显示为空（c++ 可以）。在我的页面上显示 php 代码片段的任何其他方式（或插件）？谢谢你。

已解决：问题不在于插件或 Iserni 建议。我在页面加载（ajax）时遇到问题。这就是我加载页面的方式：

```
function pageload(hash) {
    if(hash == '' || hash == '#php')
    {
      getHomePage();
    }

    if(hash)
    {
     getPage();
    }

} 

function getHomePage() {
    var hdata = 'page=' + encodeURIComponent("#php");
    //alert(hdata);
    $.ajax({
        url: "homeloader.php",  
        type: "GET",        
        data: hdata,        
        cache: false,
        success: function (hhtml) { 
            $('.loading').hide();               
            $('#content').html(hhtml);
            $('#body').fadeIn('slow');      

        }       
    });
}

function getPage() {
    var data = 'page=' + encodeURIComponent(document.location.hash);
    //alert(data);
    $.ajax({
        url: "loader.php",  
        type: "GET",        
        data: data,     
        cache: false,
        success: function (html) {  
            $('.loading').hide();               
            $('#content').html(html);
            $('#body').fadeIn('slow');      

        }       
    });
} 

 $(document).ready(function() {

 // content
   $.history.init(pageload);    

    $('a[href=' + window.location.hash + ']').addClass('selected');

    $('a[rel=ajax]').click(function () {

        var hash = this.href;
        hash = hash.replace(/^.*#/, '');
        $.history.load(hash);   

        $('a[rel=ajax]').removeClass('selected');
        $(this).addClass('selected');
        $('#body').hide();
        $('.loading').show();

        getPage();

        return false;
    }); 
    // ..... other code for menus, tooltips,etc. 
```

我知道这是实验性的，我已经混合了各种教程，但现在它可以工作了.. 非常感谢评论.. 谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T20:10:51.767

PHP 片段看起来是空的，因为浏览器认为它是一种 HTML 标记。

代替

```
$string = '<pre class="php">
       <?php
       function foo()
       {
        // PHP code
       }
       ?>
       </pre>'; 
```

你需要做：

```
// CODE ONLY
$string = '<?php
       function foo()
       {
        // PHP code
       }
       ?>';

// HTMLIZE CODE
$string = '<pre class="php">'.HTMLEntities($string).'</pre>'; 
```

至于 jQuery，这可能是由于您放置 jQuery 代码的位置：尝试将其放在页面底部，如下所示：

```
....
<!-- The page ended here -->
<!-- You need jQuery included before, of course -->
<script type="text/javascript">
    (function($){ // This wraps jQuery in a safe private scope
        $(document).ready(function(){ // This delays until DOM is ready

        // Here, the snippets must be already loaded. If they are not,
        // $("pre.cplus") will return an empty wrapper and nothing will happen.
        // So, here we should invoke whatever function it is that loads the snippets,
        // e.g. $("#reloadbutton").click();

        $("pre.cplus").snippet("cpp",{style:"acid"});
        $("pre.php").snippet("php",{style:"acid"});

        });
    })(jQuery); // This way, the code works anywhere. But it's faster at BODY end
</script>
</body> 
```

## 更新

我认为您可以通过合并两个页面加载功能来节省和简化一些代码（这称为**DRY**原则 -*不要重复自己*）：

```
function getAnyPage(url, what) {
    $('.loading').show(); // I think it makes more sense here
    $.ajax({
        url: url,
        type: "GET",        
        data: 'page=' + encodeURIComponent(what),
        cache: false,
        success: function (html) { 
            $('.loading').hide();
            $('#content').html(hhtml);
            $('#body').fadeIn('slow');
        }
        // Here you ought to allow for the case of an error (hiding .loading, etc.)
    });
} 
```

然后，您可以将调用更改为`getPage`，或将它们重新实现为包装器：

```
function getHomePage(){ return getAnyPage('homeloader.php', "#php"); }
function getPage()    { return getAnyPage('loader.php', document.location.hash); } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T20:13:19.247

好的，我建议的第一个问题

*   看看你的 JS 错误控制台说了什么
*   确保加载了对应的 js 插件文件
*   并在使用 ajax 时使用以下代码（关键是“成功”事件函数）：

```
$.ajax({
          网址：'你的网址'，
          成功：函数（数据）{
            $("pre.cplus").snippet("cpp",{style:"acid"});
            $("pre.php").snippet("php",{style:"acid"});
          }
});
```

对于第二个问题，lserni 回答得很清楚

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T20:10:26.733

您需要使用 jquery on load 函数，如下所示：

```
$(function(){
  RunMeOnLoad();
  }); 
```

# php - 为什么 CDbCacheDependency 的查询会执行两次？

> ID：12992105
> 
> 赞同：1
> 
> 时间：2012-10-20T19:52:44.333
> 
> 标签：php, caching, yii

我正在尝试使用 Yii 框架 1.1.12 缓存从数据库中检索到的一些结果。简而言之，这是我正在做的事情：

```
public static function getCategories()
{
    if (self::$_categories !== null)
        return self::$_categories;

    print "Getting categories...";    
    self::$_categories = Yii::app()->cache->get("categoriesList");
    if (self::$_categories === false)
    {
        $sql = "SELECT id, parent_id, name FROM {{category}} WHERE id > 0 AND is_deleted = 0";
        $categoriesList = Yii::app()->db->createCommand($sql)->queryAll();

        // Doing some work with $categoriesList and obtaining self::$_categories as the result
        // ...

        $dependency = new CDbCacheDependency("SELECT MAX(update_time) FROM {{category}}");
        Yii::app()->cache->set("categoriesList", self::$_categories, 3600, $dependency);
    }

    return self::$_categories;
} 
```

使用分析工具，我可以看到一切正常。第一次执行两个查询（每个查询一次）：

```
SELECT MAX(update_time) FROM arrenda_category
SELECT id, parent_id, name FROM arrenda_category WHERE id > 0 AND is_deleted = 0 
```

在进一步的请求中，仅执行第一个请求。

`update_time`问题是当我增加表中的最大值`arrenda_category`（即使不使用我自己的编辑脚本 - 直接从 MySQL 命令行）并刷新页面时，`SELECT MAX(update_time) FROM arrenda_category`查询计数变为等于 2。进一步刷新只会再次执行一次。有趣的是，如果我清除缓存，我`SELECT MAX(...) ...`也会执行一次查询。

所以我不明白为什么缓存依赖类的查询会在条件更改时执行两次。我的代码有问题还是有其他问题？

PS我确定`SELECT MAX(update_time) FROM arrenda_category`只能在上述功能中执行。我还看到`print "Getting categories..."`每个页面请求都会到达该行一次。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T07:37:01.063

是的。这是预期的。

**解释**

假设数据已经在缓存中。而当你调用该函数时`getCategories()` ，该行将`Yii::app()->cache->get("categoriesList")`执行依赖查询以检查数据是否更改。由于它没有改变，查询只执行一次。

现在您在外部更改了`update_time`值（或在您的应用程序中使用其他代码），然后`getCategories()`再次调用，

1.  该行`Yii::app()->cache->get("categoriesList")`执行依赖查询以检查缓存中的数据是否有效。发现数据无效，返回false
2.  然后`SELECT id, parent_id, name FROM {{category}} WHERE id > 0 AND is_deleted = 0`执行查询以从数据库中获取更新的数据
3.  `Yii::app()->cache->set("categoriesList", self::$_categories, 3600, $dependency);` **AGAIN**行执行相关性查询`SELECT MAX(update_time) FROM {{category}}`以获取最新`MAX(update_time)`的结果，其结果与数据一起存储。这就是查询执行两次的原因。

所以关键是每次你`set()`缓存一个值时，依赖值必须与它一起存储，因为后续`get()`查询需要它来检查依赖关系是否改变。

PS：如果您想更清楚地检查应用程序组件`set()`功能的源代码，它会调用类的函数，该类又调用导致执行依赖关系查询的函数`cache`[`evaluateDependency()`](http://www.yiiframework.com/doc/api/1.1/CCacheDependency#evaluateDependency-detail)[`CDbCacheDependancy`](http://www.yiiframework.com/doc/api/1.1/CDbCacheDependency)[`generateDependentData()`](http://www.yiiframework.com/doc/api/1.1/CDbCacheDependency#generateDependentData-detail)

# c++ - 仅在初始化与声明相结合时“跨越变量的初始化”

> ID：12992108
> 
> 赞同：4
> 
> 时间：2012-10-20T19:53:04.990
> 
> 标签：c++, performance, g++, switch-statement

我已经阅读[了这个](https://stackoverflow.com/questions/5685471/error-jump-to-case-label)关于“跳转到案例标签”错误的问题，但我仍然有一些问题。我在 Ubuntu 12.04 上使用 g++ 4.7。

此代码给出错误：

```
int main() {
  int foo = 1;
  switch(foo) {
  case 1:
    int i = 0;
    i++;
    break;
  case 2:
    i++;
    break;
  }
} 
```

错误是

```
jump-to-case-label.cpp: In function ‘int main()’:
jump-to-case-label.cpp:8:8: error: jump to case label [-fpermissive]
jump-to-case-label.cpp:5:9: error:   crosses initialization of ‘int i’ 
```

但是，这段代码编译得很好，

```
int main() {
  int foo = 1;
  switch(foo) {
  case 1:
    int i;
    i = 0;
    i++;
    break;
  case 2:
    i++;
    break;
  }
} 
```

第二个代码比第一个代码危险吗？我对为什么 g++ 允许它感到困惑。

其次，解决这个问题的方法是限定初始化变量的范围。如果初始化的变量是一个大对象，并且switch语句在while循环中，会不会每次进入和离开那个scope都会调用构造函数和析构函数，导致效率下降？或者编译器会优化这个吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-20T20:07:22.903

跳过对象的初始化，即使对象是 type `int`，也总是未定义的行为。请注意，`switch`-statement 的声明并没有什么特别之处：它只是一个声明，人们已经 [ab-] 使用了这种有趣的方式，例如[Duff 的 Device](http://en.wikipedia.org/wiki/Duff%27s_device)。语句中唯一特别的地方是标签可以采用`default:`and的形式`case <const-integer-expr>:`。

该语句`int i;`是变量的定义，但没有初始化。因此，不会绕过变量的初始化。跳过这个定义没有比一开始更大的问题了。当然，值是在跳转到`case 1:`而不是在跳转到时分配的，但这与人们只定义变量时在-语句`case 2:`之外的代码中发生的情况没有什么不同。`switch`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T20:34:41.973

首先，编译器决定如何打开`switch`汇编代码。可能是`if`或可能是表`goto`。此外，如果您将变量初始化一起编写声明，编译器会告诉您这是`error`. 在另一种情况下，它会是`warning`（编译器会警告你，但不会拒绝你）。所以，你可以保护自己。只是它调整编译器选项，`warnings`它将在哪里`errors`。并且要正确使用 中的变量`switch`，您必须指定它们的范围。例如：

```
switch(i)
{
case 1:
{
  int j = 0;
}
break;
} 
```

PS。对于 c++，switch 是地狱。

从 C++11 开始：

> **C.1.5 第 6 条：声明**
> 
> 6.4.2、6.6.4（switch 和 goto 语句）
> 
> **更改：**现在跳过具有显式或隐式初始化程序的声明是无效的（除非跨整个块未输入）
> 
> **基本原理：**初始化器中使用的构造函数可以分配在离开块时需要释放的资源。允许跳过初始化器需要复杂的运行时分配确定。此外，对未初始化对象的任何使用都可能是一场灾难。使用这个简单的编译时规则，C++ 可以确保如果一个已初始化的变量在范围内，那么它肯定已被初始化。
> 
> **对原始特征的影响：**删除语义上定义明确的特征。

从 gcc 诊断编译指示：

> **6.57.1​​0 诊断编译指示** [诊断编译指示](http://gcc.gnu.org/onlinedocs/gcc/Diagnostic-Pragmas.html)
> 
> GCC 允许用户有选择地启用或禁用某些类型的诊断，并更改诊断的类型。例如，一个项目的策略可能要求所有源代码都使用 -Werror 进行编译，但某些文件可能具有允许特定类型警告的异常。或者，项目可能会选择性地启用诊断并将其视为错误，具体取决于定义的预处理器宏。

**PSS。**编译器知道您的变量未初始化的代码块。无论它是什么`static C/C++ analysis`（例如，免费`cppcheck`）都会向您展示问题所在。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-20T20:15:26.467

在第二种情况下打开警告（-Wall）给出：

```
foo.cpp:15:8: warning: 'i' may be used uninitialized in this function [-Wuninitialized] 
```

跳过初始化是一个错误，但编译器不会试图在未初始化的变量上猜测你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-04T06:32:26.613

在 switch 内初始化变量会导致此错误。这是由于权限问题而发生的。尝试在开关外初始化变量并在开关内赋值。

同样的问题也适用于 C++ 线程。

# javascript - 根据提示输出通过for循环重复

> ID：12992109
> 
> 赞同：-1
> 
> 时间：2012-10-20T19:53:11.693
> 
> 标签：javascript, loops, for-loop, prompt, output

所以基本上我想做的是弄清楚如何根据提示的输出重复一行 x 次。

IE

```
<script>
var favnumber = Number(prompt("What is your favorite number?"))
for(var i=0;i<favnumber;i++){
    System.out.println(name + "is bad at javascript");
}
</script> 
```

知道有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T19:59:09.793

JavaScript 不是 Java，因此`System.out.println`没有任何特殊含义。您在这里有两个选择：使用`console.log()`，或使用`document.write()`。

我建议您使用`console.log()`，因为它不会与当前页面的 HTML 结构混淆：

```
var favnumber = parseInt(prompt("What is your favorite number?"), 10);
var name = 'JavaScript';

for (var i = 0; i < favnumber; i++) {
    console.log(name + ' is not Java');
}​ 
```

您需要打开浏览器的 JavaScript 控制台才能看到这些消息。

使用`document.write()`有点麻烦：

```
var favnumber = parseInt(prompt("What is your favorite number?"), 10);
var name = 'JavaScript';

for (var i = 0; i < favnumber; i++) {
    document.write(name + ' is not Java');
    document.write('<br />');
}​ 
```

**演示：http: [//jsfiddle.net/HC3Y2/](http://jsfiddle.net/HC3Y2/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T19:58:08.527

JavaScript**不是**Java。`System.out.println()`因此，除非您定义它，否则没有功能。

要输出，您必须使用 DOM、控制台或警报。后者可能如下所示：

```
<script>
var favnumber = Number(prompt("What is your favorite number?"));
var name = 'Bob';
for(var i=0;i<favnumber;i++){
   alert(name + " is bad at javascript");
}
</script> 
```

^(此外，尝试习惯以 . 结尾的每个命令`;`。否则，作为 JavaScript 初学者，你会遇到许多奇怪的问题——以后也会遇到。)

# c++ - 在 C++ 中逐行读取文本文件

> ID：12992113
> 
> 赞同：2
> 
> 时间：2012-10-20T19:53:25.877
> 
> 标签：c++, string, io

下面的代码是如何工作的？for循环的计数器在哪里，如何将计数器重置为行号0。

```
for (std::string line;std::getline(ifs, line); )
{
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-20T19:55:25.423

不需要柜台。这相当于

```
std::string line;
while(getline(ifs, line))
{
} 
```

有一些方法可以将输入迭代器移回文件的开头。像：`ifs.seekg(0, std::ios::beg);`应该做的伎俩。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-20T19:56:27.670

您的`for`循环相当于：

```
{
    std::string line;
    while (std::getline(ifs, line)) {
    }
} 
```

换句话说：“只要`getline`返回就继续迭代`true`”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-20T20:04:04.590

并将计数器重置为第 0 行（即流的开头），您应该使用

```
ifs.seekg (0, ios::beg); 
```

# design-patterns - 如何同时验证（登录）一个用户？避免他可以同时在不同的计算机上登录两次

> ID：12992116
> 
> 赞同：0
> 
> 时间：2012-10-20T19:53:53.737
> 
> 标签：design-patterns, jakarta-ee, authentication

我的意思是用户 ID 不能同时在两台不同的机器上进行身份验证。我该如何控制这个？我正在使用 Java EE 平台。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T15:52:04.670

Java EE 没有为这种情况提供直接的解决方案。

您可能会引入一个 servlet`Filter`来强制执行您的限制：

*   跟踪用户是否登录，并拒绝重复用户的请求。如果你想扩大规模，那么在数据库中跟踪它，而不是在应用程序范围内[尽管应用程序范围的哈希表将是一个快速而肮脏的原型解决方案]。

*   您可以`HttpServletRequest.getRemoteAddr`用来区分两台传入的计算机，但是这无助于区分同一路由器后面的两台计算机。

*   将 EJB 注入过滤器以处理您的 JPA 请求；使用 EJB 将消除其他问题。

*   *在所有*servlet上部署过滤器（否则会有安全漏洞）：

    ```
    @WebFilter({"/*"})
    public class SecurityFilter extends AbstractSecurityFilter { ... } 
    ```

*   AbstractSecurityFilter，定义如下，增强了标准的 Java EE 安全检查。它将减少检查*每个*传入 servlet 请求的开销，只对“新登录”进行全面检查。它还将处理拒绝逻辑。它不实现正在讨论的身份验证，但可以提供这样的基础。

子类并为`authenticate`和`getFailedLoginPage()`方法提供定义：

```
/***
 * Augment the Java EE security check(s).
 * 
 * Java EE Security is the primary check, so this filter doesn't take any action
 * until after the user successfully logs in through the standard Java EE security
 * mechanisms. Once logged in, the method authenticate is called to perform
 * the custom checks. If these checks fail the user is logged out and forwarded
 * to the page returned by getFailedLoginPage().
 */
public abstract class AbstractSecurityFilter implements Filter
{
    protected static final String ATTR__IS_AUTHENTICATED = AbstractSecurityFilter.class.getName() + ".authenticated";

    /**
     * @return true if request meets our authentication requirements. 
     */
    protected abstract boolean authenticate(HttpServletRequest request, HttpServletResponse response);

    protected abstract String getFailedLoginPage();

    @Override
    final public void doFilter(final ServletRequest request, final ServletResponse response, final FilterChain chain)
            throws IOException, ServletException
    {
        /**
         * 
         * Order of events (and order is somewhat important): <code>
         * 
         * - ignore if user has not logged in (if Java EE Security hasn't required login, neither do we here).
         * 
         * - check for this filter's ATTR__IS_AUTHENTICATED flag to be set on the session attributes:
         *   if set we have nothing else to do.
         * 
         * - call authenticate...
         *   - on failure: logout, forward to failedLoginPage, and return (cancel remainder of this request).
         *   - on success: set ATTR__IS_AUTHENTICATED flag in the session attributes.
         * 
         * </code>
         */

        if (request instanceof HttpServletRequest) {
            final HttpServletRequest httpRequest = (HttpServletRequest)request;

            final HttpSession session = httpRequest.getSession(false);
            if (session != null) {
                /*
                 * Ignore if user has not (yet) logged in; let JEE Security filter(s) do their job(s) first.
                 */
                final Principal userPrincipal = httpRequest.getUserPrincipal();
                if (userPrincipal != null) {

                    // Check that user has not been fully "verified".
                    final Object attribute = session.getAttribute(ATTR__IS_AUTHENTICATED);
                    if (attribute == null) {
                        if ( !authenticate(httpRequest, (HttpServletResponse)response) {
                            httpRequest.logout();

                            final ServletContext servletContext = httpRequest.getServletContext();
                            servletContext.getRequestDispatcher(getFailedLoginPage()).forward(request, response);
                            return;
                        }

                        // User has passed local checks; record so we don't have to do this again.
                        final String name = userPrincipal.getName();
                        session.setAttribute(ATTR__IS_AUTHENTICATED, name);
                    }
                }
            }
        }

        chain.doFilter(request, response);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T11:25:45.383

每次用户登录时，您都会给他一些令牌（例如[Session ID](http://en.wikipedia.org/wiki/Session_ID)）。稍后，当用户执行某些操作时，您会从他那里收到此令牌，并根据您的内部数据存储（例如数据库）对其进行验证。如果验证成功，则让用户进入。

为了禁用来自不同计算机的多次登录，您的令牌应该包括机器的 ID 和其他数据。在 a) 登录和 b) 验证期间，您将比较令牌中的 ID 和当前使用的机器的真实 ID。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T18:21:10.620

Spring-security 在会话中具有并发控制。请参阅[http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#concurrent-sessions](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#concurrent-sessions)。

# facebook - 从非管理员帐户访问 facebook 应用程序不起作用

> ID：12992118
> 
> 赞同：0
> 
> 时间：2012-10-20T19:54:06.920
> 
> 标签：facebook, facebook-graph-api, facebook-php-sdk

我已经下载了一个使用 PHP sdk 的 Facebook 应用程序示例，当我从管理该应用程序的帐户访问它时它运行良好，但是当我尝试从另一个帐户访问它时，我收到一条错误消息

请任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T20:07:58.480

[在https://developers.facebook.com](https://developers.facebook.com)上检查应用程序的沙盒模式

![在此处输入图像描述](../Images/e4086b7173387c07d652c6fbdf1bc746.png)

这将应用程序限制为开发人员。

# objective-c - 核心数据问题 - 无法存储 NSNumber

> ID：12992129
> 
> 赞同：0
> 
> 时间：2012-10-20T19:55:56.023
> 
> 标签：objective-c, core-data, nsnumber

我正在尝试在我的应用程序中使用 Core Data。我想存储一个属性“totalKM”。

为了存储我的属性，我使用这些行：

```
Model *event = (Model *)[NSEntityDescription insertNewObjectForEntityForName:@"Model" inManagedObjectContext:managedObjectContext];
int number = 4;
[event setTotalKM:[NSNumber numberWithDouble:number]]; 
```

要阅读我的属性，我使用这些：

```
Model *event = (Model *)[NSEntityDescription insertNewObjectForEntityForName:@"Model" inManagedObjectContext:managedObjectContext];
NSNumber *number = [event totalKM]; 
```

我的属性“totalKM”始终是默认值，O。我也不例外。我错过了什么吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T20:35:24.660

`insertNewObjectForEntityForName`此方法用于将模型置于上下文中。

这是一个新对象。

正确的方法是：

**设置新的**

```
Model *event = (Model *)[NSEntityDescription insertNewObjectForEntityForName:@"Model" inManagedObjectContext:managedObjectContext];

int number = 4;

[event setTotalKM:[NSNumber numberWithDouble:number]];

//save change if need
NSError *error = nil;

if (![self.manageObjectContext save:&error]) {
    NIDERROR(@"save managedContext error :%@",error);
} 
```

**获取对象进度**

当您需要获取模型表单时 coredate.u 需要 2 fetch 使用 fetch

喜欢这个圆顶

```
NSFetchRequest *fetchRequest = [[NSFetchRequest alloc]init];
[fetchRequest setEntity:[NSEntityDescription entityForName:@"Board"
                                    inManagedObjectContext:self.manageObjectContext]];
//set fetch conditions
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"board_id == %@", aBoardID];
[fetchRequest setPredicate:predicate];

NSError *error = nil;

NSArray *results = [self.manageObjectContext executeFetchRequest:fetchRequest error:&error];

if (error) {
    NIDERROR(@"fetch board error.\n board id: %@ \n error:%@", aBoardID, error);
    return nil;
}

Model *model = results[0];

NSLog(@"%@",model.totalKM) 
```

# css - 是否有 ALL 兄弟姐妹选择器？

> ID：12992136
> 
> 赞同：0
> 
> 时间：2012-10-20T19:56:53.537
> 
> 标签：css, css-selectors, siblings

> **可能重复：**
> [CSS 全包兄弟选择器](https://stackoverflow.com/questions/8426160/css-all-inclusive-sibling-selector)

CSS3 有一个[*相邻*的兄弟选择器 +](https://developer.mozilla.org/en-US/docs/CSS/Adjacent_sibling_selectors)和一个[*通用*的兄弟选择器 ~](https://developer.mozilla.org/en-US/docs/CSS/General_sibling_selectors)。是否可以选择*所有*兄弟姐妹？（“一般”选择器实际上只选择*以下*同级）

例如，在[此示例](http://jsfiddle.net/9aU6D/1/)中，我希望所有非悬停的 a-tag 变小，而不仅仅是悬停后的标签。

**HTML**

```
<a href='#'>Item 1</a>
<a href='#'>Item 2</a>
<a href='#'>Item 3</a> 
```

**CSS**

```
a { font-size: 15px; }
a:hover ~ a { font-size: 12px; }​ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T19:57:59.267

不，在 Selectors 3 中没有这样的兄弟选择器。

`:not()`尽管您可以使用伪类 as选择未悬停的元素，但`a:not(:hover)`您不能相对于当前悬停的其他元素`a`或仅在悬停时选择所有元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T20:20:34.750

如果元素被包裹在一个共同的父级中，那么您可以近似于类似的东西：

```
#parent a {
    font-size: 2em;
}

#parent:hover a {
    font-size: 1em;
}

#parent:hover a:hover {
    font-size: 2em;
} 
```

[JS Fiddle 概念验证](http://jsfiddle.net/davidThomas/HpYFr/)。

但是，正如 Boltclock 所回答的，不幸的是，没有（当前）基于兄弟姐妹的 CSS 组合器/选择器解决方案。

# javascript - 从 Google 地球 KML 文件指向经纬度转换

> ID：12992150
> 
> 赞同：0
> 
> 时间：2012-10-20T19:58:17.733
> 
> 标签：javascript, node.js, google-maps, google-maps-api-3, google-earth

我在提取谷歌地球坐标时遇到问题，因为我需要它在 latlng 而不是 GPoint 中，并且需要暴露给我的谷歌地图应用程序，我知道我可以使用这些点在 gmap 中显示我的数据，但仍然需要转换为 latlng，我的 nodejs 脚本

```
var fs = require('fs'),
    xml2js = require('xml2js');

var parser = new xml2js.Parser();
fs.readFile(__dirname + '/doc.xml', function(err, data) {
    parser.parseString(data, function (err, result) {
        var data = [];
        for (var i in result.data.Placemark) {
            var row = result.data.Placemark[i];
            var point = row.Point[0].coordinates.toString().split(',');
            row = {
                name            : row.name[0]
                , description   : row.description[0]
                , geolocation   : [point[0], point[1]]
            };
            data.push(row);
        }

        console.log(data);
    });
}); 
```

此时我能够提取我想要的所有数据（我刚刚从 KML 中删除了所有不必要的标签）。但我需要将其规范化为 latlng，因为我的其他数据库文档（noSQL）都在 latlng 中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T20:05:19.910

颠倒point[0]（经度）、point[1]（纬度）的顺序。

改变：

```
 geolocation   : [point[0], point[1]] 
```

至：

```
 geolocation   : [point[1], point[0]] 
```

# php - 表单提交会话中断

> ID：12992151
> 
> 赞同：-1
> 
> 时间：2012-10-20T19:58:22.803
> 
> 标签：php, session

用户登录，并从他们的用户名创建一个会话变量。网站上的菜单由用户状态决定——管理员看到管理员菜单，教练看到教练菜单，等等。一切正常。

当我需要`$_SESSION['value']`再次使用该事物将某些内容从一页传递到另一页时，事情就会崩溃。例如，教练将登录并查看他创建的游戏列表。要编辑游戏，他选择一个游戏，然后将一个变量传递到下一页，他可以在其中编辑他在前一页选择的游戏的详细信息。在第一页提交表单的那一刻（当他选择游戏时），就像我的会话被打破了，我失去了所有的菜单等。

站点上的其他表单只需将不需要`$_SESSION`传递任何内容的内容（用户、游戏等）添加到数据库中就可以正常工作。

有什么明显的我忽略了吗？是否有另一种将信息从一个页面传递到另一个页面的方法不会中断我的会话？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T20:04:25.830

^(这听起来像经常...)

**`session_start ();`“哦该死，我忘记在使用前打电话了`$_SESSION`”**

* * *

但是当然还有很多其他的事情可能会导致这种头痛。

*   检查您的表单提交到的页面是否使用相同（或更低）的子域（如果您的网站`www`在任何地方使用但不在那里，则保存会话信息的 cookie 将无法正常工作）。

*   检查您网站的某些部分没有使用 https，而其他部分没有使用 http

*   确保会话 cookie 的 TTL（经验）足够长，以便用户有时间进行编辑（这通常不是问题，我还没有遇到过默认配置）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T20:02:45.707

确保所有页面上都有 session_start() ；包括您的表单提交给的那个

# c# - 从 DataGridView 获取通用集合值到 Xml 文件

> ID：12992153
> 
> 赞同：1
> 
> 时间：2012-10-20T19:58:40.963
> 
> 标签：c#, xml, winforms, datagridview, generic-list

在我的 xml 文件中，它有很多元素，并且有很多子/子子元素，所以我决定加载为通用列表并显示在 DGView 中，并且列已经在 DGview 中创建/自定义。

我必须编辑 datagridview 中的值并序列化回文件。我想知道，如何从数据网格视图中获取值并序列化回文件。

我尝试使用它，`Dataset ds = new Dataset();ds = (Dataset) (dataGridView2.Datasource);ds.WriteXml("XML_File.xml");`我收到一条错误消息，nullRefExceptionError。据我所知，DataSet ds 为空，这就是我收到此错误的原因。

我不想使用数据集进行绑定。我想将xml文件直接绑定到datagridview。我的方法有可能吗？？？

这种方法很好，但它不像原始 xml 文件那样保存 xml 文件：

```
 DataTable dt = new DataTable("Rules");

        for (int i = 0; i < dataGridView4.ColumnCount; i++)
        {
            dt.Columns.Add(dataGridView4.Columns[i].Name, typeof(System.String));
        }

        DataRow myrow;
        int icols = dataGridView4.Columns.Count;
        foreach (DataGridViewRow drow in this.dataGridView4.Rows)
        {
            myrow = dt.NewRow();
            for (int i = 0; i <= icols - 1; i++)
            {

                myrow[i] = drow.Cells[i].Value;
            }
            dt.Rows.Add(myrow);
        } 

        dt.WriteXml(@"C:\test\items.xml"); 
```

对我从 datagridview 进行序列化/写入值的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T19:53:53.143

我已经针对我的问题调整了这种方法并且它有效。

```
List<Test>laneConfigs = new List<Test>();//From a class
            foreach (DataGridViewRow dr in dataGridView1.Rows)
            {
                int bbbBorder = 0;
                Int32.TryParse(dr.Cells["BBor"].Value.ToString(), out bbbBorder );
                int eeee= 0;
                Int32.TryParse(dr.Cells["EBor"].Value.ToString(), out eee);

                LaneConfig laneConfig = new LaneConfig(
                    dr.Cells["ID"].Value.ToString(),
                    (TrafficLaneType)Enum.Parse(typeof(TrafficLaneType), dr.Cells["Type"].Value.ToString()),
                    new ValueWithUnit<int>(bbbBorder, "mm"),
                    new ValueWithUnit<int>(eee, "mm"));

                laneConfigs.Add(llaneConfig);
            } 
```

# java - 如果用户输入空白则循环

> ID：12992154
> 
> 赞同：0
> 
> 时间：2012-10-20T19:58:48.403
> 
> 标签：java

我在使用 while 循环时遇到了问题。我已经完成了所有工作，除了如果用户为一个短语输入一个空白，它会给他们一个声明说输入一个非空白短语。这需要循环，直到用户输入一个短语，但我似乎无法让它工作。

这是代码：

```
System.out.print("Enter a phrase to search the above text for: ");
phrase = kb.nextLine();

while (phrase.equals(""))
{
    System.out.print("Please enter a non-blank phrase: ");
    phrase = kb.next();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T20:01:16.580

在您的 while 循环中，您正在使用`phrase = kb.next();`，它将在`newline`给出空白输入时读取。您可以使用`kb.nextLine();`忽略空白输入中的换行符。

```
 while (phrase.equals(""))
        {
            System.out.print("Please enter a non-blank phrase: ");
            phrase = kb.nextLine();
        } 
```

或者您可以使用`trim`删除尾随`newline`，所以使用`while (phrase.trim().equals(""))`： -

```
 while (phrase.trim().equals(""))
        {
            System.out.print("Please enter a non-blank phrase: ");
            phrase = kb.next();
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T20:01:18.137

尝试修剪：

```
 while (phrase.trim().equals(""))
            {
                System.out.print("Please enter a non-blank phrase: ");
                phrase = kb.next();
            } 
```

# ios - 旧 iOS 设备上的快速双线性插值

> ID：12992157
> 
> 赞同：0
> 
> 时间：2012-10-20T19:59:10.683
> 
> 标签：ios, performance, interpolation

我有以下代码从二维向量矩阵进行双线性插值，每个单元格都有向量的 x 和 y 值，并且函数接收 k 和 l 索引，告诉矩阵中左下角最近的位置

```
// p[1]                     returns the interpolated values
// fieldLinePointsVerts     the raw data array of fieldNumHorizontalPoints x fieldNumVerticalPoints
//                          only fieldNumHorizontalPoints matters to determine the index to access the raw data
// k and l                  horizontal and vertical indices of the point just bellow p[0] in the raw data

void interpolate( vertex2d* p, vertex2d* fieldLinePointsVerts, int fieldNumHorizontalPoints, int k, int l ) {

    int index = (l * fieldNumHorizontalPoints + k) * 2;

    vertex2d p11;
    p11.x = fieldLinePointsVerts[index].x;
    p11.y = fieldLinePointsVerts[index].y;

    vertex2d q11;
    q11.x = fieldLinePointsVerts[index+1].x;
    q11.y = fieldLinePointsVerts[index+1].y;

    index = (l * fieldNumHorizontalPoints + k + 1) * 2;

    vertex2d q21;
    q21.x = fieldLinePointsVerts[index+1].x;
    q21.y = fieldLinePointsVerts[index+1].y;

    index = ( (l + 1) * fieldNumHorizontalPoints + k) * 2;

    vertex2d q12;
    q12.x = fieldLinePointsVerts[index+1].x;
    q12.y = fieldLinePointsVerts[index+1].y;

    index = ( (l + 1) * fieldNumHorizontalPoints + k + 1 ) * 2;

    vertex2d p22;
    p22.x = fieldLinePointsVerts[index].x;
    p22.y = fieldLinePointsVerts[index].y;

    vertex2d q22;
    q22.x = fieldLinePointsVerts[index+1].x;
    q22.y = fieldLinePointsVerts[index+1].y;

    float fx = 1.0 / (p22.x - p11.x);
    float fx1 = (p22.x - p[0].x) * fx;
    float fx2 = (p[0].x - p11.x) * fx;

    vertex2d r1;
    r1.x = fx1 * q11.x + fx2 * q21.x;
    r1.y = fx1 * q11.y + fx2 * q21.y;

    vertex2d r2;
    r2.x = fx1 * q12.x + fx2 * q22.x;
    r2.y = fx1 * q12.y + fx2 * q22.y;

    float fy = 1.0 / (p22.y - p11.y);
    float fy1 = (p22.y - p[0].y) * fy;
    float fy2 = (p[0].y - p11.y) * fy; 

    p[1].x = fy1 * r1.x + fy2 * r2.x;
    p[1].y = fy1 * r1.y + fy2 * r2.y;
} 
```

目前，此代码需要在旧 iOS 设备（例如具有 arm6 处理器的设备）中运行每一帧

我从维基百科的方程式中获取了数字子指数[http://en.wikipedia.org/wiki/Bilinear_interpolation](http://en.wikipedia.org/wiki/Bilinear_interpolation)

我会增加任何关于性能优化的评论，甚至是简单的 asm 代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T19:44:51.797

如果每帧仅运行*一次*，则此代码不应导致您的速度变慢。但是，如果它每帧运行多次，则很容易。

我会使用分析器运行您的应用程序，以查看真正的性能问题在哪里。

这里有一些优化空间：a）某些索引计算可以被分解并在后续计算中重新使用），b）您可以将您的 fieldLinePointsVerts 数组取消引用一次并重新使用它，而不是每次索引它两次指数...

但总的来说，这些东西不会有太大帮助，除非每帧调用这个函数很多很多次。在这种情况下，每一件小事都会有所帮助。

# actionscript-3 - 无效的位图数据

> ID：12992160
> 
> 赞同：2
> 
> 时间：2012-10-20T19:59:16.093
> 
> 标签：actionscript-3, flash, air

所以，我正在移植一个游戏，在 AIR Mobile 中为 web flash 构建（使用 FlashDevelop）。现在，我有一个首先运行的类，它在位图中制作矢量图形并根据需要重新调整它们的大小。然后，所有这些位图（实际上是 BitmapData）都存储在 Vectors 中。这个类是一个 Singelton 类的对象，它允许我轻松访问存储的 BimapData。

另外，我使用 FlashPunk 作为游戏引擎。

现在，我已经创建了大约 16 个 BitmapData 并将它们存储在该类中，一切都很好。但是，我在新的 Vector 对象中添加的下一个 BitmapData 无法正常工作。在 RenderScreen 中一切都很好，但是一旦游戏开始，例如单击开始游戏，它应该返回 BitmapData 以创建菜单，但它报告“ArgumentError: Error #2015: Invalid BitmapData”

可能是什么问题？有问题的 BitmapData 是使用 draw() 从矢量图形创建的，根据需要缩放，初始宽度为 1024 像素，高度为 120 像素。此外，游戏使用大约 40Mb 内存运行，所以大小不是问题......

知道为什么会显示此错误吗？

编辑：我发现了问题并解决了它。如何结束这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T02:56:25.677

我敢打赌，这是一个内存问题……错误 2015 要么是因为其中一个维度无效（宽度或高度 < 1），要么是因为没有足够的内存来创建 BitmapData。

[System](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/system/System.html)类有一些属性可以帮助您在尝试创建冲突的 BitmapData 之前调试内存状态；）

如果你发现它实际上是一个内存问题，除了戴上新帽子，你将不得不重新考虑缓存这些精灵的方式......尝试只缓存应用程序每个阶段的必要部分，在你之前处理它们需要创造更多，等等。祝你好运！

# css - 将 Pin it 按钮放置在 Pinterest 插件的图像顶部

> ID：12992162
> 
> 赞同：2
> 
> 时间：2012-10-20T19:59:37.083
> 
> 标签：css, wordpress, plugins, position, pinterest

我正在尝试在我的博客中使用 Pinterest 插件，它应该在我的帖子中的任何图像顶部显示一个 PinIt 按钮。我像往常一样安装了所有东西，但不是位于图像顶部的按钮，而是单独存在并且图像向下移动。我正在使用这种风格`position:relative;`，但它并没有像我想要的那样工作。
您可以在我的博客中看到它：[http ://www.thehibou.com/](http://www.thehibou.com/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T09:18:26.237

改变：

```
.sn_pin {
    background: url("http://www.thehibou.com/wp-content/uploads/2012/10/pinit-button.png") repeat scroll 0 0 transparent;
    bottom: 0;
    display: block;
    float: right;
    height: 117px;
    margin: -147px 0 0;
    opacity: 1 !important;
    position: relative;
    right: 0;
    width: 113px;
    z-index: 999;
}
.sn_pinterest .sn_pin {
    display: none;
    position: relative;
}
.sn_pinterest:hover .sn_pin {
    display: block;
    position: relative;
}
.sn_pinterest:hover {
    opacity: 0.75 !important;
    position: relative;
} 
```

至：

```
.sn_pin {
    background: url("http://www.thehibou.com/wp-content/uploads/2012/10/pinit-button.png") repeat scroll 0 0 transparent;
    display: block;
    height: 117px;
    margin: -147px 0 0;
    opacity: 1 !important;
    position: absolute;
    right: 0;
    width: 113px;
    z-index: 999;
}
.sn_pinterest .sn_pin {
    display: none;
}
.sn_pinterest:hover .sn_pin {
    display: block;
}
.sn_pinterest:hover {
    opacity: 0.75 !important;
} 
```

回顾一下：删除所有**位置：相对；**但是将前一个换成绝对的。同时删除**底部：0；**和**浮动：对；**

希望这可以帮助 ;）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T11:49:35.220

要让它在右下角，添加另一个 CSS 规则：

```
.sn_pinterest {
    position: relative;
    overflow: hidden;
} 
```

然后添加**底部：0px；**到 .sn_pin

希望这可以帮助 ;）

# powershell - 批量增量文件重命名

> ID：12992163
> 
> 赞同：4
> 
> 时间：2012-10-20T19:59:40.420
> 
> 标签：powershell, command-prompt, windows-7-x64

我正在尝试根据当前目录列表将目录中的每个文件重命名为递增的值，以便

```
 -------------------------
|-------------------------|
|      | B1S1A800.ext     |
|      | B100M803.ext     |
|      | B100N807.ext     |
|      | B101S800.ext     |
|      | B102S803.ext     |
 ------------------------- 
```

相反，它看起来像：

```
 -------------------------
|-------------------------|
|      | 1.ext            |
|      | 2.ext            |
|      | 3.ext            |
|      | 4.ext            |
|      | 5.ext            |
 ------------------------- 
```

如何在 PowerShell 中实现这一目标？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-20T20:49:45.017

这是一种方式：

```
$files = Get-ChildItem c:\yourpath\*.ext
$id = 1
$files | foreach {
Rename-Item -Path $_.fullname -NewName (($id++).tostring() + $_.extension) 
} 
```

# python - Python字典增量

> ID：12992165
> 
> 赞同：43
> 
> 时间：2012-10-20T20:00:03.913
> 
> 标签：python, dictionary, increment

在 Python 中，在递增之前必须先检查一个键是否在字典中，这很烦人：

```
if key in my_dict:
  my_dict[key] += num
else:
  my_dict[key] = num 
```

上面的四行是否有更短的替代品？

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-10-20T20:06:31.553

另一种选择是：

```
my_dict[key] = my_dict.get(key, 0) + num 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-10-20T20:01:56.423

你有很多选择。我喜欢使用[`Counter`](https://docs.python.org/3/library/collections.html#collections.Counter)：

```
>>> from collections import Counter
>>> d = Counter()
>>> d[12] += 3
>>> d
Counter({12: 3}) 
```

或者[`defaultdict`](https://docs.python.org/3/library/collections.html#collections.defaultdict)：

```
>>> from collections import defaultdict
>>> d = defaultdict(int)  # int() == 0, so the default value for each key is 0
>>> d[12] += 3
>>> d
defaultdict(<function <lambda> at 0x7ff2fe7d37d0>, {12: 3}) 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-10-20T20:01:43.567

你想要的叫做 defaultdict

请参阅[http://docs.python.org/library/collections.html#collections.defaultdict](http://docs.python.org/library/collections.html#collections.defaultdict)

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-10-20T20:05:54.597

转换：

```
if key in my_dict:
  my_dict[key] += num
else:
  my_dict[key] = num 
```

进入以下使用[`setdefault`](http://docs.python.org/library/stdtypes.html#dict.setdefault)：

```
my_dict[key] = my_dict.setdefault(key, 0) + num 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-07-14T18:38:30.103

还有一点不同的`setdefault`方式：

```
my_dict.setdefault(key, 0)
my_dict[key] += num 
```

如果与其他逻辑相结合，可能会有一些优势。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-04-17T22:43:43.493

`.get`或`.setdefault`可以使用任何一种：

`.get()`如果没有有效的键，则给出函数中传递的默认值

```
my_dict[key] = my_dict.get(key, 0) + num 
```

`.setdefault ()`创建一个传递默认值的键

```
my_dict[key] = my_dict.setdefault(key, 0) + num 
```

# ajax - 自动完成仅适用于第一个输入字段

> ID：12992170
> 
> 赞同：-2
> 
> 时间：2012-10-20T20:00:36.470
> 
> 标签：ajax, autocomplete

我正在尝试使用 id="train" 对任何 div 进行自动完成，但是，它似乎只在第一个输入字段上使用“train”类

javascript代码：

```
<script type="text/javascript">
$(document).ready(function() {
    $(".train").each(function() {
        $(".train").keyup(function() {
        $("#suggest_q").html("");
            var train = $(".train").val();  
            train = $.trim(train);
            if(train)
            {
                $.ajax({

                    url: "train_ajax_query.php",
                    data: "train="+train,
                    success: function(msg) {
                        $("#suggest_q").html(msg);
                        $("#suggest_q ul li").mouseover(function() {
                            $("#suggest_q ul li").removeClass("hover");
                            $(this).addClass("hover");
                        })
                        $("#suggest_q ul li").click(function() {
                            var value   =   $(this).html();
                            $("#train").val(value);
                            $("#suggest_q ul li").remove();
                        });

                    }
                });
            }
        });
    });

});

</script> 
```

HTML 代码：

```
 <form id="train_create_form" name="train" action="submit_train.php" method="POST">

    <input type="text" id="train" class="train" size="20" name="train[]" placeholder="Train 1" />
        <div id="suggest_q">

        </div>
    <input type="text" id="train" size="20" class="train" name="train[]" placeholder="Train 2" />
        <div id="suggest_q">

        </div>

  <input id= "submit_train" type="submit" name="submit_train" value="Submit All trains">
        </form> 
```

我找到[了这篇旧帖子](https://stackoverflow.com/questions/7249818/jquery-autocomplete-is-only-working-for-the-first-input)，但我不确定如何解决我的问题:(

添加更多输入字段代码：

```
<script type="text/javascript">
 $(function() {
        var scntDiv = $('#p_scents');
        var i = $('#p_scents p').size() + 0;

        $('#addScnt').live('click', function() {
                $('<p><input type="text" id="train" name="train[]" class="train" placeholder="Train ' + i +'" /><div id="suggest_q"></div><a href="#" id="remScnt">Remove train</a></p>').appendTo(scntDiv);
                i++;
                return false;
        });

        $('#remScnt').live('click', function() {
                if( i > 2 ) {
                        $(this).parents('p').remove();
                        i--;
                }
                return false;
        });
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T20:08:08.433

因为这里：

```
 $(".train").each(function() {
        $(".train").keyup(function() { 
```

你每次只得到第一个字段:) 尝试：

```
 $(".train").each(function(index, element) {
        element.keyup(function() {
            // or even: $(element).keyup(function() { 
```

参考： [每个](http://api.jquery.com/each/) [KeyUp](http://api.jquery.com/keyup/) [Val](http://api.jquery.com/val/)

我复制粘贴整个示例：

```
<script type="text/javascript">
$(document).ready(function() {
    $(".train").each(function(index, element) {
        $(element).keyup(function() {
        $("#suggest_q").html("");
            var train = $(element).val();   
            train = $.trim(train);
            if(train)
            {
                $.ajax({

                    url: "train_ajax_query.php",
                    data: "train="+train,
                    success: function(msg) {
                        $("#suggest_q").html(msg);
                        $("#suggest_q ul li").mouseover(function() {
                            $("#suggest_q ul li").removeClass("hover");
                            $(this).addClass("hover");
                        })
                        $("#suggest_q ul li").click(function() {
                            var value   =   $(this).html();
                            $(element).val(value);
                            $("#suggest_q ul li").remove();
                        });

                    }
                });
            }
        });
    });

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T20:09:42.473

每次键入`$(".train")`时，都会再次搜索所有元素。

一旦你完成了你的初始`$(".train").each(function() {`行，你可以使用 $(this) 来引用元素，并且该函数将在每个元素上被调用。

当你使用时，`var train = $(".train").val();`你得到的只是第一个元素的值。有关原因的更多详细信息，请参阅[http://api.jquery.com/val/](http://api.jquery.com/val/)。

如果您删除该行并仅使用`$(this)`而不是 '''train''' 这应该会更好，但您还需要摆脱 .keyup() 周围的 .each()，因为它`$(".train").keyup`已经适用于所有匹配元素。

您基本上是在说“遍历并找到所有火车元素。对于每个元素，请遍历并在所有火车元素上设置 keyup 值。将其设置为对第一个火车元素强制执行自动完成的功能”。您想说“在每个火车元素上设置 keyup 回调以对其自身强制执行自动完成”

# javascript - Chrome 中的错误行为“onselectstart”

> ID：12992172
> 
> 赞同：3
> 
> 时间：2012-10-20T20:00:50.140
> 
> 标签：javascript, html

有一个必须用“移动”光标移动的可拖动元素。当我移动元素时，光标将变得像选择一样。我尝试`.onselectstart = function(e) { return false }`在“mousedown”和`.onselectstart = null`“mouseup”上使用。它运作良好。但它在页面上的任何选择后停止工作。我只在 Google Chrome 和 Maxthon 中观察到它。

所以，看看[http://jsfiddle.net/JqMgE/1/](http://jsfiddle.net/JqMgE/1/)

有时需要选择几次才能调用此错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T20:42:10.090

`event.preventDefault()` `onmousedown`我通过使用and解决了这个问题`onmousemove`。

[http://jsfiddle.net/JqMgE/2](http://jsfiddle.net/JqMgE/2)

没有必要使用`.onselectstart`.

# html - 找出选择了哪个按钮并使用移动 jquery 发布它

> ID：12992180
> 
> 赞同：2
> 
> 时间：2012-10-20T20:01:46.580
> 
> 标签：html, jquery-mobile

我对 jQuery/JS 不太熟悉，我的 Google foo 让我失望了。

我试图找出`li`选择了哪些，以便可以将其发布到新页面。这可能不是很复杂，也许我只是在寻找所有错误的地方。

```
 <div data-role="page" id="page1">
    <div data-theme="a" data-role="header">
        <h3>
            Adgangskontrol
        </h3>
        <form action="">
            <ul data-role="listview" data-divider-theme="b" data-inset="true">
                <li data-role="list-divider" role="heading">
                    Medarbejder
                </li>
                <li data-theme="">
                    <a href="#page1" data-transition="slide">
                        DH
                    </a>
                </li>
                <li data-theme="">
                    <a href="#page1" data-transition="slide">
                        MLP
                    </a>
                </li>
            </ul>
            </div>  
            </div>

        </form>
        <input data-icon="arrow-r" data-iconpos="right" value="Send oplysninger" type="submit" />
    </div>
    <div data-role="content">
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T21:34:23.260

因此，您似乎需要在每个 LI 标记中添加单选按钮。

```
<ul>
  <li>
    <input type="radio" name="myRadioGroup" value="radio one is checked" />
    <input type="text" name="firstName" />
  </li>
  <li>
    <input type="radio" name="myRadioGroup" value="radio two is checked" />
    <input type="text" name="lastName" />
  </li> 
</ul> 
```

然后，服务器端，设置 case 或 if/else 语句

```
if(myRadioGroup=="radio one is checked")
{
  // process firstName input
}
else if(myRadioGroup=="radio two is checked")
{
 // process lastName input
} 
```

也许您只希望用户填写的最后一个 INPUT 用于服务器端。如果是这样，您可以使用 JavaScript 来动态选择与 INPUT 关联的无线电......但是您最好使用单个隐藏的 INPUT 来存储“无线电已检查”（或其他任何内容）。

哦，另一件事是你可以在页面上有多个表单，在每个 LI 中，唯一的问题是它们每个都必须有自己的提交按钮。

希望我给了你一些东西可以继续。有很多方法可以实现相同的目标。

# css - CSS过渡在悬停时淡入淡出

> ID：12992183
> 
> 赞同：25
> 
> 时间：2012-10-20T20:02:13.893
> 
> 标签：css, hover, css-transitions

我遇到了`CSS`过渡问题。我正在`CSS`为我的作品集设计一个画廊，我需要我的图像在悬停时淡入。我已经玩了一个多小时了，我希望有人能指出我正确的方向。

这是[JSFiddle的简化版本](http://jsfiddle.net/kwh71787/HwPkN/)

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2013-05-02T19:13:22.493

我建议您为图片库使用无序列表。

您应该使用我的代码，除非您希望图像在悬停后立即获得 50% 的不透明度。你会有一个更顺畅的过渡。

```
#photos li {
    opacity: .5;
    transition: opacity .5s ease-out;
    -moz-transition: opacity .5s ease-out;
    -webkit-transition: opacity .5s ease-out;
    -o-transition: opacity .5s ease-out;
}

#photos li:hover {
    opacity: 1;
} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-10-20T20:06:19.027

这会成功的

```
.gallery-item
{
  opacity:1;
}

.gallery-item:hover
{
  opacity:0;
  transition: opacity .2s ease-out;
  -moz-transition: opacity .2s ease-out;
  -webkit-transition: opacity .2s ease-out;
  -o-transition: opacity .2s ease-out;
} 
```

# javascript - 使用 jQuery 验证增量或重复输入

> ID：12992184
> 
> 赞同：-1
> 
> 时间：2012-10-20T20:02:17.173
> 
> 标签：javascript, jquery, validation

我需要使用 jQuery 编写一个验证函数来验证电话号码是否针对增量（例如 12345 或 56789）或重复（例如 11111 或 22222）输入，但我不知道如何做到这一点。谁能给我一个关于如何做到这一点的想法？

事先谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T20:45:31.927

您可以尝试验证重复（即 55555）或增量（即 123456）数字

```
function validateNum(input){
    var value=input.val(), len=value.length, first=value[0], r=true;
    if(!len || isNaN(value) || value==0) return false;
    for( var i=1; i<len; i++ )
    {
        if(value[i]!=first) { r=false; break; }
        //else continue;
    }
    if(r) return true;
    r=true;       
    for( var i=1; i<len; i++ )
    {
        if(value[i]!=(parseInt(first)+i)) { r=false; break; }
        //else continue;
    }
    if(r) return true;
    return false;
}; 
```

[**演示**](http://jsfiddle.net/jdSu8/5/)。

# django - 如何处理 Django 验证错误

> ID：12992185
> 
> 赞同：2
> 
> 时间：2012-10-20T20:02:30.717
> 
> 标签：django, forms, validation

我在理解 Django 表单和验证时遇到了一些麻烦。

```
#views.py:
def create(request):
    if request.method == 'POST':
        form = CreateDocumentForm(request.POST)
        if form.is_valid():
            doc = Document.objects.create(name=form.cleaned_data['name'])
    #snip

#forms.py:
    class CreateDocumentForm(forms.ModelForm):
    name = forms.CharField()
    def clean_name(self):
        cleaned_name = self.cleaned_data['name']
        rgx = re.compile('^(\w|-|\.)+$')
        if rgx.match(cleaned_name) == None:
            raise ValidationError("invalidchars")
        return cleaned_name 
```

逻辑工作正常，但我不知道如何判断引发了哪种 VaidationError。另外 - 这是由 Ajax 请求处理的，所以我不会在响应中使用模板。我需要获取此视图中失败的状态。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T20:15:46.703

您通常不会看到 ValidationErrors 本身。如果你调用form.is_valid，那么验证过程中出现的错误都会被收集起来，并作为字典form.errors返回给你

您可以检查该字典以查找与任何特定字段相关的错误。任何有错误的字段的结果应该是为该字段引发的任何 ValidationErrors 的字符串值。

那么，在您看来，如果 form.is_valid() 返回 False，那么您可以这样做：

```
if 'name' in form.errors:
    for err_message in form.errors['name']:
        # do something with the error string 
```

# php - “定义”（内置函数的名称）可以用作方法名称吗？

> ID：12992191
> 
> 赞同：0
> 
> 时间：2012-10-20T20:03:32.953
> 
> 标签：php, methods, constants

我可以在我的类中使用它作为方法名称吗？

它似乎是一个函数：[http](http://www.php.net/manual/en/ref.misc.php) ://www.php.net/manual/en/ref.misc.php 但我看到那里也列出了一些语言结构，比如`die`and `exit`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T20:24:05.087

**当你可以......你可以，当你不能......你会知道:)**

请在此处查看保留字列表[http://php.net/manual/en/reserved.php](http://php.net/manual/en/reserved.php)并避免使用它们。当您尝试非法命名您的方法时，任何好的 PHP IDE 都会警告您。

**还有一个问题。**如果你忘记了**$this->Method()**而你只是在你的类中使用**Method()**，它会像定义为一个函数一样工作。这将导致异常和难以找到错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T20:12:58.993

```
<?php

class Test {
  function defined() {
    return "Yes you can";
  }
}

$x = new Test();
echo $x->defined(); 
```

是的你可以。不，你不应该。使用与内置函数相同的名称绝不是一个好主意。这个词`defined`在 PHP 中有一个既定的含义，没有人应该更努力地弄清楚你的班级是如何在某些特定的上下文中使用（或滥用）这个词的。

# eclipse - m2e 和项目元数据文件

> ID：12992194
> 
> 赞同：2
> 
> 时间：2012-10-20T20:03:47.680
> 
> 标签：eclipse, maven, version-control, m2e

我习惯于其他 IDE，例如 Visual Studio，它们将项目结构保留在某些元数据文件上。我现在正在使用 Eclipse，我使用 m2e eclipse 来导入一个 maven 项目。afaik Eclipse 仅从 pom.xml （或 maven 默认目录，如果未指定）获取源/资源文件并创建项目树。

因此，我认为，如果我在存储库中有代码和 Eclipse 配置文件（.project、.classpath）并且我更新了代码目录结构，则不会更新任何 Eclipse 文件，因此我不需要更新 Eclipse 文件存储库。

那是对的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T21:15:51.507

正确，您不需要将 .project 和 ,class 路径文件保存在存储库中。一旦您从存储库中检索了其余的源代码，m2e 命令“更新项目配置”和“更新项目依赖项”将分别更正这些文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T22:41:32.307

通常，如果您使用 m2e（最新版本）和 SCM（Git、Svn、CVS 等），则不需要将 Eclipse 配置文件提交到存储库。
这些主要文件是：

*   `.project`
*   `.classpath`
*   `.settings/`

[在 GitHub 上](https://github.com/github/gitignore/blob/master/Global/Eclipse.gitignore)有一个很好的`.gitignore`文件示例，它显示了 Eclipse 中哪些文件不需要提交。

**编辑 ：**

要重新生成 Eclipse 项目文件，您可以：

1.  导入 > 现有 Maven 项目：创建所需的 eclipse 文件

2.  Import > Checkout Projects from SVN (or CVS, GIT, etc.) ..... 如果需要：转换为 Maven 项目

3.  将 CLI maven-eclipse-plugin 与`mvn eclipse:eclipse`( [Goal](http://maven.apache.org/plugins/maven-eclipse-plugin/eclipse-mojo.html) ) 一起使用（如果使用 m2e，则不推荐）

# asp.net - 将一个 div 定位在另一个 div 中？

> ID：12992196
> 
> 赞同：1
> 
> 时间：2012-10-20T20:04:10.650
> 
> 标签：asp.net, .net, html, css, xhtml

在一个大 div 中，我有一个搜索框，它基本上是一个具有文本框玻璃图像和按钮的 div。要求是将此搜索向导垂直放置在 div 的中间和右侧。这个盒子出现在 div 的左上角。我尝试了不同的东西，但不知道如何设置它。请指导我。

谢谢

```
<div class="Right">
        <div class="header-search" style="position: relative; top: auto; bottom: auto; right: 0 left:100%;
            margin: auto 0 auto auto;">
            <input type="text" class="searchbox" />
            <input type="button" class="searchbutton" value="›" />
        </div>
    </div>

div.Container div.Right 
{
        width:50%;
        float:right ;
        border: 01px dashed green;
        height:95px !important;
        padding:auto 0 auto 200px;
}   

div.header-search
{
    overflow:auto;
    display:inline;
    text-align:right !important;
    border:3px dashed blue;    
    padding:20px 0 auto 50px;

}

div.header-search input.searchbox 
{
    border-bottom-left-radius:5px;
    -webkit-border-bottom-left-radius:5px; 
    -moz-border-bottom-left-radius:5px;

    border-top-left-radius:5px;  
    -webkit-top-left-radius:5px; 
    -moz-left-radius:5px;

     border:2px solid #316200;
     background-color:white;
     height:16px;
     padding:4px;
     padding-left:28px;
     padding-right:10px;
     color:#4a4a4a;
     float:left;
     background:white url(../images/SearchImage.png) 0 50%  no-repeat;

 }

div.header-search input.searchbutton
{

  border-bottom-right-radius:5px;
  -webkit-border-bottom-right-radius:5px; 
  -moz-border-bottom-right-radius:5px;

   border-top-right-radius:5px;  
   -webkit-top-right-radius:5px; 
   -moz-right-radius:5px;

   background:#458A00;
   filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#A5D376', endColorstr='#326400'); /* for IE */
   background: -webkit-gradient(linear, left top, left bottom, from(#A5D376), to(#326400)); /* for webkit browsers */
   background: -moz-linear-gradient(top,  #A5D376,  #326400); /* for firefox 3.6+ */  
  width:50px; 
  height:28px;
  color:White;
  font-size:16px;
  font-weight:bold ;
  border:2px solid #316200;
  border-left:none;

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T20:06:39.277

了解如何定位元素的第一步是阅读这样的文章：

[CSS-Tricks.com - 相对定位中的绝对定位](http://css-tricks.com/absolute-positioning-inside-relative-positioning/)

你用`position: relative`错了`div`，因为它应该被分配给`.Right`- 而`header-search`应该有'位置：绝对;' `left/right`和值`top/bottom`

上面的文章比我做的更好！

也许这是一个很好的起点：

```
<div class="Right">
        <div class="header-search">
            <input type="text" class="searchbox" />
            <input type="button" class="searchbutton" value="›" />
        </div>
    </div>

div.Container div.Right {
        position: relative;
        width: 50%;
        float: right;
        border: 1px dashed green;
        height: 95px !important;
        padding: auto 0 auto 200px;
}   

div.header-search {
    position: absolute;
    right: 0;
    top: 0;
    overflow: auto;
    display: inline;
    text-align: right !important;
    border: 3px dashed blue;    
    padding: 20px 0 auto 50px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T20:24:07.013

从您的 div 中删除所有样式，因为这是不好的做法。接下来，将您的两种样式转换为 .Right 和 .header-search ，如下所示：

```
div.Right {
    border: 1px dashed green;
    height:95px;
    position: relative;
}   

div.header-search {
    border:1px dashed blue;
    position: absolute;
    top: 30px;
    right: 0;
} 
```

这应该完成您正在尝试的内容。没有一种干净、简单的垂直居中方法，但是由于外部 .Right div 具有固定高度，搜索元素具有固定高度，因此最好只使用内部 .header 上的固定顶部位置-搜索。

你可以在这个 jsfiddle 上看到它的实际效果：

[http://jsfiddle.net/L4sgc/](http://jsfiddle.net/L4sgc/)

# windows - 在循环中使用 GetWindow 的替代方法是什么？

> ID：12992201
> 
> 赞同：0
> 
> 时间：2012-10-20T20:05:08.807
> 
> 标签：windows, winapi, z-order

MSDN 提到该[`GetWindow()`](http://msdn.microsoft.com/en-us/library/ms633515%28v=vs.85%29.aspx)功能的以下备注。

> 该[`EnumChildWindows`](http://msdn.microsoft.com/en-us/library/ms633494%28v=vs.85%29.aspx)函数比`GetWindow` 循环调用更可靠。调用`GetWindow`以执行此任务的应用程序有可能陷入无限循环或引用已销毁窗口的句柄。

当只对列出所有窗口感兴趣时，使用`EnumChildWindows`效果很好。但是，如果您需要`GetWindow`提供的附加 z 顺序功能怎么办？我找不到使用 z-order 排序的所有窗口`EnumChildWindows`。

这是否意味着没有“安全”的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T20:11:56.390

如果您需要 Z 顺序，我会使用 GetWindow()，但要注意注意事项。

如果您不止一次看到一个窗口，请停下来。当随后通过其句柄引用返回的窗口时，请为失败做好准备。

# c# - Linux/Mono 抛出 ArgumentOutOfRangeException 而 Windows 没有

> ID：12992204
> 
> 赞同：0
> 
> 时间：2012-10-20T20:05:45.597
> 
> 标签：c#, mono

尝试将 TcpClient 缓冲区中的数据读取到字节数组中：

```
private byte[] excessData;
public bool receiveMessage(ref string recvStr, string daddy = "")
{
    recvStr = "";
    CSocket_PacketProtocol packprot = new CSocket_PacketProtocol(0, this);

    WriteDebugWithTimestamp("receiveMessage obtaining client NetworkStream - daddy = " + daddy);
    NetworkStream nStream = client.GetStream();
    WriteDebugWithTimestamp("receiveMessage client NetworkStream obtained, entering receive loop");

    int bytesRead = 0;
    do
    {
        if (!packprot.done)
        {
            try
            {
                byte[] inStream = new byte[10025]; //We'll read into this stream

                int buffSize = client.ReceiveBufferSize;
                WriteDebugWithTimestamp(String.Format("Starting nStream.Read"));
                WriteDebugWithTimestamp(String.Format(String.Format("buffSize={0} -- inStream.Length={1}", buffSize, inStream.Length)));

                bytesRead = nStream.Read(inStream, 0, buffSize); //Recieve data from stream to inStream, return amount of bytes read

                WriteDebugWithTimestamp(String.Format("receiveMessage bytesread: {0}", bytesRead.ToString()));
                WriteDebugWithTimestamp(String.Format("receiveMessage client.Connected: {0}", client.Connected.ToString()));

                ../Cut 
```

客户端是一个`System.Net.Sockets.TcpClient`. 异常发生在`nStream.Read`。

由 Debian-6.0_64 / Mono 2.11.2 运行时的输出为`Mono --runtime=v4.0.30319 Program.exe`：

```
receiveMessage obtaining client NetworkStream - daddy = 
receiveMessage client NetworkStream obtained, entering receive loop
receiveMessage this.excessData == null: True -- excessdata.length=n/a
Starting nStream.Read
buffSize=87380 -- inStream.Length=10025

System.ArgumentOutOfRangeException: Argument is out of range.
Parameter name: offset+size exceeds the size of buffer
  at System.Net.Sockets.NetworkStream.Read (System.Byte[] buffer, Int32 offset, Int32 size) [0x00000] in <filename unknown>:0 
  at SocketOperations.CSocketOperations.receiveMessage (System.String& recvStr, System.String daddy) [0x00000] in <filename unknown>:0 
  at SocketServerV3_Demo.CDownloadServer_ClientHandle..ctor (System.Net.Sockets.TcpClient client) [0x00000] in <filename unknown>:0 
  at SocketServerV3_Demo.Program.handleNewConnection (System.Net.Sockets.TcpClient client) [0x00000] in <filename unknown>:0 
```

buffSize 比字节数组长度大得多，但是当我在 Windows 上运行完全相同的程序时不会发生该异常（没有单声道，没有尝试过）。是什么赋予了？我该如何解决这个问题？是像增加缓冲区大小一样简单，还是有其他事情发生？我问的原因（而不仅仅是尝试）是因为我不知道发生了什么，我想确保我正确地完成它。

我想找出这种行为背后的原因，因为看到这样我希望它也会在 Windows 上崩溃。除非缓冲区的大小由操作系统确定，并且在 Windows 上它更小/等于字节数组大小..有人可以解释吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-20T20:57:39.680

看起来 Mono`TcpClient.ReceiveBufferSize`比 Windows 上的要大。

根据[MSDN Docs](http://msdn.microsoft.com/en-us/library/system.net.sockets.tcpclient.receivebuffersize.aspx)，默认值为 8192 字节。

我刚刚检查了 Mono 的实现，它正在调用`GetSocketOption()`底层套接字，所以它使用的是操作系统的默认值。

你有三个选择：

1.  使用 更改套接字的接收缓冲区大小`client.ReceiveBufferSize = new_size`。
2.  分配足够大的缓冲区。
3.  不要读取超过缓冲区可以容纳的数据：

    ```
    var max_size = Math.Min (client.ReceiveBufferSize, buffer.Length);
    bytesRead = nStream.Read(inStream, 0, max_size); 
    ```

# jquery - iframe 加载的脚本未发布

> ID：12992209
> 
> 赞同：0
> 
> 时间：2012-10-20T20:06:11.790
> 
> 标签：jquery, iframe, memory-leaks, internet-explorer-9

这是一个 IE9 Intranet jQuery 应用程序。iframe 是动态创建的，其 src 指向加载约 5 meg js 的其他 Intranet 应用程序（尽管是跨域）。iframe 是带有“关闭”按钮的“窗口”类型容器的子项。“主机”应用程序和 iframe 应用程序之间没有交互。当 iframe 从 DOM 中移除时，似乎没有一个 js 被释放。每次加载都会使内存增加大致相同的数量。我无法访问其他应用程序。

```
<html>
<head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script>
var i = 0;

function App2() {
    if ( $('#container' + i)[0] == undefined ) {
        i++;
        $('<div id="container' + i + '">').appendTo('body');
        $('<iframe id="if' + i + '" src="http://dev.sencha.com/deploy/ext-3.3.1/examples/desktop/desktop.html">').appendTo('#container' + i);
        $('<input id="clb' + i + '" type="button" value="Close"/>').appendTo('#container' + i);
        $('#clb'+ i).click(function(){$('#container' + i).remove();});
    }
}
</script>
</head>
<body>
<input type="button" onclick="App2();" value="App2"/>
</body>
</html> 
```

# xslt - 查找参数等于变量 XSL 的子项

> ID：12992211
> 
> 赞同：0
> 
> 时间：2012-10-20T20:06:22.180
> 
> 标签：xslt

我需要得到这个：

```
<a href="departments/CHEM.html">Chemistry and Chemical Biology</a> 
```

我尝试使用此代码：

```
<a href="departments/{department/@code}.html"> 
```

但结果我得到`<a href="departments/.html">Chemistry and Chemical Biology</a>`

这是我的xml

```
<fas_courses>
   <course acad_year="2012" cat_num="5085" offered="Y">
      <term term_pattern_code="1" fall_term="Y" spring_term="N">fall term</term>
      <department code="CHEM">
         <dept_long_name>Department of Chemistry and Chemical Biology</dept_long_name>
         <dept_short_name>Chemistry and Chemical Biology</dept_short_name>
      </department>
      <course_group code="CHEM">Chemistry</course_group> 
```

我该如何解决？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T20:12:38.877

我认为您需要使用部门的完整路径：

```
<a href="departments/{fas_courses/course/department/@code}.html"> 
```

如果有多个节点，则需要使用索引来获取特定节点或循环获取每个单独的节点。

# ruby-on-rails - json 对象中的 rabl 包装集合

> ID：12992217
> 
> 赞同：0
> 
> 时间：2012-10-20T20:07:18.077
> 
> 标签：ruby-on-rails, json, rabl

我正在使用 RABL 生成 JSON 响应。我无法实现以下结构：

```
{
  "articles": [
     {
        "created_at": "2012-10-20T15:57:31Z",
        "description": "MK DEsc",
        "id": 1,
        "title": "MK Title",
        "updated_at": "2012-10-20T15:58:14Z",
         media:[{
            id : 1,
            title : "title"
        }]
     },
     {
        "created_at": "2012-10-20T16:38:24Z",
        "description": "fdsfdffffffff",
        "id": 2,
        "title": "asdads",
        "updated_at": "2012-10-20T16:38:24Z",
         media:[{
            id : 1,
            title : "title"
        }]
     }
   ]
} 
```

我有一个包含**媒体**数组的**@artices对象。**我有 rabl 配置设置，例如：

 **```
 config.include_json_root = false
   config.include_child_root = false 
```

到目前为止，我的 .rabl 模板如下所示：

```
object false
node :articles do
  @articles.each do |article|
  end
end 
```

我无法在此结构中添加媒体信息。

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T20:12:32.820

我已经设法这样做了：

```
collection @articles, :root => "articles", :object_root => false
attributes *Article.column_names

child(:media) do
  attributes *Medium.column_names
end 
```**

# ios - 通过 NSDate 将 nsarray 拆分为多个部分

> ID：12992221
> 
> 赞同：1
> 
> 时间：2012-10-20T20:07:32.320
> 
> 标签：ios, uitableview, nsdate

我有一个`NSArray`从核心数据中提取的。数组中的实体有一个`date`属性（当然是类型`NSDate`）。我想做的是：

*   数组需要显示在表格视图中，
*   数组中对象的部分及其标题是months

例如，如果我有 3 个对象（4 月 1 日、4 月 3 日和 7 月 7 日），则应该有 2 个部分：- 2012 年 4 月（2 个 obj）- 2012 年 7 月（1 个 obj））。

如何像这样拆分数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T20:33:11.583

尝试使用 a`NSFetchedResultsController`和 custom `sectionNameKeyPath`，它应该是您的`NSManagedObject`子类中的一个方法。

fetchedResultsController 可以设置如下：

```
NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:@"MyObject"];
NSSortDescriptor *sortDescriptor = [NSSortDescriptor sortDescriptorWithKey:@"date" ascending:YES];
request.sortDescriptors = @[sortDescriptor];
NSFetchedResultsController *frc = [[NSFetchedResultsController alloc] initWithFetchRequest:request managedObjectContext:managedObjectContext sectionNameKeyPath:@"monthAsString" cacheName:nil]; 
```

您需要`monthAsString`在 managedObject 子类中实现该方法。只分配一次 NSDateFormatter，因为如果为每次调用分配一个新实例，它的性能将不会很好。

```
 - (NSString *)monthAsString {
    static NSDateFormatter *formatter;
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        formatter = [[NSDateFormatter alloc] init];
        formatter.dateFormat = @"MMMM yyyy";
    });

    NSString *dateString = [formatter stringFromDate:self.date];
    return dateString;
 } 
```

# swing - 如何启用/禁用 IDEA 向导上的完成按钮？

> ID：12992222
> 
> 赞同：0
> 
> 时间：2012-10-20T20:07:55.643
> 
> 标签：swing, intellij-idea

我注意到来自 Intellij IDEA Open API`getFinishButton()`的类中的方法已被弃用。`com.intellij.ide.wizard.AbstractWizard`但是对该方法没有评论，我找不到任何文档。我需要做的只是启用/禁用按钮。因此，执行此操作的任何方法（即使不直接访问对象）都可以。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T23:06:03.170

**完成**按钮仅在向导的最后一步可用，因此您应该`getNextButton()`在最后一步使用此按钮。

进行了[重构以删除单独的“完成”按钮](https://github.com/JetBrains/intellij-community/commit/8eaff5cd05faf005879ffa5d6b0d39cd5a784ddc)，现在**“下一步”**按钮在最后一步[变为“](https://github.com/JetBrains/intellij-community/blob/master/platform/platform-api/src/com/intellij/ide/wizard/AbstractWizard.java#L457) **完成”按钮。**

`getFinishButton()`不能使用，因为它只是一个存根：

```
 protected JButton getFinishButton() {
    return new JButton();
  } 
```

要禁用**Finish**按钮，请覆盖该`canGoNext()`方法并`false`在需要时返回（或`canFinish()`改为覆盖）。

# android - Android - 修复使用逗号而不是小数的欧洲货币输入

> ID：12992225
> 
> 赞同：1
> 
> 时间：2012-10-20T20:08:10.650
> 
> 标签：android, decimal, currency, comma, euro

首先，我知道双打并不是最好的货币，但在这种情况下，精度并不是非常重要。因此，我在 Play 商店中有一个实时应用程序，我发现欧元货币存在问题。出于某种原因，如果使用欧元本地化（无法使用 ADB 本地化重现），用户可以在 numberDecimal EditText 中输入逗号来分隔美元和美分。因此，当您期望从北美的用户那里获得“1000.00”时，您可能会从挪威的某个用户那里获得“1000,00”。

话虽这么说，numberDecimal 这样本地化并允许逗号是典型的吗？如果是这样，你知道它是否限制用户只插入最后一个逗号？我正在使用以下代码来解决此问题，如您所见，它依赖于它们只是一个逗号来替换：

```
 // Required to handle European use of commas instead of decimals places
    // in their currency.
    edittext_amount.addTextChangedListener(new TextWatcher() {
        public void afterTextChanged(Editable edittext_amount) {
            String amount = "";
            if (edittext_amount != null) {
                try {
                    amount = edittext_amount.toString().replace(",", ".");
                    double_edittext_amount = Double.parseDouble(amount);
                }
                catch (NumberFormatException e) {
                    // Error
                }
            }

        } 
```

如前所述，上述代码是为了防止逗号产生错误，我收到的错误如下：

```
java.lang.NumberFormatException: Invalid double: "1000,00"
at java.lang.StringToReal.invalidReal(StringToReal.java:63)
at java.lang.StringToReal.parseDouble(StringToReal.java:269)
at java.lang.Double.parseDouble(Double.java:295)
at java.lang.Double.valueOf(Double.java:332)
at com.ootpapps.saving.made.simple.SavingsPlanEditor.validateSavingsPlan(SavingsPlanEditor.java:233)
at com.ootpapps.saving.made.simple.SavingsPlanEditor.access$1(SavingsPlanEditor.java:217)
at com.ootpapps.saving.made.simple.SavingsPlanEditor$2.onClick(SavingsPlanEditor.java:109)
at android.view.View.performClick(View.java:3644)
at android.view.View$PerformClick.run(View.java:14313)
at android.os.Handler.handleCallback(Handler.java:605)
at android.os.Handler.dispatchMessage(Handler.java:92)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4517)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:993)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:760)
at dalvik.system.NativeStart.main(Native Method) 
```

感谢您的洞察力，我希望一劳永逸地解决这个问题！

编辑 - 将代码更改为使用 NumberFormat，如下所示：

```
// Required to handle European use of commas instead of decimals places
    // in their currency.
    edittext_amount.addTextChangedListener(new TextWatcher() {
        public void afterTextChanged(Editable edittext_amount) {
            String amount = "";
            if (edittext_amount != null) {
                try {
                    amount = edittext_amount.toString();

                    NumberFormat number_format = NumberFormat.getNumberInstance();
                    double_edittext_amount = number_format.parse(amount).doubleValue();

                }
                catch (NumberFormatException e) {
                    // Error
                }
                catch (ParseException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T22:00:19.893

这是做你正在做的事情的另一种方法；

```
String amount = null;
String fist = null;
String second = null;
if (edittext != null){
    amount = edittext.to string();
    if (amount.contains(","){
        StringTokenizer tokens = new StringTokenizer(CurrentString, ",");
         first = tokens.nextToken();// this will contain the whole number
         second = tokens.nextToken();//this will contain the decimal part
    } else if (amount.contains("."){
        StringTokenizer tokens = new StringTokenizer(CurrentString, ".");
        first = tokens.nextToken();// this will contain the whole number
        second = tokens.nextToken();//this will contain the decimal part
    }//That bit removed the decimal points, from the strings, now we just put them back together
String fullNumber = first + "." + second;
double_edittext_amount = Double.parseDouble(fullNumber); 
```

希望这可以帮助

# c++ - C++ 访问基类成员

> ID：12992227
> 
> 赞同：-1
> 
> 时间：2012-10-20T20:08:18.793
> 
> 标签：c++, inheritance

我试图澄清继承是如何为一件家庭作业工作的。

```
class AA
{
public:
  setAAA();
protected:
  int AAA;
};

class BB : public AA
{
public:
  setBBB();
private:
  int BBB;
}; 
```

BB 的 AA 继承是否导致 BB 具有以下成员列表？- AAA - BBB - setAAA() - setBBB()

如果它确实为什么我不能执行：

```
BB Frank;
Frank.setAAA(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T20:11:48.497

它确实是这个意思，并且确实有效。在此处运行代码以进行确认：

[http://liveworkspace.org/code/51fd6850ebfb5f86dc61c6dc074fe30a](http://liveworkspace.org/code/51fd6850ebfb5f86dc61c6dc074fe30a)

```
#include <iostream>

class AA
{
public:
  void setAAA() { std::cout << "Setting AAA" << std::endl; };
protected:
  int AAA;
};

class BB : public AA
{
public:
  void setBBB() {};
private:
  int BBB;
};

int main(int argc, char* argv[])
{
   BB b;
   b.setAAA();

   return 0;
} 
```

你的问题是你的方法没有返回类型:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-20T20:12:08.853

> 如果它确实为什么我不能执行：BB Frank；弗兰克.setAAA();

出色地。从定义返回类型开始`setAAA()`。例如，制作它`void`。

然后可以访问成员函数。

# asp.net-mvc - 使用 SimpleMembership 删除用户 mvc 4 时出错

> ID：12992228
> 
> 赞同：4
> 
> 时间：2012-10-20T20:08:21.820
> 
> 标签：asp.net-mvc, membership-provider

当我尝试`Membership.DeleteUser(string, bool)`使用`SimpleMembership`提供程序的 MVC 4 项目时，我收到以下错误消息：

> “DELETE 语句与 REFERENCE 约束“fk_UserId”冲突。冲突发生在数据库“Conductor_Basic3”、表“dbo.webpages_UsersInRoles”、列“UserId”中。语句已终止。”

约束已设置并且是正确的，因此我无法真正理解错误消息。我想我在这里错过了一些东西。

谁能向我解释这个错误？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-20T20:45:30.343

看起来表 pages_Roles 引用了您的用户，您应该从角色中排除用户，然后您可以删除用户，试试这个：

```
 Roles.RemoveUserFromRole("UserName","RoleName");
 Membership.DeleteUser("UserName"); 
```

或者您可以尝试使用另一种方法：在您的数据库中明确指定级联删除，如下所示：

![在此处输入图像描述](../Images/3cb4493da9dfcd44d9be1411beb2c6b9.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-13T07:00:10.780

你可以试试这个：

```
[Authorize(Roles = "Admin")]
[HttpPost]
public ActionResult DeleteUser(int id)
{
    var tmpuser = "";
    var ctx = new UsersContext();
    using (ctx)
    {
        var firstOrDefault   = ctx.UserProfiles.FirstOrDefault(us => us.UserId==id);
        if (firstOrDefault != null)
            tmpuser = firstOrDefault.UserName;
    }

    string[] allRoles = Roles.GetRolesForUser(tmpuser);
    Roles.RemoveUserFromRoles(tmpuser,allRoles);

    //Roles.RemoveUserFromRole(tmpuser, "RoleName");

    ((SimpleMembershipProvider)Membership.Provider).DeleteAccount(tmpuser);
    Membership.Provider.DeleteUser(tmpuser, true);
    Membership.DeleteUser(tmpuser, true);

    ctx = new UsersContext();

    return View(ctx.UserProfiles.OrderBy(user => user.UserName).ToList());
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-20T20:13:02.713

看起来外键约束不允许您从用户表中删除行，因为它们在 dbo.webpages_UsersInRoles 表中具有匹配的行。我对默认的 Membership Provider 架构不是很熟悉，但您必须确保删除 dbo.webpages_UsersInRoles 中的行以克服该错误。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-11-18T09:40:27.400

有同样的问题并通过扩展 @testCoder 的答案来解决它。

```
var rolesProvider = (SimpleRoleProvider)Roles.Provider;
var roles = rolesProvider.GetRolesForUser(username);
if (roles != null && roles.Length > 0)
{
    rolesProvider.RemoveUsersFromRoles(new[] { username }, roles);
}
Membership.DeleteUser(username, true); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-14T15:52:31.817

除了[testCoder](https://stackoverflow.com/users/1346297/testcoder)给出的内容之外，这里还有一些对我来说很好的实现......

```
Public Shared Sub DeleteUser(User As String)
    Dim UserRoles = Roles.GetRolesForUser(User)
    If UserRoles.Count > 0 Then Roles.RemoveUserFromRoles(User, UserRoles)
    DirectCast(Membership.Provider, WebMatrix.WebData.SimpleMembershipProvider).DeleteAccount(User)
    DirectCast(Membership.Provider, WebMatrix.WebData.SimpleMembershipProvider).DeleteUser(User, True)
End Sub 
```

# c# - 传递gridview名称进行打印

> ID：12992229
> 
> 赞同：0
> 
> 时间：2012-10-20T20:08:24.253
> 
> 标签：c#, asp.net, gridview

我有一个打印网格的工作功能。我有很多网格。在下面的代码中，gridname 是硬编码的（后面的代码）。

按下 asp.net 按钮时，我可以传入 gridview 名称作为参数吗？

然后我可以有一个打印功能来处理我所有的网格，这将是可扩展的和很棒的。

**标记：**

```
<input type="button" id="btnPrint" value="Print" onclick="PrintGridData()" /> 
```

**代码背后：**

```
protected void PrintCurrentPage(object sender, EventArgs e) // Print Current Page
        {

            try
            {

                StringWriter sw = new StringWriter();
                HtmlTextWriter hw = new HtmlTextWriter(sw);
                GridViewErrorReport.RenderControl(hw);
                string gridHTML = sw.ToString().Replace("\"", "'")
                    .Replace(System.Environment.NewLine, "");
                StringBuilder sb = new StringBuilder();
                sb.Append("<script type = 'text/javascript'>");
                sb.Append("window.onload = new function(){");
                sb.Append("var printWin = window.open('', '', 'left=0");
                sb.Append(",top=0,width=1000,height=600,status=0');");
                sb.Append("printWin.document.write(\"");
                sb.Append(gridHTML);
                sb.Append("\");");
                sb.Append("printWin.document.close();");
                sb.Append("printWin.focus();");
                sb.Append("printWin.print();");
                sb.Append("printWin.close();};");
                sb.Append("</script>");
                Page.ClientScript.RegisterStartupScript(this.GetType(), "GridPrint", sb.ToString());

            } 
```

**JavaScript：**

```
<script type="text/javascript">
    function PrintGridData() {
        var prtGrid = document.getElementById('<%=GridViewErrorReport.ClientID %>');
        prtGrid.border = 0;
        var prtwin = window.open('', 'PrintGridViewData', 'left=100,top=100,width=1000,height=1000,tollbar=0,scrollbars=1,status=0,resizable=1');
        prtwin.document.write(prtGrid.outerHTML);
        prtwin.document.close();
        prtwin.focus();
        prtwin.print();
        prtwin.close();
    }
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T20:27:37.407

是的，有可能，您可以将 id 传递给您的函数，并使用它从页面中检索您的网格控件..

假设“myGridId”被传递给函数......

您的代码现在应该如下所示

```
StringWriter sw = new StringWriter();
HtmlTextWriter hw = new HtmlTextWriter(sw);
GridViewErrorReport.RenderControl(hw);
string gridHTML = sw.ToString().Replace("\"", "'").Replace(System.Environment.NewLine, "");
StringBuilder sb = new StringBuilder();
sb.Append("<script type = 'text/javascript'>");
sb.Append("window.onload = new function(){");
sb.Append("var printWin = window.open('', '', 'left=0");
sb.Append(",top=0,width=1000,height=600,status=0');");
sb.Append("printWin.document.write(\"");
GridView gv = (GridView)this.FindControl("myGridId");
sb.Append(gv);
sb.Append("\");");
sb.Append("printWin.document.close();");
sb.Append("printWin.focus();");
sb.Append("printWin.print();");
sb.Append("printWin.close();};");
sb.Append("</script>");
Page.ClientScript.RegisterStartupScript(this.GetType(), "GridPrint", sb.ToString()); 
```

# php - 后端 Joomla 3.0 组件 JS 错误

> ID：12992232
> 
> 赞同：0
> 
> 时间：2012-10-20T20:08:49.900
> 
> 标签：php, javascript, joomla, joomla3.0

我正在开发一个 Joomla 3.0 组件。作为示例，我从 Joomla 文档中下载了 com_hello 组件。

我发生的错误是，当我检查视图列表中的复选框时，我收到一条错误消息`TypeError: b is null`。这个错误发生在 core.js 的某个地方。

通常在 2.5 中，如果我使用`JHtml::_('grid.id',$i,$item->id);`代码并`<input type="hidden" name="boxchecked" value="0" />`在表单中有字段，它工作正常。

我还查看了 Joomla 核心的一些组件，但没有发现丢失的内容或其他错误。

这是`default.php`我的观点的代码：

```
<?php

// NO DIRECT ACCESS TO THIS FILE
defined('_JEXEC') or die('Restricted access');

JHtml::_('behavior.tooltip');
?>
<form action="<?php echo JRoute::_('index.php?option=com_simplesuite'); ?>" method="post" name="adminForm">
    <table class="adminlist">
        <thead>
            <tr>
                <th>ID</th>
                <th><input type="checkbox" name="checkall-toggle" title="<?php echo JText::_('JGLOBAL_CHECK_ALL'); ?>" value="" onclick="Joomla.checkAll(this);" /></th>
                <th><?php echo JText::_('COM_SIMPLESUITE_TAGCLOUD_ADMINISTRATOR_LIST_NAME'); ?></th>
                <th><?php echo JText::_('COM_SIMPLESUITE_TAGCLOUD_ADMINISTRATOR_LIST_TAGS'); ?></th>
                <th><?php echo JText::_('COM_SIMPLESUITE_TAGCLOUD_ADMINISTRATOR_LIST_ACTIONS'); ?></th>
            </tr>
        </thead>
        <tbody>
            <?php foreach ($this->items as $i => $item) : ?>
            <tr class="row<?php echo $i%2; ?>">
                <td><?php echo $item->id; ?></td>
                <td><?php echo JHtml::_('grid.id',$i,$item->id); ?></td>
                <td><?php echo $item->name; ?></td>
                <td><?php echo ($item->tags) ? $item->tags : JText::_('COM_SIMPLESUITE_TAGCLOUD_ADMINISTRATOR_LIST_EMPTY'); ?></td>
                <td><a href="#">W</a><a href="#">X</a></td>
            </tr>
            <?php endforeach; ?>
        </tbody>
        <tfoot>
            <tr>
                <td colspan="4"><?php echo $this->pagination->getListFooter(); ?></td>
            </tr>
        </tfoot>
    </table>
    <div>
        <input type="hidden" name="task" value="" />
        <input type="hidden" name="boxchecked" value="0" />
        <?php echo JHtml::_('form.token'); ?>
    </div>
</form> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-24T21:30:14.703

对于您的`<form>`元素，请确保您`id="adminForm"`也有。有关更多信息，请参阅[http://docs.joomla.org/Potential_backward_compatibility_issues_in_Joomla_3.0_and_Joomla_Platform_12.1#JavaScript](http://docs.joomla.org/Potential_backward_compatibility_issues_in_Joomla_3.0_and_Joomla_Platform_12.1#JavaScript)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-14T07:57:45.160

尝试使用这个：

```
<?php echo JHtml::_('grid.checkall'); ?> 
```

而不是这个：

```
<input type="checkbox" name="checkall-toggle" title="<?php echo JText::_('JGLOBAL_CHECK_ALL'); ?>" value="" onclick="Joomla.checkAll(this);" /> 
```

这对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T00:33:53.053

尝试将此添加到脚本的顶部：

```
window.addEvent('domready', function () {
    if (typeof jQuery != 'undefined' && typeof MooTools != 'undefined') {

            Element.implement({
                slide:function (how, mode) {
                    return this;
                }
            });
        }
    }); 
```

这可能是开发团队正在解决的 mootols 冲突。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-13T02:45:09.663

将 id="adminForm" 添加到表单中。我花了一段时间才找到它，遇到了同样的问题。

具有 name="adminForm" 的表单现在也需要 id="adminForm"。

看：

[http://docs.joomla.org/Potential_backward_compatibility_issues_in_Joomla_3_and_Joomla_Platform_12.2#JavaScript](http://docs.joomla.org/Potential_backward_compatibility_issues_in_Joomla_3_and_Joomla_Platform_12.2#JavaScript)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-17T13:58:43.757

我添加了以下字段，它对我有用

```
<input type="hidden" name="boxchecked" value="" /> 
```

# ruby-on-rails - Rails 3中概念的关联或标记

> ID：12992236
> 
> 赞同：0
> 
> 时间：2012-10-20T20:09:12.197
> 
> 标签：ruby-on-rails, ruby-on-rails-3, associations, tagging, acts-as-taggable-on

我在为我的视频游戏开发网站时遇到了概念问题。
我有一个名为 VideoLink 的模型，其中包含标题、描述和指向网络视频的链接（例如 youtube）。
我有其他模型，例如用户、地图、任务等。
我希望我的用户能够说在此任务期间在这些地图上制作了视频，并且这些用户出现了。

我想知道我是否应该使用关联（使用 has_many 关系）或标记（使用acts_as_taggable_on 和 3 个属性 maps_list、users_list、mission）。
我发现这个关联有点沉重，因为它是一个标记的东西，而不是真正的关系。
但也许我错了，标记可能不是最好的选择。

您认为哪种解决方案与我的情况最相关？
如果您有其他解决方案或问题，请告诉我，我实际上是 ror 的菜鸟^^

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T03:04:16.940

如果使用关联，您可能会得到更多。如果您想做一些事情，比如轻松生成链接以查看有关视频链接资源的更多详细信息，那么关联绝对是要走的路。您可以在没有关联的情况下执行此操作，但老实说，从长远来看，如果您只是在模型中添加一些关联，那么麻烦会少得多。如果您也为所有模型建立了关联，您可能可以轻松地构建自己的标记解决方案，使其更针对您的问题域。我会特别推荐使用这个选项，特别是如果你是 ruby​​ on rails 的新手，因为 ActiveRecord 关联是 RoR 不可或缺的一部分，它可能是一个很好的学习体验。查看[为什么关联？](http://guides.rubyonrails.org/association_basics.html#why-associations)有关关联如何有用的更多详细信息，如果您还没有阅读，本指南的其余部分也是必读的。

如果您没有真正看到链接中的价值并且能够轻松地查询视频以获取相关资源，请使用acts_as_taggable_on。

# html - WebAPI 和 HTML5 SSE

> ID：12992242
> 
> 赞同：1
> 
> 时间：2012-10-20T20:09:47.803
> 
> 标签：html, asp.net-mvc-4, asp.net-web-api, server-sent-events

试图封装一个部分视图以显示我可以推回给客户的反馈。

本文[展示](http://techbrij.com/1029/real-time-chart-html5-push-sse-asp-net-web-api)了一种使用 HTML5 服务器发送事件 (SSE) 推回数据的方法。

我注意到，如果我打开几个浏览器选项卡然后关闭一个，我会遇到异常，因为逻辑没有从 ConcurrentQueue 中删除相应的流。我修改了代码如下

```
 private static void TimerCallback(object state)
    {
        StreamWriter data;
        Random randNum = new Random();
        //      foreach (var data in _streammessage)
        for (int x = 0; x < _streammessage.Count; x++)
        {
            _streammessage.TryDequeue(out data);
            data.WriteLine("data:" + randNum.Next(30, 100) + "\n");
            try
            {
                data.Flush();
                _streammessage.Enqueue(data);
            }
            catch (Exception ex)
            {
                // dont re-add the stream as an error ocurred presumable the client has lost connection
            }
        }
        //To set timer with random interval
        _timer.Value.Change(TimeSpan.FromMilliseconds(randNum.Next(1, 3) * 500), TimeSpan.FromMilliseconds(-1));

    } 
```

我还必须修改 OnStreamAvailable 成员，因为框架语法已更改为第二个参数是 HttpContent 而不是 HttpContentHeaders

```
 public static void OnStreamAvailable(Stream stream, HttpContent headers, TransportContext context) 
```

现在的问题是，如果我添加或删除客户端，我仍然会出现不一致的行为，即尝试初始化新客户端时它会超时。有没有人有任何想法或更多使用 SSE 与 WinAPI 和正确的“方法框架”来处理断开连接的客户端的例子

干杯蒂姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T20:26:51.803

这篇文章其实是我从 5 月份的原创文章的改编——http: [//www.strathweb.com/2012/05/native-html5-push-notifications-with-asp-net-web-api-and-knockout-js /](http://www.strathweb.com/2012/05/native-html5-push-notifications-with-asp-net-web-api-and-knockout-js/)（注意变量名和端口号是相同的:-)。

这是您提出的一个非常有效的观点，并且使用此设置检测断开的连接并不是一件容易的事。主要原因是，虽然 ASP.NET（主机）允许您检查断开的连接，但 ASP.NET（主机）和 Web API 之间没有通知机制来通知这一点。

这就是为什么为了检测断开的连接（断开的客户端），您应该真正尝试写入流，并捕获任何错误 - 这意味着客户端已断开连接。

我在 aspconf 向 Brad Wilson/Marcin Dobosz/Damien Edwards 提出了同样的问题，Damien 建议使用`HttpContext.Current.Response.IsClientConnected`- 所以基本上绕过 Web API 并直接从底层主机获取连接信息（但是无论如何仍然涉及竞争条件）。这确实是 .NET 4。他还指出了一种有趣的方法，可以在 .NET 4.5 中使用异步取消令牌来避免这个问题。坦率地说，我从来没有时间测试它，但也许这是你应该探索的东西。

您可以在此视频中看到他们对这个问题的回应 - [http://channel9.msdn.com/Events/aspConf/aspConf/Ask-The-Experts](http://channel9.msdn.com/Events/aspConf/aspConf/Ask-The-Experts) - 快进到 48:00

# java - 为什么番石榴没有后置条件？我可以用什么代替？

> ID：12992244
> 
> 赞同：20
> 
> 时间：2012-10-20T20:09:49.913
> 
> 标签：java, guava, assertion

因此，Guava 具有简单而有用的[前提条件](https://google.github.io/guava/releases/23.0/api/docs/com/google/common/base/Preconditions.html)来检查方法参数。但我想也有一个“后置条件”类是合理的。还是仅仅是因为 java 提供了断言？

由于不存在这样的课程，在数学返回之前检查后置条件的“最佳”（实践）替代方法是什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-20T20:12:22.200

测试后置条件将是多余的。我们在java中测试后置条件的方式是[单元测试](http://en.wikipedia.org/wiki/Unit_testing)。

通过单元测试，我们确保对于给定的输入，我们得到可预测的输出。有了`Preconditions`，我们可以验证我们是否有有效的输入，因此测试已经保证了输出。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-02-20T20:27:51.847

我会`assert`在方法本身中使用 Java 关键字来编码后置条件。

**单元测试还是后置条件？**

单元测试和后置条件服务于不同的目的。

*单元测试*中的断言提供了*对一个输入向量*的方法结果的检查。它是一个预言机，指定一个特定案例的预期结果。

`assert` *方法本身中的*An验证*对于任何输入*，后置条件都成立。它是一个预言机，指定*所有可能情况*的预期结果（属性） 。这种作为预言机的后置条件与自动化测试技术很好地结合在一起，在这些技术中，很容易生成输入，但很难为每个输入生成预期值。

**番石榴后置条件？**

至于为什么 Guava 有 Precondition 类，但没有 Postcondition 类，这是我的理解。

Guava Preconditions 有效地为您希望根据方法的输入或对象的状态抛出特定类型的异常（非法参数、空指针、索引超出范围、非法状态）的常见情况提供了许多简写。

对于后置条件，此类常见情况较少。因此，不需要提供速记来抛出特定类型的异常。一个失败的后置条件就像一个 HTTP 500“内部服务器错误”——我们所知道的就是执行我们的方法时出了点问题。

[（请注意，Guava 的前提条件概念与纯按合同设计](http://se.ethz.ch/~meyer/publications/computer/contract.pdf)的概念完全不同，后者根本无法保证如果不满足前提条件 - 甚至不会抛出合理的异常。Guava 的 Preconditions 类提供了有用的使公共 API 更具防御性的能力）。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-10-20T20:13:38.887

前置条件和后置条件的用途非常不同。

Preconditions 测试输入，它不受方法的控制；后置条件测试输出，即。因此，它们在方法本身内部没有意义，而只是作为测试方法的外部代码。

然而，如果你真的想在你的代码中加入这样的断言，那么 Guava Preconditions 也可以很好地实现这一点，即使这不是它们的预期目的。

# xslt - 如何使用 XSLT 为所有元素和属性添加名称空间和前缀？

> ID：12992245
> 
> 赞同：8
> 
> 时间：2012-10-20T20:09:55.470
> 
> 标签：xslt, namespaces

我的问题是如何使用 XSLT 为所有元素和属性添加名称空间和前缀？我的输入 xml 原样....

```
<ProcessCreditMemo xmlns='CreditMemo' 
                   xmlns:xsd='http://www.w3.org/2001/XMLSchema' 
                   xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance'
                   xmlns:soap='http://schemas.xmlsoap.org/soap/envelope/'>
<ORDER_HEADERDetails>
    <ORDER_HEADER>
    <NAME>0010185214</NAME> 
```

成为...

```
<ns0:ProcessCreditMemo xmlns='CreditMemo' 
                       xmlns:xsd='http://www.w3.org/2001/XMLSchema' 
                       xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance'
                       xmlns:soap='http://schemas.xmlsoap.org/soap/envelope/' 
                       xmlns:ns0="http://tempuri.org/">
<ns0:ORDER_HEADERDetails>
    <ns0:ORDER_HEADER>
   <ns0:NAME>0010185214</NAME> 
```

我需要为所有元素和属性添加前缀“ns0:”，并在标题“ProcessCreditMemo”中添加命名空间“xmlns:ns0="http://tempuri.org/”。

我正在尝试构建一个 XSLT 来做到这一点......

```
<xsl:stylesheet version="1.0" 
          xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
<xsl:output method="xml" encoding="UTF-8" indent="yes"/>
<xsl:template match="node()|text()|@*">
    <xsl:copy>
        <xsl:if test="local-name()='ProcessCreditMemo'">
            <xsl:attribute name="xmlns" namespace="http://tempuri.org/" />
        </xsl:if> 
```

但生成的 XML 使用空值复制前缀。

```
<ProcessCreditMemo xmlns="CreditMemo" 
                   xmlns:ns0="http://tempuri.org/" 
                   xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"
                   xmlns:xsd="http://www.w3.org/2001/XMLSchema" 
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
                   ns0:xmlns=""> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-20T20:33:18.523

**这种转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:ns0="http://tempuri.org/">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="*">
  <xsl:element name="ns0:{name()}" namespace="http://tempuri.org/">
   <xsl:copy-of select="namespace::*"/>
       <xsl:apply-templates select="node()|@*"/>
  </xsl:element>
 </xsl:template>
</xsl:stylesheet> 
```

**当应用于（更正的）提供的输入（严重格式错误、不完整的 XML）时**：

```
<ProcessCreditMemo xmlns='CreditMemo'
  xmlns:xsd='http://www.w3.org/2001/XMLSchema'
  xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance'
  xmlns:soap='http://schemas.xmlsoap.org/soap/envelope/'>
  <ORDER_HEADERDetails>
    <ORDER_HEADER>
      <NAME>0010185214</NAME>
    </ORDER_HEADER>
  </ORDER_HEADERDetails>
</ProcessCreditMemo> 
```

**产生想要的、正确的结果（不是提供的严重格式错误/不完整的想要结果）：**

```
<ns0:ProcessCreditMemo xmlns:ns0="http://tempuri.org/" xmlns="CreditMemo" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
   <ns0:ORDER_HEADERDetails>
      <ns0:ORDER_HEADER>
         <ns0:NAME>0010185214</ns0:NAME>
      </ns0:ORDER_HEADER>
   </ns0:ORDER_HEADERDetails>
</ns0:ProcessCreditMemo> 
```

# macos - Mountain Lion 登录窗口 CGEvent 失败

> ID：12992247
> 
> 赞同：1
> 
> 时间：2012-10-20T20:10:11.413
> 
> 标签：macos, osx-mountain-lion, iokit, cgeventtap

我有一个应用程序，它使用 CGEvent 点击来捕捉按键和鼠标事件。

示例 .. CGEventTapCreate(kCGHIDEventTap, kCGTailAppendEventTap, 1, eventMask, keyUp, @"mydata");

我也生成事件。一切正常，除非此应用程序（PrivilegedHelperTool）作为登录前启动代理（登录窗口）运行。该应用程序显示正常，但我所有的点击都返回 null 并且我生成的事件不起作用。处于预登录状态时，除了“kCGHIDEventTap”之外还有其他内容吗？

我已经使用 IOKit 来捕捉鼠标移动（工作），但是在实现按键时，似乎不推荐使用这种 IOKit 东西，并且大多数建议说使用 CGEvent Equivalents。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-17T09:40:52.350

请检查这个线程

[Mac事件点击只是延迟丢弃的事件](https://stackoverflow.com/questions/2817680/mac-event-tap-just-delays-discarded-events/13077627#13077627)

您的事件点击也应该在登录窗口上工作（甚至注入）但几乎没有限制，您不能过滤密码对话框 fe（不足为奇）

# json.net - Ravendb 960 不尊重具有 Dictionary 属性的 JsonIgnore

> ID：12992248
> 
> 赞同：0
> 
> 时间：2012-10-20T20:10:14.520
> 
> 标签：json.net, ravendb

当属性有数据时，JsonIgnore 是否不起作用？我有以下课程：

```
public class SomeObject
    {
        public string Name { get; set; }
        public DateTime Created { get; set; }
        public List<string> ErrorList { get; set; }

        [JsonIgnore]
        public Dictionary<string, object> Parameters { get; set; }

        public SomeObject()
        {
            this.ErrorList = new List<string>();
            this.Parameters = new Dictionary<string, object>();
        }
    } 
```

我的期望是 JsonIgnore 会从反序列化/序列化中排除属性。我的 RavenDB 文档有数据。我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T04:53:07.563

如果您使用任何 1.2（不稳定）版本，则需要`JsonIgnoreAttribute`使用`Raven.Imports.Newtonsoft.Json`. Json.Net 的所有内容都已内化。

更好的方法是不直接通过属性公开您的参数字典，因为您不希望它序列化。也许像下面这样的模式就足够了：

```
private readonly Dictionary<string, object> _parameters = new Dictionary<string, object>();
public Dictionary<string, object> GetParameters()
{
    return _parameters;
} 
```

就个人而言，我尽量不将任何外部依赖项带入我的域对象，所以我喜欢避免类似的事情`[JsonIgnore]`。

**编辑**

对不起，我刚刚在你的标题中看到了 960 版本。您可能会遇到不同的问题，即 960 依赖于 Json.Net 4.0.8。[使用http://nuget.org/packages/RavenDB.Client/1.0.972](http://nuget.org/packages/RavenDB.Client/1.0.972)的 972 客户端可能会更好。不过，我认为更好的建议是进行重组以完全避免需要它。

# c# - 使用函数 SetTextJustification (API)

> ID：12992251
> 
> 赞同：1
> 
> 时间：2012-10-20T20:11:02.693
> 
> 标签：c#, winapi

我正在尝试使用该`SetTextJustification`功能，但它没有按预期工作。

如果我将 nBreakExtra 的参数值设置为 40 或 10 输出是相同的，这是为什么呢？

这是我的代码：

```
 private void button1_Click(object sender, EventArgs e)
      {
          IntPtr hdc = richTextBox1.CreateGraphics().GetHdc();
          string str = "aaa bbb ccc ddd eee fff";
          SetTextJustification(hdc, 40, 5);
          TextOut(hdc, 20, 20, str, str.Length);
          SetTextJustification(hdc, 10, 5);
          TextOut(hdc, 20, 50, str, str.Length);
      }

      [DllImport("gdi32.dll")]
      static extern bool SetTextJustification(IntPtr hdc, int nBreakExtra, int nBreakCount);

      [DllImport("gdi32.dll", CharSet = CharSet.Auto)]
      static extern bool TextOut(IntPtr hdc, int nXStart, int nYStart, string lpString, int cbString); 
```

输出显示为： ![在此处输入图像描述](../Images/fe2be8cf7ff32b307d2389e0803ca74c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T21:01:14.747

您的代码似乎工作正常。这是我的测试的屏幕截图：

![显示代码结果的测试表格](../Images/455772ff0dc03c96d79ec16f5a0b991e.png)

我不确定为什么你的结果不同。

也许我可以提供这个作为替代解决方案：我已经编写了自己的证明方法：

```
public void PaintTextJustification(Graphics g, string text, Font font, PointF location, int lineWidth, bool applyToLastLine)
{
  string[] words = text.Split(new char[] { ' ' }, StringSplitOptions.RemoveEmptyEntries);

  int wordCount = 0;
  float locY = location.Y;

  while (wordCount < words.Length)
  {
    StringBuilder rawLine = new StringBuilder();
    List<string> lineParts = new List<string>();

    while ((wordCount < words.Length) && (g.MeasureString(rawLine.ToString() + words[wordCount], font).Width < (float)lineWidth))
    {
      rawLine.Append(words[wordCount] + " ");
      lineParts.Add(words[wordCount] + " ");
      wordCount++;
    }
    string rawLineStr = rawLine.ToString().Trim();

    float padding = 0;
    if ((wordCount < words.Length) || (applyToLastLine))
    {
      // Only apply padding if not the last line.
      padding = ((float)lineWidth - g.MeasureString(rawLineStr, font).Width) / (lineParts.Count - 1);
    }

    float locX = location.X;
    foreach (string word in lineParts)
    {
      g.DrawString(word, font, Brushes.Black, new PointF(locX, locY));
      locX += g.MeasureString(word, font).Width + padding;
    }

    locY += g.MeasureString(rawLineStr, font).Height;
  }
} 
```

使用这种新方法，您可以选择字体并指定行的总长度，它还允许您更大的灵活性和自定义（例如，合并一个标志，指示最后一行是否应该对齐）。您还可以通过将字体颜色作为方法参数进一步自定义该方法。

现在可以使用该方法，如下面的按钮事件方法所示（注意该事件处理方法的第一位包括用于测试原始解决方案的代码）：

```
private void EditButton_Click(object sender, EventArgs e)
{
  IntPtr hdc = richTextBox1.CreateGraphics().GetHdc();
  string str = "aaa bbb ccc ddd eee fff";

  SetTextJustification(hdc, 40, 5);
  TextOut(hdc, 20, 20, str, str.Length);

  SetTextJustification(hdc, 10, 5);
  TextOut(hdc, 20, 40, str, str.Length);

  // Another Approach:
  Graphics g = richTextBox1.CreateGraphics();
  PaintTextJustification(g, str, richTextBox1.Font, new PointF(20f, 90f), 220, true);

  System.Drawing.Font newFont = new Font("Arial", 12f, FontStyle.Bold);
  string longStr = "This is a very long string which will need to be split across several lines when it is justified.";
  PaintTextJustification(g, longStr, newFont, new PointF(20f, 110f), 220, false);
} 
```

这是显示这两种方法的结果的屏幕截图：

![在此处输入图像描述](../Images/fade5dc5ccacaa15af10287a73d24a92.png)

无论如何，我希望这会有所帮助。

# c++-cli - 导出使用托管句柄的类？

> ID：12992256
> 
> 赞同：1
> 
> 时间：2012-10-20T20:11:33.473
> 
> 标签：c++-cli

我正在尝试在 C++/CLI 中围绕 .Net 库创建一个本机包装器，以便常规 C++ 代码可以使用它。对于此示例，假设这是我要包装的 C# 代码：

```
class Foo
{
    public Bar GetBar() {...}
    public string SomeProperty { get; set; }
}

class Bar
{
    public void Baz() {...}
} 
```

我基本上试图在 C++/CLI（dll 项目）中大致做到这一点：

```
class __declspec(dllexport) NativeFoo
{
public:
    NativeBar GetBar();
    std::string GetName();
    void SetName(const std::string &value);

private:
    Foo ^m_foo;
};

class __declspec(dllexport) NativeBar
{
    friend class NativeFoo;
public:
    void Baz();

private:
    Bar(Bar ^bar);

    Bar ^m_bar;
}; 
```

这样，一个 C++ 库可以链接到这个，使用 NativeFoo 就好像它是一个常规的 C++ 类一样。在内部，NativeFoo 将转换参数以将实现传递给 m_foo，将所有管理的内容编组回本地表示并将其返回给它的调用者......

但是，我遇到的问题是我不能拥有非托管类的托管成员：

```
error C3265: cannot declare a managed 'm_bar' in an unmanaged 'NativeFoo' 
```

同样，我不能将 NativeFoo 标记为“ref”（本身就是一个托管类），因为这样我就不能导出它：

```
C3386: 'NativeFoo' : __declspec(dllexport)/__declspec(dllimport) cannot be applied to a managed type 
```

在我的 C++ 对象中使用托管指针的正确方法是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-20T20:26:09.960

您需要使用`gcroot`在非托管类型上声明托管句柄。对于任何非托管类型，您都需要它，无论它是否被 dllexported。

上面有一个[MSDN 页面](http://msdn.microsoft.com/en-us/library/481fa11f.aspx)，上面有一些很好的信息和一些示例。

我相信你最终会得到这样的结果：

```
class __declspec(dllexport) NativeFoo
{
public:
    NativeBar GetBar();
    std::string GetName();
    void SetName(const std::string &value);

private:
    gcroot<Foo^> m_foo;
}; 
```

# iphone - 如何在 NSOperation 中实现异步网络调用

> ID：12992257
> 
> 赞同：1
> 
> 时间：2012-10-20T20:11:39.697
> 
> 标签：iphone, ios, multithreading, nsoperation

我有一个`NSOperation`执行异步下载的派生类。
因为下载操作必须从主线程发起，所以响应也是在主线程上完成的。

下载完成后，我想对`NSOperation`.

下载完成后如何在现有的后台线程中再次执行操作`NSOperation`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T20:37:43.163

如果您不是移动到 NSOperation 中的主线程，而是在您的 NSOperation 运行的当前线程中启动连接。

然后，通过将[NSPort 添加到 NSRunLoop 来](http://www.cocoaintheshell.com/2011/04/nsurlconnection-synchronous-asynchronous/)保持 NSURLConnection 活动。
现在，所有回调都将在与您开始连接的线程相同的线程中接收 - 您可以继续在这里执行您的额外工作，这已经在后台。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T22:26:56.363

NSOperation 只是一个托管任务。您应该使用它在主线程之外进行网络调用。

在 NSOperations 中处理异步代码的微妙之处在于 NSOperation 将在回调返回之前完成并退出（并从内存中释放）。NSOperationQueue 不知道也不关心您的代码是异步的。

使用现有的运行循环进行操作并在 NSOperation 上显式设置完成将使操作保持活动状态以接收回调并将自身标记为完成。

当异步回调返回时（在设置操作完成之前），NSOperation 中的代码应该调用主线程，可能通过发送一个块来更新 UI。

不要指望在它完成任何操作后保留 NSOperation。它是一个一次性任务对象，完成后不应该存在。

正如现有答案所建议的那样，您应该在网络调用本身的 NSOperation 中进行尽可能多的处理。

# php - 简单的PHP。尝试摆脱嵌套的 if

> ID：12992262
> 
> 赞同：0
> 
> 时间：2012-10-20T20:12:17.437
> 
> 标签：php

> **可能重复：**
> [比较 PHP 中的多个值](https://stackoverflow.com/questions/4106382/compare-multiple-values-in-php)

有人能帮我找到一个更好的方法来写这个吗，拜托。我觉得好像必须有比嵌套 if 更好的东西。我已经尝试搜索，但我不知道我在寻找什么。

代码表明，如果会话变量“auth”不完全等于 0、1、2 或 3，则重定向到登录页面。

```
if($_SESSION['auth']!=0){
   if($_SESSION['auth']!=1){
      if($_SESSION['auth']!=2){
         if($_SESSION['auth']!=3){
            header("location:login.php");
         }
      }
   }
} 
```

我最初的想法是做这样的事情。

```
if($_SESSION['auth']<=0 || $_SESSION['auth']>=3){
   header("location:login.php");
} 
```

但这并没有考虑整数值的分数。我只想允许整数值。我的下一个想法是这个。

```
if($_SESSION['auth']!=0 && $_SESSION['auth']!=1 && $_SESSION['auth']!=2 && $_SESSION['auth']!=3){
   header("location:login.php")
} 
```

但是这种方式与所有嵌套的 if 没有太大区别。让我知道我是否只是在尝试修复未损坏的东西。先感谢您。我正在寻找相关主题的链接（最好是 PHP 手册），而不是解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T20:15:52.460

是的，你是。更简单的方法可能是[inarray()](http://php.net/manual/en/function.in-array.php)。

```
$values = array('0','1','2','3');
if(!in_array($_SESSION['auth'], $values, true)
//do something 
```

甚至更短

```
if(!in_array($_SESSION['auth'], array('0','1','2','3'), true)
//do something 
```

最好使用第一个选项，以防您将来可能想将其与更多值进行比较。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T20:17:02.227

您可以保留一组值来检查：

```
$auth_array = array('0', '1', '2', '3');
if(!in_array($_SESSION['auth'], $auth_array)){
    header("location:login.php");
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-20T20:16:17.560

您可以使用`in_array`它轻松检查是否`$_SESSION['auth']`等于您正在寻找的值之一。

```
if (in_array ($_SESSION['auth'], array (0,1,2,3)) == false)
  header ("Location: ..."); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-20T20:20:09.767

您自己的解决方案很好：

```
if($_SESSION['auth']<=0 || $_SESSION['auth']>=3){
   header("location:login.php");
} 
```

如果您担心十进制值，请不要担心——如果您的代码只将其设置为整数，那么这就是全部。但是，如果您担心这一点，只需通过类型转换将值强制为整数：

```
$_SESSION['auth'] = (int)$_SESSION['auth']; 
```

不再担心分数。

# zsh - 找不到 Jasmine 命令

> ID：12992263
> 
> 赞同：2
> 
> 时间：2012-10-20T20:12:21.680
> 
> 标签：zsh, jasmine

我正在使用 zsh（带有 oh-my-zsh）和 rbenv：两者都是通过自制软件安装的。
我正在尝试让 jasmine 在独立应用程序中运行。安装 jasmine gem 后

> 宝石安装茉莉花

我试过了

```
jasmine init 
```

并收到了一个

> zsh：找不到命令：茉莉花

我是否必须在配置中明确设置路径或其他内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-25T22:15:19.947

我认为这实际上是一个 rbenv 问题。Rbenv 不会像 rvm 那样积极地将自己填充到您的 shell 中，这意味着您必须执行类似的操作

```
rbenv rehash 
```

让 rbenv 更新其别名并使`jasmine`命令可用。这只需要在您第一次安装带有 shell 命令的 gem 时发生。之后 rbenv 应该在幕后更新它的引用，你应该总是得到最新的版本。

# android - FileTransfer上传期间的Android FileNotFoundException

> ID：12992265
> 
> 赞同：1
> 
> 时间：2012-10-20T20:12:24.783
> 
> 标签：android, cordova, filenotfoundexception

前言：我看过其他几个类似的帖子，但没有成功的答案。这就是我发布这个问题的原因。很抱歉重复的帖子，但该网站说只回复答案。=)

我是 Android 开发的新手，但从事 Web 开发已有十多年了。

我只是想让 PhoneGap 2.1 FileTransfer 的“完整示例”正常工作。没什么太极端的，对吧？

下面错误日志中的 MYURL 反映了我的实际 URL，是的，它确实存在。由于某种原因，模拟器无法访问该站点。为什么不？安卓 4.1.2

我要传输到的服务器文件目前实际上并没有做任何事情，所以它不可能是服务器端错误。该文件是空白的。一旦我知道模拟器发送并且我得到了很好的响应，我就会上传我的服务器端文件。

顺便说一句，我正在使用 Cold Fusion 服务器端——但我怀疑这会有所不同。

我尝试使用以下行编辑 Config.xml：

```
<access origin="*"/>
<access origin=".*"/>
<access origin="MYURL"/> 
```

谢谢你的帮助。你解决这个问题我可以给你买咖啡或啤酒！

错误日志：

```
10-20 19:22:51.400: E/FileTransfer(726): java.io.FileNotFoundException: MYURL
10-20 19:22:51.400: E/FileTransfer(726): java.io.FileNotFoundException: MYURL
10-20 19:22:51.400: E/FileTransfer(726):    at libcore.net.http.HttpURLConnectionImpl.getInputStream(HttpURLConnectionImpl.java:177)
10-20 19:22:51.400: E/FileTransfer(726):    at org.apache.cordova.FileTransfer.upload(FileTransfer.java:302)
10-20 19:22:51.400: E/FileTransfer(726):    at org.apache.cordova.FileTransfer.execute(FileTransfer.java:86)
10-20 19:22:51.400: E/FileTransfer(726):    at org.apache.cordova.api.PluginManager$1.run(PluginManager.java:231)
10-20 19:22:51.400: E/FileTransfer(726):    at java.lang.Thread.run(Thread.java:856)
10-20 19:22:51.410: E/FileTransfer(726): {"target":"MYURL","source":"content:\/\/media\/external\/images\/media\/12","http_status":500,"code":3}
10-20 19:22:51.410: E/FileTransfer(726): java.io.IOException: Received error from server
10-20 19:22:51.410: E/FileTransfer(726):    at org.apache.cordova.FileTransfer.upload(FileTransfer.java:305)
10-20 19:22:51.410: E/FileTransfer(726):    at org.apache.cordova.FileTransfer.execute(FileTransfer.java:86)
10-20 19:22:51.410: E/FileTransfer(726):    at org.apache.cordova.api.PluginManager$1.run(PluginManager.java:231)
10-20 19:22:51.410: E/FileTransfer(726):    at java.lang.Thread.run(Thread.java:856) 
```

# visual-studio-2010 - 使用 T4 更新指定文本块

> ID：12992269
> 
> 赞同：0
> 
> 时间：2012-10-20T20:12:48.153
> 
> 标签：visual-studio-2010, t4, t4-toolbox

我正在使用 T4 模板和 T4 工具箱来生成文本。

我想根据地区进行部分更新。例如，在第一次通过时会生成所有内容，但如果再次更新文件，则只会更新 $regions 中的代码块。每个 $regions 都有一个不同的名称。

我正在寻找有关如何实施的建议。

一种方法是使用定制的预处理器，去除除生成的代码区域之外的所有内容。另一种可能是在找到生成的代码区域时清除 T4 处理器的缓冲区，然后在找到该区域的末尾时，替换生成文件的区域中与 T4 处理器已解析的区域相对应的文本。

**假设**

*   生成的代码区域不会包含应该被解析的块
*   每个生成的文本区域都有一个不同的名称

**简单的例子**

```
<person>
    <firstname>
      $region FirstName generated
      <#="//T4 Template stuff here" #>
      $endregion
    </firstname>

    <lastname>
      $region LastName generated
      <#="//T4 Template stuff here" #>
      $endregion
    </lastname>

</person> 
```

***注意：***我意识到这个问题与这个问题相似[，](https://stackoverflow.com/questions/4546715/t4-custom-code-blocks)但从未提供过合适的答案。我正在寻找可行的解决方案，而不是“无法完成”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T18:06:53.620

这正是创建 partial [classes](http://msdn.microsoft.com/en-us/library/wa80x488%28v=vs.80%29.aspx)、[methods](http://msdn.microsoft.com/en-us/library/6b0scde8.aspx)和[MetadataType](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.metadatatypeattribute%28v=vs.91%29.aspx)的目的。

在链接的问题中，该家伙声称不解释就不能选择部分课程，您没有做出这样的规定。如果这些都不是一个选项，请详细说明原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T01:09:03.290

您可以选择将不变的文本键入 .cs 文件或另一个 .tt 文件，然后进行 T4 导入或以其他方式使用另一个文件中的代码来创建两个项目合并的文件。

对于构建操作，可以将不实际编译的 .cs 文件设置为 None，而不是 Compile。

实际上，您可以只阅读在您的特殊区域行上停止的不变 .cs 文件的原始文本，以插入 T4 认为在此运行中合适的任何内容。就此而言，我看不出有什么阻止您让 T4 读取它创建的现有文件，并且只更改区域内的文本。

.cs 文件的简单文本解析可以查找这些`#region`行。

# expect - 从期望输出中提取模式

> ID：12992272
> 
> 赞同：0
> 
> 时间：2012-10-20T20:12:58.900
> 
> 标签：expect

我如何指示期望在流中查找类似“Generating foo- *[pattern]* .tgz”的内容并返回该模式，以便我可以在以后的命令中使用它？

我发现自己反复执行相同的操作，并希望使用 expect 将它们自动化。我 ssh 到一个系统上并在其上运行一个生成文件的脚本，然后我将该系统中的文件 scp 到另外两个系统上。

我可以生成 ssh 并成功触发文件构建。我不确定如何捕获生成文件的名称来执行复制。脚本输出类似“Generating foo- *timestamp.tgz* ...Done”的内容。并且*时间戳*在运行之间显然会有所不同，我不想 glob scp （即`scp foo-*tgz`），因为可能存在陈旧的 foo 文件（因此是时间戳）。

我是新手，仍然在示例中磕磕绊绊，偶尔仍然需要一些帮助。非常感谢任何建议/帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T18:04:47.110

我不知道我们是否可以捕获模式，但在这种情况下我通常做的是将输出存储在一个变量中，然后使用这个输出。例如，如果`send -- "./executeSomeScript\r"`会给出类似“Generating foo-timestamp.tgz ... Done”的输出，我会将 send 命令替换为

```
send -- "output=`./executeSomeScript`\r"
send -- "filename=`echo \$output | awk '{ print \$2 }'\r" 
```

最后

```
send -- "scp \$filename user@server:path\r" 
```

请注意，转义`$`是必要的，这样它就不会在脚本级别进行解释，而是作为文字发送到远程 shell。

# c++ - C++ - 在不丢失调用堆栈的情况下处理异常

> ID：12992276
> 
> 赞同：-1
> 
> 时间：2012-10-20T20:13:23.103
> 
> 标签：c++, exception

有一种方法可以处理异常，然后转到引发异常的代码中的下一行？

例子：

```
try {
    cout << "Test Begin! 1... 2... 3..." << endl;
    throw "A text!";
    throw 1;
    throw 2;
    throw 3;
    cout << "Yeah! Successful!!" << endl;
} catch (char* text) {
    cout << ch << endl;
    ???(); //Go back to the previous line
}
catch (int i) {
    cout << "Thrown " << i << endl;
    ???(); //Go back to the previous line
} 
```

输出将是：

```
Test Begin! 1... 2... 3...
A text!
Thrown 1
Thrown 2
Thrown 3
Yeah! Successful!! 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T20:24:23.470

这不是异常的工作方式。异常从抛出它的函数中有效地“返回”（更像是“退出”），清除本地分配的任何内存。这是一个`try`街区中的独特事件，没有办法。

我想说的是，您的设计可能不适合 C++ 异常，您应该重新考虑如何在 C++ 中解决问题，而不是让语言以您想要解决问题的方式工作。最终的结果肯定会是更干净的代码。

如果用/包围一个`throw`ing 函数的调用，则可以保留调用堆栈，这样只会展开该一个函数调用，而调用堆栈的其余部分保持不变。`try``catch`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T21:40:07.553

不。您所要求的称为**可恢复**异常，其中 catch 子句可以告诉程序在抛出点**恢复**，大概是因为 catch 子句中的代码解决了问题。C++ 不支持可恢复的异常。从来没有，永远不会。`<g>`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-20T20:31:02.973

[longjmp](http://www.cplusplus.com/reference/clibrary/csetjmp/longjmp/)和#define：

```
#include <setjmp.h>
#include <iostream>

#define THROW_AND_GO_NEXT(action) \
  val=setjmp(env); \
  if (val==0) \
    action; 

using namespace std;

int main()
{
  jmp_buf env;
  int val;

  try {
      cout << "Test Begin! 1... 2... 3..." << endl;
      THROW_AND_GO_NEXT(throw "A text!");
      THROW_AND_GO_NEXT (throw 1);
      THROW_AND_GO_NEXT(throw 2);
      THROW_AND_GO_NEXT(throw 3);
      cout << "Yeah! Successful!!" << endl;
  } catch (const char* text) {
      cout << text << endl;
      longjmp(env,1);
  }
  catch (int i) {
      cout << "Thrown " << i << endl;
      longjmp(env,1);
  }
  return 0;
} 
```

这是输出：

```
>./a
Test Begin! 1... 2... 3...
A text!
Thrown 1
Thrown 2
Thrown 3
Yeah! Successful!! 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-20T20:18:34.330

我认为一种解决方案是编写一个函数来处理每个输入的异常并在每个语句中使用相同的，例如

```
 cout << "Test Begin! 1... 2... 3..." << endl;
   handleException(A text!);
   handleException(1);
   handleException(2);
   handleException(3);
   cout << "Yeah! Successful!!" << endl; 
```

**这`handleException`是/是您的异常处理的自定义函数如下（仅示例）**

```
 void handleException(int input){
      try {
           thrown input;
         }catch (int i) {
            cout << "Thrown " << i << endl;
         }
     }

   void handleException(char* input){
      try {
           thrown input;
         }catch (char* text) {
            cout << "Thrown " << text << endl;
         }
     } 
```

# c# - IOException 是未处理的错误

> ID：12992281
> 
> 赞同：1
> 
> 时间：2012-10-20T20:13:50.250
> 
> 标签：c#, file-io

我有以下代码，但`IOException`出现错误。它说它正在由不同的进程使用。我没有在某处打开文件，应用程序创建了文件。

这是我的代码：

在功能一中：

```
System.IO.StreamWriter data = new System.IO.StreamWriter(@"c:\temp.txt");
data.WriteLine(temp);
data.Close() 
```

在此之后，调用第二个函数来处理临时文件。对 IO 执行某些操作的行如下：

```
string[] part = System.IO.File.ReadAllLines(@"c:\temp.txt"); 
```

在此函数中，`string[] part`将修改并添加到最终的完整文件中：

```
System.IO.File.AppendAllLines(Datas.Core.outputDir + @"\" + Datas.Core.outputName + ".txt", part); 
```

我猜这个`System.IO.ReadAllLines`函数让文件很忙，我怎样才能更改我的代码以便我可以再次访问该文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T20:28:29.573

该方法`System.IO.File.ReadAllLines()`不会使文件保持忙碌，它会打开文件进行读取，然后在完成后自动关闭它。问题可能在以下行

```
System.IO.File.AppendAllLines(Datas.Core.outputDir + @"\" + Datas.Core.outputName + ".txt", part); 
```

我认为最好使用类`StreamWriter`将文本附加或写入特定文件并稍后控制编写器（类）。

这是一个示例代码

```
string Path = @"C:\temp.txt"; // You can change this to anything you would like
StreamWriter _TextWriter = new StreamWriter(Path, true); // change to "false" if you do not want to append 
```

然后，您可以使用以下方法之一：

**！** 将文本附加到最后一行

```
_TextWriter.Write("something"); 
```

**！**在文件末尾创建一个新行，然后将文本附加到最后一行

```
_TextWriter.WriteLine("something"); 
```

然后在`StreamWriter`处理完文件后使用以下代码关闭

```
_TextWriter.Close(); 
```

谢谢，
我希望你觉得这有帮助:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T20:52:56.027

您需要调用[`data.Dispose()`](http://msdn.microsoft.com/en-us/library/system.idisposable.aspx)（不仅仅是`Close`）以完全释放文件句柄。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T20:35:03.893

将其放入`System.IO.StreamWriter`using 语句中，以便正确处理：

```
using (System.IO.StreamWriter data = new System.IO.StreamWriter(@"c:\temp.txt"))
{
    data.WriteLine(temp);
} 
```

这就是[MSDN](http://msdn.microsoft.com/en-us/library/fysy0a4b.aspx)中的示例的呈现方式。

# restlet - 在android上使用哪个restlet HTTPS客户端？

> ID：12992282
> 
> 赞同：4
> 
> 时间：2012-10-20T20:13:50.553
> 
> 标签：restlet, restlet-2.0

我是 restlet 的新手，并试图了解我应该与 android 一起使用哪个 HTTPS 客户端选项。哪个 HTTPS 客户端选项对 Android 来说最强大和最稳定？我正在使用restlet 2.1rc4（和2.1.0）和android 2.2。不幸的是，更改 android 版本对我来说不是一个选择。

我认为可能性是：

1.  Apache HttpClient (org.restlet.ext.httpclient)
2.  .net 客户端 (org.restlet.ext.net)
3.  Restlet 内部客户端

我在 org.restlet.ext.net 上取得了一些成功，它在大多数情况下都可以正常工作，但是我遇到了各种异常，出现“通信错误 (1001)”以及“断管”之类的消息，以及许多立即从状态为“null (-1)”的客户端请求，而从未向服务器发送请求。这可能是由我们正在使用的旧 android 中的错误引起的，但我不太确定。

我尝试使用 Apache 客户端，但根本无法让 HTTPS 工作，因为它给出了以下异常：java.lang.IllegalStateException: Scheme 'https' not registered。相同的代码可以在 Windows 上使用 Jave SE 版本的 org.restlet.ext.net.jar，但是当我使用同一个 jar 文件的 Android 版本时，它说 https 没有注册。我认为 Apache 客户端在 android 上支持 HTTPS，但它对我不起作用。

我也尝试了内部客户端，但这也根本不起作用。[我得到与Android RESTLet SSL Null Pointer](https://stackoverflow.com/questions/12026715/android-restlet-ssl-null-pointer)相同的 1001 错误问题。我用restlet 2.1.0和android 2.2试过这个。

我的源代码基本上是这样的（显示使用 Apache 客户端的尝试）：

```
context = new org.restlet.Context();
Engine.getInstance().getRegisteredConverters().add(new JacksonConverter());
Engine.getInstance().getRegisteredClients().add(new org.restlet.ext.httpclient.HttpClientHelper(null));
client = new org.restlet.Client(context, org.restlet.data.Protocol.HTTPS);
context.setClientDispatcher(client);
ClientResource resource = new ClientResource(context, url);
resource.setEntityBuffering(true);
PojoResult result = resource.post(new PojoRequest, PojoResult.class); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-10T04:56:28.017

新的 2.2 版本的 Restlet Framework 更改了其内部基于 HttpURLConnection 的 HTTP/HTTPS 客户端（之前在 org.restlet.ext.net 扩展中）。就 org.restlet.jar 的大小而言，它更稳定、更轻。

# c++ - 从函数返回 shared_ptr

> ID：12992285
> 
> 赞同：1
> 
> 时间：2012-10-20T20:14:11.310
> 
> 标签：c++, c++11, shared-ptr, auto

我对 C++11 很陌生，'仍然在尝试扩展。我发现`auto`关键字非常方便，尤其是在处理模板变量时。这意味着给定

```
template<typename ... Types>
struct Foo
{
};

template<typename ... Types>
Foo<Types ...>* create( Types ... types ... )
{
    return new Foo<Types ...>;
} 
```

我现在可以做任务了

```
auto t1 = create( 'a' , 42 , true , 1.234 , "str" ); 
```

代替

```
Foo<char, int, bool, double , const char*>* t2 = create( 'a' , 42 , true , 1.234 , "str" ); 
```

现在的问题是，因为`t1`是一个指针，我想`shared_ptr`按照 Herb Sutter 的建议将它保存在一个指针中。因此，我想将 的返回值存储`create()`在 a`shared_ptr`而不必命名模板参数类型，如`t2`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T20:35:04.627

避免一起使用原始指针。使用`std::make_shared`and `make_unique`（在标准中不正确）而不是`new`. 然后`auto`会很好地工作。例如

```
template <typename ...Args>
auto create(Args&&... args)
    -> std::shared_ptr<Foo<typename std::decay<Args>::type...>>
{
    return std::make_shared<Foo<typename std::decay<Args>::type...>>(
        std::forward<Args>(args)...);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T22:21:21.900

*这太长了，不能作为评论发布。因此，我将其发布在这里。此外，它可能是一个答案。*

@nosid 为什么不如下。它不那么复杂。

```
template<typename ... Types>
struct Foo
{
    Foo( Types ... types ... ) : m_data( types ...)
    {
    }

    std::tuple<Types...>    m_data;
};

template<typename ... Types>
std::shared_ptr<Foo<Types ...> > create( Types ... types ... )
{
    return std::make_shared<Foo<Types ...> >( types ... );
} 
```

# c# - 如何在 Visual Studio 中添加对项目的 .dll 引用

> ID：12992286
> 
> 赞同：72
> 
> 时间：2012-10-20T20:14:22.583
> 
> 标签：c#, visual-studio, email, dll-reference

我刚刚开始使用 MailSystem.NET 库。但是，我不知道在哪里添加 .dll 文件，因此我可以在我的类中引用命名空间。有人可以帮帮我吗？我正在使用 Visual Studio 2010。感谢您提供的任何信息，网上很少。

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-10-20T20:17:48.400

`Add Reference`将下载的 DLL 文件复制到开发驱动器上的自定义文件夹中，然后使用对话框中的“浏览”按钮添加对项目的引用。
确保新参考具有`Copy Local = True`. 可以在解决方案资源管理器中右键单击项目中的引用项打开
该对话框`Add Reference`

**几年后更新**
目前解决所有这些问题的最佳方法是通过 Visual Studio 2017/2019 的“
**管理 NuGet 包**”菜单命令。
您可以右键单击项目的 References 节点并选择该命令。从“*浏览*”选项卡中搜索要在 NuGet 存储库中使用的库，如果找到，请单击该项目，然后单击“安装”。（当然，您需要为该 DLL 提供一个包，并且不保证存在）

[在此处阅读有关 NuGet 的信息](https://www.nuget.org/)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2020-11-26T07:48:45.257

对于 Visual Studio 2019，您可能找不到 Project -> Add Reference 选项。使用项目 -> 添加项目参考。然后在对话框窗口中导航到浏览选项卡并使用浏览查找并附加您的 dll。

[![添加项目参考](../Images/f53d4d04f07e1a77332af5fa45b0dc93.png)](https://i.stack.imgur.com/zrc6q.png)

[![单击浏览按钮以访问文件资源管理器](../Images/6260fcc595431d2f1a0fb103881ec1eb.png)](https://i.stack.imgur.com/FT6g1.png)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-10-20T20:17:10.273

您可能正在寻找可从项目上下文菜单访问的 AddReference 对话框（右键单击..）

从那里您**可以引用**dll，之后您可以引用代码中需要的命名空间。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-08-04T13:13:34.010

另一种方法是使用 Visual Studio 中的菜单。*Project* -> *Add Reference...* 我建议将所需的 .dll 复制到您的资源文件夹或本地项目文件夹。

# android - 如何通过 VNC 使用 Android 模拟器

> ID：12992289
> 
> 赞同：9
> 
> 时间：2012-10-20T20:14:27.270
> 
> 标签：android, android-emulator, vnc, qemu

我想通过 VNC 提供对 Android 模拟器的访问，让人们测试我的应用程序。

到目前为止，我可以使用以下命令启动 Android 模拟器：

```
emulator -avd ice -verbose -qemu -vnc :2 
```

我也可以在端口连接到它，`5902`但我不能做任何输入，我不知道如何将我的鼠标转发到 qemu。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-12-30T12:08:55.917

我*猜*参数“-qemu -vnc”不适用于android模拟器的输入。有两个提示：（1）“-vnc”参数指向qemu而不是android-emulator，qemu-vnc可能不支持android的输入（2）VNC协议没有定义“drag”/“move”这是移动设备的常见操作。

但是，有一个解决方案可以满足您的要求：

1.  使用以下命令关闭模拟器的显示（可选）：

    模拟器@avd -no-window

2.  安装 vnc 服务器。我推荐fastdroid-vnc，它很不错。（[https://code.google.com/p/fastdroid-vnc/](https://code.google.com/p/fastdroid-vnc/)）

这样，你的模拟器显示就如同“-qemu -vnc :2”输入的效果一样。顺便说一句，“拖动”仍然不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-22T12:52:17.033

你可以通过在你的机器上启动一个 vnc 服务器来实现这个目的`:2`，通知 android 模拟器使用这个显示并启动模拟器：

```
vncserver :2 -geometry 1080x1920 -depth 24
export DISPLAY=2
emulator -avd avd_name -qemu 
```

Linux 有几个 vnc 服务器。我推荐tightvnc（`tightvncserver`Ubuntu上的包）。

`vncserver`可能会运行`xstartup`位于`.vnc`主文件夹上的文件夹中的脚本。如果您不希望这样，只需注释该文件上的所有行（删除该文件无济于事）。

`geometry`应该是您的 avd 的屏幕尺寸。它应该没有皮肤。

# grails - 如何将 GRAILS_HOME 环境变量设置为您提取 zip 的位置？

> ID：12992299
> 
> 赞同：2
> 
> 时间：2012-10-20T20:15:58.843
> 
> 标签：grails, netbeans-7

它说去我的电脑/高级/环境变量进行设置。但是那里没有 Grails_Home，我应该创建一个新变量吗？

然后将 bin 目录添加到您的 PATH 变量中：HOW？我只有 1 个路径变量，它显示到不同的路径。

请帮忙 :) 我有 NETBEANS 7.2.1

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T20:41:24.457

![在此处输入图像描述](../Images/8c3b0179c7a6e6b61991de3a6d035a7f.png)

这就是在 netbeans 上启动和运行 grails 所要做的一切。

[高分辨率图像](https://i.imgur.com/DlC4p.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T20:28:38.173

您需要通过将 Grails_Home 所在的目录添加到路径变量中来将其添加到路径中。只需将其放在已经存在的内容的末尾并用分号分隔即可。有一个相当有用的[工具](http://www.softpedia.com/get/System/System-Miscellaneous/Path-Editor.shtml)可以更轻松地完成它。

# javascript - 骨干.历史.loadURL

> ID：12992301
> 
> 赞同：7
> 
> 时间：2012-10-20T20:16:13.273
> 
> 标签：javascript, backbone.js

[在backbone.js 网站http://backbonejs.org/#History-start](http://backbonejs.org/#History-start)上没有Backbone.history.loadURL 的文档 虽然我大致了解它在我看过的某些应用程序中产生的结果，但我并不完全正确确定它是如何工作的，在它选择加载哪个 url 以及它如何知道将某个 url 加载到另一个的意义上。谁能解释一下？

```
$.ajax({
                url: "json/Backboneapp_data.json",
                dataType: 'json',
                data: {},
                async: false,
                success: function (data)
                {

                    _this._data = data;
                    _this._items = new ItemCollection(data);
                    _this._view = new MenuView({ model: _this._items });
                    _this._view.render();
                    Backbone.history.loadUrl();
                }

            }); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-20T20:23:16.060

注释[来源](http://backbonejs.org/docs/backbone.html)`loadUrl`的注释：

> 尝试加载当前 URL 片段。如果路由匹配成功，则返回 true。如果没有定义的路由与片段匹配，则返回 false。

因此，如果当前 URL 片段（或您作为参数传递的那个）是有效的，那么它会调用`route`. 另请注意，如果该函数根据片段解析了有效路由，则该函数返回 true，否则返回 false。

如果它有助于澄清：查看源代码，如果您指定选项，您会注意到这`loadUrl`就是调用。`navigate``trigger:true`

# macos - FireMonkey/Rad Studio XE2：如何在 OS X 上显示 SaveDialog 过滤器？

> ID：12992304
> 
> 赞同：1
> 
> 时间：2012-10-20T19:52:58.800
> 
> 标签：macos, delphi

> **可能重复：**
> [FireMonkey/Rad Studio XE2：如何在 OS X 上显示 SaveDialog 过滤器？](https://stackoverflow.com/questions/12977734/firemonkey-rad-studio-xe2-how-can-i-show-the-savedialog-filter-on-os-x)

我创建了一个（Delphi XE2）Firemonkey 示例程序，其中包含一个 TButton 和一个带有两个不同过滤器的 TSavedialog。（TSaveDialog 组件支持 Win32/Win64 和 OS X 平台。）

它在 Win32/Win64 上运行良好，但我现在不明白为什么它在 OS X（VirtualBox/OS X 10.7.x）上不显示 Savedialog 过滤器。

我怎样才能让它在 OS X 上工作？

```
procedure TForm1.Button_SaveClick(Sender: TObject);
begin
  SaveDialog.Filter:='Format_1 (*.fmt1)|*.fmt1|Format_2 (*.fmt2)|*.fmt2';

  If Savedialog.Execute Then ShowMessage(SaveDialog.FileName+#13+'Selected filterindex: '+Inttostr(SaveDialog.FilterIndex));
end; 
```

# c++ - C ++华氏到摄氏（反之亦然）循环问题

> ID：12992308
> 
> 赞同：0
> 
> 时间：2012-10-20T20:17:08.677
> 
> 标签：c++, function, loops

我有两个问题。

1.当我用小数转换时，它总是输出为0。

当我不使用小数时，结果很好。

2.我想循环我的结果，这样如果我输入 32 (start_temp) Fahrenheit 我可以增加它直到我的“结束温度”(end_temp) 并且它也转换增加的，如果增量是 10 就说 42从 32 开始，它会将 42 华氏度转换为摄氏温度。

我尝试做一个 for 循环，但没有运气。

请帮忙？

```
int main()
{
    int choice;
    cout << "Please Select A Temperature Scale Conversion:\n"<< endl;
    cout << "1\. Convert F to C" << endl;
    cout << "2\. Convert C to F\n" << endl;
    cout << "Your Choice: ";
    cin >> choice;

    cout << "Starting Temperature: ";
    cin >> start_temp;
    cout << "Ending Temperature: ";
    cin >> end_temp;
    cout << "Temperature Increase: ";
    cin >> temp_incr;

    if (choice == 1) {
        cout << fixed << setprecision(2) << calcFahrenheit(start_temp) << endl;
    } else if (choice == 2) {
        cout << fixed << setprecision(2) << calcCelsius(start_temp) << endl;
    } else {
        cout << "You have entered an invalid option." << endl;
    }

    system("PAUSE");
    return 0;
}

float calcFahrenheit(float start_temp) {
    float f2c;
    f2c = (5.0/9.0) * (start_temp - 32.0);
    return f2c;
}

float calcCelsius(float start_temp) {
    float c2f;
    c2f = (9.0/5.0) * (start_temp + 32.0);
    return c2f;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T20:27:32.007

您可以将 start_temp 保留在 c2f 中，然后在循环内使用该值再次计算 c2f 直到 end_temp 并使用 temp_incr 增加 c2f

```
for (c2f=start_temp ; c2f<=end_temp ; c2f+=temp_incr)
 {
   // Do your calculation 
 } 
```

同样的事情也适用于其他公式

# jsf - 如何在 Primefaces 灯箱中添加两个具有独立“渲染”属性的元素？

> ID：12992310
> 
> 赞同：1
> 
> 时间：2012-10-20T20:17:27.357
> 
> 标签：jsf, primefaces

我的 Primefaces 灯箱设置如下：

```
<p:lightBox>
<h:outputLink value='#'>
KLICK
<h:outputLink>

<f:facet name="inline">

TWO ELEMENTS SHOULD GO HERE

</f:facet>
</p:lightBox> 
```

我试过了，但即使两个面板都有属性“rendered='true'”，也只有后一个会出现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T21:26:06.367

构面只能有一个子组件。将它们包裹在一个`<h:panelGroup>`.

```
<f:facet name="inline">
    <h:panelGroup>
        <h:someComponent rendered="..." />
        <h:otherComponent rendered="..." />
    </h:panelGroup>
</f:facet> 
```

# format - fortran 77 程序出现错误“startio 错误：格式错误”

> ID：12992314
> 
> 赞同：0
> 
> 时间：2012-10-20T20:18:14.817
> 
> 标签：format, fortran, runtime-error, fortran77

我正在尝试运行一些旧的 fortran 77 代码，它给了我一个我无法弄清楚的错误。该程序是用g77编译的。

这是运行时的输出：

```
 Reading data from file: j.cmp
startio: error in format
apparent state: unit 14 named cyfile
last format: (i3,1x,i2,2f8.2,f8.2,1f8.3,20(1pe10.3.1))
lately writing sequential formatted external IO

Aborted (core dumped) 
```

`j.cmp`是我的输入文件；`cyfile`假设是我的输出文件。有没有人对导致错误的原因有任何想法？是我输入文件的格式吗？它不能写入输出文件吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T21:12:46.463

1pe10.3.1 不是有效格式。根据 Fortran 标准，`E`编辑描述符为：

> E *w*。*d* [ E *e* ]

其中*w*是字段宽度，*d*是小数部分的位数，*e*是指数中的位数。

尝试“1pe10.3”或“1pe10.3E1”。第二个选择将指数字段限制为一位数。

# mysql - 将表名的“字段”添加到来自 UNION 的 SQL 结果？

> ID：12992315
> 
> 赞同：9
> 
> 时间：2012-10-20T20:18:19.597
> 
> 标签：mysql, sql, select, union

如果我有一个简单的工会

```
select name, phone from users union select name, phone from vendors; 
```

有没有办法将表名添加到结果中？

所以而不是

```
+--------+-------+
| name   | phone |
+--------+-------+
| Jim    | 123...|
| Macy's | 345...|
+--------+-------+ 
```

我会得到

```
+--------+-------+---------+
| name   | phone | table   |
+--------+-------+---------+
| Jim    | 123...| users   |
| Macy's | 345...| vendors |
+--------+-------+---------+ 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-20T20:20:49.400

```
select name, phone, 'users' as table_name from users
union
select name, phone, 'vendors' as table_name from vendors; 
```

更好的解决方案是使用`union all`，因此服务器不会检查不同的值

```
select name, phone, 'users' as table_name from users
union all
select name, phone, 'vendors' as table_name from vendors; 
```

# python - tkinter/py2app 创建的应用程序在初始启动时不显示窗口

> ID：12992316
> 
> 赞同：5
> 
> 时间：2012-10-20T20:18:23.630
> 
> 标签：python, macos, tkinter, tk, py2app

我遇到了一个问题，即启动使用 Tkinter 创建并由 py2app 打包的 python 应用程序不会立即显示应用程序窗口。我在启动后显示窗口的唯一方法是单击 Dock 中的应用程序图标。

[这个人](https://stackoverflow.com/questions/10003707/sdl-based-app-doesnt-show-window-upon-launch)正在使用苹果脚本在启动时自动点击应用程序，但正如他所说，我同意，这并不理想。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-20T22:12:02.333

在做了一些广泛的研究之后，这似乎是在 py2app setup.py 文件中将 'argv_emulation' 选项设置为 True 的结果。

# resharper - 在 ReSharper 中运行单元测试时，如何查看总体执行时间？

> ID：12992320
> 
> 赞同：33
> 
> 时间：2012-10-20T20:19:47.260
> 
> 标签：resharper

我想知道我的所有测试都运行了多长时间？那可能吗？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2016-01-21T09:55:26.720

是的。选择*选项（在单元测试会话窗格中）-> 显示时间*，然后在单元测试窗口中选择*选项->按项目结构分组。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T08:02:29.160

如果您的测试会话中的所有测试都在一个程序集中，并且如果您使用 MSTest 框架，则可以使用标有**`[AssemblyInitialize()]`**和的方法**`[AssemblyCleanup()]`**来测量持续时间。

有关使用这些属性，请参阅[MSDN 库中的示例。](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.testtools.unittesting.assemblyinitializeattribute%28v=vs.100%29.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-15T14:28:40.300

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2012-10-21T12:04:45.143

您可能希望分析您的单元测试，并且由于您使用 ReSharper 运行它们，自然的选择是安装[dotTrace Performance](http://www.jetbrains.com/profiler/features/)并使用此组合[分析单元测试。](http://www.jetbrains.com/profiler/webhelp/Profiling_Guidelines__Profiling_Unit_Tests.html)

# java - Jsoup - 从标签中提取数据，在标签内

> ID：12992325
> 
> 赞同：1
> 
> 时间：2012-10-20T20:20:06.290
> 
> 标签：java, html-parsing, jsoup

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T20:41:06.610

假设共享的 html 不是真正使用的，我认为当第一个 TD 没有`<a>`标签时它会抛出异常。我认为你需要更新

```
 if (tds.size() > 1) 
```

作为

```
 if (tds.size() > 1 && tds.get(0).select("a") != null 
                          && tds.get(0).select("a").first() ! null) 
```

如果不是这种情况，共享`NullPointerException`源行号可以帮助更好地找到解决方案。

# javascript - 如何使用 jQuery 或纯 JavaScript 检索 Unicode 转义序列？

> ID：12992328
> 
> 赞同：2
> 
> 时间：2012-10-20T20:20:35.983
> 
> 标签：javascript, jquery, unicode

我能够动态生成一个 Unicode 字符，并`<div>`通过使用类似的序列将其插入到 a 中`&#x00f0;`，但现在我想将此输入检索为转义序列，而不是字符本身。

请参阅[此 JSFiddle 示例](http://jsfiddle.net/hSNfG/2/)：

```
<button id="insertDh">insert funny d to mytext</button>
<div id="mytext"><i>mytext: please click button above</i></div>
<hr>
<textarea id="theSource"></textarea>
<button id="getSource">get mytext's source</button>

$("#insertDh").click(function() {
    $("#mytext").html("&#x00f0;");
});

$("#getSource").click(function() {
   $("#theSource").val($("#mytext").html()); 
});​ 
```

也就是说，当我点击“get mytext's source”时，我想在textarea中填入`&#x00f0;`而不是ð。这可能吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T20:52:17.150

```
$("#theSource").val(
    $("#mytext").html()
    // Replace non-ascii code-points with HTML entities.
    .replace(
      /[\ud800-\udbff][\udc00-\udfff]|[^\x00-\xff]/g,
      function (nonAscii) {
        var codepoint;
        if (nonAscii.length === 1) {  // A single basic-plane codepoint.
          codepoint = nonAscii.charCodeAt(0);
        } else {  // A surrogate pair representing a unicode scalar value.
          codepoint = 0x10000 + (
            ((nonAscii.charCodeAt(0) & 0x3ff) << 10)
             | (nonAscii.charCodeAt(0) & 0x3ff));
        }
        return '&#x' + codepoint.toString(16) + ';';
      })); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T20:46:10.147

您可以使用`charCodeAt()`获取十进制字符码，然后使用 将其转换为十六进制`toString(16)`，如下所示：

```
 temp = $("#mytext").html().charCodeAt(0).toString(16);
   while (temp.length < 4) {
      temp = '0'+temp; //complete hex number with zeros to obtain four digits
   }
   temp = '&#x' + temp + ';';
   $("#theSource").val(temp); 
```

查看工作[**演示**](http://jsfiddle.net/hSNfG/7/)

# jquery - 如何从多个 html 列表中的属性构建数组？

> ID：12992332
> 
> 赞同：1
> 
> 时间：2012-10-20T20:21:25.843
> 
> 标签：jquery, multidimensional-array, html-lists

我正在尝试从多个 div 的无序列表中获取多个属性，如下所示：

```
 <div class="graph" style="display:none;">
        <ul g-max='10'>
            <li g-color='green' g-val='4'></li>
            <li g-color='blue' g-val='3.6'></li>
            <li g-color='red' g-val='8'></li>
        </ul>
    </div>

    <div class="graph" style="display:none;">
        <ul g-max='14'>
            <li g-color='green' g-val='2'></li>
            <li g-color='blue' g-val='9'></li>
            <li g-color='red' g-val='3.98'></li>
        </ul>
    </div> 
```

我正在尝试使用 jQuery 执行此操作，并且正在使用以下内容：

```
 var graph_array = [];

    $('.graph').each(function(divind)
    {
          $('ul').each(function(ulind)
          {
               $('li').each(function(liind)
               {
                     graph_array[divind][ulind][liind]['g-val'] = $(this).attr('g-val');
                     graph_array[divind][ulind][liind]['g-color'] = $(this).attr('g-color');
               });
          });
    });
    alert(graph_array); 
```

但是，即使我四处移动并尝试不同的技术，例如`.map()`or `.toArray()`，也没有任何效果。有任何想法吗？提前致谢！

编辑：我想要一个看起来像这样的最终结果：

```
 [{
       {
         {g-color:green, g-val:4},{g-color:blue, g-val:3.6},{g-color:red, g-val:8}
       },
       {
         {g-color:green, g-val:2},{g-color:blue, g-val:9},{g-color:red, g-val:3.98}
       }
    }] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T20:41:45.637

您需要实例化数组或预填充它们。像这样，例如：

```
var graph_array = [];
$('.graph').each(function(divind, e)
{
      $(e).find('ul').each(function(ulind, e)
      {
           $(e).find('li').each(function(liind, e)
           {
               // create level 1 sub-array, or use existing
               var level1 = (graph_array[divind] || (graph_array[divind] = []));

               // create or re-use level #2 sub-array
               var level2 = (level1[ulind] || (level1[ulind] = []));

               // create a property map
               var map = (level2[liind] = {});
               map ['g-val'] = $(e).attr('g-val');
               map ['g-color'] = $(e).attr('g-color');
           });
      });
});
// display as a string
alert(JSON.stringify(graph_array));​ 
```

请参阅此处的工作示例：http: [//jsfiddle.net/Q57W5/5/](http://jsfiddle.net/Q57W5/5/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T20:32:46.840

这里要注意的主要事情是您没有初始化您尝试附加到的数组。您需要为每个组初始化一个数组。这里要做的另一件事是利用`each`函数的范围及其两个参数之一。

```
$.each($(element_array),function(index,elem){
  // $(this)
  // $(elem) 
}); 
```

我列出了两种可互换的方式，您可以使用 the 范围`each`并使用`this`关键字。当你在循环的每次迭代中`each`，当前项都可以在`$(this)`变量中找到。你也可以使用`$(elem)`.

如果您有嵌套`each`命令，我发现最好为每个嵌套循环使用不同的变量，而不是使用`this`. 我觉得它不那么令人困惑。

所以基本上你需要做的是使用相对当前变量在其死者中搜索。

```
var graph_array = [];

$('.graph').each(function(divIndex,currentDiv) {
  if (graph_array[divIndex] == undefined){ graph_array[divIndex] = []; }
  $(currentDiv).find('ul').each(function(ulIndex,currentUl) {
    if (graph_array[divIndex][ulIndex] == undefined){ graph_array[divIndex][ulIndex] = []; }
    $(currentUl).find('li').each(function(liIndex,currentLi) {
      if (graph_array[divIndex][ulIndex][liIndex] == undefined){ graph_array[divIndex][ulIndex][liIndex] = []; }     
      graph_array[divIndex][ulIndex][liIndex]['g-val'] = $(currentLi).attr('g-val');
      graph_array[divIndex][ulIndex][liIndex]['g-color'] = $(currentLi).attr('g-color');
    });
  });
});

console.log(graph_array);​ 
```

### [现场演示](http://jsfiddle.net/GG4uy/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T20:35:15.590

做这样的事情： -

```
var graphArray = new Array();
$(".graph ul li").each(function(i) {
    graphArray[i] = $(this).attr("g-color") + ":" + $(this).attr("g-val");
});

alert(graphArray); 
```

# objective-c - 从另一个控制器执行 segue

> ID：12992335
> 
> 赞同：0
> 
> 时间：2012-10-20T20:22:27.040
> 
> 标签：objective-c, delegates, tableview, uistoryboard, segue

这是我的情况。我有两个表视图。在一个视图中搜索两个表视图后，我找到了制作 2 个额外控制器的解决方案。即tbl1DatasourceDelegate和tbl2DatasourceDelegate。现在，当我推动一个单元格时，它应该转到另一个 viewController。我的 tbl1DatasourceDelegate 中有这段代码。

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    PlayerNews *news = [_tableSource objectAtIndex:indexPath.row];
    PlayerDetailController *detail =[[PlayerDetailController alloc]init];

    [detail setNewsItem:news];
} 
```

因此，当我选择一个单元格时，我会创建一个 playerNewsObject 并将其发送回我的控制器，其中包含 2 个表格视图。当我回到我的控制器中时，里面有两个表视图。（我从其中分离的控制器）我执行函数*setNewsItem*在这里您可以看到代码。

```
 -(void)setNewsItem:(PlayerNews *)newsItem{
        if(![_newsItem isEqual:newsItem]){
            _newsItem = newsItem;
        }
       NSLog(@"Player detail controller newsItem object: %@", _newsItem);
       [self performSegueWithIdentifier:@"PlayerDetailNews" sender:tblNews];

    } 
```

执行此代码是因为我的日志显示了我在 tableview 上推送的 newsItem。但它不会继续下去。我正在使用以下 prepareForSegue。

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    NSLog(@"comes in this segue");
    // ask NSFRC for the NSMO at the row in question
    if ([segue.identifier isEqualToString:@"PlayerDetailNews"]) {
        [segue.destinationViewController setImageURL:[NSURL URLWithString:_newsItem.image]];
        [segue.destinationViewController setNewsTitle:_newsItem.title];
        [segue.destinationViewController setNewsDescription:_newsItem.content];
        [segue.destinationViewController setNewsCopy:_newsItem.image_copyright];
        [segue.destinationViewController setNewsUrl:_newsItem.url];
        [segue.destinationViewController setNewsShortDescription:_newsItem.summary];
    }
} 
```

它没有出现在这种方法中，因为它不打印日志。它崩溃并出现以下错误。

```
** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'Receiver (<tblPlayerNewsDatasourceDelagete: 0x1e5e44c0>) has no segue with identifier 'showPlayerDetailNews'' 
```

有谁能够帮助我？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T19:37:54.887

无法启动 segue 的两个原因：

1) segue 标识符的拼写错误。仔细检查情节提要中使用的标识符和您的代码。旁注：标识符在故事板中不必是唯一的，仅适用于每个视图控制器。假设您有一个视图控制器**A**与 B 的 segue**和**一个与**B**的 segue的视图控制器**C**，它们被允许具有相同的标识符。

 **2) 尝试启动一个未连接到您尝试从中启动它的 UIViewController 的 segue。例如：你有 segue 'segueA' 将 viewcontroller **A**连接到**B**。在这种情况下，您唯一可以使用的地方`[self performSegueWithIdentifier:@"segueA" sender:nil]`是**A**。**

# objective-c - 如何隐藏 UINavigationBar

> ID：12992336
> 
> 赞同：1
> 
> 时间：2012-10-20T20:22:41.907
> 
> 标签：objective-c, cocoa-touch, view, uinavigationbar

是否可以放置覆盖导航栏的视图（对象）？我根本放不下。它总是隐藏在导航下。酒吧。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-20T20:37:11.460

我不建议尝试覆盖您的导航栏，因为它的存在是有原因的。但是，要完全隐藏它，您可以向导航控制器发送该`setNavigationBarHidden:animated:`方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-20T20:45:33.533

您可以在其中一个 viewController 的 viewDidLoad 中执行以下操作：

```
- (void)viewDidLoad 
{
    [super viewDidLoad];
    UIView* navigationBarCover = [[UIView alloc] initWithFrame:self.navigationController.navigationBar.frame];
    navigationBarCover.backgroundColor = [UIColor blackColor];
    [self.navigationController.view addSubview:navigationBarCover];
} 
```

您还可以隐藏 navigationBar 并将视图放在 viewControllers 视图上：

```
- (void)viewDidLoad 
{
    [super viewDidLoad];
    [self.navigationController setNavigationBarHidden:YES animated:NO];
    UIView* navigationBarCover = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 44)];
    navigationBarCover.backgroundColor = [UIColor redColor];
    [self.view addSubview:navigationBarCover];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-06T15:25:11.170

如果您`UIViewController`在 a 下，`UITabBarController`则在调用`[self navigationController]`after 之前不会设置`viewDidLoad`它，因为在选择相应的选项卡之前不会确定其布局。到那时`[self navigationController]`，iOS 可能已经更改了状态，以便导航栏再次可见。

对于影响视图布局的更改，最好在`UIViewController`方法中执行这些操作`viewDidLayoutSubviews`。`UIViewController`如果有一个，将始终设置执行中的哪个点，`[self navigationController]`并且 iOS 不会进一步更改其状态。

`viewDidLoad`理想情况下，应该只用于实例化视图的内容，而不是在布局中定位它们。由于更改导航栏的可见性会影响视图的布局，因此在其中设置其可见性`viewDidLoad`可能会导致未定义的行为。

```
- (void) viewDidLayoutSubviews {
    [super viewDidLayoutSubviews];
    [[self navigationController]
        setNavigationBarHidden:YES
        animated:NO];
} 
```

# swing - Java Swing：开源甘特图库

> ID：12992340
> 
> 赞同：10
> 
> 时间：2012-10-20T20:22:51.943
> 
> 标签：swing, charts, java, gantt-chart

我正在为 Java Swing 寻找一个好的开源甘特图库。我尝试了 JFreeChart，但它无法绘制子任务。我也尝试过使用[SwiftGantt](http://sourceforge.net/projects/swiftgantt/)。它可以绘制子任务，但它有点不稳定，外观和感觉不专业:(。

可以推荐其他人吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T16:50:47.030

JFreeChart 提供甘特图。看看这个 [链接](http://www.java2s.com/Code/Java/Chart/JFreeChartGanttDemo1.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-05T02:33:23.397

这很可能只是部分答案，但您是否考虑过在 JFXPanel 中嵌入 JavaFX 图表？JavaFX 具有出色的图表制作功能，是标准 Java 7 运行时环境的一部分。我相信甘特图即使不是一种内置的可能性，也可以在课堂上快速实现。

# d3.js - 底层数据发生变化时如何更新D3强制布局的元素

> ID：12992351
> 
> 赞同：21
> 
> 时间：2012-10-20T20:24:16.767
> 
> 标签：d3.js, force-layout

我正在使用其中一个强制布局示例 ( [http://bl.ocks.org/1153292](http://bl.ocks.org/1153292) ) 在我的网站上显示一个网络。

我允许用户在任何给定时间选择要查看的链接类型。我注意到，当我选择查看链接类型 A，然后添加链接类型 B，然后删除链接类型 A 时，类型 B 的剩余链接将显示为 A 颜色。

这是运行以将链接添加到 svg 图的代码。我正在`this.links`通过添加和删除链接来更改数组。如您所见，我设置了类属性，但它没有更新 - 它仍然是链接 A 的类型。

```
var path = svg.append("svg:g")
    .selectAll("path")
    .data(this.links)
   .enter()
    .append("svg:path")
    .attr("class", function(d) { return "link " + d.type; })
    .attr("marker-end", function(d) { return "url(#" + d.type + ")"; }); 
```

我目前通过更新 tick 函数中的类属性来解决这个问题，但这当然会导致很多不必要的工作。

我读到 enter 操作返回现有元素和新元素的合并选择，因此 attr 操作应该更新现有元素并设置新元素。

我错过了什么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-23T21:26:50.863

我[在这篇文章中找到了答案](http://bost.ocks.org/mike/join/)

```
var circle = svg.selectAll("circle")
    .data(data);

circle.enter().append("circle")
    .attr("r", 2.5);

circle
    .attr("cx", function(d) { return d.x; })
    .attr("cy", function(d) { return d.y; });

circle.exit().remove(); 
```

答案是我需要在 selectAll.data 的结果上调用 attr 运算符，而不是在 append 运算符的结果上。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-20T21:15:50.087

[http://bl.ocks.org/1095795](http://bl.ocks.org/1095795)中有一个示例，显示了从强制定向布局中添加和删除节点。必须分别处理链接和节点，然后必须重新启动力布局。

```
function restart() {
  var link = vis.selectAll("line.link")
      .data(links, function(d) { return d.source.id + "-" + d.target.id; });

  link.enter().insert("svg:line", "g.node")
      .attr("class", "link");

  link.exit().remove();

  var node = vis.selectAll("g.node")
      .data(nodes, function(d) { return d.id;});

  var nodeEnter = node.enter().append("svg:g")
      .attr("class", "node")
      .call(force.drag);

  nodeEnter.append("svg:image")
      .attr("class", "circle")
      .attr("xlink:href", "https://d3nwyuy0nl342s.cloudfront.net/images/icons/public.png")
      .attr("x", "-8px")
      .attr("y", "-8px")
      .attr("width", "16px")
      .attr("height", "16px");

  nodeEnter.append("svg:text")
      .attr("class", "nodetext")
      .attr("dx", 12)
      .attr("dy", ".35em")
      .text(function(d) { return d.id });

  node.exit().remove();

  force.start();
} 
```

# web-services - 播放：二进制 web 服务响应

> ID：12992354
> 
> 赞同：6
> 
> 时间：2012-10-20T20:25:13.677
> 
> 标签：web-services, scala, playframework-2.0

我必须调用一个提供二进制文件内容的网络服务。我只想将相同的内容返回给我的控制器的调用者：

```
val blobPromise = WS.url("http://url/to/webservice/file.txt").get()
Async {
  blobPromise.map(f => Ok(f.body))
} 
```

这适用于文本文件，但二进制文件会损坏。我在这里做错了什么？（也许它是`f.body`将来自网络服务的二进制结果编码为字符串？但我怎样才能获得原始数据？）

我知道，这不是处理大文件的好方法——我在 Play 文档中阅读了有关[Streaming HTTP 响应](http://www.playframework.org/documentation/2.0.4/ScalaStream)的内容，但对于 Play 框架的初学者来说，这似乎很复杂。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-20T21:07:57.180

您可以使用`f.ahcResponse.gerResponseBodyAsBytes`. 但我认为，这会将整个响应加载到内存中，这是低效的。

您可以使用 Play 的流媒体功能！像这样很容易提供：

```
Async {
  WS.url("http://url/to/webservice/file.txt").get().map(response => {
    val asStream: InputStream = response.ahcResponse.getResponseBodyAsStream
    Ok.stream(Enumerator.fromStream(asStream))
  })
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-18T12:08:39.360

如果要流式传输内容：

```
def streamFromWS = Action.async { request =>
  import play.api.libs.iteratee.Concurrent.joined

  val resultPromise = Promise[SimpleResult]

  val consumer = { rs: ResponseHeaders =>
    val (wsConsumer, stream) = joined[Array[Byte]]
    val contentLength = rs.headers.get("Content-Length").map(_.head).get
    val contentType = rs.headers.get("Content-Type").map(_.head).getOrElse("binary/octet-stream")
    resultPromise.success(
      SimpleResult(
        header = ResponseHeader(
          status = OK,
          headers = Map(
            CONTENT_LENGTH -> contentLength,
            CONTENT_DISPOSITION -> s"""attachment; filename="file.txt"""",
            CONTENT_TYPE -> contentType
          )),
        body = stream
      ))
    wsConsumer
  }

  WS.url("http://url/to/webservice/file.txt").get(consumer).map(_.run)

  resultPromise.future
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-10T13:46:50.267

根据 Yann Simon 的回答，这是一个简单的 CORS 代理实现，它允许流式传输下载的远程文件并将它们流式传输到客户端。它不会加载内存中的所有文件。

```
 import play.api.libs.iteratee._

  private def getAndForwardStream(requestHolder: WSRequestHolder)(computeHeaders: ResponseHeaders => ResponseHeader): Future[SimpleResult] = {
    val resultPromise = scala.concurrent.Promise[SimpleResult]
    requestHolder.get { wsResponseHeaders: ResponseHeaders =>
      val (wsResponseIteratee, wsResponseEnumerator) = Concurrent.joined[Array[Byte]]
      val result = SimpleResult(
        header = computeHeaders(wsResponseHeaders),
        body = wsResponseEnumerator
      )
      resultPromise.success(result)
      wsResponseIteratee
    }
    resultPromise.future
  }

  def corsProxy(url: URL) = Action.async { implicit request =>
    val requestHolder = WS.url(url.toString).withRequestTimeout(10000)
    getAndForwardStream(requestHolder) { wsResponseHeaders: ResponseHeaders =>
      // We use the WS response headers and transmit them unchanged to the client, except we add the CORS header...
      val originToAllow = request.headers.get("Origin").getOrElse("*")
      val headers = wsResponseHeaders.headers.mapValues(_.head) + ("Access-Control-Allow-Origin" -> originToAllow)
      ResponseHeader(
        status = wsResponseHeaders.status,
        headers = headers
      )
    }
  } 
```

这里的重要部分是使用`play.api.libs.iteratee.Concurrent.joined[Array[Byte]]`. 它允许创建一个 Iteratee/Enumerator 对，以便每当您向 Iteratee 添加字节时，这些字节将由枚举器枚举。

这是缺少的部分，因为：

*   您需要一个 Iteratee 来使用 WS 响应。
*   您需要一个 Enumerator 来生成播放框架响应。

# objective-c - NSTextField 打印在页面的中心

> ID：12992355
> 
> 赞同：2
> 
> 时间：2012-10-20T20:25:20.103
> 
> 标签：objective-c, macos, printing

当我使用 NSTextField 打印时，内容显示在页面的中心，而不是在左上角对齐：

```
NSTextView *printView = [[NSTextView alloc] initWithFrame:NSMakeRect(0, 0, 468, 648)];
[printView setString:text];
[printView autorelease];

[[NSPrintOperation printOperationWithView:printView] runOperation]; 
```

我也试过

```
NSPrintInfo *printInfo = [NSPrintInfo sharedPrintInfo];
[printInfo setVerticallyCentered:NO];
[printInfo setHorizontallyCentered:NO]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T21:02:47.570

> **OSX Objective-C 打印模板**
> 
> 我正在为 OS X 构建一个应用程序，我想添加一个简单的打印功能，但我发现似乎没有简单的方法可以做到这一点。我有一些文本要与标题一起打印。是否有某种模板可供我使用并添加我自己的文本？

如果您`NSPrintOperation`进入文档搜索字段，您将看到相关的示例代码。

这样做：Apple 提供了许多使用此类的示例。TextEdit 示例还说明了打印的自定义。

# c# - PasswordVault Windows Phone 等价物？

> ID：12992357
> 
> 赞同：3
> 
> 时间：2012-10-20T20:25:53.847
> 
> 标签：c#, windows-phone-7, encryption, windows-8

Windows Phone 7 中是否有与 Windows.Security.Credentials.PasswordVault (Windows 8) 等效的功能，如果没有，实现类似功能的最佳方法是什么？对本地设置进行 AES 或 XOR 加密就足够了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T20:50:44.357

您可以使用[ProtectData](http://msdn.microsoft.com/en-us/library/system.security.cryptography.protecteddata%28VS.95%29.aspx)类加密数据，然后将其存储在隔离存储中。它应该对您的密码足够安全。

# bash - 如何将 tcp 数据从 netcat 放到变量中？

> ID：12992362
> 
> 赞同：0
> 
> 时间：2012-10-20T20:26:13.597
> 
> 标签：bash, tcp, client-server, pipe, netcat

`nc - lk <port>`我已经使用通常的命令设置了服务器。

我的客户端以 xxx,yyy 的形式将 tcp 数据发送到服务器套接字，它们是数字。

我希望每次客户端连接时将 xxx 和 yyy 的值存储在变量中以便以后使用它们。

据我了解，我必须使用管道，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T22:08:54.550

你有两个选择：

1.  将输出通过管道传输到文件以供以后读取
2.  阅读每一行并实时处理它：

例如：

```
nc -lk 8889 | while IFS=, read -a p
do echo ${p[1]} ${p[0]}
done 
```

# c# - 使用 C# 以编程方式创建和信任 SSL 证书？

> ID：12992363
> 
> 赞同：2
> 
> 时间：2012-10-20T20:26:19.917
> 
> 标签：c#, ssl, https, webserver

我正在尝试创建一个使用 HTTPS 的小型 C# Web 服务器。我决定使用[这个 WebServer 库](http://webserver.codeplex.com/)，因为它似乎可以完成我正在寻找的一切。在 SSL/TLS 方面，我不是知识最渊博的人，所以我想知道是否有人可以帮助我让它的 HTTPS 部分正常工作。基本上，我需要它来创建一个可与 Web 服务器库一起使用的 SSL 证书（[在此示例](http://webserver.codeplex.com/wikipage?title=HttpListener&referringTitle=Examples)中，它看起来像是使用 X.509 证书），然后将该证书添加到计算机和/或当前的受信任证书中用户。

这是我到目前为止的代码（基本上只是从示例中复制和粘贴）：

```
var certificate = new X509Certificate2("C:\\Certs\\certificate.dat", "password");

// We do the cast since we want to specify UseClientCert
var listener = HttpListener.Create(System.Net.IPAddress.Any, 8080, certificate);
listener.RequestReceived+=listener_RequestReceived;
listener.Start(5); 
```

在该代码之前的某个地方，我需要检查“C:\Certs\certificate.dat”是否存在并且受计算机信任，如果不存在，它应该创建证书并信任它。

应用程序运行提升，因此权限问题应该不是问题

编辑1：看起来我应该解释一下我到底想要做什么。我正在尝试创建一个程序，该程序在运行时将启动要在本地计算机上使用的 HTTPS Web 服务器。我并没有尝试使用密钥进行任何类型的真正验证，只是为了让计算机访问 HTTPS 本地页面而不会收到大量“OMG THIS PAGE DOESNT HAVE N GOOD SECURITY KEY!!!” 错误。它仅用于测试和非敏感数据，因此实际安全性并不那么重要，只要它有效。

在代码方面，我使用[这个 WebServer 库](http://webserver.codeplex.com/)来处理实际的 Web 服务，代码[来自这个示例](http://webserver.codeplex.com/wikipage?title=HttpListener&referringTitle=Examples)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T00:19:32.593

您不需要在 C# 代码中创建证书，您可以在程序中自带（即由[makecert 制作](http://msdn.microsoft.com/en-US/library/bfsktky3%28v=VS.80%29.aspx)）。要检查它是否已经安装 itearate 对应`X509Store`的，看看它是否已经安装，如果没有 - 添加一个。示例可以在[StoreName 枚举](http://msdn.microsoft.com/en-us/library/system.security.cryptography.x509certificates.storename.aspx)主题中找到。

以下是您需要从 MSDN 上的示例中操作商店/证书的随机行：

```
X509Store store = new X509Store(StoreName.My);
store.Open(OpenFlags.ReadWrite);
X509Certificate2 certificate1 = new X509Certificate2("c:\\mycerts\\*****.cer");
store.Add(certificate1);
foreach (X509Certificate2 x509 in storecollection)
{
  Console.WriteLine("certificate name: {0}", x509.Subject);
} 
```

笔记：

*   添加证书是特权操作，可能需要某些商店的管理员特权。
*   您可以查看 Fiddler 的证书行为，看看您是否想要类似的提示。（启用 HTTPS 解密时，Fiddler 会安装自己的证书）。

# javascript - TinyMCE 使用有效元素去除内联样式：*[*] 和 Codeigniter

> ID：12992367
> 
> 赞同：5
> 
> 时间：2012-10-20T20:26:58.687
> 
> 标签：javascript, codeigniter, attributes, tinymce, strip-tags

我已阅读[Tinymce 在提交时剥离属性](https://stackoverflow.com/questions/7190542/tinymce-strips-attributes-on-submit)， [TinyMce 允许所有 Html 标记](https://stackoverflow.com/questions/6266487/tinymce-allow-all-html-tag)，[TinyMCE 有效元素：仅允许特定的 CSS 规则](https://stackoverflow.com/questions/5165586/tinymce-valid-elements-only-allow-specific-css-rules)，[如何防止 tinymce 从输入元素中剥离 'style' 属性？](https://stackoverflow.com/questions/10290121/how-to-prevent-tinymce-from-stripping-the-style-attribute-from-input-element)，[TinyMCE，允许数据属性](https://stackoverflow.com/questions/7744903/tinymce-allow-data-attribute)和许多其他...

但它们都不起作用。

这是我的代码：

```
valid_elements : '+*[*]',
cleanup: false,
inline_styles : true 
```

我也试过

```
valid_elements : '*[*]' 
```

（没有`+`之前`*[*]`）

乃至

```
valid_children : '+body[style]' 
```

但是当我手动添加样式`style="color: #fff;"`并提交表单时，TinyMCE 会删除返回的输出。

**换句话说：我希望 TinyMCE 停止自动“删除”任何代码。**

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-21T08:13:39.117

## **不**，阻止内联样式的不是 TinyMCE。

# **CodeIgniter**做到了。

即使现在我已经使用以下方法手动禁用了 XSS 过滤：

```
$body = $this->input('body', FALSE); 
```

，这仍然被删除**，因为我在以下位置启用了 XSS 过滤`application/config/config.php`**：

```
$config['global_xss_filtering'] = TRUE; 
```

* * *

但是当我把它改成

```
$config['global_xss_filtering'] = FALSE; 
```

问题已解决，我摆脱了服务器端过滤。

* * *

我在这里发布答案，我希望没有其他人像我一样疯狂和疯狂！

# matlab - 如何在循环中分配对象

> ID：12992369
> 
> 赞同：0
> 
> 时间：2012-10-20T20:27:30.047
> 
> 标签：matlab, for-loop

Matlab代码：

```
% Performs Inner Filter Calculation using the UV absorbance spectrum.
ex_abs=absint(exabsstart:exinc:exabsend,:);
em_abs=absint(emabsstart:eminc:emabsend,:);
for i=1:length(em_abs)
    for j=1:(length(ex_abs))
        IFC(i,j)=ex_abs(j)+em_abs(i);
    end
end
Aci = A.*10.^(0.5*IFC); %This is the IFC.  
Warning: Integer operands are required for colon operator when used as index 
Undefined function or variable 'IFC'. 
```

`IFC`未在 for 循环中定义，并且代码在`Aci =`语句处停止（因为`IFC`未定义）。有没有办法`IFC`在循环中定义？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T20:32:55.827

您应该在循环之前添加以下初始化：

```
 IFC=zeros(length(em_abs),length(ex_abs)); 
```

# sql-server - 根据另一列的值更改一列的值

> ID：12992373
> 
> 赞同：0
> 
> 时间：2012-10-20T20:27:40.450
> 
> 标签：sql-server, tsql

可以说我有一张这样的桌子......

```
ITEM#     ItemType     SIZE
1         Car          5.20
2         Watch        2.00
3         Watch        7.50
4         Watch        6.40
5         Car          5.00
6         Car          4.30 
```

我想选择所有行，但只要 ItemType = 'Car' 我希望 SIZE 的值返回为空。

我试过使用

```
CASE When ItemType = 'Car'
Then SIZE = null
END 
```

但这不起作用。

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T20:30:39.460

可能是因为其他行缺少值，请尝试以下操作：

```
SELECT
    ITEM,
    ItemType,
    CASE
        WHEN ItemType = 'Car' THEN null
        ELSE Size
    END
FROM table 
```

# xcode - 如何使用延迟位置 iOS 6？

> ID：12992380
> 
> 赞同：5
> 
> 时间：2012-10-20T20:28:23.670
> 
> 标签：xcode, location, ios6

我正在尝试使用延迟位置更新的新 iOS 6 功能，但不断收到此错误：

> didFinishDeferredUpdatesWithError :Error Domain=kCLErrorDomain Code=11 “操作无法完成。（kCLErrorDomain 错误 11。）”

我正在使用以下代码：

```
- (DeviceAPI *) init
    {
     locationManager = [[CLLocationManager alloc] init];
     [locationManager setDelegate:self];
     [locationManager setDesiredAccuracy:kCLLocationAccuracyBest];
     [locationManager startUpdatingLocation];
     [locationManager allowDeferredLocationUpdatesUntilTraveled:(CLLocationDistance)100000     timeout:(NSTimeInterval)100000];

    return self;
 } 
```

这个`callback`功能：

```
- (void)locationManager:    (CLLocationManager *)   manager
                        didFinishDeferredUpdatesWithError:(NSError *)error
{
    NSLog(@"didFinishDeferredUpdatesWithError :%@", [error description]);
} 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-24T19:33:53.880

根据 iOS 6.0 SDK 的 Apple Developer Forums，延迟位置更新仅适用于：

*   在 iPhone 5 硬件上
*   运行 iOS 6.0 或更高版本
*   所需的精度设置为`kCLLocationAccuracyBest`或`kCLLocationAccuracyBestForNavigation`因为这**需要**GPS 芯片。没有蜂窝数据的 iPad 没有 GPS 芯片。
*   调用“startUpdatingLocation”方法
*   等待大约每秒 1 次的位置更新
*   然后开始推迟更新

~~请参阅：[https ://devforums.apple.com/message/751974#751974](https://devforums.apple.com/message/751974#751974)~~

请参阅文档：[`allowDeferredLocationUpdates(untilTraveled:timeout:)`](https://developer.apple.com/documentation/corelocation/cllocationmanager/1620547-allowdeferredlocationupdates)

所以听起来你需要 iPhone 5 硬件，并等待 1Hz 的位置更新。

此外，正如另一张海报提到的，您需要`locationManager:didUpdateLocations:`在您的委托中实现该方法。

> 调用此 [ ] 方法的最常见位置`allowDeferredLocationUpdates`是在您的委托的 `locationManager(_:didUpdateLocations:)`方法中。处理任何新位置后，如果您想推迟将来的更新，直到满足距离或时间条件，请调用此方法。如果有新事件到达并且您的应用程序在后台，则会缓存这些事件并适当延迟它们的传递。
> 
> [来自[文档](https://developer.apple.com/documentation/corelocation/cllocationmanager/1620547-allowdeferredlocationupdates)。我在里面添加了注释`[]`]。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T00:30:41.177

在我的测试中，我发现延迟更新仅适用于 iOS 6.0.1 或更高版本，但不适用于 6.0。我在 2 部手机上进行了测试，其中 1 部是我更新的，1 部是出于测试原因使用 6.0 离开的。我相信这就是模拟器无法运行的原因，如果您的手机尚未更新，很可能也无法运行。

还要确保你实施

– locationManager:didUpdateLocations:

而不是现在已弃用的

– locationManager:didUpdateToLocation:fromLocation:

因为它需要与延迟位置更新一起使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T18:14:55.273

您是否在 info.plist UIBackgroundModes 字段中设置了位置？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-08T19:58:08.517

在调用 allowDeferredLocationUpdatesUntilTraveled:timeout: 之前，将距离过滤器设置为 kCLDistanceFilterNone，然后它将起作用。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-05-22T20:27:00.650

我在 [CLRegion initCircularRegionWithCenter] 调用的一个框架示例中找到了此描述：

“如果覆盖的半径太大，注册会自动失败，所以将半径限制在最大值。”

# haskell - Haskell Integer 和 Int 类型；转换不起作用

> ID：12992385
> 
> 赞同：3
> 
> 时间：2012-10-20T20:28:55.483
> 
> 标签：haskell, types

我正在尝试解决 Project Euler 问题 59，我必须对具有三字符密钥（全小写）的消息进行异或解密。在 ASCII 中，这意味着所有键的集合是

```
let keys = [[a, b, c] | a <- [97..122], b <- [97..122], c <- [97..122]] 
```

并且以下函数将一起启发式地解密它：

```
decrypt :: [Int] -> [Int] -> [Char]
decrypt msg xs = map chr $ zipWith xor msg $ (concat . repeat) xs

try :: [[Int]] -> [Int] -> [Char]
try kys msg = head $ filter (isInfixOf "the") $ map (decrypt msg) kys 
```

基本上我一直在尝试密钥，直到其中一个解密消息以在其中包含“the”（我知道该消息具有常见的英文单词）。但是当我绑定`keys`并`message`运行时，`try keys message`我得到

```
Couldn't match expected type `Int' with actual type `Integer'
    Expected type: [[Int]]
      Actual type: [[Integer]]
    In the first argument of `try', namely `keys'
    In the expression: try keys message 
```

现在，即使我说它`let keys = [map fromIntegral [a, b, c] | a <- [97..122], b <- 97..122],, c <- [97..122]]`仍然说它有类型`Integer`而没有`Int`，当我尝试时`let keys = map (map fromIntegral) keys`，以及当我使用时`fromInteger`。这是怎么回事？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T20:38:03.970

问题是类型`keys`默认为`[[Integer]]`. 通过在定义时添加类型注释来覆盖它`keys`：

```
let keys = ... :: [[Int]] 
```

这是因为数字文字的类型（以及 的返回类型`fromIntegral`）是多态的，所以当您编写`let keys = ...`单[态限制](http://www.haskell.org/haskellwiki/Monomorphism_restriction)时，会启动并将数字类型默认为 ，`Integer`除非它们以其他方式受到限制。

```
> let x = 42 
> :t x
x :: Integer
> let y = 42 :: Int
> :t y
y :: Int 
```

另一种解决方案是禁用单态限制。然后将是一个多态值，当您尝试使用它时`keys`将专门用于该值。`[[Int]]`

```
> :set -XNoMonomorphismRestriction
> let x = 42
> :t x
x :: Num b => b 
```

# android - 安装时包含带有 Android 应用程序的 Ruboto-Core

> ID：12992389
> 
> 赞同：11
> 
> 时间：2012-10-20T20:30:03.287
> 
> 标签：android, ruby, ruboto

我正在尝试利用 Ruboto 轻松地在 JRuby 中编写 Android 应用程序。但是，当我使用 将应用程序安装到模拟器时`rake install`，它会产生副作用。

当我在模拟器上启动应用程序时，我看到一个带有 Ruboto 图像的屏幕，它告诉我为了继续，我需要安装 Ruboto Core 平台包。我怎样才能用我的主包做到这一点，这样用户就不需要自己安装 Ruboto Core？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-21T15:44:27.770

有几种方法可以解决这个问题。通常，想法是您将 jruby jar 包含在 apk 中，这会增加大小，但不需要用户单独下载核心。

创建应用程序时，您可以使用该`--with-jruby`标志，它会为您包含它。由于您已经创建了它，请在 app 目录中打开命令提示符并使用

```
ruboto update jruby --force 
```

这也会为您将 jruby jar 添加到项目中。

请注意，为了做到这一点，您必须安装 jruby-jars，这可以通过以下方式轻松完成`gem install jruby-jars`

编辑：Uwe Kubosch 告诉我，您也可以`ruboto gen jruby`在应用程序目录中使用来完成同样的事情。

# linq - 针对 Open XML 的 LINQ 查询

> ID：12992392
> 
> 赞同：0
> 
> 时间：2012-10-20T20:30:24.237
> 
> 标签：linq, openxml, openxml-sdk

我有之前从以下位置获得的 WorksheetPart 对象的 ID：

```
var id = document.WorkbookPart.GetIdOfPart(worksheetPart); 
```

现在我正在尝试使用 LINQ 取回对象。但是，我找不到上述对象的 ID 属性：

```
var worksheetPart = document.WorkbookPart.WorksheetParts.Where(x => x.??? == id).First(); 
```

我可以使用什么属性而不​​是??? 占位符？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T12:35:36.540

您没有找到 ID 属性 WorksheetPart 类，因为它不存在（请参阅[WorksheetPart 成员](http://msdn.microsoft.com/en-us/library/documentformat.openxml.packaging.worksheetpart_members.aspx)）。

以下代码应该为您提供所需的内容：

```
var TargetPart = document.WorkbookPart.GetPartByID(id); 
```

注意：**GetPartByID( *id* )**和**GetIdOfPart( *part* )**都是 WorkbookPart 类的成员

# c# - 在目录循环中排除子目录

> ID：12992393
> 
> 赞同：1
> 
> 时间：2012-10-20T20:30:31.473
> 
> 标签：c#, .net, subdirectory

在 .NET 代码中，我有一个循环，它从 D:\Temp 及其子目录中获取所有 .wav 文件：

```
string[] fileHolder = Directory.GetFiles("D:\\Temp","*.wav", SearchOption.AllDirectories); 
```

我想排除来自文件夹名称中包含“blablabla”的文件夹的所有 .wav 文件。

如何做到这一点？

PS这类似于[排除包含子目录的目录？](https://stackoverflow.com/questions/12646507/exclude-directories-that-contain-sub-directories/12984087#12984087)，但我无法成功使用该主题的答案。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-20T20:39:27.470

```
IEnumerable<string> files = 
   from f in Directory.GetFiles("D:\\Temp", "*.wav", SearchOption.AllDirectories)
   where !Path.GetDirectoryName(f).Contains("blablabla")
   select f; 
```

添加几个条件：

```
var files = from f in Directory.GetFiles("D:\\Temp", "*.wav", SearchOption.AllDirectories)
            let directoryName = Path.GetDirectoryName(f)
            where !directoryName.Contains("blablabla") &&
                  !direcotyName.Contains("foo")
            select f; 
```

另一种解决方案：（我认为 Path.GetDirectoryName 不是最快的操作）

```
public static IEnumerable<string> GetFiles(string path, string searchPattern,
                                           Func<string, bool> dirSelector)
{
    if (!dirSelector(path))
        yield break;

    foreach (var file in Directory.GetFiles(path, searchPattern))
        yield return file;

    foreach (var dir in Directory.GetDirectories(path))
        foreach (var file in GetFiles(dir, searchPattern, dirSelector))
            yield return file;
} 
```

用法：

```
Func<string, bool> dirSelector = (d) => !d.Contains("blablabla");
string[] files = GetFiles("D:\\Temp", "*.wav", dirSelector).ToArray(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-20T20:36:26.877

尝试以下操作：

```
string[] fileHolder = Directory.GetFiles(@"d:\temp", "*.wav",
         SearchOption.AllDirectories).Where(file => !file.Contains("blabla")).ToArray(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-20T20:35:50.537

您将不得不手动对它们进行分类：

```
List<string> result = new List<string>();
foreach(string filename in Directory.GetFiles("D:\\Temp", "*.wav"))
{
   if (!filename.Contains("blablabla"))
      result.Add(filename);
} 
```

# android - Android阻止在后台工作

> ID：12992394
> 
> 赞同：0
> 
> 时间：2012-10-20T20:30:32.603
> 
> 标签：android, service

我编写了一个注册 Smsreciever 的服务，并且总是在后台工作。另外，我想阻止我的主要活动在不使用该程序的情况下在后台工作。通常它可以工作，但有时我的活动在收到短信后在后台启动和运行，这会导致电池消耗，我该如何防止

```
public void onCreate()
{
    ...

    startService(new Intent(this,ServiceCommunicator.class));

    ...
}               

 public void onBackPressed() {

    super.onBackPressed();
    android.os.Process.killProcess(android.os.Process.myPid()) ;

      } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T20:49:20.117

关于你在做什么的一些注释：

1.  不建议终止您的进程。让服务继续。当您调用“startService”时，即使在活动关闭后它也应该继续。

2.  根据定义，后台服务可以在系统认为它需要内存时终止。如果您不想错过短信事件，请让您的服务在前台运行。

3.  您的服务使用的 CPU 和电池越多，操作系统决定杀死它的机会就越大。服务应该尽可能精简，如果他们长时间做大量工作，他们应该在前台。

4.  如果您的活动使用大量 CPU ，您的服务也可能在关闭应用程序时关闭，因为它们都属于同一个进程。您可以通过清单更改服务的流程。

# r - 数字数据框列顺序错误地作为字符串

> ID：12992397
> 
> 赞同：10
> 
> 时间：2012-10-20T20:30:42.897
> 
> 标签：r, dataframe

我在数据框中有一些医院数据，从 csv 读取。我尝试按用户定义的列排序数据框`col`，然后按医院的名称，如下所示：

```
col <- 'Hospital.30.Day.Death..Mortality..Rates.from.Pneumonia'
hospitals.sorted <- hospitals[order(hospitals[,col], hospitals$Hospital.Name),] 
```

但我想我错过了一些东西；它似乎`col`像字符串一样排序：

```
> hospitals.sorted
... # so far so good # ...
2749                                                   10.0
2831                                                   10.0
2891                                                   10.0
2837                                                   10.1
2824                                                   10.1
2774                                                   10.1
... # not so good # ...
2856                                                   15.7
2834                                                   15.9
2797                                                   16.0
2835                                                    7.4
2850                                                    7.7
2789                                                    8.1
... # there are some non-numeric values at the very bottom # ...
2806                                                    9.9
2867                                                    9.9
2884                                                    9.9
2808                                          Not Available
2913                                          Not Available
2911                                          Not Available 
```

只是为了确认该列实际上是数字：

```
> sapply(hospitals, mode)
Hospital.30.Day.Death..Mortality..Rates.from.Pneumonia 
"numeric" 
Hospital.Name 
"numeric" 
```

我不知道为什么`Hospital.Name`它显然不是数字。

我尝试过的其他事情无济于事：

*   使用`as.numeric(hospitals[,col])`里面`order`
*   排序前删除“不可用”值

我可能遗漏了一些基本的东西。哈！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-20T20:43:20.737

在数据帧中，各个组件必须是原子向量。您在提到的变量中同时包含数字和字符数据，因此 R 会将其读取为字符向量。但是，由于参数的默认设置`stringsAsFactors`，字符向量将被转换为因子。因此看起来数字被存储为数字。然而，这些只是标签，你被欺骗了。

同样，`mode()`电话也在欺骗你。考虑

```
> mode(factor(c(1:10, "a")))
[1] "numeric" 
```

然而，这显然不是“数字”数据。接下来考虑

```
> mode(factor(letters))
[1] "numeric" 
```

这掩盖了内部 R 的因子存储为数字变量的事实，这`mode()`就是告诉你的。`mode()`是这项工作的错误工具。

要测试变量是否为数字，请`is.numeric()`改用：

```
> is.numeric(factor(c(1:10, "a")))
[1] FALSE
> is.numeric(factor(letters))
[1] FALSE 
```

至于解决办法。“不可用”需要设置为`NA`。您可以在读取数据时通过添加`na.strings = "Not Available"`到`read.table()`（或您使用的任何包装器）调用来执行此操作。这应该足以理清字符>因子转换。

最重要的提示是始终查看`str()`应用于对象的输出，以检查 R 是否已按照您的意愿读取数据。所以你应该这样做：

```
str(hospitals) 
```

并注意根据 R 的变量类型。

关于您尝试过的其他事情：

1.  `as.numeric(hospitals[,col])`将生成包含因子每个元素的级别 ID 的数值向量。如果因子按特定顺序排序，那么它的级别表示也会如此。要将因子（标记为版本）转换为数字，您需要一个中间步骤：`as.numeric(as.character(hospitals[, col]))`. 不过，这并不能解决您在这里遇到的实际问题，因为您在变量中有字符数据，而 R 将无法将其转换为数字。它将转换`"Not Available"`为`NA`，如果您尝试过，这可能会奏效`as.numeric(as.character(hospitals[, col]))`。
2.  通过删除`"Not Available"`，我假设通过删除那些行/元素？，仍然会将剩余的观察结果留在一个因素中。由于上述原因，这将不起作用，因为它将在标签/级别上进行 alpha 排序。

# c++ - 关于为什么 windows 的 .dll 不适用于 linux 的详细信息

> ID：12992398
> 
> 赞同：0
> 
> 时间：2012-10-20T20:30:48.887
> 
> 标签：c++, windows, linux, dll, shared-libraries

我很好奇能够在 Linux 编译的 C++ 代码中使用在 Windows 中编译的最原始的 DLL 库。让我们假设有问题的库不是来自 Windows 核心的可怕的专有*东西；*

…只有一个带有假API的（这里是标题和实现）：

```
// MathFuncsDll.h

namespace MathFuncs
{
    class MyMathFuncs
    {
    public:
        // Returns a + b
        static __declspec(dllexport) double Add(double a, double b);

        // Returns a - b
        static __declspec(dllexport) double Subtract(double a, double b);
    };
}

// MathFuncsDll.cpp

#include "MathFuncsDll.h"

using namespace std;

namespace MathFuncs
{
    double MyMathFuncs::Add(double a, double b)
    {
        return a + b;
    }

    double MyMathFuncs::Subtract(double a, double b)
    {
        return a - b;
    }
} 
```

*这个库除了 <iostream> 之外没有其他依赖项，不是吗？*

Linux 编译的 .cpp 将包含以下内容：

```
// MyExecRefsDll.cpp
// compile with: /EHsc /link MathFuncsDll.lib

#include <iostream>

#include "MathFuncsDll.h"

using namespace std;

int main()
{
    double a = 7.4;
    int b = 99;

    cout << "a + b = " <<
        MathFuncs::MyMathFuncs::Add(a, b) << endl;
    cout << "a - b = " <<
        MathFuncs::MyMathFuncs::Subtract(a, b) << endl;

    return 0;
} 
```

[示例取自令人惊叹的 MSDN 教程。](http://msdn.microsoft.com/en-us/library/ms235636%28v=vs.80%29.aspx)

所以，为了明确我的问题：是什么阻止了 linux 编译器和链接工具`MathDuncsDll`像另一个 .so 一样使用无依赖的 .dll 库？也许，另一种调用语法？或者整个链接过程可能不同？*（我想听听细节，而不仅仅是模糊的“这些操作系统根本不同”和“不可能在另一个平台上使用某些东西”）*这些差异需要付出多少努力才能克服（我假设我们'不使用Wine）？

非常感谢您！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T20:42:39.477

这应该回答您的问题：[https](https://stackoverflow.com/a/1908981/856199) ://stackoverflow.com/a/1908981/856199 。

Windows 使用 COFF 格式，Linux 使用 ELF。这些不兼容。此外，Windows 和 Linux 有不同的 ABI（参见[http://en.wikipedia.org/wiki/Application_binary_interface](http://en.wikipedia.org/wiki/Application_binary_interface)）。这意味着代码，即使要加载和执行，也会导致垃圾，因为与系统其余部分的通信会被打乱。例如，一个函数会期望它的数据和代码以不同的顺序驻留在不同的地址中。尝试执行该代码的结果几乎是随机的。

当然，Linux 编译器可以使用 Windows ABI 并生成 COFF 文件。实际上，它可以而且确实如此；它被称为“交叉编译器”。我正在使用其中之一在 Linux 下构建 Windows 库和 *.exe 文件。但是由于 COFF 与 ELF 和 ABI 的差异，无法将相同的二进制文件同时用作 Linux .so 和 Windows .dll。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T20:51:43.110

不兼容的[应用程序二进制接口](https://stackoverflow.com/questions/2171177/what-is-application-binary-interface-abi)限制了使用一个工具链构建的程序不能在二进制级别上与使用其他工具链编译的程序一起工作。

例如，在 C++ 中的 Windows 上，异常传播遵循 Set Jump/Long Jump 模型，而在 Linux 中则遵循 Dwarf 2。如果您曾经在 Windows 上使用 MinGW 作为工具链，[TDM-GCC MinGW](http://tdm-gcc.tdragon.net/start)发行版允许您在二。

如果您想使用任何跨平台项目，则需要使用您一直用来构建其余程序的工具链来构建它，否则它们无法协同工作。

链接的 SO 答案包含有关此的更多详细信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T06:45:29.400

除了其他答案之外，Windows 和 Linux 中的链接还有不同的语义，请阅读[Levine 关于链接器和加载器的书](http://www.iecc.com/linker/)了解更多信息。

# php - WordPress pre_get_posts 不工作

> ID：12992401
> 
> 赞同：3
> 
> 时间：2012-10-20T20:30:58.203
> 
> 标签：php, mysql, sql, wordpress

一些背景：

*   我正在尝试替换存档模板的默认主查询，并返回自定义帖子类型（“天”）的子集，其中针对键“日期”的元值介于某个值之间
*   “days”自定义帖子类型有一个“dates”自定义变量字段，它将与该帖子关联的每个日期的各个数据库行存储在标准 wp_postmeta 表中，以 Epoch 格式（“U”）存储
*   我相当有信心 SQL 查询运行正常；对于查询的日期范围，它返回的帖子 ID 在每种情况下似乎都是正确的。

我在我的函数文件中运行以下查询：

```
 function modify_queries( $query ) { 
        global $wpdb;
        if ( $query->is_post_type_archive('days') && $query->is_main_query() ) {
            // Get Days with a date within the archive range
            $year = substr($query->query_vars['m'],0,4);
            $month = substr($query->query_vars['m'],4,2);
            $day = substr($query->query_vars['m'],6,2);

            if (is_year()) {
                $startDate = date('U', mktime(0, 0, 0, 1, 1, $year));
                $endDate = date('U', mktime(0, 0, 0, 12, 31, $year));
            }
            if (is_month()) {
                $startDate = date('U', mktime(0, 0, 0, $month, 1, $year));
                $endDate = date('U', mktime(0, 0, 0, $month, cal_days_in_month(CAL_GREGORIAN, $month, $year), $year));
            }
            if (is_day()) {
                $startDate = date('U', mktime(0, 0, 0, $month, $day, $year));
                $endDate = date('U', mktime(0, 0, 0, $month, $day, $year));
            }

            $request  = "SELECT ID FROM $wpdb->posts, $wpdb->postmeta";
            $request .= " WHERE $wpdb->posts.ID = $wpdb->postmeta.post_id";
            $request .= " AND post_status='publish' AND post_type='days'";
            $request .= " AND $wpdb->postmeta.meta_key = 'dates' AND $wpdb->postmeta.meta_value >= $startDate AND $wpdb->postmeta.meta_value <= $endDate LIMIT 0 , 30";
            $postsList = $wpdb->get_results($request,ARRAY_N);
            if ($postsList) {

                foreach ($postsList as $thePost) {
                    $thePostList[] = $thePost[0];
                }
                $query->set( 'post__in', $thePostList);
                $query->set( 'post_type', 'days');

                return;
            } else {
                return false;
            }

}
add_action( 'pre_get_posts', 'modify_queries',1 ); 
```

我的理解是，这应该获取查询的输出，并使用从 SQL 查询返回的 ID 替换普通查询 - 但是，它只是返回 5 个最近的“天”帖子。

目前，archive.php 文件仅包含以下内容，因此我们可以排除任何干扰：

```
<?
while ( have_posts() ) : the_post();
global $post;
the_title();
endwhile;
?> 
```

我得到了最近发布的 5 个“天”帖子，它似乎忽略了 pre_get_posts 过滤器应该通过它的 ID。

我有一个偷偷摸摸的怀疑，部分问题与在主查询上设置“post_id”有关，而不是“p”，但我似乎根本没有得到任何结果。

我四处寻找，但找不到太多关于 pre_get_posts 的文档，除了它作为 query_posts 的替代品有多么有用和有益。

实时调试输出：[http ://dev.daysoftheyear.com/days/2012/10](http://dev.daysoftheyear.com/days/2012/10)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T23:29:20.663

您可以在此处找到有关`pre_get_post`过滤器的文档[http://codex.wordpress.org/Plugin_API/Action_Reference/pre_get_posts](http://codex.wordpress.org/Plugin_API/Action_Reference/pre_get_posts)

在我看来，问题实际上是您如何设置要检索的 post_ids。如果您参考上面的链接，您可以看到可以在`$query`传递给过滤器的对象上设置的不同值，而`post_id`不是其中之一，这就是为什么当您设置它时它“有效”，并且“设置时不起作用” `p`。后者用于单个帖子 ID，因此如果您只想要 100，则可以使用`$query->set('p', 100)`. 如果要返回帖子 ID 在数组中的结果，请使用`$query->set('post__in', array(100, 120))`. 您的 SQL 代码只是返回 ID，因此您可以直接获取一个数组，而不是返回对象，我假设回显标题和`print_r`行只是调试：

```
// get results as a numeric array
$post_ids = $wpdb->get_results($request, ARRAY_N);
// pass post id array to $query
$query->set( 'post__in', $post_ids ); 
```

如果`$query`. 您可以检查这些值`var_dump($query->query_vars)`并将任何可能与空字符串冲突的值设置为 - 在您的情况下`$query->set( 'm', '' );`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T11:20:33.760

认为我已经成功了；给 'm' 一个空白值以阻止它认为这是一个基于日期的查询。谢谢！:)

# actionscript-3 - 防止图形中的交叉点相互抵消 - Actionscript

> ID：12992403
> 
> 赞同：0
> 
> 时间：2012-10-20T20:31:09.977
> 
> 标签：actionscript-3, graphics, alpha

在 Actionscript 中的 Graphics 对象上绘制多个形状时，交叉点会相互抵消。

有没有办法禁用这种默认行为？

我可以在绘图形状之间简单地使用 beginFill() 和 endFill() 方法。这种方法对我来说的问题是，每当我将 alpha 属性的值设置为 1 以外的任何值时，每个形状都会“混合在一起”。

基本上我想要的是一张由不同形状（例如圆圈）组成的实体图，因此当 alpha 值改变时，该图的不同部分不应该变得可见。

以下方法不起作用：

-2个圆圈被绘制但相交被取消

```
var solidShape = new Sprite();
solidShape.graphics.beginFill(0xFF0000)
solidShape.graphics.drawCircle(0,0,100)
solidShape.graphics.drawCircle(0,50,100)
solidShape.graphics.endFill() 
```

-2 圆圈被正确绘制，但是当我更改 alpha 值时它们变得可见

```
var solidShape = new Sprite();
solidShape.graphics.beginFill(0xFF0000)
solidShape.graphics.drawCircle(0,0,100)
solidShape.graphics.endFill()
solidShape.graphics.beginFill(0xFF0000)
solidShape.graphics.drawCircle(0,50,100)
solidShape.graphics.endFill()

solidShape.alpa = 0.5 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T21:14:56.743

[Flash 通过其“缠绕规则](http://help.adobe.com/en_US/as3/dev/WS1EE3740D-F65C-43bf-9B12-74E34D7D1CBE.html)”确定绘图的哪些部分位于填充区域内。在这种情况下，为圆圈创建的路径都朝着相同的方向，这使得它们相互抵消。

如果您使用[Advanced Drawing API](http://help.adobe.com/en_US/as3/dev/WSE06FE962-09BE-4460-B020-5CDC2E54C499.html)，您可以更改缠绕规则。不幸的是，这也意味着您失去了 drawCircle 方法的便利性，而您将不得不使用曲线。

这是[一个指南](http://www.adobe.com/devnet/flash/quickstart/drawing_commands_as3.html)，可以帮助您开始使用高级绘图 API。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T02:31:28.520

最简单的方法是在单独的 DisplayObject 中绘制每个形状，如下所示：

```
var shapes:Sprite = new Sprite();
var shape:Shape = new Shape();
shape.graphics.beginFill(0xFF0000);
shape.graphics.drawCircle(0,0,100);
shapes.addChild(shape);

shape = new Shape();
shape.graphics.beginFill(0xFF0000);
shape.graphics.drawCircle(0,50,100);
shapes.addChild(shape);

shapes.alpha = 0.5;
shapes.blendMode = "layer"; 
```

如果您尝试使用单个对象（例如与自身相交的用户绘制的形状）来执行此操作，RC 的答案将更好地满足您的需求。

# c# - XNA 为音乐文件创建游戏内文件浏览器

> ID：12992405
> 
> 赞同：0
> 
> 时间：2012-10-20T20:32:04.033
> 
> 标签：c#, xna, file-browser

所以我目前正在开发一款基于音乐的游戏。就像音频冲浪一样，用户选择他们的音频文件，然后游戏继续根据音乐处理关卡。目前我正在使用 FileDialog 来选择文件，但这仅适用于窗口模式。即使游戏全屏，用我的游戏实现类似功能的最简单方法是什么。我想实现类似于音频冲浪的东西，选择一个文件夹只需打开位置。

编辑屏幕截图以及音频文件浏览器的工作原理： ![在此处输入图像描述](../Images/3a2403d677baa8d2ac61d55ff7a348d2.png)

在用户开始游戏之前，必须选择一个音频文件。游戏开始时，它只是显示默认目录。用户可以通过单击文件夹来遍历目录，并且可以通过单击返回按钮返回。如果文件夹中存在音频文件，它将仅显示它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T21:14:03.450

I was able to implement this functionality using [Neoforce](http://neoforce.codeplex.com/) GUI library available for XNA.

# c - 将非常量参数传递给需要 const 参数的函数时发出警告。有没有更好的办法？

> ID：12992407
> 
> 赞同：6
> 
> 时间：2012-10-20T20:32:26.950
> 
> 标签：c, gcc, constants

我正在尝试将参数传递给函数，并指示`const`接收函数应考虑该参数。

我的理解是，以下代码示例显示了确保`test`可以使用`argv`未声明为 const 的变量调用函数的唯一方法。

```
void test(const char * const *arr);

int main(int argc, char *argv[], char *env[])
{
    test(argv);
}

void test(const char * const *arr)
{
} 
```

但是，gcc 给了我一个警告，如下所示：

```
E:\Projects\test>gcc -o test test.c
test.c: In function 'main':
test.c:5:2: warning: passing argument 1 of 'test' from incompatible pointer type
[enabled by default]
test.c:1:6: note: expected 'const char * const*' but argument is of type 'char **' 
```

这使我相信我在这里所做的事情在某种程度上是错误的。有没有更好的方法将参数传递给函数，并指示它应该`const`由接收函数考虑？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-20T20:47:34.270

[C FAQ](http://c-faq.com/ansi/constmismatch.html)解释了为什么在将指针转换为非`const`指向时在 C 中存在安全防护`const`。我认为，在您的双重`const`限定目标指针的情况下，不会发生所描述的问题。所以 C++ 有一个宽松的规则，允许你要求的隐式转换。不幸的是，对于 C，标准委员会发现 C++ 的规则过于复杂，因此您必须将指针转换为预期的类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T20:41:33.983

您可以将其转换为：

```
void test(const char * const *arr);

int main(int argc, char *argv[], char *env[])
{
   test((const char * const *)argv);
}

void test(const char * const *arr)
{
} 
```

这将使警告消失。这没关系，只要您实际上可以在您的函数`argv`中将其视为 a `const char * const *`。

# c# - 具有 ASP.NET 成员资格的 Umbraco 成员配置文件数据

> ID：12992409
> 
> 赞同：1
> 
> 时间：2012-10-20T20:32:51.060
> 
> 标签：c#, asp.net-membership, umbraco

使用旧 api 访问会员数据很容易

```
var arne = Member.GetMemberFromLoginName("arne"); // deprecated
var arneProperty = arneUmbraco.getProperty("property"); 
```

它可以工作，但 GetMemberFromLoginName 已被弃用，并且引用了 ASP.NET Membership。

```
var arne = Membership.GetUser("arne"); 
```

这很公平，但我如何加载属性？在我工作的上下文中，我无法访问 HttpContext.Current.Profile，因为我自己实际加载了用户。

```
var profile = HttpContext.Current.Profile; // This won't work... 
```

有什么建议吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T23:42:14.623

我有一个非常相似的问题，但可能要求较小。我试图实现 Umbraco TV 视频中描述的“最后登录”功能，以显示成员的最后登录日期。由于代码库已更改，所描述的方法不再有效。我发现有两种通用方法可以让它工作：

创建您自己的会员提供商。从 UmbracoMembershipProvider 继承并更新 Web 配置以使用您的提供程序。我覆盖了一种方法，我的提供程序代码如下所示：

```
using umbraco.BusinessLogic;
using System.Web.Profile;
using System;

namespace zo.Umb.LastLogin
{
    // this approac works, and it may be necessary to extend the membership provider in the future, so that's why I'm
    // leaving it here. But for now I'm using the ApplicationStartupHandler event subscription method
    // in MemberEvent.cs

    /// <summary>
    /// Inherit the default membership provider and substitute my own method that's fired when a member tries
    /// to log in. Note that you must also replace the UmbracoMembershipProvider reference in the web.config 
    /// with a reference to this one. eg:
    /// <add name="UmbracoMembershipProvider" type="zo.Umb.LastLogin.MyMembershipProvider" enablePasswordRetrieval="false" enablePasswordReset="false" requiresQuestionAndAnswer="false" defaultMemberTypeAlias="Another Type" passwordFormat="Hashed" />
    /// 
    /// also note that, to have custom profile properties appear, they must also be added in the web.config
    /// like so:
    /// <profile defaultProvider="UmbracoMemberProfileProvider" enabled="true">
    ///  <providers>
    ///    <clear />
    ///    <add name="UmbracoMemberProfileProvider" type="umbraco.providers.members.UmbracoProfileProvider, umbraco.providers" />
    ///  </providers>
    ///  <properties>
    ///    <clear />
    ///    <add name="lastLogin" allowAnonymous ="false" provider="UmbracoMemberProfileProvider" type="System.DateTime" />
    ///  </properties>
    ///</profile>

    /// </summary>
    public class MyMembershipProvider : umbraco.providers.members.UmbracoMembershipProvider
    {
        public override bool ValidateUser(string username, string password)
        {
            var success = base.ValidateUser(username, password);
            if (success)
            {
                var user = GetUser(username, true);
                var profile = ProfileBase.Create(user.UserName);
                profile["lastLogin"] = DateTime.Now;
                profile.Save();
            }
            return success;
        }
    }
} 
```

当用户尝试访问受保护的内容时会触发 ValidateUser。

虽然这行得通，但我不喜欢离开默认提供程序、编辑 web.config 等，并希望使用以前版本的更“标准”的方法。所以我使用了方法2：

连接到 ApplicationStartupHandler，并订阅 Member.BeforeSave

```
using System;
//using umbraco.BusinessLogic;
using umbraco.businesslogic;
using umbraco.cms.businesslogic.member;

namespace zo.Umb.LastLogin
{
    public class MemberEvent : ApplicationStartupHandler
    {
        public MemberEvent()
        {
            Member.BeforeSave += new Member.SaveEventHandler(Member_BeforeSave);
        }

        void Member_BeforeSave(Member sender, umbraco.cms.businesslogic.SaveEventArgs e)
        {
            //Log.Add(LogTypes.Debug, sender.Id, "Member_AfterAddToCache");
            sender.getProperty("lastLogin").Value = DateTime.Now;
        }
   }
} 
```

如果我记得， member.beforesave*不是*在创建用户并将其保存到会员商店时触发的东西。它实际上是在用户登录时触发的。

# visual-studio-2010 - 将 HTML 属性添加到智能感知

> ID：12992415
> 
> 赞同：2
> 
> 时间：2012-10-20T20:33:32.767
> 
> 标签：visual-studio-2010

是否可以将我的自定义 HTML 属性添加到 VS 的智能感知？说，`data-bind`非常有用，最好不要一次又一次地写整个属性名称。

# meteor - 使用 .allow 或 .deny 在聊天应用程序中过滤特定单词的消息

> ID：12992420
> 
> 赞同：3
> 
> 时间：2012-10-20T20:34:34.570
> 
> 标签：meteor

至于新的流星版本，我想了解如何禁止将带有某些单词的消息添加到集合中。

假设我正在通过：`Messages.insert({message:"Holy ducking smokes", at: new Date()});`

里面的代码应该是什么`if (Meteor.is_server)`样子才能阻止任何包含“鸭子”的条目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T13:47:24.300

像这样的东西？

```
Messages.deny({
  insert: function(userId, doc) {
    if (doc.message.match(/\bduck\b/i)) return true;
    return false;
  }
} 
```

如果消息包含有界词“duck”，这将拒绝客户端插入记录。显然，如果需要，您可以在那里执行其他逻辑（例如审查）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T18:31:21.533

我可以做到这一点的一种方法是在 中设置 a`.allow`以`Meteor.is_server`测试该值是否与我正在过滤的值不同。

它应该看起来像这样：

```
 if (Meteor.is_server) {
        Messages.allow({
            insert: function (userId, doc) {
                var currentMessage = Messages.findOne({message:doc.message}) ;
                if (doc.message == 'duck') { //here i`m filtering stirngs 
                    return false;
                } else { return true; }
            },
            update: function () { (...) },
            remove: function () { (...) },
        });
    } 
```

但我想使用方法会是一种更好的方法，因为对服务器端和客户端都使用单个验证规则是有意义的。

# linux - 在 Linux 内核中存储信息的最佳方式是什么？

> ID：12992427
> 
> 赞同：0
> 
> 时间：2012-10-20T20:35:02.817
> 
> 标签：linux, linux-kernel, kernel-module, kernel

我创建的内核模块不断生成我想存储在内核中并可以从 root 读取的信息。我正在考虑将信息存储在具有特定权限的某种日志文件中，但我读到写入内核空间代码中的文件并不好。

什么是在内核中快速存储信息且可由 root 访问的好方法？

~谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T20:41:38.603

如果它不断生成*新*信息，我会用`printk()`. 这样，它也将`dmesg`被写入到`/var/log/kern.log`.

虽然，这不适用于敏感信息，因为`dmesg`任何用户都可以使用。

根据信息的类型，您还可以通过`/proc`或`/sys`文件、`netlink`、`relayfs`、`/dev ioctl`。

# php - 对非常相似的图像进行排序 PHP OCR

> ID：12992432
> 
> 赞同：2
> 
> 时间：2012-10-20T20:35:16.387
> 
> 标签：php, linux, api, ocr

感谢您查看我的问题。

基本上我要做的是在这里找到所有看起来像第一张和第三张图像的图像：http: [//imgur.com/a/IhHEC](http://imgur.com/a/IhHEC)

并删除所有看起来不像的（2,4）。

我尝试了几个库都无济于事。

另一种可接受的方法是检查图像是否包含“代码：”，因为该字符串在我必须整理的每个字符串中。

谢谢你，史蒂夫

编辑：虽然第一张和第三张图片看起来尺寸相同，但事实并非如此。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T20:39:20.450

如果这些是您要使用的实际图像，那么直方图相似性似乎可以完成这项工作。第一个和第三个反差很大，第二个和第四个，尤其是第四个，有很大的不同强度。

您可以轻松地制作图像中灰色阴影的直方图，然后将阈值应用于直方图的形状以对其进行分类。

编辑：要实际做到这一点：您可以遍历每个像素并创建一个像素值数组 => 找到的次数。由于它是灰度的，您可以选择 R、G 或 B 通道。然后将每个数字除以图像中的像素数以进行归一化，因此它适用于任何大小。然后，直方图中的每个条目将是所用像素数的一小部分。然后，您可以测量高于某个阈值的值的数量。如果有很多灰色，你会得到大量的小值。如果没有，您将获得少量大值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T17:46:33.317

由于我在处理图像文本而不是图像对象方面的背景，我会在 OCR 后处理过程中执行此操作，方法是在文本内容中搜索“关键字”或检查代表所需数据的“正则表达式”。这意味着整个工作需要分成两个阶段：图像到文本 OCR（免费或便宜，软件或云）和实际分离过程（简单编程）。

# javascript - 从 JS 中的 JSON 返回索引名称

> ID：12992433
> 
> 赞同：0
> 
> 时间：2012-10-20T20:35:20.163
> 
> 标签：javascript, jquery, json

假设我们有这个 JSON：

```
{ "A" : {"A1": "1" } } 
```

如何提取实际索引 A1 ？这样我就可以在 JS 中使用它，例如：

```
var index = "A1"; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T20:36:38.760

*编辑*——如果你的意思是“我如何提取索引 A1 处的**值**”，那么你只需使用点或括号运算符：

```
var value = object.A.A1; 
```

或者

```
var index = "A1";
var value = object.A[index]; 
```

其他见下文。

* * *

您可以使用循环遍历对象的属性名称`for ... in`：

```
for (var propertyName in object) {
  // ...
} 
```

该循环还将包括原型链中的属性，因此您可以使用名为 的函数来避免这种情况（如果需要）`hasOwnProperty`：

```
for (var name in object) {
  if (object.hasOwnProperty(name)) {
    // really is a local property
  }
} 
```

较新的浏览器支持一种将属性名称作为数组获取的方法：

```
var names = Object.keys( yourObject ); 
```

该列表将仅包括“自己的”属性；也就是说，那些`hasOwnProperty()`会返回`true`的。

Finally, there are ways that properties can be defined such that they're not "enumerable". Usually when that's done, you would generally *not* want to see them in `for ... in` anyway.

# macos - 没有 git 命令（状态，显示来源）不起作用，OS X Lion

> ID：12992437
> 
> 赞同：3
> 
> 时间：2012-10-20T20:36:20.490
> 
> 标签：macos, git

我正在处理一个 git repo，因为我的机器似乎在变慢（并且有大约 15 天的正常运行时间），我决定重新启动。我立即打开 iTerm2，重新开始工作，但 git 没有响应任何命令。我将粘贴控制台的输出，这样您就可以看到我在尝试，在 2 分钟没有响应后放弃，检查 git 的路径以确保它已安装，等等。

```
Nick-Coxs-Macbook-Pro:codealong macbookpro$ git status
^C
Nick-Coxs-Macbook-Pro:codealong macbookpro$ git gc
^C
Nick-Coxs-Macbook-Pro:codealong macbookpro$ git stash
^C
Nick-Coxs-Macbook-Pro:codealong macbookpro$ git reset --hard HEAD^
^C
Nick-Coxs-Macbook-Pro:codealong macbookpro$ which git
/usr/bin/git
Nick-Coxs-Macbook-Pro:codealong macbookpro$ git status 
```

你可以看到`^C`我刚刚按下 ctrl + C 退出它。

我可以肯定的几件事：

1.  我肯定连接到互联网。（证明：我发布了这个问题。）即使我不是，git 仍然应该在本地工作。

2.  这绝对是一个 git repo。即使不是，git 也会说不是。它不会只是挂起。

3.  我也在普通终端（而不是 iTerm2）中尝试过这个。没有不同。

4.  我在 OS X Lion 10.7.4 上。

更新：我已经用磁盘工具修复了我机器上的权限，这仍然发生在我机器上的所有 git repos 上。

UPDATE2：这是我的控制台的输出，而 git 什么都不做。

```
10/20/12 7:23:48.364 PM com.apple.launchd.peruser.501: (com.Eltima.SyncMateServer[543]) posix_spawn("/Library/Application Support/EltimaSyncMate/SyncMateServer.app/Contents/MacOS/SyncMateServer", ...): No such file or directory
10/20/12 7:23:48.365 PM com.apple.launchd.peruser.501: (com.Eltima.SyncMateServer[543]) Exited with code: 1
10/20/12 7:23:48.365 PM com.apple.launchd.peruser.501: (com.Eltima.SyncMateServer) Throttling respawn: Will start in 10 seconds 
```

这对我来说没有任何意义。任何人？

UPDATE3：我不知道为什么我之前没有检查这个，但是我可以使用 GitX 作为 git 的 GUI，所以并不是 git 本身不起作用，而是 CLI 不起作用。

更新 4：我在安全模式下重新启动，但终端仍然以同样的方式对待 git。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T04:22:27.760

我仍然不太确定为什么会发生这种情况，但我能够解决它。我用一个简单的方式卸载了 git `rm /usr/local/bin/git`（当然，它会根据安装位置而改变），然后我用[这个安装程序](http://code.google.com/p/git-osx-installer/downloads/detail?name=git-1.8.0-intel-universal-snow-leopard.dmg)重新安装它（注意它适用于 10.7 Lion，即使它表面上是 Snow Leopard 二进制文件），因为我发现它`git`最近刚刚更新到 1.8。

# jquery - jQuery加载带有粘性页脚的数据

> ID：12992441
> 
> 赞同：0
> 
> 时间：2012-10-20T20:36:35.067
> 
> 标签：jquery, ajax, sticky-footer

我有一个用 jQuery 设置的粘性页脚，效果很好，计算窗口的高度、内容的高度，如果没有足够的内容将其向下推，则将其定位在页面底部。如果用户调整浏览器窗口的大小，它也可以工作。当用户编辑他们的个人资料时，问题就出现了，我用 AJAX 加载内容，如果内容只是 1 行或 2 行，那么一切都很好，但如果页面延伸的时间更长，但页脚没有意识到。

无论如何，当这种情况发生时，页脚可以知道吗？可能有一个我不知道的功能，有人有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T21:10:10.267

在`success:` 处理完所有 ajax 代码后，在 ajax 上调用页面加载时使用的函数来调整页脚的大小和位置

# ruby-on-rails - heroku 配置路径变量

> ID：12992443
> 
> 赞同：4
> 
> 时间：2012-10-20T20:36:44.253
> 
> 标签：ruby-on-rails, heroku, gem, dependencies

我正在尝试部署一个依赖于不受支持的外部库的 heroku 应用程序。我将库加载到我的供应商文件夹中，但现在我需要配置 heroku 以在特定路径中查找依赖项。从阅读中我相信我需要使用`heroku config:set PATH=xxx`但我不知道如何使用这个变量。如果我希望 heroku 包含`vendor/includes`并`vendor/bin`在寻找依赖项时，我需要放什么？

# php - Symfony 类加载器组件示例

> ID：12992448
> 
> 赞同：1
> 
> 时间：2012-10-20T20:37:50.040
> 
> 标签：php, autoloader, psr-0, symfony-components

我试图建立一个简单的例子来了解 Symfony 的 ClassLoader 组件和新的[PSR-0](https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-0.md)标准是如何工作的。

首先我创建了 Bar.php：

```
namespace Acme;

class Bar 
{
    // Implementation
    public static function helloWorld() {
        echo "Hello world!";
    }
} 
```

然后我创建了一个 autoloader.php（在供应商路径下我有 ClassLoader 组件）：

```
require_once __DIR__.'/vendor/symfony/class-loader/Symfony/Component/ClassLoader/UniversalClassLoader.php';

use Symfony\Component\ClassLoader\UniversalClassLoader;

$loader = new UniversalClassLoader();
$loader->register();

$loader->registerNamespace('Acme', __DIR__); 
```

最后我创建了 Foo.php：

```
require_once 'autoloader.php';

use Acme;

class Foo extends Bar
{
    // Implementation
}

$foo = new Foo();
$foo::helloWorld(); 
```

但是当我执行时：

```
$ php Foo.php 
```

我收到以下错误消息：

> PHP 警告：在第 4 行的 Foo.php 中，使用非复合名称“Acme”的 use 语句无效
> 
> PHP 致命错误：在第 7 行的 Foo.php 中找不到类 'Bar'

我在这里做错了什么？

**更新**：

如果不使用`namespace Acme`I use `namespace Acme\Bar`in `Bar.php`，则会收到与上图相同的错误消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T06:07:55.147

我发现出了什么问题。问题是遵循标准 PSR-0 的 UniversalClassLoader 类要求具有命名空间的文件不能位于根目录中，并且必须至少在一个目录下创建。

这是代码，以防有人想尝试该示例。

自动加载器.php

```
require_once __DIR__.'/vendor/Symfony/Component/ClassLoader/UniversalClassLoader.php';
$loader = new Symfony\Component\ClassLoader\UniversalClassLoader();
$loader->registerNamespaces(array('Acme' => __DIR__ . '/src'));
$loader->register(); 
```

./src/Acme/Bar.php

```
namespace Acme;

class Bar 
{
    // Implementation
    public static function helloWorld() {
        echo "Hello world!";
    }
} 
```

./src/Acme/Foo.php

```
namespace Acme;

require_once '../../autoloader.php';

use Acme\Bar;

class Foo extends Bar
{
    // Implementation
}

$foo = new Foo();
$foo::helloWorld(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T20:40:53.657

你不能使用整个命名空间，你必须使用 Acme\Bar。

# asp.net - 加载图像错误

> ID：12992451
> 
> 赞同：0
> 
> 时间：2012-10-20T20:38:23.303
> 
> 标签：asp.net, css

我有一个奇怪的问题，我试图加载一个精灵图像并得到以下错误：

“加载资源失败：服务器响应状态为 404（未找到）”

我正在通过CSS加载它：

```
background-image: url('/Img/icons.png'); 
```

该位置很好，因为当我通过 aspx 页面加载它时，它加载得很好：

```
<img src="Img/icons.png" /> 
```

位置是 Img/icons.png 和 css 它的 Css/style.css

它在本地主机上

我无法弄清楚出了什么问题，任何帮助将不胜感激谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T20:41:50.150

如果您的 css 文件与您的 Img 文件夹位于同一文件夹中，请尝试

```
background-image: url('Img/icons.png'); 
```

除此之外，您必须向我们展示您的文件结构以了解错误所在。99.99% 你只是用错误的 url 引用图像。

编辑：

根据您指定的位置，它应该是

```
background-image: url('../Img/icons.png'); 
```

this：`..`表示比当前位置高一级，然后查找`/Img/icons.png`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T20:41:58.367

这里明显的区别是第一个斜线。看起来你的 CSS 应该是：

```
background-image: url('Img/icons.png'); 
```

或者，

```
background-image: url('./Img/icons.png'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T20:42:08.383

看看这是否有效：

```
background-image: url('Img/icons.png'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-20T20:44:10.587

取决于当前页面的相对路径

尝试

```
background-image: url('../Img/icons.png'); 
```

或者

```
background-image: url('../../Img/icons.png'); 
```

或者

```
background-image: url('Img/icons.png'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-20T21:06:13.663

您能否还提供 CSS 文件和 .aspx 页面的文件夹结构？这将有助于我们缩小问题范围。从这里看来，您的 css 文件在访问图像时存在导航问题，而 aspx 似乎没有，因为分层路径正确。

# delphi - Delphi 7：以管理员权限执行应用程序

> ID：12992454
> 
> 赞同：4
> 
> 时间：2012-10-20T20:38:58.890
> 
> 标签：delphi, delphi-7, manifest, uac, xp-theme

如何在不添加 XP 主题的情况下为 UAC 添加清单？

我试过这个清单：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<assembly xmlns="urn:schemas-microsoft-com:asm.v1" manifestVersion="1.0">
  <dependency>
    <dependentAssembly>
      <assemblyIdentity type="win32" name="Microsoft.Windows.Common-Controls"     version="6.0.0.0" processorArchitecture="*" publicKeyToken="6595b64144ccf1df"      language="*"/>
     </dependentAssembly>
  </dependency>
  <trustInfo xmlns="urn:schemas-microsoft-com:asm.v3">
    <security>
      <requestedPrivileges>
        <requestedExecutionLevel
          level="requireAdministrator"
          uiAccess="false"/>
      </requestedPrivileges>
    </security>
  </trustInfo>
</assembly> 
```

但 XP 主题仍然存在。

我尝试了许多其他清单，但出现此错误：

“无效的 win32 应用程序”

谢谢您的帮助

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-20T21:37:06.803

如果您不想要 XP 主题，请移除对第 6 版通用控件的依赖。删除`dependency`元素，所以你只剩下`trustInfo`剩下的了。

# php - mysql 查询返回多个值 - 应该返回一个

> ID：12992456
> 
> 赞同：0
> 
> 时间：2012-10-20T20:39:11.043
> 
> 标签：php, mysql, duplicates

我有一个网站，访问者可以在其中创建“战斗”并上传视频以参与这些战斗。

以下 mySQL 查询试图检索数据库中每个“战斗”的详细信息。

我遇到的问题是，如果“战斗创建者”将两个“视频”上传到同一场战斗，则会打印出重复的战斗。

即使视频表在同一个battle_id下有两个条目，如何让查询只为每场战斗打印一个值？

谢谢！

```
SELECT * from Battles, Player, Video 
WHERE (Battles.battle_creator = Player.player_id 
AND Battles.battle_id = Video.battle_id 
AND Video.player_id = Battles.battle_creator) 
ORDER BY Battles.battle_date DESC; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T20:53:21.517

一旦单个用户将多个视频分配给战斗，就无法从单个查询中获取您要求的信息。

获取战斗中所有数据的最佳方法是将查询分成两个子查询：

```
SELECT * from Battles, Player 
WHERE Battles.battle_creator = Player.player_id
ORDER BY Battles.battle_date DESC; 
```

...进而：

```
SELECT * from Video 
ORDER BY Battles.battle_date DESC, Player.player_id; 
```

第一个查询将为您每场战斗提供一行；第二个将为您提供所有战斗的所有视频，您可以对其进行迭代。

从扩展的角度来看，您最好完全避免 JOIN，因此额外的工作将非常值得。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T20:45:05.780

您可以将 LIMIT 1 子句添加到查询中以仅获得第一个结果，或者使用 DISTINCT 子句，例如

```
SELECT DISTINCT *
FROM ... 
```

也就是说，在查询多个表时不应使用“SELECT *” - 更具体地使用“SELECT table.*”或“SELECT table.field1, table.field2, ...”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T21:02:57.410

您不能“完全”这样做，因为您的查询：

```
SELECT * from Battles, Player, Video  ... 
```

隐含地要求*所有视频*。所以你需要先问问自己，*我如何选择我想要的那个视频？*

如果您只想要一个视频，无论如何，然后添加`LIMIT 1`到查询并完成它。`ORDER BY`video_date ASC 或 DESC 之前`LIMIT`检索最早或最新的视频。

否则，您必须执行以下操作：

```
SELECT * from Battles
    JOIN Player ON (Battles.battle_creator = Player.player_id)
    JOIN Video  ON (Battles.battle_id = Video.battle_id 
                    AND Video.player_id = Battles.battle_creator)
WHERE Video.video_id = (SELECT MIN(video_id) FROM Video AS Video2 WHERE
               Battles.battle_id = Video2.battle_id 
               AND Video2.player_id = Battles.battle_creator)
ORDER BY Battles.battle_date DESC; 
```

在上面的示例中，我使用了“video_id 最小的视频”作为“视频选择标准”。您将希望在 (Video.video_id) 上有一个索引，例如

```
CREATE INDEX video_ndx ON Video(player_id, battle_id, video_id); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-20T20:43:34.310

正如 Ninsuo 的评论所指出的，控制这种情况的正确方法是，在您的 ORDER BY 子句之后，指定 LIMIT 1。

如果您想要整个表，这将不起作用，只是没有重复。考虑对返回的数据运行一些比较检查，或使用 SELECT DISTINCT。

# backbone.js - 使用 fetch 处理来自backbone.js 集合的响应

> ID：12992460
> 
> 赞同：0
> 
> 时间：2012-10-20T20:40:08.540
> 
> 标签：backbone.js

我对backbone.js 很陌生，最近设法完成了我的第一个应用程序。我创建了一个集合，负责通过 API 获取数据，但无法遍历结果并使用它。

这是我的模型文件

```
define([
    'jquery',
    'underscore',
    'backbone'
], function($, _, Backbone){

    var VehicleLookupModel = Backbone.Model.extend({
        //data will contain one of the items returned from the collection's 'parse' function.
        parse: function(data){
            return data;
        }
    })

    return VehicleLookupModel;

}); 
```

收集文件

```
define([
    'jquery',
    'underscore',
    'backbone',
    'l/models/VehicleLookupModel'
], function($, _, Backbone, VehicleLookupModel){

    var VehicleLookupModelSet = Backbone.Collection.extend({
        model   : VehicleLookupModel,

        url     : function() {
            return '/en/car/api/model-lookup-model.json/'+this.make+'/';
        },

        parse : function(response) {
            return response;
        },

        initialize: function(options) {
            options || (options = {});
            this.make = options.make;
        }
    })

    return VehicleLookupModelSet;

}); 
```

最后是视图文件

```
define([
    'jquery',
    'underscore',
    'backbone',
    'l/collections/VehicleLookupMakeSet',
    'l/collections/VehicleLookupModelSet',
    'l/collections/VehicleLookupTrimSet'
], function($, _, Backbone, VehicleLookupMakeSet, VehicleLookupModelSet, VehicleLookupTrimSet){

    var BrowseVehicleView = Backbone.View.extend({
        el: $('#vehicle-browse-form'),
        initialize: function(){

            // Extend JQuery example
            // This would extend JQuery function for resetting elements on the form
            $.fn.extend({
                resetElement: function(){
                    $(this).attr('disabled', 'disabled');
                    $(this).html('');

                    return $(this);
                }
            });

            // define array of elements to be used in DOM manipulations
            this.elements = {
                "make"      : $('#id_make',     this.el),
                "model"     : $('#id_model',    this.el),
                "trim"      : $('#id_trim',     this.el),
                "year"      : $('#id_year',     this.el)
            }

        },

        events: {
            "change #id_make"   : "onMakeChange",
            "change #id_model"  : "onModelChange",
            "change #id_trim"   : "onTrimChange"
        },
        render: function(){
            // Using Underscore we can compile our template with data

        },
        onMakeChange: function(event) {
            this.elements.model.resetElement();
            this.elements.trim.resetElement();
            this.collection = new VehicleLookupModelSet({make: this.elements.make.val()})
            this.collection.fetch();

            console.log(this.collection);

        },
        onModelChange: function(event) {
            var VehicleLookupTrimInstance = new VehicleLookupTrimSet({make: this.elements.make.val(), model: this.elements.model.val()})
            VehicleLookupTrimInstance.fetch();

        },
        onTrimChange: function(event) {

        },
        renderItem:  function(object, item) {
            console.log(item);
        }

    });
    // Our module now returns our view
    return new BrowseVehicleView;
}); 
```

以上是 console.log(this.collection) 正在返回一个具有许多不确定如何使用的属性的对象。但是，我注意到有一个方法“模型”，在模型内部有很多对象，每个对象代表 json 的值。

有什么想法可以遍历对象吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-21T00:57:08.923

```
this.collection.fetch({
  success: function(collection, response) {
    _.each(collection.models, function(model) {
      console.log(model.toJSON());
    })
  }
}); 
```

# javascript - 如何在 Windows8 HTML5/JS 应用程序中使用 WCF 服务？

> ID：12992461
> 
> 赞同：0
> 
> 时间：2012-10-20T20:40:12.160
> 
> 标签：javascript, wcf, html, iis, windows-8

我正在开发一个 win8 应用程序，它应该使用托管在 IIS 上的 WCF 服务，但它不会... 注意：Web 服务工作得很好。我已经在 VS2012 中使用 WCF 测试客户端对其进行了测试这是我的代码：

IService.cs：

```
using System.Linq;
using System.Runtime.Serialization;
using System.ServiceModel;
using System.ServiceModel.Web;
using System.Text;

[ServiceContract]
public interface IService
{

[OperationContract]
string SitePredmeti();

[OperationContract]
[WebInvoke(Method = "POST", BodyStyle = WebMessageBodyStyle.Wrapped, ResponseFormat = WebMessageFormat.Xml)]
List<Profesor> SiteProfesori();
} 
```

我做了两种方法：一种返回 xml，另一种返回 json，这样我就可以测试哪一种有效。WS 是返回 json 还是 xml 都没有关系，我可以在应用程序中使用其中任何一个。

我在 win8 中为 html5/JS 应用程序使用默认的 SPLIT APP 模板，没有任何更改。现在我只需要使用 wcf 服务，稍后我将处理数据模板。

我的 iis 托管 wcf 的 url：

```
http://localhost/InformatorWS/Service.svc 
```

这是我到目前为止所尝试的：

```
var baseURl = "http://localhost/InformatorWS/Service.svc/SitePredmeti/";
var url  = baseURl+Number1.value+"/"+Number2.value;  
WinJS.xhr({ url: url  }).then(function  (r)  {
var result  = JSON.parse(r.responseText);
ResultSpan.innerHTML  = result;  }); 
```

我在这里得到的错误是：

> {"exception":null,"error":{},"promise":{"_oncancel":null,"_nextState":null,"_state":>{"name":"error","done":null ,"then":null},"_listeners":null,"_value":{},"_isException":false,"_errorId":2},"id":2}

接下来我尝试通过 jquery ajax 调用它：

```
$(document).ready(function () {
        jQuery.support.cors = true;
        //Calling WCF Service using jQuery ajax method
        $.ajax({
            type: "GET",
            async: "false",
            url: "http://localhost/InformatorWS/Service.svc/SitePredmeti",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            processData: true,
            success: function (result) {
                //AjaxSucceeded(result);
                alert('ok')
            },
            error: alert('ne ok')
        });
    }); 
```

当我链接 jquery

```
<script type="text/javascript" src="js/jquery-ui-1.8.9.custom.min.js"></script>
<script type="text/javascript" src="js/jquery-1.4.3.js"></script> 
```

我得到三个例外：

> ms-appx://66b782f9-8814-4b8e-a2e3-d6e73893690a/js/jquery-ui-1.8.9.custom.min.js 0x800a1391 第 10 行第 2 列未处理的异常 - JavaScript 运行时错误：'jQuery' 是不明确的

（其中两个 - 用于成功和错误的两个警报）

> ms-appx://66b782f9-8814-4b8e-a2e3-d6e73893690a/js/default.js 0x800a1391 第 8 行第 9 列未处理的异常 - JavaScript 运行时错误：“警报”未定义

有人知道我在做什么错吗？或者只是任何人都知道使用 IIS 上托管的 WCF 服务的任何方式？

非常感谢您提前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T21:28:24.997

这里可能有几个问题在起作用。您需要 WCFTestClient 和 JavaScript 使用不同的端点。首先，您需要一个 SOAP 端点，但对于第二个，您需要一个非 SOAP（又名 REST）端点。由于您没有在问题中提及，我假设您只有一个端点，并且由于 WCFTestClient 有效，因此它是一个 SOAP 端点，不适用于 JavaScript ¹。如果是这种情况，请向您的服务添加一个新的 Web 端点（或用该端点替换您拥有的那个）²。您可以在 MSDN上的[WCF Web HTTP 编程模型](http://msdn.microsoft.com/en-us/library/bb412172.aspx)文档中阅读有关 Web 端点的更多信息。

* * *

¹理论上，可以使用 JavaScript 调用 SOAP 端点（特别是如果端点使用一些简单的绑定，例如`BasicHttpBinding`）。但是您需要创建要发送给它的**XML**有效负载，并根据 SOAP 规范对其进行格式化 - 而不是您正在发送和期望的 JSON 有效负载。

²如果您这样做 - 只有一个非 SOAP 端点，WCF 测试客户端将无法再使用它，[但这是意料之中的，因为它会尝试使用服务 WSDL 与之对话](http://blogs.msdn.com/b/carlosfigueira/archive/2012/03/26/mixing-add-service-reference-and-wcf-web-http-a-k-a-rest-endpoint-does-not-work.aspx)。

# iphone - 如何获取 CGPath 的 CGPoint(s)

> ID：12992462
> 
> 赞同：26
> 
> 时间：2012-10-20T20:40:26.547
> 
> 标签：iphone, objective-c, ios

如何获得一个包含给定( )`CGPoint`中的所有 (s)的数组？`CGPath``CGMutablePathRef`

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2016-04-02T14:00:29.087

使用**Swift 2.x**（适用于**Swift 3.x**、**Swift 4.x**和**Swift 5.x**，请阅读下文..），我发现这篇关于[Swift 中的 C 回调的](http://oleb.net/blog/2015/06/c-callbacks-in-swift/)精彩文章。

`CGPoint`正如[莉莉巴拉德](https://stackoverflow.com/a/12992504/1894067)所说，试图获得“所有（s）”可能是一个坏主意。

所以，我认为也许最好的方法是获取用于创建特定的路径元素点`CGPath`：

```
//MARK: - CGPath extensions
extension CGPath {
    func forEach(@noescape body: @convention(block) (CGPathElement) -> Void) {
        typealias Body = @convention(block) (CGPathElement) -> Void
        func callback(info: UnsafeMutablePointer<Void>, element: UnsafePointer<CGPathElement>) {
            let body = unsafeBitCast(info, Body.self)
            body(element.memory)
        }
        print(sizeofValue(body))
        let unsafeBody = unsafeBitCast(body, UnsafeMutablePointer<Void>.self)
        CGPathApply(self, unsafeBody, callback)
    }

    func getPathElementsPoints() -> [CGPoint] {
        var arrayPoints : [CGPoint]! = [CGPoint]()
        self.forEach { element in
            switch (element.type) {
            case CGPathElementType.MoveToPoint:
                arrayPoints.append(element.points[0])
            case .AddLineToPoint:
                arrayPoints.append(element.points[0])
            case .AddQuadCurveToPoint:
                arrayPoints.append(element.points[0])
                arrayPoints.append(element.points[1])
            case .AddCurveToPoint:
                arrayPoints.append(element.points[0])
                arrayPoints.append(element.points[1])
                arrayPoints.append(element.points[2])
            default: break
            }
        }
        return arrayPoints
    }
} 
```

使用此扩展程序，您可以执行以下操作：

```
var bezier = UIBezierPath(ovalInRect: CGRectMake(0, 0, 400, 300))
let myOval = bezier.CGPath
let junctionPoints = myOval.getPathElementsPoints()
print("junction points are: \(junctionPoints)") 
```

# Swift 3.x 和 Swift 4.1（请看下面的 Swift 4.2 或主要版本..）

（由于语法重新引入，有一些更正`@convention(c)`）：

```
extension CGPath {

    func forEach( body: @convention(block) (CGPathElement) -> Void) {
        typealias Body = @convention(block) (CGPathElement) -> Void
        let callback: @convention(c) (UnsafeMutableRawPointer, UnsafePointer<CGPathElement>) -> Void = { (info, element) in
            let body = unsafeBitCast(info, to: Body.self)
            body(element.pointee)
        }
        print(MemoryLayout.size(ofValue: body))
        let unsafeBody = unsafeBitCast(body, to: UnsafeMutableRawPointer.self)
        self.apply(info: unsafeBody, function: unsafeBitCast(callback, to: CGPathApplierFunction.self))
    }

    func getPathElementsPoints() -> [CGPoint] {
        var arrayPoints : [CGPoint]! = [CGPoint]()
        self.forEach { element in
            switch (element.type) {
            case CGPathElementType.moveToPoint:
                arrayPoints.append(element.points[0])
            case .addLineToPoint:
                arrayPoints.append(element.points[0])
            case .addQuadCurveToPoint:
                arrayPoints.append(element.points[0])
                arrayPoints.append(element.points[1])
            case .addCurveToPoint:
                arrayPoints.append(element.points[0])
                arrayPoints.append(element.points[1])
                arrayPoints.append(element.points[2])
            default: break
            }
        }
        return arrayPoints
    }

    func getPathElementsPointsAndTypes() -> ([CGPoint],[CGPathElementType]) {
        var arrayPoints : [CGPoint]! = [CGPoint]()
        var arrayTypes : [CGPathElementType]! = [CGPathElementType]()
        self.forEach { element in
            switch (element.type) {
            case CGPathElementType.moveToPoint:
                arrayPoints.append(element.points[0])
                arrayTypes.append(element.type)
            case .addLineToPoint:
                arrayPoints.append(element.points[0])
                arrayTypes.append(element.type)
            case .addQuadCurveToPoint:
                arrayPoints.append(element.points[0])
                arrayPoints.append(element.points[1])
                arrayTypes.append(element.type)
                arrayTypes.append(element.type)
            case .addCurveToPoint:
                arrayPoints.append(element.points[0])
                arrayPoints.append(element.points[1])
                arrayPoints.append(element.points[2])
                arrayTypes.append(element.type)
                arrayTypes.append(element.type)
                arrayTypes.append(element.type)
            default: break
            }
        }
        return (arrayPoints,arrayTypes)
    }
} 
```

# Swift > 4.1（也是 Swift 5.x）和 iOS 9.x 和 > 兼容

```
extension CGPath {
    func forEach( body: @escaping @convention(block) (CGPathElement) -> Void) {
        typealias Body = @convention(block) (CGPathElement) -> Void
        let callback: @convention(c) (UnsafeMutableRawPointer, UnsafePointer<CGPathElement>) -> Void = { (info, element) in
            let body = unsafeBitCast(info, to: Body.self)
            body(element.pointee)
        }
        //print(MemoryLayout.size(ofValue: body))
        let unsafeBody = unsafeBitCast(body, to: UnsafeMutableRawPointer.self)
        self.apply(info: unsafeBody, function: unsafeBitCast(callback, to: CGPathApplierFunction.self))
    }
    func getPathElementsPoints() -> [CGPoint] {
        var arrayPoints : [CGPoint]! = [CGPoint]()
        self.forEach { element in
            switch (element.type) {
            case CGPathElementType.moveToPoint:
                arrayPoints.append(element.points[0])
            case .addLineToPoint:
                arrayPoints.append(element.points[0])
            case .addQuadCurveToPoint:
                arrayPoints.append(element.points[0])
                arrayPoints.append(element.points[1])
            case .addCurveToPoint:
                arrayPoints.append(element.points[0])
                arrayPoints.append(element.points[1])
                arrayPoints.append(element.points[2])
            default: break
            }
        }
        return arrayPoints
    }
    func getPathElementsPointsAndTypes() -> ([CGPoint],[CGPathElementType]) {
        var arrayPoints : [CGPoint]! = [CGPoint]()
        var arrayTypes : [CGPathElementType]! = [CGPathElementType]()
        self.forEach { element in
            switch (element.type) {
            case CGPathElementType.moveToPoint:
                arrayPoints.append(element.points[0])
                arrayTypes.append(element.type)
            case .addLineToPoint:
                arrayPoints.append(element.points[0])
                arrayTypes.append(element.type)
            case .addQuadCurveToPoint:
                arrayPoints.append(element.points[0])
                arrayPoints.append(element.points[1])
                arrayTypes.append(element.type)
                arrayTypes.append(element.type)
            case .addCurveToPoint:
                arrayPoints.append(element.points[0])
                arrayPoints.append(element.points[1])
                arrayPoints.append(element.points[2])
                arrayTypes.append(element.type)
                arrayTypes.append(element.type)
                arrayTypes.append(element.type)
            default: break
            }
        }
        return (arrayPoints,arrayTypes)
    }
} 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2018-11-13T13:36:03.777

苹果新增*实例方法* [CGPath.applyWithBlock](https://developer.apple.com/documentation/coregraphics/cgpath/2873218-applywithblock)，适用于**iOS11.0+ 和 macOS10.13+**

您仍然可以使用 CGPath.apply 检查路径的每个元素，如前面的答案中所述。*但是如果你想避免使用 C 风格的指针和 unsafeBitCast*，**你应该使用更方便的实例方法** `applyWithBlock`。例如，如果您想获取 CGPath 的 CGPoints 数组，您可以**向 CGPath添加****扩展** ，在此示例中，是一个**收集 CGPath 的 CGPoints的****计算属性**（点）：

 ******```
/// Extension to collect CGPath points
extension CGPath {

  /// this is a computed property, it will hold the points we want to extract
  var points: [CGPoint] {

     /// this is a local transient container where we will store our CGPoints
     var arrPoints: [CGPoint] = []

     // applyWithBlock lets us examine each element of the CGPath, and decide what to do
     self.applyWithBlock { element in

        switch element.pointee.type
        {
        case .moveToPoint, .addLineToPoint:
          arrPoints.append(element.pointee.points.pointee)

        case .addQuadCurveToPoint:
          arrPoints.append(element.pointee.points.pointee)
          arrPoints.append(element.pointee.points.advanced(by: 1).pointee)

        case .addCurveToPoint:
          arrPoints.append(element.pointee.points.pointee)
          arrPoints.append(element.pointee.points.advanced(by: 1).pointee)
          arrPoints.append(element.pointee.points.advanced(by: 2).pointee)

        default:
          break
        }
     }

    // We are now done collecting our CGPoints and so we can return the result
    return arrPoints

  }
} 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-10-20T20:45:25.810

您可以使用[CGPathApply()](https://developer.apple.com/documentation/coregraphics/1411203-cgpathapply)遍历路径中的每个段并使用该段运行自定义函数。这将为您提供路径的所有信息。

但是，如果通过“所有 CGPoint(s)”，您的意思是每个点都有一个像素渲染到它，那是一个无限大小的集合。尽管您当然可以使用 apply 函数来获取每个段，然后对于每个非移动段，使用该段的控制点评估您自己的数学，以获得您想要的任何密度的点列表。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-10-20T20:48:44.537

A`CGPath`是一种不透明的数据类型，不一定存储所有使用的点。除此之外，路径实际上可能不会绘制所有用作输入的点（例如，考虑贝塞尔控制点）。

从路径中获取信息的唯一两种[记录方法](http://developer.apple.com/library/mac/#documentation/GraphicsImaging/Reference/CGPath/Reference/reference.html)`CGPathGetBoundingBox`是使用获取边界框，或者使用更复杂的方法`CGPathApply`来调用回调函数，该函数将为您提供序列 if`CGPathElement`类型。******

# vim - vim 的 javacomplete 插件

> ID：12992465
> 
> 赞同：1
> 
> 时间：2012-10-20T20:40:50.477
> 
> 标签：vim

我有两个问题，但它们都与使用同一个插件有关，所以我决定在同一个问题中问他们。

我已经开始在 vim 中使用[javacomplete](http://www.vim.org/scripts/script.php?script_id=1785)插件来完成全功能。我已经设置`omnicomplete`使用：

```
setlocal omnifunc=javacomplete#Complete 
```

它似乎正在使用，`C-x``C-o`但文档中也提到了`completefunc`，例如：

```
setlocal completefunc=javacomplete#CompleteParamsInfo 
```

这似乎没有做任何事情，`C-x``C-u`我不确定它应该做什么。有没有人设法设置这个？

另外我想知道是否有可能以`Reflection.class`某种方式从`$HOME`to移动，`~/.vim`以免污染系统？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T21:05:58.413

那是`<C-x><C-o>`和`<C-x><C-u>`，不是`<C-o>`/ `<C-u>`。

医生说把`javacomplete.vim`,`java_parser.vim`和`Reflection.java`in `~/.vim/autoload/`，你这样做了吗？

该插件似乎不包含路径选项，但是，在第 1748 行`Reflection.class`读取函数看起来脚本期望该文件位于以下两个位置之一：或.`GetJavaCompleteClassPath``javacomplete.vim``~/.vim/autoload/Reflection.class``~/Reflection.class`

所以是的。您可以`~/.vim/autoload`和它的朋友一起安全地将它移动到 。

# c# - 检查 Active Directory 帐户是否被锁定（WPF C#）

> ID：12992471
> 
> 赞同：10
> 
> 时间：2012-10-20T20:41:34.517
> 
> 标签：c#, wpf, active-directory

大家好（这是我的第一篇文章）我有一些从 Codeplex [http://www.codeproject.com/Articles/18102/Howto-Almost-Everything-In-Active-Directory-via-C](http://www.codeproject.com/Articles/18102/Howto-Almost-Everything-In-Active-Directory-via-C)中提取的简单 AD 代码）而且我能够从所述代码中获取我们所有最终用户的信息。现在，我一直在搜索和搜索，并从这里和网络上找到了一些关于“用户被锁定了吗？”的有趣代码片段。

我想使用我已经使用了 2 年的代码，并在其中添加更多内容以添加到锁定的部分......如果有一个文本框给我我会很高兴信息，或复选框，或刚刚说“用户锁定”的内容，然后我会通知我的 Exchange 团队并让用户解锁......

我拥有的代码如下：

```
string eid = this.tbEID.Text;
string user = this.tbUserName.Text.ToString();
string path = "PP://dc=ds,dc=SorryCantTellYou,dc=com";

DirectoryEntry de = new DirectoryEntry(path);

DirectorySearcher ds = new DirectorySearcher(de);
ds.Filter = "(&(objectCategory=person)(sAMAccountName=" + eid + "))";

SearchResultCollection src = ds.FindAll();

//AD results
if (src.Count > 0)
{
   if (src[0].Properties.Contains("displayName"))
   {
      this.tbUserName.Text = src[0].Properties["displayName"][0].ToString();
   }
} 
```

所以，如果我能弄清楚如何使用相同的目录条目，并且搜索器可以向我显示帐户锁定状态，那将是惊人的......请协助

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-20T21:07:13.647

如果您使用的是 .NET 3.5 及更高版本，则应查看`System.DirectoryServices.AccountManagement`(S.DS.AM) 命名空间。在这里阅读所有相关信息：

*   [在 .NET Framework 3.5 中管理目录安全主体](http://msdn.microsoft.com/en-us/magazine/cc135979.aspx)
*   [System.DirectoryServices.AccountManagement 上的 MSDN 文档](http://msdn.microsoft.com/en-us/library/system.directoryservices.accountmanagement.aspx)

基本上，您可以定义域上下文并在 AD 中轻松找到用户和/或组：

```
// set up domain context
PrincipalContext ctx = new PrincipalContext(ContextType.Domain);

// find a user
UserPrincipal user = UserPrincipal.FindByIdentity(ctx, "SamAccountName");

if(user != null)
{
    string displayName = user.DisplayName;

    if(user.IsAccountLockedOut())
    {       
        // do something here....    

    }
} 
```

新的 S.DS.AM 使得在 AD 中与用户和组一起玩变得非常容易！

# java - 使用 AtomicReference.compareAndSet 设置对数据库调用结果的引用是否合适？

> ID：12992478
> 
> 赞同：4
> 
> 时间：2012-10-20T20:42:22.987
> 
> 标签：java, java.util.concurrent, compare-and-swap

我正在实现一个简单的缓存，缓存存储为 AtomicReference。

```
private AtomicReference<Map<String, String>> cacheData; 
```

缓存对象应该（懒惰地）从数据库表中填充。

我提供了一种将缓存数据返回给调用者的方法，但是如果数据为空（即未加载），则代码需要从数据库中加载数据。为了避免同步，我想到了使用 compareAndSet() 方法：

```
public Object getCacheData() {
  cacheData.compareAndSet(null, getDataFromDatabase()); // atomic reload only if data not set!
  return Collections.unmodifiableMap(cacheData.get());
} 
```

以这种方式使用 compareAndSet 是否可以，即。将数据库调用作为原子操作的一部分？它比仅仅同步方法更好/更差吗？

非常感谢您的任何建议..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T20:45:10.193

您没有达到预期的行为。这个表达式：

```
cacheData.compareAndSet(null, getDataFromDatabase()) 
```

**总是**会先打电话`getDataFromDatabase()`。这意味着数据是否被缓存并不重要。如果是，您仍然调用数据库，但丢弃结果。缓存正在工作，但性能同样很差。

考虑一下：

```
if(cacheData.get() == null) {
    cacheData.compareAndSet(null, unmodifiableMap(getDataFromDatabase()));
}
return cacheData.get()); 
```

它并不完美（`getDataFromDatabase()`开始时仍然可以多次调用），但稍后会按预期工作。我也`Collections.unmodifiableMap()`更早地移动了，这样您就不必一遍又一遍地包装同一张地图。

这给我们带来了更简单的实现（不需要`synchronized`或`AtomicReference`不需要）：

```
private volatile Map<String, String> cacheData;

if(cacheData == null) {
  cacheData = unmodifiableMap(getDataFromDatabase());
}
return cacheData; 
```

# optimization - 如何正确使用 GHC 的 SPECIALIZE pragma？（示例：使用 Identity 从一元函数中专门化纯函数。）

> ID：12992481
> 
> 赞同：16
> 
> 时间：2012-10-20T20:42:53.563
> 
> 标签：optimization, haskell, ghc, explicit-specialization

例如，假设我想在列表上写一个单子和非单子映射。我将从一元的开始：

```
import Control.Monad
import Control.Monad.Identity

mapM' :: (Monad m) => (a -> m b) -> ([a] -> m [b])
mapM' _ [] = return []
mapM' f (x:xs) = liftM2 (:) (f x) (mapM f xs) 
```

现在我想重用代码来编写纯代码`map`（而不是重复代码）：

```
map' :: (a -> b) -> ([a] -> [b])
map' f = runIdentity . mapM' (Identity . f) 
```

**有什么必要让它像[被](http://hackage.haskell.org/packages/archive/base/4.6.0.0/doc/html/src/GHC-Base.html#map)[明确写成](http://hackage.haskell.org/packages/archive/base/4.6.0.0/doc/html/src/GHC-Base.html#map)`map'`一样优化？[`map`](http://hackage.haskell.org/packages/archive/base/4.6.0.0/doc/html/src/GHC-Base.html#map)**尤其是：

1.  有必要写吗

    ```
    {-# SPECIALIZE mapM' :: (a -> Identity b) -> ([a] -> Identity [b]) #-} 
    ```

    或者 GHC 是否优化`map'`了自身（通过`Identity`完全分解）？

2.  还需要添加其他任何内容（更多编译指示）吗？

3.  如何验证编译`map'`后的显式编写代码的优化程度`map`？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-20T21:08:53.387

好吧，让我们问问编译器本身。

编译模块

```
module PMap where

import Control.Monad
import Control.Monad.Identity

mapM' :: (Monad m) => (a -> m b) -> ([a] -> m [b])
mapM' _ [] = return []
mapM' f (x:xs) = liftM2 (:) (f x) (mapM f xs)

map' :: (a -> b) -> ([a] -> [b])
map' f = runIdentity . mapM' (Identity . f) 
```

with `ghc -O2 -ddump-simpl -ddump-to-file PMap.hs`(ghc-7.6.1, 7.4.2 产生相同的，除了唯一的名称) 产生以下核心`map'`

```
PMap.map'
  :: forall a_afB b_afC. (a_afB -> b_afC) -> [a_afB] -> [b_afC]
[GblId,
 Arity=2,
 Caf=NoCafRefs,
 Str=DmdType LS,
 Unf=Unf{Src=<vanilla>, TopLvl=True, Arity=2, Value=True,
         ConLike=True, WorkFree=True, Expandable=True,
         Guidance=IF_ARGS [60 30] 160 40}]
PMap.map' =
  \ (@ a_c) (@ b_d) (f_afK :: a_c -> b_d) (eta_B1 :: [a_c]) ->
    case eta_B1 of _ {
      [] -> GHC.Types.[] @ b_d;
      : x_afH xs_afI ->
        GHC.Types.:
          @ b_d
          (f_afK x_afH)
          (letrec {
             go_ahZ [Occ=LoopBreaker]
               :: [a_c] -> Data.Functor.Identity.Identity [b_d]
             [LclId, Arity=1, Str=DmdType S]
             go_ahZ =
               \ (ds_ai0 :: [a_c]) ->
                 case ds_ai0 of _ {
                   [] ->
                     (GHC.Types.[] @ b_d)
                     `cast` (Sym <(Data.Functor.Identity.NTCo:Identity <[b_d]>)>
                             :: [b_d] ~# Data.Functor.Identity.Identity [b_d]);
                   : y_ai5 ys_ai6 ->
                     (GHC.Types.:
                        @ b_d
                        (f_afK y_ai5)
                        ((go_ahZ ys_ai6)
                         `cast` (<Data.Functor.Identity.NTCo:Identity <[b_d]>>
                                 :: Data.Functor.Identity.Identity [b_d] ~# [b_d])))
                     `cast` (Sym <(Data.Functor.Identity.NTCo:Identity <[b_d]>)>
                             :: [b_d] ~# Data.Functor.Identity.Identity [b_d])
                 }; } in
           (go_ahZ xs_afI)
           `cast` (<Data.Functor.Identity.NTCo:Identity <[b_d]>>
                   :: Data.Functor.Identity.Identity [b_d] ~# [b_d]))
    } 
```

是的，只有`cast`s，没有真正的开销。你会得到一个`go`完全一样的当地工人`map`。

总结：您只需要`-O2`，并且您可以通过查看核心 ( `-ddump-simpl`) 来验证代码的优化程度，或者，如果您可以阅读它，可以查看生成的程序集 ( `-ddump-asm`) 和 LLVM 位代码`-ddump-llvm`)。

稍微详细说明一下可能会很好。关于

> 有必要写吗
> 
> ```
> {-# SPECIALIZE mapM' :: (a -> Identity b) -> ([a] -> Identity [b]) #-} 
> ```
> 
> 或者 GHC 是否优化`map'`了自身（通过完全分解身份）？

答案是，如果您在定义通用函数的同一模块中使用专业化，那么通常您不需要`{-# SPECIALISE #-}`编译指示，如果 GHC 看到任何好处，它会自行创建专业化。在上述模块中，GHC 创建了专业化规则

```
"SPEC PMap.mapM' [Data.Functor.Identity.Identity]" [ALWAYS]
    forall (@ a_abG)
           (@ b_abH)
           ($dMonad_sdL :: GHC.Base.Monad Data.Functor.Identity.Identity).
      PMap.mapM' @ Data.Functor.Identity.Identity
                 @ a_abG
                 @ b_abH
                 $dMonad_sdL
      = PMap.mapM'_$smapM' @ a_abG @ b_abH 
```

这也有利于在定义模块之外`mapM'`的`Identity`monad 的任何使用（如果使用优化编译，并且 monad 被识别为`Identity`及时触发规则）。

但是，如果 GHC 对专门化的类型不够了解，它可能看不到任何好处并且不会专门化（我不知道它是否会尝试 - 到目前为止，我已经找到了每个专业化我看的时间）。

如果你想确定，看看核心。

如果您需要在不同的模块中进行特化，GHC 在编译定义模块时没有理由特化该函数，因此在这种情况下需要一个 pragma。从 ghc-7 开始，使用 pragma 可能更好，而不是`{-# SPECIALISE #-}`要求对一些精心挑选的类型进行专门化的`{-# INLINABLE #-}`编译指示，以便在导入模块时可以访问（稍微修改的）源代码，这允许专门化对于那里的任何需要的类型。

> 还需要添加其他任何内容（更多编译指示）吗？

不同的用途当然可能需要不同的 pragma，但根据经验，`{#- INLINABLE #-}`这是您最想要的。当然`{-# RULES #-}`可以做编译器不能自己做的魔术。

> 如何验证编译`map'`后的显式编写代码的优化程度`map`？

*   查看生成的核心、asm 或 llvm 位码，以您最了解的为准（核心相对容易）。
*   如果您从核心不确定并且需要知道，则将生成的代码与手写的专业化进行基准测试。最终，除非您在某个阶段（core/cmm/asm/llvm）获得*相同*的中间结果，否则基准测试是唯一确定的方法。

# javascript - 在 HTML 页面中显示 XML 内容以创建表单元素

> ID：12992482
> 
> 赞同：0
> 
> 时间：2012-10-20T20:43:14.907
> 
> 标签：javascript, jquery, html, xml

我有应用程序，其中存在复选框树。如果用户在选中其中一些复选框之前，我想预先填充复选框。

为此，我从我的后端 perl 脚本获取 XML 格式，如下所示。就像在下面的 XML 中，只有 0、43、44、45、46 和 50 出现，所以只有那些相应的复选框需要在页面加载时检查。我想要通过从黑色解析 XMl 调用 perl 脚本在页面加载时显示那些选中的复选框。我该怎么做？

```
<perldata> 
 <hashref memory_address="0x86f4880"> 
  <item key="0">1</item> 
 </hashref> 
</perldata> 
<perldata> 
 <hashref memory_address="0x86f4880"> 
  <item key="43">1</item> 
 </hashref> 
</perldata> 
<perldata> 
 <hashref memory_address="0x86f4880"> 
  <item key="44">1</item> 
 </hashref> 
</perldata> 
<perldata> 
 <hashref memory_address="0x86f4880"> 
  <item key="45">1</item> 
 </hashref> 
</perldata> 
<perldata> 
 <hashref memory_address="0x86f4880"> 
  <item key="46">1</item> 
 </hashref> 
</perldata> 
<perldata> 
 <hashref memory_address="0x86f4880"> 
  <item key="50">1</item> 
 </hashref> 
</perldata> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T07:49:18.430

我读了一个平面 XML 文件，你会从你的 PERL 程序中读到。

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.8.2.js"></script>
    <script type="text/javascript">
    $(helloWorld)
    function helloWorld() {
        $.ajax({
            url: 'perldata.xml',
            success: function(data) {
                $('[key]',data).each(function(){
                    $('#chk_'+$(this).attr('key')).prop('checked',true)
                })
            }
        })
    }
    </script>
    <title>perlData</title>
</head>
<body>
<div id="message">
<form>
<input id='chk_0' type='checkbox' />0<br />
<input id='chk_1' type='checkbox' />1<br />
<input id='chk_2' type='checkbox' />2<br />
<input id='chk_3' type='checkbox' />3<br />
<input id='chk_4' type='checkbox' />4<br />
<input id='chk_5' type='checkbox' />5<br />
<input id='chk_6' type='checkbox' />6<br />
<input id='chk_7' type='checkbox' />7<br />
<input id='chk_8' type='checkbox' />8<br />
<input id='chk_9' type='checkbox' />9<br />
<input id='chk_10' type='checkbox' />10<br />
<input id='chk_11' type='checkbox' />11<br />
<input id='chk_12' type='checkbox' />12<br />
<input id='chk_13' type='checkbox' />13<br />
<input id='chk_14' type='checkbox' />14<br />
<input id='chk_15' type='checkbox' />15<br />
</form>
</div>

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T22:12:50.107

这是一个对 xml 发出 ajax 请求并将项目键解析为复选框 ID 的演示

**工作演示：http:** [//jsfiddle.net/592At/1/](http://jsfiddle.net/592At/1/)

```
$.get(pathToXmlFile, function(response) {

    $(response).find('perldata').each(function(i) {
        var itemKey = $(this).find('item').attr('key');
        $('#'+itemKey).prop('checked',true)        
    });

}) 
```

# php - 尝试添加没有数组值的数组键

> ID：12992487
> 
> 赞同：0
> 
> 时间：2012-10-20T20:43:43.877
> 
> 标签：php

好的，所以我正在尝试写一些分析美国总统候选人的东西。

我正在尝试在给定的一天添加所有值 - 我是其中的一部分。

无论如何，$romlinearray - 我想在里面有两个值，日期和给定日期的值。我想将它们插入`if ($romneydiff == 0) {`块内。

我遇到的问题是生成一个带有键名的数组（即我希望能够执行 $romlinearray["value"]）并让它提取一个值，但直到该值才会被插入之后。

如何创建一个带有键但还没有值的数组？

```
$resultromney = mysql_query("SELECT category, value, timestamp from results where name='".$chartname2."'");
if (!$resultromney) {
    die('Invalid query, please contact administrator');
}

$posromney = 0;
$negromney = 0;
$dateromney = "1/1/2012";
$romray = array();

while ($twitromney = mysql_fetch_assoc($resultromney)) 
{

$romneytime = intval($twitromney["timestamp"]);
$romneydate = date('m/d/Y', $romneytime);
$romlinearray = array(); // THIS IS WHERE THE PROBLEM IS
$romneydiff = date_diff($dateromney, $romneytime);

$PLromney = 0;
$NLromney = 0;
$totalromney = 0;

if ($romneydiff == 0) {

switch ($twitromney["category"]) {
    case "composed":
        $PLromney = $PLromney + $twitromney["value"];
break;
    case "elated":
        $PLromney = $PLromney + $twitromney["value"];
break;
    case "clearheaded":
        $PLromney = $PLromney + $twitromney["value"];
break;
    case "agreeable":
        $PLromney = $PLromney + $twitromney["value"];
break;
    case "energetic":
        $PLromney = $PLromney + $twitromney["value"];
break;
    case "unsure":
        $NLromney = $NLromney + $twitromney["value"];
break;
    case "tired":
        $NLromney = $NLromney + $twitromney["value"];
break;
    case "depressed":
        $NLromney = $NLromney + $twitromney["value"];
break;
    case "guilty":
        $NLromney = $NLromney + $twitromney["value"];
break;
    case "confused":
        $NLromney = $NLromney + $twitromney["value"];
break;
    case "anxious":
        $NLromney = $NLromney + $twitromney["value"];
break;
    case "hostile":
        $NLromney = $NLromney + $twitromney["value"];
break;
    case "confident":
        $PLromney = $PLromney + $twitromney["value"];
break;
}
$totalromney = $PLromney - $NLromney;

$romlinearray["value"] = $totalromney + $romlinearray["value"];
} 
```

# boost - Boost jam，使用依赖的绝对路径

> ID：12992491
> 
> 赞同：0
> 
> 时间：2012-10-20T20:44:15.170
> 
> 标签：boost, build, bjam, boost-build

我有一个果酱文件层次结构如下：

果酱：

```
lib foo : <file>/SOME/RANDOM/FILE ;

build-project p1 ;
build-project p2 ; 
```

p1 中的 Jamfile：

```
lib bar : bar.cpp 
```

p2中的Jamfile：

```
lib bar2 : bar2.cpp ../p1//bar ..//foo ; 
```

所以 bar2 依赖于 bar 和 foo 使用相对路径。

是否可以在 Jamroot 中编写单个命令，以便我可以在 p2 的 Jamfile 中编写以下命令？

```
lib bar2 : bar2.cpp /p1//bar //foo ; 
```

这会更方便，因为您不再需要考虑相对路径。我知道有`use-project`命令，但是 1）我需要为每个子目录编写一个 use-project，2）我不知道如何使用 use-project 声明根文件夹...

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T16:31:35.080

1）您可以使用和循环自动`use-project`声明：`glob`

```
for p in [ glob */[jJ]amfile ]
{
    use-project /$(p:P) : ./$(p:P) ;
} 
```

`:P`用于获取父目录。更多关于变量扩展[here](http://www.boost.org/build/doc/html/jam/language.html#jam.language.variables.expansion)

2) 为当前项目分配项目 ID 不是用 完成的`use-project`，而是用 完成的`project`：

`project /root ; # common requirements and other useful things can go here if needed`（[链接](http://www.boost.org/build/doc/html/bbv2/overview/projects.html)）

我认为这不是`//foo`目标引用的有效语法。此外，我认为您不能在父项目中使用一些不包含非空项目 ID（或路径）的目标引用来表示目标。

最后你可以在 p2 的 Jamfile 中这样写：

```
lib bar2 : bar2.cpp /p1//bar /root//foo ; 
```

# jquery - 如何使用 .dotdotdot 在段落末尾显示省略号？

> ID：12992492
> 
> 赞同：-1
> 
> 时间：2012-10-20T20:44:22.783
> 
> 标签：jquery, css

我无法让省略号函数正常工作。我希望省略号出现在 div news_inner（morgan、pia 和 gold）中每个段落的末尾。[我从http://dotdotdot.frebsite.nl](http://dotdotdot.frebsite.nl)复制了函数，但我无法理解配置。如何定义我希望每个段落中出现点的位置？建议？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<title>Liquid Layout</title>
<meta http-equiv="content-type" content="text/html;charset=utf-8"/>

<script src="jquery.js" type="text/javascript"></script>
<script src="jquery.dotdotdot-1.5.1.js" type="text/javascript"></script>

<style type="text/css">
* {
margin: 0px 0px;
padding: 0px 0px;
}

/* MAIN WRAPPER */ 
.wrapper {
width: 90%;
margin-right: auto;
margin-left: auto;
}

/* BODY */ 
body {
background-image: url(turf.png);
}

/* HEADER */   
#header {
margin: 0px;
}

/* NAVIGATION */
#nav {
padding: 0px; 
background-color: #A60000;
overflow: hidden;
}

#nav ul {
margin-left: 5.9em;
padding: 0px 0px;
list-style-type: none;      
}

#nav li {
text-align: center;
float: left;
width: 200px;
height: 56px;
margin-right: 1.5em;
padding: .5em 0em .5em 0em;
}

#nav a {
color: #FFFFFF;
display: block;
text-decoration: none;
letter-spacing: 4px;
line-height: 50px;
font-size: 1.5em;
text-transform: uppercase; 
font-weight: bold;
font-family: Copperplate Gothic Light, sans-serif;
}

#nav a:hover {
background: #FFFFFF;
color: #A60000;
border: 3px solid #3CA0D0;
}

/* MAIN COLUMNS */
#main {
background-color: #3CA0D0;
height: 628px;
}

/* PLAYER OF THE WEEK */
#featured {
float: left;
margin-top: .5em;
margin-right: 1em;
margin-bottom: .5em;
margin-left: 1em;
border: 3px solid #A60000;
width: 28%;
height: 605px;
}

#featured img {
float: left;
padding: .5em .5em .5em .5em;
}

#featured ul {
list-style: none;
padding: .5em .5em 0em 0em;
}

#featured li {
font-family: Gill Sans, sans-serif;
letter-spacing: .05em;
line-height: 1.5em;
color: #000044;
}

#featured_main {
clear: both;
padding: 0em .5em .5em .5em;
text-indent: 1em;
text-align: justify;
font-family: Gill Sans, sans-serif;
letter-spacing: .05em;
line-height: 1.3em;
color: #000044;
}

/* LATEST NEWS */
#news {
float: left;
margin-top: .5em;
margin-right: 1em;
margin-bottom: .5em;
border: 3px solid #A60000;
width: 28%;
height: 605px;
}

h1 {
padding: .5em .5em 0em .5em;
font-size: 1em;
font-family: Tahoma, Geneva, sans-serif;
letter-spacing: 1px;
color: #000044;
}

p.morgan, p.pia, p.gold {
padding: .5em .5em 0em .5em;
white-space: nowrap;
overflow: hidden;
text-overflow: ellipsis;
font-family: Gill Sans, sans-serif;
letter-spacing: .05em;
line-height: 1.3em;
color: #000044;
}

a:link {
font-size: 1em;
color: #000044;
}

a:visited {
color: #000044;
}

/* MULTIMEDIA VIDEOS */
#videos {
float: left;
margin-top: .5em;
margin-right: 1em;
margin-bottom: .5em;
border: 3px solid #A60000;
width: 37.8%;
height: 605px;
}

#videos_inner {
text-align: center;
}

p.title {
padding: .5em 0em 1em 0em;
font-family: Tahoma, Geneva, sans-serif;
font-size: 1.2em;
font-weight: bold;
letter-spacing: 2px;
}

/* FOOTER */
#footer {
clear: both;
background-color: #A60000;
}

#footer_inner {
text-align: center;
padding: .3em;
color: #FFFFFF;
font-family: Copperplate / Copperplate Gothic Light, sans-serif;
font-size: 15px;
}

#footer a:link {
font-family: Copperplate / Copperplate Gothic Light, sans-serif;
color: #FFFFFF;
font-size: 15px;
}

#footer a:hover {
color: #FFFFFF;
font-size: 18px;
}

</style>

<script type="text/javascript">

$(document).ready(function() {
    $("#new_inner").dotdotdot({

});

</script>

</head>
<body>

<div id="header">
    <div class="wrapper">
    </div> <!--end div wrapper -->
</div> <!--end div header -->

<div class="wrapper">   
    <div id="nav">      
        <ul>
            <li><a href="home.html">Home</a></li>
            <li><a href="http://www.ussoccer.com/Teams/US-Women/Rosters/120527-Olympic-Roster.aspx">Roster</a></li>
            <li><a href="http://www.ussoccer.com/Teams/US-Women/Coaching-Staff.aspx">Coaches</a>
            <li><a href="http://www.ussoccer.com/Teams/US-Women/Schedule-Results/2012.aspx">Schedule</a></li>
            <li><a href="http://www.ussoccerstore.com/">Store</a></li>
        </ul>
    </div> <!--end div nav -->

<div id="main">
    <div id="featured">
        <img src="abby.png" alt="Abby Wambach, Forward" />

        <ul>
            <li> Name: Abby Wambach </li>
            <li> DOB: June 2, 1980 </li>
            <li> Position: Forward </li>
            <li> Appearances: 191 </li>
            <li> Goals: 146 </li>
            <li> College: University of Florida </li>
            <li> Hometown: Rochester, NY </li>

        </ul>

        <div id="featured_main">
            <p> One of the world's best players in the air, Wambach is the second all-time leading scorer in international soccer history behind only Mia Hamm (158). Wambach surpassed former U.S. WNT teammate Kristine Lilly (130) earlier in 2012 to move into second place. She has 141 goals through the group stage of the 2012 London Olympics. Wambach is a five-time U.S. Soccer Female Athlete of the Year, most recently recognized for her 2011 campaign that included eight goals and four assists. Her ability to wear down defenses with her physical play, aerial game and hard running has long been a key to the USA's success. Has developed into one of the most dangerous goal scorers in the world since debuting for the USA in 2001\. Has the best goals per game ratio in U.S. history, having scored 125 goals in her 166 games through the end of 2011\. Of her 125 goals, 51 have come with her head.</p>
        </div> <!--end div featured_main -->

    </div> <!--end div featured -->

    <div id="news">
        <div id="new_inner">
            <h1><a href="http://www.womenssoccerunited.com/profiles/blogs/alex-morgan-wins-sportswoman-of-the-year-award">Alex Morgan Named Team Sports Woman of the Year</a></h1>
            <p class="gold">USWNT forward Alex Morgan was awarded the Sportswoman of the Year Award (Team Sport) last night at the 33rd Salute to Women in Sports Gala in New York. The prestigious award was given to Alex Morgan for her exceptional performances in a team sport over a 12 month span. During the past 12 months, Alex Morgan has proved herself to be an indispensable part of the US Women's National Soccer Team. 

            <h1><a href="http://www.ussoccer.com/News/Womens-National-Team/2012/08/Pia-Sundhage-to-Return-Home-to-Pursue-Opportunities-in-Sweden.aspx">Head Coach Pia Sundhage Resigns</a></h1>
            <p class="pia">U.S. Women’s National Team head coach Pia Sundhage has decided to return home to pursue opportunities in Sweden. “After the Olympics we had discussions and early in the process it became clear that Pia was very interested in returning home to Sweden,” said U.S. Soccer President Sunil Gulati. “It certainly wasn’t an easy decision for U.S. Soccer or Pia. She deserves a tremendous amount of credit for the amazing success the U.S. Women’s National Team had during the past five years. On behalf of U.S. Soccer, we sincerely appreciate Pia’s hard work, dedication and commitment to the organization. We wish her all the best in the future.”&lt;/p>

            <h1><a href="http://www.ussoccer.com/News/Womens-National-Team/2012/08/US-WNT-vs-Japan-Gold-Medal-Match.aspx">U.S. Women Win Fourth Olympic Gold</a></h1>
        </div> <!--end div news_inner -->
            <p class="gold">The U.S. Women’s National Team captured the gold medal at the 2012 London Olympics with a 2-1 victory against Japan in front of a crowd of 80,203 at the famed Wembley Stadium. U.S. midfielder Carli Lloyd, the gold medal hero of the 2008 Olympics, led the way once again with both goals for the United States as they upended 2011 FIFA Women’s World Cup champion Japan and captured their third-consecutive Olympic championship.</p>       
    </div> <!--end div news -->

    <div id="videos">
        <div id="videos_inner">
            <p class="title">Multimedia Highlights</p>
            <iframe width="450" height="253" src="http://www.youtube.com/embed/Nd3udbFc5tw" frameborder="0" allowfullscreen></iframe> <br /> <br />

            <iframe width="450" height="253" src="http://www.youtube.com/embed/7a4rNNXOOjY" frameborder="0" allowfullscreen></iframe>
        </div> <!--end div videos_inner -->
    </div> <!--end div videos -->
</div> <!--end div main -->

<div id="footer">
    <div id="footer_inner">
        For more information about the U.S. Women's National Team, contact <a href="mailto:mkm49@pitt.edu">Michelle McCullough</a>.
    </div><!--end div footer_inner-->
</div><!--end div footer-->
</div> <!--end wrapper div -->

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T15:54:11.153

我看到了几个潜在的问题：

1) 调用 .dotdotdot 时有错字

您的代码（.dotdotdot 未关闭）：

```
$(document).ready(function() {
    $("#new_inner").dotdotdot({
}); 
```

应该：

```
$(document).ready(function() {
    $("#new_inner").dotdotdot();
}); 
```

2）尝试将 .dotdotdot 直接应用于元素，而不是容器 id

就像是：

```
<script type="text/javascript">
    $(document).ready(function() {
        $(".dotdotdot").dotdotdot({
            ellipsis: '... ',
            height  : 75
        });
    });
</script>
<div id="new_inner">
    <h1>
        <a href="http://www.womenssoccerunited.com/profiles/blogs/alex-morgan-wins sportswoman-of-the-year-award">Alex Morgan Named Team Sports Woman of the Year</a>
    </h1>
    <p class="gold dotdotdot">USWNT forward Alex Morgan was awarded the Sportswoman of the Year Award (Team Sport) last night at the 33rd Salute to Women in Sports Gala in New York. The prestigious award was given to Alex Morgan for her exceptional performances in a team sport over a 12 month span. During the past 12 months, Alex Morgan has proved herself to be an indispensable part of the US Women's National Soccer Team. 
    <h1>
        <a href="http://www.ussoccer.com/News/Womens-National-Team/2012/08/Pia-Sundhage-to-Return-Home-to-Pursue-Opportunities-in-Sweden.aspx">Head Coach Pia Sundhage Resigns</a></h1>
    <p class="pia dotdotdot">U.S. Women’s National Team head coach Pia Sundhage has decided to return home to pursue opportunities in Sweden. “After the Olympics we had discussions and early in the process it became clear that Pia was very interested in returning home to Sweden,” said U.S. Soccer President Sunil Gulati. “It certainly wasn’t an easy decision for U.S. Soccer or Pia. She deserves a tremendous amount of credit for the amazing success the U.S. Women’s National Team had during the past five years. On behalf of U.S. Soccer, we sincerely appreciate Pia’s hard work, dedication and commitment to the organization. We wish her all the best in the future.”&lt;/p>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T21:35:21.273

为什么不是 css `ellipsis`？

```
.your-paragraphs-selector {
width: 100px; /* change according to your needs */
white-space: nowrap;
overflow: hidden;
text-overflow: ellipsis;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-25T10:46:37.327

我在我的项目中使用了这样的方法，它对我来说很好用

```
 $(window).load(function() {
            setTimeout(function() {
                $('.dotEllipse').dotdotdot({
                    ellipsis: '... ',

                    height: 100,
                    tolerance: 0
                });
            }, 100);

        }); 
```

# css - 无法使用 class=pull-right 或 float:right 向右浮动 twitter 引导导航栏项目

> ID：12992493
> 
> 赞同：12
> 
> 时间：2012-10-20T20:44:26.963
> 
> 标签：css, ruby-on-rails, twitter-bootstrap, formatting, firebug

我正在使用 Twitter 引导程序和 Rails，但我似乎无法将导航栏项目浮动到右侧。

我尝试使用这样的东西：

```
<li class="whoami pull-right"> <%= link_to ("Logged in as: " + current_user.name), edit_user_registration_path , :id=>"Edit account"%> </li> 
```

...但链接留在左边，萤火虫显示`"float:left;"`

所以我试图覆盖 css float in`bootstrap_and_overrides.css.less`和 in `home.html.erb`，但都没有奏效。Firebug 表示它找到了两个 css float 语句，但选择了 bootstrap 选项而不是我的。所以我被困住了，想知道如何自定义导航栏。我可能在这里做错了什么，但我只是没有看到。

这是我的代码：

应用程序.html.erb：

```
<!DOCTYPE html>
<html>
  <head>
  ... removed to shorten the length of this post
  </head>
  <body>
    <header>
          <%= render 'layouts/navigation' %>
    </header>
    <div id="main" role="main">
      <div class="container">
        <div class="content">
           <div class="row">
            <div class="span12">
              <%= render 'layouts/messages' %>
              <%= yield %>
            </div>
          </div>
          <footer>
          </footer>
        </div>
      </div> <!--! end of .container -->
    </div> <!--! end of #main -->
  </body>
</html> 
```

_navigation.html.erb：

```
<div class="container span12">
  <div class="navbar navbar-fixed-top">
    <div class="navbar-inner">
      <div class="container">
        <ul class="nav">
        <%= link_to "Cases", root_path, :class=>"brand"%>
          <% if user_signed_in? %>
              <li> <%= link_to "My Cases", cases_path %> </li> 
              <li> <%= link_to 'Dash', dash_path %> </li> 
            <% if current_user.has_role? :admin %>
              <li> <%= link_to 'Admin', users_path, :id=>"Admin" %> </li>
            <% end %>
            <li> <%= link_to 'Logout', destroy_user_session_path, :method=>'delete', :id => "Logout" %> </li>
            <li class="whoami"> <%= link_to ("Logged in as: " + current_user.name), edit_user_registration_path , :id=>"Edit account"%> </li>
          <% else %>
              <li> <%= link_to 'Login', new_user_session_path %> </li>
              <li> <%= link_to 'Sign up', new_user_registration_path %> </li>
          <% end %>
        </ul>
      </div>
    </div>
  </div>
</div> 
```

bootstrap_and_overrides.css.less：

```
@import "twitter/bootstrap/bootstrap";
body { 
    padding-top: 60px;
}
@import "twitter/bootstrap/responsive";

// Set the correct sprite paths
// ...REMOVED to shorten the length of this post
// Your custom LESS stylesheets goes here
//
// Since bootstrap was imported above you have access to its mixins which
// you may use and inherit here
//
// If you'd like to override bootstrap's own variables, you can do so here as well
// See http://twitter.github.com/bootstrap/less.html for their names and documentation
//
// Example:
// @linkColor: #ff0000;

.whoami {
    float:right;
} 
```

当我加载页面时，我看到了导航栏，但最后一项没有浮动到右侧。

看起来像这样：
![显示萤火虫信息的屏幕截图](../Images/7207cfc1a255474996f726273ae3d836.png)

这里还有另一个屏幕截图，显示[了更多信息](https://imgur.com/SLGfv)。

如您所见，firebug 找到了一个`"float:right;"`选项，但表明`"float:left;"`使用了一个选项。

我在这里理解有差距，但我不确定在哪里。

请回复以下内容：

*   使用 pull-right 和 twitter 引导导航栏格式
*   覆盖css
*   解释萤火虫输出

    编辑：我在这里发布了我的第一个 jsfiddle：http: [//jsfiddle.net/uCHQs/2/](http://jsfiddle.net/uCHQs/2/) 它代表浏览器“显示源”的复制/粘贴，我收集的是相关的 css 负载并由 rails 提供.

提前致谢！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-20T22:35:11.293

知道了。

让它工作需要用多个导航元素的无序列表填充嵌套在 navbar-inner 中的容器。这个 jsfiddle 向我展示了[http://jsfiddle.net/N6vGZ/4/的方式](http://jsfiddle.net/N6vGZ/4/)

此代码有效：

```
<div class="container span12">
  <div class="navbar navbar-fixed-top">
    <div class="navbar-inner">
      <div class="container">
        <%= link_to "Cases", root_path, :class=>"brand"%>
          <ul class="nav">
          <% if user_signed_in? %>
              <li> <%= link_to "My Cases", cases_path %> </li> 
              <li> <%= link_to 'Dash', dash_path %> </li> 
            <% if current_user.has_role? :admin %>
              <li> <%= link_to 'Admin', users_path, :id=>"Admin" %> </li>
            <% end %>
            <li> <%= link_to 'Logout', destroy_user_session_path, :method=>'delete', :id => "Logout" %> </li>
          </ul>
           <ul class="nav pull-right"> <li> <%= link_to ("Logged in as: " + current_user.name), edit_user_registration_path , :id=>"Edit account"%> </li></ul>
          <% else %>
            <ul class="nav">
              <li> <%= link_to 'Login', new_user_session_path %> </li>
              <li> <%= link_to 'Sign up', new_user_registration_path %> </li>
            </ul>
          <% end %>
        </ul>
      </div>
    </div>
  </div>
</div> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-20T20:57:17.743

您是否尝试过更具体地使用您的 CSS？

```
.navbar ul.nav li.whoami {
    float:right;
} 
```

有时，如果先前的 CSS（在这种情况下为引导程序）非常具体，则需要相同级别的具体性（或更高）来覆盖它。

发布 jsfiddle 可能会有所帮助。截图很难调试；）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-24T10:44:42.697

你写的代码是

```
 class="nav navbar-nav" col-12 
```

上面的代码可以这样替换

```
class="nav navbar-nav col-12" 
```

并且在下一个插入时

```
class pull-right in your li button 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-20T20:58:16.103

尝试注释掉该行

//...删除

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-05T17:23:42.060

```
<li><a href="#examples"><span class="glyphicon glyphicon-chevron-right" style="float:right;"></span> Examples</a></li> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-12-03T10:34:45.233

添加新类=“行”

发生了什么......在你的代码中。当它进入移动设备时， div 将附加在其他 div 上。这是简单的解决方案。

# javascript - 如何读取/写入本地 file:/// HTML 文档的 cookie？

> ID：12992494
> 
> 赞同：9
> 
> 时间：2012-10-20T20:44:26.123
> 
> 标签：javascript, android, jquery, cookies, setcookie

如何`file:///`使用 Javascript 或 jQuery 读取/写入本地 HTML 文档的 cookie？

我试过这个>>

```
function setCookie(c_name, value, exdays)
{
  var exdate = new Date();
  exdate.setDate(exdate.getDate() + exdays);
  var c_value = escape(value) + 
    ((exdays == null) ? "" : "; expires=" + exdate.toUTCString());
  document.cookie = c_name + "=" + c_value;
}

function getCookie(c_name)
{
  var i, x, y, ARRcookies = document.cookie.split(";");
  for (i = 0; i < ARRcookies.length; i++)
  {
    x = ARRcookies[i].substr(0, ARRcookies[i].indexOf("="));
    y = ARRcookies[i].substr(ARRcookies[i].indexOf("=") + 1);
    x = x.replace(/^\s+|\s+$/g, "");
    if (x == c_name)
    {
      return unescape(y);
    }
  }
} 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-20T20:50:53.487

这取决于您的浏览器。Chrome 例如不允许本地文件的 cookie。请参阅：[本地 HTML 文件的 cookie 保存位置](https://stackoverflow.com/questions/8602833/where-cookie-saved-for-local-html-file)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-07-31T14:13:56.670

这将在本地工作

* * *

```
// save data value

localStorage.setItem("name", "John");

// retrieve data value

var name = localStorage.getItem("name"); 
```

[原始答案。](https://stackoverflow.com/a/19211862/1680301)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T20:51:49.320

试试这个：

[https://github.com/carhartl/jquery-cookie](https://github.com/carhartl/jquery-cookie)

如果您需要存储多个值，请尝试以下操作：

[https://github.com/tantau-horia/jquery-SuperCookie](https://github.com/tantau-horia/jquery-SuperCookie)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-21T07:09:17.327

作为从文件加载页面的替代方法，您可以运行网络服务器并从 localhost 加载页面。Apache 带有 OSX 和 Ubuntu。设置完成后，您将能够在本地页面上使用 cookie。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2020-08-06T21:53:51.667

在不同的浏览器中尝试 Mozilla 允许本地存储 cookie

# android - Android 应用程序在手机启动时崩溃

> ID：12992495
> 
> 赞同：2
> 
> 时间：2012-10-20T20:44:27.357
> 
> 标签：android, service, sharedpreferences

我有权接收启动完成，并且我已经指定了要运行的接收器。

```
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />

<receiver android:name="xyz.android.MyAlarm" >
        <intent-filter>
            <action android:name="android.intent.action.BOOT_COMPLETED" />
        </intent-filter>
    </receiver> 
```

这是接收器代码

```
public class MyAlarm extends BroadcastReceiver
{
@Override
public void onReceive(Context context, Intent intent) {
    Intent i = new Intent(context, InviteService.class);
    context.startService(i);        
}
} 
```

这是我的 InviteService 服务代码片段

```
public class InviteService extends IntentService {

private String userId;
private SharedPreferences settingsPrefs;

public InviteService() {
    super("InviteService");
}

@Override
protected void onHandleIntent(Intent intent) {

    if (Utils.isOnline(this)) {
        userId = getSharedPreferences("user-session", MODE_PRIVATE)
                .getString("userId", null);
        settingsPrefs = getSharedPreferences(userId, MODE_PRIVATE);

        Log.d("turnOffAlarm",
                "" + settingsPrefs.getBoolean("turnOffAlarm", false));
        if (userId == null
                || settingsPrefs.getBoolean("turnOffAlarm", false)) {
            stopService(intent);
            return;
        }
      }
    } 
```

当用户重新启动手机时，会出现以下错误消息。

```
java.lang.NullPointerException
at xyz.android.InviteService.onHandleIntent(InviteService.java:134)
at android.app.IntentService$ServiceHandler.handleMessage(IntentService.java:59)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:130)
at android.os.HandlerThread.run(HandlerThread.java:60) 
```

我得到空指针异常的行是记录 turnOffAlarm 的行。所以这就是正在发生的事情。出于某种原因，userId 正在获取 null 值，而实际上不应如此。此值已存储在首选项文件中，并且在手机重新启动之前不会出现问题。

我无法在模拟器上重现此错误，有什么建议吗？

# android - Android - Finish() 重新启动当前活动

> ID：12992497
> 
> 赞同：0
> 
> 时间：2012-10-20T20:44:42.380
> 
> 标签：android, android-activity

我有一个拒绝在第一次调用 finish() 时关闭的活动。我最初在活动中放置了一个取消按钮，但后来我注意到当我使用后退按钮时它也表现出相同的行为。可以这样描述： 1\. 活动打开，并填写适当的数据（来自上一个活动的列表视图）。2\. 按返回按钮，所有字段的数据都被清除，但不会让用户返回到原来的活动。3\. 再次按下返回按钮，用户返回到原来的活动。

我可以发布代码，但我不确定问题出在当前活动还是主要活动中。我可以提到切换到使用上下文菜单打开活动。

更新：好的，看起来这两个建议都是正确的，主要活动确实是启动 2 个版本的编辑活动。现在我只是想弄清楚为什么。当我切换到列表项选项的上下文菜单时，我注意到发生了这种情况。然而，添加按钮是一个菜单项。以下是相关代码：

```
 @Override
public boolean onCreateOptionsMenu(Menu menu) {
    super.onCreateOptionsMenu(menu);

    // add(int groupId, int itemId, int order, int titleRes)
    menu.add(0, INSERT_ID, 0, R.string.menu_insert);
    menu.add(0, SETTINGS_ID, 1, R.string.sharedPrefButton);
    menu.add(0, COMMON_DESC_ID, 2, R.string.commonDescButton);
    menu.add(0, RESET_ID, 3, R.string.menu_reset);
    return true;
}

/*
 * This is going to handle the "Add Expenditure" menu item. When this is selected, the 
 * onOptionsItemSelected() method will be called with the item.getId() set to INSERT_ID 
 * (the constant we used to identify the menu item).
 */

@Override
public boolean onMenuItemSelected(int featureId, MenuItem item) {
    switch(item.getItemId()) {
        case INSERT_ID:
            createExpenditure();
            break;
        case SETTINGS_ID:
            manageSharedPrefs();
            break;
        case COMMON_DESC_ID:
            manageCommonDesc();
            break;
    }
    return super.onMenuItemSelected(featureId, item);
}

public void onCreateContextMenu(ContextMenu menu, View v, ContextMenuInfo menuInfo) {
    super.onCreateContextMenu(menu, v, menuInfo);
    menu.add(0, DELETE_ID, 0, R.string.menu_delete);
    menu.add(0, EDIT_ID, 0, R.string.menu_edit);
}

public boolean onContextItemSelected(MenuItem item) {
    AdapterContextMenuInfo info = (AdapterContextMenuInfo) item.getMenuInfo();
    int itemId = item.getItemId();
    switch(itemId) {

        case DELETE_ID: 
            mDbHelper.deleteExpenditure(info.id);
            fillData();
            break;

        case EDIT_ID: 
            Intent i = new Intent(this, ExpenditureEdit.class);
            i.putExtra(ExpendituresDbAdapter.KEY_ROWID, info.id);
            startActivityForResult(i, ACTIVITY_EDIT);
            break;
    }

    return super.onContextItemSelected(item);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T20:52:59.467

您似乎两次启动了相同的活动。这是您的活动堆栈：

```
Original Activity, starts ListActivity
    ListActivity (no data in fields), starts another instance of itself
        ListActivity (fill in appropriate data) 
```

现在，当您按下后退按钮时：

```
 ListActivity, close this second instance but...
    ListActivity (still no data), the first instance resumes, so push back again
Original Activity 
```

（没有代码，我只能描述我认为正在发生的事情……）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T13:30:00.017

发生这种情况是因为显然 onMenuItemSelected 每当执行 onContextItemSelected 时都会被调用。虽然我仍然不确定为什么，但如果我在我的 onMenuItemSelected 方法中使用条件，一切似乎都工作正常：

```
 @Override
public boolean onMenuItemSelected(int featureId, MenuItem item) {

    if (featureId == Window.FEATURE_CONTEXT_MENU)
    {
        Log.i("EZBudget","Context Menu");
    }
    else if (featureId == Window.FEATURE_OPTIONS_PANEL)
    {
        switch(item.getItemId()) {
         case INSERT_ID:
             createExpenditure();
             break;
         case SETTINGS_ID:
            manageSharedPrefs();
            break;
         case COMMON_DESC_ID:
            manageCommonDesc();
            break;
        }

    }

    return super.onMenuItemSelected(featureId, item);
} 
```

我在另一篇文章中找到了这个答案：[onContextItemSelected 没有被调用](https://stackoverflow.com/questions/6146909/oncontextitemselected-doesnt-get-called)

# objective-c - 使用表格视图更改视图中的标签

> ID：12992499
> 
> 赞同：0
> 
> 时间：2012-10-20T20:44:50.133
> 
> 标签：objective-c, ios, delegates, datasource, tableview

请先看这个[截图。](http://www.flickr.com/photos/74322780@N08/8106422075/in/photostream)我想要做的是当我单击右侧小表格视图中的一个单元格时。然后标签应该更改为其他一些数据。我正在为我的数据源和委托使用自定义控制器。我在 viewDidLoad 中设置控制器。

```
- (void)viewDidLoad
{

    tabelPlayers=[[tblPlayersDataSourceDelegate alloc]init];
    tblPlayers.dataSource=tabelPlayers;
    tblPlayers.delegate=tabelPlayers;
    [tabelPlayers setTableSource:_playersArray];
} 
```

在这个 tblPlayersDataSourceDelegate 我为我的 didSelectCellAtIndexPath 做这个

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
  Team *player = [_tableSource objectAtIndex:indexPath.row];
    PlayerDetailController *detail = [[PlayerDetailController alloc]init];
    [detail setStrNaam:player.name];
    [detail reloadInputViews];
} 
```

但这并没有改变任何东西。有人可以帮助我吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T03:15:39.113

如果我正确理解您的问题，那么您要做的是根据右侧小表格视图中选择的玩家更改左侧标签上的信息。

我不完全理解您的代码，但作为一个通用结构，为了达到您所描述的相同结果，我会做的是：

1.  创建一个包含“项目”（内部 NSDictionary 的）的 NSDictionary（可以在 *.plist 文件中）。
2.  每个“项目”都包含键（玩家年龄、玩家编号或其他）。

右边的小表将使用另一个 NSArray，它将由主 NSArray 键构造：

```
NamesArray = [mainPlayersDictionary allKeys]; 
```

每当在您的小表格视图中选择一行时，您只需根据主 NSDictionary 中的键加载所有标签：

```
[ageLabel setText: [[mainPlayersDictionary objectAtIndex:selectedRowIndex] objectForKey:plAge];
[pNumLable setText:[[mainPlayersDictionary objectAtIndex:selectedRowIndex] objectForKey:pNum]; 
```

还有你的套装。希望有帮助。

# java - Java Canvas 放大闪烁

> ID：12992500
> 
> 赞同：1
> 
> 时间：2012-10-20T20:44:58.930
> 
> 标签：java, zooming, flicker, doublebuffered, java-canvas

我正在做一个需要我能够在画布上放大和缩小的项目。我正在使用以下方法：

```
setSize(new Dimension(WIDTH * scale, HEIGHT * scale)); 
```

然后从那里修改比例变量。这行得通，除了大多数时候我会得到一个恼人的闪烁。它是三重缓冲的，所以我真的不明白如何将画布转换为合适的大小需要那么长时间......

无论如何，如果有什么我想念的，我很想知道。

这是我的 update() 方法：

```
public void update() {
    updateCount++;

    if (input.mouseWheel.getNotchesMoved() != 0 && SCALE >= MIN_SCALE
            && SCALE <= MAX_SCALE) {
        SCALE += input.mouseWheel.getNotchesMoved();
        if (SCALE > MAX_SCALE)
            SCALE = MAX_SCALE;
        if (SCALE < MIN_SCALE)
            SCALE = MIN_SCALE;
        setSize(new Dimension(WIDTH * SCALE, HEIGHT * SCALE));
    }
    input.refresh();
} 
```

提前致谢，

树

编辑：当我说“Canvas”时，我的意思是 java.awt.Canvas，主类的基类，很抱歉有任何混淆。

# c - 收到“错误：‘函数’的类型冲突”

> ID：12992505
> 
> 赞同：4
> 
> 时间：2012-10-20T20:45:26.013
> 
> 标签：c, function, compiler-errors

我正在创建一个程序来从二进制、十进制、十六进制和八进制转换为这些选项中的任何一个。对于十六进制，我需要一种将大于 9 的值格式化为 A、B、C、D、E、F 之一的方法。由于这将在多个函数中重复，因此我决定创建以下函数：

```
char hexRepresentation(double n){
    if(n > 9){
        if(n==10) return 'A';
        if(n==11) return 'B';
        if(n==12) return 'C';
        if(n==13) return 'D';
        if(n==14) return 'E';
        if(n==15) return 'F';
    }

    return (char)n;
} 
```

但是，当我尝试编译时，我收到错误

> 'hexRepresentation' 的冲突类型

我对 C 语言完全陌生，来自 Java，并且正在为应该是最简单的实现的东西撞到墙上。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-20T21:19:52.217

您不会收到声明类型的错误，因为在 C 中，当您不转发声明函数时，大多数编译器都会假定一个返回 int 类型的 extern 函数。实际上编译器应该警告你这个（大多数都会这样做）。然后稍后当编译器实际到达函数实现时，它会找到不同的返回类型，在本例中为 char，然后抛出“冲突类型”错误。只需转发声明所有功能以避免此类错误。

关于什么是最好的方法，比如下面的代码会产生类似的结果：

```
if (n > 9)
{
   return('A' + (n - 10));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T21:32:50.003

无论您在发布的代码中做什么，您都没有`double`在函数中使用数据类型。从函数返回类型来看，您似乎永远不会看到返回值 >127。

这段代码突出了一些问题：（这只是说明性的）

```
char hexRepresentation(double n){
    if(n > 9){//comparing (double>int). Bad.
        if(n==10) return 'A';
        if(n==11) return 'B';
        if(n==12) return 'C';//You wrote if(double == int). Bad.
        if(n==13) return 'D';
        if(n==14) return 'E';
        if(n==15) return 'F';
    }

    return (char)n; //again unsafe downgrade from 8 bytes double to 1 byte char.
} 
```

即使您修复了编译器错误，由于函数中数据类型的这种危险使用，您也可能无法始终获得所需的结果。

要知道它为什么不好，请看这里：

[http://www.cygnus-software.com/papers/comparingfloats/Comparing%20floating%20point%20numbers.htm](http://www.cygnus-software.com/papers/comparingfloats/Comparing%20floating%20point%20numbers.htm)

我会在该函数体中使用`fabs(n)`而不是任何地方。`n`

`hexRepresentation`如果在此函数定义之前存在同名函数的先前声明或定义，则会显示错误“'hexRepresentation' 的类型冲突” 。此外，如果您没有声明一个函数并且它仅在被调用后出现，则`int`编译器会自动假定它是。

因此，在 main() 之前声明和定义您的函数或在 main() 之前声明并在文件中的任何其他位置定义函数，但是使用相同的函数原型。

做：

```
 char hexRepresentation(double); //Declaration before main
 main()
 {
   ...
 }
 char hexRepresentation(double n){//Definition after main
 ...
 } 
```

或者

```
 char hexRepresentation(double n){ //Declaration and definition before main
  ...
 }

 main()
 {
    ...
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T21:09:54.060

只需创建一个具有推送和弹出功能的堆栈（用于 char）。我没有返回值，只是在同一个函数中打印它。（仅针对整数值实现）

```
#define max 100
char a[max];

void hex(int n)
{
 while(n>0)
 {
 int rem = n%16;
 if (rem<10)
   push(rem+'0');
 elsif(rem >=10 && rem <16)
   {
     switch(rem)
     {
       case 10:
         push('A');break;
         case 11:
         push('B');break;
         case 12:
         push('C');break;
         case 13:
         push('D');break;
         case 14:
         push('E');break;
         case 15:
         push('F');break;
     }
    else
       n=n/16;
   }
   }
   i=0;
   while(top>-1)
     a[i++]=pop();
   i=0;
   while(a[i]!='\0')
     printf("%c",a[i++]);
} 
```

有帮助吗？

# codeigniter - 剑道 UI + Codeigniter

> ID：12992506
> 
> 赞同：5
> 
> 时间：2012-10-20T20:45:27.463
> 
> 标签：codeigniter, kendo-ui

我正在尝试使用 Kendo UI + Codeigniter 创建一些 CRUD 网格，我想问一下

任何人都知道如何处理视图中的剑道脚本。使用通用视图是否更好

对于所有网格，每次将剑道脚本作为参数传递给视图还是更好

为每个网格使用单独的视图并在视图中硬编码 Kendo 脚本。

或者有没有更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T16:41:41.863

对于 Web 应用程序，最好保持其离散性 - 因此为每个网格创建单独的视图并在视图中硬编码 kendo 脚本将是最佳选择。

# java - 了解 Java 的 DOM 解析器

> ID：12992508
> 
> 赞同：0
> 
> 时间：2012-10-20T20:45:30.567
> 
> 标签：java, parsing, dom

下面是我试图用 DOM、我的代码和我的输出来解析的 XML。我需要从“简单数据”中获取信息，但我没有这样做。

XML:

```
<kml>
  <Document>
    <Folder id="kml_ft_Meter_Rates_and_Time_Limits">
      <name>Meter_Rates_and_Time_Limits</name>
      <Placemark id="kml_1">
        <name>$1.00 / hr 2hr time limit</name>
        <snippet> </snippet>
        <description><![CDATA[<center><table><tr><th colspan='2' align='center'><em>Attributes</em></th></tr><tr bgcolor="#E3E3F3">
          <th>RATE</th>
          <td>$1.00</td>
          </tr><tr bgcolor="">
          <th>LIMIT</th>
          <td>2hr</td>
          </tr></table></center>]]>
        </description>
        <styleUrl>#ParkingMeterStyler_KMLStyler</styleUrl>
        <ExtendedData>
          <SchemaData schemaUrl="#Meter_Rates_and_Time_Limits">
            <SimpleData name="RATE">$1.00</SimpleData>
            <SimpleData name="LIMIT">2hr</SimpleData>
          </SchemaData>
        </ExtendedData>
        <LineString>
          <coordinates>-123.100739208611,49.2630169018194,0 -123.100348847572,49.2630078055425,0 </coordinates>
        </LineString>
      </Placemark>
    </Folder>
  </Document>
</kml> 
```

出于调试目的，用 sysouts 填充的代码：

```
 System.out.println("Root element :" + doc.getDocumentElement().getNodeName());
        System.out.println("Root 1st child :" + doc.getDocumentElement().getChildNodes().item(1).getNodeName());
        System.out.println("Document 1st child :" + doc.getDocumentElement().getChildNodes().item(1).getChildNodes().item(1).getNodeName());
        System.out.println("Document 2nd child :" + doc.getDocumentElement().getChildNodes().item(1).getChildNodes().item(2).getNodeName());
        System.out.println("Document 3rd child :" + doc.getDocumentElement().getChildNodes().item(1).getChildNodes().item(3).getNodeName());
        System.out.println("Document 4th child :" + doc.getDocumentElement().getChildNodes().item(1).getChildNodes().item(4).getNodeName());
        System.out.println("Document 5th child :" + doc.getDocumentElement().getChildNodes().item(1).getChildNodes().item(5).getNodeName());
        System.out.println("-----------------------");

        NodeList nList = doc.getElementsByTagName("Placemark");
        nList = nList.item(1).getChildNodes();
        System.out.println("Placemark list, 1st placemark 1st child :" + nList.item(1).getNodeName());
        System.out.println("Placemark list, 1st placemark 2nd child :" + nList.item(2).getNodeName());
        System.out.println("Placemark list, 1st placemark 3rd child :" + nList.item(3).getNodeName());
        System.out.println("Placemark list, 1st placemark 4th child :" + nList.item(4).getNodeName());
        System.out.println("-----------------------");
        System.out.println("Placemark list, 1st placemark 9th child :" + nList.item(9).getNodeName());
        System.out.println("-----------------------");
        nList = nList.item(9).getChildNodes();
        System.out.println("Extended data, 1st child :" + nList.item(1).getNodeName());
        System.out.println("-----------------------");
        System.out.println("Schema data, 1st child :" + nList.item(1).getChildNodes().item(1).getNodeName());
        System.out.println("Simple data :" + nList.item(1).getChildNodes().item(4).getNodeName());
        System.out.println("-----------------------");
        System.out.println("Schema data, 2nd child :" + nList.item(1).getChildNodes().item(3).getNodeName());
        System.out.println("Simple data :" + nList.item(1).getChildNodes().item(4).getNodeName()); 
```

控制台输出：

```
Root element :kml
Root 1st child :Document
Document 1st child :name
Document 2nd child :#text
Document 3rd child :visibility
Document 4th child :#text
Document 5th child :Style
-----------------------
Placemark list, 1st placemark 1st child :name
Placemark list, 1st placemark 2nd child :#text
Placemark list, 1st placemark 3rd child :snippet
Placemark list, 1st placemark 4th child :#text
-----------------------
Placemark list, 1st placemark 9th child :ExtendedData
-----------------------
Extended data, 1st child :SchemaData
-----------------------
Schema data, 1st child :SimpleData
Simple data :#text
-----------------------
Schema data, 2nd child :SimpleData
Simple data :#text 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T21:30:14.770

`nList.item(0).getChildNodes().item(9).getChildNodes().item(1).getChildNodes().item(1).getTextContent()`--> 打印`$1.00`和

`nList.item(0).getChildNodes().item(9).getChildNodes().item(1).getChildNodes().item(3).getTextContent()`--> 打印`2hr`.

这里`nList`用在这行之后`NodeList nList = doc.getElementsByTagName("Placemark");`。请相应地修复您的遍历。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T21:03:40.523

我不确定你到底想要什么。也许再详细一点。

org.w3c.Node 有一个方法`getTextContent()`。通常，这些 w3c 类使用 to 的强制转换，`item(i)`例如[Element](http://docs.oracle.com/javase/7/docs/api/org/w3c/dom/Element.html)。

要跳过空白文本（节点名称#text`），或者只是更直接地访问特定元素，可以使用 XPath。

# ios - UIStepper 吞下触摸

> ID：12992512
> 
> 赞同：3
> 
> 时间：2012-10-20T20:45:39.617
> 
> 标签：ios, objective-c, uitextfield, uistepper

我正在使用 an`UIStepper`来更改显示在 a 中的值，`UITextField`并且可以选择在`UITextField`.

一切正常，但有一个不受欢迎的行为：`UITextField`只能编辑按下对象本身的上半部分，因为下半部分的触摸被`UIStepper`.

我一直在寻找答案，但我没有找到任何答案。不过我有一些提示。

`UIStepper`有 2 个按钮和 1 个`ImageView`，并且在整个过程中检测到触摸`ImageView`（不可见或不可编辑）。

有任何想法吗？

![在此处输入图像描述](../Images/1ca63f5a599e1bc69e1ebd437190cf79.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T20:13:09.910

要解决这个问题很可能需要子类化。您可以[`pointInside:withEvent:`](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIView_Class/UIView/UIView.html#//apple_ref/occ/instm/UIView/pointInside%3awithEvent%3a)在`UIStepper`子类中覆盖并返回`NO`，除非严格在步进器的范围内：

```
- (BOOL)pointInside:(CGPoint)point withEvent:(UIEvent *)event {
    return CGRectContainsPoint(self.bounds, point);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T20:39:46.947

一种选择是将步进器和文本字段都放在一个容器视图中，`-hitTest:withEvent:`以便在查询步进器之前查询文本字段。如果文本字段说它被击中，则返回一个指向文本字段的指针。如果没有，请检查步进器，如果它说它被击中，则返回。

控件有时会假装比实际更大，以便更容易触摸。使用前面的技术应该可以让您尽可能多地保留步进器的额外可触摸区域，而不会妨碍文本视图的使用。

# php - 在以下情况下如何禁用输入类型=文本

> ID：12992515
> 
> 赞同：0
> 
> 时间：2012-10-20T20:46:07.773
> 
> 标签：php, javascript, html

我有下表是为 MySQL 表中的每个来宾条目构建的。

```
 echo '<tr>
            <td>'.$gastId[$i]." ".$voornaam[$i].'</td>
            <td><input type="radio" name=present'.$gastId[$i].'[] value=1 onclick="setReadOnly(this)" checked></td>
            <td><input type="radio" name=present'.$gastId[$i].'[] value=2 onclick="setReadOnly(this)"></td>
            <td><input type="text"  name="artiest[]" value="'.$artiest[$i].'"></td>
            <td><input type="text"  name="titel[]" value="'.$titel[$i].'"></td>
        </tr>'; 
```

我想根据存在的单选按钮'.$gastId[$i]禁用两个字段`artiest`（艺术家）和（标题）。`titel`

我试图用 javascript 解决它，但我对 javascript 的经验很少。有没有办法通过 ID 或其他方式链接每行的单选按钮和文本字段？

```
<script language='javascript'>
<!-- //
function setReadOnly(obj)
{
    if(obj.value == 1)
    {
        document.forms[0].artiest.readOnly = 0;
    } else {
        document.forms[0].artiest.readOnly = 1;
    }
}
// -->
</script> 
```

非常感谢您的帮助！

## 编辑 21-10-2012

对不起，我应该更清楚。

如果表格如下所示：

```
------------------------------------------------
|  P  |  NP  | Artist        | Title           |
------------------------------------------------
|  X  |      | Enabled       | Enabled         |
------------------------------------------------
|     |  X   | Disabled      | Disabled        |
------------------------------------------------
etc 
```

因此，该行的单选按钮控制是否启用或禁用同一行中的字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T20:55:45.953

只需将 ID 添加到：

```
<td><input type="text"  id="artiest" name="artiest[]" value="'.$artiest[$i].'"></td>
                        ^^^^^^^^^^^ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T09:52:13.097

我已经开始工作了：

我已将 ID 字段添加到元素中。

```
 echo '<tr>
            <td>'.$gastId[$i]." ".$voornaam[$i].'</td>
            <td><input type="radio" id='.$gastId[$i].' name=present'.$gastId[$i].'[] value=1 onclick="setReadOnly(this)" checked></td>
            <td><input type="radio" id='.$gastId[$i].' name=present'.$gastId[$i].'[] value=2 onclick="setReadOnly(this)"></td>
            <td><input type="text"  id=artiest'.$gastId[$i].' name="artiest[]" value="'.$artiest[$i].'"></td>
            <td><input type="text"  id=titel'.$gastId[$i].'   name="titel[]" value="'.$titel[$i].'"></td>
        </tr>'; 
```

并更改了javascript：

```
function setReadOnly(obj)
{
    if(obj.value == 1)
    {
        document.getElementById("artiest"+obj.id).readOnly = 0;
        document.getElementById("titel"+obj.id).readOnly = 0;
    } else {
        document.getElementById("artiest"+obj.id).readOnly = 1;
        document.getElementById("titel"+obj.id).readOnly = 1;
    }
}
// -->
</script> 
```

谢谢大家的帮助！

# c# - new 不隐藏继承的属性

> ID：12992522
> 
> 赞同：1
> 
> 时间：2012-10-20T20:46:45.670
> 
> 标签：c#, wpf, xaml, user-controls, contentproperty

> **可能重复：**
> [C# 关键字使用 virtual+override 与 new](https://stackoverflow.com/questions/159978/c-sharp-keyword-usage-virtualoverride-vs-new)

我正在尝试`UserControl`通过以下方式隐藏我的 Content 属性：

```
public partial class Tile : UserControl
{
    public new object Content
    {
        get { ... }
        set { ... }
    }
} 
```

但是当我设置我的 UserControl 的内容时，它什么也不做（如果我设置了断点，它永远不会到达）：

```
<my:Tile Content="The content"/> 
```

或者

```
<my:Tile>The content</my:Tile> 
```

为什么？我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T21:00:51.890

问题是您没有隐藏实际的 DependencyProperty，只有 WPF 可能会或可能不会总是用来设置 DP 值的 get/set 访问器。WPF 具有直接调用 DependencyObject.GetValue/SetValue 的优化。

改为在您的对象上创建一个名为“Content”的依赖属性，然后新建 get/set 访问器，您正在做的事情应该可以工作。

```
public static readonly new DependencyProperty ContentProperty = DependencyProperty.Register("Content", typeof(object), typeof(Tile));

public new object Content
{
    get { return this.GetValue(ContentProperty); }
    set { this.SetValue(ContentProperty, value); }
} 
```

我不确定您为什么要这样做，而不仅仅是使用已经存在的 content 属性。在我看来，您在这里与框架作斗争，并且有一种更简单的方法可以做您想做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T21:03:54.663

如果您想将自己的功能插入到`Content`属性中，您可能正在寻找的是[`DependencyProperty.OverrideMetadata()`](http://msdn.microsoft.com/en-us/library/ms754209.aspx). 这样，您可以在派生类中添加自己的属性更改处理程序。它看起来像这样：

```
static Tile()
{
    ContentProperty.OverrideMetadata(typeof(Tile), new PropertyMetadata(null, OnContentChanged));
}

private static void OnContentChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
{
    // Your logic goes here.
} 
```

* * *

**编辑**

刚刚看了一下，WPF 已经为您解决了这个问题。您可以简单地覆盖`OnContentChanged`：

```
protected override void OnContentChanged(object oldContent, object newContent)
{
    base.OnContentChanged(oldContent, newContent);

    // Your logic goes here.
} 
```

# c# - 实现此接口的典型方式

> ID：12992524
> 
> 赞同：0
> 
> 时间：2012-10-20T20:46:46.370
> 
> 标签：c#

我的数据库中的 Animals 表中有不同类型的动物行。

我有一个带有 Speak 方法的 IAnimal 接口。

我有不同的动物类实现 IAnimal 接口（狗、猫等）

您是否迭代记录检查类型，然后根据类型实例化正确的对象，然后调用它们的 Speak 方法。

这是使用接口的典型方式吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T20:49:16.310

你不需要关心你的对象的类型，如果你知道它实现了 IAnimal。

```
var animal = (IAnimal)animals[i];
animal.Speak(); 
```

检查[参考](http://msdn.microsoft.com/en-us/library/87d83y5b%28v=vs.80%29.aspx)，其中包括示例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T20:50:14.440

不，这不是典型的方式，基本上你会有一个方法来获取接口的一个实例，然后你可以`Speak`在那里调用该方法。您不必关心传入的对象是什么具体类型，这样做的好处是您可以及时添加更多类型，而不必更改您的实现。

像这样的东西：

```
public void Speak(IAnimal animal)
{
    animal.Speak();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-20T20:54:31.253

如果您尝试在关系数据库中表示派生类型，您有以下选择：

1.  每个派生类型都有自己的表（例如，Dog、Cat 等的不同表）
2.  您将所有对象存储在 Animal 表中并在列中指定类型
3.  您有一个 Animal 表，其中包含动物之间的公共列，以及特定列的单独表。

您似乎选择了选项 2。

您通常会将 IAnimal 接口用作方法的返回类型或另一个方法的参数，而不是在实例化后立即调用 speak 方法。

例如，以下代码可能对接口使用有意义：

```
public IList<IAnimal> GetAnimals()
{
    var animals = new List<IAnimal>();
    foreach(var animal in db.Animals)
    {
        animals.add( // instantiate new animal here)
    }
    return animals;
} 
```

这将允许调用者让所有动物说话，无论它们的潜在类型如何。当然，如果界面只有一个 speak 方法，它可能不是很有用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-20T21:02:44.297

在这种情况下，您所说的关系类型是“是”关系。狗是一种动物。面向对象设计中的“是”关系是使用基类实现的，而不是接口。

所以你有一个Animal的基类。然后你有一个继承自 Animal 的 Dog 类。

当您从数据库中检索数据时，您将创建每个动物的类型，但添加到动物列表中。

然后，您的调用函数可以遍历 Animal 对象列表并调用 Speak，而无需知道每个对象是什么。

```
public void MakeAnimalsSpeak()
{
    // gets your animals from the database
    List<Animal> animals = GetAnimals();

    foreach(Animal animal in animals)
    {
        animal.Speak();
    }
}

private List<Animals> GetAnimals()
{
    List<Animal> animalsToReturn = new List<Animal>();

    // get data from db

    // loop through data

        // switch on "type" field, create correct object.

        // add too List.

    return animalsToReturn;
} 
```

# objective-c - 如何从核心数据实体对象的 NSArray 中提取选定的属性并形成一个联合字符串？

> ID：12992527
> 
> 赞同：2
> 
> 时间：2012-10-20T20:47:07.653
> 
> 标签：objective-c, ios, core-data, nsstring, nsarray

通常，如果我有一个只有 NSString 的 NSArray，我可以使用 NSArray 的方法：

```
- (NSString *)componentsJoinedByString:(NSString *)separator 
```

得到一个字符串（如“约翰，大卫，彼得”）。但是，如果我有一个核心数据实体对象的 NSArray，并且我只需要在其中获取 1 个属性（例如，每个实体对象的“名称”属性），那么最简单的方法是什么？

Core Data 实体对象可以有许多属性（姓名、电话、生日），但我只想要一个像“John,David,Peter”这样的字符串。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T21:31:03.307

以下将仅获取对象的`name`属性`Person`：

```
NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:@"Person"];
request.propertiesToFetch = @[@"name"];
request.resultType = NSDictionaryResultType;
NSArray *array = [managedObjectContext executeFetchRequest:request error:nil];
NSString *names = [[array valueForKey:@"name"] componentsJoinedByString:@","];
NSLog(@"%@", names); 
```

您需要将 设置`resultType`为`NSDictionaryResultType`否则它将忽略`propertiesToFetch`。提取的结果是一个字典数组。使用`valueForKey`and`componentsJoinedByString`将从所有名称中创建一个字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T21:01:41.970

您最好的选择是通过迭代数组中的项目并询问每个项目的名称以在`appendString:`. 您可以向实体对象添加一个`description`方法，然后使用您提到的方法，但`description`用于其他事情并且可能会导致冲突。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T21:09:25.057

```
// Assuming you have the list of entities - NSArray *entityObjects 
NSMutableString *nameAttributes = [[NSMutableString alloc] init];
for(int i = 0; i < [entityObjects count]-1; i++){
    [nameAttributes appendString:[NSString stringWithFormat:@"%@, ", [entityObjects objectAtIndex:i].name]];
}
    [nameAttributes appendString:[NSString stringWithFormat:@"%@", [entityObjects lastObject].name]]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-20T21:11:30.637

如果您有一个`NSArray *objects`Core Data 对象，每个对象都有一个`name`属性，那么您可以使用

```
NSArray *names = [objects valueForKey:@"name"]; 
```

得到一个包含所有名称的新数组，然后您可以将其连接起来

```
NSString *allNames = [names componentsJoinedByString:@","]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-20T22:19:46.343

你可以简单地这样做，

```
NSString *toCollectString =@"";

for(int k =0;k<self.arrayHoldingObjects.count;k++)
{
   ModelName *model = [self.arrayHoldingObjects objectAtIndex:k];  
   NSString *str = model.name;
   toCollectString = [toCollectString stringByAppendingString:str];  
} 
```

您将在`toCollectString`.

# java - 在 Android 上格式化不使用西方数字的数值

> ID：12992528
> 
> 赞同：0
> 
> 时间：2012-10-20T20:47:24.703
> 
> 标签：java, android, internationalization

在 iOS 上，NSNumber 上有一个方便的功能

```
localizedStringWithStyle: 
```

它将使用适合该区域的数字（可能是西方的，可能的阿拉伯语等）将数值格式化为字符串。

我假设在 Android 上的 Java 中可以配置 NumberFormat 对象（或类似对象）来执行此操作，但我不确定如何。

所以我的问题。在 Android 中，如何以特定于区域设置的数字格式化数字？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T20:55:59.677

当您实例化[`NumberFormat`](http://developer.android.com/reference/java/text/NumberFormat.html)对象时，您可以这样称呼它：

```
NumberFormat formatter = NumberFormat.getInstance(Locale.US); 
```

您可以从[static 列表中`Locale`](http://developer.android.com/reference/java/util/Locale.html)选择或调用[`NumberFormat.getAvailableLocales()`](http://developer.android.com/reference/java/text/NumberFormat.html#getAvailableLocales%28%29)以搜索与所需输出匹配的语言环境[。](http://developer.android.com/reference/java/util/Locale.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T22:19:01.280

```
int n;
String.format("%d", n); 
```

就这样。`String.format`默认情况下使用用户的语言环境。您可以通过将其作为第一个参数（即在格式字符串之前）传递来请求特定的语言环境。

# android - 如果我在活动暂停时调用 cancel()，则不会调用 CountDownTimer onFinish()

> ID：12992530
> 
> 赞同：4
> 
> 时间：2012-10-20T20:47:49.447
> 
> 标签：android, android-activity, countdowntimer

我有一个通过`MediaPlayer`. 通常，当我想停止歌曲时，我将 MediaPlayer 传递给`CountDownTimer`将音量减弱为零的 a，然后释放 MediaPlayer。这似乎工作正常，除了当我的活动暂停时遇到问题，例如在触摸主页按钮后。

我正在调用`cancel()`CountDownTimer `onPause`，但似乎由于活动正在暂停，因此 CountDownTimer 在销毁之前从未收到消息（？），因此`finish()`不会调用 CountDownTimer 。

这样做的结果是，在退出应用程序后，音乐会继续以 CountDownTimer 中上次设置的音量继续播放，但它永远不会结束。所以现在我被困在我的应用程序之外，MediaPlayer 正在运行并且无法阻止它（非常糟糕）。

活动退出时不调用 CountDownTimer 是否正常`onFinish`，即使我调用了取消？

这是我的代码：

```
public void StopSong(boolean fadeout){
    musicPlaying = false;
    if(_player != null) {
        final int fadeTime = 1000;
        CountDownTimer timer = new CountDownTimer(fadeTime,50) {
            final private MyMusicPlayer mFadePlayer = _player;

            @Override
            public void onTick(long millisUntilFinished) {
                mFadePlayer.setFade((float)millisUntilFinished / (float)fadeTime);
                Log.d("tag", "Fade timer " + millisUntilFinished+ "ms remaining.");
            }

            @Override
            public void onFinish() {
                mFadePlayer.stop();
                mFadePlayer.release();
                Log.d("tag", "Fade timer finished, releasing resource.");
            }
        };
        timer.start();
        mFadeTimers.add(timer);
        Log.d("tag", "Song stopping, starting fade timer.");
        _player = null;
    }
} 
```

在 onPause 中：

```
 for(CountDownTimer t : mFadeTimers){
        Log.d("tag", "Cancelling fade timer on destroy.");
        t.cancel();
    }
    mFadeTimers.clear(); 
```

如果一切正常，我会看到“取消淡入淡出计时器”日志消息，然后是“淡入淡出计时器完成，释放”，但我从未收到`onFinish()`logcat 消息。

我只看到这个：

```
 tag     Song stopping, starting fade timer.
 tag     Application exiting, destroying all audio resources
 tag     Cancelling fade timer on destroy. 
```

如何在退出活动时成功中止所有倒计时？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-20T20:59:32.830

看看[源代码](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.1_r1/android/os/CountDownTimer.java#CountDownTimer.cancel%28%29)。你会看到`cancel()`不调用`onFinish()`，这正是 CountDownTimer 的设计方式。

你可以打电话给`onFinish()`自己：

```
for(CountDownTimer t : mFadeTimers){
    Log.d("tag", "Cancelling fade timer on destroy."); // ought to read "in onPause", right?
    t.cancel();
    t.onFinish();
}
mFadeTimers.clear(); 
```

# java - GWT：将客户端和服务器端分成不同的 WAR

> ID：12992535
> 
> 赞同：3
> 
> 时间：2012-10-20T20:48:52.513
> 
> 标签：java, google-app-engine, gwt

我正计划构建一个将部署到 GAE 的 GWT 应用程序。除了普通的 (GWT) Web 客户端之外，服务器端代码还将为来自 Web 应用程序之外的其他客户端的请求提供服务。具体来说，它将托管一个 RESTful API，可以从任何符合 HTTP 的客户端访问，它还将为来自 iOS 和 Android 上的本机应用程序的请求提供服务。

如果我*对 GWT 的理解*是正确的，那么您的工作就是编写客户端代码（包括您的应用程序向服务器发出的 AJAX 请求）以及服务器端请求处理程序。

这让我想到：为什么我*需要*将 Web 客户端和 Web 服务器打包在同一个 WAR 中？这迫使我（基本上）每次我想对后端进行更改时重新部署客户端代码。可能没什么大不了的，但如果我不必这样做，我更愿意尊重“关注点分离”。

所以我问：有没有一种方法可以在 GAE 上部署一个没有 Java 的 WAR，这样它就可以将纯 HTML/JS/CSS 提供给任何将使用它的客户端，然后将服务器端部署在自己的WAR，有的怎么把两者联系起来？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T21:13:48.210

WAR 仅适用于服务器端。它包括序列化在客户端和服务器之间传递的对象所需的客户端类：显然，双方都需要相同对象的实现才能处理这些对象。

我认为将这两个问题分开不会为您节省任何精力或开发时间，但如果您真的想这样做，那么您可以使用 GWT-RPC 以外的方式重新设计您的客户端/服务器交互。例如，JSON。如果您想走这条路，请参阅[https://developers.google.com/web-toolkit/doc/latest/DevGuideServerCommunication#DevGuideHttpRequests讨论您的选择。](https://developers.google.com/web-toolkit/doc/latest/DevGuideServerCommunication#DevGuideHttpRequests)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T03:48:19.030

不，AFAIK，您不能在 GAE 中进行部分更新，即您不能将项目的一部分上传到 GAE 实例，然后单独上传另一部分（因此将 HTNML/JS/CSS 分离到 java 类）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-12-01T12:52:30.573

希望[这](https://github.com/tbroyer/gwt-maven-archetypes/tree/master/modular-requestfactory/src/main/resources/archetype-resources)是您正在寻找的。

最后，您要部署的主存根可能是您可以在 main pom.xml 中提及的 EAR 文件

# sockets - 在 HttpWebRequest 中绑定到备用 IP 在 Windows Server 2008 中不起作用

> ID：12992536
> 
> 赞同：3
> 
> 时间：2012-10-20T20:48:59.290
> 
> 标签：sockets, httpwebrequest

我正在尝试将 HttpWebRequest 调用绑定到我的服务器上的特定 IP（它有很多 IP）。我已经使用 BindIPEndPointDelegate 成功编写了这段代码，它在我的本地机器上运行良好（Windows 7）

我的问题与 Windows Server 2008 有关。当我在 Windows Server 2008 上运行相同的控制台应用程序时，它在使用委托时无法绑定到 IP。更复杂的是，它似乎适用于某些目标 URL (http://www.microsoft.com) 而不适用于某些 ( [http://www.google.com、http://www.facebook。 com](http://www.facebook.com) )

如果我删除 IP 特定绑定（委托）并运行应用程序，它适用于所有 URL。

我绑定的 IP 是默认的服务器 IP 地址 - 这意味着，在这两种情况下都应该使用相同的 IP。我已经验证了这一点，如果我不使用委托进行绑定，它会使用相同的 IP。如果我明确指定 IP，它会如上所述失败。

我已尝试关闭防火墙、IIS 和防病毒软件 - 问题仍然存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T16:19:54.937

好吧终于想通了。

再次测试后，我发现指定 IPAddress.Any 也不起作用。另一方面，IPAddress.IPv6Any 工作正常。

最后，我取消选中网络适配器设置中的 IPv6 协议，并且应用程序开始对所有 URL 正常工作并绑定所有本地 IPv4 地址。

不确定这是否是 .NET 代码或功能中的错误 - 但禁用 IPv6 为我修复了它。

最后，如果有人在使用绑定进行调用时遇到“请求的地址在其上下文中无效”，请尝试禁用您的防病毒软件。

# javascript - JavaScript 正则表达式不起作用

> ID：12992538
> 
> 赞同：0
> 
> 时间：2012-10-20T20:49:16.950
> 
> 标签：javascript, regex, match

为什么这些返回`null`：

```
var str="Is this all abc bbb c is";
var patt1=/is(?=bbb)/;

var str="Is this all abc bbb c is";
var patt1=/is(?=bbb)/;

var str="Is this all there is";
var patt1=/is(?=all)/; // <------ (?=all) vs (? =all) 
```

但这会返回`is`：

```
var str="Is this all there is";
var patt1=/is(?= all)/; 
```

?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T20:54:13.193

```
(?=...) 
```

是正则表达式“前瞻”功能，所以这就是您的正则表达式的含义：

```
/is(?=bbb)/ //look for isbbb and return is
/is(?=all)/ //look for isall and return is 
```

这两个都不存在于您的字符串中，因此您没有匹配项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T21:12:27.967

让我们来看看你的正则表达式`/is(?=bbb)/`。想象一下在你的表达式开头有一个小[插入符号（插入符号是字母之间的闪烁线，它显示你的文本光标在哪里 - 它在它指向的字母后面）：](http://en.wikipedia.org/wiki/Cursor_%28computers%29 "光标（计算机） - 维基百科，免费的百科全书")

```
is(?=bbb)
^ 
```

`i`我们在您的字符串中寻找一个小的。我们在单词中找到一个`this`。插入符号发生变化：

```
is(?=bbb)
 ^ 
```

下一个字母是`s`? 确实是。插入符号再次移动：

```
is(?=bbb)
  ^ 
```

现在发生了一些有趣的事情。现在我们检查下一个字母是否是`b`. 但是，即使我们找到它，我们也不会推进插入符号。

如果我们`bbb`只匹配子表达式，那么插入符号会前进到匹配括号之后的字符（但是子表达式匹配的文本不包含在匹配的字符串中）：

```
id(?=bbb)
         ^ 
```

不幸的是，您的字符串中的任何位置都`is`没有`bbb`. 这就是为什么你得到`null`.

# qt - 你可以在 WinAPI 中做什么而在 Qt 中无法做到？

> ID：12992541
> 
> 赞同：1
> 
> 时间：2012-10-20T20:49:25.533
> 
> 标签：qt, winapi

我正在学习 C++ 中的一些 GUI API，所以我搜索了很多，看看哪个是最好的。我最终选择了 Qt 或 WinAPI。我读到有人说 Qt 更容易使用，但使用 WinAPI 你可以控制一切。争论继续进行，有人说这是一个公平的交换，一个小的控制，所以它可以变得更容易。现在我想知道，当你选择 Qt 时，你到底失去了什么？是与系统的交互吗？你在 WinAPI 中究竟能做什么，而在 Qt 中却做不到？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T13:09:59.700

你在这里比较苹果和橘子。Qt 是一个 C++ 类库，旨在帮助您实现 GUI，并且是跨平台的，您可以重新编译代码以在不同的操作系统上运行。winapi 是基于 C 的低级 api，用于在 Windows 上进行操作系统调用。您*可以*仅使用 winapi 创建 GUI 应用程序，Charles Petzold 向您展示了如何，但开发此类应用程序是一种相当惩罚的方法。仅使用 winapi 的“Hello world”应用程序只需数百行代码。

不要考虑只使用 winapi 来实现 GUI，在花了几个月的时间学习如何正确使用它之后，你会非常后悔。有许多工具可以简化这项工作，Qt 只是其中之一，它不仅限于 C++ 语言。当然，Qt 是跨平台的这一事实*确实*意味着某些 Windows 的特定功能在 Qt 中的直接支持很差或根本不支持。但是，如果需要，您可以选择回退到 winapi。以放弃跨平台支持为代价。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-21T11:47:09.500

Qt 最“重量级”的东西是 Shell API、DWM 和 Ribbon UI。还有更多，比如压缩 API。

然而，为这些 API 编写自己的 Qt 风格接口相当容易。

最好的祝福

# c++ - C++：将控制台窗口设置为 WS_POPUP

> ID：12992542
> 
> 赞同：3
> 
> 时间：2012-10-20T20:49:25.823
> 
> 标签：c++, windows, winapi, console, cmd

我正在尝试创建一个无边框的控制台窗口。
我能够将 windowstyle 设置为 WS_POPUP，它删除了边框，但有一些小故障； ![故障..](../Images/2b03d8c959f51fffca2217a7f4337b91.png)

似乎控制台窗口上的某些部分没有被重绘，或者类似的东西，但我尝试在整个窗口上使用 InvalidateRect() 和其他重绘函数，但它们似乎不起作用.
有人建议使用 SetWindowPos()（带有 SWP_FRAMECHANGED），但这也无济于事。

我一直在摆弄这个问题一段时间，我很确定这与客户区域没有正确绘制有关（不要引用我的话）

当我第一次向下滚动然后向上滚动时，底部的故障部分也会变成黑色/透明，但我的程序中的文本有时不会显示在它下面，据我所知，这表明它没有背景，所以它有点“变色龙”效应。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T00:27:37.250

我终于弄明白了。（非常感谢 Maximus）
我必须使用`SetWindowRgn()`，就像他建议的那样。

最终代码如下所示：

```
HWND hWnd = GetConsoleWindow();
RECT rcScr, rcWnd, rcClient;

GetWindowRect(hWnd, &rcWnd);
GetWindowRect(GetDesktopWindow(), &rcScr);
GetClientRect(hWnd, &rcClient);

MoveWindow(hWnd, (rcScr.right / 2) - 330, (rcScr.bottom / 2) - 180, rcWnd.right - rcWnd.left, rcWnd.bottom - rcWnd.top, 1);
SetWindowLong(hWnd, GWL_STYLE, WS_POPUP);
SetWindowRgn(hWnd, CreateRectRgn(rcClient.left + 2, rcClient.top + 2, rcClient.right + 2, rcClient.bottom + 2), TRUE);
ShowWindow(hWnd, 1); 
```

# zend-framework - 如何在 zend 中定义当前 url（框架的内部工作）

> ID：12992547
> 
> 赞同：3
> 
> 时间：2012-10-20T20:50:32.230
> 
> 标签：zend-framework, php

请告诉什么脚本使用 zend 框架来定义当前 URL？更确切地说，我对使用 ZEND 定义域名感兴趣： this `$_SERVER['HTTP_HOST']`还是 this `$_SERVER['SERVER_NAME']`？（或者可能是其他东西）？

PS（我在文档中搜索但没有找到，（我不知道这个框架），我也在谷歌搜索，但也没有找到我的问题的答案？）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-20T20:55:42.850

尝试使用：`$this->getRequest()->getRequestUri()` 获取当前请求的 URI。

在视图脚本中使用：`$this->url()`获取当前 URL。

或者通过静态集成 Zend Controller 前端通过实例使用：

`$uri = Zend_Controller_Front::getInstance()->getRequest()->getRequestUri();`

您可以通过单例获取 URI 实现的值来获取 request() 数据的值：

```
$request = Zend_Controller_Front::getInstance()->getRequest();
$url = $request->getScheme() . '://' . $request->getHttpHost(); 
```

在视图上将其用作：

```
echo $this->serverUrl(true); # return with controller, action,... 
```

您应该避免使用硬编码，例如示例（不要使用！）：

```
echo 'http://' . $_SERVER['SERVER_NAME'] . $_SERVER['PHP_SELF']; 
```

而不是这个例子在视图上使用：

```
$uri = $this->getRequest()->getHttpHost() . $this->view->url(); 
```

如果您想在 ZEND 中使用 getRequest，请进一步探索[The Request Object](http://framework.zend.com/manual/1.12/en/zend.controller.request.html)。

**跳过它下面（尸检示例如何工作）。**

完整的示例代码 getRequestUri() 如何工作以及为什么使用 isRequest 而不是`$_SERVER`因为在特定平台上随机获取数据：

首先，如果 uri 为空，则如果从 IIS 请求的设置为 HTTP_X_REWRITE_URL。如果没有，请检查 IIS7 重写的 uri（包括编码的 uri）。如果不在 IIS 上，则 REQUEST_URI 将检查 HTTP_HOSTNAME 的方案，或者如果失败，则用作 ORIG_PATH_INFO 并获取 QUERY_STRING。

如果设置，则通过`$this`类中返回的对象字符串自动获取数据。

如果失败，将设置一个解析的字符串而不是设置它。

```
if ($requestUri === null) {
        if (isset($_SERVER['HTTP_X_REWRITE_URL'])) { // check this first so IIS will catch
            $requestUri = $_SERVER['HTTP_X_REWRITE_URL'];
        } elseif (
            // IIS7 with URL Rewrite: make sure we get the unencoded url (double slash problem)
            isset($_SERVER['IIS_WasUrlRewritten'])
            && $_SERVER['IIS_WasUrlRewritten'] == '1'
            && isset($_SERVER['UNENCODED_URL'])
            && $_SERVER['UNENCODED_URL'] != ''
            ) {
            $requestUri = $_SERVER['UNENCODED_URL'];
        } elseif (isset($_SERVER['REQUEST_URI'])) {
            $requestUri = $_SERVER['REQUEST_URI'];
            // Http proxy reqs setup request uri with scheme and host [and port] + the url path, only use url path
            $schemeAndHttpHost = $this->getScheme() . '://' . $this->getHttpHost();
            if (strpos($requestUri, $schemeAndHttpHost) === 0) {
                $requestUri = substr($requestUri, strlen($schemeAndHttpHost));
            }
        } elseif (isset($_SERVER['ORIG_PATH_INFO'])) { // IIS 5.0, PHP as CGI
            $requestUri = $_SERVER['ORIG_PATH_INFO'];
            if (!empty($_SERVER['QUERY_STRING'])) {
                $requestUri .= '?' . $_SERVER['QUERY_STRING'];
            }
        } else {
            return $this;
        }
    } elseif (!is_string($requestUri)) {
        return $this;
    } else {
        // Set GET items, if available
        if (false !== ($pos = strpos($requestUri, '?'))) {
            // Get key => value pairs and set $_GET
            $query = substr($requestUri, $pos + 1);
            parse_str($query, $vars);
            $this->setQuery($vars);
        }
    }

    $this->_requestUri = $requestUri;
    return $this; 
```

# jquery - 如何使用jquery在html表中动态添加新行

> ID：12992554
> 
> 赞同：2
> 
> 时间：2012-10-20T20:51:13.843
> 
> 标签：jquery

![在此处输入图像描述](../Images/16669f93d6c93695469af836728c8683.png)

在我的 html 表中，我有几个输入元素。我想在表的末尾插入一行新的输入元素，当用户在填写最后一个年龄列后点击输入按钮时。我希望这张照片能让事情更清楚.. 是否可以使用 jquery，因为我是 jquery 的新手。任何形式的帮助将不胜感激..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T20:57:52.783

对您的表格 html 结构进行一些猜测，总体思路是这样的：

```
$('input.last').keyup(function handleEnter(e){
    //enter hit on the input that has class last
    if(e.which == 13) {

       $(this).removeClass('last').unbind('keyup');

       $('.myTable').append('<tr><td><input name="input1"/></td><td><input name="input1"/> </td><td><input name="input1" class="last"/></td></tr>');

       $('.last').keyup(handleEnter);
    }
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-20T21:08:30.580

在 jquery 中使用最后一行的最后一列作为选择器。触发它的 onclick 事件并在表格末尾添加一个新的 tr

代码在这里

```
 <script>
            $(document).ready(function () {

                $('#tableId tr:last td:last').click(function () {
                    var tr = $('this').closest('tr');
                    $('#tableId').append(tr);
                });
            });
        </script> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-20T20:59:44.117

试试 [http://datatables.net/](http://datatables.net/)

有关基本添加，请参见此内容：

[http://datatables.net/release-datatables/examples/api/add_row.html](http://datatables.net/release-datatables/examples/api/add_row.html)

和这个：

[http://code.google.com/p/jquery-datatables-editable/wiki/AddingNewRecords](http://code.google.com/p/jquery-datatables-editable/wiki/AddingNewRecords)

[http://jquery-datatables-editable.googlecode.com/svn/trunk/addingrecords.html](http://jquery-datatables-editable.googlecode.com/svn/trunk/addingrecords.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-20T21:06:03.483

它很简单：`$('#myTable tr:last').after('<tr>...</tr><tr>...</tr>');`有一些警告

我创建了一个小小提琴供您试验：http: [//jsfiddle.net/fNW8T/](http://jsfiddle.net/fNW8T/)

就我个人而言，我喜欢像 AngularJS 这样带有 ngRepeat 或只是数据表的框架。手动执行此操作相当笨拙。

# cygwin - Cygwin 中缺少一些文件

> ID：12992560
> 
> 赞同：0
> 
> 时间：2012-10-20T20:52:09.023
> 
> 标签：cygwin

谁能告诉我在 Cygwin 中哪里可以找到以下文件`setup.exe`？

```
sys/socket.h
netinet/in_systm.h
netinet/in.h
netinet/ip.h
arpa/inet.h
netdb.h 
```

这是 -v 打印出来的内容

```
$ make
gcc -g -c -v it.c
Using built-in specs.
Target: i686-w64-mingw32
Configured with: ../gcc44-svn/configure --target=i686-w64-mingw32 --host=i686-w6
4-mingw32 --disable-multilib --disable-nls --disable-win32-registry --prefix=/mi
ngw32 --with-gmp=/mingw32 --with-mpfr=/mingw32 --enable-languages=c,c++
Thread model: win32
gcc version 4.4.3 (GCC)
COLLECT_GCC_OPTIONS='-g' '-c' '-v' '-mtune=generic'
 c:/strawberry/c/bin/../libexec/gcc/i686-w64-mingw32/4.4.3/cc1.exe -quiet -v -ip
refix c:\strawberry\c\bin\../lib/gcc/i686-w64-mingw32/4.4.3/ it.c -quiet -dumpba
se it.c -mtune=generic -auxbase it -g -version -o C:\Users\AppData\Local\
Temp\ccuWjX0W.s
ignoring nonexistent directory "/mingw32/include"
ignoring duplicate directory "c:/strawberry/c/lib/gcc/../../include"
ignoring duplicate directory "c:/strawberry/c/lib/gcc/../../lib/gcc/i686-w64-min
gw32/4.4.3/include"
ignoring duplicate directory "c:/strawberry/c/lib/gcc/../../lib/gcc/i686-w64-min
gw32/4.4.3/include-fixed"
ignoring duplicate directory "c:/strawberry/c/lib/gcc/../../lib/gcc/i686-w64-min
gw32/4.4.3/../../../../i686-w64-mingw32/include"
#include "..." search starts here:
#include <...> search starts here:
 c:\strawberry\c\bin\../lib/gcc/i686-w64-mingw32/4.4.3/../../../../include
 c:\strawberry\c\bin\../lib/gcc/i686-w64-mingw32/4.4.3/include
 c:\strawberry\c\bin\../lib/gcc/i686-w64-mingw32/4.4.3/include-fixed
 c:\strawberry\c\bin\../lib/gcc/i686-w64-mingw32/4.4.3/../../../../i686-w64-ming
w32/include
 /mingw/include
End of search list.
GNU C (GCC) version 4.4.3 (i686-w64-mingw32)
        compiled by GNU C version 4.4.3, GMP version 4.3.2, MPFR version 2.4.2-p
3.
GGC heuristics: --param ggc-min-expand=100 --param ggc-min-heapsize=131072
Compiler executable checksum: 4728d1fc720cf46696475c98813fbdef 
```

我认为它正在草莓中寻找文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T21:46:39.097

注意：`netinet/in_system.h`实际上是拼写`netinet/in_systm.h`；我已经编辑了您的问题以更正它。

这些都应该是`cygwin`包的一部分。如果没有该软件包，您将无法安装有效的 Cygwin。

他们都在`/usr/include`.

```
$ cygcheck -c cygwin
Cygwin Package Information
Package              Version        Status
cygwin               1.7.16-1       OK
$ cygcheck -l cygwin | wc -l
280
$ cygcheck -l cygwin | egrep 'sys/socket.h|netinet/in_systm.h|netinet/in.h|netinet/ip.h|arpa/inet.h|netdb.h'
/usr/include/netdb.h
/usr/include/netinet/in.h
/usr/include/netinet/in_systm.h
/usr/include/netinet/ip.h
/usr/include/arpa/inet.h
/usr/include/sys/socket.h
$ 
```

如果这些文件丢失，您可能会尝试重新安装该`cygwin`软件包 - 但首先要确保您在正确的位置查找它们，在`/usr/include`.

# c - 获取指向结构的指针的值到指向结构的另一个指针

> ID：12992561
> 
> 赞同：0
> 
> 时间：2012-10-20T20:52:10.070
> 
> 标签：c, pointers, structure

..然后到一个数组，或者沿着那些线。我很困惑我应该做什么。

以下是结构：

```
typedef struct {
  char name[30];
} PersonType;

typedef struct {
  PersonType *personInfo;
} StudentType;

typedef struct {
  StudentType students[30];
} GraduateType; 
```

我想获取 PersonType 的名称。像这样，在 main() 中：

```
GraduateType *gptr = (GraduateType *) calloc(3, sizeof(GraduateType));
// Assume here that info has been scanf()'d
int i, j;
for(i = 0; i < 3; i++) {
  for(j = 0; j < 2; j++) {
    if(strcmp(gptr[i].students[j].personInfo.name, "asd")) { // <- This
      // blah
    }
  }
} 
```

如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T20:53:38.337

你快到了。`personInfo`是一个指针，所以你应该这样对待它：

```
gptr[i].students[j].personInfo->name 
```

# linux - linux在列内排序

> ID：12992564
> 
> 赞同：2
> 
> 时间：2012-10-20T20:52:54.593
> 
> 标签：linux, sorting, field

我只想按数字顺序按第二列中的第二个字符对文件进行排序。示例文件如下：

```
aa 19
aa 189
aa 167
ab 13
nd 23
at 32
ca 90 
```

我希望结果像

```
ca 90
at 32
ab 13
nd 23
aa 167
aa 189
aa 19 
```

我使用命令`sort -n -k 2.2,2.2 [filename]`。但它向我展示了这样的结果：

```
aa 167
aa 189
aa 19
ab 13
nd 23
at 32
ca 90 
```

这不是正确的答案。有人知道我的命令有什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T21:04:03.127

问题是您没有指定正确的列分隔符，并`sort`假定它是制表符而不是空格。

```
sort -t ' ' -nk 2.2 
```

工作得很好。

编辑：在我的`man`页面中，它说默认情况下任何空格都被视为分隔符，但事实是添加`-t ' '`解决了它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T21:06:05.317

```
sort -t ' ' -k2.2,2.2 filename 
```

# php - uasort() 数组被用户比较函数修改

> ID：12992568
> 
> 赞同：3
> 
> 时间：2012-10-20T20:53:33.580
> 
> 标签：php

我有一个类，它基本上是一个数组的包装器并实现了 IteratorAggregate。当创建该类的新对象时，它将其值存储在一个名为 $value 的受保护变量中。该值可以是字符串、整数等，也可以是可遍历的对象（如数组）。

这个对象是“递归的”，因为当一个可遍历对象（如数组）被传递给构造函数时，他会创建该类的另一个实例。这是要澄清的构造函数：

```
class ListItem implements \IteratorAggregate
{
    protected $readOnly = false;
    protected $key;
    protected $value;

    public function __construct($key, $value, $readOnly = false)
    {
        if($readOnly) $this->readOnly = true;
        if(is_numeric($key)) $key = 'index'.$key;
        $this->key = $key;

        if (is_array($value) || $value instanceof Traversable) {
            $this->value = array();
            foreach($value as $k => $v) {
                if(is_numeric($k)) $k = 'index'.$k;
                $this->value[$k] =  new ListItem($k, $v, $readOnly);
            }
        } else {
            $this->value = $value;
        }
    }

    public function __toString()
    {
        if ( is_array($this->value) ) {
            return 'ListItem OBJECT(' . count($this->value) . ')';
        } else {
            return $this->value;
        }
    } 
```

* * *

现在，我正在尝试为该类编写一个简单的排序方法。

按 Key 排序，这就像一个魅力：

```
$success = ksort($this->value, $comparison); 
```

但要按值排序，asort 不起作用，因为我尝试排序的实际值存储在 value 属性中。

所以我尝试使用uasort，如下所示：

```
 $success = uasort($this->value, function ($a, $b)
   {                    
      if ($a->value == $b->value) return 0;
      else if($a->value < $b->value) return -1;
      else return 1;
   }); 
```

但由于某些不清楚的原因，我收到以下错误：

> 警告：uasort() [function.uasort]: 数组被用户比较函数修改在 /* /* /* /ListItem.php 的第 129 行

* * *

**问：如果我只是访问 $value 进行比较而不实际更改任何内容，为什么会发生这种情况？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T21:40:21.040

似乎闭包（或匿名函数）在全局范围内，这意味着`uasort`无法访问对象的私有或受保护成员`ListItem`（尽管其他`ListItem`对象可以访问其兄弟对象的私有/受保护属性）

这解决了问题：（转换为字符串）

```
$success = uasort($this->value, function ($objA, $objB) use ($comparison)
{
    $a = (string) $objA;
    $b = (string) $objB;
    if($comparison == ListItem::SORT_NUMERIC) {
        if (is_numeric($a)) $a = (int) $a;
        if (is_numeric($b)) $b = (int) $b;
    }                   
    if ($a == $b) return 0;
    else if($a < $b) return -1;
    else return 1;
}); 
```

# maven - OSGI：导入包无法解析

> ID：12992574
> 
> 赞同：2
> 
> 时间：2012-10-20T20:55:06.213
> 
> 标签：maven, import, dependencies, osgi, package

我正在尝试将捆绑包部署到 osgi，但出现此错误

```
An Import-Package could not be resolved. Resolver error data <Import-Package: signature; version="0.0.0">. Caused by missing constraint in bundle....
constraint: <Import-Package: signature; version="0.0.0">

at org.eclipse.virgo.kernel.install.pipeline.stage.resolve.internal.QuasiResolveStage.process(QuasiResolveStage.java:46)
at org.eclipse.virgo.kernel.install.pipeline.internal.StandardPipeline.doProcessGraph(StandardPipeline.java:62)
at org.eclipse.virgo.kernel.install.pipeline.internal.CompensatingPipeline.doProcessGraph(CompensatingPipeline.java:73)
at org.eclipse.virgo.kernel.install.pipeline.stage.AbstractPipelineStage.process(AbstractPipelineStage.java:41)
at org.eclipse.virgo.kernel.install.pipeline.internal.StandardPipeline.doProcessGraph(StandardPipeline.java:62)
at org.eclipse.virgo.kernel.install.pipeline.stage.AbstractPipelineStage.process(AbstractPipelineStage.java:41)
at org.eclipse.virgo.kernel.deployer.core.internal.PipelinedApplicationDeployer.driveInstallPipeline(PipelinedApplicationDeployer.java:360)
... 9 common frames omitted 
```

我在 maven 的任何地方都找不到这个签名依赖，因为我的其他依赖问题有完整的组路径，我假设这个工件只被称为“签名”。我遇到的与此类似的其他问题是 jline 和 jess，但在找到这些工件时没有问题。

有人知道这个神器吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T06:55:51.220

您是否在蓝图中使用此包名称定义了一个类？蓝图上下文也由 maven bundle 插件分析。

# grails - 使用 spock-geb 记录右键单击？

> ID：12992579
> 
> 赞同：0
> 
> 时间：2012-10-20T20:55:53.860
> 
> 标签：grails, spock, geb

我需要测试右键单击地图以使用 Geb 放置标记。我还没有找到任何说明如何执行此操作的文档。有人知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T00:45:30.233

为此，您可以使用Geb 中的[拖放支持](http://www.gebish.org/manual/current/navigator.html#drag_and_drop)。Actions 上有可用的[contextClick()](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/interactions/Actions.html#contextClick%28%29)方法，您可以使用它来模拟右键单击。

# console - 调试iOS应用程序时控制台中的Webcore NSBeep（）？

> ID：12992581
> 
> 赞同：5
> 
> 时间：2012-10-20T20:56:33.627
> 
> 标签：console, ios6, warnings

当我在 iPhone 上运行我的 iOS 6 应用程序时，我在控制台中收到了这条奇怪的消息。

```
Webcore NSBeep() 
```

我在其他帖子中读到这个 ​​NSBeep 甚至在 iOS 中都不存在。除此之外，我的应用程序中根本没有使用任何与网络相关的东西。那是什么意思？这是我应该担心的错误吗？

# javascript - 将选择选项和 optgroup 存储在 JavaScript 数组中

> ID：12992582
> 
> 赞同：2
> 
> 时间：2012-10-20T20:56:34.090
> 
> 标签：javascript, jquery, html, select, optgroup

我正在制作一个 jQuery 插件，它遍历 html 选择`<option>`标签并以不同的格式输出它们。
在遍历选项时，我还想保持它们与`<optgroup>`s. 作为一个 PHP 人，我认为多维关联数组就是答案。所以是这样的：

```
<select>
    <optgroup label="group1">
        <option>option 1</option>
        <option>option 2</option>
    </optgroup>
    <optgroup label="group2">
        <option>option 3</option>
        <option>option 4</option>
    </optgroup>
</select> 
```

...会变成这样：

```
myArray = [
    ['group1'] => ['option 1', 'option 2'],
    ['group2'] => ['option 3', 'option 4']
]; 
```

这可能在`javascript`or中`jQuery`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T20:59:01.537

这是可能的，但作为一个*对象* `{}`而不是一个数组`[]`（在 JavaScript 中具有严格排序的数字键，从零开始）：

```
myObj = {
  'group1': ['option 1', 'option 2'],
  'group2': ['option 3', 'option 4']
}; 
```

您可以在纯 JavaScript 中使用类似以下的内容来创建它。

```
var myObj = {};
// Get a reference to the <select>
var theSelect = document.getElementById('theSelect');
// And a node list of its <optgroup>
var optgroups = theSelect.getElementsByTagName('optgroup');
// Loop over the <optgroup>
for (var i=0; i<optgroups.length; i++) {
  // And create an object property named with the optgroup label
  myObj[optgroups[i].getAttribute('label')] = [];
  var options = optgroups[i].getElementsByTagName('option');
  // Loop over the <option>s inside it
  for (var j=0; j<options.length; j++) {
    // And stuff them into an array on the new object property:
    myObj[optgroups[i].getAttribute('label')].push(options[j].innerHTML);
  }
}
console.log(JSON.stringify(myObj));​
// {"group1":["option 1","option 2"],"group2":["option 3","option 4"]} 
```

### [这是一个工作小提琴](http://jsfiddle.net/DTdvJ/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-20T21:00:30.940

一些花哨的 jQuery 代码，我~~相信它应该可以~~对其进行测试，并且可以按预期工作。

```
var o = {};

$('optgroup').each(function() {
    o[this.label] = $(this).find('option').map(function() {
        return $(this).text();
    }).get();
});

console.log(o);​ 
```

**[现场演示](http://jsfiddle.net/Y4vvR/1)**

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-20T20:59:30.113

您可以将其存储为**对象**

```
myArray = {
    'group1' : ['option 1', 'option 2'],
    'group2' : ['option 3', 'option 4']
}; 
```

这里可以使用 .. 访问 optgroup 中的选项。

```
myArray.group1[0] // Will give you option 1 
myArray.group2[0] // Will give you option 3 
```

# php - 触发所有元素的点击jquery

> ID：12992586
> 
> 赞同：-1
> 
> 时间：2012-10-20T20:57:06.367
> 
> 标签：php, jquery, click

我的 html 中有以下信息

```
<div idd="8327" id="like" class="geen">Like</div>
<div idd="8329" id="like" class="geen">Like</div>
<div idd="8330" id="like" class="geen">Like</div>
<div idd="8331" id="like" class="geen">Like</div> 
```

我想将 ID 发送到特定的 php 页面以使用 .get 执行。有用。但它只适用于第一个 div。该脚本仅在单击 id 为 8327 的 div 时执行。单击另一个 div 时，没有任何反应：

有什么问题？

```
<script type="text/javascript">
$(document).ready(function() {
    $("#like").click(function(event){
    var code =  $(this).attr("idd");
    $.get("like.php", { code1: code, code2: "Kim" } );    
        alert("Thanks for clicking!");
    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T20:58:56.510

当您在 Jquery 中使用 id 选择器时，您只选择第一个元素，因此要获取所有元素，请改用类选择器。所以改变：

```
$("#like").click( 
```

到

```
$(".geen").click( 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T21:01:34.620

切换选择器以使用该类。jQuery 假定`#`(id) 是唯一的并且将使用内置的浏览器函数`document.getElementById()`。

```
$(".geen").click(function(event){

    var code =  $(this).attr("idd");

    $.get("like.php", { code1: code, code2: "Kim" } );    

    alert("Thanks for clicking!");

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T21:02:11.757

使用您的班级作为选择器，因为 id 不能重复（在您的情况下）

所以通过这个

```
$(".geen").click(function(event){

var code =  $(this).attr("idd");

$.get("like.php", { code1: code, code2: "Kim" } );    
alert("Thanks for clicking!");

}); 
```

# javascript - Sencha Touch 2 可拖动

> ID：12992590
> 
> 赞同：0
> 
> 时间：2012-10-20T20:57:46.553
> 
> 标签：javascript, extjs, sencha-touch-2

我在容器中有以下内容

```
 { direction:'vertical',
              constraint: {
                min: { x: 0, y: 0 },
                max: { x: 0, y: 338 }
              },
              listeners: {

                    drag: function( draggable, evt, offsetX, offsetY, eOpts ) {
                         console.log( offsetX);
                       // Ext.getCmp("twitterList").setTop(10);
                    }

              }
} 
```

我希望以某种方式更改被拖动容器的位置以从下到上显示动画？

尝试使用 setTop 但不起作用。非常感谢任何帮助。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T13:58:01.847

尝试这个，

```
Ext.get("twitterList").setTop(10); 
```

# php - 将 Drupal 7 从远程服务器移动到本地主机

> ID：12992594
> 
> 赞同：1
> 
> 时间：2012-10-20T20:57:53.373
> 
> 标签：php, drupal-7

我从远程服务器（在线站点）创建备份`drupal(7.12)`文件和数据库，以便在.`mysql``localhost(xampp)`

`NOTE: my website is in root: www.domain.com and localhost is : localhost/test2`

我更改`settnigs.php`了`sites/default/settings.php`mysql 数据库配置并将备份导入`mysql`新`mysql`数据库（本地主机）。现在我的本地主机加载非常慢我的网站没有主题，当我用`administrator`我的管理员登录时`user/pass`无效且无法工作。如何解决这个问题？

或者，将drupal 7从远程服务器（在线站点）移动到本地主机有什么更好/更有效的方法！？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T10:41:00.360

由于服务器能力太强，发现 localhost 比在线站点慢是正常的。如果您的意思是“在没有主题的情况下加载非常慢的我的网站”，您只有一个带有文本的白屏，那么您可能需要在 php.ini 文件中增加 php memory_limit 和 max_execution_time 或者本地主机上缺少文件，所以您需要从在线站点再次备份您的文件，并确保您拥有所有文件的读取权限。

# jquery - Ajax 调用连续发生 2 次？

> ID：12992596
> 
> 赞同：0
> 
> 时间：2012-10-20T20:58:19.940
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3, html

我有一个 Rails 应用程序，我正在处理我无法理解的表现行为。我有一个 html 文件：

```
<h1>Hello World</h1>
  <table>
    <tr>
        <td>Hello</td>
    </tr>
    <tr>
        <td>Hello</td>
    </tr>
    <tr>
        <td>Hello</td>
    </tr>
    <tr>
        <td>Hello</td>
    </tr>
</table> 
```

然后，当有人单击表中的一行时，我会点击一个 javascript(jquery) 文件。

```
$(document).ready(function(){
  $("tr", "table").click(function(){
    console.log("TEST");
  });
}); 
```

每次我点击表格中的一行，该函数都会被调用 2 次。我在控制台中两次得到“测试”。我是 jquery 和 rails 的新手，所以我知道我缺少一些简单的东西。有人请告诉我我做错了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T21:00:27.400

它正在计算“tr”和“table”的点击次数

尝试

```
$(document).ready(function(){
  $("tr").click(function(){
    console.log("TEST");
  });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T21:02:19.503

正如伙计们所说，它正在发生，因为每个 tr 都在一张桌子内，所以这是一个正确的行为。如果你想避免它，我相信阻止事件传播会起作用：

```
$(document).ready(function(){
  $("tr", "table").click(function(e){
    e.stopPropagation();
    console.log("TEST");
  });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T21:02:35.730

表点击被触发点击，tr点击试试这个

```
$(document).ready(function(){
  $("tr").click(function(){
    console.log("TEST");
  });
}); 
```

you don't need a click event on table , unless you want to be able to click in the table- but not in a row , that doesn't sound right

# sql-server-2008 - 批量插入 SQL Server 2008

> ID：12992598
> 
> 赞同：3
> 
> 时间：2012-10-20T20:58:26.323
> 
> 标签：sql-server-2008, bulkinsert

```
for (int i = 0; i < myClass.Length; i++)
{
        string upSql = "UPDATE CumulativeTable SET EngPosFT = @EngPosFT,EngFTAv=@EngFTAv WHERE RegNumber =@RegNumber AND Session=@Session AND Form=@Form AND Class=@Class";
        SqlCommand cmdB = new SqlCommand(upSql, connection);

        cmdB.CommandTimeout = 980000;

        cmdB.Parameters.AddWithValue("@EngPosFT", Convert.ToInt32(Pos.GetValue(i)));
        cmdB.Parameters.AddWithValue("@RegNumber", myClass.GetValue(i));
        cmdB.Parameters.AddWithValue("@EngFTAv", Math.Round((engtot / arrayCount), 2));
        cmdB.Parameters.AddWithValue("@Session", drpSess.SelectedValue);
        cmdB.Parameters.AddWithValue("@Form", drpForm.SelectedValue);
        cmdB.Parameters.AddWithValue("@Class", drpClass.SelectedValue);

        int idd = Convert.ToInt32(cmdB.ExecuteScalar());
} 
```

假设`myClass.Length`是 60。这会执行 60 条更新语句。如何将其限制为 1 个更新语句。请使用上述代码的代码示例将不胜感激。谢谢

试过用这个

StringBuilder 命令 = new StringBuilder();

```
 SqlCommand cmdB = null;
            for (int i = 0; i < myClass.Length; i++)
            {
                command.Append("UPDATE CumulativeTable SET" + " EngPosFT = " + Convert.ToInt32(Pos.GetValue(i)) + "," + " EngFTAv = " + Math.Round((engtot / arrayCount), 2) +
        " WHERE RegNumber = " + myClass.GetValue(i) + " AND Session= " + drpSess.SelectedValue + " AND Form= " + drpForm.SelectedValue + " AND Class= " + drpClass.SelectedValue + ";");

               //or command.AppendFormat("UPDATE CumulativeTable SET EngPosFT = {0},EngFTAv={1} WHERE RegNumber ={2} AND Session={3} AND Form={4} AND Class={5};", Convert.ToInt32(Pos.GetValue(i)), Math.Round((engtot / arrayCount), 2), myClass.GetValue(i), drpSess.SelectedValue, drpForm.SelectedValue, drpClass.SelectedValue);

            }//max length is 128 error is encountered 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T06:53:29.717

在这种情况下，最好创建一个接受[表值参数](http://msdn.microsoft.com/en-us/library/bb510489%28v=sql.100%29.aspx)的存储过程。在 .NET 方面，您`DataTable`为要使用的每组值创建一个包含一行的对象。

在 SQL Server 方面，您可以将参数视为查询中的另一个表。因此，在存储过程中，您将拥有：

```
UPDATE a
SET
    EngPosFT = b.EngPosFT,
    EngFTAv=b.EngFTAv
FROM
    CumulativeTable a
       inner join
    @MyParm b
       on
           a.RegNumber =b.RegNumber AND
           a.Session=b.Session AND
           a.Form=b.Form AND
           a.Class=b.Class 
```

`@MyParm`您的表值参数在哪里。

然后，这将作为到服务器的单次往返处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T21:12:59.683

查看[BULK INSERT](http://msdn.microsoft.com/en-us/library/ms188365.aspx) T-SQL 命令。但是由于我对该命令没有太多的个人经验，因此我确实看到了一些直接的机会，可以通过在循环外创建命令和参数并仅在循环内进行必要的更改来使用相同的 sql 改进此代码：

```
string upSql = "UPDATE CumulativeTable SET EngPosFT = @EngPosFT,EngFTAv=@EngFTAv WHERE RegNumber =@RegNumber AND Session=@Session AND Form=@Form AND Class=@Class";
SqlCommand cmdB = new SqlCommand(upSql, connection);

cmdB.CommandTimeout = 980000;

//I had to guess at the sql types you used here. 
//Adjust this to match your actual column data types
cmdB.Parameters.Add("@EngPosFT", SqlDbType.Int);  
cmdB.Parameters.Add("@RegNumber", SqlDbType.Int); 

//It's really better to use explicit types here, too.
//I'll just update the first parameter as an example of how it looks:
cmdB.Parameters.Add("@EngFTAv", SqlDbType.Decimal).Value = Math.Round((engtot / arrayCount), 2));
cmdB.Parameters.AddWithValue("@Session", drpSess.SelectedValue);
cmdB.Parameters.AddWithValue("@Form", drpForm.SelectedValue);
cmdB.Parameters.AddWithValue("@Class", SqlDbTypedrpClass.SelectedValue);

for (int i = 0; i < myClass.Length; i++)
{
    cmdB.Parameters[0].Value = Convert.ToInt32(Pos.GetValue(i)));
    cmdB.Parameters[1].Value = myClass.GetValue(i));

    int idd = Convert.ToInt32(cmdB.ExecuteScalar());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T06:45:06.180

在这种情况下，最好编写一个***存储过程****并在for*循环中调用该存储过程，并在每次调用时传递必要的参数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-30T04:08:55.483

```
using System;
using System.Data;
using System.Data.SqlClient;

    namespace DataTableExample
    {
        class Program
        {
          static void Main(string[] args)
            {
                DataTable prodSalesData = new DataTable("ProductSalesData");

                // Create Column 1: SaleDate
                DataColumn dateColumn = new DataColumn();
                dateColumn.DataType = Type.GetType("System.DateTime");
                dateColumn.ColumnName = "SaleDate";

                // Create Column 2: ProductName
                DataColumn productNameColumn = new DataColumn();
                productNameColumn.ColumnName = "ProductName";

                // Create Column 3: TotalSales
                DataColumn totalSalesColumn = new DataColumn();
                totalSalesColumn.DataType = Type.GetType("System.Int32");
                totalSalesColumn.ColumnName = "TotalSales";

                // Add the columns to the ProductSalesData DataTable
                prodSalesData.Columns.Add(dateColumn);
                prodSalesData.Columns.Add(productNameColumn);
                prodSalesData.Columns.Add(totalSalesColumn);

                // Let's populate the datatable with our stats.
                // You can add as many rows as you want here!

                // Create a new row
                DataRow dailyProductSalesRow = prodSalesData.NewRow();
                dailyProductSalesRow["SaleDate"] = DateTime.Now.Date;
                dailyProductSalesRow["ProductName"] = "Nike";
                dailyProductSalesRow["TotalSales"] = 10;

                // Add the row to the ProductSalesData DataTable
                prodSalesData.Rows.Add(dailyProductSalesRow);

                // Copy the DataTable to SQL Server using SqlBulkCopy
                using (SqlConnection dbConnection = new SqlConnection("Data Source=ProductHost;Initial Catalog=dbProduct;Integrated Security=SSPI;Connection Timeout=60;Min Pool Size=2;Max Pool Size=20;"))
                {
                    dbConnection.Open();
                    using (SqlBulkCopy s = new SqlBulkCopy(dbConnection))
                    {
                        s.DestinationTableName = prodSalesData.TableName;

                        foreach (var column in prodSalesData.Columns)
                            s.ColumnMappings.Add(column.ToString(), column.ToString());

                        s.WriteToServer(prodSalesData);
                    }
                }
            }
        }
    } 
```

# c++ - 将字符串转换为 char 二维数组

> ID：12992600
> 
> 赞同：1
> 
> 时间：2012-10-20T20:58:32.293
> 
> 标签：c++

我想知道有人知道如何将字符串转换为二维数组吗？这是我的尝试：

```
string w;
char s[9][9];
int p=0;
getline(cin, w);
while(p != w.size())
{
  for (int k = 0; k < 9; k++)
  {
    for(int j = 0; j < 9; j++)
    {
      s[k][j] = w[p];
      p++;
    }
  }
}
  cout << "nums are: " << endl;
  for(int k = 0; k < 9; k++)
  {
    for(int j = 0; j <9; j++)
    {
      cout << s[k][j];
    }
  } 
```

但是数字没有正确打印出来。我希望 s[k][j] 打印出 w 中的所有内容，但它只是打印出乱码。我还注意到，如果我执行 string[81]，那么我会收到一大堆错误。有人可以帮我吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T21:27:47.240

试试这个：

```
const int NUM_ROWS = 9;
const int NUM_COLS = 9;

string w;
char s[NUM_ROWS][NUM_COLS];

getline(cin, w);

if (w.size() != (NUM_ROWS * NUM_COLS))
{
    cerr << "Error! Size is " << w.size() << " rather than " << (NUM_ROWS * NUM_COLS) << endl;
    exit(1);
}

for (int count = 0; count < w.size(); count++)
{
    if (!isdigit(w[count]) && w[count] != '.')
    {
        cerr << "The character at " << count << " is not a number!" << endl;
    }
}

for (int row = 0; row < NUM_ROWS; row++)
{
    for(int col = 0; col < NUM_COLS; col++)
    {
        s[row][col] = w[col + (row * NUM_COLS)];
    }
}

cout << "Nums are: " << endl;

for(int row = 0; row < NUM_ROWS; row++)
{
    for(int col = 0; col < NUM_COLS; col++)
    {
        cout << s[row][col] << " ";
    }

    cout << endl;
} 
```

根据我们的聊天记录，您可能想要：

```
const int NUM_ROWS = 9;
const int NUM_COLS = 9;

string w;
char s[NUM_ROWS][NUM_COLS];

while (!cin.eof())
{
    bool bad_input = false;

    getline(cin, w);

    if (w.size() != (NUM_ROWS * NUM_COLS))
    {
        cerr << "Error! Size is " << w.size() << " rather than " << (NUM_ROWS * NUM_COLS) << endl;
        continue;
    }

    for (int count = 0; count < w.size(); count++)
    {
        if (!isdigit(w[count]) && w[count] != '.')
        {
            cerr << "The character at " << count << " is not a number!" << endl;
            bad_input = true;
            break;
        }
    }

    if (bad_input)
        continue;

    for (int row = 0; row < NUM_ROWS; row++)
    {
        for(int col = 0; col < NUM_COLS; col++)
        {
            s[row][col] = w[col + (row * NUM_COLS)];
        }
    }

    cout << "Nums are: " << endl;

    for(int row = 0; row < NUM_ROWS; row++)
    {
        for(int col = 0; col < NUM_COLS; col++)
        {
            cout << s[row][col] << " ";
        }

        cout << endl;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T21:33:43.387

您没有很好地描述您正在尝试做的事情，您还没有描述您遇到的问题，因此以下内容只是基于猜测。

所以看起来你想要做的是采用如下字符串：

> 敏捷的棕色狐狸跳过了懒惰的狗。

并将其放入二维数组中，例如：

```
 0 1 2 3 4 5 6 7 8
0 T h e   q u i c k
1   b r o w n   f o
2 x   j u m p e d  
3 o v e r   t h e  
4 l a z y   d o g s
5 . x x x x x x x x
6 x x x x x x x x x
7 x x x x x x x x x
8 x x x x x x x x x 
```

您的代码有一个问题是，当您将值复制`w`到`s`其中时，您并不能确保索引`p`实际上在范围内。您似乎已尝试在以下行中处理此问题`while(p != w.size())`；但这是一个外部循环，不能防止`p`超出范围并在内部循环中使用。相反，您必须`p++; if (p==w.size()) break;`在最里面的循环中放置类似的东西 increment `p`。或者更好的是，您应该遍历字符串而不是数组。类似于以下伪代码的内容将替换您的整个`while(p){for(k){for(j){}}}`循环集。：

```
for(size_t i=0; i<w.size(); ++i) {
    int k = compute target row from i
    int j = compute target column from i
    s[k][j] = w[i]
} 
```

此外，这里有一些代码可以在您调试时更好地可视化数组。

```
#include <iostream>

int main() {
    char s[9][9] = {"The","quick","brown","fox","jumped","over","the","lazy","dogs."};

    // your code to get input and copy it into the array goes here
    //
    // for(size_t i=0; i<w.size(); ++i) {
    //     int k = compute target row from i
    //     int j = compute target column from i
    //     s[k][j] = w[i]
    // }

    std::cout << "  0 1 2 3 4 5 6 7 8\n";
    for (int i=0; i<9; ++i) {
        std::cout << i;
        for (int j=0; j<9; ++j)
            std::cout << ' ' << s[i][j];
        std::cout << '\n';
    }
} 
```

如果您在不做任何更改的情况下运行此程序，则输出应如下所示：

```
 0 1 2 3 4 5 6 7 8
0 T h e      
1 q u i c k    
2 b r o w n    
3 f o x      
4 j u m p e d   
5 o v e r     
6 t h e      
7 l a z y     
8 d o g s . 
```

# c++ - STL 重新分配 C++

> ID：12992605
> 
> 赞同：0
> 
> 时间：2012-10-20T20:59:08.443
> 
> 标签：c++, string, std

我得到了那个样本源：

```
std::string tmp1;
std::string tmp2 = "Test";

while(1)
{
    tmp1 += tmp2;
} 
```

我们看到 tmp1 获取 tmp2 的内容，并且每个循环它在字符串末尾添加*“Test” 。*我知道这应该类似于*strcat()*，但 strcat 是一个 C 函数，它有 C 函数*realloc()*

std::string 如何实现字符串**的串联**？它是否使用某种内存重新分配？如果是，我如何在 C++ 中重新分配？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T21:01:59.840

首先，`strcat()`不分配任何内存！如果您提供的缓冲区太小，`strcat()`您将获得缓冲区溢出，而不是重新分配。

该类在`std::string`内部管理内存。它将使用适当的使用 new 和 delete 运算符的顺序重新分配内存。它指定的方式将过度分配内存，而不是在每个字符串添加时分配新内存。

如果您需要使用可变大小的内存，您最好使用`std::vector<T>`合适的类型`T`。这个类负责分配和释放内存。你只需告诉它你需要多少元素。在幕后，它还使用 new 和 delete 运算符（嗯，实际上是一个分配器对象）的组合来维护内存。没有像 C's 这样的直接支持`realloc()`。

# c++ - Qt - 在 GUI 中从计算机加载图像

> ID：12992606
> 
> 赞同：2
> 
> 时间：2012-10-20T20:59:07.957
> 
> 标签：c++, image, user-interface, load, qt-creator

我正在 QtCreator 中开发一个 gui 应用程序，gui 应该做的是：

单击“打开图像”按钮后，我应该能够浏览我的计算机以找到图像文件并将其加载到 ui 窗口中。

到目前为止，窗口是这样的：

![在此处输入图像描述](../Images/90bdb6a5e4c6956ea38122f5bc7f82e8.png)

带有类似 Windows 的浏览器的弹出 dalog 框会很棒。

我没有显示我的任何代码，因为基本上它是我创建 Gui 应用程序时生成的初始源文件。

编辑：

我设法创建了一个对话框，通过将动作侦听器应用于按钮并使用以下代码块从计算机获取图像：

```
void MainWindow::on_pushButton_clicked()
{
    //MyDialog mDialog;
    //mDialog.setModal(true);
    //mDialog.exec();
    QFileDialog dialog(this);
    dialog.setNameFilter(tr("Images (*.png *.xpm *.jpg)"));
    dialog.setViewMode(QFileDialog::Detail);
    QString fileName = QFileDialog::getOpenFileName(this, tr("Open File"),
                                                    "C:/",
                                                    tr("Images (*.png *.xpm *.jpg)"));

} 
```

我现在正试图在窗口右侧显示我选择的图像。有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T21:07:22.297

请看[QFileDialog](http://qt-project.org/doc/qt-4.8/qfiledialog.html)。这显示了系统的打开/保存文件对话框。

**来自文章：**

*QFileDialog 类提供了一个允许用户选择文件或目录的对话框。*

*QFileDialog 类使用户能够遍历文件系统以选择一个或多个文件或目录。*

*创建 QFileDialog 最简单的方法是使用静态函数。在 Windows、Mac OS X、KDE ​​和 GNOME 上，这些静态函数将尽可能调用本机文件对话框。*

```
 fileName = QFileDialog::getOpenFileName(this,
     tr("Open Image"), "/home/jana", tr("Image Files (*.png *.jpg *.bmp)")); 
```

# python - 字典中元组第一项的平均值

> ID：12992608
> 
> 赞同：6
> 
> 时间：2012-10-20T20:59:25.137
> 
> 标签：python, list, dictionary, tuples, average

我有一本形式为：

```
{"a": (1, 0.1), "b": (2, 0.2), ...} 
```

每个元组对应于（分数，标准差）。如何取每个元组中第一个整数的平均值？我试过这个：

```
for word in d:
    (score, std) = d[word]
    d[word]=float(score),float(std)
    if word in string:
        number = len(string)
        v = sum(score)
        return (v) / number 
```

得到这个错误：

```
 v = sum(score)
TypeError: 'int' object is not iterable 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-20T21:07:02.250

[使用列表推导](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)很容易做到。首先，您可以从中获取所有字典值`d.values()`。要列出每个值中的第一个项目，您可以创建一个类似的列表`[v[0] for v in d.values()]`。然后，只需将这些元素的总和除以字典中的项目数：

```
sum([v[0] for v in d.values()]) / float(len(d)) 
```

正如 Pedro 正确指出的那样，这实际上创建了列表，然后进行了求和。如果您有一个巨大的字典，这可能会占用大量内存并且效率低下，因此您需要一个[生成器表达式](http://docs.python.org/reference/expressions.html#generator-expressions)而不是列表推导式。在这种情况下，这只意味着去掉一对括号：

```
sum(v[0] for v in d.values()) / float(len(d)) 
```

这两种方法[在另一个问题](https://stackoverflow.com/questions/47789/generator-expressions-vs-list-comprehension)中进行了比较。

# c# - ASP.NET MVC 关闭

> ID：12992611
> 
> 赞同：1
> 
> 时间：2012-10-20T20:59:34.963
> 
> 标签：c#, .net, asp.net-mvc-2

我的 ASP.NET MVC 应用程序使用一种创建时间成本很高的数据结构，因此我们通过请求共享它的实例。现在，要存储这些数据中的更改，我们需要知道何时结束或服务关闭。

有没有比使用 Finalyser 更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T21:05:40.980

看看[ASP.NET MVC 中何时调用 Session_End()？](https://stackoverflow.com/questions/2373209/when-is-session-end-called-in-asp-net-mvc)

您可以使用正在进行的会话并将该`Session_End`功能放入您的`global.asax`

# objective-c - 将滚动视图添加到情节提要

> ID：12992613
> 
> 赞同：0
> 
> 时间：2012-10-20T20:59:42.533
> 
> 标签：objective-c, xcode, view, uiviewcontroller, scroll

我有一个故事板项目，其中视图控制器推动导航控制器，而导航控制器又推动更多视图控制器。

所以它的视图控制器>>导航控制器>>视图控制器

我如何向导航控制器推送的那些视图控制器添加滚动视图？我习惯了 .m 和 .h，您可以在其中创建 UIScrollView IBOutlet 并更改 .m 中的大小。

非常感谢任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T22:36:37.847

如果您的故事板文件中有一个视图控制器，您可以向它添加一个 UIScrollView 并将其连接到代码中定义的插座。您只需要记住在编辑情节提要文件时放大，因为并非所有缩放级别都允许您添加所有可用的 UI 对象。

# wordpress - 如何包括支付宝费用

> ID：12992618
> 
> 赞同：0
> 
> 时间：2012-10-20T20:59:55.990
> 
> 标签：wordpress, paypal, paypal-sandbox

目前我正在使用贝宝进行在线支付。贝宝对每笔交易收取一些费用。收费金额取决于多种因素，例如货币（国家）和卡类型。这会导致问题，因为这些费用会从我的“想要”价格中扣除。所以我想知道是否有一些特殊的方法可以将这些费用包含在基本价格中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T02:24:14.407

在价格之上添加费用实际上违反了 PayPal 服务条款。如果您被发现这样做，您的帐户可能会被暂停。

来自 PayPal[服务条款](https://cms.paypal.com/us/cgi-bin/marketingweb?cmd=_render-content&content_ID=ua/UserAgreement_full&locale.x=en_US "服务条款")：

> 4.6 无附加费。您同意不会因接受 PayPal 作为付款方式而收取附加费或任何其他费用。您可以就商品或服务的销售收取手续费，只要该手续费不作为附加费并且不高于您对非 PayPal 交易收取的手续费。

（合法）这样做的唯一方法是使用自适应支付 API，它允许您选择支付费用的一方（发送方或接收方）。但是，您必须在他们批准之前为其制定商业案例。

更多信息：[自适应支付](https://www.x.com/developers/paypal/products/adaptive-payments "这里") （在文档中查找 feePayer 参数。

# matlab - 可以在 MATLAB 中创建不返回任何内容的函数吗？

> ID：12992619
> 
> 赞同：23
> 
> 时间：2012-10-20T21:00:05.990
> 
> 标签：matlab, function

我想编写一个函数来进行一些图像处理并将处理后的图像写入文件。我不希望它返回任何东西。我总是可以返回一个可以忽略的虚拟变量，但我想保持我的代码干净。如何在 MATLAB 中实现这一点？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-10-20T21:24:59.693

是的。

```
function [] = my_awesome_function(image,filename,other_inputs)
    % Do awesome things.
end 
```

不会返回任何东西。一个更简单的版本：

```
function my_awesome_function(image,filename,other_inputs)
    % Do awesome things.
end 
```

是等价的。

# java - 有没有办法区分两个相同的字符串，除了mysql中不同的大小写字母

> ID：12992621
> 
> 赞同：2
> 
> 时间：2012-10-20T21:00:22.967
> 
> 标签：java, mysql, string, uppercase, lowercase

我有一个我制作的 java 程序，它将创建一个 5 位字符串并将其添加到 mysql 数据库中。生成的字符串将是数字 1-9 字母 az 和 AZ 的每个组合，例如

00000 ... 00009 0000a ... 0000z 0000A ... 0000Z 00010 ... 00019

等等

我的问题是将这些值添加到数据库时不会添加 0000A 因为 0000a 已经存在

例如，如果我

```
INSERT INTO `mytable`(`mycolumn`) VALUES ("00000");

INSERT INTO `mytable`(`mycolumn`) VALUES ("0000a");

INSERT INTO `mytable`(`mycolumn`) VALUES ("0000A"); 
```

我的数据库中出现的唯一值是 00000 和 0000a

无论如何让mysql在两者之间做出这种区分，这样我就可以拥有看起来唯一的字符串

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T21:09:06.227

MySql 字符串[默认区分大小写](http://dev.mysql.com/doc/refman/5.0/en/case-sensitivity.html)。

`utf8_bin`您可以在`MYCOLUMN`字段中使用区分大小写的排序规则：

```
CREATE TABLE MYTABLE (
    ID BIGINT AUTO_INCREMENT, 
    // other fields...

    MYCOLUMN VARCHAR(128) CHARACTER SET utf8 COLLATE utf8_bin NOT NULL UNIQUE, 
    PRIMARY KEY(ID)
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T21:07:16.047

要使列区分大小写，您可以在定义中使用关键字 binary。例如：

```
CREATE TABLE mytable (
    mycolumn VARCHAR(20) BINARY
); 
```

无论如何，最好的解决方案是使用@Reimeus 所说的区分大小写的排序规则。

# seo - 如何对访客隐藏robot.txt？

> ID：12992622
> 
> 赞同：0
> 
> 时间：2012-10-20T21:00:24.137
> 
> 标签：seo

我已经看到网站隐藏了 robots.txt 文件。

如果您将站点名称输入为 **http://www.mysite.com/robot.txt** ，您将不会收到 robots.txt，

我也想对访问者隐藏文件robot.txt怎么办？

这些线路有联系吗

```
<meta name="ROBOTS" content="NOODP">
         <meta name="Slurp" content="NOYDIR"> 
```

所以我不明白代码的含义。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T21:11:18.913

我不确定你到底在问什么，但你不能用 URL 重写来做到这一点吗？您可以使用爬虫的用户代理字符串（例如“Googlebot”）为访问者显示 robots.txt 文件，然后如果它是非爬虫 UA，则重定向到 404

# linux - Linux 守护进程：替代 chdir("/")？

> ID：12992628
> 
> 赞同：0
> 
> 时间：2012-10-20T21:01:06.023
> 
> 标签：linux, daemon, chdir

我有一个从控制台启动时运行良好的程序（Crafty chess）。对于我的应用程序，我已对其进行了守护。守护进程时，应该通过 .将工作目录更改为“/” `chdir("/")`。

当我遵循该建议时，程序在某些用例中退出，因为它在“/”中没有适当的权限。当我不这样做时`chdir`，程序可以工作，但只是省略`chdir`是一个拐杖。

有没有替代省略的声音`chdir("/")`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T21:22:43.267

它可能不应该写入当前目录。最好写到某个特定的目录。而不是 cd'ing 到`/tmp`当前目录并将文件写入当前目录，而是将文件写入`/tmp/whatever`- 即始终使用绝对路径。

`/tmp`并且在相关说明中，如果可以避免，请不要硬编码。使其成为配置选项，或使用`$TMPDIR`环境变量，或者最好使用`mktemp()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T06:39:47.747

您可以调用[daemon(3)](http://linux.die.net/man/3/daemon)函数（使用非零第一个`nochdir`参数），以便它守护进程而不执行`chdir("/")`)

但是正如 John Kugelman 所建议的那样，您不应该在守护程序中编写（也不读取）任何相对路径（或者您应该对`chdir`可以读取、写入和搜索的目录进行显式操作）。

# php - 登录 PHPMyAdmin 时出现错误 324

> ID：12992632
> 
> 赞同：1
> 
> 时间：2012-10-20T21:01:30.297
> 
> 标签：php, apache, phpmyadmin

几天来，我一直在为一个令人沮丧的问题苦苦挣扎，而且我越来越困惑；大约三十秒后，`PHPMyAdmin`如果没有收到*Web 错误 324* ，我将无法登录。和 PHPMyAdmin之间的通信`MySQL`正常，但登录失败是问题所在。我怀疑PHP的配置，但我不确定。

我正在运行一个`Apache 2.0.64`带有`PHP 5.2.17`on的 Web 服务器，`Windows Server 2003`我可以毫无问题地运行 PHPINFO。

我已经多次重新安装了 Apache 和 PHP，但问题是一样的。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T13:50:19.303

如果您在使用 Chrome 时遇到此问题，可以尝试[此处](http://www.roezer.com/fixing-chrome-bug-error-324-neterr_empty_response/)发布的解决方案。如果您的问题出在任何浏览器中，那么您必须检查更多相关日志。从 apache 的日志开始，然后，您可以检查并发布实时 http 标头为您提供的响应标头（firefox 插件）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T20:22:00.777

我现在已经使用确切的软件环境设置了另一台 Web 服务器，并且一切都在该服务器上运行顺利，因此 Windows 可能有问题。但是我必须改天...感谢您的所有支持和帮助！

# java - 如何打包一个 Akka 项目

> ID：12992638
> 
> 赞同：0
> 
> 时间：2012-10-20T21:02:12.563
> 
> 标签：java, maven, akka

我有一个 Akka 独立项目

实现微内核的 Bootable 接口

使用微内核打包 akka 系统的教程

描述了一个使用 sbt 插件的 SBT 项目

谁能告诉我如何用微内核打包 maven 项目

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T11:41:28.063

在 Google 上搜索“akka microkernel maven”将其列为您问题的最有争议的答案之一：http: [//jcranky.com/2012/07/13/akka-microkernel-with-maven/](http://jcranky.com/2012/07/13/akka-microkernel-with-maven/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T03:31:47.443

在浏览了 JCrnak 的博客并阅读了 maven 程序集插件和清单文件文档后，我想出了一个与 JCranky 略有不同的解决方案，并愿意分享。

第一个假设是所有 Akka 插件（包括微内核的插件）都已在 POM.xml 中配置。其次，要分发的应用程序已经开发完成。

maven 包阶段创建一个可执行的 jar 文件。但是，这需要使用 java -jar 命令直接执行应用程序的主类。为了使包应用程序知道主类的位置，我们在 POM.xml 中插入以下插件以及清单文件的配置

```
 <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-jar-plugin</artifactId>
                <configuration>
                    <archive>
                        <manifest>
                            <addClasspath>true</addClasspath>
                            <classpathPrefix>lib/</classpathPrefix>
                            <mainClass>com.bbox.gesture.BoundingBox</mainClass> 
                        </manifest>
                    </archive>
                </configuration>
            </plugin> 
```

要将 akka 依赖项复制到目标文件中的 lib 文件中，我们添加以下插件。

```
 <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-dependency-plugin</artifactId>
            <executions>
                <execution>
                    <id>copy</id>
                    <phase>package</phase>
                    <goals>
                        <goal>copy-dependencies</goal>
                    </goals>
                    <configuration>
                        <outputDirectory>
                          ${project.build.directory}/lib
                        </outputDirectory>
                    </configuration>
                </execution>
            </executions>
        </plugin> 
```

使用这个插件，我们将所有必要的文件复制到目标文件中。

现在我们使用带有descriptor.xml 文件的程序集插件将目标文件的内容复制到一个zip 文件夹。下面是descriptor.xml 文件。

```
<assembly xmlns="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2 http://maven.apache.org/xsd/assembly-1.1.2.xsd">

  <id>akka</id>

  <formats>
    <format>zip</format>
  </formats>

  <fileSets>
    <fileSet>
      <directory>${project.build.directory}</directory>
      <outputDirectory>/deploy</outputDirectory>
      <includes>
        <include>**</include>
      </includes>
      <excludes>
          <exclude>*.jar</exclude>
          <exclude>*.zip</exclude>
      </excludes>
    </fileSet>
  </fileSets>

    <files>
        <file>
            <source>target/com-bbox-gesture-1.0-SNAPSHOT.jar</source>
            <outputDirectory>/deploy</outputDirectory>
            <destName>bbox.jar</destName>
        </file>

    <file>
      <source>src/main/resources/application.conf</source>
      <outputDirectory>/deploy/config</outputDirectory>
    </file>
  </files>

</assembly> 
```

要运行程序集插件，我们将以下内容添加到 POM.xml

```
 <plugin>
  <artifactId>maven-assembly-plugin</artifactId>
  <version>2.3</version>
  <configuration>
    <descriptors>
      <descriptor>/descriptor.xml</descriptor>
    </descriptors>
  </configuration>

  <executions>
    <execution>
      <id>make-assembly</id>
      <phase>package</phase>
      <goals>
        <goal>single</goal>
      </goals>
    </execution>
  </executions>
</plugin> 
```

最重要的是，我们添加一个简单的批处理文件，通过从部署目录运行 java -jar 命令来启动应用程序。下面是批处理文件中的简单脚本

```
echo off  
cls  
start java -jar bbox.jar 
```

start 命令对可执行 jar 文件运行 java -jar 命令。bbox.jar 文件是可执行的 jar

要运行应用程序，只需解压缩服务器中的 zip 文件夹，导航到 start.bat 文件并单击。

# batch-file - 复制和重命名

> ID：12992645
> 
> 赞同：1
> 
> 时间：2012-10-20T21:02:52.140
> 
> 标签：batch-file

我想编写一个批处理脚本，该脚本将重复复制现有文件，逐渐增加复制文件的文件名中的数字。

我天真地写了这个

```
for /l %%N in (1 5 500) do copy /y C:\batch\batch.pre C:\temp\g=0.00%%N 
```

并没有进一步。你们中的任何一个聪明的小伙子和小伙子会让我走上正确的道路吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T22:26:03.540

第一个文件名为`batch(1).pre`，第二个文件名为 ，`batch(2).pre`依此类推，最多 500 个文件。

```
@echo off
for /l %%x in (1,1,500) do (
  copy C:\batch\batch.pre batch^(%%x^).pre
) 
```

# android - 如何确定添加联系人的位置？

> ID：12992649
> 
> 赞同：0
> 
> 时间：2012-10-20T21:03:00.350
> 
> 标签：android, service, contacts, intentfilter, contentobserver

一段时间以来，我一直在努力解决这个问题。添加联系人时不会触发 Intent 操作（据我所知）。我有什么选择来解决这个问题？

以下是我一直在玩的一些想法：

1.  首先，我使用时间戳记录了用户位置，并定期扫描联系人数据库并将新条目添加到我自己的带有时间戳的数据库中。然后我可以比较这些并尝试找到一个体面的匹配。我不喜欢这种方法，因为它很容易出错。
2.  最近我一直在查看联系人数据库的 ContentObserver，但我不确定如何设置它以便它不断观察，而不仅仅是当我的应用程序处于焦点时。也许在服务中？关于内容观察者的生命周期的文档对我来说不是很清楚，即它是否在注册它的服务/活动死亡后死亡？

所以我真正想要的是一种无缝的方式来记录当我的应用程序安装在设备上时用户在何时何地添加联系人。应用程序应该处于焦点/运行状态是不够的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-01T07:15:21.727

你的第二个想法是正确的。正如您正确猜测的那样，观察者需要在服务中。在 onCreate() 中注册观察者。您将在 contentObserver 的 onChange 中使用 contentProvider。您需要保持上次使用共享首选项读取数据库的时间。请注意在共享首选项中存储的时间之后条目的更改。现在将共享偏好的时间更新为当前时间。同时在 onDestroy() 中取消注册内容观察者。

# authentication - 用于身份验证和授权的 Wordpress 插件？

> ID：12992650
> 
> 赞同：3
> 
> 时间：2012-10-20T21:03:05.943
> 
> 标签：authentication, wordpress

是否有 WordPress 插件可以让我注册用户/访问者并让他们只能看到某些页面和某些数据？我的客户有一个保险索赔网站，该网站将有被保险人和理算员访问该网站。两者都可能需要注册，但他们输入表格的某些数据可能需要彼此分开。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T23:16:35.967

听起来您需要自定义代码，但是会员插件可能对您有帮助： [http](http://wordpress.org/extend/plugins/membership/) ://wordpress.org/extend/plugins/membership/付费版本有更多选项来限制对内容的访问：[http:// premium.wpmudev.org/project/membership/](http://premium.wpmudev.org/project/membership/)

# javascript - 在 JavaScript 中使用 getElementsByClass 更改光标？

> ID：12992651
> 
> 赞同：0
> 
> 时间：2012-10-20T21:03:07.333
> 
> 标签：javascript, html, cursor, getelementbyid, getelementsbyclassname

我希望我的光标在单击按钮后悬停在具有“one”类的元素上时是一只手。这是我的代码

```
<!DOCTYPE html>
<html>
<head>
<script type="text/javascript" language="JavaScript">
    function cursor()
    {
    document.getElementByClass("one").style.cursor="pointer";
    }
</script>
<h1 class="one">Mouse over this text!</h1>
</head>
<body>
<p class="fff">not me!</p>
<button type="button" onclick="cursor()">Change cursor</button>
</body>
</html> 
```

到目前为止，当我将其更改为 getElementById("one") 并将其中一个元素从“one”类更改为“one”id 时，它才起作用。为什么这也不适用于课堂？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T21:07:25.720

它不起作用的原因是因为`getElementsByClassName()`返回多个元素的节点列表，您必须单独访问：

```
function cursor() {
    var elems = document.getElementByClass("one");
    for (var i=0, len=elems; i<len; i++) {
        elems[i].style.cursor = 'pointer';
    }
} 
```

但是真的没有必要用 JavaScript 做这个，使用 CSS：

```
.one {
    cursor: pointer;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T21:05:16.597

您可以通过使用 CSS 来避免在此处使用 JavaScript。

```
.one {
    cursor: pointer;
} 
```

JavaScript 没有自动工作的原因是因为`getElementById()`（如果成功）返回对元素的单个引用，您可以在其中设置属性。

切换到`getElementsByClassName()`没有自动工作的原因是因为它返回 a `NodeList`，一个元素的集合。这个集合就像一个数组，你必须访问它的编号属性才能访问对它匹配的元素的引用。

# hex - 十六进制加法

> ID：12992661
> 
> 赞同：1
> 
> 时间：2012-10-20T21:04:26.177
> 
> 标签：hex

我可能会提出这个问题有点错误。我需要用纸和笔以十六进制计算 IPv4 标头校验和。在这个链接[http://en.wikipedia.org/wiki/IPv4_header_checksum](http://en.wikipedia.org/wiki/IPv4_header_checksum) 在最后一个例子中他们做到了。

我在理解它们如何直接以十六进制计数时有点问题。在纸上做时，如果我得到一个超过 15 的数字，例如 48，我会使用什么提醒，我会写下什么？

任何人都可以解释如何处理这个问题？

谢谢你，很抱歉提出错误的问题，但我现在已经改变了:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T15:19:55.763

请参阅[http://www.youtube.com/watch?v=UGK8VyV1gLE](http://www.youtube.com/watch?v=UGK8VyV1gLE)，它很好地描述了该过程。

以十六进制（以 16 为底）计数就像以十进制（以 10 为底）计数一样，只是当您计数超过 F 时才开始携带余数。

因此，在您的评论示例中，这就像以十进制计数而没有余数：

```
 15
 24
---
 39 
```

一个简单的真正 HEX 加法是：

```
 11
  F
---
 20 
```

1 + F = 10 = 1 余数 + 1 = 20

15 over 48 也很简单：

```
 15
 48
---
 5D 
```

8 + 5 = D 无余数，1 + 4 = 5 无余数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T21:14:14.607

十六进制只是数字的表示。为了让计算机帮助您进行加法，您必须将十六进制表示的数字转换为数字本身，然后进行加法，然后将其转换回来。这不是到二进制的转换，因为二进制也只是一种不同的表示形式。

如果您不希望从十六进制转换，则必须解释**为什么**不希望进行此转换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T21:20:54.087

我想这听起来像是一个愚蠢的答案，但这是我能以你写问题的方式给出的最好的答案。

十六进制的加法与十进制的加法完全相同，除了用 16 位而不是 10 位数字。所以实际上，您要问的是如何进行一般加法（包括十进制）。在 dec 中，9 + 1 = 10。在十六进制中，F + 1 = 10。显然，相同的加法规则适用于两者.

# iphone - uitextview删除文本按钮触摸重复

> ID：12992663
> 
> 赞同：0
> 
> 时间：2012-10-20T21:04:28.760
> 
> 标签：iphone, uibutton, uitextview, ios5.1, backspace

我有一个可编辑的uitextview。我正在尝试添加一个模仿标准键盘退格/删除按钮操作的退格删除按钮。即触摸重复功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T03:34:58.013

我会通过在屏幕上添加一个按钮而不添加目标来解决这个问题。然后我会使用触摸事件来触发按钮动作。创建按钮时，将标签设置为唯一值。在我的示例中，我将标签设置为 100。然后实现以下代码，您应该一切顺利。

```
- (void)backspace {
    if (![textField.text isEqualToString:@""]) {
        NSString *backspace = textField.text;
        int lengthofstring = backspace.length;
        backspace = [backspace substringToIndex:lengthofstring - 1];
        textField.text = backspace;
    }
}

-(void)touchesBegan:(NSSet*)touches  withEvent:(UIEvent*)event {
    UITouch *touch = [touches anyObject];

    if (touch.view.tag == 100) {
        timer = [NSTimer scheduledTimerWithTimeInterval:0.3 target:self selector:@selector(backspace) userInfo:nil repeats:YES];
    }
}

-(void)touchesEnded:(NSSet*)touches  withEvent:(UIEvent*)event {
    UITouch *touch = [touches anyObject];

    if (touch.view.tag == 100) {
        if (timer != nil)
            [timer invalidate];
        timer = nil;
    }
}

-(void)touchesMoved:(NSSet*)touches  withEvent:(UIEvent*)event {
    UITouch *touch = [touches anyObject];

    if (touch.view.tag == 100) {
        if (timer != nil) {
            [timer invalidate];
            timer = nil;
        }
    }
} 
```

# python - '动画' 2D 散点图

> ID：12992669
> 
> 赞同：0
> 
> 时间：2012-10-20T21:05:36.707
> 
> 标签：python, animation, matplotlib

我想可视化过滤器的转换。我想绘制一个散点图，每半秒绘制下一个过滤器的值。

我的目标是：

1.  绘制直到点 (k) 的所有值，但要在绘图上指示值 (k)。

2.  在 (k) 和 (k+1) 的绘图值之间暂停

3.  全屏绘图

4.  完成所有迭代后有情节

我做了一个函数，但它效率很低，并且在绘制一些值后一切都变慢了。

我发现的唯一方法是使用交互式绘图`ion()`，并且每一步都使用更新的标记再次绘制所有点。对于每个步骤（k），我宁愿删除以前的点（k-1）并用不同的标记添加它们并添加当前点（k）

```
import pylab as pl
import time
xPos1 = pl.arange(100)
m1 = [pl.sin(pl.pi*x/10) for x in xPos1]
m2 = [pl.cos(pl.pi*x/30) for x in xPos1]
m3 = [pl.sin(pl.pi*x/20) for x in xPos1]
trueVal1 = [0 for real in xPos1] 

def conversionAnim(xPos, trueVal, *args):    
    mTuple = [arg for arg in args]
    colorList = ['Green','Blue','Orchid','Cyan','Goldenrod','Salmon','Orange','Violet','Magenta']
    f = pl.figure(figsize =(17,8))
    pl.ion()
    pl.xlim(min(xPos)-1, max(xPos)+1)
    pl.ylim(min(j for i in mTuple for j in i)-.5, max(j for i in mTuple for j in i)+.5)
    for i in range(len(xPos)):
        print '\ni = %i' % i 
        for j in range(len(mTuple)):
            m = mTuple[j]            
            mVal = [element for element in m] 
            print 'Value%i is %s' %(j,mVal[i])       
            if i == 0:
                pl.hold(True)
                pl.scatter(xPos[i],mVal[i],s=50, marker = 'o', color = 'Dark'+colorList[j])
                pl.plot(xPos[i],trueVal[i])                
            else:

                pl.scatter(xPos[i],mVal[i],s=50, marker = 'o',color = 'Dark'+colorList[j])                
                pl.scatter(xPos[i-1], mVal[i-1],s=50, marker = 'o', color = 'white')
                pl.scatter(xPos[i-1], mVal[i-1],s=50, marker = 'x', color = colorList[j])                
                pl.plot(xPos[i-1:i+1],trueVal[i-1:i+1], color = 'red')       

            pl.draw()
        time.sleep(.01)
    time.sleep(3)  # to hold figure after its shown

if __name__ == '__main__':
    conversionAnim(xPos1, trueVal1, m1, m2, m3) 
```

我不知道如何绕过`ion()`并使此功能有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T16:55:15.380

使这更有效的最简单方法是使用 2N 线图而不是大量`scatter`图。（看起来您最终会为每个数据点绘制三个散点图！）

作为旁注，您有几行 ( `mTuple = [arg for arg in args]`) 将元组转换为`list`s。写起来更清楚`mTuple = list(args)`，但我认为您实际上不需要进行这些转换，因为您只需要对所做的一切进行迭代即可。

```
import itertools

def covnersion_Anim(xPos,trueVal,*args):
    mTuple = args
    plt_bulk_lst = []
    plt_head_lst = []
    color_list = ['Green','Blue','Orchid','Cyan','Goldenrod','Salmon','Orange','Violet','Magenta']
    f = plt.figure(figsize =(17,8))
    ax = plt.gca()
    ax.set_xlim([min(xPos),max(xPos)])
    ax.set_ylim([0,1])
    ms = 5
    for j,c in zip(range(len(mTuple)),itertools.cycle(color_list)):
        plt_bulk_lst.append(ax.plot([],[],color=c,ms=ms,marker='x',linestyle='none')[0])
        plt_head_lst.append(ax.plot([xPos[0]],[mTuple[j][0]],color='Dark'+c,ms=ms,marker='o',linestyle='none')[0])
    real_plt, = plot([],[],color='red')

    for j in range(1,len(xPos)):
        print j
        for hd_plt,blk_plt,m in zip(plt_head_lst,plt_bulk_lst,mTuple):
            hd_plt.set_xdata([xPos[j]])
            hd_plt.set_ydata([m[j]])

            blk_plt.set_ydata(m[:j])
            blk_plt.set_xdata(xPos[:j])

            real_plt.set_xdata(xPos[:j])
            real_plt.set_ydata(trueVal[:j])

        plt.pause(1)

    return f
covnersion_Anim(range(12),rand(12),rand(12),rand(12),rand(12)) 
```

# ajax - 如何更改 WordPress 单个帖子 URL 的默认行为？

> ID：12992672
> 
> 赞同：0
> 
> 时间：2012-10-20T21:05:48.837
> 
> 标签：ajax, wordpress, .htaccess

我试图找出一种方法来改变 wordpress 单个帖子 url 的行为，这样我就可以通过 ajax 将帖子内容加载到 index.php 页面中，而不是使用 single.php 文件加载页面。该站点是一个 wordpress 站点，但使用 ajax 将所有内容加载到一个页面中。本质上，实际读取的 php 文件永远不会改变，而是每当用户单击新页面时，页面内容都会通过 ajax 请求加载。

有什么方法可以编辑我的 .htaccess 文件，以便当有人访问 www.mysite.com/blog/post-name 时，它​​会加载 index.php 并告诉脚本将请求的帖子内容加载到索引中。通过ajax的php页面？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T21:16:25.557

如果您已经在 index.php 文件中使用了 AJAX，那么： 一些想法。在您的服务器上，您可以删除 single.php 文件并创建指向 index.php 文件的符号链接：

对于 *nix（包括 os x）：

```
ln -s index.php single.php 
```

或者在 single.php 文件中，您可以删除所有内容并包含 index.php：

```
<?php include('index.php'); ?> 
```

控制是否通过 AJAX 加载需要在您的客户端上完成。

还是您根本没有 AJAX 工作？如果不是，那么答案会稍微复杂一些。以下是我使用 wordpress 网站设置 AJAX 的方法：

在服务器上，我使用[JSON API](http://wordpress.org/extend/plugins/json-api/) wordpress 插件来轻松地通过 AJAX（JSON 格式）提供内容。

在客户端上，您可以使用 jQuery 来捕获任何指向 wordpress 的链接并通过 AJAX 运行它们。我在这里复制一些代码，从不同域的服务器中检索最近的帖子列表（所以我使用的是 JSONP 而不是直接的 JSON）。您可以查看 JSON API 文档，了解如何修改它以获取单个帖子。

```
jQuery(function($) {
    $('a').click(function(event) {
        $('body').css('cursor', 'wait');
        event.preventDefault();  // this prevents the regular behavior of clicking a link

        $.ajax({
        type:'GET',
        url:url,
        async:false,
        jsonpCallback:'jsonCallback',
        contentType:"application/json",
        data: {
            json: 'get_recent_posts',
                count: 10,
                page: page + 1
            },
            dataType:'jsonp'
        }).always(function(){
            jQuery('body').css('cursor', 'auto');
        }).done(function(json) {
            $.each(json.posts, function(index, value) {
            tags = [];
            $.each(value.tags, function(index, value) {
                tags.push('<a href="' + tag_url + value.slug + '">' + value.title + '</a>');
            });
            html =
                '<div>' +
                    '<header class="entry-header">' +
                        value.title +
                        '<br>' +
                        value.date +
                    '</header>' +
                    '<div class="entry-content">' +
                        value.content +
                    '</div>' +
                '</div>' +
                '<span class="labels_label">'+
                    'Labels: ' +
                '</span>' +
                '<span class="labels">' +
                    tags.join(', ') +
                '</span>' +
                '<hr>';
            $('.full-width .content').append(html);
        });
    });
}); 
```

# php - 带有jquery困境的多选

> ID：12992677
> 
> 赞同：0
> 
> 时间：2012-10-20T21:06:09.507
> 
> 标签：php, javascript, jquery, select, drop-down-menu

我有一个下拉菜单，允许用户选择某些选项。之后它调用一个 php 脚本进行处理。我遇到的问题是，如果我只选择一个选项，一切正常，但是当我选择多个选项时，它就不起作用了。

HTML：

```
<select name="select[]" id="the_select">
<option></option>
</select> 
```

JS：

```
var form_data = {
    select : $("#the_select").val()
}; 
```

现在我的 php 脚本需要一个数组，我该如何完成呢？我是否必须遍历 javascript 中的 select 元素并构建要发送的数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T21:22:58.130

使用`serialize()`方法用一个函数序列化整个表单，让jQuery做数组管理和编码变量的繁重工作

```
var ajaxData=$('#myForm').serialize()
$.post( url, ajaxData, function(){
  /* ajax success code*/

}) 
```

API参考：http: [//api.jquery.com/serialize/](http://api.jquery.com/serialize/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T21:13:27.007

每个元素是否都有唯一的 id=""？如果没有，这可能是它不起作用的原因。或者，您可以使用 class="the_select"，因为类不需要是唯一的。jQuery 需要更改为：

```
var form_data = {
    select : $(".the_select").val()
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T21:16:15.403

如果您需要多选，请确保包含多个属性：

```
<select name="select[]" id="the_select" multiple>
<option></option>
</select> 
```

如果您使用多个选择并且您正在尝试获取它们的所有值，那么您将需要单独选择每个选择，如下所示：

```
$('select[name="select[]"]').each(function(){
// Do Something with the value here
$(this).val()
}); 
```

# colorbox - 使用 javascript 重新加载页面后，颜色框看起来不正确

> ID：12992680
> 
> 赞同：2
> 
> 时间：2012-10-20T21:06:34.170
> 
> 标签：colorbox

我在我的项目中使用 colorbox 来显示应用程序表单，如果用户关闭 colorbox 页面，主窗口将使用此脚本刷新：

```
$(".form").colorbox({
        iframe: true,
        innerWidth: 755,
        innerHeight: 440,
        overlayClose: false,
        //main page refresh
        onClosed: function () {
            location.reload(true);
        } 
```

但是在页面刷新后，如果用户点击彩盒链接，屏幕看起来像这样。

![在此处输入图像描述](../Images/9bd3618114ac6ac42d7858e6bca04ace.png)

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T15:19:20.633

我找到了问题，我为和我一样有同样问题的开发人员写了解决方案；

在索引页面中，我首先调用 javascript，而不是 css。这是问题所在。我调用了第一个 css，然后 javascripts 解决了问题

# javascript - html 5 canvas - 获取图像的颜色，然后用该颜色更改像素

> ID：12992681
> 
> 赞同：7
> 
> 时间：2012-10-20T21:06:46.150
> 
> 标签：javascript, html, image, canvas

我不知道这是否可能，我从未真正使用过 html 画布，但我知道

```
var imgPixels = canvasContext.getImageData(0, 0, canvas.width, canvas.height); 
```

但是我如何使用它来获取具有某种颜色的所有像素并将这些像素更改为白色？所以假设我有一个红色的像素：

```
if(pixel==red){
    pixel = white;
} 
```

这是我想要的简单版本，但不知道该怎么做......

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-20T21:21:30.943

做这样的事情（这里是[画布备忘单](https://websitesetup.org/wp-content/uploads/2015/11/Infopgraphic-CanvasCheatSheet-Final2.pdf)）：

```
const canvas = document.querySelector("canvas");
const context = canvas.getContext("2d");

const { width, height } = canvas;

const gradient = context.createLinearGradient(0, 0, 0, height);
gradient.addColorStop(0.25, "#FF0000");
gradient.addColorStop(0.75, "#000000");

context.fillStyle = gradient;

context.fillRect(0, 0, width, height);

setTimeout(() => {
    const image = context.getImageData(0, 0, width, height);
    const { data } = image;
    const { length } = data;

    for (let i = 0; i < length; i += 4) { // red, green, blue, and alpha
        const r = data[i + 0];
        const g = data[i + 1];
        const b = data[i + 2];
        const a = data[i + 3];

        if (r === 255 && g === 0 && b === 0 && a === 255) { // pixel is red
            data[i + 1] = 255; // green is set to 100%
            data[i + 2] = 255; // blue is set to 100%
            // resulting color is white
        }
    }

    context.putImageData(image, 0, 0);
}, 5000);
```

```
<p>Wait for 5 seconds....</p>
<canvas width="120" height="120"></canvas>
```

希望有帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-20T21:15:22.607

当你得到 时`getImageData()`，你有一个带有`data`和`width`的对象`height`。

您可以循环`data`，其中包含像素数据。它以 4 个为一组，分别为红色、绿色、蓝色和 alpha。

因此，您的代码可以查找*红色*像素（您必须决定是什么构成了红色像素）并将红色、绿色和蓝色全部设置为打开（将其更改为白色）。然后，您可以使用更新的像素数据`putImageData()`替换。`canvas`

```
// You will need to do this with an image that doesn't violate Same Origin Policy.
var imgSrc = "image.png";
var image = new Image;

image.addEventListener("load", function() {

    var canvas = document.getElementsByTagName("canvas")[0];
    var ctx = canvas.getContext("2d");

    canvas.width = image.width;
    canvas.height = image.height;

    ctx.drawImage(image, 0, 0);

    var imageData = ctx.getImageData(0, 0, image.width, image.height);
    var pixels = imageData.data;
    var i;

    for (i = 0; i < pixels.length; i += 4) {
        // Is this pixel *red* ?
        if (pixels[i] > 100) {
            pixels[i] = 255;
            pixels[i + 1] = 255;
            pixels[i + 2] = 255;
        }
    }

    ctx.putImageData(pixels);

});

image.src = imgSrc;​ 
```

# android - APK 扩展文件

> ID：12992682
> 
> 赞同：0
> 
> 时间：2012-10-20T21:07:01.407
> 
> 标签：android, apk, google-play

我想测试 APK 扩展文件是否正在下载并正常工作。我可以发布我的应用程序但只对我自己可见，以测试安装和 APK 扩展文件是否正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T16:01:52.620

请参阅[“](http://developer.android.com/google/play/expansion-files.html#Testing)测试文件下载”中的参考：单击“保存”按钮。不要单击发布。这会将应用程序保存为草稿，这样您的应用程序就不会发布给 Google Play 用户，但您可以使用扩展文件来测试下载过程。

# objective-c - XCode如何评估带有X表达式的字符串公式

> ID：12992689
> 
> 赞同：2
> 
> 时间：2012-10-20T21:07:28.203
> 
> 标签：objective-c

我正在尝试将字符串公式评估为浮点数，但是我找不到解决方案。这是一个例子。我需要以这种方式计算大约 200 个公式。

```
- NSString *Formula;
- Float  *Result;
- Float *x

- x = 12;
- Formula = @"12.845*x+(-0.505940)"; 
```

**结果=评估/计算（公式）；**

然后我将使用 Result 作为公式的结果。--> 结果 = @"12.845*x+(-0.505940)";

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-21T03:12:56.443

您可以使用`NSExpression`：

```
NSString *formula = @"12.845*x+(-0.505940)";
float x = 12.0;

NSExpression *expr = [NSExpression expressionWithFormat:formula];
NSDictionary *object = [NSDictionary dictionaryWithObjectsAndKeys:
                          [NSNumber numberWithFloat:x], @"x", nil];

float result = [[expr expressionValueWithObject:object context:nil] floatValue];
NSLog(@"%f", result);
// Output: 153.634064 
```

这甚至适用于某些功能，例如`sqrt`, `exp`, ... 请参阅`NSExpression`文档以获取支持的功能列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T23:59:50.677

您应该执行以下操作：

1.  将 x 替换为其在字符串中的值\
2.  以[逆波兰表示法将操作数（值）和运算符放入堆栈](http://en.wikipedia.org/wiki/Reverse_Polish_notation)
3.  执行计算
4.  返回结果

我就是这样做的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-16T09:32:30.160

快速回答，

```
let formula = "12.845*x+(-0.505940)"
let x = 12

let expr = NSExpression(format: formula)
let object = ["x":x]

let result = expr.expressionValue(with: object, context: nil)

print(result)
//Output: 153.63406 
```

# php - AJAX URL 导航 404 未找到

> ID：12992699
> 
> 赞同：0
> 
> 时间：2012-10-20T21:08:49.770
> 
> 标签：php, html, ajax, jquery

因此，我正在尝试实现基于 ajax 的密码更改，以便在用户点击提交时页面不会刷新。所以这是我的 html、jquery 和 php：

```
Current Password<input type="password" id="change_password" name="change_password"><br>
New Password<input type="password" id="new_password" name="new_password"><br>
Verify Password<input type="password" id="verify_password" name="verify_password"><br> 
```

查询：

```
$('#change_Pass').submit(function(e){
    var $this = $(this);  
    $.ajax({
        data: $(this).serialize(), // get the form data
        type: $(this).attr('method'), // GET or POST
        url: '/Private/change_password.php', // the file to call
        success: function(response) { // on success..
            //$('#success_div).html(response); // update the DIV
            alert("good");
        },
        error: function(e, x, r) { // on error..
            //$('#error_div).html(e); // update the DIV
            alert("bad");
        }
    });
    e.preventDefault();
    return false; //so it doesn't refresh or submit the page
}); 
```

PHP：

```
<?php
session_start();
require_once '../classes/Bcrypt.php';
ini_set('display_errors', 'On');
error_reporting(E_ALL | E_STRICT);
$usr = $_SESSION["username"];
$old_pwd = $_POST["change_password"];
$new_pwd = $_POST["new_password"];
$new_pwd = Bcrypt::hash($new_pwd);
try {
    $link = new PDO('mysql:host=*;dbname=*;charset=UTF-8','*','*');
    $query = "SELECT *
            FROM Conference
            WHERE Username = :un";

    $stmt = $link->prepare($query);

    $stmt->bindParam(':un', $usr);
    $stmt->execute();
    $row = $stmt->fetchAll();

    $hash = $row[0]["Password"];
    $is_correct = Bcrypt::check($old_pwd, $hash);

    if($is_correct) {
        $query = "UPDATE Conference
                SET `Password`=:new_pwd 
                WHERE Username = :usr";

        $stmt = $link->prepare($query);
        $stmt->bindParam(':new_pwd', $new_pwd);
        $stmt->bindParam(':usr', $usr);
        $stmt->execute();
    } 
} catch(PDOException $e) {
    print "Error!: " . $e->getMessage() . "<br/>";
    die();
} 
```

我的文件结构只是：

```
Folder
    |--Front.php
    |--Private
        |--change_password.php 
```

但是每次我输入这些东西并点击提交。它试图去`www.domain.com/Folder/change_password.php`而不是`www.domain.com/Folder/Private/change_password.php`。它只是说

```
The requested URL /Folder/change_password.php was not found on this server. 
```

我尝试了完整的网址，`/Private/change_password.php`但没有任何效果。我不明白为什么它看不到文件夹。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T23:00:42.867

使用 $this 而不是 $(this) 并重试：

```
$('#change_Pass').submit(function(e){
    var $this = $(this);
    $.ajax({
        data: $this.serialize(), // $this
        type: $this.attr('method'), // $this
        url: '/Private/change_password.php', //
        success: function(response) {
            alert("good");
        },
        error: function(e, x, r) {
            alert("bad");
        }
    });
    e.preventDefault();
    return false; //so it doesn't refresh or submit the page
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T21:10:49.423

```
$.ajax({
        data: $(this).serialize(), // get the form data
        type: $(this).attr('method'), // GET or POST
        url: '/', // the file to call
        success: function(response) { // on success..
            //$( 
```

您的网址字段为空

# html - Requestanimationframe 使用问题

> ID：12992700
> 
> 赞同：1
> 
> 时间：2012-10-20T21:08:52.650
> 
> 标签：html, canvas, requestanimationframe

我从[http://my.opera.com/emoller/blog/2011/12/20/requestanimationframe-for-smart-er-animating获得了以下 RequestAnimationframe 函数](http://my.opera.com/emoller/blog/2011/12/20/requestanimationframe-for-smart-er-animating)

我正在尝试使用它。但不知道如何调用它和使用它。谁能给我一个简单的例子。我是这个 html5 动画的新手，所以你可以理解..

我将非常感谢任何帮助！功能如下。。

```
 (function() {
    var lastTime = 0;
    var vendors = ['ms', 'moz', 'webkit', 'o'];
    for(var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {
        window.requestAnimationFrame = window[vendors[x]+'RequestAnimationFrame'];
        window.cancelRequestAnimationFrame = window[vendors[x]+
          'CancelRequestAnimationFrame'];
    }

    if (!window.requestAnimationFrame)
        window.requestAnimationFrame = function(callback, element) {
            var currTime = new Date().getTime();
            var timeToCall = Math.max(0, 16 - (currTime - lastTime));
            var id = window.setTimeout(function() { callback(currTime + timeToCall); }, 
              timeToCall);
            lastTime = currTime + timeToCall;
            return id;
        };

    if (!window.cancelAnimationFrame)
        window.cancelAnimationFrame = function(id) {
            clearTimeout(id);
        };
}()) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T05:14:33.373

只需将该代码粘贴到您的 JS 或它自己的文件中，然后将其放在最底部的渲染函数中。

```
requestAnimationFrame(yourrenderingfunction); 
```

**[现场演示](http://jsfiddle.net/loktar/Ts2g6/)**

```
// requestAnimationFrame shim
(function() {
    var lastTime = 0;
    var vendors = ['ms', 'moz', 'webkit', 'o'];
    for(var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {
        window.requestAnimationFrame = window[vendors[x]+'RequestAnimationFrame'];
        window.cancelRequestAnimationFrame = window[vendors[x]+
          'CancelRequestAnimationFrame'];
    }

    if (!window.requestAnimationFrame)
        window.requestAnimationFrame = function(callback, element) {
            var currTime = new Date().getTime();
            var timeToCall = Math.max(0, 16 - (currTime - lastTime));
            var id = window.setTimeout(function() { callback(currTime + timeToCall); }, 
              timeToCall);
            lastTime = currTime + timeToCall;
            return id;
        };

    if (!window.cancelAnimationFrame)
        window.cancelAnimationFrame = function(id) {
            clearTimeout(id);
        };
}())

// Sprite unimportant, just for example purpose
function Sprite(){ 
    this.x = 0;
    this.y = 50;
}

Sprite.prototype.draw = function(){
    ctx.fillStyle = "rgb(255,0,0)";
    ctx.fillRect(this.x, this.y, 10, 10);
}

// setup
var canvas = document.getElementsByTagName("canvas")[0],
    ctx = canvas.getContext("2d");

canvas.width = 200;
canvas.height = 200;

//init the sprite
var sprite = new Sprite();

// draw the sprite and update it using request animation frame.
function update(){
    ctx.clearRect(0,0,200,200);

    sprite.x+=0.5;
    if(sprite.x>200){
        sprite.x = 0;            
    }
    sprite.draw();

    // makes it update everytime
    requestAnimationFrame(update);
}

// initially calls the update function to get it started
update(); 
```

# grails - grails spring安全核心

> ID：12992702
> 
> 赞同：1
> 
> 时间：2012-10-20T21:08:57.970
> 
> 标签：grails, login

我已经构建了一个登录到我的 grails 应用程序的移动应用程序。我想在我的移动应用程序上注销会话。

我知道我用来登录的网址是：

```
 http://localhost:8080/<app name>/j_spring_security_check 
```

但是我将如何关闭该会话并注销？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T21:58:05.147

为`http://localhost:8080/<app name>/j_spring_security_logout`

# java - 在 ArrayList 中使用 while 循环

> ID：12992703
> 
> 赞同：2
> 
> 时间：2012-10-20T21:08:58.347
> 
> 标签：java

我是编程和这个网站的新手，所以就到这里吧。我想编写一个程序，允许将尽可能多的输入字符串添加到`ArrayList`. 所以我`while`在下面的代码中使用了一个循环。我的意图是如果输入是`0`.

```
import java.util.*;

public class AddToList2
{
static Scanner q = new Scanner(System.in);

public static void main(String[] args)
{
    ArrayList<String> inputlist = new ArrayList<String>();
    while (true)
    {
        System.out.print("Enter something here: ");
        String x = q.nextLine();
        inputlist.add(x);
        if (x.equals("0"));
            break;
    }
} 
```

该程序编译没有错误，但遗憾的是，当我多次运行该程序时，无论输入是什么，循环都会中断。有什么办法可以解决这个问题？

好吧，那是我的粗心！*无论如何，我创建了该*程序以找出问题所在：

```
ArrayList<String> endangeredlist = new ArrayList<String>();
    ArrayList<Integer> popn = new ArrayList<Integer>();
    while (true)
    {
        System.out.print("Name an animal: ");
        String animal = q.nextLine();
        endangeredlist.add(animal);
        if (animal.equals("EXTERMINATE"))
            break;          
        q.next();
        System.out.print("How many are left in the wild? ");
        int numberleft = q.nextInt();
        popn.add(new Integer(numberleft));
    } 
```

（这是一个更大程序的一部分。）我的意图是当动物名称输入为`EXTERMINATE`. 遗憾的是，如果第一次输入是 ，程序会抛出 NoSuchElement 异常`EXTERMINATE`，并且如果我首先输入了其他内容，则循环将开始，但是`EXTERMINATE`第二次输入不会中断循环。这是为什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-20T21:10:23.303

你的 后面有一个多余的分号`if`，这有效地使它

```
if (x.equals("0")) { }
break; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T21:11:40.403

你的`if`陈述被破坏了

```
if (x.equals("0")); 
```

这基本上是说`if (x.equals("0"))`什么都不做...

`if`这是您应该在语句周围使用括号的原因之一

```
if (x.equals("0")) {
    break;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-20T21:11:51.877

您的病情末尾有一个分号。

这会将 the`break`变成它自己的语句，而没有条件。

# java - GWT：当有新版本可用时，如何强制客户端重新下载整个应用程序？

> ID：12992707
> 
> 赞同：0
> 
> 时间：2012-10-20T21:09:28.637
> 
> 标签：java, google-app-engine, gwt

我正在编写我的第一个 GWT/GAE 应用程序，并想到了一个“边缘案例”，我在其中部署了一个新版本，它极大地改变了前端 (GWT/JS) 代码。

如果有人登录并正在积极使用我的应用程序，并且我执行此部署，我希望发生以下事情：

1.  使用模态对话框向用户标记应用程序的新版本可用，并且当他们单击对话框上的“确定”按钮时，屏幕将发生变化
2.  他们点击确定
3.  他们所在的当前页面上的所有工作都被保存（不知何故 - HTML5 持久性可能？）
4.  他们已注销（有必要吗？）
5.  浏览器下载客户端应用程序的新“版本”（新 HTML/JS/CSS）
6.  他们重新登录
7.  他们被带回到他们上次离开的页面/状态，（希望）没有工作丢失

其他 GWT/GAE 大师如何处理这个用例？我是在轨道上还是偏离基地？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T23:10:54.030

用户不喜欢因为更新而被打断：Firefox 团队在他们开始显示弹出窗口时就知道了这一点。除非您的更新修复了严重的安全漏洞，否则不要这样做。

当您在 GWT 中发布新版本时，用户将在下次访问您的网站时加载它。在一段时间不活动后关闭应用程序是个好主意。在很短的时间内，您的所有用户都将迁移到下一个版本，而您无需做任何事情来实现它。

请注意，App Engine 允许您指定应用程序的默认版本，但您的用户也可以访问其他版本。这对于发生剧烈变化的情况非常有用。最好的方法是邀请一些用户尝试新版本。这样，您可以确保新版本正常工作，然后再将其设为默认版本。

# php - 是否可以将 Heroku Foreman 与 PHP 一起使用？

> ID：12992710
> 
> 赞同：4
> 
> 时间：2012-10-20T21:09:56.183
> 
> 标签：php, heroku, foreman

我正在 Heroku 上开发一个 PHP 应用程序。我可以使用 Foreman 来测试我的应用程序吗？我到处都发现对 Ruby 的引用，但对 PHP 却没有。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-22T04:22:45.523

是的，使用 PHP 5.4 内置 Web 服务器：

```
sudo foreman start -f Procfile_dev 
```

在 Procfile_dev 中：

```
web: php -S 127.0.0.1:80 -t /path/to/doc/root 
```

这就是我在本地开发的方式。我还有一条线`worker: watchr watcher.rb`可以监听文件更改以组合/缩小 JS、编译 SCSS 等。

如果需要，您可能会添加`db: /usr/bin/mysqld`或类似的东西来启动 mysql。

另外：您需要安装[Heroku Config 插件](https://github.com/ddollar/heroku-config)，它将应用程序配置密钥写入 .env 文件，Foreman 将在启动时将其发送到 php 服务器（可通过 getenv 访问，就像在 Heroku 上一样。）

# javascript - 我可以在没有令牌的情况下获取公共图形 API 数据吗？

> ID：12992712
> 
> 赞同：1
> 
> 时间：2012-10-20T21:09:59.913
> 
> 标签：javascript, facebook-graph-api

我想显示我在单独网页上发布的公共 Facebook 事件列表，以便更容易保持更新 - 只需更新 Facebook，下一次调用图形 API 会显示我当前的事件。

我已经在页面上运行了 javascript SDK，但是图形 API 似乎总是想要一个访问令牌让我请求任何数据，甚至是公共数据。我显然不希望用户必须登录我的网页才能看到一些事件。有没有办法在没有访问令牌的情况下请求公共事件数据？或者我可以添加一个仅可供我的 Facebook 应用使用的硬编码访问令牌吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T21:35:40.863

我刚刚检查过，不，没有令牌你不能访问公共事件。但是，是的，您可以拥有一个访问令牌来检索它（例如，如果您已经有一个应用程序，您可以使用您的用户令牌）。

我的建议是您在添加/更新事件后只访问一次图形 API，并将结果存储在静态位置（json、db、静态文件等），以便您可以在需要时轻松显示它，而不是发出请求每次都到图形 api。

# php - PHP / MySQL查询表中的行索引（不是id）

> ID：12992714
> 
> 赞同：0
> 
> 时间：2012-10-20T21:10:20.877
> 
> 标签：php, mysql, mysqli

> **可能重复：**
> [MySql 行号？](https://stackoverflow.com/questions/3126972/mysql-row-number)

我正在使用 PHP 5 和 mysqli。我有一个章节表，其中包含“id”和“name”列。是否有一种简单有效的查询方法来检查指定行所在的索引？例如，假设我的“章节”表中的记录是：

* * *

编号 | 姓名

1 | 你好

4 | 世界

5 | 你好吗？

* * *

假设我想知道“你好吗？” 是。所需的结果将是索引 3（因为它是按 id 升序排序的表中的第三行）。

我想出的唯一解决方案是查询所有这些，然后在 PHP 中循环并找到 $row["id"] == 5 并找出循环中的迭代。有没有更有效的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T21:15:29.143

```
SELECT position FROM
(
   SELECT
   name, @rownum:=@rownum+1 position
   FROM chapters, (SELECT @rownum:=0) r
   ORDER BY id
)
AS position
WHERE name = 'How are you?' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T21:23:22.267

维克多的回答应该对你有用，但这里也有另一种方法。

```
 SELECT count(*) as 'pos' From chapters where id <= (Select id from chapters where name = 1567186831 limit 1) order by id 
```

# iphone - 使用自定义 Segue 以编程方式导航到另一个 ViewController

> ID：12992716
> 
> 赞同：2
> 
> 时间：2012-10-20T21:10:27.243
> 
> 标签：iphone, objective-c, ios, xcode

我在情节提要中有两个视图控制器。我确实以编程方式成功地从第一个导航到第二个：

```
UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
YourViewController *yourViewController = (YourViewController *)[storyboard instantiateViewControllerWithIdentifier:@"yourViewControllerID"];
[self.navigationController pushViewController:yourViewController animated:YES]; 
```

我想使用我的`custom`Segue 导航到其他页面，而不是`pushViewController`不使用界面生成器。

这是我可以轻松与界面生成器一起使用的自定义 Segue：

```
@interface LeftToRightSegue : UIStoryboardSegue 
```

如何以编程方式进行？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-25T22:04:05.247

这就是我的做法。我创建了我的 segue 子类，然后从我所在的 sourceViewController IE 中调用它，初始化我的destinationViewcontroller，然后将它们传递给我的自定义 segue 类。

```
YourViewController *yourViewController = [self.storyboard instantiateViewControllerWithIdentifier:@"YOURStoryboardViewControllerID"];
CustomSegueClass *segue = [[CustomSegueClass alloc] initWithIdentifier:@"ANYid" source:self destination:yourViewController];
[segue perform ]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-20T21:59:28.733

我相信您必须使用界面构建器来通知情节提要，两个元素之间应该存在特定类型的 segue 以及如何识别它。您可以使用代码在代码中触发它，`performSegueWithIdentifier:`但是根据文档，您实际上不能在代码中创建一个：

*“你的应用永远不会直接创建 segue 对象；它们总是在触发 segue 时由 iOS 代表你创建。”*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-20T22:22:13.110

正如 Phillip Mills 所写，您必须在 IB 中创建一个 segue。您可以通过 ctrl 从一个视图控制器拖动到另一个视图控制器并从出现的菜单中选择“自定义”来实现。然后选择新的 segue 并打开属性检查器。输入 segue 的标识符并将其类设置为您已实现的类的名称。完成这些步骤后，您可以使用`performSegueWithIdentifier:`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-20T22:33:35.747

我假设你在问你应该如何实现自定义 segue 的子类，这样你就不必使用导航控制器？

如果是，那么我将覆盖`perform`您`LeftToRightSegue`类中的方法，如下所示：

```
- (void)perform
{
  UIViewController *source = self.sourceViewController;
  UIViewController *destination = self.destinationViewController;

  UIWindow *window = source.view.window;

  CATransition *transition = [CATransition animation];
  [transition setDuration:1.0];
  [transition setTimingFunction:[CAMediaTimingFunction functionWithName:UIViewAnimationOptionCurveEaseInOut]];
  [transition setType:kCATransitionPush];
  [transition setSubtype:kCATransitionFromRight];
  [transition setFillMode:kCAFillModeForwards];
  [transition setRemovedOnCompletion:YES];

  [window.layer addAnimation:transition forKey:kCATransition];
  [window setRootViewController:self.destination];
} 
```

如果您想要不同于推送的东西，您可以更改动画的类型。也不要忘记导入 QuartzCore：

```
#import <QuartzCore/QuartzCore.h> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-11-25T09:36:22.810

快速方式，单击 Segue 并选择自定义。现在您可以创建 UIStoryboardSegue 的子类，如下所示

`class MySegue: UIStoryboardSegue { override func perform() { let source = sourceViewController as! UIViewController if let navigation = source.navigationController { navigation.pushViewController(destinationViewController as! UIViewController, animated: false) } } }`

然后选择 Segue 并正确设置类和模块。希望能帮助到你

# asp.net - 如何防止网页上的 CSS 缓存？

> ID：12992717
> 
> 赞同：27
> 
> 时间：2012-10-20T21:10:35.300
> 
> 标签：asp.net, .net, html, css, xhtml

我正在学习开发 xhtml、css 网页。我经常在 CSS 中进行更改，但由于浏览器缓存，它不会反映在页面上，如果我手动清除 cahceing，它会显示最新的代码效果。有什么我可以在代码中放入让浏览器不缓存东西的东西吗？请有任何建议

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-10-20T21:20:14.073

您可以将随机查询参数附加到样式表 url（例如通过 javascript 或服务器端代码）。它不会更改正在加载的 css 文件，但会阻止缓存，因为浏览器检测到不同的 url 并且不会加载缓存的样式表。

```
<link rel="stylesheet" type="text/css" href="http://mysite/style.css?id=1234"> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-20T21:21:26.693

您可以使用 GetVersion 方法创建类，该方法将返回您的应用程序版本（或例如构建号或构建日期）。

对于标记中的 asp.net 应用程序，您可以指定如下内容：

```
<script src="Scripts/some.js?version=<%= Common.GetVersion%>" type="text/javascript"></script>
<link rel="stylesheet" type="text/css" href="~/styles/Style.css?version=<%= Common.GetVersion%>" /> 
```

这将强制浏览器重新加载文件，因为静态文件的部分 URL 将在每次构建（或至少每个版本）时更改。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-12-03T02:15:04.487

没有捕获：将可变字符串放在 css 路径的末尾，如下所示：

```
<link rel="stylesheet" type="text/css" href="style.css?2016-12-3:10 13 30"/> 
```

版本更改时刷新：

```
<link rel="stylesheet" type="text/css" href="style.css?v=1.1.0"/> 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-20T21:28:09.610

如果您使用 Chrome 作为开发浏览器，则有 2 个选项：

1) 当您按住*重新加载页面*按钮一秒钟时，将出现一个菜单并提供重新加载硬页面的可能性。

2) 在 Inspector 设置中，您可以强制浏览器从不缓存文件。

![在此处输入图像描述](../Images/ab30b31875722a4f3d0c413018e55d2c.png)

我认为通过在浏览器上禁用缓存比在服务器配置中处理这个问题更容易、更快、更少麻烦。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-01-05T06:34:48.853

您可以在链接中使用随机版本 ID。例如使用这个：

```
<link   href=<%="'mystyle.css?version="+ DateTime.Now.ToString("yyyyMMddhhmmss") +"'"%>   rel="stylesheet" type="text/css"/> 
```

其中 myStyle.css 是样式表文件，而 DateTime.Now.ToString("yyyyMMddhhmmss") 函数用于生成随机的不同版本 ID。通过使用这个随机版本 ID，浏览器强制重新加载你的 CSS。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-10-18T10:29:06.763

由于 ASP.net 标签也包含在问题中，我想扩展 Maxim Kornilov 的答案 ( [https://stackoverflow.com/a/12992813/903783](https://stackoverflow.com/a/12992813/903783) ) 以及我如何使用他的想法制作 URL webapp-特定于 ASP.net MVC 的构建（他的示例使用 ASP/ASP.net WebForms 语法，而不是 MVC 和 Razor Pages 的较新 Razor 语法）：

1) 在 Global.asax.cs 中添加到 webapp 的主类（称为 MvcApplication）

```
#region Versioning

public static string Version => typeof(MvcApplication).Assembly.GetName().Version.ToString(); //note: syntax requires C# version >=6

public static DateTime LastUpdated => File.GetLastWriteTime(typeof(MvcApplication).Assembly.Location);

#endregion 
```

someProperty => someReadOnlyExpression 语法只是 someProperty { get { return ... ;} } 自 C# 6 以来可能的简写

2）在其 Content/_Layout.cshtml 文件中，我曾经在页脚上显示构建号和构建日期时间（基于 webapp 的主程序集）：

```
Version @ViewContext.Controller.GetType().Assembly.GetName().Version (@string.Format("{0:yyyy/MM/dd-HH:mm:ss}", @File.GetLastWriteTime(ViewContext.Controller.GetType().Assembly.Location))) 
```

我改成更简单的：

```
Version @somewebappname.MvcApplication.Version (@string.Format("{0:yyyy/MM/dd-HH:mm:ss}", somewebappname.MvcApplication.LastUpdated)) 
```

3）它通过_Layout.cshtml中的硬编码链接加载CSS（仍在重构它），我将其更改为：

```
<link href='@Url.Content("~/Content/Site.css?version=" + somewebappname.MvcApplication.Version)' rel="stylesheet" type="text/css" /> 
```

因此，如果在网页中单击鼠标右键并且他们确实查看了他们看到的源代码：

```
<link href='/Content/Site.css?version=2.1.5435.22633' rel="stylesheet" type="text/css" /> 
```

这就是 CSS url 是特定于版本的，这要归功于虚拟参数版本

如果使用随机数，它会在每次页面加载时获取 CSS，这通常是不希望的，特别是如果您已经将新的 webapp 构建而不是单独的页面更改推送到 Web 服务器（这样您就可以访问构建可以注入 URL 的数字）。

请注意，要实现内部版本号的自动递增，在 Properties/AssemblyInfo.cs 我有（请参阅[How to have an auto incrementing version number (Visual Studio)?](https://stackoverflow.com/questions/826777/how-to-have-an-auto-incrementing-version-number-visual-studio)）：

```
// Version information for an assembly consists of the following four values:
//
//      Major Version
//      Minor Version 
//      Build Number
//      Revision
//
// You can specify all the values or you can default the Revision and Build Numbers 
// by using the '*' as shown below:
[assembly: AssemblyVersion("1.0.*")]
//[assembly: AssemblyFileVersion("1.0.*")] //don't use boh AssemblyVersion and AssemblyFileVersion with auto-increment 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-09-01T10:53:17.540

而不是使用 html 编写 `<link>`标签，只需使用 php 代码。最后的内部`<link>`标签使用 php`mt_rand()`函数，该函数将产生一个随机数，因此您的样式表将永远不会被缓存。 `<?php echo "<link rel='stylesheet' type='text/css' href='style.css?'".mt_rand().">"; ?>`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-20T21:18:32.280

这可以通过 .htaccess 文件完成。将此代码放在您网站根目录下名为 .htaccess 的文件中：

```
<filesMatch "\.(html|htm|js|css)$">
FileETag None
<ifModule mod_headers.c>
Header unset ETag
Header set Cache-Control "max-age=0, no-cache, no-store, must-revalidate"
Header set Pragma "no-cache"
Header set Expires "Wed, 11 Jan 1984 05:00:00 GMT"
</ifModule>
</filesMatch> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-01-27T21:48:46.833

如果您在 Google Chrome 中，只需按 CTRL + F5 即可强制刷新。CSS 将更新为它在本地计算机或服务器上的状态。您也可以使用 .htaccess 文件，但这更像是对可能临时问题的永久解决方案。CSS 缓存有利于更快的页面加载，所以我不建议完全禁用它。

* * *

## 回答 #10

> 赞同：-4
> 
> 时间：2012-10-20T21:15:05.937

*   在chrome上按F12打开开发者工具
*   然后右键单击重新加载按钮-单击（清除缓存和硬重新加载）

# php - 如何使用 .htaccess 将两个 url 重定向到同一个文件？

> ID：12992719
> 
> 赞同：0
> 
> 时间：2012-10-20T21:10:39.403
> 
> 标签：php, .htaccess, mod-rewrite, multilingual

这是我的问题，我有一个双语网站，但我不知道如何管理网址。

我想

*   **mydomain.tld/contact-us**和**mydomain.tld/nous** -contacter显示**contact-us.php**
*   **mydomain.tld/pricing**和**mydomain.tld/prix**显示**price.php**
*   **mydomain.tld/pricing/item1**和**mydomain.tld/prix/item1**显示**pricing.php?what=item1**（对于这个我不知道如何处理，任何提示都值得赞赏）。

我可以轻松地完成案例一和案例二：

```
RewriteCond %{REQUEST_FILENAME} !-d 
RewriteRule ^([^/\.]+)/?$ $1.php [R] # R for debug, make sure it shows the right page 
```

但我不想 5 页有 10 个条目，这不是一种安全的方式。

如果（也许）我可以执行以下操作，那就太好了：（contact-us|nous-contacter）作为条件。仍然不确定这是否可行，是否可行，是否是最简单和最安全的方法。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T21:16:52.350

```
RewriteBase /
RewriteRule ^(contact-us|nous-contacter)$ contact-us.php [R]
RewriteRule ^(pricing|prix)$ pricing.php [R]
RewriteRule ^(pricing|prix)/(.*)$ pricing.php?what=$2 [R] 
```

# macos - 在 Mac OS X Lion 上为 Zend Framework (1.12) 项目配置 apache

> ID：12992721
> 
> 赞同：0
> 
> 时间：2012-10-20T21:11:02.237
> 
> 标签：macos, apache, zend-framework

我在 Mac OS X Lion 上安装了一个 ZF 1.12 项目。当我将浏览器指向…… `http://localhost/~myusername/zendproj/public/index/index` 时，它会按预期加载页面。它也适用于 Index 控制器中的其他操作。前任： `http://localhost/~myusername/zendproj/public/admin/index`

当我查看其他控制器时 `http://localhost/~myusername/zendproj/public/admin/index` ……我收到此错误

```
An error occurred
Page not found
Exception information:

Message: Invalid controller specified (~name)
Stack trace:

#0 /usr/local/zend/share/ZendFramework/library/Zend/Controller/Front.php(954): Zend_Controller_Dispatcher_Standard->dispatch(Object(Zend_Controller_Request_Http), Object(Zend_Controller_Response_Http))
#1 /usr/local/zend/share/ZendFramework/library/Zend/Application/Bootstrap/Bootstrap.php(97): Zend_Controller_Front->dispatch()
#2 /usr/local/zend/share/ZendFramework/library/Zend/Application.php(366): Zend_Application_Bootstrap_Bootstrap->run()
#3 /Users/myusername/Sites/zendproj/public/index.php(26): Zend_Application->run()
#4 {main}  

Request Parameters:

array (
    'controller' => '~myusername',
    'action' => 'zendproj',
    'public' => 'admin',
    'module' => 'default',
) 
```

为什么我的 vhost/.htaccess 配置适用于一个控制器而不适用于另一个？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T01:03:15.360

Apache mod_userdir 路径混淆了路由器。

由于我假设在您的生产环境中不会从用户文件夹 ( `~user`) 访问 ZF 应用程序，因此我建议设置一个虚拟主机条目，以便您可以使用主机名在本地访问您的应用程序。

编辑`/private/etc/hosts`并添加如下条目：

```
127.0.0.1    zendapp www.zendapp 
```

然后尝试访问`http://zendapp`以加载您的应用程序。

根据 Apache 的设置方式，您可能需要为`zendapp`指向应用程序`public`文件夹的虚拟主机创建一个虚拟主机，或者只需将一个虚拟主机添加`ServerAlias`到现有虚拟主机，以便 Apache 识别主机名。

# c# - 为什么我的 ASP.NET Web API ActionFilterAttribute OnActionExecuting 没有触发？

> ID：12992722
> 
> 赞同：75
> 
> 时间：2012-10-20T21:11:16.603
> 
> 标签：c#, asp.net-web-api, action-filter, actionfilterattribute

我正在尝试实现这里看到的内容：[http](http://www.piotrwalat.net/nhibernate-session-management-in-asp-net-web-api/) ://www.piotrwalat.net/nhibernate-session-management-in-asp-net-web-api/但我的`NhSessionManagementAttribute`.

我已经设置了断点`OnActionExecuting(HttpActionContext actionContext)`来查看该函数是否被调用过——它没有被调用过。

我仔细检查了我的`global.asax.cs`文件，发现我实际上正在注册`ActionFilter`：

```
GlobalConfiguration.Configuration.Filters.Add(new NhSessionManagementAttribute()); 
```

我还用属性修饰了我的控制器类本身，以及它的操作，但无济于事：

```
public class ClientsController : ApiController {
    static readonly ClientRepository repository = new ClientRepository();

    [NhSessionManagement]
    public IEnumerable<Client> GetAllClients() {
        return repository.GetAll();
    }

    [NhSessionManagement]
    public Client GetClient(int id) {
        Client client = repository.Get(id);
        if (client == null) {
            throw new HttpResponseException(
                new HttpResponseMessage(HttpStatusCode.NotFound)
            );
        }
        return client;
    }
} 
```

为什么这个动作过滤器不会触发其中的任何事件？

* * *

## 回答 #1

> 赞同：178
> 
> 时间：2012-10-21T06:12:07.080

如果您在一个同时包含 MVC 和 WebAPI 程序集的项目中工作，您能否检查一下 ActionFilterAttribute 的命名空间是什么命名空间。这相当令人困惑，因为两者下都有两个 ActionFilterAttributes：

*   WebAPI：System.Web.Http.Filters
*   MVC：系统.Web.Http.Mvc

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2013-03-26T03:35:55.020

上面的答案肯定对我有所帮助 - 为其他人节省一些时间......这就是明显的区别。

**标准 MVC 控制器使用：**

```
// System.Web.Mvc
public override void OnActionExecuting(ActionExecutingContext filterContext)
{
    base.OnActionExecuting(filterContext);
} 
```

**OData HTTP 控制器使用：**

```
// System.Web.Http.Filters;
public override void OnActionExecuted(HttpActionExecutedContext actionExecutedContext)
{
    base.OnActionExecuted(actionExecutedContext);
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-06-25T18:02:39.203

对于遇到此问题的其他任何人，从 UnitTest 调用 YourController.YourAction 时，ActionFilterAttribute 不会触发。

```
[TestMethod]
public void RevokeSiteAdmin_SessionOver()
{
    FakeDbContext db = new FakeDbContext();

    YourController controller = new YourController(db);
    var result = controller.YourAction();

    //Some Assertions
} 
```

在上面的 TestMethod 中，不会调用 YourController.YourAction 上的任何 ActionFilterAttributes。然而; 如果您从浏览器调用 YourController.YourAction，您的 ActionFilterAttribute 将被调用。

至少 WebApi 是这样，但我不知道它是否适用于 MVC。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-02-04T12:02:13.653

这是完整的实现：

```
public class AllowCrossSiteJsonAttribute : System.Web.Mvc.ActionFilterAttribute
{
    public override void OnActionExecuted(System.Web.Mvc.ActionExecutedContext filterContext)
    {
        if (filterContext.HttpContext != null && filterContext.HttpContext.Response != null && filterContext.HttpContext.Request != null && filterContext.HttpContext.Request.UrlReferrer != null)
        {
            var allowedCrossDomains = TypeSafeConfigurationManager.GetValueString("allowedCrossDomains", "none");
            var allowedHosts = allowedCrossDomains.Split(',');

            var requestHost =  filterContext.HttpContext.Request.UrlReferrer.GetLeftPart(UriPartial.Authority);
            if (allowedHosts.Contains(requestHost.ToLower()))
            {
                filterContext.HttpContext.Response.Headers.Add("Access-Control-Allow-Origin", requestHost);
            }
        }

        base.OnActionExecuted(filterContext);
    }
}
public class AllowCrossSiteJsonForWebApiAttribute : ActionFilterAttribute
{
    public override void OnActionExecuted(HttpActionExecutedContext actionExecutedContext)
    {
        if (actionExecutedContext.Response != null && actionExecutedContext.Request != null &&
            actionExecutedContext.Request.Headers.Referrer != null)
        {
            var allowedCrossDomains = TypeSafeConfigurationManager.GetValueString("allowedCrossDomains", "none");
            var allowedHosts = allowedCrossDomains.Split(',').ToList();

            var requestHost = actionExecutedContext.Request.Headers.Referrer.GetLeftPart(UriPartial.Authority);

            if (allowedHosts.Contains(requestHost.ToLower()))
            {
                actionExecutedContext.Response.Headers.Add("Access-Control-Allow-Origin", requestHost);
            }

            base.OnActionExecuted(actionExecutedContext);
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-07T22:33:38.840

对于 WebApi，您应该从 nuget 安装 Microsoft.AspNet.WebApi.Core。对于 MVC，您可以使用 System.Web.MVC。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-06-22T09:02:20.907

我的问题要简单得多：

检查您的控制器是否装饰有`<actionPreProcessActivitiesAttribute()> _`

# javascript - 新的 Date() 函数无法正常工作

> ID：12992727
> 
> 赞同：0
> 
> 时间：2012-10-20T21:11:56.823
> 
> 标签：javascript, google-apps-script

有谁知道为什么

```
new Date('2012','1','1') 
```

返回 2012 年 2 月 1 日而不是 1 月 1 日？

和

```
new Date('2012','0','1') 
```

将于 2012 年 1 月 1 日返回

这是奇怪的还是合乎逻辑的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-20T21:18:32.687

因为这正是 ECMAscript 规范（第 3 版）第 15.9.1.4 节所说的应该发生的事情。0=1 月，1=2 月，... 11=12 月。

[http://www.ecma-international.org/publications/standards/Ecma-262.htm](http://www.ecma-international.org/publications/standards/Ecma-262.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-15T01:58:50.323

请花一些时间阅读下面的 JavaScript Dates 文档： [https ://www.w3schools.com/js/js_dates.asp](https://www.w3schools.com/js/js_dates.asp)

它注意到：

> JavaScript 从 0 到 11 计算月份。一月是 0。十二月是 11。

所以你得到的结果是绝对正确的。

# mysql - 与 Amazon RDS 一起使用的 DIY 分片策略

> ID：12992728
> 
> 赞同：4
> 
> 时间：2012-10-20T21:12:09.753
> 
> 标签：mysql, scalability, sharding

我正在尝试建立自己的分片策略，如下所示。假设我有一个 BOXES 和 ITEMS 表，每个盒子可以有几个项目。我将与同一个 BOX 相关的项目放在一台机器中。

box_id 主键包含：`server_type`(ex. 100) + `shard_id`+`total_amount_of_boxes_per_user`

存储在每个用户的`total_amount_of_boxes_per_user`用户数据库中，每次用户插入一个新框时，我都会将其递增一。

服务器类型 100 将与存储 box+items 数据的服务器列表对齐。这个 server_type->shard 关系列表应该在一个中心位置，我考虑将它作为文档存储在 DynamoDB 中。

DynamoDB 上的配置文档：

```
boxitems_servers[
 {shard_id: 1,  is_locked: false, hostname: 127.0.0.1}
 {shard_id: 2, is_locked: false, hostname: 127.0.0.2}
 {shard_id: 3, is_locked: false, hostname: 127.0.0.3}
 {shard_id: 4, is_locked: false, hostname: 127.0.0.4}
] 
```

我为我的数据库和我的应用程序层建模，所以我不需要进行连接。最多，我将对数据库进行几次查询，但这些查询将被缓存在服务器和客户端。**我正在使用 MySQL 并在 ASP.NET 4.5 中开发我的应用程序**。

当用户点击页面时：

```
http://domain.com/1000014294967295 
```

我可以读取该数据，将其拆分并获得以下信息：

*   server_type = 100
*   shard_id = 001
*   total_amount_of_boxes_per_user = 4294967295（当然可以少得多，但它是一个整数值）

我从 DynamoDB 中获取 boxitems_servers 文档，并且仅获取 server_type 的文档。所以`server type 100 = boxitems_servers`。

我根据主机名（凭据在 web.config 中）建立与分片的连接，并根据主键查询数据`1000014294967295`。

`is_locked: true`我可以通过放入配置文档来决定锁定一个特定的分片。因此，当写入数据（不更新）时，它只会写入未锁定的分片。

我将在 shard_id % number_of_active_shard 上使用 MODULU 写入数据，以将数据均匀地分布在多个分片上。

现在，如果我想添加另一个 Amazon RDS 数据库以进行水平扩展，我只需通过我之前创建的 Amazon AMI 创建具有相同架构的数据库，并将服务器添加到分片列表中。

```
boxitems_servers[
 {shard_id: 1,  is_locked: false, hostname: 127.0.0.1}
 {shard_id: 2, is_locked: false, hostname: 127.0.0.2}
 {shard_id: 3, is_locked: false, hostname: 127.0.0.3}
 {shard_id: 4, is_locked: false, hostname: 127.0.0.4}
 {shard_id: 4, is_locked: false, hostname: 127.0.0.5} <- NEW ONE
] 
```

Amazon RDS 已经具有复制功能，因此我无需担心。返回/恢复也很容易。

我唯一担心的是：

*   从不同的分片读取分页数据，考虑到数据分布不均匀
*   检索排序数据

**我需要什么：**我想要你对那个策略的看法。我想制作某种即插即用架构，我可以使用 Amazon RDS 并通过添加更多机器和更新配置文件轻松扩展。这应该可以在没有任何停机时间的情况下即时运行。

我不想为所有那些昂贵的解决方案支付数千美元。我相信我可以构建一个很好的分片解决方案来满足我的应用程序需求，它有一些表和那些已经去规范化以防止连接的表。Amazon RDS 已经提供了我需要的复制。

我还可以创建逻辑分片，每个 shard_id 可以更改为指向另一台数据库机器（IP 地址），但是当我查询“叶子”时，如果在那里找不到数据，我需要向上移动并查询其他分片，直到我找到数据。

我认为这可以导致一个好的分片策略，它有其局限性，但可以很好地用于高流量网站（我认为）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T19:37:34.283

我不认为 MOD 策略是最好的策略，因为如果添加节点，则必须将每条记录移动到不同的数据库（我理解这是一个不好的选择）。

一个更好的选择（比如 Cassandra）是散列密钥并将整个密钥空间分成块。

例如，如果哈希以十六进制给出 0 到 FFFF 之间的答案（这应该是完整的 md5 或 sha1）

*   节点 1 中从 0 到 0FFF。
*   节点 2 中从 1000 到 4FFF
*   节点 3 中从 5000 到 8FFF
*   从 9000 到节点 4 中的 CFFF
*   从节点 5 中的 D000 到 FFFF

这样您就可以查找单个寄存器，仅在该节点上请求，如果您需要更多寄存器，则最终可能会请求所有节点。取决于您选择什么作为定位数据的关键（它不需要匹配 pk）

如果需要添加更多节点，只需拆分节点 3 中的内容，在上面的示例中，从 5000 到 6FFF 留在节点 3 中，从 7000 到 8FFF 到新节点 6。

# c# - NHibernate中使用代码映射的多对多关系

> ID：12992732
> 
> 赞同：1
> 
> 时间：2012-10-20T21:12:41.813
> 
> 标签：c#, nhibernate, azure

NHibernate 有一个名为 Mapping by code 的系统，它使开发人员可以在代码中映射他们的数据库（正如其名称所示）。我正在使用 NHibernate 3.3.1。

我已经为两个课程做了这个：“Gebruiker”和“Lijst”。他们都有一个彼此的列表，因此这是多对多关系的经典示例。

映射如下：

**格布鲁克**

```
 Set(l => l.Lijsten, map =>
            {
                map.Table("LijstGebruiker");
                map.Cascade(Cascade.All);
                map.Inverse(true);
                map.Key(k => k.Column("Gebruiker"));
            }, map => map.ManyToMany(p => p.Column("Lijst")));
```

**李斯特**

```
 Set(l => l.Gebruikers, map =>
             {
                 map.Table("LijstGebruiker");
                 map.Cascade(Cascade.All);
                 map.Key(k => k.Column("Lijst"));
             }, map => map.ManyToMany(p => p.Column("Gebruiker")));
```

据我所知，这应该会生成带有 Gebruiker 和 Key 列的“LijstGebruiker”表。

相反：NHibernate 生成一个包含三列的表 LijstGebruiker，除了预期的两列之外，还有一列：elt。Elt 还使用外键引用 Lijst。

根据我在互联网上找到的有关此的网站，这不应该发生，但确实如此。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T08:00:03.827

显然，这是列名等于类名时发生的某种奇怪行为。您的代码生成的映射是：

**格布鲁克**

```
<set name="Lijsten" table="LijstGebruiker" inverse="true" cascade="all">
   <key column="Gebruiker" />
   <many-to-many class="Lijst" />
</set> 
```

**李斯特**

```
<set name="Gebruikers" table="LijstGebruiker" cascade="all">
  <key column="Lijst" />
  <many-to-many class="Gebruiker" />
</set> 
```

`many-to-many`因此，元素中没有列。这可能是 NHibernate 中的一个错误。

如果您将列重命名为`Gebruiker_id`，`Lijst_id`然后一切正常。

另一种解决方案是使用多列定义方法指定列名：

**格布鲁克**

```
Set(l => l.Lijsten, map =>
{
    map.Table("LijstGebruiker");
    map.Cascade(Cascade.All);
    map.Inverse(true);
    map.Key(k => k.Column("Gebruiker"));
}, map => map.ManyToMany(p =>
{
    p.Columns(x => x.Name("Lijst"));
})); 
```

**李斯特**

```
Set(l => l.Gebruikers, map =>
{
    map.Table("LijstGebruiker");
    map.Cascade(Cascade.All);
    map.Key(k => k.Column("Lijst"));
}, map => map.ManyToMany(p =>
{
    p.Columns(x => x.Name("Gebruiker"));
})); 
```

代码生成的映射为：

```
<set name="Lijsten" table="LijstGebruiker" inverse="true" cascade="all">
  <key column="Gebruiker" />
  <many-to-many class="Lijst">
    <column name="Lijst" />
  </many-to-many>
</set>

<set name="Gebruikers" table="LijstGebruiker" cascade="all">
  <key column="Lijst" />
  <many-to-many class="Gebruiker">
    <column name="Gebruiker" />
  </many-to-many>
</set> 
```

# android - 如何从我的活动中明确启动股票启动器？

> ID：12992734
> 
> 赞同：1
> 
> 时间：2012-10-20T21:12:54.873
> 
> 标签：android, android-launcher

平台：ASUS Nexus 7，运行 JellyBean

* * *

我通过将其设置为默认的 HOME / LAUNCHER 意图创建了一个 kiosk 应用程序。我需要能够通过服务和维护的密码摆脱它，进入股票 android 启动器。

我已经搜索了所有内容，但找不到一个好的，简洁的答案。我想出的最好方法是创建一个意图选择器 ( `Intent.createChooser(Intent i, String title)`) 并在我的启动器和库存启动器之间进行选择。这没关系，但确实是一种解决方法。

我试过了：

```
PackageManager pm = this.getPackageManager();

try {
    Intent i = pm.getLaunchIntentForPackage("com.android.launcher");
    if (i != null)
        this.startActivity(i);
}
catch (ActivityNotFoundException e) { } 
```

每次我的意图都是空的。然而，股票启动器在我的平板电脑上显示了一个“com.android.launcher”包。显然我在这里完全错了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T23:55:43.130

步骤#1：记录他们需要在启动器之外手动运行您的应用程序，然后再将其设置为主屏幕。

步骤#2：在第一次运行时，使用`resolveActivity()`找出默认主屏幕是什么，并保留来自`ResovleInfo`某些持久数据存储（例如组件名称）的相关信息。

步骤#3：使用该数据根据需要从您的信息亭应用程序中的任何后门调出默认主屏幕。

# python - 如何从马尔可夫链输出创建段落？

> ID：12992737
> 
> 赞同：6
> 
> 时间：2012-10-20T21:13:00.307
> 
> 标签：python, markov-chains

我想修改下面的脚本，以便它从脚本生成的随机数量的句子中创建段落。换句话说，在添加换行符之前连接一个随机数（如 1-5）的句子。

该脚本按原样运行良好，但输出是由换行符分隔的短句。我想把一些句子整理成段落。

关于最佳实践的任何想法？谢谢。

```
"""
    from:  http://code.activestate.com/recipes/194364-the-markov-chain-algorithm/?in=lang-python
"""

import random;
import sys;

stopword = "\n" # Since we split on whitespace, this can never be a word
stopsentence = (".", "!", "?",) # Cause a "new sentence" if found at the end of a word
sentencesep  = "\n" #String used to seperate sentences

# GENERATE TABLE
w1 = stopword
w2 = stopword
table = {}

for line in sys.stdin:
    for word in line.split():
        if word[-1] in stopsentence:
            table.setdefault( (w1, w2), [] ).append(word[0:-1])
            w1, w2 = w2, word[0:-1]
            word = word[-1]
        table.setdefault( (w1, w2), [] ).append(word)
        w1, w2 = w2, word
# Mark the end of the file
table.setdefault( (w1, w2), [] ).append(stopword)

# GENERATE SENTENCE OUTPUT
maxsentences  = 20

w1 = stopword
w2 = stopword
sentencecount = 0
sentence = []

while sentencecount < maxsentences:
    newword = random.choice(table[(w1, w2)])
    if newword == stopword: sys.exit()
    if newword in stopsentence:
        print ("%s%s%s" % (" ".join(sentence), newword, sentencesep))
        sentence = []
        sentencecount += 1
    else:
        sentence.append(newword)
    w1, w2 = w2, newword 
```

* * *

**编辑 01：**

好的，我拼凑了一个简单的“段落包装器”，它可以很好地将句子收集到段落中，但它与句子生成器的输出混淆了——例如，我的第一个单词的重复性过多，等等问题。

但前提是合理的；我只需要弄清楚为什么句子循环的功能会受到添加段落循环的影响。请告知您是否可以看到问题：

```
###
#    usage: $ python markov_sentences.py < input.txt > output.txt
#    from:  http://code.activestate.com/recipes/194364-the-markov-chain-algorithm/?in=lang-python
###

import random;
import sys;

stopword = "\n" # Since we split on whitespace, this can never be a word
stopsentence = (".", "!", "?",) # Cause a "new sentence" if found at the end of a word
paragraphsep  = "\n\n" #String used to seperate sentences

# GENERATE TABLE
w1 = stopword
w2 = stopword
table = {}

for line in sys.stdin:
    for word in line.split():
        if word[-1] in stopsentence:
            table.setdefault( (w1, w2), [] ).append(word[0:-1])
            w1, w2 = w2, word[0:-1]
            word = word[-1]
        table.setdefault( (w1, w2), [] ).append(word)
        w1, w2 = w2, word
# Mark the end of the file
table.setdefault( (w1, w2), [] ).append(stopword)

# GENERATE PARAGRAPH OUTPUT
maxparagraphs = 10
paragraphs = 0 # reset the outer 'while' loop counter to zero

while paragraphs < maxparagraphs: # start outer loop, until maxparagraphs is reached
    w1 = stopword
    w2 = stopword
    stopsentence = (".", "!", "?",)
    sentence = []
    sentencecount = 0 # reset the inner 'while' loop counter to zero
    maxsentences = random.randrange(1,5) # random sentences per paragraph

    while sentencecount < maxsentences: # start inner loop, until maxsentences is reached
        newword = random.choice(table[(w1, w2)]) # random word from word table
        if newword == stopword: sys.exit()
        elif newword in stopsentence:
            print ("%s%s" % (" ".join(sentence), newword), end=" ")
            sentencecount += 1 # increment the sentence counter
        else:
            sentence.append(newword)
        w1, w2 = w2, newword
    print (paragraphsep) # newline space
    paragraphs = paragraphs + 1 # increment the paragraph counter

# EOF 
```

* * *

**编辑 02：**

`sentence = []`根据下面的答案添加到`elif`声明中。以机智;

```
 elif newword in stopsentence:
            print ("%s%s" % (" ".join(sentence), newword), end=" ")
            sentence = [] # I have to be here to make the new sentence start as an empty list!!!
            sentencecount += 1 # increment the sentence counter 
```

* * *

**编辑 03：**

这是该脚本的最后一次迭代。感谢 grieve 帮助解决这个问题。我希望其他人可以从中获得一些乐趣，我知道我会的。;)

仅供参考：有一个小工件 - 如果您使用此脚本，您可能需要清理一个额外的段落结尾空间。但是，除此之外，马尔可夫链文本生成的完美实现。

```
###
#    usage: python markov_sentences.py < input.txt > output.txt
#    from:  http://code.activestate.com/recipes/194364-the-markov-chain-algorithm/?in=lang-python
###

import random;
import sys;

stopword = "\n" # Since we split on whitespace, this can never be a word
stopsentence = (".", "!", "?",) # Cause a "new sentence" if found at the end of a word
sentencesep  = "\n" #String used to seperate sentences

# GENERATE TABLE
w1 = stopword
w2 = stopword
table = {}

for line in sys.stdin:
    for word in line.split():
        if word[-1] in stopsentence:
            table.setdefault( (w1, w2), [] ).append(word[0:-1])
            w1, w2 = w2, word[0:-1]
            word = word[-1]
        table.setdefault( (w1, w2), [] ).append(word)
        w1, w2 = w2, word
# Mark the end of the file
table.setdefault( (w1, w2), [] ).append(stopword)

# GENERATE SENTENCE OUTPUT
maxsentences  = 20

w1 = stopword
w2 = stopword
sentencecount = 0
sentence = []
paragraphsep = "\n"
count = random.randrange(1,5)

while sentencecount < maxsentences:
    newword = random.choice(table[(w1, w2)]) # random word from word table
    if newword == stopword: sys.exit()
    if newword in stopsentence:
        print ("%s%s" % (" ".join(sentence), newword), end=" ")
        sentence = []
        sentencecount += 1 # increment the sentence counter
        count -= 1
        if count == 0:
            count = random.randrange(1,5)
            print (paragraphsep) # newline space
    else:
        sentence.append(newword)
    w1, w2 = w2, newword

# EOF 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T20:36:30.343

你需要复制

```
sentence = [] 
```

回到

```
elif newword in stopsentence: 
```

条款。

所以

```
while paragraphs < maxparagraphs: # start outer loop, until maxparagraphs is reached
    w1 = stopword
    w2 = stopword
    stopsentence = (".", "!", "?",)
    sentence = []
    sentencecount = 0 # reset the inner 'while' loop counter to zero
    maxsentences = random.randrange(1,5) # random sentences per paragraph

    while sentencecount < maxsentences: # start inner loop, until maxsentences is reached
        newword = random.choice(table[(w1, w2)]) # random word from word table
        if newword == stopword: sys.exit()
        elif newword in stopsentence:
            print ("%s%s" % (" ".join(sentence), newword), end=" ")
            sentence = [] # I have to be here to make the new sentence start as an empty list!!!
            sentencecount += 1 # increment the sentence counter
        else:
            sentence.append(newword)
        w1, w2 = w2, newword
    print (paragraphsep) # newline space
    paragraphs = paragraphs + 1 # increment the paragraph counter 
```

**编辑**

这是一个不使用外循环的解决方案。

```
"""
    from:  http://code.activestate.com/recipes/194364-the-markov-chain-algorithm/?in=lang-python
"""

import random;
import sys;

stopword = "\n" # Since we split on whitespace, this can never be a word
stopsentence = (".", "!", "?",) # Cause a "new sentence" if found at the end of a word
sentencesep  = "\n" #String used to seperate sentences

# GENERATE TABLE
w1 = stopword
w2 = stopword
table = {}

for line in sys.stdin:
    for word in line.split():
        if word[-1] in stopsentence:
            table.setdefault( (w1, w2), [] ).append(word[0:-1])
            w1, w2 = w2, word[0:-1]
            word = word[-1]
        table.setdefault( (w1, w2), [] ).append(word)
        w1, w2 = w2, word
# Mark the end of the file
table.setdefault( (w1, w2), [] ).append(stopword)

# GENERATE SENTENCE OUTPUT
maxsentences  = 20

w1 = stopword
w2 = stopword
sentencecount = 0
sentence = []
paragraphsep == "\n\n"
count = random.randrange(1,5)

while sentencecount < maxsentences:
    newword = random.choice(table[(w1, w2)])
    if newword == stopword: sys.exit()
    if newword in stopsentence:
        print ("%s%s" % (" ".join(sentence), newword), end=" ")
        sentence = []
        sentencecount += 1
        count -= 1
        if count == 0:
            count = random.randrange(1,5)
            print (paragraphsep)
    else:
        sentence.append(newword)
    w1, w2 = w2, newword 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T03:02:44.297

你看懂这段代码了吗？我敢打赌，您可以找到打印句子的部分，并将其更改为一起打印多个句子，而无需返回。您可以在句子位周围添加另一个 while 循环以获取多个段落。

语法提示：

```
print 'hello'
print 'there'
hello
there

print 'hello',
print 'there'
hello there

print 'hello',
print 
print 'there' 
```

关键是打印语句末尾的逗号防止在行尾返回，而空白打印语句打印返回。

# java - 拆分一个类是为了更容易测试可接受的行为吗？

> ID：12992742
> 
> 赞同：2
> 
> 时间：2012-10-20T21:13:35.637
> 
> 标签：java, unit-testing, tdd, noise-generator

我知道这是一个主观问题，但我找不到答案。不过，我会提供详细信息：

我有一个类有很多配置方法，这样你就可以运行具有非常不同设置的特定算法。正确配置后，您只需调用一个方法“generate()”，它就会返回一个填充的二维数组。这是很难测试的方法。这很难，因为它返回一个[高度图](http://en.wikipedia.org/wiki/Heightmap "高度图")，其中包含随机性和大量数据。一般来说，我会拆分它，但这会破坏封装，因为实际上数据和算法的步骤会出于同样的原因发生变化，没有人会使用一个与另一个分开的。我知道我可以模拟随机性（我实际上正在这样做），但无论哪种方式，编写测试的数据都太多了（例如，仅 32 x 32 的映射将需要在单个测试中进行 1024 个断言） . 除此之外，生成一张大地图可能需要 3 或 4 秒，这在测试环境中显然不是很好。

此外，我首先尝试将数据与算法分开，并使算法成为纯函数式（没有数据，只有参数）。虽然这是可测试的（因为我拆分了算法），但这会导致大量参数被四处传递，并且代码看起来相当程序化。

所以我不确定如何在这里进行。拆分类使测试和理解更容易，但也破坏了封装非常糟糕。我将不胜感激有关该主题的任何想法，无论是实际的还是理论上的。

提前致谢。

**编辑：**这是我编写的代码，类似于程序。

JavaRandom、Attenuation 和 RandomNumberProcessor 是我应该放在一起的类。

这是算法使用的数据：

```
package noise;

import noise.attenuation.DefaultAttenuation;

public final class DiamondSquareSettings {

    public static final class Builder {

            private static final double NEVER_ASSIGNED = 1.1;
            private static final long DEFAULT_RNG_SEED = 33609606l;
            private static final JavaRandom DEFAULT_RANDOM = new JavaRandom(DEFAULT_RNG_SEED);
            private static final double DEFAULT_RANGE = 1;
            private static final Attenuation defaultAttenuation = new DefaultAttenuation(0.7);

            private Random builderRandom = DEFAULT_RANDOM;
            private final double[] builderSeeds = {NEVER_ASSIGNED , NEVER_ASSIGNED , NEVER_ASSIGNED , NEVER_ASSIGNED};
            private double builderRange = DEFAULT_RANGE;
            private Attenuation builderAttenuation = defaultAttenuation;

            public Builder attenuation(final Attenuation attenuation) {
                    validateAttenuation(attenuation);
                    builderAttenuation = attenuation;
                    return this;
            }

            public DiamondSquareSettings build(final int side) {
                    validateSize(side);
                    return new DiamondSquareSettings(side, builderRandom, builderSeeds, builderRange, builderAttenuation);
            }

            public Builder random(final long seed) {
                    return random(new JavaRandom(seed));
            }

            public Builder randomRange(final double range) {
                    validateRange(range);
                    builderRange = range;
                    return this;
            }

            public Builder seed(final int seedPosition, final double seedValue) {
                    validateSeeds(seedPosition, seedValue);
                    builderSeeds[seedPosition] = seedValue;
                    return this;
            }

            Builder random(final Random random) {
                    validateRandom(random);
                    builderRandom = random;
                    return this;
            }

            private void validateAttenuation(final Attenuation attenuation) {
                    if (attenuation == null)
                            throw new IllegalArgumentException("attenuation == null!");
            }

            private void validateRandom(final Random random) {
                    if (random == null)
                            throw new IllegalArgumentException("random == null!");
            }

            private void validateRange(final double range) {
                    if (range < 0)
                            throw new IllegalArgumentException("range < 0" + "\nrange: " + range);
            }

            private void validateSeeds(final int seedPosition, final double seedValue) {
                    if (seedValue > 1 || seedValue < 0)
                            throw new IllegalArgumentException("Invalid seed" + "\nseedPosition: " + seedPosition + " seed: "
                                            + seedValue);
            }

            private void validateSize(final int side) {
                    final double doubleExpoent = Math.log(side - 1) / Math.log(2);
                    final int integerExpoent = (int) doubleExpoent; //TODO simplify more
                    if (doubleExpoent != integerExpoent)
                            throw new IllegalArgumentException("side is not a (power of two) plus one" + "\nside: " + side);
            }
    }

    private final int side;
    private final Random random;
    private final double[] seeds;
    private final double range;
    private final Attenuation attenuation;

    private DiamondSquareSettings(final int side, final Random random, final double[] seeds, final double range,
                    final Attenuation attenuation) {
            this.side = side;
            this.random = random;
            this.seeds = randomizeNeverAssignedSeeds(random, seeds, range);
            this.range = range;
            this.attenuation = attenuation;
    }

    public String getAttenuationInfo() {
            return attenuation.toString();
    }

    public String getRandomInfo() {
            return random.toString();
    }

    public double getRandomRange() {
            return range;
    }

    public double getSeed(final int seedPosition) {
            return seeds[seedPosition];
    }

    public int getSide() {
            return side;
    }

    Attenuation getAttenuation() {
            return attenuation;
    }

    Random getRandom() {
            return random;
    }

    private double[] randomizeNeverAssignedSeeds(final Random random, final double[] seeds, final double range) {
            final double[] properlyRandomizingSeeds = seeds;
            for (int i = 0 ; i < seeds.length ; i++)
                    if (seeds[i] == Builder.NEVER_ASSIGNED)
                            properlyRandomizingSeeds[i] = random.nextRandomValueInside(range);

            return properlyRandomizingSeeds;
    } 
```

}

这是算法的主体：

```
 package noise;

    public final class DiamondSquare {

    public static Noise generate(final DiamondSquareSettings settings) {
            validateSettings(settings);
            final DiamondSquareStep stepper = new DiamondSquareStep();
            double[][] noiseArray = new double[settings.getSide()][settings.getSide()];
            setupSeeds(settings, noiseArray);
            final RandomNumberProcessor processor =
                            new RandomNumberProcessor(settings.getRandomRange(), settings.getRandom(), settings.getAttenuation());
            noiseArray = processDiamondSquare(settings, stepper, noiseArray, processor);
            return new Noise(noiseArray);
    }

    private static double[][] processDiamondSquare(final DiamondSquareSettings settings,
                    final DiamondSquareStep stepper, double[][] noiseArray, final RandomNumberProcessor processor) {
            int stepSize = settings.getSide() - 1;
            while (stepSize >= 1) {
                    noiseArray = stepper.diamondSquare(stepSize, noiseArray, processor);
                    processor.nextStage();
                    stepSize /= 2;
            }
            return noiseArray;
    }

    private static void setupSeeds(final DiamondSquareSettings settings, final double[][] noiseArray) {
            noiseArray[0][0] = settings.getSeed(0);
            noiseArray[settings.getSide() - 1][0] = settings.getSeed(1);
            noiseArray[0][settings.getSide() - 1] = settings.getSeed(2);
            noiseArray[settings.getSide() - 1][settings.getSide() - 1] = settings.getSeed(3);
    }

    private static void validateSettings(final DiamondSquareSettings settings) {
            if (settings == null)
                    throw new IllegalArgumentException("settings == null!");
    } 
```

}

这是算法的其他步骤：

```
package noise;

final class DiamondSquareResolver {

    private static final double OUT_OF_RANGE = 0; //TODO this code smells. It alters slightly the final result. Should be gone.
    private static final double DISAMBIGUATION = 0.00001;

    public double diamondStep(final int i, final int j, final int halfStep, final double[][] noise,
                    final RandomNumberProcessor processor) {
            final double left = initializeLeft(i - halfStep, j, noise);
            final double right = initializeRight(i + halfStep, j, noise);
            final double top = initializeTop(i, j - halfStep, noise);
            final double bot = initializeBot(i, j + halfStep, noise);
            final int divisor = processDivisor(left, right, top, bot);
            return (left + right + top + bot) / divisor + processor.generateNumber();
    }

    public double squareStep(final int i, final int j, final int halfStep, final double[][] noise,
                    final RandomNumberProcessor processor) {
            final double topLeft = noise[i - halfStep][j - halfStep];
            final double topRight = noise[i + halfStep][j - halfStep];
            final double bottomLeft = noise[i - halfStep][j + halfStep];
            final double bottomRight = noise[i + halfStep][j + halfStep];
            return (topLeft + topRight + bottomLeft + bottomRight) / 4 + processor.generateNumber();
    }

    private double initializeBot(final int i, final int bottomCoordinate, final double[][] noise) {
            final int height = noise[0].length;
            if (! (bottomCoordinate >= height))
                    return validatedPosition(noise[i][bottomCoordinate]);
            else
                    return OUT_OF_RANGE;
    }

    private double initializeLeft(final int leftCoordinate, final int j, final double[][] noise) {
            if (! (leftCoordinate < 0))
                    return validatedPosition(noise[leftCoordinate][j]);
            else
                    return OUT_OF_RANGE;
    }

    private double initializeRight(final int rightCoordinate, final int j, final double[][] noise) {
            final int width = noise.length;
            if (! (rightCoordinate >= width))
                    return validatedPosition(noise[rightCoordinate][j]);
            else
                    return OUT_OF_RANGE;
    }

    private double initializeTop(final int i, final int topCoordinate, final double[][] noise) {
            if (! (topCoordinate < 0))
                    return validatedPosition(noise[i][topCoordinate]);
            else
                    return OUT_OF_RANGE;
    }

    private int processDivisor(final double ... sides) { //TODO remove varagrs argument, as it is not proper.
            int divisor = 4;
            for (final double side : sides)
                    if (side == OUT_OF_RANGE)
                            divisor--;
            return divisor;
    }

    private double validatedPosition(final double value) {
            return value != OUT_OF_RANGE ? value : value + DISAMBIGUATION;
    } 
```

}

```
final class DiamondSquareStep {

    public double[][] diamondSquare(final int step, final double[][] noise, final RandomNumberProcessor processor) {
            final double[][] steppedNoise = copyNoise(noise);
            final DiamondSquareResolver solver = new DiamondSquareResolver();
            final int halfStep = step / 2;
            performSquareSteps(step, steppedNoise, processor, solver, halfStep);
            performDiamondSteps(step, steppedNoise, processor, solver, halfStep);
            return steppedNoise;
    }

    private double[][] copyNoise(final double[][] noise) {
            final double[][] steppedNoise = new double[noise.length][noise[0].length];
            for (int i = 0 ; i < noise.length ; i++)
                    for (int j = 0 ; j < noise[0].length ; j++)
                            steppedNoise[i][j] = noise[i][j];
            return steppedNoise;
    }

    private void performDiamondSteps(final int step, final double[][] noise, final RandomNumberProcessor processor,
                    final DiamondSquareResolver solver, final int halfStep) {
            for (int i = 0 ; i < noise.length ; i += step)
                    for (int j = 0 ; j < noise[0].length ; j += step) {
                            if (i + halfStep < noise.length)
                                    noise[i + halfStep][j] = solver.diamondStep(i + halfStep, j, halfStep, noise, processor);
                            if (j + halfStep < noise[0].length)
                                    noise[i][j + halfStep] = solver.diamondStep(i, j + halfStep, halfStep, noise, processor);

                    }
    }

    private void performSquareSteps(final int step, final double[][] noise, final RandomNumberProcessor processor,
                    final DiamondSquareResolver solver, final int halfStep) {
            for (int i = halfStep ; i < noise.length ; i += step)
                    for (int j = halfStep ; j < noise[0].length ; j += step)
                            noise[i][j] = solver.squareStep(i, j, halfStep, noise, processor);
    } 
```

}

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T21:38:20.700

划分一个类以满足[单一职责原则](http://en.wikipedia.org/wiki/Single_responsibility_principle)是绝对可以接受的。是否违反此原则的测试可以总结为：

> 用一句话描述班级的工作。如果解释是连续句或包含“和”，则您可能违反了 SRP。

满足这一原则的一大好处是，一般来说，您的单元中需要测试的东西会更少，从而使测试更容易。但还有其他原因。具有单一职责的类只会因为一个原因而改变，因此它更易于维护和稳定。

然而，你采取的方式也很重要。除非 IDE 在算法上为您进行拆分，否则您很可能在重构中引入错误。因此，在重构*之前先*测试类通常是个好主意，然后在完成重构之后（一切仍然通过）相应地划分测试。

# hadoop - Yarn 给现有的 map reduce 带来了哪些额外的好处？

> ID：12992743
> 
> 赞同：17
> 
> 时间：2012-10-20T21:13:41.727
> 
> 标签：hadoop, mapreduce, hadoop-yarn

Yarn 的基础设施层与原始 map reduce 架构的不同之处在于：

在 YARN 中，作业跟踪器分为两个不同的守护进程，称为`Resource Manager`和`Node Manager`（特定于节点）。资源管理器只管理对不同作业的资源分配，除了包含一个调度器，它只负责调度作业，而不用担心任何监控或状态更新。内存、cpu 时间、网络带宽等不同的资源被放入一个称为`Resource Container`. 在不同的节点上有不同`AppMasters`的运行，它们与许多这些资源容器通信，并相应地使用监控/状态详细信息更新节点管理器。

我想知道使用这种方法如何从 map-reduce 的角度提高性能？此外，如果有任何关于 Yarn 背后的动机及其相对于现有 Map-reduce 实现的好处的明确内容，请指出相同的内容。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-21T03:56:51.693

以下是一些关于[YARN](http://www.cloudera.com/blog/2011/11/building-and-deploying-mr2/)的文章[（](http://www.cloudera.com/blog/2012/02/mapreduce-2-0-in-hadoop-0-23/)[1、2、3](http://developer.yahoo.com/blogs/hadoop/posts/2011/02/mapreduce-nextgen/)）。这些谈论使用 YARN 的好处。

YARN 比 MR 更通用，应该可以运行除 MR 之外的[BSP等其他计算模型。](http://en.wikipedia.org/wiki/Bulk_synchronous_parallel)在 YARN 之前，它需要一个单独的集群用于 MR、BSP 和其他。现在它们可以在单个集群中共存，从而提高集群的使用率。[以下](http://wiki.apache.org/hadoop/PoweredByYarn)是移植到 YARN 的一些应用程序。

从传统 MR 中的 MapReduce 角度来看，Map 和 Reduce 任务有单独的插槽，但在 YARN 中，它们不是容器的固定用途。同一个容器可用于 Map 任务、Reduce 任务、Hama BSP 任务或其他任务。这导致更好的利用。

此外，它还可以在同一集群中运行不同版本的 Hadoop，这在传统 MR 中是不可能的，这使得从维护角度来看很容易。

[以下](http://www.thecloudavenue.com/p/mrv2resources.html)是 YARN 的一些附加链接。此外，[Hadoop: The Definitive Guide, 3rd Edition](http://shop.oreilly.com/product/0636920021773.do)有一整节专门介绍 YARN。

仅供参考，开发 YARN 而不是使用一些已经做类似事情并且已经成功运行了很长时间并解决了错误的框架有点[争议。](http://mail-archives.apache.org/mod_mbox/hadoop-common-dev/201112.mbox/%3C71806AE9-0C01-4ED9-AA49-D9341422D899@open-mpi.org%3E)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-21T11:32:54.850

我不认为 Yarn 会加速现有的 MR 框架。从架构来看，我们可以看到现在的系统更加模块化——但模块化通常与更高的性能相矛盾。
可以说 YARN 与 MapReduce 无关。MapReduce 刚刚成为 YARN 应用程序之一。您可以将其视为从一些嵌入式程序迁移到其中包含程序的嵌入式操作系统
同时，Yarn 为具有不同框架的**不同**MR 实现打开了大门。例如，如果我们假设我们的数据集比集群内存小，我们可以获得更好的性能。我认为[http://www.spark-project.org/](http://www.spark-project.org/)就是这样一个例子
总结一下：Yarn 并没有改进现有的 MR，但是会让其他 MR 实现在各个方面都更好。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-09-01T20:08:16.247

以上所有答案都涵盖了很多信息：我将所有信息简化如下：

```
MapReduce：纱线：

1\. 它是平台加应用程序它是 Hadoop 2.0 中的一个平台和
在 Hadoop 1.0 中，它只是 Hadoop 1.0 中不存在的
Hadoop 2.0 中的应用程序

2.它是单用途系统，即，它是多用途系统，我们可以运行
我们只能运行 MapReduce 作业。MapReduce、Spark、Tez、Flink、BSP、MPP、
                                    MPI、Giraph 等...（通用）

3\. JobTracker 可扩展性，即资源管理和
资源管理和应用程序管理都分离了 &
由 RM+NM 管理的作业管理，特定于范式的 AM
                                    分别。

4\. 资源管理不善灵活的资源管理即，
系统即槽（map/reduce）容器。

5\. 不高可用 高可用和高可靠性。

6\. 向外扩展至 5000 个节点 向外扩展 10000 多个节点。

7\. Job->tasks Application -> Jobs的DAG -> tasks

8\. 经典 MapReduce = MapReduce Yarn MapReduce = MapReduce API +      
   API + MapReduce 框架 MapReduce 框架 + YARN 系统
   + MapReduce System So MR 程序被重写
                                    Hadoop 1.0 在 Yarn 上运行也没有
                                    更改一行代码，即
                                    向后兼容性。

```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-02-18T11:09:44.747

让我们看看 Hadoop 1.0 的缺点，Hadoop 2.0 通过添加 Yarn 解决了这些缺点。

1.  **可扩展性问题**：即使您在 Hadoop 集群中有数千个节点，Job Tracker 也可以在单台机器上运行。Job tracker 的职责：资源管理、Job 和 Task 调度和监控。由于所有这些进程都在单个节点上运行，因此该模型不可扩展。
2.  **可用性问题（单点故障）**：Job Tracker 是单点故障。
3.  **资源利用**：由于预定义的 Map & Reduce 任务槽数量，资源没有得到正确利用。当所有 Mapper 节点都忙时，Reducer 节点处于空闲状态，不能用于处理 Mapper 任务。
4.  **与 Map Reduce 框架的紧密集成**：Hadoop 1.x 只能运行 Map reduce 作业。不存在对 Map Reduce 作业以外的作业的支持。

现在，Hadoop 2.x 中的[YARN](https://hadoop.apache.org/docs/current/hadoop-yarn/hadoop-yarn-site/YARN.html)架构消除了单个 Job Tracker 瓶颈

**YARN**的基本思想是将资源管理和作业调度/监控的功能拆分为单独的守护进程。这个想法是拥有一个全局**ResourceManager (RM)**和每个应用程序**ApplicationMaster (AM)**。应用程序可以是单个作业，也可以是作业的 DAG。

**ResourceManager**有两个主要组件：**Scheduler**和**ApplicationsManager**。

**调度程序**负责根据容量、队列等熟悉的限制为各种正在运行的应用程序分配资源。调度程序是纯粹的调度程序，因为它不**执行任何监视**或跟踪应用程序的状态。

**ApplicationsManager**负责接受作业提交，协商第一个容器以执行特定于应用程序`ApplicationMaster and provides the service for restarting the ApplicationMaster container on failure.`

每个**应用程序**的 ApplicationMaster 负责从调度程序协商适当的资源容器，跟踪它们的状态并监控进度。

现在**YARN的优势**

1.  **可扩展性**问题已解决
2.  **No single point of failure**. All components are highly available
3.  **Resource utilization** has been improved with proper utilization of Map and reduce slots.
4.  **Non Map Reduce Jobs** can be submitted

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-21T03:40:46.937

看起来这个链接可能是您正在寻找的：http: [//developer.yahoo.com/blogs/hadoop/posts/2011/02/mapreduce-nextgen/](http://developer.yahoo.com/blogs/hadoop/posts/2011/02/mapreduce-nextgen/)。

我的理解是 YARN 应该更通用。您可以创建自己的 YARN 应用程序，直接与资源管理器协商资源 ( [1](http://hadoop.apache.org/docs/r0.23.0/hadoop-yarn/hadoop-yarn-site/WritingYarnApplications.html#Writing_an_ApplicationMaster) )，而 MapReduce 只是已经存在的几个应用程序管理器之一 ( [2](http://wiki.apache.org/hadoop/PoweredByYarn) )。

# search - 从增加索引生成二叉搜索树

> ID：12992744
> 
> 赞同：1
> 
> 时间：2012-10-20T21:13:45.700
> 
> 标签：search, linked-list, binary-search-tree, b-tree, b-tree-index

我有一个父指针向量 [ 0 1 1 2 2 3 3 5 5 ....]，它基本上是一棵二叉树。索引是子节点，对应的值代表其父节点在同一向量中的索引。

例如：在上面的向量中，如果数到索引 5，则元素为 2，这意味着它的父元素位于索引 2。再次在索引 2 处，元素为 1，这意味着父元素位于索引 1。在索引 1是元素是 0 是根节点。

如何从中创建二叉搜索树？

或者，

我正在以二叉树格式生成数据，其中我知道父级和相应的子级，如何将它们存储在二叉搜索树中？

子项的索引将始终大于父项，如上面的向量所示。一个例子是：我取节点 1，把它分成两个节点，2 和 3。然后取节点 2，把它分成 4 和 5。然后我取节点 4，把它分成 6 和 7，以此类推。我想在二叉搜索树中保留父子关系。

此致

瓦贾哈特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T22:17:21.137

根据向量中的规范生成具有空元素的二叉树。新元素到达后​​，找个地方放：根据二叉搜索树规则遍历树——左子树的所有子树都小于一个元素，右子树的所有子树都大于一个元素。填充二叉树中元素对应的节点。例如，如果您在某个时间点拥有这棵树： ![](../Images/33a98294dab293e2c2e41b7ce607fde9.png)

新的值 3 到达，它会用值 2 填充节点的右孩子。但是，如果 5 到达，则在预定义的树结构中没有地方放置它。

# javascript - 使用 node.js 的服务器 WebSockets 和服务器 http

> ID：12992748
> 
> 赞同：1
> 
> 时间：2012-10-20T21:14:15.027
> 
> 标签：javascript, http, node.js, websocket

我正在开发一个应用程序，该应用程序需要在浏览器中与在线客户进行 WebSockets 通信。为此，我从 Node.js 开始创建服务器，到目前为止一切顺利，我的问题是有另一个应用程序必须通过 http POST 与我的服务器通信，然后将此信息传递给我的服务器，我的服务器传递给客户端 web。我是使用这项技术的新手，所以如果我说废话，我深表歉意。

1 - 我可以向我的服务器WebSocket发送POST请求，通过WebSocket连接客户的应用程序，Server，也可以接收POST请求并通过ws将此信息发送给每个客户端？

2 - 有一种方法可以打开带有标签的客户端套接字，该标签允许我，服务器仅向该客户端发送信息，而不是根本不发送信息，具体取决于参数。我想知道每个套接字都属于一个特定的客户，并且只向该客户发送信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-04-05T07:13:49.800

1.) 如果我理解正确，那么您想通过 websockets 向其他客户端广播信息。只需查看 node.js 模块 socket.io 或 ws。

2.) 你想为不同的 url 打开不同的套接字？就像 /foo/a/bar 和 /foo/b/bar 的单独 websocket 连接一样？[在这里](https://stackoverflow.com/questions/43140950/node-js-and-websocket-with-wildcard-in-url-path?noredirect=1#comment73359013_43140950)看看我的回答

# jquery - jquery修剪空白问题

> ID：12992752
> 
> 赞同：0
> 
> 时间：2012-10-20T21:14:54.790
> 
> 标签：jquery, trim, removing-whitespace

我正在创建自己的 jquery 插件来格式化电话号码。以下是一些带有一些演示数据的跨度。

```
<span class="formatMe">&nbsp;</span><br />
<span class="formatMe">(123)456-7890</span><br />
<span class="formatMe">&nbsp;</span><br />
<span class="formatMe"></span><br />
<span class="formatMe">(123)456-7890</span><br /> 
```

我的问题发生在包含`&nbsp;`

我想我只是简单地 .trim() 每个元素内的值，这会照顾空白，但我没有得到任何想要的结果。

```
<script>
(function( $ ){
$.fn.voip1Wire = function() {
return this.each(function() {
  var theValue = $(this).html().trim().replace(/ /g,'');
  if (theValue === null || theValue === undefined || theValue == ""){ 
       $(this).html("------"); 
       return true; // break out of the loop
  }

      $(this).html('formatted number to return');

}); // eof .each

  };
})( jQuery );

</script> 
```

这可能是矫枉过正，你可以看到我正在使用 .trim() 和 .replace()

```
var theValue = $(this).html().trim().replace(/ /g,''); 
```

我可能没有正确使用 javascript/jquery，但这是我所拥有的：

```
formatted number to return
formatted number to return
formatted number to return
-----------
formatted number to return 
```

我希望第一个和第三个返回破折号。所以我对空白修剪感到困惑。有人看到我做错了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T21:21:49.787

这里的问题是当它们出现在 HTML 中时`.html()`将返回字符`&nbsp;`，这本身不是空白。

DOM 解析器将该字符序列解释为空格，但常规字符串（即`.html()`返回的内容）内的那些字符不被视为空格。

假设跨度仅包含文本，您可以替换`.html()`为`.text()`检索`textNode`将正确修剪的 (s)：

```
var theValue = $(this).text().trim(); 
```

[**小提琴**](http://jsfiddle.net/ult_combo/KhNe4/)

* * *

同样正如@undefined 所指出的，本机[`String.trim()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/Trim)未在 IE8 及以下版本中实现，因此[`jQuery.trim()`](http://api.jquery.com/jQuery.trim/)如果您想支持这些版本，则首选：

```
var theValue = $.trim( $(this).text() ); 
```

[**小提琴**](http://jsfiddle.net/ult_combo/KhNe4/2/)

* * *

现在，如果您想坚持使用正则表达式解决方案：

```
var theValue = $(this).html().replace(/^(\s|&nbsp;)+|(\s|&nbsp;)+$/g, ''); 
```

[**小提琴**](http://jsfiddle.net/KhNe4/3/)

* * *

小提示：`if (theValue === "")`在正则表达式替换后应该足够了，因为 span 元素总是返回一个字符串`.html()`（`.replace()`适用于该字符串），无需检查`null`/ `undefined`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T21:21:22.053

尝试使用`.replace(/\s/g,'');`删除所有空格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T21:23:04.727

`.text().trim()`- 我想你那里没有 html

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-20T21:29:50.003

当已有可与 jquery 一起使用的可用源/插件时，您是否有任何特殊原因尝试自己执行此操作？

取自这里：[http](http://docs.jquery.com/Plugins/Validation/CustomMethods/phoneUS) ://docs.jquery.com/Plugins/Validation/CustomMethods/phoneUS 为美国电话号码提供了一个工作示例：

```
jQuery.validator.addMethod("phoneUS", function(phone_number, element) {
    phone_number = phone_number.replace(/\s+/g, ""); 
    return this.optional(element) || phone_number.length > 9 &&
        phone_number.match(/^(1-?)?(\([2-9]\d{2}\)|[2-9]\d{2})-?[2-9]\d{2}-?\d{4}$/);
}, "Please specify a valid phone number");

$("#myform").validate({
  rules: {
    field: {
      required: true,
      phoneUS: true
    }
  }
}); 
```

# ios - 声音播放完毕后 AVAudioPlayer 实例会发生什么？

> ID：12992755
> 
> 赞同：-1
> 
> 时间：2012-10-20T21:15:09.433
> 
> 标签：ios, objective-c, audio, avaudioplayer

它会被 ARC 自动释放还是会在我以某种方式将其移除后保留在那里？如果它仍然留在那里，我可以从实例中收集到任何有用的数据吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T21:39:43.583

它与任何其他对象实例具有相同的生命周期，因此如果保留则它是活动的，否则自动释放。我猜 a `duration`or `playing`or`currentTime`是非常有用的属性。

# java - 简单的 Java 冲突检测

> ID：12992756
> 
> 赞同：1
> 
> 时间：2012-10-20T21:15:09.823
> 
> 标签：java, collision-detection

我正在设计一个简单的游戏，你要避免被我创建的 AI 击中。

我一直在查找碰撞检测，我有一个问题。

我查找的所有信息似乎都涉及使用相当多的代码。

我想知道为什么不能简单：

```
if(AI.xDirection == x || AI.yDirection == x || AI.xDirection == y || AI.yDirection == y){
        System.out.println("Collision"); 
```

用于此？

如您所见，我已将其设置为打印到控制台，并且似乎对我有用。

这有缺点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T21:17:59.497

不确定您的代码实际上在做什么，但如果它有效并且您可以理解，那么我不明白您为什么应该更改它！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T21:21:10.440

您的代码假定所有客户关心的是是否存在冲突。可能有游戏和其他情况，客户端希望在某些情况下以某些方式处理碰撞（例如，我前段时间编写了一个程序，在随机障碍物之间来回弹跳球，并取决于哪一边首先击中，它必须朝那个方向反弹）。

该列表继续说明客户希望在碰撞后发生什么，但如果您想要的只是显示碰撞，那么嘿，去吧，伙计。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T21:22:25.983

你用这种方式违反了封装。

Prefer 定义了一个自定义对象，例如：（`AIPosition` 可能是不可变的）专用于封装 AI 坐标。

并`AIPosition`包含方法：`boolean doesCollideWith(AIPosition anotherPosition)`

`AI`将包含一个委托方法：

```
public boolean doesCollideWith(AI anotherAi){
    aiPosition.doesCollideWith(anotherAi.getAIPosition());
} 
```

你的电话是：`if(ai1.doesCollideWith(ai2))`

因此，如果以后的坐标涉及第三个元素（如`z`），则您的客户端代码不需要更改。

# php - phpbb3 curl登录

> ID：12992757
> 
> 赞同：0
> 
> 时间：2012-10-20T21:15:13.260
> 
> 标签：php, curl, phpbb3

我正在尝试使用 curl 为 phpbb 3.0.10 制作一个自动登录机器人。论坛返回“您已成功登录”。但在那之后，当我尝试转到站点中的另一个页面并使用 file_get_contents 获取源时，或者即使我等待页面将我重定向到 index.php，它也会再次要求我登录。关键是我在 localhost 上进行这些测试，而论坛在另一台服务器上，这就是我使用 curl 的原因。这是我的代码：

```
<?php
$urltopost = "http://www.site.com/phpbb3eng/ucp.php?mode=login";
$fget = file_get_contents($urltopost);
$sid_a = explode('index.php?sid=',$fget);
$sid_b = explode('"',$sid_a[1]);
$sid = $sid_b[0];
$datatopost = array (
'username' => "bot",
'password' => "123456789asd",
'autologin' => "1",
'viewonline' => "1",
'redirect' => "./ucp.php?mode=login",
'sid' => "$sid",
'redirect' => "index.php?sid=$sid",
'login' => "login"
);

$ch = curl_init ($urltopost."&sid=$sid");
curl_setopt ($ch, curlopt_post, true);
curl_setopt ($ch, curlopt_postfields, $datatopost);
curl_setopt ($ch, curlopt_returntransfer, true);
curl_setopt($ch, curlopt_useragent, 'mozilla/5.0 (windows; u; windows nt 6.1; en-us; rv:1.9.1.2) gecko/20090729 firefox/3.5.2 gtb5');
$returndata = curl_exec ($ch);
$code = $returndata;
echo htmlspecialchars($code); //returns source with successful login
$code2 = file_get_contents("http://www.site.com/phpbb3eng/index.php"); 
echo "<br /><br /><br />".htmlspecialchars($code2); // return login form
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T21:40:45.907

您必须设置 cookie。检查文档： http: [//php.net/manual/en/function.curl-setopt.php](http://php.net/manual/en/function.curl-setopt.php)

```
curl_setopt($ch, CURLOPT_COOKIEJAR, "cookie.txt");
curl_setopt($ch, CURLOPT_COOKIEFILE, "cookie.txt"); 
```

当然，您必须确保 cookie.txt 文件存在并且您具有写入权限。

# php - 基于另一个递增变量的递增

> ID：12992760
> 
> 赞同：0
> 
> 时间：2012-10-20T21:15:31.537
> 
> 标签：php, loops, while-loop, auto-increment

我有这种奇怪的情况，我想不出解决办法。

我有一个变量`$cat_count = 1;`，我在一个循环中使用它，然后`$cat_count++`在我使用它的地方下面的某个地方做。

然后我有另一个按以下方式工作的字母计数器：

我有`$alpha_string = 'abcdefghijklmnopqrstuvwxyz';`和`$alpha_counter = 0;`。我通过以下方式使用它 - `$alpha = $alpha_string{$alpha_counter}`。我希望我的字母计数器从**a**开始计数，只要`$cat_count`加一。

所以例如我们会有这样的：

```
$cat_count = 1
$alpha = a
$alpha = b

$cat_count = 2
$alpha = a
$alpha = b 
```

我暂时得到的是：

```
$cat_count = 1
$alpha = a
$alpha = b

$cat_count = 2
$alpha = c
$alpha = d 
```

想法？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T21:27:23.833

按照我在评论中的回答..

```
$counter        = 0;
$cat_count      = 1;
$alpha_count    = 'abcdefghijklmnopqrstuvwxyz';
$rule_id        = null;
$public_cats    = array();

while ($row = $db->sql_fetchrow($result))
{
    if ($rule_id != $row['rule_id']) 
    {       
        $group_ids  = array_map('intval', explode(' ', $row['groups']));
        $is_grouped = false;

        // Check if user can see a specific category if he is not an admin or moderator
        if (!$auth->acl_get('a_') && !$auth->acl_get('m_'))
        {
            $is_grouped = (group_memberships($group_ids, $user->data['user_id'], true)) ? true : false;
        }
        else
        {
            $is_grouped = true; 
        }

        // Fill $public_cats with boolean values
        if ($is_grouped !== false)
        {
            $public_cats[] = $is_grouped;
        }

        $rule_id = $row['rule_id'];

        $template->assign_block_vars('rules', array(
            'RULE_CATEGORY' => $row['rule_title'],
            'ROW_COUNT'     => $cat_count,
            'CAN_SEE_CAT'   => $is_grouped
        ));

        $cat_count++;
        $counter = 0;
    }

    $uid = $bitfield = $options = '';
    generate_text_for_storage($row['rule_desc'], $uid, $bitfield, $options, $row['bbcode'], $row['links'], $row['smilies']);

    $template->assign_block_vars('rules.rule', array(
        'RULE_DESC'     => generate_text_for_display($row['rule_desc'], $uid, $bitfield, $options),
        'ALPHA_COUNT'   => $alpha_count{$counter}
    ));

    $counter++;
} 
```

# android - 如何本地化 Android DatePicker？

> ID：12992765
> 
> 赞同：2
> 
> 时间：2012-10-20T21:16:00.437
> 
> 标签：android, android-widget

我把它`DatePicker`放在我的`Activity`. 每次我启动我的应用程序时，我都会在`DatePicker widget: Oct 15 2012`. 但是当我开始我的活动时，我想有一个本地版本的日期（俄语）。我试图在`UI`初始化之前定义语言环境。但这无济于事。有没有可能在不扩展`DatePicker`课程的情况下做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T17:32:58.623

实际上没有必要重写这个类。但是当我开始这样做时，我发现了有关特殊方法“reorderpickers”的信息，该方法专门用于本地化 datepicker（自动）。我的错误是在之前的活动中将语言环境设置为英语（为密码定义英语语言环境）。这就是为什么标准方法不起作用的原因。所以任何有同样问题的人都会检查你的代码是否改变了语言环境。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T21:38:32.803

您应该创建自定义日期选择器对话框。为了做到这一点，该链接可以帮助您；

[http://coffeebreak.hiq.se/2011/09/09/fixing-androids-datepickerdialog/](http://coffeebreak.hiq.se/2011/09/09/fixing-androids-datepickerdialog/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-25T13:30:07.307

您可以在[此处找到有关 DataPicker 和应用程序区域设置的其他信息](https://stackoverflow.com/questions/21257014/set-language-to-french-in-android-datepickerdialog)

# php - 在php中调用用户定义的函数进行mysql查询

> ID：12992769
> 
> 赞同：1
> 
> 时间：2012-10-20T21:16:29.523
> 
> 标签：php, mysql, function, defined

您好我正在尝试调用我在 mysql_query 中的 php 中定义的几个函数。sql 查询成功执行，但是所有应该包含函数值的列在数据库中都为空。sql 查询如下所示：

```
$sqldescription = description($e->href);
$sqlimage = image($e->href,$e->innertext);
$sqlstatus = status($e->href);
$sqlgenre = genre($e->href);
$sqlauthor = author($e->href);
$sqlrelease = release($e->href);
$sql = "INSERT INTO manga (`manga_title`, `manga_description`, `manga_thumnail`, `manga_latest_chap`, `manga_status`, `manga_genre`, `manga_author`, `manga_released_date`, `manga_added_date`, `manga_link`) VALUES 
('" . $e->innertext . "', '" . $sqldescription . "', '$sqlimage', '0', '$sqlstatus', '$sqlgenre', '$sqlauthor', '$sqlrelease', '" . date("Y-m-d") . "', '" . $e->href . "')";
mysql_query($sql,$con); 
```

大多数功能都非常相似，下面是其中一个的样子：

```
 function description($url){
      $descriptionhtml = new simple_html_dom();
      $descriptionhtml->load_file($url);
      foreach ($descriptionhtml->find('p.summary') as $d)
      echo $d;
    } 
```

我将不胜感激任何帮助 ：）

# php - 后台脚本完成后刷新页面

> ID：12992770
> 
> 赞同：0
> 
> 时间：2012-10-20T21:16:36.873
> 
> 标签：php, http-headers, ob-start

我正在使用 ob_ 做一些后台处理

```
$buffer = ob_get_contents();
header("Connection: close");
ignore_user_abort(true);
ob_start();
echo $buffer;
$size=ob_get_length();
header("Content-Length: $size");
ob_end_flush();
flush();
ob_end_clean();
file_get_contents($uri.'?loadchanges=1'); 
```

该脚本工作正常，但我需要刷新页面后

```
 file_get_contents($uri.'?loadchanges=1'); 
```

我试过了

```
header( "refresh:0;" ); 
```

之后或之前

```
echo $buffer; 
```

但它刷新了两次，我确定我不需要它，后台进程完成后我需要它。

感谢任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T22:58:51.277

我不确定你想做什么，但使用`Refresh:0`会导致持续循环，你需要寻找一种方法来确保它不会多次刷新，也调用`flush`或`ob_flush`调用标头之前不是一个好主意；

尝试

```
error_reporting(E_ALL);           //<-- Add to catch posible errors
ini_set("display_errors", "on");  //<------------^

if (!isset($_GET['refreshed'])) {
    header("Refresh: 0; URL=\"samplepage.php?refreshed=ok\"");
} 
```

# php - 随机字符串微调器问题

> ID：12992772
> 
> 赞同：1
> 
> 时间：2012-10-20T21:16:47.683
> 
> 标签：php, string

我想制作一个旋转函数来旋转一个字符串，但我遇到了问题。我已经知道如何像更改 {hi|hello} 一样在字符串中添加单词，但我想要的是不同的，它是字符串中的随机旋转

```
$spin_words=array('Word1','Word2','Word3');
$text = "Lorem Ipsum is simply dummy text of the printing and typesetting industry."; 
```

所以我想随机添加单词

> Lorem Ipsum 只是印刷和排版行业的**[Word1]**虚拟文本。

或者

> Lorem Ipsum 只是印刷**[Word2]**和排版行业的虚拟文本。

或者

> Lorem Ipsum 只是印刷和排版行业的虚拟文本**[Word3]**。

所以任何帮助家伙

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T21:23:48.010

你可以试试

```
$words = array('Word1','Word2','Word3');
$text = "Lorem Ipsum is simply dummy text of the printing and typesetting industry.";
echo wordInString($text,$words);
echo wordInString($text,$words); 
```

输出示例

```
Lorem Ipsum is simply dummy Word1 text of the printing and typesetting industry.
Lorem Ipsum is simply dummy text of the printing Word2 and typesetting industry. 
```

使用的功能

```
function wordInString($text,array $words) {
    $textNew = array();
    $p = mt_rand(0, substr_count($text, " "));
    $tok = strtok($text, " \n\t");
    $x = 1;
    while ( $tok !== false ) {
        $textNew[] = $tok and $x == $p and $textNew[] = $words[array_rand($words, 1)];
        $tok = strtok(" ");
        $x ++;
    }
    return implode(" ", $textNew);
} 
```

# c++ - c++循环数据结构

> ID：12992774
> 
> 赞同：0
> 
> 时间：2012-10-20T21:16:57.173
> 
> 标签：c++, data-structures, iterator, linked-list, stdclass

> **可能重复：**
> [C++ 是否存在循环列表的标准实现？](https://stackoverflow.com/questions/947489/does-a-standard-implementation-of-a-circular-list-exist-for-c)

是否在某个 c++ 库中准备好一个模板类，它是某种循环：一个喜欢的列表，其中最后一个节点引用第一个节点。

诚然，这并不总是一个实用的类，因为不存在 end() 迭代器或定义明确的 begin() 迭代器。但我真的可以使用一个，我希望我不必自己编写代码。

编辑：

谢谢你们（Vivek Goel 和 madmik3）和你们的回答，但不幸的是他们与我的问题无关（我建议你们俩[http://en.wikipedia.org/wiki/Linked_list ）。](http://en.wikipedia.org/wiki/Linked_list)我也在[这里](https://stackoverflow.com/questions/947489/does-a-standard-implementation-of-a-circular-list-exist-for-c)找到了同样的问题，昨天没找到。对于发布相同的问题，我深表歉意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T21:20:09.800

[来自 boost http://www.boost.org/doc/libs/1_51_0/libs/circular_buffer/doc/circular_buffer.html](http://www.boost.org/doc/libs/1_51_0/libs/circular_buffer/doc/circular_buffer.html)的循环缓冲区怎么样

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T21:21:59.330

Boost 有一个循环缓冲区。

[http://www.boost.org/doc/libs/1_51_0/libs/circular_buffer/doc/circular_buffer.html](http://www.boost.org/doc/libs/1_51_0/libs/circular_buffer/doc/circular_buffer.html)

您还可以在此处查看示例代码：

[http://en.wikipedia.org/wiki/Ring_buffer](http://en.wikipedia.org/wiki/Ring_buffer)

# .net - Visual Studio 调试构建应用程序打开已删除的文件

> ID：12992775
> 
> 赞同：2
> 
> 时间：2012-10-20T21:17:04.330
> 
> 标签：.net, debugging, visual-studio-2012, virtualstore

我的 .NET 应用程序现在遇到了最奇怪的情况。当我在 Visual Studio（调试版本）中启动应用程序时，它会打开并加载位于 .xml 的 .xml 文件 `C:\ProgramData\MyApp\Settings.config`。

唯一的问题是，**这个文件不存在**。我删除它以清除所有设置，但应用程序仍在加载它（我的旧设置）。在发布模式下，它会正确检测到没有设置，并创建一个新文件。但是当我删除它并在调试器中重新启动时，它会再次加载以前的文件。

我在加载它的行上放置了一个断点，文件名显然就是上面提到的那个。我什至删除了整个文件夹 ( `C:\ProgramData\MyApp`)，应用程序仍在加载它。当我将断点处的确切字符串复制到 Windows 资源管理器中时，它说没有这样的文件。但是它`FileStream`被创建，它具有正确的长度，并且`XmlSerializer`完全读取它。

我可以在 Windows 资源管理器（隐藏和系统）中看到所有文件，我什至尝试删除该文件夹。我也没有任何 NTFS 连接和类似的东西。

Visual Studio 从哪里加载这个文件？

**[编辑]**

感谢@MichaelBurr 在下面的评论，我发现（使用进程监视器）该文件正在从`C:\Users\MyAccount\AppData\Local\VirtualStore\ProgramData\MyApp\Settings.config`. 这种“重定向”仅在调试模式下发生（即使在我刚刚为该特定文件编写的全新测试控制台应用程序中）。

谁能解释为什么会这样？

**[编辑2]**

不知道这是否有帮助，但是：在某些时候，我使用它的 WiX 安装程序在我的机器上安装和卸载了这个应用程序的发布版本。如果当时 Visual Studio 也在运行，它是否有可能决定为自己的目的创建此文件夹的“虚拟副本”？

如果是，我如何让它再次使用绝对路径？

# command-line - 如何在mac上安装最新的ffmpeg

> ID：12992776
> 
> 赞同：7
> 
> 时间：2012-10-20T21:17:04.117
> 
> 标签：command-line, ffmpeg, terminal, osx-lion

我正在使用这个命令

```
sudo port install ffmpeg +gpl +postproc +lame +theora +libogg +vorbis +xvid +x264 +a52 +faac +faad +dts +nonfree 
```

但是我得到的安装的ffmpeg版本只有0.7.13。

我正在使用可能是问题的 MacPorts

显然有一个1.0版本！ [http://ffmpeg.org/download.html#release_1.0](http://ffmpeg.org/download.html#release_1.0)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2016-12-02T16:58:19.650

**1\. 自制**

Homebrew 有一个稳定的 FFmpeg 版本的公式。这会让你跑得很快。首先，通过打开 Terminal.app 并粘贴来安装 Homebrew。严格遵守所有说明！

```
ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)" 
```

然后通过ffmpeg公式安装FFmpeg：

```
brew install ffmpeg 
```

这将下载许多依赖项，例如 x264、LAME、FAAC 等，但之后您应该可以继续使用了。您还`brew install ffmpeg --HEAD`可以获得绝对最新的版本。

有关其他选项，请检查 brew info ffmpeg 的输出。例如，您可以添加以下通常禁用的选项：

```
brew install ffmpeg --with-fdk-aac --with-ffplay --with-freetype --with-libass --with-libquvi --with-libvorbis --with-libvpx --with-opus --with-x265 
```

要稍后更新 ffmpeg，请运行：

```
brew update && brew upgrade ffmpeg 
```

**2\. 静态构建**

FFmpeg 项目在下载页面上提供了指向 ffmpeg 静态构建的链接，您只需下载、提取和在终端中使用即可。

目前，您可以从这里获取它们：

*   [http://evermeet.cx/ffmpeg/](http://evermeet.cx/ffmpeg/)
*   [http://ffmpegmac.net/](http://ffmpegmac.net/)

静态构建不能包含所有可能的编码器，主要是由于许可问题。这就是为什么我不建议使用它们的原因，除非您并不真正关心您需要哪些特定功能。

下载后，解压缩文件，打开 Terminal.app，然后导航到解压缩文件的目录，即找到名为 ffmpeg 的文件。将此文件复制到 /usr/local/bin：

```
cd ~/Downloads/
sudo mkdir -p /usr/local/bin/
sudo cp ./ffmpeg /usr/local/bin
sudo chmod 644 /usr/local/bin/ffmpeg
sudo chown $USER /usr/local/bin/ffmpeg 
```

现在，如果您使用 Bash（这是默认的 shell），请将其添加到您的 $PATH：

```
open -e ~/.bash_profile 
```

将此添加到文件末尾：

```
export PATH="/usr/local/bin:$PATH" 
```

保存它，然后关闭编辑器。现在重新启动您的终端，哪个 ffmpeg 应该返回`/usr/local/bin/ffmpeg`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T21:41:13.870

这是 MacPorts 的“问题”。正如你所说，最后一个端口版本是 0.7.13。还有一个[开发端口](https://trac.macports.org/browser/trunk/dports/multimedia/ffmpeg-devel/Portfile)，但最近进行了修订（5 周前）。你也可以看看[这里](http://www.evermeet.cx/ffmpeg/)。这个站点似乎有一个 1.0 静态二进制文件。这是一个值得信赖的网站。实际上是在官方ffmpeg网站上链接的。

# three.js - 三.js + 视频映射

> ID：12992777
> 
> 赞同：0
> 
> 时间：2012-10-20T21:17:11.630
> 
> 标签：three.js

有没有办法在将视频映射到 webGL 中的 THREE.js 中的网格时控制“属性”（即，视频“纹理”未对齐我想要在网格上的位置/这是只能处理的东西吗？通过 Blender 或其他建模程序中的 UV 映射？）-我正在以编程方式将视频作为“纹理”加载到一个简单的 3d 模型上。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T00:38:00.047

您当然可以更改`three.js`网格的 UV，从而控制视频纹理的对齐方式。

这是一个完成的示例：http: [//mrdoob.github.com/three.js/examples/webgl_materials_video.html](http://mrdoob.github.com/three.js/examples/webgl_materials_video.html)

# asp.net - 自动上下定位？

> ID：12992778
> 
> 赞同：1
> 
> 时间：2012-10-20T21:17:19.790
> 
> 标签：asp.net, .net, html, css, xhtml

我的外部 div 是 position:relative ，内部 div 是绝对定位的。

我想设置我的内部 div 中心垂直对齐并考虑使用 top:auto 和 bottom:auto 但它不起作用。请告诉我如何做到这一点。

```
 div.Container div.Right 
    {
            width:50%;
            float:right ;
            border: 01px dashed green;
            height:95px !important;    
            position:relative !important;
    }   

     div.header-search
    {    
        overflow:auto;
        display:inline;    
        border:0px dashed blue;        
        position:absolute;
        top:auto;
        bottom:auto;
        right:0px;
    }

 <div class="Right">
            <div class="header-search">
                <input type="text" class="searchbox" />
                <input type="button" class="searchbutton" value="›" />
            </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T21:28:01.647

您可以像这样`line-height:95px;`在外部 div 和`vertical-align: middle;`内部 div 中使用：

```
div.Right
{
    width:50%;
    float:right ;
    border: 01px dashed green;
    line-height:95px !important;   
    display: block;
}   

div.header-search
{    
    overflow:auto;
    border:0px dashed blue;       
    vertical-align: middle;
} 
```

你可以在这里玩它：http: [//jsfiddle.net/leniel/5Mm67/](http://jsfiddle.net/leniel/5Mm67/)

* * *

如果要水平对齐内部 div 的内容，只需将其添加到`div.Right`：

`text-align: center;`

结果如下：http: [//jsfiddle.net/leniel/5Mm67/1/](http://jsfiddle.net/leniel/5Mm67/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T21:36:58.923

这应该有效：

```
div.header-search
{    
    overflow:auto;
    display:inline;    
    border:0px dashed blue;        
    position:absolute;
    top:50%;
    right:0px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T21:35:54.293

在 div 中设置绝对位置：“top:50%;”

它会将 div 显示得稍微低一点（绝对 div 应该正好在父高度的 50% - 相对 div 上），但是有一些方法可以解决这个问题。

例如：使用相对位置再做一个 div 并将其移动到更高绝对 div 高度的一半（这在代码中看起来不太好） - 你必须知道 div 的高度，如果你不知道你可以像 jQuery 一样测量大小并将 div 移高一点。

最简单的方法：也许尝试 45% 而不是 50%（如果它不是像素到像素的设计）。

可能有人有更好的解决方案，如果是这样，我希望看到他们:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-21T06:48:25.303

嗨，有几种方法可以通过 CSS 的魔力实现 div 的垂直居中。这是示例，我已经测试过它工作正常......而且工作正常。

HTML：

```
<div id="parent">
    <div id="child">Content here</div>
</div> 
```

CSS：

```
#parent {position: relative;}

#child {
    position: absolute;
    top: 50%;
    left: 50%;
    height: 30%;
    width: 50%;
    margin: -15% 0 0 -25%;
} 
```

这里是其他方法[点击这里查看完整的参考](http://www.vanseodesign.com/css/vertical-centering/) 希望，它会帮助你。干杯。！！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-20T21:27:38.170

实现您所追求的最佳方法是删除`bottom:auto;`样式并替换`top:auto;`为`top:50%;`. 之后计算出您试图居中的搜索栏的高度（比如它的 20px）并为其高度的一半添加负边距样式，所以如果它是 20px 样式将是`margin-top:-10px;`

你的CSS看起来像这样：

```
 div.header-search
{    
    overflow:auto;
    display:inline;    
    border:0px dashed blue;        
    position:absolute;
    top:50%;
height:20px;
margin-top:-10px;
right:0;

}​ 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-20T21:27:54.183

将 .header-search 设置为 top:50% 或 bottom:50% 然后使用 margin-top:-(div 高度的一半) 或 margin-bottom:-(div 高度的一半); 分别。我有时也只是简单地使用 top:50% 或 bottom:50% 而没有负边距。

例如：

```
 div.header-search
    {    
        overflow:auto;
        display:inline;    
        border:0px dashed blue;        
        position:absolute;
        top:50%;
        height: 500px;
        margin-top:-250px;
        right:0px;
    } 
```

所以是的，在这种情况下，你必须设置一个固定的高度。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-10-20T21:25:40.347

尝试将内部 div 设置为 margin: auto 0;

# android - SDK 13 后更改按钮样式

> ID：12992783
> 
> 赞同：2
> 
> 时间：2012-10-20T21:17:44.413
> 
> 标签：android, button

我的新游戏应用程序最初是为 13 的 targetSDK 设计的。从那以后我把它提高了，但我的默认按钮在外观上发生了变化。不是在模拟器上，而是在我实际运行 4.0.4 的 Galaxy S3 手机上。

旧按钮是矩形的，带有半透明背景和白色字母。新按钮看起来相同，但具有不透明的深灰色背景。任何大于 13 的 targetSDK 都会发生这种情况。

任何想法为什么，以及如何解决它？我没有对它们应用任何特定的样式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T08:07:08.143

这是因为谷歌新的全息主题

阻止它发生的方法是在您的清单中指定一个主题（就在您的活动的`android:name`和`android:label`属性下方。添加以下行将删除您

```
<application android:theme="@android:style/Theme"> 
```

这应该删除全息主题，如果没有，您可以使用其他一些主题，直到找到一个有效的主题。这可能会有所帮助 - [http://developer.android.com/guide/topics/ui/themes.html](http://developer.android.com/guide/topics/ui/themes.html)

# javascript - 如何从 jQuery 插件 jqPuzzle 回调函数中获取完整的拼图对象？

> ID：12992784
> 
> 赞同：0
> 
> 时间：2012-10-20T21:17:53.057
> 
> 标签：javascript, jquery

在 jqPuzzle 的设置中，我可以传递当人完成拼图时将调用的成功函数。问题是我的页面上有几个谜题，我想对当前完成的谜题进行操作，但结果只有几秒钟和移动次数。如何获得当前已完成的拼图？

这是我谈论的演示：http: [//polishwords.com.pl/dev/puzzle/exa.php](http://polishwords.com.pl/dev/puzzle/exa.php)

重要的部分是：

```
function initializePuzzle()
{
    var settings = {
      cols: 3,
      rows: 3,
      success: { 
          callback: function(results) {  
              //results.moves and results.seconds, but how to get the puzzle that was completed?
              alert(results.moves);
              var puzzleThatWasCompleted = ???;
          } 
      } 
    };

    $('.puzzle').jqPuzzle(settings);  //Changing all images of class puzzle to puzzles
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T22:22:31.080

如果您可以将成功函数传递给任何一个实例拼图，那么您可以将函数的不同“版本”传递给拼图的每个实例，并且每个版本都包含指示它与哪个特定实例相关的标识符. 这就是愚蠢的做法。

聪明的做法是在另一个函数内部定义成功回调，从而形成一个“闭包”。这允许成功回调在每种情况下都是相同的，但可以访问标识实例的外部变量。

对于这种方法，您的代码已经成熟，几乎不需要更改。

在您的代码的以下修改中，将一个字符串或数字传递给`initializePuzzle()`. 形式变量`puzzleID`被困在一个闭包中，并且在成功回调触发时仍然可用。

您还需要更精确地指定每个拼图的容器。类选择器`.puzzle`可能会处理多个元素，但更糟糕的是，每次`initializePuzzle()`调用它都会是相同的。因此，您需要在每次调用该函数时将唯一的 id 传递给该函数。

```
function initializePuzzle(puzzleID, containerSelector) {
    var settings = {
        cols: 3,
        rows: 3,
        success: {
            callback: function(results) {
                alert('PUZZLE ' + puzzleID + ': ' + results.moves);
            }
        }
    };
    $(containerSelector).jqPuzzle(settings); 
} 
```

现在你需要做的就是调用这样的`initializePuzzle()`东西：

```
initializePuzzle('A', '#puzzle1');
initializePuzzle('B', '#puzzle2');
initializePuzzle('C', '#puzzle3'); 
```

**[演示](http://jsfiddle.net/sVvW9/1/show/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T21:56:32.103

如果我没记错的话，您可以在回调中使用 $(this) 访问成功的拼图。（我使用您提供的示例在控制台中对其进行了测试，效果很好！）

确保为每个人提供一个 ID，以便您可以使用类似 $(this).attr('id'); 的东西来恢复它。

# javascript - 在移动浏览器上动画 div

> ID：12992786
> 
> 赞同：0
> 
> 时间：2012-10-20T21:18:01.377
> 
> 标签：javascript, android, html, css

我几乎没有试图找到一个好的解决方案来在移动设备上创建流畅的动画，尤其是在 android 上。

首先，我发现使用 javascript 是没有选择的 - > android 使用它的速度太慢了

然后我发现 CSS-transitions -> android 仍然很糟糕

然后我找到[了这个](http://swipejs.com/)脚本，似乎工作正常（webkit 转换？）

你能告诉我怎么做吗？也许有更好的方法.. 另外我真的不想使用第三方脚本，即使它是轻量级的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T21:21:15.857

android 至少从 2.1 版起支持 css 过渡[http://caniuse.com/#search=transition](http://caniuse.com/#search=transition)

你到底在瞄准什么？您正在测试哪些浏览器以及在哪些设备上进行测试？请记住，由于硬件而非软件限制，可能会发生缓慢

# php - 从 URL ID 返回文本

> ID：12992790
> 
> 赞同：0
> 
> 时间：2012-10-20T21:18:23.500
> 
> 标签：php

最近我一直在做一个小项目，旨在成为一个壁纸网站。它主要由我自己的照片组成，但我可能会实施某种上传系统供其他用户提交自己的照片。

本质上，我可以制作一个从 URL 获取 ID 的页面，例如，`284`从`/wallpaper?id=284`. 我可以轻松地在其后弹出一个 .jpg 并根据 ID 加载不同的图像。烦人的是，我还想在照片上加上标题/描述，我不想在 URL 中也有一个标题属性，即使没有造成任何损坏，也很容易被篡改.

我猜这与 PHP 表有关（从名称和突然意识到没有类似的东西就不可能实现），我可以使用它，因为我目前在本地 WAMP 服务器上运行。我也应该能够何时以及是否将其上传到在线服务器。

我基本上是在问如何创建某种包含可以使用某种 ID 检索的信息的文档或表格。

谢谢

# php - 为超过 350,000 名用户计算“排名”的有效方法

> ID：12992793
> 
> 赞同：0
> 
> 时间：2012-10-20T21:18:36.533
> 
> 标签：php, mysql, performance, for-loop

> **可能重复：**
> [Mysql rank 函数](https://stackoverflow.com/questions/3333665/mysql-rank-function)

我正在制作一个排名网站，每个用户都会有一个基于级别的唯一排名。#1 是最好的排名，因为有 350,000 名用户，所以最差的排名将是 #350000。

任何用户都不能拥有与其他任何人相同的排名。现在，当添加新用户时，会计算他们的级别。计算后，脚本将“重建”排名，逐个遍历每个用户，并计算他们的新排名。

以下是对查询的解释：

*   “id”是成员在数据库中的ID
*   “RankNum”是他们的等级。它需要重命名。
*   “排名”是他们的唯一排名，#1 到 #350000。

这是我当前的脚本：

```
function RebuildRanks() {
    $qD = mysql_query("SELECT `Id`,`RankNum` FROM `Members` ORDER BY `Rank` DESC, `Id` ASC");
    $rowsD = mysql_num_rows($qD);

    $curRank = 0;

    for($x = 1; $x <= $rowsD; $x++) {
        $rowD = mysql_fetch_array($qD);

        $curRank++;
        if($rowD['RankNum'] != $curRank) {
            if($curRank != 0) {
                mysql_query("UPDATE `Members` SET `RankNum`='$curRank' WHERE `Id`='".$rowD['Id']."'");
            }
        }
    }

    return true;
} 
```

对于 350,000 名用户，这往往会运行得很慢。本质上，在数据库中**排名**（“ORDER BY `Rank` DESC”）是他们的级别，因此查询将对他们进行排序。不幸的是，该过程的其余部分很慢。

以这种方式处理所有 350,000 个用户大约需要 97 秒。是否有任何可能的解决方案可以更有效、更快速地运行它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T21:32:40.660

您为新用户计算 NewNum，然后在此之后递增所有数字

```
 UPDATE Members SET Rank = Rank+1  WHERE Rank > NewNum 
```

**编辑**将 RankNum 更改为 Rank。我在您编辑后查看了问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T21:58:44.480

随着用户群的增长，您的 RebuildRanks() 函数将继续成为您的性能瓶颈；你最好的办法是设计一个系统，避免每次新用户加入时重新排名。这是一个可能有帮助的示例解决方案：

添加一个新表 (ScoreMap)，它是您的用户按分数排序的哈希（使用此术语而不是“排名”来消除歧义）。

```
CREATE TABLE ScoreMap (
  Score BIGINT NOT NULL, 
  Id BIGINT NOT NULL, 
  UNIQUE INDEX (Score), 
  UNIQUE INDEX (Id)
); 
```

当新用户加入时，计算他们的分数并插入到这个新表中。如果在 Score 上发生冲突，您可以解决这个问题（如果没有两个用户可以拥有相同的 RankNum，那么您必须为 Score 提供某种打破平局的功能；根据需要在此表中移动用户）。

现在查询 ScoreMap 表：

```
SELECT COUNT(*) FROM ScoreMap WHERE Score >= [the score you just calculated] 
```

那是您的新用户的RankNum。分数比新用户差的每个人的排名都会增加 1，您可以在他们登录时立即更新，定期更新，在前面放置缓存等。

PS：将您的排名评分函数标准化为介于 0 和非常高的数字（例如一万亿）之间的 BIGINT。这将帮助您在插入新表时避免冲突。您希望在此范围内实现均匀分布，因为您实际上是在使用分数作为散列函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T22:22:46.857

一种方法当然是使用如下查询语句（未经测试）：

```
UPDATE `Members`
SET `RankNum` = (@newRank := @newRank + 1)
ORDER BY `Rank` DESC, `Id` ASC, @newRank := 0 
```

同时更新和处理订单。

# jsf - 使用 AJAX 在 JSF 页面之间切换

> ID：12992795
> 
> 赞同：0
> 
> 时间：2012-10-20T21:19:05.970
> 
> 标签：jsf, jsf-2

我很感兴趣如何使用 AJAX 在 JSF 页面之间切换？就我而言，我有大约 10 个 JSF 页面，我可以像普通的 html 页面一样浏览它们。我想完全实现 AJAX。有没有可能的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T21:28:09.250

将 "?faces-redirect=true" 添加到您的操作方法的返回值中。

例如：

```
 String aListener(){

      return "home.xhtml?faces-redirect=true";
    } 
```

# python - 从输入/文件自动创建 MySQL 表

> ID：12992796
> 
> 赞同：0
> 
> 时间：2012-10-20T21:19:32.783
> 
> 标签：python, mysql, database, database-design

> **可能重复：**
> [生成检查 Excel(CSV) 的表架构并导入数据](https://stackoverflow.com/questions/3070094/generate-table-schema-inspecting-excelcsv-and-import-data)

我正在开发一种基于输入自动创建 MySQL 表的工具。

例如。

输入

```
Y|abc|123|1.12|2012-12-20 00:00:00 
```

输出

```
CREATE TABLE MyTable (
 is_enabed char(1),
 call_sign varchar(8),
 facility_id tinyint(4),
 bounds decimal(4,2)
 created_time datetime
 ) ENGINE=MyISAM DEFAULT CHARSET=latin1 
```

我现在在 Python 中有一个准工作原型。在深入研究之前，我想看看是否已经存在类似的项目（免费、开源）。如果是这样，我的努力可能会更好地用于研究该项目，而不是不知疲倦地重新发明轮子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T21:31:42.103

我不这么认为。至少我从未听说过有一种工具可以做到这一点。话虽如此，我不知道这是不是一个好主意。我知道它面向对 mysql (sql) 知识很少的用户，但他们在使用您的工具时可能会遇到更多问题，而不是阅读好的教程。例如，如果他们需要时间戳而不是日期时间呢？或者他们可能需要更精确的小数。此外，也许他们需要区分大小写的排序规则......

无论如何，这听起来像是一个不错的项目，我相信这只是一个例子，背后还有更多。我希望在不久的将来阅读您的工具。祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T08:11:27.247

[生成检查 Excel(CSV) 的表模式并导入数据](https://stackoverflow.com/questions/3070094/generate-table-schema-inspecting-excelcsv-and-import-data)

这个问题（以及最重要的回复，提到`xlrd`）已经讨论了这个主题。

而事实上，MySQL 显然内置了这样一个功能：

[https://dev.mysql.com/doc/refman/5.0/en/procedure-analyse.html](https://dev.mysql.com/doc/refman/5.0/en/procedure-analyse.html)

> ANALYSE() examines the result from a query and returns an analysis of the results that **suggests optimal data types for each column** that may help reduce table sizes.

# textbox - Obout 控件（网格、文本框、日历）问题

> ID：12992799
> 
> 赞同：2
> 
> 时间：2012-10-20T21:19:59.783
> 
> 标签：textbox, calendar, grid, obout

我在 obout 网格编辑模板中遇到了 Obout 日历和文本框的问题。

这是我的网格的代码：

```
 <obout2:Grid ID="grid1" runat="server" CallbackMode="false" Serialize="true"
         ShowHeader="true" PageSize="10"
        FolderStyle="~/styles/Grid/black_glass" AutoGenerateColumns="false" EnableRecordHover="true"
        AllowAddingRecords="true" RowEditTemplateId="tplRowEdit">
        <Columns>
            <obout2:Column ID="Column1" DataField="ID_Nal" ReadOnly="true" Visible="false" HeaderText="ID_Nal"
                Width="100" runat="server">
                <TemplateSettings RowEditTemplateControlId="txtID_Nal" RowEditTemplateControlPropertyName="value" />
            </obout2:Column>
            <obout2:Column ID="Column2" DataField="ID_Wpl" Visible="false" HeaderText="ID_Wpl"
                Width="200" runat="server">
                <TemplateSettings RowEditTemplateControlId="txtID_Wpl" RowEditTemplateControlPropertyName="value" />
            </obout2:Column>
            <obout2:Column ID="Column3" DataField="Nazwa" HeaderText="Typ_Naleznosci" Width="150"
                runat="server">
                <TemplateSettings RowEditTemplateControlId="txtTyp" RowEditTemplateControlPropertyName="value" />
            </obout2:Column>
            <obout2:Column ID="Column4" DataField="KwotaN" HeaderText="Kwota Nalezności" Width="150"
                runat="server">
                <TemplateSettings RowEditTemplateControlId="txtKwotaN" RowEditTemplateControlPropertyName="value" />
            </obout2:Column>
            <obout2:Column ID="Column5" DataField="Termin_platnosci" HeaderText="Termin_platnosci"
                Width="150" runat="server">
                <TemplateSettings RowEditTemplateControlId="txtTermin" RowEditTemplateControlPropertyName="value" />
            </obout2:Column>
            <obout2:Column ID="Column7" DataField="Opis" HeaderText="Opis nal." Width="150" runat="server">
                <TemplateSettings RowEditTemplateControlId="txtOpis" RowEditTemplateControlPropertyName="value" />
            </obout2:Column>
            <obout2:Column ID="Column8" DataField="KwotaW" HeaderText="Kwota wpłaty" Width="150"
                runat="server">
                <TemplateSettings RowEditTemplateControlId="txtKwotaW" RowEditTemplateControlPropertyName="value" />
            </obout2:Column>
            <obout2:Column ID="Column9" DataField="DataW" HeaderText="Data wpłaty" Width="150"
                runat="server">
                <TemplateSettings RowEditTemplateControlId="txtDataW" RowEditTemplateControlPropertyName="value" />
            </obout2:Column>
            <obout2:Column ID="Column10" DataField="OpisW" HeaderText="Opis wpłaty" Width="150"
                runat="server">
                <TemplateSettings RowEditTemplateControlId="txtOpisW" RowEditTemplateControlPropertyName="value" />
            </obout2:Column>
            <obout2:Column ID="Column11" HeaderText="" Width="200" AllowEdit="true" Align="center"
                AllowDelete="true" runat="server" />
        </Columns>
        <TemplateSettings RowEditTemplateId="tplRowEdit" />
        <Templates>
            <obout2:GridTemplate runat="server" ID="tplRowEdit">
                <Template>
                    <div style="position: relative;">
                        <table class="rowEditTable">
                            <tr>
                                <td valign="top">
                                    <fieldset style="width: 275px; height: 250px;">
                                        <legend>Ship Information</legend>
                                        <table>
                                            <tr>
                                                <td width="120">
                                                    ID Nal:
                                                </td>
                                                <td>
                                                    <obout1:OboutTextBox runat="server" ID="txtID_Nal" Width="150" />
                                                </td>
                                            </tr>
                                            <tr>
                                                <td width="120">
                                                    Id Wpl:
                                                </td>
                                                <td>
                                                    <obout1:OboutTextBox runat="server" ID="txtID_Wpl" Width="150" />
                                                </td>
                                            </tr>
                                            <tr>
                                                <td width="120">
                                                    Typ:
                                                </td>
                                                <td>
                                                    <obout1:OboutTextBox runat="server" ID="txtTyp" Width="150" />
                                                </td>
                                            </tr>
                                            <tr>
                                                <td width="120">
                                                    Kwota:
                                                </td>
                                                <td>
                                                    <obout1:OboutTextBox runat="server" ID="txtKwotaN" Width="150" />
                                                </td>
                                            </tr>
                                            <tr>
                                                <td width="120">
                                                    Termin płatności:
                                                </td>
                                                <td>
                                                    <obout1:OboutTextBox runat="server" ID="txtTermin" Width="150" />

                                                </td>
                                               <td>
                                                    <obout:Calendar ID="Calendar1" runat="server" DatePickerMode="true" DatePickerImagePath="~/Styles/Calendar/icon2.gif"
                                                        StyleFolder="~/Styles/Calendar/default"
                                                        TextBoxId="txtTermin" CultureName="pl-PL" DateFormat="dd-MM-yyyy">
                                                    </obout:Calendar>
                                                </td>
                                </tr>
                                <tr>
                                    <td width="120">
                                        Opis:
                                    </td>
                                    <td>
                                        <obout1:OboutTextBox runat="server" ID="txtOpis" Width="150" />
                                    </td>
                                </tr>
                                <tr>
                                    <td width="120">
                                        Kwota wpłaty:
                                    </td>
                                    <td>
                                        <obout1:OboutTextBox runat="server" ID="txtKwotaW" Width="150" />
                                    </td>
                                </tr>
                                <tr>
                                    <td width="120">
                                        Data wpłaty:
                                    </td>
                                    <td>
                                        <obout1:OboutTextBox runat="server" ID="txtDataW" Width="150" />
                                    </td>
                                    <td>
                                        <obout:Calendar ID="Calendar2" runat="server" DatePickerMode="true" DatePickerImagePath="~/Styles/Calendar/icon2.gif"
                                            StyleFolder="~/Styles/Calendar/default" CultureName="pl-PL" DateFormat="dd-MM-yyyy"
                                            ShowHourSelector="False" ShowMinuteSelector="False" ShowSecondSelector="False"
                                            TextBoxId="txtDataW">
                                        </obout:Calendar>
                                    </td>
                                </tr>
                                <tr>
                                    <td width="120">
                                        Opis wpłaty:
                                    </td>
                                    <td>
                                        <obout1:OboutTextBox runat="server" ID="txtOpisW" Width="150" />
                                    </td>
                                </tr>
                                <tr>
                                    <td colspan="2">
                                        <br />
                                    </td>
                                </tr>
                                </table> </fieldset> </td>
                            </tr>
                            <tr>
                                <td colspan="2" align="center">
                                    <obout1:OboutButton ID="BtnSaveChanges" runat="server" Text="Save" OnClientClick="return saveChanges('BtnSaveChanges')" />
                                    <obout1:OboutButton ID="BtnCancelChanges" runat="server" Text="Cancel" OnClientClick="return cancelChanges('BtnCancelChanges');" />
                                </td>
                            </tr>
                        </table>
                        <div class="loading-image-container" id="LoadingIndicator" style="display: none;">
                            <div class="loading-image">
                            </div>
                        </div>
                    </div>
                </Template>
            </obout2:GridTemplate>
        </Templates>
    </obout2:Grid> 
```

当我运行代码并单击“txtTermin”附近的日历时，会显示日历，但是当我更改日历中的日期时，它在文本框（txtTermin）中没有更改。

但是当我更换

```
<obout1:OboutTextBox runat="server" ID="txtTermin" Width="150" /> 
```

和

```
<asp:TextBox runat="server" ID="txtTermin" Width="150" /> 
```

一切正常。

当然，txtDataW 也有同样的问题。

请帮忙，为什么日历不能与 OboutTextBox 一起使用，但可以与标准 ASP TextBox 一起使用？在此示例中：[http](http://www.obout.com/grid/grid_commands_row_template.aspx) : //www.obout.com/grid/grid_commands_row_template.aspx 它与 OboutTextBox'es 一起工作（订购日期，所需日期..）。

# java - 在 Ubuntu 上编译 rJava

> ID：12992801
> 
> 赞同：0
> 
> 时间：2012-10-20T21:20:10.893
> 
> 标签：java, rjava

我无法从源代码编译 rJava。即使它说是，Configure 也没有创​​建 Makefile。

```
configure: creating ./config.status
config.status: creating src/Makefile
config.status: creating Makefile
config.status: creating run
config.status: creating src/config.h
drew@drew-ThinkPad-T410:~/Downloads/rJava$ ls
config.log     configure.ac   getsp.class  install-sh  NAMESPACE  src
config.status  configure.win  getsp.java   jri         NEWS       version
configure      DESCRIPTION    inst         man         R
drew@drew-ThinkPad-T410:~/Downloads/rJava$ sudo make
make: *** No targets specified and no makefile found.  Stop.
drew@drew-ThinkPad-T410:~/Downloads/rJava$ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T05:04:21.810

你能试试 ./configure ./install-sh

# eclipse - Eclipse 错误：Java 启动退出代码=1

> ID：12992804
> 
> 赞同：1
> 
> 时间：2012-10-20T21:20:15.533
> 
> 标签：eclipse, windows-7

我刚刚从 Eclipse.org 下载了 Eclipse Classic，但是当我打开它时，我收到以下错误消息：

![在此处输入图像描述](../Images/7072bfd38771133d78ce71355c15ffc1.png)

我正在使用 Windows 7 64 位（我还下载了 windows7-64 位版本）

“映射器”在丹麦语中是指文件夹。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T21:23:17.303

检查您的 JRE/JKD 是否也是 64 位的。

# json - 在 Qt4 中解析特定格式的 json 数组，没有外部库

> ID：12992824
> 
> 赞同：0
> 
> 时间：2012-10-20T21:22:46.410
> 
> 标签：json, qt, string-parsing

我需要从 JSON 数组中提取数据，格式为 '[[[1,2,3]],[[1,2,3],[1,2,3]],"string"]' 在 Qt 中。逻辑上它是'[[[x-values]]，[[y1-values]，[y2-values]]，“comments”]'。

编辑：x,y1,y2 数组最多可以包含 1000+ 个元素。

我知道那是确切的格式（没有单引号）并且不会改变。

我真正想要的是 QVector xval, y1val; .

我将如何解析？

（我是 Qt 的新手，所以如果我遗漏了明显的内容，请原谅我。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T10:28:18.820

快速而肮脏的解决方案：

```
QString s = "[[[1,2,3]],[[4,5,6],[7,8,9]],\"string\"]";
QStringList parts = s.remove("[").remove("]").split(',');

QVector<int> xval, yval;
if (parts.size() >= 6)
{
    xval << parts[0].toInt() << parts[1].toInt() << parts[2].toInt();
    yval << parts[3].toInt() << parts[4].toInt() << parts[5].toInt();
} 
```

**编辑**：现在支持可变长度数组：

```
QVector<int> ToIntList(const QString& s)
{
    QVector<int> result;
    QStringList parts = s.trimmed().split(",");
    for (int i = 0; i < parts.size(); ++i)
        result << parts[i].toInt();
    return result;
}

QString s = "[[[1,2,3,4,5,6, 7,  8]],[[9\n,10], [11,12,13]],\"string\"]";
QStringList lists = s.remove(" ").split("],[");

for (int i = 0; i < lists.size(); ++i)
    lists[i] = lists[i].remove("[").remove("]");

QVector<int> xval, yval;
if (lists.size() >= 2)
{
    xval = ToIntList(lists[0]);
    yval = ToIntList(lists[1]);
} 
```

# r - 在一个窗口中绘制多个 xts 对象

> ID：12992831
> 
> 赞同：5
> 
> 时间：2012-10-20T21:23:34.233
> 
> 标签：r, plot, xts, zoo

我在网上找到了一些答案，但由于某种原因我解释不正确，因为我无法让它工作。我的目标是简单地使用`xts`绘图功能（使用它创建轴、网格线等的方式）来绘制多个绘图：

```
x <- xts(data.frame(a=1:100, b=100:1),seq(from=as.Date("2010-01-01"), by="days", len=100))
> plot(x, screens=1)
Warning messages:
1: In plot.xts(x, screens = 1) :
  only the univariate series will be plotted
2: In plot.window(...) : "screens" is not a graphical parameter
3: In plot.xy(xy, type, ...) : "screens" is not a graphical parameter
4: In axis(1, at = xycoords$x, labels = FALSE, col = "#BBBBBB", ...) :
  "screens" is not a graphical parameter
5: In axis(1, at = xycoords$x[ep], labels = names(ep), las = 1, lwd = 1,  :
  "screens" is not a graphical parameter
6: In axis(2, ...) : "screens" is not a graphical parameter
7: In title(screens = 1) : "screens" is not a graphical parameter 
```

另一个尝试：

```
> plot(x, plot.type="single")
Warning messages:
1: In plot.xts(x, plot.type = "single") :
   only the univariate series will be plotted
2: In plot.window(...) : "plot.type" is not a graphical parameter
3: In plot.xy(xy, type, ...) : "plot.type" is not a graphical parameter
4: In axis(1, at = xycoords$x, labels = FALSE, col = "#BBBBBB", ...) :
  "plot.type" is not a graphical parameter
5: In axis(1, at = xycoords$x[ep], labels = names(ep), las = 1, lwd = 1,  :
  "plot.type" is not a graphical parameter
6: In axis(2, ...) : "plot.type" is not a graphical parameter
7: In title(plot.type = "single") :
  "plot.type" is not a graphical parameter 
```

需要明确的是：我可以做到这一点，`lines`但我想知道是否有办法一次做到这一点。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-20T22:49:54.763

您可以强制`zoo`使用`plot.zoo`：

```
plot(as.zoo(x), screens=1)
plot(as.zoo(x), plot.type='single') 
```

或者，您可以安装具有更新方法的[xtsExtra](https://r-forge.r-project.org/R/?group_id=118)`plot.xts`

```
#install.packages("xtsExtra", repos='http://r-forge.r-project.org')
library(xtsExtra)
plot(x, screens=1) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-23T03:52:21.900

我可能是错的，但我认为 plot.xts 不再是 xtsExtra 的一部分，并且已移至主 xts。[来源](https://stackoverflow.com/questions/29241784/how-to-use-plot-xts-with-block-and-events-lines-with-xtsextra-package)。也许这个笔记会帮助人们在未来试图弄清楚在 xts 中绘图..

# playframework-2.0 - 玩框架2开发配置

> ID：12992834
> 
> 赞同：8
> 
> 时间：2012-10-20T21:24:03.167
> 
> 标签：playframework-2.0, sbt

如何在 Play 2 应用程序中为开发和生产模式设置不同的配置？

我尝试在开发模式下在应用程序启动时使用 JVM 参数，如下所示：

```
play "run -Dconfig.resource=dev.conf" 
```

或从 Play 控制台：

```
run -Dconfig.resource=dev.conf 
```

但它没有用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-20T23:53:19.377

那应该工作：

```
play -Dconfig.resource=dev.conf "run" 
```

无论如何，我遇到了一些问题，`-Dconfig.resource`所以我`-Dconfig.file`改用

```
play -Dconfig.file=/full/path/to/your/project_folder/conf/alt_conf.conf "run" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T09:29:18.590

更好的是为您的开发文件使用标准的 application.conf 文件，并为您的其他环境使用特定的文件。

然后，使用@Biesior 的建议，您可以在 dev 中使用：

```
play start 
```

对于其他环境，例如 Heroku，使用其他文件：

```
play start -Dconfig.file=conf/application.heroku.conf 
```

# c# - ArgumentOutOfRange 异常 C#

> ID：12992835
> 
> 赞同：2
> 
> 时间：2012-10-20T21:24:27.680
> 
> 标签：c#, streamreader, textreader

我正在做我的作业，我必须做一个程序，将文件中的简单字母（如 E 和 F）扩展到连续产生式，也在文件夹中给出，如 E+T EF 等。无论如何，下面显示的代码给了我参数超出范围异常。我用java编写了相同的代码，一切正常。我不知道为什么在 C# 中它给了我这个例外。请给我一些建议！！

我忘了把我正在阅读的文件放在：

电子转帐

一个+()

乙

E+T|ET|T

T*F|T/F|F

一个|(E)

```
public void generare(){

        String N = null;
        String T = null;
        String S = null;
        String[] P = null;

        TextReader tr = new StreamReader("dateIntrare.txt");

        try
        {

            N = tr.ReadLine();
            T = tr.ReadLine();
            S = tr.ReadLine();
            P = new String[N.Length];

            for (int i = 0; i < N.Length; i++)
            {
                P[i] = tr.ReadLine();
            }

            tr.Close();

            Console.WriteLine("Neterminale: N = " + N);
            Console.WriteLine("Terminale:  T = " + T);
            Console.WriteLine("Productii ");

            for (int i = 0; i < P.Length; i++)
                Console.WriteLine("\t" + P[i]);

            Console.WriteLine("Start: S = " + S);

            Boolean gata = false;

            String iesire = S.Substring(0, S.Length);

            Console.WriteLine("\nRezultat");
            Console.Write("\t");

            while ((gata == false) && (iesire.Length < 50))
            {

                Console.Write(iesire);

                Boolean ok = false;

                for (int i = iesire.Length - 1; i >= 0 && ok == false; i--)
                {
                    for (int j = 0; j < N.Length && ok == false; j++)
                        if (N[j] == iesire[i])
                        {
                            String s1 = iesire.Substring(0, i);
                            String s2 = iesire.Substring(i + 1, iesire.Length); // HERE IS THE EXCEPTION TAKING PLACE

                            String inlocuire = P[N.IndexOf(iesire[i])];
                            String[] optiuni = null;

                            String[] st = inlocuire.Split('|');
                            int k = 0;

                            foreach (String now in st)
                            {
                                k++;
                            }

                            optiuni = new String[k];
                            st = inlocuire.Split('|');

                            k = 0;

                            foreach (string next in st)
                            {
                                optiuni[k++] = next;
                            }

                            Random rand = new Random();
                            int randNr = rand.Next(optiuni.Length);

                            String inlocuireRandom = optiuni[randNr];

                            iesire = s1 + inlocuireRandom + s2;

                            ok = true;

                        }
                }

                if (ok == false)
                {
                    gata = true;
                }

                else
                {

                    if (iesire.Length < 50)
                        Console.Write(" => ");
                }
            }
        }

        catch (FileNotFoundException)
        {
            Console.WriteLine("Eroare, fisierul nu exista!");
        }

        Console.WriteLine();
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T21:34:50.783

> 但是为什么在java中有效而在这里不行呢？我很困惑

如有疑问，请阅读[文档](http://msdn.microsoft.com/en-us/library/aka44szs.aspx)。在 Java 中，2 参数重载`substring`需要一个开始索引和一个结束索引。在 .NET 中，第二个参数是要采用的字符数，*而不是*结束索引。

所以你可能想要

```
String s2 = iesire.Substring(i + 1, iesire.Length - i - 1); 
```

或者更简单一点，只需使用 1 参数版本，它会从指定索引开始获取所有字符：

```
String s2 = iesire.Substring(i + 1); 
```

（我也会在 Java 中使用它......）

但从根本上说，值得退后一步，弄清楚为什么你不能自己解决这个问题……即使你以前错过了：

*   查看代码中引发异常的行
*   查看哪个方法实际抛出了异常（`String.Substring`在本例中）
*   仔细查看异常消息（这是一个非常好的提示！）以及任何嵌套的异常
*   Read the documentation for the relevant method carefully, especially the sections describing the parameters and exceptions

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T21:34:42.987

这是将代码从 Java 移植到 c# 时的常见错误。

Java 中的子字符串采用 start 和 end 参数，但在 c# 中它们是 start 和 length

# php - PHP APC 缓存，开箱即用吗？

> ID：12992839
> 
> 赞同：8
> 
> 时间：2012-10-20T21:25:24.903
> 
> 标签：php, caching, apc

所以这是困扰我的事情。我刚刚安装了 APC 缓存并正在对其进行测试。使用 APC 管理界面时，在 apc.php 文件中，我可以看到有关 APC 等的所有信息。当我转到系统缓存条目时，我可以看到我调用的每个脚本都写在那里。

那么这是否意味着 APC Cache 开箱即用？我可以只安装 APC 缓存，它已经通过缓存脚本加速了我的应用程序？如果我愿意，我可以缓存变量以使其更快？

希望你能得到这个问题，对于有更多 APC 经验的人来说，这可能很简单。

我知道我可以将一些变量添加到缓存中，然后将它们取出，这将加速我的应用程序。但是，APC 会自己加速应用程序和缓存脚本，这是真的吗？有没有什么好的文档可以让我了解更多关于 APC 的信息？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-20T21:36:05.133

是的，APC“正常工作”。任何在没有 APC/（其他 opcodecache）的情况下在生产环境中运行 PHP 的人都错过了他们可以轻松实现的最简单的性能改进。

不过有一些注意事项。

如果您处于开发阶段，您仍然可以运行 APC，但是，您可能希望启用 stat 调用。这意味着 APC 将检查您的文件的最后修改。

`apc.stat = [1|0]`

因此，如果您没有启用 stat 调用，并且您更改了文件并且 APC 已经缓存了它，那么它不会观察您的更改，您将继续使用缓存的操作码。

正如您所提到的，APC 不仅用于操作码缓存，它对于用户空间缓存也很有用。你有你的`system`缓存和你的`user`缓存。

您可以通过执行以下操作将内容存储在用户缓存中：

`apc_store("fooKey", "barValue");`

# java - ArrayIndexOutOfBounds

> ID：12992843
> 
> 赞同：1
> 
> 时间：2012-10-20T21:26:29.673
> 
> 标签：java, arrays, string, split, fractions

我正在开发一个分数计算器，`String.split()`用于拆分术语。输入由空格分隔（1/2 / 1/2）

```
String[] toReturn = new String[6];
result = isInputValid(expression);

toReturn = splitExpression(expression, placeToSplit[0]);
int indexOfUnderscore = toReturn[0].indexOf("_");
result = isInputValid(toReturn[0]);

if(toReturn[5] != null){
    getOperator2(toReturn);
} 
```

错误在 if 语句中。`toReturn[5]`超出范围，因为当回答两个或更少的术语时，拆分表达式（用于`String.split()`在空格处拆分它）不会创建`toReturn[5]`，即使我将值设置为`toReturn[5]`。如果有办法判断数组中的字段是否存在，那可以解决它，或者是否有办法判断放入了多少项。我的程序适用于`1/2 + 1/2 * 1/2`，但我还没有弄清楚如何告诉是否`toReturn[5]`存在。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T21:28:21.720

正确：

```
result = isInputValid(expression);

String[] toReturn = splitExpression(expression, placeToSplit[0]);
int indexOfUnderscore = toReturn[0].indexOf("_");
result = isInputValid(toReturn[0]);

if(toReturn.length>5 && !"".equals(toReturn[5]) ){
    getOperator2(toReturn);
} 
```

该`toReturn.length>5`部分验证数组本身至少有 6 个项目长。然后您可以检查该元素是否`empty`...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T21:39:53.450

这就是它应该的样子。删除第一行， `String[] toReturn = new String[6];`

更新你的第三行，

```
String[] toReturn = splitExpression(expression, placeToSplit[0]); 
```

并检查这种情况：

```
if(toReturn.length>5 ){ // use !toReturn[5].isEmpty()  to check the empty string
    getOperator2(toReturn);         
    } 
```

# php - preg_replace put 捕获的数字不起作用

> ID：12992844
> 
> 赞同：0
> 
> 时间：2012-10-20T21:26:37.390
> 
> 标签：php, regex, preg-replace

我想我犯了一个严重的错误......

这是输入：

```
http://www.example.com/do.php?action=5&say=text
http://www.example.com/do.php?action=8&say=text
http://www.example.com/do.php?action=10&say=text 
```

我想在后面加上另一个参数`action`：

```
preg_replace('/action=[0-9]/', 'action=$1&param=test', $text); 
```

但它的输出是：

```
http://www.example.com/do.php?action=&param=test&say=text
http://www.example.com/do.php?action=&param=test&say=text
http://www.example.com/do.php?action=&param=test&say=text 
```

如您所见，这些`action`值已被删除。

我的错在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T21:40:19.143

你可以试试

```
$url = "http://www.example.com/do.php?action=10&say=tex" ;
$url = preg_replace('/action=(\d+)/', "action=$1&param=test", $url);
echo $url ; 
```

输出

```
http://www.example.com/do.php?action=10&param=test&say=tex 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T21:31:40.300

这`$1`是一个子字符串匹配，并从第一个括号开始。所以使用它就是`/actions=([0-9]+)/`捕捉数字。

# android - 如何在android中的gridview中添加一个可滚动的标题？

> ID：12992853
> 
> 赞同：8
> 
> 时间：2012-10-20T21:27:54.933
> 
> 标签：android, android-layout, android-gridview, android-scrollview

我试图在 android 的 gridview 布局中添加一个可滚动的标题，我尝试了我在网上可以找到的所有东西，但我无法让它工作，这种类型的布局出现在许多流行的应用程序中，如 facebook 和 instagram 但我找不到任何这样的示例代码可以让我知道如何实际执行它，有人知道如何实现吗？将网格视图添加到滚动视图也不起作用，下面是一些照片，说明了我试图实现的目标。

这是卷轴之前：

![滚动前](../Images/7718c341f8b912fd9fc390be07867802.png)

这是卷轴之后： ![滚动后](../Images/ca367acddf67b324e98a5eabc545bd2e.png)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-22T10:56:15.770

不要使用网格视图。而是使用具有此标题功能的列表视图。在适配器的 getView() 方法中，您必须返回一个列表项，该列表项分为您想要的列数。

# c# - 修改后的数据绑定

> ID：12992859
> 
> 赞同：0
> 
> 时间：2012-10-20T21:28:40.047
> 
> 标签：c#, wpf, data-binding

我正在创建一个将滑动 2 个面板（从一侧到另一侧）的过渡效果。

我的计划是**通过 data-binding 将窗口的宽度乘以 2 的 Grid**，将其除以 2 以获得 2 个面板，然后将 Grids 放入其中（所以我将有 2 个面板与它们自己的面板平分网格，您一次只能看到其中一个。现在只需使用动画移动根网格以创建过渡效果）。

所以我试图将 Grid 的宽度数据绑定到窗口的宽度乘以 2（正如我在上面用粗体写的那样），但我不知道如何修改数据绑定，并让它相应地更新. 所以如果可能的话 - 你是怎么做的？

我想我可以通过事件来做到这一点（就像在任何其他 .NET 应用程序中一样），但这只是让错误出现和恶化的更多机会（即我会错过的事件）；所以我真的很感激一个好的和干净的解决方案。

*顺便说一句，如果您有更好的过渡方式，请在评论中告诉我。我的思想仍然对想法持开放态度。* 谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T21:48:55.163

我已经做到了。是这样的：

```
<Grid>
<Grid.ColumnDefinitions>
<ColumnDefinition />
<ColumnDefinition Width="0" />

<Grid x:Name="Panel1" />
<Grid x:Name="Panel2"/>
</Grid> 
```

现在，这是横向滚动，但要点是一样的。您所做的就是将 RenderTransform.TranslateTransform 动画应用于 Panel2，将 X 从 0 设置为 Panel2 宽度，基本上它将完全关闭，然后您只需将 Panel2 Column 设置为“1”。

明天我也可以给你一个小代码示例，但你可以开始了。

这是当用户切换按钮时处理 slide2slide 动画的 Xaml。

```
 <Grid.Triggers>
<EventTrigger RoutedEvent="ToggleButton.Checked" SourceName="workingPlanButton">
<BeginStoryboard>
<Storyboard Completed="Storyboard_Completed">

<DoubleAnimationUsingKeyFrames BeginTime="00:00:0.1"
                              Duration="0:0:00.5"
                              Storyboard.TargetName="lsView"
                              Storyboard.TargetProperty="RenderTransform.(TranslateTransform.Y)"
                              Timeline.DesiredFrameRate="30">
<LinearDoubleKeyFrame KeyTime="00:00:00.3" Value="{Binding ElementName=bodyGrid, Path=ActualHeight}" />
</DoubleAnimationUsingKeyFrames>

<!--  Hide the panel  -->
<ObjectAnimationUsingKeyFrames BeginTime="0:0:0.5"
                              Storyboard.TargetName="lsView"
                              Storyboard.TargetProperty="Visibility"
                              Timeline.DesiredFrameRate="30">
<DiscreteObjectKeyFrame Value="{x:Static Visibility.Hidden}" />
</ObjectAnimationUsingKeyFrames>
</Storyboard>
</BeginStoryboard>
</EventTrigger> 
```

现在实际的网格：

```
<Grid x:Name="bodyGrid" Grid.Row="1">

<Grid.RowDefinitions>
<RowDefinition Height="*" />
<RowDefinition Height="1" />
</Grid.RowDefinitions>
<StudyPlan:StudyPlanControl />
<local:LessonControl x:Name="lsView />
<local:LessonControl.RenderTransform>
<TranslateTransform Y="0" />
</local:LessonControl.RenderTransform>

</local:LessonControl>
</Grid> 
```

# python - 硒找不到元素

> ID：12992861
> 
> 赞同：4
> 
> 时间：2012-10-20T21:28:58.510
> 
> 标签：python, selenium, webdriver, selenium-webdriver

我正在尝试选择一个文本框并通过 selenium Web 驱动程序在其中输入文本。html如下：

```
</div><div>
    <input name="mLayout$ctl00$ctl00$6$16$ctl00$Database" type="text" value="Enter database name" maxlength="175" size="26" id="mLayout_ctl00_ctl00_6_16_ctl00_Database" accesskey="s" title="Go search this database" class="InputContent GhostText" onfocus="SearchBoxOnFocus(&#39;mLayout_ctl00_ctl00_6_16_ctl00_Database&#39;);" onkeypress="if(!__TextBoxOnKeyPress(&#39;mLayout$ctl00$ctl00$6$16$ctl00$GoButton&#39;,event.which)) { return false; }" />&nbsp;<input type="image" name="mLayout$ctl00$ctl00$6$16$ctl00$GoButton" id="mLayout_ctl00_ctl00_6_16_ctl00_GoButton" title="Go search database" src="http://images-statcont.westlaw.com/images/go_v602.gif" alt="Go search database" align="absmiddle" onclick="javascript:WebForm_DoPostBackWithOptions(new WebForm_PostBackOptions(&quot;mLayout$ctl00$ctl00$6$16$ctl00$GoButton&quot;, &quot;&quot;, true, &quot;&quot;, &quot;&quot;, false, false))" style="height:18px;width:21px;border-width:0px;" />
</div><div> 
```

我试过以下

```
driver.find_element_by_id("mLayout_ctl00_ctl00_6_16_ctl00_Database")
driver.find_element_by_name("mLayout$ctl00$ctl00$6$16$ctl00$Database")
dbElement = WebDriverWait(driver, 20).until(lambda x : x.find_element_by_id("mLayout_ctl00_ctl00_6_16_ctl00_Database")) 
```

$ 和 _ 字符有什么特别之处吗？为什么硒不能定位这些元素？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T22:24:17.903

解决方案：确保您在正确的窗口中。在这一步之前的步骤中，我单击了一个打开一个新窗口的链接，并且我认为该窗口将自动成为活动窗口。

要查看哪些窗口可用，请运行：

```
driver.window_handles 
```

这将返回一个列表。记下要更改到的窗口，索引为 i。然后更改窗口，运行：

```
driver.switch_to_window(driver.window_handles[i]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T21:31:08.897

您的第二行中有一个额外的双引号，之后`find_element_by_name(""`

```
driver.find_element_by_name(""mLayout$ctl00$ctl00$6$16$ctl00$Database") 
```

将其更改为

```
driver.find_element_by_name("mLayout$ctl00$ctl00$6$16$ctl00$Database") 
```

并且每当不确定 abt`$`然后`_`使用单引号时，就像这样

```
driver.find_element_by_name('mLayout$ctl00$ctl00$6$16$ctl00$Database') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T10:05:45.057

这个想法在下面。如果您无法通过全名定位元素，我会尝试通过名称的一部分来定位它。所以我会尝试这种方法：

A 包含“t”的元素的属性 A

**xpath** : //E[contains(@A,'t')]/@A ⌦ {Se: `//E[contains(@A,'t')]@A`}

**css** : NA {Se: `css=E[A*='t']@A`}[在这里拍摄](http://www.simple-talk.com/dotnet/.net-framework/xpath,-css,-dom-and-selenium-the-rosetta-stone/)

所以它是一些东西

```
driver.find_element_by_xpath("input[contains(@name,'ctl00$Database')]@name") 
```

这样，我通常会在我对定位器不自信的情况下进行验证： ![在此处输入图像描述](../Images/d1d3b9679622d057acc8d6b8bf316686.png)

# python - Python XML-获取两个节点之间的内容

> ID：12992862
> 
> 赞同：3
> 
> 时间：2012-10-20T21:29:10.703
> 
> 标签：python, xml, minidom

这是我的xml文件

```
<gui>
<object class="wxPanel" name="new"> 
     <object class="wxBoxSizer"> 
        <orient>wxVERTICAL</orient> 
        <object class="sizeritem"> 
            <object class="wxTextCtrl" name="a"></object>
        </object>  
            <option>1</option> 
            <flag>wxEXPAND</flag> 
        </object> 
</object>
</gui> 
```

我想准确地了解 gui 标签之间的内容

所以我想要这个：

```
<object class="wxPanel" name="new"> 
     <object class="wxBoxSizer"> 
        <orient>wxVERTICAL</orient> 
        <object class="sizeritem"> 
            <object class="wxTextCtrl" name="a"></object>
        </object>  
            <option>1</option> 
            <flag>wxEXPAND</flag> 
        </object> 
</object> 
```

我目前正在使用

```
minidom.parse("path to xml").getElementsByTagName('gui')[0].firstChild.nodeValue 
```

但是，这不适用于将 xml 作为字符串获取。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T22:29:38.937

您可能正在使用更合适的解析器。`ElementParser`会做得很好：

```
from xml.etree import ElementTree as ET
tree = ET.parse('path/to/xml.xml')
gui  = tree.getroot()
ET.tostring(gui.getchildren()[0]) 
```

现在这一切看起来有点骇人听闻，而且无论您使用哪种解析器，都可能不会非常可靠。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T21:34:08.660

尝试 toxml

```
gui = minidom.parse("path to xml").getElementsByTagName('gui')[0]
gui.getElementsByTagName('object')[0].toxml() 
```

# java - 如何在 mac OS X 10.8.2 上的 Java 7 和 Java 6 之间切换？

> ID：12992865
> 
> 赞同：5
> 
> 时间：2012-10-20T21:29:29.720
> 
> 标签：java, preferences, osx-mountain-lion, java-7, java-6

我正在使用 Java SE 7 为 windows 和 mac 编写简单的游戏，但我必须切换到 java 6 才能在我的计算机上运行诸如 Minecraft 之类的游戏。在我更新到 Mac OS X 10.8.2 Build 12C60 之前，这曾经工作得很好。在此更新之前，我曾经能够打开 java 首选项并检查 java 6 或 java 7。但现在我似乎无法找到 java 首选项。

我正在运行 mac OS X 10.8.2（最新版本）

谢谢。

# javascript - 理解 JSON 数组

> ID：12992866
> 
> 赞同：0
> 
> 时间：2012-10-20T21:29:40.620
> 
> 标签：javascript, jquery, arrays, json

JSON数组：

```
var json_array = [
                 { "A" : "1" }, 
                 { "B" : "2" }
                  ]; 
```

如何制作一个作用于数组每个元素的 JS 函数？喜欢..

```
$.each(json_array, function() { ... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T21:32:48.663

两个建议。

1.  JSON 只是文本。~~一旦您从代码中删除了外部花括号，~~您就有了一个实际的*JavaScript*数组。

~~*   不要为此使用 JQuery。普通的旧 JavaScript`forEach`已经适用于常规数组，这就是我认为的你想要的。~~ 

 ~~**附录**

使用 JavaScript 的`forEach`：

```
var a = [
    {"A": "1"},
    {"B": "2"}
];

a.forEach(function(x) {
    alert(JSON.stringify(x));
}); 
```

如果您有旧浏览器（IE <= 8），请将`forEach`调用替换为（由于 Asad 的建议）：

```
for (var i = 0, n = a.length; i < n; i += 1) {
    // do something with the element object
} 
```

jQuery`each`用于 jQuery 对象。

​</p>

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T21:35:16.420

如果你不能使用 jQuery，那你为什么不直接循环数组呢？

```
for (i = 0; i < json_array.length; i++)
{
   var item = json_array[i]; // this is { "A": 1 }
   for (element in item)
   {
       // element is "A", item[element] is 1
   }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-20T21:40:15.820

使用 jQuery`each`

```
$.each(json_array, function( index, item) {
   alert( item.A};
}) 
```

数组中每个对象中的键通常与您的演示不同，因此这适用于：

```
var json_array = [
                 { "A" : "1" }, 
                 { "A" : "2" }
                  ]; 
```~~

# php - 在 PHP 中计算 MySQL 表的值

> ID：12992870
> 
> 赞同：-1
> 
> 时间：2012-10-20T21:29:57.247
> 
> 标签：php, mysql

我有一个包含用户和打印页面的表格，如下所示：

```
user  |  pages
---------------
maria |  5

helen |  6

maria |  7

nick  |  10

nick  |  3

nick  |  6 
```

我想数一数 nick, helen, maria 打印了多少页。我尝试了一些方法，但我没有得到正确的页数。

有任何想法吗？

* * *

到目前为止，我一直在使用复制/粘贴将 csv 文件保存在特定文件夹中，现在我试图让用户选择自己上传。这是我的 html 和 php 文件的一部分。

```
 <form action="data.php" method="post" enctype="multipart/form-data">
                <label for="file">   </label>
                <input  type="file" name="file" id="file" />
          </br></br>      <input type="submit" value="Load data file into database" 
            name="button1"/>
    </form> 
```

* * *

数据.php

```
<?php
$file_name=$_FILES["file"]["name"];
$file_type=$_FILES["file"]["type"]; echo"type:".$file_type;
$destination="D:\xampp\mysql\data\readcsvdb";
if($file_type!='text/csv')
                        {
                                echo "Please the input file should be a .csv file";
                        }
else
move_upload_file($file_name,$destination);

connect_db(); 

//Fill the table log of readcsv database with the csv's data

$q="LOAD DATA 
                 INFILE '$file_name' INTO TABLE log 
                 FIELDS TERMINATED BY ',' 
                 LINES TERMINATED BY \"\n\" 
                 IGNORE 2 LINES
                 (time,user,pages,copies,
                 printer,doc_name,client,paper_size,language,height,width,duplex,grayscale,size)";
                mysql_query($q) or die(mysql_error()); 
```

--------------------- 我收到一个错误：type:application/vnd.ms-excelPlease the input file should be a .csv fileFile 'D:\xampp \mysql\data\readcsvdb\papercut-print-log-2012-10.csv' 未找到（错误代码：2）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T21:35:37.417

尝试这个

```
SELECT user, SUM(pages) AS totalPages 
FROM users 
GROUP BY user 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/b08cf/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T21:31:47.070

像这样使用 Group By 语句：

```
SELECT *, COUNT(*) FROM users GROUP BY user 
```

# haskell - Haskell doctest 和 FFI

> ID：12992873
> 
> 赞同：2
> 
> 时间：2012-10-20T21:30:32.370
> 
> 标签：haskell, doctest

我有一个使用 FFI 绑定到 C 函数的模块。我怎样才能使这个模块使用`doctest`？

我在运行时遇到的错误`doctest Foo.hs`是这样的：

```
ByteCodeLink: can't find label
During interactive linking, GHCi couldn't find the following symbol:
  bar
This may be due to you not asking GHCi to load extra object files,
archives or DLLs needed by your current session.  Restart GHCi, specifying
the missing library using the -L/path/to/object/dir and -lmissinglibname
flags, or simply by naming the relevant files on the GHCi command line.
Alternatively, this link failure might indicate a bug in GHCi.
If you suspect the latter, please send a bug report to:
  glasgow-haskell-bugs@haskell.org

### Failure in Foo.hs:41: expression `foo'
expected: [42]
 but got: 
          <interactive>:24:1: Not in scope: `bar'
Examples: 2  Tried: 2  Errors: 0  Failures: 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T09:07:57.563

Doctest 接受任意 GHC 标志。如果您想使用 FFI 代码运行 Doctest，您需要传递与使用该代码运行 GHCi 会话所需的完全相同的标志。例如看看[Doctest 驱动程序`unix-time`](https://github.com/kazu-yamamoto/unix-time/blob/master/test/doctests.hs)。

# ruby - “没有从零到整数的隐式转换”

> ID：12992877
> 
> 赞同：0
> 
> 时间：2012-10-20T21:31:03.030
> 
> 标签：ruby

我正在做我的第一个程序，一个简单的待办事项列表。我想让它让我输入一个数字，然后从列表中删除相应的项目。

不过，每次我都得到“没有从零到整数的隐式转换”。我似乎无法解决它。有任何想法吗？

```
$list = Array.new

def mainmethod
  puts "Enter new item, or type 'view' to view the list, 'delete' to delete items"
  input = gets.chomp

  if input.downcase == "view"
    puts "Your to do list is as follows:"
    puts $list

  elsif input.downcase == "delete"
    puts "Which item would you like to delete? (Enter a number)"
    deletenumber = gets.chomp.to_i
    deletenumber-=1
    delete_list = [deletenumber]
    delete_list.each do |del|
      $list.delete_at($list.index(del))
    end

  else
    $list << input
    puts "Added to list!"
  end
end

loop { mainmethod } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T21:34:53.783

当您尝试使用作为索引`TypeError: no implicit conversion from nil to integer`访问数组的元素时会发生错误。`nil`在您的情况下，它看起来像`delete_at`被传递为零：

```
[ 1, 2, 3 ].delete_at(nil)
# => TypeError: no implicit conversion from nil to integer 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T21:41:50.843

有关[正确](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-delete_at)使用`Array#delete_at`.

您所做的是`#index`使用您的数组不包含的数字进行调用。因此`$list.index(del)`将返回`nil`并且调用`#delete_at`将失败。

你需要做的是`$list.delete_at(del)`。

# compiler-construction - 使用 ILASM 将 IL 编译为 EXE 时失败

> ID：12992879
> 
> 赞同：1
> 
> 时间：2012-10-20T21:31:14.653
> 
> 标签：compiler-construction, compiler-errors, exe, il, ilasm

我花了几个小时试图找出问题所在。我知道该程序可以正常工作，因为我通过在 MonoDevelop 中调试 .il 进行了测试，但是我无法通过它进行编译。这是来自命令提示符的日志：

[http://pastebin.com/NYWAbrUV](http://pastebin.com/NYWAbrUV)

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-20T21:50:53.310

> 写入输出文件失败，错误码=0x80070005

0x80070005 是拒绝访问错误。您要么无权在目录中创建文件，要么试图覆盖在其他地方打开的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-25T16:41:50.223

我一直在尝试从书中编译一个示例。最终对我有用的是指定输出参数的完整路径。

```
ilasm c:\folder\codefile.il /output=c:\folder\outfile.exe 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-24T21:26:01.610

*仅适用于由于使用密钥文件进行签名而遇到*此问题的其他所有人：

由于无法访问的文件`0x80070005`不必是`.il`-file。就像在[这个](https://stackoverflow.com/a/62678639/3905529)答案中描述的那样，我必须授予我的用户权限到`C:\ProgramData\Microsoft\Crypto\RSA\MachineKeys`.

# amazon-web-services - 亚马逊产品广告 api：获取运费

> ID：12992881
> 
> 赞同：0
> 
> 时间：2012-10-20T21:31:28.863
> 
> 标签：amazon-web-services, amazon, product

我正在寻找使用广告 api 从亚马逊获取运费

我基本上在寻找什么可以在这里看到 [http://www.amazon.com/VGN-CR320E-VGN-FE550G-VGN-FE880E-VGN-FZ240E-VGN-SZ240P/dp/B003E2VP7I/](https://rads.stackoverflow.com/amzn/click/com/B003E2VP7I)

我正在寻找运输报价前。在上面的页面上是 $2.59 + $6.39 运费

是否可以使用 api 检索运费，我尝试使用 ResponseGroup as Large 和其他几个但它没有用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T19:35:18.700

PA-API 永远不会有这些信息。您可以通过 MWS 获取它，并将其用于所有销售和卖家相关信息。您可以在[http://developer.amazonservices.com](http://developer.amazonservices.com)注册，它是免费的。

# javascript - 如何发布我在 Rails 中遇到的一些问题的 jsfiddle 示例？

> ID：12992883
> 
> 赞同：2
> 
> 时间：2012-10-20T21:31:36.507
> 
> 标签：javascript, html, css, ruby-on-rails, jsfiddle

这可能是一个非常基本的问题，但是是否可以发布一个 jsfiddle 来捕获 Rails 环境、js、css 和 HTML 产生的问题？我在这里发布了另一个 SO 问题： [Unable to float a twitter bootstrap navbar item right with either class=pull-right or float:right](https://stackoverflow.com/questions/12992493/unable-to-float-a-twitter-bootstrap-navbar-item-right-with-either-class-pull-rig)

...并且有人建议我向 jsfiddle 发布一些内容。老实说，我完全不知道如何以可以复制粘贴到 jsfiddle 的方式收集 css、js 和 HTML。是否有一些巧妙的方法可以将 4 个必要的组件组合在一起？

我最感兴趣的是能够共享和调试与显示和布局相关的代码。

提前谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T13:43:08.727

像[jsfiddle](http://jsfiddle.net)和[jsbin](http://jsbin.com)这样的网站可用作测试涉及 HTML、CSS 和 JavaScript 的各种问题的测试平台。使用它们的一个好的工作流程可能如下：

1.  在访问其中一个站点之前，请使用浏览器调试器（Firebug、Chrome 调试器，如果必须的话，甚至可以使用现代版 IE 中的调试器）来找出问题的机制。您是否看到意外的 JavaScript 行为？奇怪的布局？不管是什么问题，看看你是否可以尽可能地缩小焦点。
2.  现在，转到其中一个工作台站点（也为自己创建一个帐户；这有助于找到旧的实验）并开始尝试重现问题。尽可能简单地开始并努力。这可能是困难和令人沮丧的，但以我的经验，即使是试图找出一个孤立的测试用例的过程本身也能带来启迪:-)
3.  如果您确实设法隔离了您不理解或无法解释的行为或其他任何行为，则可以保存测试用例（jsfiddle 具有“保存”和“更新”按钮；jsbin 似乎神奇地自动保存内容）和然后在此处（或其他任何地方）发布 URL。如果您确实在此处发布，最好将测试用例中的相关代码直接复制到您的问题中。

我使用这两个网站（可能还有更多）。jsbin 站点让您可以更好地控制页面，并提供一种在`<iframe>`. 如果您正在测试移动应用程序，这一点很重要。否则它们都是很好的资源。

哦，这两个站点都允许您通过简单的配置工具导入各种流行的库。这对于跟踪您认为可能由库版本更改引入的错误非常方便（很少见，但当它发生时真的很奇怪）。

# objective-c - 标签不会更改为自定义字体

> ID：12992884
> 
> 赞同：1
> 
> 时间：2012-10-20T21:31:37.220
> 
> 标签：objective-c, ios, fonts, uilabel

我正在尝试使用以下代码将标签设置为自定义字体。

```
cell.lblDataum.font = [UIFont fontWithName:@"Homenaje_Regular" size:10.0]; 
```

我在我的 .plist 中添加了这个字体。

```
<key>UIAppFonts</key>
<array>
        <string>Homenaje_Regular.ttf</string>
</array> 
```

但仍然没有成功。有谁能够帮助我？

亲切的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T21:39:59.060

*   您确定将`Homenaje_Regular.ttf`文件添加到 Xcode 项目**并将其添加到目标的 Copy File Build Rule**（检查器面板中目标名称旁边的复选框已选中？）以便在编译时将 TTF 文件复制到应用程序包中。
*   但更有可能的是，字体的名称可能不是`@"Homenaje_Regular"`. 您必须**使用真正的字体名称**作为参数，`fontWithName:`而**这并不总是与*文件*名**相同。

*在您的情况下，您的字体的真实名称可能是`"Homenaje-Regular"`或只是`"Homenaje"`而不是`"Homenaje_Regular"`。*

***您可以通过在 Mac 上的FontBook*中打开字体来获得字体的真实名称，然后只需按下`Cmd-I`即可获取该信息。**

您还可以在 iOS 应用程序中按代码列出所有可用字体，以确保您的应用程序正确检测到您的字体，并选择要使用的自定义字体的正确名称`fontWithName:`：

```
for ( NSString *familyName in [UIFont familyNames] )
{
    NSLog(@"=== Family %@ ===", familyName);
    NSLog(@"Names = %@", [UIFont fontNamesForFamilyName:familyName]);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T21:39:20.453

我相信，字体的名称是`Homenaje-Regular`，而不是文件名。

# selenium - Selenium 是否有相对的 CSS 定位器？

> ID：12992889
> 
> 赞同：4
> 
> 时间：2012-10-20T21:31:50.877
> 
> 标签：selenium, css-selectors, xpath

假设我在**#myPage**元素下寻找一些**div**元素。我的目标是使用 CSS 选择器并将搜索限制在**#myPage**后代。

 ****使用 Selenium XPath 定位器，我可以编写如下内容：

```
WebElement page = driver.findElement(new By.ById("myPage"));
....
List<WebElement> item = page.findElements(new By.ByXPath(".//div")); 
```

但是，尝试使用 CSS 会产生文档中的所有**div**，而不仅仅是**#myPage**的后代：

```
WebElement page = driver.findElement(new By.ById("myPage"));
....
List<WebElement> item = page.findElements(new By.ByCssSelector("div")); 
```

最大的区别`.//`在于使 XPath 表达式相对的前缀。我在 CSS 语法中找不到类似的属性，我想知道它是否可能。

PS
我知道我可以使用`#myPage > div`表达式，但是我将页面查找操作与其后代的查找结合起来，这并不总是可取的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T06:19:22.597

此功能尚不存在。在 Selectors API level 2 for DOM 中提出了一个类似的功能，并在 Selectors level 4 中编码为[relative selectors](https://drafts.csswg.org/selectors-4/#relative)，但我不知道 Selenium 是否会实现这样的功能。

如果您必须执行相对查找，那么 XPath 是您目前唯一的选择。****

# asp.net - 登录差异化

> ID：12992891
> 
> 赞同：0
> 
> 时间：2012-10-20T21:31:58.457
> 
> 标签：asp.net, c#-4.0

我正在编写我的第一个 Web 应用程序，出于安全原因需要用户登录，但我注意到在测试期间，一个用户输入的数据可能会出现在数据库中，就好像它来自另一个用户一样。这听起来可能很幼稚，但是远程服务器上的应用程序是否会混淆当时谁在使用它？（我知道我不是很清楚），如果有两个同时用户，根应用程序将如何决定谁在做什么？
我使用一个静态类来保存会员数据，以便在整个 Web 应用程序中都可以看到它。也许那里有问题？我已经编写桌面应用程序很长时间了，但这是我第一次编写“机房”远离桌面的应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T21:40:29.830

我不知道您的真实代码是什么样的，但您说的是“静态”，所以这是我首先想象的：

```
public class CurrentUser
{
   public static string UserName{get;set;}  
} 
```

上面的意思是 UserName 属性是为整个 AppDomain 共享的，在 ASP.NET 应用程序中是指整个网站（不包括同一 IIS 服务器上的其他网站）。所以会有一场比赛，看谁可以先设置值，但该值将被读取为最后写入的值。Joe 登录，Jack 登录，Joe 将记录写入数据库并检查获取 Jack 名字的静态值。

更合适的方法是设置[HttpContext User](http://msdn.microsoft.com/en-us/library/system.web.httpcontext.user.aspx)或[Thread User](http://www.hanselman.com/blog/SystemThreadingThreadCurrentPrincipalVsSystemWebHttpContextCurrentUserOrWhyFormsAuthenticationCanBeSubtle.aspx) **，这两者都可以在任何地方和任何引用 System.Web 的程序集中使用。您最好尽可能地依赖[FormsAuthentication](http://msdn.microsoft.com/en-us/library/xdt4thhy%28v=vs.100%29.aspx)和 Membership 功能。您可以在 Session 中存储名称，但 Session cookie 不如框架中提供的身份验证库安全。

** 即使您不引用 System.Web，线程用户也可用，但前提是您在身份验证时设置了线程用户。

# jquery - Ajax 创建 HTML 的 JQuery 函数？

> ID：12992893
> 
> 赞同：-1
> 
> 时间：2012-10-20T21:32:10.807
> 
> 标签：jquery, html, ajax

> **可能重复：**
> [jquery click 不适用于 ajax 生成的内容](https://stackoverflow.com/questions/9344306/jquery-click-doesnt-work-on-ajax-generated-content)

问题是我需要对`<a>`从 Ajax 获取的标签执行点击功能的 JQuery。我似乎找不到适合我的答案。

```
$("#get_button").click(function (e) {
   $.ajax({
     type: 'GET',
     url: 'http://someurl.com/apikey=1234124124',
     dataType: 'jsonp',
     success: function (data) {
       newRow = "<a id='some_id'>test</a>";
       $("#table_id").append(newRow);
     }
  });
});
$('#some_id').click(function (event) {
    event.preventDefault();
    alert('this will pop up if it worked');
}); 
```

为澄清而编辑：**在我的代码中，添加了多行带有 some_id 的 id，我忘记显示了。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T21:36:21.873

你真的需要在提问之前研究这些类型的问题，如果你使用的是较新的 jquery（我认为 1.6 及更高版本）它是：

```
$(document).on("click", '#some_id', function (event) {
    event.preventDefault();
    alert('this will pop up if it worked');
}); 
```

旧版本使用`.live()`而不是`.on()`

对于您问题中的编辑-不要有多个具有相同 id 的元素，给它们相同的类，您可以动态创建 id 并根据需要为每个元素添加一些内容，例如 #some_id0 #some_id1 等...

# c - 在没有 int i = 0 的情况下循环执行 n 次？

> ID：12992895
> 
> 赞同：0
> 
> 时间：2012-10-20T21:32:20.127
> 
> 标签：c, pointers, for-loop

对于家庭作业，我不允许使用任何变量，例如“int i = 0;” -- 只有指针。

问题是我需要做 n 次 - 比如说 10 次 - 但我想不出一个方法来做这件事 n 次没有 for 循环。它正在操作一个指向整数的指针，它不会以零结尾，但大小总是相同的（比如说 10）。

有没有办法在不使用整数来控制循环的情况下执行以下操作？

```
int i;
for (i = 0; i < 10; i++) {
    *(p + i) = 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-20T21:35:51.247

也许是这样的：

```
int *q = p + 10;
while (p != q) {
    *p++ = 0;
} 
```

更新：

这样做可以避免使用整数，只需识别开始 (p) 和结束 (p + 10)，然后迭代它们。它不适用于这种特殊情况，但很多时候您不知道（或需要知道）数组的大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T21:44:01.087

```
 #include <stdio.h>
      #include <stdlib.h>
      int main()
      {
        int *p = (int*)malloc(sizeof(int));
        for(*p = 0; *p < 10; (*p)++)
             printf("%d\n", (*p));

      } 
```

# javascript - 如何在 JavaScript 中使用 RegExp 提取字符串？

> ID：12992896
> 
> 赞同：0
> 
> 时间：2012-10-20T21:32:34.200
> 
> 标签：javascript, regex, extract, match

我想从字符串中提取一个 ID`<p>id = 22<p>\n<p>1\. iteration, 1\. task<p>`

和：

```
var str="<p>id = 22<p>\n<p>1\. iteration, 1\. task<p>";
var patt1=/<p>id = (.*)<p>/;
document.write(str.match(patt1)); 
```

但不知何故它返回到浏览器：

```
id = 22 
,22 
```

为什么这样？为什么是 2 场比赛？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T21:50:22.363

`()`是用于提取匹配部分的分组运算符。如果你只想提取 id 然后使用`str.match(patt1)[1]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T22:32:42.783

```
/<p>id[^<]+<p>/ 
```

似乎更适合您的任务。但是您的输入字符串非常混乱。不应该是一些 HTML 开闭标签序列吗？

# c# - RhinoMocks.GenerateMock 具有泛型，GetGenericArguments 为空

> ID：12992899
> 
> 赞同：1
> 
> 时间：2012-10-20T21:32:49.017
> 
> 标签：c#, unit-testing, reflection, rhino-mocks

谁能阐明我如何使用 RhinoMocks 实现这一目标？我想创建一个泛型类型的模拟（具有两个 TypeParams），并且在被测代码中我调用 GetType().GetGenericArguments()，需要两个类型。

例如，我希望通过以下测试，但它失败了：

```
 [Test]  
    public void Test()
    {
        // Mocking IDictionary<THash, T> fails, but new Dictionary<THash, T> passes
        var myMock = MockRepository.GenerateStub<IDictionary<int, float>>();
        var args = myMock.GetType().GetGenericArguments();
        Assert.That(args, Is.EquivalentTo(new Type[] {typeof(int), typeof(float)}));
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T21:38:58.293

您正在尝试获取没有声明的类型的泛型参数。您想要的是从它实现的*接口*中获取它。这只是一个粗略的例子，但它应该说明解决方案的想法：

```
myMock.GetType().GetInterfaces()
    .Single(x => x.Name.Contains("IDictionary")).GetGenericArguments(); 
```

在这里，我们正在寻找由具有名称的模拟实现的接口`IDictionary`（可能更好的是使用`.GetGenericTypeDefinition`against进行比较`typeof(IDictionary<,>)`）并从中获取通用参数。

为了完整起见，这里有一个更健壮（并且更简洁）的解决方案（虽然更难阅读）：

```
myMock.GetType().GetInterfaces()
    .Single(x => x.IsGenericType && 
                 x.GetGenericTypeDefinition() == typeof(IDictionary<,>))
    .GetGenericArguments(); 
```

# c - 自定义 make 命令

> ID：12992902
> 
> 赞同：1
> 
> 时间：2012-10-20T21:33:21.873
> 
> 标签：c

我想知道如何而不是跑步

```
gcc -std=c99 foo.c -o foo -lcs50 
```

我可以跑

```
make foo 
```

问题是当我只用`make`它说的命令尝试它时

```
cc     foo.c   -o foo
Undefined symbols for architecture x86_64:
  "_GetString", referenced from:
      _main in crypto-6PNyQP.o
ld: symbol(s) not found for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation)
make: *** [crypto] Error 1 
```

但是当我在使用命令时包含其他标志时，`gcc`它工作得很好。我正在上在线课程，他们只需输入即可`make foo`，他们的输出将是

```
jharvard@appliance (~/Desktop): make foo
gcc -ggdb -std=c99 -Wall -Werror    foo.c  -lcrypt -lcs50 -lm -o foo
jharvard@appliance (~/Desktop): 
```

我已经在谷歌搜索了一段时间，试图找到这个问题的答案，但仍然没有运气。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T22:34:24.100

使用 GNU `make`：

```
make CFLAGS=-std=c99 LDLIBS=-lcs50 foo 
```

或将这些宏放入 2 行`makefile`：

```
CFLAGS = -std=c99
LDLIBS = -lcs50 
```

对于您在上一个示例中显示的更复杂的选项：

```
CFLAGS = -ggdb -std=c99 -Wall -Werror
LDLIBS = -lcrypt -lcs50 -lm 
```

通过`makefile`这样的方式，您可以使用以下`xyz`代码从单个源文件构建任何程序`xyz.c`：

```
make xyz 
```

当您需要从多个源文件创建程序时，您将需要一个更复杂的`makefile`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T22:28:37.330

有一个讨论板（可通过 google 群组加入）专门回答与 CS50 设备配置有关的问题，这是我假设您正在运行的问题，因为您正在在线学习哈佛的 CS50。

CS50 in a Box（设备）应配置为当您键入 make 时，“正确”的事情会发生在最初的几个家庭作业中，这样您就不必立即担心编译的细节。

但是，如果它似乎不起作用，您可以向我上面提到的小组“cs50-discuss”发布一个问题。如果您（不明智地）使用自己的设置而不是设备，则可以简单地搜索如何制作“Makefile”，即运行程序“make”时读取的文本文件。拥有 Makefile 将允许您确保在调用“make”时正确调用要运行的命令。

# facebook-fql - 是否可以使用 FQL 获取用户提要？

> ID：12992905
> 
> 赞同：3
> 
> 时间：2012-10-20T21:33:42.943
> 
> 标签：facebook-fql, facebook-wall

是否可以使用 FQL 获取用户的提要？像 graph.facebook.com/user/feed 一样获得同样的效果

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-04T18:41:43.777

cpilko 的回答中提到的请求将为您提供当前用户的新闻源（即相当于 Graph API 的 /me/home）。因此，我认为这个答案不应该被接受。

至于当前用户的时间线（即相当于 Graph API 的 /me/feed）： 仅通过一个请求就无法轻松获取此信息，因为时间线包含不同的信息：

*   它包含当前用户的状态更新。
*   它包含其他用户针对当前用户的帖子。
*   它不包含当前用户针对其他用户、事件等的帖子。
*   它不包含当前用户既没有消息文本也没有附加照片、链接或地点的故事。*

*：我不能 100% 确定最后一个，因为这方面的信息充其量只是粗略的。有不同的帖子类型（我还没有看到完整的列表），并且似乎有某种逻辑，哪些类型显示在时间轴上，哪些类型不显示。正如我所说，文档是粗略的，Facebook 似乎不希望您获得与他们完全相同的数据。

现在回答您的问题：如果您打算将用户的时间线作为您的应用体验的一部分，您可能应该瞄准最佳猜测方法。

这是一个我发现非常接近的示例（除了它不会让您在时间轴上发布朋友的帖子，但正如我所说：最好的猜测）：

> ```
> SELECT post_id, actor_id, target_id, description, message, attachment, type, permalink
> FROM stream 
> WHERE source_id = me()
> AND is_hidden != "true"
> AND (type = 46 OR type = 60 OR type = 65 OR type = 80 OR type = 128 OR type = 247 OR type = 285 OR type = 373)
> LIMIT 100 
> ```

顺便说一句，这是迄今为止我找到的最完整的帖子类型列表： [在哪里可以获得所有 facebook 流帖子类型的列表？](https://stackoverflow.com/questions/12243641/where-to-get-a-list-of-all-facebook-stream-posts-types)

希望这会有所帮助，尽管诚然答案并不那么令人鼓舞。:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T14:54:43.547

FQL 中的等效表是[stream](https://developers.facebook.com/docs/reference/fql/stream/)。此查询为您获取活动用户的新闻提要。

SELECT post_id, actor_id, target_id, message FROM stream WHERE filter_key in (SELECT filter_key FROM stream_filter WHERE uid=me() AND type='newsfeed') AND is_hidden = 0

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T10:50:16.873

你应该这样做

```
SELECT post_id, created_time, actor_id, target_id, message FROM stream WHERE source_id='SOURCE_ID' AND created_time<1225705644 LIMIT 150 
```

使用您朋友的 ID 设置 SOURCE_ID。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-07T11:33:45.257

我认为您应该尝试以下方式：看看它是否有帮助。

```
SELECT post_id, actor_id, type, permalink, message, created_time, likes, comment_info FROM stream WHERE source_id = me() AND app_id = AppID 
```

如果您传递应用程序 ID，那么它将仅返回从该应用程序发布的您的朋友提要。

# php - 这段代码会生成无限循环吗？

> ID：12992906
> 
> 赞同：0
> 
> 时间：2012-10-20T21:33:44.717
> 
> 标签：php

我页面上的代码似乎没有加载 - 我认为程序逻辑有点多。

```
$resultromney = mysql_query("SELECT category, value, timestamp from results where name='".$chartname2."'");
if (!$resultromney) {
    die('Invalid query, please contact administrator');
}

$posromney = 0;
$negromney = 0;
$dateromney = "1/1/2012";
$romray = array();

while ($twitromney = mysql_fetch_assoc($resultromney)) 
{

$romneytime = intval($twitromney["timestamp"]);
$romneydate = date('m/d/Y', $romneytime);
$romlinearray = array();
$romlinearray["date"] = null;
$romlinearray["value"] = null;
$romneydiff = date_diff($dateromney, $romneydate);

$PLromney = 0;
$NLromney = 0;
$totalromney = 0;

if ($romneydiff == 0) {

switch ($twitromney["category"]) {
    case "composed":
        $PLromney = $PLromney + $twitromney["value"];
break;
    case "elated":
        $PLromney = $PLromney + $twitromney["value"];
break;
    case "clearheaded":
        $PLromney = $PLromney + $twitromney["value"];
break;
    case "agreeable":
        $PLromney = $PLromney + $twitromney["value"];
break;
    case "energetic":
        $PLromney = $PLromney + $twitromney["value"];
break;
    case "unsure":
        $NLromney = $NLromney + $twitromney["value"];
break;
    case "tired":
        $NLromney = $NLromney + $twitromney["value"];
break;
    case "depressed":
        $NLromney = $NLromney + $twitromney["value"];
break;
    case "guilty":
        $NLromney = $NLromney + $twitromney["value"];
break;
    case "confused":
        $NLromney = $NLromney + $twitromney["value"];
break;
    case "anxious":
        $NLromney = $NLromney + $twitromney["value"];
break;
    case "hostile":
        $NLromney = $NLromney + $twitromney["value"];
break;
    case "confident":
        $PLromney = $PLromney + $twitromney["value"];
break;
}
$totalromney = $PLromney - $NLromney;

$romlinearray["value"] = $totalromney + $romlinearray["value"];
}

else {

$dateromney = $romneydate;

switch ($twitromney["category"]) {
    case "composed":
        $PLromney = $PLromney + $twitromney["value"];
break;
    case "elated":
        $PLromney = $PLromney + $twitromney["value"];
break;
    case "clearheaded":
        $PLromney = $PLromney + $twitromney["value"];
break;
    case "agreeable":
        $PLromney = $PLromney + $twitromney["value"];
break;
    case "energetic":
        $PLromney = $PLromney + $twitromney["value"];
break;
    case "unsure":
        $NLromney = $NLromney + $twitromney["value"];
break;
    case "tired":
        $NLromney = $NLromney + $twitromney["value"];
break;
    case "depressed":
        $NLromney = $NLromney + $twitromney["value"];
break;
    case "guilty":
        $NLromney = $NLromney + $twitromney["value"];
break;
    case "confused":
        $NLromney = $NLromney + $twitromney["value"];
break;
    case "anxious":
        $NLromney = $NLromney + $twitromney["value"];
break;
    case "hostile":
        $NLromney = $NLromney + $twitromney["value"];
break;
    case "confident":
        $PLromney = $PLromney + $twitromney["value"];
break;
}
$totalromney = $PLromney - $NLromney;

$romlinearray["date"] = $romneydate;
$romlinearray["value"] = $totalromney;
}

$romray[] = $romlinearray;

} 
```

它应该用不同的数值计算不同日期的数组，但页面拒绝加载 - 但在我把这段代码放在那里之前它确实加载了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T22:00:51.913

这段代码可能可以用另一种方式编写。

建议：

请改用 MySQLi 或 PDO。这是一些[有关数据库 API 选择的文档](http://www.php.net/manual/en/mysqlinfo.api.choosing.php)。例子：

```
$mysqli = new mysqli("example.com", "user", "password", "database");
$result = $mysqli->query( 
   sprint_f("SELECT category, value, timestamp from results where name='%s'", $chartname2) 
); 
```

使用数组存储数据，得到结果后循环：

```
$romneytime = $romneydate = $romlinearray = $romneydiff = array();

while ($twitromney = $result->fetch_assoc()) 
{
    $romneytime[] = intval($twitromney["timestamp"]);
    $romneydate[] = date('m/d/Y', $romneytime);
    $romneydiff[] = date_diff($dateromney, $romneydate);
} 
```

循环每一个并尝试找出哪个给出错误。var_dump($var) 派上用场。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T21:52:13.620

为什么你在 switch case 中有重复的情况？

```
switch ($twitromney["category"]) {
    case "composed":
    $PLromney = $PLromney + $twitromney["value"];
break;
    case "elated":
    $PLromney = $PLromney + $twitromney["value"];
break;
    case "clearheaded":
    $PLromney = $PLromney + $twitromney["value"];
break;
    case "agreeable":
    $PLromney = $PLromney + $twitromney["value"];
break;
    case "energetic":
    $PLromney = $PLromney + $twitromney["value"];
break;
    case "unsure":
    $NLromney = $NLromney + $twitromney["value"];
break;
    case "tired":
    $NLromney = $NLromney + $twitromney["value"];
break;
    case "depressed":
    $NLromney = $NLromney + $twitromney["value"];
break;
    case "guilty":
    $NLromney = $NLromney + $twitromney["value"];
break;
    case "confused":ss
    $NLromney = $NLromney + $twitromney["value"];
break;
    case "anxious":
    $NLromney = $NLromney + $twitromney["value"];
break;
    case "hostile":
    $NLromney = $NLromney + $twitromney["value"];
break;
    case "confident":
    $PLromney = $PLromney + $twitromney["value"];
break;
} 
```

而不是上面的使用：

```
switch ($twitromney["category"]) {
    case "composed":
    case "elated":
    case "clearheaded":
    case "agreeable":
    case "energetic":
    case "confident":
    $PLromney = $PLromney + $twitromney["value"];
break;
    case "unsure":
    case "tired":
    case "depressed":
    case "guilty":
    case "confused":
    case "anxious":
    case "hostile":
    $NLromney = $NLromney + $twitromney["value"];
break;
} 
```

我已修改您的代码以检查所有 DUMPS，请查看下面的 ant 测试转储：

```
 $resultromney = mysql_query("SELECT category, value, timestamp from results where name='".$chartname2."'")

    var_dump('[1]:'.$resultromney);

    if (!$resultromney) {
        die('Invalid query, please contact administrator');
    }

    $posromney = 0;
    $negromney = 0;
    $dateromney = "1/1/2012";
    $romray = array();

    while ($twitromney = mysql_fetch_assoc($resultromney)) 
    {

        var_dump('[2]:'.$twitromney);

    $romneytime = intval($twitromney["timestamp"]);

        var_dump('[3]:'.$romneytime);   

    $romneydate = date('m/d/Y', $romneytime);

        var_dump('[4]:'.$romneydate);   

    $romlinearray = array();
    $romlinearray["date"] = null;
    $romlinearray["value"] = null;

        var_dump('[5]:'.$romlinearray); 

    $romneydiff = date_diff($dateromney, $romneydate);

        var_dump('[6]:'.$romneydiff);   

    $PLromney = 0;
    $NLromney = 0;
    $totalromney = 0;

    if ($romneydiff == 0) {

        var_dump('[7]:'.$romneydiff);   

    switch ($twitromney["category"]) {

        var_dump('[8]:'.$twitromney);   

        case "composed":
        case "elated":
        case "clearheaded":
        case "agreeable":
        case "energetic":
        case "confident":
        $PLromney = $PLromney + $twitromney["value"];
    break;
        case "unsure":
        case "tired":
        case "depressed":
        case "guilty":
        case "confused":
        case "anxious":
        case "hostile":
        $NLromney = $NLromney + $twitromney["value"];
    break;
    }

        var_dump('[8]:'.$PLromney);
        var_dump('[9]:'.$NLromney);

    $totalromney = $PLromney - $NLromney;

    $romlinearray["value"] = $totalromney + $romlinearray["value"];

        var_dump('[10]:'.$totalromney, $romlinearray);

    }

    else {

    $dateromney = $romneydate;

    switch ($twitromney["category"]) {

        var_dump('[11]:'.$twitromney);  

        case "composed":
        case "elated":
        case "clearheaded":
        case "agreeable":
        case "energetic":
        case "confident":
        $PLromney = $PLromney + $twitromney["value"];
    break;
        case "unsure":
        case "tired":
        case "depressed":
        case "guilty":
        case "confused":
        case "anxious":
        case "hostile":
        $NLromney = $NLromney + $twitromney["value"];
    break;
    }

        var_dump('[12]:'.$PLromney);
        var_dump('[13]:'.$NLromney);

    $totalromney = $PLromney - $NLromney;

    $romlinearray["date"] = $romneydate;
    $romlinearray["value"] = $totalromney;

        var_dump('[14]:'.$totalromney, $romlinearray);

    }

    $romray[] = $romlinearray;

    var_dump('[15]:'.$romray);

    } 
```

@Tivie 说这段代码可以写得更好，是的，确实如此。少写，多做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T21:43:03.240

很可能是一个错误。

在 /var/logs/apache2/error_log.log 查看您的 apache 的 php 日志（或您正在使用的任何日志）

或者类似的东西...

# python - 将对象的字符串表示形式与列表中每个对象的字符串表示形式进行比较

> ID：12992914
> 
> 赞同：0
> 
> 时间：2012-10-20T21:34:55.837
> 
> 标签：python, oop

是否有一种简单的方法可以将对象的字符串表示形式与列表中的每个对象进行比较？

下面的示例代码（Python 2.7）按预期工作，但我认为在 Python 中有更好的方法来做到这一点！

```
class url(object):
    def __init__(self, address):
       self.address = address

    def __str__(self):
        return self.address

list_of_urls = [url('http://www.example.foo'), url('http://www.example.bar')]
test_url = url('http://www.example.foobar')

test_url_listed = False
for link in list_of_urls:
    if str(test_url) == str(link):
        test_url_listed = True

if not test_url_listed:
    list_of_urls.append(test_url) 
```

是否可以使其在结构上更接近以下内容？

```
if test_url not in list_of_urls:
    list_of_urls.append(test_url) 
```

（事实上​​，这失败了，因为它比较的是对象而不是它们所代表的字符串。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T21:56:01.170

最快的方法是实现该`__cmp__`方法。

```
class url(object):
    def __init__(self, address):
       self.address = address

    def __str__(self):
        return self.address

    def __cmp__(self, other):
        return cmp(self.address, other.address)

list_of_urls = [url('http://www.example.foo'), url('http://www.example.bar')]
test_url = url('http://www.example.foobar') 
```

这在：

```
if test_url not in list_of_urls:
    print("Not in") 
```

打印“不在”。

或者，您可以使用“丰富”的比较，但这需要更多的努力。类`total_ordering`方法可以提供帮助。

```
from functools import total_ordering

@total_ordering
class url(object):
    def __init__(self, address):
       self.address = address

    def __str__(self):
        return self.address

    def __eq__(self, other):
        return self.address == other.address

    def __lt__(self, other):
        return self.address < other.address 
```

这使得所有比较都使用名为“address”的字符串属性。但是，如果您比较其他对象，这将失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T21:36:34.883

```
if str(test_url) not in [str(url) for url in list_of_urls] 
```

或者更好的是，在 url 类上实现[`__cmp__`](http://docs.python.org/reference/datamodel.html#object.__cmp__)和/或[`__eq__`](http://docs.python.org/reference/datamodel.html#object.__eq__)+ 。[`__ne__`](http://docs.python.org/reference/datamodel.html#object.__ne__)（可能还有[`__hash__`](http://docs.python.org/reference/datamodel.html#object.__hash__)。）然后您可以创建一个`set`url，它会自动确保没有重复的 url。

# c++ - C ++从函数返回指向数组的指针的正确方法

> ID：12992925
> 
> 赞同：30
> 
> 时间：2012-10-20T21:36:03.150
> 
> 标签：c++, arrays, function, pointers

我对 C++ 相当陌生，并且一直在避免使用指针。根据我在网上阅读的内容，我无法返回数组，但可以返回指向它的指针。我做了一个小代码来测试它，想知道这是否是正常/正确的方法：

```
#include <iostream>
using namespace std;

int* test (int in[5]) {
    int* out = in;
    return out;
}

int main() {
    int arr[5] = {1, 2, 3, 4, 5};
    int* pArr = test(arr);
    for (int i = 0; i < 5; i++) cout<<pArr[i]<<endl;
    cout<<endl;
    return 0;
} 
```

* * *

**编辑**：这似乎不好。我应该如何重写它？

```
int* test (int a[5], int b[5]) {
    int c[5];
    for (int i = 0; i < 5; i++) c[i] = a[i]+b[i];
    int* out = c;
    return out;
} 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-20T21:54:21.623

您的代码是正确的，但我很难弄清楚它如何/将如何在现实世界的场景中使用。话虽如此，请注意从函数返回指针时的一些注意事项：

*   当您使用 syntax 创建数组时`int arr[5];`，它会分配在堆栈上并且是函数本地的。
*   C++ 允许您返回指向此数组的指针，但在其本地范围之外使用此指针指向的内存是***未定义的行为。***[使用现实世界的类比](https://stackoverflow.com/questions/6441218/can-a-local-variables-memory-be-accessed-outside-its-scope)阅读这个很好的答案，以获得比我所能解释的更清晰的理解。
*   如果您可以保证数组的内存没有被清除，您仍然可以在范围之外使用该数组。在您的情况下，当您传递`arr`到`test()`.
*   如果您想在不担心内存泄漏的情况下传递指向动态分配数组的指针，您应该阅读`std::unique_ptr`/ `std::shared_ptr<>`。

**编辑 - 回答矩阵乘法的用例**

你有两个选择。天真的方法是使用`std::unique_ptr`/ `std::shared_ptr<>`。现代 C++ 方法是拥有一个`Matrix`重载类，如果要避免复制乘法结果以使其脱离函数，则`operator *`绝对必须使用新类。`rvalue references`除了拥有`copy constructor`,`operator =`和之外`destructor`，您还需要拥有`move constructor`和`move assignment operator`。[仔细阅读此搜索](https://stackoverflow.com/questions/tagged/rvalue-reference+move-semantics?sort=votes)的问题和答案，以更深入地了解如何实现这一目标。

**编辑 2 - 对附加问题的回答**

```
int* test (int a[5], int b[5]) {
    int *c = new int[5];
    for (int i = 0; i < 5; i++) c[i] = a[i]+b[i];
    return c;
} 
```

如果您将其用作`int *res = test(a,b);`，那么稍后在您的代码中，您应该调用`delete []res`以释放`test()`函数中分配的内存。您现在看到的问题是手动跟踪何时调用`delete`. 因此，答案中概述了如何处理它的方法。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-10-20T22:00:18.903

你的代码没问题。请注意，如果您返回一个指向数组的指针，并且该数组超出范围，则不应再使用该指针。例子：

```
int* test (void)
{
    int out[5];
    return out;
} 
```

以上将永远不会工作，因为返回`out`时不再存在`test()`。不能再使用返回的指针。如果你*确实*使用它，你将读/写你不应该的内存。

在您的原始代码中，数组在返回`arr`时超出范围。`main()`显然这没问题，因为从返回`main()`也意味着您的程序正在终止。

如果你想要一些可以保留并且不能超出范围的东西，你应该分配它`new`：

```
int* test (void)
{
    int* out = new int[5];
    return out;
} 
```

返回的指针将始终有效。请记住，当你完成它时再次删除它，使用`delete[]`：

```
int* array = test();
// ...
// Done with the array.
delete[] array; 
```

删除它是回收它使用的内存的唯一方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-20T22:09:13.693

新问题的新答案：

您不能`int c[5]`从函数返回指向自动变量 ( ) 的指针。自动变量以返回封闭块（在这种情况下为函数）结束其生命周期 - 因此您将返回指向不存在数组的指针。

要么让你的变量动态：

```
int* test (int a[5], int b[5]) {
    int* c = new int[5];
    for (int i = 0; i < 5; i++) c[i] = a[i]+b[i];
    return c;
} 
```

或更改您的实现以使用`std::array`：

```
std::array<int,5> test (const std::array<int,5>& a, const std::array<int,5>& b) 
{
   std::array<int,5> c;
   for (int i = 0; i < 5; i++) c[i] = a[i]+b[i];
   return c;
} 
```

如果您的编译器没有提供`std::array`，您可以用包含数组的简单结构替换它：

```
struct array_int_5 { 
   int data[5];
   int& operator [](int i) { return data[i]; } 
   int operator const [](int i) { return data[i]; } 
}; 
```

* * *

旧问题的旧答案：

你的代码是正确的，而且......嗯，嗯，......没用。由于可以将数组分配给没有额外功能的指针（请注意，您已经在函数中使用了它）：

```
int arr[5] = {1, 2, 3, 4, 5};
//int* pArr = test(arr);
int* pArr = arr; 
```

您的功能的更多签名：

```
int* test (int in[5]) 
```

相当于：

```
int* test (int* in) 
```

所以你看它没有意义。

然而，这个签名需要一个数组，而不是指针：

```
int* test (int (&in)[5]) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-20T22:15:00.960

引用数组的变量基本上是指向其第一个元素的指针，所以是的，您可以合法地返回指向数组的指针，因为**它们本质上是相同的**。自己检查一下：

```
#include <assert.h>

int main() {
  int a[] = {1, 2, 3, 4, 5}; 

  int* pArr = a;
  int* pFirstElem = &(a[0]);

  assert(a == pArr);
  assert(a == pFirstElem);

  return 0;
} 
```

这也意味着*将*数组传递给函数应该通过指针（而不是通过`int in[5]`）完成，并且可能与数组的长度一起完成：

```
int* test(int* in, int len) {
    int* out = in;
    return out;
} 
```

也就是说，你说得对，使用指针（没有完全理解它们）是非常危险的。例如，引用在堆栈上分配并超出范围的数组会产生*未定义的行为*：

```
#include <iostream>

using namespace std;

int main() {
  int* pArr = 0;
  {
    int a[] = {1, 2, 3, 4, 5};
    pArr = a; // or test(a) if you wish
  }
  // a[] went out of scope here, but pArr holds a pointer to it

  // all bets are off, this can output "1", output 1st chapter
  // of "Romeo and Juliet", crash the program or destroy the
  // universe
  cout << pArr[0] << endl; // WRONG!

  return 0;
} 
```

因此，如果您觉得不够胜任，请使用`std::vector`.

**[回答更新的问题]**

`test`编写函数的正确方法是：

```
void test(int* a, int* b, int* c, int len) {
  for (int i = 0; i < len; ++i) c[i] = a[i] + b[i];
}
...
int main() {
   int a[5] = {...}, b[5] = {...}, c[5] = {};
   test(a, b, c, 5);
   // c now holds the result
} 
```

或者这个（使用`std::vector`）：

```
#include <vector>

vector<int> test(const vector<int>& a, const vector<int>& b) {
  vector<int> result(a.size());
  for (int i = 0; i < a.size(); ++i) {
    result[i] = a[i] + b[i];
  }
  return result; // copy will be elided
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-20T22:18:00.293

您的代码（看起来不错）没有返回指向数组的指针。它返回一个指向数组*第一个元素的指针。*

事实上，这通常是你想要做的。大多数数组的操作是通过指向单个元素的指针完成的，而不是通过指向整个数组的指针。

您*可以*定义一个指向数组的指针，例如：

```
double (*p)[42]; 
```

定义`p`为指向`double`s 的 42 元素数组的指针。一个大问题是您必须将数组中元素的数量指定为类型的一部分——并且该数字必须是编译时常量。大多数处理数组的程序都需要处理不同大小的数组；给定数组的大小在创建后不会发生变化，但其初始大小不一定在编译时已知，并且不同的数组对象可以具有不同的大小。

指向数组第一个元素的指针使您可以使用指针算术或索引运算符`[]`来遍历数组的元素。*但是*指针并没有告诉你数组有多少元素。您通常必须自己跟踪。

如果一个函数需要*创建*一个数组并返回一个指向其第一个元素的指针，您必须自己管理该数组的存储，方法有多种。您可以让调用者传递一个指向数组对象（的第一个元素）的指针，可能连同另一个指定其大小的参数——这意味着调用者必须知道数组需要多大。或者函数可以返回指向函数内部定义的静态数组（的第一个元素）的指针——这意味着数组的大小是固定的，并且同一个数组将被第二次调用函数破坏。或者函数可以在堆上分配数组——这使得调用者负责稍后释放它。

到目前为止，我所写的所有内容都是 C 和 C++ 通用的，实际上它更像是 C 风格而不是 C++。[comp.lang.c FAQ](http://www.c-faq.com/)的第 6 节讨论了 C 中数组和指针的行为。

但是，如果您使用 C++ 编写代码，那么使用 C++ 惯用语可能会更好。例如，C++ 标准库提供了许多定义容器类的头文件，例如`<vector>`和`<array>`，它们将为您处理大部分此类内容。除非您有特殊的理由使用原始数组和指针，否则最好只使用 C++ 容器。

**编辑：**我想你在我输入这个答案时编辑了你的问题。作为观察者，您问题末尾的新代码不好；它返回一个指向对象的指针，该对象在函数返回后立即停止存在。我想我已经涵盖了替代方案。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-20T23:02:57.290

你可以（有点）返回一个数组

代替

```
int m1[5] = {1, 2, 3, 4, 5};
int m2[5] = {6, 7, 8, 9, 10};
int* m3 = test(m1, m2); 
```

写

```
struct mystruct
{
  int arr[5];
};

int m1[5] = {1, 2, 3, 4, 5};
int m2[5] = {6, 7, 8, 9, 10};
mystruct m3 = test(m1,m2); 
```

测试的样子

```
struct mystruct test(int m1[5], int m2[5])
{
  struct mystruct s;
  for (int i = 0; i < 5; ++i ) s.arr[i]=m1[i]+m2[i];
  return s;
} 
```

效率不是很高，因为复制它会提供数组的副本

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-20T22:08:21.480

在实际应用中，返回数组的方式是**使用 out 参数**调用的。当然你实际上不必返回一个指向数组的指针，因为调用者已经有了它，你只需要填写数组。传递另一个指定数组大小的参数也很常见，以免溢出。

使用 out 参数的缺点是调用者可能不知道数组需要多大才能存储结果。在这种情况下，您可以返回 std::vector 或类似的数组类实例。

# javascript - 在新的 Javascript 框架中更改语法

> ID：12992928
> 
> 赞同：0
> 
> 时间：2012-10-20T21:36:14.220
> 
> 标签：javascript, javascript-framework

上个月 Boredom 占了上风，从那时起我就一直在为 JavaScript 开发一个库。我已经阅读了大约 20 多年的教程和大量文档。

现在我有了一个很小、简单（但可以工作）的库，我想更改编写代码时使用的语法。

我想我可能刚刚找到了一种方法。或者，更有可能的是，我可能刚刚对以下行感到尴尬，并提出问题：

```
string     = new String('string'); 
```

那里的那条线；它会创建一个新`type`的类型`string`并调用它`string`吗？还是那条线做了其他事情，还是与以下内容基本相同：

```
string string = "hey"; 
```

我问的原因是，我有兴趣学习如何改变事物。我希望能够在我的小型 js 库中声明这样的新字符串：

```
txt someString = "hey"; 
```

...`txt`数据类型“字符串”在哪里。

然后像这样使用它：

```
if(someString == "hey") { return true; } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T21:40:37.567

`string = new String('string');``String`创建一个具有内部值（字符串[原始值]）的新对象（作为 instanceof ） `"string"`，并将其分配给标识符名为“字符串”的变量。JavaScript 中的第二行和第三行无效。

```
> var strObj = new String("string");
> var strVal = "string";
> typeof strObj
"object"
> typeof strVal
"string"
> strObj == strVal
true
> strObj === strVal
false
> strObj instanceof String
true
> strVal instanceof String
false 
```

通常，您永远不需要`String`实例。如果您在 JS 中访问字符串值的方法，它们会自动强制转换为对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T07:34:30.587

```
txt someString = "hey"; 
```

您不能更改 Javascript 的语法。如果你真的想这样做，你将不得不编写自己的编程语言。请参阅[学习编写编译器](https://stackoverflow.com/questions/1669/learning-to-write-a-compiler)。如果您希望这种编程语言可以在 Web 浏览器中使用，您需要将您的语言编译为 Javascript。[CoffeeScript](https://github.com/jashkenas/coffee-script)正是这样一种语言。

# css - 使用 sprite 构建 css 图像

> ID：12992931
> 
> 赞同：0
> 
> 时间：2012-10-20T21:36:36.600
> 
> 标签：css, css-sprites

我正在尝试使用 css sprites 创建一个动态图标。这是我不断得到的：

![在此处输入图像描述](../Images/924915b68db441d673473efb788f7aa9.png)

所以我实际上有几个关于出了什么问题的问题：

1.  为什么图标（带叉号的框）没有与紫色框重叠？
2.  为什么紫色框之间有 2px 的空间？

**编辑**

这是一个 jsFiddle：http: [//jsfiddle.net/hWhUb/](http://jsfiddle.net/hWhUb/)

这是我正在使用的相关 css：

```
.icon {
    position: relative;
    width: 87px;
}

.icon .icon-type {
    position: absolute;
    left: 0;
}

.icon .brigade, .icon .icon-type {
    background-image: url('img/play/splitbrigades.png');
}

.icon-hero {
    width: 87px;
    height: 71px;
    background-position: -11px -11px;
    background-repeat: no-repeat;
}

.brigade-purple-left {
    width: 27px;
    height: 71px;
    background-position: -287px -12px;
    display: inline-block;
    background-repeat: no-repeat;
}

.brigade-purple-middle {
    width: 30px;
    height: 71px;
    background-position: -334px -12px;
    display: inline-block;
    background-repeat: no-repeat;
}

.brigade-purple-right {
    width: 28px;
    height: 71px;
    background-position: -384px -12px;
    display: inline-block;
    background-repeat: no-repeat;
} 
```

和html：

```
<div class="icon">
    <div class="brigade brigade-purple-left">&nbsp;</div>
    <div class="brigade brigade-purple-middle" style="width: 22px;">&nbsp;</div>
    <div class="brigade brigade-purple-right">&nbsp;</div>
    <div class="icon-type icon-hero">&nbsp;</div>
</div> 
```

谁能向我解释我做错了什么，以及如何以更好的方式（如果可能）实现我的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T21:59:56.020

你应该使用这个。它必须包含顶部。

```
 .icon .icon-type   { position: absolute; left: 0; top:0} 
```

居住 ：

[http://jsfiddle.net/hWhUb/1/](http://jsfiddle.net/hWhUb/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T22:00:36.483

添加`float: left`到`.icon .brigade`

```
.icon .brigade {
    float: left;
    margin: 0;
} 
```

这应该可以解决您需要的所有问题，或者让您在正确的地方完成它！

紫色框之间的间距是因为您正在使用`display: inline-block;`这些 div 之间的标记中的空白空间，生成该间距。

该图标未呈现在框“上方”，因为它缺少`top: 0;`声明

# android - 如何从android中动态创建的LinearLayout中获取值

> ID：12992932
> 
> 赞同：0
> 
> 时间：2012-10-20T21:36:52.997
> 
> 标签：android

我是安卓新手。最近开始学习。

我已经动态创建了一个 LinearLayout。我在 LinearLayout 中有以下字段： 1\. 客户名称 2\. 编辑按钮 3\. 删除按钮。

方向是水平的。

现在我想在单击删除按钮时删除一条记录。在这种情况下如何获取行 ID，然后我可以传递给数据库以删除记录。这是代码。

```
user_list_view_item_row.xml

<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:orientation="horizontal"
   android:layout_width="fill_parent"
   android:layout_height="fill_parent"
   android:background="@drawable/bg_main"
   >

    <TextView android:id="@+id/txtTitle"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:gravity="center_vertical"
        android:textStyle="bold"
        android:textSize="50dp"
        android:textColor="#FFFFFF"
        android:layout_marginTop="5dp"
        android:layout_marginBottom="5dp" />

        <Button
            android:id="@+id/userListEditButton"
            style="@style/SpecialText"
            android:layout_width="50dp"
            android:layout_height="50dp"  
            android:typeface="monospace"          
            android:text="@string/save" 
            android:layout_marginTop="5dp"
            android:layout_marginBottom="5dp" />

        <Button
            android:id="@+id/userListDeleteButton"
            style="@style/SpecialText"
            android:layout_width="50dp"
            android:layout_height="50dp"  
            android:typeface="monospace"          
            android:text="@string/reset" 
            android:layout_marginTop="5dp"
            android:layout_marginBottom="5dp" />
    </LinearLayout>

UserAdapter.java

package com.rad.mobileshop.activities;

import java.sql.SQLException;

import android.app.Activity;
import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.TextView;

import com.rad.mobileshop.common.entities.User;
import com.rad.mobileshop.db.DBAdapter;

public class UserAdapter extends ArrayAdapter<User> {

    Context context;
    int layoutResourceId;
    User data[] = null;
    private DBAdapter mdb;

    public UserAdapter(Context context, int layoutResourceId, User[] data) {
        super(context, layoutResourceId, data);
        this.layoutResourceId = layoutResourceId;
        this.context = context;
        this.data = data;
        mdb = new DBAdapter(context);
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View row = convertView;
        UserHolder holder = null;

        if (row == null) {
            LayoutInflater inflater = ((Activity) context).getLayoutInflater();
            row = inflater.inflate(layoutResourceId, parent, false);

            holder = new UserHolder();
            holder.txtTitle = (TextView) row.findViewById(R.id.txtTitle);
            holder.editButton = (Button) row
                    .findViewById(R.id.userListEditButton);
            holder.deleteButton = (Button) row
                    .findViewById(R.id.userListDeleteButton);

            row.setTag(holder);
        } else {
            holder = (UserHolder) row.getTag();
        }

        User user = data[position];     
        holder.txtTitle.setText(user.getName());
        holder.editButton.setText("Edit");
        holder.deleteButton.setText("Delete");

        holder.editButton.setOnClickListener(new OnClickListener() {
            public void onClick(View view) {
                System.out.println("hello Edit");
            }
        });

        holder.deleteButton.setOnClickListener(new OnClickListener() {
            public void onClick(View view) {
                System.out.println("hello delete ");
            }
        });     

        return row;
    }

    private void deleteUserDetails(int userId) {
        try {

            mdb.open();
            mdb.deleteUserDetails(userId);

        } catch (SQLException e1) {
            e1.printStackTrace();
        }
    }

    static class UserHolder {
        TextView txtTitle;
        Button editButton;
        Button deleteButton;
    }
}

User.java

package com.rad.mobileshop.common.entities;

public class User {
    private int id;
    private String name;
    private String type;

    public User() {
        super();
    }

    public User(int id, String name, String type) {
        super();
        this.id = id;
        this.name = name;
        this.type = type;
    }

    public int getId() {
        return id;
    }

    public void setId(int id) {
        this.id = id;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getType() {
        return type;
    }

    public void setType(String type) {
        this.type = type;
    }

    @Override
    public String toString() {
        return this.name ;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T22:13:58.523

**首先**，您需要将`User[]`数组更改为 ArrayList，因为您无法动态删除原始数组的元素。（至少不那么容易，并且 ArrayAdapter 已经设计为在这种情况下与 ArrayList 一起使用。）

**接下来**让我们保存位置以便于访问`deleteButton`：`getView()`

```
holder.deleteButton.setTag(position); 
```

**最后**将此添加到您的删除 OnClickListener：

```
public void onClick(View view) {
    User user = getItem((Integer) view.getTag()));
    remove(user);
    deleteUserDetails(user.getId());
} 
```

有一些我没有涉及的小调整，比如更改 UserAdapter 的构造函数和`data[position]`in `getView()`，但它们很容易修复。

* * *

可选建议：

*   您应该在构造函数中只创建一个 LayoutInflater 并简单地在`getView()`
*   您不需要`data`在 UserAdapter 中存储副本，它已经存储在 ArrayAdapter 中，只需使用`getItem(position)`.
*   `getView()`您可以通过将每个不会更改的命令移动到`if(row == null)`块中来简化。

综上所述，如果您使用数据库，我不确定为什么要扩展 ArrayAdapter。我建议切换到自定义 CursorAdapter，但这不是必需的。

# c - 分叉和多处理

> ID：12992934
> 
> 赞同：0
> 
> 时间：2012-10-20T21:37:00.200
> 
> 标签：c, fork

```
#include <stdio.h>
#include <sys/types.h>
#include <unistd.h>
int main() {
    int p;
    p = fork();
    if (fork()==0) {
        if (execl("/bin/echo", "/bin/echo", "foo", 0) == -1) {
            fork();
        }
        printf("bar\n");
    }
    else {
        if (p!=0) execl("/bin/echo", "/bin/echo", "baz", 0);
        }
} 
```

为什么这个程序打印 baz foo foo 而不是 bar foo baz？在 p=fork() 我创建了一个孩子。父母去 else{} 并打印 baz。然后在 if(fork()==0) 行中创建了一个孙子。所以孙子进入并打印 foo。它也应该打印吧？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T21:40:04.823

这些`exec*`函数用新程序*替换*了进程，所以`execl`调用之后的代码永远不会运行。

# iphone - Cocos2d 如何绘制 3D 图像并进行旋转？

> ID：12992936
> 
> 赞同：3
> 
> 时间：2012-10-20T21:37:22.057
> 
> 标签：iphone, ios, opengl-es

我是目标 c 的新手，在我的应用程序中我必须绘制 3D 图像（如纸盒男孩）并使用 OpenGL ES 框架在 X 轴、Y 轴和 z 轴上旋转它我如何绘制图像。有人帮我谢谢提前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T02:48:56.963

如果您在 cocos2d 项目中制作 3D 游戏，则必须使用另一个框架（如 cocos3d）或像您所说的使用 OpenGL 框架加载 3D 部分。

cocos3D [http://brenwill.com/cocos3d/](http://brenwill.com/cocos3d/)与 cocos2d 一起工作很容易，并且允许您加载 3d 对象并以您想要的方式使用它们。

OpenGL 框架将更难理解和使用，但会根据您想要的结果为您提供更大的灵活性。

[我会通过在像Blender](http://www.blender.org/)这样的开源（和免费）软件中创建 3D 对象并将它们加载到 cocos3d 项目中来解决你的问题，从那里以你想要的方式操作它们的方式相当容易。

# c++ - 用声明时的值初始化二维向量

> ID：12992939
> 
> 赞同：2
> 
> 时间：2012-10-20T21:37:45.867
> 
> 标签：c++, vector, initialization

我目前正在开发一个随机生成物品（例如武器、盔甲等）的程序，我想制作一个全局常量向量，其中包含所有可以赋予物品的名称。我想在我的所有其他类都可以使用的头文件中拥有这个 2D 向量（但不可修改），所以我需要在声明时对其进行初始化。

我以前使用过以下内容：

```
static const std::string v[] =
{
    "1.0", "1.1", "1.2", "null"
};
const std::vector<std::string> versions( v, v+sizeof( v)/sizeof( v[0])); 
```

这适用于一维向量，但是我想使用二维向量来存储项目名称。

我尝试过使用以下内容，但这意味着我没有成员函数（例如 size()）：

```
static const std::string g_wn_a[] = { "Spear", "Lance", "Jouster" };
static const std::string g_wn_b[] = { "Sword", "Broadsword", "Sabre", "Katana" };
const std::string* g_weapon_names[] = { g_wn_a, g_wn_b }; 
```

我也不想使用类来存储所有名称，因为我觉得每次我想使用它们时都创建变量来存储所有名称是低效的。

有谁知道我可以如何解决我的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T21:44:34.980

你可以使用一个有`const static`成员的类。这样，您的类的行为就像一个命名空间，您不必创建名称持有类的实例来使用这些名称。

```
struct MyNames {
    // const static things
    const static string myweapon = "Katana"
};

string s = MyNames::myweapon; // s = "Katana" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T21:47:48.483

这是 C++，所以最常见的方法是编写一个在其构造函数中执行此操作的类，然后创建该类的 const 对象。然后，您的类将提供各种成员函数来查询它维护的各种项目。

作为奖励，这将使您的其余代码更容易使用各种项目。

# c# - 为什么这个while循环会卡住？

> ID：12992940
> 
> 赞同：0
> 
> 时间：2012-10-20T21:38:00.337
> 
> 标签：c#, while-loop, do-while

我刚刚写了一个简单的 c# 代码来计算一个数字的阶乘，但是程序卡在了姓氏上。有人可以为什么它卡住了吗？

谢谢，

欧敏

```
using System;

//1\. Write a program which finds the factorial of a number entered by the user.

namespace Beginner1{

class ProblemOne
{
    static void Main (string[] args)
    {
        bool play = true;
        while ( play ) {
            Console.Write ("Type in the number you would like to find Factorial of: ");
            int num = Convert.ToInt16( Console.ReadLine ());
            int sum = 1;
            for (int i = 2; i <= num; i++) {
                sum = sum * i;
            }
            Console.WriteLine ("The Factorial of {0} is {1}", num, sum);
            Console.Write ( "Would you like to play again? (Y or N): " );
            string ans = Console.ReadLine();
            do {
                if( ans == "Y" || ans == "y" )  {
                    play = true;
                    //break;
                }
                else if( ans == "N" || ans == "n" ) {
                    play = false;
                    //break;
                }
                else
                {
                    Console.Write( "You have entered an invalid answer. Please choose from either Y or N: ");
                    ans = Console.ReadLine();
                }
            } while ( (ans != "Y") || (ans != "y") || (ans != "N") || (ans != "n") );
        }
    }
} 
```

} `

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-20T21:40:28.363

看你的`while`情况：

```
while ( (ans != "Y") || (ans != "y") || (ans != "N") || (ans != "n") ) 
```

为了突破，*所有*这些子条件都必须为假（因此整体值为假）。

第一个条件成立的唯一方法是如果`ans`是“Y”......这意味着它绝对*不会*等于“y”......

换句话说，您的循环等于：

```
while (!(ans == "Y" && ans == "y" && ans == "N" && ans == "n")) 
```

它必须是一个非常特殊的字符串才能等于所有四个值。

你*实际上*想要：

```
while (ans != "Y" && ans != "y" && ans != "N" || ans != "n") 
```

换句话说，在值不等于*任何*所需值时继续前进。（另一种选择是保留一组“好的答案”......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T21:43:09.300

```
 do {
            string ans = Console.ReadLine();
            if( ans == "Y" || ans == "y" )  {
                play = true;
                //break;
            }
            else if( ans == "N" || ans == "n" ) {
                play = false;
                //break;
            }
            else
            {
                Console.Write( "You have entered an invalid answer. Please choose from either Y or N: ");
                //ans = Console.ReadLine();
            }
        } while ( (ans != "Y") && (ans != "y") && (ans != "N") && (ans != "n") ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-14T18:08:17.563

我会做这样的事情：

```
bool isValid = false;

        do
        {

            if( ans == "Y" || ans == "y" )  {
                play = true;
                isValid = true;
                //break;
            }
            else if( ans == "N" || ans == "n" ) {
                play = false;
                isValid = true;
                //break;
            }
            else
            {
                Console.Write( "You have entered an invalid answer. Please choose from either Y or N: ");
                ans = Console.ReadLine();
                isValid = false;
            }
        }while(isValid == false); 
```

相关小提琴：[https ://dotnetfiddle.net/bxHY27](https://dotnetfiddle.net/bxHY27)

# c# - 如何按列排列这些数据？

> ID：12992951
> 
> 赞同：0
> 
> 时间：2012-10-20T21:39:43.570
> 
> 标签：c#, mysql, database, formatting

我有一个mysql数据库。其中有 50 列详细信息。

```
Detail 1, Detail2, Detail3...... Detail50. 
```

我在本地有网站，所以我自己报废了。该站点不是按顺序排列的，没有标签，名称数据只是逐行文本的形式，因此这是将我逐行获取的内容并保存到数据库的唯一选择。所以每一行都有一列从 1-50....

有些页面有 10 列，其他有 50 列，数据无序现在我有数据库，我如何对它们进行排序任何建议，欢迎提出想法。

这张图会更清楚：

![在此处输入图像描述](../Images/42a54576c6e91642d21fa18a23fa91c5.png)

所以你可以在 Detail4 中看到它的内径，有时在 1 中，这些只是我会硬编码的例子，但有太多的可能性，但重复的单词都有相同的注视名称，只是值不同。任何机会至少50% 的数据按具有相同 4-5 个起始词的顺序排列，例如

```
part,inner,diameter,oil filter etc. 
```

任何建议或想法都可以用mysql或C#代码完成.....谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T23:40:13.200

您的方法是完全错误的，但是如果您想这样做，只需制作一个包含两列的表，`'id'`然后`'details'`...为特定产品 ID 的每一列插入一个。之后，您可以使用`SELECT`这样的：

`select SUBSTRING(details, 14) from products where details like 'Inner Diameter%' and id = 'my_product_id';`

# python - Pandas，如何引用时间序列项目？

> ID：12992958
> 
> 赞同：2
> 
> 时间：2012-10-20T21:40:19.717
> 
> 标签：python, time-series, pandas

我正在尝试处理一些股市数据。我有以下数据框：

```
>>> ticker
<class 'pandas.core.frame.DataFrame'>
DatetimeIndex: 707 entries, 2010-01-04 00:00:00 to 2012-10-19 00:00:00
Data columns:
Open         707  non-null values
High         707  non-null values
Low          707  non-null values
Close        707  non-null values
Volume       707  non-null values
Adj Close    707  non-null values
dtypes: float64(5), int64(1) 
```

我将参考一个随机收盘价：

```
>>> ticker ['Close'] [704]
21.789999999999999 
```

获取第 704 项日期的语法是什么？

同样，如何获得以下项目在数组中的位置？：

```
>>> ticker.Close.min ()
17.670000000000002 
```

我知道这看起来很基本，但我花了很多时间搜索文档。如果它在那里，我绝对想念它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T02:02:05.150

这应该回答您的两个问题：

注意：如果你想要第 704 个元素，你应该使用“703”作为索引从零开始。如您所见`df['A'].argmin()`，它还返回 1，即 df 中的第二行。

```
In [682]: print df
                   A         B         C
2000-01-01  1.073247 -1.784255  0.137262
2000-01-02 -0.797483  0.665392  0.692429
2000-01-03  0.123751  0.532109  0.814245
2000-01-04  1.045414 -0.687119 -0.451437
2000-01-05  0.594588  0.240058 -0.813954
2000-01-06  1.104193  0.765873  0.527262
2000-01-07 -0.304374 -0.894570 -0.846679
2000-01-08 -0.443329 -1.437305 -0.316648

In [683]: df.index[3]
Out[683]: <Timestamp: 2000-01-04 00:00:00>

In [684]: df['A'].argmin()
Out[684]: 1 
```

# asp.net - 在字符串的最后一个单词之前插入单词

> ID：12992962
> 
> 赞同：1
> 
> 时间：2012-10-20T21:40:34.083
> 
> 标签：asp.net, string, visual-studio-2010, c#-4.0

我试图在字符串的最后一个单词之前插入单词“and”。到目前为止，这是我的代码：

```
 string skillset = "";
    foreach (ListItem item in SkillSet.Items)
    {
        if (item.Selected)
        {
            skillset += item.Text + ", ";
        } 
    }
    skillset = skillset.Substring(0, skillset.Length - 2); 
```

任何帮助是极大的赞赏。谢谢托马斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T21:50:33.413

如果您只想将“and”放在最后一个单词的前面，您可以使用将字符串拆分为字符串数组，更改最后一个单词并将字符串重新连接在一起。它看起来像这样

```
string[] skills = skillset.Split(new char[] { ',' });
skills[skills.Length-1] = "and " + skills[skills.Length-1];
skillset = string.Join(",", skills); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T12:56:21.707

```
int myStringLength  = myString.length;

string myString = inputString.Substring(0, myStringLength);

int index = myString.LastIndexOf(' ');

string outputString = myString.Insert(index , " and "); 
```

示例： http: [//www.dotnetperls.com/insert](http://www.dotnetperls.com/insert)

# android - 重命名android textview

> ID：12992963
> 
> 赞同：0
> 
> 时间：2012-10-20T21:40:34.907
> 
> 标签：android, textview, android-edittext, rename

如何动态重命名android文本视图？我想根据给定的编辑文本答案分配一个名称，该名称必须与已创建的文本视图相关。例如名称 a 已经在 xml 示例中分配了一个 res id 最终 TextView 名称 a = (TextView) this.findViewById(R.id.Texti5);

```
 editext.setOnKeyListener(new View.OnKeyListener() {
    public boolean onKey(View v, int keyCode, KeyEvent event) {
        // TODO Auto-generated method stub
        if (keyCode==KeyEvent.KEYCODE_ENTER) { 
            if("test1".equalsIgnoreCase(anstext.getText().toString())) {
                 // Here i want to give textview1 the 'name a'
                }}
            else
            if("test2".equalsIgnoreCase(editext.getText().toString())) {
                // Here i want to give textview1 the 'name b'
            }

        if("test5".equalsIgnoreCase(editext.getText().toString())) {
            // Here i want to give textview1 the 'name c'
        }

        if("test7".equalsIgnoreCase(editext.getText().toString())) {
            // Here i want to give textview1 the 'name d'
        }
        if (editext.getText().toString() != null){
          testwrong.seText("wrong");               }
        }
      // here i want to see what name is given and give the name to textview1 so i can 
         perform click on that textview as it is clickable
      textview1.performClck();
    return true;

    } }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T21:56:52.980

也许可以实现类似目标的方法是根据您的 if 语句给 textview 一个标签。

```
textview1.setTag("a"); 
```

然后你可以像这样取回标签：

```
if (textview1.getTag() == "a") {
// do something
} 
```

至少，这将比您提议的更传统。

# iphone - iOS 6 中的 iAd 请求率是否发生了变化？

> ID：12992970
> 
> 赞同：1
> 
> 时间：2012-10-20T21:41:15.727
> 
> 标签：iphone, xamarin.ios, iad

我有一个使用 iAds 的应用程序，我注意到自发布基于 iOS 6 的更新以来，每个会话发出的请求数量大幅下降 (50-60%)。我的平均会话和会话长度没有改变，事实上会话长度略有增加。应用程序的结构没有改变，带有广告的视图控制器的数量略有增加。我的假设是，更新后我会看到广告请求数量增加。

请求广告的代码（逻辑方面）没有改变，并且在测试广告中表现良好。

唯一的区别是新应用程序是用 MonoTouch 编写的，之前是一个 Objective-C 应用程序，它是基于 iOS 6 构建的。我不排除我做了一些愚蠢的事情的可能性，但广告看起来确实不错在 App Store 版本中。我不知道什么会导致请求急剧下降，除非 iAd 横幅请求不那么频繁。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T14:11:56.577

Apple 在 iOS 6 中更改了 iAd 中的一些内容：

*   您不再指定方向，方向的`ADBannerView`大小
*   您可以设置`AutoresizingMask`允许它调整大小

他们也可能改变了刷新率。

我认为 MonoTouch 不会引起任何问题。我们有一个 MonoTouch 应用程序，它从 iAd 中获得的*收益*比我们使用的任何其他广告网络的横幅都多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T19:23:00.850

我写信给 iAd 支持并得到了解释。简而言之，在 iOS 6 中，您绝对需要在视图控制器之间共享相同的 iAd 横幅视图。

我根据几年前找到的一些代码在 ViewDidLoad 中创建了一个新的。较新的 iAd 示例（我认为是 AdSuite？）展示了如何在视图控制器之间共享横幅，但要点只是创建一个单例类或在您的应用程序委托中创建横幅视图并在任何地方使用它。

我的应用程序更新最近使用共享横幅进入了商店，我立即看到 iAd 请求显着增加。没有其他与广告相关的更改会影响请求，因此我确信共享横幅视图是关键。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T17:01:03.383

正如 Ken Pespisa 所说，应该在视图控制器之间共享一个横幅。除了示例代码 AdSuite 之外，**WWDC 2011**上有一个非常好的视频，它逐步解释了所涉及的代码：

[iAd 实施最佳实践](https://developer.apple.com/videos/wwdc/2011/?id=505)

# javascript - document.write 擦除按钮

> ID：12992971
> 
> 赞同：0
> 
> 时间：2012-10-20T21:41:27.873
> 
> 标签：javascript, html

我有一个带有按钮的 html 页面：

```
 <INPUT TYPE=BUTTON VALUE="b1" onclick="init1()" > 
```

初始化1：

```
 document.innerHTML = "<object type='application/x-app' id='plugin' width='0' height='0' > </object>" 
```

当我按下按钮 b1 时，它会擦除​​页面并且它只是空白。我究竟做错了什么？10xs，尼尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T21:45:12.383

当然它会擦除页面。当您修改`.innerHTML`-整个文档 - 并将其替换为其他内容时，就会发生这种情况。

但是，如果您想将该标签附加到文档上，那就另当别论了。我建议这样做：

```
var your_element = document.createElement('object');
your_element.type = 'application/x-app';
your_element.id = 'plugin'
your_element.width = 0;
your_element.height = 0;
document.body.appendChild(your_element);​ 
```

[**演示**](http://jsfiddle.net/Swcbr/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T21:48:11.327

您需要在代码中（在 DOM 树中）设置正确的锚点（位置）。

试试这个：

```
var my_anchor = document.getElementById('element_in_DOM');

my_anhor.innerHTML = "<object type='application/x-app' id='plugin' width='0' height='0' > </object>" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T21:55:54.670

在身体上使用`appendChild`而不是替换 ( `=`)。您的按钮不会被删除。

```
var object = document.createElement("object");
object.innerHTML = "<object...";
document.body.appendChild(object); 
```

# jquery - 如果选择器返回多个元素，则 JQuery 抛出

> ID：12992972
> 
> 赞同：1
> 
> 时间：2012-10-20T21:41:29.720
> 
> 标签：jquery

如果 jQuery 选择器返回多个 DOM 元素，在 jQuery 中是否有一种方法可以不抛出/返回任何元素？我知道您可以通过简单的检查来包装每个调用，但如果有的话，我想使用现有的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T21:46:23.067

没有内置方法，但添加一个并不难：

```
(function($) {
    $.fn.oneOnly = function() {
        if (this.length === 1) {
            return this;
        } else {
            return $();  // or throw / $.error()
        }
    };
 })(jQuery); 
```

如果多个元素匹配，则将其放入链中以使链无效：

```
 $(sel).oneOnly().doSomething(); 
```

见[http://jsfiddle.net/alnitak/sevTY/](http://jsfiddle.net/alnitak/sevTY/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T21:55:18.577

如果返回多个元素而没有使用[长度](http://api.jquery.com/length/)来检查它，则无法抛出异常。另一种方法是`$("selector").first()`只使用第一个元素。

# php - 在侧边栏中显示单个每月自定义帖子，当当前月份更改时自动更改

> ID：12992973
> 
> 赞同：0
> 
> 时间：2012-10-20T21:41:42.763
> 
> 标签：php, wordpress

我正在尝试在页面上显示单个自定义帖子类型，此特定自定义帖子类型的总数为 12（一年中的月数），它们是园艺技巧，可为网站查看者提供与月份相关的信息他们正在查看的页面。

我想显示一个仅与当前月份相关的帖子，该帖子将在月份更改之日的午夜自动更改，无需站点管理员进行任何交互。有像 date_timestamp_get 这样的 php 函数——它获取 Unix 时间戳，如果它可以接受这样的参数，我不确定如何使用它来更改 query_posts 函数？

我目前使用的代码如下，它显示了最近发布的单个帖子，这里是页面的链接[http://www.chorltonnursery.com/wordpress/gardening-tips/](http://www.chorltonnursery.com/wordpress/gardening-tips/)

```
<h3>Gardening Tips</h3>
<?php query_posts("posts_per_page=1"); the_post(); ?>
<h4>Jobs to do in your garden this month</h4>
<?php $my_query = new WP_Query('post_type=garden_tips&showposts=1'); ?>
<?php while ($my_query->have_posts()) : $my_query->the_post(); ?>
<a href="<?php the_permalink() ?>" title="<?php the_title(); ?>">
<?php the_title(); ?></a>
<?php the_content('continue reading'); ?>
<a href="<?php the_permalink(); ?>" class="btn">Gardening Tips</a>
<?php endwhile; ?>
<?php wp_reset_query(); ?> 
```

我的预感是一些 php 代码可以解决这个挑战？如果有人知道如何在 wordpress 中做到这一点，我真的会被弥补！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T21:46:53.470

你需要一个按月分组的帖子，看看这个[示例](http://wordpress.org/support/topic/group-posts-by-month)

或在 wp_query 添加月份：

```
query_posts( $query_string . '&cat=13&monthnum=' . date( 'n', current_time( 'timestamp' ) ) ); 
```

查看[WP 功能参考](http://codex.wordpress.org/Function_Reference/query_posts)。

# jquery - 在单击选择时调用 Ajax 加载选项后刷新选择

> ID：12992975
> 
> 赞同：1
> 
> 时间：2012-10-20T21:41:51.900
> 
> 标签：jquery, ajax, forms, select, dynamic

研究这个自动取款机没有太多运气。在移动 jquery 上有很多，但不是标准的。

基本上我有一个标准的选择列表，其中包含一些 php 加载选项。我正在做的是当用户单击选择时，它会调用一个 ajax 请求，该请求会根据其他变量将额外的选项加载到选择菜单中。很简单，但是选择菜单在重新聚焦菜单之前不会重新加载列表（单击关闭然后再次打开）。

我已经尝试过`.selectmenu('refresh', true);`，`.trigger('refresh');`但我不认为这就是这些功能的用途，你可以猜到它不起作用。

任何想法或任何人解决了这个问题？我确定我已经在其他带有加载符号的网站上看到过此操作，但我猜这可能不是精选的，而是某种定制的 UL。

我不能让我的用户单击菜单只是为了单击它关闭并再次单击，并且不想在单击单独的按钮时加载 ajax，因为这应该是一个快速功能。

我也无法在设置变量时加载它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T00:34:09.507

我发现这种方式，在 #id_select-button 的点击事件上返回 false ，jquery mobile 添加“-button”并手动打开选项。

```
$('#select-choice-1-button').click(function(){

    setTimeout(function(){
        $('#select-choice-1').append('<option value="gg">TEST SUCCESS</option>');
        $('#select-choice-1').selectmenu('refresh');
        $('#select-choice-1').selectmenu('open');
    }, 2000);

    return false;
}); 
```

[http://jsfiddle.net/HVahC/1/](http://jsfiddle.net/HVahC/1/)

# cakephp - CakePHP 2.2.2 Auth 使用不登录用户？

> ID：12992977
> 
> 赞同：0
> 
> 时间：2012-10-20T21:42:50.650
> 
> 标签：cakephp, authentication, login

我已经发布了我的路线、用户模型、用户控制器、应用程序控制器和页面控制器。这几乎是他们网站上针对 CakePHP 2 的简单身份验证指南的完整副本。

我正在使用 2.2.2，但似乎无法正常工作。我遇到的主要问题是，许多指南/帮助假设您正在将其构建为一个新的“基础”站点，也就是说，Cake 已安装到主机的根目录。但在我的情况下，它不是，我将它作为展示的一部分来展示我能做什么。

这样做的问题是它只重新加载主页（登录表单所在的页面）。它不会接受有效的用户 + 密码并对其进行任何操作，无效的详细信息也是如此。所以我在做一些基本的错误？或者因为尝试在同一个域中托管许多不同的项目/站点的配置，我需要在某个地方进行更改吗？

我没有发布我在获取用户名+密码时使用的表单的代码，但我没有从指南发布的内容中更改它。

如果您需要其他我可能没想过要发布的内容，请告诉我。

请帮我。

**我的路线配置**

```
$SiteBase = '/projects/cake/DrWho/';

Router::connect($SiteBase, array('controller' => 'pages', 'action' => 'display'));
Router::connect($SiteBase . 'login/', array('controller' => 'users', 'action' => 'LogIn'));

Router::connect($SiteBase . 'gallery/', array('controller' => 'galleries', 'action' => 'index'));
Router::connect($SiteBase . 'episodeguide/', array('controller' => 'episodes', 'action' => 'index'));
Router::connect($SiteBase . 'forum/', array('controller' => 'forumtopics', 'action' => 'index'));

//Router::connect('/pages/*', array('controller' => 'pages', 'action' => 'display'));

CakePlugin::routes();
require CAKE . 'Config' . DS. 'routes.php'; 
```

**我的用户模型**

```
App::uses('AppModel', 'Model');
App::uses('AuthComponent', 'Controller/Component');
class User extends AppModel {

  public function beforeSave($options = array()) {
    if (isset($this->data[$this->alias]['password'])) {
    $this->data[$this->alias]['password'] = AuthComponent::password($this->data[$this->alias]['password']);
    }
    return true;
  }

  public $validate = array(
    'id' => array(
        'notempty' => array(
            'rule' => array('notempty'),
            //'message' => 'Your custom message here',
            //'allowEmpty' => false,
            //'required' => false,
            //'last' => false, // Stop validation after this rule
            //'on' => 'create', // Limit validation to 'create' or 'update' operations
        ),
    ),
    'username' => array(
        'notempty' => array(
            'rule' => array('notempty'),
            //'message' => 'Your custom message here',
            //'allowEmpty' => false,
            //'required' => false,
            //'last' => false, // Stop validation after this rule
            //'on' => 'create', // Limit validation to 'create' or 'update' operations
        ),
    ),
    'password' => array(
        'notempty' => array(
            'rule' => array('notempty'),
            //'message' => 'Your custom message here',
            //'allowEmpty' => false,
            //'required' => false,
            //'last' => false, // Stop validation after this rule
            //'on' => 'create', // Limit validation to 'create' or 'update' operations
        ),
    ),
    'fristname' => array(
        'notempty' => array(
            'rule' => array('notempty'),
            //'message' => 'Your custom message here',
            //'allowEmpty' => false,
            //'required' => false,
            //'last' => false, // Stop validation after this rule
            //'on' => 'create', // Limit validation to 'create' or 'update' operations
        ),
    ),
    'surname' => array(
        'notempty' => array(
            'rule' => array('notempty'),
            //'message' => 'Your custom message here',
            //'allowEmpty' => false,
            //'required' => false,
            //'last' => false, // Stop validation after this rule
            //'on' => 'create', // Limit validation to 'create' or 'update' operations
        ),
    ),
    'email' => array(
        'notempty' => array(
            'rule' => array('notempty'),
            //'message' => 'Your custom message here',
            //'allowEmpty' => false,
            //'required' => false,
            //'last' => false, // Stop validation after this rule
            //'on' => 'create', // Limit validation to 'create' or 'update' operations
        ),
    ),
    'active' => array(
        'boolean' => array(
            'rule' => array('boolean'),
            //'message' => 'Your custom message here',
            //'allowEmpty' => false,
            //'required' => false,
            //'last' => false, // Stop validation after this rule
            //'on' => 'create', // Limit validation to 'create' or 'update' operations
        ),
    ),
    'role_id' => array(
        'numeric' => array(
            'rule' => array('numeric'),
            //'message' => 'Your custom message here',
            //'allowEmpty' => false,
            //'required' => false,
            //'last' => false, // Stop validation after this rule
            //'on' => 'create', // Limit validation to 'create' or 'update' operations
        ),
    ),
  );

  public $belongsTo = array(
    'Role' => array(
        'className' => 'Role',
        'foreignKey' => 'role_id',
        'conditions' => '',
        'fields' => '',
        'order' => ''
    )
  );
} 
```

**我的用户控制器**

```
App::uses('AppController', 'Controller');
class UsersController extends AppController {

public function login() {
if ($this->request->is('post')) {
    if ($this->Auth->login()) {
    $this->redirect($this->Auth->redirect());
    } else {
    $this->Session->setFlash(__('Invalid username or password, try again'));
    }
}
}   

public function logout() {
$this->redirect($this->Auth->logout());
}

public function beforeFilter() {
    parent::beforeFilter();
    $this->Auth->allow('add', 'logout');
}

public function index() {
    $this->User->recursive = 0;
    $this->set('users', $this->paginate());
}

public function view($id = null) {
    $this->User->id = $id;
    if (!$this->User->exists()) {
        throw new NotFoundException(__('Invalid user'));
    }
    $this->set('user', $this->User->read(null, $id));
}

public function add() {
    if ($this->request->is('post')) {
        $this->User->create();
        if ($this->User->save($this->request->data)) {
            $this->Session->setFlash(__('The user has been saved'));
            $this->redirect(array('action' => 'index'));
        } else {
            $this->Session->setFlash(__('The user could not be saved. Please, try again.'));
        }
    }
}

public function edit($id = null) {
    $this->User->id = $id;
    if (!$this->User->exists()) {
        throw new NotFoundException(__('Invalid user'));
    }
    if ($this->request->is('post') || $this->request->is('put')) {
        if ($this->User->save($this->request->data)) {
            $this->Session->setFlash(__('The user has been saved'));
            $this->redirect(array('action' => 'index'));
        } else {
            $this->Session->setFlash(__('The user could not be saved. Please, try again.'));
        }
    } else {
        $this->request->data = $this->User->read(null, $id);
        unset($this->request->data['User']['password']);
    }
}

public function delete($id = null) {
    if (!$this->request->is('post')) {
        throw new MethodNotAllowedException();
    }
    $this->User->id = $id;
    if (!$this->User->exists()) {
        throw new NotFoundException(__('Invalid user'));
    }
    if ($this->User->delete()) {
        $this->Session->setFlash(__('User deleted'));
        $this->redirect(array('action' => 'index'));
    }
    $this->Session->setFlash(__('User was not deleted'));
    $this->redirect(array('action' => 'index'));
  } 
```

}

**我的应用控制器**

```
App::uses('Controller', 'Controller');

class AppController extends Controller {
  public $components = array(
    'Session',
    'Auth' => array(
        'loginRedirect' => array('controller' => 'pages', 'action' => 'index'),
        'logoutRedirect' => array('controller' => 'pages', 'action' => 'display', 'home')
    )
  );
  var $helpers = array('AssetCompress.AssetCompress');

  function beforeFilter() {

  if ($this->request->is('mobile')) {
    $this->isMobile = true;
    $this->set('isMobile', true );
    $this->autoRender = false;
    $this->layout = 'mobile';
  }   
  $this->MenuSystem();

  } //End of beforeFilter function

  function MenuSystem() {
  $this->loadModel('Menu');
  $MenuSQL = $this->Menu->find('all', array('conditions' => array('active' => true)));
  $this->set('Menu', $MenuSQL);
 } //End of MenuSystem function

} //End of AppController Class 
```

**我的页面控制器**

```
 App::uses('AppController', 'Controller');

 class PagesController extends AppController {

  public $name = 'Pages';
  public $uses = array();

  function beforeFilter() {
    parent::beforeFilter();
    $this->Auth->allow('*');
  }

  function index() {
    $this->render('pages_home');
  }

  public function display() {
    if ($this->request->is('mobile')) {
    $this->render('pages_mobile');
    } else {
    $this->render('pages_home');
    }
  } //End display() function

    } // End of PagesController Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T06:38:01.833

我认为您的蛋糕项目位于文件夹内`DOCUMENT_ROOT/projects/cake/DrWho/`（其中 DOCUMENT_ROOT 是您的网络服务器的文档根目录）。

您不必做任何特别的事情来使蛋糕项目在文档根目录的子文件夹中工作。尝试将 $siteBase 前缀添加到您的路线实际上是导致问题的原因。基本 url 由 cake 自动处理。在基本 url 没有被正确猜到的极少数情况下，您可以`App.baseUrl`使用`app/Config/core.php`.

# algorithm - KMP 算法在最佳情况下的最小比较次数是多少？

> ID：12992978
> 
> 赞同：0
> 
> 时间：2012-10-20T21:42:50.647
> 
> 标签：algorithm, knuth-morris-pratt

KMP 算法在最佳情况下的最小比较次数是多少？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T21:55:23.920

最好的情况是您要查找的字符串正好位于文本字符串的开头。`k`在这种情况下，如果您要在一个字母字符串中寻找一个`n`字母字符串，那么最好的比较次数是`k`.

您还必须考虑根据您的`k`字母词计算表格的开销，这将让您知道如果找不到匹配项则要跳过哪些字母。无论如何，这种构造是在`O(k)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T21:56:22.260

好吧，在最佳情况下，最小比较次数是字符串的长度，这意味着您首先尝试找到匹配项。该算法是 O(n)，这意味着上限或最坏情况将进行 n 次比较，其中 n 是您正在搜索的字符串的长度。维基很不错。 [http://en.wikipedia.org/wiki/Knuth%E2%80%93Morris%E2%80%93Pratt_algorithm](http://en.wikipedia.org/wiki/Knuth%E2%80%93Morris%E2%80%93Pratt_algorithm)

# perl - 舞者中的线程

> ID：12992982
> 
> 赞同：1
> 
> 时间：2012-10-20T21:43:42.070
> 
> 标签：perl, dancer

我在标准配置（plackup/Starman）中使用 Dancer 1.31。

在请求中，我希望异步调用 perl 函数，以便请求立即返回。想想典型的“长时间运行的操作”场景，其中一个人想要返回一个带有刷新+重定向的“处理页面”。

我（天真地？）尝试了一个线程：

```
sub myfunc {  
   sleep 9; # just for testing a slow operation
}

any '/test1' => sub {
   my $thr = threads->create('myfunc'); 
   $thr->detach();
   return "done" ;
}; 
```

我不工作，服务器似乎冻结了，错误日志没有显示任何内容。我猜 Dancer 内部禁止手动创建线程？是PSGI的问题吗？推荐的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T21:09:03.440

我会远离 perl 线程，尤其是在 web 服务器环境中。当您加入或分离它们时，它很可能会使您的服务器崩溃。

我通常在初始化其他模块之前创建几个线程（线程池），并在应用程序的整个生命周期中保留它们。[Thread::Queue](https://metacpan.org/pod/Thread%3a%3aQueue)很好地提供了工作线程和主线程之间的通信。

我在 Perl 中找到的最好的异步解决方案是[POE](https://metacpan.org/pod/POE)。在 Linux 中，我更喜欢使用[POE::Wheel::Run](https://metacpan.org/pod/POE%3a%3aWheel%3a%3aRun)来异步运行可执行文件和子例程。它使用 fork 并具有漂亮的界面，允许与子进程进行通信。（在 Windows 中，由于线程依赖性，它不可用）

在同一个应用程序/脚本中设置 Dancer 和 POE 可能会导致问题，并且 POE 的事件循环可能会被阻塞。一个专用于 POE 的工作线程可能会派上用场，或者我会编写另一个基于 POE 的服务器并通过套接字与 Dancer 应用程序通信。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-19T16:38:20.580

线程在 Perl 中是绝对不确定的。也许可以编写一些线程化的 Dancer 代码，但老实说，我认为我们从未尝试过。而且考虑到 Dancer 1 的核心使用 simpleton 类，它也可能非常棘手。

正如 Ogla 所说，还有其他方法可以在 Dancer 中实现异步行为。你说你正在使用 Starman，这是一个分叉引擎。但也有基于 AnyEvent 的[Twiggy 。](https://metacpan.org/release/Twiggy)要了解如何利用它来编写异步代码，请查看[Dancer::Plugin::Async](https://metacpan.org/pod/Dancer::Plugin::Async)。

# java - 使用 Spring Security 保护 Struts2 命名空间

> ID：12992985
> 
> 赞同：0
> 
> 时间：2012-10-20T21:44:07.000
> 
> 标签：java, struts2, spring-security

我尝试使用 Spring Security 3.0.5 保护我的 struts 2 应用程序。

我在 web.xml 中声明了这一点：

```
 <!-- Tiles --> 
  <context-param> 
    <param-name> org.apache.tiles.impl.BasicTilesContainer.DEFINITIONS_CONFIG </param-name> 
    <param-value>/WEB-INF/conf/tiles.xml</param-value> 
  </context-param> 
  <listener> 
    <listener-class>org.apache.struts2.tiles.StrutsTilesListener</listener-class> 
  </listener> 

<!-- Files defining SPRING ApplicationContext -->   
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/conf/spring-security.xml,/WEB-INF/conf/application.xml</param-value>
    </context-param>

    <context-param>
        <param-name>locatorFactorySelector</param-name>
        <param-value>classpath:/model/config/beans.xml</param-value>
    </context-param>
    <context-param>
        <param-name>parentContextKey</param-name>
        <param-value>context</param-value>
    </context-param>

    <!-- Filter for security -->
    <filter>
        <filter-name>springSecurityFilterChain</filter-name>
        <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
    </filter>

    <filter-mapping>
        <filter-name>springSecurityFilterChain</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

    <!-- Struts 2 --> 
  <filter> 
    <filter-name>struts2</filter-name> 
    <filter-class>org.apache.struts2.dispatcher.FilterDispatcher</filter-class> 
  </filter> 
  <filter-mapping> 
    <filter-name>struts2</filter-name> 
    <url-pattern>/*</url-pattern> 
  </filter-mapping> 
     <!-- Spring --> 

    <!-- Open session filter - binds a Hibernate Session to the thread for the entire processing of the request  -->
    <filter>
        <filter-name>HibernateFilter</filter-name>
        <filter-class>org.springframework.orm.hibernate3.support.OpenSessionInViewFilter</filter-class>
        <init-param>
              <param-name>sessionFactoryBeanName</param-name> 
              <param-value>hibernateSessionFactory</param-value>
        </init-param>
    </filter>

        <!-- Filter for Character Encoding -->
    <filter>
        <filter-name>CharacterEncodingFilter</filter-name>
        <filter-class>org.springframework.web.filter.CharacterEncodingFilter</filter-class>
        <init-param>
            <param-name>encoding</param-name>
            <param-value>UTF-8</param-value>
        </init-param>
    </filter>

    <!-- Mapping for pages to filter -->
    <filter-mapping>
        <filter-name>HibernateFilter</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>
    <filter-mapping>
        <filter-name>CharacterEncodingFilter</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

<listener>
   <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>
<listener>
        <listener-class>org.springframework.web.context.request.RequestContextListener</listener-class>
</listener>

  <welcome-file-list>
    <welcome-file>index.html</welcome-file>
  </welcome-file-list> 
```

然后在我的 struts.xml 中：

```
<struts> 
  <!-- internationalisation --> 
  <constant name="struts.custom.i18n.resources" value="messages" /> 
  <!-- intégration Spring --> 
  <constant name="struts.objectFactory.spring.autoWire" value="name" />

  <package name="searchMandate" namespace="/search" extends="struts-default, tiles-default"> 
   <action name="MandateSearchActionInit"  class="web.action.mandate.SearchAction" method="initSearch"> 
      <result name="input" type="tiles">search</result> 
      <result name="success" type="tiles">search</result> 
    </action> 
    </package>
     <package name="userProfile" namespace="/profile" extends="struts-default, tiles-default"> 
        <action name="ChangeProfileInit"  class="web.action.user.ProfileAction" method="loadProfile"> 
           <result name="input" type="tiles">updateProfile</result> 
         </action> 
    </package>
</struts> 
```

我的 spring-security.xml ：

```
 <beans:bean id="springSecurityFilterChain" class="org.springframework.security.util.FilterChainProxy">
        <filter-chain-map path-type="ant">
            <filter-chain pattern="/**" filters="sif"/>
        </filter-chain-map>
    </beans:bean>

    <http use-expressions="true">
        <intercept-url pattern="/profile*" access="isAuthenticated()" />
        <intercept-url pattern="/search*" access="hasRole('SEARCH')"/>
        <form-login login-page="/login" default-target-url="/welcome"
            authentication-failure-url="/loginfailed" />
        <logout logout-success-url="/logout" />
    </http>

    <authentication-manager>
        <authentication-provider>
            <password-encoder ref="passwordEncoder" />
            <jdbc-user-service data-source-ref="dataSource"

                users-by-username-query="
                    select login,password, isactive 
                    from tuser where LOGIN=?" 

                authorities-by-username-query="
                    select u.login, ur.name from tuser u,tgroup g, trolegroup rg, trole ur 
                    where u.groupid = g.groupid and g.groupid=rg.groupid and rg.roleid=ur.roleid and u.login =?  " 

            />
        </authentication-provider>
    </authentication-manager> 
```

我认为安全性已经到位，阅读“INFO 20-10 23:26:55,620 - Creating access control expression attribute 'hasRole('SEARCH')' for /search*”作为服务器启动。但是当我访问 search/MandateSearchActionInit url 时，我在没有被路由到登录页面的情况下进行操作。有人有钥匙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T18:48:10.007

事实上，intercept-url 模式是错误的。例如对于搜索路径，语法应该是：

```
<intercept-url pattern="/search/**" access="hasRole('SEARCH')"/> 
```

没有与 struts2 的链接（spring security 保护 url 并且不管后面是什么）。

# c++ - C++ 未定义的行为会导致调试和发布版本的行为不同吗？

> ID：12992987
> 
> 赞同：-3
> 
> 时间：2012-10-20T21:44:27.907
> 
> 标签：c++, undefined-behavior, release-mode, debug-mode

这个问题有很多很好的答案来解释为什么一个错误可能只在发布版本中表现出来。
[调试模式下不存在发​​布版本中错误的常见原因](https://stackoverflow.com/questions/1762088/common-reasons-for-bugs-in-release-version-not-present-in-debug-mode)
我有一个关于未定义行为的更具体的问题。

**如果一个程序在 Debug 版本中似乎总是可以正常工作，但在发布版本中表现不同（但是总是以相同的错误方式表现），那么问题可能是由于未定义的行为造成的吗？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T22:06:31.333

*可能是由于未定义的行为*？*当然。*总是*因为未定义的行为吗？当然不是。*

 *想象一下：

```
assert(scanf("%d", &n) == 1); 
```

此行将在发布模式下简单地删除。这不是未定义的行为，但它肯定会使您的程序以不同的方式运行。

`assert`这里可能是一个明显的例子，但想想这个更复杂的情况：

```
#ifndef NDEBUG
# define DBG(fmt, ...) fprintf(stderr, fmt, ##__VA_ARGS__)
#else
# define DBG(fmt, ...) ((void)0)
#endif

int shared_var;

static inline void do_something_fast(void)
{
    DBG("doing something fast\n");
    shared_var = something_fast();
} 
```

并有线程1：

```
...
mutex_unlock();
local_var = shared_var;
... 
```

和线程2：

```
...
mutex_lock();
do_something_fast();
... 
```

现在这个例子是完全荒谬的，但是类似的东西在多线程环境中很常见。在此示例中，会发生以下情况：

*   线程 1：调用 mutex_unlock，唤醒线程 2 并进入睡眠状态
*   线程 2：调用 do_something_fast()
    *   发布中：调用 fprintf，导致线程 2 休眠
        *   现在线程 1 将旧值复制`shared_var`到`local_var`
    *   在调试中：线程一覆盖`shared_var`
        *   现在线程 1 将新值复制`shared_var`到`local_Var`

如您所见，在此示例中，阻塞 I/O 会在线程之间强制执行某种行为，该行为本身仅在调试模式下启用。这也意味着在调试中工作的程序的行为可能与为发布而编译时不同。*

# ruby-on-rails - rails nginx 乘客在 linode VPS 上返回 http 301

> ID：12992988
> 
> 赞同：2
> 
> 时间：2012-10-20T21:44:31.617
> 
> 标签：ruby-on-rails, nginx, passenger

我已经使用 capistrano 部署了一个 rails 应用程序到 linode VPS。现在，当我尝试访问[http://mysite.com](http://mysite.com)时，我得到一个 301 重定向到[https://mysite.com](https://mysite.com)，因为我没有 ssl 设置而失败

nginx 配置文件
`server {`
`listen 80;`
`server_name mysite.com;`
`root /home/stream_production/current/public;`
`passenger_enabled on;`
`rails_env production;`
`}`

访问日志 - - [20/Oct/2012:14:29:23 -0700] "GET / HTTP/1.1" 301 5 "-" "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.4 (KHTML, like Gecko ) 铬/22.0.1229.94 Safari/537.4"

我正在使用 Ubuntu 12.04、rvm 1.15.8、ruby 1.9.3、rails 3.2.8、Phusion Passenger 3.0.17、Passenger 的 Nginx 模块。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T17:03:51.583

这是由于我的 production.rb 文件 config.force_ssl = true 中的以下条目将其更改为 false 解决了问题。

# maven - HelloWorld EJB 依赖注入

> ID：12992991
> 
> 赞同：2
> 
> 时间：2012-10-20T21:44:49.903
> 
> 标签：maven, glassfish, dependencies, ejb, code-injection

我无法让@EJB 依赖注入工作。我使用 Linux 和 Maven 作为构建工具。

对于源代码、IDE 和应用服务器，我喜欢使用尽可能简单的替代方案。我尝试使用 Glassfish 3.1.2.2、NetBeans 7.2 但没有运气。我没有在 Glassfish 中进行任何配置。

这是一些示例源代码，但任何有效的代码都会有所帮助。此外，任何有关如何调试此类问题的想法都将不胜感激。似乎每个初学者都拥有它们...

**链接资源.java**

```
package se.xyz.webapp;
import javax.ejb.EJB;
import javax.ws.rs.DefaultValue;
import javax.ws.rs.GET;
import javax.ws.rs.Path;
import javax.ws.rs.PathParam;
import javax.ws.rs.Produces;
import se.xyz.server.LinkService;

@Path("links/{username}")
public class LinkResource {
    @EJB
    LinkService service;
    @GET
    @Produces("text/plain")
    public String link(@PathParam("username") @DefaultValue("NoName") String name ) {
       return service.store(name); // Always nullpointer exception here!
   }     
} 
```

**LinkServiceImpl.java**

```
package se.xyz.server;

import javax.ejb.Stateless;

@Stateless
public class LinkServiceImpl implements LinkService {
    public String store(String name)
    {
        return "From eJB";
    }
} 
```

**链接服务.java**

```
package se.xyz.server;

import javax.ejb.Local;

@Local
public interface LinkService {
    public String store(String name);
} 
```

webapp 正在显示，但变量 service 始终为空。让这段代码工作并不重要，但只要我能让任何 DI 工作就行。在遥远的未来，我也想坚持下去，但是我想手动完成，而不是从原型中获得一个巨大的工作应用程序。我的目标是了解我在做什么......任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T11:24:21.807

问题是您尝试注入的类是 JAX-RS 资源。

JAX-RS 资源在 Java EE 中有点疏忽，它涉及托管 bean 类型的对齐。创建 Java EE 6 时，恰巧 JAX-RS（和 JSF 2）完成得较早，而 CDI 和总体“托管 bean”概念完成得较晚。

JAX-RS*是*一种容器管理类型的 bean，但不幸的是不是官方的“托管 bean”种类，因此它不直接支持 @EJB。

您可以将其设为 CDI 托管 bean，然后使用 @Inject 而不是 @EJB。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T07:10:30.610

如果要将对 LinkService EJB 的引用注入到 LinkResource 资源中，那么您的 LinkResource 必须是**托管**组件，即无状态会话 bean。如果您在 LinkResource 类中添加 @Stateless 注释，则应该没问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T07:13:15.607

每个项目都需要启用上下文和依赖注入。在 netbeans 中右键单击您的项目并选择新建 > 其他

在类别下选择上下文和依赖注入，然后在文件类型下选择 beans.xml。

然后单击下一步，然后单击完成。

或者您可以在 Web Pages/WEB-INF 文件夹中手动创建 beans.xml 文件。内容应该是：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://java.sun.com/xml/ns/javaee"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/beans_1_0.xsd">
</beans> 
```