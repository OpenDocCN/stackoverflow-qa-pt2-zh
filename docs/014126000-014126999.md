# StackOverflow 问答 14126000-14126999

# ubuntu - 当 hadoop-env.sh 已设置时，如何修复未在 Ubuntu 上设置的 JAVA_HOME？

> ID：14126000
> 
> 赞同：-1
> 
> 时间：2013-01-02T17:00:15.647
> 
> 标签：ubuntu, hadoop, java-home

我已经将 hadoop-env.sh 设置为：

```
# export JAVA_HOME=/usr/lib/jvm/java-6-sun 
```

但是当我启动 hadoop 时仍然有同样的错误：

```
Warning: $HADOOP_HOME is deprecated.

starting namenode, logging to /usr/local/hadoop/libexec/../logs/hadoop-hduser-namenode dyah-VirtualBox.out
localhost: starting datanode, logging to /usr/local/hadoop/libexec/../logs/hadoop-hduser-datanode-dyah-VirtualBox.out
localhost: Error: JAVA_HOME is not set.
localhost: starting secondarynamenode, logging to /usr/local/hadoop/libexec/../logs/hadoop-hduser-secondarynamenode-dyah-VirtualBox.out
localhost: Error: JAVA_HOME is not set.
starting jobtracker, logging to /usr/local/hadoop/libexec/../logs/hadoop-hduser-jobtracker-dyah-VirtualBox.out
localhost: starting tasktracker, logging to /usr/local/hadoop/libexec/../logs/hadoop-hduser-tasktracker-dyah-VirtualBox.out
localhost: Error: JAVA_HOME is not set. 
```

当我键入`echo $JAVA_HOME`时，它显示：`/usr/lib/jvm/java-6-sun`。当我输入`java -version`时，它会显示 java 的版本。

我已经将 java 的路径导出到`/.bashrc`

我不知道这里发生了什么，因为我已经根据教程正确设置了这些东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T17:36:05.723

导出语句被前导注释掉`#`，所以它没有效果。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-02T17:07:15.740

环境变量是全局设置的，即它应该能够用于启动 hadoop 的用户。尝试（以 root 身份）手动导出 JAVA_HOME，然后启动 hadoop。

# smarty - 隐藏特定字符后的所有内容

> ID：14126001
> 
> 赞同：0
> 
> 时间：2013-01-02T17:00:26.623
> 
> 标签：smarty

我试图在特定字符之后切断所有内容，在这种情况下是逗号。如果变量等于“6L，瓶子”，我试图只显示逗号“6L”之前的内容

目前使用此代码显示“6L”

{$var|truncate:5:'':false:false}

如果有更多字符“750ML，瓶子”应显示“750ML”，我还需要确保它正确显示

有任何想法吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-03T10:13:44.897

如果使用 PHP 5.3.0 或更高版本，您可以这样做`{'750ML, Bottle'|strstr:',':true}`

# c# - ITextSharp：如何获取图像嵌入资源

> ID：14126002
> 
> 赞同：4
> 
> 时间：2013-01-02T17:00:26.467
> 
> 标签：c#, itextsharp, embedded-resource

我正在解析其中包含一些图像的 HTML。

这些图像存储为嵌入式资源，而不是文件系统。

据我所知，我需要在 HtmlPipelineContext 中设置自定义图像提供程序，并且该提供程序需要检索图像路径或 itextsharp 图像。

问题是，有人知道我需要实现哪种抽象图像提供程序方法？如何？

这是我的代码：

```
 var list = new List<string> { text };
            byte[] renderedBuffer;
            using (var outputMemoryStream = new MemoryStream())
            {
                using (
                    var pdfDocument = new Document(PageSize.A4, 30, 30, 30, 30))
                {
                    var pdfWriter = PdfWriter.GetInstance(pdfDocument, outputMemoryStream);
                    pdfWriter.CloseStream = false;
                    pdfDocument.Open();
                    HtmlPipelineContext htmlContext = new HtmlPipelineContext(new CssAppliersImpl());
                    htmlContext.SetImageProvider(new MyImageProvider());
                    htmlContext.SetTagFactory(Tags.GetHtmlTagProcessorFactory());
                    ICSSResolver cssResolver = XMLWorkerHelper.GetInstance().GetDefaultCssResolver(true);
                    CssResolverPipeline pipeline = new CssResolverPipeline(cssResolver, new HtmlPipeline(htmlContext, new PdfWriterPipeline(pdfDocument, pdfWriter)));
                    XMLWorker worker = new XMLWorker(pipeline, true);
                    XMLParser p = new XMLParser(worker);
                    foreach (var htmlText in list)
                    {
                        using (var htmlViewReader = new StringReader(htmlText))
                        {
                            p.Parse(htmlViewReader);
                        }
                    }
                }

                renderedBuffer = new byte[outputMemoryStream.Position];
                outputMemoryStream.Position = 0;
                outputMemoryStream.Read(renderedBuffer, 0, renderedBuffer.Length);
            } 
```

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T22:19:27.927

使用自定义图像提供程序似乎不受支持。它唯一真正支持的是更改根路径。

但是，这是解决该问题的一种方法：

创建一个名为 的新 html 标记，`<resimg src="{resource name}"/>`并为其编写自定义标记处理器。

这是实现：

```
/// <summary>
/// Our custom HTML Tag to add an IElement.
/// </summary>
public class ResourceImageHtmlTagProcessor : AbstractTagProcessor
{
    public override IList<IElement> End(IWorkerContext ctx, Tag tag, IList<IElement> currentContent)
    {
        var src = tag.Attributes["src"];
        var bitmap = (Bitmap)Resources.ResourceManager.GetObject(src);

        if (bitmap == null)
            throw new RuntimeWorkerException("No resource with the name: " + src);

        var converter = new ImageConverter();
        var image = Image.GetInstance((byte[])converter.ConvertTo(bitmap, typeof(byte[])));
        HtmlPipelineContext htmlPipelineContext = this.GetHtmlPipelineContext(ctx);
        return new List<IElement>(1)
            {
                this.GetCssAppliers().Apply(
                    new Chunk((Image)this.GetCssAppliers().Apply(image, tag, htmlPipelineContext), 0f, 0f, true),
                    tag,
                    htmlPipelineContext)
            };
    }
} 
```

要配置您的新处理器，请将您指定 TagFactory 的行替换为以下内容：

```
var tagProcessorFactory = Tags.GetHtmlTagProcessorFactory();
tagProcessorFactory.AddProcessor(new ResourceImageHtmlTagProcessor(), new[] { "resimg" });
htmlContext.SetTagFactory(tagProcessorFactory); 
```

# vba - 如何确定日期是否过去？

> ID：14126004
> 
> 赞同：5
> 
> 时间：2013-01-02T17:00:49.313
> 
> 标签：vba, excel

我有一个用于跟踪备份成功的 Excel 工作簿。我们有许多表，第一列中有日期，还有宏来根据日期是否过去进行计算。（宏要么隐藏或显示适当的行。）

这一直工作到昨天。我假设是因为宏正在进行字符串比较，而不是日期比较。（当被视为字符串时，“01/01/2013”​​小于“12/31/2012”。）

是否有一种本地方法来比较 VBA 中的日期，或者我是否需要先将日期转换为“yyyy/mm/dd”（如何做会很好）。

A2 是我们开始使用这个新版本电子表格的第一个日期的单元格，A454 是我将电子表格扩展到的最后一个日期，对应于今年年底。

```
Sub ShowAll()
    Dim cell As Range
    For Each cell In Range("A2:A454")
        cell.EntireRow.Hidden = False
    Next
End Sub

Sub RevealPast()
    Dim cell As Range
    For Each cell In Range("A2:A454")
        If cell.Value < Date Then
        cell.EntireRow.Hidden = False
        End If
    Next
End Sub

Sub HideFuture()
    Dim cell As Range
    For Each cell In Range("A2:A454")
        If cell.Value >= Date Then
            cell.EntireRow.Hidden = True
        End If
    Next
End Sub 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-02T17:06:04.027

试试这个`cDate`功能。

类似于：

```
If CDate("02/01/2013") > Date (or Now() if you want today's date) Then
   ... 
```

因此，在您的示例中：

```
If cDate(cell.Value) >= Date Then 
```

我希望我能正确理解您的问题，并希望这对您有所帮助...

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-02-12T16:34:11.147

我知道这与您所要求的有点不同，但这可能会在某天对某人有所帮助。如果日期增加了一个小时（2014 年 3 月 5 日上午 8:00:00）并且您想与您的日期进行比较，您可以：

'X 是您要比较的日期

```
x = CDate(x) 'formatting the date using the CDate function

x= Format(x, "MM/DD/YYYY") 'formatting the date by dropping the hour

x= CDate(x) 'formatting the date again 

If x <= Date Then
    ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-17T06:33:08.673

我听从你的回答，不！不 ！和不！

在 Excel VBA 上，这是错误的！您需要将日期格式化为“2020/07/18 09:48:51”才能进行比较

所以首先用 CDate() 函数获取 Date 变量，然后，你可以这样比较。否则它不起作用。

```
If Format(MyFileDate, "yyyymmdd hhnnss") >= Format(ReportStart, "yyyymmdd hhnnss") And Format(MyFileDate, "yyyymmdd hhnnss") < Format(ReportEnd, "yyyymmdd hhnnss") Then 
```

# mysql - 查找所有没有匹配结果 SQL 的行

> ID：14126007
> 
> 赞同：1
> 
> 时间：2013-01-02T17:01:04.110
> 
> 标签：mysql, select, join, left-join

我有一个表，其中包含我公司员工的名字和姓氏，以及一个确定他们是否仍在公司工作的字段。

我有另一个表，其中包含员工的任务列表-它还包含两个字段，其中包含员工的名字和姓氏（- 是的，我知道这不是一个好的结构）。

我希望能够使用 MySQL 查询找到仍在公司工作但没有任务的所有员工。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T17:03:37.457

```
SELECT *
FROM employees
WHERE still_working_for_company
AND NOT EXISTS (
  SELECT TRUE
  FROM tasks
  WHERE tasks.firstname = employees.firstname
  AND tasks.lastname = employees.lastname
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T17:06:16.027

你可以试试这个——

```
select * from FirstTable where firstTable.employee='yes' and 
     firstTable.empid IN (select secondTbl.empId where firstTable.empid = secondTbl.empId) 
```

查询未经测试，并假设您的第二个表（任务表）仅在分配任务时才包含员工数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T17:11:43.180

试试这个：

```
SELECT e.* 
FROM emp e 
LEFT JOIN emptask et ON e.firstname = et.firstname AND e.lastname = et.lastname 
WHERE e.stillworks = 'y' AND et.taskid IS NULL 
GROUP BY e.firstname, e.lastname 
```

# jquery - Jquery将外部img src加载到页面img src中

> ID：14126012
> 
> 赞同：0
> 
> 时间：2013-01-02T17:01:14.867
> 
> 标签：jquery, load

我在页面上有一个图像，图像上已经存在 src，但我想通过加载外部页面 img src 来替换它，并将其替换为新的。下面是我的代码，但它不起作用。请问你能看到错误吗？

```
<script>
                $(document).ready(function()
                {

    $dataImportURL = "/tv.aspx";
                    $(".videoThumbContainer img.attr('src')").load($dataImportURL + " #mediaImageContainer img.videoThumbImage.attr('src')");
                });
                </script>
                <div class="videoThumbContainer"><a class="videoPath" href="http://mydeo.vo.llnwd.net/o1/u/m3/b71658af521441fbb2dfbe71399ef1a1.mp4"><span class="videoThumbPlayBtn"></span><img class="videoThumbImage" src="/Assets/Manchester Arndale/3b37d9cf-3819-4b41-8efd-8464f513046e.jpg" /></a></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T17:12:03.137

从这里开始：

```
$dataImportURL = "http://images2.wikia.nocookie.net/__cb20120925054351/victorious/images/a/aa/Puppy1.jpg";

$(".videoThumbContainer img").attr('src', $dataImportURL) 
```

# c++ - (s)printf 的 C++ 标准替换

> ID：14126015
> 
> 赞同：2
> 
> 时间：2013-01-02T17:01:28.113
> 
> 标签：c++, string, string-formatting, iostream, stdio

我正在用 C++ 做一个服务器应用程序，它提供一个 HTML 页面作为对 HTTP 请求的响应。

问题是，目前，我的网页在我的代码中被写为一个*常量字符串*，我使用`<<`运算符 and插入其他字符串`std::stringstream`，仍然在字符串本身的编写过程中。请参阅示例以使其更清楚：

```
std::string first("foo");
std::string second("bar");
std::string third("foobar");

std::stringstream ss;
ss << "<html>\n"
    "<head>\n"
    "<title>Bitches Brew</title>\n"
    "</head>\n"
    "<body>\n"
    "First string: "
    << first << "\n"
    "Second string: "
    << second << "\n"
    "Third string: "
    << third << "\n"
    "</body>\n"
    "</html>"; 
```

尽管我不能简单地将内容填充到文件中，但会发生这种情况，因为与 HTML 结构混合的数据会在执行过程中发生变化。这意味着我不能简单地将整个页面写入文件中，字符串值为`first`、`second`和`third`，因为这些值会动态变化。

对于第一个请求，我会发送带有 的页面`first = "foo";`，而在第二个请求中，我会发送`first = "anything else"`.

另外，我可以简单地返回`sscanf/sprintf`from`stdio.h`并插入我想要的文本——我只需要用正确的格式 ( `%s`) 替换字符串间隙，从文件中读取 HTML 结构，然后插入我想要的任何内容。

我想用 C++ 做这个，没有 C 库函数，但我不知道用什么来做这个。对此的 C++*标准*解决方案是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T17:17:22.183

标准 C++ 除了自身之外，没有直接等效于`(s)printf`-like 的格式。`(s)printf`但是，有很多格式库提供此功能，例如[cppformat](https://github.com/cppformat/cppformat)库，其中包含 Python 的 C++ 实现`str.format`和安全的`printf`.

也就是说，我建议改用模板引擎，请参阅 [C++ HTML 模板框架、模板化库、HTML 生成器库](https://stackoverflow.com/questions/355650/c-html-template-framework-templatizing-library-html-generator-library)。

或者，您总是可以通过读取文件并用参数替换一些占位符来重新发明轮子并编写自己的模板引擎。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T17:19:29.437

关于什么：

```
void RenderWebPage(std::stringstream& ss, std::string& first, std::string& second, std::string& third)
{
    ss << "<html>\n"
        "<head>\n"
        "<title>Bitches Brew</title>\n"
        "</head>\n"
        "<body>\n"
        "First string: "
        << first << "\n"
        "Second string: "
        << second << "\n"
        "Third string: "
        << third << "\n"
        "</body>\n"
        "</html>";
} 
```

你可以这样称呼它：

```
std::stringstream ss;
std::string first("foo");
std::string second("bar");
std::string third("foobar");

RenderWebPage(ss, first, second, third);

first = "anything else";
RenderWebPage(ss, first, second, third);

second = "seconds too";
RenderWebPage(ss, first, second, third); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-02T17:20:01.917

你可以像这样得到想要的结果：

1.  将静态 HTML 存储在一个文件中，其中包含动态文本的占位符
2.  将 HTML 文件读入`std::string`
3.  对于每段动态文本，在字符串 ( `std::string::find`) 中找到其占位符，并将占位符替换为动态文本 ( `std::string::replace`)。
4.  将修改后的字符串写入最终目的地。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-02T17:38:36.963

如果您不想像其他答案（正确）建议的那样使用框架，我想您可以从这个小程序中获得灵感：

```
#include <iostream>
#include <map>

using namespace std;

string instantiate_html(string const& templateHTML, map<string, string> const& replacements)
{
    string outputHTML = templateHTML;
    for (auto& entry : replacements)
    {
        string placeholder = "<$" + entry.first + "$>";
        size_t it = outputHTML.find(placeholder);
        if (it != string::npos)
        {
            outputHTML.replace(it, placeholder.size(), entry.second);
        }
    }

    return outputHTML;
}

int main()
{
    map<string, string> replacements;
    replacements["name"] = "Mark";
    replacements["surname"] = "Brown";

    // Normally you would read this string from your template file
    string templateHTML = "<html><body><$name$><$surname$></body></html>";

    string outputHTML = instantiate_html(templateHTML, replacements);

    cout << outputHTML;

    return 0;
} 
```

# collections - Clojure 集合上的操作

> ID：14126025
> 
> 赞同：7
> 
> 时间：2013-01-02T17:02:27.107
> 
> 标签：collections, clojure, lazy-evaluation

我对 Clojure 很陌生，虽然我熟悉函数式语言，主要是 Scala。

我试图弄清楚在 Clojure 中操作集合的惯用方式是什么。我对诸如`map`.

在 Scala 中，非常小心地制作，以便`map`始终返回与原始集合相同类型的集合，只要这是有意义的：

```
List(1, 2, 3) map (2 *) == List(2, 4, 6)
Set(1, 2, 3) map (2 *) == Set(2, 4, 6)
Vector(1, 2, 3) map (2 *) == Vector(2, 4, 6) 
```

相反，据我所知，在 Clojure 中，大多数操作（例如`map`or `filter`）都是惰性的，即使在急切的数据结构上调用也是如此。这有一个奇怪的结果

```
(map #(* 2 %) [1 2 3]) 
```

惰性列表而不是向量。

虽然我通常更喜欢惰性操作，但我发现上述内容令人困惑。事实上，向量保证了某些列表不能保证的性能特征。

假设我使用上面的结果并在其末尾附加。如果我理解正确，在我尝试附加结果之前不会评估结果，然后评估它并且我得到一个列表而不是向量；所以我必须遍历它以追加到最后。当然我可以在之后把它变成一个向量，但这会变得混乱并且可以被忽略。

如果我理解正确，`map`它是多态的，实现它不会是一个问题，因此它返回向量上的向量、列表上的列表、流上的流（这次是惰性语义）等等。我想我遗漏了关于 Clojure 的基本设计及其习语的一些内容。

> clojure 数据结构的基本操作不影响结构的原因是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-02T17:47:06.213

在 Clojure 中，许多函数都是基于`Seq`抽象的。这种方法的好处是您不必为每个不同的集合类型编写一个函数——只要您的集合可以被视为一个序列（有头部和可能有尾部的事物），您就可以将它与所有集合一起使用seq 函数。接受 seqs 和输出 seqs 的函数比那些将它们的使用限制在特定集合类型的函数更具可组合性，因此可重用。在 seq 上编写自己的函数时，您不需要处理特殊情况，例如：如果用户给我一个向量，我必须返回一个向量等。您的函数将与任何其他函数一样适合 seq 管道序列函数。

map 返回惰性序列的原因是一种设计选择。在 Clojure 中，惰性是许多这些函数式构造的默认设置。如果您想要其他行为，例如没有中间集合的并行性，请查看 reducers 库：[http ://clojure.com/blog/2012/05/08/reducers-a-library-and-model-for-收集处理.html](http://clojure.com/blog/2012/05/08/reducers-a-library-and-model-for-collection-processing.html)

就性能而言，map 总是必须在集合上应用一个函数 n 次，从第一个元素到最后一个元素，所以它的性能总是 O(n) 或更差。在这种情况下，向量或列表没有区别。懒惰可能给你带来的好处是你只会消费列表的第一部分。如果您必须在地图输出的末尾附加一些内容，那么向量确实更有效。在这种情况下，您可以使用`mapv`（在 Clojure 1.4 中添加）：它接收一个集合并输出一个向量。我想说，只有在你有充分理由的情况下才担心这些性能优化。大多数时候不值得。

在此处阅读有关 seq 抽象的更多信息：[`http://clojure.org/sequences`](http://clojure.org/sequences)

Clojure 1.4 中添加的另一个向量返回高阶函数是`filterv`.

# html - 将元素放在包含浮动元素的行上的居中元素旁边

> ID：14126028
> 
> 赞同：0
> 
> 时间：2013-01-02T17:02:44.003
> 
> 标签：html, css, css-float

[在此](http://jsbin.com/urodit/14/edit)示例中，如何将`smiley`（黄色背景）紧跟在居中的单词`Peter`（红色背景）之后？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T17:20:30.443

If you give `.name` the `position: relative` property, you can declare a pseudo-element for it, which is absolutely positioned.

```
.name:after {
  position: absolute;
  left: 100%;
  background: yellow;
  content: ': )'; /* the space is non-braking */
} 
```

[http://jsbin.com/urodit/20/edit](http://jsbin.com/urodit/20/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T17:25:26.043

你应该可以用这样的浮点数来做到这一点：http: [//jsbin.com/urodit/26/](http://jsbin.com/urodit/26/)

如果这也不是您想要的，一些 3 列布局的谷歌搜索可能会帮助您找到想法。

```
.toggle-me {
background-color: green;
float:left;
} 

.name {
background-color: red;
float:left; 
width:40px;
margin:auto;
}

.description {
background-color: yellow;
width: 20px;
float:left;
}

.container-one{
 float:right;
 width:100%;

}

.favourite-food {
background-color: orange;
float:left;

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T20:46:11.913

[这](http://jsbin.com/urodit/57/edit)是一个丑陋的解决方案。这不是一个好的解决方案，因为您需要摆弄`width`浮动在右侧的元素。您还需要将位于居中元素右侧的元素放在 html 中居中元素*之前。*

**如果有人能够发布更清洁的解决方案，我将接受该答案而不是这个答案。**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T19:27:55.670

检查此[http://jsbin.com/urodit/30/edit](http://jsbin.com/urodit/30/edit)
已 添加`.container-one { text-align: center; }`并将`.name { display: inline-block; }`名称居中。然后`.description { display: inline-block; }`让它跟在名字后面。也被删除`.name { margin: auto; }`，因为它不再需要。并补充道`.name { text-align: left; }`。请注意之前和之后

的 HTML 注释：`.name``.description`

```
<div class="container-one">
    <div class="toggle-me">|Toggle|</div>
    <div class="name">Peter</div><!--
 --><div class="description">: )</div>
</div> 
```

这是为了去除由代码本身的换行和缩进引起的行内块元素之间的空白。如果您不想删除空格，只需删除 HTML 注释。

# javascript - 我如何将我的井字游戏 AI 编程为只选择空白框？

> ID：14126030
> 
> 赞同：-3
> 
> 时间：2013-01-02T17:02:47.497
> 
> 标签：javascript, html

我使用 javascript 制作了一个井字游戏，并且我制作了一个 ai，它轮流选择随机框。但是，它可能会选择同一个框两次，甚至是玩家（即 X）选择的一个框。这是代码：

```
 <!DOCTYPE html>
                   <html>
                   <body>

                   <input type="button" id="k1" value="  " onclick="tictactoe(this)">  
                   <input type="button" id="k2" value="  " onclick="tictactoe(this)">
                   <input type="button" id="k3" value="  " onclick="tictactoe(this)">
                   <br />
                   <input type="button" id="k4" value="  " onclick="tictactoe(this)">
                   <input type="button" id="k5" value="  " onclick="tictactoe(this)">
                   <input type="button" id="k6" value="  " onclick="tictactoe(this)">
                   <br />
                   <input type="button" id="k7" value="  " onclick="tictactoe(this)">
                   <input type="button" id="k8" value="  " onclick="tictactoe(this)">
                   <input type="button" id="k9" value="  " onclick="tictactoe(this)">
                   <br />

                   <script>
                   var nummoves=0;
                   var nummoves1=1;
                   var nummoves2=2;
                   var nummoves3=3;
                   var nummoves4=4;
                   var nummoves5=5;
                   var nummoves6=6;
                   var nummoves7=7;
                   var nummoves8=8;
                   var nummoves9=9;
                   var comp;

                   function tictactoe(square)
                   {

                   var check=["c1","c2","c3","c4","c5","c6","c7","c8","c9"]
                   check[0]=document.getElementById("k1");
                   check[1]=document.getElementById("k2");
                   check[2]=document.getElementById("k3");
                   check[3]=document.getElementById("k4");
                   check[4]=document.getElementById("k5");
                   check[5]=document.getElementById("k6");
                   check[6]=document.getElementById("k7");
                   check[7]=document.getElementById("k8");
                   check[8]=document.getElementById("k9");
                   comp=check[Math.floor(Math.random()*check.length)];

                   if(nummoves==0)
                   {
                   square.value="X";
                   }

                   if(nummoves1==1)
                   {
                   comp.value="O";
                   }

                   if(nummoves2==2)
                   {
                   square.value="X";
                   }

                   if(nummoves3==3)
                   {
                   comp.value="O";
                   }

                   if(nummoves4==4)
                   {
                   square.value="X";
                   }

                   if(nummoves5==5)
                   {
                   comp.value="O";
                    }

                 if(nummoves6==6)
                 {
                 square.value="X";
                 }

                if(nummoves7==7)
                {
                comp.value="O";
                }

                if(nummoves8==8)
                {
                 square.value="X";
                }

              if(nummoves9==9)
               {
               comp.value="O";;
               }
              }

               </script>
                </body>
                 </html> 
```

那么我将如何更改此代码（但不是全部！），以便 ai 只知道选择一个空白框？

此外，可以制作一个聪明的AI，例如它可以阻止玩家连续获得三个，或者甚至尝试自己获得三个连续。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T17:23:39.753

很快就做到了。唯一改变的是*onclick*属性中的代码`<script>`和删除。阅读代码中的注释，看看会发生什么。

 *```
var squares = [], i = 10, move_number = 1;
while(--i) // build array of choices
    squares[i-1] = document.getElementById('k'+i), // put square in array
    squares[i-1].addEventListener('click', function () {tictactoe(this);}, false); // attach click listener

// `squares` keeps track of available squares

function randomSquare() { // A.I. square chooser
    var i = Math.floor( Math.random() * squares.length ),
        e = squares[i];
    squares.splice(i,1); // remove choice from available
    return e;
}

function tictactoe(square) { // passing `this` as first arg
    var i;
    square || (square = randomSquare()); // if no arg
    if (move_number % 2) {
        i = squares.indexOf(square);
        if (i === -1) return; // square taken, do nothing
        else squares.splice(i,1); // remove square from available
        square.value="X";
        ++move_number;
        tictactoe(); // A.I. turn
    } else {
        square.value="O";
        ++move_number;
    }
} 
```

[示例小提琴](http://jsfiddle.net/StgU4/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T17:11:07.550

跟踪所做的标记（可能在数组中）并让脚本在标记之前检查数组以查看该点是否为空；如果它不为空，则脚本需要选择不同的位置。

或添加此代替`comp=check[Math.floor(Math.random()*check.length)]`：

```
var checking = true; // use this for the loop condition
while (checking)
{
    comp = check[Math.floor(Math.random()*check.length)];
    if (comp.value == "  ") // check to see that the square is empty
    {
        checking = false; // if so, set the loop condition to false so the loop ends
    }
} 
```*

# mysql - 使用 ODBC 连接到 MYSQL 在 MS-Access 中运行 SQL 时出错

> ID：14126031
> 
> 赞同：1
> 
> 时间：2013-01-02T17:02:57.497
> 
> 标签：mysql, ms-access, odbc, driver

我正在帮助一个非营利组织将 MS-Access 数据迁移到 MYSQL。因此，我将数据移植到 MYSQL，并使用 ODBC 在 ms-access 中创建了对 MYSQL 表的链接。大多数现有的 SQL 都可以正常工作。但是我被这个错误难住了-

您的 SQL 语法有错误，请检查与您的 MySQL 服务器版本相对应的手册，以便在 UNION 附近使用正确的语法...

我已经将带有 7 个 UNIONS 的 SQL 剥离到它仍然失败的地方。

```
(SELECT 1 as A FROM Households H)
UNION ALL
(SELECT 2 as A FROM Households H)
UNION ALL
(SELECT 3 as A FROM Households H) 
```

对我来说，只要我在 SQL 下面只运行一个 UNION 含义，我就能够成功运行，但是当我添加第三个 UNION 时，它会给出 ODBC 错误

```
(SELECT 1 as A FROM Households H)
UNION ALL
(SELECT 2 as A FROM Households H) 
```

我尝试使用**`** or **'**或**[]**但这些都没有帮助。我对这个错误感到沮丧的原因是它要么全部失败，要么全部失败，只有在使用两个或多个 UNION 子句时才会出错。这可能是驱动程序中的潜在错误吗？

我在带有 ms-access 和 32 位驱动程序的 win-7 64 位上使用 mysql-64 位。这不应该是架构问题，因为我能够使用多个 UNION 运行其他查询并访问同一组表。

如果有人可以提供有关如何进一步调试的指示，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T17:57:58.690

在我的 Access 版本中，当我在设计 (SQL) 视图中编辑查询时，顶部有三个按钮。“联合”、“传递”和“数据定义”。

如果我单击“传递”，则您的查询有效。如果我单击“联合”它会中断。你可以在这个查询中使用“Pass-Through”吗？

即使在“联合”或“数据定义”模式下，这似乎也有效：

```
(SELECT 1, column1 as A FROM Households H)
UNION ALL
(SELECT 2, column2 as A FROM Households H)
UNION ALL
(SELECT 3, column3 as A FROM Households H); 
```

也许 Access 只被一列搞糊涂了？

或者，只需使用多路复用表而不是联合：

```
SELECT mux.id,
IIf(mux.id=1,column1,IIf(mux.id=2,column2,column3)) AS A
FROM Households, mux; 
```

注意：mux 表中应该有 3 个值 1,2,3。如果它有更多，您希望限制在 where 子句中的前 3 个（或 n 个）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T10:48:34.563

这是一个已知的 MySQL 问题：[两个以上 UNION SELECT 语句问题（使用 MS Access）](http://bugs.mysql.com/bug.php?id=7684) ，但我不知道问题出在 MSAccess SQL 解析器（编译为 ODBC SQL）还是 MySQL ODBC 驱动程序（其中将 ODBC SQL 编译为 MySQL SQL）

为了解决这个问题，我必须查看 ODBC 日志和 ODBC 规范，并查看 Access 是否发出了有效的 ODBC SQL。

那将是浪费精力，因为无论如何使用传递查询更有意义。在这个地方使用本机 MSAccess 查询的主要原因是连接到不同的数据源 - 例如，Excel 电子表格和 MySQL 表 - 根据 MySQL 错误报告上的评论，当你去做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T22:08:59.070

我不确定问题出在哪里，但我认为（尽管这只是一个假设）这是在 MS Access 方面。我有两个`UNION`查询，每个查询都将其他查询放在一起。两者都使用了一些复杂的子查询，所以我在创建传递查询时遇到了很多问题，而且我不想使用 MySQL“视图”。

令人惊讶的是，我的一个查询有效，另一个显示错误。我的想法是，工作查询使用了一些 Access 功能，而另一个是某种`SELECT ... FROM`.

我不知道规则，但我认为当您的查询很简单时，Access 会将其发送到外部数据库引擎并再放置一个括号并导致错误。如果您执行复杂的查询，Access 会获取它需要的所有数据并自行执行所有必要的操作。例如，您可能会尝试创建一个使用 MSSQL`TRANSFORM`语句的数据透视查询，这在 MySQL 中不存在，因此很明显 Access 会自己处理它。那么为什么它不能自己制造`SELECT`呢？我不知道。也许是一些性能原因？

我的工作查询与另一个不同的是，它还有一个由内置 Access 函数计算的（字符串）字段。它还使用了访问`&`运算符，这在 MySQL 中具有另一种含义（逻辑与）。（顺便在 MySQL 使用`CONCAT`函数中加入字符串）。它们当然需要由 Access 评估，因为 MySQL 不理解这种将字符串连接在一起的方法。

我建议`UNION`不要从表中创建，而是从查询中创建（`SELECT * FROM tablename`仅此而已），并为它们提供一个您不需要的字段，但这将强制 Access 处理查询。所以一个查询（在 Access 中）应该是这样的：

```
SELECT tablename.*, [somefield1]&[somefield2] AS useless_field FROM tablename; 
```

（在我的 Access 2000 操作中，像`"a" & "b"`or`IIf(true;true;false)`可能被简化和解决了，所以它不起作用。我认为至少需要一个动态字段来评估。我也没有进行性能测试。如果你添加到整数可能会最快，也许只是将您的索引增加1？）。

然后，当然，你把它结合在一起：

```
SELECT * FROM query1
UNION ALL
SELECT * FROM query2
UNION ALL
SELECT * FROM query3
UNION ALL 
```

...

```
SELECT * FROM queryn
; 
```

你当然不需要这个`useless_field`。

我同意这是一种解决方法，但我没有其他想法。

# javascript - SammyJS，判断是否是第一个请求

> ID：14126033
> 
> 赞同：1
> 
> 时间：2013-01-02T17:03:04.977
> 
> 标签：javascript, sammy.js

我想确定是否是第一次执行 sammyJS 路由（如在刷新浏览器时），或者是否在页面初始加载后访问该路由。

我的用例是，在某些情况下，当执行路由时，新内容不可见，因为用户向下滚动了页面。当用户已经加载页面并单击触发路由的链接时，我想做一个 $.scrollTo ，但是如果用户直接在地址栏中访问该路由，则不会执行 scrollTo 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T14:43:59.993

如果我明白你的想法，你只需要一个最初设置为 false 的标志，然后在路由回调中切换为 true。然后，如果标志为假，则调用滚动方法。标志范围必须大于 Sammy 应用程序对象范围，即您应该在调用 Sammy 初始化函数之前定义标志。每次浏览器重新加载页面时，该标志将再次为 false（请记住，javascript 引擎在每次 HTML 页面刷新/重新加载时重新启动）。

如果您需要将此逻辑应用于任何路由，则可以使用`before`、`after`和`around`事件之一。查看[Sammy API 文档](http://www.sammyjs.org/docs/api/0.7.2/all#Sammy.Application)了解详细信息。

# c# - 如何使用计时器等待？

> ID：14126035
> 
> 赞同：13
> 
> 时间：2013-01-02T17:03:15.660
> 
> 标签：c#, winforms, timer, sleep

我试图通过使用计时器来延迟我的方法中的事件，但是我不一定了解如何使用计时器来等待。

我将计时器设置为 2 秒，但是当我运行此代码时，最后一次调用运行时没有 2 秒延迟。

```
Timer timer = new Timer();
timer.Tick += new EventHandler(timer_Tick); // Everytime timer ticks, timer_Tick will be called
timer.Interval = (1000) * (2);              // Timer will tick evert second
timer.Enabled = true;                       // Enable the timer

void timer_Tick(object sender, EventArgs e)
{
    timer.Stop();
}

private void button1_Click(object sender, EventArgs e)
{
    label1.Text = "first";
    timer.Start();
    label1.Text = "second";
} 
```

因此，当我单击按钮时，它会立即将 label1 显示为“第二”，而不是更改为“第一”，等待 2 秒，然后更改为“第二”。我在这里阅读了很多关于使用计时器而不是 thread.sleep 的线程，但我似乎无法找到/弄清楚如何实际实现它。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-02T17:10:11.053

如果您使用的是 C# 5.0 `await`，这*会更*容易：

```
private async void button1_Click(object sender, EventArgs e)
{
    label1.Text = "first";
    await Task.Delay(2000);
    label1.Text = "second";
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-02T17:05:39.677

`timer.Start()`只是启动计时器，但在计时器在后台运行时立即返回。因此，在将标签文本设置为`first`和设置之间`second`几乎没有停顿。您要做的是等待计时器滴答作响，然后再次更新标签：

```
void timer_Tick(object sender, EventArgs e)
{
    timer.Stop();
    label1.Text = "second";
}

private void button1_Click(object sender, EventArgs e)
{
    label1.Text = "first";
    timer.Start();
} 
```

顺便提一句。你不应该设置`timer.Enabled`为 true，你已经开始使用`timer.Start()`.

如评论中所述，您可以将计时器创建放入一个方法中，如下所示（注意：这是未经测试的）：

```
public void Delayed(int delay, Action action)
{
    Timer timer = new Timer();
    timer.Interval = delay;
    timer.Tick += (s, e) => {
        action();
        timer.Stop();
    };
    timer.Start();
} 
```

然后你可以像这样使用它：

```
private void button1_Click(object sender, EventArgs e)
{
    label1.Text = "first";
    Delayed(2000, () => label1.Text = "second");
} 
```

## Tergiver的后续行动

> 使用 Delayed 是否包含内存泄漏（引用泄漏）？
> 
> 订阅一个事件总是会创建一个双向引用。
> 
> 在这种情况下`timer.Tick`，获取对匿名函数 (lambda) 的引用。该函数提升了一个局部变量`timer`，尽管它是一个引用，而不是一个值，并且包含对传入的 Action 委托的引用。该委托将包含对 的引用`label1`，即 的实例成员`Form`。那么是否有从`Timer`到 的循环引用`Form`？
> 
> 我不知道答案，我觉得有点难以推理。因为我不知道，所以我会删除 lambda in 的使用`Delayed`，使其成为正确的方法并拥有它，除了停止计时器（这是`sender`方法的参数）之外，还删除事件。

通常 lambdas 不会导致垃圾收集问题。在这种情况下，计时器实例仅存在于本地，并且 lambda 中的引用不会阻止垃圾收集来收集实例（另请参阅[此问题](https://stackoverflow.com/questions/7346121/does-lambda-event-subscription-create-memory-leak)）。

我实际上使用 .NET Memory Profiler 再次对此进行了测试。计时器对象收集得很好，没有发生泄漏。探查器确实给了我一个警告，尽管有些情况“[...] 已经被垃圾收集而没有被正确处理”。删除事件处理程序本身（通过保留对它的引用）并没有解决这个问题。将捕获的计时器引用更改为`(Timer)s`也没有改变。

有什么帮助 - 显然 - 是在停止计时器后在事件处理程序中调用 a `timer.Dispose()`，但我认为这是否真的有必要。我不认为探查器警告/注释那么重要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T17:05:23.480

如果您要做的只是在计时器滴答作响时更改文本，那么您最好不要放...

```
label1.Text = "second"; 
```

...在计时器滴答声中，在您将计时器更改为启用之前或之后 = false;

像这样；

```
void timer_Tick(object sender, EventArgs e)
{
  timer.Stop();
  label1.Text = "second";
}

private void button1_Click(object sender, EventArgs e)
{
  label1.Text = "first";
  timer.Start();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-14T18:32:23.643

```
 private bool Delay(int millisecond)       
       {

           Stopwatch sw = new Stopwatch();
           sw.Start();
           bool flag = false;
           while (!flag)
           {
               if (sw.ElapsedMilliseconds > millisecond) 
               {
                  flag = true;
               }
           }
           sw.Stop();
           return true;

       }

        bool del = Delay(1000); 
```

# c# - 设置带有特殊字符的文本

> ID：14126041
> 
> 赞同：0
> 
> 时间：2013-01-02T17:03:38.403
> 
> 标签：c#, wpf, string, character

我需要在代码中的字符串中显示 TextBlock 中的特殊字符。

```
<TextBlock x:Name="tboxData" TextWrapping="Wrap" Text="&gt;&gt; &lt;&lt;" /> 
```

正在工作，但我需要从 c# 执行此操作：

```
tboxData.Text = "&gt;&gt; &lt;&lt;"; 
```

这不会在 TextBlock中打印**>> << 。**

我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T17:06:07.873

这不应该工作吗？

```
tboxData.Text = ">><<"; 
```

XAML 要求您使用编码的原因是因为 XAML 会解析`<`和`>`字符，因此您需要确保解析器知道您想要显示`<>`字符而不是将它们解析为标记。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T17:05:53.713

只需使用：

```
tboxData.Text = ">><<"; 
```

在 C# 中编写字符串时，您不必担心 HTML 实体。它必须在 XAML 中完成，因为这些字符代表代码的开始和结束标记。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-02T17:14:39.923

假设您可能出于某种原因需要使用编码字符（也许您没有使用文字并且正在读取 xml 文件或其他内容）：

```
tboxData.Text = System.Web.HttpUtility.HtmlDecode("&gt;&gt; &lt;&lt;") 
```

请注意，您必须添加对`System.Web`程序集的引用。

# android - zxing 条码扫描仪读取第二个二维码时自动对焦问题

> ID：14126045
> 
> 赞同：1
> 
> 时间：2013-01-02T17:03:57.013
> 
> 标签：android, ios, titanium, titanium-mobile, zxing

我正在使用 zxing ( [http://code.google.com/p/zxing/](http://code.google.com/p/zxing/) ) 库在 Android 和 iOS 上进行二维码阅读。它非常适合阅读第一个 qr 代码，但随后会遇到问题。

一种简单的重现方法是读取一个二维码，然后在设备前面放置另一个二维码。扫描仪不会读取新的二维码。移动设备使二维码完全脱离屏幕后，再移动设备重新聚焦二维码，即可读取成功。

zxing 中是否有一些我可以修改的自动对焦设置？或者有没有办法在读取第一个代码后“重置”扫描仪，以便它准备好读取第二个代码？

我还应该提到我正在使用 zxing 作为 Titanium 中的一个模块。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T09:59:44.543

我认为是相机权限问题，您是否授予自动对焦权限和其他权限？

像：

```
<uses-permission android:name="android.permission.CAMERA" />
<uses-feature android:name="android.hardware.camera.autofocus"/>
<uses-permission android:name="android.permission.VIBRATE"/>
<uses-permission android:name="android.permission.FLASHLIGHT"/> 
```

如果您仍然遇到错误，请尝试添加更多权限，如下所示：

```
<uses-feature
        android:name="android.hardware.camera"
        android:required="false" />
    <uses-feature
        android:name="android.hardware.camera.front"
        android:required="false" />
    <uses-feature
        android:name="android.hardware.camera.autofocus"
        android:required="false" />
    <uses-feature
        android:name="android.hardware.camera.flash"
        android:required="false" />
    <uses-feature android:name="android.hardware.screen.landscape" />
    <uses-feature
        android:name="android.hardware.wifi"
        android:required="false" />
    <uses-feature
        android:name="android.hardware.touchscreen"
        android:required="false" />
    <uses-feature android:name="android.hardware.camera" /> 
```

# java - 使用 super 与创建 Object 类的新对象

> ID：14126049
> 
> 赞同：0
> 
> 时间：2013-01-02T17:04:09.377
> 
> 标签：java, protected

为什么我们可以`clone()`使用`super.`符号访问方法，但不能通过创建 Object 类型的新对象来访问它。例如，如果我做类似的事情

```
Object obj = new Object(); 
```

然后（使用 Eclipse）我无法`clone()`使用点运算符查看方法，这表明 obj 无法查看`Object`类的受保护成员（只有公共方法可见）。

现在，如果我使用`super`关键字 ie use `super.`，我也可以查看受保护的方法。

所以我的问题是，在一个没有显式继承（扩展）其他类的类中——我知道它隐式调用 Object 类构造函数，即 Object 类是它的超类——为什么 super 关键字可以访问受保护的Object 类的成员，但不是通过创建 Object 类的实例来实现的（只有公共成员对 Object 类的实例可见）？

这是更清晰的代码（虽然它没有任何意义，但第一部分符合而其他不符合）：

```
public class temp {

    public temp() {
        // TODO Auto-generated constructor stub
        TestBikes t1 = new  TestBikes();
        Object ob1 = new Object();
        try {
            t1 = (TestBikes)super.clone(); //SUPER KEYWORD IS ABLE TO ACCESS
                                                   //PROTECTED MEMBERS OF Object 
                                                   //CLASS   
        } catch (CloneNotSupportedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        try {
            t1 = (TestBikes)ob1.clone();  // HERE IS THE ERROR SAYING clone()
                                                  // FROM Object CLASS IS NOT VISIBLE
        } catch (CloneNotSupportedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T17:13:45.110

`protected`表示只能由子类（或同一包中的类）访问，因此您可以在子类中使用`this`or`super`或 nothing 访问它，但不能访问另一个实例。

您的示例可以编译，但不会运行。

```
 try {
        t1 = (TestBikes)super.clone(); // creates a clone of temp, not a TestBikes
        t1 = (TestBikes)this.clone(); // does the same thing  
        t1 = (TestBikes)clone(); // does the same thing  

    } catch (CloneNotSupportedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

顺便说一句：我知道这只是一个例子，但是在它的构造函数中克隆一个对象是个坏主意。

* * *

它必须受到保护，以便您可以在实现`Cloneable`. 但是，并非所有对象都是可克隆的，因此通常无法访问。

使用`super`可以访问受保护的方法。使用引用来创建一个方法需要该方法是可访问的，例如公共的或本地包并且在同一个包中。

AFAIK，通常认为 clone()/Cloneable API 已损坏，应避免使用（原始数组除外），例如 Cloneable 接口没有`Object clone();`将其公开的方法，它返回`Object`必须强制转换的方法。

# c# - 如何通过按下按钮启动新的 WPF 页面

> ID：14126052
> 
> 赞同：2
> 
> 时间：2013-01-02T17:04:12.450
> 
> 标签：c#, wpf, mvvm, binding, command

我在使用命令启动新的 WPF 页面时遇到问题。我尝试通过编写使用新的 WPF 窗口，但没有任何反应。

我看不到错误？程序运行良好，但是当按下按钮时，什么也没有发生

我的 XAML。

```
<Button 
            Command="{Binding Path=OpenCrudCommand, UpdateSourceTrigger=PropertyChanged}" 
            Content="CRUD" 
            HorizontalAlignment="Left" 
            Margin="10,352,0,0" 
            VerticalAlignment="Top" 
            Width="83"/> 
```

我的 OpenCrudCommand。

如您所见，我尝试使用新的 WPF 窗口，而不是 WPF 页面，但它也不起作用。

第 1 页是 WPF 窗口窗体，第 2 页是 WPF 页面窗体

```
{
    class OpenCrudCommand
    {
        ProductViewModel _avm;

         public OpenCrudCommand(ProductViewModel avm)
        {
            _avm = avm;
        }

        public void Execute(object parameter)
        {
            var hej = new Page2();
            hej.Show();
        }

    }
} 
```

我还有一个问题，我应该在命令中还是在视图模型中编写打开新页面的代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T17:15:39.327

为了更清楚起见，您将绑定到泛型 (POCO) 类。通常，您必须绑定到实现该`ICommand`接口的类。搜索`RelayCommand`或`DelegateCommand`查看几个实现。现在一旦完成，您将设置一个类（通常是 ViewModel 类），该类将用作 WPF 窗口的 DataContext。然后，您将在 ViewModel 上公开一个属性，该属性会公开命令（即）

```
public ICommand MyCommand
{
     get
     {
          return this.myCommand;
     }
} 
```

然后您的绑定将遵循`Command="{Binding MyCommand}"`（您不需要 UpdateSourceTrigger 属性）。

如果这仍然令人困惑，请随时跟进其他问题，但我建议阅读有关[MVVM 模式](https://msdn.microsoft.com/en-us/library/hh848246.aspx)的更多信息。

# css - 全屏 3x3 CSS 网格

> ID：14126054
> 
> 赞同：1
> 
> 时间：2013-01-02T17:04:14.683
> 
> 标签：css

我需要一个关于如何创建全屏 3x3 CSS 网格的好例子。周围的瓷砖应该有一个固定的高度/宽度，而中间的瓷砖应该有屏幕宽度/高度的其余部分。

我已经在网上搜索了示例，但还没有偶然发现一个好的示例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T17:28:25.660

使用 display:table 可以轻松完成 3x3 网格

```
<style type="text/css">
    html, body {
        padding: 0;
        margin: 0;
    }
    .grid3x3 {
        display:table;
        height:100%;
        width:100%;
    }
    .grid3x3 > div {
        display:table-row;
        width:100%;
    }
    .grid3x3 > div:first-child,
    .grid3x3 > div:last-child {
        height: 100px;
    }
    .grid3x3 > div > div {
        display:table-cell;
    }
    .grid3x3 > div > div:first-child,
    .grid3x3 > div > div:last-child {
        width:100px;
    }

    div {
        outline: 1px solid orange;
    }

</style>
<div class="grid3x3">
    <div>
        <div>1</div>
        <div>2</div>
        <div>3</div>
    </div>
    <div>
        <div>4</div>
        <div>5</div>
        <div>6</div>
    </div>
    <div>
        <div>7</div>
        <div>8</div>
        <div>9</div>
    </div>
</div> 
```

# javascript - 单击按钮时显示隐藏的 div（幻灯片）（更改文本）

> ID：14126055
> 
> 赞同：1
> 
> 时间：2013-01-02T17:04:18.067
> 
> 标签：javascript, jquery

我有一个页面，我想默认隐藏一些内容（#hidden_​​content）。在此页面上有一个带有文本示例“显示内容”的 CSS 按钮。

单击此按钮时，我希望 div #hidden_​​content 以幻灯片效果显示，同时按钮“显示内容”上的文本将更改为示例“隐藏内容”，并且单击内容时将再次隐藏。

**按钮**

```
<a href="" id="button" class="button_style">Show content</a> 
```

**分区**

```
<div id="hidden_content">Content</div> 
```

**幻灯片脚本**

```
$(document).ready(function(){
  $("#button").click(function(){
    $("#hidden_content").slideToggle("slow");
  });
}); 
```

现在我想要按钮上的文本，以便在单击时更改。我怎么做？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T17:11:19.097

试试这个：http: [//jsfiddle.net/dRpWv/1/](http://jsfiddle.net/dRpWv/1/)

```
$(document).ready(function() {
  $("#button").toggle(function() {
    $(this).text('Hide Content');
  }, function() {
    $(this).text('show Content');
  }).click(function(){
      $("#hidden_content").slideToggle("slow");
  });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T17:06:05.683

jQuery有一个`text()`功能：

```
$("#button").text("change"); 
```

你可以在你的函数中使用它：

```
$(document).ready(function(){
    $("#button").click(function(){
        $("#hidden_content").slideToggle("slow");
        $("#button").text("change");
    });
}); 
```

您可以根据内容是否隐藏：

```
$("#button").text($("#hidden_content").is(":hidden")?"Show content":"Hide content"); 
```

确保在切换内容后使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T17:12:12.530

从[slideToggle 文档页面](http://api.jquery.com/slidetoggle/)：您可以添加一个回调，该回调将在动画完成后执行

```
$('#hidden_content').sliddeToggle('slow', function(){
  if( $('#hidden_content').is(':hidden') ){
    $('#button').text('Show content');
  } else {
    $('#button').text('Hide content');
  }
}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-24T12:17:30.210

根据 w3schools 的说法，`toggle()`在 1.9 版本之后删除了 event 方法。（注意：这是**事件方法**toggle()，不是**效果方法**toggle()。效果方法 toggle() 保持不变。）

[Jai 的答案](https://stackoverflow.com/a/14126157/4627429)很棒，所以我使用了他的答案并使用`if`and`else`而不是`toggle()`.

```
$(document).ready(function() {
    $(".button").click(function(){
        if($(this).text() == 'Show Content')
            $(this).text('Hide Content');
        else
            $(this).text('Show Content');
        $("#hidden_content").slideToggle("slow");
    });
}); 
```

在 JSFiddle [Here](http://jsfiddle.net/dRpWv/803/)上尝试一下。

# system-verilog - 系统 Verilog fork 混淆，fork 和 begin 之间执行的语句

> ID：14126056
> 
> 赞同：5
> 
> 时间：2013-01-02T17:04:19.453
> 
> 标签：system-verilog, fork-join

在此处查看简化的示例代码：

```
 process job[num_objs]; 
    // assume also, arr_obj1s (array of type obj1) and 
    // arr_obj2s (array of type obj2) are arrays of size 
    // num_objs, and the objects define a run() function
    foreach (arr_obj1s[i]) begin
        fork
            automatic int j = i;
            arr_obj1s[j].run(); // these run forever loops
            begin
                job[j] = process::self();
                arr_obj2s[j].run(); // these run finite logic
            end
        join_none
    end

    foreach (job[i]) begin
        wait (job[i] != null);
        job[i].await();
    end

    // How do we ever reach here? 
```

我的困惑是对的调用`arr_obj1s[j].run()`永远不会返回（它们永远循环运行），而且我不太理解该调用在开始/结束块之外放置的含义。哪个进程是永远执行的，如果某个进程正在运行一个不会返回的进程`run()`，那么每次调用怎么会返回？`await()``run()`

编辑：这里有更多信息。发布完整的代码将是页面和页面，但我希望这额外的一点帮助。

obj1 的`run()`函数如下所示：

```
virtual task run;
  fork
    run_a(); // different logically separated tasks
    run_b();
    run_c();
  join
endtask: run 
```

作为一个例子，`run_a`看起来基本上是这样的（它们都是相似的）：

```
virtual task run_a;
  // declare some local variables
  forever begin
    @(posedge clk)
    // ...
  end
endtask: run_a 
```

但是obj2的`run()`函数看起来基本上是这样的：

```
virtual task run;
  fork
    run_d(); // different logically separated tasks
    run_e();
  join
endtask: run 
```

例如，`run_d()`如下所示：

```
virtual task run_d;
  while ((data_que.size() > 0)) begin
    // process a pre-loaded queue,
    // data will not be pushed on during the simulation
  end
endtask:run_d 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-02T19:11:56.260

这个代码片段看起来像是在演示过程控制，所以这是我对正在发生的事情的猜测。arr_obj1s和arr_obj2s中有一组进程：

*   arr_obj1s 中的那些永远运行，因此它们只需要生成一次并被遗忘。
*   arr_obj2s 中的那些完成一些任务并返回，因此父进程需要知道何时发生这种情况。
*   所有进程都有相同的父进程

> 我的困惑是对 arr_obj1s[j].run() 的调用将永远不会返回（它们永远运行循环）而且我不太理解该调用在开始/结束块之外放置的含义

因此，产生所有进程所需的*只是 fork..join_none*块中的三行代码。

```
foreach (arr_obj1s[i]) begin
  fork
    automatic int j = i; // Spawns process
    arr_obj1s[j].run();  // Spawns process
    arr_obj2s[j].run();  // Spawns process
  join_none
end 
```

join_none关键字表示并行块完成后将继续执行，因此将执行整个 foreach 循环，然后父进程将继续执行下一个 foreach 循环**。**此外，join_none 还意味着子进程在父进程到达阻塞语句之前不会启动。

然而，这不允许我们检测子进程何时完成，除非它们有某种他们修改的共享变量。为了避免必须编写代码，SystemVerilog 允许处理进程，以便它可以在进程完成时安排事件。但是，它不提供获取单个语句句柄的能力。您必须在过程上下文中使用 process::self() 来获取进程句柄。因此，如果直接添加到 fork-join 块，这将无法正常工作。

```
foreach (arr_obj1s[i]) begin
  fork
    automatic int j = i;
    arr_obj1s[j].run();
    job[j] = process::self(); // Will return parent process
    arr_obj2s[j].run();
  join_none
end 
```

为了解决这个问题，我们需要创建一个新的顺序过程上下文，我们可以获取它的进程句柄，然后从那里运行函数：

```
foreach (arr_obj1s[i]) begin
  fork
    automatic int j = i;
    arr_obj1s[j].run(); // Spawns a new process for those that don't complete
    begin               // Spawns a new process for those that complete
      job[j] = process::self(); // Saves handle to this begin..end process
      arr_obj2s[j].run();       // Process continues though here
    end
  join_none
end 
```

最后的 foreach 循环只等待我们有句柄的进程。永远运行的进程将被忽略。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-02T19:08:57.080

首先，fork/join 在 Verilog 中的工作方式，fork/join 块中的每个*语句*同时执行。如果没有开始/结束，每一行本身就是一个语句。

所以你的例子是为循环的每次迭代分叉至少两个进程。

```
 fork
        automatic int j = i;                               <= Statement 1 ??
        arr_obj1s[j].run(); // these run forever loops     <= Statement 2
        begin                                              \ 
            job[j] = process::self();                      |  <= Statement 3
            arr_obj2s[j].run(); // these run finite logic  |
        end                                                /
    join_none 
```

我至少说，因为我不完全理解`automatic int j`在这种情况下是如何处理的。

这就是发生的事情。

对于循环的每次迭代：

1.  `arr_obj1s[j].run()`已启动。（这会永远循环，永远不会结束。）
2.  `arr_obj2s[j].run()`已启动。（这将在运行一段时间后结束。）启动它的进程的进程 ID 存储在`job[j]`.

正在调用的代码`await`只等待开始调用`arr_obj2s[j].run()`. 他们将完成，因为他们正在运行一个有限的任务。

`await`即使在调用全部完成之后，永远循环仍将运行。

# html - 浮动左跨度和 div

> ID：14126059
> 
> 赞同：0
> 
> 时间：2013-01-02T17:04:24.183
> 
> 标签：html, css, internet-explorer, google-chrome, css-float

我有这个问题： http: [//liberainformazione.it/](http://liberainformazione.it/)

![在此处输入图像描述](../Images/a81e5fa2e95de1db35e59148be8330fd.png)

标题CSS规则：

```
p.right_sidebar_title {
font-size: 16px!important;
font-weight: bold;
color: black;
margin: 7px 0!important;
line-height: 18px!important;
font-family: Arial,Helvetica,sans-serif;
font-weight: bold;
width: 300px;
} 
```

蓝色矩形 css 规则：

```
.post-category-rightSidebar {
background: #369;
display: inline;
float: left;
font-size: 10px;
height: 16px;
line-height: 17px;
margin-right: 5px;
padding: 0 5px;
text-transform: uppercase;
color: white;
} 
```

在 Chrome 或 Firefox 中，蓝色矩形在标题附近，但在 IE 中，标题在新行上......我不明白为什么 IE 无法识别我的 css 规则。

我做错了什么？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T17:50:13.697

你的页面有`<meta http-equiv="X-UA-Compatible" content="IE=7" />`，所以 IE9 作为 IE7 运行。

在 IE7 中，指定`width`或 ( `height`) 值会触发所谓的触发，`hasLayout`这会使元素的框在某种程度上被隔离，并防止其内容被任何外部元素浮动。

您应该将`X-UA-Compatible`元元素设置为[`IE=edge`](http://tanalin.com/en/blog/2009/07/disable-ie8-compatibility-mode/)值（最佳选项），或者`width: 300px;`从规则中删除，或者为*包含*元素*和*浮动颜色方块`p.right_sidebar_title`的容器指定此宽度。 *`p.right_sidebar_title`*

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T17:11:12.400

我注意到您没有浮动`p.right_sidebar_title`，请尝试添加`float: left;`。

如果有帮助，我会将`p.right_sidebar_title`其放入`.post-category-rightSidebar`自己的 div 中：

```
<div>
    <div class="post-category-rightSidebar"></div>
    <p class="right_sidebar_title">Title</p>
</div> 
```

希望这可以帮助！**

# jquery - 在 CSS3 转换延迟和 jquery delay() 之间进行选择；

> ID：14126065
> 
> 赞同：0
> 
> 时间：2013-01-02T17:04:59.923
> 
> 标签：jquery, css, delay, css-transitions

使用 jQuery，我逐渐将“go”类添加到 div

```
 div {
       tranform:translate(20px,20px);
       opacity:0;
       transition:.3s;
    }

    div.go {
      transform:none;
      opacity:1;
    } 
```

我希望每个 div 在飞入时稍微增加延迟。我可以使用两种方法来实现这一点。

1.  将增量 CSS3 设置`transition-delay`为 div 的内联样式
2.  使用 jQuery`delay()`将类添加`.go`到 div

任何人都有关于性能的更好方法的想法？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T19:54:14.743

我认为从应用程序开发的角度来看，JQuery 方法会更加灵活。马上，它可以让您在显示您的 DIV 之前添加检查（安全性、用户首选项、浏览器/平台特定功能）。这仅取决于您的应用程序。

如果您想要的只是延迟应用属性，那么 CSS 解决方案就足够了。但是，我怀疑 JQuery/Javascript 将在更多浏览器和平台（想想移动设备）上得到更广泛的支持，而不是 CSS3 转换延迟。性能影响将是微不足道的。

希望这可以帮助。祝你好运。

# ruby-on-rails - Rspec capybara 用户无法登录

> ID：14126067
> 
> 赞同：5
> 
> 时间：2013-01-02T17:05:09.577
> 
> 标签：ruby-on-rails, ruby, testing, rspec, capybara

测试设备使用 capybara 登录。似乎出了点问题，因为我无法使用 rspec 和 capybara 测试登录。我使用工厂女孩来定义用户

```
FactoryGirl.define do
 factory :user do
  email 'admin@revol-tech.com.np'
  password 'bhaktapur'
  password_confirmation 'bhaktapur'
  admin true
  name 'admin'
  confirmation_sent_at "#{DateTime.now}"
  confirmation_token 'anupsumhikichiki'
  confirmed_at "#{DateTime.now}"
  username 'username'
 end
end 
```

这是我的 spec_helper.rb

```
# This file is copied to spec/ when you run 'rails generate rspec:install'
ENV["RAILS_ENV"] ||= 'test'
require File.expand_path("../../config/environment", __FILE__)
require 'rspec/rails'
require 'rspec/autorun'
require 'capybara/rspec'
require 'database_cleaner'
# FactoryGirl.find_definitions
Capybara.current_driver = :selenium
# Requires supporting ruby files with custom matchers and macros, etc,
# in spec/support/ and its subdirectories.
Dir[Rails.root.join("spec/support/**/*.rb")].each {|f| require f}
RSpec.configure do |config|
 config.include Devise::TestHelpers, :type => :controller
 config.before(:suite) do
 DatabaseCleaner.strategy = :transaction
 DatabaseCleaner.clean_with :truncation
end

config.before(:each) do
 DatabaseCleaner.start
end
# config.after(:each) {  }
config.after(:each) do
 DatabaseCleaner.clean
 Warden.test_reset!
end
config.fixture_path = "#{::Rails.root}/spec/fixtures"
config.use_transactional_fixtures = false

# If true, the base class of anonymous controllers will be inferred
# automatically. This will be the default behavior in future versions of
# rspec-rails.
config.infer_base_class_for_anonymous_controllers = false
end 
```

这是我的规格

```
require_relative '../spec_helper.rb'
include Warden::Test::Helpers
Warden.test_mode!

feature "the signin process" do
before :each do
@user_attr = FactoryGirl.attributes_for(:user)
# @user = FactoryGirl (:user)
User.create!(@user_attr)
end

scenario "signs me in"  do
  # login_as @user, :scope => :user
  visit '/'
  fill_in 'Login', :with => "admin@revol-tech.com.np"
  fill_in 'Password', :with => "bhaktapur"
  click_button 'Sign in'
  page.should have_content "Signed in successfully"
  Warden.test_reset! 
 end
end 
```

我的用户模型也设置为可确认

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T20:32:31.197

而不是添加所有可确认的数据点..应该使用

```
@user = FactoryGirl.build(:user)
@user.skip_confirmation!
@user.save! 
```

然后在你的场景中

```
fill_in 'Login', :with => @user.email
fill_in 'Password', :with => @user.password 
```

# android - Android SensorEvent 时间戳问题

> ID：14126068
> 
> 赞同：2
> 
> 时间：2013-01-02T17:05:10.820
> 
> 标签：android, timestamp, sensors, unix-timestamp, nexus-7

我目前正在开发一个必须记录所有传感器值的 android 应用程序。我从“event.timestamp”中获得了传感器事件时间戳，并将这个值转换为 unix 时间戳。

```
long currTimeRelativeToBootMs = SystemClock.uptimeMillis();
long currTimeAbsoluteMs = System.currentTimeMillis();

mStartTimeAbsoluteS = ((double)(currTimeAbsoluteMs - currTimeRelativeToBootMs))/(double)1000.0;
...
//timestampRelativeInNs = event.timestamp
double temp = mStartTimeAbsoluteS+((double)timestampRelativeInNs)/1000000000.0; 
```

我的应用程序在我的 HTC 手机 (Android 2.xx) 上运行良好，但在新的 Google Nexus7 上却无法运行。

我比较了来自不同设备的“event.timestamp”值。我几乎同时启动了这些设备，但我得到了相当不同的值。来自 Nexus7 的那个长了 4 位数.....

SensorEvent-时间戳（HTC）：175120992123000

SensorEvent-时间戳（Nex）：1355418999245703000

这个问题可能是什么原因？？？我该如何解决？

# android - 在 ViewFlipper 或布局中启动活动

> ID：14126075
> 
> 赞同：0
> 
> 时间：2013-01-02T17:05:42.250
> 
> 标签：android, android-activity, xamarin.android

我有一个布局，顶部有选项卡（以编程方式添加），ViewFlipper 下面有 3 个不同的视图，其中一个包含一个 ListView。我有 2 个活动，一个是创建选项卡的主要活动，另一个是下载一些数据并将其显示在新 ListView 中的活动。我想做的是从第一个活动开始第二个活动，并在 ViewFlipper 内的 ListView 中显示数据。有可能这样做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T17:10:16.053

您正在做的事情可能更容易使用**fragment**或通过将第二个活动完全放入 ViewFlipper 来实现。

有关使用片段的信息，请参阅[此处的 Android 开发者网站：](http://developer.android.com/guide/components/fragments.html)

# r - 如何求解具有上界变量的多维积分方程

> ID：14126081
> 
> 赞同：2
> 
> 时间：2013-01-02T17:05:53.187
> 
> 标签：r, equation, integral

我想解一个方程如下，其中`X`是唯一的未知变量，函数`f()`是一个多元学生`t`分配。更准确地说，我有一个学生密度函数的多 k 维积分，它给了我们一个概率，我知道这个概率是 q。所有积分的下限是 -Inf 并且我知道最后一个 k-1 维度的上限（如给定的），唯一未知的变量是第一个积分的上限。它应该有一个变量和一个方程的解。我试图在 R 中解决它。我做了动态条件相关以获得相关矩阵，以指定我的 t 分布。因此，将此相关矩阵插入我的多 t 分布“dmvt”，并使用“cubature”包中的“adaptIntegral”函数构造一个函数作为命令“uniroot”的参数，以求解第一个积分的上限。但是我有一些困难来实现我想要的。（我希望我的问题很清楚）我之前提供了我的代码，有人告诉我有问题，但找不到那里有问题的原因。非常感谢您的帮助。

我现在如何用一维积分来处理它，但我不知道如何在 R 中求解多维积分方程？（例如二维案例）

```
\int_{-\infty}^{X}
    \int_{-\infty}^{Y_{1}} \cdots
       \int_{-\infty}^{Y_{k}}
           f(x,y_{1},\cdots y_{k})
      d_{x}d_{y_{1},}\cdots d_{y_{k}} = q 
```

此代码失败：

```
require(cubature) 
require(mvtnorm) 
corr <- matrix(c(1,0.8,0.8,1),2,2)
f <- function(x){ dmvt(x,sigma=corr,df=3) } 
g <- function(y) adaptIntegrate(f, 
                  lowerLimit = c( -Inf, -Inf), 
                  upperLimit = c(y, -0.1023071))$integral-0.0001    
uniroot( g, c(-2, 2)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T22:33:24.377

由于`mvtnorm`包含`pmvt`计算多元 t 分布的 CDF 的函数，因此您无需通过蛮力进行积分。（`mvtnorm`还包括分位数函数`qmvt`，但仅适用于“等坐标”值。）

所以：

```
library(mvtnorm)
g <- function(y1_upr,y2_upr=-0.123071,target=1e-4,df=3) {
    pmvt(upper=c(y1_upr,y2_upr),df=df)-target
}
uniroot(g,c(-10000,0))
## $root
## [1] -17.55139
## 
## $f.root
## [1] -1.699876e-11
## attr(,"error")
## [1] 1e-15
## attr(,"msg")
## [1] "Normal Completion"
## 
## $iter
## [1] 18
## 
## $estim.prec
## [1] 6.103516e-05
## 
```

再确认一次：

```
pmvt(upper=c(-17.55139,-0.123071),df=3)
## [1] 1e-04
## attr(,"error")
## [1] 1e-15
## attr(,"msg")
## [1] "Normal Completion" 
```

# html - Opera12 和 IE9 中的 rem 单位不准确

> ID：14126088
> 
> 赞同：13
> 
> 时间：2013-01-02T17:06:08.513
> 
> 标签：html, internet-explorer, css, responsive-design, opera

虽然我对响应式设计的想法并不陌生，但我经历了一件非常麻烦的事情......

我决定完全搬到`rem`单位，但我仍然遵守`62.5%`规则（我已经使用它了`em`）。

所以对于初学者来说：

```
html {
   font-size: 62.5%; 
} 
```

我假设**1rem = 10px**（我知道这并不总是正确的，但是嘿，这对我来说是为了简化数学，对于浏览器来说它仍然是相对的吧？）

恐怖始于**Opera**（ linux 和 win 版本的**12.12**，默认字体大小分别设置为`14px`和`16px`）。

```
header nav ul li a span {
    padding: 1.8rem 2.7rem 3rem 0;

    font-family: 'sawasdeebold', sans-serif;
    font-size: 2rem;
    line-height: 3rem;

    letter-spacing: -0.3rem;
    display: block;
} 
```

`rem`正如您所看到的，由于使用了单位，我的部分导航可以说是“像素完美” 。在linux下页面有点窄（没问题，字体更小，所以`1rem`代表的像素更少）。但是，`nav`如果将默认大小更改为其他内容，则所有内容都会严重缩放`14px`......在 Windows 下也是如此`16px`......整个缩放想法根本行不通。我不需要每个像素都匹配，但它看起来很丑......

![对物导航](../Images/f63ff5cf977d8a7770c3743272d3be35.png)

类似的问题出现在**IE9**下，但这次是 logotype 其中：

```
header h1 a {
    margin: 1.8rem 0 0 1.6rem;
    width: 46.2rem;
    height: 10.1rem;
    background: transparent url(../static/img/logotype.jpg) 0 0 no-repeat;
    background-size: 46.2rem 20.2rem;
    text-indent: -5000px;
    display: block;    
}

header h1 a:hover {
    background-position: 0 -10.1rem;
} 
```

即使我设置了标识的高度和背景的确切大小，在悬停时，背景位置`1px`太低......

除了这些问题，我还有一个普遍的问题。

是否可以使用单位创建“像素完美”布局`rem`？

我什至还没有触及媒体查询，我想知道这是否值得我努力......

非常感谢你们！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T16:20:24.247

所以...我已经切换回`em`单位。除了 IE9 中的少数（次要）故障（众所周知的亚像素问题）之外，**所有**浏览器中的一切都是完美的。而且，和之前的问题一样，我对哪个也使用单位`rem`没有问题。遗憾的是，这些单元似乎还不够稳定，无法在现有的网络浏览器中使用它们。结案...`media queries``em``rem`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T15:48:16.733

如果你想继续使用 1rem = 10px 你试过了吗 -</p>

```
html {
    font-size: 10px; 
} 
```

代替

```
html {
    font-size: 62.5%; 
} 
```

这能解决问题吗？

# ruby-on-rails - 用于从 JPEG 中提取 IPTC 数据的 Ruby gem

> ID：14126095
> 
> 赞同：3
> 
> 时间：2013-01-02T17:06:48.347
> 
> 标签：ruby-on-rails, gem, metadata, iptc

我正在寻找与 Rails 3 一起使用的 gem，以从 jpeg 文件（标题、标题、...）中提取一些基本的 IPTC 元数据。我找到了 [ruby​​-iptc](https://github.com/jkraemer/ruby-iptc)，但我不知道如何使用它，因为没有找到文档或示例。帮助任何人？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-12T12:40:41.963

我使用 gem [mini_exiftool](https://github.com/janfri/mini_exiftool)作为单独命令行工具[exiftool.exe](http://www.sno.phy.queensu.ca/~phil/exiftool/)的绑定， 它可以读取和更改标题和 IPTC 元数据。

```
require 'mini_exiftool'

# Reading meta data
photo = MiniExiftool.new 'heroes.jpg'
puts photo.title

# Writing meta data
photo = MiniExiftool.new 'heroes.jpg'
photo.title = 'This is the new title'
photo.rating = 20
photo.save 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T17:29:25.803

这应该可以解决问题，记录得很好，不是那么活跃，但它应该适合您的需求[Exif 阅读器](https://github.com/remvee/exifr)。

# java - 使用 Java 更新时避免 SQL Server 2012 上的数据库锁定

> ID：14126096
> 
> 赞同：0
> 
> 时间：2013-01-02T17:06:52.690
> 
> 标签：java, sql-server

我有一个基于 SQL Server 2012 的 Web 应用程序，我使用 Java 更新数据库中的数据。（Windows Server 2008、JSP、Tomcat7、Java7）

相关代码如下：

```
public static synchronized int execute(String dsName, String packageAndFunction, List fields) {

        // prepare insertStr
        String executeStr = buildStatement(dsName, packageAndFunction, null, fields);
        dbConn  = DBConnection.getInstance();
        Connection conn = dbConn.getConnection();
        CallableStatement stmt = null;
        int result = RESULT_FAILED;
        try {
            stmt = conn.prepareCall(executeStr);

            // fill statement parameters (each ?)
            fillStatement(stmt, fields);

            stmt.execute();
            result = stmt.getInt(fields.size());

        } catch(SQLException e) {
            Log.getInstance().write("Exception on executeGeneral (" + packageAndFunction + ") " + e.toString());
        } finally {
            try {
                stmt.close();
                dbConn.returnConnection(conn);
            } catch(SQLException e) {
                Log.getInstance().write("Exception on executeGeneral (" + packageAndFunction + ") " + e.toString());
            }
        }
        return result;      
    } 
```

大约 90% 的时间，代码运行良好。其余时间，桌子上有某种锁，大概半小时左右就会自行消失。锁甚至阻止对表执行简单的 SELECT 查询（在 SQL Server Management Studio 中）。在严重的情况下，它会阻止整个应用程序工作。

我有一个想法来`stmt.executeUpdate()`代替`stmt.execute()`，但我已经尝试对此进行研究，但我没有看到任何证据表明使用`stmt.execute()`更新会导致锁定。

任何人都可以帮忙吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T13:59:41.673

使用该代码很难诊断。下次发生这种情况时，请打开 SQL 服务器上的活动监视器并查看哪个 sql 命令持有锁。

# jakarta-ee - Glassfish 身份验证 - 如何使用我自己的登录方法

> ID：14126107
> 
> 赞同：0
> 
> 时间：2013-01-02T17:07:48.667
> 
> 标签：jakarta-ee, authentication, glassfish, glassfish-3

我对此真的很陌生。这是我想要实现的目标：

用户从登录网页输入他的用户名和密码，我的代码将检查我们的数据库。如果用户名和密码（存​​储在一个表中）正确，并且用户属于某个组（存储在另一个表中），那么我将允许用户登录。

我知道 Glassfish 带有几个 autentication 领域：文件、ldap、jdbc ......

如何将我的代码与其身份验证领域合并？是否有我可以遵循的教程或分步指南？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T17:11:37.617

如果您不想使用提供的 Java EE 安全实现，您可以使用第三方库，例如 Apache Shiro，它提供基于角色的访问控制 (RBAC) 和身份验证。

[http://shiro.apache.org/](http://shiro.apache.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T10:59:31.083

除了所有第三方身份验证机制外，您还可以提供由 GlassFish 服务器处理的自己的身份验证机制。JAAS 是基于表单的身份验证，您可以使用它（因为 JAAS 还可以提供一些其他类型的身份验证机制）。我为您准备的机制就像

**某些应用程序的 HTTPRequest
->
（重定向到）LoginAuthenticationApp
->
（如果当时授权）
->
请求的应用程序
->
（其他）登录应用程序** 

现在是这样，通过在登录后使用 JAAS 机制，您的所有请求（每个 httprequest）都将由 Glassfish 服务器提供，如您在身份验证 jar 中定义的那样。
*另一件事*您可以将您的登录应用程序分开或将其放置在您的任何/每个应用程序中。
通过单独放置它，它的功能将是读取请求，从数据库进行身份验证并通过设置该 cookie（如果您使用 cookie）重定向到请求应用程序。
我发现的另一个很好的理由是所有请求都将发送到该登录应用程序和实际应用程序，以防止任何类型的 DOS 攻击。
在这里您可以找到[自定义容器管理的安全性](http://www.ibm.com/developerworks/java/library/j-authenticroast/index.html?ca=drs-)。对于需要高安全性或具有 DOS 威胁的应用程序，我始终建议使用容器管理的证券。

# jquery - 使用 jquery 获取元素的可见高度而不是其实际高度

> ID：14126110
> 
> 赞同：8
> 
> 时间：2013-01-02T17:07:56.677
> 
> 标签：jquery, html, height, visible

这篇文章与[这个](https://stackoverflow.com/questions/14125303/change-target-of-a-link-based-on-what-is-currently-displayed)有关。请考虑阅读它。:-)

在我链接到的帖子中，我认为如果一个 div 的可见高度大于另一个 div 的可见高度，则我的问题的解决方案是更改链接的目标。在我的布局中，我所指的所有 div 的高度均为 1100 像素。但这不是我想要得到的。我希望脚本获取当前对访问者可见的 div 的高度，而不是它的实际高度。有没有办法使用jQuery来做到这一点？

提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-02T17:24:15.183

您可以做的是将元素位置放在其父容器的顶部，然后从父容器高度减去它。这将为您提供元素的可见高度。

```
$('#container').height() - $('#overflow').position().top 
```

这是一个显示这一点的[小提琴。](http://jsfiddle.net/mbZby/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T17:15:07.707

用另一个 DIV 包装视口 DIV 的内容。定位该 DIV 以读取所有内容的高度，如下所示：

jQuery: $('div#contents').height();

布局：

```
<div id="viewport">
  <div id="contents">...all your div contents...</div>
</div> 
```

希望这可以帮助。祝你好运。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-02T17:18:49.883

Do you have to use a fixed 1100px height? Cause you could also specify a max-height:1100px; and a height:100%; Depending on what you want to put inside the div you can of course get the current height by

```
$('.divclass').height(); 
```

# android - 如何使用动画移动和淡出任何视图

> ID：14126113
> 
> 赞同：6
> 
> 时间：2013-01-02T17:08:12.273
> 
> 标签：android, animation, move, fadeout, alpha

好的，所以我有一个使用以下代码对其进行动画处理的视图：

```
RelativeLayout rl = (RelativeLayout) findViewById(R.id.productPage_parentLayout_RL);

ImageView iv = new ImageView( ProductPage.this );
imageLoader.DisplayImage(FULL_PRODUCT_INFO.getFirstImage(), iv);

Animation animation = new TranslateAnimation(0, helper.getDeviceWidth() - 100,0, 0);
animation.setDuration(1000);
animation.setFillAfter(true);

rl.addView(iv); 
```

使用此代码，视图从屏幕左侧开始，几乎移动到屏幕的末尾，但我还想淡出视图并最终隐藏/销毁它。我试图搜索与此相关的任何内容，但找不到任何内容。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-02T19:49:14.947

尝试这个

```
ObjectAnimator move=ObjectAnimator.ofFloat(iv, "translationY",100f);
                    move.setDuration(3000);
    ObjectAnimator alpha1=ObjectAnimator.ofFloat(iv, "alpha",0.5f);
                    alpha1.setDuration(1000);

                    ObjectAnimator alpha2=ObjectAnimator.ofFloat(iv, "alpha",0);
                    alpha2.setDuration(2000);
    AnimatorSet animset=new AnimatorSet();
                    animset.play(alpha2).before(alpha1).with(move);
                    animset.start(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-02T17:20:19.463

```
 Animation a = new AlphaAnimation(1.0f, 0.0f);
        a.setDuration(1000);
        a.setFillAfter(true);
        iv.startAnimation(a);

AnimationSet set = new AnimationSet(true);
        set.addAnimation(animation)
        set.addAnimation(a)
        set.setFillAfter(true);
        iv.startAnimation(set);

    set.setAnimationListener(new AnimationListener() {

                    public void onAnimationStart(Animation animation) {
                        // TODO Auto-generated method stub

                    }

                    public void onAnimationRepeat(Animation animation) {
                        // TODO Auto-generated method stub

                    }

                    public void onAnimationEnd(Animation animation) {
                        iv.setVisibility(View.INVISIBLE);

                    }
                }); 
```

# iphone - 使用 distanceFromLocation 有效地计算最近的 5 个位置

> ID：14126114
> 
> 赞同：0
> 
> 时间：2013-01-02T17:08:26.207
> 
> 标签：iphone, objective-c, ios, mapkit, cllocationmanager

我的`SQLite`数据库中有大约 2500 条记录，每条记录代表我国一家知名商店的分店，我`distanceFromLocation`用来比较当前用户位置与给定位置之间的距离，如下所示：

```
CLLocation* storeLocation = [[CLLocation alloc] initWithLatitude:lat longitude:lon];
double distance = [userLocation distanceFromLocation:storeLocation]; 
```

如何使用这段代码（通过一种**不会冻结 UI**`lat/lon`的有效方式）在存储在本地`SQLite`数据库中的2500 对中找到最近的 5 个分支？

**编辑 ：**

[这里的代码](http://www.thismuchiknow.co.uk/?p=71)是一个很好的例子，说明了如何在数据库级别计算两点之间的距离，所以它非常有效，但是，代码有点难以实现，因为它访问 SQLite 并手动创建查询，任何人都提供给我带有该代码的工作示例将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T17:24:30.390

无论您想这样做，为了避免阻塞 UI，您必须在另一个线程中执行此操作。您可以通过多种方式实现这一目标。以下是 GCD 的示例：

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

    NSArray *closestFive = [self closestFive];
    dispatch_async(dispatch_get_main_queue(), ^{
         //Tell yourself something when the process finished
         [self closestAre:closestFive];
    }
}); 
```

[self nearestFive] 可以通过遍历位置、计算距离、使用包裹在 NSValue 中的 CLLocation 作为键将它们存储在字典中来天真地实现。对其进行排序，并返回该数组的 subarrayWithRange:。可能有更好的实现，但是对于 2500 个元素，这不是很多，只要你在后台线程中这样做就足够了

这可能是它的一个实现：

```
- (NSArray *)closestFive:(CLLocation *)location from:(NSArray *)locations
{
    NSMutableArray *distances = [NSMutableArray arrayWithCapacity:locations.count];

    for (CLLocation *l in locations) {
        NSDictionary *d = @{
            @"location" : l,
            @"distance" : @([location distanceFromLocation:l])
        };
        [distances addObject:d];
    }
    [distances sortedArrayUsingComparator:^NSComparisonResult(id obj1, id obj2) {
        double d1 = [obj1[@"distance"] doubleValue];
        double d2 = [obj1[@"distance"] doubleValue];

        if (d1 > d2) {
            return NSOrderedDescending;
        }
        else if (d1 < d2) {
            return NSOrderedAscending;
        }
        return NSOrderedSame;
    }];
    return [[distances subarrayWithRange:NSMakeRange(0, 5)] valueForKey:@"location"];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T16:14:47.530

查看这个（有效的）答案和 Kenny Winker 的评论：

[https://stackoverflow.com/a/6828849/1611723](https://stackoverflow.com/a/6828849/1611723)

这是一个类似的问题，会帮助你。

# jquery - jquery mobile：如何防止列表视图的标题行被过滤掉

> ID：14126115
> 
> 赞同：0
> 
> 时间：2013-01-02T17:08:38.670
> 
> 标签：jquery, listview, jquery-mobile

我正在创建一个 jquery 移动列表视图，可以对其内容进行过滤，如下所示：

```
<ul data-filter="true" ...>
<li class='thisrowshouldnotbefilteredout'></li>
<li>content to filter on</li>
......
......
</ul> 
```

第一行是我的标题，当用户输入要过滤的文本时，我不希望它隐藏。是否可以为该行提供一个属性，或者我是否必须覆盖基本回调函数以进行拟合？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-24T22:00:43.777

我采取的另一条路线是实际更改 jQuery Mobile 代码中的一行。

jquery.mobile.1-3.1.js 中的第 6846 行

```
listItems = list.children( ":not(.ui-screen-hidden)" ); 
```

到

```
listItems = list.children( ":not(.ui-screen-hidden):not(.no-filter)" ); 
```

然后只需将“no-filter”类添加到您不想被过滤的任何项目中。

您当然可以使用除类之外的其他逻辑，例如从不过滤第一个孩子，或使用 data-no-filter="true" 属性。

我会说自定义回调显然是首选方法，因为如果您必须重新安装 jQuery mobile，这会中断，但因为我们不会这样做，所以这是一个非常快速的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T17:19:14.243

您可以像这样覆盖过滤器逻辑：

```
$("#mylist").listview('option', 'filterCallback', customSearch);

var customSearch = function(text, searchValue, item) {
    return text.toLowerCase().indexOf( searchValue) === -1;
} 
```

为回调定义的任何函数都将提供三个参数。第一个是当前列表项的文本，第二个是要搜索的值，第三个是要过滤的列表项。真实值将导致隐藏列表项。下面描述了过滤没有 searchValue 作为子字符串的条目的默认回调。

用它来跳过你的标题 li 元素。根据需要修改它。

可以在此处找到示例和更多信息：http: [//jquerymobile.com/test/docs/lists/docs-lists.html](http://jquerymobile.com/test/docs/lists/docs-lists.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-27T18:00:12.313

您可以添加这样的代码来添加对“data-no-filter”属性的支持：

```
var origFilter = $.mobile.filterable.prototype.options.filterCallback;
  $.mobile.filterable.prototype.options.filterCallback = function(index, searchValue) {
    var origVal = origFilter.apply(this, arguments);

    if ($(this).attr('data-no-filter') === 'true') {
      return false;
    } else {
      return origVal;
    }
} 
```

然后，在您的 HTML 中，您可以通过在元素上设置 data-no-filter="true" 来防止项目被过滤。

# apache2 - 厨师属性节点 [：语言] 在第一次厨师客户端运行后消失

> ID：14126122
> 
> 赞同：4
> 
> 时间：2013-01-02T17:09:11.643
> 
> 标签：apache2, passenger, chef-infra

我有一本 Chef 食谱，其中包含`passenger_apache2::mod_rails`来自 Passenger_apache2 食谱的[食谱](https://github.com/opscode-cookbooks/passenger_apache2)。在服务器的第一次 Chef 运行中，这创建了两个（有效的）配置文件：

```
# /etc/apache2/mods-available/passenger.load
LoadModule passenger_module /var/lib/gems/1.9.1/gems/passenger-3.0.11/ext/apache2/mod_passenger.so

# /etc/apache2/mods-available/passenger.conf
PassengerRoot /var/lib/gems/1.9.1/gems/passenger-3.0.11
PassengerRuby /usr/bin/ruby1.9.1
PassengerMaxPoolSize 6 
```

这些是通过使用说明书的模板[passenger.load.erb](https://github.com/opscode-cookbooks/passenger_apache2/blob/master/templates/default/passenger.load.erb)和[passenger.conf.erb](https://github.com/opscode-cookbooks/passenger_apache2/blob/master/templates/default/passenger.conf.erb)分别使用`node[:languages][:ruby][:ruby_bin]`和创建的`node[:languages][:ruby][:gems_dir]`。这些属性[由 Ohai 自动填充](http://docs.opscode.com/ohai.html)。

在第二次运行时`chef-client`，这些文件被搞砸了。这是他们现在的样子：

```
# /etc/apache2/mods-available/passenger.load
LoadModule passenger_module /gems/passenger-3.0.11/ext/apache2/mod_passenger.so

# /etc/apache2/mods-available/passenger.conf
PassengerRoot /gems/passenger-3.0.11
PassengerRuby 
PassengerMaxPoolSize 6 
```

因此，在 Chef 运行期间似乎`node[:languages][:ruby]`没有填充。但是，如果我直接从服务器上的 IRB 会话调用 Ohai，它会正确显示。

```
$ sudo -Hu root /usr/bin/irb1.9.1
irb(main):001:0> require 'yaml'
irb(main):002:0> require 'chef'
irb(main):003:0> node = YAML::load(`/usr/local/bin/ohai`)
irb(main):004:0> node['languages']['ruby']['ruby_bin']
=> "/usr/bin/ruby1.9.1"
irb(main):005:0> mash = Chef::Mash.new(node)
irb(main):006:0> mash[:languages][:ruby][:ruby_bin]
=> "/usr/bin/ruby1.9.1" 
```

我可以修复该文件，但它不会阻止问题在下一次 Chef 运行时再次出现。我对如何进一步适当地解决此问题感到有些困惑。

有没有其他人遇到过这个问题？我还没有尝试在我的食谱或角色中手动设置这些属性，但我认为我不应该这样做；不应该覆盖自动属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T15:16:04.557

我想我只是通过重新启动厨师客户端解决了这个问题，但我仍然对根本原因感到困惑。

我相信（在我遇到这个问题的时候）主厨客户端守护进程的运行实例是我用`knife bootstrap`. 我们的引导模板安装了 ruby​​1.9.1 包，但可能是 chef-client 守护进程未能正确加载它。（我对此很模糊。）

我第一次尝试添加`ohai "reload"`到我的食谱中，在下一次预定的 Chef 运行中，配置文件仍然损坏。

接下来我跑了`service chef-client restart`，然后 Chef 正确地填充了有问题的配置文件。在下一次运行中，他们仍然是正确的。

所以我希望这会消失，但我仍然困惑为什么我正在运行的厨师客户端实例无法正确地从 Ohai 重新加载自动属性。如果有对 Chef 有更深入操作知识的人遇到这种情况，我仍然欢迎任何评论或战争故事。

# java - 在android应用程序的通知区域中添加一个图标

> ID：14126124
> 
> 赞同：0
> 
> 时间：2013-01-02T17:09:19.390
> 
> 标签：java, android, notifications, android-mediaplayer

好的，我环顾了这个网站和其他网站，我看到了与我想要的类似的东西，但这不是我想要的......让我解释一下我正在学习使用具有媒体播放器的 eclipse 构建一个 android 应用程序链接到我正在运行的直播服务器，到目前为止，应用程序运行良好，但顶部没有图标，通知区域是，当我在播放音乐的同时去另一个应用程序（游戏）播放时它最小化了应用程序..这很好但是当我重新打开应用程序时它不会停止媒体播放器事实上如果我播放播放器我将有 2 个播放器运行我将不得不使用任务管理器强制停止它,,我知道这可以做到，因为我的手机上有带有图标的应用程序，当我搜索这个网站时，它会做我想做的事 [http://www.youtube.com/watch?v=e74z0_Z5QWI&feature=relmfu](http://www.youtube.com/watch?v=e74z0_Z5QWI&feature=relmfu)显示的代码如下

```
import android.app.Activity;

public class StatusBar extends Activity implements OnclickListener{

NotificationManager nm;

@Override
Protected void onCreate(bundle savedInstance){
//TODO Auto-generated method Stub
    super.oncreate(savedInstaceState);
    setContentView(R.layout.statusbar);
    Button stat = (Button)findViewById(R.id.bStatusBar);
    stat.setOnClickListener(this);
    nm = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);
    }
public void onClick(View v){
//TODO Auto-generated method Stub
    Intent intent = new Intent(this, StatusBar.class);
    PendingIntent pi = PendingIntent.getActivity(this, 0, intent, 0);

} 
```

我已将此代码添加到我的 MainActivity.java 但它向我吐出几个错误，我试图使用 quickfix 修复这是我目前在 MainActivity.java 文件中的脚本

```
package com.myapp.mytapp;

import android.app.Activity;
import android.content.Intent;
import android.media.MediaPlayer;
import android.media.MediaPlayer.OnBufferingUpdateListener;
import android.media.MediaPlayer.OnCompletionListener;
import android.net.Uri;
import android.os.Bundle;
import android.os.Handler;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.View.OnTouchListener;
import android.widget.Button;
import android.widget.SeekBar;

public class MainActivity extends Activity implements OnClickListener, OnTouchListener, OnCompletionListener, OnBufferingUpdateListener{
    private Button btn_play,
    btn_pause,
    btn_stop;
private SeekBar seekBar;
private MediaPlayer mediaPlayer;
private int lengthOfAudio;
private final String URL = "http://link to url:8002";
private final Handler handler = new Handler();
private final Runnable r = new Runnable() { 
@Override
public void run() {
updateSeekProgress();                   
}
};

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_main);
init();
}

private void init() {
btn_play = (Button)findViewById(R.id.btn_play);
btn_play.setOnClickListener(this);
btn_pause = (Button)findViewById(R.id.btn_pause);
btn_pause.setOnClickListener(this);
btn_pause.setEnabled(true);
btn_stop = (Button)findViewById(R.id.btn_stop);
btn_stop.setOnClickListener(this);
btn_stop.setEnabled(true);

seekBar = (SeekBar)findViewById(R.id.seekBar);
seekBar.setOnTouchListener(this);

mediaPlayer = new MediaPlayer();
mediaPlayer.setOnBufferingUpdateListener(this);
mediaPlayer.setOnCompletionListener(this);

}

@Override
public void onBufferingUpdate(MediaPlayer mediaPlayer, int percent) {
seekBar.setSecondaryProgress(percent);
}

@Override
public void onCompletion(MediaPlayer mp) {
btn_play.setEnabled(true);
btn_pause.setEnabled(false);
btn_stop.setEnabled(false);
}

@Override
public boolean onTouch(View v, MotionEvent event) {
if (mediaPlayer.isPlaying()) {
SeekBar tmpSeekBar = (SeekBar)v;
mediaPlayer.seekTo((lengthOfAudio / 100) * tmpSeekBar.getProgress() );
}
return false;
}

@Override
public void onClick(View view) {

try {
mediaPlayer.setDataSource(URL);
mediaPlayer.prepare();
lengthOfAudio = mediaPlayer.getDuration();
} catch (Exception e) {
//Log.e("Error", e.getMessage());
}

switch (view.getId()) {
case R.id.btn_play:
playAudio();
break;
case R.id.btn_pause:
pauseAudio();
break;
case R.id.btn_stop:
stopAudio();
break;
default:
break;
}

updateSeekProgress();
}

private void updateSeekProgress() {
if (mediaPlayer.isPlaying()) {
seekBar.setProgress((int)(((float)mediaPlayer.getCurrentPosition() / lengthOfAudio) * 100));
handler.postDelayed(r, 1000);
}
}

private void stopAudio() {
mediaPlayer.stop();
btn_play.setEnabled(true);
btn_pause.setEnabled(true);
btn_stop.setEnabled(true);
seekBar.setProgress(0);
}

private void pauseAudio() {
mediaPlayer.pause();
btn_play.setEnabled(true);
btn_pause.setEnabled(true);
}

private void playAudio() {
mediaPlayer.start();
btn_play.setEnabled(true);
btn_pause.setEnabled(true);
btn_stop.setEnabled(true);
}

public void homepage (View view) {
    goToUrl ( "http://myhomepage.com/");
}

private void goToUrl (String url) {
    Uri uriUrl = Uri.parse(url);
    Intent launchBrowser = new Intent(Intent.ACTION_VIEW, uriUrl);
    startActivity(launchBrowser);
}

} 
```

这是我的 activity_main.xml 文件中的内容

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@color/black"
    android:icon="@drawable/ic_launcher"
    android:orientation="vertical" 
    startForeground()>

    <ImageView
        android:id="@+id/imageView"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:src="@drawable/logo" />

        <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <TableRow
            android:id="@+id/tableRow1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >
                   <Button
            android:id="@+id/homepage"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:autoLink="web"
            android:clickable="true"
            android:cursorVisible="true"
            android:linksClickable="true"
            android:onClick="homepage"
            android:text="Home Page" />

        </TableRow>
    </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="5dp"
        android:gravity="center_horizontal"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/btn_play"
            android:layout_width="90dp"
            android:layout_height="wrap_content"
            android:background="@drawable/play"
            android:clickable="true"
            android:cursorVisible="true"
            android:src="@drawable/play" >
        </Button>

        <Button
            android:id="@+id/btn_pause"
            android:layout_width="90dp"
            android:layout_height="wrap_content"
            android:background="@drawable/pause"
            android:clickable="true"
            android:cursorVisible="true"
            android:src="@drawable/pause" >
        </Button>

        <Button
            android:id="@+id/btn_stop"
            android:layout_width="90dp"
            android:layout_height="wrap_content"
            android:background="@drawable/stop"
            android:clickable="true"
            android:cursorVisible="true"
            android:src="@drawable/stop" >
        </Button>
    </LinearLayout>

    <SeekBar
        android:id="@+id/seekBar"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_margin="3dp" >
    </SeekBar>

    <ImageView
        android:id="@+id/imageView3"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:src="@drawable/scast" />

    <TextView
        android:id="@+id/Textview"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:ems="10"
        android:gravity="center"
        android:hint="@string/version" >
    </TextView>

</LinearLayout> 
```

有人可以告诉我我做错了什么，或者可以重写我所拥有的并且仍然保持一切正常提前谢谢 Rob

# css - 在导航中突出显示元素

> ID：14126128
> 
> 赞同：0
> 
> 时间：2013-01-02T17:09:29.120
> 
> 标签：css, web, html-lists

地狱，我正在制作一个导航，其中一个特定的元素应该从导航的其他元素中突出显示。我创建了一个突出显示的 CSS 类，我在其中增加了字体大小。但是，文本与较小的文本不在同一高度。

```
#navigation .bar a.highlight{
font-size: large;
} 
```

它看起来像这样： ![在此处输入图像描述](../Images/7303333f9b33473a04cf8ff8c288f91c.png)

抱歉，我是 css 和 html 的新手，我想这是一个简单的解决方案。

请看一下我的代码 [http://jsfiddle.net/FcbJv/](http://jsfiddle.net/FcbJv/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T17:19:33.373

首先，我建议不要使用`large`CSS 中的关键字作为字体大小，而是使用 px 或 em 单位（更好的可维护性，并且浏览器可以不同地解释这些关键字）。

您可以通过与字体大小的增加成比例地减小菜单项`line-height`上的来达到您想要的效果。`.highlight`这可以保持菜单项的[垂直节奏](http://24ways.org/2006/compose-to-a-vertical-rhythm/)。

*   [jsfiddle](http://jsfiddle.net/ZGgs4/1/)

**CSS**

```
/*EM  (personal preference) */

#navigation .bar a.highlight{
   font-size: 1.4em; /* we increase size by .4ems */
   line-height:.6em; /* so we reduce line-height by .4 ems */
}

/* PX */

#navigation .bar a.highlight{
    font-size: 18px; /* just guessing here, make sure to set this to the actual desired height */
    line-height:10px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T17:16:09.627

您需要添加一个`line-height`.

试试这个：

```
#navigation .bar a.highlight {
    font-size: large;
    line-height: 12px; /*Same as your font-size for normal items*/
} 
```

因为页面的字体大小是 12px，a `line-height`of`12px`将垂直居中。如果更改字体大小，请务必更改`line-height`.

[检查这个 JSFiddle。](http://jsfiddle.net/FcbJv/2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T17:16:37.663

在 CSS 中垂直对齐是让你发疯的事情之一。

尝试改进`line-height`列表项：

```
line-height: 16px; 
```

此外，请尝试具体说明`font-size`您想要而不是使用的`large`内容，因为它可能因浏览器而异。

# java - 经纬度到 XY 坐标

> ID：14126130
> 
> 赞同：-4
> 
> 时间：2013-01-02T17:09:41.527
> 
> 标签：java, android, maps

我正在尝试使用 gps 坐标在自定义地图上绘制一个点。我正在寻找一种将 gps 坐标转换为可以在地图上绘制的像素值的方法。我在android中工作，但只要弄清楚逻辑，我们将不胜感激。图像为 3000 x 2102，我的 gps 坐标为 lat 45.8932 long -59.98573。我尝试了一些示例，但无法使其正常工作，我似乎遇到的问题是我正在处理的数字是数字太小而无法在地图上进行任何移动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T17:15:01.030

无法按原样回答您的问题。要确定坐标，您需要获得图像角落的 GPS 坐标。例如，如果您的图像的 gps 坐标为 (lat = 50, lon = 0) - 用于左上角，而 (lat = 0, lon = 50) 用于右下角，则您指定的点不在该图像上一点也不。如果该点在图像内，那么只需简单的数学运算即可确定您的 GPS 点在地图图像上的位置。当然，您可能需要考虑地图可能不是线性的这一事实，尤其是当您接近两极时。

# asp.net - 从 Master Page 获取 headlogin 名称

> ID：14126140
> 
> 赞同：0
> 
> 时间：2013-01-02T17:10:16.943
> 
> 标签：asp.net, master-pages

我怎样才能从母版页中指定下面的 HeadLoginName？（将其保存为变量）谢谢

```
 <asp:LoginView ID="HeadLoginView" runat="server" EnableViewState="false">
                <AnonymousTemplate>
                    <a href="~/login.aspx" ID="HeadLoginStatus" runat="server">Log In</a>
                </AnonymousTemplate>
                <LoggedInTemplate>
                    Welcome <span class="bold"><asp:LoginName ID="HeadLoginName" runat="server" /></span>!
                    [ <asp:LoginStatus ID="HeadLoginStatus" runat="server" LogoutAction="Redirect" LogoutText="Log Out" LogoutPageUrl="~/logout.aspx"/> ]
                </LoggedInTemplate>
  </asp:LoginView> 
```

![在此处输入图像描述](../Images/c996065f79d18854fa72e53a803d99fc.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T18:37:11.183

最终通过使用获取用户名： System.Web.HttpContext.Current.User.Identity.Name

简单得多。谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T17:31:35.380

您应该能够使用：

```
var view = (LoginView)(Page.Master.FindControl("HeadLoginView");
if (view != null)
{
   var loginName = (LoginName)view.FindControl("HeadLoginName");
   if (loginName != null)
   {

   }
} 
```

有更好的设计模式可以公开这些类型的事情，您也可以这样做，例如为母版页提供接口定义，并将主属性转换为该接口。然后你可以暴露你想要的任何东西。

# vba - 数字四舍五入

> ID：14126141
> 
> 赞同：2
> 
> 时间：2013-01-02T17:10:22.707
> 
> 标签：vba, ms-word

我有以下由 VBA 在 MS Access 2010 中编写的代码。此代码在 Label1.caption 中打印此方程式的编号。

```
the_average = CDbl(TextBox1.Text) * 2 / 3 + CDbl(TextBox2.Text) / 3
the_average = Format(the_average, "#.###")
Label1.caption= the_average 
```

一些运算的小数点后三位以上。当在标签的标题中打印数字时，此代码会将数字四舍五入。例如，如果我有 1.66666666，它会显示 1.667，我希望它显示 1.666 而无需四舍五入。我怎样才能做到这一点？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T17:17:26.770

```
the_average = CDbl(TextBox1.Text) * 2 / 3 + CDbl(TextBox2.Text) / 3
the_average = Format(the_average, "#.####")
Label1.caption= Left(the_average,5) 
```

If your final string can vary in length, you will have to use the `InStr()` function (I believe that's it).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T17:23:09.550

您可以利用`Int()`' 截断；

```
the_average = formatnumber(int(the_average * 1000) / 1000, 3) 
```

`formatnumber`如果您不想要尾随零 (.99 -> .990)，则可以省略

# javascript - 在 Javascript 中转换和读取 JSON 日期类型

> ID：14126143
> 
> 赞同：2
> 
> 时间：2013-01-02T17:10:37.113
> 
> 标签：javascript, asp.net, json

我有一个日期形式为：

```
"2012-10-11T00:00:00" 
```

日期作为 JOSN 对象的一部分从 ASP.NET Web 服务返回。如何将此日期格式转换为 Javascript 日期对象，并将日期如下写入屏幕：

**2012 年 11 月 10 日**

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T17:21:29.987

```
var myDate = new Date("2012-10-11T00:00:00".replace(/T/," "));
var myDateString = myDate.getDate() + "/" + (myDate.getMonth() + 1) + "/" + myDate.getFullYear() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T17:13:03.533

对于日期转换，我使用插件

[日期.js](http://www.datejs.com/)

一定要包含所有需要的 jquery 文件，有很多关于如何实现它的文档

如果您不想使用插件，请查看[http://msdn.microsoft.com/en-us/library/ie/ff743760(v=vs.94).aspx](http://msdn.microsoft.com/en-us/library/ie/ff743760%28v=vs.94%29.aspx)

或者这个溢出[答案](https://stackoverflow.com/questions/3066586/get-string-in-yyyymmdd-format-from-js-date-object)

# perl - Perl CGI：错误消息： 脚本的标头格式错误。错误的标头=<正文>：

> ID：14126144
> 
> 赞同：4
> 
> 时间：2013-01-02T17:10:38.650
> 
> 标签：perl, cgi

我遇到了上述错误。

主脚本在下面

```
#!/opt/lampp/bin/perl
use lib "/opt/lampp/htdocs/PERL";
use warnings;
use strict;
use CGI;
use CGI::Carp qw(fatalsToBrowser warningsToBrowser);
use WEBPAGE::PageDesign;
use HTML::Form;

my $header = get_header() ;
my $html   = parse_form(\%ENV);

print "Content-type: text/html\n\n";
print <<HTML;
$header
$html
HTML 
```

生成的html是正确的，但是带有html页面的脚本后跟错误

```
Error message:
<br />malformed header from script. Bad header=&lt;body&gt;: publish_scholarship.pl, 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T10:53:06.753

将打印标题行移到顶部。如果它仍然不起作用，则将其移至 BEGIN 块。

```
use warnings;
use strict;

BEGIN {
   print "Content-type: text/html\n\n";
}

use lib "/opt/lampp/htdocs/PERL";
use CGI;
use CGI::Carp qw(fatalsToBrowser warningsToBrowser);
use WEBPAGE::PageDesign;
use HTML::Form;

my $header = get_header() ;
my $html   = parse_form(\%ENV);

print <<HTML;
$header
$html
HTML 
```

# mysql - 我在循环中的循环中有一个错误

> ID：14126148
> 
> 赞同：0
> 
> 时间：2013-01-02T17:10:58.110
> 
> 标签：mysql, php

我有这个错误：

> 警告：mysql_data_seek() [function.mysql-data-seek]：偏移量 9 对 MySQL 结果索引 4 无效（或查询数据未缓冲）

我有一个表格消息，我想显示最近的消息。如果用户 1 已登录，我想这样做：例如，如果用户 1 向用户 2 发送消息，然后用户 2 向用户 1 发送消息，我想向用户 1 显示最新消息。所以它将是用户 2 发送的那个。所以，我必须向用户 1 显示 ids 2 和 3。

```
 <div class="maincontent">
    <!-- Obtengo datos -->
    <?php 
             $conexion=mysql_connect('localhost','root','root') or die('No');
    $db=mysql_select_db('carpe',$conexion)or die('no existe la base de datos.');

    $id= $_SESSION['id'];

    $multid_array = array();
    $outercnt=0;
 $consulta=mysql_query("select * from messages where id_from='".$id."'
 or id_to='".$id."' order by id asc");
    while($filas=mysql_fetch_array($consulta)){
        $id=$filas['id'];
        $id_to=$filas['id_to'];
        $id_from=$filas['id_from'];
        $status=$filas['status'];
        $text=$filas['text'];
        $time=$filas['time'];
        echo "lo primero: ";

        echo $id;
        echo " ";

        mysql_data_seek($consulta, 0);
        while($filas2=mysql_fetch_array($consulta)){
            $id2=$filas2['id'];
            $id_to2=$filas2['id_to'];
            $id_from2=$filas['id_from'];
            $status2=$filas2['status'];
            $text2=$filas2['text'];
            $time2=$filas2['time'];
            echo "es ";
            echo $id2;
                if($id_from==$id_from2 && $id_to==$id_to2 && $id2>$id){ 
                    $id=$id2;           
                    echo "el mas grande ";
                    echo $id;
                }
        }
         mysql_data_seek($consulta,$outercnt); 
         $outercnt++; 

        //Almaceno en un vector los mensajes a mostrar
        $multid_array[]=$id;

        echo "nuevo elemento  ";
        echo $id;
    }

    //Elimino duplicados
    $resultado = array_unique($multid_array);

    for ($x=0;$x<count($resultado); $x++){
        $id=$resultado[$x];
        $consulta=mysql_query("select * from messages where id='".$id."'");
        echo "arreglo ";
        echo $id;
        echo " ";
        while($filas=mysql_fetch_array($consulta)){
            $id_from=$filas['id_from'];
            $id_to=$filas['id_to'];
            $status=$filas['status'];
            $subject=$filas['subject'];
            $text=$filas['text'];
            $time=$filas['time'];           
        }

    ?>
            <h3><a href="#">Asunto: <?php echo $id?></a></h3>
            <span class="postInfo">Enviado por: <a href="#">De <?php echo
                         $id_from ?></a> A <?php echo $id_to ?> - <?php echo $time ?></span>
            <p><?php echo $text ?></p>
            <a class="more" href="#">Responder</a>
            <hr>
            <?php } ?>
            <hr>
        </div> 
```

第一个错误是当我尝试这样做时： mysql_data_seek($consulta,$outercnt);

当我这样做时，我遇到了另一个错误（第二个）： $id=$resultado[$x];

这是第二个错误：注意：未定义的偏移量：1

我目前正在显示消息，但我有这些错误。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T17:12:13.213

您正在尝试获取第 9 行，但没有第 9 行。

在尝试获取它们之前检查返回了多少行？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T12:12:30.033

```
for ($x=0;$x<count($resultado); $x++){
        $id=$resultado[$x]; 
```

它获取可能不存在的 $x 元素，

在 for 之后和之前 $id=$resultado[$x]; ， 粘贴：

```
if (!isset($resultado[$x])){
continue;
} 
```

# python - 具有多个参数的函数调用的 Python 编码风格

> ID：14126153
> 
> 赞同：7
> 
> 时间：2013-01-02T17:11:12.713
> 
> 标签：python

这听起来像是一个新手问题，但我真的需要一些帮助。我什至不知道如何标记它，但我认为这只是一个 Python 问题。我需要使用一个接收 5 个参数并返回 5 个值的函数：

```
a, b, c, d, e = function (input1, input2, input3, input4, input5) 
```

问题是，当我使用完整的变量/函数名称时，行太长了，而且代码看起来很丑，我想在这里使用更花哨的解决方案，我正在考虑使用 dict 或 list 以便我可以做这：

```
input_dict['param1'] = input1
input_dict['param2'] = input2
input_dict['param3'] = input3
input_dict['param4'] = input4
input_dict['param5'] = input5
ret_dict = function(input_dict) 
```

有没有更好或“pythonic”的方式来提高这种调用的代码质量？

提前致谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-02T17:12:35.883

你可以像这样嵌套行

```
my_function(test, this, out, like, so,
                   something, indent) 
```

您可以像这样将列表扩展为 args

```
a = [1,2,3,4,5]
my_function(*a) 
```

你甚至可以这样做

```
result = my_function(big, long, list, 
                      of, args)
a,b,c,d = result 
```

> 此外，[PEP-8](http://www.python.org/dev/peps/pep-0008/#maximum-line-length)对处理行长有很好的建议。– Lattyware 5 分钟前

# ruby-on-rails - 如何序列化 ActiveModel 错误以供以后翻译？

> ID：14126164
> 
> 赞同：2
> 
> 时间：2013-01-02T17:11:37.847
> 
> 标签：ruby-on-rails, serialization, internationalization, jobs

我有一种情况，其中用户将一些数据提交到将在后台处理的 Web 服务器（Rails）：

```
POST /fibonacci/6012 HTTP/1.1
Host: example.com 
```

服务器响应一个指向后台作业的链接，用户可以使用该链接检查状态：

```
HTTP/1.1 202 Accepted
Location: http://example.com/jobs/5699121 
```

需要注意的重要一点是，*任何*（授权的）用户都可以检查作业的状态。这意味着我必须将工作人员的任何错误消息*象征性地*传回 Web 服务器。对于 ActiveModel 错误，我想不出办法。例如：

```
class FibonacciCalculation
  include ActiveModel::Validations

  attr_reader :input
  validates_presence_of :input
  validates_inclusion_of :input, :in => 0..10_000,
                                 :allow_blank => true

  def initialize(params = {})
    @input = params[:input]
  end

  def output
    # do fibonacci calculation
  end
end 
```

如果我创建这样一个对象`FibonacciCalculation.new(:input => -5)`然后消除错误，我会得到一个`ActiveModel::Errors`对象，但我不知道如何序列化它。Asking for`errors[:input]`给我`["can't be blank"]`or `["is not included in the list"]`，已经翻译好了。同样，`errors.as_json`返回类似

```
`{ "errors" => [ "can't be blank" ] }` 
```

我怎样才能得到类似`{ :input => [:blank] }`or的东西`{ :input => [:inclusion] }`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T17:11:37.847

`ActiveModel::Errors`添加错误后立即进行翻译，并且它不会象征性地存储密钥。这留下了两种方法来获取数据：

### 1.猴子补丁

```
ActiveModel::Errors.class_eval do
  old_generate_message = instance_method(:generate_message)
  def generate_message(attribute, type = :invalid, options = {})
    options[:type] ||
      old_generate_message.bind(self).call(attribute, type, options)
  end
end 
```

### 2.覆盖翻译

```
en:
  activerecord:
    errors:
      messages:
        blank: blank
        inclusion: inclusion
        ... 
```

这两种情况对我来说都很棘手，因为相同的代码库同时运行工作程序和 Web 服务器。因此，我必须有条件地加载猴子补丁或翻译覆盖。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-03T08:01:15.817

我遇到了同样的问题，我创建了一个小宝石来处理这种情况，希望这会对某人有所帮助：[https ://github.com/Intrepidd/activemodel_errors_type](https://github.com/Intrepidd/activemodel_errors_type)

您可以在翻译之前致电`model.errors.with_types`以获取错误的类型。

# android - 如何更改 ImageView 的图像

> ID：14126166
> 
> 赞同：0
> 
> 时间：2013-01-02T17:11:37.950
> 
> 标签：android

我想更改其他活动的 imageView 的图像我该怎么做。我使用此代码但无法正常工作。

```
ImageView view = (ImageView) findViewById(R.id.imageView6);
view.setImageResource(R.drawable.up_banner_statics_icon); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T17:17:04.430

您无法`ImageView`使用此方法访问其他活动的。只有创建视图的活动才能使用它。

您需要授予`ImageView`对其他活动的访问权限，或者在原始活动中创建**回调**以更改屏幕上显示的内容。

# ruby-on-rails-3 - 如何在 Ruby on Rails Heroku 应用程序中删除单个 Postgres 表？

> ID：14126171
> 
> 赞同：12
> 
> 时间：2013-01-02T17:12:00.393
> 
> 标签：ruby-on-rails-3, postgresql, heroku, drop-table

[类似的问题在这里](https://stackoverflow.com/questions/5223853/rails-drop-and-recreate-a-single-table-on-heroku)，但没有一个答案真正回答了这个问题。接受的答案仅显示了如何登录控制台并销毁所有记录。在这种情况下，这不是我需要的。

我需要完全废弃一个表（它没有关联）并使用现有迁移重新创建它。

有没有类似的东西？

```
heroku pg:destroy_table "Products" 
```

然后我会再次运行我的迁移，它将使用新模式创建表：

```
heroku run rake db:migrate 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-02T17:16:41.483

你可以尝试使用`heroku pg:psql`. 这应该会为您的数据库打开一个控制台，您可以在其中执行任意 SQL：

```
DROP TABLE products; 
```

您可以在 heroku 文档中找到有关 pg:psql 的更多信息：[https ://devcenter.heroku.com/articles/heroku-postgresql#pgpsql](https://devcenter.heroku.com/articles/heroku-postgresql#pgpsql)

相同的 PostgreSQL 文档：[http ://www.postgresql.org/docs/9.1/static/sql-droptable.html](http://www.postgresql.org/docs/9.1/static/sql-droptable.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-07-26T16:13:09.077

## 如何正确执行此操作

对于像我这样到达这里的人：强烈考虑`DROP TABLE products`按照接受的答案中的建议不要运行。考虑改用这个：

```
heroku run rake db:migrate:down VERSION=20160518643350 
```

VERSION 是迁移文件上的时间戳，即前缀：

`db/migrate/20160518643350_create_products.rb`

然后，修改您的架构（或创建新的迁移）并运行它：

```
heroku run rake db:migrate:up VERSION=20160518643350 
```

当您在 Rails 中创建新的 PG 数据库时，`schema_migrations`还会创建一个表来跟踪您已迁移的迁移。如果您从 Heroku 的 Postgres 控制台 ( `heroku pg:psql`) 中删除一个表，您的迁移文件将不会知道它，并且当您尝试使用新模式再次运行迁移时，rails 将不会创建该表，因为它认为它已经存在。

## 如果`heroku run rake db:migrate:up ...`不起作用

如果您已经运行`heroku pg:psql`并删除了表`DROP TABLE products;`（如果是这种情况，请采取以下步骤：

### 1.在Heroku上打开psql控制台，创建任意`products`表

```
heroku pg:psql
CREATE TABLE products(foo int); 
```

退出`psql`终端。

### 2\. 运行迁移，以便 schema_migrations 记录删除的表

```
heroku run rake db:migrate:down VERSION=20160518643350 
```

这将删除您的新表，并记录迁移。

### 3\. 运行迁移以创建新表

```
heroku run rake db:migrate:up VERSION=20160518643350 
```

应该这样做！

# php - php中如何计算两个不同长度数组的相似度百分比

> ID：14126173
> 
> 赞同：3
> 
> 时间：2013-01-02T17:12:03.643
> 
> 标签：php, arrays, compare, percentage, similarity

我分别从两个数组中的数据库中检索了两个用户的记录。这些记录是关注其他人的人，就像在 twitter 中一样。由于两个用户可能关注不同数量的人。所以两个数组的长度是不同的。我创建了一个新数组来存储普通人（两个用户都跟随的人）。如何获得两个用户的相似度百分比。假设两个用户有 5 个共同的追随者，他们的相似度比 2 个有 2 个共同关注者的用户要多。

```
foreach($common as $row){
//do events
echo $row['name']."<br>";
$count_common++;
}
echo "total common ".$count_common;
$similarity = (count($common)/(count($user1_follows))*100); 
```

上面的公式不计算正确的结果，因为它是基于具有相同长度的数组。这是我的一个相关问题，用于[获取 php 中两个数组的相似度百分比](https://stackoverflow.com/questions/9298371/get-the-percentage-of-similarity-of-two-arrays-in-php)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-02T17:14:50.450

```
$p1 = array("foo", "bar", "grep");
$p2 = array("foo", "buzz", "fizz", "bar");
$similar = array_intersect($p1, $p2);
$p1_perc = count($similar) / count($p1); // 0.66..
$p2_perc = count($similar) / count($p2); // 0.5 
```

要获得一个号码：

```
$perc = 2 * count($similar) / (count($p1) + count($p2)); // 0.5714.. 
```

# c# - 为什么 GeoCoordinateWatcher 的 DesiredAccuracy 属性是只读的？

> ID：14126174
> 
> 赞同：1
> 
> 时间：2013-01-02T17:12:06.537
> 
> 标签：c#, geolocation, windows-phone-8

此代码；

```
 GeoCoordinateWatcher watcher = new GeoCoordinateWatcher();
    watcher.DesiredAccuracy = GeoPositionAccuracy.High; 
```

...失败：“*无法将属性或索引器‘System.Device.Location.GeoCoordinateWatcher.DesiredAccuracy’分配给——它是只读的*”

为什么会`DesiredAccuracy`是只读的？如果真是这样，它应该被命名`Accuracy`，或者也许`AttemptedAccuracy`，但不是`DesiredAccuracy`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T17:22:56.603

该`GeoPositionAccuracy`属性是通过[构造函数参数](http://msdn.microsoft.com/en-us/library/ee792401.aspx)设置的。它的名称包括`Desired`因为它是构造观察器时所需的准确性。

他们有几个关于使用精度的严厉警告`High`，这让我相信该属性是只读的，因为频繁切换所需精度所涉及的努力可能会给用户带来额外费用。

# spring - 将 Spring 单例与静态 Quartz Job 类集成

> ID：14126175
> 
> 赞同：0
> 
> 时间：2013-01-02T17:12:07.733
> 
> 标签：spring, serialization, quartz-scheduler

`CommandQueue`我有一个叫我从 Quartz Job 类引用的 Spring 单例。当作业触发时，它应该在 CommandQueue 中排队命令（调用`"write()"`命令使用 Jackson 序列化它，调用`"Command.create(String)"`反序列化命令）。

我遇到的问题是 Job 是由 Quartz 实例化的，而不是 Spring，所以我不能`@Autowire`在 Job 中使用 CommandQueue，也不能得到对`ApplicationContext`. 我也无法将 CommandQueue 传递给作业的构造函数，然后在作业的 JobDataMap 中序列化 CommandQueue，因为当我反序列化 CommandQueue 时，我将创建一个新的 CommandQueue 实例而不是引用单例。

目前我正在使用一种解决方法，其中我从 Job 实例静态引用 CommandQueue 单例，但我想知道是否有一种方法可以在不诉诸静态引用的情况下完成同样的事情。

```
public abstract class CommandQueue {
    protected static CommandQueue queue;
    public static CommandQueue queue() { return queue; }
    protected CommandQueue() {}
}

@Service("CommandQueue")
@Scope(value = "singleton")
@Profile({"test"})
public class TestQueue extends CommandQueue {
    public TestQueue() { CommandQueue.queue = this; }
}

@Service("CommandQueue")
@Scope(value = "singleton")
@Profile({"production"})
public class ProductionQueue extends CommandQueue {
    public ProductionQueue() { CommandQueue.queue = this; }
}

@Service
@Scope(value = "singleton")
public class CommandScheduler {
    private final org.quartz.Scheduler scheduler;
    public CommandScheduler() {
        scheduler = new StdSchedulerFactory().getScheduler();
        scheduler.start();
    }

    public JobKey scheduleRecurringSeconds(final Command command, final int seconds) {
        JobDetail job = JobBuilder.newJob(CommandJob.class)
            .withIdentity(command.getId()).build();
        job.getJobDataMap().put("command", command.write());
        Trigger trigger = TriggerBuilder.newTrigger()
            .withIdentity(command.getId()).startNow()
            .withSchedule(SimpleScheduleBuilder.simpleSchedule()
            .withIntervalInSeconds(seconds).repeatForever())
            .build();
        scheduler.scheduleJob(job, trigger);
    }

    @DisallowConcurrentExecution
    public static class CommandJob implements Job {
        public void execute(JobExecutionContext context) {
            String str = context.getJobDetail().getJobDataMap().get("command");
            Command command = Command.create(str);
            CommandQueue.queue().enqueue(command);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T17:58:47.193

我的错误，这里已经回答了问题，[将 bean 引用注入到 Spring 中的 Quartz 作业中？](https://stackoverflow.com/questions/6990767/inject-bean-reference-into-a-quartz-job-in-spring?rq=1)解决方案是使用 SchedulerFactoryBean 然后设置它的 ApplicationContextSchedulerContextKey 属性

# ftp - 使用 bash 脚本获取 ftp 中最后修改的文件

> ID：14126182
> 
> 赞同：0
> 
> 时间：2013-01-02T17:12:29.077
> 
> 标签：ftp

使用 bash 脚本，我想在 ftp 远程获取最后修改的文件。在远程 ftp 目录上，我有这样的文件：

test-01.zip
test-02.zip
test-03.zip
test-04.zip

我的目标是使用 bash 脚本获取最后修改的文件。

可以帮我吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T14:19:34.137

你可以得到最后修改日期

```
ls -lt 
```

然后得到它

# facebook - Facebook喜欢按钮不显示

> ID：14126187
> 
> 赞同：1
> 
> 时间：2013-01-02T17:13:00.437
> 
> 标签：facebook, wordpress, facebook-like

我有以下问题：我想在相应的网站上为 Facebook 粉丝页面添加一个赞按钮。我尝试使用开发人员页面（xfbml 和 iframe）中的代码以及[https://www.addthis.com/get/sharing?frm=hp#.UONsR4k9sfk](https://www.addthis.com/get/sharing?frm=hp#.UONsR4k9sfk)之类的插件。对于 iframe，我尝试了不同的网址“https://www.facebook.com/plugins/like.php?...”、“http://www.facebook.com/plugins/like.php?...” , 和 "//www.facebook.com/plugins/like.php?..." 没有不同的结果。

一个活生生的例子：[www.younglead.eu/examplepage](http://www.younglead.eu/examplepage)对应的 Facebook 页面：www.facebook.com/YoungEuropeanLeadership 第一个赞按钮总是出现（“普通网址”）。对于所有其他人（facebook 粉丝页面）：在我的电脑 (mac) 上，点赞按钮不会在 Chrome 和 Firefox 上显示，但会在 Safari 上显示。我尝试了不同的 Mac OS，它在 Chrome 中运行，但在 Safari 和 Firefox 中运行。对于 Win OS，它不适用于 IE 和 Chrome。使用其他网址（Facebook 和非 Facebook），其他 4 个类似按钮也显示在所有浏览器中（每个示例包含的第二个按钮，我在网址中添加了一个“p”）。

iframe 代码（用于 //www... 版本）：

```
<iframe src="//www.facebook.com/plugins/like.php?href=https%3A%2F%2Fwww.facebook.com%2FYoungEuropeanLeadership&amp;send=false&amp;layout=button_count&amp;width=150&amp;show_faces=false&amp;font&amp;colorscheme=light&amp;action=like&amp;height=21&amp;appId=322200017889372" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:150px; height:21px;" allowTransparency="true"></iframe> 
```

知道我能做些什么来克服这种奇怪的情况吗？非常感谢您的帮助，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T17:11:17.757

解决了。Facebook 页面的前任管理员设置了国家和年龄限制。尽管他们在所有地方都包括我，但这似乎造成了麻烦。fb.com/yourfanpage > 编辑权限

无论如何，谢谢你的帮助，我真的很感激。

# javascript - 移动到下一个被禁用并启用 onchange 的输入

> ID：14126198
> 
> 赞同：0
> 
> 时间：2013-01-02T17:14:05.720
> 
> 标签：javascript, jquery, focus, readonly, disabled-input

我有一个禁用的元素，只有在将值输入到它的先前输入后才启用它，问题是`change`在输入失去焦点之前触发并且焦点移动到下一个未禁用的元素，因此删除该`disabled`属性是不好的。

**HTML：**

```
Fill this before you continue:      <input id="a" />
Fill this after the previous input: <input id="b" disabled="disabled" />​ 
```

**jQuery：**

```
$('#a').change(function(){
    if (this.value === "")
        $('#b').attr('disabled', 'disabled');
    else
        $('#b').removeAttr('disabled');
});​ 
```

[小提琴](http://jsfiddle.net/swubm/)

我设法通过更改 from `disabled`to来克服这个问题，`readonly`但是它是只读的，而不是我喜欢的禁用，是否有**好的和强大**的（鼠标证明）方法来实现它和使用`readonly`？

**需要考虑的事项：**

*   订阅多个事件似乎并不正确。
*   用户可以在不使用键盘的情况下将文本粘贴到第一个输入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T18:12:05.477

您在问题中说过您不想订阅多个事件，但这是我能想到的唯一方法。问题是改变输入值的不同方式都直接与 C/C++ DOM 接口，但它们不通过 JS API 来完成。有关[此问题](https://stackoverflow.com/questions/6950650/javascript-watch-event-not-working-on-dom-element-objects)的更多信息，请参阅此问题。

在订阅多个事件时，一种合理的防弹方式是：

```
$('#a').on('keyup paste propertychange input', function() {
    if (this.value === "") $('#b').prop('disabled', true);
    else $('#b').removeAttr('disabled');
}); 
```

这是一个演示：http: [//jsfiddle.net/HmzYR/](http://jsfiddle.net/HmzYR/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T17:20:53.367

您是否考虑在`onkeydown`or上添加事件`onkeyup`？

如果用户只需要输入*一些*内容，您可以添加一个事件来进行`onkeyup`验证并设置另一个输入元素的 disabled 属性。

我不确定事件的顺序，但`onkeyup`我假设焦点移动后也会触发。但在这种情况下，这应该不是什么大问题。我能想到的一种情况是以下键序列：`"a" backspace tab`. 我想完美的解决方案是`onkeydown`在按下之前使用和检查键，但是很难*预测*不可读键的影响，比如`backspace`and `arrowdown`。

* * *

另一个建议：附加一个`onkeydown`监听器并寻找`tab`关键。验证值并启用下一个输入字段。

* * *

本质上：您要么需要捕获*所有*输入事件，要么需要捕获所有改变焦点的事件（如`tab`）。你必须在事件完成*之前采取行动。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T17:16:17.383

使用`prop`而不是`attr`：

```
$('#b').prop('disabled', true); 
```

也尝试挂钩到`keyup`事件而不是`change`事件。

这是一个小提琴：http: [//jsfiddle.net/maniator/swubm/3/](http://jsfiddle.net/maniator/swubm/3/)

有关更多解释，请参见此处：[.prop() 与 .attr()](https://stackoverflow.com/q/5874652/561731)

* * *

小提琴使用以下方法处理剪切和粘贴：http `mouseout`: [//jsfiddle.net/maniator/swubm/4/](http://jsfiddle.net/maniator/swubm/4/)（基于以下评论）

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-01-02T17:55:18.140

我更新了我的答案：http: [//jsfiddle.net/swubm/10/](http://jsfiddle.net/swubm/10/)

```
Fill this before you continue:
<input id="a" />
<br>
<br>
Fill this after the previous input
<input id="b" disabled />​ 
```

JS：

```
$('#a').bind('input propertychange', function() {
    var value = $('#a').val();
    if (value == "")
        $('#b').attr('disabled', 'disabled');
    else
        $('#b').removeAttr('disabled');

}); 
```

# mysql - 使用唯一键更新多行

> ID：14126199
> 
> 赞同：0
> 
> 时间：2013-01-02T17:14:10.953
> 
> 标签：mysql, database, python-db-api

我想更新由唯一键标识的多行而不插入新行。

下面是我的表：

```
CREATE TABLE `insert_update_ignore` (
   `obj_id` int(11) NOT NULL,  
   `obj_type` tinyint(4) NOT NULL,
   `value` int(11) DEFAULT '-1',  
   UNIQUE KEY `unique_key` (`obj_id`,`obj_type`)) 
ENGINE=InnoDB DEFAULT  CHARSET=utf8 
```

该表有一些现有记录：

```
mysql> select * from insert_update_ignore;
+--------+----------+-------+
| obj_id | obj_type | value |
+--------+----------+-------+
|      1 |        1 |    -1 |
|      1 |        2 |    -1 |
|      2 |        1 |    -1 |
|      2 |        2 |    -1 |
+--------+----------+-------+ 
```

我有一些值来更新`value`表中的列。

```
INSERT INTO insert_update_ignore(obj_id, obj_type, value)
    VALUES(1, 1, 1),
          (1, 2, 3),
          (2, 1, 1),
          (2, 2, 5),
          (3, 1, 10)
    ON DUPLICATE KEY UPDATE
       value = VALUES(value); 
```

这几乎完成了工作，除了最后一个值，即 (3, 1, 10) 被插入到表中。这个不应该插入，因为唯一键 (3, 1) 之前不存在。

我怎么能只做这`UPDATE`部分，但不是`INSERT`？如果存在更好的实现，可以更改表模式。要更新的值是从其他数据库计算的（在不同的机器和不同的端口上运行）。

我挖出下面的一个来完成这项工作，但是如果值以千为单位，那么该语句就太大了。还有更优雅的方法吗？感谢有人可以提供帮助。PS 我正在用 Python 编写代码并使用 MySQLdb 库。

```
UPDATE insert_update_ignore
SET value = CASE
    WHEN (obj_id = 1 AND obj_type = 1) THEN 1
    WHEN (obj_id = 1 AND obj_type = 2) THEN 3
    WHEN (obj_id = 2 AND obj_type = 1) THEN 1
    WHEN (obj_id = 2 AND obj_type = 2) THEN 5
    WHEN (obj_id = 3 AND obj_type = 1) THEN 10
    ELSE value
END 
WHERE (obj_id, obj_type) IN ((1, 1), (1,2), (2, 1), (2, 2), (3, 1)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T18:31:49.857

您可以先将要更新的所有值放入临时表中。如果可以连接，则从临时表中更新原始表中的所有值。

```
create temporary table temp like insert_update_ignore;

insert into temp
    values(1, 1, 1),
          (1, 2, 3),
          (2, 1, 1),
          (2, 2, 5),
          (3, 1, 10);

update insert_update_ignore i
 join temp t
 using (obj_id, obj_type)
 set i.value = t.value;

drop temporary table temp; 
```

我也将所有这些都放入了[SQLFiddle](http://sqlfiddle.com/#!2/e2085/1)中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T17:18:58.610

The entire purpose of `INSERT` is to insert new rows, so of course it's going to insert a new row (if a duplicate key is not found; otherwise, update it). If you only want to update existing rows then use `UPDATE` queries.

Rather than use `CASE ... WHEN ... THEN ... ELSE ... END` iterate over each unique key and `UPDATE ... WHERE ...`.

**Edit:**

For example:

```
UPDATE `insert_update_ignore` SET `value` = 1 WHERE `obj_id` = 1 AND `obj_type` = 1;
UPDATE `insert_update_ignore` SET `value` = 3 WHERE `obj_id` = 1 AND `obj_type` = 2;
UPDATE `insert_update_ignore` SET `value` = 1 WHERE `obj_id` = 2 AND `obj_type` = 1;
UPDATE `insert_update_ignore` SET `value` = 5 WHERE `obj_id` = 2 AND `obj_type` = 2;
UPDATE `insert_update_ignore` SET `value` = 10 WHERE `obj_id` = 3 AND `obj_type` = 1; 
```

The first 4 queries will update the rows which match the criteria in the `WHERE` clause whereas the last will not as no row satisfies the conditions.

# python - 在 numpy 中使用 1d 与 2d 向量的性能/标准

> ID：14126201
> 
> 赞同：5
> 
> 时间：2013-01-02T17:14:13.107
> 
> 标签：python, matlab, numpy, linear-algebra

在 NumPy 中是否有将向量表示为 1d 或 2d ndarray 的标准做法？我正在从将向量表示为二维数组的 MATLAB 中迁移出来。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T17:53:00.650

以我的经验，一维是向量的 numpy 规范。`n`将元素向量保留为 2D 形状数组`(1, n)`或在线性代数上下文中的唯一充分理由`(n, 1)`，您希望在其中保持行向量和列向量的区分。正如 EitanT 在他现在已删除的答案中所暗示的那样，您可能会想要使用 numpy 的`matrix`类型，除了单个元素访问之外，它保持返回的 2D 形状，例如，如果`a`有形状，`(m, n)`则`a[0]`有形状`(n,)`用于 type `ndarray`，但 shape`(1, n)`用于 type `matrix`，虽然`a[0, 0]`返回一个标量在这两种情况下。

如果您坚持使用 shape 的 1D 向量`(n,)`，则可以即时重塑形状以进行需要 2D 形状的特定操作：

```
a.reshape(-1, 1) # shape (n, 1)
a[:, None] # shape (n, 1)
a.reshape(1, -1) # shape (1, n)
a[None, :] # shape (1, n) 
```

`(1, n)`Numpy 会在[广播](http://docs.scipy.org/doc/numpy/user/basics.broadcasting.html)它以进行涉及 2D 数组的操作时自动将您的 1D 向量重新整形为形状。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T17:55:23.517

在 matlab 中（出于历史原因，我认为）基本类型是一个`M`数组`N`（矩阵），因此标量是 1×1 数组和向量，可以是`N`1×1 或 1×1`N`数组。（内存布局始终是 Fortran 风格）。

这个“限制”不存在于`numpy`：你有真正的标量，并且`ndarray`' 可以有你喜欢的任意多的维度。（内存布局可以是 C 或 Fortran 连续的。）因此，没有首选（标准）实践。您可以根据您的应用选择更适合您需求的应用。

# ruby-on-rails - Libxml - 将编码更改为 windows-1252

> ID：14126204
> 
> 赞同：0
> 
> 时间：2013-01-02T17:14:31.967
> 
> 标签：ruby-on-rails, ruby, encoding, libxml2

使用 Libxml，如何将编码格式更改为 windows-1252？编码常量中似乎没有这个选项。

我必须使用 Iconv 还是有更好的方法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T08:28:52.757

最后我决定使用builder..

# namespaces - 带有命名空间的 xquery

> ID：14126206
> 
> 赞同：1
> 
> 时间：2013-01-02T17:14:35.743
> 
> 标签：namespaces, xquery

我编写了一个 xquery 程序来将一个 xml 文件转换为另一个。一切顺利。但是，如果我在 xquery 中插入命名空间（直接作为根元素中的属性或声明默认元素命名空间“”；），则不会考虑我的 FLWOR 语句。然后我收到一个空的结果集。问题出在哪里？我该怎么做才能成为结果？感谢您的回答。

* * *

非常感谢您的回答。但这并不能真正解决我的问题。我试图把问题表述得更清楚。xquery 程序应该将 gpx 文件转换为 kml 文件。所以我关心两个默认命名空间。默认命名空间 xmlns="http://www.topografix.com/GPX/1/1" 通常在源文档中，默认命名空间 xmlns="http://www.opengis.net/kml/2.2"这应该在结果 kml 文档中。有人知道如何在 xquery 中制定这个吗？如果 gpx 和 kml 文档中没有默认命名空间，程序可以正常工作，但是我所有的 gpx 文件都设置了默认命名空间，我也希望在 kml 文件中拥有各自的默认命名空间。我必须如何进行？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T20:46:52.540

您可以通过使用与命名空间无关的 *: 元素测试来忽略输入文档中的默认命名空间，例如：

```
/*:gpx/*:trk 
```

此外，名称空间前缀（或不存在）在名称空间比较中并不重要，只有 url。所以你可以将`与

```
declare namespace tempfoobar = "http://www.topografix.com/GPX/1/1";
/tempfoobar:gpx 
```

您还可以重新定义输出的默认命名空间。喜欢

```
declare default element namespace "http://www.topografix.com/GPX/1/1";
let $a := /gpx 
return
  <kml xmlns="http://www.opengis.net/kml/2.2">{$a}</kml> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T14:27:28.113

我认为您不应该将命名空间作为属性插入。我不认为 xmlns 真的是一个属性，不应该这样对待。尝试拉入您想要翻译的任何值并在新命名空间中创建一个新元素。

声明命名空间 ns1 = "ns1"; 声明命名空间 ns2 = "ns2";

让 $source_node := $doc/ns1:whatever/ns1:node/ns1:your/ns1:translating

让 $new_doc := <ns2:SOME_ELEMENT>{$source_node/text()}</ns2:SOME_ELEMENT>

然后孩子插入它或任何你想用它做的事情。或者你可以使用 XSLT...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T13:37:20.863

检查您返回的元素是否与您在根元素中设置的名称空间相同。

# magento - 将自定义字段添加到某些 cms 页面

> ID：14126207
> 
> 赞同：0
> 
> 时间：2013-01-02T17:14:38.397
> 
> 标签：magento

我已经找到了很多教程来为任何页面添加一个字段到 Magento CMS，但是这可以只为某些页面完成吗？例如对于主页，我想询问一些不同的数据点。我不喜欢完整的所见即所得编辑器，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T19:28:15.740

Magento 主页有一个独特的“[布局句柄](http://www.groovecommerce.com/ecommerce-blog/magento/developers-toolbox-get-a-handle-on-handles-in-magento-layout-xml/)”，称为：`cms_index_index`.

您可以根据以下布局添加“块”和模板：`cms.xml`

让我们知道您是否需要进一步的帮助

**更新**

要在后端为特定 CMS 页面添加自定义字段，请尝试以下操作：

1.  创建和观察者检测后端正在加载哪个 CMS 页面（您要观察的事件是`adminhtml_cms_page_edit_tab_content_prepare_form`：）
2.  如果正确显示自定义字段

您可以查看这篇文章了解更多信息： http: [//www.atwix.com/magento/adding-custom-attribute-to-a-cms-page/](http://www.atwix.com/magento/adding-custom-attribute-to-a-cms-page/)

# iphone - UIDeviceOrientationDidChangeNotification 适用于 iDevice 4 及以下但不适用于 iDevice 5

> ID：14126218
> 
> 赞同：3
> 
> 时间：2013-01-02T17:15:14.510
> 
> 标签：iphone, ios6, uiinterfaceorientation, ipod-touch

伙计们！

需要一些紧急的见解。我的问题是，即使 iPhone 4/4S 和 iPod 4 上的测试在此处使用以下代码正常旋转：

```
- (void)initNotifications
{
    [[NSNotificationCenter defaultCenter] postNotificationName:@"setFreeOrientation" object:nil];

    [[UIDevice currentDevice]beginGeneratingDeviceOrientationNotifications];
    [[NSNotificationCenter defaultCenter]addObserver:self
                                            selector:@selector(didRotate:)
                                                name:UIDeviceOrientationDidChangeNotification
                                              object:Nil];
}

-(void)didRotate:(NSNotification*)notification
{
    [super rotateTopBars];
    [super rotateOptionsBar];
    [self rotateControlBar];
    [self rotatePlayer];
    [super rotateShareLayer];
} 
```

但我在 iPod 5 上进行测试，但它不起作用。尝试了一些东西，但直到现在还没有运气。

干杯。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-13T00:01:37.000

我遇到了类似的问题`UIDeviceOrientationDidChangeNotification`，它在一台设备上运行良好，但在另一台设备上运行良好。经过一番调试，我意识到我在设备上锁定了人像方向，这导致`UIDeviceOrientationDidChangeNotification`根本无法触发。不确定这是否是您的问题，但它很容易被忽视并且值得检查。

![纵向锁定](../Images/8568e04b5d2af18b1ef0b1d01548b5d6.png)

# mysql - 删除在其他表中没有引用的行；

> ID：14126222
> 
> 赞同：2
> 
> 时间：2013-01-02T17:15:39.220
> 
> 标签：mysql, sql, reference

我想删除数据库中所有在另一个表中没有引用的行：

还行吧：

```
mysql> DELETE FROM auth_user WHERE username = 'Sample41';
Query OK, 1 row affected (0.02 sec) 
```

这是不行的：

```
mysql> DELETE FROM auth_user WHERE username = 'Sample98';
ERROR 1451 (23000): Cannot delete or update a parent row: a foreign key constraint fails (`mydatabase`.`school_subjects`, CONSTRAINT `user_id_refs_id_9e8f6fd7` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`)) 
```

所以我的目标是获得一个查询，该查询将删除在其他表中没有引用的所有用户（他们将以'Sample'开头）（实际上只有一个表'school_subjects'）

谢谢你。，

更新：

```
mysql> describe school_subjects;
+------------------+--------------+------+-----+---------+----------------+
| Field            | Type         | Null | Key | Default | Extra          |
+------------------+--------------+------+-----+---------+----------------+
| id               | int(11)      | NO   | PRI | NULL    | auto_increment |
| name             | varchar(500) | NO   |     | NULL    |                |
| user_id          | int(11)      | NO   | MUL | NULL    |                |
| created_by       | varchar(64)  | NO   |     | NULL    |                |
| created_time     | datetime     | NO   |     | NULL    |                |
| num_of_followers | int(11)      | NO   |     | NULL    |                |
+------------------+--------------+------+-----+---------+----------------+
6 rows in set (0.00 sec)

mysql> describe auth_user;
+--------------+--------------+------+-----+---------+----------------+
| Field        | Type         | Null | Key | Default | Extra          |
+--------------+--------------+------+-----+---------+----------------+
| id           | int(11)      | NO   | PRI | NULL    | auto_increment |
| username     | varchar(30)  | NO   | UNI | NULL    |                |
| first_name   | varchar(30)  | NO   |     | NULL    |                |
| last_name    | varchar(30)  | NO   |     | NULL    |                |
| email        | varchar(75)  | NO   |     | NULL    |                |
| password     | varchar(128) | NO   |     | NULL    |                |
| is_staff     | tinyint(1)   | NO   |     | NULL    |                |
| is_active    | tinyint(1)   | NO   |     | NULL    |                |
| is_superuser | tinyint(1)   | NO   |     | NULL    |                |
| last_login   | datetime     | NO   |     | NULL    |                |
| date_joined  | datetime     | NO   |     | NULL    |                |
+--------------+--------------+------+-----+---------+----------------+
11 rows in set (0.00 sec) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T17:23:27.163

> 所以我的目标是获得一个查询，该查询将删除在其他表中没有引用的所有用户（他们将以'Sample'开头）（实际上只有一个表'school_subjects'）

你有一个自引用表。如果要删除**所有**记录，则必须包括`school_subjects`和`auth_user`。尝试：

```
DELETE FROM auth_user WHERE username not in (SELECT id FROM auth_user) 
and  username not in (SELECT user_id FROM school_subjects); 
```

**更新：**如果您没有自引用约束并且只关心“school_subjects”，请尝试以下查询，**注意**它将删除**所有**与约束不冲突的记录：

```
DELETE FROM auth_user WHERE username not in (SELECT user_id FROM school_subjects); 
```

如果您只需要删除一些，您将需要：

```
DELETE FROM auth_user 
WHERE username in ('SomeRecordToBeDeleted', 'one more') AND
username not in (SELECT user_id FROM school_subjects); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T17:18:09.800

这将删除“school_subjects”表中没有匹配“user_id”的行。

```
DELETE FROM auth_user 
WHERE id NOT IN (SELECT user_id FROM school_subjects); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T17:22:29.987

你可以试试这个——

```
Delete from auth_user where username like 'Sample%' ANd auth_user.id NOT IN 
( select user_id from school_subjects where auth_user.id = school_subjects.user_id) 
```

# r - RStudio - 崩溃后如何恢复数据？

> ID：14126224
> 
> 赞同：11
> 
> 时间：2013-01-02T17:15:44.833
> 
> 标签：r, rstudio

正在计算需要两周才能运行的大量数据。当我试图导出数据以在 MS SQL 中使用时，我的 RStudio 崩溃了，我不得不重新打开它。现在，当我尝试查找数据时，它似乎丢失了！！！哎呀！

这些数据是否位于某个文件中，或者您在该会话中使用的所有数据都消失了？

对不起，我对 R 的无知。我对它很陌生。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-08T20:25:51.990

我会伸出我的脖子说你不能。

由于 R 在“内存中”执行所有计算，我认为您无法恢复任何内容。R Studio 有一些不错的功能，可以让您恢复正在编辑的脚本，但它不是 R，它不会存储您的数据。归根结底，R Studio 只是 R 应用程序的一个 IDE / 接口，它恰好比默认的 R Gui（它也只是 R 的一个接口）更加用户友好。

在我看来，R 相当稳定，但一些非常有用的包也不太稳定。根据我的经验，RODBC 就是其中之一。我怀疑在许多操作系统和许多数据库中制作可靠的东西是很复杂的。

我强烈建议使用 saveRDS 或 save 将任何数据存储为 RDS 或 RData 文件，然后将该数据加载到 R 中，然后在单独的过程中加载到 SQL 中。使用内置函数保存 R 数据应该非常可靠。

一般来说，保持 R 到 ODBC 的工作分开将使调试更容易。

很抱歉您在数据恢复方面的运气，我希望重新运行比原来运行更容易（即我希望这不是一个不间断计算的一周）。

# c# - 由于在另一个线程中创建 ReportViewr 而导致 Windows 布局发生更改时，在非常复杂的 WPF 应用程序中挂在未知位置

> ID：14126225
> 
> 赞同：8
> 
> 时间：2013-01-02T17:15:54.543
> 
> 标签：c#, .net, wpf, reportviewer, freeze

我有一个带有非常复杂的 XAML 的 WPF 应用程序，我需要一种方法来知道我的应用程序挂起的点，当我尝试暂停执行时，应用程序似乎没有挂起，指针将在这一行：

```
System.Windows.Application myApp;
.
.
.
.
myApp.Run(); // <== this line 
```

当我更改任务栏的布局或 Windows 资源管理器崩溃（隐藏任务栏）时，会发生这种情况，如果我重复进行这些更改，应用程序将永远无法恢复，但是当一个小的更改完成时，应用程序几分钟后会恢复，我需要知道这个问题的原因，我怀疑我的应用程序的复杂 XAML，但我需要一种方法来了解页面或组件，或者这个挂起的任何来源。

*** 编辑 ***

我需要一种工具或方法来了解消耗调度程序时间的 XAML 是什么！

*** 编辑 ***

我得到了挂起的确切原因，这是因为在另一个线程中创建了 ReportViewer 的实例，当我删除实例的创建时，它工作得很好，奇怪的是，这个错误在我的应用程序中存在很长时间以前，但最近出现了挂起，我的意思是：当您在我的应用程序的任何位置插入以下代码之一时，我的应用程序将挂起：

```
 new Action(() =>
        {
            ReportViewer rv = new ReportViewer();
        }).BeginInvoke(null, null); 
```

或者

```
 new Action(() =>
        {
            ReportViewer rv = new ReportViewer();
            rv.Dispose();
        }).BeginInvoke(null, null); 
```

或者

```
 new Action(() =>
        {
            ReportViewer rv = new ReportViewer();
            rv.LocalReport.ReleaseSandboxAppDomain();
            rv.Dispose();
        }).BeginInvoke(null, null); 
```

我的问题：

1-更改窗口布局（调整任务栏大小或移动它）与未添加到任何可视化树的报表查看器之间有什么关系，为什么这会导致我的应用程序挂起？

2-如何确定挂起的位置？

3-有时应用程序会在几分钟内恢复（3-5），但有时会挂起几个小时，应用程序不会恢复，为什么？

4-在这种情况下，我如何确定导致我的应用程序挂起的组件或配置？

顺便说一句，如果解决了这对其他人来说非常有用，我们花了很多时间来检测它，但是结合 ReportViewer 没有得到导致挂起的确切原因！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-12T12:47:36.313

我会尽量完整地回答你的问题：

ReportViewer 控件是一个 Windows 窗体控件，并且 Windows 窗体存在一个问题，在适当的情况下，该问题可能会导致 UI 线程锁定，从而导致应用程序挂起。

当 Windows 发布 WM_SETTINGCHANGED 消息时，`System.Win32.SystemEvents.UserPreferenceChanged`将触发该事件。一些 Windows 窗体控件，包括`ReportViewer`在系统设置更改时侦听此事件以更新自身。

`UserPreferenceChanged`与其他常规事件相比，该事件将使用订阅线程的 SynchronzationContext 调用每个处理程序。因此，如果 ReportViewer 是在主 UI 线程（WPF 中的调度程序线程）以外的线程上创建的，则事件触发代码将尝试执行调用并等待调用完成，这将永远不会在该其他线程上发生，从而冻结 UI .

要确定挂起的位置，您可以轻松禁用选项 Enable Just my code in Visual Studio -> Tools -> Options -> Debugging，当挂起发生时，只需将 VS 调试器附加到挂起的应用程序，这将向您显示应用程序挂在 WaitOne 调用的 UserPreferenceChanged 事件处理中。

您可以在以下文章中阅读有关此挂起的更多信息：

[http://www.ikriv.com/dev/dotnet/MysteriousHang.html](http://www.ikriv.com/dev/dotnet/MysteriousHang.html)

[从另一个线程调用 show 后 Windows 窗体窗体挂起](https://stackoverflow.com/questions/7727881/windows-forms-form-hanging-after-calling-show-from-another-thread)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T12:59:14.800

简单 - 不要在另一个线程中创建 ReportViewer。绑定到一个 UI 层次结构的所有元素必须来自 UI 线程。

在创建动作中，调用回 UI 线程以在 UI 线程中进行实际创建。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T03:38:24.643

在 VS 调试器中暂停后，打开 Debug/Windows 菜单上的 Threads 窗口。选择它们并冻结它们（从上下文菜单中）。然后双击每个线程以查看其卡住的位置。此外，右键单击调用堆栈并显示外部代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T12:17:55.020

**在这种情况下，我喜欢使用几个技巧：**

我已经在[如何调试 .NET 运行时中的内部错误？](https://stackoverflow.com/questions/14238657/how-can-i-debug-an-internal-error-in-the-net-runtime#comment19755952_14238657)

但这也应该涵盖您的问题，它会记录每个操作，直到 CLR 崩溃

IntelliTraceEvents 和呼叫信息是一个惊人的技巧，可以准确地找到在粉碎发生之前发生的事情

工具->调试->常规->启用 .Net Framework 调试

+

工具->IntelliTace-> IntelliTraceEvents 和调用信息

+

Tools->IntelliTace-> Set StorIntelliTace Recordings in this directory

并选择一个目录

应该允许您进入 .net 代码并跟踪每个函数调用。我在一个小型示例项目上进行了尝试，它可以工作

在每个调试会话之后，它应该创建调试会话的记录。如果我没记错的话，即使 CLR 死了，它也是设置的目录

这应该允许您在 CLR 崩溃之前进行确切的调用。

**第二招**

可能在生产中使用的是这个很棒的框架，叫做`PostSharp`：

注意本教程：

[http://www.sharpcrafters.com/solutions/logging](http://www.sharpcrafters.com/solutions/logging)

在您按照描述使用 postsharp 之后。

您可以为系统中的每个函数在终止时输入它，如果抛出异常，则记录所有变量。

并使用几十行代码完成所有这些工作。

# function - 在计时器处运行功能

> ID：14126229
> 
> 赞同：0
> 
> 时间：2013-01-02T17:16:12.497
> 
> 标签：function, actionscript, timer

我想`function<display()>`每 3 秒运行一次。当我运行该函数时，出现以下错误：

```
RangeError: Error #1125: The index 7 is out of range 4.
    at views::twoHomeView/onTimer()[C:\Users\Kinect\Adobe Flash Builder 4.6\yattah\src\views\twoHomeView.mxml:26]
    at flash.utils::Timer/_timerDispatch()
    at flash.utils::Timer/tick() 
```

我的代码是：

```
<fx:Script>
    <![CDATA[

        import flash.display.Sprite;
        import flash.events.TimerEvent;
        import flash.utils.Timer;

        private var timer:Timer;

        public function Main():void {
            timer = new Timer(1000, 3);
            timer.addEventListener(TimerEvent.TIMER, onTimer);
            timer.start();
        }

        var kaisu:int =0; 

        private function onTimer(event:TimerEvent):void {
            for(var i:int;i<5;i++){
                display(n[kaisu]);
                kaisu += kaisu+1;
            }
        }

    ]]>
</fx:Script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T18:14:36.787

好吧，您的`n`数组只有 4 个元素，而您正在尝试访问第 7 个元素。

你的问题的原因在这里：

```
 for(var i:int;i<5;i++){
            display(n[kaisu]);
            kaisu += kaisu+1; //<-- here your values will be 0,1,3,7..
        } 
```

我确定它不会像您希望的那样增加：

尝试这个：

```
 for(var i:int=0;i<5;i++){
            display(n[i]);
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T18:18:18.583

问题在于您的 var i 未设置为 0。

# css - Firefox 中未显示标题图像（Chrome 和 Safari 仍然可以）

> ID：14126231
> 
> 赞同：0
> 
> 时间：2013-01-02T17:16:14.947
> 
> 标签：css, image, firefox, background

我的站点的标题图像和菜单背景图像未在 Firefox 中显示。如果我删除 url(image_url) 中的双引号，我可以让它们显示在 Firebug 中。

Chrome 和 Safari（以及 Safari iOS）中的一切看起来都很好。

[http://www.label-inconnu.com](http://www.label-inconnu.com)

非常感谢您的帮助。

贝努瓦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T18:53:55.243

我试图在firefox上安装firebug。我试图调试它。然后，在类样式下`div.art-header-jpeg`，我尝试禁用-启用图像。有用！

意思是……这不是你的错。**报告给火狐。**

# c++ - C++ makefile 编译依赖库

> ID：14126234
> 
> 赞同：0
> 
> 时间：2013-01-02T17:16:28.340
> 
> 标签：c++, compilation, makefile, static-libraries

这可能是一个菜鸟问题，但我真的很想弄清楚：我的 C++ 项目使用了其他库（例如 log4cplus 和 getopt_pp）。我在eclipse下开发它，现在我用autotools配置它，用makefile和configure脚本分发它，以确保每个人都可以编译它。我的问题是：我怎样才能获得该调用`./configure`或`./make`将自动编译和安装最终用户系统中的静态库？

*   做这个的最好方式是什么？
*   安装库的最佳路径是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T17:58:57.033

最好的方法是根本不这样做。相反，您应该记录（在安装文档中）您的应用程序/库依赖于其他一些库（最好还有您测试它的版本），并且您的`configure`脚本应该检查这些依赖项的存在。

原因是：

*   此类库应位于的系统之间存在巨大差异。你的脚本永远不会为每个人正确地做到这一点。
*   用户可能已经安装了兼容版本，并且可能更喜欢使用该版本而不是与您的软件捆绑在一起的版本。
*   如今，将此类库静态链接到应用程序中实际上非常罕见。所有主要编译器都默认使用动态链接。这使得用户更有可能已经安装了这些库的版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T18:00:19.013

如果您将这些库与您的项目一起提供（而不是独立分发它们并要求用户确保它们已安装），那么您可能希望将这些库放在项目中它们自己的目录中，并在您的`configure.ac`make通过将`Makefile`输出目标添加到，确保它知道这些子目录`AC_OUTPUT`，即类似

`AC_OUTPUT(Makefile log4cplus/Makefile getopt_pp/Makefile yourprogramsrc/Makefile)`

然后在您的根级别`Makefile.am`，让它知道您的新子目录，即

`SUBDIRS=log4cplus getopt_pp yourprogramsrc`

然后确保您的包含标志和链接器标志设置正确，以指向您包含的库。

# javascript - 设置元素的 style.backgroundColor 在 IE8 中不起作用？

> ID：14126235
> 
> 赞同：1
> 
> 时间：2013-01-02T17:16:30.793
> 
> 标签：javascript, css, internet-explorer-8

[重新编辑的问题]

一段简单的代码：

```
var newDiv = document.createElement("div");
newDiv.style["background-color"] = "#DDD";
newDiv.innerHTML = " (some content) ";
container.appendChild(newDiv); 
```

（对象“容器”在前面定义）

在最新版本的 Chrome 中，新的 div 框以灰色背景显示，在 IE8 中背景是透明的。如果我改成这样：

```
newDiv.style.backgroundColor = "#DDD"; 
```

该框的背景在 IE8 中也是灰色的。为什么是这样？我还没有在IE9中测试过。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T17:20:57.867

To make it work correctly in IE8 and IE9 specify the proper doctype at the start of your document :

```
<!DOCTYPE html>
<html>
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T17:27:52.577

我正在使用 Internet Explorer 8，您的代码可以在我的浏览器中运行，但有一个小技巧 - 设置 DIV 的高度

```
var newDiv = document.createElement("div");
newDiv.style.backgroundColor = "#DDD";
container.appendChild(newDiv);

//this new addition showed it worked
newDiv.style.height = '50px'; 
```

或使用

```
newDiv.innerHTML = '&nbsp;'; 
```

可能是因为 div 没有内容，所以没有显示。

# json - 通过 post 发送 json

> ID：14126236
> 
> 赞同：1
> 
> 时间：2013-01-02T17:16:36.697
> 
> 标签：json, post, webserver

当我尝试将 json 从我的 iphone 应用程序发送到 php 服务器时，我遇到了一个小问题。

我创建 NSData 对象

```
NSData *jsonData = [NSJSONSerialization dataWithJSONObject:test]; 
```

我将它发送到网络服务器

```
-(void)send:(NSData *)jsonData{

    NSMutableURLRequest *request = [[NSMutableURLRequest alloc]
                                    initWithURL:[NSURL
                                                 URLWithString:@"http://localhost:8888/jsonserver/try2.php"]];
    [request setHTTPMethod:@"POST"];

    [request setHTTPBody:jsonData];

    NSData *returnData = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];
    NSString *returnString = [[NSString alloc] initWithData:returnData encoding:NSUTF8StringEncoding];
} 
```

我的网络服务器

```
<?php
    $json = $_POST['json'];
    $person = json_decode($json);    
    $file = fopen('test.txt','w+');
    fwrite($file, $person);
    fclose($file);
?> 
```

我的服务器在文件夹中正确创建了文件，但文件为空

（我的 json 文件在发送到服务器之前类似于 ["a","b","c"]）

谢谢你的帮助：P

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T18:10:01.803

我不了解 iPhone 开发，但看起来您正在消息正文中发送 JSON 数据。要在 PHP 中获取消息的正文，您需要使用以下行：

```
$json = file_get_contents("php://input"); 
```

我还将 iPhone 端的 Content-Type 标头设置为“application/json”。

我不知道这在 iPhone 上是如何工作的，但请记住这一点：POST 通常会采用参数并将它们编码为消息正文中的 HTTP 查询字符串格式，并使用“application/x-www-form-urlencoded”作为Content-Type 标头，因此请确保 iPhone 端的软件没有这样做。

# asp-classic - hash_hmac 在使用纯经典 ASP

> ID：14126243
> 
> 赞同：4
> 
> 时间：2013-01-02T17:16:56.980
> 
> 标签：asp-classic

我想知道，有没有什么办法可以`hash_hmac("sha256", $token, $signkey, true)`在经典的 ASP 中实现（php）？

我需要它来验证来自 Facebook [https://developers.facebook.com/docs/howtos/login/signed-request/的签名请求](https://developers.facebook.com/docs/howtos/login/signed-request/)

```
// Adding the verification of the signed_request below
$expected_sig = hash_hmac('sha256', $payload, $secret, $raw = true); 
if ($sig !== $expected_sig) {
  error_log('Bad Signed JSON signature!');
  return null;
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-04T09:18:22.103

我一直在使用在亚马逊论坛上找到的文件。这是线程： [https ://forums.aws.amazon.com/message.jspa?messageID=147377](https://forums.aws.amazon.com/message.jspa?messageID=147377)

它使用一个 .wsc 文件，它只是一个 JScript 文件，它定义了可以在 ASP 代码中使用的对象。像这样：

```
' ### be sure to have sha256.wsc in the same folder as this script
    Dim sha256
    Set sha256 = GetObject( "script:" & Server.MapPath("sha256.wsc") )
    sha256.hexcase = 0

    Dim result
    result = sha256.b64_hmac_sha256( secretkey, stringtosign ) 
```

这是一个最初用于签署对 Amazon API 的请求的文件。由于我不明白的原因，这在 .wsc 文件中包含了这行代码：

```
d=d.replace ( /\s/g, "\n"); 
```

这会将所有空白字符（包括空格）转换为“\n”。很难相信空格需要转换为“\n”。无论如何，我必须注释掉这一行以使代码为我工作！它确实有效。我已经使用了一段时间没有问题。

从 sha256.wsc 文件：

```
/*
 * A JavaScript implementation of the Secure Hash Algorithm, SHA-256, as defined
 * in FIPS 180-2
 * Version 2.2 Copyright Angel Marin, Paul Johnston 2000 - 2009.
 * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet
 * Distributed under the BSD License
 * See http://pajhome.org.uk/crypt/md5 for details.
 * Adapted into a WSC for use in classic ASP by Daniel O'Malley
 * (based on an SHA-1 example by Erik Oosterwaal)
 * for use with the Amazon Product Advertising API
 */ 
```

sha256.wsc 文件的直接链接： [https ://forums.aws.amazon.com/servlet/JiveServlet/download/9-34858-139271-2601/sha256.wsc](https://forums.aws.amazon.com/servlet/JiveServlet/download/9-34858-139271-2601/sha256.wsc)

我一直找不到官方下载站点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T10:06:18.757

看看 microsoft capicom.dll。你可以下载它[在这里下载](http://www.microsoft.com/en-us/download/details.aspx?id=25281)

可以找到参考[这里找到](http://msdn.microsoft.com/de-de/library/windows/desktop/aa375732%28v=vs.85%29.aspx)

另一种选择是使用 .net 类实现该功能并使该“com 可见”，以便您可以使用经典 asp 中的 .net DLL ...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-19T16:42:50.633

检查我们如何在此存储库中使用加密算法的 javascript 实现：[https ://github.com/ictmanagement/redsysHMAC256_API_ASP](https://github.com/ictmanagement/redsysHMAC256_API_ASP)

如果你打开这个文件：[https](https://github.com/ictmanagement/redsysHMAC256_API_ASP/blob/master/include/dvim_apiRedsys_VB.asp) ://github.com/ictmanagement/redsysHMAC256_API_ASP/blob/master/include/dvim_apiRedsys_VB.asp ，你会发现我们如何得到与php函数相同的结果`hash_hmac("sha256", $token, $signkey, true)`

```
 '/******  MAC Function ******/
    'recibe String|WordArray , retorna WordArray
    Private Function mac256(ent, key) 
        Dim encWA
        Set encWA = ConvertUtf8StrToWordArray(ent)
        Dim keyWA
        Set keyWA = ConvertUtf8StrToWordArray(key)
        Dim resWA
        Set resWA = CryptoJS.HmacSHA256(encWA, keyWA)
        Set mac256 = resWA
    End Function 
```

# c# - MSMQ CreateCursor NullReferenceException

> ID：14126253
> 
> 赞同：6
> 
> 时间：2013-01-02T17:17:38.563
> 
> 标签：c#, .net, msmq

I have a website that uses MSMQ on a remote server to queue pending e-mails. I am able to write the message to the queue, and then call dispose on the queue. The queue still gets the message, but sometime later the GC comes along and tries to clean up and it causes IIS to crash. This is what I see in the event log:

> Exception: `System.NullReferenceException`
> 
> Message: Object reference not set to an instance of an object.
> 
> StackTrace: `at System.Messaging.Cursor.Finalize()`

This code has been running fine for years, but it just started acting up recently. I have rebooting all the servers to troubleshoot it, but that does not help.

**Edit 1**

Here is the code that is sending the messages. `QueueFactory` is just a singleton that has a lock around creating a `MessageQueue`.

```
using (System.Messaging.MessageQueue queue
    = QueueFactory.Instance.BuildQueue(this.Path))
{
    System.Messaging.Message message = new System.Messaging.Message
    {
        Body = body,
        Formatter = new BinaryMessageFormatter(),
        TimeToBeReceived = this.ExpirationMinutes
    };

    queue.Send(message, label);
} 
```

There is a `try-catch` around this code, and I know it never makes it into the `catch` block. I'm beginning to think this was caused when the entire application was upgraded from .NET 3.5 to .NET 4.0\. However it started occurring sporadically, but now it happens every time I write a message to the queue.

**Edit 2**

Here is the code for `BuildQueue`

```
lock (lockHandler)
{
    return new System.Messaging.MessageQueue(queuePath);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T14:53:07.987

尝试使用事务：

```
using (System.Messaging.MessageQueue queue
    = QueueFactory.Instance.BuildQueue(this.Path))
{
    System.Messaging.Message message = new System.Messaging.Message
    {
        Body = body,
        Formatter = new BinaryMessageFormatter(),
        TimeToBeReceived = this.ExpirationMinutes
    };

    MessageQueueTransaction transaction = new MessageQueueTransaction();

    try
    {
        transaction.Begin();
        queue.Send(message, label, transaction);
        transaction.Commit();
    }
    catch(System.Exception e)
    {
        transaction.Abort();
        throw e;
    }
    finally
    {
        transaction.Dispose();
    }
} 
```

# c# - Entity Framework 5 不会插入自引用多对多关系

> ID：14126254
> 
> 赞同：1
> 
> 时间：2013-01-02T17:17:53.413
> 
> 标签：c#, entity-framework, entity-framework-5, self-reference

我不明白为什么这个配置不会向数据库生成插入语句。我正在通过 SQL Profiler 进行检查。

这是我通过 Visio 制作的模型：

![视觉模型](../Images/aee645f62921cf72f1e49704c9a705f7.png)

这是我的 edmx（首先是数据库）。圆圈显示返回到 GeoBoundary 的自引用关系。

![edmx模型](../Images/8455d525842c4bb29eabd04b62d3a192.png)

这是我的代码：

```
public void UpdateAssocs(Dictionary<int, List<int>> fromTo) {
  //iterate through each dictionary entry
  foreach (KeyValuePair<int, List<int>> entry in fromTo) {
    using (TransactionScope scope = new TransactionScope()) {
      //get a reference to the parent geoboundary for this entry
      GeoBoundary parent = contactContext.GeoBoundaries
        .FirstOrDefault(x => x.GeoID == entry.Key);
      //test to see if the parent is null, it shouldn't be b/c this dictionary was generated 
      // from a list of database values (but shit happens so throw an error if it is null)
      if (parent != null) {
        foreach (int childID in entry.Value) {
          //check to see if the child exists in the parents list of children
          GeoBoundary child = parent.GeoBoundaryAssocTo
            .FirstOrDefault(x => x.GeoID == childID);
          if (child == null) {
            //get a ref to the GeoBoundary that SHOULD be tied to the parent (it should exist but there just 
            // isn't an established relationship in the db)
            child = contactContext.GeoBoundaries
              .FirstOrDefault(x => x.GeoID == childID);
            //check the damn thing again b/c you never want to assume...
            // but if it's still null then do nothing!
            if (child != null) {
              parent.GeoBoundaryAssocTo.Add(child);                  
              contactContext.SaveChanges();
            }
          }
        }
      }
      else {
        throw new Exception(@"Parent GeoID passed to UpdateAssocs method or GeoID is null.");
      }
      scope.Complete();
    }
  }
} 
```

当我进入`parent.GeoBoundaryAssocTo.Add(child);`调试器时，我确保父母和孩子都存在，然后我逐步完成，但在探查器中什么也没有。是什么赋予了？两个实体都已经存在于数据库中并且除了关系之外我没有改变任何东西，这是一个问题吗？如果是这样，那么我如何将关系标记为已更改，以便 EF 生成插入？

EDMX 详细信息：

```
 <AssociationSet Name="GeoBoundaryAssociation" Association="Contact.GeoBoundaryAssociation">
      <End Role="GeoBoundary" EntitySet="GeoBoundaries" />
      <End Role="GeoBoundary1" EntitySet="GeoBoundaries" />
    </AssociationSet>

    <Association Name="GeoBoundaryAssociation">
      <End Type="Contact.GeoBoundary" Role="GeoBoundary" Multiplicity="*" />
      <End Type="Contact.GeoBoundary" Role="GeoBoundary1" Multiplicity="*" />
    </Association> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T17:49:01.367

您需要确保您的导航属性附加到当前 DBContext。否则 EF 将忽略它。

试试这个：

```
...

//get a reference to the parent geoboundary for this entry
GeoBoundary parent = contactContext.GeoBoundaries
    .include("GeoBoundaryAssocTo")
    .FirstOrDefault(x => x.GeoID == entry.Key);

...
// You may need to use include on your child entity too. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T13:30:43.463

好吧，我是我自己不幸的根源。我没有意识到我正在重用我的contactContext（实例化为服务类），并且在我之前设置的方法方法调用中`AutoDetectChangesEnabled = false;`。我需要做的就是重新打开更改跟踪。不知何故，我从来没有想过服务类在以前的调用中保持了它的状态。活到老，学到老。

# php - 在 imagecreatetruecolor() 之后将 imagefill() 用于白色背景的 PHP 问题

> ID：14126255
> 
> 赞同：1
> 
> 时间：2013-01-02T17:17:53.320
> 
> 标签：php, image-processing

我有一个图库工具，其中我的所有图像都必须适合 515 像素 X 343 像素的空间，同时居中。我保留了比例，并成功地将图像居中在该空间中，两侧有黑色背景（顶部、右侧、底部、左侧）在调整大小后始终保持打开状态。图像可能比给定规格更高或更宽。

我需要将黑色背景设为白色，并尝试按照此问题中建议的答案[imagescreatetruecolor with a white background](https://stackoverflow.com/questions/8135271/imagescreatetruecolor-with-a-white-background) 在更高的图像上，我成功地将左侧变为白色，但无法将图像的右侧变为白色. 这是我的代码的一部分。

```
$file1new = imagecreatetruecolor($framewidth, $frameheight);

if(isset($fromMidX) && $fromMidX > 0){
    $white = imagecolorallocate($file1new, 255, 255, 255); 
    $rightOffset = ($framewidth - $fromMidX) + 1;
    imagefill($file1new, 0, 0, $white);  //Line 1
    imagefill($file1new, $rightOffset, 0, $white); //Line 2 
} 
```

变量 $framewidth = 515, $framheight = 343, $fromMidX 是 x 坐标偏移量。如果我在第 2 行将 $rightOffset 替换为 510 的静态量，则右侧仍然是全黑的（即使是最后 5 像素）。更好的是，我注释掉第 1 行而不是第 2 行，左侧保持白色，右侧保持黑色。

我理解 imagefill() 如何工作的方式是，它从给定的 X、Y 坐标开始，并用新颜色填充该像素的任何颜色，在我的例子中是 255,255,255。所以我想我只在一侧得到白色的原因是因为我的图像将画布一分为二。这就是我为右侧添加第二个 imagefill() 的原因。

唯一让我感动的是，我什至在将上传图像的对象带入方程之前就使用了 imagefill()。所以我不知道这会如何影响被白色填充的东西。

任何见解将不胜感激。

编辑1：在上面的代码之后我有这个：

```
$source = imagecreatefromjpeg($image); //Line 3
imagecopyresampled($file1new, $source , $fromMidX, $fromMidY , 0, 0, $framewidth, /$frameheight, $w, $h); //Line 4
imagejpeg($file1new, $image,85);
imagedestroy($file1new); 
```

变量 $image 是我上传后的图片的位置

```
move_uploaded_file($_FILES['image']['tmp_name'], $location);
$image = $location; 
```

如果我注释掉第 3 行和第 4 行，那么生成的图像全是白色的。

我还相信在对图像应用任何调整大小操作之前，我会用全白填充图像。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T18:07:36.457

加载请求的图像后尝试重新填充右侧？

```
<?php
$source = imagecreatefromjpeg($image); //Line 3
$file1new = imagecreatetruecolor($framewidth, $frameheight);

$white = imagecolorallocate($file1new, 255, 255, 255);
//fill whole image with white color
imagefill($file1new, 0, 0, $white);  //Line 1

//find right side of image
$rightOffset = ($framewidth - $fromMidX) + 1;

//insert source file into new image
imagecopyresampled($file1new, $source , $fromMidX, $fromMidY , 0, 0, $framewidth, $frameheight, $w, $h); //Line 4

//fill image right hand side with white
imagefill($file1new, $rightOffset, 0, $white); //Line 2 

imagejpeg($file1new, $image,85);
imagedestroy($file1new);
?> 
```

# java - Java 初始化子类

> ID：14126263
> 
> 赞同：2
> 
> 时间：2013-01-02T17:18:36.657
> 
> 标签：java, instantiation, subclass

初始化接口的实现类的适当方法是什么（由某些逻辑确定）

例子

```
IAnaimal is an interface
Cat -> IAnimal
Dog -> IAnimal
Cow -> IAnimal

int x = in.nextInt();
IAnimal animal = null;

if(x==1)
 animal = new Dog();
else if(x==2)
 animal = new Cat();
else
 animal = new Cow();

animal.destroyManKind(); 
```

这是正确的方法吗？有没有“更”专业的方式来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T17:23:39.223

我会用一种更简洁的方式来读取名称而不是 1、2 和 3，但在这种情况下您可以使用开关。

```
int choice = in.nextInt();

switch(choice) {
  case 1: animal = new Dog(); break;
  case 2: animal = new Cat(); break;
  default: animal = new Cow(); break;
} 
```

或使用字符串开关

```
String choice = in.next();

switch(choice.toLowerCase()) {
  case "dog": animal = new Dog(); break;
  case "cat": animal = new Cat(); break;
  case "cow": animal = new Cow(); break;
  default: // error
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T17:23:02.263

你做事的方式没有错。您还可以查看[工厂设计模式](http://www.allapplabs.com/java_design_patterns/factory_pattern.htm)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T17:22:53.233

假设他们有一个共同的超类 Animal，它可能有一个采用 int 的静态构建器方法，你可以这样做

```
IAnimal animal = Animal.build(x); 
```

在哪里

```
public class Animal{
public static IAnimal build(int x){

 if(x==1) return new Dog();
 else if(x==2) return new Cat();

 return new Cow();
}} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-02T17:25:18.347

```
 switch (x){
      case 1: 
       animal = new Dog();
       break;
      case 2:
       animal = new Cat();
       break;
      default
       animal = new Cow();
    } 
```

你确定这`Cow`是一个有用的默认值吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-02T17:25:07.843

我更喜欢动物阵列

```
IAnimal animal = null;

IAnimal [] animals ={null,new Dog(),new Cat(),new Cow()};

animal = animals[x] 
```

# javascript - Node.JS 上的跟踪系统

> ID：14126267
> 
> 赞同：1
> 
> 时间：2013-01-02T17:18:56.117
> 
> 标签：javascript, node.js, mongodb, websocket, socket.io

我正在 Node 中构建一个跟踪系统，需要一些帮助来了解使用跟踪脚本的 3rd 方将如何连接到 Node 应用程序。

最初我设置了一个页面来使用 Socket.io 连接到应用程序，但该解决方案似乎只有在客户端页面托管在 Node 服务器上时才有效。因此，例如在第 3 方网站上，他们将拥有：

> [http://node.appserver.com:8080/tracker.js](http://node.appserver.com:8080/tracker.js)

该脚本将从站点收集数据，然后通过 socket.io 连接到应用程序，但我似乎无法得到任何响应，因为应用程序正在侦听来自应用程序本身的 index.html 文件的请求，而不是来自 tracker.js 脚本。

这是我要运行应用程序的流程：

> [http://www.evernote.com/shard/s7/sh/56f88de2-f1c0-470b-9169-c7aca1479037/92b00f81ff86eebd4add6f6f68053a50](http://www.evernote.com/shard/s7/sh/56f88de2-f1c0-470b-9169-c7aca1479037/92b00f81ff86eebd4add6f6f68053a50)

tracker.js 将使用以下连接：

```
$.getScript('/socket.io/socket.io.js', function(data){
  var socket = io.connect('http://node.appserver.com:8080');
  socket.emit('adTracker', 
    { adServer: 'datalunk', zone : 'top_home', referingURL : 'comple.com' } 
  );
}); 
```

然后应用程序看起来像这样：

```
var app = require('http').createServer(handler)
  , io = require('socket.io').listen(app)
  , fs = require('fs')

app.listen(8080);

io.configure(function () {
    io.set('authorization', function (handshakeData, callback) {
        if (handshakeData.xdomain) {
            callback('Cross-domain connections are not allowed');
        } else {
        callback(null, true);
        }
    });
});

function handler (req, res) {
  fs.readFile(__dirname + '/index.html',
  function (err, data) {
    if (err) {
      res.writeHead(500);
      return res.end('Error loading index.html');
    }

    res.writeHead(200);
    res.end(data);
  });
}

io.sockets.on('connection', function (socket) {
  socket.on('adTracker', function (data) {
var adRequestData = data;
var pass = ["bigbooks"];
var databaseUrl = "username:password@linus.mongohq.com:10006/node-test";
var collections = ["cmnads"]
var db = require("mongojs").connect(databaseUrl, collections);

db.cmnads.insert({adRequest : adRequestData}, {$set: {password: pass}}, function(err, updated) {
    if( err || !updated ) console.log("User not updated");
    else console.log("User updated");
    });
  });
}); 
```

有人可以告诉我应该如何将我们的网络站点连接到实际的 Node 应用程序吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T18:08:47.703

您的第 3 方客户端站点需要包含您的 tracker.js（并且由于您的 $.getScript，它们需要包含 socket.io + jQuery）。

另一种解决方案是从您的 tracker.js 中的 CDN 加载 socket.io（应该是[http://cdn.socket.io/stable/socket.io.js](http://cdn.socket.io/stable/socket.io.js)）并删除您的 jQuery 依赖项：然后您的代码可以看起来像这样（加载socket.io并在加载时做你的事情）：

```
(function(document, onload){

  var io = document.createElement('script');
  io.src = "//cdn.socket.io/stable/socket.io.js";
  io.setAttribute('async', 'true');
  if ( typeof onload === 'function') {
    io.onloadDone = false;
    io.onload = function() {
        io.onloadDone = true;
        onload();
    };
    io.onreadystatechange = function() {
        if ( "loaded" === io.readyState && !io.onloadDone ) {
            io.onloadDone = true;
            io.onload();
        }
    };
  }
  // head exists -> append to head, otherwise to body
  (document.getElementsByTagName('head') || document.getElementsByTagName('body'))[0].appendChild(io);

})(document, function(){
  // here socket.io should be ready
  var socket = io.connect('http://node.appserver.com:8080');
  // ...
}); 
```

把它放在你的 tracker.js 中，将它托管在某个地方，然后你的客户可以只包含 tracker.js：

```
<script src="yourhost/tracker.js"></script> 
```

但通常跟踪系统不是使用 socket.io 构建的（我认为 socket.io 压缩了大约 100k，对于跟踪解决方案来说非常大）

通常跟踪系统是通过创建请求并将变量作为参数发送来完成的。

在客户端：

```
var img = new Image();
img.src = "http://node.appserver.com:8080/tracking.gif?param1=value1&param2=value2"; 
```

在服务器上（托管 gif 1x1 px 并将其命名为 tracking.gif）：

```
var http = require("http");
var url = require("url");
var trackingGif = fs.readFileSync("./tracking.gif");
http.Server(function (req, res) {
  var params = url.parse(req.url, true)).query;
  res.writeHead(200);
  res.end(trackingGif, "binary");
}); 
```

希望它有所帮助。提示：我所有的代码都未经测试，但应该清楚我的意思。

# c# - Retrieve a C# List with email addresses from Active Directory

> ID：14126269
> 
> 赞同：4
> 
> 时间：2013-01-02T17:18:59.083
> 
> 标签：c#, asp.net, list, email, active-directory

I have a list with all of the AD usernames (over 1,500), and I would like to know what would be the best way to retrieve the email address for all users contained within that list.

Specifically, a method that I can call and supply it with a List of usernames and have the method return a list of the same size that contains the email addresses for all of the usernames supplied on the initial list.

I already know how to retrieve the email address using the conventional LDAP way as shown in [http://lozanotek.com/blog/articles/149.aspx](http://lozanotek.com/blog/articles/149.aspx) , and I know I could use a Foreach, however I am looking for a more efficient way to retrieve over 1,500 email addresses without querying AD over 1,500 times.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T17:38:54.947

嘿，我一直在寻找相同的东西，这对我有用：[http ://forums.asp.net/t/1610245.aspx/1](http://forums.asp.net/t/1610245.aspx/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T17:49:34.807

Using the method in your link you would not be querying AD 1500 times, you would be running one query that returns all 1500 users as objects. Then using a foreach loop you would iterate through each object to get the user's emails.

An example that would query AD 1500 times would be if you had an ArrayList of all user names and did the following (pseudo-code):

```
ArrayList UserNames = new ArrayList();
Foreach(string name in UserNames)
{
   //Query AD to get email of user by passing in name
} 
```

One way to make this faster would be to add multi-threading and have each thread handle a different query to AD at the same time. For instance, you could add filters to your query so that it only returns names that start with A and have one thread handle that, while another handles names that start with B and so on. This would require more queries to AD (26, 1 for each letter in the alphabet) but you could handle the returned data in parallel.

Unless you have really old domain controllers I wouldn't worry about hitting AD hard, it is made for this. I cache all of AD (users, groups, computers and relationships between them) into a database nightly and we have over 8000 users. I do this because calls to AD tend to be slow and we wanted group membership information to be available through a webpage without users waiting forever. This caching makes thousands of calls to AD a minute and this does not disturb the workflow of my company during its 3 hour run time.

Update:
Sorry I read over your question quickly and missed that you are attempting the method with a list of all names. You can either use the multi-threaded method as I stated before but pass each user name to be handled to a different thread (limiting the number of threads so it does not go out of control!!) or use the one query to get all users and check to see if they exist in your list within the foreach loop. By making your list easy to traverse using a binary tree or another sorted collection, seeing if a user exists should be fairly quick. You can also remove users from your list as they are found to make subsequent searches faster.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T18:01:10.603

我在下面使用了这段代码，但现在我意识到这与 Srinivas 所说的代码相同。

```
DirectoryEntry entry = new DirectoryEntry("LDAP://YourDomain"); 
DirectorySearcher dSearch = new DirectorySearcher(entry); 
dSearch.Filter = "(objectClass=user)"; 
foreach (SearchResult sResultSet in dSearch.FindAll()) 
{ 
    if (sResultSet.Properties["mail"].Count > 0) 
        Response.Write(sResultSet.Properties["mail"][0].ToString() + "<br/>"); 
} 
```

# c# - 动态 LINQ 日期时间比较字符串构建 - Linq To Entities

> ID：14126271
> 
> 赞同：8
> 
> 时间：2013-01-02T17:19:08.433
> 
> 标签：c#, string, linq, entity-framework, dynamic-linq

我将 Scott Guthrie 的动态 LINQ 库与 Entity Framework 和 C# 一起使用。

我必须根据几个因素将我的 where 字符串构建成一个变量，然后将字符串变量传递给 where 子句。出于某种原因，这将起作用：

```
ContactList = ContactList.Where("DateAdded >= @0", DateTime.Parse("12/1/2012")); 
```

但这行不通

```
string WhereClause = string.Format("DateAdded >= {0}", DateTime.Parse("12/1/2012"));
ContactList = ContactList.Where(WhereClause); 
```

如前所述，我需要在传递变量的版本中使用它。有人知道为什么第二个不起作用吗？

提前致谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-06-18T13:42:18.243

[使用此处](http://www.lcs.syr.edu/faculty/fawcett/handouts/CoreTechnologies/CSharp/samples/CSharpSamples/LinqSamples/DynamicQuery/Dynamic%20Expressions.html)的信息，我能够使其使用稍微不同的字符串格式。

这样做对我来说很好：

```
ContactList.Where("DateAdded >= DateTime(2013, 06, 18)") 
```

请注意，这根本不适用于`DateTimeOffset`列。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-03T19:52:15.547

看来我试图做的事情对于当前的 DynamicLINQ 库是不可能的。Tilak 在下面很好地概述了它不起作用的原因。

我的解决方案是修改 DynamicLINQ 库以允许将查询编写为字符串并传递给日期/时间数据类型的 where 子句。Paul Hatcher 在这里找到了修改：[LINQ TO SQL, Dynamic query with DATE type fields](https://stackoverflow.com/questions/2818044/linq-to-sql-dynamic-query-with-date-type-fields/6291803#6291803)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T17:32:01.607

[ObjectQuery.Where 重载](http://msdn.microsoft.com/en-us/library/bb338811.aspx)接受 2 个参数。

1.  `string predicate`
2.  `params ObjectParameter[] parameters`

在您的第一个示例中，使用参数（使用名称、类型和值）`Where`构建查询（where 子句）`ObjectParameter``ObjectParameter`

在您的第二个示例中，传递的任何内容都被视为最终的 where 子句（没有基于传递参数的数据类型完成的内部转换）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-07T15:39:28.617

基于 Richard Rout 的选项，稍作修改：

```
ContactList.Where("DateAdded >= DateTime(2013, 06, 18)") 
```

这适用于我的 Linq2Entities 解决方案。请注意，`DateTime`而不是`Date`. 希望这可以避免这个问题给我带来的头痛。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-02T17:20:50.393

`ContactList.Where`可能会在非数字参数（例如 DateTime）周围加上引号。在您的第二个字符串中，日期没有被引用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-06-21T21:06:14.377

与动态 linq 核心和 ef 3.1 与 sql server 有类似的问题，通过显式设置列类型解决了它：

1.  流畅方式：

    ```
    modelBuilder.Entity<Contact>().Property(p => p.DateAdded).HasColumnType("datetime") 
    ```

2.  属性方式：

    ```
    public class Contact
    {
         [Column(TypeName = "datetime")]
         public DateTime DateAdded { get; set; }
    } 
    ```

用法：

```
ContactList = ContactList.Where("DateAdded == @0", "2021-03-25 02:29:00.000"); 
```

sql server 日期时间格式：YYYY-MM-DD hh:mm:ss[.nnn]

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-10-13T14:20:29.023

我知道这是一个老问题，但如果有人仍然遇到 ASP.Net Core 的这个问题，我可以通过以下方式解决它。

基本上，您必须使用 Column 属性添加实体类（表列）并指定 TypeName。对于上面的问题，如下：

```
[Column(TypeName = "datetime")]
public DateTime DateAdded { get; set; } 
```

那应该可以修复数据类型转换错误。

来源：[https ://github.com/zzzprojects/System.Linq.Dynamic.Core/issues/240](https://github.com/zzzprojects/System.Linq.Dynamic.Core/issues/240)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-11-16T16:28:51.123

有点老问题，但如果这对其他人有帮助，我的问题是它正在使用我的 DateTime 并将其设为字符串。所以简单的解决方法是让它再次约会。就像是：

```
var where = $"{propertyName} >= DateTime.Parse(\"{startDate}\") and {propertyName} <= DateTime.Parse(\"{endDate}\")";
query = query.Where(where); 
```

这比 The_Outsider 所说的添加 column 属性要多一点打字，但只是另一种选择。

# linux - 为什么这个行号命令会破坏字符编码？

> ID：14126272
> 
> 赞同：4
> 
> 时间：2013-01-02T17:19:08.130
> 
> 标签：linux, perl, encoding

我想通过在每行的开头添加行号来修改文件。我发现以下命令可以做到这一点：

`cat file | perl -pe '$_ = "$. $_"' > file_with_line_numbers`

这似乎有效，但是，当我在 vim 中打开文件时，它充满了 ^@ 和 ^M 字符。进一步调查表明编码已经改变。

```
> file -bi file
text/plain; charset=utf-16le

> file -bi file_with_line_numbers
application/octet-stream; charset=binary 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-02T17:22:41.360

因为您没有对输入数据进行解码，也没有对输出数据进行编码，并且通过连接`$.`您`$_`正在混合两种不同编码的数据（相反，您正在混合一个字节串和一个字符串，但是 perl 隐式地将字节字符串转换为字符串，并且以非常错误的方式来满足您的需要）。

一种解决方法是：

```
perl -pe  'BEGIN { binmode STDIN, ":encoding(utf16le)"; binmode STDOUT, ":encoding(utf16le)" } $_ = "$. $_";' < input > output 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-02T18:41:18.390

您需要解码程序的输入并对程序的输出进行编码。

正如 ysth 所指出的那样，这可以解决问题（Windows 除外，但可能使用 cygwin）：

```
perl -Mopen=:std,':encoding(utf-16le)' -pe'$_="$. $_";' file.in >file.out 
```

* * *

其余的原始答案：

如果你有 UTF-8，这是最容易做到的，因为你可以使用`-CSDA`.

```
<file.in iconv -f UTF-16le -t UTF-8 \
   | perl -CSDA -pe'$_="$. $_";' \
     | iconv -f UTF-8 -t UTF-16le \
       >file.out 
```

由于 UTF-8 的特性，在这种情况下，您无需完全解码/编码就可以逃脱，允许您使用以下任一项：

```
<file.in iconv -f UTF-16le -t UTF-8 \
   | perl -pe'$_="$. $_";' \
     | iconv -f UTF-8 -t UTF-16le \
       >file.out 
```

或者

```
<file.in iconv -f UTF-16le -t UTF-8 \
   | nl \
     | iconv -f UTF-8 -t UTF-16le \
       >file.out 
```

# asp.net-mvc - Getting root node of the breadcrumb using mvcsitemap

> ID：14126277
> 
> 赞同：0
> 
> 时间：2013-01-02T17:19:16.793
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4, sitemap, mvcsitemapprovider

I have a sitemap node and the format is as follows:

```
<mvcSitemapenode title="A"/> 
```

Is it possible to get the parent node using `Mvcsitemap()` in the cshtml file?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T09:17:29.943

您应该能够像这样获得父节点：

```
@Html.MvcSiteMap().Provider.CurrentNode.ParentNode 
```

提供者继承自抽象的[SiteMapProvider](http://msdn.microsoft.com/en-us/library/system.web.sitemapprovider.aspx)类

# jquery - 使用 $.getJSON 读取 JSON

> ID：14126280
> 
> 赞同：0
> 
> 时间：2013-01-02T17:19:55.173
> 
> 标签：jquery, json, adobe-edge

对于大学作业，我必须将 JSON 数据读入 Adob​​e Edge 项目。在下面的 JSON 中，您将看到我制作了一组颜色。函数必须在 json 文件`setElementsColor(color)`的数组中查找正确的对象。`Colors`所以参数`color`必须等于`colorName`对象的。我不太确定该怎么做。

这是JSON：

```
{
    "Colors": [
        {
            "colorName": "Black",
            "imageName": "fridge_black.jpg",
            "footerName": "black_footer.png",
            "facebookLogo": "black_facebook.png",
            "twitterLogo": "black_twitter.png",
            "linkedinLogo": "black_linkedin.png"
        },
        {
            "colorName": "Blue",
            "imageName": "fridge_blue.jpg",
            "footerName": "blue_footer.png",
            "facebookLogo": "blue_facebook.png",
            "twitterLogo": "blue_twitter.png",
            "linkedinLogo": "blue_linkedin.png"
        }
    ]
} 
```

以下函数用于读取 JSON 文件。

```
function setElementsColor(color){
  $.getJSON('json/colors.json',function(data){
    //The JSON must be read out here
  });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T17:28:33.960

我会用[`$.grep`](http://api.jquery.com/jQuery.grep/).

```
function setElementsColor(color){
  $.getJSON('json/colors.json',function(data){
    var obj = $.grep(data.Colors, function(color) {
      return color.colorName === color;
    });
    /* Use obj */
  });
} 
```

`Colors`如果是对象而不是数组，我会更容易。

**免责声明：**未经测试。

# python - 删除列表中提到的图像

> ID：14126283
> 
> 赞同：1
> 
> 时间：2013-01-02T17:20:00.657
> 
> 标签：python

我正在尝试为图像列表中定义的每个图像构建一个路径，如果存在则将其删除，目前是下面图像列表中提到的每个图像的硬编码路径..有没有更简单的方法来实现这个？

```
import os
import subprocess
from subprocess import check_call,Popen, PIPE

def main ():
    images=['test1.img','test2.img','test3.img']
    ROOT="/local/mnt/workspace"
    target="wc3123"
    #Construct ROOT + "/out/target/product/" + target + "/test1.img 
    #for each image mentioned in imageslist remove if it exist"
    test1= ROOT + "out/target/product/" + target + "test1.ming"
    check_call("rm -rf %s" %test1,shell=True)

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T17:25:36.893

您可以像这样遍历`images`文件名列表：

```
def main ():
    images=['test1.img','test2.img','test3.img']
    ROOT="/local/mnt/workspace"
    target="wc3123"
    for image in images:
        #Construct ROOT + "/out/target/product/" + target + "/test1.img 
        #for each image mentioned in imageslist remove if it exist"
        test1= ROOT + "out/target/product/" + target + "/" + image
        check_call("rm -rf %s" %test1,shell=True) 
```

我还建议进行一些其他清理，例如使用[`os.unlink`](http://docs.python.org/2/library/os.html#os.unlink)删除文件而不是构造要传递给外壳的字符串（这是不安全的），参数化常量以便可以替换它们，以及使用[`os.path.join`](http://docs.python.org/2/library/os.path.html#os.path.join)而不是连接路径名：

```
import os

def main(images, root='/local/mnt/workspace', target='wc3123'):
    for image in images:
        os.unlink(os.path.join(root, target, image))

if __name__ == '__main__':
    main(['test1.img', 'test2.img', 'test3.img']) 
```

# google-apps-script - Can I use Google Apps Script with Google Voice to create interactive menus or other Voice XML like services?

> ID：14126287
> 
> 赞同：3
> 
> 时间：2013-01-02T17:20:24.913
> 
> 标签：google-apps-script

I tried searching Google's forums, but couldn't find anything remotely similar. Does Google Apps Script allow this type of interactivity with Google Voice? Where can I find some sample source code?

# javascript - 表示持续时间的 HTML 表单输入的建议（使用 Javascript/JQuery）

> ID：14126289
> 
> 赞同：2
> 
> 时间：2013-01-02T17:20:28.703
> 
> 标签：javascript, jquery, html

我正在处理一个应该包含持续时间字段的表单。我的问题是如何最好地表示这种类型的输入 - 我通过在线搜索找到的表示看起来不必要地复杂，并且没有涵盖小于 1 天的持续时间（例如，两个日历并排选择开始和结束日期，或者两个具有 jQuery datepicker 功能的输入表单）。由于我以引导模式呈现表单，因此简单是先决条件。

我目前正在考虑的一个选项是数字微调器和时间术语（分钟、小时、天和月）的下拉列表。这是一个不错的选择还是我应该考虑更合适的选择？

谢谢你的帮助，亚历山德拉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T17:25:53.843

时间滑块呢？正如您所说，您可以使用下拉列表来选择单位，然后您可以使用滑块来表示数量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T17:32:14.867

您可以使用 2 个日期时间选择器，一个用于开始，一个用于结束

[我在这里](http://trentrichardson.com/examples/timepicker/)找到了一个关于日期时间选择器的好例子

# linux - Find duplicates in desired column and print the selected patterns in awk?

> ID：14126291
> 
> 赞同：0
> 
> 时间：2013-01-02T17:20:29.470
> 
> 标签：linux, sed, awk

Input file: Input.txt

```
A B C
1 rs1 5
1 kp1 5
1 rs2 6
1 ga2 6
1 rs8 9
2 kp3 7
2 rs3 7
2 rs4 5
2 rs5 8
3 kp6 4
3 kp7 6 
```

For each category in column **A** (example: 1, 2 and 3) separately look for duplicates in column **C**. If there are duplicate numbers the print a list of non **rs** IDs in each category in separate files.

Output files:

file_category_1.txt

```
A B C
1 kp1 5
1 ga2 6 
```

file_category_2.txt

```
A B C
2 kp3 7 
```

file_category_3.txt

```
A B C 
```

Here file_category_3.txt will not have any output because no duplicates in it.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T17:42:59.590

这将使您大部分时间到达那里

```
awk 'NR==1 {print; next} seen[$1,$3]++ {print}' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T20:02:48.780

未经测试但应该接近：

```
awk '
NR==1 {
   hdr = $0
   next
}
{
   cnt[$1,$3]++
   cats[$1]
   ids[$2]
   map[$1,$3,$2] = $0
}
END {
   for (cat in cats) {
      print hdr > "file_category_" cat ".txt"
   }
   for (key in cnt) {
      if (cnt[key] > 1) {
         split(key,keyA,SUBSEP)
         for (id in ids) {
            if ((key,id) in map) {
               print map[key,id] > "file_category_" keyA[1] ".txt"
            }
         }
      }
   }
}' file 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T17:50:25.910

not too difficult: Here is the oneliner you can do, in pseudo-code:

for category in 1 2 3 ; grep on field $1 for that category | keep only $3 $2 (in that order)| sort | uniq -c | grep -v "lines with only 1 count" | grep -v "any occurence of 'rs' in $2 field" > file_category_$category.txt

But, as Clement pointed out, you should do part of the work ^^ That's why it's only pseudo-code (but can be straightforwardly put into actual code in maybe 3mn)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T03:45:47.827

您实际上在这里遇到了两个问题，这两个问题都可以使用`awk`.

首先，您需要先将文件拆分为更小的文件：

```
awk 'NR==1 { r=$0; next } { print ($1==i ? "" : r ORS) $0 > "file_category_" $1 ".txt"; i=$1 }' input.txt 
```

其次，您需要根据您的选择标准过滤较小的文件：

```
for i in file_category_*.txt; do awk 'FNR==NR { a[$3]++; next } FNR==1 || a[$3]>1 && $2 !~ /^rs/' "$i"{,} > tmp && mv tmp "$i"; done 
```

这是结果`grep . file_category_*.txt`：

```
file_category_1.txt:A B C
file_category_1.txt:1 kp1 5
file_category_1.txt:1 ga2 6
file_category_2.txt:A B C
file_category_2.txt:2 kp3 7
file_category_3.txt:A B C 
```

* * *

* * *

或者，如果您有`GNU awk`并且需要单通道解决方案，您可以使用多维数组来做同样的事情。像这样运行：

```
awk -f script.awk input.txt 
```

内容`script.awk`：

```
NR==1 {
    r=$0
    next
}

{
    a[$1][$3][$0]
    next
}

END {
    for (i in a) {
        for (j in a[i]) {
            for (k in a[i][j]) {

                split(k,b)
                print (n==1 ? "" : r ORS) \
                    (length(a[i][j])>1 ?  \
                    (b[2] !~ /^rs/ ? k : "") : "") \
                    > "file_category_" i ".txt"
                n=1
            }
        }
        n=0
    }
} 
```

这是结果`grep . file_category_*.txt`：

```
file_category_1.txt:A B C
file_category_1.txt:1 kp1 5
file_category_1.txt:1 ga2 6
file_category_2.txt:A B C
file_category_2.txt:2 kp3 7
file_category_3.txt:A B C 
```

或者，这是单线：

```
awk 'NR==1 { r=$0; next } { a[$1][$3][$0]; next } END { for (i in a) { for (j in a[i]) for (k in a[i][j]) { split(k,b); print (n==1 ? "" : r ORS) (length(a[i][j])>1 ? (b[2] !~ /^rs/ ? k : "") : "") > "file_category_" i ".txt"; n=1 } n=0 } }' input.txt 
```

# c# - MVC Web API 解决了错误的方法

> ID：14126294
> 
> 赞同：0
> 
> 时间：2013-01-02T17:20:47.100
> 
> 标签：c#, asp.net-mvc, asp.net-web-api

所以，我的 API 中有 3 种方法：

```
public List<FlatResponse> GetFlats()
public Flat Reserve(int id, int customerId, string service)
public List<FlatResponse> SearchFlats(double budget, double surface) 
```

现在，不知何故，对于每个响应，API 都使用该`GetFlats()`方法。

也许我使用了错误的网址？

要预订公寓，我使用

> `myUrl.com/api/flats/?id=1&customerId=2&service=someservice`

. 要搜索特定的公寓，我使用

> `myUrl.com/api/flats/?budget=500&surface=30`

我究竟做错了什么？

**编辑：**

我的项目可能结构不正确。虽然它适用于另一个 API。

*我的平面控制器类*

```
 public class FlatsController : ApiController
    {
        public List<FlatResponse> GetFlats()
        {
            ...

        }

        public Flat Reserve(int id, int customerId, string service)
        {
            ...
        }

        public List<FlatResponse> SearchFlats(double budget, double surface)
        {
           ...
        }
    } 
```

*平面响应类*

```
public class FlatResponse
    {
        public int Id { get; set; }
        public string Description { get; set; }
        public string Street { get; set; }
        public int HouseNumber { get; set; }
        public int PostalCode { get; set; }
        public string City { get; set; }
        public double RentalPrice { get; set; }
        public double Surface { get; set; }
        public int ContractTime { get; set; }
        public DateTime StartDate { get; set; }
        public List<string> Facilities { get; set; }
        public string ContactPersonName { get; set; }
        public string ContactPersonEmail { get; set; }
        public string ContactPersonTelephone { get; set; }
        public bool Reserved { get; set; }
        public string DetailUrl { get; set; }
        public string ImageUrl { get; set; }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T17:24:10.627

我认为问题可能在于您没有覆盖约定：GetFlats 将“get”作为前缀，因此它是对 GET 请求的调用。

尝试使用动词属性，以覆盖约定：

```
[HttpGet] public List<FlatResponse> GetFlats()
[HttpGet] public Flat Reserve(int id, int customerId, string service)
[HttpGet] public List<FlatResponse> SearchFlats(double budget, double surface) 
```

问候，

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T17:37:14.053

从您的代码中，我可以将 Flat 关联为具有 3 个 get 方法的实体。但是从定义上看，除了 GetFlats 方法外，其他方法并没有按照约定告诉 MVC API 控制器它们是 get 方法。要启用此功能，请按照 @Hugo 回答前缀 [HttpGet] 属性或使用 getReserve 之类的 get 为方法定义添加前缀（？可能是方法名称应该更改）。

做完之后，

```
myUrl.com/api/flats/?id=1&customerId=2&service=someservice 
```

应该调用 GetReserve 和

```
myUrl.com/api/flats/?budget=1&surface=2 
```

应该调用 GetSearchFlats。

# javascript - Create text outline on canvas in javascript

> ID：14126298
> 
> 赞同：2
> 
> 时间：2013-01-02T17:20:53.217
> 
> 标签：javascript, html, text, canvas, outline

How can I give a text an outline in JavaScript when drawing on the Canvas? See image below of what I try to do.

![enter image description here](../Images/12faf7fba88968891eb23fd171d3d335.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-03T10:15:41.937

Daniel Langh 向我展示了解决方案：

```
var txt = 'Hello World!';
var x = 30,
    y = 50;

context.font = "40px Helvetica";

context.strokeStyle = 'white';

// setup these to match your needs
context.miterLimit = 2;
context.lineJoin = 'circle';

// draw an outline, then filled
context.lineWidth = 7;
context.strokeText(txt, x, y);
context.lineWidth = 1;
context.fillText(txt, x, y); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T18:09:53.470

您可以尝试使用 strokeText 来描边轮廓：

```
var context = document.getElementById("d").getContext("2d");

context.font = "bold 34px sans-serif";
context.fillText('office space', 50, 60);
context.strokeStyle = 'white';
context.lineWidth = 2;
context.strokeText('office space', 50, 60); 
```

# sql - 如何删除无法转换为 INT 的行

> ID：14126302
> 
> 赞同：8
> 
> 时间：2013-01-02T17:20:56.837
> 
> 标签：sql, postgresql, casting

我的 postgresql 9.1 中有这个带有门牌号的示例表：

```
drop table if exists mytable;
create table mytable(road_id int, housenr text);
insert into mytable(road_id, housenr) values

('11', '1' ),
('22', '12' ), 
('33', '99/1' ),
('44', '88' ),
('55', '2' ),
('66', '28' ),
('77', '29')
; 
```

现在我必须将整列“housenr”转换为一个 INT 字段。SQL中有没有办法只从可以转换的列中转换这些行。在 mytable 中，这将是除“housenr”= 99/1 之外的每一行。
类似于： FOR EACH ROW IF ::int IS POSSIBLE 强制转换行 ELSE REMOVE FROM TABLE

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-02T17:28:16.327

您可以使用 REGEX 来评估您的列值以确定它是否为数字：

```
select * FROM MyTable where (housenr !~ '^[0-9]+$') 
```

这是 SQLFiddle：

[http://sqlfiddle.com/#!1/d2ff3/9](http://sqlfiddle.com/#!1/d2ff3/9)

这是关于 ~ 和 ~ 的 Postgresql 文档！

[http://www.postgresql.org/docs/current/static/functions-matching.html#FUNCTIONS-POSIX-TABLE](http://www.postgresql.org/docs/current/static/functions-matching.html#FUNCTIONS-POSIX-TABLE)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T17:26:50.683

你可以做一个`case when`

```
select * from (
    select roadid, case when 
    instr(housenr,"/") > 0 then 0 else cast(housenr as int) end) as housenr_new
    from mytable) t
where t.housenr_new <> 0
    ; 
```

`regex`当字段不是时，使用with case 返回 0`int`

```
SELECT roadid, CASE WHEN housenr ~ E'^\\d+$' 
THEN housenr::integer ELSE 0 END as housenr_new
FROM mytable; 
```

# linux - 为什么kill函数在linux中不起作用

> ID：14126305
> 
> 赞同：-1
> 
> 时间：2013-01-02T17:21:12.167
> 
> 标签：linux, wait, kill

> **可能重复：**
> [子进程收到父进程的 SIGINT](https://stackoverflow.com/questions/6803395/child-process-receives-parents-sigint)

下面是我的代码

作用是在父收到CTRL-C的信号后。父进程向son1和son2发送信号；在son1和son2退出后，父进程退出；

但结果并不像那样；这就是答案

```
son1
son2
^Cheeell
the son1 id 5963
the son2 id 5964
Parent process is killed !! 
```

谁能帮帮我，先谢谢了！！

```
#include <stdio.h>
#include <sys/signal.h>
#include <sys/types.h>
#include <unistd.h>
#include <sys/wait.h>

#define SIGNAL_TO_SON1 10
#define SIGNAL_TO_SON2 12

#define FLAG_MSG_NO 0
#define FLAG_MSG_YES 1

int parent_msg = FLAG_MSG_NO;
void signal_sendToParent( int sig )
{
    printf("heeell\n");
    parent_msg = FLAG_MSG_YES;
}

int son1_flag = FLAG_MSG_NO;
void signal_handle_son1( int sig )
{
    printf("handle_son1\n");
    son1_flag = FLAG_MSG_YES;
}

int son2_flag = FLAG_MSG_NO;
void signal_handle_son2( int sig )
{
    printf("handle_son2\n");
    son2_flag = FLAG_MSG_YES;
}

int main( void )
{
    int pid1, pid2;
    if ( ( pid1 = fork() ) < 0 )
    {
        printf("erro!!!!");
        return -1;
    }

    if ( pid1  > 0 )
    {
        // in the parent
        while( ( pid2 = fork() ) == -1);
        if ( pid2 == 0 )
        {
            signal( SIGNAL_TO_SON2, signal_handle_son2 );
            printf("son2\n");
            // in the son2;
            while ( son2_flag != FLAG_MSG_YES );
            {
                printf("Child process 2 is killed by parent !!\n");
                exit(0);            
            }
        }else{  
            // setup the signal
            signal( SIGINT, signal_sendToParent );
            while ( parent_msg != FLAG_MSG_YES );
            {
                kill( pid1, SIGNAL_TO_SON1 );
                kill( pid2, SIGNAL_TO_SON2 );
                wait(0);
                printf("the son1 id %d\n", pid1 );
                printf("the son2 id %d\n", pid2 );              

                wait(0);
                int status , pid ;
                while( ( pid = waitpid( -1, &status, 0 ) )  > 0 )
                {
                    printf("child %d \n", pid );
                }
                printf("Parent process is killed !!\n");
                exit(0);
            }
        }
    }else{
        // in the son1;
        printf("son1\n");
        signal( SIGNAL_TO_SON1, signal_handle_son1 );
        while ( son1_flag != FLAG_MSG_YES );
        {
            printf("Child process 1 is killed by parent !!\n");
            exit(0);
        }
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T17:48:21.557

要得到你想要的，你必须忽略孩子们的 SIGINT。

看到这个[当发送到包含孩子的 perl 脚本时，SIGINT (^C) 会发生什么？](https://stackoverflow.com/questions/4717118/what-happens-to-a-sigint-c-when-sent-to-a-perl-script-containing-children)

简而言之，Ctrl-C 被发送到前台组中的所有进程。这意味着您的子进程也会获得 SIGINT，它们没有处理程序并被杀死。

```
signal( SIGINT, SIG_IGN ); 
```

添加子代码，靠近设置其他信号处理程序。

# jquery - 重置最近的选择下拉菜单

> ID：14126307
> 
> 赞同：0
> 
> 时间：2013-01-02T17:21:31.140
> 
> 标签：jquery

单击按钮时，我需要重置最近的选择下拉列表。不确定哪个在这里不起作用，错误的选择器或错误的重置方法？

[http://jsfiddle.net/infatti/CeSrE/](http://jsfiddle.net/infatti/CeSrE/)

```
$('.remove').click(function() {
    $(this).closest('select').val('');
}); 
```

```
<div class="controls">
    <button class="btn btn-link remove" type="button">Reset</button>

    <select id="oberservationType" class=" pull-left">
        <option>Choose</option>
        <option>Mauris elementum</option>
        <option>Eros id dapibus</option>
        <option>Vestibulum erat</option>
        <option>Ultricies lacus magna</option>
    </select>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T17:23:09.707

Closest() 用于父母，使用`.next()`或者`.nextAll()`如果不是直接使用下一个目标元素：

[看演示](http://jsfiddle.net/CeSrE/2/)

```
$('.remove').click(function() {
    $(this).next('select').val('');
});​ 
```

# .net - log4net - 堆栈跟踪上的字符串匹配

> ID：14126308
> 
> 赞同：2
> 
> 时间：2013-01-02T17:21:36.283
> 
> 标签：.net, log4net, stack-trace

除了创建自定义过滤器之外，有没有办法在 log4net appender 上添加过滤器，例如 stringToMatch 项，在堆栈跟踪中搜索某个字符串？似乎当前的 stringToMatch 过滤器只匹配记录项目的消息，而不是堆栈跟踪。

我打算在某个库中发生接触项目的异常时向自己发送电子邮件，并将其搭载到我们已经拥有的 log4net 东西上似乎是最好的选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T20:44:24.707

通过创建我自己的自定义过滤器来解决，该过滤器基本上是现有过滤器的副本，它也过滤了堆栈跟踪的文本。

# xml - SAXParseException：“s4s-elt-character：架构元素中不允许使用非空白字符”

> ID：14126311
> 
> 赞同：5
> 
> 时间：2013-01-02T17:21:42.503
> 
> 标签：xml, xsd, sax

我正在开发一个从 xml 文件中读取一些数据的 Java 应用程序。尝试执行时，我收到此错误：

org.xml.sax.SAXParseException；systemId: 文件:/c:/myxmlfile.xml; 行号：7；列号：55；s4s-elt-character：除“xs:appinfo”和“xs:documentation”之外的模式元素中不允许使用非空白字符。看到“我的名字价值”。

我的 xml 文件以：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<gdl_set xmlns="http://www.mywebsite.com"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://www.mywebsite.com/myxsddefinition.xsd"
     shortname="Shortname">
<name>My Name Value</name> 
```

你能帮我理解问题出在哪里吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T18:13:19.410

在我看来，解析器似乎出于某种原因试图将您的实例文档作为模式文件处理。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-12-24T18:13:15.330

是的，我也遇到了同样的问题，然后我发现我将 XSD 文件作为 XML 文件的输入传递。

像那样 -

```
String xsdPath= "122015/1224/sample.xml";
String **xmlPath** = "122015/1224/sample.xsd"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-08T09:58:08.110

我在尝试验证转换文件时遇到了同样的错误。

我收到错误的原因是因为我使用 XML 文件而不是 XSD 来验证它。在我的项目中，它们都具有相同的名称。所以我错误地给出了 XML 文件的名称来代替 XSD。

一旦我改变了它，它就会按预期工作。因此，如果上述解决方案不起作用，请查看您的情况是否存在问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-27T14:23:14.163

我正在使用：

```
<artifactId>jaxb2-maven-plugin</artifactId>
<version>2.2</version> 
```

而不是 1.6 版本，在 2.2 版本中您可以指定：

```
<sources>
     <source>src/main/resources/masteraccount/</source>
</sources> 
```

但我忘了添加

```
<xjcSourceExcludeFilters>
    <filter implementation="org.codehaus.mojo.jaxb2.shared.filters.pattern.PatternFileFilter">
        <patterns>
            <pattern>\.xml</pattern>
        </patterns>
    </filter>
</xjcSourceExcludeFilters> 
```

禁用 .xml 文件的使用。在我的情况下，插件试图使用 .xml 文件，但正确的我的架构在 .xsd 文件中。

# winapi - 如何加载简单的位图文件win32

> ID：14126313
> 
> 赞同：3
> 
> 时间：2013-01-02T17:22:06.457
> 
> 标签：winapi, bitmap

我想测试一些使用位图的简单 Win32。这是我从谷歌搜索得到的代码。

```
#include <windows.h>

/*  Declare Windows procedure  */
LRESULT CALLBACK WindowProcedure (HWND, UINT, WPARAM, LPARAM);
void DisplayError(DWORD, const char*);

/*  Make the class name into a global variable  */
char szClassName[ ] = "WindowsApp";

int WINAPI WinMain (HINSTANCE hThisInstance,
                HINSTANCE hPrevInstance,
                LPSTR lpszArgument,
                int nFunsterStil)

{
    HWND hwnd;               /* This is the handle for our window */
    MSG messages;            /* Here messages to the application are saved */
    WNDCLASSEX wincl;        /* Data structure for the windowclass */

    /* The Window structure */
    wincl.hInstance = hThisInstance;
    wincl.lpszClassName = szClassName;
    wincl.lpfnWndProc = WindowProcedure;      /* This function is called by windows */
    wincl.style = CS_OWNDC | CS_HREDRAW | CS_VREDRAW;
    wincl.cbSize = sizeof (WNDCLASSEX);

    /* Use default icon and mouse-pointer */
    wincl.hIcon = LoadIcon (NULL, IDI_APPLICATION);
    wincl.hIconSm = LoadIcon (NULL, IDI_APPLICATION);
    wincl.hCursor = LoadCursor (NULL, IDC_ARROW);
    wincl.lpszMenuName = NULL;                 /* No menu */
    wincl.cbClsExtra = 0;                      /* No extra bytes after the window class */
    wincl.cbWndExtra = 0;                      /* structure or the window instance */
    /* Use Windows's default color as the background of the window */
    wincl.hbrBackground = (HBRUSH) COLOR_BACKGROUND;

    /* Register the window class, and if it fails quit the program */
    if (!RegisterClassEx (&wincl))
        return 0;

    /* The class is registered, let's create the program*/
    hwnd = CreateWindowEx (
       0,                   /* Extended possibilites for variation */
       szClassName,         /* Classname */
       "Windows App",       /* Title Text */
       WS_OVERLAPPEDWINDOW | SS_BITMAP,
       CW_USEDEFAULT,       /* Windows decides the position */
       CW_USEDEFAULT,       /* where the window ends up on the screen */
       544,                 /* The programs width */
       375,                 /* and height in pixels */
       HWND_DESKTOP,        /* The window is a child-window to desktop */
       NULL,                /* No menu */
       hThisInstance,       /* Program Instance handler */
       NULL                 /* No Window Creation data */
       );

    /* Make the window visible on the screen */
    ShowWindow (hwnd, nFunsterStil);
    UpdateWindow(hwnd);

    /* Run the message loop. It will run until GetMessage() returns 0 */
    while (GetMessage (&messages, NULL, 0, 0))
    {
        /* Translate virtual-key messages into character messages */
        TranslateMessage(&messages);
        /* Send message to WindowProcedure */
        DispatchMessage(&messages);
    }
    /* The program return-value is 0 - The value that PostQuitMessage() gave */
    return messages.wParam;
}

/*  This function is called by the Windows function DispatchMessage()  */
LRESULT CALLBACK WindowProcedure (HWND hwnd, UINT message, WPARAM wParam, LPARAM lParam)
{
    HBITMAP g_hbitmap = NULL;
    switch (message)                  /* handle the messages */
    {
        case WM_CREATE: {
            g_hbitmap = (HBITMAP)LoadImage(GetModuleHandle(NULL),
                                       "D:\\zhbackground.bmp",
                                       IMAGE_BITMAP,
                                       LR_DEFAULTSIZE,
                                       LR_DEFAULTSIZE,
                                       LR_LOADFROMFILE);
            if(!g_hbitmap) {
                DisplayError(GetLastError(), "Error loading bitmap");
            }
            break;
        }
        case WM_PAINT: {
            HDC dc;
            HDC memdc;
            HGDIOBJ old;
            PAINTSTRUCT ps;
            BITMAP bm;
            dc = BeginPaint(hwnd, &ps);
            DisplayError(GetLastError(), "BeginPaint");
            memdc = CreateCompatibleDC(dc);
            DisplayError(GetLastError(), "CreateCompatibleDC");
            old = SelectObject(memdc, g_hbitmap);
            DisplayError(GetLastError(), "SelectObject");
            GetObject(g_hbitmap, sizeof(bm), &bm);
            DisplayError(GetLastError(), "GetObject");
            BitBlt(dc, 0, 0, bm.bmWidth, bm.bmHeight, memdc, 0, 0, SRCCOPY);
            DisplayError(GetLastError(), "BitBlt");
            SelectObject(memdc, old);
            DisplayError(GetLastError(), "SelectObject");
            DeleteDC(memdc);
            DisplayError(GetLastError(), "DeleteDC");
            EndPaint(hwnd, &ps);
            DisplayError(GetLastError(), "EndPaint");
            break;
        }
        case WM_DESTROY:
            DeleteObject(g_hbitmap);
            PostQuitMessage (0);       /* send a WM_QUIT to the message queue */
            break;
        default:                      /* for messages that we don't deal with */
            return DefWindowProc (hwnd, message, wParam, lParam);
    }

    return 0;
}

void DisplayError(DWORD dw, const char* szFuncName)
{
     LPSTR buff;
     FormatMessage(FORMAT_MESSAGE_FROM_SYSTEM | FORMAT_MESSAGE_ALLOCATE_BUFFER,
              NULL,
              dw,
              LANG_NEUTRAL,
              (LPSTR)&buff,
              0,
              NULL);
     MessageBox(NULL, buff, szFuncName, MB_OK);
} 
```

问题是窗口什么也不显示，所以我调用 GetLastError() 并尝试查看发生了什么。从那里，我知道文件已加载（我猜是 g_hbitmap ！= NULL），另一个 DisplayError() 显示操作成功完成。

有任何想法吗？感谢提前！

# javafx-2 - 将值标签添加到 BarChart 的条形图

> ID：14126314
> 
> 赞同：2
> 
> 时间：2013-01-02T17:22:15.493
> 
> 标签：javafx-2, bar-chart

我想在顶部或每个条的主体上添加带有条数值的标签`BarChart`

我在 API 和 CSS 参考指南中都进行了搜索，但找不到任何定义它的选项。

当前版本的 JavaFX 图表是否支持此功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-09-12T14:39:41.283

这个怎么样：

```
import javafx.scene.chart.Axis;
import javafx.scene.chart.CategoryAxis;
import javafx.scene.chart.StackedBarChart;
import javafx.scene.chart.XYChart.Data;
import javafx.scene.chart.XYChart.Series;
import javafx.scene.layout.StackPane;
import javafx.scene.text.Text;

class CustomStackedBarChart extends StackedBarChart<String, Number> {

    public CustomStackedBarChart(CategoryAxis xAxis, Axis<Number> yAxis) {
        super(xAxis, yAxis);
    }

    @Override
    protected void layoutPlotChildren() {
        super.layoutPlotChildren();

        for (Series<String, Number> series : getData()) {
            for (Data<String, Number> data : series.getData()) {
                StackPane bar = (StackPane) data.getNode();

                final Text dataText = new Text(data.getYValue() + "");
                bar.getChildren().add(dataText);

            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T00:36:18.107

我正在尝试做同样的事情。到目前为止，这就是我所拥有的。

```
class CustomStackedBarChart extends StackedBarChart<String, Number> {

    public CustomStackedBarChart( CategoryAxis xAxis, Axis<Number> yAxis ) {
        super( xAxis, yAxis );

        setAnimated( false );
        setLegendVisible( false );
        setTitleSide( Side.TOP );
        setTitle( "SSPP Diurnal Symbol Rate" );
        setMinHeight( 500 );
        setMinWidth( 1000 );
    }

    @Override
    protected void layoutPlotChildren() {
        super.layoutPlotChildren();

        // Each individual Data element has its own bar.
        // TODO add label to each bar.
        for ( Series<String, Number> series : getData() ) {
            for ( Data<String, Number> data : series.getData() ) {
                StackPane bar = (StackPane) data.getNode();

                Label label = null;

                for ( Node node : bar.getChildrenUnmodifiable() ) {
                    LOGGER.debug( "Bar has child {}, {}.", node,
                        node.getClass() );
                    if ( node instanceof Label ) {
                        label = (Label) node;
                        break;
                    }
                }

                if ( label == null ) {
                    label = new Label( series.getName() );
                    label.setRotate( 90.0 );
                    bar.getChildren().add( label );
                }
                else {
                    label.setText( series.getName() );
                }
            }
        }
    }
} 
```

# android - Android 在用户注销时崩溃

> ID：14126318
> 
> 赞同：0
> 
> 时间：2013-01-02T17:22:32.827
> 
> 标签：android, android-intent, android-emulator, android-activity

我有以下代码，一旦用户单击按钮就会执行

```
public void logout(){

        // redirect user back to login screen activity
        Intent i = new Intent(this, LoginActivity.class);
        // Closing all the Activities
        i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);

        // Add new Flag to start new Activity
        i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);

        // start Login Activity
        startActivity(i);
    } 
```

但是，每次单击按钮时，模拟器都会崩溃。有什么想法我可能做错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T17:28:06.800

您可以通过这样做来设置标志

```
i.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_NEW_TASK)); 
```

我怀疑这是您的问题，但请确保您是`startActivity`从 Activity 中调用并且正确`Thread`，并确保`onCreate`您的`LoginActivity`.

这与多个模拟器一致吗？尝试不同的配置，并检查您的`AndroidManifest.xml`文件，是否`Activity`定义了第二个？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T10:43:18.603

问题是在调用此方法之前。我试图在属于另一个布局的 EditText 项目上设置文本

# app-store - 我需要创建新证书来更新/升级 appstore 中的应用程序吗？

> ID：14126319
> 
> 赞同：-1
> 
> 时间：2013-01-02T17:22:35.043
> 
> 标签：app-store, certificate, upgrade, apple-push-notifications

我在 appStore 中有一个使用推送通知的应用程序。

我已经生成了这个应用程序的新版本，并使用我第一次在市场上提交应用程序时使用的相同证书，我已将更新提交到 appStore。

批准应用程序后，我注意到在设备中更新应用程序后推送通知不起作用。

使用与以前相同的证书可能会发生这种错误行为吗？？？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T12:17:40.257

使用与以前相同的证书更新应用程序不会改变推送通知的工作状态。

也许您的问题出在服务器端，并且您的推送通知证书已过期，需要重新生成。推送证书的有效期约为一年。

# objective-c - UISearchBar 在 IOS 6 Popover 中不起作用

> ID：14126321
> 
> 赞同：0
> 
> 时间：2013-01-02T17:22:39.393
> 
> 标签：objective-c, ios

该应用程序有一个带有表格视图的 UIView 和一个 UISearchbar。搜索栏委托方法位于 UIView 的视图控制器中。一切似乎都正确连接。

这个搜索栏在 iOS 5 中可以正常工作，但在 iOS6 中不能。触摸时，搜索栏会调出键盘，但在键盘上打字没有影响；永远不会调用 textDidChange 委托方法。

仅当在 iPad 上运行时才会发生这种情况。iPad 上的视图与 iPhone 上的视图之间的区别在于，带有 UITableView 和 UISearchbar 的 UIView 在 iPad 上的弹出窗口中运行。在 iPhone 上，它作为单独的视图运行。在这两种情况下，一旦打开视图，UINavigationController 就会管理视图。导航控制器的所有上下导航在两种设备中都可以正常工作；唯一的区别是 UISearchBar 不能在弹出窗口中运行。

显然，iOS 5 和 iOS 6 之间发生了一些变化，但我无法弄清楚是什么，或者如何使搜索栏在 iOS 6 弹出窗口中工作。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T15:12:00.867

rokjarc 是对的。我有同样的问题。在我的应用程序“SearchBar 显示控制器”中，SearchBar 不响应 ios6 中的键盘输入。但是在ios5模拟器，ios6模拟器，iPhone 3GS，iPhone 4中就可以了。在MainWindow.xib中，1.点击“对象”框中的“窗口”图标。2\. 显示属性检查器 3\. 扩展窗口属性。4\. 检查“Visible at Launch”和“Full Screen at Launch” 5\. 清理构建并运行。6\. 好。好的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T15:50:37.833

我刚刚得到了我原来问题的答案。我发现在 UITextFields 和 UITextViews 中也发生了同样的事情。我把整个事情都寄给了 Apple 技术支持。

原来你*必须*包含这行代码：

```
[self.window makeKeyAndVisible]; 
```

在应用程序的委托的 didFinishLaunchingWithOptions: 方法中。当我添加这一行时，问题就消失了。

希望这可以帮助。

# java - 浮点返回指数符号

> ID：14126322
> 
> 赞同：4
> 
> 时间：2013-01-02T17:22:40.470
> 
> 标签：java, xpath

我正在编写一些代码用于导致问题的 Xpath 查询。我正在尝试从列表中读取一个随机名称，但是 float (x) 偶尔会返回指数符号。

```
Random r = new Random();
float x = r.nextFloat();

final String expression = "(/list/name[@minLevel<=" + minLevel + "])" +
    "[(" + x + " * count(/list/name[@minLevel<=" + minLevel + "])) +1]"; 
```

每隔一段时间，表达式就等于：

```
(/name/list[@minLevel<=11])[(5.478859E-4 * count(/name/list[@minLevel<=11])) +1] 
```

显然 xpath 不使用指数符号进行数学运算，因为我收到了这个错误：

```
javax.xml.transform.TransformerException: 5.478859E-4 could not be formatted to a number! 
```

任何有关如何防止这种情况的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T17:25:07.103

要转换浮点数，您可以使用[`String.format()`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#format%28java.lang.String,%20java.lang.Object...%29)with[`%f`](http://docs.oracle.com/javase/7/docs/api/java/util/Formatter.html#syntax)作为格式说明符。这永远不会使用科学计数法。

```
String.format("%f", x) 
```

这也使您可以根据需要灵活地调整宽度和精度。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T17:26:08.550

不要`x`直接插入到字符串 ( `... + x + ..`) 中，而是使用这个：

```
... + String.format("%f", x) + ... 
```

您还可以使用转换上的修饰符来控制结果的精度和宽度。请参阅[格式化文档](http://docs.oracle.com/javase/6/docs/api/java/util/Formatter.html#syntax)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T18:17:36.437

通过字符串连接构造 XPath 表达式通常不是最好的方法。除了注入攻击的风险之外，这意味着您无法编译一次表达式并使用不同的参数重复使用它。

相反，编译表达式

```
(/list/name[@minLevel<=$minLevel])[($x * count(/list/name[@minLevel<=$minLevel])) +1] 
```

然后在执行时提供参数 $x 和 $minLevel 的值。

# api - Spotify API 马赛克视图

> ID：14126324
> 
> 赞同：1
> 
> 时间：2013-01-02T17:22:46.620
> 
> 标签：api, views, spotify, mosaic

我正在尝试在马赛克视图中调整专辑封面缩略图的大小。我可以使用下面的代码为马赛克视图设置空间的宽度和高度，但我不知道如何调整显示的实际图像的大小：

```
var mosaic = new views.Image(playlist.image);
    mosaic.node.style.width = '312px';
    mosaic.node.style.height = '162px';
    mosaic.node.style.backgroundSize = 'cover';
    $('#mosaic').append(mosaic.node); 
```

任何人都可以帮忙吗？

在此先感谢，詹姆斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T09:23:05.587

马赛克视图使用从播放列表曲目中获取的 4 个封面生成的背景图像。该图像是一个正方形的精灵，尺寸固定为 300x300 像素，目前无法为生成的背景设置不同的尺寸。

为了防止模糊，您可以将节点的样式设置为 300x150 像素，这将显示来自马赛克图像的 2 个封面。您还可以将区域增加到 300x300，以便显示具有 4 个封面的整个马赛克图像。

# android - 如何在尽可能多的设备上最大限度地提高我的 android 应用程序的可用性？

> ID：14126326
> 
> 赞同：1
> 
> 时间：2013-01-02T17:22:50.497
> 
> 标签：android, android-actionbar, actionbarsherlock

我一直在使用 android 4.1 版为 Galaxy Nexus 设备进行开发。当您的操作栏项目不适合时，我一直依赖默认情况下获得的操作栏和操作栏下拉菜单。

在尝试调查一些 ACRA 崩溃报告时，我正在尝试复制用户设备，并注意到其中一些设备没有软件后退按钮或操作栏下拉菜单，这确实会降低用户体验。

我是否需要检查这些功能，如果没有提供和替代导航方式？

我还注意到我的对话框在某些设备上没有按预期呈现；定位不对。。。。

# crystal-reports - 使用来自 DataSet 的 Crystal Report XI 创建报表

> ID：14126331
> 
> 赞同：0
> 
> 时间：2013-01-02T17:23:01.933
> 
> 标签：crystal-reports, dataset, crystal-reports-xi

* *STEP 1.* *我的程序从管理员那里获得 Crystal Report (XI sp6) 模板。它解析模板以从中获取 SQL，然后填充它以获取每个 SQL 的 DataTables。
* *STEP 2.* *之后，它使用以下代码将 DataTables 推回 ReportDocument 以创建报表：

```
// there no subreport in our template
//mainDS include all populated DataTable having the same name of related CR Command Alias
foreach (Table tab in doc.Database.Tables)
    tab.SetDataSource(mainDS.Tables[tab.Name]); 
```

问题是（我想知道它是否是一个水晶报表错误）：如果模板中有 2 个命令，当`tab.SetDataSource(mainDS.Tables[tab.Name]);`为 doc.Database.Tables[0] 执行代码时，`doc.Database.Tables[1].Fields`就会变得相同`doc.Database.Tables[0].Fields`，因为我得到一个错误.

我没有在所有模板中都收到此错误，只有一些:(。所有模板在 Crystal Report GUI 中运行良好！！！

如果没有错误，请帮助或告诉我如何解决！

我正在使用 Crystal Report XI 开发人员版最新包，VS2005。Oracle 10g，Devar DotConnect for Oracle 免费版。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T04:22:53.303

经过多次挖掘SAP文档和测试，我认为是CR XI R2 sp6的一个bug。所以我在报告中只保留 1 个命令，如果需要其他命令，我将创建子报告并将命令放入其中。

# jquery - 在 yii 控制器中捕获属性 _POST['attribute'] 值

> ID：14126332
> 
> 赞同：0
> 
> 时间：2013-01-02T17:23:06.150
> 
> 标签：jquery, autocomplete, yii

经过长时间的研究，发现这个简单的 CjuiCode 可以完美地在自动完成文本字段中获取名称..但是谁能告诉我如何在控制器的自动完成文本字段中捕获这个名称的 id ？？？

提前致谢..

```
<div class="row">

        <?php echo $form->hiddenField($typeModel,'id'); ?>
        <?php

        $this->widget('zii.widgets.jui.CJuiAutoComplete',
                        array('model' => $typeModel,
                                'attribute' => 'name',
                                'source' => array_keys(CHtml::listData($typeModel->findAll(array('select' => 'name')), 'name', 'id')),
                                'options' => array(
                                'minLength' => '1',
                               )
                            ));

    ?>

    </div> 
```

我正在尝试这样的事情，但控制器中没有出现值

```
var_dump($_POST['TypeModel']['id']);die; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T17:27:32.227

尝试这个

```
var_dump($_REQUEST);die; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T17:19:18.170

要获取隐藏字段值，请在视图中使用后续代码..

```
<?php echo CHtml::hiddenField('fieldName','assignValue'); ?> 
```

您将获得值为... [fieldName] => assignValue 的 post 数组

# r - 与 data.tables 的多个连接/合并

> ID：14126337
> 
> 赞同：7
> 
> 时间：2013-01-02T17:23:16.853
> 
> 标签：r, join, merge, data.table, multiple-tables

我有两个data.tables，DT和L：

```
> DT = data.table(x=rep(c("a","b","c"),each=3), y=c(1,3,6), v=1:9,key="x")
> L=data.table(yv=c(1L:8L,12L),lu=c(letters[8:1],letters[12]),key="yv")

> DT
   x y v
1: a 1 1
2: a 3 2
3: a 6 3
4: b 1 4
5: b 3 5
6: b 6 6
7: c 1 7
8: c 3 8
9: c 6 9

> L
   yv lu
1:  1  h
2:  2  g
3:  3  f
4:  4  e
5:  5  d
6:  6  c
7:  7  b
8:  8  a
9: 12  l 
```

我想从 L 中独立查找 lu 的对应值，用于 DT 中的 y 列和 v 列。以下语法提供了正确的结果，但生成起来很麻烦，稍后一目了然：

```
> L[setkey(L[setkey(DT,y)],v)][,list(x,y=yv.1,v=yv,lu.1=lu.1,lu.2=lu)]
   x y v lu.1 lu.2
1: a 1 1    h    h
2: a 2 3    g    f
3: a 3 6    f    c
4: b 4 1    e    h
5: b 5 3    d    f
6: b 6 6    c    c
7: c 7 1    b    h
8: c 8 3    a    f
9: c 9 6   NA    c 
```

（**编辑**：上面的原始帖子`L[setkey(L[setkey(DT,y)],v)][,list(x,y=yv,v=yv.1,lu.1=lu,lu.2=lu.1)]`错误地混淆了 y 和 v 列并查找了值。）

在 SQL 中，这将是简单/直接的：

```
SELECT DT.*, L1.lu AS lu1, L2.lu AS lu2
FROM DT
LEFT JOIN L AS L1 ON DT.y = L1.yv
LEFT JOIN L AS L2 ON DT.v = L2.yv 
```

有没有更优雅的方式来使用 data.table 来执行多个连接？请注意，在此示例中，我将一个表连接到另一个表两次，但我也有兴趣将一个表连接到多个不同的表。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-02T17:51:08.470

好问题。一个技巧是`i`不必键入。只有`x`必须键入。

可能有更好的方法。这个怎么样：

```
> cbind( L[DT[,list(y)]], L[DT[,list(v)]], DT )
   yv lu yv lu x y v
1:  1  h  1  h a 1 1
2:  3  f  2  g a 3 2
3:  6  c  3  f a 6 3
4:  1  h  4  e b 1 4
5:  3  f  5  d b 3 5
6:  6  c  6  c b 6 6
7:  1  h  7  b c 1 7
8:  3  f  8  a c 3 8
9:  6  c  9 NA c 6 9 
```

或者，为了说明，这是相同的：

```
> cbind( L[J(DT$y)], L[J(DT$v)], DT )
   yv lu yv lu x y v
1:  1  h  1  h a 1 1
2:  3  f  2  g a 3 2
3:  6  c  3  f a 6 3
4:  1  h  4  e b 1 4
5:  3  f  5  d b 3 5
6:  6  c  6  c b 6 6
7:  1  h  7  b c 1 7
8:  3  f  8  a c 3 8
9:  6  c  9 NA c 6 9 
```

`merge`如果实现了以下功能请求，也可以使用：

[FR#2033 将 by.x 和 by.y 添加到 merge.data.table](https://r-forge.r-project.org/tracker/index.php?func=detail&aid=2033&group_id=240&atid=978)

# php - 从主域到子域的图像

> ID：14126340
> 
> 赞同：0
> 
> 时间：2013-01-02T17:23:28.157
> 
> 标签：php, javascript, jquery, .htaccess

> **可能重复：**
> [子域更改图像路径](https://stackoverflow.com/questions/14125464/subdomain-changes-image-path)

我在 ckEditor 输入的数据库中有一些文章，它使用 /userfiles/image1.jpg 之类的路径

当我从子域访问它们时，它使我的 url 像 test.mysite.com/userfiles/image1.jpg 并且找不到错误文件。实际路径是 mysite.com/userfile/image1.com

如何解决这个问题我正在使用php

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T17:29:22.717

您需要在编辑器中使用绝对网址，例如

```
<img src="http://mysite.com/userfiles/image1.jpg"> 
```

或者，如果这些站点托管在同一个物理服务器上，您可以创建一个虚拟目录（例如 Apache `Alias`），以便`/userfiles`在两个站点上都指向服务器上的同一个物理目录。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-02T17:25:18.680

您可以创建一个指向与您的主站点相同的目录的虚拟主机！

# jquery - 根据另一个 div 的高度调整 div 的大小

> ID：14126346
> 
> 赞同：0
> 
> 时间：2013-01-02T17:23:59.863
> 
> 标签：jquery, css, resize

我目前正在处理[此处](https://stackoverflow.com/questions/9131770/jquery-dynamically-resize-div-based-on-height-of-another-div)发布的类似内容。但是由于某种原因，当调整视口/浏览器窗口的大小时，我无法让它工作。不太确定我的 CSS 是否有问题或其他问题。

这是我正在使用的代码：

```
$(document).ready(function() {

$('.more').hide();

$('.link').click(function() {
    $(this).next('.more').slideToggle();
}).toggle(function() {
    $(this).children("span").text("[-]");
}, function() {
    $(this).children("span").text("[+]");
    return false;
});
var maxHeight = 0;
$('div.simultaneously').each(function(index) {
    if ($(this).height() > maxHeight) {
        maxHeight = $(this).height();
    }
});
$('div.simultaneously').height(maxHeight);
});​ 
```

我试图让左列（lft-col）在它向下滑动时匹配隐藏 div 的高度。总的来说，如果调整视口大小，我希望左列 div 具有浏览器的完整高度。并且如果隐藏的div被向下滑动，如果有任何滚动，我希望左列div与右列div的高度匹配显示出来。

这是我的小提琴：http: [//jsfiddle.net/sLVsR/5/](http://jsfiddle.net/sLVsR/5/)

如果有人有不同的方法来解决这个问题，我也完全赞成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T18:12:26.127

重新阅读您的问题后，我对您的代码进行了一些更改

**jQuery**

```
$(document).ready(function() {

    $("div.lft-col").height($(window).height()-20); //I've put in -20 just so you can see the div shadow

    $('.more').hide();

    $('.link')
        .click(function() {
            $more = $(this).next('.more');
            $more.slideToggle('slow', function() {
                if ($more.is(":visible"))
                    $("div.lft-col").height($(document).height()-20);
               else
                    $("div.lft-col").height($(window).height()-20);
            });
        })
        .toggle(function() {
            $(this).children("span").text("[-]");
        }, function() {
            $(this).children("span").text("[+]");
            return false;
        });

    $(window).resize(function(){
       $("div.lft-col").height($(document).height()-20);
    });

});​ 
```

**CSS**

```
#container { 
    /*height: 100%;*/    
} 
```

[***演示***](http://jsfiddle.net/xfFF9/2/)

# jquery - 如果附加的表格行大于前一行，如何更改文本区域高度？

> ID：14126347
> 
> 赞同：0
> 
> 时间：2013-01-02T17:23:59.473
> 
> 标签：jquery, html, css

我在这里有一个 jsfiddle：http: [//jsfiddle.net/XM8hG/33/embedded/result/](http://jsfiddle.net/XM8hG/33/embedded/result/)

要查看小提琴的代码，请单击此处：http: [//jsfiddle.net/XM8hG/33/](http://jsfiddle.net/XM8hG/33/)

要使用小提琴，请按照以下步骤操作：

1.  在顶部单击打开的网格并选择按钮 3，然后单击“添加问题”按钮将行附加到下面的表格中，您可以看到 textarea 填充了表格单元格。

2.  现在回到顶部，再次单击打开的网格，但这次选择按钮 26，然后单击“添加问题”按钮将行附加到下面的表格中，您可以看到 textarea 没有填充表格单元格。这是因为它占用了更多空间并且表格单元格增加了。

现在，如果您刷新小提琴并反转步骤，先执行步骤 2，然后执行步骤 1，您将看到两个表格单元格中的 textarea 填充了行，因为第一个表格行大于第二个表格行。

但是我需要在下面的代码中包含什么才能实现反向解决方案，以便如果最后一个表格行较小，那么如果行较大，textarea 应该能够填充下一行中的表格单元格？

以下是在小提琴中注释的主要代码，以便在选项更改时将文本区域填充到表格单元格：

```
//CHANGE TEXTAREA HEIGHT
    var _x = $(e.currentTarget);
    var _y = _x.closest('td.extratd');
    var _z = _y.prev();

    $('textarea', _z).css('height', '').height(_z.innerHeight()) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T19:34:22.273

将您的 setWidth() 函数更新为

```
function setWidth() {
    $(".textAreaQuestion").each(function(){
     var questionCellWidth = $(this).closest(".question").width();
    var questionCellHeight = $(this).closest(".question").height();
    $(this).css({
        "width": (questionCellWidth - 6) + "px",
        "height": (questionCellHeight) + "px"
    });

    });
  } 
```

见[http://jsfiddle.net/XM8hG/34/](http://jsfiddle.net/XM8hG/34/)

# objective-c - NSOperationQueue - 过早获得完成调用

> ID：14126350
> 
> 赞同：0
> 
> 时间：2013-01-02T17:24:07.023
> 
> 标签：objective-c, ios, objective-c-blocks, nsoperationqueue

我正在使用 NSOperationQueue 来排队和调用一些地理编码位置查找。我想在所有异步运行的查找完成后调用完成方法。

```
-(void)geocodeAllItems {

    NSOperationQueue *geoCodeQueue = [[NSOperationQueue alloc]init];
    [geoCodeQueue setName:@"Geocode Queue"];

    for (EventItem *item in [[EventItemStore sharedStore] allItems]) {
        if (item.eventLocationCLLocation){
            NSLog(@"-Location Saved already. Skipping-");
            continue;
        }

        [geoCodeQueue addOperationWithBlock:^{

            NSLog(@"-Geocode Item-");
            CLGeocoder* geocoder = [[CLGeocoder alloc] init];
            [self geocodeItem:item withGeocoder:geocoder];

        }];
    }

    [geoCodeQueue addOperationWithBlock:^{
        [[NSOperationQueue mainQueue]addOperationWithBlock:^{
            NSLog(@"-End Of Queue Reached!-");
        }];
    }];

}

- (void)geocodeItem:(EventItem *)item withGeocoder:(CLGeocoder *)thisGeocoder{

    NSLog(@"-Called Geocode Item-");
    [thisGeocoder geocodeAddressString:item.eventLocationGeoQuery completionHandler:^(NSArray *placemarks, NSError *error) {
        if (error) {
            NSLog(@"Error: geocoding failed for item %@: %@", item, error);
        } else {

            if (placemarks.count == 0) {
                NSLog(@"Error: geocoding found no placemarks for item %@", item);
            } else {
                if (placemarks.count > 1) {
                    NSLog(@"warning: geocoding found %u placemarks for item %@: using the first",placemarks.count,item);
                }
                NSLog(@"-Found Location. Save it-");
                CLPlacemark* placemark = placemarks[0];
                item.eventLocationCLLocation = placemark.location;
                [[EventItemStore sharedStore] saveItems];
            }
        }
    }];
} 
```

输出

```
[6880:540b] -Geocode Item-
[6880:110b] -Geocode Item-
[6880:540b] -Called Geocode Item-
[6880:110b] -Called Geocode Item-
[6880:110b] -Geocode Item-
[6880:540b] -Geocode Item-
[6880:110b] -Called Geocode Item-
[6880:540b] -Called Geocode Item-
[6880:110b] -Geocode Item-
[6880:580b] -Geocode Item-
[6880:1603] -Geocode Item-
[6880:110b] -Called Geocode Item-
[6880:1603] -Called Geocode Item-
[6880:580b] -Called Geocode Item-
[6880:907] -End Of Queue Reached!-
[6880:907] -Found Location. Save it-
[6880:907] -Found Location. Save it-
[6880:907] -Found Location. Save it-
[6880:907] -Found Location. Save it-
[6880:907] -Found Location. Save it-
[6880:907] -Found Location. Save it-
[6880:907] -Found Location. Save it- 
```

如您所见，End of Queue 函数在所有地理编码过程 + 保存事件的实际结束之前被调用。只有在处理完所有排队查找时，才应在最后显示“已到达队列结束”。我怎样才能把它变成正确的顺序？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-02T20:06:14.103

这里出现了几个问题。一方面，`geocodeAddressString:`它是异步的，所以它立即返回并且块操作正在结束，允许下一个立即开始。其次，您不应该`geocodeAddressString:`一个接一个地拨打多个电话。来自 Apple 的这种方法的文档：

```
After initiating a forward-geocoding request, do not attempt to 
initiate another forward-or reverse-geocoding request. 
```

第三，您没有在 NSOperationQueue 上设置最大并发操作数，因此多个块可能会同时执行。

由于所有这些原因，您可能希望使用一些 GCD 工具来跟踪您对`geocodeAddressString:`. 您可以使用 dispatch_semaphore （以确保一个在另一个开始之前完成）和一个 dispatch_group （以确保您知道它们何时都完成）来做到这一点 - 类似于以下内容。假设您已经声明了这些属性：

```
@property (nonatomic, strong) NSOperationQueue * geocodeQueue;
@property (nonatomic, strong) dispatch_group_t geocodeDispatchGroup;
@property (nonatomic, strong) dispatch_semaphore_t geocodingLock; 
```

并像这样初始化它们：

```
self.geocodeQueue = [[NSOperationQueue alloc] init];
[self.geocodeQueue setMaxConcurrentOperationCount: 1];
self.geocodeDispatchGroup = dispatch_group_create();
self.geocodingLock = dispatch_semaphore_create(1); 
```

您可以像这样进行地理编码循环（我对代码进行了一些更改以使关键部分更加明显）：

```
-(void) geocodeAllItems: (id) sender
{
    for (NSString * addr in @[ @"XXX Address 1 XXX", @"XXX Address 2 XXX", @"XXX Address 3 XXXX"]) {
        dispatch_group_enter(self.geocodeDispatchGroup);
        [self.geocodeQueue addOperationWithBlock:^{
            NSLog(@"-Geocode Item-");
            dispatch_semaphore_wait(self.geocodingLock, DISPATCH_TIME_FOREVER);
            [self geocodeItem: addr withGeocoder: self.geocoder];
        }];
    }
    dispatch_group_notify(self.geocodeDispatchGroup, dispatch_get_main_queue(), ^{
        NSLog(@"- Geocoding done --");
    });
}

- (void)geocodeItem:(NSString *) address withGeocoder:(CLGeocoder *)thisGeocoder{

    NSLog(@"-Called Geocode Item-");
    [thisGeocoder geocodeAddressString: address completionHandler:^(NSArray *placemarks, NSError *error) {
        if (error) {
            NSLog(@"Error: geocoding failed for item %@: %@", address, error);
        } else {
            if (placemarks.count == 0) {
                NSLog(@"Error: geocoding found no placemarks for item %@", address);
            } else {
                if (placemarks.count > 1) {
                    NSLog(@"warning: geocoding found %u placemarks for item %@: using the first",placemarks.count, address);
                }
                NSLog(@"-Found Location. Save it:");
            }
        }
        dispatch_group_leave(self.geocodeDispatchGroup);
        dispatch_semaphore_signal(self.geocodingLock);
    }];
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-02T17:40:37.030

一个好的解决方案是将所有地理编码操作添加为最终清理操作的依赖项：

```
- (void)geocodeAllItems {
    NSOperationQueue *geoCodeQueue = [[NSOperationQueue alloc] init];

    NSOperation *finishOperation = [NSBlockOperation blockOperationWithBlock:^{
        // ...
    }];

    for (EventItem *item in [[EventItemStore sharedStore] allItems]) {
        // ...
        NSOperation *operation = [NSBlockOperation blockOperationWithBlock:^{
            // ...
        }];
        [finishOperation addDependency:operation]
        [geoCodeQueue addOperation:operation];
    }

    [geoCodeQueue addOperation:finishOperation];
} 
```

另一种解决方案是使操作队列串行。这些操作仍然在后台线程上执行，但一次只执行一个，并且按照它们添加到队列中的顺序：

```
NSOperationQueue *geoCodeQueue = [[NSOperationQueue alloc] init];
[geoCodeQueue setMaxConcurrentOperationCount:1]; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-02T18:49:26.283

CompletionBlocks 内置在 NSOperation 中，并且 NSBlockOperation 可以处理多个块，因此只需添加运行异步所需的所有工作并设置完成块以在全部完成时调用，这真的很容易。

```
- (void)geocodeAllItems {
    NSOperationQueue *geoCodeQueue = [[NSOperationQueue alloc] init];

    NSBlockOperation *operation = [[[NSBlockOperation alloc] init] autorelease]

    for (EventItem *item in [[EventItemStore sharedStore] allItems]) {
        // ...
        // NSBlockOperation can handle multiple execution blocks
        operation addExecutionBlock:^{
            // ... item ...
        }];
    }

    operation addCompletionBlock:^{
         // completion code goes here
         // make sure it notifies the main thread if need be.
    }];

    // drop the whole NSBlockOperation you just created onto your queue
    [geoCodeQueue addOperation:operation];
} 
```

注意：您不能假设这些操作将在您的 geoCodeQueue 中执行。它们将同时运行。NSBlockOperation 管理这个并发。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-02T17:37:14.973

NSOperationQueue 并不像你想象的那样工作，执行顺序和添加顺序之间没有直接的依赖关系。你可以调用你减去的函数，直到数字等于零，你可以调用“回调”函数。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-02T17:42:19.217

NSOperationQueues 默认同时运行多个操作。当然，在实践中，这意味着添加到队列中的操作不一定会按照您添加它们的顺序开始或完成。

您可以通过在创建队列后将队列的 maxConcurrentOperationCount 值设置为 1 来使队列连续运行所有操作：

```
NSOperationQueue *geoCodeQueue = [[NSOperationQueue alloc]init];
[geoCodeQueue setName:@"Geocode Queue"];
[geoCodeQueue setMaxConcurrentOperationCount:1]; 
```

如果您确实希望操作同时运行，但仍希望在它们全部完成时收到通知，请观察队列的`operations`属性并等到它达到零，正如 Srikanth 在他的评论中链接的答案中所解释的那样。

编辑：Nikolai Ruhe 的回答也很棒。

# vb.net - 可以设置 MDI 子透明度吗？VB.net

> ID：14126356
> 
> 赞同：2
> 
> 时间：2013-01-02T17:24:26.833
> 
> 标签：vb.net, mdi

表格 1 有一个用于自定义标题栏的透明度键，带有背景图像。

我将子表单（在 MDIclient 内部）的背景颜色设置为与我为父表单设置的透明度键相同。现在就像在那个区域打个洞一样。

是否可以将子窗体的背景颜色设置为透明？以便在该表单中可见父表单背景图像...感谢您的回答...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T19:10:33.803

[**解决**]我自己的问题。

只为分享..

把这个放在子窗体的构造函数中

```
Me.SetStyle(ControlStyles.SupportsTransparentBackColor, True)
Me.BackColor = Color.Transparent 
```

# django - 在 Django 中，如何覆盖“保存并继续”功能？

> ID：14126371
> 
> 赞同：4
> 
> 时间：2013-01-02T17:25:19.710
> 
> 标签：django, django-admin

我需要向我的 ModelAdmin 添加一些保存前和保存后的逻辑，但前提是用户通过“保存并继续编辑”按钮而不是“保存”按钮提交表单。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-02T17:25:19.710

就像覆盖普通的保存方法一样，您需要覆盖`save_model()`ModelAdmin 中的函数，其中包括 request `object`。`request`您可以从对象中获取对象，**如果用户单击“保存并继续按钮”**`POST` ，该对象将包含一个`'_continue'`键。例子：

 **```
class MyAdmin(admin.ModelAdmin):
    def save_model(self, request, obj, form, changed):
        if '_continue' in request.POST:
            # add your code here
        return super(ServerAdmin, self).change_view(request, obj, form, changed) 
```**

# objective-c - 如何将委托和源数据链接到主故事板中创建的一组表视图中的一个表视图

> ID：14126382
> 
> 赞同：1
> 
> 时间：2013-01-02T17:25:45.757
> 
> 标签：objective-c, delegates, datasource

请多多包涵，因为我是 Objective-c 的新手。提前感谢您提供的任何帮助！

所以这基本上是我想要完成的：我有 3 个主表，它们的内容永远不会改变，因此我选择在 mainstoryboard 中构建它们。想想这些是不同的分组，逐步深入到越来越多的细节中。所以你有了：

表 1（表 2 的上级）> 表 2（表 3 的上级）> 表 3

现在我需要添加第 4 个表，但其内容将根据 CSV 文件进行更改。现在我忽略了如何使用 CSV 文件，而且似乎已经有相当多的信息了。所以我选择使用 Arrays using (NSArray) 来存储和检索信息。

我首先在 mainstoryboard 中构建了这张表的原型，以便我了解它的外观。然后我编写了下面的代码，理想情况下它将更新表 4 中的信息：

```
VIEWCONTROLLER.H file
#import <UIKit/UIKit.h>

@interface ViewController : UITableViewController
<UITableViewDataSource, UITableViewDelegate>

@end

VIEWCONTROLLER.M file

#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

NSArray *nominalManagers;
NSArray *tipsManagers;
NSArray *tipsAmt;
NSArray *nominalAmt;

- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    // Uncomment the following line to preserve selection between presentations.
    // self.clearsSelectionOnViewWillAppear = NO;

    // Uncomment the following line to display an Edit button in the navigation bar for this view controller.
    // self.navigationItem.rightBarButtonItem = self.editButtonItem;

    tipsManagers = [[NSArray alloc]
                    initWithObjects:
                    @"SSG",
                    nil];

    tipsAmt = [[NSArray alloc]
                    initWithObjects:
                    @"$tip",
                    nil];

    nominalManagers = [[NSArray alloc]
                    initWithObjects:
                    @"Wel",
                    @"Gold",
                    @"Colch",
                    @"Stand",
                    nil];

    nominalAmt = [[NSArray alloc]
                    initWithObjects:
                    @"$Wel",
                    @"$Gold",
                    @"$Colch",
                    @"$Stand",
                    nil];

}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
#warning Potentially incomplete method implementation.
    // Return the number of sections.
    return 2;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
#warning Incomplete method implementation.
    // Return the number of rows in the section.
    NSUInteger rowNum;
    if (section == 0) {
    rowNum = 1;
    }
    else if (section == 1) {
    rowNum = 4;
    }
    else {
    rowNum = 0;
    }

    return rowNum;

}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:CellIdentifier];
    }

    // Configure the cell...
    NSUInteger row = [indexPath row];
    NSInteger section = [indexPath section];

    switch (section) {
        case 0: // First cell in section 1
            cell.textLabel.text = [tipsManagers objectAtIndex:[indexPath row]];
            cell.detailTextLabel.text = [tipsAmt objectAtIndex:[indexPath row]];
            break;
        case 1: // Second cell in section 1
            cell.textLabel.text = [nominalManagers objectAtIndex:[indexPath row]];
            cell.detailTextLabel.text = [nominalAmt objectAtIndex:[indexPath row]];
            break;
        default:
            cell.textLabel.text = @"WRONG SECTION";
            break;
    }

    return cell;
}

/*
// Override to support conditional editing of the table view.
- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Return NO if you do not want the specified item to be editable.
    return YES;
}
*/

/*
// Override to support editing the table view.
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (editingStyle == UITableViewCellEditingStyleDelete) {
        // Delete the row from the data source
        [tableView deleteRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationFade];
    }   
    else if (editingStyle == UITableViewCellEditingStyleInsert) {
        // Create a new instance of the appropriate class, insert it into the array, and add a new row to the table view
    }   
}
*/

/*
// Override to support rearranging the table view.
- (void)tableView:(UITableView *)tableView moveRowAtIndexPath:(NSIndexPath *)fromIndexPath toIndexPath:(NSIndexPath *)toIndexPath
{
}
*/

/*
// Override to support conditional rearranging of the table view.
- (BOOL)tableView:(UITableView *)tableView canMoveRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Return NO if you do not want the item to be re-orderable.
    return YES;
}
*/

#pragma mark - Table view delegate

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Navigation logic may go here. Create and push another view controller.
    /*
     <#DetailViewController#> *detailViewController = [[<#DetailViewController#> alloc] initWithNibName:@"<#Nib name#>" bundle:nil];
     // ...
     // Pass the selected object to the new view controller.
     [self.navigationController pushViewController:detailViewController animated:YES];
     */
}

@end 
```

我的主要问题是我无法将此类的委托和源数据连接到表 4（其信息将更改的表）。你能帮我吗？你有什么建议可以更好地实现我的目标吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T17:55:25.123

我从您的问题中了解到的是您没有 uitableview 来连接您的数据源和委托！？

我不确定您是否已将第 4 个视图控制器添加到情节提要中，如果不只是将 UItableviewcontroller 添加到情节提要中，请创建一个推送序列，然后在身份检查器中选择您的 VIEWCONTROLLER 作为类名。

添加 `IBOutlet UITableView`到您的 .h 文件中，如下所示，并在您的界面构建器中连接您的数据源和委托。当你需要刷新你的 tableview 调用 [self.tableviewname reloadData];

您可以使用 NSMutableArray 编辑数组中的项目，如果使用 NSArray 数组项目将是静态的。

VIEWCONTROLLER.H 文件

```
#import <UIKit/UIKit.h>

@interface ViewController : UITableViewController
<UITableViewDataSource, UITableViewDelegate>

@property (nonatomic, weak) IBOutlet UITableView *fourthTable;

@end 
```

VIEWCONTROLLER.M 文件

```
 @implementation ViewController
    @synthesize fourthTable;
- (void)viewDidLoad
{
    [super viewDidLoad];

    // Uncomment the following line to preserve selection between presentations.
    // self.clearsSelectionOnViewWillAppear = NO;

    // Uncomment the following line to display an Edit button in the navigation bar for this view controller.
    // self.navigationItem.rightBarButtonItem = self.editButtonItem;

    tipsManagers = [[NSArray alloc]
                    initWithObjects:
                    @"SSG",
                    nil];

    tipsAmt = [[NSArray alloc]
                    initWithObjects:
                    @"$tip",
                    nil];

    nominalManagers = [[NSArray alloc]
                    initWithObjects:
                    @"Wel",
                    @"Gold",
                    @"Colch",
                    @"Stand",
                    nil];

    nominalAmt = [[NSArray alloc]
                    initWithObjects:
                    @"$Wel",
                    @"$Gold",
                    @"$Colch",
                    @"$Stand",
                    nil];

 [self.fourthTable reloadData];

} 
```

# c# - 解析 XML 以将时间文本标记转换为 WebVTT

> ID：14126384
> 
> 赞同：1
> 
> 时间：2013-01-02T17:25:52.283
> 
> 标签：c#, asp.net, porting, ttml, webvtt

我正在开发一个 Web 应用程序，它可以接收时间文本标记（TTML）或[WebVTT](http://html5doctor.com/video-subtitling-and-webvtt/)格式的字幕文件。如果文件是定时文本，我想把它翻译成 WebVTT。这基本上不是问题，我遇到的一个问题是，如果 TTML 将 HTML 作为文本内容的一部分，那么 HTML 标记就会被删除。

例如：

```
<p begin="00:00:08.18" dur="00:00:03.86">(Music<br />playing)</p> 
```

结果是：

```
(Musicplaying) 
```

我使用的代码是：

```
private const string TIME_FORMAT = "hh\\:mm\\:ss\\.fff";
XmlDocument xmldoc = new XmlDocument();
xmldoc.Load(fileLocation);
XDocument xdoc = xmldoc.ToXDocument();
var ns = (from x in xdoc.Root.DescendantsAndSelf()
          select x.Name.Namespace).First();

List<TTMLElement> elements =
(
     from item in xdoc.Descendants(ns + "body").Descendants(ns + "div").Descendants(ns + "p")
     select new TTMLElement
     {
          text = item.Value,
          startTime = TimeSpan.Parse(item.Attribute("begin").Value),
          duration = TimeSpan.Parse(item.Attribute("dur").Value),
     }
).ToList<TTMLElement>();

StringBuilder sb = new StringBuilder();
sb.AppendLine("WEBVTT");
sb.AppendLine();

for (int i = 0; i < elements.Count; i++)
{
     sb.AppendLine(i.ToString());
     sb.AppendLine(elements[i].startTime.ToString(TIME_FORMAT) + " --> " + elements[i].startTime.Add(elements[i].duration).ToString(TIME_FORMAT));
     sb.AppendLine(elements[i].text);
     sb.AppendLine();
} 
```

任何关于我遗漏的想法，或者是否有更好的方法，或者即使已经有将时间文本转换为 WebVTT 的解决方案，我们都将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-08T15:05:07.290

我终于回到了这个项目，我也找到了解决我的问题的方法。

本节首先介绍：

```
from item in xdoc.Descendants(ns + "body").Descendants(ns + "div").Descendants(ns + "p")
    select new TTMLElement
    {
        text = item,
        startTime = TimeSpan.Parse(item.Attribute("begin").Value),
        endTime = item.Attribute("dur") != null ?
          TimeSpan.Parse(item.Attribute("begin").Value).Add(TimeSpan.Parse(item.Attribute("dur").Value)) :
          TimeSpan.Parse(item.Attribute("end").Value)
   } 
```

item 是 XElement 类型，因此可以从中创建 XmlReader 对象，从而产生以下函数：

```
private static string ReadInnerXML(XElement parent)
{
    var reader = parent.CreateReader();
    reader.MoveToContent();
    var innerText = reader.ReadInnerXml();
    return innerText;
} 
```

为了删除节点内的 html，我将函数修改为如下所示：

```
private static string ReadInnerXML(XElement parent)
{
    var reader = parent.CreateReader();
    reader.MoveToContent();
    var innerText = reader.ReadInnerXml();
    innerText = Regex.Replace(innerText, "<.+?>", " ");
    return innerText;
} 
```

最后导致上面的 lambda 看起来像这样：

```
from item in xdoc.Descendants(ns + "body").Descendants(ns + "div").Descendants(ns + "p")
    select new TTMLElement
    {
        text = ReadInnerXML(item),
        startTime = TimeSpan.Parse(item.Attribute("begin").Value),
        endTime = item.Attribute("dur") != null ?
          TimeSpan.Parse(item.Attribute("begin").Value).Add(TimeSpan.Parse(item.Attribute("dur").Value)) :
          TimeSpan.Parse(item.Attribute("end").Value)
   } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-14T02:33:06.977

Microsoft 有一个工具可以生成两种格式：

*   [HTML5 视频字幕制作器](https://testdrive-archive.azurewebsites.net/Graphics/CaptionMaker/Default.html)

> 此演示允许您创建简单的视频字幕文件。首先以浏览器可以播放的格式加载视频。然后交替播放和暂停视频，为每个片段输入标题。
> 
> 如果您为视频保存了 WebVTT 或 TTML 字幕文件，您可以加载它、编辑现有片段的文本或附加新片段。

如果您想以编程方式执行此操作，[其他](https://stackoverflow.com/questions/11157136/removing-div-from-a-text-file-if-it-contains-a-certain-classname) [问题](https://stackoverflow.com/questions/10931513/xml-with-html-table-to-parse-with-c-sharp)的答案可能会有所帮助。

# visual-studio-2012 - 在文件名旁边显示变更集#

> ID：14126389
> 
> 赞同：0
> 
> 时间：2013-01-02T17:26:38.107
> 
> 标签：visual-studio-2012, kdiff3

比较两个变更集时，如何配置 VS 2012 以显示变更集编号？

我已经为 Visual Studio 2012 配置了以下参数进行比较。

![在此处输入图像描述](../Images/dcc1f53c20e6c4bb1c7dba4a0073e19f.png)

但是，我使用此配置得到以下输出。我想查看映射到文件每个版本的变更集编号。

![KDiff3 截图示例](../Images/a25e464b11a0e723f3e24ce55d80aec0.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T19:33:52.427

将参数更改为以下将显示变更集编号。

```
 %1 --fname %6 %2 --fname %7 
```

我从[一个很棒的 msdn 存档](http://blogs.msdn.com/b/jmanning/archive/2006/02/20/diff-merge-configuration-in-team-foundation-common-command-and-argument-values.aspx)中找到了这个，该存档更详细并涵盖了其他 diff/merge 工具。

# ruby - 在 Ruby 中读取带有转义字符的 .txt 文件

> ID：14126392
> 
> 赞同：1
> 
> 时间：2013-01-02T17:26:59.997
> 
> 标签：ruby, parsing, special-characters

我很难在 Ruby 中读取带有转义字符的文件...

我的文本文件有字符串“First Line\r\nSecond Line”，当我使用 File.read 时，我得到一个字符串，它转义了我的转义字符：“First Line\r\nSecond Line”

这两个字符串不是一回事...

```
1.9.2-p318 :006 > f = File.read("file.txt")
 => "First Line\\r\\nSecond Line" 
1.9.2-p318 :007 > f.count('\\')
 => 2

1.9.2-p318 :008 > f = "First Line\r\nSecond Line"
 => "First Line\r\nSecond Line" 
1.9.2-p318 :009 > f.count('\\')
 => 0 
```

如何让 File.read 不转义我的转义字符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-03T11:15:33.117

创建一个方法来删除 File.Read 方法添加的所有其他转义字符，如下所示：

```
 # Define a method to handle unescaping the escape characters
    def unescape_escapes(s)
      s = s.gsub("\\\\", "\\") #Backslash
      s = s.gsub('\\"', '"')  #Double quotes
      s = s.gsub("\\'", "\'")  #Single quotes
      s = s.gsub("\\a", "\a")  #Bell/alert
      s = s.gsub("\\b", "\b")  #Backspace
      s = s.gsub("\\r", "\r")  #Carriage Return
      s = s.gsub("\\n", "\n")  #New Line
      s = s.gsub("\\s", "\s")  #Space
      s = s.gsub("\\t", "\t")  #Tab
      s
    end 
```

然后看看它的实际效果：

```
 # Create your sample file
    f = File.new("file.txt", "w")
    f.write("First Line\\r\\nSecond Line")
    f.close

    # Use the method to solve your problem
    f = File.read("file.txt")
    puts "BEFORE:", f
    puts f.count('\\')
    f = unescape_escapes(f)
    puts "AFTER:", f
    puts f.count('\\')

    # Here's a more elaborate use of it
    f = File.new("file2.txt", "w")
    f.write("He used \\\"Double Quotes\\\".")
    f.write("\\nThen a Backslash: \\\\")
    f.write('\\nFollowed by \\\'Single Quotes\\\'.')
    f.write("\\nHere's a bell/alert: \\a")
    f.write("\\nThis is a backspaces\\b.")
    f.write("\\nNow we see a\\rcarriage return.")
    f.write("\\nWe've seen many\\nnew lines already.")
    f.write("\\nHow\\sabout\\ssome\\sspaces?")
    f.write("\\nWe'll also see some more:\\n\\ttab\\n\\tcharacters")
    f.close

    # Read the file without the method
    puts "", "BEFORE:"
    puts File.read("file2.txt")

    # Read the file with the method
    puts "", "AFTER:"
    puts unescape_escapes(File.read("file2.txt")) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T17:59:07.080

你可以把它们黑回去。

```
foo = f.gsub("\r\n", "\\r\\n")
#=> "First Line\\r\\nSecond Line"

foo.count("\\")
#=> 2 
```

# c++ - c++程序使用GMP库

> ID：14126393
> 
> 赞同：18
> 
> 时间：2013-01-02T17:27:04.310
> 
> 标签：c++, gmp

我已经使用该网站上的说明安装了 GMP：[http](http://www.cs.nyu.edu/exact/core/gmp/) ://www.cs.nyu.edu/exact/core/gmp/ 然后我使用该库查找了一个示例程序：

```
 #include <iostream>
#include <gmpxx.h>
using namespace std;
int main (void) {
mpz_class a, b, c;
a = 1234;
b = "-5678";
c = a+b;
cout << "sum is " << c << "\n";
cout << "absolute value is " << abs(c) << "\n";
cin >> a;
return 0;
} 
```

但是如果我使用以下命令编译它：g++ test.cpp -o test.exe，它会显示 gmpxx.h: no such file or directory。我怎样才能解决这个问题？我对此有点陌生。我正在使用 MinGW。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-02T18:10:44.633

在此处获取实际版本[GNU GMP Library](http://gmplib.org)。确保将其配置为安装在 /usr/lib 中（通过 --prefix=/usr 进行配置）。

这里有文档：[GNU GMP 手册](http://gmplib.org/manual/index.html#Top)。

您没有正确使用该库。我不知道您是否可以使用 C++ 函数直接访问 mpx 值，但是，这里有一个您想要实现的工作示例：

```
#include<iostream>
#include<gmp.h>

using namespace std;

int main (int argc, char **argv) {

    mpz_t a,b,c;
    mpz_inits(a,b,c,NULL);

    mpz_set_str(a, "1234", 10);
    mpz_set_str(b,"-5678", 10); //Decimal base

    mpz_add(c,a,b);

    cout<<"\nThe exact result is:";
    mpz_out_str(stdout, 10, c); //Stream, numerical base, var
    cout<<endl;

    mpz_abs(c, c);
    cout<<"The absolute value result is:";
    mpz_out_str(stdout, 10, c);
    cout<<endl;

    cin.get();

    return 0;
} 
```

编译：

```
g++ -lgmp file.cpp -o file 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-07-03T03:11:16.473

这是使用 Eclipse CDT、MinGW 和 msys for C++ 设置当前（截至 2013 年 7 月 2 日）GNU bignum 库的正确过程。要搞定这个，你应该以前用过Unix或Linux，还有Windows，你应该对编程和编译程序有一个模糊的回忆。这是一个多星期的研究和顽固挫折的高潮，所以如果我把事情搞砸了，请礼貌地记下，否则我会用我的思想把你炸死！

1.  我假设您已经下载并安装了 Eclipse 和 MinGW，并将 msys 安装到 MinGW 中。你必须在 msys 之前安装 MinGW！

2.  将 GMP 库的压缩包从 gmplib.org 下载到 ${gmp_download}。我下载了 gmp-5.1.2.tar.xz，因为我从来没有使用过 lzip，也不知道它是否在 msys 中可用。

3.  打开一个 msys 窗口（本质上是一个 bash shell）。cd ${gmp_buid} 和 tar -Jxvf ${gmp_download}/gmp-xxxtar.xz

    这些 tar 选项与您在网络上其他地方可能找到的不同！-Jxvf 适用于 xz（我认为是 lzip），但对于 gzip，您使用 -xzvf。

4.  cd gmp-xxx 并运行 ./config.guess。写下输出。接下来你将需要它。

5.  运行 ./configure --prefix=${gmp_build} --build= --enable-cxx --with-gnu-ld

    显然，如果您没有明确告诉 GMP 为您的平台构建，它会构建所有内容，这很糟糕。cxx 选项构建 C++ 库，并且 --with-gnu-ld 允许它与 ld 一起使用。很简单。

6.  制作

7.  进行安装

    例如：假设您安装到 C:/gmp。你应该有 gmp/include/gmp.h 和 gmpxx.h。您还应该有 gmp/lib/libgmp.a、libgmp.la、libgmpxx.a、libgmpxx.la。您还应该有一个包含内容的共享目录。

8.  设置日食：

    *   转到项目-> 属性
    *   在 C/C++ build --> Environment 下编辑 PATH 变量并添加 ${gmp_build}/include;${gmp_build}/lib
    *   在 C/C++ build --> settings --> tool settings --> GCC Assembler --> general 添加 ${gmp_build}/include 作为包含路径。
    *   相同的地方但 --> GCC C++ 编译器 --> 包含添加 ${gmp_build}/include 作为包含路径。
    *   相同的地方 --> GCC C++ 编译器 --> Miscellaneous 添加 -lgmp -lgmpxx 到该行的 END。线的尽头！
    *   相同的地方 --> GCC C 编译器添加与以前相同的包含路径和其他选项。
    *   相同的地方 --> MinGW C++ 链接器 --> 库 按该顺序将 gmp 和 gmpxx 添加到“库 (-l)”！现在将 ${gmp_build}/lib 添加到“库搜索路径 (-L)”
    *   在 C/C++ General --> Paths & Symbols --> Incudes 选项卡下，检查您的包含目录中是否有 ${gmp_build}/include 用于 Assembly、C 和 C++。如果他们不在那里，您可能已经搞砸了之前的步骤。它们应该由 Eclipse 自动填充。
    *   相同的地方 --> 库选项卡检查你是否有 gmp 和 gmpxx 在那个顺序。它应该已经被填充。
    *   相同的地方 --> 库路径选项卡检查应该已经存在的 ${gmp_build}/lib。点击“应用”并确保重建索引，否则更改将不会进行。点击确定关闭。
9.  运行这个简短的程序来验证您的设置：

    ```
    #include <math.h>
    #include <stdio.h>
    #include <stdlib.h>
    #include <iostream>
    #include <gmp.h>
    #include <gmpxx.h>

    using namespace std;

    int main ()
    {
        mpz_t p;
        mpz_init_set_ui (p,3);

        return 0;
    } 
    ```

    您的编译命令应类似于以下内容：

    ```
     g++ "-IC:\gmp\include" -O0 -g3 -Wall -c -fmessage-length=0 -lgmp -lgmpxx -o main.o "..\main.cpp" g++ "-LC:\gmp\lib" -o GMPDebug.exe main.o -lgmp -lgmpxx 
    ```

笔记：

1.  选项的顺序很重要。我不知道所有原因，但如果第二个命令行（链接程序）在 -o 选项之前有 -lgmp -lgmpxx 标志，则链接将失败。

2.  -l 标志是一个棘手的标志。它实际上是说“在 -L 中查找 liblibrary.a”。在这种情况下，“在 C:\gmp\lib 中查找 libgmp.a 和 libgmpxx.a”。

3.  我听说过涉及 cout 和 64 位版本的 eclipse 的错误，所以我使用的是 32 位版本，在那里我看到了同样的错误。:-)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-12-10T07:07:07.837

**由于 gmp 库文档中有非常小的示例，因此我将取幂示例包括在内以供参考：**

> 程序计算 2 ^ 20000

```
#include <iostream>
#include <gmp.h>

using namespace std;
int main(void) {
  mpz_t result, base;
  mpz_inits(result,base,NULL);
  mpz_set_str(base, "2", 10);
  mpz_pow_ui(result, base, 20000);
  mpz_out_str(stdout, 10, result);
  return 0;
} 
```

编译：`g++ -o gmp_pow_test gmp_pow_test.cpp -lgmp`

跑 ：`./gmp_pow_test`

使用以下命令在 Ubuntu 上安装 gmp 库：`sudo apt-get install libgmp-dev libgmpxx4ldbl`

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-04-19T09:01:18.327

您需要告诉编译器您要使用*哪些库。*

```
g++ -lgmp -lgmpxx file.cpp -o file 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-03-10T02:46:00.977

可能为时已晚，没有用，但是...

首先，您的程序运行良好。正如其他人指出的那样，您需要 (a) 确保已安装 GMP 库（包括其 gmpxx 扩展名和所有相关文件），以及 (b) 您告诉编译器在哪里可以找到这两个包含文件，以及要链接的库。在我的例子中，包含文件位于 /opt/local/include 中，而库位于 /opt/local/lib 中（Macports 将它们放置在其中:)。

这是代码：

```
#include <iostream>
#include <gmpxx.h>

using namespace std;

int main (void) {
    mpz_class a, b, c;

    a = 1234;
    b = "-5678";
    c = a+b;

    cout << "sum of " << a << " and " << b << " is " << c << "\n";
    cout << "absolute value is " << abs(c) << "\n";
    // cin >> a;
    return 0;
} 
```

这是编译/链接命令：

```
clang++ -o gmpxx-tst -I/opt/local/include gmpxx-tst.cpp -L/opt/local/lib -lgmpxx -lgmp 
```

以下是 gmpxx-tst 的调用产生的结果：

```
$ ./gmpxx-tst
sum of 1234 and -5678 is -4444
absolute value is 4444 
$ 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-01-02T17:29:20.993

您需要告诉编译器头文件*在哪里。*

```
g++ test.cpp -I/path/to/directory/that/contains/the/header -o test.exe 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-11-19T21:15:22.503

我尝试了很多解决方案，但都有一些问题

**这是安装GMP和eclipse的最佳方法**

按照这个链接 [http://www.multigesture.net/articles/how-to-install-mingw-msys-and-eclipse-on-windows/](http://www.multigesture.net/articles/how-to-install-mingw-msys-and-eclipse-on-windows/)

您需要确保其中未提及的以下内容：

安装 MinGW 时选择不包含空格的路径，如“c:\MinGW”

安装后，从**开始**打开**​​MinGW 安装管理器**

*   选择所有基础 - 然后在 MinGW 下，选择要安装的所有 GMP 库
*   应用更改

之后，您将安装 JDK，然后将“C:\Program Files\Java\jdk1.8.0_121\bin”添加到 PATH 系统变量

安装 Eclipse 后转到：

*   GCC C++ 编译器 --> Miscellaneous 添加 -lgmp -lgmpxx 到该行的 END
*   MinGW C++ 链接器 --> 库 按该顺序将 gmp 和 gmpxx 添加到“库 (-l)”

前进。

# azure - SQL 数据同步门户看不到任何表或架构

> ID：14126395
> 
> 赞同：1
> 
> 时间：2013-01-02T17:27:25.170
> 
> 标签：azure, azure-sql-database, azure-data-sync

我正在从新门户尝试新的数据同步。但是当我尝试添加同步规则（我认为它是开始同步所必需的）时，不会加载模式和表。

我在两个数据库中创建了表，只是为了测试，但没有任何改变。

是否有人在新门户中使用 Azure Data Syn 或已经看到此问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T15:15:17.520

仁南，

这已经在您的其他论坛帖子中得到了回答。

这是表没有主键的情况。

# linux - 如何使用 scheme48 正确执行程序？

> ID：14126397
> 
> 赞同：1
> 
> 时间：2013-01-02T17:27:30.853
> 
> 标签：linux, scheme, scheme48

我正在学习Scheme。我想为 Gimp 构建*script-fu*过滤器，所以我使用*tinyscheme*来执行我制作的脚本，但似乎*tinyscheme*的函数集非常有限`max`，缺少`min`和等函数。`even?`（我希望有人在这里证明我错了：（）

好吧，其实我只想用scheme48执行一个Scheme脚本。我怎么做？

例如，如何使用*scheme48*执行以下文件？

```
(define (addx inNum inX)
  (if (> (* inNum inX) 999) 0
      (+ (* inNum inX) (addx inNum (+ 1 inX)))))

(display 
  (- (+ (addx 3 1) (addx 5 1)) (addx 15 1))) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T18:13:07.027

我也无法成功运行带有 scheme48 的方案脚本（而且我在手册中找不到提示）。您也可以使用 Guile（假设您正在使用 linux 或类似的东西）：

```
#!/usr/local/bin/guile -s
!#

(define (addx in-num in-x)
  (if (>  (* in-num in-x) 999)
      0
      (+ (* in-num in-x) (addx in-num (+ 1 in-x)))))

(display (- (+ (addx 3 1) (addx 5 1)) (addx 15 1)))
(newline) 
```

保存它然后运行：

```
$chmod u+x test.scm
./test.scm 
233168
$ 
```

（顺便说一句：请不要像C那样格式化Scheme）。

**编辑**

根据 Mike Sperber 在[Scheme48 邮件列表](http://permalink.gmane.org/gmane.lisp.scheme.scheme48/2422)上的帖子，shebanging 将不起作用。以这种方式显式调用 Scheme48：

```
#!/bin/bash
scheme48 -a batch << EOF
(letrec ((fac (lambda (n)
             (if (= n 1)
                 1
                 (* n (fac (- n 1)))))))
 (fac 5))
EOF

$ ./test.scm
120 
```

# sharepoint - XSL / XSLT - 添加一个值作为 DIV 的样式属性

> ID：14126400
> 
> 赞同：3
> 
> 时间：2013-01-02T17:27:37.140
> 
> 标签：sharepoint, xslt, sharepoint-2010, content-query-web-part

我正在使用 SharePoint 2010 和内容查询 Web 部件从 SharePoint 列表中输出日期列表。此列表的显示由名为 ItemStyle.xsl 的 XSL 样式表控制

我在总体外观方面取得了进展，但现在想将它检索到的字段之一添加为背景/样式属性。

我相信我遇到的问题与 xsl value-of select 在标签末尾有一个右括号有关，因此无意中关闭了我的 DIV。有人可以查看下面的代码并建议在打开的 DIV 中打印 CategoryColour 的替代方法。

我也会偶尔将“xmlns:ddwrt”插入到 html 中，我希望至少可以看到“style:background ....”

非常感谢

```
<xsl:stylesheet                                                                                                                                                                                         
  version="1.0"                                                                                                                                                                                         
  exclude-result-prefixes="x d xsl msxsl cmswrt"                                                                                                                                                        
  xmlns:x="http://www.w3.org/2001/XMLSchema"                                                                                                                                                            
  xmlns:d="http://schemas.microsoft.com/sharepoint/dsp"                                                                                                                                                 
  xmlns:cmswrt="http://schemas.microsoft.com/WebParts/v3/Publishing/runtime"                                                                                                                            
  xmlns:ddwrt="http://schemas.microsoft.com/WebParts/v2/DataView/runtime"                                                                                                                               
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"                                                                                                                                                      
  xmlns:msxsl="urn:schemas-microsoft-com:xslt">                                                                                                                                                         

<!-- PrettyCal Template -->                                                                                                                                                                             
<xsl:template name="PrettyCal" match="Row[@Style='PrettyCal']" mode="itemstyle">                                                                                                                        
    <xsl:variable name="Start"><xsl:value-of select="@EventDate" /></xsl:variable>                                                                                                                      
    <xsl:variable name="End"><xsl:value-of select="@EndDate" /></xsl:variable>                                                                                                                          
    <xsl:variable name="AllDay"><xsl:value-of select="@AllDayEvent" /></xsl:variable>                                                                                                                   
    <xsl:variable name="Location"><xsl:value-of select="@EventLocation" /></xsl:variable>                                                                                                               
    <xsl:variable name="CategoryColour"><xsl:value-of select="@EventCategoryColour" /></xsl:variable>                                                                                                   

    <div class="upcoming-events" style="background: {CategoryColour}" ><xsl:value-of select="$CategoryColour"/>                                                                                         

        <h2 class="event-title">                                                                                                                                                                        
        <a>                                                                                                                                                                                             
        <xsl:attribute name="onClick">                                                                                                                                                                  
            javascript:SP.UI.ModalDialog.showModalDialog({ url: '/services/marketing/Lists/College%20Calendar/DispForm.aspx?ID=<xsl:value-of select="@ID" />', title: 'Event Details' }); return false; 
        </xsl:attribute>                                                                                                                                                                                
        <xsl:value-of select="@Title" /></a></h2>                                                                                                                                                       

    </div>                                                                                                                                                                                              
</xsl:template>                                                                                                                                                                                         
</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-02T17:32:21.713

**你有：**

```
 <div class="upcoming-events" style="background: {CategoryColour}" ><xsl:value-of select="$CategoryColour"/> 
```

**你实际上想要**：

```
 <div class="upcoming-events" style="background: {$CategoryColour}" ><xsl:value-of select="$CategoryColour"/> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T17:32:04.033

`$`您在变量前面缺少 a `CategoryColour`。

# c# - 引用另一个文件/项目中的变量

> ID：14126401
> 
> 赞同：1
> 
> 时间：2013-01-02T17:27:40.183
> 
> 标签：c#, variables

我将尽力解释这一点。我正在开发一个需要从另一个程序获取数据的应用程序。我相信它们都在同一个解决方案中，我的应用程序引用了包含我想要的变量的 .dll。代码有点像这样设置

具有我想要的变量的 .cs 文件是这样设置的

```
public class myObserverClass
{
  //then there is a bunch of functions and the variable i need is in one like this
  static void functionWithMyVariable(ref something, int toTier){
    string myVariable = some value;
  }
} 
```

在我的主应用程序中，我需要 myVariable 但我不确定如何访问它。我使用第二个程序的命名空间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T17:32:05.937

让你的函数返回你想要的变量值，而不是返回 void。

```
static string functionWithMyVariable(ref something, int toTier){
  string myVariable = some value;
  return myVariable;
} 
```

另请注意，如果您想从其他项目访问它们，则需要将函数和（对象/类级别变量）设为 PUBLIC。

```
myObserverClass.functionWithMyVariable(); 
```

除非 functionWithMyVariable 是一个 PUBLIC 函数，否则它将不起作用。

```
public string functionWithMyVariable(ref something, int toTier){ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T17:40:43.610

如果我没记错的话，你有一个应用程序的 dll 说 App1 有 Class 说 C1 这是公共的。在这个类中，你有一个变量说 V1。现在，您将此 dll 引用到您的另一个应用程序 App2 中，您希望在其中访问上述变量 V2。现在，如果类 C1 和变量 V1 都是公共的，那么您可以像我们通过创建对象将一个类的变量访问另一个类的变量一样访问它们，但条件是类和变量都应该是公共的。

希望这可以帮到你 ：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T17:33:37.270

在两个应用程序中引用程序集（.dll）是让它们共享*代码*，这与共享*数据*不同。每个程序都会为 .dll 中的类和结构创建单独的内存版本。有关如何在 .net 应用程序之间传输数据的详细信息，请参阅[在同一台计算机上的 .net 应用程序之间传输大数据。](https://stackoverflow.com/questions/9410784/transfer-large-data-between-net-applications-on-same-computer)

# ruby-on-rails - 更新后无法运行 rvmsudo rails s

> ID：14126403
> 
> 赞同：0
> 
> 时间：2013-01-02T17:27:41.957
> 
> 标签：ruby-on-rails

更新到最新的稳定版 rails 后，我似乎无法运行 rvmsudo rails s，我得到`sudo: rails: command not found`. 我试过跑步`rvm reinstall 1.9.3`无济于事。

`rvmsudo which rails`返回：`/home/user/.rvm/gems/ruby-1.9.3-p327/bin/rails`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T17:44:59.310

`rvm get head`为我解决了这个问题。看起来这是一个错误，如此[处](https://github.com/wayneeseguin/rvm/issues/1329)所述。

# html - 如何验证谷歌网络字体是否正常工作？

> ID：14126407
> 
> 赞同：1
> 
> 时间：2013-01-02T17:27:53.110
> 
> 标签：html, css

我已经修改了尝试加载三种谷歌字体的其他人的代码。

他们有 3 个 css 文件。每个 css 文件都使用了 google web fonts 中的一种 css 字体。在 chrome 开发工具中，我只看到一种字体有效，而另两种无效。

发生这种情况是因为只有一个可以应用，所以 chrome 试图下载一个。当他们更改下拉选择更改的字体时，它不起作用，因为字体甚至没有在 chrome 中加载。

因为我想在他们更改下拉列表时加载字体，所以我编写了以下代码：

```
<div id="hiddenFontLoader"></div> 
```

***CSS：***

```
#hiddenFontLoader {
    font-family: 'Quicksand', 'Cantarell';
    display: none;
} 
```

此代码帮助我加载其他 2 种无处使用的字体，并将在下拉更改时使用。

现在我想证明它是有效的。对我来说，我可以将字体设置为 400% 并且可以检查它是否有效。

测试字体是否加载的正确方法是什么。我的意思是如果我使用后备字体，那么我无法检查所有字体是否有非常小的差异，并且后备字体与我从谷歌字体加载的字体非常相似。

假设我申请了 body{} 那么如何确认它在 chrome 开发工具或 firebug 中工作。

任何人都有诀窍。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T17:33:49.680

您应该考虑使用[Google WebFont Loader](https://developers.google.com/webfonts/docs/webfont_loader)。文档非常详尽。具体来说，查看`Acting on Events`.

`https://developers.google.com/webfonts/docs/webfont_loader`

我相信您正在寻找`active` [活动](https://developers.google.com/webfonts/docs/webfont_loader#Events) [（单击此处！）](https://developers.google.com/webfonts/docs/webfont_loader#Events)。

# android - 使用 PhoneGap 访问我的平板电脑 api 时出现问题

> ID：14126410
> 
> 赞同：0
> 
> 时间：2013-01-02T17:28:15.560
> 
> 标签：android, api, cordova, jquery-mobile

我需要一些帮助来制作我的应用程序。

我正在做一个学校项目，我希望能够拍照或访问平板电脑的图片库，因为我希望可以选择将使用平板电脑拍摄的图像保存在 MySQL 数据库中。

但是，我无法让这部分工作。就好像我没有权限连接到平板电脑 api。该应用程序 (android) 是使用 JQuery Mobile 在 dreamweaver 中构建的。要连接到平板电脑 api，我想使用 PhoneGap Build。我选择不使用 DW 中的内置功能上传到 PhoneGap，因为我只是认为它会带来更多问题。相反，我只是制作一个 zip 文件并上传到他们的网站上。

我的第一个问题是我是否误解了 PhoneGap Build 的使用。我在很多地方读到过你必须使用 Eclipse 和 PhoneGap，真的有必要激活我的平板电脑的相机吗？我想坚持使用 HTML / css / JS，因为这是我最了解的，而不必使用 Java。

这是我的 HTML 代码，

```
<div data-role="content">   
    <div data-role="content" id="content" data-theme="a">
        <div class="ui-block-a"><div data-role="button" onClick="take_pic();">Take a Picture</div></div>
        <div class="ui-block-b"><div data-role="button" onClick="album_pic();">Select</div></div>
    </div>
    <img id="cameraImage" src="" />
</div><!-- /content -->

<script type="text/javascript" charset="utf-8" src="JS/camera.js"></script> 
```

这是我的 camera.js 文件，我称之为页面末尾

```
function take_pic() {
navigator.camera.getPicture(onPhotoDataSuccess, function(ex) {
    alert("Camera Error!");
}, { quality : 30, destinationType: destinationType.DATA_URL });
}

function album_pic() { 
navigator.camera.getPicture(onPhotoURISuccess, function(ex) {
        alert("Camera Error!"); }, 
        { quality: 30, 
    destinationType: destinationType.FILE_URI,
    // Android Quirk: Camera.PictureSourceType.PHOTOLIBRARY and 
    // Camera.PictureSourceType.SAVEDPHOTOALBUM display the same photo album.
    sourceType: pictureSource.SAVEDPHOTOALBUM });
} 
```

这两个函数的代码取自 [PhoneGap APIs using jQuery Mobile 的侧面 Demo App](https://github.com/libbybaldwin/phonegap-api-demo-jquery-mobile)

我非常希望有人可以帮助我解决我做错的事情。当我按下我制作的 2 个按钮时没有任何反应，而且我真的不知道如何测试应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T19:17:42.047

正在使用的 Phonegap Build 服务需要进行一些调整。您不能直接转换 www 文件夹并将其上传到构建服务。我建议您使用以下链接来学习和修改 html for phonegap build service。

[https://github.com/phonegap/phonegap-start](https://github.com/phonegap/phonegap-start)

我只是在尝试并修改了您提供的索引文件.. 试一试（即使它可能无法完全正常工作）。

[https://github.com/varunbhat/phonegap-test-app](https://github.com/varunbhat/phonegap-test-app)

希望这对您有所帮助.. 希望您喜欢 phonegap 体验。

# java - java中大量文件的高效搜索和替换程序

> ID：14126417
> 
> 赞同：-1
> 
> 时间：2013-01-02T17:29:01.730
> 
> 标签：java, regex, full-text-search, performance

**我已经使用eclipse ide**为大量文件创建了一个使用正则表达式的搜索和替换程序。在这个程序中，我给出了要在其中执行搜索和替换的目录的名称（它也可能有子目录）。对于小的没有它运行平稳的文件，但对于具有 1000 个文件的目录，它**挂**在两者之间，什么都不做（即使在增加 jvm 内存大小之后）。我使用 BufferedReader 逐行读取每个文件，并使用正则表达式匹配行中的模式，然后将其替换为其他文本。任何机构都可以为我建议可能的解决方案（算法、库、技巧、黑客）吗？

```
 BufferedReader br = new BufferedReader(new FileReader(fileName));
        BufferedWriter bw = new BufferedWriter(new FileWriter(changedFile));
        StringBuilder sb = new StringBuilder();
        for (String line = br.readLine(); line != null; line = br.readLine()) {
            sb.append(line).append("\n");
        }
        br.close();
        sb.trimToSize();
        String code = sb.toString();
        code = code.replaceAll("System", "PrintWriter");
        bw.write(code);
        bw.flush();
        bw.close(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T17:53:04.660

您提供的代码片段对我来说似乎（大部分）是正确的，因为它确实会将*整个*文件加载到内存中，执行替换并将其写回。我对您的问题的怀疑：

*   您的程序遇到了一个文件，该文件正在加载到可用内存中。这将导致垃圾收集器超时工作以释放空间，并且很容易导致您的程序看起来被冻结。

*   您的目录递归代码在某处纠缠不清，并且反复阻塞或迭代相同的文件。

几点建议：

*   检查 CPU 使用率——你的程序真的*在做*什么吗？还是在某个地方陷入僵局？您的硬盘驱动器是否处于活动状态？

*   让您的程序在处理之前打印每个文件名。它每次都停在一个特定的文件上吗？它是否在同一组文件上循环？

*   使用 Eclipse 调试器或 JVM 监视器（例如[VisualVM](http://docs.oracle.com/javase/7/docs/technotes/guides/visualvm/index.html)）来检查您的程序。当它看起来被冻结时，它在做什么？它的内存使用情况和 GC 活动是什么样的？

恐怕如果没有有关您的程序的更多信息，将很难提供更具体的答案...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T17:33:20.227

我怀疑您操作系统中的写入缓冲区已满，它必须等待数据刷新到磁盘，除非您可以确定程序确实由于其中的错误而挂起。使用调试器是一种简单的测试方法或`jstack`用于获取堆栈跟踪。

> 准确告诉我问题出在哪里。

我怀疑问题出在硬盘驱动器的速度上。如果您有一个寻道时间为 8 ms 的 HDD；

*   查找文件以读取 8 毫秒
*   读取文件 4-12 毫秒
*   找到文件写入 8 毫秒
*   写入文件 4-12 毫秒
*   更新文件系统日志 8 毫秒。

总时间约为 32 - 48 毫秒，这意味着您每秒可以更新大约 20 - 30 个文件。

只需不到 50 美元，您就可以购买访问时间为 0.1 毫秒的 32 GB SSD。你可以花不多的钱买到双倍的尺寸。

*   查找文件以读取 0.1 毫秒
*   读取文件 0.1 ms
*   查找文件写入 0.1 毫秒
*   写入文件 0.1 ms
*   更新文件系统日志 0.1 毫秒。

总时间可能为 0.5 毫秒，允许您每秒处理多达 2000 个文件。

看起来您可以做更多事情的唯一原因是操作系统在一定程度上缓存了读取和缓冲写入。当这些用尽时（在 Windows 上它们似乎相当快），您会受到驱动器速度的限制。

# java - 从超类调用子类构造函数 - Android (java)

> ID：14126419
> 
> 赞同：1
> 
> 时间：2013-01-02T17:29:04.757
> 
> 标签：java, android, subclass, superclass

我什至不确定我的代码结构是否合适。我有一个以显示活动 Results.java 结尾的琐事游戏。然后我有一个带有 DatabaseHelper 子类的 Highscores.java，它被调用以将当前游戏分数插入到 Highscores 数据库表中。下面是我的 Highscores.java 类，其中注释了错误。

另外，如果我应该以不同的方式构建这些类——例如，将 DatabaseHelper 从一个子类移动到它自己的类——请告诉我。我很难实现这个 SQLite 数据库表。

高分.java

```
public class Highscores extends Activity {

    Context context;
    Button btn1;    
    DatabaseHelper dh;
    SQLiteDatabase db;

    private static final int DATABASE_VERSION = 1; 
    private static final String DB_NAME = "test3"; 
    private static final String DB_PATH = "/data/data/com.example.test/databases/";
    private static final String TABLE = "HighscoresList"; 

    // Table columns names. 
    private static final String RANK = "_id"; 
    private static final String SCORE = "score"; 
    private static final String PERCENTAGE = "percentage";

    TableLayout table;
    TableRow rowHeader, row1, row2, row3, row4, row5, row6, row7, row8, row9, row10;
    TextView rank, percentage, score;

    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.highscoresmain);

        Button btn1 = (Button)findViewById(R.id.homeBtn);

        btn1.setOnClickListener(new OnClickListener() {
            public void onClick(View arg0) {
                Intent intent = new Intent(Highscores.this, MainMenu.class);
                startActivity(intent);
            }
        });

        DatabaseHelper(context);  //Error:  The method DatabaseHelper(Context) is undefined for the type Highscore.
    }

    public class DatabaseHelper extends SQLiteOpenHelper { 

        public DatabaseHelper(Context context) { 
            super(context, DB_NAME, null, DATABASE_VERSION); 
            db = getWritableDatabase();

            TableRow rowHeader = new TableRow(context);
            TableRow row1 = new TableRow(context);
            TableRow row2 = new TableRow(context);
            TableRow row3 = new TableRow(context);
            TableRow row4 = new TableRow(context);
            TableRow row5 = new TableRow(context);
            TableRow row6 = new TableRow(context);
            TableRow row7 = new TableRow(context);
            TableRow row8 = new TableRow(context);
            TableRow row9 = new TableRow(context);
            TableRow row10 = new TableRow(context);

            TextView rank = new TextView(context);
            TextView percentage = new TextView(context);
            TextView score = new TextView(context);
            TextView r1r = new TextView(context);
            TextView r1p = new TextView(context);
            TextView r1s = new TextView(context);

            Cursor c_percentage = db.rawQuery("SELECT " + PERCENTAGE + " FROM " + TABLE + ";", null);
            Cursor c_score = db.rawQuery("SELECT " + SCORE + " FROM " + TABLE + ";", null);

            rank.setText("TEST - COLUMN RANK");
            percentage.setText("TEST - COLUMN PERCENTAGE");
            score.setText("TEST - COLUMN SCORE");
            r1r.setText("test..rank");
            r1p.setText("teset...percentage");
            r1s.setText("test...scoree");

            rowHeader.addView(rank);
            rowHeader.addView(percentage);
            rowHeader.addView(score);

            row1.addView(r1r);
            row1.addView(r1p);
            row1.addView(r1s);

            table.addView(rowHeader);
            table.addView(row1);
            table.addView(row2);
            table.addView(row3);
            table.addView(row4);
            table.addView(row5);
            table.addView(row6);
            table.addView(row7);
            table.addView(row8);
            table.addView(row9);
            table.addView(row10);

            table = (TableLayout)findViewById(R.id.tableLayout);
        }

        //Check if new record makes the top 10.
        public boolean check(long score, int percentage) {
            Cursor c1 = db.rawQuery("SELECT " + PERCENTAGE + " FROM " + TABLE + " WHERE " + PERCENTAGE + "=" + percentage + ";", null);
            Cursor c2 = db.rawQuery("SELECT " + SCORE + " FROM " + TABLE + ";", null);
            if(c1 != null && c2 != null) {
                if(c1.getCount() > 0) {               
                    c2.moveToFirst();
                    int i = 0;
                    do {
                        i++;
                        long x = c2.getLong(c2.getColumnIndex("SCORE"));
                        if(x < percentage) {
                            if(c2.getCount() == 9) {
                                //Delete last record in high score and insert at index.
                                db.rawQuery("DELETE FROM " + TABLE + " WHERE " + RANK + " = 10;", null);
                                db.rawQuery("INSERT INTO " + TABLE + "VALUES (" + i + ", " + score + ", " + percentage + ");", null);
                                return true;
                            } else {
                                //No deletion - just insert.
                                db.rawQuery("INSERT INTO " + TABLE + "VALUES (" + i + ", " + score + ", " + percentage + ");", null);
                                return true;
                            }
                        } else {
                            return false;
                        }
                    } while (c2.moveToNext());
                } else {
                    return false;
                }
            } else {
                return false;
            }
        }

        //Insert new record.
        public long insert(long score, int percentage) {
            ContentValues values = new ContentValues();
            values.put(SCORE, score);
            values.put(PERCENTAGE, percentage);

            return db.insert(TABLE, null, values);
        }

        public void openDatabase() throws SQLException {
            //Open the database.
            String myPath = DB_PATH + DB_NAME;
            db = SQLiteDatabase.openDatabase(myPath,  null,  SQLiteDatabase.OPEN_READONLY);
        }

        public synchronized void close() {
            if(db != null) {
                db.close();
            }
            super.close();
        }

        public void onCreate(SQLiteDatabase db) {
            db.execSQL("CREATE TABLE " + TABLE + " ("
                    + RANK + " INTEGER PRIMARY KEY AUTOINCREMENT,"
                    + SCORE + " LONG,"
                    + PERCENTAGE + " INTEGER"
                    + ");");
        }
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {}
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T17:32:05.843

利用

```
 dh=new DatabaseHelper(Highscores.this); 
```

代替

```
 dh=new DatabaseHelper(context); 
```

`context`因为在将其传递给`DatabaseHelper`构造函数之前您没有初始化

**或者**

在将上下文实例传递给 `DatabaseHelper`构造函数之前初始化上下文实例，如Activity的`onCreate`方法：`Highscores`

```
context=Highscores.this; 
```

# threshold - 使用 ImageJ 测量强度

> ID：14126420
> 
> 赞同：1
> 
> 时间：2013-01-02T17:29:06.157
> 
> 标签：threshold, imagej, roi, 8-bit

我们必须使用 imagej 测量图像某些区域的荧光强度。我们提出了以下步骤来测量强度。虽然看起来确实正确，但我的问题是——>我们实际上是使用以下步骤正确测量强度，还是我们错误地测量了其他东西并认为该值就是强度？

1.  将图像设为 8 位
2.  对图像设置阈值（图像 > 调整 > 阈值）以勾勒出所有区域，然后单击应用
3.  打开分析 > 分析粒子。确保单击“添加到管理器”
4.  分析 > 分析粒子 > 显示 > 裸轮廓。这将打开一个新图像。
5.  打开彩色显微镜图像。然后，图像 > 叠加 > 从 ROI 管理器。
6.  图像 > 叠加 > 到 ROI 管理器。
7.  在 ROI Manager 中：按“测量”。（将弹出带有单个数据点的结果窗口）
8.  在结果窗口中单击鼠标右键，然后单击汇总。
9.  记录平均强度数据

我们是否使用上述步骤正确测量平均强度数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-13T15:30:22.563

在 imageJ 中测量强度时需要注意以下几点：

1.  ImageJ 自动将图像转换为 8 位
2.  如果可用，您应该始终使用 RAW
3.  如果您的显微镜无法将文件保存为 RAW 格式，您必须使用 .tif，其他格式会产生伪影
4.  如果您使用 .tif 格式，则单独保存通道而不是 RGB 堆栈

在阈值之前，您必须拆分通道，特别是如果您正在寻找来自某个波长的荧光。

您还需要在阈值之后使用“分水岭”功能，以便它会勾勒出单个单元格，从而避免勾勒出一组球形的单元格。通过这种方式，您可以测量他们的个人强度。然而，它并不完美，所以一旦 ROI 弹出并且细胞已经被粒子分析勾勒出来，您必须通过并确保它正在测量单个细胞。应删除包含多个单元格的任何大纲。还要寻找形状奇特的细胞或微核，它们也应该被删除。

现在我假设你正在测量人类癌细胞。您应该使用以下设置：

[![在此处输入图像描述](../Images/38c2a6ef28ae3ef0cd1e022cc2df1f96.png)](https://i.stack.imgur.com/7b8m5.png)

在所有这些之后，您将应用覆盖。无论您要覆盖什么图像，您还必须拆分其通道并使用包含您正在测量的波长的通道（即：Alexaflour 488 将位于 GFP 通道中）。

如果您一直在收集数据而没有这样做，我会丢弃所有数据，因为收集数据的过程并没有控制任何事情。

还有至于[去哪里问这玩意](https://www.google.com/search?btnG=1&pws=0&q=ImageJ+Forums&gws_rd=ssl)。

# c# - 在一行中将对象列表转换为字符串

> ID：14126421
> 
> 赞同：22
> 
> 时间：2013-01-02T17:29:06.553
> 
> 标签：c#, string, list

我有一个实现的对象列表`ToString()`。我需要将整个列表转换为一行中的一个字符串。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-01-02T17:33:30.887

另一种可能会有所帮助的方法是`string.Join()`，它采用一组对象并将它们与您想要的任何分隔符连接起来。例如：

```
var combined = string.Join(", ", myObjects); 
```

将生成一个以逗号/空格分隔的字符串。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-01-02T17:30:44.833

假设你的意思是你的对象实现 ToString，我相信这会做到：

```
String.Concat( objects.Select(o=>o.ToString()) ); 
```

根据 dtb note，这也应该有效：

```
String.Concat( objects ); 
```

请参阅[http://msdn.microsoft.com/en-us/library/dd991828.aspx](http://msdn.microsoft.com/en-us/library/dd991828.aspx)

当然，如果你不实现 ToString，你也可以这样做：

```
String.Concat( objects.Select(o=>o.FirstName + " " + o.LastName) ); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-01-02T17:32:44.393

您可以使用[**String.Join**](http://msdn.microsoft.com/en-us/library/57a79xd0.aspx)连接对象列表。

```
string str = String.Join(",", objects); 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2016-06-27T15:54:36.463

这些都不适合我。我很困惑，因为文档明确表示它们不起作用（需要字符串，而不是对象）。但是修改@Adil 的原始答案（通过查看以前的修订版找到），我得到了一个运行良好的版本：

```
string.Join( ",", objectList.Select(c=>c.ToString()).ToArray<string>()) 
```

编辑：根据@Chris 的评论 - 我正在使用 Unity 的 .NET 版本。我使用微软文档作为参考，所以我仍然很困惑为什么这被否决了，但是......也许这是一个需要这个解决方案的 Unity 特定问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-11-06T06:12:11.417

您可以使用 Linq [Enumerable.Select](https://docs.microsoft.com/en-us/dotnet/api/system.linq.enumerable.select?view=net-5.0)选择一个字符串对象并将[Enumerable.Aggregate](https://docs.microsoft.com/en-us/dotnet/api/system.linq.enumerable.aggregate?view=net-5.0)转换为一个字符串。

```
string StringConcat = ObjectList.Select(x => { return x.StringValue; }).ToList().Aggregate((a,b) => $"{a},{b}"); 
```

示例结构：

```
ObjectList = List<ObjectClass>();

public class ObjectClass {
    public string StringValue { get; set; }
} 
```

# eclipse - 如何在 eclipse rcp 产品中设置默认打印机

> ID：14126422
> 
> 赞同：1
> 
> 时间：2013-01-02T17:29:08.657
> 
> 标签：eclipse, printing, default, rcp

我有一个 Eclipse RCP 产品，想设置默认打印机。我没有任何运气谷歌搜索这个。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T08:07:12.247

RCP 没有打印层，因此它将设置默认打印机委托给打印机驱动程序。Java 仅使用打印机驱动程序将打印机设置为默认值。所以不可能在 RCP 层设置默认打印机。

如果你想打印一些东西，java AWT 支持它。看到这个：

```
import java.awt.print.PageFormat;
import java.awt.print.PrinterJob;

public class PrinterSetup 
{

    public static void main(String[] args) throws Exception
    {
        PrinterJob pjob = PrinterJob.getPrinterJob();
        PageFormat pf = pjob.defaultPage();
        pjob.setPrintable(null, pf);

        if (pjob.printDialog()) {
          pjob.print();
        }
    }
} 
```

如果您的打印机驱动程序支持，您可以在此处设置默认打印机。

# android - 试图添加第二个链接到应用程序菜单android

> ID：14126423
> 
> 赞同：0
> 
> 时间：2013-01-02T17:29:17.227
> 
> 标签：android, android-layout

我正在尝试向菜单添加第二个链接。第一个工作正常。第二个叫做`menu_about`

```
package com.test.apppackage;

import android.app.Activity;
import android.os.Bundle;
import android.view.Menu;
import android.view.MenuItem;
import android.webkit.WebView;
import android.webkit.WebViewClient;
import android.widget.Toast;

public class MainActivity extends Activity {

    private WebView mWebview ;

    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);

        mWebview  = new WebView(this);

        mWebview.getSettings().setJavaScriptEnabled(true); // enable javascript

        final Activity activity = this;

        mWebview.setWebViewClient(new WebViewClient() {
            public void onReceivedError(WebView view, int errorCode, String description, String failingUrl) {
                Toast.makeText(activity, description, Toast.LENGTH_SHORT).show();
            }
        });

        mWebview .loadUrl("https://www.google.com");
        setContentView(mWebview );

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    public boolean onOptionsItemSelected(MenuItem item) {
        int id = item.getItemId();
        switch(id) {
            case com.homeovitality.productrecommender.R.id.menu_reset:
                mWebview .loadUrl("https://www.google.com/news");
                setContentView(mWebview );
                break;

        }
        return super.onOptionsItemSelected(item);
    }

    public class MyWebViewClient extends WebViewClient {

        @Override
           public boolean shouldOverrideUrlLoading(WebView view, String url) {
               view.loadUrl(url);
               return true;
           }
   }

    public boolean onOptionsItemSelected(MenuItem item) {
        int id = item.getItemId();
        switch(id) {
            case com.homeovitality.productrecommender.R.id.menu_about:
                mWebview .loadUrl("https://www.bbc.co.uk");
                setContentView(mWebview );
                break;

        }
        return super.onOptionsItemSelected(item);
    }

    public class MyWebViewClient extends WebViewClient {

        @Override
           public boolean shouldOverrideUrlLoading(WebView view, String url) {
               view.loadUrl(url);
               return true;
           }
   }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T17:33:32.650

你有 2 `onOptionsItemSelected`：

```
public boolean onOptionsItemSelected(MenuItem item) { // <-- this
        int id = item.getItemId();
        switch(id) {
            case com.homeovitality.productrecommender.R.id.menu_reset:
                mWebview .loadUrl("https://www.google.com/news");
                setContentView(mWebview );
                break;

        }
        return super.onOptionsItemSelected(item);
    }

    public class MyWebViewClient extends WebViewClient {

        @Override
           public boolean shouldOverrideUrlLoading(WebView view, String url) {
               view.loadUrl(url);
               return true;
           }
   }

    public boolean onOptionsItemSelected(MenuItem item) { // <-- and this
        int id = item.getItemId();
        switch(id) {
            case com.homeovitality.productrecommender.R.id.menu_about:
                mWebview .loadUrl("https://www.bbc.co.uk");
                setContentView(mWebview );
                break;

        }
        return super.onOptionsItemSelected(item);
    } 
```

删除其中一个并像这样切换 id：

```
public boolean onOptionsItemSelected(MenuItem item) {
        int id = item.getItemId();
        switch(id) {
            case com.homeovitality.productrecommender.R.id.menu_reset:
                mWebview .loadUrl("https://www.google.com/news");
                setContentView(mWebview );
                break;
            case com.homeovitality.productrecommender.R.id.menu_about:
                mWebview .loadUrl("https://www.bbc.co.uk");
                setContentView(mWebview );
                break;

        }
        return super.onOptionsItemSelected(item);
    } 
```

# sharepoint - SharePoint 2010，上传文档重定向到页面

> ID：14126430
> 
> 赞同：1
> 
> 时间：2013-01-02T17:30:16.823
> 
> 标签：sharepoint, sharepoint-2010, document

我在 SharePoint 2010 中有一个文档库，几个不同的团队出于相同的目的使用它。每个团队都有自己的页面，其中包含文档库的过滤视图。文档库还具有自定义列。

我遇到的问题是团队成员从他们的页面上传文档时。他们从他们的页面单击“添加文档”，然后浏览到他们想要上传的文档。这部分工作得很好——并且 URL 将源指定为团队的页面。但是，在用户选择文档并单击“确定”后，它会将他们带到 EditForm.aspx 页面，该页面允许用户填写文档的元数据。这很好，但现在源 URL 指定了来自文档库内部的视图，并且不再指向团队的页面（它们来自哪里）。

有谁知道我可以如何更改此源 URL 以指向团队的页面而不是文档库？或者，有没有人知道这个问题的解决方法，以便用户可以从页面上传文档（上面有文档库 Web 部件），以便它返回到页面？

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T22:30:24.863

彼得是对的——SharePoint 就是 SharePoint。

如果我没看错，您可能应该简单地检查一下内联编辑。使用视图，您可以在不离开页面的情况下动态编辑属性（每个团队都有自己的视图）。

或者，我看到许多人只是想将用户重定向回他们来自编辑或查看项目的页面，而不管它在哪里（链接等）。最简单的方法是通过在表单中​​添加一个按钮来用您自己的代码替换 OK/Cancel 来进行一些编程。只需使用 InfoPath 编辑表单以添加新按钮 - 如果您需要自定义重定向到团队主页或类似的东西，您将拥有用户上下文。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T16:14:12.933

SharePoint 2010 应该以您想要的开箱即用方式工作。我试图重现您的情况，但无法重现。我所做的是建立一个包含一个自定义列和两个自定义视图的库。然后，我创建了两个页面，一个具有使用一个视图的列表表单 Web 部件，一个具有使用另一个视图的列表表单 Web 部件。

当我从任一页面单击“添加文档”时，将打开一个模式对话框窗口以显示“上传”页面。我首先选择文件 (Upload.aspx)，然后重定向到元数据属性 (EditForm.aspx)。填写元数据后，对话框窗口关闭，其后面的页面（我们最初所在的页面）刷新以在 Web 部件中显示新文档。因此，用户体验是他们停留在他们想要的页面上，同时根据需要添加文档。

如果您编辑您的问题或提供有关您的情况的更多详细信息的评论，我们可以尝试重现它，但您描述的功能正是它应该如何开箱即用。

# android - 从 android shell 验证屏幕开/关

> ID：14126431
> 
> 赞同：0
> 
> 时间：2013-01-02T17:30:18.780
> 
> 标签：android, android-ndk

我被困在屏幕关闭和测试的一些验证中。我正在使用 input keyevent 26 来关闭屏幕并唤醒。如何验证此测试是通过还是失败。有没有android写屏幕状态的文件？从dumpsys power有什么其他方法吗？任何人都可以建议检查状态的方法。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T17:41:47.100

您可以编写一个简单的应用程序，该应用程序具有用于 SCREEN ON 和 SCREEN OFF 事件的广播接收器，并将事件记录到 LogCat，并通过`adb logcat`.

这是一些示例代码。确保您的应用程序已在设备上至少运行一次，否则将不会注册以接收广播。

```
public class MyReceiver extends BroadcastReceiver {

    private boolean SCREEN_ON = false;  

    @Override
    public void onReceive(Context context, Intent intent) {

        if (intent.getAction().equals(Intent.ACTION_SCREEN_ON)) {
            SCREEN_ON = true;
            Log.d(C.TAG, "Screen on");
        }
        if (intent.getAction().equals(Intent.ACTION_SCREEN_OFF)) {
            SCREEN_ON = false;
            Log.d(C.TAG, "Screen off");
        }

    }
} 
```

# python - 如何从列表列表中识别所有相同的列表？

> ID：14126435
> 
> 赞同：2
> 
> 时间：2013-01-02T17:30:29.947
> 
> 标签：python

你好！我有一个列表列表，当子列表的第一个元素相等时，我需要添加其中的第二个元素并打印结果。我已经考虑了很长时间，但我似乎无法弄清楚如何做到这一点。这是我的问题的一个例子：

```
num_list = [[1, 2], [3, 4], [1, 2], [3, 4], [3, 4]]

# 0th and 2nd sublists both have 1 as their first element.
# sum = 2 + 2\. print out 4.

# all the remaining sublists have 3 as their first element.
# sum = 4 + 4 + 4\. print out 12\. 
```

非常感谢你！

PS：我知道这种映射最好用字典来完成，但这只是我问题的简化版本。我的实际程序有超过 2 个值的子列表，我需要比较超过 1 个需要相等的值。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T17:35:09.057

您可以使用`defaultdict`：

```
from collections import defaultdict

num_list = [[1, 2], [3, 4], [1, 2], [3, 4], [3, 4]]

d = defaultdict(int)

for item in num_list:
    d[item[0]] += item[1] 
```

结果是：

```
>>> d
defaultdict(<type 'int'>, {1: 4, 3: 12}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T17:34:12.700

您仍然可以为此任务使用字典。使用元组作为键：

```
>>> d = {(1,1): (2,2), (3,3): (4,4)}
>>> d
{(1, 1): (2, 2), (3, 3): (4, 4)}
>>> d[(1,1)]
(2, 2) 
```

您可能还想了解[Counter](http://docs.python.org/2/library/collections.html#collections.Counter)类。如果您的元素更复杂，我建议将它们包装在对象中并实现该[`__add__`](http://docs.python.org/2/reference/datamodel.html#object.__add__)方法来自定义它们如何添加在一起。

```
from collections import Counter
c = Counter()
c[(1,1)] = 10
c[(2,2)] = 10
c[(1,1)] += 1

c2 = Counter()
c2[(2,2)] = 4
c2[(2,3)] = 5 
```

这使：

```
>>> c 
Counter({(1, 1): 11, (2, 2): 10})
>>> c + c2
Counter({(2, 2): 14, (1, 1): 11, (2, 3): 5}) 
```

请注意，您不能将列表用作键，因为列表是可变的，因此不可散列。你必须使用元组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T20:27:26.917

**使用标准`dict()`：**

```
num_list = [[1, 2], [3, 4], [1, 2], [3, 4], [3, 4]]

d = dict()
for e in num_list:
    #get() checks if key exists, if not - returns 0        
    d[e[0]] = d.get(e[0], 0) + e[1]

print(d) 
```

它打印：

```
{1: 4, 3: 12} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T22:18:41.630

您似乎没有足够准确地描述您的问题。
您的真正问题只能从您对@Blender 的问题和答案的评论中掌握。他对问题的好解决方案不会立即适用于我所理解的问题案例，......但几乎。

这是一种扩展以满足您的需求的方法：

```
# some toy example data - I understand you want the first 2 sub_list
# to be "merged" because BOTH strings in pos 0 and 2 match
data = [['42x120x1800', 50, '50x90x800', 60],
        ['42x120x1800', 8, '50x90x800', 10],
        ['2x10x800', 5, '5x9x80', 6]]

from collections import defaultdict

# I'm using a lambda to initialize the items of the dict
# to a two-element list of zeros
d = defaultdict(lambda :[0, 0])
for sub_list in data:
    key = (sub_list[0], sub_list[2])
    d[key][0] += sub_list[1]
    d[key][1] += sub_list[3]

for key in d:
    print key, d[key]   
# ('2x10x800', '5x9x80') [5, 6]
# ('42x120x1800', '50x90x800') [58, 70] 
```

如果你想回到数据的初始表示：

```
new_data = [[key[0], val[0], key[1], val[1]] for key, val in d.iteritems()]
# [['2x10x800', 5, '5x9x80', 6], ['42x120x1800', 58, '50x90x800', 70]] 
```

# vb.net - 在VB中实现标签名称中的变量？

> ID：14126437
> 
> 赞同：2
> 
> 时间：2013-01-02T17:30:41.663
> 
> 标签：vb.net, loops, label

我目前有一个巨大的 IF 语句，并希望尽可能地减少它。

我有一个从 SQL 查询填充的数据网格，然后从这个数据网格中我将值传递到单独的标签中。

我能够创建一个 For Each 循环，在该循环中我循环遍历变量，直到计数器达到 7。但是，当我需要将标签名称值递增 1 时，就会出现问题。每次，所以基本上我需要在标签名称中添加一个计数器变量。

我需要最小化的代码是：

```
result73 = DataGridView1.Rows(0).Cells(0).Value.ToString
result74 = DataGridView1.Rows(0).Cells(1).Value.ToString
result75 = DataGridView1.Rows(1).Cells(0).Value.ToString
result76 = DataGridView1.Rows(1).Cells(1).Value.ToString
result77 = DataGridView1.Rows(2).Cells(0).Value.ToString
result78 = DataGridView1.Rows(2).Cells(1).Value.ToString
result79 = DataGridView1.Rows(3).Cells(0).Value.ToString
result80 = DataGridView1.Rows(3).Cells(1).Value.ToString
result81 = DataGridView1.Rows(4).Cells(0).Value.ToString
result82 = DataGridView1.Rows(4).Cells(1).Value.ToString
result83 = DataGridView1.Rows(5).Cells(0).Value.ToString
result84 = DataGridView1.Rows(5).Cells(1).Value.ToString
result85 = DataGridView1.Rows(6).Cells(0).Value.ToString
result86 = DataGridView1.Rows(6).Cells(1).Value.ToString
result87 = DataGridView1.Rows(7).Cells(0).Value.ToString
result88 = DataGridView1.Rows(7).Cells(1).Value.ToString

If result73 = "Monday" Then
    DaySalesLbl1.Text = result74
ElseIf result73 = "Tuesday" Then
    DaySalesLbl2.Text = result74
ElseIf result73 = "Wednesday" Then
    DaySalesLbl3.Text = result74
ElseIf result73 = "Thursday" Then
    DaySalesLbl4.Text = result74
ElseIf result73 = "Friday" Then
    DaySalesLbl5.Text = result74
ElseIf result73 = "Saturday" Then
    DaySalesLbl6.Text = result74
ElseIf result73 = "Sunday" Then
    DaySalesLbl7.Text = result74
End If 
```

对于上面声明的每个变量，此 If 语句都会继续执行。

我创建的循环看起来像这样：

```
Dim cou As Integer
Dim n As Integer
cou = 0
n = 1
Do Until result74 <> ""
    If result73 = cou Then
        DaySalesLbl +n = result74
    End If
    cou = cou + 1
    n = n + 1
Loop 
```

但是该部分`DaySalesLbl +n = result74`会带来一个错误，因为它会查找生成的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T17:37:20.147

如果我怀疑这是一个 WinForm 项目，那么您可以使用`Form.Controls`集合按名称访问控件，如下所示：

```
Dim cou As Integer
Dim n As Integer
cou = 0
n = 1
Do Until result74 <> ""
    If result73 = cou Then
        Dim l As Label = CType(Me.Controls("DaySalesLbl" & n), Label)
        l.Text = result74
    End If
    cou = cou + 1
    n = n + 1
Loop 
```

该`Controls`集合包含作为窗体的直接子级的所有控件。您可以通过索引（例如`Me.Controls(0)`）或名称（例如`Me.Controls("DaySalesLbl6")`）访问它们。但是，该集合将列表存储为基本`Control`类型，因此您必须在访问特定属性之前将其转换为特定类型。这就是`CType(..., Label)`示例中存在的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T17:42:31.437

我会编写如下代码：

```
For i as Integer = 0 to 7
   Select Case DataGridView1.Rows(i).Cells(1).Value.ToString 
    Case "Monday"
       Me.Controls("DaySalesLbl" & i+1).Text = DataGridView1.Rows(i).Cells(2).Value.ToString 
    Case "Tuesday"
       Me.Controls("DaySalesLbl" & i+2).Text = DataGridView1.Rows(i).Cells(2).Value.ToString 

   ... etc ... 
```

我在没有 IDE 的情况下做到了这一点，所以我希望我没有搞砸任何事情，但我希望这能让您朝着正确的方向前进并有所帮助。

# c++ - 使用 boost::program_options 打印普通和位置参数的帮助

> ID：14126440
> 
> 赞同：19
> 
> 时间：2013-01-02T17:30:57.487
> 
> 标签：c++, boost, command-line-arguments, boost-program-options

当您使用 Boost 库`program_options`时，很容易为您的程序打印帮助：

```
boost::program_options::variables_map options;
boost::program_options::options_description optionsDesc;
boost::program_options::positional_options_description positionalOptionsDesc;
//...
if(options.count("help"))
{
    cerr << optionsDesc << endl;
} 
```

但是如何将选项添加`positional_options_description`到帮助消息中？在本教程中，我可以在本节末尾看到此类设置的输出：

[http://www.boost.org/doc/libs/1_52_0/doc/html/program_options/tutorial.html#id2607297](http://www.boost.org/doc/libs/1_52_0/doc/html/program_options/tutorial.html#id2607297)

该选项`input-file`打印在帮助中并且是位置的。但我看不到代码。是否有一种内置的方式来打印它，比如使用`options_description`或者您必须手动进行打印？显然`<<`不适用于`positional_options_description`，编译错误是：

```
error: cannot bind ‘std::ostream {aka std::basic_ostream<char>}’ lvalue to ‘std::basic_ostream<char>&&’ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T19:03:46.920

请注意，流描述仅打印出选项。它不会打印程序的名称或程序功能的实际描述。您应该手动打印作为输出消息一部分的任何位置参数：

代替

```
if (vm.count("help")) {
    cout << "Usage: options_description [options]\n";
    cout << desc;
    return 0;
} 
```

你可以很容易地说

```
if (vm.count("help")) {
    cout << "Usage: " << argv[0] << " [options] <description of positional 1> <description of positional 2> ...\n";
    cout << desc;
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T19:06:29.237

看看 boost::program_options::positional_options_description.name_for_position(i)

错误消息是无关的，我忘记了与 cpp11 有什么关系

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-11-28T08:39:27.223

这是我为自动打印位置选项所做的：

```
void printUsage(const std::string &argv0)
{
    std::ostream &os = std::cout;

    os << "Usage:" << std::endl;

    // print only basename of argv[0]
    boost::filesystem::path p(argv0);
    os << "  " << p.filename().string();

    os << " [options]";

    std::string last = "";
    int rep = 0;
    for(int i = 0; i < positional_options_description_.max_total_count(); i++)
    {
        const std::string &n = positional_options_description_.name_for_position(i);
        if(n == last)
        {
            if(!rep) os << " ...";
            if(rep++ > 1000) break;
        }
        else
        {
            os << " " << n;
            last = n;
            rep = 0;
        }
    }
    os << std::endl << std::endl;
    os << options_description_ << std::endl;
} 
```

仅当您具有可以重复无限次的重复选项（即 count 等于 -1）时才需要检查重复参数名称的逻辑，否则您可以稍微简化一下，例如将 替换`if... else if ...`为`os << " " << n;`。

使用当前 (1.68) 版本的 boost，无法判断选项描述是否是位置的，因此无需做任何事情来改进帮助，例如，不打印位置选项。

# android - NetBeans IDE 7.2.1 无法访问 java.lang 致命错误：无法在类路径或引导类路径中找到包 java.lang

> ID：14126443
> 
> 赞同：9
> 
> 时间：2013-01-02T17:31:01.290
> 
> 标签：android, netbeans, error-handling, java.lang.class

我需要有关 NetBeans 中的 android 项目的帮助。我刚刚打开了在 NetBeans 中创建的项目，我遇到了一些“无法访问 java.lang 致命错误：无法在类路径或引导类路径中找到包 java.lang”的问题 这是我的一个文件的示例，其中一个有问题：

```
package Helpers;
import PreglednikLogika.Clanak;
import android.content.Context; 
```

第一行`package Helpers;`加下划线并产生`"cannot access java.lang Fatal Error: Unable to find package java.lang in classpath or bootclasspath"`

我是 netbeans 的新手，我尝试了一些修复但没有成功。有人可以帮助我吗？我认为这是添加参考库或类似的问题......但不确定。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-07-16T03:55:45.970

该项目在 Netbeans 中有一个旧热点：

*   右键单击项目
*   特性
*   图书馆
*   更新“Java 平台”

这不是 Android 独有的，我在尝试编译一个非常古老的项目时发生了这种情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T17:58:27.983

我刚刚发现问题出在哪里。

1.  我将此路径更新为`sdk.dir=E:\\ANDROID\\Eclipse371\\android-sdk`项目文件中的正确路径`local.properties`。

2.  我更新了`project.properties`file `# Project target.target=android-8`，目标 8 我之前有 7 显然在这个版本的 SDK 中不支持。

我成功地构建了我的项目:)

# c# - 如何将单个事件从线程传递到 GUI 表单线程？

> ID：14126445
> 
> 赞同：1
> 
> 时间：2013-01-02T17:31:13.773
> 
> 标签：c#, multithreading

我是 C# 新手，无法弄清楚如何将事件从线程传递到 GUI 表单线程。任何帮助，将不胜感激。我发现的所有例子都太复杂了。我只想从一个事件开始，从处理到 GUI，让 GUI 做一些事情（现在，任何事情）。

```
namespace testEvents
{
public delegate void StuffHappenedDel( MessageEventArgs e);

public partial class Form1 : Form
{

    workerThread thread;
    int j = 0;
    public Form1()
    {
        InitializeComponent();
        thread = new workerThread();
        thread.Start();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        thread.Stop();
    }

    private void StuffHappenedDel(Object seder, EventArgs e)
    {
        j++;
    }

}

public class workerThread
{
    Thread worker;
    private bool _quit = false;

    /*  I don't think this next line is correct*/
    public event StuffHappenedDel StuffHappened;

    protected virtual void OnStuffHappened(MessageEventArgs e)
    {
        if (StuffHappened != null)
            StuffHappened( e);
    }

    public void Start()
    {
        ThreadStart start = new ThreadStart(Run);
        worker = new Thread(start);
        worker.Start();
    }

    private void Run()
    {
        int i = 0;
        while (!_quit)
        {
            Thread.Sleep(1000);
            i++;
            OnStuffHappened(new MessageEventArgs(false, "it worked!"));
            Console.WriteLine(string.Format("Slept {0} seconds.",i));
        }
        Console.WriteLine("Thread exiting");
    }
}

public class MessageEventArgs : EventArgs
{
    public MessageEventArgs(bool Error, string message)
    {
        IsError = Error;
        Message = message;
    }

    public bool IsError { get; set; }
    public string Message { get; set; }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T17:38:59.663

你必须使用这个自定义线程系统，还是可以使用[BackgroundWorkers](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)？有一个在创建 BackgroundWorker 的线程上触发`BackgroundWorkers`的事件。`ProgressChanged`

或者，如果您从 UI 线程将处理程序附加到后台事件，则工作仍然在后台线程上完成。

```
thread.StuffHappenedDel += new EventHandler<MessageEventArgs>(StuffHappenedDel); 
```

因此，您需要将数据编组到 UI 线程。一种方法是使用`BeingInvoke`.

```
private void StuffHappenedDel(object sender, MessageEventArgs e)
{
    this.myControl.BeginInvoke( new Action(
     () => 
     {
           //UI thread work (likely anything that affects UI. Heavy      
          //processing can continue on the bg thread outside this code block
     }));
} 
```

此外，您可以`if (myControl.InvokeRequired)`在更改特定控件时检查是否需要编组数据。

```
 if (this.InvokeRequired)
  {
       this.Invoke((Action)(() =>
       {
           //UI thread stuff
       }
       ));
  } 
```

**编辑以澄清**

您创建的线程对象需要将事件处理程序附加到`StuffHappenedDel`事件。为此，您可以使用类似这样的东西

```
thread.StuffHappenedDel += new EventHandler<MessageEventArgs>(StuffHappenedDel); 
```

在你打电话之前`thread.Start()`。现在，这个处理程序被称为

```
private void StuffHappenedDel(Object seder, MessageEventArgs e)
{
    j++;
} 
```

每当您的事件被触发时。

如果要对任何 UI 元素进行更改，则需要使用上述`Invoke`方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T17:45:35.467

您需要将 Form1 注册为事件的侦听器。首先，在 Form1 中添加如下方法：

```
private void thread_SuffHappened(MessageEventArgs e)
{
    MessageBox.Show("Stuff happened!");
} 
```

在 Form1 的构造函数中，像这样注册为侦听器：

```
public Form1()
{
    InitializeComponent();
    thread = new workerThread();
    thread.StuffHappened += new StuffHappenedDel(thread_StuffHappened);
    thread.Start();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T17:36:51.987

查看[后台工人类](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)。此外，您始终可以触发由 GUI 类处理的事件（尽管不在 GUI 线程上），然后调用[Invoke](http://msdn.microsoft.com/en-us/library/zyzhdc6b.aspx)

# python - 在 select 语句后提交时 pyodbc 内存泄漏

> ID：14126452
> 
> 赞同：3
> 
> 时间：2013-01-02T17:31:44.770
> 
> 标签：python, mysql, memory-leaks, pyodbc

我遇到了 pyodbc 的内存泄漏问题。我花了很多时间来追查。最后我得到了发生内存泄漏的代码。

```
import pyodbc
conn = pyodbc.connect(myconnstr)
cur = conn.cursor()
for i in range(1000000):
    print i
    cur.execute('select * from test.aa;')
    cur.fetchall()
    cur.commit() 
```

如果我运行这段代码，它会以大约 5mb/秒的速度慢慢消耗内存。但是，如果我像下面那样删除最后一行，它不会泄漏内存。关闭游标和迭代中的连接无济于事。如果发生内存泄漏，关闭游标和连接不会取回内存。

```
import pyodbc
conn = pyodbc.connect(myconnstr)
cur = conn.cursor()
for i in range(1000000):
    print i
    cur.execute('select * from test.aa;')
    cur.fetchall() 
```

但是，如果我用插入语句替换 select，它不会泄漏内存：

```
import pyodbc
conn = pyodbc.connect(myconnstr)
cur = conn.cursor()
for i in range(1000000):
    print i
    cur.execute('insert into test.aa values(1);')
    cur.commit() 
```

我尝试使用 guppy 来追踪泄漏，但它没有帮助。使用 hpy().heap() 给出以下结果：

```
Partition of a set of 286322 objects. Total size = 22433376 bytes.
 Index  Count   %     Size   % Cumulative  % Kind (class / dict of class)
     0 115601  40  8825424  39   8825424  39 str
     1  69891  24  3030424  14  11855848  53 tuple
     2   1921   1  1352588   6  13208436  59 dict (no owner)
     3   1074   0  1349016   6  14557452  65 dict of PyQt4.QtCore.pyqtWrapperType
     4    477   0  1189980   5  15747432  70 dict of module
     5  12326   4   887472   4  16634904  74 types.CodeType
     6  12178   4   730680   3  17365584  77 function
     7   1162   0   565496   3  17931080  80 dict of type
     8   1162   0   523384   2  18454464  82 type
     9   1074   0   502632   2  18957096  85 PyQt4.QtCore.pyqtWrapperType
<1140 more rows. Type e.g. '_.more' to view.> 
```

它说只占用了 22mb 内存，但实际上 python 进程目前使用了大约 500mb。

我正在使用 32 位 python 2.7.2（附带 Python(x,y) 2.7.2.3），并使用 .exe 安装程序手动安装了 pyodbc 32 位 3.0.6。哦，我正在使用 MySQL 5.5.17 32 位。

有没有人遇到过这个问题？任何意见都非常感谢。非常感谢！

哦，我忘了告诉我在选择语句之后提交的原因是我正在为 sql 操作编写一个包装器。我无法从语句中判断它是选择还是插入，因此我为每个语句获取并提交，以确保一切都已完成。如果在 select/insert/update/show 之间有一个好的方法来区分，我想我可以避免这个内存泄漏问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T17:12:51.217

我还没有找到解决方法，但确实找到了解决方法。我只在我们的一些机器上遇到了这个问题。在您的代码片段的帮助下，我能够缩小这些是哪些，然后注意到它确实发生在使用 MySQL ODBC 连接器版本 5.2 的地方，而那些它没有泄漏的地方使用5.1。这发生在 Windows 和 Linux 上。

在有泄漏的机器上降级到 5.1 似乎已经解决（或至少避免了）问题。

# node.js - 为 require() 配置多个路径

> ID：14126453
> 
> 赞同：1
> 
> 时间：2013-01-02T17:31:51.527
> 
> 标签：node.js

我应该如何为require配置多个路径？

我有以下结构：

```
application
|-server
| |-main.js
| |-myClass.js
| |-myClass.js
| |-implementationClass.js
|-common
| |-myOtherClass.js
| |-anotherClass.js
| |-yetAnotherClass.js
|-client
| |-aClientClass.js
| |-anotherClientClass.js
| |-implementationClass.js 
```

我希望能够做这样的事情：

```
require('myClass');
require('myOtherClass'); 
```

我应该如何配置多个路径？目前使用`require.paths`给我一个错误：`Error: require.paths is removed.`

我想保留这种结构，因为我的应用程序必须`.js`从共享中提供静态文件，并且我想避免共享服务器端`.js`文件。

此外，这些文件在客户端上使用了一个模拟 node.js require() 的 require() 函数，我不想使用相对路径。

问题是，当我调用`require('anotherClass')`它时，它必须在客户端和服务器上工作。所以使用相对路径可以工作，但我也有`require('implementationClass')`返回客户端实现或服务器实现的方法，当从`common`类中调用它们时，这种方法将失败。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T22:04:42.247

要求子模块的最佳实践是使用相对路径：

```
require('./server/myClass');
require('./common/myOtherClass'); 
```

如果你使用 requirejs，你可以为客户端配置别名：

```
require.config({
    baseUrl: "http://example.com/static/",
    paths: {
        "myClass": "./server/myClass",
        "myOtherClass": "./common/myOtherClass"
    }
}); 
```

我确实建议您执行上述操作，但如果您真的希望能够在全局范围内使用它们，您可以`NODE_PATH`在启动应用程序之前设置或修改环境变量。`require.paths`被删除，因为它只会引起问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T22:36:10.300

```
global.mod = function (file){
    return require (path.resolve ("../..", file));
};

var myClass = mod ("server/myClass");
var myOtherClass = mod ("common/myOtherClass"); 
```

将 require 与您自己的模块的相对路径一起使用是一种非常* 1/0 丑陋和糟糕的方法。

# xcode - 如何为多个iOS设备开发，即多个故事板？

> ID：14126455
> 
> 赞同：2
> 
> 时间：2013-01-02T17:31:59.610
> 
> 标签：xcode, ios-simulator, uistoryboard

我目前正在为 iPhone 3GS 开发一个应用程序。部署目标设置为 5.1，我创建了一个包含大量转场和场景的丰富故事板。昨晚我有一个想法，我想让该应用程序可用于 iPad、iPhone 4 和 iPhone 5。我决定为不同的屏幕尺寸/分辨率创建一个单独的故事板。现在我不确定这是否是最佳实践，因为我最近才开始阅读 SO 上的弹簧和支柱，所以我不太了解它，但为了我的缘故，我只是想推出一个不同的故事板当应用程序完成启动时。然而，这种预期的效果并没有发生。

**AppDelegate.m**

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    // Override point for customization after application launch.
    // ViewControllerWelcome *viewControllerWelcome = (ViewControllerWelcome *)[[ViewControllerWelcome alloc]init];

//    NSManagedObjectContext *context = (NSManagedObjectContext *) [self managedObjectContext];
//    if (!context) {
//        NSLog(@"\nCould not create *context for self");
//    }

    //[viewControllerWelcome setManagedObjectContext:context];

    // Do I need to declare my view controllers here?

    // Pass the managed object context to the view controller.

    CGSize iOSDeviceScreenSize = [[UIScreen mainScreen] bounds].size;

    if (iOSDeviceScreenSize.height == 480)
    {
        // Instantiate a new storyboard object using the storyboard file named iPhoneLegacy
        UIStoryboard *iPhoneLegacy = [UIStoryboard storyboardWithName:@"iPhoneLegacy" bundle:nil];

        // Instantiate the initial view controller object from the storyboard
        UIViewController *ViewControllerWelcome = [iPhoneLegacy instantiateInitialViewController];

        // Instantiate a UIWindow object and initialize it with the screen size of the iOS device
        self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

        // Set the initial view controller to be the root view controller of the window object
        self.window.rootViewController = ViewControllerWelcome;

        // set the window object to be the key window and show it
        [self.window makeKeyAndVisible];
    }

    if (iOSDeviceScreenSize.height == 968)
    {
        // Instantiate a new storyboard object using the storyboard file named iPhone4
        UIStoryboard *iPhone4 = [UIStoryboard storyboardWithName:@"iPhone4" bundle:nil];

        UIViewController *ViewControllerWelcome = [iPhone4 instantiateInitialViewController];
        self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
        self.window.rootViewController  = ViewControllerWelcome;
        [self.window makeKeyAndVisible];
    }

    // iPhone 5 1136 x 640

    // iPad Legacy 1024 x 768

    return YES;
} 
```

当我尝试测试以查看模拟器中是否正在加载不同的故事板文件时，模拟器只会加载 iPhoneLegacy 故事板。

此代码是否仅适用于物理设备，我是否需要模拟器的单独代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T17:41:37.610

首先，**删除你的额外故事板！**iPhone 只需要一个，iPad 只需要一个。

有一种简单的方法可以为所有 iPhone/iPod Touch 尺寸制作一个故事板。

1.  iPhone 屏幕尺寸（包括 iPhone 5）只保留一个故事板。
2.  为所有图像制作一个@2x 文件。
3.  为了在 3.5 和 4 英寸之间切换，Apple 在右下角提供了一个按钮，看起来像一个带有向内或向外箭头的矩形——该按钮将在 3.5 和 4 英寸屏幕尺寸之间切换。

而已！实际上不需要任何代码来为每个 iPhone/iPod Touch 制作一个故事板。

* * *

对于 iPad，您将需要创建一个为 iPad 制作的新故事板，并且您需要更新您的 UI 代码以确保它与 iPhone 和 iPad 的屏幕尺寸兼容。同样，确保为 iPad 制作@2x 图像大小。

# oracle - 使用 EF 5.0 返回缺少多对多记录的对象

> ID：14126458
> 
> 赞同：0
> 
> 时间：2013-01-02T17:32:05.067
> 
> 标签：oracle, entity-framework, many-to-many, left-join, ora-00904

鉴于下面的架构，我正在尝试构建一个 EF 查询，该查询返回缺少所需表单的联系人。每个联系人都有一个与 FormTypes 集合相关的 ContactType。每个联系人都需要至少有一个表单（在 ContactForm 中）与其 ContactType 相关的 FormTypes。

EF 从下面的 linq 查询生成的查询适用于 Sql Server，但不适用于 Oracle。

```
var query = ctx.Contacts.Where (c => c.ContactType.FormTypes.Select (ft => ft.FormTypeID)
                            .Except(c => c.Forms.Select(f => f.FormTypeID)).Any()); 
```

我正在重构一个数据层，以便所有适用于 Sql Server 的 EF 查询也将适用于使用 Devart 的 dotConnect 数据提供程序的 Oracle。

Oracle 抛出的错误是 ORA-00904: "Extent1"."ContactID": invalid identifier。

问题是 Oracle 显然不支持从 2 级或更深的嵌套子查询中的查询引用表列。Oracle 抛出的行是在引用“Extent1”.“ContactID”的除外（或减号）子查询中。“Extent1”是在查询顶层定义的联系人的别名。[这是 Devart 对 Oracle 限制的解释](http://www.devart.com/dotconnect/oracle/faq.html#q56)。

我为许多查询解决此问题的方法是重写它们以使用 SelectMany() 和在某些情况下使用 Join() 将表之间的关系从 Where() 谓词中移到查询的主体中。这往往会使发送到数据库服务器的查询变得扁平化，并最大限度地减少或消除 EF 产生的子查询。 [这是使用左外连接解决的类似问题](https://stackoverflow.com/questions/14047129/how-to-query-a-many-to-many-for-the-absence-of-records-using-ef5)。

"Extent1"."ContactID" 列存在，EF 和 Devart 生成的查询的命名语法不是问题。

任何关于如何重写此查询的想法将不胜感激。目标是一个查询，该查询返回联系人缺少适用于 Oracle 和 Sql Server 的联系人的 ContactType 所需的 FormType 表单。

![在此处输入图像描述](../Images/230e4ba1107d361f7ef84e41b9909e55.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T21:23:48.927

以下实体框架查询返回在针对 Sql Server 和 Oracle 进行查询时缺少 ContactType 所需的联系人的所有 ContactID。

```
var contactNeedsFormTypes = 
       from c in Contacts 
       from ft in c.ContactType.FormTypes
       select new { ft.FormTypeID, c.ContactID};

var contactHasFormTypes = 
       from c in Contacts
       from f in c.Forms
       select new { c.ContactID, f.FormTypeID};

var contactsMissingFormTypes = 
       from n in contactNeedsFormTypes
       join h in contactHasFormTypes
          on new {n.ContactID, n.FormTypeID} equals new {h.ContactID, h.FormTypeID}
              into jointable
              where jointable.Count()==0
select n.ContactID;

contactsMissingFormTypes.Distinct(); 
```

# multithreading - 最快的数据存储方式

> ID：14126465
> 
> 赞同：0
> 
> 时间：2013-01-02T17:32:28.823
> 
> 标签：multithreading, storage, data-processing

我有一个生成一些输出的服务器，如下所示：http://192.168.0.1/getJPG=[ID]

我必须通过 ID 1 到 20M。

我看到大部分延迟都在存储文件中，目前我确实将每个请求结果作为一个单独的文件存储在一个文件夹中。格式为：[ID].jpg

服务器响应很快，生成器服务器真的很快，但我无法快速处理接收到的数据。

存储数据以供以后处理的最佳方式是什么？

我可以做所有类型的存储，比如在数据库中，比如在单个文件中，然后再解析大文件等。

我可以用 .NET、PHP、C++ 等编写代码。对编程语言没有限制。请指教。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T00:01:58.667

因此，您正在从服务器下载 2000 万个文件，而将它们保存到磁盘的速度是一个瓶颈？如果您通过 Internet 访问服务器，那就很奇怪了。也许您正在通过本地网络下载，或者“服务器”甚至在本地运行。

有 2000 万个文件要保存，我确信它们不会全部放入 RAM，因此在内存中缓冲数据也无济于事。如果将数据写入磁盘的最大速度确实是一个瓶颈，那么使用 MS SQL 或任何其他 DB 不会改变任何东西。数据库没有什么“魔法”——它受到磁盘性能的限制，就像任何其他程序一样。

听起来您最好的选择是使用多个磁盘。并行下载多个文件，并在收到每个文件后，以循环方式将其写入不同的磁盘。您拥有的磁盘越多越好。使用多线程或非阻塞 I/O，因此下载和磁盘写入都同时发生。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T22:24:03.413

可能它有助于按顺序访问磁盘。这是一个简单的技巧：将所有传入的文件流式传输到一个未压缩的 ZIP 文件（有相应的库）。这使得所有 IO 都是顺序的，并且只有一个文件。您还可以在大约 10000 张图像后拆分一个新的 ZIP 文件，以保持单个 ZIP 较小。

您可以稍后通过从 ZIP 文件流式传输来读取所有文件。那里的开销很小，因为它是未压缩的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T08:09:22.603

听起来您正在尝试编写一个尽可能快地下载尽可能多内容的应用程序。您应该知道，当您这样做时，人们很可能会注意到，因为这会占用大量带宽和其他资源。

由于这是 Windows/NTFS，因此您需要记住一些事项： - 一个文件夹中的文件不要超过 2k。- 尽可能使用异步/缓冲写入。- 分布在尽可能多的磁盘上以获得最佳 I/O 性能。

没有提到但有些重要的一件事是文件大小。由于看起来您正在获取 JPEG，因此我将假设平均文件大小约为 50k。

我最近使用 .Net 4.0 用无尽的 ~1KB 文本文件流做了类似的事情，并且能够使本地网络上的 100mbit 网络控制器饱和。我使用 TaskFactory 生成 HttpWebRequest 线程以将数据下载到内存流。我将它们缓冲在内存中，因此我不必将它们写入磁盘。我推荐的基本方法是类似的——分离每个发出请求的线程，获取响应流，并将其写入磁盘。最难的部分是生成顺序文件夹和文件名。您希望尽快完成此操作，使其成为线程安全的，并在内存中进行簿记，以避免因对目录内容的不必要调用而撞击磁盘。

我不会担心尝试对您的写入进行排序。有足够多的 OS/NTFS 层会尝试为您执行此操作。您应该立即使某些管道饱和。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-02T21:53:23.367

为了有效地做到这一点，我会多线程你的应用程序（c++）。

您的应用程序的主线程将发出这些网络请求并将它们推送到 std::list 的后面。这就是您的主应用程序线程将要做的所有事情。

产生（并保持运行，不要重复产生）一个 pthread（我首选的线程方法，即使在 Windows 上......）并将其设置为在 while 循环中检查相同的 std::list。在循环中，确保检查列表的大小，如果有要处理的事情，将最前面的项目从列表中弹出（这些可以在不同的线程中完成，而不需要互斥锁......大多数时候。 ..) 并将其写入磁盘。

这将允许您在内存中对响应进行排队，同时将文件异步保存到磁盘。如果您的服务器真的如您所说的那样快，那么您可能会耗尽内存。然后，如果要处理的项目数量超过某个阈值，我将实施一些“等待”，但这只会比串行执行好一点。

“提高”速度的真正方法是让许多工作线程（每个都有自己的 std::list 和“智能”推送到具有最少项目的列表或一个 std::list 与互斥锁共享）处理文件。如果你有一台带有多个硬盘的多核机器，这将大大提高将这些文件保存到磁盘的速度。

* * *

另一种解决方案是将文件的保存分流到许多不同的计算机上（如果当前计算机上的磁盘数量限制了写入）。通过使用诸如 ZMQ/0MQ 之类的消息传递系统，您将能够非常轻松地将文件保存到不同的系统（以 PULL 方式设置），并且可以访问比当前更多的硬盘驱动器一台机器。使用 ZMQ 使得循环式消息传递变得微不足道，因为内置了扇出架构，并且实际上只需几分钟即可实现。

* * *

另一个解决方案是创建一个 ramdisk（在 linux 上很容易在本地完成，对于 windows ......我用过[这个](http://en.wikipedia.org/wiki/List_of_RAM_drive_software#ImDisk)）。这将允许您使用任意数量的编写器并行写入文件，而不会出现问题。然后，您需要确保在重新启动之前将这些文件复制到真实的存储位置，否则您会丢失文件。但是在运行过程中，您可以实时存储文件而不会出现问题。

# java - 如何更改 JavaFX 中的突出显示颜色？

> ID：14126468
> 
> 赞同：9
> 
> 时间：2013-01-02T17:32:43.320
> 
> 标签：java, css, javafx-2, javafx

如何更改 JavaFX 中的突出显示颜色？通常它是带有渐变的蓝色，但我想要绿色突出显示。我尝试了以下方法：

```
.root{
    -fx-shadow-highlight-color: #CCFF99;
} 
```

感谢帮助！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-02T17:42:52.083

查看**caspian.css** (JavaFX 2) 或**modena.css** (JavaFX 8)

```
.root {
    /* A bright blue for highlighting/accenting objects.  For example: selected
     * text; selected items in menus, lists, trees, and tables; progress bars;
     * default buttons.
     */
    -fx-accent: #0093ff;

    /* A bright blue for the focus indicator of objects. Typically used as the
     * first color in -fx-background-color for the "focused" pseudo-class. Also
     * typically used with insets of -1.4 to provide a glowing effect.
     *
     * TODO: should this be derived from -fx-accent?
     */
    -fx-focus-color: #0093ff;
} 
```

根据用途更改这些颜色。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-02-14T11:34:34.000

我认为 Uluk Biy 已经很好地回答了这个问题。

但现实情况是使用 CSS 进行样式设置不会覆盖 -fx-focus-color:#0093ff，而是会重叠。如果您使用 -fx-focus-color: red ，它将与默认的蓝色混合并显示类似灰色的颜色。css 属性 -fx-accent 没有问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-08-05T22:15:29.683

您也可以`-fx-highlight-fill`在`text-area`类选择器上使用。

```
.text-area {
    -fx-highlight-fill: green;
} 
```

# c# - 是否有将对象转换为小数的单行方式？

> ID：14126473
> 
> 赞同：7
> 
> 时间：2013-01-02T17:32:52.527
> 
> 标签：c#, casting, decimal

`decimal?`是否有将对象转换为数据类型的单行方式？

我的代码看起来像这样：

```
foreach(DataRow row in dt.Rows)
{
    var a = new ClassA()
    {
         PropertyA = row["ValueA"] as decimal?,   
         PropertyB = row["ValueB"] as decimal?,
         PropertyC = row["ValueC"] as decimal?
    };

    // Do something

} 
```

但是，将对象转换为 a`decimal?`并不能按我期望的方式工作，并且每次都返回 null。

数据行是从 Excel 文件中读取的，因此每行中对象的数据类型要么是 a（`double`如果有值），要么是 null（`string`如果它留空）。

执行此转换的[建议方法](https://stackoverflow.com/a/527464/302677)是使用`decimal.TryParse`，但是我不想为类上的每个小数属性创建一个临时变量（我的实际类中有大约 7 个属性是小数，而不是 3 个）。

```
decimal tmpvalue;
decimal? result = decimal.TryParse((string)value, out tmpvalue) ?
                  tmpvalue : (decimal?)null; 
```

有没有办法可以`decimal?`在一行中将潜在的空值转换为 a？

[我尝试了此处](https://stackoverflow.com/a/527476/302677)发布的答案，但是它似乎没有工作，并且也给了我一个`null`值，因为`row["ValueA"] as string`返回`null`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T17:40:01.483

你最好的选择是创建一个扩展方法。这就是我使用的，尽管您可以调整它以返回 a `decimal?`。

```
public static class ObjectExtensions
{
    public static decimal ToDecimal(this object number)
    {
        decimal value;
        if (number == null) return 0;
        if (decimal.TryParse(number.ToString().Replace("$", "").Replace(",", ""), out value))
            return value;
        else
            return 0;
    }
    public static decimal? ToNullableDecimal(this object number)
    {
        decimal value;
        if (number == null) return null;
        if (decimal.TryParse(number.ToString().Replace("$", "").Replace(",", ""), out value))
            return value;
        else
            return null;
    }

} 
```

然后，您可以通过调用`.ToDecimal()`任何对象来使用它，就像调用`.ToString()`.

它不是一行，但它只是在使用它的点上的单个函数调用，并且它是非常可重用的。

*编辑添加可空版本*

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-02T17:43:12.340

> 提供它读取为双精度的值，否则我认为它是一个字符串

好的，所以这使事情变得复杂，因为有时你需要解析它，有时你不需要。

我们要做的第一件事是检查它是否已经是 a`double`并转换它，因为转换比解析便宜得多；解析很昂贵。

鉴于这个逻辑将是不平凡的，它属于它自己的方法：

```
public static deciaml? getDecimal(object rawValue)
{
    decimal finalValue;

    double? doubleValue = rawValue as double?;
    if(doubleValue.HasValue)
        return (decimal) doubleValue.Value;
    else if(decimal.TryParse(rawValue as string, out finalValue))
    {
        return finalValue;
    }
    else
    {
        return null;//could also throw an exception if you wanted.
    }
} 
```

如果您知道它始终是双精度值，并且您永远不会想要字符串值，那么它会更容易。在这种情况下，您首先需要将其转换为双精度类型，因为它是真实类型，然后您可以轻松地将其转换为小数：

```
PropertyA = (decimal?)(row["ValueA"] as double?); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T17:40:24.037

`decimal.TryParse`是要走的路。只需创建一个辅助方法并返回值。您提到的代码几乎相同：

```
private decimal? convertToNullableDecimal(object value){
  decimal tmpvalue;
  return decimal.TryParse((string)value, out tmpvalue) ? tmpvalue : (decimal?)null;
} 
```

**更新**

这假设您需要一个可以为空的小数。否则按照其他答案中的建议进行操作，请使用内置方法：`Convert.ToDecimal`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T17:47:23.533

你可以试试[Decimal.Parse](http://msdn.microsoft.com/en-us/library/cafs243z.aspx)方法。

```
public static decimal ToDecimal(this string value){

    try
    {
        return Decimal.Parse(value);
    }   
    catch (Exception)
    {
        //  catch FormatException, NullException
        return 0;
    }
}

//  use
PropertyA = row["ValueA"].ToString().ToDecimal();
PropertyB = row["ValueB"].ToString().ToDecimal();
PropertyC = row["ValueC"].ToString().ToDecimal(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-02T18:14:25.477

`Convert.ToDecimal(object)`几乎做你想要的。它将正确转换双精度值（无需先转到字符串），还可以处理其他可以转换为十进制的类型。它做得不好的一件事是空转换（或将 String.Empty 转换为空）。我会尝试使用扩展方法来处理。

```
public static class ObjectToDecimal
{
  public static decimal? ToNullableDecimal(this object obj)
  {
    if(obj == null) return null;
    if(obj is string && String.Empty.Equals(obj)) return null;
    return Convert.ToDecimal(obj);
  }
} 
```

请记住，这`Convert.ToDecimal(object)`可能会引发异常，因此您必须注意这一点。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-02T17:41:01.337

尝试类似的东西

```
Func<object, decimal?> l_convert =
    (o) => decimal.TryParse((o ?? "").ToString(), out tmpvalue) ? tmpvalue : (decimal?)null;

var a = new ClassA()
{
     PropertyA = l_convert(row["ValueA"]),   
     PropertyB = l_convert(row["ValueB"]),
     PropertyC = l_convert(row["ValueC"])
}; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-02T17:42:36.023

希望这可以帮助

```
decimal temp;
foreach(DataRow row in dt.Rows)
{
    var a = new ClassA()
    {
         PropertyA = Decimal.TryParse(row["ValueA"].ToString(), out temp) ? Convert.ToDecimal(row["ValueA"].ToString()) : (Decimal?) null,   
         ....
    };

    // Do something

} 
```

# objective-c - Objective C - 二次方程求解器

> ID：14126474
> 
> 赞同：1
> 
> 时间：2013-01-02T17:33:07.660
> 
> 标签：objective-c, ios, equation, solver, quadratic

所以，我正在制作一个解决二次方程的应用程序。主界面只是要求用户输入 A、B 和 C 的值。问题是，我没有得到正确的答案。这是代码：

```
NSString *intStringa = [NSString stringWithFormat:@"%@", a.text];
int aa = [intStringa intValue];
NSString *intStringb = [NSString stringWithFormat:@"%@", b.text];
int bb = [intStringb intValue];
NSString *intStringc = [NSString stringWithFormat:@"%@", c.text];
int cc = [intStringc intValue];
double d = ( -(bb) + ( (bb)^2 - (4*aa*cc) ) ^0,5 ) / (2*aa);
double e = ( -(bb) - ( (bb)^2 - (4*aa*cc) ) ^0.5 ) / (2*aa);
label1.text = [NSString stringWithFormat:@"%lf", d];
label2.text = [NSString stringWithFormat:@"%lf", e]; 
```

有任何想法吗？谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T17:40:44.393

利用 ：

root没有`^`运算符。使用`sqrt`或`pow(base,exp)`。

```
double d = ( -bb + sqrt( bb*bb - 4*aa*cc ) ) / (2*aa);
double e = ( -bb - sqrt( bb*bb - 4*aa*cc ) ) / (2*aa); 
```

或者，

```
double d = ( -bb + pow(( bb*bb - 4*aa*cc ), 0.5) ) / (2*aa);
double e = ( -bb - pow(( bb*bb - 4*aa*cc ), 0.5) ) / (2*aa); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T17:35:29.527

您不能`^`在 C 和相关语言（C++、Objective-C 等）中使用求幂 - 它是按位 XOR 运算符。

改变：

```
double d = ( -(bb) + ( (bb)^2 - (4*aa*cc) ) ^0,5 ) / (2*aa);
double e = ( -(bb) - ( (bb)^2 - (4*aa*cc) ) ^0.5 ) / (2*aa); 
```

至：

```
#include <math.h>

...

double d = - (bb + sqrt(bb * bb - 4 * aa * cc)) / (2 * aa);
double e = - (bb - sqrt(bb * bb - 4 * aa * cc)) / (2 * aa); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T17:37:37.527

C中没有幂`^`运算符。你必须使用`pow(b,2)`or 简单地`b*b`。

你为什么要使用`stringWithFormat`？只需使用`[a.text intValue]`.

```
int aa = [a.text intValue];
int bb = [b.text intValue];
int cc = [c.text intValue];
double d = (-bb + sqrt(bb*bb - 4*aa*cc)) / (2.0*aa);
double e = (-bb - sqrt(bb*bb - 4*aa*cc)) / (2.0*aa);
label1.text = [NSString stringWithFormat:@"%lf", d];
label2.text = [NSString stringWithFormat:@"%lf", e]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T17:39:08.087

您有几个问题：您使用`^`的是幂运算符；它不是。您在“指数”之一中也有错字：`0,5`而不是`0.5`. 我会把你的方程式写成：

```
double d = ( -bb + sqrt( bb*bb - 4*aa*cc ) ) / (2*aa);
double e = ( -bb - sqrt( bb*bb - 4*aa*cc ) ) / (2*aa); 
```

# c# - 如何知道 WPF 中 UI 调度程序队列的消息

> ID：14126475
> 
> 赞同：2
> 
> 时间：2013-01-02T17:33:13.603
> 
> 标签：c#, .net, wpf, multithreading, dispatcher

我的应用程序中的 UI 调度程序有时会很忙，因为它上面有调用和开始调用，如何知道我的 UI 调度程序上的项目？有什么工具或vs插件，或者有什么东西可以帮助我调试吗？

# html - 微数据和词汇

> ID：14126483
> 
> 赞同：0
> 
> 时间：2013-01-02T17:33:38.893
> 
> 标签：html, webserver, microdata

我正在开发论坛软件，并希望使用 HTML5 和微数据（微数据的新手）。我正在考虑向软件本身添加词汇，而不是链接到模式或数据词汇或其他任何东西。

再一次，我想知道这可能对服务器性能的影响，被所有那些爬取词汇的蜘蛛击中。

您对此有何看法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T01:14:54.533

如果没有（流行的）现有词汇可以使用，您应该只创建一个新词汇。

[Dublin Core](http://en.wikipedia.org/wiki/Dublin_Core)、[FOAF](http://en.wikipedia.org/wiki/FOAF_%28software%29)和[SIOC](http://en.wikipedia.org/wiki/Semantically-Interlinked_Online_Communities)是几乎每个论坛都可以使用的流行的。但是，我不确定这些是否可以与微数据一起使用（我想应该可以，但我不太了解微数据）。但他们使用 RDFa，这与微数据和 W3C 推荐（如 HTML）非常相似。RDFa[也可以在 HTML5 中使用](http://en.wikipedia.org/wiki/RDFa#HTML_5_.2B_RDFa_1.1_example)。如果是 RDF 的新手，您可能希望首先使用[RDFa Lite](http://www.w3.org/TR/rdfa-lite/)（它预定义了 DC、FOAF 和 schema.org 词汇表的前缀）。

> 我想知道这可能对服务器性能的影响，被所有那些爬取词汇的蜘蛛击中。

我认为没有多少（如果有的话）微数据爬虫会尝试*访问*词汇表 URI。在大多数情况下，他们不会在那里找到可以使用的任何内容，因为词汇表 URI 在大多数情况下仅用作标识符。即使出现此类爬虫，您也几乎不会注意到任何性能影响，因为它们可能无论如何都会缓存它。

# c# - ListView 中是否有可能像 ListBox 中一样使用 SetSelected？

> ID：14126485
> 
> 赞同：0
> 
> 时间：2013-01-02T17:33:46.583
> 
> 标签：c#, winforms

我的应用程序有 ListView，在我的 foreach 循环中，我将文件添加到我的 ListView 中，并希望选项显示当前文件标记为，在使用 ListView 之前，我尝试 ListBox 并成功使用 SetSelected。

我试试看 `listView.Items[listView.Items.Count - 1].Selected = true;`，这标记了我的 ListView 中的所有文件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T17:45:36.763

确保您在循环之外设置选择。如果您在循环中执行此操作，您将看到所有项目都被选中，因为随着您将项目添加到列表视图，列表视图项目计数正在增加：

```
for (int i; i<someList.Count; i++)
{
    // Fill the listview here
}
listView.Items[listView.Items.Count - 1].Selected = true; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T18:13:14.467

`listView.Items[listView.Items.Count - 1].Selected = true;`正如 John Koerner 所说，U 可能设置错误。如果您有理由始终选择循环中的最后一项，您可以在再次选择之前删除所有选择。

```
 for (int i = 0; i < 5; i++)
    {
        foreach (int index in listView1.SelectedIndices)
        {
            listView1.Items[index].Selected = false;
        }
        listView1.Items.Add(i.ToString());
        listView1.Items[listView1.Items.Count - 1].Selected = true;
    } 
```

或者如果多选没有用，你可以设置`listView1.MultiSelect = false;`

# java - 无法从 Java 应用程序连接到远程 FileZilla ftp 服务器

> ID：14126487
> 
> 赞同：1
> 
> 时间：2013-01-02T13:35:06.283
> 
> 标签：java, filezilla

我有一个在 Windows 机器上运行的远程 FileZilla ftp 服务器。ftp 服务器需要**Explicit FTP over TLS**。协议是 FTP 而不是 SFTP。我无法更改此服务器的设置。我可以使用 filezilla gui 客户端连接到这个服务器就好了。

现在我需要使用 org.apache.commons.net 通过 java 应用程序连接到 FileZilla 服务器：

```
 private void connect(String host, String user, String password) {
    try {
      FTPSClient ftpClient = new FTPSClient(false);
      ftpClient.connect(host);
      int reply = ftpClient.getReplyCode();
      if (FTPReply.isPositiveCompletion(reply)) {
        // Login
        if (ftpClient.login(user, password)) {

          // Set protection buffer size
          ftpClient.execPBSZ(0);
          // Set data channel protection to private
          ftpClient.execPROT("P");
          // Enter local passive mode
          ftpClient.enterLocalPassiveMode();
          ftpClient.logout();
        } else {
          System.out.println("FTP login failed");
        }
        // Disconnect
        ftpClient.disconnect();
      } else {
        System.out.println("FTP connect to host failed");
      }
    } catch (IOException ioe) {
      ioe.printStackTrace();
      System.out.println("FTP client received network error");
    }
  } 
```

但是当我运行上面的代码时，我得到：

```
javax.net.ssl.SSLHandshakeException: java.security.cert.CertificateExpiredException: NotAfter: Thu Aug 30 13:31:23 CEST 2012
    at com.sun.net.ssl.internal.ssl.Alerts.getSSLException(Alerts.java:174)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.fatal(SSLSocketImpl.java:1764) 
```

到那个时刻：

```
 ftpClient.connect(host); 
```

关于如何使用例如 java 代码连接到 Filezilla 服务器的任何想法。org.apache.commons.net ?

编辑：我现在尝试更改为 FTPClient （即使这确实允许我设置**Explicit TLS**）：

```
 FTPClient ftpClient = new FTPClient();
  // Connect to host
  ftpClient.connect(host);
  int reply = ftpClient.getReplyCode();
  if (FTPReply.isPositiveCompletion(reply)) {

    // Login
    boolean login = ftpClient.login(user, password);
    if (login) {
      ftpClient.enterLocalPassiveMode();
      ftpClient.logout();
    } else {
      System.out.println("FTP login failed");
    } 
```

但随后 login=false 我得到：“FTP 登录失败”。如果我调试 apache 源，我看到回复代码是：530 =“未登录”：[http ://en.wikipedia.org/wiki/List_of_FTP_server_return_codes](http://en.wikipedia.org/wiki/List_of_FTP_server_return_codes)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T15:30:41.547

创建 SSLContext 解决了这个问题：

```
 SSLContext sslContext = SSLContext.getInstance("TLS");
  TrustManager tm = new X509TrustManager() {
    public void checkClientTrusted(X509Certificate[] chain, String authType) throws CertificateException {
    }

    public void checkServerTrusted(X509Certificate[] chain, String authType) throws CertificateException {
    }

    public X509Certificate[] getAcceptedIssuers() {
      return null;
    }
  };
  sslContext.init(null, new TrustManager[] { tm }, null);
  FTPSClient ftpsClient = new FTPSClient(sslContext); 
```

# java - Java 日期实用程序逻辑

> ID：14126495
> 
> 赞同：-4
> 
> 时间：2013-01-02T17:34:26.123
> 
> 标签：java

我正在围绕 java 日历编写逻辑。我有以下要求。

*   在包含一个月 4 周的星期日历上工作。需要为一个月选择星期几。如果选定的工作日已过，则必须选择下个月的同一工作日。
*   如果一个月从星期六开始，那么第二个星期一将是该月的 10 号而不是 3 号。

请让我知道java中是否有任何实用程序可以实现上述功能，或者任何示例代码将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T17:48:05.697

看一眼[JodaTime](http://joda-time.sourceforge.net/)，它是 Java 唯一好的 Date API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T17:37:05.893

查看[`DateUtils`](http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/time/DateUtils.html)Apache`commons-lang`库中的类。`Calendar`它包含一些使用和的有用方法`Date`。

# php - PHP Linux + Windows - 共享和权限

> ID：14126498
> 
> 赞同：2
> 
> 时间：2013-01-02T17:34:46.483
> 
> 标签：php, linux, windows, permissions, samba

我们有一个将数据写入 Linux 节点的 Windows 主实例，目前运行良好。在 windows 上运行的 PHP 文件可以使用一个简单的脚本来写入 linux 机器，如下所示：

```
file_put_contents('\\\\hostname\\share\\testfile.txt', 'testing123'); 
```

linux节点存储了windows php用户，并允许写入文件。但是，我们希望能够在 linux 机器上做同样的事情，并写入 windows 实例上的共享文件夹。与上面相同的行，但使用 windows 主机和共享，仍然返回 true，但实际上并未创建文件。

*   如果它不起作用，为什么该行返回 true？这使得调试和测试错误变得非常困难。
*   我们怎样才能让脚本工作？是在linux中挂载windows共享的解决方案吗？这似乎不是一个合适的解决方案，因为我们可能会更改 Windows 共享或添加新的共享，我们不想在每个 linux 实例上继续挂载和卸载共享。

我们已将 linux 用户添加到 windows 共享权限，但它似乎不起作用。

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T17:45:38.417

我正在处理的一个项目只是挂载 Windows 共享。我们在 /etc/fstab 文件中有条目，这些条目会在机器启动时自动挂载共享。例如：

```
//alpha/inetpub  /mnt/alpha  cifs  credentials=/root/credentials,_netdev,file_mode=0644,dir_mode=0755,uid=1000,gid=1000,rw  0  0
//beta/inetpub   /mnt/beta   cifs  credentials=/root/credentials,_netdev,file_mode=0644,dir_mode=0755,uid=1000,gid=1000,rw  0  0 
```

在我们的环境中，Windows 共享永远不会更改名称。我们的 Linux 实例不需要访问所有 Windows 共享，因此我们只需为需要访问任何新共享的实例更新 fstab 文件。

凭证文件是一个简单的文本文件，格式如下：

```
username=SOME_USERNAME
password=THE_PASSWORD_FOR_USERNAME 
```

当用户可能在没有访问权限的情况下查看其他脚本/文件时，这只是保持用户名/密码对安全的一种简单方法`root`。

# flash - 找不到类 flash.media::CameraRoll (Flash Builder 4.7)

> ID：14126501
> 
> 赞同：0
> 
> 时间：2013-01-02T17:34:53.973
> 
> 标签：flash, air, flash-builder

当我尝试在**Flash Builder 4.7**中编译 Flash Professional AIR for Mobile 项目时，我收到此错误：

```
VerifyError: Error #1014: Class flash.media::CameraRoll could not be found 
```

我在 Adob​​e 的论坛上多次询问过这个问题，但从未得到回应。

**我在4.6**中也遇到了这个错误。我不知道我是否在 FB 设置中遗漏了什么。该项目在 Flash Professional CS6 中编译良好。

# ruby-on-rails - 过滤 Mongoid 子文档中的多个字段

> ID：14126502
> 
> 赞同：0
> 
> 时间：2013-01-02T17:35:04.937
> 
> 标签：ruby-on-rails, mongoid

我想查询具有包含两个值的子文档的文档。

我有一个主文档 Account，其中不包含或包含多个销售子文档。每个销售都有一个 sale_price 和 sale_date。我只想要在过去 4 年内具有 sale_price 大于 0 和 sale_date 的销售子文档的帐户。

这是我尝试过的；

```
Account.and("sales.sale_date" => {"$gt" => Date.today - 4.years}, "sales.sale_price" => {"$gt" => 0}) 
```

这将返回在过去 4 年中具有“任何”销售额并且具有 sale_price > 0 的“任何”销售额的帐户。我只希望帐户在同一个文档上具有两个条件都为真的销售。
有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T18:56:39.013

正如经常发生的那样，在提出问题后进行更多调查会找到解决方案。elem_match 方法似乎可以满足我的需要。
这就是我想出的；

```
Account.elem_match(sales: {:sale_date.gt => Date.today - 4.years, :sale_price.gt => 0}) 
```

# internet-explorer - 安装 Clickonce 应用程序时如何使用我的代理凭据？

> ID：14126504
> 
> 赞同：2
> 
> 时间：2013-01-02T17:35:08.417
> 
> 标签：internet-explorer, proxy, clickonce

我正在使用经过身份验证的代理连接到 Internet。代理设置列在控制面板中，我第一次连接到网站时会看到一个用户/密码对话框。

虽然它通常工作正常，但当我启动需要从 Internet 下载文件的 Clickonce 应用程序时，我收到此错误：

```
Application download did not succeed. Check your network connection, or contact your system administrator or network service provider. 
```

我进入了日志文件，发现了这个：

```
ERROR DETAILS
    Following errors were detected during this operation.
    * [22/12/2012 15:19:25] System.Deployment.Application.DeploymentDownloadException (Unknown subtype)
        - Downloading http://#######.###/########.application did not succeed.
        - Source: System.Deployment
        - Stack trace:
            at System.Deployment.Application.SystemNetDownloader.DownloadSingleFile(DownloadQueueItem next)
            at System.Deployment.Application.SystemNetDownloader.DownloadAllFiles()
            at System.Deployment.Application.FileDownloader.Download(SubscriptionState subState)
            at System.Deployment.Application.DownloadManager.DownloadManifestAsRawFile(Uri& sourceUri, String targetPath, IDownloadNotification notification, DownloadOptions options, ServerInformation& serverInformation)
            at System.Deployment.Application.DownloadManager.DownloadDeploymentManifestDirectBypass(SubscriptionStore subStore, Uri& sourceUri, TempFile& tempFile, SubscriptionState& subState, IDownloadNotification notification, DownloadOptions options, ServerInformation& serverInformation)
            at System.Deployment.Application.DownloadManager.DownloadDeploymentManifestBypass(SubscriptionStore subStore, Uri& sourceUri, TempFile& tempFile, SubscriptionState& subState, IDownloadNotification notification, DownloadOptions options)
            at System.Deployment.Application.ApplicationActivator.PerformDeploymentActivation(Uri activationUri, Boolean isShortcut, String textualSubId, String deploymentProviderUrlFromExtension, BrowserSettings browserSettings, String& errorPageUrl)
            at System.Deployment.Application.ApplicationActivator.ActivateDeploymentWorker(Object state)
        --- Inner Exception ---
        System.Net.WebException
        - The remote server returned an error: (407) Proxy Authentication Required.
        - Source: System
        - Stack trace:
            at System.Net.HttpWebRequest.GetResponse()
            at System.Deployment.Application.SystemNetDownloader.DownloadSingleFile(DownloadQueueItem next) 
```

我已将凭据添加到用户设置中的“我的凭据”部分，但它仍然不起作用。

有没有办法通过经过身份验证的代理下载 Clickonce 应用程序的文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T17:42:12.437

谷歌搜索“clickonce 中的代理凭据”并过滤过去一年内的结果，我发现了这个解决方法。

如何使用带有代理身份验证的 ClickOnce：[http ://www.0x00.to/post/2012/12/31/How-to-use-ClickOnce-with-proxy-authentication](http://www.0x00.to/post/2012/12/31/How-to-use-ClickOnce-with-proxy-authentication)

**编辑**

[https://github.com/mc-kay/ClickOnceWithProxySupport](https://github.com/mc-kay/ClickOnceWithProxySupport)

# c# - WinRT（Metro 应用程序） - 尝试创建 GregorianCalendar、JulianCalendar、HebrewCalendar - 找不到名称

> ID：14126507
> 
> 赞同：0
> 
> 时间：2013-01-02T17:35:29.317
> 
> 标签：c#, calendar, visual-studio-2012, microsoft-metro, windows-runtime

使用 Visual Studio 2012 编写 Metro 应用程序。我正在尝试移植我的一些 .NET 2.0 代码。我需要创建某些日历的实例来对某些扫描数据进行日期转换。

粗略地说，我只是这样做：

```
using System.Globalization;

Calendar cal = null;

cal = new GregorianCalendar;

....

cal.GetDaysInMonth(year, month); 
```

但是，日历对象似乎不可用。我花了 8 个小时的大部分时间在 System.Globalization 和 Windows.Globalization 中寻找解决方法并找到了东西。有没有人有什么建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T15:25:39.153

极好的。谢谢你的线索。这实际上导致了一些效果很好的东西。

第一：使用Windows.Globalization；

然后：日历 cal = 新日历；

后来：cal.ChangeCalendarSystem(CalenderIdentifiers.Gregorian); //（或任何其他人，朱利安，希伯来语，

然后稍后：scratchDateTime = new DateTime(y, m, d, 0, 0, 0, 0); // 使用无关紧要的时间设置年月日 cal.SetDateTime(scratchDateTime); int daysInMonth = cal.NumberOfDaysInThisMonth();

# php - 在 CodeIgniter 中为自定义库创建配置文件

> ID：14126508
> 
> 赞同：1
> 
> 时间：2013-01-02T17:35:31.757
> 
> 标签：php, codeigniter, codeigniter-2

我已经浏览了所有 CI 文档，并对其进行了一些谷歌搜索，但我似乎仍然无法弄清楚如何在 codeigniter 中为自定义库创建配置文件。如果有人甚至可以指出我在文档中可以找到答案的方向，那将不胜感激。

我正在 CI 中创建一个库，该库使用多个数据库列，这些列在应用程序之间的名称可能不同，因此我希望将名称存储在自定义配置文件中。然后我希望能够在库的构造中加载这些值。

所以我的两个问题是：

1.）如何命名配置文件，以及如何命名该文件中的变量，以免它们覆盖任何其他配置变量？

2.) 如何从我的库中获取值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T17:39:12.730

当我有这样的问题时，我喜欢看看其他已经这样做的项目。我们[`Tank_auth`](https://github.com/ilkon/Tank-Auth)在几乎所有的 ci 项目中都使用过。这是一个流行的身份验证库，它有自己的自定义配置文件

1.  它只是在目录中创建自己的配置文件`application/config`。您可以在配置项前加上您的应用名称，以确保它们是唯一的

2.  然后它只是将它[加载](https://github.com/ilkon/Tank-Auth/blob/master/application/libraries/Tank_auth.php#L27)到构造函数中：

    ```
    $this->ci->load->config('tank_auth', TRUE); 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T17:13:57.730

如果有`config/libraryname.php`文件，它将在库实例化之前自动加载。

（因此，请注意与 CI 的配置文件的名称冲突）

旁注：如果您将数组作为第二个参数传递，则会禁用此自动加载：

```
$this->load->library('thelibrary', array('param1' => 'value1')); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-09T03:51:46.320

在您的配置/config/your_conf.php 中：

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');
$config = Array(
        'your_conf1' => 'your_conf_val1',
        'your_conf2' => 'your_conf_val2',
        'your_conf3' => 'your_conf_val3'
    ); 
```

在您的控制器中：

```
$this->config->load('your_conf');
var_dump((array)$this->config); //show all the configs including those in the your_conf.php 
```

# css - JScrollPane - 缩略图图像不会水平滚动

> ID：14126511
> 
> 赞同：0
> 
> 时间：2013-01-02T17:35:42.880
> 
> 标签：css, jquery-jscrollpane

我有缩略图图像的无序列表，可以在页面底部水平显示。我希望一些图像可见，而其他图像在使用滚动条时水平滚动进/出。

但是，我无法让我的图像排成一条连续的线 - 它们在 100% 宽度标记处分解。

这可能是我的 css 而不是 jscrollpane 的问题。

演示在这里：[http ://www.air.desensdesigns.com/temp.html](http://www.air.desensdesigns.com/temp.html)

CSS：

```
 #thumbnails{
position:fixed;
top:86%;
left:0px;
height:125px;
width:100%;
background:rgba(0,0,0,.6);
}

#thumbnails ul{
position:relative;
top:5px;
}

#thumbnails li{
list-style:none;
float:left;
margin:5px;
padding:0px;
height:100px;
width:133px;
border:2px solid #333;
} 
```

JS：

```
$(function() {
    $thumbnails.jScrollPane({});
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T17:47:08.263

为 ul 添加宽度：

```
#thumbnails ul {
    position: relative;
    top: 5px;
    width: 5000px;
} 
```

* * *

**更新**

试试添加这个：

```
.jspHorizontalBar {
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 52px;
    background: red;
} 
```

我的测试：

![在此处输入图像描述](../Images/6c3f3d97d82eac35508604e33ec8559f.png)

# c++ - 用迭代器重写循环的一部分

> ID：14126513
> 
> 赞同：-1
> 
> 时间：2013-01-02T17:35:49.340
> 
> 标签：c++, iterator

我试图掌握迭代器的窍门，我会发布失败的尝试，但我没有看到任何意义，所以我只会发布我试图用迭代器重写的代码。

如何让类使用向量的迭代器来跟踪位置，而不是制作自己的临时迭代器？

具体来说，我试图跟踪固定循环中已经打印了哪些字母。

## 实时代码

[这是预期的输出。](http://ideone.com/qILsnE)

## 代码预览

```
#include <vector>
#include <cstdio>

class ABC
{

protected:

   std::vector<char> ABCs;

   int currentLetter;

public:

   ABC():currentLetter( 0 ){}

   void AddLetter( char Letter )
   {
       ABCs.push_back( Letter );
   }

   char getLetter( int position )
   {
       return ABCs.at( position );
   }

   int getLetterPosition()
   {
       return currentLetter;
   }

   void setLetterPosition( int newPosition )
   {
       currentLetter = newPosition;
   }

};

void printSentence( ABC * alphabet, int limit )
{
   for( int i = 0; i < limit; i += 2 )
   {
       printf( "The current letter is %c, the letter after is %c \n", alphabet->getLetter( alphabet->getLetterPosition() ), alphabet->getLetter( alphabet->getLetterPosition() + 1 ) );

       alphabet->setLetterPosition( alphabet->getLetterPosition() + 2 );
   }
}

int main()
{
    ABC alphabet;
    ABC * alphabetPointer = &alphabet;

    for( char letter = 'a'; letter < 'z'; letter++  )
    {
         alphabet.AddLetter( letter );
    }

    printf( "%s\n" , "printSentence() with param of four letters." );
    printSentence( alphabetPointer, 4 );

    //again
    printf( "%s\n" , "printSentence() with param of six letters." );
    printSentence( alphabetPointer, 6 );

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T17:52:15.237

你可以做的是 typedef 一个常量迭代器到你自己的向量，像这样：

```
class ABC
{
public:
   typedef std::vector<char> CharCollection;
   typedef typename CharCollection::const_iterator const_iterator;

protected:
   CharCollection ABCs;
   int currentLetter;
   ... 
```

您的类现在将有一个名为“const_iterator”的类型。

下一步是允许您的类的用户对其进行迭代。只需实现一个 begin() 和 end() 方法，如下所示：

```
public:
    const_iterator begin()  const {return ABCs.begin();}
    const_iterator end()    const {return ABCs.end();  }
    const_iterator cbegin() const {return ABCs.begin();}
    const_iterator cend()   const {return ABCs.end();  } 
```

请注意，我还实现了新的 C++ cbegin 和 cend 方法。

在这里使用常量迭代器很重要。您不希望来电者在您背后更改您的收藏。

现在你可以像这样循环它：

```
ABC abc;
...
for (ABC::const_iterator it=abc.begin();it!=abc.end();++it)
   {
   char c = *it;
   ...
   } 
```

您也可以`auto`在此处使用而不是`ABC::const_iterator`.

这里有一些陷阱：

*   如果 ABC 类中的向量被扩展，指向可能的迭代器将变得无效。所以你应该清楚地记录你的类的用户在迭代它时不能调用任何扩展向量的方法。
*   您只能有一种开始方法和一种结束方法。因此，如果您向 ABC 类添加更多向量，则必须编写 beginABC、beginXYZ 等方法，对于 end 也是如此。

正因为如此，我一般不喜欢这样写，而是将向量作为一个整体暴露给类的用户，如下所示：

```
class ABC
{
public:
   typedef std::vector<char> CharCollection;
   const CharCollection &getABCs() const {return ABCs;} 
```

这样，调用者就可以更清楚地知道他可以获得集合，但他不能更改它（它是 const），并且如果 ABC 类中的某些内容发生更改，它将变得无效（因为它返回一个引用）。

现在调用者可以选择他想对集合做的任何事情：

*   使用 CharCollection::begin() 和 end() 对其进行迭代
*   如果他需要在循环遍历它时更改 ABC 类实例，请复制它
*   或使用任何其他可以处理集合的 STL 方法

# javascript - javascript中的数组排序-比较IE8和Chrome的不同结果

> ID：14126517
> 
> 赞同：2
> 
> 时间：2013-01-02T17:36:18.357
> 
> 标签：javascript, arrays, google-chrome, internet-explorer-8, cross-browser

数组（注意项目的顺序）：

```
{
  "5":{
      "Title":"Title A",
      "Desc":"Description A"
  },
  "15":{
      "Title":"Title B",
      "Desc":"Description B"
  },
  "10":{
      "Title":"Title C",
      "Desc":"Description C"
  },
  "1":{
      "Title":"Title D",
      "Desc":"Description D"
  },
  "20":{
      "Title":"Title E",
      "Desc":"Description E"
  }
} 
```

现在，如果在 chrome 或 IE9 上运行，下面的 js 代码确实会改变顺序。

```
for ( var i in data ) {
    alert(JSON.stringify(data[i]));
} 
```

IE8 保留原始顺序，而较新的浏览器将顺序更改为 1、5、10、15、20。

知道为什么会发生这种情况吗？是否可以在较新的浏览器中保留原始顺序？

非常感谢，卢克

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T17:37:13.867

你所拥有的不是一个数组。它只是一个对象，属性的呈现顺序是不确定的。

*编辑*——有趣的事实：规范说，如果一个实现决定在`for ... in`语句中宣传某些特定的顺序，那么`Object.keys()`必须遵守相同的顺序规则。然而，不需要这样的规则。该规范没有详细说明实现的“未定义”程度，但对我来说，一个好的经验法则是编码好像顺序可能是主动随机的:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T17:39:46.757

你所拥有的不是一个数组，而是一个对象。对象没有任何顺序。浏览器以他们想要的任何顺序返回键。

如果您想要一些固定的顺序，请将您的对象放入一个数组中：

```
{
    "objects": [
        {
            "id": "5",
            "Title":"Title A",
            "Desc":"Description A"
        },
        {
            "id": "15",
            "Title":"Title B",
            "Desc":"Description B"
        },
        {
            "id": "10",
            "Title":"Title C",
            "Desc":"Description C"
        },
        {
            "id": "1",
            "Title":"Title D",
            "Desc":"Description D"
        },
        {
            "id": "20"
            "Title":"Title E",
            "Desc":"Description E"
        }
    }
} 
```

# scala - Scala UDF：java.lang.NoClassDefFoundError：scala/ScalaObject

> ID：14126519
> 
> 赞同：0
> 
> 时间：2013-01-02T17:36:23.130
> 
> 标签：scala, user-defined-functions, apache-pig

我正在尝试将 Scala 用于 UDF，但 Pig 作业因错误“java.lang.NoClassDefFoundError: scala/ScalaObject”而失败。我究竟做错了什么？

$ cat NonEmpty.scala

```
package nonempty

import org.apache.pig.FilterFunc
import org.apache.pig.data._

class NonEmpty extends FilterFunc {
  def exec(input: Tuple) = {
    val s = input.get(0)
    s match {
    case a: String => !a.isEmpty 
    case _ => false
   }
  }
} 
```

$ 猫 ex3.pig

```
register ./nonempty.jar 
register ./scala-library.jar;

define NonEmpty nonempty.NonEmpty();

raw = load 'excite-small.log' using PigStorage('\t') as (user: chararray, time:chararray, query: chararray);

locations = filter raw by NonEmpty(query); 
```

建造：

```
scalac -cp ~/pig-0.9.2/pig-0.9.2.jar NonEmpty.scala
jar -cf nonempty.jar nonempty 
```

猪堆栈跟踪：

```
2 ---------------
3 ERROR 2998: Unhandled internal error. scala/ScalaObject
4 
5 java.lang.NoClassDefFoundError: scala/ScalaObject
(...) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T17:42:40.340

`ScalaObject`位于`scala-library.jar`需要包含在运行时类路径中的 。因此，添加`scala-library.jar`到运行程序的命令的运行时类路径中。

# java - 执行一个命令后如何防止命令行窗口存在？

> ID：14126524
> 
> 赞同：3
> 
> 时间：2013-01-02T17:37:01.463
> 
> 标签：java, maven, batch-file

在 Windows bat 文件中：

```
mvn.bat install
java -jar build.jar
pause 
```

命令行窗口执行后存在`mvn.bat install`，如何让它继续执行剩余命令？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-02T17:40:35.487

我认为你的问题是，当你调用 mvn 命令时，你再也不会回到你的脚本了。

尝试使用 call 命令，例如：

```
call mvn install 
```

这将调用 mvn install 命令，然后返回到您的脚本。

# javascript - 在 RaphaelJs 中“应用”转换

> ID：14126525
> 
> 赞同：0
> 
> 时间：2013-01-02T17:37:02.860
> 
> 标签：javascript, graphics, web, svg, raphael

我已经围绕 RaphaelElement 编写了一个包装类。它有一个属性 elem 来存储相应的 Element 和两个方便的方法 setPos 和 getPos。此外，还有一个位置成员，其中包含两个条目 x 和 y。

因此 getPos() 仅返回位置。setPos 接受一个新位置作为参数，并且必须更新 elem 的坐标。

不幸的是，没有什么类型的 RaphaelElement 将存储在 elem 中的信息，它可以是圆形也可以是矩形。现在 setPos 中的代码如下所示：

```
//position is the parameter, this.pos is the member
this.pos = position;
this.elem.attr("x",this.pos.x);
this.elem.attr("y",this.pos.y);
this.elem.attr("cx", this.pos.x);
this.elem.attr("cy", this.pos.y); 
```

这感觉像是一个肮脏的解决方法。它适用于圆形和矩形，但在矩形上没有属性“cx”或“cy”，而在圆形上“x”和“y”都不存在。

我浏览了文档以找到更好的方法来修改 RaphaelElement 的位置，并找到了方法 transform。但是有一个问题：我还没有找到一种方法来给“绝对”的新坐标进行变换。它只提供平移、旋转或缩放的方法。如果我必须通过将当前位置的翻译应用到新位置来更改位置，那么我必须将新的翻译附加到转换字符串中。我担心它可能会长得很长。此外，我必须评估一个越来越长的字符串才能获得我当前的位置。

当然可以通过将新翻译附加到转换来移动我的元素，但我希望能够直接设置新位置或“应用”或“完成”转换，这样它的字符串就不会无限增长.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T17:54:21.560

[TransformList](http://www.w3.org/TR/SVG/coords.html#InterfaceSVGTransformList)上的 consolidate 方法将转换列表转换为单个矩阵。添加翻译后，您可以调用它。

或者，您可以在 transformList 上调用 getItem ，这将为您提供一个 SVGTransform 对象，您可以在将直接设置新位置的对象上调用 setTranslate 。你需要小心有一个转换，如果没有，就创建一个。

# asp.net - 该页无法显示。HTTP 403.2 - 禁止：禁止读取访问

> ID：14126534
> 
> 赞同：0
> 
> 时间：2013-01-02T17:37:35.847
> 
> 标签：asp.net, http-status-code-403, iis-5

我一直在寻找整个inet。但我找不到有效的解决方案。由于某些我不知道的原因，我工作的 IIS（**WinXP 上的 IIS 5.1**）停止工作。甚至，当我尝试浏览默认网站时，我得到了这个：

![该页无法显示](../Images/0a12a58f5fd4e10d420d69c3ff1b2a13.png)

看起来它与 ASP.NET 无关，因为默认网站包含 asp 代码和静态内容，我也无法浏览。

非常感谢任何建议。我已经花了太多时间尝试解决这个问题:(

非常感谢。

# android - 如何用 sherlock 创建菜单 android

> ID：14126537
> 
> 赞同：0
> 
> 时间：2013-01-02T17:37:39.857
> 
> 标签：android, styles, actionbarsherlock

我不知道如何在带有 的按钮上创建带有 sherlock 的底部菜单`ActionBarSherlock`，而使用 sherlock 创建时我的顶部菜单是可以的。我想要菜单的灯光样式，但我不知道如何用 sherlock 创建它。

我的代码：

```
public boolean onCreateOptionsMenu(Menu menu) {
    getSupportMenuInflater().inflate(R.menu.menu, menu);
    MenuInflater inflater = getSupportMenuInflater();
    inflater.inflate(R.menu.submenu, menu);
    return super.onCreateOptionsMenu(menu);
} 
```

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

    <item
        android:id="@+id/menu_item"
        android:showAsAction="always"
        android:title="settings"
        android:icon="@drawable/advancedsettings" >

        <menu>
            <item
                android:id="@+id/removerss"
                android:showAsAction="always"
                android:icon="@drawable/remove"
                android:title="Remove Rss" />

           <item
                android:id="@+id/addrss"
                android:showAsAction="always"
                android:title="Add Rss"
                android:icon="@drawable/add" />

        </menu>
    </item>

</menu> 
```

但这个菜单与风格夏洛克无关。那么我怎样才能用 sherlock 创建这个菜单。请如果你能提供一些代码来简单地做到这一点。

# xcode - 编译大文件时 Xcode 4.5 挂起

> ID：14126543
> 
> 赞同：0
> 
> 时间：2013-01-02T17:38:54.960
> 
> 标签：xcode, compiler-errors, archive

我有一个要归档的 Xcode 项目。

但是，存档需要很长时间并引发错误：Xcode 无法编译大约 19.000 行的文件。

*   Xcode 可以编译的行数有限制吗？
*   有没有办法让 Xcode 编译这个文件？

**编辑：** 我必须注意这个文件只包含一些解析的内容，即是一个不能拆分的数据模型。我知道它可以被提取到某种数据库中，但问题实际上是关于 Xcode 及其编译行为。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-04T10:41:15.670

我将我的项目更改为 <19,000 行，但类似的错误仍然存​​在！

毕竟在Xcode5中对我有用的是更改构建设置：将RELEASE（或全部）的“优化级别”设置为NONE。创造了奇迹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T17:47:51.177

**分而治之**

在单个类/文件中是什么样的代码？

您可以通过创建其他类/对象将该代码分解为模块。这将更容易理解和管理。

# java - 使 WAR 像 JAR 一样可执行，以在应用程序 (JBoss) 之外提供命令行界面

> ID：14126550
> 
> 赞同：1
> 
> 时间：2013-01-02T17:39:08.327
> 
> 标签：java, jakarta-ee, command-line, command-line-interface, war

我有一个 servlet，它有一些逻辑，并且像每个 servlet 一样通过浏览器使用。现在我正在寻找方法来做与 servlet 相同的事情，但它应该像 CLI 一样工作。CLI 将请求发送到部署在 JBoss 上的逻辑（war 文件中的类）并在终端（命令行）上打印响应。它应该触发相同的逻辑，所有东西都应该放在这个war文件中。

因此，假设我将编写提供此功能的 java 代码。它应该被编译成jar并放在war中，然后这个jar应该从war中启动。它不必是 servlet。唯一的要求是一切都应该在这个战争文件中。CLI 应该通过一行调用，例如 java -cp jarfileinwar com.blah.Main。

逻辑应该在部署了所有东西的 JBoss JVM 上工作，它应该像 servlet 一样工作，但调用方法应该是 CLI。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T22:05:18.613

可执行 jar 文件的结构与 war 文件的结构不同，因此我认为您不会成功地尝试创建可执行的 war 文件。

但是，您可以将所需的类和 jar 依赖项中的类重新打包到一个大的“uber jar”中，然后通过属性清单条目使其可执行。

手动执行此操作并不简单，因此我建议使用构建工具来完成此操作。Maven 有两个插件——Shade 插件和更新的（我认为）Maven Assembly 插件，可以很容易地做到这一点。

使用 Maven 的一个好处是您可以有两个不同的目标 - 一个用于构建 war 文件，一个用于构建来自同一个项目的可执行 jar 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T21:34:34.143

我无法停止思考。正如我对原始帖子的评论一样，我认为可以通过在 WAR 中模仿可执行 JAR 来使 WAR 文件可执行。

在 Maven 3 web 项目 arche 类型（作为基础）之上，我创建了一个小的概念证明项目，它实际上实现了这一点。

看一看：

[https://github.com/is-already-taken/executable-war-example](https://github.com/is-already-taken/executable-war-example)

它使用了一个自定义类加载器（[这篇关于 javablogging.com 的类加载器的文章帮我搞定了这个](http://www.javablogging.com/java-classloader-2-write-your-own-classloader/)），一个“引导”类，它使用我们的自定义类加载器和一个自定义清单加载业务逻辑的第一部分。类加载器用于“拦截”类加载以在类通常位于 WAR 文件中的位置搜索类，并使用流式解压缩代码从 WAR 文件中打包的库中提取类。

可能还有这种开箱即用的解决方案或者Maven插件自带的东西，但是我没有找到。此外，这个小的概念证明也帮助我学习了类 cloader 的东西。;)

我期待着对我的解决方案和我的总体方法发表评论。

# java - 并发访问静态方法

> ID：14126556
> 
> 赞同：26
> 
> 时间：2013-01-02T17:39:35.130
> 
> 标签：java, methods, concurrency, static, simultaneous

我有一个具有以下签名的静态方法：

```
public static List<ResultObjects> processRequest(RequestObject req){
  // process the request object and return the results.
} 
```

当同时对上述方法进行多次调用时会发生什么？请求是同时处理还是一个接一个？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-02T17:48:31.570

准确回答您的问题：

1.  方法将同时执行（如果您有多个线程，则同时执行多次）。
2.  请求将同时处理。

`synchronized`如果您正在处理需要并发访问的对象，则需要添加修饰符。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-01-02T17:49:00.183

All your calls to the method will be executed concurrently... but:

You may have concurrency issue (and being in non thread-safe situation) as soon as the code of your static method modify static variables. And in this case, you can declare your method as `synchronized`

If your method only use local variables you won't have concurrency issues.

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2013-01-02T17:40:32.517

如果需要避免并发执行，则需要显式同步。该方法是静态的这一事实与它无关。如果您将方法本身声明为`synchronized`，则同步将在类对象上进行。否则，您将需要在某些静态对象上进行同步（因为`this`静态方法不存在）。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2019-05-15T11:45:07.280

我看到很多答案，但没有一个真正指出原因。

所以可以这样想，
每当创建一个线程时，它都会用自己的堆栈创建（我猜创建时堆栈的大小是~2MB）。所以发生的任何执行实际上都发生在这个线程堆栈的上下文中。
创建的任何变量都存在于堆中，但它的引用存在于堆栈中，但不存在于线程堆栈中的静态变量除外。

您进行的任何函数调用实际上都被推入线程堆栈，无论是静态的还是非静态的。由于完整的方法被压入堆栈，因此发生的任何变量创建都存在于堆栈中（同样例外是静态变量）并且只能由一个线程访问。

所以所有的方法都是线程安全的，直到它们改变了一些静态变量的状态。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-01-02T17:50:56.847

You can check it yourself:

```
public class ConcurrentStatic {

    public static void main(String[] args) {
        for (String name: new String[] {"Foo", "Bar", "Baz"}) {
            new Thread(getRunnable(name)).start();
        }
    }

    public static Runnable getRunnable(final String name) {
        return new Runnable() {
            public void run() {
                longTask(name);
            }
        };
    }

    public static void longTask(String label) {
        System.out.println(label + ": start");
        try {
            Thread.sleep(10000);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
        System.out.println(label + ": end");
    }

} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-02T17:40:38.583

默认情况下，Java 中不同线程的所有方法调用都是并发的。

# c# - 用于处理 Azure 服务总线队列中的消息处理的选项

> ID：14126557
> 
> 赞同：1
> 
> 时间：2013-01-02T17:39:44.090
> 
> 标签：c#, .net, azure, servicebus

我正在开发一个使用 azure 服务总线队列的命令处理应用程序。命令从网站发出并发布到队列，队列消息由工作角色处理。处理包括根据队列消息值从数据库和其他来源获取数据并将其发送到不同的主题。流量是 ,

1.  接收消息
2.  处理消息
3.  将消息标记为完成/放弃消息处理异常。

我在这里面临的挑战是处理时间。有时它超过了最大消息锁定时间段（5 分钟 - 配置），因此消息被解锁并重新出现以供工作人员角色拾取（考虑工作人员角色的多个实例）。所以这会导致再次处理相同的消息。

我必须有哪些选择来处理这种情况。？

我想过，

1.  接收消息 - 添加到局部变量 - 标记消息完成。如果出现异常，请再次将消息发送到队列或单独的队列（假设消息队列失败）。第二个队列也意味着另一个工作角色来处理它。

2.  在处理过程中有一个运行的 foreach 循环。所以我想用 Parallel.Foreach 代替。但不确定它会获得多少时间，并且还阅读了一些关于在 azure 中使用 Parallel 时遇到的问题的帖子。

欢迎提出建议，修正。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T18:46:20.783

Aravind，您绝对可以在这种情况下使用 SB 队列。使用最新的 SDK，只要您继续处理它，您就可以更新对您的消息的锁定。详细信息位于：http: [//msdn.microsoft.com/en-us/library/microsoft.servicebus.messaging.brokeredmessage.renewlock.aspx](http://msdn.microsoft.com/en-us/library/microsoft.servicebus.messaging.brokeredmessage.renewlock.aspx)

这类似于更新可见性超时的 Azure 存储队列功能：http: [//msdn.microsoft.com/en-us/library/windowsazure/microsoft.windowsazure.storage.queue.cloudqueue.updatemessage.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/microsoft.windowsazure.storage.queue.cloudqueue.updatemessage.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T04:13:08.357

您可能需要考虑使用[Azure Queue](http://www.windowsazure.com/en-us/develop/net/how-to-guides/queue-service/)，Azure Queue 消息的最长租用时间为 7 天，而 Azure Service Bus Queue 的租用时间为 5 分钟。

[这篇 msdn 文章](http://msdn.microsoft.com/en-us/library/windowsazure/hh767287.aspx)介绍了两种 Azure 队列类型之间的差异。

如果标准 Azure 队列不包含您需要的所有功能，您可以考虑使用这两种类型的队列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-14T22:04:07.787

您可以使用心跳操作触发任务，该操作会在您处理它时不断为您更新锁。这正是我所做的。我在[用心跳创建任务中描述了我的方法](https://stackoverflow.com/questions/17115385/creating-a-task-with-a-heartbeat/17115386#17115386)

# r - 去除R中的特殊字符

> ID：14126570
> 
> 赞同：1
> 
> 时间：2013-01-02T17:40:37.000
> 
> 标签：r

我有以下字符串

```
> str    
[1]  "[ { \"category\" : \"book\"} , { \"category\" : \"Movie\"} , { \"category\" : \"Brand\"}]" 
```

我想剥离它以获得以下向量

```
> a
[1] "book" "Movie" "Brand" 
```

我的问题是如何处理字符串中的“”和\以将其传递给R中的**grep**或**gsub**。这就是我所做的，我得到了一个错误

```
> grep("^\[ \{ \\"category\\" : \\"([a-zA-Z0-9/]+)\\".*",str)
Error: '\[' is an unrecognized escape in character string starting "^\[" 
```

我什至走在正确的轨道上吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T17:52:37.443

也许这个`rjson`包会帮你解决：

```
> require(rjson)
> unlist(fromJSON(str))
  category category category 
    "book"  "Movie"  "Brand" 
```

忽略您想要的名称（“类别”）。包裹`as.vector()`起来摆脱那些。

# java - 如何从没有浏览器的服务器访问 Google Drive 文档

> ID：14126572
> 
> 赞同：1
> 
> 时间：2013-01-02T17:40:39.683
> 
> 标签：java, oauth-2.0, google-drive-api

我已经完成了执行 OOB OAuth2 连接的示例，它在我的笔记本电脑上运行良好。

我面临的挑战是它会启动浏览器，要求我验证是否要授予我的应用程序访问相关文档的权限。从那时起，它将我的凭据集存储在本地文件中并继续正常工作。

我的用例是我公司中有许多部门想要利用 Google Docs 电子表格进行报告。然后，我希望能够在服务器上运行一个程序（来自一个 cron 作业），该程序可以抓取这些数据并为所有部门构建一个汇总报告。

我打算创建一个“报告用户”，授予对所有相关文档的读取访问权限，然后使用该身份运行报告过程。

我尝试在笔记本电脑上运行它，然后将存储的凭据复制到我的服务器以供使用。但似乎这些凭据与机器相关联，因此它强制通过浏览器进行新的验证流程。

关于如何使用 Google Drive 的身份验证流程以允许我做我需要的任何建议？

TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T17:48:16.670

我建议使用已被授予对所有 Google Apps 域用户文档的只读访问权限的服务帐户，而不是需要授予某些用户对所有文档的只读访问权限：

[https://developers.google.com/drive/delegation](https://developers.google.com/drive/delegation)

采用：

[https://www.googleapis.com/auth/drive.readonly](https://www.googleapis.com/auth/drive.readonly)

作为您在控制面板中授予服务帐户访问权限的 OAuth 范围。这样一来，如果服务器受到威胁，您对只读的访问权限就会受到限制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T18:52:05.780

从 API 控制台使用 p12 文件创建 GoogleCredential（API 访问 > 创建另一个客户端 ID > 服务帐户等）：

```
GoogleCredential.Builder#setServiceAccountPrivateKeyFromP12File(File) 
```

[有关服务帐户的更多信息](http://code.google.com/p/google-api-java-client/wiki/OAuth2#Service_Accounts)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T19:20:37.260

其他答案比这更好，但您始终可以获得一组凭据并将它们保存在文件中以供重复使用。可以使用 Web 浏览器获取凭据，但只能完成一次，然后您的服务器可以永远使用它们（只要您请求离线访问并获得刷新令牌）。

# data-structures - 用于构建文件系统的数据结构？

> ID：14126575
> 
> 赞同：37
> 
> 时间：2013-01-02T17:40:49.200
> 
> 标签：data-structures, operating-system, filesystems

哪种数据结构最适合用于文件组织？B树是最好的还是有另一种数据结构可以更快地访问文件和良好的组织？谢谢

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-01-02T18:03:10.347

所有文件系统都是不同的，因此文件系统中实际使用的数据结构数量巨大。

许多文件系统使用某种[位向量](http://en.wikipedia.org/wiki/Bitvector)（通常称为位图）来跟踪某些空闲块的位置，因为它们在查询特定磁盘块是否正在使用和（对于不是压倒性的磁盘）具有出色的性能full) 支持对空闲块的合理快速查找。

许多较旧的文件系统（ext 和 ext2）使用简单的链表存储目录结构。显然，对于大多数应用程序来说，这实际上已经足够快了，尽管使用大量大型目录的某些类型的应用程序遭受了明显的性能损失。

XFS 文件系统以使用[B+-trees](http://en.wikipedia.org/wiki/B+_tree)处理几乎所有内容而闻名，包括目录结构及其日志系统。根据我在本科操作系统课程中的记忆，其理念是，由于编写、调试和性能调整 B+-tree 的实现需要很长时间，因此尽可能多地使用它是有意义的。

其他文件系统（ext3 和 ext4）使用 B 树的变体，称为[HTree](http://ext2.sourceforge.net/2005-ols/paper-html/node3.html)，我不太熟悉。显然，它使用某种散列方案来保持高分支因子，以便使用很少的磁盘访问。

我听说一些操作系统尝试使用[splay 树](http://en.wikipedia.org/wiki/Splay_tree)来存储它们的目录结构，但遇到了麻烦。具体来说，它阻止了多个读取器对同一目录的多线程访问（因为在展开树中，每次访问都会重塑树），并且遇到了一个边缘情况，如果树的所有元素都是按顺序访问的，那么树将退化为链表。也就是说，我不知道这是否只是一个都市传说，因为这些问题在任何人尝试编写它们之前就已经很明显了。

微软的 FAT32 系统使用一个巨大的数组（文件分配表）来存储哪些文件存储在哪里以及哪些磁盘扇区在一个文件中逻辑上彼此跟随。主要缺点是必须提前设置表，因此最终限制了可以存储在磁盘上的文件大小。然而，基于阵列的系统很容易实现。

这不是一个详尽的列表——我确信其他文件系统使用其他数据结构。但是，我希望它可以帮助您朝着正确的方向前进。

希望这可以帮助！

# vba - 关于如何加快循环的建议

> ID：14126578
> 
> 赞同：1
> 
> 时间：2013-01-02T17:41:02.960
> 
> 标签：vba, excel

我有以下代码。我想知道是否有一种简单的方法可以重写它以减少运行时间？目前，我有大约 13,000 行要循环，运行大约需要 3-5 分钟。谢谢！

```
Sheets("wkly").Activate

Dim i As Long

Lastrow = Range("A" & Rows.Count).End(xlUp).Row

For i = 2 To Lastrow

If Range("S" & i) > 0.005 Then
        Range("Z" & i, "AA" & i).Copy
        Range("AC" & i, "AD" & i).PasteSpecial xlPasteValues
End If

Application.ScreenUpdating = False
Next i 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T18:02:06.530

我相信这将有助于使它更快。无需循环，无需复制和粘贴。

```
Application.ScreenUpdating = False
Application.Calculation = xlManual

Dim wks As Worksheet, Lastrow As Long
Set wks = Sheets("wkly")

With wks

    Lastrow = .Range("A" & .Rows.Count).End(xlUp).Row

    .Range("S1:S" & Lastrow).AutoFilter 1, ">.005"

    'Assumes you will always have values greater than .005, if not you need to error trap
     Dim rngFilter As Range
     Set rngFilter = .Range("S2:S" & Lastrow).SpecialCells(xlCellTypeVisible) 'assumes row 1 is header row

     rngFilter.Offset(, 10).Value = rngFilter.Offset(, 7).Value
     rngFilter.Offset(, 11).Value = rngFilter.Offset(, 8).Value

End With

Application.ScreenUpdating = True 
```

**更新** 我知道你已经接受了答案，但如果你想知道如何通过使用数组循环来做到这一点，下面是：

```
Dim wks As Worksheet, varStore As Variant, Lastrow As Long, i As Long

Application.ScreenUpdating = False
Application.Calculation = xlManual

Set wks = Sheets("wkly")

With wks

    Lastrow = .Range("A" & .Rows.Count).End(xlUp).Row

    varStore = .Range("S2:S" & Lastrow)

    For i = LBound(varStore, 1) To UBound(varStore, 1)

        If varStore(i, 1) > 0.005 Then .Range("AC" & i + 2 & ":AD" & i + 2).Value = .Range("Z" & i + 2 & ":AA" & i + 2).Value

    Next

End With

Application.ScreenUpdating = False 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T20:38:10.060

如果您对大量单元格进行操作，将它们复制到数组中并在处理后将它们写回通常是最快的。以下代码在我的机器上运行 0.04 秒（基于 Scott 的回答，但也使用数组进行编写）：

```
将 wks 调暗为工作表
Dim varCompare As Variant, varSource As Variant, varTarget As Variant
昏暗 Lastrow 只要，我只要

Application.ScreenUpdating = False
Application.Calculation = xlManual

设置 wks = Sheets("wkly")

与 wks

    Lastrow = .Range("A" & .Rows.Count).End(xlUp).Row

    varCompare = .Range("S2:S" & Lastrow)
    varSource = .Range("Z2:AD" & Lastrow)
    varTarget = .Range("AC2:AD" & Lastrow)
    For i = LBound(varCompare, 1) To UBound(varCompare, 1)

        如果 varCompare(i, 1) > 0.005 那么
            varTarget(i, 1) = varSource(i, 1)
            varTarget(i, 2) = varSource(i, 2)
        万一
    下一个

    .Range("AC2:AD" & Lastrow).Value = varTarget
结束于

Application.ScreenUpdating = False

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T18:01:43.347

鉴于所有好的提示，并包括以下内容。请尝试一下，看看您可以实现多少性能提升。

```
Application.Calculation = xlCalculationManual

lastrow = Range("S" & Rows.Count).End(xlUp).Rows
For i = 1 To lastrow
    If Range("S1").Offset(i) > 0.005 Then
            Range("AC").Offset(i).Resize(1, 2).Value = Range("Z").Offset(i).Resize(1, 2).Value
    End If
Next i 
```

# php - 变量作为表单下拉列表中的默认值？

> ID：14126579
> 
> 赞同：0
> 
> 时间：2013-01-02T17:41:05.390
> 
> 标签：php, html, forms, drop-down-menu, selected

我有一个解析器，可以将信息提取到数组 $item 中。从我的数据库中，我将存储“类型”的所有结果提取到数组 $getFormats 中。

然后我将 $item 显示为用户可以修改的大表单（以修复解析器中的任何错误）。特别是，我将重点放在包含解析器提取的“类型”的 $item[3] 上。

我的表单在我的下拉列表旁边显示 $item[3]，其中包含数据库中可能包含的“类型”。这里的目标是允许用户将解析器找到的“类型”与数据库中包含的“类型”进行匹配或更改。

显然，我希望默认下拉值是与数据库中已有值匹配的值。如果没有匹配，则默认为空白，用户自己选择合适的类型。

下面的代码演示了我所拥有的。显然，我做错了，因为它不起作用。

```
<form>
    <?php
    foreach($articles as $item) {
     ?>

     Type: <input type="text" name="typeparsed" value="<?php echo $item[3]; ?>">
           <select name="typechoose" value="<?php echo $value; ?>">
                <?php 
                        foreach ($getFormats as $format) {
                            $selected = '';
                            if($item[3] == 'entry form' && $format->name == 'Entry Form'){ 
                                $selected = 'selected';
                            }
                            echo "<option value='".$format->name."' ".$selected.">".$format->name."</option>";
                        }
                    ?>
           </select>
    <?php }?>
</form> 
```

$item[3] 是包含解析器提取的“类型”的数组。

$format->name 是包含从数据库中提取的下拉选项的数组。

上面的代码有效，但我的问题是 $format->name 包含两个相同值的实例。

我的数据库有以下“类型”：

```
Entry Form
Facebook
Entry Form 
```

这是因为 wordpress 存储分层选项的方式。在我的网站上，这些值实际上如下：

```
Entry Form
Facebook
  - Entry Form 
```

如您所见，这是因为 Entry Form 是 Facebook 的顶部菜单项和子菜单。

因此，当我尝试将一种输入表单与输入表单匹配时，在尝试确定哪个输入表单是正确的选择时遇到了问题。

由于我的代码目前是，选择了条目表单的第二个实例。

我如何调整代码，以便如果 $item[3] == 'entry form' （目前如此），那么将选择 FIRST Entry Form？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T18:05:43.900

首先是我不明白你为什么使用这个：

```
<?php
foreach($articles as $item) {
    if ($item[3] == 'entry form') {
        $value = 'entry form';
    } else {
        $value = $item[3];
    }
 ?> 
```

您可以简单地使用代码 brlowe，它的作用完全相同：

```
<?php
foreach($articles as $item) {
   $value = $item[3];
 ?> 
```

要匹配选定的元素，请执行以下操作：

```
Type: <input type="text" name="typeparsed" value="<?php echo $item[3]; ?>">
       <select name="typechoose" value="<?php echo $value; ?>">
          <?php 
           foreach ($getFormats as $format) {
               $selected = '';
               if($value == $format->name){ $selected = ' selected="selected" '; }
               echo "<option value='".$format->name."' ."$selected".>".$format->name."</option>";
           }
          ?>
       </select>
<?php }?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T18:40:04.860

因为你已经改变了你的问题我会提出另一个答案，女巫很简单：只要两个“输入表”具有相同的名称，你就不会确定。如果您可以检查他们的数据库 ID，请尝试使用它，如果不能，那么您应该更改他们的名称。

```
<?php // $value is actualy ID of the element; ?>
Type: <input type="text" name="typeparsed" value="<?php echo $item[3]; ?>">
   <select name="typechoose" value="<?php echo $value; ?>">
      <?php 
       foreach ($getFormats as $format) {
           $selected = '';
           if($value == $format->id){ $selected = ' selected="selected" '; }
           echo "<option value='".$format->id."' ."$selected".>".$format->name."</option>";
       }
      ?>
   </select> 
```

并作为选定元素的值传递 ID。

# android - ios的地理定位精度

> ID：14126580
> 
> 赞同：2
> 
> 时间：2013-01-02T17:41:06.217
> 
> 标签：android, ios, cordova, geolocation, geocoding

我正在开发一个应用程序，该应用程序将利用地理位置来更新特定区域内的车辆或其他“停放”物品的位置，无论是大型停车场还是其他户外设施。
我可以将此应用程序构建为 HTML5 应用程序并使用 phonegap 将其分发到 ios 和 android，或者我可以构建为 ios 本机应用程序。

我的第一个问题是关于原生 ios 地理定位服务和 HTML5（我假设是浏览器）功能哪个更准确？
我的第二个问题是，为了让我获得最准确的读数，我是否需要知道相关区域边界的坐标，然后根据用户相对于边界的位置计算位置？（这是三角测量吗？）

显然我从来没有做过这样的事情，所以我正在寻找指导和逻辑而不是代码。此外，我真的需要知道如何获得最大的准确性，因为我使用 HTML5 和电话间隙模拟了这个应用程序，我对准确性水平不太满意。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T18:28:29.110

本机应用程序或 HTML5 应用程序可用的准确度级别是相同的。这取决于您使用设备上的哪种机制来确定传递给您的应用程序的准确性的位置。可以通过 GPS 获得最准确的位置，而不是电话信号三角测量或 WiFi 连接。您接收到的 GPS 位置的准确性与您用于实现应用程序（本机或 HTML5）的机制无关，而是与设备运行的硬件（即 GPS 接收器）、地理位置、天气条件有关， ETC。

在回答您的第二个问题时，在实施您的应用程序以提高您收到的 GPS 位置的准确性方面，您无需（或可以）做任何事情。但是，您可以选择忽略超出最低准确度级别的读数（地理定位消息中返回的数据包含估计的准确度级别）。

我使用 Phonegap 实现了一个应用程序，在测试期间发现 GPS 位置的平均精度返回到 2 到 6 米，具体取决于设备。

如果您使用的是 Phonegap，请确保在请求位置时使用“enableHighAccuracy”参数，以确保从底层操作系统请求 GPS 定位。请注意，即使您这样做，仍然可能返回不准确的位置，因此最好设置一个过滤器来拒绝任何太不准确的位置。

希望这可以帮助。

# html - 为嵌套在浮动 div 中的元素设置边距属性

> ID：14126581
> 
> 赞同：0
> 
> 时间：2013-01-02T17:41:08.457
> 
> 标签：html, css-float

为什么边距在这个浮动元素内不起作用？

这是[示例](http://jsfiddle.net/Bph8D/3/)。

```
 <div id = "floated">
        <div id="content">
            <p>Some content</p>
        </div>
    </div>

#floated
{
    float:right;
    width:200px;
    height:100px;
    border-style:solid;
}
#content
{
   margin: 30 30 30 30;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T17:44:51.430

正如 BoltClock 所说，它是 30px 而不仅仅是“30”：http: [//jsfiddle.net/Bph8D/3/](http://jsfiddle.net/Bph8D/3/)

```
#floated {
    float:right;
    width:200px;
    height:100px;
    border-style:solid;
}
#content {
    margin: 30px;
}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T17:46:58.510

您应该输入“px”。将#content更改为：

```
 margin: 30px 30px 30px 30px; 
```

或简单地说：

```
margin: 30px; 
```

# jquery - jQuery没有在html文件中运行

> ID：14126585
> 
> 赞同：-1
> 
> 时间：2013-01-02T17:41:21.190
> 
> 标签：jquery, html, css

我有几个连接的外部文件。我尝试使用简单列出文件名称的快捷方式（所有文件都在同一个文件夹中），但只有 CSS 文件“有效”或“连接”或其他什么，所以我现在使用 SHIFT + RMB 来“复制为小路。” 我正在 Notepad++ 中编辑文件，并在 64 位 Windows 7 Home Premium 上的 Google Chrome 中打开文件（如果有区别的话）。

HTML 代码：

```
<html>

<head>
<link rel = "stylesheet" type = "text/css" href = "No Real Purpose.css"/>

<title>Random text</title>
</head>

<body>
<div id = "clickToHide">
Hide div
</div>

<div id = "hidable">
hidden?
</div>

<!--Script inclusion-->
<script type = "text/javascript" src = "C:\Program Files (x86)\EasyPHP5.2.10\www\JQuery Test\No Real Purpose.js"></script>
<script type = "text/javascript" src = "C:\Program Files (x86)\EasyPHP5.2.10\www\JQueryTest\jQuery.js"></script>
</body>
</html> 
```

CSS 代码：

```
div
{
     color: white;
     background-color: black;
     box-shadow: 2px 2px black;
     height: 100px;
     width: 100px;
     padding: 3px;
     margin: 5px;
}

#hidable
{
    color: black;
    background-color: yellow;
    box-shadow: 2px 2px black;
    height: 100px;
    width: 100px;
    padding: 3px;
    margin: 5px;
} 
```

jQuery代码：

```
$(document).ready(function()
{
    $('clickToHide').click(function()
    {
        $('#hidable').slideToggle('fast');
    });
}); 
```

我哪里出错了？

编辑：这些不是在线发布的，它们是本地存储在我的计算机上的。我只是想测试我对 jQuery 的了解。没有服务器！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T17:51:18.530

```
use this to load jquery 

<script     type="text/javascript"src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T17:46:33.177

除了在“clickToHide”的 click() 事件中缺少“#”之外，您还使用了 Windows 样式的路径格式，这是行不通的。

将您的引用更改`C:\...`为类似`/JQueryTest/NoRealPurpose.js`（前导“/”是您的网络根目录）。

避免在文件名中使用空格也很好。当您从开发环境转到生产环境时，拥有空间会混淆 Web 服务器并导致意外问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T17:47:56.670

尝试在 html 的 head 部分中包含 JavaScript 文件。此外，使用相对路径而不是绝对路径：当您使用 EasyPHP 或 xampp 等平台时，通常可以通过在 Web 浏览器栏中输入“http://localhost”来访问本地服务器。

在这种情况下，您将通过输入“localhost/JQueryTest/”打开您的文档（我假设您的 html 文档放在该文件夹中，还请注意，每个 JavaScript 文件都有不同的路径，一个读取 \JQueryTest\ 而另一个读取有一个空格），相对路径将只是“jQuery.js”。

更新：另外，正如其他人所指出的，尽可能避免使用空格并检查您的 jQuery 语法。判断是否加载 jQuery 的快速方法是：

```
$(document).ready( function(){
    alert("Hey cruel world!");
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-02T17:53:01.343

我认为你的问题是这样的：

如果您的`JQueryTest`文件夹位于根目录，那么这应该可以。

```
<script type="text/javascript" src="/JQueryTest/jQuery.js"></script>
<script type="text/javascript" src="/JQueryTest/No Real Purpose.js"></script>
                           //--------^^^^^^^^^^------Your folder reference 
```

这里的顺序很重要 jquery 应该在你的`doc ready`调用脚本之前加载。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-02T17:42:38.437

```
$('clickToHide').click(function() 
```

你之前没有放 a `#`，`clickToHide`所以 jQuery 认为你正在寻找一个名为 clickToHide 的元素，将 a 插入`#`( `#clickToHide`) 并查看它是否有效。

编辑：另外，尽量避免文件名中的空格，这可能会或可能不重要，但这是不好的做法，如果可以的话，你应该避免它。`No Real Purpose.css`可能成为`NoRealPurpose.css`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-02T17:44:01.297

### 是错字还是漏掉了`#`

```
$(document).ready(function()
{
    $('clickToHide').click(function()
------^ here?
    {
        $('#hidable').slideToggle('fast');
    });
}); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-02T17:46:15.007

您应该使用服务器的相对或绝对路径（EasyPHP 模拟 Apache 服务器），而不是计算机的本地路径：

```
<script type="text/javascript" src="No_Real_Purpose.js"></script>
<script type="text/javascript" src="jQuery.js"></script> 
```

# cakephp-2.0 - 在多站点 CakePHP 2.3 安装中共享控制器、模型和视图

> ID：14126587
> 
> 赞同：0
> 
> 时间：2013-01-02T17:41:30.080
> 
> 标签：cakephp-2.0, cakephp-2.3

我正在创建一个 CakePHP 2.3 高级安装（几个应用程序-网站-共享一个相同的**lib**文件夹，所有蛋糕的核心文件都位于该文件夹中）。这没有任何问题，我只需在每个应用程序的 Config 文件夹中编辑*core.php*文件，这样它就知道在哪里可以找到蛋糕的文件。文件系统看起来像：

```
[root]
    [cake-core-files]
    [websites]
        [website-1]
            [app]
            [plugins]
            [vendors]
        [website-2]
        ...
        [website-N] 
```

这些不同的应用程序实际上在某些方面是不同的（它们是不同的网站），但同时它们也有许多共同点（例如某些模型、控制器、功能......）。如果可能的话，我想做的是让这些应用程序也共享一堆控制器、模型等，这样我就可以把它们放在一个地方，而不是现在为每个应用程序复制它们。

我已经在 CakePHP 中看到了**供应商**和**插件**的概念（我实际上在这些网站中使用插件，但是来自 /app/plugins 文件夹），但我不确定这是否适用于我的情况，或者我将如何设置到了。我想这个想法是在 [cake-core-files] 和 [websites] 的同一级别上拥有另一个文件夹（例如 [shared_objects]），但我不知道如何配置 cake 来做到这一点或如何从每个应用程序调用这些对象。

有任何想法吗？

**编辑**

根据下面的评论/回复，我正在尝试使用 bootstrap.php 中的 App:build() 函数来执行此操作，但我无法让它工作。这就是我所做的：

1.  添加了一个新文件夹，我想在其中放置要在所有应用程序之间共享的内容：

    [root] [cake-core-files] [shared-stuff] --> NEW FOLDER [Model] [Config] [websites] [website-1] etc...

2.  将模型**User.php**放入新文件夹**[shared-stuff/Model]**

3.  在引导程序中添加了这一行：

    ```
    App::build(array('Model' => array('/path/to/shared-stuff/Model'))); 
    ```

4.  从其原始位置删除模型**User.php** **[website-1/app/Model]**

完成此步骤后，似乎可以正常工作，从**[shared-stuff]**文件夹中正确加载了模型 User.php （我已经测试了打印**App::objects('Model');**，列出了 User 模型）。但是，它实际上不起作用，当我在 login() 函数中从**UsersController**调用该模型时，登录不起作用（尽管我没有收到任何类型的错误，即使将调试设置为 2）。

此模型使用与默认配置不同的数据库配置（**用户**表位于与默认配置不同的数据库中）。我不知道这是否重要。

有一件事是肯定的，如果我将相同的 User.php 模型留在其原始位置（**[website-1/app/Model]**）它一切正常，包括登录，所以这是我如何尝试配置的问题所有这些共享的东西，而不是模型本身。

任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T20:35:39.467

我认为在多个网站之间共享一些控制器/模型可能很有用，并且无需插件即可：使用共享控制器/模型可以让您在需要时覆盖它。只需将控制器/模型复制到网站的正确文件夹中，系统就应该使用它而不是共享的！

编辑：太好了，它有效，但我认为蛋糕的官方文档中有一点错误：所有路径都应该以目录分隔符终止！在 cakephp 书中没有斜线。将它添加到您的 App::build 路径中，一切都会完美运行！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T01:54:06.610

您可以在核心 Plugins/ 目录中有插件

```
[root]
    [lib]
        [Cake]
    [Plugins]
        [Available]
        [To]
        [All]
    [website-1] // the 'app' dir -> https://github.com/cakephp/cakephp/tree/master/app
        [plugins]
        [vendors]
    [website-2] // you can have many of them named anything, 'app' is just one.
        ...
    [website-N] 
```

此[文件夹](https://github.com/cakephp/cakephp/tree/master/plugins)专门使插件可用于使用 cake 库的任何应用程序

例如：

看看[这个](https://github.com/cakephp/cakephp)。复制`app`到`website-1`，重复直到`website-n`。

# mercurial - Mercurial 中止：错误：克隆/更新后 getaddrinfo 失败

> ID：14126592
> 
> 赞同：1
> 
> 时间：2013-01-02T17:42:08.687
> 
> 标签：mercurial

我查看了一般错误消息，但它似乎总是在尝试克隆存储库后立即出现。`hg serve`如果这有助于阐明这一点，我正在使用。

C:\workspace\Project>hg clone --pull`http://host:8001`客户端请求所有更改
添加变更集
添加清单
添加文件更改
添加了 1556 个变更集，对 2367 个文件（+1 个头）进行了 6734 次更改
更新到分支主干
中止：错误：getaddrinfo 失败

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T11:39:30.297

正如您收到的评论所暗示的那样，我认为您正在克隆的存储库包含子存储库。

错误消息是说 Mercurial 无法找到某些东西的 IP 地址（即 DNS 查找失败），但您显然已经设法连接到带有初始存储库的服务器。子存储库在父存储库的更新过程中被克隆。您在消息之后收到错误的事实`updating to branch trunk`导致得出这是您的问题的结论。

查看`.hgsub`原始存储库中的内容。如果其中有任何内容，它将具有任何子存储库的 URL。我怀疑这些 URL 的编写方式意味着它们无法从您尝试克隆到的机器上访问。如果可能的话，修复这些以使它们足够通用，可以在任何地方工作。

该错误消息应该真正说明它正在查找的内容以及原因。

# android - MapFragment Styled as Dialog 导致 TextView 透明

> ID：14126594
> 
> 赞同：2
> 
> 时间：2013-01-02T17:42:16.633
> 
> 标签：android, dialog, textview, android-fragmentactivity, mapfragment

这是设置：

我正在构建和显示样式为居中对话框的活动。这是为了显示不应在设备上全屏显示的分层内容。

一种类型的内容是地图。所以我已经成功地将一个 MapFragment 加载到一个对话框样式的 FragmentActivity 中。这真的很好用。

问题是当我尝试在地图上方放置一个新的 TextView （充当自定义标题栏）时。问题是 TextView 的内容似乎变得透明，并且之前的 Activity 的内容会渗出。

当地图的活动允许地图全屏时，完全相同的“设计”工作得很好。问题仅在于我尝试将地图设置为自定义大小（并且还与另一个视图一起显示）。

这是活动：

```
public class MapViewActivity extends FragmentActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);

            requestWindowFeature(Window.FEATURE_NO_TITLE);

            setContentView(R.layout.activity_map_view);

            Window window = this.getWindow();
            window.setFlags(WindowManager.LayoutParams.FLAG_NOT_TOUCH_MODAL, WindowManager.LayoutParams.FLAG_NOT_TOUCH_MODAL);
            window.clearFlags(WindowManager.LayoutParams.FLAG_DIM_BEHIND);

            WindowManager.LayoutParams wmlp = window.getAttributes();
            wmlp.y -= 10;
            window.setAttributes(wmlp);

            Intent i = getIntent();
            String lat = i.getExtras().getString("lat");
            String lng = i.getExtras().getString("lng");
            String title = i.getExtras().getString("title");
            String snippet = i.getExtras().getString("address");

            TextView tv = (TextView)this.findViewById(R.id.mapTitle);
            tv.setText(title);

            SupportMapFragment mf = (SupportMapFragment)this.getSupportFragmentManager().findFragmentById(R.id.map);

            MarkerOptions mo = new MarkerOptions();
            mo.position(new LatLng( Double.valueOf(lat), Double.valueOf(lng) ));
            mo.title(title);
            mo.snippet(snippet);

            GoogleMap gm = mf.getMap();

            gm.moveCamera(CameraUpdateFactory.newLatLngZoom(new LatLng( Double.valueOf(lat), Double.valueOf(lng) ), 14));
            gm.setMapType(GoogleMap.MAP_TYPE_NORMAL);
            gm.setMyLocationEnabled(true);
            gm.addMarker(mo);

    }
} 
```

这是布局xml：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="300dp"
    android:layout_height="365dp" 
    tools:context=".MapViewActivity" >

    <TextView 
        android:id="@+id/mapTitle"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:maxLines="1"
        android:textSize="18sp"
        android:textColor="@color/white"
        android:background="@color/blue"
        android:text="TEST TITLE LABEL"
    >
    </TextView>

    <fragment
      android:id="@+id/map"
      android:layout_width="match_parent"
      android:layout_height="280dp"
      android:layout_below="@id/mapTitle"
      class="com.google.android.gms.maps.SupportMapFragment" />

</RelativeLayout> 
```

这是我在清单中定义 Activity 时使用的样式：

```
 <style name="SubViewTheme" parent="android:Theme.Dialog">
    <item name="android:windowAnimationStyle">@style/MainViewAnimation</item>
        <item name="android:windowBackground">@color/white</item>
        <item name="android:background">@null</item>
    </style> 
```

我为展示活动所做的只是使用标准开始`startActivity(i);`

这是结果的屏幕截图。对不起质量差。获取我的 Nexus1 的屏幕帽是一件痛苦的事。

![地图对话框的屏幕截图](../Images/8bdb5bf811883a73546973434bebca55.png)“地图对话框的屏幕截图”

在屏幕截图中，您将看到带有地图的“对话”活动。并且出现了 TextView - TextView 是地图右上角的小深蓝色矩形。然后在混乱标签的左侧，我们将上一个对话框中的文本从 TextView 应该在的位置流血。

有什么明显的我做错了吗？也许我对新的 MapFragment 支持过于雄心勃勃:)。

这个项目需要支持回到 2.3.3，所以我坚持使用支持库。

谢谢你的帮助。如果我的描述中的任何内容没有意义，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-06T08:27:38.977

在地图顶部放置一个透明视图。

```
<RelativeLayout
    android:id="@+id/map"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:clickable="true" />

<View
    android:id="@+id/MyView"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@android:color/transparent" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T14:26:01.280

天哪，我不敢相信这是我找到的唯一答案....

创建另一个片段并在创建时执行 fragmentTransaction 以隐藏您的地图片段，让它运行一段时间（我等待我的 Google 方向调用/函数返回）然后执行另一个 FT 以显示 mapFragment 这解决了透明度问题。

在 onCreate

```
final FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
ft.hide(mDirMapFrag);
ft.commit();
getSupportFragmentManager().executePendingTransactions(); 
```

//隐藏地图，列表片段显示为我的默认值。

//在我的方法中，它是从谷歌方向方法返回的，但你可以做一个快速的处理程序 h = new Handler(); h.postDelayed(new Runnable() {} 等。

```
final FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
ft.show(mDirMapFrag);
ft.commit();
getSupportFragmentManager().executePendingTransactions(); 
```

有没有人有比这更好的解决方案？

# ios - 增加uitableviewcell高度同时增加内部UITextView

> ID：14126601
> 
> 赞同：13
> 
> 时间：2013-01-02T17:42:31.397
> 
> 标签：ios, objective-c, uitableview, uitextview

我根据要显示的内容类型创建了一个`UITableView`不同类型的。`UITableViewCell`其中之一是以这种方式以编程方式创建的`UITableViewCell`with inside ：`UITextView`

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
  ...
  if([current_field.tipo_campo isEqualToString:@"text_area"])
  { 
    NSString *string = current_field.valore;
    CGSize stringSize = [string sizeWithFont:[UIFont boldSystemFontOfSize:15] constrainedToSize:CGSizeMake(320, 9999) lineBreakMode:UILineBreakModeWordWrap];
    CGFloat height = ([string isEqualToString:@""]) ? 30.0f : stringSize.height+10;
    UITextView *textView=[[UITextView alloc] initWithFrame:CGRectMake(5, 5, 290, height)];
    textView.font = [UIFont systemFontOfSize:15.0];
    textView.text = string;
    textView.autoresizingMask =  UIViewAutoresizingFlexibleWidth;
    textView.textColor=[UIColor blackColor];
    textView.delegate = self;
    textView.tag = indexPath.section;
    [cell.contentView addSubview:textView];
    [textView release];   
    return cell;
  }
  ...
} 
```

由于文本视图是可编辑的，包含它的单元格应更改其高度以正确适合文本视图大小。最初我通过调整`UITextView`方法内部的大小来做到这一点`textViewDidChange`：，以这种方式：

```
- (void)textViewDidChange:(UITextView *)textView
{
  NSInteger index = textView.tag;
  Field* field = (Field*)[[self sortFields] objectAtIndex:index];
  field.valore = textView.text;
  [self.tableView beginUpdates];
  CGRect frame = textView.frame;
  frame.size.height = textView.contentSize.height;
  textView.frame = frame;
  newHeight = textView.contentSize.height;
  [self.tableView endUpdates];
} 
```

我将文本视图的新高度保存在一个变量中，然后当`tableView:heightForRowAtIndexPath`调用 : 方法时，我以这种方式调整单元格的大小：

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
  ...
  if ([current_field.tipo_campo isEqualToString:@"text_area"])
  {
      return newHeight +10.0f;
  }
  else
    return 44.0f;
 ...
} 
```

以这种方式，两者都被调整大小但不同步完成，即首先`TextView`调整大小，然后调整单元格的高度，因此用户会立即看到文本视图大于单元格。我该如何解决这种不良行为？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-10T13:32:57.070

我为您的问题创建了一个演示，希望对您有所帮助。

我的解决方案是使用`AutoResizingMask`.`UITextView`

我的 .h 文件

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController<UITabBarDelegate, UITableViewDataSource, UITextViewDelegate>{
    IBOutlet UITableView *tlbView;
    float height;
}

@end 
```

还有我的 .m 文件（仅包括必需的方法）

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    // Do any additional setup after loading the view, typically from a nib.
    height = 44.0;
}

- (void)textViewDidChange:(UITextView *)textView{
    [tlbView beginUpdates];
    height = textView.contentSize.height;
    [tlbView endUpdates];
}

#pragma mark - TableView datasource & delegates
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{
    return 1;
}

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath{
    if (indexPath.row==0) {
        if (height>44.0) {
            return height + 4.0;
        }
    }
    return 44.0;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    UITableViewCell *cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"CellIdentifier"];

    UITextView *txtView = [[UITextView alloc] initWithFrame:CGRectMake(0.0, 2.0, 320.0, 40.0)];
    [txtView setDelegate:self];
    [txtView setAutoresizingMask:UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleRightMargin | UIViewAutoresizingFlexibleTopMargin | UIViewAutoresizingFlexibleBottomMargin | UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight]; // It will automatically resize TextView as cell resizes.
    txtView.backgroundColor = [UIColor yellowColor]; // Just because it is my favourite
    [cell.contentView addSubview:txtView];

    return cell;
} 
```

希望它会帮助你。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-08T08:09:23.833

要调整单元格的大小，您将使用与此类似的代码

```
- (BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text {
    NSString *newText = [textView.text stringByReplacingCharactersInRange:range withString:text];
    CGSize size = // calculate size of new text
CGRect frame = textView.frame;
frame.size.height = textView.contentSize.height;
textView.frame = frame;

    if ((NSInteger)size.height != (NSInteger)[self tableView:nil heightForRowAtIndexPath:nil]) {

        // if new size is different to old size resize cells. 

        [self.tableView beginUpdates];
        [self.tableView endUpdates];
    }
    return YES;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-10T10:24:27.647

Set the TextView Frame With An Animation ..so that it syncs with the cell's animation of expanding height

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-12T11:24:04.540

我不会使用方法为细胞高度而烦恼

```
(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath 
```

而是让您的视图文本字段委托并以如下所示的方式处理以下事件：

```
- (void) textFieldDidResize:(id)sender
{
          [self.tableView beginUpdates];
          [self.tableView endUpdates];
} 
```

还要确保您执行了以下操作：

```
yourInputField.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight; 
```

然后，您唯一需要做的就是调整文本字段的大小。表格视图中的单元格将采用内部文本字段的大小。只需将其作为子视图添加到 cell.contentView。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-05T17:45:47.557

检查一下：[UIView Contentmode](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/UIView/UIView.html#//apple_ref/doc/uid/TP40006816-CH3-SW99) - 使用以下值：

```
cell.contentMode = //...// 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-05T22:01:26.627

```
- (void)textViewDidChange:(UITextView *)textView
{
    UITableViewCell *cell = (UITableViewCell*)textView.superview.superview;

    if (cell.frame.size.height < textView.contentSize.height) {
        [self.tableView beginUpdates];
        CGRect frame = textView.frame;
        frame.size.height = textView.contentSize.height;
        textView.frame = frame;
        CGRect cellFrame = cell.frame;
        cellFrame.size.height = textView.frame.size.height;
        cell.frame = cellFrame;
        [self.tableView endUpdates];
    }

} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-08T14:30:47.880

Siba Prasad Hota 的代码可能会解决问题（您需要从单元格级别引用表格视图），但我有另一种更长的方法。我总是以这种方式做这些事情，因为我喜欢把所有东西都分开（MVC 模式）。如果我是你，我会这样做（来自头部的代码）：

**细胞父协议：**

```
@protocol CellParent <NSObject>
@required
@property (nonatomic, strong) UITableView *tableView;
@end 
```

**电池型号：**

```
@interface CellModel
@property (nonatomic, assign) BOOL hasTextView;
@property (nonatomic, strong) NSString *textViewContent;
-(float)getCurrentHeightForCell;//implement calculating current height of cell. probably     2 * SOME_MARGIN + height of temporary textView with textViewContent variable 
```

**细胞**

```
@interface MyCell
@property (nonatomic, strong) CellModel *dataModel;
@property (nonatomic, weak) id<CellParent> parent;
@property (nonatomic, strong) UITextView *textView;
- (id)initWithStyle:(UITableViewCellStyle)style andModel:(CellModel*) model; 
```

像这样的实现：

```
(id)initWithStyle:(UITableViewCellStyle)style andModel:(CellModel*) model
{
    self = [super initWithStyle:style reuseIdentifier:@"MyCell"];
    if (self) 
    {
        [[NSBundle mainBundle] loadNibNamed:@"MyCell" owner:self options:nil];
        self.dataModel = model;
    }
    return self;
}

-(void) setDataModel:(CellModel *)dataModel
{
    _dataModel = dataModel;
    if(_dataModel.hasTextView)
    {
        //show text view
    }
    else
    {
        //hide text view
    }
    //do other cell modifications
}

-(BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text 
{
    self.dataModel.textViewContent = textView.text;
    [self.parent.tableView beginUpdates];
    [self.parent.tableView endUpdates];
    return YES;
} 
```

**带表格视图的控制器**

```
-(UITableViewCell*) tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{  
    MyCell *cell = [tableView dequeueReusableCellWithIdentifier:@"MyCell"];
    if (cell == nil) 
    {
        cell = [[MyCell alloc] initWithStyle:UITableViewCellStyleDefault andModel:          [self.cellsModels objectAtIndex:indexPath.row]];
    }
    cell.dataModel = [self.cellsModels objectAtIndex:indexPath.row];
    cell.parent = self;
    return cell;
}

-(CGFloat) tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath     *)indexPath
{
    return [((CellModel*)[self.tableContentArray objectAtIndex:indexPath.row]) getCurrentHeightForCell];
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-01-09T15:15:52.850

You should calculate newHeight for cell before loading cell. Instead of calculating newHeight in textViewDidChange, calculate it in heightForRowAtIndexPath and return same as

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
  if ([current_field.tipo_campo isEqualToString:@"text_area"])
  {
      NSString *string = current_field.valore;
      CGSize stringSize = [string sizeWithFont:[UIFont boldSystemFontOfSize:15] constrainedToSize:CGSizeMake(320, 9999) lineBreakMode:UILineBreakModeWordWrap];
      CGFloat height = ([string isEqualToString:@""]) ? 30.0f : stringSize.height+10;

      return height + 10.0f;
  }
  else
  {
      return 44.0f;
  }
} 
```

# php - 从 flash，运行 php 文件以刷新 xml 文件而不弹出窗口

> ID：14126608
> 
> 赞同：0
> 
> 时间：2013-01-02T17:43:04.893
> 
> 标签：php, actionscript-3

从 flash 中，运行 php 文件以刷新 xml 文件而不弹出窗口，没有任何数据从 flash 传递到 php 文件或返回到 flash.just 以运行写入 xml 文件的 php。

忘记添加这个

```
var phpPath:String;
var sendHeader:URLRequestHeader;
var sendReq:URLRequest;
var sendLoader:URLLoader; 
```

这个试过了，好像不行。也许我需要添加

```
mybuton.addEventListener(MouseEvent.CLICK, fl_EnterFrameHandler_4);

function fl_EnterFrameHandler_4(event:Event):void
{

phpPath = "http://www.mysite.com/my_xml_file.php";

sendHeader = new URLRequestHeader("Content-type","application/octet-stream");
sendReq = new URLRequest(phpPath);
sendReq.requestHeaders.push(sendHeader);
sendReq.method = URLRequestMethod.POST;

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T18:01:19.650

在您创建 URLRequest 时，您从未真正发送过该请求。您需要使用[URLLoader](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/URLLoader.html)来执行此操作：

```
var loader:URLLoader = new URLLoader();
loader.load(sendReq); 
```

# jquery - jquery获取当前完整路径

> ID：14126611
> 
> 赞同：1
> 
> 时间：2013-01-02T17:43:17.193
> 
> 标签：jquery, twitter-bootstrap

我有这样的路径：

[http://www.domain.com/admin/item.php?id=4&action=edit](http://www.domain.com/admin/item.php?id=4&action=edit)

并希望获得该路径，与我的菜单的每个元素进行比较，并将“活动”类添加到当前菜单项，如下所示：

```
<ul class="nav nav-list">
<li><a href="http://www.domain.com/admin/item.php?id=1&action=edit">Item 1</a></li>
<li><a href="http://www.domain.com/admin/item.php?id=2&action=edit">Item 2</a></li>
<li><a href="http://www.domain.com/admin/item.php?id=3&action=edit">Item 3</a></li>
<li class="active"><a href="http://www.domain.com/admin/item.php?id=4&action=edit">Item 4</a></li>
<li><a href="http://www.domain.com/admin/item.php?id=5&action=edit">Item 5</a></li>
...
</ul> 
```

我怎样才能用 Jquery 做到这一点？我尝试过的大多数功能，它们都不能获得完整的路径名（所有变量）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T17:46:25.857

使用[属性选择器](http://api.jquery.com/attribute-equals-selector/)选择将 href 属性设置为给定路径的锚元素。然后使用[addClass](http://api.jquery.com/addClass/)添加`active`为所选锚元素的类。如果您想要您所在页面的完整当前路径，请[使用`location.href`](https://developer.mozilla.org/en-US/docs/DOM/window.location)，但请注意，这也将包括当前哈希（如果有的话）。另外，我建议按 ID 选择菜单，因此在导航菜单中添加一个 ID。

```
function setCurrentMenuPathAsActive(path){
   $(".nav li a[href='" + path + "']").addClass("active");
}

setCurrentMenuPathAsActive(location.href); 
```

# c++ - CMake：从 cpp-file 自动生成 c-wrapper 文件

> ID：14126613
> 
> 赞同：0
> 
> 时间：2013-01-02T17:43:29.560
> 
> 标签：c++, cmake, build-automation

由于某些原因，我有很多用 C++ 编写的共享库函数，必须由 C 函数“包装”才能正确调用。现在，我想知道我是否可以自动化这个过程（最好能很好地集成到我的 CMake-build-process 中）

一个例子：假设我有函数定义

```
extern "C" void foo(Somestruct myinfo, char const * const data, char const * const data2) 
```

在我的 .hpp 文件中。现在我将这个定义更改为，说

```
C_WRAPPER void foo(Somestruct myinfo, ARG(1) data, ARG(3) data2) 
```

使用一些宏，可以毫无问题地将其转换为原始形式 - 因此，从功能的角度来看，hpp 文件保持不变。

一些解析器现在应该读取这个文件并生成一个新的 c 文件，其中包含（例如）

```
extern void foo(Somestruct myinfo, char const * const, char const*const);
void foo_wrapper(Array everything) {
     char * data1 = fromArray(array, 1);
     char * data3 = fromArray(arary, 3);
     foo(fromArray(0), data1, data3);
} 
```

边界条件：总体布局看起来总是一样的。唯一的区别是`ARG`s 的数量必须是恒定的。的参数`ARG`给出数据在数组中的位置。

目前包装文件是手动编写的，过去由于界面变化而导致一些耗时的错误。这就是我想自动化这一步的原因。

您知道无需自己创建解析器即可存档此类内容的方法吗？如前所述，最好是适合我使用 CMake 构建过程的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T20:33:07.657

我有幸回答我自己的问题。它可以完全在 CMake 中完成。

这里只是填充`funcstring`包含所有包装函数的变量的 CMake 脚本。使用典型的配置文件，这些字符串可以写在包装函数中。

```
set(sources a.cpp)

foreach(source ${sources})
    file(READ ${source} contents)

    foreach(var IN ITEMS ${contents})
        string(REGEX MATCH "C_WRAPPER[ ]+[a-zA-Z0-9]+[(].*[)]" wrapperfun ${var})

        if(wrapperfun)
        string(REGEX REPLACE "C_WRAPPER[ ]+\([a-zA-Z0-9]+\)[(].*[)]" "\\1" function_name ${wrapperfun})

        string(REGEX MATCHALL "ARG[(][0-9]+[)]" args ${wrapperfun})

        set(lines "")
        set(funcargs "")
        foreach(arg ${args})
            string(REGEX MATCH "[0-9]+" num ${arg})
            set(lines "${lines}
                char * data${num} = fromArray(array, ${num})\;")
            set(funcargs "${funcargs}, arg${num})")
        endforeach(arg)

        set(funcstring "
            ${wrapperfun}\;
            Datum ${function_name}_wrapper(Array everything) {
                ${lines}
                return ${function_name}(fromArray(0), ${funcargs})\;
            }

        ")

        endif()    

    endforeach(var)
endforeach(source) 
```

宏没有被替换——这可以在 CMake 中完成，但是在最终的 C 文件中包含足够的宏定义会更短更直接。

# hibernate - 限制数据库操作

> ID：14126614
> 
> 赞同：0
> 
> 时间：2013-01-02T17:43:35.333
> 
> 标签：hibernate

我有一个关于在使用休眠注释时限制实体类的数据库事务的问题。准确地说，我正在使用带有注释的休眠，如果我想将我的事务限制为仅保存和查看，那么应该限制更新和删除操作。此功能需要从 Entity 类中获得，其中通过 hibernate 注释指定表和列名。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T18:07:11.750

这可能不是一个干净的解决方案，但它仍然应该工作您可以使用实体侦听器方法实现您的意图

```
@PreRemove
@PreUpdate
public void remove() throws Exception{
    throw new Exception("cant remove/update entity");
} 
```

# html - 为什么页面跳转在 Internet Explorer 中有效，而在 Mozilla Firefox 中有效？

> ID：14126615
> 
> 赞同：1
> 
> 时间：2013-01-02T17:43:37.417
> 
> 标签：html

我在下面使用此代码，“单击此处查看保修详细信息”链接会跳转页面，在上传到 ebay 后可在 IE 中使用，但不适用于 Mozilla，是否有任何可以放置的代码来创建页面跳转将适用于所有浏览器？

这是实时链接（仅在此项目上作为测试）

[http://www.ebay.com/itm/Metra-70-1002-1988-1996-Dodge-Jeep-In-Dash-Radio-Installation-Wire-Harness-/350683730934?MfcISAPICommand=ViewItem](http://www.ebay.com/itm/Metra-70-1002-1988-1996-Dodge-Jeep-In-Dash-Radio-Installation-Wire-Harness-/350683730934?MfcISAPICommand=ViewItem)

```
<a href="#policies">Click Here To View Warranty Details</a> </p>
        <p style="text-align: center;">&nbsp;</p>
        <center>
        <p class="pad"><b>Click to enlarge (Photos will open in a new window)</b><br />
        ##ITEM_IMAGES_HORT_M##</p>
        </center>
        <h3>Product Description</h3>
        <div class="pad2">
        <table style="border: black 1px solid;" cellpadding="3">
            <tbody>
                <tr>
                    <td>
                    <p>##ITEM_DESCRIPTION_HTML##</p>
                    <p><strong><span style="font-size: 24px;">Specifications:&nbsp;</span></strong></p>
                    <p>##ITEM_ATTRIBUTES##</p>
                    <p>##CUSTOM1## </p>
                    </td>
                </tr>
            </tbody>
        </table>
        </div>
        <div id="listing-lower">
        <h2 class="item_title"><img alt="" src="http://www.audiosavings.com/content/ebay/newtemplate/tru_policies.jpg" /></h2>
        <a href="" name="policies">&nbsp;</a>
        <div style="text-align: center;" id="infoTabs"><a id="infoTabs"><!-- tab 1 --></a><a name="shipping"></a>
        <div id="tab1">
        <ul class="tablinks">
            <li><span>Shipping</span> </li>
            <li><a href="#nogo" onclick="return show('tab2')">Payment</a> </li>
            <li><a href="#nogo" onclick="return show('tab3')">Return Policy</a> </li>
            <li><a href="#nogo" onclick="return show('tab4')">General Info</a> </li>
            <li><a href="#nogo" onclick="return show('tab5')">Intl. Shipping</a> </li>
        </ul>
        <h4 class="tabtitle">Shipping</h4>
        <ul class="tabinfo">
            <ul class="tabinfo">
                <li><strong><span style="color: #293d86;">Shipping is FREE!<br />
                </span></strong>Free shipping to the 48 continental&nbsp;US&nbsp;is done with ##ITEM_DEFAULT_SHIPPING_METHOD_DESCRIPTION##<br />
                - Orders Tues-Friday - Pay by 1:00 PM EST and get SAME DAY SHIPPING!<br />
                - Orders Sat - Sunday - Ships Monday<br />
                - Orders Monday - Ships Monday or Tuesday <br /> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T17:45:17.047

您的政策锚点应该是

```
 <a id="policies"> 
```

而不是 name 属性。

*编辑* 为 Marc B 提到的：[http ://www.w3schools.com/tags/att_a_name.asp](http://www.w3schools.com/tags/att_a_name.asp)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-02T17:44:51.723

锚点应该是`id=""`属性，而不是`name=""`.

# css - 添加边框并保留半径

> ID：14126617
> 
> 赞同：1
> 
> 时间：2013-01-02T17:43:40.630
> 
> 标签：css

我有一个有半径的盒子 - 我想为其应用边框，但是当我这样做时，“内部”盒子又回到了方形边缘，这可能吗？

CSS

```
.box {
width:100px;
height:50px;
background:red;
border-radius:6px;
margin:20px;
}

.box2 {
width:100px;
height:50px;
background:red;
border-radius:6px;
margin:20px;
border:5px solid #ccc;
} 
```

HTML

```
<div class="box"></div>
<div class="box2"></div> 
```

如您所见，第二个框有边框，但我也想保留内半径。

小提琴在这里：[CSS边框小提琴](http://jsfiddle.net/darrensw/5Qvgq/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T17:46:11.533

边框太厚，其内半径无法明显变圆。`border-radius`如果您想看到圆角的内角，您将不得不增加第二个框。

`border-radius`您可以通过获取第一个框并将第二个框添加到其中，使您的第二个框具有与您的第一个框相同的圆角`border-width`。所以对于`6px`（从你的第一个盒子）的内半径`border-width: 5px`，你`border-radius: 11px`在第二个盒子上。

[更新的小提琴](http://jsfiddle.net/BoltClock/5Qvgq/3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T17:49:05.737

You could use box-shadow to get the desired effect:

```
box-shadow:0 0 0 5px #ccc; 
```

See in this [jsFiddle](http://jsfiddle.net/eTgYx/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T17:51:01.153

You could do it like this to have the effect of a completely rounded border:

CSS:

```
.box {
    width:100px;
    height:50px;
    background:red;
    border-radius:6px;
    margin:20px;
}

.box2 {
    width:100px;
    height:50px;
    background:#ccc;
    border-radius:6px;
    margin:20px;
    border:5px solid #ccc;
}

.boxinbox {
    background:red;
    border-radius:6px;
    width:100%;
    height:100%;
    } 
```

HTML:

```
 <div class="box"></div>
  <div class="box2">
    <div class="boxinbox"></div>
  </div> 
```

# ios - UIScrollView：addSubview 不添加项目

> ID：14126622
> 
> 赞同：0
> 
> 时间：2013-01-02T17:44:09.857
> 
> 标签：ios, uiscrollview

我花了几个小时试图解决我的问题，但我自己找不到解决方案。我有一些代码，将 UIView 添加到我的滚动视图中：

```
- (void) loadSpareparts:(VitoParts*) parts{
    data = [VitoServer fetchPartList:parts];

    int itemHeight = 100;
    [scrollView setContentSize:CGSizeMake(scrollView.frame.size.width, (data.count * itemHeight))];

    NSLog(@"Item count: %d", data.count);

    for (int i=0; i<data.count; i++) {
        VitoPart *sparepart = [data objectAtIndex:i];
        VIOnePart *partView = [[VIOnePart alloc] init];

        [partView setFrame:CGRectMake (0, (i * itemHeight), scrollView.frame.size.width, itemHeight)];

        [partView setData:sparepart];
        [scrollView addSubview:partView];
        //        [self.view addSubview:partView];
    }

    NSLog(@"In scrollView: %d", scrollView.subviews.count);
} 
```

但它不起作用。我的最后一条日志消息告诉我们，. 中有哪些 0 项`scrollView`。如果我添加`partView`到`self.view`，它工作正常。IBOutlet 也连接到 XIB 编辑器中的 ScrollView。

我应该在哪里尝试找到解决方案？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T17:53:10.360

您是在之前还是之后调用此方法`-(void)viewDidLoad`？如果之前，视图将不会加载，因此`scrollView`将为零。

# ios - APNS？还是轮询？哪个更可靠？

> ID：14126624
> 
> 赞同：0
> 
> 时间：2013-01-02T17:44:23.567
> 
> 标签：ios, apple-push-notifications, restkit

我正在开发一个小型消息应用程序，类似于 IM 或 SMS 文本消息。我显然计划在应用程序未运行时使用 Apple 的推送通知服务 (APNS) 来通知用户新消息。*问题是*，它什么时候运行呢？我是否应该依靠 APNS 来通知应用何时刷新用户收到的消息列表？或者，我应该定期轮询以获取任何新消息吗？

我的应用程序将使用 RestKit 0.20 作为其 Web 服务客户端库。轮询应该很容易在那里配置，但我担心创建连接的额外开销，以及轮询将创建的带宽利用率增加。

Is APNS reliable enough that I can use it to trigger a UI refresh when a new message is received? Or should I handle it manually within the app itself via polling?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T17:47:17.610

APNS 非常可靠，因此您可以在收到新消息时使用它来刷新应用程序。但是，它不是 100%，所以我计划在附近保留一个刷新按钮以允许用户轮询如他们所愿。

# c# - 在 RadGrid 中获取过滤器控件

> ID：14126630
> 
> 赞同：1
> 
> 时间：2013-01-02T17:44:51.120
> 
> 标签：c#, asp.net, telerik, telerik-grid

我正在尝试为`radgrid`. 当我尝试以下操作时，我似乎无法找到过滤器控件，没有任何反应。

```
foreach (GridFilteringItem filterItem in InitAlerts.MasterTableView.GetItems(GridItemType.FilteringItem))
{
    RadComboBox initLoans = (RadComboBox)filterItem.FindControl("InitLoan");

    var loannumber = (from DataRow dRow in initTable.Rows
                        select new { loan_number = dRow["loan_loan_number"] }).Distinct().ToList(); 

    initLoans.DataSource = loannumber;
    initLoans.DataBind();
    Label1.Text = initLoans.ID.ToString();
} 
```

此外，这只是在运行`Page_Load`，如果这有所作为......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-21T21:10:50.280

您需要在 radgrid 的项目数据绑定事件中获取过滤器

```
 Protected Sub gvRadGrid_ItemDataBound(ByVal sender As Object, ByVal e As GridItemEventArgs)
        'filter logic
        If e.Item.ItemType = GridItemType.FilteringItem Then
            Dim filterItem As GridFilteringItem = CType(e.Item, GridFilteringItem)
            Dim cbcombobox As RadComboBox = TryCast(filterItem.FindControl("cbcombobox "), RadComboBox)

cbcombobox .Datasource = 'your datasource'
cbcombobox .databind
        End If

end sub 
```

当然这是用 VB 编写的，但我相信你可以将它转换为 C#

这是我通过 VB 到 C# 转换器的初步转换。它确实总是打得很好，但至少这是一个开始。

```
protected void gvRadGrid_ItemDataBound(object sender, GridItemEventArgs e)
{
    //filter logic
    if (e.Item.ItemType == GridItemType.FilteringItem) {
        GridFilteringItem filterItem = (GridFilteringItem)e.Item;
        RadComboBox cbcombobox = filterItem.FindControl("cbcombobox ") as RadComboBox;

        //your datasource'
        cbcombobox.Datasource = //your datasource
  cbcombobox.databind;
    }

} 
```

# php - 使用 Chrome + XHR 时未定义 PHP POST 变量

> ID：14126633
> 
> 赞同：7
> 
> 时间：2013-01-02T17:44:52.720
> 
> 标签：php, javascript, google-chrome, xmlhttprequest

这个问题几乎与一年前未回答的问题相同：

[HTTP-POST XHR 在 chrome 中不起作用](https://stackoverflow.com/questions/8033263/http-post-xhr-not-working-in-chrome)。

我希望找到一个解决方案，并且可以提供比原始问题更多的细节。

**背景**

我有一个服务器端 php 脚本，它应该从表单或 XHR 请求中获取 POST 数据。当我使用提交表单测试网站时，它可以在 Chrome 和 IE9 中运行。但是，当我使用 XHR 生成请求时，在客户端使用 Chrome 时未定义 php POST 变量。这种行为是不一致的：大约 20 次尝试中的 1 次，php 确实接受了数据。

我检查了`php://input`流，发现在所有情况下都将发布数据发送到服务器；`$_SERVER`请注意，测试用例之间的一小部分 HTTP 标头 ( ) 是不同的。

**代码**

服务器端：

```
<?php
   echo file_get_contents("php://input") . "\n";
   print_r($_SERVER);
   print_r($_POST);
?> 
```

客户端表单版本（Chrome 和 IE9 都可以）

```
<form action="scriptName.php" method="post">
      Field: <input type="text" name="myField"><br>
      <input type="submit" value="Submit">
</form> 
```

客户端 XHR 版本（IE9 始终有效，Chrome 约 5% 的时间有效）

```
<script>
function postToURL(url,data)
{
  // Typical XHLHttpRequest declarations are removed for brevity
  //  - checks browser type and declares xmlhttp accordingly
  //  - defines a onreadystatechange handle

    xmlhttp.open("POST",url,false);
    xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
    xmlhttp.send(data);
}
</script>
...
<form>
<button type="button" onClick="postToURL('scriptname.php','myField=test');">
Test
</button>
</form> 
```

**输出**

在所有情况下，请求正文数据 ( `php://input`) 返回相同的值。标题大多相同，但 Chrome`[HTTP_PRAGMA] => no-cache`在 XHR 模式下添加了一个

在 Chrome + XHR 的情况下，该`$_POST`变量被定义为except。`[myField] => test`

**问题**

问题可能发生在哪里？HTTP标头是否有问题，或者我应该查看服务器端。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T20:59:30.620

**将此代码放在页面的第一行**

```
<?php ob_start(); error_reporting(E_ALL & ~E_NOTICE & ~8192); ?>
<!-- Ignore Errors , Header Sent Report --> 
```

**以及页面最后一行中的这段代码**

```
<!-- Ignore Header Sent Error -->
<?php ob_flush(); ?>
<!-- Ignore Header Sent Error --> 
```

我希望这对你有帮助

# c# - 使用会话信息、c# 和 ASP.NET 在每个页面上验证用户

> ID：14126636
> 
> 赞同：1
> 
> 时间：2013-01-02T17:45:14.893
> 
> 标签：c#, asp.net, session

我的问题更多的是关于如何使用会话信息在网站上实现功能的建议。我有一个网站要求在登录页面上输入用户名和密码。当用户成功登录时，会创建一个会话来存储他们的用户名和与帐户相关的一些其他变量。在`Page_Load`登录后的函数中，我成功地通过会话变量访问了附加到用户的这些信息，验证它是否正确实现。

在 MySession 类中：

```
private MySession()
{
   Username = Data.User.lblUsername;
   CompanyId = Data.User.lblCompanyId;
} 
```

在我的欢迎页面中（成功登录后立即）

```
private void Page_Load(object sender, System.EventArgs e)
{
   secure_username = MySession.Current.Username;
   ...
} 
```

我想使用此信息，即`secure_username`在访问页面后验证用户，以便人们不再跳过登录表单。在`MySession`课堂上，我是否只是`if(MySession.Current.Username == ??)`在函数开始时使用语句来检查每个变量`Page_Load`，还是有适当的方法来解决这个问题？

如果需要，请要求澄清。谢谢。

**编辑：**根据给出的一些回复，我认为重要的是要注意，如果用户突然变得匿名（或超时），他们应该被重定向到登录页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T18:04:14.050

如果您使用表单身份验证，则可以添加以下标签`web.config`以拒绝任何匿名访问。如果这样做，则不必检查用户是否在每个页面上都登录。

```
<authorization>
  <deny users="?" /> 
</authorization> 
```

添加此项以允许所有用户查看 Login.aspx 以便他们可以登录

```
<location path="Login.aspx" allowOverride="false">
    <system.web>
        <authorization>
            <allow users="*"/>
        </authorization>
    </system.web>
</location> 
```

添加这个，以便匿名用户可以看到所有 css/images 文件夹

```
<location path="css" allowOverride="false">
    <system.web>
        <authorization>
            <allow users="*"/>
        </authorization>
    </system.web>
</location>

<location path="images" allowOverride="false">
    <system.web>
        <authorization>
            <allow users="*"/>
        </authorization>
    </system.web>
</location> 
```

您可能需要根据您的网站设置和您希望任何匿名用户访问的文件夹添加额外的位置标签

如果登录表单身份验证会话过期，用户将被重定向到您在此标签中提到的 url

```
<forms loginUrl="Login.aspx" timeout="30">
</forms> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T17:52:12.747

如果您需要在每个页面上执行相同的操作，听起来您需要一个基类，所有安全页面都继承自：

**基本页面：**

```
public class BasePage : System.Web.UI.Page
{

  public user secure_username
  {get;set;}

  protected void Page_Load(object sender, EventArgs e)
  {
    //add your checks that repeat on each page
  }
} 
```

**其他页面：**

```
public class AuthenticatedUsersPage : BasePage
{

} 
```

**注意**：这当然假设您已经对配置文件进行了授权和身份验证（有关更多信息，请参见 rs 的答案）。此外，如果您使用表单身份验证，请记住让会话持续时间长于表单身份验证超时时间。

# objective-c - 从 NSImageView 中的 Controller 对象获取实例（可可）

> ID：14126650
> 
> 赞同：0
> 
> 时间：2013-01-02T17:46:38.200
> 
> 标签：objective-c, xcode, cocoa

我是 Objective-C 的新手。

我用图像井（NSImageView）和一些按钮做了一个小应用程序。从按钮和标签接收动作。我创建了一个名为“Controller”的类。我已使用“对象”对象将此类连接到 InterfaceBuilder 文件。

对于 Image Well，我创建了一个从 NSImageView (DImageView) 继承的类，并将该类设置为 ImageWell 的类（使用 interfaceBuilder）

在这个类中，我覆盖了 mouseDown 方法：

```
//Class DImageView
- (void) mouseDown:(NSEvent *)theEvent
{
    NSLog(@"Test");
} 
```

现在我想从这个方法调用一个在 Controller 类中定义的方法。

但是，如果我使用 [[Controller alloc] init] 创建控制器对象的新实例。我正在创建一个新实例并且无法访问 Controller 类中的 IBOutlets 对吗？

我怎么解决这个问题？

谢谢您的帮助 ..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T17:53:11.380

通过 xib 文件链接它：

![在此处输入图像描述](../Images/b42ecbde985af04b7b5299f7ffe50dcf.png)

并考虑覆盖 AcceptFirstResponder ，否则您将不会收到任何鼠标事件。

# php - Laravel 非静态方法问题

> ID：14126651
> 
> 赞同：2
> 
> 时间：2013-01-02T17:46:40.553
> 
> 标签：php, model, laravel, non-static

具有以下型号：

**新闻.php**

```
class News extends Aware {

    public static $table = 'noticia';
    public static $key = 'idnoticia';
    public static $timestamps = false;

    public static $rules = array(
        'titulo' => 'required',
        'subtitulo' => 'required',
    );

    public function images()
    {
        return $this->has_many('Image');
    }
} 
```

**图像.php**

```
class Image extends Aware {

    public static $timestamps = true;

    public static $rules = array(
        'unique_name' => 'required',
        'original_name' => 'required',
        'location' => 'required',
        'news_id' => 'required',
    );

    public function news()
    {
        return $this->belongs_to('News');
    }

} 
```

然后在控制器中我执行以下操作：

```
$image = new Image(array(
    'unique_name' => $fileName,
    'original_name' => $file['file']['name'],
    'location' => $directory.$fileName,
    'news_id' => $news_id,
));
News::images()->insert($image); 
```

我不断收到以下错误消息：

> 假设 $this 来自不兼容的上下文，不应静态调用非静态方法 News::images()

任何想法我做错了什么？

`public static function images()`似乎不需要设置，因为刷新后我收到一条错误消息

> $this 不在对象上下文中时

戈登说`News::images()->insert($image);`我这样做是在做一个静态调用，但这就是锯做的方式

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T17:48:38.030

You're using `$this` in a function that is called `static`ally. That's not possible.

`$this` becomes available only after you create an instance with `new`.

If you turn on strict mode you will get another error, namely that `images` is not a static function and thus shouldn't be called statically.

The problem is in `News::images()`, not in `images()->insert($image);`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T18:25:51.453

您缺少一些步骤。

图片属于新闻，但您没有引用要更新的新闻帖子。
你可能想做：

```
$image = new Image(array(...));
$news = News::find($news_id);
$news->images()->insert($image); 
```

更多在[文档](http://laravel.com/docs/database/eloquent)中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T17:50:49.990

$this can only be used within an object instance. Class::method() calls a static method of the specified class.

In your case, you mixed both.

Your function definition for images is for an object instance:

```
public function images()
{
    return $this->has_many('Image');
} 
```

You are calling it as a static method:

```
News::images()->insert($image); 
```

The `News` class would need to be instantiated or the images method be modified to support static calls.

# android - 找不到Android以下类

> ID：14126653
> 
> 赞同：0
> 
> 时间：2013-01-02T17:46:45.373
> 
> 标签：android

我正在尝试将微调器加载到我的布局中并不断收到此错误：

找不到以下类： - Spinner（更改为 android.widget.Spinner、修复构建路径、编辑 XML）

这是我的xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <Spinner
        android:id="@+id/spn_dates"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:onClick="displayDatesToSpiner" />

    <ListView
        android:id="@+id/LST_bought_products"
        android:layout_width="match_parent"
        android:layout_height="302dp" >
    </ListView>

</LinearLayout> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-12-09T10:51:25.260

当您在 android 清单中重命名标准 AppTheme 时，有时会发生这种情况。它会很好地构建和部署，但 xml 设计编辑器不会呈现它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-08-25T04:21:45.743

这通常是因为某处存在无效属性。删除onClick，它将起作用。

# java - 我在我的 Java 项目中遇到了一些反思

> ID：14126654
> 
> 赞同：0
> 
> 时间：2013-01-02T16:52:40.503
> 
> 标签：java, reflection

我在 Bukkit 插件项目上工作了一段时间，终于决定正式发布。因此，在我疯狂地记录有关我项目的所有内容的过程中，我决定为想要使用它们的人清理一些 API。现在，我遇到了一个问题。

基本上，在此 API 中，您必须实现一个接口，然后将您的实现注册到一个管理每个实现的类，并使用插件内捆绑的 PluginMetrics 检查/注册另一个变量。

这是我的界面，“名称”和“跟踪器”字段是关注的字段：

```
public interface IAction {

    /**
     * Name of the action.
     */
    String name = null;
    /**
     * Stores args passed to the action by the player.
     */
    String[] args = null;
    /**
     * Holds the Metrics tracker object.
     */
    Tracker tracker = null;

    ...
} 
```

而且，这是我所有问题出现的方法（和 init() 方法）：

```
public static void registerAction(final Class a) {
    try {
        store.put((String) a.getField("name").get(a), a);
        log.exDebug(String.format("Action %s (%s) was registered.", (String) a.getField("name").get(a), a.getCanonicalName()));
        try {
            Tracker metric = (Tracker) a.getField("tracker").get(a);
            try {
                OpenAuth.getMetrics().addCustomData(metric);
                log.exDebug(String.format("Registered Metrics data tracker [%s] from %s.", metric.getColumnName(), a.getCanonicalName()));
            } catch (java.lang.Exception e) {
                log.info("Exception occurred while registering Action data tracker.");
            }
        } catch (java.lang.Exception e) {
            log.info("Exception occurred while registering Action data tracker.");
            // e.printStackTrace();
        }
    } catch (java.lang.Exception e) {
        log.info("Exception occurred while registering an Action.");
        e.printStackTrace();
    }
}

public static void init() {
    for (Actions a : Actions.values()) {
        try {
            registerAction(a.getAction());
        } catch (java.lang.Exception e) {
            log.info("Exception occurred while initialising Actions enumerator.");
            e.printStackTrace();
        }
    }
    for (Object ob : classLoader.load().getClasses()) {
        Class c = null;
        try {
            c = (Class) ob;
        } catch (java.lang.Exception e) {
            log.info("Exception occurred while casting up external Action.");
            e.printStackTrace();
        }
        try {
            registerAction(c);
        } catch (java.lang.Exception e) {
            log.info("Exception occurred while registering external Action.");
            e.printStackTrace();
        }
    }
} 
```

和一个示例实现：

```
public class FreezeStick implements IAction {

    public static final String name = "freeze";
    public static final Tracker tracker = new Tracker("FreezeStick");

    private String[] args = null;
    private Session attached;
    private SessionController sc;
    private final LogHandler log = new LogHandler();
    private final String permissible = "openauth.action.freeze";
    private OAServer server;
    private boolean used = false;

    protected OAPlayer sender;
    protected OAPlayer target;

    public FreezeStick(OAServer server, Session attached) {
        this.server = server;
        this.sc = server.getController().getSessionController();
        this.attached = attached;
        this.setSender(this.attached.getPlayer());
    }

-- etc.. -- 
```

每次`Tracker metric = (Tracker) a.getDeclaredField("tracker").get(a);`发生时，都会报告为`null`。我试过用 a.getField() 而不是 a.getDeclaredField()，但同样的问题。name 和 tracker 变量`private, static, and final`在实现中声明时都会收到，并且自从我第一次编写此代码以来，在 name 变量上使用 a.getField() 就可以正常工作。

如果有人能指出我正确的方向，我将不胜感激:)

此外，如果它有助于更​​好地解决我的问题，则会出现以下异常：

```
2013-01-02 10:48:10 [INFO] [OpenAuth-debug] Action ban (me.maiome.openauth.actions.BanStick) was registered.
2013-01-02 10:48:10 [INFO] [OpenAuth] Exception occurred while adding Action data tracker.
2013-01-02 10:48:10 [SEVERE] java.lang.NullPointerException
2013-01-02 10:48:10 [SEVERE]    at me.maiome.openauth.actions.Actions.registerAction(Actions.java:65)
2013-01-02 10:48:10 [SEVERE]    at me.maiome.openauth.actions.Actions.init(Actions.java:104)
2013-01-02 10:48:10 [SEVERE]    at me.maiome.openauth.bukkit.OpenAuth.onEnable(OpenAuth.java:230)
2013-01-02 10:48:10 [SEVERE]    at org.bukkit.plugin.java.JavaPlugin.setEnabled(JavaPlugin.java:217)
2013-01-02 10:48:10 [SEVERE]    at org.bukkit.plugin.java.JavaPluginLoader.enablePlugin(JavaPluginLoader.java:457)
2013-01-02 10:48:10 [SEVERE]    at org.bukkit.plugin.SimplePluginManager.enablePlugin(SimplePluginManager.java:381)
2013-01-02 10:48:10 [SEVERE]    at org.bukkit.craftbukkit.v1_4_6.CraftServer.loadPlugin(CraftServer.java:278)
2013-01-02 10:48:10 [SEVERE]    at org.bukkit.craftbukkit.v1_4_6.CraftServer.enablePlugins(CraftServer.java:260)
2013-01-02 10:48:10 [SEVERE]    at org.bukkit.craftbukkit.v1_4_6.CraftServer.<init>(CraftServer.java:214)
2013-01-02 10:48:10 [SEVERE]    at net.minecraft.server.v1_4_6.PlayerList.<init>(PlayerList.java:52)
2013-01-02 10:48:10 [SEVERE]    at net.minecraft.server.v1_4_6.DedicatedPlayerList.<init>(SourceFile:11)
2013-01-02 10:48:10 [SEVERE]    at net.minecraft.server.v1_4_6.DedicatedServer.init(DedicatedServer.java:104)
2013-01-02 10:48:10 [SEVERE]    at net.minecraft.server.v1_4_6.MinecraftServer.run(MinecraftServer.java:399)
2013-01-02 10:48:10 [SEVERE]    at net.minecraft.server.v1_4_6.ThreadServerApplication.run(SourceFile:849) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T17:45:39.217

接口不能声明字段，那是实际代码吗？

您面临的问题是该`getDeclaredField`方法将获取具有该给定名称的字段，但不会搜索超类。为了回答问题的反射部分，我建议您创建一个辅助方法，该方法将`.getSuperclass()`在 Class 对象（以及该对象的超类等）上不断调用，直到您到达声明该字段的类。（编辑，以匹配给定的示例：要获取静态字段，您应该使用`field.get(null);`.）

然而，更合适的解决方案是让接口声明一些 getter 方法 -`Tracker getTracker();`和`String getName();`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T22:57:57.143

我找到了我的答案。事实证明，在准备好使用 Metrics 实例之前，我试图在 Metrics 实例上运行 #addCustomData() 。只需要在我的控制器中将 Actions.init() 向下移动几行:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T22:11:18.423

如果您正在使用结构为 bean 的类对象，那么您应该在 spring 中查看 apache-commons 或 BeanWrapper 中的 BeanUtils（名称上不确定 100%）。在幕后，它们为您处理低级反射和自省，因此您所要做的就是编写一个简单的方法调用来检索一个值。

查看 registerAction，您只需尝试转换传入的类对象，这可能会导致下游一些头痛。

我认为您可能可以使用泛型重写以强制参数成为 Tracker 类对象

```
public static void registerAction(final Class<Tracker> a) { 
```

在尝试使用它们之前，您还可以添加一些检查以查看类是否包含方法或字段。

# sql - 我应该将 XML Blob 放入单独的表中吗？

> ID：14126664
> 
> 赞同：3
> 
> 时间：2013-01-02T17:47:21.943
> 
> 标签：sql, sql-server-2008, database-design

我正在设计一个有很多记录的事务表。它将有很多读取和写入。

用户将在某一时刻上传一个 XML 文件，我将其存储在 XML 类型的数据库列中。

对于给定的事务记录，不需要像其他所有内容那样频繁地使用此 XML。它可能只会被读取几次，并且通常只会被插入而不被更新。

我想知道将此 XML 字段存储在单独的表中是否有任何优势。然后，我可以只在需要时加入它。我认为唯一的优势是“主”表上的各个记录将占用更少的空间。但是，如果我的表被正确索引，那真的很重要吗？

我怀疑我对此想得太多了，而且我的优化还为时过早。我应该把 XML 字段留在主表上吗？

我拥有的一个示例 XML 文件是 12KB。我不希望它变得比这大得多。我不确定 SQL Server 的 XML 数据类型是否会比这更有效地存储信息。

澄清一下，这是一对一的关系。每个事务都有一个 XML blob。多个事务不会有一个 XML blob。每个事务*最终*都应该得到一个 XML blob，即使它不是立即的。

谢谢，泰德兹

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T20:30:40.607

答案是您无需修改​​或以其他方式损害您的*逻辑*数据设计以适应此*物理*存储考虑。

`'large value types out of row'`这是因为在 SQL Server 中，XML 是一种“大值类型”，您可以通过使用系统过程中的选项来控制这些是物理存储在行内还是行外`sp_tableoption`，如下所示：

```
EXEC sys.sp_tableoption N'MyTable', 'large value types out of row', 'ON' 
```

如果将其设为 OFF，则小于 8000 字节的 XML 值将存储在行中。如果将其设置为 ON，则所有 XML 值（和 [N]Varchar(MAX) 列）都将存储在表外的单独区域中。（这都在这里详细解释：[http](http://technet.microsoft.com/en-us/library/ms189087(SQL.105).aspx) ://technet.microsoft.com/en-us/library/ms189087(SQL.105).aspx ）

将其设置为哪个问题很难说，但一般来说：如果您希望大量检索/修改此列，我建议您将其放入行内。否则将其存储在行外。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T18:13:52.720

如果您的 XML 相当大，并且有很多用例在查询中不需要该信息 - 那么将其放入单独的表中可能是有意义的 - 即使存在 1:1 关系.

这里的动机是这样的：如果您的“基本”表较小，例如不包含 XML blob，并且您经常查询您的表*而不*需要检索 XML，那么这个较小的行大小可以带来更好的性能基表（因为更多的行适合一个页面，因此 SQL Server 需要加载更少的页面来满足您的某些查询）。

另外：如果 XML 仅在少数情况下存在（例如，只有 10-20% 的行实际上有 XML blob），那么这也可能是有利于将 XML blob“外包”到单独的表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T17:58:14.380

不，你不应该。如果存在一对一关系，则属于同一张表。连接很昂贵。

# java - 使用剪贴板时 KeyListener 中的奇怪行为

> ID：14126668
> 
> 赞同：1
> 
> 时间：2013-01-02T17:47:25.263
> 
> 标签：java, swing, jtable, clipboard, keylistener

我尝试为我的 JTable 做一个简单的`ctrl`+ `c`，但是当使用控制按钮时，整行被复制，而不是指定的单元格。如何获得想要的效果？

```
public class ClipboardTable {

private static final Clipboard clipboard = Toolkit.getDefaultToolkit()
        .getSystemClipboard();
public static JTable tab;

public static void copyToClipboard(JTable ctaable) {
    StringBuilder str = new StringBuilder("");
    for (int i = 0; i < ctaable.getSelectedRows().length; i++) {
        str.append(ctaable.getValueAt(ctaable.getSelectedRows()[i], 0));
    }
    StringSelection strsel = new StringSelection(str.toString());
    clipboard.setContents(strsel, strsel);
    System.out.println("expected: "+str.toString());
}

public static void main(String[] args) {
    JFrame jf = new JFrame();
    jf.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    Object[][] data = {{1,2,3},{5,6,7},{8,9,0}};
    tab = new JTable(data, new String[] {"a","b","c"});
    KeyListener searchKeyListen = new KeyAdapter() {
        @Override
        public void keyPressed(KeyEvent e) {
            ClipboardTable.copyToClipboard(ClipboardTable.tab); //this works fine
            if (e.isControlDown()) {
                if ((e.getKeyCode() == KeyEvent.VK_C)) {
                    ClipboardTable.copyToClipboard(ClipboardTable.tab); // whole row is copied instead of only Cell
                }
            }
        }
    };
    tab.addKeyListener(searchKeyListen);
    jf.add(tab);
    jf.pack();
    jf.setVisible(true);
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T18:03:08.670

使用[Swing](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)的键绑定，因为`KeyListener`/`KeyAdapter`在与 Swing 组件一起使用时存在已知问题。

似乎与上述实现工作正常：

```
import java.awt.Toolkit;
import java.awt.datatransfer.Clipboard;
import java.awt.datatransfer.StringSelection;
import java.awt.event.ActionEvent;
import java.awt.event.KeyEvent;
import javax.swing.AbstractAction;
import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JTable;
import javax.swing.KeyStroke;

public class ClipboardTable {

    private static final Clipboard clipboard = Toolkit.getDefaultToolkit()
            .getSystemClipboard();
    public static JTable tab;

    public static void copyToClipboard(JTable ctaable) {
        StringBuilder str = new StringBuilder("");
        for (int i = 0; i < ctaable.getSelectedRows().length; i++) {
            str.append(ctaable.getValueAt(ctaable.getSelectedRows()[i], 0));
        }
        StringSelection strsel = new StringSelection(str.toString());
        clipboard.setContents(strsel, strsel);
        System.out.println("expected: " + str.toString());
    }

    public static void main(String[] args) {
        JFrame jf = new JFrame();
        jf.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        Object[][] data = {{1, 2, 3}, {5, 6, 7}, {8, 9, 0}};
        tab = new JTable(data, new String[]{"a", "b", "c"});

        tab.getInputMap(JComponent.WHEN_FOCUSED).put(KeyStroke.getKeyStroke(KeyEvent.VK_C, KeyEvent.CTRL_DOWN_MASK, true), "CTRL C");
        tab.getActionMap().put("CTRL C", new AbstractAction() {
            @Override
            public void actionPerformed(ActionEvent ae) {
                ClipboardTable.copyToClipboard(ClipboardTable.tab); // whole row is copied instead of only Cell
            }
        });

        jf.add(tab);
        jf.pack();
        jf.setVisible(true);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T17:54:53.410

您可以设置每个单元格的选择范围：

```
tab.setCellSelectionEnabled(true); 
```

请注意，Swing 中的首选方法是使用[Key Bindings](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)`KeyListeners`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T17:56:25.693

你应该

*   去除那个`KeyListener`
*   而是选择`Action`具有正确[键绑定的 。](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)因为`Action`你可以使用`TransferHandler.getCopyAction()`
*   如果您对标准行为不满意，请自定义`TransferHandler`您的`JTable`

# charts - invient 图表在 web.xml 中添加 on-vaadin 指示

> ID：14126669
> 
> 赞同：0
> 
> 时间：2013-01-02T17:47:26.547
> 
> 标签：charts, vaadin

我从其他帖子中了解到，必须根据 Demo 代码修改 mainServlet 文件。N 然后必须在 web.xml 中指定 servlet 文件 但是，在我的 web.xml 中，为了使用我的 Rest 服务，我已经指定了一个 servlet 类。

问题：我该如何解决这个问题？

以下是我正在做的事情：

# 1：

```
<servlet>
        <servlet-name>ServletAdapter</servlet-name>
        <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>ServletAdapter</servlet-name>
        <url-pattern>/services/*</url-pattern>
    </servlet-mapping> 
```

问题是 Invient Widgetset 不会被加载。

# 2：如果我必须在此处指定 servletfile，那么我应该如何让我的 Rest Service 工作？My Rest 服务用于使用 auth-constrain 进行安全登录。

```
<servlet>
    <servlet-name>VaadinApplication</servlet-name>
    <servlet-class>suricate.vaadin.MyApplicationServlet</servlet-class>
    <init-param>
        <param-name>application</param-name>
        <param-value>suricate.vaadin.MyApplication</param-value>
    </init-param>
    <init-param>
        <param-name>widgetset</param-name>
        <param-value>com.example.myapp.widgetset.MyAppWidgetSet</param-value>
    </init-param>
</servlet> 
```

我希望有人可以帮助我解决这个问题。首先十分感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T19:17:01.557

您可以覆盖类`writeAjaxPageHtmlVaadinScripts`中的方法`ApplicationServlet`并注入所需的 invient 图表 js 和 css 文件。

这是我所做的。

```
public class TogetherApplicationServlet extends ApplicationServlet {

    @Override
    protected void writeAjaxPageHtmlVaadinScripts(Window window,
            String themeName, Application application, BufferedWriter page,
            String appUrl, String themeUri, String appId,
            HttpServletRequest request) throws ServletException, IOException {

        page.write("<script type=\"text/javascript\" language=\"javascript\" src=\""
                + appUrl
                + "/modules/core/jquery/jquery-1.4.4.min.js\"></script>\n");
        page.write("<script type=\"text/javascript\" language=\"javascript\" src=\""
                + appUrl + "/modules/core/js/highcharts.js\"></script>\n");
        page.write("<script type=\"text/javascript\" language=\"javascript\" src=\""
                + appUrl
                + "/modules/core/js/modules/exporting.js\"></script>\n");

        super.writeAjaxPageHtmlVaadinScripts(window, themeName, application,
                page, appUrl, themeUri, appId, request);
    }

} 
```

你将不得不`suricate.vaadin.MyApplicationServlet`像我上面所做的那样修改你的。确保包含 invient 图表 js 和 css 文件的正确路径。

# android - 片段不刷新其内容

> ID：14126670
> 
> 赞同：2
> 
> 时间：2013-01-02T17:47:36.570
> 
> 标签：android, listview, adapter, fragment

在下面的代码中，我设置了一个显示 2 个 ListViews 的片段。

当主要活动调用片段方法时：

```
 prendiListaBest 
```

和

```
 prendiListaWorst 
```

他们在适配器上调用 notifyDataSetChanged()，

**因此列表应该使用 ArrayLists 的新内容进行更新。**

但这不会发生。

请任何帮助和建议超过欢迎

```
public class WorstBest extends Fragment {
    public ListView lvBest;
public ListView lvWorst;
public MyAdapter myAdap;
public MyAdapter myAdap2;
public ArrayList<Stock> best;
public ArrayList<Stock> worst;
public View v;
   @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, 
        Bundle savedInstanceState) {
        v= inflater.inflate(R.layout.listaworstbest, container, false);    
        lvBest= (ListView)v.findViewById(R.id.listbest);
        lvWorst=(ListView)v.findViewById(R.id.listworst);;
        myAdap= new MyAdapter(best, getActivity());
        myAdap2= new MyAdapter(worst, getActivity());
        lvBest.setAdapter(myAdap);
        lvWorst.setAdapter(myAdap2);
        return v;              
    }

    public void prendiListaBest(ArrayList<Stock> al){
        Log.e("", "passo per prendilitsa del fragment worstbest");
        best=al;
        Log.e("", "nel fragment best è" + Integer.toString(best.size()));
        myAdap.notifyDataSetChanged();
    }    

    public void prendiListaWorst(ArrayList<Stock> al){
        Log.e("", "passo per prendilitsa del fragment worstbest");
        worst=al;
        Log.e("", "nel fragment worst è" + Integer.toString(worst.size()));
        myAdap2.notifyDataSetChanged();
    }

    @Override
    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
    }
} 
```

这是我的自定义适配器的代码。我按要求发布了，但我很抱歉，因为它真的很乱：

```
public class MyAdapter extends BaseAdapter   {
    ArrayList<Stock> l; 
    Activity a;

public MyAdapter(ArrayList<Stock> li, Activity ac) {
        // TODO Auto-generated constructor stub
    l = li;
    a=ac;
}

public View getView(int position, View convertView, ViewGroup parent) {
    View row=convertView;

    if (row==null) {
    LayoutInflater inflater=a.getLayoutInflater();
    row=inflater.inflate(R.layout.row, parent, false);
    }   
    TextView tw=(TextView)row.findViewById(R.id.textView1);

    String st=l.get(position).simbolo;
    String st1=st;
    String st2=st;
    String st3=st;
    String st4=st;
    String st5=st;
    String st6=st;
    String st7=st;
    String st8=st;
    st8=st;
        if(st.length()<=7){st1=st.concat("     ");st2=st1;st3=st1;st4=st1;st5=st1;st6=st1;st7=st1;st8=st1;}
    if(st1.length()<=7){st2=st1.concat("     ");st3=st2;st4=st2;st5=st2;st6=st2;st7=st2;st8=st2;}
    if(st2.length()<=7){st3=st2.concat(" ");st4=st3;st5=st3;st6=st3;st7=st3;st8=st3;}
    if(st3.length()<=7){st4=st3.concat(" ");st5=st4;st6=st4;st7=st4;st8=st4;}
    if(st4.length()<=7){st5=st4.concat(" ");st6=st5;st7=st5;st8=st5;}
    if(st5.length()<=7){st6=st5.concat(" ");st7=st6;st8=st6;}
    if(st6.length()<=7){st7=st6.concat(" ");st8=st7;}
    if(st7.length()<=7){st8=st7.concat(" ");}

    tw.setText(st8);
    String allora=(String) tw.getText();    
    TextView tw2=(TextView)row.findViewById(R.id.nome);
    ///aggiungiamo numero minimo caratteri
    tw2.setText((l.get(position).nome));
    ///
    TextView tw3=(TextView)row.findViewById(R.id.prezzo);
    tw3.setText((l.get(position).prezzo));

    TextView tw4=(TextView)row.findViewById(R.id.cambiamento);
    tw4.setText((l.get(position).cambiamento).concat(" %"));

    try {
    double value = Double.parseDouble(l.get(position).cambiamento);
    if(value<0)tw4.setTextColor(Color.RED);
    if(value>0)tw4.setTextColor(Color.GREEN);
    TextView tw5=(TextView)row.findViewById(R.id.freccia);
    if(value<0)tw5.setText("▼");
    if(value>0)tw5.setText("▲");
    if(value<0)tw5.setTextColor(Color.RED);
    if(value>0)tw5.setTextColor(Color.GREEN);
        } catch (Exception exc) {}

    return row; 

 }

 public int getCount() {
    // TODO Auto-generated method stub
    return l .size();

}

 public Object getItem(int position) {
    // TODO Auto-generated method stub
    return l .get(position);

 }

 public long getItemId(int position) {
    // TODO Auto-generated method stub
    return position;
 }
 } 
```

**编辑编辑编辑编辑编辑编辑编辑编辑编辑编辑编辑编辑编辑编辑编辑编辑编辑编辑编辑编辑编辑编辑编辑编辑编辑编辑编辑编辑编辑编辑编辑编辑编辑编辑编辑编辑编辑编辑编辑编辑编辑编辑编辑编辑编辑编辑编辑编辑编辑编辑编辑编辑编辑编辑**编辑*编辑编辑编辑编辑编辑编辑编辑编辑*

非常感谢您，答案非常有道理。**

但我不明白为什么同一个适配器适用于以下片段；我解释一下：下面的“listafragment”片段有类似的逻辑，它使用

```
 prendiLista 
```

获取最新版本的方法

```
 ListArray lt 
```

与之前的“WorstBest”片段完全相同。但在这种情况下，当

```
 public void prendiLista(ArrayList<Stock> al){
        lt=al;
         myAdap.notifyDataSetChanged();
    } 
```

**视图更新了！！！**

**请问有什么区别？？？:-)**

**在我的理解中，对 notifyDataSetChanged() 的调用足以更新视图！**

总之非常感谢！（明天早上我会接受答案）。

```
 public class listafragment extends Fragment {
    public ListView lv;
    public MyAdapter myAdap;
    public ArrayList<Stock> lt;
    public View v;
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, 
         Bundle savedInstanceState) {
         // Inflate the layout for this fragment
        View v= inflater.inflate(R.layout.lista, container, false);    
        lv= (ListView) v.findViewById(android.R.id.list);
        if(lv==null){Log.e("","nel fragment la lista è nulla");}
         if(lv!=null){Log.e("","nel fragment la lista NON è nulla");} 
         myAdap= new MyAdapter(lt, getActivity()); 
         lv.setAdapter(myAdap);             
        return v;
    }

    public void prendiLista(ArrayList<Stock> al){
        Log.e("", "passo per prendilitsa del fragment");
        lt=al;
        if(myAdap==null){Log.e("","nel prendilista del fragment myadapt è     nullo");};
        myAdap.notifyDataSetChanged();
    }                 
       public void addToFavorites(int pos){
         Quotes.addToFavorites(pos);

     }

     @Override
    public void onCreate(Bundle savedInstanceState){
        lt=Quotes.dammi();
        super.onCreate(savedInstanceState);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T18:12:20.970

> 因此列表应该使用 ArrayLists 的新内容进行更新。

很不幸的是，不行。当您的应用首次运行`l`并且`best`两者都引用相同的数据时。你有这个设置。

```
Fragment:
    best ---\
            |
            |--- <the initial data>
Adapter:    |
    l ------/ 
```

但是在你打电话之后`best=al`，你有：

```
Fragment:
    best ------- <the new data>

Adapter:    
    l ---------- <the initial data> 
```

因此，您永远不会更新适配器中的引用。`l` *由于您没有*将其`l`声明为`private`：

```
public void prendiListaBest(ArrayList<Stock> al){
    myAdap.l=al;
    myAdap.notifyDataSetChanged();
} 
```

# ajax - JSF 在进行 ajax 更新时重置字段

> ID：14126672
> 
> 赞同：3
> 
> 时间：2013-01-02T17:47:43.423
> 
> 标签：ajax, jsf-2

我的 JSF 页面出现问题，我在第一个计费名字字段中输入了一个名字。如果我点击复制账单地址复选框；这将停止呈现送货地址面板并通过 ajax 将其隐藏，我刚刚在第一个字段中键入的值将重置为之前的状态。

JSF 页面

```
<h:form>
    <p:inputText value="#{addressBean.billingAddress.firstName}" required="true"/ >

    <p:selectBooleanCheckbox value="#{addressBean.copyBillingAddress}" id="duplicateBillingDetails">
        <f:ajax render="@form" />
    </p:selectBooleanCheckbox>

    <h:panelGrid rendered="#{not addressBean.copyBillingAddress}" columns="3">
        <p:inputText value="#{addressBean.deliveryAddress.firstName}"/>
    </h:panelGrid>

    <p:commandButton value="Checkout" action="#{addressBean.saveAddress}"/>
</h:form> 
```

支持豆

```
@Component
@Scope("view")
public class AddressBean implements Serializable {
    @Inject
    private CurrentUserBean currentUserBean;
    @Inject
    private UserService userService;
    private Address deliveryAddress = new Address();
    private Address billingAddress = new Address();
    private boolean copyBillingAddress;

    public AddressBean() {

    }

    public boolean isCopyBillingAddress() {
        return copyBillingAddress;
    }

    public void setCopyBillingAddress(boolean copyBillingAddress) {
        this.copyBillingAddress = copyBillingAddress;
    }

    public String saveAddress() {
        if (copyBillingAddress) {
            deliveryAddress = new Address(billingAddress);
        }

        User user = currentUserBean.getUser();
        if (!billingAddress.isSame(user.getBillingAddress())) {
            user.setBillingAddress(billingAddress);
        }
        if (!deliveryAddress.isSame(user.getDeliveryAddress())) {
            user.setDeliveryAddress(deliveryAddress);
        }
        currentUserBean.setUser(userService.save(user));
        return "/checkout.xhtml";
    }

    public CurrentUserBean getCurrentUserBean() {
        return currentUserBean;
    }

    public void setCurrentUserBean(CurrentUserBean currentUserBean) {
        this.currentUserBean = currentUserBean;
    }

    public Address getDeliveryAddress() {
        return deliveryAddress;
    }

    public void setDeliveryAddress(Address deliveryAddress) {
        this.deliveryAddress = deliveryAddress;
    }

    public Address getBillingAddress() {
        return billingAddress;
    }

    public void setBillingAddress(Address billingAddress) {
        this.billingAddress = billingAddress;
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T17:59:21.013

默认情况下`<f:ajax>`仅处理当前组件，如`execute="@this"`. 因此所有其他输入组件的提交值将不会被处理，因此不会更新到模型中。但是，您通过`render="@form"`强制使用所有其他输入组件的当前（未更新！）模型值来刷新表单的整个 HTML 输出。

假设您的意图是*不要*不必要地转换/验证/更新所有其他输入组件，您最好使`render`属性更具体。*只更新真正*需要更新的内容，而不是整个表单。

```
<p:selectBooleanCheckbox value="#{addressBean.copyBillingAddress}" id="duplicateBillingDetails">
    <f:ajax render="copyBillingAddress" />
</p:selectBooleanCheckbox>

<h:panelGroup id="copyBillingAddress">
    <h:panelGrid rendered="#{not addressBean.copyBillingAddress}" columns="3">
        <p:inputText value="#{addressBean.deliveryAddress.firstName}"/>
    </h:panelGrid>
</h:panelGroup> 
```

或者，如果您真的需要`render="@form"`，那么您需要添加 a`execute="@form"`以告知`<f:ajax>`处理所有其他输入组件。

```
<f:ajax execute="@form" render="@form" /> 
```

请注意，这可能会不必要地触发这些输入组件的转换/验证。

### 也可以看看：

*   [当我想对它进行 ajax 更新时，为什么需要在另一个组件中嵌套一个带有 render="#{some}" 的组件？](https://stackoverflow.com/questions/9010734/why-do-i-need-to-nest-a-component-with-rendered-some-in-another-component-w)

# javascript - 在忽略标签内容的情况下匹配句子的正则表达式会是什么样子？

> ID：14126673
> 
> 赞同：0
> 
> 时间：2013-01-02T17:47:47.390
> 
> 标签：javascript, regex

我正在尝试用 span-tags 包装给定文本的单个句子，到目前为止效果很好。

`$this.html().replace(/\b.*?[\.\?\!]/gi, "<span>$&<\/span>");`

现在，内容中已经混合了一些其他的跨度和 b-标签，如下所示：

`Gumbo groundnut daikon radicchio scallion lettuce rock melon peanut. <span class="yellow">Catsear swiss chard epazote bush tomato peanut chicory amaranth tomato gourd.</span> Earthnut pea brussels sprout gumbo celery tomato salad kale. Spinach scallion tomatillo bitterleaf lentil <b>green</b> bean celery amaranth onion catsear sweet pepper fava bean silver beet spinach.`

由于我不想摆脱这些标签，也不想封装它们，因此解决方案可能是：

1.  只是忽略标签和里面的东西
2.  将标签视为句子的结尾和开头

所以最后它看起来像这样：

`<span>Gumbo groundnut daikon radicchio scallion lettuce rock melon peanut. <span class="yellow">Catsear swiss chard epazote bush tomato peanut chicory amaranth tomato gourd.</span> <span>Earthnut pea brussels sprout gumbo celery tomato salad kale.</span> <span>Spinach scallion tomatillo bitterleaf lentil </span><b>green</b><span> bean celery amaranth onion catsear sweet pepper fava bean silver beet spinach.</span>`

这样的正则表达式会是什么样子？我对此感到非常头疼，因为我的正则表达式技能还很有限。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T17:53:24.533

编写解析器，而不是正则表达式。例如，仅使用正则表达式处理嵌套的 HTML 标记将非常困难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T09:40:32.650

我现在已经实现了一个小功能，它或多或少地完成了我想要的。它基本上用占位符元素替换所有子项（跨度、bs 等），因此它们不会与正则表达式混淆。后来我只是用原始的子元素替换占位符。这是一种快速而肮脏的解决方案，但目前它运行良好。

```
function wrapSentences($element){
var j = 0, i = 0, placeholders = [];

 $.each($element.children(),function(){
     var p = $("<b id='p"+j+"'></b>");
     $(this).after(p).remove();
       placeholders.push($(this));
    j++;                              
 });

 $element.html($element.html().replace(/\(?[A-Z][^\.]+[\.!\?]\)?/g, "<span class='s'>$&<\/span>"));

 $.each(placeholders,function(){
       $element.find("#p"+i).replaceWith(this);
      i++;
 });
} 
```

[jsFiddle](http://jsfiddle.net/lebushi/UGBPy/5/)

# plone - 如何启用 Plone 的高级搜索框

> ID：14126678
> 
> 赞同：2
> 
> 时间：2013-01-02T17:48:10.330
> 
> 标签：plone

我最近在 FreeBSD 8.3 上使用统一安装程序安装了 Plone 4.2.1。我的问题是关于高级搜索选项，它提供了一个包含许多不同搜索选项的长表格。默认值似乎是单个文本框。有人可以帮助弄清楚如何在我的网站上启用此功能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T11:13:49.123

在 Plone 4.2 中，旧高级表单的选项已集成到搜索结果页面中；搜索后现在有一个过滤器下拉列表：

![搜索过滤器下拉菜单](../Images/d50089c7a2055a3703668a0331fbd22f.png)

更改此过滤器中的选项将自动更新搜索结果。

# c++ - Simple SDL + openGL code for displaying images in 2D alone, no 3D involved

> ID：14126688
> 
> 赞同：0
> 
> 时间：2013-01-02T17:48:47.927
> 
> 标签：c++, windows, opengl, sdl

I'm inexperienced in 2D, and about a week ago started messing with SDL. Built some simple structures to have images, which would be on layers, so I could have my own drawing order, so sprites would be drawn after background, etc, and then did a little "sprite engine". I got a Megaman sprite walking left and right just like I wanted it, above a simple 900x900ish background image.

Thing is, CPU almost reached 20% on my i5... so I thought of using the graphic card to do the drawing! Delved abit into OpenGL and today, finally managed to get gl3w working!

So now I'm looking for a simple way to display my sprites/images, on the window, through use of OpenGL. I've tried all sorts of code I ran across, but I can't get anything displaying, despite that I've done error checks basically everywhere, and everything seems to check out to be right!

**TL:DR; I was looking for some simple working code, using SDL, on how to draw 2D images (which, if it doesn't work, for sure I've got something wrong).**

Additional question: I found out about the gamedev stackexchange: should I/can I post duplicates here and there? This question might fit both? (I did it just this once)

# ajax - KendoUI: Update dropdownlist on open event

> ID：14126693
> 
> 赞同：1
> 
> 时间：2013-01-02T17:49:03.623
> 
> 标签：ajax, datagrid, kendo-ui

I have the following dropdown filter for datagrid, after i add data to grid, new category name appears in popup editor, but not in this dropdown, i have to reload to see new value in list :( How to do it in kendo way?

```
 $("#category_list").kendoDropDownList({
    dataTextField: "name",
    dataValueField: "name",
    dataSource: {
          transport: {
            read: {
              url: '/api/notes/cats',
              dataType: 'json',
              type: 'GET',
            },
          },
          schema: {
            data: function(reply) {
              return reply.rows
            },
          },
    },
    change: function() {
      val = $("#category_list").val();
      var grid = $("#grid").data().kendoGrid;
      grid.dataSource.filter({
        "filters":[{"field":"category","operator":"eq","value":val}]
      })
    },
    open: function() {
      var kd = $("#category_list").data().kendoDropDownList
      kd.dataSource.transport.read();
      console.log("reading")
    }
  }) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T03:22:51.357

好的，就这么简单：

`$("#category_list").data("kendoDropDownList").dataSource.read()`

在打开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-11T07:14:07.647

这是旧 Q，但如果有人现在需要

```
 open: function () {
       this.dataSource.read();
       this.dataSource.filter({}); // This refreshes filter 
    } 
```

# css - 使用“颜色：#000”而不是颜色：黑色是否有助于提高速度

> ID：14126695
> 
> 赞同：1
> 
> 时间：2013-01-02T17:49:18.397
> 
> 标签：css

> **可能重复：**
> [哪个更快：十六进制颜色代码或颜色名称？](https://stackoverflow.com/questions/6640575/which-one-is-faster-hex-color-codes-or-color-names)

在页面渲染速度方面，如果将 css 文件中的颜色写为

```
color: #000; 
```

反对

```
color: black; 
```

当然，我的猜测是不会，但由于我没有在网上找到任何关于它的可行资源，我正在征求您的意见，并可能提供比“不”更详细的解释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T17:58:46.767

我的猜测是十六进制代码稍微快一些，因为浏览器不必查找和翻译这个词。

您可以查看这个非官方测试[http://www.webmasterworld.com/css/4151070.htm?highlight=msg4158590](http://www.webmasterworld.com/css/4151070.htm?highlight=msg4158590)，它支持它并没有真正产生明显差异的想法：]

# php - php：何时使用 pthread

> ID：14126696
> 
> 赞同：30
> 
> 时间：2013-01-02T17:49:18.590
> 
> 标签：php, multithreading, pthreads, die

我不太了解使用线程，但我研究了 php 的 pthreads，它看起来非常有趣和简单，或者比我想象的更容易......

我搜索了示例并查看了文档，但我找不到任何实际示例说明何时使用线程实际上是有益的，这肯定是用于不依赖于彼此的长任务，例如执行许多 http 请求或也许发送邮件。

但是写日志条目呢？插入数据库？（比如跟踪用户活动）从数据库中获取（我可以从线程返回数据吗？）

这会提高性能还是创建线程的开销过多？（虽然我可以使用工作池也可以减少开销，但我认为......）

非常感谢任何建议或示例！

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2013-01-03T19:41:15.487

发行版中包含许多示例，可在 github 上找到：

[https://github.com/krakjoe/pthreads/tree/master/examples](https://github.com/krakjoe/pthreads/tree/master/examples)

这些示例包括通用线程池、多线程套接字服务器和 SQLWorker。

pthreads 创建的线程与 Zend 本身通过多线程 SAPI 为服务请求设置的线程一样健全和安全。它们兼容所有相同的功能，以及您对高级线程 API 的所有期望（几乎）。

在无共享架构的深处实现线程总是有限制的，但是在使用更好的物理资源方面的好处，以及 PHP 对任何给定任务的整体可用性远远超过了开销在那个环境下工作。

pthread 中包含的对象与任何其他 PHP 对象一样工作，您可以从任何引用该对象的上下文中读取、写入和执行它们的方法。

您的想法完全正确：衡量效率的标准不是应用程序执行的线程数量，而是如何利用这些线程来最好地服务于应用程序的主要目的。工人是个好主意，只要你可以使用它们，就这样做。

关于您询问的具体问题，LoggingWorker 是一个好主意并且可以工作，不要尝试共享该流，因为没有意义，如果 Worker 打开日志文件或数据库连接并且由它执行的 stackables 可以访问它们。SQLWorker 再次包含在示例中，这也是 API 缺乏体面的异步 API 的另一个好主意，或者您只是更喜欢多线程编程的流程。

您不会得到更好或更正确的答案：我自己编写了 pthreads。

# c# - Creating a "Snap" to position for Form using WndProc, C#

> ID：14126701
> 
> 赞同：1
> 
> 时间：2013-01-02T17:49:35.410
> 
> 标签：c#, winforms, forms, wndproc

I'm trying to add a "snap to grid" functionality to a WinForm application in C#, but I am having a bit of a problem getting the form to move correctly.

The desired result is that the user clicks and drags the form and the position of the form is moved in the desired direction of the mouse but in 50 pixel increments, and always rounded down to the last grid point. The resize of the form is to for the same 50 pixel increment when the border is clicked and dragged.

I have been able to get the resize to work correctly by calculating the new size in the WM_SIZING message in WndProc. I attempted to do the same thing in the WM_MOVING, but I am not getting the correct functionality.

What I get is that the form will not move to any grid point higher (right or down) than it's start location, and when the mouse is moved towards a grid point lower (top or left) by 1 pixel the form jumps 50 pixels. Of course this is the desired movement to the lower point, but it should only move once and then wait for the mouse to move the additional space before making the next jump, however it move 50 pixels for the next 1 pixel of mouse movement.

What I have found is that the position of the window in the Message.LParam is calculated at each message and is only updated when the WM_MOVE is completed. This is true even if the mouse button has not been released. So moving the mouse top or left forces the window to move 50 pixels and on the next message (ie: another 1 pixel of mouse movement) the LParam is now 50 pixels lower and the 1 pixel is enough to snap to the next lower grid point. However, since I don't want the window to move right or down till the mouse has moved 50 pixels from it's first click point, the WndProc leaves the window position the same and it never reaches a point higher than it's starting position. For some reason the WM_SIZING does not do this. It sees the window as changing size even if the size change is not visible on the screen.

Here is my code I am using. The WM_SIZING part has been removed for clarity.

```
private const int WM_MOVING = 0x216;
private const int WM_MOVE = 0x3;

struct RECT
{
    public int Left;
    public int Top;
    public int Right;
    public int Bottom;
}

protected override void WndProc(ref Message m)
{
    if (m.Msg == WM_MOVING)
    {
        RECT rc = (RECT)Marshal.PtrToStructure(m.LParam, typeof(RECT));

        int w = rc.Right - rc.Left;
        int h = rc.Bottom - rc.Top;

        rc.Top = ((int)rc.Top / 50) * 50;
        rc.Left = ((int)rc.Left / 50) * 50;
        rc.Right = rc.Left + w;
        rc.Bottom = rc.Top + h;

        Marshal.StructureToPtr(rc, m.LParam, true);
    }
    base.WndProc(ref m);
} 
```

Thank you for any help or insight to this issue. -Dustin

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-06T18:51:02.340

对于每个 WM_MOVING 消息，窗口坐标与前一个窗口坐标的偏移量是自上一个 WM_MOVING 消息以来鼠标的相对运动。例如，如果窗口的左坐标最初是 100，并且鼠标在 X 中从 130 移动到 131，您将收到一个左坐标为 101 的矩形，该矩形在您的处理程序中被捕捉回 100。现在假设鼠标在 X 中从 131 移动到 132：您可能期望新的左坐标为 102（因为自从您开始移动窗口以来，鼠标在 X 中总共移动了 2 个像素），但它实际上是 101（ 100 加上自上次事件以来鼠标的 1 像素相对运动）。

因此，您需要在一次动作中将鼠标向右滑动 50 像素，然后才能让窗口移动到下一个捕捉位置。另一方面，您只需每次向左移动 1 个像素即可捕捉到下一个最低的 50 像素边界。

为了解决这个问题，您需要跟踪捕捉的窗口位置与没有捕捉的窗口位置之间的累积偏移量。以下代码似乎完成了您想要实现的功能。

（另一种修改是在确定捕捉位置时使用舍入而不是截断。这可以最大限度地减少拖动时鼠标光标和标题栏之间的最大可能距离。）

```
private const int WM_MOVING = 0x216;
private const int WM_EXITSIZEMOVE = 0x231;

struct RECT
{
    public int Left;
    public int Top;
    public int Right;
    public int Bottom;
}

private int LeftOffset = 0;
private int TopOffset = 0;

protected override void WndProc(ref Message m)
{
    if (m.Msg == WM_MOVING)
    {
        RECT rc = (RECT)Marshal.PtrToStructure(m.LParam, typeof(RECT));
        int w = rc.Right - rc.Left;
        int h = rc.Bottom - rc.Top;

        int newTop = (int)Math.Round((rc.Top + TopOffset) / 50.0) * 50;
        int newLeft = (int)Math.Round((rc.Left + LeftOffset) / 50.0) * 50;

        TopOffset = rc.Top + TopOffset - newTop;
        LeftOffset = rc.Left + LeftOffset - newLeft;

        rc.Top = newTop;
        rc.Left = newLeft;
        rc.Right = newLeft + w;
        rc.Bottom = newTop + h;

        Marshal.StructureToPtr(rc, m.LParam, true);
    }
    else if (m.Msg == WM_EXITSIZEMOVE)
    {
        LeftOffset = 0;
        TopOffset = 0;
    }
    base.WndProc(ref m);
} 
```

# css - Twitter Bootstrap输入追加不是容器的全宽

> ID：14126703
> 
> 赞同：13
> 
> 时间：2013-01-02T17:49:46.407
> 
> 标签：css, input, twitter-bootstrap, responsive-design

我有一个基于`Twitter Bootstrap`.

在构建 2 列表单时，我试图使用`input-prepend`该类在表单输入的左侧添加一个电子邮件图标。我希望输入字段和前置图标始终是容器的 100%。

这是我的代码：

```
 <div class='row-fluid'>
                        <div class='span6'>
                          <div class='control-group' id='contactEmailControlGroup'>
                            <label for='contactEmail'>Email Address</label>
                              <div class='input-prepend'> <span class='add-on'><i class='icon-envelope'></i></span>
                                <input type='email' name='contactEmail' id='contactEmail' class='span11' placeholder='Your email address...' tabindex='3' required/>
                                <span class='help-inline formAlert' id='contactEmailError'> <i class='icon-edit formAlertIcon'></i> Please enter your email address </span> <span class='help-inline formAlert' id='contactEmailInvalidError'> <i class='icon-exclamation-sign formAlertIcon'></i> Invalid email address </span>
                            </div>
                          </div>
                        </div>
                        <div class='span6'>
                          <div class='control-group'>
                            <label for='contactPhone'>Phone Number</label>
                            <input type='tel' name='contactPhone' id='contactPhone' class='span12' placeholder='Your phone number...' tabindex='4' required/>
                            <span class='help-inline formAlert' id='contactPhoneError'> <i class='icon-edit formAlertIcon'></i> Please enter your phone number </span> <span class='help-inline formAlert' id='contactPhoneInvalidError'> <i class='icon-exclamation-sign formAlertIcon'></i> Invalid phone number </span> </div>
                        </div>
                      </div> 
```

使用此代码时，表单如下截图： ![表格在桌面上正确显示](../Images/0be945a06ebfaf457c5004878d3535ee.png)

但是，当我调整浏览器的大小以模拟较小的屏幕时，带有`add-on`前缀的字段的宽度大小不正确，如下所示： ![表格在平板电脑和手机上显示不正确](../Images/8f7bac9afd235e6aed0dd9d6e62b9016.png)

**问题**

*   是否应该以不同的方式对该表单进行编码，以便输入字段和图标为 100% 并与其他字段匹配？
*   或者我需要在 Bootstrap 中更改哪些 CSS 来更改它？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-07-04T09:24:00.053

Bootstrap 3 还没有推出，所以这是我针对追加和前置情况的简单且有效的解决方案。在 Bootstrap CSS/LESS 文件之后包含这个：

```
.input-append.input-block-level,
.input-prepend.input-block-level {
  display: table;
}

.input-append.input-block-level .add-on,
.input-prepend.input-block-level .add-on {
  display: table-cell;
  width: 1%; /* remove this if you want default bootstrap button width */
}

.input-append.input-block-level > input,
.input-prepend.input-block-level > input {
  box-sizing: border-box; /* use bootstrap mixin or include vendor variants */
  display: table; /* table-cell is not working well in Chrome for small widths */
  min-height: inherit;
  width: 100%;
}

.input-append.input-block-level > input {
  border-right: 0;
}

.input-prepend.input-block-level > input {
  border-left: 0;
} 
```

在您的 HTML 中像这样使用它并记住，在这种情况下，**您必须使用`a`标签**而不是`button`按钮：

```
<div class="input-append input-block-level">
  <input type="text" />
  <a class="btn add-on">click</a>
</div> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-03T13:11:27.757

原来这是一个已知问题，将在版本 3 中解决。[[来源]](https://github.com/twbs/bootstrap/issues/6414)

# bash - Setting proxy through bash script in ubuntu

> ID：14126705
> 
> 赞同：0
> 
> 时间：2013-01-02T17:49:54.110
> 
> 标签：bash, networking, ubuntu, proxy, system

I am using the gsettings tool to set up system proxy automatically[System Settings-> Network proxy], SO i made a simple bash script with these lines:

```
 gsettings set org.gnome.system.proxy mode 'auto'
 //for another mode
 gsettings set org.gnome.system.proxy mode 'none' 
```

I place this script in /etc/network/if-up.d because I want the script to run when my laptop connects to the internet. I saved a copy of the script in my home folder and when i run the copy, the script seems to work fine and i can see the changes in network proxy window however when i run the script in /etc/network/if-up.d folder, the settings don't seem to be applied for some reason. What am i missing here?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T17:24:09.667

我终于使脚本工​​作了！**自从我被gsettings 工具**卡住已经一周了 。现在，我想要完成的是运行 gsettings 工具来为用户设置代理，尽管这样做的 bash 脚本归 root 所有，因此只有 root 环境变量。现在这可以推广到任何命令，要以特定用户身份运行 commad，我们可以这样做：

```
su username -c "command to execute"
#replace username by your username in the bash script 
```

如果该命令仅包含一个单词，则可以删除双引号。我太高兴了。每次连接到互联网时，我都不需要切换配置文件并手动设置代理配置[IP 地址等]。

希望这可以帮助有类似问题的人：D

# c++ - Subclass Overwrite c++

> ID：14126707
> 
> 赞同：0
> 
> 时间：2013-01-02T17:50:04.363
> 
> 标签：c++, dynamic, subclass, overwrite

I'm trying to get my head around why I can't overwrite a subclass object with another subclass object if they share base class.

Say that **Letter** is the base class. **A** and **B** are subclasses. The following doesn't seem to work:

```
Letter* a_p = new A();
Letter* b_p = new B();

delete a_p;
*a_p = *b_p; 
```

My ambition is to change what is located at a certain adress so that all pointers to the adress in question changes what they point to. In the above example, I'd like to somehow change the "content" of a_p to a copy of the "content" of b_p.

Is this possible somehow?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T17:53:08.260

如果您正在复制对象并且指针的类型是基类，那么您将丢失有关子类的所有信息。

而且由于您删除了a_p，`*a_p=`因此做错了，因为`a_p`指向不再分配的内存。

为什么不只是做：`a_p = b_p;`？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T18:02:20.407

在您给出的示例代码中，最突出的错误是您取消引用以前删除的指针。但是可以说那些是堆栈上的对象；

```
class Base
{
};

class A : public Base
{
};

class B : public Base
{
  int a;
};

int main()
{
  A a;
  B b;
  b = a; // This gives an error
  return 0;
} 
```

我们试图将一个`A`对象复制到一个`B`具有不同内存布局（添加的 int 成员）的对象中。该成员将如何初始化，您认为！？出于同样的原因，您不允许有指向`A`的对象的指针`B`，它们是不同的类型。

这两种类型“相同”的唯一地方是您通过`Base`指针访问它们的地方。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T17:56:06.197

A 和 B 在内存中的大小可能不同。此外，delete 释放分配给 a_p 的内存。您将写入未分配的内存。这将导致“未定义的行为”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T17:52:38.217

如果您正在寻找分配指针值，我认为您是，那么您需要这样做

`a_p = b_p`

不是`*a_p = *b_p`

# ruby - Ruby not iterating through an array that has one element

> ID：14126710
> 
> 赞同：0
> 
> 时间：2013-01-02T17:50:22.067
> 
> 标签：ruby

Here is my loop

```
 subscriptions.each do |s|
     if s.is_active? && s.is_current?
        #do some stuff
     end
  end 
```

subscriptions is an array that has one element. However it does not hit the if statement inside the loop.

When I step through it using rdebug I get this

```
(rdb:1748) p subscriptions.count
1 
```

I am on ruby version 1.8.7

Am I missing something?

Thank you in advance for your help.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T17:55:56.470

检查它是否有效？

```
subscriptions.each { |s| puts s } 
```

如果上面的代码打印了您的元素，那么您的条件存在一些问题，即下面的代码不正确：

```
if s.is_active? && s.is_current?
  #do some stuff
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T19:47:43.233

问题最终是数据库中某些数据的大小写敏感性。现在一切都很好。奇怪的是，它似乎跳过了障碍，但我确信这是我自己对 ruby​​-debug 工作原理的无知。毕竟我对 ruby​​/rails 开发还比较陌生。谢谢大家！

# vb.net - Visual Studio Visual Basic: Accessing a Collection of Dictionaries

> ID：14126713
> 
> 赞同：0
> 
> 时间：2013-01-02T17:50:48.687
> 
> 标签：vb.net, collections, dictionary

I have pre-defined several Dictionaries (with KeyPairValue elements) in a form's OnLoad event sub. I then added each dictionary to a collection that is defined outside the methods so that it is accessible between the form's subroutines. So far so good.

I would like to use this object to create String arrays to use as DataSources for several different ComboBoxes. In order to do this, I want to retrieve the key names that I previously assigned to the elements of the dictionaries within this collection. I would like to do this by looping through the elements of a specific dictionary within the collection and retrieving the key name. However, I am unable to figure out exactly how to retrieve the keyname. Here is what I am trying:

Collection.Item("Dictionary1")(counter).Key

What I am aiming to get at is, there is a collection of Dictionaries ("Dictionary1", "Dictionar2", etc.) which I can look-up by name. Once the dictionary is selected, I want to loop through the KeyValuePairs and retrieve the keynames. BUT, I also want to add each keyname as a member of a String array, so that I can assign that String array as the datasource for a comboBox.

Please let me know how I can do this without creating a counter outside of a For.. loop.

Thank you

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T18:10:32.067

您应该能够按照以下方式做一些事情：

```
 Dim cValues As New System.Collections.Generic.Dictionary(Of String, Integer)
    Dim cKeys As New System.Collections.Generic.List(Of String)

    For Each sKey As String In cValues.Keys
        cKeys.Add(sKey)
    Next 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T18:59:31.940

尝试这个

```
Dim dict As Dictionary(Of String, Integer) = Collection.Item("Dictionary1")
Dim myArray As String()
Dim list As New List(Of String)

  For Each aKey As String In dict.Keys
        list.Add(aKey)
  Next

myArray = list.ToArray() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-19T08:39:25.660

你应该能够做这样的事情：

```
 Dim DictCol As New List(Of Dictionary(Of T, T)) 'this is collection of Dictionaries as a list

  Dim Keyes As New List(Of T) 'will store keys in here

  For Each dict In DictCol

    For Each pair In dict

       Keyes.Add(pair.Key)

    Next

  Next 
```

这段代码的问题是它不能识别每个键属于哪个字典。但是，如果您将 Keyes 保存在数组列表中，其中每个元素都有键和字典的名称，则可以解决该问题。

# xaml - Is this a bug? Changing TextBlock style at runtime in code for Windows Store Apps

> ID：14126715
> 
> 赞同：3
> 
> 时间：2013-01-02T17:50:52.120
> 
> 标签：xaml, microsoft-metro, windows-runtime

Early start to the new year on SO for me :)

I'm trying to help out a friends with what I thought would be a simple thing. Basically we just want to change a style at runtime in code and update the style for a TextBlock.

I had no problem making this work with any other type of element, except the TextBlock. I'm now very curious if I've missed something here, or if indeed there is a bug. What would be the nicest way to solve this?

The code here is just for demonstration, it works with TextBox but not TextBlock (when targettype etc is changed of course)

Style defined in a resourcedictionary called StandardStyles, under the Common folder

```
 <Style x:Key="textStyle" TargetType="TextBlock">
    <Setter Property="Foreground" Value="red"/>
    <Setter Property="FontFamily" Value="Segoe UI"/>
</Style> 
```

The UI

```
 <StackPanel Orientation="Horizontal">
    <ListBox ItemsSource="{Binding Fonts}" Height="300" Width="300" SelectionChanged="ListBox_SelectionChanged_1"></ListBox>
    <Border BorderBrush="White" BorderThickness="5" Padding="20,0,0,0" Height="300" Width="300">
        <TextBlock Text="Hi here is some text" Style="{Binding FontStyleText}"/>
    </Border>
</StackPanel> 
```

The code

```
 public sealed partial class MainPage : INotifyPropertyChanged 
{
    private Style _fontStyleText;
    public Style FontStyleText
    {
        get
        {
            return this._fontStyleText;
        }

        set
        {
            if (value == this._fontStyleText) return;
            this._fontStyleText = value;
            NotifyPropertyChanged();
        }
    }

    private List<string> _fonts;
    public List<string> Fonts
    {
        get
        {
            return this._fonts;
        }

        set
        {
            if (value == this._fonts) return;
            this._fonts = value;
            NotifyPropertyChanged();
        }
    }

    public MainPage()
    {
        this.InitializeComponent();
        DataContext = this;

        Fonts = new List<string> {"Segoe UI", "Showcard Gothic", "Arial"};

        FontStyleText = Application.Current.Resources["textStyle"] as Style;

    }

    private void ListBox_SelectionChanged_1(object sender, Windows.UI.Xaml.Controls.SelectionChangedEventArgs e)
    {
        var font = (sender as ListBox).SelectedItem as string;

        var res = new ResourceDictionary()
        {
            Source = new Uri("ms-appx:///Common/StandardStyles.xaml", UriKind.Absolute)
        };

        var style = res["textStyle"] as Style;

        style.Setters.RemoveAt(0); // if it is the first item otherwise for more accurat removal se below :D

        foreach (var item in style.Setters.Cast<Setter>().Where(item => item.Property == FontFamilyProperty))
        {
            style.Setters.Remove(item);
        }

        style.Setters.Add(new Setter(FontFamilyProperty, new FontFamily(font)));
        style.Setters.Add(new Setter(ForegroundProperty, new SolidColorBrush(Colors.Purple)));

        FontStyleText = style;

    }

    public event PropertyChangedEventHandler PropertyChanged;
    private void NotifyPropertyChanged([CallerMemberName] String propertyName = "")
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T19:27:22.730

好的，所以我弄清楚出了什么问题。

非常感谢 mlorbetske （以及 Skype 上的 Matt），我注意到我在这段代码中遗漏了一些东西。是的，很高兴地说这不是一个错误，而是（大多数时候）缺少一些东西。我会说没有收到错误消息是一个错误。

我缺少正确的依赖属性 - 目标属性设置错误。所以而不是：

```
style.Setters.Add(new Setter(FontFamilyProperty, new FontFamily(font))); 
```

我不得不

```
style.Setters.Add(new Setter(TextBlock.FontFamilyProperty, new FontFamily(font))); 
```

而已 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T18:58:24.197

尝试将`ListBox_SelectionChanged_1`方法更改为如下所示。无论出于何种原因，在将设置添加到样式的设置器时似乎都会抛出一个静默错误`FontFamilyProperty`- 或者至少在我切换事物以使用单独的视图模型时发生了错误。

```
 private void ListBox_SelectionChanged_1(object sender, Windows.UI.Xaml.Controls.SelectionChangedEventArgs e)
    {
        var font = (sender as ListBox).SelectedItem as string;

        var res = new ResourceDictionary()
        {
            Source = new Uri("ms-appx:///Common/StandardStyles.xaml", UriKind.Absolute)
        };

        var style = res["textStyle"] as Style;
        var newStyle = new Style(style.TargetType);

        foreach (var setter in style.Setters.OfType<Setter>().Skip(1).Where(x => x.Property != TextBlock.FontFamilyProperty))
        {
            newStyle.Setters.Add(new Setter(setter.Property, setter.Value));
        }

        newStyle.Setters.Add(new Setter(TextBlock.FontFamilyProperty, new FontFamily(font)));
        newStyle.Setters.Add(new Setter(TextBlock.ForegroundProperty, new SolidColorBrush(Colors.Purple)));

        FontStyleText = newStyle;
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T18:52:48.337

它不起作用的原因之一是 TextBlock 在 StandardStyles.xaml 中定义了很多次。如果您可以创建一个新样式文档并在用户控件的 InitilizeComponent 之前应用它，它将起作用。希望这能解释。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T18:13:03.747

以我的经验，我只使用过静态样式绑定，从未使用过动态的数据上下文。样式是通常在设计时创建并应用于多个项目以在整个应用程序中保持一致性的东西。

最好有一个样式，除了字体之外，你需要的所有东西都有一个正常的静态绑定，然后只绑定字体（按名称应该从内存中工作）以覆盖样式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-02T18:30:23.587

如果 TextBlock 的样式确实不适用于绑定 - 您可以简单地更新代码以将 TextBlock 放入 DataTemplate 中，并在样式更改时添加/替换您现在拥有 TextBlock 的模板的物化实例。

您还可以尝试添加 Style 类型的附加属性并将其更改传递给实际的 Style 属性。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-02T19:03:27.370

Hm... I don't see a DataTrigger binding - should be under Style/Style.Triggers. You might want to try binding a trigger to your combo box - please take a look at the following links:

[Style.Triggers Property - MSDN](http://msdn.microsoft.com/en-us/library/system.windows.style.triggers.aspx)

[CodeProject Example on Style DataTriggers for TextBlock](http://www.codeproject.com/Articles/42179/WPF-DataTrigger-on-a-TextBlock)

[MSDN Question on binding a TextBlock style to a combo box change](http://social.msdn.microsoft.com/Forums/en/wpf/thread/904f19c6-4ee0-49fb-957b-6d828b38cf5e)

Hope it helps.

Cheers,

Arthur

# php - PHP | 时间计算

> ID：14126716
> 
> 赞同：2
> 
> 时间：2013-01-02T17:50:54.757
> 
> 标签：php, datetime, time

我正在为我的客户创建一个脚本，从早上 5:00 到晚上 24:00 收取“x”费用。然后从早上 12:00 到 5:00，收费为“y”。

比方说，费用如下：

```
05:00 to 24:00 -> 1.00 $
24:00 to 05:00 -> 2.00 $ 
```

一位客户在 23:00 购买了一项服务。购买的服务需要两个小时才能完成，所以我喜欢像这样更改昂贵时段的费用：

服务总时长为 2 小时，从 23:00 开始，因此费用必须如下：

```
23:00 to 24:00 = 1 Hour x 1.00 $
24:00 to 01:00 = 1 Hour x 2.00 $ 
```

总计 : 3.00 $

客户还可以在购买时手动设置服务的开始时间。

问题是，如何计算低成本时期的时间和昂贵时期的时间？

任何想法都将受到高度赞赏:)

PN：也必须考虑客户在23:00获得服务并且服务将在06:00结束的情况。这意味着必须以低成本向客户收费 2 小时，以高费率向客户收费 5 小时。

亲切的问候梅里亚诺斯尼科斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T17:56:15.877

尝试这样的事情：

```
<?php

$currentHour = date('G'); //gets the Hour of the day 24hour format 0-23
$currentMin = date('i'); //gets the minute
if ($currentHour > 5 && $currentHour < 23) {
    //code to charge X
}
//repeat for other times
//Probably use a external DB or file to track the times/rates

?> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T18:06:35.627

你只需要知道时间界限。我认为你甚至不需要`date`，除了获取当前的服务器时间。

您需要查看充电槽的边界。

这似乎有效：

```
function get_charge($starttime, $proctime) {

    $slots = array(
        array(
            "begin" => 5,
            "end" => 24,    // any number larger than 23 will do
            "charge" => 1
        ),
        array(
            "begin" => 0, // 0 is 24, there will never be 24 (like on a clock)
            "end" => 5,
            "charge" => 2
        )
    ); // make sure you have no overlapping slots, and no missing slots either

    $charge = 0;
    for ($i = 0; $i < $proctime; $i += 1) { // get the charge for each hour
        $time = ($starttime + $i) % 24; // modulo 24 here so we go from 0 to 23
        foreach($slots as $slot) {
            if ($slot["begin"] <= $time && $time < $slot["end"]) {
                $charge += $slot["charge"];
            }
        }
    }

    return $charge;
}

var_dump(get_charge(23, 2)); // 3
var_dump(get_charge(7, 2)); // 2
var_dump(get_charge(1, 3)); // 6
var_dump(get_charge(23, 50)); // 50 hour job, because we can 
```

# android - Detecting displacement of camera around something flat

> ID：14126717
> 
> 赞同：0
> 
> 时间：2013-01-02T17:50:54.427
> 
> 标签：android, image-processing, computer-vision

What approaches could be to the subj problem? I mean, there is a camera, looking to a plane (say, a picture, list of paper). Initially, it's assumed to be placed right normally to surface. Then, it starts to move, and i want to recognize:

1) small translations, shifting image on surface

2) scalings of image due to camera moves up/down

3) small transformations, due to camera small rotations

Specifically, it'll be run on Android, so, free Android libs are preffered

Upd.: image on surface is not going to be apriori known, but it can be assumed to be black curves on white, say a text.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T18:20:47.820

当然[openCV](http://opencv.org/platforms/android.html)会有所帮助..但是会有很多工作......

# objective-c - Xcode suggests to replace %C with %d

> ID：14126719
> 
> 赞同：2
> 
> 时间：2013-01-02T17:50:58.860
> 
> 标签：objective-c, ios, xcode, ios5, automatic-ref-counting

> **Possible Duplicate:**
> [Format specifies type ‘unsigned short’ but the argument has type ‘int’</a>](https://stackoverflow.com/questions/12117709/format-specifies-type-unsigned-short-but-the-argument-has-type-int)
> 
> [](https://stackoverflow.com/questions/12117709/format-specifies-type-unsigned-short-but-the-argument-has-type-int)

[](https://stackoverflow.com/questions/12117709/format-specifies-type-unsigned-short-but-the-argument-has-type-int)

[I am using the NSString Html category at](https://stackoverflow.com/questions/12117709/format-specifies-type-unsigned-short-but-the-argument-has-type-int) [https://github.com/mwaterfall/MWFeedParser/blob/master/Classes/NSString%2BHTML.m](https://github.com/mwaterfall/MWFeedParser/blob/master/Classes/NSString%2BHTML.m)

Xcode gives me this suggestion

![enter image description here](../Images/af938d647622c61f7bb92afd331f0b3c.png)

Should i agree and replace it ?

![enter image description here](../Images/1c65c305811e15d2d160b1903954a79f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T18:03:53.790

最好将每个参数转换为 (char) 或在单引号之间对字符使用 UTF 十六进制编码。

# python - Python 抛出 ValueError: list.remove(x): x not in list

> ID：14126726
> 
> 赞同：21
> 
> 时间：2013-01-02T17:51:19.247
> 
> 标签：python

每次我运行这个程序时，我都会收到这个错误：

```
ValueError: list.remove(x): x not in list 
```

每当被螺栓击中时，我都试图降低单个外星人的健康状况。如果它的健康状况良好，那一个外星人也应该被摧毁`<= 0`。同样，螺栓也会被破坏。这是我的代码：

```
def manage_collide(bolts, aliens):
    # Check if a bolt collides with any alien(s)
    for b in bolts:
        for a in aliens:
            if b['rect'].colliderect(a['rect']):
                for a in aliens:
                    a['health'] -= 1
                    bolts.remove(b)
                    if a['health'] == 0:
                        aliens.remove(a)
    # Return bolts, aliens dictionaries
    return bolts, aliens 
```

`ValueError`发生就行了`aliens.remove(a)`。澄清一下`aliens`， 和`bolts`都是字典列表。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-01-02T17:54:57.217

您不应该从正在循环的列表中删除项目。改为创建副本：

```
for a in aliens[:]: 
```

和

```
for b in bolts[:]: 
```

在循环遍历列表时修改列表会影响循环：

```
>>> lst = [1, 2, 3]
>>> for i in lst:
...     print i
...     lst.remove(i)
... 
1
3
>>> lst
[2] 
```

从您循环两次的列表中删除项目会使事情变得更加复杂，从而导致 ValueError：

```
>>> lst = [1, 2, 3]
>>> for i in lst:
...     for a in lst:
...         print i, a, lst
...         lst.remove(i)
... 
1 1 [1, 2, 3]
1 3 [2, 3]
Traceback (most recent call last):
  File "<stdin>", line 4, in <module>
ValueError: list.remove(x): x not in list 
```

*在循环的每个*级别创建您正在修改的列表的副本时，您可以避免这个问题：

```
>>> lst = [1, 2, 3]
>>> for i in lst[:]:
...     for i in lst[:]:
...         print i, lst
...         lst.remove(i)
... 
1 [1, 2, 3]
2 [2, 3]
3 [3] 
```

当你发生碰撞时，你只需要移除*一次*`b`螺栓，而不是在你伤害外星人的循环中。稍后单独清理外星人：

 *```
def manage_collide(bolts, aliens):
    for b in bolts[:]:
        for a in aliens:
            if b['rect'].colliderect(a['rect']) and a['health'] > 0:
                bolts.remove(b)
                for a in aliens:
                    a['health'] -= 1
    for a in aliens[:]:
        if a['health'] <= 0:
            aliens.remove(a)
    return bolts, aliens 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T17:57:42.320

您的代码中存在导致此问题的错误。您的代码经过简化，如下所示：

```
for b in bolts:
  for a in aliens:
    for a in aliens:
      bolts.remove(b) 
```

这导致您`aliens`为`b`. 如果 b 在第一次循环中被删除，`aliens`那么当它第二次循环时，你会得到错误。

有几件事要解决。首先，改变内部循环`aliens`以使用 以外的东西`a`，所以：

```
for b in bolts:
  for a in aliens:
    for c in aliens:
      if hit:
        bolts.remove(b) 
```

其次，只删除`b`一次`bolts`。所以：

```
for b in bolts:
  for a in aliens:
    should_remove = False
    for c in aliens:
      if hit:
        should_remove = True
    if should_remove:
      bolts.remove(b) 
```

我认为这段代码还有其他问题，但这是你的主要问题的原因。Martijn 的帖子也可能有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-04-20T23:56:16.877

你不能使用 list.remove 你应该使用 del list[x]

因为使用remove的时候必须按name而不是index来命名被删除的item，所以在代码操作的时候会出现这个错误（value error: x is not in list）但是我们用del的时候就ok了，因为我们delete item by它的索引。无论项目的名称是什么，使用del，代码都会正确运行我希望我清除了问题并解决了它

要知道我的意思，请尝试这段代码然后尝试用 remove 替换 del ，你就会明白我的意思。代码如下：

```
aliens = [[4,3,2,1],[4,3,2,1],[4,3,2,1]]
print(aliens)
bolts = [b for b in range(1,30)]
for b in bolts:
    del aliens[0][0]
    print(aliens) 
        if len(aliens[0]) == 0:
            del aliens[0]
    if len(aliens) == 0
                print("you win")
        break 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T00:51:37.167

给螺栓一个“健康”，初始化为 1。然后你可以做一个嵌套循环来计算所有的伤害，两个单独的未嵌套的“循环”来删除所有“死”的东西。除了，不要那样做，因为你仍然不想修改你正在循环的列表。制作副本仍然太复杂。您真正想要做的是直接*构建一个仅包含仍然“活着”的事物的新列表*，并且您可以使用列表推导（或如此处所示，使用`filter`）描述性地做到这一点。

```
# for example
class Alien:
    # ... other stuff
    def damage(self): self.hp -= 1
    def alive(self): return self.hp > 0

# similarly for Bolt

def collide(an_alien, a_bolt):
    # etc.

def handle_collisions(aliens, bolts):
    for a in aliens:
        for b in bolts:
            if collide(a, b):
                a.damage()
                b.damage()

    return list(filter(Alien.alive, aliens)), list(filter(Bolt.alive, bolts)) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-20T04:05:34.430

我认为如果你用 while 循环替换 for 循环 - 只有在你从列表中删除的循环中 - 会解决它

像这样

```
lis = [1,2,3,4,5,6]
i=0
while i in range(len(lis)) :
    lis. remove(lis[i]) 
```*

# jquery - 尝试调整 iframe 的大小

> ID：14126727
> 
> 赞同：0
> 
> 时间：2013-01-02T17:51:22.693
> 
> 标签：jquery, iframe, resizable

好的，我从这里尝试了两种解决方案（论坛，到目前为止还没有发生任何事情）这是我的代码：

```
<script>
<!---tried this without success-->
$("#mySupport").resizable();
alert("Hello! I am an alert box!!");
<!--also tried this from the forums-->
$(document).ready(function(){
    $('#mySupport', window.parent.document).height($(document).height());
});

</script>
<iframe id="mySupport" width="960" height="900" seamless src="https://enterraglobal.zendesk.com/"  scrolling="no">

</iframe>
<!--I don't know probably I'm missing something--> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T17:55:40.590

```
$(document).ready(function(){
    $("#mySupport").height("100px");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T17:58:08.823

我认为您正在尝试将 iframe 设置为与外部文档相同的大小。如果是这样：

```
$(document).ready(function()
{
    $('#mySupport').height( $(document).height() ); 
    $('#mySupport').width( $(document).width() ); 
}); 
```

[jsfiddle](http://jsfiddle.net/z6YHL/)

# python - 批量数据输入以存储到库存中

> ID：14126730
> 
> 赞同：0
> 
> 时间：2013-01-02T17:51:41.573
> 
> 标签：python, django

我正在建立一个电子商务网站。

我试图实现一项功能，允许卖家允许批量上传有关其产品的信息。

产品应具有以下属性。

Product_name,product_price,manufacturer_name.....其他基本属性 product_images,product_videos

我面临的问题是找到一种方便且用户友好的方式来做到这一点。

这个问题可能很普遍，并且自从库存管理过程开始于 Web 以来很早就解决了。

但是，我仍然想不出一种更容易让卖家批量上传数据的方法。

我认为可能的解决方案可能是

XML/Excel/Access 文件 + 图像和视频文件夹（以 id 命名）压缩在一个 tarball 中。

如果是这样，那么标准的做法是什么。

我正在寻找通用和标准解决方案的指南。

# jquery - 如何删除选择菜单上显示的光标？

> ID：14126734
> 
> 赞同：0
> 
> 时间：2013-01-02T17:51:56.847
> 
> 标签：jquery, ios, css, cordova, jquery-mobile

`Selectmenu`在上面多次单击时，我有上面显示的光标`Selectmenu`？

![在此处输入图像描述](../Images/769363d87350391a43508009395bf6b1.png)

这一些代码

```
<center>
        <table width="100%">
            <tr>
                <td style="width: 30%;">
                    <label for="Column1" class="select PSettinglabel">
                        Column 1</label>
                </td>
                <td style="width: 70%;">
                    <div class="dropdowncssclass" >
                        <select name="Column1" id="Column1" data-native-menu="true">
                            <option value="SymbolName">Symbole Name</option>
                            <option value="SymbolID">Symbole ID</option>
                            <option value="Symbol">Symbole ID & Name</option>
                        </select>
                    </div>
                </td>
            </tr>
        </table>
 <center> 
```

这是 iOS 下的 PhoneGap 应用程序。请，任何人遇到这个问题并找到解决方案告诉我解决方案？另外，有什么建议会有所帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T18:04:04.640

我不认为这是一个游标。jQuery Mobile 样式和选择框都没有能够显示闪烁光标的内部元素。

我认为您的选择框样式的实现存在问题，并且“光标”只是一个跨度选择。

如果我是正确的，这个 css 应该可以帮助你：

```
* {
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -khtml-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
} 
```

# javascript - 对多个 JavaScript 数组进行排序

> ID：14126735
> 
> 赞同：0
> 
> 时间：2013-01-02T17:51:58.577
> 
> 标签：javascript, arrays, html, geolocation, haversine

我在 Haversine 公式的帮助下创建了这个脚本，问题是它一直将我引导到阵列上的第一个位置，无论我交换它们多少次。有任何想法吗？

```
var locations = new Array(
  Array("Brighton", 50.82253, -0.137163),
  Array("Chichester", 50.83761, -0.774936),
  Array("Portsmouth", 50.8166667, -1.0833333),
  Array("Worthing", 50.81787, -0.372882)
);

function deg2rad(degrees){
    radians = degrees * (Math.PI/180);
    return radians;
}

function haversine(lat1,lon1,lat2,lon2) {
    deltaLat = lat2 - lat1;
    deltaLon = lon2 - lon1;
    earthRadius = 3959; // In miles (6371 in kilometers)
    alpha = deltaLat/2;
    beta = deltaLon/2;
    a = Math.sin(deg2rad(alpha)) * Math.sin(deg2rad(alpha)) 
      + Math.cos(deg2rad(lat1)) * Math.cos(deg2rad(lat2)) 
      * Math.sin(deg2rad(beta)) * Math.sin(deg2rad(beta));
    c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
    distance = earthRadius * c;
    return distance.toFixed(2);
}

function locationSuccess(position) {

    var places = new Array();
    var userLatitude = position.coords.latitude;
    var userLongitude = position.coords.longitude;

    for(var i=0;i<locations.length;i++) {
        places.push(haversine(
          userLatitude,
          userLongitude,
          locations[i][1],
          locations[i][2]
        ));
    }

    var sorted = places.sort(); // Sort places from low to high 

    /*
    alert(places); // Listed distances unordered
    alert(sorted); // Listed distances in order
    alert(sorted[0]); // Nearest city distance
    */

}

function locationFailed() {
    // Change me to a better error message
    alert("Ooops, we couldn't find you!"); 
}

// Get user's physical location
navigator.geolocation.getCurrentPosition(locationSuccess, locationFailed); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T17:57:36.567

您不是对位置数组进行排序，而是对距离数组进行排序。

您应该将距离放入`locations`数组中（即作为每个元素的第四个成员）：

```
for(var i = 0; i < locations.length; ++i) {
    var l = locations[i];
    l[3] = haversine(userLatitude, userLongitude, l[1], l[2]);
} 
```

然后使用查看该距离场的“比较器”函数：

```
locations.sort(function(a, b) {
    return (a[3] < b[3]) ? -1 : ((a[3] > b[3]) ? 1 : 0);
}); 
```

# javascript - CSS 根据 jQuery 的宽度百分比设置高度

> ID：14126737
> 
> 赞同：0
> 
> 时间：2013-01-02T17:52:04.580
> 
> 标签：javascript, jquery, html, css, wordpress

所讨论的页面本质上是一个图像网格，无论窗口大小，始终是三个图像。

图片来自 Wordpress 帖子，每个都有自己的容器 div，带有溢出：隐藏。容器 div 在 css 中设置为宽度 33.33%。我在 ready() 和窗口调整大小上使用 jQuery 来将容器 div 的高度设置为等于它们的宽度。

html/php 结构如下所示：

```
<div class="collectionPostContainer">
                    <div class="collectionImageHolder">
                        <img src='<?php the_field('photo'); ?>'/>
                    </div>
</div> 
```

js函数如下所示：

```
 function resizeEntryHeight(){
windowWidth = $(window).width();
$('.collectionPostContainer').each(function(){
    $(this).css('height',$(this).width()+'');
}); 
```

}

问题是，当页面第一次加载时，前四个条目的高度都比后面的条目略高，从而在第三行脱离了网格。一旦我在控制台中调用该函数或再次调整窗口大小，高度就会固定并且都相等。

在 Firefox 和 Chrome 上测试，在多个起始窗口大小。奇怪的是，前四个条目的高度总是比后面的条目高 5px。

所以我想知道为什么在同一个循环中为表面上具有相同宽度的元素分配了不同的高度，以及如何制作漂亮的图像网格。

希望这很清楚！

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T18:02:40.417

你可以使用这个 jquery 插件：[https ://github.com/karacas/imgLiquid](https://github.com/karacas/imgLiquid)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T19:16:35.770

这必须为你工作

```
var resizeEntryHeight=function(){
$('.collectionPostContainer').each(function(){
    $(this).css('height',$(this).width()+'px');
});
}

$(document).ready(function(){
resizeEntryHeight();
$(window).resize(resizeEntryHeight());
}); 
```

# c# - 在同一张表的主键上创建外键约束的坏习惯？

> ID：14126739
> 
> 赞同：4
> 
> 时间：2013-01-02T17:52:09.483
> 
> 标签：c#, asp.net, sql, entity-framework

我正在尝试在我的数据库中创建一个评论表，并将子评论也存储在同一个表中。我会在名为“ParentId”的列上放置一个外键约束，该列将链接到 CommentId 列，该列是同一个表的主键。如果它是 Parent 评论，那么我会将 ParentId 设为 null。这是不好的做法吗？如果是这样，有什么更好的方法来解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T18:01:49.230

这可以。您需要考虑的一件事是如果删除带有孩子的评论该怎么办。FK 约束将防止删除，级联删除的常见解决方案在这里似乎不合适，NULL 也不适用于父引用。因此，您可能必须保留已删除的评论，并清除内容或以其他方式将其标记为已删除。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T18:06:01.763

这不是坏习惯，但正如评论者指出的那样，您以后可能会遇到问题。

由于comments-on-comments 相当于一棵逻辑树，因此可能值得查看 Celko 的工作：

[http://www.ibase.ru/devinfo/DBMSTrees/sqltrees.html](http://www.ibase.ru/devinfo/DBMSTrees/sqltrees.html)

非常便利！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T18:08:51.753

[http://msdn.microsoft.com/en-us/library/ms124432(v=sql.100).aspx](http://msdn.microsoft.com/en-us/library/ms124432(v=sql.100).aspx)

对于 SQL Server，这不是一个坏习惯，请参阅上面的 Employee 表定义链接并参考 ManagerID 列，Microsoft 在 SQL Server 提供的示例数据库中使用了这种场景。

需要注意的主要是父记录不能物理删除，您可能需要使用标志使用软删除。

# php - 将数据库调用到视图中的正确方法

> ID：14126750
> 
> 赞同：-1
> 
> 时间：2013-01-02T17:52:44.620
> 
> 标签：php, model-view-controller, pdo

我正在尝试在`database.phtml`我的网站页面上显示数据库。这个页面是一个视图。

到目前为止，我有一个名为 DatabaseConect.php 的模型

```
<?php

abstract class DatabaseConect {

protected $db = NULL;

public function __construct (PDO $db) {
    $this->db = $db;
}
}

class Database extends DatabaseConect {

public $props = array ();

private function getPage ($id) {
    $q = $this->db->prepare('SELECT * FROM retrofootball_products');
    $ret = $res->fetchAll();
    return ($this->props=$ret);
}

}

$db = new PDO('mysql:host=helios.csesalford.com;dbname=pd12', 'helloworld', 'password'); //I have changed the log in details 
```

那么在我看来

```
<?php require('template/header.phtml') ?>

<?php 
$page = new Database ($db);
?>

<?php require('template/footer.phtml') ?> 
```

我一直在尝试在 Stackoverflow 上查找内容，并且遇到过这些文章，但由于我是新手，所以它们对我来说有点过头了：

[在 MVC 应用程序中从模型正确调用数据库？](https://stackoverflow.com/questions/5895805/properly-calling-the-database-from-model-in-an-mvc-application) [http://programmers.stackexchange.com/questions/178831/using-pdo-with-mvc](http://programmers.stackexchange.com/questions/178831/using-pdo-with-mvc)

我的问题是使用 MVC 连接到数据库然后在视图中显示它的最佳方式是什么？我是否需要`PDO::FETCH`在模型中使用将结果显示到变量中，然后在视图中调用该变量？

编辑：就像建议我在控制器中使用了引导程序。我是否需要在我的视图中创建一个新的实例才能让它工作？另外我在哪里在正确的地方运行查询？

```
<?php

class Dependency_Manager {

private $db;

public function __construct($settings) {
    $this->db = new PDO('mysql:host=helios.csesalford.com;dbname=helloworld', 'password',   'php54');
}

public function getDB() {
    return $db;
    }
}

class CMS {
public function __construct(PDO $db) {
    //$stmt = $db->query('SELECT * FROM retrofootball_products');
    }
}

$settings = array();

$dm = new Dependency_Manager($settings);
$cms = new CMS($dm->getDB()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T09:02:01.463

> [**仅供参考：**视图不是模板。在正确实现的 MVC 中，视图是负责所有 UI 逻辑的实例（如由类构成的对象）。为了实现它，他们经常使用多个模板。]

关于 DB 连接*（以及与任何其他形式的存储交互）*的令人困惑的部分是它仅在非常低级别的结构中需要 -[数据映射器](http://www.martinfowler.com/eaaCatalog/dataMapper.html) ^([**书籍章节**](http://books.google.lv/books?id=vqTfNFDzzdIC&lpg=PP1&pg=PT213#v=onepage&q&f=false))。

连接本身应该通过工厂提供给每个数据映射器*（需要它，因为并非所有映射器都可以与 SQL 数据库一起使用）实例。*[这里](https://stackoverflow.com/a/12739161/727208)的代码示例- 相关部分是`StructureFactory`类定义。

创建数据映射器的工厂将注入一个需要使用映射器的实例。否则将违反[LoD](http://c2.com/cgi/wiki?LawOfDemeter)。

视图不应该对数据的来源有任何想法。它只会从模型层请求一些信息。

> [**PS：** [这个](https://stackoverflow.com/a/5906211/727208)古老的答案已经过时了。它包含了我 18 个月前对 MVC 的理解。我很快就会得到更新。你会发现[**这个答案**](https://stackoverflow.com/a/5864000/727208)是最新的。]

# winapi - Windows fread 意外行为

> ID：14126755
> 
> 赞同：0
> 
> 时间：2013-01-02T17:53:03.397
> 
> 标签：winapi, fread

所以 fread 在 Win7 x64 上的行为出乎意料。

```
file = fopen(path, "rb");
fseek(file, 0, SEEK_END);
fileSize = ftell(file);
fseek(file, 0, SEEK_SET);
buffer = malloc(fileSize);
length = fread(buffer, fileSize, 1, file); 
```

fread 将返回 1 个字节作为被读取而 (ferror 和 feof 都返回 0)

```
length = fread(buffer, 1, fileSize, file); 
```

fread 将返回与 fileSize 读取的相同字节数。MSDN 说“fread 函数从输入流中读取最多 count 个大小字节的项目并将它们存储在缓冲区中。” 我将其解释为任何一段代码都应该读取相同数量的数据。有谁知道为什么 fread 没有像我期望的那样工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T18:18:32.553

他们确实读取了相同数量的数据。读取的字节数是`size`参数乘以`count`参数。返回的是读取的项目数。

因此，在第一种情况下，您要求 1 个大小为 fileSize 的项目，它返回 1。在第二种情况下，您要求提供大小为 1 的 fileSize 项目，它返回 fileSize。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T18:18:25.440

[`fread`](http://msdn.microsoft.com/en-us/library/kt0etdcs(v=vs.71).aspx)返回“实际读取的完整项目数”，而不是读取的字节数。

当`fread(buffer, fileSize, 1, file);`您正在读取一个大小的项目`fileSize`（`fread`因此将在成功时返回 1），而当`fread(buffer, 1, fileSize, file);`您正在读取`fileSize`大小为 1 的项目时，它将返回读取的字节数（如您所料）。

# css - 如何使一个 div 与另一个 div 一起移动？

> ID：14126763
> 
> 赞同：0
> 
> 时间：2013-01-02T17:53:24.913
> 
> 标签：css, html

我对编辑html和css等比较陌生，我觉得这很容易解决，但我无法弄清楚..我在tumblr上编辑一个主题，链接在描述下方，但如果描述太长了，它被链接覆盖了。

![http://i.stack.imgur.com/tvLtf.png](../Images/1eaf47839eb8d26be2b41667ed86e94d.png)

我知道有一种方法可以在描述过长时使链接降低，但我不知道该怎么做。我认为这可能与 span 或 div 类有关？

这是我的编码：（描述用于描述）

[http://freetexthost.com/oy6wxvnut3](http://freetexthost.com/oy6wxvnut3)

我是否需要使用 div 类或 span 类/将“#link1”等更改为“.link1”？我需要使用包装器吗？我应该从描述和链接之间移动标题栏 div 吗？

我确实希望描述和链接在滚动时保持在屏幕上的位置。

我希望这是有道理的！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T18:20:35.067

快速而肮脏的[小提琴](http://jsfiddle.net/DMZBF/)

好的，这就是我发现的。你已经用完了这个`position:fixed`属性。您的所有链接和描述框都是固定的，这允许您将元素放置在您想要的任何位置，并让内容在滚动时保持固定，但另一方面是它会使元素失去流动性。这意味着您的元素没有上下文，并且不能使内容相对。您需要做的是重新设计设计，以便只有一个父容器，`position:fixed`并且该父容器的所有子容器都保留其“流动”属性。在以下场景中，只有父级应该是位置固定的：

```
_________________________
|__________窗口_________|
| |
| _____________ |
| |____父母___| |
| | 描述 | |
| | 儿童儿童| 高分辨率照片| CLIPARTO |
| | 儿童儿童| 高分辨率照片| CLIPARTO |
| | 儿童儿童| 高分辨率照片| CLIPARTO |
| ------------- |
 -------------------------

```

你所拥有的是描述和所有固定的子元素。让它们重新相互流动，然后在必要时定位父容器。

# c++ - 从这里实例化错误

> ID：14126765
> 
> 赞同：1
> 
> 时间：2013-01-02T17:53:31.907
> 
> 标签：c++, eclipse-cdt

从现在开始，我一直在寻找这个问题的根源。帮助将不胜感激。

```
#ifndef SETFRAMENODE_H_
#define SETFRAMENODE_H_

#include <time.h>

class SetFrameNode {
private:
    double rate;
    time_t timeStamp;
public:
    SetFrameNode():rate(0),timeStamp(0){}
    SetFrameNode(double rate, time_t timeStamp): rate(rate), timeStamp(timeStamp){
    }
    virtual ~SetFrameNode(){};
    virtual bool operator<(const HeapFrameNode& rhs) const
    {
        if (this->rate>=0){
            if (rhs.rate>=0){
                if(this->rate == rhs.rate){
                    return (this->timeStamp < rhs.timeStamp) ;
                }
                return (this->rate < rhs.rate) ;
            }
        return false;
        }
        return true;
    }
    time_t getTime(){
        return timeStamp;
    }
    double getRate() const{
        return rate;
    }
};

class SetFrameTime: public SetFrameNode{
public:
    SetFrameTime(): SetFrameNode(){}
    SetFrameTime(double rate, time_t timeStamp): SetFrameNode(rate,timeStamp){
    }
    virtual bool operator<(SetFrameNode rhs){
        return (this->getTime() < rhs.getTime());
    }

};

#endif 
```

我遇到问题的功能是：

```
class FrameList {
    list<FrameNode> pointsList;
    time_t timeStamp;
    set<SetFrameNode>* frameSetR;
    set<SetFrameTime>* frameSetT;
    double rate;
public:
    FrameList(set<SetFrameNode>* frameSetR, set<SetFrameTime>* frameSetT):frameSetR(frameSetR),frameSetT(frameSetT),rate(0){
        timeStamp=time(NULL);
    }
    virtual ~FrameList(){
           list<FrameNode>::iterator i;
           PointFrame* ptr;
           double oldRate=0;
           for(i=pointsList.begin(); i != pointsList.end(); ++i){
               ptr=(i->getTrajectory()).deleteFrame(i->getPoint());
               if(ptr==NULL){
                   continue;
               }
               SetFrameTime newFrameTime(0,ptr->getTimeStamp());
               if(frameSetT->find(newFrameTime) ==frameSetT->end()){
                   throw 98;
               }
               oldRate=(frameSetT->find(newFrameTime))->getRate();
               SetFrameNode newFrameNode1(oldRate,ptr->getTimeStamp());
               frameSetR->erase(newFrameNode1);
               oldRate =+ ptr->getRateDiff();
               SetFrameNode newFrameNode2(oldRate,ptr->getTimeStamp());
               frameSetR->insert(newFrameNode2);
               SetFrameTime newFrameTime2(oldRate,ptr->getTimeStamp());
               frameSetT->erase(newFrameTime);
               frameSetT->insert(newFrameTime);

           }
    } 
```

我得到一个“从这里实例化”的错误`if(frameSetT->find(newFrameTime) ==frameSetT->end())`和`frameSetR->insert(newFrameNode2);`任何想法？

这是完整的信息：

```
make all 
Building file: ../Frame.cpp
Invoking: GCC C++ Compiler
g++ -O0 -g3 -Wall -c -fmessage-length=0 -MMD -MP -MF"Frame.d" -MT"Frame.d" -o "Frame.o" "../Frame.cpp"
In file included from /usr/include/c++/4.6/bits/stl_tree.h:65:0,
                 from /usr/include/c++/4.6/set:60,
                 from ../Frame.h:12,
                 from ../Frame.cpp:8:
/usr/include/c++/4.6/bits/stl_function.h: In member function ‘bool std::less<_Tp>::operator()(const _Tp&, const _Tp&) const [with _Tp = SetFrameTime]’:
/usr/include/c++/4.6/bits/stl_tree.h:1529:38:   instantiated from ‘std::_Rb_tree<_Key, _Val, _KeyOfValue, _Compare, _Alloc>::iterator std::_Rb_tree<_Key, _Val, _KeyOfValue, _Compare, _Alloc>::find(const _Key&) [with _Key = SetFrameTime, _Val = SetFrameTime, _KeyOfValue = std::_Identity<SetFrameTime>, _Compare = std::less<SetFrameTime>, _Alloc = std::allocator<SetFrameTime>, std::_Rb_tree<_Key, _Val, _KeyOfValue, _Compare, _Alloc>::iterator = std::_Rb_tree_iterator<SetFrameTime>]’
/usr/include/c++/4.6/bits/stl_set.h:605:29:   instantiated from ‘std::set<_Key, _Compare, _Alloc>::iterator std::set<_Key, _Compare, _Alloc>::find(const key_type&) [with _Key = SetFrameTime, _Compare = std::less<SetFrameTime>, _Alloc = std::allocator<SetFrameTime>, std::set<_Key, _Compare, _Alloc>::iterator = std::_Rb_tree_const_iterator<SetFrameTime>, std::set<_Key, _Compare, _Alloc>::key_type = SetFrameTime]’
../Frame.h:61:38:   instantiated from here
/usr/include/c++/4.6/bits/stl_function.h:236:22: error: passing ‘const SetFrameTime’ as ‘this’ argument of ‘virtual bool SetFrameTime::operator<(SetFrameNode)’ discards qualifiers [-fpermissive]
/usr/include/c++/4.6/bits/stl_function.h: In member function ‘bool std::less<_Tp>::operator()(const _Tp&, const _Tp&) const [with _Tp = SetFrameNode]’:
/usr/include/c++/4.6/bits/stl_tree.h:1267:4:   instantiated from ‘std::pair<std::_Rb_tree_iterator<_Val>, bool> std::_Rb_tree<_Key, _Val, _KeyOfValue, _Compare, _Alloc>::_M_insert_unique(const _Val&) [with _Key = SetFrameNode, _Val = SetFrameNode, _KeyOfValue = std::_Identity<SetFrameNode>, _Compare = std::less<SetFrameNode>, _Alloc = std::allocator<SetFrameNode>]’
/usr/include/c++/4.6/bits/stl_set.h:410:29:   instantiated from ‘std::pair<typename std::_Rb_tree<_Key, _Key, std::_Identity<_Key>, _Compare, typename _Alloc::rebind<_Key>::other>::const_iterator, bool> std::set<_Key, _Compare, _Alloc>::insert(const value_type&) [with _Key = SetFrameNode, _Compare = std::less<SetFrameNode>, _Alloc = std::allocator<SetFrameNode>, typename std::_Rb_tree<_Key, _Key, std::_Identity<_Key>, _Compare, typename _Alloc::rebind<_Key>::other>::const_iterator = std::_Rb_tree_const_iterator<SetFrameNode>, std::set<_Key, _Compare, _Alloc>::value_type = SetFrameNode]’
../Frame.h:69:38:   instantiated from here
/usr/include/c++/4.6/bits/stl_function.h:236:22: error: passing ‘const SetFrameNode’ as ‘this’ argument of ‘virtual bool SetFrameNode::operator<(SetFrameNode)’ discards qualifiers [-fpermissive]
make: *** [Frame.o] Error 1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T18:10:51.947

重要的错误信息是

```
/usr/include/c++/4.6/bits/stl_function.h:236:22: error: passing ‘const SetFrameTime’ as ‘this’ argument of ‘virtual bool SetFrameTime::operator<(SetFrameNode)’ discards qualifiers [-fpermissive] 
```

前面几行只是试图告诉您编译器实例化了哪些模板来查找错误。

问题的根本原因是`std::set`试图调用`operator<`-qualified `const`，`SetFrameTime`但本身`SetFrameTime::operator<()`不是`const`-qualified 。只需`const`在不更改其操作对象的任何运算符（或成员函数）之后添加即可。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T18:08:09.990

随着添加的错误消息，我相信这一点

```
bool operator<(HeapFrameNode rhs) 
```

应该

```
bool operator<(const HeapFrameNode& rhs) const 
```

以某种向后的方式，编译器试图告诉您您在常量对象上调用了非常量运算符。

# ios - 使用 NSPredicate OR 语句进行搜索的最有效方法

> ID：14126766
> 
> 赞同：3
> 
> 时间：2013-01-02T17:53:36.233
> 
> 标签：ios, core-data, nspredicate

我试图在之前的帖子中构建一个谓词，但最终这样做是因为 3 小时后，我无法让它工作。

我觉得必须有一种更有效的方法，而且我需要谓词不区分大小写。

10,000 辆汽车 我有一个轮胎、车轮、座椅三个汽车零件 我想找到所有有轮胎的汽车。然后我想找到所有有轮子的汽车。然后我想找到所有有座位的汽车。（我知道很多会重复，但这就是我需要的）

请让我知道是否有更有效的方法。另外请让我知道如何使谓词不区分大小写。

先感谢您！

```
-(NSArray*) loadCarsFromCoreData:(NSMutableArray*)inputCarParts{

    NSMutableArray *totalResults=[[NSMutableArray alloc]init];
    NSFetchRequest *fetchRequest =[[NSFetchRequest alloc]init];

    //To find the cars we are using the car parts
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"CarParts" inManagedObjectContext:[self managedObjectContext]];
    [fetchRequest setEntity:entity];
    NSError *error;
    NSMutableArray *predicates =[self parseCarPartsIntoAPredicateArray:inputCarParts];
    for (int i=0; i<[predicates count]; i++) {
        [fetchRequest setPredicate:[predicates objectAtIndex:i]];

        NSArray *records = [[self managedObjectContext] executeFetchRequest:fetchRequest error:&error];
        NSLog(@"results = %i",[records count]);
        [totalResults addObjectsFromArray:records];
    }
    NSLog(@"results = %i",[totalResults count]);
    return [NSArray arrayWithArray:totalResults];
}

-(NSMutableArray*)parseCarPartsIntoAPredicateArray:(NSMutableArray*)inputCarParts{
    NSMutableArray *returnArray=[[NSMutableArray alloc]init];
    for (int i=0; i<[inputCarParts count]; i++) {
        NSPredicate *predicate=[NSPredicate predicateWithFormat:@"partName == %@",[inputCarParts objectAtIndex:i]];
        [returnArray addObject:predicate];
    }

    return returnArray;
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-02T18:49:15.280

听起来您真正要寻找的是如何根据可能的匹配数组构造谓词。在这种情况下，你会做这样的事情：

```
NSMutableArray *partPredicates = [NSMutableArray arrayWithCapacity:[inputCarParts count]];
for (NSString *partName in inputCarParts) {
    NSPredicate *currentPartPredicate = [NSPredicate predicateWithFormat:@"partName =[c] %@", partName];
    [partPredicates addObject:currentPartPredicate];
}
NSPredicate *fullPredicate = [NSCompoundPredicate orPredicateWithSubpredicates:partPredicates]; 
```

生成的谓词将类似于`partName ==[c] "tire" OR partName ==[c] "wheel" OR partName ==[c] "seat"`，每个数组条目有一个组件。一次取货即可一次性评估它们。

如果您在 fetch 中使用它，这将**不会得到重复的结果。**您对该问题发表了评论，表明您不希望重复。如果是这样的话，那么我不确定*我知道很多会重复，但这就是我需要的*意思。听起来你想要骗子，但你说你不想要。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T18:09:26.860

如果您需要重复项，我认为您必须像目前所做的那样执行 3 个单独的查询。

如果重复项不重要，您应该尝试通过`OR`在您需要的三个谓词之间使用来创建复合谓词。以下将找到具有指定车轮、轮胎或座椅的所有汽车：

```
NSPredicate *predicate=[NSPredicate predicateWithFormat:@"wheelPartName == %@ OR tirePartName == %@ OR seatPartName == %@", wheelPart, tirePart, seatPart]; 
```

要使您的搜索不区分大小写，请使用`==[c]` 而不是`==`，因此代码中的谓词如下所示：

```
NSPredicate *predicate=[NSPredicate predicateWithFormat:@"partName ==[c] %@",[inputCarParts objectAtIndex:i]]; 
```

看看这个参考：[字符串谓词编程](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Predicates/Articles/pSyntax.html)。

# android - 使用 SSL 的 Android 和 Python 之间的协议错误

> ID：14126770
> 
> 赞同：3
> 
> 时间：2013-01-02T17:53:57.577
> 
> 标签：android, python, ssl, openssl, ssl-certificate

这个问题已经被多次以各种方式提出。不幸的是，没有一个答案能为我提供解决方案。

我正在尝试使用 https 协议连接到 python Web 服务器（要遵循的代码），其中包括客户端身份验证。当我通过我为测试编写的 python 客户端连接时，我没有问题。快进，我现在正在尝试从 Android 设备连接（再次遵循代码）并得到一个

```
javax.net.ssl.SSLProtocolException 
```

我有一个自签名 CA，它颁发了两个证书。一个用于客户端，一个用于服务器。

我使用以下方法从服务器私钥中删除了密码：

`openssl rsa -in serverKey.pem -out serverKey.pem`

并从 linux 命令行使用 openssl 发出请求。

对于客户端，我发出了请求，创建了证书，然后使用 keytool 和 BouncyCastle 提供程序将 CA 导入到信任库中，并将客户端证书导入到密钥库中（我意识到它们是相同的格式，它只是帮助我保持如果我用不同的名字来称呼它们，它们就会分开）。

相关服务器代码：

```
class ReuseHTTPServer(BaseHTTPServer.HTTPServer):
    def __init__(self, address, handler):
        BaseHTTPServer.HTTPServer.__init__(self, address, handler)

        self.address = address

        ssl_socket = ssl.wrap_socket(socket.socket(self.address_family,
                                                   self.socket_type),
                                     keyfile = KEY_PATH,
                                     certfile = CERTIFICATE_PATH,
                                     server_side = True,
                                     cert_reqs = ssl.CERT_REQUIRED,
                                     ssl_version = ssl.PROTOCOL_SSLv23,
                                     ca_certs = CA_PATH)
        s = self.socket.getsockname()

        print "serving:", s[0], "on port:", s[1]

        self.socket = ssl_socket

        self.server_bind()
        self.server_activate()

    def server_bind(self):
        BaseHTTPServer.HTTPServer.server_bind(self) 
```

安卓客户端代码：

```
//add bouncy castle to the list of security providers
Security.insertProviderAt(new BouncyCastleProvider(), 1);

//load the trusted CA
KeyStore trusted = KeyStore.getInstance("BKS");
InputStream in = getResources().openRawResource(R.raw.mobilecastore);
trusted.load(in, "password".toCharArray());
in.close();
TrustManagerFactory trust_factory = TrustManagerFactory.getInstance(TrustManagerFactory.getDefaultAlgorithm());
trust_factory.init(trusted);

//load the client keystore
KeyStore client = KeyStore.getInstance(KeyStore.getDefaultType());
InputStream client_in = getResources().openRawResource(R.raw.client);
client.load(client_in, "password2".toCharArray());
client_in.close();
KeyManagerFactory key_factory = KeyManagerFactory.getInstance(KeyManagerFactory.getDefaultAlgorithm());

key_factory.init(client, "password2".toCharArray());

SSLContext ssl_context = SSLContext.getInstance("SSL"); 
ssl_context.init(key_factory.getKeyManagers(), trust_factory.getTrustManagers(), null);

URL url = new URL("https", IP, 60000, "/cgi-bin/www_sel_jf");
connection = (HttpsURLConnection) url.openConnection();
connection.setSSLSocketFactory(ssl_context.getSocketFactory());
connection.setDoInput(true);
connection.setRequestMethod("GET");
connection.connect(); 
```

错误：

```
12-31 07:23:37.917: W/System.err(3666): javax.net.ssl.SSLHandshakeException: javax.net.ssl.SSLProtocolException: SSL handshake terminated: ssl=0x16bab18: Failure in SSL library, usually a protocol error
12-31 07:23:37.917: W/System.err(3666): error:14094410:SSL routines:SSL3_READ_BYTES:sslv3 alert handshake failure (external/openssl/ssl/s3_pkt.c:1234 0x16bf980:0x00000003)
12-31 07:23:37.917: W/System.err(3666):     at org.apache.harmony.xnet.provider.jsse.OpenSSLSocketImpl.startHandshake(OpenSSLSocketImpl.java:460)
12-31 07:23:37.917: W/System.err(3666):     at org.apache.harmony.xnet.provider.jsse.OpenSSLSocketImpl.startHandshake(OpenSSLSocketImpl.java:257)
12-31 07:23:37.917: W/System.err(3666):     at libcore.net.http.HttpConnection.setupSecureSocket(HttpConnection.java:210)
12-31 07:23:37.917: W/System.err(3666):     at libcore.net.http.HttpsURLConnectionImpl$HttpsEngine.makeSslConnection(HttpsURLConnectionImpl.java:477)
12-31 07:23:37.917: W/System.err(3666):     at libcore.net.http.HttpsURLConnectionImpl$HttpsEngine.connect(HttpsURLConnectionImpl.java:441)
12-31 07:23:37.917: W/System.err(3666):     at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:282)
12-31 07:23:37.917: W/System.err(3666):     at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:232)
12-31 07:23:37.917: W/System.err(3666):     at libcore.net.http.HttpURLConnectionImpl.connect(HttpURLConnectionImpl.java:80)
12-31 07:23:37.917: W/System.err(3666):     at libcore.net.http.HttpsURLConnectionImpl.connect(HttpsURLConnectionImpl.java:164)
12-31 07:23:37.917: W/System.err(3666):     at com.dsndata.sds2mobile.status.activities.ServerJobs$RetrieveJobNames.doInBackground(ServerJobs.java:143)
12-31 07:23:37.917: W/System.err(3666):     at com.dsndata.sds2mobile.status.activities.ServerJobs$RetrieveJobNames.doInBackground(ServerJobs.java:1)
12-31 07:23:37.917: W/System.err(3666):     at android.os.AsyncTask$2.call(AsyncTask.java:264)
12-31 07:23:37.925: W/System.err(3666):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
12-31 07:23:37.925: W/System.err(3666):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
12-31 07:23:37.925: W/System.err(3666):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
12-31 07:23:37.925: W/System.err(3666):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
12-31 07:23:37.925: W/System.err(3666):     at java.lang.Thread.run(Thread.java:856)
12-31 07:23:37.925: W/System.err(3666): Caused by: javax.net.ssl.SSLProtocolException: SSL handshake terminated: ssl=0x16bab18: Failure in SSL library, usually a protocol error
12-31 07:23:37.925: W/System.err(3666): error:14094410:SSL routines:SSL3_READ_BYTES:sslv3 alert handshake failure (external/openssl/ssl/s3_pkt.c:1234 0x16bf980:0x00000003)
12-31 07:23:37.925: W/System.err(3666):     at org.apache.harmony.xnet.provider.jsse.NativeCrypto.SSL_do_handshake(Native Method)
12-31 07:23:37.925: W/System.err(3666):     at org.apache.harmony.xnet.provider.jsse.OpenSSLSocketImpl.startHandshake(OpenSSLSocketImpl.java:410)
12-31 07:23:37.925: W/System.err(3666):     ... 16 more
12-31 07:23:37.925: W/System.err(3666): javax.net.ssl.SSLHandshakeException: javax.net.ssl.SSLProtocolException: SSL handshake terminated: ssl=0x16bab18: Failure in SSL library, usually a protocol error
12-31 07:23:37.925: W/System.err(3666): error:14094410:SSL routines:SSL3_READ_BYTES:sslv3 alert handshake failure (external/openssl/ssl/s3_pkt.c:1234 0x16bf980:0x00000003)
12-31 07:23:37.925: W/System.err(3666):     at org.apache.harmony.xnet.provider.jsse.OpenSSLSocketImpl.startHandshake(OpenSSLSocketImpl.java:460)
12-31 07:23:37.925: W/System.err(3666):     at org.apache.harmony.xnet.provider.jsse.OpenSSLSocketImpl.startHandshake(OpenSSLSocketImpl.java:257)
12-31 07:23:37.925: W/System.err(3666):     at libcore.net.http.HttpConnection.setupSecureSocket(HttpConnection.java:210)
12-31 07:23:37.925: W/System.err(3666):     at libcore.net.http.HttpsURLConnectionImpl$HttpsEngine.makeSslConnection(HttpsURLConnectionImpl.java:477)
12-31 07:23:37.925: W/System.err(3666):     at libcore.net.http.HttpsURLConnectionImpl$HttpsEngine.connect(HttpsURLConnectionImpl.java:441)
12-31 07:23:37.925: W/System.err(3666):     at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:282)
12-31 07:23:37.925: W/System.err(3666):     at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:232)
12-31 07:23:37.925: W/System.err(3666):     at libcore.net.http.HttpURLConnectionImpl.connect(HttpURLConnectionImpl.java:80)
12-31 07:23:37.925: W/System.err(3666):     at libcore.net.http.HttpsURLConnectionImpl.connect(HttpsURLConnectionImpl.java:164)
12-31 07:23:37.925: W/System.err(3666):     at com.dsndata.sds2mobile.status.activities.ServerJobs$RetrieveJobNames.doInBackground(ServerJobs.java:143)
12-31 07:23:37.932: W/System.err(3666):     at com.dsndata.sds2mobile.status.activities.ServerJobs$RetrieveJobNames.doInBackground(ServerJobs.java:1)
12-31 07:23:37.932: W/System.err(3666):     at android.os.AsyncTask$2.call(AsyncTask.java:264)
12-31 07:23:37.932: W/System.err(3666):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
12-31 07:23:37.932: W/System.err(3666):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
12-31 07:23:37.932: W/System.err(3666):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
12-31 07:23:37.932: W/System.err(3666):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
12-31 07:23:37.932: W/System.err(3666):     at java.lang.Thread.run(Thread.java:856)
12-31 07:23:37.932: W/System.err(3666): Caused by: javax.net.ssl.SSLProtocolException: SSL handshake terminated: ssl=0x16bab18: Failure in SSL library, usually a protocol error
12-31 07:23:37.932: W/System.err(3666): error:14094410:SSL routines:SSL3_READ_BYTES:sslv3 alert handshake failure (external/openssl/ssl/s3_pkt.c:1234 0x16bf980:0x00000003)
12-31 07:23:37.932: W/System.err(3666):     at org.apache.harmony.xnet.provider.jsse.NativeCrypto.SSL_do_handshake(Native Method)
12-31 07:23:37.932: W/System.err(3666):     at org.apache.harmony.xnet.provider.jsse.OpenSSLSocketImpl.startHandshake(OpenSSLSocketImpl.java:410)
12-31 07:23:37.932: W/System.err(3666):     ... 16 more 
```

应该注意的是，我使用的是 javax.net.ssl 库而不是 apache 库。

编辑：python 服务器托管在 Windows 机器上。对于 Windows 端口上的 ssl，是否需要考虑任何额外的配置？

编辑：是的，需要做一些事情才能在 Windows 端口上允许 SSL。切换到端口 443（指定用于 SSL 流量）并且正在（缓慢）进展。

编辑：我现在可以使用 Wireshark 跟踪请求（我正在为这个问题学到很多东西！）并且 Wireshark 告诉我有 405 错误。这在 SSL 中意味着证书格式无法识别。python 服务器正在使用 PEM 证书（根据 python 文档允许的唯一格式），并且导入到 Android 设备上的密钥库中的证书是 DER（据我所知，BKS 接受的唯一格式）。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T15:16:20.333

在学习了如何读取数据包之后，事实证明问题出在我的证书上。公用名与 URL 不匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T21:12:16.610

这可能是 SSL/TLS 版本或算法不匹配错误。您的服务器使用 SSL v.2-3，虽然它已经很老了，应该使用 TLS 1.0-1.2。调试此问题的最佳方法是运行 Wireshark，查看发送了哪个客户端和服务器的 SSL/TLS 握手数据包以及何时断开连接。

# ruby - 有没有办法直接运行一个红宝石鞋应用程序？

> ID：14126771
> 
> 赞同：4
> 
> 时间：2013-01-02T17:53:58.870
> 
> 标签：ruby, shoes

我设法在 Linux (Mint 14) 上构建鞋子，但显然我只能通过首先运行鞋子可执行文件并选择“打开应用程序”来运行我的脚本。这有点乏味，但是当我运行时`ruby CoverMaker.rb`，我收到以下错误：

```
/home/bleuarff/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load such file -- shoes (LoadError)
from /home/bleuarff/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
from CoverMaker.rb:1:in `<main>' 
```

我的完整代码如下：

```
require 'shoes'
#include Shoes

Shoes.app do 
  flow do
    para "Image folder:"
    edit_line
  end
end 
```

取消注释`#include 'shoes'`得到一个错误*“错误的参数类型类（预期模块）”*
那么，有没有办法通过直接运行脚本来让脚本正常工作，而无需先运行跑鞋的开销？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T00:23:43.980

如果您将鞋子构建为独立应用程序，您应该能够使用以下命令运行您的脚本：

./shoes CoverMaker.rb

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-03T18:10:45.040

在 OS X 上，您可以使用：

/Applications/Shoes/Shoes.app/Contents/MacOS/shoes script.rb

# asp.net - 具有 PostgreSQL 和 dev.nauck.AspSQLProvider 的 ASP.NET 成员资格

> ID：14126772
> 
> 赞同：4
> 
> 时间：2013-01-02T17:54:04.560
> 
> 标签：asp.net, postgresql, asp.net-membership, membership-provider, npgsql

我正在尝试将 Daniel Nauck [http://dev.nauck-it.de/projects/aspsqlprovider](http://dev.nauck-it.de/projects/aspsqlprovider)创建的 PostgreSQL Membership 提供程序 用于 ASP.NET Web 应用程序（C#），并按照在

[http://dev.nauck-it.de/projects/1/wiki/Install?version=11](http://dev.nauck-it.de/projects/1/wiki/Install?version=11)

我已经使用 nuget 安装了 NpgSQL 和 Membership 提供程序：

```
Install-Package Npgsql
Install-Package Nauck.PostgreSQLProvider 
```

访问项目配置网站上的“安全”选项卡时，出现以下错误：

> 不在独立 exe 中运行时必须指定 exepath

我将给定的 SQL 成员表添加到我的 postgres 数据库并指定连接字符串，以及 web.config 文件中的给定配置。

网络配置：

```
<configuration>

  <connectionStrings>
    <add name="PostgreSQL" connectionString="Server=localhost;Port=5432;Database=mydb;User Id=postgres;Password=mypassword;Encoding=UNICODE;Sslmode=Prefer;Pooling=true;" />
  </connectionStrings>

  <system.web>
    <compilation debug="true" targetFramework="4.0" />

    <membership defaultProvider="PgMembershipProvider">
      <providers>
        <clear />
        <add name="PgMembershipProvider" type="NauckIT.PostgreSQLProvider.PgMembershipProvider" connectionStringName="PostgreSQL" requiresUniqueEmail="true" enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="true" passwordFormat="Hashed" applicationName="AquilaWeb" />
      </providers>
    </membership>

    <roleManager enabled="true" defaultProvider="PgRoleProvider" cacheRolesInCookie="true" cookieName=".AspNetRoles" cookiePath="/" cookieProtection="All" cookieRequireSSL="false" cookieSlidingExpiration="true" createPersistentCookie="false" cookieTimeout="30" maxCachedResults="25">
      <providers>
        <clear />
        <add name="PgRoleProvider" type="NauckIT.PostgreSQLProvider.PgRoleProvider" connectionStringName="PostgreSQL" applicationName="AquilaWeb" />
      </providers>
    </roleManager>

    <profile enabled="true" defaultProvider="PgProfileProvider">
      <providers>
        <clear />
        <add name="PgProfileProvider" type="NauckIT.PostgreSQLProvider.PgProfileProvider" connectionStringName="PostgreSQL" applicationName="AquilaWeb" />
      </providers>
      <properties>
        <add name="FirstName" />
        <add name="LastName" />
      </properties>
    </profile>

    <sessionState mode="Custom" customProvider="PgSessionStateStoreProvider">
      <providers>
        <clear/>
        <add name="PgSessionStateStoreProvider" type="NauckIT.PostgreSQLProvider.PgSessionStateStoreProvider" enableExpiredSessionAutoDeletion="true" expiredSessionAutoDeletionInterval="60000" enableSessionExpireCallback="false" connectionStringName="PostgreSQL" applicationName="AquilaWeb" />
      </providers>
    </sessionState>

  </system.web>

  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="Npgsql" publicKeyToken="5d8b90d52f46fda7" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-2.0.12.0" newVersion="2.0.12.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime>

</configuration> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T12:42:06.583

您可能想尝试[2.0.0](http://dev.nauck-it.de/versions/show/5)版的提供程序。它包含一个错误修复 ASP.NET 4+ 中的托管环境检测

[您可以在NuGet](https://nuget.org/packages/NauckIT.PostgreSQLProvider)上获取最新版本。

[项目 wiki](http://dev.nauck-it.de/projects/aspsqlprovider/wiki)上提供了文档。

# javascript - 选项资源无法加载，仅在 chrome 中

> ID：14126774
> 
> 赞同：1
> 
> 时间：2013-01-02T17:54:13.787
> 
> 标签：javascript, google-chrome, file-upload, xmlhttprequest

尝试使用以下代码将文件上传到 servlet：

```
 var fd = new FormData();
    fd.append("file", document.getElementById('fileToUpload').files[0]);
    var xhr = new XMLHttpRequest();
    xhr.upload.addEventListener("progress", uploadProgress, false);
    xhr.upload.addEventListener("load", transferComplete, false);
    xhr.addEventListener("error", onError, false);
    xhr.addEventListener("abort", onUploadCanceled, false);

    xhr.open("POST", urlManager.getUploadHandlerUrl());
    xhr.send(fd); 
```

问题仅在chrome中（在Firefox中完美运行），说加载资源失败并且问题不一致。它有时会上传一次或两次开始大喊大叫。当这是错误时，它甚至不会调用服务器。

尝试使用此问题中示例中的[jquery](https://stackoverflow.com/questions/166221/how-can-i-upload-files-asynchronously-with-jquery)。但没有任何好处。

我想不出这样的事情怎么会发生。我感谢任何线索，谢谢。

![在此处输入图像描述](../Images/bf8cb1b38105df0070eabbbdc22fd66d.png)

**编辑：**当我包装我的 XHR 并按照另一个[SO 答案](http://bit.ly/Ty1Dmi)中的说明显式设置异步时，它正在为至少 3-4 次上传工作并开始大喊大叫。（比以前好一点）。我怀疑它是否真的有效果。
当状态发生变化时，我正在记录就绪状态和状态。readyState 只是从 1 跳转到 4，状态为 0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T09:56:05.850

我也有类似的问题，我的问题是通过解决 HTTP 与 HTTPS 冲突解决的。

如果上传文件的页面是从 HTTP 提供的，并且您发出的发布请求是 HTTPS，那么它可能会在 chrome 中出现“资源加载失败”错误，这就是我的情况。

页面服务和发布请求都应该是 HTTP 或两者都应该是 HTTPS ，它可以是两者的组合。

我制作了 HTTP 并且我的问题得到了解决。让我知道这是否也解决了您的问题。祝您好运。

# c - 二维指针数组 C

> ID：14126776
> 
> 赞同：0
> 
> 时间：2013-01-02T17:54:16.760
> 
> 标签：c, arrays, multithreading

这可能很容易回答，但我似乎无法弄清楚它的语法。我需要的是一个二维数组，第一个元素是指向 CSTRING 的指针，第二个元素是一个计数器。

这样做的目的是基于线程号将单词列表线程化并传递给线程。就像它被定义为 char wordlists[100][10] 之类的东西（100 个单词和 10 个列表，每个线程 10 个总共 10 个）我最初可以用文件中的单词填充所有列表，然后将特定列表传递给要处理的线程，一旦线程加入主线程，我将重新填充与加入线程相关的单词列表，并用新单词重新启动线程。

总的来说，我没有得到制作二维指针数组的语法（第一个元素指针第二个只是一个计数器）。也可以只传递特定线程的单词开始的数组地址，所以我不需要传递 1000 个单词的整个 2D 数组吗？（这样我就可以传递存储 100 个字的线程的起始地址）

谢谢您的帮助！

编辑:: 如果你们对通过线程处理大字文件的类似方法有更好的建议，那么建议他们接受更多想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T18:06:01.523

[您可能可以从阅读comp.lang.c FAQ](http://c-faq.com/)的（相关部分，但我推荐全部）中受益。

对于任何接触 C（和类似 C 的语言）的人来说，这可能是必读的，而且令人难以置信地大开眼界（尤其是关于未定义语句的行为、空指针的值和使用，以及在你的情况下，指针和指针数组） .

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T17:56:46.240

> 我没有得到制作二维指针数组的语法

`*`的优先级低于`[]`。因此 wordlists 是一个指向 的数组`char`。

```
char *wordlists[100][10]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T17:59:30.233

声明一个二维指针数组（类型`T`）：

```
T *array[width][height]; 
```

> 也可以只传递数组地址 [...] 所以我不需要传递 1000 个字的整个二维数组？

你甚至不能做任何其他事情。在 C 中，数组总是按指针传递，而不是按值传递。

# maven - 如何为单个 Maven 插件执行设置 log4j 级别？

> ID：14126778
> 
> 赞同：1
> 
> 时间：2013-01-02T17:54:23.017
> 
> 标签：maven, log4j, maven-plugin

我正在使用 Maven -assembly-plugin 并获得大量的 INFO 消息，其中列出了所有被省略的重复条目。有没有办法为这个单一的插件执行设置 log4j 级别为“WARN”？

```
<plugin>
    <artifactId>maven-assembly-plugin</artifactId>
    <version>2.3</version>
    <configuration>
        <descriptorRefs>
            <descriptorRef>jar-with-dependencies</descriptorRef>
        </descriptorRefs>
        <outputDirectory>${basedir}/../package/lib</outputDirectory>
    </configuration>
    <executions>
        <execution>
            <id>make-assembly</id>
            <phase>package</phase>
            <goals>
                <goal>single</goal>
            </goals>
        </execution>

    </executions>
</plugin> 
```

例如，请注意此步骤的以下 log4j 输出示例中的重复项：

```
...
[INFO] META-INF/notice.txt already added, skipping
[INFO] META-INF/spring.handlers already added, skipping
[INFO] META-INF/spring.schemas already added, skipping
[INFO] META-INF/spring.tooling already added, skipping
[INFO] META-INF/INDEX.LIST already added, skipping
[INFO] META-INF/MANIFEST.MF already added, skipping
[INFO] META-INF/MANIFEST.MF already added, skipping
[INFO] META-INF/license.txt already added, skipping
[INFO] META-INF/notice.txt already added, skipping
[INFO] overview.html already added, skipping
[INFO] META-INF/INDEX.LIST already added, skipping
[INFO] META-INF/MANIFEST.MF already added, skipping
[INFO] META-INF/license.txt already added, skipping
[INFO] META-INF/notice.txt already added, skipping
[INFO] META-INF/spring.handlers already added, skipping
[INFO] META-INF/spring.schemas already added, skipping
[INFO] META-INF/spring.tooling already added, skipping 
... 
```

就我而言，我有大约 3,000 条这些 [INFO] 消息。这会使 Maven 构建输出膨胀，并且更难看到真正的错误。

谢谢，

标记

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-27T15:28:36.863

我不知道使用 log4j 的答案，但您可以使用下一版本的程序集插件来纠正您的问题

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-assembly-plugin</artifactId>
    <version>2.4</version>
</plugin> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T04:11:31.517

如果您使用的是 Maven 2.x，这似乎是不可能的，请[参阅](http://maven.40175.n5.nabble.com/Maven-Plugin-LogLevel-td116575.html)。

您可以添加参数 '-q' 或 '--quiet' 使 Maven 只显示错误，但它是一个全局选项。

# .net - 使用 ODP.NET 从 Oracle 数据库创建实体数据模型

> ID：14126779
> 
> 赞同：1
> 
> 时间：2013-01-02T17:54:29.340
> 
> 标签：.net, oracle, entity-framework, odp.net, odac

问题：我在使用 ODP.NET 的服务器资源管理器中创建的 Oracle 数据源没有显示在实体数据模型向导中以创建 *.edmx

以下演练是我试图遵循的，但是当我进入“使用实体数据模型向导创建实体数据模型”的第 4 步时，我创建的连接不会显示在下拉列表中。此外，在尝试创建新连接时，ODP.NET 不作为可能的数据提供者存在。

[http://download.oracle.com/oll/obe/EntityFrameworkOBE/EntityFrameworkOBE.htm](http://download.oracle.com/oll/obe/EntityFrameworkOBE/EntityFrameworkOBE.htm)

我已经用 SQL Server 成功完成了很多次。奇怪的是，在服务器资源管理器中创建新连接时，ODP.NET 被列为数据提供者。

我有什么： - Win7 - Visual Studio 2010 Ultimate - .Net 框架 4 - 实体框架 4 - 64 位 ODAC 11.2.0.3

任何帮助都是极好的！！

# android - 片段中的片段中的片段等与 ListView 动画

> ID：14126780
> 
> 赞同：1
> 
> 时间：2013-01-02T17:54:35.230
> 
> 标签：android, listview, animation, android-fragments, adapter

所以，我正在尝试使用动画，到目前为止，这是一个非常令人头疼的问题。我在这里尝试做的也与我通常看到的有所不同。

场景是我在 Activity 启动时使用 FragmentTransactions 为 ListFragment 充气。当我单击一个列表项时，我希望该项目滚动到屏幕顶部，以便它的顶部触及操作栏的底部。不仅如此，我还希望列表项的底部扩展到屏幕底部。在执行所有这些操作的同时，我想在列表项下现在展开的区域中使用 FragmentTransactions 添加另一个 ListFragment。父 ListView 应该是不可滚动的，但仍然可以单击，因为用户希望单击顶部的锁定列表项以折叠展开的区域。你可以想象当我点击内部 ListFragment 中的另一个列表项时会发生什么，它会重复整个过程。

假设我们打开了多个 Fragment，这些锁定的列表项应该堆叠在一起。我希望能够向下拖动当前一个以查看所有这些都堆叠在一起，这可能是 ListView 设置为不可滚动的问题。你可以说这里的想法是试图限制滚动到某个区域。

我所做或尝试做的是在列表项 XML 中添加 FrameLayout 并将其可见性设置为 GONE。我已经将它的宽度和高度都设置为 match_parent。我已经看到了问题，因为如果它所在的相对布局的高度设置为 128dp，并且我希望 Frame_Layout 的高度一直到屏幕底部，我该怎么做呢？无论如何，我还将底部边距设置为减去它的高度，以隐藏它并稍后展开，以便在项目展开时将其下方的任何其他列表项向下推。我正在使用 ValueAnimator 将动画值从展开设置为折叠，但我认为我的代码错误或搞砸了。我对这一切感到很困惑，但下面是我的代码。这一切都内置在一个自定义适配器的 getView 方法中，在一个视图中。点击监听器。但这带来了另一个问题。如果我在 ListFragment 中覆盖 onListItemClick()，首先是 View.onClickListener 还是 onListItemClick()？

```
public void setAnimation(final View item, final View viewToBeExpanded)
    {
        // Gets the height and the reference for viewToBeExpanded's LayoutParams
        layoutParams = ((FrameLayout.LayoutParams) viewToBeExpanded.getLayoutParams());
        viewToBeExpanded_height = layoutParams.height;
        viewToBeExpanded_bottomMargin = layoutParams.bottomMargin;
        layoutParams.bottomMargin = -viewToBeExpanded_height + viewToBeExpanded_bottomMargin;

        item.setOnClickListener(new View.OnClickListener()
        {
            @Override
            public void onClick(View view) {

                if (expanded == true) {
                    expanded = false;
                    expandAnimator = ValueAnimator.ofInt(layoutParams.bottomMargin, viewToBeExpanded_bottomMargin);
                    expandAnimator.setTarget(viewToBeExpanded);
                    expandAnimator.setDuration(500);
                    expandAnimator.addUpdateListener(new ValueAnimator.AnimatorUpdateListener() {
                        @Override
                        public void onAnimationUpdate(ValueAnimator animation) {
                            layoutParams.bottomMargin = (Integer) animation.getAnimatedValue();
                            viewToBeExpanded.invalidate();
                            viewToBeExpanded.requestLayout();
                        }
                    });
                    viewToBeExpanded.setVisibility(View.VISIBLE);
                    expandAnimator.start();
                } else {
                    collapseAnimator = ValueAnimator.ofInt(viewToBeExpanded_bottomMargin, -viewToBeExpanded_height + viewToBeExpanded_bottomMargin);
                    collapseAnimator.setTarget(viewToBeExpanded);
                    collapseAnimator.setDuration(500);
                    collapseAnimator.addUpdateListener(new ValueAnimator.AnimatorUpdateListener() {
                        @Override
                        public void onAnimationUpdate(ValueAnimator animation) {
                            layoutParams.bottomMargin = (Integer) animation.getAnimatedValue();
                            viewToBeExpanded.invalidate();
                            viewToBeExpanded.requestLayout();
                        }
                    });
                    collapseAnimator.start();
                }
            }
        });
        viewToBeExpanded.setVisibility(View.GONE);
    } 
```

# javascript - IE9 状态/存储选择选项不会附加

> ID：14126783
> 
> 赞同：0
> 
> 时间：2013-01-02T17:54:49.933
> 
> 标签：javascript, jquery, drupal

我在 IE9 及以下版本中遇到了一个麻烦的 javascript 错误。我有两个选择框。一个是“选择您的州”框。此选择将选择的选项过滤到该状态下的选项。

它在我尝试过的所有东西中都能按预期工作，但 IE 除外。正如您在 HTML 示例中看到的那样，选项包含在 optgroups 中。我在 document.ready 上创建了一个选项对象，然后将它们从 DOM 中删除。在更改状态选择框时，我将带有 optgroups 的选项子集放入商店选择中。但是，IE 只放置了 optgroup，而不放置选项。我尝试了几种将元素附加到选择的不同方法，但 IE 不会附加 optgroups 的子选项。

这是简化的 html 和适用的 javascript。这是一个 Drupal 站点，所以我正在使用 jQuery 1.4.4。

```
<select id="edit-state">
    <option value="AL">Alabama</option>
    <option value="AZ">Arizona</option>
    <option value="AR">Arkansas</option>
    <option value="CA">California</option>
</select> 
```

假设选择了 Arizona，这应该是第二个选择框的 HTML：

```
<select id="edit-store">
    <optgroup label="AZChandler">
        <option value="SPCHRAZ">Store Name</option>
    </optgroup>
    <optgroup label="AZPhoenix">
        <option value="SPPVAAZ">Store Name</option>
        <option value="SPSCTAZ">Store Name</option>
    </optgroup>
    <optgroup label="AZScottsdale">
        <option value="SPRNTAZ">Store Name</option>
    </optgroup>
    <optgroup label="AZTempe">
        <option value="SPTEMAZ">Store Name</option>
    </optgroup>
    <optgroup label="AZTucson">
        <option value="SPORAAZ">Store Name</option>
        <option value="SPSPEAZ">Store Name.</option>
        <option value="SPRRDAZ">Store Name</option>
    </optgroup>
</select> 
```

这是javascript。此函数在#edit-state 更改时调用。options 参数是所有 optgroup 和选项的对象。此功能过滤并附加它们。

```
function setStateOptions(options){
  var stateabbr = jQuery('#edit-state').find('option').filter(':selected').attr('value');
    jQuery('#edit-store optgroup').remove();

    jQuery(options).each(function() {
        var label = jQuery(this).attr('label');
        var abbr = label.substr(0, 2);
        if(abbr == stateabbr){
          var clone = jQuery(this).clone();
          jQuery(clone).appendTo('#edit-store');
         }
    });
    //remove postal code abbr from beginning of optgroup labels.
    jQuery('#edit-store optgroup').each(function(){
        var optlabel = jQuery(this).attr('label');
        jQuery(this).attr('label', optlabel.substr(2));
    });  
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T18:35:26.970

我稍微编辑了代码以测试从一个选择中抓取 optgroup 并将它们放在另一个中。以下似乎在 IE9 中使用 jquery 1.4.4 可以正常工作。我现在的理论是，问题不在于函数，而在于您传入的参数。

```
<select id="edit-store">
    <optgroup label="AZChandler">
        <option value="SPCHRAZ">SPCHRAZ</option>
    </optgroup>
    <optgroup label="AZPhoenix">
        <option value="SPPVAAZ">SPPVAAZ</option>
        <option value="SPSCTAZ">SPSCTAZ</option>
    </optgroup>
    <optgroup label="AZScottsdale">
        <option value="SPRNTAZ">SPRNTAZ</option>
    </optgroup>
    <optgroup label="AZTempe">
        <option value="SPTEMAZ">SPTEMAZ</option>
    </optgroup>
    <optgroup label="AZTucson">
        <option value="SPORAAZ">SPORAAZ</option>
        <option value="SPSPEAZ">SPSPEAZ</option>
        <option value="SPRRDAZ">SPRRDAZ</option>
    </optgroup>
</select>​
<select id="Select2">
</select>
<script type="text/javascript">
    jQuery('#edit-store optgroup').each(
        function () {
            var label = jQuery(this).attr('label');
            var abbr = label.substr(2, 1);
            if (abbr == 'T') {
                var clone = jQuery(this).clone();
                jQuery(clone).appendTo('#Select2');
            }
        }
    );
</script> 
```

# c# - VS2010 单元测试尝试启动或加载但从未到达代码且从未完成

> ID：14126787
> 
> 赞同：2
> 
> 时间：2013-01-02T17:54:57.810
> 
> 标签：c#, visual-studio-2010, unit-testing

我有这个从 VS2010 到我的 winform 应用程序 Form1 的自动生成的测试项目，我想测试的方法是一个 int add(int x, int y) 方法：

```
[TestClass()] 
public class Form1Test
{

private TestContext testContextInstance;

public TestContext TestContext
    {
        get
        {
            return testContextInstance;
        }
        set
        {
            testContextInstance = value;
        }
    }    

[TestMethod()]
    public void addTest()
    {
        Form1 target = new Form1(); // TODO: Passenden Wert initialisieren
        int x = 0; // TODO: Passenden Wert initialisieren
        int y = 0; // TODO: Passenden Wert initialisieren
        int expected = 0; // TODO: Passenden Wert initialisieren
        int actual;
        actual = target.add(x, y);
        Assert.AreEqual(expected, actual);
        Assert.Inconclusive("Überprüfen Sie die Richtigkeit dieser Testmethode.");
    } 
```

但是当我去运行测试时，我看到测试正在运行但没有任何反应，我什至不能关闭或中断任何东西。我的测试项目中可能是什么问题或缺少什么？

Edit1：在调试模式下，无法到达断点，因为没有加载任何符号，并且调用堆栈为空

Edit2：当在 VS2012 中打开并运行相同的测试解决方案时，一切正常，但在 VS2010 中没有

Edit3：似乎我在尝试运行测试时总是遇到异常：“失去与控制器的连接”

更新 - 现在安装 VS2010 SP1 后测试运行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T20:25:09.190

Update: Somehow the problem fixed itself by installing the VS2010 SP1\. After that everything worked.

# java - 为什么我应该使用 Integer.toString() 而不是只打印 Integer？

> ID：14126792
> 
> 赞同：8
> 
> 时间：2013-01-02T17:55:28.370
> 
> 标签：java, integer, tostring

我正在关注一个 Java 教程，它让我做类似的事情：

```
int k = 5;
System.out.println("The number is " + Integer.toString(k)); 
```

所以就像我跟随的一项好运动，但我不禁想知道，为什么要使用这种方法？似乎需要大量额外的输入才能获得与以下相同的功能：

```
int k = 5;
System.out.println("The number is " + k); 
```

是否有充分的理由将该`toString()`方法用于非字符串数据类型？在我的具体示例中，是否有任何`int`值不能自动转换为字符串？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-02T18:59:32.063

这是您可以采用的许多“安全编程”实践之一，以提高清晰度并防止您或您的代码的未来维护者可能引入的细微错误。举个例子：

```
private static void printMessage(int k) {
    System.out.println("number" + '=' + k);
} 
```

输出：`number=5`

现在假设您想先打印数字，最后打印文本。我所做的只是交换字符串连接中的第一项和最后一项：

```
private static void printMessage2(int k) {
    System.out.println(k + '=' + "number");
} 
```

输出：`66number`

哎呀！的 int 值`=`被添加到`k`而不是被连接。一种解决方案是`=`将`String`. 另一种解决方案是将 显式转换`int`为 a `String`：

```
private static void printMessage2Safe(int k) {
    System.out.println(Integer.toString(k) + '=' + "number");
} 
```

输出：`5=number`

“哦，但无论如何我永远不会那样做，”你说。“任何头脑正常的人都会制作`=`另一个弦乐的一部分。” 但是，如果您正在实现基本计算器应用程序的一部分，并且想要输出表达式及其结果怎么办？如果你真的很小心，我想你会用它`StringBuilder.append()`来连接表达式的各个部分。但如果不是，那么我希望你不要写`display`下面方法的第一个实现。

```
public class Calculator {

    public static void main(String[] args) {
        display(2, '+', 3, 5);
        displaySafe(2, '+', 3, 5);
    }

    public static void display(int num1, char operator, int num2, int result) {
        System.out.println(num1 + operator + num2 + '=' + result);
    }

    public static void displaySafe(int num1, char operator, int num2, int result) {
        System.out.println(Integer.toString(num1) + operator + Integer.toString(num2) + "=" + result);
    }

} 
```

输出：

```
114
2+3=5 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-02T17:58:36.367

> 是否有充分的理由将 toString() 方法用于非字符串数据类型？

有些人认为它更清楚。尤其是对于可能没有意识到他们做基本相同的事情的初学者。

注意：在 Java 7 更新 9 中，它不会首先创建字符串，因为 append(int) 看起来像这样

```
// from AbstractStringBuilder 
public AbstractStringBuilder append(int i) {
    if (i == Integer.MIN_VALUE) {
        append("-2147483648");
        return this;
    }
    int appendedLength = (i < 0) ? Integer.stringSize(-i) + 1
                                 : Integer.stringSize(i);
    int spaceNeeded = count + appendedLength;
    ensureCapacityInternal(spaceNeeded);
    Integer.getChars(i, spaceNeeded, value);
    count = spaceNeeded;
    return this;
} 
```

它将数字海峡转换为 StringBuilder 避免了首先创建 String 的需要。

> 在我的具体示例中，是否有任何不能自动 toString 的 int 值？

不，所有原始值都可以是 toString'ed。

我知道的唯一例外是[信号和安静的 Not-A-Number](http://en.wikipedia.org/wiki/NaN)值，因为 Java 不关心这些事情。两者都显示为“NaN”，并且无法区分与 toString() （或 Java 中的大多数函数）的区别

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T17:59:05.833

```
System.out.println("The number is " + Integer.toString(k)); 
```

在上面的打印**中“数字是”**是字符串，所以**String+(anything)**只是**字符串**。所以在这种情况下根本不需要调用 toString()。所以如果你只想打印 k 值，那么也不需要调用toString() 作为`S.O.P`内部调用 toString()。

所以最后，我们可以说，除非你特别想将 Integer 转换为 String，否则你不应该调用 toString() 方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T18:31:25.230

使用第二个版本。对于字符串连接表达式，如

```
"The number is " + k; 
```

javac 使用 StringBuilder 构建实际代码

```
new StringBuilder("The number is ")).append(Integer.toString(k)).toString()); 
```

所以 System.out.println 只是打印结果字符串，完整的代码是

```
System.out.println((new StringBuilder("The number is ")).append(Integer.toString(k)).toString()); 
```

* * *

## 回答 #5

> 赞同：-6
> 
> 时间：2013-01-02T17:59:55.287

它允许数字成为字符串数据类型，所以它都是字符串。正如 Mob 所说，它甚至不是一个整数。您必须先将其解析为整数，然后才能变为整数。

# json - xpages：使用 fromJson 后数组原型函数不起作用

> ID：14126793
> 
> 赞同：0
> 
> 时间：2013-01-02T17:55:27.810
> 
> 标签：json, xpages

在 xpages（注释 8.5.3）中，我使用内置的服务器端 javascript 函数**toJson**将 javascript 对象保存为 json。但是，当我使用**fromJson**从字符串中获取对象时，我不能再将我的个人原型函数用于结果对象中包含的数组。

举个例子：

```
var obj0={x:[1,2,3,"x","y","z"]};
var s=toJson(obj0);
var obj1=fromJson(s);

var x0=obj0.x.copy(); // WORKS FINE
var x1=obj1.x.copy(); // ERROR RAISED 
```

引发的错误是：

> [TypeError] 在“Array [JavaScript Object]”类型的对象上调用方法“copy()”时出错

函数 copy() 是 Array 的一个简单原型函数，并且工作正常：

```
if(!Array.prototype.copy) {
    Array.prototype.copy=function() { return this.slice(0); }
} 
```

上面的数组 x1 是 instanceof Array 并支持所有内置的 Array 函数，如 slice、join 等。然而，使用原型函数不起作用。

有人知道我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T07:46:58.107

问题是否与 Tommy 描述的问题有关 [http://dontpanic82.blogspot.se/2010/10/xpages-bug-in-fromjson-with-fix.html](http://dontpanic82.blogspot.se/2010/10/xpages-bug-in-fromjson-with-fix.html) Paul Hannan 写了一条评论说他记录了一个错误报告它，但我不知道它是否在 8.5.3 中修复

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T07:40:46.203

使用fromJson创建对象的问题是，创建的对象中只有对象数据，而没有添加其方法。因此，必须手动添加所有方法，或者克隆新对象。以下链接提供了克隆 javascript 对象所需的解释和代码：

[1\. 用 Ja​​vaScript 克隆任何东西](http://davidwalsh.name/javascript-clone)

[2\. 在 Javascript 中复制对象](https://stackoverflow.com/questions/728360/copying-an-object-in-javascript)

# jquery - 切换快速问题

> ID：14126796
> 
> 赞同：0
> 
> 时间：2013-01-02T17:55:37.297
> 
> 标签：jquery, toggle

我有一个很好用的切换功能，除非你尝试点击太快，每个单独的切换内容更新不够快。

我尝试跟踪可点击状态并尝试取消绑定点击，但由于切换不是事件处理程序，因此无法将其绑定回来。

Javascript：

```
 $('#toggleImages').toggle(function() {
                    $('#ip').fadeOut(200, function () {
                        $('#en').fadeIn(200, function() {
                            $('#swap').attr("src", "t1.png");
                        });
                    });
                }, function () {
                    $('#en').fadeOut(200, function () {
                        $('#ip').fadeIn(200, function() {
                            $('#swap').attr("src", "t2.png");
                        });
                    });
                }); 
```

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T17:57:08.077

试试这个，使用`.stop()`：

```
$('#toggleImages').toggle(function() {
                    $('#ip').stop().fadeOut(200, function () {
                        $('#en').stop().fadeIn(200, function() {
                            $('#swap').attr("src", "t1.png");
                        });
                    });
                }, function () {
                    $('#en').stop().fadeOut(200, function () {
                        $('#ip').stop().fadeIn(200, function() {
                            $('#swap').attr("src", "t2.png");
                        });
                    });
                }); 
```

# c# - 更改另一个线程中使用的实例变量

> ID：14126798
> 
> 赞同：0
> 
> 时间：2013-01-02T17:55:55.813
> 
> 标签：c#, multithreading, azure, azure-web-roles

我有一个使用 .NET for Windows Azure 的 WebService。在那里我有一个单例类，它有一个在 while(true) 循环中做某事的方法。此方法使用单例中的实例变量。我在一个新线程中启动无限循环。当我更改实例变量的值（使用我的 web 服务）时，该值会更改。但是在无限循环的线程中，使用的是旧值。代码如下所示：

单例类

```
public class Singleton
{
    static Singleton _instance;

    public static Singleton Instance
    {
        get { return _instance ?? (_instance = new Singleton()); }
    }

    private Singleton() {
        this.Intervall = -20;
    }

    public int Intervall { get; set; }

    public void run()
    {
        Thread thread = new Thread(privateRun);
        thread.Start();
    }

    private void privateRun()
    {
        while (true)
        {
            // do something with Intervall Value
            Trace.WriteLine(this.Intervall);

        }
    }
} 
```

在 WebRole onstart() 中启动 run 方法；

```
public override bool OnStart()
    {
        // start the singleton method
        Singleton singleton= Singleton.Instance;
        singleton.run();

        return base.OnStart();
    } 
```

并从 WebService 更改值

```
public string setIntervall(int Intervall)
    {
        Singleton.Instance.Intervall = Intervall;
        return "New Intervall: " + Singleton.Instance.Intervall;
    } 
```

WebService 真正返回了新的 Intervall。但在 while 循环中使用旧值。那么如何更改创建线程中的值呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T18:04:47.757

问题是，默认情况下，编译器/运行时会进行很多涉及缓存值的优化。这在线程环境中成为一个问题，因为每个线程都有自己的缓存，因此即使他们认为它们是，它们也不会改变相同的变量。

有几个解决方案。

首先是使用`volatile`：

```
private volatile int _interval;
public int Interval
{
    get
    {
        return _interval;
    }
    set
    {
        _interval = value;
    }
} 
```

`volatile`是一种说法，“这可以从多个线程访问，确保在修改时缓存是同步的。

另一种是在访问变量时引入内存屏障。该`lock`语句隐含地执行此操作，但是由于该特定程序的全部要点似乎是无锁编程，因此这不是可取的；volatile 更适合您的特定需求。

# openerp - OpenERP 平方英尺 UOM

> ID：14126804
> 
> 赞同：3
> 
> 时间：2013-01-02T17:56:17.707
> 
> 标签：openerp

假设我是瓷砖经销商，我有一块 1' x 3' 的瓷砖（单一产品）。这个图块不能进一步分割（对于 OpenERP / 在这个级别），因为我们只发送图块。

但是，我们希望销售人员以平方英尺为单位输入所需的数量，例如覆盖一个房间。如果客户进入 3 平方英尺，我们将向他们运送 1 块、5 平方英尺、2 块、9 平方英尺、3 块、10 块、4 块瓷砖。

我的问题是在 OpenERP 中呈现这些数据的最佳方式是什么？

似乎创建一个新的“平方英尺”计量单位类别会起作用，但我无法将其转换回 PCE。我可以在同一 UoM 类别中定义第二个 PCE，但随后我有两个 PCE（一个用于“正常”产品，一个用于瓷砖，两者永远不会相遇）。此外，这是不可扩展的：如果我还销售 1 英寸乘 4 英寸的瓷砖，我需要另一个计量单位类别和转换系数（每个瓷砖尺寸一个类别/系数）

我有一个自定义的订购界面（我们实际上并没有为此使用 OpenERP 的前端），并且可以在那里进行适当的转换。然而，这会导致数据不匹配——在 OpenERP 中，我们产品的计量单位（以及购买计量单位，因为我们转售）以 PCE 表示，但我们需要一个“销售计量单位”和相关转换因子的新概念。

问题是，最后一种方法（OpenERP 中的所有内容都保留在 PCE 中，OpenERP 对销售订单计量单位一无所知）是解决此问题的推荐方式吗？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T21:15:04.113

你可以通过两种方式做到这一点：

1.  设置产品中的uos_coeff字段，设置uos_id != uom_id。

    您可以为同一产品的销售和采购定义两个不同的计量单位，并定义系数进行转换。

2.  用两种不同的计量单位定义两种不同的产品，并用它们之间的关系定义一个 BOM，因此当您销售一种产品时，另一种产品也会消耗。

# javascript - 将 jqGrid 表单编辑文本区域更改为具有字符计数器

> ID：14126805
> 
> 赞同：0
> 
> 时间：2013-01-02T17:56:17.487
> 
> 标签：javascript, jquery, jqgrid

我正在尝试找到一种很好的“jqGrid 友好”方式来更改表单编辑中的文本区域，以包括一个字符计数器，让用户知道他们可以输入多少。

此示例说明如何使用字符计数器定义文本区域。 [推特上的字符倒计时](https://stackoverflow.com/questions/2136647/character-countdown-like-on-twitter)

我想弄清楚的是修改表单编辑以包含此内容的最佳方法。具体来说，我需要插入 span 元素，以便我可以在编辑表单中的文本区域列之后设置剩余的字符文本。

据我所知，jqGrid API 似乎允许在表单中手动插入新行：

```
jQuery("#grid_id").jqGrid('editGridRow', "new", properties ); 
```

我不清楚的是控制在何处添加该元素的最佳方法。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T19:24:08.823

您使用 javascript 的 keyup 来创建函数。然后，您使用 jQuery 破解表单的 id 和类。

功能

```
function updateCounter() {
  var pVal = document.getElementById(your_id).value
  var pCount = pVal.length;
  document.getElementById("counter").firstChild.data = pCount;
} 
```

使用其 id 定位输入以添加属性

```
$("#"+your_id ).attr("onkeyup","updateCounter()"); 
```

通过定位输入的 td 容器来附加跨度

```
$("#tr_" + your_id + ".CaptionTD .DataTD").append("<span id='counter'></span>"); 
```

# xml - 我想使用 xslt 将我的 xml 中的一些节点替换为 >

> ID：14126812
> 
> 赞同：0
> 
> 时间：2013-01-02T17:57:09.433
> 
> 标签：xml, xpath, xslt-1.0

我需要输出一个soap xml请求，其中一些节点 `<`应该替换为以及`&lt;`如何 使用xslt执行此操作，我的输出应该如下所示`>``&gt;`

```
<env:Envelope xmlns:env="http://schemas.xmlsoap.org/soap/envelope/"     xmlns:xsd="http://www.w3.org/2001/XMLSchema">
<env:Body><Create xmlns="http://jerseytelecom.com/">
<requestXml>
&lt;ISD_XMLGateway&gt;
&lt;Entity&gt;HLR_ALC&lt;/Entity&gt;
&lt;Origin&gt;Comverse One&lt;/Origin&gt;
&lt;Log_Level&gt;0&lt;/Log_Level&gt;
&lt;Params&gt;&lt;Param Name=&quot;HLR_System&quot; Value=&quot;JT&quot;/&gt;
&lt;Param Name=&quot;HLR_ALC_Command&quot; Value=&quot;Send_HLR_Command&quot;/&gt;
&lt;Param Name=&quot;HLR_Command&quot; Value=&quot;CRESBX:MSIN=112210231,MODEL=MODEL001,SNBSV=7797242727-TEL;&quot;/&gt;
&lt;/Params&gt;
&lt;/ISD_XMLGateway&gt;
</requestXml></Create></env:Body></env:Envelope> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T18:21:37.547

好吧，XSLT 永远不会在您的 XML 标记中看到“<”和“>”字符，因为它不适用于词法 XML，它适用于 XML 的树表示。所以你错误地提出了这个问题。您实际想要做的是将树序列化为词法 XML，然后将该词法 XML 作为字符串插入到结果树中（随后，序列化程序将该词法 XML 中的“<”和“>”字符转换为“& lt;”和“>”）。

在 XSLT 2.0 中没有内置的 serialize() 函数来执行此操作，但最近的 Saxon 版本（仅限商业版）支持 XSLT 3.0 的 serialize() 函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T19:08:01.057

我相信这应该适用于在 XSLT 1.0 中转义 XML：

```
 <xsl:template match="*" mode="escape">
    <xsl:variable name="currentNode" select="." />
    <xsl:value-of select="concat('&lt;', name(.))"/>
    <xsl:apply-templates select="@*" mode="escape"/>
    <xsl:for-each select="namespace::*[name() != 'xml'][not(. = $currentNode/../namespace::*)]">
      <xsl:call-template name="EscapeNamespace">
        <xsl:with-param name="namespace" select="." />
      </xsl:call-template>
    </xsl:for-each>
    <xsl:value-of select="'&gt;'"/>
    <xsl:apply-templates select="node()" mode="escape" />
    <xsl:value-of select="concat('&lt;/', local-name(.), '&gt;')"/>
  </xsl:template>

  <xsl:template match="@*" mode="escape">
    <xsl:value-of select="concat(' ', name(.), '=&quot;')"/>
    <xsl:call-template name="EscapeText">
      <xsl:with-param name="text" select="." />
    </xsl:call-template>
    <xsl:value-of select="'&quot;'"/>
  </xsl:template>

  <xsl:template match="text()" mode="escape">
    <xsl:call-template name="EscapeText">
      <xsl:with-param name="text" select="." />
    </xsl:call-template>
  </xsl:template>

  <xsl:template name="EscapeNamespace">
    <xsl:param name="namespace" />

    <xsl:variable name="prefix">
      <xsl:choose>
        <xsl:when test="name($namespace) = ''">
          <xsl:value-of select="'xmlns'"/>
        </xsl:when>
        <xsl:otherwise>
          <xsl:value-of select="concat('xmlns:',name($namespace))" />
        </xsl:otherwise>
      </xsl:choose>
    </xsl:variable>

    <xsl:value-of select="concat(' ', $prefix, '=&quot;')"/>
    <xsl:call-template name="EscapeText">
      <xsl:with-param name="text" select="$namespace" />
    </xsl:call-template>
    <xsl:value-of select="'&quot;'"/>
  </xsl:template>

  <xsl:variable name="EntitiesRaw">
    <entity value="&quot;" escaped="&amp;quot;" />
    <entity value="&amp;" escaped="&amp;amp;" />
    <entity value="&lt;" escaped="&amp;lt;" />
    <entity value="&gt;" escaped="&amp;gt;" />
    <entity value="&apos;" escaped="&amp;apos;" />
  </xsl:variable>
  <xsl:variable name="Entities" select="msxsl:node-set($EntitiesRaw)" />

  <xsl:template name="EscapeText">
    <xsl:param name="text" />

    <xsl:variable name="foundEntity" select="$Entities/entity[contains($text, @value)]" />
    <xsl:choose>
      <xsl:when test="$foundEntity">
        <xsl:call-template name="EscapeText">
          <xsl:with-param name="text" select="substring-before($text, $foundEntity/@value)" />
        </xsl:call-template>
        <xsl:value-of select="$foundEntity/@escaped" />
        <xsl:call-template name="EscapeText">
          <xsl:with-param name="text" select="substring-after($text, $foundEntity/@value)" />
        </xsl:call-template>
      </xsl:when>
      <xsl:otherwise>
        <xsl:value-of select="$text"/>
      </xsl:otherwise>
    </xsl:choose>

  </xsl:template> 
```

您只需在变量中构建要转义的 XML，然后通过模板运行它：

```
 <xsl:template match="something">
    <requestXml>
    <xsl:variable name="requestXml">
      <ISD_XMLGateway>
        <Entity><xsl:value-of select="2 + 5" /></Entity>
        <Origin>5 &lt; 6 and 7 > 2</Origin>
        <xsl:apply-templates select="otherStuff" />
        <ElementWithAttributes a="10" b="12" />
      </ISD_XMLGateway>
    </xsl:variable>

    <xsl:apply-templates select="msxsl:node-set($requestXml)" mode="escape" />
    </requestXml>
  </xsl:template> 
```

上面在两个地方使用了 msxsl:node-set()，但我相信大多数非 MS XSL 引擎都有该功能的等价物。

# delphi-xe - Datasnap 查询客户端

> ID：14126813
> 
> 赞同：1
> 
> 时间：2013-01-02T17:57:10.593
> 
> 标签：delphi-xe, datasnap

我不明白如何使用参数，找到一个合适的使用参数的例子有点困难。我确实设法使用它完成工作的客户端数据集过滤器，但我相信它也可以用 sql 完成。datasnap 不允许这样的查询，我在我的研究中读到我必须使用参数。我只是不明白。我需要一个适当的示例，其中使用 datasnap 设置服务器/客户端，并且可以从类似于 sql 的客户端查询：`SELECT * FROM tbl_person WHERE person = 20`

这将为我提供 dbgrid 中所有 20 岁的人。就像我说的那样，我已经设法使用过滤器来做到这一点，但过滤器不是 100% 正确的，一两个奇怪的记录使它出现。

您的帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T18:52:22.150

有很多方法可以使用 ClientDataset 和参数。试试这个。

服务器端：

1.  在 ServerClass 上放置一个 TSqlQuery 并在其中输入 Sql 语句：

    `SELECT * FROM tbl_person WHERE person = :person`

    将参数属性设置为正确的参数类型和数据类型。

2.  放置一个 TDatasetProvider 并连接到 TSQLQuery

3.  运行服务器。

客户端：

1.  放置一个 TDSProviderConnection 并连接到服务器并分配 ServerClass
2.  将 TClientDataset 连接到 TDSProviderConnection 并选择 TDatasetProvider 名称。
3.  右键 TClientDataset 并选择 FetchParams

现在您可以为该参数分配任何值，让 Datasnap 框架完成其余的工作。

检查这些来源以获取更多信息：

*   文章：[http ://edn.embarcadero.com/article/41189](http://edn.embarcadero.com/article/41189)
*   演示：[http ://cc.embarcadero.com/item/28188](http://cc.embarcadero.com/item/28188)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T13:53:49.580

**设置 SQL 命令：**

```
qry.SQL.Text := 'SELECT * FROM tbl_person WHERE age = :age'; 
```

将参数类型定义为 Integer

**设置参数值：**

```
qry.ParamByName('age').AsInteger := 20; 
```

**打开查询：**

```
qry.Open; 
```

# iphone - 应用程序图标出现在应用程序模拟器上，但不在设备上

> ID：14126817
> 
> 赞同：4
> 
> 时间：2013-01-02T17:57:20.337
> 
> 标签：iphone, ios, ios6, icons

我的项目中有六个 Icon.png - Icon-Small@2x.png 文件，它们在我的 plist 中以相同的方式列出，就像我读过的一样。当我在模拟器中运行我的应用程序时，我的图标会出现，但在我的设备上运行它时不会出现。

我正在使用 xcode 4.5.2 并在我的 iPhone 4s 上运行这些应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-08-07T16:11:46.833

@Fernando Mazzon 的远射帮助了我。在我的情况下，我已将 jpeg 重命名为 png 并出现此问题。在我选择将 jpeg 导出为 png 后（这次确定是 png），它工作得很好:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T18:08:30.327

尝试从您的设备中删除该应用程序并从 XCode 重新运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T18:40:40.170

iOS 模拟器区分大小写，而实际的 iOS 设备则不区分大小写。检查您的实际文件名与您在`Info.plist`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-02T19:09:14.553

清理、分辨率修饰符、区分大小写和：这是一个很长的镜头，但是重命名为 PNG 的 PSD 由模拟器静默获取，而设备可以理解地不接受它们。这非常烦人且难以跟踪。如果其他一切都失败了，请检查您是否将 PSD 隐藏为图标。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-09T05:05:19.460

我有同样的问题。Icon.png 文件不是 57 x 57 像素。图标在模拟器中加载，但在 iPhone 上没有。

在我将图标文件调整为 57x57（以及 Icon@2x.png 文件为 114x114）后，我的应用程序图标出现在设备上。

# performance - 迭代器连接性能

> ID：14126819
> 
> 赞同：9
> 
> 时间：2013-01-02T17:57:34.940
> 
> 标签：performance, algorithm, scala, iterator

下面是`Iterator`'s`++`方法的代码：

```
/** Concatenates this iterator with another.
       *
       *  @param   that   the other iterator
       *  @return  a new iterator that first yields the values produced by this
       *  iterator followed by the values produced by iterator `that`.
       *  @note    Reuse: $consumesTwoAndProducesOneIterator
       *  @usecase def ++(that: => Iterator[A]): Iterator[A]
       */
      def ++[B >: A](that: => GenTraversableOnce[B]): Iterator[B] = new Iterator[B] {
        // optimize a little bit to prevent n log n behavior.
        private var cur : Iterator[B] = self
        // since that is by-name, make sure it's only referenced once -
        // if "val it = that" is inside the block, then hasNext on an empty
        // iterator will continually reevaluate it.  (ticket #3269)
        lazy val it = that.toIterator
        // the eq check is to avoid an infinite loop on "x ++ x"
        def hasNext = cur.hasNext || ((cur eq self) && {
          it.hasNext && {
            cur = it
            true
          }
        })
        def next() = { hasNext; cur.next() }
      } 
```

在评论中，它说：`// optimize a little bit to prevent n log n behavior.`。

连接两个迭代器何时以及如何导致 n log n ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T09:42:40.170

根据大众的需求，我引用上面的@Paolo Falabella 评论来回答我自己的问题：

> 它在“Scala 编程第二版”中提到。log n 是由于必须在迭代的每个步骤中决定下一个元素来自第一个迭代器还是第二个迭代器而引入的额外间接性。

# iphone - Xcode 4：Storyboard 缺少文件所有者？

> ID：14126825
> 
> 赞同：2
> 
> 时间：2013-01-02T17:57:54.397
> 
> 标签：iphone, ios, xcode, storyboard, uiapplicationdelegate

我在 Xcode 4.5 下开始了一个新项目。我接受了默认的向导设置，其中包括一个故事板。

我去建立联系，但文件的所有者不见了。

我不确定我做了什么最终得到这个配置。至于 UI 组件，我添加了一个滚动视图来代替原始视图。我在垂直约束方面遇到了一些麻烦，但我没有做任何激烈的事情。

我试图谷歌解决这个问题，但只得到了两个结果：[http://www.google.com/#q=xcode+4+%22missing+file+owner+%22](http://www.google.com/#q=xcode+4+%22missing+file+owner+%22)。

![Xcode 4 和缺失文件的所有者](../Images/949c0f88b289a5bf61d501326d29b614.png)

如何将文件的所有者添加到情节提要中。

**更新**：对于发现这篇 Stack Overflow 文章的其他人，是时候再次执行 Apple App 的 101：[创建您的第一个 iOS 应用程序](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iPhone101/Articles/00_Introduction.html)。看起来 Hillegass 和 LeMarche 还没有赶上 6.0 SDK。截至 2013 年 1 月，亚马逊上没有图书。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-02T18:04:44.217

`File's Owner`故事板中没有任何内容。文件所有者的工作应该由`View Controller`您完成。如果您必须连接`IBOutlet`s 和`IBAction`s，请以与in`View Controller`相同的方式连接它们`File Owner``xib`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-02T18:02:27.863

我假设您习惯于 nib 文件。在这里，您只需`ViewController`在屏幕右侧选择并将其设置为您自己的自定义类。关于约束，可以通过取消选中`Use Autolayout`第一个选项卡中的选项来禁用它们。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-09-25T16:41:54.853

我想在 xcode 5 中添加一个小问题（不要认为它在早期版本中）。基本上，文件的所有者在身份检查器中称为“自定义类”。这个可以隐藏！这可能会使某人感到困惑。我认为我在 v4 中没有注意到这一点。

![在此处输入图像描述](../Images/e51723156029ed1e84a31616500dacf2.png)

![在此处输入图像描述](../Images/613d569ec4b21fc43ca90b9d4d149f3c.png)

# mysql - MySQL：从伪视图表更新主表

> ID：14126827
> 
> 赞同：0
> 
> 时间：2013-01-02T17:58:07.793
> 
> 标签：mysql, sql, view

我有一个主表，比如说`tbl`，它有三列。`col1`假设我创建了一个表，该表仅显示关于和的组合唯一的第一条记录`col2`。此类表的 SQL 定义如下：

```
CREATE TABLE pseudo_view AS SELECT col1, col2, col3 FROM tbl GROUP BY col1 col2 
```

现在我在这个新表中看到了`col1`和的所有独特组合。`col2`我更新此表，`col3`以便更改给定记录。`tbl`我希望通过影响所有重复记录将其应用回主表。

我知道这在标准视图中是不可能的。但是，有没有办法创建一个依赖表，当它更新时，主表将按照选择机制的定义进行更新？我想要一个解决方案，这样这个伪视图表可以自由地更新和删除它的记录，同时也影响父表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T18:36:37.397

它可以与 pseudo_view 和 tbl 上的一些触发器一起使用

对于 tbl 上的插入、更新和删除，“视图”需要相应地更新。通常这很容易。唯一困难的部分是当您删除最后一对 col1 和 col2 时。

对于 pseudo_table 上的更新和删除，您需要定义 master 上应该更改的内容。

在我的示例中，我选择将 min(3) 作为函数，因此当更新一行时，同一行（曾经具有最小 col3 的行）被更新，并且为 psuedotable 提供了一个新的（可能相同的）值是计算出来的。

当删除一行时， tbl 中的所有行都需要删除，否则它们也会在伪中给出一行（并且刚刚被删除）。

```
CREATE TABLE tbl (col1 INT, col2 INT, col3 INT);
INSERT INTO tbl VALUES (1, 1, 1), (1, 1, 2), (2, 2, 3), (2, 2, 4);

CREATE TABLE pseudo_view
  AS
    SELECT
      col1,
      col2,
      MIN(col3) AS col3
    FROM tbl
    GROUP BY col1, col2;

DELIMITER //

-- update the row that originally was the min() and make sure that the new row in pseudo is the new min()
CREATE TRIGGER upd_pseudo
BEFORE UPDATE ON
  pseudo_view FOR EACH ROW
  BEGIN
    UPDATE tbl
    SET col3 = NEW.col3
    WHERE col1 = OLD.col1
          AND col2 = OLD.col2
          AND col3 = OLD.col3;

    SET NEW.col3 := (SELECT
                       MIN(col3)
                     FROM tbl
                     WHERE col1 = OLD.col1
                           AND col2 = OLD.col2);

  END //

-- delete all rows in tbl that has this col1 and col2
CREATE TRIGGER del_pseudo
AFTER DELETE ON
  pseudo_view FOR EACH ROW
  BEGIN
    DELETE FROM tbl
    WHERE col1 = OLD.col1 AND col2 = OLD.col2;
  END //

-- update pseudo to make sure it's still true
CREATE TRIGGER upd_tbl
AFTER UPDATE ON
  tbl FOR EACH ROW
  BEGIN
    UPDATE pseudo_view
    SET col3 = (SELECT
                  min(col3)
                FROM tbl
                WHERE col1 = NEW.col1 AND col2 = NEW.col2)
    WHERE col1 = NEW.col1 AND col2 = NEW.col2;
  END//

-- update pseudo to make sure it's still true
CREATE TRIGGER ins_tbl
AFTER INSERT ON
  tbl FOR EACH ROW
  BEGIN
    REPLACE pseudo_view
      VALUES (NEW.col1, NEW.col2, (SELECT
                                     min(col3)
                                   FROM tbl
                                   WHERE col1 = NEW.col1 AND col2 = NEW.col2));
  END//

-- update pseudo to make sure it's still true
CREATE TRIGGER del_tbl
AFTER DELETE ON
  tbl FOR EACH ROW
  BEGIN
    -- todo: add special case when the delete row was the last of that col1/col2-pair
    REPLACE pseudo_view
      VALUES (NEW.col1, NEW.col2, (SELECT
                                     min(col3)
                                   FROM tbl
                                   WHERE col1 = NEW.col1 AND col2 = NEW.col2));
  END// 
```

# xslt - 从其他包含文件调用相同的调用模板

> ID：14126833
> 
> 赞同：0
> 
> 时间：2013-01-02T17:58:28.373
> 
> 标签：xslt, include

我有一个 main.xsl。它调用 A.xsl 和 B.xsl，两者都使用相同的调用模板

```
<xsl:call-template name="setFormat">
  ...            
</xsl:call-template> 
```

我想使用一次“setFormat”模板而不是在 A.xsl 和 B.xsl 中复制它，但是当“setFormat”只是在一个 xsl 中时，另一个说“命名的模板 'setFormat' 不存在”

我`xsl:include`用来添加对 main.xsl 的引用

我应该怎么办？

我正在使用 MVS .Net 2005。

我正在使用 main.xsl，main.xsl 调用 A.xsl 和 B.xsl：

> ```
> <xsl:include href="./A.xsl"/>
> <xsl:include href="./B.xsl"/> 
> ```

A.xsl 和 B.xsl 都使用名为“setFormat”的调用模板调用同一模板

“setFormat”不能在任何部分。因为如果它在 A.xsl 中，B.xsl 找不到它，因为它不在它的范围内，或者如果它在 main.xsl A.xsl 中，B.xsl 找不到它。我也不想复制它添加到 A.xsl 和 B.xsl

如何通过调用模板调用“setFormat”而不重复它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T02:12:07.277

从您的问题中不清楚您的三个样式表中的哪个包含哪个。

我认为您的意思是您调用或处理您的文档的`A.xsl`每`B.xsl`一个。在这种情况下，您应该放入共享命名模板，以便在任何一种情况下都能看到它。`xsl:include` `main.xsl``A.xsl``B.xsl``main.xsl`

另一方面，如果您的意思是`main.xsl`使用`xsl:include`两次，包括两者`A.xsl`，`B.xsl`并且您在文档上调用`main.xsl`，那么只有一个代码路径，并且命名模板可以在三个文件中的任何一个中。

# mysql - 启动 Rails 内置服务器的问题

> ID：14126840
> 
> 赞同：1
> 
> 时间：2013-01-02T17:58:49.887
> 
> 标签：mysql, ruby-on-rails

当我点击命令为 Rails 服务器加注星标时，我总是收到以下消息：

```
C:/Ruby/lib/ruby/gems/1.9.1/gems/mysql2-0.3.11-x86-mingw32/lib/mysql2/mysql2.rb:
2:in `require': 193: %1 is not a valid Win32 application.   - C:/Ruby/lib/ruby/g
ems/1.9.1/gems/mysql2-0.3.11-x86-mingw32/lib/mysql2/1.9/mysql2.so (LoadError)
        from C:/Ruby/lib/ruby/gems/1.9.1/gems/mysql2-0.3.11-x86-mingw32/lib/mysq
l2/mysql2.rb:2:in `<top (required)>'
        from C:/Ruby/lib/ruby/gems/1.9.1/gems/mysql2-0.3.11-x86-mingw32/lib/mysq
l2.rb:9:in `require'
        from C:/Ruby/lib/ruby/gems/1.9.1/gems/mysql2-0.3.11-x86-mingw32/lib/mysq
l2.rb:9:in `<top (required)>'
        from C:/Ruby/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/runtime.
rb:68:in `require'
        from C:/Ruby/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/runtime.
rb:68:in `block (2 levels) in require'
        from C:/Ruby/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/runtime.
rb:66:in `each'
        from C:/Ruby/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/runtime.
rb:66:in `block in require'
        from C:/Ruby/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/runtime.
rb:55:in `each'
        from C:/Ruby/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/runtime.
rb:55:in `require'
        from C:/Ruby/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler.rb:128:i
n `require'
        from D:/Ruby/Rails/simple_cms/config/application.rb:7:in `<top (required
)>'
        from C:/Ruby/lib/ruby/gems/1.9.1/gems/railties-3.2.9/lib/rails/commands.
rb:53:in `require'
        from C:/Ruby/lib/ruby/gems/1.9.1/gems/railties-3.2.9/lib/rails/commands.
rb:53:in `block in <top (required)>'
        from C:/Ruby/lib/ruby/gems/1.9.1/gems/railties-3.2.9/lib/rails/commands.
rb:50:in `tap'
        from C:/Ruby/lib/ruby/gems/1.9.1/gems/railties-3.2.9/lib/rails/commands.
rb:50:in `<top (required)>'
        from script/rails:6:in `require'
        from script/rails:6:in `<main>' 
```

我正在使用 mysql2 gem，并且正在尝试使用 WampServer 中的 mysql。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T22:04:32.493

我猜你正在寻找以下内容：

[红宝石mysql2错误](https://stackoverflow.com/questions/9936523/ruby-mysql2-error)

安装 gem 后，执行以下操作：

安装 mysql2 gem，路径指向您安装 MySQL 连接器库和包含的位置。

注意：确保您确实有单引号 (')，如下所示：

gem install mysql2 -- '--with-mysql-lib="C:...\MySQL 连接器 C 6.0.2\lib\opt" --with-mysql-include="C:...\MySQL 连接器 C 6.0.2\包括"'

# c# - MVC 路由静态文件

> ID：14126842
> 
> 赞同：5
> 
> 时间：2013-01-02T17:58:57.407
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, maproute

我正在使用一个遗留 swf 文件，该文件正在控制器/动作路由中查找静态路由。例如，它正在尝试下载文件

```
http://localhost:59801/Resource/Details/ClearExternalPlaySeekMute.swf 
```

当文件存在于根目录时：

```
http://localhost:59801/ClearExternalPlaySeekMute.swf 
```

我可以使用`MapRoute`将此 URL 映射到根目录吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T18:06:42.567

您可以[`url rewrite`](http://www.iis.net/downloads/microsoft/url-rewrite)在 IIS 中使用该模块。安装后，只需添加以下重写规则：

```
<system.webServer>
    <rewrite>
      <rules>
        <rule name="Rewrite Static Flash file" stopProcessing="true">
          <match url="^Resource/Details/ClearExternalPlaySeekMute.swf$" />
          <action type="Rewrite" url="ClearExternalPlaySeekMute.swf" />
        </rule>
      </rules>
    </rewrite>
</system.webServer> 
```

现在，当向它发出请求时，`/Resource/Details/ClearExternalPlaySeekMute.swf`它将由`/ClearExternalPlaySeekMute.swf`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T18:04:08.000

这应该对你有用，但我认为通过 IIS 会更好。

`routes.IgnoreRoute("{file}.swf");`

我记得一个非常好的SO帖子。如果我找到它，我一定会参考。

基本上是同一个问题...[使用 ASP.NET 路由来提供静态文件](https://stackoverflow.com/questions/1149750/using-asp-net-routing-to-serve-static-files)

# kendo-ui - 将 qTip 绑定到 Kendo 小部件

> ID：14126851
> 
> 赞同：0
> 
> 时间：2013-01-02T17:59:53.680
> 
> 标签：kendo-ui, qtip, qtip2

我有这个：

```
<input id="numeric" title="Numeric Tooltip" type="number" min="0" max="100" /> 
```

我正在尝试执行以下操作：

```
$("#numeric").kendoNumericTextBox(); 
```

然后

```
$('#numeric').qtip({
    content: {
        text: $(this).prop("title")
    }
}); 
```

如何将这 2 个项目绑定到同一个元素？

[http://jsfiddle.net/uZUjK/167/](http://jsfiddle.net/uZUjK/167/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T00:25:10.877

首先，您需要添加脚本和样式。

然后将 qtip 应用于数字文本框的**包装**元素 - 因为输入元素本身始终不可见，并且工具提示也将不可见。我更新了你的小提琴来满足这些要求

```
var kendoNum = $("#numeric").kendoNumericTextBox().data('kendoNumericTextBox');
kendoNum.wrapper.qtip({
    content: {
        text: kendoNum.element.prop("title")
    }
}); 
```

[这](http://jsfiddle.net/uZUjK/170/)是您提供的链接的更新版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T00:52:22.270

KendoUI 中的输入字段用其他 HTML 元素装饰，以使它们在浏览器之间兼容。您的原件`input`被另一个`input`没有`numeric`id 的人隐藏。

采用：

```
$('#numeric').closest(".k-input-wrapper").qtip({
    content: {
        text: $(this).prop("title")
    }
}); 
```

反而。

**注意**：不要忘记包含`qtip` [script](http://cdn.jsdelivr.net/qtip2/2.0.0/basic/jquery.qtip.min.js)和[style](http://cdn.jsdelivr.net/qtip2/2.0.0/basic/jquery.qtip.min.css)。

# apache - Mono 是否能够在 mod_mono 中托管 ASP.NET MVC WebAPI？

> ID：14126855
> 
> 赞同：5
> 
> 时间：2013-01-02T18:00:38.903
> 
> 标签：apache, mono, apache2, asp.net-web-api

就像标题所说的那样 - 我试图按照以下方式进行：

[http://www.integratedwebsystems.com/2011/12/get-started-with-amazon-ec2-run-your-net-mvc3-razor-site-in-the-cloud-with-linux-mono-2/](http://www.integratedwebsystems.com/2011/12/get-started-with-amazon-ec2-run-your-net-mvc3-razor-site-in-the-cloud-with-linux-mono-2/)

虽然我可以得到一个非常简单的 ASP MVC 4 站点 - 任何涉及 WebAPI 项目的东西都会在我的 apache 日志中给我 500 和非常神秘的错误：

```
System.NullReferenceException: Object reference not set to an instance of an object
  at System.Web.Util.HttpEncoder.GetCustomEncoderFromConfig () [0x00000] in <filename unknown>:0 
  at System.Lazy`1[System.Web.Util.HttpEncoder].InitValue () [0x00000] in <filename unknown>:0 
```

我猜不是，但想知道我是否做错了什么！

干杯。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-03T03:04:32.943

从 Mono 3.0.2 开始，尚不支持 ASP.NET WebAPI。WebAPI 使用[HttpRequest.GetBufferlessInputStream()](http://msdn.microsoft.com/en-us/library/ff406798.aspx)来获取 HTTP 请求数据，但这在 Mono 中尚未实现。如果您克服了上述错误（可能是由于 Web.config 中的配置不正确），您将遇到类似于此错误的错误：

程序集 /opt/mono-3.0.0/lib/mono/gac/System.Web/4.0.0.0__b03f5f7f11d50a3a/System.Web.dll 中缺少方法 System.Web.HttpRequest::GetBufferlessInputStream()，在程序集 /tmp/ 中引用www-data-temp-aspnet-0/2956977a/assembly/shadow/5cf10065/cf4140da_93b040bf_00000001/System.Web.Http.WebHost.dll

有关错误报告，请参阅[https://bugzilla.xamarin.com/show_bug.cgi?id=8008](https://bugzilla.xamarin.com/show_bug.cgi?id=8008)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-19T21:59:49.743

> ServiceStack 不再开源

你可以看看[ServiceStack](http://www.servicestack.net/)。它是 WebApi 的一个得到很好支持的替代方案，它也可以在 Mono 上运行。它非常快速、可扩展且功能强大；它的文档可以在[这里](https://github.com/ServiceStack/ServiceStack/wiki)和[这里](https://github.com/ServiceStack/ServiceStack)找到。

# javascript - 将距离矩阵结果放入现有数组

> ID：14126859
> 
> 赞同：0
> 
> 时间：2013-01-02T18:00:47.870
> 
> 标签：javascript, google-maps

我试图简单地获取一组位置与用户的距离。这些位置是在代码前面的数据库中调用的。“places”数组中有 3 个条目，每个条目都包含一些信息和一个“距离”和“持续时间”字段，它们都设置为 0 作为占位符。我正在尝试遍历 DistanceMatrix "distance.text" 和 "duration.text" 结果并将它们添加到相应对象的 "distance" 和 "duration" 字段中，但我要么不能在回调中使用 places[i]函数，或者，如果我尝试在回调之外添加值，它会丢失返回的值。

```
 var service = new google.maps.DistanceMatrixService();//request distance matrix
    var outputdiv = document.getElementById('info');

    for (var i=1;i<places.length;i++){
        var goto = new google.maps.LatLng(places[i].lat, places[i].lng);
            service.getDistanceMatrix(
              {
                origins: [foundlatlng],
                destinations: [goto],
                travelMode: google.maps.TravelMode.WALKING,
                unitSystem: google.maps.UnitSystem.IMPERIAL,
                avoidHighways: false,
                avoidTolls: false,
              }, callback);//end service.getdistancematrix()

                function callback(response, status) {
                var distancefield = distancefield;
                  if (status == google.maps.DistanceMatrixStatus.OK) {
                    var origins = response.originAddresses;
                    var destinations = response.destinationAddresses;
                    var results = response.rows[0].elements;

                      for (var r = 0; r < results.length; r++) {
                        var element = results[r];
                        var distancetext = element.distance.text;
                        var durationtext = element.duration.text;
                        var to = destinations[r];
                      }//end for r

                  }//end if status=ok
                }//end callback

    };//end for i
    console.log(places); 
```

`foundlatlng`是 GPS 找到的坐标，表示为 google.maps.LatLng。它来自代码的前面部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T18:09:10.060

距离矩阵调用是异步的，您需要更新数组并使用回调函数中的返回值。

（console.log(places) 将始终在日期返回之前运行）

我在您的问题中没有看到任何代码将返回的数据添加到您的“places”数组中，这应该在回调例程中，您现在所做的只是在本地范围内创建变量，这些变量一旦不可用回调函数退出。

看起来您也没有利用[DistanceMatrix](https://developers.google.com/maps/documentation/javascript/reference#DistanceMatrixService)服务获取多个起点和终点并在一次调用中返回它们之间的行驶距离的能力。您发布的代码使用它的方式效率低下，一次只返回一个结果（如果您要这样做，您不妨使用[DirectionsService](https://developers.google.com/maps/documentation/javascript/reference#DirectionsService)）。

[组成数据的工作示例](http://www.geocodezip.com/v3_simpleMap_distanceMatrix.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T18:26:11.540

我认为这是这样做的方法：

```
var placesIndex = 0;
calculateDistance();

function calculateDistance(response,status){

  if(response) {
    var distancefield = distancefield;
    if (status == google.maps.DistanceMatrixStatus.OK) {
      var origins = response.originAddresses;
      var place = places[placesIndex]; // use this in your calculations
      var destinations = response.destinationAddresses;
      var results = response.rows[0].elements;

      for (var r = 0; r < results.length; r++) {
        var element = results[r];
        var distancetext = element.distance.text;
        var durationtext = element.duration.text;
        var to = destinations[r];
      }//end for r
    }//end if status=ok
  }

  if(placesIndex < places.length) {
    var goto = new google.maps.LatLng(places[placesIndex].lat, places[placesIndex].lng);

    service.getDistanceMatrix(
      {
        origins: [foundlatlng],
        destinations: [goto],
        travelMode: google.maps.TravelMode.WALKING,
        unitSystem: google.maps.UnitSystem.IMPERIAL,
        avoidHighways: false,
        avoidTolls: false,
      }, calculateDistance);//end service.getdistancematrix()

    placesIndex ++;
  } 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T19:59:54.197

谢谢两位的建议！！！这是代码：

```
 var service = new google.maps.DistanceMatrixService();//request distance matrix from the Googleplex
    var outputdiv = document.getElementById('info');
    var destArray = [<?php
    $result = mysqli_query($mysqli, "SELECT * FROM places");
        foreach($result as $key => $value){echo "'" . $value['address'] . "',"; };?>];

            service.getDistanceMatrix(
              {
                origins: [foundlatlng],
                destinations: destArray,
                travelMode: google.maps.TravelMode.WALKING,
                unitSystem: google.maps.UnitSystem.IMPERIAL,
                avoidHighways: false,
                avoidTolls: false,
              }, callback);//end service.getdistancematrix()

                function callback(response, status) {
                  if (status == google.maps.DistanceMatrixStatus.OK) {
                    var origins = response.originAddresses;
                    var destinations = response.destinationAddresses;
                    console.log(response);
                    for (var i = 0; i < origins.length; i++) {
                      var results = response.rows[i].elements;
                      for (var j = 0; j < results.length; j++) {
                        var element = results[j];
                        var distance = element.distance.text;
                        var duration = element.duration.text;
                        var from = origins[i];
                        var to = destinations[j];
                        generateArray(to, destinations, distance, duration);
                      }//end for j
                    }//end for i
                  }//end if
                }//end callback

                **var theindex = 1;
                function generateArray(origin, destin, dis, dur){
                    places[theindex].distance = dis;
                    places[theindex].duration = dur;
                    theindex++;

            }//end generateTable**
            console.log(places); 
```

# c - 应用程序如何在 Windows 上为“ANSI”功能设置其代码页？可能吗？

> ID：14126868
> 
> 赞同：0
> 
> 时间：2013-01-02T18:01:15.960
> 
> 标签：c, windows, winapi, codepages

> **可能重复：**
> [如何在应用程序中更改 Windows ANSI API 的 CP_ACP(0)？](https://stackoverflow.com/questions/9033825/how-to-change-the-cp-acp0-of-windows-ansi-apis-in-an-application)

每当 Windows 程序使用“ANSI”版本的 Windows API 函数（例如`MessageBoxA`）时，都会根据当前代码页进行转换。如果系统语言未设置为日语，这可能会导致许多日语程序将其整个用户界面显示为 mojibake。

一种解决方案是在整个程序中使用 UTF-16，但是否可以通过使用 API 来更改此代码页？如何做到这一点？

理想情况下`GetACP`应该有一个`SetACP`对应物，但事实并非如此。

# python - Python csv - 匹配特定的行和列，并管道到新文件

> ID：14126871
> 
> 赞同：0
> 
> 时间：2013-01-02T18:01:30.580
> 
> 标签：python, csv

我有一个大型 csv 文件，其中包含大约 1000 个人（行）的大约 170 列数值数据（列）。我想做的是将特定情况下的特定值从 csv 文件传输到文本文件中。

更具体地说，我的 csv 文件以一列 ID 号（案例）开头，大约 170 列包含每个案例的各种数字数据点。我想遍历 csv 文件并为“CASE156”（例如）提取第 17 列（例如），并将该位置的数据保存为：

CASE156_column_17.txt

为了最初读取数据，我使用 Python csv 内置：

```
f =csv.reader(open('genotypes.csv','rbU')) 
```

我试过了

```
rownum=0
for row in f:
     if rownum=='CASE156':
         print column[16] 
```

但是，这不会产生预期的结果。如何为特定案例提取特定列的数据？

为了使事情稍微复杂一点，如果该单元格中没有数据，我想跳过它并且不生成 .txt 文件。

提前谢谢了，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T18:18:47.117

假设您要查找的密钥位于“key_index”列中，那么您可以使用：

```
f = csv.reader(open('genotypes.csv','rbU'))
key_index = 22  # assuming that this column contains something like 'CASE156'
for rownum, row in enumerate(f):
    if row[key_index] == 'CASE156':
         print row[16] 
```

阅读基本的 Python 文档表示赞赏。

您还可以[`DictReader`](http://docs.python.org/2/library/csv#csv.DictReader)通过 dict 而不是只能通过列号访问的行来使 CSV 数据更易于访问。

[http://docs.python.org/2/library/csv.html#csv.DictWriter](http://docs.python.org/2/library/csv.html#csv.DictWriter)

# regex - Nginx 使用什么正则表达式引擎？

> ID：14126872
> 
> 赞同：85
> 
> 时间：2013-01-02T18:01:31.397
> 
> 标签：regex, nginx

Nginx 使用什么正则表达式引擎？[有很多可能性。](http://www.regular-expressions.info/refflavors.html)更重要的是，它支持什么风格的语法，也就是说，我可以利用哪些语法特性？

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2013-01-02T18:05:14.747

Nginx 使用[PCRE 库](http://www.pcre.org/)。[编译时选项列表](https://www.nginx.com/resources/wiki/start/topics/tutorials/installoptions/)对此有一些说明。

# pagination - 防止 iTextSharp 在 PdfPTable 中间放置分页符？

> ID：14126874
> 
> 赞同：4
> 
> 时间：2013-01-02T18:01:40.133
> 
> 标签：pagination, itextsharp

我正在使用 iTextSharp v5.3 构建一个 PDF，其中包含一个或多个具有相同单元格但高度可能因动态内容而异的表格。目前，如果 a`PdfPTable`太大而无法放在当前页面上，则表格将被破坏，并且剩余的单元格数据最终会出现在下一页上。有没有办法告诉 iTextSharp 如果表格不适合，将**整个内容**放在下一页上？

![坏桌休息](../Images/2377925675a099425900de30df5494b2.png)

我试过弄乱`SplitRows`，`SplitLate`但它们没有达到预期的效果。在添加到文档后，我也尝试进行一些计算，`PdfPTable`但无法弄清楚如何获取页面上的“光标位置”。我是否需要在循环中跟踪当前页面的高度并自己进行所有计算？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-08-15T19:50:32.313

您还可以使用：

```
tableName.KeepTogether = true; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-03T08:44:30.340

您可以询问桌子的总高度。这样做是这样的：`table.TotalHeight`

如果高度为 0，请确保首先定义了宽度：如果 iText 不知道呈现表格的可用宽度，则 iText 无法计算宽度。

确定高度后，向作者询问垂直位置：`writer.GetVerticalPosition(true)`

您可能知道，页面底部的 Y 坐标为 0。如果垂直位置减去页面的总高度超过了页边距大小，你就知道表格放不下，你可以触发一个新的页面。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-03T10:54:57.167

Bruno Lowagie 指出了正确的解决方案 - 我想添加将表格缩小到页面的可能性，即使它太大了。看这里：[是否可以“缩小” PdfPtable？](https://stackoverflow.com/questions/12970736/is-it-possible-to-shrink-a-pdfptable)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-26T06:59:50.717

可能不是“正确”的方式，但您可以将表格包装在单单元容器表格中。一个单元格不能一分为二。

# ssrs-2008 - 为什么在设置参数“隐藏”或“内部”后出现“参数缺少值”错误？

> ID：14126877
> 
> 赞同：3
> 
> 时间：2013-01-02T18:01:45.103
> 
> 标签：ssrs-2008, reporting-services

在 SSRS 中，我正在制作一份报告，其中一个参数只是一个占位符（并且用户不会触摸它）。因此，当我将其设为 "Hidden" 或 "Internal" 时，我会收到此错误：

```
The 'ClientResponseRange' parameter is missing a value 
```

这对我来说很奇怪。它在可见时工作得很好（但在 UI 方面完全没用）

它是否与使用自动设置的参数（通过数据集）有关。? 我一直在玩内部/隐藏加上“空”选项......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T11:37:30.520

我怀疑这个参数没有被强制赋值。

此参数需要使用具有其他用户选择的参数作为输入之一的虚拟 sql 进行设置。然后在用户选择另一个之后运行虚拟 sql。

# jquery - 将事件执行延迟到“事件气泡顺序”，直到 ajax 调用完成

> ID：14126881
> 
> 赞同：0
> 
> 时间：2013-01-02T18:02:10.647
> 
> 标签：jquery, wait, sleep, jquery-events, event-bubbling

编辑：响应有关在锚元素上以编程方式执行单击事件或使用 window.open 的评论-由于弹出窗口阻止程序，我无法使用这些。我必须允许用户在锚点上的原始 mouseclick 事件完成其过程 - 导致一个畅通的新窗口。

似乎这里最好的折衷方案是执行一个同步 ajax 请求，并在请求完成之前向用户呈现一个微调器 gif。

编辑：小提琴[http://jsfiddle.net/cXdJg/35/](http://jsfiddle.net/cXdJg/35/)

考虑带有指向播放器页面的链接的网络编辑器的情况。

单击设置为播放器的 href 链接时，编辑器会检查内容是否已保存到服务器：

如果是：什么都不做。

如果不是：执行 ajax 请求以保存内容。在 ajax 调用结束时：允许锚元素上的点击事件继续；导致在新的浏览器窗口中执行对播放器页面的请求。

如何在不冻结浏览器的情况下延迟拦截锚元素上的单击事件的函数的结束，直到 ajax 调用结束？见[http://www.devcheater.com/#Conclusion](http://www.devcheater.com/#Conclusion)

我检查了[http://ajaxpatterns.org/Submission_Throttling](http://ajaxpatterns.org/Submission_Throttling)，但看不到如何在此处应用该示例。

代码形式的想法示例：

```
$('a.play').click(function){
    if(!isSaved){
          save();  //saves the content and **sets isSaved to true**
    }
     while (!isSaved){
          //burn time until isSaved,  but don't freeze the browser!
     }
     //allow the event handler to end, after which the click on anchor element will
     //  load the player page in new window.
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T04:59:02.883

我认为您发布的链接（[http://www.devcheater.com/#Conclusion](http://www.devcheater.com/#Conclusion)）指向您最大的问题：您特别想做的事情似乎不可能。但是，您可以尝试这样的事情（从 JSFiddle 重用的代码）：

这种方法不允许`click`处理程序返回`true`，其想法是您将从`success`函数中打开链接。这使用`window.open`，因此在用户允许之前可能会阻止弹出窗口。

```
$('.wait').click(function(event){
    var $element = $(this);

    $.ajax({
        type: "POST",
        url: 'some_url',
        data: '',
        cache: false,
        success: function() {
            $('.result').html("ajax call complete on "+ new Date().toTimeString());

            var href = $element.attr('href');

            if (typeof href != "undefined") {
                window.open(href);
            }                    
        }
    });

    event.preventDefault();
    return false;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T20:21:14.927

为单击和加载添加事件侦听器，并在您的代码中创建关联的事件处理程序。

```
// handles click
var handleClick = function(event){
var $element = $(this);

$.ajax({
    type: "POST",
    url: 'some_url',
    data: '',
    cache: false,
    async: false,
    success: function() {
        $('.result').trigger('loaded', $element.attr('href'));
    }
});

// Handles loaded state
var handleLoad = function(href){
    $(this).html('ajax call complete on '+ new Date().toTimeString());
    // your window is already loaded.
};

// create the event listeners
$(document).on('click', '.wait', handleClick);
$(document).on('loaded', '.result' handleLoad); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T13:28:22.240

如我所见，您有几个选择：

*   您可以查看 jQuery queue 方法，该方法允许您将功能块的执行排队以使它们同步。
*   另一种方法可能是`jQuery.trigger()`在 ajax 完成处理程序中使用触发单击事件。如果某些事件处理程序执行两次并不重要，这将是最简单的解决方案。
*   最后，您可以使用 ，从事件中提取所有事件`$('[href tag event trigger]').data('events')`处理程序，在当前上下文中删除函数的事件处理程序，然后在保存的 ajax 完整处理程序中调用其余部分。

[http://api.jquery.com/queue/](http://api.jquery.com/queue/)

[http://api.jquery.com/trigger/](http://api.jquery.com/trigger/)

[http://api.jquery.com/data/](http://api.jquery.com/data/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-14T12:49:14.573

看看[jQuery.ajax**异步**](http://api.jquery.com/jQuery.ajax/)选项。

```
$.ajax({
  url: '.....',
  async: false      //Here
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-14T12:49:45.790

**解决方案#1**

您是否可以控制“播放器”代码？与其在打开播放器之前等待数据保存好，不如**让播放器等待数据准备好。**

你可以这样做：

当您单击链接并且**isSaved**是错误的时，立即启动 AJAX**异步**调用以保存数据并让播放器在新窗口中打开。

播放器的链接将（在 URL 上）有一个参数，该参数将告知数据尚未准备好（正在保存）。播放器将开始查询服务器（每隔几秒一次异步 ajax 调用）以获取数据的“最新版本”。

当保存的数据准备好后，它将提供给播放器。

一个重要的细节：当播放器向服务器请求数据时，提供该数据的最新版本是基本的。

为确保这一点，您必须生成一个随机数，该随机数将成为识别数据最新版本的**关键。**

保存数据时将密钥与 ajax 调用一起传递。将它与将调用播放器的 URL 一起传递。同样，播放器在查询保存的数据时会将密钥传递给服务器。

解释比实施更难！

**解决方案#2**

当用户进行更改时，禁用链接，开始保存，保存完成后再次启用链接。

单击链接时，**isSaved**将始终为 true。

--

希望这可以帮助..

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-02T18:21:09.683

```
while( !isSaved )
$.delay(100); 
```

# css - 将鼠标悬停在我的顶栏上时出错

> ID：14126886
> 
> 赞同：0
> 
> 时间：2013-01-02T18:02:20.790
> 
> 标签：css, hover, border

正如您在下图中看到的：（我不允许发布图片，所以我已将它们上传到 Twitpic，因为它们对于理解我的问题非常有用）

[http://twitpic.com/brvzas](http://twitpic.com/brvzas)

将鼠标悬停在我的顶栏的一个组件上时，我正在尝试更改顶部边框的颜色。问题是一切都移出栏了..我只想改变边距的颜色而不改变任何东西..我想得到这种效果（这里的边框是底部的，它只是为了你明白我想做什么）：

[http://twitpic.com/brvzse](http://twitpic.com/brvzse)

我以这种方式修改了 CSS 文件：

```
.top-bar [...]{ background: black; border-top: 10px solid #ffffff; overflow: hidden; } 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T18:05:49.930

默认情况下使边框透明：

```
.top-bar [...]        {border-top: 10px solid transparent}
.top-bar [...]:hover  {border-top: 10px solid #ffffff} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-07T04:52:46.463

尝试将填充添加到顶部（10px）并在悬停时删除填充并将其替换为边框顶部：10px。

所以基本上：

```
.top-bar{
padding-top: 10px;
}

.top-bar:hover{
padding-top: 0px;
border-top: 10px solid #fff; 
} 
```

希望能解决问题，

# jquery - 如何将 jquery 预加载添加到滑块？

> ID：14126888
> 
> 赞同：0
> 
> 时间：2013-01-02T18:02:28.840
> 
> 标签：jquery, preload

我有一系列加载到我的 main.php 中的 jquery 幻灯片 (html)。我需要为幻灯片添加一个非常简单的预加载，以防止它开始滑动图像，除非图像完全加载。我应该预加载每张图片还是整个“slideshow.html”？这是 slideshow.html 的代码：

```
<body>
 <div id="slideshowContent">
            <img src="images/slideshows/grafica/lisyx_1.png" alt="Lisyx"  class="active"/>
            <img src="images/slideshows/grafica/lisyx_2.png" alt="Lisyx" />
        </div>
</body> 
```

幻灯片的功能：

```
<script type="text/javascript" src="js/jquery-1.2.6.min.js"></script>

<script type="text/javascript">

function slideSwitch() {
    var $active = $('#slideshowContent IMG.active');

    if ( $active.length == 0 ) $active = $('#slideshowContent IMG:last');

    var $next =  $active.next().length ? $active.next()
        : $('#slideshowContent IMG:first');
    $active.addClass('last-active');

    $next.css({opacity: 0.0})
        .addClass('active')
        .animate({opacity: 1.0}, 1000, function() {
            $active.removeClass('active last-active');
        });
}

$(function() {
    slideshowInterval = setInterval( "slideSwitch()", 5000 );
});

</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T18:11:20.667

你在这里做的`you are firing`是`slideSwitch()`功能`doc ready`

相反，您可以将一个类`.preload`（将具有 ajax 加载器图像）添加到正文或任何页面正文元素。

所以你可以试试这个：

```
$(function() {
    $('body').addClass('preload'); // <---on doc ready preload will be added
    $(window).load(function(){
    $('body').removeClass('preload'); // <---after window fully loaded preload will be removed
       slideshowInterval = setInterval(slideSwitch, 5000 );
    });
}); 
```

# http - 使用 winexe 从 linux 在 windows 上安装 mongoose 服务器

> ID：14126890
> 
> 赞同：1
> 
> 时间：2013-01-02T18:02:31.223
> 
> 标签：http, windows-services, mongoose-web-server, winexe

我想从 linux 主机启动 mongoose http 服务器作为 windows 机器上的服务。

为了从 linux 机器远程执行 windows 机器上的命令，winexe 工具就在那里。在 windows 端启用了管理共享，我们可以从 linux 运行 winexe 命令。Winexe 在 windows 机器上上传 winexesvc 服务，从而可以访问 linux 机器。

由于在winexe源代码中有service.c和winexesvc.c两个文件，分别用于服务服务骨架和例程，分别启用访问。(winexe/source4/winexe/winexesvc/)

现在我希望将猫鼬服务器安装为远程机器上的服务。为此，我将猫鼬源代码中的 main.c 文件重命名为 service.c，因为它具有服务框架

和 mongoose.c 作为 winexesvc.c 因为它包含 http 服务器的核心逻辑。但是，当我尝试从 linux 运行更新的 winexe 时，运行 mongoose 服务器的服务会根据需要上传到 windows 机器的 [admin share of] 中。但是服务没有启动。超时后，它给出了错误

**错误 1053：服务没有及时响应启动或控制请求。**

我试图通过增加超时来改变它，但它仍然存在。还有一件事，每当我将相同的上传文件（运行猫鼬服务器的服务）作为应用程序运行时，它作为服务客户端的 http 服务器运行良好。

如果您对如何解决此问题有任何想法，请告诉我。提前致谢。

# php - PDO 和 MySQL 存储过程。不返回参数

> ID：14126892
> 
> 赞同：5
> 
> 时间：2013-01-02T18:02:49.177
> 
> 标签：php, mysql, stored-procedures, pdo, prepared-statement

使用 PDO 时，我应该能够选择参数并回显它。然而，我得到的只是 NULL。当我使用 Workbench 时，我可以看到它很好。

谁能告诉我为什么会这样？

```
CREATE PROCEDURE testing(OUT ret int)
BEGIN SET ret=12; END;

// On workbench returns '12' - Correct       
call testing(@ret);
select @ret;

// PHP/PDO returns NULL
$stmt=Db()->prepare("CALL testing(@ret)");
$stmt->execute();
$param = Db()->query("SELECT @ret")->fetch(PDO::FETCH_ASSOC);
var_dump($param); 
```

**编辑：** 我几乎确信这可能是 Windows 的一个特定问题，所以我将此示例上传到我的 UNIX 服务器并得到完全相同的结果，NULL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T18:30:30.673

您似乎错过了对`bindParam()`. 从[PHP 文档示例](http://php.net/manual/en/pdostatement.bindparam.php)：

```
<?php
/* Call a stored procedure with an INOUT parameter */
$colour = 'red';
$sth = $dbh->prepare('CALL puree_fruit(?)');
$sth->bindParam(1, $colour, PDO::PARAM_STR|PDO::PARAM_INPUT_OUTPUT, 12);
$sth->execute();
print("After pureeing fruit, the colour is: $colour");
?> 
```

**更新**

我错过了 MySQL 部分。MySQL[不支持](https://bugs.php.net/bug.php?id=35935)通过其 C API 绑定输出参数。在错误报告中说您必须使用 SQL 级别的变量：

```
$stmt = $db->prepare("CALL sp_returns_string(@a)");
$stmt->execute();
print_r($db->query("SELECT @a")->fetchAll()); 
```

但这正是你所做的，它不起作用。我现在正在自己尝试这个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T19:59:51.873

我在这里看到一个错误[http://bugs.mysql.com/bug.php?id=11638](http://bugs.mysql.com/bug.php?id=11638)。

试试这个

```
 insert "SELECT @someOutParameter" in your stored procedure and then use: 

    <?php 
    $stmt = $dbh->prepare("CALL SomeStoredProcedure(?, ?)"); 
    $stmt ->execute(array($someInParameter1, $someInParameter2)); 
    ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T18:52:35.957

试试这个

```
$stmt=Dbh->prepare("CALL testing(@ret)");
$stmt->execute();
$param = $stmt->fetchAll();
var_dump($param); 
```

# c# - WPF 应用程序的 AppDomain ExecuteAssembly 按预期关闭

> ID：14126900
> 
> 赞同：0
> 
> 时间：2013-01-02T18:03:13.287
> 
> 标签：c#, wpf, appdomain

我在后台线程中使用 API“ExecuteAssembly”在辅助 AppDomain 中启动 WPF 应用程序。当这个辅助应用程序关闭时（例如用户关闭主窗口），我发现正常的关闭序列不会像应用程序在独立的 AppDomain 中运行时那样被执行。具体来说，Application类的OnExit方法没有被调用。

有人遇到过这种情况么？

例如启动我的辅助 appdomain

```
 var thread = new Thread(() =>
        {
            var currentAppDomain = Thread.GetDomain();
            try
            {
                // line below blocks until complete
                currentAppDomain.ExecuteAssembly("PathToAssemblyToExecute");
                // at this point, executing assembly has been closed
            }
            catch (ThreadAbortException)
            {
                // do nothing.  this can occur due to timing issues.  framework seems
                // to send this exception out when unloading an appdomain
            }
            catch (Exception)
            {
                // an unhandled exception has occured in this app                                        
                AppDomain.Unload(currentAppDomain);
            }
        });
        thread.SetApartmentState(ApartmentState.STA);
        thread.Start(); 
```

# android - 带有 textView 和 setText 的多种语言

> ID：14126901
> 
> 赞同：0
> 
> 时间：2013-01-02T18:03:17.523
> 
> 标签：android, textview, settext

我使用 ImageAdapter 设置带有图像和标题的自定义视图。如何支持此文本的多种语言？

文本现在在 imageAdapter 的 getView(...) 方法中是湿的：

```
public View getView(int position, View convertView, ViewGroup parent) {
        View v;
        if (convertView == null) {
            LayoutInflater li = getLayoutInflater();
            v = li.inflate(R.layout.activity_main_icon, null);

            TextView tv = (TextView)v.findViewById(R.id.main_icon_text);
            tv.setText("**MENU TEXT**");

            ImageView iv = (ImageView)v.findViewById(R.id.main_icon_image);

            iv.setImageResource(mThumbIds[position]);
        } else {
            v = convertView;
        }

        return v;
    } 
```

我想“菜单文本”应该从 res/Strings 动态设置以支持不同的语言，但我该怎么做呢？

GridView 有四个图像，应该有四个不同的字符串。例如“添加朋友”、“查找朋友”、“编辑朋友”和“删除朋友”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T18:09:00.137

我建议您阅读此培训：

[http://developer.android.com/guide/topics/resources/localization.html](http://developer.android.com/guide/topics/resources/localization.html)

然后，您的代码应如下所示：

view.setText(getResources().getString(R.string.YOURSTRINGKEY));

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T18:10:34.423

首先将字符串值放到一个资源文件中：res/values/strings.xml

```
<string name="menu_text">menu text</string> 
```

然后在运行时解析字符串：

```
String menuText = context.getString(R.string.menu_text); 
```

然后您可以使用外文版本的字符串文件进行翻译：例如 res/values-fr/strings.xml

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T18:08:33.707

您只需使用[TextView.setText(int)](http://developer.android.com/reference/android/widget/TextView.html#setText%28int%29)变体（例如 R.string.menu_text_hello）并将[字符串放入相应的 res 文件夹](http://developer.android.com/training/basics/supporting-devices/languages.html)中。

# java - java.io.File 中的空字符对存在检查有效吗？

> ID：14126902
> 
> 赞同：12
> 
> 时间：2013-01-02T18:03:41.673
> 
> 标签：java, file-io, operating-system

当在 中的文件名中遇到 null 时`java.io.File`，该字符及其后面的所有字符都将被忽略，从而导致`File.exists()`.

`java.io.File.exists()`这种行为是我错过的某些方面吗？

例子：

```
package os;

import java.io.File;
import java.io.IOException;

public class FileNullCheck
{
    public static void main(String[] args)
    {
        File tmp = new File("a.txt");
        try
        {
            tmp.createNewFile();
        }
        catch (IOException e)
        {
            e.printStackTrace();
            return;
        }

        String a = "a.txt";
        System.out.printf("a.txt exists: %b (len=%d)%n",new File(a).exists(),a.length());

        String anull = new String(new byte[] { 'a', '.', 't', 'x', 't', 0x00 });
        System.out.printf("a.txt (null) exists: %b (len=%d)%n",new File(anull).exists(),anull.length());

        String anullx = new String(new byte[] { 'a', '.', 't', 'x', 't', 0x00, 'x' });
        System.out.printf("a.txt (nullx) exists: %b (len=%d)%n",new File(anullx).exists(),anullx.length());
    }
} 
```

运行这个的结果。

```
a.txt 存在：true (len=5)
a.txt (null) 存在：true (len=6)
a.txt (nullx) 存在：true (len=7)

```

Linux系统有以下JVM。

```
Java(TM) SE 运行时环境 (build 1.7.0_10-b18)
Java HotSpot(TM) 64 位服务器 VM（内部版本 23.6-b04，混合模式）

```

该行为似乎类似于 C，并且用于验证文件系统上的文件的字符串在 null 处被截断。

但我希望 Java 的行为`File.exists()`对这些无效的文件名返回 false。

**更新：2013 年 9 月 19 日**

Java 1.7.0 更新 40 已将此作为错误 [JDK-8014846 的一部分进行了修复：java.io 中的文件和其他类无法正确处理嵌入的空值](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=8014846)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T18:25:55.020

在 RHEL 上，nul 字节似乎终止了文件名（正如您在 C 中所期望的那样）

```
System.out.println("a exists " + new File("a").exists());
FileOutputStream fos = new FileOutputStream(new File("a\u0000aa"));
fos.close();
System.out.println("a exists " + new File("a").exists()); 
```

印刷

```
a exists false
a exists true 
```

我怀疑 Java 应该阻止您尝试使用带有 nul 字节的文件名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T23:21:06.193

如果使用 JDK 1.7+，则 java.nio.files.Paths.get(URI) 可用于测试 Nul（似乎）

对原始测试的修改会产生有用的异常

```
package os;

import java.io.File;
import java.io.IOException;
import java.nio.file.Files;
import java.nio.file.Path;
import java.nio.file.Paths;

public class FileNullCheck
{
    public static void main(String[] args) throws Exception
    {
        File tmp = new File("a.txt");
        try
        {
            tmp.createNewFile();
        }
        catch (IOException e)
        {
            e.printStackTrace();
            return;
        }

        String a = "a.txt";
        testExists("a.txt", a);

        String anull = new String(new byte[] { 'a', '.', 't', 'x', 't', 0x00 }, "UTF-8");
        testExists("a.txt (null)", anull);

        String anullx = new String(new byte[] { 'a', '.', 't', 'x', 't', 0x00, 'x' }, "UTF-8");
        testExists("a.txt (nullx)", anullx);
    }

    private static void testExists(String label, String filename) throws IOException
    {
        File file = new File(filename);
        System.out.printf("%s exists: %b%n", label, file.exists());
        System.out.printf("  filename.length = %d%n", filename.length());
        Path path = Paths.get(file.toURI());
        boolean symlink = Files.isSymbolicLink(path);
        System.out.printf("  nio issymlink = %b%n",symlink);
    }
} 
```

输出结果

```
a.txt 存在：真
  文件名.长度 = 5
  nio issymlink = false
a.txt (null) 存在：真
  文件名.长度 = 6
线程“主”java.nio.file.InvalidPathException 中的异常：不允许 Nul 字符：/home/joakim/code/Stackoverflow/a.txt
    在 sun.nio.fs.UnixPath.checkNotNul(UnixPath.java:93)
    在 sun.nio.fs.UnixPath.normalizeAndCheck(UnixPath.java:83)
    在 sun.nio.fs.UnixPath.(UnixPath.java:71)
    在 sun.nio.fs.UnixFileSystem.getPath(UnixFileSystem.java:281)
    在 java.io.File.toPath(File.java:2069)
    在 sun.nio.fs.UnixUriUtils.fromUri(UnixUriUtils.java:61)
    在 sun.nio.fs.UnixFileSystemProvider.getPath(UnixFileSystemProvider.java:97)
    在 java.nio.file.Paths.get(Paths.java:138)
    在 os.FileNullCheck.testExists(FileNullCheck.java:39)
    在 os.FileNullCheck.main(FileNullCheck.java:28)

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T19:35:47.937

它仅由底层操作系统和文件系统决定。当您`File`使用包含零的名称创建时，此文件名在构造期间不会更改`File`：

```
String anull = new String(new byte[] {'a', 0x00, '.', 't', 'x', 't', 0x00});
System.out.println(anull);
System.out.println(new File(anull).getPath()); 
```

输出是相同的并且包含零。

处理文件时`File`，它使用文件系统（例如`java.io.FileSystem`），该文件系统的实现取决于 OS 和 JDK（它是内部类）。在 Windows JDK 中，几乎所有函数都是原生的，所以在这种情况下，这种行为是由底层操作系统（或 JDK dll）决定的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T18:40:57.523

好吧，这是我的第三次尝试。我在 Windows（Win 7，JDK 7 64 位）下检查了您的代码。它导致相同的结果：

```
a.txt exists: true (len=5)
a.txt (null) exists: true (len=6)
a.txt (nullx) exists: true (len=7) 
```

在java源代码中我们可以看到，它使用方法`native`的实现`getBooleanAttributes(File f)`。这意味着 JVM 与 JVM 的**c/c++**库进行交互。在这种情况下，所有带有`0x00`符号的字符串都将在库中被解释为仅在`0x00`('\0') 符号之前的字符串。

如何检查这个假设？我做了一个简单的实验。如果我关于在操作系统库中剪切这个字符串的假设是正确的，那么这段代码：

```
 String anull = new String(new byte[] { 'a',0x00 , '.', 't', 'x', 't', 0x00 });
    System.out.printf("a.txt (null) exists: %b (len=%d)%n",new File(anull).exists(),anull.length()); 
```

将返回`false`。是的，就是这样：

```
a.txt (null) exists: false (len=7) 
```

**升级版：**

这个：

```
String anull = new String(new byte[] { 'a',0x00 , '.', 't', 'x', 't', 0x00 });
new File(anull).createNewFile(); 
```

将创建一个`a`没有任何扩展名的文件。

# jquery - 表单提交后使用jquery更改div中的文本

> ID：14126903
> 
> 赞同：0
> 
> 时间：2013-01-02T18:03:45.543
> 
> 标签：jquery

**编辑**我在发布此消息后不久就意识到了我的错误。`append`应该是`html()`或`text()`

部分代码：

```
<script type="text/javascript" language="javascript">
        $(document).ready(function(){
            $('#resetpassword').validate(
            {rules: {
                secretAnswer: {
                    required: true
                }
            },

            messages: {
                secretAnswer: {
                    required: "Please answer your security question"
                }
            },
            submitHandler: function(form){
                $.post("../BackgroundOperations/resetpassword.php",
                    $('#resetpassword').serialize(),
                    function(data){
                        if(data.status == 0){
                            $('#message').append("<span class='error'>Error: " + data.message + "</span>");
                        }
                        else{
                            $('.container').hide();
                            $('.short_explanation').hide();
                            $('#message').text(data.message);
                        }
                    },
                "json");
            }
            });
        });
    </script>
</head>
<body>

<!-- Form Code Start -->
<div id='fg_membersite'>
<form id='resetpassword' method='post' accept-charset='UTF-8'>
<fieldset >
<legend>Reset Password</legend>

<div class='short_explanation'>* required fields</div>
<input type='text'  class='spmhidip' name='<?php echo $vm->GetSpamTrapKey(); ?>' />

<div id="message"></div>
<div class='container'>
    <label for='emailAddress' >Email Address:</label><br/>
    <input type='text' name='emailAddress' id='emailAddress' maxlength="100" readonly="true" value="<?php echo $vm->GetEmailAddress() ?>" /><br/>
</div>
<div class='container'>
    <label for='secretQuestion' >Security Question:</label><br/>
    <input type='text' name='secretQuestion' id='secretQuestion' value='<?php echo $vm->GetSecretQuestion() ?>' maxlength="100" readonly="true" width="100" /><br/>
</div>
<div class='container'>
    <label for='secretAnswer' >Answer:</label><br/>
    <input type='text' name='secretAnswer' id='secretAnswer' maxlength="50" /><br/>
</div>
<div class='container'>
    <input type='submit' name='Submit' value='Submit' />
</div>

</form> 
```

我正在测试无效输入（错误的安全答案）。当我输入错误的答案并提交表单时，`<div id="message">`会使用错误消息进行更新，但是如果我继续提交无效数据，`<div id="message">`则会保留旧的错误消息并在末尾添加新的错误消息，而不是只有一条消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T18:05:56.727

代替

```
$('#message').append("<span class='error'>Error: " + data.message + "</span>"); 
```

利用

```
$('#message').html("<span class='error'>Error: " + data.message + "</span>"); 
```

# angularjs - 在大型数据集上使用多个过滤器的 ng-repeat

> ID：14126905
> 
> 赞同：41
> 
> 时间：2013-01-02T18:03:48.370
> 
> 标签：angularjs

我还是 AngularJS 的新手，所以我只是想做一个简单的 CRUD 应用程序。目前，我使用由控制器处理`$http`的数据（在 JSON 文件中）。`div``MyCtrl1`

```
function MyCtrl1($scope, $http) {
    $http.get('data/accounts.json').success(function(data) {
        $scope.accounts = data;
    ...
    }); 
} 
```

这里面`div`有`table`以下内容`tbody`：

```
<tbody>
    <tr ng-repeat="account in accounts | orderBy:sort.field:sort.desc | startFrom:currentPage * pageSize | limitTo:pageSize">
        <td contentEditable="true" ng-repeat="(label, value) in account" ng-show="fields[label].visible">{{value}}</td>
    </tr>
</tbody> 
```

过滤器根据`orderBy`选定的字段进行排序；`startFrom`将数组切片以从某个点开始；`limitTo`根据预设的页面大小进行过滤。如果没有分页过滤器，性能非常糟糕，但我想知道是否有其他方法可以解决这个问题？

我有适用于 Chrome 的 Batarang，在“性能”选项卡下它显示`ngRepeatWatch`占用的时间最多，我认为这与我正在做的所有过滤有关。

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2013-08-22T13:31:53.763

[{{ 表达式 | 过滤器1 | 过滤器2}}](http://docs.angularjs.org/api/ng/filter/filter)

只需使用

```
<tr ng-repeat="account in accounts | filter1 | filter2 | filter3" >
  <td contentEditable="true" ng-repeat="(label, value) in account" ng-show="fields[label].visible">{{value}}</td>
</tr> 
```

[Angular 2](https://angular.io/)使用[管道](https://angular.io/docs/ts/latest/guide/pipes.html)，但它看起来像过滤器：

```
<div>The chained hero's birthday is
<p>{{  birthday | date:'fullDate' | uppercase}}</p>
<div> 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-03-25T14:40:03.977

我知道这个问题很老，但对于未来的任何人来说。在线过滤是昂贵的（计算上的），因为它直接在 DOM 上工作，如果您正在处理大量数据，超过 1000 行，最好在控制器中过滤您的集合，然后重复此操作。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-02T18:54:31.997

我会在控制器或服务器端处理分页。我的猜测是 ng-repeat 正在观看您的*整个*列表，而不是只观看需要观看的内容，这将非常慢。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-16T18:13:07.433

This is not a filter but you can use a ng-hide directive evaluating the $index for the array as following:

```
<div class="col-sm-12 col-lg-12" ng-repeat="message in messages | orderBy: '-id' as filtered_result track by message.id  ">
  <div class="card-box widget-user" ng-hide="{{$index >= 4}}">
    <div>
      <img ng-src="{{message.imageUrl}}" class="img-responsive" alt="{{message.imageUrl}}">
      <div class="wid-u-info">
        <h3 class="m-t-0 m-b-5">{{message.title }}</h3>
        <p class="text-muted m-b-5 font-13" ng-bind-html="message.content | ellipsis:147 | trusted"></p>
        <!-- <p class="text-muted m-b-5 font-13">{{message.content | limitTo:130}}</p> -->
        <small class="label" ng-class="{'label-success':message.type=='Message','label-warning':message.type=='Announcement'}"><b>{{message.type}}</b></small>
      </div>
    </div>
  </div>
</div> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-27T14:38:59.113

CRUD 应该在工厂或服务中处理，而不是在控制器中处理。我的理解是控制器只负责视图和服务之间的通信。

编辑 1：摘自 John Papa Style Guide (Angular -1) - 通过委托给服务和工厂来延迟控制器中的逻辑。

为什么？：当放置在服务中并通过函数公开时，逻辑可以被多个控制器重用。

为什么？：服务中的逻辑更容易在单元测试中被隔离，而控制器中的调用逻辑更容易被mock。

为什么？：从控制器中删除依赖项并隐藏实现细节。

为什么？：使控制器保持纤薄、修剪和集中。

[https://github.com/johnpapa/angular-styleguide/blob/master/a1/README.md#style-y035](https://github.com/johnpapa/angular-styleguide/blob/master/a1/README.md#style-y035)

# css - 在 FireFox 中使用显示表格单元格和浮动元素时宽度错误

> ID：14126911
> 
> 赞同：1
> 
> 时间：2013-01-02T18:04:16.230
> 
> 标签：css, firefox, css-tables

似乎 FireFox (17.0.1) 在使用表格单元格和浮动元素的显示时计算宽度不正确，它设置父宽度并且不包括父宽度中浮动元素的宽度。这似乎适用于 Chrome、IE8、IE9 和 IE10。

```
 <div style="position:absolute">
    <div style="position:relative">
        <div class="option">
            <div>
                <div class="right">right text</div>
                <div class="cell">content item 1</div>
            </div>
        </div>
        <div class="option">
             <div>
                 <div class="right">right</div>
                 <div class="cell">content</div>
             </div>
        </div>
    </div>
</div>
<style>
    .right {float:right;}
    .cell
    {
        display:table-cell;
        height:30px;
        vertical-align:middle;
        border:1px solid green
    }
</style>​ 
```

如果可能的话，我正在寻找仅 CSS 的修复程序，因为这是现有的。一些 HTML 可能没有意义，但我已经删除了 90% 以使示例更清晰。

我注意到一些表格单元错误，其中某些父元素需要 display:table, display:table-row ......但我找不到有效的组合。

另外，我试图避免对宽度进行硬编码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T19:14:35.810

通过删除`float: right;` 和添加`display: table-row;`容器 div 让您的生活更轻松：

[http://jsfiddle.net/Riskbreaker/u9RU4/1/](http://jsfiddle.net/Riskbreaker/u9RU4/1/)

我在 FF-Chrome-IE9 和 IE8- 以及 Safari 中为您测试了这个。......除非你需要浮动......

# asp.net - asp listitem 值属性

> ID：14126912
> 
> 赞同：0
> 
> 时间：2013-01-02T18:04:40.550
> 
> 标签：asp.net

谢谢 SOF，我在这里提出另一个 asp.net 问题。

在我的 asp 下拉列表控件中，我使用 appenddatabounditems 功能绑定到一个 asp listitem

```
<asp:DropDownList ID="CMListDD" runat="server" AppendDataBoundItems="True" AutoPostBack="True" DataSourceID="CMListDD_ODS" >
           <asp:ListItem value="" Text="Select a CM"/>
        </asp:DropDownList> 
```

我搜索了 MSDN，并认为 .net 应该将其呈现为 html

```
<option value="">Select a Product</option> 
```

在我后面的代码中，我有一个对象数据源绑定到我的 gridview 以根据我的下拉列表中的选定值返回一个表。我使用 string.IsNullOrEmpty 来捕捉这个空值，但不知何故，该函数没有捕捉到这个空值。

```
 public DataTable GetPRList(string CM)
            {

                if (string.IsNullOrEmpty(CM))
                {
                   return null;
                }
                else
    {
    // do sth
    }
} 
```

if 子句不捕获空字符串，而是去 else{}。有人知道为什么吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T18:41:38.193

如果您的下拉列表看起来像这样，它应该可以工作

```
<asp:DropDownList id="DropDownList1" runat="server"
    Appenddatabounditems="true">

   <asp:ListItem Value="" Text="-- Select a Product --"></asp:ListItem>

</asp:DropDownList> 
```

注意：我设置了`Value=""`

# r - 使用 ddply 生成满足多个条件的值

> ID：14126913
> 
> 赞同：-4
> 
> 时间：2013-01-02T18:04:40.867
> 
> 标签：r, indexing, dataframe, plyr, multiple-columns

我有一个示例数据框“数据”，如下所示：

```
X          Y  Month   Year    income
2281205 228120  3   2011    1000
2281212 228121  9   2010    1100
2281213 228121  12  2010    900
2281214 228121  3   2011    9000
2281222 228122  6   2010    1111
2281223 228122  9   2010    3000
2281224 228122  12  2010    1889
2281225 228122  3   2011    778
2281243 228124  12  2010    1111
2281244 228124  3   2011    200
2281282 228128  9   2010    7889
2281283 228128  12  2010    2900
2281284 228128  3   2011    3400
2281302 228130  9   2010    1200
2281303 228130  12  2010    2000
2281304 228130  3   2011    1900
2281352 228135  9   2010    2300
2281353 228135  12  2010    1333
2281354 228135  3   2011    2340 
```

我使用 ddply 计算每个[Y的收入](https://stackoverflow.com/questions/14035872/ddply-for-sum-by-group-in-r)

```
x <- ddply(data, .(Y), summarize, freq=length(Y), tot=sum(income))
#Now, I also need to find out the X for each Y depending upon the following conditions: 
a. If Y consists of observations of months 9 (2010), 12 (2010), and 3 (2011), then the x corresponds to months 9(2010) i.e. for Y =228121 x=2281212
b. If Y consists of observations of month 6 (2010), 9 (2010), 12(2010) , and 3 (2011)  then the x corresponds to months 6 (2010) i.e. for Y =228122 x=2281222\. 
c. If Y consists of observations of month 12 (2010), 3 (2011) then the x corresponds to months 12 (2010) i.e. for Y =228124 x=2281243\. 
d. If Y consists of observations of month 12 (2010), 3 (2011) then the x corresponds to months 12 (2010) i.e. for Y =228124 x=2281243\. 
e. If Y consists of only one observation then the x corresponds to month of that observation i.e. for Y =228120 x=2281205. 
```

这里的要点是，如果我对每个 Y 有多个观察值，我选择对应于第 6 个月（2010 年）的 x（如果可用），但如果不可用，我选择接近 6 月（2010 年）的月份（例如 9（ 2010））。请注意，如果我只有一个观察结果，我将选择 x 作为该观察结果。

请建议如何将这些条件纳入 ddply。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T20:47:47.843

This solution assumes that earliest `X` value is selected as sugessted by @DWin. `Month` and `Year` variables are converted to date format and then earliest is selected as condition to select `X`.

```
library(zoo) #necessary for date manipulation
x <- ddply(data, .(Y), summarize, freq=length(Y), tot=sum(income),
 X=X[as.yearmon(paste(Month,Year,sep="/"),format="%m/%Y")==min(as.yearmon(paste(Month,Year,sep="/"),format="%m/%Y"))])

       Y freq   tot       X
1 228120    1  1000 2281205
2 228121    3 11000 2281212
3 228122    4  6778 2281222
4 228124    2  1311 2281243
5 228128    3 14189 2281282
6 228130    3  5100 2281302
7 228135    3  5973 2281352 
```

### EDIT - solution assuming that there could be values before 2010-06

```
library(zoo)
#new column containing dates made from Month and Year
data$Time<-as.Date(as.yearmon(paste(data$Month,data$Year,sep="/"),format="%m/%Y"))

#calculated difference between new date column and 2010-06
data$Time.dif<-abs(as.numeric(data$Time-as.Date("2010-06-01")))

#now selects X when Time.dif is smallest (0 in case of 2010-06)
x <- ddply(data, .(Y), summarize, freq=length(Y), tot=sum(income), 
           X=X[Time.dif==min(Time.dif)]) 
```

# regex - 需要匹配文件中的唯一字符串，然后删除整个封装的文本

> ID：14126915
> 
> 赞同：1
> 
> 时间：2013-01-02T18:04:43.983
> 
> 标签：regex, sed, awk

今天是个好日子，

我目前正在尝试编写一个例程来检查文件中的特定唯一字符串，然后删除整个封装文本，如下所示：

```
define service{
    use                     generic-service,srv-pnp
    host_name               MEVIE.COM
    service_description     NSClient++ Version
    check_command           check_nt!CLIENTVERSION
    } 
```

文件中有很多实例`define service { ... }`。所以我不能只搜索定义服务，我必须搜索唯一的字符串然后删除整个`define service { ... }`封装。

例如：

*   在文件中找到字符串“NSClient++ Version”...
*   删除里面的一切`define service{ .... }`
*   也删除`define service { .... }`标签。

我真的希望我的目标很明确。

我试过：`sed -n '/NSClient+++ Version/{H;g;p};H' MEVIE.bak|tail -n5 > mevie.fil`..它返回除最后一个'}'之外的所有内容

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T19:37:22.450

```
awk '
/^define service{/ { inBlock = 1; block = "" }

inBlock {
   block = block $0 ORS
   if (/}/) {
      if (block !~ /NSClient\+\+ Version/)
         printf "%s",block
      inBlock = 0
   }
   next
}

{ print }
' file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T00:58:35.133

这是使用`sed`. 像这样运行：

```
sed -f script.sed file 
```

内容`script.sed`：

```
:t
/define service{/ , /}/ {
    /}/! {
        $! {
            N;
            bt
        }
    }
    /NSClient++ Version/d;
} 
```

或者，这是单线：

```
sed ':t /define service{/ , /}/ { /}/! { $! { N; bt } }; /NSClient++ Version/d }' file 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T19:47:59.193

perl 的一种方法：

```
perl -0pe 's/define service[ \t]*\{[^{}]*?NSClient\+\+[ \t]+Version[^{}]*?\}//gs' filename 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T19:21:00.173

有更短的解决方案，但我曾经这样做：

```
awk '/^define service/ {
  if ( $0 ~ "}" ) {
    block=$0
  } else {
    block=$0
    while ( block !~ "}" ) {
      getline nl
      block=block "\n" nl      
    }
  }
  if ( block !~ "NSClient\\+\\+ Version" ) { print block } 
}' INPUTFILE > OUTPUTFILE 
```

[请参阅此处的实际操作](http://ideone.com/q2OAlJ)。

1.  在每个起始 ( `define...`) 行检查它是否包含`}`，如果是，则将该行另存为`block`
2.  否则阅读直到下一行`}`并将这些行添加到`block`
3.  最后检查我们是否要打印出来

# iphone - UITextField 的 iOS 5 和 iOS 6 行为在 KeyboardType 电子邮件的情况下有所不同

> ID：14126919
> 
> 赞同：1
> 
> 时间：2013-01-02T18:05:03.573
> 
> 标签：iphone, ios, ios5, ios6, uitextfield

我最近观察到您创建 1`UITextField`并将其**UIKeyboardType**设置为**Email**并将属性设置`setsecuretextentry`为**TRUE**。

现在请注意 iOS 5 和 iOS 6 设备或模拟器中的这种行为...

请注意，在 iOS 5 Normal（不带@符号的字母）中，键盘将打开。在 iOS 6 电子邮件类型键盘将打开。

有没有其他人早些时候观察到这种行为？是否已经向Apple报告了任何错误？谁能解释如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T19:04:02.270

通过在代码中设置属性，我也设法在 iOS 5 中获得了 iOS 6 的行为。必须是从 nib 文件中选择属性的方式/顺序中的错误：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    self.textField.secureTextEntry = YES;
    self.textField.keyboardType = UIKeyboardTypeEmailAddress;
} 
```

# android - 无效的 JNI 引用（从 c++ 调用 Java 方法）

> ID：14126921
> 
> 赞同：0
> 
> 时间：2013-01-02T18:05:17.200
> 
> 标签：android, c++, java-native-interface

我在调用从 C++ 启用 GPS 定位时遇到问题。我使用 SWIG 生成了 JNI 包装器。日志猫说：

```
01-02 17:14:03.816: D/dalvikvm(6165): Trying to load lib /data/data/com.example.swig/lib/libcppinterface.so 0x44e7ebf0
01-02 17:14:03.976: D/dalvikvm(6165): Added shared lib /data/data/com.example.swig/lib/libcppinterface.so 0x44e7ebf0
01-02 17:14:04.886: W/dalvikvm(6165): JNI WARNING: 0x44e8bb48 is not a valid JNI reference
01-02 17:14:04.886: W/dalvikvm(6165):              in Lcom/example/swig/cpplib/cppinterfaceJNI;.LocationSpotter_refresh (JLcom/example/swig/cpplib/LocationSpotter;)V (CallVoidMethodV)
01-02 17:14:04.886: I/dalvikvm(6165): "main" prio=5 tid=1 RUNNABLE
01-02 17:14:04.886: I/dalvikvm(6165):   | group="main" sCount=0 dsCount=0 s=N obj=0x4001d8e0 self=0xccb0
01-02 17:14:04.886: I/dalvikvm(6165):   | sysTid=6165 nice=0 sched=0/0 cgrp=default handle=-1345026008
01-02 17:14:04.886: I/dalvikvm(6165):   | schedstat=( 226108400 549900071 66 )
01-02 17:14:04.886: I/dalvikvm(6165):   at com.example.swig.cpplib.cppinterfaceJNI.LocationSpotter_refresh(Native Method)
01-02 17:14:04.896: I/dalvikvm(6165):   at com.example.swig.cpplib.LocationSpotter.refresh(LocationSpotter.java:56)
01-02 17:14:04.896: I/dalvikvm(6165):   at com.example.swig.MainActivity.onCreate(MainActivity.java:50)
01-02 17:14:04.896: I/dalvikvm(6165):   at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
01-02 17:14:04.896: I/dalvikvm(6165):   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
01-02 17:14:04.896: I/dalvikvm(6165):   at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
01-02 17:14:04.896: I/dalvikvm(6165):   at android.app.ActivityThread.access$2300(ActivityThread.java:125)
01-02 17:14:04.896: I/dalvikvm(6165):   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
01-02 17:14:04.896: I/dalvikvm(6165):   at android.os.Handler.dispatchMessage(Handler.java:99)
01-02 17:14:04.896: I/dalvikvm(6165):   at android.os.Looper.loop(Looper.java:123)
01-02 17:14:04.896: I/dalvikvm(6165):   at android.app.ActivityThread.main(ActivityThread.java:4627)
01-02 17:14:04.896: I/dalvikvm(6165):   at java.lang.reflect.Method.invokeNative(Native Method)
01-02 17:14:04.896: I/dalvikvm(6165):   at java.lang.reflect.Method.invoke(Method.java:521)
01-02 17:14:04.896: I/dalvikvm(6165):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
01-02 17:14:04.896: I/dalvikvm(6165):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
01-02 17:14:04.896: I/dalvikvm(6165):   at dalvik.system.NativeStart.main(Native Method)
01-02 17:14:04.906: E/dalvikvm(6165): VM aborting 
```

我用这一行触发来自 Java 的调用：

```
LocationSpotter.getLocationSpotter().refresh(); 
```

getLocationSpotter() 在 C++ 中触发此代码，该代码创建一个作业对象 (jSpotter)：

```
// Retrieve the current JNIEnv* with the cached JVM
JNIEnv* env;
AndroidLocationSpotter::cachedJVM->AttachCurrentThread(&env, NULL);

jclass clazz = env->FindClass("com/example/swig/AndroidLocationSpotter");
jmethodID construct = env->GetMethodID(clazz, "<init>", "()V");

jSpotter = env->NewObject(clazz, construct); 
```

并在方法 refresh() 触发此代码后，使应用程序崩溃：

```
// Retrieve the current JNIEnv* with the cached JVM
JNIEnv* env;
AndroidLocationSpotter::cachedJVM->AttachCurrentThread(&env, NULL);

jclass clazz = env->FindClass("com/example/swig/AndroidLocationSpotter");
jmethodID refresh = env->GetMethodID(clazz, "refresh", "()V");

env->CallVoidMethod(jSpotter, refresh); // The line where the crash happens 
```

我还需要提到的是，我在 JNI_OnLoad 函数中启动了“cachedJVM”。希望有人可以帮助我，谢谢

**编辑**

工作代码：

```
// Retrieve the current JNIEnv* with the cached JVM
JNIEnv* env;
AndroidLocationSpotter::cachedJVM->AttachCurrentThread(&env, NULL);

jclass clazz = env->FindClass("com/example/swig/AndroidLocationSpotter");
jmethodID construct = env->GetMethodID(clazz, "<init>", "()V");

jSpotter = env->NewObject(clazz, construct);

jSpotter = env->NewGlobalRef(jSpotter); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T21:23:08.533

您需要使用返回的引用创建一个新的全局`jSpotter`引用。您当前使用的引用是当前帧的本地引用，并且将超出范围（可能在您 DetachCurrentThread() 时）。

您需要调用`env->NewGlobalRef(jSpotter)`or `env->NewWeakGlobalRef(jSpotter)`（两者都有相应的`free`函数）并使用返回的引用。

**编辑**

这是正确附加/分离处理的示例（假设您不需要线程进行进一步的 Java 操作）：

```
 JNIEnv* env;
  JavaVM* jvm = AndroidLocationSpotter::cachedJVM;

  int attached = jvm->GetEnv((void *)&env, JNI_VERSION_1_4) == JNI_OK;
  if (!attached) {
    if (jvm->AttachCurrentThread((void *)&env, NULL) != JNI_OK) {
      // Attach failed, handle error condition
      return;
    }
  }

  // Pushing a frame ensures proper cleanup of any local references you might generate
  // in your JNI code, e.g. with NewLocalRef (optional)                                                                                                                                                                                
  if (env->PushLocalFrame(16) < 0) {
    // Handle failed frame push error
  }
  else {
    // example local reference generation: ref2 = env->NewLocalRef(ref);

    //
    // Perform your primary Java operations here
    //

    env->PopLocalFrame(NULL);
  }

  if (!attached) {
    jvm->DetachCurrentThread();
  } 
```

# jquery - 彩虹效应多用户

> ID：14126922
> 
> 赞同：0
> 
> 时间：2013-01-02T18:05:23.120
> 
> 标签：jquery

```
$.getScript("http://xoxco.com/projects/code/rainbow/rainbow.js",function(){
 $('a[href="/u1"] strong').html(function(){
 $(this).rainbow({ 
colors: [
    '#FF0000',
    '#f26522',
    '#fff200',
    '#00a651',
    '#28abe2',
    '#2e3192',
    '#6868ff'
],
animate: true,
animateInterval: 100,
pad: false,
pauseLength: 100,
    });
  });
}); 
```

那是我的脚本，有没有办法选择多个名称？

`('a[href="/u1"] strong','a[href="/u2"]')`有点像？

想出了一个小修复::

```
$.getScript("http://xoxco.com/projects/code/rainbow/rainbow.js",function(){
  var a = $('a[href="/u1"] strong,a[href="/u33"]');
   a.addClass('.rainbow');
 $('.rainbow').rainbow({ 
colors: [
    '#FF0000',
    '#f26522',
    '#fff200',
    '#00a651',
    '#28abe2',
    '#2e3192',
    '#6868ff'
],
animate: true,
animateInterval: 100,
pad: false,
pauseLength: 100,
});
}); 
```

虽然它没有添加实际的彩虹效果......任何建议。我会做一个jsfiddle

[http://jsfiddle.net/LUdrF/](http://jsfiddle.net/LUdrF/)

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T18:10:43.737

这应该有效；

```
$('a[href="/u1"] strong, a[href="/u2"]') 
```

[http://api.jquery.com/multiple-selector/](http://api.jquery.com/multiple-selector/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T18:07:08.133

您可以使用[“开始于”选择器](http://api.jquery.com/attribute-starts-with-selector/)：

```
$('a[href^="/u"] strong').html(function(){ 
```

并更换

```
a.addClass('.rainbow'); 
```

和

```
a.addClass('rainbow'); 
```

[示范](http://jsfiddle.net/mdtS3/)

# haskell - 有没有办法从 Haskell 控制台查看 Prelude 函数列表？

> ID：14126923
> 
> 赞同：7
> 
> 时间：2013-01-02T18:05:22.017
> 
> 标签：haskell, ghci, haskell-prelude

有没有办法从 Haskell 控制台查看 Prelude 函数列表（例如`Data.Char`），而不是访问 Hoogle？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-02T18:22:21.570

从 GHCi 你可以使用

```
:browse Data.Char 
```

查看给定模块导出的类型和值。

例如

```
Prelude> :browse Data.Char
digitToInt :: Char -> Int
generalCategory :: Char -> GeneralCategory
isLetter :: Char -> Bool
isMark :: Char -> Bool
isNumber :: Char -> Bool
isPunctuation :: Char -> Bool
isSeparator :: Char -> Bool
isSymbol :: Char -> Bool
data Char = GHC.Types.C# GHC.Prim.Char#
chr :: Int -> Char
... 
```

# sql - 如何将此 linq 命令写入等效的删除 SQL 查询？

> ID：14126924
> 
> 赞同：1
> 
> 时间：2013-01-02T18:05:28.800
> 
> 标签：sql, linq, query-optimization

我已经很多年没有写过 SQL 了，现在我正在开发一个更“渴望性能”的网站。有人可以帮我将其转换为删除 SQL 命令吗？

我有一堆这样的，所以帮助我解决这个问题对我来说很重要，谢谢！

我做到了这一点：

```
Delete FROM [DbName].[dbo].[RatingListTriangleModels] 
WHERE  ... 
```

Linq 选择命令：

```
var allRatingListObjects = from row in ctx.RatingListTriangle
                           where
                              (row.To1Id == myToid && row.To2Id == theirTradeObjectid)
                               || (row.To2Id == myToid && row.To3Id == theirTradeObjectid)
                               || (row.To3Id == myToid && row.To1Id == theirTradeObjectid)
                           select row; 
```

更新：这是我寻求的工作解决方案：

```
using (SqlCommand command = new SqlCommand
                ("delete TBL from RatingListTriangleModels TBL where ( TBL.To1Id = @MY_ID and TBL.To2Id = @OTHER_ID ) or ( TBL.To2Id = @My_ID and TBL.To3Id = @OTHER_ID ) or ( TBL.To3Id = @My_ID and TBL.To1Id = @OTHER_ID )", cn))
            {
                // Add new SqlParameter to the command.
                command.Parameters.Add(new SqlParameter("MY_ID", myToid));
                command.Parameters.Add(new SqlParameter("OTHER_ID", theirTradeObjectid));
                var no = command.ExecuteNonQuery();
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T18:16:38.487

这应该删除您在 linq-statement 中指定的记录，但您需要用您拥有的相应 id替换`@YOUR_ID`和。`@OTHER_ID`

您可以使用`SqlParameter`. [例子](http://www.dotnetperls.com/sqlparameter)

```
delete from [DbName].[dbo].[RatingListTriangleModels] TBL
where ( TBL.To1Id = @YOUR_ID and TBL.To2Id = @OTHER_ID )
   or ( TBL.To2Id = @YOUR_ID and TBL.To3Id = @OTHER_ID )
   or ( TBL.To3Id = @YOUR_ID and TBL.To1Id = @OTHER_ID ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T18:18:23.813

如果你想删除 linq 使用 TSQL 选择的行，你可以这样做

```
DECLARE @p0 int;
DECLARE @p1 int;
SET @p0 = <some integer>;
SET @p1 = <some other integer>;

DELETE
            [DbName].[dbo].[RatingListTriangleModels]
    WHERE
            ([To1Id] = @p0 AND [To2Id] = @p1)
        OR  
            ([To2Id] = @p0 AND [To3Id] = @p1)
        OR
            ([To3Id] = @p0 AND [To1Id] = @p1); 
```

当然，您可能希望将语句传递给[`ExecuteCommand`](http://msdn.microsoft.com/en-us/library/system.data.linq.datacontext.executecommand.aspx)您的上下文并将 id 作为参数传递，然后 .Net 会将其包装在`sp_executeSql`对您的调用中。这将防止注入攻击，为您提供查询计划重用的好处和直接 TSQL 操作的灵活性。

我会警告我的答案，像这样的简单操作可能会在 linq 中等效地执行，而不会产生任何额外的复杂性。

# jquery - 如何使用 jquery 启用/禁用 asp 面板和子面板

> ID：14126925
> 
> 赞同：0
> 
> 时间：2013-01-02T18:05:40.113
> 
> 标签：jquery, asp.net

我创建了这个 jQuery 来启用/禁用 asp.net 面板中的子表单元素，这个脚本将启用编辑表单，但在我第二次点击后它不会禁用它有人可以帮我吗？

```
 <script type="text/javascript">
        $(function () {
            //creating toggle
            $("#check").button();

            $("[id$='check']").data('isenabled', true); //enabled assumption
            //disabled all input form 
            $("[id$=p_taskInfo]").children().prop("disabled", "disabled");
            $("input[name='check']").click(function () {
                var currentState = $(this).data('isenabled');
                if (currentState) {
                    $("[id$=p_taskInfo]").children().removeProp("disabled");
                }
                else {
                    $("[id$=p_taskInfo]").children().prop("disabled", "disabled");
                }
                $(this).data('isenabled', !currentState);
            }); //EOF click function 
        });//EOF function 
    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T19:59:06.007

*currentState*拼写错误，您需要交换 if...else 块中的两个语句，如下所示：

```
 <asp:Content ID="HeaderContent" runat="server" ContentPlaceHolderID="HeadContent">
    <script src="Scripts/jquery-1.8.3.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            $("[id$=p_taskInfo]").children().prop("disabled", "disabled");
            $("input[name='check']").click(function () {
                var currentState = $(this).data('isenabled');
                if (currentState) {
                    $("[id$=p_taskInfo]").children().prop("disabled", "disabled");
                }
                else {
                    $("[id$=p_taskInfo]").children().removeProp("disabled");
                }
                $(this).data('isenabled', !currentState);
            });
        });
    </script>
</asp:Content>
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
    <input id="check" name="check" type="button" value="Enable\Disable" />
    <asp:Panel ID="p_taskInfo" runat="server">
        <asp:Button ID="Button2" runat="server" Text="Button" />
        <asp:Button ID="Button3" runat="server" Text="Button" />
    </asp:Panel>
</asp:Content> 
```

# ant - 使用带有 refid 的 zipfilesets 时如何在 ant zip 任务中设置目标目录？

> ID：14126930
> 
> 赞同：1
> 
> 时间：2013-01-02T18:05:51.783
> 
> 标签：ant

我正在使用 ant 构建一个 zip 文件。zip 任务包含许多只是引用的 zipfilesets。我想放置所有这些引用的文件集，而不是放在生成的 zip 的根目录（即 ./），而是放在一个子目录中，比如 mysubdir。我目前有以下内容：

```
<zip destfile="myzip" >

    <zipfileset refid="core2lib.zfs"    />
    <zipfileset refid="core-lib.zfs"    />
    <zipfileset refid="samples.zfs"     />
    <zipfileset refid="tools2bin.zfs"   />
    <zipfileset refid="top.zfs"         />
    <zipfileset refid="top2lib.zfs"     />
    <zipfileset refid="doc.zfs"         />
    <zipfileset refid="wpmlbuild.zfs"   />
    <zipfileset refid="wpmllib.zfs"     />
    <zipfileset refid="license-other.zfs"       />
    <zipfileset refid="license-government.zfs"  />
    <zipfileset refid="license-external.zfs"    /> 
</zip> 
```

它将所有文件集放在 ./. 我已经尝试在 zipfilesets 上放置一个前缀 =“mysubdir”，如

```
 <zipfileset refid="core2lib.zfs" prefix="mysubdir"  /> 
```

但这会导致以下错误消息：

```
 "You must not specify more than one attribute when using refid" 
```

那么，如何在不修改所有引用的文件集的情况下将所有这些文件集放在生成的 zip 中的其他位置（希望不在文件系统中构建单独的树）？

# ios - ios：从应用程序委托访问导航控制器

> ID：14126932
> 
> 赞同：15
> 
> 时间：2013-01-02T18:05:54.767
> 
> 标签：ios, uinavigationcontroller, push-notification, pushviewcontroller, uiapplicationdelegate

我有一个接收推送通知的应用程序。在 didReceiveRemoteNotifications 中，我想让应用程序在应用程序的导航控制器（恰好是根视图控制器）中显示特定的视图控制器。实现这一目标的最佳方法是什么？我可以在应用程序委托中获得对导航控制器的引用吗？

**编辑：**这是我现在尝试使用的代码。它似乎使用了正确的导航控制器，但它根本不显示视图控制器，只是一个空白屏幕：

```
 UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
        EventDetailViewController *destCon = [storyboard instantiateViewControllerWithIdentifier:@"EventDetailViewController"];
        destCon.event=notifyEvent;
        UINavigationController *navController =(UINavigationController *) self.window.rootViewController;
        [navController pushViewController:destCon animated:YES]; 
```

这是我所看到的：

![在此处输入图像描述](../Images/8aee033d58fe5a823bdc8fddbcf53605.png)

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-01-02T19:18:46.040

如果您的导航控制器是窗口的根视图控制器，那么您可以使用

```
(UINavigationController *)self.window.rootViewController 
```

从应用程序委托访问您在情节提要中创建的委托。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-02T19:02:31.577

我使用类似下面的东西对我有用，尝试修改以供您使用

`Stoaryboard`是您的故事板的名称，当您收到通知时，您可以调用您的 rootview`LoginViewController`

确保您在界面生成器中的视图控制器设置为 `yourControllerName`以下示例中的`LoginView`

```
- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo
{

        //replace and push rootview manually
        UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"Storyboard" bundle:nil];
        LoginViewController *ivc = [storyboard instantiateViewControllerWithIdentifier:@"LoginView"];
        UINavigationController *navigationController=[[UINavigationController alloc] initWithRootViewController:ivc];
        self.window.rootViewController =nil;
        self.window.rootViewController = navigationController;
        [self.window makeKeyAndVisible];
} 
```

# ios - UIPageViewController 丢失 UISwipeGestureRecognizer

> ID：14126937
> 
> 赞同：2
> 
> 时间：2013-01-02T18:06:06.640
> 
> 标签：ios, uigesturerecognizer, uipageviewcontroller

我遇到了 UISwipeGestureRecognizer 的问题，它适用于 UIPageViewController 项目的第一页，但不适用于以下所有项目。

该配置基于 Apple 的 PageViewController 示例代码。有问题的 UISwipeGestureRecognizer 已添加到情节提要中，并且 UITapGestureRecognizer 在每个页面上都可以正常工作。

我检查了视图控制器上的目标、选择器、视图是否正确，但找不到任何异常。

是否有人注意到类似的行为并找到了解决方案。

我应该说我尝试以编程方式添加滑动手势识别器，结果相同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T07:32:52.440

我遇到了同样的问题，并找到了两种解决方法。

1.这种方式可以同时识别平移和滑动，这可能是您想要的。这不是我想要的，因为我不希望页面在我向上/向下滑动时改变。对于此方法，您必须使您的类成为滑动手势识别器的代表。

```
-(BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer
{
    return YES;
} 
```

2.这种方式可以防止平移直到它知道滑动失败，这意味着滑动永远不会与平移同时发生。我相信，如果您的滑动是垂直的，这只会对您有用，因为水平的滑动总是会阻止平移。

```
//Cheat to get the pan gesture from the pageviewcontroller. You should iterate and make sure you get the right one.
UIPanGestureRecognizer * panGR = self.pageViewController.gestureRecognizers[0];     

// Add the page view controller's gesture recognizers to the book view controller's view so that the gestures are started more easily.
UISwipeGestureRecognizer * swipeGestureRec = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(openArchive:)];
swipeGestureRec.direction = UISwipeGestureRecognizerDirectionDown;
[panGR requireGestureRecognizerToFail:swipeGestureRec];
[self.view addGestureRecognizer:swipeGestureRec];
swipeGestureRec = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(closeArchive:)];
swipeGestureRec.direction = UISwipeGestureRecognizerDirectionUp;
[panGR requireGestureRecognizerToFail:swipeGestureRec];
[self.view addGestureRecognizer:swipeGestureRec]; 
```

# iphone - DFP 的插页式广告在 ADMob iPhone 5 中未显示全屏

> ID：14126939
> 
> 赞同：0
> 
> 时间：2013-01-02T18:06:13.077
> 
> 标签：iphone, admob, iphone-5, google-dfp, interstitial

我正在使用 Google 的 AdMob SDK 实现插页式广告。广告在 iPhone 4S 及更低机型上显示良好。但是在 iPhone 5 上，由于未正确调整大小，该广告在底部留下了一个空白区域。

广告尺寸为 320x480。根据他们的[文档](https://developers.google.com/mobile-ads-sdk/docs/dfp/advanced)，SDK 将处理在屏幕上正确呈现广告素材。如果我创建尺寸为 320x568 的广告，我会收到错误消息“无广告显示”。

如何在 iPhone 5 上支持全屏广告？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T01:06:48.853

插页式叠加层是全屏的，但通过 DFP 投放的广告素材（可能只是一张图片）不会跨越整个屏幕 - 因此您会在底部看到一些空白区域，这是叠加层的背景。为了让您的广告素材覆盖整个屏幕，您可能需要编写一些可以处理更大屏幕尺寸的 html。

# matlab - 如何使用 svmpredict 在 libsvm 中找到的 matlab 函数

> ID：14126940
> 
> 赞同：0
> 
> 时间：2013-01-02T18:06:12.560
> 
> 标签：matlab, machine-learning, label, svm, libsvm

**我的项目介绍**

我目前在**matlab**中使用 LIBSVM来训练和测试我的数据，以便区分业余摄影师和专业摄影师拍摄的照片/图像。我的数据实际上是 RGB 直方图、Spartial Edge Distribution 和 Repetition Identification 等特征。我使用了 1040 张图像进行训练（50% 是专业照片，50% 是业余照片）和 210 张图像用于测试（未标记）。

**我需要有人帮助澄清以下内容**

1.  [predicted_label, accuracy, decision_values/prob_estimates] = svmpredict(testing_label_vector, testing_instance_matrix, model [, 'libsvm_options']); **执行测试时 testing_label_vector 为任何值（+1 或 -1）是否正确？**

2.  根据文档 [http://www.csie.ntu.edu.tw/~cjlin/papers/libsvm.pdf](http://www.csie.ntu.edu.tw/~cjlin/papers/libsvm.pdf)第 8 页的准确度值给出为准确度 = # 正确预测的数据 / # 总测试数据，**这是否意味着执行测试时我必须知道 testing_label_vector，因为我需要能够判断我的 predict_label 是否与 testing_label_vector 相同，以便将标签证明为“正确预测的数据”？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T21:30:48.683

(1)

是的，它是 -1 和 1 的向量，表示您正在测试的数据的真实标签（training_instance_matrix 上的数据）。

(2)

是的，您需要知道真实标签才能使用 LIBSVM 返回的准确度值。如果不是，您将获得 SVM 分类器的决定（在预测标签中），但准确率返回的值将没有任何用处。

# css - 浏览器重新调整大小问题滑块超出容器

> ID：14126942
> 
> 赞同：0
> 
> 时间：2013-01-02T18:06:27.537
> 
> 标签：css, twitter-bootstrap

当我重新调整浏览器窗口的大小时，滑块离开主容器我正在使用引导响应 css 我看到滑块容器中的额外边距，如果我删除它可以但如果我仍然使窗口更小滑块熄灭如何修复错误...

[http://jsfiddle.net/48y2Q/embedded/result/](http://jsfiddle.net/48y2Q/embedded/result/) http://jsfiddle.net/48y2Q/

在下面提供我的代码

```
<div class="container">

                                <div id="da-slider" class="da-slider" style="margin-top: 0px; margin-bottom: 0px; height: 300px; background-position: 2700% 0%;">
                                  <div class="da-slide da-slide-fromright da-slide-current" style="width: 1122px;">
                                    <h2><img src="http://www.defie.co/docs/examples/frontpage_rotate1A.jpg" alt="image01"></h2>
                                    <div class="da-img"><img src="http://www.defie.co/docs/examples/frontpage_rotate1B.jpg" alt="image01"></div>
                                  </div>
                                  <div class="da-slide da-slide-toleft" style="width: 1122px;">
                                    <h2><img src="http://www.defie.co/docs/examples/frontpage_rotate2A.jpg" alt="image01"></h2>
                                    <div class="da-img"><img src="http://www.defie.co/docs/examples/frontpage_rotate2B.jpg" alt="image01"></div>
                                  </div>
                                  <div class="da-slide da-slide-toleft" style="width: 1122px;">
                                    <h2><img src="http://www.defie.co/docs/examples/frontpage_rotate3A.jpg" alt="image01"></h2>
                                    <div class="da-img"><img src="http://www.defie.co/docs/examples/frontpage_rotate3B.jpg" alt="image01"></div>
                                  </div>
                                  <nav class="da-arrows" style="width: 1122px;">
                                    <span class="da-arrows-prev"></span>
                                    <span class="da-arrows-next"></span>
                                  </nav>
                                <nav class="da-dots"><span class="da-dots-current"></span><span class=""></span><span class=""></span></nav></div>
                                  </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T18:16:15.417

使用默认引导程序的轮播[http://twitter.github.com/bootstrap/javascript.html#carousel](http://twitter.github.com/bootstrap/javascript.html#carousel)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T18:32:59.033

你在很多地方都有固定的宽度，所以它不适合移动布局。改变它：每一个你做过的`style="width: ****px"`地方`style="width: 100%"`。

我试过了，看起来还不错：http: [//jsfiddle.net/48y2Q/1/](http://jsfiddle.net/48y2Q/1/)

# javascript - 焦点事件循环

> ID：14126947
> 
> 赞同：2
> 
> 时间：2013-01-02T18:06:45.463
> 
> 标签：javascript, jquery, safari

我有问题。我正在使用 jQuery 1.8.2。我想对焦点事件做出反应并将焦点重置为在特殊条件下留下的元素。现在我得到了这个非常简单的代码片段，它在 safari 中陷入了一个循环，我不明白为什么会发生这种情况......也许你可以帮助我，这是一个非常简单的例子：

JS：

```
$("#test").focusout( function () {
    alert("FocusOut event got triggered.");
    $("#test").focus();
});​ 
```

HTML：

```
<input type="text" id="test" />​ 
```

也许你想试试这个演示： http: [//jsfiddle.net/ds38v/3/](http://jsfiddle.net/ds38v/3/) 只需点击输入框并再次离开。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T18:14:04.813

关于此问题，存在一些浏览器差异。因此使用超时来“模拟”它，就像“leaveFocus”一样 - 然后再次“focus” - 事件：

```
$("#test").focusout( function () {
    window.setTimeout(function() {
        $("#test").focus();
    },1);
});​ 
```

像这样它正在工作。

我希望它有帮助...

# java-me - 在 J2ME 中使用一个音频文件创建播放器后，是否可以将另一个音频文件传递给同一播放器实例进行播放

> ID：14126948
> 
> 赞同：2
> 
> 时间：2013-01-02T18:06:49.793
> 
> 标签：java-me, mmapi

使用方法创建播放器后，此代码：

```
player = Manager.createPlayer(getClass().getInputStream("/sound.wav"), "audio/x-wav") 
```

是否可以将音频文件传递给同一播放器实例？

我尝试这样做：

```
player = (Player) player.getClass().getInputStream("/sound.wav"); 
```

但这给了我一个例外，那就是`java.lang.ClassCastException`

如果有可能，那么应该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T00:52:05.377

这条线

```
player = (Player) player.getClass().getInputStream("/sound.wav"); 
```

给你 a`ClassCastException`因为你试图将 a`InputStream`转换成 a `Player`。那是错误的。此行*正确地*将 a 分配`Player`给您的`player`变量：

```
player = Manager.createPlayer(getClass().getInputStream("/sound.wav"), "audio/x-wav"); 
```

如果你愿意，你可以在重放声音的时候一次又一次地使用我的第二行。您将只是重新创建播放器。如果您不更改声音文件（.wav），那么当声音播放完毕后，我会再次启动它**而不**创建新播放器：

```
player.start();  // restart the same sound 
```

但是，如果您要更改使用的声音文件，`createPlayer`再次调用可能会更容易：

```
player = Manager.createPlayer(getClass().getInputStream("/another_sound.wav"), "audio/x-wav"); 
```

以下是 Player 上的一些[BlackBerry 文档](http://www.blackberry.com/developers/docs/6.0.0api/javax/microedition/media/Player.html)。即使您可能在不同的 J2ME 平台上，我认为可能适用相同的生命周期规则：

> 玩家有五种状态：未实现、已实现、预取、已启动、已关闭。
> 
> 这些生命周期状态的目的是提供对潜在耗时操作的编程控制。例如，当第一次构建 Player 时，它处于 UNREALIZED 状态。从 UNREALIZED 过渡到 REALIZED，播放器执行必要的通信来定位它运行所需的所有资源（例如与服务器或文件系统通信）。实现方法允许应用程序在适当的时间启动这个潜在的耗时过程。
> 
> 通常，玩家从 UNREALIZED 状态移动到 REALIZED 状态，然后到 PREFETCHED 状态，最后进入 STARTED 状态。
> 
> 播放器在到达媒体末尾时停止；或调用 stop 方法时。发生这种情况时，播放器会从 STARTED 状态移回 PREFETCHED 状态。然后准备好重复该循环。
> 
> 要使用 Player，您必须设置参数以管理其在这些生命周期状态中的移动，然后使用 Player 的状态转换方法在这些状态中移动它。

![在此处输入图像描述](../Images/90796340fbf05fb2435a839554e02450.png)

**更新：**由于您似乎关心代码复杂性，并且可能会*取消分配*（？）对象，[这里有一个代码示例](https://stackoverflow.com/a/479948/119114)，希望能说明它不应该太难。您只需获取该答案中的代码，并使其成为您传递 autio 文件 ( `musicFile`) 名称的方法。

# c++ - 矩阵的平均四分之一

> ID：14126949
> 
> 赞同：2
> 
> 时间：2013-01-02T18:06:52.590
> 
> 标签：c++, c, arrays, cuda

如果我有一个*N×N*二维数组，并且我想将它的每个四分之一平均为相同的数字，如下所示：

```
matrix = [ 1 2 4 6
           6 7 1 1
           9 8 3 6
           4 7 9 2 ] 
```

并在其上应用 cuda 内核后，结果将是：

```
result = [ 4 4 3 3
           4 4 3 3
           7 7 5 5
           7 7 5 5 ] 
```

这如何用 C cuda 内核实现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T18:25:18.763

做这种操作没有什么特别的问题。立即浮现在脑海中的方法是：

1.  标记您希望平均的每个子矩阵
2.  对每个标记区域执行前缀求和，并将结果和转换为均值
3.  用相应的平均值填充每个标记区域。

CUDA 工具包附带的推力模板库包含实现此功能所需的大部分算法。唯一需要的用户代码将是一个标记每个子矩阵的函子，这应该很容易编写。

# swing - 当我为 Swing 组件添加新事件时，如何在 Netbeans 中删除“TODO 在此处添加您的处理代码”行？

> ID：14126951
> 
> 赞同：1
> 
> 时间：2013-01-02T18:07:01.133
> 
> 标签：swing, netbeans

当我为 Swing 表单上的组件添加新事件时，IDE 会放置“ **TODO add your handling code here** ”行。
如何更改该默认值以免 IDE 注释？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T18:10:47.440

这是通过 Netbeans 中的模板完成的。首先单击工具菜单 > 模板。然后在显示的树中，您可以导航到适当的模板。选择您要更改的模板，然后单击“在编辑器中打开”。进行更改并保存。

下次您插入代码时，Netbeans 将使用您修改后的模板。

# asp.net - server.transfer 在应用程序之间

> ID：14126952
> 
> 赞同：1
> 
> 时间：2013-01-02T18:07:07.617
> 
> 标签：asp.net, web-applications, webforms, response.redirect, server.transfer

我在 1 个解决方案下有 3 个应用程序，具有以下结构，

网络解决方案，

*   WebApp > Default.aspx
*   SSOApp > SSO.aspx（仅包含重定向到 Default.aspx）
*   TestApp > Test.aspx 页面

我已将 TestApp 设置为启动项目，现在我需要以下流程。当我单击 Test.aspx 页面中的提交按钮时，它应该转到 SSOApp > SSO.aspx，它又应该重定向到 WebApp 下的 Default.aspx 页面。

如何在应用程序之间传输，我正在尝试使用 Server.Transfer，我不确定应该使用哪个 URL。您能否给我一个可以帮助我在应用程序之间转移的 URL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T18:11:10.173

`Server.Transfer`仅适用于相同的应用程序。您应该使用`Response.Redirect`方法在另一个应用程序中重定向页面。

[为什么我们不能使用 Server.Transfer() 在另一台服务器上重定向](https://stackoverflow.com/questions/1377765/why-we-cant-use-server-transfer-to-redirect-on-another-server)

[Server.Transfer 是否可以跨 AppDomains/Web 应用程序工作？](https://stackoverflow.com/questions/378940/will-server-transfer-work-across-appdomains-web-applications)

假设您在同一个 iis 中有两个应用程序。

前任： `Response.Redirect("http://server/otherapp/default.aspx");`

# ember.js - 远程 AJAX 数据到控制器

> ID：14126956
> 
> 赞同：1
> 
> 时间：2013-01-02T18:07:26.113
> 
> 标签：ember.js

下面的代码可以正常工作，因为我可以`environments`通过`content.dev.name`.

不过，我正在努力通过 AJAX 请求填充这些数据。

我有一个休息 API，它返回如下控制器中的结构。应用加载时需要调用一次。

这是我的工作代码：

控制器

```
App.EnvironmentsController = Ember.Controller.extend();
App.EnvironmentsController.reopenClass({
  find: function(){
    return {dev: {key: 'dev', name: 'Development'}, prod: {key: 'prod', name: 'Production'}};
    return this.content;
  },
});
App.EnvironmentsView = Ember.View.extend({
  templateName: 'environments'
}); 
```

路线

```
...
router.get('applicationController').connectOutlet('environments', App.EnvironmentsController.find());
... 
```

模板

```
 <script type="text/x-handlebars" data-template-name="environments">
    <ul id="env-menu">
      {{#with content}}
        <li>{{dev.name}}</li>
        <li>{{prod.name}}</li>
      {{/with}}
    </ul>
  </script> 
```

这是带有 AJAX 的控制器，我无法将数据通过相同格式传递给模板。

注意：我知道 response.data.environments 本身返回的结构与我上面的手动编码对象相同。

```
App.EnvironmentsController = Ember.Controller.extend();
App.EnvironmentsController.reopenClass({
  environments: {},
  find: function(){
    $.ajax({
      url: 'http://localhost:3000/environments',
      dataType: 'json',
      context: this,
      success: function(response){
        this.environments = response.data.environments;
      }
    });
    return this.environments;
  },
});
App.EnvironmentsView = Ember.View.extend({
  templateName: 'environments'
}); 
```

请注意，当控制器是数组控制器时，我有类似的工作，并且数据作为数组返回。我需要知道如何专门处理对象。

更新：来自问题的更多信息

这是一个小提琴：http: [//jsfiddle.net/coder1/csvZX/](http://jsfiddle.net/coder1/csvZX/)

我对不同的模式持开放态度。我只是想通过控制器获取对象并通过控制器发送它。

这是我开始使用的一个非常棒的教程 ( [http://trek.github.com/](http://trek.github.com/) )，我可以使用数组控制器来完成这项工作，而不是在我使用单个对象时。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T21:17:09.343

我调整了您的[jsfiddle](http://jsfiddle.net/cteegarden/csvZX/19/)，它现在可以正确显示您的数据。

关键是数据由模型而不是控制器处理。我修改了您原来的 jsfiddle 并将数据加载部分分解为一个类，该类负责在`find()`函数中创建自身的实例。这与 Trek 示例的工作方式相同。

新型号代码：

```
App.Environments = Ember.Object.extend({

});
App.Environments.reopenClass({
    find: function() {
        var env = App.Environments.create({});
        console.log("environments find()");
        // simulate an ajax call, hard coding response below
        setTimeout(function() {
            // Fake response
            console.log("fake ajax response");
            console.log(env);
            env.setProperties({
                dev: {
                    key: 'dev',
                    name: 'Development'
                },
                prod: {
                    key: 'prod',
                    name: 'Production'
                }
            });
            console.log(env);
        }, 1000);
        return env;
    }
}); 
```

对谷歌的虚假 ajax 调用不起作用，所以我将其关闭并使用`setTimeout()`调用来模拟 ajax 调用的延迟。

请注意，该`find()`方法创建了一个新`Environments`对象，然后让 fake-ajax 调用用数据填充它。 `find()`立即返回新创建的空`Environments`对象，由控制器和模板访问。该`setProperties()`方法用于以 Ember 的绑定系统可以检测更改并确保它们传播到模板中的方式更新 this 的属性。

唯一的另一件事是更新`connectOutlets`以使用新`Environments`模型和：

```
router.get('applicationController').connectOutlet('environments', App.Environments.find()); 
```

这行代码调用`find()`，它返回新创建的`Environments`对象并将其传递给控制器​​的一个实例，并用视图`EnvironmentsController`填充模板。`{{outlet}}``application``EnvironmentsView`

确保查看有效的[jsfiddle](http://jsfiddle.net/cteegarden/csvZX/19/)示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T19:06:21.143

在我的观察中，您可能犯的错误是：

1.  `this.environments = response.data.environments;`应该使用`set`,`addObject`或者 Ember 的方式。

2.  如果您使用变量`environment`而不是`content`在模板中使用它。

这是一个小提琴[http://jsfiddle.net/csvZX/17/](http://jsfiddle.net/csvZX/17/)

# c - 查找素数的位置

> ID：14126959
> 
> 赞同：13
> 
> 时间：2013-01-02T18:07:42.900
> 
> 标签：c, algorithm, math, primes, sieve

我需要找到第 N 个素数的反向操作，即给定一个素数，我需要找到它在

```
2, 3, 5, 7... 
```

素数可以很大，大约为`10^7`. 此外，还有很多。

我有一个预先计算的素数索引，可以进行二进制搜索，但我也有 50k 的空间限制！可以过筛吗？或者还有什么快速的方法？

**编辑**：非常感谢所有精彩的答案，我没想到他们！我希望它们对寻求相同的其他人有用。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-02T18:32:44.470

你的范围只有一千万，这对于这种东西来说是很小的。我有两个建议：

1) 以方便的间隔创建一个 pi(n) 表，然后使用分段的 Eratosthenes 筛来计算包含所需值的两个表条目之间的素数。间隔的大小决定了所需表的大小和计算结果的速度。

2) 使用勒让德的 phi(x,a) 函数和 Lehmer 的素数计数公式直接计算结果。phi 函数需要一些存储空间，我不确定到底需要多少。

在这两者中，考虑到您的问题规模，我可能会选择第一个替代方案。[我的博客上提供了 Eratosthenes 分段筛法](http://programmingpraxis.com/2010/02/05/segmented-sieve-of-eratosthenes/)和[Lehmer](http://programmingpraxis.com/2011/07/26/more-prime-counting-functions/)素数计数功能的实现。

编辑1：

经过反思，我有第三种选择：

3) 使用对数积分来估计 pi(n)。它是单调递增的，并且在您需要的时间间隔内始终大于 pi(n)。但差异很小，永远不会超过 200。因此，您可以预先计算所有小于 1000 万的值的差异，制作 200 个变化点的表格，然后在需要时计算对数积分并在桌子。或者你可以用黎曼的 R 函数做类似的事情。

第三种选择占用的空间最少，但我怀疑第一种选择所需的空间不会太大，而且筛分可能比计算对数积分更快。所以我会坚持我原来的建议。[在我的博客](http://programmingpraxis.com/2011/07/29/approximating-pi/)中有对数积分和黎曼 R 函数的实现。

编辑2：

正如评论所表明的那样，这并没有很好地工作。请忽略我的第三个建议。

为了弥补我在提出一个不起作用的解决方案时的错误，我编写了一个程序，该程序使用一个 pi(n) 值表和一个分段的 Eratosthenes 筛来计算 n < 10000000 的 pi(n) 值。我'将使用 Python，而不是原始海报要求的 C，因为 Python 更简单，更易于阅读用于教学目的。

我们从计算小于一千万平方根的筛选素数开始；这些素数将用于构建 pi(n) 的值表和执行计算最终答案的筛子。一千万的平方根是 3162.3。我们不想使用 2 作为筛选素数——我们将只筛选奇数，并将 2 视为一种特殊情况——但我们确实希望下一个素数大于平方根，因此筛选素数永远不会耗尽（这会导致错误）。所以我们使用这个非常简单的埃拉托色尼筛法来计算筛分素数：

```
def primes(n):
    b, p, ps = [True] * (n+1), 2, []
    for p in xrange(2, n+1):
        if b[p]:
            ps.append(p)
            for i in xrange(p, n+1, p):
                b[i] = False
    return ps 
```

埃拉托色尼筛分两部分。首先，列出小于目标数的数字，从 2 开始。然后，从第一个未划线的数字开始，重复遍历该列表，并从列表中划掉该数字的所有倍数。最初，2 是第一个未划线的数字，因此划掉 4、6、8、10 等。然后 3 是下一个未划线的数字，因此划掉 6、9、12、15 等。然后 4 作为 2 的倍数被划掉，下一个未划掉的数字是 5，所以划掉 10、15、20、25，以此类推。继续，直到所有未交叉的数字都被考虑在内；未交叉的数字是素数。p 上的循环依次考虑每个数字，如果未交叉，则 i 上的循环将多个数划掉。

该`primes`函数返回一个包含 447 个素数的列表：2、3、5、7、11、13、...、3121、3137、3163。我们从列表中删除 2 并将 446 个筛选素数存储在全局 ps 变量中：

```
ps = primes(3163)[1:] 
```

我们需要的主要函数计算范围内的素数。它使用我们将存储在全局数组中的筛子，以便可以重复使用它，而不是在每次调用 count 函数时重新分配：

```
sieve = [True] * 500 
```

该`count`函数使用分段的 Eratosthenes 筛来计算从 lo 到 hi 范围内的素数（lo 和 hi 都包含在该范围内）。该函数有四个`for`循环：第一个循环清除筛子，最后一个计算素数，另外两个执行筛分，其方式类似于上面显示的简单筛子：

```
def count(lo, hi):
    for i in xrange(500):
        sieve[i] = True
    for p in ps:
        if p*p > hi: break
        q = (lo + p + 1) / -2 % p
        if lo+q+q+1 < p*p: q += p
        for j in xrange(q, 500, p):
            sieve[j] = False
    k = 0
    for i in xrange((hi - lo) // 2):
        if sieve[i]: k += 1
    return k 
```

该函数的核心是`for p in ps`执行筛分的循环，依次获取每个筛分素数 p。当筛选素数的平方大于范围的限制时，循环终止，因为所有素数都将在该点被识别（我们需要下一个大于平方根的素数的原因是为了存在筛选素数停止循环）。神秘变量 q 是 p 在 lo 到 hi 范围内的最小倍数入筛的偏移量（注意不是 p 在范围内的最小倍数，而是 p 在范围内的最小倍数的偏移量的索引范围，这可能会造成混淆）。`if`当该语句引用一个完全平方的数字时，该语句递增 q。然后 j 上的循环从筛子中击出 p 的倍数。

我们`count`以两种方式使用该功能。第一次使用建立一个 pi(n) 值的表，该表是 1000 的倍数；第二种用途在表内插值。我们将表存储在一个全局变量 piTable 中：

```
piTable = [0] * 10000 
```

我们根据原始请求选择参数 1000 和 10000 以将内存使用量保持在 50 KB 以内。（是的，我知道最初的发布者放宽了这个要求。但我们无论如何都可以兑现它。）一万个 32 位整数将占用 40,000 字节的存储空间，从 lo 到 hi 的 1000 范围内筛选只需要 500 个字节存储空间，速度非常快。您可能想尝试其他参数以查看它们如何影响程序的空间和时间使用。构建`piTable`是通过调用`count`函数一万次完成的：

```
for i in xrange(1, 10000):
    piTable[i] = piTable[i-1] + \
        count(1000 * (i-1), 1000 * i) 
```

到目前为止，所有计算都可以在编译时而不是运行时完成。当我在[ideone.com](http://ideone.com/O9ySi8)上进行这些计算时，它们花费了大约 5 秒钟，但那段时间不算在内，因为当程序员第一次编写代码时，它可以永远完成一次。作为一般规则，您应该寻找机会将代码从运行时移动到编译时，以使您的程序运行得非常快。

唯一剩下的就是编写实际计算小于或等于 n 的素数数量的函数：

```
def pi(n):
    if type(n) != int and type(n) != long:
        raise TypeError('must be integer')
    if n < 2: return 0
    if n == 2: return 1
    i = n // 1000
    return piTable[i] + count(1000 * i, n+1) 
```

第一`if`条语句进行类型检查。第二条`if`语句返回对荒谬输入的正确响应。第三条`if`语句专门处理 2；我们的筛分使 1 成为素数，2 成为合数，两者都不正确，因此我们在此处进行修复。然后将 i 计算为小于请求 n 的 piTable 的最大索引，return 语句将 piTable 中的值与 table 值和请求值之间的素数计数相加；hi 限制是 n+1，否则在 n 是素数的情况下，它不会被计算在内。例如，说：

```
print pi(6543223) 
```

将导致数字 447519 显示在终端上。

该`pi`功能非常快。在[ideone.com](http://ideone.com/O9ySi8)，对 pi(n) 的一千次随机调用在大约半秒内被计算出来，因此每个大约是半毫秒；这包括生成素数和求和结果的时间，因此实际计算 pi 函数的时间甚至不到半毫秒。这是我们在建造桌子上的投资的相当不错的回报。

如果您对使用素数编程感兴趣，我已经在我的[博客](http://programmingpraxis.com)上做了很多工作。请前来参观。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-02T18:23:49.677

如果您先验地知道输入是素数，则可以使用近似值 pi(n) ≈ n / log n 和一个小的修正表来查找素数，其中四舍五入的结果不足以获得正确的值n. 我认为这是您在大小限制内的最佳选择，除了缓慢的蛮力方法。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-02T18:32:57.457

我建议在这里使用启发式混合模型。存储每个第 n 个素数，然后通过素数测试进行线性搜索。为了加快速度，您可以使用快速简单的素数测试（例如带有 的 Fermat 测试`a==2`）并预先计算误报。基于输入的最大大小和存储限制的一些微调应该很容易解决。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-02T19:44:02.440

这是一些有效的代码。您应该使用适用于您的输入范围的确定性[Miller-Rabin](http://en.wikipedia.org/wiki/Miller%E2%80%93Rabin_primality_test)测试替换基于试验划分的素数测试。在适当的小范围内筛选素数会比试除法更好，但这是朝着错误方向迈出的一步。

```
#include <stdio.h>
#include <bitset>
using namespace std;

short smallprimes[549]; // about 1100 bytes
char in[19531]; // almost 20k

// Replace me with Miller-Rabin using 2, 7, and 61.
int isprime(int j) {
 if (j<3) return j==2;
 for (int i = 0; i < 549; i++) {
  int p = smallprimes[i];
  if (p*p > j) break;
  if (!(j%p)) return 0;
 }
 return 1;
}

void init() {
 bitset<4000> siv;
 for (int i = 2; i < 64; i++) if (!siv[i])
  for (int j = i+i; j < 4000; j+=i) siv[j] = 1;
 int k = 0;
 for (int i = 3; i < 4000; i+=2) if (!siv[i]) {
  smallprimes[k++] = i;
 }

 for (int a0 = 0; a0 < 10000000; a0 += 512) {
  in[a0/512] = !a0;
  for (int j = a0+1; j < a0+512; j+=2)
   in[a0/512] += isprime(j);
 }
}

int whichprime(int k) {
 if (k==2) return 1;
 int a = k/512;
 int ans = 1 + !a;
 for (int i = 0; i < a; i++) ans += in[i];
 for (int i = a*512+1; i<k; i+=2) ans += isprime(i);
 return ans;
}

int main() {
 int k;
 init();
 while (1 == scanf("%i", &k)) printf("%i\n", whichprime(k));
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-02T20:13:39.707

以下听起来像您正在寻找的内容。[http://www.geekviewpoint.com/java/numbers/index_of_prime](http://www.geekviewpoint.com/java/numbers/index_of_prime)。在那里你会找到代码和单元测试。由于您的列表相对较小（即`10^7`），它应该处理它。

基本上你找到和之间的所有质数`2`，`n`然后计算所有质数小于`n`找到索引。此外，如果`n`不是素数，则函数返回`-1`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-02T18:35:28.443

你的建议是最好的。预先计算（或[下载](http://primes.utm.edu/lists/small/millions/)）小于 10^7 的素数列表，然后对它们进行二进制搜索。

只有 664579 个小于 10^7 的素数，因此该列表将消耗约 2.7 MB 的空间。解决每个实例的二进制搜索将非常快速 - 只需约 20 次操作。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-03T00:26:53.980

我就这样做过一次。写了一段代码，即给定n，可以很快找到第n个素数，最多n=203542528，所以约2e8。或者，它可以倒退，对于任何数字 n，可以知道有多少质数小于 n。

使用数据库。我将所有素数存储到某个点（我的上限的 sqrt）。在您的情况下，这意味着您将所有素数存储到 sqrt(1e7)。其中有 446 个，您可以以压缩形式存储该列表，因为到该点的最大差异仅为 34。超出该点，存储每个第 k 个素数（对于某个 k 值）。然后快速筛子就足够了在很短的时间间隔内生成所有素数。

所以在 MATLAB 中，要找到第 1e7 个素数：

```
nthprime(1e7)
ans =
   179424673 
```

或者，它可以找到小于 1e7 的素数：

```
nthprime(1e7,1)
ans =
      664579 
```

关键是，这样的数据库易于构建和搜索。如果你的数据库可以不超过50k，应该没有问题。

# ruby-on-rails - 迁移后 Rails ActveRecord 无法再找到行

> ID：14126961
> 
> 赞同：0
> 
> 时间：2013-01-02T18:07:53.890
> 
> 标签：ruby-on-rails, activerecord

使用此控制器/视图之前，一切都运行良好且花花公子

```
def testo
  @positions = Positions.find(:all)
  @comments = Comment.find(:all)

  respond_to do |format|
    format.html # new.html.erb
  end
end 
```

查看代码：

```
.navcon.sprite-gear.sprite
  .notifications.ajaxapp
    .na_head NOTIFICATIONS
      - @comments.each do |comment|
        .na_item
          .na_shell 
```

我通过迁移在“评论”表中添加了一列，现在 @comments 变量返回未定义。有趣的是，这些代码都没有改变，数据库中的所有记录仍然存在，（我可以在控制台中使用与控制器中使用的相同命令来获得它们）

```
class AddColumn < ActiveRecord::Migration
  def up
    add_column('comments', 'position', 'text')
  end

  def down
  end
end 
```

可以在这里看到错误：http: [//funjable.com/acc_error.html](http://funjable.com/acc_error.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T23:12:12.013

尝试将您的迁移更改为：

```
def change
   add_column :comments, :position, :text
end 
```

我还建议给您的迁移一个更具描述性的名称（除非您为我们缩短了它，而不是介意:)）

# vba - VBA Countif(s) 语法问题（和/或关于多个条件）

> ID：14126962
> 
> 赞同：1
> 
> 时间：2013-01-02T18:08:00.550
> 
> 标签：vba, syntax, excel, countif

我浏览了 Stackoverflow 论坛（基本上是 Google 上的其他任何地方），并找到了很多“几乎”我的问题的答案，如果我对 VBA 更熟悉一点，这些答案可能就足够了，但我已经搞砸了它有一段时间，一直无法理清。有点沮丧，所以我想是时候问了！抱歉，如果我在解释我的问题时出现措辞等错误！这可能只是我的语法问题。

基本上我需要能够从电子表格中的列中获取数据，并让它对一组特定参数的单元格进行计数（我认为无论如何）。我需要的所有数据都是页面尺寸，格式为“Dimension1 x Dimension 2”，例如“8.5 x 11”

```
Valtest = Application.WorksheetFunction.CountIfs(Range("P:P"), "8.5 x 11") 
```

这个公式，可能相当不足为奇，工作得很好。但我需要 countifs（或任何我需要的东西）也能够给我尺寸 <= 8.5 x <=11 以及翻转尺寸（<=11 x <=8.5）。

我尝试将公式更改为（和类似的）格式

```
Valtest = Application.WorksheetFunction.CountIfs(Range("P:P"), "<=8.5" & " x " & "11") 
```

但这将报告一个尺寸，例如 3 x 4 或 22 x 11。我知道 countifs 可以使用多个参数（这就是为什么我在搞乱它而不是普通的 countif），但我不知道是否输入多个参数甚至是正确的路径，或者是否正确使用了引号或者......谁知道？

我能够使 If-then 语句正常工作（使用数组并使用计数器循环遍历每个单元格），但这显然不是最快的方法。在这里，只是为了让我的目标更清晰一点。

'如果 x(0) <= 8.5 且 x(1) <= 11 或 x(1) <= 8.5 且 x(0) <= 11 则

在一个相关问题中，我还需要能够找到例如 <=11 x <=17 或其他内容的页面，但不包括我之前的问题 (8.5 X 11) 的搜索结果。所以我需要知道多个参数的正确语法，这些参数会涉及到像 <8.5 但小于 >=17 这样的语句。

提前致谢！非常感谢任何帮助。如果我没有充分解释任何事情，请告诉我。

编辑：我将要搜索的数据示例：

```
A                     Count for 8.5 x 11 (expected output)
8.6 x 11              5
8.5 x 11  
8.5 x 11  
8.5 x 11  
8.5 x 11  
8.4 x 11  
22 x 11  
10 x 17 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T19:26:33.790

您可以试试这个 UDF：复制并粘贴到常规 VBA 模块。您分别传递一个范围和小尺寸和大尺寸的下限/上限。

例如：计算所有尺寸，小边在 8 到 10 之间，大边在 12 到 14（含）之间：

```
=CountSizes(A:A,8,10,12,14) 
```

编辑：针对您的 8.5x11 或更小的特定用例

```
=countsizes(A:A, 0, 8.5, 0, 11)  'one side btw 0 and 8.5 & one side btw 0 and 11.5 
```

EDIT3：展示您如何从 VBA 使用它而不是作为 UDF，包括您的第二列

```
Sub Tester()
    With ThisWorkBook.Sheets("Pages")
        'count only where second column has "Color"
        .Range("B1").Value = CountSizes(.Range("A:B"), "Color", 0, 8.5, 0, 11)
    End With
End sub 
```

代码：

```
Function CountSizes(rng As Range, colorType As String, _
                     smallGE, smallLE, largeGE, largeLE)

    Dim tmp, val, v1, v2, small, large, arr, arrVals
    Dim num As Long, r As Long, nr As Long

    num = 0
    arr = rng.Value
    nr = UBound(arr, 1)
    For r = 1 To nr
        val = Trim(arr(r, 1))
        If val Like "*x*" Then
            arrVals = Split(val, "x")
            v1 = Trim(arrVals(0))
            v2 = Trim(arrVals(1))
            If IsNumeric(v1) And IsNumeric(v2) Then
                v1 = CDbl(v1)
                v2 = CDbl(v2)
                If v1 > v2 Then
                    small = v2: large = v1
                Else
                    small = v1: large = v2
                End If

                If small >= smallGE And small <= smallLE And _
                   large >= largeGE And large <= largeLE Then

                    If Trim(arr(r, 2)) = colorType Then
                        num = num + 1
                    End If

                End If

            End If
        End If
    Next r

    CountSizes = num
End Function 
```

# java - 两个相等的组合键不会到达同一个减速器

> ID：14126964
> 
> 赞同：2
> 
> 时间：2013-01-02T18:08:08.267
> 
> 标签：java, hadoop, mapreduce, combiners

我正在使用 MapReduce 框架用 Java 制作一个 Hadoop 应用程序。

我只对输入和输出使用 Text 键和值。在减少到最终输出之前，我使用组合器进行额外的计算步骤。

但我有一个问题，钥匙不去同一个减速器。我在组合器中创建并添加这样的键/值对：

```
public static class Step4Combiner extends Reducer<Text,Text,Text,Text> {
    private static Text key0 = new Text();
    private static Text key1 = new Text();

        public void reduce(Text key, Iterable<Text> values, Context context) throws IOException, InterruptedException {
                key0.set("KeyOne");
                key1.set("KeyTwo");
                context.write(key0, new Text("some value"));
                context.write(key1, new Text("some other value"));
        }

}   

public static class Step4Reducer extends Reducer<Text,Text,Text,Text> {

            public void reduce(Text key, Iterable<Text> values, Context context) throws IOException, InterruptedException {
                System.out.print("Key:" + key.toString() + " Value: ");
                String theOutput = "";
                for (Text val : values) {
                    System.out.print("," + val);
                }
                System.out.print("\n");

                context.write(key, new Text(theOutput));
            }

} 
```

我主要创建这样的工作：

```
Configuration conf = new Configuration();
String[] otherArgs = new GenericOptionsParser(conf, args).getRemainingArgs();

Job job4 = new Job(conf, "Step 4");
job4.setJarByClass(Step4.class);

job4.setMapperClass(Step4.Step4Mapper.class);
job4.setCombinerClass(Step4.Step4Combiner.class);
job4.setReducerClass(Step4.Step4Reducer.class);

job4.setInputFormatClass(TextInputFormat.class);
job4.setOutputKeyClass(Text.class);
job4.setOutputValueClass(Text.class);

FileInputFormat.addInputPath(job4, new Path(outputPath));
FileOutputFormat.setOutputPath(job4, new Path(finalOutputPath));            

System.exit(job4.waitForCompletion(true) ? 0 : 1); 
```

从减速器打印的标准输出中的输出是这样的：

```
Key:KeyOne Value: ,some value
Key:KeyTwo Value: ,some other value
Key:KeyOne Value: ,some value
Key:KeyTwo Value: ,some other value
Key:KeyOne Value: ,some value
Key:KeyTwo Value: ,some other value 
```

这是没有意义的，因为键是相同的，因此它应该是 2 个减速器，它的 Iterable 中有 3 个相同的值

希望你能帮助我深入了解这个:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T21:04:32.747

这很可能是因为您的组合器同时在 map 和 reduce 阶段运行（一个鲜为人知的“功能”）。

基本上，您正在修改组合器中的键，它可能会运行也可能不会运行，因为映射输出在减速器中合并在一起。在运行组合器（reduce 端）之后，通过分组比较器馈送键以确定 Iterable 传递给 reduce 方法的值（我在这里绕过 reduce 阶段的流方面 - 不支持 iterable通过一组值或值列表，如果分组比较器确定当前键和最后一个键相同，则对 iterator().next() 的更多调用返回 true）

您可以尝试通过检查上下文来检测当前的组合器阶段（映射或减少）（有一种`Context.getTaskAttempt().isMap()`方法，但我对此也有一些记忆，甚至可能在某处有关于此的 JIRA 票证）。

最重要的是，不要修改组合器中的密钥，除非*如果*组合器正在运行减少端，您可以找到绕过此行为的方法。

**编辑** 所以调查@Amar的评论，我整理了一些代码（[pastebin链接](http://pastebin.com/PH5TsN6x)），其中添加了一些详细的比较器、组合器、reducer等。如果你运行一个映射作业，那么在reduce阶段没有组合器将运行，并且映射输出不会再次排序，因为它已经被假定为已排序。

假设它是排序的，因为它在被发送到组合器类之前已经排序，并且假设键不会被触及 - 因此仍然是排序的。请记住，组合器旨在组合给定键的值。

因此，使用单个映射和给定的组合器，reducer 会看到 KeyOne、KeyTwo、KeyOne、KeyTwo、KeyOne 顺序中的键。分组比较器看到它们之间的转换，因此您可以调用 6 次 reduce 函数

如果您使用两个映射器，那么化简器知道它有两个已排序的段（每个映射中的一个），因此在归约之前仍需要对它们进行排序 - 但由于段的数量低于阈值，因此排序是作为内联流排序（再次假定段已排序）。使用两个映射器（减少阶段的 10 条记录输出），您仍然是错误的输出。

再说一次，不要修改组合器中的密钥，这不是组合器的用途。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T19:55:45.493

在组合器中试试这个：

```
context.write(new Text("KeyOne"), new Text("some value"));
context.write(new Text("KeyTwo"), new Text("some other value")); 
```

我看到这种事情发生的唯一方法是，如果`key0`没有发现来自一个组合器的组合器与来自另一个组合器的组合器相等`key0`。我不确定在键指向完全相同的实例的情况下它会如何表现（如果您将键设为静态会发生这种情况）。

# c# - 如何将 IsTabStop 用于图像控件？

> ID：14126969
> 
> 赞同：3
> 
> 时间：2013-01-02T18:08:22.587
> 
> 标签：c#, .net, wpf

我有一个带有一些“文本框”和一个“图像”控件的表单。文本框具有“IsTabStop”属性，因此当设置为 true 并且我在键盘上按“tab”时，它会获得焦点。

我希望“图像”控件具有相同的行为，但它没有“IsTabStop”属性。在这种情况下，是否有任何简单的方法可以使“图像”控件的行为类似于文本框？

我希望“图像”具有焦点，因为如果它具有“MouseLeftButtonDown”事件，则该人可以在获得焦点时按键盘上的空格键。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T18:21:38.367

我不知道您要求的目的，但您可能可以使用`Button`显示图像的自定义模板来解决此问题。

```
<Button Width="Auto" Height="Auto">
    <Button.Template>
        <ControlTemplate>
            <Grid>
                <Image Stretch="Uniform" Source="YourPathHere.png" Width="64" Height="64" />
            </Grid>
        </ControlTemplate>
    </Button.Template>
</Button> 
```

现在，该按钮具有`IsTabStop`属性并显示您的图像。希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T20:42:23.960

我已经有一个自定义按钮类，它继承自“按钮”。我的控件管理按钮“内容”并添加图像。我认为这是解决它的关键（管理按钮的内容）。

我只是替换了我的控制并更改了一些个人详细信息，并且它起作用了。

# c# - 确保顺序处理多个 IDisposables

> ID：14126971
> 
> 赞同：2
> 
> 时间：2013-01-02T18:08:32.213
> 
> 标签：c#, system.reactive

我有两个`IDisposables`需要按顺序处理。排序很重要，因为第一个`IDisposable`会杀死依赖于将被第二个杀死的服务的 Rx 订阅`IDisposable`。这是在 Windows 窗体应用程序中，订阅`IObservable`需要发生在不同的线程上，但观察和处置需要发生在 UI 线程上。（实际上，只要确保顺序，我不在乎是否在 UI 线程上进行处理。）因此，在代码中，我大致有以下内容（一旦减少）：

```
SomeService = new DisposableService();
Subscription = Foo(someService).SubscribeOn(NewThreadScheduler.Default).ObserveOn(theForm).Subscribe(...) 
```

在许多 UI 事件中，我需要按顺序处理这两个事件（订阅和 SomeService）。为此`CompositeDisposable`，除了`ContextDisposable`在同一线程上提供串行处理之外，我还尝试使用 Rx：

```
_Disposable = new CompositeDisposable(new[] {                     
    new ContextDisposable(WindowsFormsSynchronizationContext.Current, Subscription),                     
    new ContextDisposable(WindowsFormsSynchronizationContext.Current, SomeService)}); 
```

但是，上述方法不起作用。根据我的日志记录`_Disposable`，`ContextDisposable`for`SomeService`在同一个线程上调用，但`ContextDisposable`仍然发生在与正在处理的服务并发的不同线程上（从而导致竞争条件和 NPE）。

我只用了几个星期的 C# 编程，所以我确信问题在于我对上下文和调度程序如何工作的误解。解决这个问题的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T20:15:03.920

除非我误解了某些东西，否则您可以控制哪个线程处理什么。谁订阅哪个线程并不重要。看这个例子

```
internal class Program
{
    private static void Main(string[] args)
    {
        ReactiveTest rx1 = null;
        ReactiveTest rx2 = null;

        var thread1 = new Thread(() => rx1 = new ReactiveTest());
        var thread2 = new Thread(() => rx2 = new ReactiveTest());

        thread1.Start();
        thread2.Start();

        Thread.Sleep(TimeSpan.FromSeconds(1));

        thread1.Join();
        thread2.Join();

        rx1.Dispose();
        rx2.Dispose();
    }
}

public class ReactiveTest : IDisposable
{
    private IDisposable _timerObservable;

    private object _lock = new object();

    public ReactiveTest()
    {
        _timerObservable = Observable.Interval(TimeSpan.FromMilliseconds(250)).Subscribe(i => 
            Console.WriteLine("[{0}] - {1}", Thread.CurrentThread.ManagedThreadId, i));
    }

    public void Dispose()
    {
        lock (_lock)
        {
            _timerObservable.Dispose();
            Console.WriteLine("[{0}] - DISPOSING", Thread.CurrentThread.ManagedThreadId);
        }
    }
} 
```

这输出

```
[14] - 0
[7] - 0
[15] - 1
[7] - 1
[14] - 2
[15] - 2
[10] - DISPOSING
[10] - DISPOSING 
```

你可以看到我们订阅了两个单独的线程，然后处理了第三个线程。我只锁定了处置，以防您在订阅中需要发生线程安全的事情。在这个例子中，它真的没有必要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-29T14:18:36.487

[SubscribeOn](http://msdn.microsoft.com/en-us/library/system.reactive.linq.observable.subscribeon(v=vs.103).aspx)安排对`Subscribe`和的调用`Dispose`。因此，调用`Dispose`您的*Subscription*变量，无论当前是否在 UI 线程上执行，都会导致订阅被安排为由`NewThreadScheduler.Default`.

`SubscribeOn`使用;几乎从来都不是一个好主意。但是，在您的情况下，您声称它解决了 50% 的问题 - 这比我见过的大多数用途多 50% - 所以我必须质疑您是否真的需要订阅才能在后台线程上执行第一名。与直接在 UI 线程上调用方法相比，如果方法所做的只是开始一些异步工作，例如发送网络请求或读取文件，那么创建一个全新的线程然后在其上调用一个方法是非常昂贵的。也许如果计算要发送的网络消息被证明过于耗时，那么使用`SubscribeOn`可能是正确的；不过，当然，前提是您也希望安排处置。

如果对 observable 的订阅必须在后台线程上执行，但处置必须保持自由线程，那么请考虑使用以下运算符（未经测试）。

```
public static class ObservableExtensions
{
  public static IObservable<TSource> SubscribeOn<TSource>(
    this IObservable<TSource> source,
    bool doNotScheduleDisposal, 
    IScheduler scheduler)
  {
    if (!doNotScheduleDisposal)
    {
      return source.SubscribeOn(scheduler);
    }

    return Observable.Create<TSource>(observer =>
      {
        // Implementation is based on that of the native SubscribeOn operator in Rx
        var s = new SingleAssignmentDisposable();
        var d = new SerialDisposable();
        d.Disposable = s;
        s.Disposable = scheduler.Schedule(() =>
        {
          d.Disposable = source.SubscribeSafe(observer);
        });
        return d;
      });
  }
} 
```

# java - 没有按钮的 JOptionPane

> ID：14126975
> 
> 赞同：17
> 
> 时间：2013-01-02T18:08:51.933
> 
> 标签：java, swing, joptionpane

我需要显示一条需要在屏幕上显示 5 秒的信息消息，在此期间，用户无法关闭对话框。规范清楚地表明对话框不应该有任何按钮。有没有办法以对话框没有按钮的方式使用 JoptionPane.showMessageDialog ？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-01-02T18:18:37.427

使用这种方式怎么样`showOptionDialog`，也许不是`showMessageDialog`，但是当我们没有按钮或输入文本的地方时也是一样的（缺点是它可以被用户关闭）：

![在此处输入图像描述](../Images/b8017eb5e125837ebe3195bb324f33af.png)

```
 JOptionPane.showOptionDialog(null, "Hello","Empty?", JOptionPane.DEFAULT_OPTION,JOptionPane.INFORMATION_MESSAGE, null, new Object[]{}, null); 
```

**更新**

这是另一种方式，它使用`JOptionPane`和`JDialog`（更好，因为它不能被用户关闭）：

![在此处输入图像描述](../Images/143b03896fa5843fd51463b2c0bfeb93.png)

```
final JOptionPane optionPane = new JOptionPane("Hello world", JOptionPane.INFORMATION_MESSAGE, JOptionPane.DEFAULT_OPTION, null, new Object[]{}, null);

final JDialog dialog = new JDialog();
dialog.setTitle("Message");
dialog.setModal(true);

dialog.setContentPane(optionPane);

dialog.setDefaultCloseOperation(JDialog.DO_NOTHING_ON_CLOSE);
dialog.pack();

//create timer to dispose of dialog after 5 seconds
Timer timer = new Timer(5000, new AbstractAction() {
    @Override
    public void actionPerformed(ActionEvent ae) {
        dialog.dispose();
    }
});
timer.setRepeats(false);//the timer should only go off once

//start timer to close JDialog as dialog modal we must start the timer before its visible
timer.start();

dialog.setVisible(true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T18:21:32.400

看起来大卫想出了一些东西来满足你对“无按钮”的要求。

话虽如此，听起来您可能需要澄清您的真正要求。真的需要对话框不可关闭，还是没有按钮可以关闭对话框？JOptionPane 和 JDialog 有一个类似于标准窗口的关闭按钮。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-22T19:38:31.863

我使用上面的一些代码来创建一个“方法”来外部调用。因此，这可以允许多个弹出窗口。我的版本允许更改消息类型、标题、显示时间、屏幕位置、文本，并提供更改文本消息字体和颜色的示例。

```
/*
 * LabelDemo.java contains a method that allow multiple popups. This version allows
 * changing the message type, title, display time, screen placement, text and
 * provides examples of changing the font and color of the text message.
 */ 

package components;

import java.awt.event.ActionEvent;
import javax.swing.AbstractAction;
import javax.swing.JDialog;
import javax.swing.JOptionPane;
import javax.swing.Timer;

/*
 * LabelDemo.java 
 * 
 */
public class LabelDemo {
   public LabelDemo() {
   }

   public static void main(String[] args) {
      TextDisplayPopup("1st popup", "<html><font size=11 color=blue>information type",
            6, 50, 105, JOptionPane.INFORMATION_MESSAGE);
      TextDisplayPopup("2nd popup", "<html><font size=15 color=red>ERROR TYPE\n"
            + "<html><font size=6 color=green>2nd line with long sentence for checking"
            + " popup box dynamic sizing.",
            10, 240, 240, JOptionPane.ERROR_MESSAGE);
   }

   public static void TextDisplayPopup(String strTitle, String strText,
         int iDelayInSeconds, int iX_Location, int iY_Location, int iMessageType) {
      final JOptionPane optionPane = new JOptionPane(strText,
            iMessageType, JOptionPane.DEFAULT_OPTION,
            null, new Object[]{}, null);
      final JDialog dialog = new JDialog();
      dialog.setTitle(strTitle);
      dialog.setModal(false);
      dialog.setContentPane(optionPane);
      dialog.setDefaultCloseOperation(JDialog.DO_NOTHING_ON_CLOSE);
      dialog.pack();
      dialog.setLocation(iX_Location, iY_Location);

      //create timer to dispose of dialog after, iDelayInSeconds, seconds
      Timer timer = new Timer(iDelayInSeconds*1000, new AbstractAction() {
          @Override
          public void actionPerformed(ActionEvent ae) {
              dialog.dispose();
          }
      });
      timer.setRepeats(false);  //  one-time use timer

      //  timer removes dialog after iDelayInSeconds
      timer.start();
      dialog.setVisible(true);
      System.out.println("end of test");
   }
} 
```

输出： [第一个弹出窗口](https://i.stack.imgur.com/rFLlZ.jpg)

[第二个弹出窗口](https://i.stack.imgur.com/hMzxb.jpg)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-02T18:16:35.180

我不认为您可以使用 JOptionPane，因为如果我没记错的话，它们至少总是有一个按钮。但是您可以使用例如这样的启动面板，[或者](http://docs.oracle.com/javase/tutorial/uiswing/misc/splashscreen.html)您可以使用普通面板并在其中运行一个线程。喜欢

```
public class TestFrame extends JFrame implements Runnabel{

   private Thread thread;
   private CallerClass c; //Class which built this frame

   public TestPanel(CallerClass cc){
         this.c = cc;
         this.thread = null;
         //Window can't be closed on (x)
         this.setDefaultCloseOperation(DO_NOTHING_ON_CLOSE); 
         //some things you put into your frame
         //...
         this.setVisible(true);
   }

   public synchronized void start(){
         if (thread == null){
         thread = new Thread(this);
     thread.start();
     }

    @Override
    public void run() {
          try{
              Thread.sleep(5000);
          }catch(InterruptedException e){ }

          this.setVisible(false);
          this.c.destroyFrame();

          this.stop();
     }
 } 
```

其中 destroyFrame() 是您的类中的 e 方法，用于构建此面板以销毁它（将其设置为 null 或其他内容），`SwingUtilities.invokeLater(new TestFrame(this))`如果您不希望其余图形冻结，则必须使用该方法创建此 Frame。

# asp.net-mvc-4 - 我们可以在云上运行另一个应用程序实例吗？

> ID：14126978
> 
> 赞同：0
> 
> 时间：2013-01-02T18:09:01.433
> 
> 标签：asp.net-mvc-4, multiprocessing, cloud-hosting

我们如何在云上运行我们的应用程序的多个实例？

我必须执行一些可能需要很长时间才能执行的任务，所以我想在上下文之外或在另一个实例上执行所有这些任务，以便应用程序可以正常运行而不会影响用户界面。

有没有其他方法可以存档提到的任务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T18:13:33.987

您可以创建另一个专门用于执行该任务的应用程序。但是请注意，在 ASP.NET 应用程序中执行长时间运行的后台任务是不好的设计，应该避免。Phil Haack 写了一篇[`nice article`](http://haacked.com/archive/2011/10/16/the-dangers-of-implementing-recurring-background-tasks-in-asp-net.aspx)关于这个主题的文章。

因此，您可以创建一个 Windows 服务来执行那些长时间运行的任务，或者只是一个控制台应用程序，可以使用 Windows 调度程序安排定期运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T18:14:40.960

查看[Windows Azure](https://www.windowsazure.com/en-us/)辅助角色。它们是基于云的，可以执行[长时间运行的任务](http://blogs.msdn.com/b/morebits/archive/2011/01/01/building-windows-azure-service-part5-worker-role-background-tasks-handler.aspx)。还可以使用 Web 角色来托管 UI

# java - 具有聚合函数的休眠命名查询

> ID：14126980
> 
> 赞同：0
> 
> 时间：2013-01-02T18:09:15.427
> 
> 标签：java, hibernate, named-query

我正在尝试在 Hibernate 中执行命名查询。查询在此映射文件中定义：

```
<?xml version="1.0"?> 
```

```
<class name="MxePosition" table="MY_TABLE">
    <id name="id" column="MY_ID" />
    <property name="quantity" />
    <property name="instrument" />
</class>

<sql-query name="getPositionsForPortfolio">
    <return alias="position" class="com.example.domain.MxePosition"/>
    <![CDATA[
        SELECT 
        SUM(LEG_ONE_NOMINAL) AS {position.quantity}, 
        ID_INSTRUMENT AS {position.instrument} 
        FROM MY_TABLE WHERE SRC_PORTFOLIO= :portfolio GROUP BY ID_INSTRUMENT
    ]]>
</sql-query> 
```

MxePosition 类如下：

```
public class MxePosition {

private Long id;
private String instrument;
private double quantity;

public String getInstrument() {
    return instrument;
}
public void setInstrument(String instrument) {
    this.instrument = instrument;
}
public double getQuantity() {
    return quantity;
}
public void setQuantity(double quantity) {
    this.quantity = quantity;
}
public Long getId() {
    return id;
}
public void setId(Long id) {
    this.id = id;
}
} 
```

我想要做的是让命名查询返回由另一列分组的一列的总和。但是，Hibernate 抛出了一个错误，我怀疑这是因为查询结果不包含 ID 列。

```
18:06:44,728 ERROR JDBCExceptionReporter:101 - Column not found: MY1_1_0_ 
```

有办法解决这个问题吗？在 Hibernate 中必须可以执行包含 GROUP BY 子句的查询，而不在结果中包含 ID。

如果有更好的方法，我愿意接受其他不使用命名查询的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T18:23:03.973

您可以简单地向查询结果集添加一个“随机”ID 并使 Hibernate 高兴，即

```
 SELECT
    MAX(YOUR_ID_COLUMN) AS {position.id}, 
    SUM(LEG_ONE_NOMINAL) AS {position.quantity}, 
    ID_INSTRUMENT AS {position.instrument} 
    FROM MY_TABLE WHERE SRC_PORTFOLIO= :portfolio GROUP BY ID_INSTRUMENT 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T10:02:00.310

实际上，我找到了一个更好的解决方案（就我而言）不适用于所有情况。

将仪器和数量设置为复合键意味着我可以完全摆脱 ID 字段。我将此添加到我的映射 XML

```
 <composite-id>
        <key-property name="portfolio" />
        <key-property name="instrument" />
    </composite-id> 
```

我将留下当时接受的答案（并且我的原始问题中没有投资组合列）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T18:18:35.670

我认为问题在于您的数据库，而不是休眠。我怀疑它不支持将“group by”与别名列一起使用。

你有没有尝试过：

```
FROM MY_TABLE WHERE SRC_PORTFOLIO= :portfolio GROUP BY {position.instrument} 
```

# javascript - 如何覆盖参数的默认值？

> ID：14126981
> 
> 赞同：1
> 
> 时间：2013-01-02T18:09:17.167
> 
> 标签：javascript, node.js, coffeescript

我有以下函数签名：

```
question: (question_id, onComplete, use_redis = true) -> 
```

我假设我可以将`use_redis`参数覆盖为 false，但我尝试过的所有方法都没有奏效。如果我`onComplete`内联定义我的回调，这可能吗？这就是我对函数的调用：

```
Summaryresults.question 1, (summary) ->
    answer_data.summary = summary
    done() 
```

我试过添加`false`几种不同的方法，但没有任何效果。我是否需要在其他地方定义我的回调函数，然后引用它而不是内联定义它以覆盖`use_redis`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T18:20:38.513

应该这样工作：

```
Summaryresults.question 1, (summary) ->
  answer_data.summary = summary
  done()
, false 
```

第一个参数是 id，第二个是你的回调函数，第三个设置 use_redis 为 false

编辑 - 我更改 api 的解决方案：

```
question: (id, options...) ->
  [use_redis, onComplete] = options
  if typeof use_redis is "function"
    onComplete = options
    use_redis = true 
```

调用此函数时，您应该始终将回调作为 LAST 参数：

没有 use_redis 参数：

```
Summaryresults.question 1, (summary) ->
  answer_data.summary = summary
  done() 
```

使用 use_redis 参数：

```
Summaryresults.question 1, false, (summary) ->
  answer_data.summary = summary
  done() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T18:20:40.433

通常，您希望回调成为最后一个参数，否则语法会变得很奇怪。

那么为什么不改变你的 API 呢？

```
question: (question_id, options = {}) ->
  onComplete = options.onComplete
  useRedis = options.useRedis ? true
  # ...

Summaryresults.question 1,
  useRedis: false
  onComplete: ->
    answer_data.summary = summary
    done() 
```

看看这有多少可读性？

* * *

但话虽如此，您可以在正确的位置使用时髦的逗号调用

```
Summaryresults.question 1, (summary) ->
  answer_data.summary = summary
  done()
, false 
```

编译为：

```
Summaryresults.question(1, function(summary) {
  answer_data.summary = summary;
  return done();
}, false); 
```

* * *

也许

```
hollaback = (summary) ->
  answer_data.summary = summary
  done()

Summaryresults.question 1, hollaback, false 
```

# c# - 选项卡被 RichTextBox 错误解释

> ID：14126984
> 
> 赞同：0
> 
> 时间：2013-01-02T18:09:23.397
> 
> 标签：c#, rtf, stringwriter

我有被误解的 RTF。 `StringWriter`接受 a`\t`并将其替换为`RichTextBox`无法在表格中处理的字符。

```
string rtfBeforeConversion = @"{\rtf1{\trowd\cellx1150 \cellx3750 \cellx7350 Temp\intbl\cell 96 - 99.7\t\intbl\cell 97.9\t\intbl\cell \row}}";
string rtfBrokenByConversion = @"{\rtf1{\trowd\cellx1150 \cellx3750 \cellx7350 Temp\intbl\cell 96 - 99.7    \intbl\cell 97.9    \intbl\cell \row}}"; 
```

`rtfBeforeConversion`正确显示 3 列中的数据`RichTextBox`。

`rtfBrokenByConversion`导致第 3 列不显示任何数据（或在其列之外和右侧的数据，具体取决于用于解释 RTF 的 DLL）。

**字符串编写器代码**

```
 using (StringWriter sw = new StringWriter())
            {
                GetRTF(sw);//inserts value of rtfBeforeConversion
                return sw.ToString();//ToString() creates rtfBrokenByConversion
            } 
```

我该如何纠正这个问题？（请注意，我尝试`StringBuilder`并得到了相同的结果）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T21:12:09.603

像其他特殊字符一样`\r, \n,`，`\t`不能在 RTF 内部轻松使用。该字符需要转换为其等效的 RTF。在这种情况下，我创建了一个扩展来清除格式错误的文本：

```
 public static string ConvertTabs(this string poorlyFormedRtf)
    {
        string unicodeTab = "\u0009";
        string result = poorlyFormedRtf.Replace(unicodeTab, "\\tab");
        return result;
    } 
```

现在一切看起来都很棒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T18:23:14.957

您可以通过查看 99.7 之后的字符来识别该特定字符串中的字符，如下所示：

```
string s = @"{\rtf1{\trowd\cellx1150 \cellx3750 \cellx7350 Temp\intbl\cell 96 - 99.7    \intbl\cell 97.9    \intbl\cell \row}}";
char c = s[s.IndexOf("99.7", 0) + 4]; //char you want
int x = (int) c;
string unicodeHexCode = x.ToString("X"); //hex code for char you want 
```

x 将为您提供 unicode 字符的整数值，而 unicodeHexCode 将为您提供十六进制值。

# php - 已弃用：函数 eregi() 已弃用联系表单

> ID：14126990
> 
> 赞同：0
> 
> 时间：2013-01-02T18:09:36.483
> 
> 标签：php

> **可能重复：**
> [如何在 PHP 中将 ereg 表达式转换为 preg？](https://stackoverflow.com/questions/6270004/how-can-i-convert-ereg-expressions-to-preg-in-php)

我有一个我在几个不同网站上使用过的 php 联系表。我正在尝试在新站点上实现相同的站点，但收到以下消息：

已弃用：函数 eregi() 在第 36 行的 /home/content/58/10223058/html/contact-1.php 中已弃用

这是我的代码中的第 36 行：

```
if(!eregi($string_exp,$name)) {
    $error_message .= 'The Name you entered does not appear to be valid.<br />';
  } 
```

我确信有一个简单的解决方法，但我对 PHP 很陌生，不知道如何解决这个问题！

任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T18:12:33.597

1）这只是一个警告。我猜代码仍然有效，尽管有警告。正确的？

2）您可以通过谷歌搜索“不推荐使用eregi（）函数”来修复它。例如：

[http://takien.com/513/how-to-fix-function-eregi-is-deprecated-in-php-5-3-0.php](http://takien.com/513/how-to-fix-function-eregi-is-deprecated-in-php-5-3-0.php)

```
// Old
if(!eregi("^[_\.0-9a-zA-Z-]+@([0-9a-zA-Z][0-9a-zA-Z-]+\.)+[a-zA-Z]{2,6}$", $str)) {
    $msg = 'email is not valid';
}
else {
    $valid = true;
}

// New
if(!preg_match("/^[_\.0-9a-zA-Z-]+@([0-9a-zA-Z][0-9a-zA-Z-]+\.)+[a-zA-Z]{2,6}$/i", $str)) {
    $msg = 'email is not valid';
}
else {
    $valid = true;
} 
```

完整的 PHP 在线文档在这里：

*   [http://php.net/manual/en/index.php](http://php.net/manual/en/index.php)

preg_match() 的“手册页”在这里：

*   [http://php.net/manual/en/function.preg-match.php](http://php.net/manual/en/function.preg-match.php)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T18:14:02.483

在大多数情况下，您可以更换

```
if(!eregi($string_exp,$name)) { 
```

和

```
if(!preg_match('/'.$string_exp.'/i',$name)) { 
```

但并非总是如此 - 您必须检查模式 ( `$string_exp`)。

但是，您可以通过在`eregi()`调用之前将其放在某处来禁用该消息：

```
error_reporting(error_reporting() & ~E_DEPRECATED); 
```

# php - 如何使用 CakePHP 2.2.4 的 Form Helper 设置自定义错误类？

> ID：14126997
> 
> 赞同：1
> 
> 时间：2013-01-02T18:10:16.817
> 
> 标签：php, cakephp, cakephp-2.0

我有一个“特殊”要求。几天前我开始使用**CakePHP 2.2.4 ，现在我正在使用 Form Helper 开发一些小型表单。**

我看到表单助手自动管理错误（太棒了！），但我需要做一些自定义。我知道我可以更改错误的类别（错误消息）并使用例如 a`span`而不是`div`.

但是，如果出现错误，我需要更改输入的类。

```
<?php

echo $this->Form->input('User.email', array(
                                    'label' => array(                                                                       
                                        'class' => 'name-form',
                                        'text'  => 'Email:'
                                    ),                                                              
                                    'div'   => 'field', 
                                    'class' => 'input-xlarge'
                                )
                       );

?> 
```

如您所见，我使用的类名为**input-xlarge**

如果出现错误，我需要更改该类。新类应该是 input-xlarge-error。

此类仅更改输入文本的**边框，将其设置为****red**。

这可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T18:12:12.903

如果出现错误，为什么需要更改输入的类？

您可以使用附加到外部 div 的类来定位输入。

例如

```
div.error input { } 
```

然后，如果出现错误，您可以对输入进行不同的样式设置。

您在视图中只需要：

```
<?php echo $this->Form->create('User'); ?>
<?php echo $this->Form->input('email'); ?>
<?php echo $this->Form->end('Submit'); ?> 
```

这应该为您提供一个简单的示例。提交表单，然后检查元素以查看错误类的添加位置。

你可能会逃脱：

```
.error input { border: red; } 
```

在 CSS

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-18T22:11:10.480

您可以做的是创建自己的 FormHelper 类并覆盖 addClass() 方法：

```
class BootstrapFormHelper extends FormHelper {
    public function addClass($options = array(), $class = null, $key = 'class') {
        if ($class === 'error') {
            $class .= ' has-error';
        }
        return parent::addClass($options, $class, $key);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-29T01:42:03.873

想想你的问题的逻辑：

“如果有错误，我希望 div 的类为 x，否则为 y”。

有几种方法可以做到这一点，如果你需要做的只是根据错误翻转类，那么`FormHelper::isFieldError`就足够了......

```
<?php
echo $this->Form->input('User.email', array(
         'label' => array(                                                                       
             'class' => 'name-form',
             'text'  => 'Email:'
          ),                                                              
          'div'   => 'field', 
          'class' => $this->Form->isFieldError('User.email') ? 'input-xlarge-error' : 'input-xlarge'
));
?> 
```

以上不会阻止“form-error”类被附加到输入中。（解决方案超出了问题的范围）

我回答这个问题的原因是因为我需要在我的输入上专门设置错误类，以便按照我想要的方式使用 bootstrap 3。这也有助于输入类在错误时被擦除。您可能还想查看`FormHelper::input()`我在下面链接的可用选项。对于更复杂的错误控制，有一个`FormHelper::Error`更强大的，你可以在 cakephp 网站上找到这一切......

[http://book.cakephp.org/2.0/en/core-libraries/helpers/form.html](http://book.cakephp.org/2.0/en/core-libraries/helpers/form.html)

# c# - System.Windows.Forms.HtmlDocument 不包含 GetElementByID 的定义

> ID：14126998
> 
> 赞同：0
> 
> 时间：2013-01-02T18:10:28.577
> 
> 标签：c#

你能解释为什么我会收到这个错误吗？

```
 private void startButton_Click(object sender, EventArgs e)
    {
        HtmlElement mainNav = webBrowser1.Document.GetElementByID("home");
            mainNav.InvokeMember("click");
    } 
```

错误 1

```
'System.Windows.Forms.HtmlDocument' does not contain a definition for 'GetElementByID' and no extension method 'GetElementByID' accepting a first argument of type 'System.Windows.Forms.HtmlDocument' could be found (are you missing a using directive or an assembly reference?) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T18:13:15.457

因为它是`GetElementById`, 带有小写的 'd'。

文档位于：http: [//msdn.microsoft.com/en-us/library/system.windows.forms.htmldocument.getelementbyid.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.htmldocument.getelementbyid.aspx)

* * *

旁注：谷歌搜索`system.windows.forms.htmldocument`让我找到了要检查的文档，Intellisense 也应该能够告诉你正确的拼写。不过，我确实意识到有时需要额外的一双眼睛。

# c# - 获取实际 Excel 单元格值而不在 VSTO 中格式化

> ID：14126999
> 
> 赞同：0
> 
> 时间：2013-01-02T18:10:29.383
> 
> 标签：c#, excel, vsto

我正在使用 VSTO 获取 excel 单元格值，当我在单元格中写入 3:00 并尝试从返回 0.125 的代码中获取此值时，有人可以帮助我在没有 excel 格式的情况下获取实际文本值。这是我的代码

```
 Range selectedRange = Target.Application.Selection as Range;
  foreach (Range cell in selectedRange)
        {
            string val = cell.Value2; // 
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T20:36:53.460

评论是对的，你应该总是发布一些代码，但是这个很简单。只需使用`MyCell.Text`而不是`MyCell.Value`