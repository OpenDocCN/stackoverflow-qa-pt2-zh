# StackOverflow 问答 15478000-15478999

# android - eclipse android - 添加引用不再起作用

> ID：15478001
> 
> 赞同：0
> 
> 时间：2013-03-18T13:27:02.693
> 
> 标签：android, eclipse, reference

当我通过引用对话框添加引用时，它会添加引用并在其旁边添加一个绿色复选标记。关闭对话框然后重新打开它后，参考旁边有一个红叉而不是绿色复选标记，我不能再使用这个参考。

奇怪的是，所有其他项目都正常工作。我可以毫无问题地引用项目，但是在这个项目中，我只能引用另一个项目，其他项目不起作用。

**问题**：

谁能指出我可能会产生这种行为的东西？

# batch-file - 当变量有内部空格时，如何调用 concat : %variable% ？

> ID：15478002
> 
> 赞同：7
> 
> 时间：2013-03-18T13:27:08.780
> 
> 标签：batch-file, cmd

我正在尝试使用以下命令在我的类路径中连接变量，但是当文件夹名称包含空格时它不起作用：

```
call concat : %variable% 
```

在哪里`%variable% ={folder name containing space}`

我试着加上引号：

```
call concat : "%variable%" 
```

但这在我的类路径中添加了 2 个双引号，如下所示：

```
""folder name containing space""

:concat
set CLASSPATH=%CLASSPATH%;"%1" 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2016-01-11T08:54:17.413

`SET`在整个语句周围加上引号：

```
SET "FOO=AB C"
SET "BAR=%FOO%D EF"
echo %BAR% 
```

输出：

```
AB CD EF 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-18T15:02:48.117

不要对带有空格的字符串使用额外的双引号。该参数`%~`删除字符串周围的所有双引号对：

```
@echo off &setlocal
set "Variable="my var""
echo Variable:  %Variable%
call :concat %Variable%
goto :eof

:concat
echo concat %%1:    %1
set "NewVar=%~1"
echo concat NewVar: %newvar%
goto :eof
endlocal 
```

输出是：

```
Variable:       "my var" 
concat %1:      "my var" 
concat NewVar:  my var 
```

如果您在字符串周围加上额外的双引号，则会发生以下情况：

```
@echo off &setlocal
set "Variable="my var""
echo Variable:  %Variable%
call :concat "%Variable%"
goto :eof

:concat
echo concat %%1:    %1
set "NewVar=%~1"
echo concat NewVar: %newvar%
goto :eof
endlocal 
```

输出损坏：

```
Variable:       "my var"
concat %1:      ""my
concat NewVar:  "my 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-28T20:57:38.120

从输入中删除双引号，在整个集合周围使用双引号，当使用连接字符串时，用双引号将它们括起来，例如：

```
set root=%~1
@echo off
setlocal EnableDelayedExpansion
set i=0
for %%d in (
1.07 1.023 1.075 1.08 1.04
) do (
   set /A i=i+1
   set scale[!i!]=%%d
)
set i=0
for %%d in (
CO DE MH PL Pr
) do (
   set /A i=i+1
   set port[!i!]=%%d
)
for %%A in (0 1 2 3 4) do (
set "file1=%root%\Event\Events.txt"
set "file2=%root%\Port E\PortE_!port[%%A]!.txt"
set "file3=%root%\Poli E By Port\E_!port[%%A]!.txt"
%0\..\average101v2.exe "!file1!" "!file2!" "!file3!" !scale[%%A]!
) 
```

# c++ - 如何告诉 g++ 编译器在哪里搜索包含文件？

> ID：15478005
> 
> 赞同：26
> 
> 时间：2013-03-18T13:27:13.937
> 
> 标签：c++, include, filesystems

在“工作目录”中，我有很多`#include`相互的 *.cpp 和 *.h 文件以及来自子目录的文件。

例如：

```
#include "first.h"
#include "second.h"
#include "dir1/third.h"
#include "dir2/fourth.h" 
```

在我自己的目录（不同于“工作”目录）中，我想创建一个新的 *.cpp 和 *.h 文件，其中包含“工作”目录中的文件之一。例如：

```
#include "/root/workingdirectory/first.h" 
```

但是，它不起作用。因为“first.h”可能包含“second.h”并且“second.h”不在我的目录中。有没有办法告诉编译器它需要搜索不在当前但在工作目录中的包含文件：`/root/workingdirectory/`？

使其更加复杂，`dir1`并且`dir2`不在我的工作目录中。它们位于`/root/workingdirectory2/`. 所以，我的第二个问题是是否可以通过让编译器知道子目录位于其他地方来解决这个问题？

我还需要补充一点，我不使用任何环境进行开发并从命令行编译（使用`g++`）。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-18T13:35:37.600

正如您已经被告知的那样，[阅读手册](http://gcc.gnu.org/onlinedocs/gcc/)（特别是[本章](http://gcc.gnu.org/onlinedocs/gcc/Preprocessor-Options.html)）很有用，尤其[是在此处](http://gcc.gnu.org/onlinedocs/gcc/Preprocessor-Options.html#index-undef-943)阅读。

具体来说，你想要

```
g++ -I/root/workingdirectory -I/root/workingdirectory2 
```

* * *

另请注意有关`#include`指令语法的文档，[此处](http://gcc.gnu.org/onlinedocs/cpp/Include-Syntax.html#Include-Syntax)描述为：

> ## 2.1 包含语法
> 
> 使用预处理指令包含用户和系统头文件`#include`。它有两种变体：
> 
> ```
> #include <file> 
> ```
> 
> 此变体用于系统头文件。它在系统目录的标准列表中搜索名为 file 的文件。您可以使用 -I 选项将目录添加到此列表中（请参阅调用）。
> 
> ```
> #include "file" 
> ```
> 
> 此变体用于您自己程序的头文件。它首先在包含当前文件的目录中搜索名为 file 的文件，然后在引用目录中搜索，然后在用于`<file>`. 您可以使用 -iquote 选项将目录添加到引用目录列表中。的参数 `#include`，无论是用引号还是尖括号分隔，都表现得像一个字符串常量，因为无法识别注释，也不会扩展宏名称。因此，`#include <x/*y>`指定包含名为 x/*y 的系统头文件。
> 
> 但是，如果文件中出现反斜杠，则它们被视为普通文本字符，而不是转义字符。不处理任何适用于 C 中字符串常量的字符转义序列。因此，`#include "x\n\\y"`指定一个包含三个反斜杠的文件名。（一些系统解释`\`为路径名分隔符。所有这些也以`/`相同的方式解释。仅使用它是最便携的`/`。）
> 
> 如果文件名后面的行中有任何内容（注释除外），则会出现错误。

所以例如

```
#include "first.h" 
```

将*开始*在与包含该指令的 .cpp 文件相同的目录中查找（或采用相对于该目录的相对路径）。

如果您想使用包含路径（由 指定`-I`），您应该使用

```
#include <dir1/third.h> 
```

* * *

通常的做法是使用`#include "local.h"`库/包/模块中的标头表单（但是您已选择组织它），以及`#include <external.h>`来自外部/第 3 方或系统库的标头表单。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-03-18T13:32:23.043

[阅读精美手册](http://gcc.gnu.org/onlinedocs/gcc/Directory-Options.html#Directory-Options)

每个人都可以阅读它。您甚至可以选择使用什么（我会选择第一个）：

```
-Idir 
```

> 将目录 dir 添加到要搜索头文件的目录列表的头部。这可用于覆盖系统头文件，替换您自己的版本，因为这些目录在系统头文件目录之前搜索。但是，您不应使用此选项来添加包含供应商提供的系统头文件的目录（`-isystem`用于此目的）。如果您使用多个`-I`选项，则目录按从左到右的顺序扫描；标准系统目录紧随其后。
> 
> 如果标准系统包含目录或用 指定的目录`-isystem`也用 指定，则忽略`-I`该选项。`-I`该目录仍然被搜索，但作为系统目录在系统包含链中的正常位置。这是为了确保 GCC 修复有缺陷的系统头文件的过程和`include_next`指令的顺序不会被无意更改。如果您确实需要更改系统目录的搜索顺序，请使用`-nostdinc`and/or`-isystem`选项。

```
-iquotedir 
```

> `#include "file"`仅针对;的情况将目录 dir 添加到要搜索头文件的目录列表的头部 他们不被搜索`#include <file>`，否则就像`-I`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-18T13:30:00.713

对于 gcc，它是[header includes](http://www.rapidtables.com/code/linux/gcc/gcc-i.htm)`-I`的选项。对于 .cpp 文件，您只需要将它们作为 gcc 命令的参数出现。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2020-08-09T18:26:58.500

每个 C/C++ 编译器（g++、gcc、MinGW、clang 等）在其根路径中都有一个名为“include”的文件夹，它会自动查找头文件。如果您使用 MinGW，它将位于，例如：“C:\MinGW\include”。只需将标题保存到包含文件夹，如下所示：C:\MinGW\include\header1.h 或 C:\MinGW\include\LibGUI\Window.h

# .net - 简单的用户可配置设置文件

> ID：15478006
> 
> 赞同：0
> 
> 时间：2013-03-18T13:27:24.427
> 
> 标签：.net, c#-4.0

我正在寻找一种允许用户以简单的方式更改 C# 控制台应用程序设置的方法。我只想向他们展示一个键：值对，然后他们可以在其中更改值。

我只能找到解决方案，向用户提供更多信息。可能使他们感到困惑的事情或我不希望他们改变的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T13:35:39.230

```
[Serializable]
public class SettingItem
{
    public string Name { get; set; }
    public string Value { get; set; }
}

private List<SettingItem> ProjSettings = new List<SettingItem>();
ProjSettings.Add(new SettingItem {Name = "SomeKey", "SomeValue"}); 
```

然后，您可以保存/加载到和从 xml 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T13:30:30.993

尝试使用您自己的配置文件，并让用户通过在记事本中打开该文件来更改设置。否则，您可以为它们提供接口。应用程序目录中的 YourAppName.config 之类的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T13:45:49.517

如果您使用的是 applicaiton.exe.config，那么您可以使用与此类似的代码。

在下面的代码示例中 - 您必须相应地进行更改

```
 ArrayList keysArrList = new ArrayList();
            keysArrList.AddRange(hashConfigTable.Keys);
            keysArrList.Sort();
         //Get the application configuration file.
                    System.Configuration.Configuration config =
                                ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel.None);

                    if (filepath.Length > 0)
                    {
                        System.Configuration.ExeConfigurationFileMap configFileMap = new ExeConfigurationFileMap();
                        configFileMap.ExeConfigFilename = filepath;

                        config = ConfigurationManager.OpenMappedExeConfiguration(configFileMap, ConfigurationUserLevel.None);
                    }

                ConfigurationSectionGroup mySectiongrp = config.GetSectionGroup("IF ANY GROUP PRESENT IN CONFIG FILE");
                ConfigurationSection mySection = mySectiongrp.Sections[sFormatClassName];

                foreach (Object okey in keysArrList)
                {
                    XmlNode node = GetNodeAvailable(document, okey.ToString());

                    XmlAttributeCollection attrcoll = node.Attributes;

                    foreach (XmlAttribute attr in attrcoll)
                    {                   
                        if ( String.Equals(attr.Name ,"VALUE",StringComparison.OrdinalIgnoreCase))
                        {
                            XmlComment newComment;
                            newComment = document.CreateComment(string.Format(" Modified by Batch WinConsole Version:{0} on Date:{1} PREVIOUS_VALUE:{2}  By:{3}", m_sFileVersion, DateTime.Now, attr.Value,System.Environment.UserName));

                            XmlElement element = attr.OwnerElement;
                            element.AppendChild(newComment);
                            attr.Value = Convert.ToString(hashConfigTable[okey]);
                        }
                    }
                }

    mySection.SectionInformation.SetRawXml(document.OuterXml);

                //Before save take a backup
                FileSystemUtil fsutil = new FileSystemUtil();
                string sNewfilename=string.Format("{0}_{1}.config",Path.GetFileNameWithoutExtension(filepath), DateTime.Now.ToString("yyyyMMMdd_hhmmss"));
                fsutil.FileCopy(filepath, Path.Combine(Path.GetDirectoryName(filepath), "Backup", "config", sNewfilename));

                //final Save
                config.Save(ConfigurationSaveMode.Full);
                ConfigurationManager.RefreshSection(sFormatClassName); 
```

# jquery - 在最后一个表格单元格中输入值时向表格添加行

> ID：15478010
> 
> 赞同：0
> 
> 时间：2013-03-18T13:27:34.503
> 
> 标签：jquery, dynamic, html-table, append, row

当我在最后一个表格单元格中输入数据时，我想在表格中添加一个新行。

我已经看到这个关于如何通过链接进行操作的[小提琴。](http://jsfiddle.net/yUfhL/)我想改变这一点，以便在最后一个 td 中添加额外的行和 onChange。

因此，使用 jquery 1.7，代码是：

```
<table class="authors-list">
  <tr><td>author's first name</td><td>author's last name</td></tr>
  <tr><td><input type="text" name="first_name" /></td><td><input type="text" name="last_name" /></td></tr>
</table>
<a href="#" title="" class="add-author">Add Author</a>

<script type="text/javascript">
var counter = 1;
jQuery('a.add-author').click(function(event){
    event.preventDefault();
    counter++;
    var newRow = jQuery('<tr><td><input type="text" name="first_name' +
        counter + '"/></td><td><input type="text" name="last_name' +
        counter + '"/></td></tr>');
    jQuery('table.authors-list').append(newRow);
});
</script> 
```

我想更改它以将更改/输入数据的行动态添加到最后一个 TD 中。

就像是，

```
<table class="authors-list">
  <tr><td>author's first name</td><td>author's last name</td></tr>
  <tr><td><input type="text" name="first_name" /></td><td><input type="text" name="last_name" onclick="add-author"/></td></tr>
</table>

<script type="text/javascript">
var counter = 1;
jQuery('a.add-author').click(function(event){
    event.preventDefault();
    counter++;
    var newRow = jQuery('<tr><td><input type="text" name="first_name' +
        counter + '"/></td><td><input type="text" name="last_name' +
        counter + '"/></td></tr>');
    jQuery('table.authors-list').append(newRow);
});
</script> 
```

所以 onclick / onchange 触发 jQuery 添加一个新行，根据计数器值具有唯一的 id。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T13:34:16.517

对输入使用`on`更改事件，以便它也适用于动态添加的行的输入。

试试这个

**更新**

```
var counter = 1;
jQuery("table.authors-list").on('change','input[name^="first_name"]',function(event){
  event.preventDefault();
  counter++;
  var newRow = jQuery('<tr><td><input type="text" name="first_name' +
    counter + '"/></td><td><input type="text" name="last_name' +
    counter + '"/></td><td><a class="deleteRow"> x </a></td></tr>');
  jQuery('table.authors-list').append(newRow);
});

 jQuery("table.authors-list").on('click','.deleteRow',function(event){

   $(this).closest('tr').remove();
 }); 
```

我在`firstname`这里输入更改事件..您可以将其更改为您想要的任何选择器...

**注意：for input change 事件仅在特定输入模糊时触发（当它失去焦点时）**

[小提琴在这里](http://jsfiddle.net/bipen/yUfhL/206/) [更新了小提琴](http://jsfiddle.net/bipen/yUfhL/212/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T13:33:03.500

这样的事情会做到这一点，尽管它会提出一些其他错误，您需要根据您最终想要实现的目标来解决这些错误。

通过触发 keyup 而不是更改，您可以编辑内容而无需添加更多空白行。

[http://jsfiddle.net/yUfhL/209/](http://jsfiddle.net/yUfhL/209/)

```
var counter = 1;
jQuery("table.authors-list").on("keyup", "input[name*='last_name']", function(event){
    event.preventDefault();
    if($(this).val().length == 1) {
    counter++;
    var newRow = jQuery('<tr><td><input type="text" name="first_name' +
        counter + '"/></td><td><input type="text" name="last_name' +
        counter + '"/></td></tr>');

        jQuery('table.authors-list').append(newRow);
    }
}); 
```

# javascript - javascript一个输入字段连接到几个功能

> ID：15478015
> 
> 赞同：0
> 
> 时间：2013-03-18T13:27:53.093
> 
> 标签：javascript, html

我对编程很陌生，并且遇到了一些问题。我想创建一个表单（在 html 和 javascript 中），我可以在其中进行一些计算。这是关于数字和年份的。所以首先我需要输入输入字段，我可以在其中输入年份（如 2013 年）。这个输入值将连接到几个函数：

1.  计算与当年的差异（如果我要求 2018 应该写 5，或者如果我要求 2000 应该写 -13 等等......）
2.  检查年份是否为闰年（真/假或是/否，...）
3.  计算我问的数字的总和（2018 = 11, 2013=6, ...）
4.  如果数字是质数（真/假，是/否，...）
5.  倒数（2013 = 3102, 2018=8102, ...）
6.  显示一年的十二生肖
7.  将年份转换为罗马数字 (1=I, 2=II, 10=X, ...)

我确实找到了一些功能，但我不能把它放在一起。如果有人可以提供帮助，我会非常有帮助。

我在网上找到的例子：

```
function isleap() {
    var yr = document.getElementById("year").value;
    if ((parseInt(yr) % 4) == 0) {
        if (parseInt(yr) % 100 == 0) {
            if (parseInt(yr) % 400 != 0) {
                alert("Not Leap");
                return "false";
            }
            if (parseInt(yr) % 400 == 0) {
                alert("Leap");
                return "true";
            }
        }
        if (parseInt(yr) % 100 != 0) {
            alert("Leap");
            return "true";
        }
    }
    if ((parseInt(yr) % 4) != 0) {
        alert("Not Leap");
        return "false";
    }
} 
```

逆转：

```
<script type="text/javascript">
    var year, b = 0;
    year= parseInt(prompt("Enter year: "));

    document.write("You've entered: " + year+ "<br />");
    while(year> 0) {        
        b = b * 10
        b = b + parseInt(year% 10)
        year= parseInt(year/ 10)
    }
    document.write("Reverse numbers: ", b);

</script> 
```

总和数字：

```
<script>
function find() {
    var sum = 0;
    var no = parseInt(frm.txt1.value);
    while (no > 0) {
        sum = sum + no % 10;
        no = Math.floor(no / 10);
    }
    alert("Sum of digits  " + sum);
}
</script>

<form name="frm">
    Enter a Number:<input name="txt1" type="text" />
    <input name="b1" onClick="find();" type="button" value="display" />
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T13:44:43.670

[分离关注点](http://en.wikipedia.org/wiki/Separation_of_concerns)被认为是最佳实践，我使用 jQuery 作为我的[DOM](http://en.wikipedia.org/wiki/Document_Object_Model)抽象库 - 这真的很容易。

使用这样的输入：

`<input id="b1" name="b1" type="button" value="display" />`

您可以像这样使用[jQuery on 方法](http://api.jquery.com/on/)：

`$('#b1').on('click', function (event) { alert('I was clicked'); });`

`$('#b1').on('click', function (event) { alert('I heard that click too'); });`

您可以调用任何函数：

`$('#b1').on('click', isLeap);`

只是不要忘记在页面上使用此代码段包含 jQuery：

`<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T13:30:15.267

```
 <input name="b1" onClick="function1(),function2()" type="button" value="display" />

     you can call like this

   or
  <input name="b1" onClick="callAllFunctions();" type="button" value="display" />

function callAllFunctions(){
  function1();
  function2();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T13:33:31.903

您可以只创建一个调用其他每个函数的函数，然后将其设置为表单的 onclick 函数。

```
function processData(){
    function1();
    function2();
    function3();

}

<input name="b1" onClick="processData();" type="button" value="display" /> 
```

用 PSR 建议的逗号分隔不同的函数调用也可以，但我认为这个结果更好，因为它使标记保持相对干净，并允许您根据需要更改脚本中的逻辑，而无需直接编辑标记或继续添加根据需要发挥作用。如果需要，您还可以通过这种方式将一个函数的结果直接传递给另一个函数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-18T13:44:11.663

我会用输入参数定义独立于表单的函数。然后，您只需将该参数传递给每个函数并根据需要显示结果。

```
<script type="text/javascript">
function isLeap(yr) {
    if ((parseInt(yr) % 4) == 0) {
        if (parseInt(yr) % 100 == 0) {
            if (parseInt(yr) % 400 != 0) {
                return "false";
            }
            if (parseInt(yr) % 400 == 0) {
                return "true";
            }
        }
        if (parseInt(yr) % 100 != 0) {
            return "true";
        }
    }
    if ((parseInt(yr) % 4) != 0) {
        return "false";
    }
}

function reverse(year) {
    var b = 0;
    year = parseInt(year);
    while (year > 0) {
        b = b * 10
        b = b + parseInt(year % 10)
        year = parseInt(year / 10)
    }
    return b;
}

function sum(no) {
    var sum = 0;
    while (no > 0) {
        sum = sum + no % 10;
        no = Math.floor(no / 10);
    }
    return sum;
}

function outputData() {
    var year = form.year.value;
    alert("Is leap: " + isLeap(year));
    alert("Reversed: " + reverse(year));
    alert("Sum: " + sum(year));
}
</script>

<form name="form">
    Enter a Number:<input name="year" type="text" />
    <input name="b1" onClick="outputData();" type="button" value="display" />
</form> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-18T14:06:59.167

像这样的东西。这只是一个例子...

```
<input type="text" name="year" id="year" value="" />
<input type="button" name="process" value="processYear" id="proc" onclick="process()"/>

<script>
function isLeap(val)
{   
    if (val % 4 ==0 && ((val % 100 ==0 && val % 400 ==0) || (val % 100 !=0)))
    {
        console.log("Leap...");
        return true;
    }
    else
    {
        console.log("Not Leep...");
        return false;
    }
}

function _revers(val)
{
    _val = val+"";
    return _val.split("").reverse().join("");
}

function sum(val)
{
    _val = val+"";
    return _val.split("").reduce(function(previousValue, currentValue){
                return currentValue + parseInt(previousValue);
            })
}

function diff(val)
{
    return (new Date()).getFullYear() - val;
}

function process()
{
    val = parseInt(document.getElementById("year").value)|0;
    isLeap(val);
    console.log('reverse:', _revers(val));
    console.log('sum:', sum(val));
    console.log('diff:', diff(val));
} 
```

# vb.net - 如何验证文本框以仅接受 vb2010 中的电子邮件 ID

> ID：15478024
> 
> 赞同：0
> 
> 时间：2013-03-18T13:28:18.657
> 
> 标签：vb.net, visual-studio-2010

我有一个文本框，用户应该在其中输入他的电子邮件 ID。如何验证它是否只接受电子邮件 ID，如果电子邮件 ID 不包含“@”，我希望显示一个消息框，输入有效的电子邮件 ID

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T13:31:58.157

最好的解决方案是进行双重检查。第一个在客户端使用 JavaScript（请参阅：[JavaScript 正则表达式电子邮件验证](https://stackoverflow.com/questions/940577/javascript-regular-expression-email-validation)），第二个在服务器端使用类似方法（请参阅：[如何使用 VB 编码为 ASP.NET 表单制作验证代码](https://stackoverflow.com/questions/9307850/how-to-make-a-validation-code-for-asp-net-form-with-vb-coding)）。

为什么要两张支票？

*   如果您只有客户端验证，则无法确保用户在将请求发送到服务器之前没有更改内容。用户还可以使用不兼容脚本的浏览器或禁用脚本。

*   如果您只有服务器端验证，则需要等到用户按下导致 postbask 的按钮，然后检查格式是否有效。如果没有，您需要刷新向他提供有关它的信息的页面。这是完全有效的，但不友好，因为用户必须等到他可以看到服务器响应，而且一些控件会丢失书面信息（例如，密码字段）。

下次在问之前尝试做一些研究。这个话题有几个答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T13:30:30.353

```
<asp:TextBox ID="txtEmailID" runat="server"></asp:TextBox>

<asp:RegularExpressionValidator ID="regEmailId" runat="server"
   ControlToValidate="txtEmailID" ErrorMessage="Invalid Email"
   ValidationExpression="\b[A-Z0-9._%+-]+@[A-Z0-9.-]+.[A-Z]{2,4}\b"
   ValidationGroup="Validate"></asp:RegularExpressionValidator>

<asp:Button id="btnEmailValidation" runat="server" ValidationGroup="Validate"
   Text="Validate Email"/> 
```

# php - PHP - 使用重复的元素将值从 XML 字段转换为 HTML 字段？

> ID：15478026
> 
> 赞同：0
> 
> 时间：2013-03-18T13:28:20.197
> 
> 标签：php, html, xml

我有`$xmlstring`带值的 xml 字段；

```
'<result>
  <customerAccount xmlns="http://www.ibm.com>
    <AccountStatus xmlns="">Due</AccountStatus>

    <ComponentCustomerAccount xmlns="">
      <Name>ADSL</Name>
      <CharacteristicValue>
        <Characteristic>
          <Name>Balance</Name>
        </Characteristic>
        <Value>0.0</Value>
      </CharacteristicValue>
      <CharacteristicValue>
        <Characteristic>
          <Name>Date</Name>
        </Characteristic>
        <Value>21.10.1990</Value>
      </CharacteristicValue>
      <AccountStatus>Active</AccountStatus>
    </ComponentCustomerAccount>

    <ComponentCustomerAccount xmlns="">
      <Name>IPTV</Name>
      <CharacteristicValue>
        <Characteristic>
          <Name>Balance</Name>
        </Characteristic>
        <Value>100</Value>
      </CharacteristicValue>
      <CharacteristicValue>
        <Characteristic>
          <Name>Date</Name>
        </Characteristic>
        <Value>21.10.1990</Value>
      </CharacteristicValue>
      <AccountStatus>Active</AccountStatus>
    </ComponentCustomerAccount>

  </customerAccount>
</result>'; 
```

我想在表格内的 HTML 字段中显示：

```
NAME       STATUS     VALUE

ADSL       ACTIVE     0.0
IPTV       ACTIVE     100 
```

如您所见，我有一些重复的元素。ComponentCustomerAccount 重复，我可以有多个元素。我不需要第一个 AccountStatus 元素，但我需要 ComponentCustomerAccount 中的 AccountStatus 元素。我还需要 ComponentCustomerAccount 元素中的第一个元素名称。

```
 $xml = new SimpleXMLElement($xmlString);

    $html = "<table>";
    $html .= "<tr><th>Account Name</th><th>Status</th><th>Amount</th></tr>";
    foreach($xml->customerAccount as $cust) {

     $html .= "<tr><th>" . $cust->Name .
 "</th><th>" . $cust->AccountStatus. "</th><th>" . $cust->Value . "</th></tr>";

    }

    $html .= "</table>"; 
```

但我得到空白输出。我必须改变什么？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T13:35:34.407

您的 XML 在`<customerAccount xmlns="http://www.ibm.com>`. 一旦你解决了这个问题，你需要在循环内部进行迭代`ComponentCustomerAccount`：

```
foreach($xml->customerAccount as $ca) {
    foreach ($ca->ComponentCustomerAccount as $cust) {
        $html .= "<tr><th>" . $cust->Name
        . "</th><th>" . $cust->AccountStatus. "</th><th>"
        . $cust->CharacteristicValue->Value . "</th></tr>";
    }
} 
```

# java - 如何使用 this.sample() - 而不是 this.cursor.getInt()

> ID：15478029
> 
> 赞同：0
> 
> 时间：2013-03-18T13:28:36.783
> 
> 标签：java, android

```
final String query = "SELECT " +
                "questiontable.QuestionID, questiontable.answer0, questiontable.answer1, questiontable.answer2, questiontable.answer3, questiontable.answer4, questiontable.Correct, " +
                " FROM questiontable" +

                " WHERE questiontable.QuestionID IN ( " +
                allQuestionIds +
                " )  ORDER BY questiontable.QuestionID ";
        this.cursor = this.db.rawQuery(query, null);

        if (this.cursor.moveToFirst()) {
            do {
                for (final Question q : questions) {
                    if (q.getQuestionId() == this.cursor.getInt(0)) {
                        q.addAnswer(new Answer(this.cursor.getString(1),
                                this.cursor.getString(2),
                                this.cursor.getString(3),
                                this.cursor.getString(4),
                                this.cursor.getString(5),
                                (this.cursor.getInt(6) == 1 ? true : false)));
                    }
                }
            } while (this.cursor.moveToNext());
        }
        this.cursor.close(); 
```

我想添加**this.sample()**像：

```
 q.addAnswer(new Answer(this.sample(),
                                    this.cursor.getString(1),
                                    this.cursor.getString(2),
                                    this.cursor.getString(3),
                                    this.cursor.getString(4),
                                    this.cursor.getString(5),
                                    (this.cursor.getInt(6) == 1 ? true : false))); 
```

**我想做的事：**

*创建一个 sample() 方法，它将获取我的整数值 (AnswerID)

*AnswerID 将是一个整数值，取 QuestionID (this.cursor.getInt(0)) 的整数值并接近它；一个从 0 到 4 的数字。因此，对于每个 QuestionID，我将有 5 个值（10,11,12,13,14 - 20,21,22,23,24 - ......）

*使用 this.sample()

*我的代码是我想象的（可能完全错误）*

```
 void sample (int AnswerID) {
                            for (int i = 0; i < 5; i++) {
                                 AnswerID = this.cursor.getInt(0) + i ;
                            }
                        this.sample = sample;   

                        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T13:46:13.337

你不能这样做，因为你的方法是无效的。
无效 - 不返回任何东西。

```
void sample (int AnswerID) {
..
} 
```

如果你想计算一些东西，你可以尝试创建返回整数数组列表的方法，并将其作为参数传递给 q.addAnswer 方法。

```
public  ArrayList<Integer>  sample(Cursor cur) {

    ArrayList<Integer> numbers= new ArrayList<Integer>();
    numbers.add(cur.getInt(0));//first test case
    ...
    //numbers is array list of integers
    return numbers;
} 
```

因此，您可以使用整数数组列表。

# android - 使用自定义显示器时出现 ClassCastException

> ID：15478031
> 
> 赞同：0
> 
> 时间：2013-03-18T13:28:39.320
> 
> 标签：android, universal-image-loader

我正在尝试在我的项目中将 UIL 与 gridview 布局一起使用。出于测试目的，我修改了您项目本身的代码。我的要求是在第 0 层显示一个带有原始位图的 TransitionDrawable 作为基础图像，并在第 1 层显示一个刻度线。这是自定义 BitmapDisplayer 代码。

```
public class customBitmapDisplayer implements BitmapDisplayer
{

public static Drawable tick;
Drawable[] layers = new Drawable[2];
TransitionDrawable mytransition;

@Override
public Bitmap display(Bitmap bitmap, ImageView imageView)
{
BitmapDrawable base_image = new BitmapDrawable(imageView.getResources(), bitmap);
layers[0] = base_image;
layers[1] = tick;

mytransition = new TransitionDrawable(layers);
imageView.setImageDrawable(mytransition);
return bitmap;
}

public customBitmapDisplayer(Drawable tick_mark)
{
tick = tick_mark;
}
} 
```

我还稍微修改了 getView。这是代码。

```
if(selected[position])  //selected is a boolean array
{
TransitionDrawable quickTransition = (TransitionDrawable)imageView.getDrawable();
quickTransition.startTransition(0);
} 
```

顺便说一句，我使用的是 UIL 1.8.0，默认 ImageConfiguration，DisplayImageOptions 修改为与自定义 BitmapDisplayer 一起使用，其代码在上面。我在 android 2.3.4 上进行了测试，发现没有问题，但是在 android 4.0.4 上，**我在 getView 方法中得到了一个 ClassCastException，说当我在“选择”每个图像后滚动整个 gridview 时，BitmapDrawable 无法转换为 TransitionDrawable。**

这是堆栈跟踪。

```
03-20 20:46:40.797: E/AndroidRuntime(11943): FATAL EXCEPTION: main
03-20 20:46:40.797: E/AndroidRuntime(11943): java.lang.ClassCastException: android.graphics.drawable.BitmapDrawable cannot be cast to android.graphics.drawable.TransitionDrawable
03-20 20:46:40.797: E/AndroidRuntime(11943):    at com.nostra13.example.universalimageloader.ImageGridActivity$ImageAdapter.getView(ImageGridActivity.java:219)
03-20 20:46:40.797: E/AndroidRuntime(11943):    at android.widget.AbsListView.obtainView(AbsListView.java:2019)
03-20 20:46:40.797: E/AndroidRuntime(11943):    at android.widget.GridView.makeAndAddView(GridView.java:1338)
03-20 20:46:40.797: E/AndroidRuntime(11943):    at android.widget.GridView.makeRow(GridView.java:343)
03-20 20:46:40.797: E/AndroidRuntime(11943):    at android.widget.GridView.fillUp(GridView.java:384)
03-20 20:46:40.797: E/AndroidRuntime(11943):    at android.widget.GridView.fillGap(GridView.java:260)
03-20 20:46:40.797: E/AndroidRuntime(11943):    at android.widget.AbsListView.trackMotionScroll(AbsListView.java:4567)
03-20 20:46:40.797: E/AndroidRuntime(11943):    at android.widget.AbsListView$FlingRunnable.run(AbsListView.java:3834)
03-20 20:46:40.797: E/AndroidRuntime(11943):    at android.os.Handler.handleCallback(Handler.java:605)
03-20 20:46:40.797: E/AndroidRuntime(11943):    at android.os.Handler.dispatchMessage(Handler.java:92)
03-20 20:46:40.797: E/AndroidRuntime(11943):    at android.os.Looper.loop(Looper.java:137)
03-20 20:46:40.797: E/AndroidRuntime(11943):    at android.app.ActivityThread.main(ActivityThread.java:4448)
03-20 20:46:40.797: E/AndroidRuntime(11943):    at java.lang.reflect.Method.invokeNative(Native Method)
03-20 20:46:40.797: E/AndroidRuntime(11943):    at java.lang.reflect.Method.invoke(Method.java:511)
03-20 20:46:40.797: E/AndroidRuntime(11943):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
03-20 20:46:40.797: E/AndroidRuntime(11943):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
03-20 20:46:40.797: E/AndroidRuntime(11943):    at dalvik.system.NativeStart.main(Native Method)
03-20 20:46:44.377: I/Process(11943): Sending signal. PID: 11943 SIG: 9 
```

ImageGridActivity.java 在第 219 行有以下代码。

```
TransitionDrawable quickTransition = (TransitionDrawable)imageView.getDrawable(); 
```

这是我的 getView 代码。

```
@Override
public View getView(int position, View convertView, ViewGroup parent)
{
    final ImageView imageView;
    if (convertView == null)
    {
        imageView = (ImageView) getLayoutInflater().inflate(R.layout.item_grid_image, parent, false);
    }
    else
    {
        imageView = (ImageView) convertView;
    }

    imageLoader.displayImage(imageUrls[position], imageView, options);

    if(selected[position])
    {

        TransitionDrawable quickTransition = (TransitionDrawable)imageView.getDrawable();
        quickTransition.startTransition(0);

    }
    return imageView;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T22:18:31.290

我认为您应该将`getView()`方法更改为以下内容：

```
@Override
public View getView(final int position, View convertView, ViewGroup parent)
{
    final ImageView imageView;
    if (convertView == null) {
        imageView = (ImageView) getLayoutInflater().inflate(R.layout.item_grid_image, parent, false);
    } else {
        imageView = (ImageView) convertView;
    }

    imageLoader.displayImage(imageUrls[position], imageView, options, new SimpleImageLoadingListener() {
            @Override
            public void onLoadingComplete(String imageUri, View view, Bitmap loadedImage) {
                if(selected[position]) {
                    TransitionDrawable quickTransition = (TransitionDrawable)imageView.getDrawable();
                    quickTransition.startTransition(0);
                }
            }
        });
    return imageView;
} 
```

# uri - SIP uri格式的主机名有什么意义

> ID：15478033
> 
> 赞同：0
> 
> 时间：2013-03-18T13:28:43.393
> 
> 标签：uri, sip

我有一个 SIP 呼叫场景

```
 user1@host1.com:5060 is in call with user2@host2.com:5060 
```

现在稍后我们有另一个电话，其中

```
 user3@host1.com:5060 calls up user1@host2.com:5060 
```

可以看出，带有 host1.com 的 user1 是第一次呼叫中的呼叫者，带有 host2.com 的 user1 是第二次呼叫中的被呼叫者。这是否可以将用户名（或唯一的 SIP 电话号码）与 2 个不同的主机相关联。

这是否会创建一个呼叫等待场景，如果是的话，如果用户 1 在听到用户 3 呼叫时的呼叫等待蜂鸣声时没有采取任何行动，那么理想情况下第一次呼叫应该发生什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:51:39.977

SIP 具有“记录地址”的概念，即出现在 From 和 To 标头中的 URI。这些表明你是谁。相反，联系人标题显示您的“位置”——它们表示用户代理的地址。

就协议而言，用户名和域之间没有关系。

在这种情况下，除了可能共享一些基础设施之外，彼此之间没有任何关系`sip:user1@host2.com:5060`。`sip:user2@host2.com:5060`

完全有可能让不同的域拥有同名的用户。（这同样适用于电子邮件地址 -`postmaster@example.com`和`postmaster@example2.com`，例如。）

在上面的示例中，我认为没有理由会出现呼叫等待场景。（您可以*构建*一个设置，其中`host2.com`引用相同的用户代理上的所有用户名，也许是一个仅限 LAN 的设置。在这样的设置中，对任何用户的所有呼叫都`host2.com`将路由到同一个用户代理。如果代理只支持一个呼叫，您可能有呼叫等待场景。）

# powershell - 使用变量启用对 Get 命令的过滤

> ID：15478037
> 
> 赞同：1
> 
> 时间：2013-03-18T13:28:52.157
> 
> 标签：powershell, where-clause

试图制作一个脚本，为我提供一些关于我正在运行的查询的选项。我希望能够不时禁用我的 get-wmiobject 中的“Where {}”过滤器。但是你不能在表达式中使用变量......因此这不起作用::

```
gwmi -class win32_product | $whereEnabled | select name, version 
```

您能否在不创建另一个表达式并使用 if/else 循环的情况下启用/禁用“Where”过滤器？

以下是请求的完整 Get 表达式：

```
get-wmiobject -class win32_product -computer $PC | where {$ignore -notcontains $_.IdentifyingNumber} | Select IdentifyingNumber, Name | sort-object IdentifyingNumber | export-csv -Delimiter `t -NoTypeInformation -Append -encoding "unicode" -path $logfile 
```

$ignore 是一个文本文件，其中包含我们设备上已知的必需应用程序（通过识别编号）。时不时地，我需要获取所有应用程序的列表，并希望“禁用”这部分表达式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T13:47:10.210

我唯一想到的是这样的，这只是一个想法：

```
 [scriptblock]$w = {  $_.caption -match 'micro' }

gwmi -class win32_product | ? $w | select caption 
```

您可以像这样更改脚本块：

```
 [scriptblock]$w = {  $true } #edited after @mjolinor comment 
```

模拟非`where-object`过滤器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T13:55:04.110

`where`将管道部分更改为：

```
where { ($whereEnabled -and $ignore -notcontains $_.IdentifyingNumber) -or !$whereEnabled } 
```

这样你的整个命令看起来像这样：

```
get-wmiobject -class win32_product -computer $PC | where { ($whereEnabled -and $ignore -notcontains $_.IdentifyingNumber) -or !$whereEnabled } | Select IdentifyingNumber, Name | sort-object IdentifyingNumber | export-csv -Delimiter `t -NoTypeInformation -Append -encoding "unicode" -path $logfile 
```

如果`$whereEnabled`为真，它将进​​行检查，否则不会。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T15:55:09.423

您也可以使用过滤器。像这样：

```
filter whereEnabled {
    param($list)

    if ($list -notcontains $_.IdentifyingNumber) {
        $_
    }
}

# If $ignore is already loaded from file
gwmi -class win32_product | whereEnabled $ignore | select name, version

# Or
gwmi -class win32_product | whereEnabled (Get-Content c:\myignorelist.txt) | select name, version 
```

如果文件为空/`$ignore`为空，则不会过滤掉任何内容。

# jquery - jQuery 就绪块内部定义的函数和外部定义的函数有什么区别

> ID：15478041
> 
> 赞同：0
> 
> 时间：2013-03-18T13:29:10.680
> 
> 标签：jquery, function

我将一个函数注册到一个带有 onclick 属性的按钮，并在 $() 块中定义了这个函数（我知道这是一个不好的做法，这只是一个例子），当我点击按钮时，出现错误：未捕获的 ReferenceError：你好没有定义。这是我的代码：

```
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script type="text/javascript">
$(function(){
    function hello(){
        alert('hello');
    }
});
</script>
</head>
<body>
<input type="button" id="btn" value="click" onclick="hello()"/>
</body> 
```

如果我把 hello 函数代码放在 $() 块之外，它就可以工作。我知道在解析DOM的时候会执行$()，当我点击按钮时，DOM肯定已经被解析过了，为什么会报错呢？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T13:30:47.963

您的代码假定 hello 是一个全局函数，但它不是。

```
$(function(){
    function hello(){
        alert('hello');
    }
    $("#btn").click(hello);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T13:30:36.437

没有区别，除了在块内*执行*（未定义）的函数`$.ready`保证在 DOM 准备好被访问/操作之后执行。

您的问题是范围界定之一；您创建了一个在处理事件的全局范围内无法访问的本地函数。

# gwt - 为什么 GWT 在生产模式下删除客户端日志记录？

> ID：15478042
> 
> 赞同：0
> 
> 时间：2013-03-18T13:29:20.623
> 
> 标签：gwt, logging

我已经按照客户端日志记录的 GWT 文档，并让它在开发模式下正常工作。我有它启用`ConsoleHandler`,`FirebugHandler`和`RemoteHandler`. `RemoteHandler`工作正常；我已经添加了`RemoteLoggingServlet`它，它在开发模式下也可以正常工作。

这是我的 *.gwt.xml 的相关摘录：

```
<inherits name="com.google.gwt.logging.Logging"/>

<set-property name="gwt.logging.logLevel" value="ALL"/>
<set-property name="gwt.logging.enabled" value="TRUE"/> 
<set-property name="gwt.logging.popupHandler" value="DISABLED" />
<set-property name="gwt.logging.simpleRemoteHandler" value="ENABLED" />
<set-property name="gwt.logging.consoleHandler" value="ENABLED" />
<set-property name="gwt.logging.firebugHandler" value="ENABLED" />
<set-property name="gwt.logging.developmentModeHandler" value="DISABLED" /> 
```

我的客户代码这样做：

```
Logger logger = Logger.getLogger("");
logger.log(Level.ALL, "Hey log this message"); 
```

没有任何日志记录在生产模式下工作。我想念的地方有设置吗？

# c++ - 如何判断文件是否被修改？

> ID：15478046
> 
> 赞同：7
> 
> 时间：2013-03-18T13:29:29.260
> 
> 标签：c++, file, cross-platform, last-modified

我想实现某些文件的实时重新加载。我假设有可能以某种方式读取文件的最后修改时间。这可以与我上次加载该文件的时间进行比较。我会把后者留在记忆中。

如何确定文件自给定时间以来是否被修改？该解决方案应该适用于 Windows、Mac 和 Linux。

更新：似乎我的问题引起了一些误解。为了清楚起见，我想知道是否总体上修改了文件。使用最后修改的时间正是我首先想到的，但我对任何其他解决方案持开放态度！不幸的是，我无法打开每个文件并比较其内容，因为我们谈论的是视频游戏的所有纹理。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T13:33:46.400

看看[Boost.FileSystem](http://www.boost.org/doc/libs/1_53_0/libs/filesystem/doc/index.htm)，`std::time_t last_write_time(const path&)`. 免责声明：我不确定这个概念的便携性如何

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T13:35:35.573

文件系统问题通常取决于操作系统。每个操作系统都有系统调用和/或库函数来访问这些信息。在 Windows 上有`GetFileTime`-function，Unix/Linux 提供`stat`，它也应该适用于 Mac。也许 Java 提供了一些东西，但是仅使用标准库很难实现其他任何东西。谷歌是你最好的朋友。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-18T13:44:13.790

QFileInfo 类提供与系统无关的文件信息。

```
QDateTime QFileInfo::lastModified () const 
```

返回上次修改文件的日期和时间。

应该是相当可移植的，因为这就是 Qt 的全部想法。正式支持 Windows、MacOS 和 Linux。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T13:32:29.010

使用`stat`或`fstat`系统调用。它们产生一个`struct stat`包含修改时间的结构`st_atimespec`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-11T00:16:56.617

另一种解决方案是在 Linux 上使用 inotify，或者如果你在 Windows 上，这可能会有所帮助吗？

[Windows上有类似inotify的东西吗？](https://stackoverflow.com/questions/3517460/is-there-anything-like-inotify-on-windows)

# magento - 如何使用 M2E 扩展设置 Cron 以在 Magento 中运行？

> ID：15478048
> 
> 赞同：0
> 
> 时间：2013-03-18T13:29:39.163
> 
> 标签：magento, cron, magento-1.7

我在配置 Magneto Cron 运行时遇到问题。我正在使用 M2E Pro 扩展，并希望将其设置为每 5 分钟运行一次，但尝试在 Magento 中配置正确的设置后，我收到以下警告：

最后一次心跳超过一小时。请检查您的设置和配置！

我正在使用 Ubuntu 服务器，并且可以在如何设置 cron 以在 Magento 中运行方面提供一些帮助。我找不到任何文档可以确切地告诉我如何执行此操作。

如果有人可以分享一些知识，我将非常感激......

# android - Heimdall 无法检测到三星 Galaxy Tab P1000？

> ID：15478053
> 
> 赞同：1
> 
> 时间：2013-03-18T13:29:54.650
> 
> 标签：android, development-environment

我正在尝试在 Linux 中使用 Heimdall 命令刷新三星 Galaxy Tab P1000。

问题：

```
sudo heimdall detect 
```

命令不支持检测设备，但检测到设备是因为

```
sudo heimdall print-pit 
```

命令正在工作并重新启动设备...但我无法对其进行闪存。

请帮忙，

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-06T11:12:46.777

Heimdall 中的设备检测：

1.  首先，进入下载模式：在三星 Galaxy TAB 关闭的情况下，按住降低音量按钮，然后短按电源按钮。

2.  将连接电缆插入您的设备和 USB。

3.  只有在那之后，Heimdall 才会检测到您的设备，如果它是可检测的:)

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-14T15:28:23.960

您现在可以在[Lineage OS wiki](https://wiki.lineageos.org/devices/n5110/install)上找到一些重要信息。然后他们建议使用 heimdall 安装[twrp](https://twrp.me/Devices/)以使用新操作系统刷新您的平板电脑。

三星设备带有一种称为“下载模式”的独特启动模式，这与某些具有解锁引导加载程序的设备上的“快速启动模式”非常相似。

1.  下载并安装[Heimdall 套件](http://glassechidna.com.au/heimdall/#downloads)：

    *   **Linux**：为您的发行版选择合适的软件包进行安装。`-frontend`本指南不需要这些软件包。`heimdall version`安装后，通过在终端中运行验​​证 Heimdall 是否已安装。
2.  关闭设备并将 USB 适配器连接到计算机（但尚未连接到设备）。

3.  启动进入下载模式：

    *   在设备关闭的情况下，按住`Volume Down`+ `Power`。
4.  在计算机上，打开一个终端并输入：

    ```
    heimdall print-pit 
    ```

5.  如果设备重新启动，则说明 Heimdall 已安装并正常工作。

# .net - 使用 AppDomain 中的 app.config 文件而不是 Root 文件夹

> ID：15478056
> 
> 赞同：0
> 
> 时间：2013-03-18T13:30:06.427
> 
> 标签：.net, connection-string, app-config, settings.settings

我正在创建一个 WPF 应用程序，它读取在运行时在 AppDomain 中创建的 ConnectionString。在我开始使用 DataSet 之前，它运行良好，因为它们指向我的应用程序根目录中的默认 app.config 文件。

当我第一次加载应用程序时，connString 被保存为变量供以后使用。我的第一个直觉是使用该变量进行连接。因为这意味着更少的 IO 读写，从而使系统更快。我能够更改连接字符串，但在某个地方我需要启动并且不知道在哪里。

现在我想弄清楚，如何让数据集（或设置）文件读取位于 AppDomain 中的 app.config 而不是位于我的应用程序根文件夹中的默认文件。

仅供参考，我创建了一个以商业数据为中心的应用程序。连接字符串根据每个公司的内部配置而变化，因此需要有一个可变的连接字符串。我又做了一次。

我的主要目标是将数据集中在变量或单个文件中，因为这样可以减少以后的麻烦。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T18:10:51.173

基本上我能够解决问题：

如果您想知道问题到底是什么：我不希望代码读取 app.config 文件来检索 ConnectionString。由于我启动系统的时候，我读过一次，通过使用系统继续读下去是没有意义的。

顺便说一句，这是带有 SQL SERVER 2012 DB 的 WPF 应用程序。

所以这就是它的完成方式：

第 1 步：转到设置（项目 > 设置）并创建一个名为 DBConnString 的新项目（选择 ConnectionString 作为类型，选择应用程序作为范围）。并输入一些默认的 ConnectionString。输入的字符串必须是真实的，因为数据集将在设计时读取它。

第 2 步：在设置页面上按 F7 以查看背后的代码。输入此代码：

```
Partial Friend NotInheritable Class MySettings

Private Sub MySettings_SettingsLoaded(sender As Object, e As System.Configuration.SettingsLoadedEventArgs) Handles Me.SettingsLoaded
    Me.Item("DBConnString") = ConnStringVariable
End Sub End Class 
```

每当您的项目的任何部分想要访问 Settings 类时，此代码都会在 Loaded Event 处启动。这意味着在任何人都可以读取默认连接字符串之前，它将被更改。如果您是新手，请将 ConnStringVariable 替换为您的实际变量。

第 3 步：创建一个 Dataset 和 DataTable，当要求连接时，您将看到一个新选项：DBConnString (MySettings)。选择那个。

请记住，在设计时，DataTables 将使用您手动编写的默认 ConnString，但在运行时，Settings.vb（或 cs）类将开始用变量替换默认值。

这个简单的技巧将允许您使用 ConnectionString 变量在整个项目中重复使用，而不必在每次尝试连接到数据库时访问磁盘！

# c++ - 图形时间线创建用于分析多线程 C++ 程序的软件 API

> ID：15478069
> 
> 赞同：6
> 
> 时间：2013-03-18T13:30:41.690
> 
> 标签：c++, multithreading, profiling

我正在构建一个高性能的多线程程序。一些函数的持续时间和执行的重叠非常重要，我希望以某种方式生成一种可视时间线图，显示函数开始的时间及其持续时间。我希望得到类似于 NVIDIA 分析器图表的东西。使用这个`boost::chrono`包我已经收集了时间线，但找不到任何软件或 API 来绘制它们。有人知道吗？

问候

丹尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T19:35:24.853

看看[kcachegrind](http://kcachegrind.sourceforge.net/html/Home.html)，我认为它可以满足您的需求。这里有一些[截图](http://kcachegrind.sourceforge.net/html/Screenshots.html)。

如果您不想使用 callgrind 并且希望自己生成图表，请考虑使用[Graphviz](http://www.graphviz.org/)。使用 graphviz 生成图形所需要做的就是以简单的文本格式创建图形描述。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-21T02:42:03.833

如果您有“Microsoft Visual Studio 2012 Professional（或更高版本）”并在 Windows 上运行程序，[Concurrency Visualizer](http://msdn.microsoft.com/en-us/library/dd537632.aspx)可能会很有用。该工具甚至可以在时间轴上对 C++ 应用程序的线程/cpu 利用率进行分析和可视化。

另请参阅[MSDN 博客](http://blogs.msdn.com/b/visualizeparallel/archive/2011/09/19/how-can-visual-studio-11-developer-preview-visualize-the-behavior-of-a-multithreaded-application.aspx)。

# python - 在 Tkinter 中等待按键

> ID：15478072
> 
> 赞同：0
> 
> 时间：2013-03-18T13:30:42.677
> 
> 标签：python, tkinter

**问题**

我正在为一个简单的秒表编写代码。在每三个运行之后，框架被清除并且在同一个窗口中开始一个新的会话。时间被写入文件。但在清除屏幕之前，我希望用户查看所用时间，然后清除屏幕。

**目标**

等待按键，以便我们可以销毁框架并在此之后打印一些新文本。

**我检查了什么**

[http://www.daniweb.com/software-development/python/code/216830/tkinter-keypress-event-python](http://www.daniweb.com/software-development/python/code/216830/tkinter-keypress-event-python)

这不是很有帮助，因为正在打印密钥。

**条件**

我不在乎关键是什么，除非它是以下一些东西：

`['e','s','r']`

如果按下的键不在这些键上，那么我可以继续清除屏幕。这些密钥被用于程序中的一些其他特定目的。

**请**帮我解决这个问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-18T13:35:56.187

您需要在`"<Key>"`.

```
def handler(event):
    if event.char in ('e','s','r'):
       return #Don't want to handle this keypress
    #code to clear-screen, etc.

your_frame.bind('<Key>',handler) 
```

根据您的应用程序，您可以选择使用：

```
your_frame.bind_all('<Key>',handler) 
```

[参考](http://www.pythonware.com/library/tkinter/introduction/events-and-bindings.htm)

# spring - 如果 ActiveMQ 中的 onMessage 正在处理某个（长时间）时间，则中止它

> ID：15478073
> 
> 赞同：0
> 
> 时间：2013-03-18T13:30:44.960
> 
> 标签：spring, activemq, spring-jms

我在 Spring 项目中有一个 ActiveMQ 消费者，其定义方式如下：

```
<jms:listener-container container-type="default"
    cache="consumer" destination-type="queue" connection-factory="pooledJmsConnectionFactory"
    acknowledge="auto" concurrency="1-1">
    <jms:listener destination="GIVE_A_NAME_QUEUE"
        ref="someLongWorkerConsumer" method="onMessage" />
</jms:listener-container> 
```

一切正常，当我在队列中收到一条消息时，将访问 onMessage 方法，并且正在使用来自队列中提供的项目的数据执行工作。

现在，因为我正在执行一些长时间运行的操作，在某些情况下，例如，如果作业运行超过 X 小时 - 我希望中止操作并提取队列中的下一个项目并且处理。

这个或任何可取的解决方案是否有一些开箱即用的功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T14:00:43.170

ActiveMQ 中没有内置的功能来管理这种作业处理。它实际上并不属于 JMS API 的职责范围。您可以改用它们的同步接收方法并在您自己的应用程序中管理它或将消息委托给某个作业管理器。

# c# - 我想完全关闭登录表单并显示主控制面板..？

> ID：15478076
> 
> 赞同：-2
> 
> 时间：2013-03-18T13:30:48.303
> 
> 标签：c#

```
private void btn_Login_Click(object sender, EventArgs e)
{
    ManageMent.login_check(txtUserName.Text, txtPassword.Text);

    if (ManageMent.Login_Check!=false)
    {
        Control_Center control_panel = new Control_Center();

        control_panel.Show();

        this.Hide();
    }
} 
```

我在我的登录按钮后面使用这些代码，但这会将主登录表单隐藏在某个地方，当我关闭控制面板时它仍然在后面运行，我想在身份验证成功后立即关闭它..我试过这个。关（）; 但它限制控制面板打开

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T13:52:54.367

我认为您应该使用`Control_Center`

```
Application.Run(new Control_Center()); 
```

在显示您的 control_center 表单之前，您应该[创建](http://msdn.microsoft.com/en-us/library/c7ykbedk.aspx)一个 LoginForm。例如，您可以在加载表单时执行此操作。

```
public partial class Control_Center: Form
{
    public Control_Center()
    {
        InitializeComponent();
    }

    private void Control_Center_Load(object sender, EventArgs e)
    {
        LoginForm loginForm = new LoginForm();
        var authorizationResult = loginForm .ShowDialog();
        if (authorizationResult  != System.Windows.Forms.DialogResult.OK)
        {
            this.Close();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T13:50:47.313

您还有更多选择......

实际上我认为你的登录表单作为主线程运行，所以关闭它不会让你在其中使用另一个表单，我的意思是主线程，所以诀窍是使用简单的线程......

```
if (ManageMent.Login_Check!=false)
    {
            new System.Threading.Thread(new System.Threading.ThreadStart(()=>{
                Application.Run(new Control_Center());
            })).Start();

            this.Dispose();
} 
```

如果您只想最后关闭所有表单，我的意思是开玩笑，那么

```
 if (ManageMent.Login_Check!=false)
        {
          this.Hide();
          Control_Center control_panel = new Control_Center();
          control_panel.ShowDialog(this);
          this.Close();
        } 
```

# java - 如何制作固定的 XML 布局？

> ID：15478079
> 
> 赞同：0
> 
> 时间：2013-03-18T13:30:51.730
> 
> 标签：java, android, xml

我有两种布局。实际上 5、3 个垂直一个在另一个下方，在中间一个我有 2 个并排的布局。我需要它们固定大小，所以它们确实会改变。但只要我在其中一个按钮上放置一个按钮，它们就会改变大小，如下图所示。如何让他们不改变？无论如何，这是我的代码和图片。

![布局一](../Images/fe98ecd324864e6b75cc0c24aab56e7e.png) ![布局二](../Images/d6ef9b2934da002e257f591281bb5c22.png)

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:weightSum="20" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:layout_weight="3" >
    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="15"
        android:orientation="horizontal" >

        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:orientation="vertical"
            android:layout_weight="1" >
        </LinearLayout>

        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:orientation="vertical"
            android:layout_weight="1" >
        </LinearLayout>

    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:layout_weight="2" >
    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T13:43:42.790

尝试将两个内部布局更改为：

**选项＃1**：这将水平固定布局，而不是垂直

```
<LinearLayout
    android:layout_width="0dp"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:layout_weight="50" >
</LinearLayout>

<LinearLayout
    android:layout_width="0dp"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:layout_weight="50" >
 </LinearLayout> 
```

**选项#2**：这将修复两个方向的布局

`LinearLayouts`使用嵌套权重非常低效。相反，将您的根视图更改为 a`RelativeLayout`并摆脱权重。*请注意，这不是一个 100% 完整的解决方案，但它肯定会让您入门。*这会将第一个`LinearLayout`放在布局的顶部，最后一个`LinearLayout`放在布局的底部。中间的将始终位于顶视图下方和底视图下方。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <LinearLayout android:id="@+id/top"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:orientation="vertical">
    </LinearLayout>

    <LinearLayout android:id="@+id/middle"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/top"
        android:layout_above="@+id/bottom"
        android:orientation="horizontal" >

        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:orientation="vertical"
            android:layout_weight="1" >
        </LinearLayout>

        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:orientation="vertical">
        </LinearLayout>

    </LinearLayout>

    <LinearLayout android:id="@+id/bottom"
        android:layout_alignParentBottom="true"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical">
    </LinearLayout>
</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T14:08:46.473

尝试将 layout_weight 更改为中间线性布局的两个子线性布局的 0.5。

# jquery-ui - 生成多个服务器端请求的数据表

> ID：15478081
> 
> 赞同：1
> 
> 时间：2013-03-18T13:31:04.160
> 
> 标签：jquery-ui, jquery, jquery-plugins, datatables

我正在使用启用了服务器端处理的[dataTable jquery 插件。](http://www.datatables.net/)使用`fnReloadAjax`函数时，隐藏处理 div 和显示新数据之间有 2-3 秒的延迟。这是关于这个问题的[帖子。](https://stackoverflow.com/q/14009561/456135)我发现这是由于数据表发出的多个服务器请求。

在我的一组单选按钮的页面`onchange`事件中，正在调用服务器以获取新数据，如下所示

```
oTable.fnReloadAjax("getCaseList?caseStatus=xxx&showValidOnly=true"); 
```

在萤火虫控制台中，我看到一个接一个地发出两个请求

1.  `GET https://localhost/getCaseList?caseStatus=xxx&showValidOnly=true&_=1363611652185`
2.  `GET https://localhost/getCaseList?caseStatus=xxx&showValidOnly=true&sEcho=4&iColumns=9&sColumns=&iDisplayStart=0&iDisplayLength=100&sSearch=&bRegex=false&sSearch_0=&bRegex_0=false&bSearchable_0=true&sSearch_1=&bRegex_1=false&bSearchable_1=true&sSearch_2=&bRegex_2=false&bSearchable_2=true&sSearch_3=&bRegex_3=false&bSearchable_3=true&sSearch_4=&bRegex_4=false&bSearchable_4=true&sSearch_5=&bRegex_5=false&bSearchable_5=true&sSearch_6=&bRegex_6=false&bSearchable_6=true&sSearch_7=&bRegex_7=false&bSearchable_7=true&sSearch_8=&bRegex_8=false&bSearchable_8=true&iSortingCols=1&iSortCol_0=4&sSortDir_0=desc&bSortable_0=false&bSortable_1=true&bSortable_2=true&bSortable_3=true&bSortable_4=true&bSortable_5=true&bSortable_6=true&bSortable_7=true&bSortable_8=true&_=1363611701804`

处理 div 在第一个请求完成后被隐藏，但只有在第二个请求完成后才加载新数据。

为什么 datatable 会进行第二次额外调用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-24T12:04:23.417

我一直遇到同样的问题。就我而言，我也一直在使用服务器端处理。初始化数据表后，我编写了以下语句来隐藏一些列

```
tableExample.fnSetColumnVis(5, false);
tableExample.fnSetColumnVis(6, false);
tableExample.fnSetColumnVis(3, false); 
```

我意识到它请求了 4 次。然后我删除了这些行，在我的情况下解决了多个请求的问题。但是，如果您仍想隐藏列，还有另一种方法是添加一个类 ('sClass':'hidden')，它将“display:none”设置为数据表的列定义中的列。

```
 aoColumnDefs: [
        { "bSortable": true, "aTargets": [0] },
        { "bSortable": true, "aTargets": [1] },
        { "bSortable": false, "aTargets": [2] },
        { "bSortable": true, "aTargets": [3] },
        { "bSortable": true, "aTargets": [4] },
       { "bSortable": true, "aTargets": [5], "sClass": "hidden" },
        { "bSortable": true, "aTargets": [6], "sClass": "hidden" },
        { "bSortable": false, "aTargets": [7] },
        { "bSortable": false, "aTargets": [8] },
        { "bSortable": false, "aTargets": [9], "sClass": "hidden" }         

      ] 
```

希望这可以帮助。谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-06T09:49:01.770

服务器端请求由内部`_fnAjaxUpdate`函数发出，该函数从`_fnDraw`.

这意味着您可能正在调用一些需要**重绘**表格的方法，例如排序或搜索，它们会发出额外的请求。

# algorithm - 如何计算z-index？

> ID：15478082
> 
> 赞同：0
> 
> 时间：2013-03-18T13:31:09.533
> 
> 标签：algorithm, tree

考虑到每个节点都有它的绝对级别并且它是直接父级中的绝对索引，我似乎无法为我的自定义树结构找到一个唯一的 z-index。

知道如何为每个节点唯一地计算这样一个，而无需在插入/删除时为其他节点重新计算（当然，除非节点的索引发生变化）。

# browser - 自动定时按钮点击网页

> ID：15478090
> 
> 赞同：2
> 
> 时间：2013-03-18T13:31:38.137
> 
> 标签：browser, mfc, httpwebrequest, c++-cli

基本上我的目标是能够导航到包含按钮的网页。直到一定时间（我相信 java 脚本功能），此按钮才会启用或激活。像以前那样自动访问网页没有问题，但我还没有学会自动单击按钮。我在网上看过，似乎可以通过 httpwebrequest 的 POST 功能或使用 webbrowser 控件来完成单击按钮，但似乎需要使用我不想要的 GUI。那么这可以实现吗？在自动点击之前，我将如何加载网页并等待按钮启用？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-04-25T11:54:14.190

即使我在寻找类似的东西。希望这个链接可以帮助你[https://automatetheboringstuff.com/chapter11/](https://automatetheboringstuff.com/chapter11/)

我正在做一些事情，如果成功的话会发布所有细节

# git - git.Run() 没有输出

> ID：15478092
> 
> 赞同：2
> 
> 时间：2013-03-18T13:31:40.363
> 
> 标签：git, msysgit, tortoisegit

我之前创建了 git 存储库，然后我开始处理服务器上的一个项目。我确实推拉得很好。但后来由于一些冲突，我删除了我的本地存储库。

但是现在每当我尝试创建本地存储库时，都会收到以下错误：

`git.Run() had no output`.

经过大量搜索，我没有在网上找到任何解决方案。

不知道 TortoiseGIT 和 msysgit 发生了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T15:19:25.287

试试这个：

**1.** 卸载`TortoiseGit`

**2.**在windows上 删除`TortoiseGit`注册表。`regedit.exe`

**3.** 重新安装`TortoiseGit`

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T13:41:01.620

TortoiseGit的[issue 667](http://code.google.com/p/tortoisegit/issues/detail?id=667)提到：

> 我也遇到了这个问题并解决了：
> 
> 在 中`TortoiseGit Settings --> General`，您必须为“ `Git.exe Path`”：“ `C:\msysgit\bin`”而不是“ `C:\msysgit\git`”（“ `C:\msysgit`”您的个人 msysGit-Root）指定以下文件夹
> 单击“ `Check now`”后，“ `.dll`”应该会自动传递，并且应该显示 versionnumer 不是如果您使用 git 文件夹的情况。

![git exe](../Images/6237f6d890432f3a93a3760b838dfc20.png)

# three.js - 使用 Three.js 实现逼真的照明（阳光）？

> ID：15478093
> 
> 赞同：23
> 
> 时间：2013-03-18T13:31:40.323
> 
> 标签：three.js, lighting

我正在尝试使用 Three.js 创建一个小型第一人称游戏，但我遇到了照明问题。基本上，我想模拟太阳并让它围绕在所有东西上投射光而旋转。我`THREE.DirectionalLight`目前正在使用它，它只照亮一个方向，因此立方体的侧面保持黑色/深色。

我必须使用多个灯才能点亮所有东西吗？或者我可以以某种方式反射地面/物体上的光吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-18T15:00:13.400

是的，你必须使用多个灯来实现这一点，伪造反射光。计算真实反射光不是内置的（计算上非常复杂/昂贵）。您有多种选择。

第二个定向灯，它可能始终处于与太阳相反的位置和方向。

保持恒定的半球光。半球照明获得天空颜色和地面颜色和强度，并为您的照明增加了额外的深度。

```
//                                    sky color ground color intensity 
hemiLight = new THREE.HemisphereLight( 0x0000ff, 0x00ff00, 0.6 ); 
```

这是一个工作示例[https://threejs.org/examples/#webgl_lights_hemisphere](https://threejs.org/examples/#webgl_lights_hemisphere)

您可以使用不同灯光的任意组合，但要注意性能权衡。

还值得一提的是通过在材质中将 wrapAround 属性设置为 true 来启用半朗伯着色。这可以更好地衰减黑色，从而减少刺眼的照明。更多的中间色调和更少的黑色。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-03-20T17:45:35.523

我使用这两种灯的组合来制作这个视频：[http ://www.youtube.com/watch?v=m68FDmU0wGw](http://www.youtube.com/watch?v=m68FDmU0wGw)

```
 var hemiLight = new THREE.HemisphereLight( 0xffffff, 0xffffff, 0.6 );
            hemiLight.color.setHSV( 0.6, 0.75, 0.5 );
            hemiLight.groundColor.setHSV( 0.095, 0.5, 0.5 );
            hemiLight.position.set( 0, 500, 0 );
            scene.add( hemiLight );

            var dirLight = new THREE.DirectionalLight( 0xffffff, 1 );
            dirLight.position.set( -1, 0.75, 1 );
            dirLight.position.multiplyScalar( 50);
            dirLight.name = "dirlight";
            // dirLight.shadowCameraVisible = true;

            scene.add( dirLight );

            dirLight.castShadow = true;
            dirLight.shadowMapWidth = dirLight.shadowMapHeight = 1024*2;

            var d = 300;

            dirLight.shadowCameraLeft = -d;
            dirLight.shadowCameraRight = d;
            dirLight.shadowCameraTop = d;
            dirLight.shadowCameraBottom = -d;

            dirLight.shadowCameraFar = 3500;
            dirLight.shadowBias = -0.0001;
            dirLight.shadowDarkness = 0.35; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-11T17:18:53.883

你可以使用 scene.environment 来完成这项工作，这里已经有一个很好的例子：

[https://gltf-viewer.donmccurdy.com/](https://gltf-viewer.donmccurdy.com/)

在此处查看 gltf-viewer 的代码，它在阳光下做得很好。

[https://github.com/donmccurdy/three-gltf-viewer/blob/main/src/viewer.js](https://github.com/donmccurdy/three-gltf-viewer/blob/main/src/viewer.js)

注意环境变量，它们使用 venice_sunset_1k.hdr 作为默认背景。

更详细地说，他们使用背景作为他们的环境，但他们没有“显示”它们，你可以使用下面的代码

```
 this.pmremGenerator = new PMREMGenerator( this.renderer );
    this.pmremGenerator.compileEquirectangularShader();
    var rgbe_loader = new RGBELoader();
    var that = this;
    rgbe_loader.setDataType(UnsignedByteType).load("/environment/venice_sunset_2k.hdr", function(texture) {

        var envMap = that.pmremGenerator.fromEquirectangular(texture).texture;

        that.scene.environment = envMap;

        texture.dispose();
        that.pmremGenerator.dispose();

    }); 
```

可以在[https://polyhaven.com/a/venice_sunset中找到 hdr 文件](https://polyhaven.com/a/venice_sunset)

# c++ - 为什么定义一个返回类型作为其类的方法不会给我一个“不完整类型”错误

> ID：15478101
> 
> 赞同：2
> 
> 时间：2013-03-18T13:32:04.607
> 
> 标签：c++, incomplete-type

据我所知，在定义具有对象返回类型的函数时，该类仅处于其前向声明状态，如下所示：

```
class A; 
```

// 前向声明，将**A**设置为不完整类型

```
A foo(){...} 
```

//error: A 是一个不完整的类型，我知道当它具有指针的返回类型或对该对象的引用时它可以正常工作。

但是当我定义一个返回类型作为其类的方法时：

```
class B{
  public:
    B foo(){...}
} 
```

它工作得很好。

我认为在类的定义中定义方法时，类仍然是不完整的类型。所以我认为它会提示类似于前者的错误，但它没有。有谁知道为什么？

在在这里寻求帮助之前，我已经搜索了很长时间。（我不擅长英语，所以我的描述可能会让你感到困惑。抱歉。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T13:35:39.160

在类中定义方法时，该类被视为一个完整类型，否则我们将无法定义内联方法。此外，如果您的 A 类是不完整的类型，那么奇怪的重复模板模式也将不起作用。考虑以下代码：

```
template <typename T> struct base {};

struct derived : base<derived> {};  // We can use derived here
                                    // without any "incomplete type"
                                    // errors. 
```

换句话说：这就是语言的工作方式。

编辑：有关提及此行为的 C++ 标准的相关部分，请参阅 Mike Seymour 的下文。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T14:33:17.157

在大多数情况下，您无法定义返回不完整类型的函数是正确的。但是，规则有一些例外情况，允许在其自己的定义中使用类。

按照 C++11 8.3.5/9 的规定，`B`即使此时不完整，也可以为其成员函数之一声明返回类型：`B`

> 函数定义的参数类型或返回类型不应是不完整的类类型（可能是 cv 限定**的），除非函数定义嵌套在该类的*成员规范中***

`B`实例化一个类型的对象以在函数体中返回也很好；在类定义中，类在包括函数体在内的各种上下文中被认为是完整的，如 C++11 9.2/2 所指定：

> 在类*成员规范*中，类在函数体、默认参数、*异常规范*和非静态数据成员（包括嵌套类中的此类内容）的*大括号或等号初始化器中***被视为完整。***否则，它在其自己的类成员规范*中被视为不完整 。

# c++ - Qsort 不能正确排序字符串数组

> ID：15478104
> 
> 赞同：0
> 
> 时间：2013-03-18T13:32:10.773
> 
> 标签：c++, sorting

我正在尝试对声明为的数组进行排序`string *names1 = new string[1];`（数组的大小随着添加更多项目而增长）。

我在那里放字符串。排序前数组中的项目是： `novot svobodovaa novakj6 3 vondraj1234`

调用后`qsort(names1, size, sizeof (string), compare);`，比较是这样实现的

```
int compare(const void * a, const void * b) {
return ( *(char*) a - *(char*) b);
} 
```

我的数组中的项目是这样打乱的 `vondraj1234 novakj6 novot svobodovaa`

有谁知道，不允许我按字母顺序对数组进行排序的错误在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T14:16:37.480

您**只能**使用`qsort`可复制的类型`memcpy`。`std::string`（以及具有非平凡赋值运算符的任何其他类型）不符合条件。相反，使用`std::sort`. 它知道如何正确复制对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T14:08:10.023

我将首先挑剔你问题的质量较差，请耐心等待。

```
string *names1 = new string[1]; 
```

这为您提供了一个包含一 (1) 个字符串对象的数组。

> （数组的大小随着添加更多项目而增长）

错误的。*您的*数组的大小可能会这样做，因为您希望为此特定目的编写代码。**数组**的大小不会自动调整。（这就是`vector`目的。）

> 我在那里放字符串。排序前数组中的项目是：`novot svobodovaa novakj6 3 vondraj1234`

在一个字符串中？还是作为字符串数组？在后一种情况下，我希望看到一些证据，例如：

```
for ( size_t i = 0; i < size; ++i )
{
    std::cout << i << ": " << names1[i] << "\n";
} 
```

理想情况下，就在您的行之前：

```
qsort(names1, size, sizeof (string), compare); 
```

（我只是希望并假设它`size`实际上*是*正确的大小`names1`，这是我上面的小循环将证明的另一件事。）

* * *

但是，您遇到麻烦的真正原因是这一行：

```
return ( *(char*) a - *(char*) b); 
```

您将`string *`（指向对象的指针）转换为`char *`（指向普通旧数据的指针），并且您正在执行 C 风格（`char*`）而不是 C++ 风格（`static_cast< char * >()`），因此您的编译器甚至无法正确抱怨。

当您取消引用这两个指针时，您将`string`分别获得两个对象的第一个字节。这很可能**不是**包含字符串的第一个字符，而是跳转表或机器代码。因此有点随机的结果......

# android - 从片段开始活动

> ID：15478105
> 
> 赞同：99
> 
> 时间：2013-03-18T13:32:13.317
> 
> 标签：android, android-fragments, android-activity, android-fragmentactivity

我有 2 个片段，两个片段上都有一个按钮。当我按下按钮时，我想开始一个新的活动。但我无法让它工作。

我得到的**错误：此处的错误：类型不匹配：无法从 mFragmentFavorite 转换为 Fragment**

我究竟做错了什么？

***MyFragmentPagerAdapter***

```
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentPagerAdapter;

public class MyFragmentPagerAdapter extends FragmentPagerAdapter{

    final int PAGE_COUNT = 3;

    /** Constructor of the class */
    public MyFragmentPagerAdapter(FragmentManager fm) {
        super(fm);
    }

    /** This method will be invoked when a page is requested to create */
    @Override
    public Fragment getItem(int arg0) {

        switch(arg0){

        case 0:
            return new FavoriteActivity();
                    //ERROR: Type mismatch: cannot convert from FavoriteActivity to Fragment

        case 1:
            return new SettingsActivity();

        default:
            return null;

        }       
    }

    /** Returns the number of pages */
    @Override
    public int getCount() {
        return PAGE_COUNT;
    }
} 
```

***最喜爱的活动***

```
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.widget.Button;

public class FavoriteActivity extends Activity{

    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        View v = inflater.inflate(R.layout.main_favorite, container, false);

        OnClickListener listnr=new OnClickListener() {
            @Override
            public void onClick(View v) {
                  Intent i= new Intent("aFavorite");
                  startActivity(i);
            }
        };

          Button btn =(Button) v.findViewById(R.id.mainFavorite);
          btn.setOnClickListener(listnr);

          return v;
    }
} 
```

如果 FavoriteActivity 扩展片段，错误就消失了，但是我得到一个错误，`findViewById(R.id.mainFavorite);`错误是

> 对于 FavoriteActivity 类型，方法 findViewById(int) 未定义

**编辑：**

当我按下片段中的按钮开始活动时，应用程序崩溃这是我的 logcat

```
03-18 16:01:23.985: E/AndroidRuntime(1985): FATAL EXCEPTION: main
03-18 16:01:23.985: E/AndroidRuntime(1985): android.content.ActivityNotFoundException: No Activity found to handle Intent { act=FavoriteActivityList }
03-18 16:01:23.985: E/AndroidRuntime(1985):     at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1569)
03-18 16:01:23.985: E/AndroidRuntime(1985):     at android.app.Instrumentation.execStartActivity(Instrumentation.java:1420)
03-18 16:01:23.985: E/AndroidRuntime(1985):     at android.app.Activity.startActivityForResult(Activity.java:3446)
03-18 16:01:23.985: E/AndroidRuntime(1985):     at android.app.Activity.startActivityForResult(Activity.java:3407)
03-18 16:01:23.985: E/AndroidRuntime(1985):     at android.support.v4.app.FragmentActivity.startActivityFromFragment(FragmentActivity.java:826)
03-18 16:01:23.985: E/AndroidRuntime(1985):     at android.support.v4.app.Fragment.startActivity(Fragment.java:838)
03-18 16:01:23.985: E/AndroidRuntime(1985):     at com.example.spui.FavoriteActivity$1.onClick(FavoriteActivity.java:24)
03-18 16:01:23.985: E/AndroidRuntime(1985):     at android.view.View.performClick(View.java:4211)
03-18 16:01:23.985: E/AndroidRuntime(1985):     at android.view.View$PerformClick.run(View.java:17267)
03-18 16:01:23.985: E/AndroidRuntime(1985):     at android.os.Handler.handleCallback(Handler.java:615)
03-18 16:01:23.985: E/AndroidRuntime(1985):     at android.os.Handler.dispatchMessage(Handler.java:92)
03-18 16:01:23.985: E/AndroidRuntime(1985):     at android.os.Looper.loop(Looper.java:137)
03-18 16:01:23.985: E/AndroidRuntime(1985):     at android.app.ActivityThread.main(ActivityThread.java:4898)
03-18 16:01:23.985: E/AndroidRuntime(1985):     at java.lang.reflect.Method.invokeNative(Native Method)
03-18 16:01:23.985: E/AndroidRuntime(1985):     at java.lang.reflect.Method.invoke(Method.java:511)
03-18 16:01:23.985: E/AndroidRuntime(1985):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1006)
03-18 16:01:23.985: E/AndroidRuntime(1985):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773)
03-18 16:01:23.985: E/AndroidRuntime(1985):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：271
> 
> 时间：2013-03-18T13:41:39.043

`mFragmentFavorite`在您的代码中是 a`FragmentActivity`与 a 不同`Fragment`。这就是你得到类型不匹配的原因。此外，您永远不应该调用`new`an `Activity`，因为这不是开始的正确方法。

如果要启动 的新实例`mFragmentFavorite`，可以通过`Intent`.

**从一个`Fragment`：**

```
Intent intent = new Intent(getActivity(), mFragmentFavorite.class);
startActivity(intent); 
```

**从一个`Activity`**

```
Intent intent = new Intent(this, mFragmentFavorite.class);
startActivity(intent); 
```

如果你想开始`aFavorite`而不是`mFragmentFavorite`那么你只需要在 created 中更改它们的名称`Intent`。

另外，我建议更改您的类名以使其更准确。调用某物`mFragmentFavorite`是不恰当的，因为它根本不是 a `Fragment`。此外，Java 中的类声明通常以大写字母开头。您最好将您的类命名`FavoriteActivity`为更准确并符合语言约定的名称。如果您选择这样做，您还需要将文件重命名为 FavoriteActivity.java，因为 Java 要求类名与文件名匹配。

**更新**

此外，看起来您实际上打算`mFragmentFavorite`成为 a`Fragment`而不是 a`FragmentActivity`基于您对`onCreateView`. 如果你想`mFragmentFavorite`成为一个`Fragment`然后更改以下代码行：

```
public class mFragmentFavorite extends FragmentActivity{ 
```

改为：

```
public class mFragmentFavorite extends Fragment { 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-03-18T13:50:23.147

您应该使用`getActivity()`从片段启动活动

```
Intent intent = new Intent(getActivity(), mFragmentFavorite.class);
startActivity(intent); 
```

此外，您应该使用 caps:`MFragmentActivity`而不是`mFragmentActivity`.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-11-28T15:10:04.913

如果您使用的是**getActivity()**，那么您必须确保已经**添加**了调用活动。如果在这种情况下没有添加活动，那么当你调用**getActivity()时你可能会得到****null**

 **在这种情况下**getContext()**是安全的

然后启动活动的代码将略有改变，例如，

```
Intent intent = new Intent(getContext(), mFragmentFavorite.class);
startActivity(intent); 
```

*Activity、Service 和 Application 扩展了 ContextWrapper 类，因此您可以使用**this**或**getContext()**或**getApplicationContext()**代替第一个参数。*

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-04-07T08:31:31.630

我在我的片段中使用它。

```
Button btn1 = (Button) thisLayout
            .findViewById(R.id.btnDb1);

    btn1.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            Intent intent = new Intent(getActivity(), otherActivity.class);
            ((MainActivity) getActivity()).startActivity(intent);

        }
    });

    return thisLayout;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-10-24T06:12:26.627

**从片段开始新的活动：**

```
Intent intent = new Intent(getActivity(), TargetActivity.class);
startActivity(intent); 
```

**从一个活动开始新活动：**

```
Intent intent = new Intent(this, TargetActivity.class);
startActivity(intent); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-06-19T12:48:46.100

使用 Kotlin 我执行以下代码：

`requireContext().startActivity<YourTargetActivity>()`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-07-30T03:28:14.133

对于那些对此有问题的人，您可能必须将 getActivity() 替换为 MainActivity.this。**

# github - 在 Git Hub 中将开源 Google 代码项目与自己的开源项目链接

> ID：15478106
> 
> 赞同：0
> 
> 时间：2013-03-18T13:32:13.740
> 
> 标签：github, google-code

我正在 Github 上建立一个开源项目，并希望使用位于 Google Code repo 中的 GPL v3 项目。

我该怎么做？签出 Google 代码存储库并使其（未修改）在我的存储库中可用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T13:47:41.833

不，不要那样做。只需将其记录为依赖项，可选择在您的构建系统中提供自动下载和构建，仅此而已。如果你在你的发行版中包含第三方库，[大多数](https://fedoraproject.org/wiki/Packaging%3aNo_Bundled_Libraries) [Linux](http://www.debian.org/doc/debian-policy/ch-source.html#s-embeddedfiles) [发行版](http://en.opensuse.org/openSUSE%3aPackaging_guidelines#Duplication_of_system_libraries) [都会](https://wiki.archlinux.org/index.php/Arch_Packaging_Standards)讨厌你。

# windows - 保存 Windows 无线配置文件凭据

> ID：15478107
> 
> 赞同：2
> 
> 时间：2013-03-18T13:32:14.853
> 
> 标签：windows, wireless, credentials

有没有办法使用 Windows API 复制“802.1x 设置”菜单中“保存凭据”按钮的功能？或以其他方式永久保存无线配置文件的 PEAP 凭据。

我已经尝试过`WlanSetProfileEapXmlUserData`设置`MsChapV2:Username`和的功能`MsChapV2:Password`。它缓存凭据，但不会永久保存它们。

**UPD：**设法找到存储在其中的用户数据，`HKLM\SOFTWARE\Microsoft\Wlansvc\UserData\Profiles\{GUID}`但它是加密的。我猜 CryptProtectData 是用来加密它的。要是我知道用的是什么盐就好了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T07:34:46.253

`HKLM\SOFTWARE\Microsoft\Wlansvc\UserData\Profiles\{GUID}\MSMUserData`包含与 PEAP 凭据相关的数据。它是用 加密的`CryptProtectData`。解密给了我们一个二进制blob，幸运的是它很容易理解。它包含纯文本的用户名和可能的登录域。密码信息再次使用`CryptProtectData`函数加密并放置在 blob 的末尾。

加密是在没有`LOCAL_MACHINE`标志的情况下完成的，因此只有**本地系统**用户可以生成新的凭据数据。将其放入注册表项后，Windows 会认为您保存了一组凭据，并且即使在身份验证失败的情况下也不会要求提供它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-22T11:17:50.200

[您可以在我的回答https://superuser.com/a/1259271/780533](https://superuser.com/a/1259271/780533)中找到有关 MSMUserData 的 WPA2-Enterprise 凭据加密方案的更多信息“如何找到存储在 Windows 7 上的无线网络的受保护 EAP 凭据？” 问题。特别是，解密后的 MSMUserData 中的用户名后面的“不可读字符”（注意它们以 01 00 00 00 d0 8c 9d df ...开头）是加密密码，因此您需要使用 CryptProtectData 再次解密。

# c++ - C++ 将指定的向量内容复制到另一个向量

> ID：15478109
> 
> 赞同：6
> 
> 时间：2013-03-18T13:32:21.893
> 
> 标签：c++, vector, copy

我创建了一个向量：

```
std::vector<std::string> mero; // earlier it filled with more than 500 data 
```

之后，我想创建另一个向量，它只占用`mero`向量的一部分。（例如：从第 100 个到第 250 个）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-18T13:34:44.263

[（此链接](http://en.cppreference.com/w/cpp/container/vector/vector)`std::vector`中的数字 4 ）有一个构造函数，它需要两个迭代器。它构造一个新向量，包括从第一个迭代器（包括）到第二个迭代器（不包括）的所有元素。

```
std::vector<std::string> partOfMero(mero.begin() + 100, mero.begin() + 250); 
```

这将包括`mero[100]`在`mero[249]`新构建的向量中。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-18T13:37:05.930

您可以使用 , 获得第一个迭代器[`begin`](http://en.cppreference.com/w/cpp/iterator/begin)，并且[`advance`](http://en.cppreference.com/w/cpp/iterator/advance)可以根据需要获得任何数量的迭代器：

```
vector<int> sub(advance(begin(miro), 100),
                advance(begin(miro), 250)); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-18T13:34:49.090

`std::vector`有一个带有两个迭代器的构造函数，因此您可以指定要复制的范围：

```
std::vector<std::string> v1;
std::vector<std::string>::const_iterator first = v1.begin() + 100;
std::vector<std::string>::const_iterator last = v1.begin() + 250;
std::vector<std::string> v2(first, last) 
```

这将构造`v2`使得它包含所有元素的副本 from`v1.begin()+100`到 one before `v1.begin()+250`。

# jquery - 从不选择导航栏按钮 - jquery mobile

> ID：15478110
> 
> 赞同：1
> 
> 时间：2013-03-18T13:32:22.597
> 
> 标签：jquery, css, jquery-mobile

我有一个像这样的导航栏：

[http://jquerymobile.com/demos/1.1.0-rc.1/docs/forms/slider/#/demos/1.1.0-rc.1/docs/toolbars/docs-navbar.html](http://jquerymobile.com/demos/1.1.0-rc.1/docs/forms/slider/#/demos/1.1.0-rc.1/docs/toolbars/docs-navbar.html)

但我不想要蓝色背景作为选择。（当我点击一个按钮时）

我只想执行动作而不是填充背景蓝色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T14:22:19.100

这是一个工作示例：http: [//jsfiddle.net/Gajotres/Y9pXL/](http://jsfiddle.net/Gajotres/Y9pXL/)

```
.ui-focus, .ui-btn:focus {
    -moz-box-shadow:0 0 0 transparent !important;
    -webkit-box-shadow:0 0 0 transparent !important;
    box-shadow:0 0 0 transparent !important;
}

.ui-btn-active {
    border-width: 0px !important;
    background:transparent !important;
    background-image:-webkit-gradient(linear,left top,left bottom,from(transparent),to(transparent))!important;
    background-image:-webkit-linear-gradient(transparent,transparent)!important;
    background-image:-moz-linear-gradient(transparent,transparent)!important;
    background-image:-ms-linear-gradient(transparent,transparent)!important;
    background-image:-o-linear-gradient(transparent,transparent)!important;
    background-image:linear-gradient(transparent,transparent)!important;
} 
```

# php - 在 Codeigniter 中显示数组的问题 - Ajax

> ID：15478114
> 
> 赞同：0
> 
> 时间：2013-03-18T13:32:29.307
> 
> 标签：php, ajax, codeigniter, jquery

我正在尝试使用 codeigniter 在我的网站中实现 AJAX 调用方法，因此当用户单击按钮时，它将实时更新它们。

单击按钮可以工作并显示所有 JSON 数据，但问题是当我尝试显示特定数组时它不会打印出来它显示单个值，例如“h”

我希望能够打印特定的数组，例如包含字符串“Jamie”的数组

任何帮助，将不胜感激

控制器

```
public function insertJSON()
    {
        $this->load->model("values");
        $queryresults = $this->values->getDb();

        $arr = array();
        $arr2 = array();

        foreach($queryresults as $row)
        {
            $arr[] =  $row->post;
            $arr2[] = $row->img;
        }

                    $data = array();
                    $data[] = $arr;
                    $data[] = $arr2;

                    echo json_encode($data);
    } 
```

看法

```
<script type='text/javascript' language='javascript'>
  $('#getdata').click(function () {
    $.ajax({
      url: '<?php echo base_url().'index.php/welcome/insertJSON';?>',
      async: false,
      type: "POST",
      success: function(data) {
        $('#result_table').html(data[1]);
      }
    })
  });
</script> 
```

变量的Vardump

```
array(2) {
  [0]=>
  array(4) {
    [0]=>
    string(5) "Jamie"
    [1]=>
    string(4) "Mark"
    [2]=>
    string(5) "James"
    [3]=>
    string(5) "hello"
}
[1]=>
  array(4) {
    [0]=>
    string(16) "oliver@hotmail.com"
    [1]=>
    string(15) "jakie@hotmail.com"
    [2]=>
    string(15) "mark@hotmail.com"
    [3]=>
    string(16) "james@hotmail.com"
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T15:17:23.217

尝试在您返回的数据上运行它：

```
data = JSON.parse(data); 
```

所以：

```
success: function(data) {
    data = JSON.parse(data);
    $('#result_table').html(data[1]);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T13:43:59.293

如果你想`display a specific array`然后使用`[]`运算符

```
$('#result_table').html(data[0][0]); //will print Jamie
$('#result_table').html(data[0][3]); //will print hello
$('#result_table').html(data[1][1]); //will print jakie@hotmail.com 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T02:29:11.553

一些信息：要正确获取 jSON，您应该在输出之前设置输出**类型**，如下所示：

```
$this->output->set_content_type('application/json'); 
```

然后像这样设置输出：

```
$this->output->set_output(json_encode($data)); 
```

但是，根据您的 var dump $data[1] 将显示**Object[]**并且上述所有答案都是正确的。:)

# paypal - 缺少 PayPal 沙盒 API 凭据？

> ID：15478116
> 
> 赞同：12
> 
> 时间：2013-03-18T13:32:31.753
> 
> 标签：paypal, paypal-sandbox

我正在使用 PayPal 经典 API。当我尝试获取沙盒测试帐户 API 凭据时，我得到了下面的空白屏幕。谁能告诉我发生了什么？

![在此处输入图像描述](../Images/c92f858528d62938685f6da5b74d9124.png)

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-18T16:53:10.453

最后我成功了¡¡¡¡¡¡这行得通；）

1.  注销贝宝账户
2.  清除浏览器缓存和 cookie（我使用 firefox）。
3.  转到 developer.paypal.com 并使用真实的 paypal 帐户（不是沙盒帐户）登录
4.  转到应用程序
5.  单击*沙盒帐户*
6.  （可选）重定向到帐户页面后，从您以前的 Sandbox 帐户导入旧帐户
7.  如果尚不存在，请创建一个测试帐户
8.  点击链接*进入沙盒站点*
9.  使用您的测试业务帐户登录该站点
10.  转到*个人资料*->*我的销售工具*-> *API 访问*
11.  单击以请求*API 凭据*
12.  选择满足您需求的选项
13.  API 凭证已创建！（它们将出现在您的测试帐户资料中）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T16:12:13.607

某些帐户未显示凭据存在一些问题。目前您已登录开发者帐户。尝试登录到实际的沙盒卖家帐户，然后转到个人资料并请求凭据。您应该能够从 Sandbox 卖家账户中查看这些，如果尚未请求它们，您可以生成这些。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-03T20:02:29.583

我刚刚经历了这个麻烦。根本不需要这么长的过程（如user2183113所述）。您需要做的是通过登录您想要获取 API 访问权限的沙盒帐户来请求 API 凭据。登录后，转到“我的帐户”并查找“API 访问/凭据”并按照说明请求它们 - 完成！

请注意：您应该首先使用常规的 Paypal 登录名登录到 Paypal 开发者网站。然后访问 www.sandbox.paypal.com 并使用您的虚拟沙箱帐户登录，然后请求凭据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-03T00:10:05.367

user2183113 的步骤对我不起作用 - 我找不到 API 凭据链接。

我最终只是使用我在“普通贝宝”中使用的相同电子邮件在 Sandbox 中创建了一个新的企业帐户，这个新的 Sandbox 帐户已经带有自己的 API 凭据。

# vb.net - 类未注册异常

> ID：15478117
> 
> 赞同：1
> 
> 时间：2013-03-18T13:32:34.377
> 
> 标签：vb.net, exception-handling, vb6-migration

最近我将项目从 vb6 迁移到 vb.net，在 xp 系统中的 Visual Studio 2008 中使用 framework 2.0，它运行良好。之后，我将框架更改为 3.5，并在 xp 中打开了 vs2010 中的项目，它对我来说也很好。

现在我将操作系统更改为 Windows 7。在这里我打开了项目，我解决了一些问题，然后构建它就成功了。但是当我尝试运行时，出现如下错误

> 创建表单时出错。有关详细信息，请参阅 Exception.InnerException。错误是：未注册类（来自 HRESULT 的异常：0x80040154 (REGDB_E_CLASSNOTREG)）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T14:13:59.127

这需要更多细节。请包括内部异常详细信息和调用堆栈 - 这将有助于确定哪个组件引发了错误。

错误本身很清楚 - 您正在使用的类之一未在 Win7 系统上注册（即：缺少 DLL 等）。这可能是因为组件/库从未安装在 Win7 系统上或安装已损坏。也可能是因为它是一个 32 位组件，并且您的目标是`AnyCPU`或`x64`在您的编译选项中。

# python - 获取 tkinter Entry 字段的值以在函数中（本地）使用

> ID：15478119
> 
> 赞同：1
> 
> 时间：2013-03-18T13:32:38.213
> 
> 标签：python, tkinter

我正在创建一个 GUI，变量正在发生一些事情。

它从计算值 theta 开始，当我单击一个按钮时，它被传递到一个 Entry 字段（这是写在一个函数中的：）`thetaVar.set(CalcTheta(grensVar.get(), data[:,1], data[:,2]))`。

```
thetaVar = IntVar()

def callbackTheta(name, index, mode):
    thetaValue = nGui.globalgetvar(name)
    nGui.globalsetvar(name, thetaValue)

wtheta = thetaVar.trace_variable('w', callbackTheta)
rtheta = thetaVar.trace_variable('r', callbackTheta)

entryTheta = Entry(textvariable=thetaVar).place(x=90, y=202) 
```

这有效（并且我在 Entry 字段中看到了该值），但是当我稍后尝试获取该值时，它不起作用。我相信我尝试了一切：

```
thetaVar.get()   # with print, returns the integer 0, this is the initial value 
                 # that is displayed, even though at that moment it shows 0.4341.
thetaVar         # with print, returns 'PY_VAR3'
thetaValue       # with print, global value not defined
entryTheta.get() # AttributeError: 'NoneType' object has no attribute 'get'
rtheta           # print returns: 37430496callbackTheta 
```

我不明白这个值存储在哪里以及如何在另一个函数中使用条目的值。即使我在实际之后立即尝试其中任何一个`.set`，我似乎也无法在之后立即打印条目的这个特定值。

在 Windows 8 上使用 tkinter 和 Python 3.3。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T14:06:57.633

有两种方法可以获取条目小部件的值：

1.  您调用`get`小部件上的方法，例如：`the_widget.get()`
2.  如果您分配了一个文本变量，您可以调用该文本变量的`get`方法，例如：`the_variable.get()`

要使其中任何一个起作用，您必须具有对 1) 小部件或 2) 文本变量的引用。

在您的代码中，您犯了一个常见错误，即结合小部件创建和小部件布局。这导致`entryTheta`设置为`None`。

当您执行类似的操作`foo=bar().baz()`时，存储的`foo`内容是最终函数的结果，`baz()`. 因此，当您这样做时`entryTheta = Entry(textvariable=thetaVar).place(x=90, y=202)`，`entryTheta`将设置为调用的结果，该结果`place`将始终为`None`.

简单的解决方案是调用`place`单独的语句（您还应该认真重新考虑使用`place`--`pack`并且`grid`功能更强大，并且会给您更好的调整大小行为。）

# c++ - Marmalade SDK 多点触控

> ID：15478124
> 
> 赞同：0
> 
> 时间：2013-03-18T13:33:00.883
> 
> 标签：c++, multi-touch, marmalade

我需要帮助。我为黑莓剧本制作游戏，但我在多点触控事件处理方面遇到了麻烦。我使用从示例中提取的 CInput 类来处理触摸事件，它可以工作（所有触摸都具有正确的坐标和触摸计数）但是当同时进行 2 次触摸和释放触摸时，CInput 不释放 1 事件并且所有错误都像我不释放一样触碰。我可以在模拟器或剧本中看到这个错误。这部分代码用于触摸工作。我该如何解决？感谢有人可以提供帮助。抱歉英语不好

```
void touchUpdate()
{
    g_Input.Update();
    printf("count %d\n", g_Input.getTouchCount());
    if (g_Input.getTouchCount() != 0)
    {
        CTouch* touch;
        if (g_Input.isMultiTouch())
        {
            for (int i = 0; i < g_Input.getTouchCount(); i++)
            {
                touch = g_Input.getTouch(i);
                if (touch != NULL)
                {
                    if (!touch->active)
                    {
                        touch->x = -1;
                        touch->y = -1;
                        continue;
                    }
                    else if (checkButton(&btnAction, touch))
                    {
                        if (menu->isGameEnabled())
                        {
                            currentGame->eventAction();
                        }
                        else
                        {
                            currentGame = menu->eventAction();
                        }
                        continue;
                    }
                    else if (checkButton(&btnUp, touch))
                    {
                        if (menu->isGameEnabled())
                        {
                            currentGame->eventUp();
                        }
                        else
                        {
                            menu->eventUp();
                        }
                        continue;
                    }
                    else if (checkButton(&btnDown, touch))
                    {
                        if (menu->isGameEnabled())
                        {
                            currentGame->eventDown();
                        }
                        else
                        {
                            menu->eventDown();
                        }
                        continue;
                    }
                    else if (checkButton(&btnLeft, touch))
                    {
                        if (menu->isGameEnabled())
                        {
                            currentGame->eventLeft();
                        }
                        else
                        {
                            menu->eventLeft();
                        }
                        continue;
                    }
                    else if (checkButton(&btnRight, touch))
                    {
                        if (menu->isGameEnabled())
                        {
                            currentGame->eventRight();
                        }
                        else
                        {
                            menu->eventRight();
                        }
                        continue;
                    }
                    else if (checkButton(&btnPause, touch))
                    {
                        if (menu->isGameEnabled())
                        {
                            currentGame->eventPause();
                        }
                        continue;
                    }
                    else if (checkButton(&btnSound, touch))
                    {
                        //  off/on sound
                        continue;
                    }
                    else if (checkButton(&btnMenu, touch))
                    {
                        //  force drop to menu
                        if (menu->isGameEnabled())
                        {
                            currentGame->eventMenu();
                        }
                        continue;
                    }
                }
            }
        }
    }
} 
```

currentGame->eventMenu()、currentGame->eventUp() 等……它只是在游戏逻辑或主菜单中起作用。此函数必须在按下按钮时始终调用。

```
struct roundButton
{
    int  x, y;
    int  radius;
    bool pressed;
};

bool checkButton(roundButton *button, CTouch *touch)
{
    if ((button->x - touch->x) * (button->x - touch->x) + (button->y - touch->y) * (button->y - touch->y) <= button->radius * button->radius)
    {
        button->pressed = true;
        return true;
    }
    return false;
} 
```

这就是我检查按钮是否按下的方式

```
#ifndef SRC_INPUT_H_
#define SRC_INPUT_H_

#include "IwGeom.h"
#include "s3ePointer.h"

#define MAX_TOUCHES 2

struct CTouch
{
public:
    int  x, y;
    bool active;
    int  id;
};

class CInput
{
private:
    bool        Available;                                          // true if a pointer is present
    bool        IsMultiTouch;                                       // true if multitouch is enabled
    CTouch      Touches[MAX_TOUCHES];                               // List of potential touches
public:
    bool        isAvailable() const { return Available; }           // Returns availability of the pointer
    bool        isMultiTouch() const { return IsMultiTouch; }       // Returns multitouch capability
    CTouch*     getTouchByID(int id);                               // returns the touch identified by its id
    CTouch*     getTouch(int index) { return &Touches[index]; }     // Gets a specific touch
    CTouch*     findTouch(int id);                                  // Finds a specific touch by its id
    int         getTouchCount() const;                              // Get number of touches this frame
public:
    bool        Init();                                             // Initialises the input system (returns true if pointer is supported)
    void        Release();                                          // Releases data used by the input system
    void        Update();                                           // Updates the input system, called every frame
};

extern CInput g_Input;

#endif  // SRC_INPUT_H_ 
```

C输入类

```
#include "input.h"

CInput g_Input;

void HandleMultiTouchButtonCB(s3ePointerTouchEvent* event)
{
    CTouch* touch = g_Input.findTouch(event->m_TouchID);
    if (touch != NULL)
    {
        touch->active = event->m_Pressed != 0;
        touch->x = event->m_x;
        touch->y = event->m_y;
    }
}

void HandleMultiTouchMotionCB(s3ePointerTouchMotionEvent* event)
{
    CTouch* touch = g_Input.findTouch(event->m_TouchID);
    if (touch != NULL)
    {
        touch->x = event->m_x;
        touch->y = event->m_y;
    }
}

void HandleSingleTouchButtonCB(s3ePointerEvent* event)
{
    CTouch* touch = g_Input.getTouch(0);
    touch->active = event->m_Pressed != 0;
    touch->x = event->m_x;
    touch->y = event->m_y;
}

void HandleSingleTouchMotionCB(s3ePointerMotionEvent* event)
{
    CTouch* touch = g_Input.getTouch(0);
    touch->x = event->m_x;
    touch->y = event->m_y;
}

CTouch* CInput::findTouch(int id)
{
    if (!Available)
        return NULL;

    for (int t = 0; t < MAX_TOUCHES; t++)
    {
        if (Touches[t].id == id)
            return &Touches[t];
        if (!Touches[t].active)
        {
            Touches[t].id = id;
            return &Touches[t];
        }
    }

    return NULL;
}

CTouch* CInput::getTouchByID(int id)
{
    for (int t = 0; t < MAX_TOUCHES; t++)
    {
        if (Touches[t].active && Touches[t].id == id)
            return &Touches[t];
    }

    return NULL;
}

int CInput::getTouchCount() const
{
    if (!Available)
        return 0;

    int count = 0;
    for (int t = 0; t < MAX_TOUCHES; t++)
    {
        if (Touches[t].active)
            count++;
    }

    return count;
}

bool CInput::Init()
{
    Available = s3ePointerGetInt(S3E_POINTER_AVAILABLE) ? true : false;
    if (!Available)
        return false;

    for (int t = 0; t < MAX_TOUCHES; t++)
    {
        Touches[t].active = false;
        Touches[t].id = 0;
    }
    IsMultiTouch = s3ePointerGetInt(S3E_POINTER_MULTI_TOUCH_AVAILABLE) ? true : false;
    if (IsMultiTouch)
    {
        s3ePointerRegister(S3E_POINTER_TOUCH_EVENT, (s3eCallback)HandleMultiTouchButtonCB, NULL);
        s3ePointerRegister(S3E_POINTER_TOUCH_MOTION_EVENT, (s3eCallback)HandleMultiTouchMotionCB, NULL);
    }
    else
    {
        s3ePointerRegister(S3E_POINTER_BUTTON_EVENT, (s3eCallback)HandleSingleTouchButtonCB, NULL);
        s3ePointerRegister(S3E_POINTER_MOTION_EVENT, (s3eCallback)HandleSingleTouchMotionCB, NULL);
    }
    return true;
}

void CInput::Release()
{
    if (Available)
    {
        if (IsMultiTouch)
        {
            s3ePointerUnRegister(S3E_POINTER_TOUCH_EVENT, (s3eCallback)HandleMultiTouchButtonCB);
            s3ePointerUnRegister(S3E_POINTER_TOUCH_MOTION_EVENT, (s3eCallback)HandleMultiTouchMotionCB);
        }
        else
        {
            s3ePointerUnRegister(S3E_POINTER_BUTTON_EVENT, (s3eCallback)HandleSingleTouchButtonCB);
            s3ePointerUnRegister(S3E_POINTER_MOTION_EVENT, (s3eCallback)HandleSingleTouchMotionCB);
        }
    }
}

void CInput::Update()
{
    if (Available)
        s3ePointerUpdate();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T16:39:28.763

我找到了错误。函数 findTouch 甚至可以返回非活动触摸。所以修复看起来像

```
CTouch* CInput::findTouch(int id)
{
    if (!Available)
        return NULL;

    for (int t = 0; t < MAX_TOUCHES; t++)
    {
        if (Touches[t].id == id)
        return &Touches[t];
    }
    for (int t = 0; t < MAX_TOUCHES; t++)
    {
        if (!Touches[t].active)
        {
            Touches[t].id = id;
            return &Touches[t];
        }
    }

     return NULL;
} 
```

# python - 如何使用 python 脚本获取谷歌搜索结果提要而不被识别为机器人？

> ID：15478126
> 
> 赞同：2
> 
> 时间：2013-03-18T13:33:10.660
> 
> 标签：python, rss, urllib, bots

我正在尝试将来自 Google 搜索结果 rss/xml 提要的结果导入我的网站，但每次运行 python 脚本时，我都会收到来自 Google 的消息：

> 我们的系统检测到来自您的计算机网络的异常流量。此页面检查是否真的是您发送请求而不是机器人。

该脚本使用 urllib 下载页面并与其他 rss 提要一起使用。

真的没有意义，因为我认为 rss 提要应该由软件（机器人）使用，我在周末离开脚本并在周一早上运行，但仍然收到消息，所以我不会过多地访问他们的服务器。

我可以在浏览器中加载提要，也可以在服务器上使用 wget 下载提要？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T13:53:46.930

您可以使用一些 HTTP 嗅探器（如 fiddler）或任何协议嗅探器（tcpdump、wireshark）来嗅探您到 Google 的网络流量，并检查您的 urllib 请求和 wget/浏览器请求是否不同。还要检查和比较两个请求的所有 cookie 和 HTTP 标头。请记住，对于向 Google 发出大量请求的 IP - google 每 N 个请求发送验证码，因此如果您需要解析它的内容 - 您可能需要使用一些代理进行 Google 解析。

# python - 从字符串中删除最后一个字符

> ID：15478127
> 
> 赞同：692
> 
> 时间：2013-03-18T13:33:17.567
> 
> 标签：python, string

假设我的字符串长度为 10 个字符。

如何删除最后一个字符？

如果我的字符串是`"abcdefghij"`（我不想替换`'j'`字符，因为我的字符串可能包含多个`'j'`字符）我只希望最后一个字符消失。无论它是什么或发生多少次，我都需要从字符串中删除最后一个字符。

* * *

## 回答 #1

> 赞同：1130
> 
> 时间：2013-03-18T13:34:44.277

简单的：

```
my_str =  "abcdefghij"
my_str = my_str[:-1] 
```

尝试以下代码片段，通过将字符串转换为列表来更好地理解它的工作原理：

```
str1 = "abcdefghij"
list1 = list(str1)
print(list1)
list2 = list1[:-1]
print(list2) 
```

如果您想接受来自用户的字符串：

```
str1 = input("Enter :")
list1 = list(str1)
print(list1)
list2 = list1[:-1]
print(list2) 
```

使其从句子中删除最后一个单词（单词由空格分隔）：

```
str1 = input("Enter :")
list1 = str1.split()
print(list1)
list2 = list1[:-1]
print(list2) 
```

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2019-08-30T09:56:18.387

您正在尝试做的是Python中[字符串切片的扩展：](https://docs.python.org/3/tutorial/introduction.html#strings)

假设所有字符串的长度为 10，最后一个要删除的字符：

```
>>> st[:9]
'abcdefghi' 
```

要删除最后一个`N`字符：

```
>>> N = 3
>>> st[:-N]
'abcdefg' 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2021-06-08T13:38:01.563

最简单的解决方案是使用[字符串切片](https://docs.python.org/3/tutorial/introduction.html#strings)。

蟒蛇 2/3：

```
source[0: -1]  # gets all string but not last char 
```

蟒蛇2：

```
source = 'ABC'    
result = "{}{}".format({source[0: -1], 'D')
print(result)  # ABD 
```

蟒蛇 3：

```
source = 'ABC'    
result = f"{source[0: -1]}D"
print(result)  # ABD 
```

* * *

## 回答 #4

> 赞同：-5
> 
> 时间：2021-06-07T04:05:14.323

这实际上应该有效：

```
string = string[0:len(string) - 2] 
```

# ios - 如何使用 AVCaptureVideoDataOutput 保存视频（mp4 格式）？

> ID：15478128
> 
> 赞同：5
> 
> 时间：2013-03-18T13:33:18.443
> 
> 标签：ios, avfoundation, avcapturesession, avcapture

我已经为 AVCapture 会话以及委托设置了输入和输出

```
- (void)captureOutput:(AVCaptureOutput *)captureOutput didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer fromConnection:(AVCaptureConnection *)connection 
```

正在被调用。如何将帧转换为 mp4 视频文件并保存？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T15:47:32.180

使用 AVAssetWriter 压缩数据并写入 MP4。这两个示例包含执行此操作的代码：

[http://www.gdcl.co.uk/2013/02/20/iPhone-Pause.html](http://www.gdcl.co.uk/2013/02/20/iPhone-Pause.html)

[http://www.gdcl.co.uk/2013/02/20/iOS-Video-Encoding.html](http://www.gdcl.co.uk/2013/02/20/iOS-Video-Encoding.html)

G

# javascript - IMDB 评级插件不适用于 ajax

> ID：15478129
> 
> 赞同：1
> 
> 时间：2013-03-18T13:33:18.697
> 
> 标签：javascript, jquery, ajax, imdb

我有一个`movies.jsp`通过 ajax 从页面调用的页面`home.jsp`。`movies.jsp`包含 IMDB 评级插件的代码（[链接](http://www.imdb.com/plugins?titleId=tt1623205&ref_=tt_plg_rt)）：

```
<span class="imdbRatingPlugin" data-user="ur17960624" data-title="<%=request.getParameter("movieId") %>" data-style="p4">
    <a href="http://www.imdb.com/title/<%=request.getParameter("movieId") %>/?ref_=plg_rt_1">
        <img src="http://g-ecx.images-amazon.com/images/G/01/imdb/plugins/rating/images/imdb_31x14.png" alt="Oz the Great and Powerful (2013) on IMDb" />
    </a>
</span>
<script>(function(d,s,id){var js,stags=d.getElementsByTagName(s)[0];if(d.getElementById(id)){return;}js=d.createElement(s);js.id=id;js.src="http://g-ec2.images-amazon.com/images/G/01/imdb/plugins/rating/js/rating.min.js";stags.parentNode.insertBefore(js,stags);})(document,'script','imdb-rating-api');</script> 
```

我的 ajax 请求是这样调用的：

```
$(document).on('click', 'imdb-button', function(){
    $('content').load('movies.jsp&movieId='+imdbmovieId');
}); 
```

问题是该请求第一次运行良好，但单击具有其他 movieIds 的其他电影仅返回 IMDB 徽标而没有评分。我怀疑插件中的脚本有问题。我尝试将脚本包含在 jquery 函数中，并将该函数作为`load`每次回调的回调，但这不起作用。和想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T08:37:23.610

我解决了这个问题。问题是在每个 ajax 请求上，它都创建了以下脚本标签：

```
<script src="http://g-ec2.images-amazon.com/images/G/01/imdb/plugins/rating/js/rating.min.js" id="imdb-jsonp-tt12312312">
</script> 
```

多个 ajax 意味着多个这样的标签，对于 . 我尝试了以下 hack 并且它有效：

```
$(document).on('click', 'imdb-button', function(){
    $('content').load('movies.jsp&movieId='+imdbmovieId', function(){
        imdbRatingTrigger();
    });
});

function imdbRatingTrigger(){
    $('[id^="imdb-jsonp"]').remove(); //to prevent creation of multiple script tags.

    (function(d,s,id){
        var js,stags=d.getElementsByTagName(s)[0];if(d.getElementById(id)){}js=d.createElement(s);js.id=id;js.src="http://g-ec2.images-amazon.com/images/G/01/imdb/plugins/rating/js/rating.min.js";stags.parentNode.insertBefore(js,stags);
    })(document,'script','imdb-rating-api');
} 
```

`$('[id^="imdb-jsonp"]').remove();`有助于删除那些重复的脚本标签。我还`return;`从 javascript 函数中删除了 -`function(d,s,id()`现在它强制该函数每次都完全运行。我还没有理解这个黑客背后的完整科学，但它确实有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T01:05:57.690

我也在修补插件，可以分享一些见解。如果您在初始页面加载后插入 IMDb 评级，那么您需要在`rating.min.js`每次添加元素时调用。您也可以调用`imdb.rating.createJSONP()`函数，这可能是一个更好的解决方案，因为不需要再次加载整个脚本。您应该知道该函数会遍历`<span>`它找到的所有 imdb 标记。

[IMDb 评级插件库实际上在这个版本](http://g-ec2.images-amazon.com/images/G/01/imdb/plugins/rating/js/rating.js)中得到了很好的解释和评论。

# php - PHP HybridAuth 社交登录根本不起作用。重定向到 ?hauth.start=Facebook&hauth.time

> ID：15478131
> 
> 赞同：17
> 
> 时间：2013-03-18T13:33:23.260
> 
> 标签：php, oauth, hybridauth, hybridauthprovider

我试图让 HybridAuth 社交登录在这个简单的 php 网站上工作。下载并安装了 HybridAuth。然后发现即使是示例也不适用于社交登录（也在远程服务器上尝试过。

正常的 signin_signup 示例工作正常。但是，每当我单击链接登录到社交网络（即 facebook、twitter）时，它都会将我重定向到 (MY_BASE_URL/index.php?hauth.start=Facebook&hauth.time)，而根本不会显示任何登录窗口/错误消息。

我已经仔细阅读了此处发布的文档和其他解决方案。将我的 config.php 调整为具有类似[http://example.com/index.php](http://example.com/index.php)的基本网址。但它只是没有回应。有什么我想念的吗？我已经花了2天时间。

这是我的 config.php

```
return 
    array(
        "base_url" => "http://example.com/index.php", 

        "providers" => array ( 
            // openid providers
            "OpenID" => array (
                "enabled" => false
            ),

            "AOL"  => array ( 
                "enabled" => false 
            ),

            "Yahoo" => array ( 
                "enabled" => false,
                "keys"    => array ( "id" => "", "secret" => "" )
            ),

            "Google" => array ( 
                "enabled" => true,
                "keys"    => array ( "id" => "", "secret" => "" )
            ),

            "Facebook" => array ( 
                "enabled" => true,
                "keys"    => array ( "id" => "xxxxxxxxx", "secret" => "xxxxxxx" )
            ),

            "Twitter" => array ( 
                "enabled" => true,
                "keys"    => array ( "key" => "xxxxxxxx", "secret" => "xxxxxxxx" ) 
            ),

            // windows live
            "Live" => array ( 
                "enabled" => false,
                "keys"    => array ( "id" => "", "secret" => "" ) 
            ),

            "MySpace" => array ( 
                "enabled" => false,
                "keys"    => array ( "key" => "", "secret" => "" ) 
            ),

            "LinkedIn" => array ( 
                "enabled" => true,
                "keys"    => array ( "key" => "xxxxxxxx", "secret" => "xxxxxxx" ) 
            ),

            "Foursquare" => array (
                "enabled" => false,
                "keys"    => array ( "id" => "", "secret" => "" ) 
            ),
        ),

        // if you want to enable logging, set 'debug_mode' to true  then provide a writable file by the web server on "debug_file"
        "debug_mode" => false,

        "debug_file" => ""
    ); 
```

有人可以帮帮我吗？在网上搜索了很长时间后，我感觉它根本不起作用。如果是这样，有人可以指出更好的替代开源/免费社交登录库吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-08-29T21:07:50.347

除了 tintinboss 自己的回答，我发现我也需要检查`hauth_done`（这是一个测试 Facebook 的示例）：

```
if (isset($_REQUEST['hauth_start']) || isset($_REQUEST['hauth_done']))
{
    Hybrid_Endpoint::process();
} 
```

这终于让它工作了 - 谢谢你 tintinboss 的有用答案！

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-03-18T18:09:52.623

好的，我自己解决了。

如前所述，文档确实不好。这是将来想要集成此代码的任何人的解决方案

首先，您必须在 config.php 中使您的 baseurl 像这样

```
"base_url" => "http://yoursite.com/subdomain/index.php", OR

"base_url" => "http://yoursite.com/index.php", 
```

请注意，我没有使用 www。不知道为什么，但它不适用于www。

现在是棘手的部分，您必须将其包含在您的 index.php 文件中

```
require_once( "PATH_TO_HYBRID/Auth.php" );
require_once( "PATH_TO_HYBRID/Endpoint.php" ); 

if (isset($_REQUEST['hauth_start']))
        {
            Hybrid_Endpoint::process();

        } 
```

如果未提供端点进程，您将重定向到空白页面。根据我的测试，您必须将其添加到 index.php 中。

现在代码应该可以正常工作了：）如果它对某人有帮助，我会很高兴。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-08-03T19:15:25.613

@tintinboss 和 @dJomp 的答案让我很满意。但是我仍然需要从登录用户那里获取信息，这确实花了我很长时间。在这里，我分享最终版本，它将让你远离这个可怕的循环。

```
$config = require 'config.php';
require_once( "Hybrid/Auth.php" );
require_once( "Hybrid/Endpoint.php" );

if (isset($_REQUEST['hauth_start']) || isset($_REQUEST['hauth_done'])) {
    Hybrid_Endpoint::process();
} else {
    try {
        $hybridauth = new Hybrid_Auth( $config );
        $google = $hybridauth->authenticate( "Google");
        $user_profile = $google->getUserProfile();

        echo "Hi there! " . $user_profile->email; 
    } catch( Exception $e ){
        echo "Ooophs, we got an error: " . $e->getMessage();
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-07-18T13:04:11.390

嗨，我已经尝试了这个问题的所有解决方案建议，但没有一个达到解决方案。我解决了这样的问题。

"base_url" => 'http://'.$_SERVER['SERVER_NAME'].'inauth/auth',

这里的关键点是服务器名称。此外，cookie 正在记录您的会话，您无法预览所做的更改。清除 cookie 并重试。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-01-19T08:00:33.357

我们正在使用 nginx，我们通过将**?$args**添加到我们的位置块来修复它。没有它，请求不会通过 hausth_done。

```
location / {
    try_files $uri $uri/ /index.php?$args;
} 
```

# jquery - 通过 prestashop 1.5 中的 AJAX 调用调用控制器功能

> ID：15478132
> 
> 赞同：0
> 
> 时间：2013-03-18T13:33:31.530
> 
> 标签：jquery, ajax, function, controller, prestashop

我正在尝试通过 Prestashop 1.5 中的 AJAX 调用来调用控制器功能。我什至不知道这是否可能。这就是我所做的：我覆盖产品控制器（在 override/controllers/front/ProductController.php 中）以加载额外的媒体并执行一些默认控制器不执行的操作。这是我的控制器的样子：

```
<?php

class ProductController extends ProductControllerCore
{

    public function setMedia() {

        parent::setMedia();

        // Add extra ressources     
        // CSS
        $this->addCSS(...)
        $this->addJS(array(...));

    }

    // Extra methods
    public function renderCart() {
        echo '<h2>HELLO</h2>';
    }

} 
```

这是我的问题：如何通过 AJAX 调用调用我的 renderCart() 函数？这甚至可能吗？

谢谢你的帮助 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T06:53:39.053

您可以直接调用 renderCart() 函数，也可以使用其他方式。通常每个控制器都有一些预定义的功能，它们是

```
 init() 

and initContent() 
```

每个人都有自己的细节和目的，所以我不打算在这里解释。

现在你必须做什么才能在你的控制器中创建另一个名为 init() 的函数，然后用它调用你的 renderCart 函数。检查下面的示例代码

```
public function init() 
 {
    parent::init();  //First you have to call the parent init to initialize resources
    if($this->ajax) //special variable to check if the call is ajax
    {
      $this->renderCart(); // call your function here or what ever you wanna do
    }
 } 
```

我希望您能从代码注释中理解。

**注意：这是一个示例代码，未经测试。只是为了给你的想法**

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-09T07:44:18.000

关于如何构建 ajax 链接的几个示例（然后您可以在 ajax 调用中使用它）：

示例 1：链接到常规控制器（假设 OrderDetailCustom 控制器）：

```
{$link->getPageLink('order-detail-custom', true)}

//you will then use it like this (note ajax:true):
$.get(ajax_link, {'id_order': id_order, 'ajax': true});

//the controller will then generally have some 
//utility functions based on Tools::getValue('ajax') or
//$this->isXmlHttpRequest(); > a builtin Controller class's function 
```

示例 2：链接到模块的控制器（假设 SimpleMailer 示例模块和 SendSimpleMail 模块控制器）

```
{$link->getModuleLink('simplemailer','sendsimplemail',[],true)} 
```

请查看 Link 类代码中的这些函数。此外，对于最后一个示例，请参阅此处如何构建模块控制器以及命名如何工作：

[如何在 prestashop 中生成到模块控制器的链接？](https://stackoverflow.com/questions/25085010/how-to-generate-a-link-to-a-module-controller-in-prestashop/25085520#25085520)

# php - 选择最近 20 分钟内插入的记录

> ID：15478142
> 
> 赞同：0
> 
> 时间：2013-03-18T13:33:44.603
> 
> 标签：php, mysql, select

我有一个相当简单的表，其中字段 lastloginon 是时间戳，其中存储的日期如下所示：2013-03-17 17:12:58

如何选择过去 20 分钟内的所有记录？

我正在尝试使用以下代码：

```
 SELECT * FROM who_is_online WHERE lastloginon > (now() - interval 20 minute) 
```

这会产生错误的结果集，即 qyery 在 15:30 执行它会显示 4 条记录，这些记录插入到：

```
2013-03-18 13:13:36
2013-03-18 13:35:12
2013-03-18 14:43:42
2013-03-18 14:55:34 
```

有人知道我在做什么错吗？

这是表导出，只是希望有人能发现我做错了什么：

```
CREATE TABLE IF NOT EXISTS `who_is_online` (
  `recid` int(11) NOT NULL auto_increment,
  `username` varchar(255) default NULL,
  `lastloginon` timestamp NOT NULL default CURRENT_TIMESTAMP,
  `memberip` varchar(255) default NULL,
  `sessionid` varchar(255) NOT NULL,
  `active` tinyint(4) default NULL,
  PRIMARY KEY  (`recid`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=17 ;

--
-- Dumping data for table `who_is_online`
--

INSERT INTO `who_is_online` (`recid`, `username`, `lastloginon`, `memberip`, `sessionid`, `active`) VALUES
(7, ' admin', '2013-03-17 14:43:43', '87.202.163.222', '7kve2idmdbd47aksab4j9hqg74', 1),
(8, ' mmitechnic', '2013-03-17 15:16:39', '5.54.84.144', 'mofgpldp2lu30enhitvak9m4t3', 1),
(9, ' theodor71', '2013-03-17 17:12:58', '85.75.243.246', '4enpk49oi7cg0blumgsd0lu0m7', 1),
(10, ' xElfiex', '2013-03-18 12:38:05', '5.55.27.203', 'tr003d6qbd71v2i5grnuako362', 1),
(11, ' admin', '2013-03-18 12:56:06', '85.74.166.110', '7kve2idmdbd47aksab4j9hqg74', 1),
(12, ' xElfiex', '2013-03-18 13:13:36', '5.55.27.203', 'tr003d6qbd71v2i5grnuako362', 1),
(13, ' admin', '2013-03-18 13:35:12', '85.74.166.110', '7kve2idmdbd47aksab4j9hqg74', 1),
(14, ' admin', '2013-03-18 14:43:42', '85.74.166.110', '7kve2idmdbd47aksab4j9hqg74', 1),
(15, ' admin', '2013-03-18 14:55:34', '85.74.166.110', '7kve2idmdbd47aksab4j9hqg74', 1),
(16, ' admin', '2013-03-18 15:32:27', '85.74.166.110', '7kve2idmdbd47aksab4j9hqg74', 1); 
```

问候，佐兰

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T13:39:38.213

尝试`date_sub(now(), interval 20 minute)`代替`(now() - interval 20 minute)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T14:26:20.070

It looks to me like you may have a timezone issue. It's hard to tell without knowing more about your server and client configuration.

But you might try this WHERE clause ...

```
 lastloginon >= UNIX_TIMESTAMP() - (20  * 60) 
```

This will compare your column numerically to the unix timestamp of twenty minutes ago.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T15:22:40.523

mysql 服务器上的时间与您可能期望的不同。为了在服务器上查找时间，请尝试使用此查询：

```
select now(); 
```

现在，您的查询是正确的，但您对表的插入不正确。而不是使用

```
$lastlogin = date('Y-m-d H:i:s', strtotime("$lastlogin + 2 hours")); 
```

在网站方面，将此字段留空并使用您的`"default CURRENT_TIMESTAMP"`.

另一方面，请注意 username 有一个无法解释的前导空格。

# javascript - Twitter 用户时间线 JSONP。没有反应

> ID：15478149
> 
> 赞同：1
> 
> 时间：2013-03-18T13:34:02.407
> 
> 标签：javascript, ajax, twitter, xmlhttprequest

# 解决了

问题是 Twitter 现在（愚蠢地）即使是公共数据也需要 OAuth。一个足够简单的解决方法是拥有一个本地 php 脚本，该脚本 OAuths 并获取数据并使用 Ajax 访问数据，而不是直接使用 Ajaxing twitter。

* * *

~~我目前正在尝试使用 Reqwest JavaScript 库从 twitter 中提取用户时间线。但是，当我这样做时，请求被认为是成功的，但没有检索到任何数据，并且控制台显示 GET 错误。我尝试的代码如下：~~

```
$.domReady(function () {

    $.ajax({
        url: 'http://api.twitter.com/1.1/statuses/user_timeline.json?screen_name=twitter',
        type: 'jsonp',
        success: function (response) {
            console.log(response);
        },
        error: function (err) {
            console.log(err);
        }
    });

}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T14:02:09.957

尝试传递参数`jsoncallback`。 [http://jsfiddle.net/CCTKa/](http://jsfiddle.net/CCTKa/)

我刚刚收到错误的身份验证数据错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T16:32:40.683

我刚刚更新了我的一个[插件](http://zkniebel.github.com/jquery-twitter-feed/)以使用 Twitter 1.1 API。不幸的是，根据 Twitter 的要求，您将不得不从服务器端代码执行实际请求。但是，您可以将响应传递给插件，它会处理其余的事情。我不知道您正在运行什么框架，但我已经添加了用于在 C# 中发出请求的示例代码，并且很快将添加 PHP 的示例代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-03T08:19:39.663

如果我们愿意，我们仍然可以解析他们的页面并使用纯客户端 JS 重新实现至少一些丢失的功能。

我们需要的是：一个可以处理 HTTPS 页面的 CORS 代理（我唯一知道的是 YQL API）以及如何在其公共页面上检索信息的知识。记住这一点，我们可以从用户那里获取最近的 20 条推文，就像我在演示中所做的那样：http: [//jsbin.com/agejol/1](http://jsbin.com/agejol/1)（单击“在 JSBin 中编辑”以查看代码）

PS 我知道这可能违反了他们的政策，但我关心它就像他们在放弃所有客户端 API 时关心我们一样关心它。

# cocoa - 是否可以在 NSPanel 上打开和关闭 NSNonactivatingPanelMask

> ID：15478153
> 
> 赞同：2
> 
> 时间：2013-03-18T13:34:19.033
> 
> 标签：cocoa, appkit, nspanel

我知道这个用例是非典型的，但我一直试图找出一种方法来使`NSPanel`非激活，仅在某些情况下。

如果 an`NSPanel`被初始化`NSNonactivatingPanelMask`（或者如果在 Interface Builder 中选中了面板的“Non Activating”属性），那么稍后在代码中更改样式掩码对窗口行为没有影响：

```
[panel setStyleMask:([panel styleMask] | NSNonactivatingPanelMask)]; 
```

检查`styleMask`属性显示它`NSNonactivatingPanelMask`已打开，但单击其标题栏仍会激活应用程序。

反之亦然。在代码中使用掩码进行初始化`NSNonactivatingPanelMask`并将掩码设置为`([panel styleMask] & ~NSNonactivatingPanelMask)`稍后对窗口行为没有影响，导致单击标题栏时它*不会*激活应用程序。

是否有一个简单的解决方法，例如告诉窗口重新解释其样式掩码的方法？如果没有，最合适的选择是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-12T09:15:01.787

我发现的唯一解决方案是取消选中 IB 中的非激活复选框。然后稍后在代码中设置或删除 NSNonactivatingPanelMask 标志。

```
if (nonactivating)
    self.window.styleMask &= ~NSNonactivatingPanelMask;
else
    self.window.styleMask |= NSNonactivatingPanelMask; 
```

您仍然可以通过单击可能不需要的窗口标题栏来激活您的应用程序。您可以完全禁用标题栏，也可以将其作为激活应用程序的另一种方式。

# ios - UIImageView 未添加到 UIView

> ID：15478155
> 
> 赞同：1
> 
> 时间：2013-03-18T13:34:23.140
> 
> 标签：ios, objective-c

我正在尝试开发一个库，它采用一组图像并返回一个滚动视图，其中每个图像并排。

但是，当我添加此滚动视图时，我将返回到我的主视图，它不会添加图像。图像是正确的。

我的想法是使用滚动视图与每个图像并排，并使用滚动条像幻灯片放映一样显示。首先，这个概念好吗？

其次，我不明白为什么在模拟器中运行应用程序时没有显示图像。

需要更多详细信息，请询问。

代码如下。我的头文件：

```
#import <UIKit/UIKit.h>

@interface HCIImageSlideShowView : UIScrollView

-(void) setImages:(NSArray*) imagesArray;
-(void) setBounds:(CGRect)bounds;
-(void) setCaptions:(NSArray*) imageCaptionsArray;

-(void) isEditable:(BOOL)edit;

-(void) setSlideTime:(int) milliSeconds;

-(void) startSlideShow;

- (id) initWithImages:(NSArray*)imagesArray captionsArray:(NSArray*) captionArray
               bounds:(CGRect)bounds slideTime:(int)milliSeconds;

@end 
```

我的实现文件：

```
#import "HCIImageSlideShowView.h"
#import "HCIResultListViewController.h"

@interface HCIImageSlideShowView ()

@property (strong,nonatomic) NSMutableArray *imagesArray;
@property BOOL editable;
@property (nonatomic)  int slideTime;
@property (strong,nonatomic) NSMutableArray *imageCaptionsArray;
@property CGFloat width;

@end

@implementation HCIImageSlideShowView

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
    }
    return self;
}

- (id) initWithImages:(NSArray*)imagesArray captionsArray:(NSArray*) captionArray
               bounds:(CGRect)bounds slideTime:(int)milliSeconds
{

    NSLog([NSString stringWithFormat:@"%f,%f", bounds.size.width , bounds.size.height]);

    CGFloat width_t = bounds.size.width;

    bounds.size.width = [imagesArray count] * bounds.size.width;

    self = [[HCIImageSlideShowView alloc] initWithFrame:bounds];

    _width = width_t;

    [self setBackgroundColor:[[UIColor alloc] initWithRed:0.2 green:0.1 blue:0.3 alpha:0.4]];

     if (self) {
        [self setImages:imagesArray];
        [self setSlideTime:milliSeconds];
        [self setCaptions:captionArray];
        [self defaultLoad];
    }

    self.scrollEnabled = YES;

    return self;
}

-(void) defaultLoad
{

    NSLog([NSString stringWithFormat:@"%f,%f,%f",_width,self.bounds.size.height,self.bounds.size.width]);

    for (int i = 0; i < [_imagesArray count]; i++) {
        CGRect imageBounds = CGRectMake(i * _width, self.bounds.size.height, _width, self.bounds.size.height);
        UIImageView *imageView = [[UIImageView alloc] initWithFrame:imageBounds];
        [imageView setImage:[HCIResultListViewController resizeImage:_imagesArray[i] withWidth:_width withHeight:self.bounds.size.height]];
        NSLog([NSString stringWithFormat:@"%f,%f",imageView.bounds.size.height,imageView.bounds.size.width]);
        [self addSubview:imageView];
    }

}

-(void) setBounds:(CGRect)bounds
{
    self.bounds = bounds;
}

-(void) setImages:(NSArray *)imagesArray
{
    _imagesArray = [[NSMutableArray alloc] initWithArray:imagesArray];
}

-(void) setSlideTime:(int)milliSeconds
{
    _slideTime = milliSeconds;
}

-(void) startSlideShow
{

}

-(void) isEditable:(BOOL)edit
{
    _editable = edit;
}

-(void) setCaptions:(NSArray *)imageCaptionsArray {
    _imageCaptionsArray = [[NSMutableArray alloc] initWithArray:imageCaptionsArray];
}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T16:08:33.263

您的代码似乎有很多问题 - 特别是您的初始化程序。这是一个评论版本

```
@interface HCIImageSlideShowView : UIScrollView

-(void) startSlideShow;

- (id) initWithImages:(NSArray*)imagesArray captionsArray:(NSArray*) captionArray
               bounds:(CGRect)bounds slideTime:(int)milliSeconds;
    /*
     remove this custom initialiser as it is quite wrong. 
     Use the default initialiser (don't override) 
     then set the properties after you have created the object. 
     */

    /* Remove all of your custom setters. 
    If any of these properties need setting outside of the class, 
    move the property declarations to the .h file.
    */ 

     -(void) setImages:(NSArray*) imagesArray;
     -(void) setBounds:(CGRect)bounds;
     -(void) setCaptions:(NSArray*) imageCaptionsArray;

     -(void) isEditable:(BOOL)edit;

     -(void) setSlideTime:(int) milliSeconds;

@end

    #import "HCIImageSlideShowView.h"
    #import "HCIResultListViewController.h"

@interface HCIImageSlideShowView()
/*
make these properties public by moving them to your .h file 
so that you can set them from the calling object
*/
@property (strong,nonatomic) NSMutableArray *imagesArray;
@property BOOL editable;
@property (nonatomic)  int slideTime;
@property (strong,nonatomic) NSMutableArray *imageCaptionsArray;
@property CGFloat width;
@end

@implementation HCIImageSlideShowView

 - (id) initWithImages:(NSArray*)imagesArray captionsArray:(NSArray*) captionArray
               bounds:(CGRect)bounds slideTime:(int)milliSeconds
/*
     You seem to be getting confused with init, 
     so I suggest you do not make a custom init method at all. 
     Initialise your object with the default initWithFrame, 
     then have the caller set properties on your newly 
         made object after initiliasation.

*/

{
     NSLog([NSString stringWithFormat:@"%f,%f", bounds.size.width , bounds.size.height]);
    /*
      This is the way to use NSLog...
      NSLog(@"%f,%f", bounds.size.width , bounds.size.height);
     */

    CGFloat width_t = bounds.size.width;
    /*
     double assignment: two lines further down you assign 
    width_t to _width. You can do that here in one step
     */

    bounds.size.width = [imagesArray count] * bounds.size.width;

    self = [[HCIImageSlideShowView alloc] initWithFrame:bounds];

    /*
     This is wrong. Although as Hermann says it may be _legal_, don't do it!
         -Never alloc an object inside it's own initialiser. 
         The memory will already have been alloc'd by the caller. 
         - Never assign to self anything but the return value from super's init.
     */

    _width = width_t;

    /*
     please be consistent with your iVar/property naming. 
     Here you are addressing the ivar _width, 2 lines up 
     you are using the property accessor syntax self.bounds. 
     In you case I would recommend ALWAYS using self.varName 
     except inside a custom setter or getter. 
     */

    [self setBackgroundColor:[[UIColor alloc] initWithRed:0.2 green:0.1 blue:0.3 alpha:0.4]];

    if (self) {
            //[self setImages:imagesArray];
        self.imagesArray = [imagesArray mutableCopy];

            //[self setSlideTime:milliSeconds];
        self.slideTime = milliSeconds;

            //[self setCaptions:captionArray];
        self.imageCaptionsArray = [captionArray mutableCopy];

        /*
         As my comment above - use property syntax and try to 
         avoid writing your own setters and getters 
         unless you have a very good reason.
         */

        [self defaultLoad];
    }

    self.scrollEnabled = YES;

    return self;
} 
```

由于您的初始化代码需要重新排列，因此我没有仔细查看`defaultLoad`-但是我确实有一些观察...

(1)

```
CGRect imageBounds = CGRectMake(i * _width, self.bounds.size.height, _width, self.bounds.size.height); 
```

应该

```
 CGRect imageBounds = CGRectMake(i * _width,0, _width, self.bounds.size.height); 
```

否则，您的图像都将放置在您的滚动视图高度下方的屏幕外。

(2)

您需要设置 contentSize 以便 scrollView 可以滚动

```
[scrollView setContentSize:(CGSize){self.width*[imageArray count],self.bounds.size.height}]; 
```

另一个更一般的评论是，这对于一些图像来说是可以的，但是你不希望使用大量的屏幕外图像视图来制作滚动视图，因为你会占用内存。您实际上只需要三个，用于当前屏幕上的图像，以及左右的上一个和下一个图像。这个想法是仅在您可能需要它们时才加载您的图像，并以 tableView 的工作方式回收您的 imageViews。

您应该查看[Apple 的 Photoscroller 示例应用程序](http://developer.apple.com/library/ios/#samplecode/PhotoScroller/Introduction/Intro.html)以及随附的 WWDC 2010/11 视频和[幻灯片](http://adcdownload.apple.com//wwdc_2010/wwdc_2010_video_assets__pdfs/104__designing_apps_with_scroll_views.pdf)

不要担心平铺和缩放的所有细节，最好掌握将对象创建保持在最低限度并在可行的情况下回收/重用对象的一般原则。

顺便说一句，您可能根本不需要自定义的 scrollView 对象：您可以通过调用 viewController 对象的几行代码来实现您所追求的大部分内容。例如...

```
- (void) viewDidLoad {
        [super viewDidLoad];
    UIScrollView* scrollView = [[UIScrollView alloc] initWithFrame:self.view.bounds];
    [scrollView setBackgroundColor:[UIColor redColor]];
    NSArray* imageArray = @[[UIImage imageNamed:@"image1.png"]
                            ,[UIImage imageNamed:@"image2.png"]
                            ,[UIImage imageNamed:@"image3.png"]
                            ];
    CGFloat width = scrollView.bounds.size.width;
    CGFloat height = scrollView.bounds.size.height;

    for (int i = 0; i < [imageArray count]; i++) {
        CGRect imageFrame = CGRectMake(i * width, 0, width, height);
        UIImageView *imageView = [[UIImageView alloc] initWithFrame:imageFrame];
        [imageView setImage:imageArray[i]];
        [scrollView addSubview:imageView];
    }
    [scrollView setContentSize:(CGSize){width*[imageArray count],height}];
    [self.view addSubview:scrollView];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T14:11:23.517

```
- (id) initWithImages:(NSArray*)imagesArray captionsArray:(NSArray*) captionArray
               bounds:(CGRect)bounds slideTime:(int)milliSeconds
{

    NSLog([NSString stringWithFormat:@"%f,%f", bounds.size.width , bounds.size.height]);

    CGFloat width_t = bounds.size.width;

    bounds.size.width = [imagesArray count] * bounds.size.width;

    self = [self initWithFrame:bounds];

    _width = width_t;

    [self setBackgroundColor:[[UIColor alloc] initWithRed:0.2 green:0.1 blue:0.3 alpha:0.4]];

     if (self) {
        [self setImages:imagesArray];
        [self setSlideTime:milliSeconds];
        [self setCaptions:captionArray];
        [self defaultLoad];
    }

    self.scrollEnabled = YES;

    return self;
} 
```

# magento - Magento 重写核心模型以更改单一功能

> ID：15478158
> 
> 赞同：3
> 
> 时间：2013-03-18T13:34:40.083
> 
> 标签：magento, magento-1.7

我需要重写一个magento核心模型。在那个核心模型类中，我只需要在一个函数中更改一行。

我的问题是当我重写这个核心模型时，我是否必须在我的新模型类中复制其他（未更改的）方法。还是我应该只重新定义需要修改的方法。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T14:24:42.320

将您的类从您要重写的类中扩展出来，并在其中定义您需要修改的方法，所有其他方法都可以被排除，因为只要范围内，对这些其他方法中的任何一个的调用都只会在原始父类之外运行不是私人的。

可能的最佳实践是从您的新方法（使用`parent::yourMethodName($args)`）运行原始父方法，并仅修改发送到父方法或从父方法返回的数据，这使升级更加友好。失败只是复制和更改新类中的原始父方法。

# ios - Core Data，必须获取哪些对象？

> ID：15478167
> 
> 赞同：0
> 
> 时间：2013-03-18T13:34:49.270
> 
> 标签：ios, objective-c, core-data

我在使用 Core Data 时遇到了一些概念性问题。到目前为止，我一直认为对象出错的答案是我的视图控制器需要事先获取该对象。但是，阅读该主题后，Core Data 似乎应该对与我已经拥有的 NSManagedObject 相关的对象进行延迟获取。那么我只需要在我的应用程序运行的一开始就获取一些东西，还是还有更多呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T13:41:34.497

如果您只想从另一个对象的关系属性中获取对象，您通常只需访问该属性，Core Data 就会自动进行获取。

但是，有时您需要一组不共享相同关系的对象，例如，您可能想要检索在某个范围内具有日期属性的所有对象，或类似的东西。在这些情况下，您将使用显式`NSFetchRequest`并设置其`predicate`.

# java - 如何使用休眠方法插入一行？

> ID：15478168
> 
> 赞同：3
> 
> 时间：2013-03-18T13:35:05.400
> 
> 标签：java, hibernate, hibernate-mapping, hibernate-annotations

我正在尝试在关系表 Stock Category 中插入一行。

我正在关注这个例子：[http ://www.mkyong.com/hibernate/hibernate-many-to-many-example-join-table-extra-column-annotation/](http://www.mkyong.com/hibernate/hibernate-many-to-many-example-join-table-extra-column-annotation/)

现在我已经有了表 stock 和 category 的数据。

稍后我想将股票和类别相互关联。

在不编写自定义 sql 查询的情况下如何做到这一点？

如果我可以像这样添加 StockCategory 是否有可能？

```
Stock stock = new Stock();
stock.setStockId(1);
Category category = new Category();
category.setCategoryId(1);
StockCategory stockCategory = new StockCategory();

stockCategory.setStock(stock); //here you need to get the stock object by id 
stockCategory.setCategory(category1); //here you need to get the category1 object by id
stockCategory.setCreatedDate(new Date()); //extra column
stockCategory.setCreatedBy("system"); //extra column
session.save(stockCategory ); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T13:37:05.557

```
StockCategory stockCategory = new StockCategory();

stockCategory.setStock(stock); //here you need to get the stock object by id
stockCategory.setCategory(category1); //here you need to get the category1 object by id
stockCategory.setCreatedDate(new Date()); //extra column
stockCategory.setCreatedBy("system"); //extra column
session.save(stock); 
```

它也在那里

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T13:51:58.950

像 Hibernate 这样的 ORM 将 Java 对象映射到数据源并创建此数据的模型，然后创建和更新对象并调用保存子例程来更新模型。插入/更新/删除 SQL 命令由 ORM 库完成。

因此，在创建新对象的示例中，数据源在 `session.save(stock)`被调用之前不会更新。

```
 session.beginTransaction();

    Stock stock = new Stock();
    stock.setStockCode("7052");
    stock.setStockName("PADINI");

    //assume category id is 7
    Category category1 = (Category)session.get(Category.class, 7);

    StockCategory stockCategory = new StockCategory();
    stockCategory.setStock(stock);
    stockCategory.setCategory(category1);
    stockCategory.setCreatedDate(new Date()); //extra column
    stockCategory.setCreatedBy("system"); //extra column

    stock.getStockCategories().add(stockCategory);

    session.save(stock);

    session.getTransaction().commit(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T14:27:20.540

只要您定义了适当的关系，您的代码就可以工作。例如 - 如果您的 StockCategory.java 看起来像这样，那么您正在做的事情将起作用。

```
Class StockCategory{

     @ManyToOne(...)
     private Stock stock;

     @ManyToOne(...)
     private Category category;
} 
```

然后以下代码将起作用。您不必填充 Stock 和 Category 中的其他字段。

```
 Stock stock = new Stock();
    stock.setStockId(1);
    Category category = new Category();
    category.setCategoryId(1);
    StockCategory stockCategory = new StockCategory();

    stockCategory.setStock(stock); 
    stockCategory.setCategory(category1); 
    stockCategory.setCreatedDate(new Date()); //extra column
    stockCategory.setCreatedBy("system"); //extra column
    session.save(stockCategory ); 
```

# sql - DB2 - 根据日期获取所有记录

> ID：15478180
> 
> 赞同：0
> 
> 时间：2013-03-18T13:35:50.737
> 
> 标签：sql, db2

我的表中有一个名为“START”的日期列。如果当前日期和开始日期之间的差异超过 2 周，我想从该表中获取所有记录。你能帮忙吗？

谢谢，-迈克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T13:39:37.510

该`days`函数返回一个日期的整数表示，以天为单位，所以你可以做简单的减法：

```
SELECT ...
FROM ...
WHERE days(current date) - days(START) > 14 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T17:13:31.097

*您可以使用标记的持续时间*执行日期数学，而无需使用该`DAYS`函数：

```
SELECT ...
FROM ...
WHERE START < CURRENT DATE - 14 DAYS 
```

有关标记持续时间的更多信息，请参阅[文档](http://pic.dhe.ibm.com/infocenter/db2luw/v9r7/index.jsp?topic=/com.ibm.db2.luw.sql.ref.doc/doc/r0023457.html)。

# scrapy - Scrapy规则拒绝

> ID：15478181
> 
> 赞同：1
> 
> 时间：2013-03-18T13:35:54.653
> 
> 标签：scrapy

如何使用 Scrapy 中的规则拒绝抓取网站的某些部分。

我希望 Scrapy 抓取链接数学 www.example.com/help/nl/ en 拒绝匹配 www.example.com/help/en/ 和 www.example.com/website/ 的所有链接。

我有以下代码：

```
class MySpider(CrawlSpider):
    name = 'myspider'
    allowed_domains = ['example.com', ]
    start_urls = ['https://www.example.com/help/nl/', ]
    rules = (
        Rule(SgmlLinkExtractor(allow=(r'/help/nl/',)), callback='parse_response'),
    ) 
```

但它正在爬取整个网站。

**更新**

我希望 Scrapy 只关注包含 /help/nl/ 的链接

```
Rule(SgmlLinkExtractor(allow=(r'/help/nl/',), deny=(other than /help/nl/), callback='parse_response') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T13:44:26.550

尝试这个

```
class MySpider(CrawlSpider):
    name = 'myspider'
    allowed_domains = ['example.com', ]
    start_urls = ['https://www.example.com/help/nl/', ]
    rules = (
        Rule(SgmlLinkExtractor(allow=(r'/help/nl/',),deny=(r'/en/$',r'/website/$',)), callback='parse_response'),
    ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-27T23:27:17.783

我的决心与@akhter 的答案非常相似。但是我没有使用正则表达式。

我用了：

```
deny=('/help', '/website') 
```

它应该可以阻止任何在 url (/help 或 /website) 中包含的内容

希望能帮助到你

# ios - 从另一个班级表演segue

> ID：15478185
> 
> 赞同：1
> 
> 时间：2013-03-18T13:36:00.813
> 
> 标签：ios, xcode, segue

我正在尝试从不同的类（即 NSObject 类）调用 performSegueWithIdentifier，我收到此错误：

由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：

```
 'Receiver (<DerinlikView: 0x95b1ac0>) has no segue with identifier 'DerinlikToPali'' 
```

我的代码是：

类 1（NSObject）：

```
 DerinlikView *derinlik = [DerinlikView alloc];
    [derinlik performSegue]; 
```

类 2（UIViewController）：

```
- (void) performSegue
{
    [self performSegueWithIdentifier:@"DerinlikToPali" sender:self];
}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ( [[segue identifier] isEqualToString:@"DerinlikToPali"]  )
    {
        Palinolojik *pali = segue.destinationViewController;
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-16T21:47:13.643

我遇到了同样的问题，我设法通过使用 NSNotificationCenter 解决了它。

在 NSObject 类 .m 文件中，我添加了：

```
[[NSNotificationCenter defaultCenter] postNotificationName:@"performsegue"
                                                    object:nil]; 
```

在 ViewController 类 .m 文件中 -

1.在 -(void) viewDidLoad 我添加了：

```
 [[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(performsegueNotification:)
                                             name:@"performsegue"
                                           object:nil]; 
```

2.在 -(void) viewDidUnload 我添加了：

```
[[NSNotificationCenter defaultCenter] removeObserver:self]; 
```

3.创建方法 performegueNotification：

```
-(void)performsegueNotification:(NSNotification *) notif
{

    [self performSegueWithIdentifier: @"PresentView" sender:self];

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T14:49:00.113

我相信你的故事板或你的 segues 没有错，什么不是。

问题一定是这一行=

```
DerinlikView *derinlik = [DerinlikView alloc]; 
```

当您为 Class2 分配新的 viewcontroller 指针时，它找不到连接到您的视图的 segue。

一个解决方案是将您启动的 Class2 的指针传递给 NSObject 类。

在你的 class1.h 中：

```
@interface Class1 : NSObject
{
    Class2 *viewController;
}

@property (nonatomic,strong) Class2 *viewController; 
```

在class1.m

```
@synthesize viewController;

[self.viewController performSegue]; 
```

在 class2.m 中：

```
Class1 *callNsObject= [[Class1 alloc] init];
UIViewController *currentVC=self;//this is the part you need the pass current viewcontrollers pointer to your nsobject class depends on your project thee are multiple ways of doing it.
callNsObject.viewController=currentVC; 
```

重要提示：我不知道您的 Class2 视图控制器的层次结构，因此`UIViewController *currentVC=self;`您必须更改`self`为当前视图控制器指针。

例如，如果它是一个基于导航的应用程序，您可以通过以下方式获取当前视图控制器， `UIViewController *currentVC = self.navigationController.visibleViewController;`

此外，我假设您的 Class2 的视图在您调用 Class1 方法之前被推送到堆栈

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T14:20:03.330

错误说明说在 StoryBoard 中找不到“DerinlikToPali”。

转到你的故事板，选择 segue 并检查它的属性检查器（菜单视图 - 实用程序 - 显示属性检查器）。确保标识符与您在 performSegueWithIdentifier 中使用的字符串相同。

**更新**（在查看 SampleProject 之后）：

*   SampleClass *sample = [SampleClass alloc] 一般应该是“alloc init”，这样你不仅分配了内存，还完成了完整的对象初始化。
*   SampleClass methodToSegue() 不会像您预期的那样创建 ViewController 对象。首先看上面的“alloc init”，但在这种情况下你需要更多（下）。否则你将没有一个有效的 UIViewController 对象。请注意，您必须首先在 storyBoard 中为其命名，以便您可以创建它（使用该名称）。替代方法是使用 XIB 代替 storyBoard，在这种情况下，您使用 initWithNibName:bundle：

    ViewController *vc = [[UIStoryboard storyboardWithName:@"MainStoryboard_iPad" bundle:nil] instantiateViewControllerWithIdentifier:@"viewController"];

*   最大的问题是合乎逻辑的，我希望它只在这个 SampleProject 中：创建 objectA，创建 objectB，创建 objectA 并调用它的方法...除了 objectA 创建再次创建 objectB --> 并且我们有一个永远循环并且某些东西会崩溃.

无论如何，我更新的答案是在您尝试触发 segue 之前您的**对象创建尚未完成。**特别是“ViewController”还不是在 storyBoard 中定义的实际 UIViewController，因此没有预期的 segue。

# paypal - 贝宝订阅重新激活计费日期

> ID：15478192
> 
> 赞同：2
> 
> 时间：2013-03-18T13:36:09.740
> 
> 标签：paypal, paypal-subscriptions

当付款被暂停然后重新激活时，我找不到任何解释 PayPal 订阅（或定期付款）如何工作的东西。

假设我通过 ExpressCheckout API 开始订阅：从 1 月 1 日开始，每月 10 欧元。然后我在 2 月 15 日暂停订阅（我得到 10 欧元的 1 月和 10 欧元的 2 月）。

假设我在 5 月 15 日重新激活订阅：

*   我会从 5 月 15 日或下个月 1 日开始收款吗？
*   如果我从 5 月 15 日开始收到付款，我会在下个月的 15 号还是 1 号收到下一笔付款？
*   我也会收到三月和四月的钱吗？

最重要的是：是我还是 PP 文档令人困惑？（要真诚；））

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T20:59:10.557

如果订阅被暂停，则每个计费日期都将被“忽略”并视为不被收取。3 月和 4 月的付款将不会被收取。

重新激活后，我们将在客户的原始计费日期（即 1 日）向客户计费。因此，一旦在 5 月 15 日激活，我们仍会在 6 月 1 日向客户收费。

我希望这会有所帮助，如果您有任何问题，请告诉我。

# hadoop - HBase 中的 WAL 文件

> ID：15478194
> 
> 赞同：0
> 
> 时间：2013-03-18T13:36:13.140
> 
> 标签：hadoop, hbase

在**独立模式（本地文件系统）**中，HBase 将使用预写日志的概念进行恢复......如果是这样，这个 WAL 文件将在哪里？......我想实际检查 HBase 的恢复，所以我正在做这个实验。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T16:55:14.613

始终使用 WAL，不写入 wal 的唯一方法是设置 put.setWriteToWAL(false)

文件存储在 /hbase/.logs// /hbase 文件夹默认位于本地文件系统的 /tmp 中，但您可以在 hbase-site.xml 中检查 hbase.rootdir

我不确定“我想实际检查 HBase 的恢复”是什么意思，日志只是在发生故障时使用，以重播未写入磁盘的（memstore）数据。

这两篇博文解释了 write-path 和 log replay [http://blog.cloudera.com/blog/2012/06/hbase-write-path/](http://blog.cloudera.com/blog/2012/06/hbase-write-path/) [http://blog.cloudera.com/blog/2012/07 /hbase-log-splitting/](http://blog.cloudera.com/blog/2012/07/hbase-log-splitting/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-02T10:26:45.943

在每种模式下，无论是独立模式还是分布式模式，它都使用 WAL 文件，但在独立模式下更新 WAL 文件需要时间

# c# - 我们可以在 C# Windows 应用程序的选项卡控件中放置 windows 窗体吗？

> ID：15478195
> 
> 赞同：0
> 
> 时间：2013-03-18T13:36:24.340
> 
> 标签：c#, winforms, desktop-application, tabcontrol, windows-applications

我们可以在 C# Windows 应用程序的一个表单中将多个窗口窗体放在选项卡控件中吗？

例如，这是实现它的正确方法还是我们应该使用用户控制？

```
 Form2 frm = new Form2();
  frm.TopLevel = false;
  frm.Visible = true;
  frm.FormBorderStyle = FormBorderStyle.None;
  frm.Dock = DockStyle.Fill;
  tabControl1.TabPages[0].Controls.Add(frm); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T13:39:25.363

您不能也不需要使用 Windows 窗体，但您可以使用：

*   [UserControl](http://msdn.microsoft.com/it-it/library/system.windows.forms.usercontrol.aspx)包含当前选项卡的所有控件
*   [组框](http://msdn.microsoft.com/it-it/library/system.windows.forms.groupbox.aspx)控件
*   [面板](http://msdn.microsoft.com/en-us/library/e63s4df3.aspx)控制
*   [TableLayoutPanel](http://msdn.microsoft.com/en-us/library/h21wykkx.aspx)控件可根据某些比例分配子控件的位置，因此您的 UI 在不同的屏幕尺寸和分辨率上看起来都一样好。

有了这些，您就可以在 VS 设计中创建 UI，因此很容易管理更改。如果控件的数量和可能的选项（例如选项卡）真的很大，您也可以考虑动态加载它们的选项。但在这种情况下，项目的正确对齐和可维护性变得更加困难。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T13:39:53.927

听起来您可以从将单独选项卡中的功能移动到 UserControl 中受益。

UserControl 是一种将功能从主窗体中分离出来的好方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T13:42:16.380

没有什么能真正强迫您将 15 个选项卡代码放入单个 c# 文件中。您可以使用部分类原则将单个类拆分为多个源文件。您还可以将代码拆分为多个类 - Visual Studio 只是您的工具，而不是您的主管。你不需要表现得像 VS 规定的那样，它只涵盖了最常见的情况，你可以在像你这样的特殊情况下做更好的类设计。

是的，你可以把任何东西放在标签上，我的意思是任何其他类的任何 CONTROL 对象。您还可以在其中放置一个表单对象 - 在您的表单对象已经创建的情况下，因为底层 Windows API 允许这样做。

# sql-server-2008 - Access 2003 ADP + SQL server迁移到2008：数据已添加到数据库但数据不会显示

> ID：15478206
> 
> 赞同：1
> 
> 时间：2013-03-18T13:37:03.280
> 
> 标签：sql-server-2008, sql-server-2000, ms-access-2003, adp

我已将 SQL Server 2000 数据库迁移到 SQL Express 2008。重新分配角色和权限后，它似乎可以工作，但是在向子表单添加新记录时，在表单（+子表单）中，会给出以下错误消息，尽管记录是仍然添加到基础表中：

```
The data was added to the database but the data won't be displayed in the form because it doesn't satisfy the criteria in the underlying record source. 
```

[此处的文章](http://support.microsoft.com/kb/287627)描述了该问题的解决方法，但是记录源是动态创建的；一旦主窗体中的内容发生变化，记录源属性将在子窗体中相应更改。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T13:54:10.923

根据您链接的文章，您必须创建一个视图并将记录源指向该视图。由于您不显示源代码，或详细说明“动态”的含义，因此最好的建议是在 SQL 数据库中的 ON INSERT、UPDATE 触发器中创建视图。

*   ON INSERT, UPDATE 在主表上触发。
*   *   为子表单生成所需的动态视图，为视图提供标准名称，例如 vwSubForm[PKID]，其中 [PKID] 是行的主键。
*   编辑您的动态记录源代码以指向为子表单生成的视图。

# ios - 像 iPhone 设置应用一样创建 UITableView 单元格背景？

> ID：15478209
> 
> 赞同：-6
> 
> 时间：2013-03-18T13:37:06.103
> 
> 标签：ios, objective-c, cocoa-touch

我正在使用 monotouch 开发 iPhone 应用程序。如何以如下图所示的方式在 UITableView 中创建单元格：

![在此处输入图像描述](../Images/4e9425ccdb2dddbe69b94c10bd5b2ed6.png)

他们的背景只是设置为背景图像的图像吗？或者还有另一种方法可以让细胞看起来像这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T13:39:13.140

它们就是所谓的`Grouped cells`，在 UITableView 中以分组格式显示。

只需将 'style' 选项从 更改为 ，即可在 Interface builder 中更改 UITableView 的`Plain`样式`Grouped`。

或者，您可以像这样在代码中创建它：

```
UITableViewController *groupedTableView = [[UITableViewController alloc] initWithStyle:UITableViewStyleGrouped]; 
```

**UITableView 中的分组单元格**示例如下：

![在此处输入图像描述](../Images/87b80de368f3b3d1f6d3e5df69efed45.png)

与**Plain 样式**相反，它类似于以下内容：

![在此处输入图像描述](../Images/0a103e8e96316e9638c1f20da4fae96e.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T14:32:30.000

如果您使用的是 C#/MonoTouch，那么您可以使用 MonoTouch.Dialog 轻松完成此操作。示例可以在这里找到：http: [//docs.xamarin.com/guides/ios/user_interface/monotouch.dialog](http://docs.xamarin.com/guides/ios/user_interface/monotouch.dialog)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T13:44:43.820

表格视图具有样式`UITableViewStyleGrouped`。

您可以通过以下代码创建 tableViewController：

```
UITableViewController *myTableViewcontroller = [[UITableViewController alloc] initWithStyle:UITableViewStyleGrouped]; 
```

# php - 为什么我会收到语法错误？

> ID：15478210
> 
> 赞同：-5
> 
> 时间：2013-03-18T13:37:12.110
> 
> 标签：php, syntax-error

以下代码段给出了 2 个语法错误，我在其中检查`if`块中的条件

```
public function __construct() {
    if(isset($_POST['update_email')) { # First syntax error
        $this->email = $_POST['update_email'];
    }

    if(isset($_POST['password')) { # Second syntax error
        $this->password = $_POST['password'];
    }
} 
```

我无法发现语法错误。它是什么 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T13:38:54.917

`$_POST`您缺少变量的右括号：

这一行：

```
 if(isset($_POST['update_email')) { 
```

应该：

```
 if(isset($_POST['update_email'])) { 
```

密码行也一样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T13:38:32.670

你错过了一个关闭`]`的行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T13:38:29.630

它应该是

```
if(isset($_POST['update_email'])) 
```

你缺少“]”结束标签

# mysql - 使用左连接的 SQL 请求

> ID：15478219
> 
> 赞同：-2
> 
> 时间：2013-03-18T13:37:25.400
> 
> 标签：mysql, sql

我有 2 张桌子。

**表 A :** (id, type, ...)
这里 id 是主键

**表 B :** (id, timestamp, old_type, new_type, ...)
这里 id 不是主键

我想发出一个 sql 请求，返回这样的 id，每个 A.type 与最后一个（按时间戳）B.new_type 不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T13:41:14.433

这对你有帮助吗尼基塔？

```
select a.* from A a where a.type!= (
     select b.new_type from B b order by `timestamp` desc limit 1
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T13:55:40.760

尝试：

```
select a.id, a.type
from A a
join (select id, max(`timestamp`) max_timestamp from B group by id) mb
  on a.id = mb.id
join B b on mb.id = b.id and mb.max_timestamp = b.`timestamp`
where a.type <> b.new_type 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T14:06:04.860

使用触发器来记录事件，像这样（未经测试的代码）：

```
CREATE TRIGGER logger BEFORE UPDATE ON A
FOR EACH ROW
BEGIN
  IF NEW.Type <> OLD.Type THEN
    INSER INTO B(id, timestamp, old_type, new_type, ...) 
      VALUES (id, CURRENT_TIMESTAMP, OLD.Type, NEW.Type, ...)
  END IF;        
END; 
```

查看[文档](http://dev.mysql.com/doc/refman/5.0/en/trigger-syntax.html)以进一步阅读。

# android - 使用 ObjectAnimator 后无法设置可见性

> ID：15478225
> 
> 赞同：3
> 
> 时间：2013-03-18T13:37:49.187
> 
> 标签：android, android-animation

我正在使用 NineOldAndroids 制作动画。基本上我想要实现的是在隐藏按钮之前对按钮应用一些动画。所以，我将动画应用到我的按钮，然后调用 setVisibility(View.GONE)，但似乎它没有生效。该按钮仍在屏幕上并处理点击。应用动画后，我应该以某种方式“重置”按钮状态吗？

```
 final Button button = (Button) getView().findViewById(R.id.user_to_button);
    button.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            ObjectAnimator.ofFloat(AnimatorProxy.wrap(v), "alpha", 1, 0).setDuration(100).start();
            ObjectAnimator.ofFloat(AnimatorProxy.wrap(v), "translationX", 0, -v.getWidth()).setDuration(100).start();
            v.setVisibility(View.GONE);
        }
    }); 
```

如果我删除动画，那么它会按预期工作 - 隐藏按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-05-20T09:56:56.367

在动画完成后的 setVisibility 之前使用它：

```
anim.reverse();
        anim.removeAllListeners();
        anim.end();
        anim.cancel(); 
```

其中 anim 是您的 ObjectAnimator

# java - 线程“Thread-1”中的异常 java.util.ConcurrentModificationException

> ID：15478226
> 
> 赞同：-2
> 
> 时间：2013-03-18T13:38:03.593
> 
> 标签：java, multithreading, arraylist, synchronization

我的程序中有两个线程和一个 ArrayList。我想从我的线程访问列表。

```
public void run() {
...
arraylist.add(myObj);
...
}

public void run() {
...
arraylist.remove(myObj);
...
} 
```

我尝试了同步每个线程。

```
 synchronized (arraylist) 
 {  
    //add or remove
 } 
```

但它说“非最终字段的同步”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T13:45:18.420

**非最终字段** [的同步只是](https://stackoverflow.com/questions/6910807/synchronization-of-non-final-field) 您可以放心忽略的警告。如果`arraylist`仅在构造函数中分配，则可以将其声明为`final`并摆脱警告。

您需要在列表上进行同步，因为该`remove`方法本质上不是线程安全的（一个线程可能会在搜索要删除的元素**时修改列表）。** `remove`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T13:43:21.010

似乎还有其他操作`arraylist`没有同步。

`Synchronization of non-final field`当有多个线程正确同步代码块时，编译器会发出此警告，它们需要在同一对象实例上同步。

# spring - Spring Group 权限，如何使用默认查询激活

> ID：15478227
> 
> 赞同：4
> 
> 时间：2013-03-18T13:38:06.897
> 
> 标签：spring, login, spring-security

我一直在尝试使用 Spring 安全性来学习不同的东西。我设置了具有“用户”表和“权限”表的基本结构的授权。所以我的身份验证提供程序如下所示。

```
 <authentication-provider>
        <password-encoder hash='md5'>
            <salt-source user-property="username"/>
        </password-encoder> 
        <jdbc-user-service data-source-ref="dataSource"/>
    </authentication-provider> 
```

通过这种方式，我没有指定查询来获取用户详细信息，因为我使用默认[数据库模式](http://static.springsource.org/spring-security/site/docs/3.0.x/reference/appendix-schema.html)。因此，尽管我没有使用“authorities-by-username-query”属性，但 Spring 正在使用默认查询（“选择用户名，权限来自用户名 = 的权限？”和“选择用户名，密码，从用户名 = 的用户启用？ ") 所以事情进展顺利。

现在我想尝试权威团体。所以我根据模式创建表。我的问题如何激活组权限？[JdbcDaoImpl 的 API 文档](http://static.springsource.org/spring-security/site/docs/3.2.x/apidocs/org/springframework/security/core/userdetails/jdbc/JdbcDaoImpl.html)说使用“enableGroups”属性来启用“基于组的权限”。但是“基于群体的权威”没有这样的属性。由于 Spring 有[默认查询](http://static.springsource.org/spring-security/site/docs/3.2.x/reference/springsecurity-single.html#nsa-jdbc-user-service)，我认为不需要明确给出它。

所以有人可以在这里帮助我使用默认查询启用基于组的权限。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T14:14:07.710

不幸的是**jdbc-user-service**不提供对**enableGroups**属性的访问。所以你必须使用 spring 的 bean 命名空间手动配置这个 bean。我认为你可以尝试这样的事情：

```
<authentication-provider user-service-ref="jdbcDaoImpl">
    <password-encoder hash='md5'>
        <salt-source user-property="username"/>
    </password-encoder> 
</authentication-provider>

<beans:bean id="jdbcDaoImpl" class="org.springframework.security.core.userdetails.jdbc.JdbcDaoImpl">
    <property name="enableGroups" value="true" />
    <property name="enableAuthorities" value="false" />
    <property name="dataSource" ref="dataSource" />
</beans:bean> 
```

# c# - Selenium csharp api iedriverserver：找不到元素

> ID：15478228
> 
> 赞同：1
> 
> 时间：2013-03-18T13:38:07.077
> 
> 标签：c#, selenium

我正在使用 Selenium C# API 和 iedriverserver 来测试托管在本地 Intranet 上的应用程序。

我无法按名称查找元素（20 秒后超时）：

```
IWebDriver driver = new InternetExplorerDriver();
WebDriverWait wait = new WebDriverWait(driver, TimeSpan.FromSeconds(20));
wait.Until((d) => { return d.FindElement(By.Name("UserName")); }); 
```

页面源在其中显示正确的 HTML `name="UserName"`。

```
string debug = driver.PageSource.ToString(); 
```

但是，使用相同的代码，我可以找到互联网网站的元素（例如 - google `FindElement(By.Name("q")`）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-20T13:52:43.503

在 Internet 选项>>安全选项卡中设置“将所有区域重置为默认级别”后，该问题已得到解决。

# python - 使用 py2exe 在 Python 中打包软件，但未找到“libiomp5md.dll”

> ID：15478230
> 
> 赞同：15
> 
> 时间：2013-03-18T13:38:13.480
> 
> 标签：python, runtime-error, exe, executable, py2exe

我在 Window 7 操作系统上有 Python 2.7。我希望使用 py2exe 将我的 project.py 打包到一个可执行文件中。按照说明我写了一个 setup.py 文件

```
from distutils.core import setup
import py2exe

setup(console=["project.py"]) 
```

我收到了这条消息

![在此处输入图像描述](../Images/84c0e893816aa60b0a87f0f47c5cf350.png)

我试图排除“ **libiomp5md.dll** ”

```
from distutils.core import setup
import py2exe

setup(console=["SegmentationAccuracy.py"])

dll_excludes = ['libiomp5md.dll'] 
```

但我总是收到相同的错误消息**“错误：libiomo5md.dll：没有这样的文件或目录”**

我的可执行文件包含：

```
import math
import os
import numpy as np
import sys
import ogr
from progressbar import ProgressBar
from shapely.geometry import Polygon
nan = np.nan 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-09T16:34:02.333

`import numpy`我有同样的问题，但在内部调用`setup.py`解决了问题

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-18T15:45:35.037

`libiomp5md.dll`来自英特尔 C 编译器，用于`OpenMP`多处理操作。我希望您的代码涉及`numpy`或使用英特尔编译器编译的代码，因此您的`py2exe`构建取决于它。

没有它你不能简单地创建一个构建，所以我建议在你的系统上找到它并将它复制到你运行的目录中`python setup.py py2exe`。提示，我有一个副本`C:\Python27\Lib\site-packages\numpy\core`

[如果你真的想排除它，你将不得不`numpy`使用 Visual Studio 或 Msys 手动编译。]

一旦你`libiomp5md.dll`进入你正在执行的目录，`python setup.py py2exe`那么你只需要删除该`exclude_dll`行（因为你不想排除它......）

```
from distutils.core import setup
import py2exe

setup(console=["SegmentationAccuracy.py"]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-26T08:31:23.250

我有同样的问题。我必须在机器上安装 numpy，使用 mingw gcc 编译器完成。我确认：在 C:\Python27\Lib\site-packages\numpy\core\ 中找到 dll 的副本

我只是在启动安装程序之前将其复制到工作目录。

在 setup.py 中没有什么特别的调整，依赖项会自动找到。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-14T21:13:00.263

好的，我有同样的问题。原来，sklearn 中的 .pyd 文件引用了 libiomp5md.dll。Py2exe 在两个位置查找您的 DLL - 在路径环境变量和 .pyd 文件所在的同一目录中。 libiomp5md.dll 都不在其中。Py2exe 几乎放弃了，而不是给出完整的路径名，例如 c:\Python27\lib\site-packages\numpy\core\libiomp5md.dll，它说“libiomp5md.dll”，后来它不能寻找。

我很不耐烦。我在我的设置文件中添加了一行：

**os.environ["PATH"] += os.pathsep** + os.path.dirname(numpy.core.file )

这就是 libiomp5md.dll 所在的位置。现在一切正常。只需确保在调用 setup 之前在代码中执行此操作，它也会为您服务。

# php - 使用 zend 获取带有条形码的表格

> ID：15478233
> 
> 赞同：0
> 
> 时间：2013-03-18T13:38:30.580
> 
> 标签：php, zend-framework, frameworks, barcode

我需要显示（并稍后打印）一个页面，其中包含一个包含条形码和每行描述的表格。

我有我的

```
$result = $mySql->query->fetchAll(); 
```

包含正确的数据。

起初我做了一个

```
$rendererOptions = array();
    foreach($result as &$res){
        $barcodeOptions = array(
                'text' => $res['myParam'],
                'rendererParams' => array('imageType' => 'gif'),);
        $res['barcode'] = Zend_Barcode::factory('CODE39', 'image', $barcodeOptions, $rendererOptions)->draw();
}

    $this->view->data = $result; 
```

结果不好。然后我尝试了：

```
Zend_Barcode::render(....); 
```

有许多组合，甚至是

```
$.post('/mycontroller/myactionthatrendersthebarcode',{code : this.id}, function(data){
            $(this).html(data);     }); 
```

在我的 .phtml 页面中（几乎杀死网络：D）

按照文档（[http://framework.zend.com/manual/1.12/en/zend.barcode.creation.html](http://framework.zend.com/manual/1.12/en/zend.barcode.creation.html)）我只有一个但正确的条形码或一堆资源ID我不知道如何管理。

有什么建议吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:27:55.103

该`draw`方法返回一个 gd 图像资源。要输出图像，您可以执行以下操作：

```
$rendererOptions = array();
$barcodeOptions = array(
    'text' => 'TEST',
    'rendererParams' => array('imageType' => 'gif'),
);
$resource = Zend_Barcode::factory('CODE39', 'image', $barcodeOptions, $rendererOptions)->draw();

header('Content-Type: image/gif');
imagegif($resource);
exit; 
```

该`render`方法会自动为您完成：

```
$rendererOptions = array();
$barcodeOptions = array(
    'text' => 'TEST',
    'rendererParams' => array('imageType' => 'gif'),
);
Zend_Barcode::factory('CODE39', 'image', $barcodeOptions, $rendererOptions)->render();
exit; 
```

如果要在`img`标签中输出图像，则必须将上述内容写入操作并调用它。所以例如上面的脚本`outputAction`在`ImgController`

```
<img src="/img/output"> 
```

如果您想要动态地获取它，您可以将获取参数发送到操作并执行操作中的逻辑。

```
<img src="/img/output/text/TEXT">
<img src="/img/output/id/123"> 
```

# rdf - 仅从 sparql 查询中选择第一个对象

> ID：15478234
> 
> 赞同：10
> 
> 时间：2013-03-18T13:38:31.667
> 
> 标签：rdf, sparql

我想从 dbpedia 获取 Daft Punk 的唱片目录，对于我想展示的每张专辑：1）标题 2）发行年份 3）维基百科页面，所以我写了这个查询：

```
PREFIX d: <http://dbpedia.org/ontology/>
PREFIX prop: <http://dbpedia.org/property/>
PREFIX foaf: <http://xmlns.com/foaf/0.1/>
PREFIX : <http://dbpedia.org/resource/>

SELECT DISTINCT  str(?name) YEAR(?relDate) AS ?relYear ?wiki WHERE {
    ?album a d:Album .
    ?album foaf:name ?name .
    ?album d:artist :Daft_Punk .   
    ?album foaf:isPrimaryTopicOf ?wiki .
    ?album d:releaseDate ?relDate .       
}

ORDER BY ?relDate 
```

哪个有效，除了一张专辑（Alive 2007）有两个不同的发行年份（如您[在此处](http://dbpedia.org/page/Alive_2007)看到的），但我只想展示两者中最早的一张。我应该如何编辑我的查询以使这张专辑在第一个日期只出现一次？感谢您的回答。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-18T15:53:59.907

[当使用SPARQL 1.1](http://www.w3.org/TR/sparql11-query/)的功能对结果进行分组时，您可以使用`MIN` [聚合](http://www.w3.org/TR/sparql11-query/#aggregates)来提取发布年份的最小值。[`GROUP BY`](http://www.w3.org/TR/sparql11-query/#groupby)

例如，像这样：

```
PREFIX d: <http://dbpedia.org/ontology/>
PREFIX prop: <http://dbpedia.org/property/>
PREFIX foaf: <http://xmlns.com/foaf/0.1/>
PREFIX : <http://dbpedia.org/resource/>

SELECT str(?name) MIN(YEAR(?relDate)) AS ?relYear ?wiki
WHERE {
    ?album a d:Album .
    ?album foaf:name ?name .
    ?album d:artist :Daft_Punk .   
    ?album foaf:isPrimaryTopicOf ?wiki .
    ?album d:releaseDate ?relDate .       
}
GROUP BY ?name ?wiki
ORDER BY ?relYear 
```

# android - 来自智能手机的后处理传感器读数 - 从磁力计计算的重力

> ID：15478236
> 
> 赞同：1
> 
> 时间：2013-03-18T13:38:42.327
> 
> 标签：android, matlab, smartphone, gravity, magnetometer

我现在正在尝试从记录加速度计、陀螺仪和磁力计输出的 Android 应用程序中提取 Matlab 信息。由于我需要找到线性加速度，我假设我可以从加速度计计算它，并考虑重力。我认为应该可以通过基于磁力计输出（地球磁场）检查手机方向来找到。但我无法用任何公式得到正确的结果。借助磁力计可以找到重力矢量，我说得对吗？如果是这样，我应该如何解释传感器读数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T15:15:40.967

不，不可能从磁力计中找到重力。

* * *

您正在寻找的是所谓的**传感器融合。**我已经根据这篇手稿为[Shimmer 平台](http://www.shimmer-research.com/products-2/shimmer-revisions)实现了传感器融合，它基本上是一个教程：

[方向余弦矩阵 IMU：理论](https://drive.google.com/open?id=0B9rLLz1XQKmaZTlQdV81QjNoZTA)

我强烈推荐的另一个资源是[Android 设备上的传感器融合。](http://www.youtube.com/watch?v=C7JQ7Rpwn2k)

但是你为什么要自己做呢？[SensorManager](http://developer.android.com/reference/android/hardware/Sensor.html)已经提供了您想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T17:26:36.210

您可以通过对加速度计值进行低通滤波器以获得重力，然后从重力中减去加速度计值来获得线性加速度。下面的代码来自 [http://developer.android.com/reference/android/hardware/SensorEvent.html](http://developer.android.com/reference/android/hardware/SensorEvent.html)

```
public void onSensorChanged(SensorEvent event)
 {
      // alpha is calculated as t / (t + dT)
      // with t, the low-pass filter's time-constant
      // and dT, the event delivery rate

      final float alpha = 0.8;

      gravity[0] = alpha * gravity[0] + (1 - alpha) * event.values[0];
      gravity[1] = alpha * gravity[1] + (1 - alpha) * event.values[1];
      gravity[2] = alpha * gravity[2] + (1 - alpha) * event.values[2];

      linear_acceleration[0] = event.values[0] - gravity[0];
      linear_acceleration[1] = event.values[1] - gravity[1];
      linear_acceleration[2] = event.values[2] - gravity[2];
 } 
```

# c# - web.config 合并两个 appsetting.key

> ID：15478240
> 
> 赞同：0
> 
> 时间：2013-03-18T13:38:56.050
> 
> 标签：c#, web-config

```
 <appSettings>
    <add key="a" value="1"/>
    <add key="b" value="{a}-2"/>
  </appSettings> 
```

我期待着

```
ConfigurationManager.AppSettings["b"] as "1-2" 
```

有没有办法将 key-a 值注入 key-b 值？

# paypal - Paypal Express Checkout 付款仍处于待处理状态，然后到期。确认返回 PENDINGREASON=order。

> ID：15478245
> 
> 赞同：3
> 
> 时间：2013-03-18T13:39:06.613
> 
> 标签：paypal, express-checkout

我有一个与 Paypal Express Checkout 集成的网站。目前在我们的生产服务器上，我们总是返回 PENDINGREASON=order （并且从 Paypal 后端我可以看到付款正在等待，然后最终它将**过期**）。理想情况下，我希望有一种以编程方式解决此问题的方法，但至少知道如何在 paypal 后端到期之前从其索取款项会很好。有没有人经历过这个？我们的大多数客户来自海外，我听说这可能会导致付款等待长达 21 天，但正如我在那之后所说的那样，它们即将到期。另外，我不能 100% 确定我们是否使用 IPN（我相信当用户被重定向回我们的网站时我们正在处理）。这也会导致问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T17:04:36.083

有 3 种不同类型的 Express Checkout 交易：销售、授权和订单。

1.  Action = 销售交易在最终 DoExpressCheckoutPayment 调用提交的那一刻被自动捕获。

2.  行动 = 授权交易暂停了以后可以捕获的资金。（在大多数情况下保证 3 天，之后释放保留，但如果资金可用，则几乎总是可以在第 4-29 天捕获）。可以通过 DoCapture API 调用以及在 www.paypal.com 帐户界面中捕获授权

3.  行动 = 订单不会冻结资金，但它确实使您能够在稍后的时间进行身份验证和捕获（默认情况下仍为 29 天）。**无法在 www.paypal.com 帐户管理界面中捕获**订单。捕获它们的唯一方法是使用“DoCapture”API 调用。

# google-maps - 是否可以使用google api获取有关通过某个地铁站的线路的信息？

> ID：15478246
> 
> 赞同：4
> 
> 时间：2013-03-18T13:39:06.600
> 
> 标签：google-maps, google-maps-api-3, google-places-api, google-places

单击纽约的地铁站图标（可能也来自其他地方），“地铁服务”信息弹出窗口显示地铁线路通过该站。

这些信息是公开的吗？如果是这样，你如何得到它？不幸的是，谷歌地方只返回有关车站的以下详细信息：

```
{
   "html_attributions" : [],
   "result" : {
   "address_components" : [
     {
        "long_name" : "US",
        "short_name" : "US",
        "types" : [ "country", "political" ]
     }
  ],
  "formatted_address" : "United States",
  "geometry" : {
     "location" : {
        "lat" : 40.6551440,
        "lng" : -74.00354900000001
     }
  },
  "icon" : "http://maps.gstatic.com/mapfiles/place_api/icons/generic_business-71.png",
  "id" : "fcaa4ac0ac8dc5bbb153f43bc1efded1448f1ffa",
  "name" : "36 St",
  "reference" : "CnRkAAAAoYZgAvSXmBtIV1tiiu0Bwr8g6A15UoFxfwXxYSFMd2epk4tVw5AxNK-egMHNeaxTDkd-w5s4Hzy0hGpe28KPrAMLh1r5r-0v1VDMe4mith91faxSoqNaceuu1MHMLTlK6v6QKbHYTNXSnxAl0ZEq4RIQgFvP37u4dB6Evb7ZMLXo-hoUXR2sVyfugYJQrMBYqemeCmjbaTQ",
  "types" : [ "subway_station", "train_station", "transit_station", "establishment" ],
  "url" : "https://maps.google.com/maps/place?cid=16447150154827564830",
  "utc_offset" : -240,
  "vicinity" : "United States",
  "website" : "http://www.mta.info/"
   },
    "status" : "OK"
} 
```

但是，如果您访问该 url，则会显示该站的地铁服务。

# google-chrome - 崩溃谷歌浏览器进行调试

> ID：15478249
> 
> 赞同：1
> 
> 时间：2013-03-18T13:39:18.473
> 
> 标签：google-chrome, browser

如何让谷歌浏览器崩溃？

我需要让浏览器崩溃，而不仅仅是一个标签。
[https://www.google.com/search?q=哇！+Google+Chrome+has+crashed&um=1&tbm=isch](https://www.google.com/search?q=Whoa!+Google+Chrome+has+crashed&um=1&tbm=isch)

我真正需要的是在浏览器崩溃时自动重启浏览器。为了做到这一点，我需要能够通过按需崩溃 chrome 来测试它。

或者更好的是有一个命令行选项来禁止这个对话框？
试过 --no-sandbox 没有成功。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-18T14:10:04.510

在回答您的第一个问题时，您可以通过点击 chrome://inducebrowsercrashforrealz 使 Chrome 按需崩溃

# ios - 以编程方式在 iOS App 中生成 SSL 证书

> ID：15478250
> 
> 赞同：4
> 
> 时间：2013-03-18T13:39:21.403
> 
> 标签：ios, objective-c, soap, openssl

我正在构建一个必须访问 SOAP API 的应用程序，并且我需要为 WS-Security 实现 XML-Encryption。因此，应用程序的每个副本都必须为此生成其证书。现在，API 还可以作为证书颁发机构 (CA) 工作。所以我需要做的是：

1.  在设备上生成客户端证书
2.  生成证书签名请求并通过 api 将其发送到服务器
3.  在上一个请求的响应中通过 API 获取签名证书
4.  然后服务器 API 应该使用我的公钥（它通过 CSR 获得）并将其用于加密

这种情况可能吗？我正在考虑使用 openssl 库，因为它可以移植到 iPhone。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-30T12:37:53.217

在客户端使用[MYCrypto](https://github.com/snej/MYCrypto)生成证书

# python - 带有来自日期时间向量的时间箱的直方图

> ID：15478256
> 
> 赞同：6
> 
> 时间：2013-03-18T13:39:30.013
> 
> 标签：python, datetime, matplotlib, histogram

我在 python 中有一个带有日期（日期时间）的向量。如何从该向量上的出现中绘制具有 15 分钟 bin 的直方图？

这是我所做的：

```
StartTime = []
for b in myEvents:
    StartTime.append(b['logDate'].time()) 
```

如您所见，我将日期转换为时间。（我从 mongoDB 查询中获取 myEvents）

```
fig2 = plt.figure()
ax = fig2.add_subplot(111)
ax.grid(True,which='both')
ax.hist(StartTime,100) 
```

我得到的错误是：

```
TypeError: can't compare datetime.time to float 
```

我理解这个错误，但我不知道如何解决它。

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T13:57:10.533

如果你想按小时、分钟或秒分类，应该很容易：

```
ts = np.array([ datetime.time(random.randint(24),*random.randint(60,size=2)) for i in range(100) ])
hist([t.hour for t in ts], bins = 24) # to bin by hour 
```

此外，对于十五分钟的垃圾箱，但这里的问题是现在的单位是十进制小时：

```
hist([t.hour + t.minute/60\. for t in ts], bins = 24*60/15) 
```

# kendo-ui - Kendo UI - 网格分页（服务器端）

> ID：15478257
> 
> 赞同：10
> 
> 时间：2013-03-18T13:39:29.970
> 
> 标签：kendo-ui, kendo-grid

我正在尝试将 Kendo-UI 网格与分页一起使用。Total 属性似乎一切正常，尽管我将其设置为 100，但它显示了我正在设置的页面大小的 10 个项目中的 1-10 个。有人在这方面取得了更好的成功吗？我搜索了剑道文档和论坛，但没有成功。

```
@(Html.Kendo().Grid(Model)
.Name("Grid")
.Columns(columns =>
{
    foreach (System.Data.DataColumn column in Model.Columns)
    {
        columns.Bound(column.ColumnName);
    }
})
.Pageable()
.Sortable()
.Scrollable()
.Filterable()
.Groupable()
.DataSource(dataSource => dataSource
    .Ajax()
    .PageSize(10)
    .Total(100)
    .Model(model =>
        {
            foreach (System.Data.DataColumn column in Model.Columns)
            {
                model.Field(column.ColumnName, column.DataType);
            }                
        })
    .Read(read => read.Action("Read", "Controls"))
) 
```

)

谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-19T20:16:24.680

[如文档中所述，启用](http://docs.telerik.com/kendo-ui/api/javascript/data/datasource#configuration-serverPaging)**serverPaging**时，您需要在架构中指定总计，并且每次从服务器返回响应时，您还需要在架构指定的这个位置返回该总计。

```
 dataSource: {
    serverPaging: true,
    schema: {
        data: "data",
        total: "total"
    },
  //... 
```

[这里](http://www.kendoui.com/forums/framework/data-source/return-total-results-when-server-side-paging.aspx)也同样讨论。

检查以下[示例](http://jsfiddle.net/rusev/Lnkug/)。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-07-22T21:37:22.260

是的，您需要在响应中传递 Total 字段。

你的观点可能是这样的：

```
@(Html.Kendo().Grid<YourViewModel>()
      .Name("grid")
      .DataSource(dataSource => dataSource          
          .Ajax()
          .PageSize(20)
          .ServerOperation(true)
          .Read(read => read.Action("Data_Read", "YourController", new {Id=Model.CurrentId}))
       )
      .Columns(c =>
      {
          c.Bound(x => x.Name);
          c.Bound(x => x.CreatedTime);
      })
      .Pageable()
      .Sortable()
) 
```

您的操作代码如下：

```
 public ActionResult Data_Read([DataSourceRequest]DataSourceRequest request, int Id)
        {
            int total = yourQuery.GetTotal(Id); 

            var returnViewModel = yourQuery.GetViewModels(Id, request.Page, request.PageSize);

            return Json(new
            {
                Data = returnViewModel,
                Total=total
            });
        } 
```

在 Fiddler 中查看请求和响应，你会看到魔法是如何发生的： Request: sort=SessionId-asc&page=7&pageSize=20&group=&filter=

即网格传递给控制器​​的DataSourceRequest格式；它已经包含分页所需的参数。

查看操作的响应，您将看到一个包含所有记录的数据字段。Total 字段是 Kendo 网格分页所需的所有记录的总量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T13:48:59.013

根据原始示例，“Total”将被自动识别，如果您想每页显示 100 个结果，请将其设置在“PageSize”中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T09:10:49.180

如果您为 ASP.NET MVC 使用 Kendo 包装器，请考虑添加：

```
.EnableCustomBinding(true) 
```

如[本文所述](http://docs.kendoui.com/getting-started/using-kendo-with/aspnet-mvc/helpers/grid/custom-binding)，自定义绑定允许绕过内置的分页/排序工具。这样，Total 将被考虑在内。

# windows - 将 MFC 移植到 Win32SDK 应用程序

> ID：15478271
> 
> 赞同：0
> 
> 时间：2013-03-18T13:40:07.650
> 
> 标签：windows, winapi, mfc, porting

我在 Win32SDK 中有 2 个应用程序，在 MFC 中有另一个。

我应该以最小的复杂性在任一侧移植代码的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T13:47:11.647

移植到 MFC 可能比从 MFC 移植更容易。仅仅是因为 MFC 包含了很多功能，如果您删除它，您将不得不重新实现这些功能。这在很大程度上取决于所涉及项目的性质和规模，以及将要进行这项工作的开发人员的技能和经验。

你能提供更多细节吗？

# mercurial - 无需在 Mercurial 中提交即可导出差异

> ID：15478272
> 
> 赞同：9
> 
> 时间：2013-03-18T13:40:08.373
> 
> 标签：mercurial, export, diff

我正在使用 TortoiseHg GUI，似乎没有办法导出我未提交的更改和上次修订之间的差异。有没有办法使用 hg 做到这一点？

我的要求：

*   我不想提交我的更改
*   我可以复制整个目录，提交，导出，删除，但是目录很重

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-18T14:03:49.477

1.  您可以提交您的更改，从变更集的上下文菜单中选择导出 -> 导出补丁，然后回滚（存储库 -> 回滚/撤消）
2.  或者，您可以选择所有未提交的更改，然后在上下文菜单中选择“复制补丁”选项。这会将所有更改的补丁复制到剪贴板。然后打开您最喜欢的文本编辑器并将内容粘贴到新缓冲区中并将其保存为补丁。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-11-02T15:56:56.907

它可以通过一个补丁文件非常简单地完成

> hg diff > foo.patch

然后补丁可以通过

> hg import --no-commit foo.patch

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-21T16:25:41.437

从命令行`hg diff`将使用统一的 diff 格式显示存储库中的差异。

# c# - 我们如何知道元素在 windows phone 8 中是可视化的

> ID：15478274
> 
> 赞同：2
> 
> 时间：2013-03-18T13:40:14.950
> 
> 标签：c#, windows-phone-8

在 windows phone 8 中，我正在显示项目列表（此列表可能包含任意数量的项目，可能是 40 或 50 ...）。当用户下拉我正在刷新上一个列表..所以用户可以通过下拉查看列表中的所有项目。现在我担心的是我想将这些项目标记为已读或未读，但我们如何知道这些项目是由用户可视化的，而我的列表框项目仅显示它们不可点击的文本。目前我正在使用**Emulator WVGA 512MB**，我可以在其中一次看到 5 个项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T18:22:16.197

如果项目的大小是固定的，那么您可以通过查看 ListBox 模板内的滚动查看器的滚动偏移量来确定它们是否在屏幕上。（通过 VisualTreeHelper 获取。）

事实上的约定是，如果不需要导航到单独的页面或以其他方式与其交互以将项目标记为已读，则一旦显示它们就会被标记为已读。
这适用于旧项目，但如果您在当前显示项目的顶部加载新项目，这可能会更难。如果您自己管理数据虚拟化，您可以根据项目的实现时间来执行此操作。如果你使用`LongListSelector`它会引发一个`ItemRealized`事件，你可以用它来检测它。

# asp.net - 路由不适用于添加到空 Web 应用程序的 Web api

> ID：15478275
> 
> 赞同：2
> 
> 时间：2013-03-18T13:40:15.080
> 
> 标签：asp.net, asp.net-web-api, single-page-application, asp.net-web-api-routing

在 [学习 John Papa 出色的“SPA Jumpstart”课程](http://www.pluralsight.com/training/Courses/TableOfContents/single-page-apps-jumpstart)的同时，我在教程中谈到了测试扬声器控制器的要点。此时我的应用程序返回了“404：未找到”错误，而不是加载扬声器。

如果扬声器控制器有问题，我做了一个简单的右键单击 -> 添加项目 -> 添加 Web api 控制器并创建了“valuesController”，其中仅包含标准启动方法。那也没用，我只是得到：

```
Request URL:http://localhost:57219/api/values
Request Method:GET
Status Code:404 Not Found 
```

在 Chrome 的开发工具中。

随后，我从头开始再次尝试使用一个基本的空 Web 应用程序项目，然后转到 nuget 并安装了 Microsoft Wep Api 包。然后我再次添加了“valuesController”，仍然没有。然后我意识到我需要做更多工作，并添加了一个“App_Start”文件夹，在其中放置了一个名为 WebApiConfig.vb 的文件。这包含：

导入 System.Web.Http

```
Public Class WebApiConfig
    Public Shared Sub Register(config As HttpConfiguration)
        config.Routes.MapHttpRoute( _
            name:="DefaultApi", _
            routeTemplate:="api/{controller}/{id}", _
            defaults:=New With {.id = RouteParameter.Optional} _
        )
    End Sub
End Class 
```

我添加了一个“global.asax”文件，其中包含：

```
Imports System.Web.SessionState
Imports System.Web.Http

Public Class Global_asax
    Inherits System.Web.HttpApplication

    Sub Application_Start(ByVal sender As Object, ByVal e As EventArgs)
        WebApiConfig.Register(GlobalConfiguration.Configuration)
    End Sub
End Class 
```

完成此操作后，基本路由工作，我能够成功进入该控制器默认页面。

但是...尽管在我的 jumpstart 项目中卸载并重新安装了 web api 包，但我仍然无法访问相同的 URL，即使在相关文件（global.asax 和 webApiConfig.vb）中（对我而言）所有内容都相同）。

index.vbhtml 页面没有呈现“scripts/css”和其他 js 文件还有另一个问题，但我认为这与这个问题无关，因为我正试图直接转到“...api/speakers” " 或 "...api/values" 来测试因此绕过索引页面。

除了 web api 包，我不应该需要任何东西，对吧？我在 global.asax 和 webapiconfig.vb 页面中设置了一个断点，但它们从未被命中 - 我认为它们在调试器连接时已经完成。我现在完全不知道该去哪里找。不应该有任何其他文件能够干扰路由，对吧？

我的 packages.config 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<packages>
  <package id="Durandal" version="1.2.0" targetFramework="net45" />
  <package id="EntityFramework" version="5.0.0" targetFramework="net45" />
  <package id="EntityFramework.SqlServerCompact" version="4.3.6" targetFramework="net45" />
  <package id="FontAwesome" version="3.0.2.3" targetFramework="net45" />
  <package id="jQuery" version="1.9.1" targetFramework="net45" />
  <package id="knockoutjs" version="2.2.1" targetFramework="net45" />
  <package id="Microsoft.AspNet.Razor" version="2.0.20715.0" targetFramework="net45" />
  <package id="Microsoft.AspNet.Web.Optimization" version="1.0.0" targetFramework="net45" />
  <package id="Microsoft.AspNet.WebApi" version="4.0.20710.0" targetFramework="net45" />
  <package id="Microsoft.AspNet.WebApi.Client" version="4.0.20710.0" targetFramework="net45" />
  <package id="Microsoft.AspNet.WebApi.Core" version="4.0.20710.0" targetFramework="net45" />
  <package id="Microsoft.AspNet.WebApi.WebHost" version="4.0.20710.0" targetFramework="net45" />
  <package id="Microsoft.Net.Http" version="2.0.20710.0" targetFramework="net45" />
  <package id="Microsoft.SqlServer.Compact" version="4.0.8876.1" targetFramework="net45" />
  <package id="Microsoft.Web.Infrastructure" version="1.0.0.0" targetFramework="net45" />
  <package id="Modernizr" version="2.6.2" targetFramework="net45" />
  <package id="Newtonsoft.Json" version="4.5.11" targetFramework="net45" />
  <package id="SqlServerCompact" version="4.0.8854.1" targetFramework="net45" />
  <package id="toastr" version="1.2.2" targetFramework="net45" />
  <package id="Twitter.Bootstrap" version="2.3.1" targetFramework="net45" />
  <package id="WebGrease" version="1.1.0" targetFramework="net45" />
</packages> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T15:28:16.713

您确定要在 global.asax 中调用 WebApiConfig.Register 吗？您也可以尝试将路线更改为：

```
config.Routes.MapHttpRoute( _
name:="DefaultApi", _
routeTemplate:="api/{controller}" _
) 
```

（只是看看这种方式是否解决了正确的路线......）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T23:40:18.793

虽然很乏味，但项目中似乎存在某种腐败。当我重新创建它并将我所有的文件从损坏的项目中添加回来时，一切正常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T14:30:33.840

看起来该教程仅供会员访问，但未命中断点让我想知道旧代码是否真的在运行——或者 Application_Start 没有触发 b/c 它已经运行了一次。您是否在测试之间停止了系统托盘中的站点？应附加调试器。

# javascript - 发送 javascript 变量以及表单数据并将其绑定到模型

> ID：15478277
> 
> 赞同：1
> 
> 时间：2013-03-18T13:40:24.643
> 
> 标签：javascript, forms, jquery, data-binding

我有一个简单的 html 页面。它包含一个表格。例如：学生信息

**模型：**

> public Class Student()
> {
>      public int Roll_no {get;set}
>      public string Name {get;set}
> }

Html 也有 javascript：

```
<script>

var foo= "1";
var bar = "2";

</script> 
```

控制器看起来像

```
public ActionResult AjaxCallCOntroller(int foo, int bar, Student stud)
{
.....
......
} 
```

现在我需要对这个控制器进行ajax调用，它将传递这些值：

```
 **ajax call:**
var studentform = ("#studentform").serialize();
$.ajax({
    type:"POST"
    , url:"appname/AjaxCallCOntroller"
    , dataType:"json",
    , data:{foo:foo,bar:bar,stud:studentform},
    , success:function(){
      //function body
    }
); 
```

问题是控制器接收到`foo`并且`bar`学生对象为空。如果单独发送学生对象，则会收到它。即：data:studentform
需要帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T13:52:46.687

试试这个：

```
var studentform = ("#studentform").serializeArray();
studentForm.push({ name: 'foo', value: foo });
studentForm.push({ name: 'bar', value: bar });
$.ajax({
    type:"POST"
    , url:"appname/AjaxCallCOntroller"
    , dataType:"json"
    , traditional: true
    , data:studentform
    , success:function(){
      //function body
    }
); 
```

# sql - 无法在 DataTable 中获取特定 ID 的行总和

> ID：15478278
> 
> 赞同：0
> 
> 时间：2013-03-18T13:40:28.723
> 
> 标签：sql, c#-4.0

![在此处输入图像描述](../Images/552d50b41cec6bfb897d0f51a8a397d2.png)

我有一个这样的 sql 查询：

```
 string PendingMsgsQuery = "select FROM_CLIENT,CHAT_MSG from chat where TO_CLIENT=" + clientID + " and CHAT_STATUS='p' "; 
```

和图像中的 DataTable 希望它从该查询返回的结果中获取它的值，“FROM_CLient”不是静态的，它可能会因“TO_CLIENT”值而异

我的问题是：我想为该客户端返回 From_CLient 的 id 和 CHAT_MSG 的计数，我该怎么做？有什么特别的解决方案可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T13:53:12.287

您可以进行`group by`查询，按以下方式分组`FROM_CLIENT`

```
 string PendingMsgsQuery = "select FROM_CLIENT, count(0) as QUANTITY from chat where TO_CLIENT=" + clientID + " and CHAT_STATUS='p' group by FROM_CLIENT "; 
```

# machine-learning - 贝叶斯集和寻找顶集

> ID：15478280
> 
> 赞同：1
> 
> 时间：2013-03-18T13:40:33.327
> 
> 标签：machine-learning, bayesian

Ghahramani 和 Heller ( [http://mlg.eng.cam.ac.uk/zoubin/papers/bsets-nips05.pdf](http://mlg.eng.cam.ac.uk/zoubin/papers/bsets-nips05.pdf) ) 提出的贝叶斯集提供了一种基于查询查找项目集的有用方法（例如 dog 会返回cat, pet) 并产生与谷歌集相当的输出。我想知道如何在不首先提供单词（项目）作为查询的情况下使用该方法来查找顶部集合。有人知道贝叶斯集的主动学习，其中确定了密度最高的集吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-06-24T16:38:15.377

贝叶斯集本质上执行特征选择（参见：基于内容的图像检索的简单贝叶斯框架）以对集合中的项目进行排名。并且特征的权重是通过这个集合的种子例子来决定的。没有种子就没有办法做到这一点。所以归结为寻找“种子集”。

为此，您可以在数据中找到“集群”（例如使用 K-means）并将它们的“质心”（或表示集群的数据点）作为种子集提供。基本上，现在您要做的是对每个集群中的项目进行排名（您可以将其称为 topsets）。

# java - 如何模拟springcontext？

> ID：15478282
> 
> 赞同：1
> 
> 时间：2013-03-18T13:40:38.467
> 
> 标签：java, junit, mockito, powermock

```
private ServiceImpl() {
    // TODO Auto-generated constructor stub

    reMgr = (ReManager) SpringContext.getBean("reManager"); 
```

我想模拟这个方法，这是一个初始化springContext的私有构造函数。我正在使用 beans.xml 通过我的 powermockito 测试用例设置 beanfactory，其中我指定了 bean 及其类名。这种方法仍然无法获取 reManager 的实例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T14:40:38.873

如果我误解了某些东西，请原谅我，但是如果您使用的是 PowerMockito，您就不能按照以下方式做一些事情：

```
@RunWith(PowerMockRunner.class)
@PrepareForTest(SpringContext.class) 
public FooTest {    
    @Test
    public void foo() {
        final ReManager manager = Mockito.mock(ReManager.class);

        PowerMockito.mockStatic(SpringContext.class);
        Mockito.when(SpringContext.getBean("reManager")).thenReturn(manager);

        ... etc...
    }
} 
```

[在此处查看](http://code.google.com/p/powermock/wiki/MockitoUsage13)有关如何验证静态行为的更多信息。

或者...我会更改设计，以便将您的依赖项传递给被测类，例如：

```
@Test
public void foo() {
    final ReManager manager = Mockito.mock(ReManager.class);
    final ServiceImpl service = new ServiceImpl(manager);

    ... etc...
} 
```

这样就不需要 PowerMock，您的测试变得更容易，并且类之间的耦合更少。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T14:28:16.250

如果你想做的是在你的一个测试中创建一个 Spring bean 的实例，你不需要为此使用 powermockito。你可以做这样的事情

```
@ContextConfiguration(locations = "/beans.xml")
public class YourTestJUnit4ContextTest extends  AbstractJUnit4SpringContextTests {

private ReManager reManager;

@Before
public void init() {
    reManager= (ReManager) applicationContext.getBean("reManager");
}

@Test
public void testReManager() {
    // Write here the code for what you wnat to test
} 
```

}

beans.xml 是您定义应用程序上下文的文件。我能想到的最好的链接就是这个

[弹簧测试支持](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/testing.html#testcontext-tx)

# youtube - Youtube 嵌入了 watch_popup 并且没有建议的视频

> ID：15478284
> 
> 赞同：2
> 
> 时间：2013-03-18T13:40:52.203
> 
> 标签：youtube, youtube-api, youtube-javascript-api

是否可以使用“watch_popup”方法嵌入 youtube 视频，而不会在视频末尾显示建议的视频 (rel=0)？我真的很喜欢“watch_popup”方法，因为它显示了分享按钮和带有高清视频的 Youtube 高清徽标。像这样的东西应该工作......但它没有。

```
<iframe title="YouTube video player" width="650" height="390" src="http://www.youtube.com/watch_popup?;v=VIDEO_ID&rel=0" frameborder="0" allowfullscreen></iframe> 
```

预先感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-09T15:30:42.837

参考：http: [//illuminea.com/remove-related-videos-from-end-of-embedded-youtube-video/](http://illuminea.com/remove-related-videos-from-end-of-embedded-youtube-video/)

转到 YouTube 上视频的单独页面。在这种情况下，单个页面位于[http://www.youtube.com/watch?v=z8GHf-aELjY](http://www.youtube.com/watch?v=z8GHf-aELjY)。

在视频底部，单击分享。

单击共享后，视频下方会打开一个新区域，其中包含用于共享视频的短链接。它还提供了一个嵌入按钮。点击那个。

当您单击“嵌入”时，会在下方打开另一个区域，该区域为您提供嵌入代码，以及一些允许您自定义视频在您的网站上的外观的选项。第一个选项是一个复选框，上面写着“视频结束时显示建议的视频”。确保未选中该框。如果您查看嵌入代码，您会看到它在视频的 URL 之后添加了一个参数：

```
?rel=0 
```

. “Rel”表示相关视频，0为二进制命令，表示编号图像

```
http://www.youtube.com/watch_popup?....... 
```

你可能也喜欢这个，所以我想我会把它扔进去，如果你想要一个快速嵌入的 youtube：

`watch?`将网址的一部分更改为`watch_popup?`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T18:55:25.030

这不是官方支持的嵌入 YouTube 视频的方式。我建议改用[iframe Player embed](https://developers.google.com/youtube/iframe_api_reference)，因为您使用的播放器可能随时停止工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-06T13:01:17.970

嵌入链接后给出“ ?rel=0&showinfo=0 ” 然后它将避免（禁用）youtube推荐的视频谢谢

# apache-flex - Actionscript/Flex 字符串到数组

> ID：15478290
> 
> 赞同：0
> 
> 时间：2013-03-18T13:41:02.757
> 
> 标签：apache-flex, actionscript

我正在使用第 3 方 Web 服务，它返回如下所示的字符串。我完全坚持如何将其解析为可用的格式。看起来它是一个数组，只是文本格式。

```
[["theData",{"something":somevalue,"details":null,"somethingElse":"something"},0]] 
```

它也可以有多个，比如

```
[["theData",{"something":somevalue,"details":null,"somethingElse":"something"},0],["theData",{"something":somevalue,"details":null,"somethingElse":"something"},0]] 
```

我尝试将 HTTPService 结果类型设置为数组/数组集合，但不起作用。我唯一能想到的就是做某种字符串拆分/连接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T13:55:48.950

对我来说，这看起来像 JSON；所以我会考虑使用 Flash Player 的[原生 JSON](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/JSON.html)类。

如果你真的想使用字符串解析；然后我会研究[split()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/String.html#split%28%29)函数；这会将它变成一个数组。但是，您似乎会被困在进行字符串解析以获取每个值。

# jquery - 在向下滑动的 div 上禁用带有 jquery 的按钮单击

> ID：15478291
> 
> 赞同：0
> 
> 时间：2013-03-18T13:41:07.253
> 
> 标签：jquery, html

所以我有一个向下滑动的 div，它显示了一个菜单，但是如果你快速单击按钮，结果就不太理想。我希望按钮在动画完成之前什么都不做，另一端也是如此。这是我到目前为止所拥有的

```
$(function () {
    $('#header .exploreExpandBtn a').live( 'click', function (e) {
        e.preventDefault();
        $(this).parent().toggleClass('open');
        $('.exploreNav').stop(true,true).slideToggle();
    })
}) 
```

和我的html

```
<h2 class="exploreExpandBtn logoBtn"><a class="ir" href="#menu-explore-menu" <strong>Explore</strong></a></h2>

<div class="exploreNav clearfix">
<div class="bgShadow clearfix">
<div class="wrap clearfix">
<?php wp_nav_menu( array( 'theme_location' => 'global-explore-menu' ) ); ?>
</div>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T13:50:57.867

尝试：

```
$(function () {
    $('#header .exploreExpandBtn a').on('click', function (e) {
        e.preventDefault();
        var $this = $(this);
        $('.exploreNav:not(:animated)').stop(true, true).slideToggle(400, function(){
            $this.parent().toggleClass('open');
        });
    });
}); 
```

请注意，我选择`400`了动画的持续时间，因为它`slideToggle`是随附的默认持续时间。文档：[http ://api.jquery.com/slideToggle/](http://api.jquery.com/slideToggle/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T13:48:33.877

使用变量检查动画是否正在进行中

```
var animDone = true; 
```

在为 div 设置动画之前

```
//Set to false before animating
animDone = false;
$('.exploreNav').stop(true,true).slideToggle(500,function(){
    //Then true when animation has been done
    animDone = true;
}); 
```

在您的按钮单击回调或任何您想要的地方，测试变量并`false`在动画正在进行时返回：

```
if(!animDone)
    return false; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T13:49:45.447

禁用单击按钮并在动画完成后启用它。

```
$(function () {
    $('#header .exploreExpandBtn a').live( 'click', function (e) {
        e.preventDefault();
        $(this).parent().toggleClass('open');
        $(this).attr('disabled', 'disabled');
        var that = this; //to refer to the link in the complete function
        $('.exploreNav').stop(true,true).slideToggle(
                 {complete: function() { $(that).removeAttr('disabled')}
        );
    })
}) 
```

# c++ - 传递具有任意数量参数的任何函数的 C++ 函数

> ID：15478292
> 
> 赞同：2
> 
> 时间：2013-03-18T13:41:09.017
> 
> 标签：c++, function, templates, arguments

这在 c++ 中可能是不可能的，但我在网上搜索并没有发现任何似乎有效的东西。

我不知道这是如何工作的，但是如果我将函数“A”传递给另一个函数“B”，我可以像这样在“A”中执行函数“B”：

```
template<typename Func>
void process(Func func) {
    func();
}

void myVoidFunction() {
    cout << "I did something!?" << endl;
}

process(myVoidFunction); // This will run myVoidFunction(); 
```

现在，我不知道如何为具有任意数量参数的函数执行此操作，我的基本理论是这样的（我希望你知道我的意思）：

```
template<typename Func>
void process(Func func, ...) {
    func(...);
}

void myNewFunction(int, int, char*) {}

process(myNewFunction, 1, 2, "Hello World!"); 
```

如果进程可以返回与给定函数相同的类型，那就更好了（如果那不是要求太多：P）

我不希望任何库这样做，我确信有一种使用 JUST C++ 的方法。请帮忙:_|

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T13:46:52.647

在 C++11 中，您可以使用可变参数模板和完美转发：

```
template<typename Func, typename... Args>
void process(Func func, Args&&...) {
    func(std::forward<Args>(args)...);
} 
```

例如：

```
#include <iostream>
#include <string>

template<typename Func, typename... Args>
void process(Func func, Args&&... args) {
    func(std::forward<Args>(args)...);
}

void myVoidFunction(std::string a, int b, double c) {
    std::cout << a << " " << b << " " << c << std::endl;
}

int main()
{
    process(myVoidFunction, "Hello", 42, 3.14);
} 
```

看一个[活生生的例子](http://liveworkspace.org/code/4oGKaO%2415)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T13:46:50.820

使用可变参数模板：

```
template<typename Func, typename Args...>
void process(Func func, Args... &&args) {
    func(std::forward<Args>(args)...);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T13:52:25.950

C++11 gives two ways to do things like this. One is variadic templates and the other is `std::bind`. Without C++11, you're looking for `boost::bind` but you said no libraries. That leaves you with either rolling your own version of `bind` or doing something like this:

```
template<typename Func> void process(Func func) { func(); }
template<typename Func, typename Arg1Type> void process(Func func, Arg1Type arg1) { func(arg1); }
template<typename Func, typename Arg1Type, typename Arg2Type> void process(Func func, Arg1Type arg1, Arg2Type arg2) { func(arg1, arg2); }
//etc. 
```

`boost::function` and `boost::bind` look a lot like this.

# android - Android中的Textview包装

> ID：15478297
> 
> 赞同：2
> 
> 时间：2013-03-18T13:41:15.543
> 
> 标签：android, textview, word-wrap

我必须`Textview`在 Android 中显示从`xml`提要中获取的内容。

让我们把这是我的`Textview`：

```
Mallika Sherawat's upcoming movie Dirty Politics 
```

在这里，我为这些动态创建了布局`Textview`：

```
LinearLayout.LayoutParams textLayoutParams = new LinearLayout.LayoutParams(LayoutParams.MATCH_PARENT, 50);
textLayoutParams.gravity = Gravity.CENTER;

TextView tv = new TextView(this);
tv.setSingleLine(false);
tv.setEllipsize(null);
tv.setHorizontallyScrolling(false);
tv.setTextColor(Color.parseColor("#a7a9ac"));
tv.setText(Appscontent.Sub_arraylisttwo.get(j));
tv.setLayoutParams(textLayoutParams);
tv.setBackgroundColor(Color.parseColor("#414042")); 
```

我在这里提到了宽度 50。

所以文本在小内容上显示得很好。`Textview`有时我有更多内容`Textview`，这意味着我怎样才能显示`Textview`如下：

```
Mallika Sherawat's 
upcoming movie Dirty... 
```

我的意思是文本必须在文本扩展后显示最多 2 行，这意味着只需添加`...`上面示例中的内容。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T13:46:04.303

尝试：

```
tv.setMaxLines(2);
tv.setEllipsize(TextUtils.TruncateAt.END); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-13T04:29:39.680

尝试设置 android:ems="10" 它会使你的edittext变得那么宽并包裹文本

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T13:52:36.913

尝试将每个 TextView 的 android:ellipsize 设置为 none。有关更多详细信息，请参阅有关此属性的文档。

来自 xml：

```
<TextView ... android:ellipsize="none" /> 
```

从代码：

```
TextView textView = new TextView(context);
 ...
 textView.setEllipsize(null); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T13:54:08.293

您可以尝试为`TextView`in定义文本`strings.xml`。然后，如果您从 html 设置，则它可能会根据屏幕大小换行：

所以你可以试试这个：

```
<string name="nice_html">
<![CDATA[Don&apos;t worry we will never share this with anyone<br/>
By Clicking register you are indicating that you have read and agreed to the <br/>
 <u>Terms of services</u>  and <u>Privacy Policy</u>
]]></string> 
```

然后，在您的代码中：

```
TextView foo = (TextView)findViewById(R.id.foo); foo.setText(Html.fromHtml(getString(R.string.nice_html))); 
```

# jquery - 如何更改 jQuery.ui 选项卡中的背景颜色

> ID：15478303
> 
> 赞同：0
> 
> 时间：2013-03-18T13:41:41.820
> 
> 标签：jquery, jquery-ui, jquery-ui-tabs

我正在尝试更改 jquery.ui 选项卡中选项卡的背景颜色。通常它以默认颜色工作。我的代码是

```
<div id="tabs">
    <ul>
        <li><a href="#1"><span>Home</span></a></li>
        <li><a href="#2"><span>Home</span></a></li>
    </ul>

    <div  id="1">
        <p>MY DATA</p>
    </div>
    <div id="2">
        <p>MY DATA 2nd</p>
    </div>
</div>

<script>
   $( "#tabs" ).tabs();
   $('#tabs').bind('tabsshow', function(event, ui) { 
        $('#tabs').css('background-color', '#231f20');
    });
</script> 
```

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T13:44:14.177

```
.ui-tabs .ui-tabs-nav a
{
   background-color: #231f20;
} 
```

# ios - Restkit + Objective-c - 多次调用同一个 Web 服务

> ID：15478304
> 
> 赞同：0
> 
> 时间：2013-03-18T13:41:44.897
> 
> 标签：ios, objective-c, restkit

我是restkit和iOS的新手。我正在使用 xcode 4.2 和 RestKit 0.2。我一直在开发一个 iPhone 应用程序，它与我创建的一些 REST Web 服务进行通信，现在我遇到了一个问题。我的一些网络服务被多次调用。第一个请求运行没有问题，但是当我再次尝试拨打电话时，我收到此错误：

> 'NSInternalInconsistencyException'，原因：'无法为与现有请求描述符相同的对象类添加请求描述符。

**我确实了解此错误的含义**，但尚未找到实现可重用调用的方法。我有一种感觉，我做错了。以下是我用来调用 Web 服务的函数之一：

```
- (void) restAddPlayer:(addPlayer*)add block:(void (^)(id))block{
// Load the object model via RestKit
RKObjectManager *objectManager = [RKObjectManager sharedManager];
RKObjectMapping *categoryRequestMapping = [RKObjectMapping requestMapping];
[categoryRequestMapping addAttributeMappingsFromDictionary:@{@"gName": @"groupName",@"pass":@"pass"}];

RKObjectMapping *reqMapping = [RKObjectMapping requestMapping];
[reqMapping addAttributeMappingsFromDictionary:@{@"plName": @"playerName"}];
[reqMapping addRelationshipMappingWithSourceKeyPath:@"groupInfo" mapping:categoryRequestMapping];
RKRequestDescriptor *requestDescriptor = [RKRequestDescriptor requestDescriptorWithMapping:reqMapping objectClass:[addPlayer class] rootKeyPath:nil];

[objectManager addRequestDescriptor:requestDescriptor];
objectManager.requestSerializationMIMEType = RKMIMETypeJSON;

[objectManager postObject:add path:@"addPlayer"parameters:nil success:^(RKObjectRequestOperation *operation, RKMappingResult *mappingResult) {

                      NSArray* statuses = [mappingResult array];
                     //NSLog(@"Loaded statuses: %@", statuses);
                     // _result = [statuses objectAtIndex:0];
                      block(statuses);

                  }
                 failure:^(RKObjectRequestOperation *operation, NSError *error){
                     NSLog(@"Hit error: %@", error);
                     block(nil);
                 }
    ];
} 
```

我知道我正在添加一个请求描述符，当我再次调用该函数时，它试图添加另一个，因此出现错误。我想知道的是如何处理这个问题，这样我就可以在发布的对象中使用不同的信息多次调用 Web 服务。

提前感谢大家。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T13:48:48.313

此例程中的所有内容，除了“postObject”调用可能应该在其他地方，例如在应用程序启动时在您的应用程序委托中。

您正在设置映射、关系和请求描述符。您无需为每次调用都指定它们。只需设置一次，然后当您准备好时，只需调用“postObject”即可。您的 serializationType 可能也是如此——除非某些 REST 端点返回 XML 而其他端点返回 JSON，否则您可能可以设置一次，然后忘记它。

# junit - org.hibernate.util.JDBCExceptionReporter - 用户缺少权限或找不到对象

> ID：15478305
> 
> 赞同：1
> 
> 时间：2013-03-18T13:41:48.693
> 
> 标签：junit, hsqldb

堆栈跟踪：WARN org.hibernate.util.JDBCExceptionReporter - SQL 错误：-5501，SQLState：42501 错误 org.hibernate.util.JDBCExceptionReporter - 用户缺少权限或找不到对象：TEST_CASE

我的 applicationContext-junit-test.xml 文件：

```
 <?xml version="1.0" encoding="UTF-8"?>
    <beans xmlns="http://www.springframework.org/schema/beans"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
        xsi:schemaLocation="http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/context
    http://www.springframework.org/schema/context/spring-context-3.0.xsd">

            <bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource"
            destroy-method="close">
            <property name="defaultAutoCommit" value="false">
            </property>
            <property name="driverClassName">
                <value>org.hsqldb.jdbcDriver</value>
            </property>
            <property name="url">
                <value>jdbc:hsqldb:mem:testcasedb;shutdown=true;hsqldb.write_delay=false;</value>
            </property>
            <property name="username">
                <value>sa</value>
            </property>
            <property name="password">
                <value></value>
            </property>

        </bean>
        <bean id="sessionFactory"
            class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
            <property name="dataSource">
                <ref bean="dataSource" />
            </property>
            <property name="hibernateProperties">
                <props>
                    <prop key="hibernate.dialect">org.hibernate.dialect.HSQLDialect</prop>
                    <prop key="hibernate.show_sql">true</prop>

                    <!-- <prop key="hibernate.hbm2ddl.auto">validate</prop> -->
                    <prop key="hibernate.connection.autocommit">true</prop>
                </props>
            </property>
            <property name="annotatedClasses">
                <list>
                    <value>com.org.team.testcaseapi.dto.request.TestCase</value>
                </list>
            </property>
        </bean>
    </beans>

TestCase.java file:

    @Entity
    @Table(name = "test_case", schema = "testcase")
    @JsonSerialize(include = JsonSerialize.Inclusion.NON_NULL)
    @XmlRootElement
    public class TestCase implements Serializable {

        @Id
        @GeneratedValue(strategy = GenerationType.AUTO)
        @Column(name = "ID", nullable = false)
        private Long Id;

        public Long getId() {
            return Id;
        }
        public void setId(Long id) {
            Id = id;
        }
    }

**DBUtil.java** runs the DDL and DML hsql files and DB is created successfully(I have printed DB on console).

      public class DBUtil {
                public static void createTestSchema() {
                    String sqlPath = "src/test/resources/sql";
                        ApplicationContext dbCtx = new ClassPathXmlApplicationContext("applicationContext-junit-test.xml");
                BasicDataSource ds = dbCtx.getBean(BasicDataSource.class);
                Connection conn = ds.getConnection();
                        Statement st = null;
                    try {
                        System.out.println("Creating Schema !");
                        File dir = new File(sqlPath);
                        File[] files = dir.listFiles();
                        SqlFile sqlFile;
                        for (File file : files) {
                                sqlFile = new SqlFile(file);
                                sqlFile.setConnection(conn);
                                sqlFile.execute();
                            }
                        }
    } 
```

**DaoImpl.java**
我的 HQL 查询获取零结果（如果我将 hbm2ddl.auto 设置为“create”） 我的 HQL 查询抛出 JDBCExceptionReporter：用户缺少权限或找不到对象（如果我不使用 hbm2ddl.auto 属性）

```
public class DaoImpl implements Dao {
    @Autowired
    private SessionFactory sessionFactory;

    public void getAllData(){

        String hql = "FROM TestCase";
        Session session = sessionFactory.openSession();
        List<TestCase> results;
        try {
            Query query = session.createQuery(hql);
            results = query.list();  // list is empty : []

        } catch (Exception e) {

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T13:16:30.207

来自 TestCase.java

我删除了@Table 中的模式，它起作用了。我还删除了 DDL 中的 Create Schema 和类似的参考资料。

因此更新后的 TestCase.java 将如下所示：

```
@Entity
@Table(name = "test_case")
@JsonSerialize(include = JsonSerialize.Inclusion.NON_NULL)
@XmlRootElement
public class TestCase implements Serializable {

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    @Column(name = "ID", nullable = false)
    private Long Id;

    public Long getId() {
        return Id;
    }
    public void setId(Long id) {
        Id = id;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T22:19:25.607

您的数据库 URL 属性对于内存数据库是错误的。正确使用file:和mem:数据库的属性如下：

```
 <property name="url">
        <value>jdbc:hsqldb:file:testcasedb;shutdown=true;hsqldb.write_delay=false;</value>

    <property name="url">
        <value>jdbc:hsqldb:mem:testcasedb</value> 
```

如果您将 shutdown=true 与 mem: 数据库一起使用，则会在最后一个打开的连接关闭后立即删除所有数据。使用文件数据库，保存所有数据。

# php - PHP shell_exec() 有时不起作用

> ID：15478306
> 
> 赞同：2
> 
> 时间：2013-03-18T13:41:50.540
> 
> 标签：php, linux, shell-exec

我有一个 PHP 脚本，可以从供应商合作伙伴处导入数据。它需要做的一件事是通过 shell_exec() 调用另一个脚本，然后处理图像文件并将其上传到 Amazon S3 存储桶。我现在正在终端中查看此脚本的输出，过了一会儿，我看到了一系列消息：

`Warning: shell_exec(): Unable to execute 'php -f /path/to/second/script.php /path/to/image/to/process.jpg' in /path/to/this/script.php on line 453`

奇怪的是，这个脚本在这个脚本中被多次调用，并且开始工作，然后停止。它也可以从其他脚本中调用，并且在这些脚本中运行良好。当我复制它无法运行的命令并将其粘贴到自己身上时，它总是有效的。显然 PHP 有时能够运行它。

我在每行运行时都放置了内存使用回显，我看到它在正常工作时高达 148MB，在出错时低至 77MB。（这是在主脚本中，而不是无法运行的辅助脚本）。随着错误开始出现，内存使用率似乎越来越低。我第一次注意到它大约是 88MB，然后下降到 85MB、81MB 和 77MB。

我不清楚是什么可能导致脚本有时工作，有时不工作。上次我检查 PHP 不可能决定它是否可以被打扰，并且它不会被磨损，那么为什么它可以正常工作很长时间（我说的是数百个，如果不是数千个成功的话下载）然后突然停止工作。并不是说它正在尝试处理无法下载的图像，因为脚本中有一个条件阻止了这种情况，`image does not exist`即使它无法处理其余部分，我也经常看到负载。我最终不得不编写另一个脚本，然后再次运行并处理所有丢失的图像。

任何想法都会非常感激地收到！

顺便说一句，这是在一个带有 Amazon Linux OS 的大型 AWS EC2 实例上运行的。我们正在运行 PHP5.3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-11-17T14:12:56.797

我正在处理同样的问题，我发现 /paht/to/php 是 /usr/bin/php5

# boost-filesystem - 未找到 Boost 文件系统

> ID：15478309
> 
> 赞同：0
> 
> 时间：2013-03-18T13:41:56.257
> 
> 标签：boost-filesystem

在 Oracle Linux 5.5 中安装 PION 时出现以下错误：

```
 Unable to link with the boost filesystem library 
```

奇怪的是可以找到其他库并且在同一目录中

谁能帮我解决这个问题。。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-07T16:21:50.500

您需要安装开发包。该过程取决于选择的系统/发行版。在 Ubuntu 中会是

```
sudo apt-get install libboost-filesystem1.49-dev 
```

# android - 是否可以在不从 PreferenceActivity 继承的情况下在 Activity 中使用 Android 偏好管理？

> ID：15478312
> 
> 赞同：0
> 
> 时间：2013-03-18T13:42:02.640
> 
> 标签：android, android-activity, android-preferences

我想构建我的自定义首选项活动而不从 PreferenceActivity 继承它，但**我想保留标准的 xml Android 首选项管理**。可能吗？

就像是：

```
public class MainActivity extends MyCustomActivity {

...
<<get preferences>>
<<manage click events>>
...

} 
```

`MyCustomActivity`不扩展任何 PreferenceActivity。

**我不想构建我的 UI 来编辑首选项，我想使用标准的 Android UI！**

# c# - 如何使用 openpop .net 检索邮件每个附件的大小

> ID：15478326
> 
> 赞同：2
> 
> 时间：2013-03-18T13:42:55.720
> 
> 标签：c#, asp.net, openpop

我使用 openpop .net 库通过 POP3 从邮件服务器检索邮件。一切正常，但我无法检索每个邮件附件的大小。我创建了 GetMessageSize(i) 但这个大小是所有附件的总和。

然后问题是我如何检索每个附件的大小。

有谁能够帮助我？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T13:52:51.833

使用[`attachment.Body`](http://hpop.sourceforge.net/documentation/OpenPop~OpenPop.Mime.MessagePart.Body.html).

```
foreach(var attachment in message.FindAllAttachments())
{
    long byteSize = attachment.Body.Length;
} 
```

# r - R中逻辑回归公式的实现

> ID：15478327
> 
> 赞同：6
> 
> 时间：2013-03-18T13:42:58.237
> 
> 标签：r, linear-regression

我正在尝试使用 R 中的随机梯度下降来构建我自己的逻辑回归函数，但是我现在所拥有的使权重无限制地增长，因此永远不会停止：

```
# Logistic regression
# Takes training example vector, output vector, learn rate scalar, and convergence delta limit scalar
my_logr <- function(training_examples,training_outputs,learn_rate,conv_lim) {
  # Initialize gradient vector
  gradient <- as.vector(rep(0,NCOL(training_examples)))
  # Difference between weights
  del_weights <- as.matrix(1)
  # Weights
  weights <- as.matrix(runif(NCOL(training_examples)))
  weights_old <- as.matrix(rep(0,NCOL(training_examples)))

  # Compute gradient
  while(norm(del_weights) > conv_lim) {

    for (k in 1:NROW(training_examples)) {
      gradient <- gradient + 1/NROW(training_examples)*
        ((t(training_outputs[k]*training_examples[k,]
            /(1+exp(training_outputs[k]*t(weights)%*%as.numeric(training_examples[k,]))))))
    }

    # Update weights
    weights <- weights_old - learn_rate*gradient
    del_weights <- as.matrix(weights_old - weights)
    weights_old <- weights

    print(weights)
  }
    return(weights)
} 
```

该功能可以使用以下代码进行测试：

```
data(iris) # Iris data already present in R    
# Dataset for part a (first 50 vs. last 100)
iris_a <- iris
iris_a$Species <- as.integer(iris_a$Species)
# Convert list to binary class
for (i in 1:NROW(iris_a$Species)) {if (iris_a$Species[i] != "1") {iris_a$Species[i] <- -1}}    
random_sample <- sample(1:NROW(iris),50)

weights_a <- my_logr(iris_a[random_sample,1:4],iris_a$Species[random_sample],1,.1) 
```

[我用Abu-Mostafa's](http://work.caltech.edu/library/091.html)仔细检查了我的算法，如下所示：

1.  初始化权重向量
2.  对于每个时间步计算梯度：
    `gradient <- -1/N * sum_{1 to N} (training_answer_n * training_Vector_n / (1 + exp(training_answer_n * dot(weight,training_vector_n))))`
3.  `weight_new <- weight - learn_rate*gradient`
4.  重复直到重量增量足够小

我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T08:22:28.973

从数学的角度来看，权重向量上的不受约束的大小不会产生唯一的解决方案。当我将这两行添加到分类器函数时，它分两步收敛：

```
# Normalize
weights <- weights/norm(weights) 
```

...

```
# Update weights
weights <- weights_old - learn_rate*gradient
weights <- weights / norm(weights) 
```

我无法让@SimonO101 工作，而且我没有将这段代码用于实际工作（有类似的内置函数`glm`），所以我理解的循环就足够了。整个函数如下：

```
# Logistic regression
# Takes training example vector, output vector, learn rate scalar, and convergence delta limit scalar
my_logr <- function(training_examples,training_outputs,learn_rate,conv_lim) {
  # Initialize gradient vector
  gradient <- as.vector(rep(0,NCOL(training_examples)))
  # Difference between weights
  del_weights <- as.matrix(1)
  # Weights
  weights <- as.matrix(runif(NCOL(training_examples)))
  weights_old <- as.matrix(rep(0,NCOL(training_examples)))

  # Normalize
  weights <- weights/norm(weights)

  # Compute gradient
  while(norm(del_weights) > conv_lim) {

    for (k in 1:NCOL(training_examples)) {
      gradient <- gradient - 1/NROW(training_examples)*
        ((t(training_outputs[k]*training_examples[k,]
            /(1+exp(training_outputs[k]*t(weights)%*%as.numeric(training_examples[k,]))))))
    }
#     gradient <- -1/NROW(training_examples) * sum(training_outputs * training_examples / (1 + exp(training_outputs * weights%*%training_outputs) ) )

    # Update weights
    weights <- weights_old - learn_rate*gradient
    weights <- weights / norm(weights)
    del_weights <- as.matrix(weights_old - weights)
    weights_old <- weights

    print(weights)
  }
    return(weights)
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T15:08:25.417

有几个问题。首先，您可以更好地利用 R 的矢量化方法。其次，我不是随机梯度下降方面的专家，但是您在问题下方给出的算法与您在函数中计算梯度的方式不对应。仔细检查这段代码，但它似乎收敛了，*我认为*它遵循 Abu-Mostfafa 的。我收集到你想计算这个梯度；

```
gradient <- -1/N * sum(training_outputs * training_examples / (1 + exp(training_outputs * dot( weights ,training_outputs) ) ) ) 
```

所以你算法的这一部分应该读...

```
while(norm(del_weights) > conv_lim) {  
gradient <- -1 / NROW(iris_a) * sum( training_outputs * training_examples / ( 1 + exp( training_outputs * as.matrix(training_examples) %*% weights ) ) )

# Update weights
weights <- weights_old - learn_rate*gradient
del_weights <- as.matrix(weights_old - weights)
weights_old <- weights
print(weights) 
```

}

您可以使用以下方法更轻松地从 Species 变量创建二元分类：

```
iris_a$Species <- as.numeric( iris_a$Species )
iris_a$Species[ iris_a$Species != 1 ] <- -1 
```

我无法告诉您返回的结果是否合理，但该代码应遵循第 2 步。仔细检查每个步骤，并记住 R 是矢量化的，因此您可以在没有循环的情况下对向量进行元素明智的操作。例如：

```
x <- 1:5
y <- 1:5
x*y
#[1]  1  4  9 16 25 
```

# c# - DevExpress'TextEdit 控件上的 FormatException 无法存储我的十进制值

> ID：15478337
> 
> 赞同：1
> 
> 时间：2013-03-18T13:43:36.157
> 
> 标签：c#, wpf, devexpress, decimal, textedit

我有一个 DevExpress（对于这个问题，我将其称为“DX”）控件，`TextEdit`.

这是我所拥有的样本

```
<Grid>
    <dxe:TextEdit x:Name="te" MaskType="Numeric" Mask="###,##0.###"
                  MaskUseAsDisplayFormat="True" Validate="te_Validate"
                  Text="{Binding myValeur, UpdateSourceTrigger=PropertyChanged}"/>
</Grid> 
```

面具`Mask="###,##0.###"`是正常的，我仅限于 9 个数字和 3 个小数。

我在我的代码隐藏中这样做

```
decimal myDecimalValue = 0.0m;
private void te_Validate(object sender, DevExpress.Xpf.Editors.ValidationEventArgs e)
{
    Thread Thread_te_Validate = new Thread(delegate()
    {
        this.Dispatcher.BeginInvoke(new Action(delegate()
        {
            if (!String.IsNullOrEmpty(te.Text))
                myDecimalValue = Convert.ToDecimal(te.Text);
        }));
    });
    Thread_te_Validate.IsBackground = true;
    Thread_te_Validate.Start();
} 
```

此代码适用于一个奇怪的问题。如果我`100`在 TextEdit 中写入，则该值已正确转换。如果我写`100.123`（所以我放了一些小数），应用程序会因错误`FormatException was unhandled by user code` *（法语翻译）*而崩溃。

详细来说，我有`{"The format of the input string is incorrect."}`

崩溃时 TextEdit.Text 的值很好`100.123`，但仅存储小数点`100`。

我是法国人，使用法国文化，所以“逗号”是 UI 的小数分隔符，但变量正确存储，小数点分隔符中有一个“点”。

**编辑：** 我测试了这段代码，同样的错误正在发生。所以我认为问题在于转换为十进制。`string`获取带小数的值但转换错误。

```
if (!String.IsNullOrEmpty(te.Text))
{ 
    string test1 = te.Text;
    myDecimalValue = Convert.ToDecimal(test1);
} 
```

**编辑 2：** 此代码也不能正常工作。

```
if (!String.IsNullOrEmpty(te.Text))
{ 
    string test1 = te.Text;
    myDecimalValue = decimal.Parse(test1);
} 
```

**编辑 3：** 我还尝试在转换过程中强制文化。使用此代码，我无法在 TextEdit 中插入小数，只能插入整数。

```
myDecimalValue = Convert.ToDecimal(te.Text, CultureInfo.InvariantCulture); 
```

我的**特定**文化会发送`FormatException`错误。

```
myDecimalValue = Convert.ToDecimal(te.Text, CultureInfo.CreateSpecificCulture("fr-FR")); 
```

我的**中立**文化也会发出`FormatException`错误。

```
myDecimalValue = Convert.ToDecimal(te.Text, CultureInfo.CreateSpecificCulture("fr")); 
```

**对我有用的解决方案：** 此代码对我有用。我在 App.xaml 中的“fr”处定义了我的语言，但显然这还不够。所以问题实际上是文化，当然还有十进制字符。

对我来说，我需要用“逗号”替换“点”，因为 DevExpress 中的文化向我展示了良好的文化，但存储在美国文化中。

```
if (!String.IsNullOrEmpty(myDXTextEdit.Text))
    myDecimalValue = Convert.ToDecimal(myDXTextEdit.Text.Replace(".", ",")); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T08:40:33.987

默认情况下`en-US`，无论系统设置如何，WPF 都将其用作区域性。我相信您没有覆盖此行为，而且您已将“点”作为小数分隔符包含在 TextEdit.Mask 中。到现在为止还挺好。那是因为您已收到`100.23`（带有“点”小数分隔符）作为值。但是，十进制转换使用您当前的文化（即`French`），`IFormatProvider`因此您无法使用这种文化将文本转换为十进制值（这是异常的原因）。

为避免该异常，请指定正确的转换文化（您可以使用 InvariantCulture 代替`en-US`）：

```
myDecimalValue = Convert.ToDecimal(te.Text, CultureInfo.InvariantCulture); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T14:07:38.470

经过大量研究，事实证明存在两个问题。

首先，TextEdit 的绑定是在 TextEdit 修改的变量上进行的，这会产生奇怪的循环和输入小数的错误。

其次，即使我的应用程序是在法国文化中定义的，它仍然必须强制`String.Replace (".", "")`才能正确执行转换。

# r - 访问一个月的第一个工作日

> ID：15478341
> 
> 赞同：2
> 
> 时间：2013-03-18T13:43:59.527
> 
> 标签：r, date, time-series

我需要知道给定月份的第一个工作日，R 中是否有一些包含相关功能的包？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-18T14:12:16.477

timeDate包有一个功能**可以**`isBizday`帮助你。将有更优雅的方法将`dateTime`对象转换为其他格式，但这至少应该让你开始。

```
library(timeDate)

## Example data
dates <- as.Date("2013-01-01") + 0:364
Dates <- as.timeDate(dates)

## Extract the first business day of each month
bizDates <- dates[isBizday(Dates, holidays=holidayLONDON())]
firsts <- tapply(bizDates, months(bizDates), min)
sapply(firsts, function(X) as.character(as.Date(X)))
#            1            2            3            4            5            6 
# "2013-01-02" "2013-02-01" "2013-03-01" "2013-04-01" "2013-05-01" "2013-06-03" 
#            7            8            9           10           11           12 
# "2013-07-01" "2013-08-01" "2013-09-03" "2013-10-01" "2013-11-01" "2013-12-02" 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-18T14:07:23.550

假设您想要该月的第一天不是星期六或星期日：

```
businessDay<-function(month,year){
  #3 first dates of the month is sufficient
  d <- as.POSIXlt(paste(year,month,1:3,sep="-")) 
  #POSIXlt object contains the info about the weekday as number 0-6 (starting Sunday)
  d[which(d$wday>0 & d$wday<6)[1]]
}

businessDay(3,2013)
[1] "2013-03-01" 
```

或者，如果您想要当天的名称：

```
businessDay<-function(month,year){
  d <- as.POSIXlt(paste(year,month,1:3,sep="-"))
  weekdays(d[which(d$wday>0 & d$wday<6)[1]])
}

businessDay(1,2013)
[1] "friday" 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-18T14:13:21.910

您可以使用`isBusinessDay` from `RQuantLib`，它检查一天是否是给定日历的工作日。一个想法是给一个月的第一天，并采取最小的工作日

例如，这里 2009 年 4 月的第一个工作日是：

```
library(RQuantLib)
dates <- seq(from=as.Date("2009-04-01"), to=as.Date("2009-04-05"), by=1)
min(dates[isBusinessDay("UnitedKingdom", dates)])
"2009-04-01" 
```

# iphone - 奇怪的问题 - Facebook 生日现在不同步

> ID：15478350
> 
> 赞同：0
> 
> 时间：2013-03-18T13:44:22.580
> 
> 标签：iphone, facebook, sync

我不明白我的应用程序突然出了什么问题。我能够实现用户登录，获取朋友的详细信息，如姓名、生日、图片等，甚至能够同步这些信息并将这些详细信息保存到我的数据库中。但是令我惊讶的是，在我的应用程序运行了几次之后，我遇到了模拟器崩溃问题，并且可以在控制台中看到下面的登录信息：

**无法向引导服务器注册 com.myApp.debug。错误：未知错误代码。这通常意味着该进程的另一个实例已经在运行或挂在调试器中。程序收到信号：“SIGABRT”。**

我已经搜索了解决方案，并在有关 stack over flow 的一些帖子中发现“如果重新启动模拟器和 xcode 不能解决您的问题，您需要重新启动您的 mac，因为它对我来说非常适合 xcode 4.2/4.3 ”，并且工作起来就像在我的情况下也有魔法！

但是当我运行应用程序时发生的事情是当我单击 Facebook 按钮时，它会将用户导航到权限和授权页面，因为我已经授权了我的应用程序，它显示消息“您的应用程序已经授权，单击确定继续'。

**问题：**当我点击“确定”按钮时，它之前导航到我的同步设置页面，但现在它正在退出应用程序并进入后台。当我选择应用程序时，它会带我进入同步设置页面，但是当我点击“ Sync'按钮，之前朋友的详细信息被同步并保存到db，但现在我可以在日志中看到HTTP错误消息，即：

**错误：HTTP 状态码：400**

我在谷歌上搜索了解决方案，但徒劳无功，在[这里](https://stackoverflow.com/questions/7178962/iphone-app-crashes-after-first-facebook-connect-authorization-login?rq=1)和[那里](https://stackoverflow.com/questions/12805743/facebook-sdk-3-1-error-http-status-code-400/13415309#13415309)找到了一些帖子，这很无助。

**注意：我正在使用 Facebook 3.0 SDK，目前我正在使用 Xcode 4.2，我没有使用 Facebook 最新版本的 SDK，即 3.2，因为我听说它需要 4.5 及更高版本的 Xcode。那里还有另一个限制让我下载 Xcode 4.5，因为它需要 Mac os x 17.1 及更高版本，但我当前的版本是 Mac os x 16.8 Snow Leapord。有一种升级方法我同意，但到目前为止我没有时间做所有东西，我需要结束我的申请。**

因此，如果有人熟悉 Facebook SDK 3.0，请帮助我摆脱困境！

需要帮助。提前谢谢大家:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T12:21:34.687

我找到了问题的解决方案，我发现我的应用程序的另一个实例已经挂在模拟器中，当我删除它时，一切正常。

希望它可以帮助一些人，谢谢:)

# ruby - Ruby 三元运算符和 elsif

> ID：15478357
> 
> 赞同：2
> 
> 时间：2013-03-18T13:44:42.040
> 
> 标签：ruby

我想`if...elsif`使用三元语法编写语句。我可以`ARGV[1]`在这个语句中添加另一个检查吗？

```
test-expression ? if-true-expression : if-false-expression
ARGV[1] == "home" ? (installabra) : (puts menuInstall) 
```

- 这行得通

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-18T14:01:06.383

任何你可以做的事`if...elsif...else...end`

```
if cond1
  stmt1
elsif cond2
  stmt2
elseif cond3
  stmt3
else
  stmt4
end 
```

您可以使用嵌套的三元运算符：

```
cond1 ? stmt1 : (cond2 ? stmt2 : (cond3 ? stmt3 : stmt4))) 
```

或者更不清晰，省略括号：

```
cond1 ? stmt1 : cond2 ? stmt2 : cond3 ? stmt3 : stmt4 
```

但请考虑哪些代码更清晰、更易于维护。

在您的问题中，您询问是否可以`ARGV[1]`在嵌套条件中进行另一个测试。如果您的条件总是在测试`ARGV[1]`相等性，那么 case 语句更好：

```
case ARGV[1]
when 'home'
  installabra
when 'away'
  goaway
else
  puts menuInstall
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T13:59:21.130

不是 100% 我完全理解了你的问题....以下是否达到了你所追求的目标？

```
x = ARGV[0].to_i
y = if x == 1 then "one"
    elsif x == 2 then "two"
    else "unknown"
    end

puts "x = #{x}, y = #{y}" 
```

这超越了三元语法，但为您提供了更大的灵活性。

输出：

```
$ ruby test.rb 2
x = 2, y = two 
```

# java - List/HashSet 中使用的自定义类

> ID：15478360
> 
> 赞同：1
> 
> 时间：2013-03-18T13:44:49.623
> 
> 标签：java, list, equals, hashcode, hashset

我有一个自定义类，如下所示：

```
public class customClass(){
    private int keyCode;
    private boolean up;
    private String toTrigger;

    public String getTrigger();
    public boolean up();
    public int keyCode();
} 
```

拥有独特价值列表的最佳性能方式是什么？

我在考虑一个 HashSet 但我如何确保它是我的 customClass 的唯一唯一实例？

我需要覆盖什么？等于和哈希码？这会确保我的 CustomClass 哈希集只有唯一的实例吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T13:50:14.777

如果 a.equals(b) 为真，那么 hashcode()也**必须**相同。

*   在您的自定义类中同时覆盖 .equals() 和 .hashCode()。

    使用自定义类的相同字段来计算用于在 .equals() 中检查相等性的 hashCode。

*   是的，它将确保您的 customClass 在哈希集中只有唯一的实例。所以去吧。

# sql - sp_executesql 使我的动态查询运行速度慢得多

> ID：15478361
> 
> 赞同：0
> 
> 时间：2013-03-18T13:44:58.480
> 
> 标签：sql, sql-server

我有一个以两种方式编写的查询。一旦像这样：

```
declare @var1 int
declare @var2 int

set @var1 = 1
set @var2 = 50

declare @myQuery = nvarchar(max)
set @myQuery = 'INSERT INTO someTable
                @var1
                WHERE something = @var2'

EXEC sp_executesql @myQuery,
    N'@var1 int,
    @var2 int', 
```

我也有查询：

```
declare @var1 int
declare @var2 int   
set @var1 = 1
set @var2 = 50

INSERT INTO someTable
@var1
WHERE something = @var2 
```

我真正的查询要长得多而且复杂得多。第一种方式大约需要 4 分钟，而第二种方式大约需要 20 秒。到底是怎么回事！？我一直在尝试研究类似的问题，并且不断看到有关查询缓存的事情，但通常是因为人们不是以第一种方式这样做，他们只是在 nvarchar 上执行 exec。

我对 SQL 非常缺乏经验，完全迷失了方向。任何帮助都会很棒。

我这样做的原因是我从 C# 调用存储过程并将其传递给参数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T14:06:41.943

如果您使用的是 SSMS，则可以选择显示查询的执行计划。看一下，看看每种情况有什么不同。

我对您采用第一种方式的原因感到困惑...... sp_executesql 是您存储过程的一部分吗？或者您只是想从 SSMS 模拟存储过程？

# matlab - 取出维纳过程的随机时间

> ID：15478364
> 
> 赞同：1
> 
> 时间：2013-03-18T13:45:09.480
> 
> 标签：matlab, stochastic-process

首先，我是 matlab 和这个论坛的新手，所以请原谅我的无知。

我通过以下方式生成了一个标准的维纳过程（我自己编的，所以如果它是愚蠢的或错误的，我想知道）。

```
s =0.0001; % stepsize
t = [0:s:T]; % divide interval into steps

G=sqrt(s)*randn(length(t),1); 

Y=cumsum(G); 
```

现在我想在一些随机时间找到它的值，比如：

```
u=rand(4,1) 
```

我想（用谷歌和耐心）做类似的事情

```
for i = 1:length(u)
   row(i) = find(t < u(i),1,'last');
end 
```

然后简单地从 Y 中取出值，但我想找到更直接的方法 - 你有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T14:25:09.687

您对 in 中的每个元素所做的基本上`u`是在`t`. 尝试以下单线：

```
sum(bsxfun(@lt, repmat(t(:)', numel(u), 1), u(:)), 2) 
```

这是做什么的：

1.  使用 生成矩阵`repmat`，其中每行等于`t`。
2.  `bsxfun`使用小于对应元素的元素检查每一行`u`。
3.  累积每行中的所有 1，本质上为您提供最后一个较小元素的索引。

顺便说一句，没有必要将括号 ( `[]`) 放入`t = [0:s:T]`。冒号运算符 ( `:`) 已经输出了一个向量。

# c# - 从模型中删除数据注释并将它们放在单独的类中

> ID：15478365
> 
> 赞同：2
> 
> 时间：2013-03-18T13:45:09.717
> 
> 标签：c#, asp.net-mvc, entity-framework

嗨，我正在开发一个 asp.net mvc 应用程序，我被要求从我的模型中删除数据注释并将它们放在一个单独的类中。我想到的第一件事是为此使用 Fluent API。

经过一番研究，我意识到 Fluent API 只能用于代码优先方法，所以我不知道应该如何解决这个问题。

我正在使用数据库优先方法。

这是我的一个模型的样子：

```
public class BookModel
{
    public int Id { get; set; }

    [Required]
    public string Name { get; set; }

    [Required]
    public string Author { get; set; }

    [Required]
    [DataType(DataType.MultilineText)]
    public string Description { get; set;}

    [Required]
    [DisplayFormat(DataFormatString = "{0:d}" , ApplyFormatInEditMode=true)]
    public DateTime PublicationDate { get; set; }

    [Required]
    public int CategoryId { get; set; }

    [Required]
    [DataType(DataType.Currency)]
    [DisplayFormat(DataFormatString="{0:c}")]
    public decimal Price { get; set; }

    public string BookUrl { get; set; }
} 
```

那么任何人都可以指出我正确的方向以解决我的问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T14:01:08.160

查看 Buddy Classes 的概念

[模型验证](http://weblogs.asp.net/scottgu/archive/2010/01/15/asp-net-mvc-2-model-validation.aspx)

[模型验证 2](https://stackoverflow.com/questions/6553380/where-do-you-put-your-validation-in-asp-net-mvc-3/6553406#6553406)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T13:56:05.373

您可以创建将（仅）代表每个视图的 ViewModel 类。您可以在它们上添加验证逻辑。

如果你想让你的类看起来干净，并将验证逻辑移动到一个单独的类中，那么你可以有一个部分类来保存数据注释，或者一个[验证类](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.customvalidationattribute%28v=vs.95%29.aspx)

# mysql - 将 sql 查询的结果限制为每个客户 ID 输入的最后日期

> ID：15478366
> 
> 赞同：0
> 
> 时间：2013-03-18T13:45:10.347
> 
> 标签：mysql, date, limit

在使用 JOINS 一段时间后，我终于设法编写了一个没有语法错误的查询。但是，我需要根据日期限制它输出的数据。

简而言之，选择客户的 ID，然后查看他们兑换的忠诚度积分总数，并获取他们兑换的 LAST DATE。我的查询可以收集客户 ID、忠诚度会员 ID 和积分数，但是，我得到了他们兑换的每个日期，而不仅仅是最后一个。

有没有办法让查询只给出给定客户 ID 的最后日期？

我的查询是：

```
SELECT  gv.amount AS gv_amount, 
        gv.customer_id AS gv_customer_id, 
        h.date AS h_date, 
        c.loyalty_id AS c_loyalty_id
FROM coupon_gv_customer gv
   INNER JOIN loyalty_codes_redeem_history h 
        ON gv.customer_id = h.customer_id
    INNER JOIN customers c 
        ON gv.customer_id = c.customers_id 
```

h_date 的格式为 YYYY-MM-DD HH:MM:SS

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T14:06:02.257

这并不难。请查看我不久前回答的这篇文章，了解有关使用 JOIN 的一些背景信息。

[在 MySQL 子查询中选择多个列/字段](https://stackoverflow.com/questions/5686271/selecting-multiple-columns-fields-in-mysql-subquery/5686374#5686374)

这是您需要的技巧：查找每个客户 ID 的最新日期的子查询。这是：

```
 SELECT customer_id, MAX(date) as date
   FROM loyalty_codes_redeem_history
  GROUP BY customer_id 
```

然后你需要把这个子查询——这个虚拟表——加入到你的整体查询中。我认为结果将如下所示：

```
 SELECT gv.amount                 AS gv_amount, 
            gv.customer_id            AS gv_customer_id, 
            customer_latest_date.date AS h_date, 
            c.loyalty_id              AS c_loyalty_id
       FROM coupon_gv_customer gv
 INNER JOIN loyalty_codes_redeem_history h 
               ON gv.customer_id = h.customer_id
 INNER JOIN customers c 
               ON gv.customer_id = c.customers_id 
 INNER JOIN (
                 SELECT customer_id, 
                        MAX(date) AS date
                   FROM loyalty_codes_redeem_history
               GROUP BY customer_id
            ) customer_latest_date
               ON customer_latest_date.customer_id = c.customers_id 
```

你明白它是如何工作的吗？子查询在 INNER JOIN 中使用，就好像它是一个表，实际上它是：一个虚拟表。

**编辑**

要汇总您的 coupon_gv_customer 表中的忠诚度积分，您需要另一个汇总查询，如下所示：

```
 SELECT customer_id,
        SUM(amount) AS amount
   FROM coupon_gv_customer
  GROUP BY customer_id 
```

然后，我认为您的查询将是这样的。它会给每个客户一排，我认为这是你想要得到的。没有任何兑换或日期的客户将不会出现。

```
 SELECT  c.customers_id,
              c.loyalty_id,
              customer_latest_date.date
              customer_points.amount
        FROM  customers c
  INNER JOIN  (
                    SELECT customer_id,
                           SUM(amount) AS amount
                      FROM coupon_gv_customer
                  GROUP BY customer_id
              ) customer_points ON c.customers_id = customers_points.customer_id
  INNER JOIN  (
                    SELECT customer_id, 
                           MAX(date) AS date
                      FROM loyalty_codes_redeem_history
                  GROUP BY customer_id
            ) customer_latest_date ON customer_latest_date.customer_id = c.customers_id 
```

# ajax - 使用 ajax 上传图像文件时发生 HTTP 错误

> ID：15478367
> 
> 赞同：0
> 
> 时间：2013-03-18T13:45:11.810
> 
> 标签：ajax, file-upload

我有以下 Jquery 代码来上传图片库的图片文件。它在本地运行良好，但在实时站点中，在上传图像文件时发生 HTTP 错误

```
<script type="text/javascript" src="uploadifyit/swfobject.js"></script>
<script type="text/javascript" src="uploadifyit/jquery.uploadify.v2.1.4.min.js"></script>
<script type="text/javascript">

$(document).ready(function() {

    //alert('I am ready to use uploadify!');
    $("#file_upload").uploadify({
        'uploader': 'uploadifyit/uploadify.swf',
        'script': 'uploadifyit/uploadify.php',
        'cancelImg': 'uploadifyit/cancel.png',
        'folder': 'photogallery',
        'auto': false, // use for auto upload
        'multi': true,
        'queueSizeLimit': 100,
        'onQueueFull': function(event, queueSizeLimit) {
            alert("Please don't put anymore files in me! You can upload Only 50 files");
            return false;
        },
        'onComplete': function(event, ID, fileObj, response, data) {
            // you can use here jQuery AJAX method to send info at server-side.
            $.post("insertphoto.php", { name: fileObj.name }, function(info) {
                //alert(info); // alert UPLOADED FILE NAME
            }); alert("Photos Uploaded Successfully.....");     

        }

    });

});

</script> 
```

# jquery - 使用 cookie 在对话框中保存输入并在主页上以表单形式显示

> ID：15478372
> 
> 赞同：-2
> 
> 时间：2013-03-18T13:45:22.533
> 
> 标签：jquery, codeigniter, cookies, jquery-dialog

我问了一个问题，在输入字段中设置 cookie 并将其显示在 mainepage 的输入字段中。

```
http://stackoverflow.com/questions/15225225/set-cookie-in-jquery-dialog-and-show-selected-value-on-page-after-submit-with-po 
```

它没有显示任何东西。我的 jquery.cookie.js 工作正常，因为我使用了更多的 cookie。也许这就是问题所在？也许第一个代码会覆盖下一个代码？我不知道这是否相关。

* * *

我有一个 jquery 对话框，当用户访问我的网站时会弹出。 [http://kees.een-site-bouwen.nl/](http://kees.een-site-bouwen.nl/)

您必须填写您的邮政编码，然后单击以继续访问该网站。代码是：

```
<div id="dialog" class="hidden" title="Welkom bij OostWestRegioBest.nl">

Vul hier uw postcode in: <br /><br />
<input type="text" id="postcode">

</div> 
```

和我的 javascript 代码：

```
$(document).ready(function(){
    //story the cookie on button press
    $('#go').click(function(){
            $.cookie('postcode', $('#postcode').val());  
    });

    //retrieve the cookie on load if it's not undefined
    if(typeof $.cookie('postcode') !== 'undefined'){
            $('#postcode').val($.cookie('postcode'));
    }
}); 
```

现在我想在主页表单的文本输入中打印保存的 cookie。 ![输入字段的打印屏幕](../Images/50bf93d1ed58fda0359f8eeb8b543ce8.png)

希望有人可以为此提供一个很好的解决方案。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T17:31:15.007

由于评论中的讨论似乎并没有改变 OP 的想法，如果有人访问，我将在此处发布以供将来参考。

您不应使用 cookie 发送 POST 数据。许多用户在他们的浏览器中关闭了 cookie，这将阻止您的应用程序接收您需要的数据。

在这种情况下，作为 Codeigniter，您应该将数据提交给控制器，在变量中声明值，然后将该变量发送到您的下一个视图。

搜索视图：

```
// Feel free to use CI's form helper here as well
<form method="POST" action="/search"
    // whatever your form is
    <input type="text" id="postcode" name="postcode">
    <input type="submit" value="Go">
</form> 
```

搜索控制器：

```
function index() {
    // search logic

    // Grab your postcode value and declare it in a variable
    data['postcode'] = $this->input->post('postcode');

    // Load your next view and pass the data
    $this->load->view('search_results', $data);
} 
```

结果视图：

```
<input type="text" value="<?php echo $postcode; ?>"> 
```

另外为了将来参考，Codeigniter 具有处理设置 cookie 的方法，因此您不必使用单独的 jQuery 库来执行此操作。如果您需要使用您的网站的用户的整个会话的邮政编码变量，那将是更好的方法。

# java - 长线程安全吗？

> ID：15478374
> 
> 赞同：1
> 
> 时间：2013-03-18T13:45:31.260
> 
> 标签：java, concurrency, thread-safety

这个 Java 类是线程安全的吗？

```
class Counter() {

  private Long counter = 0;

  Long get() { return counter; }

  Long inc() { return ++counter; }
} 
```

`synchronized`如果不是，是否可以在不显式使用锁（或关键字）的情况下使其成为线程安全的？如果不是，那么我猜以下是实现我的目标的最简单方法？

```
class Counter() {

  private final AtomicLong counter = new AtomicLong(0);

  Long get() { return counter.get(); }

  Long inc() { return counter.incrementAndGet(); }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-18T13:47:19.780

不，第一个示例不是线程安全的，因为`++counter`它不是原子的。例如，没有什么可以阻止两个线程`++counter`同时执行并丢失其中一个增量。

第二个示例*是*线程安全的，这意味着不会丢失任何增量。值得注意的是，两者都`get()`返回`inc()`一个值，当调用者收到它时，它很可能已经过时了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T13:57:04.300

关于线程安全和多头的不同答案。Java 中的 long 是 64 位，占用两个单独的 32 位寄存器。你有高 32 位和低 32 位。一次写入占两个非原子 32 位存储。

您最终可能会从一个线程写入高 32 位，从另一个线程写入低 32 位，这可能会产生一个既不是来自第一个线程也不是来自第二个线程的数字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T13:49:13.547

`Long`是不可变的，那么**它是**线程安全的。不是**线程安全**的是 unbox-increment-and-assign 所需的`inc`，它（正确实现）相当于：

```
Long inc() { return counter= long.longValue()+1; } 
```

# spring - 属性 jsessionid 移除 cookie

> ID：15478378
> 
> 赞同：0
> 
> 时间：2013-03-18T13:45:41.090
> 
> 标签：spring, security, remember-me

我登录了我的网站。Cookie 正确创建。

我看到了 JSESSIONID 和 SPRING_SECURITY_REMEMBER_ME_COOKIE（此时它的名字是 testMecook）。没关系

然后，我关闭浏览器，然后打开它。并删除了 SPRING_SECURITY_REMEMBER_ME_COOKIE 字段。为什么？

我的配置弹簧安全是

```
<http pattern="/resources" security="none" />

<http use-expressions="true" disable-url-rewriting="true">
    <intercept-url pattern="/" access="permitAll"/>

    <form-login login-page="/users/login"
                authentication-failure-url="/users/loginfail"
                default-target-url="/"/>

    <access-denied-handler error-page="/users/denied"/>

    <logout logout-success-url="/" delete-cookies="JSESSIONID, testMecook"/>

    <remember-me key="TestCOOK" services-ref="rememberMeService"/>

    <anonymous/>
</http>

<authentication-manager erase-credentials="false">
    <authentication-provider ref="authenticationProvider"/>
</authentication-manager>

<beans:bean id="rememberMeService"
            class="org.xxx.security.CustomRememberMeService">
    <beans:property name="key" value="TestCOOK"/>
    <beans:property name="userDetailsService" ref="customUserDetailsService"/>
    <beans:property name="cookieName" value="testMecook"/>
</beans:bean>

<beans:bean id="authenticationProvider"
            class="org.xxx.security.provider.UserAuthenticationProvider"/>

<beans:bean id="customUserDetailsService"
            class="org.xxx.security.provider.UserDetailsServiceImpl"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T13:53:05.123

我认为您的配置看起来很正常。可能是您的浏览器在关闭 cookie 后删除了它。检查浏览器中的相关设置，并确保退出时不会清除 cookie。

# java - Java：代码所有权可视化

> ID：15478382
> 
> 赞同：0
> 
> 时间：2013-03-18T13:45:45.673
> 
> 标签：java, ide, visualization, javadoc

有哪些工具可以查看项目中的代码所有权？

每个 Java 类`@author`在 JavaDoc 类中都有注释。因此可以计算每个类的行数并总结每个作者的行数。

示例可以是显示项目大小的[TreeMap](https://analysis.apache.org/dashboard/?did=6)或包（如果单击）。[请参阅https://analysis.apache.org/](https://analysis.apache.org/)上运行的 Sonar 实例。我想为作者查看类似的 TreeMap。

我们实际上拥有[集体代码所有权](http://martinfowler.com/bliki/CodeOwnership.html)，但我有公司级硬编码竞赛的想法，以鼓励开发人员经常提交并配置 Jenkins 工作等。

更新：改写问题：有没有办法查看每个贡献者在选定时期内提交的代码行？更新 2：需要视觉解决方案，只看这些数字可能会很无聊。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T14:05:58.250

你自己回答了你的问题。如果您想查看已提交的行，您可以使用您的版本控制系统。例如，对于 svn，有一个[svn log](http://svnbook.red-bean.com/en/1.5/svn.ref.svn.c.log.html)命令和基于它的[svnstat](http://svnstat.sourceforge.net/)、[statsvn工具。](http://www.statsvn.org/)另请参阅 Maven 的[stat-scm 插件](http://stat-scm.sourceforge.net/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T14:39:08.707

> 所以我实际上有问题鼓励开发人员添加这个简单的 javaDoc @author 以表明他们已准备好回答问题。

以下是如何访问 Javadoc 标签的相关文档：

[http://docs.oracle.com/javase/7/docs/technotes/guides/javadoc/index.html](http://docs.oracle.com/javase/7/docs/technotes/guides/javadoc/index.html)

[http://docs.oracle.com/javase/7/docs/jdk/api/javadoc/doclet/](http://docs.oracle.com/javase/7/docs/jdk/api/javadoc/doclet/)

[http://docs.oracle.com/javase/7/docs/jdk/api/javadoc/doclet/com/sun/javadoc/package-summary.html#package_description](http://docs.oracle.com/javase/7/docs/jdk/api/javadoc/doclet/com/sun/javadoc/package-summary.html#package_description)

# java - 以 Java/Maven 方式使用 URL 指纹管理积极缓存

> ID：15478385
> 
> 赞同：3
> 
> 时间：2013-03-18T13:45:50.373
> 
> 标签：java, maven, maven-plugin, browser-cache, fingerprinting

我正在尝试找到管理浏览器缓存以在 Java/Maven 项目中重新加载修改后的 JavaScript/CSS 资源的最佳解决方案。最普遍的解决方案似乎是 Maven 过滤以在构建时向资源 URL 添加时间戳。例如：

```
<script type="text/javascript" src="resource.js?v=${maven.build.timestamp}"></script> 
```

但最有效的方法是添加文件的校验和/哈希（又名指纹）而不是构建日期，这样资源就不会在每次部署后重新加载，而是仅在必要时重新加载。我正在拼命寻找这个模型的正确/通用实现，使用 Java 或 Maven 插件。

有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-29T20:16:46.977

您确实想使用指纹与查询参数。查询参数方法并不总是有效，大多数代理不会缓存它。更改 URL 或实际文件名效果更好。

下面是我在 Maven、Git、Tomcat、Dojo 项目中处理这个问题的方法。我使用[http://mojo.codehaus.org/buildnumber-maven-plugin/](http://mojo.codehaus.org/buildnumber-maven-plugin/)来获取我的 Git rev。然后在构建我的 WAR 时使用过滤将值注入我的 JSP。

pom.xml

```
 <plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>buildnumber-maven-plugin</artifactId>
        <version>1.1</version>
        <executions>
            <execution>
                <phase>validate</phase>
                <goals>
                    <goal>create</goal>
                </goals>
            </execution>
        </executions>
        <configuration>
            <doCheck>false</doCheck>
            <doUpdate>false</doUpdate>
            <shortRevisionLength>8</shortRevisionLength>
            <revisionOnScmFailure></revisionOnScmFailure>
        </configuration>
    </plugin>

    <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-war-plugin</artifactId>
        <version>2.3</version>
        <configuration>
            <warName>${project.name}-${project.version}-${buildNumber}</warName>
            <webResources>
                <resource>
                    <directory>src/main/webapp/WEB-INF/views/includes</directory>
                    <targetPath>WEB-INF/views/includes</targetPath>
                    <filtering>true</filtering>
                </resource>
            </webResources>                  
            ......
        </configuration>
    </plugin> 
```

在我的主要 JSP 包括我有

```
<script src="${pageContext.request.contextPath}/${buildNumber}/static/js/ckeditor/ckeditor.js"></script>
<script src="${pageContext.request.contextPath}/${buildNumber}/static/js/build/dojo/dojo.js"  data-dojo-config="parseOnLoad: true"></script> 
```

要进行重写，我正在使用[http://tukey.org/urlrewrite/](http://tuckey.org/urlrewrite/)。我只有一个简单的规则。

我的第一个过滤器条目 web.xml

```
<filter>
    <filter-name>UrlRewriteFilter</filter-name>
    <filter-class>org.tuckey.web.filters.urlrewrite.UrlRewriteFilter</filter-class>
    <init-param>
        <param-name>logLevel</param-name>
        <param-value>WARN</param-value>
    </init-param>
</filter>
<filter-mapping>
    <filter-name>UrlRewriteFilter</filter-name>
    <url-pattern>/*</url-pattern>
    <dispatcher>REQUEST</dispatcher>
    <dispatcher>FORWARD</dispatcher>
</filter-mapping> 
```

urlrewrite.xml

```
<rule match-type="regex">
    <from>^/[0-9A-Za-z_.\-]+/static/(.*)$</from>
    <to>/static/$1</to>
</rule> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-22T09:01:09.897

我还没有使用它，但是[maven-fingerprint-plugin](https://github.com/dernasherbrezon/maven-fingerprint-plugin)看起来不错。

它只需要一点 maven 配置，然后它会自动将文件中的所有 url 重建为手指版本。

无需在资源 URL 中手动保留`${buildNumber}`或`${hashVersion}`其他指纹选择。

从存储库：

```
<pluginRepositories>
    <pluginRepository>
        <id>fprint-repo</id>
        <url>https://raw.github.com/dernasherbrezon/maven-fingerprint-plugin/master/maven-fingerprint-plugin/mvn-repo</url>
    </pluginRepository>
</pluginRepositories> 
```

然后

```
<executions>
    <execution>
        <phase>package</phase>
        <goals>
            <goal>generate</goal>
        </goals>
    </execution>
</executions>
<configuration>
    <excludeResources>
        <excludeResource>://</excludeResource>
        <excludeResource>//</excludeResource>
    </excludeResources>
    <!-- ${basedir}/src/main/webapp by default -->
    <sourceDirectory>${basedir}/target/webcombined</sourceDirectory>
    <!-- ${project.build.directory}/fingered-web by default -->
    <outputDirectory>${basedir}/target/fingered</outputDirectory>
    <!-- Remove unnecessary spaces between tags. Make single line page.
    Takes into consideration <pre> tags -->
    <trimTagExtensions>
        <trimTagExtension>html</trimTagExtension>
    </trimTagExtensions>
    <extensionsToFilter>
        <extensionToFilter>html</extensionToFilter>
        <extensionToFilter>jsp</extensionToFilter>
        <extensionToFilter>tag</extensionToFilter>
        <extensionToFilter>css</extensionToFilter>
        <extensionToFilter>js</extensionToFilter>
    </extensionsToFilter>
    <!-- cdn host. Not required. For example using
    "//accountname.r.worldssl.net": /css/bootstrap.css =>
    //accountname.r.worldssl.net/css/<md5>bootstrap.css -->
    <cdn>${cdn}</cdn>
</configuration> 
```

就是这样。

# perl - 根据字符串出现的次数拆分一行

> ID：15478387
> 
> 赞同：3
> 
> 时间：2013-03-18T13:46:00.560
> 
> 标签：perl, pattern-matching

假设我在 perl 字符串变量中有一个 sql 查询：

```
select a from table one union select b from table two union select c from table three union select d from table four union select e from table five union select f from table six union select g from table seven union select h from table eight 
```

在上面的文本中，我有八个由联合分隔的单独查询。

我希望其中一半存储在一个变量中，另一半存储在另一个变量中。

我知道应该一直有 8 个查询，中间有 7 个联合。我尝试了以下脚本，但无法正常工作。

```
#!/usr/bin/perl

use strict;
use warnings;

my $var="select a from table one union select b from table two union select c from table three union select d from table four union select e from table five union select f from table six union select g from table seven union select h from table eight";
$var=~m/(.*union{3})(.*)/g;

print $1; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T13:49:11.757

您始终可以`split`在前瞻断言上使用字符串。使用`\b`单词边界断言来避免部分匹配。

```
use strict;
use warnings;
use Data::Dumper;

my $str = "select a from table one union select b from table two union select c from table three union select d from table four union select e from table five union select f from table six union select g from table seven union select h from table eight";

my @query = split /(?=\bunion\b)/i, $str;
print Dumper \@query; 
```

**输出：**

```
$VAR1 = [
          'select a from table one ',
          'union select b from table two ',
          'union select c from table three ',
          'union select d from table four ',
          'union select e from table five ',
          'union select f from table six ',
          'union select g from table seven ',
          'union select h from table eight'
        ]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T13:52:21.467

```
/(.*union{3})(.*)/ 
```

匹配尽可能多的字符（“.*”），后跟文字“unio”，后跟正好 3 个“n”字符，然后是任意数量的字符。你可能想要这样的东西：

```
/^((.*?union){3})(.*)$/ 
```

即（尽可能少的字符，后跟“union”），三次，然后是任何内容。

这匹配三组——查询的“前半部分”、一个单独的部分和剩余的查询。因此，在您的情况下，您将对 $1 和 $3 组感兴趣

# ios - 如何获取本地保存的 UIImage 到 UIImage 的路径？

> ID：15478394
> 
> 赞同：1
> 
> 时间：2013-03-18T13:46:17.580
> 
> 标签：ios, objective-c, xcode, uiimageview, uiimage

我正在使用以下代码保存我的图像---

```
#define DOCUMENTS_FOLDER [NSHomeDirectory() stringByAppendingPathComponent:@"Documents"]

NSDate *now = [NSDate dateWithTimeIntervalSinceNow:0];
NSString *caldate = [now description];

NSString *filePath= [NSString stringWithFormat:@"%@/%@.jpg", DOCUMENTS_FOLDER,caldate];
imageurl = [NSURL fileURLWithPath:filePath];
dataImage = UIImagePNGRepresentation(myimage);
[dataImage writeToFile:filePath atomically:YES]; 
```

**imageurl 打印如下**

> file://localhost/Users/varmab/Library/Application%20Support/iPhone%20Simulator/6.1/Applications/E2EDF729-4684-465B-8BE3-2C0ACFA2EC03/Documents/2013-03-18%2012:02:31%20+ 0000.jpg

现在，我想显示保存的图像，即图像存储在上述文件路径中

我尝试了以下代码：

```
//1st process:
UIImage *image = [UIImage imageWithData:[NSData dataWithContentsOfURL:imageurl]];

//2nd process:
NSURL *urlString =imageurl;
NSData *imageData = [NSData dataWithData:UIImagePNGRepresentation([UIImage imageWithData:[NSData dataWithContentsOfURL:urlString]])];
UIImage *image = [UIImage imageWithData:imageData];

//3rd process:
NSData * imageData = [[NSData alloc] initWithContentsOfURL:imageurl ];
self.testingImageView.image = [UIImage imageWithData: imageData]; 
```

请指导我，我做错了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T13:50:42.077

你为什么不直接使用这个方法：

```
 - (id)initWithContentsOfFile:(NSString *)path 
```

它已经在`UIImage`课堂上可用。

```
[self.testingImageView setImage: [[UIImage alloc] initWithContentsOfURL:imageurl]]; 
```

试试这个，如果你再次遇到同样的问题，请告诉我。

注意：检查图像 url 是否与保存该图像时获得的旧图像 url 相似。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T13:51:10.007

这将为您提供文档目录下所有文件的路径；

```
 NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
        NSString *documentsDirectory = [paths objectAtIndex:0];

        NSArray *filePathsArray = [[NSFileManager defaultManager] subpathsOfDirectoryAtPath:documentsDirectory  error:nil];

        NSLog(@"files array %@", filePathsArray); 
```

您可以使用以下代码获取 filePathsArray 中每个对象的路径；

```
 NSString *filePath = [documentsDirectory stringByAppendingPathComponent:[filePathsArray objectAtIndex:0]]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-25T02:22:26.260

**快速**
获取文档目录的路径，将图像存储在同一位置，您可以检索。

```
func getDocumentsDirectory() -> URL {
    let paths = FileManager.default.urls(for: .documentDirectory, in: .userDomainMask)
    let documentsDirectory = paths[0]
    return documentsDirectory
}

if let image = UIImage(named: "example.png") {
    if let data = UIImagePNGRepresentation() {
        let filename = getDocumentsDirectory().appendingPathComponent("copy.png")
        try? data.write(to: filename)
    }
} 
```

# android - 由于未定义的引用，AOSP 构建失败

> ID：15478396
> 
> 赞同：2
> 
> 时间：2013-03-18T13:46:21.710
> 
> 标签：android, c++, g++, android-source

我已经下载了 Android 2.3.6 源代码并成功构建了它。然后，我在外部文件夹中添加了一个 C++ 库并尝试构建它，但是当我这样做时，我收到以下错误：

```
prebuilt/linux-x86/toolchain/arm-eabi-4.4.3/bin/../lib/gcc/arm-eabi/4.4.3/../../../../arm-eabi/bin/ld: path/to/myfile.cpp:26: error: undefined reference to '__cxa_end_cleanup'
prebuilt/linux-x86/toolchain/arm-eabi-4.4.3/bin/../lib/gcc/arm-eabi/4.4.3/../../../../arm-eabi/bin/ld: : error: undefined reference to '__gxx_personality_v0'
in function path/to/myfile.cpp:26: error: undefined reference to 'operator delete(void*)' 
```

我将此行添加到 Android.mk 文件中：LOCAL_CXX=path/to/g++compiler 为了使用 g++ 编译器，但它仍然使用 .../arm-eabi/bin/ld 与其他库链接我怎么能强制使用 g++ 作为链接器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T13:57:00.150

您需要编译和链接 C++ 代码，`g++`而不是`gcc`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-27T01:10:54.840

有相同类型的错误，以及`'out/xxx/yyy.o: file is empty'`. 对我来说，原因是 VM 在构建过程中崩溃，导致一些文件损坏（不必这样做`repo sync`，损坏的文件是二进制文件）。

我删除了包含有问题的文件的目录，重新启动了构建过程并且错误消失了。

# fortran - 如何在 Fortran 90 中使用 include 语句？

> ID：15478401
> 
> 赞同：2
> 
> 时间：2013-03-18T13:46:35.520
> 
> 标签：fortran, fortran90, intel-fortran, fortran77

我有一些 .h 文件用于 FORTRAN 77 中的某些模块（我自己没有编写）。我想在 Fortran 90 中编写一个新例程并使用这样的 .h 文件。我尝试使用`include 'foo.h'`，当我尝试编译（使用 ifort 版本 13.0.0.079 Build 20120731）时，出现以下错误：

`Syntax error, found IDENTIFIER 'FOO' when expecting one of: ( % [ : . = => C FOO COMMOM`

我也尝试过使用`include foo.h`，这给了我以下错误： `error #5082: Syntax error, found IDENTIFIER 'FOO' when expecting one of: <CHAR_CON_KIND_PARAM> <CHAR_NAM_KIND_PARAM> <CHARACTER_CONSTANT> INCLUDE FOO.h ----------^`

`error #6274: This statement must not appear in the specification part of a module INCLUDE foo.h --^`

`error #6236: A specification statement cannot appear in the executable section. !$ use omp_lib ---^`

`error #6236: A specification statement cannot appear in the executable section. implicit none --^`

`error #6456: This name must be a RECORD name. [FOO] INCLUDE FOO.h ----------^`

`error #6460: This is not a field name that is defined in the encompassing structure. [H] INCLUDE foo.h` -----------------^

`error #6252: This format specifier is invalid. [FOO] INCLUDE foo.h`

我猜`include`F90中不存在。是否有类似的东西允许使用 .h 文件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T15:11:49.237

我认为您可能正在混合使用自由格式程序和固定格式的包含文件。您必须使两个文件的格式相同，或者采用[http://fortranwiki.org/fortran/show/Continuation+lines中的“交集格式”](http://fortranwiki.org/fortran/show/Continuation+lines)

另一个导致错误的原因是在文件的错误部分使用了 include 语句。必须根据文件的内容，即可执行代码，放在正确的位置；变量和类型定义（规范表达式）或过程定义都有其适当的位置。

# c++ - 返回静态变量时static const和static的区别

> ID：15478403
> 
> 赞同：1
> 
> 时间：2013-03-18T13:46:39.780
> 
> 标签：c++, static, constants, static-methods

最好用代码解释：

```
static Unit& None() { static Unit none(....); return none;} 
```

有什么区别？

```
static const Unit& None() { static Unit none(....); return none;} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T13:49:33.603

前面`static`的函数有一个完全不同于`static`里面的函数¹。特别是，它**与返回类型完全无关**。这些函数的返回类型与此处相同：

```
Unit& None() { static Unit none(....); return none;}

const Unit& None() { static Unit none(....); return none;} 
```

即没有`static`限定符。

因此，区别仅在`Unit&`和之间`Unit const&`：第一个允许修改返回值，第二个不允许。

* * *

^(1）)对于类成员，`static`表示函数不能访问类的实例变量和实例函数；在命名空间范围函数上，`static`意味着函数符号不是从编译单元中导出的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T13:49:43.733

您正在返回对静态对象/变量的引用。因此可以为函数分配一个值，然后更改该对象/变量的值。

第二个拒绝改变 的值`none`：

```
static int& func1()
{
    static int a = 1; return a;
}

static const int& func2()
{
    static int a = 1; return a;
}

int main()
{
    func1() = 10;    // OK
    func2() = 10;    // error: assignment of read-only location
} 
```

# php - 旋转后图片尺寸变大

> ID：15478404
> 
> 赞同：2
> 
> 时间：2013-03-18T13:46:42.457
> 
> 标签：php

我有一个奇怪的行为......

使用此脚本进行图像处理（旋转），每次我使用图像大小都会增加。

例如，使用它两次后，图像从**168.4**变为**53.2 Kb**。

```
$image_source = imagecreatefromjpeg($path_u);
$rotate = imagerotate($image_source, $angle, 0);
imageinterlace($rotate, true);

unlink($path_u);
imagejpeg($rotate, $path_u, 100);
imagedestroy($rotate); 
```

有什么问题还是产生这种效果的 gd 函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T13:48:26.920

```
imagejpeg($rotate, $path_u, 100); 
```

如果您以 100% 的质量保存它，它将占用更多的磁盘空间，即使质量保持不变

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T13:48:31.010

您已将质量设置设为 100%。原始图像可能是使用较低质量设置创建的。

# linux - 需要使用 imLib2 库在 X11 中拍摄快照

> ID：15478405
> 
> 赞同：0
> 
> 时间：2013-03-18T13:46:44.270
> 
> 标签：linux, x11, embedded-linux

嗨，当我们单击按钮时，我们需要拍摄当前正在运行的应用程序窗口的快照。这应该在代码中自动完成。为此，我们使用了 Imlib2 库并使用以下 api 的 imlib_create_image_from_drawable 和 imlib_copy_drawable_to_image。这是我们用来拍摄快照的代码，但它不起作用请帮助我们提前感谢。

```
Imlib_Image buffer;
buffer = imlib_create_image_from_drawable(pixmap, 0, 0, glb.windowWidth, glb.windowHeight, 0); 
imlib_context_set_image(buffer);
imlib_copy_drawable_to_image(pixmap, 0, 0, glb.windowWidth, glb.windowHeight, 0, 0, 0);
imlib_context_set_image(buffer);
imlib_image_set_format("png");
imlib_save_image("screenshot");
imlib_free_image(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T06:57:07.607

谢谢你。我已经更正了我的代码，我可以使用 Imlib 库拍摄正在运行的应用程序的快照。在上面我忘记设置drawable。这是更正后的代码，它工作正常

```
Imlib_Image buffer;

buffer = imlib_create_image(glb.windowWidth, glb.windowHeight); 
imlib_context_set_image(buffer);
imlib_context_set_display(display);
imlib_context_set_visual(DefaultVisual(display, 0));
imlib_context_set_drawable(window);
imlib_copy_drawable_to_image(0, 0, 0, glb.windowWidth, glb.windowHeight, 0, 0, 1);
imlib_context_set_image(buffer);
imlib_image_set_format("png");
imlib_save_image("screenshot");
imlib_free_image(); 
```

# visual-studio - 如何将 Visual Studio 的“我的代码片段”文件夹移动到另一个驱动器？

> ID：15478406
> 
> 赞同：17
> 
> 时间：2013-03-18T13:46:48.200
> 
> 标签：visual-studio, visual-studio-2012, code-snippets

一个我找不到设置或答案的简单问题：

> 我将Windows 中的*Documents*文件夹重新定位到另一个驱动器。如何将 Visual Studio 2012 中的*My Code Snippets*文件夹路径从默认位置更改为新位置？

默认位于 C: 上的我的 Documents 文件夹中。

```
C:\Users\Virtlink\Documents\
    Visual Studio 2012\Code Snippets\Visual C#\My Code Snippets 
```

但是我将我的 Documents 文件夹移动到了我的驱动器 D:，但 Visual Studio 没有接受这个更改并强制在 C: 上创建文件夹。这会导致代码片段管理器中带有感叹号`My Code Snippets`的奇怪行为，以及导入片段时出现错误。

当我从我的用户文件夹中打开 My Documents 时，Windows 将我定向到的文件夹是`D:\Personal\`，我也想要那里的代码片段：

```
D:\Personal\Visual Studio 2012\Code Snippets\Visual C#\My Code Snippets 
```

如有必要，我不介意移动整个 Visual Studio 2012 子文件夹。我只是不知道如何在 Visual Studio 中设置它。

![在此处输入图像描述](../Images/57691cc6c4a55bc8f7eb86db587803ae.png)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2015-05-06T08:43:42.137

UI 并没有完全清楚按钮的用途，但这实际上可以通过两个简单的步骤完成：

**步骤 1**。在代码片段管理器中，选择指向您不再使用的磁盘位置的文件夹，然后单击删除：

![在此处输入图像描述](../Images/ed0bb7b36986040c87de091b95e71d5e.png)

**步骤 2**。单击添加...

![在此处输入图像描述](../Images/ac7a67d4405acae6e703f6f6bc5c575b.png)

...并选择您的新文件夹：

![在此处输入图像描述](../Images/aa4b3af7a94d655e2652597695dc30ad.png)

而已！您的新文件夹现在在代码片段管理器中处于活动状态。

![在此处输入图像描述](../Images/5308ce61d832b11c6bb5d9397ecc2461.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-11-29T10:28:29.243

代码片段文件夹似乎不能在 Visual Studio IDE 中直接编辑（我可以找到）。它们存储为注册表项，因此您必须直接编辑这些设置。

对于 Visual Studio 2012，注册表设置位于：

```
HKEY_CURRENT_USER\Software\Microsoft\VisualStudio\11.0\Languages\CodeExpansions\Visual C#\Paths 
```

该值称为“Microsoft Visual CSharp”，并列出了用分号分隔的所有不同文件夹：

```
%InstallRoot%\VC#\Snippets\%LCID%\Visual C#\;%InstallRoot%\VC#\Snippets\%LCID%\Refactoring\;%MyDocs%\Code Snippets\Visual C#\My Code Snippets\ 
```

片段的快速修复是提供完整路径来代替 %MyDocs% 设置。

我找不到有关如何定义 %MyDocs% 的参考，但我怀疑这是“项目位置”设置：

工具 -> 选项 -> 项目和解决方案/常规

# ios - 如何在情节提要中为视图控制器提供“标识符”？

> ID：15478411
> 
> 赞同：39
> 
> 时间：2013-03-18T13:47:00.340
> 
> 标签：ios, objective-c, xcode, uiviewcontroller, storyboard

该`instantiateViewControllerWithIdentifier:`方法要求我传递的视图控制器具有标识符。我去了我的故事板并单击了我的视图控制器，但我看不到设置标识符的选项。我究竟在哪里可以找到这个选项？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2013-03-18T13:55:14.667

如图所示！希望能帮助到你！

![在此处输入图像描述](../Images/a06ecd07666d46b2bfc5cb91bb8bf9cb.png)

然后使用它你调用：

```
[self.storyboard instantiateViewControllerWithIdentifier:@"YourViewControllerID"]; 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2017-08-16T21:59:04.837

针对 XCode 8 和 Swift 3 进行了更新。

`instantiateViewControllerWithIdentifier`现在是**instantiateViewController(withIdentifier:)**。

设置情节提要 ID： [![在此处输入图像描述](../Images/c49556ff64a63b39d7a9943a340f0c2c.png)](https://i.stack.imgur.com/4ObWU.png)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-18T13:52:46.907

在*身份检查*器中有一个字段*Storyboard ID*。您可以在此处输入类名，然后在`instantiateViewControllerWithIdentifier:`.

# c++ - 头文件中定义的eclipse c++函数无法解析

> ID：15478415
> 
> 赞同：2
> 
> 时间：2013-03-18T13:47:10.197
> 
> 标签：c++, eclipse

我正在尝试编译一个 c++ 程序，但是，我收到了错误

```
Function 'Argument' could not be resolved ...... Semantic Error 
```

但是，我已将`Argument`其定义在`app.h`项目中。

我已经通过转到`Project > Properties > C/C++ General > Paths and Symbols > Includes`. 在`GNU C++`Clicking下`Add`，然后`File System`输入文件的路径。

我不知道为什么我会收到这个错误。

给我一个错误的行是：

```
ARGUMENTS = {
  Argument ("input", "input image", "the input image.").type_image_in (),
  Argument ("ouput", "output image", "the output image.").type_image_out (),
  Argument::End
}; 
```

在“app.h”中：

```
#define ARGUMENTS   const MR::Argument __command_arguments[] 
```

解决方案：关闭项目并重新打开它解决了问题......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T09:11:30.510

解决方案：关闭项目并重新打开它解决了问题......

# backbone.js - 解析更新的集合内容，隐藏新的模型视图实例

> ID：15478422
> 
> 赞同：0
> 
> 时间：2013-03-18T13:47:26.330
> 
> 标签：backbone.js, marionette

我有一个代表集合的主干视图。当此集合与服务器同步并将新模型添加到集合中时，我想隐藏集合中代表这些新模型的所有视图实例，同时继续显示旧模型的视图实例。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:13:43.233

当底层模型/集合发生变化时，Bbone 中的视图不会自动更新。您必须明确地监听事件：更改/销毁模型，添加/更改/删除/重置集合并调用 render()。

正如`WiredPrairie`建议的那样，如果您在视图初始化期间注册了例如listenTo() 任何这些事件并显式地渲染()，则始终可以使用stopListening() 来反转效果。

另一种方法是，如果它是抑制视图显示更改的一种情况，是在视图的 render() 中手动检查哪些模型已更改并使用更改属性的先前状态以避免显示新值. 签出：`model.hasChanged()`以及`model.previousAttributes()`在`options.previousModels`集合的情况下`reset`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T03:20:59.833

我假设您在这里使用`Marionette.CollectionView`or `Marionette.CompositeView`，对吗？既然如此，当从服务器返回并添加到您的收藏中时，您正试图阻止这些显示新添加的模型，对吗？

我可以看到几种不同的方法，其中大部分都从同一个地方开始：一个基于属性进行过滤的集合，该属性告诉您是否显示模型。您需要在模型上有一些数据来告诉您是否显示它们......我不确定这会是什么样子，但是一旦你为此设置了逻辑，我认为其余的变得更容易。

## 代理集合

我在 CompositeView 或 CollectionView 中处理此问题的首选方法是使用代理集合创建视图实例 - 根据值过滤以显示或隐藏模型。

我之前讨论过代理集合，我有一个有效的 JSFiddle 来展示如何构建它们，这里：http: [//jsfiddle.net/derickbailey/7tvzF/](http://jsfiddle.net/derickbailey/7tvzF/)

您将像这样设置过滤集合，然后将过滤集合发送到您的实际视图实例：

```
 var filtered = new FilteredCollection(myOriginalCollection);
filtered.filter({
  showThisOne: true
});

var view = new MyCompositeView({
  collection: filtered
});

myOriginalCollection.fetch(); 
```

从这里开始，它归结为您希望如何管理原始集合的过滤和获取/同步。但我认为整体解决方案取决于代理/装饰器集合，并且能够将集合过滤到仅您想要的项目列表。

# svn - 是否可以使用 SVN 从一个分支合并到另一个分支？

> ID：15478427
> 
> 赞同：2
> 
> 时间：2013-03-18T13:47:44.503
> 
> 标签：svn, cruisecontrol.net, branching-and-merging

我想知道是否有人可以就如何管理我们的 SVN 主干和分支提供一些建议，以便我的团队可以部署到三个不同的环境？目前我们有以下设置：

*   1.所有新的开发都是针对主干进行的。这被认为是我们的“DEV”分支。
*   2\. 我们有一个名为“QA”的 SVN 分支，我们合并来自卡车的更改，以触发 CCNet 构建到我们的 QA 环境。
*   3\. 然后我们有一个名为“PROD”的分支，我们合并来自主干的更改，以触发 CCNet 构建以创建我们的 PROD 部署包。

到目前为止，这在触发构建和允许我们的环境之间进行某种程度的代码分离方面是有效的，但它“感觉”它并不理想。我这么说的最大原因是我希望能够从我们的 QA 分支合并到我们的 PROD 分支。但是，每次我们尝试这样做时，都会遇到“树冲突”。所以，现在我们刚刚从卡车上合并。

谁能推荐一个适用于多个部署环境的 SVN 主干/分支策略？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:55:19.650

回答标题中的问题：是的。可以在 svn 中从一个分支合并到另一个分支。

但是对于您的第二个问题，我建议您不要从不同的分支部署到 dev、qa 和 prod。我建议您构建一次，然后部署到 dev，然后是 qa，然后再到 prod - 无需合并和重建。你想部署你测试的东西，而不是测试然后改变的东西。

# php - PHP没有检测到由Javascript设置的cookie

> ID：15478431
> 
> 赞同：0
> 
> 时间：2013-03-18T13:47:53.047
> 
> 标签：php, javascript, cookies

**编辑：我的错，这是一个（服务器端）缓存问题。谢谢您的帮助。**

我有一个网站，在访问时首先检查 cookie “介绍”，然后如果它不存在，则将其重定向到介绍页面。

```
<?php if (!isset($_COOKIE["intro"])) {
header( 'Location: http://explainasterisk.com/intro/' ) ; } ?> 
```

当用户点击介绍页面上的“开始”按钮时，cookie 使用以下方式设置：

```
<script type="text/javascript">
          $(document).ready(function () {
              $('.home').click(function () {
                  scroll(0, 0); //scrolltotop
                  var intro = "intro" //setting cookiename variable
                  var today = new Date();
                  var expire = new Date();
                  expire.setTime(today.getTime() + 3600000*24*365);
                  document.cookie = intro+"=1"
                                  + ";expires="+expire.toGMTString();                  
                  $('.home').slideUp(3000, function () { //slideUp function 
                      //Nothing
                  });
              });
          });
</script> 
```

在 Opera 和 Chrome 中，cookie 正在设置中，但是当我单击介绍页面上的跳过按钮（这使我回到原始页面）时，我只是被重定向到介绍页面。你可以在这里看到这个：http: [//explainasterisk.com/](http://explainasterisk.com/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T13:49:22.363

```
if (!isset($_cookie["intro"])) { 
```

数组名称不正确。它应该是大写的，像这样

```
if (!isset($_COOKIE["intro"])) { 
```

参考：[$_COOKIE](http://www.php.net/manual/en/reserved.variables.cookies.php)

谢谢布拉德克里斯蒂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T13:56:21.757

你问题的根源是你`error_reporting(E_ALL);`在代码的开头（和 `ini_set('display_errors','On');`开发环境）没有。

如果你有它，PHP 将显示没有 $_cookie 变量的错误消息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T13:58:30.933

您可能想尝试一下[jquery-cookie](https://github.com/carhartl/jquery-cookie)，因为它使在 javascript 中设置和处理带有过期日期的 cookie 变得非常容易。

一条简单的线：

```
$.cookie("[cooke name]", "[value]", { expires: [time in days]); 
```

例如：

```
$.cookie("intro", "set", { expires: 365); 
```

您的 PHP 片段对我来说看起来不错，并且 - 如果 cookie 设置正确 - 应该可以工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T14:04:17.153

尝试将路径和域添加到 cookie 的末尾：

```
path=/; domain=.<?php echo $_SERVER['HTTP_HOST']; ?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-18T14:05:00.990

javascript中的cookie是用域设置的`.explainasterisk.com`

所以在阅读cookie之前试试这个。

`ini_set("session.cookie_domain", ".explainasterisk.com");`

# sql - 在 SQL 中存储时差

> ID：15478432
> 
> 赞同：1
> 
> 时间：2013-03-18T13:47:56.390
> 
> 标签：sql, sql-server-2008, tsql, datetime

在我的应用程序中，我有一个存储事件日历的数据库：

```
 id |        name        |        date
----+--------------------+--------------------
  1 | Birthday Party     | 2013-04-27 16:30:00
  2 | Dinner Reservation | 2013-03-20 17:00:00
  3 | Sunday Brunch      | 2013-03-31 11:15:00 
```

在应用程序中查看事件时，用户应该能够配置他们希望查看事件的当前时间提前多长时间，并将其作为值存储在数据库中：

```
 username |     datediff
----------+------------------------------------------
  user123 |  2 days in advance
  goodguy |  93 days in advance
  spudly  |  365 days in advance
  aaaaaa  |  17 days, 3 hours, 30 seconds in advance 
```

我的问题是：存储这种日期差异的最佳（即大多数 SQL 惯用的）方法是什么？我可以将时间差存储为以毫秒为单位的数字，但是是否有一些适用于日期差异的内置 SQL 数据类型，而不仅仅是特定的时间点？DATETIME 或 TIMESTAMP 之类的内容是否适合此任务？

这必须是一个相对差异——例如，对于“提前 2 天”，我对存储未来两天的特定日期不感兴趣，因为我希望用户每隔一天查看接下来两天的事件他查看应用程序的时间。

我正在使用 Microsoft SQL Server 2008，如果它有什么不同的话。

（这可能是重复的，但我所有的搜索尝试都出现了关于`datediff`——用于*计算*时差——但没有关于如何最好地*存储*时差的结果。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T14:06:03.957

标准 SQL 具有特定的日期和持续时间数据类型：interval。SQL Server 不支持区间数据类型。

DateDiff() 返回一个有符号整数。如果您需要存储相当于 SQL 间隔的 SQL Server，则需要存储一个整数。整数是对日期部分边界数的计数，因此您*还*需要存储整数所指的日期部分边界类型。如果没有日期部分，有符号整数 3 可以很容易地表示 3 年或 3 秒。

实际上，我认为我宁愿计算提醒的时间戳，并将其存储*而*不是定义间隔的整数和日期部分。时间戳可以比整数和日期部分更简单地被索引和查询。在不需要支持重复事件的情况下，我认为没有令人信服的理由来构建比这更复杂的解决方案。

# python - openerp服务器设置过程出错

> ID：15478439
> 
> 赞同：1
> 
> 时间：2013-03-18T13:48:58.557
> 
> 标签：python, openerp

当我运行这个命令

```
root@wa3pc11:/# openerp-server 
```

收到错误

启动服务器守护程序时发生错误：[Errno 98] 地址已在使用中

请帮助提前谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T15:49:23.833

如果您正在使用 OpenERP 的两个实例，那么以下将发挥作用：

1.  输入
    sudo netstat -anpt

在终端。这将列出活动进程和它们正在使用的端口号。

1.  找到使用 OpenERP 端口号的进程，并记下该进程的 pid（进程 ID）。

2.  然后输入

    ```
     ps aux | grep openerp 
    ```

并验证该进程的 pid。

1.  通过终端中的以下命令终止使用 OpenERP 端口号（如果有）的进程。

    ```
     sudo kill -9 pid 
    ```

其中 pid 是进程 ID。例如，如果 1234 是您应该输入的 pid

```
 sudo kill -9 1234 
```

在终端。

1.  然后通过以下方式从 /var/run/openerp 中删除 OpenERP 服务器的 pid。

    ```
     sudo rm /var/run/openerp-server.pid 
    ```

2.  Restart the openerp-server and it's done.

    ```
     sudo /etc/init.d/openerp-server restart 
    ```

# c - C中动态数组的排序算法

> ID：15478446
> 
> 赞同：1
> 
> 时间：2013-03-18T13:49:14.880
> 
> 标签：c, arrays, sorting, dynamic, struct

我正在尝试对包含成本作为元素的动态数组进行排序。这是我的排序功能：

```
void ascending_sort(Controller* ctrl) //the function is in the controller
{
    int i,j;
    DynamicVector* CostList=getAll(ctrl->repo); //the getALL function returns the CostList that has Costs as elements
    for(i=0;i<getLen(CostList)-1;i++)
    {
        Cost* cost=(Cost*)getElementAtPosition(CostList,i); //getElementAtPosition returns the Cost at a certain position
        for(j=i+1;j<getLen(CostList);j++)
        {
            Cost* cost1=(Cost*)getElementAtPosition(CostList,j);
            if(cost->sum > cost1->sum)
            {
            Cost  aux=cost[i];
            cost[i]=cost[j];
            cost[j]=aux;
            }
        }
    }
} 
```

问题是当我想打印成本时。如果我在分类之前打印它们，一切都会正常并打印成本。如果我对列表进行排序，然后打印排序后的成本，则会出现“关闭程序”错误，并且程序崩溃。这是打印功能：

```
void PrintCosts(Console* console)
{
    DynamicVector* CostList=getAllCosts(console->ctrl);
    if (getLen(CostList))
    {
        int i;
        for(i=0;i<getLen(CostList);i++)
        {
            printf("\nCost %d\n\n",i+1);
            Cost *c=(Cost*)getElementAtPosition(CostList,i);
            PrintCost(c);
        }

    }
    else printf("No cost in the list!");
} 
```

这是结构：

```
typedef struct{
    int id;
    char* day;
    char* type;
    int sum;
}Cost; 
```

这是在控制台中调用的排序函数：

```
void AscendingSort(Console* console)
{
    ascending_sort(console->ctrl);
} 
```

这是一个返回 Cost* 类型的函数：

```
Cost* initCost(char* day, char* type, int sum)
{
    Cost* c=(Cost*)malloc(sizeof(Cost));
    if(strlen(day)>0 && strlen(day)<=10)
    {
        c->day = copyString(day);
    }
    else
    {
        c->day=0;
    }
    if(strlen(type)>0 && strlen(type)<=20)
    {
        c->type = copyString(type);
    }
    else
    {
        c->type=0;
    }
    if(sum>0)
    {
        c->sum= sum;
    }
    return c;
} 
```

安慰：

```
Console* initConsole(Controller* ctrl)
{
    Console* console=(Console*)malloc(sizeof(Console));
    console->ctrl=ctrl;
    return console;
} 
```

获取元素位置

```
TElem getElementAtPosition(DynamicVector* v, int pos)
{
    if(v->elem[pos])
        return v->elem[pos];
    else
        return 0;
}

typedef void* TElem; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T14:04:52.457

您正在尝试`cost`在排序代码中作为数组访问

```
Cost  aux=cost[i];
cost[i]=cost[j];
cost[j]=aux; 
```

这是不正确的，假设`getElementAtPosition()`返回指向一个项目的指针而不是可顺序访问的项目数组，即数组。

您只能通过指针通知访问一个元素，例如`cost->sum`，而不是`cost[i].sum`除非`i==0`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T14:01:40.570

听起来你遇到了段错误。您没有显示返回 Cost* 的函数，并且您在取消引用之前从未验证 Cost*。也许那个区域有问题？我想我需要更多的源代码来验证这一点。

我也注意到了这一点。

```
for(i=0;i<getLen(CostList);i++)
{
    printf("\nCost %d\n\n",i+1);
    Cost *c=(Cost*)getElementAtPosition(CostList,i); <-- typeof(C) == Cost*
    PrintCost(c);  <-- typeof(C) == Console*
} 
```

您将变量`c`用作 a`Cost*`和 a `Console*`。这不是一种类型安全的做事方式，所以我猜你这里有一些错误。虽然没有更多代码，但无法分辨:)

# visual-studio-2010 - 用于 TFS 构建中包含的解决方案的 NuGet

> ID：15478447
> 
> 赞同：3
> 
> 时间：2013-03-18T13:49:16.640
> 
> 标签：visual-studio-2010, tfs, nuget

我在使用 NuGet 时遇到问题：它实际上让我发疯了！我正在尝试为包含 nuget.exe 的解决方案运行 TFS 构建。我在本地工作站上从 Visual Studio 运行它没有任何问题，但是当我在 TFS 服务器中排队新构建时，构建失败并出现以下众所周知的错误：

> D:\<...SolutionPath...>.nuget\nuget.targets (88)：默认情况下禁用包还原。要给予同意，请打开 Visual Studio 选项对话框，单击包管理器节点并选中“允许 NuGet 在构建期间下载丢失的包”。您还可以通过将环境变量“EnableNuGetPackageRestore”设置为“true”来表示同意。
> 
> D:\<...SolutionPath...>.nuget\nuget.targets (88): 命令 ""D:\<...SolutionPath...>.nuget\nuget.exe" install "D:\ <...SolutionPath...>\packages.config" -source "" -RequireConsent -solutionDir "D:\<...SolutionPath...>\ "" 以代码 1 退出。

问题是：我已经在 TFS 构建服务器**中将 EnableNuGetPackageRestore**设置为*true*，但它仍然抛出相同的错误。我还尝试在同一 TFS 服务器中使用相同的参数从 cmd 窗口运行 nuget.exe，我没有任何问题。

顺便说一句，这是我的 NuGet.config 的内容：

```
<configuration>
  <solution>
    <add key="disableSourceControlIntegration" value="true" />
  </solution>
  <packageRestore>
    <add key="enabled" value="true" />
  </packageRestore>
</configuration> 
```

有任何想法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T18:44:02.917

请检查您的 TFS 构建服务帐户是否与您用于进行更改的帐户相同。还要重新启动服务器以确保环境变量使其成为服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-29T10:44:23.077

1.  **使用执行构建的同一帐户登录到构建服务器。**
2.  打开 Visual Studio。
3.  在 Visual Studio 中安装 NuGet 包管理器。
4.  重新启动 Visual Studio。
5.  工具 --> 选项 --> 包管理器 --> 常规：勾选“允许 NuGet 在构建期间下载丢失的包”。
6.  在您的解决方案中启用包还原。

# python - 在 SymPy 中的某个点评估函数

> ID：15478449
> 
> 赞同：9
> 
> 时间：2013-03-18T13:49:20.863
> 
> 标签：python, sympy

我正在尝试编写各种优化方法，作为一种修改方式。我希望能够使用 SymPy 在给定点评估具有任意数量变量的函数，其中点的坐标存储在数组中。

例如，我想`f(x,y) = 3*x**2 - 2*x*y + y**2 + 4*x + 3*y`在点进行评估`b = [1,2]`。但我真的很喜欢一种通用的方法，它可以处理一个具有任意数量的变量和适当长度数组的函数作为要评估的点，所以`sympy.evalf(f, subs = {foo})`并不是很有用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T14:43:13.687

您正在使用 SymPy 表达式树，而不是函数。在任何表达式上，您都可以：

```
>>> vars = sorted(expression.free_symbols)
>>> evaluated = expression.subs(*zip(vars, your_values)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T14:43:28.323

我也希望这更容易做到，但这是一个很好的解决方法：

如果您知道符号名称 ( `'x'`, `'y'`, eg)，您可以`dict`使用以下命令动态创建一个`zip`：

```
fvars = sympy.symbols('x, y') #these probably already exist, use: fvars = [x,y]

b = [1,2]
sympy.evalf(f, subs = dict(zip(fvars,b))) 
```

# java - 这个Java代码正确吗？

> ID：15478455
> 
> 赞同：4
> 
> 时间：2013-03-18T13:49:39.600
> 
> 标签：java, loops, iterator

我正在与我的一位同事进行讨论（阅读论证！）。我认为这段代码是非常错误的，但他认为它没有任何问题：

```
for (Iterator<String> iter = collectionOfStrings.iterator(); iter.hasNext();) {
   String item = iter.next();
   ...
} 
```

我认为这段代码是错误的，因为存在重复循环。使用 Iterator 或使用 For 循环，但无需同时使用它们。

我将重写代码如下：

```
Iterator<String> iter = collectionOfStrings.iterator();
while (iter.hasNext()) {
   String item = iter.next();
   ...
} 
```

你怎么看？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-18T13:52:44.837

两种代码都不是“错误的”，因为它们都按照预期进行。第二个代码虽然等效，但会污染局部变量，因为`iter`在循环结束后仍然定义。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-18T13:52:38.280

您的两个示例在语法上都是正确的。将声明放在 for 循环中的一个优点是变量在代码块结束后被释放，而迭代器在 while 循环结束后仍然存在

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-18T14:04:28.637

第二个很好。

第一个稍微好一点。它限制了循环变量的范围。

但从 Java 1.5 开始，foreach 循环有时会比以下任何一个都更优雅：

```
for ( String item : collectionOfStrings ) {
   ...
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-18T13:53:32.480

其实是一样的。for 只是 while 的变体，或者 while 只是 for 的变体，但是你喜欢这样说。你可以写一个

```
for (init;cond;incr){
...
} 
```

像这样

```
init
while(cond){
....
incr
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-18T13:51:52.590

你的同事是对的。第一个带有`for`循环的代码应该可以正常运行。

事实上，`while`也是一个循环，所以你的代码和他的代码都包含一个循环和迭代器。

# html - 我如何制作一个字段集`display：block; 溢出：自动`显示滚动条？

> ID：15478459
> 
> 赞同：4
> 
> 时间：2013-03-18T13:49:47.370
> 
> 标签：html, css

我希望我的元素通过填充它们的包含元素并在它们设置为时显示滚动条`<fieldset>`来表现得像 vanilla的。`<div>``overflow: auto`

例如，我不明白为什么[这个例子](http://codepen.io/aaronj1335/pen/JEFmi)中的字段集比它包含的 div 宽：

```
<div class=outer>
  <fieldset class=inner>
      fooooooooooooooooooooooooooooooooooooo
  </fieldset>
</div>

<div class=outer>
  <div class=inner>
    fooooooooooooooooooooooooooooooooooooooo
  </div>
</div> 
```

和相应的CSS：

```
.outer {
  width: 60px;
}

.inner {
  overflow: auto;
  display: block;
  height: 60px;
  border: 1px solid red;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-18T13:55:26.033

事实证明（在某些情况下）罪魁祸首是 webkit 中的用户代理样式表正在设置：

```
fieldset {
  min-width: -webkit-min-content;
} 
```

[样式表中的设置`min-width: 0;`](http://codepen.io/aaronj1335/pen/Iiqkx)更正了 Chrome 27、Safari 6.0.2 和 WebKit Nightly r146031 中的问题。它无法纠正 Chrome 25 和 FireFox 19.0.2 中的问题。

无论哪种方式，这都不能解决问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T13:59:14.227

`<fieldset>`不从父 div 继承宽度。`.inner`div*确实*继承了宽度并缩小了。您可以通过添加`width: inherit`作为规则来解决这个问题`.inner`。请注意，这`<fieldset>`可能还会获得一些额外的填充和边距。

[http://codepen.io/anon/pen/fxjek](http://codepen.io/anon/pen/fxjek)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T14:21:09.917

Fieldset 版本比 div 版本宽的原因是 fieldset 有自己的默认填充，除非您另有指定。

见：http: [//jsfiddle.net/RDVY7/](http://jsfiddle.net/RDVY7/)

我将此添加到您的 CSS 中：

```
fieldset {
    margin:0 ;
    padding:0 ;
} 
```

它解决了这个问题。如果你想要你的字段集版本和你的 div 之间的间距，只需调整`margin:`元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T13:56:45.397

要在您的示例中修复`fieldset`或使其类似于`div`下面的内容，请添加以下 css::

```
fieldset{
  margin:0px;
  padding:0px
} 
```

您需要先重置边距和填充，使其像下面的 div 一样，然后添加您想要的宽度：

```
.inner {    
    width:60px;    
} 
```

# ruby - Webrick 代理 + cURL 返回错误请求

> ID：15478461
> 
> 赞同：2
> 
> 时间：2013-03-18T13:50:06.877
> 
> 标签：ruby, curl, proxy, webrick

我快疯了，我有一个非常简单的 WEBrickProxy（WEBrick 1.3.1，带有 Ruby 1.9.3），我想用 curl 试试。这是代理：

```
require 'webrick'
require 'webrick/httpproxy'

server = WEBrick::HTTPProxyServer.new(:BindAddress => "localhost", :Port => 8888)
trap('INT') { server.shutdown }
server.start 
```

这是 cURL 命令

```
curl --proxy localhost:8888 http://www.google.de -v 
```

但是 curl 命令总是返回一个错误的请求：

```
* About to connect() to proxy localhost port 8888 (#0)
*   Trying ::1...
* connected
* Connected to localhost (::1) port 8888 (#0)
> GET http://www.google.de HTTP/1.1
> User-Agent: curl/7.24.0 (x86_64-apple-darwin12.0) libcurl/7.24.0 OpenSSL/0.9.8r zlib/1.2.5
> Host: www.google.de
> Accept: */*
> Proxy-Connection: Keep-Alive
> 
< HTTP/1.1 400 Bad Request 
< Content-Type: text/html; charset=ISO-8859-1
< Server: WEBrick/1.3.1 (Ruby/1.9.3/2012-10-12)
< Date: Mon, 18 Mar 2013 13:44:27 GMT
< Content-Length: 295
< Connection: close
< 
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">
<HTML>
  <HEAD><TITLE>Bad Request</TITLE></HEAD>
  <BODY>
    <H1>Bad Request</H1>
    bad URI `http://www.google.de'.
    <HR>
    <ADDRESS>
     WEBrick/1.3.1 (Ruby/1.9.3/2012-10-12) at
     23tuxmb.local:8888
    </ADDRESS>
  </BODY>
</HTML>
* Closing connection #0 
```

`curl --version`在我的 Mac OS X 10.8 上返回

```
curl 7.24.0 (x86_64-apple-darwin12.0) libcurl/7.24.0 OpenSSL/0.9.8r zlib/1.2.5
Protocols: dict file ftp ftps gopher http https imap imaps ldap ldaps pop3 pop3s rtsp smtp smtps telnet tftp 
Features: AsynchDNS GSS-Negotiate IPv6 Largefile NTLM NTLM_WB SSL libz 
```

我找不到错误在哪里，几周前我尝试了那段代码，我记得它有效。

奇怪的是，当我将我的 Mac 配置为全局使用该代理（在内部`System Settings -> Network -> Advanced -> Proxies -> Web Proxy`）时，一切正常。Chrome 或任何其他应用程序的请求通过代理进行路由（我在代理的终端日志中看到了这一点）。

那么，任何人都可以重现这个问题吗？它是一个卷曲错误吗？还是与 Webrick 相关的问题？

**编辑**

更多信息：当 curl 尝试连接时，ruby 脚本本身的输出是

```
[2013-03-18 17:16:32] ERROR bad URI `http://www.amazon.de'.
localhost - - [18/Mar/2013:17:16:32 CET] "GET http://www.amazon.de HTTP/1.1" 400 286
- -> http://www.amazon.de 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T17:22:56.603

如果您在请求的 URL 中添加斜杠，那么它会起作用吗？即这样的命令行：

> curl --proxy localhost:8888 [http://www.google.de/](http://www.google.de/) -v

（这是[bug #1206](https://sourceforge.net/p/curl/bugs/1206/)中报告的 curl 错误，并在 git 和下一个版本中修复...）

# asp.net-mvc - 如何检查 Uploadify JQ 插件中已上传的文件？

> ID：15478462
> 
> 赞同：0
> 
> 时间：2013-03-18T13:50:09.487
> 
> 标签：asp.net-mvc, jqgrid, uploadify

我必须阻止用户在“uploadify”jquery 插件中添加已经添加到服务器中的文件。

有一个网格显示已添加的文件，因此我计划从网格中获取文件名集合，并在选择功能时检查它以防止添加已上传的文件。

有没有更好或更简单的方法来做到这一点？

请帮助完成代码。

上述逻辑行得通吗？

```
var uploadQueue = new Array();
jQuery().ready(function ($) {
 debugger;
            $.ajax({
                 type: "POST",
                 async: false,
                  url: ROOT + "Documents/DocumentAJAXController",
                 data: { "ID": $('[id="ID"]').val() },
                 success: function (result) {
                  }
            });

 $("#SubmitButton1").hide();
    $("#fileuploader").fileUpload({
            'uploader':  "@Url.Content("~/Scripts/FileUpload/uploader.swf")",
            'cancelImg':  "@Url.Content("~/Content/Images/clearBtn.png")",
            'buttonText': 'Browse Files',
            //'buttonImg' : "@Url.Content("~/Content/Images/attachDoc.png")",
            'script': "@Url.Content("~/Documents/Upload/")",   
            'folder': "@Url.Content("~/Documents/")",
            //'fileDesc': 'Documents Files',
            'fileExt': '*.pdf;*.doc;*.ppt;*.xls',
            'multi': true,
            'auto': false, 
            onError: function (a, b, c, d) {
            },
            'onSelect': function (event, queueID, fileObj) {

               // uploadQueue.push(queueID);

            },                
            'onAllComplete': function(event,data){
            alert("Uploaded successfully");
            $('.popupClose').click();
            }            
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T15:43:49.910

此功能内置在最新版本的 uploadify 中。

Uploadify在您传递给 uploadify 的设置中提供了一个[checkScript 处理程序。](http://www.uploadify.com/documentation/uploadifive/checkscript/)

如果将其指向适当的服务器脚本，它将不允许已存在的文件。

`check-exists.php`uploadify zip 中提供了一个名为的示例脚本。

# sql - 连接每条记录有两个条目的表时，如何在 Teradata SQL 中返回不同的记录？

> ID：15478465
> 
> 赞同：1
> 
> 时间：2013-03-18T13:50:18.677
> 
> 标签：sql, join, teradata

标题有点拗口，但基本上我有两个表，其中一个包含事件数据，例如，`incident_data`包含事件 ID、日期、时间和其他结构化字段等内容。另一个`incident_text`包含描述、分辨率和其他自由格式的文本字段。

我想同时搜索描述和分辨率字段`incident_text`并将其加入`incident_data`以获取更多详细信息。它们由 连接`incidentno`，每个事件在 中可以有两个条目`incident_text`，一个用于描述，另一个用于解决。

说这是我的查询：

```
SELECT    
DISTINCT INCIDENTNO as "Incident Number",
SOME_OTHER_FIELDS ETC..,
TEXTFIELD AS "Text"
TEXTFIELDTYPE AS "Text Type"

FROM INCIDENT_DATA
INNER JOIN INCIDENT_TEXT
ON INCIDENT_DATA.INCIDENTNO=INCIDENT_TEXT.INCIDENTNO

WHERE TEXT LIKE ANY ('%THIS THING%', '%THAT THING%') 
```

这给了我一张这样的桌子，尽管使用`DISTINCT`

```
INCIDENT-1 ... FORGOT MY PASSWORD TO THIS THING ... DESCRIPTION
INCIDENT-1 ... PASSWORD RESET TO THAT THING.... RESOLUTION 
```

如果我添加`AND TEXTFIELDTYPE = 'DESCRIPTION'`我不再得到重复，但我也停止搜索分辨率字段，我仍然想这样做。

我正在寻找的是每个事件一行，带有事件的描述，同时在描述和解决方案字段中进行搜索。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T16:12:08.720

你非常接近 - 主要归结为告诉 SQL 分别处理描述和解析行。

```
SELECT Incident_Data.incidentNo as "Incident Number",
       some_other_fields etc..,
       d.textField AS "Text", d.textFieldType AS "Text Type"
FROM Incident_Data
INNER JOIN Incident_Text d
        ON d.incidentNo = Incident_Data.incidentNo
           AND d.textFieldType = 'Description'
LEFT JOIN Incident_Text r
       ON r.incidentNo = Incident_Data.incidentNo
          AND r.textFieldType = 'Resolution'
          AND r.textField LIKE ANY ('%THIS THING%', '%THAT THING%')
WHERE d.textField LIKE ANY ('%THIS THING%', '%THAT THING%')
      OR r.incidentNo IS NOT NULL 
```

（未测试，请验证）
- 一个注释 - 您不使用`UPPER()`（或`LOWER()`，或类似）；你确定那个外壳正在被使用吗？
这也是`WHERE`无法将子句条件上移到 中的情况之一`INNER JOIN`，因为即使描述不包含搜索文本，我们也需要这些行。

# java - 为什么我的项目需要一个 applicationContext.xml 用于带有 JavaConfig 的 Spring Security

> ID：15478469
> 
> 赞同：1
> 
> 时间：2013-03-18T13:50:23.973
> 
> 标签：java, spring, spring-mvc, spring-security

我有一个 Spring MVC 项目，它使用 XML 进行所有配置，但我删除了所有 XML 并将它们放入 JavaConfig（除 Spring Security 之外的所有内容）。一旦我尝试让 Spring Security 工作，我可以看到我的项目正在爆炸中寻找 WEB.INF 中的 applicationContext.xml。我没有任何指向，所以我需要谁>？

我的 secuirty.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/security"
    xmlns:beans="http://www.springframework.org/schema/beans" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
                        http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
                        http://www.springframework.org/schema/security
                        http://www.springframework.org/schema/security/spring-security-3.1.xsd">

    <global-method-security pre-post-annotations="enabled" />

    <http use-expressions="true">
        <intercept-url access="hasRole('ROLE_VERIFIED_MEMBER')" pattern="/mrequest**" />
        <intercept-url pattern='/*' access='permitAll' />
        <form-login default-target-url="/visit" />

        <logout logout-success-url="/" />
    </http>

    <authentication-manager>
        <authentication-provider>
            <user-service>
                <user name="cpilling04@aol.com.dev" password="testing" authorities="ROLE_VERIFIED_MEMBER" />
            </user-service>

        </authentication-provider>
    </authentication-manager>
</beans:beans> 
```

这是我的网络配置：

```
@Configuration
@EnableWebMvc
@Import(DatabaseConfig.class)
@ImportResource("/WEB-INF/spring/secuirty.xml")
public class WebMVCConfig extends WebMvcConfigurerAdapter {

    private static final String MESSAGE_SOURCE = "/WEB-INF/classes/messages";

    private static final Logger logger = LoggerFactory.getLogger(WebMVCConfig.class);

    @Bean
    public  ViewResolver resolver() {
        UrlBasedViewResolver url = new UrlBasedViewResolver();
        url.setPrefix("/WEB-INF/view/");
        url.setViewClass(JstlView.class);
        url.setSuffix(".jsp");
        return url;
    }

    @Bean(name = "messageSource")
    public MessageSource configureMessageSource() {
        logger.debug("setting up message source");
        ReloadableResourceBundleMessageSource messageSource = new ReloadableResourceBundleMessageSource();
        messageSource.setBasename(MESSAGE_SOURCE);
        messageSource.setCacheSeconds(5);
        messageSource.setDefaultEncoding("UTF-8");
        return messageSource;
    }

    @Bean
    public LocaleResolver localeResolver() {
        SessionLocaleResolver lr = new SessionLocaleResolver();
        lr.setDefaultLocale(Locale.ENGLISH);
        return lr;
    }

    @Override
    public void addResourceHandlers(ResourceHandlerRegistry registry) {
        logger.debug("setting up resource handlers");
        registry.addResourceHandler("/resources/").addResourceLocations("/resources/**");
    }

    @Override
    public void configureDefaultServletHandling(DefaultServletHandlerConfigurer configurer) {
        logger.debug("configureDefaultServletHandling");
        configurer.enable();
    }

    @Override
    public void addInterceptors(final InterceptorRegistry registry) {
        registry.addInterceptor(new LocaleChangeInterceptor());
    }

    @Bean
    public SimpleMappingExceptionResolver simpleMappingExceptionResolver() {
        SimpleMappingExceptionResolver b = new SimpleMappingExceptionResolver();

        Properties mappings = new Properties();
        mappings.put("org.springframework.web.servlet.PageNotFound", "p404");
        mappings.put("org.springframework.dao.DataAccessException", "dataAccessFailure");
        mappings.put("org.springframework.transaction.TransactionException", "dataAccessFailure");
        b.setExceptionMappings(mappings);
        return b;
    }

    @Bean
    public RequestTrackerConfig requestTrackerConfig()
    {
        RequestTrackerConfig tr = new RequestTrackerConfig();
        tr.setPassword("Waiting#$");
        tr.setUrl("https://uftwfrt01-dev.uftmasterad.org/REST/1.0");
        tr.setUser("root");

        return tr;
    }

} 
```

这是我的数据库配置：

```
@Configuration
@EnableTransactionManagement
@ComponentScan(basePackages= "org.uftwf")
@PropertySource(value = "classpath:application.properties")
public class DatabaseConfig  {

    private static final Logger logger = LoggerFactory.getLogger(DatabaseConfig.class);

    @Value("${jdbc.driverClassName}")
    private String driverClassName;

    @Value("${jdbc.url}")
    private String url;

    @Value("${jdbc.username}")
    private String username;

    @Value("${jdbc.password}")
    private String password;

    @Value("${hibernate.dialect}")
    private String hibernateDialect;

    @Value("${hibernate.show_sql}")
    private String hibernateShowSql;

    @Value("${hibernate.hbm2ddl.auto}")
    private String hibernateHbm2ddlAuto;

    @Bean
    public PropertyPlaceholderConfigurer getPropertyPlaceholderConfigurer()
    {
        PropertyPlaceholderConfigurer ppc = new PropertyPlaceholderConfigurer();
        ppc.setLocation(new ClassPathResource("application.properties"));
        ppc.setIgnoreUnresolvablePlaceholders(true);
        return ppc;
    }

    @Bean
     public DataSource dataSource()  {

        try {
            Context ctx = new InitialContext();
            return (DataSource) ctx.lookup("java:jboss/datasources/mySQLDB");
        }
        catch (Exception e)
        {

        }

        return null;
     }

    @Bean
    public SessionFactory sessionFactory()
    {

        LocalSessionFactoryBean factoryBean = new LocalSessionFactoryBean();
        factoryBean.setDataSource(dataSource());
        factoryBean.setHibernateProperties(getHibernateProperties());
        factoryBean.setPackagesToScan("org.uftwf.inquiry.model");

        try {
            factoryBean.afterPropertiesSet();
        } catch (IOException e) {
            logger.error(e.getMessage());
            e.printStackTrace();  //To change body of catch statement use File | Settings | File Templates.
        }

        return factoryBean.getObject();
    }

    @Bean
    public Properties getHibernateProperties()
    {
        Properties hibernateProperties = new Properties();

        hibernateProperties.setProperty("hibernate.dialect", "org.hibernate.dialect.MySQL5Dialect");
        hibernateProperties.setProperty("hibernate.show_sql", "true");

        hibernateProperties.setProperty("hibernate.format_sql", "true");
        hibernateProperties.setProperty("hibernate.hbm2ddl.auto", "update");

        hibernateProperties.setProperty("javax.persistence.validation.mode", "none");

        //Audit History flags
        hibernateProperties.setProperty("org.hibernate.envers.store_data_at_delete", "true");
        hibernateProperties.setProperty("org.hibernate.envers.global_with_modified_flag", "true");

        return hibernateProperties;
    }

    @Bean
    public HibernateTransactionManager hibernateTransactionManager()
    {
        HibernateTransactionManager htm = new HibernateTransactionManager();
        htm.setSessionFactory(sessionFactory());
        htm.afterPropertiesSet();
        return htm;
    }

} 
```

和我的 web.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xmlns="http://java.sun.com/xml/ns/javaee"
         xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
         id="WebApp_ID" version="2.5">

    <display-name>Inquiry</display-name>
    <welcome-file-list>
        <welcome-file>index.jsp</welcome-file>
    </welcome-file-list>

    <servlet>
        <servlet-name>Spring MVC Dispatcher Servlet</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <init-param>
            <param-name>contextClass</param-name>
            <param-value>org.springframework.web.context.support.AnnotationConfigWebApplicationContext</param-value>
        </init-param>
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>org.uftwf.inquiry.config, org.uftwf.inquiry.controller</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>Spring MVC Dispatcher Servlet</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>

 <filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>
<filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>

<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>

<!--

 <security-constraint>
     <web-resource-collection>
         <web-resource-name>securedapp</web-resource-name>
         <url-pattern>/*</url-pattern>
     </web-resource-collection>

     <user-data-constraint>
         <transport-guarantee>CONFIDENTIAL</transport-guarantee>
     </user-data-constraint>
 </security-constraint>
-->
</web-app> 
```

所以我没有看到任何在寻找 applicationContext.xml .... 有人可以告诉我为什么我需要它来添加它，一旦我这样做了，它就开始工作了

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T14:13:49.393

您`ContextLoaderListener`在 web.xml 中进行了配置，但尚未指定`contextConfigLocation`上下文参数。这种情况下的行为由该类的 javadoc 描述：

> 处理“contextConfigLocation”上下文参数 [...] 如果没有明确指定，上下文实现应该使用默认位置（使用 XmlWebApplicationContext：“/WEB-INF/applicationContext.xml”）。

所以，它`ContextLoaderListener`需要一个`applicationContext.xml`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-19T18:07:34.200

Spring 应用程序上下文是分层的。Web 应用程序中的典型安排是上下文加载器侦听器引导您的 AC 并使它们“全局”可用，然后每个单独的 DispatcherServlet 将具有自己的子应用程序上下文，可以“看到”所有 bean（通常是服务、数据源、等）来自上下文加载器侦听器的 AC。在所有情况下 - 当指定 ContextLoaderListener 或 DispatcherServlet - Spring 将自动（基于约定）查找 XML 应用程序上下文并尝试加载它。通常，您可以通过简单地指定一个空的 contextConfigLocation 参数 ("") 或告诉它它应该期望一个 Java 配置类来禁用它（contextClass 属性）。顺便说一句，可以有多个 DispatcherServlet。例如，您可能会 一个使用 Spring Integration 的入站 HTTP 适配器，另一个使用 Spring Web Services 端点，另一个使用 Spring MVC 应用程序，另一个使用 Spring HTTP 调用程序端点，它们都将通过 DispatcherServlet 公开。从理论上讲，您可以让它们都在同一个 DispatcherServlet 中工作，但隔离有助于保持事情不那么混乱，并且它们都可以共享相同的全局、更昂贵的 bean 的单个实例，例如 DataSources。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-01T01:42:27.003

为确保您的应用不使用 applicationContext.xml，您可以执行类似的操作。[您可以在这里](https://github.com/lancempoe/DarkSkyMongoApi/blob/master/src/main/java/com/lancep/config/Initializer.java)看到这一切是如何结合在一起的。

```
public class MyInitializer implements WebApplicationInitializer {

@Override
public void onStartup(ServletContext servletContext) {

    //Clear out reference to applicationContext.xml
    servletContext.setInitParameter("contextConfigLocation", "");

    // Create the 'root' Spring application context
    AnnotationConfigWebApplicationContext rootContext =
            new AnnotationConfigWebApplicationContext();
    rootContext.register(MySpringRootConfiguration.class);

    // Manage the lifecycle of the root application context
    servletContext.addListener(new ContextLoaderListener(rootContext));

    //Add jersey or any other servlets
    ServletContainer jerseyServlet = new ServletContainer(new RestApplication());
    Dynamic servlet = servletContext.addServlet("jersey-servlet", jerseyServlet);
    servlet.addMapping("/api/*");
    servlet.setLoadOnStartup(1);
}
} 
```

# batch-file - 检测批量 IP 冲突

> ID：15478470
> 
> 赞同：0
> 
> 时间：2013-03-18T13:50:26.757
> 
> 标签：batch-file, failover

您将如何检测 IP 冲突？

我正在尝试实现两个系统的故障转移。让我们假设他们使用 IP XXX1 和 XXX2（为方便起见，A 和 B），A 作为主服务器，B 作为备份。

A 和 B 都会不断 ping XXX1。如果 A 出现故障，B 将检测到“请求超时”，并使用以下命令将自身转换为 XXX1：

```
netsh int ipv4 set address name="Local Area Connection" source=static address=X.X.X.1 mask=255.255.255.0 gateway=none 
```

当 A 重新连接自己时，我希望故障转移能够顺利且自动地发生。现在，既然有两台机器用XXX1，就会有IP冲突。B 保留 XXX1，而 A 作为“后来的”计算机将收到此冲突。当 A 再次尝试 ping XXX1 时，A 反而收到：

```
PING: General failure. 
```

然后 A 会以某种方式检测到这一点并将自己转换为 XXX2。现在两台机器都运行良好，只是它们是镜像的。

或者这就是逻辑。目前，我无法检测到 PING：一般故障。怎么做呢？

或者，如果有更好的方法来进行故障转移，那会是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T14:09:38.463

I think you need to redirect the `ping` command's stderr to stdout with `2>&1` before you can test for errors.

```
:loop
ping x.x.x.1 2>&1 | find /i "general failure" && (
        netsh int ipv4 set address name="Local Area Connection" source=static address=X.X.X.2 mask=255.255.255.0 gateway=none
)
goto loop 
```

It might be better to check for success rather than failure. Here's something a little more robust that should switch from .2 to .1 if .1 dies; and from .1 to .2 if conflict.

```
@echo off
setlocal

:: Host to ping
set primary=x.x.x.1
:: Ping with options (1 ping sent per loop, wait 500 ms for timeout)
set ping_options=-n 1 -w 500
:: Fail over after x ping failed responses
set fail_limit=5

:loop

:: Ping x.x.x.1\.  Test for "reply from".  If success, set failures=0; otherwise, increment failures
( ping %ping_options% %primary% 2>&1 | find /i "reply from" >NUL && set failures=0 ) || set /a "failures+=1"

:: If failures >= limit, switch IP
if failures GEQ %fail_limit% call :switch

:: Pause for a second and begin again.
ping -n 2 0.0.0.0 >NUL
goto loop

:: Switch subroutine
:switch

:: Get current IPv4 address
for /f "tokens=2 delims={}," %%I in ('wmic nicconfig where ipenabled="TRUE" get ipaddress /format:list') do set IP=%%~I

:: If the last character if the current IP is 1, switch to 2 (or vice versa)
if %IP:~-1%==1 ( set other=%IP:0,-1%2 ) else set other=%IP:0,-1%1

:: Perform the switch
netsh int ipv4 set address name="Local Area Connection" source=static address=%other% mask=255.255.255.0 gateway=none 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T14:09:51.050

As batch lines, perhaps

```
ping ..whateveryou'dusetogeneratetheerror.. X.X.X.1 |find /i "General failure" >nul
if not errorlevel 1 netsh...(as above) 
```

# android - 定期事件的 Android 日历提供程序异常

> ID：15478473
> 
> 赞同：1
> 
> 时间：2013-03-18T13:50:41.543
> 
> 标签：android, android-contentprovider, android-calendar

我尝试利用 CalendarContract 内容提供者：http: [//developer.android.com/reference/android/provider/CalendarContract.Events.html](http://developer.android.com/reference/android/provider/CalendarContract.Events.html)

我似乎找不到任何关于重复事件异常的信息。
[我使用 Instances URI 进行查询](http://developer.android.com/reference/android/provider/CalendarContract.Instances.html#CONTENT_URI)。
我添加了一个事件（在 calendar.google.com 上）并让它每天重复。现在我更改了其中一个实例的时间，内容提供者正确地给了我异常：

```
// Original event instance:
    eventID: 320
    instanceID: 651
    startdate: Wed Mar 13 09:30:00 CET 2013
    rrule: FREQ=WEEKLY;BYDAY=MO,TU,WE,TH,FR
    original_event_id: null
    exrule: null
    exdate: null

// Exception event instance:
    eventID: 333
    instanceID: 888
    startdate: Mon Mar 18 15:00:00 CET 2013
    rrule: null
    original_event_id: 320
    exrule: null
    exdate: null 
```

正如您在上面看到的，原始事件没有`exrule`，`exdate`但异常事件仍然正确显示（不与原始事件实例重叠）

现在我的问题来了：我想自己为重复事件添加一个例外。但我不知道我需要填写哪些字段以及它是如何工作的。因为上面的例子根本没有帮助。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-18T14:12:06.817

我有点太仓促发布这个问题。将事件插入`CalendarContract.Events.CONTENT_EXCEPTION_URI`将处理所有这些......

# asp.net-mvc - jqGrid使用Oleg的例子过滤记录

> ID：15478482
> 
> 赞同：1
> 
> 时间：2013-03-18T13:51:03.850
> 
> 标签：asp.net-mvc, search, jqgrid, filtering

我在解决网格中的两个列的几个错误时遇到了问题。我创建了一个包含几个表的示例数据库，并创建了一个 jqGrid 测试应用程序来显示数据。我想对网格上的数据进行一些搜索/过滤。我使用了 Oleg 的使用 MVC 进行搜索和过滤的示例。我的前两列（ID、事件标题）运行良好，但之后的任何列都不起作用。我确定我错过了一些东西，但看不到我错过了什么。任何帮助都会很棒。下面是代码。

客户端：

```
var myGrid = $('#list'),
    decodeErrorMessage = function (jqXHR, textStatus, errorThrown) {
                var html, errorInfo, i, errorText = textStatus + '\n' + errorThrown;
                if (jqXHR.responseText.charAt(0) === '[') {
                    try {
                        errorInfo = $.parseJSON(jqXHR.responseText);
                        errorText = "";
                        for (i = 0; i < errorInfo.length; i++) {
                            if (errorText.length !== 0) {
                                errorText += "<hr />";
                            }
                            errorText += errorInfo[i].Source + ": " + errorInfo[i].Message;
                        }
                    }
                    catch (e) { }
                } else {
                    html = /<body.*?>([\s\S]*)<\/body>/.exec(jqXHR.responseText);
                    if (html !== null && html.length > 1) {
                        errorText = html[1];
                    }
                }
                return errorText;
            };

        myGrid.jqGrid({
            url: '../Admin/GetEventsGridData/',
            datatype: 'json',
            mtype: 'POST',
            colNames: ['ID', 'Event Title', 'Series', 'Occ', 'Department' ],  
            colModel: [
                        { name: 'EVENT_ID', index: 'EVENT_ID', editable: true, editoptions: { readonly: 'readonly' }, width: 25, searchoptions: { sopt: ['eq', 'ne', 'lt', 'le', 'gt', 'ge']} },
                        { name: 'EVENT_TITLE', index: 'EVENT_TITLE', editable: true, width: 205, searchoptions: { sopt: ['cn', 'nc', 'bw', 'bn', 'eq', 'ne', 'ew', 'en', 'lt', 'le', 'gt', 'ge']} },
                        { name: 'SERIES_DESCRIPTION', index: 'SERIES_DESCRIPTION', editable: true, width: 30, searchoptions: { sopt: ['cn', 'nc', 'bw', 'bn', 'eq', 'ne', 'ew', 'en', 'lt', 'le', 'gt', 'ge']} },
                        { name: 'OCCURRENCES', index: 'OCCURRENCES', editable: true, width: 20, searchoptions: { sopt: ['eq', 'ne', 'lt', 'le', 'gt', 'ge']} }
                        { name: 'DEPARTMENT_NAME', index: 'DEPARTMENT_NAME', editable: true, width: 100, searchoptions: { sopt: ['cn', 'nc', 'bw', 'bn', 'eq', 'ne', 'ew', 'en', 'lt', 'le', 'gt', 'ge']} }
                        ],
            pager: '#pager',
            autowidth: true,
            height: 'auto',
            rowNum: 10,
            rowList: [5, 10, 20, 50],
            sortname: 'EVENT_ID',
            sortorder: "desc",
            viewrecords: true,
            caption: 'Events',
            jsonReader: { cell: "" },
            loadError: function (jqXHR, textStatus, errorThrown) {
                // remove error div if exist
                $('#' + this.id + '_err').remove();
                // insert div with the error description before the grid
                myGrid.closest('div.ui-jqgrid').before(
                    '<div id="' + this.id + '_err" style="max-width:' + this.style.width +
                    ';"><div class="ui-state-error ui-corner-all" style="padding:0.7em;float:left;"><span class="ui-icon ui-icon-alert" style="float:left; margin-right: .3em;"></span><span style="clear:left">' +
                    decodeErrorMessage(jqXHR, textStatus, errorThrown) + '</span></div><div style="clear:left" /></div>')
            },
            loadComplete: function () {
                // remove error div if exist
                $('#' + this.id + '_err').remove();
            }
        });
        myGrid.jqGrid('navGrid', '#pager', { add: true, edit: true, del: true, refresh: true },
                      updateDialog, // add a record
                      updateDialog, // edit a record
                      updateDialog, // delete a record
                      {multipleSearch: true, overlay: false, width: 460 });
        myGrid.jqGrid('filterToolbar', { stringResult: true, searchOnEnter: true, defaultSearch: 'cn' });
        myGrid.jqGrid('navButtonAdd', '#pager',
                    { caption: "Filter", title: "Toggle Searching Toolbar",
                        buttonicon: 'ui-icon-pin-s',
                        onClickButton: function () { myGrid[0].toggleToolbar(); }
                    }); 
```

这是我的服务器端：

```
using System;
using System.Collections.Generic;
using System.Data.Objects;
using System.Linq;
using System.Reflection;
using System.Text;
using System.Web.Mvc;
using System.Web.Script.Serialization;
using Newtonsoft.Json;
//using System.Data.Entity.Infrastructure;
using CATS.Models;

namespace CATS.Controllers
{
// to send exceptions as json we define [HandleJsonException] attribute
public class ExceptionInformation
{
    public string Message { get; set; }

    public string Source { get; set; }

    public string StackTrace { get; set; }
}

public class HandleJsonExceptionAttribute : ActionFilterAttribute
{
    public override void OnActionExecuted(ActionExecutedContext filterContext)
    {
        if (filterContext.HttpContext.Request.IsAjaxRequest() && filterContext.Exception != null)
        {
            filterContext.HttpContext.Response.StatusCode =
                (int)System.Net.HttpStatusCode.InternalServerError;

            var exInfo = new List<ExceptionInformation>();
            for (Exception ex = filterContext.Exception; ex != null; ex = ex.InnerException)
            {
                PropertyInfo propertyInfo = ex.GetType().GetProperty("ErrorCode");
                exInfo.Add(new ExceptionInformation()
                {
                    Message = ex.Message,
                    Source = ex.Source,
                    StackTrace = ex.StackTrace
                });
            }
            filterContext.Result = new JsonResult() { Data = exInfo };
            filterContext.ExceptionHandled = true;
        }
    }
}

public class Filters
{
    public enum GroupOp
    {
        AND,
        OR
    }
    public enum Operations
    {
        eq, // "equal"
        ne, // "not equal"
        lt, // "less"
        le, // "less or equal"
        gt, // "greater"
        ge, // "greater or equal"
        bw, // "begins with"
        bn, // "does not begin with"
        //in, // "in"
        //ni, // "not in"
        ew, // "ends with"
        en, // "does not end with"
        cn, // "contains"
        nc  // "does not contain"
    }
    public class Rule
    {
        public string field { get; set; }
        public Operations op { get; set; }
        public string data { get; set; }
    }

    public GroupOp groupOp { get; set; }
    public List<Rule> rules { get; set; }
    private static readonly string[] FormatMapping = {
        "(it.{0} = @p{1})",                 // "eq" - equal
        "(it.{0} <> @p{1})",                // "ne" - not equal
        "(it.{0} < @p{1})",                 // "lt" - less than
        "(it.{0} <= @p{1})",                // "le" - less than or equal to
        "(it.{0} > @p{1})",                 // "gt" - greater than
        "(it.{0} >= @p{1})",                // "ge" - greater than or equal to
        "(it.{0} LIKE (@p{1}+'%'))",        // "bw" - begins with
        "(it.{0} NOT LIKE (@p{1}+'%'))",    // "bn" - does not begin with
        "(it.{0} LIKE ('%'+@p{1}))",        // "ew" - ends with
        "(it.{0} NOT LIKE ('%'+@p{1}))",    // "en" - does not end with
        "(it.{0} LIKE ('%'+@p{1}+'%'))",    // "cn" - contains
        "(it.{0} NOT LIKE ('%'+@p{1}+'%'))" //" nc" - does not contain
    };
    internal ObjectQuery<T> FilterObjectSet<T>(ObjectQuery<T> inputQuery) where T : class
    {
        if (rules.Count <= 0)
            return inputQuery;

        var sb = new StringBuilder();
        var objParams = new List<ObjectParameter>(rules.Count);

        foreach (Rule rule in rules)
        {
            PropertyInfo propertyInfo = typeof(T).GetProperty(rule.field);
            if (propertyInfo == null)
                continue; // skip wrong entries

            if (sb.Length != 0)
                sb.Append(groupOp);

            var iParam = objParams.Count;
            sb.AppendFormat(FormatMapping[(int)rule.op], rule.field, iParam);

            ObjectParameter param;
            switch (propertyInfo.PropertyType.FullName)
            {
                case "System.Int32":  // int
                    param = new ObjectParameter("p" + iParam, Int32.Parse(rule.data));
                    break;
                case "System.Int64":  // bigint
                    param = new ObjectParameter("p" + iParam, Int64.Parse(rule.data));
                    break;
                case "System.Int16":  // smallint
                    param = new ObjectParameter("p" + iParam, Int16.Parse(rule.data));
                    break;
                case "System.SByte":  // tinyint
                    param = new ObjectParameter("p" + iParam, SByte.Parse(rule.data));
                    break;
                case "System.Single": // Edm.Single, in SQL: float
                    param = new ObjectParameter("p" + iParam, Single.Parse(rule.data));
                    break;
                case "System.Double": // float(53), double precision
                    param = new ObjectParameter("p" + iParam, Double.Parse(rule.data));
                    break;
                case "System.Boolean": // Edm.Boolean, in SQL: bit
                    param = new ObjectParameter("p" + iParam,
                        String.Compare(rule.data, "1", StringComparison.Ordinal) == 0 ||
                        String.Compare(rule.data, "yes", StringComparison.OrdinalIgnoreCase) == 0 ||
                        String.Compare(rule.data, "true", StringComparison.OrdinalIgnoreCase) == 0);
                    break;
                default:
                    // TODO: Extend to other data types
                    // binary, date, datetimeoffset,
                    // decimal, numeric,
                    // money, smallmoney
                    // and so on

                    param = new ObjectParameter("p" + iParam, rule.data);
                    break;
            }
            objParams.Add(param);
        }

        ObjectQuery<T> filteredQuery = inputQuery.Where(sb.ToString());
        foreach (var objParam in objParams)
            filteredQuery.Parameters.Add(objParam);

        return filteredQuery;
    }
}

[HandleJsonException]
public class AdminController : Controller
{
    //
    // GET: /Admin/

    public ActionResult Admin()
    {
        ViewBag.PageTitle = "Admin";

        return View();
    }

    public ActionResult GetEventsGridData(string sidx, string sord, int page, int rows, bool _search, string filters)
    {
        var context = new CATEntities();

        //var context = new CATContext();
        //var serializer = new JavaScriptSerializer();

        //var objectContext = ((IObjectContextAdapter)context).ObjectContext;
        //var eventset = objectContext.CreateObjectSet<EVENT>();

        Filters f = (!_search || string.IsNullOrEmpty(filters)) ? null : JsonConvert.DeserializeObject<Filters>(filters);
        ObjectQuery<EVENT> filteredQuery = (f == null ? context.EVENT : f.FilterObjectSet(context.EVENT)); // (ObjectQuery<EVENT>)eventset)
        filteredQuery.MergeOption = MergeOption.NoTracking; // we don't want to update the data

        var totalRecords = filteredQuery.Count();

        var pagedQuery = filteredQuery.Skip("it." + sidx + " " + sord, "@skip",
                                            new ObjectParameter("skip", (page - 1) * rows))
                                     .Top("@limit", new ObjectParameter("limit", rows));

        // to be able to use ToString() below which does NOT exist in the LINQ to Entity
        var queryDetails = (from item in pagedQuery
                            select new { item.EVENT_ID, item.EVENT_TITLE, item.EVENT_SERIES.SERIES_DESCRIPTION, item.OCCURRENCES, item.DEPARTMENT.DEPARTMENT_NAME  }).ToList();

        return Json(new
        {
            total = (totalRecords + rows - 1) / rows,
            page,
            records = totalRecords,
            rows = (from item in queryDetails
                    select new[] {
                            item.EVENT_ID.ToString(),
                            item.EVENT_TITLE,
                            item.SERIES_DESCRIPTION,
                            item.OCCURRENCES.ToString()
                            item.DEPARTMENT_NAME
                    }).ToList()
        });
    }

    public ActionResult UpdateGridData(FormCollection formCollection)
    {
        return Json(JsonRequestBehavior.AllowGet);
    }
} 
```

}

我的问题是我在 Occurrences 列上收到此错误：

```
System.Data.Entity: The argument types 'Edm.Int32' and 'Edm.String' are incompatible for this operation. Near equals expression, line 6, column 17. 
```

Occurrences 列中的所有数据都是整数数据。这告诉我它正在寻找整数数据，但我正在向它发送字符串数据。此列与 EVENT_ID 列类似。不知道我在哪里错过了断开连接。

Series 列也有问题。在 Event 表上，Series 列是我的系列表的外键 ID。从那里我得到系列描述。部门列类似。当我尝试对这两列进行搜索/过滤时，出现此错误：

```
System.Data.Entity: You must specify a valid predicate for filtering the results. Parameter name: predicate 
```

我错过了一些东西，但对于我的生活，我找不到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-22T09:13:03.437

试试这个代码....

data 是实体的集合... cols 是 List Entity.PropertyName

var filterExpr = jqGridHelper.SearchDelgate(filters, cols);

var data = EntityRepository.Get().Where(filterExpr).ToList();

```
 public static Expression<Func<T, bool>> SearchDelgate<T>(string jsonData, List<JqGridColModel> colmodels) where T : Entity
    {
        var dateCols = colmodels.Where(x => x.colType == "System.DateTime").Select(x => x.index).ToList();
        var filter = GetFilter(jsonData, dateCols);
        return GetFilterExpr<T>(filter, null, null);
    }
    private static Expression<Func<T, bool>> GetFilterExpr<T>(JqGridFilter filter, string searchOpr, Expression<Func<T, bool>> expr) where T : Entity
    {
        var rules = filter.rules;
        searchOpr = searchOpr ?? GetOperator(filter.groupOp);
        Expression<Func<T, bool>> ruleexpr = null;
        rules.ForEach(x =>
        {
            ruleexpr = Extentions.ToExpression<T>(GetOperator(filter.groupOp), x.field, GetOperator(x.op), x.data, ruleexpr);
        });
        if (!expr.IsNull())
            ruleexpr = searchOpr == "&&" ? expr.And(ruleexpr) : expr.Or(ruleexpr);
        if (!filter.groups.IsNull())
        {
            Expression<Func<T, bool>> groupexpr = null;
            filter.groups.ForEach(x =>
            {
                groupexpr = GetFilterExpr<T>(x, searchOpr, groupexpr);
            });
            expr = searchOpr == "&&" ? ruleexpr.And(groupexpr) : ruleexpr.Or(groupexpr);
        }
        else
            expr = ruleexpr;
        return expr;
    }

    private static JqGridFilter GetFilter(string jsonData, List<string> dateCols)
    {
        var temp = Deserialize<Dictionary<string, object>>(jsonData);
        return CreateFilter(temp, dateCols);
    }
    private static JqGridFilter CreateFilter(object rawData, List<string> dateCols)
    {
        var temp = rawData.ExplicitCast<Dictionary<string, object>>();
        var groupOp = temp["groupOp"];
        var rulesData = temp["rules"];
        var groupsdata = temp.Keys.Contains("groups") ? temp["groups"] : null;

        JqGridFilter filter = new JqGridFilter();
        filter.groupOp = groupOp.ToString();
        var rules = new List<JqGridFilterRule>();
        foreach (var obj in rulesData.ExplicitCast<ArrayList>())
        {
            JqGridFilterRule rule = new Core.JqGridFilterRule();
            rule.DictToObject(obj);
            setDateCols(rule, rules, dateCols);
            // rules.Add(rule);
        }
        if (!rules.IsNull())
            filter.rules = rules;

        if (!groupsdata.IsNull())
        {
            var groups = new List<JqGridFilter>();
            foreach (var obj in groupsdata.ExplicitCast<ArrayList>())
            {
                groups.Add(CreateFilter(obj, dateCols));
            }
            if (!groups.IsNull())
                filter.groups = groups;
        }
        return filter;
    }
    private static string GetOperator(string op)
    {
        string searchOper = "==";
        switch (op)
        {
            case "eq":  //equals
            case "ew":  //equals with
                searchOper = "=="; break;
            case "ne": //notequal
                searchOper = "!="; break;
            //case "bw": //begins with
            //    searchOper = "=="; break;
            //case "bn": //does not begin with
            //    searchOper = "=="; break;
            //case "en": //does not ends with
            //    searchOper = "=="; break;
            case "cn": //contains
                searchOper = "LIKE"; break;
            case "nc": //does not contains
                searchOper = "NOTLIKE"; break;
            //case "nu": //is null
            //    searchOper = "=="; break;
            //case "nn": //is not null
            //searchOper = "=="; break;
            //case "in": //is in 
            //    searchOper = "=="; break;
            //case "ni": //is not in
            //    searchOper = "=="; break;
            case "lt": //less
                searchOper = "<"; break;
            case "le": //less or equal
                searchOper = "<="; break;
            case "gt": //greater
                searchOper = ">"; break;
            case "ge": //greater or equal
                searchOper = ">="; break;
            case "AND": //greater or equal
                searchOper = "&&"; break;
            case "OR": //greater or equal
                searchOper = "||"; break;
            default:
                searchOper = "=="; break;
        }
        return searchOper;
    }

    private static void setDateCols(JqGridFilterRule obj, List<JqGridFilterRule> rules, List<string> dateCols)
    {
        if (dateCols.Contains(obj.field) && obj.op == "eq")
        {
            JqGridFilterRule obj_ge = new JqGridFilterRule();
            obj_ge.field = obj.field;
            obj_ge.op = "ge";
            obj_ge.data = Convert.ToDateTime(obj.data).ToShortDateString();

            JqGridFilterRule obj_lt = new JqGridFilterRule();
            obj_lt.field = obj.field;
            obj_lt.op = "lt";
            obj_lt.data = Convert.ToDateTime(obj.data).AddDays(1).ToShortDateString();

            rules.Add(obj_lt);
            rules.Add(obj_ge);
        }
        else
            rules.Add(obj);
    }
public static Expression<Func<T, bool>> ToExpression<T>(string andOrOperator, string propName, string opr, string value, Expression<Func<T, bool>> expr = null)
    {
        Expression<Func<T, bool>> func = null;
        try
        {
            ParameterExpression paramExpr = Expression.Parameter(typeof(T));
            var arrProp = propName.Split('.').ToList();
            Expression binExpr = null;
            string partName = string.Empty;
            arrProp.ForEach(x =>
            {
                Expression tempExpr = null;
                partName = partName.IsNull() ? x : partName + "." + x;
                if (partName == propName)
                {
                    var member = NestedExprProp(paramExpr, partName);
                    var type = member.Type.Name == "Nullable`1" ? Nullable.GetUnderlyingType(member.Type) : member.Type;
                    tempExpr = ApplyFilter(opr, member, Expression.Convert(ToExprConstant(type, value), member.Type));
                }
                else
                    tempExpr = ApplyFilter("!=", NestedExprProp(paramExpr, partName), Expression.Constant(null));
                if (binExpr != null)
                    binExpr = Expression.AndAlso(binExpr, tempExpr);
                else
                    binExpr = tempExpr;
            });
            Expression<Func<T, bool>> innerExpr = Expression.Lambda<Func<T, bool>>(binExpr, paramExpr);
            if (expr != null)
                innerExpr = (andOrOperator.IsNull() || andOrOperator == "And" || andOrOperator == "AND" || andOrOperator == "&&") ? innerExpr.And(expr) : innerExpr.Or(expr);
            func = innerExpr;
        }
        catch { }
        return func;
    }

    private static MemberExpression NestedExprProp(Expression expr, string propName)
    {
        string[] arrProp = propName.Split('.');
        int arrPropCount = arrProp.Length;
        return (arrPropCount > 1) ? Expression.Property(NestedExprProp(expr, arrProp.Take(arrPropCount - 1).Aggregate((a, i) => a + "." + i)), arrProp[arrPropCount - 1]) : Expression.Property(expr, propName);
    }

    private static Expression ToExprConstant(Type prop, string value)
    {
        if (value.IsNull())
            return Expression.Constant(value);
        object val = null;
        switch (prop.FullName)
        {
            case "System.Guid":
                val = value.ToGuid();
                break;
            default:
                val = Convert.ChangeType(value, Type.GetType(prop.FullName));
                break;
        }
        return Expression.Constant(val);
    }

    private static Expression ApplyFilter(string opr, Expression left, Expression right)
    {
        Expression InnerLambda = null;
        switch (opr)
        {
            case "==":
            case "=":
                InnerLambda = Expression.Equal(left, right);
                break;
            case "<":
                InnerLambda = Expression.LessThan(left, right);
                break;
            case ">":
                InnerLambda = Expression.GreaterThan(left, right);
                break;
            case ">=":
                InnerLambda = Expression.GreaterThanOrEqual(left, right);
                break;
            case "<=":
                InnerLambda = Expression.LessThanOrEqual(left, right);
                break;
            case "!=":
                InnerLambda = Expression.NotEqual(left, right);
                break;
            case "&&":
                InnerLambda = Expression.And(left, right);
                break;
            case "||":
                InnerLambda = Expression.Or(left, right);
                break;
            case "LIKE":
                InnerLambda = Expression.Call(left, typeof(string).GetMethod("Contains", new Type[] { typeof(string) }), right);
                break;
            case "NOTLIKE":
                InnerLambda = Expression.Not(Expression.Call(left, typeof(string).GetMethod("Contains", new Type[] { typeof(string) }), right));
                break;
        }
        return InnerLambda;
    }

    public static Expression<Func<T, object>> PropExpr<T>(string PropName)
    {
        ParameterExpression paramExpr = Expression.Parameter(typeof(T));
        var tempExpr = Extentions.NestedExprProp(paramExpr, PropName);
        return Expression.Lambda<Func<T, object>>(Expression.Convert(Expression.Lambda(tempExpr, paramExpr).Body, typeof(object)), paramExpr);

    }
    public static IQueryOver<T, T> OrderBy<T>(this IQueryOver<T, T> Collection, string sidx, string sord)
    {
        return sord == "asc" ? Collection.OrderBy(NHibernate.Criterion.Projections.Property(sidx)).Asc : Collection.OrderBy(NHibernate.Criterion.Projections.Property(sidx)).Desc;
    }

    public static Expression<Func<T, TResult>> And<T, TResult>(this Expression<Func<T, TResult>> expr1, Expression<Func<T, TResult>> expr2)
    {
        var invokedExpr = Expression.Invoke(expr2, expr1.Parameters.Cast<Expression>());
        return Expression.Lambda<Func<T, TResult>>(Expression.AndAlso(expr1.Body, invokedExpr), expr1.Parameters);
    }

    public static Expression<Func<T, bool>> Or<T>(this Expression<Func<T, bool>> expr1, Expression<Func<T, bool>> expr2)
    {
        var invokedExpr = Expression.Invoke(expr2, expr1.Parameters.Cast<Expression>());
        return Expression.Lambda<Func<T, bool>>(Expression.OrElse(expr1.Body, invokedExpr), expr1.Parameters);
    } 
```

# wpf - 可以在运行时为列表视图定义 GroupStyle 吗？

> ID：15478484
> 
> 赞同：1
> 
> 时间：2013-03-18T13:51:08.547
> 
> 标签：wpf, listview, dynamic, groupstyle

这是场景。我有一个列表视图，根据最终用户提供的标准，它可能有数千条记录。之后使用复选框，用户可以对记录进行分组。因此，我在 xaml 中为 listview 定义了组样式，当用户选中复选框时，我将 PropertyGroupDescription 添加到 ListCollectionView。

问题是数据虚拟化被禁用，因为为 listview 定义的 groupstyle 使得整个记录加载过程非常缓慢。是否可以不提前定义 groupstyle 但在用户选中复选框时定义 groupstyle ？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T20:07:11.173

这是我现在采取的方法，以便在用户不“对记录进行分组”时获得数据虚拟化的好处。如果需要，我将在后面的代码中插入组样式。发布代码，以便对其他人有用。

清除 GroupDescription 的值不会启用数据虚拟化。**但是清除 GroupStyle 集合会启用数据虚拟化。**

请让我知道如何在 XAML 中处理它。

```
private GroupStyle retrieveGroupStyle()
    {
        #region  Control template Code(to show content)

        ControlTemplate template = new ControlTemplate(typeof(GroupItem));

        //Create border object
        FrameworkElementFactory border = new FrameworkElementFactory(typeof(Border));

        border.SetValue(Border.CornerRadiusProperty, new CornerRadius(3));
        border.SetValue(Border.BorderThicknessProperty, new Thickness(2));
        border.SetValue(Border.BorderBrushProperty, new SolidColorBrush(Colors.Silver));
        border.SetValue(Border.PaddingProperty, new Thickness(2));

        //create dockpanel to put inside border.
        FrameworkElementFactory dockPanel = new FrameworkElementFactory(typeof(DockPanel));
        dockPanel.SetValue(DockPanel.LastChildFillProperty, true);

        //stack panel to show group header
        FrameworkElementFactory stackPanel = new FrameworkElementFactory(typeof(StackPanel));
        stackPanel.SetValue(StackPanel.OrientationProperty, Orientation.Vertical);
        stackPanel.SetValue(DockPanel.DockProperty, Dock.Top);

        //Create textBlock to show group header
        FrameworkElementFactory textBlock = new FrameworkElementFactory(typeof(TextBlock));

        textBlock.SetValue(TextBlock.PaddingProperty, new Thickness(2));
        textBlock.SetValue(TextBlock.FontWeightProperty, FontWeights.Bold);
        textBlock.SetValue(TextBlock.TextProperty, new Binding() { Path = new PropertyPath("Name") });
        stackPanel.AppendChild(textBlock);
        template.VisualTree = border;
        //define items presenter
        FrameworkElementFactory itemsPresenter = new FrameworkElementFactory(typeof(ItemsPresenter));
        itemsPresenter.SetValue(ItemsPresenter.MarginProperty, new Thickness(2));

        border.AppendChild(dockPanel);

        dockPanel.AppendChild(stackPanel);
        dockPanel.AppendChild(itemsPresenter);

        template.VisualTree = border;

        #endregion

        #region Set container style for Group

        Style style = new Style(typeof(GroupItem));

        Setter setter = new Setter();
        setter.Property = GroupItem.TemplateProperty;
        setter.Value = template;

        style.Setters.Add(setter);

        GroupStyle groupStyle = new GroupStyle();

        groupStyle.ContainerStyle = style;

        #endregion

        return groupStyle;
    }

    /// <summary>
    /// Adds the group style (once the group styles are defined virtualization is disabled.)
    /// </summary>
    private void addGroupStyle()
    {
        this.listView1.GroupStyle.Add(this.retrieveGroupStyle());
        this.listView2.GroupStyle.Add(this.retrieveGroupStyle());
    }
    /// <summary>
    /// Removes the group style. (once the group style is removed virtualization is enabled.)
    /// </summary>
    private void removeGroupStyle()
    {
        this.listView1.GroupStyle.Clear();
        this.listView2.GroupStyle.Clear();
    }
    private void CheckBox_Checked_1(object sender, RoutedEventArgs e)
    {
        this.addGroupStyle();
    }

    private void CheckBox_Unchecked_1(object sender, RoutedEventArgs e)
    {
        this.removeGroupStyle();
    } 
```

# asp.net - ASP.NET：文本框在回发时丢失了启用值

> ID：15478487
> 
> 赞同：-1
> 
> 时间：2013-03-18T13:51:17.723
> 
> 标签：asp.net, .net-4.0, textbox, asp.net-4.0

我有一个文本框，我以编程方式将其设置为“启用 = 假”。当页面在此更改后获得回发时，此文本框将启用的值返回为 true。为什么？

我将文本框放入更新面板。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T13:54:10.847

如果您在 Page_Load 事件的代码隐藏中设置它，您需要记住 Page_Load 即使在回发时也会发生。你有两个选择。

将它放在一个块中，以检查页面是否为回发。

```
if(!Page.IsPostBack)
{
   TextBox1.Enabled = false;
} 
```

或`Page_Init`改为设置它。

如果您还不熟悉它，请确保您了解页面生命周期。这是 ASP.NET 开发人员必须了解的信息。阅读[http://msdn.microsoft.com/en-us/library/ms178472(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/ms178472(v=vs.100).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T13:53:50.300

在 page_load 中，执行以下操作：

```
If (IsPostBack) Then
    Textbox1.Enabled = False
End If 
```

# ant - 回显消息没有显示属性文件中的正确值

> ID：15478488
> 
> 赞同：0
> 
> 时间：2013-03-18T13:51:21.570
> 
> 标签：ant

我有一个**local.properties**文件，它只包含一个值：

```
student.id=100 
```

我创建了以下**Ant 脚本**来增加`student.id`1**的**值：

```
 <target name="increase-id">
    <!-- student.id is increased by 1, no problem -->
    <propertyfile file="local.properties">
         <entry key="student.id" type="int" operation="+" value="1" />
     </propertyfile>

     <!--The following echo always show me "Student ID: 1, why?"-->
     <echo message="Student ID: ${student.id}"/>
 </target> 
```

每次运行命令后，**local.properties**文件中`ant increase-id`的值都会**增加 1**。**这里没问题**。但是，消息总是告诉我**为什么？**`student.id`******`<echo>``Student ID: 1`******

 ******* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T14:00:28.663

这个对我有用：

```
<project name="increase.test" default="increase-id">

    <target name="increase-id">

        <!-- documentation says that this task is for editing property files -->
        <propertyfile file="local.properties">
            <entry key="student.id" type="int" operation="+" value="1" />
        </propertyfile>

        <!-- so you should load this property after edit -->    
        <property file="local.properties" />
        <echo message="Student ID: ${student.id}"/>

    </target>

</project> 
```

顺便说一句，不要使用相对路径。而不是这个总是使用绝对路径。如果要加载与 build.xml 位于同一目录中的属性文件，可以使用`<dirname/>`task.xml。

```
<dirname property="build.dir" file="${ant.file.<projectName>}"/>, 
```

在哪里：

1.  `${ant.file}`是内置属性，指示当前运行的 build.xml
2.  `<projectName>`只是项目名称

    尝试始终使用此模式创建目录名，`${ant.file.<projectName>`因为如果您只使用`${ant.file}`它将指示主构建。例如，如果您的构建运行其他构建并且在另一个构建中您将使用`${ant.file}`它将指示主构建。如果不清楚，请阅读 Apache ant 文档并尝试创建简单的构建。******

# php - php mpdf内存限制错误

> ID：15478499
> 
> 赞同：13
> 
> 时间：2013-03-18T13:52:06.607
> 
> 标签：php, pdf, pdf-generation, mpdf, memory-limit

我第一次使用 mpdf 库，一切正常。我编写了一个脚本来创建包含 274 行表的 pdf 文件。当我运行脚本时，我得到 php 内存错误。我尝试了不同的场景，但我得到了相同的内存错误。请帮我解决这个错误。我在下面列出了不同的情况及其结果。

php.ini = memory_limit = 256M

脚本 = ini_set('memory_limit', '25M');

```
Result:
memory_get_usage() = 12.75 mb
memory_get_peak_usage() = 12.75 mb
Fatal error: Allowed memory size of 26214400 bytes exhausted
(tried to allocate 261904 bytes)
in C:\xampp\htdocs\XX\lib\pdf\mpdf\mpdf.php on line 14268 
```

php.ini = memory_limit = 256M

脚本 = ini_set('memory_limit', '-1');

```
Result:
memory_get_usage() = 12.75 mb
memory_get_peak_usage() = 12.75 mb
Fatal error: Out of memory (allocated 1898971136)
(tried to allocate 261904 bytes) 
in C:\xampp\htdocs\XX\lib\pdf\mpdf\mpdf.php on line 14265 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-07T08:40:38.247

可以使用多个选项来减少表内存使用量。[官方文档在这里](https://mpdf.github.io/installation-setup/reducing-memory-usage.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-06-15T02:25:13.533

mPDF 在服务器上使用大量内存。如果您收到超出内存限制的错误消息，请尝试以下操作：

在非常长的文档中以小块处理 HTML 代码比在一个大的 HTML 字符串中使用 ini_set("memory_limit","128M") 或在脚本顶部使用类似来分配更多内存生成更小的 mpdf 更有效.php 文件。

ini_set("memory_limit","128M"); $mpdf = 新 \Mpdf\Mpdf();

它工作！

更多细节：[https ://mpdf.github.io/troubleshooting/memory-problems.html](https://mpdf.github.io/troubleshooting/memory-problems.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-08T03:51:34.170

您是否尝试查看`phpinfo()`输出以查看您设置的 memory_limit 值是否正在更改？尝试将该函数放在`index.php`文件的顶部，看看`ini_set('memory_limit', '256M');`它是否生效。

问候！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-09T23:41:56.113

我发现不同步（</table>）标签会导致内存问题（和速度）；清理进入 mPDF 的 HTML 解决了它。

# angularjs - 添加从属指令？

> ID：15478501
> 
> 赞同：1
> 
> 时间：2013-03-18T13:52:08.113
> 
> 标签：angularjs, angularjs-directive

所以我希望能够像这样创作一个元素：

```
<div my-directive></div> 
```

而且，我想`my-directive`添加从属指令。

```
<div my-directive subordinate-directive></div> 
```

目前，我在编译时添加了这些指令，但它们不会重新运行。在从指令模板生成的子元素上，我可以做任何我想做的事情，因为我可能会在指令运行之前添加到子模板中。

示例： [http ://plnkr.co/edit/6y6Ebzqf1gLkTBEUcKfi?p=preview](http://plnkr.co/edit/6y6Ebzqf1gLkTBEUcKfi?p=preview)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T20:36:30.627

问题是在处理**my-directive时，****收集指令**阶段已经过去，修改元素不会触发新的编译。

添加所有其他指令后，您需要再次手动触发编译阶段，请参阅[plunker](http://plnkr.co/edit/ix7wmdlSVrwXlC6x0KWI?p=preview)。

```
app.directive("queue", [ '$compile', function($compile) {
  var directiveDefinitionObject;
    directiveDefinitionObject = {
      scope: {},
      controller: [
        '$scope', function($scope) {
          $scope.entries = [{name: 1}, {name: 2}, {name: 3}];
        }
      ],
      template: $("#entry").html(),
      compile : function(tElement, tAttrs, transclude) {
        var compiler;

        //All children related directives go here since the template hasn't been
        //appended yet in the post link function when we re-compile
        tElement.children().attr('ng-repeat', 'entry in entries');

        compiler = {
          pre : function(scope, iElement, iAttrs, controller) {
          },
          post : function(scope, iElement, iAttrs, controller) {
            if (iElement.attr('can-do-thing-i-define') === undefined) {
              var c = tElement.clone();

              c.attr('can-do-thing-i-define', '');

              $compile(c)(scope);

              iElement.replaceWith(c);
            }
          }
        };
        return compiler;
      }
    };
    return directiveDefinitionObject;
}]); 
```

# google-chrome - 如何调试 Silverlight 在 Firefox/chrome/Safari 中不工作？

> ID：15478516
> 
> 赞同：0
> 
> 时间：2013-03-18T13:52:49.717
> 
> 标签：google-chrome, firefox, safari, silverlight-5.0

我有一个问题，我开发的 Silverlight 系统在 Internet Explorer 中运行良好，但在 Chrome 或 Firefox 中根本无法运行

我不知道从哪里开始尝试找出问题所在？

Chrome 只是说无法加载 Silverlight 插件，从调试的角度来看这显然是无用的

Firefox 只显示容器页面

我用过firebug，有趣的是Firefox没有尝试下载xap文件？

这是一个主要问题，任何指针都会非常有帮助！

该应用程序确实使用了 Prism，这可能与它有关

保罗

# command-line-arguments - 高效的命令行解析

> ID：15478520
> 
> 赞同：0
> 
> 时间：2013-03-18T13:52:54.710
> 
> 标签：command-line-arguments, performance

为了好玩，我编写了一个小型 Java 应用程序，一切运行良好。我的问题是，当我在研究解析命令行参数的方法时，我只是觉得应该有一种更有效的方法。我的程序接受：

-l I（I 是新下界的整数） -u I（I 是新上界的整数） -? （输出可用的命令行选项）-v（激活主类的详细输出）

我通过以下方式实现了我的 parseArgs 方法：

```
private static void parseArgs(String[] arguments) {

String t = "";

for (int c = 0; c < arguments.length; c++) t += arguments[c];

if (t.contains("-")) {
    String[] params = t.split("-");
    for (int c = 0; c < params.length; c++) params[c] = params[c].trim();

    for (int c = 0; c < params.length; c++) {
    if (params[c].startsWith("?") && !docOnly) {
        docOnly = true;
        printHelp();
    }
    if (params[c].startsWith("l") && startPoint == 1) {
        try {
        startPoint = Integer.parseInt(params[c].substring(1));
        if (startPoint < 0) {
            startPoint = 0;
        }
        } catch (NumberFormatException e) {
        error = true;
        System.out.println("\tParameter Error: " + params[c]);
        }
    }
    if (params[c].startsWith("u") && endPoint == 1000) {
        try {
        endPoint = Integer.parseInt(params[c].substring(1));
        if (endPoint < 0) {
            endPoint = 1000;
        }
        } catch (NumberFormatException e) {
        error = true;
        System.out.println("\tParameter Error: " + params[c]);
        }
    }
    if (params[c].startsWith("v") && !verbose) {
        verbose = true;
    }
    }
} else {
    error = true;
    System.out.println("\tError in Parameters. Use -? for available options.");
}
} 
```

正如我所说，我的代码一切正常，如果您想验证，可以[查看它。](https://www.dropbox.com/s/rq08opy4rxt4a2z/collatz.jar)我只是好奇其他程序员，无论是否专业，将如何处理传递可变数量和参数顺序的情况，并拥有一个可以准确解析它们的有效代码路径。我知道我的不是最好的，这就是为什么我想知道。任何语言都可以回答，我只是对程序感到好奇。我可以适应任何必要的语言，以便从中学习更多。

提前致谢。〜大卫柯林斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T13:57:45.390

```
String t = "";
for (int c = 0; c < arguments.length; c++) t += arguments[c]; 
```

改用 a `StringBuilder`。或者更简单，`join()`由许多流行库中的任何一个提供。

* * *

```
if (t.contains("-")) {
    String[] params = t.split("-"); 
```

更好的：

```
String[] params = t.split("-");
if (params.length > 1) { 
```

虽然这适用于您的特定情况（参数是非负整数），但通常会有问题。您应该`-`只在参数的开头查找，以便有人可以请求名为`my-log.txt`.

* * *

```
startPoint = Integer.parseInt(params[c].substring(1));
if (startPoint < 0) {
    startPoint = 0;
} 
```

所有`-`的迹象都被吃掉了`split`，所以`startPoint < 0`永远不会是真的。

* * *

为什么要为非数字数据设置错误标志，默默地忽略超出范围的数字或重复的参数？

# .htaccess - htacess url 重写为 .php?=n

> ID：15478521
> 
> 赞同：0
> 
> 时间：2013-03-18T13:52:59.797
> 
> 标签：.htaccess

我希望将旧的 PHP 页面重写到新的位置，但是以前的系统使用的 URL 结构如下：

```
/old-page.php?page=Our%20Services 
```

我尝试了以下方法：

```
Redirect 301 /old-page.php?page=Our%20Services http://www.newdomain.co.uk/our-services/ 
```

有人可以帮我解释一下为什么重写规则会忽略问号后的所有内容吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T17:02:53.543

您只能[`Redirect`](http://httpd.apache.org/docs/current/mod/mod_alias.html#redirect)用于简单的情况。如果要检查查询字符串，必须使用[mod_rewrite](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)和[`RewriteCond`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewritecond)

```
RewriteEngine on
RewriteCond %{QUERY_STRING} page=Our%20Services
RewriteRule ^old-page.php$ http://www.newdomain.co.uk/our-services/ [R,L] 
```

这将检查查询字符串是否包含`page=Our%20Services`并且 URL 路径是`old-page.php`. 然后它将客户端重定向到新的 URL `http://www.newdomain.co.uk/our-services/`。

# java - SDK用于指纹扫描作为图像和计数脊

> ID：15478530
> 
> 赞同：2
> 
> 时间：2013-03-18T13:53:25.990
> 
> 标签：java, image, sdk, fingerprint, scanning

我尝试查看一些已经发布的帖子，但它对我没有帮助

我想做的事

使用 SDK（最好在 java 中）在我自己的应用程序中使用

1.  扫描指纹并将其保存为图像格式（bmp、jpg 或其他）
2.  如果可能的话，计算指纹的脊线（但这是次要的）

我正在寻找不同的供应商/ SDK，例如

*   数字角色
*   富创力
*   Griaulebiometrics -> Griaule AFIS 指纹
*   开放式CV
*   来源AFIS

是否有使用其中任何一种或少数几种的经验，我应该能够将哪一种用于我的目的

我知道 SDK 可能是特定于供应商的，并且仅用于他们的硬件，或者有没有其他方法可以扫描指纹并存储为图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T00:24:37.967

您需要先明确您的要求，然后有人可以为您推荐最佳的 SDK。我对 opencv 模块不是很了解，但是 SourceAFIS 的好处是在任何项目规模下都是免费的。AFAIK 所有其他的基本上都是由生物识别供应商在试用的基础上提供的，他们最终会希望您为每个最终用户购买许可证。

话虽如此，任何生物识别扫描仪供应商都应该（免费）为您提供设备驱动程序，以从他们的扫描仪获取图像。通常，您必须修改一些示例 C 代码才能完成您所说的操作，并且如果没有 JNI，可能无法直接扫描到 Java。根据我的经验，使用供应商 SDK 将图像转储到 BMP 中非常容易，因此即使您的 C 技能很少，也不应气馁。在您提到的扫描仪公司中，我知道 Futronics 示例应用程序很容易适应您正在寻找的图像采集类型，而且他们的基本扫描仪既便宜又强大。

# javascript - Links are disabled in iframe

> ID：15478536
> 
> 赞同：0
> 
> 时间：2013-03-18T13:53:33.503
> 
> 标签：javascript, jquery, html, css

I have an iframe that displays a full page from any website. The trouble is now that it makes all the links inside frame disabled(unlickable). I have few chunks of Javascript and CSS in it. I am not sure what is really causing the issue.

*link removed

Can someone help me out please.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T13:54:53.173

The problem is the width on your .pageContainer (Its actually sitting on top of the iFrame)

```
.pageContainer {  
    position: fixed;  
    width: 100%;  <-- your problem here [line 88]
    height: 100%;  
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T13:56:21.763

You are overlaying a DIV on the iFrame itself. Don't put that DIV in a fixed position.

# dynamic - Doxygen - 使用带参数的别名命令生成动态组

> ID：15478537
> 
> 赞同：0
> 
> 时间：2013-03-18T13:53:34.023
> 
> 标签：dynamic, grouping, doxygen

我希望通过某种 Alias 命令自动创建组层次结构。例如，我想要群组

*   扩展方法
    *   字符串扩展
    *   流扩展
    *   ...

使用 doxygen 注释创建，例如

```
/** Documentation for the method
 *  \extension{string} 
 */
public void ExtensionMethod(this string str){
   ... 
} 
```

哪里`\extension{string}`会映射到类似的东西

```
\addtogroup stringExtensions string Extensions
\ingroup ExtnMethods 
```

不幸的是，这意味着为该方法编写的所有文档都与该组相关联。

我最接近的是，如果你有类似的东西

```
/** \addtogroup stringExtensions string Extensions
 *  \ingroup ExtnMethods
 *  \@{
 *  \@}
 */

/** \ingroup stringExtensions
 *  Documentation for the method
 */ 
public void ExtensionMethod(this string str){
   ... 
} 
```

它会起作用，但这需要2个单独的注释块，我找不到使用别名的任何方法。

我知道使用输入过滤器可能可以实现某些目标 - 但我希望可以实现更简单的目标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T09:52:44.063

我使用 inputfilters 找到了一个比我最初设想的更简洁的答案 - 解析整个文件寻找`\extension{...}`，用适当的`\ingroup`命令替换它，然后`\addgroup`在文件底部附加所需的命令。

然后可以将其作为输入过滤器运行

以下是执行此操作的 python 脚本。请注意，它不会检查它所替换的内容实际上是否在 doxygen 注释中，但对于我的目的来说已经足够了。

```
#!python

import sys, re

if(len(sys.argv) != 2):
    print "Need exactly one argument, the file to filter"
    exit(1)

extnFinder = re.compile("\\\\extension{(\w+)}")
extnTypes = set();

filename = sys.argv[1]

fileIn = open(filename, "r")

line = fileIn.readline()

def extnSub(matchobj):
    extnTypes.add(matchobj.group(1))
    return "\ingroup %(extn)sExtensions" % {'extn':matchobj.group(1)}

while line:    
    matches = extnFinder.findall(line)
    sys.stdout.write(re.sub(extnFinder,extnSub,line))
    line = fileIn.readline()

for extn in extnTypes:
    print "\n\n/**\\addtogroup %(extn)sExtensions %(extn)s Extensions\n\\ingroup ExtnMethods\n */\n" % {'extn':extn} 
```

# c# - 如何使用自定义调用语法“using”或“try”或“catch”或“set”定义方法？

> ID：15478538
> 
> 赞同：0
> 
> 时间：2013-03-18T13:53:42.373
> 
> 标签：c#, methods, syntax

你怎么看？我正在尝试创建一种`log`方法。我想知道如何使用以下调用语法来定义它：

```
logging(var loggerContext = new LogManager(input)){ // create a new logger context and store input 

   //var results = Method();

} // store results in logger context 
```

如何实现日志记录？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T14:13:49.890

我经常使用的另一种模式是这样的：

```
void WithLogging(Action action)
{
    // set up logging here
    action();
    // save results here
} 
```

然后你可以像这样使用它：

```
WithLogging(() =>
{
    //do some things here
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T14:09:30.133

正如其他发帖者所指出的，定义新关键字不是您可以在 C# 中做的事情。您可能会发现[Boo](http://boo.codehaus.org/)很有趣，尤其是宏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T14:03:14.623

有时在构造函数和方法`IDisposable`中使用自定义逻辑来实现这种情况是有意义的：`Dispose`

```
class Logmanager : IDisposable
{
    public Logmanager()
    {
        this.Log("Start");
    }

    private void Log(string message)
    {
        // some logging implementation
    }

    public void Dispose()
    {
        this.Log("Finish");
    }
} 
```

然后你可以把它放在`using`语句中：

```
using (var logger = new Logmanager())
{
    // you can add something to logger here, e.g. store results
} 
```

# javascript - 使用 MDN 绑定 polyfill 是否存在风险？

> ID：15478539
> 
> 赞同：7
> 
> 时间：2013-03-18T13:53:44.003
> 
> 标签：javascript, polyfills

我开发了一个需要该`bind`方法的 Javascript 库。不幸的是，`bind`IE8 不支持。

[MDN 网站上](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)有一个 polyfill ，效果很好。

我的问题是：这个 polyfill 和其他 Javascript 库之间是否存在问题或可能不兼容？

在任何情况下都可以安全使用吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-12-18T12:19:14.497

[https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/bind#Compatibility](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/bind#Compatibility)

对我来说，与本地人最明显的区别`bind`是：

*   `arguments.caller`不指向绑定函数的调用者，但无论如何你都不应该使用它
*   `length`绑定函数的设置为 0，这可能会影响函数的数量检查，例如[https://github.com/fitzgen/wu.js/blob/master/lib/wu.js#L406](https://github.com/fitzgen/wu.js/blob/master/lib/wu.js#L406)

恕我直言，如果你只使用 JavaScript 的“好的部分”，而不是开发某些框架的核心（对于 IE8？），你不应该面对这个 polyfill 的任何问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-18T13:14:23.603

答案几乎就在 MDN 页面本身：

“如果你选择使用这个部分实现，你不能依赖那些行为偏离 ECMA-262 第 5 版的情况！但是，如果要小心（并且可能需要额外修改以适应特定需求），这个部分实现可能是根据规范广泛实施 bind() 时的合理桥梁。”

这样的 MDN 垫片没有任何问题。但是，如果您选择使用他们的 shim，请确保它不会被其他库覆盖。不久前我遇到了一个问题，Strophe 就是这样做并用另一个垫片替换一个垫片。

我倾向于使用下划线来覆盖此类内容，但还有其他选项，例如 es5shim。使用下划线，您有一个名为（您猜对了）“. *bind”的方法，其工作方式与 MDN 的 shim 略有不同（使用“新”调用）。Underscore也有一个很棒的方法，叫做 '* .partial'，它在你不想改变 'this' 的值但部分应用参数的情况下很有用。

我在这里要说明的一点是，与其进行匀场，不如查看在库中得到适当保护/封装的东西。如果您的目标是像 IE8 这样的浏览器，那么在任何情况下您都可能需要不止一个 shim。

最后，不是那么重要，请查看以下位置的性能测试：http: [//jsperf.com/browser-vs-es5-shim-vs-mdn-shim](http://jsperf.com/browser-vs-es5-shim-vs-mdn-shim)

# c++ - C++ - How to traverse a list from end to begin?

> ID：15478542
> 
> 赞同：3
> 
> 时间：2013-03-18T13:53:53.143
> 
> 标签：c++, list, for-loop, stl

I would like to display my list from the end to the beginning. Like:

```
for (std::list<T>::const_iterator it = list.end(); it != list.begin(); --it) 
```

The problem is that it doesn't enter in when it is in the first element (`list.begin()`). How can I do this?

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-18T13:55:20.057

Use rbegin and rend to get reverse iterators.

```
for (std::list<...>::reverse_iterator it=list.rbegin(); it!=list.rend(); ++it) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-18T13:56:06.623

Use reverse iterators:

```
for (std::list<...>::const_reverse_iterator it = l.rbegin(); it != l.rend(); ++it) 
```

C++11

```
for (auto it = l.crbegin(); it != l.crend(); ++it) 
```

and please don't name your `std::list<T>` instance `list`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T13:56:24.233

You want a [reverse iterator](http://www.cplusplus.com/reference/vector/vector/rbegin/). See `rbegin` and `rend`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-17T20:52:21.380

**Addition:** Because in `it = list.end();` it gets => pointer [some block of memory] which is understood as "end" (or point where to stop, right or left boundary). So output its content (cout<<*it) you will see memory[block] address. If you declare and use as this:

```
std::list<...>::const_iterator it = list.begin();
  std::list<...>::const_iterator iTail = list.end();
  while(it!=iTail)
  {
      //do smthing
      ++it;
  } 
```

either loop will be skipped or you will get some garbage from heap. Its case of const_iterator (didn't read documentation but obviously for "write" protection). In case of iterator `std::list<...>::iterator` only `.end()` points to the ~~last[element]~~ => [end]. In cases:

> std::list<...>::const_reverse_iterator and std::list<...>::reverse_iterator

iterator shifted automatically to the first elem, depending on `start => end` or `end =>start` you are going to run through list.

# android - 在移动 chrome 浏览器中禁用滑动手势

> ID：15478549
> 
> 赞同：8
> 
> 时间：2013-03-18T13:54:09.183
> 
> 标签：android, ios, google-chrome, mobile

Mobile chrome (IOS/Android) 有一个功能，如果您在屏幕的左侧或右侧边缘滑动，它会更改选项卡。

我的网络应用程序使用滑动，而这个“功能”似乎妨碍了。有没有办法禁用它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T17:19:20.107

不，无法禁用此手势。

如果您想为它加注/加入，请在[https://code.google.com/p/chromium/issues/detail?id=117657](https://code.google.com/p/chromium/issues/detail?id=117657)上有一张请求该功能的票。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-26T23:15:58.037

如果您使用两个/多个手指，则即使从边缘/边框也可以滑动。

# jquery - 是否可以在 jquery 中制作实时进度/百分比条

> ID：15478551
> 
> 赞同：1
> 
> 时间：2013-03-18T13:54:10.490
> 
> 标签：jquery, jquery-ui

下面的代码是简单的 jquery 进度条。有没有办法在 ajaxStart 上动态更新进度值（现在是 67 仪式）并在 ajaxStop() 上将此值达到 100？

```
<head><script src="http://code.jquery.com/jquery-1.9.1.js"></script>
    <script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>
    <link rel="stylesheet" href="/resources/demos/style.css" />

    <script>
        $(function() {
            $( "#progressbar" ).progressbar({
                **value: 67**
            });
        });
    </script>
</head>

 <body>
    <div id="progressbar"></div>
</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T14:00:29.220

如果您仅针对 HTML5 浏览器，请尝试此处描述的内容：[HTML5 中的 Jquery Ajax Progress](http://www.dave-bond.com/blog/2010/01/JQuery-ajax-progress-HMTL5/)

解决这个问题的传统方法是显示一个旋转的 gif，而不是加载程序。

在大多数情况下，Ajax 请求不会太长，因此尝试相同的所有努力都会丢失。

然而，显示进度条的情况并不少见。问题是，较旧的浏览器没有与 JS 共享此信息，开发人员只能使用诸如，

*   使用闪光灯的帮助。Flash 插件可以跟踪上传的数据量，从而告诉 javascript。

*   在某些情况下，一种近似时间的方法也适用。

*   剩下的唯一选择是持续 ping 服务器以了解发生了多少传输。

# java - 使用launch4j分发jar文件

> ID：15478555
> 
> 赞同：0
> 
> 时间：2013-03-18T13:54:16.880
> 
> 标签：java, deployment, runtime-error, launch4j, classnotfound

我创建了一个 jar 文件并使用 launch4j 将其链接到 .exe 文件，它在我创建软件的计算机上工作，但是当我尝试分发软件时，.exe 文件或 .jar 文件或 .jnlp 文件，没有一个工作。当我双击.exe文件时，我会得到错误

```
package.mainclass not found. Program will exit 
```

如何找到错误，如果它在我的计算机中工作并且在我分发它时不工作？

# ruby-on-rails - 匹配字符串然后使用正则表达式返回结果

> ID：15478556
> 
> 赞同：0
> 
> 时间：2013-03-18T13:54:16.673
> 
> 标签：ruby-on-rails, ruby, regex

有没有办法匹配以下字符串，所以我得到`user name`50？

```
hey "user name":/users/50 
```

我也可能在一个字符串中有多个 this 的实例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T13:56:53.067

你能试试下面的

```
string = 'hey "user name":/users/50'
matches = string.scan /"(?<name>[A-Za-z ]+)":\/users\/(?<user_id>\d+)/ 
```

`matches`将是一个包含具有 2 个元素的数组的数组，其中第一个元素是名称，第二个元素是 user_id

```
>> matches # [['user name', 50]] 
```

# objective-c - 核心数据错误：SQLite 错误代码：1，“无法回滚 - 没有事务处于活动状态”

> ID：15478565
> 
> 赞同：0
> 
> 时间：2013-03-18T13:54:41.847
> 
> 标签：objective-c, sqlite, core-data

我在控制台中收到此错误，之后只有错误。错误以随机顺序出现。一些数据库更改并保存工作，直到出现错误。

我试图清理项目，从手机中删除应用程序并重新启动手机。在模拟器中它工作正常！我用3GS试了，效果很好，我刚用4/4S试了，同样的问题出现了！

日志：

```
CoreData: sql: BEGIN EXCLUSIVE
CoreData: annotation: getting max pk for entityID = 2
CoreData: annotation: updating max pk for entityID = 2 with old = 19 and new = 20
CoreData: sql: ROLLBACK
CoreData: annotation: total fetch execution time: 0.2242s for 1 rows.
CoreData: sql: SELECT 0, t0.Z_PK, t0.Z_OPT, t0.ZJIDSTR, t0.ZLASTUPDATED, t0.ZPHOTOHASH, t0.ZWAITINGFORFETCH, t0.ZVCARDAVATARREL, t0.ZVCARDTEMPREL FROM ZXMPPVCARDCOREDATASTORAGEOBJECT t0 WHERE  t0.ZJIDSTR = ?  LIMIT 1
CoreData: details: SQLite bind[0] = "XXXXXXXXXXXXXXXXX"
CoreData: annotation: sql connection fetch time: 0.0128s
CoreData: details: SQLite bind[11] = "oIBWsotpJjWH8MAgnj9H56UtxXk="
CoreData: sql: COMMIT
CoreData: annotation: Disconnecting from sqlite database due to an error.
CoreData: error: (1) I/O error for database at /var/mobile/Applications/EB102CE9-77A8-4360-8D4E-3EEB55D21E8F/Library/ClientDB/StoreContent/persistentStore.  SQLite error code:1, 'cannot rollback - no transaction is active'

CoreData: annotation: Connecting to sqlite database file at "/var/mobile/Applications/EB102CE9-77A8-4360-8D4E-3EEB55D21E8F/Library/ClientDB/StoreContent/persistentStore"
CoreData: error: (14) unable to open database file 
```

我唯一要做的就是：添加新实体，编辑属性。节省。我正在使用 UIManagedDocument。

从现在开始，我只会得到同样的错误，即无法打开数据库。我的代码中没有 fopen 。所以它不可能是文件描述符错过使用。

# php - yii 数组分页

> ID：15478568
> 
> 赞同：-1
> 
> 时间：2013-03-18T13:54:55.580
> 
> 标签：php, yii, pagination

我正在尝试进行 yii 分页并遵循此[示例](http://www.yiiframework.com/forum/index.php/topic/25901-pagination-solution-simple-and-complex-ways/)。它似乎对我不起作用。我想对一个字符串值数组进行分页。以下是我所拥有的：

**控制器**

```
$location = $this->location($_SERVER['SERVER_NAME']);
$files = $this->getFiles("/data/scan/invoice");
$page = (isset($_GET['page']) ? $_GET['page'] : 1);
$item_count = count($files);        
$pages = new CPagination($item_count);
$pages->setPageSize(Yii::app()->params['listPerPage']);
$criteria = new CDbCriteria();

$pages->applyLimit($criteria);  // the trick is here!       

$this->render('index',array(
            "location"=>$location,
            "files"=>$files,
            'item_count'=>$item_count,              
            'page_size'=>Yii::app()->params['listPerPage'],
            'pages'=>$pages
)); 
```

**看法**

```
<div id="main">
    <table>
        <?php foreach($files as $q): ?>

        <form>
            <tr>
                <td rowspan=2>
                    <div>
                        <object data="<?php echo '/data/scan/invoice/'.$q; ?>" type="application/pdf">
                            <p>
                                It appears you don't have a PDF plugin for this browser. No
                                biggie... you can <a href="#">click
                                    here to download the PDF file.</a>
                            </p>
                        </object>
                    </div>
                </td>
                <td><input id="lognumber" type="text" /> <input type="button" value="Search" onclick="search()"/> 
                <div style="height:40px;width:100%;">
                </div>
                    <br> <input type="button" value="Save" /> 
                    <br> <input type="button"value="Delete" /> <br>
                    <div id="lookup"></div>
                </td>
            </tr>
            <tr>
                <td height="300px"><?php //echo $this->paginationControl($this->paginator,'Jumping','partial/my_pagination_control.phtml'); ?>
                </td>
            </tr>
        </form>
        <?php endforeach; ?>
    </table>
</div>

<?

$this->widget('CLinkPager', array(
        'currentPage'=>$pages->getCurrentPage(),
        'itemCount'=>$item_count,
        'pageSize'=>$page_size,
        'maxButtonCount'=>5,
        //'nextPageLabel'=>'My text >',
        'header'=>'',
        'htmlOptions'=>array('class'=>'pages'),
)); 
```

字符串值数组是文件路径，将用于在对象查看器中显示 pdf 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T14:41:00.037

问题是您将限制应用于空 CDbCriteria：

```
$criteria = new CDbCriteria();
$pages->applyLimit($criteria);  // the trick is here! 
```

然后你永远不会使用`$criteria`. 在您的示例中，他们应用限制`$criteria`，然后使用它来获取数据，因此当 yii 获取数据时，它知道它将被分页：

```
$this->render('index',array(
                        'model'=> ModelNameX::model()->findAll($criteria), 
        )); 
```

要执行您想要的操作，您需要使用`CArrayDataProvider`需要分页的数据。

```
$dataProvider=new CArrayDataProvider($files);
$dataProvider->setPagination($pages); 
```

在您看来，您需要致电

```
$dataProvider->getData() //will return a list of arrays. 
```

# c# - 带有 xaml 或 rtf 的字符串到 c# wpf richtextbox

> ID：15478570
> 
> 赞同：-2
> 
> 时间：2013-03-18T13:55:02.127
> 
> 标签：c#, wpf, string, xaml, rtf

我得到了一个带有 xaml 或 rtf 的字符串，想知道如何在 ac# wpf richtextbox 中获取它。

这两个字符串看起来像这样，并想使用其中一个。

```
 string xaml = "<FlowDocument xml:space="preserve" xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"><Paragraph>HOOFDDORP - Het zou helemaal niet noodzakelijk zijn voor <Run FontStyle="italic">SimCity </Run>om altijd met het internet verbonden te zijn, omdat er geen simulatie op de servers plaatsvindt. </Paragraph></FlowDocument>"

   string rtf = "{\rtf1\ansi\ansicpg1252\uc1\htmautsp\deff2{\fonttbl{\f0\fcharset0 Times New Roman;}{\f2\fcharset0 Segoe UI;}}{\colortbl\red0\green0\blue0;\red255\green255\blue255;}\loch\hich\dbch\pard\plain\ltrpar\itap0{\lang1033\fs18\f2\cf0 \cf0\ql{\f2 {\ltrch HOOFDDORP - Het zou helemaal niet noodzakelijk zijn voor }{\i\ltrch SimCity }{\ltrch om altijd met het internet verbonden te zijn, omdat er geen simulatie op de servers plaatsvindt. }\li0\ri0\sa0\sb0\fi0\ql\par}}}" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T14:07:13.363

```
public void populateRTF(string yourRTFString)
{
    MemoryStream memStream = new MemoryStream(ASCIIEncoding.Default.GetBytes(yourRTFString));
    yourRichTextBox.Selection.Load(memStream, DataFormats.Rtf);
} 
```

调用使用`populateRTF(rtf)`

此外，您需要转义您的 RTF 字符串：

```
string rtf = @"{\rtf1\ansi\ansicpg1252\uc1\htmautsp\deff2{\fonttbl{\f0\fcharset0 Times New Roman;}{\f2\fcharset0 Segoe UI;}}{\colortbl\red0\green0\blue0;\red255\green255\blue255;}\loch\hich\dbch\pard\plain\ltrpar\itap0{\lang1033\fs18\f2\cf0 \cf0\ql{\f2 {\ltrch HOOFDDORP - Het zou helemaal niet noodzakelijk zijn voor }{\i\ltrch SimCity }{\ltrch om altijd met het internet verbonden te zijn, omdat er geen simulatie op de servers plaatsvindt. }\li0\ri0\sa0\sb0\fi0\ql\par}}}" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T14:56:31.213

您可以使用：

```
 string content = "";
  textBox.Document.SetText(TextSetOptions.FormatRtf, content); 
```

# facebook - 获取 Facebook 用户的上次登录时间

> ID：15478573
> 
> 赞同：4
> 
> 时间：2013-03-18T13:55:13.747
> 
> 标签：facebook, facebook-graph-api

在我的 Facebook 应用中，我想知道用户的登录历史。有什么方法可以获取有关用户上次登录 Facebook 的时间（在 Facebook，而不是在我的应用程序上）的信息？

我研究了 Facebook Graph API 并尝试使用`$Facebook->api('/me');`, 并引用`user`Graph API 的对象来获取用户信息，但我无法找到与用户登录历史相关的信息。

Facebook 不提供用户的登录历史详细信息吗？还是我需要采用不同的方法？任何帮助，将不胜感激。

# perl - Perl fork() 共享内存

> ID：15478576
> 
> 赞同：1
> 
> 时间：2013-03-18T13:55:15.303
> 
> 标签：perl, fork

有没有办法在分叉之前将只读变量加载到内存中并将它们保留在那里而不用完 virt 内存 x 子节点数？

只读内存默认共享并在写入时复制似乎是一种普遍观点。我进行了测试，发现这是不正确的：

```
#!/usr/bin/perl

my $data;
$$data = 'a'x 1_000_000; #keep it in a ref just in case that matters

foreach (0..10){
    last unless my $pid = fork();
}   
<STDIN>; 
```

当该过程位于 STDIN 上时，我检查顶部：

```
 PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND   

15982 wdev      20   0  121m 2540  188 S  0.0  0.1   0:00.00 foo.t                             
15983 wdev      20   0  121m 2540  188 S  0.0  0.1   0:00.00 foo.t                             
15984 wdev      20   0  121m 2540  188 S  0.0  0.1   0:00.00 foo.t                             
15985 wdev      20   0  121m 2540  188 S  0.0  0.1   0:00.00 foo.t                             
15986 wdev      20   0  121m 2540  188 S  0.0  0.1   0:00.00 foo.t                             
15987 wdev      20   0  121m 2540  188 S  0.0  0.1   0:00.00 foo.t                             
15988 wdev      20   0  121m 2540  188 S  0.0  0.1   0:00.00 foo.t                             
15989 wdev      20   0  121m 2540  188 S  0.0  0.1   0:00.00 foo.t                             
15990 wdev      20   0  121m 2540  188 S  0.0  0.1   0:00.00 foo.t                             
15991 wdev      20   0  121m 2540  188 S  0.0  0.1   0:00.00 foo.t                             
15992 wdev      20   0  121m 2540  188 S  0.0  0.1   0:00.00 foo.t 
```

果然，实际上所有的内存都在单独的子进程中。

是否有我遗漏的东西，或者分叉一个 perl 进程是否真的为每个孩子复制了整个数据结构集？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T15:29:39.563

这要么取决于操作系统，要么你没有看到你认为你看到的东西。我将您的测试脚本修改为：

```
#!/usr/bin/env perl    

print `free`;

my $data = [ ('a') x 1000000 ];

for (1 .. 10) {
  print `free`;
  last unless fork;
} 

sleep 10; 
```

运行它`./forktest | grep Mem`，我得到如下输出：

```
Mem:       3979908    2866552    1113356          0     667388    1258560
Mem:       3979908    2917888    1062020          0     667388    1258560
Mem:       3979908    2918284    1061624          0     667388    1258560
Mem:       3979908    2918532    1061376          0     667388    1258560
Mem:       3979908    2918936    1060972          0     667388    1258560
Mem:       3979908    2919404    1060504          0     667388    1258560
Mem:       3979908    2919900    1060008          0     667388    1258560
Mem:       3979908    2919900    1060008          0     667388    1258560
Mem:       3979908    2920148    1059760          0     667388    1258560
Mem:       3979908    2920148    1059760          0     667388    1258560
Mem:       3979908    2920496    1059412          0     667388    1258560 
```

其中第二列数字（总体第三列）是系统 RAM 的总使用量。请注意，在程序开始时分配时，它从 2866552 增加到 2917888 `$data`，然后随着分叉完成从那里保持相当稳定。

我怀疑您所看到的`top`是它使用特定于 IPC 的“共享内存”（即，已明确请求并分配为“共享”的内存块）和当前可用于多个进程的页面在写时复制的基础上不符合该定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T14:31:30.287

[fork 上](http://perldoc.perl.org/functions/fork.html)的perl 文档说“文件描述符（有时是这些描述符上的锁）是共享的，而其他所有内容都是复制的。”

# android - dropbox sdk- 在 android 客户端中懒惰地获取所有文件元数据

> ID：15478577
> 
> 赞同：1
> 
> 时间：2013-03-18T13:55:19.107
> 
> 标签：android, lazy-loading, lazy-evaluation, dropbox-api

我正在我的 android 应用程序中集成 Dropbox。要求是获取所有文件元数据。我已经下载了 dropbox sdk，并且我也能够验证用户的凭据。

我无法使用它获取所有文件。这仅提供根文件夹内容的元数据

```
 mDBApi.metadata("/", 0, null, true, null); 
```

我需要链接 api 调用以获取所有文件和文件夹的元数据。现在我想懒惰地做，比如获取 100 个文件，将元数据转储到本地缓存中并获取下 100 个文件的元数据（无论文件位置如何，即无论文件在哪里，在根目录或 10 个文件夹下）

我正在使用“AccessType.DROPBOX”访问来获取所有内容。我知道有一个参数用于指定一次获取多少个文件（上述语句中的“0”），但我想继续获取元数据，直到我的客户端收到所有数据。有没有办法解决这个问题或示例代码。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T17:11:43.640

Dropbox API 元数据调用仅用于检索单个文件或文件夹的元数据。最佳实践页面表明您不应递归调用此端点：

[https://www.dropbox.com/developers/reference/bestpractice](https://www.dropbox.com/developers/reference/bestpractice)

相反，您可能有兴趣使用 delta 调用来构建和维护您的本地状态：

[https://www.dropbox.com/developers/core/api#delta](https://www.dropbox.com/developers/core/api#delta)

# javascript - 如何在 Jquery-mobile 中创建切换按钮？

> ID：15478581
> 
> 赞同：0
> 
> 时间：2013-03-18T13:55:33.207
> 
> 标签：javascript, jquery, jquery-mobile

如果单击，我希望我的按钮改变颜色，但它似乎在这个 JQuery-Mobile 中不起作用。如果它被点击它似乎增加了时间计数速度我不知道为什么。任何帮助请大家。

```
var seconds = 0;
var minutes = 0;
var timer = null;

function toggle(ths) {
    var clicked = $(ths).val();

    $(ths).toggleClass("btnColor");
    $("#tb").toggleClass("btnColorR");

    $("#lblType").html(clicked);
    $("#setCount").html(" minutes : " + minutes + " seconds : " + seconds);

    //duration time 
    seconds = seconds + 1;
    if (seconds % 60 == 0) {
        minutes += 1;
        seconds = 0;
    }
    timer = timer = setTimeout("toggle()", 1000);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T14:18:30.830

尝试 ：

```
 timer=setTimeout(function(){
      toogle();
 },1000); 
```

# telerik - Telerik Rad Controls - 辅助功能 API

> ID：15478582
> 
> 赞同：0
> 
> 时间：2013-03-18T13:55:36.743
> 
> 标签：telerik

有谁知道 Telerik 是否为其 RAD 控件提供任何可访问性 API？我正在自动化一个具有大量 RAD 控件的应用程序，并且似乎没有任何工具或 MSAA 正在处理它。非常感谢任何帮助/信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T11:31:59.427

在互联网上进行了大量挖掘之后，Telerik 似乎从 2012.3.1017 版本开始提供对其控件的可访问性。[这篇文章](http://www.telerik.com/products/winforms/getting-started/accessibility-support.aspx)很有帮助。还检查了最新的控件和 UIAVerify，现在可以访问控件的模式。

# html - 鼠标按下时CSS光标更改不起作用

> ID：15478589
> 
> 赞同：8
> 
> 时间：2013-03-18T13:56:01.463
> 
> 标签：html, css, google-chrome

我将鼠标放在更改光标的 html 元素上。现在，如果用户在仍然按下鼠标按钮的同时按下一个键，我将另一个光标分配给该元素。这在 Mozilla 上运行得非常好，它会立即更改光标，但不能在 chrome 中。在 chrome 中，我需要将光标移动至少一个像素才能使新光标可见。请注意，这仅在按下鼠标按钮时发生。如果没有，光标会根据需要立即切换。知道如何正确解决这个问题吗？

更新：我刚刚发现这似乎是 WebKit 中的一个错误： [https ://bugs.webkit.org/show_bug.cgi?id=53341](https://bugs.webkit.org/show_bug.cgi?id=53341)

但无论如何，任何想法让它仍然工作，因为还没有解决办法吗？

这是错误行为的示例：带有此代码的[JSFiddle 示例：](http://jsfiddle.net/wDRn9/)

html:

```
<div id="test1" style="background:blue;width:200px;height:200px;color:white">Case #1 -   cursor not changing for mousedown before moving it (Press mouse - nothing happens. Then hold mouse and move)</div>

<div id="test2" style="background:red;width:200px;height:200px;color:white">Case #2 - cursor not changing for mousedown before moving it when pressing a key (Press mouse, then click any key - Nothing happens. Then hold mouse and move)</div> 
```

js：

```
var el1 = document.getElementById("test1");
var el2 = document.getElementById("test2");

el1.addEventListener("mousedown", function() {
    el1.style.cursor = "move";
});

document.addEventListener("keydown", function() {
    el2.style.cursor = "move";
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-12-30T12:50:20.933

这在 chrome 中为我工作，无需移动鼠标：

```
var el1 = document.getElementById("test1");
var el2 = document.getElementById("test2");

el1.addEventListener("mousedown", function() {
    el1.className += ' cursormove';  
});
document.addEventListener("keydown", function() {
    el1.style.cursor = "pointer";
});

.cursormove {cursor:move;} 
```

[http://jsfiddle.net/ntdap5hf/4/](http://jsfiddle.net/ntdap5hf/4/)

还是我错过了什么？

# javascript - Jstree：使用自定义 div 创建节点

> ID：15478596
> 
> 赞同：4
> 
> 时间：2013-03-18T13:56:09.277
> 
> 标签：javascript, jquery, tree, jstree

我使用插件 Jstree 来动态管理我的菜单。

我用一些 div 自定义了我的树来显示图标和链接：

```
<li rel="menu">
  <a class="js_menu_titre">
          <p class="jsmenu_titre_taille">Menu_Principal</p>
          <div class="jsmenu_lien">Link</div>
          <p class="jsmenu_icone">Actif : icon</p>
          <p class="jsmenu_action">Actions : icon_action</p>
  </a> 
```

我的问题是当我想使用函数创建节点时，我没有我的 div 了。我的海关 div 在链接内 ()

你可以在这里看到结果和问题：http: [//i71.servimg.com/u/f71/11/07/15/68/arbo10.jpg](http://i71.servimg.com/u/f71/11/07/15/68/arbo10.jpg)

我使用这个功能：

```
$("#jsmenu").bind("create.jstree", function (e, data) {
$.post(
    "/static/v.1.0pre/_demo/server.php", 
    { 
        "operation" : "create_node", 
        "id" : data.rslt.parent.attr("id").replace("node_",""), 
        "position" : data.rslt.position,
        "title" : data.rslt.name,
        "type" : data.rslt.obj.attr("rel")
    }, 
    function (r) {
        if(r.status) {
            $(data.rslt.obj).attr("id", "node_" + r.id);
        }
        else {
            $.jstree.rollback(data.rlbk);
        }
    }
); 
```

})

对于我的添加按钮

```
function Ajouter() {
    $('#jsmenu').jstree("create", null, "last",{ "attr" : { "rel" : "folder" } });
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-01-14T13:51:37.700

尝试这样的事情：

```
$("#jsmenu").on("create_node.jstree", function (e, data) {
    $("li#"+data.node.id).find("a").append(html);
}); 
```

`html`是一个包含您的图标代码的 var。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-09T12:29:32.373

您可以通过 id 直接访问锚点：

`$("#jsmenu").on("create_node.jstree", function (e, data) { $("#"+data.node.id+"_anchor").append(html); });`

# meteor - Meteor 的 Appcache 也可以存储数据库数据吗？

> ID：15478597
> 
> 赞同：0
> 
> 时间：2013-03-18T13:56:14.880
> 
> 标签：meteor, html5-appcache

在最新的 Meteor 版本 0.5.9 中，我一直在试验 appcache 包，并且非常喜欢它的功能。

我使用`meteor create --example leaderboard`然后`meteor add appcache`来测试行为，并且页面甚至在服务器根本没有运行时加载！超酷！

但是，数据库好像没有缓存？当服务器未运行时

```
Players.find().fetch() 
```

返回

```
[] 
```

这对我来说非常棒，因为我正在制作一个笔记应用程序，其中笔记也需要离线使用。我是否遗漏了某些东西，或者是否有其他方法可以在离线时获取数据库数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-13T14:03:16.470

查看用于此用途的 Ground:DB 包。这个包使订阅集合的客户端缓存。

[https://atmospherejs.com/ground/db](https://atmospherejs.com/ground/db)

将由 Meteor 订阅填充的集合示例（需要单独调用订阅）

```
localCollection = new Ground.Collection('mongoName'); 
```

断开连接的集合示例（因此您必须自己填充它）

```
disconnectedCollection = new Ground.Collection('localName', {connection:null} ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T14:00:04.060

appcache 包不会缓存您的数据。请参阅[文档](http://docs.meteor.com/#appcache)：

> appcache 包将 Meteor 应用程序的静态部分（客户端 Javascript、HTML、CSS 和图像）存储在浏览器的应用程序缓存中。
> 
> [...]
> 
> （但请注意，appcache 包本身并不能使数据离线可用：在离线加载的应用程序中，客户端中的 Meteor 集合将显示为空，直到 Internet 可用并且浏览器能够建立 livedata 连接） .

此时，appcache 包纯粹是为了通过缓存静态资源来提高应用程序的加载速度。见[流星维基](https://github.com/meteor/meteor/wiki/AppCache)：

> appcache 包仅用于缓存静态资源。作为“应用程序”缓存，它缓存应用程序所需的资源，包括在 public/ 目录下发布的 HTML、CSS、Javascript 和文件。

# video - JWPlayer嵌入不工作

> ID：15478603
> 
> 赞同：1
> 
> 时间：2013-03-18T13:56:27.173
> 
> 标签：video, embed, jwplayer

Lontailvideo 网站上给出的嵌入代码不起作用。我有：

```
<!doctype html>
<html lang="en">
    <head>
        <script type="text/javascript" src="/jwplayer/jwplayer.js"></script>
    </head>
    <body>
    <div id="myElement">Loading the player...</div>
    <script type="text/javascript">
        jwplayer("myElement").setup({
            file: "http://techslides.com/demos/sample-videos/small.mp4",
            image: "ss.png"
        });
    </script>
</body> 
```

出现的只是显示“正在加载播放器...”的 div 标签。我已经添加了它要求的相关 JS 文件并指定了正确的路径，但并不高兴。

有任何想法吗？

# javascript - 从 js 文件调用 javascript

> ID：15478604
> 
> 赞同：0
> 
> 时间：2013-03-18T13:56:29.550
> 
> 标签：javascript, iframe

我的父页面上的元素只有在隐藏的 iframe 包含一个 div id 时才会更改。

如果我让代码在 html 页面上，一切都很好：

```
 <iframe id="myiframe" style="display:none" onload="load()" name="myiframe"   src="mysite.com"></iframe> 
```

JavaScript：

```
function load(){

if (window.frames[0].document.getElementById('applications'))
{
var str=document.getElementById("tst").innerHTML;
var n=str.replace("Login","Logout");}}
document.getElementById('tst').href='logout'; 
```

但我需要从 html 文件中删除 iframe 代码并重新定位 js 文件。

我在 js 文件中使用此代码来触发 iframe：

```
window.onload = function(){
var link = "iframelink"
 var iframe = document.createElement('iframe');
iframe.frameBorder=0;
iframe.width="300px";
iframe.height="250px";
iframe.id="randomid";
iframe.addEventListener("load", load);
iframe.setAttribute("src", link);
document.getElementById("ad54").appendChild(iframe);
} 
```

获取 iframe 的 html 代码：

```
<div id="ad54"</div> 
```

iframe 启动，但现在我没有在父页面上更改任何元素，尽管 iframe 被触发。加载 iframe 时，我需要在父页面中进行这些更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T14:16:06.217

`<div>`元素不加载外部内容，因此它们从不触发`load`事件。

您似乎试图在`iframe`内容加载时触发事件。您需要将事件侦听器附加到 iframe。

```
iframe.addEventListener("load", load);
iframe.setAttribute("src", link); 
```

# entity-framework - 实体框架 - 延迟加载，加载子实体问题

> ID：15478607
> 
> 赞同：0
> 
> 时间：2013-03-18T13:56:48.300
> 
> 标签：entity-framework, linq-to-sql, linq-to-entities, reverse-engineering

我有一个这样的模型：

用户 => 个人资料 => 模块 => 治疗

（一个用户有个人资料，一个个人资料有很多模块，一个模块有很多处理）

该模型首先由实体框架代码进行反向工程

当我在一个简单的 asmx 文件中使用它来询问用户时，我得到了这个错误：

```
A circular reference was detected while serializing an object of type 'CDU.Entities.Models.User'. 
```

这是因为配置文件实体包含一个用户列表，这些用户拥有他们的 pofile ......等等。

在我的数据上下文中，我禁用了延迟加载，似乎可以进行身份​​验证，在我检索到的用户配置文件中，我有配置文件 ID，但未加载配置文件实体。

```
 this.Configuration.LazyLoadingEnabled = false; 
```

伟大的！

一旦通过身份验证，我必须根据他的个人资料中的模块和处理来构建用户 Menu 。

所以我要求对象加载配置文件：

```
 User user = new User();
        using (cduContext db = new cduContext())
        {
            string encryptedPassword = Encryption.Encrypt(password);
            user = (from u in db.Users
                    where u.UserName.Equals(login) &&
                          u.Password.Equals(encryptedPassword)
                    select u).FirstOrDefault();
            // Including the user's Profile
            user = db.Users.Include("Profile").FirstOrDefault();
        }
        return user; 
```

配置文件已加载，但他的子实体也已加载，例如此配置文件的用户列表！

然后，我正在享受同样的错误：

```
A circular reference was detected while serializing an object of type 'CDU.Entities.Models.User'. 
```

为什么配置文件是“延迟加载”？

我需要根据需要包括这些实体......我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T14:08:14.500

尝试获取配置文件。

```
 profile = (from p in db.Profiles 
                where p.User.UserName.Equals(login) &&
                      p.User.Password.Equals(encryptedPassword)
                select p).FirstOrDefault(); 
```

# javascript - Javascript parseFloat 和空值

> ID：15478609
> 
> 赞同：8
> 
> 时间：2013-03-18T13:56:59.893
> 
> 标签：javascript, parsing, null, highcharts, parsefloat

我对 javascript 很陌生，因为我目前正在 jQuery Mobile 中制作跨平台 Web 应用程序，我已经使用 XML Parsing 到 HighCharts 图表的示例但是当我在我的系列数据中遇到空值时，它无法绘制任何线条并使其几乎成为散点图。

```
// push data points
$(series).find('data point').each(function(i, point) {
    seriesOptions.data.push( 
        parseFloat($(point).text())
    );
}); 
```

我不知道如何编写一个 if 语句来检查它是否找到一个空值，如果是，如何告诉它使用它......谁能帮助或指出我正确的方向，因为我希望我的图表能够是正确的，而不是在我有一个空值的地方放置一个零值。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-18T15:54:31.027

好吧，如果 parseFloat 不是数字（null 和 undefined 是 NaN），则 parseFloat 将返回“NaN”，因此您可以尝试这样做：

```
// push data points
$(series).find('data point').each(function(i, point) {
    var floatVal = parseFloat($(point).text());
    if (!isNaN(floatVal)) {
        seriesOptions.data.push(floatVal);
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T14:00:12.437

如果`null`像任何其他 C 风格语言一样检查 JavaScript：

```
 if (thing == null) 
```

或者

```
 if (thing != null) 
```

我发现这在大多数情况下都适用于我自己的编程，就像我在 C# 中一样；但是我发现其他人的代码依赖于从未声明或设置过的东西等等，总而言之，它归结为检查意大利面条- 是的`null`，`"undefined"`真正的文字字符串 - 以及其他任何东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T16:15:41.607

在 Javascript 上快速谷歌如果我相信我已经到达那里 - 谢谢 Bjorn :0) 你的回答让我到达那里！

```
// push data points
$(series).find('data point').each(function(i, point) {
    var floatVal = parseFloat($(point).text());
            if (!isNaN(floatVal)) {
                seriesOptions.data.push(floatVal);
        }
        else {
        seriesOptions.data.push(null);
        }
        console.log(floatVal)
    }); 
```

# objective-c - 如何从我的 Mac 应用程序加载 LaunchDaemon plist

> ID：15478614
> 
> 赞同：1
> 
> 时间：2013-03-18T13:57:13.113
> 
> 标签：objective-c, macos, daemon, launch-daemon

我正在尝试从我的 Mac 应用程序加载 LaunchDaemon plist。当我尝试在终端中加载它时，它会成功加载，但是当我尝试通过我的代码加载它时，它不起作用。

## 这是我的代码：

```
OSStatus status;
  AuthorizationRef authorizationRef;
  status = AuthorizationCreate(NULL, kAuthorizationEmptyEnvironment, kAuthorizationFlagDefaults, &authorizationRef);

  if (status != errAuthorizationSuccess)
  {
     NSString *err = [NSString stringWithFormat:@"Error Creating Initial Authorization : %d", status];
       [self ShowErrorAndExit:err];
  }

  //kAuthorizationRightExecute == "system.privilege.admin"
   AuthorizationItem right = {kAuthorizationRightExecute, 0, NULL, 0};
   AuthorizationRights rights = {1, &right};
   AuthorizationFlags flags = kAuthorizationFlagDefaults |
   kAuthorizationFlagInteractionAllowed |
   kAuthorizationFlagPreAuthorize |
   kAuthorizationFlagExtendRights;

   // Call AuthorizationCopyRights to determine or extend the allowable rights.
   status = AuthorizationCopyRights(authorizationRef, &rights, NULL, flags, NULL);
   if (status != errAuthorizationSuccess)
    {
        NSString *err = [NSString stringWithFormat:@"Sorry, we need Administrator priviliges to Continue"];
        [self ShowErrorAndExit:err];
    }

// After getting the Authorization Reference, executing the launchctl to load my LaunchDaemon
     char *daemonplist="/Library/LaunchDaemons/com.myappdaemon.plist";
     char *launchctl="/bin/launchctl";
     char *launchdArgs[]={"load",daemonplist,NULL};
     FILE *ldpipe=NULL;
     OSStatus;
    status=AuthorizationExecuteWithPrivileges(authorizationRef,launchctl,kAuthorizationFlagDefaults,launchdArgs,&ldpipe);
        if(status!=errAuthorizationSuccess)
    {
    NSLog(@"Error:%d",status);
    }
    if(status==errAuthorizationSuccess)
    {
        NSLog(@" succesfully loaded the daemon plist);
    }
    status=AuthorizationFree(authorizationRef,kAuthorizationFlagDestroyRights); 
```

**

## 我的清单：

**

```
<key> Label</key>
    <string>com.myappdaemon</string>
    <key>Program</key>
    <string>/Applications/myapplication.app/Contents/MacOS/myappdaemon</string>
    <key>ProgramArguments</key>
    <array>
    <string>/Applications/myapplication.app/Content/MacOs/myappdaemon</string>
    </array>
    <key>WorkingDirectory</key>
    <string>/Library/myapplication</string>
    <key>StandardOutPath</key>
    <string>/dev/null</string>
    <key>StandardErrorPath</key>
    <string>/dev/null</string>
    <key>RunAtLoad</key>
    </true>
    <key>keepAlive</key>
    <true/>

Thing is it shows the daemon plist is loaded successfully, but it's not. 
```

并且在系统重新启动后，守护程序启动正常。plist 在终端中加载良好。我什至尝试使用“-w”和“-F”来强制加载守护进程，但它根本不加载。奇怪的是它只是一直说守护程序已加载。现在我在这里做错了什么..？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-05-31T06:46:05.860

`AuthorizationExecuteWithPrivileges`在 OS X v10.7中已**弃用。**您可以使用`applescript`

```
do shell script "launchctl load /Library/LaunchDaemons/com.yourcompany.app.plist" with administrator privileges 
```

# javascript - Date.Parse() 的时区问题

> ID：15478615
> 
> 赞同：0
> 
> 时间：2013-03-18T13:57:16.057
> 
> 标签：javascript

我的脚本中有以下代码：

```
Date.parse('10/01/2010 01:01:01') 
```

我运行脚本后得到的结果是这样的：

```
September 30, 2010 22:01:01 
```

这可能是 Date.Parse() 的问题还是我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T14:00:59.850

这不是问题：这是一个[**功能**](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/parse)：

> parse 方法采用日期字符串（例如“Dec 25, 1995”）并返回自 1970 年 1 月 1 日 00:00:00 UTC 以来的毫秒数。本地时区用于解释不包含时区信息的参数。[...] 如果您未指定时区，则假定为本地时区。

......所以有一个区别：

```
Date.parse("Thu, 01 Jan 1970 00:00:00");

// ... returns 14400000 in timezone GMT-0400, and other values in other 
// timezones, since there is no time zone specifier in the argument. 
```

... 和...

```
Date.parse("Thu, 01 Jan 1970 00:00:00 GMT-0400");
// ... returns 14400000 no matter the local time zone. 
```

# c# - CSLA 数据库功能

> ID：15478621
> 
> 赞同：1
> 
> 时间：2013-03-18T13:57:30.517
> 
> 标签：c#, wpf, database, mvvm, csla

我正在尝试将 EF4 与 CSLA 一起使用。我在 CSLA 待了 2 周，现在我正在尝试与我的数据库进行交互。我在这里寻求的是简单的分步建议，例如：

1.  创建数据门户
2.  方法示例
3.  ...

或者也许只是一个有很好教程的网站。事实上，我什至不知道如何开始，因为我不习惯实体和 DataPortal。

这是一些示例代码：

```
public void ExecuteDelete(object obj)
{
    try
    {
        // Delete from Database
        db.Farbe.Remove(db.Farbe.Find(SelectedIndex.FarbauswahlNr));
        db.SaveChanges();
    }
    catch (Exception e)
    {
        MessageBox.Show(e.ToString());
    }
    // call Refresh
    ListeAktualisieren();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T16:12:08.080

您可能想查看他们的常见问题解答：[http ://www.lhotka.net/cslanet/faq/](http://www.lhotka.net/cslanet/faq/)

社区也很有帮助： [http ://forums.lhotka.net/forums/5.aspx](http://forums.lhotka.net/forums/5.aspx)

最后，这里有示例：http: [//lhotka.net/files/csla40/CslaSamples-4.3.12.zip](http://lhotka.net/files/csla40/CslaSamples-4.3.12.zip)

这取决于您要做什么；Csla 支持几种类型的对象（只读根、只读列表、命令等），它们决定了您应该继承哪个子类。例如，如果您正在执行命令类型的行为，您将继承 CommandBase 并覆盖 DataPortal_Execute 方法，这是您发布的代码主要存在的地方。我不确定您的Refersh 方法是做什么的，但它可能会发生在客户端而不是数据库上，因此不会出现在DataPortal_Execute 覆盖中。

# objective-c - UIGestureRecognizer 中断 UITouch 方法

> ID：15478626
> 
> 赞同：2
> 
> 时间：2013-03-18T13:57:54.213
> 
> 标签：objective-c, uigesturerecognizer, uitouch

我有一个带有自定义单元格的表格，它有子类 UITableViewCells 和触摸动画我使用 UITouch （代码基于本教程[http://gregprice.co.uk/blog/?p=280](http://gregprice.co.uk/blog/?p=280)）我得到的触摸下的单元格索引使用 didSelectRowAtIndexPath。我认为使用 UISwipeGestureRecognizer 来定义滑动方向是个好主意，但是 UIGestureRecognizer 会中断单元格滑动的动画。这样做是因为 UIGestureRecognizer 方法在 touchesEnded (UITouch) 方法完成之前激活。

是否可以在 touchesEnded 或触摸释放后调用 UISwipeGestureRecognizer？

# c# - 与文本块的数据绑定不更新

> ID：15478627
> 
> 赞同：0
> 
> 时间：2013-03-18T13:57:57.430
> 
> 标签：c#, data-binding, windows-phone-7.1

**我正在尝试在文本块中获取要更新的总和，但是我只能通过重新启动 Windows Phone 模拟器来更新它。为什么会这样？**

DisplayBill.xaml 中的代码

```
<TextBlock x:Name="lbTotalAmt" Text="{Binding Path=Sum, Mode=TwoWay, UpdateSourceTrigger=Explicit}" Margin="0,364,0,10" Grid.Row="1" /> 
```

ViewModel.cs 中的代码

```
 private string _Sum;
    public string Sum
    {
        get {return _Sum;}
        set
        {
            _Sum = value;
            NotifyPropertyChanged("Sum"); 
        }
    } 

    #region INotifyPropertyChanged Members

    public event PropertyChangedEventHandler PropertyChanged;

    // Used to notify Silverlight that a property has changed.
    private void NotifyPropertyChanged(string propertyName)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }

        if (propertyName == "ToDoBills")
            UpdateSumValue();
    }

    private void UpdateSumValue()
    {
      Sum = ToDoBills.Sum(i => i.Amount).ToString();
    }
    #endregion 
```

**更新
我想要做的是每次列表框添加一个项目时更新文本块。因此，每次将新项目添加到列表框中时，显示总金额的文本块都会更新。所以我的问题是如何在每次将新项目添加到列表框中时更新我的​​文本块？任何人都可以帮助我吗？我尝试使用下面的绑定表达式但无济于事**

```
public DetailPageBill()
    {
        InitializeComponent();

        // Set the page DataContext property to the ViewModel.
        this.DataContext = App.todoViewModel;

                BindingExpression be = lbTotalAmt.GetBindingExpression(TextBlock.TextProperty);
                 be.UpdateSource();                  

    } 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-18T14:00:20.377

尝试设置`UpdateSourceTrigger`为`PropertyChanged`您`TextBlock`的绑定：

```
<TextBlock x:Name="lbTotalAmt" Text="{Binding Path=Sum, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Margin="0,364,0,10" Grid.Row="1" /> 
```

`Explicit`不执行自动更新。MSDN 说：

> 仅当您调用 UpdateSource 方法时更新绑定源。

有关详细信息，请参阅[有关 UpdateSourceTrigger](http://msdn.microsoft.com/en-us/library/system.windows.data.updatesourcetrigger.aspx)的 MSDN。

# c++ - 路径变得太长的解决方法？

> ID：15478628
> 
> 赞同：2
> 
> 时间：2013-03-18T13:57:57.090
> 
> 标签：c++, directory

我正在编写一个 C++ windows 程序，最终编写了一堆目录和子目录。代码完全按照我想要的方式运行。

但是，当我尝试写入或创建另一个子目录并且它崩溃时，我遇到了创建一堆子目录并且路径太长的地步。

问：Windows 有没有办法解决这个问题（比如 linux 目录指针）？

一些写入文件夹和文件的代码：

```
path = path + "\\" + s.name.substr(0,s.name.size()-2);
mkdir(path.c_str());
//Write current file to folder anyway
writeToFile(opendir(path.c_str()), ss); 
```

代码只是一遍又一遍地通过上面的方法来创建一个使用文件夹和文件的半地图/树。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T14:09:33.610

您可以使用[`subst`](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/subst.mspx?mfr=true)创建驱动器名称和目录之间的映射：

```
subst x: c:\path\to\resource\directory 
```

这不是特别可扩展，但可能已经足够好了。

您也可以尝试共享文件夹，然后使用与机器相关的名称。

在我看来，这些都是黑客行为。

# html - ExtJS 4.1 将网格存储导出为 PDF

> ID：15478629
> 
> 赞同：1
> 
> 时间：2013-03-18T13:58:05.640
> 
> 标签：html, json, pdf, extjs, export

我的问题：将我的网格存储导出为 PDF。

可能的解决方案：我看过很多帖子，很多人[从 github 建议这个插件](https://github.com/iwiznia/Ext.ux.Exporter) `//problem is: This plugin uses Ext 3.0 and I need something in 4.1.`

ExtJS 4.1 中还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T14:04:11.070

相同的已移植到 ExtJS 4：

[https://github.com/iwiznia/Ext.ux.Exporter](https://github.com/iwiznia/Ext.ux.Exporter)

# android - eclipse 给了我一个错误“inflating class com.google.android.maps.MapView”，但我没有在项目中使用它

> ID：15478636
> 
> 赞同：0
> 
> 时间：2013-03-18T13:58:50.163
> 
> 标签：android, eclipse

我在几分钟前运行了一个关于谷歌地图的项目，一切运行良好。我关闭了项目，模拟器，重新启动了 eclipse，当我尝试运行以前的项目时，它给了我这个错误！该项目与地图无关！我能做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T14:08:49.447

检查您的任何`xml`文件是否包含 MapView。尤其是您为启动活动设置的视图。还要确保在运行配置中您没有选择错误的项目。

# c# - 使用从参数化 SQL 查询中检索到的数据

> ID：15478637
> 
> 赞同：1
> 
> 时间：2013-03-18T13:58:51.137
> 
> 标签：c#, asp.net, sql

如果我在 SQL 中使用参数化查询（带有 C# 的 ASP.NET），例如

```
var db = Database.Open("Database1");
SqlCommand cmd = new SqlCommand("SELECT * FROM pageinfo WHERE pageID = @pageID");
cmd.Parameters.AddWithValue("@pageID", 1); 
```

稍后在页面中，我想对检索到的任何数据进行 foreach 循环：

```
foreach(var row in ???) 
```

我将使用什么（代替???）来访问我刚刚检索到的数据？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T14:01:38.757

这取决于您**如何**执行查询。

通常由[SqlCommand.ExecuteReader完成](http://msdn.microsoft.com/it-it/library/9kcbe65k%28v=vs.110%29.aspx)

例如，在您的情况下，您可以：

```
.... 

 SqlDataReader reader = cmd .ExecuteReader();
 while (reader.Read())
 {
   ...
 } 
```

但是还有其他方法可以重新获取数据，例如使用[DataSet](http://msdn.microsoft.com/it-it/library/zb0sdh0b%28v=vs.110%29.aspx) 有关如何执行此操作的完整示例可以查看：

[为初学者使用 ADO.NET](http://www.codeproject.com/Articles/8477/Using-ADO-NET-for-beginners)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T14:02:12.880

您可以使用`while`迭代语句 with[`SqlCommand.ExecuteReader`](http://msdn.microsoft.com/en-us/library/9kcbe65k.aspx)而不是`foreach`。看看这个；

```
var db = Database.Open("Database1");
SqlCommand cmd = new SqlCommand("SELECT * FROM pageinfo WHERE pageID = @pageID");
cmd.Parameters.AddWithValue("@pageID", 1);
SqlDataReader reader = cmd.ExecuteReader();

while (reader.Read())
{
    Console.WriteLine(reader[0]);
} 
```

`reader[0]``reader[1]`如果您的数据当然有，则返回第一列的第一行并返回第二列的第一行。

# api - 面向 PaaS 供应商的跨平台 API？

> ID：15478638
> 
> 赞同：0
> 
> 时间：2013-03-18T13:58:51.493
> 
> 标签：api, interop, cross-platform, cloud, paas

是否有任何针对 PaaS 供应商的通用 API 的努力或产品？类似于 Delta Cloud、DMTF 云基础设施管理接口 (CIMI)、Simple Cloud、OCCI 等 IaaS 产品的跨平台 API...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-23T17:39:44.167

AppScale 复制了 App Engine API。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-23T17:35:39.273

即将发布的 OCCI v. 1.2 有一个*平台*规范，其中引入了 OCCI`Application`类`Component`和`ComponentLink`.

该版本肯定会在[http://occi-wg.org/上公布](http://occi-wg.org/)

# jsf-2 - Managed Property 在 Managed Bean 中定义为 null

> ID：15478642
> 
> 赞同：2
> 
> 时间：2013-03-18T13:59:03.737
> 
> 标签：jsf-2

即使在托管 Bean 中添加了 setter 方法，托管属性的值为 null。

```
@ManagedBean
@ViewScoped
@XmlRootElement(name = "name")
public class Name{
 private String firstName;

    public String getFirstName() {
      return firstName;
    }

    public void setFirstName(String firstName){
      this.firstName= firstName;
    }
}

@ManagedBean(eager=true)
@ViewScoped
public class Person{

    @ManagedProperty(value = "#{name}")
    private Name name;

     public String displayName(){       
       name.getFirstName(); //name is null
     }
    public void setName(Name name){
      this.name= name;
    }

} 
```

# jquery - css li 填充自身

> ID：15478643
> 
> 赞同：2
> 
> 时间：2013-03-18T13:59:08.667
> 
> 标签：jquery, html, css

我有这个 div 元素

```
<div class="foodsSection">
    <label>
        Foods:
    </label>
    <ul>
        <li>
            here
        </li>  
    </ul>
</div> 
```

结果是： ![在此处输入图像描述](../Images/1a9a4cfb7e1e156f73850477084011b0.png)

但是当我`li`从 jquery 添加元素时，结果变成了这样： ![在此处输入图像描述](../Images/8e1d06f5d6c7babbde51ed342dfd8d2b.png)

为什么要向左填充以及如何解决？

### jQuery

```
$(document).ready(function(){
    $("..RestauranstSection li").click(function (){
        var divYourOrder = $(".YourOrder");
        var li = $(".OMRestaurants li");
        var restaurantID = 8;
        var foodDive = $(".foodsSection ul");
        foodDive.html("");
        var lis = '<ul>';
        $.getJSON("http://localhost/TheEatTel/Food/getFoodForRestaurant/"+restaurantID+"/TRUE",function(data){
            for(var i=0;i<data.length;i=i+2){
                lis +="<li>"+"<label>"+data[i]+"</label> <label>"+data[i+1]+"</label></li>";
            }
            lis+="</ul>";
            foodDive.html(lis);    
        });
    });
}); 
```

### css

```
.foodsSection{
    width: 50%;
    margin-left: 100px;
    margin-top: 20px;
    border: black solid 2px;
}
.foodsSection label{
    width: 100px;
    color: blue;
}
.foodsSection ul{
    margin-bottom: 0px;
    margin-right: 0px;
    margin-top: 10px;
    margin-left: 100px;
    padding: 0;
}
.foodsSection ul li{
    font-size: 18px;
    padding: 0px;
    margin: 0px;
    list-style: none;
}
.foodsSection ul li:hover{
    background-color: #ccccff;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T14:02:47.893

您正在将 的 HTML 设置为`foodsSection ul`另一个`ul`. 例如

您正在选择`$(".foodsSection ul")`哪个是`ul`元素。然后将其中的 HTML 设置为另一个`ul`.

```
<div class="foodsSection">
    <label>
        Foods:
    </label>
    <ul>
        <ul>
         .
         .
         .
         </ul>
     </ul>
 </div> 
```

这将导致两倍的填充量，也是**不正确的 HTML 标记**。它在一个浏览器中可能看起来不正确（由于双填充），但由于 HTML 损坏，其他浏览器看起来会更糟。

您可以做的是将您`.html(lis)`的代码行替换为`.replaceWith(lis)`您可以在此处阅读有关此方法的信息[.replaceWith()](http://api.jquery.com/replaceWith/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T14:02:22.253

那是因为您将另一个`ul`元素附加到当前的`ul`. 您可以替换`ul`或仅附加`li`元素。

```
foodDive.replaceWith(lis); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T14:02:39.440

这是因为您将代码添加到 ul 元素，并且它包含一个 nexted ul。Firefox 开发人员工具栏有一个“查看生成的源代码”按钮，对此很有用。

试试这个：

```
$(document).ready(function(){
    $("..RestauranstSection li").click(function (){
        var divYourOrder = $(".YourOrder");
        var li = $(".OMRestaurants li");
        var restaurantID = 8;
        var foodDive = $(".foodsSection ul");
        foodDive.html("");
        var lis = '';
        $.getJSON("http://localhost/TheEatTel/Food/getFoodForRestaurant/"+restaurantID+"/TRUE",function(data){
            for(var i=0;i<data.length;i=i+2){
                lis +="<li>"+"<label>"+data[i]+"</label> <label>"+data[i+1]+"</label></li>";
            }
            foodDive.html(lis);    
        });
    });
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-18T14:04:36.247

您正在`<ul>`从脚本中添加额外内容。您已经获得了 li 的目的地`var foodDive = $(".foodsSection ul");`。因此，您也不需要第二次`var lis = '<ul>';`关闭`lis+='</ul>'`。只是`var lis = '';`相反。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-18T14:06:11.633

您正在为您的标记添加一秒钟`ul`，它正在继承您的 css 样式`ul`（左边距为 100px）。

代替

```
.foodsSection ul 
```

尝试

```
.foodsSection > ul 
```

# javascript - 我无法提交表格

> ID：15478644
> 
> 赞同：0
> 
> 时间：2013-03-18T13:59:11.240
> 
> 标签：javascript, jsp, browser

我有一个jsp表单，当用户输入时提交：以下是我的jsp文件

```
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<%@ page session="false"%>
<html>
<head>
<title>Login</title>
<style type="text/css">
.form-2 {
    /* Size & position */
    width: 300px;
    margin: 60px auto 30px;
    padding: 10px;
    position: relative; /* For the submit button positioning */

    /* Styles */
    box-shadow: 
        0 0 1px rgba(0, 0, 0, 0.3), 
        0 3px 7px rgba(0, 0, 0, 0.3), 
        inset 0 1px rgba(255,255,255,1),
        inset 0 -3px 2px rgba(0,0,0,0.25);
    border-radius: 5px;
    background: linear-gradient(#eeefef, #ffffff 10%);
}

.form-2 h1 .log-in,.form-2 h1 .sign-up {
    display: inline-blue;
    text-transform: inherit;
}

.form-2 h1 .log-in {
    color: blue;
    padding-right: 2px;
}

.form-2 h1 .sign-up {
    color: #ffb347;
    padding-left: 2px;
}
.form-2 .float {
    width: 100%;
    float: left;
    padding-top: 15px;
    border-top: 1px solid rgba(255,255,255,1);
}

.form-2 .float:first-of-type {
    padding-right: 5px;
}

.form-2 .float:last-of-type {
    padding-left: 5px;
}
.form-2 label {
    display: block;
    padding: 0 0 5px 2px;
    cursor: pointer;
    text-transform: uppercase;
    font-weight: 400;
    text-shadow: 0 1px 0 rgba(255,255,255,0.8);
    font-size: 11px;
}

.form-2 label i {
    margin-right: 5px; /* Gap between icon and text */
    display: inline-block;
    width: 10px;
}
.form-2 input[type=text],
.form-2 input[type=password] {
    font-family: 'Lato', Calibri, Arial, sans-serif;
    font-size: 13px;
    font-weight: 400;
    display: block;
    width: 100%;
    padding: 5px;
    margin-bottom: 5px;
    border: 3px solid #ebe6e2;
    border-radius: 5px;
    transition: all 0.3s ease-out;
}
.form-2 input[type=text]:hover,
.form-2 input[type=password]:hover {
    border-color: #CCC;
}

.form-2 label:hover ~ input {
    border-color: #CCC;
}

.form-2 input[type=text]:focus,
.form-2 input[type=password]:focus {
    border-color: #BBB;
    outline: none; /* Remove Chrome's outline */
}
.clearfix:after {
    content: "";
    display: table;
    clear: both;
}

.form-2 input[type=submit],
.form-2 .log-twitter {
    /* Size and position */
    width: 49%;
    height: 38px;
    float: left;
    position: relative;

    /* Styles */
    box-shadow: inset 0 1px rgba(255,255,255,0.3);
    border-radius: 3px;
    cursor: pointer;

    /* Font styles */
    font-family: 'Lato', Calibri, Arial, sans-serif;
    font-size: 14px;
    line-height: 38px; /* Same as height */
    text-align: center;
    font-weight: bold;
}

.form-2 input[type=submit] {
    margin-left: 50%;
    background: linear-gradient(#fbd568, #ffb347);
    border: 1px solid #f4ab4c;
    color: #996319;
    text-align:center;
    text-shadow: 0 1px rgba(255,255,255,0.3);
}

.form-2 .log-twitter {
    margin-right: 1%;
    background: linear-gradient(#34a5cf, #2a8ac4);
    border: 1px solid #2b8bc7;
    color: #ffffff;
    text-shadow: 0 -1px rgba(0,0,0,0.3);
    text-decoration: none;
}
.form-2 input[type=submit]:hover,
.form-2 .log-twitter:hover {
    box-shadow: 
        inset 0 1px rgba(255,255,255,0.3), 
        inset 0 20px 40px rgba(255,255,255,0.15);
}

.form-2 input[type=submit]:active,
.form-2 .log-twitter:active{
    top: 1px;
}
.no-boxshadow .form-2 input[type=submit]:hover {
    background: #ffb347;
}

.no-boxshadow .form-2 .log-twitter:hover {
    background: #2a8ac4;
}
</style>
<script type="text/javascript">
function login(){
    alert("login");
    document.forms[0].action="login";
    document.forms[0].method="post";
    document.forms[0].submit();
}

</script>
</head>
<body>
    <form class="form-2" >

    <table width="100%">
            <tr>
                <td align="center" colspan="2" width="100%"><b>  <h1> <span class="log-in">Login</span></h1></b></td>
            </tr>
            <tr>
                <td align="center" colspan="2" width="100%"></td>
            </tr>
            <tr class="float">
                <td align="right" class="icon-user" width="50%"><label for="login"><i class="icon-user"></i>Username</label> </td>
                <td align="left" class="field" width="50%"><input type="text" name="login" placeholder="Username "></td>
            </tr>
            <tr class="float">
                <td align="right" class="icon-lock" width="50%"><label for="password"><i class="icon-lock"></i>Password</label></td>
                <td align="left" class="field" width="50%"><input type="password" name="password" placeholder="Password" class="showpassword"> </td>
            </tr>
            <tr>
                <td align="right" colspan="2" width="50%"><input type="button"
                    name="CreateContact" value="Login" onclick="login()"/><i class="icon-user"></i></td>
            </tr>
        </table>
        </form>
</body>
</html> 
```

当我提交页面时，它给出了这个例外：

```
Error: TypeError: login is not a function 
```

请帮我解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T14:10:55.743

看起来像是`login`某种 js 对象，尝试重命名该`login()`函数，它对我有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T14:12:26.717

您必须使用名称登录名或函数名称重命名字段。它与具有相同名称的函数冲突。

工作示例：http: [//jsfiddle.net/inser/ccXHd/1/](http://jsfiddle.net/inser/ccXHd/1/)

```
<td align="right" class="icon-user" width="50%"><label for="login1"><i class="icon-user"></i>Username</label> </td>
                <td align="left" class="field" width="50%"><input type="text" name="login1" placeholder="Username "></td> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T14:04:51.897

尝试这个

```
<form class="form-2" action="login" method="post" >

<input type="submit" name="CreateContact" value="Login" /> 
```

您可以使用提交按钮并在表单标签中包含操作、方法。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-18T14:02:45.553

相反，你也可以做这样的事情

```
document.getElementById("idOfButton").onclick = dologin; 
```

正如所有人所说，更改登录功能名称。

PS我刚刚知道答案中有一个预定义的登录功能。

# android - 为什么我的条纹背景缩放质量这么差？

> ID：15478647
> 
> 赞同：1
> 
> 时间：2013-03-18T13:59:16.903
> 
> 标签：android, android-layout

我有一个包含条纹背景图像的活动。点击放大——这是我使用的原始图像。还有一个带有另一个活动标志的版本。

[![](../Images/43645a06aad71a38f3800e9f2149bbc0.png)](https://i.stack.imgur.com/ySBRb.png)

它看起来很好。我通过 XML 将它设置为活动中的背景，就像这样。

我需要将 hack 作为 ImageView 才能`centerCrop`在后台正确显示徽标，但这与问题无关，因为在`background`为设置`RelativeLayout`和删除`ImageView`.

```
<RelativeLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    >
    <ImageView
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:adjustViewBounds="true"
        android:scaleType="centerCrop"
        android:src="@drawable/background_striped" /> 
```

请注意，由于图像中必须有徽标，因此我不能人为地拉伸它或让它重复。

* * *

在布局预览屏幕中，它看起来像这样：

![](../Images/1f115571cb72eba2641b7f24765b4464.png)

在模拟器中，它看起来像这样：

![](../Images/ee55e3c2d149afb8e44f490753d8d764.png)

如您所见，与我的预期相比，它看起来很糟糕：

![](../Images/d36410d18e9f7395d675c01e34676f01.png)

自然，我已经为所有显示分辨率（从`ldpi`到`xhdpi`）创建了条纹背景的版本，但它们似乎总是以非常糟糕的方式缩放。

有没有办法让背景以更高的质量缩放？仅使用该`xhdpi`版本不会产生更好的质量——它只会使规模结果变得更糟，更被淘汰。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T14:04:07.090

对于可伸缩的drawables，最好使用9-patch。您可以使用 android 9-patch 工具创建一个带有小条纹背景图像的图像：

[http://developer.android.com/tools/help/draw9patch.html](http://developer.android.com/tools/help/draw9patch.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T14:07:46.037

尝试使用`repeat`. 我测试了它，它看起来不错。

```
<?xml version="1.0" encoding="utf-8"?>
<bitmap xmlns:android="http://schemas.android.com/apk/res/android"
 android:src="@drawable/background_striped"
 android:tileMode="repeat" /> 
```

# amazon-s3 - 重复 - 无法恢复单个文件

> ID：15478648
> 
> 赞同：0
> 
> 时间：2013-03-18T13:59:20.990
> 
> 标签：amazon-s3, recovery, duplicity

我尝试从 amazon s3 通过 duplicity 恢复单个文件或目录，但出现错误。

```
Local and Remote metadata are synchronized, no sync needed.
Last full backup date: none
Traceback (most recent call last):
  File "/usr/bin/duplicity", line 1251, in <module>
    with_tempdir(main)
  File "/usr/bin/duplicity", line 1244, in with_tempdir
    fn()
  File "/usr/bin/duplicity", line 1198, in main
    restore(col_stats)
  File "/usr/bin/duplicity", line 538, in restore
    restore_get_patched_rop_iter(col_stats)):
  File "/usr/bin/duplicity", line 560, in restore_get_patched_rop_iter
    backup_chain = col_stats.get_backup_chain_at_time(time)
  File "/usr/lib/python2.6/dist-packages/duplicity/collections.py", line 934, in get_backup_chain_at_time
    raise CollectionsError("No backup chains found")
CollectionsError: No backup chains found 
```

我做错了什么？

这里我如何做备份 export PASSPHRASE= ***** ***** export AWS_ACCESS_KEY_ID= ***** ***** export AWS_SECRET_ACCESS_KEY= ***** ***** GPG_KEY= ***** ***** BACKUP_SIM_RUN=1

```
LOGFILE="/var/log/s3-backup.log"
DAILYLOGFILE="/var/log/s3-backup-daily.log"

# The source of your backup
SOURCE=/home/u54433

# The destination
DEST=s3+http://**********

trace () {
        stamp=`date +%Y-%m-%d_%H:%M:%S`
        echo "$stamp: $*" >> ${DAILYLOGFILE}
}

cat /dev/null > ${DAILYLOGFILE}

trace "removing old backups..."
duplicity remove-older-than 2M --force --sign-key=${GPG_KEY} ${DEST} >> ${DAILYLOGFILE} 2>&1

trace "start backup files..."
duplicity --sign-key=${GPG_KEY} --exclude="**/logs" --s3-european-buckets --s3-use-new-style ${SOURCE} ${DEST} >> ${DAILYLOGFILE} 2>&1

cat "$DAILYLOGFILE" >> $LOGFILE

export PASSPHRASE=
export AWS_ACCESS_KEY_ID=
export AWS_SECRET_ACCESS_KEY= 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-01T20:16:59.737

在所有重复调用中使用 - **-s3-use-new-style**选项。

我遇到了和你一样的问题。我在“duplicity remove-older-than”中添加了缺失的选项，现在一切正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-23T05:45:25.350

最好从亚马逊删除 S3 存储桶并尝试重新创建完整备份，这可能会解决问题。

还

你可以看到下面的链接

[https://answers.launchpad.net/duplicity/+question/107074](https://answers.launchpad.net/duplicity/+question/107074)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-12T20:35:05.080

对于任何回到这个问题寻找明确答案的人，@shaikh-systems[链接](https://answers.launchpad.net/duplicity/+question/107074)导致人们意识到 IAM 子账户密钥的 Duplicity/AWS 通信存在一些问题。为了恢复，我通过使用`export`我的主帐户密钥/秘密让它工作。我正在使用重复 0.6.21。

# c# - 如何更改我的节点文本

> ID：15478651
> 
> 赞同：0
> 
> 时间：2013-03-18T13:59:31.670
> 
> 标签：c#, syncfusion

我创建了一些没有标签的符号，从调色板中删除我的符号后，我的符号将自动用文本标记。我的问题是我创建的每个符号的第一个 Node-Drop 都没有标记，在第二个、第三个、第四个等之后。Node-Drop 该节点将自动分配标签。

第二个要求我想知道，在删除我的节点后，我如何编辑我的 nodeText。通过单击或双击节点。

这是我的代码：

```
 protected void DiagramWebControl1_NodeDropFromPalette(object sender,   Syncfusion.Web.UI.WebControls.Diagram.NodeDropFromPaletteEventArgs e)
    {
       if (e.Node is PathNode || e.Node is Group)
       {
          PathNode node = e.Node as PathNode;
          if (node != null)
          {
            if (node.FullName == "Prozess Start")
            {
                node.Name = "Prozess Start";
                node.Labels.Add(new Syncfusion.Windows.Forms.Diagram.Label(node, node.Name));
            }
            else if (node.FullName == "Prozess")
            {
                node.Name = "Prozess";
                node.Labels.Add(new Syncfusion.Windows.Forms.Diagram.Label(node, node.Name));
            }
        }
        else
        {
            Group gnode = e.Node as Group;
            if (gnode.FullName == "Organisationseinheit")
            {
                gnode.Name = "Organisationseinheit";
                gnode.Labels.Add(new Syncfusion.Windows.Forms.Diagram.Label(gnode, gnode.Name));
            }
            else if (gnode.FullName == "Rolle")
            {
                gnode.Name = "Rolle";
                gnode.Labels.Add(new Syncfusion.Windows.Forms.Diagram.Label(gnode, gnode.Name));
            }
            else if (gnode.FullName == "Externe Rolle")
            {
                gnode.Name = "Externe Rolle";
                gnode.Labels.Add(new Syncfusion.Windows.Forms.Diagram.Label(gnode, gnode.Name));
            }
            else if (gnode.FullName == "IT-System")
            {
                TextNode rtxNode = new TextNode("");
                rtxNode.Text = "IT-System";
                gnode.Labels.Add(new Syncfusion.Windows.Forms.Diagram.Label(gnode, rtxNode.Text));
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T05:21:27.363

1.  由于节点的 FullName 是通过 DiagramWebControl 将“模型”附加到节点名称来唯一生成的，因此请检查删除的节点的 FullName 和代码中给出的名称是否相同。如果要根据名称向节点添加“标签”，请使用节点的“名称”属性而不是使用 FullName。
2.  有关在双击节点时编辑 nodeText 的要求，请参阅 Syncfusion 的公共论坛。这是一个[链接](http://www.syncfusion.com/support/forums/general/107749)。

# typescript - 在 TypeScript 中使用“开放接口”扩展 HTMLElement

> ID：15478653
> 
> 赞同：3
> 
> 时间：2013-03-18T13:59:36.590
> 
> 标签：typescript

我想用其他方法扩展内置类 HTMLElement。也许我要疯了，但我认为以下是官方成语：

```
interface HTMLElement {
   swapChildBefore(remove: HTMLElement, insert: HTMLElement, before: HTMLElement): void;
}

HTMLElement.prototype.swapChildBefore =
   function (remove: HTMLElement, insert: HTMLElement, before: HTMLElement): void {
      this.removeChild(remove)
      this.insertBefore(insert, before)
   } 
```

至少，根据[原型如何在打字稿上扩展？](https://stackoverflow.com/questions/12766117/how-does-prototype-extend-on-typescript)，这样的事情应该可以工作。

但是，这似乎隐藏了 HTMLElement 上的所有现有方法。那是因为我声明了一个接口，它隐藏了同名的类吗？但是这个习语似乎适用于 Object 和 Array，它们也是类。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T15:16:07.610

扩展接口必须在代码的根级别完成。如果您尝试在模块内扩展接口，则该模块内的代码将只能看到该范围内的接口。

破碎的例子：

```
interface ExpandableInterface {
    memberOfFIRSTDefinition: number;
}

module MyModule {
    interface ExpandableInterface {
        memberOfSECONDDefinition: number;
    }

    class MyClass {
        constructor() {
            var m: ExpandableInterface = {};
            m.memberOfFIRSTDefinition; // <-- It can't see this member because it's only scoped to the one inside of the module.
        }
    }
} 
```

工作示例：

```
interface ExpandableInterface {
    memberOfFIRSTDefinition: number;
}

interface ExpandableInterface {
    memberOfSECONDDefinition: number;
}

module MyModule {
    class MyClass {
        constructor() {
            var m: ExpandableInterface = {};
            m.memberOfFIRSTDefinition; // <-- They're both root level, it can be seen :)
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T16:11:36.463

它对我来说很好 - 在我声明附加方法（使用不同的名称不与现有的冲突`swapChildrenBefore`）之后，TypeScript 编译器也对预先存在的属性和方法感到满意`HTMLElement`。看[这里](http://www.typescriptlang.org/Playground/#src=interface%20HTMLElement%20%7B%0A%20%20%20swapChildBefore1%3a%20%28remove%3a%20HTMLElement,%20insert%3a%20HTMLElement,%20before%3a%20HTMLElement%29%20=%3E%20void;%0A%7D%0A%0AHTMLElement.prototype.swapChildBefore1%20=%0A%20%20%20function%20%28remove%3a%20HTMLElement,%20insert%3a%20HTMLElement,%20before%3a%20HTMLElement%29%3a%20void%20%7B%0A%20%20%20%20%20%20this.removeChild%28remove%29%0A%20%20%20%20%20%20this.insertBefore%28insert,%20before%29%0A%20%20%20%7D%0A%0A//%20An%20HTML%20element%0A%20%20%20%0Avar%20e%3aHTMLElement;%0A%0A//%20Try%20the%20new%20method%20-%20OK%0Avar%20insert%3aHTMLElement;%0Avar%20remove%3aHTMLElement;%0Avar%20before%3aHTMLElement;%0Ae.swapChildBefore1%28remove,%20insert,%20before%29%0A%0A//%20Try%20another%20property%20-%20OK%20as%20well%20%0Avar%20name%20=%20e.localName;)

# java - onResume() 忽略了 Listview 过滤器

> ID：15478659
> 
> 赞同：0
> 
> 时间：2013-03-18T13:59:51.643
> 
> 标签：java, android

我有一个`Listview`显示数据库中的所有数据。我目前有一个过滤器`onTextChanged`方法来过滤用户输入的字符串。在我覆盖`onResume()`活动类的方法之前，这非常有效。当用户单击后退按钮时，我已经使用它`onResume()`来重新加载。`Listview`

如前所述，没有`onResume`它可以完美运行。使用 onResume() 过滤器被阻塞。

这是我的代码：

```
public class view extends ListActivity {

    ImageButton searchButton;
    EditText searchName;
    ListView searchedListResults;
    long idToPass;
    String numReturned;
    String email;
    @Override
    protected void onResume() {
        super.onResume();

        list();
    }

    SimpleCursorAdapter cursorAdapter;
    DBHandler getCons;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.search);

        searchedListResults = (ListView) findViewById(android.R.id.list);

        list();

        searchName = (EditText) findViewById(R.id.inputName);

        searchedListResults.setTextFilterEnabled(true);

        searchName.addTextChangedListener(new TextWatcher() {

            @Override
            public void afterTextChanged(Editable s) {

            }

            @Override
            public void beforeTextChanged(CharSequence s, int start, int count,
                    int after) {

            }

            @Override
            public void onTextChanged(CharSequence s, int start, int before,
                    int count) {

                cursorAdapter.getFilter().filter(s.toString());
                // list();
                searchedListResults.refreshDrawableState();

            }

        });

        getCons = new DBHandler(this, null, null);

        cursorAdapter.setFilterQueryProvider(new FilterQueryProvider() {
            public Cursor runQuery(CharSequence constraint) {

                getCons.open();
                return getCons.getChanges(constraint.toString());

            }

        });
        searchedListResults.setAdapter(cursorAdapter);
    }

    private void list() {
        DBHandler DBsearchRef = new DBHandler(this, null, null);

        DBHandler search = new DBHandler(this, null, null);

        search.open();
        Cursor cursor = search.getData();
        search.close();
        startManagingCursor(cursor);

        String[] from = new String[] { DBsearchRef.KEY_NAME,
                DBsearchRef.KEY_TEL, DBsearchRef.KEY_EMAIL,
                DBsearchRef.KEY_COMMENTS };
        int[] to = new int[] { R.id.txtNameSet, R.id.txtContactSet,
                R.id.txtEmailSet, R.id.txtCommentSet };

        cursorAdapter = new SimpleCursorAdapter(this, R.layout.searchagain,
                cursor, from, to);
        searchedListResults.setAdapter(cursorAdapter);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T14:29:52.783

> 如前所述，没有 onResume 它可以完美运行。使用 onResume() 过滤器被阻塞。

`list()`调用in `onCreate()`和 in的区别在于`onResume()`您只在`onCreate()`. 因此，当在其中创建一个新的 CursorAdapter 时，`onResume()`它*没有*过滤器......

* * *

**尖端**

如果你搬家：

```
cursorAdapter.setFilterQueryProvider(new FilterQueryProvider() {
    public Cursor runQuery(CharSequence constraint) {
        getCons.open();
        return getCons.getChanges(constraint.toString());
    }
}); 
```

into `list()`，那么您的代码将按预期运行。

* * *

> 如果我删除了 onresume 方法，那么单击返回时我会得到一个空白的列表视图。

如果您在返回 Activity 时有数据“消失”，那么您必须自己将其保存在[`onSaveInstanceState()`](https://developer.android.com/reference/android/app/Activity.html#onSaveInstanceState%28android.os.Bundle%29)和中[`onRestoreInstanceState()`](https://developer.android.com/reference/android/app/Activity.html#onRestoreInstanceState%28android.os.Bundle%29)。它们使用起来非常简单，这里是关于重新[创建 Activity](https://developer.android.com/training/basics/activity-lifecycle/recreating.html)的开发人员指南。

* * *

最后，您不需要同时调用and ，它在两个地方都做同样的`list()`事情*。* 目前它没有添加任何更改后的功能，因此您可以完全删除您的方法。`onResume()``onCreate()``onCreate()``onResume()`

# javascript - 在游戏中反转 javascript 中的数组

> ID：15478664
> 
> 赞同：1
> 
> 时间：2013-03-18T14:00:04.400
> 
> 标签：javascript, jquery, arrays, inverse

```
else if(po==true){
        snake_array.reverse();
        var i=0;
        var c=snake_array[i];
        //paints head
        paint_head(c.x,c.y);
        for(i=1;i<snake_array.length;i++){
            //paints body
            var c=snake_array[i];
            paint_body(c.x,c.y);
            if(snake_array[i].x<snake_array[i-1].x){
                d="right";
            }
            else if(snake_array[i].x>snake_array[i-1].x){
                d="left";
            }
            else if(snake_array[i].y>snake_array[i-1].y){
                d="up";
            }
            else if(snake_array[i].y<snake_array[i-1].y){
                d="down";
            }
        }
        //poison status false
        po=false;
    } 
```

po 是中毒状态的变量。每当蛇吃这种食物时。应该倒过来，回到之前的轨迹。。是的，蛇会回复，但问题是蛇没有回到之前的轨迹。，而是在吃毒之前与之前的方向相反……

```
 x  <-food
      ^  <-head            v  <-tail                v <-tail
      |                    |                        | 
      |   >-becomes->      |    >-instead of->      |
>.....|             .......|                  <.....|
^                   |                         ^ 
|_tail              V  <-head                 |_head 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T14:10:21.880

你的新方向是基于尾部而不是头部。 `d`在循环的每次迭代中设置，这意味着唯一重要的是最后一次。因此，由于您的尾巴在示例中朝下，`d`因此设置为向下。

您要么需要在反转之前检查尾部，然后反转`d`或检查头部而不是尾部。

假设蛇的长度至少为 2，请在循环之外执行以下操作：

```
if(snake_array[0].x<snake_array[1].x){
    d="left";  // left or right depending on how your coordinate system works
} ... 
```

这将只看头部的正面。您可能需要检查蛇的长度是否仅为 1，然后只需反转您当前的方向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T16:48:42.547

这里的问题是，你如何确定头部的方向？尾巴在哪里画？根据您的答案，这可能是由于不同的问题造成的。在我看来，要知道尾巴的正确方向 (d)，您不仅需要存储蛇当前段的所有坐标，还需要存储最后占用和现在释放的位置。您是否也将其保存在数组中？如果是这种情况，那么 .reverse() 函数会给你一个错误的结果，因为它不会把头放在尾巴的位置，而是放在尾巴之前的点，也就是尾巴占据的点在上一回合。

Another thing that could be failing here is your updating mechanism. Maybe after the reversal, there's an update so that the head automatically advances by one space (but does so in the wrong direction)? Again, we need to know more of your code.

# iphone - 如何在 UIDatePicker 中仅禁用日期选择而不是时间选择

> ID：15478666
> 
> 赞同：4
> 
> 时间：2013-03-18T14:00:09.260
> 
> 标签：iphone, ios, uidatepicker, uidatepickermodetime

我在我的应用程序中使用 UIDatePicker，我只想禁用其中的日期选择，并且不应该影响时间选择。

谁能帮我这个。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-18T14:01:43.890

设置`datePickerMode`为`UIDatePickerModeTime`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T14:03:03.347

请试试这个：

```
datePicker.datePickerMode = UIDatePickerModeTime; 
```

其他选项包括：

```
typedef enum {
   UIDatePickerModeTime,
   UIDatePickerModeDate,
   UIDatePickerModeDateAndTime,
   UIDatePickerModeCountDownTimer
} UIDatePickerMode; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T14:04:54.707

这将完成这项工作

```
datePicker.datePickerMode = UIDatePickerModeTime; 
```

通过在 GUI 中使用属性检查器，您还可以将其设置如下 ![在此处输入图像描述](../Images/35c4fce283d8bde508cb322755dcc002.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T14:11:52.437

像这样将 UIDatePickerMode 从 UIDatePickerModeDateAndTime 更改为 UIDatePickerModeTime ...

```
[self.datePicker setDatePickerMode:UIDatePickerModeTime]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-18T16:15:47.607

```
datePicker.datePickerMode = UIDatePickerModeTime; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-18T14:06:01.293

除了以编程方式设置它的正确答案之外，您还可以在 xib 文件的属性检查器选项卡中设置它。

# objective-c - 如何使用 CocoaPods 将 GitHub 的 Mantle 添加到 Xcode

> ID：15478680
> 
> 赞同：6
> 
> 时间：2013-03-18T14:00:57.637
> 
> 标签：objective-c, cocoapods, github-mantle

我已经使用[CocoaPods将 GitHub 的](http://cocoapods.org/)[Mantle](https://github.com/github/Mantle)项目添加到 iOS 6 项目中：

```
$ pod search Mantle
$ vim Podfile // here I added pod 'Mantle'
$ pod install // this installs Mantle 1.0 
```

然后我在自定义搜索路径**之前**`($inherited)`将变量添加到`Header Search Paths`项目的“构建设置”部分。导入 Mantle 头文件时，Xcode 抱怨

 **```
#import "Mantle.h" // => 'Mantle/MTLJSONAdapter.h' file not found 
```

我错过了一些步骤吗？我还安装了其他 pod（AFNetworking 和 SSKeychain），但只有 Mantle 给我带来了问题。

我还添加了 SSToolkit，但遵循其“入门”中的说明，即不使用 CocoaPods。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T19:26:13.893

由于问题似乎与 Xcode 项目/工作区配置有关，我尝试了各种“清理”解决方案：

1.  删除`Pods`目录、`Podfile.lock`文件并从头开始安装所有内容。
2.  删除`MyProject.xcworkspace`目录并重复步骤 1
3.  输入`MyProject.xcodeproj`、删除`project.xcworkspace`和`xcuserdata`目录并重复步骤 1。
4.  转到全局 Xcode 目录 ( `/Users/my_user/Library/Developer/Xcode`)，删除与项目相关的所有内容，特别是`DerivedData`子目录，然后重复步骤 1。

最后一步似乎是最终的解决方案，尽管我不知道删除哪个文件/文件夹起到了作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T14:36:24.770

您是否已将 Mantle 添加到您的`Podfile`. 你提到运行`pod install Mantle`它不会/不应该做任何事情，但会显示错误。(`[!] Unrecognized argument:`地幔'`)

将 Mantle 添加到 Podfile 并运行后，`pod install`您应该能够直接链接，并且您的项目和项目`Mantle.h`中都会有一些目录。在此之后，您可以使用任何问题。`xcworkspace``Pods``#import "Mantle.h"`

![例子](../Images/03613d833bdea08774ed5c27921cef55.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-21T21:46:50.553

我有同样的问题，但问题似乎只是我的 Mantle pod 太旧了。将版本更改为“2.0.5”并更新了 pod，一切正常。**

# angularjs - 在 Angular.js 的一个视图中开发小部件

> ID：15478684
> 
> 赞同：1
> 
> 时间：2013-03-18T14:01:06.107
> 
> 标签：angularjs

如果您能分享您的观点/经验，我将不胜感激。

假设您有一个视图，其中包含几个共享一些数据（从服务器获取）的小部件。例如，我们可能在同一个视图中有一个树、列表和面包屑小部件，自然单个项目的名称可以同时显示在多个小部件中。我的问题是发展这种观点的最佳实践是什么？具体来说：

1.  小部件是否完全独立？（最容易实现，但存在性能问题）
2.  如果小部件是依赖的，它们是否通过以下方式进行通信：
    1.  单一模型（在小部件之间引入紧密耦合并防止进一步的代码演变）
    2.  事件（失去耦合但由于失去合同而容易出错，不太明确的代码）
    3.  任何其他方式
3.  如果这些小部件有自己的控制器和范围，您如何将更改通知从 URL（或任何其他事件）传播到所有这些小部件？例如，如果您想使用 URL 路由查看具有特定 ID 的实体，您是否有一个最顶层的视图控制器负责捕获此更改并使用某种内部机制通知所有小部件，或者执行小部件独立捕捉事件？

我想所有这些问题都以某种方式相关，因此请随意以您喜欢的任何形式/顺序回答它们。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T14:36:09.590

> 小部件是否完全独立？

我认为这个问题太宽泛了，我们无法回答，因为这实际上取决于小部件/指令在做什么。您是在问他们是否应该使用隔离范围？另请参阅[在 AngularJS 中编写指令时，我如何决定是否需要新的作用域、新的子作用域或新的隔离作用域？](https://stackoverflow.com/questions/14914213/when-writing-a-directive-how-do-i-decide-if-a-need-no-new-scope-a-new-child-sc)

> 他们是通过……交流吗？

再说一遍，太宽泛了，抱歉……这取决于指令的作用。除了您已经列出的方式外，您还可以通过以下方式进行交流

*   一个服务，如果我有两个以上需要通信的指令，我可能会使用它
*   `require: 'controllerNameHere'`. 使用该`require`方法，您将使用`this`而不是在控制器上定义方法`$scope`。但是，这种方法基本上仅限于单向通信：从`require`必须的指令到它需要的指令。例如，在 AngularJS 主页上，`pane`指令`require`是`tabs`指令。这允许`pane`指令调用`tabs`指令控制器上的方法，但`tabs`指令不能调用`pane`指令控制器上的方法。（有关此的更多信息，请参阅[AngularJS 控制器中的“this”与 $scope](https://stackoverflow.com/questions/11605917/this-vs-scope-in-angularjs-controllers/14168699#14168699)）

> 你如何传播变更通知

这取决于您的指令具有的范围类型。如果你使用`scope: true`你的指令，你不必传播任何东西。它们都可以`$watch`有一些父范围属性（并且由于 JavaScript 原型继承的工作方式，所有指令都可以看到父范围属性）。如果您正在使用`scope: {...}`，那么您可以使用 '=' 或 '@' 来定义本地指令范围变量并使用`$watch`来监视它们。

如果您担心 $watches 的性能（因为它们在每个摘要周期至少被评估一次），那么事件可能更合适。

另一件需要考虑的事情：您希望您的指令了解 URL 还是范围属性？使用范围属性可能会使您的指令更可重用。

# pdf - 在哪里可以找到“PDF 文档的数字签名”代码下载 URL？

> ID：15478687
> 
> 赞同：0
> 
> 时间：2013-03-18T14:01:14.343
> 
> 标签：pdf, itext, document, digital-signature

Bruno Lowagie 发表了这份关于 PDF 文档数字签名的[优秀白皮书。](http://itextpdf.com/book/digitalsignatures)

但是，我在本书中提供的所有示例中都找不到相应的源代码。

您能否发布我可以下载此源代码的 URL？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T16:20:26.270

iText 示例数字签名：

```
Java: http://sourceforge.net/p/itext/code/HEAD/tree/tutorial/signatures/
C#: http://sourceforge.net/p/itextsharp/code/HEAD/tree/tutorial/signatures/ 
```

玩得开心！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-17T17:14:18.827

您提到的论文发表于 2013 年。现在，在 2018 年，文件位于其他服务器中。

* * *

**iText 5 的示例**

您可以在以下 URL 中找到使用 iText v5 的 Java 和 C# 的源代码：

*   本书：[https ://pages.itextpdf.com/ebook-digital-signatures-for-pdf.html](https://pages.itextpdf.com/ebook-digital-signatures-for-pdf.html)
*   iText5 安全示例：[https ://developers.itextpdf.com/examples/security-itext5](https://developers.itextpdf.com/examples/security-itext5)
*   白皮书的源代码：[https ://developers.itextpdf.com/examples/security-itext5/digital-signatures-white-paper](https://developers.itextpdf.com/examples/security-itext5/digital-signatures-white-paper)
    *   第 1 章：[摘要、加密和解密](https://developers.itextpdf.com/examples/security-itext5/digital-signatures-white-paper/digital-signatures-chapter-1)
    *   第 2 章：[签署 Hello World](https://developers.itextpdf.com/examples/security-itext5/digital-signatures-white-paper/digital-signatures-chapter-2)
    *   第 3 章：[使用证书签名](https://developers.itextpdf.com/examples/security-itext5/digital-signatures-white-paper/digital-signatures-chapter-3)
    *   第 4 章：[使用 PKCS11、BEID、X.509 签名](https://developers.itextpdf.com/examples/security-itext5/digital-signatures-white-paper/digital-signatures-chapter-4)
    *   第 5 章：[检查完整性和验证证书](https://developers.itextpdf.com/examples/security-itext5/digital-signatures-white-paper/digital-signatures-chapter-5)

* * *

**iText 7 的示例**

这些示例也位于itexpdf网站

*   iText7 安全示例：[https ://developers.itextpdf.com/content/itext-7-examples/itext-7-security](https://developers.itextpdf.com/content/itext-7-examples/itext-7-security)

# java - 从 jTable 中删除未使用的行

> ID：15478688
> 
> 赞同：1
> 
> 时间：2013-03-18T14:01:34.333
> 
> 标签：java, swing, jtable, rows, defaulttablemodel

如何从 a 中删除未使用的行`JTable`？

我首先在 a 中创建一个固定大小的表格，`JPanel`然后根据需要填充元素。

现在我不想在我的表中显示未使用的行。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T15:20:19.267

> 我现在得到一张底部有很多空行的表格，只使用了前 5-6 行，其余为空白。我想以某种方式隐藏或删除它们

反过来工作。从一个空的 DefaultTableModel 开始。DefaultTableModel 支持一种`addRow()`方法。因此，当您获取要添加到模型的数据时，请使用：

模型.addRow(...);

不要让 GUI 编辑器决定您如何编写 GUI。添加清理代码以删除行是一个糟糕的设计。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T14:30:29.703

DefaultTableModel 有一个方法[removeRow](http://docs.oracle.com/javase/7/docs/api/javax/swing/table/DefaultTableModel.html#removeRow%28int%29)从表中删除一行。传递要从表中删除的行索引。

> 现在我不想在我的表中显示未使用的行。

这我不确定请发布一个[SSCCE](http://sscce.org)向我们展示什么是表示这些行未使用的标志。

# php - 无法从 while 循环中获取 id 以进行查询

> ID：15478694
> 
> 赞同：0
> 
> 时间：2013-03-18T14:01:49.333
> 
> 标签：php

我在一个页面上列出了一堆项目，每个项目在链接上都有一个与它们相关联的 id。

例如，当您将鼠标悬停在项目上时，您会得到一个 items.php?id=5 的 url。

我有我的 while 循环，它产生了这个页面上的所有项目，包括链接，我如何将该 ID 转移到我的其他代码中？

这是我的代码，它显示了所有项目。

```
while ($results = mysqli_fetch_assoc($query)) {
        echo 
        "<li>
            <img style='width: 200px; height: 200px' src='images/inventory/" . $results['Image'] . "'/>" . 
            "<div class='infoContainer'>" .
            "<a class='productLink' href='selectItems.php?status=active&id=" . $results['ID'] . "'>" . $results['ProductName'] . "</a>" . 
            "<br />" . 
            "<i>Currently Available </i>" . 
            "<i class='quantity'>" . $results['Quantity'] . "</i>" . 
            "</div>" .
        "</li>";
    } 
```

现在我只想将每个项目的属性放入一个对话框中。如何从上面结转 id 以获取正确的数据？

```
 <div id="dialog" title="A title">
        <?php

            $sql = "SELECT * FROM `my_table` WHERE `id` = ";
            $query = mysqli_query($sql) or die(mysqli_error());
            var_dump($sql);

            $results = mysqli_fetch_assoc($query);

            var_dump($results);
        ?>

    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T14:14:01.657

您应该调用一个 javascript 函数并在其中发送 id.. 不要忘记包含 jquery 文件.. 此方法使用 AJAX 加载数据..

```
<script>
function getData(idtosend){
    $.post('getdata.php', id: idtosend, function (response){
         $("#dialog").html(response);
    });
}
</script> 
```

这是getdata.php文件的代码：

```
<?php
//Connect mysql here
$id = mysql_real_escape_string($_POST['id']);
$sql = "SELECT * FROM `my_table` WHERE `id` = $id";
$query = mysqli_query($sql) or die(mysqli_error());
var_dump($sql);
$results = mysqli_fetch_assoc($query);
var_dump($results);
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T15:26:08.067

在 PHP 中你 cat 使用 ob_start() - 这是 echo 操作的输出缓冲区。

after save result in variable or array and put it into needful block on page

# java - 如何从 java 代码创建 *standalone* linux 可执行文件

> ID：15478695
> 
> 赞同：3
> 
> 时间：2013-03-18T14:01:50.503
> 
> 标签：java, linux, executable

我知道java意图是针对gui和多平台的，但是我面临的问题是如何将java应用程序发布到我无法控制的linux服务器中，即我不知道如果安装了java vm一点也不。

那么，我如何将它编译成一个真正的独立 linux exe，不要假设目标 linux 上有任何预安装的包。

```
public class MyTest {
    public static void main(String[] args) {

        System.out.println("You passed in: " + args[0]);

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T14:10:17.510

You need to specify as a requirement an installed JRE.
Otherwise you would need to deliver a JRE yourself as part of the deliverable application

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T14:12:08.210

从 java 创建一个二进制文件可能不是那么好。您可以考虑使用[http://launch4j.sourceforge.net/ 之](http://launch4j.sourceforge.net/)类的工具来创建完整安装以及适当的 jre。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T14:09:47.200

The [GNU COmpiler for Java](https://en.wikipedia.org/wiki/GNU_Compiler_for_Java) does exactly this. Keep in mind that it will work properly only for small programs, either way you'll need a JVM.

There's also [Avian](https://en.wikipedia.org/wiki/Avian_%28Java_virtual_machine%29), which has another approach and allows to deploy a lightweight JVM with jour application, but it still hasn't all the features of a full JRE.

# ios - 如何删除 NSString 对象中多余的转义字符

> ID：15478698
> 
> 赞同：0
> 
> 时间：2013-03-18T14:02:03.867
> 
> 标签：ios, json, nsstring, escaping, nsjsonserialization

我是iOS开发的新手。当我用 NSJSONSerialization 处理 json 时，我发现对我来说确实是个问题。

```
NSLog(@"response: %@", responseString);
NSData *jsonData = [responseString dataUsingEncoding:NSUTF8StringEncoding];
NSDictionary *dict = [NSJSONSerialization JSONObjectWithData:jsonData options:NSJSONReadingMutableContainers error:nil];
NSLog(@"dict: %@", dict); 
```

输出是：

```
2013-03-18 20:13:56.228 XXXX[3550:5003] response: {"status":"success","data":"{\"title\":\"\",\"sessionName\":\"sid\",\"sessionID\":\"9217e5df3db6b4b4aa3eed800890069f\",\"rand\":5360}","md5":"292ee1e78628fc6360c647e938c4f1ea"}
2013-03-18 20:13:56.229 XXXX[3550:5003] dict: {
data = "{\"title\":\"\",\"sessionName\":\"sid\",\"sessionID\":\"9217e5df3db6b4b4aa3eed800890069f\",\"rand\":5360}";
md5 = 292ee1e78628fc6360c647e938c4f1ea;
status = success; 
```

带有“\”的数据部分不能是 NSDictionary 对象

那么我应该怎么做才能使它正确呢？

对不起我的英语不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T14:16:42.413

无论出于何种原因，“data”的值都不是 JSON 字典，而是包含 JSON 数据的字符串。您可以通过`JSONObjectWithData`再次应用此字符串并替换字典中的值来解决此问题：

```
NSData *jsonData = [responseString dataUsingEncoding:NSUTF8StringEncoding];
NSMutableDictionary *dict = [NSJSONSerialization JSONObjectWithData:jsonData options:NSJSONReadingMutableContainers error:nil];

NSData *nestedJsonData = [[dict objectForKey:@"data"] dataUsingEncoding:NSUTF8StringEncoding];
NSDictionary *nestedDict = [NSJSONSerialization JSONObjectWithData:nestedJsonData options:NSJSONReadingMutableContainers error:nil];

[dict setObject:nestedDict forKey:@"data"];
NSLog(@"dict: %@", dict); 
```

*输出：*

```
dict: {
    data =     {
        rand = 5360;
        sessionID = 9217e5df3db6b4b4aa3eed800890069f;
        sessionName = sid;
        title = "";
    };
    md5 = 292ee1e78628fc6360c647e938c4f1ea;
    status = success;
} 
```

# javascript - 分组 ng-repeat 并在指令之外修改 DOM

> ID：15478702
> 
> 赞同：3
> 
> 时间：2013-03-18T14:02:14.460
> 
> 标签：javascript, angularjs, angularjs-directive, angularjs-ng-repeat, ng-repeat

我不确定如何描述我遇到的问题，或者即使它是一个问题。我想我很难理解 Angular 指令是如何工作的。欢迎任何关于最佳实践的建议和/或意见。

我的控制器的 $scope 中有一个简单的对象数组：

```
$scope.birthdays = [
      { name: "bob", dob:moment("09/20/1953"), cake: "vanilla"},
      { name: "michael", dob:moment("09/20/1953"), cake: "chocolate" },
      { name: "dave", dob:moment("09/20/1953"), cake: "chocolate" },
      { name: "chief", dob:moment("04/24/1977"), cake: "chocolate" },
      { name: "jerry", dob:moment("04/24/1977"), cake: "red velvet" },
      { name: "jerkface", dob:moment("04/24/1977"), cake: "i hate cake" },
      { name: "doug", dob:moment("05/10/1994"), cake: "marble" },
      { name: "jeff", dob:moment("05/10/1994"), cake: "vanilla" }
]; 
```

假设我想从这个数据模型创建一个 DOM 结构：

```
<h1>Birthday: 09/20/1953</h1>
<div class="birthday">
   <h2>Name: bob</h2>
   <h3>Cake: vanilla</h3>
</div>
<div class="birthday">
   <h2>Name: michael</h2>
   <h3>Cake: chocolate</h3>
</div>
<div class="birthday">
   <h2>Name: dave</h2>
   <h3>Cake: chocolate</h3>
</div>
<h1>Birthday: 04/24/1977</h1>
<div class="birthday">
   <h2>Name: chief</h2>
   <h3>Cake: chocolate</h3>
</div>
.... 
```

我可以[在这个 plunker](http://plnkr.co/edit/DSmzsBCohAG2yeW7CINM)中实现与此接近的东西。

然而，在那里，我最终得到了一个我*不*想要的稍微不同的 DOM 结构。

```
<div ng-repeat="birthday in birthdays" birthday-boy="">
    <h3 ng-show="!birthdays[$index-1].dob.isSame(birthday.dob)" class="ng-binding" style="">
        September 20th, 1953
    </h3>
    <div class="ng-binding">
        Name: bob
    </div>
    <div class="ng-binding">
        Cake: vanilla
    </div>
</div>
<div ng-repeat="birthday in birthdays" birthday-boy="">
    <h3 ng-show="!birthdays[$index-1].dob.isSame(birthday.dob)" class="ng-binding" style="display: none;">
        September 20th, 1953
    </h3>
    <div class="ng-binding">
        Name: michael
    </div>
    <div class="ng-binding">
        Cake: chocolate
    </div>
</div>
<div ng-repeat="birthday in birthdays" birthday-boy="">
    <h3 ng-show="!birthdays[$index-1].dob.isSame(birthday.dob)" class="ng-binding" style="">
        April 24th, 1977
    </h3>
    <div class="ng-binding">
        Name: chief
    </div>
    <div class="ng-binding">
        Cake: chocolate
    </div>
</div> 
```

所以，我的问题是：

1.  我是否正确地考虑了这个问题？我是否应该修改我的数据结构以按日期对其进行分组，然后只对每个单独的日期进行 ng-repeat？
2.  如果有办法用我现有的数据结构做到这一点，我是否需要在生日男孩/ng-repeat 指令之外修改 DOM？
3.  有没有办法将 ng-repeat 指令包装成自定义的东西 - 我已经开始研究 compile 函数但是，只是不确定......

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T14:19:56.853

我将在您的控制器中按日期分组，然后对新的范围属性进行 ng-repeat。这是我为类似的“分组依据”问题写[的小提琴。](http://jsfiddle.net/mrajcok/CvKNc/)您应该能够根据您的代码对其进行调整。我使用了 orderByFilter

```
$scope.sortedFriends = orderByFilter($scope.friends, '+age'); 
```

但是您可能需要使用`dateFilter`您可能拥有的 JavaScript 代码或任何 JavaScript 代码来对 dob 内容进行排序。

# java - 尝试在我的 Java 应用程序中导入音频文件：错位构造

> ID：15478703
> 
> 赞同：0
> 
> 时间：2013-03-18T14:02:18.833
> 
> 标签：java, audio, user-interface, applet

我遵循了将 wav 文件导入应用程序的教程。我不知道我是否将文件 URL 放在了正确的位置：

```
public class Audioapp extends JApplet
{
    public class Sound // Holds one audio file
    {
        private AudioClip song; // Sound player
        private URL songPath; // Sound path
        Sound(String filename)
        {
            try
            {
                songPath = new           URL(getCodeBase(G:\Uni\Programming\Rolling assignements\Week0\Programming week21),filename); // Get the Sound URL
                song = Applet.newAudioClip(songPath); // Load the Sound
            }
            catch(Exception e){} // Satisfy the catch
        }
        public void playSound()
        {
            song.loop(); // Play
        }
    }
} 
```

我得到的错误是：

“此行有多个标记 - 标记上的语法错误，错误的构造 - 标记上的语法错误，删除这些标记”

我应该在哪里放置 URL，因为我希望它从特定的工作文件夹而不是我的 U 盘播放，我是否只需放置文件的名称而不是整个路径。我都试过了，但它们都不起作用。

有什么帮助吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T14:13:04.620

很抱歉第一眼没有注意到..

*   首先：URL 需要一个字符串作为构造函数参数，而不是您所做的（注意参数周围的双引号。此外，查看 getCodeBase() 函数也会有所帮助）
*   第二：由于您似乎相当缺乏经验，因此记住`\`字符是明智的，反斜杠通常用于转义字符，因此在大多数情况下，在字符串常量中使用时，必须通过将其加倍来进行转义。

    `songPath = new URL(getCodeBase("G:\\Uni\\Programming\\Rolling assignements\\Week0\\Programming week21"),filename);`

更好的是使用`File.separator`静态字段......

另外，因为那里有一个空的“满足捕获”块，如果我是你的同事，我会用重物打你，同时对你大喊大叫。使用`e.printStackTrace()`, 或适当的日志记录框架。老师通常不会因此而打你，但会给你差评...

# php - 记录不在数据库中时如何设置空格

> ID：15478709
> 
> 赞同：0
> 
> 时间：2013-03-18T14:02:27.573
> 
> 标签：php, html, mysql

我创建了 html 表单，当我单击提交按钮时，我从数据库中获取记录，但如果数据不在数据库中，则其打印[http://bukkyolu.com/mp3/upload/](http://bukkyolu.com/mp3/upload/)不是来自表单数据库只是我在下面的声明中打印的静态值 http://bukkyolu.com/mp3/upload/".$row['2']."'> ，如果 .$row['2'].is 不在到数据库我想要空白空间而不是[http://bukkyolu.com/mp3/upload/](http://bukkyolu.com/mp3/upload/)

```
<?php
$category=$_POST["category"];
$month=$_POST["month"];

$mysql_hostname = "localhost";
$mysql_user = "root";
$mysql_password = "";
$mysql_database = "bukkyolu_mp3";
$bd = mysql_connect($mysql_hostname, $mysql_user, $mysql_password)
or die("Opps some thing went wrong");
mysql_select_db($mysql_database, $bd) or die("Opps some thing went wrong");

    $query  = "SELECT title,Amp3,Bmp3,Cmp3 FROM mp3_data WHERE`category` = '$category' and `month` = '$month' ";
$result1 = mysql_query($query);
$row = mysql_fetch_array($result1);
//echo $row['s_id'];

 echo "<table border='1' align='center' >";

while ($row = mysql_fetch_row($result1)){
 // echo "<td><a href='#' onclick='someFunction()'>" .$row['0']. "</a> </td>";
   echo "<tr><th>Title:</th><td>".$row['0']."</td></tr>";  
 echo "<tr><th>African:</th><td><a href 'http://bukkyolu.com/mp3/upload/".$row['1']."'>http://bukkyolu.com/mp3/upload/".$row['0']."</a></td></tr>";
 echo "<tr><th>British:</th><td><a href 'http://bukkyolu.com/mp3/upload/".$row['2']."'>http://bukkyolu.com/mp3/upload/".$row['0']."</a></td></tr>";
 echo "<tr><th>Caribbean:</th><td><a href 'http://bukkyolu.com/mp3/upload/".$row['3']."'>http://bukkyolu.com/mp3/upload/".$row['3']."</a></td></tr>";
  echo "<tr></tr>";
  echo "<tr></tr>";
}
echo "</table>";
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T14:08:38.337

我没有在您的代码中看到combo1和combo2 ...但是，由于您在同一页面中有html和php ..在执行mysqlquery之前最好检查帖子..

```
<?php
 if(isset($_POST){
     $category=$_POST["category"];
     $month=$_POST["month"];

     $mysql_hostname = "localhost";
     ...... //rest of your code
 } 
```

选择选定的值..

```
<select name="category">        
  <option <?php echo ( isset($_POST) && ($_POST['category'] =="animals"))? "selected='selected'":"" ?> value="animals">Animals</option>
  <option <?php echo ( isset($_POST) && ($_POST['category'] =="biblical"))? "selected='selected'":"" ?> value="biblical">Biblical</option>
  <option <?php echo ( isset($_POST) && ($_POST['category'] =="fables"))? "selected='selected'":"" ?> value="fables">Fables</option>
  <option <?php echo ( isset($_POST) && ($_POST['category'] =="fairy tales"))? "selected='selected'":"" ?> value="fairy tales">Fairy Tales</option>
  <option <?php echo ( isset($_POST) && ($_POST['category'] =="historical"))? "selected='selected'":"" ?> value="historical">Historical</option>
 </select> 
```

其他组合相同

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T14:09:44.233

这只是一个通知，不是致命错误。无论如何，您的页面仍应运行。它只是意味着变量 combo1 和 combo2 没有在你的源代码中的任何地方初始化，但是你在某个地方使用它们。为了确保它不会显示该错误，请将这行代码放在页面顶部。

```
error_reporting(E_ALL ^ E_NOTICE); 
```

# c# - 将 LambdaExpression 转换为字符串，包括值

> ID：15478711
> 
> 赞同：4
> 
> 时间：2013-03-18T14:02:34.840
> 
> 标签：c#, linq

我有一个将 LambdaExpression 转换为字符串的方法。我使用这些字符串作为缓存的键。

```
string p = "x";
var a = LambdaToString<MyType>(m => m.P == p); 
```

与此不同：

```
string p = "y";
var a = LambdaToString<MyType>(m => m.P == p); 
```

但是，无论 p 的值如何，我的 LambdaToString 方法的当前状态都会产生相同的输出。这是：

```
(MyType.P == value(ConsoleApplication1.Program+<>c__DisplayClass0).p) 
```

我希望我的 LambdaToString 函数做的是将表达式的“value(class).p”部分解析为“x”或“y”的实际文字字符串，视情况而定。

这是我的 LambdaToString 方法的当前状态。我不确定我需要做什么来修改它以产生我想要的输出：

```
 public static string LambdaToString<T>(Expression<Func<T, bool>> expression)
    {
        string body = expression.Body.ToString();

        foreach (var parm in expression.Parameters)
        {
            var parmName = parm.Name;
            var parmTypeName = parm.Type.Name;
            body = body.Replace(parmName + ".", parmTypeName + ".");
        }

        return body;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T15:27:51.863

> 我使用这些字符串作为缓存的键。

在很多情况下它是不正确的，即使它适用于您的项目。使用`Expression.ToString()`as 键很容易被以下方法打败：

```
//counter-example 1
Expression<Func<string, bool>> exp1 = s => s == "a";
Expression<Func<string, bool>> exp2 = ss => ss == "a";
//the two will be considered different in your cache solution
//but they are essentially the same, well that's not the worst, see next

//counter-example 2
Expression<Func<int, bool>> exp3 = i => i > 10;
Expression<Func<long, bool>> exp4 = i => i > 10;
//the two will be considered the same in your cache solution
//of course they are different, probably hences runtime exceptions 
```

以上根本不是答案。如果你不关心这个，让我们继续基于“使用字符串作为键”。

您想要缓存表达式，但要识别那些看起来相同且包含常量的表达式。那为什么不用表达式+常量来构建密钥呢？在您的示例代码中，键将是：

```
"m => m.P == p @@SPECIAL_SEPERATOR@@ x"
"m => m.P == p @@SPECIAL_SEPERATOR@@ y" 
```

是的，如果一个常量包含像“@@SPECIAL_SEPERATOR@@”这样的值，那么一切都会崩溃。这从一开始就不是一个严格的解决方案，因为您选择字符串作为缓存键。

如果您决定选择另一种缓存方法，请选中[此](http://archive.msdn.microsoft.com/ExpressionCache/Release/ProjectReleases.aspx?ReleaseId=2383)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T14:35:58.710

好吧，要获得 p 值，您可以这样做（可能是更简单、更强大的方法，但是）。

```
public static string LambdaToString<T>(Expression<Func<T, bool>> expression)
    {
        BinaryExpression binaryExpression = expression.Body as BinaryExpression;
        Expression right = binaryExpression.Right;//right part of the "==" of your predicate
        var objectMember = Expression.Convert(right, typeof(object));//convert to object, as we don't know what's in

        var getterLambda = Expression.Lambda<Func<object>>(objectMember);

        var getter = getterLambda.Compile();

        var valueYouWant = getter();//here's the "x" or "y"
        //... 
```

或更短

```
Expression right = (expression.Body as BinaryExpression).Right;
var valueYouWant = Expression.Lambda(right).Compile().DynamicInvoke(); 
```

**警告**

当然，这并不适合很多场景，它只是了解如何获得价值的基础。如果您的谓词是，它将不起作用

```
var x = 1;
var y = 2;
var result = LambdaToString<YourType>(v => v.A== x && v.B == y) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-18T15:10:48.960

这是我的答案。理想情况下，这将能够处理向它抛出的任何可能的表达式。现在它很可能没有，但它处理了我在测试中扔给它的所有简单、常见的事情。

如果您想出一个无法处理的示例，请将其留在评论中，我将尝试修改函数以处理它。

```
 public static string LambdaToString<T>(Expression<Func<T, bool>> expression)
    {

        var replacements = new Dictionary<string, string>();
        WalkExpression(replacements, expression);

        string body = expression.Body.ToString();

        foreach (var parm in expression.Parameters)
        {
            var parmName = parm.Name;
            var parmTypeName = parm.Type.Name;
            body = body.Replace(parmName + ".", parmTypeName + ".");
        }

        foreach (var replacement in replacements)
        {
            body = body.Replace(replacement.Key, replacement.Value);    
        }

        return body;
    }

    private static void WalkExpression(Dictionary<string, string> replacements, Expression expression)
    {
        switch (expression.NodeType)
        {
            case ExpressionType.MemberAccess:
                string replacementExpression = expression.ToString();
                if (replacementExpression.Contains("value("))
                {
                    string replacementValue = Expression.Lambda(expression).Compile().DynamicInvoke().ToString();
                    if (!replacements.ContainsKey(replacementExpression))
                    {
                        replacements.Add(replacementExpression, replacementValue.ToString());
                    }
                }
                break;

            case ExpressionType.GreaterThan:
            case ExpressionType.GreaterThanOrEqual:
            case ExpressionType.LessThan:
            case ExpressionType.LessThanOrEqual:
            case ExpressionType.OrElse:
            case ExpressionType.AndAlso:
            case ExpressionType.Equal:
                var bexp = expression as BinaryExpression;
                WalkExpression(replacements, bexp.Left);
                WalkExpression(replacements, bexp.Right);
                break;

            case ExpressionType.Call:
                var mcexp = expression as MethodCallExpression;
                foreach (var argument in mcexp.Arguments)
                {
                    WalkExpression(replacements, argument);
                }
                break;

            case ExpressionType.Lambda:
                var lexp = expression as LambdaExpression;
                WalkExpression(replacements, lexp.Body);
                break;

            case ExpressionType.Constant:
                //do nothing
                break;

            default:
                Trace.WriteLine("Unknown type");
                break;
        } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-18T14:47:40.160

非常快速和肮脏的解决方案是传递参数名称及其值并替换它。

```
public static string LambdaToString<T>(Expression<Func<T, bool>> expression, string value,string paramName )
        {

            string body = expression.Body.ToString().Replace(paramName,value);

            foreach (var parm in expression.Parameters)
            {
                var parmName = parm.Name;

                var parmTypeName = parm.Type.Name;
                body = body.Replace(parmName + ".", parmTypeName + ".");
            }

            return body;
        } 
```

# sockets - 制作临时插座

> ID：15478717
> 
> 赞同：1
> 
> 时间：2013-03-18T14:02:45.573
> 
> 标签：sockets, integration-testing, uniqueidentifier

我们的一些集成测试需要将服务绑定到套接字。这通常与实际服务冲突（例如，Web 服务或测试的另一个实例......使用相同的套接字）

我们有实用程序来创建唯一的临时文件，但是有没有相当于创建系统范围的唯一套接字的东西？

# knockout-validation - 如何使用 Knockout Validation 框架在计算字段中获取可观察字段的验证结果之一

> ID：15478723
> 
> 赞同：0
> 
> 时间：2013-03-18T14:03:06.630
> 
> 标签：knockout-validation

我有一个定义如下的视图模型：

```
var ViewModel = function() {
    var self = this;
    self.name = ko.observable().extend({ required: true });
    self.identityCode = ko.observable().extend({ required: true, maxLength: 18, minLength: 15 });
    self.gender = ko.computed(function() {
        // get gender information from the identiy code here
    });
    self.birthdate = ko.computed(function() {
       // get birthdate information from the identity code here
    });
    self.form_onsubmit = function (form) {
        if (!self.isValid()) {
            self.errors.showAllMessages();
            return false;
        } else {
            return true;
        }
    };
}; 
```

正如您在上面的代码中看到的，性别字段和 brithdate 字段是从身份代码中获取的计算字段。我只是想知道如何在做之前获得身份代码的验证结果。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T18:58:12.023

已验证的 observables 使用计算扩展`isValid`。因此，您可以通过以下方式检查结果：

```
 self.gender = ko.computed(function() {
        // get gender information from the identiy code here
        if(self.identityCode.isValid()) {
          // do something with the code
        }
    }); 
```

# c# - DirectoryInfo GetFiles() 过滤器网格

> ID：15478733
> 
> 赞同：0
> 
> 时间：2013-03-18T14:03:45.000
> 
> 标签：c#, asp.net, datagrid, directoryinfo, getfiles

我正在处理一个页面，该页面显示网格中特定目录中的 pdf 文件，以及该文件的链接。

我在这里修改 Scott Mitchell 的示例：http: [//aspnet.4guysfromrolla.com/articles/052803-1.aspx](http://aspnet.4guysfromrolla.com/articles/052803-1.aspx)

我将代码从 vb 转换为 c#。

```
<%@ Import Namespace="System.IO" %>
<script language="C#" runat="server">
public void Page_Load(object sender, EventArgs e)
{
DirectoryInfo dirInfo = new DirectoryInfo(Server.MapPath(""));

articleList.DataSource = dirInfo.GetFiles("*.pdf");
articleList.DataBind();
}
</script>

<asp:DataGrid runat="server" id="articleList" Font-Name="Verdana"
AutoGenerateColumns="False" AlternatingItemStyle-BackColor="#eeeeee"
HeaderStyle-BackColor="Navy" HeaderStyle-ForeColor="White"
HeaderStyle-Font-Size="15pt" HeaderStyle-Font-Bold="True">
<Columns>
<asp:HyperLinkColumn DataNavigateUrlField="Name" DataTextField="Name" 
       HeaderText="File Name" target="_blank"/>
<asp:BoundColumn DataField="LastWriteTime" HeaderText="Last Write Time"
    ItemStyle-HorizontalAlign="Center" DataFormatString="{0:d}" />
</Columns>
</asp:DataGrid> 
```

上面的代码用于显示文件。我现在想做的是添加网格过滤。

文件名在网格中显示为 pdf 的链接。如何添加允许您过滤/搜索特定文件名或以 __ 开头的文件名的文本字段？

此外，是否有可能阻止浏览器缓存 pdf，因为我的页面所做的只是提供指向它的链接？

任何帮助或想法将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T14:46:16.203

试试下面它会帮助你....

在 HTML 设计视图中，在 DataGridView 添加以下代码之前，它将创建文本框和按钮

**HTML：**

```
 Enter the Name of the file : <asp:TextBox ID="txtFilter" runat="server"></asp:TextBox>
        <asp:Button ID="btnShow"
            runat="server" Text="ShowData" onclick="btnShow_Click" /> 
```

添加按钮单击事件，如下所示...

**CS：**

```
 protected void btnShow_Click(object sender, EventArgs e)
        {
         ShowData();
        }

        public void ShowData()
        {
            string FilterValue = txtFilter.Text.ToUpper();
            DirectoryInfo dirInfo = new DirectoryInfo(Server.MapPath(""));

            FileInfo[] info = dirInfo.GetFiles("*.zip");            //Get FileInfo and Save it a FileInfo[] Array

            List<Getfiles> _items = new List<Getfiles>();          // Define a List with Two coloums

            foreach (FileInfo file in info) //Loop the FileInfo[] Array
               _items.Add(new Getfiles { Name = file.Name, LastWriteTime = file.LastWriteTime.ToString("MM/dd/yyyy") });  // Save the Name and LastwriteTime to List

           //you can use Any one the Filtered list from the below...

            var tlistFiltered = _items.Where(item => item.Name.ToUpper() == FilterValue); // Find the File by their File Name
            var tlistFiltered1 = _items.Where(item => item.Name.ToUpper().Contains(FilterValue)); // Find the file that Contains Specific word in its File Name
            var tlistFiltered2 = _items.Where(item => item.Name.ToUpper().StartsWith(FilterValue));// Find tha File that StartsWith Some Specific Word

            articleList.DataSource = tlistFiltered; //Assign the DataSource to DataGrid
            articleList.DataBind();

        }

        public class Getfiles
        {
            public string Name { get; set; }
            public string LastWriteTime { get; set; }
        } 
```

**输出屏幕：**

![在此处输入图像描述](../Images/d4a0ce5bf49356b5dd7537d209e34241.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T14:11:01.160

您可以尝试使用 ObjectDataSource，然后将其传递给您的 DataGrid。对象数据源将包装目录信息调用。

拥有 ObjectDataSource 后，您应该能够使用 DataGrid 的内置过滤和排序功能。

Scott Mitchel 有一些关于此的教程：

[http://msdn.microsoft.com/en-us/library/aa581784.aspx](http://msdn.microsoft.com/en-us/library/aa581784.aspx)

这是使用 Sql 的一个，但您应该能够轻松地对其进行调整以提取文件列表：

[http://asp-net-example.blogspot.nl/2008/11/aspnet-gridview-and-objectdatasource.html](http://asp-net-example.blogspot.nl/2008/11/aspnet-gridview-and-objectdatasource.html)

# ruby - Ruby + Imap：搜索带有特殊字符的主题不起作用

> ID：15478738
> 
> 赞同：0
> 
> 时间：2013-03-18T14:03:51.963
> 
> 标签：ruby, imap, gmail-imap

使用 Ruby + IMAP 并尝试使用特殊字符搜索主题时：

```
imap.uid_search(['SUBJECT', subject, 'NOT', 'SEEN']) 
```

如果主题是“Olá”，它将失败：

```
Encoding::CompatibilityError: incompatible encoding regexp match (ASCII-8BIT regexp with UTF-8 string)
from /Users/fernando/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/net/imap.rb:1266:in `===' 
```

指定 uid_search 的第二个参数，即字符集，也不起作用。

没有特殊字符的主题可以正常工作。有没有办法使这项工作？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T13:58:27.463

这复制了问题（使用相同的正则表达式`net/imap`）：

```
# encoding: ascii-8bit
a = /[\x80-\xff\r\n]/n
a =~ "olá".force_encoding('utf-8') # incompatible encoding regexp match (ASCII-8BIT regexp with UTF-8 string) (Encoding::CompatibilityError) 
```

两种可能：

1.  添加`# encoding: ascii-8bit`到脚本的顶部
2.  强制字符串的编码为`ascii-8bit`：

    imap.uid_search(['SUBJECT', subject.force_encoding('ascii-8bit'), 'NOT', 'SEEN'])

# youtube - YouTube API 地理位置搜索是否有效？

> ID：15478741
> 
> 赞同：2
> 
> 时间：2013-03-18T14:04:00.290
> 
> 标签：youtube, geolocation, youtube-api

[YouTube API 文档说我应该能够在指定半径内按 location 搜索](https://developers.google.com/youtube/2.0/developers_guide_protocol_api_query_parameters#locationsp)视频。这似乎不起作用。

甚至还有一个[官方论坛帖子](https://groups.google.com/forum/embed/?place=forum/youtube-api-gdata&showsearch=true&showpopout=true&parenturl=https://developers.google.com/youtube/forum/discussion#!searchin/youtube-api-gdata/location%2420radius%7Csort%3adate/youtube-api-gdata/93sFr3RQufg/bvef52cQaFQJ)显示了如何做到这一点。

然而，调用一个简单的例子，比如

```
http://gdata.youtube.com/feeds/api/videos?v=2&alt=json&location=51.5032025,-0.1273598!&location-radius=10km 
```

返回 0 个结果。

应该有*一些*游客上传的伦敦视频！

那么，是否仍然可以获得带有位置元数据标记的视频列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T16:31:53.960

它目前不起作用（2013 年 4 月 12 日测试）。根据 [GData 问题 4234](https://code.google.com/p/gdata-issues/issues/detail?id=4234 "GData 问题 4234") “YouTube 搜索索引的变化正在阻止基于位置的搜索返回结果”

预计的修复将需要比最初预期的 2013 年 4 月中旬时间框架更长的时间。

我热切期待这个决议。我建议单击该问题页面上的星号，以便在添加评论等时获得更新。

**更新：** 2013 年 4 月 16 日，该问题被更新为“目前估计在 2013 年下半年恢复此功能”。此外，他们的 API 文档已更新以反映该问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T14:18:10.240

地理位置搜索暂时被弃用，预计在不久的将来会再次出现。这是由于另一次发布，文档即将刷新。它也将很快恢复。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-09T09:39:38.690

现在正在工作。请参阅[v3 的文档](https://developers.google.com/youtube/v3/docs/search/list)

```
# HTTP URL:
GET https://www.googleapis.com/youtube/v3/search/?type=video
                                                 &locationRadius=100m
                                                 &location=51.5032025%2C-0.1273598
                                                 &part=snippet
                                                 &key={YOUR_API_KEY} 
```

# google-maps-api-3 - 如何在没有重复标记的情况下使用 ImageMapType

> ID：15478746
> 
> 赞同：-1
> 
> 时间：2013-03-18T14:04:17.753
> 
> 标签：google-maps-api-3

标记的magMapType 问题。它们是重复的。我正在使用自定义图像实现地图。左右拖动地图，标记是重复的。见例子：[http ://rafaelribeirowebmaster.com.br/zoom/_index.html](http://rafaelribeirowebmaster.com.br/zoom/_index.html)

有人能帮我吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T19:39:44.177

这是标记的默认行为，当地图在视口中重复“世界”时，它们将被重复。

我看到的唯一选择是使用[自定义覆盖](https://developers.google.com/maps/documentation/javascript/overlays#CustomOverlays)创建标记（这些不会重复）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T00:48:37.303

非常感谢。我正在使用图书馆 Elabel。它做了类似的事情，但问题出在事件点击上。它不起作用，然后我将命令“overlayLayer.appendChild”移动到“overlayMouseTarget”，但我需要将地图集中在自定义叠加层的点上。

怎么做？

```
google.maps.event.addListener(customOverlay, 'click', function() {
      map.setCenter(customOverlay.getPosition());
}) 
```

# ruby - 模块中的实例变量？

> ID：15478747
> 
> 赞同：43
> 
> 时间：2013-03-18T14:04:19.063
> 
> 标签：ruby, module

即使我无法创建模块的实例，我怎么可能在模块中拥有实例变量？`@stack`下面的模块的目的是`Stacklike`什么？

```
module Stacklike
  def stack
    @stack ||= []
  end
end 
```

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-03-18T14:17:23.820

将实例变量想象成任何包含您的模块的类中都会存在的东西，事情就更有意义了：

```
module Stacklike
  def stack
    @stack ||= []
  end

  def add_to_stack(obj)
    stack.push(obj)
  end

  def take_from_stack
    stack.pop
  end
end

class ClownStack
  include Stacklike

  def size
    @stack.length
  end
end

cs = ClownStack.new
cs.add_to_stack(1)
puts cs.size 
```

将输出“1”

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-03-18T14:18:57.377

见下文：

```
p RUBY_VERSION
module Stacklike
  def stack
    @stack ||= []
  end

  def add_to_stack(obj)
    stack.push(obj)
  end

  def take_from_stack
    stack.pop
  end
end

class A
include Stacklike
end

a = A.new
p a.instance_variables #<~~ E
p a.instance_variable_defined?(:@stack) #<~~ A
a.add_to_stack(10) #<~~ B
p a.instance_variable_defined?(:@stack) #<~~ C
p a.instance_variables #<~~ D 
```

*输出：*

```
"1.9.3"
[]
false
true
[:@stack] 
```

**解释：**是的，`Module`实例变量存在于类中`class`。`include`但是您可以看到它`p a.instance_variable_defined?(:@stack)`显示`false`为直到**A**`@stack`仍未定义。在**B**点，我定义了实例变量@stack。**因此C**点中的语句输出为。意味着模块实例变量不是由模块本身创建的，但如果包含该模块，则可以由实例完成。**E**中的语句仍输出为未定义实例变量的那一点，但是如果您看到**D**行的输出，则证明******`true``class``class`**`[]`**`@stack`在 的对象`a`内`class A`。**********

 ********为什么会有这样的设计？**

这是设计或有时来自要求。假设您被要求编写一个堆栈操作代码，将被两家订票公司使用，Say`A`和`B`。现在`A`是为他们的客户服务的堆栈政策，但他们也有更多的手续。`B`公司也使用堆栈策略与他们自己的手续不同`A`。因此，如果在内部设计操作`Stack`，最好将其写在一个共同的地方，就像两者一样，并且在它们内部具有共同的功能。将来，如果另一家公司来找您，您也可以将该模块用于他们的课程，而无需为每个 重写相同的功能，并且`class A``class B``A``B``C``A``B``C`. 可以有更多的想法，但希望这会帮助你回答你自己的最后一部分问题。

这就是概念。希望能帮助到你。

干杯！！

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-18T14:18:00.140

当您在一个类中包含一个模块时，它的所有实例方法都会有效地“粘贴”到宿主类中。因此，如果您有：

```
class Lifo
  include Stacklike
end

l = Lifo.new
l.add_to_stack(:widget) 
```

然后`l`现在有一个实例变量`@stack`，从`Stacklike`.

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-18T14:18:14.707

当您在某个其他类中包含模块 Stacklike 时，该实例变量将可用，就好像它是在该类中定义的一样。这使您可以选择从模块本身设置和处理基类的实例变量。******

# asp.net-web-api - IModelBinderProvider webapi 等效

> ID：15478749
> 
> 赞同：1
> 
> 时间：2013-03-18T14:04:21.787
> 
> 标签：asp.net-web-api, model-binding

WEBAPI 中的 IModelBinderProvider 等效于什么？我已经阅读[了这篇文章](http://blogs.msdn.com/b/jmstall/archive/2012/05/11/webapi-parameter-binding-under-the-hood.aspx)，仍然不明白如何替换默认绑定或插入自己的绑定规则。

**编辑：**当前的“经典”MVC 模型绑定器提供程序（实现 IModelBinderProvider）。

```
public IModelBinder GetBinder(Type modelType)
        {
            Type binderType;

            lock (_syncLock)
            {
                // Check to see if a type was already bound.
                if (_binders.ContainsKey(modelType))
                    binderType = _binders[modelType];
                else
                {
                    // Check the assembly and look for a <name>ModelBinder
                    Assembly assembly = Assembly.GetExecutingAssembly();
                    Type[] types = assembly.GetTypes();

                    // Convention over configuration
                    binderType = types.FirstOrDefault(t => t.Name == modelType.Name + "ModelBinder");

                    if (binderType != null)
                        _binders[modelType] = binderType;
                }
            }

            if (binderType == null)
                return null;

            var binder = (IModelBinder) DependencyResolver.Current.GetService(binderType);
            return binder;
        } 
```

所以你可以看到我正在尝试使用依赖解析器来选择活页夹。

同样在配置中，我将默认活页夹替换为

```
DependencyResolver.SetResolver(new StructureMapDependencyResolver(ObjectFactory.Container)); 
```

最后，如果我在示例“LocationID”中发送参数（作为表单或查询字符串）并且我有这样的 webapi 操作

```
public HttpResponseMessage MyAction(MyCls obj) {
   // do something
}

public class MyCls{
    public string LocationID {get;set;}
} 
```

我需要绑定 MyCls 和 LocationID 来获取提供的“LocationID”参数的值。

# xml - 代码片段 - 指定光标位置

> ID：15478753
> 
> 赞同：4
> 
> 时间：2013-03-18T14:04:33.353
> 
> 标签：xml, code-snippets, ssms-2012

我可以修改此代码片段，以便当我使用片段时，`SSMS`光标位于片段的末尾，可供我继续编写脚本吗？

```
<?xml version="1.0" encoding="utf-8" ?>
<CodeSnippets  xmlns="http://schemas.microsoft.com/VisualStudio/2005/CodeSnippet">
<_locDefinition xmlns="urn:locstudio">
    <_locDefault _loc="locNone" />
    <_locTag _loc="locData">Title</_locTag>
    <_locTag _loc="locData">Description</_locTag>
    <_locTag _loc="locData">Author</_locTag>
    <_locTag _loc="locData">ToolTip</_locTag>
   <_locTag _loc="locData">Default</_locTag>
</_locDefinition>
<CodeSnippet Format="1.0.0">
<Header>
<Title>top10star</Title>
<Description>my first snippet</Description>
<Author>Me</Author>
</Header>
<Snippet>
<Code Language="SQL"><![CDATA[SELECT TOP 10 * FROM]]>
</Code>
</Snippet>
</CodeSnippet>
</CodeSnippets> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T08:48:44.690

我最终得到以下结果：

```
<?xml version="1.0" encoding="utf-8" ?>
<CodeSnippets  xmlns="http://schemas.microsoft.com/VisualStudio/2005/CodeSnippet">
<_locDefinition xmlns="urn:locstudio">
    <_locDefault _loc="locNone" />
    <_locTag _loc="locData">Title</_locTag>
    <_locTag _loc="locData">Description</_locTag>
    <_locTag _loc="locData">Author</_locTag>
    <_locTag _loc="locData">ToolTip</_locTag>
   <_locTag _loc="locData">Default</_locTag>
</_locDefinition>
<CodeSnippet Format="1.0.0">
<Header>
<Title>top10star</Title>
<Description>my first snippet</Description>
<Author>Me</Author>
</Header>
<Snippet>
<Code Language="SQL">
<![CDATA[SELECT TOP 10 * FROM$selected$ $end$]]>
</Code>
</Snippet>
</CodeSnippet>
</CodeSnippets> 
```

# mysql - Rails 日期属性不会保存到 MySQL 数据库

> ID：15478756
> 
> 赞同：0
> 
> 时间：2013-03-18T14:04:37.643
> 
> 标签：mysql, ruby-on-rails, datetime, activerecord

我有一个 Rails 应用程序，它在生产中运行 MySQL，在开发中运行 SQLite。在开发模式下一切正常，但在生产日期时间属性不会保存到数据库中（即使 created_at 和 updated_at 也不会）。字段不是`null`，而是`0000-00-00 00:00:00`。这怎么可能？我做了一些研究，但我无法解决它。

架构.rb：

```
# encoding: UTF-8
# This file is auto-generated from the current state of the database. Instead
# of editing this file, please use the migrations feature of Active Record to
# incrementally modify your database, and then regenerate this schema definition.
#
# Note that this schema.rb definition is the authoritative source for your
# database schema. If you need to create the application database on another
# system, you should be using db:schema:load, not running all the migrations
# from scratch. The latter is a flawed and unsustainable approach (the more migrations
# you'll amass, the slower it'll run and the greater likelihood for issues).
#
# It's strongly recommended to check this file into your version control system.

ActiveRecord::Schema.define(:version => 20130306100623) do

  create_table "announcements", :force => true do |t|
    t.string   "title"
    t.text     "text"
    t.integer  "user_id"
    t.datetime "created_at", :null => false
    t.datetime "updated_at", :null => false
  end

  create_table "delayed_jobs", :force => true do |t|
    t.integer  "priority",   :default => 0
    t.integer  "attempts",   :default => 0
    t.text     "handler"
    t.text     "last_error"
    t.datetime "run_at"
    t.datetime "locked_at"
    t.datetime "failed_at"
    t.string   "locked_by"
    t.string   "queue"
    t.datetime "created_at",                :null => false
    t.datetime "updated_at",                :null => false
  end

  add_index "delayed_jobs", ["priority", "run_at"], :name => "delayed_jobs_priority"

  create_table "document_categories", :force => true do |t|
    t.string   "title"
    t.datetime "created_at", :null => false
    t.datetime "updated_at", :null => false
  end

  create_table "documents", :force => true do |t|
    t.string   "file_file_name"
    t.string   "file_content_type"
    t.integer  "file_file_size"
    t.datetime "file_updated_at"
    t.datetime "created_at",        :null => false
    t.datetime "updated_at",        :null => false
    t.integer  "user_id"
    t.string   "title"
    t.text     "description"
    t.string   "ancestry"
    t.boolean  "folder"
  end

  add_index "documents", ["ancestry"], :name => "index_documents_on_ancestry"

  create_table "inventory_items", :force => true do |t|
    t.string   "object"
    t.datetime "created_at", :null => false
    t.datetime "updated_at", :null => false
  end

  create_table "reservation_items", :force => true do |t|
    t.integer  "reservation_id"
    t.integer  "inventory_item_id"
    t.datetime "created_at",        :null => false
    t.datetime "updated_at",        :null => false
  end

  create_table "reservations", :force => true do |t|
    t.integer  "user_id"
    t.datetime "created_at", :null => false
    t.datetime "updated_at", :null => false
    t.datetime "start_time"
    t.datetime "end_time"
  end

  create_table "users", :force => true do |t|
    t.string   "first_name"
    t.string   "insertion"
    t.string   "last_name"
    t.string   "telephone_prefix"
    t.string   "telephone_suffix"
    t.string   "address"
    t.string   "number"
    t.string   "postal_code"
    t.string   "city"
    t.date     "birthdate"
    t.string   "email",                  :default => "", :null => false
    t.string   "encrypted_password",     :default => "", :null => false
    t.string   "reset_password_token"
    t.datetime "reset_password_sent_at"
    t.datetime "remember_created_at"
    t.integer  "sign_in_count",          :default => 0
    t.datetime "current_sign_in_at"
    t.datetime "last_sign_in_at"
    t.string   "current_sign_in_ip"
    t.string   "last_sign_in_ip"
    t.datetime "created_at",                             :null => false
    t.datetime "updated_at",                             :null => false
    t.string   "telephone_mobile"
    t.integer  "admin"
    t.string   "avatar_file_name"
    t.string   "avatar_content_type"
    t.integer  "avatar_file_size"
    t.datetime "avatar_updated_at"
    t.string   "sex"
    t.string   "lovo_email"
  end

  add_index "users", ["email"], :name => "index_users_on_email", :unique => true
  add_index "users", ["reset_password_token"], :name => "index_users_on_reset_password_token", :unique => true

end 
```

非常感谢！

# c# - 获取光标位置

> ID：15478757
> 
> 赞同：1
> 
> 时间：2013-03-18T14:04:37.933
> 
> 标签：c#, forms, user-controls, runtime

我有一个名为 TaskControl 和一个用于通过拖动`usercontrol`创建其他按钮的按钮。`usercontrols`我希望新的用户控件看起来与我的光标所在的坐标相同。下面是我的代码。它不想出现在那些坐标上，新的`usercontrol`出现在旧的后面。我的代码：

```
 private void button1_Click(object sender, EventArgs e)
    {

        Point localCoordinates = this.PointToClient(Cursor.Position);
        TaskControl t = new TaskControl();
        t.Location = new Point(Cursor.Position.X,Cursor.Position.Y);
        t.MouseDown += new MouseEventHandler(t_MouseDown);
        t.MouseMove += new MouseEventHandler(t_MouseMove);
        t.MouseUp += new MouseEventHandler(t_MouseUp);

        this.Controls.Add(t);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T14:06:43.897

您必须使用[Control.MousePosition](http://msdn.microsoft.com/it-it/library/system.windows.forms.control.mouseposition.aspx)静态属性来解决这个问题，它

> 获取鼠标光标在屏幕坐标中的位置。

将您的使用控件移动到检索的坐标后。请注意，这取决于您如何构建 UI，您可能需要将坐标转换为客户端。为此可以使用 [Control.PointToClient](http://msdn.microsoft.com/it-it/library/system.windows.forms.control.pointtoclient.aspx)静态方法，其中：

> 将指定屏幕点的位置计算为客户端坐标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T14:09:05.797

看一看[`Control.MousePosition`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.mouseposition.aspx)

> 获取鼠标光标在屏幕坐标中的位置。

# python - Python tkinter 绑定具有多个参数的函数

> ID：15478764
> 
> 赞同：2
> 
> 时间：2013-03-18T14:04:58.923
> 
> 标签：python, tkinter, arguments

我有一个一般性的问题，我真的找不到答案，所以希望你们能提供帮助。我有一个带有 3 个参数的函数，下面是我所拥有的示例。

```
def someFunction(self, event, string):

   do stuff ..

self.canvas.bind("<Button-1>", self.someFunction("Hello")) 
```

当我运行它时，我收到一条错误消息，说我传递了 someFunction 2 参数而不是 3。我不知道为什么..

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-18T14:06:40.117

在这里，您正在绑定（或无论如何尝试）的**结果**。`someFunction`这失败了，因为当 python 试图获取 的结果时`someFunction`，它调用它只传递 1 个参数 ( `"Hello"`)，而`someFunction`实际上需要 2 个显式参数。你可能想要这样的东西：

```
self.canvas.bind('<Button-1>',lambda event: self.someFunction(event,"Hello")) 
```

这绑定了一个传递正确参数的新函数（由创建`lambda`并环绕）。`self.someFunction`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-10T22:59:13.210

或者，

```
def someFunction(self, string):
   def fn(*arg)
      print string
   return fn

self.canvas.bind("<Button-1>",self.someFunction("Hello!")) 
```

# c# - 在运行时修改 linq 查询

> ID：15478769
> 
> 赞同：3
> 
> 时间：2013-03-18T14:05:20.953
> 
> 标签：c#, linq, entity-framework, extension-methods

**问题陈述**

假设我有一个搜索人名的查询：

```
var result = (from person in container.people select person)
             .Where(p => p.Name.Contains(some_criterion) 
```

这将被转换为包含以下 like 子句的 SQL 查询：

```
WHERE NAME LIKE '%some_criterion%' 
```

这有一些性能影响，因为数据库无法有效地使用 name 列上的索引（如果我没记错的话，索引扫描与索引搜索）。

为了解决这个问题，我可以决定只使用 StartsWith() 来代替，使用 like 子句生成查询，例如：

```
WHERE NAME LIKE 'some_criterion%' 
```

这使 SQL Server 能够使用索引查找并以牺牲某些功能为代价来提供性能。

我希望能够为用户提供一个选择：默认使用 StartsWith 的行为，但如果用户想要使用 Contains() 进行搜索的“增加灵活性”，则应该使用。

**我试过什么**

我认为这是微不足道的，并继续在字符串上实现了一个扩展方法。但当然，LINQ 不接受这一点并抛出异常。

现在，我当然可以继续使用 if 或 switch 语句并为每种情况创建一个查询，但我更愿意“在更高级别”或更一般地解决这个问题。简而言之：由于实际应用程序的复杂性，使用 if 语句来区分用例是不可行的。这会导致大量的重复和混乱。我真的很希望能够以某种方式封装不同的行为（包含、StartsWith、EndsWith）。

**问题**

我应该在哪里寻找或寻找什么？这是 IQueryables 可组合性的一个案例吗？我很纳闷！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-18T14:10:06.177

Rather than overcomplicate things, how about just using an if statement?

```
var query = from person in container.people 
            select person;

if (userWantsStartsWith)
{
    query = from p in query
            where p.Name.Contains(some_criterion)
            select p;
}
else
{
    query = from p in query
            where p.Name.StartsWith(some_criterion)
            select p;
} 
```

**Update**

If you really need something more complex try looking at [LinqKit](http://www.albahari.com/nutshell/linqkit.aspx). It allows you to do the following.

```
var stringFunction = Lambda.Expression((string s1, string s2) => s1.Contains(s2));

if (userWantsStartsWith)
{
    stringFunction = Lambda.Expression((string s1, string s2) => s1.StartsWith(s2));
}

var query = from p in container.people.AsExpandable()
            where stringFunction.Invoke(p.Name, some_criterion)
            select p; 
```

I believe this fulfils your requirement of

> I'd really like to be able to encapsulate the varying behavior (Contains, StartsWith, EndsWith) somehow.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T14:12:29.957

You can dynamically alter the query before enumerating it.

```
var query = container.people.AsQueryable();

if (contains)
{
    query = query.Where(p => p.Name.Contains(filter));
}
else
{
    query = query.Where(p => p.Name.StartsWith(filter));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T14:12:52.980

Try dis:

```
var result = (from person in container.people select person)
                .Where(p => some_bool_variable ? p.Name.Contains(some_criterium) : p.Name.StartsWith(some_criterium)); 
```

*The real life queries are quite huge and unioned with several others. This, like my problem states, isn't te solution I'm looking for*

Sinse your queries are huge: can't you just define stored procedure that handles everything and call it with specific to query parameters (probably several stored procedures that are called by main, e.g. one of em searches by Name, another - by Age, have different sort order and so on to keep code clear)?

# sql - 如何在Access sql中搜索可变日期

> ID：15478773
> 
> 赞同：0
> 
> 时间：2013-03-18T14:05:35.733
> 
> 标签：sql

我有点困惑为什么我的 ACCESS SQL 查询会有不同的行为......当我使用 NOW() 参数执行 SELECT 查询时，我得到了正确的结果。但是，如果我使用带有今天日期的 TempVar!Date 它返回 0...查询如下所示：

这个有效：

> 选择 [账户交易]。*, 类别。*, IIf([Categories].[Income/Expense]="Expense",-([Account Transactions]![Transaction Amount]),[Account Transactions]![Transaction Amount]) AS [Account Transactions] FROM [Account Transactions] LEFT JOIN Categories ON [Account Transactions].Category = Categories.ID WHERE month([Account Transactions].[Entry Date]) = month(Now());

这个不行：

> 选择 [账户交易]。*, 类别。*, IIf([Categories]. [Income/Expense]="Expense",-([Account Transactions]![Transaction Amount]),[Account Transactions]![Transaction Amount]) AS [Account Transactions] FROM [Account Transactions] LEFT JOIN Categories ON [Account Transactions].Category = Categories.ID WHERE month([Account Transactions].[Entry Date]) = month([TempVars]![Date]);

我需要第二个 - 使用我的变量来工作。b您的帮助将不胜感激。我测试了 tempvar 的值，没问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:21:48.947

尝试这个：

```
SELECT [Account Transactions].*, Categories.*, IIf([Categories].[Income/Expense]="Expense",-([Account Transactions]![Transaction Amount]),[Account Transactions]![Transaction Amount]) AS [Actual Amount]
FROM [Account Transactions]
LEFT JOIN Categories ON [Account Transactions].Category = Categories.ID
WHERE month([Account Transactions].[Entry Date]) = month([TempVars]![Date]); 
```

我删除了一些额外的空格并在需要的地方添加了星号。

您的 TempVars 值仅适用于您当前打开的 MS Access 会话。当你进入`?Application.TempVars("Date").Value`你的 VBA 窗口时你会得到什么？

# .net - 双数据类型的最小步骤是什么？（。网）

> ID：15478774
> 
> 赞同：1
> 
> 时间：2013-03-18T14:05:39.527
> 
> 标签：.net, numbers, double

我的问题有点理论，但实际上我在实践中需要它。

假设我们有两个**双**变量**X**和**Y**。**Y肯定是****X**的下一个双倍数（正如您已经知道的，我们不能将*任何*实数保留为*双*精度数，因为实数即使在 0 到 1 的区间内也是无限的）。

**(Y - X)**是常数吗？如果是，它的价值是什么？

PS 我的问题与 Microsoft.NET Framework 有关。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T14:11:08.663

.NET 中两个双精度值之间的最小差异是[Double.Epsilon](http://msdn.microsoft.com/en-us/library/system.double.epsilon.aspx)。

至于比较双精度值，请参阅[此 SO 问题](https://stackoverflow.com/questions/1398753/comparing-double-values-in-c-sharp)的答案以获取有用信息（正如公认的答案所说，应尽可能使用[小数而不是双精度）。](http://msdn.microsoft.com/en-us/library/system.decimal.aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-18T14:17:23.387

据我所知，没有框架方法可以从给定间隔内的给定值中找到下一个可表示的双精度或浮点值。值的下一个可表示数字`d`不是`d + Double.Epsilon`。对于较大的双精度值，连续双精度值之间的距离较大。`Double.Epsilon`是可表示的双精度之间的*最小距离，该距离仅在接近零的值时出现。*

在 C 或 C++ 库中，通常有用于此目的的函数，例如在 C++ 的 Boost 库中。我会看看我是否可以找到 C# 的实现

[http://www.boost.org/doc/libs/1_39_0/libs/math/doc/sf_and_dist/html/math_toolkit/special/next_float/nextafter.html](http://www.boost.org/doc/libs/1_39_0/libs/math/doc/sf_and_dist/html/math_toolkit/special/next_float/nextafter.html)

编辑：

C# 中的实现见这里

[下一个更高/更低的 IEEE 双精度数](https://stackoverflow.com/questions/1245870/next-higher-lower-ieee-double-precision-number)

# build - VS2012 自定义构建步骤 - 将输出视为内容

> ID：15478776
> 
> 赞同：3
> 
> 时间：2013-03-18T14:05:45.737
> 
> 标签：build, visual-studio-2012, msbuild

我目前正在将一个相当大的解决方案从 VS2008 迁移到 VS2012。迄今为止，该解决方案一直依赖于命令行构建的几个构建步骤，我想正确使用项目系统来执行这些构建步骤。我经历了各种选择，并决定在大多数需要它的 VC++ 项目中自定义构建步骤是有意义的。解决方案是 C++、C# 和 VB 的混合。

这些任务包括使用输入和输出相同的第三方实用程序构建主互操作程序集和处理输出文件。

我遇到了一些初期问题，但我大部分时间都在使用这种方法。剩下的问题是将这些附加输出部署到依赖项目之一。

考虑一下；我有一个第三方组件，给定 a.dll 的输入会产生两个输出，一个修改后的 a.dll 和 a_util.dll。当我有一个依赖于 a.dll 的项目时，我现在需要该项目将 a_util.dll 也拉到它的输出中。我希望 VS2012 中自定义构建步骤中的“将输出视为内容”字段在这方面有所帮助，但我只是在 UI 中使用单行，我找不到关于此选项的任何全面文档. 事实上，[MSDN 文档](http://msdn.microsoft.com/query/dev11.query?appId=Dev11IDEF1&l=EN-US&k=k%28VC.Project.VCCustomBuildStep.Command%29;k%28TargetFrameworkMoniker-.NETFramework,Version=v4.0%29;k%28TargetFrameworkMoniker-.NETFramework,Version=v4.0%29&rd=true)只是假装这个选项不存在。

如果有人可以帮助解释此选项或替代方法，那就太好了。

**编辑**

目前，我正在向每个依赖项目添加一个 BeforeBuild 目标，以将其他输出复制到该依赖项目中。这种方法的问题（虽然它有效）是维护问题之一。不幸的是，如果错过了这种类型的依赖，它会导致一个神秘的运行时错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-11T15:39:00.053

[这是 VS2013 文档的链接，上面](http://msdn.microsoft.com/en-us/library/ee126324(v=vs.120).aspx)写着：

将输出视为内容：此选项仅对 Windows 应用商店或 Windows Phone 应用有意义，它们包括 .appx 包中的所有内容文件。

# jquery - 我在哪里可以找到源函数定义？

> ID：15478779
> 
> 赞同：2
> 
> 时间：2013-03-18T14:05:53.717
> 
> 标签：jquery, html, datatables

我在这个网站上下载了datagrid的源代码。[http://www.datatables.net/](http://www.datatables.net/)。但是我在 JS 文件**jquery.dataTables.js中****找不到 dataTables() 的源代码**，该文件 在我的网页上绘制了实际的表格。

 **在我的 html 文件中，我通过以下方式调用 dataTable，

```
$(document).ready(function() {
    $('#example').dataTable();
} ); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T14:09:45.900

[http://ajax.aspnetcdn.com/ajax/jquery.dataTables/1.9.4/jquery.dataTables.js](http://ajax.aspnetcdn.com/ajax/jquery.dataTables/1.9.4/jquery.dataTables.js)

`ctrl+f` `$.fn.dataTable`

然后找到：

```
// jQuery aliases
$.fn.DataTable = DataTable;
$.fn.dataTable = DataTable;
$.fn.dataTableSettings = DataTable.settings;
$.fn.dataTableExt = DataTable.ext; 
```

所以，现在我们发现`DataTable`：

```
var DataTable = function( oInit )
{ 
```

就在顶部。

* * *

该`DataTables`库是它自己的对象库；`$.fn`他们所做的只是创建 jQuery 扩展，这些扩展只使用（即）指向自定义对象`jQuery.prototype`。所以基本上，在不丢失原始`DataTable`参考的情况下，您现在拥有：

```
/* $.fn       */./*alias*/ = /*Datatable var */
jQuery.prototype.dataTable = function( oInit ){
  // ...
} 
```**

# ios - 如何在点击 UIActionSheet 中的选项时呈现模式视图？

> ID：15478786
> 
> 赞同：0
> 
> 时间：2013-03-18T14:06:06.690
> 
> 标签：ios, objective-c, ios5, ios6, storyboard

我有我的主视图控制器，点击一个按钮会弹出一个操作表。我想要点击其中的一个选项来显示一个操作表。然而，尽管我进行了所有的搜索，但我似乎无法弄清楚。

我有以下代码：

```
- (void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex {
    NSString *buttonTitle = [actionSheet buttonTitleAtIndex:buttonIndex];

    if ([buttonTitle isEqualToString:@"Text"]) {
        AddTextViewController *addTextViewController = [self.storyboard instantiateViewControllerWithIdentifier:@"addTextViewController"];        
    } 
```

现在我实例化了视图控制器，我不知道该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T14:08:38.727

Add this line right after you instantiate it.

```
if ([buttonTitle isEqualToString:@"Text"]) {
    AddTextViewController *addTextViewController = [self.storyboard instantiateViewControllerWithIdentifier:@"addTextViewController"];        
    [self presentViewController:addTextViewController animated:YES completion:nil];
} 
```

**Note**

You can also create a custom segue in the Storyboard that presents your view, then instead of instantiating and presenting you can just perform your custom segue. Both work the same.

**Storyboard Method**

First click your segue in Storyboards, then give it an identifier in the info panel.

![Storyboard Segue Settings](../Images/9d1c365d53033f08f535f2e9d2519906.png)

Then you can replace your code with this and it should trigger the segue from your Storyboard.

```
if ([buttonTitle isEqualToString:@"Text"]) {
    [self performSegueWithIdentifier:@"infoSegue" sender:self];
} 
```

# ios - iOS 应用程序在安装时更新后处理脚本

> ID：15478797
> 
> 赞同：0
> 
> 时间：2013-03-18T14:06:29.213
> 
> 标签：ios, app-store, installation, post-processing

如果用户更新到特定版本，我想从应用程序临时文件夹中删除一些文件。

在更新和安装应用程序后，是否可以选择进行这种后期处理`App Store`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T14:16:05.417

不，不是直接的。

您必须在您的应用程序中包含这样的逻辑。您可以编写一个块来检查文件是否存在于`applicationDidFinishLaunching`函数中`dispatch_async`，以便在您的应用程序启动后在低优先级队列上运行它。

您还可以在块完成后在 userdefaults 中写入一个标志，以便在更新后仅执行一次。

# ruby-on-rails - 拒绝未经授权的用户编辑个人资料

> ID：15478798
> 
> 赞同：0
> 
> 时间：2013-03-18T14:06:31.243
> 
> 标签：ruby-on-rails

我正在尝试进行设置，以便用户在单击编辑不属于他们的个人资料时收到“未授权”消息。由于管理员可以编辑所有配置文件，因此该消息当然不应该出现给管理员。我之前在 Permission.rb 上做过这个，但是我去掉了这个文件来使用更基本的用户角色/授权。

我看不到如何为我的当前文件实现之前在 Permission.rb 上的内容。我尝试了一些解决方案，但它们没有加起来。如果有人能指出我正确的方向，那就太好了。我也是从头开始做这一切的，用户身份验证/授权。

index.html.erb：

```
<% @users.each do |user| %>
    <li>
        <% if current_user.admin? || current_user == @user %>
        <% end %>
        <%= link_to "Edit #{user} profile", user %>

            | <%= link_to "delete", user, method: :delete,
                                          data: { confirm: "You sure?"} %>
        </li>
        <% end %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T14:16:00.840

您为什么要让用户有机会编辑其他人的个人资料？

首先，您`if`的视图中应该有一个声明，您可以在其中显示编辑页面的链接。我想这会出现在每个用户的个人资料上，所以我想你的控制器中的代码是这样的：

```
def show
   @user = User.find(params[:id])
end 
```

那么在你看来，你应该有这样的东西：

```
<% if current_user.admin? || current_user == @user %>
   <%= link_to 'Edit Profile' , edit_user_path(@user) %>
<% end %> 
```

还有一种情况是，如果有人试图“强行”进入，就像尝试输入 url 一样，`www.yourapplication.com/users/6/edit`您可以在控制器中编写一个`before_filter`方法：

```
before_filter :check_privileges, only => [:edit, :update] 
```

然后在被调用的地方写一个方法`check_privileges`

```
def check_privileges
  unless current_user.admin? || current_user.id == params[:id]
     flash[:warning] = 'not authorized!'
     redirect_to root_path 
  end
end 
```

编辑：提问者编辑他的代码后，我显示错误：

你放得`end`太早了：

```
<% @users.each do |user| %>
    <li>
        <%= link_to user.name, user %>
        <% if current_user.admin? || current_user == @user %>
            <%= link_to "Edit #{user} profile", user %>
            | <%= link_to "delete", user, method: :delete,
                                          data: { confirm: "You sure?"} %>
        <% end %>
  </li>
<% end %> 
```

# java - bean 中的 Spring JavaConfig 属性未设置？

> ID：15478806
> 
> 赞同：6
> 
> 时间：2013-03-18T14:06:53.507
> 
> 标签：java, spring, spring-mvc

我正在考虑将 Spring JavaConfig 与一些属性文件一起使用，但 bean 中的属性没有设置？在 bean 中没有设置？

这是我的网络配置：

```
@Configuration
@EnableWebMvc
@PropertySource(value = "classpath:application.properties")
@Import(DatabaseConfig.class)
@ImportResource("/WEB-INF/applicationContext.xml")
public class WebMVCConfig extends WebMvcConfigurerAdapter {

    private static final String MESSAGE_SOURCE = "/WEB-INF/classes/messages";

    private static final Logger logger = LoggerFactory.getLogger(WebMVCConfig.class);

    @Value("${rt.setPassword}")
    private String RTPassword;

    @Value("${rt.setUrl}")
    private String RTURL;

    @Value("${rt.setUser}")
    private String RTUser;

    @Bean
    public  ViewResolver resolver() {
        UrlBasedViewResolver url = new UrlBasedViewResolver();
        url.setPrefix("/WEB-INF/view/");
        url.setViewClass(JstlView.class);
        url.setSuffix(".jsp");
        return url;
    }

    @Bean(name = "messageSource")
    public MessageSource configureMessageSource() {
        logger.debug("setting up message source");
        ReloadableResourceBundleMessageSource messageSource = new ReloadableResourceBundleMessageSource();
        messageSource.setBasename(MESSAGE_SOURCE);
        messageSource.setCacheSeconds(5);
        messageSource.setDefaultEncoding("UTF-8");
        return messageSource;
    }

    @Bean
    public LocaleResolver localeResolver() {
        SessionLocaleResolver lr = new SessionLocaleResolver();
        lr.setDefaultLocale(Locale.ENGLISH);
        return lr;
    }

    @Override
    public void addResourceHandlers(ResourceHandlerRegistry registry) {
        logger.debug("setting up resource handlers");
        registry.addResourceHandler("/resources/").addResourceLocations("/resources/**");
    }

    @Override
    public void configureDefaultServletHandling(DefaultServletHandlerConfigurer configurer) {
        logger.debug("configureDefaultServletHandling");
        configurer.enable();
    }

    @Override
    public void addInterceptors(final InterceptorRegistry registry) {
        registry.addInterceptor(new LocaleChangeInterceptor());
    }

    @Bean
    public SimpleMappingExceptionResolver simpleMappingExceptionResolver() {
        SimpleMappingExceptionResolver b = new SimpleMappingExceptionResolver();

        Properties mappings = new Properties();
        mappings.put("org.springframework.web.servlet.PageNotFound", "p404");
        mappings.put("org.springframework.dao.DataAccessException", "dataAccessFailure");
        mappings.put("org.springframework.transaction.TransactionException", "dataAccessFailure");
        b.setExceptionMappings(mappings);
        return b;
    }

    @Bean
    public RequestTrackerConfig requestTrackerConfig()
    {
        RequestTrackerConfig tr = new RequestTrackerConfig();
        tr.setPassword(RTPassword);
        tr.setUrl(RTURL);
        tr.setUser(RTUser);

        return tr;
    }

} 
```

**tr.url 中的值是“rt.setUrl”而不是 application.properties 中的值？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T14:15:50.403

我不是100％，但我认为你`@PropertySource`不太对。代替

`@PropertySource(value = "classpath:application.properties")`

它应该只是：

`@PropertySource("classpath:application.properties")`

基于此：

[Spring PropertySource 文档](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/context/annotation/PropertySource.html)

此外，基于上面的链接，并且由于您提到您正在转换为 java config 方法而不是 xml，我认为以下可能是您问题的解决方案：

> 解析和@Value 注释中的${...} 占位符 为了使用PropertySource 中的属性解析定义中的${...} 占位符或@Value 注释，必须注册一个PropertySourcesPlaceholderConfigurer。这在 XML 中使用时会自动发生，但在使用 @Configuration 类时必须使用静态 @Bean 方法显式注册。有关详细信息和示例，请参阅 @Configuration Javadoc 的“使用外部值”部分和 @Bean Javadoc 的“关于 BeanFactoryPostProcessor-returning @Bean 方法的说明”。

上面链接中的示例是我通常的做法：

```
 @Configuration
 @PropertySource("classpath:/com/myco/app.properties")
 public class AppConfig {
     @Autowired
     Environment env;

     @Bean
     public TestBean testBean() {
         TestBean testBean = new TestBean();
         testBean.setName(env.getProperty("testbean.name"));
         return testBean;
    }
 } 
```

所以在顶部添加：

```
@Autowired
Environment env; 
```

然后在您的方法中使用：

```
tr.setPassword(env.getProperty("rt.setPassword")); 
```

对于剩余的属性值，依此类推。我只是不熟悉你这样做的方式。我知道上述方法会起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-28T08:47:34.413

除了@ ssn771 答案涉及注入`Environment`并通过它检索属性，这确实是建议的方法，[这是我作为一种解决方法所做的，](https://stackoverflow.com/a/16772991/185723)而无需更改POJO`@Value`中使用的方式。`@Configuration`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-14T08:55:19.823

在许多建议的事情中，最重要的是您需要`PropertySourcesPlaceholderConfigurer`在 Spring 3.1+（或`PropertyPlaceholderConfigurer`Spring 3.0）中进行配置。`static`如果您希望将其应用于配置类（使用`@Value`注释） ，则必须如此。

```
@Bean
public static PropertySourcesPlaceholderConfigurer propertyPlaceholderConfigurer() {
    return new PropertySourcesPlaceholderConfigurer();
} 
```

来自 PropertySourcesPlaceholderConfigurer 的 javadoc：

> 此类被设计为 Spring 3.1 应用程序中 PropertyPlaceholderConfigurer 的一般替代品。它默认用于支持在 spring-context-3.1 XSD 中使用的 property-placeholder 元素，而 spring-context 版本 <= 3.0 默认为 PropertyPlaceholderConfigurer 以确保向后兼容性。有关完整的详细信息，请参阅 spring-context XSD 文档。

# c++ - 对于类型修改特征，我是否应该为 typename::transform<...>::type 提供一个模板类型定义（又名使用）便利包装器？

> ID：15478807
> 
> 赞同：3
> 
> 时间：2013-03-18T14:06:56.203
> 
> 标签：c++, c++11, typetraits

我想知道随着模板类型定义的可用性，我应该为转换类型的类提供方便的包装器。考虑这个（无用的）示例：

```
template< T >
struct whatever
{
   typedef typename std::conditional< sizeof(T) <= sizeof(void*),
                                      int, long >::type type;
}; 
```

这里，`std::conditional`来自`transform`标题，与 . 一起使用`typename transform<...>::type`。此外，`whatever`它本身也是 a`transform`并以相同的方式使用。

随着模板类型定义（又名`using`）的可用性，我可以将接口更改为：

```
template< T >
using whatever = typename std::conditional< sizeof(T) <= sizeof(void*),
                                            int, long >::type; 
```

这简化了使用。对于所有这些情况都可以这样做，但是由于需要（部分）专业化，您有时会得到一个实现类和一个包装器。如果是`std::conditional`，您可能最终会将其移至`std::impl::conditional<...>`并提供另一个包装器作为

```
namespace std
{
  namespace impl
  {
    // "classic" implementation of std::conditional
  }

  template< bool B, typename T, typename F >
  using conditional = typename impl::conditional< B, T, F >::type;
} 
```

这就留下了我应该提供什么接口/API 的问题。我看到了提供包装器的一个优点：它可以防止用户错误。例如，请参阅[此](https://stackoverflow.com/q/15460637/2073257)问题和答案。

为了保留现有界面，我看到以下几点：

*   一致性。这就是类型特征，基本上每个人都在使用
*   分离变压器和变换的结果。您可以将变压器作为类型传递，在`whatever`上述情况下，这将不再可能。
*   通过防止`impl`专业化所需的解决方案减少代码。

我想听听支持或反对提供“新”界面的论点，而不仅仅是“我更喜欢第二种方法”之类的意见。我有兴趣找出需要一种或另一种方法或它无法工作/扩展的情况。

老实说，问题主要是我缺乏模板类型定义的经验，所以如果你确实有一些实际经验，请分享它的好与坏，以及我是否应该将`typename transform<...>::type`API 视为过时的C++11 与否。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T14:44:27.467

我总是做以下事情：

1.  在某些命名空间（impl、detail 等）内部有做实际工作的类。
2.  在外面，有模板别名来清理调用代码。

例如，如果我要重写 std::remove_reference，我会这样做：

```
namespace detail {
    template <typename T> struct remove_reference
    {
        using type = T;
    };
    template <typename T> struct remove_reference<T&>
    {
        using type = T;
    };
    template <typename T> struct remove_reference<T&&>
    {
        using type = T;
    };
}

template <typename T>
using remove_reference = typename detail::remove_reference<T>::type; 
```

我没有编译上面的代码，所以如果我打错了请不要拍我。

一个好处是调用站点更加清晰。一个潜在的缺点是，如果您正在编写更高阶的通用代码并依赖于某个类型函数内部存在 ::type，例如

```
template <template <typename...> class F, typename... Ts>
using apply = typename F<Ts...>::type; 
```

尽管您可能可以将 using 行更改为

```
using apply = F<Ts...>; 
```

没有任何伤害。这一切都归结为您的其余代码正在做什么。如果您的类型函数需要具有特定接口（::type 或 ::value），那么您需要遵守它们。

# wix - WIX：创建 2 个共享组件的安装程序

> ID：15478814
> 
> 赞同：1
> 
> 时间：2013-03-18T14:07:08.747
> 
> 标签：wix, windows-installer, wix3.5, wix3.6

我目前有一个 WIX 安装程序，其中包含我产品的所有功能。它是一个客户端服务器系统，因此构成服务器端和客户端的功能相当少。

我想介绍一个单独的较小的安装程序，它只包含客户端以使其更易于部署（例如，它要小一些）。

到目前为止，我所做的是创建一个 wixlib，其中包含为客户端定义的所有组件，我在主安装程序和较小的安装程序中引用了它。

这是做这样的事情的正确方法，还是我应该使用合并模块？我希望它能够正常运行，例如，如果您尝试使用较小的安装程序意外降级客户端，而后来的客户端是使用较大的安装程序安装的。

我希望这是有道理的，在此先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T14:22:41.000

如果您将组件标记为共享并且不违反组件规则，则应该没问题。合并模块实现与片段和库相同的封装目标，但在其他 MSI 创作工具（如 InstallShield）中受支持。Frags 和 libs 是 WiX 唯一的东西。

另一种方法是不共享组件，而是让客户端安装程序和服务器安装程序成为他们自己的安装程序。然后，您可以根据需要使用 Burn 将它们链接在一起（或不链接）。

# android - ksoap Propertyinfo 类型更改

> ID：15478819
> 
> 赞同：2
> 
> 时间：2013-03-18T14:07:24.277
> 
> 标签：android, soap, service, web, ksoap

我有一个我无法解决的小问题。默认情况下，propertyingo 值为 anyType：

```
 <n1:Role i:type="d:anyType"> 
```

如何将此类型更改为 a:User ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T14:16:51.953

如果我正确理解您的问题，您可以使用 setType 方法：您创建您的 PropertyInfo 对象，然后在您的代码中设置您的自定义类型：

```
 PropertyInfo role = new PropertyInfo();
role.setType(User.class); 
```

或者另一种方法是将您的自定义类型（Class 的实例）分配给以下`type`字段`PropertyInfo`：

`role.type = User.Class;`

# java - Java Google App Engine 后端上的 HardDeadlineExceededError

> ID：15478832
> 
> 赞同：1
> 
> 时间：2013-03-18T14:08:18.333
> 
> 标签：java, google-app-engine

经过大约一天的处理后，Google App Engine 后端是否总是以 HardDeadLineExceeded 结束？

在我的后端 (B8) 进程运行大约一天半之后，它总是会因 HardDeadLineExceeded 异常而关闭。在开发服务器上，完成相同的排队任务大约需要两天时间。[根据https://developers.google.com/appengine/docs/python/backends/overview#ShutdownGoogle](https://developers.google.com/appengine/docs/python/backends/overview#ShutdownGoogle)，我认为后端可能会无限期运行，但不能保证。但是，我所看到的几乎可以肯定的是后端将在一天左右的时间内终止，这似乎更像是一种策略而不是偶然，因为：-“运行后端的机器重新启动，迫使你的后端移动到不同的机器。” 或 -“App Engine 需要将您的后端移动到另一台机器上以改善负载分布。”

我的任务是使用 Stax 解析巨大的 XML 文件，并将结果中的一组 CSV 文件写入 blobstore。

现在“始终开启”的首要功能已经消失，似乎除了处理关闭请求之外别无选择，但这将涉及保存 StAX XML Parser 游标状态（这可能是不可能的）并写出输出的文件经常返回到 blobstore。所以......后端并不擅长成为后端，imo。

# c++ - C++ - 在循环内声明引用变量？

> ID：15478834
> 
> 赞同：0
> 
> 时间：2013-03-18T14:08:28.757
> 
> 标签：c++, variables, loops, reference, declaration

据我所知，在循环内声明 POD 类型或原始类型的变量是可以的（没有开销）。

参考变量呢？
在循环中声明引用变量对性能有影响吗？

例如，变量引用向量，如下所示：

```
vector<vector<int> > data (100, vector<int> (100));
for (int i = 0; i < 100; ++i) {
    vector<int> &row = data[i];
    ...
} 
```

不会有开销，对吧？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T14:11:03.513

从性能的角度来看，引用在计算上与指针一样复杂（并且通常以相同的方式在内部实现）。

初始化引用本身并没有比初始化指针更多的开销。

但是，根据您的用例，您可能会发现使用迭代器更容易且同样有效（如果稍微冗长的话）。

```
vector<vector<int> > data (100, vector<int> (100));
for (vector<vector<int> >::iterator row = data.begin(); row != data.end(); ++row) {
    // (*row)[0] = 1;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T14:11:10.320

应该没有开销，因为引用基本上是一个内存位置。在 32 位应用程序中，内存位置为 4 个字节，因此在循环内声明该内容与声明`int`: 可忽略不计的开销相同。

# java - 什么是用于限制文件写入单个目录的简单 Java 安全策略？

> ID：15478835
> 
> 赞同：2
> 
> 时间：2013-03-18T14:08:33.280
> 
> 标签：java, file-io, security-policy

我开始 Java 课程的学生开始学习文件 I/O，他们的一个项目涉及删除和重命名文件。我可以想出几十种可能出错的方法。

因此，使用 Java 的安全框架来限制他们的程序重命名、删除或覆盖不包含在特定目录中的文件会很有用。在目录之外阅读是可以的，而且该政策不需要是超级防弹的——这更多是为了防止意外损坏，而不是防止我的学生的恶意行为。

但是，我在学校的编程课程之外没有做过任何真正的 Java 工作，所以我不知道如何编写或激活策略文件。我可以使用什么简单的策略文件来实现这一点，以及在运行学生的代码时如何激活它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T15:36:59.787

这是一个简单的策略文件，您可以使用它来限制对某个目录的文件写入。

```
grant codeBase "file:/some/root/path/sandbox/-" {
    permission java.io.FilePermission "*", "read";
    permission java.io.FilePermission "/tmp/*", "read, write";
}; 
```

它假定您将从 暂存和启动您的代码`/some/root/path/sandbox`，并且您将仅授予*对该*文件`/tmp`夹的写入权限。您可以根据需要添加额外的读取和写入权限。要调用，请使用以下命令行启动您的代码：

> java -Djava.security.manager -Djava.security.policy=student.policy YourClassName

*这假定您将策略存储在一个名为 student.policy 的文件中，该文件与您从中启动代码的文件夹位于同一文件夹中*

# ajax - 如何 AJAX 化 Blogger 上的随机按钮？

> ID：15478837
> 
> 赞同：1
> 
> 时间：2013-03-18T14:08:34.290
> 
> 标签：ajax, button, random, blogger

我正在使用脚本在我的博客 ( [https://github.com/swook/jquery-ajaxify-plugin](https://github.com/swook/jquery-ajaxify-plugin) ) 上使用 AJAX，因此用户可以在浏览不同页面时通过音乐播放器收听音乐而不会中断。

除随机按钮外，一切正常。我想对随机按钮进行 AJAX 化。

问题是当我点击链接时，页面会重新加载。

您可以在此处检查不同的问题：http: [//www.julienlussiez.com/p/test_20.html](http://www.julienlussiez.com/p/test_20.html)（有 3 个具有不同脚本的随机按钮）

测试＃1：我有这个[我在这段代码上尝试了很多东西，但似乎没有任何效果]：

```
 <div id="myLuckyPost"><a href="#random" onclick="feelingLucky();return false;" title="Aléatoire">Aléatoire</a></div>
<div id='head'></div>

<script type='text/javascript'>
//<![CDATA[
function showLucky(root){
    var feed = root.feed;
    var entries = feed.entry || [];
    var entry = feed.entry[0];
      for (var j = 0; j < entry.link.length; ++j) {
       if (entry.link[j].rel == "alternate") {
       window.location = entry.link[j].href;
       }
      }
   }

function fetchLuck(luck){
    script = document.createElement('script');
    script.src = '/feeds/posts/summary?start-index='+luck+'&max-results=1&alt=json-in-script&callback=showLucky';
    script.type = 'text/javascript';
    document.getElementsByTagName('head')[0].appendChild(script);
   }
function readLucky(root){
    var feed = root.feed;
    var total = parseInt(feed.openSearch$totalResults.$t,10);
    var luckyNumber = Math.floor(Math.random()*total);
    luckyNumber++;
    fetchLuck(luckyNumber);
    }

function feelingLucky(e){
    var script = document.createElement('script'); 
    script.type = 'text/javascript';
    script.src = '/feeds/posts/summary?max-results=0&alt=json-in-script&callback=readLucky';
    document.getElementsByTagName('head')[0].appendChild(script);
    if(e && e.stopPropagation) {
        e.stopPropagation();
    } else {
        e = window.event;
        e.cancelBubble = true;
    }

    return false;
}
//]]>
</script> 
```

测试#2：使用另一个脚本来随机化文章。问题还是一样。

```
<script>
<!--
/*
Random link button- By JavaScript Kit (http://javascriptkit.com)
Over 300+ free scripts!
This credit MUST stay intact for use
*/

//specify random links below. You can have as many as you want

var randomlinks=new Array()

randomlinks[0]="http://www.julienlussiez.com/2013/01/le-repos-du-fou_21.html"
randomlinks[1]="http://www.julienlussiez.com/2012/11/dissonance-3.html"
randomlinks[2]="http://www.julienlussiez.com/2012/10/renaitre.html"
randomlinks[3]="http://www.julienlussiez.com/2013/01/defaillance.html"
randomlinks[4]="http://www.julienlussiez.com/2012/08/fragile-2012.html"

function randomlink(){
window.location=randomlinks[Math.floor(Math.random()*randomlinks.length)]
}

//-->
</script>
<form>
<p><input type="button" name="B1" value="Aléatoire" onclick="randomlink(); return false;" /></p> </form> 
```

测试#3：使用另一个脚本来随机化文章。问题还是一样。

```
<script>
/* Simple Random Posts function for Blogger
 * Copyright 2012 Yu-Jie Lin
 * Licensed under the MIT License
 */
function blogger_random_post(){
  // You can replace the value with your blog ID
  var blogID = $('#blogID').val();
  // for example:
  //  blogID = "4586487713356156869";
  var BLOGGER_POSTS_API = "http://www.julienlussiez.com/feeds/posts/summary";
  // appending necessary parameters
  BLOGGER_POSTS_API += "?alt=json-in-script&max-results=1&callback=?";
  // replacing blogID with value
  BLOGGER_POSTS_API = BLOGGER_POSTS_API.replace('blogID', blogID.toString());
  $('#btn-blogger-random').text('Tossing dice...');
  // retrieving posts count
  $.getJSON(BLOGGER_POSTS_API, function(data){
    var posts_count = parseInt(data.feed.openSearch$totalResults.$t);
    // index is 1-based
    var index = Math.floor(Math.random() * posts_count) + 1;
    // retrieving post link
    $.getJSON(BLOGGER_POSTS_API + '&start-index=' + index, function(data){
      $.each(data.feed.entry[0].link, function(idx, link){
        if (link.rel == 'alternate')
          // redirecting
          document.location.href = link.href;
      });
    });
  });
}
$(function(){
  $('#btn-blogger-random').click(blogger_random_post);
});
</script>
<label>Blog ID <input id="blogID" value="4586487713356156869"/></label>
<button id="btn-blogger-random">I'm Feeling Lucky &raquo;</button> 
```

谢谢！如果你有一些线索，那就太好了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T14:11:54.250

你必须`stopPropagation`。

为此，您可以添加`return false;`到函数的末尾。

请参阅[如何停止传播](https://stackoverflow.com/questions/4735006/javascript-how-to-enable-stoppropagation)

如果它不起作用，您可以添加

```
// event is the Event object
if (event.preventDefault) {
  event.preventDefault();
}
event.returnValue = false; 
```

见[Alsacreation（法语 ^^）](http://www.alsacreations.com/article/lire/578-La-gestion-des-evenements-en-JavaScript.html)

这`event`是一个你必须传递给调用者的对象......

```
<div id="myLuckyPost"><a href="#random" onclick="feelingLucky(event)" title="">BD Aléatoire</a></div>

function feelingLucky(event){
  //now you can use event.stopPropagation...

} 
```

您也可以使用 检索此对象`window.event`，但它不是跨浏览器！请参阅[有关 Javascript 事件对象的其他主题](https://stackoverflow.com/questions/5849370/get-the-event-object-in-an-event-handling-function-without-pass-the-event-object)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T12:55:35.777

只需将您现有的`feelingLucky`功能更改为

```
function feelingLucky(e){
    var script = document.createElement('script'); 
    script.type = 'text/javascript';
    script.src = '/feeds/posts/summary?max-results=0&alt=json-in-script&callback=readLucky';
    document.getElementsByTagName('head')[0].appendChild(script);
    if(e && e.stopPropagation) {
        e.stopPropagation();
    } else {
        e = window.event;
        e.cancelBubble = true;
    }

    return false;
} 
```

如果它不起作用，你的问题出在`'/feeds/posts/summary?max-results=0&alt=json-in-script&callback=readLucky'`页面或 ajaxify.js 中

**主意**

您可以尝试将您的更改`<a>`为另一个元素，例如`<span>`.

# java - 从 XML 到 Java 的字符编码

> ID：15478844
> 
> 赞同：0
> 
> 时间：2013-03-18T14:08:56.773
> 
> 标签：java, xml, http, encoding

```
 <?xml version="1.0" encoding="UTF-8"?> 
```

我将仅提取一些我认为有意义的代码。

我正在通过 http 请求从一个 xml 中读取一些信息，如下所示：

```
 // defaultHttpClient
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);

        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        xml = EntityUtils.toString(httpEntity); 
```

如果我将字符串**xml**打印到屏幕上，我已经可以看到编码存在一些问题

然后返回一个文件我有这个

```
 Document doc = null;
        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();

        DocumentBuilder db = dbf.newDocumentBuilder();

        InputSource is = new InputSource();
        is.setCharacterStream(new StringReader(xml));

        doc = db.parse(is); 
```

尽管我从 http 请求中正确获取了信息，但在显示数据时我遇到了字符编码问题。

我已经尝试过**is.setEncoding("UTF-8")**但没有奏效。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T14:14:13.717

问题是您将 xml 转换为字符串（字符），不要这样做（您很可能使用了错误的编码并损坏了 xml）。 *将 xml 视为二进制数据（字节）*。

您可以使用`EntityUtils.toByteArray`（好的），或者您可以将 HttpEntity 流直接传递给 xml 解析器（理想）。

# .htaccess - How to Block a specific [Query String] Url via .htaccess

> ID：15478850
> 
> 赞同：0
> 
> 时间：2013-03-18T14:09:08.647
> 
> 标签：.htaccess, url, block

I'm very confused right now, I don't know how to block a specific QUERY STRING url via .htaccess file, well actually I want to block this type of url :

```
test.php?q=RANDOMTEXT=&tl=The%20path%20ends 
```

If anyone knows how to solve this issue please let me know and thank you in advance (y)

# javascript - 使用jsf中的json将数据从bean发送到javascript

> ID：15478851
> 
> 赞同：5
> 
> 时间：2013-03-18T14:09:11.887
> 
> 标签：javascript, json, jsf

我想将我的数组列表从 managedBean 发送到 javascript 代码，

我的豆在这里：

```
public void getDataAsJson(){
    String [] dizi={"Tokyo","Jakarta","New York","Seoul",
              "Manila","Mumbai","Sao Paulo","Mexico City",
              "Dehli","Osaka","Cairo","Kolkata",
              "Los Angeles","Shanghai","Moscow","Beijing",
              "Buenos Aires","Guangzhou","Shenzhen","Istanbul"};

    Random rnd =new Random();

    JSONObject obj= new JSONObject();
    for (int i = 0; i < dizi.length; i++) 
        obj.put(dizi[i], new Integer(rnd.nextInt(80)));
} 
```

我的 javascript 代码在 xhtml 页面中：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script type="text/javascript">
<!--

$(function () {

    var chart;
    $(document).ready(function() {
        chart = new Highcharts.Chart({
            chart: {
                renderTo: 'container',
                zoomType: 'xy'
            },
            title: {
                text: 'avarage'
            },
            subtitle: {
                text: ''
            },
            xAxis: [{
                gridLineWidth: 0.5,
                categories: [// here is my city names which come from mybean]
            }],
            yAxis: [{ // Primary yAxis
                labels: {
                    formatter: function() {
                        return this.value;
                    },
                    style: {
                        color: '#89A54E'
                    }
                },
                title: {
                    text: 'avarage',
                    style: {
                        color: '#89A54E'
                    }
                }
            }],

            series: [{
                name: 'avarage',
                color: '#89A54E',
                type: 'spline',
                data: [// // here is my city's avarage which come from mybean],
                       labels: {
                        rotation: -90,
                        align: 'right',
                        style: {
                            fontSize: '13px',
                            fontFamily: 'Verdana, sans-serif'
                        }
                    }
            }]
        });
    });
});
//-->
</script> 
```

这是我在 xhtml 页面中的正文：

```
<body>   
  <script src="http://code.highcharts.com/highcharts.js"></script>
  <div id="container" style="min-width: 400px; height: 400px; margin: 0 auto"></div>
</body> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-18T14:30:45.340

您需要了解 JSF 在这个问题的上下文中仅仅是一个 HTML/JS 代码生成器。

您只需要让 JSF以这样的方式**打印**所需的数据，即它以语法上有效的 JS 代码结束。

```
categories: #{bean.dataAsJson} 
```

其中`getDataAsJson()`返回一个`String`代表所需的 JSON 代码。例如*基本上*：

```
public String getDataAsJson() {
    return "['foo', 'bar', 'baz']";
} 
```

要验证结果，请在浏览器中右键单击页面并执行*查看源代码*。

```
categories: ['foo', 'bar', 'baz'] 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2019-05-04T16:13:22.840

通过 JSF Bean 将数据发送到 javascript 例程不是一个好主意，但我的解决方案是使用 java web 服务或 JAX-RS。Java Web 服务包含 2 个类，JaxRsActivator 和资源类。这是 JaxRsActivator 的源代码：

```
package service;

import javax.ws.rs.ApplicationPath;
import javax.ws.rs.core.Application;

@ApplicationPath("/rest")
public class JaxRsActivator extends Application {
} 
```

这是资源类的源代码。

```
package service;

import static javax.ws.rs.core.MediaType.TEXT_PLAIN;
import javax.ws.rs.GET;
import javax.ws.rs.Path;
import javax.ws.rs.Produces;

@Path("/resource")
@Produces(TEXT_PLAIN)
public class resource {

@GET
@Path("cities")
public String dizi() {
    String s = "{\"Tokyo\",\"Jakarta\",\"New York\",\"Seoul\",\r\n" + 
            "\"Manila\",\"Mumbai\",\"Sao Paulo\",\"Mexico City\",\r\n" + 
            "\"Dehli\",\"Osaka\",\"Cairo\",\"Kolkata\",\r\n" + 
            "\"Los Angeles\",\"Shanghai\",\"Moscow\",\"Beijing\",\r\n" + 
            "\"Buenos Aires\",\"Guangzhou\",\"Shenzhen\",\"Istanbul\"};\r\n";
    return s;
} 
```

}

现在对我们的 JavaScript 进行修改。将用于生成图表的匿名函数设为命名函数，例如：generateChart(CityData) 并使用数据修改行：变为数据：CityData，您的 JavaScript 以：

```
$(function () {
    var xhr = new XMLHttpRequest();
    // replace the dots
    var url = "http://localhost:8080/........../resource/cities";           

    xhr.onreadystatechange = function() {
    // Check if fetch request is done
     if (xhr.readyState == 4 && xhr.status == 200) { 
        console.log(xhr.responseText);
        // Parse the JSON string
        var jsonData = eval(xhr.responseText);
        generateChart(jsonData);
        }
    };

    // Do the HTTP call using the url variable we specified above
    xhr.open("GET", url, true);
    xhr.send();

function generateChart(CityData) {
    // put your code for generating your chart
    // modify line
    data: CityData
} 
```

// JavaScript 结束

将此 JavaScript 也放在 JSF 页面的末尾。页面加载后启动 JavaScript 数据加载，数据加载后开始图表生成。

成功。

# winapi - WinAPI: Handling the Left mouse double click for supressing the first click?

> ID：15478852
> 
> 赞同：0
> 
> 时间：2013-03-18T14:09:19.937
> 
> 标签：winapi

How can I handle left mouse double click events in Windows by suppressing the first click events.For ex: Left mouse single click highlights the image object and double click zooms the image, but for now I want on double click not to highlight the image object?

This happens probably the sequence of events triggered on left mouse double click are `WM_LBUTTONDOWN`, `WM_LBUTTONUP`, `WM_LBUTTONDBLCLK`, and `WM_LBUTTONUP`. i.e it triggers the `WM_LBUTTONDOWN`, so how do I handle this?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T17:19:31.863

你不能压制这种行为。您可以做的是在第一次单击时启动一次性计时器，其中间隔设置为报告的毫秒数`GetDoubleClickTime()`。如果发生双击，请停止计时器并执行双击逻辑。如果计时器到时，请停止计时器并改为执行单击逻辑。

# c++ - string to boost::uint64_t fails with lexical_cast and stringsteam

> ID：15478858
> 
> 赞同：1
> 
> 时间：2013-03-18T14:09:36.573
> 
> 标签：c++, boost, 64-bit

I am trying to transform a string to a `boost::uint64_t` the contents of `pvalue` are `12345678901234567890`. the code I'm using right now is:

```
void setAttribute(EnumAttrTyoe pname, const void *pvalue) {
    if (pname == SESS_ID) {
        const char *raw_sess_id = reinterpret_cast<const char*>(pvalue);
        std::string str_sess_id(raw_sess_id);
        std::cout << "Trying to open session id: '" << str_sess_id << "'\n";
        m_session_id = boost::lexical_cast<unsigned long long>(str_sess_id);
    }
} 
```

This one throws an exception with message "bad lexical cast: source type value could not be interpreted as target." If instead I use this code:

```
void setAttribute(EnumAttrTyoe pname, const void *pvalue) {
    if (pname == SESS_ID) {
        const char *raw_sess_id = reinterpret_cast<const char*>(pvalue);
        std::string str_sess_id(raw_sess_id);
        std::stringstream ss;
        ss << raw_sess_id;
        ss >> m_session_id;
    }
} 
```

it goes through but the value of `m_session_id` is 0\. I have not yet check the flags of `ss` but I don't need to be a genious to know it fails. Any ideas what to do now?

**UPDATE** No C++11, since I cannot use it, and my compiler is VC++ 2008, boost version 1.43.0.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T14:17:11.297

这段代码对我有用：

```
#include <sstream>
#include <cstdint>
#include <iostream>

int main()
{
   std::stringstream ss;
   ss << "12345678901234567890";

   std::uint64_t n = 0;
   ss >> n;

   std::cout << n << "\n";
} 
```

在[http://liveworkspace.org](http://liveworkspace.org)输出：

> 标准输出：12345678901234567890

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T15:39:48.667

我认为您输入的 C 样式字符串不是您认为的那样。`boost::lexical_cast`在 boost 1.42 上，这种用法对我有用：

```
#include <iostream>
#include <boost/lexical_cast.hpp>
#include <boost/cstdint.hpp>

int main() {
   std::string s = "12345678901234567890";
   boost::uint64_t i = boost::lexical_cast<boost::uint64_t>(s);
   std::cout << i << '\n';
   return 0;
} 
```

我的猜测是您的输入不是以零结尾的，具有您不期望的后缀，或者具有像 UTF16 这样的替代编码。或者它甚至不是一个字符串。

# sql - 在发票上创建正确的数量*价格总和时遇到问题

> ID：15478869
> 
> 赞同：0
> 
> 时间：2013-03-18T14:10:04.680
> 
> 标签：sql, oracle, toad, invoices

我正在创建一张发票表，将每个项目分组为年份，使用 Toad for Oracle 进行查询。

我目前正在做的是使用与我的视图相同的 FROM 和 WHERE 子句（因为这些数据来自多个表）

```
Select DISTINCT 
SUM(Credits * Credit_Price) as "Cost", to_char(START_DATE, 'YYYY') as "YEAR", 
PERSON_ID, ITEM_TYPE
[...]
WHERE
[...]
to_char(START_DATE, 'YYYY') = '2012' 
```

当我查看我创建的视图中的成本时，我看到相应人员的成本为 0、100 和 0 的条目，

但如果我执行 SUM/GROUP BY（按 item_type、person_id 和 to_char(START_DATE, 'YYYY') 分组），同一个人的成本为 3860700！

关于如何解决这个问题的任何想法，所以我得到 100 而不是 3860700？

编辑：所以基本上我想要一个数量*成本，但要对其求和，以便我得到该项目类型的总数（而不是同一项目有多行）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T14:19:52.057

在 SQL`SELECT distinct sum()`中不会对不同的值求和，因此您需要先选择不同的值，然后将它们求和：

```
Select  
SUM(Credits * Credit_Price) as "Cost", to_char(START_DATE, 'YYYY') as "YEAR", 
PERSON_ID, ITEM_TYPE
[...]
 from (select DISTINCT Credits , Credit_Price, START_DATE,PERSON_ID, ITEM_TYPE
[...])
WHERE
[...]
to_char(START_DATE, 'YYYY') = '2012' 
```

或将 distinct 放在 sum 中，如下所示：

```
Select  
SUM(DISTINCT Credits * Credit_Price) as "Cost", to_char(START_DATE, 'YYYY') as "YEAR", 
PERSON_ID, ITEM_TYPE
[...]
WHERE
[...]
to_char(START_DATE, 'YYYY') = '2012' 
```

请注意，这 2 个选项不是等价的，您想将不同的 Credits 、 Credit_Price 或不同的 Credits * Credit_Price 相加吗？

[请参阅 sqlfiddle 示例](http://sqlfiddle.com/#!4/f0280/1)

# string - String Replace in Smarty

> ID：15478872
> 
> 赞同：1
> 
> 时间：2013-03-18T14:10:11.970
> 
> 标签：string, replace, smarty

May I know, how can I replace all elements within `"("` with `" "`.

example:

```
this is (test) => this is 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T14:12:27.413

你试过这个吗？

```
{$var|replace:'value':'new_value'} 
```

关注[了这篇文章](http://www.smarty.net/docs/en/language.modifier.replace.tpl)

还是正则表达式 str_replace？

```
{$var|regex_replace:"/[\r\t\n]/":" "} 
```

[在这里](http://www.smarty.net/docsv2/en/language.modifier.regex.replace.tpl)找到

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-20T02:22:45.037

Ron van der Heijden 的回答非常有用。我需要做同样的事情，但使用方括号，我的解决方案如下。我使用[在线正则表达式生成器](http://txt2re.com/)来帮助我处理正则表达式部分。

```
{$var|regex_replace:"(\\[.*?\\])":""} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-22T22:01:24.623

更高级的替换：

```
{$ptions_data = $c.options|replace:"value=\"{$c.content}\"":"value=\"{$c.content}\" selected=\"selected\""}

{$ptions_data}

{$tabs_data = $c.tabs|replace:"id=\"tab-{$c.content}\" class=\"tabs\" style=\"display:none\"":"id=\"tab-{$c.content}\" class=\"tabs\" style=\"display:block\""}

{$tabs_data} 
```

# jquery - 防止用户使用 jQuery 删除所有表行

> ID：15478874
> 
> 赞同：0
> 
> 时间：2013-03-18T14:10:17.090
> 
> 标签：jquery, if-statement, row

由一些教程和 SO 社区提供，我有以下语法，可以动态地从表中添加或删除行。

我想阻止用户删除表中的所有行。我已经放入了一个 if 语句来防止在加载时删除第一行，我如何获得在 if 语句中使用的所有表行的计数，这样我就可以删除所有行，只要删除后至少有一个剩余行?

我的语法是：

```
<table class="authors-list">
  <tr><td>author's first name</td><td>author's last name</td></tr>
  <tr><td><input type="text" name="first_name" /></td><td><input type="text" name="last_name" /></td><td><a class="deleteRow"> x </a></td></tr>

<script type="text/javascript">
var counter = 1;
jQuery("table.authors-list").on('change','input[name^="first_name"]',function(event){
    event.preventDefault();
    counter++;
    var newRow = jQuery('<tr><td><input type="text" name="first_name' +
        counter + '" /></td><td><input type="text" name="last_name' +
        counter + '" /></td><td><a class="deleteRow"> x </a></td></tr>');
    jQuery('table.authors-list').append(newRow);
});

jQuery("table.authors-list").on('click','.deleteRow',function(event){
   console.log('h');
   if (counter==1) { alert ('form must have at least one row')} else {
    $(this).closest('tr').remove();
 }
});
</script> 
```

一如既往地感谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T14:12:43.593

你可以使用

```
if ($(this).closest('table').find('tr').length<2) {
   alert ('form must have at least one row')
} else {
   $(this).closest('tr').remove();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T14:14:04.563

我们又见面了……不管怎样

试试这个

```
jQuery("table.authors-list").on('click','.deleteRow',function(event){
 if ($(this).parents('table').find('tr').length >  2) { 
    $(this).closest('tr').remove();
 }else{
  alert ('form must have at least one row')
 }

}); 
```

[在这里摆弄](http://jsfiddle.net/bipen/yUfhL/213/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T14:25:14.530

假设为了简洁起见，您没有包含所有标记，我会很想尝试以下方式：

```
<table class="authors-list">
    <!-- for one thing, let's separate our table structure a little better -->
    <thead>
        <tr>
            <td>author's first name</td>
            <td>author's last name</td>
        </tr>
    </thead>
    <!-- ... in this way, you don't have to manually exclude the header rows from your count -->
    <tbody>
        <tr>
            <td>
                <input type="text" name="first_name" />
            </td>
            <td>
                <input type="text" name="last_name" />
            </td>
            <td><a class="deleteRow"> x </a>
            </td>
        </tr>
    </tbody>
</table> 
```

然后您可以继续使用 javascript ：（在选择器中包含 table 标记是完全没有必要的......您的类名应该可以很好地用于这些目的，并为您节省一些字符，顺便说一句......）

```
jQuery(".authors-list tbody").on('change', 'input[name^="first_name"]', function (event) {
    event.preventDefault();
    // get the number of rows, here
    var counter = $(".authors-list tbody tr").length;
    // also, you don't need to wrap newRow in a jQuery() call... append() does that for you
    var newRow = '<tr><td><input type="text" name="first_name' + counter + '" /></td><td><input type="text" name="last_name' + counter + '" /></td><td><a class="deleteRow"> x </a></td></tr>';
    jQuery('.authors-list tbody').append(newRow);
});

jQuery(".authors-list tbody").on('click', '.deleteRow', function (event) {
    // get the counter at the point in time when you're trying to test deletion
    var counter = $(".authors-list tbody tr").length;
    if (counter == 1) {
        alert('form must have at least one row')
    } else {
        $(this).closest('tr').remove();
    }
}); 
```

[http://jsfiddle.net/mori57/BsaZY/2/](http://jsfiddle.net/mori57/BsaZY/2/)

# silverlight - 如何从 ViewModel 中关闭 Silverlight 子项？

> ID：15478877
> 
> 赞同：2
> 
> 时间：2013-03-18T14:10:24.187
> 
> 标签：silverlight, mvvm, viewmodel, childwindow

我有一个用于登录的子窗口。以前，很大一部分代码都在窗口的代码后面。我重构了所有这些以适应 MVVM 模型。一切正常，除了完成后我无法关闭子窗口。

我已经研究了如何从 VM 中完成此操作，但我尝试过的一切都没有最终奏效。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T02:47:23.560

将`Finished`事件添加到视图模型。`OnFinished`需要关闭时调用方法。

```
public event EventHandler Finished;
protected void OnFinished()
{
    if (Finished != null)
        Finished(this, new EventArgs());
} 
```

从子窗口后面的代码订阅事件并实际关闭窗口。

```
ViewModel.Finished += (s, e) => Close(); 
```

### 也可以看看

> [创建 MVVM 友好的对话策略](https://stackoverflow.com/questions/6595312/creating-an-mvvm-friendly-dialog-strategy)

# entity-framework-5 - 使用 DbMigrationsConfiguration 自定义 DbContextFactory

> ID：15478878
> 
> 赞同：1
> 
> 时间：2013-03-18T14:10:30.647
> 
> 标签：entity-framework-5, dbcontext, entity-framework-migrations

您将在下面找到我的自定义 IDbContextFactory 实现。在我的存储库中，我创建了这个工厂的一个实例，因为我正在做一个多租户应用程序（每个租户都有自己的数据库），我还需要设置 ConnectionString 和 Tenant 属性，以便可以创建我的 DbContext。

如果数据库不存在，这一切都很好，但是当我需要执行迁移时，DbMigrationsConfiguration 会尝试使用这个工厂来创建 EFDbContext 的实例，当然它会失败，因为没有设置 ConnectionString 和 Tenant。

有没有人有解决这个问题的替代策略？

```
public class DbContextFactory : IDbContextFactory<EFDbContext>
{
    public string ConnectionString { get; set; }
    public string Tenant { get; set; }

    public EFDbContext Create()
    {
        var connectionInfo = new DbConnectionInfo(ConnectionString, "System.Data.SqlClient");

        if (EFContextHelper.Contexts.Contains(Tenant))
        {
            return new EFDbContext(ConnectionString, Tenant);
        }
        else
        {
            EFDbContext context = new EFDbContext(ConnectionString, Tenant);

            if (!context.Database.Exists())
            {
                Database.SetInitializer<EFDbContext>(new EFDbContextInitializer());
                context.Database.Initialize(false);
            }
            else
            {
                bool doMigration = false;
                try
                {
                    doMigration = !context.Database.CompatibleWithModel(true);
                }
                catch (NotSupportedException)
                {
                    // no metadata for migration
                    doMigration = true;
                }

                // not working cause migrator is trying to instantiate this factory without setting connection string etc
                if (doMigration)
                {
                    var migrationConfig = new DbMigrationsConfiguration<EFDbContext>(); 
                    migrationConfig.AutomaticMigrationDataLossAllowed = false;
                    migrationConfig.AutomaticMigrationsEnabled = true;
                    migrationConfig.TargetDatabase = connectionInfo;
                    var migrator = new DbMigrator(migrationConfig);
                    migrator.Update();
                }
            }

            EFContextHelper.Contexts.Add(Tenant);

            return context as EFDbContext;
        }
    } 
```

谢谢，加里

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T08:42:34.253

我设法自己解决了这个问题。由于我没有收到任何回复，因此我将这里留给遇到此问题的其他人。

基本上我只是将我的 DbContext 类实例化调整为以下内容：

```
public EFDbContext(string connectionString, string tenant) : base(connectionString ?? "EFDBContext")
{
     Tenant = tenant;
} 
```

因此，在这种情况下，如果传递的连接字符串为空，则默认为配置文件连接字符串名称。迁移器似乎保持分配的连接：

```
migrationConfig.TargetDatabase = connectionInfo; 
```

希望这可以帮助某人。

# c# - 在延续链中传播异常的正确方法是什么？

> ID：15478882
> 
> 赞同：14
> 
> 时间：2013-03-18T14:10:37.963
> 
> 标签：c#, exception, task-parallel-library, task, continuation

在延续链中传播异常的正确方法是什么？

```
t.ContinueWith(t2 => 
{
     if(t2.Exception != null)
         throw t2.Exception;

     /* Other async code. */
})
.ContinueWith(/*...*/);   

t.ContinueWith(t2 => 
{
     if(t2.IsFaulted)
         throw t2.Exception;

     /* Other async code. */
})
.ContinueWith(/*...*/);

t.ContinueWith(t2 => 
{
     if(t2.Exception != null)
         return t2;

     /* Other async code. */
})
.ContinueWith(/*...*/);   

t.ContinueWith(t2 => 
{
     if(t2.IsFaulted)
         return t2;

     /* Other async code. */
})
.ContinueWith(/*...*/);

t.ContinueWith(t2 => 
{
     t2.Wait();

     /* Other async code. */
})
.ContinueWith(/*...*/);

t.ContinueWith(t2 => 
{     
     /* Other async code. */
}, TaskContinuationOptions.NotOnFaulted) // Don't think this one works as expected
.ContinueWith(/*...*/); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-03-13T16:11:47.757

这可能是有问题的，因为如果不满足条件`TaskContinuationOptions.OnlyOn...`，它们会导致继续被*取消。*在我理解这一点之前，我写的代码有一些微妙的问题。

像这样的链式延续实际上很难做到正确。 **到目前为止，最简单的**解决方法是使用新的 .NET 4.5`await`功能。这使您几乎可以忽略您正在编写异步代码的事实。您可以像在同步等效项中一样使用 try/catch 块。对于 .NET 4，这可以使用[async 目标包](https://nuget.org/packages/Microsoft.Bcl.Async)。

如果您在 .NET 4.0 上，最直接的方法是`Task.Result`从每个延续中的先行任务进行访问，或者，如果它不返回结果，`Task.Wait()`请像在示例代码中一样使用。但是，您最终可能会得到一个嵌套的`AggregateException`对象树，稍后您需要解开它才能找到“真正的”异常。（同样，.NET 4.5 使这更容易。虽然`Task.Result`throws `AggregateException`，`Task.GetAwaiter().GetResult()`——在其他方面是等效的——抛出底层异常。）

重申这实际上不是一个微不足道的问题，您可能对 Eric Lippert 关于 C# 5 异步代码中的异常处理的[文章](http://blogs.msdn.com/b/ericlippert/archive/2010/11/19/asynchrony-in-c-5-part-seven-exceptions.aspx)[感兴趣](http://blogs.msdn.com/b/ericlippert/archive/2010/11/23/asynchrony-in-c-5-part-eight-more-exceptions.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-13T16:23:42.567

我们现在在 openstack.net SDK 中使用的方法是[`CoreTaskExtensions.cs`](https://github.com/openstacknetsdk/openstack.net/blob/master/src/corelib/Core/CoreTaskExtensions.cs).

这些方法有两种形式：

*   `Then`: 延续返回 a `Task`，并`Unwrap()`自动调用。
*   `Select`: 延续返回一个对象，没有调用`Unwrap()`发生。此方法仅适用于轻量级延续，因为它始终指定`TaskContinuationOptions.ExecuteSynchronously`.

这些方法具有以下优点：

1.  避免在前件发生故障或取消时调用延续方法。
2.  取而代之的是，前件的结果变成了链式操作的结果（准确地保留了异常信息，没有将异常包装在多层中`AggregateException`）。
3.  允许调用者编写支持错误先行的延续方法，在这种情况下，只有取消的先行任务会绕过延续（指定`supportsErrors=true`扩展方法）。
4.  返回 a 的延续`Task`会同步执行并`Unwrap()`为您调用。

以下比较显示了我们如何将此更改应用于最初使用并广泛使用的**CloudAutoScaleProvider.cs ：** [https ://github.com/openstacknetsdk/openstack.net/compare/3ae981e9...299b9f67#diff-3](https://github.com/openstacknetsdk/openstack.net/compare/3ae981e9...299b9f67#diff-3)`ContinueWith``Unwrap`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T17:47:12.530

如果您不想在发生异常（即日志记录）的情况下做任何特别的事情，并且只想传播异常，那么在抛出异常时（或在取消的情况下）不要运行延续。

```
task.ContinueWith(t =>
{
    //do stuff
}, TaskContinuationOptions.OnlyOnRanToCompletion); 
```

如果您明确想要处理异常的情况（可能进行日志记录，将抛出的异常更改为其他类型的异常（可能带有附加信息，或隐藏不应公开的信息）），那么您可以添加带有`OnlyOnFaulted`选项的延续（可能是正常情况延续的补充）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-10T22:13:57.233

该`OnlyOnFaulted`选项适用于前一个`Task`无法正确执行其任务的情况。一种方法是在每个延续任务中重新抛出异常，但这将是糟糕的设计。

如果您想像普通对象一样传递异常，则将其视为一个。返回`Task`异常并`Task.Result`继续使用该属性。

# jquery - 了解窗帘.js

> ID：15478893
> 
> 赞同：3
> 
> 时间：2013-03-18T14:11:16.837
> 
> 标签：jquery, jquery-plugins, parallax

我一直在尝试了解如何使用 jQuery 插件窗帘.js ( [https://github.com/victa/curtain.js](https://github.com/victa/curtain.js) )。

我试图按照说明进行操作，但我一定做错了什么，因为我无法让它工作。

也许问题出在其他问题上，但我写的 jquery 是：

```
$(function () {
    $('.curtains').curtain({
        scrollSpeed: 400
    });
}); 
```

我做了一个小提琴，所以你可以看到我现在拥有的代码。小提琴在这里：http: [//jsfiddle.net/NvGgW/1/](http://jsfiddle.net/NvGgW/1/)

非常欢迎任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T14:23:32.613

我认为你做的一切都很好，它只是不适用于最新版本的 jquery，适用于 Jquery 1.7.2，我已经为你更改了你的小提琴并在 JS 窗口中包含了插件的副本：

[http://jsfiddle.net/jamesking/NvGgW/3/](http://jsfiddle.net/jamesking/NvGgW/3/)

```
<ol class="curtains">
<li id="One" class="sectionOne">
    <h1>SECTION ONE</h1>
</li><!-- end #sectionOne -->
<li id="Two" class="sectionTwo">
    <h1>SECTION TWO</h1>
</li><!-- end #sectionTwo -->
<li id="Three" class="sectionThree">
    <h1>SECTION THREE</h1>
</li><!-- end #sectionThree -->
<li id="Four" class="sectionFour">
    <h1>SECTION FOUR</h1>
</li><!-- end #sectionFour -->
</ol> 
```

# php - 检查客户端是否可以访问该页面，如果不能执行某些操作

> ID：15478896
> 
> 赞同：0
> 
> 时间：2013-03-18T14:11:28.850
> 
> 标签：php, http-headers, cdn

我正在研究“CDN”视频交付脚本。我的问题不是所有提供商都包括在内，因此我需要检查客户是否可以访问该链接，如果不能再给他发送一个。我尝试过使用 get_headers，但使用 get_headers 时，只有服务器检查它是否可以访问链接，而不是用户。

```
$header = get_headers($VIDEO);
preg_match('/\d{3}/', $header[0], $code);
if($code[0] < 400){
        header("Content-type: video/x-flv");
        header("Location:" . $VIDEO . $dop);
}else{
        header("Content-type: video/x-flv");
        header("X-Accel-Redirect: /".$_GET["filename"].$dop);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T14:25:39.470

尝试这样的事情：

```
$ip_address = array('50.101.20.212', '25.65.659.25');
if(in_array($_SERVER['REMOTE_ADDR'], $ip_address )){
    // may access site;
}else{
    // access denied
} 
```

**更新**

您可以通过相反的方式来确定用户是否可以输入链接，

```
$ip_address = array('50.101.20.212', '25.65.659.25');
if(!in_array($_SERVER['REMOTE_ADDR'], $ip_address )){
     //access denied
} 
```

# c# - Ploeh AutoFixture 无法从 System.Runtime.Serialization.ExtensionDataObject 创建实例

> ID：15478897
> 
> 赞同：28
> 
> 时间：2013-03-18T14:11:36.057
> 
> 标签：c#, .net, autofixture

我们有一个引用 WCF 服务的 MVC 项目。这些引用`(ExtensionDataObject)ExtensionData`为每个 DTO 和 Response 对象添加了属性，现在`AutoFixture`无法创建这些类型的匿名实例。

例子：

```
public partial class SearchResultsDto : object, 
    System.Runtime.Serialization.IExtensibleDataObject, 
    System.ComponentModel.INotifyPropertyChanged {

    [System.NonSerializedAttribute()]
    private System.Runtime.Serialization.ExtensionDataObject extensionDataField;

    [global::System.ComponentModel.BrowsableAttribute(false)]
    public System.Runtime.Serialization.ExtensionDataObject ExtensionData {
        get {
                return this.extensionDataField;
            }
        set {
                this.extensionDataField = value;
            }
        }
    } 
```

代码：

```
_fixture = new Fixture().Customize(new AutoMoqCustomization());
var dto = _fixture.CreateAnonymous<SearchResultsDto>(); 
```

例外：

> Ploeh.AutoFixture.ObjectCreationException: Ploeh.AutoFixture.ObjectCreationException: AutoFixture 无法从 System.Runtime.Serialization.ExtensionDataObject 创建实例，很可能是因为它没有公共构造函数，是抽象或非公共类型。

问题：有没有办法在 AutoFixture 中注册这个对象，以便将它实例化为`null`或其他任何东西，这让我可以`CreateAnonymous`对所有具有`ExtensionData`属性的对象进行操作。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-07-31T11:33:12.227

最简单的方法是：

```
fixture.Register<ExtensionDataObject>(() => null); 
```

这向 AutoFixture 注册了一种初始化所有 ExtensionDataObject 的特定方式，并给出了 Func。在这种情况下，Func 总是返回 null 所以你很高兴。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-03-18T14:32:57.797

我希望有人会发现它很有用，我已经设法让它按照[这个线程](https://github.com/AutoFixture/AutoFixture/issues/69)`PropertyTypeOmitter`与班级一起工作：

```
public void Test()
{
    var fixture = new Fixture();
    fixture.Customizations.Add(
        new PropertyTypeOmitter(
            typeof(ExtensionDataObject)));

    var person = fixture.CreateAnonymous<Person>();
}

internal class PropertyTypeOmitter : ISpecimenBuilder
{
    private readonly Type type;

    internal PropertyTypeOmitter(Type type)
    {
        if (type == null)
            throw new ArgumentNullException("type");

        this.type = type;
    }

    internal Type Type
    {
        get { return this.type; }
    }

    public object Create(object request, ISpecimenContext context)
    {
        var propInfo = request as PropertyInfo;
        if (propInfo != null && propInfo.PropertyType == type)
            return new OmitSpecimen();

        return new NoSpecimen();
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-25T10:41:04.470

为了让它更干燥和`CTRL`友好`C`，这里是 Spiros Dellaportases（谢谢！）答案包含在夹具定制中：

```
public class OmitExtensionDataObjectPropertyCustomization : ICustomization
{
    public void Customize(IFixture fixture)
    {
        fixture.Register<ExtensionDataObject>(() => null);
    }
} 
```

# c# - 如何使用 CodeDOM / T4 / PostSharp / 使用 c# 自动创建（例如）单例？

> ID：15478898
> 
> 赞同：5
> 
> 时间：2013-03-18T14:11:35.850
> 
> 标签：c#, design-patterns, metaprogramming, boilerplate

我正在寻找一种自动生成 (eg) 的方法`singleton`，例如：

```
[SingletonPatternAttribute]
public class Logger {
    public void Log (string txt) { /* do logging... */ }
} 
```

作为消除样板的尝试。

有人知道如何实现吗？我知道有`CodeDOM`, `Reflection.Emit`,`T4`等等。另外 - 有（最值得注意的是）`PostSharp`，但我很高兴看到上述挑战的真正解决方案。

例如，我可以在构造函数中生成代码，但编译时间显然要好得多。

### 编辑：

这里的问题不是`Singleton`，而是生成/元编程`C#`- 如何以最佳方式创建代码/消除样板 - 有哪些具体示例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T14:17:58.073

我为我的日志记录类做这件事，使用 IOC 容器并在映射/绑定对象时添加范围。例如使用 Ninject，绑定将是：

```
Bind<ILogger>().To<Logger>().InSingletonScope(); 
```

然后在我想使用单例记录器的课程中，我可以使用属性注入：

```
[Inject]
public ILogger Logger { get; set; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T12:50:33.513

一段时间过去了，但我还没有看到满意的回复，所以我将写下我过去所做的事情。我仍然对其他方法也很感兴趣，因为我觉得我已经取得的并不理想，我自己也想做得更好。

在过去的几年里，我尝试了四种列出的“丰富”类代码生成方法中的三种：

*   反射.发射
*   T4
*   CodeDom（但我很早就放弃了这个，因为它是在我的项目时，不完整！）

加上其他三个：

*   IL重写使用Profiler API [Here](http://msdn.microsoft.com/en-us/magazine/cc188743.aspx)和[here](http://blogs.msdn.com/b/davbr/archive/2007/03/06/creating-an-il-rewriting-profiler.aspx)（实际使用）
*   [在这里](http://blogs.msdn.com/b/tilovell/archive/2011/02/10/contextboundobject-2-contexts-and-interception.aspx)使用 ContextBoundObject 进行拦截（仅测试过）
*   嵌入 C# 编译器 (Roslyn/MonoCSharp)[在这里](http://www.mono-project.com/CsharpRepl)和现在还有[脚本](http://scriptcs.net/)（仅研究，未实际使用）

一般来说，我研究了所有这些工具，以 AOP 方式获得一些代码“编织”，从类似于 OP 示例的东西开始：制作带有“特殊”属性标记的类和方法，修改它们的行为。在我第一个项目的时候，C# 的 AOP 解决方案还不够成熟（但同时这可能已经改变了），所以我不能说任何关于 PostSharp 的事情，例如。正如我所说，我的目的非常相似：基于类和方法的属性，向类添加一些额外的代码（以及类成员）。我最终使用 Reflection.Emit 作为原型，最后使用 Profiler API 重写 IL。

我最终使用 T4 的第二个项目略有不同。它已经使用了代码生成器（更具体地说，是解析器生成器），但我们需要进一步（自动！）修改生成的源代码。

## 反射.发射

我使用了以下方法：一个类（我们称之为 MakeProxy）遍历一个给定的程序集，搜索属性，然后发出一个新的 dll（一个“代理”），它在后台调用原始程序集，提供所需的接口和行为给用户。

我实际上在一个工具中使用了这个类，一个 .NET 可执行文件，它在编译通过后由 MS Build 运行。

主要缺点：引用可能难以处理。您需要引用自动生成的 dll，因此您必须将代码拆分到不同的项目中，并且您甚至无法在解决方案中引用原始项目......这可能是不可接受的。此外，您也“看到”（在 IDE 中）原始代码，而不是生成的代码；这可能会使调试变得困难。

## 探查器 API

在这种情况下，您执行与 Reflection.Emit 相同的工作，但您不需要预先构建任何“代理”；代码在 IL 生成时注入（即一次，这在性能方面非常好）。您只需编写（非托管）探查器 DLL，并在其下启动程序。您的“分析器”将收到有关执行哪些功能（或者更好的是，哪些功能是 JITed）的通知，您可以采取相应的行动。

主要缺点：您不能修改类的“结构”（方法、字段、...）（不容易）；使用非托管 API 生成 IL 是相当困难的（你必须处理很多事情，当出现问题时调试是一场真正的噩梦！）主要优点：不需要修改原始代码（尤其是不需要修改调用方 - 考虑到该特定项目的要求，这就是最终导致我走向这个解决方案的原因）。

## T4

我将 T4 用于另一个项目，但我可以在这里分享我的发现。它适用于转换文本，但不适用于转换代码：语法变得“奇怪”（您有代码，并且代码中的代码可以生成代码......您很容易迷失方向）。

主要优点：与 IDE 和构建系统很好地集成；你得到智能感知支持；很容易上手；你实际上看到你在调试什么

就个人而言，我希望拥有（或自己构建）像 T4 这样的东西，但它执行 C# -> C# 代码转换；这样，您就可以拥有 IDE 的优势（包括对“原始”和“生产”事物的智能感知）和 Reflection.Emit 的强大功能。您可能需要同时构建 C#/C# 编译器和 VS 插件才能获得所有这些好东西。

最后一点：今天，我会使用比 Reflection.Emit 更“高级”的东西，比如 IKVM emit 或[Sigil](http://kevinmontrose.com/2013/02/14/sigil-adding-some-more-magic-to-il/)

# linux - 如何将递增数字添加到已使用的用户名

> ID：15478904
> 
> 赞同：-1
> 
> 时间：2013-03-18T14:12:02.253
> 
> 标签：linux, bash, scripting

我正在尝试编写一个从文件创建用户名的脚本，但是如果有两个相同的用户名，它将每次将后一个用户名增加 1。我认为我搞砸的地方是 if/else 语句，但任何帮助将不胜感激。

```
#!/bin/bash

if [ $# -ne 0 ]; then
    echo "usage: $0 < file" exit 1
fi

while read user_list; do
    first=echo $user_list | cut -f 1 -d ',' `last=`echo $user_list | cut -f 2 -d ','
    lastl=echo $last | head -c 1 usern=echo $first $lastl | tr 'A-Z' 'a-z'
    tname=echo $first $last 
    groupadd $usern useradd -c "${first}${last}" -d /home/${usern} -g $usern -m -s /bin/bash $usern
    passwd=$(cat /dev/urandom |tr -dc 'A-Za-z0-9' | head -c 8)
    cat /tmp/pw.tmp | /usr/bin/passwd --stdin ${usern} > /dev/null
    echo "adding $tname : $usern, $passwd"
done

original_username=$usern
username_digit=0

while read line; do
    grep -w $usern /etc/passwd
    if [[ ! usern /etc/passwd]]; then
        username_digit=$((username_digit +1))
        usern=$((original_username + $username_digit))
    else
        usern+$original_username
    fi
done 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T14:19:23.633

```
if grep -q "^${usern}:" /etc/passwd; then
    username_digit=$((username_digit++))
    usern="$original_username$username_digit"
(...) 
```

# sql - Rails 3 ActiveRecord 和 Postgres：按关联排序

> ID：15478909
> 
> 赞同：3
> 
> 时间：2013-03-18T14:12:14.013
> 
> 标签：sql, ruby-on-rails, ruby-on-rails-3, postgresql, activerecord

我有以下 2 个导轨型号：

```
class Profile < ActiveRecord::Base
  belongs_to :user

  has_many :votes, through: :user

  default_scope includes(:user)

end 
```

和

```
class Vote < ActiveRecord::Base
  attr_accessible :by, :for

  belongs_to :by, class_name: "User"
  belongs_to :for, class_name: "User"

  validates :by, :for, presence: true

  validates_uniqueness_of(:by, scope: :for)
end 
```

我正在尝试在个人资料上创建一个“顶级”范围，该范围根据相关用户记录收到的“赞成”票数对个人资料进行排序

投票是由用户为用户创建的。“by”列表示投票的用户，“for”列表示收到投票的用户。我正在尝试获取获得最多选票的用户的个人资料。

这是我到目前为止所得到的：

```
 scope :top,
    select("profile.*, count(votes.id) AS votes_count").
    joins(:votes, :user).
    order("votes_count DESC") 
```

这不适用于以下错误：

> ActiveRecord::StatementInvalid: PG::Error: ERROR: column "votes_count" 不存在

它也没有考虑“for”列

谁能帮我吗 ？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-18T14:40:48.870

你错过了一个分组，我相信。这是您要执行的查询：

```
select profiles.*, count(votes.id) as votes_count 
  from profiles 
  left join votes on votes.for_id = profiles.user_id 
  group by profiles.id 
  order by votes_count desc; 
```

所以，让我们把它变成一个 ActiveRecord 范围：

```
scope :top, joins('left join votes on votes.for_id = profiles.user_id').
  select('profiles.*, count(votes.id) as votes_count').
  group('profiles.id').
  order('votes_count desc') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-11-10T04:37:32.320

主动记录方式

```
Profile.joins(:votes).group("profiles.id").order("count(profiles.id) DESC") 
```

# matlab - How to change the step in lsqcurvefit in Matlab?

> ID：15478920
> 
> 赞同：0
> 
> 时间：2013-03-18T14:12:59.423
> 
> 标签：matlab

I'm having the following error :

```
lsqcurvefit stopped because the size of the current step is less than
the default value of the step size tolerance. 
```

The step size tolerance is default (1e-6). The problem is I'm working with huge functions in X (a step in X = 1e7). The lsqcurvefit does not converge at all, as you could guess.

How can I modify the step so it might converge more easily?

Here's the creation of the Lorentzien:

```
Gamma=[4e6 4e6 4e6];
C=1;
m=0;
Amplitude=[1.5 5];
Width=[0.15 0.25];
Offset=[1 2];
GuessC=Offset;

Aub = 2e7;
Alb = 5e6;
NUub = FreqR*0.999;
NUlb = FreqR*0.800;

for i=1:Nombre
    Ampl(i,1) = Alb + (Aub-Alb).*rand;
    Ampl(i,2) = Alb + (Aub-Alb).*rand;
    Ampl(i,3) = Alb + (Aub-Alb).*rand;
    Pic1 = RoundTo(NUlb + (NUub-NUlb).*rand,-6);
    Pic2 = RoundTo(NUlb + (NUub-NUlb).*rand,-6);
    Pic3 = RoundTo(NUlb + (NUub-NUlb).*rand,-6);

    T0=[Ampl(i,1) Ampl(i,2) Ampl(i,3)];
    nurG(i,1) = min([Pic1 Pic2 Pic3]);
    nurG(i,2) = median([Pic1 Pic2 Pic3]);
    nurG(i,3) = max([Pic1 Pic2 Pic3]);
    X1=nurG(i,1)-FreqR*0.025:FreqR*0.0003:FreqR;
    N=length(X1);
    Y1=zeros(1,N);

    for j=1:N   
       Y1(j)=(2*T0(1)/pi)*(Gamma(1)/(4*(X1(j)-nurG(i,1))^2+Gamma(1)^2))+(2*T0(2)/pi)*(Gamma(2)/(4*(X1(j)-nurG(i,2))^2+Gamma(2)^2))+(2*T0(3)/pi)*(Gamma(3)/(4*(X1(j)-nurG(i,3))^2+Gamma(3)^2))+C+m*randn();
    end

XP1 = X1/(FreqR*0.009);

Frequency=[nurG(i,1)/(FreqR*0.009) nurG(i,3)/(FreqR*0.009)];
GuessP11=(Width./(2*pi)).*(Amplitude-Offset);
GuessP21=Frequency;
GuessP31=Width.^2/4;
GuessP12=(Width./(2*pi)).*(Amplitude-Offset);
GuessP22=Frequency;
GuessP32=Width.^2/4;
GuessP13=(Width./(2*pi)).*(Amplitude-Offset);
GuessP23=Frequency;
GuessP33=Width.^2/4;

[yprime params resnorm residual]=lorentzfit3(XP1,Y1,[],[GuessP11(1) GuessP21(1) GuessP31(1) GuessP12(1) GuessP22(1) GuessP32(1) GuessP13(1) GuessP23(1) GuessP33(1) GuessC(1); GuessP11(2) GuessP21(2) GuessP31(2) GuessP12(2) GuessP22(2) GuessP32(2) GuessP13(2) GuessP23(2) GuessP33(2) GuessC(2)]); 
```

In lorentzfit3, there is a series of if to see if the Guess are right. But I'll skip that part. The Guess gives an idea where to start looking.

```
[params resnorm residual] = lsqcurvefit(@lfun3c,p0,x,y,lb,ub,optimset('MaxFunEvals',200000,'MaxIter',10000,'TolFun',1e-18));
yprime = lfun3c(params,x);

end % MAIN

function F = lfun3c(p,x)
F = p(1)./((x-p(2)).^2+p(3)) + p(4)./((x-p(5)).^2+p(6)) + p(7)./((x-p(8)).^2+p(9)) + p(10);
end % LFUN3C 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T14:27:10.853

您可以重写您的函数，以便它采用更合理的缩放参数：

```
function f = myfun(x)
f = myBigFun(1e7 * x); 
```

myBigFun 是您的原始函数 - 但现在 myfun 有一个 x 可以在更小的步骤范围内缩放。

当您查看函数返回的值时，这也是一个好主意。有时优化无法看到您感兴趣的顺序的变化，因此再次将函数的输出缩放到“合理范围”有助于确保“事物正常运行”。

另一件通常有意义的事情，特别是当您的最佳值是“在一个非常大的数字附近”时，是重新定位您的函数：不是从 1000000 探索到 1000001，而是将您的函数居中，因此您正在搜索 -0.5 之间的值和 0.5

只是一些可以帮助你的想法......

# java - Java Applet Folder Chooser AccessControlException

> ID：15478931
> 
> 赞同：0
> 
> 时间：2013-03-18T14:13:44.760
> 
> 标签：java, jsp, applet, file-permissions

I have simple folder chooser in java applet. The applet opens successfully and it shows AccessControlException. Im trying to set the default path ${user.home}, and then the user can select any flder they wish. If i set the other than user home path, the same error occurs. I have googled a lot for this and nothing works to me. Please look at the below traces and suggest any solution.

Below is the applet calling area from jsp:

```
<td align="right">
    <input type ="text" name="hdn_folder_path" readonly value="<%if(request.getRemoteAddr().toString().trim().equals(db_ip_address)){ out.println(hdn_folder_path);}%>" id="hdn_folder_path" size="60" class="textbox">&nbsp;&nbsp;<input type="button" class="buttonorange" value="Choose.." onClick = "getFolder();"  onmouseover="this.style.color='#fbe249';"  onmouseout="this.style.color='#FFF';">
    <OBJECT ID="FolderChooserApplet" NAME="FolderChooserApplet" WIDTH=00 HEIGHT=0 border="0" <% if(agentText.indexOf("msie") != -1){%>CLASSID="clsid:8AD9C840-044E-11D1-B3E9-00805F499D93" <%} else { %>  CLASSID="java:JFolderChooser.JFolderChooser.class"<% } %> type="application/x-java-applet">
    <PARAM NAME="code" value="JFolderChooser.JFolderChooser.class">
    <PARAM NAME="archive" value="<%=session.getAttribute("APPLET_PATH")%>/JFolderChooser.jar">
    <param name="defaultDir" value="<%if(request.getRemoteAddr().toString().equals(db_ip_address)){ out.println(hdn_folder_path);}%>">
    <param name="mayscript" value="true">
    </OBJECT>
</td> 
```

## Log:

```
Exception in thread "Basic L&F File Loading Thread" java.security.AccessControlException: access denied ("java.io.FilePermission" "C:\Documents and Settings\Users" "read")
    at java.security.AccessControlContext.checkPermission(Unknown Source)
    at java.security.AccessController.checkPermission(Unknown Source)
    at java.lang.SecurityManager.checkPermission(Unknown Source)
    at java.lang.SecurityManager.checkRead(Unknown Source)
    at java.io.File.exists(Unknown Source)
    at sun.awt.shell.ShellFolder.getShellFolder(Unknown Source)
    at javax.swing.filechooser.FileSystemView.getShellFolder(Unknown Source)
    at javax.swing.filechooser.FileSystemView.getFiles(Unknown Source)
    at javax.swing.plaf.basic.BasicDirectoryModel$LoadFilesThread.run0(Unknown Source)
    at javax.swing.plaf.basic.BasicDirectoryModel$LoadFilesThread.run(Unknown Source) 
```

JFolderChooser.java

```
import java.applet.Applet;
import java.io.File;
import java.security.AccessController;
import java.security.PrivilegedAction;

import javax.swing.JFileChooser;
import javax.swing.UIManager;
import javax.swing.filechooser.FileFilter;

public class JFolderChooser extends Applet {
    /**
     * 
     */
    private static final long serialVersionUID = -6499964033850797167L;
    int returnVal;
    public String folderPath = "", defaultPath = "c:\\", defaultDir = "";
    public String formName = "", fieldName = "";
    JFileChooser jfc;

    @SuppressWarnings("unchecked")
    @Override
    public void init() {

        AccessController.doPrivileged(new PrivilegedAction() {
            public Object run() {
                try {
                    UIManager
                            .setLookAndFeel("com.sun.java.swing.plaf.windows.WindowsLookAndFeel");
                } catch (Exception e) {
                }
//              defaultPath = getParameter("defaultDir");
//              if (defaultPath == null) {
//                  defaultPath = System.getProperty("user.home");
//              }
                File defaultDir = new File(defaultPath);
                if (!defaultDir.exists()) {
                    System.out.println("The specified folder does not exist.");
                    defaultDir = new File(System.getProperty("user.home"));
                }
                jfc = new JFileChooser();
                jfc.setFileFilter(new FileFilter() {
                    @Override
                    public boolean accept(File f) {
                        return f.isDirectory();
                    }

                    @Override
                    public String getDescription() {
                        return "Choose Folder";
                    }
                });
                jfc.setFileSelectionMode(JFileChooser.DIRECTORIES_ONLY);
                jfc.setCurrentDirectory(defaultDir);
                jfc.setAcceptAllFileFilterUsed(false);
                return null;
            }
        });     
        // getFolderSelected();
    }

    public String getFolderSelected() {
        returnVal = jfc.showDialog(this, "Select");
        if (returnVal == JFileChooser.APPROVE_OPTION) {
            folderPath = jfc.getSelectedFile().getAbsolutePath();
            System.out.println("You chose to open this folder: "
                    + jfc.getSelectedFile().getAbsolutePath());
        } else {
            folderPath = defaultPath;
            System.out.println("Rejected by User" + folderPath);
        }
        return folderPath;
    }

    public static void main(String args[]) {

    }
} 
```

Note: I have done the following things,

1.  Signed jar using this commands

    keytool -genkey -validity 3650 -keystore pKeyStore -alias keyName keytool -selfcert -keystore pKeyStore -alias keyName-validity 3650 jarsigner -keystore pKeyStore AppletClass.jar keyName

2.  Edited policy file in ${java.home}/jre/lib/security/java.policy and added all permission. By doing this, the applet runs succesfully and choosing the folder in my machine/computer but not in others. This should work in all client machines. And i do not know how/where to add policy file to the project or application.

3.  Added privileged action classes in java file. and pasted the code below.

4.  When i run the applet normally instead calling from jsp, it works fine.

5.  Im using java version: jdk1.6.0_12 and jre6

Thanks.

**EDITED:** Finally this works, I changed the function `getFolderSelected()` which is calling from javascript,

```
public String getFolderSelected(){
        AccessController.doPrivileged(new PrivilegedAction() {
            public Object run() {
                returnVal=jfc.showDialog(JFolderChooser.this, "Select");    
                if(returnVal == JFileChooser.APPROVE_OPTION) {
                    folderPath = jfc.getSelectedFile().getAbsolutePath();
                    System.out.println("You chose to open this folder: " + jfc.getSelectedFile().getAbsolutePath());
                }else {
                    folderPath = defaultPath;
                    System.out.println("Rejected by User"+folderPath);  
                }
                return folderPath;
            }
        });
        return folderPath;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T19:39:49.413

似乎您的小程序正试图从 LFS 获取 JRE L&F 作为

> C:\文档和设置\用户

...而且，此外，将`"c:\\"`其设为默认路径并不是一个好主意，因为通常它不是当前操作系统用户会话根目录（至少对于 Windows 而言），无论如何...

回到堆栈跟踪......这可能是 L&F 问题。因此，尝试使用默认 L&F 运行小程序，或者将 Windows L&F 与您的小程序一起打包（到 jar 文件中），而不是读取客户端的。

PS 我不太确定这里...但是检查您的 Internet 浏览器 Java 设置。我记得，Oracle 最近限制了一些默认的小程序选项，所以也许你必须手动设置它们：S

* * *

报告是否有帮助

# php - Recursive regex not matching template blocks

> ID：15478935
> 
> 赞同：2
> 
> 时间：2013-03-18T14:13:51.903
> 
> 标签：php, regex, pcre

I'm trying to understand more about regex and in this case the recursion you can do in a regular expression.

I'm trying to match a nested block of `{foreach $VAR} ... {/foreach}`. But for some reason my regex isn't matching and i don't understand why.

I was hoping anyone here could shed some light on it. I'm **not** interested in a quick regex fix. But really more as why my regex isn't doing what i expect. What exactly is happening?

This is the code i have:

```
<?php
$str = 'start of text
{foreach $ABC}
  in 1st loop
  {foreach $XYZ}
    in 2nd loop
  {/foreach}
{/foreach}
some other stuff';

if ( preg_match ( '#{foreach \$.*?}((?!foreach)|(?R))*{/foreach}#', $str, $matches ) )
{
    print_r($matches);
}
else
{
    echo 'No match';
} 
```

Here is the breakdown of my regex as how i think it's wokring:

```
{foreach \$     #match literally "{foreach $"
.*?}            #followed by any character ending with a '}'
(               # start a group
  (?!foreach)   # match any character, aslong as it's not the sequence 'foreach'
  |             # otherwise
  (?R)          # do a recursion
)               # end of group
*               # match 0 or more times with a backtrace...
{/foreach}      # ...backtracing until you find the last {/foreach} 
```

That's how i think the regex works. But obviously that is not the case. So my question is, where am i wrong in my explanation?

You can play around with this code here: [http://codepad.viper-7.com/508V9w](http://codepad.viper-7.com/508V9w)

* * *

Just to clarify.

I'm trying to get the contents of each `foreach` block. So in my case:

```
arr[0] => in 1st loop
      {foreach $XYZ}
        in 2nd loop
      {/foreach}
arr[1] => in 2nd loop 
```

OR -

```
arr[0] => {foreach $ABC}
      in 1st loop
      {foreach $XYZ}
        in 2nd loop
      {/foreach}
    {/foreach}
arr[1] => {foreach $XYZ}
        in 2nd loop
      {/foreach} 
```

Either will do fine.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T14:49:00.707

首先，默认情况下，除了换行符之外，它`.`确实匹配*任何内容。*要让它也匹配换行符，您必须设置修饰符`s`。

其次，您在这里使用了断言：`((?!foreach)|(?R))*`，但没有实际的字符可以匹配。`*`在量词或其他东西之前至少需要一个点。

`#{foreach \$.*?}((?!foreach)|(?R)).*{/foreach}#s`使用您的测试文本给出以下结果：

```
Array
(
    [0] => {foreach $ABC}
  in 1st loop
  {foreach $XYZ}
    in 2nd loop
  {/foreach}
{/foreach}
    [1] => 
) 
```

# php - PHP/JSON 数组中偶尔会丢失一条记录

> ID：15478936
> 
> 赞同：0
> 
> 时间：2013-03-18T14:13:57.937
> 
> 标签：php, javascript, arrays, json, multidimensional-array

我正在调用 PHP 脚本来获取结果，然后将数组转换为 javascript 数组。我的数组是用于多项选择测验，可以有 2 到 6 个答案，它用答案拉出问题。

我一直在做很多测试，有时会在预期的时候丢失记录。例如，在拉下一个应该有 5 个答案的问题后，只拉出 4 个答案。即使我重新加载测验，也会丢失相同的结果。

这似乎是随机的，没有关于何时出现此问题的模式，例如，第一次测试发现第一个有六个答案的问题缺少一个答案结果。另一个测试发现第三个问题是一个四个答案的问题，缺少一个答案结果。

我使用了 Javascript 控制台，当其中一个问题缺少结果时，我可以识别的唯一模式是 answerid 始终是第一个，即如果 answerid 是 285、286、287，那么 285 将是缺少一个。

在 25 个测试问题中，只有 3 个结果缺失。

这是我的代码，PHP脚本...

```
$thisquizid = $_REQUEST['quizidvalue'];
$questionquery = pg_query($db_handle, "SELECT * FROM question LEFT JOIN answer USING (questionid) WHERE quizid = '$thisquizid'");
$questionrows = pg_num_rows($questionquery); 
$questionresult = pg_fetch_array($questionquery); 

$questions = array();

while($row = pg_fetch_array($questionquery)) {
    $questions[$row['questionid']][] = $row;
}
die(json_encode($questions)); 
```

还有我的 Javascript

```
var questions;
var currentquestion = 0;

$(document).ready(function(){

        console.debug("in ajax");
        jQuery.ajax({

                    error: function (data, textStatus, errorThrown){
                        console.log(data);
                        console.log(textStatus);
                        console.log(errorThrown);
                    },
                    url:"quizajax.php",
                    dataType: "json",
                    data: { 
                        quizidvalue: <?=$thisquizid?>
                    },

            }).done(function(data) {
                    questions = data;
                    for(i in data){
                        console.log(data[i]);

                    }
                });

        $("#nextquestionbtn").click(function () {
            nextQuestion();
        });
    });

function nextQuestion (){
    for(i in questions) {
        if(i<=currentquestion)
            continue;

        currentquestion = i;

        for(y in questions[i]) {
            console.log("CurrentA: "+ currentquestion);
            console.log("I: " + i);
            console.log(questions[i][y].answerid);
        }

        console.log("CurrentQ: "+ currentquestion);
        console.log("I: " + i);
        console.log(questions[i]);

        questionVariables ();

        break;
    } 
```

这是我数据库中记录的问题

```
questionid | quizid | questiontype | qdescription | qfilelocation | noofanswers | answertype | answerid | adescription | afilelocation | iscorrect 
------------+--------+--------------+--------------+---------------+-------------+------------+----------+--------------+---------------+-----------
        295 |     57 | text         | 6mark work   | null          |           6 | text       |      795 | sadfds       | null          | t
        295 |     57 | text         | 6mark work   | null          |           6 | text       |      796 | asdfsd       | null          | f
        295 |     57 | text         | 6mark work   | null          |           6 | text       |      797 | asfsadf      | null          | f
        295 |     57 | text         | 6mark work   | null          |           6 | text       |      798 | asdfsadf     | null          | f
        295 |     57 | text         | 6mark work   | null          |           6 | text       |      799 | asdfsadf     | null          | f
        295 |     57 | text         | 6mark work   | null          |           6 | text       |      800 | sadfasdf     | null          | f 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T14:25:28.600

您丢失的行来自 PHP 中的逻辑错误。

在示例的第 4 行中`$questionrows = pg_fetch_array($questionquery);`，您正在调用 pg_num_rows()。这将获取第一行，然后您将忽略该行，因为`while`循环的测试条件`while($row = pg_fetch_array($questionquery))`再次获取数据集的下一行。

由于在循环之前似乎不需要任何行内容，我建议评论或删除第 4 行。

# asp.net-mvc - 在 .NET 中像 moment.js 一样格式化日期

> ID：15478937
> 
> 赞同：4
> 
> 时间：2013-03-18T14:13:58.863
> 
> 标签：asp.net-mvc, date-formatting

是否有任何与 moment.js 类似但用于服务器端格式的 .NET 库？

编辑：所以我可以做类似的事情： someDate.FromNow(); 并返回如下内容：2 年后、明年、3 个月、2 周、2 天、12 小时、明天、30 分钟、5 秒、现在、不到 1 分钟前、1 分钟前, 1 小时前, 昨天, 3 天前, 1 周前, 1 个月前, 1 个月前, 等等。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-08-14T23:39:47.727

终于找到了答案：Humanizer 照顾好这个。

[https://github.com/MehdiK/Humanizer](https://github.com/MehdiK/Humanizer)

谢谢大家。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T14:38:28.183

您可以使用 .Net 内置功能。

**对于解析：**

[DateTime.Parse 方法（字符串）](http://msdn.microsoft.com/en-us/library/1k1skd40%28v=vs.100%29.aspx)：将日期和时间的指定字符串表示形式转换为其等效的 DateTime。

[DateTime.ParseExact 方法 (String, String, IFormatProvider)](http://msdn.microsoft.com/en-us/library/w2sa9yss.aspx)：使用指定的格式和特定​​于区域性的格式信息将日期和时间的指定字符串表示形式转换为其 DateTime 等效项。字符串表示的格式必须与指定的格式完全匹配。

**对于格式化：**

[自定义日期和时间格式字符串](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)

[标准日期和时间格式字符串](http://msdn.microsoft.com/en-us/library/az4se3k1.aspx)

**对于日期时间操作：**

参考：[日期时间结构](http://msdn.microsoft.com/en-us/library/system.datetime.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T14:19:06.317

.NET 类库有很多日期和时间格式化功能：http: [//msdn.microsoft.com/en-us/library/8kb3ddd4.aspx](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-11T17:10:54.760

我们实现了类似于旧的 VB6 DateDiff 函数的东西。

这将为您提供基于特定单位（年、季度、月、日、小时、分钟、秒、毫秒、滴答声等）的两个日期之间的差异。

您可能可以使用或修改它来满足您的需求。我们可能会添加一个将单元（howToCompare）作为强类型枚举的覆盖。

您可以在另一种方法中使用它，该方法收集“普通英语”的确切时差，为您提供类似： **“[DateX] 和 [DateY] 之间的差异是 1 年、3 个月、12 天、4 小时、23 分钟、55 秒和 213 毫秒。”**

```
 /// <summary>
    /// Same common parameters as the VB6 DateDiff
    /// </summary>
    /// <example>
    /// System.DateTime dt1 = new System.DateTime(1974,12,16);
    /// System.DateTime dt2 = new System.DateTime(1973,12,16);
    /// Console.Write(DateDiff("yyyy", dt1, dt2).ToString()));
    /// Returns:  -1
    /// </example>
    /// <param name="howToCompare">The units to return (m = minutes, s = seconds, t = ticks, mm = milliseconds, yyyy = years, q = quarters, d = days)</param>
    /// <param name="startDate">The starting date to compare</param>
    /// <param name="endDate">The ending date to compare</param>
    /// <returns>The difference in selected units</returns>
    public static double DateDiff(string howToCompare, System.DateTime startDate, System.DateTime endDate)
    {
        double diff = 0;
        try
        {
            System.TimeSpan TS = new System.TimeSpan(startDate.Ticks - endDate.Ticks);
            switch (howToCompare.ToLower())
            {
                case "m":
                    diff = System.Convert.ToDouble(TS.TotalMinutes);
                    break;
                case "s":
                    diff = System.Convert.ToDouble(TS.TotalSeconds);
                    break;
                case "t":
                    diff = System.Convert.ToDouble(TS.Ticks);
                    break;
                case "mm":
                    diff = System.Convert.ToDouble(TS.TotalMilliseconds);
                    break;
                case "yyyy":
                    diff = System.Convert.ToDouble(TS.TotalDays / 365);
                    break;
                case "q":
                    diff = System.Convert.ToDouble((TS.TotalDays / 365) / 4);
                    break;
                default:
                    //d
                    diff = System.Convert.ToDouble(TS.TotalDays);
                    break;
            }
        }
        catch
        {
            diff = -1;
        }

        return diff;
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-15T07:31:47.710

看看[Noda Time](http://nodatime.org/)，noda time 是一个用于真正高级日期时间操作的 .net 库。

# javascript - Firefox 和 Opera 中的 jwPlayer 调整大小问题

> ID：15478945
> 
> 赞同：0
> 
> 时间：2013-03-18T14:14:10.310
> 
> 标签：javascript, jquery, jwplayer

```
<script type="text/javascript" src="js/jwplayer/jwplayer.js"></script> 
   <div id="myElement"">Loading the player...</div>

<script type="text/javascript">
    jwplayer("myElement").setup({
        file: "video/mosk.mp4",
        image: "img/fwd22group/mosk.jpg",
        width: "880px",
        height: "500px"
    });
</script> 
```

当我在 chrome 中使用此代码时，它工作正常，但在 Firefox 和 Opera 中，它不起作用。根据[这个](https://stackoverflow.com/questions/12256225/jw-player-not-working-properly-in-firefox-and-ie9)问题，它取决于宽度和高度。

我应该在这里做什么来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T14:32:41.463

我发现解决方案只需要删除 px

```
<script type="text/javascript">
    jwplayer("myElement").setup({
        file: "video/mosk.mp4",
        image: "img/fwd22group/mosk.jpg",
        width: "880",
        height: "500"
    });
</script> 
```

# python - importError：没有名为 Coreapp 的模块（Flask 和 Google App Engine）

> ID：15478948
> 
> 赞同：3
> 
> 时间：2013-03-18T14:14:14.167
> 
> 标签：python, google-app-engine, flask, ubuntu-12.04

我正在尝试在本地服务器上运行和部署我的 Web 应用程序。我正在学习如何使用谷歌应用引擎，当我命令 dev_appserver.py flaskapp 在 flaskapp 上方的一个目录但在我的仓库中时，我收到了这个错误：

```
uzuki@ubuntu:~/hw3p1s13$ ~/Downloads/google_appengine/dev_appserver.py flaskapp/
INFO     2013-03-18 03:43:12,890 appcfg.py:618] Checking for updates to the SDK.
INFO     2013-03-18 03:43:13,398 appcfg.py:636] The SDK is up to date.
WARNING  2013-03-18 03:43:13,398 dev_appserver.py:3578] The datastore file stub is    deprecated, and
will stop being the default in a future release.
Append the --use_sqlite flag to use the new SQLite stub.

 You can port your existing data using the --port_sqlite_data flag or
 purge your previous test data with --clear_datastore.

 WARNING  2013-03-18 03:43:13,400 datastore_file_stub.py:528] Could not read datastore      data from /tmp/dev_appserver.datastore
 WARNING  2013-03-18 03:43:13,618 simple_search_stub.py:975] Could not read search   indexes from /tmp/dev_appserver.searchindexes
 INFO     2013-03-18 03:43:14,431 dev_appserver_multiprocess.py:656] Running application dev~robohw27 on port 8080:     http://localhost:8080
 INFO     2013-03-18 03:43:14,432 dev_appserver_multiprocess.py:658] Admin console is available at:     http://localhost:8080/_ah/admin
 ERROR    2013-03-18 03:44:05,236 wsgi.py:219] 
 Traceback (most recent call last):
 File "/home/uzuki/Downloads/google_appengine/google/appengine/runtime/wsgi.py", line 196, in Handle
 handler = _config_handle.add_wsgi_middleware(self._LoadHandler())
 File "/home/uzuki/Downloads/google_appengine/google/appengine/runtime/wsgi.py", line 255, in _LoadHandler
handler = __import__(path[0])
ImportError: No module named coreapp
INFO     2013-03-18 03:44:05,265 dev_appserver.py:3104] "GET / HTTP/1.1" 500 -
ERROR    2013-03-18 03:44:07,858 wsgi.py:219] 
```

奇怪的是我确实有一个名为 coreapp 的目录，其中包含两个文件`__init__.py`和 views.py。该`__init__.py`文件夹包含

```
from flask import Flask
app = Flask('coreapp')
import views 
```

我的 views.py 文件处理对特定 URL 的 HTTP 请求。总而言之，它确实包含`from coreapp import app`. 所以我不确定我做错了什么？？

只需添加，在我的 flaskapp 目录中的 app.yaml 文件中，它包含：

```
handlers
- url: .*
script : coreapp.app 
```

编辑：

大家好。我发现了我的问题，这太愚蠢了：

我想要“ `__init__.py`”，但我有“ `__int__.py`”。（严重错别字！）

另外，我只是 views.py 文件中的 gedit 编辑器。但我有空格和错误的撇号。如果其他人有类似的问题，请告诉我。

谢谢！我会在 6 小时内回答我自己的问题，哈哈。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T19:43:04.453

我发现了我的问题，这太愚蠢了：

我想要“ `__init__`”.py”，但我有“ `__int__.py`”。（严重错字！）

另外，我只是 views.py 文件中的 gedit 编辑器。但我有空格和错误的撇号。如果其他人有类似的问题，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T14:43:47.403

```
import sys
sys.path.append(whereever_coreapp_is) 
```

# jquery - 在数据属性中传递 jQuery InnerFade 高度值

> ID：15478949
> 
> 赞同：0
> 
> 时间：2013-03-18T14:14:22.950
> 
> 标签：jquery, html, attributes, fade

我在一个新项目的多个位置使用 jQuery Innerfade，我希望能够在附加到容器的数据属性中动态传递容器高度值，而不是为每个实例更改 jQuery，例如我会喜欢在 HTML 中传递容器高度，如下所示：

HTML：

```
<div class="fade" data-height="190">
        <a href="#" title=""><img src="http://placehold.it/190x190&text=Brand%201" alt=""></a>
        <a href="#" title=""><img src="http://placehold.it/190x190&text=Brand%202" alt=""></a>
        <a href="#" title=""><img src="http://placehold.it/190x190&text=Brand%203" alt=""></a>
</div> 
```

然后从任何实例中获取附加的高度，如下所示：

```
$('.fade').innerFade({
    containerHeight: $(this).attr('data-height')+'px'
}); 
```

我上面的内容不起作用，但它应该为您提供我正在努力实现的目标。基本上我想获取相关元素的 data-height 属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T14:24:48.070

你试过这个...

```
containerHeight: '"' + $('.fade').attr('data-height') + 'px"' 
```

# javascript - 对数组元素进行排序（带数字的字符串），自然排序

> ID：15478954
> 
> 赞同：54
> 
> 时间：2013-03-18T14:15:04.650
> 
> 标签：javascript, jquery, sorting

我有一个像这样的数组；

```
["IL0 Foo", "PI0 Bar", "IL10 Baz", "IL3 Bob says hello"] 
```

并且需要对其进行排序，使其看起来像；

```
["IL0 Foo", "IL3 Bob says hello", "IL10 Baz", "PI0 Bar"] 
```

我尝试了排序功能；

```
function compare(a,b) {
  if (a < b)
     return -1;
  if (a > b)
    return 1;
  return 0;
} 
```

但这给出了命令

```
["IL0 Foo", "IL10 Baz", "IL3 Bob says hello", "PI0 Bar"] 
```

我试图想出一个可以工作但无法理解的正则表达式。
如果有帮助，格式将始终是 2 个字母、x 个数字，然后是任意数量的字符。

* * *

## 回答 #1

> 赞同：109
> 
> 时间：2013-03-18T14:33:08.317

这称为“自然排序”，可以像这样在 JS 中实现：

```
function naturalCompare(a, b) {
    var ax = [], bx = [];

    a.replace(/(\d+)|(\D+)/g, function(_, $1, $2) { ax.push([$1 || Infinity, $2 || ""]) });
    b.replace(/(\d+)|(\D+)/g, function(_, $1, $2) { bx.push([$1 || Infinity, $2 || ""]) });

    while(ax.length && bx.length) {
        var an = ax.shift();
        var bn = bx.shift();
        var nn = (an[0] - bn[0]) || an[1].localeCompare(bn[1]);
        if(nn) return nn;
    }

    return ax.length - bx.length;
}

/////////////////////////

test = [
    "img12.png",
    "img10.png",
    "img2.png",
    "img1.png",
    "img101.png",
    "img101a.png",
    "abc10.jpg",
    "abc10",
    "abc2.jpg",
    "20.jpg",
    "20",
    "abc",
    "abc2",
    ""
];

test.sort(naturalCompare)
document.write("<pre>" + JSON.stringify(test,0,3));
```

要以相反的顺序排序，只需交换参数：

```
test.sort(function(a, b) { return naturalCompare(b, a) }) 
```

或者干脆

```
test = test.sort(naturalCompare).reverse(); 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2017-07-24T11:03:21.677

你可以[`String#localeCompare`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/localeCompare)使用`options`

> **灵敏度**
> 
> 字符串中的哪些差异应导致非零结果值。可能的值为：
> 
> *   `"base"`: 只有基本字母不同的字符串比较不相等。例子：`a ≠ b`, `a = á`, `a = A`.
> *   `"accent"`：只有在基本字母或重音符号和其他变音符号不同的字符串比较为不相等。例子：`a ≠ b`, `a ≠ á`, `a = A`.
> *   `"case"`: 只有在基本字母或大小写不同的字符串比较不相等。例子：`a ≠ b`, `a = á`, `a ≠ A`.
> *   `"variant"`: 基本字母、重音符号和其他变音符号不同的字符串，或者大小写比较不相等的字符串。也可以考虑其他差异。例子：`a ≠ b`, `a ≠ á`, `a ≠ A`.
> 
> 对于使用“排序”，默认为“变体”；它依赖于使用“搜索”的语言环境。
> 
> **数字**
> 
> 是否应使用数字排序规则，例如“1”<“2”<“10”。可能的值为`true`和`false`; 默认为`false`. 可以通过选项属性或通过 Unicode 扩展键设置此选项；如果两者都提供，则`options`属性优先。不需要实现来支持此属性。

```
var array = ["IL0 Foo", "PI0 Bar", "IL10 Baz", "IL3 Bob says hello"];

array.sort(function (a,b) {
    return a.localeCompare(b, undefined, { numeric: true, sensitivity: 'base' });
});

console.log(array);
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-18T14:29:48.913

```
var re = /([a-z]+)(\d+)(.+)/i;
var arr = ["IL0 Foo", "PI0 Bar", "IL10 Baz", "IL3 Bob says hello"];
var order = arr.sort( function(a,b){
    var ma = a.match(re),
        mb = b.match(re),
        a_str = ma[1],
        b_str = mb[1],
        a_num = parseInt(ma[2],10),
        b_num = parseInt(mb[2],10),
        a_rem = ma[3],
        b_rem = mb[3];
    return a_str > b_str ? 1 : a_str < b_str ? -1 : a_num > b_num ? 1 : a_num < b_num ? -1 : a_rem > b_rem;  
}); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-07-24T19:15:27.183

我非常喜欢georg 的解决方案，但我需要下划线（“_”）在数字之前进行排序。以下是我修改他的代码的方式：

```
var chunkRgx = /(_+)|([0-9]+)|([^0-9_]+)/g;
function naturalCompare(a, b) {
    var ax = [], bx = [];

    a.replace(chunkRgx, function(_, $1, $2, $3) {
        ax.push([$1 || "0", $2 || Infinity, $3 || ""])
    });
    b.replace(chunkRgx, function(_, $1, $2, $3) {
        bx.push([$1 || "0", $2 || Infinity, $3 || ""])
    });

    while(ax.length && bx.length) {
        var an = ax.shift();
        var bn = bx.shift();
        var nn = an[0].localeCompare(bn[0]) || 
                 (an[1] - bn[1]) || 
                 an[2].localeCompare(bn[2]);
        if(nn) return nn;
    }

    return ax.length - bx.length;
}

/////////////////////////

test = [
    "img12.png",
    "img10.png",
    "img2.png",
    "img1.png",
    "img101.png",
    "img101a.png",
    "abc10.jpg",
    "abc10",
    "abc2.jpg",
    "20.jpg",
    "20",
    "abc",
    "abc2",
    "_abc",
    "_ab_c",
    "_ab__c",
    "_abc_d",
    "ab_",
    "abc_",
    "_ab_cd",
    ""
];

test.sort(naturalCompare)
document.write("<pre>" + JSON.stringify(test,0,3));
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-05-08T06:12:17.173

用前导零填充字符串中的数字，然后正常排序。

```
var naturalSort = function (a, b) {
    a = ('' + a).replace(/(\d+)/g, function (n) { return ('0000' + n).slice(-5) });
    b = ('' + b).replace(/(\d+)/g, function (n) { return ('0000' + n).slice(-5) });
    return a.localeCompare(b);
}

var naturalSortModern = function (a, b) {
    return ('' + a).localeCompare(('' + b), 'en', { numeric: true });
}

console.dir((["IL0 Foo", "PI0 Bar", "IL10 Baz", "IL3 Bob says hello"].sort(naturalSort)));

console.dir((["IL0 Foo", "PI0 Bar", "IL10 Baz", "IL3 Bob says hello"].sort(naturalSortModern)));
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-03-18T14:29:56.527

您可以执行这样的正则表达式来获取字符串的非数字和数字部分：

```
var s = "foo124bar23";
s.match(/[^\d]+|\d+/g) 
```

返回：`["foo", "124" , "bar" , "23"]`

然后在您的比较函数中，您可以遍历两个字符串的各个部分，逐部分比较它们。第一个不匹配的部分决定了整体比较的结果。对于每个部分，检查该部分是否以数字开头，如果是，则在进行比较之前将其解析为数字。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-18T14:43:00.113

添加另一种选择（为什么不）：

```
var ary = ["IL0 Foo", "PI0 Bar", "IL10 Hello", "IL10 Baz", "IL3 Bob says hello"];

// break out the three components in to an array
// "IL10 Bar" => ['IL', 10, 'Bar']
function getParts(i){
    i = i || '';
    var parts = i.match(/^([a-z]+)([0-9]+)(\s.*)$/i);
    if (parts){
        return [
            parts[1],
            parseInt(parts[2], 10),
            parts[3]
        ];
    }
    return []; // erroneous
}
ary.sort(function(a,b){
    // grab the parts
    var _a = getParts(a),
        _b = getParts(b);

    // trouble parsing (both fail = no shift, otherwise
    // move the troubles element to end of the array)
    if(_a.length == 0 && _b.length == 0) return 0;
    if(_a.length == 0) return -1;
    if(_b.length == 0) return 1;

    // Compare letter portion
    if (_a[0] < _b[0]) return -1;
    if (_a[0] > _b[0]) return 1;
    // letters are equal, continue...

    // compare number portion
    if (_a[1] < _b[1]) return -1;
    if (_a[1] > _b[1]) return 1;
    // numbers are equal, continue...

    // compare remaining string
    if (_a[2] < _b[2]) return -1;
    if (_a[2] > _b[2]) return 1;
    // strings are equal, continue...

    // exact match
    return 0;
}); 
```

[jsfiddle 示例](http://jsfiddle.net/eHNH7/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-18T14:25:05.297

不漂亮，但检查前两个字符代码。如果全部相等，则解析并比较数字：

```
var arr = ["IL0 Foo", "IL10 Baz", "IL3 Bob says hello", "PI0 Bar"];
arr.sort(function (a1, b1) {
    var a = parseInt(a1.match(/\d+/g)[0], 10),
        b = parseInt(b1.match(/\d+/g)[0], 10),
        letterA = a1.charCodeAt(0),
        letterB = b1.charCodeAt(0),
        letterA1 = a1.charCodeAt(1),
        letterB1 = b1.charCodeAt(1);
    if (letterA > letterB) {
        return 1;
    } else if (letterB > letterA) {
        return -1;
    } else {
        if (letterA1 > letterB1) {
            return 1;
        } else if (letterB1 > letterA1) {
            return -1;
        }
        if (a < b) return -1;
        if (a > b) return 1;
        return 0;
    }
}); 
```

[**例子**](http://jsfiddle.net/JmwZG/)

# sql - 根据过去一个月确定两个日期之间的天数/月数差异

> ID：15478956
> 
> 赞同：0
> 
> 时间：2013-03-18T14:15:09.883
> 
> 标签：sql, sql-server

我必须实施一个解决方案，其中两个日期之间的差异可以是几个月或几天。

例如，我在日期`date1`和`date2`. 我应该找出日期差异是超过一个月还是不到一个月。

实例 1 -

```
Date1 - 30-01-2007
Date2 - 01-03-2007 
```

虽然日期差异是 30 天，不到一个月，但如果你看到整个 2 月都过去了，那么它应该在 1 个月的范围内。

实例 2 -

```
Date1 - 26-11-2007
Date2 - 26-12-2007 
```

这里日期差异是 30 天，由于经过的月份是 2007 年 11 月，因此应该与 30 进行比较。因此是 1 个月

实例 3 -

```
Date1 - 16-02-2010
Date2 - 17-03-2010 
```

虽然日期差异是 29 天，但由于经过的月份是 2010 年 2 月。它应该与 28 进行比较。因此它又是 1 个月。

Datediff 没有给出正确的结果。对于下面提到的 datediff，结果是 1。但结果实际上应该是 2。

```
select datediff(month,'2007-01-01','2007-02-28') 
```

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T14:59:40.670

您将不得不手动执行此操作。

使用日期差异，但传递天数。IE：

```
select datediff(day,'2007-01-01','2007-02-28') 
```

使用这个数字，找出是哪个月份。IE：

```
select datepart(month,'2007-01-01') 
```

然后根据月份和经过的天数使用 case 语句。

# php - .htaccess 文件在 godaddy 服务器上不起作用

> ID：15478957
> 
> 赞同：1
> 
> 时间：2013-03-18T14:15:18.743
> 
> 标签：php, .htaccess, mod-rewrite

我更新了我的网站[tutorialdata.com](http://tutorialdata.com)，它使用 .htaccess 进行重定向规则。当我在 localhost 上检查时它工作正常，但是当我启动它时它不能正常工作。只有少数页面可以正常显示，其中大部分显示空白页面。

用于 .htaccess 的代码

```
RewriteBase www.tutorialdata.com/

RewriteCond %{REQUEST_URI} examples/(.*)/(.*)/(.*)/(.*)
RewriteRule ^examples/(.*)/(.*)/(.*)/(.*)$ examples.php?action=pgm&l=$1&c=$2&s=$3&p=$4

RewriteCond %{REQUEST_URI} examples/(.*)/(.*)/(.*)
RewriteRule ^examples/(.*)/(.*)/(.*)$ examples.php?action=subcat&l=$1&c=$2&s=$3

RewriteCond %{REQUEST_URI} examples/(.*)/(.*)
RewriteRule ^examples/(.*)/(.*)$ examples.php?action=cat&l=$1&c=$2 
```

如何消除此错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-23T19:53:59.317

这之前已经类似地发布过，所以它是重复的，但无论如何我都会回答。我假设您知道如何在本地服务器正常工作时启用 ModRewrite。这可能是问题所在，因为 GoDaddy 可能不允许您更改 httpd.conf 文件。如果是这种情况，您需要查看 GoDaddy 常见问题解答，然后联​​系他们的支持人员以获取更多信息。

# c# - 'System.ComponentModel.INotifyPropertyChanging' 在两个地方使用 MVVMLight 便携式库

> ID：15478958
> 
> 赞同：2
> 
> 时间：2013-03-18T14:15:20.080
> 
> 标签：c#, mvvm, mvvm-light, portable-class-library

当我尝试将本地数据库添加到我的 Windows Phone 8 项目时，我收到了这个有趣的错误。

> 'e:\users\keenan\Documents\Visual Studio 2012\Projects\MAL.WindowsPhone\packages\Portable.MvvmLightLibs.4.1.27.1\lib\wp8\GalaSoft.MvvmLight 中都存在“System.ComponentModel.INotifyPropertyChanging”类型。 dll' 和 'C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\WindowsPhone\v8.0\System.dll'

为什么`System.ComponentModel.INotifyPropertyChanging`在 MVVM Portable NuGet 包的 WP8 库中？这是一个错误吗，因为我认为它与 Windows Phone 8 的 mscorlib 中已有的内容冲突。

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T14:46:57.307

请尝试最新的 Portable.MvvmLightLibs (4.1.27.3)。我不得不从 PCL 版本中删除 INotifyPropertyChanging，因为真的没有办法让它跨平台正常工作。

我们需要微软为此提供一个 shim（类似于 Microsoft.Bcl），以便在 WP 上正确拾取它。

如果您需要属性更改通知（在值更改之前 - 这是非常罕见的，很少有东西使用它），一种选择可能是创建自己的接口并在 ObservableObject 的派生类型中实现它（您可以覆盖 RaisePropertyChanging 方法以了解何时提出自己的事件）。

如果 Microsoft 在 PCL 中添加对 INotifyPropertyChangning 的支持，我肯定会将其添加回 MVVMLight。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T20:27:43.520

您可以使用的一种简单解决方案是下载 MVVM Light 的源代码并删除 ObservableObject 中对 INotifyPropertyChanging 的所有引用。自己编译库，然后它应该可以正常工作。

# javascript - 无法在 javascript 滑块中添加指向图像的单个链接

> ID：15478959
> 
> 赞同：1
> 
> 时间：2013-03-18T14:15:20.937
> 
> 标签：javascript, jquery, html, css

我有一个用于客户站点的 javascrpit 滑块，但我不知道如何链接滑块中的各个图像。滑块功能齐全，除了链接问题外，效果很好。

我发现如果我从 <--ul class="items"-->( 下面) 中删除项目，我可以链接 <--li--> 图像并让它们充当普通链接，但是我失去了 javaslider 功能. 我已经尝试了一切。

我的目标是将每个图像链接到网站上的相应页面。共有4张图片。我对这些东西很陌生，所以任何帮助都会很棒。

```
<script>
    $(document).ready(function(){
      $('.gallery')._TMS({
      show:0,
      pauseOnHover:true,
      prevBu:'.prev',
      nextBu:'.next',
      playBu:'.play',
      duration:700,
      preset:'fade',
      pagination:$('.img-pags').uCarousel({show:4,shift:0}),
      pagNums:false,
      slideshow:7000,
      numStatus:true,
      banners:false,
      waitBannerAnimation:false,
      progressBar:false 

      })        
 }) 
```

网站

```
 <div class="container_12">
      <div class="grid_12">
        <div id="slide">                
            <div class="gallery">
            <ul class="items">

                    <li><a href="about.html"><img src="images/gallery-big-1.jpg" alt="">     </a></li>

                    <li><img src="images/gallery-big-5.jpg" alt=""></li>

                    <li><img src="images/gallery-big-2.jpg" alt=""></li>

                    <li><img src="images/gallery-big-6.jpg" alt=""></li>
               </ul>

            </div>
            <a href="#" class="prev"></a><a href="#" class="next"></a>
        </div>      
      </div>

#slide {  width:940px; height:415px; position:relative; overflow:hidden; z-index:2; }

.gallery {
width:940px;
position:relative;
z-index:2
}
.items {display:none;}
.pag { position:relative;}
.img-pags {position:static; left:0px; z-index:1; display:block;}
.img-pags ul {margin:0}
.img-pags li { width:200px; height:170px; margin-right:20px; display:block;     overflow:hidden;  }
.img-pags li a {position:relative;display:block;border:#f4f4f4 5px solid; }
.img-pags li a img {}
.img-pags li a span{ display:block; background:#fff;}
.img-pags li.active a,.img-pags li a:hover{border:#CCC 5px solid;}
.img-pags li.active a img,.img-pags li a:hover img{}
.prev {background:url(../images/prev-1.gif) 0 0 no-repeat; bottom:1px; left:1px;      display:block; position:absolute; width:44px;height:44px; z-index:9999;}
.next{background:url(../images/next-1.gif) 0 0 no-repeat; bottom:1px; right:1px; display:block; position:absolute; width:44px;height:44px; z-index:9999;}
.prev:hover, .next:hover {background-position: 0 bottom;} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-04T22:17:53.153

`<a>`在标签中使用 jQuery 包装画廊图像，这里是[Fiddle](http://jsfiddle.net/mdesdev/TqXdt/)。

**HTML**

```
<div id="slide">

  <div class="gallery">

    <ul class="items">

      <li>
        <img src="images/gallery-big-1.jpg" alt="" data-link="http://google.com" />
      </li>
      <li>
        <img src="images/gallery-big-5.jpg" alt="" data-link="http://jsfiddle.net" />
      </li>
      <li>
        <img src="images/gallery-big-2.jpg" alt="" data-link="http://stackoverflow.com" />
      </li>
      <li>
        <img src="images/gallery-big-6.jpg" alt="" data-link="http://api.jquery.com" />
      </li>

    </ul>

  </div>

  <a href="#" class="prev"></a> <a href="#" class="next"></a>

</div> 
```

**jQuery**

提示：把它`</body>`放在你的 HTML之前

```
$(function() {

  $('.gallery ul li img').each(function() {

    var imgHref = $(this).attr('data-link');

    $(this).wrap('<a href="' + imgHref + '"</a>');

  });

}); 
```

# java - 找不到符号 InputStreamer

> ID：15478960
> 
> 赞同：1
> 
> 时间：2013-03-18T14:15:23.650
> 
> 标签：java, io

```
import java.io.*;
public class MgSq
{
    public static BufferedReader input = new BufferedReader(new 
public
InputStreamer(System.in));
    public static void main (String args[]) throws Exception
    {

      int w, x, y, z, b, key;
      boolean n_ok;
      int [] [] square = new int [15] [15];
      {
         System.out.print("Size of square? ");
         b = Integer.parseInt(input.readLine());
     n_ok = (z<=b) & (b<=15+1) & (b%2==1);
         if ( n_ok )
      {
               for (w=0;w<b;w++)
               for (x=0;x<b;x++) square[w][x] = 0;
               square[0][(int)(b-1)/2] = 1;
               key = 2;
               w = 0;
               x = (int)(b-1)/2;
               while ( key <= b*b )
           {
           y = w - 1;
           if ( y < 0 ) y = y + b;
               z = x - 1;
           if ( z < 0 ) z = z + b;
               if ( square[y][z] != 0 ) w = (w+1) % b;
               else 
           { 
        w = y; x = z;
           }
               square[w][x] = key;
               key = key + 1;
           }
         System.out.println("Magic square of size " + b);
         for (w=0;w<b;w++)
            {
               for (x=0;x<b;x++)
                  System.out.print("\t"+square[w][x]);
               System.out.println();
            }
         }      

    }
         System.out.println("Error in number, try again.");
}
} 
```

我不断收到以下错误：

```
MgSq.java:4 error: cannot find symbol 
public static BufferedReader input = new BufferedReader(new InputStreamReader(System.in));

symbol: class InputStreamer
class: MgSq 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T14:21:01.317

由于您 import only `java.io.*`，`InputStreamer`可能是一个错字，您想`InputStream`改用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T14:21:27.063

更改`InputStreamer`为`InputStreamReader`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T14:23:29.993

```
public static BufferedReader input = new BufferedReader(new 
public
InputStreamer(System.in)); 
```

应该

```
public static BufferedReader input = new BufferedReader(new InputStreamReader(System.in)); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-18T14:20:19.923

以下行中的第二个`public`没有意义：

```
public static BufferedReader input = new BufferedReader(new 
public 
InputStreamer(System.in)); 
```

将其更改为

```
public static BufferedReader input = new BufferedReader(new InputStreamer(System.in)); 
```

显然`InputStreamer`不是一个真正的班级。正如其他人所说，尝试`InputStreamReader`或`InputStream`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-18T14:20:33.920

`public`从之前删除`new InputStreamReader`。

# java - 多部分/表单数据表单提交

> ID：15478962
> 
> 赞同：1
> 
> 时间：2013-03-18T14:15:32.423
> 
> 标签：java, html, http, servlets

在 IE9 中，当我向 java servlet 提交带有文件的表单（enc-type: multipart/form-data）时，出现问题。我无法找到错误并找到解决方案。不工作时，Content-Length 为 0。这是请求标头的唯一区别。并且请求消息没有区别。

我如何尝试在 java serlvet 中检索表单数据（使用 org.apache.commons）：

```
ServletFileUpload upload = new ServletFileUpload();
if (!ServletFileUpload.isMultipartContent(request)
    throw new Exception("Invalid parameters");
FileItemIterator itr = upload.getItemIterator(request);
while(itr.hasNext()
{
    // This never gets run when the error occurs (Content-Length: 0).. 
} 
```

我认为表单提交有问题？有谁知道可能出了什么问题？在 chrome 中它总是有效。

更新：html表单的基本部分：

```
<form name='uploadparticipants' action='ParticipantUploader' method='post' encoding='multipart/form-data' enctype='multipart/form-data' target='upload_target' onsubmit='admin.uploadCourseParticipants()'>
// Some input fields inside a table, among them a file input //
<input type='submit' value='somevalue'>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:56:05.973

1.  请确保您`method="post"`在表单创建期间已明确添加。
2.  此外，当使用 Javascript 在 Internet Explorer（6 和 7）中动态创建表单时，出于某种原因，您还需要设置 encoding 属性。因此，虽然该属性称为 enctype，但设置 enctype 没有任何作用。请尝试添加以下代码：

    form.setAttribute('encoding', 'multipart/form-data');

# java - 根据屏幕分辨率不同的布局 - Android

> ID：15478963
> 
> 赞同：3
> 
> 时间：2013-03-18T14:15:38.253
> 
> 标签：java, android

我正在尝试为不同的屏幕分辨率使用不同的布局

我已经成功地做到了。

我的问题是，对于大型和 Xlarge 布局，我只需要横向

和肖像为正常和小。我只使用了 Layout-large-land 和 Layout-xlarge-land

res 文件夹，它也可以拍摄肖像。同样，对于 Normal 和 small，它也可以拍摄肖像

景观。那么我该如何根据屏幕分辨率以编程方式设置方向

在java文件中？？

有人能帮我吗？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T14:23:09.077

您需要在 Activity 的 onCreate 方法中调用它：

```
if ((this.getResources().getConfiguration().screenLayout & Configuration.SCREENLAYOUT_SIZE_MASK)  <= Configuration.SCREENLAYOUT_SIZE_NORMAL) {
            this.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
    } 
```

# php - 如何根据特定的设置规则创建唯一的字母数字代码？

> ID：15478965
> 
> 赞同：3
> 
> 时间：2013-03-18T14:15:44.773
> 
> 标签：php, version-control, database-schema

我需要能够根据以下规则为用户提供其项目的下一个可用文件名。

*   3 个字符代表公司名称或位置

*   1 个字符表示型号（即 2 表示 3200 系列，3 表示 3300 系列）

*   验证类型的 1 个字符，仅是数字 2 或 3

*   1个字符，用于讲述其生产或发展

*   版本号为 1 个字符。（有人建议它是 0 - z ）不知道如何用一个字符来做到这一点。

如果有人对仅用 7 个字符表示所有这些内容的文件命名有更好的想法，请告诉我。文件被加载到电子设备上，它不接受长度超过 7 个字符的文件名。

我想我会创建一个界面，以便有人可以单击该位置并单击 prod 或 dev 的复选框等等，当应用程序提示用户输入文件时，它会吐出一个可行的文件名供用户键入姓名。这些文件可能很多，所以我面临着确保它们保持有序的相当大的挑战，我们可以根据文件的名称发现文件的详细信息并确保它们是唯一的。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T15:16:31.890

像这样的东西应该足以开始测试。它不会在 MySQL 中像所写的那样工作，但您可以用外键约束替换检查约束。

```
create table filenames (
  company_name_or_location char(3) not null,
  model char(1) not null,
  validation_type char(1) not null check (validation_type in ('2', '3')),
  prod_or_dev char(1) not null check (prod_or_dev in ('p', 'd')),
  version char(1) not null,
  primary key (company_name_or_location, model, validation_type, prod_or_dev, version)
); 
```

**笔记**

所有列都允许使用任何字母数字字符，包括（可能）Unicode 字符。那*可能*不是你想要的。消除 Unicode 字符的最佳方法*可能*是使用不包含 Unicode 的排序规则。您*可能*希望对表执行此操作，而不是对整个数据库执行此操作。

如果您使用代理键，您*仍然*需要我为该表编写的*所有其他约束，包括列 {company_name_or_location, model, validation_type, prod_or_dev, version} 上的 UNIQUE 约束。*（您需要所有这些约束，或解释 Unicode 的*等效*约束，以确定模型是否应该允许数字或字母数字等）

# ios - UINavigationController 推送后 UIBarButtonItem 向下移动

> ID：15478970
> 
> 赞同：3
> 
> 时间：2013-03-18T14:15:59.230
> 
> 标签：ios, xcode, uinavigationcontroller, uiappearance

我的应用程序在 UINavigationController 中运行。当我从右侧推入一个新的视图控制器时，右上角的 UIBarButtonItem (Edit) 向下移动 1 个像素 - 编辑按钮保持在原位，但图形明显向下移动。

我注意到这仅在我为栏按钮项设置 UIAppearance 代理后才会发生。这是我这样做的代码：

```
UIImage *barButton = [[UIImage imageNamed:@"navBarBarButton"] resizableImageWithCapInsets:UIEdgeInsetsMake(0, 5, 0, 5)];
[[UIBarButtonItem appearance] setBackgroundImage:barButton
                                        forState:UIControlStateNormal
                                      barMetrics:UIBarMetricsDefault]; 
```

navBarBarButton.png 是一个 52x31 的条形按钮图像。

其他可能相关的信息：

*   这只发生在 iOS 6 模拟器中——在 iOS 5 中没问题。
*   这个应用程序使用故事板，推送由 segues 处理。
*   一个像素的位移只发生一次，即当我进入导航控制器的另一个级别时，它不会第二次被推下。
*   编辑按钮的文本留在原处；只有按钮图形移动。
*   我尝试在不同的视图控制器（即导航堆栈中的第二个）中启动应用程序。条形按钮项目显示在正常（较高）位置，然后在我推入新视图时向下移动。这似乎表明它与任何特定的视图控制器无关。

有没有人看到这个，知道为什么会这样，或者如何防止按钮移动？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T00:16:04.303

如果有人遇到同样的问题，我设法通过将 barButton 图像设置为标准 30px 高度（而不是 31，如上所述）来解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-04T16:10:57.693

我在字体大小为 18 时遇到了问题。在我将其更改为 19 之后，移动消失了，导航栏过渡平滑。

# php - 循环遍历 MySql 表并使用 PHP 以特定顺序输出

> ID：15478974
> 
> 赞同：0
> 
> 时间：2013-03-18T14:16:07.920
> 
> 标签：php, mysql, loops, foreach

下面循环遍历我的 MySql 数据库中的一个表，并在一个匹配的表单元格中显示所有汽车记录。我知道我可以在 MySql 查询中使用 ORDER BY 命令按特定列排序，但是如何将特定记录放在顶部，然后列出所有剩余的匹配项？

例如，在此之前我有一个简单的表单，用户使用 $_POST 方法选择他们最喜欢的汽车 ( `$_POST['user_car']`) 和所需的规格 ( )。`$_POST['user_spec']`因此，我的查询显示了与所选规格匹配的所有记录，但我希望所选汽车位于列表的最顶部，其余的要紧随其后。

```
 $query_params = array( 
            ':spec' => $_POST['user_spec']
        );

        $query = " 
            SELECT 
                *
            FROM 
                table
            WHERE
                spec=:spec
        "; 

        try { 
            $stmt = DB::get()->prepare($query); 
            $stmt->execute($query_params); 
            $rows = $stmt->fetchAll(); 
        }  
        catch(PDOException $ex) {}

        foreach($rows as $row):

            $cell .= '<td>
                          <input type="checkbox" '.$check.' name="spec[]" value="'.$row['id'].'"/><span> '.$row['spec'].'
                      </td>';
        endforeach; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T14:23:10.957

ORDER BY 不仅限于您可以在其中放置评估语句的列（S）。

```
 SELECT 
            *
        FROM 
            table
        WHERE
            spec=:spec
        ORDER BY car_name=:user_car DESC, car_name ASC 
```

如果用户最喜欢的汽车是'mini'，那么car_name 为'mini' 的记录将评估为1，其余为0，因此它将首先出现。其余的汽车将按他们的名字订购。

# .net - CLR 托管。如何在 .net 4 中枚举 _AppDomains

> ID：15478975
> 
> 赞同：2
> 
> 时间：2013-03-18T14:16:20.443
> 
> 标签：.net, clr, unmanaged, clr-hosting

我有用 C 编写的非托管 dll，它将被注入到托管应用程序（dotNet 4）中。我将枚举`_AppDomains`，在此应用程序中运行以将某些模块加载到域中。可以使用`ICorRuntimeHost`界面来执行此操作。但是，`ICorRuntimeHost`已弃用，并且（如[http://msdn.microsoft.com/en-en/library/ms164320%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-en/library/ms164320%28v=vs.100%29.aspx)所述）替换为`ICLRRuntimeHost`.

如何`_AppDomain`使用 执行枚举`ICLRRuntimeHost`？可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T14:48:01.633

在调试接口中有[`ICorPublish`](http://msdn.microsoft.com/en-us/library/ms231592.aspx).

您可以使用该[`ICorPublish::GetProcess()`](http://msdn.microsoft.com/en-us/library/ms232609.aspx)方法检索`ICorPublishProcess`.NET 进程的实例（通过传递相应的进程 ID 来识别，当然，该 ID 可以是当前进程的 ID）。

该接口提供了方法[`ICorPublishProcess::EnumAppDomains()`](http://msdn.microsoft.com/en-us/library/ms231642.aspx)，您可以使用该方法获取目标进程中当前应用程序域的列表，通过枚举器访问`ICorPublishAppDomain`实例。其中每一个都有[`ICorPublishAppDomain.GetName()`](http://msdn.microsoft.com/en-us/library/ms231461.aspx)获取应用程序域名称的方法。

*更新*：我还没有尝试过，但是怎么样：

*   使用上述方法枚举应用程序域（包括通过 获取它们的唯一 ID [`ICorPublishAppDomain.GetID()`](http://msdn.microsoft.com/en-us/library/vstudio/ms230288.aspx)）。

*   用于[`ICLRRuntimeHost::ExecuteInAppDomain`](http://msdn.microsoft.com/en-us/library/ms164410.aspx)在该域中实际执行代码（包括加载您需要的模块）。（第一个）参数`AppDomainId`将是您从中获得的值`ICorPublishAppDomain.GetID()`。

在 codeplex.com 上的[Microsoft All-In-One Code Framework](http://1code.codeplex.com/)中似乎有一个至少相关的示例（CppHostCLR）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-27T11:20:05.983

我会使用推荐的方法：您使用 注册您自己的 AppDomainManager `IClrControl::SetAppDomainManagerType`，使其向主机注册（使用`AppDomainManagerInitializationOptions.RegisterWithHost`），接收 AppDomain 创建的通知并通过“监听”域卸载`IActionOnCLREvent::OnEvent(Event_DomainUnload)`。

这样，您已经将“一些代码”（域管理器）加载到每个域（包括默认的应用程序域）中。

# c# - 在 Unity 中启动 2D 平台游戏

> ID：15478976
> 
> 赞同：0
> 
> 时间：2013-03-18T14:16:22.700
> 
> 标签：c#, unity3d

我正在 Unity 中启动 2D 平台游戏。我想用 C# 编写它，但我发现的大多数教程都是用 JavaScript 编写的。有什么好的教程可以指导我吗？

如果没有，什么是一个好的开始？我是 Unity 的新手，所以我想首先为角色在第一关中行走奠定基础，然后是一个简单的角色模型（没有具体设计，所以我不必在此建模一个实际角色点）我可以添加一个脚本。我该如何处理这些简单的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T15:51:33.377

使用 Unity3D 时 C# 和 Javascript 之间的差异并不像您想象的那么显着。Unity3D 文档有一个页面描述了最重要的区别（当然除了语法）：

[http://docs.unity3d.com/Documentation/ScriptReference/index.Writing_Scripts_in_Csharp_26_Boo.html](http://docs.unity3d.com/Documentation/ScriptReference/index.Writing_Scripts_in_Csharp_26_Boo.html)

此外，官方统一文档允许您在 JavaScript、C# 和 Boo 之间切换。

如果你想开始使用 Unity3D，除了官方文档之外，还有很多网站（只需 google 一下），我发现一个很有帮助的网站是[unity3dstudent.com](http://www.unity3dstudent.com)，至少也通过[Essential](http://www.unity3dstudent.com/category/modules/essential-skills/)和[Beginner](http://www.unity3dstudent.com/category/modules/beginner/)模块因为[挑战](http://www.unity3dstudent.com/category/challenges/)应该有助于对事物的运作方式有一个基本的了解。

# wpf - WPF - Xceed GridControl - 当编辑的行有焦点时保存

> ID：15478977
> 
> 赞同：2
> 
> 时间：2013-03-18T14:16:24.200
> 
> 标签：wpf, xceed-datagrid

我有一个启用了单元格编辑的 XCeed 网格。当我对我的单元格进行更改时，离开该行然后将其保存到数据库中。

但是，当我仍然选择更改的单元格时点击我的保存按钮时，更改不会持续存在。

如何确保保存当前内容时已保存？

我的网格 xaml：

```
<xcdg:DataGridControl ItemsSource="{Binding Source={StaticResource MySource}}"
                          BorderThickness="1" AutoCreateColumns="False" ReadOnly="False" NavigationBehavior="CellOnly">
        <xcdg:DataGridControl.DefaultCellEditors>
            <xcdg:CellEditor x:Key="{x:Type system:Boolean}">
                <xcdg:CellEditor.EditTemplate>
                    <DataTemplate>
                        <xcdg:CheckBox xcdg:Cell.IsCellFocusScope="True"
                                       IsChecked="{xcdg:CellEditorBinding}"
                                       HorizontalContentAlignment="Right"
                                       />
                    </DataTemplate>
                </xcdg:CellEditor.EditTemplate>

                <xcdg:CellEditor.ActivationGestures>
                    <xcdg:TextInputActivationGesture />
                </xcdg:CellEditor.ActivationGestures>

            </xcdg:CellEditor>
        </xcdg:DataGridControl.DefaultCellEditors>

        <xcdg:DataGridControl.Columns>
            <xcdg:Column Title="Description" FieldName="Description" ReadOnly="True"/>
            <xcdg:Column Title="Start period" FieldName="Start" ReadOnly="True"/>
            <xcdg:Column Title="End Period" FieldName="End" ReadOnly="True"/>
            <xcdg:Column Title="Finished" FieldName="IsFinished"/>                
        </xcdg:DataGridControl.Columns>
        <!--<xcdg:DataGridControl.Columns>
        </xcdg:DataGridControl.Columns>-->

    </xcdg:DataGridControl> 
```

# cron - Feed WordPress cron 作业代码

> ID：15478983
> 
> 赞同：2
> 
> 时间：2013-03-18T14:16:38.253
> 
> 标签：cron, wordpress

WordPress 的 FeedWordPress（RSS 提取器）插件运行良好，但它没有每 5 分钟更新 RSS 的选项（默认为 60 分钟），因此唯一的方法是手动单击立即更新按钮。

我是新手，有些人告诉我使用`cron`工作每 5 分钟触发一次，所以我在 cpanel 中尝试过

**首先我试过这个**

```
curl http://domain.com/?update_feedwordpress=true > dev/null 
```

但收到此错误

```
/bin/sh: dev/null: No such file or directory 
```

**其次我试过这个**

```
wget http://domain.com/?update_feedwordpress=1 
```

但现在我收到了这个错误

```
/bin/sh: /usr/bin/wget: Permission denied 
```

（我`domain.com`在那个地方用过）

任何正确/准确的工作代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-09-13T06:54:40.440

您可以使用以下代码：

```
/usr/local/bin/curl --silent -L  "http://example.com/?update_feedwordpress=1" >/dev/null 2>&1 
```

你应该`example.com`用你的域名替换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T14:23:24.720

空设备是`/dev/null`

/usr/bin/wget 似乎没有权限为当前用户执行。

编写脚本（比如 mydebug.sh ）并使用 cron 运行脚本可能更容易

> id
> ls -l /usr/bin/wget
> 
> 卷曲...

然后检查是否存在由于权限引起的任何明显错误。

# javascript - KineticJS：围绕点旋转线

> ID：15478994
> 
> 赞同：1
> 
> 时间：2013-03-18T14:16:58.673
> 
> 标签：javascript, canvas, kineticjs

我正在尝试使用 KineticJS 围绕一个点旋转一条线。但这条线总是围绕原点旋转。我已经尝试过使用偏移量，但它也不起作用。

黑点通常是可定位的。我希望灰线围绕黑点以 0 到 360 度之间的角度旋转。

```
line.setPoints([{
    x: stage.getWidth() / 2,
    y: stage.getHeight() / 2
}, {
    x: stage.getWidth() / 2,
    y: stage.getHeight() / 2 - 30
}]);

line.transitionTo({
    rotation: angle,
    duration: 1,
    easing: 'ease-out'
}); 
```

有任何想法吗？

我做了一个小提琴：http: [//jsfiddle.net/QuT4d/](http://jsfiddle.net/QuT4d/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T14:54:00.700

[http://jsfiddle.net/QuT4d/1/](http://jsfiddle.net/QuT4d/1/)

因此，您需要从一开始就为您的线设置一个位置，并设置相对于该位置的点：

```
 line = new Kinetic.Line({
        x: stage.getWidth() / 2,  // <--- right here
        y: stage.getHeight() / 2,  // <--- and right here
        points: [{
            x: 0,  // <--- if you start at 0, you start at the above x: which is the center
            y: 0   // <--- if you start at 0, you start at the above y: which is the center
        }, {
            x: 0,
            y: 0- 30
        }],
        stroke: 'gray',
        strokeWidth: 3
    }); 
```

并不是说它不工作，您是在设置位置，然后设置点，这实际上是在将您的对象从屏幕上拉下来。如果您将过渡时间设置为较大的数字并看到它缓慢地移出屏幕，您可能会看到这种情况。

您也不需要再次设置点或重置位置。

# java - 带总和和三个循环的素数

> ID：15478996
> 
> 赞同：-2
> 
> 时间：2013-03-18T14:17:02.357
> 
> 标签：java

我试图解决此代码，但实际上我不能..我没有任何结果...如果有人可以提供帮助，则此代码有效，但没有结果！：

```
public class Primenumber {

    public static void main(String[] args) {
        int n = 10000;
        long sum = 0;
        loop:
        for (int i = 2; i <= n; i++) {
            for (int j = 2; j < n; j++) {
                for (int k = j; k < n; k++) {
                    if (i == j * k) {
                        continue loop;
                    }
                }
            }
            sum += i;
        }
        System.out.println("该整数之内的所有素数之和是：" + sum);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T14:22:45.333

无需详细介绍高级筛算法：

*   您只需要找到小于或等于 的除数`sqrt(i)`。（如果一个整数`j>sqrt(i)` 除以`i`，则存在另一个整数`k<sqrt(i)`也除以`i`。）
*   您可以丢弃（即不检查）除 2 以外的偶数除数。（如果偶数除数，`i`则`2`除数`i`，并且您之前已经测试过）
*   您可以丢弃您知道不是素数的除数（即`i`您发现的素数的早期值）。如果一个整数`j`除以`i`，要么`j`是素数，要么是`j=p*m`（其中`p`是素数，`p`除以`i`）。
*   内部循环是不必要的（您正在通过对商的蛮力搜索来替换除法）。相反，检查是否`i%j==0`（即`i`除以的余数`j`是否为零）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T14:19:51.543

这段代码正在循环`n^3`迭代（少一点）。难怪当你通过一个大的时候它不会走到最后`n`。

你可以通过改变“让它工作”

```
n = 10000; 
```

到

```
n = 1000; 
```

那么结果是

```
该整数之内的所有素数之和是：76127 
```

简而言之，您的代码似乎工作正常，您只需要为 big 寻找更有效的算法`n`。