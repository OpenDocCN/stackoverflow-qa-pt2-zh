# StackOverflow 问答 16196000-16196999

# c# - 使用 Internet 标题信息识别哪个邮件类别的回复邮件

> ID：16196001
> 
> 赞同：0
> 
> 时间：2013-04-24T15:26:26.230
> 
> 标签：c#, outlook-addin

我正在开发一个应用程序，该应用程序发送带有自定义 Internet 标题信息的电子邮件，用于识别已发送的邮件类型。

例如，如果我发送选项 A，它将是我的自定义标签，值为 1，或者如果我发送选项 B，它将是我的自定义标签，值为 2。

如果客户回复或转发该邮件，我需要确定回复或转发的邮件类型（即选项 A 或选项 B）。所以我需要携带自定义的互联网标题信息来回复或转发邮件。任何可用于在回复或转发邮件时携带自定义 Internet 标题的选项，或者是否有任何替代方法可以做到这一点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-06T12:01:56.323

我假设您已经开发了客户可以选择选项的部分。

阅读 mime headers 你可以试试这个：[Get email Headers from an Outlook MailItem](http://www.lessanvaezi.com/email-headers-from-outlook-mailitem/)

# winapi - C++ 从对话框中获取数据

> ID：16196004
> 
> 赞同：1
> 
> 时间：2013-04-24T15:26:32.400
> 
> 标签：winapi, dialog

我制作了一个简单的 win32 应用程序，它打开一个带有编辑控件的对话框。在搜索了几个小时后，我找不到从这个编辑控件获取用户输入并将其存储在字符串中的方法。我认为[这里](http://www.codeproject.com/Articles/31315/Getting-User-Input-With-Dialogs-Part-1)的代码可以满足我的要求（尚未对其进行测试），但我对此一无所知。所以解释或其他解决方案会很好。（我正在使用 VC++ 2012）

我发现其他[解决方案是 C++ :S](http://www.davekb.com/browse_programming_tips%3adialog_box_param%3atxt)

好的，我做了一个单独的消息循环，并在那里插入了代码。现在看起来像这样：

```
INT_PTR CALLBACK IP(HWND hDlg, UINT message, WPARAM wParam, LPARAM lParam)
{
    UNREFERENCED_PARAMETER(lParam);
    switch (message)
    {
    case WM_INITDIALOG:
        return (INT_PTR)TRUE;

    case WM_COMMAND:
        if (LOWORD(wParam) == IDCANCEL)
        {
            EndDialog(hDlg, LOWORD(wParam));
            return (INT_PTR)TRUE;
        }
        else if(LOWORD(wParam) == IDOK)
        {
            TCHAR szBuf[40];
            GetDlgItemText(hDlg, IDC_EDIT1, szBuf, 39);
              //Breakpoint here!
              //szBuf="127.0.0.1" as intended :)
            EndDialog(hDlg, LOWORD(wParam));
            return (INT_PTR)TRUE;
        }
        break;
    }
    return (INT_PTR)FALSE;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-24T15:31:55.073

尝试使用

```
UINT WINAPI GetDlgItemText(
  _In_   HWND hDlg,
  _In_   int nIDDlgItem,
  _Out_  LPTSTR lpString,
  _In_   int nMaxCount
); 
```

像这样：

```
TCHAR szBuf[BUFF_LEN];
GetDlgItemText(hWnd, TXT_MYEDIT_ID, szBuf, BUFF_LEN - 1); 
```

# algorithm - 计算集合的组合/笛卡尔积（无重复且无顺序限制）

> ID：16196005
> 
> 赞同：3
> 
> 时间：2013-04-24T15:26:32.847
> 
> 标签：algorithm, combinations, enumeration, cartesian-product

我有一个组合问题，可以使用多组的笛卡尔积来低效解决。具体来说，我有多个项目和满足每个项目的多个元素。该问题包括找到满足所有项目的元素的所有可能组合。例如：

```
items -> elements
------------------------
1 -> {a,b}     // a and b cover the item 1
2 -> {a,b}     // a and b cover the item 2
3 -> {a,b,c}   // a, b and c cover the item 3
4 -> {a,b,e,f} // a, b, e, f cover the item 4

Alternative representation:
element -> items covered
------------------------
a -> {1,2,3,4}
b -> {1,2,3,4}
c -> {3}
e -> {4}
f -> {4} 
```

目标是找到涵盖项目 1、2、3、4 的所有组合。有效的解决方案是：

```
{a},{a,b},{a,c},{a,e},{a,f},{a,b,c},{a,b,e},{a,b,f},{a,b,c,e},{a,b,c,f}
{b},{b,c},{b,e},{b,f},{b,c,e},{b,c,f} 
```

请注意，顺序并不重要，因此`{a,b} = {b,a} ({a,b} x {c,d} = {c,d} x {a,b})`. 另外，请注意这`{a,a,a,a}, {a,a,a,b}...`是冗余组合。

正如你所看到的，`set cover problem`这个问题类似于覆盖, 和是元素和覆盖的元素集合。但是，这里的目标不是找到覆盖所有元素的集合的最小组合，而是找到覆盖所有项目的元素的所有组合。`U={1,2,3,4}``S={ab={1,2,3,4},c={3},ef{4}}``{1,2,3,4}``a``b``{3}``c``{4}``e``f``S``U``{a,b,c,e,f}``{1,2,3,4}`

可以通过在 1、2、3 和 4 的集合之间执行笛卡尔积，然后过滤冗余的组合来完成简单的实现。但是，这种方法效率很低。假设我有这种情况：

```
1 -> {a,b,c,d,e,f,g,h}
2 -> {a,b,c,d,e,f,g,h}
3 -> {a,b,c,d,e,f,g,h}
4 -> {a,b,c,d,e,f,g,h}
5 -> {a,b,c,d,e,f,g,h}
6 -> {a,b,c,d,e,f,g,h,i} 
```

六组之间的笛卡尔积将产生`8^5*9=294912`组合，而实际上组合要少得多，它们是：`{a,b,c,d,e,f,g} U {a,b,c,d,e,f,g} x {i}`.

解决这个问题的另一种方法是枚举所有元素，跳过与之前生成的其他等效的组合，也跳过重复的元素。这有点容易计算，可以实现为一次返回组合的迭代器，但我不知道是否有更好的方法来解决这个问题，或者这个问题之前是否研究过。

你将如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T16:01:55.957

首先，要认识到如果一组元素不能满足所有项目，那么它的任何子集也不满足。

其次，意识到如果一个集合满足所有项目，那么它的所有超集也都满足。

现在，您所要做的就是：

令 S 为所有元素的集合。令 R 为空集。

定义一个函数 find( s, r ) ：

```
If r includes s, return r.
If s does not satisfy all items, return r.

Otherwise add s to r.
For every item I in  s,
     let s' be s-I
     let s be f(s', r)

return s. 
```

只需调用 find(S,R) 即可获得答案。

此方法执行一些重复的测试，但总是会在被标识为此类时终止分支。这导致对大量元素进行大量修剪。

查找 r 是否包含一组特定元素和检查 s 是否满足所有项目都可以非常快速地进行，但会消耗额外的内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T16:48:04.000

如果你这样做了怎么办：

```
1 -> {a,b}
2 -> {b,c}
3 -> {a,b,c}
4 -> {a,e,f}

=>

a -> [1,3,4]
b -> [1,2,3]
c -> [2,3]
e -> [4]
f -> [4] 
```

然后枚举左侧提供（至少）[1,2,3,4]的组合

```
For each item in the set of all-satisfying sets, enumerate combinations 
with other items.

All-Satisfying-Sets: {{a,b},{b,e},{b,f}}
Combinations within All-Satisfiying-Sets: {{a,b,e},{a,b,f},{b,e,f},{a,b,e,f}}
Others: {c}
Combinations with Others: {{a,b,c},{b,e,c},{b,f,c}
                          ,{a,b,e,c},{a,b,f,c},{b,e,f,c},{a,b,e,f,c}} 
```

或者你可以在 Haskell 中这样做：

```
import Data.List (union, subsequences, sort)

example1 = [(["a"],[1,2,3,4])
           ,(["b"],[1,2,3,4])
           ,(["c"],[3])
           ,(["e"],[4])
           ,(["f"],[4])]

example2 = [(["a"],[1,2,3,4,5,6])
           ,(["b"],[1,2,3,4,5,6])
           ,(["c"],[1,2,3,4,5,6])
           ,(["e"],[1,2,3,4,5,6])
           ,(["f"],[1,2,3,4,5,6])
           ,(["g"],[1,2,3,4,5,6])
           ,(["h"],[1,2,3,4,5,6])
           ,(["i"],[6])]

combs items list = 
  let unify (a,b) (a',b') = (sort (a ++ a'), sort (union b b')) 
  in map fst
     . filter ((==items) . snd) 
     . map (foldr unify ([],[])) 
     . subsequences 
     $ list

OUTPUT:

*Main> combs [1..4] example1
[["a"],["b"],["a","b"],["a","c"],["b","c"],["a","b","c"],["a","e"],["b","e"],
["a","b","e"],["a","c","e"],["b","c","e"],["a","b","c","e"],["a","f"],["b","f"], 
["a","b","f"],["a","c","f"],["b","c","f"],["a","b","c","f"],["a","e","f"],
["b","e","f"],["a","b","e","f"],["a","c","e","f"],["b","c","e","f"],
["a","b","c","e","f"]] 
```

# javascript - 在 :before 伪选择器上访问样式属性“内容”

> ID：16196007
> 
> 赞同：0
> 
> 时间：2013-04-24T15:26:35.770
> 
> 标签：javascript, html, css, unicode

我在一个页面上有大约 250 个字体图标，我想以编程方式提取每个图标的 Unicode 值。

一个典型的图标有相应的 CSS，如下所示：

```
.icon-play:before {
    content: "\f04b";
} 
```

**到目前为止我尝试过的...**

`document.querySelectorAll('[class^=icon-]')`访问图标（现在调用每个图标`i`）。`i.style`尝试访问样式对象。问题是该`i.style.content`值是空的。

我也尝试过以这种方式访问​​内容，`document.querySelectorAll('[class^=icon-]:before')`但这会产生一个空结果。

任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-08T01:28:45.377

干得好：

```
var is = document.querySelectorAll('[class^=icon-]');
[].forEach.call(is, function (i) {
    console.log(
        window.getComputedStyle(i, ':before').content.slice(1, -1) // Strip off surrounding quotes
    );
}); 
```

[JSFiddle](http://jsfiddle.net/brettz9/z76fw/)（为了直观地显示结果而增加了一些复杂性）

至于提取 Unicode 值，您没有指定所需的格式（除非您只是想获取字符串内容），但如果您需要代码点，您可以应用[`charCodeAt()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/charCodeAt)到上面字符串的每个字符以找出它们的代码点并随心所欲地使用它们。

# sas - 在sas proc sql中连接两个数字

> ID：16196009
> 
> 赞同：12
> 
> 时间：2013-04-24T15:26:44.077
> 
> 标签：sas

我有一个表，其中有两个数值，称为`year`和`month`。我想创建一个新表，它有一个名为的值`ym`，它只是`year`and的连接`month`。这是一个例子：

```
proc sql;
create table test as 
select CONCAT(year, month) as ym from tbl;
run; 
```

那里的`CONCAT`功能是什么？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-04-24T15:30:53.063

CAT、CATS、CATT、CATX 都执行连接，只要您在 9.1.3 或更高版本（以及 CATQ 在 9.2 或更高版本）；CAT 进行基本连接，CATS 连接和去除空格，CATT 修剪，CATX 连接带有分隔符。

通常，CATS 是用于数字的正确函数，因为默认情况下，数字被放入带空格的格式中（BEST12.，所以“3”是 3）。

```
proc sql;
create table test as 
select CATS(year, month) as ym from tbl;
run; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-04T07:09:18.890

`||`作为另一种选择，您可以像这样连接运算符`X1||X2`，甚至可以一次连接多个运算符`X1||X2||X3||X4`

您可以添加`trim`或`left`喜欢`TRIM(LEFT(X1))||TRIM(LEFT(X2))`

您可以添加分隔符，例如`TRIM(X1)||','||TRIM(X2)`

# php - Wordpress：如何在页面上显示自定义帖子类型的自定义字段？

> ID：16196010
> 
> 赞同：0
> 
> 时间：2013-04-24T15:26:43.943
> 
> 标签：php, custom-post-type, custom-fields, wordpress

我创建了一个名为“box-img”的自定义帖子类型。我必须在其中自定义字段，一个称为“img-url”和“img”。“img”字段包含一个图像。

我希望能够在我的页面上显示这两个字段。现在我有：

```
 <?php 
       global $wp_query;
       query_posts(array( 
          'post_type' => 'box-img',
          'showposts' => 4 
       ) );  
   ?>

<?php while (have_posts()) : the_post(); ?>

    <h2><a href="<?php the_permalink() ?>"><?php the_title(); ?></a></h2>

    <?php $key = get_post_meta($post->ID, 'img-url'); ?>
        <p><?php if($key) { echo $key[0]; } else { the_title(); }; ?></p>

    <?php $key1 = get_post_meta($post->ID, 'img-url'); ?>
    <p> <?php echo $key1; ?> </p>

<?php endwhile;
wp_reset_query(); ?> 
```

我已经尝试了这 3 种不同的方法来查看我得到的结果，但我能得到的只是要显示的标题！

任何帮助都会非常有帮助！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T15:32:18.990

将第三个可选参数设置`true`为返回单个结果（字符串），例如：

`$key1 = get_post_meta( $post->ID, 'img-url', true );`

[http://codex.wordpress.org/Function_Reference/get_post_meta](http://codex.wordpress.org/Function_Reference/get_post_meta)

# sql - 过滤掉计算列值为 null 的行

> ID：16196017
> 
> 赞同：0
> 
> 时间：2013-04-24T15:26:58.600
> 
> 标签：sql, sql-server

我有一个类似于以下内容的 SQL 查询：

```
SELECT CONVERT(varchar, DATEPART(month, titlStreaming)) + '/' + CONVERT(varchar, DATEPART(day, titlStreaming)) + '/' + CONVERT(varchar, DATEPART(year, titlStreaming)) AS [Day], 
COUNT(titlTitleID) AS Total 
FROM Title
GROUP BY DATEPART(year, titlStreaming), DATEPART(month, titlStreaming), DATEPART(day, titlStreaming)
ORDER BY DATEPART(year, titlStreaming) DESC, DATEPART(month, titlStreaming) DESC, DATEPART(day, titlStreaming) DESC 
```

这通常会返回一个表格，如：

```
Day       |   Total
--------------------
4/23/2013 |       2
         ...
NULL      |   14234 
```

我想做的是过滤掉`NULL`返回值的行。因为`Day`显然是一个计算列，所以我不能简单地做一个`WHERE Day IS NOT NULL`. 我承认我对 SQL 的了解很少，所以任何帮助或建议都将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T15:29:45.813

您可以使用子查询：

```
select *
from (SELECT CONVERT(varchar, DATEPART(month, titlStreaming)) + '/' + CONVERT(varchar, DATEPART(day, titlStreaming)) + '/' + CONVERT(varchar, DATEPART(year, titlStreaming)) AS [Day], 
             COUNT(titlTitleID) AS Total 
     FROM Title
     GROUP BY DATEPART(year, titlStreaming), DATEPART(month, titlStreaming), DATEPART(day, titlStreaming)
    ) t
where [day] is not null
ORDER BY [day] DESC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T15:32:49.960

就所有日期部分都依赖于 titleStreaming 而言，titleStreaming 的 where 条件应该足够了。

```
....
From Title
where titlStreaming is not null
Group by .... 
```

# wordpress - Mediaelement.js 进度条（Wordpress 和 Firefox）

> ID：16196018
> 
> 赞同：1
> 
> 时间：2013-04-24T15:27:02.287
> 
> 标签：wordpress, mediaelement.js

在 mediaelement.js 的演示版本中，音频播放器在带有 MP3 的 Firefox (Mac) 上完美运行，但在使用 MediaElement Wordpress 插件时，进度条不起作用。

注意，wordpress beta 3.6 版，MediaElement 播放器是直接集成的，进度条在火狐上也不起作用。

任何思路都将受到欢迎:)

# javascript - 如何防止多个对象的 init 调用？

> ID：16196021
> 
> 赞同：1
> 
> 时间：2013-04-24T15:27:11.223
> 
> 标签：javascript

我们的插件函数类似于：`var pluginName = function(selector, settings){}`. 所以用户称它为`var myPlugin = new pluginName('#id', {settings})`. 但是如何检测该用户再次调用它，例如，使用新选项：`myPlugin = new pluginName('#id', {settings_2})`？

我们需要检测到这一点以防止双重事件附加：诸如销毁创建的对象/删除事件并再次调用 init。

所以问题是我们无法访问`myPlugin`变量来检查它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T15:34:10.427

只需将插件放在它自己的范围内：

```
var pluginName = (function(){
    var plugin_created = false; 
    var plugin = function(selector, settings){
        if(plugin_created) return false;
        plugin_created = true;
        //rest of the plugin class
    }
    return plugin;
})(); 
```

因此，当您第一次创建它时，它会将其本地范围变量设置为`true`，然后任何其他创建都将失败。

# java - 如何将文件中的值放入字符串并计算 Java 中的值？

> ID：16196026
> 
> 赞同：-1
> 
> 时间：2013-04-24T15:27:22.607
> 
> 标签：java, string, file, csv, io

我有一个 .csv 文件，并且我了解如何在 Java 中读取它，我的问题是我希望能够将文件内的值放入一个字符串中，然后读取该字符串，以便我可以计算这些值。

> 爱丽丝琼斯,80,90,100,95,75,85,90,100,90,92 鲍勃
> 曼弗雷德,98,89,87,89,9,98,7,89,98,78

这些是值，现在我如何将每个名称旁边的所有整数相加并创建一个平均值？我最大的问题是当我读取文件时，它位于 While 循环中，然后能够打印出这些行，就像它在控制台中看到的那样，但是当我想在 While 循环之外打印值时，它说字符串没有'不存在，因此如果其中没有任何内容，我无法计算这些值。

```
 import java.io.*;
 import java.util.*;

 public class Grades {
public static void main(String args[]) throws IOException
 {
 try{
 // Open the file that is the first 
 // command line parameter
 FileInputStream fstream = new FileInputStream("filescores.csv");

 BufferedReader br = new BufferedReader(new InputStreamReader(fstream));
 String strLine;
 //Read File Line By Line
 while ((strLine = br.readLine()) != null)   {
 // Print the content on the console
 String line = strLine
 System.out.println (strLine);
 }
 //Close the input stream
 in.close();
 }catch (Exception e){//Catch exception if any
 System.err.println("Error: " + e.getMessage());

 }
 }
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T15:38:18.000

我建议实现一个普通的旧 java 对象（PO​​JO）并将数据存储在那里：

```
public class MyRow {
    public final String name;
    public final int[] values;

    public MyRow(String name, int[] values) {
        this.name=name;
        this.values=values;
    }
} 
```

并拆分你的字符串并将其放在一个简单的`List<MyRow>`：

```
MyRow splitData(String line) {
    String[] parts=line.split(" ");
    int[] vals=new int[parts.length];
    // starting with one for skipping the name
    for(int i=1; i<parts.length; i++) {
        vals[i-1]=Integer.parse(parts[i]);
    }
    return new MyRow(parts[0], vals);
} 
```

所以基本上你的读取循环看起来像这样：

```
List<MyRow> data = new ArrayList<MyRow>();
while((strLine = br.readLine()) != null) {
    // Print the content on the console
    System.out.println (strLine);
    data.add(splitData(strLine));
} 
```

现在所有数据都在`data`列表中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T15:42:39.267

> 当我想在 While 循环之外打印值时，它说字符串不存在

正如我评论的那样，您的代码中存在范围问题。但是，我没有看到您正在打印或执行任何操作的 while 循环之外的任何内容。您可以使用以下代码片段在 while 循环之外打印该行。

```
ArrayList<String> lines = new ArrayList<String>();// Updated <String>

 while ((strLine = br.readLine()) != null)   {
   // Print the content on the console
   lines.add(strLine);
   System.out.println(strLine);
 } 

for(int i = 0; i < lines.size(); i++){
 System.out.println(lines.get(i));
} 
```

[变量范围](http://www.java2s.com/Tutorial/Java/0020__Language/VariableScope.htm)

**编辑评论**

> 注意： Grades.java 使用未经检查或不安全的操作。
> 
> 注意：使用 -Xlint 重新编译：详细信息未选中。

以上只是编译器给出的警告，让您了解不安全的集合使用。 [有关更多详细信息，请参见此处](https://stackoverflow.com/questions/197986/what-causes-javac-to-issue-the-uses-unchecked-or-unsafe-operations-warning)。

# mysql - MySQL 主键仅自动递增奇数 - 为什么？

> ID：16196031
> 
> 赞同：5
> 
> 时间：2013-04-24T15:27:32.493
> 
> 标签：mysql

我在本地 MySQL 服务器上开发了一个后端，一切正常。在我将它移动到生产服务器之后，我在数据库中的所有主键都只会自动递增到奇数（也可能是它自动递增 2） - 所以 1,3,5,7,9 ...

我知道可以更改自动增量金额，但我没有这样做。那么我如何检查是否以某种方式设置了它？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-24T15:30:44.097

很可能`auto_increment_increment`已更改：[http ://dev.mysql.com/doc/refman/5.0/en/replication-options-master.html#sysvar_auto_increment_increment](http://dev.mysql.com/doc/refman/5.0/en/replication-options-master.html#sysvar_auto_increment_increment)

你可以这样检查：

```
mysql> SHOW VARIABLES LIKE 'auto_inc%';
+--------------------------+-------+
| Variable_name            | Value |
+--------------------------+-------+
| auto_increment_increment | 10    |
| auto_increment_offset    | 1     |
+--------------------------+-------+
2 rows in set (0.01 sec) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-24T15:29:57.943

这可能是由于一个`INSERT`语句被发送了两次，但`IGNORE`因此只导致奇数。

# facebook - 混合移动应用程序在 Facebook 上的墙贴

> ID：16196033
> 
> 赞同：0
> 
> 时间：2013-04-24T15:27:34.657
> 
> 标签：facebook, hybrid-mobile-app

我有一个混合移动应用程序（应该在 android 和 ios 中工作）。我需要从我的应用程序在 facebook 墙上发布。请注意它是一个混合应用程序，所以我不应该使用任何 java 或 c 代码。

我尝试了以下方法，它在模拟器中工作，但在实际设备中没有。请帮我。

```
<script>
window.fbAsyncInit = function() {
FB.init({
appId : ' my appID',
status : true, // check login status
cookie : true, // enable cookies to allow the server to access the session
xfbml : true // parse XFBML
});
};

(function() {
var e = document.createElement('script');
e.src = document.location.protocol + '//connect.facebook.net/en_US/all.js';
e.async = true;
document.getElementById('fb-root').appendChild(e);
}());
</script>

        <script type="text/javascript">
$(document).ready(function(){
$('#share_button').live('click', function(e){
e.preventDefault();
FB.ui(
{
method: 'feed',
name: 'HyperArts Blog',
link: 'http://hyperarts.com/blog',
picture: 'http://www.hyperarts.com/_img/TabPress-LOGO-Home.png',
caption: 'I love HyperArts tutorials',
description: 'The HyperArts Blog provides tutorials for all things Facebook',
message: ''
});
});
});
</script> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-10T00:37:38.413

我遇到了这个。你的：document.location.protocol 假设要拉入 FB SDK 实际上是“file:///”，这就是该 FB JS 库的 url 中输入的内容。手动指定 http:// 或 https:// 这对我来说在 IOS 上的 safari webView 上都不起作用，所以我不得不使用 AJAX 手动点击端点。

# python - Python 3.x 中是否仍允许使用 % 进行字符串格式化？

> ID：16196037
> 
> 赞同：3
> 
> 时间：2013-04-24T15:27:41.210
> 
> 标签：python, python-3.x

我[在这里](http://docs.python.org/3.1/whatsnew/3.0.html)读到，*计划最终使这个 ["".format()] 成为字符串格式化的唯一 API，并开始在 Python 3.1 中弃用 % 运算符。*

我在 Python 3.1、3.2 和 3.3 中尝试了 % 语法，它正在工作。那么是否还有计划在未来的版本中从 Python 中删除 % 语法，或者我可以自由使用它吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T15:48:16.923

这不是一个确定的答案，但它太大了，无法在评论中指出这一点。后续版本中文档措辞的更改肯定不再是声明`%`语法已弃用。

来自[v3.0 中](http://docs.python.org/3.0/library/stdtypes.html#old-string-formatting)的[旧字符串格式化操作和 v3.1 中的旧字符串格式化操作](http://docs.python.org/3.1/library/stdtypes.html#old-string-formatting)：

> 此处描述的格式化操作已过时，可能会在 Python 的未来版本中消失。

来自[v3.2 中的旧字符串格式化操作](http://docs.python.org/3.2/library/stdtypes.html#old-string-formatting)：

> 但是，目前没有弃用 printf 样式格式的计划。

[v3.3](http://docs.python.org/3.3/library/stdtypes.html#old-string-formatting)中的旧字符串格式化操作没有提及弃用计划。

然而，这还不足以让我认为它是可行的，如果能找到一个有明确声明的来源会很好。

# java - Java Tetris - 使用旋转矩阵进行旋转

> ID：16196039
> 
> 赞同：4
> 
> 时间：2013-04-24T15:27:52.757
> 
> 标签：java, swing, matrix, linear-algebra, rotational-matrices

我正在用 Java 构建俄罗斯方块，并尝试使用线性代数来旋转由 4 个瓷砖组成的一块。

我的朋友正在解释这样做的方法是：

**他说：**

> “为了澄清，你确实需要旋转每个点——也就是说，你需要为一块中的每个瓷砖旋转一个点。但不是为一块中的每个瓷砖旋转四个角。原点就像你把铅笔穿过一个一张纸，把铅笔转了一圈……铅笔所在的地方就是原点。”
> 
> “所以，如果你的棋盘上有一个 T 牌，牌在 (7,9) (8,9) (9,9), (8,10)，它的原点在 (8,9)..”

所以我用坐标 (1, 3) (1, 2) (1, 1) (2, 2)... 原点 (1, 2)

**然后他说：**

> “您将 Tiles 转换为相对于原点。也就是说，您将原点视为此旋转的新 (0, 0)。这就像从每个坐标中减去原点一样简单，得到 (7-8, 9-9), (8-8, 9-9), (9-8, 9-9), (8-8, 10-9) 或 (-1, 0) (0, 0) (1, 0) ) (0, 1)"

从每个坐标中减去原点 (1, 2)

(1-1, 3-2) (1-1, 2-2) (1-1, 1-2) (2-1, 2-2) =

(0, 1) (0, 0) (0, -1) (1, 0)

**然后他说：**

> “现在使用旋转矩阵乘法旋转这四个坐标，就像我们一直在谈论的那样。”

![在此处输入图像描述](https://i.stack.imgur.com/lSKgG.jpg)

**最后他说：**

> “然后将原点坐标添加回每个结果坐标，现在你有了四个旋转的 Tile 坐标。”

从上面的矩阵中，我有 (0, -1) (0, 0) (0, 1) (-1, 0)... 所以我像他说的那样将这些添加到原点坐标 (1-1, 3+0) (1+0, 2+0) (1+0, 1+1) (2-1, 2+0) =

旋转坐标： (0, 3) (1, 2) (1, 2) (1, 2)

但是，看看我旋转的形状......这是完全错误的：

![在此处输入图像描述](https://i.stack.imgur.com/lSowo.jpg)

有什么想法为什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T15:43:42.770

我已经有一段时间没有进行矩阵乘法了，但是看起来您将点插入要旋转的矩阵的顺序与拉出的顺序不同。

你说你剩下 (0, -1) (0, 0) (0, 1) (-1, 0)。这看起来像列是您的点，顶部是您的 x，而底部是您的 y。如果你对第一组点做了同样的约定，你乘以旋转矩阵的矩阵不会是 (-1, 0) (0, 0) (1, 0) (0, 1) 这不是您开始使用的点集。

由于您从点 (0, 1) (0, 0) (0, -1) (1, 0) 开始，因此您将使用以下矩阵：

| 0 0 0 1 |
| 1 0 -1 0 |

作为要相乘的矩阵，我相信您最终会得到点 (-1,0), (0,0), (1,0), (0,1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T16:00:30.737

你有两个错误。

## 错误一：

你做这个数学：

> (1-1, 3-2) (1-1, 2-2) (1-1, 1-2) (2-1, 2-2) =
> 
> (0, 1) (0, 0) (0, -1) (1, 0)

但是您在数学（图像）中实际写下的矩阵是：

```
[ -1 0 1 0 ]
[  0 0 0 1 ] 
```

什么时候应该是：

```
[ 0 0  0 1 ]
[ 1 0 -1 0 ] 
```

这就是为什么它看起来是 180 度旋转，因为你乘以旋转矩阵两次。

## 错误2：

您应该将所有输出点添加到原点。

你说：

> 从上面的矩阵中，我有 (0, -1) (0, 0) (0, 1) (-1, 0)... 所以我像他说的那样将这些添加到原点坐标 (1-1, 3+0) (1+0, 2+0) (1+0, 1+1) (2-1, 2+0) = (0, 3) (1, 2) (1, 2) (1, 2)

但你真正应该做的是将它们添加到 ORIGIN，即

> (0, -1) (0, 0) (0, 1) (-1, 0) - 矩阵输出
> 
> (0 + **1** , -1 + **2** ) (0 + **1** , 0 + **2** ) (0 + **1** , 1 + **2** ) (-1 + **1** , 0 + **2** ) - 添加原点（原点坐标以粗体显示）
> 
> (1, 1) (1, 2) (1, 3) (0, 2) - 结果点

# rest - 从 Jenkins REST API 访问 ExecutedMojo 数据

> ID：16196041
> 
> 赞同：1
> 
> 时间：2013-04-24T15:27:55.653
> 
> 标签：rest, maven, jenkins

我可以通过 Jenkins REST API 访问大部分 maven 构建的信息，但我无法找到 ExecutedMojos，我需要它来获取它们的时间信息。我看到[这些信息可以通过 Jenkins 的 Java API 获得](http://javadoc.jenkins-ci.org/hudson/maven/MavenBuild.html#getExecutedMojos%28%29)，但我也不确定如何以编程方式与 Jenkins 进行交互。

# facebook - 像确认不工作

> ID：16196043
> 
> 赞同：1
> 
> 时间：2013-04-24T15:27:59.650
> 
> 标签：facebook, facebook-like, confirmation

我正在向网站添加一个赞按钮，目前正在进行一些测试。起初，一切都运行良好，直到当我单击“赞”按钮时，“确认”链接开始出现。我搜索了这个，发现它是一个垃圾邮件控件。所以我理解显示的按钮，因为我多次喜欢和不喜欢该网站，出于测试目的，我对此表示满意。问题是，即使我在弹出窗口中单击“确认”并再次单击“赞”，“赞”也会被忽略。柜台没有显示任何喜欢，并且该动作没有发布到 Facebook 墙上。Facebook 调试器也没有显示 url 有任何问题。

重现方法如下： 1\. 访问[http://sjc.prima.net.br:8777/fb_test/like_test.htm](http://sjc.prima.net.br:8777/fb_test/like_test.htm) 2\. 点击 Like 按钮 3\. 点击 Confirm 4\. 再次点击 Like，在弹出窗口中

看到 Like 被忽略了。

任何帮助，请？！？

# linq - 处理选择中的空值的Linq问题

> ID：16196046
> 
> 赞同：0
> 
> 时间：2013-04-24T15:28:06.730
> 
> 标签：linq, entity-framework, linq-to-entities

我的解决方案中有以下实体

```
public class UtilityAccount : IObjectWithState 
{
    [Key]
    [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public Guid UtilityAccountID { get; set; }
    public string Account { get; set; }
    [ForeignKey("Person")]
    public Guid PersonID { get; set; }
    public virtual Person Person { get; set; }
    public string ForeignID { get; set; }
    [NotMapped]
    public ObjectState ObjectState { get; set; }

    public virtual ICollection<Utility> Utilities { get; set; }

    public UtilityAccount()
    {
        Utilities = new List<Utility>();
    }
}

public class Utility : IObjectWithState 
{
    [Key]
    [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public Guid UtilityID { get; set; }
    [ForeignKey("UtilityAccount")]
    public Guid UtilityAccountID { get; set; }
    public virtual UtilityAccount UtilityAccount { get; set; }
    public Guid? ServiceAddressID { get; set; }
    [ForeignKey("ServiceAddressID")]
    public virtual Address ServiceAddress { get; set; }
    [NotMapped]
    public ObjectState ObjectState { get; set; }
    public double CurrentBalance { get; set; }
    public double? PendingPaymentTotal { get; set; }
    public string ForeignID { get; set; }
    [ForeignKey("UtilityType")]
    public Guid UtilityTypeID { get; set; }
    public virtual UtilityType UtilityType { get; set; }
    public virtual ICollection<UtilityBill> UtilityBills { get; set; }
    public virtual ICollection<IncomingUtilityPayment> IncomingPayments { get; set; }

    public Utility()
    {
        UtilityBills = new List<UtilityBill>();
        IncomingPayments = new List<IncomingUtilityPayment>();
    }
}

public class IncomingUtilityPayment : IObjectWithState
{
    [Key]
    [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public Guid IncomingPaymentID { get; set; }
    public string ForeignID { get; set; }
    [ForeignKey("Utility")]
    public Guid UtilityID { get; set; }
    public virtual Utility Utility { get; set; }
    public DateTime PaymentDate { get; set; } 

    public IncomingPaymentStatus IncomingPaymentStatus { get; set; }
    public double? UtilityAmount { get; set; }
    public double? ConvenienceFee { get; set; }
    public double? TotalAmount { get; set; }

    public string AuthCode { get; set; }
    public string AuthReference { get; set; }
    public string TenderType { get; set; }
    [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public int PaymentIdent { get; set; }

    [NotMapped]
    public ObjectState ObjectState { get; set; }
} 
```

我的问题是我正在尝试使用 Linq 来检索有关 UtilityAccount 的信息，并且我遇到了实用程序的 IncomingPayments 问题。下面是我尝试使用的选择语句。

```
returnVal = repo.AllIncluding(o => o.Person, o => o.Utilities, o => o.Utilities.Select(p => p.UtilityType), o => o.Person.BillingAddress, o => o.Utilities.Select(p => p.ServiceAddress), o => o.Utilities.Select(p => p.IncomingPayments.Where(q => q.IncomingPaymentStatus == IncomingPaymentStatus.Pending || q.IncomingPaymentStatus == IncomingPaymentStatus.Processed ))); 
```

在我将此子句添加到语句之前，一切都运行良好。

```
o => o.Utilities.Select(p => p.IncomingPayments.Where(q => q.IncomingPaymentStatus == IncomingPaymentStatus.Pending || q.IncomingPaymentStatus == IncomingPaymentStatus.Processed )) 
```

我认为我的问题最终是我在 Linq 子句中写错了。我得到的错误是

```
The Include path expression must refer to a navigation property defined on the type. Use dotted paths for reference navigation properties and the Select operator for collection navigation properties. 
```

参数名称：路径

我可以毫无问题地使用以下语句

```
o => o.Utilities.Select(p => p.IncomingPayments) 
```

一旦我在其中添加 where 子句，我就会收到错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T16:24:26.700

我不熟悉 EntityFramework 也不熟悉 linq-to-entities，但如果它就像 linq-to-object 你可以：

`.Where(p => p.IncomingPayments != null)`在链接之前添加一个`.Select()`这样的

```
o.Utilities.Where(p => p.IncomingPayments != null)
           .Select(p => p.IncomingPayments.Where(q => q.IncomingPaymentStatus == IncomingPaymentStatus.Pending || q.IncomingPaymentStatus == IncomingPaymentStatus.Processed)) 
```

结果将是一个嵌套的 IEnumerable，即`IEnumerable<IEnumerable<IncomingUtilityPayment>>`

如果你真的需要一个`IEnumerable<IncomingUtilityPayment>`然后`.SelectMany()`进来玩。

```
o.Utilities.Where(p => p.IncomingPayments != null)
           .SelectMany(p => p.IncomingPayments)
           .Where(q => q.IncomingPaymentStatus == IncomingPaymentStatus.Pending || q.IncomingPaymentStatus == IncomingPaymentStatus.Processed) 
```

希望这有帮助

# php - Apache mod 有条件重写

> ID：16196048
> 
> 赞同：2
> 
> 时间：2013-04-24T15:28:29.353
> 
> 标签：php, apache, .htaccess

我有一个包含以下内容的 .htaccess 文件

```
RewriteEngine on
# if a directory or a file exists, use it directly
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

#RewriteCond %{REQUEST_URI} (\/image\/)
#RewriteRule . image.php

RewriteRule . index.php 
```

如果在请求 url 中找到 /image/，指示 apache 向 image.php 发送请求的正确方法是什么，如果没有，我希望 index.php 处理请求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T15:38:52.290

要在不提供重定向的情况下处理请求，您可以执行类似的操作，前提是您已将`image.php`文件配置为处理请求。`image.php`如果您找到以“image”开头的字符串来加载文件并[停止处理 htaccess 文件的其余部分，](http://httpd.apache.org/docs/2.2/rewrite/flags.html)我们会告诉 Apache 。

```
RewriteEngine on
#If we find image, then load image.php
RewriteRule ^/?image image.php [L]

# if a directory or a file exists, use it directly
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule .* index.php 
```

# php - 相同配置上的 PhP 名称空间

> ID：16196052
> 
> 赞同：2
> 
> 时间：2013-04-24T15:28:37.470
> 
> 标签：php, configuration, namespaces

我的开发机器有一个不常见的问题。

她和我们在生产服务器上使用的一样，但是由于某种原因，当我在我的虚拟机上运行时，就像

```
namespace NotWorking;

$foo = new DateTime(); 
```

它在我的本地机器上工作，但在我们的生产服务器上没有任何错误。

但是当我使用类似的东西时：

```
namespace Working;

$foo = new \DateTime(); 
```

有用。我们已经比较了我知道的所有设置，但没有发现与 php 的构建有任何区别，甚至 apatch 也是相同的构建。

是否可以选择强制执行此“功能”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T15:32:06.887

DateTime 在全局命名空间中，并且作为“类名始终解析为当前命名空间名称”，您必须使用 \DateTime

[你可以在这里](http://ch.php.net/manual/en/language.namespaces.fallback.php)阅读更多关于它的信息

如果您在本地命名空间中有一个与全局命名空间中的同名的类，则必须添加前缀`\`，否则您将只是导入本地类。

# android - 使用从一个类到另一个类的变量

> ID：16196054
> 
> 赞同：0
> 
> 时间：2013-04-24T15:28:41.737
> 
> 标签：android, android-intent

**我想在 ReveiveSMS.class 的主类中使用一个变量。这是我的 ReceiveSMS.class 代码，我想主要使用 messageBody。帮帮我，我该怎么做。谢谢**

```
package com.formation.gmaps;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.telephony.SmsMessage;
import android.widget.Toast;

public class ReceiveSMS  extends BroadcastReceiver
{
 private final String   ACTION_RECEIVE_SMS  = "android.provider.Telephony.SMS_RECEIVED";

 @Override
 public void onReceive(Context context, Intent intent)
 {
 if (intent.getAction().equals(ACTION_RECEIVE_SMS))
 {
 Bundle bundle = intent.getExtras();
 if (bundle != null)
 {
 Object[] pdus = (Object[]) bundle.get("pdus");

 final SmsMessage[] messages = new SmsMessage[pdus.length];
 for (int i = 0; i < pdus.length; i++)  {  messages[i] = SmsMessage.createFromPdu((byte[]) pdus[i]);  }  if (messages.length > -1)
 {
 final String messageBody = messages[0].getMessageBody();
 final String phoneNumber = messages[0].getDisplayOriginatingAddress();

 Toast.makeText(context, "Expediteur : " + phoneNumber, Toast.LENGTH_LONG).show();
 Toast.makeText(context, "Message : " + messageBody, Toast.LENGTH_LONG).show();

 }
 }
 }

 }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T15:32:41.050

您可以`messageBody`放入[SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.html)。

在 ReceiveSMS 类中：

```
SharedPreferences prefs = getSharedPreferences("yourPrefs", 0);

SharedPreferences.Editor editor = prefs.edit();
editor.putString("messageBody", messageBody);
editor.commit(); 
```

在您的主要课程中：

```
SharedPreferences prefs = getSharedPreferences("yourPrefs", 0);
String messageBody = prefs.getString("messageBody","defaultValue"); 
```

# zend-framework2 - 阅读由 Zend\Log 编写的日志的最佳方式

> ID：16196058
> 
> 赞同：0
> 
> 时间：2013-04-24T15:28:54.080
> 
> 标签：zend-framework2

阅读和分析 Zend\Log 编写的日志的最佳方法是什么？例如，这就是我所拥有的：

```
2013-04-24T11:00:08+00:00 INFO (6): {"foo":"bar"}
2013-04-24T13:02:53+00:00 INFO (6): {"hello":"world"} 
```

我想要一种优雅的方式来迭代这样的日志：

```
$logger = new \Zend\Log\Logger();
$logger->addReader(new \Zend\Log\Reader\File('./data/logs/mylog'));
foreach ($logger->read() as $dateTimeObject => $jsonObject) {
    /// analyse logged json object
} 
```

不仅支持 Writers，还支持 Zend\Log 的 Reader 类不是一个好主意吗？

# android - jfeinstein10 的 SlidingMenu - 如何检测滑动事件

> ID：16196059
> 
> 赞同：1
> 
> 时间：2013-04-24T15:28:56.737
> 
> 标签：android, slidingmenu

我使用 SlidingMenu 作为`SlidingFragmentActivity`. 这是一个很棒的库并且相对易于使用，但我有一个小问题。我想检测用户何时从 ContentView 滑回BehindContentView。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-24T15:47:37.900

我通过源代码发现[了这个监听器接口。](https://github.com/jfeinstein10/SlidingMenu/blob/master/library/src/com/slidingmenu/lib/SlidingMenu.java#L84-L90)你可以像这样使用它：

```
mySlidingMenu.setOnOpenListener(new OnOpenListener() {
        @override
        public void onOpen() {
            // Do something
        }
    }); 
```

# orm - 新服务器上的关系映射错误

> ID：16196062
> 
> 赞同：2
> 
> 时间：2013-04-24T15:29:09.267
> 
> 标签：orm, coldfusion, coldfusion-9

我刚刚将自定义构建的 CMS 移至实时服务器（它位于开发服务器上），因为它更容易设置 RSS。问题是，尽管我更改了`application.cfclocation`以反映新路径，但我的关系映射都不再起作用。它也使用绝对路径。设置是这样的：

`F:\...\cmsRoot\com\dac` （这是原始路径）
`F:\...\cmsRoot\admin\com\dac` （这是新服务器上的路径。唯一的区别是admin文件夹的额外层；驱动器号相同）

和`Application.cfc`大多数页面分别位于`cmsRoot`和`cmsRoot\admin`文件夹中。这些`dac`文件夹包含我的关系 CFC 文件。

最初，当第一次加载每个 cfc 时，Coldfusion 会 针对每个关系映射抛出一个错误（我将它们注释掉以确保每个都存在相同的问题）。
`"Error Occurred While Processing Request
Cannot load the target CFC abc for the relation property abc in CFC xyz`

在我将这一行添加`<cfscript>ORMReload();</cfscript>`到每个 CFC 文件的开头之后，我可以克服这个错误并很好地访问登录页面。但是，现在每次尝试创建实体时都会出现错误：
`Mapping for component abc not found.`

调用它（并引发错误）的第一个实例如下所示：
`objectABC = EntityToQuery(EntityLoad("abc", {ActiveInd=1}));`

我已经在 stackoverflow 上搜索过任何相关问题，它通过添加 ORMReload() 调用帮助我修复了原始错误。但是，这并不能解决当前的问题。我已经更改了 CFC（在 中`Application.cfc`）的映射以使用相对路径，但这也没有帮助（因为我认为这可能是一个映射问题）。我还检查了文件夹权限以确保它们匹配，因为一位用户说这解决了他们的问题。两个文件夹也具有相同的权限。

如果有帮助，这里有任何有用的`Application.cfc`信息：

```
this.ormsettings = { cfclocation = ["F:\...\cmsRoot\admin\com\dac", "F:\...\cmsRoot\admin\com"]
                     , dialect="MicrosoftSQLServer"
                     , eventHandling = true
                   }; 
```

`Application.cfc`我可以在两台服务器上找到的文件之间的唯一区别是文件路径。数据库设置正确，页面本身没有问题（据我所知）。

我发现的另一件事是注释掉任何关系映射会导致所有内容正确加载（减去任何 objectABC.getXYZ() 调用，因为我删除了这些属性）。

我还重新启动了 Coldfusion 应用程序服务器，但没有明显差异。

文件结构中的更远位置是否有可能`Application.cfc`覆盖我设置的任何 cfclocation 设置？我不认为会是这种情况，但由于我`Application.cfc`的 似乎没有任何问题，所以我没有想法。两者的 application.cfc/.cfm 查找顺序（在 CFIDE 管理员的“设置”下）是相同的；设为默认。

我也尝试删除额外的文件夹层（所以所有映射都是相同的），但错误是相同的。

更新：通过为 /cmsRoot 添加一个特定的映射（到 F:...\cmsRoot），我得到一个新的错误，即组件不是持久的。但是，我所有的 cfc 都是这样开始的：

```
component persistent = "true" entityName = ..... 
```

即使我以其他方式定义实体，Coldfusion 是否有理由认为实体不是持久的？是的，我曾经`ormReload()`确保它正确更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-25T16:21:19.333

`cmsRoot`我找到的解决方案是通过`application.mappings['\cmsRoot'] = 'F:\...\cmsRoot';`在我的文件中使用将特定映射添加到文件夹`Application.cfc`。

`ormReload()`我在所有文件的顶部都有一些旧电话，`.cfc`因为这让一些事情可以工作；通过删除这些调用，它现在可以正确加载。

# acl - django storages with boto using pirvate ACL 在保存时抛出 404

> ID：16196063
> 
> 赞同：1
> 
> 时间：2013-04-24T15:29:10.687
> 
> 标签：acl, private, boto, django-storage

我正在使用带有 boto 的 django-storages。如果我让存储在我的模型中作为公共处理 S3 文件上传，那么一切正常。但是，当我在保存/更新时将 ACL 设置为私有时，我收到此错误消息

```
S3ResponseError: 404 Not Found
<?xml version="1.0" encoding="UTF-8"?>
<Error><Code>NoSuchKey</Code><Message>The specified key does not exist.</Message><Key>https:/s3.amazonaws.com/mahbuckit/mods/1366814943/1363379259-re6pc-x-l4d2-the-witch-psd-jpgcopy.zip</Key><RequestId>9631D1222C18F323</RequestId><HostId>bmMgn75bqITigKJWM7L7JrjN2TcsPCslOt9d3LX6WvzxWbHcdBfeqBIdFSZsmhXW</HostId></Error> 
```

这发生在添加/更新记录时。

这是我拥有 FileFIeld 的模型的保存部分。我重写以将 acl 设置为私有。

```
 def save(self, *args, **kwargs):
        super(MyModel, self).save(*args, **kwargs)
        if self.file:
            conn = boto.connect_s3(settings.AWS_ACCESS_KEY_ID,settings.AWS_SECRET_ACCESS_KEY)
            bucket = conn.create_bucket(settings.AWS_STORAGE_BUCKET_NAME)
            k = boto.s3.key.Key(bucket)
            k.key = settings.MEDIA_URL + self.file.name
            k.set_acl('private') 
```

但是文件保存一切正常。这是该死的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T17:41:25.400

我发现了问题。参考我使用和修改的好人[http://www.gyford.com/phil/writing/2012/09/26/django-s3-temporary.php](http://www.gyford.com/phil/writing/2012/09/26/django-s3-temporary.php)

我注意到我用 URL 构造了 Key。作者在推特中指出。这是错误消息的全部原因。睡眠不足，但错误消息清楚地表明缺少密钥，但显示的是 URL 而不是密钥。我的问题就在那里。键应该是文件或路径+文件名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-28T23:38:03.913

从我的测试来看，您需要 k.key 来反映 self.file.name：

```
k.key = self.file.name 
```

# javascript - 了解 Object.create

> ID：16196064
> 
> 赞同：0
> 
> 时间：2013-04-24T15:29:12.140
> 
> 标签：javascript

阅读[Object.create](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/create)文档后。我为它做了一些测试。这是我的代码。请审查它。

```
function Shape() {
  this.x = 0;
  this.y = 0;
}

Shape.prototype.move = function(x, y) {
    this.x += x;
    this.y += y;
    console.info("Shape moved.");
};

Rectangle=Object.create(Shape);

Rectangle.move(); //?? why move function is not found ? 
```

正如文档所说，`Object.create(proto[,propertiesObject]);` `proto`应该是新创建对象的原型。所以，`Rectangle.prototype`应该等于`Shape`. 但实际上并非如此。显然我不明白这部分文件。我仍然发现`Rectangle.__proto__==Shape`是真的。OK，Even`Rectangle.__proto__==Shape`是真的，为什么`Rectangle`找不到`move`函数？`move`函数不在原型链中吗？我以为`move`函数在`Rectangle.__proto__.prototype`，它应该在链中找到。为什么不能？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T15:33:11.453

原型必须是一个实际的对象。在这种情况下，您应该传递 Shape 的原型，而不是 Shape 函数。

```
function Shape() {
  this.x = 0;
  this.y = 0;
}

Shape.prototype.move = function(x, y) {
    this.x += x;
    this.y += y;
    console.info("Shape moved.");
};

Rectangle=Object.create(Shape.prototype, {a:1});

Rectangle.move(); // it will call now
Rectangle.a; // 1
Rectangle.x; // NaN ???
Rectangle.y; // NaN ??? 
```

请注意，`Object.create()`这与使用`new`关键字不同 - 这可能是您正在寻找的东西。

```
function Shape() {
  this.x = 0;
  this.y = 0;
}

Shape.prototype.move = function(x, y) {
    this.x += x;
    this.y += y;
    console.info("Shape moved.");
};

Rectangle=new Shape;

Rectangle.move(1,2); // works properly now
Rectangle.a; // undefined, we never made one
Rectangle.x; // 1
Rectangle.y; // 2 
```

由于 Javascript 实际上查找构造函数并`.prototype`递归地查找原型，因此它不会查找 Shape 的原型，因为它不是直接设置的，也不是`new`用于创建的构造函数`Rectangle`：

```
function Shape() {
  this.x = 0;
  this.y = 0;
}

Shape.prototype.move = function(x, y) {
    this.x += x;
    this.y += y;
    console.info("Shape moved.");
};

Rectangle = Object.create(Shape);
Rectangle.constructor; // Function()
Rectangle.constructor.prototype; // That's Function.prototype
/* as you can see Shape.prototype is never touched by the prototype chain */

Rectangle.__proto__; // Shape(), not the prototype (doesn't have any direct properties on it)

Rectangle.move(1,2); // TypeError: Rectangle.move is not a function
Rectangle.a; // does not exist
Rectangle.x; // function never called on Rectangle, so also doesn't exist
Rectangle.y; // function never called on Rectangle, so also doesn't exist 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-29T17:34:10.387

也许这会帮助您了解更多：

[https://www.youtube.com/watch?v=DwYPG6vreJg&feature=player_detailpage#t=739s](https://www.youtube.com/watch?v=DwYPG6vreJg&feature=player_detailpage#t=739s)

在这里他解释说它不像你说的那样工作。你的论点

> 我以为`move`功能在`Rectangle.__proto__.prototype`

是正确的。您可以找到`move`as`Rectangle.__proto__.prototype.move`但这**并不意味着**您可以找到它 as `Rectangle.move`。原型链中断。我认为视频中对此进行了详细描述。

试着想想这些代码部分：

```
function Shape() {
    this.x = 0;
    this.y = 0;
}

Shape.__proto__.move = function(x, y) {
    this.x += x;
    this.y += y;
    console.info("Shape moved.");
};

Rectangle=Object.create(Shape);

Rectangle.move(); 
```

或者：

```
function Shape() {
    this.x = 0;
    this.y = 0;
}

Shape.prototype.move = function(x, y) {
    this.x += x;
    this.y += y;
    console.info("Shape moved.");
};

Rectangle=Object.create(Shape);

Rectangle.prototype.move(); 
```

（在这些情况下，x 和 y 仍然不正确，但您并没有询问它们；））

# c++ - 使用 Boost.Spirit 解析标记化的自由形式语法

> ID：16196065
> 
> 赞同：1
> 
> 时间：2013-04-24T15:29:15.020
> 
> 标签：c++, boost, boost-spirit, callgrind, boost-spirit-lex

我一直在尝试为 callgrind 工具的输出创建一个 Boost.Spirit 解析器，它是 valgrind 的一部分。Callgrind 输出一种特定于领域的嵌入式编程语言 (DSEL)，它可以让你做各种很酷的事情，比如合成计数器的自定义表达式，但它不容易解析。

我在[https://gist.github.com/ned14/5452719#file-sample-callgrind-output](https://gist.github.com/ned14/5452719#file-sample-callgrind-output)放置了一些示例 callgrind 输出。我已经在[https://gist.github.com/ned14/5452719#file-callgrindparser-hpp](https://gist.github.com/ned14/5452719#file-callgrindparser-hpp)和[https://gist.github.com/ned14/5452719对 Boost.Spirit 词法分析器和解析器进行了目前的最佳尝试#file-callgrindparser-cxx](https://gist.github.com/ned14/5452719#file-callgrindparser-cxx)。Lexer 部分很简单：它将标记值、非空白文本、注释、行尾、整数、十六进制、浮点数和运算符（忽略示例代码中的标点符号，它们未使用）。空白被跳过。

到目前为止，一切都很好。问题是解析标记化的输入流。我什至还没有尝试过主要的节，我仍在尝试解析可能出现在文件中**任何**位置的标记值。标签值如下所示：

```
tagtext: unknown series of tokens<eol> 
```

它可以是自由格式的文本，例如

```
desc: I1 cache: 32768 B, 64 B, 8-way associative, 157 picosec hit latency 
```

在这种情况下，您希望将标记集转换为字符串，即转换为 iterator_range 并提取。

然而，它可能是一个表达式，例如

```
event: EPpsec = 316 Ir + 1120 I1mr + 1120 D1mr + 1120 D1mw + 1362 ILmr + 1362 DLmr + 1362 DLmw 
```

这表示从现在开始，事件 EPpsec 将被合成为 Ir 乘以 316 添加到 I1mr 乘以 1120 添加到 ... 等等。

我想在这里说明的一点是，标签-值对需要作为任意标记集进行累积，并后处理为我们以后将它们变成的任何内容。

为此，Boost.Spirit 的 utree() 类看起来正是我想要的，这就是示例代码所使用的。但是在 VS2012 上使用带有可变参数模板的 11 月 CTP 编译器，我目前看到这个编译错误：

```
1>C:\Users\ndouglas.RIMNET\documents\visual studio 2012\Projects\CallgrindParser\boost\boost/range/iterator_range_core.hpp(56): error C2440: 'static_cast' : cannot convert from 'boost::spirit::detail::list::node_iterator<const boost::spirit::utree>' to 'base_iterator_type'
1>          No constructor could take the source type, or constructor overload resolution was ambiguous
1>          C:\Users\ndouglas.RIMNET\documents\visual studio 2012\Projects\CallgrindParser\boost\boost/range/iterator_range_core.hpp(186) : see reference to function template instantiation 'IteratorT boost::iterator_range_detail::iterator_range_impl<IteratorT>::adl_begin<const Range>(ForwardRange &)' being compiled
1>          with
1>          [
1>              IteratorT=base_iterator_type
1>  ,            Range=boost::spirit::utree
1>  ,            ForwardRange=boost::spirit::utree
1>          ] 
```

...这表明我的 base_iterator_type 是 Boost.Spirit multi_pass<> 包装的 istreambuf_iterator 用于前向迭代器性质，Boost.Spirit 的 utree() 实现不知何故无法理解。问题是，我不确定这是我的错误代码还是错误的 Boost.Spirit 代码，因为 line_pos_iterator<> 未能正确指定其 forward_iterator 概念标签。

感谢过去的 Stackoverflow 帮助，我可以编写一个纯非标记化的语法，但它会很脆弱。正确的解决方案是标记化并使用能够相当任意输入的自由格式语法。让 Boost.Spirit 的 Lex 和 Grammar 在现实世界的示例而不是玩具示例中协同工作的示例数量非常少。因此，任何帮助将不胜感激。

尼尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T19:55:48.313

token 属性公开了一个变体，除了基本迭代器范围之外，它还可以 _assume `token_type`typedef 中声明的类型：

```
typedef lex::lexertl::token<base_iterator_type, mpl::vector<std::string, int, double>> token_type; 
```

所以`string`：`int`和`double`。但是请注意，当解析器*实际*使用该值时，*强制*转换为一种可能的类型只会延迟发生。

 *`utree`s 是一个非常通用的容器**^([1])**。因此，当您`spirit::utree`在规则上公开一个属性，并且令牌*值变体*包含一个 iterator_range 时，它​​会尝试将其分配给`utree`对象（这会失败，因为迭代器是......'funky'）。

获得所需行为的最简单方法是***强制***Qi 将`tag`令牌的属性解释为字符串，并将*其*分配给`utree`. 因此，以下行构成了使编译成功的修复：

```
 unknowntagvalue = qi::as_string[tok.tag] >> restofline; 
```

## 笔记

说了这么多，我确实建议以下

*   考虑使用来根据匹配`Nabialek Trick`来调度不同的*惰性规则*`tag`- 这使得以后无需处理 raw `utree`s

*   您可能已经成功地专注于`boost::spirit::traits::assign_to_XXXXXX`特征（请参阅[文档](http://www.boost.org/doc/libs/1_53_0/libs/spirit/doc/html/spirit/advanced/customize/assign_to.html)）

*   考虑使用纯 Qi 解析器。虽然我可以“感觉到”你的情绪“它会变脆” **^([2])**，但似乎你已经证明它会将复杂性提高到可能没有净值的程度：

    *   属性实现的意想不到的方式（这个问题）
    *   line-pos 迭代器的问题（这是一个经常被问到的问题，而且 AFAIR 它大多有*困难*或*不优雅*的解决方案）
    *   诸如临时调试（访问 SA 中的源数据）、切换/禁用跳过程序等方面的不灵活性。
    *   我个人的经验是，查看*词法分析器状态*来驱动这些并没有帮助，因为切换词法分析器状态只能从 可靠地工作`lexer token semantic actions`，而消歧通常会在*Qi 阶段发生*

但我有分歧:)

* * *

**^([1])**例如，它们具有用于非常轻量级“引用”迭代器范围的工具（例如符号，或避免从源缓冲区*复制到属性中，除非需要）*

**^([2])**实际上，只是因为使用顺序词法分析器（扫描器）大大减少了回溯机会的数量，所以它简化了解析器的心智模型。但是，您可以使用`expectation points`几乎相同的效果。*

# android - Android-Toast 代替无动作

> ID：16196070
> 
> 赞同：0
> 
> 时间：2013-04-24T15:29:22.630
> 
> 标签：android, types, toast

基本上我们可以将 EditBox 设置为接受特定的数据类型，即 . `android:InputType="number"`. 假设，如果我们用字母输入，那么字符将不会被添加到 EditBox 中，即不会发生任何动作。我想要的是必须显示定义“不允许使用字母”的 Toast。我可以尝试什么样的代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T15:34:14.463

在[您](http://developer.android.com/reference/android/text/TextWatcher.html)的`EditText`. 当有任何更改时，`onTextChange`将调用该方法。在那里你可以检查有效性。

例如

```
editText.addTextChangedListener(new TextWatcher() {
    @Override
    public void onTextChanged(CharSequence s, int start, int before, int count) {
        // check vallidity if there is any alphabet show toast
    }

    @Override
    public void beforeTextChanged(CharSequence s, int start, int count, int after) {
        // TODO Auto-generated method stub
    }

    @Override
    public void afterTextChanged(Editable s) {
        // TODO Auto-generated method stub
    }
}); 
```

您也可以使用其他两种方法。我认为方法的名称清楚地说明了它们的目的

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-24T15:34:23.510

您需要实现自己的**`TextWatcher`**喜欢

```
mEditText.addTextChangedListener(new TextWatcher() {
    @Override
    public void onTextChanged(CharSequence s, int start, int before, int count) {
        // check if the entered character is valid or not. If not valid, then show Toast
    }

    @Override
    public void beforeTextChanged(CharSequence s, int start, int count, int after) {
        // TODO Auto-generated method stub
    }

    @Override
    public void afterTextChanged(Editable s) {
        // 
    }
}); 
```

# google-maps-api-3 - Google 地图、Fusion Tables 和地理位置

> ID：16196075
> 
> 赞同：0
> 
> 时间：2013-04-24T15:29:44.850
> 
> 标签：google-maps-api-3, google-fusion-tables

我在将 ST_DISTANCE 中的变量设置为变量而不是数字时遇到问题。我的目标是按到客户端的距离对融合表条目进行排序，只显示最接近的 3 个。

（此外，我希望窗口缩小并包含这些点以及指向客户所在的位置。任何提示或指向某些资源的链接将不胜感激）。

这是谷歌地图、融合表和地理位置代码：

```
<script type="text/javascript">
(function() {   
    if(!!navigator.geolocation) {       
        var map;
        var mapOptions = {
            zoom: 15,
            mapTypeId: google.maps.MapTypeId.ROADMAP,
        };          
        navigator.geolocation.getCurrentPosition(function(position) {           
            var geolocate = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
            map.setCenter(geolocate);           
        });
        map = new google.maps.Map(document.getElementById('map-canvas'), mapOptions)

        layer = new google.maps.FusionTablesLayer({
            map: map,
            heatmap: { enabled: false },
            query: {
                select: "col1",
                from: "1JaRXQJ_YJch5Ua6cfZCBpaUEKRnd2jIcHVmcODY",
                orderBy: 'ST_DISTANCE(col1, LATLNG("geolocate"))',
                limit: 3,
                where: ""
            },
            options: {
                styleId: 2,
                templateId: 2
            }
        });

    } else {
    map = new google.maps.Map(document.getElementById('map-canvas'), {
            center: new google.maps.LatLng(39.918487877955485, -98.30599773437501),
            zoom: 15,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        });     
        layer = new google.maps.FusionTablesLayer({
            map: map,
            heatmap: { enabled: false },
            query: {
                select: "col1",
                from: "1JaRXQJ_YJch5Ua6cfZCBpaUEKRnd2jIcHVmcODY",
                where: ""
            },
            options: {
                styleId: 2,
                templateId: 2
            }

        });     
    }

})();
google.maps.event.addDomListener(window, 'load', initialize);
</script> 
```

我知道这很混乱。我不知道javascript。

我想知道如何放置由以下创建的变量“gelocate”：

```
navigator.geolocation.getCurrentPosition(function(position) {           
        var geolocate = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
        map.setCenter(geolocate);           
}); 
```

进入LATLNG地点：

```
var layer = new google.maps.FusionTablesLayer({
    query: {
        select: 'Address',
        from: '15UY2pgiz8sRkq37p2TaJd64U7M_2HDVqHT3Quw',
        orderBy: 'ST_DISTANCE(Address, LATLNG(37.4,-122.1))',
        limit: 3
} 
```

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T14:35:57.740

这只是一个基本的javascript问题......

使 geolocate 全球化，如 var map；

```
var map;
var geolocate; 
```

删除现有地理定位前面的 var。

然后删除您使用 geolocate 的引号。

```
orderBy: 'ST_DISTANCE(col1, LATLNG(' + geolocate + ') )', 
```

# ios - 无效的二进制文件：无效的启动图像/iPhone 5 优化要求/缺少推送通知权利

> ID：16196090
> 
> 赞同：2
> 
> 时间：2013-04-24T15:30:15.667
> 
> 标签：ios, iphone-5

我最近的应用程序版本已被拒绝为无效二进制文件，并附有以下说明：

**无效的启动图像**- 您的应用包含一个带有大小修饰符的启动图像，仅支持使用 iOS 6.0 SDK 或更高版本构建的应用。

尽管您不需要解决以下问题，但我们想让您了解它们：

**iPhone 5 优化要求**- 您的二进制文件未针对 iPhone 5 进行优化。截至 5 月 1 日，提交的所有新 iPhone 应用程序和应用程序更新必须支持 iPhone 5 上的 4 英寸显示屏。所有应用程序必须包含适当大小的启动图像。查看 iOS 人机界面指南，了解有关 iPhone 5 支持的更多信息。

该应用程序被创建为在iPhone **4-5**和**iPad 1-3**（带和不带 Retina）上**全屏运行。**我创建的启动图像如下：

 ****```
Default.png (640 x 1136)
Default-568h@2x.png (640 x 1136)
Default@2x~iphone.png (640 x 960)
Default-Portrait~iphone.png (320 x 480)
Default-Portrait@2x~ipad.png (1536 x 2008)
Default-Portrait~ipad.png (768 x 1004)
Default-Landscape@2x~ipad.png (2048 x 1496)
Default-Landscape~ipad.png (1024 x 748) 
```

这些位于我的项目根目录中，并按上述顺序包含在 AIR for iOS 设置“包含的文件”列表中（顺序重要吗？）。

当我加载应用程序时，启动图像会显示在我的 iPhone 5 和 iPad 3 上，尽管它们似乎在第一次加载时会调整大小/向左跳跃，就在切换到应用程序的主屏幕之前。该应用程序在两台设备上的大小都正确（没有黑色边距）。

也许我看错了尺寸。Adobe 似乎建议我使用全分辨率作为图像分辨率：

*   [http://help.adobe.com/en_US/air/build/WS901d38e593cd1bac1e63e3d129907d2886-8000.html#WS901d38e593cd1bac58d08f9112e26606ea8-8000](http://help.adobe.com/en_US/air/build/WS901d38e593cd1bac1e63e3d129907d2886-8000.html#WS901d38e593cd1bac58d08f9112e26606ea8-8000)

但所有其他建议似乎都表明启动图像不应包含最终尺寸的菜单栏：

*   [http://developer.apple.com/library/ios/#qa/qa1588/_index.html](http://developer.apple.com/library/ios/#qa/qa1588/_index.html)

您能提供的任何建议将不胜感激。

最后，苹果的回应包括以下内容：

**缺少推送通知权利**- 您的应用似乎包含用于注册 Apple 推送通知服务的 API，但应用签名的权利不包括“aps-environment”权利。如果您的应用程序使用 Apple 推送通知服务，请确保您的应用程序 ID 在配置门户中启用推送通知，并在使用包含“aps-environment”权利的分发配置文件签署您的应用程序后重新提交。有关详细信息，请参阅本地和推送通知编程指南中的“供应和开发”。如果您的应用程序不使用 Apple 推送通知服务，则无需执行任何操作。您可以从以后的提交中删除 API 以停止此警告。如果您使用第三方框架，您可能需要联系开发人员以获取有关删除 API 的信息。

如果其他人正在搜索此问题，我可以通过此链接解决： [App 由于“缺少推送通知权利”而被拒绝](https://stackoverflow.com/questions/5719182/app-rejected-because-of-missing-push-notification-entitlement)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-07-31T17:21:14.730

我也有这个问题。实际上在 5 分钟前刚刚修复！这就是我所做的。

创建以下三个 .png 图像文件并将它们保存到 src 文件夹中（不要将它们留在 assets 文件夹中）。

*   Default.png (设置为 320x480px) - iphone 3
*   Default@2x.png (设置为 640x960px) - iphone 4
*   Default-568h@2x.png (设置为 640x1136px) - iphone 5

这些文件不必链接到您的任何代码 - Apple 在加载应用程序时使用它们来设置初始屏幕大小。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-07T21:51:59.890

您可能正在使用不包含 Base SDK 6.0 的 XCode 版本进行开发。为了包含 iPhone 5 Default-568h@2x.png 并且在上传后不会让您的应用程序被拒绝，您需要使用指向 6.0 的 Base SDK 来构建它。包含 Base SDK 6.0 的 XCode 版本不再支持任何低于我认为 4.2 的 iOS，因此，如果您的目标是 iPhone 3 或第一代 iPod 等设备，那么您就不走运了。如果没有，那么只需将您的 XCode 更新到最新版本，并将项目构建设置中的 Base SDK 设置为最新版本，或至少 6.0。****

# android - API中的Android Strange蓝牙问题或我遗漏了一些东西

> ID：16196092
> 
> 赞同：1
> 
> 时间：2013-04-24T15:30:18.677
> 
> 标签：android, bluetooth, procfs

我的问题是我无法找到我自己的蓝牙设备的设备类别和设备服务。虽然我可以使用

> ```
> BluetoothAdapter mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter(); 
> ```

我什至尝试访问 sys>devices>virtual path 中的蓝牙文件夹，但该文件夹并非位于每个设备中。

有没有办法通过访问proc文件系统来获取蓝牙信息，如果是，请帮忙。

真的很奇怪，我能够通过获取远程设备的蓝牙类

> btAdapter.getBondedDevices();//返回蓝牙设备类的集合

但我无法获得默认（自己的）蓝牙的设备类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-28T09:39:20.963

最后经过一番挣扎，我找到了一种找到自己的蓝牙设备服务的方法。Sdptool 提供了在蓝牙设备上执行 SDP 查询和管理本地 sdpd 的接口。它的代码片段如下：**此代码仅适用于具有 root 访问权限的设备。**

> ```
> try {
>           System.setOut(new PrintStream(new FileOutputStream("/mnt/sdcard/abc.txt")));
>           System.out.println("HelloWorld1");
>           Process p;
>           p = Runtime.getRuntime().exec(new String[] { "su", "-c","sdptool", "browse", "local" });
>           BufferedReader stdInput = new BufferedReader(new InputStreamReader(
>                   p.getInputStream()));
>           String s;
>           String res = "";
>           while ((s = stdInput.readLine()) != null) {
>               if(s.contains(""))
>               System.out.println(s);
>               Log.e("above -----", s);
>           }
>           p.destroy();
>           return res;
>       } catch (Exception e) {
>           e.printStackTrace();
>       } 
> ```

如果您想发现另一个蓝牙设备的服务，则可以将“本地”替换为远程设备的 MAC 地址。

或者您也可以尝试运行 sdp 工具 usinf adb shell，如下所示：

**>> adb shell sdptool 浏览本地**

# jsf-2 - jsf2.0如何定期更新页面？

> ID：16196094
> 
> 赞同：4
> 
> 时间：2013-04-24T15:30:25.947
> 
> 标签：jsf-2, primefaces

我的 JSF 2.0 页面包含一些数据，这些数据是动态的，因此需要在某个预定义的时间间隔（比如每 10 秒）内自动刷新。我使用 PrimeFaces 3.5 作为一个强大的组件套件。下面是托管bean-

```
@ManagedBean
@ViewScoped
public Monitor implements Serializable {

    //max,min,avg,stdDev,reason are caluclated based on some dynamic data
    private int max;
    private int min;
    private double avg;
    private double stdDev;
    private String reason;

    public int getMax() {
            //Here before returning I am calling some methods to get the max from dynamic data
        return max;
    }

    public int getMin() {
            //Here before returning I am calling some methods to get the min from dynamic data
        return min;
    }

    public double getAvg() {
            //Here before returning I am calling some methods to get the avg from dynamic data
        return avg;
    }

    public String getReason() {
            //Here before returning I am calling some methods to get the reason from dynamic data
        return reason;
    }

    public double getStdDev() {
            //Here before returning I am calling some methods to get the stdDev from dynamic data
        return stdDev;
    }

    public void setMax(int max) {
        this.max = max;
    }

    public void setMin(int min) {
        this.min = min;
    }

    public void setAvg(double avg) {
        this.avg = avg;
    }

    public void setStdDev(double stdDev) {
        this.stdDev = stdDev;
    }

    public void setReason(String reason) {
        this.reason = reason;
    }
} 
```

直到现在我还没有最终确定布局但是我会是这样的-

```
<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui">
    <h:head>
        <title>Insert title here</title>
    </h:head>
    <h:body>
        <p:panel>
            <h:outputLabel value="#{monitor.min}" />
            <h:outputLabel value="#{monitor.max}" />
            <h:outputLabel value="#{monitor.avg}" />
            <h:outputLabel value="#{monitor.stdDev}" />
            <h:outputLabel value="#{monitor.reason}" />
        </p:panel>
    </h:body>
</html> 
```

如何在 JSF 2.0 中定期更新页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T17:07:09.653

您可以使用**[Poll](http://www.primefaces.org/showcase/ui/poll.jsf)**自动刷新您的页面，**Poll**可以通过 javascript 开始停止：例如，当 count(bean 变量) >=10 时 poll 将停止：您可以像 @Ravi [post](http://forum.primefaces.org/viewtopic.php?f=3&t=10480#p37755)一样使用 stop ，我的示例演示您可以开始 stop(通过：pol.stop() 和 pol.start())。

小面：

```
<h:form id="form">  
            <p:panel id="pntest">
              // content here
            </p:panel>
            <h:outputText id="txt_count" value="#{tabview.count}" />
            <p:poll interval="1" listener="#{tabview.increment}" update="txt_count" widgetVar="pol" oncomplete="test(xhr, status, args);"/>
            <script type="text/javascript">
                //<![CDATA[
                function test(xhr, status, args){
                    if(args.sotest >= 10){
                        pol.stop();
                    }else{
                       location.reload(); // refresh page                        
                     }
                }
                //]]>
            </script>
        </h:form> 
```

豆：

```
 private int count = 0;
        public void increment() {
                count++;
                RequestContext reqCtx = RequestContext.getCurrentInstance();
                reqCtx.addCallbackParam("sotest", count);
                //1\. update by using PrimeFaces specific API, use [RequestContext#update()][3].
                RequestContext.getCurrentInstance().update("form:pntest");
                //2\. update by using standard JSF API, add the client ID to [PartialViewContext#getRenderIds()][4].             

FacesContext.getCurrentInstance().getPartialViewContext().getRenderIds().add("form:pntest");
            }

            public int getCount() {
                return this.count;
            }

            public void setCount(int count) {
                this.count = count;
            } 
```

# sed - 比较行与 awk 与同时读取行

> ID：16196095
> 
> 赞同：0
> 
> 时间：2013-04-24T15:30:29.120
> 
> 标签：sed, awk, ksh, cat

我有两个文件，一个有 17k 行，另一个有 4k 行。我想将位置 115 与位置 125 与第二个文件中的每一行进行比较，如果匹配，则将第一个文件中的整行写入一个新文件。我想出了一个解决方案，我使用 'cat $filename | 读取文件。同时阅读LINE'。但大约需要 8 分钟才能完成。有没有其他方法像使用'awk'来减少这个过程时间。

我的代码

```
cat $filename | while read LINE
do
  #read 115 to 125 and then remove trailing spaces and leading zeroes
  vid=`echo "$LINE" | cut -c 115-125 | sed 's,^ *,,; s, *$,,' | sed 's/^[0]*//'`
  exist=0
  #match vid with entire line in id.txt
  exist=`grep -x "$vid" $file_dir/id.txt | wc -l`
  if [[ $exist -gt 0 ]]; then
    echo "$LINE" >> $dest_dir/id.txt
  fi
done 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T15:43:13.160

这怎么样：

```
FNR==NR {                      # FNR == NR is only true in the first file

    s = substr($0,115,10)      # Store the section of the line interested in 
    sub(/^\s*/,"",s)           # Remove any leading whitespace
    sub(/\s*$/,"",s)           # Remove any trailing whitespace

    lines[s]=$0                # Create array of lines
    next                       # Get next line in first file
}
{                              # Now in second file
    for(i in lines)            # For each line in the array
        if (i~$0) {            # If matches the current line in second file 
            print lines[i]     # Print the matching line from file1
            next               # Get next line in second file
        }
} 
```

将其保存到脚本`script.awk`并运行如下：

```
$ awk -f script.awk "$filename" "${file_dir}/id.txt" > "${dest_dir}/id.txt" 
```

这仍然会很慢，因为对于第二个文件中的每一行，您需要首先查看约 50% 的唯一行*（假设大多数行确实匹配）*。如果您可以确认第二个文件中的行与子字符串完全匹配，则可以显着改善这一点。

* * *

对于全行匹配，这应该更快：

```
FNR==NR {                      # FNR == NR is only true in the first file

    s = substr($0,115,10)      # Store the section of the line interested in 
    sub(/^\s*/,"",s)           # Remove any leading whitespace
    sub(/\s*$/,"",s)           # Remove any trailing whitespace

    lines[s]=$0                # Create array of lines
    next                       # Get next line in first file
}
($0 in lines) {                  # Now in second file
    print lines[$0]     # Print the matching line from file1
} 
```

# devise - 如何让设计 2.2.3 接受 rails 3.2.13 应用程序的自动生成密码

> ID：16196099
> 
> 赞同：0
> 
> 时间：2013-04-24T15:30:50.990
> 
> 标签：devise, ruby-on-rails-3.2

我正在尝试创建一个 rails 3.2.13 应用程序，在该应用程序中创建用户时会为该用户自动生成密码。现在，我正在使用 before_validate 生成密码并将其分配给用户对象上的密码和密码确认字段，然后再创建，但设计仍然抱怨密码仍然为空。

设计接受我为用户对象生成的密码的最佳方法是什么？如果可能的话，如果能够做到这一点而不必覆盖内部验证，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T14:38:17.643

I don't known what you are doing wrong... Tried quickly here and everything turned out ok.

Here is my model

```
class User < ActiveRecord::Base
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable
  attr_accessible :email, :password, :password_confirmation, :remember_me

  before_validation :set_user_password

  def set_user_password
    @password = Devise.friendly_token
  end 
end 
```

I didn't even had to set password_confirmation just password and it saved without errors at the rails console.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-11-13T23:40:27.470

以前的解决方案很棒。但是您不能重设密码。set_user_password 应该只在创建帐户时执行。

```
before_validation :set_user_password, :on => :create
def set_user_password
    @password = Devise.friendly_token
end 
```

# c++ - 字符比较错误

> ID：16196100
> 
> 赞同：0
> 
> 时间：2013-04-24T15:30:52.800
> 
> 标签：c++, if-statement

在 switch 语句之后，程序比较字符。在这个阶段我已经调试并看到字符串的第一个字符是 111 'o' 而不仅仅是 'o'，这导致我的程序失败。我该如何解决它或问题出在哪里？

```
#include <iostream>
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include <cmath>

using namespace std;

int main(){

char sentence1[50];
char sentence2[50];
int m,n,k,l;
int i,j,substitution;
cout<<"Enter the first word:"<<endl;
cin>>sentence1;
cout<<"Enter the second word:"<<endl;
cin>>sentence2;
m = strlen(sentence1);
n = strlen(sentence2);
int cost[m+1][n+1];
bool a1,a2;
cost[0][0]=0;

for(i=1;i<m+1;i++){
    cost[i][0]=cost[i-1][0]+2;

}
for(j=1;j<n+1;j++){
    cost[0][j]=cost[0][j-1]+2;

    }

for(i=1;i<m+1;i++){
    for(j=1;j<n+1;j++){

    switch (sentence1[i-1]){
    case 'a':a1=true;
    case 'u':a1=true;
    case 'e':a1=true;
    case 'o':a1=true;
    case 'i':a1=true;
    default:a1=false;
    }
    switch (sentence2[j-1]){
    case 'a':a2=true;
    case 'u':a2=true;
    case 'e':a2=true;
    case 'o':a2=true;
    case 'i':a2=true;
    default:a2=false;

    }
    if(sentence1[i-1]==sentence2[j-1]){substitution=0;

    }
    else if(a1==true && a2==false){substitution=4;}
    else if(a1==false && a2==true){substitution=4;}
    else if(a1==true && a2==true){substitution=3;}
    else if(a1==false && a2==false){substitution=3;}

        cost[i][j]=min(min(cost[i-1][j]+2,cost[i][j-1]+2),cost[i-1][j-1]+substitution);
    }
}

for(i=0;i<m+1;i++){
    for(j=0;j<n+1;j++){

        cout<<cost[i][j]<<"  ";
    }
    cout<<endl;
}

return 0;   
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-24T15:36:47.257

[`switch`](http://en.wikipedia.org/wiki/Switch_statement#Fallthrough)没有`break`. [_](http://en.wikipedia.org/wiki/Switch_statement#Fallthrough)

```
switch (sentence1[i-1]){
case 'a':a1=true; break;
case 'u':a1=true; break;
case 'e':a1=true; break;
case 'o':a1=true; break;
case 'i':a1=true; break;
default:a1=false; break;
} 
```

由于重复此逻辑，请考虑将其提升为自己的功能。

```
bool is_a_vowel( char c )
{
  switch (c){
  case 'a':
  case 'u':
  case 'e':
  case 'o':
  case 'i':
     return true;
  default:
     return false;
} 
```

现在您可以拥有更具可读性和一致性的代码。

```
a1 = is_a_vowel( sentence1[i-1] );
a2 = is_a_vowel( sentence2[j-1] ); 
```

# rhino - 带有未知标记的 CSSlint 'overqualified' 错误'∩╗┐'

> ID：16196104
> 
> 赞同：1
> 
> 时间：2013-04-24T15:30:55.037
> 
> 标签：rhino, csslint

由于某种原因，当我使用 Rhino 运行 Css lint 时，出现以下错误：

![CSSlint 错误](https://i.stack.imgur.com/z3o0x.png)

我正在与：

*   视窗服务器服务器 2008
*   视觉工作室 2012 (MVC 4)
*   Java版本“1.7.0_21”
*   犀牛版 1_6R7
*   来自此网址的 csslint-rhino.js：“ [https://raw.github.com/stubbornella/csslint/master/release/csslint-rhino.js](https://raw.github.com/stubbornella/csslint/master/release/csslint-rhino.js)

我的元素如下所示：

```
.body {
}

.testelement {

}

.loadingIndicator {
  width: 16px;
  height: 16px;
  background-image: url('/images/loadingIndicator.gif');
} 
```

这似乎是某种编码问题，但我似乎无法弄清楚问题是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T08:57:15.517

我似乎自己发现了问题。

在 Visual Studio 2012 中，文件保存为 UTF-8。显然 CSS lint 无法处理这种编码。不过，没有 BOM 的 UTF-8 似乎可以正常工作。

# unix - sort -u 在某些情况下会出错

> ID：16196108
> 
> 赞同：0
> 
> 时间：2013-04-24T15:31:06.323
> 
> 标签：unix

输入文件包含两行：

```
추가
나인 
```

运行`uniq`和`sort -u`命令：

```
$ uniq -c input_file 
    2 추가
$ sort -u input_file
    추가 
```

由于某些原因，这两个字符串在相邻时是“相等的”。（在 debian 和 ubuntu 上测试）在 Mac 上它工作正常：

```
$ sort -u input_file
    나인
    추가 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T09:23:11.510

更改语言环境配置有助于：

```
export LC_ALL=C 
```

谢谢肖恩！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T16:13:01.053

`uniq`仅适用于已排序的数据。这是你要求的吗？请参见手册页。

# c# - ajax 成功后对局部视图进行 Ajax 调用

> ID：16196110
> 
> 赞同：1
> 
> 时间：2013-04-24T15:31:13.150
> 
> 标签：c#, jquery, ajax, asp.net-mvc

我有一个包含所有按钮的局部视图，它需要在提交表单后显示更新的值。在提交时，我已经让它渲染了另一个部分视图，有没有办法让它在渲染成功时重新渲染。这是我现在尝试根据我在其他地方看到的代码开始工作的代码。

jQuery 在我看来：

```
<script type="text/javascript" charset="utf-8">
$(document).ready(function () {
    $('#ChangeGrade').click(function (e) {
        var tdata = $('#form1').serialize();
        var origname = $('#HeatGradeDiv').find('input[name="grade"]').first().val();
        var newname = $('#HeatGradeDiv').find('input[name="updatedGrade"]').first().val();
        var heatname = $('#HeatGradeDiv').find('input[name="hiddenHeat"]').first().val();
        $.ajax({
            type: "POST",
            data: {
                mCollection: tdata,
                grade: origname,
                updatedGrade: newname,
                hiddenHeat: heatname

            },
            url: '@Url.Action("ChangeGrade","Home")',
            success: function (result) { success(result); }
        });
    });

    function success(result) {

        $('#HeatGradeDiv').dialog('close');
        $("#Partial_Chem_Analysis").html(result);
        //ajax call I'm trying to get working
        $.ajax({
            type: "POST",
            url: "/Home/ButtonsPartial",
            success: function (result2) { $("#ButtonsPartial").html(result2); }
        });
    }
});
</script> 
```

这是我正在调用的控制器方法。当我现在运行它时，它不会被击中。

```
public ActionResult ButtonsPartial()
    {
        ButtonsModel B = new ButtonsModel();
        B.GetData(searchQ);

        return PartialView(B);
    } 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T15:44:12.550

如果您将其附加到调试器（例如（chrome 开发人员工具或 firebug）），您是否看到任何 http 或 js 错误？

看起来您可能需要将其设为 GET 而不是 POST ...

```
$.ajax({
            type: "GET",
            url: "/Home/ButtonsPartial",
            success: function (result2) { $("#ButtonsPartial").html(result2); }
        }); 
```

# sql - SQL - 允许用户

> ID：16196112
> 
> 赞同：0
> 
> 时间：2013-04-24T15:31:19.643
> 
> 标签：sql, tweets

我们正在使用 SQL 创建一个类似 Twitter 的数据库。我在为以下内容创建存储过程时遇到问题：

允许用户在他/她的推文中检索前 2 个最常用的哈希标签。

更新：这是我的存储过程

```
create or replace 
procedure TOP_2_FREQUENT_HASHTAGS is
first_hashtag varchar2(255);
second_hashtag varchar2(255);

begin

with TopTwoHashtags 
AS (
SELECT 
  t.userID,
  th.HASHTAGID,
  ROW_NUMBER() OVER  (ORDER BY COUNT(th.TWEETID) DESC) r

FROM 
  Tweet_Hashtag th
  INNER JOIN Tweets t
  ON th.TWEETID = t.TWEETID
WHERE 
  userID = t.userid
GROUP BY
  t.userID,
  th.HASHTAGID
)
SELECT 
  ht.TOPIC
 into first_hashtag
FROM
  Hashtag ht
  INNER JOIN TopTwoHashtags tt
  ON ht.HASHTAGID = tt.HASHTAGID
WHERE
  r < 3;

 dbms_output.put_line('Top 2 most frequent hashtags: '|| first_hashtag);

 exception 
  when no_data_found then
  dbms_output.put_line('This user does not exist');
  return;

end; 
```

我们有以下表格：

*   行政
*   跟随
*   井号

    *   哈希标签
    *   话题
*   Tweet_Hashtag

    *   TWEETHASHID
    *   推文
    *   哈希标签
*   推文
    *   推文
    *   用户身份
    *   推特日期
    *   推文时间
    *   推文
*   推特用户

这是我们搜索推文的存储过程：

```
create or replace 
procedure search_tweets(ttwitext in tweets.tweettext%type, tuserID in tweets.userid%type )
is
  twit_user  tweets.userid%type;
  twit_id tweets.tweetid%type;
  twit_text tweets.tweettext%type;

begin

  select tweettext into twit_text from tweets where userid = tuserid and tweettext like '%' ||ttwitext || '%';
  if twit_text is not null then

  dbms_output.put_line(twit_text);

 end if; 

exception
  when no_data_found then
    dbms_output.put_line('kersplat' );
    return;

end; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T17:47:31.987

在 SQL 中，您可以使用 SQL 获取最常见的主题标签，例如：

```
select tagid, COUNT(*) as cnt
from tweet_hashtag ht
where userid = tuserid
group by userid, tagid
order by cnt desc
limit 2 
```

如果您想要实际的标签，您需要加入标签表中的标签名称。

如果`tweet_hashtag`表格没有`userid`，那么您可能需要加入`tweets`表格：

```
select ht.tagid, COUNT(*) as cnt
from tweet_hashtag ht join
     tweets t
     on ht.tweetId = t.tweetId
where ht.userid = tuserid
group by t.userid, ht.tagId
order by cnt desc
limit 2 
```

如果您使用的是 Oracle，请将 替换为`limit 2`'rownum <= 2'。`top 2`如果您使用的是 SQL Server 或 Sybase，请在`select`子句中将其替换为。

康拉德是绝对正确的。的正确格式`rownum`是：

select t.* from (select ht.tagid, COUNT(*) as cnt from tweet_hashtag ht join tweets t on ht.tweetId = t.tweetId where ht.userid = tuserid group by t.userid, ht.tagId order by cnt desc ) t 其中 rownum <= 2

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T22:35:36.553

我就是这样写的。使用一个`WITH`块，我会`ROW_NUMBER`使用`ROW_NUMBER`.

注意：这不能很好地处理关系，并且会在它们发生时拉回任意行。`RANK`如果您想在这种情况下显示两个以上的主题标签，您可以使用

```
with TopTwoHashtags
AS (

SELECT 
  t.userID,
  th.HASHTAGID,
  ROW_NUMBER() OVER  (ORDER BY COUNT(th.TWEETID) DESC) r
FROM 
  Tweet_Hashtag th
  INNER JOIN Tweets t
  ON th.TWEETID = t.TWEETID
WHERE 
  userID = 3
GROUP BY
  t.userID,
  th.HASHTAGID
)
SELECT
  ht.TOPIC
FROM
  Hashtag ht
  INNER JOIN TopTwoHashtags tt
  ON ht.HASHTAGID = tt.HASHTAGID
WHERE
  r < 3; 
```

[演示](http://sqlfiddle.com/#!4/12123/2)

# linux - 如何在 LINUX 中检查日期格式

> ID：16196114
> 
> 赞同：0
> 
> 时间：2013-04-24T15:31:22.990
> 
> 标签：linux, unix, date

我正在尝试检查我的输入参数是模式**YYYYMMDDN**还是**YYYYMM**。

如果我的日期输入是**YYYYMMDDN**格式，那么我需要对其进行验证并将其转换为**MMNYY**格式 如果我的日期输入是**YYYYMM**格式，那么我需要对其进行验证并将其转换为**YYMM**格式。

请让我知道如何做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T15:40:41.867

Following will work for a date in `YYYYMMDDN` or `YYYYMM` formats:

```
dt='201304203'
[[ $dt =~ ^[0-9]{6}([0-9]{3})? ]] && echo "matched" 
```

Though keep in mind that this will not validate your date.

**Alternatively** use sed:

```
echo $dt | sed -n '/^[0-9]\{6\}[0-9]\{0,3\}/p' 
```

**Alternative #2** use grep:

```
echo $dt | grep -qP '^[0-9]{6}[0-9]{0,3}$' 
```

then check the return code `$?` (1 means failed and 0 means matched)

**UPDATE:**

For YYYYMMDDN => MMNYY:

```
echo '201304203' | sed -r 's/^[0-9]{2}([0-9]{2})([0-9]{2})[0-9]{2}([0-9])$/\2\3\1/' 
```

For YYYYMM => YYMM:

```
echo '201304' | sed -r 's/^[0-9]{2}([0-9]{2})([0-9]{2})$/\1\2/' 
```

# r - 行数变化时如何绑定向量和矩阵

> ID：16196117
> 
> 赞同：3
> 
> 时间：2013-04-24T15:31:25.547
> 
> 标签：r

在迭代算法中，我在每个步骤中确定一个、几行或不考虑进一步计算的行。为了存储感兴趣的行，我必须绑定两个变量：X.id 和 X.val。我目前使用：

```
cbind(X.id,X.val) 
```

当 X.id 和 X.val 都是矩阵时，它工作正常：

```
X.id  <- matrix(1,nrow=2,3)
X.val <- matrix(1,nrow=2,1)     
 cbind(X.id,X.val)
     [,1] [,2] [,3] [,4]
[1,]    1    1    1    1
[2,]    1    1    1    1 
```

但不是当他们有一排时：

```
X.id  <-  c(1,1,1)
X.val <- matrix(1,nrow=1,1)
cbind(X.id,X.val) 
```

这给出了以下错误：

```
 In cbind(c(1, 1, 1), matrix(1, nrow = 1, 1)) : number of rows of result is not a multiple of vector length (arg 1) 
```

当行数为 0,1 和 n 时，建议的解决方案应该有效，同时保留矩阵的维数！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T15:33:15.543

我相信你正在寻找`append(X.id,X.val)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T17:11:20.677

关于 和 之间的关系，这个问题有点`id`不清楚`value`。您寻求的解决方案很可能是使用`list`@cyro111 在评论中描述的那样。

使用`cbind`不会给你你想要的结果，因为它会强制`X.id`进入一个列。（当然，除非那是你所追求的。同样，你的问题有点不清楚）。

您也可以简单地使用`c()` as

```
 > c(X.id, X.val)
 [1] 1 1 1 1 
```

# c# - 在 C# 中删除和添加 GridRow 定义

> ID：16196118
> 
> 赞同：1
> 
> 时间：2013-04-24T15:31:27.570
> 
> 标签：c#, xaml, windows-8

我有一个在 XAML 中定义的带有 RowDefinitions 的网格，在代码中使用快照视图时我需要更改它，到目前为止，我只能弄清楚如何通过以下方式删除它们：

```
RowDefinitionCollection defs = mainGrid.RowDefinitions;
defs.RemoveAt(0);
defs.RemoveAt(0); 
```

本质上，我需要删除快照视图中的所有定义（上面的代码有效），但随后需要使第一行的高度为 140，第二行在返回快照后为“*”。我将如何添加具有这些特征的定义？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T16:30:58.883

简单地

```
RowDefinitionCollection rdc = mainGrid.RowDefinitions;

rdc.Clear();

rdc.Add(new RowDefinition() { Height = new GridLength(140) });
rdc.Add(new RowDefinition() { Height = new GridLength(1, GridUnitType.Star) }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T16:21:10.880

尝试：

```
 RowDefinitionCollection defs = myGrid.RowDefinitions;
    defs.Add(new RowDefinition() { Height = new GridLength(140) });
    defs.Add(new RowDefinition() { Height = new GridLength(1, GridUnitType.Star) }); 
```

或者，您可以拥有两个 Grid 并仅将 Visibility 作为可视状态的一部分进行修改，这样您就不会在代码中进行大量繁琐的 UI 操作。内置的 Visual Studio 模板使用这种技术来捕捉视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-30T08:48:45.650

myGrid.Children.Clear();

删除所有子控件

# javascript - Angular：访问控制器中的资源值

> ID：16196121
> 
> 赞同：7
> 
> 时间：2013-04-24T15:31:39.587
> 
> 标签：javascript, angularjs

我在 javascript 方面很糟糕，对 Angular 也很陌生，所以请多多包涵。

我的服务器返回这个：

```
{"latitude": 3.172398, "name": "Event", "longitude": 101.6739005} 
```

**服务.js**

```
var mapModule = angular.module('map.services', ['ngResource']);

mapModule.factory('Event', function($resource) {
    return $resource('/custom_api/get_event_details/:eventId/',
        {eventId: '@id'});
}); 
```

**控制器.js**

```
function mapCtrl($scope, Event) {
    var eventDetail = Event.get({eventId: $scope.eventId});
    console.log(eventDetail);
    console.log(eventDetail.latitude);
} 
```

我正在尝试通过访问服务器返回的 json，`eventDetail.latitude`但我得到了`undefined`.

在控制台中，`console.log(eventDetail)`看起来像：

```
e {$get: function, $save: function, $query: function, $remove: function, $delete: function}
latitude: 3.172398
longitude: 101.6739005
name: "abc"
__proto__: e 
```

我知道这`eventDetail`是一个`resource`实例，但我如何直接获取这些值？

如果我`$scope.eventDetail`在我的控制器中设置，我将能够通过`{{ eventDetail.latitude }}`我的模板访问它。

我到底如何在控制器中做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-24T16:24:08.317

从[文档](http://docs.angularjs.org/api/ngResource.$resource)：

> 重要的是要意识到调用 $resource 对象方法会立即返回一个空引用（对象或数组取决于 isArray）。从服务器返回数据后，现有参考将填充实际数据。

因此，除非您将其放入回调函数中，否则您的日志记录将无法正常工作，如下所示：

```
function mapCtrl($scope, Event) {
  Event.get({eventId: $scope.eventId},function(eventDetail){
    //on success callback function
    console.log(eventDetail);
    console.log(eventDetail.latitude);
  });
} 
```

如果您出于某种原因不想使用 a`resource`您可以使用该[`$http`服务](http://docs.angularjs.org/api/ng.$http)：

```
$http.get(url).then(function(response){console.log(response.data);}); 
```

# javascript - 是否可以挂钩任何 inline-css 更改

> ID：16196127
> 
> 赞同：3
> 
> 时间：2013-04-24T15:31:50.550
> 
> 标签：javascript, javascript-events

是否可以在没有突变观察者的情况下挂钩任何 inline-css 更改，而是通过绑定某种事件或覆盖原型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T16:34:51.890

有突变事件（例如 DOMAttrModified ），但并非所有浏览器都支持它们。看：

[事件检测何时使用 Jquery 更改 css 属性](https://stackoverflow.com/questions/1397251/event-detect-when-css-property-changed-using-jquery)

[在 JQuery 中，设置新的 css 规则后是否可以获得回调函数？](https://stackoverflow.com/questions/7974761/in-jquery-is-it-possible-to-get-callback-function-after-setting-new-css-rule)

[http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-eventgroupings-mutationevents](http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-eventgroupings-mutationevents)

但我认为最好的解决方案可能是为所有用于设置 css 的 html 元素添加一个原型方法，并将其用作钩子。

值得注意的是，更改 css 不是异步的，因此您可以在更改发生后依靠下一行代码触发：

[在 JQuery 中，设置新的 css 规则后是否可以获得回调函数？](https://stackoverflow.com/questions/7974761/in-jquery-is-it-possible-to-get-callback-function-after-setting-new-css-rule)

# java - 如何在安卓应用中显示韩语单词

> ID：16196130
> 
> 赞同：1
> 
> 时间：2013-04-24T15:31:55.530
> 
> 标签：java, android, user-interface, unicode, fonts

在一些没有安装韩语字体的安卓手机上，在安卓应用中显示韩语单词时，它们无法显示为可读。如何处理android应用程序中的这种情况？有没有方便的方法来解决这个问题？我的应用必须安装韩文字体吗？我是android的初学者，我有点困惑，如果所有韩文字符串都用Unicode编码，它们不应该显示为可读吗？

万分感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T16:10:14.180

You might be right about the font. When you have a `String` containing Korean characters, it is not necessarily supported by all font types. If you want to make sure, that those `Strings` get displayed properly, use your own font. [Here you can find some font types that support Korean](http://cooltext.com/Fonts-Unicode-Korean).

In [another thread on SO](https://stackoverflow.com/questions/3424165/can-i-embed-a-custom-font-in-an-android-application), they discussed how to include your own font in Android. Basically there are these steps:

1.  copy the font in your project's folder (`myProject/assets/fonts`)
2.  load the font in your project
3.  set some text to use that font

**Example:**

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Typeface myTypeFace = Typeface.createFromAsset(getAssets(), "fonts/myKoreanFont.ttf");      // that's how you load your font
    TextView myTextView = (TextView) findViewById(R.id.myKoreanText);
    myTextView.setTypeface(myTypeFace);        // that's how you use your font
} 
```

Here is another [example tutorial](http://www.botskool.com/geeks/how-use-external-fonts-android) on how to use fonts. But the technique is basically the same.

# extjs - 在 extjs 4.2 中将数据从商店设置到具有网格的表单面板

> ID：16196133
> 
> 赞同：2
> 
> 时间：2013-04-24T15:31:57.880
> 
> 标签：extjs, extjs4

我正在尝试为表单面板中的组件设置值，下面是我的代码。

带网格的表单面板：

```
Ext.define('MyApp.view.MyForm', {
    extend: 'Ext.form.Panel',

    height: 436,
    width: 754,
    layout: {
        columns: 4,
        type: 'table'
    },
    bodyPadding: 10,
    title: 'My Form',

    initComponent: function() {
        var me = this;

        Ext.applyIf(me, {
            items: [
                {
                    xtype: 'displayfield',
                    colspan: 4,
                    fieldLabel: '',
                    value: 'Display Field'
                },
                {
                    xtype: 'displayfield',
                    colspan: 2,
                    margin: '0 50 0 0 ',
                    fieldLabel: 'Age',
                    labelAlign: 'top',
                    value: 'Display Field'
                },
                {
                    xtype: 'displayfield',
                    colspan: 2,
                    fieldLabel: 'Country',
                    labelAlign: 'top',
                    value: 'Display Field'
                },
                {
                    xtype: 'gridpanel',
                    colspan: 4,
                    header: false,
                    title: 'My Grid Panel',
                    store: 'MyJsonStore',
                    columns: [
                        {
                            xtype: 'gridcolumn',
                            dataIndex: 'DeptName',
                            text: 'Dept Name'
                        },
                        {
                            xtype: 'gridcolumn',
                            dataIndex: 'DeptId',
                            text: 'Dept ID'
                        }
                    ]
                }
            ]
        });

        me.callParent(arguments);
    }

}); 
```

楷模：

```
Ext.define('MyApp.model.EmpModel', {
    extend: 'Ext.data.Model',

    uses: [
        'MyApp.model.DeptModel'
    ],

    fields: [
        {
            name: 'Name'
        },
        {
            name: 'Age'
        },
        {
            name: 'Country'
        },
        {
            name: 'Dept'
        }
    ],

    hasMany: {
        associationKey: 'Dept',
        model: 'MyApp.model.DeptModel'
    }
});

Ext.define('MyApp.model.DeptModel', {
    extend: 'Ext.data.Model',

    uses: [
        'MyApp.model.EmpModel'
    ],

    fields: [
        {
            name: 'DeptName'
        },
        {
            name: 'DeptId'
        }
    ],

    belongsTo: {
        associationKey: 'Dept',
        model: 'MyApp.model.EmpModel'
    }
}); 
```

店铺：

```
Ext.define('MyApp.store.MyJsonStore', {
    extend: 'Ext.data.Store',

    requires: [
        'MyApp.model.EmpModel'
    ],

    constructor: function(cfg) {
        var me = this;
        cfg = cfg || {};
        me.callParent([Ext.apply({
            model: 'MyApp.model.EmpModel',
            storeId: 'MyJsonStore',
            data: {
                EmpDet: [
                    {
                        EmpName: 'Kart',
                        Age: '29',
                        Dept: [
                            {
                                DeptName: 'Dev',
                                DeptId: '1000'
                            }
                        ]
                    }
                ]
            },
            proxy: {
                type: 'ajax',
                url: 'data/empDet.json',
                reader: {
                    type: 'json'
                }
            }
        }, cfg)]);
    }
}); 
```

json数据：

```
{
    "EmpDet": [
        {
            "EmpName": "Kart",
            "Age": "29",
            "Dept": [
                {
                    "DeptName": "Dev",
                    "DeptId": "1000"
                }
            ]
        }
    ]
} 
```

问题：

1）我将组件的值保留为“显示字段”本身，因为如果我删除此值，下面的网格宽度会减小。我觉得这是因为表格布局和 colspans。是否有任何其他最佳方式来显示标签而无需在值加载时进行任何对齐更改。

2）我正在尝试设置显示字段的值。我试图用这个事件来做，`afterrender`但问题是它在`Ext.getStore('MyJsonStore').getAt(0)`. 我发现如果我在按钮的单击事件中编写相同的内容，这可以正常工作。所以，当我尝试显示字段的事件时，我觉得商店没有加载`afterrender`（商店的自动加载设置为true）。组件的后渲染事件是否有替代方案。另外，有没有办法一次性设置所有字段值，而不是一个一个地设置每个组件？

3）我也发现很难正确地进行关联。我正在使用 Sencha Architect 2.2，当我进入网格的数据索引时，我无法在下拉列表中获得“DeptName”和“DeptId”。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-12T10:51:12.410

对于第 2 个问题，我想建议以下方式。我希望这个对你有用。

我的解决方案：

您可以在加载商店时设置显示字段值。所以你可以使用 store 的 load 事件，如下所示：

```
yourStoe.on('load',function()
{
   //set display field values here
});
```

# c# - 存储列表 当应用程序重新启动时，进入隔离存储返回 null

> ID：16196134
> 
> 赞同：0
> 
> 时间：2013-04-24T15:31:58.000
> 
> 标签：c#, list, windows-phone-8, isolatedstorage

我将类型的对象存储`List<string>`在独立存储中。我的问题是当我关闭应用程序并稍后重新启动它并尝试检索`List<string>`时，它返回 null。

所有其他对象，例如`string`、`bool`、等，除了对象之外`int`，`Dictionary<string, bool>`都保留它们的值。`List<string>`

```
 public List<string> BuddyGroupsSetting
    {
        get
        {
            return GetValueOrDefault<List<string>>(BuddyGroupsKeyName, BuddyGroupsDefault);
        }
        set
        {
            AddOrUpdateValue(BuddyGroupsKeyName, value);
            Save();
        }
    } 
```

我检查了我的代码，没有任何命令可以清除任何地方的列表。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T16:55:03.663

好的，我想通了。简单的错误..我没有直接为“BuddyGroupsSetting”属性设置一个值，而是错误地使用添加了一个项目

```
BuddyGroupsSetting.Add(item) 
```

所以`set`实际上从未被调用过！为了纠正这个问题，我创建了一个私有字段

```
private List<string> buddyGroupsSetting = new List<string>(); 
```

然后使用该字段设置值

```
buddyGroupsSetting = BuddyGroupsSetting 
```

# asp.net - 触发 DataList ItemCommand 时从 DataSource 中删除项目

> ID：16196135
> 
> 赞同：1
> 
> 时间：2013-04-24T15:32:03.797
> 
> 标签：asp.net, vb.net, datalist

我有点卡在这里。我有一个数据列表，它有一个 Lit（SomeObject 的）数据源。

```
Private MyObjectList As List (of SomeObject) 
```

我在用户需要时加载数据，单击按钮将产品添加到他们的购物篮并绑定数据列表。

```
Form_load....
dl.Datasource = MyObjectList
dl.databind()
End Sub 
```

要在数据列表中显示数据，我有一个标签，显示他们添加的内容，使用 e eventArg 将其投射到我的对象，示例如下：

```
Protected Sub dl_ItemDataBound(sender As Object, e As System.Web.UI.WebControls.DataListItemEventArgs) Handles dl.ItemDataBound
    Dim myObject = DirectCast(e.Item.DataItem, SomeObject)
....
Label.Text = myObject.Description

End Sub 
```

内联代码是：

```
 <asp:DataList ID="dl" runat="server">
                <ItemTemplate>
                    <asp:Label ID="Label1" runat="server" Text="Label"></asp:Label>
                    <asp:Button ID="DeletePRoduct" runat="server" Text="Delete" CommandName="Del" CommandArgument='<%# Container.ItemIndex %>'/>
        </ItemTemplate>
    </asp:DataList> 
```

所以现在我希望用户能够删除产品

```
Protected Sub dl_ItemCommand(source As Object, e As System.Web.UI.WebControls.DataListCommandEventArgs) Handles dl.ItemCommand
    Dim myObject = DirectCast(e.Item.DataItem, SomeObject)

    If e.CommandName = "Del" Then
        MyObjectList.Remove(myObject)
    ....
    End If
End Sub 
```

如果我尝试在 ItemCommand 下传入 myObject，我意识到我投射的 e.item.DataItem 是 Nothing 所以它不会删除任何产品。然后，当我意识到我不能这样做时，我想按行索引删除该产品并在按钮上添加了一个 CommandArgument，因为 List 需要一种 SomeObject。

谁能建议如何以这种方式删除对象？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T16:24:52.450

您可以使用 找到删除项目的 ID `dl.DataKeys[e.Item.ItemIndex]`。确保设置`DataKeyField`控制`DataList`。

![在此处输入图像描述](https://i.stack.imgur.com/cVfTv.png)

```
<asp:DataList ID="dl" runat="server" DataKeyField="ID"...>
 ....
</asp:DataList>

Public Class SomeObject
    Public Property ID() As Integer
        Get
            Return m_ID
        End Get
        Set
            m_ID = Value
        End Set
    End Property
    Private m_ID As Integer
    Public Property Name() As String
        Get
            Return m_Name
        End Get
        Set
            m_Name = Value
        End Set
    End Property
    Private m_Name As String
End Class

Private _someObjects As List(Of SomeObject)
Public Property SomeObjects() As List(Of SomeObject)
    Get
        If _someObjects Is Nothing Then
            _someObjects = New List(Of SomeObject)() With { _
                New SomeObject() With { _
                    .ID = 1, _
                    .Name = "One" _
                }, _
                New SomeObject() With { _
                    .ID = 2, _
                    .Name = "Two" _
                }, _
                New SomeObject() With { _
                    .ID = 2, _
                    .Name = "Three" _
                } _
            }
        End If
        Return _someObjects
    End Get
    Set
        SomeObjects = value
    End Set
End Property

Protected Sub Page_Load(sender As Object, e As System.EventArgs)
    If Not IsPostBack Then
        dl.DataSource = SomeObjects
        dl.DataBind()
    End If
End Sub

Protected Sub dl_ItemCommand(source As Object, e As DataListCommandEventArgs)
    If e.CommandName = "Del" Then
        Dim id = Convert.ToInt32(dl.DataKeys(e.Item.ItemIndex))
        Dim someObject = SomeObjects.First(Function(x) x.ID = id)
        SomeObjects.Remove(someObject)

        dl.DataSource = SomeObjects
        dl.DataBind()
    End If
End Sub 
```

**注意：**您需要注意删除后数据的持久性。例如，将数据存储在 ViewState、Session 或 Database 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T15:34:24.433

`DataList`从数据源中删除对象后，您必须再次绑定`MyObjectList`才能在页面上获取更新的记录。

```
If e.CommandName = "Del" Then

    MyObjectList.Remove(myObject)
    dl.Datasource = MyObjectList
    dl.databind()
....
End If 
```

# c# - C# 读取 .txt 文件格式化

> ID：16196137
> 
> 赞同：4
> 
> 时间：2013-04-24T15:32:06.687
> 
> 标签：c#, file-io

我有一个特定的文本文件：

```
197 17.16391215
198 17.33448519
199 17.52637986
200 17.71827453
201 17.9101692
202 18.10206387
203 18.29395854
204 18.48585321
205 18.67774788
206 18.86964255
207 19.06153722 
```

等等。需要说明的是：第一列 (197,198,..) 表示帧号，第二列 (17.xxx,...) 表示链接到帧号的位置，反之亦然。
现在我想将每一行分隔在不同的数组中。和

```
string[] delimiters = new string[] {" ", "\r\n" };
string line = reader.ReadToEnd();
string[] test = line.Split(delimiters, StringSplitOptions.None); 
```

我得到了一个包含文本文件中所有条目的数组。但我想要一个数组中的所有帧号（第一列）和另一个第二个数组中的所有位置。

我要做的工作如下：我将获得一个位置编号（例如 18.10）然后我必须在第二列的 .txt 文件中搜索最接近的匹配编号并返回链接的帧编号（在本例中为 202） . 我的想法是生成两个匹配的数组，在一个中搜索位置并从另一个返回帧号。当我在互联网上搜索半天时，我发现了很多类似 .select 的东西，但没有任何直接匹配的东西能解决我的问题；但也许我现在很愚蠢。

所以感谢您的帮助。希望你能听懂我的英语:P

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T15:43:15.287

**编辑 2 在您的评论之后，您希望每秒重复搜索 24 次。**

首先，让我警告一下，如果您尝试播放帧流，那么查找列表是错误的方法。正确的方法超出了问题的范围，但本质上您希望限制顺序数据的显示。

假设值不变，并且您的查找是随机的，而不是顺序的。你可以试试这样的代码。

```
private readonly List<int> ids = new List<int>();
private readonly IList<double> values = new List<double>();

public void LoadData(string path)
{
    foreach (var line in File.ReadLines(path))
    {
        var pair = line.Split(' ');
        this.ids.Add(int.Parse(pair[0]));
        this.values.Add(double.Parse(pair[1]));
    }
}

public double Lookup(int id)
{
    return this.values[this.ids.FindIndex(i => i >= id)];
} 
```

如果需要更高的性能，您可以在[此处](https://stackoverflow.com/a/594528/659190)使用专门的二进制搜索。

**阅读后编辑，希望能理解**

并假设帧按 Id 升序排列。

```
double GetFrameValue(string path, int limit)
{
    string [] parts;
    foreach (var line in File.ReadLines(path))
    {
       parts = line.Split(' '); 
       var frameId = int.Parse[0];
       if (frameId >= limit)
       {
           break;
       }
    }

    return double.Parse(parts[1]);
} 
```

这具有仅在必要时读取文件而不将其全部保存在内存中的明显优势。如果您要在随机帧位置重复读取文件，那么最好将其全部加载到`Collection`具有快速比较性能的文件中，除非文件非常大。

* * *

怎么样，

```
IEnumerable<KeyValuePair<int, double>> ReadFrames(string path)
{
    foreach (var line in File.ReadLines(path))
    {
       var parts = line.Split(' '); 
       yield return new KeyValuePair<int, double>(
           int.Parse(parts[0]),
           double.Parse(parts[1]));
    }
}

var frames = new Dictionary<int, double>(ReadFrames("yourfile.txt"));

var frameIds = frames.Keys;
var values = frames.Values; 
```

* * *

如评论中所述，

```
var frames = File.ReadLines("yourfile.txt")
    .Select(line => line.Split(' '))
    .ToDictionary(pair => int.Parse(pair[0]), pair => double.Parse(pair[1])); 

var frameIds = frames.Keys;
var values = frames.Values; 
```

应该也能正常工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T15:47:39.717

好吧，那么...

我创建了一个名为 的类`Frame`，具有两个属性：

```
 Number
 Position 
```

然后，我将读取文件，一次一行，`Frame`每行创建一个新文件，在空格处拆分该行并将新的添加`Frame`到`IList`. 这是一个简单程序的代码：

```
using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace ConsoleApplication1
{
    class Program
    {
        //Class to represent each frame
        public class Frame
        {
            //constructor..
            public Frame(string number, string position)
            {
                Number = number;
                Position = position;
            }

            public string Number { get; set; }
            public string Position { get; set; }
        }

        static void Main(string[] args)
        {
            string path = "c:\\data.txt";
            IList<Frame> AllFrames = new List<Frame>();

            foreach (string line in File.ReadLines(path))
            {
                //split each line at the space
                string[] parts = line.Split(' '); 

                //Create a new Frame and add it to the list
                Frame newFrame = new Frame(parts[0], parts[1]);
                AllFrames.Add(newFrame);
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-24T15:53:54.890

您可以使用 LINQ 来简化代码。我在这里假设位置是双数。

```
string filePath ="C:\wherethefileIs";
double targetPosition = 18.10;

var query = from line in File.ReadAllLines(filePath)
                    let dataLine = line.Split(new[] {' '})
                    select new
                        {
                            Frame = Int32.Parse(dataLine[0]),
                            Position = Double.Parse(dataLine[1])
                        };

var nearestFrame = query.OrderBy(e => Math.Abs(e.Position - targetPosition)).Select(e=>e.Frame).FirstOrDefault(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-24T16:03:13.870

从这个开始：

```
IEnumerable<KeyValuePair<int, double>> ReadFrames(string path)
{
    return File.ReadLines(path).Select(l => 
    { 
        var parts = l.Split(' ').Select(p => p.Trim());
        return new KeyValuePair<int, double>(
               int.Parse(parts.First()),
               double.Parse(parts.Skip(1).First()));
    });
} 
```

现在我们有了帧，让我们按位置编号查找帧：

```
int GetFrameByPosition(IEnumerable<KeyValuePair<int,double>> frames, double position)
{
    return frames.SkipWhile(f => f.Value < position).First().Key;
} 
```

请注意，它是单行的。像这样称呼它：

```
int frameNumber = GetFrameByPosition(GetFrames("path"), 18.10D); 
```

如果您需要回答不同的问题，那也可能是单行的。例如，该代码获取大于您输入的第一帧，但您要求最接近的帧，这可能是此之前的帧。你可以这样做：

```
int GetNearestFrameByPosition(IEnumerable<KeyValuePair<int,double>> frames, double position)
{
    return frames.OrderBy(f => Math.Abs(position - f.Value)).First().Key;
} 
```

另一个例子是，如果您使用它来寻找播放的起始位置，并且您确实希望*所有*帧都从第一帧开始。很简单：

```
IEnumerable<KeyValuePair<int,double>> SeekToFrameByPosition(IEnumerable<KeyValuePair<int,double>> frames, double position)
{
    return frames.SkipWhile(f => f.Value < frames.OrderBy(f => Math.Abs(position - f.Value)).First().Key);
} 
```

还是单线。

这里唯一的弱点是，如果你每次都返回文件，它每次都会从磁盘读取，这很慢。这可能是您需要的，但如果您不需要这样做，可以通过将所有帧预先加载到内存中来轻松提高速度，如下所示：

```
var cachedFrames = ReadFrames("path").ToList(); 
```

然后只需在任何地方使用该 cachedFrames 变量，而不是重新调用 ReadFrames() 函数。

最后，有一种思想流派会避免使用 KeyValuePair 来支持创建自定义类。该类可能如下所示：

```
public class Frame
{
    public int index {get;set;}
    public double position {get;set;}
} 
```

在上面看到的任何地方都使用它`KeyValuePair<int,double>`。此外，它足够小（< 16 字节），您可以考虑使用结构而不是类。如果你确实使用了一个结构，最好也让它成为*不可变*的，这是一种奇特的说法，你在构造函数中设置了成员，然后以后再也不改变它们：

```
public struct Frame
{
   public Frame(int index, double position)
   {
      this.index = index; 
      this.position = position;
   }

   public int index {get;private set;}
   public double position {get;private set;}
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-24T15:49:40.583

您可以创建一个与文件中的信息匹配的类，如下所示：

```
class FrameInfo
{
   public int Frame{ get; private set; }
   public double Position { get; private set; }

    public FrameInfo(int frame, double position)
    {
        Frame = frame;
        Position = position;
    }
} 
```

或者只使用 KeyValuePair

然后解析您的数据：

```
var frameInfos = File.ReadLines("MyFile.txt").
    Select(line => line.Split(' ')).
    Select(arr => new FrameInfo(int.Parse(arr[0]), double.Parse(arr[1]))).
    ToArray(); 
```

查找某个帧

```
var myFrame = frameInfos.First(fi => fi.Frame == someNumber); 
```

但是这是一个 O(N) 操作，字典会产生更好的性能。

编辑：如果您正在寻找最接近某个位置的框架，这可能有效：

```
 public static T MinValue<T>(this IEnumerable<T> self, Func<T, double> sel)
    {
        double run = double.MaxValue;
        T res = default(T);
        foreach (var element in self)
        {
            var val = sel(element);
            if (val < run)
            {
                res = element;
                run = val;
            }
        }
        return res;
    } 
```

叫喜欢

```
var closestFrame = frameInfos.MinValue(fi => Math.Abs(fi.Position - somePosition)); 
```

# spring - javax.persistence.TransactionRequiredException：执行更新/删除查询

> ID：16196142
> 
> 赞同：4
> 
> 时间：2013-04-24T15:32:18.650
> 
> 标签：spring, hibernate, jakarta-ee, jpa

我正在使用 JPA2.0+hibernate3.2+Spring3.0.5+MySql5.5 来实现 DAO 功能，但是当我尝试将实体持久保存到 DB 时，它不起作用并且只是抛出 javax.persistence.TransactionRequiredException。请参阅我的编码和配置。

1.实体

```
@Entity
@Table(name="booking_no")
public class BookingNo {
    public BookingNo(){
    };
    @Id
    @GeneratedValue
    private Integer id;
    @Column(unique=true,length=30)
    private String prefix; 
```

2.道

```
@Transactional(propagation=Propagation.REQUIRED,isolation=Isolation.DEFAULT)
    public Object generateBookingNo(String customer) throws Exception{
        logger.debug("generateBookingNo() start,generate booking no by customer:"+customer);
        if(customer == null || customer.trim().length() == 0){
            logger.error("generateBookingNo(),customer is empty,return null");
            return null;
        }
        EntityManager em = emf.createEntityManager();
        try{
                Query query = em.createQuery("select b from BookingNo b where b.prefix='"+customer+"'");
                Object object =null;
                try{
                        object = query.getSingleResult();
                }catch(NoResultException e){
                        logger.info("generateBookingNo(),not find id for customer["+customer+"],will save a initial record");
                        BookingNo bkNo = new BookingNo();
                        bkNo.setPrefix(customer);
                        logger.debug("generateBookingNo(),the bookingNo is:"+bkNo);
                        em.persist(bkNo);
                        //em.flush();
                        Object object2 =null;
                        try{
                               object2 = em.createQuery("select b.id from BookingNo b where b.prefix='"+customer+"'").getSingleResult();
                        }catch(Exception e2){
                            logger.error("get error when query customer ["+customer+"]",e);
                            return null;
                        }
                        return  customer+"-"+object2;
                }
                if(object == null || !(object instanceof BookingNo)){
                    logger.error("generateBookingNo(),return nothing but not catch NoResultException,return null");
                    return null;
                }
                BookingNo bkNo =(BookingNo) object;
                Integer newId = bkNo.getId()+1;
                //Query query2 = em.createQuery("update BookingNo b set b.id="+newId+" where b.prefix='"+customer+"'");
                Query query2 = em.createNativeQuery("update booking_no b set b.id="+newId+" where b.prefix='"+customer+"'");
                int res = query2.executeUpdate();
                logger.debug("generateBookingNo(),the to be update bookingNo is:"+bkNo+",the update result is:"+res);
                //em.flush();
                return customer+"-"+newId;
        }catch(Exception e){
            logger.error("get error in generateBookingNo()",e);
            return null;
        }finally{
            em.close();
            emf.close();
        } 
```

3.spring cfg文件

```
 <tx:annotation-driven transaction-manager="transactionManager" />
    <bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">  
    <property name="entityManagerFactory" ref="bookingEMF"/>  
</bean>  
     <bean id="dataSource1"  class="com.mchange.v2.c3p0.ComboPooledDataSource" destroy-method="close">
               <property name="driverClass" value="com.mysql.jdbc.Driver"></property>
               <property name="jdbcUrl" value="jdbc:mysql://localhost/booking"></property>
               <property name="user" value="root"></property>
               <property name="password" value="123456"></property>
               <property name="initialPoolSize" value="1"></property>
               <property name="minPoolSize" value="1"></property>
               <property name="maxPoolSize" value="20"></property>
               <property name="maxIdleTime" value="60"></property>
               <property name="acquireIncrement" value="5"></property>
               <property name="idleConnectionTestPeriod" value="60"></property>
               <property name="acquireRetryAttempts" value="20"></property>
               <property name="breakAfterAcquireFailure" value="true"></property>
</bean>
    <!-- Entity Manager Factory -->
     <bean id="bookingEMF" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
                <property name="persistenceUnitName" value="booking"/>  
                <property name="dataSource" ref="dataSource1" />
                <property name="jpaVendorAdapter" ref="jpaVendorAdapter" />
                <property name="jpaPropertyMap">  
                   <map>  
                         <entry key="hibernate.transaction.flush_before_completion"     value="true"/> 
                         <entry key="hibernate.transaction.auto_close_session"  value="true"/>  
                         <entry key="hibernate.connection.release_mode" value="auto"/> 
                          <entry key="hibernate.hbm2ddl.auto" value="update"/> 
                          <entry key="format_sql" value="true"/> 
                         <!-- <entry key="hibernate.transaction.manager_lookup_class" value="com.atomikos.icatch.jta.hibernate3.TransactionManagerLookup"/>   -->
                   </map>  
                </property> 
    </bean>
    <!-- JPA Vendor,Implementation is hibernate -->
     <bean id="jpaVendorAdapter" class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
                <property name="database" value="MYSQL" />
                <property name="showSql" value="true"/>
                <property name="generateDdl" value="false"/>

                <property name="databasePlatform" value="org.hibernate.dialect.MySQLDialect" />
    </bean>
    <!-- DAO -->
    <bean id="BookingDAO" class="com.chailie.booking.dao.impl.booking.BookingDAO" >
                <property name="emf" ref="bookingEMF"/>
    </bean> 
```

当运行junit测试用例如下

```
@Test
    public void testGenerateBookingNo(){
        try {
            BookingDAO dao  = (BookingDAO) DAOFactory.getDAO("BookingDAO", DAOFactory.TYPE_APPLICATION);
            dao.generateBookingNo("chailie");
            //dao.generateBookingNo("chailie2");
        } catch (Exception e) {
            // TODO Auto-generated catch block
            logger.error("get error",e);
        }

    } 
```

它会发生 javax.persistence.TransactionRequiredException 并且我不知道发生了什么，有人可以帮助解决这个问题吗？我真的很感激顺便说一句，请看我的日志

```
23:15:46.817 [main] DEBUG org.hibernate.hql.ast.ErrorCounter - throwQueryException() : no errors
23:15:46.837 [main] DEBUG o.h.hql.ast.QueryTranslatorImpl - HQL: select b from com.chailie.booking.model.booking.BookingNo b where b.prefix='chailie'
23:15:46.837 [main] DEBUG o.h.hql.ast.QueryTranslatorImpl - SQL: select bookingno0_.id as id0_, bookingno0_.prefix as prefix0_ from booking_no bookingno0_ where bookingno0_.prefix='chailie'
23:15:46.837 [main] DEBUG org.hibernate.hql.ast.ErrorCounter - throwQueryException() : no errors
23:15:46.856 [main] DEBUG org.hibernate.jdbc.AbstractBatcher - about to open PreparedStatement (open PreparedStatements: 0, globally: 0)
23:15:46.856 [main] DEBUG org.hibernate.jdbc.ConnectionManager - opening JDBC connection
23:15:46.891 [main] DEBUG org.hibernate.SQL - select bookingno0_.id as id0_, bookingno0_.prefix as prefix0_ from booking_no bookingno0_ where bookingno0_.prefix='chailie' limit ?
Hibernate: select bookingno0_.id as id0_, bookingno0_.prefix as prefix0_ from booking_no bookingno0_ where bookingno0_.prefix='chailie' limit ?
23:15:46.922 [main] DEBUG org.hibernate.jdbc.AbstractBatcher - about to open ResultSet (open ResultSets: 0, globally: 0)
23:15:46.926 [main] DEBUG org.hibernate.loader.Loader - result row: EntityKey[com.chailie.booking.model.booking.BookingNo#8]
23:15:46.935 [main] DEBUG org.hibernate.jdbc.AbstractBatcher - about to close ResultSet (open ResultSets: 1, globally: 1)
23:15:46.936 [main] DEBUG org.hibernate.jdbc.AbstractBatcher - about to close PreparedStatement (open PreparedStatements: 1, globally: 1)
23:15:46.936 [main] DEBUG org.hibernate.jdbc.ConnectionManager - aggressively releasing JDBC connection
23:15:46.936 [main] DEBUG org.hibernate.jdbc.ConnectionManager - releasing JDBC connection [ (open PreparedStatements: 0, globally: 0) (open ResultSets: 0, globally: 0)]
23:15:46.939 [main] DEBUG org.hibernate.engine.TwoPhaseLoad - resolving associations for [com.chailie.booking.model.booking.BookingNo#8]
23:15:46.941 [main] DEBUG org.hibernate.engine.TwoPhaseLoad - done materializing entity [com.chailie.booking.model.booking.BookingNo#8]
23:15:46.942 [main] DEBUG o.h.e.StatefulPersistenceContext - initializing non-lazy collections
23:15:46.942 [main] DEBUG org.hibernate.jdbc.ConnectionManager - aggressively releasing JDBC connection
23:15:46.944 [main] DEBUG o.h.ejb.AbstractEntityManagerImpl - mark transaction for rollback
23:15:46.954 [main] ERROR c.c.b.d.booking.impl.BookingDAOTest - get error in generateBookingNo()
javax.persistence.TransactionRequiredException: Executing an update/delete query
    at org.hibernate.ejb.QueryImpl.executeUpdate(QueryImpl.java:48) [hibernate-entitymanager-3.4.0.GA.jar:3.4.0.GA]
    at com.chailie.booking.dao.impl.booking.BookingDAO.generateBookingNo(BookingDAO.java:104) [classes/:na]
    at com.chailie.booking.dao.impl.booking.BookingDAO$$FastClassByCGLIB$$2898182b.invoke(<generated>) [cglib-2.2.jar:na]
    at net.sf.cglib.proxy.MethodProxy.invoke(MethodProxy.java:191) [cglib-2.2.jar:na]
    at org.springframework.aop.framework.Cglib2AopProxy$CglibMethodInvocation.invokeJoinpoint(Cglib2AopProxy.java:688) [spring-aop-3.0.5.RELEASE.jar:3.0.5.RELEASE]
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150) [spring-aop-3.0.5.RELEASE.jar:3.0.5.RELEASE]
    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110) [spring-tx-3.0.5.RELEASE.jar:3.0.5.RELEASE]
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172) [spring-aop-3.0.5.RELEASE.jar:3.0.5.RELEASE]
    at org.springframework.aop.framework.Cglib2AopProxy$DynamicAdvisedInterceptor.intercept(Cglib2AopProxy.java:621) [spring-aop-3.0.5.RELEASE.jar:3.0.5.RELEASE]
    at com.chailie.booking.dao.impl.booking.BookingDAO$$EnhancerByCGLIB$$58d6a935.generateBookingNo(<generated>) [cglib-2.2.jar:na]
    at com.chailie.booking.dao.booking.impl.BookingDAOTest.testGenerateBookingNo(BookingDAOTest.java:42) [test-classes/:na]
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [na:1.7.0_15]
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) [na:1.7.0_15]
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) [na:1.7.0_15]
    at java.lang.reflect.Method.invoke(Unknown Source) [na:1.7.0_15]
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44) [junit-4.7.jar:na]
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15) [junit-4.7.jar:na]
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41) [junit-4.7.jar:na]
    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20) [junit-4.7.jar:na]
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:76) [junit-4.7.jar:na]
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50) [junit-4.7.jar:na]
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193) [junit-4.7.jar:na]
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52) [junit-4.7.jar:na]
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191) [junit-4.7.jar:na]
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42) [junit-4.7.jar:na]
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184) [junit-4.7.jar:na]
    at org.junit.runners.ParentRunner.run(ParentRunner.java:236) [junit-4.7.jar:na]
    at org.apache.maven.surefire.junit4.JUnit4TestSet.execute(JUnit4TestSet.java:53) [surefire-junit4-2.10.jar:2.10]
    at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:123) [surefire-junit4-2.10.jar:2.10]
    at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:104) [surefire-junit4-2.10.jar:2.10]
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [na:1.7.0_15]
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) [na:1.7.0_15]
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) [na:1.7.0_15]
    at java.lang.reflect.Method.invoke(Unknown Source) [na:1.7.0_15]
    at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:164) [surefire-api-2.10.jar:2.10]
    at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:110) [surefire-booter-2.10.jar:2.10]
    at org.apache.maven.surefire.booter.SurefireStarter.invokeProvider(SurefireStarter.java:175) [surefire-booter-2.10.jar:2.10]
    at org.apache.maven.surefire.booter.SurefireStarter.runSuitesInProcessWhenForked(SurefireStarter.java:107) [surefire-booter-2.10.jar:2.10]
    at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:68) [surefire-booter-2.10.jar:2.10]
23:15:46.958 [main] INFO  o.hibernate.impl.SessionFactoryImpl - closing
23:15:46.960 [main] DEBUG o.h.transaction.JDBCTransaction - commit
23:15:46.962 [main] DEBUG o.h.transaction.JDBCTransaction - re-enabling autocommit
23:15:46.962 [main] DEBUG o.h.transaction.JDBCTransaction - committed JDBC Connection
23:15:46.962 [main] DEBUG org.hibernate.jdbc.ConnectionManager - aggressively releasing JDBC connection
23:15:46.963 [main] DEBUG org.hibernate.jdbc.ConnectionManager - releasing JDBC connection [ (open PreparedStatements: 0, globally: 0) (open ResultSets: 0, globally: 0)] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T16:01:05.047

在你做 a 之前，通过做`em.persist()`得到一个`EntityTransaction`对象（比如`et`），`em.getTransaction()`然后做 a `et.begin()`。完成后`em.persist()`，执行`et.commit()`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-26T16:30:41.250

如果您使用的是 EntityManagerFactory.createEntityManager() 我认为您还需要手动使用 EntityManager.getTransaction() 。

为什么不注入 Spring 托管的 EntityManager 而不是工厂？

```
@PersistenceContext(unitName="booking")
EntityManager em; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T19:02:36.163

Is your DAOFactory a Spring Managed Bean? Is your JUnit running with Spring's Runner or is it aware of the application context?

What it looks like to me is that the code is actually running outside of Spring from the data provided, indicating that there is no support for the Transaction Proxy you are trying to create, ie it is being ignored.

try using this in your junit (you will need spring-test)

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration("spring-cfg.xml")
public class TestClass(){

    @Autowired
    private DAOFactory daoFactory; 
```

Now you will need to configure your DAOFactory to be a Spring Bean and it shouldn't use new to create your BookingDAO, instead that should be injected via Spring into the DAOFactory for it to serve, granted with Spring you really shouldn't need this type of logic.

# python - scipy.optimize.brute() 可以优化向量函数吗？

> ID：16196144
> 
> 赞同：2
> 
> 时间：2013-04-24T15:32:21.083
> 
> 标签：python, optimization, numpy, scipy

[查看scipy.optimize.brute()](http://docs.scipy.org/doc/scipy-0.7.x/reference/generated/scipy.optimize.brute.html)的文档，我不清楚它是否支持向量函数，如果支持，如何为每个坐标指定范围。

例如，考虑一个简单的向量函数：

```
f=lambda x: np.sum(x) 
```

where`x`是一个长度为 50 的 numpy 数组。假设我想搜索一个范围，其中每个坐标`x`都可以是`[0,1,2,3,4]`. 是否支持此功能？我将如何指定范围参数来获得这个？

这个具体`f`只是为了说明的目的，我的实际功能当然要复杂得多。

# c# - 使用 C# 包装器时的 Matlab 异常

> ID：16196157
> 
> 赞同：2
> 
> 时间：2013-04-24T15:33:04.173
> 
> 标签：c#, .net, matlab, matlab-compiler

我已经制作了一个[在 matlab 中实现的聚类算法的 dll 版本](http://www.psi.toronto.edu/affinitypropagation/software/apclusterSparse.m)

此外，我下载了[输入数据的工作示例](http://www.psi.toronto.edu/affinitypropagation/webapp/)（我正在使用玩具问题数据），我正在阅读它并将其转换为 Matlab 已知的数据类型。

但是，在运行算法时出现以下错误：

> ... MWMCR::EvaluateFunction 错误 ... 连接的矩阵的维度不一致。=> apclusterSparse.m 第 178 行出错。

这是我的代码：（对不起？）

```
public static double[,] ReadSimilarities()
    {
        string line;
        string[] splittedLine;
        System.IO.StreamReader file = new System.IO.StreamReader("C:\\Code\\FCT\\Thesis\\similarities.txt");

        List<List<string>> values = new List<List<string>>();

        List<string> lineValues;

        while ((line = file.ReadLine()) != null)
        {
            splittedLine = line.Split(new string[] { " " }, StringSplitOptions.RemoveEmptyEntries);
            lineValues = new List<string>(splittedLine.Count());

            for (int i = 0; i < splittedLine.Count(); i++)
            {
                lineValues.Add(splittedLine[i]);
            }

            values.Add(lineValues);
        }

        file.Close();

        double[,] result = new double[values.Count, 3];

        for (int i = 0; i < values.Count; i++)
        {
            result[i, 0] = Convert.ToDouble(values.ElementAt(i).ElementAt(0));
            result[i, 1] = Convert.ToDouble(values.ElementAt(i).ElementAt(1));
            result[i, 2] = Convert.ToDouble(values.ElementAt(i).ElementAt(2));
        }
        return result;
    }

    public static double[] ReadPreferences()
    {
        string line;
        System.IO.StreamReader file = new System.IO.StreamReader("C:\\Code\\FCT\\Thesis\\preferences.txt");
        List<string> values = new List<string>();

        while ((line = file.ReadLine()) != null)
        {
            values.Add(line);
        }

        double[] result = new double[values.Count];
        for (int i = 0; i < values.Count; i++)
        {
            result[i] = Convert.ToDouble(values.ElementAt(i));
        }

        return result;
    }

    public ActionResult Index()
    {
        ApClusterSparse apClusterSparse = new ApClusterSparse();

        double[,] similarities = ReadSimilarities();
        double[] preferences = ReadPreferences();

        MWNumericArray matLabSimiliaritiesArray = new MWNumericArray(similarities);
        MWNumericArray matLabPreferencesArray = new MWNumericArray(preferences);

        MWArray argsOut;

        try
        {
            argsOut = apClusterSparse.apclusterSparse(matLabSimiliaritiesArray, matLabPreferencesArray);
        }
        catch (Exception e)
        {

        }

        return View();
    } 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T16:02:12.613

快速查看代码的第 178 行，您似乎将 Nx2 数组与`p`连接，然后将其与 连接`s`，其中有时 N 定义为`length(p)`，有时定义为 ，有时定义`size(s,1)`为`tmp`。

我不打算对此进行调试，但我建议这样做您应该修改您的代码，以便在第 178 行之前显示或以某种方式输出 、`N`和`p`的`s`值`tmp`。这将使您了解为什么它们不能被连接 - 我猜它们有不同的维度。

我还建议：

1.  停止使用`length`，并使用其中一个`numel`或`size`始终使用。`length`如果它的输入是 10x1 或 1x10，则给出相同的答案，并且在连接之前用于检查数组的维度不是正确的。
2.  停止将多个语句放在一行上，尤其是完整的`if`语句。如果有错误，你不知道是哪个语句引起的。
3.  改进你的变量命名。`A`当您有名为, `a`, `s`, `ss`, `as`, `r`, `R`, `rp`, `p`, , `E`, `e`, `ee`, `idx`, `ind1`, `ind1s`, `ind1e`, `ind2s`,`ind2e`和的变量时，这很难调试也就不足为奇了`tmpidx`。读完它让我头疼。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T16:49:15.690

问题在于参数 P 不能是一个数组（如网站输入中的那样），而是一个标量。

# ruby-on-rails - 用保存的数据构建一个搜查表单

> ID：16196164
> 
> 赞同：0
> 
> 时间：2013-04-24T15:33:26.130
> 
> 标签：ruby-on-rails, ransack

我将洗劫搜索数据以哈希的形式保存在数据库中：

```
{"name_cont"=>"an", "c"=>{"1366814870748"=>{"a"=>{"0"=>{"name"=>"gender"}}, "p"=>"eq", "v"=>{"0"=>{"value"=>"female"}}}, "1366814890125"=>{"a"=>{"0"=>{"name"=>"shoe_size"}}, "p"=>"gt", "v"=>{"0"=>{"value"=>"2"}}}}} 
```

然后我从中创建一个洗劫表格：

```
@search = Sedcard.search hash
<%= search_form_for @search %> 
```

如何遍历条件以基于类似于 railscasts 中呈现的表单对象创建选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T09:22:34.507

最后，我设法找到了正确的代码。它在 ransack 演示示例中：

该示例有点复杂，因为第一个字段（名称的搜索字段）显示在其他地方并且它是静态的，因此不需要显示两次。ransack 附加了最后一个空过滤器，没有预先选择任何内容，因此我也将其过滤掉。

```
 = f.condition_fields do |c|
              %div
                - render_attribute = true
                = c.attribute_fields do |a|
                  - regular_for_nondisplay = /\<option value=\"name\" selected\=\"selected\"\>Name\<\/option\>/
                  - regular_for_checking_not_empty = /selected=\"selected\"/
                  - filter_name = a.attribute_select
                  - if filter_name =~ regular_for_nondisplay || filter_name !~ regular_for_checking_not_empty
                    - render_attribute = false
                    -
                  - else
                    = filter_name
                  -

                - if render_attribute
                  = c.predicate_select 
                  = c.value_fields do |v|
                    = v.text_field :value
                  = link_to t('.remove'), '#', class: 'remove-fields btn-a btn-error' 
```

# mysql - 如何定义 cakephp mysql 索引？

> ID：16196168
> 
> 赞同：1
> 
> 时间：2013-04-24T15:33:36.640
> 
> 标签：mysql, cakephp, phpmyadmin, undefined-index

我对 CakePHP 和 MySQL 很陌生，所以我可能不知道如何正确地问这个问题。我需要在我刚刚继承的项目中添加一个付款类型单选按钮。我将付款类型单选按钮添加到添加和编辑表单中，如下所示：

```
$options = array('check' => 'Check', 'credit' => 'Credit');
$attributes = array('legend' => false);
echo $this->Form->radio('payment', $options, $attributes); 
```

单选按钮按预期显示，但`payment`不在 MySQL 数据库中，因此

```
<?php echo h($purchaseOrder['PurchaseOrder']['payment']); ?> 
```

原因

> 注意（8）：未定义索引：payment [APP\View\PurchaseOrders\view.ctp, line 81]

`payment`添加到数据库的最佳方法是什么？有没有办法在不丢失现有记录的情况下修改数据库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T15:47:45.380

这主要是一个 MySQL 问题而不是 CakePHP，如果您能够执行 MySQL 查询，我会尝试以下操作（根据您的需要进行更改）：

```
ALTER TABLE purchase_orders ADD COLUMN payment VARCHAR(6); 
```

您可能会从下载 SQLYog 或 HeidiSQL 等 MySQL 工具中受益。例如，如果您在视图上添加付款列后收到通知，您可能需要检查查询中的“字段”参数（如果适用）

# java - XML 到 JSON 库

> ID：16196171
> 
> 赞同：-1
> 
> 时间：2013-04-24T15:33:40.820
> 
> 标签：java, xml, json

有谁知道用于在 xml 和 JSON 之间来回转换的好 Java 库？我特别关心属性，即

```
<frank age="30"> 
```

当我序列化为 JSON 并返回时应该保留。我读到这是一个常见问题，并且年龄在反向转换中成为坦率节点下方的节点。

我已经尝试过`org.json`可能是最快的方法。我唯一的问题是属性没有转换回属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T19:52:38.763

我建议你注释一个`Frank`bean：

[http://www.mkyong.com/java/jaxb-hello-world-example/](http://www.mkyong.com/java/jaxb-hello-world-example/)

然后使用它来编组到该 POJO 和从该 POJO 编组。您可以通过注释控制作为属性与节点创建的内容。之后，使用[http://jackson.codehaus.org](http://jackson.codehaus.org)将 POJO 转换为 JSON。没有图书馆会知道以下之间的区别：

```
<frank age="30" /> 
```

和

```
<frank>
    <age>30</age>
</frank> 
```

当它来自

```
{
    frank: {
        age : 30
    }
} 
```

# design-patterns - 连接彗星服务器时如何避免丢失网络推送通知

> ID：16196172
> 
> 赞同：0
> 
> 时间：2013-04-24T15:33:44.443
> 
> 标签：design-patterns, web-applications, comet

我想知道如何确保客户端在加载页面或连接到彗星服务器时不会错过推送事件。

例如，考虑这个时间线：

```
...
Request web page
.
Receive response
.
render page
.
execute javascript to connect to comet server
.
connection established
+
+ (receiving comet events)
+
Request another web page
.
Receive response
.
execute javascript to connect to comet server
.
connection established
+
+ (receiving comet events)
+ 
```

显然，在以 + 标记的时间段内，客户端可以接收来自彗星服务器的事件。但是，在其他时间，没有连接，那么用户将如何接收在这些时间发生的事件？

有没有人有任何设计模式或架构建议来确保不会错过这些事件？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T23:22:07.767

## 通用解决方案

当您使用 Comet 服务器时，请将客户端标记为“已看到”它接收到的每个事件。

## 问题

如果每个客户端都需要响应每个通知，则到您的服务器的流量可能会显着增加。因此，您的服务器性能和网络可能会受到影响。

其他事情，因为您的解决方案可能会考虑事件排序。

## 解决问题

您必须采用的解决方案将取决于您的应用程序对此类事件的认识有多重要。如果客户端即使错过了其中一些事件也能够按预期工作，请考虑更轻松的解决方案。

1.  立即回答每个事件

每当您收到来自服务器的事件时，要求服务器将其标记为“已看到”。如果服务器已发送事件但未标记为已看到，请确保将它们重新发送到客户端。由于网络延迟（当您的服务器在收到第一个确认之前第二次发送相同的事件时），请注意不要多次（在客户端）处理相同的事件。

1.  轻松的方法

当您的客户收到事件时，将其存储为“收到的最后一个事件”。每当您的客户端重新连接时，请要求服务器再次发送自上次存储以来错过的事件。如果您忘记了哪个是“收到的最后一个事件”，请确保您的服务器重新传输从一个对您的客户端有意义的点开始

* * *

这些想法可能会使用 Comet 服务器上的队列来实现，但请确保正确实现它。如果这些事件的顺序很重要，您必须在您的实施中保证它。确保不要创建巨大的队列或无限多的队列。还要考虑其他方面。

希望我有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T15:53:44.617

有一个彗星呼叫从中读取的每会话消息队列。新事件进入队列并在客户端连接时等待。根据您的架构和规模，这可以是 Web 应用程序本身中的简单队列、数据库中的表或单独的消息队列。您可以在交付时删除它们。

# android - Android 项目未在 ADT 中导入。将 APK 更改为 zip、解压缩并且无法从现有源创建项目

> ID：16196179
> 
> 赞同：0
> 
> 时间：2013-04-24T15:34:19.517
> 
> 标签：android, eclipse, apk, adt, eclipse-adt

我正在考虑与另一位开发人员合作，该开发人员为我提供了一些 APK 链接，我可以在开始工作之前查看这些链接。他告诉我我可以将它们重命名为 zips 然后提取它们。那行得通。现在我想把源代码放在 ADT 中作为我可以试验的项目。

我运行了从现有代码添加新 Android 项目的所有对话框，选择根目录，Eclipse 让我完成向导（没有灰显，看起来应该可以工作，对吧？）

那么这个项目并没有出现在 Eclipse 的 Package Explorer 中。

有人遇到过这个问题或知道如何解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T10:44:13.343

apk 中没有源文件。只有编译的，所以没有办法将它导入到 eclipse 中。你需要从他那里得到eclipse项目。

我建议你们都阅读有关版本控制的信息。即混帐。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-19T20:32:25.167

我使用了 ApkTool。那行得通。它需要反编译类。

# azure - 如何在已发布的 Web 角色 VS2012 项目中从 powershell 脚本运行 Azure cmdlet

> ID：16196184
> 
> 赞同：1
> 
> 时间：2013-04-24T15:34:28.707
> 
> 标签：azure, azure-web-roles, azure-powershell

`Set-ExecutionPolicy Unrestricted`我有一个 VS 2012 MVC 4 Web 角色项目，并且在从启动 cmd运行后，我成功地从角色的 bin 目录调用了 powershell 脚本。该脚本包含一些 azure cmdlet，当我在本地运行项目时，该脚本可以完美运行。但是，当我在 Azure 上发布项目时，脚本中相同的 azure cmdlet 不会运行。例如：

```
param([string]$websiteName="itudkcloudqwerdfs", [string]$serverLogin="user", [string]$serverPass="paSS123!@#", [string]$location="North Europe")

# Create new Website
#

$website = New-AzureWebsite -Location $location -Name $websiteName

if ($website -eq $null)
{
    throw "Website creation error"
    exit
} 
```

在本地运行时成功创建 Azure 网站，但在发布并从云服务运行时抛出并退出。

当然，我搜索了一个解决方案，发现我必须将 Azure Powershell 预安装到 Web 角色才能在那里运行 Azure cmdlet。为此，我安装了 Web 平台安装程序 4.5，将其命令行工具可执行文件与 Microsoft.Web.PlatformInstaller dll 和我的 Azure publishsettings 文件复制到我的 Web 角色的 bin 文件夹中，并创建了一个 cmd，将 Azure Powershell 从 webpicmd 安装到Web 角色的 bin 目录中的一个特殊文件夹，并在 Web 角色启动时导入我的 publishsettings 文件：

```
md "%~dp0appdata"
cd "%~dp0appdata"
cd..

reg add "hku\.default\software\microsoft\windows\currentversion\explorer\user shell folders" /v "Local AppData" /t REG_EXPAND_SZ /d "%~dp0appdata" /f

"%~dp0\WebpiCmd.exe" /Install /AcceptEula /Products:WindowsAzurePowershell /log:%~dp0WindowsAzurePowershell.log

reg add "hku\.default\software\microsoft\windows\currentversion\explorer\user shell folders" /v "Local AppData" /t REG_EXPAND_SZ /d %%USERPROFILE%%\AppData\Local /f

powershell Import-AzurePublishSettingsFile
exit /b 0 
```

它仍然没有工作，所以我远程登录到实例，亲自查看可能出了什么问题。我尝试运行上面的 cmd 脚本，它需要启用 .NET Framework 3.5 功能，这对我来说看起来很奇怪，因为该实例已经默认启用了 .NET 4.5 功能（Windows Server 2012）。无论如何，我从服务器管理器启用了它，脚本成功运行，没有错误。我打开了 powershell 并测试了一些 Azure cmdlet，它们可以正常工作。但是，即使在那之后，当我再次从 Web 应用程序调用脚本时，它仍然不会运行 azure cmdlet 并退出。

我错过了什么？为什么 webpicmd 需要 .NET 3.5 功能？有替代解决方案吗？

**更新：**在 Gaurav 发表评论后，我将其添加到我的 servicedefinition.csdef 中的 WebRole 标记下，以在提升的执行上下文中运行 webrole，但 azure cmdlet 仍未在脚本中运行：

```
<Runtime executionContext="elevated" /> 
```

**更新：**这是调用脚本的 C# 代码

```
//create command
string path = HttpContext.Server.MapPath("/bin/InitializeResources.ps1");
PSCommand cmd = new PSCommand();

cmd.AddCommand(path);
cmd.AddParameter("websiteName", websiteName);
cmd.AddParameter("serverLogin", username);
cmd.AddParameter("serverPass", password);
cmd.AddParameter("location", location);

//set the command into a powershell object and invoke it
Runspace runspace = RunspaceFactory.CreateRunspace();
PowerShell ps = PowerShell.Create();
ps.Commands = cmd;

try
{
    runspace.Open();
    RunspaceInvoke runSpaceInvoker = new RunspaceInvoke(runspace);
    runSpaceInvoker.Invoke("Set-ExecutionPolicy -Scope CurrentUser -ExecutionPolicy RemoteSigned -Force");
    ps.Runspace = runspace;

    Collection<PSObject> commandResults = ps.Invoke();

    //save results
    WebsiteInfo websiteInfo = new WebsiteInfo();
    foreach (PSObject result in commandResults)
    {
        websiteInfo.Connectionstring = (string)result.Members["ConnectionString"].Value;
        websiteInfo.WebsiteURL = (string)result.Members["WebsiteUrl"].Value;
        websiteInfo.ftpUrl = (string)result.Members["SelfLink"].Value;
        websiteInfo.ftpUrl = websiteInfo.ftpUrl.Substring(8);
        int index = websiteInfo.ftpUrl.IndexOf(":");
        if (index > 0)
            websiteInfo.ftpUrl = websiteInfo.ftpUrl.Substring(0, index);
        websiteInfo.ftpUrl = websiteInfo.ftpUrl.Replace("api", "ftp");
        websiteInfo.publishUsername = (string)result.Members["Repository"].Value + "\\" + (string)result.Members["PublishUsername"].Value;
        websiteInfo.publishPassword = (string)result.Members["PublishPassword"].Value;
    }

    runspace.Dispose();
    runspace = null;
    ps.Dispose();
    ps = null;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-20T14:15:30.177

我面临着类似的问题，正如您[在此线程](https://stackoverflow.com/questions/18314977/how-to-run-azure-powershell-cmd-from-cloud-service)中看到的那样，我在事件查看器中看不到任何异常，但是在每次 shell 调用后添加这些行，我可以看到我的错误出现在 Import-Module 行中。

```
if (shell1.Streams.Error.Count > 0)
{
   for (int i = 0; i < shell1.Streams.Error.Count; i++)
   {
       ResultBox.Text += "Error: " + shell1.Streams.Error[i] + "\r\n";
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-10T16:18:47.570

在我们使用 almamouz 进行该项目时，出于安全考虑，无法通过 Azure REST API 生成资源，也无法通过 webrole 的 powershell 脚本生成资源。我们最终使用了 web 和 worker 角色，并且 powershell 脚本以 worker 角色运行。它包含所有敏感的服务器连接信息。

# linux - sed 完全匹配

> ID：16196185
> 
> 赞同：12
> 
> 时间：2013-04-24T15:34:31.430
> 
> 标签：linux, bash, sed

我目前正在`'s/string/new_string/g'`浏览一些 CSV 文件，但是在以下情况下我遇到了困难：

我想替换 的实例`'192.168.0.11'`，但它也捕获`'192.168.0.111'`.

如何确保 sed 只抓取`'192.168.0.11'`而不抓取`'192.168.0.111'`？我显然必须对许多变量重复这一点，因此很容易扩展的东西将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-24T15:37:40.330

我不确定您使用的正则表达式是什么，但如果您想要“192.168.0.11”的完全匹配，您可以使用： `s/\<192\.168\.0\.11\>//g`

`\<\>`力完全匹配。

# r - 行数不等时叠加 SpatialPointsDataFrame 和 SpatialPolygonsDataFrame

> ID：16196187
> 
> 赞同：0
> 
> 时间：2013-04-24T15:34:32.240
> 
> 标签：r, overlay, polygon, spatial, points

我想知道这在R中是否可行。

我有一个 SpatialPointsDataFrame，其中包括分配给它们的属性的点。我想用 SpatialPolygonDataFrame 覆盖这个 SpatialPointsDataFrame。下面是我正在使用的代码。只是为了澄清多边形和点数据框都在同一个投影坐标系中。

```
buptpol <- SpatialPolygonsDataFrame(bu_proj_poly, bu.pts) 
```

当我执行代码时，我收到以下错误消息：

```
Error in stopifnot(length(Sr@polygons) == nrow(data)) : 
  no slot of name "polygons" for this object of class "SpatialPointsDataFrame" 
```

问题是多边形文件的长度超过了点文件中的行。在这种情况下，有什么方法可以将点叠加到多边形文件上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T15:39:08.617

Overlaying is done using the `over` function, not using `SpatialPolygonDataFrame`. For more details, please see the documentation of `over`.

# ruby - 我应该如何使用 Datamapper 保护 Sinatra 应用程序中的批量分配？

> ID：16196193
> 
> 赞同：2
> 
> 时间：2013-04-24T15:34:43.480
> 
> 标签：ruby, sinatra, mass-assignment, ruby-datamapper, attr-accessible

我`Link`在 Sinatra 应用中有模型

```
class Link
  include DataMapper::Resource
  has n, :views

  validates_presence_of :url,
    message: "You must specify a URL."
  validates_length_of   :url,
    maximum: 4096,
    allow_blank: true,
    message: "That URL is too long."
  validates_format_of :url,
    with: %r{^(https?|ftp)://.+}i,
    allow_blank: true,
    message: "The URL must start with http://, https://, or ftp:// ."

  property :id,         Serial
  property :url,        String
  property :token,      String
  property :created_at, DateTime
end 
```

如何设置类似的东西`attr_accessible :url, :token`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T15:52:06.083

您可以使用`DataMapper::MassAssignmentSecurity`gem 中的模块`dm-rails`。

```
class Link

  include DataMapper::Resource
  include DataMapper::MassAssignmentSecurity
  attr_accessible :url, :token

  # ...

end 
```

# java - 在多个类之间共享对象

> ID：16196194
> 
> 赞同：1
> 
> 时间：2013-04-24T15:34:46.990
> 
> 标签：java, class, object

我正在实现一个二十一点游戏，我试图允许多个类（分别为 ChatGUI 和 GameGUI）使用我的“客户端”类，它实际上是服务器的入口。

我尝试使用 Client 类作为每个构造函数的参数来创建这些类，但似乎我的 Client 类无法将信息发送回其他类 - ChatGUI/GameGUI。

我已经有了一个可以处理多个客户端连接的工作服务器！（经过试验和测试）。

```
public class BlackJack{
    private Client client;
    private ChatGUI chatgui;
    private GameGUI gamegui;

    public BlackJack(){
        // Setup Client class, which will be passed to all other classes
        client = new Client(server, port, username, chatgui, gamegui);

        // Setup other classes, which will be given Client class
        chatgui = new ChatGUI(client);
        gamegui = new GameGUI(client); 

    }   
}

public class Client{
    private ChatGUI chatgui;
    private GameGUI gamegui;

    Client(String server, int port, String username, ChatGUI cg, GameGUI gamegui){
        // catch these arguments and assign them to variables     
    }

    void display(String msg){
        // Method to display incoming messages to the chat screen
        // Using ChatGUI method (*** not working? ***)
        chatgui.append(msg + "\n");
    }
}

public class ChatGUI{
    private JTextArea textarea;
    private Client client;

    public ChatGUI(Client c){
        client = c;
    }

    // ChatGUI can use client methods
    void sendMessage(String msg){
        client.sendChat(msg);
     }

    void append(String msg){
        textarea.append(msg);
}

public class GameGUI{
    private Client client;

    public GameGUI(Client c){
        client = c;
    }

    // GameGUI can use client methods
    void playGame(){
        client.playGame();
    }
} 
```

请注意，此代码是为更多的伪代码参考而编写的 - 不想粘贴数百行。

任何帮助将非常感激！非常感谢您的阅读。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T16:06:45.883

您正在将 chatGUI 的引用传递给您的客户端类，然后在这样做之后实际实例化 chatGUI。所以之前传递的引用是不正确的。您需要首先实例化 chatGUI 和 gameGUI 对象。然后创建客户端对象并正确设置引用。不要尝试在构造函数中传递引用，因为那时它们是无效的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T16:07:37.420

假设我正确理解了您的问题，我认为对您的课程结构有所不同会有所帮助...

每个 BlackJack 对象都有一个客户端，例如

```
public class BlackJack{
    private Client client;

    public BlackJack(){
        // Setup Client class, which will be passed to all other classes
        client = new Client(server, port, username);

    } 
```

然后每个客户端对象都有一个 GUI 类的实例，例如

```
public class Client{
    private ChatGUI chatgui;
    private GameGUI gamegui;

    Client(String server, int port, String username){
             chatgui = new ChatGUI(this);
             gamegui = new GameGUI(this);
    }

    //handle messages from server
    void onMessageRecieved(String msg){
            if(/* the message pertains to the game gui */ )
                    gamegui.newMessage(msg);
            else if( /* the message pertains to the chat gui */ )
                    chatgui.newMessage(msg);
    }

    //here you can add functions for the gui classes to call
    public void sendChat(String chat){

    }
} 
```

那么你的 gui 类可能看起来像......

```
public class ChatGUI{
    private JTextArea textarea;
    private Client client;

    public ChatGUI(Client c){
        client = c;
    }

    //receive message/command from server
    public void newMessage(String msg){
        //perform the desired action based on the command
    }

    public void sendChat(String msg){
        client.sendChat(msg);
    }
}

public class GameGUI{
    private Client client;

    public GameGUI(Client c){
        client = c;
    }

    //receive message/command from server
    public void newMessage(String msg){
        //perform the desired action based on the command
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T15:55:47.187

嗯，我想知道我是否理解正确，但是您想要的是：Client1 向 Client2 发送聊天消息吗？

换句话说：chat1-->Client1-->client2-->gui2

如果这是正确的，那么消息如何传输到 client2 ？

# .net - 动态 AX FTP

> ID：16196195
> 
> 赞同：2
> 
> 时间：2013-04-24T15:34:55.477
> 
> 标签：.net, ftp, axapta, x++

我在 ftp 上发送 csv 文件时遇到问题，我使用在 AxaptaPedia 上找到的以下代码：

```
object ftpo;
object ftpResponse;
System.Net.FtpWebRequest request;
System.IO.StreamReader reader;
System.IO.Stream requestStream;
System.Byte[] bytes;
System.Net.NetworkCredential credential;
System.String xmlContent;
System.Text.Encoding utf8;

System.Net.FtpWebResponse response;
;
reader = new System.IO.StreamReader(strfmt("%1%2","\\\\Server\\directory\\","Export.csv"));
utf8 = System.Text.Encoding::get_UTF8();
bytes = utf8.GetBytes( reader.ReadToEnd() );
reader.Close();

ftpo = System.Net.WebRequest::Create(strfmt("%1%2","ftp://IP_Address/directory/","Export.csv"));
request = ftpo;

credential = new System.Net.NetworkCredential("user","password");
request.set_Credentials(credential);
request.set_ContentLength(bytes.get_Length());
request.set_Method("STOR");

requestStream = request.GetRequestStream();
requestStream.Write(bytes,0,bytes.get_Length());
requestStream.Close();

ftpResponse = request.GetResponse();
response = ftpResponse;
info(response.get_StatusDescription()); 
```

没有编译错误，没有执行错误但文件没有上传到我的 FTP 上，我认为问题出在路径文件编码上，我尝试了其他解决方案但没有结果。我想批量处理 FTP 上的发送文件，它使用 wininet 类工作，但 wininet 类不能在服务器端运行，所以我必须使用 .net 框架。欢迎任何想法或解决方案

感谢帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-17T14:18:54.817

我在将文件保存到任何网络目录而不仅仅是 FTP 时遇到了这个问题。对我有用的是为服务器和文件名创建单独的变量，并使用连接而不是字符串格式（StrFmt）。由于某种原因，字符串格式只是默默地无法工作，而连接确实有效：

```
str  server = "\\\\Server\\directory\\";
str  fileName = "Export.csv";
Net.WebRequest::Create(server + fileName); 
```

最佳实践也不是对这些值中的任何一个进行硬编码。您应该创建一个参数表来存储这些值并调用该表以查找这些值并将它们分配给您的变量，或者使用对话框在运行时从用户那里获取输入。这避免了将来任何人在 FTP 服务器发生更改时都必须更改代码，也避免了文件名更改的问题。

# c++ - 定义具有相同名称和值的符号字符串常量

> ID：16196205
> 
> 赞同：0
> 
> 时间：2013-04-24T15:35:24.540
> 
> 标签：c++, c-preprocessor

我有一种情况，我有一些我希望能够以符号方式使用的字符串，即好像我声明了一个宏

```
#define kBlahProperty "kBlahProperty"
#define kFooProperty "kFooProperty" 
```

我不能使用枚举的原因有很多（有关更多上下文，请参阅[上一个问题](https://stackoverflow.com/questions/14342241/creating-debugger-friendly-enums-for-property-table)），例如在调试器中获取有用的信息、以可读格式序列化数据以及处理不同源文件中定义的属性集。

典型用法：

```
setProperty(kBlahProperty, 6);
if (otherProperty==kBlahProperty) { doStuff(); }
std::cout << "property type: " << kBlahProperty;  // outputs "kBlahProperty" rather than an enum 
```

这些属性可能有很多，为了简化定义，我希望能够像这样声明它们，只在一个地方：

```
DEFINE_PROPERTY(kBlahProperty)
DEFINE_PROPERTY(kFooProperty) 
```

但是，我找不到一种方法来定义一个本身会扩展为 #define 的宏（我已经尝试了几个带有 '#' 和 '##' 运算符的示例，但是要粘贴 '#define'是问题）。

另一种方法是将要扩展的宏定义为`char*`：

```
#define DEFINE_PROPERTY(propName) const char8* propName=#propName 
```

但这有一个问题，即它在每个编译单元中都被定义，因此链接器错误。如果我将其更改为使用，`extern`那么我无法将其定义为使用字符串本身——它必须放在 .cpp 文件中，所以现在我需要在标头中声明所有这些属性并在 cpp 中再次定义它们文件，因此您在两个地方都有一个列表。

那么有没有一种定义这些字符串的好方法，以便您可以只声明它们一次？我可以访问 boost 预处理器，但只能访问 C++-0x 的一小部分（因此[类内常量初始化器](http://www.stroustrup.com/C++11FAQ.html#member-init)已被淘汰）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T15:44:55.213

您可以将宏定义为 have 和 #ifdef，使其具有两条路径 - if 和 else。然后在标题中它只是*声明*你的propName。然后在您的 .cpp 文件中，在包含标头之前定义一个预处理器变量。该定义将使您的宏*定义*propName。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T16:07:30.247

简单（如果丑陋）的方式 - 仅在未定义另一个符号时定义宏以包含 extern，并在包含标头之前在一个编译单元中定义该符号

举例（包括为清楚起见省略的警卫）

```
#ifdef IN_CPP
#define DEFINE_PROPERTY(propName) const char8* propName=#propName;
#else
#define DEFINE_PROPERTY(propName) extern const char8* propName;
#endif 
```

在一个编译单元中：

```
#define IN_CPP 1
#include "header.h" 
```

在剩余的编译单元中：

```
#include "header.h" 
```

# javascript - Windows 8 应用商店应用程序 (Javascript) 如何以编程方式打开权限窗格？

> ID：16196207
> 
> 赞同：2
> 
> 时间：2013-04-24T15:35:29.510
> 
> 标签：javascript, windows-8, windows-store-apps

我知道我们可以通过以下方式以编程方式打开应用程序的设置窗格

```
Windows.UI.ApplicationSettings.SettingsPane.getForCurrentView().show() 
```

和应用程序使用 WinJS 库创建了设置窗格。

是否可以以编程方式直接打开系统设置窗格，如权限（或评分和审查）设置窗格？

MSDN 的[访问个人数据的设备指南](http://msdn.microsoft.com/en-us/library/windows/apps/hh768223.aspx#what_if_access_to_a_device_is_turned_off_)说（在撤销消息的其他指南中）：

> *   不要以编程方式尝试在“设置”超级按钮中启动“权限”页面

但我找不到办法做到这一点。我希望用户能够单击应用程序中直接打开权限设置窗格的按钮。

更新（2013 年 4 月 24 日）：在[Programming Windows 8 Apps with HTML, CSS, and JavaScript](http://blogs.msdn.com/b/microsoft_press/archive/2012/10/29/free-ebook-programming-windows-8-apps-with-html-css-and-javascript.aspx) book pp. 341 中找到了这个（第 8 章：状态、设置、文件和文档 -> 设置窗格和 UI -> 以编程方式调用设置弹出窗口) 来自微软出版社：

> **注意** 虽然可以以编程方式调用您自己的设置窗格，但您不能使用系统提供的命令（如权限和评价和审查）来执行此操作。如果您有需要用户更改权限的条件，例如启用地理定位，建议显示一条错误消息，指示用户这样做。

该声明与 MSDN 文档不一致。我仍然不知道哪一个是真的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T00:32:06.883

上面的声明说您可以提供自己的 SETTINGS 窗格（例如使用 .showSettings()），这并没有提到您可以为 Permissions 执行此操作 - 您不能这样做。

这些陈述彼此之间没有矛盾，一个说“不要启动权限窗格”，另一个说“您可以控制自己的设置”

权限不是您自己的应用程序设置，它们由用户的权限和操作系统控制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T06:14:20.917

我可以确认亚当的回答。应用程序无法显示权限以及评分和审核设置窗格，因为它们是由系统填充的。应用程序可以使用设置弹出控件上的 showSettings 方法显示它自己填充的设置窗格。

# bash - 将 Ruby 脚本结果回显到 Bash 脚本变量中

> ID：16196208
> 
> 赞同：0
> 
> 时间：2013-04-24T15:35:36.533
> 
> 标签：bash, wget

我编写了一个输出用户选择的 URL 的小型 Rub​​y 脚本。我想将此 URL 嵌套到我的 Bash 脚本中，以便它直接输入 wget 部分，而不是强制用户复制和粘贴链接。当前代码如下：

```
>echo "Choose file to download"  
>./myscript.rb #  
>echo "Copy and Paste URL"  
>read answer  
>wget -O /myfile.zip "$answer" 
```

对此的任何帮助将不胜感激。

编辑：

```
>"Choose file to download"
>18 obfuscated1.zip 891 Thu, 18 Apr 2013 16:13:05 GMT
>19 obfuscated2.zip 892 Fri, 19 Apr 2013 16:13:53 GMT
>20 obfuscated3.zip 893 Sat, 20 Apr 2013 16:13:16 GMT
>20
>http://s3-us.amazonaws.com/obfuscated3.zip/AWSAccessKeyId=/Expires=/Signature= 
```

出于显而易见的原因，URL 在输出中被标记并在此处缩写。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T15:41:11.103

You could do it using command substitution:

```
answer=$(./myscript.rb)
wget -O /myfile.zip "$answer" 
```

**Update:**

I haven't considered your script produces output other than the URL you are interested in.

Given that you can, at least:

1.  modify `myscript.rb` to emit the URL on the standard output and the other messages on the standard error. Then you should be able to use the solution above.

2.  run `wget` inside `myscript.rb` using the [`system`](http://ruby-doc.org/core-2.0/Kernel.html#method-i-system) Ruby method like this:

    ```
    # the url variable holds the URL chosen by the user
    system("wget -O /myfile.zip #{url}") 
    ```

# html - PowerShell Convertto-HTML 将数据添加到列

> ID：16196211
> 
> 赞同：0
> 
> 时间：2013-04-24T15:35:47.543
> 
> 标签：html, powershell, scripting, powershell-2.0

我有这个脚本

```
$a = "<style>"
$a = $a + "TABLE{border-width: 1px;border-style: solid;border-color:black;}"
$a = $a + "Table{background-color:#ffffff;border-collapse: collapse;}"
$a = $a + "TH{border-width:1px;padding:0px;border-style:solid;border-color:black;}"
$a = $a + "TR{border-width:1px;padding-left:5px;border-style:solid;border-color:black;}"
$a = $a + "TD{border-width:1px;padding-left:5px;border-style:solid;border-color:black;}"
$a = $a + "</style>"

dir -path  "\\server\loctation$"  |where {$_.mode -match "d"} | select-object  name, creationtime, lastwritetime, Owner| ConvertTo-Html -head $a | Out-File "\\server\location\drivelistings.html" 
```

它输出结果很好。

但我想在表的末尾添加一列，其中包含前缀数据。

当前页面输出：

```
 Name   Creation Time    LateWriteTime   Owner
   Test   2013/04/12       2013/04/12
   Test2  2013/04/12       2013/04/12
   Test3  2013/04/12       2013/04/12 
```

我想使用成员列手动输入所有者。此数据不会更改，文件夹结构也不会更改。

例如：

```
 Name   Creation Time    LateWriteTime   Owner
   Test   2013/04/12       2013/04/12      user1
   Test2  2013/04/12       2013/04/12      user2
   Test3  2013/04/12       2013/04/12      user3 
```

有什么办法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T15:55:43.633

如果您可以创建一个 csv 将所有者映射到文件夹名称、完整路径或独特的东西，您可以试试这个：

文件夹用户映射.csv

```
"FolderName","Owner"
"Test","user1"
"Test2","user2"
"Test3","user3" 
```

脚本

```
$a = Import-Csv folder-user-mappings.csv
#Convert to hashtable to simplify code and search faster
$mappings = @{}
$a | % { $mappings.Add($_.FolderName, $_.Owner) }

dir -path  "\\server\loctation$" | 
where {$_.mode -match "d"} |
select-object name, creationtime, lastwritetime, @{n="Owner";e={$mappings[$_.Name]}} | 
ConvertTo-Html -head $a | 
Out-File "\\server\location\drivelistings.html" 
```

# java - Java中未声明的类是公开的吗？

> ID：16196213
> 
> 赞同：5
> 
> 时间：2013-04-24T15:35:54.140
> 
> 标签：java

我开始学习 java 并在 Eclipse 中创建了我的第一个 hello world 函数。我注意到以下两个函数，都在我的 java 项目的 src 文件夹的默认包中，似乎做同样的事情：

```
class HelloWorld {
    public static void main(String[] args){
        System.out.println("Hello World!");
    }
} 
```

和

```
public class HelloWorld {
    public static void main(String[] args){
        System.out.println("Hello World!");
    }
} 
```

两者都成功打印“Hello World！” 到控制台。

我已经阅读了一些关于不同类类型的文章，但不确定我将使用第一个函数声明什么类型的类。这两个函数有什么区别？java是否在第一种情况下公开了我的hello world类？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-24T15:37:49.923

`Class`那不是按原样声明自己`public`，`package protected`这意味着`class`它只能在该包中访问。

[stackoverflow](https://stackoverflow.com/questions/215497/in-java-whats-the-difference-between-public-default-protected-and-private)上访问修饰符的非常有用的总结。更多在[甲骨文](http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html)

**例子：**

因此，假设您具有以下包结构：

```
com
  stackoverflow
    pkg1
      public Class1
      Class2
    pkg2
      OtherClass 
```

`Class2`只能被 使用`Class1`，不能被`OtherClass`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T15:38:41.820

这都是关于课堂可见性的！

可以使用修饰符 public 声明一个类，在这种情况下，该类对任何地方的所有类都是可见的。如果一个类没有修饰符（默认值，也称为包私有），则它只在自己的包中可见

[http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html](http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T15:39:43.080

这花了我大约 2 秒钟在 Google 上找到：

[http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html](http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html)

在回答您的问题时，默认修饰符是`package protected`，这意味着它只能在包内访问，但下次请在发布问题之前做一些研究，因为您需要更多时间来编写必须搜索的问题

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T15:39:35.010

它是受保护的类，你不能在外面访问那个类`package`。

如果您未指定任何内容，则**默认情况下受保护**

# php - 如何为 php 应用程序编写 wsgi 包装器？

> ID：16196214
> 
> 赞同：0
> 
> 时间：2013-04-24T15:35:54.980
> 
> 标签：php, python, apache2, wsgi, werkzeug

是否可以编写一个返回 php 应用程序输出的 wsgi ( [werkzeug)](http://werkzeug.pocoo.org/docs/)应用程序？

详细地说，我有以下问题：我们有几个旧的遗留 php 应用程序，需要在它前面进行某种身份验证，由 wsgi 或任何其他 python 应用程序处理。

在虚拟代码中，它会像这样工作：

```
for every request:
    valid = check cookie or get-paramter
    if valid:
        return php application
    else:
        return "<html>you are not allowed</html>" 
```

我知道 apache-mod_wsgi 有[访问控制机制](https://code.google.com/p/modwsgi/wiki/AccessControlMechanisms)，但唯一允许返回 true 或 false。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T16:10:39.643

googling for "python wsgi php", the first result I get is [http://pythonpaste.org/wphp/](http://pythonpaste.org/wphp/) :

> This module allows you to run PHP processes inside of Python, using a WSGI gateway.

but as you mention it never went further than alpha.

A braindead solution would be to serve the php application on a local IP and have your wsgi app just proxy to the php one via urllib, but you'll possibly have to postprocess the reponse body to fix urls etc.

# javascript - 在响应式设计中禁用 Javascript 扩展器

> ID：16196217
> 
> 赞同：0
> 
> 时间：2013-04-24T15:35:56.543
> 
> 标签：javascript, function, expander

我对 Javascript 非常陌生，并且在设计移动网站时使用了扩展器。脚本如下所示：

```
$(function () {

    $('.expander .details').hide();
    $('.expander .trigger').

    click(function (e) {
        e.preventDefault();
        $(this).next().slideToggle().parent().toggleClass("open");
    });

    $('button#expandAll').click(function (e) {
        $('.expander .details').slideDown().parent().addClass("open");
    });

    $('button#collapseAll').click(function (e) {
        $('.expander .details').slideUp().parent().removeClass("open");
    });
}); 
```

我想要做的是在站点宽度达到 600 像素以上时禁用扩展器。我已经尝试过调整窗口大小，但我无法找出正确的语法。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T18:07:48.287

使用[宽度（）](http://api.jquery.com/width/)。

```
if($(document).width() > 600) {
    $('.expander .trigger').click(function (e) {
        e.preventDefault();
        $(this).next().slideToggle().parent().toggleClass("open");
    });
} else {
    $('.expander .trigger').hide();
} 
```

# mfc - 在控件周围绘制一个矩形，C++ MFC

> ID：16196219
> 
> 赞同：0
> 
> 时间：2013-04-24T15:35:58.900
> 
> 标签：mfc, dialog, controls

我有代码

```
 HWND hWndTmp = pDX->m_pDlgWnd->GetSafeHwnd();
    hWndTmp = GetDlgItem(hWndTmp, pDX->m_idLastControl);
    CWnd *wnd;
    wnd = wnd->FromHandle(hWndTmp);
    RECT wndRect;
    wnd->GetWindowRect(&wndRect); 
```

这给了我 pDX 中描述的控件周围的矩形。

我想做的是在这个控件周围画一个矩形几次来吸引用户的眼睛。我已经搜索了一段时间如何做到这一点，但似乎没有什么对我真正有用。

我试过这个[http://msdn.microsoft.com/en-us/library/sx8yykw8.aspx?cs-save-lang=1&cs-lang=cpp#code-snippet-1](http://msdn.microsoft.com/en-us/library/sx8yykw8.aspx?cs-save-lang=1&cs-lang=cpp#code-snippet-1)

但它告诉我“系统”找不到或不是真实的。

有没有一种简单的方法给定坐标来绘制一个矩形？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T16:01:27.197

最好获取控件的屏幕矩形并将其转换为对话框的客户端，并覆盖`OnPaint`对话框，并在那里绘制矩形（稍微膨胀）。这意味着您肯定会看到它，并且不会干扰控件本身的绘制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T16:29:06.730

如果可以，请使用 Moo-Juice 的解决方案。恕我直言，它可以更好地分离关注点。但如果你需要快速修复，试试这个

```
CClientDC drawingContext( pDX );
RECT wndRect;
wnd->GetWindowRect(&wndRect);
//Shrink wndRect before if needed
CPoint rectPoints[5];
rectPoints[0] = CPoint( wndRect.left, wndRect.top );
rectPoints[1] = CPoint( wndRect.right, wndRect.top );
rectPoints[2] = CPoint( wndRect.right, wndRect.bottom );
rectPoints[3] = CPoint( wndRect.left, wndRect.bottom );
rectPoints[4] = rectPoints[0];
CPen* oldPen = drawingContext.SelectStockObject(RED_PEN);
drawingContext.Polyline(rectPoints, 5);
drawingContext.SelectObject( oldPen ); 
```

如果看不到矩形，请尝试将其缩小一点，使其不与对话框的边框重叠。

# visual-studio - 在 Visual Studio 功能区项目中使用 vba 代码

> ID：16196221
> 
> 赞同：1
> 
> 时间：2013-04-24T15:36:12.823
> 
> 标签：visual-studio, vba, ribbon, powerpoint

我已经在 vba 中开发了一些代码来检测不同类型的形状、创建和压缩文件等等​​......问题是现在我必须在 Visual Studio 2012 中创建一个功能区项目并制作一个按钮我在 vba 中所做的事情。我创建了功能区，向其添加了一个按钮并将我必须的代码添加到该按钮，但它有很多错误，例如在我拥有 ActivePresentation 的所有行中。有什么方法可以在 VS 中使用我在 VBA 中使用的不同对象？否则有人知道我可以用什么代替吗？

我的代码太长了......这里有一小部分可以让我了解我在做什么：

```
 Dim sNum As Integer
Dim stri As String
Dim i, j As Integer
Dim right As Boolean
Dim value As MsoShapeType
Dim it As String
right = True
k = 0
j = 0
it = "Cannot convert the file due to the following problems:" & vbNewLine & vbNewLine

'ActivePresentation.Slides(1).Shapes(1).
For Each sld In ActivePresentation.Slides

    For i = 1 To sld.Shapes.count

            'Type 1
            If sld.Shapes(i).Type = msoAutoShape Then
                it = it & "AutoShape" & vbNewLine

                right = False
            End If

            'Type 2
            If sld.Shapes(i).Type = msoCallout Then
                it = it & "Callout." & vbNewLine

                right = False
            End If

            'Type 3
            If sld.Shapes(i).Type = msoChart Then
                it = it + "Chart." & vbNewLine

                right = False
            End If

            'Type 4
            If sld.Shapes(i).Type = msoComment Then
                'it = it + "a Comment. Type : " & .Type
            End If

            'Type 5
            If sld.Shapes(i).Type = msoFreeform Then
                it = it + "Freeform." & vbNewLine

                right = False
            End If

            'Type 6
            If sld.Shapes(i).Type = msoGroup Then
                it = it + "Group." & vbNewLine

            ' If it's a group them iterate thru
            ' the items and list them

                it = it & vbCrLf & "Comprised of..."
                'For Ctr = 1 To .GroupItems.Count
                '    it = it & vbCrLf & _
                 '       .GroupItems(Ctr).Name & _
                '        ". Type:" & .GroupItems(Ctr).Type & vbNewLine
                'Next Ctr

                right = False
            End If

            'Type 7
            If sld.Shapes(i).Type = msoEmbeddedOLEObject Then
                it = it + "Embedded OLE Object" & vbNewLine

                right = False
            End If

            'Type 8
            If sld.Shapes(i).Type = msoFormControl Then
                it = it + "Form Control" & vbNewLine

                right = False
            End If

            'Type 9
            If sld.Shapes(i).Type = msoLine Then
                'it = it + "a Line. Type : " & .Type
            End If

            'Type 10
            If sld.Shapes(i).Type = msoLinkedOLEObject Then
                'it = it + "a Linked OLE Object. Type : " & .Type
                'With .LinkFormat
                '    it = it & vbCrLf & "My Source: " & _
                '        .SourceFullName
                'End With
            End If

            'Type 11
            If sld.Shapes(i).Type = msoLinkedPicture Then
                it = it + "Linked Picture" & vbNewLine
                'With .LinkFormat
                '    it = it + it & vbCrLf & "My Source: " & _
                '        .SourceFullName
                'End With

                right = False
            End If

            'Type 12
            If sld.Shapes(i).Type = msoOLEControlObject Then
                it = it & "OLE Control Object" & vbNewLine

                'right = False
            End If

            'Type 13
            If sld.Shapes(i).Type = msoPicture Then
                it = it & "Embedded picture" & vbNewLine

                right = False
            End If

            'Type 14
            If sld.Shapes(i).Type = msoPlaceholder Then
                'it = it & "text placeholder (title or regular text--" & _
                 '    "not a standard textbox) object." & _
                 '    "Type : " & .Type

                  '   right = False
            End If

            'Type 15
            If sld.Shapes(i).Type = msoTextEffect Then
                'it = it + "WordArt (Text Effect). Type : " & .Type
            End If

            'Type 16
            If sld.Shapes(i).Type = msoMedia Then
                it = it & "Media object .. sound, etc" & vbNewLine
                'With .LinkFormat
                  '  it = it & vbCrLf & " My Source: " & _
                  '  .SourceFullName
                'End With

                right = False
            End If

            'Type 17
            If sld.Shapes(i).Type = msoTextBox Then
                'it = "a Text Box."
            End If

            'Type 18 = msoScriptAnchor, not defined in PPT pre-2000 so we use the numeric value
            'Case msoScriptAnchor
            If sld.Shapes(i).Type = 18 Then
                it = it & "ScriptAnchor" & vbNewLine

                right = False
            End If

            'Type 19 = msoTable, not defined in PPT pre-2000 so we use the numeric value
            'Case msoTable
            If sld.Shapes(i).Type = 19 Then
                'it = " a Table. Type : " & .Type
            End If

            'Type 19 = msoCanvas, not defined in PPT pre-2000 so we use the numeric value
            'Case msoCanvas
            If sld.Shapes(i).Type = 20 Then
                it = it + "Canvas" & vbNewLine

                right = False
            End If

            'Type 21 = msoDiagram, not defined in PPT pre-2000 so we use the numeric value
            'Case msoDiagram
            If sld.Shapes(i).Type = 21 Then
                it = it + "Diagram" & vbNewLine

                right = False
            End If

            'Type 22 = msoInk, not defined in PPT pre-2000 so we use the numeric value
            'Case msoInk
            If sld.Shapes(i).Type = 22 Then
                it = it + "Ink shape" & vbNewLine

                right = False
            End If

            'Type 23 = msoInkComment, not defined in PPT pre-2000 so we use the numeric value
            'Case msoInkComment
            If sld.Shapes(i).Type = 23 Then
                it = it + "InkComment" & vbNewLine

                right = False
            End If

            'Type -2
            If sld.Shapes(i).Type = msoShapeTypeMixed Then
                it = "Mixed object (whatever that might be)" & nvNewLine

                right = False
            End If

    Next i
    Next 
```

# sql - 从一个表中删除，其中列不在另一个表中

> ID：16196226
> 
> 赞同：1
> 
> 时间：2013-04-24T15:36:39.020
> 
> 标签：sql

我正在尝试从另一个表中不存在的表中删除列表。我可以选择列表：

```
SELECT count(mlsnum) as oldRecords
FROM coordinates
WHERE mlsnum NOT IN
(SELECT mlsnum 
 FROM RETS_Listings_full) 
```

但是当我尝试删除列表时，我无法

```
delete FROM coordinates t1
LEFT JOIN RETS_Listings_full t2 
ON t2.MLSNUM = t1.MLSNUM
WHERE t2.mlsnum IS NULL 
```

错误显示 - Msg 102, Level 15, State 1, Line 1 “t1”附近的语法不正确。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T15:38:59.493

> ...where they do not exist...

You are quite near to the solution: use `NOT EXISTS`:

```
DELETE FROM coordinates t1
WHERE NOT EXISTS
(
    SELECT 1 FROM RETS_Listings_full t2 
    WHERE t1.mlsnum = t2.mlsnum 
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T15:38:04.763

您可以通过这种方式检索`mlsnum`并删除列表

```
DELETE FROM coordinates
WHERE mlsnum IN (
  SELECT mlsnum
  FROM coordinates
  WHERE mlsnum NOT IN (
   SELECT mlsnum
   FROM RETS_Listings_full)
  ) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T15:38:45.667

```
delete from mytable where somecommonid not in(select id from myothertable) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T16:24:01.490

第二个查询的正确语法

```
DELETE t1
FROM coordinates t1 LEFT JOIN RETS_Listings_full t2 ON t2.MLSNUM = t1.MLSNUM
WHERE t2.mlsnum IS NULL 
```

# excel - Liferay：将动态数据列表显示表导出到 Excel

> ID：16196228
> 
> 赞同：1
> 
> 时间：2013-04-24T15:36:46.177
> 
> 标签：excel, export, liferay, dynamic-data, datalist

我在 Liferay 中使用动态数据列表显示，我正在尝试将所有数据导出到 XLS 文件。有没有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T09:06:16.937

还没有，不幸的是。

我认为使用 Apache POI 在 Ext 插件中实现一个类是可能的并且不太难`DDLXLSExporter`（这对 Liferay 将是一个很大的贡献），但此时最简单的方法是将 DDL 导出为 CSV 然后导入它在 Excel 中。

# eclipse - m2eclipse 和 gmaven 插件

> ID：16196231
> 
> 赞同：3
> 
> 时间：2013-04-24T15:36:48.093
> 
> 标签：eclipse, m2eclipse, gmaven-plugin

我有一个包含几个 groovy 类的项目，m2e 没有编译这些 groovy 类。我正在使用带有 m2eclipse 1.3.1 的 eclipse STS（弹簧工具套装）。这是我的 pom.xml 中的 groovy 插件配置

```
 <plugin>
                <groupId>org.codehaus.gmaven</groupId>
                <artifactId>gmaven-plugin</artifactId>
                <version>1.3</version>
                <executions>
                    <execution>
                        <goals>
                            <goal>generateStubs</goal>
                            <goal>compile</goal>
                            <goal>generateTestStubs</goal>
                            <goal>testCompile</goal>
                        </goals>
                        <configuration>
                            <providerSelection>1.7</providerSelection>
                        </configuration>
                    </execution>
                </executions>
                <dependencies>
                    <dependency>
                        <groupId>org.codehaus.groovy</groupId>
                        <artifactId>groovy-all</artifactId>
                        <version>1.8.6</version>
                    </dependency>
                </dependencies>
            </plugin> 
```

我从 gmaven 找到了这个 wiki 页面：http: [//docs.codehaus.org/display/GROOVY/Groovy-Eclipse+compiler+plugin+for+Maven](http://docs.codehaus.org/display/GROOVY/Groovy-Eclipse+compiler+plugin+for+Maven)。这可能是一个解决方案，但我不想更改我的 pom.xml。我的问题还有其他解决方案吗？除了开始使用另一个 IDE（我尝试了 IntelliJ 并且与 groovy 编译器插件一起工作）

# asp.net-mvc - ScriptBundle("~/Scripts/vendor")

> ID：16196232
> 
> 赞同：4
> 
> 时间：2013-04-24T15:36:48.263
> 
> 标签：asp.net-mvc, resourcebundle

我编写了一个新应用程序，它将使用现有的主题，设计师将对其进行更改。

所以我决定，而不是将脚本放在 Scripts 中，而将其他所有内容放在 Content（Css、图像）中，只将主题保留在 Theme 文件夹中（带有子目录 - js、css、img）

所以我尝试将脚本捆绑更改为指向我在 Theme/js 中的脚本而不是 Scripts

我把它改成

```
bundles.Add(
          new ScriptBundle("~/Scripts/vendor")
            .Include("~/Theme/js/jquery-{version}.js")
            .Include("~/Theme/js/knockout-{version}.debug.js")
            .Include("~/Theme/js/sammy-{version}.js")
            .Include("~/Theme/js/toastr.js")
            .Include("~/Theme/js/Q.js")
            .Include("~/Theme/js/breeze.debug.js")
            .Include("~/Theme/js/bootstrap.js")
            .Include("~/Theme/js/moment.js")
          ); 
```

我不明白的是线

```
new ScriptBundle("~/Scripts/vendor") 
```

如果我将其保留为上述内容（即使没有 Scripts/vendor 文件夹，代码也可以正常工作，但是我将其更改为

```
new ScriptBundle("~/Theme/js/vendor") 
```

我在萤火虫中遇到网络错误：

```
"NetworkError: 404 Not Found - http://localhost:51154/scripts/vendor" 
```

其余脚本未加载。

那条线是做什么的？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T15:40:46.617

The `bundles.Add(ScriptBundle)` method adds a script bundle to the bundles table, to which you can refer by the string provided to the `ScriptBundle(string)` constructor.

So a bundle created with `new ScriptBundle("~/Foo")` and added to `bundles`, can later be rendered using `@Scripts.Render("~/Foo")`.

What you probably forgot is to change `@Scripts.Render("~/Scripts/vendor")` in your _layout.cshtml to `@Scripts.Render("~/Theme/js/vendor")`, and that will be the error you saw.

The parameter you pass to the constructor is merely [documented](http://msdn.microsoft.com/en-us/library/jj646517.aspx) as *"a virtual path for the bundle"*, so you'll have to figure out what that means and what you can and cannot put there.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T15:46:35.707

我有一个类似的问题，我通过确保我在 ScriptBundle(xx) 中使用的别名和我的实际文件系统之间没有重叠来修复它（在你的情况下 Theme/js 是包和你包含的脚本之间的相同路径。

ScriptBundle 类将所有包含的 js 文件打包成一个压缩包。这个单一的捆绑包被下载并且比几个独立的 GET 调用更有效。请注意，如果您正在调试解决方案并在 VS 中的调试器下运行站点，则不会提供捆绑包来帮助调试，而是将离散的 js 文件发送到客户端。捆绑仅在 时提供`<system.web\><compilation debug="false" ...>`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T15:48:48.597

您正在创建一个`ScriptBundle`标识为字符串值“~/Scripts/vendor”并且可以使用此捆绑标识符呈现的。

当 you 时`Include(...)`，此值表示您希望包含在该捆绑包中的资源的相对路径。

```
bundles.Add(
          new ScriptBundle("~/Scripts/vendor")
            .Include("~/Theme/js/jquery-{version}.js")
            .Include("~/Theme/js/knockout-{version}.debug.js")
            .Include("~/Theme/js/sammy-{version}.js")
            .Include("~/Theme/js/toastr.js")
            .Include("~/Theme/js/Q.js")
            .Include("~/Theme/js/breeze.debug.js")
            .Include("~/Theme/js/bootstrap.js")
            .Include("~/Theme/js/moment.js")
          ); 
```

# haskell - 如何在 Haskell 中定义后缀运算符？

> ID：16196237
> 
> 赞同：9
> 
> 时间：2013-04-24T15:36:52.710
> 
> 标签：haskell, operators

当使用度数的角度时，我想定义度数符号 ( `°`) 用作后缀运算符。目前，我使用这条线（在 GHCi 中）：

```
let o = pi/180 
```

并像这样使用它：

```
tan(11*o) 
```

但我只想去：

```
tan 11° 
```

这更清楚。度数运算符的优先级应高于 '<code>tan' 和其他函数。

我得到的最接近的是：

```
let (°) x _ = x*pi/180 
```

像这样使用：

```
tan(11°0) 
```

但默认优先级意味着仍然需要括号，并且使用虚拟数字，这种替代方法比我目前使用的更糟糕。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-24T15:45:16.053

你不能，至少在报告中定义的 Haskell 中是这样。但是，[有一个允许后缀运算符的 GHC 扩展](https://downloads.haskell.org/ghc/latest/docs/html/users_guide/glasgow_exts.html#postfix-operators)。

不幸的是，这并不能满足您的所有需求。特别是，它仍然需要括号，一元否定运算符经常这样做。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-24T15:44:53.013

查看[fixity declarations](http://www.haskell.org/onlinereport/decls.html#fixity)，它允许您更改中缀运算符的优先级。注意不要将优先级设置得太高，否则其他运算符的行为将无法达到预期。

例如：

```
infixl 7 °
(°) x _ = x*pi/180 
```

**编辑：**啊，@Daniel Fischer 是对的 - 这不适用于您当前的需求，因为函数应用程序具有最高优先级

# html - CSS导航菜单未按预期显示

> ID：16196238
> 
> 赞同：0
> 
> 时间：2013-04-24T15:36:56.077
> 
> 标签：html, css

此菜单显示我希望它在 Dreamweaver cs6 上的实时视图中如何显示。

当我在任何浏览器中查看它时，它没有应用 css 的一部分，我不明白为什么？

这是html：

```
<div id="header" class="clear">

     <ul id="nav">
            <li<a href="#">REHABS</li></a>
            <li<a href="#">BUSES</li></a>
            <li<a href="#">TESTIMONIES</li></a>
            <li<a href="#"><img src="images/logo.png"/></li></a>
            <li<a href="#">SCHOOLS</li></a>
            <li<a href="#">EVENTS</li></a>
            <li<a href="#">FUNDING</li></a>
     </ul> 
```

和CSS：

```
#header {
height: 100px; padding: 20px 0 0 0; width: 960px; margin: 0 auto; 
```

}

```
#header ul#nav {
list-style: none; margin: 30px auto; 
```

}

```
#header ul#nav li {
    float: left; padding: 0 0 0 20px; margin: 0 15px 0 0;   
}

#header ul#nav a img {position:relative; bottom:35px; margin: 0 0 80px 0;}

    #header ul#nav li:first child { background:none; }

        #header ul#nav li a {
            font-size: 21px; color: #e9e9e9; font-family:"Trebuchet MS", Arial, Helvetica, sans-serif; text-decoration: none; font-weight: bold;
        }

            #header ul#nav li a:hover, #header ul#nav1 li a.active {
                color: #4eb1ba;
            } 
```

任何帮助将不胜感激 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T15:37:53.160

你没有关闭你的开口`<li>`并且你的嵌套是无效的（你在关闭`</a>` *后*关闭`</li>`了它应该是相反的方式 - 尝试更改为：

```
<div id="header" class="clear">

 <ul id="nav">
        <li><a href="#">REHABS</a></li> <!-- You had <li instead -->
        <li><a href="#">BUSES</a></li>
        <li><a href="#">TESTIMONIES</a></li>
        <li><a href="#"><img src="images/logo.png"/></a></li>
        <li><a href="#">SCHOOLS</a></li>
        <li><a href="#">EVENTS</a></li>
        <li><a href="#">FUNDING</a></li>
 </ul> 
```

你的 CSS 看起来不错，所以我假设这是你的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T15:46:47.593

此外，您应该在 li 标签内放置锚点

```
<li><a href="#">TESTIMONIES</a></li> 
```

# scala - 读取大文件并逐段处理

> ID：16196241
> 
> 赞同：1
> 
> 时间：2013-04-24T15:37:24.717
> 
> 标签：scala

假设我有一个大文本文件，其格式如下：

> 部分开始 ... ... ... 部分结束 部分开始 ... ... ... 部分结束 ....

我想解析文件并逐段使用它，但是我不想将整个内容保存在内存中，我想读取一个部分并对该部分进行一些操作，例如将其插入数据库，然后丢弃它并继续阅读下一节，我应该如何以一种功能性的方式做到这一点？我只能通过操纵可变变量来提出一些实现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T15:45:47.903

您总是可以通过编写（尾）递归函数来解决这些问题*

```
def parseLines(
  in: Iterator[String],
  thisSection: List[String] = Nil,
  results: List[Foo] = Nil
): List[Foo] = {
  if (!in.hasNext) results.reverse
  else in.next match {
    case "SECTION END" =>
      val section = thisSection.reverse.drop(1)
      // Do something with data
      val foo = // whatever you need to store from this section
      parseLines(in, Nil, foo :: results)
    case s =>
      parseLines(in, s :: thisSection, results)
  }
} 
```

但这样做并不总是比使用可变变量更好。关键是保持你的可变性得到很好的保护，这样变化的状态就不会泄露出来并使程序其余部分的逻辑复杂化。在这样的方法中添加累加器变量而不是使其递归也是完全可以的；选择使逻辑更清晰的那个。

*^(最好是尾递归，否则堆栈会溢出。使用`@tailrec`注释来确定。)

# c# - 打开文件时如何选择正确的对齐按钮？

> ID：16196246
> 
> 赞同：0
> 
> 时间：2013-04-24T15:37:39.387
> 
> 标签：c#, winforms, visual-studio, richtextbox, text-align

我有一个richTextBox，用户可以将文本文件（rtf 或txt）加载到其中。我有用于对齐richTextBox 中的文本的按钮。问题是当用户加载新文档时，如果文本与中心对齐，则仍然选择左对齐（或最后单击哪个对齐按钮）。如何使正确的框自动突出显示（因此，如果第一行文本与中心对齐，则选择中心按钮，如果第二行文本居中向右然后单击，则右键是突出显示而其他被取消选择？

当前代码：

左对齐

```
 private void Left()
    {
        richTextBoxPrintCtrl1.GetLineFromCharIndex(1);
        richTextBoxPrintCtrl1.SelectionAlignment = HorizontalAlignment.Left;
        if (left.Checked == true)
        {
            right.Checked = false;
            center.Checked = false;
        } 
```

中心对齐

```
private void Center()
    {
        richTextBoxPrintCtrl1.GetLineFromCharIndex(1);
        richTextBoxPrintCtrl1.SelectionAlignment = HorizontalAlignment.Left;
        if (left.Checked == true)
        {
            right.Checked = false;
            center.Checked = false;
        } 
```

右对齐

```
private void Right()
    {
        richTextBoxPrintCtrl1.GetLineFromCharIndex(1);
        richTextBoxPrintCtrl1.SelectionAlignment = HorizontalAlignment.Right;
        if (left.Checked == true)
        {
            right.Checked = false;
            center.Checked = false;
        } 
```

这需要不断更新，以便当用户单击一条线时，它会获取对齐状态并检查相应的按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-12T06:28:57.537

我创建了一种记事本，可以选择执行粗体、斜体格式等。当用户单击具有任何这种格式的单词时，我的按钮会突出显示。也许你可以在你的项目中使用它。

首先我在richtextbox (selectionchanged) 上创建一个事件。

在 det 之后，我插入了以下代码：

```
 if (Document.SelectionFont != null)
        {

            tb_Bold.Checked = Document.SelectionFont.Bold;
            tb_Italic.Checked = Document.SelectionFont.Italic;
            tb_UnderLine.Checked = Document.SelectionFont.Underline;
            tb_FontSize.Text = Document.SelectionFont.SizeInPoints.ToString();
            tb_Font.Text = Document.SelectionFont.FontFamily.Name;
            if (Document.SelectionAlignment.ToString() == "Right")
            {
                Center.Checked = false;
                Right.Checked = true;
                Left.Checked = false;
            }
            else if (Document.SelectionAlignment.ToString() == "Center")
            {
                Center.Checked = true;
                Right.Checked = false;
                Left.Checked = false;
            }
            else
            {
                Center.Checked = false;
                Right.Checked = false;
                Left.Checked = true;

            }

        } 
```

在每个按钮下我都有这个代码：

```
Document.SelectionAlignment = HorizontalAlignment.Center;
        Center.Checked = true;
        Right.Checked = false;
        Left.Checked = false; 
```

当然更改按钮的对齐方式和检查状态。

# sql - SQL：插入表——不允许列名

> ID：16196249
> 
> 赞同：0
> 
> 时间：2013-04-24T15:37:42.330
> 
> 标签：sql, sybase

好的，也许是一个真正初学者的问题，我有下表

```
table name: mytable, it has 2 columns: 'ID' and 'Value'. 
```

这就是我想做的。我想通过'mytable'，找出'Value = x'的条目，对于这些条目，我想添加另一个ID等于相同ID且values = y的条目。

我试过：

```
insert into mytable values (mytable.ID, 'y') where mytable.ID='x' 
```

但我得到一个错误：**这里只允许使用常量、常量表达式或变量。列名非法**

我正在使用 Sybase。这样做的正确语法是什么？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T15:40:09.360

如果您想从表中选择然后插入，那么您将需要使用`INSERT INTO..SELECT...FROM`：

```
insert into mytable 
select a.ID, 'y'
from mytable a
where a.value='x'; 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/21f81/1)。

我假设你的意思是 where 子句来检查 where`value='x'`不是`id`.

# matlab - MATLAB重塑矩阵将索引转换为行索引

> ID：16196250
> 
> 赞同：1
> 
> 时间：2013-04-24T15:37:43.597
> 
> 标签：matlab, matrix, reshape

是否可以重塑矩阵，使得

```
x1 = 
    1   5
    3   4
    4   3
    7   1 
```

变成

```
x2 =
    5
    NaN
    4
    3
    NaN
    NaN
    1 
```

反之亦然，其中第一列`x1`是对应于行# in 的索引`x2`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T15:39:40.160

Create an array with NaNs and fill it with values:

```
x2          = NaN(max(x1(:,1)),1);
x2(x1(:,1)) = x1(:,2); 
```

Now, if zero padding is acceptable, then you can simply use the second line directly without first creating `out`.

**Alternatively**, for your specific example (no overlapping indices) the same result is achieved with:

```
accumarray(x1(:,1),x1(:,2),[],[],NaN) 
```

**Going the other way**

```
idx = ~isnan(x2);
x1  = [find(idx) x2(idx)]; 
```

# oop - 构建对象 - 静态构建器方法与构建器类与扩展方法

> ID：16196254
> 
> 赞同：7
> 
> 时间：2013-04-24T15:37:54.503
> 
> 标签：oop, design-patterns

我很想知道是否有人对使用来自另一个对象的数据构建自定义对象有任何建议或替代模式。

我们目前正在探索三种方法。

**1) 静态构建方法**

```
public class MyObject
{
    public int Id { get; set; }
    public string Name { get; set; }
    public static MyObject Build(DataRow data)
    {
        MyObject newObject = new MyObject();
        newObject.Id = Convert.ToInt32(data["ID"]);
        newObject.Name = Convert.ToString(data["NAME"]);
        return newOjbect;
    }
} 
```

**2) 生成器类**

```
public class MyObject
{
    public int Id { get; set; }
    public string Name { get; set; }
}

public class MyObjectBuilder
{
    public static MyObject Build(DataRow data)
    {
        MyObject newObject = new MyObject();
        newObject.Id = Convert.ToInt32(data["ID"]);
        newObject.Name = Convert.ToString(data["NAME"]);
        return newOjbect;
    }
} 
```

**3) 扩展方法**

```
public class MyObject
{
    public int Id { get; set; }
    public string Name { get; set; }
}

public static class MyObjectExtensions
{
    public static void Build(this MyObject obj, DataRow data)
    {
        obj.Id = Convert.ToInt32(data["ID"]);
        obj.Name = Convert.ToString(data["NAME"]);
    }
} 
```

一个主要考虑因素是，无论我们采用哪种方法，都需要添加对类的`using`引用`System.Data`。在这一点上，我们犹豫是否将这个依赖直接添加到我们的`MyObject`类中。

任何人都可以为这些方法中的任何一种提供优点或缺点，或者提供可以更好地实现可扩展性和可测试性的替代方案吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T16:41:51.443

第一种方法的缺点是您将对象定义与构建器逻辑混为一谈。考虑到您选择的整体架构，您可能更愿意将模型对象保留为 POCO，因此没有在其中定义复制逻辑。

我也不会使用扩展方法，因为在我看来，当您在所有项目中需要特定功能时，它们与从框架中扩展功能（通常是字符串或 IEnumerable 类）更相关。

所以第二个解决方案很有趣，因为它允许您将对象定义与构建逻辑分开。但是，您可能会考虑要应用此功能的对象数量。如果你有很多，维护起来可能会变得一团糟。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T12:47:12.633

您可以使用构造函数

```
public class MyObject
{
    public int Id { get; private set; }
    public string Name { get; private set; }

    public MyObject(int Id,string Name)
    {
        this.Id = Id;
        this.Name = Name;
    }

    public MyObject(DataRow data)
    {
        Id = Convert.ToInt32(data["ID"]);
        Name = Convert.ToString(data["NAME"]);
    }
} 
```

如果`Id`类型是`Guid`可以有默认构造函数。

```
MyObject myObject = new MyObject(data) 
```

看起来更具可读性

```
MyObject myObject = MyObject.Build(data) 
```

我认为扩展方法不适合，因为对象的创建与状态有关，但与行为无关，而扩展方法与对象的行为有关。

# apache-flex - Flex Mobile IconItemRenderer 没有被垃圾回收

> ID：16196256
> 
> 赞同：0
> 
> 时间：2013-04-24T15:38:03.377
> 
> 标签：apache-flex, memory, mobile, memory-leaks, itemrenderer

我有一个 ItemRenderers 扩展 IconItemRenderer 的列表...当我来到一个页面时处理该列表并在我离开时将其删除...

在开始的分析器中，我有 1 个列表和 12 个 ItemRenderes... 过了一会儿，仍然有 1 个列表和我访问页面的数量 * 12 个 ItemRenderes（4 个访问，48 个 ItemRenderers）

知道如何让他们收集垃圾吗？在探查器中，我看不到与我的代码（ObjectReferences）相关的任何内容......

对我来说唯一的提示是 IconItemRenderer：

```
private function attachLoadingListenersToIconDisplay():void
{
    if (iconDisplay)
    {
        iconDisplay.addEventListener(IOErrorEvent.IO_ERROR, iconDisplay_loadErrorHandler, false, 0, true);
        iconDisplay.addEventListener(SecurityErrorEvent.SECURITY_ERROR, iconDisplay_loadErrorHandler, false, 0, true);
    }
} 
```

并且听众似乎没有被删除......

处理列表...？

```
if(myList)
        {
            myList.dataProvider = null;
            if(contains(myList))
            {
                myList.parent.removeChild(myList);
            }
        }
        myList= null; 
```

任何人的想法

更多信息：

我的 ItemRenderer 扩展了 IconItemRenderer...

我有一个 UIComponent 持有一个列表：

```
override protected function createChildren():void
    {
        super.createChildren();

        ...

        myList= new List();
        myList.setStyle('contentBackgroundAlpha', 1);
        myList.setStyle('contentBackgroundColor', 0x333333);
        myList.setStyle("horizontalScrollPolicy", ScrollPolicy.OFF);
        myList.height = 6 * ROW_HEIGHT;
        myList.horizontalCenter = 0;
        myList.itemRenderer = new ClassFactory(MyItemRenderer);
        addChild(myList);

        if(myList.layout && myList.layout is VerticalLayout)
        {
            VerticalLayout(myList.layout).variableRowHeight = false;
            VerticalLayout(myList.layout).gap = 1;
        }

    } 
```

并处理它：

```
public function dispose():void
    {

        ...

        if(myList)
        {
            myList.dataProvider = null;
            if(contains(myList))
            {
                removeChild(myList);
            }
        }
        myList= null;
    } 
```

# c# - 使用 LINQ 对列表条目进行分组

> ID：16196260
> 
> 赞同：7
> 
> 时间：2013-04-24T15:38:06.277
> 
> 标签：c#, asp.net-mvc, algorithm, linq

我有以下模型：

```
public class Entry
{
    public int UseraccountId { get; set; }
    public int CompanyId { get; set; }
    public DateTime CreationDate { get; set; }
    public string Target { get; set; }
    public string Message { get; set; }
} 
```

还有一个包含很多条目的列表：

```
List<Entry> entries = ... //get all entries. 
```

例子：

![分组前的示例](https://i.stack.imgur.com/i2oMC.jpg)

我现在希望将第 2 行和第 3 行分组，因为它们具有相同的 UserId、相同的 CompanyId、相同的目标和*几乎*（这是困难的部分），假设在 5 秒的范围内，相同的日期时间。

分组后，我的列表应如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/0yj7W.jpg)

这个问题有什么简单的方法吗？有什么建议吗？我打赌 Linq 会帮助我，但我不确定如何。

**编辑：** 谢谢大家的反馈。我决定更改设计并确保日期时间现在确实相同。所以现在用 linq 分组很容易。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T16:02:35.667

作为@dtb menitons，按“关闭”分组很困难，因为您最终可能会得到比您预期更大的“桶”。例如，如果您有 100 个彼此相隔 4 秒创建的条目，则将“下一个”项目 5 秒内的项目分组会将它们全部放在一个桶中！

但是，如果您想将创建日期*四舍五入*到最接近的值，例如 5 秒然后分组，您可以使用：

```
TimeSpan ts = new TimeSpan(0, 0, 5);  // 5 seconds
entries.GroupBy(i => new {
                          UserId = i.UserId, 
                          CompanyId = i.CompanyId, 
                          Target = i.Target, 
                          RoundedTime = DateTime.MinValue.AddTicks(
                                            (long)(Math.Round((decimal)i.CreationDate.Ticks / ts.Ticks) * ts.Ticks)
                                        ) ;
                          ))
       .Select(g => new {
                         UserId = g.Key.UserId, 
                         CompanyId = g.Key.CompanyId, 
                         Target = g.Key.Target, 
                         RoundedTime = g.Key.RoundedTime,
                         Message = string.Join(", ",g.Select(i=> i.Message).ToArray())
                        } ); 
```

这将按*四舍五入*到最接近的 5 秒的项目进行分组 - 相隔一秒的两个项目可能位于不同的存储桶中，但您不存在您声明的要求所具有的累积性问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T15:46:48.587

这将给出 -5 秒的范围，但对于 CreationDate 上的完全匹配（聚类）算法，我猜它会困难得多。不过，你明白了。

```
List<Entry> entries = entries.GroupBy(a => a.UserId)
                             .ThenBy(a => a.CompanyId)
                             .ThenBy(a => a.CreationDate.AddSeconds(-5)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T16:06:39.607

没有直接的答案，因为这取决于您认为匹配的内容。有简单和复杂的方法，以及介于两者之间的任何方法。您需要为此提出算法。一个简单的方法是减少秒数，只匹配到分钟，但这可能太长了。您可以编写一个方法将时间戳标准化为 5 或 10 秒，并按照已经建议的方式对其进行分组。

如果您想将 x 秒内的任意两条消息组合在一起，那么这种方法只会在大多数情况下有效。总会有那些值在范围内但落在截止值的任一侧。如果您对此感到满意并重视简单性，那么上述答案将起作用。

如果这不起作用并且您想跨人工截止进行分组，那么您将需要另一种方法。在这种情况下，一种简单的方法是使用 LINQ 按时间戳以外的所有内容进行分组。这将对您的数据进行初步分组。然后您可以遍历每个组并将每个时间值与同一组中的其他时间值进行比较，并确定它是否在您的范围内。然后手动抓取那些落在指定范围内的值并将它们组合在一起。

这有一个额外的边缘情况，您需要做出决定。如果您决定在 1 秒内分组，并且您有三个条目，其秒数是（简化的）1、2 和 3。1 和 2 在一秒内，2 和 3 也在一秒内，但 1 和 3 不是吨。你会根据 2 与其他人在一秒内对这些进行分组，还是将 1 和 2 分组，使 2 没有资格与 3 和 3 组合在一起。

您最终将获得一个解决方案，该解决方案的存储桶可以基于将值链接在一起而增长，或者基于创建的第一组而不是硬时间截止值来进行不同的人工截止值。困难时期要简单得多，因此除非您要拥有不断增长的存储桶，否则我建议您只使用标准化时间戳并对其进行分组。

你需要定义你的意思几乎并相应地计划。

# android - 复合布局是否总是需要自己的类？

> ID：16196262
> 
> 赞同：1
> 
> 时间：2013-04-24T15:38:09.927
> 
> 标签：android, xml, android-layout, custom-component

我想以最基本的形式定义一个复合布局，只是一组其他的视图，没有特殊的方法，只是对视图进行分组。

如果我有一个布局

```
<LinearLayout...>

    <LinearLayout...>
        <ImageView... />
        <TextView ... />
        <TextView ... />
        <TextView ... />
        <TextView ... />
        <TextView ... />
    </LinearLayout>

    <RelativeLayout...>
        <ImageView... />
        <TextView ... />
        <ImageView... />
        <TextView ... />
        <ImageView... />
        <TextView ... />
        <ImageView... />
        <TextView ... />
        <ImageView... />
        <TextView ... />
    </RelativeLayout>

</LinearLayout> 
```

我想要这样

```
<LinearLayout...>

    <TopView>
    </TopView>

    <BottomView>
    </BottomView>

</LinearLayout> 
```

所以 TopView 和 BottomView 只是将上述视图分组的两个自定义布局。
我是否必须为每个自定义布局创建一个类，即使我没有任何东西可以扩展分组本身？命名文件并将自定义布局插入其 XML 父级的正确语法是什么。
由于布局文件的名称中不能包含大写字母，我猜想`topview.xml`and `bottomview.xml`，而**不是** `top_view.xml`and`bottom_view.xml`
对于 XML 中的实例化部分，我不太清楚它的外观。

我在网络上遇到的每个示例都涉及更复杂的自定义/复合布局。

注意：*APIDemos*中的 2 个复合布局示例没有帮助，*Android 的复合*[控件](http://developer.android.com/guide/topics/ui/custom-components.html)开发人员指南也没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T15:52:46.383

我认为你应该更好地`<include/>`在你的大布局中使用指令，并在自己的 XML 中定义每个子模块。看看[这里](http://developer.android.com/training/improving-layouts/reusing-layouts.html)以获得一个想法。

# php - How to check if php has successfully run db queries using jQuery?

> ID：16196265
> 
> 赞同：0
> 
> 时间：2013-04-24T15:38:14.940
> 
> 标签：php, jquery

Here, I have this jQuery code that passes values to a php file that handles database queries.

```
$("#item-input-form__complete-form-btn").click(function(){
var invoiceInfo = {
    "date"           : $("[name=datepicker]").val(),
    "op_id"          : 11111,
    "invoice_number" : $("[name=invoice]").val(),
    "vendor_id"      : 33333
};
var jsonResult = $('#added-items__table').tableToJSON();
$.ajax({
    type: "POST",
    url: "insert_items_to_db.php",
    data: {QUERY_TYPE:"INSERT",
           INVOICE_INFO:invoiceInfo,
           JSON_RESULT:jsonResult},
    success: function(){alert("SUCCEEDED");},
    error: function(xhr, textStatus, error){
         var err = eval("(" + xhr.responseText + ")");
        alert(err.Message);
      }
});
}); 
```

And here I have the php file that handles the passed parameters and run queries.

insert_items_to_db.php::

```
<?php
include_once('models/dbapi.php');
$query_type = $_REQUEST["QUERY_TYPE"];
$invoice_info = $_REQUEST["INVOICE_INFO"];
$product_json = $_REQUEST["JSON_RESULT"];

$DB = new DBAPI();
$DB->connectTo('BBY');
$DB->insertDataIntoStockMasterTable($invoice_info, $product_json);
$DB->insertDataIntoStockDetailTable($invoice_info, $product_json);
$DB->disconnect();
?> 
```

And the method in DBAPI class that runs queries looks something like this.

dbapi.php ::

```
 function insertDataIntoStockMasterTable($invoice_info, $product_json)
    {
        $invoice_date   = $invoice_info['date'];
        $invoice_number = $invoice_info['invoice_number'];
        $op_id          = $invoice_info['op_id'];
        $vendor_id      = $invoice_info['vendor_id'];

        $today_date     = date("Y-m-d");
        $invoice_date = date("Y-m-d", strtotime($invoice_date)); 

        $total_amt = 0;
        for($i = 0; $i < count($product_json); $i++)
        {
            $total_amt += $product_json[$i]['Extended Price'];
        }

        $query ="INSERT INTO stock_master (sm_date, sm_invoice_no, sm_vendor_cd, total_amt, op_id, op_date)
                        VALUES('$invoice_date', $invoice_number, $vendor_id, $total_amt, $op_id, '$today_date')";

        $result = mssql_query($query, $this->selected_hannam_db_server);
        return $result;
    } 
```

The problem here is... I can't figure out how to check whether queries have crashed. In such cases, jquery should pop up a msg box telling users that inserting data into db has failed.

How can I pass error msgs from php to jquery?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T15:49:40.157

Soemthing like this could work for you.

## PHP code

```
if( $DB->insertDataIntoStockDetailTable($invoice_info, $product_json) ) {
    $result['result'] = true;  
    $result['error'] = '';

} else {
    $result['result'] = false;  
    $result['error'] = 'Insert failed.';
}
header('Content-Type: application/json');
$data = json_encode($result);
echo $data; 
```

## Java Script Code

```
$.ajax({
    type: "POST",
    url: "insert_items_to_db.php",
    data: {QUERY_TYPE:"INSERT",
           INVOICE_INFO:invoiceInfo,
           JSON_RESULT:jsonResult},
    success: successResponseHandler,
    error: function(xhr, textStatus, error){
         var err = eval("(" + xhr.responseText + ")");
        alert(err.Message);
      }
});

function successResponseHandler(data, textStatus, jqXHR) {

    if( data['result'] == true){
        // DO Something here
    } else {
       // Display the error message with text from data['error']
    }
} 
```

# matlab - TFEST Matlab 它是如何工作的？

> ID：16196266
> 
> 赞同：1
> 
> 时间：2013-04-24T15:38:15.960
> 
> 标签：matlab

我试图通过显式测量找到直流电机的传递函数。我有电压、输出和时间值。

我实际上使用的是 matlab 中的 tfest 函数，它是准确的，但我想知道，他们用来查找 tf 的算法是什么？

有任何想法吗？该网站说他们使用预测误差最小化（PEM）方法，但我不知道如何实现它。

谢谢！

![实际测量 VS TF 估计](https://i.stack.imgur.com/iAkAw.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-15T11:00:11.003

基于工具变量和子空间 (n4sid) 估计方法的组合用于初始化传递函数系数。然后将初始化的系数传递给非线性最小二乘求解器，以迭代地最小化预测误差。键入“doc tfest”并浏览到算法部分以获取更多信息。

另见：[1] Garnier, H., M. Mensler 和 A. Richard。“从采样数据中识别连续时间模型：实施问题和性能评估”国际控制杂志，2003 年，卷。76，第 13 期，第 1337-1357 页。

[2] Ljung, L.“连续时间模型识别实验”。第 15 届 IFAC 系统识别研讨会论文集。2009 年。

# python - 我应该把我自己的python模块放在哪里以便可以导入

> ID：16196268
> 
> 赞同：101
> 
> 时间：2013-04-24T15:38:18.970
> 
> 标签：python, python-2.7

我在 python 中有自己的包，我经常使用它。什么是最优雅或最传统的目录，我应该将我的包放在哪里，以便在不使用 PYTHONPATH 或 sys.path 的情况下导入它？

例如，站点包呢？ `/usr/lib/python2.7/site-packages`.
在 python 中复制和粘贴包是否常见？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2013-04-24T15:44:21.087

我通常将我想要准备导入的东西放在用户站点目录中：

```
~/.local/lib/pythonX.X/site-packages 
```

要为您的平台显示正确的目录，您可以使用`python -m site --user-site`

* * *

编辑：`sys.path`一旦你创建它就会出现：

```
mkdir -p "`python -m site --user-site`" 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2015-06-29T06:21:53.930

因此，如果您像我这样的新手并且您的目录组织得不是很好，您可能想尝试这种方法。

打开你的 python 终端。在我的例子中，导入一个你知道可以工作的模块，比如 numpy，然后执行以下操作。 `Import numpy`

`numpy.__file__`

这导致

`'/Library/Frameworks/Python.framework/Versions/3.4/lib/python3.4/site- packages/numpy/__init__.py'`

结果`numpy.__file__`是您应该将 python 文件与您的模块一起放置的位置（不包括`numpy/__init__.py`），所以对我来说这将是

`/Library/Frameworks/Python.framework/Versions/3.4/lib/python3.4/site- packages`

为此，只需转到您的终端并输入

`mv "location of your module" "/Library/Frameworks/Python.framework/Versions/3.4/lib/python3.4/site- packages"`

现在你应该可以导入你的模块了。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-06-29T06:39:45.557

这对我有用（我必须经常创建上传到私有 pip 存储库的 python 包）。详细说明@joran 对这个问题的评论。

1.  创建一个“构建目录”，用作创建包的工作空间。您选择的任何目录都可以
2.  在那里复制你的 python 包目录，并创建一个 setup.py 文件。[这](http://pythonhosted.org/an_example_pypi_project/setuptools.html)应该有助于正确创建 setup.py。
3.  为您正在处理的项目创建一个[virtualenv 。](http://docs.python-guide.org/en/latest/dev/virtualenvs/)virtualenvs 还有很多其他的好处，这里我就不详细说了。
4.  创建一个本地 dist 包`python setup.py sdist --format=tar`。理想情况下，创建的包应该在`dist`文件夹中。
5.  在你的 virtualenv 上安装包（激活它之后）。`pip install <yourpackage>.tar`

`pip install --force-reinstall`如果您需要更多地使用库并重新创建 dist 包，您可以使用。

我发现这种方法对我很有用。如果您不需要打包模块以供其他系统使用而不仅仅是您的本地系统，则此方法可能是一种矫枉过正

快乐的黑客。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-10-26T14:30:37.183

可以通过添加以下源代码来提取导入文件夹：

```
import sys
print sys.path 
```

自动符号链接生成示例是：

```
ln -s \`pip show em | grep "Location"| cut -d " " -f2\` \`python -m site --user-site\` 
```

而不是“em”，您可以使用“刚刚安装但 python 看不到它”的其他包

下面我将按照评论中的要求更详细地解释。

假设您已经使用以下命令安装了 python 模块 em 或 pyserial（示例用于 ubuntu）：

```
sudo pip install pyserial 
```

输出是这样的：

```
Collecting pyserial
  Downloading pyserial-3.3-py2.py3-none-any.whl (189kB)
    100% |████████████████████████████████| 194kB 2.3MB/s 
Installing collected packages: pyserial
Successfully installed pyserial-3.3 
```

问题将如下 - python 看不到模块 pyserial，为什么？因为安装模块的位置不是 python 正在寻找您的特定用户帐户的位置。

解决方案 - 我们必须创建从 pyserial 到达的路径到你的 python 正在寻找的路径的符号链接。

符号链接创建命令将是：

```
ln -s <what_to_link> <where_to_link> 
```

我们不是输入确切的位置，而是要求 pip 通过执行命令告诉我们它存储模块的位置：

```
pip show pyserial | grep "Location"| cut -d " " -f2 
```

我们不是输入确切的位置，而是要求 python 通过执行命令告诉我们它在哪里寻找正在安装的模块：

```
python -m site --user-site 
```

这两个命令都必须用“`”字符转义（通常在美国键盘的 1 按钮的左侧）

结果将为 ln 提供以下命令，并创建缺少的符号链接：

```
ln -s /usr/local/lib/python2.7/dist-packages /home/<your_username>/.local/lib/python2.7/site-packages 
```

或类似的东西，取决于你的发行版和 python/pip 默认值。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-06-28T14:48:10.013

在我的 Mac 上，我做了一个`sudo find / -name "site-packages"`. 这给了我一些路径，比如`/Library/Python/2.6/site-packages`,`/Library/Python/2.7/site-packages`和`/opt/X11/lib/python2.6/site-packages`.

因此，如果我使用的是 v2.7 或 v2.6，我知道将模块放在哪里。

希望能帮助到你。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2020-07-01T10:45:18.827

如果你正在开发一个模块，我建议你遵循这个。

```
import sys
sys.path.append("/home/mylinux/python-packages") 
```

现在，您保留的任何模块都可以`python-packages`通过`Python-interpreter`.

# json - 从黑莓中的 Json 获取数据

> ID：16196270
> 
> 赞同：2
> 
> 时间：2013-04-24T15:38:24.727
> 
> 标签：json, blackberry

我正在尝试从该 Json 获取内容：

```
{
 "status":"ok",
 "page":
       {
        "id":2,
        "type":"page",
        "slug":"about-us",
        "url":"http:\/\/ugo.offroadstudios.com\/about-us\/",
        "status":"publish",
        "title":"About Us",
        "title_plain":"About Us",
        "content":"<p><strong>Lorem Ipsum<\/strong>\u00a0is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry&#8217;s standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.<\/p>\n",
        "excerpt":"Lorem Ipsum\u00a0is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry&#8217;s standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic [...]",
        "date":"2012-07-03 09:03:01",
        "modified":"2013-02-15 18:20:04",
        "categories":[],
        "tags":[],
        "author":{"id":1,"slug":"sociannel-app","name":"sociannel-app","first_name":"sociannel-app","last_name":"","nickname":"sociannel-app","url":"","description":"not filled yet"},
        "comments":[],
        "attachments":[],
        "comment_count":0,
        "comment_status":"closed"
       }
} 
```

这是我用来从 json 获取内容的代码：

```
String strURL = "http://ugo.offroadstudios.com/api/get_page/?id=2;deviceside=true"; 
webConnection wb = new webConnection();
String res = wb.getJson(strURL);

try {
    JSONObject object = new JSONObject(res);
    if(object.getString("status") == "error")
    {
        Dialog.alert("Invalid "+object.getString("status"));

    }
    else
    {
        String content = object.getString("page.content");
        Dialog.alert(content);
        RichTextField aboutus = new RichTextField("");
        this.setTitle(content);
        add(aboutus);
    }
} catch (JSONException e) {
    // TODO Auto-generated catch block
    System.out.println("EX is "+e);
    e.printStackTrace();
} 
```

它给了我一个错误“page.content”找不到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T22:46:07.727

尝试改变这个：

```
String content = object.getString("page.content"); 
```

有了这个：

```
String content = object.getJSONObject("page").getString("content"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T22:46:12.940

而不是使用`object.getString("page.content")`，试试这个：

```
 JSONObject page = object.getJSONObject("page");
    String content = page.getString("content");
    Dialog.alert(content); 
```

您只需将过程分为两个步骤，首先获取`page`对象，然后`content`从中检索对象。

# c# - 通过 FindWindowEx 获取所有控件

> ID：16196272
> 
> 赞同：5
> 
> 时间：2013-04-24T15:38:25.113
> 
> 标签：c#, c++, c, hook

我正在构建一个应用程序，它将使所有控制都进入应用程序 winform 正在运行。首先，我可以将 dll 注入到 winform 正在运行的应用程序中并获取应用程序 winform 正在运行的句柄。在我让所有子窗口进入应用程序之后。接下来，我想通过 FindWindowEx 将所有控件放入子窗口。但我不能

这是代码：

```
static ArrayList GetAllChildrenWindowHandles(IntPtr hParent, int maxCount)
    {
        ArrayList result = new ArrayList();
        int ct = 0;
        IntPtr prevChild = IntPtr.Zero;
        IntPtr currChild = IntPtr.Zero;
        while (true && ct < maxCount)
        {
            currChild = FindWindowEx(hParent, prevChild, null, null);
            if (currChild == IntPtr.Zero)
            {
                int errorCode = Marshal.GetLastWin32Error();
                break;
            }
            result.Add(currChild);
            prevChild = currChild;
            ++ct;
        }
        return result;
    } 
```

我得到了子窗口的句柄并使用它作为父窗口。但是我无法通过 FindWindowEx 将所有控制权都控制到子窗口中。对不起我的英语不好

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-24T17:12:41.463

您可以使用下面的代码。将它放入某个辅助类中，例如像这样使用它......

```
var hwndChild = EnumAllWindows(hwndTarget, childClassName).FirstOrDefault(); 
```

如果您愿意，您可以“丢失”`class`检查 - 但通常您正在检查特定目标。

> 您可能还想查看我做了一段时间的这篇文章 - 它使用这种方法将焦点设置在远程窗口上（这些场景很常见，你迟早会遇到这个问题）。
> [Pinvoke SetFocus 到特定控件](https://stackoverflow.com/questions/9503027/pinvoke-setfocus-to-a-particular-control/9547099#9547099)

```
public delegate bool Win32Callback(IntPtr hwnd, IntPtr lParam);

[DllImport("user32.Dll")]
[return: MarshalAs(UnmanagedType.Bool)]
public static extern bool EnumChildWindows(IntPtr parentHandle, Win32Callback callback, IntPtr lParam);

[DllImport("user32.dll", CharSet = CharSet.Auto)]
static public extern IntPtr GetClassName(IntPtr hWnd, System.Text.StringBuilder lpClassName, int nMaxCount);

private static bool EnumWindow(IntPtr handle, IntPtr pointer)
{
    GCHandle gch = GCHandle.FromIntPtr(pointer);
    List<IntPtr> list = gch.Target as List<IntPtr>;
    if (list == null)
        throw new InvalidCastException("GCHandle Target could not be cast as List<IntPtr>");
    list.Add(handle);
    return true;
}

public static List<IntPtr> GetChildWindows(IntPtr parent)
{
    List<IntPtr> result = new List<IntPtr>();
    GCHandle listHandle = GCHandle.Alloc(result);
    try
    {
        Win32Callback childProc = new Win32Callback(EnumWindow);
        EnumChildWindows(parent, childProc, GCHandle.ToIntPtr(listHandle));
    }
    finally
    {
        if (listHandle.IsAllocated)
            listHandle.Free();
    }
    return result;
}

public static string GetWinClass(IntPtr hwnd)
{
    if (hwnd == IntPtr.Zero)
        return null;
    StringBuilder classname = new StringBuilder(100);
    IntPtr result = GetClassName(hwnd, classname, classname.Capacity);
    if (result != IntPtr.Zero)
        return classname.ToString();
    return null;
}

public static IEnumerable<IntPtr> EnumAllWindows(IntPtr hwnd, string childClassName)
{
    List<IntPtr> children = GetChildWindows(hwnd);
    if (children == null)
        yield break;
    foreach (IntPtr child in children)
    {
        if (GetWinClass(child) == childClassName)
            yield return child;
        foreach (var childchild in EnumAllWindows(child, childClassName))
            yield return childchild;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T10:06:09.633

尝试 Spy++ 并查看您尝试枚举的控件是否为窗口。如果它们不是窗口，则无法使用此 API 枚举它们。

# date - ODATA日期查询

> ID：16196273
> 
> 赞同：10
> 
> 时间：2013-04-24T15:38:31.803
> 
> 标签：date, odata

我需要返回日期为 2013 年 4 月 4 日的记录（例如）。ODATA 服务中的日期字段返回为 {DATE: "2013-04-04T17:39:33.663"}

查询应该是什么样子？

到目前为止，我已经看到了三个选项来做到这一点，但没有一个是直截了当的。

选项一：datetime'2013-04-04T12:00'：这需要指定时间

选项二：month(DATE) eq 04 day(DATE) eq 04 year(DATE) eq 2013：这很麻烦

选项三：使用带有“ge”和“le”的选项一来获取两个日期之间的记录：这也是废话。

这应该非常简单，就像在 T-SQL 中一样。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-24T21:15:55.577

OData v3 没有原始数据类型，它只是`Date`. 您拥有的属性是 a`DateTime`或 a `DateTimeOffset`，因此，无论您是否使用它，该值都有一个时间部分，如果您想检查值是否相等，还必须检查时间部分.

如果您确定从不使用时间部分（并始终将其设置为 00:00），则*可以*执行以下查询：

```
/service.svc/EntitySet?$filter=DateProperty+eq+datetime'2013-04-04' 
```

这意味着 00:00 的时间部分。但这只是简写。如果您的某些 DateTimes 确实以不是 00:00 的时间部分结束，您可能会得到意想不到的结果。

因此，鉴于您只想检查值的日期部分，而不是完全相等，我认为您提到的第二种方法是最好的方法：

```
/service.svc/EntitySet?$filter=day(DateProperty)+eq+4+and+month(DateProperty)+eq+4+and+year(DateProperty)+eq+2013 
```

这样，您就可以准确地检查您要检查的内容，仅此而已。

对于它的价值，我相信`Date`OData v4 中会出现一种数据类型。然后，您将能够使用相等检查而不必担心时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-06T07:06:07.483

另外我想说的是，你也可以使用[LINQPAD](http://www.linqpad.net/)来生成 OData 请求。您应该发出 LINQ 请求，LINQPAD 将生成正确的 URI。例如：

*   林克：

从 ev 在 ev.Start >= DateTime.Now.Date 的事件中选择 ev

*   LINQPAD 生成 Odata URI：

    ```
    http://yoursite/_vti_bin/listdata.svc/Events()?$filter=开始日期时间'2013-12-05T00:00:00+01:00'
    ```

*   将其调整为正确的格式。就我而言，我删除了“+01:00”。

您也可以使用 Visual Studio 获取 Odata 请求。

# mysql - MySQL 或其他数据库中是否有 cron 的内置替代方案？

> ID：16196274
> 
> 赞同：2
> 
> 时间：2013-04-24T15:38:36.660
> 
> 标签：mysql, database, database-design

这是我要问的非常基本的问题。

想象一下用户表中的日期列。

```
Username --- RegistrationDate ----- Authority
user1     -  (today's date)     -   1
user2     -  (yesterday's date) -   1 
```

每个用户必须`Authority = 2`在 10 天后自动升级。

我知道我可以通过使用 CRON 不断执行 PHP 来做到这一点，但是数据库的内置功能呢？

就像是：

```
//pseudo code
bind trigger on users.RegistrationDate, function() {
       if(RegistrationDate >= RegistrationDate+10 days)
           return updateAuthority(1)
} 
```

一个重要的事情是性能。它不应该检查循环中的每个触发器，应该通过将它们直接绑定在列上来及时触发任何应该触发的内容。

第二个重要的事情是，它应该在我备份数据库时导出。我不想重新创建它们。

我不是数据库方面的专家，但我在这个项目中使用 MySQL，并且需要 MySQL 的类似功能。如果它不存在并且我必须继续使用 cron，请告诉我 Oracle/MSSQL 或 PostgreSQL 中是否存在类似的功能，以便我可以移植我的数据库？（哦，还有 MongoDB，它也可能是一个替代方案。）

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T16:16:34.620

在 MySQL 你有事件： [http ://dev.mysql.com/doc/refman/5.5/en/create-event.html](http://dev.mysql.com/doc/refman/5.5/en/create-event.html)

只需创建一个每天触发的事件并更新权威。

**编辑：（**回答下面的问题）

我确定向导会导出事件，但如果没有，您可以使用该`mysqldump`程序（它位于 bin 目录中）。您还可以使用该`SHOW CREATE EVENT`命令导出单个事件：它返回重新创建事件所需的 SQL 命令。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T15:41:39.617

Sql Server 有 Sql Server 代理。这是一个在指定时间运行作业的进程。Jobs由step组成，step可以是Sql Query，也可以是SSIS包，也可以是执行程序等等。

[http://msdn.microsoft.com/en-us/library/ms189237.aspx](http://msdn.microsoft.com/en-us/library/ms189237.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-29T14:42:12.573

Oracle 有 dbms_scheduler（不推荐使用 dbms_job）。

功能包括

*   自定义时间表（例如，每 5 分钟一次，每周一至周五 18:00，...）
*   工作链（工作之间的依赖关系）
*   随意禁用/启用作业
*   以交互方式运行作业（主要用于调试目的）

示例（每天 22:00 运行系统监控）：

```
 begin
      dbms_scheduler.create_job(
      job_name => 'JOB_SYSTEM_MONITORING'
     ,job_type => 'PLSQL_BLOCK'
     ,job_action => 'begin my_schema.system_monitoring.checkAndSendEMails; end; '
     ,start_date => to_date('2013-04-29 04:00:00', 'YYYY-MM-DD hh24:mi:ss')
     ,repeat_interval => 'FREQ=DAILY;BYHOUR=22'
     ,enabled => TRUE
     ,comments => 'System monitoring (daily job, runs at 22:00.');
   end; 
```

# java - Get json object in java

> ID：16196283
> 
> 赞同：0
> 
> 时间：2013-04-24T15:38:52.477
> 
> 标签：java, json, object

At client side, I send array to sever

```
plan = []
plan.push
  name: "base"
  value: base
plan.push
  name: "detail"
  value: detail    
$.ajax
  type: "POST"
  url: "/plan"
  dataType: "json"
  ContentType: "application/json; charset=utf-8"
  data: plan
  success:(data) ->
    alert data 
```

At server side, I get

```
"base":["[object Object]"],"result":["[object Object]"] 
```

How I can get data of Object(base":["[object Object]"])????

# ios - AIR app on iPad - start crash

> ID：16196285
> 
> 赞同：0
> 
> 时间：2013-04-24T15:38:56.557
> 
> 标签：ios, ipad, apache-flex, air, flex4.6

I created and installed an application for iPad according to the following instructions:
[Apple iOS development process using Flash Builder](http://help.adobe.com/en_US/flex/mobileapps/WS064a3073e805330f6c6abf312e7545f65e-8000.html)

However, when I run this simple application, for about a second the screen goes black and then returns to the normal iPad screen.
It almost seems as if the application is not running at all, but there's no error notification to be seen.
I'm really desperate...

testPad.mxml source:

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
           xmlns:s="library://ns.adobe.com/flex/spark" 
           backgroundColor="#A0F3FF" 
           width="100%" height="100%">
</s:Application> 
```

Any idea?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-04T11:13:55.887

如果您在 Mac 上工作，请尝试在启动调试器时打开 xcode。您可以通过这种方式访问​​设备的日志文件。

# python - Python执行shell命令不会终止

> ID：16196288
> 
> 赞同：0
> 
> 时间：2013-04-24T15:39:03.817
> 
> 标签：python

我正在使用子进程从视频设备检查 zbarcam 的输出

这是我的代码：

```
>>> import subprocess
>>> subprocess.check_output(["zbarcam","/dev/video1"]) 
```

Zbarcam 启动一个窗口，我可以在该窗口上检查视频，问题是即使它已经阅读了代码，它也会继续运行，我必须手动关闭这个窗口，然后才能将任何内容输出到 python shell。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T15:47:53.390

该`subprocess.check_output`调用仅在进程退出时为您提供输出。您想要的是在它仍在运行时读取输出。

为此，您可以使用以下内容：

```
import os

process =os.popen('/usr/bin/zbarcam','r')
while True:
    print 'Got barcode:', process.readline() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T15:48:08.137

这是完全正常的。只有在命令完成后才能获得输出。

看这里：

[如何从 Python 异步运行外部命令？](https://stackoverflow.com/questions/636561/how-can-i-run-an-external-command-asynchronously-from-python)

用于异步运行命令的解决方案。

# c# - Encoding issues - code generating garbled characters in c#

> ID：16196289
> 
> 赞同：0
> 
> 时间：2013-04-24T15:39:04.630
> 
> 标签：c#, openxml

My program is generating a word document by reading another file, but the outpout generates garbled characters example: its generating "Â Q4Â testÂ text", when the output should be "Q4 test text" So far I think its an encoding issue and it looks the following code might need to be changed to fix the issue:

byte[] bytes = file.OpenBinary();

This reads the file, but it looks the encoding is not correct and when the code manipulates and writes this file back, it generates garbled characters. I've researched google and stackExchange and tried few things to fix this, but none of these seems to fix the issue:

```
//Alternate code 1      
        var sourceBytes = file.OpenBinary();
        byte[] bytes = Encoding.Convert(Encoding.Default, Encoding.UTF8, sourceBytes);
        byte[] bytes = Encoding.Convert(Encoding.UTF8, Encoding.UTF32, sourceBytes);

//Alternate code 2
        System.Text.UTF8Encoding enc = new System.Text.UTF8Encoding();
        string s = enc.GetString(sourceBytes);
        byte[] bytes = Encoding.UTF8.GetBytes(s);

//Alternate code 3
        var stream = file.OpenBinaryStream();
        var sr = new StreamReader(stream);
        var sw = new StreamWriter(stream);
        var s = sr.ReadToEnd();
        s += "AAA";
        byte[] bytes = Encoding.UTF8.GetBytes(s); 
```

# scala - scala 2.10 类型不匹配使用谷歌番石榴的 CacheBuilder

> ID：16196290
> 
> 赞同：4
> 
> 时间：2013-04-24T15:39:05.997
> 
> 标签：scala, guava

我正在为 scala 2.10.1 中的一些实体编写通用缓存。目前，我正在使用 google Guava 的 CacheBuilder，因为 scala 生态系统中没有太多选择。

代码：

```
trait CachedEntity[E <: KeyedEntity[K],K] {

  def lookup(id:K):E

  def getElem(id:K):Option[E] = Try(elemCache.get(id)).toOption

  val elemCache = CacheBuilder.newBuilder().maximumSize(10).expireAfterWrite(1,TimeUnit.MINUTES).build(
    new CacheLoader[K,E] {
      def load(key:K) = {
        println("Looking Up key:" + key + "in Class:" + this.getClass.getName)
        lookup(key)
      }
    }
  )
}
trait LongKeyed[E<: KeyedEntity[Long],Long] extends CachedEntity[E,Long] 
```

但是，sbt 抛出错误：

```
[error] KEHCaching.scala:16: type mismatch;
[error]  found   : id.type (with underlying type K)
[error]  required: Object with K
[error]   def getElem(id:K):Option[E] = Try(elemCache.get(id)).toOption
[error]                                                   ^
[error] one error found 
```

有任何想法吗？即使我像这样添加 K<:Object ：

```
trait CachedEntity[E <: KeyedEntity[K],K <:Object] { 
```

我收到这个错误

```
[error] KEHCaching.scala:27: type arguments [E,Long] do not conform to trait CachedEntity's type parameter bounds [E <: org.squeryl.KeyedEntity[K],K <: Object]
[error] trait LongKeyed[E<: KeyedEntity[Long],Long] extends CachedEntity[E,Long]
[error]                                                     ^
[error] one error found 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-02T01:37:55.617

CacheBuilder 需要一个 Object/AnyRef。您可以使用 java.lang.Long 代替 scala.Long 如下；Scala 将根据需要自动装箱/拆箱。

```
import scala.util.Try
import java.util.concurrent.TimeUnit
import java.lang.{Long => JLong}

trait KeyedEntity[K]

trait CachedEntity[E <: KeyedEntity[K], K <: AnyRef] {

  def lookup(id:K):E

  def getElem(id:K):Option[E] = Try(elemCache.get(id)).toOption

  val elemCache = CacheBuilder.newBuilder().maximumSize(10).expireAfterWrite(1,TimeUnit.MINUTES).build(
    new CacheLoader[K,E] {
      def load(key:K) = {
        println("Looking Up key:" + key + "in Class:" + this.getClass.getName)
        lookup(key)
      }
    }
  )
}

trait LongKeyed[E <: KeyedEntity[JLong]] extends CachedEntity[E,JLong] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T00:41:00.173

如果你不介意有点丑陋的演员表，你可以让它工作。主要问题是`build`on 函数`CacheBuilder`返回与 types 相关的缓存`[Object,Object]`。在 Scala 中，`AnyVal`不是从 Object 派生的，所以它不起作用。但是我模拟了以下代码示例，以展示如何通过一些难看的转换来解决这个限制：

```
trait CachedEntity[E <: KeyedEntity[K], K] {

  def lookup(id:K):E

  def getElem(id:K):Option[E] = Try(elemCache.get(id)).toOption

  val elemCache = CacheBuilder.newBuilder().build(
    new CacheLoader[K,E] {
      def load(key:K) = {
        println("Looking Up key:" + key + "in Class:" + this.getClass.getName)
        lookup(key)
     }
    }
  ).asInstanceOf[LoadingCache[K,E]]
}

trait LongKeyed[E<: KeyedEntity[Long]] extends CachedEntity[E,Long]

case class MyEntity(id:Long, value:String) extends KeyedEntity[Long]

class MyEntityCache extends LongKeyed[MyEntity]{
  def lookup(id:Long) = MyEntity(id, "foo") 
}

object CachedEntityTest{
  def main(args: Array[String]) {
    val cache = new MyEntityCache
    val entity = cache.getElem(1)
    println(entity)
  }
}

//Faking this for purposes of code sample...
trait KeyedEntity[K] 
```

# c# - Querying one delegate twice for one event

> ID：16196291
> 
> 赞同：2
> 
> 时间：2013-04-24T15:39:07.070
> 
> 标签：c#, .net, events, delegates

I was recently asked a question what will happen if I would query one handler twice. Let me just show you code:

```
 public delegate void OpenEventHandler(object sender, EventArgs e);

 public class MyWindow
 {
     public event OpenEventHandler Open;

     public void OpenWindow()
     {
         if (Open != null)
         {
             Open(this, new EventArgs());
         }
     }
 }

 public class TwoDelegates
 {
     public static void HandleOpen(Object sender, EventArgs e)
     {
         Console.WriteLine("Birds fly");
         (sender as MyWindow).Open -= HandleOpen;
     }

     public static void Run()
     {
         var window = new MyWindow();
         window.Open += HandleOpen;
         window.Open += HandleOpen;

         window.OpenWindow();
         Console.ReadKey();
     }
 } 
```

I wonder why string is still printed twice. On the beginning of it Invocation list consist of two items with same delegate reference, but after a first run it is cleaned up, still the secon invocaiton appears.

**Update1:**

Seems that even simple `-=` removes only one entry:

```
 var window = new MyWindow();

 window.Open += HandleOpen;
 window.Open += HandleOpen;

 Console.WriteLine(window.getHandlers().Count());
 window.Open -= HandleOpen;
 Console.WriteLine(window.getHandlers().Count()); 
```

Though debug mode in VS2010, while you look through `window.Open` internal properties shows empty invocation list with 0 count. Seems that it's some magic in debug info displayed in VS.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T15:43:08.237

这是委托如何触发事件处理程序的问题。它在开始触发之前获取内部委托列表的副本。因此，为同一事件的事件处理程序内部的事件添加或删除事件处理程序只会影响该事件的未来调用，而不影响当前调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T16:06:41.653

为了扩展 Servy 所说的内容，这里有一个稍微修改过的代码版本，并带有一些调试助手来澄清发生了什么。在 HandleOpen 函数中，我们检查从事件中删除 HandleOpen 前后的事件处理程序。总结是：在您的多播中有两个 HandleOpen 副本，单个 Open-=HandleOpen 没有理由同时删除它们。

```
public class MyWindow
{
    public event OpenEventHandler Open;

    public void OpenWindow()
    {
        if (Open != null)
        {
            Open(this, new EventArgs());
        }
    }

    public Delegate[] getHandlers()
    {
        return Open.GetInvocationList();
    }
}

public class TwoDelegates
{
    public static void HandleOpen(Object sender, EventArgs e)
    {
        Console.WriteLine("Birds fly");
        var thisWin = sender as MyWindow;
        var before = thisWin.getHandlers();

        (sender as MyWindow).Open -= HandleOpen;
        var after = thisWin.getHandlers();

    }

    public static void Run()
    {
        var window = new MyWindow();
        window.Open += HandleOpen;
        window.Open += HandleOpen;

        window.OpenWindow();
        Console.ReadKey();
    }
} 
```

# c# - 使用 SQLiteAsyncConnection 在 SQLite-net C# 中创建通用查询

> ID：16196292
> 
> 赞同：5
> 
> 时间：2013-04-24T15:39:07.053
> 
> 标签：c#, generics, asynchronous, sqlite-net

我正在使用 SQLite-net ( [https://github.com/praeclarum/sqlite-net](https://github.com/praeclarum/sqlite-net) ) 在 Android 上使用 Mono 实现数据库，并具有以下内容：

```
public class DatabaseTestASync
{
    private SQLiteAsyncConnection m_db;

    public delegate void StocksFound(List<Stock> list);
    public event StocksFound StocksFoundListener;

    // Uninteresting parts remove, e.g. constructor

    public void AddStock(Stock stock)
    {
        m_db.InsertAsync(stock).ContinueWith(t => { Debug.WriteLine(stock.Symbol + " added"); });
    }

    public void GetAllStocks()
    {
        AsyncTableQuery<Stock> query = m_db.Table<Stock>().Where(stock => true);
        query.ToListAsync().ContinueWith(QueryReturns);
    }

    private void QueryReturns(Task<List<Stock>> t)
    {
        if (StocksFoundListener != null)
            StocksFoundListener(t.Result);
    } 
```

这非常适合给我一个股票列表，但我设想在我的项目中有一组表，并且不想为每个表创建单独的 AddX、GetAllX、QueryReturns(X) 等。我正在采用一种通用的方式来执行这些数据库操作，并尝试了以下方法：

```
public class DBQuery<T>
{
    private SQLiteAsyncConnection m_db;
    public delegate void OnRecordsFound(List<T> list);
    public event OnRecordsFound RecordsFoundListener;

    public DBQuery (SQLiteAsyncConnection db)
    {
        m_db = db;
    }

    public void GetAllRecords()
    {
        AsyncTableQuery<T> query = m_db.Table<T>().Where(r => true); // COMPILE ERROR HERE
        query.ToListAsync().ContinueWith(QueryReturns);
    }

    private void QueryReturns(Task<List<T>> t)
    {
        if (RecordsFoundListener != null)
            RecordsFoundListener(t.Result);
    }
} 
```

但是，它不会编译为：“T”必须是具有公共无参数构造函数的非抽象类型，才能将其用作泛型类型或方法“DatabaseUtility.AsyncTableQuery”中的参数“T”。

关于如何让这种通用数据库访问工作的任何想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-25T02:16:40.420

我真的不知道 SQLite 内部结构，但这完全是关于`generics`......

因为`AsyncTableQuery`是这样定义的

```
public class AsyncTableQuery<T>
        where T : new ()
    { 
```

...或者只是基于您的错误，**您需要**对您的`T`:

```
public class DBQuery<T> where T : new () 
```

> 如果您使用的类或方法具有`constrained generic parameter`- 您需要对您的方法（或类，取决于`T`定义的位置）执行相同的操作。

# php - $_POST ['variable']，变量无法识别（“未定义索引”）

> ID：16196300
> 
> 赞同：-2
> 
> 时间：2013-04-24T15:39:43.757
> 
> 标签：php, forms, post

我正在尝试学习 PHP（对于一个小项目来说只是一点点）。我正在尝试遵循[本](http://www.html-form-guide.com/php-form/php-form-tutorial.html)教程，但是当我这样做时，它不起作用。首先，我在那里复制了确切的代码，但它仍然无法正常工作，但这是我的一些代码：

```
 <?php
         if($_POST['projectSubmit'] == "Submit") 
        {
            $toApprove= $_POST['projectName'];
        }
    ?>

    <form action ="getData" method="post" >
        <input type="text" name="projectName">
        <input type="submit" name="projectSubmit" value="Submit">
    </form> 
```

然而我得到一个错误：

```
A PHP Error was encountered

Severity: Notice

Message: Undefined index: projectSubmit

Filename: views/ViewProjectApproval.php

Line Number: 13 
```

我究竟做错了什么 ？

**顺便说一句：**这是将数据传输回我的控制器的正确方法吗？（带有代码点火器的模型视图控制器）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T15:41:27.963

利用：

```
if (isset($_POST['projectSubmit'])) { /*...*/ } 
```

这将检查参数是否已发送。（此处：提交表单时）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T15:41:12.517

用这个

```
if (isset($_POST['projectSubmit']) && $_POST['projectSubmit'] == "Submit") 
```

# mysql - 简单的 select, where 语句有问题

> ID：16196302
> 
> 赞同：0
> 
> 时间：2013-04-24T15:39:52.647
> 
> 标签：mysql, sql, select, where-clause

我是 SQL 新手，似乎无法理解`WHERE`仅在语句的一部分上使用子句。比如（基本写的）

```
SELECT Forename, Surname, Organisation 
FROM Client table

SELECT Renewal day AND Renewal month AS Renewal date 
FROM Client table
WHERE Renewal day <> 0 
```

我需要这一切都是一个声明，但也需要 where 子句不会影响 Forename、Surname 和 Organization 字段。例如，该表将充满客户，但续订日期列将仅显示拥有客户的客户的日期。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T15:48:54.440

```
SELECT Forename, Surname, Organisation, IF(Renewal day <> 0, Renewal day AND Renewal month, '') as Renewal
FROM Client table 
```

应该做的伎俩。这不会立即运行，因为不喜欢 IF 中的 AND 语句，尽管您可以使用：

```
IF(Renewal day <> 0, CONCAT(Renewal day,Renewal month), '') as Renewal 
```

或者

```
IF(Renewal day <> 0, Renewal day) as renewDay, IF(Renewal day <> 0, Renewal month, '') as renewMonth 
```

有 2 个单独的字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T15:59:00.323

最简单的方法是将续订日期存储为日期并允许空值，然后您只需执行以下操作：

```
SELECT Forename, Surname, Organization, RenewalDate 
FROM Client 
```

# scorm - SCORM：如何解释错误“未建立数据模型依赖关系”？

> ID：16196305
> 
> 赞同：0
> 
> 时间：2013-04-24T15:40:06.620
> 
> 标签：scorm, scorm2004

当我尝试设置时发生错误：

```
setValue( "cmi.objectives.0.completion_status", "completed" ); 
```

SCORM交互日志：

```
[19:28:55.830] Initialize('')
[19:28:55.833] GetValue('cmi.objectives._count')
[19:28:55.833] GetValue('cmi.objectives.0.success_status')
[19:28:55.835] SetValue('cmi.exit', 'suspend')
[19:29:06.726] GetValue('cmi.learner_name')
[19:29:21.49] SetValue('cmi.objectives.0.completion_status', 'completed') 
```

在[标准](http://www.adlnet.gov/wp-content/uploads/2011/07/scorm.2004.3ed.confreq.v1.0.pdf)中有一个我不明白的模糊表述：“**如果通信会话已经初始化并且在相关依赖关系不存在的情况下调用了 SetValue() API 方法，LMS 应将错误代码设置为 Data Model Dependency Not成立 (408) 并返回 false。** ”

一个 SCORM 播放器（在 scorm.com 网站上）不会发出错误消息，这没关系。另一个 SCORM 播放器提出了错误。我不确定我的清单/调用是否正确。

**imsmanifest.xml**：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!-- Solo on the Keyboard Trainer, SCORM version, http://www.ergosolo.ru-->
<manifest identifier="ergosolo.solotrainer" version="1.0" xmlns="http://www.imsglobal.org/xsd/imscp_v1p1" xmlns:adlcp="http://www.adlnet.org/xsd/adlcp_v1p3" xmlns:adlseq="http://www.adlnet.org/xsd/adlseq_v1p3" xmlns:adlnav="http://www.adlnet.org/xsd/adlnav_v1p3" xmlns:imsss="http://www.imsglobal.org/xsd/imsss" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:lom="http://ltsc.ieee.org/xsd/LOM" xsi:schemaLocation="http://www.imsglobal.org/xsd/imscp_v1p1 imscp_v1p1.xsd
                                           http://www.adlnet.org/xsd/adlcp_v1p3 adlcp_v1p3.xsd
                                           http://www.adlnet.org/xsd/adlseq_v1p3 adlseq_v1p3.xsd
                                           http://www.adlnet.org/xsd/adlnav_v1p3 adlnav_v1p3.xsd
                                           http://www.imsglobal.org/xsd/imsss imsss_v1p0.xsd
                                           http://ltsc.ieee.org/xsd/LOM lom.xsd">
    <metadata>
        <schema>ADL SCORM</schema>
        <schemaversion>2004 3rd Edition</schemaversion>
        <lom xmlns="http://ltsc.ieee.org/xsd/LOM" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://ltsc.ieee.org/xsd/LOM lom.xsd">
            <general>
                <title>
                    <string language="ru">Соло на Клавиатуре</string>
                </title>
                <language>ru</language>
                <description>
                    <string language="ru">Соло на Клавиатуре - SCORM-версия</string>
                </description>
            </general>
            <metaMetadata>
                <metadataSchema>LOMv1.0</metadataSchema>
            </metaMetadata>
            <technical>
                <!-- All of the file types used by this course-->
                <format>text/html</format>
                <format>image/jpeg</format>
                <format>image/bmp</format>
                <format>application/x-javascript</format>
                <format>application/swf</format>
                <format>image/png</format>
                <format>text/css</format>
                <installationRemarks>
                    <string language="en">This activity requires the client browser to have a Macromedia Flash plugin installed.</string>
                </installationRemarks>
            </technical>
        </lom>
    </metadata>
    <organizations default="soloOrganization">
        <organization identifier="soloOrganization" structure="hierarchical" adlseq:objectivesGlobalToSystem="true">
            <title>Соло на Клавиатуре</title>
            <item identifier="speedTest" identifierref="speedTestResource">
                <title>Тест скорости</title>
                <imsss:sequencing IDRef="commonSeqRules">
                    <imsss:controlMode choice="true" choiceExit="true" forwardOnly="false" useCurrentAttemptObjectiveInfo="true" useCurrentAttemptProgressInfo="true"/>
                    <imsss:objectives>
                        <imsss:primaryObjective objectiveID="solo.objTest">
                        </imsss:primaryObjective>
                    </imsss:objectives>
                </imsss:sequencing>
            </item>
            <item identifier="startExam" identifierref="startExamResource">
                <title>Начальный экзамен</title>
                <imsss:sequencing IDRef="commonSeqRules">
                    <imsss:controlMode choice="true" choiceExit="true" forwardOnly="false" useCurrentAttemptObjectiveInfo="true" useCurrentAttemptProgressInfo="true"/>
                    <imsss:objectives>
                        <imsss:primaryObjective objectiveID="solo.objStartExam">
            </imsss:primaryObjective>

                    </imsss:objectives>
                </imsss:sequencing>
            </item>
            <item identifier="exercise0" identifierref="exercise0Resource">
                <title>Вступление</title>
                <imsss:sequencing IDRef="commonSeqRules">
                    <imsss:controlMode choice="true" choiceExit="true" forwardOnly="false" useCurrentAttemptObjectiveInfo="true" useCurrentAttemptProgressInfo="true"/>
                    <imsss:sequencingRules>
                        <imsss:preConditionRule>
                            <imsss:ruleConditions conditionCombination="any">
                                <imsss:ruleCondition referencedObjective="objPrev" operator="not" condition="satisfied"/>
                                <imsss:ruleCondition referencedObjective="objPrev" operator="not" condition="objectiveStatusKnown"/>
                            </imsss:ruleConditions>
                            <!-- <imsss:ruleAction action="hiddenFromChoice"/> -->
                        </imsss:preConditionRule>
                    </imsss:sequencingRules>

                    <imsss:objectives>
                        <imsss:primaryObjective objectiveID="solo.obj0">
                        </imsss:primaryObjective>
                        <imsss:objective objectiveID="objPrev">
                            <imsss:mapInfo targetObjectiveID="solo.objStartExam" readSatisfiedStatus="true" writeSatisfiedStatus="false"/>
                        </imsss:objective>

                    </imsss:objectives>
                </imsss:sequencing>
            </item>
            <item identifier="exercise1" identifierref="exercise1Resource">
                <title>Упражнение 1</title>
                <imsss:sequencing IDRef="commonSeqRules">
                    <imsss:controlMode choice="true" choiceExit="true" forwardOnly="false" useCurrentAttemptObjectiveInfo="true" useCurrentAttemptProgressInfo="true"/>
                    <imsss:sequencingRules>
                        <imsss:preConditionRule>
                            <imsss:ruleConditions conditionCombination="any">
                                <imsss:ruleCondition referencedObjective="objPrev" operator="not" condition="satisfied"/>
                                <imsss:ruleCondition referencedObjective="objPrev" operator="not" condition="objectiveStatusKnown"/>
                            </imsss:ruleConditions>
                            <!-- <imsss:ruleAction action="hiddenFromChoice"/> -->
                        </imsss:preConditionRule>
                    </imsss:sequencingRules>

                    <imsss:objectives>
                        <imsss:primaryObjective objectiveID="solo.obj1">
            </imsss:primaryObjective>
                        <imsss:objective objectiveID="solo.obj1.1">
            </imsss:objective>
                        <imsss:objective objectiveID="solo.obj1.2">
            </imsss:objective>
                        <imsss:objective objectiveID="solo.obj1.3">
            </imsss:objective>
                        <imsss:objective objectiveID="solo.obj1.4">
            </imsss:objective>
                        <imsss:objective objectiveID="solo.obj1.5">
            </imsss:objective>
                        <imsss:objective objectiveID="solo.obj1.6">
            </imsss:objective>
                        <imsss:objective objectiveID="objPrev">
                            <imsss:mapInfo targetObjectiveID="solo.objStartExam" readSatisfiedStatus="true" writeSatisfiedStatus="false"/>
                        </imsss:objective>

                    </imsss:objectives>
                </imsss:sequencing>
            </item>
            <item identifier="exercise2" identifierref="exercise2Resource">
                <title>Упражнение 2</title>
                <imsss:sequencing IDRef="commonSeqRules">
                    <imsss:controlMode choice="true" choiceExit="true" forwardOnly="false" useCurrentAttemptObjectiveInfo="true" useCurrentAttemptProgressInfo="true"/>
                    <imsss:sequencingRules>
                        <imsss:preConditionRule>
                            <imsss:ruleConditions conditionCombination="any">
                                <imsss:ruleCondition referencedObjective="objPrev" operator="not" condition="satisfied"/>
                                <imsss:ruleCondition referencedObjective="objPrev" operator="not" condition="objectiveStatusKnown"/>
                            </imsss:ruleConditions>
                            <!-- <imsss:ruleAction action="hiddenFromChoice"/> -->
                        </imsss:preConditionRule>
                    </imsss:sequencingRules>
                    <imsss:objectives>
                        <imsss:primaryObjective objectiveID="solo.obj2">
            </imsss:primaryObjective>
                        <imsss:objective objectiveID="solo.obj2.1">
            </imsss:objective>
                        <imsss:objective objectiveID="solo.obj2.2">
            </imsss:objective>
                        <imsss:objective objectiveID="solo.obj2.3">
            </imsss:objective>
                        <imsss:objective objectiveID="solo.obj2.4">
            </imsss:objective>
                        <imsss:objective objectiveID="objPrev">
                            <imsss:mapInfo targetObjectiveID="solo.obj1" readSatisfiedStatus="true" writeSatisfiedStatus="false"/>
                        </imsss:objective>
                    </imsss:objectives>
                </imsss:sequencing>
            </item>
        </organization>
    </organizations>
    <resources>
        <resource identifier="speedTestResource" type="webcontent" adlcp:scormType="sco" href="htm/test.htm">

            <file href="runtime.xml"/>

            <file href="htm/test.htm"/>
            <dependency identifierref="css"/>
            <dependency identifierref="flash"/>
            <dependency identifierref="img"/>
            <dependency identifierref="image"/>
            <dependency identifierref="caricature"/>
            <dependency identifierref="staff"/>
            <dependency identifierref="pics"/>
            <dependency identifierref="js"/>
        </resource>
        <resource identifier="startExamResource" type="webcontent" adlcp:scormType="sco" href="htm/startExam.htm">

            <file href="runtime.xml"/>

            <file href="htm/startExam.htm"/>
            <dependency identifierref="css"/>
            <dependency identifierref="flash"/>
            <dependency identifierref="img"/>
            <dependency identifierref="image"/>
            <dependency identifierref="caricature"/>
            <dependency identifierref="staff"/>
            <dependency identifierref="pics"/>
            <dependency identifierref="js"/>
        </resource>
        <resource identifier="exercise0Resource" type="webcontent" adlcp:scormType="sco" href="htm/000.htm">

            <file href="runtime.xml"/>

            <file href="htm/000.htm"/>
            <dependency identifierref="css"/>
            <dependency identifierref="flash"/>
            <dependency identifierref="img"/>
            <dependency identifierref="image"/>
            <dependency identifierref="caricature"/>
            <dependency identifierref="staff"/>
            <dependency identifierref="pics"/>
            <dependency identifierref="js"/>
        </resource>
        <resource identifier="exercise1Resource" type="webcontent" adlcp:scormType="sco" href="htm/001.htm">

            <file href="runtime.xml"/>

            <file href="htm/001.htm"/>
            <dependency identifierref="css"/>
            <dependency identifierref="flash"/>
            <dependency identifierref="img"/>
            <dependency identifierref="image"/>
            <dependency identifierref="caricature"/>
            <dependency identifierref="staff"/>
            <dependency identifierref="pics"/>
            <dependency identifierref="js"/>
        </resource>
        <resource identifier="exercise2Resource" type="webcontent" adlcp:scormType="sco" href="htm/002.htm">

            <file href="runtime.xml"/>

            <file href="htm/002.htm"/>
            <file href="js/init.js"/>
            <dependency identifierref="css"/>
            <dependency identifierref="flash"/>
            <dependency identifierref="img"/>
            <dependency identifierref="image"/>
            <dependency identifierref="caricature"/>
            <dependency identifierref="staff"/>
            <dependency identifierref="pics"/>
            <dependency identifierref="js"/>
        </resource>
        <resource identifier="css" type="webcontent" adlcp:scormType="asset">
            <file href="css/fields.cs"/>
            <file href="css/main.css"/>
        </resource>
        <resource identifier="flash" type="webcontent" adlcp:scormType="asset">
            <file href="flash/SoloType.swf"/>
        </resource>
        <resource identifier="img" type="webcontent" adlcp:scormType="asset">
            ... some files here ...
        </resource>
        <resource identifier="caricature" type="webcontent" adlcp:scormType="asset">
            <file href="caricature/1.jpg"/>
            <file href="caricature/2.jpg"/>
            <file href="caricature/3.jpg"/>
            <file href="caricature/4.jpg"/>
            <file href="caricature/5.jpg"/>
            <file href="caricature/6.jpg"/>
            <file href="caricature/7.jpg"/>
            <file href="caricature/8.jpg"/>
            <file href="caricature/9.jpg"/>
            <file href="caricature/10.jpg"/>
            <file href="caricature/11.jpg"/>
            <file href="caricature/12.jpg"/>
            <file href="caricature/13.jpg"/>
            <file href="caricature/14.jpg"/>
            <file href="caricature/15.jpg"/>
            <file href="caricature/16.jpg"/>
            <file href="caricature/17.jpg"/>
            <file href="caricature/18.jpg"/>
            <file href="caricature/19.jpg"/>
            <file href="caricature/20.jpg"/>
            <file href="caricature/21.jpg"/>
            <file href="caricature/22.jpg"/>
            <file href="caricature/23.jpg"/>
            <file href="caricature/24.jpg"/>
            <file href="caricature/25.jpg"/>
            <file href="caricature/26.jpg"/>
            <file href="caricature/27.jpg"/>
            <file href="caricature/28.jpg"/>
            <file href="caricature/29.jpg"/>
            <file href="caricature/30.jpg"/>
            <file href="caricature/31.jpg"/>
            <file href="caricature/32.jpg"/>
            <file href="caricature/33.jpg"/>
            <file href="caricature/34.jpg"/>
            <file href="caricature/35.jpg"/>
            <file href="caricature/36.jpg"/>
            <file href="caricature/37.jpg"/>
            <file href="caricature/38.jpg"/>
            <file href="caricature/39.jpg"/>
            <file href="caricature/40.jpg"/>
            <file href="caricature/41.jpg"/>
            <file href="caricature/42.jpg"/>
            <file href="caricature/43.jpg"/>
            <file href="caricature/44.jpg"/>
            <file href="caricature/45.jpg"/>
            <file href="caricature/46.jpg"/>
            <file href="caricature/47.jpg"/>
            <file href="caricature/48.jpg"/>
            <file href="caricature/49.jpg"/>
            <file href="caricature/50.jpg"/>
            <file href="caricature/51.jpg"/>
            <file href="caricature/52.jpg"/>
            <file href="caricature/53.jpg"/>
            <file href="caricature/54.jpg"/>
            <file href="caricature/55.jpg"/>
            <file href="caricature/56.jpg"/>
            <file href="caricature/57.jpg"/>
            <file href="caricature/58.jpg"/>
            <file href="caricature/59.jpg"/>
            <file href="caricature/60.jpg"/>
            <file href="caricature/61.jpg"/>
            <file href="caricature/62.jpg"/>
            <file href="caricature/63.jpg"/>
            <file href="caricature/64.jpg"/>
            <file href="caricature/65.jpg"/>
            <file href="caricature/66.jpg"/>
            <file href="caricature/67.jpg"/>
            <file href="caricature/68.jpg"/>
            <file href="caricature/69.jpg"/>
            <file href="caricature/70.jpg"/>
            <file href="caricature/71.jpg"/>
            <file href="caricature/72.jpg"/>
            <file href="caricature/73.jpg"/>
            <file href="caricature/74.jpg"/>
            <file href="caricature/75.jpg"/>
            <file href="caricature/76.jpg"/>
            <file href="caricature/77.jpg"/>
            <file href="caricature/78.jpg"/>
            <file href="caricature/79.jpg"/>
            <file href="caricature/80.jpg"/>
            <file href="caricature/81.jpg"/>
            <file href="caricature/82.jpg"/>
            <file href="caricature/83.jpg"/>
            <file href="caricature/84.jpg"/>
            <file href="caricature/85.jpg"/>
            <file href="caricature/86.jpg"/>
            <file href="caricature/87.jpg"/>
            <file href="caricature/88.jpg"/>
            <file href="caricature/89.jpg"/>
            <file href="caricature/90.jpg"/>
            <file href="caricature/91.jpg"/>
            <file href="caricature/92.jpg"/>
            <file href="caricature/93.jpg"/>
            <file href="caricature/94.jpg"/>
            <file href="caricature/95.jpg"/>
            <file href="caricature/96.jpg"/>
            <file href="caricature/97.jpg"/>
            <file href="caricature/98.jpg"/>
            <file href="caricature/99.jpg"/>
            <file href="caricature/100.jpg"/>
        </resource>
        <resource identifier="staff" type="webcontent" adlcp:scormType="asset">
            <file href="staff/1.jpg"/>
            <file href="staff/2.jpg"/>
            <file href="staff/3.jpg"/>
            <file href="staff/4.jpg"/>
            <file href="staff/5.jpg"/>
            <file href="staff/6.jpg"/>
            <file href="staff/7.jpg"/>
            <file href="staff/8.jpg"/>
            <file href="staff/9.jpg"/>
            <file href="staff/10.jpg"/>
            <file href="staff/11.jpg"/>
        </resource>
        <resource identifier="pics" type="webcontent" adlcp:scormType="asset">
            <file href="pics/anekdot_bottom.png"/>
            <file href="pics/anekdot_bottom_left.png"/>
            <file href="pics/anekdot_bottom_right.png"/>
            <file href="pics/anekdot_left.png"/>
            <file href="pics/anekdot_right.png"/>
            <file href="pics/anekdot_top.png"/>
            <file href="pics/anekdot_top_left.png"/>
            <file href="pics/anekdot_top_left1.png"/>
            <file href="pics/anekdot_top_left2.png"/>
            <file href="pics/anekdot_top_right.png"/>
            <file href="pics/edit.png"/>
            <file href="pics/envelope.gif"/>
            <file href="pics/envelope1.gif"/>
            <file href="pics/exercise_bottom.png"/>
            <file href="pics/exercise_bottom_left.png"/>
            <file href="pics/exercise_bottom_right.png"/>
            <file href="pics/exercise_left.png"/>
            <file href="pics/exercise_right.png"/>
            <file href="pics/exercise_top.png"/>
            <file href="pics/exercise_top_left.png"/>
            <file href="pics/exercise_top_left1.png"/>
            <file href="pics/exercise_top_left2.png"/>
            <file href="pics/exercise_top_right.png"/>
            <file href="pics/letter_bottom.png"/>
            <file href="pics/letter_bottom_left.png"/>
            <file href="pics/letter_bottom_right.png"/>
            <file href="pics/letter_left.png"/>
            <file href="pics/letter_right.png"/>
            <file href="pics/letter_top.png"/>
            <file href="pics/letter_top_left.png"/>
            <file href="pics/letter_top_left1.png"/>
            <file href="pics/letter_top_left12.png"/>
            <file href="pics/letter_top_left2.png"/>
            <file href="pics/letter_top_right.png"/>
            <file href="pics/logo.png"/>
            <file href="pics/menu_blue_bottom_left_corner.png"/>
            <file href="pics/menu_blue_bottom_right_corner.png"/>
            <file href="pics/menu_blue_top_left_corner.png"/>
            <file href="pics/menu_blue_top_right_corner.png"/>
            <file href="pics/mixanat.gif"/>
            <file href="pics/mix_quote_green_bottom.png"/>
            <file href="pics/mix_quote_green_bottom_left.png"/>
            <file href="pics/mix_quote_green_bottom_right.png"/>
            <file href="pics/mix_quote_green_left.png"/>
            <file href="pics/mix_quote_green_right.png"/>
            <file href="pics/mix_quote_green_top.png"/>
            <file href="pics/mix_quote_green_top_left.png"/>
            <file href="pics/mix_quote_green_top_right.png"/>
            <file href="pics/nabiraem.gif"/>
            <file href="pics/quote_green_bottom_left.png"/>
            <file href="pics/quote_green_bottom_right.png"/>
            <file href="pics/quote_green_top_left.png"/>
            <file href="pics/quote_green_top_right.png"/>
            <file href="pics/repeat_bottom_left.png"/>
            <file href="pics/repeat_bottom_right.png"/>
            <file href="pics/repeat_top_left.png"/>
            <file href="pics/repeat_top_right.png"/>
            <file href="pics/separator.gif"/>
            <file href="pics/separator1.gif"/>
            <file href="pics/green_border/angle_left.png"/>
            <file href="pics/green_border/angle_right.png"/>
            <file href="pics/green_border/bottom.png"/>
            <file href="pics/green_border/left.png"/>
            <file href="pics/green_border/right.png"/>
            <file href="pics/green_border/top.png"/>
            <file href="pics/image/corner_bottom_left.png"/>
            <file href="pics/image/corner_bottom_right.png"/>
            <file href="pics/image/corner_top_left.png"/>
            <file href="pics/image/corner_top_right.png"/>
            <file href="pics/image/image_bottom.png"/>
            <file href="pics/image/image_bottom_left.png"/>
            <file href="pics/image/image_bottom_right.png"/>
            <file href="pics/image/image_left.png"/>
            <file href="pics/image/image_right.png"/>
            <file href="pics/image/image_top.png"/>
            <file href="pics/image/image_top_left.png"/>
            <file href="pics/image/image_top_right.png"/>
            <file href="pics/line_round/line_round_bottom.png"/>
            <file href="pics/line_round/line_round_top.png"/>
        </resource>
        <resource identifier="js" type="webcontent" adlcp:scormType="asset">
            <file href="js/requests.js"/>
            <file href="js/StringUtils.js"/>
            <file href="js/arrows.js"/>
            <file href="js/captions.js"/>
            <file href="js/closeRedoButtons.js"/>
            <file href="js/common.js"/>
            <file href="js/commonHTML.js"/>
            <file href="js/convert.js"/>
            <file href="js/environment.js"/>
            <file href="js/errorCounter.js"/>
            <file href="js/exercise.js"/>
            <file href="js/fields.js"/>
            <file href="js/interface.js"/>
            <file href="js/keyboard.js"/>
            <file href="js/miksWaiter.js"/>
            <file href="js/miksanatik.js"/>
            <file href="js/offlineParams.js"/>
            <file href="js/panels.js"/>
            <file href="js/photoCaptions.js"/>
            <file href="js/progressObjects.js"/>
            <file href="js/resultPage.js"/>
            <file href="js/utils.js"/>
            <file href="js/writer.js"/>
            <file href="js/scormFunctions.js"/>
            <file href="js/scormExchange.js"/>
            <file href="js/scormUtils.js"/>
            <file href="js/init.js"/>
            <file href="js/soloTypeFlash.js "/>
            <file href="scormdata/rus/errors.js"/>
            <file href="scormdata/rus/exam.js"/>            
            <file href="scormdata/rus/exercises.js"/>
            <file href="scormdata/rus/quotations.js"/>
            <file href="scormdata/rus/results.js"/>
            <file href="scormdata/rus/speedTest.js"/>
            <file href="scormdata/rus/speedTestResults.js"/>
        </resource>
    </resources>
    <imsss:sequencingCollection>
        <imsss:sequencing ID="commonSeqRules">
            <!-- This course doesn't rollup a score -->
            <imsss:rollupRules objectiveMeasureWeight="0"/>
            <!-- Set these values to prevent content from accidently being auto-completed/satisfied-->
            <imsss:deliveryControls completionSetByContent="true" objectiveSetByContent="true"/>
        </imsss:sequencing>
    </imsss:sequencingCollection>
    <imsss:sequencing>
        <imsss:controlMode choice="true" flow="true"/>
    </imsss:sequencing>
</manifest> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-10T07:10:21.987

Collections in SCORM (i.e. cmi.----.n.----) require that certain properties of a record be set before you can read or write the rest of that record. Until that property is set, you're not allowed to get or set other values, and you'll get the `408 Data Model Dependency Not Established` error. Basically, setting the dependency property is what creates the record. Mostly that property is `.id`.

I'd guess this was done in order to make the job easier for an LMS/player that stores records by ID - which means it would need the ID before it can store anything.

Rustici's (scorm.com) player is built to be lenient. Many other players aren't.

The properties that are dependency properties:

*   cmi.objectives.n.id
*   cmi.interactions.n.id
*   cmi.interactions.n.objectives.m.id
*   cmi.comments_from_learner.n.comment
*   cmi.comments_from_learner.n.location
*   cmi.comments_from_learner.n.timestamp

(Those last three basically mean that you can set the properties of a comments_from_learner record in any order).

In short, you have to do something like this:

```
setValue( "cmi.objectives.0.id", "YOUR_OBJECTIVE_ID" );
setValue( "cmi.objectives.0.completion_status", "completed" ); 
```

# assembly - why my assembly program is not creating/removing directory/file

> ID：16196307
> 
> 赞同：0
> 
> 时间：2013-04-24T15:40:12.560
> 
> 标签：assembly, dos, masm

My teacher assigned me a project to write a DOS program in assembly. The program should create/remove/rename file/directory and change file attributes. I am using masm611. I 've included dos.inc in my program. The program is divided in two files, 1st is pro.asm and 2nd is code.asm.

//dos.inc

```
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;
;  Syntax:    @MkDir path [,segment]
;
;             @RmDir path [,segment]
;
;             @ChDir path [,segment]
;
;  Summary:   Creates, deletes, or changes to the specified directory
;
;  Arguments: <path>        Offset of ASCIIZ string containing
;                           directory. Must be offset address.
;
;             <segment>     Segment of path; DS if none given.
;
;  Returns:   If carry: set, error code in AX
;
;  Modifies:  AX, DX; DS if segment changed
;
;  Uses:      Interrupt 21h Function 39h
;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
@MkDir MACRO path:REQ, segmnt
    __LdAdr dx, <path>
    IFNB    <segmnt>
        __LdSeg ds, <segmnt>
    ENDIF
    mov     ah, 39h
    int     21h
ENDM

; 3Ah
@RmDir MACRO path:REQ, segmnt
    __LdAdr dx, <path>
    IFNB    <segmnt>
        __LdSeg ds, <segmnt>
    ENDIF
    mov     ah, 3Ah
    int     21h
ENDM

; 3Bh
@ChDir MACRO path:REQ, segmnt
    __LdAdr dx, <path>
    IFNB    <segmnt>
        __LdSeg ds, <segmnt>
    ENDIF
    mov     ah, 3Bh
    int     21h
ENDM

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;
;  Syntax:    @DelFile path [,segment]
;
;  Summary:   Deletes a specified file
;
;  Arguments: <path>        Offset of ASCIIZ file specification. Must
;                           be an offset address.
;
;             <segment>     Segment of path; DS if none given.
;
;  Returns:   If carry: set, error code in AX
;
;  Modifies:  AX, DX; DS if segment changed
;
;  Uses:      Interrupt 21h Function 41h
;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
@DelFile MACRO path:REQ, segmnt
    __LdAdr dx, <path>
    IFNB    <segmnt>
        __LdSeg ds, <segmnt>
    ENDIF
    mov     ah, 41h
    int     21h
ENDM

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;
;  Syntax:    @MakeFile path [,[attrib] [,[segment] [,kind]]]
;
;  Summary:   Creates a file
;
;  Arguments: <path>        ASCIIZ string of file. Must be an offset
;                           address.
;
;             <attrib>      File attribute; 0 is default if none given.
;
;             <segment>     Segment of address string; DS if not given.
;
;             <kind>        If none given, a file is created even if one
;                           already exists. Under DOS 3.x, "tmp" can be
;                           given to create a unique file or "new" to
;                           create a file only if one doesn't already
;                           exist.
;
;  Returns:   If carry: clear, file handle in AX
;
;  Modifies:  AX, DX, CX; DS if segment changed
;
;  Uses:      Interrupt 21h Function 3Ch, 5Ah, 5Bh
;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
@MakeFile MACRO path:REQ, atrib:=<0>, segmnt, kind
    IFDIF   <atrib>, <0>
        mov     cx, atrib
    ELSE
        sub     cx, cx
    ENDIF
    __LdAdr dx, <path>
    IFNB    <segmnt>
        __LdSeg ds, <segmnt>
    ENDIF
    IFIDNI  <kind>, <tmp>
        mov     ah, 5Ah
    ELSEIFIDNI <kind>, <new>
        mov    ah, 5Bh
    ELSE
        mov    ah, 3Ch
    ENDIF
    int     21h
ENDM 
```

// pro.asm

```
enter code here
include dos.inc
include bios.inc
.model small
.stack 100h
.data

LF EQU 0ah
CR EQU 0dh
MSG1 DB 0ah,0dh,"1\. Create directory",LF,CR
MSG2 DB "2\. Create file",LF,CR
MSG3 DB "3\. Delete directory",LF,CR
MSG4 DB "4\. Delete file",LF,CR
MSG5 DB "5\. Rename directory",LF,CR
MSG6 DB "6\. Rename file",LF,CR
MSG7 DB "7\. Change attributes",LF,CR
MSG8 DB "8\. Exit $",LF,CR
PATH DB "c:\mydir",0
PATHF DB "C:\abc.exe",0
AnyKeyMsg DB LF,CR,"Press any key to continue...$",LF,CR

.code
main PROC

MOV AX,@DATA
MOV DS,AX

CALL clearAllReg
CALL start

main ENDP

include code.asm

End main 
```

// code.asm

```
start PROC

;this function starts the program
;input=none ouput=none
;MOV ah,0ah
;MOV DX,SI
;INT 21h
do:

    @cls
    CALL showDate
    CALL showMenu
    CALL newLine
    CALL getCharInput
    CMP BL,49   ;49 is ASCI for 1
    JE CDirectory   ;if BL is equals to 49 then jump to create directory
    CMP BL,50   ;50 is ASCI for 2
    JE CFile    ;if BL is equals to 50 then jump to create file
    CMP BL,51   ;51 is ASCI for 3
    JE DDirectory   ;if BL is equals to 51 then jump to delete directory
    CMP BL,52   ;52 is ASCI for 4
    JE DFile    ;if BL is equals to 52 then jump to delete file
    CMP BL,53   ;53 is ASCI for 5
    JE RDirectory   ;if BL is equals to 53 then jump to rename directory
    CMP BL,54   ;54 is ASCI for 6
    JE RFile    ;if BL is equals to 54 then jump to rename file
    CMP BL,55   ;55 is ASCI for 7
    JE ChAttributes ;if BL is equals to 55 then jump to change attributes of a file
    CMP BL,56   ; 56 is ASCI for 8
    JE Exit     ; until BL equals to 56
    JMP do

CDirectory:

    CALL makeDir
    JMP do

CFile:

    CALL makeFile
    JMP do

DDirectory:

    CALL rmDir
    JMP do

DFile:
    CALL rmFile
    JMP do

RDirectory:

    CALL rnDir
    JMP do
RFile:

    CALL rnFile
    JMP do

ChAttributes:

    CALL chFAttrib
    JMP do

Exit:
    @exit
RET

start EndP

clearAllReg PROC

;this function sets AX,BX,CX and DX equals to 0
;input=none output=none

MOV AX,0
MOV BX,0
MOV CX,0
MOV DX,0
RET

clearAllReg EndP

showMenu PROC

;this function show menu on the screen
;input=none output=DX

LEA DX,MSG1
MOV AH,9
INT 21h
RET

showMenu EndP

makeDir PROC
;MOV ah,2
;MOV dl,'a'
;INT 21h
MOV AX,offset PATH
@MkDir AX
CALL pressAnyKey
RET
makeDir EndP

makeFile PROC
;MOV ah,2
;MOV dl,'b'
;INT 21h
MOV AX,offset PATHF
@MakeFile AX
CALL pressAnyKey
RET
makeFile EndP

rmDir PROC
;MOV ah,2
;MOV dl,'c'
;INT 21h
MOV AX,offset PATH
@RmDir AX
CALL pressAnyKey
RET
rmDir EndP

rmFile PROC
;MOV ah,2
;MOV dl,'d'
;INT 21h
MOV AX,offset PATHF
@DelFile AX
CALL pressAnyKey
RET
rmFile EndP

rnDir PROC
MOV ah,2
MOV dl,'e'
INT 21h
CALL pressAnyKey
RET
rnDir EndP

rnFile PROC
MOV ah,2
MOV dl,'f'
INT 21h
CALL pressAnyKey
RET
rnFile EndP

chFAttrib PROC
MOV ah,2
MOV dl,'g'
INT 21h
CALL pressAnyKey
RET
chFAttrib EndP

newLine PROC

;Adds new line
;Input=none output=none

MOV DL,LF
MOV AH,2
INT 21h
MOV DL,CR
INT 21h
RET

newLine ENDP

getCharInput PROC

;this function takes input from user
;input=none output=BX

PUSH AX     ;saving state
CALL newLine
MOV dl,'?'
MOV AH,2
INT 21h
MOV AH,1
INT 21h
MOV BX,AX
POP AX      ;restoring state
RET

getCharInput EndP

pressAnyKey PROC
PUSH AX     ;Saving state

LEA DX,AnyKeyMsg
MOV AH,9
INT 21h
MOV AH,1
INT 21h

POP AX      ;restoring state
RET
pressAnyKey EndP

showDate PROC

@GetTime
RET
showDate EndP 
```

# php - php代码更改获取值

> ID：16196309
> 
> 赞同：-1
> 
> 时间：2013-04-24T15:40:16.903
> 
> 标签：php

我有一个代码，我使用以下代码将手机号码拉到新页面

```
<a href="control_clientinfo.php?member_id=<? echo $rows['member_id']; ?>" 
class="update">Look Up</a> 
```

问题是我已经在 SQL 数据库中获得了数百个数字，但系统要求我使用以下格式

27827123455 在这个阶段，我们所有的数字都以这种格式保存 0827123455。有没有我可以编写代码来自动删除 0 并在其前面添加 27，或者将所有数字更改为所需的格式会更容易吗

这是我需要的网址

```
www.page.co.za/control_clientinfo.php?27827123455 
```

在这个阶段，我得到以下格式

```
www.page.co.za/control_clientinfo.php?0827123455 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T15:44:08.687

能不能这么简单：

```
$number = "0827..."
$other_number = "27".substr($number, 1); 
```

在你的情况下：

```
<a href="control_clientinfo.php?member_id=<? echo "27".substr($rows['member_id'], 1); ?>" 
class="update">Look Up</a> 
```

# python - Python 中 Counter 的前 20 个值

> ID：16196310
> 
> 赞同：0
> 
> 时间：2013-04-24T15:40:18.473
> 
> 标签：python, counter

我的问题与我之前的问题类似：[Python list help (incrementing count, appending)](https://stackoverflow.com/questions/16172268/python-list-help-incrementing-count-appending)。我接受的答案效果很好。然而，这一次我有一个不同的问题。

我正在从 json 文件中解析一个字符串，进行一些清理，然后将其附加一个新字符串。我需要获取每个单词的计数器（这使它成为一个唯一的列表，出现的计数器被更新），按从高到低排序（我相信我需要在这里使用 most_common）然后将列表限制为 20。我可以所有这些都在 JavaScript 中完成，而不是在 python 中。

详细地说，我再次通过一个 for 循环来从字符串（json 字符串文件）中获取每个字符串，就像这样。

```
# Counter for each word.
words = Counter();

for e in strings:
    # I am cleaning up the string here for unwanted chars, make it lower case
    # and append it to a new string variable.
    # if I were to print the new string variable it will look like this: 
    # hello test another test append hi hai hello hello

# i know I need to call words.update
# should I run a for loop in my new string variable  for each word? 
```

还有我怎么能把它限制在20？

我想生成的是这样的：

```
word, count
hello 3
test 2
another 1
append 1
hai 1
hi 1 
```

任何建议都会非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T15:42:26.153

如果您有单词*列表*`.update()`，则可以使用以下方法：

```
words.update(some_list_of_words) 
```

您也可以传入生成器表达式：

```
words.update(word.lower() for word in e.split()) 
```

会将字符串拆分为`e`空格上的单独单词，然后将每个单词小写并计算这些单词。

`.most_common()`接受一个参数，返回的最大项目数：

```
words.most_common(20) 
```

使用较少的单词集进行演示，将其限制为前 3 个最常见的单词：

```
>>> from collections import Counter
>>> words = Counter('spam ham eggs baz foo bar baz spam ham eggs spam spam bacon eggs ham spam spam spam eggs ham'.split())
>>> words.most_common(3)
[('spam', 7), ('ham', 4), ('eggs', 4)] 
```

# php - How to implement facebook login and registration

> ID：16196311
> 
> 赞同：1
> 
> 时间：2013-04-24T15:40:20.250
> 
> 标签：php, facebook, facebook-php-sdk

I am trying to use facebook login and registration on my web page. My webpage is curerntly hosted on localhost and both Facebook login and Register CODE are working properly. But i cannot figure out how do i use that data to store and write php code.

eg. Code for registration form

```
<iframe src="https://www.facebook.com/plugins/registration?
         client_id=&
         redirect_uri=http://localhost:90/store.php&
         fields=name,birthday,gender,location,email"
    scrolling="auto"
    frameborder="no"
    style="border:none"
    allowTransparency="true"
    width="100%"
    height="330">
</iframe> 
```

Code for Login button

```
 <div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

<div class="fb-login-button" data-show-faces="true" data-width="200" data-max-rows="1"></div> 
```

Both are displaying and working respectively, but how do i use these variables?

How do i check whether user is already logged in? if not, how do i make him login and redirect to another page with his info. Mainly i dont see any variables in this code to use.

Any help?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T18:54:38.633

您是否阅读了注册插件文档： http: [//developers.facebook.com/docs/plugins/registration/](http://developers.facebook.com/docs/plugins/registration/) 您也可以在那里找到示例。

# c++ - OpenCV: how to set alpha transparency of a pixel

> ID：16196312
> 
> 赞同：6
> 
> 时间：2013-04-24T15:40:23.210
> 
> 标签：c++, opencv, visualization

I have an image I am trying to segment by colouring each pixel either red green or blue. I have calculated a confidence score for each pixel and want to adjust the alpha transparency of the pixel to reflect confidence, i.e. low confidence means almost transparent. Is there a way to do this in OpenCV? If not can anyone suggest a minimally invasive library (C++)?

I have tries using a 4 channel 8-bit `Mat` as suggested by Aurellius, here is the code:

```
cv::Mat m = cv::Mat(20,20, CV_8UC4);
    for(int i = 0; i < m.rows; i++){
        for(int j = 0; j < m.cols; j++){
            Vec4b& v = m.at<Vec4b>(i,j);
            v[0] = 255;
            v[1] = 0;
            v[2] = 0;
            v[3] = 0.5;
        }
    }

    imwrite("alpha.png", m);
    namedWindow("m");
    imshow("m", m);
    waitKey(0); 
```

The image shown is just all blue (no transparency) and the image just fully transparent.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T15:56:31.890

有很多方法可以做到这一点。一种可能的方法是访问和修改每个单独的像素。假设`image`是一个四通道、8 位`cv::Mat`：

```
auto& pixel = image.at<cv::Vec4b>(i,j);
pixel[3] = confidence; 
```

其中`i`和`j`是图像中像素的索引。

还有其他可能更优雅的方法，但它们将取决于您当前的代码。

**更新：** 您描述的行为是可以预料的。[显然](http://jepsonsblog.blogspot.com/2012/10/overlay-transparent-image-in-opencv.html) `cv::imshow()`不支持透明度。这解释了为什么您显示的图像都是蓝色的。

至于保存的图像，重要的是要记住图像的类型是`CV_8UC4`。这意味着每个通道元素都存储为`uchar`. 分配一个值`0.5`将截断为零，因此保存的图像是完全透明的。

如果您的置信度是 range 中的浮点值，请将`[0,1]`其缩放 255 以将其置于 8 位图像支持的范围内。因此，

```
v[3] = 0.5; 
```

变成

```
v[3] = 0.5 * 255; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-26T10:52:28.147

我也遇到了同样的问题，但是什么时候绘制透明形状并通过混合图像来解决它。我在 OpenCV 的文档中找到了这个

```
if you want to paint semi-transparent shapes, you can paint them in a separate buffer and then blend it with the main image. 
```

为此，我建议您查看[此](http://docs.opencv.org/doc/tutorials/core/adding_images/adding_images.html)文档文章。希望这会有所帮助。

# jquery - 新闻滑块中的 Jquery .css

> ID：16196316
> 
> 赞同：1
> 
> 时间：2013-04-24T15:40:39.123
> 
> 标签：jquery

我制作了一个 Newsslider（有效），但我没有让按钮 1 到 4 相应地突出显示面板。他们只是一直在变化。我认为这与立即处理的 .css 有关。我假设我需要将 css 调用放入超时函数中。我只是不确定如何。

[http://jsfiddle.net/BkZyD/](http://jsfiddle.net/BkZyD/)

```
var whichpanel = 1;
$('.news-numbers div:nth-child(' + whichpanel + ')').css({
 'background-color': '#00F'
}, 5000);

 function newsslider() {
 if (whichpanel < 4) {
     $('.news-numbers div:nth-child(' + whichpanel + ')').css({
         'background-color': '#243239'
     }, 5000);

     $('.news-slider').delay(3000).animate({
         'margin-top': '-=250px'
     }, function () {

     });
     whichpanel += 1;
     $('.news-numbers div:nth-child(' + whichpanel + ')').css({
         'background-color': '#00F'
     }, 5000);

 } else if (whichpanel >= 4) {
     $('.news-slider').delay(3000).animate({
         'margin-top': '0'
     }, 2000);
     whichpanel = 1;
 }

 setTimeout(newsslider, 0);
}

newsslider(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T18:45:55.153

问题是[setTimeout](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)和 delay 的组合使用；使用它们，新闻滑块功能每 10 毫秒重复一次并`whichpanel`递增。您使用延迟和动画平滑地为您的 div 设置动画，但`news-numbers`变化是连续的。

对于连续循环，最好使用[setInterval](https://developer.mozilla.org/en-US/docs/DOM/window.setinterval)并增加`whichpanel`动画函数的内部。有了这个，您不需要任何其他延迟或超时。

代码：

```
 var whichpanel = 1;
 $('.news-numbers div:nth-child(1)').css({
     'background-color': 'red'
 });

 function newsslider() {

     if (whichpanel < 4) {

         $('.news-slider').animate({
             'margin-top': '-=250px'
         }, function () {
             whichpanel += 1;
             $('.news-numbers div').css({
                 'background-color': 'black'
             });
             $('.news-numbers div:nth-child(' + whichpanel + ')').css({
                 'background-color': 'red'
             });

         });

     } else {

         $('.news-slider').animate({
             'margin-top': '0'
         }, 1000, function () {
             whichpanel = 1;
             $('.news-numbers div').css({
                 'background-color': 'black'
             });
             $('.news-numbers div:nth-child(1)').css({
                 'background-color': 'red'
             });

         });
     }

 }

 var int = self.setInterval(function () {
     newsslider()
 }, 3000); 
```

这是一个工作小提琴：http: [//jsfiddle.net/IrvinDominin/p4U3B/2/](http://jsfiddle.net/IrvinDominin/p4U3B/2/)

# windows-phone-8 - 此手机上的开发者应用程序数量已达到上限

> ID：16196318
> 
> 赞同：9
> 
> 时间：2013-04-24T15:40:44.393
> 
> 标签：windows-phone-8, windows-phone

我启动了一个 Windows 8 手机应用程序并尝试使用新手机作为调试设备。

> 无法安装应用程序。此手机上的开发者应用程序数量已达到上限。请卸载开发者应用程序，然后重试。

我注册了设备，所以我不知道问题是什么。我读过其他人有同样的问题，但还没有找到解决方案。

（[Windows Phone 应用部署问题](http://www.kunal-chowdhury.com/2013/01/solution-to-resolve-windows-phone-app-deployment-issue.html)- 见最后评论）

**只是为了说清楚。我还没有在这款手机上安装任何其他应用程序。这是一部新手机** ，我也在我认识的人的另一部手机上尝试过（但相同类型的 Lumia 920）并得到同样的错误。

**编辑：**在 Windows Phone 开发中心注册后。即使在取消注册和重新注册手机后，我仍然会遇到同样的错误。奇怪的是，在我的手机账户下，*“你还没有注册任何手机”。*，但我做到了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T15:34:38.037

当您第一次使用开发者注册工具时，它会检查 DevCenter 的权限级别（有不同类型的帐户允许不同数量的解锁设备和允许的安装）。

然后，该工具解锁设备并设置这些权限。（确保设备本身已连接到互联网，不要依赖 USB 连接）。

如果您最近有权限级别更改或正在更改为新的开发者帐户，您可能需要在将旧权限从 DevCenter 帐户中删除后重新启动手机以清除旧权限。

总结一下：

1.  从 DevCenter 中删除手机
2.  打开开发者注册工具并插入手机。确认设备不再注册
3.  拔下并重置手机（设置>关于>重置）
4.  设置手机，连接互联网
5.  将手机重新插入注册工具
6.  重新注册设备

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-28T15:26:49.210

您可以在 Windows 应用商店的开发人员解锁手机上拥有无限数量的应用程序，但在任何时候都可以将 10 个开发人员应用程序加载到开发人员解锁手机上。达到该限制后，您必须从开发者手机中至少删除其中一个，才能将另一个加载到手机上。这是一个简单的解决方案，不需要注销和重新注册您的手机。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-18T13:11:48.227

检查应用程序列表并卸载所有其他开发者应用程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-26T16:35:57.910

我有全新的 Lumia 620 并且有同样的错误。原因是我在手机中设置的不同国家。我认为您的微软帐户和手机所在的国家/地区必须相同。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-24T20:47:47.380

我刚遇到这个，然后意识到我的 Windows 7 手机仍然以相同的名称注册。[我在https://dev.windowsphone.com/en-us/Account/Devices](https://dev.windowsphone.com/en-us/Account/Devices)删除了该注册，取消注册并重新注册了 Phone 8，它现在可以工作了。YMMV

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-12-23T05:11:16.653

转到您手机上的应用程序列表并卸载开发人员应用程序，因为您手机上的开发人员应用程序有限。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-11-04T17:07:29.453

我认为这一步对我有用。尝试手动删除项目的 Bin 和 obj 文件夹中的所有文件（不仅仅是在 VS 中清理项目）

几乎每天都将设备注册为开发人员仍然存在一些问题。您在部署时遇到此问题还是仅遇到错误？

# cuda - 在 GPU 上使用 CUDA 生成笛卡尔积

> ID：16196321
> 
> 赞同：4
> 
> 时间：2013-04-24T15:40:47.617
> 
> 标签：cuda, gpu, numerical-methods, cartesian

我想知道一种在 GPU 上使用 CUDA 生成笛卡尔积的方法。
简单案例：我们有两个列表：

```
 A = {0.0, 0.1, 0.2}   B = {0.0, 0.1, 0.2}
 A x B = C = { {0.0, 0.0}, {0.0, 0.1}, {0.0, 0.2}, {0.1, 0.0}, {0.1, 0.1} ...} 
```

如何在 GPU 中生成（列表列表）C？对于每个具有 M 值的 N 个列表，如何做到这一点。

我使用的术语可能不正确。我可以尝试解释我的意思：
我实际上是在尝试生成一个真值表：二进制真值表看起来像

二进制真值表看起来像

```
A     B
0     0
0     1
1     0
1     1 
```

其中 A 有两个值 {0, 1}，B 有 {0, 1}。在我的情况下，A 和 B 有两个以上的值，对于初学者来说，有 31 个值（0 - 30）。对于集合 A 中的每个值，集合 B 中有 31 个值，我需要枚举它们并将它们存储在内存中。

除此之外，我需要将算法扩展到 N 个列表而不是 2 个列表（A 和 B）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T20:12:00.357

我不认为这是有效的。只是功能：

```
#include <thrust/device_vector.h>
#include <thrust/pair.h>
#include <thrust/copy.h>
#include <iterator>

__global__ void cartesian_product(const int *a, size_t a_size,
                                  const int *b, size_t b_size,
                                  thrust::pair<int,int> *c)
{
  unsigned int idx = blockIdx.x * blockDim.x + threadIdx.x;

  if(idx < a_size * b_size)
  {
    unsigned int a_idx = idx / a_size;
    unsigned int b_idx = idx % a_size;

    c[idx] = thrust::make_pair(a[a_idx], b[b_idx]);
  }
}

int main()
{
  thrust::device_vector<int> a(3);
  a[0] = 0; a[1] = 1; a[2] = 2;

  thrust::device_vector<int> b(3);
  b[0] = 0; b[1] = 1; b[2] = 2;

  thrust::device_vector<thrust::pair<int,int> > c(a.size() * b.size());

  unsigned int block_size = 256;
  unsigned int num_blocks = (c.size() + (block_size - 1)) / block_size;

  cartesian_product<<<num_blocks, block_size>>>(thrust::raw_pointer_cast(a.data()), a.size(),
                                                thrust::raw_pointer_cast(b.data()), b.size(),
                                                thrust::raw_pointer_cast(c.data()));

  std::cout << "a: { ";
  thrust::copy(a.begin(), a.end(), std::ostream_iterator<int>(std::cout, ", "));
  std::cout << "}" << std::endl;

  std::cout << "b: { ";
  thrust::copy(b.begin(), b.end(), std::ostream_iterator<int>(std::cout, ", "));
  std::cout << "}" << std::endl;

  std::cout << "c: { ";
  for(unsigned int i = 0; i < c.size(); ++i)
  {
    thrust::pair<int,int> x = c[i];
    std::cout << "(" << x.first << ", " << x.second << "), ";
  }
  std::cout << "}" << std::endl;

  return 0;
} 
```

程序的输出：

```
$ nvcc cartesian_product.cu -run
a: { 0, 1, 2, }
b: { 0, 1, 2, }
c: { (0, 0), (0, 1), (0, 2), (1, 0), (1, 1), (1, 2), (2, 0), (2, 1), (2, 2), } 
```

# apache-flex - 弹性开关。从 Adob e Flex 4 过渡到 Apache Flex 4+

> ID：16196325
> 
> 赞同：3
> 
> 时间：2013-04-24T15:40:56.533
> 
> 标签：apache-flex, frameworks

我目前涉足 Adob​​e Flex 4 混凝土鞋，并且一直在监视 Apache Flex 一段时间。从战略的角度来看，坚持一个已弃用的项目是没有意义的，而 Apache 就是这样。

此问题适用于具有**第一手转换经验**的 SO 社区成员。
1) 痛吗？
2）值得吗？
3）如果你必须再做一次，你会做什么不同的事情？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T16:03:41.847

> 1) 痛吗？

不，不是。我必须提到我不再使用 FlashBuilder。在 IntelliJ Idea 中安装和使用 Apache Flex 就像解压缩 SDK（和一些依赖项）并告诉 IntelliJ 在哪里寻找它一样简单。

我怀疑将 Apache Flex SDK 集成到 FB 中会稍微复杂一些。但是来自 Apache Flex 的人专门创建了一个脚本来解决这个问题。

他们还创建了一个[安装程序](http://flex.apache.org/installer.html)，它将为您解压缩和下载可能的依赖项并解压缩它们。我从未使用过它（我使用[GradleFx](http://gradlefx.org/)来处理它，但它已经是 2.5 版并且已经过社区的彻底测试。

> 2）值得吗？

是的，如果只是因为当我发现框架中的错误时，我可以自己修复它，并且修复可能会集成到下一个版本中，这不会是三年后（Adobe的发布周期），而是2几个月后。Adobe Flex 是*“*开源的*”*（意味着您可以查看源代码），Apache Flex 是真正的开源（意味着您可以以任何您认为合适的方式做出贡献）。

> 3）如果你必须再做一次，你会做什么不同的事情？

我有一些使用 Apache Flex 运行的“企业”应用程序，但我还没有遇到过重大问题（我已经提交了一两个回归错误，但它们确实微不足道）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T16:03:10.170

从 Adob​​e 切换到 Apache Flex 不需要更改代码。由于 Adob​​e Flex SDK 的某些部分（例如 Flash/AIR 二进制文件）无法由 Apache 分发，因此设置 SDK 以在 IDE 中使用可能会出现问题。Apache Flex 创建了一个安装程序，使这个过程非常简单。

如果使用 Adob​​e Flex 对您来说是一双具体的鞋，那么 Apache Flex 可能也是。有工作让 Flex 以 HTML/JS 为目标作为输出，但它还处于早期阶段。今天，您仍然依赖于 Adob​​e 的 Flash 平台。

# r - 查找两个字符变量之间的公共子字符串

> ID：16196327
> 
> 赞同：14
> 
> 时间：2013-04-24T15:41:05.983
> 
> 标签：r, lcs

我有两个字符变量（对象名称），我想提取最大的公共子字符串。

```
a <- c('blahABCfoo', 'blahDEFfoo')
b <- c('XXABC-123', 'XXDEF-123') 
```

我想要以下结果：

```
[1] "ABC" "DEF" 
```

这些向量作为输入应该给出相同的结果：

```
a <- c('textABCxx', 'textDEFxx')
b <- c('zzABCblah', 'zzDEFblah') 
```

这些例子具有代表性。字符串包含标识元素，每个向量元素中的其余文本是常见的，但未知的。

是否有解决方案，在以下位置之一（按优先顺序）：

1.  碱基R

2.  推荐套餐

3.  CRAN 上可用的软件包

假设重复的答案不满足这些要求。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-24T17:18:39.830

这是一个 CRAN 包：

```
library(qualV)

sapply(seq_along(a), function(i)
    paste(LCS(strsplit(a[i], '')[[1]], strsplit(b[i], '')[[1]])$LCS,
          collapse = "")) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-24T16:49:28.670

如果您不介意使用生物导体封装，那么，您可以使用`Rlibstree`. 安装非常简单。

```
source("http://bioconductor.org/biocLite.R")
biocLite("Rlibstree") 
```

然后，你可以这样做：

```
require(Rlibstree)
ll <- list(a,b)
lapply(data.frame(do.call(rbind, ll), stringsAsFactors=FALSE), 
           function(x) getLongestCommonSubstring(x))

# $X1
# [1] "ABC"

# $X2
# [1] "DEF" 
```

* * *

附带说明：我不太确定`Rlibstree`uses`libstree 0.42`或`libstree 0.43`. 这两个库都存在于源包中。我记得在**perl**中使用`libstree 0.42`. 只是一个抬头。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T18:40:30.250

因为我有太多不想做的事情，所以我这样做了：

```
Rgames> for(jj in 1:100) {
+ str2<-sample(letters,100,rep=TRUE)
+ str1<-sample(letters,100,rep=TRUE)
+ longs[jj]<-length(lcstring(str1,str2)[[1]])
+ }
Rgames> table(longs)
longs
 2  3  4 
59 39  2 
```

有人关心对匹配字符串的实际分布进行统计估计吗？（`lcstring`只是一个蛮力的家庭滚动函数；输出包含所有最大字符串，这就是为什么我只查看第一个列表元素）

# php - Doctrine 多个 OneToMany/ManyToOne 双向完整性约束违规

> ID：16196334
> 
> 赞同：7
> 
> 时间：2013-04-24T15:41:14.373
> 
> 标签：php, orm, doctrine-orm, doctrine, symfony-2.1

在 Symfony2 的最新 Doctrine 中，试图找出两个对象之间的多个双向关系。

个人所有者对象在一个集合中有一个邮政地址，然后有多个辅助地址，我删除（）这个人，我希望它的所有地址也被删除（但删除一个地址不应该删除一个人），但我收到此错误 -

```
An exception occurred while executing 'DELETE FROM address WHERE id = ?' with
params {"1":"fb5e47de-2651-4069-b85e-8dbcbe8a6c4a"}:

[PDOException] SQLSTATE[23000]: Integrity constraint violation: 1451
Cannot delete or update a parent row: a foreign key constraint fails
(`db`.`address`, CONSTRAINT `FK_633704 C29C1004E`
FOREIGN KEY (`person_id`) REFERENCES `person` (`id`)) 
```

在

```
class Person
{

    /**
     * @var Address postalAddress
     *
     * @ORM\OneToOne(targetEntity="Address", cascade={"all"}, orphanRemoval=true)
     * @ORM\JoinColumn(onDelete="cascade")
     */
    private $postalAddress;

    /**
     * @var \Doctrine\Common\Collections\Collection otherAddresses
     *
     * @ORM\OneToMany(targetEntity="Address", mappedBy="person", cascade={"all"}, orphanRemoval=true)
     */
    private $otherAddresses;

}

class Address
{

    /**
     * @var Person person
     *
     * @ORM\ManyToOne(targetEntity="Person", inversedBy="postalAddress, otherAddresses")
     * @ORM\JoinColumn(nullable=false)
     */
    private $person;
} 
```

我认为这可能是因为

```
inversedBy="postalAddress, otherAddresses" 
```

我认为不支持多个 inversedBy；然后我也尝试改变

```
@ORM\JoinColumn(nullable=false) 
```

可以为空，但我仍然得到错误。

这显然不是关于琐碎的 Person/Address 示例，而是更复杂的示例，但这是我在抽象方面的最佳尝试。

我确定我错过了一些明显的东西。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-10-17T15:14:37.397

# 破碎的关系定义

虽然从纯逻辑的角度来看，您所做的事情可能是有意义的，但从关系数据的角度来看却没有意义，尤其是从 Doctrine 的角度来看是没有意义的。

Doctrine 试图维持 3 种不同的关系：

*   **地址**（拥有方）[双向] $person `--Many:One-->`$otherAddresses**个人**
*   **地址**（拥有方）[双向] $person `--Many:One-->`$postalAddress**个人**
*   **人**（拥有方）[单向] $postalAddress `--One:One-->`$id**地址**

你看到问题了吗？

# 使用关系标准来解决这个问题。

这里的简单解决方案是使用非常常见的设计模式，即为集合设置主节点。本质上，您只需要一种关系：

*   **地址**（拥有方）[双向] $person `--Many:One-->`$otherAddresses**个人**

然后，向地址添加一个属性，该属性将该地址定义为*主要*的。在 Person 和 Address 实体中以编程方式处理此问题：

```
Class Person
{
    . . .
    public function getPrimaryAddress() {
        if (null === $this->primaryAddress) {
            foreach($this->getOtherAddresses() as $address) {
                if ($address->isPrimary()) {
                    $this->primaryAddress = $address;
                    break;
                }
            }
        }

        return $this->primaryAddress;
    }

    // similar for the setter, update the old address as not primary if there is one, set the new one as primary.
} 
```

# 使用两种不同的关系，但*不要跨越溪流*

如果您保持从个人到地址的一对一关系单向，问题就会自行解决。

*   **地址**（拥有方）[双向] $person `--Many:One-->`$otherAddresses**个人**
*   **人**（拥有方）[单向] $postalAddress`--One:One-->` **地址**

尽管如此，您仍然会遇到麻烦，因为 Doctrine 会在以下情况下抱怨： - 主（**PostalAddress**）地址没有定义*Many:One*的双方。（因此您的“主要”地址也必须在`$otherAddresses`集合中）。- 尝试删除或级联删除和更新将导致这两个关系发生冲突，“交叉流”学说的关系约束，因此您必须以编程方式处理这些操作。

# javascript - JSON.stringify 不适用于普通的 Javascript 数组

> ID：16196338
> 
> 赞同：68
> 
> 时间：2013-04-24T15:41:37.963
> 
> 标签：javascript, json

我必须在这里遗漏一些东西，但以下代码（[小提琴](http://jsfiddle.net/qLjLY/)）返回一个空字符串：

```
var test = new Array();
test['a'] = 'test';
test['b'] = 'test b';
var json = JSON.stringify(test);
alert(json); 
```

JSON'ing这个数组的正确方法是什么？

* * *

## 回答 #1

> 赞同：127
> 
> 时间：2013-04-24T15:43:07.157

JavaScript 数组旨在保存具有*数字*索引的数据。您可以向它们添加命名属性，因为[数组是一种对象](https://stackoverflow.com/a/874237/19068)（当您想要存储有关包含正常、有序、数字索引数据的数组的元数据时，这可能很有用），但这不是它们的设计初衷为了。

JSON 数组数据类型*不能*在数组上具有命名键。

当您将 JavaScript 数组传递给`JSON.stringify`命名属性时，将被忽略。

如果您想要命名属性，请使用对象，而不是数组。

```
const test = {}; // Object
test.a = 'test';
test.b = []; // Array
test.b.push('item');
test.b.push('item2');
test.b.push('item3');
test.b.item4 = "A value"; // Ignored by JSON.stringify
const json = JSON.stringify(test);
console.log(json);
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-08-13T18:26:50.567

很好的解释和上面的例子。我发现这个（[JSON.stringify() array bizarreness with Prototype.js](https://stackoverflow.com/questions/710586/json-stringify-bizarreness)）来完成答案。有些网站使用 JSONFilters 实现了自己的 toJSON，所以删除它。

```
if(window.Prototype) {
    delete Object.prototype.toJSON;
    delete Array.prototype.toJSON;
    delete Hash.prototype.toJSON;
    delete String.prototype.toJSON;
} 
```

它工作正常并且测试的输出：

```
console.log(json); 
```

结果：

```
"{"a":"test","b":["item","item2","item3"]}" 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-07-14T02:25:41.473

我在[这里发布了一个修复](https://stackoverflow.com/a/24728537/2016196)

您可以使用此函数修改`JSON.stringify`为 encode `arrays`，只需将其发布在脚本开头附近（查看上面的链接了解更多详细信息）：

```
// Upgrade for JSON.stringify, updated to allow arrays
(function(){
    // Convert array to object
    var convArrToObj = function(array){
        var thisEleObj = new Object();
        if(typeof array == "object"){
            for(var i in array){
                var thisEle = convArrToObj(array[i]);
                thisEleObj[i] = thisEle;
            }
        }else {
            thisEleObj = array;
        }
        return thisEleObj;
    };
    var oldJSONStringify = JSON.stringify;
    JSON.stringify = function(input){
        if(oldJSONStringify(input) == '[]')
            return oldJSONStringify(convArrToObj(input));
        else
            return oldJSONStringify(input);
    };
})(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-10-16T11:02:44.307

或者，您可以像这样使用

```
var test = new Array();
test[0]={};
test[0]['a'] = 'test';
test[1]={};
test[1]['b'] = 'test b';
var json = JSON.stringify(test);
alert(json); 
```

像这样你JSON-ing一个数组。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-06-08T00:09:50.470

另一种方法是[`JSON.stringify()`替换函数 param](https://masteringjs.io/tutorials/fundamentals/stringify#replacer-function)。您可以将第二个参数传递给`JSON.stringify()`对空数组有特殊处理的参数，如下所示。

```
const arr = new Array();
arr.answer = 42;

// {"hello":"world","arr":{"answer":42}}
JSON.stringify({ hello: 'world', arr }, function replacer(key, value) {
  if (Array.isArray(value) && value.length === 0) {
    return { ...value }; // Converts empty array with string properties into a POJO
  }
  return value;
}); 
```

* * *

## 回答 #6

> 赞同：-6
> 
> 时间：2014-09-18T13:26:00.407

Json 必须有键值对。你仍然可以将数组作为值部分。因此添加您选择的“关键”：

var json = JSON.stringify({whatver: test});

# css - 如何基于媒体查询与元素交互？

> ID：16196343
> 
> 赞同：0
> 
> 时间：2013-04-24T15:41:53.757
> 
> 标签：css, mobile, responsive-design, media-queries

如何通过媒体查询与命名元素交互？以下不起作用。

```
<style type="text/css">
@media (max-width : 320px) {
#footer {display:none;}
#myimage {display:none;}
} 
```

在页面中

```
<div id="footer">...</div>
<img id="myimage" src="..."/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T16:20:20.777

因此，您提供的代码在放入小提琴时确实有效。当页面小于 320 像素时，页脚和 myImage 元素会消失。

我设置了一个更清晰的内容版本，可以通过媒体查询进行更改。

[http://jsfiddle.net/bXenf/](http://jsfiddle.net/bXenf/)

```
/* The magic happens here. */
@media only screen and (max-width: 480px) {
    #block1 { display:block; }
    #block2 { display:none; }
} 
```

# php - 获取索引页面的 404 错误

> ID：16196345
> 
> 赞同：0
> 
> 时间：2013-04-24T15:41:58.877
> 
> 标签：php, kohana, kohana-3.2

尝试进入 kohana 中的索引页面时，我不断收到此错误

> Kohana_HTTP_Exception [ 404 ]：在此服务器上找不到请求的 URL localwebsite/admin。

SYSPATH\classes\Kohana\Request\Client\Internal.php [79]：

```
 if ( ! class_exists($prefix.$controller))
     {
      throw HTTP_Exception::factory(404,'The requested URL :uri was not found on this server.',
      array(':uri' => $request->uri()))->request($request);
     }
     // Load the controller using reflection
     $class = new ReflectionClass($prefix.$controller); 
```

SYSPATH\classes\Kohana\Request\Client.php[114]：

```
 Kohana_Request_Client_Internal->execute_request(args) 
```

SYSPATH\classes\Kohana\Request.php [990]：

```
Kohana_Request_Client->execute(arguments) 
```

DOCROOT\index.php [118]：

```
Kohana_Request->execute() 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-08-05T00:07:44.637

Kohana 是一个非常强大的框架，第一条规则是不要通过系统或模块文件夹！

你不应该把这样的问题归咎于框架，而是检查你的路线/开始一个新项目以找到问题。

留在应用程序文件夹中，因为一旦开始弄乱 /system 和 /modules 就无法升级 kohana :(

# java - Joda-Time compareTo NoSuchMethod

> ID：16196346
> 
> 赞同：1
> 
> 时间：2013-04-24T15:42:01.200
> 
> 标签：java, jodatime, drools

我正在使用 joda-time 来跟踪 Drools 文件中几种不同类型的日期（DateTime 和 DateMidnight）。作为 when 条件的一部分，我获取对象的日期，然后比较所有其他对象的日期以确保没有更新的对象。日期格式相同 (DateTime)，但当我尝试通过 Tomcat 向其发送有效负载时，我始终收到以下错误：

```
Caused by: java.lang.NoSuchMethodError: org.joda.time.DateTime.compareTo(Lorg/joda/time/DateTime;)
at edu.measure.growth.Rule_assume_first_measurement_is_valid586933554.defaultConsequence(Rule_assume_first_measurement_is_valid586933554.java:7)
at edu.measure.growth.Rule_assume_first_measurement_is_valid586933554DefaultConsequenceInvokerGenerated.evaluate(Unknown Source)
at edu.measure.growth.Rule_assume_first_measurement_is_valid586933554DefaultConsequenceInvoker.evaluate(Unknown Source) 
```

这是它在错误日志中引用的规则：

```
rule "assume first measurement is valid"
when
    // consider all measurements that have not been validated
    $m: Measurement($type: parameter, valid == false, $dt: date)
    // verify no measurements occur after target date
    not Measurement(parameter == $type, date<$dt))
then
    modify($m) {setValid(true);}
end 
```

似乎不想使用 < 运算符进行比较。这是其他人遇到的常见错误吗？我一直无法找到有关如何修复它的任何信息，因此将不胜感激任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T16:17:10.143

您使用的是什么 DROOLS 版本？

似乎这是一个已修复的错误： [https ://issues.jboss.org/browse/DROOLS-37?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel](https://issues.jboss.org/browse/DROOLS-37?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel)

# python - 如何将文本文件的信息放入元组中以转换为 SQL 表？

> ID：16196350
> 
> 赞同：0
> 
> 时间：2013-04-24T15:42:08.240
> 
> 标签：python, mysql

我有几个包含特定信息的文本文件。我需要从文件中提取所需的信息并将它们放入 MySQL 表中。这些文件包含几行信息，但我只需要这三行，例如：

```
Name:      Gorge
Registration ID: 6657
Registration Time:  2012-09-10 14:31:13 
```

我写了下面的代码，但代码的结果不是我想要的。该代码仍然不包含 SQL 部分的插入。

```
import fnmatch
import os
import pprint

matches=[]
b=[]

for root, dirnames, filenames in os.walk('d:/Data'):
    for filename in fnmatch.filter(filenames, 'Info_reg.txt'):
        matches.append(os.path.join(root, filename))

all_keys = ['name','Registration ID','registration time']
for m in matches:
    f=open(m,'r')
    for line in f:        
        for n in all_keys:
            if line.startswith(n):
                a = line.split(':',1)
                b.append(a) 
```

并且代码结果如下所示，我假设无法轻松转换为表格：

```
['registration time', '     2012-10-08 17:28:47\n'],
 ['Registration ID', ' 9876'],
 ['Name', '      Malcom\n'],

 ['registration time', '     2012-10-08 17:28:47\n'],
 ['Registration ID', ' 45'],
 ['Name',      'mazu\n'], 
```

有谁知道如何更改我的代码以从该文件中制作一个漂亮的表格？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T16:10:20.560

You want to call `.strip()` on the results, and store the whole thing in a dictionary instead of a list of lists.

We can also optimize the line search and record handling; I am assuming here that when we find a `Name` entry a new record has started:

```
records = []

all_keys = {'Name', 'Registration ID', 'registration time'}
first_key = 'Name'

for m in matches:
    with open(m, 'r') as f
        record = dict.fromkeys(all_keys)  # new record dictionary with `None` values

        for line in f:
            key, value = line.split(':', 1)
            key, value = key.strip(), value.strip()
            if key not in all_keys:
                continue  # not interested in this line

            if key == first_key and any(v for v in record.itervalues()):
                # new record, finalize the previous
                records.append(record)
                record = dict.fromkeys(all_keys)

            record[key] = value

        if any(v for v in record.itervalues()):
            # there is something in the last record still, add that too
            records.append(record) 
```

Now you have a list of records of the form:

```
records = [
    {'registration time', '2012-10-08 17:28:47', 'Registration ID': '9876', 'Name', 'Malcom'},
    {'registration time', '2012-10-08 17:28:47', 'Registration ID': '45', 'Name', 'mazu'},
] 
```

These can be inserted into a database with MySQLdb using `.executemany()` in one go:

```
cursor = conn.cursor()
cursor.executemany('INSERT INTO sometable (id, name, time) VALUES (%(Registration ID)s, %(Name)s, %(registration time)s)',
    records)
conn.commit() 
```

This inserts all collected records straight into the database.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T16:49:41.540

这可能会激发一个解决方案：

```
data = '''\
Name:      Gorge
Registration ID: 6657
Registration Time:  2012-09-10 14:31:13
Somethign else: foo
Spam:   Bar
Name:      mazu
Registration ID: 45
Registration Time:  2012-10-08 17:28:47
Somethign else: foo
Spam:   Bar'''.split('\n')

records = []
titles = ['Name','Registration ID','Registration Time']

def record_is_complete(rec):
    return (rec.get('Name')
            and rec.get('Registration ID')
            and rec.get('Registration Time'))

def make_tuple(rec):
    result = [ rec[key] for key in titles ]
    return tuple(result)

record = {}
for line in data:
    key, value = line.split(':', 1)
    if key in titles:
        record[key] = value.strip()
    if record_is_complete(record):
        records.append(make_tuple(record))
        record = {}

print records 
```

结果：

```
[('Gorge', '6657', '2012-09-10 14:31:13'), 
 ('mazu', '45', '2012-10-08 17:28:47')] 
```

# assembly - 仅使用绝对（直接）寻址实现间接寻址

> ID：16196352
> 
> 赞同：-1
> 
> 时间：2013-04-24T15:42:14.083
> 
> 标签：assembly, mips

例如，我怎样才能实现这样的目标：

```
lw RegisterDestination, (RegisterSource) 
```

绝对寻址？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T04:46:47.193

MIPS 加载和存储指令（例如`lb`, `lw`, `sb`, `sw`）仅将内存地址作为常量和寄存器值的组合，并且它们只执行一次内存访问，它们不会首先从内存中获取地址然后读取或写入内存在那个地址。他们在指定的地址读取或写入`some constant + some register's value`.

如果需要进行两次内存访问，则必须使用两条加载/存储指令。

如果您担心源代码的大小，您可以将几条指令包装到一个宏中并使用该宏。但这是特定于汇编程序的。

# mysql - mysql更改约束名称，如何？

> ID：16196357
> 
> 赞同：5
> 
> 时间：2013-04-24T15:42:27.447
> 
> 标签：mysql, constraints, rename

```
create table Foo(
 userId bigint(20) not null,
 KEY `Foo_userId` (`userId`),
 CONSTRAINT `Foo_userId` FOREIGN KEY (`userId`) REFERENCES `User` (`id`)
); 
```

如何将 Key/constraint 名称从 Foo_userId 更改为 Bar_userId，只需更改名称即可。我知道可以先删除它们，然后重新创建它们。我正在寻找一种简单的方法，例如

```
alter table Foo rename KEY Foo_userId Bar_userId;
alter table Foo rename CONSTRAINT Foo_userId Bar_userId; 
```

mysql中有这样的东西吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-12-20T09:20:36.080

为了更改约束名称或属性，您可以删除旧的外键约束并添加一个新约束。这是唯一真正对我有用的解决方案。

```
alter table FOO 
drop foreign key Foo_userId,
add constraint Bar_userId foreign key (`userId`) references`User` (`id`) 
```

[这](https://stackoverflow.com/questions/13244889/how-to-alter-constraint)是另一个对我有帮助的答案。

# javascript - 当我们有 gzip 时，为什么人们会缩小 css 和 javascript？

> ID：16196358
> 
> 赞同：15
> 
> 时间：2013-04-24T15:42:28.757
> 
> 标签：javascript, css, performance, gzip, client-side

如果人们可以在 Web 服务器上打开*gzip*压缩，为什么还要经历压缩 JavaScript 和 CSS 文件的所有痛苦？这将在流量性能方面提供相同（甚至更好）的结果。

缩小会带来额外的好处吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-24T15:46:42.277

您可以将 gzip（通常内置在 Web 服务器中）与 Minification 结合使用。缩小可以做很多 gzip 不能做的事情，例如删除注释、将长变量重命名为更短的变量名等。

与简单地 gzip 压缩原始 .js 相比，生成的传输数据可能要小得多。显然，这取决于源 .js。

您可以查看 Compressorater（[http://compressorrater.thruhere.net/](http://compressorrater.thruhere.net/)）。您可以输入您的 .js，它会使用带有和不带有 gzip 的各种库来缩小并显示结果。您可以看到各种库的简单 gzipped 和 gzipped + minified 之间的比较。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-24T15:47:17.083

缩小 Javascript 和 CSS 不仅可以压缩它，还可以添加其他通过压缩无法实现的优化。

例如，通过缩小您可以修改长变量的名称。该变量的所有实例将只有一个字符。缩小的另一件事是删除评论。这不能通过 gzip 完成。

除了缩小之外，通常会将各种文件捆绑到一个文件中，从而减少请求的数量

除了缩小之外，您还应该使用 gzip

# ios - IOS：在应用程序 iOS 中投放广告

> ID：16196364
> 
> 赞同：1
> 
> 时间：2013-04-24T15:42:40.733
> 
> 标签：ios, objective-c, admob, iad, ads

在我的应用程序中，我想插入广告；我在谷歌上搜索，很多人只使用他们的应用程序的服务，例如只使用 iAd 或只使用 adMob ecc。其他人说最好在应用程序中插入更多广告服务；例如 iAd 和 adMob（50% 和 50%），当 iAd 没有响应时，adMob 可以替代 iAd 服务。但是，除了 iAd 之外，还有 2 或 3 项服务在特定应用程序中投放广告有什么好处呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T16:47:40.353

根据我的经验和阅读，iAd 往往有最好的回报，*但*它没有 100% 的填充率。这意味着只有在您的应用请求广告的*某些*时候，它才会真正获得广告。此外，iAd 并非在所有国家/地区都可用（根据该网站，您只能在美国、加拿大、墨西哥、英国、法国、德国、意大利、西班牙、澳大利亚、新西兰和日本投放 iAd 广告，如2013 年 4 月 4 日）。

使用多个网络可以让您在这些情况下回退到另一个网络，这将有助于提高您的收入（因为您几乎总是会有广告）。AdWhirl 是一个流行的框架，可帮助您自动化和管理应用程序中使用的网络的比率和排序。

至于最好的，那总是更难指定。不同的人有不同的组合对他们更有效。可能会导致比单一网络更多的收入，但设置和管理肯定会比单一网络更多的工作。根据我的阅读，带有 AdMob 后备的 iAd 可能被视为最有利可图的配置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-04T06:52:00.877

你应该看看 MoPub 和 Burstly，它们应该让你有很多时间，而且可能会有些头疼。他们会做 Admob、iAds 和很多其他的，有些甚至通过 API，所以你不需要单独为这些广告网络更新未来的 SDK。

另外，我知道很多人建议使用 Adwhirl，但 Google 不再支持它。相反，他们将中介移入 Admob SDK 并改进了功能。它也会做 iAds。

# javascript - 我有十进制数，需要转换为二进制数并有一个复选框链接到该二进制数的每一位

> ID：16196366
> 
> 赞同：1
> 
> 时间：2013-04-24T15:42:43.173
> 
> 标签：javascript, jquery, html, plc

这很难解释，但我会尽力而为。

我正在使用带有网络服务器的 PLC 和一些我编写的 JavaScript 代码，用于将 PLC 寄存器中的值写入您的网页。

PLC 具有的功能之一是时间表（例如，您可以选择灯必须亮起的日期和时间）。为了设置时间表，我为时间创建了一些输入框，并为一周中的每一天创建了 7 个复选框。您必须将十进制值发送给控制器，这对于小时和分钟来说没有问题。

但是，工作日用二进制数表示，但我需要将其以十进制写入控制器。

所以我有 7 个复选框，每个复选框代表一个二进制数字（所以星期一是 1，星期二是 2，星期三是 4，星期四是 8，依此类推）所以当我想从中创建一个十进制数时，这很容易，只需总结检查了哪些复选框，完成了。

但是现在我需要它，这次我从控制器得到一个十进制数（表示设置了哪些天），我需要在复选框上表示它，所以可能将十进制转换为二进制但是我如何链接复选框到单个数字？

希望有人能理解这一点并帮助我。

```
<input type="checkbox" id="mon"></td>
<input type="checkbox" id="tue"></td>
<input type="checkbox" id="wed"></td>
<input type="checkbox" id="thu"></td>
<input type="checkbox" id="fri"></td>
<input type="checkbox" id="sat"></td>
<input type="checkbox" id="sun"></td> 
```

这些是我的复选框，这是我的一些 javascript：

```
var Weekday = 0;
if($('#mon').is(':checked')){ Weekday += 1 }  //this is code to create the decimal number 
if($('#tue').is(':checked')){ Weekday += 2 }
if($('#wed').is(':checked')){ Weekday += 4 }
if($('#thu').is(':checked')){ Weekday += 8 }
if($('#fri').is(':checked')){ Weekday += 16 }
if($('#sat').is(':checked')){ Weekday += 32 }
if($('#sun').is(':checked')){ Weekday += 64 } 
```

我该如何反其道而行之？我得到一个十进制数，需要转换为二进制，然后使用 javascript 根据设置的位检查正确的复选框。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T15:58:06.920

您可以使用按位运算符。

例如。

```
var number = 54;
if (number & 1) { $('#mon').attr('checked', 'checked'); }

if (number & 2) { $('#tue').attr('checked', 'checked'); }

if (number & 4) { $('#wed').attr('checked', 'checked'); }

if (number & 8) { $('#thu').attr('checked', 'checked'); }

if (number & 16) { $('#fri').attr('checked', 'checked'); } 
```

ETC...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T15:57:53.127

数字的二进制分解：

```
 function getOnesAndZeroesFromInt(weekdays){
     var tab = [];
     for(var i=0; i<7; i++){
         tab[i] = weekdays % 2;
         weekdays /=  2;
     }
     return tab
 } 
```

* * *

另一个建议（[小提琴](http://jsfiddle.net/nXZkA/)） - 只是将[chead23 的答案](https://stackoverflow.com/a/16196748/86072)放在一个循环中：

HTML：

```
<input type="checkbox" id="mon" data-weight=1></td>
<input type="checkbox" id="tue" data-weight=2></td>
<input type="checkbox" id="wed" data-weight=4></td>
<input type="checkbox" id="thu" data-weight=8></td>
<input type="checkbox" id="fri" data-weight=16></td>
<input type="checkbox" id="sat" data-weight=32></td>
<input type="checkbox" id="sun" data-weight=64></td> 
```

Javascript：

```
function getWeekDays() {
    var weekdays = 0;
    $('#table :checked').each(function () {
        weekdays += parseInt($(this).attr('data-weight'), 10);
    });
    return weekdays;
}

function setWeekDays(weekdays) {
    $('#table input[type="checkbox"]').each(function () {
        var i = this.getAttribute('data-weight');
        $(this).prop('checked', weekdays & i);
    });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-12T18:36:26.443

```
let yourNumber = 343234729;
let decomposed = yourNumber.toString(2).split('').reverse().map((bit, index) => bit === '1' ? 1 << index : 0).filter(x => x > 0); 
```

# android - Android - 想在 ICS 上显示 3 点菜单

> ID：16196368
> 
> 赞同：1
> 
> 时间：2013-04-24T15:43:03.287
> 
> 标签：android, android-actionbar, android-theme, android-menu

我想在构建我的应用程序时显示 3 点溢出菜单键（在最近应用虚拟键旁边）

```
android:targetSdkVersion="15" 
```

这是我的故事。我的应用程序包含两个 lib 项目（只有 jars + res 没有源），lib-a 正在使用菜单；当应用程序使用 target-sdk=10 构建时，运行良好，系统导航栏上的最近应用程序键旁边会显示 3 点图标。现在 lib-b 升级了，我必须使用 target-sdk=15 构建应用程序，但这会使 lib-a UI 菜单消失。我希望 lib-a 像以前一样有菜单。

我查了这些帖子，很有帮助，

[当目标 sdk 版本大于 10 时，Android 操作栏菜单不显示](https://stackoverflow.com/questions/12531174/android-action-bar-menu-not-showing-when-target-sdk-version-is-greater-than-10)

[Android 主题、全屏和操作栏](https://stackoverflow.com/questions/12569450/android-theme-fullscreen-and-the-action-bar)

我既不能应用 ActionBarSherlock 也不能将 target-sdk 设置为 10。所以我想知道使用旧主题（不是全息主题）是否会有所帮助。我创建了一个主题，派生自 [android.Theme]，适用于 lib-a 中的所有活动（在应用程序的清单 xml 中），但没有运气。

所以我的问题是，主题能解决问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T15:56:14.360

我认为你根本做不到。由于遗留原因，系统栏中的“溢出菜单”存在，当且仅当遗留应用程序（目标 sdk<11）在具有虚拟系统栏的设备上运行时才会显示。它根本不打算在针对更高版本时出现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T16:06:12.213

不，你不能这样做。您可能会下载较早版本的 actionBarSherlock（即 4.1.0），其中 absForceOverflow 是现有方法，因此这将强制您的 3 点菜单适用于每个系统（最高 1.6），但这可能会导致您出现问题（例如带有硬件键盘的手机等）。

几周前我偶然发现了这个问题，我通过一种解决方法解决了这个问题：在操作栏中添加一个简单的菜单图标（三点图标），如果你点击它，就会出现一个自定义对话框，看起来就像原来的菜单（你可以以编程方式将其放置到正确的位置，因为您知道栏的默认高度（例如 hdpi 手机上的 48dp）。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-28T16:32:27.240

是的，您只需像这样从 onCreate 方法更改 targetVersion 即可：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    getApplicationInfo().targetSdkVersion = 10; // To enable the 3-dot menu call this code before super.OnCreate
    super.onCreate(savedInstanceState); 
} 
```

在 Android 4.xx 和 Android 3.0 上测试

# jquery - jQuery 切换面板，背景更改

> ID：16196373
> 
> 赞同：0
> 
> 时间：2013-04-24T15:43:16.860
> 
> 标签：jquery, background, toggle, slide

我有一个带有两个按钮“登录”和“注册”的启动页面。到目前为止，我设法获得的代码是： 1\. 单击按钮时展开登录和注册表单 (div)。2\. 如果其他表单已经可见，则隐藏它（一次只能看到一个表单，一次只有一个按钮处于“按下状态”）。3\. 按下时更改按钮背景并且相应的面板可见。

这是到目前为止的代码：

```
$(function() {
                $('#login').click(function() {
                    $('.login').slideToggle('fast');
                    $('.register:visible').slideToggle('fast');
                    $("#register").css("background", "rgba(255,0,0,0.8)");
                    $("#login").css("background", "rgba(255,0,0,0.6)");
                    return false;
                });
                $('#register').click(function() {
                    $('.register').slideToggle('fast');
                    $('.login:visible').slideToggle('fast');
                    $("#login").css("background", "rgba(255,0,0,0.8)");
                    $("#register").css("background", "rgba(255,0,0,0.6)");
                    return false;
                });
            }); 
```

上面代码的问题是，当我隐藏两个面板时，其中一个按钮保持“按下状态” rgba(255,0,0,0.6)。我还想在按钮未按下时添加悬停效果，我该怎么做呢？

非常感谢你，我是 jquery 的新手，我正在努力..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T15:49:16.220

首先，我建议添加和删除 CSS 类，而不是直接更改 CSS 属性 - 它可能会清除一些错误，但不确定：`$('#register').addClass('btnClicked');`

您可以像这样添加悬停效果：

```
$('#login, #register').hover(function() {
    $(this).addClass('btnHover');
}, function() {
    $(this).removeClass('btnHover');
} 
```

当然，如果你想保持你的风格，只需将悬停的 CSS 代码放在第一个函数中，然后在第二个函数中将其恢复为正常。

# ocaml - 如何在 OCaml 中编写库？

> ID：16196375
> 
> 赞同：1
> 
> 时间：2013-04-24T15:43:24.410
> 
> 标签：ocaml, ocamlbuild, ocamlfind

我正在用 ocaml 编写一个 bson 编码器/解码器库。

我现在有源文件（实际上只有一个文件）。

我的问题是，我应该如何将其作为一个库，例如`ocaml-batteries-included`,`camomile`等？

我的意思是，人们可以使用`opam install`它并使用`ocamlfind`+`ocamlbuild`来编译它吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T16:05:07.407

支持`ocamlfind`真的很容易，没有不做的借口。基本上，选择任何“相似”的库，查找 META 文件，并将其调整为您自己的设置。我在[这个 StackOverflow 答案](https://stackoverflow.com/a/8665591/298143)中给出了一些基本说明。

OCamlbuild 是一个构建系统，您可以自由决定使用或不使用，但不应影响您的用户（除了他们将在构建程序之前安装它的事实）。您还可以使用 Makefile 或任何其他构建系统（omake 等）。ocamlbuild 的想法只是提供一个`_tags`包含足够信息的文件来构建你的库/程序（如果你正在做高级的东西，一个`myocamlbuild.ml`文件也是如此）。再次，看看有哪些与你的结构相似的项目正在做。

对于 Opam，有一个[包装指南](http://opam.ocamlpro.com/doc/Packaging.html)可以指导您（但同样，只需适应其他人正在做的事情）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T20:05:43.497

我会介绍一些有点非标准但完全可用的东西：[obuild](https://github.com/vincenthz/obuild)。您只需要一个`project.obuild`文件，然后`obuild build`将构建您的项目。`obuild install`将使用 ocamlfind 安装它。

但是，从 github 安装 obuild 而不是 opam，因为 opam 版本有点过时了。这是一个示例`obuild`文件，可以为您提供一个想法：[https ://github.com/vbmithr/ocaml-websocket/blob/master/websocket.obuild](https://github.com/vbmithr/ocaml-websocket/blob/master/websocket.obuild)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T12:00:43.243

去[绿洲](http://oasis.forge.ocamlcore.org/)；您基本上创建了一个`_oasis`描述您的库的文件。然后，该`oasis`工具将为您创建一个构建系统。您可以通过[Opam](http://opam.ocamlpro.com/)安装 Oasis 。有一个Oasis[快速](http://oasis.forge.ocamlcore.org/quickstart.html)入门教程可以帮助您入门。

Oasis 致力于标准化 OCaml 包的计算机可读描述。在此期间，它可以将构建系统作为副产品创建（当前是`ocamlbuild`基于的系统，并且支持 Makefile）。

# javascript - 如何在按钮单击时显示自定义对话框

> ID：16196376
> 
> 赞同：4
> 
> 时间：2013-04-24T15:43:27.857
> 
> 标签：javascript, jquery, html, jquery-ui, jquery-ui-dialog

我希望我的自定义对话框在按钮单击时加载，但这没有发生。我正在使用此网页上的对话框。

[http://jqueryui.com/dialog/#default](http://jqueryui.com/dialog/#default)

这是我的代码..

```
 function click(){
      $(function() {
           $( "#dialog" ).dialog({
            width : 250,
            height: 180,
            modal : true
            });
            });
           }

     <div>
    <button type="button" id="put" onclick="click()">Insert data</button>
     </div> 
```

上面的代码不起作用..请帮助...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T15:47:53.807

它工作正常有[prooflink](http://jsfiddle.net/Tchwk/)
HTML：

```
<div id="dialog">
      <p>THIS IS DIALOG!!!</p>
    </div>

    <button id="opener">Open Dialog</button> 
```

和jQuery：

```
$(function() {
    $( "#dialog" ).dialog({
      autoOpen: false
    });

    $( "#opener" ).click(function() {
      $( "#dialog" ).dialog( "open" );
    });
  }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-14T06:11:22.760

我正在使用 jquery-2.1.0.min.js 和 jquery.ui-1.10.4。

这是我的完整源代码：

```
(For the jquery-ui.css link tag, change: href="path_to_your_jquery-ui/themes/base/jquery-ui.css")

(For the jquery script tag, change: src="path_to_your_jquery/jquery-2.1.0.min.js")

(For the jquery-ui script tag, change: src="path_to_your_jquery-ui/ui/jquery-ui.js")

(For your demos.css link tag, change: href="path_to_your_jquery-ui/demos/demos.css")

<!DOCTYPE html>

<html>
  <head>
    <link rel="stylesheet" type="text/css" href="add-ons/jui/themes/base/jquery-ui.css"/>
    <script src="add-ons/jquery-2.1.0.min.js"></script>
    <script src="add-ons/jui/ui/jquery-ui.js"></script>
    <link rel="stylesheet" type="text/css" href="add-ons/jui/demos/demos.css"/>
    <!-- this in-file styling is used to hide the #dialog element initially -->
    <style>
      #dialog {
        display: none;
      }
    </style>
    <script> 
      $(document).ready(function() {
        $("#put").on("click", function(evnt) {
          $(function() {
            $("#dialog").dialog({
              width:250,
              height: 180,
              modal:true
            });
          });
          evnt.preventDefault();
        });        
      });
    </script>
  </head>
  <body>
    <div id="dialog" title="Basic dialog">
      <p>
        This is the default dialog which is useful for displaying information. 
        The dialog window can be moved, resized and closed with the 'x' icon.
      </p>
    </div>
    <div>
      <button type="button" id="put">Insert data</button>
    </div>
  </body>
</html> 
```

确保在“点击”函数中将事件参数传递给回调函数，并在其上调用 preventDefault() 方法。阅读有关[event.preventDefault()](http://api.jquery.com/event.preventdefault/)的更多信息此外，[这里](http://fuelyourcoding.com/jquery-events-stop-misusing-return-false/)有一个很好的阅读 event.preventDefault() 与 return false

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-20T05:47:20.570

```
function click(){
       $( "#dialog" ).dialog({
        width : 250,
        height: 180,
        modal : true
        });
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T15:49:10.650

选择器正在尝试查找具有 id 的元素，`dialog`但看起来您没有。尝试这个：

Javascript：

```
$(document).ready(function ()
{
    function click()
    {
        $('#dialog').dialog({
            autoOpen: false,
            width: 250,
            height: 180,
            modal : true
        });
    }
}); 
```

HTML：

```
 <div id="dialog">
       Your dialog message.
    </div>

    <button type="button" id="put" onclick="click()">Insert data</button> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-09-01T08:10:02.373

```
<html>
<head>
<style>
/* The Modal (background) */
.modal {
    display: none; /* Hidden by default */
    position: fixed; /* Stay in place */
    z-index: 1; /* Sit on top */
    padding-top: 100px; /* Location of the box */
    left: 0;
    top: 0;
    width: 100%; /* Full width */
    height: 100%; /* Full height */
    overflow: auto; /* Enable scroll if needed */
    background-color: rgb(0,0,0); /* Fallback color */
    background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
}

/* Modal Content */
.modal-content {
    background-color: #fefefe;
    margin: auto;
    padding: 20px;
    border: 1px solid #888;
    width: 40%;
}

/* The Close Button */
.close {
    color: #aaaaaa;
    float: right;
    font-size: 28px;
    font-weight: bold;
}

.close:hover,
.close:focus {
    color: #000;
    text-decoration: none;
    cursor: pointer;
}
.button11
{
    background: #47bb7c;
    border-radius: 2px;
    border-bottom: solid 2px #489368;
    border-left: 0 none;
    border-right: 0 none;
    border-top: 0 none;
    padding: 4px 8px;
    color: #fff;
    font-size: 13px;
}
</style>
</head>
<body>

<h2>Modal Example</h2>

<!-- Trigger/Open The Modal -->
<button id="myBtn">Open Modal</button>

<!-- The Modal -->
<div id="myModal" class="modal">

  <!-- Modal content -->
  <div class="modal-content">
    <span class="close">&times;</span>
    <center>
    <p>Green Card</p>
   <input type="button" class="button11" name="submit" id="submit" value="Print"/>
  <center>
  </div>

</div>

<script>
// Get the modal
var modal = document.getElementById('myModal');

// Get the button that opens the modal
var btn = document.getElementById("myBtn");

// Get the <span> element that closes the modal
var span = document.getElementsByClassName("close")[0];

// When the user clicks the button, open the modal 
btn.onclick = function() {
    modal.style.display = "block";
}

// When the user clicks on <span> (x), close the modal
span.onclick = function() {
    modal.style.display = "none";
}

// When the user clicks anywhere outside of the modal, close it
window.onclick = function(event) {
    if (event.target == modal) {
        modal.style.display = "none";
    }
}
</script>

</body>
</html> 
```

# search - 使用教义和 symfony2 进行自定义搜索

> ID：16196377
> 
> 赞同：1
> 
> 时间：2013-04-24T15:43:28.437
> 
> 标签：search, symfony, doctrine

我想创建一个 searchController，它在数据库中搜索用户在文本框中输入的任何关键字。我看过[这篇文章](https://stackoverflow.com/questions/9033474/search-for-several-arguments-with-doctrine)和[这篇](https://stackoverflow.com/questions/11528435/database-searching-using-doctrine-and-symfony2)文章以及更多。

这是我到目前为止所拥有的：

```
public function searchAction(Request $request) {
        if ($request->getMEthod() == 'GET') {
            $title = $request->get('Search_term');
            //echo "<div class=\"searchText\">Search Results</div><hr/>";
            $em = $this->getDoctrine()->getManager();
            $Search_terms = explode(' ', $title); //splits search terms at spaces
            $query = "SELECT * FROM Entity/Adverts WHERE ";

            foreach ($Search_terms as $each) {
                // echo $each."<br/>";
                $i = 0;
                $i++;
                if ($i == 1)
                    $query .= "Adv_title LIKE '%$each%' ";
                else
                    $query .= "OR Adv_title LIKE '%$each%' ";
            }
            $query = $em->createQuery($query);
            $numRow = $query->count();
            if ($numRow > 0) {
                while ($query->fetch()) {
                    $repository = $em->getRepository('YCRYcrBundle:Adverts')->findBy(array(
                        'advTitle' => $title
                    ));

                    /*    echo "<h2><a href='#'> $title</a> </h2>";
                      echo "$desc <br /> <br />";
                      echo"<a href='/201308/View/YCR/index.php' class='link-button right'><span>Apply</span></a>"; */
                }
            }
            /* else
              echo "none found for \"<b>$SearchTerm </b>\"</br>Check spelling"; */
        }
        return $this->render('YCRYcrBundle:Search:search.html.twig', array('title' => $title->getAdvTitle()));
} 
```

这段代码缺少什么使其工作，或者有什么问题？

**编辑：**

对不起，我不清楚。我收到以下错误：

> FatalErrorException: Error: Call to undefined method Doctrine\ORM\Query::count() in C:\wamp\www\201308\src\YCR\YcrBundle\Controller\SearchController.php 第 28 行，不知道有什么问题我是 Symfony 和学说的新手。

这就是我的 search.html.twig 中的内容：

```
{% extends "YCRYcrBundle::layout.html.twig" %}

{% block content %}

<!DOCTYPE html>
<html lang="en">
    <head>
         <meta charset="utf-8" />
        <title>YCR Job Search</title>

        <link href="stylesheets/style.css" rel="stylesheet" type="text/css" />
  <link href="stylesheets/colour.css" rel="stylesheet" type="text/css" />
        </head>
        <body onload="b = setInterval('clear()', 0);">

            <div class="topDiv">
                <div style="float: left;">
                    <img src="/201308/View/images/ycr.jpg" alt="ycr"></div>
                <br/>

                <!--<H2>Search for a Job</H2>--> 
                <div class="searchform">
    <form id="formsearch" name="p" method="get" action="index.php">
          <span>

          <input name="Search_term" class="editbox_search" id="editbox_search"          maxlength="80" value="<?php $this; ?>" type="text" />
          </span>
              <input type="image" name="button_search" src="images/search.gif"     class="button_search" alt="" />
        </form>
                <br/>          
                <div id="search_results">

                </div>
            </div>

            <!-- </div>-->

            <script type="text/javascript" src="http://code.jquery.com/jquery-    1.7.2.min.js"></script><!--javascript jquery library-->
            <script type="text/javascript" src="../View/scripts/Script.js"></script>         

{% endblock %} 
```

当用户搜索时，例如程序员，显示如下：

```
-Programmer

-a summary of the description of what a programmer entails

-a button/link that reads: read more, that takes me to a page with full description 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-30T01:54:56.367

你离题太远了。Query 没有计数功能，这是一个 querybuilder 功能。您可以编写原始 sql，但最好学习 querybuilder ：[http](http://docs.doctrine-project.org/en/latest/reference/query-builder.html) ://docs.doctrine-project.org/en/latest/reference/query-builder.html 。请记住，学说旨在为您提供一个实体列表，您可以将其传递给树枝以进行处理。

此外，你的树枝不会做太多，请参阅我所包含的非常粗糙的树枝中的使用基础知识。使用`{{entity.method}}`or`{{entity.field}}`获取每个实体的各种显示属性。使用树枝 foreach 遍历它们。在您的上下文中查看我的示例，然后阅读 twig 文档以填补空白。 [http://twig.sensiolabs.org/documentation](http://twig.sensiolabs.org/documentation)

控制器

```
public function searchAction(Request $request) {
    if ($request->getMethod() == 'GET') {
        $title = $request->get('Search_term');
        $em = $this->getDoctrine()->getManager();
        $qb = $em->getRepository('YCRYcrBundle:Adverts')
                  ->createQueryBuilder('a');
        $searches= explode(' ', $title);

        foreach ($searches as $sk => $sv) {
            $cqb[]=$qb->expr()->like("CONCAT($sv, '')", "'%$sv%'");
        }

        $qb->andWhere(call_user_func_array(array($qb->expr(),"orx"),$cqb));

        $adverts = $qb->getResult();
    }
    return $this->render('YCRYcrBundle:Search:search.html.twig'
                        , array('adverts' => $adverts));
} 
```

还有一个树枝文件

```
{# Your other stuff #}
{% for advert in adverts %}
    {{advert.getId}}
    {# call the various method and fields for your display#}
{% endfor %} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T19:11:15.220

您需要执行查询（使用 execute ），否则您将不会得到一个数组。并且您应该使用查询生成器而不是 DQL 字符串连接。阅读有关基本学说用法的学说文档，实体名称空间似乎也不正确。

我引用你的话：

```
 $query = $em->createQuery($query);
            $numRow = $query->count(); 
```

至少应该是：

```
 $query = $em->createQuery($query);
            $numRow = count($query->execute()) 
```

编辑：不确定你会得到一个数组还是 ArrayCollection，检查计数函数是否适用于 ArrayCollection。

# java - 使用 MouseListener 选择网格中的一系列单元格

> ID：16196379
> 
> 赞同：2
> 
> 时间：2013-04-24T15:43:31.380
> 
> 标签：java, swing, jpanel, mouselistener

链接帖子：[如何使用 MouseListener 在网格中查找特定单元格](https://stackoverflow.com/questions/16192939/how-to-use-mouselistener-to-find-a-specific-cell-in-a-grid/16193071?noredirect=1#comment23153385_16193071)

我正在尝试创建一个由 100 个单元组成的 10x10 网格的 Battleships 游戏。Grid 扩展了 JPanel，而 Cell 也扩展了 JPanel。早些时候，我制作了上面的链接，询问如何实现 MouseListener 来做到这一点。由于代码都在该页面上，我只是参考它。

有人在我接受的那个链接上发布了一个很好的答案。我现在可以使用 MouseListener 来检测网格上任何单元格中的移动、点击等。

但是，我遇到了另一个障碍。我正在尝试将船舶放在我的网格上。我现在忘记了方向（因为我假设所有船只都将水平放置）。第一艘船将占用五个牢房。我想将光标移动到网格上的一个单元格上，并有四个其他“尾部”单元格，在光标所在单元格的右侧，也突出显示。如果总共没有五个空闲单元格（可能是因为光标太靠近网格边缘），单元格将变为红色。否则，它们将变为绿色。

放置第一艘船后，需要放置第二艘。它有四个单元格长。因此，当悬停在一个单元格上时，它将具有三个单元格的“尾部”，依此类推。

我对如何改变颜色、如何处理方向以及如何从五艘船变为四艘船等感到满意。但是，我不知道如何一次选择多个单元格。有人知道如何实施吗？我很想发布我尝试过的东西，但事实是，我什么都没有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T16:34:04.983

通常，选择一行或一列单元格与选择一个矩形单元格相同。

*   该`mouseClicked`方法设置初始单元格。

*   该`mouseMoved`方法设置鼠标所在的当前单元格。这样您就可以直观地向用户指示已“选择”了哪些单元格。

*   该`mouseReleased`方法设置最终单元格。

您检查以查看初始单元格到最终单元格是否构成一行或一列。行或列的长度决定了您放置的船。这使您可以按任何顺序放置船只，而不仅仅是从大到小。

您必须添加一个`MouseMoveListener`才能使用该`mouseMoved`方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T16:42:25.663

使用 JButtons / JToggleButtons 而不是 JPanels

*   您可以使用图标（一个图像拆分为所需的数字）

*   [通过使用 API 中实现的方法](https://stackoverflow.com/a/10694006/714968)

*   对（未修饰的）JButton 使用 ActionListener

*   [在 JButton 中覆盖 ButtonModel 以实现鼠标事件](https://stackoverflow.com/a/5755124/714968)（无需/不需要添加 MouseListner）

# java - 在尝试块内 FileIStream 变量可能尚未初始化错误

> ID：16196384
> 
> 赞同：3
> 
> 时间：2013-04-24T15:43:38.980
> 
> 标签：java, try-catch, fileinputstream, fileoutputstream

我正在尝试执行此代码，并且我还提供了有效的参数，但我仍然在第 1 行遇到错误。从图 34 和 35 可以看出，局部变量 fin 和 fout 可能尚未初始化。如何解决这个问题`enter code here`

```
 package maxbj.myTest.p1;
import java.io.*;
public class CopyFile {
public static void main(String[] args)throws IOException {

    int i;
    FileInputStream fin;
    FileOutputStream fout;

    try{
        //trying to open input file
        try{
            fin=new FileInputStream(args[0]);
        }catch(FileNotFoundException e){
            System.out.println("Input file not found");
            return;
        }

        //trying to open output file
        try{
            fout=new FileOutputStream(args[1]);
            return;
        }catch(FileNotFoundException e){
            System.out.println("Output file cannot be opened or created");
            return;
        }       
    }catch(ArrayIndexOutOfBoundsException e){
        System.out.println("Array index out of bound exception");
    }

    //code to copy file
    try{
        do{
            i=fin.read();
            if(i!=-1) fout.write(i);
        }while(i!=-1);
    }catch(IOException e){
        System.out.println("File Error");
    }
    fin.close();
    fout.close();
}
} 
```

PS-此代码来自“ JAVA COMPLETE REFRENCE”一书

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T15:47:03.067

`fin`编译器是对的（这本书是错的，他们应该在发布之前尝试编译他们的代码）：当代码到达行时仍未初始化时，有一条通过代码的路径`fin.read()`。

具体来说，如果`ArrayIndexOutOfBoundsException`在第一个外部`try`/`catch`块中被抛出，`fin`则不会分配该变量。添加`return`到外部`catch`块应该可以解决这个问题：

```
try {
    ...
} catch(ArrayIndexOutOfBoundsException e){
    System.out.println("Array index out of bound exception");
    return; // <<== Here
} 
```

使用该`return`语句，控制将永远不会到达已初始化的`fin.read()`除非`fin`已初始化，从而修复了编译时错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T16:02:20.193

解决此问题的一种简单方法是在 try 块中执行任何需要 fin 和 fout 的操作。这样，当它们打开失败时，您将永远不会尝试使用流。

```
try
{
    fout = new FileOutputStream(...);
    fin = new FileInputStream(...);

    // Code goes here

    fout.close();
    fin.close();
}
catch(FileNotFoundException e)
{
    // Error code - e should contain the file name/path
} 
```

此外，在声明变量时初始化变量始终是一种好习惯：

```
FileOutputStream fout = null;
FileInputStream fin = null; 
```

但是，这种方式（只是初始化为 null）你的编程逻辑不会导致编译器错误，但如果处理不当，如果你尝试块抛出，你可能会得到 NullPointerExceptions。

# javascript - javascript: 如何在游戏中交换玩家回合？

> ID：16196390
> 
> 赞同：1
> 
> 时间：2013-04-24T15:43:58.543
> 
> 标签：javascript, angularjs, tic-tac-toe

我正在开发两人游戏，我需要在每次移动后交换玩家。

目前我有这个javascript：

```
var play = function(player, opp) {
    var index;
    player.play(function(move) {
        index = move;
        board.board[index][1] = player.mark;
        if (board.weHaveWinner()==undefined||!board.isFull()) {
            play(opp,player);
        }
    });
} 
```

在对手计算他的移动之前不会绘制移动的玩家的问题。

我怎样才能使这个异步？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T15:55:47.090

运行递归函数时浏览器挂起。javascript函数`setTimeout(...)`会将控制权短暂地传递回浏览器以渲染您的板，然后在一段时间后它将恢复递归调用`play(...)`：

[https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)

所以是这样的：

```
window.setInterval(play(opp,player),100); 
```

所以浏览器用标记渲染棋盘，然后在 100 毫秒后继续调用 play 方法的下一层。

# java - Android 从所有文件夹加载媒体

> ID：16196391
> 
> 赞同：1
> 
> 时间：2013-04-24T15:43:58.990
> 
> 标签：java, android, android-mediaplayer

我刚刚学习了几个月的 Android 编程。我尝试创建简单的音乐播放器，但是当我想打开所有 mp3 文件时遇到问题，因为我只能打开 1 个特定文件夹，例如“sdcard”。

[我从AndroidHive](http://www.androidhive.info/2012/03/android-building-audio-player-tutorial/#)中找到了这个示例代码，只能从“sdcard”播放 mp3 文件。

```
public class SongsManager {
// SDCard Path
final String MEDIA_PATH = new String("/sdcard/");
private ArrayList<HashMap<String, String>> songsList = new ArrayList<HashMap<String, String>>();

// Constructor
public SongsManager(){

}

/**
 * Function to read all mp3 files from sdcard
 * and store the details in ArrayList
 * */
public ArrayList<HashMap<String, String>> getPlayList(){
    File home = new File(MEDIA_PATH);

    if (home.listFiles(new FileExtensionFilter()).length > 0) {
        for (File file : home.listFiles(new FileExtensionFilter())) {
            HashMap<String, String> song = new HashMap<String, String>();
            song.put("songTitle", file.getName().substring(0, (file.getName().length() - 4)));
            song.put("songPath", file.getPath());

            // Adding each song to SongList
            songsList.add(song);
        }
    }
    // return songs list array
    return songsList;
}

/**
 * Class to filter files which are having .mp3 extension
 * */
class FileExtensionFilter implements FilenameFilter {
    public boolean accept(File dir, String name) {
        return (name.endsWith(".mp3") || name.endsWith(".MP3"));
    }
} 
```

虽然我找到了另一个可以递归读取整个 sdcard 中的所有 mp3 文件的代码，但我很困惑，因为我不知道如何将函数调用到上面的代码中。

这是代码：

```
 // this method creates a list of file extensions that will be searched
//
public static ArrayList<String> createAudioExtensionsList()
{
    ArrayList<String> extensions = new ArrayList<String>();

    extensions.add(".mp3");
    extensions.add(".ogg");
    extensions.add(".flac");
    extensions.add(".wav");
    extensions.add(".3gp");

    return extensions;
}

// simple method to get a file extension (does not work with complex extensions like .tar.gz)
//
public static String getFileExtension(String fileName)
{ 
    String result = fileName.substring(fileName.lastIndexOf(".")); 
    return result;
}

// recursively scans a folder for all files containing one of the file extensions
//
public static LinkedList<File> getFilesInFolder(File rootDir, ArrayList<String> extensions)
{
    LinkedList<File> results = new LinkedList<File>();
    File[] files = rootDir.listFiles();

    for(File file : files)
    {
        if(file.isDirectory())
            results.addAll(getFilesInFolder(file, extensions));
        else
        {
            for(String s : extensions)
            {
                String ext = getFileExtension(file.getName());
                if(s.equalsIgnoreCase(ext))
                    results.add(file);
            }
        }
    }   
    return results;
} 
```

我相信**getFileExtension**会返回 mp3 歌曲的所有数据，但我不明白如何将其调用到主要函数中（**File home = new File(MEDIA_PATH);**）。我希望你能帮助或告诉我我们如何准确地调用这些函数。非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-27T12:05:18.013

**获取所有歌曲**

```
 cursor = getContentResolver().query(MediaStore.Audio.Media.EXTERNAL_CONTENT_URI, null, null, null, null);
    musicPath = new String[cursor.getCount()];
    musicTitle= new String[cursor.getCount()];
    count=cursor.getCount();
    cursor.moveToFirst();
    do{
        musicPath[cursor.getPosition()]=cursor.getString(cursor.getColumnIndexOrThrow(MediaStore.Audio.Media.DATA));
        musicTitle[cursor.getPosition()]=cursor.getString(cursor.getColumnIndexOrThrow(MediaStore.Audio.Media.DISPLAY_NAME));

    }while(cursor.moveToNext());

    arrayAdapter= new ArrayAdapter(this,R.layout.simple_list_item_1,musicTitle);
    MusicList.setAdapter(arrayAdapter);
    cursor.close(); 
```

**实现 musiclist onclick listner**。在那个听众中，您将获得点击歌曲的**位置**，因此通过意图**将该歌曲的路径传递给下一个活动。**并按如下方式播放。

要播放歌曲，请从列表中选择它并开始新的活动并按如下方式播放

```
Mediaplayer mp =new MediaPlayer();
mp.setDataSoruce(getIntent().getStringExtra("Path","NULL"));
mp.prepare();
mp.start(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T15:55:12.420

很抱歉让您失望，但所有这些手动搜索文件的代码已经由[内容提供者](http://developer.android.com/guide/topics/providers/content-provider-basics.html)自动完成，您所要做的就是向内容提供者查询音乐。

[Media Store](http://developer.android.com/reference/android/provider/MediaStore.html)保存对您要查询的字段的引用。

大概是这样的：

```
Cursor c = getContentResolver().query(
            MediaStore.Audio.Media.EXTERNAL_CONTENT_URI,
            new String[] { MediaStore.Audio.Media._ID,
                           MediaStore.Audio.Media.DATA,
                           MediaStore.Audio.Media.ARTIST,
                           MediaStore.Audio.Media.ALBUM,
                           MediaStore.Audio.Media.DISPLAY_NAME }, "1=1", null, null); 
```

然后你有一个带有音乐 ID 的光标，一个指向实际音乐的流，艺术家姓名，专辑名称和显示名称，

# google-api - Google 通讯录任务日历 API 费用

> ID：16196394
> 
> 赞同：3
> 
> 时间：2013-04-24T15:44:08.013
> 
> 标签：google-api, google-calendar-api, google-contacts-api, google-tasks

我知道 Google Maps API 会向大量使用 Maps API 的网站收费。

我找不到关于任务、日历和联系人收费的类似信息。有这样的限制还是完全免费的？谁能指出我明确说明的地方？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T00:40:10.047

这些是与 Google Apps 关联的 API。这些 API 没有成本。

要确认这一点，请转到您的 API 控制台 ( [https://code.google.com/apis/console/](https://code.google.com/apis/console/) )，然后单击服务。如果服务 (API) 有“定价”链接，那么它确实有自己的定价模式。如果不是，您将被限制在所示的礼貌限制内。

希望这可以帮助。祝你好运。

# android - 安卓模拟器的UDP端口转发；“adb forward udp:port udp:port”和 telnet localhost adb_port 不工作

> ID：16196396
> 
> 赞同：9
> 
> 时间：2013-04-24T15:44:11.123
> 
> 标签：android, android-emulator, adb, telnet

嗨，我正在使用 android 模拟器开发一个应用程序。我需要在可以从本地网络访问的某个端口 X 上注册一个 UDP 套接字。由于 Android 模拟器是 NAT 的，所以我需要端口转发。我关注了这篇文章“[使用 Android 模拟器通过 IP 和端口访问网络设备](https://stackoverflow.com/questions/8191192/reaching-a-network-device-by-ip-and-port-using-the-android-emulator)”。它表明我需要使用

```
adb forward tcp:localPort tcp:emulatorPort 
```

但是这个方案不适用于 udp（如果有人知道它的 UDP 版本，请告诉我）。对于 UDP，我找到了另一种解决方案，我需要按如下方式 telnet 到 adb 端口（我的 adb 在端口 5037 上运行）

```
telnet localhost 5037 
```

并使用 redir 命令重定向 UDP 端口

```
redir add udp:36963:36963 
```

但是当我远程登录时，它给出了以下错误

```
telnet 127.0.0.1 5037

Connecting to 127.0.0.1:5037...
Connection established.
To escape to local shell, press 'Ctrl+Alt+]'.

Connection closed by foreign host. 
```

我尝试了很多方法来解决这个问题，但没有结果。

我需要知道从外部网络访问模拟器的任何解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2020-11-11T18:36:00.187

The typical telnet port for the first emulator is 5554.

Try:

```
telnet localhost 5554 
```

Then you'll need to authenticate, the instructions are printed in the console. It should be something like copy the value from $HOME/.emulator_console_auth_token without the trailing '%'.

```
auth <auth_token>
redir add udp:36963:36963 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-05-05T03:49:17.317

这是错误的

```
redir add udp:36963:36963 
```

尝试这个：

```
redir add udp:portA udp:portB 
```

在大多数情况下，portA 和 portB 会有所不同。适应您的代码

# mysql - 为什么我会收到错误 #1005 - 无法创建表 'FinalProject.#sql-3875_a1' (errno: 150)

> ID：16196401
> 
> 赞同：0
> 
> 时间：2013-04-24T15:44:21.060
> 
> 标签：mysql, database

我正在尝试使用约束更新我的表，以允许我的主键转移到我的数据库中的其他表......它不会那样发生。这是我的代码

```
CREATE TABLE APPLICANT (
            Name VARCHAR(40) NOT NULL,
            Email VARCHAR(40) NOT NULL,
            CompanyName VARCHAR(50) NOT NULL,
            Phone VARCHAR(15) NOT NULL,
            Fax VARCHAR(15) NOT NULL,
            GovernmentEmployee BOOLEAN NOT NULL,
            Academic BOOLEAN NOT NULL,
            InternationalAttendee BOOLEAN NOT NULL,
            Speaker BOOLEAN NOT NULL,
            Presenter BOOLEAN NOT NULL,
            FirstTimeAttendee BOOLEAN NOT NULL,
            PRIMARY KEY (Name, Email)
);

CREATE TABLE TIME (
            TimeAnswer VARCHAR(30) NOT NULL,
            Name VARCHAR(40) NOT NULL,
            Email VARCHAR(40) NOT NULL,
            PRIMARY KEY (TimeAnswer, Name, Email)
);

CREATE TABLE DAY (
            DayAnswer VARCHAR(30) NOT NULL,
            Name VARCHAR(40) NOT NULL,
            Email VARCHAR(40) NOT NULL,
            PRIMARY KEY (DayAnswer, Name, Email)
 );

 CREATE TABLE LOCATION (
            Address VARCHAR(50) NOT NULL,
            ZIP NUMERIC(5) NOT NULL,
            LocationName VARCHAR(40) NOT NULL,
            LocationEmail VARCHAR(40) NOT NULL,
            State VARCHAR(2) NOT NULL,
            Country VARCHAR(30) NOT NULL,
            City VARCHAR(30) NOT NULL,
            PRIMARY KEY (Address, ZIP)
);

CREATE TABLE WORKSHOP_SESSIONS (
            Email VARCHAR(40) NOT NULL,
            Name VARCHAR(40) NOT NULL,
            WorkshopAnswer VARCHAR(15) NOT NULL,
            PRIMARY KEY (Email, Name)
 );

 CREATE TABLE WORKSHOP_DAY_TIME (
            Email VARCHAR(40) NOT NULL,
            Name VARCHAR(40) NOT NULL,
            DayAnswer VARCHAR(30) NOT NULL,
            TimeAnswer VARCHAR(30) NOT NULL,
            PRIMARY KEY (Email, Name, DayAnswer, TimeAnswer)
 );

 ALTER TABLE WORKSHOP_SESSIONS ADD CONSTRAINT information_workshop_sessions_fk
 FOREIGN KEY (Email, Name)
 REFERENCES APPLICANT (Email, Name)
 ON DELETE NO ACTION
 ON UPDATE NO ACTION;

 ALTER TABLE LOCATION ADD CONSTRAINT applicant_location_fk
 FOREIGN KEY (LocationEmail, LocationName)
 REFERENCES APPLICANT (Email, Name)
 ON DELETE NO ACTION
 ON UPDATE NO ACTION;

 ALTER TABLE DAY ADD CONSTRAINT applicant_day_fk
 FOREIGN KEY (Email, Name)
 REFERENCES APPLICANT (Email, Name)
 ON DELETE NO ACTION
 ON UPDATE NO ACTION;

 ALTER TABLE TIME ADD CONSTRAINT applicant_time_fk
 FOREIGN KEY (Name, Email)
 REFERENCES APPLICANT (Name, Email)
 ON DELETE NO ACTION
 ON UPDATE NO ACTION;

 ALTER TABLE WORKSHOP_DAY_TIME ADD CONSTRAINT time_workshop_day_time_fk
 FOREIGN KEY (TimeAnswer)
 REFERENCES TIME (TimeAnswer)
 ON DELETE NO ACTION
 ON UPDATE NO ACTION;

 ALTER TABLE WORKSHOP_DAY_TIME ADD CONSTRAINT day_workshop_day_time_fk
 FOREIGN KEY (DayAnswer)
 REFERENCES DAY (DayAnswer)
 ON DELETE NO ACTION
 ON UPDATE NO ACTION;

  ALTER TABLE WORKSHOP_DAY_TIME ADD CONSTRAINT workshop_sessions_workshop_day_time_fk
  FOREIGN KEY (Email, Name)
  REFERENCES WORKSHOP_SESSIONS (Email, Name)
  ON DELETE NO ACTION
  ON UPDATE NO ACTION; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T15:49:17.900

你所有的桌子都很好用。

[演示](http://sqlfiddle.com/#!2/d2190/1)

# java - 不同项目共享测试资源

> ID：16196402
> 
> 赞同：2
> 
> 时间：2013-04-24T15:44:21.693
> 
> 标签：java, eclipse, maven, junit

我有两个项目需要相同的测试资源。我使用 maven 进行依赖处理，使用 eclipse 运行测试。如何在不克隆的情况下与 maven 共享测试资源？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T15:50:01.267

您可以将测试资源放在另一个项目或 Maven 模块中，并从其他两个项目中添加对这个项目的依赖项（范围`test`应该可以工作）。新模块/项目中的测试资源`src/main/resources`不应该进入`src/test/resources`（我认为，否则它们将仅在`test`该项目的目标期间可用）

# php - 重定向到我的 custom404 错误页面 php

> ID：16196403
> 
> 赞同：0
> 
> 时间：2013-04-24T15:44:23.757
> 
> 标签：php, redirect, error-handling, http-status-code-404

我的根目录中有一个自定义的 404 错误页面。

我也编辑了我的 .httaccess 文件。

现在我想重定向到我的自定义 404 页面，如果我的页面中某些条件失败。

例如 $_SESSION[log]==1 失败。所以我的问题是

1.我应该在php中使用什么代码来做到这一点？

2.我如何犯其他类型的错误，如401和许多其他类型的错误？

在我的 .httaccess 页面中，我有这些行

```
ErrorDocument 404 http://mydomain.com/404custom.php 
```

而且我有一个 404custom.php 根据我的需要设计..简单的 HTML 页面...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T16:14:13.097

不要在错误情况下发送 Location 标头。而是发送正确的状态代码。您必须根据 http 规范发送正确的状态码。

```
header("HTTP/1.0 404 Not Found"); 
```

为了显示正确的自定义站点，您已经在 .htaccess 文件中有 ErrorDocument 语句。

特别是对于 403 未授权错误，发送正确的状态码很重要，这样浏览器才能做出准确的反应。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T15:48:48.617

1-要重定向您的用户，您可以使用：

```
<?php
   header('Location: http://www.example.com/404.html');
?> 
```

`header()`但是在使用没有`echo`甚至没有空格之前，您不能发送任何数据。

2- 对于其他错误：

```
ErrorDocument 400 /var/www/errors/index.html
ErrorDocument 401 /var/www/errors/index.html
ErrorDocument 403 /var/www/errors/index.html
ErrorDocument 404 /var/www/errors/index.html
ErrorDocument 500 /var/www/errors/index.html 
```

# php - 使用 preg_replace 用空格替换单词和特殊字符时遇到了一些麻烦

> ID：16196412
> 
> 赞同：0
> 
> 时间：2013-04-24T15:44:47.117
> 
> 标签：php, preg-replace

这是我目前的代码：

```
$title = preg_replace('/\bReactionDB\b/i',' ', $title_matches[1]); 
```

输入文本 = “它开始了！| ReactionDB”

除了“ReactionDB”，我希望它替换字符“|” 没有/空白。

我已经搜索了几个小时，但没有找到解决方案，有人知道该怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T15:48:02.163

再次致电`preg_replace`：

```
$title = preg_replace('/\bReactionDB\b/i',' ', $title_matches[1]);
$title = preg_replace('/\|/', '', $title); 
```

请注意，您需要转义`|`，因为它是一个特殊字符。

# sql - WHERE 子句中的条件过滤器

> ID：16196415
> 
> 赞同：2
> 
> 时间：2013-04-24T15:44:55.627
> 
> 标签：sql

如何在 SQL WHERE 子句中设置条件过滤器？例如，我有一个带有以下过程的参数@ID

```
SELECT * FROM myTable WHERE Column1 = 'test' AND Column2 = @ID 
```

但是，如果 @ID = -1 我不希望包含 SQL 的最后一部分（AND Column2 = @ID）

我意识到我可以用 2 个单独的查询创建一个 if 语句，但是这是一个很大的脚本，并且多次遇到同样的问题，所以我希望有比几乎重复几个查询更好的方法

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T15:46:05.817

这对 T-SQL 来说没问题：

```
SELECT * FROM myTable WHERE Column1 = 'test' AND (@ID = -1 OR Column2 = @ID) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T15:46:46.030

只需将 SQL 中的条件作为 OR 包含在内，注意括号

```
SELECT * FROM myTable WHERE Column1 = 'test' AND (@ID = -1 OR Column2 = @ID) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T15:47:38.770

一种选择：

```
SELECT * FROM myTable WHERE Column1 = 'test' AND @ID in (-1,Column2) 
```

# facebook - 如何防止 facebook 裁剪外部链接缩略图？

> ID：16196416
> 
> 赞同：3
> 
> 时间：2013-04-24T15:45:03.207
> 
> 标签：facebook, hyperlink, thumbnails, facebook-timeline

考虑在“请仔细阅读我们的新测试菜单”共享链接下显示的图像[http://www.facebook.com/CT.dineto 。](http://www.facebook.com/CT.dineto)

链接指向此页面： [http](http://www.dine.to/article2.html) ://www.dine.to/article2.html 根据 Facebook 调试工具，那里的 og 元标记似乎没问题。

请注意，原始图像不是正方形，而是 440x240px 大小，但是当在时间轴上显示为缩略图时，它会被裁剪为正方形，而不仅仅是调整大小。

所以我的问题是：有没有办法让缩略图调整原始图像的大小版本而不是裁剪和平方？

# vb.net - 只允许一个应用程序实例

> ID：16196424
> 
> 赞同：7
> 
> 时间：2013-04-24T15:45:25.773
> 
> 标签：vb.net, single-instance

我很抱歉我的标题可能会让你感到困惑（只是我不知道我应该用什么词）。我的问题是我不想让用户多次打开我的应用程序。请帮忙。先感谢您。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-24T15:49:31.277

使用“制作单实例应用程序”标志；在解决方案资源管理器中，右键单击项目并选择属性。有关更多详细信息，请参阅[此问题](https://stackoverflow.com/questions/1328792/make-single-instance-application-what-does-this-do)。

MSDN 文档[在这里](http://msdn.microsoft.com/en-us/library/vstudio/8fz4ssw2%28v=vs.100%29.aspx)。

截屏：

![在此处输入图像描述](https://i.stack.imgur.com/8gjec.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-21T17:18:56.337

使用“制作单实例应用程序”标志；在解决方案资源管理器中

# java - Java 错误：“您的安全设置已阻止本地应用程序运行”

> ID：16196425
> 
> 赞同：62
> 
> 时间：2013-04-24T15:45:27.913
> 
> 标签：java, security, applet

我正在尝试从我的浏览器（[Chrome](http://en.wikipedia.org/wiki/Google_Chrome)）运行这个用 Java 编写的简单 HelloWorld 代码：

```
public class HelloWorld extends JApplet {
public void init() {
    try {
        SwingUtilities.invokeAndWait(new Runnable() {
            public void run() {
                JLabel lbl = new JLabel("Hello World");
                add(lbl);
            }
        });
    }
    catch (Exception e) {
        System.err.println("createGUI didn't complete successfully");
    }
} 
```

[我用NetBeans](http://en.wikipedia.org/wiki/NetBeans)编译它，然后我创建了一个 WebApplication 项目。运行小程序的[HTML](http://en.wikipedia.org/wiki/HTML)代码是：

```
<html>
    <head>
        <title></title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>
    <body>
        <p><applet code="HelloWorld" archive="applet_HelloWorld.jar"  width="590" height="530"></applet></p>
    </body>
</html> 
```

如果从 NetBeans 运行小程序，它可以工作。但是当我通过双击运行 HTML 代码时，浏览器会弹出以下消息：

> 您的安全设置已阻止本地应用程序运行。

我尝试使用 Internet Explorer 和 Firefox，但没有。

此消息在 Java 的最后一次更新后开始出现。问题出在哪里？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-04-26T00:50:30.250

在阅读[Java 7 Update 21 Security Improvements in Detail](http://blog.eisele.net/2013/04/java-7-update-21-security-improvements.html)后提及..

> 通过引入的更改，很可能没有最终用户能够在自签名或未签名时运行您的应用程序。

..我想知道这将如何用于松散的类文件 - 所有“最简单”的小程序。

## 本地文件系统

> ![对话框：您的安全设置已阻止本地应用程序运行](https://i.stack.imgur.com/X7PAR.png)
> 您的安全设置已阻止本地应用程序运行

这是当 JRE 设置为默认的“高”安全设置时，由从**本地文件系统**加载的松散类文件组成的小程序看到的对话框。

* * *

请注意，JRE 的一个小怪癖仅在第 3 点产生。

1.  加载小程序页面以查看导致空控制台的损坏小程序符号。
    打开 Java 设置并将级别设置为**Medium**。
    关闭浏览器和 Java 设置。
2.  加载小程序页面以查看小程序。
    打开 Java 设置并将级别设置为**High**。
    关闭浏览器和 Java 设置。
3.  加载小程序页面以查看损坏的小程序符号***和上述对话框。***

## 互联网

如果您从**互联网**上加载这个[可调整大小的小程序演示](http://pscode.org/test/resize/)中看到的简单小程序（松散类文件） - 它拥有以下元素：**`applet`**

 **```
<applet
    code="PlafChanger.class"
    codebase="."
    alt="Pluggable Look'n'Feel Changer appears here if Java is enabled"
    width='100%'
    height='250'>
<p>Pluggable Look'n'Feel Changer appears here in a Java capable browser.</p>
</applet> 
```

它似乎也成功加载。暗示：-

***从本地文件系统加载的小程序现在受到比从互联网或本地服务器加载的更严格的安全沙箱。***

## 安全设置说明

从 Java 7 更新 51 开始。

*   **非常高**：*最安全的设置 - 仅允许运行由受信任机构的未过期证书标识的 Java 应用程序。*
*   **高（推荐的最低值）**：*由受信任机构的证书标识的 Java 应用程序将被允许运行。*
*   **中**-*所有 Java 应用程序在出现安全提示后将被允许运行。*

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-07-30T01:42:42.300

我今天遇到了同样的问题，我可以通过将 Java 控制面板上的安全设置从`HIGH`更改为`MEDIUM`.

好吧，不建议将 Java 安全设置永久设置为 MEDIUM，因为这将允许潜在的恶意软件在您的系统上运行而不会被阻止。所以我建议在运行你的小程序后你可能想把设置改回 HIGH。

[Java 控制面板的位置](http://www.java.com/en/download/help/jcp_security.xml#control%20panel)

[更改控制面板的设置](http://www.java.com/en/download/help/jcp_security.xml)

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-10-24T07:40:04.637

1.  转到控制面板
2.  双击*Java*
3.  打开*安全*选项卡
4.  选择*中*
5.  点击*应用*
6.  重新启动您的网络浏览器

而已！

![在此处输入图像描述](https://i.stack.imgur.com/nMs2Q.png)

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2013-11-15T15:16:27.490

如果您使用的是[Linux](http://en.wikipedia.org/wiki/Linux)，则可以使用这些设置`/usr/bin/jcontrol`（或获取当前 Java 工具的路径设置）。您还可以编辑文件`~/.java/deployment/deployment.properties`以设置“deployment.security.level=MEDIUM”。

令人惊讶的是，这些信息在 Oracle 网站上并不容易获得。我想念 java.sun.com...

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2015-02-06T13:35:48.133

如果您没有中等安全级别，那么您应该将您的应用程序添加到**异常站点列表**（*Java 控制面板*→*安全*选项卡）。

1.  在浏览器中打开您的小程序并复制地址栏的内容。 ![地址栏小程序地址截图](https://i.stack.imgur.com/GFWBd.jpg)
2.  转到*控制面板*→ *Java 控制面板*→*安全*选项卡，然后按`Edit Site List...`按钮。 ![Java 控制面板的安全选项卡的屏幕截图](https://i.stack.imgur.com/zhBkq.png)

3.  按下`Add`按钮，插入您的路径，然后按 Enter。 ![异常站点列表截图](https://i.stack.imgur.com/73vSf.png)

4.  按下`Continue`出现的安全警告。 ![安全警告的屏幕截图 - 文件位置警报提示](https://i.stack.imgur.com/FzMwq.png)

5.  再次打开小程序，不要忘记按`Run`弹出窗口。 [![安全警告截图](https://i.stack.imgur.com/Yak7p.png)](https://i.stack.imgur.com/Yak7p.png)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-01-15T19:36:09.507

如果您像我一样，其 Java 控制面板**未在“安全选项卡”下显示“安全”滑块**以将安全级别从“高”更改为“中”，请按照以下说明操作：[Java 已知错误：安全滑块不可见](http://www.java.com/en/download/help/jcp_securityslider.xml)。

* * *

### 症状：

> 安装后，启用/禁用 Java 的复选框和安全级别滑块不会出现在 Java 控制面板的安全选项卡中。7u10 及更高版本可能会发生这种情况。

### 原因

> 这是由于 Java 7u10 及更高版本与 JavaFX 的独立安装存在冲突。示例：如果安装了 Java 7u5 和 JavaFX 2.1.1，并且如果 Java 更新到 7u11，则 Java 控制面板不会显示复选框或安全滑块。

### 解析度

> 建议在安装 Java 7u10 及更高版本之前卸载所有版本的 Java 和 JavaFX。
> 请按照以下步骤解决此问题。
> 1\. 通过 Windows 卸载控制面板删除所有版本的 Java 和 JavaFX。[卸载 Java](http://www.java.com/en/download/help/uninstall_java.xml)的说明。
> 2\. 运行 Microsoft 卸载实用程序来修复损坏的注册表项，这些注册表项会阻止程序被完全卸载或阻止新的安装和更新。
> 3.下载并安装Windows[离线安装](http://www.java.com/en/download/windows_offline.jsp)包。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-01-17T11:47:24.573

我的问题是使用 Java8 在本地运行 portecle.jnlp 文件。

对我有用的是

1.  开始程序 --> Java --> 配置 Java...
2.  转到安全性-> 编辑站点列表...
3.  添加[http://portecle.sourceforce.net](http://portecle.sourceforce.net)
4.  在 CMD 提示符下启动*javaws portecle.jnlp*

在第 3 步中，您也可以尝试添加 file:///c:/path/portecle.jnlp，但此添加对我的情况没有帮助。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-03-29T01:43:43.467

我正在使用 Java Applets 随附的较旧的 Data Structure and Algs 书籍进行练习。所以我需要在本地存储和运行一些小程序。我目前正在运行带有 Edge、Chrome 和 IE 11 的 Windows 10 操作系统。

运行小程序似乎只允许在 IE11 中运行，并且正如其他人所提到的，您必须将小程序添加到例外列表中。我的问题是因为我将这些存储在本地，并在 IE 中打开它们，它以“C:\...”开头的路径打开，使用“file///...”添加完整路径，如其中之一所述其他答案对我不起作用。

修复：所以，我只是在异常站点列表中添加（不带引号）“file:///”，最后让它工作了。这也允许我运行本地存储的任何小程序，并且我不必为每个小程序路径显式添加异常。

我计划在使用完程序后从列表中删除异常，并仅在必要时将其添加回来。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-04-24T15:51:00.897

Java 小程序确实会产生安全风险，因此在大多数现代浏览器中都被禁用。您必须降低安全性才能运行它。[甲骨文](http://www.java.com/en/download/help/jcp_security.xml)为此提供了指南。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-06-04T09:00:52.500

*   从 Java 8 开始，Java 下的 Security 选项卡中没有“中等”风险设置

*   在您恢复到较旧的 Java 之前，您将不断收到此错误（建议使用 Java 7，不过它已经到了生命的尽头）。

*   安装 32 位和 64 位版本，因为浏览器仍然是 32 位，即使在 64 位机器上，64 位操作系统**

# html - 如何使一级子菜单与二级菜单重叠？

> ID：16196426
> 
> 赞同：2
> 
> 时间：2013-04-24T15:45:28.390
> 
> 标签：html, css

我一直在尝试实现`Level 2`菜单出现在菜单下方的效果`Level 1`。到目前为止，我已经分别尝试了`z-index: 10;`和。那对我不起作用。有没有其他方法可以达到预期的效果？`z-index: 5;``.nav > ul > li > ul``.nav > ul > li > ul > li > ul`

[演示小提琴](http://jsfiddle.net/HgUAd/)

![如何使这个 1 级子菜单与 2 级菜单重叠？](https://i.stack.imgur.com/inuDu.png)

标记：

```
<div class="nav">
    <ul>
        <li><a href="#">Item</a></li>
        <li><a href="#">Item</a></li>
        <li><a href="#">Item</a></li>
        <li>
            <a href="#">Hover</a>
            <ul>
                <li><a href="#">Submenu</a></li>
                <li><a href="#">Submenu</a></li>
                <li>
                    <a href="#">Hover Here</a>
                    <ul>
                        <li><a href="#">Submenu</a></li>
                        <li><a href="#">Submenu</a></li>
                        <li><a href="#">Submenu</a></li>
                        <li><a href="#">Submenu</a></li>
                        <li><a href="#">Submenu</a></li>    
                    </ul>
                </li>
                <li><a href="#">Submenu</a></li>
                <li><a href="#">Submenu</a></li>
            </ul>
        </li>
        <li><a href="#">Item</a></li>
        <li><a href="#">Item</a></li>
        <li><a href="#">Item</a></li>
    </ul>
</div> 
```

CSS：

```
*{
    margin: 0;
    padding: 0;
}
.nav{
    background: #282828;
    width: 100%;
}
.nav ul li{
    list-style: none;
    display: inline-block;
    margin-right: -4px;
    position: relative;
}
.nav a{
    background: #282828;
    color: #ddd;
    padding: 10px 20px;
    display: block;
    text-decoration: none;
    font-size: 24px;

}
.nav > ul > li > ul > li > a:hover, 
.nav > ul > li > ul > li > ul > li > a:hover{
    background: #404040;
    color: #AFAFAF; 
}
.nav > ul > li > ul, .nav > ul > li > ul > li > ul {
    position: absolute;
    white-space: nowrap;
}
.nav > ul > li > ul > li, .nav > ul > li > ul > li > ul > li {
    display: block;
    position: relative;
}
.nav > ul > li > ul, .nav > ul > li > ul > li > ul {
    opacity: 0;
    visibility: hidden;
}
.nav > ul > li > ul {
    top: 75px;
    transition: all .2s ease-in-out;
}
.nav > ul > li:hover > ul, .nav > ul > li > ul > li:hover > ul {
    opacity: 1;
    visibility: visible;
}
.nav > ul > li:hover > ul {
    top: 100%;
    transition: all .2s ease-in-out;
}
.nav > ul > li > ul > li > ul {
    top: 0;
    left: 0;
    transition: all 2s ease-in-out;
}
.nav > ul > li > ul > li:hover > ul{
    left: 100%;
    transition: all 2s ease-in-out;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T15:52:11.780

## 编辑 ：

知道了！！添加`z-index: -1;`到最后`ul`:)

```
.nav > ul > li > ul > li > ul{
     z-index: -1;
} 
```

请参阅[W3](http://www.w3.org/TR/CSS21/visuren.html#propdef-z-index)关于 CSS 2.1 z-index 和负值的文档：

> [...] 盒子可能有负堆栈级别 [...]
> 
> 在每个堆叠上下文中，以下图层按从后到前的顺序绘制：
> 
> 1.  构成堆叠上下文的元素的背景和边框。
> 2.  具有负堆栈级别（最负优先）的子堆栈上下文。
> 3.  流入的、非内联级别的、非定位的后代。
> 4.  未定位的浮动。
> 5.  流入的、内联级的、非定位的后代，包括内联表和内联块。
> 6.  堆栈级别 0 的子堆栈上下文和堆栈级别 0 的定位后代。
> 7.  具有正堆栈级别的子堆栈上下文（最不积极的优先）。

[更新和工作小提琴](http://jsfiddle.net/RtFzh/3/)

* * *

上一个答案：

~~将`z-index: n;`where n > 0 添加到您的 last `ul`，并使幻灯片转到左侧的 70%。~~

 ~~```
.nav > ul > li > ul > li:hover > ul{
    left: 70%;
    transition: all 2s ease-in-out;
}
.nav > ul > li > ul > li > ul {
    z-index: 1;                 /* Its position is already set to absolute, line 42 */
} 
```~~ 

~~[小提琴](http://jsfiddle.net/RtFzh/)~~

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T16:53:21.937

添加一个位置：relative; 和 z-index: 100 到“悬停在这里”链接和 z-index: 1; 到 Level2 子菜单

```
.nav a {
    background: #282828;
    color: #ddd;
    padding: 10px 20px;
    display: block;
    text-decoration: none;
    font-size: 24px;
    position: relative;
    z-index: 100;
}

.nav > ul > li > ul > li > ul {
    top: 0;
    left: 0;
    transition: all 2s ease-in-out;
    z-index: 1;
} 
```

小提琴：http: [//jsfiddle.net/YLPLx/1/](http://jsfiddle.net/YLPLx/1/)

# jquery - .next jQuery 不工作 - 需要切换多个 div

> ID：16196428
> 
> 赞同：0
> 
> 时间：2013-04-24T15:45:38.090
> 
> 标签：jquery

我需要切换一些 div 向下滑动等，并且一直在查看堆栈溢出，并且大多数帖子都指向使用 .next 函数，当我实现这个时，似乎什么也没发生。

我的 jQuery 是

```
$(document).ready(function(){
        $(".product_slidedown").click(function(){
            $(".slide_details").next('div.product_slidedown').slideToggle();
            });
        }); 
```

HTML是

```
<div class="product_slidedown" id="1">
        <div class="item_details_heading">
            Product Description
        </div>
        <div class="slide_details"></div>
    </div>
    <div class="product_slidedown" id="2">
        <div class="item_details_heading">
            Product Dimensions
        </div>
        <div class="slide_details"></div>
    </div> 
```

jsFiddle 在[http://jsfiddle.net/RxDcK/](http://jsfiddle.net/RxDcK/)

如果我取出 .next 函数，它可以工作，但会滑下两个 div。

预先感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T15:48:46.190

那是因为您正在调用`.next`最顶层的 div `#2`，. `.slide_details`是 的孩子`div.product_slidedown`，因此调用 next 不会返回任何内容。

将您的点击绑定更改为：

```
 $(document).ready(function(){
    $(".item_details_heading").click(function(){           
        $(this).next().slideToggle();
        });
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T15:49:41.440

我相信这就是您正在寻找的，请尝试：

[http://jsfiddle.net/RxDcK/1/](http://jsfiddle.net/RxDcK/1/)

```
$(document).ready(function () {
    $(".product_slidedown").click(function () {
        $(this).find(".slide_details").slideToggle();
    });
}); 
```

使用上面的代码，您可以在单击`.slide_details`的 div 中找到 div 。`.product_slidedown`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T15:50:49.603

尝试

```
$(document).ready(function () {
    $(".product_slidedown .item_details_heading").click(function () {
        $(this).next(".slide_details").slideToggle();
    });
}); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/EZnUP/1/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-24T15:54:56.757

您也应该使用推荐的`on()`方法......如下所示：[fiddle](http://jsfiddle.net/adamdehaven/V85q9/1/)

```
$(document).ready(function () {
    $(".product_slidedown").on('click', function () {
        $(this).find(".slide_details").slideToggle();
    });
}); 
```

# ruby-on-rails - 表单字段的未定义方法

> ID：16196433
> 
> 赞同：0
> 
> 时间：2013-04-24T15:45:48.797
> 
> 标签：ruby-on-rails

我正在开发一个高级搜索表单。我在视图/搜索中工作。现在我已经为我一直使用的用户个人资料创建了属性，例如邮政编码、年龄、性别、职业、宗教、教育等。我想将这些字段用于我的高级搜索。

当我包含 f.label 和 text 字段时，我得到一个未定义的方法。我希望我不必为搜索表单重新创建每个属性，因为考虑到我已经为用户配置文件完成了所有这些属性，这没有多大意义。任何帮助将不胜感激！

`/searches/new.html`（用于搜索）：

```
<%= form_for @search do |f| %>
    <div class="field">
        <%= f.label :keywords %><br/>
        <%= f.text_field :keywords%>
    </div>
    <div class="field">
        <%= f.label :zip_code %><br/>
        <%= f.text_field :zip_code %>
    </div>

    <div class="actions"><%= f.submit "Search" %></div>
    <% end %> 
```

/users/new.html（用于用户配置文件）：

```
<%= form_for @user do |f| %>
  <% if @user.errors.any? %>
    <div class="error_messages">
      <h2>Form is invalid</h2>
      <ul>
        <% @user.errors.full_messages.each do |message| %>
          <li><%= message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

    <div class="field">
        <%= f.label :email %><br/>
        <%= f.text_field :email %>
    </div>
    <div class="field">
        <%= f.label :password %><br/>
        <%= f.password_field :password %>
    </div>
    <div class="field">
        <%= f.label :username %><br/>
        <%= f.text_field :username %>
    </div>
    <div class="field">
        <%= f.label :zip_code %><br/>
        <%= f.text_field :zip_code %>
    </div>
    </div>
    <div class="field">I'm a
            <%= f.select :gender, ['man', 'woman']%>
            interested in 
            <%= f.select :gender, ['women', 'men', 'both']%>
            </div>
            <div class="field">
            Age <%= select(@object, :age, (18..75).to_a) %> to  <%= select(@object, :age, (18..75).to_a) %>
            </div>
    <div class="actions"><%= f.submit %></div>
<% end %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T15:58:49.757

您的`@search`对象是一个`Search`对象（或实际上是什么），而不是`User`.

Rails 不知道您的`Search`对象实际上没有这些字段，因此当它尝试检索不存在的字段时，它会爆炸。

有很多方法可以解决这个问题，包括给你`Search`一个`User`财产。

您也可以创建一个新的`User`并将其传递给用户表单 partial as `f`，这可能是我会采用的方法，尽管我不知道如果不尝试它会是什么样子。

# ios - 在 iOS 的自定义视图中设置项目的属性

> ID：16196435
> 
> 赞同：0
> 
> 时间：2013-04-24T15:45:57.127
> 
> 标签：ios, custom-view, awakefromnib

我正在创建一个 customView，例如，想设置标签的文本颜色并初始化标签的文本。

initWithFrame 是通用函数。

```
- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
    }
    return self;
} 
```

我已经尝试在 initWithFrame 中初始化标签，但它不起作用。但是当我在 awakeFromNib 中执行此操作时，它允许我设置文本颜色而不是文本（此值来自字典）

```
-(void)awakeFromNib
{
    //setting of the label textcolor
} 
```

初始化标签和其他东西的颜色和文本的正确方法是什么？

需要一些建议和指导...

编辑：

```
-(void)viewDidLoad
{
   [self updateViewWithDictionary:dictPassed];
} 
```

像这样的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T16:40:17.157

我在某些项目中所做的是公开一个公共方法，如下所示：

```
- (void)updateViewWithDictionary:(NSDictionary *)confDictionary; 
```

在那个字典中，我传递了我想要的参数，并在`UIView's`子视图中根据我想要的更新它。

**编辑1：**

读错你的问题，对不起。您有一个习惯`UIView`，希望在您`UIViewController`开始或实际使用它时进行更新。所以你应该有这样的东西：

```
@interface MyView : UIView
{

}

- (void)updateViewWithDictionary:(NSDictionary *)confDictionary;

@end 
```

从你的`viewDidLoad`：

```
-(void)viewDidLoad
{
   [self.customView updateViewWithDictionary:dictPassed];
} 
```

# linux - 使用带有 -p 选项的 netcat

> ID：16196438
> 
> 赞同：0
> 
> 时间：2013-04-24T15:46:05.140
> 
> 标签：linux, networking, netcat

我通过以下方式使用netcat

```
nc -l 3333    //for server

nc 127.0.0.1 3333  // for client 
```

有了这个，我可以将它用作双向聊天系统。

我的问题是，那为什么还有另一种选择

> -p ( -p source_port 指定 nc 应该使用的源端口，受权限限制和可用性限制。)

它也适用于 -p 选项。两者有什么区别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T16:01:22.390

TCP 连接由两个 TCP 端点组成，每个端点由一个 IP 地址和一个 TCP 端口组成。客户端通常选择一个随机端口，尽管您可以使用该选项强制`netstat`使用给定端口。`-p`

尝试：

```
adi@laps:~$ nc -l 3333 -p 4444
nc: cannot use -p and -l
adi@laps:~$ nc -l 3333 &
[1] 6025
adi@laps:~$ nc localhost 3333 -p 3333
nc: bind failed: Address already in use 
```

# gcc - linux/kfifo.h 文件中的“typeof((fifo) + 1)”是什么意思？

> ID：16196440
> 
> 赞同：3
> 
> 时间：2013-04-24T15:46:09.077
> 
> 标签：gcc, linux-kernel

我从 Linux 内核源代码中的 linux/kfifo.h 文件中找到了以下代码。

```
/**
 * kfifo_init - initialize a fifo using a preallocated buffer
 * @fifo: the fifo to assign the buffer
 * @buffer: the preallocated buffer to be used
 * @size: the size of the internal buffer, this have to be a power of 2
 *
 * This macro initialize a fifo using a preallocated buffer.
 *
 * The numer of elements will be rounded-up to a power of 2.
 * Return 0 if no error, otherwise an error code.
 */
#define kfifo_init(fifo, buffer, size) \
({ \
    typeof((fifo) + 1) __tmp = (fifo); \
    struct __kfifo *__kfifo = &__tmp->kfifo; \
    __is_kfifo_ptr(__tmp) ? \
    __kfifo_init(__kfifo, buffer, size, sizeof(*__tmp->type)) : \
    -EINVAL; \
}) 
```

从这段代码中，“typeof((fifo) + 1)”是什么意思？为什么不使用 'typeof(fifo) __tmpl = (fifo);'

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-27T08:22:38.290

@Wonil您的第一个假设是正确的。此构造用于检查是否将指针用作参数。

当给出一个普通的结构时，表达式将引发编译器错误，因为结构用于一元 + 和一个 int。

当给出一个指针时，二进制 + 将向它添加 1，这仍然是指向相同类型的指针，并且表达式在语法上是正确的。

# jquery - 使用什么来代替 JQuery val() 的值

> ID：16196443
> 
> 赞同：0
> 
> 时间：2013-04-24T15:46:12.660
> 
> 标签：jquery, html

如果按下它们，我需要从 div 中获取值 1 或 2。我已经制作了一个脚本，以便在按下时设置为活动状态，但如果按下第一个 div，我似乎无法找出如何提取值 1。HTML value 属性仅适用于输入元素，在这种情况下，我希望它在 div 上。这怎么可能？

**例子**

```
<div class="booking_search_cat darkgrey active">
    <p>Group room</p>
</div>
<div class="booking_search_cat lightgrey">
    <p>Lecture room</p>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T15:51:11.300

您可以简单地`data-*`为类别添加一个属性：

```
<div class="booking_search_cat darkgrey active" data-category="1">
    <p>Group room</p>
</div>
<div class="booking_search_cat lightgrey" data-category="2">
    <p>Lecture room</p>
</div> 
```

现在您所要做的就是在点击事件中提取该信息。

```
$('.booking_search_cat').on('click',function(){
  var categoryId = $(this).data('category');
  console.log(categoryId);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T16:09:58.930

您可以使用该`index()`函数来确定单击了哪个元素 -

```
$('.booking_search_cat').on('click',function(){
  var categoryId = $(this).index('.booking_search_cat');
  console.log(categoryId);
}); 
```

该`index()`函数返回（如名称所述）元素的索引。文档中有关于返回值的说明 -

> 如果选择器字符串作为参数传递，.index() 返回一个整数，指示 jQuery 对象中的第一个元素相对于选择器匹配的元素的位置。如果未找到该元素，.index() 将返回 -1。

### [这是关于 jsFiddle的一个*非常简单的演示*](http://jsfiddle.net/Tchuh/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T15:49:47.060

这样的事情应该可以解决问题：

```
<div class="booking_search_cat darkgrey active" data-value='group_room'>
  <p>Group room</p>
</div>

<div class="booking_search_cat lightgrey" data-value='lecture_room'>
  <p>Lecture room</p>
</div>

<script type='text/javascript'>
  var $booking_search = $(".booking_search_cat");

  $booking_search.click(function(){
    $booking_search.filter(".active").removeClass("active");
    $(this).addClass("active");

    alert("The value is "+$(this).data("value"));
  });
</script> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-24T15:50:59.420

您可以使用该`data-val`属性。[在这里拉小提琴](http://jsfiddle.net/6575r/1/)。

```
<div class="booking_search_cat darkgrey active" data-val='1'>
    <p>Group room</p>
</div>
<div class="booking_search_cat lightgrey" data-val='2'>
    <p>Lecture room</p>
</div>

$(".booking_search_cat").click(function(){
    alert($(this).data('val'));
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-24T15:51:45.137

使用数据属性

```
<div data-val="1" ... 
```

和

```
$(".bookingsearch").on("click",function() {
  $.post("someserverthing",{parm:$(this).data("val")},function(data) {
    alert(data);
  }
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-24T15:58:35.627

您可以[`.index()`](http://api.jquery.com/index/)在`click`处理程序中使用来确定单击了哪个（按 DOM 节点的顺序）：

```
$('.booking_search_cat').on('click', function() {
    alert($(this).index('.booking_search_cat')); // 0 if first was clicked, 1 if second was clicked, etc.
}); 
```

[在这里演示](http://jsfiddle.net/mU9T4/2/)

编辑：正如 Lix 所指出的，`.index()`需要一个选择器以便在计算索引时忽略兄弟姐妹。演示链接已更新。

# android - Android中的文本/布局对齐（textAlignment，gravity）

> ID：16196444
> 
> 赞同：77
> 
> 时间：2013-04-24T15:46:12.890
> 
> 标签：android, mobile, layout, text-alignment, layout-gravity

`android:textAlignment`和有什么区别`android:gravity`？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2013-04-24T16:27:35.567

我所看到的只是 textAlignment 是 View 类的成员，而重力是 TextView 类的成员。因此，对于 TextView 及其子类，您可以使用重力，而您可以将 textAlignment 用于所有视图。

由于 TextView 及其子类需要更多的文本对齐功能，因此您可以看到重力有更多选项，而 textAlignment 只有基本选项。虽然这只是我的猜测，因为我还没有找到任何关于差异的明确文档。

您可以看到这两个文档链接：[textAlignment](http://developer.android.com/reference/android/view/View.html#attr_android:textAlignment)和[Gravity](http://developer.android.com/reference/android/widget/TextView.html#attr_android:gravity)。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2017-09-29T15:18:28.407

使用 API 15，`android:textAlignment`可能无法获得预期的结果。下面的代码片段尝试`TextView`使用 将第一个对象居中`android:textAlignment="center"`。第二种用途`android:gravity="center_horizontal"`。`textAlignment`没有效果，而重力工作正常。使用 API 17+，`textAlignment`按预期将文本居中。

为了确保您的文本与所有版本正确对齐，我会选择重力。

```
<LinearLayout
    android:layout_width="50dp"
    android:layout_height="match_parent"
    android:orientation="vertical">

    <TextView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="5dp"
        android:text="Fri"
        android:textAlignment="center"
        android:textSize="16sp" />

    <TextView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="29"
        android:gravity="center_horizontal"
        android:textSize="18sp" />

</LinearLayout> 
```

API 15 中的结果布局：
![API 15 中的结果布局](https://i.stack.imgur.com/R2699.png)

API 17+ 中的结果布局：
![API 17+ 中的结果布局](https://i.stack.imgur.com/vf07P.png)

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2019-04-03T14:21:50.950

还有一点没有明确提到：

如果您的应用程序禁用了 RTL 支持，例如`android:supportsRtl="false"`在清单`application`标记中，则`View` `textAlignment`在工作时不适用于文本定位`TextView` `gravity`。

另一个更喜欢的理由`gravity`。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-04-24T16:22:30.613

据我所见， textAlignment 似乎大多未使用。根据它的描述，它应该只是右对齐或左对齐。Gravity 似乎是一种改进的 textAlignment。

# grails - 模拟标准计数 api grails/groovy

> ID：16196448
> 
> 赞同：1
> 
> 时间：2013-04-24T15:46:22.957
> 
> 标签：grails, groovy, mocking

我在尝试对服务类 api 进行单元测试时遇到问题

*MyService.groovy*

```
public int myMethod() {
  def cr = MyDomain.createCriteria()

  def myDomainCount = cr.count {
    isNull("column1")
  }

  return myDomainCount
} 
```

*MyTestClass.groovy*

```
class MyTestClassTests extends GrailsUnitTestCase {

  void testMyCount() {

    mockDomain(MyDomain)

    myCriteria = [count :{Closure cls -> 10}]
    MyDomain.metaClass.static.createCriteria = {myCriteria}

    int cnt = new MyService().myMethod()

    assert 10 == cnt
  }
} 
```

执行 myMethod() 时执行上述测试方法失败。上线失败

```
cr.count {
  isNull("column1")
} 
```

我在执行期间得到的堆栈跟踪：

```
groovy.lang.MissingMethodException: No signature of method: com.MyService.isNull() is applicable for argument types: (java.lang.String) values: [column1]
 Possible solutions: findAll(), findAll(groovy.lang.Closure), is(java.lang.Object), isCase(java.lang.Object) at
 org.codehaus.groovy.runtime.ScriptBytecodeAdapter.unwrap(ScriptBytecodeAdapter.java:55) at 
 org.codehaus.groovy.runtime.callsite.PogoMetaClassSite.callCurrent(PogoMetaClassSite.java:78) at
 org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:49) 
```

`cr.list`注意：如果我在两个地方（服务类和测试类）都使用相同的测试用例，则可以正常工作。我不知道为什么它在计数期间失败？？？？？？！！！！！！

任何想法都会有很大帮助。在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T17:43:58.327

解决这个问题的两种方法：

## 1 - 只需创建实例

由于您可以模拟您的域类，因此创建与您的服务查询匹配的实例。

```
@TestFor(MyService)
@Mock(MyDomain)
class MyServiceTests {
  void testService() {
    MyDomain instance = new MyDomain(...)
    assert instance.save(flush:true)
    def count = service.myMethod()
    assert 1 == count
  }
} 
```

## 2 - 模拟 grails.gorm.CriteriaBuilder

`createCriteria()`返回 的实例`grails.gorm.CriteriaBuilder`，您可以使用 Groovy`MockFor`更改 的行为`count{}`。

```
@TestFor(MyService)
@Mock(MyDomain)
class MyDomainServiceTests {

  void testWithGroovyMock() {
    def mockedCriteria = new MockFor(CriteriaBuilder)
    mockedCriteria.demand.count(0..999) { Closure cls ->
      return 10
    }

    def count

    mockedCriteria.use {
      count = service.countWithIsNull()
    }

    assert 10 == count

  }

} 
```

[您可以在此处](http://docs.codehaus.org/display/GROOVY/Groovy+Mocks)找到有关 Groovy MockFor 的更多信息。

另请注意，我正在使用 Grails 2.x 声明单元测试（注释）的方式。

# highcharts - Highcharts 重置缩放不会使数据点居中

> ID：16196450
> 
> 赞同：0
> 
> 时间：2013-04-24T15:46:25.977
> 
> 标签：highcharts

我正在尝试创建一个散点图，当您选择一个点时，它将创建一个具有不同数据的新图表。这工作正常。

问题是当您放大第二个散点图然后按重置缩放时，图表会调整大小并将所有数据推向左侧（我假设因为我所有的数据点都具有相同的 x 坐标或者因为值非常小）。我认为通过使用 setExtremes() 重置缩放将使用这些值作为最小值和最大值。

这是 JSFiddle：http: [//jsfiddle.net/kzBxB/5/](http://jsfiddle.net/kzBxB/5/)

下面是我用来创建新图表的函数。我是否需要更改任何内容以使“重置缩放”注册给定的 xAxis 最小值和最大值？

```
function newPoints() {
    var chart = jQuery('#container').highcharts();
    for (var i = 0; i < chart.series.length; i++) {
        serie = chart.series[i];

        //sets the new x axis and new data 
        chart.yAxis[0].setExtremes(0, 10);
        chart.xAxis[0].setExtremes(.001, .003);

        chart.addSeries({
            type: 'scatter',
            name: serie.name,
            data: [
                [.002, 1],
                [.002, 2],
                [.002, 3],
                [.002, 4],
                [.002, 5][.002, 6]
            ]
        }, false);

        //removes the old series
        serie.remove(false);
    }
    //redraws the chart
    chart.redraw();

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T11:25:07.983

问题是所有值都具有相同的 x 值，因此 Highcharts 不知道在哪里绘制它们（点的范围是多少）。在这种情况下，我建议使用 afterSetExtremes 事件：

```
 xAxis: {
        events: {
            afterSetExtremes: function(e){
                if(e.min === e.max){
                    this.setExtremes(.001, .003);
                }
            }
        }
    }, 
```

例如：http: [//jsfiddle.net/kzBxB/7/](http://jsfiddle.net/kzBxB/7/)

# ios - 在表格中创建对回答测验问题的响应

> ID：16196455
> 
> 赞同：0
> 
> 时间：2013-04-24T15:07:31.393
> 
> 标签：ios, ipad

我正在为医学生创建一个应用程序，其中一个视图是一种测验模式，它随机生成带有答案选项的表格视图的测验问题。在当前阶段，用户从表格视图中选择一个答案，表格视图下方的文本字段会告诉他们他们是否正确。我想要做的是，当用户点击一个答案时，如果答案是正确的，表格中选定的答案会以绿色突出显示。如果答案是错误的，选择的答案会变成红色，而表中的正确答案会变成红色。任何人都知道是否可以在同一张表中使用不同的选择背景颜色（以及所描述的逻辑是否可能）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T16:16:59.030

这应该可以解决问题，请注意它没有经过测试：

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    if(indexPath.row != self.correctAnswerRow)
    {
        UITableViewCell *wrongCell = [tableView cellForRowAtIndexPath:indexPath];
        [wrongCell setBackgroundColor:[UIColor redColor]];
    }

    UITableViewCell *correctCell = [tableView cellForRowAtIndexPath:
[NSIndexPath indexPathForRow:self.correctAnswerRow inSection:indexPath.section]];
    [correctCell setBackgroundColor:[UIColor greenColor]];
} 
```

# file - 如何创建一个网页，我可以在没有 FTP 服务器的情况下将文件上传到该页面

> ID：16196457
> 
> 赞同：4
> 
> 时间：2013-04-24T15:46:38.950
> 
> 标签：file, upload, photos

基本上我的问题是我需要为放置项目创建一个网页。该网页应允许任何用户将照片或文件上传到网站并供任何用户查看。有点像 Facebook 上传工具。

有谁知道解决此问题的最佳方法是什么，任何人都可以就我应该如何解决这个问题提出任何建议。我应该使用 JQuery 还是纯 Javascript。

任何建议或帮助将不胜感激。

亲切的问候，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-11-03T21:36:26.223

所以我有一些时间，我查看了 w3schools PHP 5 文件上传。最简单的方法是添加**index.html**`<form action="upload.php" method="post" enctype="multipart/form-data">     Select image to upload:     <input type="file" name="fileToUpload" id="fileToUpload">     <input type="submit" value="Upload Image" name="submit"> </form>`的正文*并创建一个*名为**upload.php**的 php 文件。在这个脚本中，您已经介绍了上传工作方式的“基线”以及如何限制上传大小和种类……只需阅读代码中的注释，您就会知道我在说什么。***首先在你的 php.ini 中设置 file_uploads = On***

 ******我希望这个对你有用。我不知道为什么我不能把 php 代码放在这里所以在[https://www.w3schools.com/php/php_file_upload.asp](https://www.w3schools.com/php/php_file_upload.asp)查看它服务器上的文件不会很快过期（可能在未来 10 年内)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T15:53:27.510

几乎没有搜索，我为你找到了这个。 [http://www.roseindia.net/servlets/upload-image.shtml](http://www.roseindia.net/servlets/upload-image.shtml) 希望可以为您指明正确的方向。

[如何异步上传文件？](https://stackoverflow.com/questions/166221/how-can-i-upload-files-asynchronously-with-jquery?rq=1)

很多同样的问题已经被问过，搜索从来没有伤害过。******

# sql - Group By 中的这个语句有什么作用？真的有必要吗？

> ID：16196459
> 
> 赞同：0
> 
> 时间：2013-04-24T15:46:42.377
> 
> 标签：sql, sql-server, select

在下面的 Group By 语句中做了什么`FirstName+' '+LastName`，真的有必要吗？我尝试省略它，它产生了相同的结果。

```
SELECT FirstName+' '+LastName AS Employee, tblEmployee.EID, SUM(GrossAmount) AS [2011 Gross], SUM(NetAmount) AS [2011 Net], SUM(GrossAmount) - SUM(NetAmount) AS [2011 Taxes & WH]
FROM tblEmployee INNER JOIN tblPaycheck ON tblEmployee.EID=tblPaycheck.EID
WHERE YEAR(PayDate)=2011
GROUP BY tblEmployee.EID, LastName, FirstName, FirstName+' '+LastName
HAVING SUM(NetAmount)>=45000
ORDER BY LastName, FirstName, tblEmployeeA7.EID 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T15:49:36.447

它将产生相同的结果，因为存在姓氏和名字，如果您删除了姓氏和名字而不是名字 + ' ' + 姓氏，也可以这样说。无论哪种方式，您都会得到相同的结果

Group by 按优先级取列。

# php - PHP DateTime 来自负 UNIX 时间戳，毫秒/微秒

> ID：16196465
> 
> 赞同：3
> 
> 时间：2013-04-24T15:46:54.130
> 
> 标签：php, datetime, timestamp

我想从负 UNIX 时间戳（1970 年之前）创建 PHP \DateTime 对象，微秒，没有太多脏代码。

`new \DateTime("@-100")`工作，但`new \DateTime("@-100.123")`没有。

`\DateTime::createFromFormat("U u", "100 123456")`工作，但`\DateTime::createFromFormat("U u", "-100 123456")`没有。

并且 \DateInterval 目前没有微秒。

到目前为止，我发现创建此类 DateTime 的唯一方法是解析字符串，`new \DateTime("1969-12-31T23:59:59.877GMT")`但我不喜欢 number->string->DateTime 链。有没有更明确的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T16:31:05.850

适用于 x64 的代码，用于在微秒之间进行转换，但我不太喜欢它。

```
$ts_mks = -100000012345;

$div = floor($ts_mks / 1000000);
$mod = $ts_mks % 1000000;
if($mod < 0) {
    $mod += 1000000;
}

$date_s = new \DateTime();
$date_s->setTimestamp($div);
$date_s->setTimezone(new \DateTimeZone("GMT"));
$ts_str = $date_s->format("Y-m-d\\TH:i:s.") . sprintf("%06dZ", $mod);

// result
$date = \DateTime::createFromFormat("Y-m-d\\TH:i:s.ue", $ts_str); 
```

Mush 更短但更神秘（结合整数负秒和正小数部分）：

```
$date = new \DateTime(sprintf("@%d 00:00:00.%06d", $div, $mod)); 
```

转换回来

```
$ts_mks = $date->getTimestamp() * 1000000 + (int) $date->format("u"); 
```

# wpf - 如何清除 MVVM 中的文本框？

> ID：16196466
> 
> 赞同：2
> 
> 时间：2013-04-24T15:46:54.690
> 
> 标签：wpf, xaml, mvvm, mvvm-light

我在 DataTemplate 中有一个 TextBox，声明如下：

```
<TextBox Grid.Row="1" Grid.Column="1" Margin="0,4,0,0">
<i:Interaction.Triggers>
    <i:EventTrigger EventName="LostFocus">
        <cmd:EventToCommand Command="{Binding DataContext.NotesEnteredCommand,
                            RelativeSource={RelativeSource FindAncestor, AncestorType=Window}}">
            <cmd:EventToCommand.CommandParameter>
                <MultiBinding Converter="{StaticResource SimpleMultiValueConverter}">
                    <Binding Path="Row.OID" />
                    <Binding Path="Text" RelativeSource="{RelativeSource FindAncestor, AncestorType=TextBox}" />
                </MultiBinding>
            </cmd:EventToCommand.CommandParameter>
        </cmd:EventToCommand>
    </i:EventTrigger>
</i:Interaction.Triggers>

<TextBox.InputBindings>
    <KeyBinding Key="Enter" Command="{Binding DataContext.NotesEnteredCommand, RelativeSource={RelativeSource FindAncestor, AncestorType=Window}}">
        <KeyBinding.CommandParameter>
            <MultiBinding Converter="{StaticResource SimpleMultiValueConverter}">
                <Binding Path="Row.OID" />
                <Binding Path="Text" RelativeSource="{RelativeSource FindAncestor, AncestorType=TextBox}" />
            </MultiBinding>
        </KeyBinding.CommandParameter>
    </KeyBinding>
</TextBox.InputBindings> 
```

这个 TextBox 的基本作用是在按下 Enter 键或失去焦点时执行 MVVM-Light RelayCommand。

我的问题是，在上述两种情况下，我无法在 MVVM 中通过 XAML 清除 TextBox 的**Text值。**在代码隐藏中很容易，但我无法在 MVVM 中弄清楚。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T15:53:20.570

如果文本是您的数据层和应用程序逻辑的一部分，则字符串应该存在于您的`Model`or中`ViewModel`并从那里清除

例如，

```
<TextBox Text="{Binding NewNote}" ... /> 
```

和

```
void NotesEntered(int oid)
{
    SaveNewNote(oid);

    NewNote = string.Empty;
} 
```

如果它只是 UI 层的一部分，则应使用代码隐藏将其清除。在 UI 后面的代码中包含特定于 UI 的逻辑是完全可以接受的，因为它仍然保持层的分离。

```
NewNoteTextBox_LostFocus(object sender, EventArgs e)
{
    (sender as TextBox).Text = string.Empty;
}

NewNoteTextBox_KeyDown(object sender, KeyEventArgs e)
{
    if (e.Key == Keys.Enter)
        (sender as TextBox).Text = string.Empty;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T18:50:45.853

您可以使用 UpdateSourceHelper。这确实帮助我在没有代码隐藏的情况下调用了一个事件。见这里[http://www.wiredprairie.us/blog/index.php/archives/1701](http://www.wiredprairie.us/blog/index.php/archives/1701)

您所要做的就是创建一个“UpdateSourceHelper”类，像这样将它与您的 xaml 连接起来

```
xmlns:local="using:WiredPrairie.Converter 
```

并将其绑定到您的 TextBox （或您想要绑定的任何内容）...

```
<TextBox Height="Auto" Margin="0,6" Grid.Row="1" TextWrapping="Wrap" TabIndex="0" 
     Text="{Binding Value}" 
     local:UpdateSourceHelper.IsEnabled="True" 
     local:UpdateSourceHelper.UpdateSourceText="{Binding Value, Mode=TwoWay}"/> 
```

如果你想在 Helper 中调用 LostFocus Event，你只需在 Helper 中添加这两行：

```
tb.LostFocus += AttachedTextBoxLostFocus;
tb.LostFocus -= AttachedTextBoxLostFocus; 
```

所以它看起来像这样：

```
TextBox tb = (TextBox)obj;
    if ((bool)args.NewValue)
        {                           
            tb.LostFocus += AttachedTextBoxLostFocus;
        }
    else
        {
            tb.LostFocus -= AttachedTextBoxLostFocus;
        } 
```

右键单击 AttachedTextBoxLostFocus 并生成方法。现在您可以像处理代码隐藏事件一样处理事件。

# .net - Firebird .NET 提供程序 GUID 转换

> ID：16196471
> 
> 赞同：1
> 
> 时间：2013-04-24T15:47:03.133
> 
> 标签：.net, firebird

我有一个使用 OCTETS 字符集的主键为 char(16) 的表。

它充满了以下内容

```
select gen_uuid() from rdb$database 
```

我在 VS 中生成了一个数据集。当我通过在 tableadapter 中选择 Preview 查看数据时，它已将其转换为十六进制。

此外，字段类型已设置为 System.GUID。

这可以吗，即firebird .net 提供程序是否在进行从OCTETS 到HEX 的转换，如果是这样，表中的值是否可以？

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T07:22:11.323

是的，如果你放在那里`Guid`，.NET 提供程序会将值转换为`char(16) octets`，反之亦然 -`char(16) octets`将`Guid`在读取时转换为。

# mysql - 为特定 ID 添加总共 3 行

> ID：16196473
> 
> 赞同：2
> 
> 时间：2013-04-24T15:47:05.180
> 
> 标签：mysql

我有三张桌子：

学生

```
-------------------------------------------------------------
studentId        first        last        gender        weight
-------------------------------------------------------------
1                John         Doe         m             185
2                John         Doe2        m             130   
3                John         Doe3        m             250 
```

升降机

```
-------------------
liftId        name        
-------------------
1             Bench Press
2             Power Clean  
3             Parallel Squat
4             Deadlift
5             Shoulder Press 
```

学生缆车

```
------------------------------------------------
studentLiftId   studentId     liftId     weight 
------------------------------------------------
1                1            1          185
2                2            3          130   
3                3            1          190
4                1            2          120
5                2            1          155   
6                3            2          145
7                1            1          135
8                1            1          205   
9                2            3          200
10               1            3          150
11               2            2          110
12               3            3          250 
```

我想要四个顶级列表：

1.  卧推

2.  平行深蹲

3.  强力清洁

4.  以上3项合计

我可以使用以下查询成功获取每个特定电梯的顶部列表：

```
SELECT s.studentId, s.first, s.last, s.gender, s.weight, l.name, sl.weight 
FROM Students s 
LEFT JOIN (
  SELECT *
  FROM StudentLifts 
  ORDER BY weight DESC
  ) sl ON sl.studentId = s.studentId 
  LEFT JOIN Lifts l ON l.liftId = sl.liftId 
  WHERE l.name = 'Bench Press' 
  AND s.gender = 'm' 
  AND s.weight > 170 
  GROUP BY s.studentId 
  ORDER BY sl.weight DESC 
```

但是，我被困在如何为每个学生添加每个电梯的最高总数。我怎样才能首先找到每个学生在每个电梯中的最高总数，然后将它们相加以获得所有三个电梯的总和？

**编辑**

我正在寻找的结果集将类似于：

```
-------------------------------------------------
studentId    first    last    weight
-------------------------------------------------
3            John     Doe3    585
1            John     Doe     475
2            John     Doe2    465 
```

我还忘了提到，我实际上想要两张名单，一张给 170 岁以上的学生，一张给 170 岁以下的学生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T16:03:09.150

```
SELECT -- join student a total weight to the student table 
    A.studentId,
    A.first,
    A.last,
    C.totalWeight
FROM 
    Student A,  
    (
         SELECT  -- for each studet add the max weights 
             sum(B.maxWeight) as totalWeight, 
             B.studentID
         FROM (
             SELECT  -- for each (student,lift) select the max weight 
                 max(weight) as maxWeight, 
                 studentId, 
                 liftID
             FROM 
                 StudentLifts
             GROUP BY 
                 studentId,
                 liftID
         ) B
         GROUP BY 
            studentId
     ) C
WHERE 
    A.studentID = C.studentId 
    -- AND A.weight >= 170
    -- AND A.weight < 170
            -- pick one here to generate on of the two lists. 
```

# node.js - Mongoose nodejs - 用数组分组

> ID：16196480
> 
> 赞同：0
> 
> 时间：2013-04-24T15:47:19.973
> 
> 标签：node.js, mongodb, mongoose

我有一个具有以下架构的集合：

```
{OrderId : id, CustomerId : id, amount: Number, otherPayers : [{name : String, amount : Number}]} 
```

我想对一个 customerId 的所有订单的“金额”进行平均，我可以通过`customerId`使用 avg on amount 分组来使用聚合来做到这一点。

现在，我希望输出“amount”字段不仅是“amount”的平均值，而且是“otherPayers”字段的“amount”字段的平均值。

我看过 mapreduce 但我无法让它工作。

任何想法？在 SQL 中，使用子查询会非常简单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T07:42:49.873

我猜您想将 otherPayers 数组中的所有金额加上文档顶层的金额字段平均在一起。以下是使用聚合框架的方法：

```
unwind = { $unwind : "$otherPayers" };
group =  { $ group : { _id : "$CustomerId", 
                       amt : { $first : "$amount" }, 
                       count : { $sum : 1 }, 
                       total : { $sum : "$otherPayers.amount" }
         } };
project = { $project : { _id : 0, 
                         CustomerId : "$_id", 
                         avgPaid : { $divide : [ 
                                       { $add : [ "$total", "$amt" ] },  
                                       { $add : [ "$count", 1 ] } 
                         ] } 
} };

db.collection.aggregate(unwind, group, project); 
```

# wordpress - 将 single_tag_title 存储在变量中

> ID：16196481
> 
> 赞同：3
> 
> 时间：2013-04-24T15:47:20.520
> 
> 标签：wordpress, variables, tags, echo, archive

在 Wordpress 中，以下内容将在存档列表中回显当前选择的标签：

```
single_tag_title(); 
```

有谁知道如何将它存储在一个变量中，这样我就可以使用一个普通的 php 变量来回显相同的字符串，如下所示：

```
echo $tagSlug; //This shows the same string as the single_tag_title() function 
```

我试过这个：

```
$tagSlug = single_tag_title();
echo $tagSlug; 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-24T15:50:07.827

single_tag_title 接受两个参数。$前缀和$显示。$prefix 设置应该在标签之前回显/返回的字符串，$display 确定标签是回显还是作为变量返回。请参阅[此处的文档](https://codex.wordpress.org/Function_Reference/single_tag_title)。

```
$tagSlug = single_tag_title("", false);
echo $tagSlug; 
```

# python - Python minidom：如何访问元素

> ID：16196501
> 
> 赞同：0
> 
> 时间：2013-04-24T15:48:05.773
> 
> 标签：python, xml, minidom

我正在用 Python 解析 XML 表。XML 的结构如下：

```
<layer1>
    <layer2>
        <element>
            <info1></info1>
        </element>
        <element>
            <info1></info1>
        </element>
        <element>
            <info1></info1>
        </element>
    </layer2>
</layer1> 
```

如果没有 layer2，我可以毫无问题地访问 info1 中的数据。但是对于layer2，我真的有麻烦了。我可以通过以下方式向 info1 发送地址：`root.firstChild.childNodes[0].childNodes[0].data`

所以我的想法是，我可以这样做：`root.firstChild.firstChild.childNodes[0].childNodes[0].data`

＃＃＃＃＃＃＃＃＃＃ 解决方案

所以这就是我解决问题的方法： from xml.etree import cElementTree as ET

从 xml.etree 导入 cElementTree 作为 ET

```
tree = ET.parse("test.xml")
root = tree.getroot()

for elem in root.findall('./layer2/'):
    for node in elem.findall('element/'):
        x = node.find('info1').text
        if x != "abc":
            elem.remove(node) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T15:51:14.273

这行得通吗？（我对 python 并不感到惊讶，只是一个快速的想法）

```
name[0].firstChild.nodeValue 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T15:51:33.873

`minidom`如果可以提供帮助，请不要使用API。改用[ElementTree API](http://docs.python.org/2/library/xml.etree.elementtree.html)；该[`xml.dom.minidom`文档明确指出](http://docs.python.org/2/library/xml.dom.minidom.html)：

> 尚未精通 DOM 的用户应考虑改用该`xml.etree.ElementTree`模块进行 XML 处理。

这是一个使用`ElementTree`API 访问您的元素的简短示例：

```
from xml.etree import ElementTree as ET

tree = ET.parse('inputfile.xml')

for info in tree.findall('.//element/info1'):
    print info.text 
```

这使用 XPath 表达式来列出`info1`元素中包含的所有元素`element`，而不管它们在整个 XML 文档中的位置。

如果您只需要第*一个* `info1`元素，请使用`.find()`：

```
print tree.find('.//info1').text 
```

使用`DOM`API​​，`.firstChild`可以很容易地成为一个`Text`节点而不是一个`Element`节点；您总是需要遍历`.childNotes`序列以找到第一个`Element`匹配项：

```
def findFirstElement(node):
    for child in node.childNodes:
        if child.nodeType == node.ELEMENT_NODE:
            return child 
```

但对于你的情况，也许使用[`.getElementsByTagName()`](http://docs.python.org/2/library/xml.dom.html#xml.dom.Element.getElementsByTagName)就足够了：

```
root.getElementsByTagName('info1').data 
```

# git - 具有上游和起源以及 Heroku 暂存和生产的 Git 工作流

> ID：16196502
> 
> 赞同：2
> 
> 时间：2013-04-24T15:48:06.647
> 
> 标签：git

对于这种情况，我对建议的工作流程有一些疑问：

我有两个 Github 存储库，一个是上游的，一个是分叉的（起源）。从我的本地存储库中，我不断向源推送并向上游发送拉取请求。当我认为在 staging 上测试一切都正确时，我将我的开发分支推送到远程 Heroku staging。

我的问题是：我的本地开发分支与我的起源是最新的，但我真正想要的是推送上游的内容（因为它实际上是每个潜在的开发人员代码所在的位置）。这样做的正确方法是什么？我是否应该创建另一个本地分支 develop-upstream 来“跟踪”上游的开发分支？

# c++ - fstream 接受文件夹路径并且是 (`good()==1`)

> ID：16196503
> 
> 赞同：1
> 
> 时间：2013-04-24T15:48:07.650
> 
> 标签：c++, fstream

```
#include<iostream>
#include<fstream>

int main()
{

std::string folderPath("./");

std::string fileFoo = folderPath + "";
std::string fileBar = folderPath + "nonexisting_file"; 

std::ifstream foo(fileFoo.c_str());
std::ifstream bar(fileBar.c_str());

std::cout << foo.good() << std::endl;
std::cout << bar.good() << std::endl;

} 
```

输出：

```
1
0 
```

1.  流文件路径是目录是什么意思。
2.  在这种情况下如何检查`fstream`是否可读，因为`good()`不起作用。

**编辑**：

这似乎是相关的：

平台：Linux (Ubuntu 12.04)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T15:51:20.663

根据文件系统的不同，目录可能很容易成为**一种**文件并且没有太大区别。除非您使用某些第三方库，否则我强烈建议您使用`boost::filesystem`.

# c# - 当用户将鼠标移到项目上时，在组合框的 DropDownList 中获取突出显示的项目？

> ID：16196510
> 
> 赞同：1
> 
> 时间：2013-04-24T15:48:29.920
> 
> 标签：c#, winforms, drop-down-menu, combobox

上下文是用户单击组合框并下拉列表（称为下拉列表），用户可以在选择一个之前将鼠标移到下拉列表上，我想在用户这样做时获得突出显示的项目。这可以用于某些目的，例如在我的表单上的另一个控件中显示悬停的项目文本......

我可以对此有任何解决方案吗？

谢谢！

# intellij-idea - Tomcat 的 IntelliJ 项目本地部署配置 - 本地服务器根 URL

> ID：16196512
> 
> 赞同：1
> 
> 时间：2013-04-24T15:48:36.523
> 
> 标签：intellij-idea, tomcat7

我正在尝试在 IntelliJ（版本 12）中控制本地 Tomcat 部署，因此希望配置与 Tomcat 的本地连接。

我尝试添加一个指定“本地或安装文件夹”的服务器。一切似乎都很好，但要求我指定“**网络服务器根 URL** ”。

作为一个本地服务器，我想要像'/opt/tomcat/tomcat7-dev'这样的东西，它指向我的tomcat安装的根目录，但是IntelliJ在逻辑上说这个' **URL无效**'。

**关于为 IntelliJ 部署指定本地服务器的正确方法有什么建议吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T16:36:10.967

本地 Tomcat 配置不需要任何 Deployment 设置或映射，您只需配置服务器、工件和运行配置即可启动服务器并部署工件，[更多详细信息可以在教程中找到](http://wiki.jetbrains.net/intellij/Creating_a_simple_Web_application_for_Tomcat_in_IntelliJ_IDEA_12)。

# image - 图片链接旁边出现线条

> ID：16196517
> 
> 赞同：0
> 
> 时间：2013-04-24T15:48:47.913
> 
> 标签：image, outlook, hyperlink, mailchimp

我一直无法弄清楚为什么会这样。我正在使用 MailChimp 发送时事通讯，并且在 Outlook 2003 中，我在任何图像的右侧都有一行（类似于连字符），这是一个链接。（见附图）

[http://clickstream.ie/img/line.png](http://clickstream.ie/img/line.png)

这是顶部徽标的代码：

```
<a href="#">
    <img alt="clickstream logo" title="clickstream logo" src="http://gallery.mailchimp.com/0f36ab4eb559a3dd979199c25/images/clickstream_logo.jpg" style="max-width: 250px;border: 0;height: auto;line-height: 100%;outline: none;text-decoration: none;vertical-align: bottom;" class="mcnImage" width="176">
</a> 
```

有谁知道为什么会发生这种情况，或者对这个问题有任何经验。

在 Gmail 和 Hotmail (Outlook) 中似乎没问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T16:01:11.333

该行可能不是来自图像，而是来自`<hr>`您可能已包含在页面中某处的代码。现在你要做的就是，尝试将每个 div 围绕该区域的位置更改为 position: absolute; 您可能会看到其他 div 移动并忽略了该行。但如果没有，那么您必须检查您的代码并确保您具有以下正确性。

```
line-height: ;
outline:;
ertical-align:; 
```

您还可以撤消已添加到 div 的任何边框。但如果不起作用，那么它可能来自您的外部样式表。

# html - Powershell - 如何停止文件中的 XML 自动更正 html？

> ID：16196520
> 
> 赞同：0
> 
> 时间：2013-04-24T15:48:52.083
> 
> 标签：html, xml, powershell

有什么方法可以阻止 Powershell 转换/读取文件中的 html 字符？

如果我只是打开然后保存一个 xml 文件：

```
[xml]$xml = get-content "c:\file.xml"
$xml.save("c:\file.xml") 
```

以下键已更改

从：

```
<add key="TimeFormat" value="h:mm&#160;tt"/> 
```

至：

```
<add key="TimeFormat" value="h:mm tt" /> 
```

关键是，我不希望它更改任何文本，我希望 HTML 实体保持原样。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T15:55:58.463

`&#160;`( `0xA0`) 是 ISO-8859-1 中的不间断空格，但在 UTF-8 中不是有效字符。可能发生以下两种情况之一：

1.  Powershell 期望（或您的 XML 文件声称是）UTF-8，并且 Powershell 正在默默地用空格替换无效字符。如果是这种情况，它真的应该抱怨一条错误消息。
2.  （更有可能）XML 文件具有指定 ISO-8859-1 的正确标头，并且 Powershell 正在用实际的“0xA0”字节替换实体。就 XML 标准而言，这是一件非常有效的事情，您必须查看 Powershell 的 XML 文档，看看是否可以为 XML 序列化程序提供选项以防止这种转换。

# sql-server - 为什么查询显示为挂起任务状态和 LCK_M_X 等待类型

> ID：16196521
> 
> 赞同：3
> 
> 时间：2013-04-24T15:48:52.903
> 
> 标签：sql-server, sql-server-2012, sqlperformance, activity-monitor

我正在使用 C# 4.0 开发 winform 应用程序，后端 SQL SERVER 2012。有时，我的软件似乎挂起，因为查询变得挂起，因为一个查询在挂起模式下显示在活动监视器中，这个挂起的查询成功运行了几次但有时会出现这个问题。

活动监视器显示：

任务状态：暂停

命令：更新

应用程序：.net SqlClient 数据提供者

等待时间：5673610.....（不限）

等待类型：LCK_M_X

等待资源：keylock hobtid=72057594058768384 dbid=14 id=lock2dbc30880 mode=X associatedObjectId=72057594058768384

查询状态变为挂起的原因是什么。

我怎样才能阻止它被暂停？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-18T14:35:58.987

`LCK_M_X`表示查询正在等待在某处获取排他锁。尝试使用相同的数据库对象检查其他应用程序或线程，以查看是否存在竞争条件或没有自行清理的进程。

也许在您的代码中某处还有另一个 db 调用或嵌套的 proc 调用？

尝试使用 Sql Profiler 来识别锁定请求的来源 - 这*可能会*有所帮助，但如果不了解更多信息就很难说。

```
select * from sys.dm_tran_locks 
```

高温高压

# android - 在xml中获取json字符串

> ID：16196524
> 
> 赞同：-1
> 
> 时间：2013-04-24T15:49:06.330
> 
> 标签：android, parsing, xml-parsing

我真的对 xml 解析感到震惊。我有一个这样的 xmlstring

```
<?xml version="1.0" encoding="utf-8"?>
<string xmlns="http://a.com  /">{"Id":87,"Name":"jo@a.com","FirstName":"Jo","LastName":"var","Profile":"","Designation":""}</string> 
```

我想将json作为字符串..我不知道该怎么做..

我在下面给出的尝试..我真的很震惊请帮助我

```
 DocumentBuilderFactory dbf =
                                    DocumentBuilderFactory.newInstance();
                                DocumentBuilder db = dbf.newDocumentBuilder();
                                InputSource is = new InputSource();
                                is.setCharacterStream(new StringReader(fromServer));

                                Document doc = db.parse(is);
                                NodeList nodes = doc.getElementsByTagName("data"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T16:20:08.163

尝试这个

我发布这个答案只是为了提供帮助，但这不是最好的方法。

```
<?xml version="1.0" encoding="utf-8"?>
<string xmlns="http://a.com  /">

</string> 
```

这些将与您的响应一起出现，因此它们每次都是相同的。只需像这样用空白空间替换它们

```
String str=yourjsonresponse;

str=str.replace("<?xml version=\"1.0\" encoding=\"utf-8\"?>"," ");
str=str.replace("<string xmlns=\"http://a.com  /\">"," ");
str=str.replace("</string>"," "); 
```

看起来很奇怪，但会起作用。

另一种方法是使用`jsoup`, Decice 你想要的东西。

**但最好的将是获得纯 json 响应**

# java - 制作可执行jar时遇到问题

> ID：16196525
> 
> 赞同：0
> 
> 时间：2013-04-24T15:49:08.720
> 
> 标签：java, netbeans, jar, lwjgl

当我尝试在 netbeans 中创建可执行 jar 时，我收到此错误

C:\lwjgl\lwjgl-2.8.5\res 是目录或无法读取。不复制库。不复制库。 res 文件夹包含程序依赖于运行的 jpgs 和 wavs 等文件。我正在使用 lwjgl，这会是问题的一部分吗？这可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T16:57:32.123

尝试这个

1.  右键单击您的项目文件夹，然后单击**>>>>clean and build<<<<**

2.  右键单击您的项目文件夹单击**>>>Properties<<<<** 您应该会看到项目文件夹的位置，通常这应该在 NetbeansProject 文件夹下的文档文件夹中。在里面找到你的项目名称文件夹是一个名为**>>>dist<<<**的文件夹，在那里你应该找到你的项目名称和一个小的 java cafe 图像，这是你的 jar 文件。

# javascript - 用图像替换字符串中的标志，无限次

> ID：16196528
> 
> 赞同：1
> 
> 时间：2013-04-24T15:49:13.383
> 
> 标签：javascript, regex, replace

我有一个远程加载的字符串，字符串里面有很大一部分文本。在部分文本中，有一个标志，基本上是由 excelemation 标记包围的单词“图像”（例如：！图像！） - 将其视为图像的占位符。

我想做的是让javascript替换！image！用一段实际的html：

```
<img src="./images/the_image.png" class="image"> 
```

我知道它可以简单地做到这一点：

```
var theString = 'some string goes here !image!';
theString.replace('!image!', '<img src="./images/the_image.png" class="image">'); 
```

但是，这不允许您进行多次替换。

有没有办法在这里全部替换？我假设正则表达式可能是一个选项，但不幸的是，由于它在条件中有符号（感叹号），因此无法弄清楚从哪里开始。

我查看了有关 SO 的相关帖子，但没有一个有效（我再次假设是由于符号）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T15:51:53.097

1.  使用正则表达式分隔符
2.  不要对正则表达式使用引号
3.  使用`g`标志进行全局替换

所以固定的说法是：

```
theString.replace(/!image!/g, '<img src="./images/the_image.png" class="image">'); 
```

# c# - 在 C# 中，您可以从 main 返回默认的 int 值吗？

> ID：16196529
> 
> 赞同：0
> 
> 时间：2013-04-24T15:49:14.143
> 
> 标签：c#

我想从 main 返回一个默认的 int 值。

考虑以下：

```
using System;
class Class1
{
    static int Main(string[] args)
    {
        int intReturnCode = 1;
        int intRandNumber;

        Random myRandom = new Random();
        intRandNumber = myRandom.Next(0,2);
        if(intRandNumber ==1)
        {
            throw new Exception("ErrorError");      
        }
        return intReturnCode;
    }
} 
```

遇到异常时，我无法设置返回码。

是否可以在 main 中有默认返回码？

**澄清：**我有一个抛出未处理异常的程序。我在 try catch 中有应用程序，但是一些错误（可能内存不足、stackoverflow 等）仍在冒泡并导致我的应用程序在生产中失败。

为了解决这个问题，我添加了代码来捕获未处理的异常。

这被添加到主要：

```
AppDomain.CurrentDomain.UnhandledException += new UnhandledExceptionEventHandler(OnUnhandledException); 
```

现在，当发生未处理的异常时，我有了这个方法。

```
public static void OnUnhandledException(object sender, UnhandledExceptionEventArgs e)   
{ 
    //here's how you get the exception  

    Exception exception = (Exception)e.ExceptionObject;                 

    //bail out in a tidy way and perform your logging
} 
```

问题是我不再在 Main 中，我想以非零退出代码退出。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T16:24:35.647

未处理的异常是**实现定义的行为**。任何事情都有可能发生；CLR 可以决定设置它认为合适的进程的返回代码，它可以启动一个调试器，它可以做任何它想做的事情。您不能依赖任何包含未处理异常的程序的任何行为。

如果您想要具有可预测的行为，例如确定进程结束时的返回码是什么，那么总共必须*有零*个未处理的异常。

如果您有一个第三方组件抛出未处理的内存异常，那么您最好的选择是：*修复该组件中的错误*。如果你不能这样做，那么*将组件隔离到它自己的进程或它自己的 appdomain*中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-24T15:51:24.440

问题实际上是为什么您要抛出异常`main`而不是提供指示错误的返回代码？而不是你在做什么，我的代码如下所示：

```
static int Main(string[] args)
{
    int intRandNumber;

    try
    {
        Random myRandom = new Random();
        intRandNumber = myRandom.Next(0,2);
        if(intRandNumber ==1)
        {
            Console.WriteLine("Got invalid random number!");
            return 0;
        }
    }
    catch (Exception exp)
    {
        Console.WriteLine("Strange ... an error occurred! " + exp.ToString());
        return -1;
    }

    return 1;
} 
```

根据经验，您永远不应该抛出异常来控制程序流。如果可以的话，处理像*oops 这样的情况，我得到了错误的数字*而不会引发异常。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-24T15:52:12.343

在主线程中抛出异常会结束执行而没有到达`return`: 那是你得到“控制台应用程序已停止工作，你想调试吗？”的时候。来自操作系统的对话框。在这些`Main`条件下不能返回任何东西，因为没有任何东西可以返回。

如果您想在遇到异常时返回某些内容，请像这样编写程序代码：

```
// Put your implementation into a private method
private static int DoWork(string[] args) {
    ... // Do actual work, and throw exceptions if you need to
    return intReturnCode;
}
// The Main method calls the implementation, and returns the value
// returned from the implementation if everything goes well.
// If an exception is thrown, however, Main could return another value
// of its choice.
public static int Main(string[] args) {
    try {
        return DoWork(args);
    } catch {
        return myDefaultReturnCode;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T15:52:58.197

捕获您的异常并在 finally 块中设置 return 语句

```
using System;
class Class1
{
    static int Main(string[] args)
    {
        try
        {
            int intReturnCode = 1;
            int intRandNumber;

            Random myRandom = new Random();
            intRandNumber = myRandom.Next(0,2);
            if(intRandNumber ==1)
            {
                throw new Exception("ErrorError");      
            }
        }
        catch(Exception e)
        {
          // ...
        }
        finally
        {
            return intReturnCode;
        }
    }
} 
```

# microcontroller - GPRS 调制解调器作为 TCP 客户端最终命令不起作用

> ID：16196536
> 
> 赞同：1
> 
> 时间：2013-04-24T15:49:37.483
> 
> 标签：microcontroller, at-command, gprs

我在 wavecom 调制解调器上使用了以下命令序列，到目前为止，我已经确定发送最后一个命令似乎会重置设备，而发送其他命令则可以正常工作。我已经使用飞思卡尔 jm128 微控制器完成了它。有趣的是，如果我使用docklight 来完成它，它可以完美运行。我认为它重置是因为在微控制器发送整个命令序列后使用docklight与调制解调器通信时，我发现它已经忽略了ATE和AT+CMEE=1，也就是说，我仍然得到echo并且没有获取错误的数字代码。任何帮助将不胜感激。

```
ATE //suppress echo
AT+CMEE=1//details on errors
AT+WIPCFG=1 //start IP stack
AT+WIPBR=1,6 //open GPRS bearer
AT+WIPBR=2,6,11,"APN" //set APN of GPRS bearer
AT+WIPBR=2,6,0 //username
AT+WIPBR=2,6,1 //password
AT+WIPBR=4,6,0 //start GPRS bearer
AT+WIPCREATE=2,1,"server_ip_address",server_port //create a TCP client on port "server_port"
AT+WIPDATA=2,1,1 //switch do data exchange mode 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-02T14:04:34.853

已解决：首先我改变了用于连接调制解调器和微控制器的电缆，我使用了一个 db9，将 2 和 3（rx 和 tx）交叉，将 4 和 7 引脚连接到 gnd，并且没有连接引脚 1、8 ,9。其次，我将 at+wipdata=2,1,1 更改为 at+wipdata=2,1,2。它工作得很好。我使用了 Q2687 sierra 无线调制解调器。希望这对发现我发现的相同问题的人有所帮助。

# servicestack - 在 ServiceStack 中使用 RequestFilter 执行自定义身份验证

> ID：16196537
> 
> 赞同：4
> 
> 时间：2013-04-24T15:49:39.957
> 
> 标签：servicestack

ServiceStack 是全新的，如果这很简单，请原谅我。

我正在编写一个 API，它将使用自定义 HTTP 标头来获取身份验证信息。我添加了一个 RequestFilter 像这样：

```
RequestFilters.Add((httpReq, httpResp, requestDto) =>
{
    if(httpReq.Headers["MyMagicHeader"] != "magic")
    {
        throw HttpError.Unauthorized("Unauthorized");
    }
    else
    {
        //TODO: Populate a "Client" object accessible by the Service
    }
}); 
```

我的问题是，我现在如何使用基于魔术标头中的值创建的“客户端”对象提供有问题的服务？

从外观上看，我唯一的选择是通过 DTO 传递这些信息。所以我想添加一个我所有的 DTO 都继承自的基类，这个基类将包含一个 Client 属性。

这是正确的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T16:37:25.890

在同一请求中传递所有过滤器和服务中可用的任何信息的方法是使用`httpReq.Items`对象字典，例如`Dictionary<string,object>`“

```
RequestFilters.Add((httpReq, httpResp, requestDto) =>
{
    if(httpReq.Headers["MyMagicHeader"] != "magic")
    {
        throw HttpError.Unauthorized("Unauthorized");
    }
    else
    {
        //TODO: Populate a "Client" object accessible by the Service
        httpReq.Items["MagicToken"] = CreateMagicValue(httpReq.Headers["MyMagicHeader"]);
    }
}); 
```

# c# - 使用带有 javascript 的 Razor C#

> ID：16196543
> 
> 赞同：2
> 
> 时间：2013-04-24T15:49:49.200
> 
> 标签：c#, javascript, asp.net-mvc, razor, asp.net-mvc-4

我正在尝试在我的 javascript 中使用 razor c#。但是它告诉我：当前上下文中不存在名称“isReport”

我的代码是这样的：

```
<script type="text/javascript">
    var isReport = false;
    @if(Model.columns != null)
    {
        isReport = true;
    }
    alert(isReport);
    if(isReport)
        $("#reports").dataTable();
</script> 
```

我正在尝试与我认为的这篇文章中的相同... [混合 Razor 和 Javascript 代码](https://stackoverflow.com/questions/5614941/mix-razor-and-javascript-code)

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-24T15:52:51.597

您可以`@:`在`isReport`作业中使用（在 内`if`）：

```
<script type="text/javascript">
    var isReport = false;
    @if(Model.columns != null)
    {
        @:isReport = true; //change is here
    }
    alert(isReport);
    if(isReport)
        $("#reports").dataTable();
</script> 
```

# c# - 如何找到我的项目的当前版本？

> ID：16196544
> 
> 赞同：-1
> 
> 时间：2013-04-24T15:49:51.653
> 
> 标签：c#, visual-studio-2010, ankhsvn

我在 Visual Studio 2010 中使用[AnkhSVN ，它运行良好。](http://en.wikipedia.org/wiki/AnkhSVN)在更新到最新愿景之前，我想知道当前的版本。如何找到我的项目的当前修订号？

我不使用任何其他的 Subversion 变体（[TortoiseSVN](http://en.wikipedia.org/wiki/TortoiseSVN)等）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T16:02:35.167

您可能想查看[修订历史](http://help.collab.net/index.jsp?topic=/com.collabnet.doc.anksvn_001/action/ankh_view_history.html)。

# c# - 带有视觉工作室 2010 的 sqlserver 2008

> ID：16196546
> 
> 赞同：0
> 
> 时间：2013-04-24T15:49:56.410
> 
> 标签：c#, asp.net, sql-server, database, visual-studio-2010

我已经安装了vs2010，现在我正在使用“SQLEXPRESS”连接到数据库，但现在我想直接使用sqlserver 2008而不是SQLEXPRESS；更多解释：

sql express有这个连接字符串（例如）：（我不想使用它！）

```
connection.ConnectionString = @"Data Source=.\SQLEXPRESS;AttachDbFilename=C:\Users\EHSAN\Documents\Visual Studio 2010\Projects\hokm\hokm\App_Data\database1.mdf;Integrated Security=True;User Instance=True"; 
```

但我想使用这个命令（例如）：

```
Server=localhost;Database=xxx;User " +"ID=xx;Password=xxxx; 
```

而且我不知道我应该如何让数据库女巫想要这个连接字符串！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T15:59:04.643

在 ASP .NET 中添加连接字符串的最佳方法是将其添加到 web.config。这样，如果您更改服务器名称或其他内容，则无需更改所有 .cs 文件中的连接字符串。

在您的 web.config 中，您将添加

```
<connectionStrings>    
        <add name="ConnectionStringName" connectionString="server=ServerName;database=DBName;User ID=UserName;Password=YourPassword;" providerName="System.Data.SqlClient" />
</connectionStrings> 
```

要从 C# 代码访问连接字符串，您将使用

```
System.Configuration.ConfigurationManager.
ConnectionStrings["ConnectionStringName"].ConnectionString; 
```

如果要使用 Windows 身份验证，请将连接字符串更改为`connectionString="server=ServerName;database=DBName;Integrated Security=True;"`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T16:02:22.183

将其放在代码的顶部：

```
using System.Web.Configruation; 
```

把它放在 Web.Config 中：

```
<connectionStrings >
<add name="myConnectionString" connectionString="Server=myServerAddress;Database=myDataBase;User ID=myUsername;Password=myPassword;Trusted_Connection=False;" providerName="System.Data.SqlClient"/>
 </connectionStrings> 
```

以及要设置连接变量的位置：

```
SqlConnection con = new SqlConnection(WebConfigurationManager.ConnectionStrings["myConnectionString"].ToString()); 
```

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T05:36:16.163

尝试以下操作：

```
connection.ConnectionString = @"Server=yourservername;Database=yourdatabasename;UID=yourusername;Password=youruserpassword"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T15:53:32.040

它应该很简单：

```
"Server=myServerAddress;Database=myDataBase;User Id=myUsername;Password=myPassword;" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-24T15:58:12.343

必须安装 sql server 2008 版本并试试这个

```
connection.ConnectionString = @"Data Source=.\SQLEXPRESS;Database="";User ID=YourServerUserName;Password=Password;" 
```

# php - php有什么简单的方法可以用1-3个词来爆炸句子吗？

> ID：16196549
> 
> 赞同：0
> 
> 时间：2013-04-24T15:50:05.517
> 
> 标签：php, explode

php有什么简单的方法可以用1-3个词来爆炸句子吗？

```
$str = 'Wikipedia was launched on January 15, 2001.';
$str = preg_replace('/[[:punct:]]/i',' ',$str);
$parts = explode(' ',trim($str)); 
```

现在我想说出这样的话。谢谢。

```
$output_array={
"Wikipedia",
"was",
"launched",
"on",
"January",
"15",
"2001", //one word
"Wikipedia was",
"launched on",
"January 15",
"was launched",
"on January",
"15 2001", //two nearby words.
"Wikipedia was launched",
"on January 15",
"was launched on",
"January 15 2001",
"launched on January",
"on January 15" //three nearby words.
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T15:58:49.557

```
$parts = explode(' ',preg_replace('/[[:punct:]]/i','',$str));
$output_array = array();
for ($words = 1; $words <= $max; $words++)
    for ($wordIndex = 0; $wordIndex <= count($parts) - $words; $wordIndex++)
        $output_array[] = implode(" ", array_slice($parts, $wordIndex, $words)); 
```

这正是你想要的。与`$max`附近的单词的最大值。（您可能希望将其设置为`count($parts)`）

它遍历数组并添加到`$output_array`由空格内爆的单词数组。

# c# - Settings.StyleCop 不会抑制 SA1504

> ID：16196551
> 
> 赞同：0
> 
> 时间：2013-04-24T15:50:07.597
> 
> 标签：c#, visual-studio-2012, stylecop

我正在手动编辑 Settings.StyleCop 文件以在 VS2012 中配置 stylecop。到目前为止，我已经成功地抑制了许多不需要的规则，但 SA1504 不会消失。我正在使用 stylecop 4.6。

这是我的设置文件的片段：

```
<StyleCopSettings Version="4.3">
   <Analyzer AnalyzerId="Microsoft.StyleCop.CSharp.LayoutRules">
      <Rules>
    <Rule Name="AllAccessorMustBeMultiLineOrSingleLine">
          <RuleSettings>
            <BooleanProperty Name="Enabled">False</BooleanProperty>
          </RuleSettings>
        </Rule>
      </Rules>
   </Analyzer>
</StyleCopSettings> 
```

请注意，文件中的版本是 4.3，但将其更改为 4.6 并不能解决问题，实际上会使文件中的所有规则都不起作用。

谁能解释我看到的行为和/或指向我的 Settings.StyleCop 文件的文档？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T17:41:14.120

也许是因为规则的名称是“AllAccessor* **s** *MustBeMultiLineOrSingleLine”？（如果您有任何疑问，StyleCop 设置 UI 应用程序应该生成具有正确规则名称的 XML。）

# c# - 通过 http 上传 zip 文件有时会导致文件损坏（CRC 检查失败）

> ID：16196555
> 
> 赞同：1
> 
> 时间：2013-04-24T15:50:10.060
> 
> 标签：c#, windows, http, file-upload, zip

我遇到了一个非常奇怪的问题。将 zip 文件从 Windows 8 客户端（用 C# 编写）上传到在 Server 2008 R2 上运行的 IIS 网页（也用 C# 编写）时，文件有时会损坏。我们无法在任何其他客户端操作系统（Windows 7、Vista、XP）上重现该问题。它并不一致，但经常发生足以成为一个问题。

当我使用二进制 diff 工具检查 zip 文件时，我发现替换具有明确的模式。

[二进制差异比较](https://www.dropbox.com/s/gjfmqddyhbkya9c/binarycompare.png)

这是替换的示例。该模式在文件的不同实例之间是一致的。上面是原始文件，下面是服务器端保存的上传文件。

所有变化的模式都是一样的。首先是模式的八字节块：

> 0 0 C 0 免费

其中`C`是某个字符，后跟一个八字节的未修改部分。

然后有一个 16 字节的修改部分，分为两个相同的 8 字节块。

模式太一致而不能随机，但我不知道是什么导致了问题。我什至不知道从哪里开始。

该代码已在 Windows 7 和 XP 上运行多年，没有出现明显问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T17:30:54.237

唯一的猜测是传输级别发生了一些事情。诊断问题的方法：使用不同的客户端/代码/组件上传相同的文件，看看问题是否消失。文件中的实际更改很可能无关紧要。我认为分块编码或压缩（或两者）都用于传输，并且由于客户端或服务器中的错误而破坏了数据。如果您可以确保不使用分块编码和压缩，另一个组件将解决此问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-28T15:52:52.130

问题最终是 vmware 中的网卡驱动程序问题。一旦我们更新了我们的 vmware 版本，一切都恢复了快乐。

# .net - 如何使用 Burn 捆绑 WiX 安装程序？我可以在一个项目中同时制作它们吗？

> ID：16196557
> 
> 赞同：1
> 
> 时间：2013-04-24T15:50:15.067
> 
> 标签：.net, wix, installation, bundle, burn

我最近在 WiX/Burn 上卡住了一段时间。我的目的是创建一个安装程序，它可以解压缩文件并在 .Net Framework 丢失时下载它。就我而言，我应该对 .Net 部分使用某种捆绑工具 Burn，并使用“普通”WiX 来解压文件。我已经编写了拆包部分（使用 SharpDevelop），现在我准备为此制作一个捆绑器。我应该如何合并 Burn 和 WiX 的东西？我是否必须创建两个单独的项目，一个用于 MSI，一个用于捆绑包？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T16:31:26.307

是的，您为包创建一个项目，`Bundle`为包创建一个单独的项目`MSI`。最好在项目之间创建一个`ProjectReference`以确保构建顺序正确。

# php - PHP 关闭所有错误但将错误保存到 error_log

> ID：16196558
> 
> 赞同：0
> 
> 时间：2013-04-24T15:50:16.983
> 
> 标签：php, error-handling

我在共享主机上，想对访问者隐藏所有错误，所以我使用 error_reporting(0) 但这会导致错误不会保存在文件所在目录中创建的 error_log 文件中。如何关闭错误但将它们添加到error_log？

尝试了 display_errors,0 但似乎我的共享主机不允许编辑 ini

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T15:52:12.953

```
ini_set("display_errors", 0);
ini_set("log_errors", 1);

//Define where do you want the log to go, syslog or a file of your liking with
ini_set("error_log", "syslog"); 
```

# ios - OCMock - 验证方法调用的顺序。还有其他方法吗？

> ID：16196571
> 
> 赞同：7
> 
> 时间：2013-04-24T15:50:59.423
> 
> 标签：ios, unit-testing, ocmock

当我想验证在一种方法中模拟对象是否以特定顺序接收一些消息时，我会执行以下操作：

```
// sut is an instance of the class I am testing and myMock is a mock object injected in sut.
// I want to test that myMock sends messageA and then messageB, in that particular order.
[[[myMock expect] andDo:^(NSInvocation *invocation)
  {
      [[myMock expect] messageB];
  }]
 messageA];

 [sut methodToTest];

 [myMock verify]; 
```

有没有更清洁/更好的方法来做到这一点？提前致谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-26T20:13:20.200

您可以使用`setExpectationOrderMatters`

```
[myMock setExpectationOrderMatters:YES];
[[myMock expect] messageA];
[[myMock expect] messageB];

[sut methodToTest];

[myMock verify]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T18:58:06.520

这对我来说看起来很干净。如果你不喜欢嵌套，你可以引入一个块变量。

```
__block BOOL hasCalledA;

[[[myMock expect] andDo:^(NSInvocation *invocation) {
    hasCalledA = YES;
  }] messageA];

[[[myMock expect] andDo:^(NSInvocation *invocation) {
    STAssertTrue(hasCalledA);
  }] messageB]; 
```

你的解决方案看起来不错。

附带说明一下，我认为这个问题可能更适合[https://codereview.stackexchange.com/](https://codereview.stackexchange.com/) ，尽管我仍在关注该网站。

# xslt - 如何在 XPath 中创建引用其他节点的嵌套条件

> ID：16196579
> 
> 赞同：2
> 
> 时间：2013-04-24T15:51:16.190
> 
> 标签：xslt, xpath

在嵌套条件下，如何在“外部”括号对中引用当前节点。假设我有以下 xml：

```
<?xml version="1.0" encoding="utf-8"?>
<Root>
    <Gizmos>
        <Gizmo>
            <Id>1</Id>
        </Gizmo>
        <Gizmo>
            <Id>2</Id>
        </Gizmo>
        <Gizmo>
            <Id>3</Id>
        </Gizmo>
    </Gizmos>
    <Validations>
        <Validation>
            <Id>A</Id>
            <GizmoId>1</GizmoId>
        </Validation>
        <Validation>
            <Id>B</Id>
            <GizmoId>2</GizmoId>
        </Validation>
        <Validation>
            <Id>C</Id>
            <GizmoId>3</GizmoId>
        </Validation>
    </Validations>
    <Approvals>
        <ValidationId>B</ValidationId>
        <ValidationId>C</ValidationId>
    </Approvals>
</Root> 
```

我想使用此代码过滤出已批准的 gizmo 的节点集（即 gizmo 2 和 3）：

```
/Root/Gizmos/Gizmo[/Root/Validations/Validation[GizmoId = ?.Id]/Id = /Root/Approvals/ValidationId] 
```

这是否允许，如果允许，我会用什么代替问号？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T16:07:26.920

以下 XPath 返回`Gizmo`2 和 3：

```
/Root/Gizmos/Gizmo[Id=/Root/Validations/Validation[Id=/Root/Approvals/ValidationId]/GizmoId] 
```

为了打破这一点，内部表达

```
/Root/Validations/Validation[Id=/Root/Approvals/ValidationId] 
```

返回`Id`包含在 an 中的所有验证`Approval`，*即*

```
<Validation>
  <Id>B</Id>
  <GizmoId>2</GizmoId>
</Validation> 

<Validation>
  <Id>C</Id>
  <GizmoId>3</GizmoId>
</Validation> 
```

您可以使用该表达式`Gizmo`通过匹配子表达式来过滤完整列表`Id`。`GizmoId`

# php - MySQLi/PHP 搜索引擎不工作

> ID：16196582
> 
> 赞同：0
> 
> 时间：2013-04-24T15:51:20.843
> 
> 标签：php, database, search, mysqli

到目前为止，我有这个...

```
<html>
<head>
<title>Search</title>
</head>
<body>
<form method="GET">
<input type="text" size="30" />
</form>

<?php  
$db = "example";  

mysqli_connect("localhost","root","*************");  
mysqli_select_db($db);  
$query = mysqli_query("SELECT * FROM TABLE WHERE search_query = '$q'");  
mysqli_query($query);
$results = mysqli_fetch_array($query);

if($results !=="") {
echo "<a href='$array[0]'>Result 1</a>";
echo "<a href='$array[1]'>Result 2</a>";
// you get the idea
}
?>
</body>
</html> 
```

我想知道为什么 MySQLi 没有返回我在栏中搜索的内容。我手动将数据插入数据库......它只是不工作

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T15:52:53.510

问题是您在创建数据库连接之前执行查询

```
mysqli_connect("localhost","root","*************");  
mysqli_select_db($db); 
```

然后执行您的查询

```
$query = mysqli_query("SELECT * FROM TABLE WHERE search_query = '$q'");  
$results = mysqli_fetch_array($query); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T15:59:43.203

你没有给 put 中的文本命名，那么 '$q' 是从哪里来的呢？

您没有在第二次执行时检查 $_GET['name'] 是否存在（在他们按下回车键之后）

查询后连接到数据库

尝试添加输入名称

```
<input type="text" size="30" name="q" /> 
```

和

```
<?php  

if (array_key_exists('q', $_GET)) {
    ...
    $q = $_GET['q'];
    mysqli_connect("localhost","root","*************");  
    mysqli_select_db($db);  
    $query = mysqli_query("SELECT * FROM TABLE WHERE search_query = '$q'");  
    ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T15:56:26.910

首先，您必须在查询数据库本身之后打开数据库连接。

尝试：

```
<html>
<head>
<title>Search</title>
</head>
<body>
<form method="GET">
<input type="text" size="30" />
</form>

<?php  
$db = "example";  
/* Open connection */
mysqli_connect("localhost","root","*************");  
mysqli_select_db($db);  
/* Query the DB */
$query = mysqli_query("SELECT * FROM TABLE WHERE search_query = '$q'");  
$results = mysqli_fetch_array($query);

if($results !=="") {
echo "<a href='$array[0]'>Result 1</a>";
echo "<a href='$array[1]'>Result 2</a>";
// you get the idea
}
?>
</body>
</html> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-09-28T17:11:34.187

您正在使用变量`$q`，但尚未定义它。
您必须将变量设置为搜索结果的值，例如：

```
$q = $_GET['searchvalue'] 
```

# php - 将 MySQL 设置结果存储在 PHP 会话数组中以减少数据库查找

> ID：16196588
> 
> 赞同：3
> 
> 时间：2013-04-24T15:51:42.183
> 
> 标签：php, mysql, arrays, performance, session

将数据库结果集存储在用户会话中，而不是在每次页面加载时从数据库中重新加载它是一个合理/负责任的想法吗？我知道在服务器上的缓存文件中缓存生成的 HTML 代码的可用性，但在我看来这有太多的便利问题。

例如，在购物页面上，主导航中的品牌选项卡有一个下拉菜单，其中列出了当前在网站上有产品的所有品牌。查询已经过优化，但它仍然必须在每次页面加载时运行。而不是这样做，我想将结果集保存在用户的会话中，因此每个会话只加载一次品牌。

或者，我可以为 subnav 生成 HTML 代码并将其存储在服务器上的缓存文件中。如果将数组存储在会话中的想法对服务器的性能没有好处，我可能会看到过去的便利问题。

感谢所有的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T15:54:23.980

有什么理由你不能使用像[Memcached](http://memcached.org/)这样的传统缓存而不是试图将它塞进会话中？

以这种方式使用会话缓存的问题是它会造成混乱。会话数据应尽可能保持精简，因为它会在每个请求上加载。转储大量数据可能会严重拖累性能。

在会话中存储东西似乎总是“方便”，但除非它与会话本身严格相关，否则最好避免。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-24T16:00:53.253

是的，缓存不经常更改的数据是合理的并且建议。最快的 SQL 查询是您根本不运行的查询。

一个棘手的问题是决定何时刷新数据的缓存版本。关于这件事有一句名言：

> “计算机科学只有两个难题：缓存失效和命名事物。”
> ——菲尔·卡尔顿

至于使用会话，我同意@tadman 的回答，会话不一定是此类数据的最佳场所。还有其他选项，包括您提到的缓存文件，以及内存缓存，如[memcached](http://php.net/manual/en/book.memcached.php)或[APC](http://php.net/manual/en/book.apc.php)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T16:02:08.830

在这种情况下，我建议使用[Memcached 。](http://memcached.org/ "内存缓存")

![在此处输入图像描述](https://i.stack.imgur.com/SgxTb.png)

设置和配置的说明可以在这里找到：[https](https://www.digitalocean.com/community/articles/how-to-install-and-use-memcache-on-ubuntu-12-04) ://www.digitalocean.com/community/articles/how-to-install-and-use-memcache-on-ubuntu-12-04 （请注意这个是Ubuntu，但它会给你一个好主意）

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-24T16:09:29.530

其他人建议使用 Memcached。它增加了复杂性并需要 RAM（因此，如果它们在同一台服务器上运行，它会使 MySQL 慢得多）。它可能是最适合您的解决方案，但由于我不知道任何“对每个人都有好处”的解决方案，并且由于我不知道您的工作量，所以我只是建议替代方案。

是的，MySQL 查询缓存有很多问题。但这可能对你有好处。

如果您没有太多要缓存的东西，MEMORY 表也可能是一个很好的解决方案。

在会话数据中存储缓存可能比根本不缓存更糟糕，因为每个用户的数据都是重复的，并且只有在会话过期时才会进行清理。不要那样浪费你的记忆。

# report - Cognos 聚合：执行操作 'sqlOpenResult' status='-28' 时出错

> ID：16196590
> 
> 赞同：1
> 
> 时间：2013-04-24T15:51:48.987
> 
> 标签：report, aggregate, cognos

尝试将聚合函数应用于列时出现此错误，我想对其进行总计，但即使计数也不起作用。我正在尝试获取没有库存的位置数量。

```
An error occurred while performing operation 'sqlOpenResult' status='-28'. 
```

这是我用于数据的公式

```
CASE
WHEN ( [Actual Cases] = '' )
THEN (1)
ELSE (0)
END 
```

任何帮助将不胜感激，我已经搜索过这个，每个人都说数据类型不一致，但我显然传递了 1 和 0，所以我很难过。

以下是有关错误的详细信息：

```
UDA-SQL-0114 The cursor supplied to the operation "sqlOpenResult" is inactive.UDA-SQL-      0107   A general exception has occurred during the operation "open result".[IBM][CLI   Driver][AS] SQL0302N The value of a host variable in the EXECUTE or OPEN statement is too large for its corresponding use. SQLSTATE=22023 RSV-SRV-0042 Trace back:RSReportService.cpp(722): QFException: CCL_CAUGHT: RSReportService::process()RSReportServiceMethod.cpp(263): QFException: CCL_RETHROW: RSReportServiceMethod::process(): asynchRunSpecification_RequestRSASyncExecutionThread.cpp(808): QFException: RSASyncExecutionThread::checkExceptionRSASyncExecutionThread.cpp(260): QFException: CCL_CAUGHT: RSASyncExecutionThread::runImpl(): asynchRunSpecification_RequestRSASyncExecutionThread.cpp(864): QFException: CCL_RETHROW: RSASyncExecutionThread::processCommand(): asynchRunSpecification_RequestExecution/RSRenderExecution.cpp(670): QFException: CCL_RETHROW: RSRenderExecution::executeAssembly/RSDocAssemblyDispatch.cpp(291): QFException: CCL_RETHROW: RSDocAssemblyDispatch::dispatchAssemblyAssembly/RSLayoutAssembly.cpp(79): QFException: CCL_RETHROW: RSLayoutAssembly::assembleAssembly/RSDocAssemblyDispatch.cpp(358): QFException: CCL_RETHROW: RSDocAssemblyDispatch::dispatchChildrenAssemblyForwardAssembly/RSReportPagesAssembly.cpp(179): QFException: CCL_RETHROW: RSReportPagesAssembly::assembleAssembly/RSDocAssemblyDispatch.cpp(308): QFException: CCL_RETHROW: RSDocAssemblyDispatch::dispatchAssemblyAssembly/RSPageAssembly.cpp(303): QFException: CCL_RETHROW: RSPageAssembly::assembleAssembly/RSDocAssemblyDispatch.cpp(308): QFException: CCL_RETHROW: RSDocAssemblyDispatch::dispatchAssemblyAssembly/RSTableRowAssembly.cpp(177): QFException: CCL_RETHROW: RSTableRowAssembly::assembleAssembly/RSDocAssemblyDispatch.cpp(308): QFException: CCL_RETHROW: RSDocAssemblyDispatch::dispatchAssemblyAssembly/RSTableCellAssembly.cpp(137): QFException: CCL_RETHROW: RSTableCellAssembly::assembleAssembly/RSDocAssemblyDispatch.cpp(358): QFException: CCL_RETHROW: RSDocAssemblyDispatch::dispatchChildrenAssemblyForwardAssembly/RSDocAssemblyDispatch.cpp(308): QFException: CCL_RETHROW: RSDocAssemblyDispatch::dispatchAssemblyAssembly/RSAssembly.cpp(662): QFException: CCL_RETHROW: RSAssembly::createListIteratorAssembly/RSAssembly.cpp(717): QFException: CCL_RETHROW: RSAssembly::createListIteratorRSQueryMgr.cpp(1055): QFException: CCL_RETHROW: RSQueryMgr::getListIteratorRSQueryMgr.cpp(1131): QFException: CCL_RETHROW: RSQueryMgr::getResultSetIteratorRSQueryMgr.cpp(1295): QFException: CCL_RETHROW: RSQueryMgr::createIteratorRSQueryMgr.cpp(1569): QFException: CCL_RETHROW: RSQueryMgr::executeRsapiCommandRSQueryMgr.cpp(1559): QFException: CCL_RETHROW: RSQueryMgr::executeRsapiCommandRSQueryMgrExecutionHandlerImpl.cpp(168): QFException: CCL_RETHROW: RSQueryMgrExecutionHandlerImpl::execute()RSQueryMgrExecutionHandlerImpl.cpp(160): QFException: CCL_RETHROW: RSQueryMgrExecutionHandlerImpl::execute()QFSSession.cpp(1147): QFException: CCL_RETHROW: QFSSession::ProcessDoRequest()QFSSession.cpp(1145): QFException: CCL_CAUGHT: QFSSession::ProcessDoRequest()QFSSession.cpp(1102): QFException: CCL_RETHROW: QFSSession::ProcessDoRequest()QFSSession.cpp(1078): QFException: CCL_RETHROW: QFSSession::ProcessDoRequest()QFSConnection.cpp(788): QFException: CCL_RETHROW: QFSConnection::ExecuteQFSQuery.cpp(213): QFException: CCL_RETHROW: QFSQuery::Execute v2CoordinationQFSQuery.cpp(4456): QFException: CCL_THROW: CoordinationPlanner 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-14T20:19:48.120

这可能是数据类型不匹配——您的评论也支持这个假设。:) 但这是许多 Cognos 通用错误之一。有时，在 Cognos 错误报告中会列出一个更好的错误，因此请尝试发布整个内容，但 Cognos 通常不会让您深入了解。

如果您对数据库或类似（开发）版本具有 SQL 访问权限，那么您可以通过“属性”菜单在 Report Studio 中为查询主题生成 SQL，然后将本机 SQL 剪切并粘贴到您的 SQL 程序中以获得更好的错误（或分析/解释以寻找减速）。

如果您没有 SQL 访问权限，您可以尝试在 Report Studio 中创建基于 SQL 的查询主题并以表格模式运行它以查看它是否会生成更有用的错误。

# jsf - 使用 Jsf 图形图像标签显示图像 onclick

> ID：16196594
> 
> 赞同：0
> 
> 时间：2013-04-24T15:52:00.303
> 
> 标签：jsf, primefaces

我有一个 primefaces 手风琴，里面有一组图像。我已经使用 jsf <`h:graphicImage>`标签使用 servlet 渲染了这些图像（实际上我显示了原始图像的缩略图）。

我想要做的是，每当用户点击手风琴中的特定图像时，相同的图像应该显示在我的 HTML5 画布元素中。

感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T20:56:36.990

你应该能够做这样的事情：

```
<h:graphicImage library="default" name="images/graph.png" onclick="draw(this.src);" />
<canvas id="myCanvas"></canvas>
<script type="text/javascript">
    function draw(imgSrc) {
        console.log(imgSrc);
        var ctx = document.getElementById('myCanvas').getContext('2d');
        var img = new Image();
        img.src = imgSrc;
        ctx.drawImage(img, 0, 0);
        ctx.beginPath();
        ctx.moveTo(30, 96);
        ctx.lineTo(70, 66);
        ctx.lineTo(103, 76);
        ctx.lineTo(170, 15);
        ctx.stroke();
        return false;
    }
</script> 
```

更多信息：[https ://developer.mozilla.org/en-US/docs/HTML/Canvas/Tutorial/Using_images](https://developer.mozilla.org/en-US/docs/HTML/Canvas/Tutorial/Using_images?redirectlocale=en-US&redirectslug=Canvas_tutorial%2FUsing_images)

# jquery - Fay JQuery 使用元素数组

> ID：16196595
> 
> 赞同：3
> 
> 时间：2013-04-24T15:52:04.397
> 
> 标签：jquery, fay

首选方法是什么，如何计算选择器选择的元素数量？

我能想到的一种方法是调用 JQuery 的`size`：

```
size :: JQuery -> Fay Int
size = ffi "%1['size']()" 
```

另一种方法是从函数调用中获取列表，然后计算元素。检索元素的函数类型可能是：

```
elems :: JQuery -> Fay [Elem] 
```

有谁知道，如何实现？如何描述 javascript 类型和 haskell 类型之间的映射？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T17:11:57.737

在 Fay 中有两种处理 javascript 对象的方法。

### 不透明数据类型

使用 EmptyDataDecls：

```
{-# LANGUAGE EmptyDataDecls #-}
[...]
data JQuery 
```

这就是 fay-jquery 所做的，它允许库的用户轻松定义新的 FFI 绑定，因此您的大小示例有效。但请注意，它在 jQuery 中已被弃用，因此最好`length`按照 John B 的建议使用。

每当 fay 遇到应该是 JQuery 类型的东西时，它不会触及它，因此您将直接引用 javascript 对象。

### 记录

另一种方法是将 javascript 对象映射到记录，如果有问题的对象很容易映射，例如在处理 JSON 或进行客户端-服务器通信时，这是更好的选择。

```
data User = User { name :: String }

userA :: User
userA = ffi "{ instance : \"User\", name : \"Adam\" }"

userB :: User
userB = User { name = "Adam" } 
```

这些是构造用户记录的相同方式，但是 userA 当然有点做作，在这种情况下可能会从服务器端或某些 JS 库中获取值（否则根本没有理由使用 FFI）

在这种记录情况下，您不会保留对 JS 对象的引用，将实例化不可变的用户记录。

我也认为你可以跳过`Fay`返回类型。我认为假设 jQuery 对象不会发生变异是安全的，特别是如果它们是从 Fay 实例化的。

```
length :: JQuery -> Int
length = ffi "%1['length']" 
```

另请参阅[FFI wiki 页面](https://github.com/faylang/fay/wiki/Foreign-function-interface)。

编辑：稍微相关，[fay-uri](https://github.com/faylang/fay-uri/blob/master/src/Uri.hs)是一个有据可查且相当简单的示例，说明如何在可变 js 库之上构建不可变 FFI 层。

# javascript - Nodejs安装了旧版本？

> ID：16196596
> 
> 赞同：0
> 
> 时间：2013-04-24T15:52:05.563
> 
> 标签：javascript, node.js

所以，当我安装 nodejs 时，我使用了 [https://npmjs.org/install.sh](https://npmjs.org/install.sh) | 嘘

当我执行 node -v 时，我得到 v0.5.11-pre。我是否正确假设这是我想为 npm 运行的错误节点？虽然我确实尝试使用 node-v0.10.4-linux-x64.tar.gz 安装它，但是在设置中遇到了一些问题（就像我在 Webfaction 上所做的那样）并且无法让 make & make install 工作并且不得不找工作。

有没有一种简单的方法来更新我的 nodejs 或将其重定向到正确的版本？

# php - 将可变天数添加到特定日期

> ID：16196598
> 
> 赞同：1
> 
> 时间：2013-04-24T15:52:11.190
> 
> 标签：php, date, time

我有以下脚本来做一些日期操作：

```
 function indate($leavedate){
    if($leavedate){
    $enddate=$leavedate[0]['LoppumisPvm'];//This prints 23 Apr
    $endday=date('d',strtotime($enddate));//this prints 23
    $endmonth=date('M',strtotime($enddate));// This prints Apr

    $additional_days=$endday-15;// This prints 8
    $end = strtotime(date("d M", strtotime("15 Jan")) . " +$additional_days days");
    echo $end; 
```

我正在尝试获取该变量，该变量`$end`会将额外的天数添加到特定日期（给定 1 月 15 日）.. 它会打印 1358179200 代替..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T16:09:36.557

您混淆了额外的 strtotime 调用和一些定位错误的括号。将您的代码更改为：

```
$end = date("d M", strtotime("15 Jan + {$additional_days} days")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T16:09:15.350

你需要改变：

```
$end = strtotime(date("d M", strtotime("15 Jan")) . " +$additional_days days"); 
```

成为：

```
$end = date("d M",strtotime(date("d M", strtotime("15 Jan")) . " +$additional_days days")); 
```

# java - 获取有效负载的骡子没有给出特殊字符的确切字符串，例如 Ø、€、@

> ID：16196601
> 
> 赞同：0
> 
> 时间：2013-04-24T15:52:12.360
> 
> 标签：java, activemq, mule

我陷入了以下情况，并试图找出确切的方法。

Mule 正在从 MQ 获取消息，而我从 Mule 有效负载中以字节或字符串的形式获取这些消息，它没有为窄字符提供确切的字符，实际上它为这些字符和其余字符提供了乱码消息很好好的。

我尝试使用 UTF-8 编码将有效负载作为字符串仍然具有相同的输出。

我正在使用的代码是：

```
MuleMessage mmsg = eventContext.getMessage();
byte[] rawMsg = mmsg.getPayloadAsBytes(); 
```

或者

```
String rawMsg = mmsg.getPayloadAsString(); 
```

或者

```
String rawMsg = mmsg.getPayloadAsString("UTF-8"); 
```

任何解决方法或替代方法都将受到高度赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T16:42:24.460

Mule 非常注意有效负载的数据编码，因此发送到 MQ 本身的消息（发布者实际上可能对它们进行了错误编码）或您自己对它们的处理肯定有问题。

`MuleEvent`和`MuleMessage`类都有一个方法`getEncoding()`：最好使用它而不是硬编码到特定的编码。

由于您收到的是`javax.jms.BytesMessage`s，我建议您使用标准转换器将其转换为字符串，而不是自己做，在您的 s 之后使用以下内容`jms:inbound-endpoint`：

```
<byte-array-to-string-transformer encoding="..." /> 
```

`encoding`使用为属性发送 JMS 消息的发布者使用的实际编码。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-02-26T09:30:50.913

尝试使用这个表达式：

```
#[message.payloadAs(String)] 
```

这将为您提供字符串格式的有效负载，因此您无需使用 byte-array-to-string-transformer。

# python - 来自 Django 中 ImageField 的图像不会加载到模板中

> ID：16196603
> 
> 赞同：21
> 
> 时间：2013-04-24T15:52:15.957
> 
> 标签：python, django, image, django-templates, django-models

我正在本地机器上使用 Django(1.5.1) 构建一个画廊。在我的专辑模型中，我有一个`ImageField`. 有一个视图可以显示相册的所有图像。它运作良好，但最后图像不显示。如您所见，图像有边框，但无法加载图像。

### 截屏

![在此处输入图像描述](https://i.stack.imgur.com/nyExT.png)

### 模型.py

```
class Category(models.Model):
 ###  
class Album(models.Model):   
    category = models.ForeignKey(Category, related_name='albums')
 ###
class Image(models.Model):
    album = models.ForeignKey(Album)
    image = models.ImageField(upload_to = 'images/albums/') 
```

### 视图.py

```
def detail(request, album_id):
    album = get_object_or_404(Album, pk=album_id)
    return render(request, 'gallery/detail.html', {'album': album}) 
```

### 详细信息.html

```
<h1>{{ album.title }}</h1>
{% for image in album.image_set.all %}
  <a>  <img src="{{ image.image.url }}" height="420"></a>
{% endfor %} 
```

如果这是我的相册地址：`http://localhost:8000/gallery/1/`

然后图片网址是：`http://localhost:8000/media/images/albums/photo_4.JPG (I get 404 when enter it in browser)`

此媒体根目录和网址：

```
MEDIA_ROOT = '/media/'    
MEDIA_URL = '/localhost:8000/media/' 
```

我的媒体根有*777 权限*。

我现在该怎么办？问题出在哪里？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-04-24T17:54:57.167

我有什么问题的线索。`MEDIA_URL`应该是这样的：

```
MEDIA_ROOT='<the full path to your media folder>' (i.e: '/home/ike/project/media/')
MEDIA_URL='/media/' 
```

注意开头的斜线字符。这是因为 media 是您的根服务器文件夹中的一个文件夹，与您调用的任何其他 url 无关。

并将这些行添加到`urls.py`文件的末尾：

```
# You might need to import static function like this:
#from django.contrib.staticfiles.urls import static

urlpatterns += staticfiles_urlpatterns()
urlpatterns += static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT) 
```

您可以查看以下文档：[https ://docs.djangoproject.com/en/dev/howto/static-files](https://docs.djangoproject.com/en/dev/howto/static-files)

希望这可以帮助

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-24T16:06:57.187

如果您使用的是开发服务器，那么您需要在 urls.py 中添加一些内容以使 django 为媒体文件提供服务，参见：

1.4.x：[https](https://docs.djangoproject.com/en/1.4/howto/static-files/#serving-other-directories) ://docs.djangoproject.com/en/1.4/howto/static-files/#serving-other-directories 1.5.x：[https ://docs.djangoproject.com/en/dev/howto/静态文件/#serving-files-uploaded-by-a-user](https://docs.djangoproject.com/en/dev/howto/static-files/#serving-files-uploaded-by-a-user)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-24T16:01:39.067

检查您定义的**settings.py**`MEDIA_ROOT`和“MEDIA_URL” *（它们是正确的）*。MEDIA_ROOT 指定计算机上将存储媒体的绝对文件夹。

举个例子：

```
MEDIA_ROOT = '/myfolder/' 
```

这意味着它将在以下位置查找图像：

```
/myfolder/images/albums/ 
```

接下来在您的**settings.py 中**检查您的`MEDIA_ROOT`位置：即

```
MEDIA_URL = 'http://localhost/myfolder/' 
```

所以你的图片：

```
<img src="{{ MEDIA_URL }}{{ image.image.url }}" height="420"></a> 
```

这将涉及：

```
http://localhost/myfolder/images/albums/ 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-08-22T01:38:43.087

来源：[https ://docs.djangoproject.com/en/dev/howto/static-files/#serving-files-uploaded-by-a-user](https://docs.djangoproject.com/en/dev/howto/static-files/#serving-files-uploaded-by-a-user)

```
 from django.conf import settings
from django.conf.urls.static import static

urlpatterns = [
    # ... the rest of your URLconf goes here ...
] + static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT) 
```

您需要添加到 url 模式以提供上传的文件

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-01-15T18:57:16.427

在您的*details.html*中，更改您的

```
img src="{{ image.image.url }}" height="420" 
```

至

```
img src="your_app/media/{{ image.image.url }}" height="420" 
```

我希望这有帮助。如果不是，我很乐意提供更多细节。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-07-24T02:48:52.847

好吧，我知道这个问题很老，但是在证明了所有选项后我现在就解决了：

1.  设置.py：

```
    MEDIA_URL = '/媒体/'
    MEDIA_ROOT = os.path.join(BASE_DIR, 'media')

```

2.  urls.py 危险！！！这里我的一个错误是我使用了 my_app/urls.py... 如果你想使用 my_app/urls.py，你需要将“/namespace_name{{ image.image.url }}”添加到 img' src：

```
    从 django.conf.urls.static 导入静态
    从 django.contrib.staticfiles.urls 导入 staticfiles_urlpatterns
    从 django.conf 导入设置

    urlpatterns += staticfiles_urlpatterns()
    urlpatterns += 静态（settings.MEDIA_URL，document_root=settings.MEDIA_ROOT）

```

3.  你的模板，detail.html

```
    img src="{{ image.image.url }}" alt="{{ image.title }}"

```

注意：您不需要 MEDIA_URL，请注意“/”，因为 image.image.url 是绝对的，所以如果您使用命名空间，则不需要添加结束斜杠。

```
    img src="/namespace_name/{{ image.image.url }}" --> 不好！！！
    img src="/namescape_name{{ image.image.url }}" --> 好！！！

```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-07-08T01:28:00.640

我从上面的每个答案中提取了一点。我遇到了和你一样的问题。我得到的回报是从当前的 /blog/post/(media_url)/image.jpg

在我的管理门户中，我可以轻松查看并编辑它。但是在我的 post.html 上我遇到了问题，直到我添加了 {{ MEDIA_URL }} --

这就是我所缺少的。

我在下面发布了我的整个部分，以便其他人可以阅读它并查看他们缺少的内容。

```
post.html:

    <label for="id_image">  <img src="{{ MEDIA_URL }}{{ p.image.url }}" 
    title="{{ p.title }}"> </label>

models.py:

    from django.core.files.storage import FileSystemStorage

    upload_location =
    FileSystemStorage(location='/home/pi/djcode/xpcpro/xpcpro/images')

    class Blog(models.Model):
        title = models.CharField(max_length=255)
        author = models.ForeignKey(settings.AUTH_USER_MODEL, default=1)
        date = models.DateTimeField(auto_now=False, auto_now_add=True)
        body = models.TextField()
        image = models.ImageField(
            storage=upload_location, null=True,
            blank=True, width_field="width_field",
            height_field="height_field",)
        height_field = models.IntegerField(default=0)
        width_field = models.IntegerField(default=0)

urls.py:

    from django.conf.urls.static import static
    from django.contrib.staticfiles.urls import staticfiles_urlpatterns

    urlpatterns += staticfiles_urlpatterns()
    urlpatterns += static(settings.MEDIA_URL,
    document_root=settings.MEDIA_ROOT)

settings.py:

    MEDIA_ROOT = "/home/pi/djcode/xpcpro/xpcpro/images/"
    MEDIA_URL = "/images/" 
```

# ios - 核心数据：检索数据库对象时的空数组

> ID：16196604
> 
> 赞同：0
> 
> 时间：2013-04-24T15:52:26.180
> 
> 标签：ios, database, core-data, persistence, nsmanagedobjectcontext

我在 a 中有九个 Aviso 元素，`NSMutableArray`理论上我将这九个元素存储在我的应用程序的核心数据中。问题是当试图从数据库中检索这些元素时`NSFetchRequest`，我只得到八个空元素，最后一个元素正确显示。

这是我的数据模型的样子：

![数据模型](https://i.stack.imgur.com/iIS1a.png)

Aviso 实体与 Aviso 相关`NSManagedObject`：

```
#import <Foundation/Foundation.h>
#import <CoreData/CoreData.h>

@interface Aviso : NSManagedObject{
    NSDate * date;
    NSString * text;
    NSString * idwarning;
}

@property (nonatomic, retain) NSDate * date;
@property (nonatomic, retain) NSString * text;
@property (nonatomic, retain) NSString * idwarning;

@end 
```

在`viewDidLoad`我的`WarningController`课堂上，我首先加载我的警告：

```
 for(Aviso * a in warnings)
    {
        [self saveObjectcdata:a];
    }

    [self loadxcdata]; 
```

saveObjectcdata 是：

```
-(void) saveObjectcdata:(Aviso * )aux
{
    NSManagedObject *object = [NSEntityDescription insertNewObjectForEntityForName:@"Aviso" inManagedObjectContext:self.managedObjectContext];

    [object setValue:aux.idwarning forKey:@"idwarning"];
    [object setValue:aux.date forKey:@"date"];
    [object setValue:aux.text forKey:@"text"];

    [managedObjectContext insertObject:object];

    // Commit the change.
    NSError *error = nil;
    if (![managedObjectContext save:&error]) {
        // Handle the error.
    }
    else{
        NSLog(@"Object saved: %@ in %@ and id: %@",aux.text,aux.date,aux.idwarning);
    }
} 
```

并加载xcdata：

```
- (void) loadxcdata
{
    [xcdataarray removeAllObjects];

    if (managedObjectContext == nil) // generar el contexto del CoreData
    {
        managedObjectContext = [(EmergencyAppDelegate *)[[UIApplication sharedApplication] delegate] managedObjectContext];
    }

    NSFetchRequest *request = [[NSFetchRequest alloc] init];
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"Aviso" inManagedObjectContext:managedObjectContext];
    [request setEntity:entity];

    // Execute the fetch -- create a mutable copy of the result.
    NSError *error = nil;
    NSMutableArray *mutableFetchResults = [[managedObjectContext executeFetchRequest:request error:&error] mutableCopy];
    if (mutableFetchResults == nil) {
        // Handle the error.
        NSLog(@"Error al recuperar:%@",error);
    }

    // Set self's events array to the mutable array, then clean up.
    [self setXcdataarray:mutableFetchResults];

    for(Aviso * war in xcdataarray)
    {
        NSLog(@"Core data object: %@ in %@ and id: %@",war.text,war.date,war.idwarning);
    }

} 
```

这就是我在控制台中获得的。首先，对象被正确存储，但在再次检索它们时，我只得到最后一个：

```
2013-04-24 17:50:05.716 Emergencies[4286:907] CoreData: error: Failed to call designated initializer on NSManagedObject class 'Aviso' 
2013-04-24 17:50:05.844 Emergencies[4286:907] Object saved: sexto y ultimo in 2013-04-19 12:21:43 +0000 and id: 9
2013-04-24 17:50:05.905 Emergencies[4286:907] Object saved: fifth later in 2013-04-18 11:17:50 +0000 and id: 8
2013-04-24 17:50:05.961 Emergencies[4286:907] Object saved: fifth in 2013-04-18 11:17:44 +0000 and id: 7
2013-04-24 17:50:06.014 Emergencies[4286:907] Object saved: forth later in 2013-04-18 11:11:57 +0000 and id: 6
2013-04-24 17:50:06.071 Emergencies[4286:907] Object saved: cuarto in 2013-04-18 11:11:36 +0000 and id: 5
2013-04-24 17:50:06.128 Emergencies[4286:907] Object saved: tercero in 2013-04-18 10:25:01 +0000 and id: 3
2013-04-24 17:50:06.183 Emergencies[4286:907] Object saved:  in 2013-04-18 10:57:27 +0000 and id: 4
2013-04-24 17:50:06.237 Emergencies[4286:907] Object saved: rt in 2013-04-18 10:20:20 +0000 and id: 2
2013-04-24 17:50:06.296 Emergencies[4286:907] Object saved: This is the first example in 2013-04-17 08:43:45 +0000 and id: 1
2013-04-24 17:50:06.304 Emergencies[4286:907] Core data object: (null) in (null) and id: (null)
2013-04-24 17:50:06.306 Emergencies[4286:907] Core data object: (null) in (null) and id: (null)
2013-04-24 17:50:06.308 Emergencies[4286:907] Core data object: (null) in (null) and id: (null)
2013-04-24 17:50:06.310 Emergencies[4286:907] Core data object: (null) in (null) and id: (null)
2013-04-24 17:50:06.312 Emergencies[4286:907] Core data object: (null) in (null) and id: (null)
2013-04-24 17:50:06.314 Emergencies[4286:907] Core data object: (null) in (null) and id: (null)
2013-04-24 17:50:06.317 Emergencies[4286:907] Core data object: (null) in (null) and id: (null)
2013-04-24 17:50:06.319 Emergencies[4286:907] Core data object: (null) in (null) and id: (null)
2013-04-24 17:50:06.321 Emergencies[4286:907] Core data object: This is the first example in 2013-04-17 08:43:45 +0000 and id: 1 
```

**编辑**：

在我从核心数据实体创建一个新类之后`Aviso`（选择实体，然后选择编辑器 - 创建新`NSManagedObject`的，然后在我的`saveObjectcdata`方法中修改几行，现在它可以工作了。

```
-(void) saveObjectcdata:(NSString *)warningId date:(NSDate*)date text:(NSString*)txt
{
    Aviso *object = [NSEntityDescription insertNewObjectForEntityForName:@"Aviso" inManagedObjectContext:self.managedObjectContext];

    object.idwarning = warningId;
    object.date = date;
    object.text = txt;

    // Commit the change.
    NSError *error = nil;
    if (![managedObjectContext save:&error]) {
        // Handle the error.
    }
    else{
        NSLog(@"Object saved: %@ in %@ and id: %@",object.text,object.date,object.idwarning);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T18:05:13.217

我明白你为什么得到空值，我不明白为什么最后一个对象保存成功。

您没有按照 CoreData 的设计方式使用它。

1）您不必实现实体的内部数据结构。如果您喜欢一个类来表示您的实体，请在设计中选择您的实体并选择：Editor->Create NSManagedObject Subclass。
除非您需要其他功能，否则无需添加任何内容。
不要覆盖不应覆盖的内容，[请参阅此处](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/CoreDataFramework/Classes/NSManagedObject_Class/Reference/NSManagedObject.html)了解更多详细信息。

2）您以错误的方式添加新对象。
要插入一个项目，你应该只调用：`[NSEntityDescription insertNewObjectForEntityForName:<EntityName> inManagedObjectContext:<context>]`。
您可以将结果转换为所需的托管对象子类。

你`saveObjectdata:`应该看起来像：

```
-(void) saveObjectcdata:(id)warningId date:(NSDate*)date text:(NSString*)text
{
    Avisio *object = [NSEntityDescription insertNewObjectForEntityForName:@"Aviso" inManagedObjectContext:self.managedObjectContext];

    object.idwarning = warningId;
    object.date = date;
    object.text = text;

    // Commit the change.
    NSError *error = nil;
    if (![managedObjectContext save:&error]) {
        // Handle the error.
    }
    else{
        NSLog(@"Object saved: %@ in %@ and id: %@",object.text,object.date,object.idwarning);
    }
} 
```

3）我建议您阅读[此](http://developer.apple.com/library/mac/#documentation/cocoa/Conceptual/CoreData/cdProgrammingGuide.html)内容以了解情况

# ios - 修改 Block iOS 中的全局变量

> ID：16196605
> 
> 赞同：1
> 
> 时间：2013-04-24T15:52:29.887
> 
> 标签：ios, objective-c, objective-c-blocks

j'ai un blocks qui charge les données à partir d'un serverur, le questione c'est que je ne peux pas effecter mon resultat dans une variable global dans le block

来自谷歌翻译：

我有从服务器加载数据的块，问题是我不能影响块中全局变量的结果

```
[URLImages asyncRequest:RequestForPopular
                    success:^(NSData *data, NSURLResponse *response) {
                        NSLog(@"Success!");
                        NSError* error;
                        NSDictionary* json = [NSJSONSerialization
                                              JSONObjectWithData:data

                                              options:kNilOptions
                                              error:&error];

                       NSArray *arrayimages;
                        arrayimages = [[[json objectForKey:@"result"] objectForKey:@"images"] objectForKey:@"_content"];

                        NSMutableArray *mutArrURLss = [[NSMutableArray alloc]init];
                        for (int i=0; i<[arrayimages count];i++)
                        {
                            NSDictionary *arrayContent = [arrayimages objectAtIndex:i];
                            [mutArrURLss addObject:[arrayContent objectForKey:@"element_url"]];
                        }

                     mutArrURLs = mutArrURLss //mutArrURLs is Global
                    }
                    failure:^(NSD`enter code here`ata *data, NSError *error) {
                        NSLog(@"Error! %@",[error localizedDescription]);
                    }]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T16:08:45.943

首先创建全局可变数组：

```
NSMutableArray *mutArrURLs 
```

然后在 viewDidLoad 甚至在“+(void)initialize”中：

```
mutArrURLs = [[NSMutableArray alloc]init]; 
```

现在您有了一个可以在块中操作的对象。不要创建临时的，只需将对象添加到这个全局数组中。

编辑：无法理解为什么将其设为静态会有所帮助，但很高兴这对您有用。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-24T21:59:03.070

如果要更改/分配块内的全局变量，则应`__block`在声明全局变量时使用指令。应该是这样的：`__block NSMutableArray *mutArrURLs;`。

# css - 评论插件在 FF 或 Chrome 中的定位不好

> ID：16196607
> 
> 赞同：0
> 
> 时间：2013-04-24T15:52:41.550
> 
> 标签：css, facebook-comments

似乎我的评论插件在我的页面上的位置不太好。在 Firefox 和 Chrome 中，插件的左边距不是居中，而是居中。在 IE 中显示良好。问题开始两天了，我没有更改我的代码。

页面：[http ://www.yimago.com/radio1/](http://www.yimago.com/radio1/)

我使用的代码：

```
 <div style="width:100%;text-align:center;font-size:0.9em;">
<fb:comments-count href=http://www.yimago.com/radio1/></fb:comments-count> comments</div>

<div style="width:100%;text-align:center;font-size:0.9em;">
<div class="fb-comments" data-href="http://www.yimago.com/radio1/" data-width="950" data-num-posts="5" text-align:left;></div>
</div> 
```

您好：将此添加到我的 CSS 中：

```
.fb_iframe_widget iframe {position:relative; left:0px;} 
```

似乎解决了我的问题。希望这对其他人有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T02:50:48.643

将此添加到我的 CSS 中：

```
.fb_iframe_widget iframe {left: 0px;} 
```

似乎解决了我的问题。

# c++ - Qt UI 线程问题

> ID：16196608
> 
> 赞同：0
> 
> 时间：2013-04-24T15:52:43.170
> 
> 标签：c++, multithreading, qt

好的，所以我问了几个关于 QFuture 的问题，这是我目前用来线程化我的 UI 应用程序的。

基本上我在一个需要很长时间的类中有一个函数，所以我自然希望它线程化，所以当从我的 UI 类调用它时，它不会只是锁定我的 UI。

然后我实现了一个 QFutureWatcher 来等待 finished() 信号，此时它将启动另一个函数，该函数在一个新线程中花费了很长时间（但是这个函数正在对 UI 做一些事情）。我使用相同的代码来实现第二个线程函数，但是这个函数仍然锁定了我的 UI。

我得出的结论可能完全错误，但我似乎无法找出为什么它不起作用所以我所能做的就是假设并在这里问......

也许我不能有 2 个使用 QConcurrentRun 的 QFuture

不能将 QFuture 与 ui 的东西一起使用（在我的情况下 QGraphicsView 添加到场景）

如果有人有很棒的建议，请在另一篇文章中阅读，我可能应该将 QObject 子类化，但没有给出示例，所以我无法真正实现这一点，因为我什至不知道我打算重新实现什么样的功能..

TLDR：如何线程化一个对 UI 起作用的函数（添加到 QGraphicsScene）

代码示例，这是一个需要很长时间的函数，因为我从不同的函数循环调用这个函数几十万次，大约需要 30 秒才能完成，此时 UI 没有响应

```
void GUI::paintSomething(double x, double y)
{
    /// Decalre a QPen for Painting dots
    QPen pen;

    // set the pen colour
    pen.setColor(Qt::white);

    // Add ellipse at the x y position passed in
    scene->addEllipse(x, y, 1.5, 1.5, pen, QBrush(Qt::SolidPattern));
} 
```

线程代码，paint都是调用paintSomething的函数

```
*future2 = QtConcurrent::run(this, &GUI::paintAll);

// Set watcher to look at QFuture futre2
watcher2->setFuture(*future2); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T16:05:26.303

首先从除主线程之外的任何内容更新 ui / 创建 ui 元素是一个很大的禁忌。所以甚至不要走那条路。

要在工作线程和主线程之间进行通信，在 Qt 中，您可以`Qt::QueuedConnection`在连接跨线程 Signal <-> Slot 时使用。

您通常打算做的是在工作线程中进行计算，当您创建元素并将其添加到 时`QGraphicsView`，发送带有所需相关信息的信号，在主线程中捕获它并采取相应措施.

**更新：**

好吧，如果你调用任何东西“几十万次”，即使它是在大约 30 秒内从主线程调用单个函数，你也会有性能损失。这就是它归结为。解决这个问题没有什么神奇的技巧，因为你受限于你所拥有的硬件以及它在一个时钟周期内可以提供什么。

你需要的是用不同的方式解决你的问题。问问自己你`QGraphicsView`正在渲染什么。

是否可以将内容缓存到图像中？

是否所有的几十万个项目都需要可交互？

您还可以查看 Qt 附带的[“Mandelbrot - 示例”](http://harmattan-dev.nokia.com/docs/library/html/qt4/threads-mandelbrot.html)以查看处理跨线程更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T19:06:16.290

虽然这是非常糟糕的做法 - 从工作线程中更新 GUI 线程并且你应该通过信号槽来真正做到这一点，但你仍然可以通过以下方式更新 GUI`QMetaObject::invokeMethod()`

您必须在工作线程中运行每个函数，通过`invokeMethod()`. 例如 - 您`void GUI::paintSomething(double x, double y)`必须在线程中调用，如下所示：

```
QMetaObject::invokeMethod(this,"paintSomething", Q_ARG(double,x), Q_ARG(double,y)); 
```

GUI 会发现冻结，但这绝对不会提高您的性能..

```
i call this function from a different functions loop a few hundred thousand times 
```

当我做类似的任务时——我没有在每次更新后更新 GUI，每秒只更新几次（QElapsedTimer）并且在 QImage 中完成了所有的绘画，在一些超时后在 QLabel 上重新绘画。希望这可以帮助

# angularjs - Angular JS：ng-repeat 未在 ng-view 内更新

> ID：16196611
> 
> 赞同：0
> 
> 时间：2013-04-24T15:52:47.070
> 
> 标签：angularjs, angularjs-ng-repeat

当我更新变量 $scope.userMovies 中的数据时，如果在 ng-view 中，ng-repeat 不会更新。在 ng-view 之外，它会正确更新。

我错过了什么 ng-repeat 不能按我的预期工作？

**更新：** 根据要求，我将代码移至 Plunker 以更好地理解我的问题： [Plunker 代码示例](http://plnkr.co/edit/NqFTgzxYs33qQSGWCpA7)

**更新：** 解决了将变量 userMovies 保存在 rootScope 中的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T19:15:51.333

[ng-view](http://docs.angularjs.org/api/ng.directive%3angView)创建自己的范围。可能发生的情况是您正在`userMovies`此 ng-view 子范围上创建 $scope 属性，您的 MovieboxCtrl 范围无法看到/访问。正如@darkporter 在评论中提到的那样，您的 MovieboxCtrl 应该创建一个空`userMovies`数组。然后当 MovieCtrl 设置时`userMovies`，它会更新现有的对象引用，而不是创建一个新属性。

* * *

这是一个将数据存储在服务而不是控制器中[的 plunker 。](http://plnkr.co/edit/HzosUqBIDHpGvi7Y7Oid?p=preview)

```
angular.module('moviebox.services', [])
  .factory('movieboxApi', function() {
    var model = { movies: [] };
    model.getMoviesByTitle = function(query) {
      angular.copy([{'title': 'foo'},{'title': 'foo1'},
      {'title': 'foo2'},{'title': 'foo3'},
      {'title': 'foo4'}], model.movies);
    };
    return model;
  });
app.controller('MainCtrl', function($scope, movieboxApi) {
    $scope.getMoviesByTitle = function() {
      movieboxApi.getMoviesByTitle($scope.query);
    };
    $scope.userMovies = movieboxApi.movies;
});
app.controller('MovieboxCtrl', function ($scope, movieboxApi) {
    $scope.userMovies = movieboxApi.movies;
}); 
```

HTML 更改：

```
<body ng-controller="MainCtrl"> 
```

`angular.copy()`之所以使用，是因为控制器具有`model.movies`对服务最初创建的数组的引用。我们要修改该数组，而不是分配一个新数组。

# trigger.io - 使用文件/首选项 api 时出错

> ID：16196615
> 
> 赞同：0
> 
> 时间：2013-04-24T15:52:50.107
> 
> 标签：trigger.io

执行以下代码：

```
 $.each(video.videos, function(k, v) {
        forge.prefs.get("video-"+k, function(file) {
            console.log(file, (file));
            if (file) {
                forge.file.URL(file, function (url) {
                    video.videos[k].source = url;
                    console.log("video found: " + k + " " + url);
                });
            } else if (get) {
                forge.file.saveURL(v.url, function(file){
                    console.log("video saved: " + k + " " + v.url);
                    forge.prefs.set("video-"+k, file, function(){
                        download.get_video();
                    });
                });
            }
        });
    }); 
```

结果如下：

```
error occurred: file:///var/mobile/Applications/91521D1A-B4B6-4AAB-9960-F2AD747F1A49/Library/Application%20Support/Forge/assets-6AF5A9D3-5267-4327-889A-8EE004DF7779/forge/all.js:2: TypeError: 'undefined' is not a function (evaluating 'a({message:f.toString()})') 
```

该错误似乎与 forge.prefs.get() 有关，因为 Catalyst 显示 api 调用无限期挂起。有没有人遇到过类似的问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T12:38:26.427

问题在于 JSON3 js 库的包含，我认为这一定破坏了用于翻译 api 调用结果的伪造解释器，可能通过覆盖 JSON 方法。

# algorithm - StackOverflow 使用什么算法来查找类似问题？

> ID：16196620
> 
> 赞同：6
> 
> 时间：2013-04-24T15:52:53.863
> 
> 标签：algorithm

我需要在我正在构建的网站中为客户创建一个帮助台，我喜欢 StackOverflow 找到类似问题的方式。有谁知道该网站使用什么算法，你能提供任何参考资料吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T17:53:01.377

有一个`Machine Learning`名为`clustering`（一种类型`unsupervised learning`）的完整分支来处理此类问题。

该问题成为集群的一部分，同一集群中的其他问题（可能按`similarity measure`距离顺序）显示为类似问题。

`features`它可以用于集群的各种方法，其中一些可能是：

*   标签
*   标题中的词
*   文本中的单词（重量小于标题）
*   其他问题/网页的链接。

等等。

在这类问题中，可能还有其他使用诸如`text summarization`、`sentiment analysis`等技术的公式化特征。哪些功能对哪个问题有好处取决于问题。

您可以看到这些算法在运行的其他领域是：

*   YouTube
*   维基百科
*   数据库

并且列表继续无穷大。

那么你能做些什么来解决你的问题呢？

没有一个答案。这完全取决于您的数据和目标查询。但是，你仍然可以

*   了解. `feature engineering`_`machine learning`
*   了解`clustering`.

（这些有很多在线课程。）

或者

*   雇用一个知道这些东西的人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T15:54:51.690

大多数可能是标签上的加权匹配，也许是 match() 或标题上的等效全文加权搜索。

它可能在某个地方的元数据或常见问题解答中得到了它的详细信息

# javascript - 能证明 grunt 工作的最简单的 Gruntfile.coffee？

> ID：16196627
> 
> 赞同：3
> 
> 时间：2013-04-24T15:53:00.053
> 
> 标签：javascript, build, coffeescript, gruntjs

寻找 grunt 的基本介绍，所以我想知道最简单的 Gruntfile 是什么，它仍然可以让我`grunt`在命令行上运行并查看 grunt 进程是否正常工作。然后我可以从那里添加功能，但我想从头开始。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-24T15:53:00.053

将产生输出的最简单的 grunt 文件（Gruntfile.coffee）：

```
module.exports = (grunt) ->
  grunt.registerTask 'default', 'Try Logging', ->
    grunt.log.write('Running the default task') 
```

# c# - 尝试在 VS 2012 中将控制台应用程序转换为 Windows 窗体

> ID：16196629
> 
> 赞同：0
> 
> 时间：2013-04-24T15:52:59.857
> 
> 标签：c#, visual-studio

我在 Visual Studio 2012 中创建了一个控制台应用程序，它根据本金、贷款和利息计算贷款。我现在正在尝试将此控制台应用程序转换为 Windows 窗体。我觉得这个过程应该只是关掉控制台提示并用 Windows Forms txt 和单选按钮替换它。
这是我的控制台应用程序代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace MortgageCalculator
{
    public class MortgageCalculator
    {

        public static void Main(string[] args)
        {
            // declare variables
            double principle = 0; 
            double years = 0;
            double interest = 0;
            string principleInput, yearsInput, interestInput;

            // User input for Principle amount in dollars
            Console.Write("Enter the loan amount, in dollars(0000.00): ");
            principleInput = Console.ReadLine();
            principle = double.Parse(principleInput);
            //Prompt the user to reenter any illegal input
            if (principle < 0)
            {
                Console.WriteLine("The value for the mortgage cannot be a negative value");
            principle = 0;
        }

        // User input for number of years
        Console.Write("Enter the number of years: ");
        yearsInput = Console.ReadLine();
        years = double.Parse(yearsInput);
        //Prompt the user to reenter any illegal input
        if (years < 0)
        {
            Console.WriteLine("Years cannot be a negative value");
            years = 0;
        }

        // User input for interest rate
        Console.Write("Enter the interest rate(%): ");
        interestInput = Console.ReadLine();
        interest = double.Parse(interestInput);
        //Prompt the user to reenter any illegal input
        if (interest < 0)
        {
            Console.WriteLine("The value for the interest rate cannot be a negative value");
            interest = 0;
        }

        //Calculate the monthly payment
        //ADD IN THE .Net function call Math.pow(x, y) to compute xy (x raised to the y power). 
        double loanM = (interest / 1200.0);
        double numberMonths = years * 12;
        double negNumberMonths = 0 - numberMonths;
        double monthlyPayment = principle * loanM / (1 - System.Math.Pow((1 + loanM),   negNumberMonths));

        //double totalPayment = monthlyPayment;

        //Output the result of the monthly payment
        Console.WriteLine(String.Format("The amount of the monthly payment is: {0}{1:0.00}", "$", monthlyPayment));
        Console.WriteLine();
        Console.WriteLine("Press the Enter key to end. . .");
        Console.Read();

        }
    }
} 
```

我现在想将以上内容转换为 Windows 窗体应用程序。我想要的设计是我的表单，原则上是一个文本框，然后我有三个单选按钮控件。一个用于 15 年、30 年和其他（这是另一个文本框）。利率是一个组合框，利率为 1-15%。这是我第一次尝试创建 Windows 窗体，我将在下面展示我目前所拥有的内容。我想我的主要问题是计算我的每月付款以及如何将其导入 Windows 窗体应用程序。任何对正确方向的帮助将不胜感激。

```
 using System;
   using System.Collections.Generic;
   using System.ComponentModel;
   using System.Data;
   using System.Drawing;
   using System.Linq;
   using System.Text;
   using System.Threading.Tasks;
   using System.Windows.Forms;

   namespace LoanCalc
   {
   public partial class Form1 : Form
   {
       public Form1()
       {
           InitializeComponent();
       }

       private void Form1_Load(object sender, EventArgs e)
       {
           tbLoanDuration.Enabled = false;
       }

       private void rb30years_CheckedChanged(object sender, EventArgs e)
       {
           if (rbOther.Checked)
               tbLoanDuration.Enabled = true;
           else
               tbLoanDuration.Enabled = false;
       }

       private void button1_Click(object sender, EventArgs e)
       {

          if (cbLoanRate.SelectedIndex > -1)
           {
               string s = cbLoanRate.SelectedItem.ToString();
           }

           string msg = string.Format("Your total monthly payment is", MonthlyPayment);

        }

       private void tbLoanDuration_TextChanged(object sender, EventArgs e)
       {
           double years = 0;
           Control ctrl = (Control)sender;

           bool success = Double.TryParse(tbLoanDuration.Text, out years);
           if (!success)
           {
               errorProvider1.SetError(ctrl, "This is not a valid number");
           }  
           else
           {
               errorProvider1.SetError(ctrl, "");
           }

       }

       private double MonthlyPayment()
       {
           double loanM = (interest / 1200.0);
           double numberMonths = years * 12;
           double negNumberMonths = 0 - numberMonths;
           double monthlyPayment = principle * loanM / (1 - System.Math.Pow((1 + loanM), negNumberMonths));

           return monthlyPayment;
       }

       public double interest { get; set; }
       public double years { get; set; }
       public double principle { get; set; }

       private void tbPrinciple_TextChanged(object sender, EventArgs e)
       {

           double principle = Double.Parse(tbPrinciple.Text);
           //Prompt the user to reenter any illegal input
           if (principle < 0)
           {
               Console.WriteLine("The value for the mortgage cannot be a negative value");
               principle = 0;
           }
       } 
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T16:50:43.223

正如 PhaDaPhunk 所说，让我们确切地知道您遇到的问题（错误消息、不确定如何获取数据等）对我们帮助您非常有帮助。根据您问题的一般性，我看到了一些事情，其中​​一些我在我的评论中提出，我将在这里详细说明。

您在代码中定义了三个属性：

```
 public double interest { get; set; }
   public double years { get; set; }
   public double principle { get; set; } 
```

在风格上，属性通常是大写的（即`public double Interest`）。

当相应控件的值或选定项发生更改时，您似乎正在为这些属性分配值 - 至少有时是这样。我将对您的代码进行以下更改：

```
private void rb30years_CheckedChanged(object sender, EventArgs e)
{

    if (rb15Years.Checked)
    {
        years = 15;
        tbLoanDuration.Enabled = false;
    }
    else if (rb30Years.Checked)
    {
        years = 30;
        tbLoanDuration.Enabled = false;
    }       
    else if (rbOther.Checked)
    {
        tbLoanDuration.Enabled = true;
    }
} 
```

我猜你的 15 年和 30 年单选按钮 ID 是什么。`year`如果他们选择 15 或 30，这也会为属性分配一个值。

对于您的计算，您需要调用该方法并将返回结果格式化为字符串：

```
private void button1_Click(object sender, EventArgs e)
{

    double selectedRate = 0;

    if (cbLoanRate.SelectedIndex > 1 && double.TryParse(cbLoanRate.SelectedItem, out selectedRate))
    {
        interest = selectedRate;

        lblMonthlyPayment.Text = string.Format("Your total monthly payment is {0}{1:0.00}", "$", MonthlyPayment());
    }
} 
```

这是大部分更改的地方。

首先，如果 cbLoanRate 的 selectedIndex 大于 1，并且选中的项可以转换为 double，则进行计算，否则什么也不做（或显示错误）。

如果 selectedIndex 大于 1 并且选中的 item 可以解析为 doulbe，则将结果赋给`selectedRate`属性`interest`。

我不确定你打算做什么`msg`，但假设你有一个`Label`电话`lblMonthlyPayment`，显示每月付款。我使用了与控制台应用程序中相同的字符串格式，并直接调用了您的方法`MonthlyPayment()`。看起来您试图`monthlyPayment`从该`MonthlyPayment`方法中使用，但这不起作用，因为它仅在方法内部的范围内（可访问）。然后将方法的返回值分配给`lblMonthlyPayment`的 Text 属性。

最后，我也会改变你`tbPrinciple_TextChanged`的一点：

```
 private void tbPrinciple_TextChanged(object sender, EventArgs e)
   {

       // Use TryParse instead of Parse in case the user enters text or some
       // other non-numeric character
       double enteredPrinciple = 0;

       if (double.TryParse(tbPrincipal.Text, out enteredPrinciple))
       {
           if (enteredPrinciple < 0)
           {
               // Console.WriteLine won't display anything to the user
               MessageBox.Show("The value for the mortgage cannot be a negative value");
           }
           else
           {
               // Assign it to the property
               principle = enteredPrinciple;
           }
       }
       else
       {
           // Prompt the user to enter a numeric value
           MessageBox.Show("The value for the mortgage must be a numeric value");
       }
   } 
```

`tbLoanDuration_TextChanged`最后，对您的方法稍作改动：

```
 private void tbLoanDuration_TextChanged(object sender, EventArgs e)
   {
       // Use a different name for the out parameter than your property
       // to avoid confusion
       double enteredYears = 0;

       // This is unnecessary
       Control ctrl = (Control)sender;

       if (Double.TryParse(tbLoanDuration.Text, out enteredYears))
       {
           years = enteredYears;
           errorProvider1.SetError(ctrl, "");
       }  
       else
       {
           years = 0;
           errorProvider1.SetError(ctrl, "This is not a valid number");
       }
   } 
```

这些更改中的大多数都是次要的 - 总而言之，您走在正确的道路上。我还没有测试过这段代码，大约 2 年没有做过 WinForms，所以可能存在一些语法问题，但这应该会为您指明正确的方向。

# android - 不幸的是，应用程序已停止

> ID：16196632
> 
> 赞同：-1
> 
> 时间：2013-04-24T15:53:10.913
> 
> 标签：android

当我在 Eclipse 模拟器中开始我的活动时，我收到了消息

> 不幸的是，应用程序已停止

我不明白 LogCat 我的 logCat 说请帮助我我开始失去希望。

```
04-24 15:52:19.729: W/Trace(982): Unexpected value from nativeGetEnabledTags: 0
04-24 15:52:19.729: W/Trace(982): Unexpected value from nativeGetEnabledTags: 0
04-24 15:52:20.599: D/dalvikvm(982): GC_FOR_ALLOC freed 83K, 8% free 2567K/2788K, paused 60ms, total 63ms
04-24 15:52:20.609: I/dalvikvm-heap(982): Grow heap (frag case) to 3.225MB for 614416-byte allocation
04-24 15:52:20.679: D/dalvikvm(982): GC_FOR_ALLOC freed 2K, 7% free 3165K/3392K, paused 65ms, total 66ms
04-24 15:52:20.789: D/dalvikvm(982): GC_CONCURRENT freed <1K, 7% free 3165K/3392K, paused 32ms+16ms, total 114ms
04-24 15:52:20.989: D/dalvikvm(982): GC_CONCURRENT freed 674K, 24% free 2906K/3792K, paused 25ms+24ms, total 114ms
04-24 15:52:21.049: D/AndroidRuntime(982): Shutting down VM
04-24 15:52:21.061: W/dalvikvm(982): threadid=1: thread exiting with uncaught exception (group=0x40a70930)
04-24 15:52:21.069: E/AndroidRuntime(982): FATAL EXCEPTION: main
04-24 15:52:21.069: E/AndroidRuntime(982): android.app.SuperNotCalledException: Activity {tabet.salah.ventemagasin/tabet.salah.ventemagasin.LoginActivity} did not call through to super.onCreate()
04-24 15:52:21.069: E/AndroidRuntime(982):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2146)
04-24 15:52:21.069: E/AndroidRuntime(982):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
04-24 15:52:21.069: E/AndroidRuntime(982):  at android.app.ActivityThread.access$600(ActivityThread.java:141)
04-24 15:52:21.069: E/AndroidRuntime(982):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
04-24 15:52:21.069: E/AndroidRuntime(982):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-24 15:52:21.069: E/AndroidRuntime(982):  at android.os.Looper.loop(Looper.java:137)
04-24 15:52:21.069: E/AndroidRuntime(982):  at android.app.ActivityThread.main(ActivityThread.java:5039)
04-24 15:52:21.069: E/AndroidRuntime(982):  at java.lang.reflect.Method.invokeNative(Native Method)
04-24 15:52:21.069: E/AndroidRuntime(982):  at java.lang.reflect.Method.invoke(Method.java:511)
04-24 15:52:21.069: E/AndroidRuntime(982):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-24 15:52:21.069: E/AndroidRuntime(982):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-24 15:52:21.069: E/AndroidRuntime(982):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T15:55:06.100

把这个放在你的`onCreate()`

```
super.onCreate() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-24T15:55:18.617

在您的活动`LoginActivity`中`onCreate`添加：

```
super.onCreate(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-24T15:55:20.303

你可能没有打电话给`super.onCreate()`你`LoginActivity`的`onCreate`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-24T15:55:20.467

> android.app.SuperNotCalledException：活动 {tabet.salah.ventemagasin/tabet.salah.ventemagasin.LoginActivity} 没有调用到 super.onCreate()

调用`super.onCreate(savedinstancestate)`你的 LoginActivity`onCreate()`方法

# jquery - 无法将回调附加到不显眼的验证显示错误

> ID：16196633
> 
> 赞同：2
> 
> 时间：2013-04-24T15:53:11.113
> 
> 标签：jquery, jquery-validate, unobtrusive-validation

我无法将回调附加到 jquery 不显眼的验证。我想要做的是在任何时候显示字段验证错误时隐藏一条信息性消息。它们都占据页面上的相同区域。我不知道如何将回调附加到显示错误方法。如果您调用 validate，我有一个可以工作，但是在触发字段的更改之前会显示错误消息。

这是一个演示我的问题的jsfiddle。[http://jsfiddle.net/K6NcF/4/](http://jsfiddle.net/K6NcF/4/)

这是仅在调用 validate() 时运行的回调。

```
$('#theForm').bind('invalid-form.validate',function(){
    $('.info-box').hide();
}); 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T16:26:00.453

像这样使用不显眼时，您可以访问突出显示和取消突出显示回调

```
// grab a reference to the validator instance
var v = $('form').validate();

// reference the settings property, and the highlight function
var originalHighlight = v.settings.highlight; 
```

你可以用你的东西覆盖它，或者下面的例子展示了一种添加你自己的功能而不覆盖那里的方法。

```
var v = $('#theForm').validate();

var originalHighlight = v.settings.highlight;
var originalUnHighlight = v.settings.unhighlight;

v.settings.highlight = function(element, errorClass, validClass)
{
  console.log('doing my stuff here');
  $('.info-box').hide();
  originalHighlight.call(v, element, errorClass, validClass);
}

v.settings.unhighlight = function(element, errorClass, validClass)
{
  console.log('undoing my stuff here');
  $('.info-box').show();
  originalUnHighlight.call(v, element, errorClass, validClass);
} 
```

在这里摆弄[http://jsfiddle.net/K6NcF/8/](http://jsfiddle.net/K6NcF/8/)

# sitecore - Sitecore 的 S4S 连接器中缺少映射到 Salesforce 营销活动字段

> ID：16196646
> 
> 赞同：1
> 
> 时间：2013-04-24T15:53:55.423
> 
> 标签：sitecore, web-forms-for-marketers

由于某种原因，我的 S4S 映射屏幕中缺少“映射到 Saleforce 活动”字段。

这是 S4S 指南中的屏幕截图： ![面向营销人员的 S4S 网络表单指南](https://i.stack.imgur.com/2cWnY.png)

我是否缺少安装组件？是否有需要在某处切换的设置？我在 Salesforce 中有一些“活动”活动，所以这不是问题。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T20:19:07.243

2个问题。

1.  您需要最新版本的 S4S 连接器模块。

2.  您需要选择联系人或潜在客户。

感谢 FuseIT 的 Terry 在澳新军团日回复我！

# android - 在 AOSP 中链接第 3 方静态库时需要帮助

> ID：16196647
> 
> 赞同：1
> 
> 时间：2013-04-24T15:53:56.163
> 
> 标签：android, android-mediaplayer, android-source, android-build, android-make

我正在尝试将第 3 方库移植到 mediaplayerservice 以增强对许多容器格式的支持。

我能够构建第 3 方堆栈并从中获取库（静态库）。

现在，我想将此第 3 方库链接到 MediaPlayerService。我找不到，在makefile中提到的位置和方式来链接这个静态库。

我尝试添加以下行，
`LOCAL_STATIC_LIBRARIES := libThirdparty`
&&

```
LOCAL_LDLIBS += -l$(TOP)/frameworks/out/target/product/tvsimvbox/obj/STATIC_LIBRARIES/libThirdparty_intermediates/libThirdparty.a 
```

但是，以上几行没有帮助。它给出了“未定义的引用”错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T17:40:34.443

可以链接它。

您可以使用 LOCAL_STATIC_LIBRARIES。我的代码中的问题是我提到的顺序是错误的。将使用（必需/依赖）库的库应该是第一个，提供的库应该是下一个。

否则就是，LOCAL_LDFLAGS += -L"*库路径*" -lThirdparty

# php - SQL 从 2 个表中获取信息并进行比较

> ID：16196649
> 
> 赞同：1
> 
> 时间：2013-04-24T15:53:57.150
> 
> 标签：php, sql, compare

我有 2 个表要比较并找到用户名未关注的用户，然后显示未关注的人的用户名。

```
Edit:
Table 1: users 
username

Table 2: follow
username (the name of the user)
followname (the name of the person the user follows)

In Table 2 username and followname are never null.  When a user follows another user then it is put into the list like so:

Username          Followname
derekshull         dvdowns
derekshull         testuser
dvdowns            testuser
testuser           1511project
derekshull         newuser 
```

在我的脑海中，我看到表 1 获取了所有用户名的列表（列名是表 1 中的“用户名”），然后获取了用户 ($username) 未关注的所有用户名的列表（列名是“followname”来自表 2)。

如何让它比较两个列表而不显示用户已经关注的用户名？

这就是我现在所拥有的。出于某种原因，它正在显示我关注和不关注的用户。

```
$alluserslookup = mysql_query("SELECT * FROM users WHERE username!='$username'");
$thefollowerslookup = mysql_query("SELECT * FROM follow WHERE username='$username'");

while ($followersrow = mysql_fetch_assoc($thefollowerslookup)) {
$afollower = $followersrow['followname'];

while ($allusersrow = mysql_fetch_assoc($alluserslookup)) {
$allusers = $allusersrow['username'];

if ($afollower != $allusers) {
echo "<a href='viewprofile.php?viewusername=$allusers'>$allusers</a><br>";
}
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T16:01:04.750

（更新）尝试：

```
select u.* from users u
left join follow f on u.username = f.followname and f.username = 'derekshull'
where f.followname is null 
```

SQLFiddle[在这里](http://sqlfiddle.com/#!2/932ef/3)。

# c# - 实体框架中的日期时间 && sql格式的日期时间返回不同的结果

> ID：16196650
> 
> 赞同：2
> 
> 时间：2013-04-24T15:53:57.633
> 
> 标签：c#, sql, sql-server, entity-framework, asp.net-mvc-4

伙计们，我在实体框架和 DateTime 中有一个大问题。这里的问题：

首先是实体：

当用户提交表单时，这些值正在为条件查询创建，具体取决于用户类型的参数。例子：

```
var query =  from user in UserTable

select user;

        if(Request.Form["Category"])
        {
        query = query.where(add=>add.Category == Request.Form["Category"])
        }

//and here the between 
         if(Request.Form["start_date"] && Request.Form["end_date"])
        {
        query = query.where(add=>add.Date < Request.Form["start_date"] && add.Date > Request.Form["end_date"] )//equivalent to between
        }
    until...
    return query.ToList(); 
```

很好，但问题仍然存在，当用户想要按日期搜索时，将请求表单转换为日期时间时，格式与输入的格式不同：

```
User'input
2003-12-02

Convert.ToDateTime
result : 02/11/2003(not iqual to the user input) 
```

所以，这不是巧合（嗯，这就是我的客人，因为我读到那个实体自己解决了这个问题）。而且我不能将日期属性设置为字符串，因为我不能在字符串之间使用。

这里的模型简化了：

```
public string Category {get;set;}
public DateTime Date{get;set;} 
```

但这还不是全部

**第2部分**

我尝试以 `02/11/2003`格式查询以查看查询是否有效并且是否正确，但是当我尝试使用时`2003-12-02`，结果如下

```
 02/12/2003 format
16330 rows

2003-12-02 format
136 rows 
```

请注意，它们相同但返回不同的结果。此外，当我检查结果时，我注意到在 `02/12/2003 format`结果中查询时包含更小或更高的日期：

例子：

```
Select date FROM Table WHERE date BETWEEN 02/12/2003 AND  03/12/2003

results include: 05/12/2003,30/12/2003 
```

为什么这两个查询之间存在显着差异？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T16:06:21.557

这与数据库的文化有关。您可以通过执行以下命令检查您当前的文化：

```
SELECT @@language 
```

要查看您的文化的日期格式，请执行：

```
EXEC sp_helplanguage 
```

基于此，您可以`Convert.ToDateTime()`在 C# 中使用您的特定文化，如下所示：

**更新的答案**

```
DateTime startDate = DateTime.MinValue;
DateTime endDate = DateTime.MaxValue;

// Set this to your culture if it's not en-US
DateTimeFormatInfo usDtfi = new CultureInfo("en-US", false).DateTimeFormat;

try { startDate = Convert.ToDateTime(Request.Form["start_date"], usDtfi); }
catch {}

try { endDate = Convert.ToDateTime(Request.Form["end_date"], usDtfi); }
catch {}

if (startDate != DateTime.MinValue && endDate != DateTime.MaxValue)
{
    query = query.where(add=>add.Date <= endDate && add.Date >= startDate ) //equivalent to between
} 
```

**请注意，您的日期倒退了。你有 < startDate 和 > endDate。这与`BETWEEN`. （除非您认为 startDate 是两个日期中较大的一个，但我不是。）**

# asp.net-mvc - ASP.NET MVC4 NServiceBus 属性/过滤器结构映射

> ID：16196652
> 
> 赞同：0
> 
> 时间：2013-04-24T15:54:10.873
> 
> 标签：asp.net-mvc, dependency-injection, structuremap, nservicebus, nservicebus3

我在操作过滤器（属性）中获取 IBus 实例时遇到问题。

从[在 MVC Filter 中设置 IBus 属性](https://stackoverflow.com/questions/16179547/setting-ibus-property-in-mvc-filter)，我知道 DI 和动作过滤器不能很好地发挥作用，我使用接受的答案让它们发挥得很好。问题是让 DI 和动作过滤器发挥出色会破坏 NServiceBus。

同样的问题，John 建议查看音像店解决方案，看看如何完成它。这个答案有两个问题：

1.  它完全忽略了我正在使用 StructureMap 的事实。
2.  更重要的是，使用该示例，当我添加自己的派生授权过滤器（见下文）时，IBus 实例仍未被填充。

这是我的猜测，但我不认为 N​​ServiceBus 具有的烘焙 DI 容器可以将 DI 处理为动作过滤器。

```
//NOTE:
//I added a Filters folder to the project, and stuck this class in there
//This filter will disable authentication when debugging
//Add the attribute to the home controller, and
//If you put a break point at the beginning, IBus doesn't get filled

using NServiceBus;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;

namespace VideoStore.ECommerce.Filters
{
    public class AMSAuthorizeAttribute : AuthorizeAttribute
    {
        public IBus Bus { get; set; }
        protected override bool AuthorizeCore(HttpContextBase httpContext)
        {
            bool accessGranted = false;

            accessGranted = base.AuthorizeCore(httpContext);

            //if(isAdmin)
            //  accessGranted = true;

#if DEBUG
            accessGranted = true;
#endif

            return accessGranted;
        }
    }
} 
```

当我按照[Setting IBus Property in MVC Filter 中](https://stackoverflow.com/questions/16179547/setting-ibus-property-in-mvc-filter)指定的步骤操作时，我收到此错误`StructureMap Exception Code: 202 No Default Instance defined for PluginFamily NServiceBus.Unicast.Subscriptions.ISubscriptionStorage, NServiceBus.Core, Version=3.3.0.0, Culture=neutral, PublicKeyToken=9fc386479f8a226c`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T21:09:45.080

因为过滤器属性不适合依赖注入，您可能会发现在过滤器中执行此操作更容易：

```
private readonly IBus bus = Configure.Instance.Builder.Build<IBus>(); 
```

# opencv - OpenCV 安装后清理

> ID：16196654
> 
> 赞同：0
> 
> 时间：2013-04-24T15:54:15.453
> 
> 标签：opencv, resource-cleanup

我下载了 OpenCV 2.4.3 库并按照[安装说明](http://opencv.willowgarage.com/wiki/InstallGuide)进行操作。安装很顺利，就像`cmake-gui`一些配置，然后`make`和最后`sudo make install`。

一切都很好，但现在我想***删除可以删除***的内容并且不干扰安装。有：

i) 下载的 .tar 库 -> 这肯定会被删除

ii）提取的库->我想删除它但不确定是否会干扰

***iii）***带有已编译库的文件夹（发布）..这是最大的，我想删除它:)

我只剩***下 500MB+***了。在安装 OpenCV 之前，我有***3.2GB***。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-26T15:39:32.693

*   .tar - 可以去

*   提取的库 - 您可以删除它，但有时最好查看库的源代码，以了解 CV_ASSERT 生成异常并杀死您的程序的原因

*   release - 你可以删除它，因为里面所有东西的副本都在你的系统默认目录中，比如/usr/local/lib。尽管要留下一种简单的卸载方法，但我建议您检查是否`make clean`或`make clean-all`不会减轻您的磁盘空间不足负担。

# r - R，通过根据另一个向量计算值来重组向量

> ID：16196655
> 
> 赞同：2
> 
> 时间：2013-04-24T15:54:15.587
> 
> 标签：r, vector, reorganize

我有 2 个向量：

```
a <- c(6,5,3,1,6,7,4,5,3,2)
b <- c(2,1,1,2,3,2,1,3,3,2) 
```

我想要一个简单的代码，它返回一个向量，该向量由向量“a”中所有值的平均值组成，在 b 中存在相同值的位置。此外，我希望它的排序方式与 b 的级别（级别（as.factor（b）））相同。

```
solution = c(mean(5,3,4),mean(6,1,7,2),mean(6,5,3)) 
```

更简单的例子：

```
a <- c(1,2,3,4)
b <- c(1,2,2,1)
solution <- c(2.5,2.5) 
```

非常感谢 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T15:57:21.400

```
b <- factor(b, levels=c(2,1,3)) ## Sets the order of the factor's levels.
tapply(a, b, FUN=mean)
#        2        1        3 
# 4.000000 4.000000 4.666667 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T16:01:16.640

有几种方法可以实现这一点。@Ananda 已经提到了一个。一些替代方案是：

```
aggregate(a,list(b),mean)
ddply(as.data.frame(a),.(b),summarize,mean=mean(a)) # require(plyr)
by(a,b,mean) # this is just a wrapper for tapply 
```

选择取决于您想要的输出格式和实际数据的输入格式（例如向量与数据帧）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T16:21:04.687

解决`data.table`方案：

```
library(data.table)
d = data.table(a = c(6,5,3,1,6,7,4,5,3,2), b = c(2,1,1,2,3,2,1,3,3,2))

d[, mean(a), by = b][order(b)] # (or [order(b), V1] if you just want the means) 
```

# html - 输入日期 - 仅使用日历选择器 HTML5 输入

> ID：16196657
> 
> 赞同：3
> 
> 时间：2013-04-24T15:54:16.920
> 
> 标签：html

有什么办法不允许手动编辑日期？我的意思是我想强制用户只使用日历来选择日期。

有

```
<input type="date"   value="yyyy-mm-dd" class="input-medium search-query"> 
```

用户可以在输入表单中输入一些内容。我试图这样做：

```
<input type="date"   value="yyyy-mm-dd" class="input-medium search-query" disabled> 
```

但它冻结了整个形式。

有什么提示吗？或者也许有什么快速的方法可以防止用户破坏日期格式？（因为我使用引导程序，所以我不喜欢使用 jquery）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-24T15:59:41.177

如果您准备在其中扔一些 JS，您可以在用户按下键时返回 false：

```
<input type="date"   value="yyyy-mm-dd" class="input-medium search-query" onkeypress="return false"> 
```

[这是一个 jsFiddle](http://jsfiddle.net/Axh6E/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-25T09:23:54.340

在旧浏览器中，不支持 type=date 并将降级为 type=text。然后，onkeydown='return false' 方法将使输入变得不可能。

# sql - 谁能告诉我可能导致此错误的原因是什么？

> ID：16196664
> 
> 赞同：-3
> 
> 时间：2013-04-24T15:54:35.363
> 
> 标签：sql, sql-server

我正在编写简单的 sql 查询，但由于某种原因，我不断收到此错误“消息 8152，级别 16，状态 14，第 1 行字符串或二进制数据将被截断。”，我不知道是什么原因造成的，我已经在网上搜索过什么样的事情会导致这个错误，但我发现的只是“你正在尝试输入太长的数据。”，这不是我的代码的情况。

```
CREATE TABLE BOOK
(
    PrimaryAuth     varchar(20) NOT NULL,
    Title           varchar     NOT NULL,
    ISBN            varchar(10) NOT NULL,
    PubID           char(3),
    Pub_Date        varchar(20),
    price           float,
    book_desc       varchar(50),
    PRIMARY KEY(ISBN),
    UNIQUE(Title)
);

INSERT INTO BOOK values('Scott Westerfeld', 'Peeps', '1595140832', '101', 'September 7, 2006', 8.99, 'A year ago, Cal Thompson...'); 
```

有人可以告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T15:55:51.587

```
Title           varchar     NOT NULL, 
```

你需要给 varchar 一个值

IE

```
book_desc       varchar(50), 
```

所以基本上 Title 列的值只有 1 个字符，因为您在创建表时没有定义它，并且您试图在列内插入超过 1 个字符，这会给您带来错误

# ruby-on-rails - 嵌套资源的 Rails 最佳实践 - 显示（父）与索引（子）

> ID：16196665
> 
> 赞同：3
> 
> 时间：2013-04-24T15:54:35.787
> 
> 标签：ruby-on-rails, nested-resources

我的 rails 3 应用程序中有以下嵌套资源。

```
resources :calendars do
  resources :events
end 
```

为特定日历显示（列表或日历）事件的推荐 url/路径是什么？我应该使用日历控制器的 show 方法（[http://mydomain.com/calendars/1](http://mydomain.com/calendars/1)）还是事件控制器的 index 方法（[http://mydomain.com/calendars/1/events](http://mydomain.com/calendars/1/events)）？这是个人喜好问题，还是有处理这种情况的约定/最佳实践？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T16:25:17.697

标准 RESTful 应用程序中的约定是使用[http://mydomain.com/calendars/1/events](http://mydomain.com/calendars/1/events)，因为您的示例中的事件是嵌套资源。即，日历资源具有许多事件资源。

话虽这么说，如果您实际上是在显示一个可视日历（恰好在其上填充了事件），那么您将使用[http://mydomain.com/calendars/1](http://mydomain.com/calendars/1)，因为您要显示的主要资源是实际日历。

# excel - 如何在 Excel 中查找和提取重复的文本字段

> ID：16196666
> 
> 赞同：2
> 
> 时间：2013-04-24T15:54:40.113
> 
> 标签：excel, excel-2010

我在 MS Excel 2010 的一栏中有大约 80,000 封电子邮件。

其中一些是重复的，我需要找到并提取这些重复。我希望将副本放在单独的文档中。

现在，我可以使用 Excel 中内置的条件格式功能（主页选项卡 > 条件格式 > 突出显示单元格规则 > 重复值）找到它们并以红色突出显示它们，但这实际上只是突出显示它们。

还有删除重复项，显然只是删除它们；也不是我想要的。

有什么建议么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-24T16:38:56.070

这是一个非常简单的方法：

```
=IF(COUNTIF($A$1:$A$15,A1)>1,A1,"") 
```

![示例 1](https://i.stack.imgur.com/4q9fH.png) 自动填充 B 列。

然后只需在 B 列上删除重复项： ![示例 2](https://i.stack.imgur.com/9xQgK.png)

然后，您可以对 B 列中的任何单元格进行排序，并将其值排在最前面。祝你好运。

# wpf - 在 XAML 中设置 UserControl 属性

> ID：16196667
> 
> 赞同：0
> 
> 时间：2013-04-24T15:54:42.507
> 
> 标签：wpf, xaml

我的代码背后有我想在 XAML 中设置的自定义属性。

财产：

```
Public Property WindowName() As String Implements IVendorEntryEditView.WindowName
    Get
        Return CType(GetValue(WindowNameProperty), Integer)
    End Get
    Set(ByVal value As String)
        SetValue(WindowNameProperty, value)
    End Set
End Property

Public Shared ReadOnly WindowNameProperty As DependencyProperty = _
    DependencyProperty.Register("WindowName", GetType(String), GetType(VendorEntryEditView), _
        New PropertyMetadata("")) 
```

`Attached property has no setter`但是，当我尝试设置它时，我在我的 XAML 中收到一条消息：

```
<UserControl x:Class="VendorEntryEditView"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
         xmlns:local="clr-namespace:EntryEditUi"
         mc:Ignorable="d"
         Loaded="VendorEntryEditView_OnLoaded"
         local:VendorEntryEditView.WindowName="test"
         d:DesignHeight="300" d:DesignWidth="300"> 
```

如何在 XAML 中设置该属性？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T17:25:48.653

也许只是尝试（您在哪里使用您的`UserControl`）：

```
<local:VendorEntryEditView WindowName="Test Value" /> 
```

**或者**`UserControl`如果您必须在自身的 xaml 中分配此值，请通过`Style`in分配它`VendorEntryEditView.xaml`

```
<UserControl.Style>
  <Style>
    <Setter Property="local:VendorEntryEditView.WindowName"
            Value="Blah Name" />
  </Style>
</UserControl.Style> 
```

# razor - .NET Razor 模型空

> ID：16196668
> 
> 赞同：0
> 
> 时间：2013-04-24T15:54:48.240
> 
> 标签：razor, asp.net-mvc-4, view, model

我正在使用 MVC 4 使用 .NET 框架。我有一个控制器：

```
using DataProvider.Queries;
using DataProvider.Models;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;

namespace ATSGlobalDashboard.Controllers
{
    public partial class ATSNavigatorController : Controller
    {

        public virtual ActionResult Index(DataProvider.Models.GaugeAveragesViewModel model)
        {
            return View(model);
        }
    }
} 
```

一个模型：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace DataProvider.Models
{
    public class GaugeAveragesViewModel
    {
        public decimal? timetoresolutiontotalqtd { get; set; }
        public int? backlogtotalcount { get; set; }
        public double? AverageSatisfacationResult { get; set; }
    }
} 
```

然后我想将其用于我的视图/数据视觉效果中的值。我的部分观点是这样设置的：

```
@model DataProvider.Models.GaugeAveragesViewModel
@{
    ViewBag.Title = "GlobalDashboardModal";
}

<div class="row">
    <div id="satisfactionChartButton" class="large-3 large-offset-1 columns modalGaugeArea allGaugesSetup">
        <div class="chartModalTitle">Customer Satisfaction</div>
        <div id="customerSatisfactionGauge" class="gaugeContainer"></div>
        <input id="customerSatisfactionGaugeValue" value="@Model.AverageSatisfacationResult"/>
        <div class="chartModalDialog"></div>
        <div id="satisfactionOverlay">
            <div class="overlayChartTitle">Customer Satisfaction<br />
                Chart
            </div>
            <img class="overlayImages" src="@Url.Content(Links.Content.img.wht_Desktop_Analytics_png)" />
            <div class="overlayChartDialog">Click to View Chart</div>
        </div>
    </div>
</div> 
```

我希望能够获取输入值并将其与其他一些资源一起使用，但是我得到一个空对象错误，`@Model.AverageSatisfactionResult`因为无论如何快速测试这个，还是我在使用@Model razor 语法时留下了一步？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T16:12:03.000

如果您将模型传递给控制器​​中的视图，那么您可以使用以下内容

```
 @model.AverageSatisfacationResult

    <input id="customerSatisfactionGaugeValue"  value="@Model.AverageSatisfacationResult"/>

Replace by

     @Html.EditorFor(m=>model.AverageSatisfacationResult) 
```

@model 不是 @Model

编辑：

我看到了您的控制器，这是问题的原因。您将模型作为 get Action 的参数，它来自哪里。如果您知道它来自哪里，您可以执行以下操作

```
 public virtual ActionResult Index()
        {

           DataProvider.Models.GaugeAveragesViewModel model= new GaugeAveragesViewModel{
                    timetoresolutiontotalqtd =1.3,
                    backlogtotalcount=3,
                    AverageSatisfacationResult=5d
                     }
            return View(model);
        } 
```

# java - java.sql.SQLException：参数索引超出范围（2 > 参数个数，即 0）

> ID：16196670
> 
> 赞同：4
> 
> 时间：2013-04-24T15:54:52.663
> 
> 标签：java, sql, exception, sqlexception

```
public class Brothers extends javax.swing.JFrame {

    /**
     * declaring connection and SQL statement
     */

    Connection cn;
    Statement st;
    PreparedStatement pstmt=null;
    PreparedStatement pst;
    ResultSet rs;
    Object fname, mname, lname, bdate, nation, statusq,InstNo,  photo, combo, place, mimi; 
    int status;

    public Brothers() {        
        dbconnect _db = new dbconnect();

/*//////////////the above is just to show that I have two prepared statement each for each sql statement that i have //////////*/
        try {
            Class.forName("com.mysql.jdbc.Driver");
            //String unicode= "?useUnicode=yes&characterEncoding=UTF-8";
            cn = DriverManager.getConnection(_db.getHost(), _db.getUsername(), _db.getPassword());
            st=cn.createStatement(); 

 try{

        String Sql="INSERT INTO brothers(FirstName, MiddleName, LastName, BirthDate, BirthPlace, Nationality, InstituteNumber, Status, Picture) VALUES(?,?,?,?,?,?,?,?,?)";  
        pstmt=cn.prepareStatement(Sql);
        //pstmt.setString(1,txtTrial.getText());('?','?','?','?','?','?','?','?','?')
        pstmt.setString(2,txtFirtsName.getText());
        pstmt.setString(3,txtMiddleName.getText());
        pstmt.setString(4,txtLastName.getText());
        pstmt.setString(5,((JTextField)chooserBirthDate.getDateEditor().getUiComponent()).getText());
        pstmt.setString(6,txtPlacBirth.getText());

        String nations=combonation.getSelectedItem().toString();
        pstmt.setString(7,nations);
        pstmt.setString(8,txtInstituteNo.getText());

        pstmt.setObject(9,combostatus.getSelectedItem());
        pstmt.setBytes(10, person_image);

      pstmt.executeUpdate(Sql);

        JOptionPane.showMessageDialog(null, "Saving Successfull");

        }

        catch(Exception e){

          //JOptionPane.showMessageDialog(null, e);
          e.printStackTrace(); 
    } 
```

当我尝试使用上面的代码插入数据时，它会引发异常：

```
java.sql.SQLException: Parameter index out of range (10 > number of parameters, which is 9).
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1078)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:989)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:975)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:920)
    at com.mysql.jdbc.PreparedStatement.checkBounds(PreparedStatement.java:3813)
    at com.mysql.jdbc.PreparedStatement.setInternal(PreparedStatement.java:3795) 
```

我试图查看它，但我找不到问题，请帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T15:58:26.017

您在位置 2 而不是 1 开始插入

```
 pstmt.setString(2,txtFirtsName.getText()); 
```

将其更改为

```
pstmt.setString(1,txtFirtsName.getText()); 
```

对最后一个将是的其他人做同样的事情

```
pstmt.setBytes(9, person_image); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-06-18T11:52:14.303

问号的数量`?`必须等于参数。

如果您有 7 个参数，那么您的语句中应该有 7 个问号，即`insert into table name values(?,?,?,?,?,?,?)`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-24T15:56:41.250

您的 SQL 语句中只有 9 个参数。

```
String Sql="INSERT INTO brothers(FirstName, MiddleName, LastName, BirthDate, BirthPlace, Nationality, InstituteNumber, Status, Picture) VALUES(?,?,?,?,?,?,?,?,?)"; 
```

当您注释掉第一个`setString`方法调用时，您应该已为以下调用重新编号参数索引。它们的编号应该是 1 - 9，而不是 2 - 10。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T15:58:15.763

第一个参数的索引应该是 1 而不是 2，最后一个参数的索引应该是 9 而不是 10。分配 N 个参数时，索引从 1 到 N。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-09T16:31:24.280

使用 psmt.executeUpdate(); 而不是 pstmt.executeUpdate(Sql);

# actionscript-3 - 点击鼠标，调用函数？

> ID：16196673
> 
> 赞同：0
> 
> 时间：2013-04-24T15:54:58.300
> 
> 标签：actionscript-3, flash

我在弄清楚如何让我的动画工作时遇到一些困难，以便在单击对象（电影剪辑）时调用一个函数，并且该函数会从屏幕上删除该对象并显示爆炸。代码如下（来自我的 EnemyShip.as 文件）：

```
package
{
import flash.display.MovieClip;
import flash.events.Event;
import flash.utils.Timer;
import flash.events.MouseEvent;

public class EnemyShipMed extends MovieClip
{
    var speed:Number;

    function EnemyShipMed()
    {
        this.x = 800;
        this.y = Math.random() * 275 + 75;
        speed = Math.random()*5 + 6;
        addEventListener("enterFrame", enterFrame);
        addEventListener(MouseEvent.MOUSE_DOWN, mouseShoot);
    }

        function enterFrame(e:Event)
        {
            this.x -= speed;
            if(this.x < -100)
            {
                removeEventListener("enterFrame", enterFrame);
                stage.removeChild(this);
            }
        }

        function kill()
        {
            var explosion = new Explosion();
            stage.addChild(explosion);
            explosion.x = this.x;
            explosion.y = this.y;
            removeEventListener("enterFrame", enterFrame);
            stage.removeChild(this);
        }

        function mouseShoot(event:MouseEvent)
        {
            kill();
        }
    }
} 
```

我已将鼠标指针替换为十字准线（电影剪辑称为 crosshair_mc）。这是我的 Main.as 文件中的内容：

```
package  {
import flash.display.MovieClip;
import flash.events.Event;
import flash.events.MouseEvent;
import flash.utils.Timer;
import flash.ui.Mouse;
import flash.media.Sound;
import flash.media.SoundChannel;

public class Main extends MovieClip {

public var crosshair:crosshair_mc;
var enemyShipTimer:Timer;
var enemyShipTimerMed:Timer;
var enemyShipTimerSmall:Timer;

public function Main()
{
    enemyShipTimer = new Timer(2000);
    enemyShipTimer.addEventListener("timer", sendEnemy);
    enemyShipTimer.start();

    enemyShipTimerMed = new Timer(2500);
    enemyShipTimerMed.addEventListener("timer", sendEnemyMed);
    enemyShipTimerMed.start();

    enemyShipTimerSmall = new Timer(2750);
    enemyShipTimerSmall.addEventListener("timer", sendEnemySmall);
    enemyShipTimerSmall.start();

    //This creates a new instance of the cursor movie clip and adds it onto
    //the stage using the addChild method.
    crosshair = new crosshair_mc();
    addChild(crosshair);

    //Hides the default cursor on the stage so it will not be shown.
    Mouse.hide();

    //Adds an event listener onto the stage with the enter frame event which
    //repeatedly executes the moveCursor function.
    stage.addEventListener(Event.ENTER_FRAME, moveCursor);
}

function sendEnemy(e:Event)
{
    var enemy = new EnemyShip();
    stage.addChild(enemy);
    stage.addChild(crosshair);//brings crosshair to topmost level on stage
}

function sendEnemyMed(e:Event)
{
    var enemymed = new EnemyShipMed();
    stage.addChild(enemymed);
    stage.addChild(crosshair);//brings crosshair to topmost level on stage
}

function sendEnemySmall(e:Event)
{
    var enemysmall = new EnemyShipSmall();
    stage.addChild(enemysmall);
    stage.addChild(crosshair);//brings crosshair to topmost level on stage
}
//This function set the x & y positions of the custom cursor to the x & y positions
//of the default cursor.
function moveCursor(event:Event) 
{
  crosshair.x=mouseX;
  crosshair.y=mouseY;
     }
   }
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T16:28:32.417

我的猜测是你的十字准线会捕捉到所有的点击事件，因为它总是在鼠标下方。放

```
 crosshair_mc.mouseEnabled = crosshair_mc.mouseChildren = false; 
```

使其对鼠标事件“透明”。

# c# - SqlDateTime 溢出。必须在 1753 年 1 月 1 日上午 12:00:00 到 9999 年 12 月 31 日晚上 11:59:59 之间

> ID：16196674
> 
> 赞同：1
> 
> 时间：2013-04-24T15:54:58.403
> 
> 标签：c#

我似乎无法在像这样的其他问题中找到正确的答案。

我正在使用这段代码来分配应该保存在数据库中的日期。

```
request.BranchRequestDate = DateTime.Now; 
```

当我尝试使用此函数从表中检索数据时。

```
public Request SelectByID()
    {
        try
        {
            SqlCommand command = this.GetParametizedCommand("SELECT * FROM Request WHERE RequestUID = '" + this.RequestUID.ToString() + "' ;");
            command.CommandType = CommandType.Text;
            SqlDataAdapter adapter = new SqlDataAdapter(command);
            DataTable tbl = new DataTable();
            adapter.Fill(tbl); //This is where the exception is thrown
            return ToEntity(tbl);
        }
        catch
        {
            return null;
        }

    } 
```

...它抛出异常。

我已经尝试检查所有内容，但我无法弄清楚它为什么会抛出和异常，因为我看不到检索到的数据在 C# 中的样子，但我已经尝试了 SQL Server 本身中的语句和它返回正确的数据。

任何想法？

编辑：我还将它与同一程序中的类似功能进行了比较，它运行得很好。

编辑：GetParametizedCommand 方法的代码

```
public SqlCommand GetParametizedCommand(String commandText)
    {
        try
        {
            SqlCommand command = base.GetSqlCommand(commandText);
            if(SavingStatus == Util.SavingStatus.INSERT)
                command.Parameters.Add(new SqlParameter("@RequestUID", SqlDbType.Int,32, ParameterDirection.Output, false, 38, 38, "RequestUID", DataRowVersion.Default, this.RequestUID));
            else if (SavingStatus == Util.SavingStatus.UPDATE || SavingStatus == Util.SavingStatus.DELETE)
                command.Parameters.Add(new SqlParameter("@RequestUID", SqlDbType.Int,32, ParameterDirection.Input, false, 38, 38, "RequestUID", DataRowVersion.Default, this.RequestUID));
            command.Parameters.AddWithValue("@DisplayID", this.DisplayID);
            command.Parameters.AddWithValue("@BranchUID", this.BranchUID);
            command.Parameters.AddWithValue("@EmployeeUID", this.EmployeeUID);
            command.Parameters.AddWithValue("@BranchRequestDate", this.BranchRequestDate);
            command.Parameters.AddWithValue("@IsDeleted", this.IsDeleted);
            return command;
        }
        catch
        {
            return null;
        }

    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-24T16:10:50.420

The exception might be happening because `this.BranchRequestDate` hasn't been initialized when you call `GetParametizedCommand` with the SELECT statement.

Because `this.BranchRequestDate` hasn't been initialized, it equals `DateTime.MinValue`, which isn't a valid SQL datetime value.

You could add an explicit check for `DateTime.MinValue` and avoid adding the parameter in that situation:

```
if (this.BranchRequestDate != DateTime.MinValue)
    command.Parameters.AddWithValue("@BranchRequestDate", this.BranchRequestDate); 
```

Or you might create a `GetCommand` method that doesn't add any parameters at all for a SELECT statement.

# javascript - Spotify 预览 API 搜索曲目和专辑

> ID：16196678
> 
> 赞同：0
> 
> 时间：2013-04-24T15:55:13.460
> 
> 标签：javascript, spotify

我目前正在尝试将 Spotify 应用程序迁移到新的 1.0 版本的 api。

我在搜索时遇到问题。我想用搜索字符串搜索目录，并从搜索结果中获取所有曲目信息、艺术家姓名和专辑名称。但是，搜索结果中似乎不包含专辑名称（仅 URI:s）。

之后我是否必须异步加载所有生成曲目的所有专辑名称？如果可能的话，我想避免这种情况。

我正在这样搜索

```
var search = Search.search(searchString);
search.tracks.snapshot().done(function(snapshot) {
    var results = snapshot.toArray();
    // no album names in the results tracks
}).fail(function() {
    console.error('Error retrieving snapshot');
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T13:25:13.287

在 API 1.0 中，某些数据不会自动检索。这意味着，理想情况下，您将只获取您需要的数据，从而减少数据流量并提高性能。缺点是您需要自己编写曲目数组和专辑名称，以异步方式获取数据。

对于您要获取其专辑名称的每首曲目。你会这样做：

```
var maxTracks = 15;
var search = Search.search(searchString);
search.tracks.snapshot(0, maxTracks).done(function(snapshot) {
  snapshot.toArray().forEach(function(result) {
    result.album.load('name').done(function(album) {
      // here you have access to the album.name attribute
    });
  });
}).fail(function() {
  console.error('Error retrieving snapshot');
}); 
```

这种方法的问题在于，您将按照与轨道出现的顺序不同的顺序获取数据。如果您需要保持订单，您可以使用该[`Promise`](https://developer.spotify.com/technologies/apps/docs/preview/api/api-models-promise.html)对象：

```
var maxTracks = 15;
var search = Search.search(searchString);
search.tracks.snapshot(0, maxTracks).done(function(snapshot) {
  var promises = [];
  snapshot.toArray().forEach(function(result) {
    promises.push(result.album.load('name'));
  });
  models.Promise.join(promises)
    .done(function(albums) { console.log('Loaded all albums.', albums); })
    .fail(function(albums) { console.log('Failed to load at least one album.', albums); });
}).fail(function() {
    console.error('Error retrieving snapshot');
}); 
```

使用 s 数组`Promise`将保持与轨道相同的顺序。

# c# - 删除后添加字典

> ID：16196679
> 
> 赞同：0
> 
> 时间：2013-04-24T15:55:14.527
> 
> 标签：c#, dictionary

我的字典有问题。我正在使用这段代码：

```
Dictionary<string, string> testDictionary = new Dictionary<string, string>();

testDictionary.Add("1", "1");
testDictionary.Add("2", "2");
testDictionary.Add("3", "3");

testDictionary.Remove("2");

testDictionary.Add("4", "4"); 
```

我希望在此之后的字典（键和值）是 [1,3,4] 但它​​是 [1,4,3]。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T15:57:42.870

字典本质上是无序的。
你不能那样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T15:57:49.107

字典中键和值的顺序未指定。看：

[http://msdn.microsoft.com/en-us/library/yt2fy5zk.aspx](http://msdn.microsoft.com/en-us/library/yt2fy5zk.aspx)

但是，它们的顺序相同（即 中的第一个条目`Keys`与 中的第一个条目相关联`Values`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T16:07:37.627

字典不一定是*无序*的（它们的顺序是*一致*的，毕竟，如果是任意的），但它不是你可以改变的。

这样做的原因是字典是一个哈希映射，它将其键哈希到内存地址或哈希表中的位置，具体取决于您的实现。这就是为什么字典查找如此之快，以及为什么你只能拥有唯一的字典键的原因。

请参阅[http://en.wikipedia.org/wiki/Hash_table](http://en.wikipedia.org/wiki/Hash_table)了解更多信息！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-09-10T05:20:57.323

```
Dictionary<string, string> testDictionary = new Dictionary<string, string>();

testDictionary.Add("1", "1");
testDictionary.Add("2", "2");
testDictionary.Add("3", "3");

testDictionary.Remove("2");

Dictionary<string, string> tempDictionary = new Dictionary<string, string>();

foreach (string key  in tempDictionary.Keys )
{
    tempDictionary.Add(key, tempDictionary[key]);
}

testDictionary = tempDictionary;

testDictionary.Add("4", "4"); 
```

# .net - 是否可以在 app.config 键值中包含超链接？

> ID：16196680
> 
> 赞同：2
> 
> 时间：2013-04-24T15:55:14.553
> 
> 标签：.net, web-config, app-config, key-value

是否可以在 app.config 键值对中包含超链接作为文本的一部分（电子邮件正文作为值）？我想从 app.config 键值生成电子邮件正文。

**例如：**

```
<add key="EmailBody" value="Email body goes here with <a href="some link">click here</a> hyperlink/> 
```

我知道这是无效的，但有没有办法做到这一点？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T19:43:47.723

我会这样做的方式是编写您的电子邮件正文，如图所示，但实际上不添加等。相反，请执行以下操作：

```
<add key="EmailBody" value="Email body goes here with &&&www.google.com!!!click here£££> 
```

然后，在访问/处理此密钥的代码端，将 &&& 替换为：

```
<a href=" 
```

代替 ！！！和 ：

```
"> 
```

将£££替换为：

```
</a> 
```

这只是一个示例，但让您了解如何绕过属性中不能有标签的事实。

希望这可以帮助。

# html - twitter bootstrap缩略图方向切换与视口

> ID：16196687
> 
> 赞同：0
> 
> 时间：2013-04-24T15:55:29.497
> 
> 标签：html, css, twitter-bootstrap

我正在使用 twitter bootstrap 并在页面底部有 3 个缩略图，但是随着视口缩小到 768px 以下，它们从水平排列变为垂直排列。我怎样才能阻止这个？

这是我正在使用的 HTML。

```
<div class="container">
<div class="row-fluid">
    <ul class="thumbnails noMargin offset5 bottomPage">
        <li>
            <a href="#" class="thumbnail"><img src="http://placehold.it/45x45"></a>
        </li>
        <li>
            <a href="#" class="thumbnail"><img src="http://placehold.it/45x45"></a>
        </li>
        <li>
            <a href="#" class="thumbnail"><img src="http://placehold.it/45x45"></a>
        </li>
</ul>
</div>
</div> 
```

这是我添加的自定义 CSS

```
 <style>
.noMargin > li {
    margin-bottom: 0;
    margin-left: 0;
}
body { 
    padding-top: 65px; 
}
.bottomPage{
    position: fixed;
    bottom: 5px;
}
    </style> 
```

显示问题的 js bin。 [http://jsbin.com/opezov/1/edit](http://jsbin.com/opezov/1/edit)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T16:05:49.493

bootstrap-responsive.css 第 835 行 float:none; 制造问题

```
.thumbnails > li {
    float: none;
    margin-left: 0;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T16:02:08.387

移除

```
<link href="http://twitter.github.io/bootstrap/assets/css/bootstrap-responsive.css" rel="stylesheet" type="text/css" /> 
```

如果您的页面不需要响应，请解决此问题。

否则请参阅 Bootstap 文档以防止发生响应行为（不确定是否可能）。

# ruby-on-rails - Rails 4 Carrierwave + RMagick，将PDF转换为PNG更改文件编码但不更改扩展名？

> ID：16196692
> 
> 赞同：5
> 
> 时间：2013-04-24T15:55:37.093
> 
> 标签：ruby-on-rails, pdf, carrierwave, rmagick

`<%= image_tag "path/to/image" %>`我可以上传 PDF 并将其转换为 PNG 格式，并通过帮助程序在浏览器中正确呈现。但是，实际的文件扩展名并未从 PDF 更改为 PNG。因此，如果您下载图像，它会下载为 image.pdf。下载后，如果您将扩展名手动更改为“png”，它会在本地计算机上正确打开图像软件。我希望 RMagick 进程自动更改扩展名和文件格式。我可以编写一些代码来删除 PDF 并在保存文件时添加 PNG 扩展名，但似乎我在这里遗漏了一些东西。我认为这是在我转换为不同格式时应该自动完成的事情。这是我的`ImageUploader.rb`课。我正在使用 Carrierwave 和 RMagick。

```
# app/uploads/image_uploader.rb
class ImageUploader < CarrierWave::Uploader::Base
  include CarrierWave::RMagick
  include Sprockets::Rails::Helper

  storage :file

  def store_dir
    "uploads/#{model.class.to_s.underscore}/#{mounted_as}/#{model.id}"
  end

  process :convert_to_png

  def convert_to_png
    manipulate!(format: "png", read: { density: 400 }) do |img, index, options|
      options = { quality: 100 }
      img.resize_to_fill!(850, 1100)
      img
    end
  end

 # Add 'png' file extension so file becomes 'image.pdf.png'
 def filename
    "#{original_filename}.png" if original_filename
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-11T20:19:39.797

这就是我的处理方式：

```
version :pdf_thumb, :if => :pdf? do
  process :thumbnail_pdf
  process :set_content_type_png

  def full_filename (for_file = model.artifact.file)
    super.chomp(File.extname(super)) + '.png'
  end
end

def thumbnail_pdf
  manipulate! do |img|
    img.format("png", 1)
    img.resize("150x150")
    img = yield(img) if block_given?
    img
  end
end

def set_content_type_png(*args)
  self.file.instance_variable_set(:@content_type, "image/png")
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-12T08:19:46.283

这是一个已知问题：[https ://github.com/carrierwaveuploader/carrierwave/issues/368#issuecomment-3597643](https://github.com/carrierwaveuploader/carrierwave/issues/368#issuecomment-3597643)

所以不，你没有错过任何东西:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-18T07:42:11.567

我也在尝试为上传的 pdf 创建一个缩略图，到目前为止它适用于单页 pdf。对于多页 pdf，该方法会根据需要创建缩略图，但在打开文件时，会显示“**读取 PNG 图像文件的致命错误：不是 PNG 文件**”。

这就是我的做法：

```
 version :pdf_thumb, :if => :pdf? do
     process :convert => 'png'
     process :resize_to_limit => [120, 120]
     def full_filename (for_file = model.artifact.file)
        super.chomp(File.extname(super)) + '.png'
     end
  end
protected

  def pdf?(new_file)
    new_file.content_type.include? "/pdf"
  end 
```

所以，我想知道你是如何从 pdf 创建缩略图的？

# c# - 无法从 App.config 读取密钥

> ID：16196695
> 
> 赞同：4
> 
> 时间：2013-04-24T15:55:39.820
> 
> 标签：c#, visual-studio-2012, app-config

我想从我的项目的 App.config 文件中读取一些值，但是当我这样做时：

```
var appsettings = System.Configuration.ConfigurationManager.AppSettings; 
```

我只得到四个条目：`StopTestRunCallTimeoutInSeconds`、和`LogSizeLimitInMegs`，它们甚至没有在 XML 中列出。我的钥匙甚至没有出现。`CreateTraceListener``GetCollectorDataTimeout``username``password`

我的 App.Config 看起来像这样：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <startup>
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.5" />
  </startup>
  <appSettings>
    <add key="username" value="Administrator" />
    <add key="password" value="password" />
  </appSettings>
  <system.web>
    <membership defaultProvider="ClientAuthenticationMembershipProvider">
      <providers>
        <add name="ClientAuthenticationMembershipProvider" type="System.Web.ClientServices.Providers.ClientFormsAuthenticationMembershipProvider, System.Web.Extensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" serviceUri="" />
      </providers>
    </membership>
    <roleManager defaultProvider="ClientRoleProvider" enabled="true">
      <providers>
        <add name="ClientRoleProvider" type="System.Web.ClientServices.Providers.ClientRoleProvider, System.Web.Extensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" serviceUri="" cacheTimeout="86400" />
      </providers>
    </roleManager>
  </system.web>
</configuration> 
```

我错过了什么吗？在我看来，我正在从一个完全不同的配置文件中读取，但没有其他配置文件。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-25T08:39:46.420

我找到了解决方案！问题是，我调试了一个单元测试，它位于同一解决方案中的不同子项目中。我将 app.config 文件复制到与单元测试相同的项目中，现在它工作正常。感谢您的帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-24T16:01:37.353

您可以通过按名称拉取应用程序设置来读取它们

```
var username = ConfigurationManager.AppSettings["username"]
var password = ConfigurationManager.AppSettings["password"] 
```

AppSettings 的基础数据类型是 NameValueCollection。因此，您根据键提取值。

这是 AppSettings 的文档，其中显示了一个示例 [http://msdn.microsoft.com/en-us/library/system.configuration.configurationmanager.appsettings.aspx](http://msdn.microsoft.com/en-us/library/system.configuration.configurationmanager.appsettings.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-24T16:04:35.000

听起来您正在阅读 QTAgentService.exe.config 而不是 app.config。

[http://msdn.microsoft.com/en-us/library/ff934570.aspx](http://msdn.microsoft.com/en-us/library/ff934570.aspx)

# java - 如何在 JavaConfig 中设置 jsp-config

> ID：16196696
> 
> 赞同：4
> 
> 时间：2013-04-24T15:55:40.930
> 
> 标签：java, spring-mvc, servlets, web.xml

在 web.xml 中

```
<jsp-config>
    <jsp-property-group>
        <description> </description>
        <display-name>JSPConfiguration</display-name>
        <url-pattern>*.jsp</url-pattern>
        <page-encoding>EUC-KR</page-encoding>  
    </jsp-property-group>
</jsp-config> 
```

在 Java 配置中

```
public class WebInitializer implements WebApplicationInitializer {

    public void onStartup(ServletContext servletContext)
            throws ServletException {
        //  ??
        }
} 
```

如何在 JavaConfig 中设置 jsp-config？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-21T15:56:17.553

> 您可以通过以下方式访问它
> 
> ```
> servletContext.getJspConfigDescriptor().getJspPropertyGroups(); 
> ```
> 
> 返回`Collection<JspPropertyGroupDescriptor>`具有 `add(JspPropertyGroupDescriptor)`方法的 a。`JspPropertyGroupDescriptor`是您必须实现的接口。您最好使用部分`web.xml`和部分 java 配置。
> 
> [Sotirios Delimanolis 4 月 24 日 16:07](https://stackoverflow.com/questions/16196696/how-to-setup-jsp-config-at-javaconfig#comment23157800_16196696)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-21T08:18:09.320

这段代码应该可以工作：

```
 JspConfigDescriptor j = new JspConfigDescriptor()
    {

        @Override
        public Collection<TaglibDescriptor> getTaglibs()
        {
            // TODO Auto-generated method stub
            return null;
        }

        @Override
        public Collection<JspPropertyGroupDescriptor> getJspPropertyGroups()
        {
            Collection<JspPropertyGroupDescriptor> c = new ArrayList<JspPropertyGroupDescriptor>();
            JspPropertyGroupDescriptorImpl pgDescriptor = new JspPropertyGroupDescriptorImpl();
            pgDescriptor.setIsXml(Boolean.TRUE.toString());
            pgDescriptor.getUrlPattern().add("/js/generated/*");
            pgDescriptor.setElIgnored(Boolean.FALSE.toString());
            pgDescriptor.setPageEncoding("UTF-8");
            c.add(pgDescriptor);
            return null;
        }
    };
    servletContext.setJspConfigDescriptor(j); 
```

但最后一条语句将在 Tomcat 8 之后可用

# c++ - 只有非空向量的 C++ 向量下标超出范围

> ID：16196697
> 
> 赞同：1
> 
> 时间：2013-04-24T15:55:42.000
> 
> 标签：c++

在下面提到的代码的“插入”函数中，我得到的错误向量下标超出范围“：

```
// this acts as the vertex of graph
typedef struct node
{
    string name;    // stores the unique name of the vertex
    int value;      // stores the integer data saved in the vertex
} node;

class graph
{
private:
    // 2D vector to store the adjencey list of the graph
    vector< vector<node> > adjList;

public:
    graph()
    {
        adjList.resize(0);
    }

    // function to insert a vertex in graph.
    //  'nName' : unique name of vertex;
    //  'nValue': int data stored in vertex;
    //  'neighbours': string vector containing names of all neighbours
    void insert(string nName, int nValue, vector<string> neighbours)
    {
        int i= adjList.size();
        adjList.resize(i + 1);
        adjList[i].resize( neighbours.size() + 1);

        adjList[i][0].name = nName;
        adjList[i][0].value = nValue;

        string temp;
        for(int nTrav=0, lTrav=1, size=neighbours.size(); nTrav<size; ++nTrav, ++lTrav)
        {
            temp=neighbours[nTrav];

            int j=0;
            for(; j<adjList.size() || adjList[j][0].name != temp; ++j);

            if(j==adjList.size())
            {
                cout << "\nName not present. Element not inserted";
                return;
            }

            adjList[i][lTrav].name = adjList[j][0].name;
            adjList[i][lTrav].value = adjList[j][0].value;

        }
    }
}; 
```

当传递的字符串向量'neighbour'为空时，代码可以正常工作，但是当向量有一些元素时，它会给出指定的错误。

操作系统：Windows 8 IDE：Visual Studio 2013

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T16:08:13.150

除了 Joachim 的评论之外`vector.push_back(...)`，您应该将第二个循环更改为：

```
for(; j<adjList.size() && adjList[j][0].name != temp; ++j) 
```

将 OR 替换为 AND。在评估其内容之前，您必须确保`j<adjList.size()`满足条件。否则，由于惰性评估，您实际上只会`adjList[j][0].name != temp`在`j<adjList.size()`返回 false 时进行评估。这是，当你已经超出界限时。

# php - Paypal IPN /按钮的POST中的额外变量？

> ID：16196703
> 
> 赞同：1
> 
> 时间：2013-04-24T15:55:51.850
> 
> 标签：php, paypal

我遇到过无数的教程，但都在某些方面有所不同，所以我不确定我应该遵循哪条路线。

我有一个需要集成付款的旧网站：目前，用户将填写表格并单击提交 - 这将发布到另一个页面，该页面处理数据库的更新并通过电子邮件向用户发送所有内容都是有效的。

但是，我必须更改它，以便当用户填写表格并单击提交时，他们必须通过贝宝支付 - 支付的金额是 base_price * 填写的用户字段数量（即 count(array_filter($ _POST["用户"]));)。

目前，当用户提交表单时，我进行验证然后发布到“payment.php”页面。这只是一个显示来自 _POST 的值的页面，显示用户详细信息以及它将花费多少。然后我有一个用于“立即购买”的简单非托管 Paypal 按钮（我认为托管版本也可以正常工作，如果我只是在表单中添加数量，但我想我会尝试非托管、不安全的版本暂时）。

单击该按钮会将用户带到 Paypal，他们可以在其中填写详细信息。

我不明白的是 IPN 以及如何集成它。原始表单 POST 大约 10 个输入值，我可以在我的 POST 中将它们添加到 Paypal，以便在付款后，数据库将使用这些值进行更新？或者我是否需要在发布到 Paypal 之前更新数据库，然后只需添加一个“已验证”列，一旦用户付款，我就会更新该列？

我已将“rm”值 =“2”设置为使用 POST。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T17:20:30.773

IPN 是一个幕后功能。交易完成后，PayPal 会将交易详细信息的 POST 发送回您的 IPN 脚本。您读取了这些值并将 POST 返回到 PayPal 以验证它来自 PayPal。然后 PayPal 确认它是否有效。然后根据该响应，您可以对发布到脚本的交易详细信息执行任何您需要的操作。下面的示例是 IPN 脚本的 PHP 示例。

```
<?php

// Revision Notes
// 11/04/11 - changed post back url from https://www.paypal.com/cgi-bin/webscr to https://ipnpb.paypal.com/cgi-bin/webscr
// For more info see below:
// https://www.x.com/content/bulletin-ip-address-expansion-paypal-services
// "ACTION REQUIRED: if you are using IPN (Instant Payment Notification) for Order Management and your IPN listener script is behind a firewall that uses ACL (Access Control List) rules which restrict outbound traffic to a limited number of IP addresses, then you may need to do one of the following: 
// To continue posting back to https://www.paypal.com  to perform IPN validation you will need to update your firewall ACL to allow outbound access to *any* IP address for the servers that host your IPN script
// OR Alternatively, you will need to modify  your IPN script to post back IPNs to the newly created URL https://ipnpb.paypal.com using HTTPS (port 443) and update firewall ACL rules to allow outbound access to the ipnpb.paypal.com IP ranges (see end of message)."

/////////////////////////////////////////////////
/////////////Begin Script below./////////////////
/////////////////////////////////////////////////

// read the post from PayPal system and add 'cmd'
$req = 'cmd=_notify-validate';
foreach ($_POST as $key => $value) {
$value = urlencode(stripslashes($value));
$req .= "&$key=$value";
}
// post back to PayPal system to validate
$header = "POST /cgi-bin/webscr HTTP/1.1\r\n";
$header .= "Content-Type: application/x-www-form-urlencoded\r\n";
$header .= "Content-Length: " . strlen($req) . "\r\n\r\n";

// If testing on Sandbox use:
//$fp = fsockopen ('ssl://www.sandbox.paypal.com', 443, $errno, $errstr, 30);

$fp = fsockopen ('ssl://ipnpb.paypal.com', 443, $errno, $errstr, 30);

// assign posted variables to local variables
$item_name = $_POST['item_name'];
$business = $_POST['business'];
$item_number = $_POST['item_number'];
$payment_status = $_POST['payment_status'];
$mc_gross = $_POST['mc_gross'];
$payment_currency = $_POST['mc_currency'];
$txn_id = $_POST['txn_id'];
$receiver_email = $_POST['receiver_email'];
$receiver_id = $_POST['receiver_id'];
$quantity = $_POST['quantity'];
$num_cart_items = $_POST['num_cart_items'];
$payment_date = $_POST['payment_date'];
$first_name = $_POST['first_name'];
$last_name = $_POST['last_name'];
$payment_type = $_POST['payment_type'];
$payment_status = $_POST['payment_status'];
$payment_gross = $_POST['payment_gross'];
$payment_fee = $_POST['payment_fee'];
$settle_amount = $_POST['settle_amount'];
$memo = $_POST['memo'];
$payer_email = $_POST['payer_email'];
$txn_type = $_POST['txn_type'];
$payer_status = $_POST['payer_status'];
$address_street = $_POST['address_street'];
$address_city = $_POST['address_city'];
$address_state = $_POST['address_state'];
$address_zip = $_POST['address_zip'];
$address_country = $_POST['address_country'];
$address_status = $_POST['address_status'];
$item_number = $_POST['item_number'];
$tax = $_POST['tax'];
$option_name1 = $_POST['option_name1'];
$option_selection1 = $_POST['option_selection1'];
$option_name2 = $_POST['option_name2'];
$option_selection2 = $_POST['option_selection2'];
$for_auction = $_POST['for_auction'];
$invoice = $_POST['invoice'];
$custom = $_POST['custom'];
$notify_version = $_POST['notify_version'];
$verify_sign = $_POST['verify_sign'];
$payer_business_name = $_POST['payer_business_name'];
$payer_id =$_POST['payer_id'];
$mc_currency = $_POST['mc_currency'];
$mc_fee = $_POST['mc_fee'];
$exchange_rate = $_POST['exchange_rate'];
$settle_currency  = $_POST['settle_currency'];
$parent_txn_id  = $_POST['parent_txn_id'];
$pending_reason = $_POST['pending_reason'];
$reason_code = $_POST['reason_code'];

// subscription specific vars

$subscr_id = $_POST['subscr_id'];
$subscr_date = $_POST['subscr_date'];
$subscr_effective  = $_POST['subscr_effective'];
$period1 = $_POST['period1'];
$period2 = $_POST['period2'];
$period3 = $_POST['period3'];
$amount1 = $_POST['amount1'];
$amount2 = $_POST['amount2'];
$amount3 = $_POST['amount3'];
$mc_amount1 = $_POST['mc_amount1'];
$mc_amount2 = $_POST['mc_amount2'];
$mc_amount3 = $_POST['mcamount3'];
$recurring = $_POST['recurring'];
$reattempt = $_POST['reattempt'];
$retry_at = $_POST['retry_at'];
$recur_times = $_POST['recur_times'];
$username = $_POST['username'];
$password = $_POST['password'];

//auction specific vars

$for_auction = $_POST['for_auction'];
$auction_closing_date  = $_POST['auction_closing_date'];
$auction_multi_item  = $_POST['auction_multi_item'];
$auction_buyer_id  = $_POST['auction_buyer_id'];

//DB connect creds and email 
$notify_email =  "MyEmail@MySite.com";         //email address to which debug emails are sent to
$DB_Server = "MyServer"; //your MySQL Server
$DB_Username = "MyDBuser"; //your MySQL User Name
$DB_Password = "MyDMpassword"; //your MySQL Password
$DB_DBName = "MyDatabase"; //your MySQL Database Name

if (!$fp) {
// HTTP ERROR
} else {
fputs ($fp, $header . $req);
while (!feof($fp)) {
$res = fgets ($fp, 1024);
if (strcmp ($res, "VERIFIED") == 0) {

//create MySQL connection
$Connect = @mysql_connect($DB_Server, $DB_Username, $DB_Password)
or die("Couldn't connect to MySQL:<br>" . mysql_error() . "<br>" . mysql_errno());

//select database
$Db = @mysql_select_db($DB_DBName, $Connect)
or die("Couldn't select database:<br>" . mysql_error(). "<br>" . mysql_errno());

$fecha = date("m")."/".date("d")."/".date("Y");
$fecha = date("Y").date("m").date("d");

//check if transaction ID has been processed before
$checkquery = "select txnid from paypal_payment_info where txnid='".$txn_id."'";
$sihay = mysql_query($checkquery) or die("Duplicate txn id check query failed:<br>" . mysql_error() . "<br>" . mysql_errno());
$nm = mysql_num_rows($sihay);
if ($nm == 0){

//execute query

    if ($txn_type == "cart"){
    $strQuery = "insert into paypal_payment_info(paymentstatus,buyer_email,firstname,lastname,street,city,state,zipcode,country,mc_gross,mc_fee,memo,paymenttype,paymentdate,txnid,pendingreason,reasoncode,tax,datecreation) values ('".$payment_status."','".$payer_email."','".$first_name."','".$last_name."','".$address_street."','".$address_city."','".$address_state."','".$address_zip."','".$address_country."','".$mc_gross."','".$mc_fee."','".$memo."','".$payment_type."','".$payment_date."','".$txn_id."','".$pending_reason."','".$reason_code."','".$tax."','".$fecha."')";

     $result = mysql_query($strQuery) or die("Cart - paypal_payment_info, Query failed:<br>" . mysql_error() . "<br>" . mysql_errno());
     for ($i = 1; $i <= $num_cart_items; $i++) {
         $itemname = "item_name".$i;
         $itemnumber = "item_number".$i;
         $on0 = "option_name1_".$i;
         $os0 = "option_selection1_".$i;
         $on1 = "option_name2_".$i;
         $os1 = "option_selection2_".$i;
         $quantity = "quantity".$i;

         $struery = "insert into paypal_cart_info(txnid,itemnumber,itemname,os0,on0,os1,on1,quantity,invoice,custom) values ('".$txn_id."','".$_POST[$itemnumber]."','".$_POST[$itemname]."','".$_POST[$on0]."','".$_POST[$os0]."','".$_POST[$on1]."','".$_POST[$os1]."','".$_POST[$quantity]."','".$invoice."','".$custom."')";
         $result = mysql_query($struery) or die("Cart - paypal_cart_info, Query failed:<br>" . mysql_error() . "<br>" . mysql_errno());

     }
    }

    else{
     $strQuery = "insert into paypal_payment_info(paymentstatus,buyer_email,firstname,lastname,street,city,state,zipcode,country,mc_gross,mc_fee,itemnumber,itemname,os0,on0,os1,on1,quantity,memo,paymenttype,paymentdate,txnid,pendingreason,reasoncode,tax,datecreation) values ('".$payment_status."','".$payer_email."','".$first_name."','".$last_name."','".$address_street."','".$address_city."','".$address_state."','".$address_zip."','".$address_country."','".$mc_gross."','".$mc_fee."','".$item_number."','".$item_name."','".$option_name1."','".$option_selection1."','".$option_name2."','".$option_selection2."','".$quantity."','".$memo."','".$payment_type."','".$payment_date."','".$txn_id."','".$pending_reason."','".$reason_code."','".$tax."','".$fecha."')";
     $result = mysql_query("insert into paypal_payment_info(paymentstatus,buyer_email,firstname,lastname,street,city,state,zipcode,country,mc_gross,mc_fee,itemnumber,itemname,os0,on0,os1,on1,quantity,memo,paymenttype,paymentdate,txnid,pendingreason,reasoncode,tax,datecreation) values ('".$payment_status."','".$payer_email."','".$first_name."','".$last_name."','".$address_street."','".$address_city."','".$address_state."','".$address_zip."','".$address_country."','".$mc_gross."','".$mc_fee."','".$item_number."','".$item_name."','".$option_name1."','".$option_selection1."','".$option_name2."','".$option_selection2."','".$quantity."','".$memo."','".$payment_type."','".$payment_date."','".$txn_id."','".$pending_reason."','".$reason_code."','".$tax."','".$fecha."')") or die("Default - paypal_payment_info, Query failed:<br>" . mysql_error() . "<br>" . mysql_errno());
    }

    // send an email in any case
 echo "Verified";
     mail($notify_email, "VERIFIED IPN", "$res\n $req\n $strQuery\n $struery\n  $strQuery2");
}
else {
// send an email
mail($notify_email, "VERIFIED DUPLICATED TRANSACTION", "$res\n $req \n $strQuery\n $struery\n  $strQuery2");
}

    //subscription handling branch
    if ( $txn_type == "subscr_signup"  ||  $txn_type == "subscr_payment"  ) {

      // insert subscriber payment info into paypal_payment_info table
      $strQuery = "insert into paypal_payment_info(paymentstatus,buyer_email,firstname,lastname,street,city,state,zipcode,country,mc_gross,mc_fee,memo,paymenttype,paymentdate,txnid,pendingreason,reasoncode,tax,datecreation) values ('".$payment_status."','".$payer_email."','".$first_name."','".$last_name."','".$address_street."','".$address_city."','".$address_state."','".$address_zip."','".$address_country."','".$mc_gross."','".$mc_fee."','".$memo."','".$payment_type."','".$payment_date."','".$txn_id."','".$pending_reason."','".$reason_code."','".$tax."','".$fecha."')";
      $result = mysql_query($strQuery) or die("Subscription - paypal_payment_info, Query failed:<br>" . mysql_error() . "<br>" . mysql_errno());

         // insert subscriber info into paypal_subscription_info table
        $strQuery2 = "insert into paypal_subscription_info(subscr_id , sub_event, subscr_date ,subscr_effective,period1,period2, period3, amount1 ,amount2 ,amount3,  mc_amount1,  mc_amount2,  mc_amount3, recurring, reattempt,retry_at, recur_times, username ,password, payment_txn_id, subscriber_emailaddress, datecreation) values ('".$subscr_id."', '".$txn_type."','".$subscr_date."','".$subscr_effective."','".$period1."','".$period2."','".$period3."','".$amount1."','".$amount2."','".$amount3."','".$mc_amount1."','".$mc_amount2."','".$mc_amount3."','".$recurring."','".$reattempt."','".$retry_at."','".$recur_times."','".$username."','".$password."', '".$txn_id."','".$payer_email."','".$fecha."')";
        $result = mysql_query($strQuery2) or die("Subscription - paypal_subscription_info, Query failed:<br>" . mysql_error() . "<br>" . mysql_errno());

             mail($notify_email, "VERIFIED IPN", "$res\n $req\n $strQuery\n $struery\n  $strQuery2");

    }
}

// if the IPN POST was 'INVALID'...do this

else if (strcmp ($res, "INVALID") == 0) {
// log for manual investigation

mail($notify_email, "INVALID IPN", "$res\n $req");
}
}
fclose ($fp);
} 
```

?>

# c# - Wrapper 集合的 IXmlSerializable 命名空间

> ID：16196707
> 
> 赞同：0
> 
> 时间：2013-04-24T15:56:04.527
> 
> 标签：c#, xml, xml-serialization, datacontractserializer

我正在`DataContractSerializer`通过使用`IXmlSerializable`接口进行一些自定义序列化。

例如：

```
public class CustomPartOfAContract : IXmlSerializable
{
    public void WriteXml( XmlWriter writer )
    {
        //...
    }

    public void ReadXml( XmlReader reader )
    {
        //...
    }
}

[DataContract(Namespace="http://mynamespace.com")]
public class MyDataContract
{
    [DataMember(IsRequired=true)]
    public ICollection<CustomPartOfAContract> CustomParts { get; set; }

} 
```

现在，在该`WriteXml`方法中，我可以告诉`XmlWriter`我编写的每个元素使用什么命名空间。但是我不知道如何为`CustomPartOfAContract`.

将 XML 输出到文件中，`CustomParts`属性的命名空间`MyDataContract`是从源代码命名空间生成的。

任何人都知道如何在序列化时指定要使用的命名空间吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T08:36:14.443

好的，我通过添加一个自定义集合类来解决这个问题，该类继承自`Collection`并应用`[CollectionDataContract]`具有正确命名空间的属性：

```
[CollectionDataContract( Namespace="http://mynamespace.com" )]
public class MyCustomPartsCollection : Collection<CustomPartOfAContract>
{
    public MyCustomPartsCollection()
    {
        // We need a default constructor or the serializer complains.
    }
} 
```

然后在我的数据合同中使用它：

```
[DataContract(Namespace="http://mynamespace.com")]
public class MyDataContract
{
    [DataMember(IsRequired=true)]
    public MyCustomPartsCollection CustomParts { get; set; }

} 
```

这似乎将正确的命名空间应用于集合类，而不是从源代码中获取命名空间。

# php - 在 PHP/MySQL 中使用 Week(Date) 时，如何将一周的第一天设置为星期一？

> ID：16196708
> 
> 赞同：2
> 
> 时间：2013-04-24T15:56:06.737
> 
> 标签：php, mysql, date, week-number

我正在使用以下代码构建一个 Google 图表，以提取 MySQL 表中与一年中的周数相对应的所有条目。目前，周数从星期日开始，我想将其更改为从星期一开始，但我不知道该怎么做。

```
$i=1;
    while($i<=53)
       {
        $week_start = new DateTime();
        $week_start->setISODate(2013,$i+1);
        $date_display = $week_start->format('j M Y');

        $sessions = $wpdb->get_var($wpdb->prepare("SELECT Sum(Due) from patient_sessions WHERE Type='Session' AND Week(Date)='$i'"));

        $temp = array();

        $temp[] = array('v' => (string) $date_display); 
        $temp[] = array('v' => (string) $sessions); 
        $rows[] = array('c' => $temp);
        $i++;
    } 
```

**修订代码**

```
$sessions = $wpdb->get_results($wpdb->prepare("SELECT Due,Date from patient_sessions WHERE Type='Session'"));
$work_times = $wpdb->get_results($wpdb->prepare("SELECT Amount,Date from work_times"));
$expenses = $wpdb->get_results($wpdb->prepare("SELECT Amount,Date from expenses WHERE Client='Psychotherapy'"));

$i=1;
while($i<=53) {
    $week_start = new DateTime();
    $week_start->setISODate(2013,$i+1);
    $date_display = $week_start->format('j M Y');

    $session_total = 0;
    $work_time_total = 0;
    $expense_total = 0;

      foreach ($sessions as $session) {
    if (date("W", strtotime($session->Date)) == $i) {
    $session_total = ($session_total+$session->Due);
    }
    }

         foreach ($work_times as $work_time) {
    if (date("W", strtotime($work_time->Date)) == $i) {
    $work_time_total = ($work_time_total+$work_time->Amount);
    }
    }

          foreach ($expenses as $expense) {
    if (date("W", strtotime($expense->Date)) == $i) {
    $expense_total = ($expense_total+$expense->Amount);
    }
          }

    $balance = ($session_total + $work_time_total - $expense_total);

    $temp = array();

    $temp[] = array('v' => (string) $date_display); 
    $temp[] = array('v' => (string) $balance); 
    $rows[] = array('c' => $temp);
    $i++;
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-24T16:07:43.030

```
WEEK(date[mode]); 

date = a date value.    
mode = An integer indicating the starting of the week. 
```

默认参数是 0，即星期日，将其设置为 1 将是星期一，2 星期二，依此类推。

```
week(date,1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T16:20:20.490

为了让它在您的代码中工作，您应该能够将查询更改为：

```
"SELECT Sum(Due) FROM patient_sessions WHERE Type='Session' AND Week(Date,1)=$i" 
```

但是，我想我可以更进一步，使用 GROUP BY 进行一次 sql 调用，然后遍历结果；

```
"SELECT Week(Date,1), SUM(DUE) FROM patient_sessions WHERE Type='Session' GROUP BY Week(Date,1)" 
```

或者，您可能需要使用 WEEK(Date,2) ，具体取决于您希望如何处理跨年的周。

# python - python等待shell命令完成

> ID：16196712
> 
> 赞同：5
> 
> 时间：2013-04-24T15:56:18.410
> 
> 标签：python, shell, subprocess, wait

我正在运行脚本来解压缩一些文件，然后删除 rar 文件。我通过shell运行命令来做到这一点。我已经尝试了几种不同的方法让脚本等到它完成解压缩文件，但它仍然继续并在文件完成使用之前删除文件。

我已经尝试了下面的代码，这是不行的。我试图看看我是否可以让 wait() 工作，但也没有运气。

有任何想法吗？运行 python 2.7

编辑：我希望脚本运行命令:)

```
 p = subprocess.Popen('unrar e ' + root + '/' + i + ' ' + testfolder,
                                 bufsize=2048, shell=True,
                                 stdin=subprocess.PIPE)
            p.stdin.write('e')
            p.communicate()

for root, dirs, files in os.walk(testfolder):
    for i in files:

        print 'Deleting rar files'
        os.remove(i)

for i in os.listdir(testfolder):
    if os.path.isdir(testfolder + i):
        shutil.rmtree(testfolder + i) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T16:13:43.603

这是邪恶的：

```
p = subprocess.Popen('unrar e ' + root + '/' + i + ' ' + testfolder,
        bufsize=2048, shell=True, stdin=subprocess.PIPE) 
```

反而，

```
p = subprocess.Popen(['unrar', 'e', '%s/%s' % (root, i), testfolder],
        bufsize=2048, stdin=subprocess.PIPE)
p.stdin.write('e')
p.wait()
if p.returncode == 0:
    pass # put code that must only run if successful here. 
```

通过将一个精确的数组而不是一个字符串传递给`Popen`并且不使用`shell=True`，一个带有空格的文件名不能被解释为一个以上的参数，或者一个子shell命令，或者其他一些潜在的恶意东西（想想一个文件`$(rm -rf ..)`以其名义）。

然后，在调用之后`p.wait()`（`p.communicate()`没有捕获stderr或stdout时不需要），您必须检查以确定该过程是否成功，并且只有在（表示成功）`p.returncode`时才继续删除文件。`p.returncode == 0`

您的初始诊断（即`p.communicate()`在`unrar`进程仍在运行时返回）是不可行的；`p.communicate()`不要那样`p.wait()`工作。

* * *

如果跨越`ssh`，这会发生一些变化：

```
import pipes # in Python 2.x; in 3.x, use shlex.quote() instead
p = subprocess.Popen(['ssh', ' '.join(
      [pipes.quote(s) for s in ['unrar', 'e', '%s/%s' % (root, i), testfolder]]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T16:07:05.827

你的问题是在等待子进程，还是按顺序做事（意味着解包，然后删除）。

如果您的问题正在等待子进程，那么您应该检查该功能`subprocess.call`

查看：

[http://docs.python.org/2/library/subprocess.html#module-subprocess](http://docs.python.org/2/library/subprocess.html#module-subprocess)

该函数会阻塞，直到另一个进程终止。

但是，如果您的问题是解压缩文件，并且您不必使用子进程，那么只需检查任何其他库进行解压缩，例如 pyunrar2：

*   [https://code.google.com/p/py-unrar2/](https://code.google.com/p/py-unrar2/)

或另一个：

*   [https://python-unrar.readthedocs.org/en/latest/](https://python-unrar.readthedocs.org/en/latest/)

# sql-server - 为什么 TSQL 运算符 + 的行为与聚合函数 sum() 不同

> ID：16196713
> 
> 赞同：2
> 
> 时间：2013-04-24T15:56:26.177
> 
> 标签：sql-server, tsql, null

TSQL有一个奇怪的行为：

```
SELECT 1 + NULL 
```

返回`NULL`,

尽管

```
SELECT sum(someColumn) 
```

将始终返回一个整数，忽略空值，除非整列为空（在这种情况下它返回空）。

决定使二元运算符在含义上与匹配聚合函数不同的设计选择是什么？

有没有办法克服这个“限制”，除了用 coalesce() 填充我的 SQL 之外？

***（评论后编辑）***

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T18:50:47.197

这种行为在大多数形式的 SQL 中很常见 - 在单行级[算术运算](http://en.wikipedia.org/wiki/Null_%28SQL%29#Arithmetic_operations)中，“（b）因为 Null 不是数据值，而是未知值的标记，在 Null 上使用数学运算符会导致未知值，这由 Null 表示。”

相比之下，在[聚合函数](http://en.wikipedia.org/wiki/Null_%28SQL%29#Aggregate_functions)（即跨多行的操作）中，“所有聚合函数都执行 Null 消除步骤，因此 Null 值不包含在计算的最终结果中。”

这两种引用的行为在 Wikipedia 文章中都有引用，引用了定义这些行为的 ISO/IEC 标准。

# regex - 为基于位置的搜索细分用户输入？

> ID：16196717
> 
> 赞同：1
> 
> 时间：2013-04-24T15:56:31.893
> 
> 标签：regex, search, full-text-search, location

我正在我的网站上实现基于位置的搜索，该搜索询问一个开放式问题，`location?`即用户输入的文本字段。

用户可以输入任何内容的组合，例如城市、州、邮编、城市、州、邮编，甚至是完整地址，例如`123 elm st Dallas, TX 75206`

最大的挑战来自用户输入的差异。例如，一些城市的名称中有空格或 hifen，例如`San Diego`.

有些人输入地址不同。`Dallas, TX 75206`或`Dallas TX 75206`或`Dallas, TX, 75206`或`Dallas, TX`。输入地址的方法有很多。

我想我想知道是否有一个通用的正则表达式、方法或公式用于分解这些部分并将它们匹配到正确的部分。我不是想重新发明轮子，这似乎是一个普遍的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-01T19:44:06.653

所以我基本上把每一部分都分解了，并使用逻辑来尝试分割大多数用户可以/应该使用的参数。

（这是使用 CakePHP）

```
<?php
    $addrString = $this->request->query['location'];
    //converto the address string to uppercase to match against the city and state arrays
    $addrString = strtoupper($addrString);

    //Convert address to array to look for a zip code
    $addrArray = preg_split('/[;,. \n]+/', $addrString);

    //List of cities in Oregon and Washington
    $cities = array('ABERDEEN','ABERDEEN GARDENS','ACME','AHTANUM','AIRWAY HEIGHTS','ALBION','ALDERWOOD MANOR','ALGER','ALGONA','ALLYN-GRAPEVIEW','ALMIRA','AMBOY','AMES LAKE','ANACORTES','ARLINGTON','ARLINGTON HEIGHTS','ARTONDALE','ASHFORD','ASOTIN','AUBURN','AULT FIELD','BAINBRIDGE ISLAND','BANGOR TRIDENT BASE','BANKS LAKE SOUTH','BARBERTON','BARING','BASIN CITY','BATTLE GROUND','BAY CENTER','BAY VIEW','BEAUX ARTS VILLAGE','BELLEVUE','BELL HILL','BELLINGHAM','BENTON CITY','BICKLETON','BIG LAKE','BINGEN','BIRCH BAY','BLACK DIAMOND','BLAINE','BLYN','BONNEY LAKE','BOTHELL','BRADY','BREMERTON','BREWSTER','BRIDGEPORT','BRIER','BRINNON','BRUSH PRAIRIE','BRYN MAWR-SKYWAY','BUCKLEY','BUCODA','BURBANK','BURIEN','BURLINGTON','CAMANO','CAMAS','CARBONADO','CARLSBORG','CARNATION','CARSON RIVER VALLEY','CASCADE-FAIRWOOD','CASCADE VALLEY','CASHMERE','CASTLE ROCK','CATHAN','CATHCART','CATHLAMET','CENTERVILLE','CENTRALIA','CENTRAL PARK','CHEHALIS','CHEHALIS VILLAGE','CHELAN','CHENEY','CHERRY GROVE','CHEWELAH','CHINOOK','CLARKSTON','CLARKSTON HEIGHTS-VINELAND','CLEAR LAKE','CLE ELUM','CLINTON','CLYDE HILL','COHASSETT BEACH','COLFAX','COLLEGE PLACE','COLTON','COLVILLE','CONCONULLY','CONCRETE','CONNELL','CONWAY','COPALIS BEACH','COSMOPOLIS','COTTAGE LAKE','COULEE CITY','COULEE DAM','COUNTRY HOMES','COUPEVILLE','COVINGTON','CRESTON','CUSICK','CUSTER','DALLESPORT','DARRINGTON','DAVENPORT','DAYTON','DEER PARK','DEMING','DESERT AIRE','DES MOINES','DISHMAN','DIXIE','DOLLAR CORNER','DUPONT','DUVALL','EAST CATHLAMET','EASTGATE','EAST HILL-MERIDIAN','EASTON','EAST PORT ORCHARD','EAST RENTON HIGHLANDS','EAST WENATCHEE','EAST WENATCHEE BENCH','EATONVILLE','ECHO LAKE','EDGEWOOD','EDISON','EDMONDS','ELBE','ELECTRIC CITY','ELK PLAIN','ELLENSBURG','ELMA','ELMER CITY','ENDICOTT','ENTIAT','ENUMCLAW','EPHRATA','ERLANDS POINT-KITSAP LAKE','ESCHBACH','ESPERANCE','EVERETT','EVERSON','FAIRCHILD AFB','FAIRFIELD','FAIRWOOD','FALL CITY','FARMINGTON','FEDERAL WAY','FELIDA','FERNDALE','FIFE','FINLEY','FIRCREST','FIVE CORNERS','FORDS PRAIRIE','FORKS','FORT LEWIS','FOX ISLAND','FREDERICKSON','FREELAND','FRIDAY HARBOR','GARFIELD','GARRETT','GENEVA','GEORGE','GIG HARBOR','GLACIER','GLEED','GOLD BAR','GOLDENDALE','GRAHAM','GRAND COULEE','GRAND MOUND','GRANDVIEW','GRANGER','GRANITE FALLS','GRAYLAND','GREEN ACRES','GREENWATER','HAMILTON','HARRAH','HARRINGTON','HARTLINE','HATTON','HAZEL DELL NORTH','HAZEL DELL SOUTH','HIGHLAND','HOBART','HOCKINSON','HOQUIAM','HUMPTULIPS','HUNTS POINT','ILWACO','INCHELIUM','INDEX','INDIANOLA','INGLEWOOD-FINN HILL','IONE','ISSAQUAH','JOHN SAM LAKE','JORDAN ROAD-CANYON CREEK','JUNCTION CITY','KAHLOTUS','KALAMA','KELSO','KENDALL','KENMORE','KENNEWICK','KENT','KETTLE FALLS','KINGSGATE','KINGSTON','KIRKLAND','KITTITAS','KLICKITAT','KRUPP','LA CENTER','LACEY','LA CONNER','LA CROSSE','LAKE BOSWORTH','LAKE CAVANAUGH','LAKE FOREST PARK','LAKE GOODWIN','LAKE KETCHUM','LAKELAND NORTH','LAKELAND SOUTH','LAKE MCMURRAY','LAKE MARCEL-STILLWATER','LAKE MORTON-BERRYDALE','LAKE ROESIGER','LAKE SHORE','LAKE STEVENS','LAKEVIEW','LAKEWOOD','LAMONT','LANGLEY','LATAH','LEA HILL','LEAVENWORTH','LEBAM','LEWISVILLE','LIBERTY LAKE','LIND','LOCHSLOY','LONG BEACH','LONGVIEW','LONGVIEW HEIGHTS','LYLE','LYMAN','LYNDEN','LYNNWOOD','MABTON','MCCHORD AFB','MCCLEARY','MACHIAS','MALDEN','MALONE-PORTER','MALTBY','MANCHESTER','MANSFIELD','MAPLE FALLS','MAPLE HEIGHTS-LAKE DESIRE','MAPLE VALLEY','MARBLEMOUNT','MARCUS','MARIETTA-ALDERWOOD','MARKHAM','MARROWSTONE','MARTHA LAKE','MARYHILL','MARYSVILLE','MATTAWA','MAY CREEK','MEADOW GLADE','MEDICAL LAKE','MEDINA','MERCER ISLAND','MESA','METALINE','METALINE FALLS','MIDLAND','MILL CREEK','MILL PLAIN','MILLWOOD','MILTON','MINNEHAHA','MIRRORMONT','MOCLIPS','MONROE','MONTESANO','MORTON','MOSES LAKE','MOSES LAKE NORTH','MOSSYROCK','MOUNTLAKE TERRACE','MOUNT VERNON','MOUNT VISTA','MOXEE','MUKILTEO','NACHES','NAPAVINE','NASELLE','NAVY YARD CITY','NEAH BAY','NEILTON','NESPELEM','NESPELEM COMMUNITY','NEWCASTLE','NEWPORT','NISQUALLY INDIAN COMMUNITY','NOOKSACK','NORMANDY PARK','NORTH BEND','NORTH BONNEVILLE','NORTH CREEK','NORTH MARYSVILLE','NORTH OMAK','NORTHPORT','NORTH STANWOOD','NORTH SULTAN','NORTHWEST SNOHOMISH','NORTH YELM','OAKESDALE','OAK HARBOR','OAKVILLE','OCEAN CITY','OCEAN PARK','OCEAN SHORES','ODESSA','OKANOGAN','OLYMPIA','OMAK','OPPORTUNITY','ORCHARDS','OROVILLE','ORTING','OSO','OTHELLO','OTIS ORCHARDS-EAST FARMS','OYEHUT-HOGANS CORNER','PACIFIC','PAINE FIELD-LAKE STICKNEY','PALOUSE','PARKLAND','PARKWOOD','PASCO','PATEROS','PEACEFUL VALLEY','PE ELL','PICNIC POINT-NORTH LYNNWOOD','POMEROY','PORT ANGELES','PORT ANGELES EAST','PORT HADLOCK-IRONDALE','PORT LUDLOW','PORT ORCHARD','PORT TOWNSEND','POULSBO','PRAIRIE RIDGE','PRESCOTT','PRIEST POINT','PROSSER','PULLMAN','PUYALLUP','QUILCENE','QUINCY','RAINIER','RAVENSDALE','RAYMOND','REARDAN','REDMOND','RENTON','REPUBLIC','RICHLAND','RIDGEFIELD','RITZVILLE','RIVERBEND','RIVER ROAD','RIVERSIDE','RIVERTON-BOULEVARD PARK','ROCHESTER','ROCKFORD','ROCK ISLAND','ROCKPORT','RONALD','ROOSEVELT','ROSALIA','ROSLYN','ROY','ROYAL CITY','RUSTON','ST. JOHN','SALMON CREEK','SAMMAMISH','SATSOP','SATUS','SEATAC','SEATTLE','SEATTLE HILL-SILVER FIRS','SEDRO-WOOLLEY','SELAH','SEQUIM','SHAKER CHURCH','SHELTON','SHORELINE','SILVANA','SILVERDALE','SKOKOMISH','SKYKOMISH','SMOKEY POINT','SNOHOMISH','SNOQUALMIE','SNOQUALMIE PASS','SOAP LAKE','SOUTH BEND','SOUTH CLE ELUM','SOUTH HILL','SOUTH PRAIRIE','SOUTH WENATCHEE','SPANAWAY','SPANGLE','SPOKANE','SPRAGUE','SPRINGDALE','STANWOOD','STARBUCK','STARTUP','STEILACOOM','STEVENSON','STIMSON CROSSING','SUDDEN VALLEY','SULTAN','SUMAS','SUMMIT','SUMMITVIEW','SUMNER','SUNNYSIDE','SUNNYSLOPE','SUQUAMISH','TACOMA','TAHOLAH','TANGLEWILDE-THOMPSON PLACE','TANNER','TEKOA','TENINO','TERRACE HEIGHTS','THORP','THREE LAKES','TIETON','TOKELAND','TOLEDO','TONASKET','TOPPENISH','TOUCHET','TOWN AND COUNTRY','TRACYTON','TRENTWOOD','TROUT LAKE','TUKWILA','TULALIP BAY','TUMWATER','TWISP','UNION GAP','UNION HILL-NOVELTY HILL','UNIONTOWN','UNIVERSITY PLACE','VADER','VANCOUVER','VANTAGE','VASHON','VENERSBORG','VERADALE','VERLOT','WAITSBURG','WALLA WALLA','WALLA WALLA EAST','WALLER','WALLULA','WALNUT GROVE','WAPATO','WARDEN','WARM BEACH','WASHOUGAL','WASHTUCNA','WATERVILLE','WAVERLY','WEALLUP LAKE','WENATCHEE','WEST CLARKSTON-HIGHLAND','WEST LAKE SAMMAMISH','WEST LAKE STEVENS','WEST LONGVIEW','WEST PASCO','WESTPORT','WEST RICHLAND','WEST SIDE HIGHWAY','WEST VALLEY','WEST WENATCHEE','WHITE CENTER','WHITE SALMON','WHITE SWAN','WILBUR','WILKESON','WILSON CREEK','WINLOCK','WINTHROP','WISHRAM','WOODINVILLE','WOODLAND','WOODS CREEK','WOODWAY','YACOLT','YAKIMA','YARROW POINT','YELM','ZILLAH','ADAIR VILLAGE','ADAMS','ADRIAN','ALBANY','ALOHA','ALTAMONT','AMITY','ANTELOPE','ARLINGTON','ASHLAND','ASTORIA','ATHENA','AUMSVILLE','AURORA','BAKER CITY','BANDON','BANKS','BARLOW','BARVIEW','BAY CITY','BEAVER','BEAVERTON','BEND','BIGGS JUNCTION','BOARDMAN','BONANZA','BROOKINGS','BROOKS','BROWNSVILLE','BUNKER HILL','BURNS','BUTTE FALLS','BUTTEVILLE','CANBY','CANNON BEACH','CANYON CITY','CANYONVILLE','CAPE MEARES','CARLTON','CASCADE LOCKS','CAVE JUNCTION','CAYUSE','CEDAR HILLS','CEDAR MILL','CENTRAL POINT','CHENOWETH','CHILOQUIN','CITY OF THE DALLES','CLACKAMAS','CLATSKANIE','CLOVERDALE','COBURG','COLUMBIA CITY','CONDON','COOS BAY','COQUILLE','CORNELIUS','CORVALLIS','COTTAGE GROVE','COVE','CRESWELL','CULVER','DALLAS','DAYTON','DAYVILLE','DEPOE BAY','DESCHUTES RIVER WOODS','DETROIT','DONALD','DRAIN','DUFUR','DUNDEE','DUNES CITY','DURHAM','EAGLE POINT','ECHO','ELGIN','ELKTON','ENTERPRISE','EOLA','ESTACADA','EUGENE','FAIRVIEW','FALLS CITY','FLORENCE','FOREST GROVE','FOSSIL','FOUR CORNERS','GARDEN HOME-WHITFORD','GARIBALDI','GASTON','GATES','GEARHART','GERVAIS','GLADSTONE','GLENDALE','GLIDE','GOLD BEACH','GOLD HILL','GOPHER FLATS','GRAND RONDE','GRANITE','GRANTS PASS','GRASS VALLEY','GREEN','GREENHORN','GRESHAM','HAINES','HALFWAY','HALSEY','HAPPY VALLEY','HARBECK-FRUITDALE','HARBOR','HARRISBURG','HAYESVILLE','HEBO','HELIX','HEPPNER','HERMISTON','HILLSBORO','HINES','HOOD RIVER','HUBBARD','HUNTINGTON','IDANHA','IMBLER','INDEPENDENCE','IONE','IRRIGON','ISLAND CITY','JACKSONVILLE','JEFFERSON','JENNINGS LODGE','JOHN DAY','JOHNSON CITY','JORDAN VALLEY','JOSEPH','JUNCTION CITY','KEIZER','KING CITY','KIRKPATRICK','KLAMATH FALLS','LABISH VILLAGE','LAFAYETTE','LA GRANDE','LAKE OSWEGO','LAKESIDE','LAKEVIEW','LA PINE','LEBANON','LEXINGTON','LINCOLN BEACH','LINCOLN CITY','LONEROCK','LONG CREEK','LOSTINE','LOWELL','LYONS','MCMINNVILLE','MADRAS','MALIN','MANZANITA','MARION','MAUPIN','MAYWOOD PARK','MEDFORD','MEHAMA','MERRILL','METOLIUS','METZGER','MILL CITY','MILLERSBURG','MILTON-FREEWATER','MILWAUKIE','MISSION','MITCHELL','MOLALLA','MONMOUTH','MONROE','MONUMENT','MORO','MOSIER','MOUNT ANGEL','MOUNT HOOD VILLAGE','MOUNT VERNON','MYRTLE CREEK','MYRTLE POINT','NEHALEM','NESKOWIN','NETARTS','NEWBERG','NEWPORT','NORTH BEND','NORTH PLAINS','NORTH POWDER','NYSSA','OAK GROVE','OAK HILLS','OAKLAND','OAKRIDGE','OATFIELD','OCEANSIDE','ODELL','ONTARIO','OREGON CITY','PACIFIC CITY','PAISLEY','PARKDALE','PENDLETON','PHILOMATH','PHOENIX','PILOT ROCK','PINE GROVE','PINE HOLLOW','PORTLAND','PORT ORFORD','POWERS','PRAIRIE CITY','PRESCOTT','PRINEVILLE','RAINIER','RALEIGH HILLS','REDMOND','REDWOOD','REEDSPORT','RICHLAND','RICKREALL','RIDDLE','RIVERGROVE','RIVERSIDE','ROCKAWAY BEACH','ROCKCREEK','ROGUE RIVER','ROSEBURG','ROSEBURG NORTH','ROSE LODGE','ROWENA','RUFUS','ST. HELENS','ST. PAUL','SALEM','SANDY','SCAPPOOSE','SCIO','SCOTTS MILLS','SEASIDE','SENECA','SHADY COVE','SHANIKO','SHERIDAN','SHERWOOD','SILETZ','SILVERTON','SISTERS','SODAVILLE','SOUTH LEBANON','SPRAY','SPRINGFIELD','STANFIELD','STAYTON','SUBLIMITY','SUMMERVILLE','SUMPTER','SUNNYSIDE','SUTHERLIN','SWEET HOME','TALENT','TANGENT','TERREBONNE','THREE RIVERS','TIGARD','TILLAMOOK','TOLEDO','TRI-CITY','TROUTDALE','TUALATIN','TURNER','TUTUILLA','TYGH VALLEY','UKIAH','UMATILLA','UNION','UNITY','VALE','VENETA','VERNONIA','WALDPORT','WALLOWA','WAMIC','WARM SPRINGS','WARRENTON','WASCO','WATERLOO','WESTFIR','WEST HAVEN-SYLVAN','WEST LINN','WESTON','WEST SLOPE','WHEELER','WHITE CITY','WILLAMINA','WILSONVILLE','WINCHESTER BAY','WINSTON','WOODBURN','WOOD VILLAGE','YACHATS','YAMHILL','YONCALLA'); 
    //These cities appear both in Oregon and Washington
    $duplicateCities = array('ARLINGTON', 'BEAVER', 'BRIDGEPORT', 'CARLTON', 'COLTON', 'DAYTON', 'IONE', 'KENT');
    //Variations of State spellings/abbreviations
    $states = array('WA', 'WASH', 'WASHINGTON', 'OR', 'ORE', 'OREGON');

    //Grab last item in address array, take first 5 characters
    $possibleZip = end($addrArray);
    $possibleZip = substr($possibleZip, 0, 5);
    //See if it looks like it could be a zipcode
    if(preg_match('/^\d{5}$/', $possibleZip)){
        //If the last part of the string looks like it could be a zip code
        //use that zip as the zip code to use for the search";  
        //$zip_to_search = $possibleZip;
        $conditions[] = array('Listing.ZipCode' => $possibleZip); 
    }else{
        //echo "Do a search of comparison of the addr_string array against the cities array to see if a city can be found and searched for. If not, return nothing?<br />";  
        //Check to see if the address string contains a city in WA or OR
        $city = $this->contains($addrString, $cities);
        $city = end($city);

        $state = array_intersect($addrArray, $states);
        $state = substr(end($state), 0, 2);

        if($city){
            if( in_array($city, $duplicateCities)){
            //Check to see if there's a duplicate city, 
            //If there is you'll have to do a search on both City and State
                if($state){
                    //$addr_conditions[] = array('Zip.state_prefix' => $state); 
                    //$addr_conditions[] = array('Zip.City' => $city); 
                    //$addr_state = $this->Zip->find('first', array('conditions' => $addr_conditions));
                    //$zip_to_search = $addr_state['Zip']['zip_code'];

                    $conditions[] = array('Listing.City' => $city); 
                    $conditions[] = array('Listing.State' => $state);
                }
            }else{
            //If no duplicate city was found above, just do a search on the city provided
                //$addr_city = $this->Zip->findByCity($city);
                //$zip_to_search = $addr_city['Zip']['zip_code'];
                $conditions[] = array('Listing.City' => $city); 
            }

        }elseif($state){
            //$addr_conditions[] = array('Zip.state_prefix' => $state); 
            //$addr_conditions[] = array('Zip.City' => $city); 
            //$addr_state = $this->Zip->find('first', array('conditions' => $addr_conditions));
            //$zip_to_search = $addr_state['Zip']['zip_code'];

            $conditions[] = array('Listing.State' => $state);
        }
    }
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T15:58:15.593

做就是了：

```
var type;

if (postcode == true) {
    type = postcode;
} else {
    type = notAPostCode;
}

return type; 
```

# ios - 除非我添加“anchorPoint”代码，否则“CGRectIntersectsRect”不会触发

> ID：16196718
> 
> 赞同：0
> 
> 时间：2013-04-24T15:56:36.913
> 
> 标签：ios, cocos2d-iphone

我使用`CGRectIntersectsRect`2 个精灵；

```
if(CGRectIntersectsRect(hero.boundingBox, oppo.boundingBox)){

 ...my code...
} 
```

它在以前的版本中运行良好，但不知何故它现在没有触发`CGRectIntersectsRect`。我检查了两个版本，看不到任何差异或问题。现在，除非我添加，否则它不起作用；

```
hero.anchorPoint = ccp(0,0); 
```

1.  你知道这可能是什么原因吗？
2.  anchorPoint 是否从 point(0,0) 开始边界框中心？如何正确使用锚点？

谢谢，

# ruby - 阻止 Rdoc 在字符串上创建链接

> ID：16196719
> 
> 赞同：1
> 
> 时间：2013-04-24T15:56:40.697
> 
> 标签：ruby, rdoc

我是第一次使用 RDoc，我遇到了一个有点麻烦的问题。我的课堂文档中有一行如下：

```
# * callingState 
```

我在同一个项目中也有一门课，叫做 State。当我使用 RDoc 为我的项目生成文档时，它将上面行的“状态”部分链接到我的状态对象。

我宁愿不让它这样表现。有什么方法可以阻止 RDoc 自动创建此链接？快速谷歌搜索没有产生任何结果，但我可能只是使用错误的术语进行搜索。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T17:49:05.413

我还没有看到这种具体情况发生。我试图重现它，但是当只有部分单词与某个类匹配时，没有创建链接。但是，我确实有很多不想链接到类或模块名称的情况。在大写单词前加上反斜杠对我来说是诀窍。

请参阅： [如何防止 RDoc 解析 URL？](https://stackoverflow.com/questions/4676167/how-do-i-prevent-rdoc-from-parsing-a-url)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-03T13:09:28.580

RDoc 文档有一个关于[Escaping Text Markup](https://docs.ruby-lang.org/en/3.0.0/RDoc/Markup.html#class-RDoc::Markup-label-Escaping+Text+Markup)的部分，这对我有帮助。

```
* This will not be linked to \RDoc::RDoc#document 
```

# node.js - Angularjs 全栈测试

> ID：16196722
> 
> 赞同：2
> 
> 时间：2013-04-24T15:56:43.310
> 
> 标签：node.js, testing, angularjs, integration-testing, zombie.js

如何对 nodejs/ [angularjs](http://angularjs.org/)应用程序进行全栈测试。我一直在使用[zombiejs](https://github.com/assaf/zombie)时遇到很多问题，其中测试间歇性地失败并通过。

我想要模拟用户交互的测试（例如用于 rails 的 capybara 或用于 nodejs 的僵尸）。

测试应该是这样的形式（像黄瓜测试一样写）：

1.  我去 /login 页面
2.  我填写电子邮件“test@user.com”
3.  我填写密码“秘密”
4.  我点击提交
5.  我应该在 /users 页面上

是否有任何框架可以帮助我正确地对角度应用程序进行全栈测试？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-12T20:47:36.907

你看过[业力](http://karma-runner.github.io/0.8/index.html)吗？该项目的 Github 源代码在[这里](https://github.com/karma-runner/karma)。我发现 Karma 是一个出色的工具，可以在真实场景中对应用程序进行单元测试和测试。Karma 具有[Angular Scenario Runner](http://docs.angularjs.org/guide/dev_guide.e2e-testing) e2e 测试 (ngScenario)，可模拟用户交互并可能满足您的需求。它还“理解”AngularJS，并且可以更轻松地测试 AngularJS 应用程序。例如，您可以编写如下测试（来自 AngularJS 文档）：

```
describe('Buzz Client', function() {
  it('should filter results', function() {
    input('user').enter('jacksparrow');
    element(':button').click();
    expect(repeater('ul li').count()).toEqual(10);
    input('filterText').enter('Bees');
    expect(repeater('ul li').count()).toEqual(1);
  });
}); 
```

导航到页面，填写输入框（如电子邮件和密码），单击提交按钮等，并验证整个应用程序是否按预期工作。

# javascript - 用字符串替换文本选择而不破坏选择之外的标签

> ID：16196723
> 
> 赞同：0
> 
> 时间：2013-04-24T15:56:43.930
> 
> 标签：javascript, jquery, html, replace

假设我有这个 html：

```
<div class="edit" contenteditable="true">
   <b>Example text</b>
   Text outside
   <b>
      <i>
         <u>underlined and italic and bold</u>
      italic and bold</i></b>
   more Text
   <br>
   after the line break
</div> 
```

为了方便起见，我有这个 javascript 函数，它返回给定元素内选择结束的偏移量：

```
var getCaretCharacterOffsetWithin = function(element) {
  var caretOffset = 0;
  if (typeof window.getSelection != "undefined") {
    var range = window.getSelection().getRangeAt(0);
    var preCaretRange = range.cloneRange();
    preCaretRange.selectNodeContents(element);
    preCaretRange.setEnd(range.endContainer, range.endOffset);
    caretOffset = preCaretRange.toString().length;
  } else if (typeof document.selection != "undefined" && document.selection.type != "Control") {
    var textRange = document.selection.createRange();
    var preCaretTextRange = document.body.createTextRange();
    preCaretTextRange.moveToElementText(element);
    preCaretTextRange.setEndPoint("EndToEnd", textRange);
    caretOffset = preCaretTextRange.text.length;
  }
  return caretOffset;
 } 
```

* * *

假设用户进行了一个选择，该选择从开始到`outside`结束，`italic and bold`所以它看起来像这样：

```
"outsideunderlined and italic and bolditalic and bo" 
```

如何在不损坏`<b>Example text</b>`选择之后的文本的情况下替换整个字符串。如果我们替换的字符串是空字符串`""`，结果应该是这样的：

```
<div class="edit" contenteditable="true">
   <b>Example text</b>
   Text 
   ld
   more Text
   <br>
   after the line break
</div> 
```

我不在乎选择中的标签是否保留我不确定哪种方式更容易。

如果您有任何不清楚的地方，请询问。

提前谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T20:17:15.040

这个答案不适用于 IE8-（目前）。此函数将所选文本替换为`replaceString`并选择新插入的节点。之后您可能想要规范化 DOM，可能是相邻的或空的文本节点。

问我有什么不清楚的。

```
function replSel(replaceString) {
    var sel = getSelection(), rng, startNode, endNode, comAnc, sOff;
    if (sel.rangeCount) {
        rng = sel.getRangeAt(0);
        sOff = rng.startOffset;
        if (rng.startContainer === rng.endContainer) {
            rng.endContainer.nodeValue =
                  rng.endContainer.nodeValue.substring(0, sOff) + replaceString
                  + rng.endContainer.nodeValue.substring(rng.endOffset);
            rng.setStart(rng.startContainer, sOff);
            rng.setEnd(rng.endContainer, sOff + replaceString.length);
        } else {
            comAnc = rng.commonAncestorContainer;
            rng.startContainer.nodeValue =
                    rng.startContainer.nodeValue.substring(0, sOff);
            // rng.startOffset is set to 0 when the node value is changed
            // That's fine for the range's end, but not for the start.
            rng.setStart(rng.startContainer, sOff);
            rng.endContainer.nodeValue =
                    rng.endContainer.nodeValue.substring(rng.endOffset);
            startNode = rng.startContainer;
            while (startNode.parentNode !== comAnc) {
                while (startNode.nextSibling)
                    startNode.parentNode.removeChild(startNode.nextSibling);
                startNode = startNode.parentNode;
            }
            endNode = rng.endContainer;
            while (endNode.parentNode !== comAnc) {
                while (endNode.previousSibling)
                    endNode.parentNode.removeChild(endNode.previousSibling);
                endNode = endNode.parentNode;
            }
            while (startNode.nextSibling !== endNode)
                comAnc.removeChild(startNode.nextSibling);
            comAnc.insertBefore(
                    document.createTextNode(replaceString), endNode);
        }
        sel.removeAllRanges();
        sel.addRange(rng);
    }
} 
```

# javascript - 正则表达式量词

> ID：16196724
> 
> 赞同：2
> 
> 时间：2013-04-24T15:56:55.147
> 
> 标签：javascript, regex

我认为这对我的正则表达式来说是一个“不费吹灰之力”的补充，但我当然被证明是错误的......

如果字符串是符号（-、$、+、=、（、）、{、}），我当前的正则表达式返回 true：

```
(/^[-$+)(}{]$/).test(token); 
```

我想在正则表达式中添加两个符号，赋值运算符 (=) 和相等运算符 (==)。我的直觉引导我做一些事情，如果存在一个带有一两个“=”的标记，则返回 true：

```
(/^[-$+)(}{]|(=){1,2}$/).test(token); 
```

但如果实际令牌为`(/^[-$+)(}{]|(=){1,2}$/).test("===")`真，则返回。

有人可以阐明我的正则表达式缺点吗？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T16:03:24.307

您遇到了一个微妙的运算符优先级问题。

> ```
> /^[-$+)(}{]|(=){1,2}$/ 
> ```

`^`并且`$`比 绑定得更紧`|`，所以这相当于

```
/(?:^[\-$+)(}{])|(?:={1,2}$)/ 
```

而不是您可能想要的`^...$`包含`|`：

```
/^(?:[\-$+)(}{]|={1,2})$/ 
```

或简化

```
/^(?:[\-$+(){}]|==?)$/ 
```

* * *

```
/^(?:[\-$+(){}]|==?)$/.test("===") === false;
/^(?:[\-$+(){}]|==?)$/.test("()")  === false;
/^(?:[\-$+(){}]|==?)$/.test("=")   === true;
/^(?:[\-$+(){}]|==?)$/.test("==")  === true;
/^(?:[\-$+(){}]|==?)$/.test("(")   === true; 
```

* * *

# 关于捕获与非捕获括号的题外话

除非我真的想捕获内容，否则我更喜欢`(?:...)`这样做，因为虽然更冗长，但它对使用正则表达式的代码的微妙影响较少。`(...)``(?:...)`

当您不打算捕获内容时使用捕获组的一些问题包括：

1.  更改现有组的编号，因为 JS 没有命名组，
2.  使用比我需要的效果更多的操作符会使维护者误以为我正在捕获内容是有原因的，
3.  改变远程`exec`循环的行为，（这主要是 perlish 全局匹配的问题，`@foo = $str =~ /(foo(bar))/g` 但每隔一段时间你会看到 JS 代码做类似的事情）
4.  改变在别处定义的（可能是可变参数的）替换函数的行为，例如

    ```
    newStr = oldStr.replace(
        regexDefinedEarlier,
        函数（var_args）{
          return [].slice.call(arguments, 1, arguments.length - 2).join('');
        });

    ```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-24T15:59:59.467

由于运算符优先级， or 分支包括 start ( `^`) 和 end ( `$`) 零宽度匹配。要捕获 = 或 ==，您必须使用：

```
(/^([-$+)(}{]|={1,2})$/).test(token); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-24T16:00:50.067

使用这个正则表达式：

```
(/^(?:[-$+)(}{]|={1,2})$/).test(token); 
```

如果您在管道之前和之后使用锚点`^`（开始输入）或`$`（结束输入）（或用于正则表达式），则必须将 LHS 和 RHS 括`|`在括号中以对其进行分组，以便`^`或`$`适用于括号内的整个正则表达式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-24T16:08:03.957

. . 正则表达式的问题很简单：“^”（以开头）位于“管道”的左侧，而“$”（以结尾）位于右侧。它们仅适用于正则表达式的那一部分，如下所示：

```
^[-$+)(}{]
OR
(=){1,2}$ 
```

. . 所以，你是说`"_starts with one of these chars_ or _ends with one or two equal signs_"`，明白了吗？

. . 您想要的是放置一个组，以便“交替”（管道）仅适用于其内容，如下所示：

```
^([-$+)(}{]|={1,2})$ 
```

. . 现在你说：`"the text is made of either of _this list of chars_ or _one or two equal signs_"`。

. Amplexos。

# c++ - 如何添加日志以在需要时轻松打开并在没有生产开销的情况下关闭？

> ID：16196728
> 
> 赞同：1
> 
> 时间：2013-04-24T15:57:12.133
> 
> 标签：c++

在我的 C# 项目中，我喜欢使用`ConditionalAttribute`并发现它非常有用。我有很多用于日志记录的类，只需使用设置或取消设置的相应条件属性重新编译即可打开或关闭日志记录（没有开销）。

```
// this code likely is not good as HedgerControllerLogger better to be singleton
// please ignore that

public class HedgerControllerLogger
{
    private StreamWriter swLog;

    public HedgerControllerLogger()
    {
        swLog = new StreamWriter("logsGeneral/logHedgerController.txt") { AutoFlush = true };
    }

    [Conditional("LOG_HEDGER_CONTROLLER")]
    public void Log(string message)
    {
        swLog.WriteLine(DateTimePrecise.Instance.CurDateTime().ToString("H:mm:ss:ffffff") + ' ' + message);
    }

} 
```

我怎样才能对 c++ 产生相同的效果？我应该使用类似的东西吗？可能一些现有的日志库具有相同的功能，可能`boost`吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T16:00:19.847

您可以使用预处理器：

```
#ifdef ENABLE_LOGGING
  void log(const std::string& message) { /* do logging*/}
#else
  void log(const std::string&){}
#endif 
```

你也可以用模板做类似的事情，但为什么要过于复杂呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T16:41:03.013

我建议看看如何`TRACE/ATLTRACE`提供类似的宏（如果我是正确的，你正在使用 Visual Studio）。一般来说，它们归结为在 DEBUG 构建中进行跟踪调用，在 RELEASE 构建中进行无操作。这是一个例子：

```
struct CTrace
{
    static void CTrace::Trace(LPCTSTR lpszFormat, ...)
    {
        va_list args;
        va_start(args, lpszFormat);
        TCHAR szBuffer[1024];
        int nSize = sizeof(szBuffer)/sizeof(szBuffer[0]);
        int nBuf = _vsntprintf(szBuffer, nSize, lpszFormat, args);          
        OutputDebugString(szBuffer); // write to debug output
        va_end(args);
    }    
};

#ifdef _DEBUG   
#define TRACE               CTrace::Trace
#else  
#define TRACE               true ? (void)0 : CTrace::Trace
#endif // _DEBUG 
```

然后在代码中你有类似的东西：

```
TRACE("value is %d", 34); 
```

在 DEBUG 构建中，它被编译为：

```
CTrace::Trace("value is %d", 34); 
```

在发布版本中，它变成：

```
true ? (void)0 : CTrace::Trace("value is %d", 34); 
```

然后由编译器优化掉。您可以通过检查生成的代码来验证它。

# django - 从 django 中的 GPS 设备上传 GPS 数据

> ID：16196731
> 
> 赞同：0
> 
> 时间：2013-04-24T15:57:19.197
> 
> 标签：django, gps, geodjango

我有一个 GPS 设备，可为我提供我指定的 URI 的灵活性数据。根据设备规格，它将以二进制 ascii 格式发送数据，在 django url 中处理这些数据的最佳方法是什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-07-27T07:45:15.653

您的 GPS 使用 TCP/IP 而非 HTTP 发送数据。Django 处理 HTTP 请求。
要将您的数据保存在 djang 中，解决方案是编写一个代理服务器来读取自定义 TCP/IP 协议并发送可以由 django 应用程序处理的 HTTP POST 请求。

您可以在 python 中找到简单的 TCP/IP 服务器示例： [https ://pymotw.com/2/socket/tcp.html](https://pymotw.com/2/socket/tcp.html)

# java - 启用自动提交时无法提交 (JDBC)

> ID：16196734
> 
> 赞同：1
> 
> 时间：2013-04-24T15:57:25.823
> 
> 标签：java, jdbc

这是导致问题的代码的一部分。

```
//Create buffered row set
crs = new CachedRowSetImpl();
crs.setUrl("jdbc:postgresql:adam");
crs.setUsername("adam");
crs.setPassword("1234");
crs.setCommand("SELECT name, description, price FROM products");
crs.execute();
crs.next(); //Move cursor to the first record
//Update the first record
crs.updateString("name", "TEST NAME");
crs.updateString("description", "TEST DESC");
crs.updateFloat("price", 1);
crs.updateRow();
crs.acceptChanges(); 
```

在 acceptChanges() 行我得到一个异常：

```
org.postgresql.util.PSQLException: Cannot commit when autoCommit is enabled.
    at org.postgresql.jdbc2.AbstractJdbc2Connection.commit(AbstractJdbc2Connection.java:705)
    at com.sun.rowset.internal.CachedRowSetWriter.commit(CachedRowSetWriter.java:1396)
    at com.sun.rowset.CachedRowSetImpl.acceptChanges(CachedRowSetImpl.java:893)
    at test.MainPanel$2.actionPerformed(MainPanel.java:70)
    ... 
```

如何让它工作？我知道 setAutoCommit(false) 方法，但是当我打电话时

```
crs.getConnection().setAutoCommit(false); 
```

我得到 NullPointerException 因为 getConnection() 返回 null。请帮忙

# mysql - 使用 Long 和默认 null 播放框架异常数据库字段

> ID：16196738
> 
> 赞同：1
> 
> 时间：2013-04-24T15:57:43.947
> 
> 标签：mysql, playframework, anorm

我正在尝试创建一个案例类和对象，如下所示

```
case class Log (
  id: Pk[Long],
  module: String,
  reference: Option[Long],
  remarks: String,
  at:  Option[Date] )

object Log {

  val simple = {
    get[Pk[Long]]("id") ~
      get[String]("module") ~
      get[Option[Long]]("reference") ~
      get[String]("remarks") ~
      get[Option[Date]]("at") map {
        case id ~ module ~ reference ~ remarks ~ at => Log(id, module, reference, remarks, at)
      }
  } 
```

如何创建一个具有空值的 Log 对象以供参考 & at，并保存它？

```
 val log: Log = new Log(NotAssigned, "user", null, "DFD", null) 
```

你能指导一下我做错了什么吗？此外，在（db 列）有一个默认值现在 [使用 mysql]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T19:31:10.977

由于您使用的是 scalas 选项类，因此请使用 None 而不是 null：

```
val log: Log = new Log(NotAssigned, "user", None, "DFD", None) 
```

# c++ - 如何按照从具有结构的文件中读取的顺序对向量进行排序

> ID：16196743
> 
> 赞同：0
> 
> 时间：2013-04-24T15:57:54.323
> 
> 标签：c++, vector, structure

我有一个内部包含名称和等级的结构，我将使用一个向量来读取文件的内部，直到结构结束。例如：

```
 struct ReadAll{string name; double numbers;}

 vector <ReadAll>userInfo; 
```

到目前为止，我需要将结果显示在一个文件中，但我需要将它们显示为 ex: student1 89 47 99.. student4 89 78 45.. 但我得到的只是 student4 98 78 45 ... student1 89 47 99.. 我怎样才能以正确的顺序显示它们？

```
void writeStudents(vector<Student>& students, string outputFileName)    
{//students.push_back(Student());

ofstream outputFile;
outputFile.open(outputFileName.c_str()); 
while(students.size() != 0) 
{

   for (int count = students.size(); count > 0; --count)
   {  
      students.back().average = (students.back().grade1 + 
      students.back().grade2 + students.back().grade3) / 3; 
      outputFile << "size is: "<< students.size() <<endl;
      outputFile << students.back().name <<endl;
      outputFile << students.back().grade1 <<endl;
      outputFile << students.back().grade2 <<endl;
      outputFile << students.back().grade3 <<endl;
      outputFile << "Average: " << students.back().average <<endl;
      students.pop_back();
      //count++;
   }
 } 
```

}

就像现在一样，我只是不知道我必须做什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T16:36:27.257

通常，C++ 的处理方式要简单得多：

```
std::ostream& operator<<(std::ostream& outputFile, const student& stud) {
    outputFile << stud.name << '\n';
    outputFile << stud.grade1 << '\n';
    outputFile << stud.grade2 << '\n';
    outputFile << stud.grade3  << '\n';
    outputFile << "Average: " << stud.average <<'\n';
    return outputFile;
}

void writeStudents(vector<Student>& students, const string& outputFileName)    
{    
    std::ofstream outputFile(outputFileName.c_str()); 
    for (int count = 0; count <students.size(); ++count) //why the complexity here?
    {  
        //this line seems like it shouldn't be in a "write" function
        students[i].average = (students[i].grade1 + 
                students[i].grade2 + students[i].grade3) / 3; 
        //This line seems out of place
        outputFile << "size is: "<< students.size() <<'\n'; 
        outputFile << students[i]; 
    }
} 
```

或者，如果您在调用 writeStudents 之前计算了平均值，那么它仍然更简单：

```
void writeStudents(const vector<Student>& students, const string& outputFileName)    
{    
    //open a file
    std::ofstream outputFile(outputFileName.c_str()); 
    //write number of students 
    outputFile << "size is: "<< students.size() <<'\n'; 
    //copy all of the students to the output file
    std::ostream_iterator<Student> oiter(outputFile)
    std::copy(students.begin(), students.end(), oiter); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T16:18:36.443

简单的做事方式有什么问题吗？像这样的东西

```
for (int i = 0; i < students.size(); ++i)
{
    outputFile << students[i].name <<endl;
    outputFile << students[i].grade1 <<endl;
    outputFile << students[i].grade2 <<endl;
    outputFile << students[i].grade3 <<endl;
} 
```

我不明白您为什么要在打印时向后遍历向量并删除项目。这有点奇怪。

# gcc - 在 sh4 CPU 上编译 zmq 并发生由 DSO 错误引用

> ID：16196749
> 
> 赞同：0
> 
> 时间：2013-04-24T15:58:07.170
> 
> 标签：gcc, makefile, zeromq, automake

我发现如果我添加-shared，它会解决make问题，但是，我不知道在哪里修改Makefile。我已经在 Makefile [https://gist.github.com/anonymous/5453234](https://gist.github.com/anonymous/5453234)中尝试过 LDFLAGS,CXXFLAGS ，但它无法正常工作。

```
[dlin@h perf]$ make V=1
/bin/sh ../libtool  --tag=CXX   --mode=link g++  -O2 -pipe -shared  -shared  -o local_lat local_lat.o ../src/libzmq.la -lrt -lpthread -shared
libtool: link: g++ -O2 -pipe -o .libs/local_lat local_lat.o  ../src/.libs/libzmq.so -lrt -lpthread
/usr/bin/ld: .libs/local_lat: hidden symbol `__sync_fetch_and_add_2' in /usr/lib/gcc/sh4-linux/4.2.4/libgcc.a(linux-atomic.o) is referenced by DSO
/usr/bin/ld: final link failed: Nonrepresentable section on output
collect2: ld returned 1 exit status
make: *** [local_lat] Error 1
[dlin@h perf]$ g++ -O2 -pipe -o .libs/local_lat local_lat.o  ../src/.libs/libzmq.so -lrt -lpthread
/usr/bin/ld: .libs/local_lat: hidden symbol `__sync_fetch_and_add_2' in /usr/lib/gcc/sh4-linux/4.2.4/libgcc.a(linux-atomic.o) is referenced by DSO
/usr/bin/ld: final link failed: Nonrepresentable section on output
collect2: ld returned 1 exit status
[dlin@h perf]$ g++ -O2 -pipe -o .libs/local_lat local_lat.o  ../src/.libs/libzmq.so -lrt -lpthread -shared 
```

-shared 选项可在最后一个命令中手动写入，但如何放入 Makefile？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T23:21:43.307

很可能`-shared`将错误延迟到运行时，看起来*SuperH*的 GCC没有完整的原子支持。因此，选项是编码所需的原子或使用互斥体后备。

您可以通过以下修补来强制使用互斥锁`configure.ac`：

```
sh-* | sh[34]*-*)
    AC_DEFINE(ZMQ_FORCE_MUTEXES, 1, [Force to use mutexes])
    ;; 
```

这不会比本机支持差很多，因为*SuperH*硬件仅通过操作提供对字节的测试和设置`tas.b`。可以用以下比较和交换替换互斥操作：

```
static unsigned char sh_critical_section = 0;

inline static void sh_enter_critical_section (void)
{
  unsigned int oldval;   
  do
    __asm__ __volatile__ ("tas.b @%1; movt %0"
              : "=r" (oldval)
              : "r" (&sh_critical_section)
              : "t", "memory");
  while (oldval == 0);
}

inline static void sh_leave_critical_section (void)
{
  __asm__ __volatile__ (" " ::: "memory");
  sh_critical_section= 0;
} 
```

因此可以进行以下修改：

```
#elif defined ZMQ_ATOMIC_COUNTER_SH
            sh_enter_critical_section ();
            old_value = value;
            value += increment_;
            sh_leave_critical_section ();    
#elif defined ZMQ_ATOMIC_COUNTER_MUTEX
            sync.lock ();
            old_value = value;
            value += increment_;
            sync.unlock ();
#else 
```

这是多余的，因为功能与互斥锁实现相同，因此可以将`tas.b`操作移至`mutex_t`实现，但需要为锁引入全局变量，与互斥锁的*pthread*实现相比，您几乎没有任何收获。

运行性能测试以查看是否有任何可衡量的性能改进甚至降级，并在上游提交拉取请求以供其他人使用！

# sybase - Sybase 初始化但不运行

> ID：16196751
> 
> 赞同：1
> 
> 时间：2013-04-24T15:58:13.250
> 
> 标签：sybase

我正在使用 Red Hat 5.5，并且正在尝试运行 Sybase ASE 12.5.4。

昨天我尝试使用命令“service sybase start”，控制台显示 sybase 反复尝试初始化主数据库服务器，但失败了。

更新：

我使用以下命令在 /ims_systemdb/master 初始化了一个数据库：

```
dataserver -d /ims_systemdb/master -z 2k -b 51204 -c $SYBASE/ims.cfg -e db_error.log
chmod a=rwx /ims_systemdb/master
ls -al /ims_systemdb/master 
```

它在 /ims_systemdb/master 为我提供了一个很好的数据库，大小为 104865792 字节 (2048x51240)。

但是当我跑步时

```
service sybase start 
```

/logs/sybase_error.log 中的错误日志如下所示：

```
00:00000:00000:2013/04/26 16:11:45.18 kernel  Using config area from primary master device.
00:00000:00000:2013/04/26 16:11:45.19 kernel  Detected 1 physical CPU
00:00000:00000:2013/04/26 16:11:45.19 kernel  os_create_region: can't allocate 11534336000 bytes
00:00000:00000:2013/04/26 16:11:45.19 kernel  kbcreate: couldn't create kernel region.
00:00000:00000:2013/04/26 16:11:45.19 kernel  kistartup: could not create shared memory 
```

如果您没有将 sysctl 中的 shmmax 设置得足够高，我读到“os_create_region”是正常的，所以我将其设置为 16000000000000，但我仍然收到此错误。有时，当我使用 .cfg 文件时，我会收到以下错误消息：

```
00:00000:00000:2013/04/25 14:04:08.28 kernel  Using config area from primary master device.
00:00000:00000:2013/04/25 14:04:08.29 kernel  Detected 1 physical CPU
00:00000:00000:2013/04/25 14:04:08.85 server  The size of each partitioned pool must have atleast 512K. With the '16' partitions we cannot configure this value f 
```

为什么会出现这两个错误，我该怎么办？

更新：

目前，我看到了第一条错误消息（操作系统无法分配字节）。/etc/sysctl.conf 的内容如下：

```
kernel.shmmax = 4294967295
kernel.shmall = 1048576
kernel.shmmni = 4096 
```

但是之前的日志语句指出

```
os_create_region: can't allocate 11534336000 bytes 
```

那么为什么它试图分配的区域如此之大，又是在哪里设置的呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T19:55:06.943

解决方案：

当你收到类似“os_create_region: can't allocate 11534336000 bytes”这样的消息时，这意味着 Sybase 的配置文件正在要求内核创建一个超出 /etc/sysctl.conf 中 shmmax 变量的区域

要做的主要事情是更改 ims.conf（或您正在使用的任何配置文件）。然后，您更改物理内存部分中的最大内存变量。

```
[Physical Memory]
    max memory = 64000
    additional network memory = 10485760
    shared memory starting address = DEFAULT
    allocate max shared memory = 1 
```

供您参考，我的 /etc/sysctl.conf 文件以以下三行结尾：

```
kernel.shmmax = 16000000000
kernel.shmall = 16000000000
kernel.shmmni = 8192 
```

完成此操作后，键入“showserver”以显示正在运行的进程。

有关详细信息，请参阅《Sybase 系统管理员指南》第 2 卷以及前面评论中 Michael Gardner 到 Red Hat 内存管理的链接。

# safari - Safari webkit 过渡闪烁

> ID：16196752
> 
> 赞同：0
> 
> 时间：2013-04-24T15:58:14.900
> 
> 标签：safari, webkit, transition

我在使用 webkit 过渡不透明度淡入元素时遇到闪烁。

该问题仅发生在 Safari 中，但确实存在故障。

我试过了`-webkit-backface-visibility: hidden;`，`-webkit-transform: translate3d(0,0,0);` 但没有一个工作，有人有什么想法吗？

[http://www.timbretday.com](http://www.timbretday.com)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T10:23:25.077

解决了它，在 CSS 中添加关键帧停止了闪烁

# c++ - 使用函子的返回类型来声明模板方法的返回类型，无需 decltype

> ID：16196756
> 
> 赞同：2
> 
> 时间：2013-04-24T15:58:31.760
> 
> 标签：c++, templates, generics, functor

我想避免在调用模板成员函数时指定返回类型。'decltype' 关键字与 'auto' 结合可以实现这一点，但不幸的是，我们没有针对我们需要支持的所有平台的 C++11 编译器。使用类型限定模板方法应用程序也可以，但需要调用者...使用类型限定模板方法。

以下是可能的，有一些模板魔法吗？boost 1.48 在这里提供任何帮助吗？

我们的实际代码是利用 boost::thread、boost::packaged_task 和 boost::unique_future，但这里是一个人为的例子：

```
#include <functional>

#ifdef WONT_COMPILE
struct WrapNoDecltype
{
    WrapNoDecltype() {}

    template<typename F>
    std::result_of<F>::type // warning: 'std::result_of<_Fty>::type' : dependent name is not a type
    operator()(const F& f)
    {
        setup();
        std::result_of<F>::type result = f();
        teardown();

        return result;
    }

    void setup() { }
    void teardown() { }
};
#endif

struct Wrap
{
    Wrap() {}

    template<typename F>
    auto operator()(const F& f) -> decltype(f())
    {
        setup();
        typename std::result_of<F()>::type result = f();
        teardown();

        return result;
    }

    void setup() { }
    void teardown() { }
};

struct WrapWithReturnType
{
    WrapWithReturnType() {}

    template<typename RetType>
    RetType
    apply(const std::function<RetType(void)>& f)
    {
        setup();
        RetType result = f();
        teardown();

        return result;
    }

    void setup() { }
    void teardown() { }
};

int answer()
{
    return 42;
}

int main()
{
    Wrap w;
    WrapWithReturnType wwr;
#ifdef WONT_COMPILE
    WrapNoDecltype wna;
#endif

    int i = w(answer);
    int j = wwr.apply<int>(answer);
#ifdef WONT_COMPILE
    int k = wna(answer);
#endif
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T17:13:24.123

```
struct WrapNoDecltype
{
    WrapNoDecltype() {}

    // version for function references
    template < typename Res >
    Res operator()( Res(&f)() )
    {
        setup();
        Res result = f();
        teardown();

        return result;
    }

    // version for everything
    template < typename T >
    typename std::result_of<typename std::decay<T>::type ()>::type
    operator()( T const& f )
    {
        setup();
        typename std::result_of<typename std::decay<T>::type ()>::type result = f();
        teardown();

        return result;
    }

    void setup() { }
    void teardown() { }
}; 
```

正如[Yakk](https://stackoverflow.com/users/1774667/yakk)指出的那样，通过合并`decay`，第二个版本总是有效的。第一个版本要简单得多，但仅在传递函数引用时才有效。

当然，您也可以使用`boost::result_of`or `std::tr1::result_of`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T17:44:14.723

据我所知，如果我们修改您的调用以包含`&`运算符，则原始代码中唯一的错误是`typename`在谈论依赖类型时缺少，以及在调用时缺少参数列表`std::result_of`：

```
struct WrapNoDecltype
{
  WrapNoDecltype() {}

  template < typename T >
  typename std::result_of<T()>::type operator()( T const &f )
  {
    setup();
    typename std::result_of<T()>::type result = f();
    teardown();

    return result;
  }
}; 
```

但是，`std::result_of`它是一个 C++11 特征类，因此如果您的编译器不支持`decltype`，它可能无法正确支持`std::result_of`.

`std::tr1::result_of`可能有阻止上述工作的怪癖。

在野外，`std::result_of`一个函数指针类型的使用：http: [//ideone.com/dkGid8](http://ideone.com/dkGid8)

正如@DyP 所指出的，这仅在您使用`&f`而不是调用它时才有效`f`。要解决此问题，请`std::decay`像这样使用：

```
struct WrapNoDecltype
{
  WrapNoDecltype() {}

  template < typename T >
  typename std::result_of<typename std::decay<T>::type()>::type
    operator()( T const &f )
  {
    // setup()
    typename std::result_of<typename std::decay<T>::type()>::type
      result = f();
    // teardown()

    return result;
  }
};

int foo() { return 7; }
int main()
{
  WrapNoDecltype test;
  int x = test(foo);
} 
```

它将函数类型转换为函数指针类型。

这是必需的，因为`std::result_of`滥用 C++ 语法。 `std::result_of< Func_Type ( Args... ) >`实际上是对*返回* `Func_Type`和接受的函数的类型进行操作`(Args...)`。然后它说“如果我们应用`Args...`到`Func_Type`. 会怎样。当`Func_Type`它是函数的实际类型时，这将不起作用，因为不允许您返回函数的实际实例。

`std::decay`将`Func_Type`函数的类型转换为指向相同类型函数的指针，这是函数可以返回的东西。并且您可以像调用实际函数一样调用指向函数的指针，因此也没有什么坏处。

# c++ - 如何在初始化列表中锁定互斥锁？

> ID：16196758
> 
> 赞同：8
> 
> 时间：2013-04-24T15:58:39.353
> 
> 标签：c++, multithreading, c++11

我有一个`ConcurrentQueue`基于用户提供的容器的类，该容器具有这样的构造函数...

```
ConcurrentQueue(const ConcurrentQueue& other) : m_Queue(other.m_Queue) {} 
```

但是，我需要`other`在复制它时锁定它的互斥锁。

**选项1：**

所以我根本不能使用复制构造函数，并且做......

```
ConcurrentQueue(const ConcurrentQueue& other) : m_Queue(other.m_Queue)
{
    std::lock_guard<std::mutex> lock(other.m_Mutex);
    m_Queue = other.m_Queue;
} 
```

但我不能保证复制分配和复制构造是等效的功能。

**选项 2：**

我可以有一个私有方法...

```
std::queue<T, Container> GetQueue() const
{
    std::lock_guard<std::mutex> lock(other.m_Mutex);
    return m_Queue;
} 
```

然后在构造函数中执行此操作...

```
ConcurrentQueue(const ConcurrentQueue& other) : m_Queue(other.GetQueue()) {} 
```

但这可能（取决于优化）使用一次 m_Queue 的复制构造函数，它是一次移动构造函数。而且我也不能保证一个副本和一个招式就等于只是一个副本。此外，用户提供的容器可能很奇怪，可以复制但不可移动，这也会导致这种方法出现问题。

那么，我该怎么办？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-24T16:15:16.793

```
ConcurrrentQueue::ConcurrrentQueue(
        ConcurrrentQueue const& other )
    : m_Queue( (std::lock_guard<std::mutex>( other.m_Mutex ),
               other.m_Queue ) )
{
} 
```

应该管用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T16:17:14.157

锁定，创建内容的副本，然后与成员交换。至少这是最简单和恕我直言最干净的方式。另一种不太干净的方法是使用逗号运算符：`(a, b)`yield `b`，但如果`a`是作用域锁，则临时锁将一直存在到下一个序列点，即直到您用于`b`初始化本地副本。

也就是说，有两件事需要考虑：

*   无论如何，复制可能不是一个聪明的主意，如果您禁用复制，您的设计也可以正常工作。
*   如果您可以访问队列并且可以读取它以进行复制，这是否意味着互斥锁必须已经被锁定？如果不是，您如何确定您真的要复制队列？我不怀疑是否有证明设计合理的答案，但这很不寻常。

# java - JSTL Scriptlet 到 java 类

> ID：16196762
> 
> 赞同：0
> 
> 时间：2013-04-24T15:58:46.990
> 
> 标签：java, performance, jstl, el

我对 Java 还很陌生，所以请耐心等待。我有一个放入 JSTL 标记的 scriptlet。我正在尝试取消我的 scriptlet 并将它们放在一个单独的类中。除了我真的被这个难住了。我有一个非常基本的 Java 方法：

```
static final String default = "Enter a message";

String subDate(String out){
    final String year = "" + Calendar.getInstance().get(Calendar.YEAR);
    return out.replaceAll("%CURRYEAR%", year);
} 
```

在我的 JSTL 中，我将其称为如下

```
<c:out value="<%= subDate(msg) %>" default="<%= subDate(default) %>" 
```

当我将它转换为我的 Java 类时，这就是我所拥有的。但我根本什么也得不到。我也很困惑如何传递多个参数，就像我在 JSTL 中所做的那样。

```
public String getsubDate(String in){        
    return in.replaceAll("%CURRYEAR%", YEAR) + getMsg();            
} 
```

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T16:53:33.670

由于听起来您正在`msg`使用 servlet 提出请求，因此`request.setAttribute`您可以在 servlet 中获取正确的年份，替换所有出现的正确年份， `%CURRYEAR%`然后将正确的消息放在请求中：

```
String year = "" + Calendar.getInstance().get(Calendar.YEAR);
request.setAttribute("msg", msg.replaceAll("%CURRYEAR%", year)); 
```

然后在您的页面上执行以下操作：

```
<c:out value="${msg}" /> 
```

# javascript - 在构建期间打印出 Grunt.js 配置

> ID：16196763
> 
> 赞同：5
> 
> 时间：2013-04-24T15:58:47.433
> 
> 标签：javascript, build, coffeescript, gruntjs

我想真正了解 Grunt 是如何工作的，并能够在以后对其进行调试。如何打印出 Grunt 在给定时间的所有配置？我希望看到 .initConfig、包文件和任何任务级别配置的合并。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-24T15:58:47.433

您可以通过设置如下 grunt 任务来打印 grunt 配置：

```
grunt.registerTask('printConfig', function() {
  grunt.log.writeln(JSON.stringify(grunt.config(), null, 2));
}); 
```

# jquery - 保留滚动div的阅读位置

> ID：16196765
> 
> 赞同：0
> 
> 时间：2013-04-24T15:58:49.203
> 
> 标签：jquery, html, css, scroll, scrollbar

我正在构建一个列，其中将动态内容附加到列的顶部，类似于 TweetDeck 的样式。

现在，如果我将 div 向下滚动一半以查看内容，添加到顶部的内容会导致 div 从滚动位置跳转，如果将大量内容添加到柱子。

有谁知道 CSS 或 jQuery 保持用户所在位置的方法，但仍允许将内容添加到顶部？

抱歉，我无法提供 JS Fiddle，数据位于开发环境中

*更新 - 示例 HTML 标记*

```
<div class="results" id="results9016">
  <article>
    <img alt="Dave" src="normal.jpg">
    <div class="data">
      <p class="user"><a target="_blank" href="#">dave</a></p>
      <p class="message">Message</p><p class="datetime">24 Apr 17:16:23</p></div>
  </article>
  <article>
    <img alt="Dave" src="normal.jpg">
    <div class="data">
      <p class="user"><a target="_blank" href="#">dave</a></p>
      <p class="message">Message</p><p class="datetime">24 Apr 17:16:23</p></div>
  </article>
  <article>
    <img alt="Dave" src="normal.jpg">
    <div class="data">
      <p class="user"><a target="_blank" href="#">dave</a></p>
      <p class="message">Message</p><p class="datetime">24 Apr 17:16:23</p></div>
  </article>
</div> 
```

每个文章元素都使用 jQuery .prepend(); 添加。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T16:33:06.710

尝试在 prepend 之前缓存文档的滚动位置并在之后立即重置它：

```
var addTweet = function() {
    var scrollPosition = $(document).scrollTop();
    $('#results9016').prepend($newTweet);
    $('html, body').scrollTop(scrollPosition);
} 
```

[这是它在行动中的一个小技巧。](http://jsfiddle.net/27XkU/)注意：根据您的代码，您可能希望滚动容器而不是整个文档。

# java - 使用字符串来引用我需要设置文本的标签？

> ID：16196768
> 
> 赞同：0
> 
> 时间：2013-04-24T15:58:50.243
> 
> 标签：java

所以现在我有一个循环来根据选择的数量为玩家分配名称，并且需要以某种方式构造一个字符串来引用看起来像“lblplayer1”-“lblplayer6”的标签，我的代码如下所示：

```
for (int i=1; i <= noofplayers; i++)
{
    String hello = "lblplayer" + i;
    hello?.setText("hi");
} 
```

最后一行需要与 lblplayer (1-6) 的变量名称相当，最后一个数字中没有硬编码。基本上我需要以某种方式自动能够使用数组索引以某种方式设置每个标签的文本，但不知道如何以任何方式做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T15:59:51.117

您应该创建一个 s 数组`Label`：

```
playerLabels[i].setText("hi"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T16:25:14.123

对象数组：

```
ObjectPlayer lblplayer[] = new ObjectPlayer[noofplayers];
for (int i=0; i <= noofplayers; i++)
{
    lblplayer[i].setText("hi");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T16:18:01.180

在这种情况下，动态命名不是最好的方法。（尽管它可能通过反射来实现）。

我建议你维护一个哈希图。这样您就可以始终根据名称查找对象。

或者，如果名称基于数字，（label1、label2 等），您可以使用 arraylist，以便您始终可以根据索引查找对象。

例如，第一种方法可以这样使用：

```
public static HashMap<String, Label> map = new HashMap<>();
public void createPlayer(int playerindex){
    Label label = new Label();
    map.put("player"+index, label);
}

public Label getPlayerLabel(int playerindex){
    return map.get("player"+index)  
} 
```

**Ps：**这不是确切的代码，只是虚拟表示

# objective-c - 一天中的 NSNotication

> ID：16196773
> 
> 赞同：0
> 
> 时间：2013-04-24T15:59:08.940
> 
> 标签：objective-c, macos, nstimer, nsnotificationcenter

我需要我的应用程序在一天中的某个时间运行方法，我认为最好的方法是设置一个通知它何时到达那个时间。我以前使用过 NSNoticationCenter，但我不确定如何在一天中的某个时间设置它。

编辑：我将使用 NSTimer 以不同的方式进行处理。这是我的代码

```
 NSCalendar* myCalendar = [NSCalendar currentCalendar];
NSDateComponents* components = [myCalendar components:NSYearCalendarUnit|NSMonthCalendarUnit|NSDayCalendarUnit
                                             fromDate:[NSDate date]];
[components setHour: 10];
[components setMinute: 5];
[components setSecond: 0];
NSDate *date = [myCalendar dateFromComponents:components];

NSTimer *t = [[NSTimer alloc] initWithFireDate:date
                                      interval:0.0
                                        target:self
                                      selector:@selector(fired:)
                                      userInfo:nil
                                       repeats:YES];
[[NSRunLoop mainRunLoop] addTimer:t forMode:NSDefaultRunLoopMode]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T04:19:09.297

使用[NSTimer](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Timers/Articles/usingTimers.html#//apple_ref/doc/uid/20000807-CJBJCBDE)类方法。创建计时器对象并相应地设置触发日期。在计时器回调方法中实现方法来发布所需的通知。

另一种方法是使用[performSelector:withObject:afterDelay:](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSObject_Class/Reference/Reference.html#//apple_ref/occ/instm/NSObject/performSelector:withObject:afterDelay:)。在选择器方法中发布需要通知。

# c++ - 三角法线表面检测

> ID：16196774
> 
> 赞同：3
> 
> 时间：2013-04-24T15:59:09.980
> 
> 标签：c++, c, opengl, graphics, bezier

所以我目前有一个可以动态更改的三角形网格（用贝塞尔曲线制成）。我面临的问题是试图根据相机所在的位置确定要实际渲染的三角形。相机总是看向原点（0,0,0），所以我找到了每个三角形的法线，并用我的相机矢量取它的点积。然后，根据结果，确定三角形是否应该“可见”。

以下是我用于计算的代码：

```
void bezier_plane()
{
    for (int i = 0; i < 20; i++) {
        for (int j = 0; j < 20; j++) {
            grid[i][j].x = 0;
            grid[i][j].y = 0;
            grid[i][j].z = 0;
        }
    }
    //Creates the grid using bezier calculation
    CalcBezier();
    for (int i = 0; i < 19; i++) {
        for (int j = 0; j < 19; j++) {
            Vector p1, p2, p3, normal;
            p1.x = grid[i+1][j+1].x - grid[i][j].x; p1.y = grid[i+1][j+1].y - grid[i][j].y; p1.z = grid[i+1][j+1].z - grid[i][j].z;
            p2.x = grid[i+1][j].x - grid[i][j].x;   p1.y = grid[i+1][j].y - grid[i][j].y; p1.z = grid[i+1][j].z - grid[i][j].z;

            normal = CalcNormal(p2, p1);
            double first = dotproduct(normal, Camera);

            p3.x = grid[i][j+1].x - grid[i][j].x; p3.y = grid[i][j+1].y - grid[i][j].y; p3.z = grid[i][j+1].z - grid[i][j].z;

            normal = CalcNormal(p1, p3);
            double second = dotproduct(normal, Camera);

            if (first < 0 && second < 0) {
                glPolygonMode(GL_FRONT_AND_BACK, GL_LINE);
                glColor3f(0, 1, 0);
                glBegin(GL_TRIANGLE_STRIP);
                    glVertex3f(grid[i][j].x, grid[i][j].y, grid[i][j].z);
                    glVertex3f(grid[i][j+1].x, grid[i][j+1].y, grid[i][j+1].z);
                    glVertex3f(grid[i+1][j].x, grid[i+1][j].y, grid[i+1][j].z);
                    glVertex3f(grid[i+1][j+1].x, grid[i+1][j+1].y, grid[i+1][j+1].z);
                glEnd();
            } else if (first < 0 && second > 0) {
                glPolygonMode(GL_FRONT_AND_BACK, GL_LINE);
                glColor3f(0, 1, 0);
                glBegin(GL_TRIANGLE_STRIP);
                    glVertex3f(grid[i][j].x, grid[i][j].y, grid[i][j].z);
                    glVertex3f(grid[i+1][j].x, grid[i+1][j].y, grid[i+1][j].z);
                    glVertex3f(grid[i+1][j+1].x, grid[i+1][j+1].y, grid[i+1][j+1].z);
                glEnd();
            } else if (first > 0 && second < 0) {
                glPolygonMode(GL_FRONT_AND_BACK, GL_LINE);
                glColor3f(0, 1, 0);
                glBegin(GL_TRIANGLE_STRIP);
                    glVertex3f(grid[i][j].x, grid[i][j].y, grid[i][j].z);
                    glVertex3f(grid[i][j+1].x, grid[i][j+1].y, grid[i][j+1].z);
                    glVertex3f(grid[i+1][j+1].x, grid[i+1][j+1].y, grid[i+1][j+1].z);
                glEnd();
            }
        }
    }
} 
```

这是 CalcNormal：

```
 Vector CalcNormal(Vector p1, Vector p2)
{
    Vector normal;
    normal.x = (p1.y * p2.z) - (p1.z * p2.y);
    normal.y = (p1.z * p2.x) - (p1.x * p2.z);
    normal.z = (p1.x * p2\. y) - (p1.y * p2.x);
    return normal;
}

double dotproduct(Vector normal, Vector Camera)
{
    return (normal.x * Camera.x + normal.y * Camera.y + normal.z + Camera.z);
} 
```

现在，我的代码给出了这个结果。不应显示红色圈出的部分（我相信，后面的三角形）。 ![结果](https://i.stack.imgur.com/IbBAW.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T16:22:23.267

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T16:08:59.687

“正常是一个全局变量” - 这可能已经是你的问题了吗？这看起来是我能想到的最糟糕的全局数据应用！相反，调用这个东西`crossproduct`并返回一个向量听起来是个好主意，不是吗？此外，`dotproduct`应该以两个向量作为参数。

也就是说，你的方法是合理的。如果三角形的角始终具有相同的方向，则两条边的叉积将为您提供法线。此外，如果法线和视图之间的角度小于 90 度，则它看起来远离视图并且应该不可见。因此，问题必须出在您的实现中，并且使用无论如何都可以存储在 CPU 寄存器中的全局状态是您应该解决的第一件事。

编辑：您可以在这里使用运算符重载对读者有利：

```
class Vector
{
   Vector(){}
   Vector(scalar x0, scalar y0, scalar z0): x(x0), y(y0), z(z0){}
   float x, y, z;
};

Vector operator-(Vector const& v1, Vector const& v2)
{
   return Vector(v1.x - v2.x, v1.y - v2.y, v1.z - v2.z);
} 
```

然后，像这样启动循环体：

```
Vector const point1 = grid[i, j];
Vector const point2 = grid[i + 1, j];
Vector const point3 = grid[i, j + 1];
Vector const point4 = grid[i + 1, j + 1]; 
```

这些将很容易被编译器优化出来，同时它们简化了调试并提高了可读性。另请注意，它们是常量，这使编译器验证您不会意外更改它们。然后，计算两个三角形的两条法线：

```
Vector const norm1 = crossproduct(point2 - point1, point3 - point1);
Vector const norm2 = crossproduct(point4 - point2, point4 - point3); 
```

然后，您可以检查 dotproduct 的可见性：

```
bool const visible1 = dotproduct(norm1, Camera) > 0;
bool const visible2 = dotproduct(norm2, Camera) > 0; 
```

最后，您可以重载`glVertex3f()`a `Vector`，但我会远离重载其他库的函数。

# java - 传入 bean 变量以打印

> ID：16196776
> 
> 赞同：0
> 
> 时间：2013-04-24T15:59:13.927
> 
> 标签：java, html, jsf-2, javabeans

我所拥有的是`<h:outputLabel value="#{userInfo.totalExp}" />`

下面是我想要的输出

```
Total - 10 Years 2 Months
U.A.E - 5 Years 0 Months
India - 5 Years 2 Months 
```

对于 bean 中的这个，我将数据传递为

```
totalExp = "Total - 10 Years 2 Months<br />U.A.E - 5 Years 0 Months<br />India - 5 Years 2 Months" 
```

但是我看到输出`Total - 10 Years 2 Months<br />U.A.E - 5 Years 0 Months<br />India - 5 Years 2 Months`而不是上面。这会在同一行而不是下一行输出阿联酋。

知道如何在下一行获取数据吗？

* * *

## 编辑 1

当我使用`\n`而不是`<br />`，我仍然在一行中获取数据作为``。

当我查看页面的来源时，我看到它如下。

```
<label dir="LTR">
Total - 10 years &amp; 7 months 
Ok OK
Teset</label> 
```

表示输入存在...这是否意味着`label`不允许输入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T16:37:31.183

默认情况下，JSF 会转义[XML 实体](http://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references#Predefined_entities_in_XML)，例如`<`和`>`进入`&lt;`，`&gt;`以防止无知的初学者引入[XSS 攻击漏洞。](https://stackoverflow.com/questions/7722159/csrf-xss-and-sql-injection-attack-prevention-in-jsf)

`escape`您可以使用该属性在每个组件的基础上关闭 XML 转义。

```
<h:outputLabel ... escape="false" /> 
```

相同的属性也存在于`<h:outputText>`和其他一些中。

实际上，我相信您目前正在滥用`<h:outputLabel>`用于错误的目的。它生成一个[HTML`<label>`元素](http://www.htmldog.com/reference/htmltags/label/)，该元素应该通过`for`属性与 HTML 输入元素相关联。但是您那里的文本似乎并不代表有效的标签，而且该`for`属性也不存在。而是`<h:outputText>`改为使用。

# php - 可变 3rd 方 paypal 购物车

> ID：16196788
> 
> 赞同：1
> 
> 时间：2013-04-24T15:59:46.617
> 
> 标签：php, paypal

只需使用您自己的购物车放置一个灵活的 Paypal 结帐按钮即可。

将每个产品和数量发送到贝宝付款页面的一种。我见过多种产品的代码，但这些代码并不灵活。例如支付 2 件独特的物品。但是如果用户购买了 X 个不同的产品呢？当只允许固定数量时。

参考[本页](https://stackoverflow.com/questions/3308898/paying-for-multiple-items-at-once-via-paypal)

这可以在PHP中做到吗？如果是这样，我正在考虑一些简单的东西，比如以按钮形式列出每个产品的数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T17:23:54.757

这将是可能的。但是，您可能需要一些逻辑来检查他们想要订购的数量，并根据您的数据库检查它以查看您手头的数量。如果他们试图订购的数量超过您手头的数量，您会给他们一个弹出窗口，告诉他们您手头只有 x 个数量，并且他们不能订购超过 x 个数量。然后，您只需填写他们订购的详细信息和数量，并使用类似于您提供的示例的购物车上传方法将其传递。

# ios - GameCenter 排行榜 - 为什么我只拿回自己的分数？

> ID：16196792
> 
> 赞同：3
> 
> 时间：2013-04-24T15:59:51.740
> 
> 标签：ios, game-center, gamekit, leaderboard

试图测试排行榜。我这样做：

```
GKLeaderboard *leaderboardRequest = [[GKLeaderboard alloc] init];
    if (leaderboardRequest != nil)
    {
        leaderboardRequest.playerScope = GKLeaderboardPlayerScopeGlobal;
        leaderboardRequest.timeScope = GKLeaderboardTimeScopeAllTime;
        leaderboardRequest.category = self.gameData.leaderboardId;
        leaderboardRequest.range = NSMakeRange(1,10);
        [leaderboardRequest loadScoresWithCompletionHandler: ^(NSArray *scores, NSError *error) {
            if (error != nil)
            {
                // Handle the error.
            }
            if (scores != nil)
            {
                for (GKScore *score in scores) {
                    NSLog(@"score retrieved: %lld", score.value);
                }
            }
        }];
    } 
```

我和用户 A 在一台设备上玩游戏，得到 137 分。当我查询排行榜时，我得到一个 137 分。我和用户 B 在另一台设备上玩，得分 243，当我查询排行榜时只得到 243 分。

那么为什么我只从登录的用户那里得到分数呢？显然我需要每个人的分数来创建自定义排行榜。我的理解是 GKLeaderboardPlayerScopeGlobal 应该检索所有分数，而不仅仅是本地用户的分数。

# c# - 使用 GetManifestResourceStream 读取资源

> ID：16196799
> 
> 赞同：3
> 
> 时间：2013-04-24T16:00:19.393
> 
> 标签：c#

我正在尝试使用从资源中读取二进制文件

```
Stream input = Assembly.GetExecutingAssembly().GetManifestResourceStream(resourceName); 
```

其中 resourceName 是一个字符串，包含资源的文件名。我得到了一个空对象。我尝试了完全限定的路径（例如“myAssemblyName.Properties.Resources.”+ resourceName），但这也不起作用。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-09-22T13:01:32.623

确保您的文件包含在项目中。确保文件的“构建操作”设置为“嵌入式资源”。检查名称是什么

```
Assembly.GetExecutingAssembly().GetManifestResourceNames() 
```

加载资源流

```
Assembly.GetExecutingAssembly().GetManifestResourceStream() 
```

# django - 我应该如何将资源注入 Django 视图？

> ID：16196803
> 
> 赞同：0
> 
> 时间：2013-04-24T16:00:36.973
> 
> 标签：django, django-views

我希望从 Django 视图的上下文中放置 RPC 调用。这要求视图具有对客户端存根的引用。

我知道我可以这样装饰视图：

```
@RpcAware
def handle(request, rpc):
  # perform calls on rpc, etc.

def RpcAware(func):
  def wrapper(*args, **kwargs):
     return func(*args, get_initialized_rpc(), **kwargs)
  return wrapper 
```

这感觉就像它可能会妨碍 url 参数。我意识到我可以使用基于类的视图并将资源存储在视图实例中。

有没有更好的方法呢？自定义中间件有帮助吗？

# java - 关注点分离 - 如何使用此代码实现

> ID：16196804
> 
> 赞同：2
> 
> 时间：2013-04-24T16:00:38.450
> 
> 标签：java, design-patterns, decoupling

我有以下场景（这适合更大的 mvc 框架）

有一个大型 xml 配置，它定义了可用于系统特定功能的模型类型：

```
<object_type1_config>
    <type_id>1</type_id>
    <type_model>amazinTypeModel</type_model>
    <config_value1>blah</config_value1>
    <config_value2>blah blah</config_value2>
</object_type1_config> 
```

在控制器中，基于某些请求参数，我可以决定在运行时使用哪个模型并确定要渲染哪个模板等。

另一个复杂性是，如果该模型类型的配置中不存在某些值，则可以使用一组默认值。这组默认值将在所有可能的对象类型中用作默认值。

问题是控制器充满了用于解析此配置值以获取参数然后根据这些参数做出决策的逻辑。

所以将它移到另一个类是有意义的，但是在这里使用的最佳设计模式是什么，因为控制器实际上仍然必须解析配置才能首先获取模型类型。然后它必须实例化模型类型并查询它的值。

我在这里看不到任何解耦的方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T16:07:39.187

你可以做这样的事情

```
class Controller {
    Parser parser;

    Model getModel() {
        return parser.parseModel(userInput);
    }

    Template getTemplate() {
        return parser.parseTemplate(userInput);
    }
} 
```

依此类推，解析器已经引用了默认配置值（在解析器中硬编码，例如作为属性文件名，或传递给其构造函数）。您可以通过构造函数/设置器设置解析器，或者如果您使用的是 Spring，您可以自动装配它。

# c# - 列表框不跟踪用户输入

> ID：16196805
> 
> 赞同：0
> 
> 时间：2013-04-24T16:00:45.130
> 
> 标签：c#, wpf, listbox, code-behind

我有一个`ListBox`显示动态数量的`TextBox`es。用户将在这些框中输入文本。单击提交按钮时，我需要能够访问用户输入的文本，应该是 at `ListBox.Items`，如下所示：

```
 //Called on Submit button click
    private void SaveAndSubmit(object sender, ExecutedRoutedEventArgs e)
    {
        var bounds = MyListBox.Items;
    } 
```

但是`MyListBox.Items`在我最初设置后并没有改变`ItemsSource`，这里：

```
 //Field declaration
    //Bounds is containing a group of strings that represent the boundaries
    //for a contour plot. The min/max values are stored at the front and back
    //of the group. However, there can be any number of dividers in between.
    public ObservableCollection<string> Bounds { get; set; }

    ...
    //Initialize Bounds in the constructor

    //Called when the selected item for DVList (an unrelated ListBox) is changed
    private void DVSelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        var selectedDV = DVList.SelectedItem as DVWrapper;
        if (selectedDV != null)
        {
            //Setting min/max
            Bounds[0] = selectedDV.MinValue;
            Bounds[Bounds.Count - 1] = selectedDV.MaxValue;

            MyListBox.ItemsSource = Bounds;
        }
    } 
```

我的 XAML 看起来像这样：

```
<Window.Resources>
    <Style x:Key="BoundsStyle" TargetType="{x:Type ListBoxItem}">
        <Setter Property="ContentTemplate">
            <Setter.Value>
                <DataTemplate>
                    <Grid>
                        ...
                        <TextBox/>
                    </Grid>
                </DataTemplate>
            </Setter.Value>
        </Setter>
        <Setter Property="Focusable" Value="False"/>
    </Style>
</Window.Resources>

...

                <ListBox Name="MyListBox"
                         ItemContainerStyle="{StaticResource BoundsStyle}"/> 
```

因此，当`SaveAndSubmit`被调用时，`bounds`最终将成为我最初将其设置为 in 的内容`DVSelectionChanged`。换句话说，列表框不会根据用户输入到列表框中包含的文本框中的内容进行更新。如何获得更新`ListBoxItem`的 s？我认为我的问题与[此](https://stackoverflow.com/questions/1961875/how-to-access-listbox-dynamically-created-items-properties-from-code-behind)类似，但目前对我不起作用。

当我在调试器中单步执行时，我可以获得单独`ListBoxItem`的 s. 但是，他们的内容是空的。我现在正在调查。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T17:27:32.083

您需要绑定文本框的内容。

`<TextBox/>`需要更改为`<TextBox Content="{Binding}"/>`

但是遵循 MVVM 否则很难找到这些错误。

# python - pgdb 能防止注入攻击吗？

> ID：16196806
> 
> 赞同：1
> 
> 时间：2013-04-24T16:00:48.620
> 
> 标签：python, security, code-injection, psql, pgdb

我有一段这样的代码：

```
db = pgdb.connect(
    database=connection['database'],
    user=connection['user'],
    host=connection['host'])
cursor = db.cursor()
# ask database
query = '''
    SELECT a, b, c
    FROM table
    WHERE a ILIKE %s;'''
try:
    cursor.execute(query, userInput)
except pgdb.Error, error:
    error = str(error)
    print json.dumps({
        'errorMessage': 'ERROR: %s' % error
    }) 
```

我在[另一个论坛](http://forums.devshed.com/python-programming-11/sanitizing-sql-in-python-566229.html)上读到，像 MySQLdb 这样的 python 模块会进行转义以防止注入攻击。我还查看了[pgdb 上的文档，](http://www.pygresql.org/pgdb.html)但它很薄。最后，我尝试使用自己的测试数据库进行自己的注入攻击，但我不确定我的测试是否足够。什么是测试这个的好方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T18:17:48.030

当您使用将所有变量输入保存在参数列表中的方法时，所有 DB-API 模块都可以防止 SQL 注入（[`execute`在](http://www.python.org/dev/peps/pep-0249/#id14)您`userInput`的示例中，这是安全的）。

事实证明，它这样做`pgdb`的方式确实是通过转义每个参数以获取 SQL 文字值，然后再将它们注入 SQL 查询中的占位符。不一定是这种情况：一些数据库连接器可以将参数作为单独的结构而不是查询字符串的一部分传递给它们的服务器，这样做可能会带来性能优势。最终，尽管您不应该真正关心正在使用什么方法 - 您将参数单独传递给 DB-API 连接器，并且它负责以安全的方式使其工作。

当然，如果您开始自己将变量放入查询中（例如`"WHERE a ILIKE '%s'" % userInput`），`pgdb`或者任何其他连接器都无法阻止您伤害自己。

# php - 空数据库行上的未定义变量

> ID：16196815
> 
> 赞同：0
> 
> 时间：2013-04-24T16:01:01.803
> 
> 标签：php, pdo

当我的数据库行为空时，我收到了这个烦人的错误，但是在我向其中添加一些值之前，这些行应该是空的。任何线索出了什么问题？我试图通过在变量之前添加 @ 来禁用该问题，但是当它们处于 foreach 循环中时这不起作用。

如果我将数据添加到行中，问题就会停止......

有任何想法吗 ？

一些代码。

```
$tweets = new Tweets();     
    foreach($tweets->fetch_tweets($_GET['uid']) as $tweet){
    @$tweet_name = $tweet['username'];
    @$tweet_date= $tweet['date'];
    @$tweet_email= $tweet['email'];

    }
function fetch_tweets($uid){ /*Mine and users   I follow*/

$uid = (int)$uid;
    $query = $this->link->query("SELECT user.id,
  user.email, 
    user.username, 
  tweets.message, 
    tweets.date, 
  userdetails.profile_img, 
    userdetails.firstname, 
  userdetails.lastname, 
    following.id, following.user_id, 
  following.follow_id
    FROM user
    LEFT JOIN following ON user.id = following.user_id 
    JOIN userdetails ON user.id = userdetails.user_id
    JOIN tweets ON userdetails.user_id = tweets.user_id
    WHERE user.id='{$uid}'  OR 
                user.id IN (SELECT follow_id 
                            FROM following 
                            WHERE following.user_id = '{$uid}' )  GROUP BY tweets.date ORDER BY tweets.date DESC "
);
$tweet = array();
while(($row = $query->fetch(PDO::FETCH_ASSOC)) !==FALSE) { 
$tweet[] = $row;
} echo $query->rowCount();
return $tweet; 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T16:06:49.043

在尝试使用它之前，您需要检查返回的数组是否为空。

```
$tweets = new Tweets();
$res = $tweets->fetch_tweets($_GET['uid']);
if( empty($res) ) {
    echo "no tweets.";
} else {
    foreach($res as $tweet){
        $tweet_name = $tweet['username'];
        $tweet_date = $tweet['date'];
        $tweet_email= $tweet['email'];
    }
} 
```

此外，您应该始终在调用函数*之前*声明它们。与大多数其他语言一样，这在 PHP 中不是必需的，但它使您的代码更易于阅读。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T16:02:45.740

只需在获取行之前运行代码以检查行数是否为 0

# javascript - jQuery点击事件立即触发

> ID：16196818
> 
> 赞同：0
> 
> 时间：2013-04-24T16:01:09.123
> 
> 标签：javascript, jquery, onclick, closures

我正在开发的网络应用程序中有以下代码：

```
var bgcolor = '';
var row = 0;
for(var i = 0; i < result.data.length; i++)
{
    // Set alternating background colors
    bgcolor = ( i%2 == 0) ? ' style=\'background-color: white;\'': ' style=\'background-color: whitesmoke;\'';
    $( "div.row" ).append("\
        <div class='search_container'"+bgcolor+">\
            <div class='search_result_client_heading'>"+result.data[i]['client_name']+"</div>\
            <div class='search_result_industry_heading'>"+result.data[i]['industry_name']+"</div>\
            <div class='search_result_yield_heading'>Saved: "+result.data[i]['actual_impact']+" "+result.data[i]['impact_type_name']+" / "+formatCurrency(String(result.data[i]['actual_savings']))+"</div>\
            <div class='search_result_problem_heading'>"+nl2br( result.data[i]['problem'] )+"</div>\
            <div class='detail_button_holder'>\
                <a class='btn search_result_button' id='view_results_"+result.data[i]['record_id']+"' href='#'>View details &raquo;</a>\
            </div>\
        </div>");

    $( "#view_results_"+result.data[i]['record_id'] ).click( show_result_dialog(i, result) );
} 
```

然后是一个单独的命名函数，它只是用不同的值填充创建的 div，具体取决于单击的按钮：

```
function show_result_dialog(row, result)
{
    $( "#search-result-dialog-client" ).empty().append("<div class='search_result_label'>Client</div><div class='search_result_value'>"+result.data[row]['client_name']+"</div>");
    $( "#search-result-dialog-industry" ).empty().append("<div class='search_result_label'>Industry</div><div class='search_result_value'>"+result.data[row]['industry_name']+"</div>");
    $( "#search-result-dialog-contact" ).empty().append("<div class='search_result_label'>Contact</div><div class='search_result_value'>"+result.data[row]['contact_name']+"</div>");
    $( "#search-result-dialog-journey" ).empty().append("<div class='search_result_label'>Journey</div><div class='search_result_value'>"+result.data[row]['journey_name']+"</div>");
    $( "#search-result-dialog-focus_area" ).empty().append("<div class='search_result_label'>Focus Area</div><div class='search_result_value'>"+result.data[row]['focus_area']+"</div>");
    $( "#search-result-dialog-problem" ).empty().append("<div class='search_result_label'>Problem</div><div class='search_result_value'>"+result.data[row]['problem']+"</div>");
    $( "#search-result-dialog-approach" ).empty().append("<div class='search_result_label'>Approach</div><div class='search_result_value'>"+result.data[row]['approach']+"</div>");
    $( "#search-result-dialog-tactics" ).empty().append("<div class='search_result_label'>Tactics</div><div class='search_result_value'>"+result.data[row]['tactics']+"</div>");
    $( "#search-result-dialog-delivery_date" ).empty().append("<div class='search_result_label'>Delivery Date</div><div class='search_result_value'>"+result.data[row]['delivery_date']+"</div>");
    $( "#search-result-dialog-impact_type" ).empty().append("<div class='search_result_label'>Impact Type</div><div class='search_result_value'>"+result.data[row]['impact_type_name']+"</div>");
    $( "#search-result-dialog-estimated_impact" ).empty().append("<div class='search_result_label'>Estimated Impact</div><div class='search_result_value'>"+result.data[row]['estimated_impact']+" "+result.data[row]['impact_type_name']+"</div>");
    $( "#search-result-dialog-actual_impact" ).empty().append("<div class='search_result_label'>Actual Impact</div><div class='search_result_value'>"+result.data[row]['actual_impact']+" "+result.data[row]['impact_type_name']+"</div>");
    $( "#search-result-dialog-estimated_savings" ).empty().append("<div class='search_result_label'>Estimated Savings</div><div class='search_result_value'>"+formatCurrency(String(result.data[row]['estimated_savings']))+"</div>");
    $( "#search-result-dialog-actual_savings" ).empty().append("<div class='search_result_label'>Actual Savings</div><div class='search_result_value'>"+formatCurrency(String(result.data[row]['actual_savings']))+"</div>");
    $( "#search-result-dialog-nps" ).empty().append("<div class='search_result_label'>NPS</div><div class='search_result_value'>"+result.data[row]['nps']+"</div>");
    $( "#search-result-dialog-keywords" ).empty().append("<div class='search_result_label'>Keywords</div><div class='search_result_value'>"+result.data[row]['keywords']+"</div>");
    $( "#search-result-dialog" ).dialog( "open" );
    return false;
} 
```

代码`result`中是AJAX调用返回的数据数组（这段代码都在success函数中）

我的问题是点击处理程序在页面加载后立即触发。我希望有人能向我解释为什么会这样，如果有办法解决这个问题，因为我需要`i`从循环中传递该函数的值，所以如果我在点击事件中包含一个匿名函数，那么我就有问题关闭，并且总是以最后一个 i 值结束，因此每个按钮都会打开相同的数据。我已经尝试了各种技术但没有成功，包括在主匿名函数中返回一个匿名函数，反之亦然。我在谷歌上花了两天时间试图找到解决方案，但到目前为止没有任何效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T16:05:41.883

你在这里自己调用函数调用函数和传递它的引用`.click( show_result_dialog(i, result) );` 是有区别的。`show_result_dialog()``show_result_dialog`

您需要将参数作为事件数据传递：

```
.click( {index: i, result: result}, show_result_dialog ); 
```

或者简单地将其包装在一个匿名函数中：

```
.click( function() { return show_result_dialog(i, result) }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T16:04:54.817

你至少有两个我可以看到的问题。

第一个，正如其他海报所指出的那样，不是`function() { ... }`围绕对`show_result_dialog()`.

第二个，是使用`.click`而不是`.on`. 前一种方法（令人困惑地）用于*注册*和*触发*点击处理程序，而后者只能*注册*。如果你使用过`.on`这个问题可能会更容易看到。

第三是您试图在闭包内使用循环变量，这永远不会起作用。 `i`将具有循环结束时的最后一个值，而不是调用时的值`.click`。

对于后一个问题，最简单的解决方法是使用`data`参数`.on()`来传递所需的参数：

```
$("#view_results_" + result.data[i]['record_id'] ).on('click', {
   row: i, result: result
}, show_result_dialog);

function show_result_dialog(ev) {
    var row = ev.data.row;
    var result = ev.data.result;
    ...
} 
```

存在其他（更有效的）方法来解决循环问题，但这将起作用并且很容易理解。

# c# - 从多个后台线程同步 wpf dispatcher.invoke

> ID：16196819
> 
> 赞同：4
> 
> 时间：2013-04-24T16:01:09.740
> 
> 标签：c#, wpf, invoke, dispatcher, synchronize

如果从多个后台线程访问，是否需要同步对 Dispatcher.Invoke 的调用？

我知道 Dispatcher.BeginInvoke 自动同步对 silverlight 应用程序的调用（[http://msdn.microsoft.com/en-us/library/z8chs7ft(v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/z8chs7ft(v=vs.95).aspx)）

对于 wpf 应用程序也是如此，还是我应该取消注释下面的锁定语句。

```
 public MainWindow()
    {
        InitializeComponent();

        Dispatcher.BeginInvoke(new Action(() =>
            {
                const int MAX_NR_THREADS = 1000;
                for (int i = 0; i < MAX_NR_THREADS; ++i)
                {
                    int j = i+1;
                    new Thread(()=>ThreadMethod(j)).Start();
                }
            }));
    }

    private void ThreadMethod(int threadId)
    {
        const int ONE_MILLION = 1000000;
        for (int i = 0; i < ONE_MILLION/threadId; ++i)
        {            

            //lock(lockObj)
            //{                   
                this.Dispatcher.Invoke(new Action(() =>
                    {
                        int sum = 0;
                        for (int j = 0; j < ONE_MILLION/10000; ++j)
                        {
                            sum += j;
                        }
                        int a = sum;
                        concurrentQueue.Enqueue(threadId*ONE_MILLION);                    
                    }));                    
            //}                
        }
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T16:02:28.180

无需同步这些调用。 `Dispatcher.Invoke`已经有效地充当了您的呼叫队列，并且不需要同步。

# foreach - 期望脚本中的foreach循环不接受变量

> ID：16196822
> 
> 赞同：1
> 
> 时间：2013-04-24T16:01:12.217
> 
> 标签：foreach, tcl, expect

```
#!/bin/bash
expect << EOF
exp_internal 1

spawn ssh nbhambha@10.118.137.78
expect "ssword:"
send "********\r"
sleep 3
set list [open list1 r]

foreach line \$list 
{
   expect " $"
   send "seeisso \$list | grep -E -i ' os |proddropdown|hostname'"
   send "\r"
   sleep 5
   expect -re " $"
   set fid [open out1.txt a]
   puts \$fid \$expect_out(buffer)
}
close $fid

EOF 
```

======

清单 1 包含：

APSE0112

ETLLT0000

==============

脚本的结果：

```
expect: does " " (spawn_id exp6) match glob pattern " $"? yes
expect: set expect_out(0,string) " "
expect: set expect_out(spawn_id) "exp6"
expect: set expect_out(buffer) " "
send: sending "seeisso file7 | grep -E -i ' os |proddropdown|hostname'" to { exp6 }
send: sending "\r" to { exp6 }

expect: does "" (spawn_id exp6) match regular expression " $"? no

expect: does "\r\n" (spawn_id exp6) match regular expression " $"? no
seeisso file7 | grep -E -i ' os |proddropdown|hostname'

expect: does "\r\nseeisso file7 | grep -E -i ' os |proddropdown|hostname'\r\n" (spawn_id exp6) match regular expression " $"? no 
```

====================

我不知道它从哪里获取 file7 值。当我改变时：

`send "seeisso \$list | grep -E -i ' os |proddropdown|hostname'"`

至

`send "seeisso **$list** | grep -E -i ' os |proddropdown|hostname'"`

它需要一个空值：

```
expect: set expect_out(0,string) " "
expect: set expect_out(spawn_id) "exp6"
expect: set expect_out(buffer) " "

send: sending "seeisso  | grep -E -i ' os |proddropdown|hostname'" to { exp6 }
send: sending "\r" to { exp6 }

expect: does "" (spawn_id exp6) match regular expression " $"? no

expect: does "\r\n" (spawn_id exp6) match regular expression " $"? no
seeisso  | grep -E -i ' os |proddropdown|hostname' 
```

===========

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T16:52:40.310

我看到了几个问题：

1.  `list`在您的情况下，实际上是文件句柄，而不是文件的内容。
2.  你以前有反斜杠`$list`，我不明白原因
3.  你不使用你的`line`变量

这是一个建议，看看它是否有效：

```
set fileHandle [open list1]
while {[gets $fileHandle line] != -1} {
    expect " $"
    send "seeisso $line | grep -E -i ' os |proddropdown|hostname'"
    send "\r"
    # the rest ...
}
close $fileHandle 
```

# vim - 如何过滤视觉选择？

> ID：16196826
> 
> 赞同：5
> 
> 时间：2013-04-24T16:01:20.497
> 
> 标签：vim

假设我们有一些不错的文本：

```
Hello world 
```

我们选择`world`可视模式。然后我们可以使用像这样的闪亮命令过滤视觉选择：

```
:'<,'>!echo foobar 
```

但是，这会将整行`foobar`替换为`world`. 为什么会这样，我们如何才能替换`world`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-24T16:13:04.507

`:!`filter 命令始终适用于整*行（这与原始**vi*一样古老，嵌入以 开头的*Ex 命令*`:`），并且`'<,'>`范围也仅指定*lines*。

您可以使用古老的[vis 插件](http://vim.sourceforge.net/scripts/script.php?script_id=1195)来实现您的结果；它提供了一个`:B`命令，将以下命令限制为可视选择的文本。

```
:'<,'>B !echo foobar 
```

该插件适用于所有类型的 Ex 命令；不过，`:substitute`在选择范围内，您也可以使用特殊`\%V`原子。

# mysql - 本地主机上的站点速度快，服务器上的速度慢

> ID：16196829
> 
> 赞同：0
> 
> 时间：2013-04-24T16:01:27.883
> 
> 标签：mysql, ajax, performance, jquery

希望这个问题不会太宽泛/模糊/笼统。

我在 WordPress 中开发了一个网站，它使用大量的自定义 Ajax 来加载搜索结果。这不是（我相信）特定于 WordPress 或 Ajax（甚至可能不是 PHP，idk！）的问题。

在我运行 WAMP 的基本 HP（8gb 内存，i7 处理器）上开发时，该站点运行得非常棒。我还没有看到一个 Ajax 调用花费超过 2-3 秒。
但是，当该站点在我的 VPS（Hostgator 级别 9）上运行时，它会慢得多 - ajax 调用平均需要 6 秒才能完成，通常在 10-12 秒达到峰值。

我的问题是：**缓慢因素是我的 php 函数（包括一些小到相对较大的 mysql 查询）的故障，还是服务器的故障？**我问的唯一原因是因为本地站点和服务器上的站点之间的加载时间存在令人难以置信的显着差异。

我意识到这可能很模糊；如果需要更多信息，我很乐意提供任何我能提供的东西（除了案例场景，不幸的是，我有一个保密协议，禁止我共享站点 ATM）。

更多信息：

某些 ajax 调用是瞬时的（例如那些只从数据库中提取适量信息的调用）*是*瞬时的。

需要几秒钟的调用是从几个不同的表中提取大量信息的调用（请记住，我在 WordPress 中工作，并使用 WP_Query 类，所以 SQL 查询甚至数据库结构都不是我的自己的 - 使用帖子/帖子元表），从结果中生成 HTML，并将其返回给 JavaScript 以进行附加。该站点的主要搜索结果会根据位置提取结果，但随后还会提取其他一些数据（图像、结果元数据等）。我不可能看到这些类型的过程瞬间发生，尽管它们通常发生在当地密西西比州 1 附近。服务器上的问题是，在本地即时发生的相同调用需要 6-10 秒才能在服务器上开始停止。

到目前为止，我阅读的评论和答案似乎处理了 SQL 查询是在索引数据库上完成的单一查询的假设/场景。完成的查询由 WP_Query 类执行，并且（恕我直言）不是简单的查询。

当我说“ajax 调用”时，我不仅仅指过程的一部分。我的意思是从单击按钮到附加 HTML 的时间。

该站点的服务器上除了我之外没有其他用户；它还不是一个公共站点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T16:04:36.973

> 我还没有看到一个 Ajax 调用花费超过 2-3 秒。

在只有一个用户的开发机器上，这样的事情应该是即时的。**秒**范围内的查询响应很可能是设计缺陷（非索引数据库？）的症状。

**编辑：**

从数据库开始是有意义的。您可以使用如下[分析](http://dev.mysql.com/doc/refman/5.0/en/show-profile.html)：

```
runQuery ("SET profiling=1");
// do your WordPress stuff here
runQuery ("SHOW PROFILES"); 
runQuery ("SHOW PROFILE FOR QUERY n"); // where n loops on the results of SHOW PROFILES 
```

并比较实时和开发服务器上的结果。（注意这`runQuery`是一个虚函数）。

**编辑2：**

还可以考虑直接在数据库上而不是 WP_Query 上运行您自己的查询。我相信你能想出更好的东西。查看[wpdb 对象](http://codex.wordpress.org/Class_Reference/wpdb)以供进一步参考。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T16:30:37.427

这里可能有多种可能性：

1.  正如'vbence'所提到的，并发用户访问您的网站（如果您的网站上启用了谷歌分析并在“实时”下检查或仅借助原始 apache 日志，您可以轻松确定）。

2.  资源限制（特别是内存）：您的应用程序可能会占用几乎所有可用内存。在那里运行`top command`& 检查已用和可用内存。如果它开始占用交换空间，那么事情就会开始变慢。 ![在此处输入图像描述](https://i.stack.imgur.com/2Rmjf.png)

3.  Mysql tunning（这可能是你的情况）：只需在服务器上配置 php 脚本并检查代码的哪一部分需要时间来确认是因为 mysql。如果是这种情况，那么您需要优化 mysql 设置。查看以下与生产中的 mysql 速度慢相关的帖子： [MySQL 在一台服务器上比另一台服务器慢 10 倍](https://stackoverflow.com/questions/11762406/mysql-10x-slower-on-one-server-compared-to-another)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T02:17:39.600

在本地运行东西意味着：

*   只有你。
*   没有“走线”
*   专用服务器 - 你的电脑。

在托管服务器上运行东西通常意味着：

*   许多用户（即使您的实际应用只有 1 个）
*   多次往返线路以将页面和资产从服务器获取给您（以及您对它的请求）
*   与其他用户共享的服务器。

避免使用当地时间作为比较的标准。而是将您的 VPS 时间作为标准并专注于它们。正如其他人指出的那样，即使是一秒钟的当地时间也可能是可疑的。

# jquery - setInterval 和 Ajax 问题

> ID：16196832
> 
> 赞同：1
> 
> 时间：2013-04-24T16:01:37.643
> 
> 标签：jquery, ajax, setinterval, multiple-instances

我每 10 分钟使用 setinterval 运行一次 ajax 调用。该调用是从 php 页面获取新的帖子数据并将其放入变量中。当我想加载新的帖子数据时，我会单击一个链接，它将预先添加到页面中。

我遇到的问题是，如果页面处于非活动状态 30 分钟，它会运行 ajax 调用 3 次（每次分钟）。然后，当我单击链接加载新帖子时，它们被加载了 3 次。

我需要它们只加载一次。

这是我的代码。

```
 var getNewPosts = function() {
    $.ajax({
        type: 'GET',
        url: 'interactions/get_new_posts.php',
        async: true,
        cache: false,
        //dataType: 'json',
        success: function(results) {
            var data = results;
            // New Posts
            var instagramPosts = $(data).find('#instagramPosts').html();

            //Load new Instagram Posts
            $(document).one('click', '.instagram_menu', function(e) {
                $('#feed_wrap').prepend(instagramPosts).isotope( 'reloadItems' ).isotope({ sortBy: 'original-order' });
                console.log(instagramPosts);
            });

        },
        error: function(results) {
            //console.log('true', results);

        }
    });
};

var interval = 1000 * 60 * 10; // Last int is minutes
setInterval(getNewPosts, interval); 
```

所以你可以看到它将新帖子加载到变量 instagramPosts 中。然后，当我单击 .instagram_menu 时，它会将这些新帖子放在前面。

再一次，问题是，如果我让它坐下来，如果它多次调用这个函数，然后我点击 .instagram_menu，它会加载这些帖子的函数被调用的次数。

我该去哪里？我想指出正确的学习方向，不要只给我代码就可以了。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T16:11:32.973

我会取消绑定点击然后再次绑定。我不确定“一个”是做什么的？

```
setInterval(bang, 1000);

function bang(){

$('#clickme').unbind('click');
$('#clickme').one('click', function(){

    alert('bang');

});

} 
```

# jquery - 使用 Ajax 通过 Twitter Bootstrap 加载/卸载模态窗口

> ID：16196835
> 
> 赞同：0
> 
> 时间：2013-04-24T16:01:42.563
> 
> 标签：jquery, ajax, twitter-bootstrap

我正在使用 Bootstrap（版本 2.3.1），并且正在使用 Ajax 在模式窗口中加载。当我关闭模态窗口时，有没有办法从 DOM 中删除模态窗口？

```
$('[data-toggle="modal"]').click(function(e) {
        e.preventDefault();
        var url = $(this).attr('href');

        if (url.indexOf('#') == 0) {
         $(url).modal('open');
        } else {
            $.get(url, function(data) {
                $(data).modal();
            }).success(function() {
                console.log('success');

                // I tried this below but didn't work
                // $('#modalClose).on('click',function(){
                //    $('#myModalWindow').remove();
                // });
            });
        }
    }); 
```

我的按钮：

```
<a href="path/to/modal.html" data-target="#" data-toggle="modal">Launch modal</a> 
```

在我的模态窗口中，我有一个关闭按钮。

```
<button class="btn" data-dismiss="modal" aria-hidden="true">Close</button> 
```

但是，当我关闭模式时，html 仍然在 DOM 中，如果我再次加载模式，它会再次输出 HTML。当我关闭模态窗口时，有没有办法从 DOM 中删除模态窗口？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T18:55:16.763

需要删除与 Bootstrap 模式关联的其他 css 类。

尝试将其成功：

```
$('body').on('click', '#btn-close-modal', function () {
    $('#my-modal').modal('hide');
    $('body').removeClass('modal-open');
    $('.modal-backdrop').remove();
}); 
```

`btn-close-modal`用于删除模态的按钮在哪里，并且`my-modal`是相关模态的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T16:09:48.380

[使用.remove()](http://api.jquery.com/remove/)应该非常简单：

```
<button id="ModalClose" class="btn" data-dismiss="modal" aria-hidden="true">Close</button>

$('#ModalClose').on('click',function(){
    $('#IdOfModal').remove();
}); 
```

这应该从 DOM 中删除完整的模态 HTML。请注意，我为关闭按钮提供了一个 ID，并将该 ID 用作点击参考。

如果您的模态（因此关闭按钮）是通过 AJAX 加载的，那么动态加载的元素只有在应用于该模态负载的回调函数时才能使用任何 Javascript/jQuery。

# c++ - 如何为用户输入内容添加时间限制，否则它会继续？

> ID：16196836
> 
> 赞同：0
> 
> 时间：2013-04-24T16:01:49.313
> 
> 标签：c++

很长一段时间以来，我试图在 C++ 中放置一个计时器，它实际上给出了有限的时间来输入任何东西，例如：- 如果我输入

```
cout<<"Enter the name :-  
cin>>name;  
cout<<"Enter Phonenoe :- ";  
cin>>phoneno; 
```

所以在这个我如何添加时间说 5 秒来输入姓名，如果用户在 5 秒内没有输入任何内容，程序应该去输入音素。

给出完整代码，我是初学者。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T16:54:36.417

纯娱乐。仅适用于 Windows。

```
#include <windows.h>
#include <iostream>
#include <string>

bool wait_for_key(int timeout_milliseconds, char& ch) {
    HANDLE tui_handle = GetStdHandle(STD_INPUT_HANDLE);
    DWORD tui_evtc = 0;
    DWORD deadline = GetTickCount() + timeout_milliseconds;
    INPUT_RECORD tui_inrec = { 0 };
    DWORD tui_numread = 0;

    while (GetTickCount() < deadline) {
        if (tui_evtc > 0) {
            ReadConsoleInput(tui_handle, &tui_inrec, 1, &tui_numread);
            if (tui_inrec.EventType == KEY_EVENT) {
                if (tui_inrec.Event.KeyEvent.bKeyDown) {
                    ch = tui_inrec.Event.KeyEvent.uChar.AsciiChar;
                    return true;
                }
            }
        }
        YieldProcessor();
        GetNumberOfConsoleInputEvents(tui_handle, &tui_evtc);
    }

    return false;
}

int _tmain(int argc, _TCHAR* argv[])
{
    HANDLE tui_handle = GetStdHandle(STD_INPUT_HANDLE);

    std::string name;
    std::string other;

    std::cout << "name: ";

    char ch;
    if (wait_for_key(5000, ch)) {
        std::cout << ch;
        std::getline(std::cin, name);
        name = ch + name;

        std::cout << "name is '" << name.c_str() << "'" << std::endl;
    } else {
        std::cout << std::endl << "other: ";
        std::getline(std::cin, other);

        std::cout << "other is '" << other.c_str() << "'" << std::endl;
    }

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T16:13:41.303

好吧，我被否决了。

我为此找到的最好的谷歌是[在这里](http://www.coldestgame.com/site/blog/cybertron/non-blocking-reading-stdin-c)。简而言之，这在 C++ 中很难做到，我相信不可能以可移植的方式做到。在汇编程序中，我会轮询最低级别的键盘中断（我认为是 9h）以查看会发生什么，但那是在 DOS 时代，我不确定这是否有效。

# validation - 每次用户添加或删除字符数据表primefaces时验证输入

> ID：16196837
> 
> 赞同：0
> 
> 时间：2013-04-24T16:01:49.893
> 
> 标签：validation, primefaces, datatable, onkeyup

我的数据表中有这一列，每次用户在我测试的输入中添加或删除一个字符时，我都想验证它：

```
<p:column headerText="Quantité" style="width:20%">
                        <p:cellEditor>
                            <f:facet name="output">
                                <h:outputText value="#{arti.qte}" />
                            </f:facet>
                            <f:facet name="input">
                            <h:panelGroup>
                                    <p:inputText 
                                    value="#{arti.qte}"   >
                                <p:ajax event="keyup" listener= "#{mvmtdepotMB.keyupQte}" />
                                <f:validateDoubleRange minimum="0.1" maximum="#{arti.qtemax}"  />
                                </p:inputText>
                                <p:message  for="qdf" />
                            </h:panelGroup>

                            </f:facet>
                        </p:cellEditor>
                    </p:column> 
```

但是keyup方法没有被调用，验证也没有

我怎样才能做到这一点

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T20:24:23.560

您应该检测到内部的 keyup 事件`p:inputText`：

```
<p:inputText value="#{arti.qte}" onkeyup="validate()"/> 
```

这将执行一个`p:remoteCommand`：

```
<p:remoteCommand name="validate" actionListener="#{mvmtdepotMB.keyupQte}"/> 
```

放在`p:remoteCommand`外面`p:dataTable`。

如果要将参数传递给`p:remoteCommand`：

```
onkeyup="validate([{name: 'name1', value: 'value1'}, {name: 'name2', value: 'value2'}]);" 
```

actionListener`p:remoteCommand`可以通过以下方式检索这些：

```
FacesContext context = FacesContext.getCurrentInstance();
Map map = context.getExternalContext().getRequestParameterMap();
String name1 = (String) map.get("name1");
String name2 = (String) map.get("name2"); 
```

# vb.net - Windows 2003 SP1 中的 VBC.exe 无法编译 Silverlight 5 代码

> ID：16196838
> 
> 赞同：2
> 
> 时间：2013-04-24T16:01:53.423
> 
> 标签：vb.net, silverlight, compilation, vbc

我有一个软件产品，它直接调用 vbc.exe 来编译 Silverlight 代码。Silverlight VB.Net 代码的编译一直在 Windows 2003/XP 到 Windows 2012/8 环境中工作，除了一个安装了 .Net Framework 3.5SP1 和 4.0 的 Windows 2003 SP2（32 位）环境。

错误是`System.String`并且`System.Runtime.Serialization.DataContract`是未知类型。有没有人遇到 vbc.exe 无法编译 Silverlight VB.Net 代码的错误是`System.String`无法识别的，你是如何解决这个问题的？

# asp.net-mvc - 为什么这个 Kendo Grid URL 没有映射到我的控制器操作方法？

> ID：16196841
> 
> 赞同：0
> 
> 时间：2013-04-24T16:02:04.173
> 
> 标签：asp.net-mvc, kendo-ui, kendo-grid, kendo-asp.net-mvc

我正在尝试遵循有关如何使我的 kendo mvc 网格 ajaxified 并能够支持单元格编辑的文档。

我遇到的问题是保存时，我看到网格提出以下请求，这显然不可用。我不熟悉模型前缀的东西，但看起来对象在 URL 中正确建模，每个属性都以 &models 为前缀，然后是一些哈希，然后是参数名称，然后是值。

为什么这个 URL 没有映射到我的控制器操作方法？

```
"NetworkError: 404 Not Found - 
http://localhost/MySite/UI/Orders/Update
?models%5B0%5D%5BId%5D=18c12470-0ca3-4e9c-b6d7-af1d6120e03f
&models%5B0%5D%5BNumber%5D=231413+
&models%5B0%5D%5BMod%5D=8ccbf70a-f368-434c-8c05-2e2f5278215d
&models%5B0%5D%5BModName%5D=M6G+++++++++++++++++++++++++++++++++++++++++++++++
&models%5B0%5D%5BDescription%5D=M6G+LMU+TTU1200
&models%5B0%5D%5BPart%5D=105442
&models%5B0%5D%5BPartDescription%5D=M6H+TELEMATICS+CONTROL+UNIT
&models%5B0%5D%5BQuantity%5D=20
&models%5B0%5D%5BDeliveryDate%5D=Tue+Apr+30+2013+00%3A00%3A00+GMT-0400+(Eastern+Daylight+Time)&_=1366818145016" 
```

控制器中的 Update 方法 sig 如下所示：

```
[AcceptVerbs(HttpVerbs.Post)]
public ActionResult Update([Kendo.Mvc.UI.DataSourceRequest] Kendo.Mvc.UI.DataSourceRequest request, [Bind(Prefix = "models")]IEnumerable<Order> order)
        {
        //do update
        } 
```

示例 Order 对象如下所示

```
public class Order
{
    public Guid Id { get; set; }
    public string Number{ get; set; }
    public Guid Mod{ get; set; }
    public string ModName{ get; set; }
    public string Description { get; set; }
    public int Part{ get; set; }
    public string PartDescription { get; set; } // View Model Purposes Only
    [Required]
    [UIHint("QuantityEditor")] //QuantityEditor is the name of the custom editor template
    public int Quantity { get; set; }
    public DateTime DeliveryDate{ get; set; }
} 
```

这是 ala MVC 的网格代码：

```
@(Html.Kendo().Grid(Model)
    .Name("my-grid")
    .Columns(columns =>
    {
        columns.Bound(m => m.Id)
            .Hidden(true)
            .HtmlAttributes(new { @class = "some-class" });
        columns.Bound(m => m.Mod)
            .Hidden(true)
            .HtmlAttributes(new { @class = "some-class" });
        columns.Bound(m => m.ModName)
            .Hidden(true)
            .HtmlAttributes(new { @class = "some-class" });
        columns.Bound(m => m.Description).HtmlAttributes(new { @class = "some-class" });
        columns.Bound(m => m.Part).HtmlAttributes(new { @class = "part can-edit" });
        columns.Bound(m => m.PartDescription).HtmlAttributes(new { @class = "can-edit" });
        columns.Bound(m => m.DeliveryDate).Format("{0:yyyy-MM-dd}").HtmlAttributes(new { @class = "date can-edit" });
        columns.Bound(m => m.Quantity).HtmlAttributes(new { @class = "quantity can-edit" }).FooterTemplate("Total:");
    })
    .Scrollable(s => s.Height("auto"))
    .Editable(editable => editable.Mode(GridEditMode.InCell))
    .Events(events => events.DataBound("onDataBound"))
    .DataSource(dataSource => dataSource
                    .Ajax()
                    .Batch(true)
                    .Update(update => update.Action("Update", "Orders"))
                    .Read(read => read.Action("GetAllOrders", "Orders").Data("getAdditionalData"))
                    .Aggregates(aggregates => { aggregates.Add(p => p.Quantity).Sum(); })
                    .Model(model => 
                    {
                        model.Id(m => m.Id);
                        model.Field(m => m.Id).Editable(false);
                        model.Field(m => m.Part).Editable(true);
                        model.Field(m => m.Quantity).Editable(true);
                        model.Field(m => m.DeliveryDate).Editable(true);
                        model.Field(m => m.PartDescription).Editable(true);
                    })
    )

) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T09:34:08.667

乍一看，它看起来像，

```
.Read(read => read.Action("GetAllOrders", "Controller").Data("getAdditionalData")) 
```

您需要输入控制器的实际名称而不是控制器，例如“PersonController”将是“Person”。

编辑-从外观上看，您已经设置了从数据源读取，但没有设置更新，而是尝试在事件中执行此操作。

[http://demos.kendoui.c​​om/web/grid/editing-inline.html](http://demos.kendoui.com/web/grid/editing-inline.html)

我发现不使用内联编辑更容易，而是创建一个模板按钮以重定向到编辑页面，从而使与剑道相关的代码保持简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-13T11:53:18.120

看起来您的网格是从 MVC 区域内调用的。如果您在 MVC 应用程序中设置了区域，则在使用 Kendo UI 小部件进行调用时引用这些区域总是一个好习惯。

下面假设一个名为“UI”的区域：

```
.Update(update => update.Action("Update", "Orders", new { Area = "UI" })) 
```

# symfony - 将 PHPExcel 与 composer 和 Symfony2.2 一起使用

> ID：16196851
> 
> 赞同：4
> 
> 时间：2013-04-24T16:02:32.003
> 
> 标签：symfony, phpexcel, autoload, composer-php, symfony-2.2

我在 SO 上找到了这个：[如何在 Symfony 2 中正确使用 PHPExcel](https://stackoverflow.com/questions/6402839/how-to-use-phpexcel-correctly-with-symfony-2)

这可行，但我想将它与作曲家一起使用。我已经解决的第一部分：为特殊标签加载 PHPExcel（最后一个稳定版本）

我不知道如何使用以下语法获取标签：

```
"repositories": [
    {
        "type": "vcs",
        "url": "https://github.com/umpirsky/SyliusAssortmentBundle"
    }
] 
```

所以我使用了`Package`符号：
我发现，`reference`应该是 github 上的标签名称。并且`version`不能是相同的值（PHPExcel_1.7.8）。似乎不允许使用字母字符，所以它只是作为数字的版本（1.7.8）

```
"repositories": [{
    "type": "package",
    "package": {
        "name": "PHPOffice/PHPExcel",
        "version": "1.7.8",
        "source": {
            "url": "https://github.com/PHPOffice/PHPExcel.git",
            "type": "git",
            "reference": "PHPExcel_1.7.8"
        }
    }
}] 
```

下一步我没有解决。我尝试了自动加载的每种组合：psr-0、classmap、不同的路径、相对于项目/供应商/phpexcel、每次更新作曲家，但没有任何效果。

它只有效，如果我把这条线

```
$loader->add('PHPExcel', __DIR__.'/../vendor/PHPOffice/PHPExcel/Classes'); 
```

进入 app/autoload.php。我发现，第一个字符串 ( `PHPExcel`) 也可以是一个空字符串：`''`. 如果我使用or
有区别吗？`PHPExcel``''`

**所以我的主要问题是**，如何避免将这一行写入 autoload.php，将等效命令放入项目的 composer.json 中？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-24T16:23:35.093

关于你的主要问题，问题是一旦安装了包，如果你更新定义并添加自动加载的东西，那么运行`composer update`不会改变任何东西。Composer 仍然有已安装在其“缓存”中的旧包，因此它使用它来生成自动加载并且失败。

要解决此问题，您应该`vendor/PHPOffice/PHPExcel`直接删除并运行`composer update`，这将使用 composer.json 中的最新信息重新安装它，包括自动加载等。您应该指定自动加载：

```
"repositories": [{
    "type": "package",
    "package": {
        "name": "PHPOffice/PHPExcel",
        "version": "1.8.0",
        "source": {
            "url": "https://github.com/PHPOffice/PHPExcel.git",
            "type": "git",
            "reference": "1.8.0"
        },
        "autoload": {
            "psr-0": {
                "PHPExcel": "Classes/"
            }
        }
    }
}],
"require": {
    "PHPOffice/PHPExcel": "1.8.*",
    ... 
```

关于第二个问题和`''`vs `'PHPExcel'`：`''`只是说可以在此目录中找到任何命名空间。这意味着自动加载器将始终扫描此目录以查找类，这比将命名空间显式映射到目录更方便但速度较慢。所以两者都有效，但更具体的形式是首选，尤其是在您公开发布的包中。

# java - Portlet Java 类实例是否与 Liferay Portlet Web“实例”1:1 相关？

> ID：16196852
> 
> 赞同：0
> 
> 时间：2013-04-24T16:02:32.473
> 
> 标签：java, liferay, portlet

Liferay portlet 可以允许多个“实例”。`init()`这些实例会与 Java 类的方法调用1:1 对应吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T05:09:41.593

**没有**。您应该假设portlet.xml 中的每个条目都只有一个portlet 类的实例。

Portlet 类的任何非常量成员变量通常是即将出现的错误或竞争条件的标志。

Portlet 的所有动态状态都是通过各种请求和响应参数进入的。如果您发现某个实现，实际上每个实例化的 portlet (web) 部件都找到了 portlet 对象实例，那么这是一个实现细节，不能保证在同一门户的不同版本或任何其他门户上工作。

# android - 获取错误 JSONException: No Value For

> ID：16196856
> 
> 赞同：1
> 
> 时间：2013-04-24T16:02:35.777
> 
> 标签：android, json

我的 json 解析代码有问题，它显示错误 json no value for konteks lokasi 这是使用 TAG_KONTEKS 变量。这是我获取 json 响应的代码。

```
@Override
    protected String doInBackground(String... args) {
        // TODO Auto-generated method stub
        //mendapatkan data dari database berupa alamat, konteks, latitude, longitude
        List<NameValuePair> params = new ArrayList<NameValuePair>();
        params.add(new BasicNameValuePair("lat", Integer.toString(latPengguna)));
        params.add(new BasicNameValuePair("lng", Integer.toString(lngPengguna)));
        params.add(new BasicNameValuePair("konteks", konteksCocok));
        Log.d("lat dan lng kirim", "data: " + Integer.toString(latPengguna) + " " + Integer.toString(lngPengguna));
        Log.d("konteks kirim", "data: " + konteksCocok);
        JSONObject json = jParser.makeHttpRequest(url_webservice, "POST", params);
        Log.d("data: ", json.toString());

        //menampilkan data lokasi POI
        try {
            int sukses = json.getInt(TAG_SUCCESS);
            if(sukses == 1) {
                POI = json.getJSONArray(TAG_POIN);
                for(int i = 0; i < POI.length(); i++) {
                    JSONObject c = POI.getJSONObject(i);
                    int latDB = c.getInt(TAG_LAT);
                    int lngDB = c.getInt(TAG_LNG);
                    String alamat = c.getString(TAG_ALAMAT);
                    String konteks = c.getString(TAG_KONTEKS);

                    Log.d("latDB", "data: " + latDB);
                    Log.d("lngDB", "data: " + lngDB);
                    Log.d("altDB", "data: " + alamat);
                    Log.d("ktsDB", "data: " + konteks);                     
                    HashMap<String, String> map = new HashMap<String, String>();
                    map.put(TAG_ALAMAT, alamat);
                    map.put(TAG_KONTEKS, konteks);
                    POIList.add(map);
                }
            } else {
                Log.d("JSON error", "JSON trouble");
            }
        } catch(JSONException ex) {
            ex.printStackTrace();
        }
        return null;
    } 
```

这是我的 json 回复：

```
{
"success": 1,
"point": [
    {
        "point": {
            "konteks_lokasi": "kuliah",
            "nama_lokasi": "Teknik Perkapalan",
            "longitude": "-60",
            "latitude": "117"
        },
        "hasil": 15.811388300842
    },
    {
        "point": {
            "konteks_lokasi": "kuliah",
            "nama_lokasi": "Teknik Kimia",
            "longitude": "-80",
            "latitude": "145"
        },
        "hasil": 33.376638536557
    },
    {
        "point": {
            "konteks_lokasi": "kuliah",
            "nama_lokasi": "Teknik Arsitektur",
            "longitude": "-22",
            "latitude": "111"
        },
        "hasil": 53.009433122794
    }
] 
```

}

如果你能帮助我，我会很高兴...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T16:08:37.630

经度和纬度是字符串，因为它们被引号包围。所以你应该用 getString()

像这样解析它们

你的 JSONArray 包含另一个 json 数组，所以像这样解析它

```
int sukses = json.getInt(TAG_SUCCESS);
            if(sukses == 1) {
                POI = json.getJSONArray(TAG_POIN);

                for(int i = 0; i < POI .length(); i++) {
                    JSONObject c = POI .getJSONObject(i);
                     JSONObject d = c.getJSONObject(0);

                    String latDB = d.getString(TAG_LAT);
                    String lngDB = d.getString(TAG_LNG);
                    String alamat = d.getString(TAG_ALAMAT);
                    String konteks = d.getString(TAG_KONTEKS);
} 
```

# javascript - 何时将扩展附加复杂类型添加到 Breeze 实体

> ID：16196861
> 
> 赞同：1
> 
> 时间：2013-04-24T16:02:47.473
> 
> 标签：javascript, knockout.js, breeze, single-page-application, durandal

我想从数据库中加载一个实体，然后使用它的 ICollection（来自模型类）加载一些子数据。如果它是一对多的关系，那么从单个视图模型中可以很简单地做到这一点，但我有一个更复杂的结构 -

父母有很多孩子。每个孩子都有许多孙辈，需要将其与正确的孩子联系起来。层次结构需要保持完整。

到目前为止我提出的其他选项可能不是最好的方法，所以我的问题是 - 加载孙子的最佳做法是什么 - 或其他方法？

在配置元数据存储时在构造函数中 -

```
function configureMetadataStore(metadataStore) {
    metadataStore.registerEntityTypeCtor(
        'Child', null, childInitializer);
}

function childInitializer(child) {
    child.grandchildren = (Do something here)
        return grandchildren;
    });
} 
```

在填充儿童的视图模型中 -

```
function refresh() {
    return datacontext.getChildren(childs, parentId);
}

var addGrandChildren = function () {
    $.each(childs, function (i) {
        var grandChildren = ko.observableArray();
        var childId = $(this).data(id);
        datacontext.getGrandChildren(grandChildren, childId);
    });
    return;
}; 
```

还是别的什么方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T18:43:00.837

如果您的关系*不是单向*的，Breeze 实体会在您查询它们时自动将它们自己连接在一起。（编辑：从 v 1.3.5 开始，微风也将连接单向关系。）

这意味着，如果您使用查询来提取恰好相关的 n 个实体，所有这些实体将自动以正确的方式相互链接。如果您使用 EntityQuery.expand 方法，也会发生同样的情况。因此，您的问题只是如何以最少的调用次数查询您想要的图表的任何部分。

注意：如果您真的想真正“走”图表，您还应该查看 EntityAspect.loadNavigationProperty 方法。但是，如果您正在处理大型图表，这可能会表现不佳。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-28T01:43:25.013

我对 Breezejs (1.4.2) q (0.9.7) 有同样的问题我想为实体添加一个计算属性。

```
var doctorInitializer = function (doctor) {
    doctor.FullName = ko.computed(function () {           
        return doctor.FirstName() + " " + doctor.MiddleName() + " " + doctor.LastName() + " " + doctor.SurName();           
    });
};

var doctorName = '/breeze/polyclinic', 
doctorManager = new breeze.EntityManager(doctorName);
var store = doctorManager.metadataStore;
store.registerEntityTypeCtor("Doctor", null, doctorInitializer); 
```

我尝试将计算出的淘汰赛添加到构造函数

```
var doctor = function () {
  self.FullName = ko.computed( {
    read: function() {
       return self.FirstName + " " + self.MiddleName + " " + self.LastName + " " + self.SurName;
    },
    deferEvaluation: true
  });
};
store.registerEntityTypeCtor("Doctor", doctorInitializer); 
```

在这两种情况下，只有当我删除括号但 MiddleName 和 SurName 不是必需的并且我得到空字符串而不是空字符串时才有效

这是我遇到的错误[http://screencast.com/t/bP9Xnmf9Jm](http://screencast.com/t/bP9Xnmf9Jm)

# list - （方案）如何减去一元数列表？

> ID：16196870
> 
> 赞同：0
> 
> 时间：2013-04-24T16:03:13.640
> 
> 标签：list, scheme

我正在制作一个函数，它减去两个包含一元数的列表（ lll = 3 或 llll = 4）

所以，它需要这样做：

```
~(usub '(l l l l) '(l l))
(l l) 
```

现在，我有一个函数可以将它们相加，但没有一个可以减去它们。我认为它会接近添加一个，但我无法弄清楚。帮助？

```
(define (uadd ls1 ls2)
  (if (null? ls1) ls2
    (cons (car ls1) (uadd (cdr ls1) ls2)))) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T16:09:58.447

减去它的过程与添加的过程非常相似，根本区别在于，这里我们不必一路构建新列表，而是返回要减去的列表的子列表（`ls1`在此代码）：

```
 ; implements unary subtraction between two unary lists
 ; assuming that length(ls1) >= length(ls2)
 ; ls1: list we're subtracting from
 ; ls2: list we're subtracting
 ; returns ls1 - ls2
(define (usub ls1 ls2)
  (if <???>                ; is the list we're subtracting empty?
      <???>                ; then return the list we're subtracting from
      (usub <???> <???>))) ; advance the recursion 
```

显然，诀窍在于知道*如何*推进递归：请注意，我们正在减少两个列表的大小，直到其中一个用完，然后我们返回另一个 - 这就是我们减去的方式。例如：

```
(usub '(l l l l l) '(l l))
=> '(l l l) 
```

# jquery - 如何使用jquery在一行中附加2个html元素

> ID：16196876
> 
> 赞同：0
> 
> 时间：2013-04-24T16:03:23.297
> 
> 标签：jquery, html, append

我想将一些 html 内容附加到一个列表中，以像这样结束，

```
<ul>
<li>
<input />
<label><img></label>
</li>
</ul> 
```

我正在使用 append 方法来提高可读性，但是“输入”嵌套了其他 html 元素（我认为这很正常），如何使用 append 方法实现显示的上层形式？

```
 function updateFunction(id, image, label) {
    $.colorbox.close();

    $("#checkbox_list").append(
    $("<li/>", {
      "id": "medias_bloc_"+id,
      html: $("<input/>", {
        "type": "checkbox",
        "value": id,
        "class": "check_box",
        "checked": "checked"
      })
    })
  );

    $("#medias_bloc"+id).append(
    $("<label/>", {
      "for": "medias_list_"+id,
      "html": $("<img/>", {
        "src": "/uploads/Media/thumb/"+image,
        "width": 100,
        "height":100
      })
    })
  );

  } 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T16:06:52.077

尝试这个：

```
$("<li/>", {
  "id": "medias_bloc_"+id,
  html: $("<input/>", {
    "type": "checkbox",
    "value": id,
    "class": "check_box",
    "checked": "checked"
  })
}).append(
$("<label/>", {
  "for": "medias_list_"+id,
  "html": $("<img/>", {
    "src": "/uploads/Media/thumb/"+image,
    "width": 100,
    "height":100
}) 
```

该`<label>`元素将直接附加到该`<li>`元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T16:07:20.283

简单的。只需更改此行：

```
 $("#medias_bloc"+id).append( 
```

对此：

```
 $("#checkbox_list").append( 
```

编辑：不，等等，误读您的代码；这行不通。

# php - 使用自定义名称将画布和表单发送到服务器保存图像

> ID：16196879
> 
> 赞同：3
> 
> 时间：2013-04-24T16:03:36.720
> 
> 标签：php, javascript, jquery, html, canvas

我正在尝试将画布图像发送到服务器。

嗨，我认识的每个人都被问了很多。（我之前已经问过一次了）

表单数据也被发送，这用于命名发送到服务器的文件，以便识别谁绘制了图像。

我的网站在[这里](http://www.lovetriangles.co.uk/indexPHPtest.html "我目前的网站")！

HTML

```
 <form action="PHPtestupload.php" method="post">
      Name <input type="text" name="name" value="" style="width:230px;  margin-left: -160px; font-size:1em; "/>

      Email <input type="email" name="email" value="" style="width:230px;  margin-top: 12px; margin-left: -160px; font-size:1em; "/>

      <input type="submit" onclick="postImagePlusForm();" value="Submit" style=" opacity:1; -webkit-appearance: none; width:100px; height:50px; margin-left: -50px;">
    </form> 
```

JS

```
 // sends image to server
// serialize your canvas
var dataURL=document.getElementById('colors_sketch').toDataURL(image/png);

// serialize your form
var str = $("form").serializeArray();

// wrap both in an object
var package={ formData: str, imageDataURL: dataURL }

// ajax it
postImagePlusForm();

function postImagePlusForm(){
$.ajax({  
    type: "POST",  
    url: "PHPtestupload.php",  
    data: package,  
    success: function(value) {  
        // ...we have success!
    }
}); 
```

}

PHP

```
if ( isset($_POST["imageDataURL"]) && !empty($_POST["imageDataURL"]) ) {    
 // create $dataURL
$dataURL = $_POST["imageDataURL"];  
// Extract base64 data
// we have an unneeded header, zap it
$parts = explode(',', $dataURL);  
$data = $parts[1];  
// Decode
$data = base64_decode($data);  
// Save
$fp = fopen('newImage.png', 'w');  
fwrite($fp, $data);  
fclose($fp); 

if ( isset($_POST["formData"]) && !empty($_POST["formData"]) ) {    
$formData = $_POST['formData'];
foreach ($formValue as $x) {
    // do whatever you need to do with each form value ($x)

} 
```

在网页上使用不同 Javascript 的替代 PHP，[这里](http://www.lovetriangles.co.uk/index1.html)有半工作站点！

我认为服务器会关闭 PHP，因为它在本地运行，但在联机时不起作用。它会生成大量错误日志。

```
 $data = file_get_contents('php://input');

        $canvasImg = imagecreatefrompng($data);
        $width  = imagesx($canvasImg);
        $height = imagesy($canvasImg);

        $outImg = imagecreatetruecolor($width, $height);
        $color = imagecolorallocatealpha($outImg, 255, 255, 255, 127);
        imagefill($outImg, 0, 0, $color);
        imagecopy($outImg, $canvasImg, 0, 0, 0, 0, $width, $height);

        imagepng($outImg, 'test.png');

        $name = $_POST['name'];
        $email = $_POST['email'];
        $target = 'test.png';
        $newName = $name . $email;
        rename($target, $newName); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-24T17:12:09.940

尝试这个：

```
$dataURL = $_POST["imageDataURL"];
$dataURL = str_replace('data:image/png;base64,', '', $dataURL);
$dataURL = str_replace(' ', '+', $dataURL);
$image = base64_decode($dataURL);
$filename = 'newImage.png';
file_put_contents('path/to/' . $filename, $image); 
```

此外，在您的 Javascript 中，您错过了`.toDataURL`

```
var dataURL = document.getElementById('colors_sketch').toDataURL('image/png'); 
```

**- - 更新 - -**

在您的情况下，图像数据实际上并未传递给您的上传处理程序（PHPtestuplaod.php），因为提交表单会导致页面重定向。因此，可能的解决方法是：

**HTML**

```
<!-- add this inside your form. 
     this will be used to carry the image data into
     the upload handler -->
<input type="hidden" name="imageData" id="imageData" /> 
```

**jQuery**

```
$("form").submit(function(e) {
  // let's prevent the default behavior for now,
  // so that we'll have time to include the image data
  e.preventDefault();

  // get the canvas image data
  var imageData = document.getElementById("colors_sketch").toDataURL("image/png");

  // let the hidden field we added earlier carry the image data into the upload handler
  $("#imageData").val(imageData);

  // submit the form
  $(this).submit();
}); 
```

**PHP**

```
$dataURL = $_POST["imageData"];
$dataURL = str_replace('data:image/png;base64,', '', $dataURL);
$dataURL = str_replace(' ', '+', $dataURL);
$image = base64_decode($dataURL);
$filename = 'newImage.png';
file_put_contents('path/to/' . $filename, $image); 
```

您可能想要删除您的 AJAX 调用，因为这里现在不需要它。

# grails - Grails - 带有 pdf 附件的 RESTful Web 服务？

> ID：16196882
> 
> 赞同：1
> 
> 时间：2013-04-24T16:03:51.540
> 
> 标签：grails, restful-architecture, groovyws

我必须为消费者和提供者实现 Grails RESTful Web 服务。提供者必须返回 pdf 文档，消费者必须对其进行处理并将其保存到数据库中。作为提供者如何使用 grails rest 服务返回 pdf 文档。我在肥皂网络服务中使用了 MTOM 来实现这一点，但不确定如何在 Grails 休息服务中实现。

请建议我如何使用一些示例代码来实现这一点。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T16:52:02.607

这就是我所做的，这就是你可以为制片人做的

```
>  def boas = callservicetogenerateReport // this should return an
> byteArray
>         // setting the content type
>         response.setContentType("application/pdf");
>         response.setHeader("Content-Disposition", "attachment;filename=sample.pdf")
>         response.setContentLength(boas.size());
>         // write ByteArrayOutputStream to the ServletOutputStream
>         response.outputStream << boas.toByteArray()
>         response.outputStream.flush()
>         response.outputStream.close() 
```

对于消费者，这是我在休息调用中所做的，它实际上处理了用户通过帖子提交文件。

```
request.multiFileMap."files[]".each {file ->
                def newFile = new Expando(name: file.originalFilename, size: file.size)
                callServicetoAddFileToDB(file)
  } 
```

希望这可以帮助

# java - 无限循环中的堆栈溢出 - 检测修改后的 DFS 中的循环

> ID：16196883
> 
> 赞同：0
> 
> 时间：2013-04-24T16:03:54.783
> 
> 标签：java, cycle, infinite-loop, depth-first-search

在这一点上，我有点疯狂，试图确定无限循环的来源（出现 stackoverflow 错误）。我正在尝试实施修改后的 DFS 来检测图中的循环。我正在处理第 11 页的这个例子：[http ://www.cs.berkeley.edu/~kamil/teaching/sp03/041403.pdf](http://www.cs.berkeley.edu/~kamil/teaching/sp03/041403.pdf)

在此实现中，0 = 白色，1 = 灰色，2 = 黑色。我希望我错过了一些相对简单的东西。

```
public boolean containsCycle()
 {
   for (int i=0; i<n; i++)
     marks[i] = 0; // Initialize all to zero - unvisited

   for (int i=0; i<n; i++) { // n = number of vertices in the graph
     if (marks[i]==0) {
       if (visit(i)){
         return true;
       }
     }
   }
   return false;
 }

public boolean visit(int index){
    marks[index] = 1; // Visited

    for (int i=0; i<n; i++){
       if(isArc(index,i)){ // isArc() returns true IFF there is a directed edge from index->
        if (marks[i]==1)
         return true;
      }
      else if (marks[i]==0) {
        if(visit(marks[i])) 
        return true;
      }
    }
    marks[index] = 2;
    return false;
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T16:29:42.203

似乎它应该`else if (visit(i))`代替`else if (visit(marks[i]))`

# java - 使用 Hibernate Spring 的 .getCurrentSession() 后出错

> ID：16196888
> 
> 赞同：1
> 
> 时间：2013-04-24T16:04:27.487
> 
> 标签：java, spring, hibernate, sessionfactory

使用 .getCurrentSession() 获取 Session 时出现以下错误。

**错误**：

`org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'miniVLEController': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: miniVLE.service.StudentService miniVLE.controller.miniVLEController.studentService; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'studentService': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: miniVLE.dao.MiniVLEDAOImplementation miniVLE.service.StudentService.dao; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'miniVLEDAOImplementation' defined in file [C:\Users\1\Documents\NetBeansProjects\com3014_mini_VLE\build\web\WEB-INF\classes\miniVLE\dao\MiniVLEDAOImplementation.class]: Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [miniVLE.dao.MiniVLEDAOImplementation]: Constructor threw exception; nested exception is java.lang.NullPointerException`

**DAO 实现：**

```
import java.util.ArrayList;
import java.util.List;
import miniVLE.beans.Course;
import miniVLE.beans.Department;
import miniVLE.beans.Module;
import miniVLE.beans.Student;
import miniVLE.beans.TimeSlot;
import org.hibernate.SessionFactory;
import org.hibernate.criterion.Restrictions;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Repository;

@Repository
public class MiniVLEDAOImplementation implements MiniVLEDAO{

    // Used for communicating with the database
    @Autowired
    private SessionFactory sessionFactory;

    /**
     * DAO constructor filled with dummy data 
     */
    public MiniVLEDAOImplementation() {
        System.out.println("*** MiniVLEDAOImplementation instantiated");
        Student s1 = new Student("123456","Bob","123");
        Department d1 = new Department("COM","Computing");
        Course c1 = new Course("COM3014","Web");
        c1.setDepartment(d1);
        s1.setCourse(c1);
        s1.setDept(d1);

        // Add new student to the database
        addStudentToDB(s1);

    }

    /**
     * Gets the current session and adds new student row into the database
     * @param student 
     */
    @Override
    public void addStudentToDB(Student student) {         
        sessionFactory.getCurrentSession();  // here i got rid of full implementation as it fails on getting the current session
    } ... 
```

**Dispatcher-Servlet：**

```
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:p="http://www.springframework.org/schema/p"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:mvc="http://www.springframework.org/schema/mvc"
       xmlns:aop="http://www.springframework.org/schema/aop"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
       http://www.springframework.org/schema/aop 
       http://www.springframework.org/schema/aop/spring-aop-3.0.xsd
       http://www.springframework.org/schema/tx 
       http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
       http://www.springframework.org/schema/context
       http://www.springframework.org/schema/context/spring-context-3.0.xsd
       http://www.springframework.org/schema/mvc
       http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd">

    <context:annotation-config />
    <context:component-scan base-package="miniVLE.controller" />
    <context:component-scan base-package="miniVLE.service" />
    <context:component-scan base-package="miniVLE.beans" />
    <context:component-scan base-package="miniVLE.dao" />

    <!-- Declare a view resolver-->
    <bean id="viewResolver"
          class="org.springframework.web.servlet.view.InternalResourceViewResolver"
          p:prefix="/WEB-INF/jsp/"
          p:suffix=".jsp" />

    <!-- Connects to the database based on the jdbc properties information-->
    <bean id="dataSource" class ="org.springframework.jdbc.datasource.DriverManagerDataSource">
        <property name ="driverClassName" value="com.mysql.jdbc.Driver"/>
        <property name ="url" value="jdbc:derby://localhost:1527/minivledb"/>
        <property name ="username" value="root"/>
        <property name ="password" value="123" />
    </bean>

     <!-- Declares hibernate object -->
    <bean id="sessionFactory" class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
        <property name="dataSource" ref="dataSource" />
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect"> ${hibernate.dialect}</prop>
                <prop key="hibernate.show_sql">${hibernate.show_sql}</prop>
            </props>
        </property>
        <!-- A list of all the annotated bean files, which are mapped with database tables-->
        <property name="annotatedClasses">
            <list>
                <value> miniVLE.beans.Course </value>
                <value> miniVLE.beans.Student </value>
                <value> miniVLE.beans.Department </value>  
                <value> miniVLE.beans.Module </value>  
                <value> miniVLE.beans.TimeSlot </value> 
            </list>
        </property>
    </bean>

</beans> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T16:17:25.293

为了创建你的bean，Spring首先使用你的类的无参数构造函数来创建一个实例，然后使用反射来自动装配`@Autowired`字段。

但是你的构造函数

```
public MiniVLEDAOImplementation() {
    ...
    // Add new student to the database
    addStudentToDB(s1);
} 
```

调用一个`SessionFactory`在它被初始化之前使用的方法。因此，当您尝试对其调用方法时`null`，您会得到一个。`NullPointerException`

从那时起，您无法将学生添加到数据库中。如果您想测试您的课程，请尝试单元测试。

# c++ - 将迭代器复制到容器中（包含指向 typedef 的指针）？

> ID：16196890
> 
> 赞同：0
> 
> 时间：2013-04-24T16:04:33.140
> 
> 标签：c++, iterator, typedef

我有一个用户定义的类`Node`，一个 typedef ，并试图通过将指针指向包含 .hash_map 的元素`VERTEX`来填充 的向量。问题是当我尝试将指针指向迭代器时，会出现一个错误，告诉我“迭代器类型不兼容”。这样做的正确方法是什么？`VERTEX*``VERTEX`

```
class Node
{
public:
Node(){DEGREE = 0;}
bool HAS_OUTLINK;//using size() instead
vector <int> IN;
vector <int> OUT;
//string URL;//not strictly necessary
double PAGE_RANK;
double I_A;
int DEGREE;//referring to outdegree
};
    typedef pair <int, Node> VERTEX;
    void top_ten (hash_map<int, Node>& G){
       vector <VERTEX*> top10;// then after some initilisation...
       hash_map <int, Node>::iterator i;
       for (i = G.begin(); i != G.end(); i++){
          for (int j = 0; j < 10; j++){
             double &temp = i->second.PAGE_RANK;
             VERTEX *compare = top10[j];
             if (compare->second.PAGE_RANK < temp){
                compare->first = i->first;
                compare->second = i->second;//where the mistake is
             }
          }
       }
    } 
```

我也尝试过简单地使用`compare = i`，`compare = &i`尽管编译器都不接受这些。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T16:36:35.903

你需要尊重吗`i`？我不认为你这样做，它不是一个指针

改变

```
compare->first = i->first; 
```

至

```
compare->first = i.first; 
```

等等

# java - 将 CharSequence 转换为 BigDecimal

> ID：16196893
> 
> 赞同：1
> 
> 时间：2013-04-24T16:04:42.363
> 
> 标签：java

我对此进行了一些搜索，我发现它`BigDecimal`有一个我们可以传递`String`给它的构造函数，它会为我们转换它。但就我而言，我所拥有的是一个`java.lang.CharSequence`，我需要的是`BigDecimal`

进行这种转换的正确方法是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-24T16:07:11.203

```
new BigDecimal(myCharSeq.toString()) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T16:15:00.733

使用 CharSequence 接口的 .toString 方法

我已经纠正了我自己实际上`CharSequence`是一个接口，它有自己的 toString() 方法。

toString(); -- 返回对象的字符串表示形式。

参考 CharSequnce 接口的官方文档[http://docs.oracle.com/javase/6/docs/api/java/lang/CharSequence.html](http://docs.oracle.com/javase/6/docs/api/java/lang/CharSequence.html)

```
BigDecimal bigDecimal = new BigDecimal(charSeq.toString()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T16:07:41.627

我会[`CharSequence.toString`](http://docs.oracle.com/javase/6/docs/api/java/lang/CharSequence.html#toString%28%29)与您提到的构造函数一起使用。`toString`文档：

> 以与此序列相同的顺序返回包含此序列中字符的字符串。字符串的长度就是这个序列的长度。

这变成：

```
new BigDecimal(mySequence.toString()); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-24T16:07:44.920

呼吁`toString()`并`CharSequence`建立`BigDecimal`它。Javadoc 是您的朋友。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-24T16:07:32.907

像这样

```
StringBuilder sb = new StringBuilder(charSequence.length());
sb.append(charSequence);
BigDecimal bigDecimal = new BigDecimal(sb.toString()); 
```

这可以保护您，以防 toString() 的 charSequence 具体类实现出现问题。CharSequence 是一个可以由用户编写的具体类支持的接口。

# javascript - 我可以在播放框架中的 scala 中的 if 语句中使用 javascript 变量吗？

> ID：16196896
> 
> 赞同：0
> 
> 时间：2013-04-24T16:05:03.217
> 
> 标签：javascript, scala, playframework-2.0

我有一个下拉列表：

```
<select id="sel">
<option value="1">test1</option>
<option value="2">test2</option>
<option value="3">test3</option>
</select> 
```

我得到这样的选定值：

```
var e = document.getElementById("sel");
var val= e.options[e.selectedIndex].value; 
```

但我需要的是在播放框架 Scala 中使用“val”变量，如果句子如下：

```
@if(svor.rettsvar == val){
    <p><b>@svor.svor_texti</b></p>
} 
```

并在我更改所选值时使其更新。

最好的问候，比约恩。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T19:09:40.817

您不能混合使用 Scala 和 JavaScript 范围......实际上我什至不知道如何解释它：/

Scala 语法在运行时编译为一些 HTML 代码，而 JavaScript 在客户端执行，因此无法将 Scala 与 JS 交互...如果您查看从 Scala 视图生成的 HTML 代码，您将理解。

很可能您可以通过仅使用 JS 条件来解决您的问题。

# linux - 在 Linux x86 上调用 backtrace() 时出现分段错误

> ID：16196897
> 
> 赞同：3
> 
> 时间：2013-04-24T16:05:05.583
> 
> 标签：linux, gcc, pthreads, backtrace, ld-preload

我正在尝试执行以下操作 - 为 pthreads 库编写一个包装器，该包装器将在它调用的每个 API 时记录一些信息。我想记录的一条信息是堆栈跟踪。

以下是可以按原样编译和运行的原始代码的最小片段。

初始化（文件`libmutex.c`）：

```
#include <execinfo.h>
#include <stdio.h>
#include <stdlib.h>
#include <pthread.h>
#include <dlfcn.h>

static int (*real_mutex_lock)(pthread_mutex_t *) __attribute__((__may_alias__));
static void *pthread_libhandle;

#ifdef _BIT64
#define PTHREAD_PATH      "/lib64/libpthread.so.0"
#else
#define PTHREAD_PATH      "/lib/libpthread.so.0"
#endif 

static inline void load_real_function(char* function_name, void** real_func) {
  char* msg;
  *(void**) (real_func) = dlsym(pthread_libhandle, function_name);
  msg = dlerror();
  if (msg != NULL)
    printf("init: real_%s load error %s\n", function_name, msg);
}

void __attribute__((constructor)) my_init(void) {
   printf("init: trying to dlopen '%s'\n", PTHREAD_PATH);
   pthread_libhandle = dlopen(PTHREAD_PATH, RTLD_LAZY);
   if (pthread_libhandle == NULL) {
     fprintf(stderr, "%s\n", dlerror());
     exit(EXIT_FAILURE);
  }
  load_real_function("pthread_mutex_lock", (void**) &real_mutex_lock);
} 
```

包装器和对回溯的调用。我已经尽可能多地从方法中删除了，所以是的，我知道我从不调用原始的 pthread_mutex_lock 例如。

```
void my_backtrace(void) {
    #define SIZE 100
    void *buffer[SIZE];
    int nptrs;

    nptrs = backtrace(buffer, SIZE);
    printf("backtrace() returned %d addresses\n", nptrs);
}

int pthread_mutex_lock(pthread_mutex_t *mutex) {
  printf("In pthread_mutex_lock\n"); fflush(stdout);
  my_backtrace();
  return 0;
} 
```

为了测试这一点，我使用了这个二进制文件（文件`tst_mutex.c`）：

```
#include <stdio.h>
#include <stdlib.h>
#include <pthread.h>

int main (int argc, char *argv[]) {
  pthread_mutex_t x;

  printf("Before mutex\n"); fflush(stdout);
  pthread_mutex_lock(&x);
  printf("after  mutex\n");fflush(stdout);

  return 0;
} 
```

这是所有这些的编译方式：

```
rm -f *.o *.so tst_mutex

cc -Wall -D_BIT64 -c -m64 -fPIC libmutex.c
cc -m64 -o libmutex.so -shared -fPIC -ldl -lpthread libmutex.o

cc -Wall -m64 tst_mutex.c  -o tst_mutex 
```

并运行

```
LD_PRELOAD=$(pwd)/libmutex.so ./tst_mutex 
```

这会在 Linux x86 上因分段错误而崩溃。在 Linux PPC 上，一切都完美无缺。我尝试了几个版本的 GCC 编译器、GLIBC 库和 Linux 发行版 - 都失败了。

输出是

```
init: trying to dlopen '/lib64/libpthread.so.0'
Before mutex
In pthread_mutex_lock
In pthread_mutex_lock
In pthread_mutex_lock
...
...
./run.sh: line 1: 25023 Segmentation fault      LD_PRELOAD=$(pwd)/libmutex.so ./tst_mutex 
```

暗示这里有递归。我查看了源代码`backtrace()`- 其中**没有**调用锁定机制。它所做的只是简单地遍历堆栈帧链表。我也用 objdump 检查了库代码，但这并没有发现任何异常。

这里发生了什么？任何解决方案/解决方法？

哦，也许是最重要的事情。这只发生在 pthread_mutex_lock 函数中！！从任何其他重写的 pthread_* 函数打印堆栈都可以正常工作...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-23T08:40:47.123

这是一个堆栈溢出，由无限递归引起（正如@Chris Dodd 所说）。backtrace() 函数运行不同的系统调用，这些系统调用是从使用 pthread 库编译的程序调用的，而没有使用 pthread 库。即使程序没有显式调用 pthread 函数。

这是一个使用 backtrace() 函数且不使用任何 pthread 函数的简单程序。

```
#include <stdio.h>
#include <stdlib.h>
#include <execinfo.h>

int main(void)
{
 void* buffer[100];
 int num_ret_addr;

 num_ret_addr=backtrace(buffer, 100); 
 printf("returned number of addr %d\n", num_ret_addr);

 return 0;
} 
```

让我们在不链接到 pthread 的情况下编译它，并使用 strace 实用程序检查程序系统调用。输出中没有出现与互斥锁相关的系统调用。

```
$ gcc -o backtrace_no_thread backtrace.c
$ strace -o backtrace_no_thread.out backtrace_no_thread 
```

不，让我们编译将其链接到 pthread 库的相同代码，运行 strace 并查看其输出。

```
$ gcc -o backtrace_with_thread backtrace.c -lpthread
$ strace -o backtrace_with_thread.out backtrace_with_thread 
```

这次输出包含与互斥锁相关的系统调用（它们的名称可能取决于平台）。这是在 X86 Linux 机器上获得的 strace 输出文件的片段。

```
futex(0x3240553f80, FUTEX_WAKE_PRIVATE, 2147483647) = 0
futex(0x324480d350, FUTEX_WAKE_PRIVATE, 2147483647) = 0 
```

# android - 为什么 mvn android:lint 跳过子模块？

> ID：16196900
> 
> 赞同：1
> 
> 时间：2013-04-24T16:05:12.787
> 
> 标签：android, maven, android-maven-plugin

为什么 android:lint 只扫描我的聚合器项目中的 Lint 警告并跳过“APP”模块？

在 APP 模块的 POM 中，我定义了：

```
 <plugins>
        <plugin>
            <groupId>com.jayway.maven.plugins.android.generation2</groupId>
            <artifactId>android-maven-plugin</artifactId>
            <extensions>true</extensions>

            <executions>
                <execution>
                    <id>lint</id>
                    <goals>
                        <goal>lint</goal>
                    </goals>
                    <phase>install</phase>
                </execution>
            </executions>

            <configuration>
                <sdk>
                    <platform>${android.platform}</platform>
                </sdk>
                <androidManifestFile>${project.basedir}/AndroidManifest.xml</androidManifestFile>
                <assetsDirectory>${project.basedir}/assets</assetsDirectory>
                <resourceDirectory>${project.basedir}/res</resourceDirectory>
                <nativeLibrariesDirectory>${project.basedir}/src/main/native</nativeLibrariesDirectory>

                <sign>
                    <debug>true</debug>
                </sign>
                <lint>
                    <skip>false</skip>
                </lint>

                <undeployBeforeDeploy>true</undeployBeforeDeploy>
                <zipalign>
                    <skip>false</skip>
                    <verbose>true</verbose>
                    <inputApk>${project.build.directory}/${project.artifactId}.apk</inputApk>
                    <outputApk>${project.build.directory}/${project.artifactId}-aligned.apk</outputApk>
                </zipalign>
            </configuration>
        </plugin> 
```

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T18:28:57.027

我不认为我们已经将它实现为以这种方式在多模块构建中工作。但是，您只需在聚合器中配置插件并在 apk 项目中执行即可。

# sql-server - 使用 SSIS 将多个连接表从一个数据库传输到另一个数据库？

> ID：16196901
> 
> 赞同：2
> 
> 时间：2013-04-24T16:05:15.007
> 
> 标签：sql-server, ssis

我的数据库 A 中有几个表，它们通过外键互连并包含值。这些值需要传输到另一个数据库 B，必须保留所有依赖项，但主键和外键的实际（数字）值当然不重要。

使用 SSIS 完成此任务的最简单方法是什么？

以下是我尝试过但没有太大成功的方法：

1.  我实现了一个非常复杂的视图，其中包含扁平数据和大量数据冗余，并遇到了如何将数据从该扁平视图拆分为通过外键连接的多个表的问题。这可能是一个解决方案，但我个人更愿意尽可能避免数据扁平化步骤。

2.  我尝试使用 NOCHECK 选项一对一地复制表，以提升约束检查并执行插入 PK 和 FK 字段。然而，这将我的转移限制在一个全新的导入中，我不能只是将一些新数据“添加”到现有的数据集中，这将是很好的。

还有其他建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T22:16:54.147

Integration Services 有一个控制流，称为**传输数据库任务**和**传输 SQL Server 对象**任务，专为您的需要而设。

这是您需要的教程[**LINK**](http://www.mssqltips.com/sqlservertip/2064/transfer-database-task-and-transfer-sql-server-objects-task-in-ssis/)。

# sql - 将增量从一个数据库复制到另一个数据库的最佳策略

> ID：16196904
> 
> 赞同：0
> 
> 时间：2013-04-24T16:05:27.707
> 
> 标签：sql, sql-server, sql-server-2008, ssis

我有一个带有表 A 的事务数据库 TD。我有另一个带有表 B 的报告数据库 RD。表 B 在列和数据类型方面与表 A 完全相同。

**我需要将表 A 复制到表 B 中**：

表 A 的细节： 1）表 A 是一个事务表，每天都有新的事务添加到其中。2）此外，表 A 每天都会更新现有交易，有一个名为**updateddate**的列会更新，以防交易有任何更新。

**我遵循的方法：** 我创建了一个 SSIS 包，第一次将数据从事务数据库复制到报告数据库，在表**B**中，我创建了一个名为**RDUpdateddate**的新列来插入每条记录的更新时间。

我创建了另一个 SSIS 包，我将其设置为每晚运行的 SqlServerJob。它获取在**RDUpdateddate**之后运行的所有事务并将它们复制到临时表。然后我使用存储过程来插入和更新我的表 B。

虽然这种方法有效。我想知道是否有一种更有效的方法可以在 SSIS 包本身中完成所有操作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T22:10:19.343

我通常为这种情况做的事情是这样的： ![在此处输入图像描述](https://i.stack.imgur.com/s90RW.png)

如果我很好地理解你在做什么，如果你想改变它，如果你想改变它，你不能确定一个寄存器是否改变，而不使用你在表 B 中创建的字段**RDUpdateddate** *，但我真的不认为是个好主意，你可以在每个表中使用一个哈希字段，只需将其添加到表中的查询中，每次执行包时都必须更新它*。

之后就是以表 A 作为左表的连接，以获取寄存器是新的还是旧的，您可以通过使用表 B 的一个字段来识别，如果该字段为空，则因为它不存在。

在条件拆分中，您应该使用表 B 的列来知道是否知道，如果它已经存在，您首选的更新方法。

**编辑：**

为了能够比较这两个表，您可以在表 A 中创建如下查询：

```
SELECT id, field1, field2, CHECKSUM(field1, field2) HASH_TOTAL FROM Table_A 
```

和表 B 中这样的查询：

```
SELECT id, field1, field2, CHECKSUM(field1, field2) HASH_TOTAL FROM Table_B 
```

然后在条件拆分中评估值是否相等、不同或不存在表 B 中的值。

* * *

我希望它有所帮助。

# c# - C# Metro 进度条到圆圈

> ID：16196910
> 
> 赞同：1
> 
> 时间：2013-04-24T16:05:45.807
> 
> 标签：c#, user-interface, progress-bar, microsoft-metro

我需要用酒吧做圆圈。

当有人仍然不明白时，这是我的图像： ![我的形象](https://i.stack.imgur.com/xqnjd.png "图片")

任何现有的控制是否有效？或者我应该以某种方式创建一个新控件？我使用了一个带有渐变的圆圈的新控件，但效果不一样:(

我也尝试画一个圆圈，但是当我在我的数学周期中使用 sin 和 cos 时，它会做一些我不想要的事情。

```
 double slice = 2 * Math.PI / 360;

        for (int i = 0; i < 360; i++)
        {
            double angle = slice * i;

            int x = (int)(0 + 300 * Math.Cos(angle)); // start x + radius * ...
            int y = (int)(0 + 300 * Math.Sin(angle));

            Line line = new Line()
            {
                X1 = 0,
                Y1 = 0,

                X2 = x,
                Y2 = y,

                Stroke = new SolidColorBrush(Colors.Red),
                StrokeThickness = 1.0
            };

            canvas.Children.Add(line);
        } 
```

编辑：地铁 = Xaml！！！

# c - 函数排序数组而不传递指针

> ID：16196914
> 
> 赞同：-1
> 
> 时间：2013-04-24T16:06:06.377
> 
> 标签：c, function, sorting

所以这是我的代码。

```
#include<stdio.h>
 int main()
 {
  int a[4]={6,2,7,3};
  sort(a,4);
  int i;
  for(i=0;i<4;i++)
  printf("%d",a[i]);
 }
  int sort(int a[],int n)
  {
   int i,j,temp;
   for (i=0; i< (n -1); i++)
   {
    for(j = (i+1); j < n; j++)
    {
     if (a[i]< a[j])
     {
       temp= a[i];
       a[i] = a[j];
       a[j] = temp;
     }
    }
   }
  } 
```

并且输出是 7632。我认为当传递给函数时，变量的值在 main 中永远不会改变（除非使用指针）。它只是影印和操作完成。但是这里 a[i] 的值在主函数中发生了变化。这是如何运作的？我什至没有返回排序后的数组。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T16:08:22.270

您正在传递一个指针；函数声明中的数组衰减为指向其第一个元素的指针。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T16:10:11.387

```
int sort(int a[],int n)
{
    ...
} 
```

`a` is a pointer even though you used `[]`. You cannot pass arrays in C or C++, instead a pointer to the first element is passed.

# javascript - 将长度值添加到 Buffer 的开头

> ID：16196915
> 
> 赞同：2
> 
> 时间：2013-04-24T16:06:11.503
> 
> 标签：javascript, node.js

我正在使用节点通过套接字发送一个二进制值，并且想在数据前面发送一个 4 字节长度的值，以便接收者知道需要多少数据。

如何使用缓冲区完成此操作？我使用 Protobuf for node 首先构造一个缓冲区，然后我需要将大小附加到缓冲区的开头。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T17:41:26.063

要追加到当前缓冲区的开头，最简单的方法是创建一个新缓冲区。

```
var buf = // Protobuf buffer

// Create a 4-byte buffer with the length.
var prefix = new Buffer(4);
prefix.writeUint32LE(buf.length, 0);

// Join them together as a new Buffer.
var data = Buffer.concat([prefix, buf]); 
```

# c - Visual Studio 2010 C 项目 - 作为服务安装

> ID：16196919
> 
> 赞同：0
> 
> 时间：2013-04-24T16:06:30.480
> 
> 标签：c, visual-studio-2010, service, installation, setup-project

我有一个在 Visual Studio 2010 中构建的程序。该项目有一个安装程序，它是使用 Visual Studio 的“安装项目”模板构建的。当我想将我的程序安装为用户调用的程序时，它可以工作。

但是，我的程序需要在启动时作为 Windows 服务运行，而且我似乎找不到任何关于让安装项目为 C++ 执行此操作的指南。

Visual Studio 2010 安装项目需要采取哪些步骤才能将我的程序安装为 Windows 服务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T06:34:43.500

我不确定 VS Setup 项目是否可行。在 NSIS 中你可以使用[http://nsis.sourceforge.net/NSIS_Simple_Service_Plugin](http://nsis.sourceforge.net/NSIS_Simple_Service_Plugin)这个插件。

因此，一个快速的解决方案是创建简单的 NSIS 安装程序（.exe 应用程序）并从您的安装程序中启动它。

# css - 在纯css中单击其父div时如何使子div可见

> ID：16196923
> 
> 赞同：4
> 
> 时间：2013-04-24T16:06:39.883
> 
> 标签：css

我有一个 html 结构，通常具有“内容类”的 div 对用户可见，而具有“内容提示”的 div 是可见的，直到用户单击或将鼠标悬停在“类头”的 div 上。

```
<div class='head'> 
   <div class='content'>  content </div>  <!- visible -->
   <div class='tip'>  tip </div>   <!- invisible -->
</div> 
```

当然，我可以使用代码使“类提示”在我单击父元素时显示。但是，我只是好奇是否可以使用纯 css 来做到这一点。

[我在网上](http://tympanus.net/codrops/2012/12/17/css-click-events/)找到了一种 css 技术

```
.to-be-changed {
    color: black;
}

input[type=checkbox]:checked ~ .to-be-changed {
    color: red;
} 
```

演示有效，但它适用于输入元素和检查事件，当涉及到 div 元素时如何做

我也试过这个

```
.head.hover ~ .tip {
    color: red;
}

.tip {
    color: black;
} 
```

但由于某种原因不起作用

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T08:21:20.510

您的 CSS 无法正常工作的原因是两个小错误。

首先，`.head.hover`定义两个*类*选择器`.head`，`.hover`而您确实想要[`:hover`](http://www.w3.org/TR/css3-selectors/#useraction-pseudos)用户操作伪类。

其次，`.head.hover ~ .tip`使用[`~`](http://www.w3.org/TR/css3-selectors/#general-sibling-combinators)通用的兄弟组合器，它只适用于`.head.hover`前面带有 的元素`.tip`，即元素必须*“在文档树中共享相同的父级”*。您可以使用 [后代组合](http://www.w3.org/TR/css3-selectors/#descendant-combinators)器或[子组合](http://www.w3.org/TR/css3-selectors/#child-combinators)器来定位`.tip` *child*。我在以下示例中使用了后者：

所以修复这些问题会导致 CSS：

```
.head:hover > .tip {
    color: red;
}

.tip {
    color: black;
} 
```

这会改变悬停时的*提示*颜色。

关于 CSS 点击事件，有许多不同的方法来实现 CSS*点击*事件，如您链接到的博客中所讨论的。

一种可能适合您的情况的方法是`:focus`方法，它依赖于具有`tabindex`.

**HTML**

```
<div class="head" tabindex="1"> 
   <div class="content">  content </div>
   <div class="tip">  tip </div>
</div> 
```

**CSS**

```
.head .tip {
    display:none;
}

.head:focus .tip {
    display:block;
} 
```

[**看演示**](http://jsfiddle.net/nY4Dx/)

# php - 尝试使用 jquery .post() 将数据发送到 php 文件，但数据永远不会到达那里

> ID：16196927
> 
> 赞同：0
> 
> 时间：2013-04-24T16:06:46.700
> 
> 标签：php, javascript, jquery, html

在我的 insert.php 文件中，我有以下内容

```
<script type="text/javascript"   src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js">
<script type="text/javascript" src="includes/js/jquery.form.js"></script>
<script type="text/javascript">

$(document).ready(function() {
$(".like").click(function() {
var data = $(this).attr('data-id');
$.post("data.php", {'name': data}, function(response){
  $('#dv').html(response);
});
});
 }); 
```

...

```
<? echo "<br><a href class=like id=buton data-id='$id'> Like (" . $row['likes'] . ")</a>"; ?> 
```

...

在 data.php 我有（仅用于测试目的）

```
<script type="text/javascript"          src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js">
<script type="text/javascript" src="includes/js/jquery.form.js"></script>
<script type="text/javascript">
alert(<? echo $_GET['name']; ?>);
</script> 
```

...

我试图弄清楚为什么当我单击类似链接时 $_GET['name'] 未定义。我到达 data.php 文件但没有“名称”数据。我是 php 和 jquery 的新手，所以请不要在回答问题时对我已有的内容做出假设。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T16:10:21.137

Because you are doing a post and not a get. Why not use $.get() ?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T16:12:50.917

您正在通过发送数据`POST`并检查`$_GET`为空的 php 变量，因为您没有通过`GET`.

改变这个：

```
alert(<? echo $_GET['name']; ?>); 
```

至：

```
alert("<? echo $_POST['name']; ?>"); 
```

# map - 运行时异常：java.lang.NoSuchMethodException：tfidf$Reduce。 ()

> ID：16196931
> 
> 赞同：4
> 
> 时间：2013-04-24T16:06:54.247
> 
> 标签：map, hadoop, mapreduce, hdfs, reduce

如何解决这个问题：tfidf is my main class 为什么在运行 jar 文件后会出现这个错误？

```
java.lang.RuntimeException: java.lang.NoSuchMethodException: tfidf$Reduce.<init>()
    at org.apache.hadoop.util.ReflectionUtils.newInstance(ReflectionUtils.java:115)
    at org.apache.hadoop.mapred.Task$OldCombinerRunner.combine(Task.java:1423)
    at org.apache.hadoop.mapred.MapTask$MapOutputBuffer.sortAndSpill(MapTask.java:1436)
    at org.apache.hadoop.mapred.MapTask$MapOutputBuffer.flush(MapTask.java:1298)
    at org.apache.hadoop.mapred.MapTask.runOldMapper(MapTask.java:437)
    at org.apache.hadoop.mapred.MapTask.run(MapTask.java:372)
    at org.apache.hadoop.mapred.Child$4.run(Child.java:255)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAs(Subject.java:396)
    at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1121)
    at org.apache.hadoop.mapred.Child.main(Child.java:249)
 Caused by: java.lang.NoSuchMethodException: tfidf$Reduce.<init>()
    at java.lang.Class.getConstructor0(Class.java:2715)
    at java.lang.Class.getDeclaredConstructor(Class.java:1987)
    at org.apache.hadoop.util.ReflectionUtils.newInstance(ReflectionUtils.java:109)
    ... 10 more 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-24T16:57:18.350

我认为它正在尝试实例化一个reducer。将您的减速器类声明为静态并尝试。

# android - Android自定义视图不可见

> ID：16196937
> 
> 赞同：1
> 
> 时间：2013-04-24T16:07:05.433
> 
> 标签：android, xml, layout, view

我想创建一个基于 XML 布局的自定义视图。布局本身工作正常，例如在可视化编辑器中打开时。但是当使用我的自定义视图类时，它是不可见的。在编辑器中以及在实际设备上。

这是我的视图类：

```
public class MyCustomClass extends RelativeLayout {

    public MyCustomClass (Context context, AttributeSet attrs)
    {
        super(context, attrs);

        View.inflate(context, R.layout.mycoollayout, this);
    }
} 
```

充气有问题吗？还是其他什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-11-29T05:32:09.640

更改 View.inflate(context, R.layout.mycoollayout, this); 膨胀(getContext(),R.layout.mycoollayout, this);

# eclipse - 在 Eclipse EE 中为我的 servlet 设置 POI（在 Mac 上）

> ID：16196939
> 
> 赞同：0
> 
> 时间：2013-04-24T16:07:06.280
> 
> 标签：eclipse, jakarta-ee, tomcat, servlets, apache-poi

我已经下载了包含几个 .jar 文件的 Apache POI。我想将它用于我的 servlet（使用 Eclipse EE 版本进行开发）。我已经在我的“lib”文件夹中添加了所有 .jar 文件并将它们添加到构建路径中。此时我可以正常启动我的Tomcat（没有错误）。

但后来我写了一个简单的代码如下：

```
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    Workbook wb = new HSSFWorkbook();
    FileOutputStream fileOut = new FileOutputStream("workbook.xls");
    Sheet sheet1 = wb.createSheet("new sheet");
    wb.write(fileOut);
    fileOut.close();
} 
```

我什至无法启动我的 tomcat，这给了我以下错误消息：

```
java.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/secas]]
at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:222)
at java.util.concurrent.FutureTask.get(FutureTask.java:83)
at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1123)
at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:800)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
at java.util.concurrent.FutureTask.run(FutureTask.java:138)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:895)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:918)
at java.lang.Thread.run(Thread.java:680)
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/secas]]
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
... 7 more
Caused by: java.lang.NoClassDefFoundError: org/apache/poi/ss/usermodel/Workbook
at java.lang.Class.getDeclaredFields0(Native Method)
at java.lang.Class.privateGetDeclaredFields(Class.java:2300)
at java.lang.Class.getDeclaredFields(Class.java:1745)
at org.apache.catalina.util.Introspection.getDeclaredFields(Introspection.java:106)
at org.apache.catalina.startup.WebAnnotationSet.loadFieldsAnnotation(WebAnnotationSet.java:261)
at org.apache.catalina.startup.WebAnnotationSet.loadApplicationServletAnnotations(WebAnnotationSet.java:140)
at org.apache.catalina.startup.WebAnnotationSet.loadApplicationAnnotations(WebAnnotationSet.java:67)
at org.apache.catalina.startup.ContextConfig.applicationAnnotationsConfig(ContextConfig.java:405)
at org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:881)
at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:369)
at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)
at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5269)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
... 7 more
Caused by: java.lang.ClassNotFoundException: org.apache.poi.ss.usermodel.Workbook
at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1713)
at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1558)
... 21 more
Apr 24, 2013 11:59:46 PM org.apache.catalina.core.ContainerBase startInternal
SEVERE: A child container failed during start
java.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost]]
at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:222)
at java.util.concurrent.FutureTask.get(FutureTask.java:83)
at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1123)
at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:302)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
at org.apache.catalina.core.StandardService.startInternal(StandardService.java:443)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:732)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
at org.apache.catalina.startup.Catalina.start(Catalina.java:684)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:322)
at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:456)
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost]]
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
at java.util.concurrent.FutureTask.run(FutureTask.java:138)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:895)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:918)
at java.lang.Thread.run(Thread.java:680)
Caused by: org.apache.catalina.LifecycleException: A child container failed during start
at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1131)
at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:800)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
... 7 more
Apr 24, 2013 11:59:46 PM org.apache.catalina.startup.Catalina start
SEVERE: Catalina.start: 
org.apache.catalina.LifecycleException: Failed to start component [StandardServer[8005]]
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
at org.apache.catalina.startup.Catalina.start(Catalina.java:684)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:322)
at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:456)
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardService[Catalina]]
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:732)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
... 7 more
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina]]
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
at org.apache.catalina.core.StandardService.startInternal(StandardService.java:443)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
... 9 more
Caused by: org.apache.catalina.LifecycleException: A child container failed during start
at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1131)
at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:302)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
... 11 more
Apr 24, 2013 11:59:46 PM org.apache.catalina.startup.Catalina start
INFO: Server startup in 368 ms 
```

请帮忙...

PS我的环境是：-eclipse：Juno SR2-tomcat：7.0-Apache POI 3.9

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T16:14:29.410

```
java.lang.NoClassDefFoundError: org/apache/poi/ss/usermodel/Workbook 
```

这意味着一些 .jar(s) 不在类路径中；打开`Project properties`>`Deployment Assembly`并添加 .jar(s)

# c# - ref 与 out 参数有什么区别？

> ID：16196940
> 
> 赞同：-3
> 
> 时间：2013-04-24T16:07:07.023
> 
> 标签：c#, parameters

`ref`在 C# 中，和`out`参数有什么区别？

例子：

```
void method1(ref int p1)
{
 //....
}

void method2(out int p2)
{
 //....
} 
```

另外，每个的使用指南是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-24T16:17:42.987

ref 参数和 out 参数*都为变量创建别名*。也就是说，当你说：

```
M(int x) { ... }
...
int y = 123;
M(y); 
```

然后传递 y 的*值*，并且 x 获取该值的副本。

当你说

```
N(ref int x) { ... }
...
int y = 123;
N(ref y); 
```

那么*x 和 y 是同一个变量的两个名称*。对 x 的更改会导致对 y 的更改。

从调用者的角度来看， ref 和 out 之间的唯一区别是，*由 ref 别名的变量必须在 call 之前明确分配*。这是合法的：

```
O(out int x) { ... }
...
int y; // no initialization!
O(out y); 
```

但这不是：

```
N(ref int x) { ... }
...
int y; // no initialization!
N(ref y); 
```

*从被调用者的*角度来看，唯一的区别是：

*   `ref`可以假设最初分配了一个参数；`out`参数不能。
*   `out`必须在控制正常离开方法之前分配参数。也就是说，这是非法的：

    `void O(out int x) { return; }`

    `x`必须在返回之前分配。

在幕后，`ref`和`out`有同样的实现；唯一的区别是编译器如何跟踪变量是否被赋值。

它们的使用指南是：

*   如果您可以避免它们，请避免它们。
*   如果您无法避免它们，请在*通过修改变量逻辑返回值时使用“out”，在**读取变量的值然后可能修改变量*时使用“ref” 。一个 out*必须*修改，并且*不能*读取（修改之前）。ref*可以*修改并且*可以*在修改之前读取。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-24T16:12:21.940

直接来自 MSDN 文档：

> out 关键字导致参数通过引用传递。这类似于 ref 关键字，不同之处在于 ref 要求在传递变量之前对其进行初始化。

来源： http: [//msdn.microsoft.com/en-US/library/t3c3bfhx (v=vs.80).aspx](http://msdn.microsoft.com/en-US/library/t3c3bfhx(v=vs.80).aspx)

我觉得这已经够清楚了。如果这不能回答您的问题，请告诉我。

另一个懒惰的例子的复制粘贴：

```
class OutExample
{
    static void Method(out int i)
    {
        i = 44;
    }
    static void Main()
    {
        int value;
        Method(out value);
        // value is now 44
    }
} 
```

因此，在这种情况下，如果是这样，则`Method(ref int i)`该方法将要求`i`首先对其进行初始化。

# c# - 绑定队列 使用 PointAndFigure 图表

> ID：16196946
> 
> 赞同：0
> 
> 时间：2013-04-24T16:07:22.013
> 
> 标签：c#, charts

我无法弄清楚如何将 a 绑定`Queue<double>`到 C# 中的 PointAndFigure 图表。我已经做了：

```
// q is a Queue<double> modified somewhere else
pointAndFigureChart1.DataSource = q; 
```

我想我还需要设置`XValueMembers`or `YValueMembers`。问题是我不知道*列*的名称，因为我的数据源中根本没有列！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T17:32:11.210

根据我对图表的经验，您需要将队列数据添加到系列并将该系列添加到图表控件。像这样的东西。

```
this.chart1.Series.Add("Series1");
this.chart1.Series["Series1"].Points.DataBindY(myQ); 
```

# msbuild - 如何通过 MSBuild 在 TFS2010 中很好地显示 NUnit 错误

> ID：16196948
> 
> 赞同：1
> 
> 时间：2013-04-24T16:07:27.360
> 
> 标签：msbuild, nunit, tfsbuild

我正在尝试将 NUnit 集成到 TFS 构建工作流程中。

我发现了 MSBuild.Community.Tasks NUnit 集成，这很棒。作为 TFS 构建的一部分，我可以在我的测试 DLL 上运行 NUnit。到目前为止，一切都很好。

当我直接通过 MSBuild 运行它时，我可以看到 NUnit 的输出。但是当它从 TFSBuild 调用时有两个问题：

1.  NUnit 错误根本不显示。我只看到： `"nunit-console.exe" exited with code 1.`
2.  即使它通过了，因为它是构建工作流程步骤的一部分，而不是测试步骤的一部分，我看到`No Test Results`

我是否错误地使用了 MSBuild 任务？或者我可能需要不同的 TFS 工作流程？我是一个 msbuild 新手，所以任何帮助将不胜感激。

谢谢

本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T17:00:07.227

你没有提到你使用的是什么版本的 TFS/VS。

我最好的建议是升级（如有必要）到 VS 2012 + TFS 2012，因为现在支持本机运行的 NUnit 测试，无需任何自定义或跳跃。

VS 2012 有一个新的测试运行器，可以运行 NUnit 测试（以及 MSTest、XUnit、MbUnit 等）。TFS Build 2012 支持使用新的测试运行器，一切都将与您使用 MSTest 几乎完全相同。

可以在此博客文章中看到一个示例：[http ://www.mytechfinds.com/articles/software-testing/6-test-automation/72-running-nunit-tests-from-team-foundation-server-2012-持续集成构建](http://www.mytechfinds.com/articles/software-testing/6-test-automation/72-running-nunit-tests-from-team-foundation-server-2012-continuous-integration-build)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T22:45:16.947

尝试[使用 NUnit 进行团队构建](http://nunit4teambuild.codeplex.com/)@CodePlex

# c# - Windows 8 应用导航设计

> ID：16196951
> 
> 赞同：0
> 
> 时间：2013-04-24T16:07:32.017
> 
> 标签：c#, xaml, windows-8

我想创建一个细节级别等于 3 的 Windows 8 应用程序。

我考虑创建一个平面系统，其中我的一些页面将具有分层系统。（更多关于这里 ---> [Msdn Navigation Design](http://msdn.microsoft.com/en-us/library/windows/apps/hh761500)）

我必须实现以下类型的导航：内容 --> 欧洲法律 ---> 决定 ---> 决定编号。155.

这个导航设计能通过Windows Store Check吗？

如果您知道任何接受的模板，其详细程度等于 3，我愿意接受建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T05:41:52.597

*首先是免责声明：我不评估 Windows 商店的应用程序，因此我不能代表 Windows 商店评论者将接受或不接受什么。*

也就是说，我不知道有任何具体规则不能超过三个级别。“不超过三个级别”背后的动机是用户不会在他或她的导航中迷失方向。从我所见，您在这里有一个相当清晰的信息层次结构，我想说的是设计指南的精神。

如果您确实想探索其他选项，请查看现在商店中具有类似分层域的应用程序。也许食谱应用程序？[CodePlex 上的 Windows 8 Design 模板](http://www.codeplex.com/site/users/view/win8templates)是另一个资源，尽管我没有仔细阅读它们。我不确定它们中的任何一个是否超过三个级别，但它们可能会为您激发一些导航或设计替代方案。

# javascript - JQuery多次提取字符串

> ID：16196959
> 
> 赞同：2
> 
> 时间：2013-04-24T16:07:43.597
> 
> 标签：javascript, jquery

鉴于以下 HTML 位于 JavaScript 字符串变量中，我想使用 JQuery 将值 1234、5678、9012 提取到数组中：

```
<input type="hidden" id="name" value="1234"/>
<input type="hidden" id="name" value="5678"/>
<input type="hidden" id="name" value="9012"/> 
```

我尝试了各种 reg 表达式，但在循环或环绕`$each`字符串以查找所有`values="xxxx"`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T16:09:49.230

首先，不要`id`多次使用 duplicate 。

使用一个类，然后使用 `$('.class').each(); 获取元素

```
var elements = [];
$('.classname').each(function() {
    elements.push($(this).val());
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T16:14:14.347

如果它在字符串中，您可以简单`$(<string-value>)`地将其转换为 jQuery 对象，然后使用该`.filter()`函数遍历输入元素：

```
var str = '<input type="hidden" id="name" value="1234"/>\
<input type="hidden" id="name" value="5678"/>\
<input type="hidden" id="name" value="9012"/>',
values = [];

$(str).filter('input').each(function() {
    values.push(this.value);
}); 
```

[**演示**](http://jsbin.com/ebiqaz/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T16:27:41.900

```
var html = '<input type="hidden" id="name" value="1234"/><input type="hidden" id="name" value="5678"/><input type="hidden" id="name" value="9012"/>';

var temp = document.createElement('div');
temp.innerHTML = html;
var inputs = temp.getElementsByTagName('input');
var values = [];
for (var i=0; i< inputs.length; i++)
{
    if(inputs[i].type == 'hidden'){
        values.push(inputs[i].value);
    }
};
alert(values.join(',')); 
```

[演示](http://jsfiddle.net/arcm111/NSZEV/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T16:09:56.227

注意：ID***必须***是唯一的。

但是，您可以这样做：

```
var arr=[];
$('input[type="hidden"]').each(function(){
    arr.push($(this).val());
}); 
```

演示：http: [//jsfiddle.net/dirtyd77/XNhas/](http://jsfiddle.net/dirtyd77/XNhas/)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-24T16:10:58.783

Add a class to them for easier selecting.

Until that, you can try something like this:

```
 var results = []
 $('input[type="hidden"]').each(function(){
  results.push($(this).val())
 }) 
```

# jquery - divs调整大小和覆盖jquery

> ID：16196962
> 
> 赞同：1
> 
> 时间：2013-04-24T16:07:48.470
> 
> 标签：jquery, resize, height, direction

我创建了一个有 4 个 div 的容器。我需要在悬停时改变 div 的大小并覆盖其他 div。

这里有一个演示[http://jsbin.com/ecuzof/113/edit](http://jsbin.com/ecuzof/113/edit)

问题：我希望底部 div 从下到上而不是像现在一样从上到下增长。

是否可以？谢谢G。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T16:18:25.053

# [工作示例](http://jsbin.com/ecuzof/119/edit)

您可以设置为`bottom`，`0`然后 div 将从底部向上设置动画。另外，请注意我创建了两个事件 - 一个用于顶部 div，一个用于底部集。

```
$(".riga .hoverific").hover(function() {
  $(this).stop().animate({
    width: "70%",
    height: "70%",
    backgroundColor: "lightBlue"
  }).css({'z-index':'3'});
}, function() {
  $(this).stop().animate({
    width: "50%",
    height: "50%",
    backgroundColor: "silver"
  }).css({'z-index':'1'});
});

$(".riga2 .hoverific").hover(function() {
  $(this).stop().animate({
    width: "70%",
    height: "70%",
    bottom: "0%",
    backgroundColor: "lightBlue"
  }).css({'z-index':'3'});
}, function() {
  $(this).stop().animate({
    width: "50%",
    height: "50%",
    backgroundColor: "silver"
  }).css({'z-index':'1'});
}); 
```

# c - 更改数组数据的功能 - 数据不变。C

> ID：16196965
> 
> 赞同：0
> 
> 时间：2013-04-24T16:08:12.643
> 
> 标签：c, arrays, pointers, reference, populate

我是 C 新手，但几周前我已经用 pascal 编程过。在 pascal 中，如果要更改数组数据，则通过引用传递，`var myArray`本质上是键入。我不知道如何在 C 中做到这一点。我读过很多问题，但似乎都没有。这是我到目前为止所拥有的。

```
void set_up_elements(char (*array_to_populate)[20])
{
    char* buffer;
    FILE *f;
    f=fopen("elementList.txt","r");
    char copied_text[118][20];
    int i=0;
    while (!feof(f))
    {
        fgets(copied_text[i],80,f);
        ++i;
    }
    //Close the file to free up memory and prevent leaks
    fclose(f);
    f = NULL;
} 
```

这是我填充数组的代码，我将元素周期表中的元素列表读入数组`copied_text`。这部分有效，它成功填充了函数内部的数组。

```
int main()
{
    char element_array[118][20];
    set_up_elements(element_array);
<..>
} 
```

这就是我试图称呼它的方式。数组的内容`element_array`不会改变。有谁知道如何解决这一问题？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T16:14:25.023

1）以下行是错误的

```
fgets(copied_text[i],80,f); 
```

字符串数组中一个元素字符串的大小为`20`. 你把最大的字符放在你的`fgets()`函数中是`80`

所以将其更改为：

```
fgets(copied_text[i],sizeof(copied_text[0]),f); 
```

2）您可以更改此代码：

```
while (!feof(f))
    {
        fgets(copied_text[i],80,f);
        ++i;
    } 
```

和

```
while (i<118 && fgets(copied_text[i++],80,f)); 
```

3）你的函数的输入参数

```
void set_up_elements(char (*array_to_populate)[20]) 
```

未在您的函数中使用。似乎您想将其填充到您的函数中，但事实并非如此，您正在使用调用者看不到的另一个数组（本地数组）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T16:16:48.157

应用左右阅读规则来理解问题......

`char element_array[118][20]`表示 element_array 是 118 个 20 个字符的块的数组。

另一方面，`char (*array_to_populate)[20]`由于括号，array_to_populate 是一个指向 20 个字符数组的指针。

您可以使用`char (&array_to_populate)[118][20]`这意味着 array_to_populate 是对 118 个 20 个字符的块的引用。

也就是说，最大的问题是在您的函数中，您正在读取一个临时数组，而您永远不会复制到传入的数组中。此外，您读取的文件大小错误。以下应该完成工作......

```
#define DIM1 118
#define DIM2 20

void set_up_elements(char (&array_to_populate)[DIM1][DIM2])
{
    int i=0;
    FILE *f=fopen("elementList.txt","r");

    for (i = 0; f && !feof(f) && i < DIM1; i++ )
    {
        fgets(array_to_populate[i],sizeof(array_to_populate[0]),f);
    }

    //Close the file to free up memory and prevent leaks
    fclose(f);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T16:25:41.213

```
void set_up_elements(char (*array_to_populate)[20])
{
    char* buffer;//unuse var
    FILE *f;
    f=fopen("elementList.txt","r");
    int i=0;
    while (!feof(f))//caution
    {
        fgets(&(*array_to_populate[i]),20,f);
        ++i;
    }
    //Close the file to free up memory and prevent leaks
    fclose(f);
    f = NULL;
} 
```

# java - Tomcat WebSocket 错误

> ID：16196969
> 
> 赞同：-1
> 
> 时间：2013-04-24T16:08:30.610
> 
> 标签：java, tomcat, websocket

我按照这个[链接](https://gist.github.com/chitan/3063774)使用 tomcat 制作 websocket 服务器。当我尝试访问 websocket 时，我的 firefox 说它无法建立连接。

这是我的代码

```
public class WsChatServlet extends WebSocketServlet
{
private static final long serialVersionUID = 1L;
private static ArrayList<MyMessageInbound> mmiList = new ArrayList<MyMessageInbound>();

@Override
protected StreamInbound createWebSocketInbound(String string) {
    System.out.println("CreateWebSocketInbound()");
    return new MyMessageInbound();
}

private class MyMessageInbound extends MessageInbound
{
    WsOutbound myoutbound;

    @Override
    protected void onBinaryMessage(ByteBuffer bb) throws IOException {
        System.out.println("onBinaryMessage()");
    }

    @Override
    protected void onTextMessage(CharBuffer cb) throws IOException {            
        System.out.println("Accept Message : "+ cb);
        for (MyMessageInbound mmib : mmiList)
        {
            CharBuffer buffer = CharBuffer.wrap(cb);
            mmib.myoutbound.writeTextMessage(CharBuffer.wrap("Hello!"));
            mmib.myoutbound.flush();
        }
    }

    @Override
    protected void onOpen(WsOutbound outbound) {
        System.out.println("onOpen()");
        try {
            System.out.println("Open Client.");
            this.myoutbound = outbound;
            mmiList.add(this);
            outbound.writeTextMessage(CharBuffer.wrap("Hello!"));
        } catch (IOException ex) {
            Logger.getLogger(WsChatServlet.class.getName()).log(Level.SEVERE, null, ex);
        }
    }

    @Override
    protected void onClose(int status) {
        System.out.println("Close Client.");
        mmiList.remove(this);
    } 
} 
```

这是服务器日志

```
24 Apr 13 22:53:09 org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet [WsChatServlet] in context with path [/HelloWebSocket] threw exception
java.lang.ClassCastException: org.netbeans.modules.web.monitor.server.MonitorRequestWrapper cannot be cast to org.apache.catalina.connector.RequestFacade
    at org.apache.catalina.websocket.WebSocketServlet.doGet(WebSocketServlet.java:126)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.netbeans.modules.web.monitor.server.MonitorFilter.doFilter(MonitorFilter.java:393)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:307)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662) 
```

如何解决这个问题以及如何使日志内码格式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T19:40:31.450

这是 Tomcat 7.0.27 中的一个错误。我建议你使用 7.0.37，或者使用像[Atmosphere](https://github.com/Atmosphere/atmosphere)这样的框架（会屏蔽此类问题）

——让弗朗索瓦

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T16:15:00.710

检查您的 Tomcat 版本。Websockets 不是标准的，不同的服务器对 websocket 有不同的实现。我曾经将 websockets 与 tomcat 一起使用，它过去只能与 tomcat 7.0.27 一起使用。即使使用 7.0.29，它也无法正常工作。因此，我建议检查您是否可以找到您的教程使用的服务器或尝试使用不同的版本。

# java - 融合图x轴可以用标签代替点来表示吗

> ID：16196974
> 
> 赞同：0
> 
> 时间：2013-04-24T16:08:40.943
> 
> 标签：java, smartgwt, labels, fusioncharts

众所周知，Fusion图表将x轴点作为标签，它们之间具有相等的空格，但我想给x轴一个实数，它们之间有一个实数空格。

那么我可以在融合图中使用实点而不是标签吗？现在是这样的：

15

12

9

6

3

0 1_ **10** _11 **_1 2** _90

但我想用这样的可变距离x轴间隔来制作它：

12

9

6

3

0

1 **_ 2 *_* __ *_* __ *_* __ *_* _** 10 **_ 11 *_* _** 15

我希望值或标签具有真实的距离。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T17:57:34.850

据我所知，您需要一个数字 x 轴和一个数字 y 轴。这种图表是 XY 图。在 FusionCharts 套件中，您可以考虑使用[散点图](http://www.fusioncharts.com/demos/gallery/#bubble-and-xycharts)。

使用散点图，您甚至可以绘制折线图。有一个论坛帖子详细说明了[散点图](http://forum.fusioncharts.com/topic/4201-line-chart-in-scatter-xy-chart/?p=15476)[`drawLine`的FusionCharts节点上属性`dataset`](http://forum.fusioncharts.com/topic/4201-line-chart-in-scatter-xy-chart/?p=15476)的使用。

`XML`带连接线的散点图示例数据：

![在此处输入图像描述](https://i.stack.imgur.com/QKJmo.png)

```
<chart palette='2' anchorradius='6' anchorsides='0'>
   <categories>
        <category x='1' label='1' />
        <category x='2' label='2' />
        <category x='10' label='10' />
        <category x='11' label='11' />
        <category x='15' label='15' />
    </categories>

   <dataset drawLine='1' seriesName='Server 1'>
      <set y='2.4' x='1' />
      <set y='3.5' x='2' />
      <set y='2.5' x='10' />
      <set y='4.1' x='11' />
      <set y='3.5' x='15' />
   </dataset>

   <dataset drawLine='1' seriesName='Server 2'>
      <set y='1.4' x='1'/>
      <set y='1.5' x='2'/>
      <set y='1.5' x='10'/>
      <set y='1.1' x='11'/>
      <set y='1.5' x='15'/>
   </dataset>
</chart> 
```

但是，如果您打算绘制列，则需要插入空白`category`节点以进行模拟。

`XML`多系列图表的 示例数据：![在此处输入图像描述](https://i.stack.imgur.com/r7QXv.png)

```
<chart showValues='0' numberPrefix='$'>
   <categories>
      <category label='1' />
      <category label='2' />
      <category label='' />
      <category label='' />
      <category label='' />
      <category label='' />
      <category label='' />
      <category label='' />
      <category label='' />
      <category label='10' />
      <category label='11' />
      <category label='' />
      <category label='' />
      <category label='' />
      <category label='15' />
   </categories>
   <dataset seriesName='2006'>
      <set value='27400' />
      <set value='29800'/>
      <set value='' />
      <set value='' />
      <set value='' />
      <set value='' />
      <set value='' />
      <set value='' />
      <set value='' />
      <set value='31900' />
      <set value='34800' />
      <set value='' />
      <set value='' />
      <set value='' />
      <set value='31800' />
   </dataset>
   <dataset seriesName='2005'>
      <set value='10000'/>
      <set value='11500'/>
      <set value='' />
      <set value='' />
      <set value='' />
      <set value='' />
      <set value='' />
      <set value='' />
      <set value='' />
      <set value='22900' />
      <set value='20800' />
      <set value='' />
      <set value='' />
      <set value='' />
      <set value='19700' />
   </dataset>
</chart> 
```

上面的示例应该允许您在任何其他图表中创建类似的数据。

# c# - 使用 asp.net 从限制批量电子邮件的 smtp 服务器发送批量电子邮件

> ID：16196978
> 
> 赞同：1
> 
> 时间：2013-04-24T16:08:54.957
> 
> 标签：c#, asp.net, bulk-mail

我有一个我们公司的 smtp 服务器（电子邮件 ID），现在我想推销一种公司产品，我想每天发送大约 15000 封邮件，但是我的公司邮件 ID 限制了我每天 150 封邮件，有什么办法可以从我的公司 ID 发送 15k 邮件，或者有什么方法可以从另一个 smtp 服务器发送邮件，但在 TO 中它应该只显示我的公司 ID。

谁能给我一些解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T16:26:55.833

除了更改限制外，您还应该分批发送它们以避免邮件服务器过载。以下是有关如何使用 Web 表单中的控制台应用程序执行此操作的说明：

[http://www.codersbarn.com/post/2011/11/08/Calling-Console-Application-from-Web-Form.aspx](http://www.codersbarn.com/post/2011/11/08/Calling-Console-Application-from-Web-Form.aspx)

# python - 如何在 Python 中从远程系统检索环境变量？

> ID：16196980
> 
> 赞同：3
> 
> 时间：2013-04-24T16:08:58.650
> 
> 标签：python, ssh, environment-variables

我正在尝试在 Python 中检索远程 Linux 服务器的环境变量。或者，如果我可以在我正在执行的命令中使用变量名，那也很好。据我所知，我正在拨打的电话应该可以正常工作，但我正在取回垃圾。我已经设置了公钥认证，所以不需要密码。

努力一：

```
devdir = subprocess.check_output(["ssh", connectstring, "echo $DEVDIR"]) 
```

努力2：

```
ret = subprocess.check_output(["ssh", connectstring, 
    "$DEVDIR/{0}".format(testpath)]) 
```

`connectstring`是 user@ip 并且工作正常。`$DEVDIR`是我要使用的远程变量并包含路径。`testpath`是我要执行的脚本的路径，植根于`$DEVDIR`.

Effort 1 返回“\n”，Effort 2 无法远程解析 $DEVDIR。

* * *

努力3：

```
import paramiko
...
ssh = paramiko.SSHClient()
ssh.connect(ip, user)    # succeeds
stdin, stdout, stderr = ssh.exec_command("echo $DEVDIR") 
```

结果：stdout.readlines() = "\n"

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T17:05:06.630

如果环境变量设置在 中，您可以使用该选项`.bashrc`强制远程命令在登录 shell 下运行。`-l`以下...

```
devdir = subprocess.check_output(["ssh", connectstring, "sh -l -c 'echo $DEVDIR'"]) 
```

...为我工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T16:51:51.473

执行命令 va SSH 不会产生登录会话。所以有些变量可能没有设置。

您可以通过将变量替换为另一个变量来检查这一点，例如`$HOSTNAME`or`$HOST`或`$SSH_CONNECTION`or 执行`env`命令。

一种解决方案可能是将变量赋值放入一个文件中，该文件也在非登录会话中执行。`.bashrc`不过应该没问题；也许里面的某个地方有缺陷。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-24T16:10:56.607

尝试这个：

```
devdir = subprocess.check_output(["ssh -i", connectstring, "echo $DEVDIR", FALSE]) 
```

这有点像黑客，但它应该有所帮助。

# fortran - fortran openmp 嵌套循环通信开销

> ID：16196982
> 
> 赞同：1
> 
> 时间：2013-04-24T16:09:00.570
> 
> 标签：fortran, openmp

我的目标是离开 MATLAB，转而使用 Fortran 完成我的大部分工作。其中一项努力是通过 MATLAB 的 parfor 循环将并行化替换为 Fortran openMP 指令。这总是更快，但由于某种原因，使用 openMP 的 CPU 利用率（由 taskmgr 测量）低于 parfor（特别是对于较小的问题）。我的假设是，这是由于通信开销造成的，如果 CPU 利用率接近 100%（如 MATLAB），那么对于小问题，代码会快得多。我的问题有两个：

1.  有没有办法提高以下代码的效率（使用 openMP 指令）？
2.  如果不是，那么效率低下的根源是什么？您建议如何补救？

尝试（不成功）的解决方案：

1.  添加子句 collapse(5)（用于 5 个嵌套循环）
2.  明确声明一切（即，不使用默认（共享））
3.  KMP_SET_BLOCKTIME(1000) 保持线程打开直到下一个 omp 并行执行

CPU 利用率数据（Windows 7 64 位，双四核英特尔至强 3Ghz）：

*   小问题 (*_pts = 5):
    Fortran (openMP), 时间: 40s, CPU util.: 60%
    MATLAB (parfor), 时间: 45s, CPU util.: 90%
    -> MATLAB 耗时 1.125 倍

*   中等问题 (*_pts = 6):
    Fortran (openMP), 时间: 78s, CPU util.: 75%
    MATLAB (parfor), 时间: 96s, CPU util.: 90%
    -> MATLAB 耗时 1.231 倍

*   大问题（*_pts = 7）：
    Fortran（openMP），时间：150s，CPU util.：100%
    MATLAB（parfor），时间：205s，CPU util.：100%
    -> MATLAB 耗时 1.367 倍

例子：

```
 do while (converged == -1)
    istart = omp_get_wtime()               ! Iteration timer start
    !$omp parallel do default(shared) private(start,state,argzero)
    do i5 = 1,Oepsr_pts
     do i4 = 1,Ozeta_pts
      do i3 = 1,Oz_pts
       do i2 = 1,Or_pts
        do i1 = 1,Opd_pts
         start(1,1) = pfn(i1,i2,i3,i4,i5)
         start(2,1) = pfx1(i1,i2,i3,i4,i5)
         start(3,1) = pfx2(i1,i2,i3,i4,i5)
         state = [Gpd_grid(i1),Gr_grid(i2),Gz_grid(i3),Gzeta_grid(i4),Gepsr_grid(i5)];
         ! Find optimal policy functions on each node
         argzero = 0.d0
         call csolve(start,nstate,npf,nshock,Opd_pts,Or_pts,Oz_pts,Ozeta_pts,Oepsr_pts,Omono_pts,state, &
                        Smu,Schi,Sr,Sy,Pomega,Ptheta,Psigma,Peta,Pzbar, &
                        Prhor,Ppi,Pphipi,Pphiy,Prhoz,Pzetabar,Prhozeta,Pbeta, &
                        Gpd_grid,Gr_grid,Gz_grid,Gzeta_grid,Gepsr_grid,Gmono_nodes,Gmono_weight, &
                        pfn,pfx1,pfx2,argzero)
         ! Store updated policy functions
         pfn_up(i1,i2,i3,i4,i5) = argzero(1,1)
         pfx1_up(i1,i2,i3,i4,i5) = argzero(2,1)
         pfx2_up(i1,i2,i3,i4,i5) = argzero(3,1)
        end do
       end do
      end do
     end do
    end do
    !$omp end parallel do

    ! Policy function distances    
    dist_n = abs(pfn_up - pfn);  
    dist_x1 = abs(pfx1_up - pfx1);
    dist_x2 = abs(pfx2_up - pfx2);

    ! Maximum distance
    dist_max(it) = max(maxval(dist_n),maxval(dist_x1),maxval(dist_x2));

    ! Update policy functions
    pfn = pfn_up;
    pfx1 = pfx1_up;
    pfx2 = pfx2_up;

    ! Check convergence criterion
    if ((it > 11) .AND. all(dist_max(it-10:it) < Ptol)) then 
        converged = 1;
    else if (dist_max(it) > 10 .OR. it > 2500) then
        converged = 0;
    end if

    ! Iteration Information
    iend = omp_get_wtime()
    if (mod(it,3) == 1 .OR. converged == 1 .OR. converged == 0) then
        call itinfo(tstart,istart,iend,it,dist_max(it));
    else
        it = it + 1
    end if
end do 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T12:14:14.173

添加折叠条款消除了低效率。!$omp do collapse(5) 否则，正如 Jermiah Willcock 指出的那样，只有外部循环会并行运行。我相信我是在一台 6 核的电脑上测试的，外环恰好有 6 个点，所以当时没有效率损失。只有当我切换到具有更多内核的计算机时，这才成为一个问题。很高兴知道！

感谢 MSB 和 Jeremiah 的快速而有帮助的回复。现在一切都好起来了！

# ocaml - 如何在 ocaml 中将 Camomile 用于 UTF8 字符串？

> ID：16196986
> 
> 赞同：8
> 
> 时间：2013-04-24T16:09:16.603
> 
> 标签：ocaml, camomile

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-24T19:57:01.123

Here is a short presentation of the different actors:

*   [ASCII](http://en.wikipedia.org/wiki/Ascii) is both a set of characters (there are 127 of them) and a code to represent them (on 7 bits).

*   [Unicode](http://en.wikipedia.org/wiki/Universal_Character_Set) is a set of characters (there are a lot more than 127).

*   [UTF-8](http://en.wikipedia.org/wiki/UTF-8) is a code to represent unicode characters.

*   Your terminal. It interprets bytes output by your program as UTF-8 encoded characters and displays the corresponding unicode characters.

*   OCaml process sequences of bytes (OCaml uses the name `char` but it is misleading and the name `byte` would be more appropriate).

So if OCaml outputs the sequence of bytes corresponding to the UTF-8 code for `"你好"`, your terminal will interpret it as a utf-8 string and will output `你好`. But for OCaml, `"你好"` is just a sequence of 6 bytes.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-25T13:43:39.477

TörökEdwin told you everything you need to know, I think. UTF-8 is specifically designed as a way to store Unicode values (codepoints) in a series of 8-bit bytes when the code is used to dealing with ASCII C strings. Since OCaml strings are a series of 8-bit bytes there's no problem *storing* a UTF-8 value there. If the program you use to create your OCaml source handles UTF-8, then it will have no trouble creating a string containing a UTF-8 value. You don't need to do anything special to get that to happen. (As I said I've done this many times myself.)

If you don't need to process the value, then the OCaml I/O functions can also write out such a value (or read one in), and if the encoding of your display is UTF-8 (which is what I use), it will display correctly. But most often you will need to process your values. If you change your code to (for example) just write out the *length* of the string, you might start to see why you would need a special library for handling UTF-8.

If you wonder why a certain Unicode string is represented as a certain series of bytes in the UTF-8 encoding you just need to read up on UTF-8\. The Wikipedia article ([UTF-8](http://en.wikipedia.org/wiki/UTF-8)) might be a reasonable place to start.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-24T16:16:52.897

You need to use an UTF8 library only if you want to convert between different encoding, to normalize unicode, or if you want to access individual codepoints.

OCaml treats strings as 8-bit binary values of a specified length, so you can use any encoding directly. i.e. you can just assign the UTF8 value directly to a variable:

```
# let foo = "こんにちは";;
val foo : string =
  "\227\129\147\227\130\147\227\129\171\227\129\161\227\129\175" 
```

# c# - C#如何替换斜线引号\"

> ID：16196987
> 
> 赞同：1
> 
> 时间：2013-04-24T16:09:17.007
> 
> 标签：c#, string, replace, quote, slash

我正在尝试创建一个搜索和替换字符串，如下所示：

`src=\"/path/file.jpg\"`

进入

`src=\"http://mysite.com/path/file.jpg\"`

通过搜索属性 src 和等号斜线引号。问题是创建搜索字符串，每次我这样做时，它都会变成搜索

`src=\\"/`代替`src=\"/`

如果此段中的 property = "src"，我怎样才能让它工作？

`string equalsSlashQuote = "=" + @"\" + "\"";`
`string search = property + equalsSlashQuote + "/";`
`string replace = property + equalsSlashQuote + SiteURL + "/";`
`input = input.Replace(search, replace);`

问题是 \，我什至尝试将其添加为字符代码值 92，但它仍然在搜索变量中变为 \\。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T16:15:50.300

如果您在字符串之前放置一个 @，则该字符串将变为“文字”而不使用控制字符或转义符（使用反斜杠）。

因此`@"hello\nico"`将产生一个字符串，其中单词“hello”和“nico”由斜线分隔，而不是单词“hello”和“ico”由换行符分隔。

您还可以定义一个不带@ 并带有控制字符的字符串，如下所示：`"hello\\nico"`这将具有相同的结果。第一个反斜杠是控制字符，而不是字符串中的实际值。

请注意：如果您的 IDE/调试器显示一个字符串的值，at 也将使用第二种格式来显示文本。因此，字符串内的反斜杠将通过在其前面放置另一个反斜杠来进行转义。看起来字符串包含双斜杠，但事实并非如此。您可以通过以下方式验证这一点：

*   检查字符串的长度并计算字符数。
*   将值写入类似`Debug.WriteLine`or的输出`Console.WriteLine`，它将按原样显示该字符串，而没有斜杠作为转义符。

你说：*每次我这样做时，它都会变成搜索`src=\\"/`而不是`src=\"/`.* 你确定吗？我认为你被 IDE / 调试器愚弄了，它会用第二个反斜杠显示字符串，这只是一个控制字符。

# azure - 将多租户项目发布到 Azure 时自定义 web.config

> ID：16196988
> 
> 赞同：2
> 
> 时间：2013-04-24T16:09:23.497
> 
> 标签：azure, visual-studio-2012, web-deployment, multi-tenant

我有一个 VS2012 解决方案，其中包含一个多租户 MVC Web 项目，我想在单个 Azure Web 角色上发布到多个网站。我已经更改了我的`.csdef`，以便它包含多个站点，如下所示：

```
<Sites>
  <Site name="Web">
    <Bindings>
      <Binding name="Endpoint1" endpointName="Endpoint1" />
    </Bindings>
  </Site>
  <Site name="Web2" physicalDirectory="..\..\..\[source dir]">
    <Bindings>
      <Binding name="Endpoint1" endpointName="Endpoint1" hostHeader="secondsite.com" />
    </Bindings>
  </Site>
</Sites> 
```

我的问题是：作为发布过程的一部分，如何将不同版本的 Web.config 部署到每个站点以适应不同的租户？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-04T11:34:39.187

我想通知您以下内容，当涉及到基于租户的配置时，最好考虑将配置放在数据库中，而不是复制 Web.config 文件。

如果您考虑使用纯多租户形式，它使用单个代码库并在由租户 ID 标识的数据库中维护所有基于租户的配置，则无需复制或创建 web.config 文件的副本。

该过程将是这样的，您从登录凭据中识别租户，然后使用该租户 ID 获取配置元数据，然后在整个应用程序中应用它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-14T15:41:39.553

我不确定这是一个特别优雅的解决方案，但最后我采用了两步发布过程。

在第一步中，我发布到本地文件系统，添加在`CopyAllFilesToSingleFolderForPackage`. 在这个目标中，我将打包的文件复制到部署目录（每个站点 1 个）并 `TransformXml`在每个克隆上执行 a 以更改 Web.config。

第二步是简单地使用部署目录作为源通过指向`<Site physicalDirectory="..." />`克隆输出文件的位置发布到 Azure。

# ruby-on-rails - Rails 验证不允许插入记录

> ID：16196992
> 
> 赞同：1
> 
> 时间：2013-04-24T16:09:37.087
> 
> 标签：ruby-on-rails

我的模型中有这个验证：

```
validates_uniqueness_of :micro_id, :conditions => ["date_active not null and date_inactive null"] 
```

我将其解释为：如果这是 micro_id 为 2695 且 date_active 不为空且 date_inactive 为空的唯一记录，则可以插入。

在数据库中，对于 micro_id 2695，我有一个记录：它有一个 date_active 和一个 date_inactive。当我有一个 date_active 和一个空 date_inactive 时，我应该能够为 2695 插入一条新记录。但是，我无法插入记录。我已经确定这是导致验证错误的验证。

我是否错误地解释了此验证？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T16:12:33.007

您的条件略有偏差，您`date_active not null and date_inactive null`应该在哪里测试 null `is not`，`is`例如`date_active is not null and date_inactive is null`. 这使您的验证：

```
validates_uniqueness_of :micro_id, :conditions => ["date_active is not null and date_inactive is null"] 
```