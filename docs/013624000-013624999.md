# StackOverflow 问答 13624000-13624999

# c++ - 如何使用 C++ 复制 Windows/System32

> ID：13624000
> 
> 赞同：2
> 
> 时间：2012-11-29T10:44:59.423
> 
> 标签：c++, copy, directory

我必须建立一个复制工具项目。我想复制/克隆整个`C:`驱动器。我尝试使用`SHFileOperation()`and `IFileOperation`，但它们只允许我复制不是系统文件的文件。

任何人都可以建议任何 API 或方法来完成任务吗？

# c++ - 为什么在 C++ 中追加 在变量之后

> ID：13624003
> 
> 赞同：0
> 
> 时间：2012-11-29T10:45:15.037
> 
> 标签：c++

Eax 和 edx [...] 是 CPU 寄存器，到目前为止还不错；但是为什么要附加一个带有某个寄存器名称的变量`<xxx>`。看起来变量是与寄存器关联还是存储在其中？我推断，或者它可能只是一种类型？？？

```
int __usercall sub_403DF0<eax>(int result<eax>, int a2<edx>)
{
int v2; // ebx@1
int v3; // esi@1

v2 = result;
v3 = a2; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T10:49:46.573

那肯定不是C++。您将不得不询问设计此特定变体的人。

# ios6 - 出现错误 -[__NSDictionaryM countByEnumeratingWithState:objects:count:]: message sent to deallocated instance

> ID：13624006
> 
> 赞同：1
> 
> 时间：2012-11-29T10:45:30.200
> 
> 标签：ios6, gdata, picasa

我在我的项目中使用谷歌的 GData 客户端库来获取 picasa 照片。我在项目下的 EDIT 方案中启用了 NSZombie 设置，因此启用它后控制台显示此错误**“-[__NSDictionaryM countByEnumeratingWithState:objects:count:]: message sent to deallocated实例“**。我收到此错误的代码片段是

```
 for( GDataEntryPhotoAlbum * entry in [(GDataFeedPhotoUser *)result entries]){
                              @autoreleasepool {
                                  GRKAlbum * album = [self albumFromGDataEntryPhotoAlbum:entry];
                                  [albums addObject:album];
                              }
                          } 
```

[有关更多信息，我已在项目中集成了grabKit 第三方框架](https://github.com/pierrotsmnrd/grabKit)

我已经检查了关于内存问题的一切都很好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T13:04:13.867

我是 GrabKit 的开发者。感谢您使用它:)

我有 2 个问题：

_ 你的项目在 ARC 下吗？

_ 当你禁用 NSZombie 时，这个错误会消失吗？

您能否在它崩溃之前给我们一个“条目”的日志值？

感谢您帮助改进 GrabKit :)

# python - 如何从字典列表中获取字典

> ID：13624007
> 
> 赞同：1
> 
> 时间：2012-11-29T10:45:30.093
> 
> 标签：python, python-2.7

我是 Python 的新手，并且停留在一些基本的东西上。

假设有一个字典列表如下：

```
[{key1:value1},{key2:value2},...{keyn:valuen}] 
```

有没有一种提取字典的pythonic方法

```
{key1:value1},{key2:value2},...{keyn:valuen} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T11:09:50.603

我假设你的意思是你想要`{key1: value1, key2:value2, keyn:valuen}`。也就是说，您希望将所有单独的字典组合成一个单独的字典，其中包含各个字典中的每个键和值。

这是我的做法，使用字典理解：

```
 l = [{"key1":"value1"},{"key2":"value2"},{"keyn":"valuen"}]
 result = {k:v for d in l for k, v in d.iteritems()}

 print result # {'key2': 'value2', 'key1': 'value1', 'keyn': 'valuen'} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T11:36:59.420

同样的事情，也许更容易阅读：

```
result = {}
d_list = [{"key1": "value1"}, {"key2": "value2"}, {"keyn": "valuen"}]
for d in d_list:
    for k, v in d.iteritems():
        result[k] = v 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T12:04:25.730

```
a=[{1:1},{2:2},{3:3}]

result=dict([(k,v) for x in a for k,v in x.items()])
print result //{1: 1, 2: 2, 3: 3} 
```

# sql - 如何安装 SQLPSX 1.6？

> ID：13624008
> 
> 赞同：0
> 
> 时间：2012-11-29T10:45:37.780
> 
> 标签：sql, powershell

[我在我的机器上使用 Powershell 1.0，所以我想在powershell 1.6](http://sqlpsx.codeplex.com/releases/view/32293)中安装 SQLPSX 1.6 以便于操作 SQL 服务器

我不知道如何安装。我试过运行.\LibrarySMO.ps1，但什么也没发生

你能告诉我如何安装吗？

我的机器是 Windows XP，Powershell 1.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T11:47:08.660

假设您位于 LibrarySMO.ps1 所在的目录中，您需要为加载 Powershell 会话的所有函数的脚本添加点源代码：

*点点正斜杠文件名：*

**. .\图书馆SMO.ps1**

# ubuntu - Sublime Text 2：自动加载列表中的新文件

> ID：13624010
> 
> 赞同：1
> 
> 时间：2012-11-29T10:45:42.170
> 
> 标签：ubuntu, sublimetext2

**我在 ubuntu 上，使用 v 2.0.1 Build 2217**

以前我在 mac 上使用 sublime text 2，当我通过命令行创建新文件时，`$ touch test.php`或者通过右键单击文件夹然后单击新文件从 sublime 文本创建新文件时，我能够在文件树中看到我的新文件在左侧。

但是现在我在 Ubuntu 上使用 ST2，每次创建或生成（Zend）文件时，它都不会出现在我的文件树中，现在我每次创建新文件时都会关闭并重新打开 ST2。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-02-17T21:05:41.980

这可以通过运行以下命令暂时修复（直到您停止登录会话）。它将设置 Linux 允许的文件监视数量：

```
 sudo sysctl fs.inotify.max_user_watches=32768 
```

然后重启 Sublime Text。

如果 Sublime 的文件树现在可以工作，您可以通过以下方式持久保存此文件监视配置：

```
echo 32768 | sudo tee -a /proc/sys/fs/inotify/max_user_watches 
```

与 Atom 相同的问题，此修复适用于带有 Sublime Text 3 的 Ubuntu 15.10

*   [https://github.com/atom/atom/blob/master/docs/build-instructions/linux.md#typeerror-unable-to-watch-path](https://github.com/atom/atom/blob/master/docs/build-instructions/linux.md#typeerror-unable-to-watch-path)
*   [https://github.com/atom/atom/issues/2082](https://github.com/atom/atom/issues/2082)

# php - PHP stdclass json 解码

> ID：13624013
> 
> 赞同：1
> 
> 时间：2012-11-29T10:45:52.667
> 
> 标签：php

我正在尝试从`json_decode`输出中获取一些值。我有一个在授予访问权限后连接到 Tumblr API 的脚本。解码后我已经到了这一点`object` `stdClass`。我现在遇到的问题是试图只回显博客的“名称”和“关注者”数量。下面的示例有两个博客而不是一个。因此，在下面的示例中，博客名称是“blogone”和“blogtwo”。

```
 {"meta":{"status":200,"msg":"OK"},"response":{"user":{"name":"blogone","likes":0,"following":0,"default_post_format":"html","blogs":[{"name":"blogone","url":"http:\/\/blogone.tumblr.com\/","followers":234,"primary":true,"title":"Untitled","description":"","admin":true,"updated":1354139573,"posts":0,"messages":0,"queue":0,"drafts":0,"share_likes":true,"ask":false,"tweet":"N","facebook":"N","facebook_opengraph_enabled":"N","type":"public"},{"name":"blogtwo","url":"http:\/\/blogtwo.tumblr.com\/","followers":0,"primary":false,"title":"dfgdfg","description":"","admin":true,"updated":0,"posts":0,"messages":0,"queue":0,"drafts":0,"share_likes":false,"ask":false,"tweet":"N","facebook":"N","facebook_opengraph_enabled":"N","type":"public"}]}}} 
```

问题是我如何回应每个博客的博客“名称”和“关注者”计数。有时只有一个博客，有时可能有多个博客。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T10:50:56.600

```
$jsonString = '{"meta":{"status":200,"msg":"OK"},"response":{"user":{"name":"blogone","likes":0,"following":0,"default_post_format":"html","blogs":[{"name":"blogone","url":"http:\/\/blogone.tumblr.com\/","followers":234,"primary":true,"title":"Untitled","description":"","admin":true,"updated":1354139573,"posts":0,"messages":0,"queue":0,"drafts":0,"share_likes":true,"ask":false,"tweet":"N","facebook":"N","facebook_opengraph_enabled":"N","type":"public"},{"name":"blogtwo","url":"http:\/\/blogtwo.tumblr.com\/","followers":0,"primary":false,"title":"dfgdfg","description":"","admin":true,"updated":0,"posts":0,"messages":0,"queue":0,"drafts":0,"share_likes":false,"ask":false,"tweet":"N","facebook":"N","facebook_opengraph_enabled":"N","type":"public"}]}}}';
$jsonObject = json_decode($jsonString);
$result = '';
foreach ($jsonObject->response->user->blogs as $blog) {
    $result .= $blog->name . ' - ' . $blog->followers . '<br/>' . "\n";
}
echo $result; 
```

# php - PHP 简单 HTML DOM 解析器 - 未读取文件

> ID：13624014
> 
> 赞同：2
> 
> 时间：2012-11-29T10:45:54.163
> 
> 标签：php, object, wamp, file-get-contents, simple-html-dom

我已经编写了一个脚本来处理来自 URL 的 html 文件，但是，由于我的廉价主机提供商的 30 年代脚本运行时限制，我不得不更改脚本以将 html 存储为 txt 文件并从本地 WAMP 服务器运行它.

我正在尝试加载每个文件，提取我需要的内容，然后移至下一个文件。

作为源的 URL`file_get_html`完美地完成了这项工作（我可以 -> 找到所需的元素）作为源的 Txt 文件`file_get_html`正在返回一个空白对象。

根据下面帖子中的一些建议，我更改`file_get_html`了`file_get_contents`创建一个数组，其中包含一个包含文本文件内容的大字符串。

*首先，确保`file_get_contents`可以获取数据。如果可以，`file_get_htm`我将能够将数据加载到`simplehtml`Dom*

如果`file_get_contents`返回一个字符串，它确实如此，我将如何“将*数据加载到 simplehtml Dom*？”

[使用 file_get_html 未读取文件](https://stackoverflow.com/questions/13115793/file-not-getting-read-using-file-get-html)

然后我尝试将 string 转换为 object `str_get_html`，但是，这也不起作用。

```
include('simple_html_dom.php');
$html = file_get_html('file.txt');
var_dump($html); 
```

返回：`object(simple_html_dom)[1]` 但没有其他内容或数组。

```
include('simple_html_dom.php');
$html = file_get_contents('file.txt');
var_dump($html); 
```

回报：`string < ! DOCTYPE html PUBLIC.....`

**问题**：

谁能给我任何建议？将包含 html 标记的文本文件加载到对象中的最佳方法是什么，以便我可以在其内容上使用 find 方法。我想避免将文件加载到字符串数组中并使用正则表达式来处理内容。

如果使用本地 WAMP 服务器，我需要考虑什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-29T21:24:32.110

（由 OP 在问题中回答。转换为社区 wiki 答案。请参阅[没有答案的问题，但问题已在评论中解决（或在聊天中扩展）](https://meta.stackoverflow.com/questions/251597/question-with-no-answers-but-issue-solved-in-the-comments)）

OP写道：

> 我设法自己解决了这个问题。我确定我已经尝试从字符串中提取 html，doh！

```
include('simple_html_dom.php');
$html = file_get_contents('file.txt');    
$html = str_get_html($html);
var_dump($html) 
```

> 返回`object(simple_html_dom)[1]`包括所有预期的数组等
> 
> 我没有尝试使用直接从源文件创建 html 对象，而是`file_get_html`提取了文件内容`file_get_contents`然后将 str 转换为 html 使用`str_get_html`它允许我使用简单的 html dom 方法，例如在对象内的属性上查找，例如

```
$html->find('a'); 
```

# opencl - 使用 OpenCL.NET 进行图像处理

> ID：13624016
> 
> 赞同：3
> 
> 时间：2012-11-29T10:46:04.100
> 
> 标签：opencl, opencl.net

我正在尝试使用 .NET 在 GPU 上进行图像处理。我已经下载[了 OpenCL.NET wrapper](http://openclnet.codeplex.com/)。它有一些很好的样本，但我找不到将图像加载到 GPU 并读回处理后的图像的方法。我需要做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T10:46:04.100

设置上下文后，执行以下操作：

```
public void ImagingTest (string inputImagePath, string outputImagePath)
{
    Cl.ErrorCode error;

    //Load and compile kernel source code.
    string programPath = Environment.CurrentDirectory + "/../../ImagingTest.cl";    //The path to the source file may vary

    if (!System.IO.File.Exists (programPath)) {
        Console.WriteLine ("Program doesn't exist at path " + programPath);
        return;
    }

    string programSource = System.IO.File.ReadAllText (programPath);

    using (Cl.Program program = Cl.CreateProgramWithSource(_context, 1, new[] { programSource }, null, out error)) {
        CheckErr(error, "Cl.CreateProgramWithSource");

        //Compile kernel source
        error = Cl.BuildProgram (program, 1, new[] { _device }, string.Empty, null, IntPtr.Zero);
        CheckErr(error, "Cl.BuildProgram");

        //Check for any compilation errors
        if (Cl.GetProgramBuildInfo (program, _device, Cl.ProgramBuildInfo.Status, out error).CastTo<Cl.BuildStatus>()
            != Cl.BuildStatus.Success) {
            CheckErr(error, "Cl.GetProgramBuildInfo");
            Console.WriteLine("Cl.GetProgramBuildInfo != Success");
            Console.WriteLine(Cl.GetProgramBuildInfo(program, _device, Cl.ProgramBuildInfo.Log, out error));
            return;
        }

        //Create the required kernel (entry function)
        Cl.Kernel kernel = Cl.CreateKernel(program, "imagingTest", out error);
        CheckErr(error, "Cl.CreateKernel");

        int intPtrSize = 0;
        intPtrSize = Marshal.SizeOf(typeof(IntPtr));

        //Image's RGBA data converted to an unmanaged[] array
        byte[] inputByteArray;
        //OpenCL memory buffer that will keep our image's byte[] data.
        Cl.Mem inputImage2DBuffer;

        Cl.ImageFormat clImageFormat = new Cl.ImageFormat(Cl.ChannelOrder.RGBA, Cl.ChannelType.Unsigned_Int8);

        int inputImgWidth, inputImgHeight;

        int inputImgBytesSize;

        int inputImgStride;

        //Try loading the input image
        using (FileStream imageFileStream = new FileStream(inputImagePath, FileMode.Open) ) {
            System.Drawing.Image inputImage = System.Drawing.Image.FromStream( imageFileStream );

            if (inputImage == null) {
                Console.WriteLine("Unable to load input image");
                return;
            }

            inputImgWidth = inputImage.Width;
            inputImgHeight = inputImage.Height;

            System.Drawing.Bitmap bmpImage = new System.Drawing.Bitmap(inputImage);

            //Get raw pixel data of the bitmap
            //The format should match the format of clImageFormat
            BitmapData bitmapData = bmpImage.LockBits( new Rectangle(0, 0, bmpImage.Width, bmpImage.Height),
                                                      ImageLockMode.ReadOnly, PixelFormat.Format32bppArgb);//inputImage.PixelFormat);

            inputImgStride = bitmapData.Stride;
            inputImgBytesSize = bitmapData.Stride * bitmapData.Height;

            //Copy the raw bitmap data to an unmanaged byte[] array
            inputByteArray = new byte[inputImgBytesSize];
            Marshal.Copy(bitmapData.Scan0, inputByteArray, 0, inputImgBytesSize);

            //Allocate OpenCL image memory buffer
            inputImage2DBuffer = Cl.CreateImage2D(_context, Cl.MemFlags.CopyHostPtr | Cl.MemFlags.ReadOnly, clImageFormat,
                                                (IntPtr)bitmapData.Width, (IntPtr)bitmapData.Height,
                                                (IntPtr)0, inputByteArray, out error);
            CheckErr(error, "Cl.CreateImage2D input");
        }

        //Unmanaged output image's raw RGBA byte[] array
        byte[] outputByteArray = new byte[inputImgBytesSize];

        //Allocate OpenCL image memory buffer
        Cl.Mem outputImage2DBuffer = Cl.CreateImage2D(_context, Cl.MemFlags.CopyHostPtr | Cl.MemFlags.WriteOnly, clImageFormat,
                                                      (IntPtr)inputImgWidth, (IntPtr)inputImgHeight, (IntPtr)0, outputByteArray, out error);
        CheckErr(error, "Cl.CreateImage2D output");

        //Pass the memory buffers to our kernel function
        error = Cl.SetKernelArg(kernel, 0, (IntPtr)intPtrSize, inputImage2DBuffer);
        error |= Cl.SetKernelArg(kernel, 1, (IntPtr)intPtrSize, outputImage2DBuffer);
        CheckErr(error, "Cl.SetKernelArg");

        //Create a command queue, where all of the commands for execution will be added
        Cl.CommandQueue cmdQueue = Cl.CreateCommandQueue(_context, _device, (Cl.CommandQueueProperties)0, out error);
        CheckErr(error, "Cl.CreateCommandQueue");

        Cl.Event clevent;

        //Copy input image from the host to the GPU.
        IntPtr[] originPtr = new IntPtr[] { (IntPtr)0, (IntPtr)0, (IntPtr)0 };  //x, y, z
        IntPtr[] regionPtr = new IntPtr[] { (IntPtr)inputImgWidth, (IntPtr)inputImgHeight, (IntPtr)1 }; //x, y, z
        IntPtr[] workGroupSizePtr = new IntPtr[] { (IntPtr)inputImgWidth, (IntPtr)inputImgHeight, (IntPtr)1 };
        error = Cl.EnqueueWriteImage(cmdQueue, inputImage2DBuffer, Cl.Bool.True, originPtr, regionPtr, (IntPtr)0, (IntPtr)0, inputByteArray, 0, null, out clevent);
        CheckErr(error, "Cl.EnqueueWriteImage");

        //Execute our kernel (OpenCL code)
        error = Cl.EnqueueNDRangeKernel(cmdQueue, kernel, 2, null, workGroupSizePtr, null, 0, null, out clevent);
        CheckErr(error, "Cl.EnqueueNDRangeKernel");

        //Wait for completion of all calculations on the GPU.
        error = Cl.Finish(cmdQueue);
        CheckErr(error, "Cl.Finish");

        //Read the processed image from GPU to raw RGBA data byte[] array
        error = Cl.EnqueueReadImage(cmdQueue, outputImage2DBuffer, Cl.Bool.True, originPtr, regionPtr,
                                    (IntPtr)0, (IntPtr)0, outputByteArray, 0, null, out clevent);
        CheckErr(error, "Cl.clEnqueueReadImage");

        //Clean up memory
        Cl.ReleaseKernel(kernel);
        Cl.ReleaseCommandQueue(cmdQueue);

        Cl.ReleaseMemObject(inputImage2DBuffer);
        Cl.ReleaseMemObject(outputImage2DBuffer);

        //Get a pointer to our unmanaged output byte[] array
        GCHandle pinnedOutputArray = GCHandle.Alloc(outputByteArray, GCHandleType.Pinned);
        IntPtr outputBmpPointer = pinnedOutputArray.AddrOfPinnedObject();

        //Create a new bitmap with processed data and save it to a file.
        Bitmap outputBitmap = new Bitmap(inputImgWidth, inputImgHeight, inputImgStride, PixelFormat.Format32bppArgb, outputBmpPointer);

        outputBitmap.Save(outputImagePath, System.Drawing.Imaging.ImageFormat.Png);

        pinnedOutputArray.Free();
    }
} 
```

本例中使用的 OpenCL 内核：

```
__kernel void imagingTest(__read_only  image2d_t srcImg, 
                       __write_only image2d_t dstImg)
{
  const sampler_t smp = CLK_NORMALIZED_COORDS_FALSE | //Natural coordinates
    CLK_ADDRESS_CLAMP_TO_EDGE | //Clamp to zeros
    CLK_FILTER_LINEAR;

  int2 coord = (int2)(get_global_id(0), get_global_id(1)); 

  uint4 bgra = read_imageui(srcImg, smp, coord);    //The byte order is BGRA 

  float4 bgrafloat = convert_float4(bgra) / 255.0f; //Convert to normalized [0..1] float

  //Convert RGB to luminance (make the image grayscale).
  float luminance =  sqrt(0.241f * bgrafloat.z * bgrafloat.z + 0.691f * bgrafloat.y * bgrafloat.y + 0.068f * bgrafloat.x * bgrafloat.x);
  bgra.x = bgra.y = bgra.z = (uint) (luminance * 255.0f);

  bgra.w = 255;

  write_imageui(dstImg, coord, bgra);
} 
```

*完整文章可在[codeproject.com 获得](http://www.codeproject.com/Articles/502829/GPGPU-image-processing-basics-using-OpenCL-NET)

# iphone - 仅在音频操作系统播放时在后台运行应用程序

> ID：13624019
> 
> 赞同：1
> 
> 时间：2012-11-29T10:46:09.543
> 
> 标签：iphone, objective-c, ios, ipad

只有在播放音频时才可以在后台运行应用程序吗？

我制作了一个应用程序，我希望当应用程序进入后台时，它会检查音频是否正在播放。如果正在播放音频，则应用程序将在后台运行，否则应用程序将关闭。

为此，我已在 info.plist 中设置

```
Application does not run in background          YES 
```

然后音频不在后台播放。

现在运行我设置的音频

```
if(AUDIO_IS_PLAYING==NO){

    exit(0);

} 
```

但我认为苹果不会允许这样做。

如果您知道仅在播放音频时才在后台运行应用程序，则任何其他方式将被关闭。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T13:26:31.637

使用通知：

当应用程序进入后台时会发布以下通知。

```
UIApplicationDidEnterBackgroundNotification 
```

当应用程序变为活动状态时，会发布以下通知。

```
UIApplicationDidBecomeActiveNotification 
```

在函数中添加通知观察者

```
//Adding observer for notification
-(void)viewDidLoad
{
    // Your other code goes here

    // Adding observer for notification when application entered the background
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(applicationDidEnterBackgroundNotification:) name:UIApplicationDidEnterBackgroundNotification object:nil];
}

// This method will be called when application entered in background
-(void)applicationDidEnterBackgroundNotification:(id)sender
{
    // Do whatever you want when application in background
} 
```

# jquery - jQuery - 如何为包含相对于复选框的复选框的单个 div 添加一个类？

> ID：13624020
> 
> 赞同：1
> 
> 时间：2012-11-29T10:46:18.413
> 
> 标签：jquery

这是HTML：

```
<ul>
  <li>
    <div class="checkbox-wrap">
      <p>Check this: 
      <input type="checkbox" />
      </p>
    </div>
  </li>
  <li>
    <div class="checkbox-wrap">
      <p>Check this: 
      <input type="checkbox" />
      </p>
    </div>
  </li>
  <li>
    <div class="checkbox-wrap">
      <p>Check this: 
      <input type="checkbox" />
      </p>
    </div>
  </li>
</ul> 
```

jQuery：

```
$this('input:checkbox').change(function(){
    if($(this).is(":checked")) {
        $('div.checkbox-wrap').addClass("active-checkbox");
    } else {
        $('div.checkbox-wrap').removeClass("active-checkbox");
    }
}); 
```

当您选中一个复选框时，“active-checkbox”类将被添加到整个 3 个 div 中。有没有办法在不使用 ID 或自定义类名的情况下为单个 div 而不是为整个 3 个 div 添加类？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T10:48:23.937

您错误地放置`$this('input:checkbox')`了 `$('input:checkbox')`，您可以使用[最接近（）](http://api.jquery.com/closest/)来查找选择器在祖先层次结构中的第一次出现。

**[现场演示](http://jsfiddle.net/rajaadil/xxyEL/1/)**

```
$('input:checkbox').change(function(){       
    if($(this).is(":checked")) {
        $(this).closest('div.checkbox-wrap').addClass("active-checkbox");
    } else {
        $(this).closest('div.checkbox-wrap').removeClass("active-checkbox");
    }
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T10:48:15.077

您需要使用`closest`来查找最近的`.checkbox-wrap`元素：

```
$('input:checkbox').change(function() {
    var $checkbox = $(this);
    if ($checkbox.is(":checked")) {
        $checkbox.closest('div.checkbox-wrap').addClass("active-checkbox");
    } else {
        $checkbox.closest('div.checkbox-wrap').removeClass("active-checkbox");
    }
}); 
```

有关[**最接近（）的更多信息**](http://api.jquery.com/closest/)

另外，我假设`$this`一开始是 jQuery 的别名版本，而不是拼写错误？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T10:49:21.487

您可以使用[第 n 个子](http://api.jquery.com/nth-child-selector/)选择器

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T10:49:58.587

您可以使用`:eq()`Selector 来执行此操作

```
$(".checkbox-wrap:eq(0)").addClass("active-checkbox"); 
```

看看[这个](http://api.jquery.com/eq-selector/)_

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-29T10:51:56.917

```
$this('input:checkbox').change(function(){
   $(this).parents('div.checkbox-wrap').toggleClass("active-checkbox", $(this).is(":checked"));
}); 
```

# java - Eclipse java lwjgl 在 java.library.path 中没有 lwjgl

> ID：13624021
> 
> 赞同：2
> 
> 时间：2012-11-29T10:46:21.340
> 
> 标签：java, eclipse, jvm, lwjgl

我安装并把 lwjgl 库和本地人放到 /lib 文件夹中。在 Eclipse Java 构建路径上设置库位置和本机库位置。当我尝试在 eclipse 上运行它时，它可以工作，但是当我将它导出为可运行的 jar 时，它不会运行，并抛出错误：

```
Exception in thread "main" java.lang.UnsatisfiedLinkError: no lwjgl in java.libr
ary.path
        at java.lang.ClassLoader.loadLibrary(Unknown Source)
        at java.lang.Runtime.loadLibrary0(Unknown Source)
        at java.lang.System.loadLibrary(Unknown Source)
        at org.lwjgl.Sys$1.run(Sys.java:73)
        at java.security.AccessController.doPrivileged(Native Method)
        at org.lwjgl.Sys.doLoadLibrary(Sys.java:66)
        at org.lwjgl.Sys.loadLibrary(Sys.java:95)
        at org.lwjgl.Sys.<clinit>(Sys.java:112)
        at org.lwjgl.opengl.Display.<clinit>(Display.java:132)
        at Main.start(Main.java:9)
        at Main.main(Main.java:31) 
```

试图将运行属性 VM 参数设置为 -Djava.library.path="lib/" 但它也不起作用。

PS试图将本机.dll与jar放在同一个文件夹中并且它可以工作，但我希望.dll位于其他文件夹中。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-25T15:28:48.613

您是否尝试过使用 JarSplice？这是一个免费的 Java .jar 打包程序，可以在这里找到：

`Ninja Cave - JarSplice`

按照说明进行操作。所有文档都在这个网站上。只需确保您用于程序的 JAR 只是一个 eclipse JAR 文件，而不是可运行的 jar。当您启动 JarSplice 时，添加适当的 Jars、Natives，定义您的主类，然后简单地创建一个可运行的 JAR。无需设置虚拟机配置，也可以导出到 Windows.exe 和 MacOSX。如果一切顺利，您应该有一个可双击的可运行 jar。希望这可以帮助。这就是我过去打包 LWJGL 游戏的方式 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T14:12:59.973

找到了答案。您可以使用自定义 .bat 文件并将其放在那里 -Djava.library.path="lib/"，但我的解决方案是通过下一行以编程方式执行此操作：

```
System.setProperty("org.lwjgl.librarypath",System.getProperty("user.dir") + "/lib/"); 
```

# ruby-on-rails - 计算 ActiveRecord 中子对象数量的最佳方法是什么

> ID：13624025
> 
> 赞同：0
> 
> 时间：2012-11-29T10:46:51.417
> 
> 标签：ruby-on-rails, activerecord

```
class Foo < ActiveRecord::Base {
   has_many :bars
}

foo = Foo.find(1)
foo.bars.count 
```

这是计算条数的最佳方法还是有有效的方法

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T10:50:54.873

如果您的模型完全标准化，那么这将是最有效的方法。

如果你需要做很多，你可以缓存表`bars`上的计数`Foo`。

[Railscast 第 23 集](http://railscasts.com/episodes/23-counter-cache-column)涵盖了计数器缓存，此信息在当前 Rails 版本中仍然是正确的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T10:55:34.923

是的，这是最有效的方式，因为 ActiveRecord 将其转换为适当的 SELECT COUNT(*) SQL 语句，这比加载所有记录数据并在数组中计数要高效得多。

# android - Onitem 点击列表器在列表视图中不起作用

> ID：13624026
> 
> 赞同：0
> 
> 时间：2012-11-29T10:46:54.383
> 
> 标签：android

嗨，在我的应用程序中，我想在单击列表中的项目时执行一些功能。

这是列表项的 xml。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical" android:layout_width="fill_parent"
    android:layout_height="fill_parent" android:background="#FFFFFF"
    android:layout_marginTop="20dp"
    android:focusableInTouchMode="true" android:focusable="true">

    <TableLayout android:layout_width="fill_parent" android:layout_marginTop="10dp"
        android:layout_height="wrap_content" android:id="@+checklistitem/itemrow">
        <TableRow android:id="@+checklistitem/tr"> 
            <TextView android:id="@+checklistitem/texthead"
            android:textStyle="bold"
            android:visibility="gone" android:layout_marginLeft="10dp"
                android:layout_width="fill_parent" android:layout_height="fill_parent"
                android:paddingRight="0dp" android:maxLines="2" android:textSize="16dp"
                android:text="Towel Rack: 2 hand towels,2 wash clothes"
                android:background="#000000" android:textColor="#ffffff"
                android:layout_centerVertical="true"  />

            <TextView android:id="@+checklistitem/textSeparator"
            android:visibility="gone" android:layout_marginLeft="10dp"
                android:layout_width="240dp" android:layout_height="fill_parent"
                android:paddingRight="0dp" android:maxLines="2" android:textSize="16dp"
                android:text=""
                android:background="#000000" android:textColor="#ffffff"
                android:layout_centerVertical="true"  />

            <TextView android:layout_marginLeft="5dp"
                android:id="@+checklistitem/inspectionvalue" android:visibility="visible"
                android:layout_width="wrap_content" android:layout_height="wrap_content"
                android:textColor="#006699" android:text="01"
                android:layout_alignParentRight="true" android:layout_marginRight="8dp"
                android:layout_centerVertical="true" />
        </TableRow>
    </TableLayout>

</RelativeLayout> 
```

这是我在列表中使用适配器的代码

```
checklistview.setOnItemClickListener(this);

        CheckListAdapterForAtt checkAdapter = new CheckListAdapterForAtt(this.getApplicationContext(), checkListRowDataArr, R.layout.checklist_row); 
```

但是有些项目点击列表对我不起作用？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T10:51:20.397

在要单击的 XML 行布局中添加以下内容

```
android:clickable="false"
android:focusable="false" 
```

Onclick 监听器 如下

```
mList.setOnItemClickListener(new OnItemClickListener() {

            public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                    long arg3) {

            }
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T10:51:24.037

试试这样：

```
 listView.setOnItemClickListener(new OnItemClickListener() {

        private void OnItemSelected() {

        }

        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                long arg3) {
            if(arg2 == 0)
            {

            }

            if(arg2 == 1)
            {

            } 
```

# java - Java 7 API 设计最佳实践——返回数组或返回集合

> ID：13624028
> 
> 赞同：14
> 
> 时间：2012-11-29T10:47:02.540
> 
> 标签：java, collections

我知道在通用出现之前已经问过这个问题。Array 确实胜出了一点，因为 Array 强制执行返回类型，它更安全。

但是现在，使用最新的 JDK 7，每次我设计这种类型的 API 时：

```
public String[] getElements(String type)
vs
public List<String> getElements(String type) 
```

我一直在努力想出一些很好的理由来返回 A Collection over An Array 或其他方式。选择 String[] 或 List 作为 API 的返回类型时，最佳实践是什么？或者是马的课程。

我没有特殊情况，我更多的是寻找通用的优缺点比较。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-29T10:53:59.980

如果您正在编写公共 API，那么您的客户通常会更喜欢集合，因为它们更易于操作并与代码库的其余部分集成。另一方面，如果您希望在对性能高度敏感的上下文中使用公共 API，则首选原始数组。

如果您是为自己使用而编写此代码，则最佳实践是从集合类型开始，并且仅在存在明确的性能问题时才切换到数组。

数组的元素类型可以在运行时通过反射确定，因此如果该特定功能对您很重要，那将是另一种更喜欢数组的情况。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-29T10:55:20.020

这是部分列表

**阵列的优点：**

*   快速地
*   天生易变
*   你确切地知道“你得到什么”（什么是类型）——所以你确切地知道返回的对象将如何表现。

**列表的优点：**

*   行为取决于返回的实际类型（例如 - 根据实际类型可以是可变的或不可变的）
*   更好的招聘设计
*   （取决于实际类型）可能是动态大小
*   更直观`hashCode()`，`equals()`- 如果将基于散列的集合作为键输入，这可能很关键。
*   类型安全：

    ```
    String[] arr1 = new String[5]; 
    Object[] arr2 = arr1;
    arr2[0] = new Object(); //run time error :(
    List<String> list1 = new LinkedList<String>();
    List<Object> list2 = list1; //compilation error :) 
    ```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-29T11:00:02.913

如果我有选择，我会选择 Collection，因为我在 Java 中“免费”获得了额外的行为。

**实现到接口**

最大的好处是，如果您返回 Collection API（甚至是 List、Set 等），您可以轻松更改实现（例如 ArrayList、LinkedList、HashSet 等），而无需使用该方法更改客户端。

**添加行为**

Java [Collections](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html)类提供了许多可应用于集合的包装器，包括

1.  同步集合
2.  使集合不可变
3.  搜索、倒车等...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T11:01:41.737

当您公开一个公共 API 时，返回一个 Collection 是很有意义的，因为它通过使用其上可用的各种方法使客户端的生活更轻松。`toArray()`如果需要特殊情况的数组表示，客户可以随时调用。

与其他模块的集成也变得更容易，因为大多数 API 都期望收集，因此也可以工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-29T11:02:04.603

在我看来，这取决于返回值的用途。

如果返回的值将被迭代，没有别的，数组是最好的选择，但如果结果将被操纵，那么去适当的集合。

但要小心，例如，List 应该允许重复，而 Set 不应该，Stack 应该是 LIFO 而 Queue 应该是 FIFO 并注意我使用的 SHOULD，因为只有实现才能确定真正的行为。

无论如何，这真的取决于。

# php - 迁移到“站点地图协议 0.9”

> ID：13624030
> 
> 赞同：4
> 
> 时间：2012-11-29T10:47:11.707
> 
> 标签：php, protocols, sitemap

我有一个创建站点地图的 php 脚本。但它基于“站点地图协议 0.84”。

我想更改代码以生成有效的“站点地图协议 0.9”输出。

在 0.84 和 0.9 之间进行了哪些更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-12-19T15:50:21.417

这是 0.8 和 0.9 站点地图和站点索引版本之间差异的完整输出。

$diff -u sitemap0.8.xml sitemal0.9.xml

```
--- sitemap0.8.xsd  2015-12-19 12:40:36.558949286 -0300
+++ sitemap.xsd 2015-12-19 12:40:55.958939049 -0300
@@ -1,85 +1,86 @@
 <?xml version="1.0" encoding="UTF-8"?>
-<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema" targetNamespace="http://www.google.com/schemas/sitemap/0.84" xmlns="http://www.google.com/schemas/sitemap/0.84">
-<xsd:annotation>
-  <xsd:documentation>
-    XML Schema for Sitemap files.
-    Last Modifed 2005-05-24
-  </xsd:documentation>
-</xsd:annotation>
-
-<xsd:element name="urlset">
-  <xsd:annotation>
-    <xsd:documentation>
-      Container for a set of up to 50,000 document elements.
-      This is the root element of the XML file.
-    </xsd:documentation>
-  </xsd:annotation>
- <xsd:complexType>
-   <xsd:sequence>
-     <xsd:element ref="url" maxOccurs="unbounded"/>
-   </xsd:sequence>
- </xsd:complexType>
-</xsd:element>
-
-<xsd:element name="url">
+<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema" targetNamespace="http://www.sitemaps.org/schemas/sitemap/0.9" xmlns="http://www.sitemaps.org/schemas/sitemap/0.9" elementFormDefault="qualified">
   <xsd:annotation>
     <xsd:documentation>
-      Container for the data needed to describe a document to crawl.
+      XML Schema for Sitemap files.
+      Last Modifed 2008-03-26
     </xsd:documentation>
   </xsd:annotation>
- <xsd:complexType>
-   <xsd:all>
-     <xsd:element ref="loc"/>
-     <xsd:element ref="lastmod" minOccurs="0"/>
-     <xsd:element ref="changefreq" minOccurs="0"/>
-     <xsd:element ref="priority" minOccurs="0"/>
-   </xsd:all>
- </xsd:complexType>
-</xsd:element>

-<xsd:element name="loc">
-  <xsd:annotation>
-    <xsd:documentation>
-      REQUIRED: The location URI of a document.
-      The URI must conform to RFC 2396 (http://www.ietf.org/rfc/rfc2396.txt).
-    </xsd:documentation>
-  </xsd:annotation>
-  <xsd:simpleType>
+  <xsd:element name="urlset">
+    <xsd:annotation>
+      <xsd:documentation>
+        Container for a set of up to 50,000 document elements.
+        This is the root element of the XML file.
+      </xsd:documentation>
+    </xsd:annotation>
+    <xsd:complexType>
+      <xsd:sequence>
+        <xsd:any namespace="##other" minOccurs="0" maxOccurs="unbounded" processContents="strict"/>
+        <xsd:element name="url" type="tUrl" maxOccurs="unbounded"/>
+      </xsd:sequence>
+    </xsd:complexType>
+  </xsd:element>
+
+  <xsd:complexType name="tUrl">
+    <xsd:annotation>
+      <xsd:documentation>
+        Container for the data needed to describe a document to crawl.
+      </xsd:documentation>
+    </xsd:annotation>
+    <xsd:sequence>
+      <xsd:element name="loc" type="tLoc"/>
+      <xsd:element name="lastmod" type="tLastmod" minOccurs="0"/>
+      <xsd:element name="changefreq" type="tChangeFreq" minOccurs="0"/>
+      <xsd:element name="priority" type="tPriority" minOccurs="0"/>
+      <xsd:any namespace="##other" minOccurs="0" maxOccurs="unbounded" processContents="strict"/>
+    </xsd:sequence>
+  </xsd:complexType>
+
+  <xsd:simpleType name="tLoc">
+    <xsd:annotation>
+      <xsd:documentation>
+        REQUIRED: The location URI of a document.
+        The URI must conform to RFC 2396 (http://www.ietf.org/rfc/rfc2396.txt).
+      </xsd:documentation>
+    </xsd:annotation>
     <xsd:restriction base="xsd:anyURI">
       <xsd:minLength value="12"/>
       <xsd:maxLength value="2048"/>
     </xsd:restriction>
   </xsd:simpleType>
-</xsd:element> 

-<xsd:element name="lastmod">
-  <xsd:annotation>
-    <xsd:documentation>
-      OPTIONAL: The date the document was last modified. The date must conform
-      to ISO 8601 (http://www.w3.org/TR/NOTE-datetime). Example: 2005-05-10
-      Lastmod may also contain a timestamp. Example: 2005-05-10T17:33:30+08:00
-    </xsd:documentation>
-  </xsd:annotation>
-  <xsd:simpleType>
-    <xsd:restriction base="xsd:string">
-      <xsd:minLength value="10"/>
-      <xsd:maxLength value="25"/>
-    </xsd:restriction>
+  <xsd:simpleType name="tLastmod">
+    <xsd:annotation>
+      <xsd:documentation>
+        OPTIONAL: The date the document was last modified. The date must conform
+        to the W3C DATETIME format (http://www.w3.org/TR/NOTE-datetime).
+        Example: 2005-05-10
+        Lastmod may also contain a timestamp.
+        Example: 2005-05-10T17:33:30+08:00
+      </xsd:documentation>
+    </xsd:annotation>
+    <xsd:union>
+      <xsd:simpleType>
+        <xsd:restriction base="xsd:date"/>
+      </xsd:simpleType>
+      <xsd:simpleType>
+        <xsd:restriction base="xsd:dateTime"/>
+      </xsd:simpleType>
+    </xsd:union>
   </xsd:simpleType>
-</xsd:element> 

-<xsd:element name="changefreq">
-  <xsd:annotation>
-    <xsd:documentation>
-      OPTIONAL: Indicates how frequently the content at a particular URL is
-      likely to change. The value "always" should be used to describe
-      documents that change each time they are accessed. The value "never"
-      should be used to describe archived URLs. Please note that web
-      crawlers may not necessarily crawl pages marked "always" more often.
-      Consider this element as a friendly suggestion and not a command.
-    </xsd:documentation>
-  </xsd:annotation>
-  <xsd:simpleType>
+  <xsd:simpleType name="tChangeFreq">
+    <xsd:annotation>
+      <xsd:documentation>
+        OPTIONAL: Indicates how frequently the content at a particular URL is
+        likely to change. The value "always" should be used to describe
+        documents that change each time they are accessed. The value "never"
+        should be used to describe archived URLs. Please note that web
+        crawlers may not necessarily crawl pages marked "always" more often.
+        Consider this element as a friendly suggestion and not a command.
+      </xsd:documentation>
+    </xsd:annotation>
     <xsd:restriction base="xsd:string">
       <xsd:enumeration value="always"/>
       <xsd:enumeration value="hourly"/>
@@ -90,26 +91,23 @@
       <xsd:enumeration value="never"/>
     </xsd:restriction>
   </xsd:simpleType>
-</xsd:element> 

-<xsd:element name="priority">
-  <xsd:annotation>
-    <xsd:documentation>
-      OPTIONAL: The priority of a particular URL relative to other pages
-      on the same site. The value for this element is a number between
-      0.0 and 1.0 where 0.0 identifies the lowest priority page(s).
-      The default priority of a page is 0.5\. Priority is used to select
-      between pages on your site. Setting a priority of 1.0 for all URLs
-      will not help you, as the relative priority of pages on your site
-      is what will be considered.
-    </xsd:documentation>
-  </xsd:annotation>
-  <xsd:simpleType>
+  <xsd:simpleType name="tPriority">
+    <xsd:annotation>
+      <xsd:documentation>
+        OPTIONAL: The priority of a particular URL relative to other pages
+        on the same site. The value for this element is a number between
+        0.0 and 1.0 where 0.0 identifies the lowest priority page(s).
+        The default priority of a page is 0.5\. Priority is used to select
+        between pages on your site. Setting a priority of 1.0 for all URLs
+        will not help you, as the relative priority of pages on your site
+        is what will be considered.
+      </xsd:documentation>
+    </xsd:annotation>
     <xsd:restriction base="xsd:decimal">
       <xsd:minInclusive value="0.0"/>
       <xsd:maxInclusive value="1.0"/>
     </xsd:restriction>
   </xsd:simpleType>
-</xsd:element> 

 </xsd:schema>
\ No newline at end of file 
```

$diff -u 站点索引0.8.xml 站点索引.xml

```
--- siteindex0.8.xsd    2015-12-19 12:40:44.782945495 -0300
+++ siteindex.xsd   2015-12-19 12:40:51.318941905 -0300
@@ -1,69 +1,72 @@
 <?xml version="1.0" encoding="UTF-8"?>
-<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema" targetNamespace="http://www.google.com/schemas/sitemap/0.84" xmlns="http://www.google.com/schemas/sitemap/0.84">
-<xsd:annotation>
-  <xsd:documentation>
-    XML Schema for Sitemap index files.
-    Last Modifed 2005-05-24
-  </xsd:documentation>
-</xsd:annotation>
-
-<xsd:element name="sitemapindex">
+<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema" targetNamespace="http://www.sitemaps.org/schemas/sitemap/0.9" xmlns="http://www.sitemaps.org/schemas/sitemap/0.9" elementFormDefault="qualified">
   <xsd:annotation>
     <xsd:documentation>
-      Container for a set of up to 1,000 sitemap URLs.
-      This is the root element of the XML file.
+      XML Schema for Sitemap index files.
+      Last Modifed 2009-04-08
     </xsd:documentation>
   </xsd:annotation>
-  <xsd:complexType>
+
+  <xsd:element name="sitemapindex">
+    <xsd:annotation>
+      <xsd:documentation>
+        Container for a set of up to 50,000 sitemap URLs.
+        This is the root element of the XML file.
+      </xsd:documentation>
+    </xsd:annotation>
+    <xsd:complexType>
+      <xsd:sequence>
+        <xsd:any namespace="##other" minOccurs="0" maxOccurs="unbounded" processContents="strict"/>
+        <xsd:element name="sitemap" type="tSitemap" maxOccurs="unbounded"/>
+      </xsd:sequence>
+    </xsd:complexType>
+  </xsd:element>
+
+  <xsd:complexType name="tSitemap">
+    <xsd:annotation>
+      <xsd:documentation>
+        Container for the data needed to describe a sitemap.
+      </xsd:documentation>
+    </xsd:annotation>
     <xsd:sequence>
-      <xsd:element ref="sitemap" maxOccurs="1000"/>
+      <xsd:element name="loc" type="tLocSitemap"/>
+      <xsd:element name="lastmod" type="tLastmodSitemap" minOccurs="0"/>
+      <xsd:any namespace="##other" minOccurs="0" maxOccurs="unbounded" processContents="strict"/>
     </xsd:sequence>
   </xsd:complexType>
-</xsd:element>
-
-<xsd:element name="sitemap">
-  <xsd:annotation>
-    <xsd:documentation>
-      Container for the data needed to describe a sitemap.
-    </xsd:documentation>
-  </xsd:annotation>
-  <xsd:complexType>
-    <xsd:all>
-      <xsd:element ref="loc"/>
-      <xsd:element ref="lastmod" minOccurs="0"/>
-    </xsd:all>
-  </xsd:complexType>
-</xsd:element>

-<xsd:element name="loc">
-  <xsd:annotation>
-    <xsd:documentation>
-      REQUIRED: The location URI of a sitemap.
-      The URI must conform to RFC 2396 (http://www.ietf.org/rfc/rfc2396.txt).
-    </xsd:documentation>
-  </xsd:annotation>
-  <xsd:simpleType>
+  <xsd:simpleType name="tLocSitemap">
+    <xsd:annotation>
+      <xsd:documentation>
+        REQUIRED: The location URI of a sitemap.
+        The URI must conform to RFC 2396 (http://www.ietf.org/rfc/rfc2396.txt).
+      </xsd:documentation>
+    </xsd:annotation>
     <xsd:restriction base="xsd:anyURI">
       <xsd:minLength value="12"/>
       <xsd:maxLength value="2048"/>
     </xsd:restriction>
   </xsd:simpleType>
-</xsd:element> 

-<xsd:element name="lastmod">
-  <xsd:annotation>
-    <xsd:documentation>
-      OPTIONAL: The date the sitemap was last modified. The date must conform
-      to ISO 8601 (http://www.w3.org/TR/NOTE-datetime). Example: 2005-05-10
-      Lastmod may also contain a timestamp. Example: 2005-05-10T17:33:30+08:00
-    </xsd:documentation>
-  </xsd:annotation>
-  <xsd:simpleType>
-    <xsd:restriction base="xsd:string">
-      <xsd:minLength value="10"/>
-      <xsd:maxLength value="25"/>
-    </xsd:restriction>
+  <xsd:simpleType name="tLastmodSitemap">
+    <xsd:annotation>
+      <xsd:documentation>
+        OPTIONAL: The date the document was last modified. The date must conform
+        to the W3C DATETIME format (http://www.w3.org/TR/NOTE-datetime).
+        Example: 2005-05-10
+        Lastmod may also contain a timestamp.
+        Example: 2005-05-10T17:33:30+08:00
+      </xsd:documentation>
+    </xsd:annotation>
+    <xsd:union>
+      <xsd:simpleType>
+        <xsd:restriction base="xsd:date"/>
+      </xsd:simpleType>
+      <xsd:simpleType>
+        <xsd:restriction base="xsd:dateTime"/>
+      </xsd:simpleType>
+    </xsd:union>
   </xsd:simpleType>
-</xsd:element> 
+

 </xsd:schema>
\ No newline at end of file 
```

# ios - 如何阻止 UIWebView 的图像加载？

> ID：13624033
> 
> 赞同：3
> 
> 时间：2012-11-29T10:47:24.163
> 
> 标签：ios, objective-c, image, uiwebview

我想用uiwebview来加载www.youku.com。但是，我只想加载没有图像的纯文本。换句话说，我想阻止 uiwebview 的图像。我检查了[http://www.icab.de/blog/2009/08/18/url-filtering-with-uiwebview-on-the-iphone/](http://www.icab.de/blog/2009/08/18/url-filtering-with-uiwebview-on-the-iphone/)并将其实现如下：

```
- (NSCachedURLResponse*)cachedResponseForRequest:(NSURLRequest*)request
{
   NSURL *url = [request URL];
   BOOL blockURL = [url.absoluteString hasSuffix:@"jpg"] || [url.absoluteString hasSuffix:@"jpeg"] || [url.absoluteString hasSuffix:@"png"] || [url.absoluteString hasSuffix:@"gif"] || [url.absoluteString hasSuffix:@"ico"] || [url.absoluteString hasSuffix:@"JPG"] || [url.absoluteString hasSuffix:@"JPEG"];
   if (blockURL) {
     NSURLResponse *response =
         [[NSURLResponse alloc] initWithURL:url
                                MIMEType:@"text/plain"
                       expectedContentLength:1
                            textEncodingName:nil];
    NSCachedURLResponse *cachedResponse =
          [[NSCachedURLResponse alloc] initWithResponse:response
                         data:[NSData dataWithBytes:" " length:1]];

    [super storeCachedResponse:cachedResponse forRequest:request];

    [cachedResponse release];
    [response release];
}
    return [super cachedResponseForRequest:request];
} 
```

使用上面列出的代码，我可以阻止一些带有 png 、 gif 、 jpg 等后缀的图像。但是，有些图片有特殊的 url 没有后缀，例如[http://g4.ykimg.com/0100641F4650B6A053C841081E2CED75B89DFC-FF09-FE48-E9A9-783C7AD8EC42](http://g4.ykimg.com/0100641F4650B6A053C841081E2CED75B89DFC-FF09-FE48-E9A9-783C7AD8EC42)。对于这些特殊的 url，上面的代码将不起作用。那么，如果有人对如何检测特殊 url 是否与图像相关有好的想法？

# dll - JNI - 将 dll 编译为 64 位

> ID：13624034
> 
> 赞同：1
> 
> 时间：2012-11-29T10:47:41.947
> 
> 标签：dll, java-native-interface, x86, 64-bit, 32-bit

`.dll`我使用以下命令编译我的：`gcc -mno-cygwin -I"/cygdrive/c/Program Files/Java/jdk1.7.0_04/include" -I"/cygdrive/c/Program Files/Java/jdk1.7.0_04/include/win32" -Wl,--add-stdcall-alias -shared -o CalculatorFunctions.dll CalcFunc.c` 我使用 GlassFish for Eclipse。整个系统是一个 CORBA 客户端-服务器。当我从 Eclipse 启动服务器时 - 很好。但是当我尝试从 CMD 运行服务器时（因为我想为服务器设置端口和主机地址），它给了我：`Exception: ... .dll: Can't load AI 32-bit .dll on a AMD 64-bit platform`

我搜索了其他主题，发现我应该尝试将我的 JDK 更改为 32 位 - 没有再次工作。所以我读到的另一个解决方案是将 .DLL 编译为 64 位。我需要使用什么命令或者我是如何做到的？

提前致谢！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T14:17:02.803

您不仅需要*一个命令*，还需要整个[64 位 MinGW 工具链](http://mingw-w64.sourceforge.net/)——首先是一个 64 位编译器。然后你的 gcc 调用的参数应该是一样的。

请注意，64 位不仅仅是可编译性的问题。原始数据类型具有不同的大小，因此任何未经`sizeof`检查的代码假设都是一个潜在问题。最突出的是指针算术。

# mysql - Mysql帮助更新具有相同值的行

> ID：13624038
> 
> 赞同：2
> 
> 时间：2012-11-29T10:47:53.600
> 
> 标签：mysql, sql

我有一个名为 status_t 的表：

```
**id** **page** **status** **locked**_by
  1      0        2          0
  1      1        2          0
  1      2        2          0
  2      0        0          0
  2      1        2          0
  2      2        2          0 
```

主键是 (id, page) 。

在上面的示例中，我想更新**所有页面**状态 = 2 的所有行。

**即**查询应该将所有 id = 1 的行更新为状态 3。所以表将变为

```
**id** **page** **status** **locked**_by
  1      0        3          1
  1      1        3          1
  1      2        3          1
  2      0        0          0
  2      1        2          0
  2      2        2          0 
```

我试过了：

```
SELECT * FROM  status_t AS t
 WHERE id IN   
 (SELECT id FROM status WHERE status = 0) LIMIT 10 
```

上面的查询获取要更新的行，但我不能这样做：

```
UPDATE status_t as S1 WHERE id IN 
(SELECT id FROM status_t WHERE status = 2) 
SET S1.status = 3, S1.locked_by = 1 
```

编辑：

上表只是一个例子。

我不想更新 WHERE id = 1 。我只想更新行，无论具有相同 ID 的状态 = 2 的 ID。在上面的示例中，如果键为 (2, 2) 的行的状态 = 2，那么它应该被更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T11:02:25.183

试试这个：

```
UPDATE status_t a 
INNER JOIN (SELECT id FROM status_t WHERE STATUS = 2 GROUP BY id HAVING COUNT(*) = 3 LIMIT 1) AS b ON a.id = b.id
SET a.status = 3, a.locked_by = 1; 
```

这将根据需要更新所有页面的数据，状态 = 2

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T11:05:02.513

这应该有效：

```
update status_t t
join (
    select distinct id from status_t s
    where status=2 and not exists (
        select 1 from status_t ss
        where s.id=ss.id and s.status <> ss.status
    )
) i on i.id = t.id
set t.status = 3 
```

内部查询选择所有值`status`都设置为的 ID `2`。它通过检查没有具有相同 ID 和不同状态的行来实现此结果。

这是[关于 sqlfiddle 的演示](http://sqlfiddle.com/#!2/96bac/1)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T10:49:33.390

以下应该可以解决问题：

```
UPDATE status_t 
SET status = 3, locked_by = 1 
WHERE status = 2 
```

应该不需要使用子查询，因为 WHERE 应该能够直接在 UPDATE 语句中使用。

编辑：

我刚刚注意到您只对带有 的行进行了更新`ID = 1`，这与“在上面的示例中我想更新所有页面的状态 = 2 的所有行。id `. The rows where`= 2状态 = 2”的语句不匹配`, and`由我的查询更新。

如果您只需要更新特定的 id，请在我的查询末尾添加以下内容：

`AND id = 1`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T10:50:28.830

试试这个：：

```
UPDATE status_t SET status = 3, locked_by = 1 WHERE status = 2 
```

如果您想以自己的方式实现这一目标：

```
UPDATE 
status_t as S1 
INNER JOIN 
(
   SELECT keyword_id 
    FROM status_t WHERE status = 2
 ) as tempStatus ON id= tempStatus.keyword_id

SET S1.status = 3, S1.locked_by = 1 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-29T10:50:56.090

试试这个

```
 update status_t set staus=3 ,locked_by=1 
  where id=1 
```

或者

```
 update status_t set status=3 ,locked_by=1 
  where status=2 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-29T10:52:56.057

```
UPDATE status_t SET status = 3, S1.locked_by = 1 WHERE id = 1 
```

# c# - 在 C# 中从 DataTable 编写 excel 表

> ID：13624040
> 
> 赞同：0
> 
> 时间：2012-11-29T10:48:04.247
> 
> 标签：c#, excel

如何在 C# 中编写具有两个字段（让它们成为 DataTable 的 f1、f2）的 excel 表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T10:59:20.520

您可以使用`OleDb`组件通过 SQL 来实现此目的。[这个问题](https://stackoverflow.com/questions/57987/writing-into-excel-file-with-oledb)给出了一个样本。

请注意，要将其用于 Excel 2003 文件，您的程序必须仅编译为 X86，因为 JET 驱动程序仅适用于 32 位。

要编写 Excel 2007/10 文件，您需要使用不同的 JET 驱动程序（[请参见此处](http://www.dotnetspider.com/forum/111574-write-data-into-xlsx-file-using-Microsoft.ACE.OLEDB.12.0-provider.aspx)）。

# repeater - AJAX 在子转发器数据绑定中不起作用

> ID：13624045
> 
> 赞同：1
> 
> 时间：2012-11-29T10:48:15.333
> 
> 标签：repeater

我有一个父中继器和一个子中继器，它位于父中继器内。

从一个文本框中，我将一些内容发布到与 AJAX 更新面板一起使用的父转发器（不发回页面），但是如果我从另一个文本框中发布到子转发器，那么我检查了表格，数据已插入但它不显示在儿童中继器中。一旦我刷新我的页面，就会显示子中继器中的数据。

我如何在没有页面回发的情况下实现这一目标。即我想用客户端AJAX或java脚本或jquery来做。请提供代码。

# audio - 将音频文件流式传输给网站用户/听众的最佳方式是什么

> ID：13624048
> 
> 赞同：15
> 
> 时间：2012-11-29T10:48:25.037
> 
> 标签：audio, video, media, audio-streaming, internet-radio

我正在开发一个音乐网站，它将存储在服务器中的音频文件流式传输给用户，音频文件将通过放置在网页中的 Flash 播放器播放..

1.  我听说我需要使用 **流媒体服务器**来传输音频文件（比如 2mb 到 3mb 大小）。我需要使用一个吗？

    我找到了一些流媒体服务器软件，例如[http://www.icecast.org](http://www.icecast.org) - 但在他们的文档中，它用于流式广播电台和直播流媒体目的，但我只需要更快地流式传输音频文件和小尺寸（低带宽）质量好..

2.  我听说我需要先对音频文件进行编码，然后将它们发送给听众，最后音频文件需要再次解码。真的吗？我怎样才能做到这一点？如果我需要使用特殊的网络服务器，我应该在哪里托管我的文件？有没有好的托管服务提供商？

3.  如果我在普通网络服务器中托管音频文件，他们将使用 HTTP 或 TCP 将我的音频文件传递给用户/侦听器，但我发现 HTTP 和 TCP 不是用于多媒体目的的好方法，例如流式传输音频和视频文件，它们用于交付 HTML 和东西。我发现我应该使用 RSTP 或 UDP 来传输音频文件。我应该使用什么？

4.  我知道 .MP3 文件的质量比其他格式好得多，但它也为音频文件提供了巨大的尺寸。我应该为音频文件使用哪种格式？

5.  大多数质量最好的音频文件都超过 7mb，所以我打算使用软件自己转换它们，这样我就可以获得质量好的小文件。如果我正在转换我的音频文件，我应该为我的文件使用什么好的**比特率？**

6.  任何已知的用于转换音频文件同时保持良好质量的最佳软件？

注意** - 我知道在网站开始时我不需要复杂的要求，但我想知道他们用于 soundcloud.com 的最佳方式

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-04T04:04:35.007

这是一位实际经营广播电台的人的回复，他是一名音频技术员和网页设计师。以下是从 5000 多个小时的最新研究中收集的知识！

6)

*   音频软件？

您需要拥有能够：

*   转换为其他比特率和格式
*   将所有 mp3 的音量标准化为相同的“标准化”级别。(-1 分贝)
*   在开始和/或结束时停止沉默。
*   均衡音频，使其听起来不错。
*   添加效果，混合...等。

最好的，最常用的，非常可靠和免费的是“Audacity”

5)

*   好比特率？

如果比特率太高，您在较慢连接上的听众将遭受“bufferunderuns”，即：音频中的打嗝/短暂中断导致他们的连接无法跟上（高速）速度。

如果它太低，那么质量就不好。

最佳选择是 128 kb/s，这听起来不错，并且不会导致大多数人出现欠载。

最好的格式是 Mp3，因为它是大多数播放器和广播提供者都可以处理的格式。

使用高于平均文件大小的 4 分钟轨道将约为 4 Mb。

由于 Mp3 @ 128kb/s 是最受欢迎的，您将从直播服务器提供商处获得最优惠的价格/质量交易。

5b)

*   音频标记？

你确实忘记了那个。

您需要确保将您的音频文件“标记”，即：播放器中显示为“艺术家 - 标题”的信息不是来自文件名......而是来自（iD1 / iD3）“标签”

最好的，最常用的，非常可靠的免费软件是：“mp3tag”它也可以做“批量”（一次1000个mp3）

[http://www.mp3tag.de/en/](http://www.mp3tag.de/en/)

4)

*   编解码器？

您以上述格式“Mp3 @ 128 kb/s”将文件上传到服务器，因为它是所有玩家都可以播放的最常用格式。

确保您以与服务器输出相同的格式（上图）上传，这将在您的服务器上保持（重要的）低处理器负载（它不需要转换）。

Shoutcast-server（或其他流服务器）将获取您单独的 mp3 并将它们转换为一个实时流，它将为多个听众（100 个）创建多个流。它还将为您提供统计信息（听众人数，从哪里，现在播放，之前播放）

听众可以通过两种方式播放它：

a-来自嵌入在您网站上的嵌入式播放器。b-或者通过单击您网站上的链接，该链接将在您的访问者安装的任何（独立）播放器中打开您的流（Winamp、WindowsMediaPlayer、Realplayer、Quicktime、iTunes...等）独立将提供最好的质量，因为它有更多/更好的音频控制（均衡器...等）

最佳做法是同时提供嵌入式播放器和简单的可点击链接。查看至少 20 个广播电台网站（包括专业人士和业余爱好者），看看他们是如何做到的。

现在最好的免费嵌入式播放器是“jPlayer”，因为它的双模式（HTML5 / Flash）所以所有浏览器和所有移动设备都可以播放它。它得到了论坛、教程等的很好支持

[http://www.jplayer.org](http://www.jplayer.org)

2)

*   托管服务提供商？

Google 的“Shoutcast 流媒体”或“Shoutcast 服务器”比较了其中的 20 个以获得最佳价格/质量……使用 Google 再次研究它们。

他们将拥有特殊的直播软件（基于网络），例如“Centova”，您可以从任何浏览器控制它，您可以向其直播...或创建播放列表，在您睡觉时从服务器无人看管播放（“autodj”）您可以创建多个播放列表，以便它们将在特定时间/日期/随机播放...等。

您可以基于 autodj 播放列表创建您的整个电台，这样您就不必担心自己的上传连接中断，您可以关闭自己的电脑。

对于 autodj，您需要具有至少 5 Gb 存储 (mp3´s) 的直播服务，它可以为您提供大约 3 到 4 天的音乐而不会重复...以巧妙的方式使用播放列表并考虑到听众平均会收听在某些时间 30 分钟到 2 小时之间，..您可以确保他们不会一直听到相同的曲目。

如果您坚持从您的自己的计算机（直接或通过流服务器提供商）进行“实时”（实时）广播（流媒体），那么最常用的软件是“Sam broadcaster”

就是这样......从一个好的 Shoutcast 服务器提供商开始，然后构建您的网站并创建一个指向流的可点击链接，然后您执行嵌入式播放器。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-11-30T04:59:20.960

首先，让我澄清一下我对您的需求的理解。如果这些错误，请添加评论并在您的问题中澄清：

*   您打算建立一个播放音频的网站
*   音频不会是一个连续的流，而是由单个文件组成
*   您的音频通常是音乐

**现在，关于你的问题：**

> **(1)**据我所知，我需要使用流媒体服务器来传输音频文件（如 2mb 到 3mb 大小）。我需要使用一个吗？ **(3A)**如果我在普通网络服务器中托管音频文件，他们将使用 HTTP 或 TCP 将我的音频文件传递给用户/监听器，但我发现 HTTP 和 TCP 不是用于多媒体目的的好方法，例如流式音频和视频文件，它们用于交付 HTML 和内容。

废话。流媒体服务器，例如 SHOUTcast/Icecast，实际上只是发送来自编码器的内容的 HTTP 服务器。客户端不知道它和 HTTP 之间的区别。元数据在客户端的请求（使用特殊的请求头）中交织到内容流中，但它仍然与 HTTP 兼容。

HTTP 是一种适用于传输任何类型内容的协议。曾经从网站下载过东西吗？那将是HTTP。

如果它对 YouTube、Sound Cloud、Pandora 和几乎所有其他人都足够好，那么它可能对你也足够好，嗯？

> **(3B)**我发现我应该使用 RSTP 或 UDP 来传输音频文件。我应该使用什么？

TCP是确保可靠传输的底层网络协议。数据包以正确的顺序接收，并得到确认，以便可以重新传输任何丢失的数据包。这有一些开销。有时使用 UDP 的原因是它以不可靠为代价提供了较低的延迟。这对于电话通信来说很好，但对于时间不敏感的媒体（例如来自服务器的一堆音频文件）则毫无意义。事实上，如果您收到太多损坏的数据包，您的音频播放器通常会停止解码文件，并且需要重新启动。

[RTSP](http://en.wikipedia.org/wiki/Real_Time_Streaming_Protocol)对您的需求来说太过分了。它支持大量用于媒体控制、动态变化比特率等的东西。这不适合您的情况。也许如果您正在流式传输实时视频或冗长的内容，这会更合适。

> **(2)**我听说我需要先对音频文件进行编码，然后将它们发送给听众，最后音频文件需要再次解码。真的吗？我怎样才能做到这一点？如果我需要使用特殊的网络服务器，我应该在哪里托管我的文件？有没有好的托管服务提供商？

您需要选择一个编解码器来编码客户端支持的音频。我假设您将使用带有 Flash 后备的 HTML5。不幸的是，没有普遍支持的可用编解码器。请参阅此处的图表：http: [//html5doctor.com/html5-audio-the-state-of-play/#support](http://html5doctor.com/html5-audio-the-state-of-play/#support)

> **(4)**我知道 .MP3 文件的质量比其他格式好得多，但它也给音频文件带来了巨大的尺寸。我应该为音频文件使用哪种格式？

在门口检查你的假设，你在这里是非常错误的。请记住，原始 PCM 数据通常比 MP3 大 8 倍（当然取决于选择的比特率）。在任何情况下，您都需要编码为 AAC、MP3 和 Vorbis 以获得最广泛的客户端兼容性。aacPlus 是 AAC 的扩展，通常被认为是在相对较低的比特率下获得高质量音频的标准。AAC 中的 128kbit 流听起来比 MP3 中的 128kbit 流更好。

> **(5)**大多数质量最好的音频文件都超过 7mb，所以我打算使用软件自己转换它们，这样我就可以获得质量不错的小尺寸文件。如果我正在转换我的音频文件，我应该为我的文件使用什么好的比特率？

这个问题非常主观。就个人而言，作为音乐家和发烧友，我更喜欢听到原始质量的东西。我使用 FLAC 来压缩我的音乐库，因为质量是无损的。根据您的需要，这将占用太多带宽。大多数人不知道 128kbit MP3 和原版之间的区别。许多“高级”互联网广播电台提供 128kbit aacPlus 和 256kbit MP3。Pandora 为普通用户提供 96kbit MP3，为高级用户提供 192kbit MP3。进行实验，并选择一组适合您和用户的比特率。

**始终**保留原件。它不必在您的服务器上，但您需要它。如果您重新压缩已经有损压缩的文件，那么您将失去额外的质量。如果您制作了一个来源的 3 个压缩版本，请确保您是从原始来源进行的。

> **(6)**任何已知的最好的音频文件转换软件，同时保持良好的质量？

如果您使用它是合法的，请查看[FFMPEG](http://ffmpeg.org/)。它几乎可以处理您能想到的任何编解码器。不过请注意，请仔细检查以确保您支付了所有必要的许可费用。其中包含的一些编解码器已获得专利。我不是律师，还不能弄清楚在商业网站上使用它们的合法性。我所知道的是，它引起了激烈的争论。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2014-09-09T15:10:23.640

多年来，我一直在为一家音乐公司客户使用[http://www.yagosta.com 。](http://www.yagosta.com)免费服务和 SSssooooo 很容易。不需要任何技术知识。我已经好几年没有更新这个网站了，但你可以在下面的链接中看到它的样子。他们可能有很多你可以定制的新设计。完全满足大多数要求。 [http://www.bluedotmusic.net/selector01.html](http://www.bluedotmusic.net/selector01.html)

# android - 使用 MediaPlayer 播放 wav

> ID：13624049
> 
> 赞同：1
> 
> 时间：2012-11-29T10:48:25.980
> 
> 标签：android, wav

我正在尝试读取原始文件中的 wav 文件。

这是我使用的代码：

```
MediaPlayer mPlayer = MediaPlayer.create(getActivity(), R.raw.error);

mPlayer.start(); 
```

我不知道为什么不播放wav？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T10:58:52.817

尝试使用`setOnCompletionListener`之前的`.start`方法`mPlayer`

```
button[i].setOnClickListener(new OnClickListener() {
      public void onClick(View view) {

          MediaPlayer mPlayer = MediaPlayer.create(getActivity(), R.raw.error);
          mPlayer.setOnCompletionListener(new OnCompletionListener() {

             @Override
             public void onCompletion(MediaPlayer mp) {
                 // TODO Auto-generated method stub
                 mp.release();
             }
          });   
          mPlayer.start();
      }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T11:05:13.457

嘿，在您的代码中使用以下代码链接

```
 import android.media.MediaPlayer;
    import android.os.Bundle;
    import android.app.Activity;
    import android.view.Menu;
    import android.view.View;
    import android.widget.Button;
    import android.widget.Toast;

    public class MainActivity extends Activity {
        MediaPlayer mp;
         Button Button01;
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);

            mp = MediaPlayer.create(this, R.raw.blah);

            Button Button01 = (Button)this.findViewById(R.id.button1);

            Button01.setOnClickListener(new View.OnClickListener() {
                public void onClick(View v) {
                    mp.start();
                }
            });
        }

        @Override
        public void onDestroy() {
            super.onDestroy();
            if(mp!=null){
                mp.release();
            }
        }
} 
```

# canvas - 使用fabricjs画布库删除更新的文本

> ID：13624054
> 
> 赞同：0
> 
> 时间：2012-11-29T10:48:39.873
> 
> 标签：canvas, html5-canvas, fabricjs

**添加文本元素**

```
function add_text() {   
    var myText = new fabric.Text(text,
    {
        fontSize: size,
        fontFamily: fm,
        strokeStyle: sc,
        fill: fc,
        left: myCanvas.getWidth()/2,
        top: myCanvas.getHeight()/2
    });

    myCanvas.add(myText);
} 
```

**更新文本和大小**

```
function chng_txt() {
    var obj = myCanvas.getActiveObject();
    var fm = document.getElementById('up_text').value;
    obj.setText(fm);
    myCanvas.add(obj);
    myCanvas.renderALL();
}

function chng_fs() {
    var obj = myCanvas.getActiveObject();
    var fs = document.getElementById('up_size').value;
    obj.setFontsize(fs);
    myCanvas.add(obj);
    myCanvas.renderALL();
} 
```

**删除文本元素**

```
function rmv_txt() {
    var obj = myCanvas.getActiveObject();
    myCanvas.remove(obj);
} 
```

**我的问题是**

我可以添加文本和更新文本。
但我无法删除已更新的文本元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T16:24:10.167

实际发生的情况是您在其顶部添加了另一个对象，即在彼此顶部有两个相同的对象，当您删除它时，它只删除了活动对象。

您所要做的就是`myCanvas.add(obj);`在更新文本时删除该行。所以你的代码看起来像

```
function chng_fs() {
    var obj = myCanvas.getActiveObject();
    var fs = document.getElementById('up_size').value;
    obj.setFontsize(fs);
    myCanvas.renderAll();
} 
```

还有一件事，当您进行任何更改时渲染画布总是更好，在添加和删除对象之后包括 renderAll() 即使它工作正常并且它不是“renderALL”它应该是“renderAll”，我想你知道这一点，只是发布时的拼写错误，否则您将看不到 text 属性已更改。

# php - bzdecompress 空字符串

> ID：13624057
> 
> 赞同：0
> 
> 时间：2012-11-29T10:48:49.937
> 
> 标签：php, zip

我想使用 curl 将数据从一台服务器发布到另一台服务器。我不能使用其他任何东西，例如 put - 我不能更改 apache 设置，并且它不允许在我的服务器上使用。这就是我想用post来做的原因。

我有以下代码：

```
if (!empty($_POST)) {
    //let's see what's posted
    var_dump($_POST);

    //unzip data
    retrieveData($_POST);
}

function retrieveData($post)
{
    $output = false;
    if (isset($post['data'])) {
        if (isset($post['zipped']) && $post['zipped'] == true) {
            $output = bzdecompress ($post['data']);

            var_dump($output);
        }
    }
    return $output;
} 
```

结果是

```
array(2) { ["data"]=> string(7) "BZh41AY" ["zipped"]=> string(1) "1" } 
string(0) "" 
```

如您所见，我从 bzdecompress 函数中得到一个空字符串。有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T08:45:36.760

问题在于编码字符而不是`bzdecompress`函数。我不必在 POST 方法中使用字符`urlencode`。`urldecode`

# php - 如何从数据库中检索值

> ID：13624058
> 
> 赞同：1
> 
> 时间：2012-11-29T10:48:55.417
> 
> 标签：php, android, database, android-maps

我编写了一个 android 程序来将用户位置信息（纬度和经度值）存储到数据库中。这工作正常。

我需要做的是“从数据库中检索那些纬度和经度值并在地图上标记路线”。以下是我根据给定的纬度和经度值绘制地图的代码部分。我通过网上冲浪找到了这部分代码。我不知道如何让它接受来自数据库的数据并在地图上标记它。请给我一个想法。

```
 function initialize() {
            var latlng = new google.maps.LatLng(18.524220910029783,73.85761860000002);
            var myOptions = {
                zoom: 10,
                center: latlng,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            }; 
```

这里直接给出 lat 和 lon 值。我需要从数据库中检索这些值，而不是直接提供。

以下是我的 PHP 代码，用于将从 android 应用程序获取的位置信息存储到 DB

```
<?php
ob_start();
$host="localhost"; // Host name 
$username=""; // Mysql username 
$password=""; // Mysql password 
$db_name="test"; // Database name 
$tbl_name="map"; // Table name 
$message=$_POST['a'];
$message1=$_POST['b'];
mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
mysql_select_db("$db_name")or die("cannot select DB");
$query = "INSERT INTO map (id,longitude,latitude) VALUES (DEFAULT,'".$_REQUEST['message']."', '".$_REQUEST['message1']."')";

mysql_query($query) or die(mysql_error("error"));
mysql_close();
?> 
```

提前致谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T11:14:29.390

看到[这](http://www.w3schools.com/php/php_mysql_select.asp)将向您展示如何从 db 中获取数据。这是 php 任务。

# perl - 如何使用 Perl XS 代码中的绑定文件句柄？

> ID：13624061
> 
> 赞同：1
> 
> 时间：2012-11-29T10:49:01.043
> 
> 标签：perl, io, xs

以下最小示例定义了一个包装器`PerlIO_write`：

```
MODULE = My::FH        PACKAGE = My::FH
INCLUDE: const-xs.inc
int
write_fh (SV* fh, SV* str)
CODE:
STRLEN len
char* buf = SvPV(str, len);
PerlIO* io = IoIFP(sv_2io(fh));
if (io) {
    RETVAL = PerlIO_write(io, buf, len);
} else {
    croak("cannot use fh as a PerlIO handle");
}
OUTPUT:
RETVAL 
```

`write_fh`在使用创建的文件句柄上使用该函数`open $fh, '<', \$buf`可以按预期工作。但是，使用以下代码段创建的绑定文件句柄不会转换为 PerlIO 句柄：

```
my $fh = Symbol::gensym;
tie *$fh, 'My::TIEFH', \$buf; 
```

`My::TIEFH`包含所需的方法并按`print $fh $str`预期通过作品对其进行写入。

我需要做什么才能从 XS 土地写入绑定的文件句柄？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T11:16:10.300

`print`用于何时`call_method`调用`PRINT`

```
io && (mg = SvTIED_mg((const SV *)io, PERL_MAGIC_tiedscalar))) 
```

是真的。放置在堆栈上的祝福对象是

```
SvTIED_obj(MUTABLE_SV(io), mg) 
```

* * *

顺便说一句，XS 编译器可以在 的内容之前放置非声明代码`CODE`，所以 的内容`CODE`不能以声明开头。

```
CODE:
    STRLEN len
    char* buf = SvPV(str, len);
    PerlIO* io = IoIFP(sv_2io(fh));
    if (io) {
    ... 
```

应该

```
CODE:
    {
        STRLEN len
        char* buf = SvPV(str, len);
        PerlIO* io = IoIFP(sv_2io(fh));
        if (io) {
        ...
    } 
```

或者

```
PREINIT:
    STRLEN len
    char* buf = SvPV(str, len);
    PerlIO* io = IoIFP(sv_2io(fh));
CODE:
    if (io) {
    ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T13:50:33.363

在尝试理解`print`in`pp_hot.c` 和 reading的定义之后`perlcall(3)`，我想出了以下代码。那有意义吗？

```
MODULE = My::FH        PACKAGE = My::FH
INCLUDE: const-xs.inc
int
write_fh (SV* fh, SV* str)
INIT:
STRLEN len;
char* buf = SvPV(str, len);
PerlIO* pio = IoIFP(sv_2io(fh));
CODE:
if (pio) {
  RETVAL = PerlIO_write(pio, buf, len);
} else {
  if (!SvROK(fh))
    croak("fh is not a reference");
  IO* io = GvIO(SvRV(fh));
  if (io == NULL)
    croak("fh is not a GLOB reference");
  MAGIC* mg = SvTIED_mg((const SV*)io, PERL_MAGIC_tiedscalar);
  if (mg == NULL)
    croak("fh is not a tied filehandle");
  SV* obj = SvTIED_obj(MUTABLE_SV(io), mg);
  if (obj == NULL) 
    croak("???");
  ENTER;
  SAVETMPS;
  PUSHMARK(SP);
  XPUSHs(obj);
  XPUSHs(str);
  PUTBACK;
  RETVAL = call_method("PRINT", G_SCALAR);
  if (i != 1)
    croak("wrong number of return values (%i)", RETVAL);
  SPAGAIN;
  RETVAL=POPi;
  PUTBACK;
  FREETEMPS;
  LEAVE;
}
OUTPUT:
RETVAL 
```

# html - 垂直对齐 div 内的图像

> ID：13624064
> 
> 赞同：2
> 
> 时间：2012-11-29T10:49:10.083
> 
> 标签：html, css

我知道制作了大约 100 个主题，我已经尝试了所有 100 个主题，但我无法让它工作，如果您签到，请在**中间对齐图像**

[http://one1.no-ip.org/index.php?hitta=tanto&page=search](http://one1.no-ip.org/index.php?hitta=tanto&page=search)

您会看到徽标位于屏幕顶部，无论我做什么，我都无法使其正确对齐。我确定有什么东西在干扰，但我就是不知道是什么，我什至做了一个小提琴来检查我使用的方法是否有效

[http://jsfiddle.net/UJATF/](http://jsfiddle.net/UJATF/) *图片位于 div 元素中间的工作示例*

**CSS**

```
 .logo{
    background:white;
    position:absolute;

    width:105px;
    height:90px;
    line-height:90px;
    left:180px;
    margin-top:20px;

    line-height:90px;
    text-align:center;

    -webkit-border-radius: 5px;
    -moz-border-radius: 5px;
    border-radius: 5px;

    box-shadow:inset 0px 0px 0px 1px white,inset 0px 0px 10px -4px black;
    z-index:1000;
    overflow:hidden;    
}
.logo img{
    vertical-align:middle;
    max-width:90px;
    max-height:40px;
} 
```

**HTML**

```
<div class="logo">
<a href="./index.php?page=profile&amp;id=377948"><img src="http://www.tantobil.se/images/logo.png"></a>
</div> 
```

所以所有的帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T10:58:13.860

定义你的锚链接`display : inline-block`并给`margin-top`

像这样

```
.logo > a {
    display: inline-block;
    margin-top: 22px;
} 
```

结果是

![在此处输入图像描述](../Images/9d2b9a69a21d9dc88512e875f9aa2510.png)

## --------

您是否正在使用**动态**与而`img`不是习惯于 **第二个选项是**

```
.logo > a {
    display: table-cell;
    height: 90px;
    text-align: center;
    vertical-align: middle;
    width: 105px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T10:58:31.037

既然您在 CSS 中使用固定高度，为什么不使用简单的数学来确定`top`徽标的位置？

.content 高 121px，.logo 高 90px

区别是 31px，这意味着您需要 15.5px 的顶部偏移量。另外，将 .content 设置为，`position: relative`以便将徽标相对于 .content 的顶部定位。

# entity-framework - 如何使用 Mono 设置实体框架/SQL Server

> ID：13624065
> 
> 赞同：7
> 
> 时间：2012-11-29T10:49:14.433
> 
> 标签：entity-framework, mono

我正在尝试设置一个非常简单的测试项目来评估 Mono Entity Framework 的功能。尝试访问数据时，我在使用 .NET Runtime 时遇到关于解析模型数据的运行时异常。使用 Mono 运行时时，会引发 stackoverflow 异常。

**这似乎是编译 CSDL Schema Version 3 时发生的内部单声道错误 - 请参阅[Mono Bugtracker](https://bugzilla.xamarin.com/show_bug.cgi?id=6653)。**

所以我的问题是：

如何使用实体框架设置 Mono 以使用 Microsoft SQL Server？由于我找不到太多信息，这是否可能？你们中是否有人使用 EF 成功设置了单声道解决方案并遇到了类似的错误？

这是我到目前为止所做的：

*   已安装 Mono 3.0.1 Beta（最新稳定版不包括`EntityFramework.dll`）
*   为 Visual Studio设置[Mono 配置文件](https://stackoverflow.com/a/13499003/1249506)
*   为 `EntityFramework.dll`/[的延迟签名程序集禁用强名称验证，](https://stackoverflow.com/a/6816381/1249506)`EntityFramework.SQLServer.dll`并将它们添加到 GAC 以防止运行时错误
*   创建了一个简单的模型 + 添加了代码生成项
*   使用模型编写代码

该代码适用于 Microsoft `EntityFramework.dll`（版本 6，预发布）。使用 Mono 等效项时，解析实体模型时似乎存在问题：

异常消息（.NET 运行时）：

> *你调用的对象是空的。*

堆栈跟踪（.NET 运行时）：

```
 at System.Xml.XmlTextReaderImpl.InitStreamInput(Uri baseUri, String baseUriStr, Stream stream, Byte[] bytes, Int32 byteCount, Encoding encoding)
   at System.Xml.XmlTextReaderImpl..ctor(String url, Stream input, XmlNameTable nt)
   at System.Xml.XmlTextReader..ctor(Stream input)
   at System.Data.Entity.Core.EntityModel.SchemaObjectModel.Schema.SomSchemaSetHelper.AddXmlSchemaToSet(XmlSchemaSet schemaSet, XmlSchemaResource schemaResource, HashSet`1 schemasAlreadyAdded)
   at System.Data.Entity.Core.EntityModel.SchemaObjectModel.Schema.SomSchemaSetHelper.AddXmlSchemaToSet(XmlSchemaSet schemaSet, XmlSchemaResource schemaResource, HashSet`1 schemasAlreadyAdded)
   at System.Data.Entity.Core.EntityModel.SchemaObjectModel.Schema.SomSchemaSetHelper.ComputeSchemaSet(SchemaDataModelOption dataModel)
   at System.Data.Entity.Core.Common.Utils.Memoizer`2.Result.GetValue()
   at System.Data.Entity.Core.Common.Utils.Memoizer`2.Evaluate(TArg arg)
   at System.Data.Entity.Core.EntityModel.SchemaObjectModel.Schema.SomSchemaSetHelper.GetSchemaSet(SchemaDataModelOption dataModel)
   at System.Data.Entity.Core.EntityModel.SchemaObjectModel.Schema.Parse(XmlReader sourceReader, String sourceLocation)
   at System.Data.Entity.Core.EntityModel.SchemaObjectModel.SchemaManager.ParseAndValidate(IEnumerable`1 xmlReaders, IEnumerable`1 sourceFilePaths, SchemaDataModelOption dataModel, AttributeValueNotification providerNotification, AttributeValueNotification providerManifestTokenNotification, ProviderManifestNeeded providerManifestNeeded, IList`1& schemaCollection)
   at System.Data.Entity.Core.Metadata.Edm.StoreItemCollection.Loader.LoadItems(IEnumerable`1 xmlReaders, IEnumerable`1 sourceFilePaths)
   at System.Data.Entity.Core.Metadata.Edm.StoreItemCollection.Init(IEnumerable`1 xmlReaders, IEnumerable`1 filePaths, Boolean throwOnError, DbProviderManifest& providerManifest, DbProviderFactory& providerFactory, String& providerManifestToken, Memoizer`2& cachedCTypeFunction)
   at System.Data.Entity.Core.Metadata.Edm.StoreItemCollection..ctor(IEnumerable`1 xmlReaders, IEnumerable`1 filePaths)
   at System.Data.Entity.Core.Metadata.Edm.MetadataCache.StoreMetadataEntry.LoadStoreCollection(EdmItemCollection edmItemCollection, MetadataArtifactLoader loader)
   at System.Data.Entity.Core.Metadata.Edm.MetadataCache.LoadItemCollection[T](IItemCollectionLoader`1 itemCollectionLoader, T entry)
   at System.Data.Entity.Core.Metadata.Edm.MetadataCache.GetOrCreateStoreAndMappingItemCollections(String cacheKey, MetadataArtifactLoader loader, EdmItemCollection edmItemCollection, Object& entryToken)
   at System.Data.Entity.Core.EntityClient.EntityConnection.LoadStoreItemCollections(MetadataWorkspace workspace, DbConnection storeConnection, DbConnectionOptions connectionOptions, EdmItemCollection edmItemCollection, MetadataArtifactLoader artifactLoader)
   at System.Data.Entity.Core.EntityClient.EntityConnection.GetMetadataWorkspace(Boolean initializeAllCollections)
   at System.Data.Entity.Core.EntityClient.EntityConnection.InitializeMetadata(DbConnection newConnection, DbConnection originalConnection, Boolean closeOriginalConnectionOnFailure)
   at System.Data.Entity.Core.EntityClient.EntityConnection.Open()
   at System.Data.Entity.Core.Objects.ObjectContext.EnsureConnection()
   at System.Data.Entity.Core.Objects.ObjectQuery`1.GetResults(Nullable`1 forMergeOption)
   at System.Data.Entity.Core.Objects.ObjectQuery`1.<GetEnumerator>m__2C3()
   at System.Lazy`1.CreateValue()
   at System.Lazy`1.LazyInitValue()
   at System.Data.Entity.Internal.LazyEnumerator`1.MoveNext()
   at System.Linq.Enumerable.Single[TSource](IEnumerable`1 source)
   at System.Linq.Queryable.Count[TSource](IQueryable`1 source)
   at EntityFrameworkMono.Program.Main(String[] args) in c:\Users\Christopher Dresel\Documents\Visual Studio 2012\Projects\New\EntityFrameworkMono\EntityFrameworkMono\Program.cs:line 17
   at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
   at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.ThreadHelper.ThreadStart() 
```

异常消息（单声道运行时）：

> *请求的操作导致堆栈溢出。*

Stacktrace（单声道运行时）：

```
 at System.Xml.Schema.XmlSchemaGroupBase.CheckRecursion (Int32 depth, System.Xml.Schema.ValidationEventHandler h, System.Xml.Schema.XmlSchema schema) [0x00000] in <filename unknown>:0 
  at System.Xml.Schema.XmlSchemaGroupBase.CheckRecursion (Int32 depth, System.Xml.Schema.ValidationEventHandler h, System.Xml.Schema.XmlSchema schema) [0x00000] in <filename unknown>:0 
  at System.Xml.Schema.XmlSchemaElement.CheckRecursion (Int32 depth, System.Xml.Schema.ValidationEventHandler h, System.Xml.Schema.XmlSchema schema) [0x00000] in <filename unknown>:0 
  at System.Xml.Schema.XmlSchemaGroupBase.CheckRecursion (Int32 depth, System.Xml.Schema.ValidationEventHandler h, System.Xml.Schema.XmlSchema schema) [0x00000] in <filename unknown>:0 
  at System.Xml.Schema.XmlSchemaGroupBase.CheckRecursion (Int32 depth, System.Xml.Schema.ValidationEventHandler h, System.Xml.Schema.XmlSchema schema) [0x00000] in <filename unknown>:0 
  at System.Xml.Schema.XmlSchemaElement.CheckRecursion (Int32 depth, System.Xml.Schema.ValidationEventHandler h, System.Xml.Schema.XmlSchema schema) [0x00000] in <filename unknown>:0 
  at System.Xml.Schema.XmlSchemaGroupBase.CheckRecursion (Int32 depth, System.Xml.Schema.ValidationEventHandler h, System.Xml.Schema.XmlSchema schema) [0x00000] in <filename unknown>:0 
  at System.Xml.Schema.XmlSchemaGroupBase.CheckRecursion (Int32 depth, System.Xml.Schema.ValidationEventHandler h, System.Xml.Schema.XmlSchema schema) [0x00000] in <filename unknown>:0
... 
```

这是我正在使用的代码：

```
CustomerEntities entities = new CustomerEntities();
var count = entities.Customers.Count(); // Exception throws here

Console.WriteLine(count);
Console.ReadKey(); 
```

`EDMX`文件

```
<?xml version="1.0" encoding="utf-8"?>
<edmx:Edmx Version="3.0" xmlns:edmx="http://schemas.microsoft.com/ado/2009/11/edmx">
    <!-- EF Runtime content -->
    <edmx:Runtime>
        <!-- SSDL content -->
        <edmx:StorageModels>
            <Schema Namespace="CustomerModel.Store" Alias="Self" Provider="System.Data.SqlClient" ProviderManifestToken="2008" xmlns="http://schemas.microsoft.com/ado/2009/11/edm/ssdl">
                <EntityContainer Name="CustomerModelStoreContainer">
                    <EntitySet Name="Customer" EntityType="CustomerModel.Store.Customer" store:Type="Tables" Schema="dbo" xmlns:store="http://schemas.microsoft.com/ado/2007/12/edm/EntityStoreSchemaGenerator" />
                </EntityContainer>
                <EntityType Name="Customer">
                    <Key>
                        <PropertyRef Name="CustomerID" />
                    </Key>
                    <Property Name="CustomerID" Type="int" Nullable="false" StoreGeneratedPattern="Identity" />
                    <Property Name="CustomerName" Type="nvarchar" Nullable="false" MaxLength="50" />
                </EntityType>
            </Schema>
        </edmx:StorageModels>
        <!-- CSDL content -->
        <edmx:ConceptualModels>
            <Schema Namespace="CustomerModel" Alias="Self" annotation:UseStrongSpatialTypes="false" xmlns="http://schemas.microsoft.com/ado/2009/11/edm" xmlns:annotation="http://schemas.microsoft.com/ado/2009/02/edm/annotation">
                <EntityContainer Name="CustomerEntities" annotation:LazyLoadingEnabled="true">
                    <EntitySet Name="Customers" EntityType="CustomerModel.Customer" />
                </EntityContainer>
                <EntityType Name="Customer">
                    <Key>
                        <PropertyRef Name="CustomerID" />
                    </Key>
                    <Property Name="CustomerID" Type="Int32" Nullable="false" annotation:StoreGeneratedPattern="Identity" />
                    <Property Name="CustomerName" Type="String" Nullable="false" MaxLength="50" Unicode="true" FixedLength="false" />
                </EntityType>
            </Schema>
        </edmx:ConceptualModels>
        <!-- C-S mapping content -->
        <edmx:Mappings>
            <Mapping Space="C-S" xmlns="http://schemas.microsoft.com/ado/2009/11/mapping/cs">
                <EntityContainerMapping StorageEntityContainer="CustomerModelStoreContainer" CdmEntityContainer="CustomerEntities">
                    <EntitySetMapping Name="Customers">
                        <EntityTypeMapping TypeName="CustomerModel.Customer">
                            <MappingFragment StoreEntitySet="Customer">
                                <ScalarProperty Name="CustomerID" ColumnName="CustomerID" />
                                <ScalarProperty Name="CustomerName" ColumnName="CustomerName" />
                            </MappingFragment>
                        </EntityTypeMapping>
                    </EntitySetMapping>
                </EntityContainerMapping>
            </Mapping>
        </edmx:Mappings>
    </edmx:Runtime>
</edmx:Edmx> 
```

最后是我正在使用的连接字符串：

```
<connectionStrings>
    <add name="CustomerEntities"
         connectionString="metadata=.\CustomerModel.csdl|.\CustomerModel.ssdl|.\CustomerModel.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=CHRISTOPHERPC\SQLExpress;initial catalog=test;integrated security=True;MultipleActiveResultSets=True;App=EntityFramework&quot;" 
         providerName="System.Data.EntityClient"/>
</connectionStrings> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T20:19:32.320

Dresel，由于我的声誉可能在这个网站上具有误导性，我可以肯定地说，目前不推荐使用带有 mono 的 EntityFramework 方法。尽管它在技术上受到“支持”，但该库的大部分内容充其量是无法使用的。在花了大约一个月的时间尽可能地挖掘之后，我无法确定将一个功能齐全的网站建立在 %20 以上的可能性。我改为使用 NHibernate，并且对结果感到非常兴奋。并建议在 EF Mono 项目的基础进一步巩固之前也这样做。[Nhibernate 示例（使用 MySQL，支持 MSSQL）](http://developmentality.wordpress.com/2011/05/02/mono-nhibernate-mysql-a-complete-example/)

我希望这至少会有所帮助，因为这只是我的真诚想法。无论你选择做什么，祝你好运，我知道这个 MS 开源举措可能会变得非常“障碍”

# jquery - 现场电子邮件验证不起作用

> ID：13624069
> 
> 赞同：1
> 
> 时间：2012-11-29T10:49:24.590
> 
> 标签：jquery, html, jquery-ui, knockout.js

我有一个单页应用程序。我需要在客户端验证我的字段。所以我使用了 knockout.js。我的视图页面上有两个字段，即电子邮件和密码。我想要什么，当我输入不正确格式的电子邮件 ID 然后移动到密码时，它应该给出电子邮件验证错误。简单来说，当输入格式错误的电子邮件 ID 并按 Tab 按钮时，我应该得到一个验证错误。我已经尝试过 'required pattern="@"' 进行验证，但是在完成 Ajax 调用后它不能正常工作。所以我打算用jquery来验证它。

```
 HTML:-
      <p>
   <label>email:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    <input type="email" name="email"  class="formElement" data-bind='value: email'
     required pattern="@" /></label></p>
     <p>
     <label>password:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <input type="password"
      name="password" class="formElement" data-bind='value: password' /></label></p> 
```

test.js :-

```
 ko.validation.rules.pattern.message = 'Invalid.';
     ko.validation.configure({
     registerExtenders : true,
     messagesOnModified : true,
     insertMessages : true,
     parseInputAttributes : true,
     messageTemplate : null
}); 
```

你可以在这里测试我的代码：- [http://jsfiddle.net/kmvgw/324/](http://jsfiddle.net/kmvgw/324/)

```
 var modalViewModel= {
     email : ko.observable().extend({ // custom message
     required : {
     message : 'Please type your  email address.'
     }
     }),
      password: ko.observable()
     };
     ko.applyBindings(modalViewModel,document.getElementById('light')); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T04:28:19.237

在这里，它的工作： -

email : ko.observable('').extend({ // 自定义消息 email: true }),

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T11:04:10.473

```
var User_Email_Id = $.trim($('#User_Email_Id').val());

if (! /^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(User_Email_Id)){
  //error msg
    } 
```

你可以试试这个

# performance - 执行 CriteriaQuery 太慢

> ID：13624071
> 
> 赞同：-2
> 
> 时间：2012-11-29T10:49:35.247
> 
> 标签：performance, jsf, jpa

我在从数据库查询的页面上有数据表。执行时间太慢。页面渲染时间过长。如何加快速度？存储过程不是理想的解决方案。

```
<p:dataTable var="abc" value="#{abc.getValues()}">...

getValues(){
return ...createQuery(query);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T11:30:16.810

在由 JSF 触发的 getter 方法中执行 DB 查询（或任何繁重的处理）是一个坏主意。如果您在`getValues`方法中放置一个日志语句，您可能会看到它被多次调用。因此，getter 应该只是 getter，并且应该预加载数据。

我看到你正在使用 Primefaces。它带来了一个很好的工具来做到这一点 - `LazyDataModel`. 看看[相应的陈列柜](http://www.primefaces.org/showcase/ui/datatableLazy.jsf)。从 Primefaces 3.4 开始，您可以将 绑定`dataTable`到`LazyDataModel`.

# mysql - 新安装的 mysql 和 mysql-server 但无法启动服务器

> ID：13624077
> 
> 赞同：0
> 
> 时间：2012-11-29T10:49:49.737
> 
> 标签：mysql, linux, fedora

我是 Linux 新手，并试图在我的本地机器中安装 mysql

我用谷歌搜索了很多并按照说明进行操作，但它们都不起作用

有些人推荐[这个](http://www.if-not-true-then-false.com/2010/install-mysql-on-fedora-centos-red-hat-rhel/)“但它对我不起作用，系统警告我这不是官方版本。

基本上我所做的是：

1.  yum install mysql mysql-version 成功无错误，版本为5.5.28
2.  systemctl start mysqld.service 在这里抛出错误：作业失败。有关详细信息，请参阅系统日志和“systemctl status”。

我正在使用 Fedora 16 (3.1.0-7.fc16.i686)

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T03:24:34.197

得到了完全相同的问题。/var/lib/mysql 目录的权限似乎存在问题。

这为我确定了：

```
chown -R mysql.mysql /var/lib/mysql 
```

来源： http: [//www.vivaolinux.com.br/dica/Como-solucionar-ERROR-2002-Cant-connect-to-local-MySQL-server](http://www.vivaolinux.com.br/dica/Como-solucionar-ERROR-2002-Cant-connect-to-local-MySQL-server)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T11:54:15.980

你能试试跑步吗

yum groupinstall "MySQL 数据库"

然后运行

服务 mysqld 启动

看看结果。假设您以 root 身份运行或具有 root 权限。

# java - 如果我想让我的 nvarchar 类型在 sql server 中以与使用 unicode 在 java 中相同的顺序排序，使用什么排序规则

> ID：13624079
> 
> 赞同：2
> 
> 时间：2012-11-29T10:49:51.353
> 
> 标签：java, sql-server, sql-order-by

我有一列有非英文字符，例如下面是值

1.  "Svensk Sjöföda AB"
2.  “至高无上的美味”
3.  “拆分铁路啤酒和啤酒”
4.  《极速快车》
5.  “特种饼干有限公司”
6.  “世界特产”
7.  “西蒙斯小酒馆”
8.  “七大洋进口”
9.  “节省大量市场”
10.  “桑特美食家”

当我在 sql server 中使用 order by 子句进行排序时，我得到的排序与我在 java 中对字符串进行排序时得到的排序不同。

我如何使它们相同的顺序？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T06:43:42.673

我在 java 文档中找到了一个名为 java.text.collat​​or 的类。我们可以创建自己的此类实现来匹配我们想要的排序规则。已经有一个实现 RuleBasedCollat​​or。

感谢您阅读此问题，使用整理器类解决了我的问题。

# asp.net - 杀死我的 excel 对象

> ID：13624081
> 
> 赞同：0
> 
> 时间：2012-11-29T10:49:57.837
> 
> 标签：asp.net, excel

我正在杀死我的代码（VB.Net）生成的excel表。代码：将 processId 调暗为 IntPtr Process.GetProcessById(processId.ToInt32())

它可以在我的本地机器上运行，但是当我在服务器端调试时，它会将 processId 返回为 0。

# imagemagick - 使用透明度和 CMYK 将 PNG 转换为 TIFF

> ID：13624083
> 
> 赞同：2
> 
> 时间：2012-11-29T10:50:05.867
> 
> 标签：imagemagick, tiff, imagemagick-convert

我正在努力使用批处理文件将`PNG`s 转换为s。`TIFF`但是，生成的文件缺乏透明度。

```
S:\*.*\mogrify -path H:\*.*\blau -format tiff  H:\*.*\Raw\*.png
pause
S:\*.*\mogrify -fuzz 20%% -fill blue -opaque black H:\*.*\blau\*.tiff
S:\*.*\mogrify -colorspace cmyk H:\*.*\blau\*.tiff
S:\*.*\mogrify -fuzz 60%% -transparent white H:\*.*\blau\*.tiff 
```

s 之后有一个白色背景，`TIFF`我已经使用`PhotoShop`. 这里有什么问题？如何使生成的文件不失去透明度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T14:38:34.353

尽管 TIFF 格式在技术上确实支持透明度，但总的来说它是一个暗物质。甚至某些 Adob​​e 应用程序也不能正确支持这一点，如果有的话。也许，您的应用程序也没有；或者它可能在理论上有支持，但是在格式到格式的转换时会弄乱一些东西。

# c++ - C ++中的循环负数生成

> ID：13624085
> 
> 赞同：0
> 
> 时间：2012-11-29T10:50:07.463
> 
> 标签：c++

我有如下要求。

我必须生成从 -1 到 -100 的增量负数，该负数用作请求的唯一 ID。喜欢它应该是这样的：-1、-2、-3、...-100、-1、-2，等等。我怎样才能有效地做到这一点？我不应该使用Boost。C++ STL 很好。我更喜欢编写像 int GetNextID() 这样的简单函数，它应该生成 ID。请求示例程序如何有效地做到这一点？

感谢您的时间和帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T10:51:41.987

```
int ID = -1;
auto getnext = [=] mutable {
    if (ID == -100) ID = -1;
    return ID--;
}; 
```

这里相当基本的东西，真的。如果你不得不请 Internet 上的某个人为你编写这个程序，你真的应该考虑在 C++ 中找到一些教育材料。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T11:27:00.863

我喜欢函子解决方案：

```
template <int limit> class NegativeNumber
{
public:
    NegativeNumber() : current(0) {};

    int operator()()
    {
        return -(1 + (current++ % limit));
    };
private:
    int current;
}; 
```

然后，您可以定义任何具有任何限制的生成器并使用它：

```
NegativeNumber<5> five;
NegativeNumber<2> two;

for (int x = 0; x < 20; ++x)
    std::cout << "limit five: " << five() << "\tlimit two: " << two() << '\n'; 
```

您还可以将生成器作为参数传递给另一个函数，每个函子都有自己的状态：

```
void f5(NegativeNumber<5> &n)
{
    std::cout << "limit five: " << n() << '\n';
}

void f2(NegativeNumber<2> &n)
{
    std::cout << "limit two: " << n() << '\n';
}

f5(five);
f2(two); 
```

如果您不喜欢模板解决方案来声明限制，还有无模板版本：

```
class NegativeNumberNoTemplate
{
public:
    NegativeNumberNoTemplate(int limit) : m_limit(limit), current(0) {};

    int operator()()
    {
        return -(1 + (current++ % m_limit));
    };
private:
    const int m_limit;
    int current;
}; 
```

使用作为函数的参数以相同的方式工作，并且它的内部状态也被转移：

```
void f(NegativeNumberNoTemplate &n)
{
    std::cout << "no template: " << n() << '\n';
}

NegativeNumberNoTemplate notemplate(3);
f(notemplate); 
```

我希望您不想将它与线程一起使用，它们不是线程安全的；）

[这里](http://ideone.com/fYHQg5)有所有的例子；希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T11:04:18.523

即使是这样一个简单的问题，也可能会导致您在算法解决方案和编程语言的具体使用中得出几个近似值。

这是我使用 C++03 的第一个解决方案。我更喜欢在计算值后切换符号。

```
#include <iostream>

int GetNextID() {
    // This variable is private to this function. Be careful of not calling it
    // from multiple threads!
    static int current_value = 0;

    const int MAX_CYCLE_VALUE = 100;

    return - (current_value++ % MAX_CYCLE_VALUE) - 1;
}

int main()
{
    const int TOTAL_GETS = 500;

    for (int i = 0; i < TOTAL_GETS; ++i)
        std::cout << GetNextID() << std::endl;
} 
```

一种不同的解决方案，考虑到**C++ 中的整数模采用被除数**(!) 的符号，如[Wikipedia中所述](http://en.wikipedia.org/wiki/Modulo_operation#Common_pitfalls)

```
#include <iostream>

int GetNextID() {
    // This variable is private to this function. Be careful of not calling it
    // from multiple threads!
    static int current_value = 0;

    const int MAX_CYCLE_VALUE = 10;

    return (current_value-- % MAX_CYCLE_VALUE) - 1;
}

int main()
{
    const int TOTAL_GETS = 50;

    for (int i = 0; i < TOTAL_GETS; ++i)
        std::cout << GetNextID() << std::endl;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T11:12:21.610

像......（尚未编译）

```
class myClass
{
     int number = 0;
     int GetValue ()
     {
         return - (number = ((number+1) % 101))
     }
} 
```

# sql - 检查表行中的数据是 < 或 >

> ID：13624091
> 
> 赞同：0
> 
> 时间：2012-11-29T10:50:28.753
> 
> 标签：sql, sql-server

我有这样的数据，

```
KOD    Voucher
1        10
2         2
3        11
4         5
5        23
6         1
7        23 
```

我只想要结果是这样的

```
< 10 = 3
> 10 = 4 
```

如何在sql中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T10:52:16.353

尝试这个：

```
SELECT
  SUM(CASE WHEN voucher < 10 THEN 1 ELSE 0 END) AS "< 10",
  SUM(CASE WHEN voucher > 10 THEN 1 ELSE 0 END) AS "> 10"
FROM table; 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!3/3b79a/1)

但这只会为您提供 3 个`> 10`：

```
< 10  > 10
3       3 
```

您必须使用谓词`>=`来获取`> 10`自 10 not `> 10`nor以来的 4 个值`< 10`。

## [更新的 SQL Fiddle 演示](http://www.sqlfiddle.com/#!3/3b79a/2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T10:53:11.260

```
SELECT COUNT(1) AS "< 10"
FROM myTable
WHERE Voucher < 10 

SELECT COUNT(1) AS ">= 10"
FROM myTable
WHERE Voucher >= 10 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T10:53:31.413

以行形式

```
 select case when voucher<10 then '< 10' else '>= 10' end breakdown,
         count(1) total
    from tbl
group by case when voucher<10 then '< 10' else '>= 10' end; 
```

结果：

```
 breakdown | total
 < 10      | 3
 >= 10     | 4 
```

以列形式

```
 select count(case when voucher<10 then 1 end) [< 10],
         count(case when voucher>=10 then 1 end) [>= 10]
    from tbl; 
```

结果：

```
 < 10  | >= 10
 3     | 4 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T11:46:07.640

```
select '< 10 = '+cast(count(KOD) as Varchar(100)) from t where Voucher<10
union
select '> 10 = '+cast(count(KOD) as Varchar(100)) from t where Voucher>=10 
```

[SQLFiddle 示例](http://sqlfiddle.com/#!6/9df39/8)

# matlab - 从时间序列中找到特定数据的范围

> ID：13624095
> 
> 赞同：1
> 
> 时间：2012-11-29T10:50:33.293
> 
> 标签：matlab, range

我有一个时间序列：

```
d = [transpose(floor(1+1/24:1/24:366)),1+(30-1).*rand(8760,1)]; 
```

其中第一列是指一年中的某一天，第二列是指数据。数据以小时为单位，但在此处以表示测量日期为底数。

我想将数据拆分为不同的单元格，其中每个单元格显示数据开始时间不同的不同日期的数据。例如，如果我从示例中选择某一特定日期：

```
dat = d(d(:,1)==2,:); 
```

我想根据以下语句将其拆分为不同的单元格：

```
Res = 1:11;
starti = arrayfun(@(x)dat(x:end,:),Res,'un',0); 
```

这给了我相同的系列，但起点不同。然后我通过以下方式找到值的范围：

```
rng = cellfun(@(x)range(x(:,2)),starti,'un',0); 
```

除了整个系列，我将如何执行相同的方法，即

```
dat = d; 
```

感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T11:08:48.550

为什么不直接使用 for 循环？

```
R = d(1,1):d(end,1);
rng = cell(numel(R),1);
for ii = R

    dat = d(d(:,1)==ii,:)    

    Res = 1:11;
    starti = arrayfun(@(x)dat(x:end,:),Res,'un',0)

    if ~any(cellfun('isempty', starti))            
        rng{ii} = cellfun(@(x)range(x(:,2)),starti); end        
end 
```

# linux - 更改目录并在一个命令中执行文件

> ID：13624097
> 
> 赞同：31
> 
> 时间：2012-11-29T10:50:39.543
> 
> 标签：linux, bash, fedora, launcher, gnome-3

当我想执行一个文件时，似乎我总是必须先“cd”到该文件的目录中，然后再执行它，除非它因 can't-find-my-dataz 类型错误而失败。

我怎样才能绕过键入两个命令来执行程序？

例子：

```
cd /usr/local/bin/minecraft/
java -Xms512M -Xmx2048M -jar minecraft.jar 
```

我怎样才能把它变成一行，以便在 Gnome3 中创建自定义启动器时将它作为我的 Exec= *_行？*

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-11-29T10:54:15.553

`cd /usr/local/bin/minecraft/ && java -Xms512M -Xmx2048M -jar minecraft.jar`应该这样做

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2020-11-11T14:57:15.917

我再次用一些扩展来回答这个问题，以便其他人可能会觉得这很有用。

```
cd /usr/local/bin/minecraft/ && java -Xms512M -Xmx2048M -jar minecraft.jar 
```

这个命令肯定会做。但是运行此命令后，您将留在`/usr/local/bin/minecraft/`目录中。而且，如果您在**bash 脚本**中使用此命令，则后面的所有命令都将在此目录中执行。

如果您想在所需目录中运行命令并立即返回到您所在的位置，请用**括号**将命令括起来，即

```
(cd /usr/local/bin/minecraft/ && java -Xms512M -Xmx2048M -jar minecraft.jar) 
```

# javascript - toDataURL 返回错误“未捕获的类型错误：无法读取未定义的属性 '0'”

> ID：13624099
> 
> 赞同：1
> 
> 时间：2012-11-29T10:50:46.227
> 
> 标签：javascript

我是 javascript 新手，遇到错误。我确定我跳过了一些基本概念......对不起。

这就是问题所在。

我在我的 html 上使用了这段代码：

```
<div>
<script type='text/javascript'>
var myCanvas = document.getElementsByTagName("canvas");
document.write('<img src="'+myCanvas[0].toDataURL("image/png")+'"/>');

</script></div> 
```

我的文档上只有一张画布。我在 chrome 中看到的错误是：

```
Uncaught TypeError: Cannot read property '0' of undefined sankey.html:128 (anonymous function) 
```

如果我输入

```
document.write('<img src="'+myCanvas[0].toDataURL("image/png")+'"/>'); 
```

（完全相同的行）在java script chrome控制台中，它可以工作！这怎么可能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T10:53:18.243

你忘记了`[0]`：

```
var myCanvas = document.getElementsByTagName("canvas")[0]; 
```

`getElementsByTagName`返回一个元素数组，您必须从中选择一个。（即使数组只包含 1 个元素）

一种“更清洁”的方法是`id="myCanvas"`在画布上设置一个 id ( ) 并使用`getElementById`，但由于您只使用 1 个画布，`getElementsByTagName`因此可以使用。

它返回的原因`undefined`可能是您的代码是在加载画布之前执行的。
将您的代码包装在一个函数中，然后将该函数注册到“加载”事件

```
<script type='text/javascript'>
    var myCanvas;

    function initCanvas(){
        myCanvas = document.getElementsByTagName("canvas");
        document.write('<img src="'+myCanvas[0].toDataURL("image/png")+'"/>');
    }

    window.addEventListener('load', initCanvas, false);
</script> 
```

# sql - 选择语句将期末余额结转到以下

> ID：13624103
> 
> 赞同：0
> 
> 时间：2012-11-29T10:50:53.870
> 
> 标签：sql, crystal-reports

我正在尝试选择上个月的期末余额并将其用作下个月的期初余额，但我似乎没有得到正确的结果。

我已使用此代码选择其他列并获得余额：

```
SELECT Year1,StockNumber,InventoryName,Month1, 
       SUM(ABS(RECEIVE_FROM_PO)) AS RPO,SUM(ABS(RECEIVE_XFER))AS XEFR, 
       SUM(ABS(RECEIVE_ADJ)) as RDJ,SUM(ABS(RETURN1)) AS RET, 
       SUM(ABS(TRANSFER)) as TSFR,SUM(ABS(ISSUE)) as ISS, SUM(ABS(PT_ISSUE))as PISS, 
       SUM(ABS(ADJUSTMENT)) as ADJ,  
       (Sum(ABS(RECEIVE_FROM_PO + RECEIVE_XFER + RECEIVE_ADJ + RETURN1)) - Sum(ABS(TRANSFER+ISSUE+PT_ISSUE+ADJUSTMENT))) as Balance 
FROM dbo.Sheet2$
where Year1 ='' and InventoryName ='' and StockNumber =''
GROUP BY Year1,InventoryName,StockNumber,Month1,balance 
```

使用此代码，我可以获得余额，现在我想将该余额用作下个月的期初余额。SQL 脚本是如何实现的，是否可以使用 Crystal Reports 完成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T11:31:21.967

水晶报表有做sum、min、max等分组功能的能力。它具有所有丰富的功能。如果创建查询失败，在水晶报表中取表Sheet2$，然后创建汇总字段对于查询中的每个总和。

# .htaccess - 如何使用 htaccess 将 joomla 分页重写为友好的 url

> ID：13624106
> 
> 赞同：1
> 
> 时间：2012-11-29T10:50:55.213
> 
> 标签：.htaccess, url, mod-rewrite, joomla, pagination

我想将分页 URL 重写`http://mydomain.com/category?start=15`为`http://mydomain.com/category/start/15`，但我不知道如何使用 .htaccess 来实现。

PS：那些 URls ( `http://mydomain.com/category?start=15`) 在搜索引擎中被引用，所以我需要将 301 重定向添加到我的新 URL。我想提一下我已经在 J​​ommla 配置中启用了 SEF 模式

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T14:20:52.937

首先，如果您希望您的 URL 看起来像`/start/15`您必须将它们从漂亮格式重写为内部格式，而不是其他格式。

我目前无法访问 Apache，但您的表达式应该与此类似：

```
RewriteRule ^category/start/([0-9]+)$ http://mydomain.com/category?start=$1 [QSA,L] 
```

然后，有必要告诉 Joomla 如何生成漂亮的 URL，这在没有 htaccess 文件的情况下发生，例如在 SEO 插件中。

最后，要输出 301 消息，您需要`Redirect`在 .htaccess 文件中添加“”命令。将传入`?start=15`的 URL 重定向到漂亮的格式。确保在您的重写后不会发生这种情况......

# php - 将图像文件上传到 PHP 时，$_FILES 总是为空？

> ID：13624109
> 
> 赞同：1
> 
> 时间：2012-11-29T10:50:59.990
> 
> 标签：php, html

这是HTML中的表格

```
<form method="post" action="reg.php" enctype="multipart/form-data">
    <table width="100%" class="table4" cellpadding="0" cellspacing="0">
        <tr>
            <td align="right">Picture：&lt;/td>
            <td><input type="file" id="pic1" name="pic1" /></td>
        </tr>
   </table>   

   <input type="submit"  id="btnsubmit" name="btnsubmit" value="send" /></td>
</form> 
```

在 reg.php

```
 print "<pre>";
    print_r($_FILES);
    print "</pre>"; 
    $pic1 = $_FILES['pic1']['name'];
    $pic1_type = $_FILES['pic1']['type'];
    $pic1_size = $_FILES['pic1']['size']; 
```

但是 _FILES 数组总是空的：

```
Array
(
)

Notice: Undefined index: pic1 in reg.php on line 31 
```

请帮忙！

我的文件是一个 20kb png 文件，来自 phpinfo()：

```
file_uploads    On  On

max_file_uploads    20  20

post_max_size   10M 10M

upload_max_filesize 10M 10M 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T10:57:56.747

我能想到的唯一没有找到密钥的情况是：

*   您出于某种奇怪的原因取消设置密钥。
*   `file_uploads`被禁用。

上传的图像很可能超过了服务器配置中定义的最大尺寸。您可以调用[phpinfo()](http://php.net/phpinfo)来检查您当前的限制。

如果要更改它们，只需根据需要修改 php.ini 上的以下属性：

```
; Maximum file size of post data that PHP will accept.
post_max_size = 20M

; Maximum allowed file size for uploaded files.
upload_max_filesize = 20M 
```

或者[在 .htaccess 中使用 php_value](http://php.net/configuration.changes.modes)：

```
php_value upload_max_filesize 100M
php_value post_max_size 100M 
```

# regex - 忽略符号，除了它的第一个存在作为第一个？

> ID：13624110
> 
> 赞同：2
> 
> 时间：2012-11-29T10:51:07.350
> 
> 标签：regex

我怎么能做这样的事情：

输入：

> +93120nvsenr++ +++:LKK213ll

输出：

> 选择所有非数字和所有“+”，除了“+”是第一个并开始字符串

例子：

> +312313__3fffa```+++31+3

之后的最终结果`String.replaceAll(regex, "")`应该是`+3123133313`

到目前为止，我的正则表达式是：

```
[^\\d^+] 
```

即：忽略所有非数字和所有“+”符号并给我：

> +3123133+++31+3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T10:56:36.577

你可以使用这个正则表达式

```
(?!^\+)\D+
    ^
    |
    |->this would replace a non digit character only if it doesn't have a +( which is at the beginning of the string) that preceed's it 
```

[在这里试试](http://regexhero.net/tester/)

# python - PostgreSQL 上的 Django QuerySets 包含重复的对象

> ID：13624119
> 
> 赞同：0
> 
> 时间：2012-11-29T10:51:52.330
> 
> 标签：python, django, postgresql

这是在 OSX 上运行的 Django 1.4.2，带有 PostgreSQL 数据库。

这是我的模型：

```
class RideRequest(models.Model):
    user = models.ManyToManyField(User, related_name="ride_requests", symmetrical=False)
    status = models.IntegerField(choices=STATUS_CHOICES) 
```

在我对这个模型的所有过滤器调用中，我得到所有对象两次。

```
[10]: queryset = RideRequest.objects.filter(id=8)
[11]: for q in queryset: print q.id
8
8 
```

我刚刚查看了数据库，每个条目只出现一次。任何想法为什么会发生这种情况？由于某些数据库限制，我不能轻易切换到 SQLite。

编辑：这是原始的 SQL 查询输出`RideRequest.objects.filter(id=8).query`。它也返回两行而不是预期的行。可能是因为正在进行的过度 JOINing 吗？

```
SELECT "rides_riderequest"."id", "rides_riderequest"."ride_id", 
…
FROM "rides_riderequest" 
LEFT OUTER JOIN "rides_riderequest_ride_request_stations" 
ON ("rides_riderequest"."id" = "rides_riderequest_ride_request_stations"."riderequest_id")
LEFT OUTER JOIN "rides_riderequeststation" 
ON ("rides_riderequest_ride_request_stations"."riderequeststation_id" = 
"rides_riderequeststation"."id") WHERE "rides_riderequest"."id" = 8  
ORDER BY "rides_riderequeststation"."departure_time_min" DESC; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T14:21:27.860

我怀疑在模型 Meta 部分中，您设置了按“外部”字段（相关模型`'station__departure_time'`）排序的模型。当您编写查询时，django 会连接到此“外部”字段以进行排序。

在这种情况下，您应该使用`distinct()`方法或使用清除排序`.order_by()`

# php - 如何将 DWG 文件转换为 XML 文件

> ID：13624126
> 
> 赞同：0
> 
> 时间：2012-11-29T10:52:01.320
> 
> 标签：php, android, xml

我想从自动 cad 文件中提取 X 和 Y 坐标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T10:59:07.457

看看这个链接

```
http://usa.autodesk.com/adsk/servlet/ps/item?siteID=123112&id=2878966&linkID=2475323 
```

ID：TS55797 - 从 Microsoft Excel 电子表格中导入坐标，并在点之间画线

```
http://www.zonums.com/cad2excel.html 
```

# java - Java Mac appbundle 资源路径

> ID：13624129
> 
> 赞同：4
> 
> 时间：2012-11-29T10:52:09.380
> 
> 标签：java, macos, ant, java-7

使用来自 oracle 的 appbundler ant 任务（[http://docs.oracle.com/javase/7/docs/technotes/guides/jweb/packagingAppsForMac.html](http://docs.oracle.com/javase/7/docs/technotes/guides/jweb/packagingAppsForMac.html)）我能够创建一个带有捆绑 JRE7 的工作 Mac 应用程序，但加载一些本机库等资源失败，因为 Info.plist 接缝中的路径无效。

例如，在我使用的 build.xml ant 任务中（我的本机库被复制到 app-bundle 内的 Contents/Java 文件夹）：

```
a) <option value="-Djava.library.path=Contents/Java/" />
b) <option value="-Djava.library.path=$JAVAROOT/" />
c) <option value="-Djava.library.path=$APP_PACKAGE/Contents/Java/" /> 
```

所有结果都会导致 UnsatisfiedLinkError。还没有找到像 splash-image 等其他一些资源：

```
<option value="-splash:Contents/Java/my-splash.png" /> 
```

知道如何在这里正确设置 JVMOptions 的路径吗？

编辑：Java7 appbundler 对 plist 使用的语法与来自 Apple 的 Jdk6 附带的 Jar Bundler 的语法不同，例如没有“Java”字典来添加 SplashFile。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-29T11:12:47.657

根据[appbundle 任务文档](http://java.net/downloads/appbundler/appbundler.html)，您正在寻找的魔法变量是`$APP_ROOT`：

```
<option value="-Djava.library.path=$APP_ROOT/Contents/Java/" /> 
```

这也适用于`<argument value="..."/>`（主类的参数，而不是 JVM 的选项）。

# delphi - delphi表单读取错误

> ID：13624134
> 
> 赞同：3
> 
> 时间：2012-11-29T10:52:35.190
> 
> 标签：delphi, devexpress, anydac

昨天我在做一个项目，一切正常，但是今天当我打开 Delphi XE 时，我打开了组项目文件，然后打开了必要的表单，我收到了这个错误：

![在此处输入图像描述](../Images/721c812702d969457c0c79dfd1b94345.png)

如果我按忽略我的整个项目会变坏，因为有些表格需要它，如果我按取消，我会得到：

![在此处输入图像描述](../Images/d7db200321e0e775ddc1e21ff9305d82.png)

但随后表单打开，当我尝试编译项目时，它给了我这个：

![在此处输入图像描述](../Images/56f6c03c1183722e6417366bdc35e8ff.png)

最有趣的是组件文件不在

```
C:/erpo/121129/frxadcomponents 
```

这是组项目所在的目录，我在 Delphi 中指定了正确的库和浏览路径，我可以在

```
C:\Users\Public\Documents\RAD Studio\8.0\Bpl\ directory 
```

如果我在不打开表单的情况下打开组项目，我可以编译它就好了，有什么想法吗？

```
IDE: Rad Studio XE
Components:
DevExpress
Fast Report 4.0
AnyDac
AnyDac Addon for FastReport **frxADComponents** 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T08:20:01.197

好吧，这对我有帮助：

1.  打开 DCLfrxAD15.dproj
2.  卸载它
3.  建造它
4.  安装它
5.  关闭并保存
6.  打开你的项目
7.  工作

每次重新加载 Delphi 时都必须这样做的最大减号。

# html - 如何使 HTML 中的段落不换行？

> ID：13624135
> 
> 赞同：0
> 
> 时间：2012-11-29T10:52:42.100
> 
> 标签：html, css

我有以下html：

```
<span class="icon-top-margin-4 margin-right sprite-book-open"></span>
<p>Topic: No Topic Title</p> 
```

和 CSS：

```
.icon-top-margin-4 {
    background-color: red;
    content: " ";
    background-image: url(/Images/fugue/sprite.png);
    background-repeat: no-repeat;
    display: inline-block;
    height: 16px; 
    vertical-align:bottom;
    width: 16px;
    line-height: 16px;
}

.sprite-book-open{ background-position: 0 -288px;  } 
```

我想要的是段落在图标之后开始，但它从新行开始。有没有办法让它与图标在同一行开始？我确实尝试在段落上向左浮动，但这使它在图标之前。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T10:54:48.747

p 是块元素，所以它进入新行，你应该把它设为`inline`.

添加 `.icon-top-margin-4 + p{display:inline;}`

' **+** ' 选择器选择提到的类的紧邻的下一个元素。

**[现场演示](http://jsfiddle.net/UJATF/7/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T10:56:43.090

您还可以简单地`span`将`p`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T10:57:36.993

您可以将段落样式设置为`display: inline`

# c# - 反序列化LinkedIn个人资料Json？

> ID：13624140
> 
> 赞同：0
> 
> 时间：2012-11-29T10:52:53.813
> 
> 标签：c#, json.net, deserialization, linkedin

我正在尝试反序列化从 LinkedIn Javascript API 获得的 Json 对象：

```
{"_key":"~","educations":{"_total":2,"values":[{"degree":"Bachelor of Science (BSc)","endDate":{"year":2004},
"fieldOfStudy":"Computer Software Engineering","id":134450447,"schoolName":"Bristol University","
startDate":{"year":2009}},{"id":143651018,"schoolName":"University of Kingston"}]},"emailAddress":
"test@test.com","firstName":"Robert","lastName":"Matthews"} 
```

我编写了一个自定义类来存储这些值并使用 Json.NET 反序列化它们：

```
[Serializable]
  public class LinkedInUserData {

    [JsonProperty(PropertyName = "emailAddress")]
    public string EmailAddress { get; set; }

    // other properties cut out for simplicity

    [JsonProperty(PropertyName = "educations")]
    public Educations Educations { get; set; }
  }

  [Serializable]
  public class Educations {

   [JsonProperty(PropertyName = "_total")]
   public string Total { get; set; }

   [JsonProperty(PropertyName = "values")]
   public Values Values { get; set; }
  }

  [Serializable]
  public class Values { // cut down for simplicity

    [JsonProperty(PropertyName = "degree")]
    public string Degree { get; set; }

  }

 LinkedInUserData linkedData = JsonConvert.DeserializeObject<LinkedInUserData>(profile); 
```

我能够毫无问题地转换单个对象（无数组等），但我卡在 Educations 中的 Values 对象上，并显示以下错误消息：

> 无法将当前 JSON 数组（例如 [1,2,3]）反序列化为类型“Data.Values”，因为该类型需要 JSON 对象（例如 {"name":"value"}）才能正确反序列化。要修复此错误，请将 JSON 更改为 JSON 对象（例如 {"name":"value"}）或将反序列化类型更改为数组或实现集合接口的类型（例如 ICollection、IList），例如可以从 JSON 数组反序列化。JsonArrayAttribute 也可以添加到类型中以强制它从 JSON 数组反序列化。路径“educations.values”，第 1 行，位置 47。

我尝试将 Educations 中的 Values 对象更改为字符串数组，但没有成功。有什么方法可以成功地将 Json 中的值反序列化到我的自定义类中，还是只能按照字符串数组的方式获得一些东西？

**编辑**- 列表（值）产品出现以下错误：

> 读取字符串时出错。意外标记：StartObject。路径 'educations.values[0].endDate'，第 1 行，位置 96。

**编辑 2** - 好的，我现在明白了，（值的）列表确实有效，然后它在 StartDate 和 EndDate 上跳闸，因为它们本身就是对象，我将它们都设置为`strings`. 我一直在努力理解`Json`字符串，但`Link2CSharp`帮助我解决了它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T11:00:13.793

我相信你需要根据 json 重构你的类。您可以尝试使用**[json2csharp](http://json2csharp.com/)** *针对 Json 生成 C# 类（如果您想针对 json 自动创建 C# 类，这是一个非常好的资源）*。以下是它给出的结构。您可以将它与 JSON.Net 一起使用来获取对象。

```
public class EndDate
{
    public int year { get; set; }
}

public class StartDate
{
    public int year { get; set; }
}

public class Value
{
    public string degree { get; set; }
    public EndDate endDate { get; set; }
    public string fieldOfStudy { get; set; }
    public int id { get; set; }
    public string schoolName { get; set; }
    public StartDate __invalid_name__
startDate { get; set; }
}

public class Educations
{
    public int _total { get; set; }
    public List<Value> values { get; set; }
}

public class RootObject
{
    public string _key { get; set; }
    public Educations educations { get; set; }
    public string emailAddress { get; set; }
    public string firstName { get; set; }
    public string lastName { get; set; }
} 
```

# c# - 无法将wcf服务添加到delphi

> ID：13624141
> 
> 赞同：1
> 
> 时间：2012-11-29T10:52:53.487
> 
> 标签：c#, wcf, delphi, soap, delphi-7

> **可能重复：**
> [Delphi SOAP Envelope 和 WCF](https://stackoverflow.com/questions/2473051/delphi-soap-envelope-and-wcf)

我在 C# 上制作了一个自托管的 WCF 应用程序。绑定方法是`BasicHttpBinding (SOAP)`。然后我制作了使用该服务的客户端 C# 应用程序，我使用 Visual Studio 添加了服务引用，完全没有错误。到这里一切都很好。当我尝试连接 Delphi 7 客户端时出现问题。以下是我执行的步骤：

> 1.  创建了一个新的应用程序
> 2.  在表单上删除了 HTTPRIO 组件
> 3.  使用 WSDL Importer Wizard 导入服务
> 4.  第 3 步创建了一个文件，我将其命名为 FRS.pas 并保存。
> 5.  将 FRS 添加到主要应用程序“用途”
> 6.  运行应用程序并收到错误消息“[Error] FRS.pas(52): Undeclared identifier: 'GetOptions'”和“[Fatal Error] Unit1.pas(7): Could not compile used unit 'FRS.pas'”

这是生成的代码

```
// ************************************************************************ //
// The types declared in this file were generated from data read from the
// WSDL File described below:
// WSDL     : http://localhost:933/FRS?wsdl
// Encoding : utf-8
// Version  : 1.0
// (29.11.2012 13:16:07 - 1.33.2.5)
// ************************************************************************ //

unit FRS;

interface

uses InvokeRegistry, SOAPHTTPClient, Types, XSBuiltIns;

type

  // ************************************************************************ //
  // The following types, referred to in the WSDL document are not being represented
  // in this file. They are either aliases[@] of other types represented or were                 referred
  // to but never[!] declared in the document. The types from the latter category
  // typically map to predefined/known XML or Borland types; however, they could also 
  // indicate incorrect WSDL documents that failed to declare or import a schema type.
  // ************************************************************************ //
  // !:GetOptions      - "http://tempuri.org/"
  // !:GetOptionsResponse - "http://tempuri.org/"
  // !:SetOptions      - "http://tempuri.org/"
  // !:SetOptionsResponse - "http://tempuri.org/"
  // !:Beep            - "http://tempuri.org/"
  // !:BeepResponse    - "http://tempuri.org/"
  // !:GetStatus       - "http://tempuri.org/"
  // !:GetStatusResponse - "http://tempuri.org/"
  // !:RegisterReceipt - "http://tempuri.org/"
  // !:RegisterReceiptResponse - "http://tempuri.org/"
  // !:RegisterBill    - "http://tempuri.org/"
  // !:RegisterBillResponse - "http://tempuri.org/"
  // !:PrintReport     - "http://tempuri.org/"
  // !:PrintReportResponse - "http://tempuri.org/"

  // ************************************************************************ //
  // Namespace : http://tempuri.org/
  // soapAction: http://tempuri.org/IFRS/%operationName%
  // transport : http://schemas.xmlsoap.org/soap/http
  // binding   : BasicHttpBinding_IFRS
  // service   : FRS
  // port      : BasicHttpBinding_IFRS
  // URL       : http://localhost:933/FRS/soap
  // ************************************************************************ //
  IFRS = interface(IInvokable)
  ['{75F3494A-C58E-25D0-475B-CD49AEDABE03}']
    function  GetOptions(const parameters: GetOptions): GetOptionsResponse; stdcall;
    function  SetOptions(const parameters: SetOptions): SetOptionsResponse; stdcall;
    function  Beep(const parameters: Beep): BeepResponse; stdcall;
    function  GetStatus(const parameters: GetStatus): GetStatusResponse; stdcall;
    function  RegisterReceipt(const parameters: RegisterReceipt):     RegisterReceiptResponse; stdcall;
    function  RegisterBill(const parameters: RegisterBill): RegisterBillResponse; stdcall;
    function  PrintReport(const parameters: PrintReport): PrintReportResponse; stdcall;
  end;

function GetIFRS(UseWSDL: Boolean=System.False; Addr: string=''; HTTPRIO: THTTPRIO =     nil): IFRS;

implementation

function GetIFRS(UseWSDL: Boolean; Addr: string; HTTPRIO: THTTPRIO): IFRS;
const
  defWSDL = 'http://localhost:933/FRS?wsdl';
  defURL  = 'http://localhost:933/FRS/soap';
  defSvc  = 'FRS';
  defPrt  = 'BasicHttpBinding_IFRS';
var
  RIO: THTTPRIO;
begin
  Result := nil;
  if (Addr = '') then
  begin
    if UseWSDL then
      Addr := defWSDL
    else
      Addr := defURL;
  end;
  if HTTPRIO = nil then
    RIO := THTTPRIO.Create(nil)
  else
    RIO := HTTPRIO;
  try
    Result := (RIO as IFRS);
    if UseWSDL then
    begin
      RIO.WSDLLocation := Addr;
      RIO.Service := defSvc;
      RIO.Port := defPrt;
    end else
      RIO.URL := Addr;
  finally
    if (Result = nil) and (HTTPRIO = nil) then
      RIO.Free;
  end;
end;

initialization
  InvRegistry.RegisterInterface(TypeInfo(IFRS), 'http://tempuri.org/', 'utf-8');
  InvRegistry.RegisterDefaultSOAPAction(TypeInfo(IFRS),     'http://tempuri.org/IFRS/%operationName%');
  InvRegistry.RegisterInvokeOptions(TypeInfo(IFRS), ioLiteral);

end. 
```

这是c#服务接口

```
[ServiceContract]
public interface IFRS
{
    [OperationContract]
    string GetOptions();

    [OperationContract]
    void SetOptions(string xml);

    [OperationContract]
    void Beep();

    [OperationContract]
    string GetStatus();

    [OperationContract]
    void RegisterReceipt(string xml);

    [OperationContract]
    void RegisterBill(string xml);

    [OperationContract]
    void PrintReport(string xml);
} 
```

据我所知，存在一些兼容性问题，因为 c# 客户端工作正常。我不擅长德尔福，但我必须提供一个工作样本。如果有人遇到过这种问题，请帮忙。

# sugarcrm - Sugarcrm 中子模块的下拉列表

> ID：13624146
> 
> 赞同：1
> 
> 时间：2012-11-29T10:53:07.437
> 
> 标签：sugarcrm

让我们用图表来讨论。只需查看下图并了解我所期待的问题。

![截屏](../Images/07692e98d15d573006775c2f5ff43ab3.png)

我们有模块列表，其中包括销售、营销、支持、活动、协作和所有这个模块然后我们有子模块列表尊重模块列表，比如在销售中我们有主页、客户、联系人、机会和潜在客户。现在考虑上面的图像，其中我选择了销售作为模块和帐户作为子模块。然后我们可以在下面看到最近查看：无和操作：创建帐户查看帐户导入帐户。因此，我们可以在鼠标悬停效果上放置下拉列表，而不是最近的视图和操作，这意味着当光标在帐户上时，我们可以看到创建帐户查看帐户导入帐户的下拉列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T02:15:55.173

已经有其他主题可以执行此操作，例如...

[http://www.sugarforge.org/projects/bluetheme/](http://www.sugarforge.org/projects/bluetheme/)

或者，您可以升级到 Pro，那里的默认主题也可以这样做。

# c# - log4net Adonet Appender 连接问题

> ID：13624150
> 
> 赞同：7
> 
> 时间：2012-11-29T10:53:12.680
> 
> 标签：c#, windows-services, log4net

我开发了一个 Windows 服务，我在其中使用计时器控件来执行一些计划任务。计时器超时事件每 5 分钟发生一次，其中使用 log4net appender 将日志条目添加到 Oracle 数据库。

一切正常，直到数据库服务器关闭所有连接以进行夜间冷备份。从那时起，DB 中的所有日志都将丢失，除非重新启动服务，否则即使备份过程花费不到 30 分钟，也不会记录任何内容。

从其他帖子中，我发现 log4net 仅使用一个连接，如果丢失，则所有后续日志都将被丢弃。为了解决这个问题，我开始使用在其配置中设置为 true 的 ReconnectOnError 属性。但不幸的是，问题仍然存在。备份后日志仍然丢失。我启用了跟踪并发现了以下错误，但我不知道如何解决此问题。

> log4net：错误 [CustomAdoNetAppender] 写入数据库时​​出现异常 Oracle.DataAccess.Client.OracleException ORA-03113：Oracle.DataAccess.Client.OracleException.HandleErrorHelper 通信通道上的文件结尾（Int32 errCode，OracleConnection conn，IntPtr opsErrCtx， OpoSqlValCtx* pOpoSqlValCtx, Object src, String procedure) at Oracle.DataAccess.Client.OracleException.HandleError(Int32 errCode, OracleConnection conn, String procedure, IntPtr opsErrCtx, OpoSqlValCtx* pOpoSqlValCtx, Object src) at Oracle.DataAccess.Client.OracleCommand.ExecuteNonQuery () 在 log4net.Appender.AdoNetAppender.SendBuffer(IDbTransaction dbTran, LoggingEvent[] events) 在 log4net.Appender.AdoNetAppender.SendBuffer(LoggingEvent[] events)

和：

> log4net：错误 [CustomAdoNetAppender] 写入数据库时​​出现异常 System.InvalidOperationException：连接已经是 Oracle.DataAccess.Client.OracleConnection.BeginDbTransaction 的 Oracle.DataAccess.Client.OracleConnection.BeginTransaction(IsolationLevelisolationLevel) 的本地或分布式事务的一部分(IsolationLevelisolationLevel) 在 System.Data.Common.DbConnection.System.Data.IDbConnection.BeginTransaction() 在 log4net.Appender.AdoNetAppender.SendBuffer(LoggingEvent[] events)

对此高度赞赏的任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T12:00:02.857

我个人认为这是 log4net AdoNetAppender 中的一个错误。

在 log4net 1.2.11`AdoNetAppender`中犯了保持打开连接而不是使用连接池的主要罪行。

此外，ReconnectOnError 选项看起来已损坏：它仅在当前连接状态不是时才尝试重新连接`ConnectionState.Open`，这似乎是错误的：我不相信在出现错误时连接状态会发生变化（枚举值`ConnectionState.Broken`在 MSDN 中记录为为产品的未来版本保留）。

总而言之，我建议您实现自己的自定义附加程序，以正确执行连接池。这不是一个很大的类，所以很容易复制和修复。

# javascript - JavaScript 日期验证函数

> ID：13624154
> 
> 赞同：4
> 
> 时间：2012-11-29T10:53:19.223
> 
> 标签：javascript

谁能解释一下 foll JS 函数如何验证需要采用 mm/dd/yyyy 格式的日期。

```
<script type="text/javascript">

function checkdate(input){
    var validformat=/^\d{2}\/\d{2}\/\d{4}$/ //Basic check for format validity
    var returnval=false
    if (!validformat.test(input.value))
        alert("Invalid Date Format. Please correct and submit again.")
    else{ //Detailed check for valid date ranges
        var monthfield=input.value.split("/")[0]
        var dayfield=input.value.split("/")[1]
        var yearfield=input.value.split("/")[2]
        var dayobj = new Date(yearfield, monthfield-1, dayfield)
        if ((dayobj.getMonth()+1!=monthfield)||(dayobj.getDate()!=dayfield)||(dayobj.getFullYear()!=yearfield))
            alert("Invalid Day, Month, or Year range detected. Please correct and submit again.")
        else
            returnval=true
    }
    if (returnval==false) input.select()
        return returnval
}
</script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T11:05:02.547

第一部分使用正则表达式检查值是否符合要求的格式`mm/dd/yyyy`。这是为了确保验证失败，如果它不是`/`分别具有 2、2 和 4 个数字的分隔字符串。

第二部分使用单个`dd`,`mm`和`yyyy`值创建一个日期对象，并使用输入中的原始值检查创建的对象的属性。这是为了确保验证失败，例如`02/31/2015`

`if ((dayobj.getMonth()+1!=monthfield)||(dayobj.getDate()!=dayfield)||(dayobj.getFullYear()!=yearfield))`

上面的语句是为了确保创建的对象反映了用于创建它的相同值。另外，请注意月份索引从 开始`0`，因此`-1`在创建`+1`期间和检查期间。

# facebook - 与 Foursquare/Instagram 相关的网络项目

> ID：13624156
> 
> 赞同：0
> 
> 时间：2012-11-29T10:53:20.213
> 
> 标签：facebook, social-networking, foursquare, instagram, complex-networks

我正在寻找在 Foursquare 或 Instagram 上做一个复杂的网络（小世界、中介、签到的可能性等）项目。我的最低要求是 300 个节点。

但是，我不确定可以在这些网络上进行哪些分析，即可以收集哪些数据，如何进行以及可以进行哪些分析（例如可以回答哪些问题）。另外，Like FB 将 API 限制为仅限用户使用，即我只能通过我的用户帐户使用 API，我想知道 Foursquare 或 Instagram 上是否有类似的限制。

请帮帮我，因为我时间紧迫，需要尽快决定我的项目。

PS：我知道这不是一个“编码”问题。但是与网络有关，这是大多数开发人员所在的地方。所以我想我会征求你们的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T17:47:27.443

您可以使用foursquare API 来获取有关用户和场所的信息。您无需任何用户身份验证即可访问场所 API，但要获取用户信息，您需要代表用户进行身份验证。该文档可在此处获得：[https ://developer.foursquare.com/overview/](https://developer.foursquare.com/overview/)

# jquery - 一步一步的jQuery元素fadeIn

> ID：13624158
> 
> 赞同：0
> 
> 时间：2012-11-29T10:53:29.587
> 
> 标签：jquery

我需要在 ajax 请求后使用接收到的数据来淡入元素。它工作正常，但所有元素同时变得可见。是否可以在要显示的每个元素的可见性更改之间实现小的延迟？

```
 $.ajax({        
               type: "POST",
               url: "get_values.php",
               dataType: "json",
               data: { prm_listArray : prm_list},
               success: function(res) { 
                    $.each(res, function(key, value) {
                       var cell = $('table tr:eq(' + value.prm_row + ') td:eq(' + value.prm_column + ')');
                       $(cell).find(".cell_text").html(value.prm_value).fadeIn('slow');
                       })
                 }
            }); 
```

我试图插入延迟（3000）但没有成功：

```
$(cell).find(".cell_text").html(value.prm_value).delay(3000).fadeIn('slow'); 
```

并以相同的行为超时：

```
$(cell).find(".cell_text").html(value.prm_value);
                setTimeout(function() {
                    $(cell).find(".cell_text").fadeIn('slow');
                }, 3000); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T10:59:03.540

`cell`每次都在 for 循环中覆盖变量。所以它应该定义为范围变量。

```
$.each(res, function(key, value) {
  var cell = $('table tr:eq(' + value.prm_row + ') td:eq(' + value.prm_column + ')');
  (function(cell) {
    setTimeout(function() {
        $(cell).find(".cell_text").fadeIn('slow');
    }, 3000);
  })(cell);
}); 
```

添加的测试代码：

```
<!DOCTYPE HTML>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title></title>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script>
$(function() {
    var res = [
        { prm_row: 0, prm_column: 0 },
        { prm_row: 1, prm_column: 1 },
        { prm_row: 2, prm_column: 2 },
    ];
    $.each(res, function(key, value) {
        var cell = $('table tr:eq(' + value.prm_row + ') td:eq(' + value.prm_column + ')');
        (function(cell) {
            setTimeout(function() {
                $(cell).find(".cell_text").fadeIn('slow');
            }, 3000);
        })(cell);
    });
})
</script>
<style type="text/css">
#board .cell_text {
    display: none;
}
</style>
</head>
<body>
<table id="board">
    <tr>
        <td><span class="cell_text">x</span></td>
        <td><span class="cell_text">x</span></td>
        <td><span class="cell_text">x</span></td>
    </tr>
    <tr>
        <td><span class="cell_text">x</span></td>
        <td><span class="cell_text">x</span></td>
        <td><span class="cell_text">x</span></td>
    </tr>
    <tr>
        <td><span class="cell_text">x</span></td>
        <td><span class="cell_text">x</span></td>
        <td><span class="cell_text">x</span></td>
    </tr>
</table>    
</body>
</html> 
```

一步步

```
<!DOCTYPE HTML>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title></title>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script>
$(function() {
    var res = [
        { prm_row: 0, prm_column: 0 },
        { prm_row: 1, prm_column: 1 },
        { prm_row: 2, prm_column: 2 },
    ];

    var f = function() {
        var value = res.shift();
        if (!value) return;
        var cell = $('table tr:eq(' + value.prm_row + ') td:eq(' + value.prm_column + ')');
        $(cell).find(".cell_text").fadeIn('slow');
        setTimeout(function() {
            f(res);
        }, 3000);
    };
    setTimeout(f, 3000);
})
</script>
<style type="text/css">
#board .cell_text {
    display: none;
}
</style>
</head>
<body>
<table id="board">
    <tr>
        <td><span class="cell_text">x</span></td>
        <td><span class="cell_text">x</span></td>
        <td><span class="cell_text">x</span></td>
    </tr>
    <tr>
        <td><span class="cell_text">x</span></td>
        <td><span class="cell_text">x</span></td>
        <td><span class="cell_text">x</span></td>
    </tr>
    <tr>
        <td><span class="cell_text">x</span></td>
        <td><span class="cell_text">x</span></td>
        <td><span class="cell_text">x</span></td>
    </tr>
</table>    
</body>
</html> 
```

使用 setInterval：

```
 var timer = setInterval(function() {
        var value = res.shift();
        if (!value) {
            clearInterval(timer);
            return;
        }
        var cell = $('table tr:eq(' + value.prm_row + ') td:eq(' + value.prm_column + ')');
        $(cell).find(".cell_text").fadeIn('slow');
    }, 3000); 
```

# c# - Linq Select：使用列表中的值（如果可用）

> ID：13624161
> 
> 赞同：2
> 
> 时间：2012-11-29T10:53:33.710
> 
> 标签：c#, linq

我将使用一些基本的精简示例来说明我的问题。

我有一堂课：

```
class Item
{
   int ID;
   bool Selected;
} 
```

现在假设我有两个`Item`班级列表：

```
List<Item> ListA = GetListA();
List<Item> ListB = GetListB(); 
```

现在我想创建第三个列表，其中包含来自`ListB`. 重要的是，如果在中`ID`找到匹配项（相同），`ListA`那么我想使用该`Selected`值，否则我想保留在`Selected`中的项目的值`ListB`。

我正在创建第三个列表，如下所示：

```
List<Item> ListC = from item in ListB 
select new Item
{
   ID = item.ID,
   Selected = item.Selected// <-- should use value form ListA if available
}; 
```

**重要提示**：我不想显得无知，但我**不想**改变`ListC`创建方式。我的意思是我想使用“linq select”方法，并且我想使用一个分配`Selected`值的“one liner”......我知道还有其他方法可以创建可以正常工作的列表，但是我不会学到任何新东西。

* * *

到目前为止，我已经尝试了几件事......

我知道这会起作用，但我不想查询`ListA`两次：

```
Selected = ListA.Any(x => x.ID == item.ID) ? ListA.First(x => x.ID == item.ID).Selected : item.Selected 
```

我也尝试过使用`DeafultIfEmpty`，但我认为这不是这种情况的正确想法......因为它不起作用，而且如果它是`ListA`空的，它似乎更有用（我不在乎）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-29T10:56:26.087

您可以按如下方式修改最后一行代码：

```
Selected = (ListA.FirstOrDefault(x => x.ID == item.ID) ?? item).Selected; 
```

因为`DefaultIfEmpty`，你必须做

```
Selected = ListA.Where(x => x.ID == item.ID).DefaultIfEmpty(item)
                                                       .First().Selected; 
```

这更难遵循，但基本上做同样的事情。

正如 Dominic 在下面所指出的，如果您使用`SingleOrDefault/Single`代替，如果您在其中找到两个相同的`FirstOrDefault/First`项目，您将得到一个例外- 这可能是您想要引入的支票。`ListA``ID`

（有*更好*/更有效的方法可以做到这一点，但正如你所说，你想修复*这种*方式，而不是使用完全不同的方式。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T11:17:48.590

那这个呢？

```
var query = from b in ListB
        join a in ListA
            on b.ID equals a.ID into g
        from r in g.DefaultIfEmpty(b)
        select new Item { ID = b.ID, Selected = r.Selected }; 
```

# xaml - Windows 应用商店应用中的 ListView 项目高度

> ID：13624163
> 
> 赞同：2
> 
> 时间：2012-11-29T10:53:41.257
> 
> 标签：xaml, windows-8, microsoft-metro

我有一个简单的 ListView

```
<ListView ItemsSource="{Binding SelectedSearch.Offers}"
    IsItemClickEnabled="True"
    ItemClick="lv_ItemClick_1"
    Margin="0,0,0,10"
    Name="lv"                          
    SelectionMode="None"
    IsSwipeEnabled="false"
    ItemTemplateSelector="{StaticResource OffersGridTemplateSelector}"/> 
```

我自定义 ItemTemplate 选择器用于在两个不同的 DataTemplate 之间进行选择。问题是，每个项目似乎都有一个最小高度。

如果我只使用带有 TextBlock 的 DataTemplate

```
 <DataTemplate x:Key="SpecialTextTemplate">
        <TextBlock Text="{Binding Text}" />
    </DataTemplate> 
```

该项目在垂直方向上占用了太多空间。它似乎占用了与堆栈面板中由 3 个文本块组成的其他模板相同的最小空间

如何使其缩小到内容的高度？有最低高度吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-02-25T16:08:13.637

最近我在 UWP 应用程序中也遇到了同样的问题。是的，为列表视图项定义了默认的最小高度。覆盖相同将解决问题。对我来说，这个解决方案有效：

```
<Style x:Key="NoSpacesListViewItemStyle" TargetType="ListViewItem">
   <Setter Property="MinHeight" Value="YOUR_MIN_HEIGHT" />
</Style> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-22T20:58:24.050

我已经为这个问题找到了相当明确的解决方案！

```
<Style x:Key="NoSpacesListViewItemStyle" TargetType="ListViewItem">
    <Setter Property="Margin" Value="0"/>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="ListViewItem">
                <ListViewItemPresenter ContentMargin="0" SelectionCheckMarkVisualEnabled="False" />
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style>

<ListView     IsSwipeEnabled="False"
              ItemContainerStyle="{StaticResource NoSpacesListViewItemStyle}"
              ItemTemplate="{StaticResource SomeTemplate}"
              ItemsSource="{Binding SomeData}"
              SelectionMode="None"/> 
```

我也可以承认选择边框在这种情况下不起作用。所以这个方法不适合有选择的ListViews。

有完整的默认 ListViewItemStyle 具有相同的更改：

```
<Style x:Key="NoSpacesListViewItemStyle" TargetType="ListViewItem">
    <Setter Property="FontFamily" Value="{ThemeResource ContentControlThemeFontFamily}" />
    <Setter Property="FontSize" Value="{ThemeResource ControlContentThemeFontSize}" />
    <Setter Property="Background" Value="Transparent" />
    <Setter Property="TabNavigation" Value="Local" />
    <Setter Property="IsHoldingEnabled" Value="True" />
    <Setter Property="Margin" Value="0" />
    <Setter Property="HorizontalContentAlignment" Value="Left" />
    <Setter Property="VerticalContentAlignment" Value="Top" />
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="ListViewItem">
                <ListViewItemPresenter HorizontalContentAlignment="{TemplateBinding HorizontalContentAlignment}"
                                       VerticalContentAlignment="{TemplateBinding VerticalContentAlignment}"
                                       CheckBrush="{ThemeResource ListViewItemCheckThemeBrush}"
                                       CheckHintBrush="{ThemeResource ListViewItemCheckHintThemeBrush}"
                                       CheckSelectingBrush="{ThemeResource ListViewItemCheckSelectingThemeBrush}"
                                       ContentMargin="0"
                                       ContentTransitions="{TemplateBinding ContentTransitions}"
                                       DisabledOpacity="{ThemeResource ListViewItemDisabledThemeOpacity}"
                                       DragBackground="{ThemeResource ListViewItemDragBackgroundThemeBrush}"
                                       DragForeground="{ThemeResource ListViewItemDragForegroundThemeBrush}"
                                       DragOpacity="{ThemeResource ListViewItemDragThemeOpacity}"
                                       FocusBorderBrush="{ThemeResource ListViewItemFocusBorderThemeBrush}"
                                       Padding="{TemplateBinding Padding}"
                                       PlaceholderBackground="{ThemeResource ListViewItemPlaceholderBackgroundThemeBrush}"
                                       PointerOverBackground="{ThemeResource ListViewItemPointerOverBackgroundThemeBrush}"
                                       PointerOverBackgroundMargin="1"
                                       ReorderHintOffset="{ThemeResource ListViewItemReorderHintThemeOffset}"
                                       SelectedBackground="{ThemeResource ListViewItemSelectedBackgroundThemeBrush}"
                                       SelectedBorderThickness="{ThemeResource ListViewItemCompactSelectedBorderThemeThickness}"
                                       SelectedForeground="{ThemeResource ListViewItemSelectedForegroundThemeBrush}"
                                       SelectedPointerOverBackground="{ThemeResource ListViewItemSelectedPointerOverBackgroundThemeBrush}"
                                       SelectedPointerOverBorderBrush="{ThemeResource ListViewItemSelectedPointerOverBorderThemeBrush}"
                                       SelectionCheckMarkVisualEnabled="False" />
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-06T23:02:45.760

答案并不明显。ListViewItem 默认模板有一个复选框，用于装饰选定的项目。此复选框出现在所选项目的右上角，高度和宽度为 40，这有效地为您提供了这些项目的最小高度。您可以通过设置禁用复选框：

```
 SelectionCheckMarkVisualEnabled="False" 
```

在您复制的模板中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T05:03:43.250

默认情况下，ItemTemplates 没有最小高度。我创建了一个非常简单的示例，它有一个列表视图、2 个模板和一个模板选择器，并且没有重现您的问题。请让我知道这对你有没有用。

XAML：

```
<ListView ItemsSource="{Binding Items}" ItemTemplateSelector="{StaticResource ts}">
            <ListView.Resources>
                <DataTemplate x:Key="t1">
                    <TextBlock Text="aaa"/>
                </DataTemplate>

                <DataTemplate x:Key="t2">
                    <TextBlock Text="bbb" Foreground="Red" Height="100"/>
                </DataTemplate>

                <local:TestTemplateSelector x:Key="ts" T1 ="{StaticResource t1}" T2="{StaticResource t2}"/>
            </ListView.Resources>
        </ListView> 
```

选择器：（应该在您的 xaml 中定义为“本地”的命名空间中

```
using Windows.UI.Xaml;
using Windows.UI.Xaml.Controls;

namespace *TestBinding*
{
    public class TestTemplateSelector : DataTemplateSelector
    {
        public DataTemplate T1 { get; set; }
        public DataTemplate T2 { get; set; }

        protected override Windows.UI.Xaml.DataTemplate SelectTemplateCore(object item, Windows.UI.Xaml.DependencyObject container)
        {
            if (item.ToString() == "b")
            {
                return T2;
            }

            return T1;
        }
    } 
```

视图模型：

```
public IList<string> Items { get { return new List<string>() { "a", "b", "c" }; } } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-14T11:33:01.973

老问题，我知道，但我遇到了同样的问题。在寻找解决方案时，我发现了这个问题：[Differential item size in a grouped gridView](https://stackoverflow.com/q/11798871/1312688)。Havent 尝试了这些解决方案，但您似乎需要一个 VariableSizedWrapGrid。

# php - Jquery - 复选框单击以从以前的国家和州填充相同形式的国家和州

> ID：13624166
> 
> 赞同：0
> 
> 时间：2012-11-29T10:53:44.097
> 
> 标签：php, jquery, codeigniter

我确实有一个表格，我必须在其中选择国家/地区选择框和两个州选择框。当我单击第一个国家时，将加载第一个国家的状态。从那里我可以选择状态。而且我确实有一个复选框，单击我在第一个国家和州选择框中给出的相同值必须填充第二个州的所有州。

我就是这样弄的

```
var val = $('#state_name_bill option:selected').html();
        var value = $('#state_name_bill option:selected').val();
        $("#state_name_user_0").append("<option value=" + value + ">" + val + "</option>");
        $("#state_name_user_0").val(value); 
```

是否有任何改变，注意在这两个状态选择框中选择状态一定不能取消选择

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T09:12:17.133

像这样试试

```
var get_hmtl = $('#state_name_bill').html();  // get all option tag
var value = $('#state_name_bill option:selected').val(); // get selected value
$("#state_name_user_0").html(get_hmtl); // fill get_html
$("#state_name_user_0").val(value); // set selected value 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-29T11:03:16.603

您可以尝试以下。

var val = $("选择选项：选择").text();

用于获取选定的值，一旦您填写状态列表，然后

var obj = $("select").text(val); obj.attr('选中', '选中');

# asp.net-mvc-3 - 可以在 Google Chrome 中查看 ASP.NET MVC3 会话吗？

> ID：13624176
> 
> 赞同：1
> 
> 时间：2012-11-29T10:54:30.863
> 
> 标签：asp.net-mvc-3, session

假设我们有以下代码：

```
Session["username"] = GetUserByCredential(username, password); 
```

是否可以在 Google Chrome 中查看该会话？我试图在`Resources`标签中查看但没有成功。

![在此处输入图像描述](../Images/5a420812976d67cd7ddd5aba187cfe2f.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T11:07:53.970

您正在谈论的 Session 是网络服务器/网络应用程序内的*服务器端数据结构。*

您不能直接从客户端访问它。

您必须将当前会话的内容发送给客户端以查看它：

```
public ActionResult GetCurrentSession() {
    return View(Session);
} 
```

和类似这样的观点：

```
@model HttpSessionStateBase

foreach (string key in Model.Keys)
{
    @Session[key].ToString()
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T11:07:44.127

会话存储在服务器内存中（或根据您的设置分布在 SQL Server 中）。

无论设置如何，任何浏览器都不会看到会话数据，除非您在某处专门将其写出来。这是设计使然，如果这样做就不会很安全。

# openlaszlo - Openlaszlo bringtoFront 无法正常工作

> ID：13624182
> 
> 赞同：1
> 
> 时间：2012-11-29T10:54:49.080
> 
> 标签：openlaszlo, lzx

我有一个三角形，我想旋转它。图像旋转正常，我没有任何问题。但是我有一个问题，只有当我单击可以旋转的实际点时，三角形才应该获得焦点。但这并没有发生。我附上了一张图片来解释这个问题。我在 swf 运行时对此没有任何问题。但在 DHTML 运行时我面临这个问题。这对我正在使用的图像有什么影响吗？

我正在使用 Openlaszlo5.0，在 Windows Firefox 16.0 中进行测试，三角形的测试图像是 PNG。

![在此处输入图像描述](../Images/a04aa84cc030327cc61e238005b7b694.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T18:18:27.853

我从您的描述中假设，当您单击它时，您必须使用具有内置 bringToFront() 调用的类，例如 basewindow。使用像这样的类，您可以覆盖bringToFront() 方法并检查鼠标是否在您希望响应的区域内，然后决定是否调用super.bringToFront()。为简单起见，我的示例只是检查点击是否在正方形的右半部分，但您可以插入公式以确定它是否在三角形的点内，而不是在您的应用程序中：

```
<canvas width="1000" height="584" debug="true">

    <basewindow id="v1" width="100" height="100" x="25" y="25" bgcolor="0xff0000" clickable="true">

        <method name="bringToFront">
        <![CDATA[

            var x = this.getMouse('x');
            var y = this.getMouse('x'); 

            Debug.debug('x='+x);
            Debug.debug('y='+y);    

            // Ensure mouse is within right half:

            if (x>(this.width)/2)
              super.bringToFront();

        ]]>
        </method>

    </basewindow>  

    <basewindow id="v" width="100" height="100" x="50" y="50" bgcolor="0xcccccc" clickable="true">

        <method name="bringToFront">
        <![CDATA[

            var x = this.getMouse('x');
            var y = this.getMouse('x'); 

            Debug.debug('x='+x);
            Debug.debug('y='+y);    

            // Ensure mouse is within right half:

            if (x>(this.width)/2)
              super.bringToFront();

        ]]>
        </method>

    </basewindow>

</canvas> 
```

我在 OL 4.9.0 SWF10 中对其进行了测试，并且可以正常工作。

# node.js - Node.js 在 Backbone.io 中发出易失性消息

> ID：13624184
> 
> 赞同：1
> 
> 时间：2012-11-29T10:55:05.690
> 
> 标签：node.js, volatile

有人知道 Backbone.io 是否可以配置为使用易失性消息吗？（由底层socket.io支持）如果是这样，怎么做？

非常感谢...

# android - Android：是否可以与 AsyncTask 交互/更新？

> ID：13624185
> 
> 赞同：2
> 
> 时间：2012-11-29T10:55:08.170
> 
> 标签：android, android-asynctask

AsyncTask 主要作为运行定义明确的计算或任务的解决方案。经典示例是作为 AsyncTask 的下载器，它被提供一个 URL，将其进度更新到 UI，并在完成时退出。在 AsyncTask 运行时，是否有一种合理（不太老套）的方式来添加/更改 AsyncTask 的输入？也许设置 AsyncTask 必须处理的项目队列，然后从主应用程序更改该队列......？例如，这会“破坏” AsyncTask 模型吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T11:17:32.153

是的你可以。AsyncTask 是一个已经嵌入到 UI 线程的通信机制的线程。但是，这种通信只是从`AsyncTask`到`UI`而不是在您需要的相反方向上。

此外，Android 中的最大同时数`AsyncTask`在几个 API 版本中为 1。

要实现与您的线程安全通信`UI`，`AsyncTask`您将需要使用`Handler`或`BlockingQueue`类。

就个人而言，我不会这样做。我会直接使用 a`Thread`和 a `Handler`or `BlockingQueue`。

问候。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T07:23:21.600

是的，您可以通过从由您的活动管理的同步集合中获取 doInBackground() 方法中的对象来简单地做到这一点。

# security - 是否有任何特殊字符会使在 bash 中打印/显示文件名变得危险？

> ID：13624186
> 
> 赞同：3
> 
> 时间：2012-11-29T10:55:15.920
> 
> 标签：security, bash, special-characters, filenames

所以我们知道，如果您正在编写 bash 脚本，则必须注意文件名中的特殊字符，例如空格、引号和换行符。我记得在某处读到显示/回显/打印某些文件名的事件在 bash 中可能很危险。这是真的？

如果文件名被显示/打印/回显等，是否有任何字符可以放入文件名中，这将是安全问题？

假设我在 linux 系统上运行 bash。

*这实际上不是我现在遇到的问题，也不是我需要解决的问题，这更多是为了好奇，看看这是不是真的*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T11:39:26.870

在配置错误的终端和语言环境中，UTF-8 也可能很危险。几年来，我使用的设置打印 UTF-8 文本会导致在我输入的下一个命令前添加几个字符。

```
$ cat file.txt
šómé ǧářbáǧě
$ 1;21 
```

键入后`ls`，结果是

```
$ 1;21ls
1: command not found
21ls: command not found 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T11:07:22.427

When echoing the worst thing that can happen to you is break of `''` and then with the help of `;` you can have arbitrary program execution vulnerability. This is the list of bash special chars:

```
" $ & ' () * ; < > ? [ \ ] ` { | } ~ space tab cr lf 
```

Those could present a potential threat depending of their usage context.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T11:12:28.550

考虑到文件调用，除了字符之外，命令名称也可能是一个问题`rm`

```
$ ls               # List files 
rm  somefile  

$ `ls`             # Why aren't my file listed?

$ ls               # Opps where did somefile go?
rm 
```

`backticks`使用或时，请注意您在脚本中的实际操作`eval`。

前导连字符：

```
$ ls
-dumbfile

$ rm -dumbfile
rm: invalid option -- 'd'

$ rm -- -dumbfile   # use -- to delete files containing leading - 
```

# objective-c - 在计算器上制作加号/减号按钮的方法

> ID：13624188
> 
> 赞同：0
> 
> 时间：2012-11-29T10:55:17.790
> 
> 标签：objective-c, ios, xcode, calculator

我试图在计算器上制作一个加号/减号按钮，这个想法基本上是显示的数字应该乘以-1，除非它等于0。

我以为我会这样做；
如果大于 0，则在前面加上“-”符号，
如果小于 0，则删除字符串中的第一个字符（即“-”），
如果等于 0，则保持原样。

我就是这样开始的

```
- (IBAction)plusminusPressed:(id)sender
{   

NSString *minusString = [NSString stringWithFormat:@"-"];
NSString *mainLabelString = mainLabel.text;

if (mainLabelString > 0)
    mainLabel.text = [minusString stringByAppendingFormat:mainLabelString]; 

} 
```

虽然它确实适用于大于 0 的数字，但它只是在 0 之前添加一个减号和小于 0 的数字。
我怎样才能让它与其他两种可能性一起使用，我尝试添加

```
 else if ([mainLabelString isEqualToString:@"0"])
    mainLabel.text = [mainLabelString]; 
```

但随后它需要一个标识符。对于其他两种可能性，我该怎么办，我什至都做了第一种吗？
你会改用其他方式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T11:20:52.960

你得到错误的原因是你试图将 NSString 与数字 0 进行比较：

```
if (mainLabelString > 0) 
```

这不是它在 Obj-C 中的工作方式。您必须将“mainLabelString”的值与 0 进行比较

```
[mainLabelString intValue] > 0 
```

或者

```
[mainLabelString doubleValue] > 0 
```

或者

```
[mainLabelString floatValue] > 0 
```

查看 Standford Univ 在 iTunes Univ 上的 iOS 教程 - 为 iOS 开发应用程序。它有一章是关于构建一个简单的计算器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T15:22:17.477

我也在我的计算器上尝试过这个。想和你分享我的答案。

```
- (IBAction)plusminusPressed{
    if ([TextInput.text isEqualToString:@"0"]) {
        return;
    }else{
        NSString * negative = @"-";
        if(!changingSign){
            changingSign = YES;
            TextInput.text= [negative stringByAppendingString:TextInput.text];
        }else{
            changingSign = NO;
            TextInput.text = [TextInput.text substringFromIndex:1];
        }
    }

} 
```

希望这可以帮助..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T11:16:06.217

你为什么把它弄得这么复杂。

您需要使用 float 或 int 变量来执行此操作。

声明一个整数，如：

```
int result; 
```

并将值存储在结果变量中。

您需要将结果添加到标签，例如：

```
mainLabel.text = [NSString stringByAppendingFormat:@"%d",result]; 
```

也不需要那个条件。

# oauth - 授权对我安装的应用程序的有效期是多久

> ID：13624193
> 
> 赞同：0
> 
> 时间：2012-11-29T10:55:28.727
> 
> 标签：oauth, google-api, google-calendar-api, installed-applications

在 Google API 的开发者控制台中，我创建了一个启用了 Google 日历服务的项目。我想创建一个每 24 小时连接到 Google 日历的 Java 应用程序（使用 cron 作业）。

现在，我使用弹出窗口创建了客户端 ID，选择了已安装的应用程序，下载了 JSON，我的 Java 应用程序开始工作了。现在我想知道这个 JSON 文件的有效期是多久？直到我重置客户端密码？这是一个需要每 24 小时运行数年且无需交互的应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T10:41:40.103

**供将来参考：** 如果您使用“已安装的应用程序”api 客户端代码。在您在控制台中重置客户端凭据之前，它一直有效。

# python - python中的一致备份

> ID：13624198
> 
> 赞同：8
> 
> 时间：2012-11-29T10:55:39.477
> 
> 标签：python, winapi, backup, volume-shadow-service

我正在研究python中的远程备份解决方案。服务器部分将在 Unix/Linux 上运行，因为它将使用硬链接进行有效的增量备份。

然而，客户端部分也必须在 Windows 上运行，并且文件锁定可能是一个问题。

根据我的研究，卷影复制服务 (VSS) 是我需要的。类似于 LVM 快照，不受文件锁定的影响。然而，VSS API 似乎没有在 pywin32 中实现。

我目前的想法是使用一些包装器来创建临时 VSS 快照，运行客户端，然后将其删除。

我想知道是否有人在这种情况下有经验。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-03-08T08:38:16.703

想知道我偶然发现的相同

[https://github.com/sblosser/pyshadowcopy](https://github.com/sblosser/pyshadowcopy)（简单，但似乎不再活跃）

和

[https://github.com/libyal/libvshadow](https://github.com/libyal/libvshadow)（复杂，雄心勃勃，阿尔法）

不幸的是，我还没有时间测试它们......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T12:21:29.350

我会在您的 Windows 客户端上研究 IronPython。仅仅是因为这将使您能够访问 COM+ DLL 和其他 WinAPI 对象。它是 .NET，但它仍然是 python。我还没有使用它来保证 100% 确定它可以与 VSS 一起使用，但它*应该*.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-20T15:47:33.760

在为我的个人备份工具寻找相同的东西时，我遇到了[`PyVSS`](http://sourceforge.net/projects/pyvss). 这似乎很容易使用，但是，只有该模块的编译版本可用。缺少基本的源代码部分。

# asp.net - 将 ASP.NET 应用程序连接到 SQL 数据库问题

> ID：13624199
> 
> 赞同：0
> 
> 时间：2012-11-29T10:55:46.043
> 
> 标签：asp.net, sql-server, vb.net

我正在尝试将我的网络应用程序中的一些数据插入到数据库表中。每当我运行代码时，它都会直接跳转到异常。即使我设置了断点，调试也不会停止以便我检查参数。我什至通过手动将相同的数据插入表及其工作来检查表是否会接受从我的 Web 应用程序插入的数据类型。

这是我的代码

```
 Protected Sub Button2_Click(sender As Object, e As EventArgs) Handles Button2.Click

        Dim IP As String = TextBox3.Text
        Dim Country_Code As String = TextBox4.Text
        Dim Country As String = TextBox5.Text

        Dim conn As New SqlConnection("Data Source=***.***.***.***;Initial Catalog=IP_Loc;User ID=********;Password=************;Integrated Security=True")
        Dim cmd As New SqlCommand

        Try
            conn.Open()
            cmd = New SqlCommand("INSERT INTO IP_Info(IP, Country_Code, Country) VALUES (@IP, @Country_Code, @Country)", conn)
            cmd.Parameters.AddWithValue("@IP", IP)
            cmd.Parameters.AddWithValue("@Country_Code", Country_Code)
            cmd.Parameters.AddWithValue("@Country", Country)
            cmd.ExecuteNonQuery()
            conn.Dispose()
            conn.Close()

        Catch ex As Exception
            MsgBox("Database Connection Error")
        End Try 
```

我已经介绍了用户 ID 和密码，因为它是本地服务器。关于如何解决这个问题的任何建议？

这是它所在的错误`conn.open()`

`System.Data.SqlClient.SqlException: Login failed for user 'Server'. at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection) at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj) at System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj) at System.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK) at System.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, Boolean ignoreSniOpenTimeout, Int64 timerExpire, SqlConnection owningObject) at System.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(String host, String newPassword, Boolean redirectedUserInstance, SqlConnection owningObject, SqlConnectionString connectionOptions, Int64 timerStart) at System.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(SqlConnection owningObject, SqlConnectionString connectionOptions, String newPassword, Boolean redirectedUserInstance) at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, Object providerInfo, String newPassword, SqlConnection owningObject, Boolean redirectedUserInstance) at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection) at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnection owningConnection, DbConnectionPool pool, DbConnectionOptions options) at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject) at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject) at System.Data.ProviderBase.DbConnectionPool.GetConnection(DbConnection owningObject) at System.Data.ProviderBase.DbConnectionFactory.GetConnection(DbConnection owningConnection) at System.Data.ProviderBase.DbConnectionClosed.OpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory) at System.Data.SqlClient.SqlConnection.Open()`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T11:00:20.743

你已经声明了 sqlcommand 两次。修正程序

```
 Protected Sub Button2_Click(sender As Object, e As EventArgs) Handles Button2.Click

            Dim IP As String = TextBox3.Text
            Dim Country_Code As String = TextBox4.Text
            Dim Country As String = TextBox5.Text             
                Try
        Dim conn As New SqlConnection("Data Source=***.***.***.***;Initial   Catalog=IP_Loc;User ID=********;Password=************;Integrated Security=True")
                conn.Open()
            Dim cmd As New SqlCommand("INSERT INTO IP_Info(IP, Country_Code, Country) VALUES (@IP, @Country_Code, @Country)", conn)
                cmd.Parameters.AddWithValue("@IP", IP)
                cmd.Parameters.AddWithValue("@Country_Code", Country_Code)
                cmd.Parameters.AddWithValue("@Country", Country)
                cmd.ExecuteNonQuery()
                conn.Dispose()
                conn.Close()

            Catch ex As Exception
                MsgBox("Database Connection Error")
            End Try 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T11:37:43.497

您需要在服务器计算机上拥有一个有效的用户帐户才能使用该连接字符串。您指定`Integrated Security=True`，这意味着`server`尝试连接到位于指定 IP 地址的 SqlServer 的 windows 当前用户 ( ) 也应该是该计算机的有效 windows 帐户。

我怀疑 SqlServer 无法识别用户`Server`，因此您会遇到连接失败的异常。您可以尝试从连接字符串中删除 Integrated Security=True ，但这意味着用户 ID 和密码对服务器计算机有效

[在 MSDN](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.connectionstring%28v=vs.100%29.aspx)上查看有关 Integrated Security 的文档

> 如果为 false，则在连接中指定用户 ID 和密码。如果为 true，则使用当前 Windows 帐户凭据进行身份验证。如果指定了用户 ID 和密码并且集成安全设置为 true，则用户 ID 和密码将被忽略并使用集成安全。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T17:29:35.620

有同样的问题。右键单击解决方案资源管理器中的解决方案，然后选择清理。然后尝试再次使用断点运行。

# jquery - Jquery：将数据宽度存储在变量中并将其应用于伪元素

> ID：13624203
> 
> 赞同：1
> 
> 时间：2012-11-29T10:55:50.193
> 
> 标签：jquery, css, pseudo-element

我正在创建一个仅基于 CSS 的工具提示。我有一个`span`带有工具提示类的标签和内容的使用`data-tooltip`属性。我想`data-tooltip-width`在该跨度类中使用并使用该值来设置内容的宽度。所以基本上我应该创建一个像这样的变量：

```
var twidth = $('.tooltip').data('tooltip-width'); 
```

但我不知道接下来我应该做什么。我已经尝试过了，但没有奏效：

```
$('.tooltip[data-tooltip]:after').css({
 'width': twidth,
}); 
```

有人启发我如何做到这一点。下面是CSS代码：

```
 .tooltip[data-tooltip] {
  position: relative;
  text-decoration: none;
  border-bottom: solid 1px;

 }

.tooltip[data-tooltip]:before {
 content: "";
 position: absolute;
 border-top: 20px solid @color;
 border-right: 20px solid transparent;
 visibility: hidden;
 left:50%;
 bottom: 100%;

}

.tooltip[data-tooltip]:after {
 content: attr(data-tooltip);
 position: absolute;
 color: white;
 left:50%;
 bottom:150%;
 background: @color;
 padding: 5px 15px;
 display: inline-block;   
 visibility: hidden;
 white-space: nowrap;

 }        
.tooltip[data-tooltip]:hover:before, .tooltip[data-tooltip]:hover:after {
  visibility: visible;

 } ` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T11:05:50.163

```
var tooltip = $('span.tooltip');
var toolTipWidth = tooltip.attr('data-tooltip-width');

tooltip.css('width', toolTipWidth); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T11:06:37.640

据我所知，您不能将 CSS 样式添加到“后”元素。问题是，当您使用 .css 时，jQuery 会写入 'style'-Attribute，但这是一个用于设置元素本身样式的属性。没有“after”元素可以添加样式。

短的：

*   将 jQuery 中的 css 样式添加到“after”元素不会做任何事情。
*   并且（在 CSS 中）attr() 不受“内容”属性之外的任何浏览器的支持。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T11:08:09.370

您可以使用 CSS3 `attr()`（尚不支持）根据属性设置宽度，例如：

```
.tooltip[data-tooltip]:after {
    width: attr(data-tooltip-width)
} 
```

*更新：仅`attr()`在 CSS2.1 中受支持，并且仅适用于该`content`属性（在最新的 FF 和 Chrome 中测试）。*

# java - Lium 扬声器分类（识别软件）空指针问题

> ID：13624214
> 
> 赞同：2
> 
> 时间：2012-11-29T10:56:44.370
> 
> 标签：java, speech-recognition

我正在尝试通过命令行或在 java 程序中使用名为 Lium 的扬声器分类程序，但没有运气。

在命令行版本上，我收到一个空指针异常消息：

```
java.lang.NullPointerException

at fr.lium.spkDiarization.lib.MainTools.readGMMContainer(MainTools.java:222)

at fr.lium.spkDiarization.system.Diarization.speech(Diarization.java:193)

at fr.lium.spkDiarization.system.Diarization.ester2Version(Diarization?java:318)

at fr.lium.spkDiarization.system.Diarization.main(Diarization.java:530) 
```

在 java 程序中，创建了输出文件，但大小为 0 字节。

试试这个程序：

*   从这里下载 jar [http://lium3.univ-lemans.fr/diarization/doku.php/download](http://lium3.univ-lemans.fr/diarization/doku.php/download)

*   在里面创建一个 .bat 文件：

    java -Xmx1024m -jar ./LIUM_SpkDiarization-4.2.jar --fInputMask=./soundfile-16Khz-16Bits.wav --sOutputMask=./showName.seg --doCEClustering showName

该程序应创建一个名为 showName.seg 的文件，其中包含扬声器片段。

但我有错误信息。我尝试了每个版本的软件，结果都一样。

如果您想在 java 程序中试用该软件，请使用源代码中 diarization.java 中的代码

我非常感谢任何帮助。谢谢一堆。

杰夫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-11-25T02:19:04.387

我发现了这个问题，它与程序中使用的错误文件分隔符有关。Java 期望`/`在资源定位器中作为分隔符，而代码尝试`\`在 Windows 中使用本地分隔符。

如果你可以重新编译jar文件（使用ant），所有需要做的就是在文件中`File.separator`替换；它对我有用。`/``src\fr\lium\spkDiarization\system\Diarization.java`

第 192、229、245、265 和 471 行需要这个简单的更改，例如在第 245 行：

```
 URL genderURL = getClass().getResource(dir + File.separator + "gender.gmms"); 
```

应该 ：

```
 URL genderURL = getClass().getResource(dir + "/" + "gender.gmms"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T20:27:27.683

使用网站上提供的 jar，它可以正常工作并产生结果。

错误是它试图在 jar 中查找数据文件但未能做到这一点（该文件是ester2/gender.sms）。

可能是您重新编译了 jar 或从源代码构建它，而新更新的 jar 没有该文件

另一种可能性是您可能会使用其他一些 JVM（不是 Oracle），它们在查找 jar 内的资源方面不太好。

作为解决问题的最后一种方法，您可以将数据文件提取到文件夹并修复源以从文件夹中读取它们，而不是从 jar 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-17T12:42:42.200

windows系统加载gender.sms的问题。我有同样的问题。在linux下运行成功。在我的 Windows 7 上，它崩溃了。根据项目现场，他们知道问题：

> 注意：windows下有一个问题还没有解决。资源负载（如 gmm）不起作用。

# javascript - jQuery UI Accordion - 启用一些面板

> ID：13624215
> 
> 赞同：1
> 
> 时间：2012-11-29T10:56:52.477
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-accordion

我有这样的巫师。我希望它只能向上打开（返回）而不是向下的面板。

例如：我正在填写第1步，进入第2步，我不能跳到第4步或第5步，但我必须能回到第1步

这是我的代码：

```
<div id="accordion">
<h3>Step 1</h3>
<div id="img_divisione">
    <a href="">Something</a>
</div>
<h3>Step 2</h3>
<div>
    <a href="">Something</a>
</div>
<h3>Step 3</h3>
<div>
    <a href="">Something</a>
</div>
<h3>Step 4</h3>
<div>
    <a href="">Something</a>
</div> 
```

```
$(document).ready(function() {
$("#img_divisione a").click(function() {
   $("#accordion").accordion( "option", "active", 1 );
});
});

$(function() {
   $( "#accordion" ).accordion({
        heightStyle: "content"
});
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T11:17:55.407

看看

```
beforeActivate: function( event, ui ) {} 
```

jQuery-ui 事件。

这是来自 jQuery UI 主页的示例：

```
$( "#accordion" ).accordion({    
        beforeActivate: function( event, ui ) {
                          if ( ui.newHeader.text() === "Don&#39;tActivateMe" ){
                                 event.preventDefault();        
                           }    
                        }
 }); 
```

此活动可以取消。因此，给每个面板一个类或其他东西来定义它们的顺序，而不是检查 ui.newPanel 类是否大于旧的类。如果是这样，请取消该事件。

请注意，tihs 仅适用于 JQuery UI 版本 > 1.9。

希望这可以帮助

# android - 通过单击链接将主页图标添加到移动设备

> ID：13624216
> 
> 赞同：0
> 
> 时间：2012-11-29T10:56:56.717
> 
> 标签：android, iphone, html, css, icons

我创建了一个移动网站，它运行良好。现在我正在为 iPhone 和 Android 创建一个移动主页图标。用户有什么方法可以通过单击网站中的链接而不是通过书签选项来创建主页图标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T12:39:57.243

这在 Android 或 iOS 上都是不可能的。

最好的办法是使用指导性弹出脚本。网上有很多适用于 iOS 的，但[cubiq 的版本](http://cubiq.org/add-to-home-screen)似乎不错。

Android 类似（使用默认浏览器），尽管我找不到 Android 特定脚本，但我会推荐类似的解决方案。

[在此博客](https://www.mavenlink.com/community/blogs/785-add-to-home-screen-for-iphone-ios-and-android)上可以找到在任一操作系统上执行此操作的说明。请谨慎使用，但是由于用户使用的浏览器（以及 Android 的操作系统版本）将需要非常不同的说明！

# java - 在多个 ServerBootstrap 中使用相同的线程池是否安全？

> ID：13624218
> 
> 赞同：2
> 
> 时间：2012-11-29T10:57:04.817
> 
> 标签：java, tcp, netty

我有一个基于 netty 的应用程序，它侦听多个 tcp 端口。所以每个端口都是这样初始化的

```
bootstrap = new ServerBootstrap(new NioServerSocketChannelFactory(
            Executors.newCachedThreadPool(), Executors.newFixedThreadPool(Settings.getDemuxPoolSize()),
            Settings.getDemuxPoolSize())); 
```

但是拥有这么多线程池（而且我有很多开放的 TCP 端口）对我来说似乎是一种浪费。

问题是：在 Netty 中跨多个服务器引导程序使用相同的线程池是否安全？（也许一些线程本地通道引用等？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T19:33:47.310

您最好创建一个 WorkerPool，然后在不同的 NioServerSocketChannelFactory 实例之间共享它。因此，您可以将相同的 Workers 用于不同的 ChannelFactory 实例。

就像是：

```
WorkerPool<NioWorker> workerPool = new NioWorkerPool<NioWorker>(Executors.newCachedThreadPool(), size);
NioServerSocketChannelFactory factory = new NioServerSocketChannelFactory(Executors.newCachedThreadPool(), workerPool);
NioServerSocketChannelFactory factory2 = new NioServerSocketChannelFactory(Executors.newCachedThreadPool(), workerPool);
.... 
```

# c++ - 在 Windows 中从 c++ 启动一个 .exe 文件

> ID：13624222
> 
> 赞同：0
> 
> 时间：2012-11-29T10:57:20.740
> 
> 标签：c++

我尝试在 c++ Visual Studio 中从我的代码启动一个程序。我尝试了这些 cmds：

```
system( "\" C:/Program Files (x86)/scilab-5.3.3/bin/WScilex.exe\"");
system( "start" C:/Program Files (x86)/scilab-5.3.3/bin/WScilex.exe\"");
system( "\" C:\\Program "" Files""(x86)\\scilab-5.3.3\\bin\\WScilex.exe""); 
```

他们都没有工作，有没有人知道如何完成这项工作提前谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T10:59:16.203

使用规范的`ShellExecute`WinAPI 函数。最简单的情况：

```
ShellExecute(hwnd, "open", "c:\\MyProgramPath\\WScilex.exe", NULL, NULL, 0); 
```

有关详细信息，请参阅[http://msdn.microsoft.com/en-us/library/windows/desktop/bb776886(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/bb776886(v=vs.85).aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T11:07:24.113

Do not try to use quotes twice, as you do in Command Prompt (cmd). In a c++ code you won't need to specify it in quotes if you have 'spaces' in the file path.

You should use 'WinExec' instead of 'system', so console window will not be shown.

e.g.

```
WinExec("C:\\Program Files\\VideoLAN\\VLC\\vlc.exe",0); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T11:04:57.350

该`system`函数将字符串作为命令传递给 Windows [cmd.exe] 中的系统默认命令解释器。

所以，在命令的开头不要有多余的空格：

```
system( "\"C:/Program Files (x86)/scilab-5.3.3/bin/WScilex.exe\"" ); 
```

[cmd.exe] 命令解释器对路径中的正斜杠感到满意。

* * *

您的第一次尝试：

```
system( "\" C:/Program Files (x86)/scilab-5.3.3/bin/WScilex.exe\""); 
```

↑ 开头有多余的空格。空格很重要，因为命令字符串被引用。但是您需要引号，因为路径包含一个空格。

您的第二次尝试：

```
system( "start" C:/Program Files (x86)/scilab-5.3.3/bin/WScilex.exe\""); 
```

↑ 不应该编译。这**不是真正的代码**。至少不是您已成功编译和运行的代码。

您的第三次尝试：

```
system( "\" C:\\Program "" Files""(x86)\\scilab-5.3.3\\bin\\WScilex.exe""); 
```

↑ 开头有多余的空格。空格很重要，因为命令字符串被引用。但是您需要引号，因为路径包含一个空格。

# c# - Resharper 拆分字符串文字

> ID：13624230
> 
> 赞同：10
> 
> 时间：2012-11-29T10:57:52.050
> 
> 标签：c#, asp.net-mvc, resharper

我在 15 分钟的谷歌搜索中并不走运。好关键字可能运气不好？

为什么 Resharper 建议在函数参数中拆分字符串？

例子：

**由此：**

```
return PartialView("Categorias", lista); 
```

**对此：**

```
return PartialView("Cat" + "egorias", lista); 
```

我在这里检查了文档：[链接](http://www.jetbrains.com/resharper/webhelp/Reference__Options__Languages__CSharp__Context_Actions.html)

它说： **拆分字符串文字 - 将字符串文字拆分为两个文字。**

我想发现为什么这是一个好的实践，实现这种实践的幕后基本思想逻辑是什么。

我不想在不知道为什么的情况下这样做...

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-29T11:01:07.670

这不是一个好习惯。**并非 ReSharper 建议的所有内容都是一个好的做法 -您的光标**恰好位于该位置，因此 ReSharper 为您提供了拆分字符串的选项。在任何位置的任何字符串中尝试它。
ReSharper 具有类似的基于位置的实用程序，例如“转换为逐字字符串”或“转换为常规字符串” - 两者都不是“更好”。

# android - Android：如何将网络摄像头模拟为模拟器前置摄像头

> ID：13624235
> 
> 赞同：0
> 
> 时间：2012-11-29T10:58:21.800
> 
> 标签：android, android-emulator

我想用我电脑的网络摄像头作为我目前正在使用的安卓模拟器的前置摄像头，以模拟Skype等服务。

我正在使用 android sdk 版本 21。

# makefile - 遍历 Makefile 中的目录列表

> ID：13624236
> 
> 赞同：8
> 
> 时间：2012-11-29T10:58:26.660
> 
> 标签：makefile, directory

我想在几个目录中执行一项任务，但到目前为止还没有找到“类似makefile”的解决方案。我知道这是一个经常被问到的问题，我知道如何解决子 makfile 等问题，但我正在寻找更简单的东西。

而不是做

```
copy: 
     cd module1 && mkdir foo
     cd module2 && mkdir foo
     cd module3 && mkdir foo 
```

我想要类似的东西

```
directories = module1 module2 module3

copy: $(directories)
     cd $< && mkdir foo 
```

但这不起作用，因为收据只在第一个目录中调用一次。我想出了这个可行的解决方案，但可能不是 Makefiles 的风格：

```
directories = module1 module2 module3

copy: 
     for d in $(directories); do cd $$d && mkdir foo && cd ..; done 
```

我怎样才能更好地做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T20:00:34.113

有很多方法可以做到这一点。

您可以按照 Andrew 的建议进行操作，而无需对前缀进行硬编码：

```
directories = module1 module2 module2

%/foo: ; mkdir -p -- "$@"

copy: $(addsuffix /foo,$(directories)) 
```

这使

```
$ make -n copy
mkdir -p -- "module1/foo"
mkdir -p -- "module2/foo"
mkdir -p -- "module3/foo" 
```

您还可以`copy`从 makefile 生成目标：

```
directories = module1 module2 module2

define copy-target
  copy:: ; cd $1 && mkdir foo
endef

$(foreach dir,$(directories),$(eval $(call copy-target,$(dir)))) 
```

这给出了：

```
$ make -n copy
cd module1 && mkdir foo
cd module2 && mkdir foo
cd module3 && mkdir foo 
```

您还可以生成命令，而不是目标：

```
directories = module1 module2 module2

copy: ; $(foreach dir,$(directories),(cd $(dir) && mkdir foo) &&) : 
```

这导致

```
$ make -n copy
(cd module1 && mkdir foo) && (cd module2 && mkdir foo) && (cd module3 && mkdir foo) && : 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T16:47:09.653

在 Makefiles 中，每当你要创建文件时，以文件名作为目标制定规则，并给出创建目标文件的命令。

```
copy: module1/foo module2/foo module3/foo

module%/foo:
        mkdir $@ 
```

如果你想参数化一点以避免重复，你也可以写类似的东西

```
MODULE_NUMBERS = 1 2 3

copy: ${MODULE_NUMBERS:%=module%/foo}

module%/foo:
        mkdir $@ 
```

# linux - Linux 第 2 部分中的还原脚本

> ID：13624237
> 
> 赞同：-2
> 
> 时间：2012-11-29T10:58:29.057
> 
> 标签：linux, bash, shell

在我的另一个问题中，我遇到了脚本问题；虽然我现在有第一部分工作。我对 Linux 和脚本也很陌生。

如果我这样做，脚本应该会询问我想将文件恢复到哪里`restore -n`

所以如果我这样做：

`restore -n test1.txt`

它会给我回这个问题

`"Where would you like to save the file?"`

然后我会举个例子， `/root`这会将文件恢复到根目录。

如果我这样做`restore`应该将文件恢复到原始位置。所以如果我这样做：

`restore test1.txt`

它应该将其恢复为`/root/michael`，但是当我尝试恢复 test1.txt 时出现错误

```
mv: missing file operand 
```

到目前为止，这是我的脚本，虽然第一部分工作正常，但第二部分我遇到了问题

```
if [ "$1" == "-n" ]
then
  cd /root/michael/trash
  restore`grep "$2" /root/michael/store`
  filename=`basename "$restore"`
  echo "Where would you like to save the file?"
  read location
  location1=`readlink -f "$location"`
  mv -i $filename "location1"/filename
else
  location=`cd /root/michael`
  cd /root/michael/trash
  restore=`grep "$2" /root/michael/store`
  filename=`basename "$restore"`
  mv -i $filename "$location1" $location
fi 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T11:04:00.660

你错过了一个任务

```
restore`grep "$2" /root/michael/store` 
```

# websocket - 在 depoys/crash 期间保持 Websocket 连接活跃的技术

> ID：13624239
> 
> 赞同：3
> 
> 时间：2012-11-29T10:58:34.373
> 
> 标签：websocket, socket.io, load-balancing

我有一个基于 websocket 的 web 应用程序，我经常犹豫部署它，因为部署会杀死所有连接，迫使客户端重新连接。我目前没有内置好的离线同步功能，但我仍然宁愿不依赖它。

对于部署，我计划查看[hipache](https://github.com/dotcloud/hipache)并在服务器更新时将其拉出轮换。这不处理其中一个服务器实例崩溃而其他服务器实例仍在运行的情况。

他们是否有任何经过验证的技术可以解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T17:27:58.790

您应该能够在客户端侦听`error`或事件并根据需要重新启动套接字。`close`这能解决你的问题吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T06:58:00.520

您可以使用 Kaazing 以可扩展的方式部署 socket.io。Kaazing 支持的集群允许您将网关热交换进出集群。我们的一些客户配置集群双 dmz 来管理部署。此设置的最佳部分是它允许重新部署任何网关，客户端优雅地尝试连接到当前可用的连接路径。这既安全又非常可扩展。

额外的好处是，如果您将 socket.IO 的传输切换为仅 websocket，Kaazing 也会负责仿真，在提供不依赖任何轮询的仿真方面比 socket.io 走得更远，并提供一直模拟到 Internet Explorer 版本 6。

当涉及到大批量生产时，最好以稳健的方式处理集群和负载平衡。

如果您决定尝试一下，请确保将 socket.io 传输更改为使用 ws 并在客户端的 Kaazing 库之上运行它。在服务器端，您需要做的就是代理到 Node.JS 的连接。可以编写额外的适配器来利用代理和 socket.IO 在每个网关后面获得更多的负载平衡，因此多个节点可以在给定网关上循环连接。

# ruby-on-rails - 连接 ActiveRecord::Relations 通过多态关联查询

> ID：13624240
> 
> 赞同：9
> 
> 时间：2012-11-29T10:58:43.000
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, ruby-on-rails-3.2

我的应用程序有一个 Job 模型。系统中的每个作业都有一个`contact`. 这就像如果您需要询问有关工作的问题，您会打电话给一个人。联系人可以是`client`客户的雇员或雇员 ( `ClientEmployee`)。

```
class Job < ActiveRecord::Base
  belongs_to :contact, polymorphic: true
end

class Client < ActiveRecord::Base
  has_many :jobs, as: :contact
  has_many :employees, class_name: 'ClientEmployee'
end

class ClientEmployee < ActiveRecord::Base
  belongs_to :client
  has_many :jobs, as: :contact
end 
```

客户有这样的想法`commissioned_jobs`。客户委托的工作是客户是联系人或客户的一名员工是联系人的那些工作。

```
class Client < ActiveRecord::Base
  has_many :jobs, as: :contact
  has_many :employee_jobs, through: :employees, source: :jobs

  def commissioned_jobs
    jobs << employee_jobs
  end
end 
```

旁白：该方法有点 hack，因为它返回一个数组而不是一个`ActiveRecord::Relation`. 如果我尝试将工作连接到employee_jobs 中，它也会爆炸，这也很有趣。它可能会或可能不会出于我的目的。

我想为`Client`被调用添加一个范围`with_commissioned_jobs`。这应该返回系统中所有有工作或有工作的员工的客户。

```
class Client < ActiveRecord::Base
  def self.with_commissioned_jobs
    # I can get clients with jobs using: joins(:jobs). How do 
    # I also include clients with employees who have jobs?
  end
end 
```

我该如何实现这个方法？

我正在使用 Rails 3.2.9。

**更新：**

我已经取得了一些进展，现在我有两种方法，每种方法都可以完成我需要的一半。

```
class Client < ActiveRecord::Base
  # Return all clients who have an employee with at least one job.
  def self.with_employee_jobs
    joins(employees: :jobs)
    # SQL: SELECT "clients".* FROM "clients" INNER JOIN "client_employees" ON "client_employees"."employer_id" = "clients"."id" INNER JOIN "jobs" ON "jobs"."contact_id" = "client_employees"."id" AND "jobs"."contact_type" = 'ClientEmployee'
  end

  # Return all clients who have at least one job.
  def self.with_jobs
    joins(:jobs)
    # SQL: SELECT "clients".* FROM "clients" INNER JOIN "jobs" ON "jobs"."contact_id" = "clients"."id" AND "jobs"."contact_type" = 'Client'
  end
end 
```

现在我需要做的就是将这两个方法调用合二为一`ActiveRecord::Relation`。我显然可以这样做：

```
 def self.with_commissioned_jobs
    with_jobs + with_employee_jobs
  end 
```

问题是它返回一个数组而不是一个实例，`Relation`我不能在它上面链接更多的范围。

**更新 2**：

使用`merge`似乎也不起作用。这是 AR 查询和生成的 SQL。

```
joins(:jobs).merge(joins(employees: :jobs))

SELECT "clients".* FROM "clients" INNER JOIN "jobs" 
  ON "jobs"."contact_id" = "clients"."id" 
  AND "jobs"."contact_type" = 'Client' 
  INNER JOIN "client_employees" 
  ON "client_employees"."employer_id" = "clients"."id" 
  INNER JOIN "jobs" "jobs_client_employees" 
  ON "jobs_client_employees"."contact_id" = "client_employees"."id" 
  AND "jobs_client_employees"."contact_type" = 'ClientEmployee' 
```

顺便说一句，这是我试图通过的测试。第一个测试失败，因为我使用合并时结果为零。

```
describe "with_commissioned_jobs" do
  # A client with a job.
  let!(:client_with) { create :client }
  let!(:job) { create :job, contact: client_with }
  # A client who does not himself have a job, but who has an employee
  # with a job.
  let!(:client_with_emp) { create :client }
  let!(:employee) { create :client_employee, employer: client_with_emp }
  let!(:emp_job) { create :job, contact: employee }
  # A client with nothing. Should not show up.
  let!(:client_without) { create :client }

  it "should return clients with jobs and clients with employee jobs" do
    Client.with_commissioned_jobs.should == [client_with, client_with_emp]
  end

  it "should return a relation" do
    Client.with_commissioned_jobs.should be_instance_of(ActiveRecord::Relation)
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T12:38:02.463

试试这个 ：

```
 joins( :jobs, {employees: :jobs} ) 
```

它应该加入客户的工作以及客户员工的工作。有关更详尽的信息，请参阅[指南。](http://edgeguides.rubyonrails.org/active_record_querying.html#using-array-hash-of-named-associations)

**编辑**

在您的情况下，您可以使用`Relation.merge`：

```
 joins( :jobs ).merge( joins(employees: :jobs) ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T18:15:42.283

您是否考虑过 gem [meta_where](https://github.com/ernie/meta_where)？主要的事情似乎是您想返回一个`ActiveRecord:Relation`对象以进行进一步的链接。

**更新 2**：让它`LEFT OUTER JOIN`使用别名工作两次

```
 # scope for ::Client
  def self.with_commissioned_jobs
    self.joins("LEFT OUTER JOIN client_employees ON clients.id =client_employees.client_id").
        joins("LEFT OUTER JOIN jobs AS cjobs ON clients.id = cjobs.contact_id AND cjobs.contact_type = 'Client'").
        joins("LEFT OUTER JOIN jobs AS ejobs ON client_employees.id = ejobs.contact_id AND ejobs.contact_type = 'ClientEmployee'").
        where("cjobs.id IS NOT NULL OR ejobs.id IS NOT NULL")
  end 
```

看看它是否有效：

```
 #c1 has no job
    c1 = Client.create

    #c2 has a job
    c2 = Client.create
    c2.jobs.create

    #c3 has no job, but has an employee with a job
    c3 = Client.create
    c3.employees.create
    c3.employees.first.jobs.create

    puts Client.all.inspect             #=> [#<Client id: 1>, #<Client id: 2>, #<Client id: 3>] 
    puts Client.with_commissioned_jobs  #=> [#<Client id: 2>, #<Client id: 3>]

    puts [c2,c3] == Client.with_commissioned_jobs.all    #=> true 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T18:20:09.453

你有坚持使用多态性的重要理由吗？

如果 ClientEmployee 总是有一个 Client，也许你应该有`Job.belongs_to :client`. 这让你们的关系变得非常简单。我发现添加一些冗余关联也可以是很好的性能优化，只要它不会使您的记录保持连贯性变得更加困难（即 Client/ClientEmployee 关系与 Job.Client/Job.ClientEmployee 分配同步时两者都存在）。

我真的很喜欢 Rails 中的多态性，但是当您尝试像本例那样跨它们连接时，它会变得很棘手。即使您有单独的 Client 和 ClientEmployee id，这在数据库中也会更有效（两个整数与整数和字符串）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T22:56:16.677

```
class Client < ActiveRecord::Base
  has_many :jobs, as: :contact
  has_many :employees, class_name: 'ClientEmployee'

  scope :with_commissioned_jobs, lambda do
    includes(:jobs, {:employees => :jobs}).where("jobs.contact_type IS NOT NULL AND jobs.contact_id IS NOT NULL")
  end
end 
```

好的，我从实际工作应用程序中做出的另一个决定。老派帮你。:)

这个方法只是为 AR:Relation 为多态的东西创建数组条件。

```
module ActiveRecordHelper

  def self.polymorphic_sql(*args)
    conditions = []
    table = args.first.table_name
    stack = args.extract_options!
    sql_queries = stack.collect do |as_resource, hash|
      resource_queries = hash.collect do |name, find_options|
        resource_class = name.to_s.classify.constantize
        resource_table = resource_class.table_name
        conditions << resource_class.name
        if find_options[:conditions].present?
          conditions += find_options[:conditions][1..-1]
        end
        joins_clause =
        Array.wrap(find_options[:join]).collect do |association|
          reflection = resource_class.reflections[association]            
          if reflection.macro == :belongs_to && reflection.options[:polymorphic] != true
            "INNER JOIN #{reflection.klass.table_name} ON #{reflection.active_record.table_name}.#{reflection.foreign_key} = #{reflection.klass.table_name}.id"
          elsif reflection.macro.in?([:has_many, :has_one]) && reflection.options[:as].nil?
            "INNER JOIN #{reflection.klass.table_name} ON #{reflection.klass.table_name}.#{reflection.foreign_key} = #{reflection.active_record.table_name}.id"
          end
        end.compact.join(" ").strip
        "(#{table}.#{as_resource}_type = ? AND EXISTS(#{["SELECT 1 FROM #{resource_table}#{joins_clause.left_indent(1) if joins_clause.present?} WHERE #{resource_table}.id = #{table}.#{as_resource}_id", find_options[:conditions].first].compact.join(" AND ")}))"
      end
      "CASE WHEN #{table}.#{as_resource}_type IS NOT NULL AND #{table}.#{as_resource}_id IS NOT NULL THEN #{resource_queries.join(" OR ")} ELSE TRUE END"
    end
    conditions.insert(0, "(#{sql_queries.join(" OR ")})")
  end

end 
```

然后扩展您的多态作业：

```
def self.comissioned_by(client)
  conditions = ActiveRecordHelper.polymorphic_sql(self, :contact => {:client => {:conditions => ["clients.id = ?", client.id]}, :client_employee => {:conditions => ["client_employees.client_id = ?", client.id]}}
  where(conditions)
end 
```

现在调用：

```
Job.commissioned_by()  # pass client instance 
```

享受。如果需要任何详细信息，请键入我。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-11T19:17:48.863

您是否尝试过自定义加入？

```
def self.with_commissioned_jobs
  query = <<-QUERY
    INNER JOIN client_employees 
    ON client_employees.employer_id = clients.id 
    INNER JOIN jobs 
    ON ((jobs.contact_id = client_employees.id AND jobs.contact_type = 'ClientEmployee') 
      OR (jobs.contact_id = clients.id AND jobs.contact_type = 'Client'))
  QUERY

  joins(query)
end 
```

# ruby - 使用 ruby 确定是否转发了收到的电子邮件

> ID：13624241
> 
> 赞同：0
> 
> 时间：2012-11-29T10:58:48.010
> 
> 标签：ruby, parsing, email, email-client

想象一下，您使用[ruby​​ Mail gem](https://github.com/mikel/mail)接收并解析电子邮件。我需要能够确定电子邮件是否已被转发，并提取原始发件人和消息。我的意思是转发，因为某处的用户点击了他们的电子邮件客户端或网络邮件界面中的“转发”按钮。

我想我的问题是：

1.  对于电子邮件客户端应如何处理转发的消息，是否有任何具体规则？
2.  如果是这样，我在哪里可以找到它们？
3.  如果没有，是否有人愿意自愿向我转发来自各种不同电子邮件客户端的一些示例电子邮件，以便我可以构建可靠的转发电子邮件检测器和解析器（示例将被匿名化，检测器/解析器将作为 ruby​​ 开源GitHub上的宝石）？

干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T11:10:55.037

1.  是的，他们应该附上转发的电子邮件或将其包含在正文中
2.  您需要自己解析电子邮件并尝试检测到它。
3.  我没有这个……对不起！

每个电子邮件客户端都可以为所欲为。因此，即使您今天创建了一个检测器/解析器，明天使用新版本的 Outlook/thunderbird 也可能不会匹配。

# geolocation - 有效地找到边界框内的所有地方（按纬度/经度）

> ID：13624248
> 
> 赞同：0
> 
> 时间：2012-11-29T10:59:06.187
> 
> 标签：geolocation, geocoding

我有一个包含“地方”的表格，每个地方都有它的名字（pk）和纬​​度，lng。给定一个坐标边界框（lat/lng 周长），什么是仅检索该框中位置的**有效方法？**

我可以（并且目前确实）遍历*所有*地方并检查每个地方是否都在框内。但是，我正在寻找更有效的东西；也许构建一些索引来通过它们的位置/可能的框来定义位置。

我正在使用 Django 框架，但也对任何较低级别的优化持开放态度（也许在 SQL 级别）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T11:03:49.297

如果您要在数据库上进行地理空间查询，您应该使用[空间数据库](http://en.wikipedia.org/wiki/Spatial_database) 所有主要的数据库系统都支持它或具有扩展以添加对此的支持。

一旦你得到一个空间数据库，你将你的坐标存储为 ST_POINT 并且数据库以一种让你进行有效查询的方式对它们进行索引（在多边形中，在范围内等）

# wcf - 我希望我的 WCF 服务使用我的 Web 应用程序配置文件，该文件根据品牌为多个客户端提供多个配置文件

> ID：13624251
> 
> 赞同：1
> 
> 时间：2012-11-29T10:59:15.563
> 
> 标签：wcf

我的 Web 应用程序托管在具有多个配置文件（每个客户端每个主题）的 Web 服务器上。所以我的连接字符串被放置在每个主题的 theme.config 中。

我们已经为例如主题映射了目录（xxx.abc.com 将选择主题 xxx）

我有 WCF 服务，它有自己的 web 配置文件和一个连接字符串，现在我希望我的 WCF 使用我托管的 web 应用程序的 theme.config 作为连接字符串。

我想在云上托管我的（Web 应用程序和 WCF）。

我在网上阅读了几篇关于 WebConfigurationFileMap 的文章，但不明白如何使用我的 WCF 服务来实现。

需要帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T11:08:28.417

要实现配置文件重用，将 Web 应用程序连接字符串分离到单独的配置文件中，并将配置源链接放在 WCF 服务配置文件中，指向连接字符串配置：

```
<connectionStrings configSource="(path to config)\connectionStrings.config" /> 
```

# android - 模拟器上不显示openstreet地图

> ID：13624252
> 
> 赞同：0
> 
> 时间：2012-11-29T10:59:15.843
> 
> 标签：android

我使用了开放的街道地图，但地图没有显示在模拟器上请帮助我做什么/我按照本教程[http://www.yousaytoo.com/example-of-implementing-openstreetmap-on-android-using-osmdroid /2807838](http://www.yousaytoo.com/example-of-implementing-openstreetmap-on-android-using-osmdroid/2807838) 并将 jar 文件保存在模拟器上的 lib 文件夹应用程序中，就像这个图像一样，其 url 是[http://imgur.com/rLuVk](http://imgur.com/rLuVk) 但地图没有显示在模拟器上请帮助我

这是我下面的所有源代码

```
 package com.android_osmdroid;

 import org.osmdroid.DefaultResourceProxyImpl;
 import org.osmdroid.ResourceProxy;
 import org.osmdroid.util.GeoPoint;
import org.osmdroid.views.MapView;

import android.os.Bundle;
  import android.app.Activity;
   import android.graphics.drawable.Drawable;

   public class MainActivity extends Activity {

  MyItemizedOverlay myItemizedOverlay = null;

 @Override
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    MapView mapView = (MapView) findViewById(R.id.mapview);
    mapView.setBuiltInZoomControls(true);

    Drawable marker=getResources().getDrawable(android.R.drawable.star_big_on);
    int markerWidth = marker.getIntrinsicWidth();
    int markerHeight = marker.getIntrinsicHeight();
    marker.setBounds(0, markerHeight, markerWidth, 0);

    ResourceProxy resourceProxy = new  
   DefaultResourceProxyImpl(getApplicationContext());

    myItemizedOverlay = new MyItemizedOverlay(marker, resourceProxy);
    mapView.getOverlays().add(myItemizedOverlay);

    GeoPoint myPoint1 = new GeoPoint(0*1000000, 0*1000000);
    myItemizedOverlay.addItem(myPoint1, "myPoint1", "myPoint1");
    GeoPoint myPoint2 = new GeoPoint(50*1000000, 50*1000000);
    myItemizedOverlay.addItem(myPoint2, "myPoint2", "myPoint2");

 } 

 }

          package com.android_osmdroid;

        import java.util.ArrayList;

      import org.osmdroid.ResourceProxy;
       import org.osmdroid.api.IMapView;
   import org.osmdroid.util.GeoPoint;
    import org.osmdroid.views.overlay.ItemizedOverlay;
      import org.osmdroid.views.overlay.OverlayItem;

      import android.graphics.Point;
     import android.graphics.drawable.Drawable;

      public class MyItemizedOverlay extends ItemizedOverlay<OverlayItem> {

        private ArrayList<OverlayItem> overlayItemList = new ArrayList<OverlayItem>();

    public MyItemizedOverlay(Drawable pDefaultMarker,
  ResourceProxy pResourceProxy) {
    super(pDefaultMarker, pResourceProxy);
   // TODO Auto-generated constructor stub
   }

    public void addItem(GeoPoint p, String title, String snippet){
   OverlayItem newItem = new OverlayItem(title, snippet, p);
    overlayItemList.add(newItem);
     populate(); 
   }

  @Override
    public boolean onSnapToItem(int arg0, int arg1, Point arg2, IMapView arg3) {
    // TODO Auto-generated method stub
  return false;
  }

     @Override
   protected OverlayItem createItem(int arg0) {
      // TODO Auto-generated method stub
      return overlayItemList.get(arg0);
     }

     @Override
     public int size() {
 // TODO Auto-generated method stub
     return overlayItemList.size();
     }

 }

        <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
   xmlns:tools="http://schemas.android.com/tools"
  android:layout_width="match_parent"
    android:layout_height="match_parent" >

  <TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"

    android:text="@string/hello_world"
    tools:context=".MainActivity" />

<org.osmdroid.views.MapView
    android:id="@+id/mapview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:clickable="true"/>

     </RelativeLayout>

  <manifest xmlns:android="http://schemas.android.com/apk/res/android"
 package="com.android_osmdroid"
 android:versionCode="1"
 android:versionName="1.0" >

 <uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />
 <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>

      </manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T13:01:21.903

您还可以向模拟器设备添加存储以显示地图。否则它只能在硬设备中工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T11:23:19.390

您可以为地图视图设置默认缩放值。你可以看看[这个](https://stackoverflow.com/a/4146943/1627599)

# html - Google Chrome 中自动保存的表单数据

> ID：13624253
> 
> 赞同：2
> 
> 时间：2012-11-29T10:59:18.633
> 
> 标签：html, internet-explorer, firefox, google-chrome

有朋友问我，当我们在表单中输入一些信息或数据，然后点击网站中的一个链接（不是提交，而是另一个打开新页面的链接）然后返回到表单时，我们可以找到为我们输入的这些信息。

为什么我们在 Internet Explorer 或 Mozilla Firefox 中没有这种情况，我们可以返回上一页并输入最后输入的信息？只能在谷歌浏览器上吗？

# r - 如何使用 rpy2 在两个列表上执行 Wilcox 测试而不会有时出现错误：“没有足够的（有限）'x'观察”

> ID：13624259
> 
> 赞同：0
> 
> 时间：2012-11-29T05:04:57.127
> 
> 标签：r, python

我有一些支持 AB 测试的 python/rpy2 代码，通常成功地在两个浮动值列表（以美元为单位的捐赠）上运行 Wilcox 测试。但有时它会引发以下错误：

```
File "/usr/lib/python2.6/dist-packages/rpy2/robjects/__init__.py", line 423, in __call__
res = super(RFunction, self).__call__(*new_args, **new_kwargs)
rinterface.RRuntimeError: Error in wilcox.test.default(numeric(0), numeric(0)) : 
not enough (finite) 'x' observations 
```

这是代码。rs 是 mysql 查询的结果。金额值都是从 1 到 1000 的非空值——但几乎都是从 5 到 50。

```
a1 = []
a2 = []
r = robjects.r
for row in rs: 
    if row['banner'] == bans[1]:
        a1.append(row['amount'] )
    else:
        a2.append( row['amount'] )
v1 = robjects.FloatVector(a1)
v2 = robjects.FloatVector(a2)
wilcox_result =  r['wilcox.test'](v1, v2) 
print  "Wilcox test of means p= %.6f" % wilcox_result[2][0] # the p-value 
```

它适用于我大约 60% 的 ab 测试。但是在其余部分给出了这个错误。我没有注意到数据中可能导致错误的任何模式。而且我找不到任何关于 rpy2 错误的文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T10:23:10.587

`RRuntimeError`异常报告来自 R 的错误消息。这里是：

> wilcox.test.default（数字（0），数字（0））中的错误：没有足够的（有限）'x'观察

这意味着在 40% 的测试中（因为您报告了 60% 的成功）a1 或 a2（甚至可能两者都有）没有任何数值（长度为 0 的向量，您可以使用它来测试`if len(a1)==0 or len(a2)==0`以跟踪问题，或所有值都是 NAs、Infinite 或 NaN）

# objective-c - RestKit 无法处理一个条目的数组

> ID：13624264
> 
> 赞同：0
> 
> 时间：2012-11-29T11:00:06.180
> 
> 标签：objective-c, json, restkit

我收到的 JSON：

1：

```
{"days":1, "name":"Hans Sarpei"} 
```

2：

```
{"days":[1,2], "name":"Max Meier"} 
```

对象映射：

```
RKObjectMapping* map = [RKObjectMapping mappingForClass:[self class] ];
[map mapAttributes:@"name", @"days", nil]; 
```

天：

```
@property(strong) NSArray *days; 
```

如果我收到第二个 JSON 字符串，一切正常。我的天数数组中有 1 和 2。但是如果我收到第一个 JSON 字符串，我的数组是空的。

我收到以下警告：

```
W restkit.object_mapping:RKObjectMappingOperation.m:239 Failed transformation of value at keyPath 'days'. No strategy for transforming from '__NSCFNumber' to 'NSArray' 
```

为什么 Restkit 不能将其作为数组处理，有什么解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T09:22:59.160

这是 RestKit 中的一个错误，将在下一个版本中修复。

[https://github.com/RestKit/RestKit/issues/1046](https://github.com/RestKit/RestKit/issues/1046)

# xslt - 如何在 XSL FO 中将长字符串切割成固定长度的行？

> ID：13624266
> 
> 赞同：0
> 
> 时间：2012-11-29T11:00:09.743
> 
> 标签：xslt, xsl-fo

这只是信息共享。我已经知道解决方案了：）我很难做到！我在这里想要两件事：

1.  分享我到目前为止所达到的。
2.  想知道是否有人有更好的解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T11:43:34.683

没有源 XML 就很难判断。但是我曾经有一个需求并使用了递归模板。

我的输入 XML 是：

```
<?xml version="1.0" encoding="UTF-8"?>
<Order>
<Item>
    <RECORD_ID>RECORD_ID</RECORD_ID>
    <ENTITY_CODE>ENTITY_CODE</ENTITY_CODE>
    <USER_CODE>USER_CODE</USER_CODE>
    <RECORD_DATE>RECORD_DATE</RECORD_DATE>
    <ITEM_CODE>ITEM_CODE</ITEM_CODE>
    <LINE_QUANTITY>LINE_QUANTITY</LINE_QUANTITY>
    <LINE_PRICE>LINE_PRICE</LINE_PRICE>
    <LINE_DISCOUNT_PERCENT>LINE_DISCOUNT PERCENT</LINE_DISCOUNT_PERCENT>
    <HEADER_SPECIAL_INSTRUCTIONS>HEADER_SPECIAL_INSTRUCTIONS</HEADER_SPECIAL_INSTRUCTIONS>
</Item>
<Item>
    <RECORD_ID>1850</RECORD_ID>
    <ENTITY_CODE>I65647</ENTITY_CODE>
    <USER_CODE>135</USER_CODE>
    <RECORD_DATE>2011-05-27</RECORD_DATE>
    <ITEM_CODE>798159</ITEM_CODE>
    <LINE_QUANTITY>1</LINE_QUANTITY>
    <HEADER_SPECIAL_INSTRUCTIONS>HEADER_SPECIAL_INSTRUCTIONS HEADER_SPECIAL_INSTRUCTIONS HEADER_SPECIAL_INSTRUCTIONS HEADER_SPECIAL_INSTRUCTIONS</HEADER_SPECIAL_INSTRUCTIONS>
</Item>
</Order> 
```

我不得不拆分特殊说明文本，但仅限于`<Item>`元素 > 1。所以我想出了这个模板：

```
 <xsl:template name="Texts">
    <xsl:param name="string" select="Item[2]/HEADER_SPECIAL_INSTRUCTIONS" />
    <xsl:param name="line-length" select="70"/>
    <xsl:variable name="line" select="substring($string,1,$line-length)"/>
    <xsl:variable name="rest" select="substring($string, $line-length+1)"/>
    <xsl:if test="$line">
        <E1EDKT2 SEGMENT="1">
            <TDLINE> 
                <xsl:value-of select="$line"/>
            </TDLINE> 
            <TDFORMAT>*</TDFORMAT> 
        </E1EDKT2>
    </xsl:if>
    <xsl:if test="$rest">
        <xsl:call-template name="Texts">
            <xsl:with-param name="string" select="$rest"/>
            <xsl:with-param name="line-length" select="$line-length"/>
        </xsl:call-template>
    </xsl:if>   
</xsl:template> 
```

该模板的 XML 输出为：

```
<?xml version="1.0" encoding="UTF-8"?>
<E1EDKT1 SEGMENT="1">
<TDID>ZA01</TDID>
<E1EDKT2 SEGMENT="1">
    <TDLINE>HEADER_SPECIAL_INSTRUCTIONS HEADER_SPECIAL_INSTRUCTIONS
        HEADER_SPECIAL</TDLINE>
    <TDFORMAT>*</TDFORMAT>
</E1EDKT2>
<E1EDKT2 SEGMENT="1">
    <TDLINE>_INSTRUCTIONS HEADER_SPECIAL_INSTRUCTIONS</TDLINE>
    <TDFORMAT>*</TDFORMAT>
</E1EDKT2>
</E1EDKT1> 
```

由于我不知道您的源 XML - 您应该始终提供（至少是一个小的代表性版本） - 我无法以任何方式修复您的 XSLT。但请尝试根据您的需要调整我的模板。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T11:00:09.743

```
<xsl:template name="break-to-length">
    <xsl:param name="text" />
    <xsl:param name="length" />

    <xsl:variable name="first-half" select="substring($text,0,$length)" />
    <xsl:variable name="second-half" select="substring-after($text, $first-half)" />

    <xsl:variable name="last-five-chars-of-first-half" select="substring-after($first-half,substring($first-half, 0, $length - 5))" />

    <xsl:variable name="alternative-first-half">
        <xsl:choose>
            <xsl:when test="contains($last-five-chars-of-first-half, $space)">
                <xsl:value-of select="concat(substring($first-half, 0, $length - 5), substring-before($last-five-chars-of-first-half, $space))" />
            </xsl:when>
            <xsl:when test="contains($last-five-chars-of-first-half, $dot)">
                <xsl:value-of select="concat(substring($first-half, 0, $length - 5), substring-before($last-five-chars-of-first-half, $dot), $dot)" />
            </xsl:when>
            <xsl:otherwise>
                <xsl:value-of select="$first-half" />
            </xsl:otherwise>
        </xsl:choose>
    </xsl:variable>

    <xsl:variable name="alternative-second-half">
        <xsl:choose>
            <xsl:when test="contains($last-five-chars-of-first-half, $space)">
                <xsl:value-of select="concat(substring-after($last-five-chars-of-first-half, $space), $second-half)" />
            </xsl:when>
            <xsl:when test="contains($last-five-chars-of-first-half, $dot)">
                <xsl:value-of select="concat(substring-after($last-five-chars-of-first-half, $dot), $second-half)" />
            </xsl:when>
            <xsl:otherwise>
                <xsl:value-of select="$second-half" />
            </xsl:otherwise>
        </xsl:choose>
    </xsl:variable>

    <!-- if first half doesn't end with a space or dot -->
    <xsl:variable name="word-was-cut" select="$alternative-first-half = $first-half" />

    <xsl:value-of select="$alternative-first-half" />

    <xsl:choose>
        <xsl:when test="string-length($alternative-second-half) = 0">
            <!-- Do Nothing -->
        </xsl:when>
        <xsl:when test="string-length($alternative-second-half) &lt; $length">
            <!-- if first half doesn't end with a space or dot -->
            <xsl:if test="$word-was-cut">
                <xsl:text>-</xsl:text>
            </xsl:if>
            <fo:block />
            <xsl:value-of select="$alternative-second-half" />
        </xsl:when>
        <xsl:otherwise>
            <!-- Second half is longer than max length -->
            <!-- if first half doesn't end with a space -->
            <xsl:if test="$word-was-cut">
                <xsl:text>-</xsl:text>
            </xsl:if>
            <fo:block />
            <xsl:call-template name="break-to-length">
                <xsl:with-param name="text" select="$alternative-second-half"/>
                <xsl:with-param name="length" select="$length" />
            </xsl:call-template>
        </xsl:otherwise>
    </xsl:choose>
</xsl:template> 
```

# objective-c - NSURL 隐藏方法 queryParameters 可能会覆盖类别

> ID：13624267
> 
> 赞同：5
> 
> 时间：2012-11-29T11:00:12.567
> 
> 标签：objective-c, ios, categories, nsurl

我有这种奇怪的行为，其中我的一个类别方法在带有 iOs 5.1 的 iPhone 3Gs 上运行时被覆盖。

我有这个类别：

```
@interface NSURL (queryParameters)
    - (NSDictionary *) queryParameters;
@end 
```

它返回一个带有 NSString 键和 NSArray 值的字典（我的 url 中具有相同名称的多个参数）。

它工作正常，除了在上面提到的设备上，我得到一个以 NSString 作为值的 NSDictionary，而不是我期望的 NSArray（对应于我的 url 中的最后一个参数）。

我创建了一个空项目，在其中构建了一个虚拟 NSURL，并发现它响应选择器“queryParameters”，并返回一个以 NSString 作为值的 NSDictionary：

```
NSString *urlString = @"http://dummy.url?foo=bar1&foo=bar2";
NSURL *url = [NSURL URLWithString:urlString];

NSLog(@"%@", [url respondsToSelector:@selector(queryParameters)]?@"YES":@"NO");
    // YES

NSLog(@"%@", [[url performSelector:@selector(queryParameters)] debugDescription]);
    // {
    //     foo = bar2;
    // } 
```

所以我有两个问题：

*   有人知道这种方法是否属于 Apple 私有 api（或其他任何东西）吗？

**编辑：**根据这个页面[iOS6-Private-Frameworks](https://github.com/mattlawer/iOS6-Private-Frameworks/blob/master/TelephonyUtilities/NSURL-QueryParameters.h)，这个“queryParameters”是一个未记录的 NSURL 方法（但这并不能解释为什么在某些情况下它被覆盖）。

*   为什么我的“自己的”方法被这种“私有”方法覆盖？

备注：我最终重命名了自己的方法以避免这种冲突。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T13:40:03.470

我认为这里的约定也是在不受您控制的类上为您的类别方法添加前缀，以避免任何名称冲突！

# android - 平板电脑（4.0.3）在手机（2.2.3）工作时停止发布到服务器

> ID：13624270
> 
> 赞同：0
> 
> 时间：2012-11-29T11:00:13.993
> 
> 标签：android, post

我发现我的带有 android 4.0.3 的平板电脑停在这里，而我的带有 2.2.3 的手机在此代码上工作，但我不知道为什么：

我想不出平板电脑和手机编码之间的区别，有人吗？

```
/* Store this device macaddress within the server. */
    static void storeMacAddress(final Context context, final String macAddr) { 
        Log.i(TAG, "Store device on Server (macAddress = " + macAddr + ")");
        String serverUrl = SERVER_URLL;
        Map<String, String> params = new HashMap<String, String>();
        params.put("macaddress", macAddr);

        long backoff = BACKOFF_MILLI_SECONDS + random.nextInt(1000);
        // As the server might be down, we will retry it a couple times.
        for (int i = 1; i <= MAX_ATTEMPTS; i++) {
            Log.d(TAG, "Attempt #" + i + " to store");
            try {
                post(serverUrl, params);
                Log.d(TAG, "Store op Server gelukt!");
                return;
            } catch (IOException e) {
                // Here we are simplifying and retrying on any error
                Log.e(TAG, "Failed to store on attempt " + i + ":" + e);
                if (i == MAX_ATTEMPTS) {
                    break;
                }
                try {
                    Log.d(TAG, "Sleeping for " + backoff + " ms before retry");
                    Thread.sleep(backoff);
                } catch (InterruptedException e1) {
                    // Activity finished before we complete - exit.
                    Log.d(TAG, "Thread interrupted: abort remaining retries!");
                    Thread.currentThread().interrupt();
                    return;
                }
                // increase backoff exponentially
                backoff *= 2;
            } 
        }

        Log.d(TAG, "Error tijdens store op Server procedure!");        
    }

private static void post(String endpoint, Map<String, String> params)
            throws IOException {    

        URL url;
        try {
            url = new URL(endpoint);
        } catch (MalformedURLException e) {
            throw new IllegalArgumentException("invalid url: " + endpoint);
        }
        StringBuilder bodyBuilder = new StringBuilder();
        Iterator<Entry<String, String>> iterator = params.entrySet().iterator();
        // constructs the POST body using the parameters
        while (iterator.hasNext()) {
            Entry<String, String> param = iterator.next();
            bodyBuilder.append(param.getKey()).append('=')
                    .append(param.getValue());
            if (iterator.hasNext()) {
                bodyBuilder.append('&');
            }
        }
        String body = bodyBuilder.toString();
        Log.v(TAG, "Posting '" + body + "' to " + url);
        byte[] bytes = body.getBytes();
        HttpURLConnection conn = null;
        try {
            Log.e("URL", "> " + url);
            conn = (HttpURLConnection) url.openConnection();
            conn.setDoOutput(true);
            conn.setUseCaches(false);
            conn.setFixedLengthStreamingMode(bytes.length);
            conn.setRequestMethod("POST");
            conn.setRequestProperty("Content-Type",
                    "application/x-www-form-urlencoded;charset=UTF-8");
            // post the request
            OutputStream out = conn.getOutputStream();
            out.write(bytes);
            out.close();
            // handle the response
            int status = conn.getResponseCode();
            if (status != 200) {
              throw new IOException("Post failed with error code " + status);
            }
        } finally {
            if (conn != null) {
                conn.disconnect();
            }
        }
      } 
```

编辑：来自：

```
...    
setContentView(R.layout.activity_main);

            final SharedPreferences prefs = this.getSharedPreferences("nl.easy.winkel", Context.MODE_PRIVATE);

            if(!prefs.getString("macaddress","").equals("send")) { // Send MacAddress once
                prefs.edit().putString("macaddress","send").commit();
                obtainMacAddress();
            }

and 

    private void obtainMacAddress() {
            WifiManager wifiMan = (WifiManager) this.getSystemService(Context.WIFI_SERVICE);
            WifiInfo wifiInf = wifiMan.getConnectionInfo();
            String macAddr = wifiInf.getMacAddress();
            final Context context = this;
            ServerUtilities.storeMacAddress(context, macAddr + "|" + getLocalIpAddress());
    }

        public String getLocalIpAddress() {
            try {
                for (Enumeration<NetworkInterface> en = NetworkInterface.getNetworkInterfaces(); en.hasMoreElements();) {
                    NetworkInterface intf = en.nextElement();
                    for (Enumeration<InetAddress> enumIpAddr = intf.getInetAddresses(); enumIpAddr.hasMoreElements();) {
                        InetAddress inetAddress = enumIpAddr.nextElement();
                        if (!inetAddress.isLoopbackAddress()) {
                            return inetAddress.getHostAddress().toString();
                        }
                    }
                }
            } catch (SocketException ex) {
                Log.e(TAG, ex.toString());
            }
            return null;
        } 
```

EDIT2：使用 AsyncTask

```
AsyncTask<Void, Void, Void> mStoreTask;

private void obtainMacAddress() {
        WifiManager wifiMan = (WifiManager) this.getSystemService(Context.WIFI_SERVICE);
        WifiInfo wifiInf = wifiMan.getConnectionInfo();
        final String macAddr = wifiInf.getMacAddress();
        final Context context = this;

        mStoreTask = new AsyncTask<Void, Void, Void>() {

            @Override
            protected Void doInBackground(Void... params) {
                // Store on our server
                // On server creates a new user
                ServerUtilities.storeMacAddress(context, macAddr + "|" + getLocalIpAddress());
                return null;
            }

            @Override
            protected void onPostExecute(Void result) {
                mStoreTask = null;
            }

        };
        mStoreTask.execute(null, null, null);
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T11:02:50.987

这个问题有两个解决方案，但第一个是很好的解决方案。

1）不要在主 UI 线程中编写网络调用，为此使用异步任务。

2) 在 setContentView(R.layout.activity_main); 之后将以下代码写入 MainActivity 文件；但这不是正确的方法。

```
if (android.os.Build.VERSION.SDK_INT > 9) {
    StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
    StrictMode.setThreadPolicy(policy);
} 
```

并将下面的 import 语句放入您的 java 文件中。

```
import android.os.StrictMode; 
```

有关更多信息，请参见下面的链接。

[引起：android.os.NetworkOnMainThreadException](https://stackoverflow.com/questions/13136539/caused-by-android-os-networkonmainthreadexception)

# html - 如何：“用一行分隔表格行”

> ID：13624276
> 
> 赞同：60
> 
> 时间：2012-11-29T11:00:41.413
> 
> 标签：html, html-table

我有一个包含表格行的基本 HTML 表格。我的目标是用可见线分隔这些表格行（以提高内容的可读性）。

我怎么能这样做？

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-11-29T11:36:29.623

有几种方法可以做到这一点。单独使用 HTML，您可以编写

```
<table border=1 frame=void rules=rows> 
```

或者，如果您也想要第一行上方和最后一行下方的边​​框，

```
<table border=1 frame=hsides rules=rows> 
```

但是，这相当不灵活。例如，您不能使线条以这种方式点缀，或者比一个像素厚。这就是为什么过去人们使用特殊的分隔行，只包含一些旨在生成行的内容（它会有点脏，特别是当您需要制作行时，例如只有几个像素高，但这是可能的）。

在大多数情况下，现在人们使用 CSS`border`属性来达到目的。它相当简单且跨浏览器。但请注意，要使线条连续，您需要使用标签中的`cellspacing=0`属性或 CSS 规则来防止单元格之间的间距。*删除这样的间距可能需要在单元格内*添加一些填充（最好使用 CSS）。`table``table { border-collapse: collapse; }`

 *最简单的，你可以使用

```
<style>
table {
  border-collapse: collapse;
}
tr { 
  border: solid;
  border-width: 1px 0;
}
</style> 
```

这也会在第一行上方和最后一行下方放置一个边框。为了防止这种情况，例如在样式表中添加以下内容：

```
tr:first-child {
  border-top: none;
}
tr:last-child {
  border-bottom: none;
} 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-11-29T11:03:49.227

只需设置行的边框样式：

```
​table tr {
    border-bottom: 1px solid black;
}​

table tr:last-child { 
    border-bottom: none; 
} 
```

这是一个[小提琴](http://jsfiddle.net/tcwnR/)。

如@pkyeck 所述编辑。第二种样式避免了最后一行下方的行。也许你正在寻找这个。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-11-29T11:03:23.110

您可以使用`border-bottom`css 属性。

```
table {
  border-collapse: collapse;
}

table tr {
  border-bottom: 1px solid black;
}

table tr:last-child {
  border: 0;
}
```

```
<table>
  <tr>
    <td>1</td>
    <td>Foo</td>
  </tr>
  <tr>
    <td>2</td>
    <td>Bar</td>
  </tr>
</table>
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-11-29T11:11:58.533

你必须使用 CSS。

在我看来，当您经常有一张桌子时，最好在每条线的每一侧单独放置一条线。

试试这个代码：

HTML：

```
<table>
    <tr class="row"><td>row 1</td></tr>
    <tr class="row"><td>row 2</td></tr>
</table> 
```

CSS：

```
.row {
    border:1px solid black; 
} 
```

再见

安德烈亚

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-11-29T11:08:38.550

**HTML**

```
<table cellspacing="0">
  <tr class="top bottom row">
    <td>one one</td>
    <td>one two</td>
  </tr>
  <tr class="top bottom row">
    <td>two one</td>
    <td>two two</td>
  </tr>
  <tr class="top bottom row">
    <td>three one</td>
    <td>three two</td>
  </tr>

</table>​ 
```

**CSS**：

```
tr.top td { border-top: thin solid black; }
tr.bottom td { border-bottom: thin solid black; }
tr.row td:first-child { border-left: thin solid black; }
tr.row td:last-child { border-right: thin solid black; }​ 
```

**[演示](http://jsfiddle.net/chridam/P2GZX/)**

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-06-07T09:27:54.693

如果您不想使用 CSS，请在您的行之间尝试这个：

```
 <tr>
    <td class="divider"><hr /></td>
    </tr> 
```

干杯！！

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-11-29T11:02:12.363

使用 css 为行元素设置样式：

```
border-bottom: 1px solid black; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-05-29T07:38:13.927

将 colspan 设置为您的列数，并根据需要设置背景颜色

```
<tr style="background: #aaa;">
 <td colspan="2"></td>
</tr> 
```*

# vba - 调用具有多个参数的 Sub 时 VBA 返回错误

> ID：13624279
> 
> 赞同：20
> 
> 时间：2012-11-29T11:00:56.750
> 
> 标签：vba, excel

我试图弄清楚为什么在调用 a并为其提供多个参数时`VBA`返回错误。`(Compile error: Expected: =)``Sub`

```
Sub customerController(cleanStructure As Boolean, firstCol As Integer, latCol As Integer, _
                    lngCol As Integer, Optional startRow As Long, Optional endRow As Long)

Dim i As Long, j As Long, n As Long

If (cleanStructure = False) Then
    'customer data type
    If (startRow = "") Then i = 1
    If (endRow = "") Then j = countRows
    For n = i To j - i + 1
        generateURL(n, firstCol)
        newReadXMLData (url)
        ActiveSheet.Cells(i, latCol).Value = lat
        ActiveSheet.Cells(i, lngCol).Value = lng
    Next
End If

End Sub 
```

`Sub`我正在调用的需要两个参数：

```
Sub generateURL(row As Long, column As Long) 
```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-11-29T11:16:28.373

当调用超过 1 个参数（即`generateURL(n)`正常工作）时，您需要使用

*   `Call generateURL(n, firstCol)`， 或者
*   `generateURL n, firstCol`

using`Call`是更好的编程技术，因为[它更清晰](https://msdn.microsoft.com/en-us/library/sxz296wz(v=vs.80).aspx)

根据 MSDN：

> 通常使用 Call 语句来调用不返回值的过程。如果过程返回一个值，则 Call 语句将其丢弃。调用过程时不需要使用 Call 语句。但是，**它提高了代码的可读性**。

# ruby-on-rails - Rails 应用程序中的嵌套路由可以成为 Backbone.js 应用程序的根 url 吗？

> ID：13624284
> 
> 赞同：0
> 
> 时间：2012-11-29T11:01:13.513
> 
> 标签：ruby-on-rails, backbone.js

我正在尝试完成我的第一个基于 Rails 的骨干应用程序。Base webapp 用于管理锦标赛（注册、玩家等）。

所以我有像 /tournaments/tournament_id/(players | registrations | results ) 这样的网址

我想创建主干应用程序来处理特定锦标赛的管理过程，特别是：配对，生成回合更改，即时删除和添加玩家。Backbone 将使其快速、美观且用户友好。

此外，能够同时处理多个锦标赛也很重要，因为该应用程序应该服务于不同城市的锦标赛在同一天发生的国家联赛。

所以我想在 /tournaments/tournament_id/play 上开始骨干。我初始化它没有问题，但是主干操作无法正常工作。索引正在寻找 '/' url，其余操作也由 .../../play/ 触发

我的路由器应该如何使它工作？Backbone 可以吗？

我寻找答案，但所有教程都是关于单页应用程序，这些应用程序仅构建在 Rails 服务器上，不与纯 Rails webapp 共存。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T18:04:40.840

您可以通过更改使用`Backbone.history`.

```
Backbone.history.start({pushState : true, root : "/tournaments/<some-id>/play"}); 
```

然后你所有的路线都将挂在那个根上。

[http://backbonejs.org/#History-start](http://backbonejs.org/#History-start)

# eclipse - 出内存 FLEX 3 中的错误

> ID：13624288
> 
> 赞同：0
> 
> 时间：2012-11-29T11:01:29.003
> 
> 标签：eclipse, apache-flex, flex3, flexbuilder

朋友们

在 Flex3 中编译应用程序时，我的 flex 命令中出现了一个紧急问题，并给出了附加的错误图像。

错误：发生内存不足错误。请参阅自述文件的“运行 Eclipse”部分，以获取有关防止将来出现此类错误的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T11:10:19.090

根据您的描述，您似乎遇到了内存不足错误。如果是这样，您必须增加分配给 java 进程的内存。

为此，请编辑 eclipse 文件夹中的 eclipse.ini 文件并添加`-Xmx`带有值的参数，例如`-Xmx1024m`允许 Java 使用最多 1Gb 内存的示例。

您也可以将此参数添加到您的 JAVA_OPTS

# c# - WPF DataGrid 正在添加额外的“幽灵”行

> ID：13624289
> 
> 赞同：7
> 
> 时间：2012-11-29T11:01:29.130
> 
> 标签：c#, datagrid, observablecollection

嘿，

在我的应用程序中，我使用 DataGrid 来显示一些数据。为了让所有线程都工作，我将[`AsyncObservableCollection`](http://www.thomaslevesque.com/2009/04/17/wpf-binding-to-an-asynchronous-collection/)其用作 DataGrid 的 DataContext。当我的应用程序启动时，它会在某些文件夹中查找文件并进行更新`AsyncObservableCollection`。查找文件是在一个单独的线程上完成的：

```
Task.Factory.StartNew(() => _cardType.InitAllOrdersCollection())
    .ContinueWith((t) => ThrowEvent(), TaskContinuationOptions.None); 
```

所有加载逻辑都在`InitAllOrdersCollection()`方法中。

现在事情变得糟糕了，当我出于某种原因启动应用程序时，即使集合中有一个项目而文件夹中只有一个文件，我也会在 DataGrid 中获得 2 行具有相同数据的行。`Thread.Sleep()`如果我在加载文件之前添加延迟（最少 50 毫秒），那么 DataGrid 会正确显示所有内容（没有额外的行）。延迟必须添加到加载文件的线程（使用创建的文件`Task.Factory.StartNew()`）。

有没有人遇到过类似的事情，或者还有什么我应该尝试的吗？提前致谢！

编辑：根据要求添加一些代码：

```
public AsyncObservableCollection<IGridItem> OrdersCollection = new AsyncObservableCollection<IGridItem>();

public void InitAllOrdersCollection()
{
    // Thread.Sleep(50); <-- this sleep here fixes the problem!
    foreach (var convention in FileNameConventions)
    {
        var namePatterns = convention.NameConvention.Split(',');
        foreach (var pattern in namePatterns)
        {
            var validFiles = CardTypeExtensions.GetFiles(this.InputFolder, pattern, convention);
            if (validFiles.Any())
            {
                this.FilesToOrders(validFiles, convention);
            }
        }
    }
}

public static List<string> GetFiles(string inputFolder, string pattern, FileNameConvention convention)
{
    var files = Directory.GetFiles(inputFolder, pattern);
    return files.Where(file => IsCorrect(file, convention)).AsParallel().ToList();
}

// Adds new order to OrdersCollection if its not there already!
private void FilesToOrders(List<string> dirFiles, FileNameConvention convention)
{
    foreach (var dirFile in dirFiles.AsParallel())
    {
        var order = new Order(dirFile, this, convention);

        if (!this.OrdersCollection.ContainsOrder(order))
        {
                this.OrdersCollection.Add(order);
        }
    }
}

public static bool ContainsOrder(this ObservableCollection<IGridItem> collection, Order order)
{
    return collection.Cast<Order>().Any(c=>c.Filepath == order.Filepath);
} 
```

`FilesToOrders()`方法是将新订单添加到`AsyncObservableCollection`. 希望这可以帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-01-09T23:19:45.140

添加`CanUserAddRows="False"`到您的 XAML 文件

```
<DataGrid CanUserAddRows="False"../> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-03T17:54:13.347

也许我遗漏了一些明显的东西，但是`AsyncObservableCollection`您发布的链接中的实现对我来说看起来不是线程安全的。

我可以看到它包含在创建者（消费者）线程上触发 CollectionChanged / PropertyChanged 事件的代码，但我没有看到任何同步以使访问集合线程中的项目是线程安全的。

**更新**

据我所见，您可以同时发生以下情况，而无需任何同步：

*   工人（生产者）线程正在插入项目

*   UI（消费者）线程正在枚举项目

一种可能性可能是修改`AsyncObservableCollection.InsertItem`调用`SynchronizationContext.Send`以在消费者线程上插入项目，尽管这当然会对性能产生影响（生产者在继续之前等待消费者线程完成插入）。

另一种方法是使用`ObservableCollection`仅在消费者线程上访问的标准，并用于`SynchronizationContext.Post`发布项目以从生产者线程插入。就像是：

```
foreach (var dirFile in dirFiles.AsParallel())
{
    var order = new Order(dirFile, this, convention);

    _synchronizationContext.Post(AddItem, order);

} 
```

...

```
void AddItem(object item)
{
    // this is executed on the consumer thread
    // All access to OrderCollection on this thread so no need for synchnonization
    Order order = (Order) item;
    if (!OrdersCollection.ContainsOrder(order))
    {
        OrdersCollection.Add(order);
    }
} 
```

# objective-c - UITableView 中的 UIWebView 隐藏单元格

> ID：13624295
> 
> 赞同：1
> 
> 时间：2012-11-29T11:01:51.873
> 
> 标签：objective-c, ios, uitableview, uiwebview, resize

我有一个`UIWebView`in `UITableView`，我在故事板上有这个：

![故事板设计](../Images/fb8c2b71c3b88211010a8ff38f89f277.png)

这`UIImageView`是我未来的 NavBar 并且`UIWebView`在 中`UITableView`，我有这样的配置：

*   -`UIImageView`
*   -`UITableView`
*   *   *   -`UIWebView`
*   *   *   -`UITableViewCell`

当`UIWebView`加载页面（我有本地页面）时，我希望它动态地获取它们的大小，为此我有这个代码：

```
[detailWebView setFrame:CGRectMake(0.,0.,detailWebView.frame.size.width,[[detailWebView stringByEvaluatingJavaScriptFromString:@"document.body.scrollHeight;"] intValue])]; 
```

问题是当加载的页面很长时，我`UIWebBrowser`隐藏了单元格并且没有推动它们以获取底部的单元格。我不明白为什么我有这个，当我`UIWebBrowser`在情节提要中调整大小时我没有这个问题，但我想以编程方式完成

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T20:21:52.117

感谢 tkanzakic，我通过在开头添加一个空单元格并更改它们的高度来解决问题

第一个单元格的高度 = 旧 webView.heigh - 实际 webView.heigh

要更改我使用的单元格的高度`tableview:cellForRowAtIndexPath` 并且无需重新加载 tableView 的所有数据，我只需使用这个：

```
NSIndexPath* rowToReload = [NSIndexPath indexPathForRow:0 inSection:0];
NSArray* rowsToReload = [NSArray arrayWithObjects:rowToReload, nil];
[detailsTableView reloadRowsAtIndexPaths:rowsToReload withRowAnimation:UITableViewRowAnimationNone]; 
```

# xml - 无法在soapUI中使用xpath获取节点

> ID：13624297
> 
> 赞同：4
> 
> 时间：2012-11-29T11:01:58.687
> 
> 标签：xml, soapui

如何在 soapUI 4.0.0 中使用 Xpath 从以下响应文件访问“AccountId”节点？

提前致谢。

响应文件如下，

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
   <s:Body>
      <GetResponse xmlns="http://www.xyz.com/cmw/tcm/account">
         <GetResult xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
            <Account>
               <AccountId>14338049839</AccountId>
               <AccountLabel>Spara Femman</AccountLabel>
               <AccountRoleDTOList>
                  <AccountRole>
                     <AddressTypeId>REC</AddressTypeId>
                     <EndDay i:nil="true"/>
                     <ExtPosReference i:nil="true"/>
                     <HolderId>10533</HolderId>
                     <HolderName>TÄRNHOLMS HOTELL AB</HolderName>
                     <HolderTypeId>COR</HolderTypeId>
                     <IdentificationId>005164006917</IdentificationId>
                     <ReportProfileId>3</ReportProfileId>
                     <ReportProfileName>Standard</ReportProfileName>
                     <RoleDocumentPath i:nil="true"/>
                     <RoleId>HOL</RoleId>
                     <RoleName>Holder</RoleName>
                     <ShareOfAccount>100.00000</ShareOfAccount>
                  </AccountRole>
               </AccountRoleDTOList>
               <AccountTypeId>AGG</AccountTypeId>
               <CloseDay i:nil="true"/>
               <CurrencyId>SEK</CurrencyId>
               <CustodianAccountId i:nil="true"/> 
```

我已经通过使用以下代码进行了尝试...但它不起作用

```
declare namespace i='http://www.w3.org/2001/XMLSchema-instance';
//i:GetResult[1]/Account[1] 
```

但是我遇到了错误，例如缺少 xpath 的内容声明命名空间 i=' [http://www.w3.org/2001/XMLSchema-instance](http://www.w3.org/2001/XMLSchema-instance) '; //i:GetResult[1]/Account[1] 响应

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T20:21:07.047

试试这个

```
declare namespace i='http://www.w3.org/2001/XMLSchema-instance';
//i:GetResult[1]/i:Account[1] 
```

或者

```
declare namespace i='http://www.w3.org/2001/XMLSchema-instance';
//i:GetResult[1]/*:Account[1] 
```

# c# - 在 C# 中，有没有办法在字符串上尝试多个正则表达式以查看字符串中较早的一个匹配？

> ID：13624299
> 
> 赞同：0
> 
> 时间：2012-11-29T11:02:02.893
> 
> 标签：c#, .net, regex

假设我有一个任意的正则表达式列表（`IList<Regex> lst;`例如）。有没有办法找出字符串中较早的匹配项？

当然，有一个直接的解决方案是在字符串上尝试每个匹配项并查看哪个匹配项的索引最低，但这对于长字符串可能效率低下。

当然，我可以返回并从每个正则表达式中拉出字符串`Regex.ToString()`（`"(regex1)|(regex2)|(regex3)"`

编辑：基本上，有没有办法在没有字符串操作和重新编译的情况下组合已经编译的正则表达式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T14:06:36.407

众所周知，执行一个包含多个组的表达式通常比依次执行每个表达式要慢。看起来创建一个表达式会更快，但实际上正则表达式引擎将首先搜索整个字符串以找到第一个表达式，可能一直到字符串的末尾，但是当它找到匹配项时它将返回。所以没有办法强制它返回第一个匹配项。这是由于 .NET Regex 引擎的工作方式。

由于每个正则表达式可能在字符串中较早开始，但可能导致更长的匹配，因此您不能将搜索的结尾限制为当前最早匹配的索引，如下所示：

```
 // WARNING WILL NOT ALWAYS RESULT IN THE RIGHT VALUES
        List<Regex> rxs = new List<Regex>(4);
        rxs.Add(new Regex("def"));
        rxs.Add(new Regex("abc"));
        rxs.Add(new Regex("bcd"));
        rxs.Add(new Regex("cde"));

        string target = "abcdef";
        int firstIndex = target.Length;
        string firstMatch = string.Empty;

        foreach (var rx in rxs)
        {
            var match = rx.Match(target, 0, firstIndex);
            if (match.Success)
            {
                firstIndex = match.Index;
                firstMatch = match.Value;
                if (firstIndex == 0) break;
            }
        }
        return firstMatch; 
```

当您知道每个正则表达式将匹配的最大长度时，这将起作用，在这种情况下使用：

```
 // WARNING WILL NOT ALWAYS RESULT IN THE RIGHT VALUES
        List<Regex> rxs = new List<Regex>(4);
        rxs.Add(new Regex("def"));
        rxs.Add(new Regex("abc"));
        rxs.Add(new Regex("bcd"));
        rxs.Add(new Regex("cde"));

        string target = "abcdef";
        int firstIndex = target.Length;
        string firstMatch = string.Empty;

        foreach (var rx in rxs)
        {
            var match = rx.Match(target, 0, firstIndex + GetMaxLength(rx));
            if (match.Success)
            {
                firstIndex = match.Index;
                firstMatch = match.Value;
                if (firstIndex == 0) break;
            }
        }
        return firstMatch; 
```

但是您可以在第一个位置找到匹配项后立即进行短路，从而为您节省之后的任何潜在处决。

```
 foreach (var rx in rxs)
        {
            var match = rx.Match(target);
            if (match.Success)
            {
                if (match.Index < firstIndex)
                {
                    firstIndex = match.Index;
                    firstMatch = match.Value;    
                }
                if (firstIndex == 0) break;
            }
        } 
```

通过一些技巧，您可以使用当前第一个匹配候选的索引来限制搜索，但我怀疑它实际上仍然比搜索所有可能的匹配要慢：

```
 List<string> rxs = new List<string>(4);
        rxs.Add( "def");
        rxs.Add( "abc");
        rxs.Add( "bcd");
        rxs.Add( "cde");

        string target = "abcdef";
        int firstIndex = target.Length;
        string firstMatch = string.Empty;

        foreach (var rx in rxs)
        {
            var match = Regex.Match(target, @"(?<!\A[\w\W]{" + firstIndex + "})" + rx);
            if (match.Success)
            {
                if (match.Index < firstIndex)
                {
                    firstIndex = match.Index;
                    firstMatch = match.Value;    
                }
                if (firstIndex == 0) break;
            }
        } 
```

最后，进行试验和衡量，以找到最适合您的方式。

* * *

> > 我确实有一些额外的信息：至少有一个正则表达式会在字符串的开头附近找到。

在这种情况下，您可以选择首先使用合理的长度索引值进行扫描，因此`rx.Match(targetstring, 0, 1024 /* First scan */)`只有在找不到匹配项时才使用，然后在第二遍中扩大搜索范围。如果您的目标字符串可以非常大，这将节省大量计算能力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T11:30:42.643

`RegularExpressions.Match`正则表达式匹配返回的类型包含一个`Index`属性，该属性指示在原始字符串中找到匹配项的位置。

您可以从几个不同的正则表达式结果中进行比较，以确定第一个匹配项。

就像是

```
 (from m in regexList
 let match = m.Match(targetstring)
 orderby match.Index
 select m.Value).FirstOrDefault() 
```

注意：我没有针对语法或其他问题对此进行测试，因为您没有提供任何代码可以快速剪切并粘贴到 Linqpad 中以创建测试环境，我现在必须上班。但这应该给你一个大致的想法。

这与正则表达式是否已经编译无关——最终你将不得不针对目标字符串尝试它们中的每一个。

由于运行时环境在正常情况下管理您编译的正则表达式的编译和缓存，我不确定您的问题是什么，除非还有其他信息或尚未共享的上下文允许在尝试之前选择正则表达式它针对目标字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T11:41:29.497

不涉及您自己的正则表达式匹配器的唯一方法确实是连接路由。您可以将每个都放在一个命名的子组中，然后查看哪个组实际匹配以找出哪个原始正则表达式匹配。

我想知道您为什么如此担心重新编译，因为如果您同时担心大量输入，那么该步骤可能不是瓶颈...

# visual-c++ - C++ 文件输入/输出搜索

> ID：13624301
> 
> 赞同：0
> 
> 时间：2012-11-29T11:02:07.367
> 
> 标签：visual-c++, search, file-io

嗨，我从正在编写的程序中获取了以下代码，以根据字典以及其他验证检查用户生成的字符串。

我的问题是，虽然我的字典文件被正确引用，但程序给出了默认的“找不到字典”。我看不清楚我在这里做错了什么，如果有人有任何提示或指示，将不胜感激，

谢谢。

```
 //variables for checkWordInFile

        #define gC_FOUND 99
        #define gC_NOT_FOUND -99

        //
        static bool certifyThat(bool condition, const char* error) {
            if(!condition) printf("%s", error);
            return !condition;
        }

        //method to validate a user generated password following password guidelines.
        void validatePass()
        {
            FILE *fptr;
            char password[MAX+1];
            int iChar,iUpper,iLower,iSymbol,iNumber,iTotal,iResult,iCount;

            //shows user password guidelines
            printf("\n\n\t\tPassword rules: ");
            printf("\n\n\t\t 1\. Passwords must be at least 9 characters long and less than 15 characters. ");
            printf("\n\n\t\t 2\. Passwords must have at least 2 numbers in them.");
            printf("\n\n\t\t 3\. Passwords must have at least 2 uppercase letters and 2 lowercase letters in them.");
            printf("\n\n\t\t 4\. Passwords must have at least 1 symbol in them (eg ?, $, £, %).");
            printf("\n\n\t\t 5\. Passwords may not have small, common words in them eg hat, pow or ate.");

            //gets user password input
            get_user_password:

            printf("\n\n\t\tEnter your password following password rules: ");
            scanf("%s", &password);

            iChar = countLetters(password,&iUpper,&iLower,&iSymbol,&iNumber,&iTotal);
            iUpper = countLetters(password,&iUpper,&iLower,&iSymbol,&iNumber,&iTotal);
            iLower =countLetters(password,&iUpper,&iLower,&iSymbol,&iNumber,&iTotal);
            iSymbol =countLetters(password,&iUpper,&iLower,&iSymbol,&iNumber,&iTotal);
            iNumber = countLetters(password,&iUpper,&iLower,&iSymbol,&iNumber,&iTotal);
            iTotal = countLetters(password,&iUpper,&iLower,&iSymbol,&iNumber,&iTotal);

            if(certifyThat(iUpper >= 2, "Not enough uppercase letters!!!\n")
             || certifyThat(iLower >= 2, "Not enough lowercase letters!!!\n")
             || certifyThat(iSymbol >= 1, "Not enough symbols!!!\n")
             || certifyThat(iNumber >= 2, "Not enough numbers!!!\n")
             || certifyThat(iTotal >= 9, "Not enough characters!!!\n")
             || certifyThat(iTotal <= 15, "Too many characters!!!\n"))

            goto get_user_password;

            iResult = checkWordInFile("dictionary.txt", password);

            if(certifyThat(iResult != gC_FOUND, "Password contains small common 3 letter word/s."))
            goto get_user_password;

            iResult = checkWordInFile("passHistory.txt",password);

            if(certifyThat(iResult != gC_FOUND, "Password contains previously used password."))
            goto get_user_password;

            printf("\n\n\n Your new password is verified ");
            printf(password);

            //writing password to passHistroy file.

            fptr = fopen("passHistory.txt", "w");   // create or open the file
            for( iCount = 0; iCount < 8; iCount++)
            {
                fprintf(fptr, "%s\n", password[iCount]);
            }

            fclose(fptr);

            printf("\n\n\n");
            system("pause");

        }//end validatePass method

        int checkWordInFile(char * fileName,char * theWord){

            FILE * fptr;
            char fileString[MAX + 1];
            int iFound = -99;
            //open the file
            fptr = fopen(fileName, "r");
            if (fptr == NULL)
            {
                printf("\nNo dictionary file\n");
                printf("\n\n\n");
                system("pause");
                return (0); // just exit the program
            }

            /* read the contents of the file */
            while( fgets(fileString, MAX, fptr) )
            {
                if( 0 == strcmp(theWord, fileString) )
                {
                    iFound = -99;
                }
            }

            fclose(fptr);

            return(0);

        }//end of checkwORDiNFile 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T11:23:49.280

您需要`fopen()`调用中文件的完整路径。

默认情况下，Visual Studio 将工作目录设置为存储解决方案文件的位置，这不一定是 .exe 所在的位置。

您可以将项目属性中的工作目录更改为`$(SolutionDir)$(Configuration)\`不需要路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T15:05:43.383

解决方案是使用 strNcmp，这允许搜索单词的长度。使用 strcmp 时缓冲区中的空白空间会出现问题，这就是所谓的默认错误消息。

# iphone - iphone在facebook上添加带有图片的文字

> ID：13624305
> 
> 赞同：0
> 
> 时间：2012-11-29T11:02:21.357
> 
> 标签：iphone, ios, facebook

我正在使用他们的示例代码从 iphone 在 facebook 上发布图像。并且图像发布得很好，问题是我需要添加一些带有照片的文本（默认文本），如何在我发布的图像中添加文本。

```
 [FBSession openActiveSessionWithPermissions:[NSArray arrayWithObject:@"publish_actions"] allowLoginUI:YES completionHandler:^(FBSession *session,FBSessionState status, NSError *errr) 
 {
     if (FBSession.activeSession.isOpen) {             

         UIImage *img = [UIImage imageNamed:@"Icon@2x.png"];

         [FBRequestConnection startForUploadPhoto:img
                                completionHandler:^(FBRequestConnection *connection, id result, NSError *error) {
                                    [self showAlert:@"Photo Post" result:result error:error];
                                }];

     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T12:18:42.670

检查this other [question](https://stackoverflow.com/questions/13474462/facebook-get-url-of-uploaded-photo/13475489) and answers，在那里你会在用户墙和用户图片中找到如何做

# java - 将 URL 映射到本地系统上的文件

> ID：13624306
> 
> 赞同：0
> 
> 时间：2012-11-29T11:02:23.353
> 
> 标签：java, spring, servlets, mapping

我想将 URL 重定向到我服务器上的文件，这样当打开该 URL 时，它会从服务器获取特定的 pdf 文件并在浏览器上打开它。它适用于客户端服务器接口。请帮助我如何将我的 URL 重定向到我服务器上的特定文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T13:04:46.340

如果我正确理解您的问题，假设您有以下网址：

```
http://somesiste.bla/render?path=/dirx/hello1.pdf 
```

如果 PDF 文件位于您的应用程序 WAR 文件中，并且您的 WAR 文件看起来像这样

```
WAR
 -- index.jspx
 -- WEB-INF
    --web.xml
 -- data
    --dirx
      --hello01.pdf
      --hello02.pdf 
```

那么这真的很容易，只需转发到您的应用程序中的正确文件

```
public void forwardToPdf( HttpServletRequest request,    HttpServletResponse response, String path ) throws ServletException, IOException
   {
   RequestDispatcher requestDispatcher= request.getRequestDispatcher("/data/" +path) ;                 
   requestDispatcher.forward( request, response ) ;
   }

// Get the parameter and pass it on
String path = getParameter("path");
forwardToPdf(request, response, path); 
```

但是如果文件位于您的应用程序之外，可以说

```
C:\data\ 
```

您不能只重定向到该文件，您要做的就是读入该文件并将其呈现给用户

只是一个小实用程序来做到这一点。

```
import java.io.Closeable;
import java.io.IOException;

import javax.servlet.ServletOutputStream;
import javax.servlet.http.HttpServletResponse;
    public class FileDownloadHelper {

    public static final String CONTENT_TYPE_EXCEL ="application/vnd.ms-excel";
    public static final String CONTENT_TYPE_WORD_DOCUMENT ="application/doc";
    public static final String CONTENT_TYPE_MS_WORD ="application/msword";
    public static final String CONTENT_TYPE_PDF ="application/pdf";

    public static final String CONTENT_DISPOSITION_INLINE ="inline";
    public static final String CONTENT_DISPOSITION_ATTACHMENT ="attachment";

    public void write(HttpServletResponse response, byte[] data, String contentType, String outputFileName, String contentDisposition){
        response.setCharacterEncoding("UTF-8");
        ServletOutputStream sos = null;
        try {   
            sos = response.getOutputStream();
            response.setStatus(HttpServletResponse.SC_OK);

            if(data != null){

                response.setContentType(contentType);
                long contentLength = data.length;
                /* IE requires the following for pdf files */
                response.setBufferSize((int)contentLength);
                //This enables us to show estimated download time
                response.setHeader("Content-Length", String.valueOf(contentLength));
                // inline=forces to use a viewer  attachment=show save dialog            
                //response.setHeader("Content-Disposition", "inline; filename=\"" + outputFileName + "\"");
                response.setHeader("Content-Disposition", contentDisposition+"; filename=\"" + outputFileName + "\"");
                // These set of headers need to be here for this to work with IE  with servlet security
                // This will prevent catching of the results
                response.setHeader("Expires", "0");
                response.setHeader("Cache-Control", "must-revalidate, post-check=0, pre-check=0");
                response.setHeader("Pragma", "public");

                sos.write(data);
            }else{
                sendResponse404(response);
            }

        } catch (IOException e) {
            e.printStackTrace();
        }finally{
            close(sos);
        }   
    }

    /**
     * Helper method to send 404 - Resource not found message
     * @param response
     */
    private void sendResponse404(HttpServletResponse response) {
        //Resource not found
        response.setStatus(HttpServletResponse.SC_NOT_FOUND);
        response.setContentType("text/html");
        try {           
            response.getOutputStream().write("Resource not found".getBytes());
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    /**
     * Helper method to take care of cleanup
     * @param resource to close
     */
    private  void close(Closeable resource) {
        if (resource != null) {
            try {
                resource.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    }

} 
```

然后你可以简单地使用它如下

```
// Force browser to download the resource
    FileDownloadHelper download = new FileDownloadHelper();
    download.write(response, readFileToBytes(pathToFileOnYourFileSystem), FileDownloadHelper.CONTENT_TYPE_PDF,"OUTPUTFILENA.PDF", 
    FileDownloadHelper.CONTENT_DISPOSITION_ATTACHMENT 
```

我希望这会有所帮助并且有意义。缺少一些东西，例如“readFileToBytes”和获取参数，但这应该可以帮助您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T11:06:16.187

```
new File(path).toURI().toURL(); 
```

# scrum - 自动更新的用户故事

> ID：13624310
> 
> 赞同：-1
> 
> 时间：2012-11-29T11:02:38.157
> 
> 标签：scrum

更新富客户端应用程序的用户故事可能是“*作为用户，我希望能够从 Internet 更新我的应用程序*”。

但是现在让我们假设这个更新过程是完全透明的。例如，富客户端可以自动连接到更新服务器并在没有任何用户交互的情况下“刷新自身”。

在这种情况下，如何编写用户故事？

根据我读过的各种文章，看起来过去是用户故事现在是技术要求，不应该成为产品积压的一部分，但我可能错了......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T11:10:56.053

“作为用户，我希望我的应用程序自行更新，以便我始终拥有最新版本，而我不必自己处理它”怎么样。

对我来说，这是一个完全合法的用户故事，因为它有用户价值。用户不必执行任何操作这一事实并不会使故事无效。许多功能都是关于“自动”的东西。

# java - 分布式树数据结构

> ID：13624311
> 
> 赞同：1
> 
> 时间：2012-11-29T11:02:43.373
> 
> 标签：java, data-structures, tree, distributed-computing

在我的项目中，我使用了某种发布者/订阅者模式。

我想在我的发布者上有一个树形数据结构。每次我修改树中的任何内容（无论是结构更改还是节点值的修改），更改集都会发布给它的订阅者。

这些确实具有树的本地副本，并在接收到变更集时更改内部结构。连接到发布者时，任何订阅者都应首先请求整个树的深层副本。

有人知道执行上述操作的现有 java 库吗？

欢迎任何提示

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T16:57:20.350

好的，既然我到目前为止找到了一个“解决方案”，我就在这里发布一般的想法。

我创建了一个实现`java.util.Map`接口的类。让我们调用这个类`DMPublisher<K, V>`，而`K`它是映射中的键类型和`V`值的类型。

还有另一个类也实现了地图接口，`DMSubscriber<K, V>`.

发布者类开始监听一个套接字，直到它被显式关闭。订阅者在创建时连接到此套接字。

发布者类具有用作缓存的真实哈希映射的属性。对于发布者上的每个操作方法，缓存中的相应项都会相应更改。现在通过上述套接字将更新发送给所有订阅者。

除了地图接口，订阅者还使用了可以附加的观察者模式监听器。从套接字接收的所有更新现在都分派给所有这些侦听器。

连接后，发布者将当前保存在缓存中的所有数据发送给其订阅者，以保持一致的状态。

这两个类都是同步的，以支持多线程。

如果有人对源代码感兴趣，请随时与我联系。

# backbone.js - 没有重新绘制主干 div

> ID：13624314
> 
> 赞同：1
> 
> 时间：2012-11-29T11:02:59.373
> 
> 标签：backbone.js

我正在使用路由器进行导航和布局管理（对吗！？）并且似乎遇到了一个问题：

```
backboneQuote.Routers.ApplicationRouter = Backbone.Router.extend({

routes: {
    "" : "home",
    "edit/:id": "quoteEdit"
},

initialize: function(){
    this.headerView = new backboneQuote.Views.headerView();
    $('.header').html(this.headerView.render().el);

    if(!this.itemsView){
        this.items = new backboneQuote.Collections.ApplicationCollection([
            {id: 1, name: "item 1"},
            {id: 2, name: "item 2"},
            {id: 3, name: "item 3"}
        ]);

        this.itemsView = new backboneQuote.Views.itemsView({collection: this.items});
    }
    this.content = $('.container');
},

home: function(){

    this.content.html(this.itemsView.render());

},

quoteEdit: function(id){
    this.editQuoteView = new backboneQuote.Views.editQuoteView({model: this.items.where({id: parseInt(id, 10)})});
    $('#editQuote').html(this.editQuoteView.render().el);
    this.content.html($('#editQuote').html());
} 
```

});

我的 itemsView 渲染的东西：

```
renderItem: function(model){
    var itemView = new backboneQuote.Views.itemView({model: model});
    itemView.render();
    $(this.el).append(itemView.el);
    return this;
},

render: function(){
    this.collection.each(this.renderItem);
}, 
```

我单击一个将应用程序导航回“主页”功能的元素（单击事件触发正常），但“this.itemsView”的内容似乎从未放回“this.content”div。任何人都可以在这里发现任何问题吗？

作为另一个巨大的帮助，如果有人可以对他们在这里看到的任何东西提供任何整体的 BackboneJS 智慧，那么这将是一个*巨大的*帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T11:50:14.157

通常，在 Backbone 应用程序中，我们编写`render`方法来设置视图的内容`el`。调用代码的责任是`render`确保`el`在正确的位置显示。

在路由器中，

```
home: function(){

    this.content.html(this.itemsView.render());

}, 
```

您没有访问该`.el` 属性。第一个修复是在那里添加。

```
home: function(){

    this.itemsView.render();
    this.content.html(this.itemsView.el);

}, 
```

这假设您的集合视图具有`el`默认情况下 Backbone 视图倾向于具有的属性。

考虑到这是一个常见的任务，约定是在每个视图方法`this`结束时返回。`render`

```
render: function(){
    this.collection.each(this.renderItem);
    return this;
 },

home: function(){
    this.content.html(this.itemsView.render().el);
}, 
```

# iphone - 应用商店提交“请使用与团队 ID 关联的配置文件......”

> ID：13624317
> 
> 赞同：0
> 
> 时间：2012-11-29T11:03:14.180
> 
> 标签：iphone, ios, xcode, app-store, app-store-connect

我在 Appstore 提交时遇到此问题“此应用包含与您的帐户无关的嵌入式配置文件。请使用与团队 ID 关联的配置文件......”？

请帮忙！

* * *

我解决了这个问题。从历史上看，我的 iOS 应用程序已在第一个“iTunes Connect”帐户上发布，然后在第二个“iTunes Connect”帐户上重新发布和更新。

最近，当我提交使用第一个帐户和第二个帐户签署的应用程序时，我收到以下错误“此应用程序包含与您的帐户无关的嵌入式配置文件。请使用与团队 ID 关联的配置文件... ......”在上传过程中。

我通过使用第二个帐户签署应用程序解决了这个问题，并且应用程序使用“通配符”配置文件（捆绑标识符 =“*”，AppID = XXXXXXXXX.*）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T11:08:31.697

看起来您创建了一个带有配置文件的应用程序，该配置文件不是为您用于将应用程序上传到 Appstore 的帐户创建的。

这可能意味着

1.  您使用的个人资料不正确或
2.  此后，配置门户的配置文件已被删除，您需要一个新的配置文件才能在应用程序中发送。

* * *

我还看到，目前开发人员网站已关闭，这可能意味着这可能与您的问题有关。你只需要等着看。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T11:25:21.167

我认为您用于制作存档的配置文件与您的应用程序的相关开发人员配置文件 ID 不匹配，或者您可能使用开发人员配置文件将其存档。

# titanium - 覆盖在相机屏幕顶部

> ID：13624321
> 
> 赞同：1
> 
> 时间：2012-11-29T11:03:38.860
> 
> 标签：titanium, titanium-mobile

我试图找到在相机屏幕顶部为 Titanium 应用程序添加一些叠加层的方法。浏览 StackOverflow 我遇到了这篇文章：

[Titanium appcelerator 是否值得在 ipad、iphone 和 android 上开发基于相机的应用程序？](https://stackoverflow.com/questions/4072239/is-titanium-appcelerator-worth-it-for-developing-camera-based-application-on-ipa)

蒂姆·罗森布拉特说这是可能的。我想知道是否有人可以向我指出一些链接，我可以在其中找到一些文档来做到这一点。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T13:50:40.973

```
var overlay = Ti.UI.createView({ top: 20, right: 20, height: 50, left: 20 });
Ti.Media.showCamera({
    overlay: overlay
}); 
```

您可以在此处查看可以传递给 showCamera 的其余参数：

[http://docs.appcelerator.com/titanium/2.1/index.html#!/api/CameraOptionsType](http://docs.appcelerator.com/titanium/2.1/index.html#!/api/CameraOptionsType)

您可能需要“showControls: false”，加上“success: function() {...}”、错误和取消。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T13:28:57.853

这是 api 文档的链接，您可以在其中找到（UI/网络/电话属性）的所有属性，您可以在您的应用程序 [http://docs.appcelerator.com/titanium/2.1/index.html#!/ api](http://docs.appcelerator.com/titanium/2.1/index.html#!/api)

这第二个链接是指厨房水槽应用程序。它演示了 Titanium DOC 中的所有组件以供参考。它是免费的，您可以下载并安装它并查看代码 [https://github.com/appcelerator/KitchenSink](https://github.com/appcelerator/KitchenSink)

希望能帮助到你

# ios - 字体分布在多个文件中

> ID：13624322
> 
> 赞同：1
> 
> 时间：2012-11-29T11:03:40.983
> 
> 标签：ios, fonts, hebrew, android-fonts

我想在我的 iOS 应用程序中使用 Droid 字体，目前主要支持希伯来语。Droid 字体包包含几个文件，其中两个是`DroidSans.ttf`和`DroidHebrewSans.ttf`.

希伯来字体包含希伯来字形，但仅此而已（特别是没有数字）。纯字体包含其余部分以及许多其他语言。

两种字体都嵌入在我的应用程序中，我可以使用`[UIFont fontWithName:size:]`. 问题是，如果我加载一种字体，我就看不到希伯来语，如果我加载另一种字体，我就看不到数字和标点符号。

强调一下 - 我有兴趣将 an 分配`NSString`给 a`UILabel`的 text 属性，并完成它。根据代码页扫描字符串并应用属性并不是真正的解决方案。

我错过了什么吗？我应该以某种方式合并字体吗？是否有我缺少的已经合并的字体？

**编辑：**我注意到 Android 字体目录中的`fallback_fonts.xml`和`system_fonts.xml`文件。这些定义了绘制字形时要使用的各种字体和优先级。iOS有类似的东西吗？

# sql - SQL：外连接和计数

> ID：13624332
> 
> 赞同：3
> 
> 时间：2012-11-29T11:04:12.027
> 
> 标签：sql, oracle, join

我必须创建一个 sql 语句来显示羊名和他/她的兄弟姐妹数量。

这是我的 sql 脚本：

```
create table breeder (
breederNumber   number(3) primary key,
name            varchar2(20),
residence       varchar2(20),
password        varchar2(20)
);

create table race (
raceCode        varchar2(2) primary key,
raceName        varchar2(20) not null
);

create table sheep (
earTagNumber    number(2) primary key,
father          number(2),
mother          number(2),
raceCode        varchar2(2),
name            varchar2(20),
previousBreeder number(3),
genotype        varchar2(7),
gender          varchar2(1) check (gender = 'M' OR gender = 'F'),

constraint fk_previousBreeder foreign key (previousBreeder) references breeder(breederNummer) on delete cascade,
constraint rk_raceCode foreign key (raceCode) references race(raceCode) on delete cascade,
constraint fk_mother foreign key (mother) references sheep(earTagNumber) on delete cascade,
constraint fk_father foreign key (father) references sheep(earTagNumber) on delete cascade
); 
```

[结果应该是这样的](http://snag.gy/XE95c.jpg)

我应该使用外连接，但我不知道 sql 语句应该是什么样子。

谁能帮我？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T11:17:41.123

```
select s1.earTagNumber, max(s1.name), count(s2.earTagNumber) 
 from sheep s1
 left join sheep s2 on (s1.father=s2.father) or (s1.mother=s2.mother)
group by s1.earTagNumber 
```

# html - 如何修改 Joomla 文章样式？

> ID：13624333
> 
> 赞同：0
> 
> 时间：2012-11-29T11:04:18.370
> 
> 标签：html, joomla, components, joomla2.5, joomla-article

我正在为我的网站使用 Joomla 2.5.8。现在我想为我的博客文章设置样式。在文章 div 下我想添加另一个带有图像的 div 以产生特殊效果。这可能吗？

这是来自 Joomla 的 HTML：

```
<div class="item column-1">
    <h2>Test 2</h2>
    <ul class="actions"></ul>
    <dl class="article-info"></dl>
    <p>Das ist der zweite Test-Beitrag!</p>
    <div class="item-separator"></div>
</div>
<div class="item column-2">
    <h2>Test</h2>
    <ul class="actions"></ul>
    <dl class="article-info"></dl>
    <p>Das sind die Blog-Einträge</p>
    <div class="item-separator"></div>
</div> 
```

这就是我的想象：

```
<div class="item column-1">
    <h2>Test 2</h2>
    <ul class="actions"></ul>
    <dl class="article-info"></dl>
    <p>Das ist der zweite Test-Beitrag!</p>
    <div class="item-separator"></div>
</div>

<div class="myDiv"></div>

<div class="item column-2">
    <h2>Test</h2>
    <ul class="actions"></ul>
    <dl class="article-info"></dl>
    <p>Das sind die Blog-Einträge</p>
    <div class="item-separator"></div>
</div>

<div class="myDiv"></div> 
```

你能帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T11:31:05.963

请避免自定义核心 Joomla 文件。是的，您可以使用模板覆盖方法进行自定义。欲了解更多详情，请访问以下链接：

[如何覆盖 Joomla 的输出！核](http://docs.joomla.org/How_to_override_the_output_from_the_Joomla!_core)

# xsd - 如何在 XSD 中强制每种类型的孩子之一？

> ID：13624335
> 
> 赞同：0
> 
> 时间：2012-11-29T11:04:25.683
> 
> 标签：xsd

我有两种类型的地址，它们都需要存在并且都嵌套在父级中。有没有一种方法可以强制每种地址类型中的一种，而无需重新定义所有字段两次？

```
 <xs:element name="addresses">
    <xs:complexType>
  <xs:sequence>
    <xs:element name="address" maxOccurs="2" minOccurs="2"> <!-- MUST BE ONE OF EACH ADDRESS TYPE - Invoice AND Delivery -->
      <xs:complexType>
        <xs:sequence>
          <xs:element type="xs:string" name="addresstype">
              <xs:simpleType>
                <xs:restriction base="xs:string">
                  <xs:enumeration value="I"/>
                  <xs:enumeration value="D"/>
                </xs:restriction>
              </xs:simpleType>
          </xs:element>
          <xs:element type="xs:string" name="addresscode"/>
          <xs:element type="xs:string" name="name"/>
          <xs:element type="xs:string" name="line1"/>
          <xs:element type="xs:string" name="line2"/>
          <xs:element type="xs:string" name="line3"/>
          <xs:element type="xs:string" name="line4"/>
          <xs:element type="xs:string" name="line5"/>
          <xs:element type="xs:string" name="postcode"/>
        </xs:sequence>
      </xs:complexType>
    </xs:element>
  </xs:sequence>
</xs:complexType>
</xs:element> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T14:14:12.407

这个要求是不可能用 XSD 实现的！我认为即使定义所有字段两次也不可能！因为如果你尝试定义 parent`<address>`两次，我猜它最终会显示错误，“一个元素只能有一个（复杂或简单）类型”！

# javascript - 去除缠绕的标签 标签

> ID：13624336
> 
> 赞同：3
> 
> 时间：2012-11-29T11:04:31.673
> 
> 标签：javascript, jquery, asp.net, jquery-selectors

我试图在下拉列表中隐藏和显示标签，我最初设法在 Internet Explorer 中的所有内容中工作。然后我发现将需要隐藏在标签中的选项包装起来解决了 IE 问题。但是我现在在删除它们时遇到了问题，因为我编写的代码也删除了它们包含的下拉列表。我做错了什么？这是到目前为止的代码：

```
function GetMonthsForSelectedYear() {
    var selectedYear = $("#DropDownListYear option:selected").text(),
        currentYear = (new Date()).getFullYear(),
        currentMonth = (new Date()).getMonth() + 1;

    $("#DropDownListMonth option").each(function() {
        if (selectedYear == currentYear) {
            var option = $(this).index();
            if (option < currentMonth) {
                $(this).wrap('<span>').hide();
            }
        } else {
            $(this).unwrap("<span>").show();
        }
    });
}

$("#DropDownListYear").change(function() {
   GetMonthsForSelectedYear();
});​ 
```

这是在 JSFiddle 中：

[http://jsfiddle.net/MGGh9/1/](http://jsfiddle.net/MGGh9/1/)

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T11:06:11.867

### 相反，你可以使用这个：

```
$("#DropDownListMonth option[value=" + title + "]").hide(); 
```

当你包裹 a`<span>`时，它包裹了整个`<select>`，而不仅仅是那个`<option>`。这是预期的行为。此外，在标签之外`option`或`optgroup`在`select`标签内添加任何内容都不是正确的方法。

### 在您的代码中：

```
function GetMonthsForSelectedYear() {
    var yearOfEntry = $("#DropDownListYear option:selected").text(),
        currentYear = (new Date()).getFullYear(),
        currentMonth = (new Date()).getMonth() + 1;

    $("#DropDownListMonth option").each(function() {
        if (yearOfEntry == currentYear) {
            var option = $(this).index();
            if (option < currentMonth) {
                $(this).hide();               // «--------- This one
            }
        } else {
            $(this).show();                   // «--------- This one
        }
    });
}

$("#DropDownListYear").change(function() {
   GetMonthsForSelectedYear();
});​ 
```

### 小提琴：http: [//jsfiddle.net/MGGh9/2/](http://jsfiddle.net/MGGh9/2/)

### 还要检查：

1.  [如何使用 CSS 在 <select> 菜单中隐藏 <option>？](https://stackoverflow.com/questions/9234830/how-to-hide-a-option-in-a-select-menu-with-css)
2.  [如何使用 JavaScript 隐藏选择选项？（跨浏览器）](https://stackoverflow.com/questions/4398966/how-can-i-hide-select-options-with-javascript-cross-browser)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-26T20:17:28.180

请注意，根据 HTML 规范 ( [http://www.w3.org/TR/html5/forms.html#the-select-element](http://www.w3.org/TR/html5/forms.html#the-select-element) )， a`<select>`应该只包含`<option>`或`<optgroup>`或支持脚本的元素。所以你应该避免使用无效`<span>`的包装器，而只是删除和恢复你的`<option>`元素。

看到这个答案 - [https://stackoverflow.com/a/24439289/1766230](https://stackoverflow.com/a/24439289/1766230) - 这个问题 - [How to hide a <option> in a <select> menu with CSS?](https://stackoverflow.com/questions/9234830/how-to-hide-a-option-in-a-select-menu-with-css/24439289) .

# magento - 时事通讯订阅成功电子邮件模板中的客户姓名

> ID：13624337
> 
> 赞同：0
> 
> 时间：2012-11-29T11:04:44.287
> 
> 标签：magento, magento-1.7, newsletter, email-templates

我试图在时事通讯订阅成功页面中包含客户名称。但我不能包括客户姓名。

我曾尝试在电子邮件模板中跟踪变量但没有成功。我正在使用 magento 1.7.0.2

```
{{var customer.name}}
{{htmlescape var=$customer.name}}
{{var subscriber.name}}
{{htmlescape var=$customer.firstname}}
{{var subscriber.CustomerFirstname}}
{{var subscriber.getCustomerFirstname()}}
{{var subscriber.getSubscriberFullName()}} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-16T14:33:04.703

您可以通过以下方式获取客户名称：

用你的类重写一个类 Mage_Newsletter_Model_Subscriber。

重写一个函数 sendConfirmationSuccessEmail() ，您可以通过以下方式获得客户：

```
 $customer = Mage::getModel('customer/customer');
    $customer->setWebsiteId(Mage::app()->getWebsite()->getId());
    $customer->loadByEmail($this->getEmail()); 
```

然后将变量“客户”分配给电子邮件模板

```
 $email->sendTransactional(
        Mage::getStoreConfig(self::XML_PATH_SUCCESS_EMAIL_TEMPLATE),
        Mage::getStoreConfig(self::XML_PATH_SUCCESS_EMAIL_IDENTITY),
        $this->getEmail(),
        $this->getName(),
        array('subscriber'=>$this, 'customer'=>$customer)
    ); 
```

- 在 newsletter_subscr_success.html 你将拥有

```
 {{var customer.firstname}} {{var customer.lastname}} 
```

或客户需要的任何东西。

# java - xtext如何获取根AST元素

> ID：13624338
> 
> 赞同：2
> 
> 时间：2012-11-29T11:04:44.703
> 
> 标签：java, eclipse, eclipse-plugin, xtext

我正在使用 xtext 构建我的 dsl，并添加了一个弹出操作，我现在需要的是当执行该操作以加载 AST 并对其进行转换时，我尝试使用以下 coe 加载根 Ast 元素

```
/*Environment configuration*/
StandaloneSetup standalone = new StandaloneSetup();
standalone.setPlatformUri(workingPath);
Injector injector = new MyDslStandaloneSetup().createInjectorAndDoEMFRegistration();
XtextResourceSet resourceSet = injector.getInstance(XtextResourceSet.class);
resourceSet.addLoadOption(XtextResource.OPTION_RESOLVE_ALL, Boolean.TRUE);

/*File parsing*/

Resource resource = resourceSet.createResource(URI.createURI(uriPrefix + fileName));
InputStream in = new FileInputStream(workingPath + fileName);
resource.load(in, resourceSet.getLoadOptions());

if(resource.getContents().size() == 0) {
    System.out.println("The file is empty: no folder has been generated");
    return null;
}
Prog model = (Prog) resource.getContents().get(0);
return model; 
```

但不要工作并引发此异常：

```
!MESSAGE Invalid property category path: ValidationPropertiesPage (bundle: org.eclipse.wst.xml.ui, propertyPage: org.eclipse.wst.xml.ui.propertyPage.project.validation)
org.eclipse.emf.ecore.resource.Resource$IOWrappedException: Content is not allowed in prolog.
    at org.eclipse.emf.ecore.xmi.impl.XMLLoadImpl.load(XMLLoadImpl.java:195)
    at org.eclipse.emf.ecore.xmi.impl.XMLResourceImpl.doLoad(XMLResourceImpl.java:240)
    at org.eclipse.emf.ecore.resource.impl.ResourceImpl.load(ResourceImpl.java:1505)
    at org.xtext.example.mydsl.ui.popup.actions.RunClass.getProg(RunClass.java:203)
    at org.xtext.example.mydsl.ui.popup.actions.RunClass.run(RunClass.java:88)
    at org.eclipse.ui.internal.PluginAction.runWithEvent(PluginAction.java:251)
    at org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(ActionContributionItem.java:584)
    at org.eclipse.jface.action.ActionContributionItem.access$2(ActionContributionItem.java:501)
    at org.eclipse.jface.action.ActionContributionItem$5.handleEvent(ActionContributionItem.java:411)
    at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1276)
    at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3554)
    at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3179)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$9.run(PartRenderingEngine.java:1022)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.run(PartRenderingEngine.java:916)
    at org.eclipse.e4.ui.internal.workbench.E4Workbench.createAndRunUI(E4Workbench.java:86)
    at org.eclipse.ui.internal.Workbench$5.run(Workbench.java:585)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:540)
    at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
    at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:124)
    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1438)
    at org.eclipse.equinox.launcher.Main.main(Main.java:1414)
Caused by: org.xml.sax.SAXParseExceptionpublicId: platform:/resource/prova/a.myDsl; systemId: platform:/resource/prova/a.myDsl; lineNumber: 4; columnNumber: 1; Content is not allowed in prolog.
    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(ErrorHandlerWrapper.java:198)
    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.fatalError(ErrorHandlerWrapper.java:177)
    at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:391)
    at com.sun.org.apache.xerces.internal.impl.XMLScanner.reportFatalError(XMLScanner.java:1404)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl$PrologDriver.next(XMLDocumentScannerImpl.java:1014)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:625)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:488)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:819)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:748)
    at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:123)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1208)
    at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(SAXParserImpl.java:525)
    at javax.xml.parsers.SAXParser.parse(SAXParser.java:392)
    at org.eclipse.emf.ecore.xmi.impl.XMLLoadImpl.load(XMLLoadImpl.java:175)
    ... 34 more 
```

我如何加载 ASt？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T08:36:36.313

错误信息是这样的：

```
org.xml.sax.SAXParseException publicId: 
platform:/resource/prova/a.myDsl; systemId: platform:/resource/prova/a.myDsl; 
lineNumber: 4; columnNumber: 1; Content is not allowed in prolog 
```

这意味着框架试图将您的 DSL 作为 XML 加载，但这是行不通的。这些错误的通常原因`myDsl`是未注册文件扩展名。

使用此调用会发生这种情况：

```
org.eclipse.xtext.resource.IResourceServiceProvider.Registry.INSTANCE.getExtensionToFactoryMap().put("myDsl", ...); 
```

确保为您的 DSL 调用此方法。

此外，在编写 Eclipse 插件时，您不能使用独立设置。这样做会破坏很多全局变量并导致虚假错误。对于 Eclipse 插件，DSL 激活器将用于`*Activator.java`在您的 UI 包中搜索。

其中有一个`getInjector()`应该调用的方法。

# php - 谁能告诉我如何通过单一动作制作多个视图

> ID：13624340
> 
> 赞同：0
> 
> 时间：2012-11-29T11:04:49.780
> 
> 标签：php, zend-framework

谁能告诉我如何在基于 zend 模块化的框架中通过单个操作制作多个视图。

例如

```
$UserId    = $this->getRequest()->getParam('id');
if($UserId !='')
{    
    $userDetails =$loginObj->getUserTypeByID($UserId);
    if($userDetails == 0)
        $this->_helper->redirector('index', 'profile', 'default');
    else
        $usrType    = $userDetails['user_type'];
    if($usrType =='C' || $usrType =='H' )
    {
        //$this->renderScript('other-user-profile.phtml' );
        //$this->render("other-user-profile.phtml");
        $this->_helper->viewRenderer('profile/other-user-profile.phtml');
            //$this->_forward('other-user-profile.phtml','profile','default');
    }
    else
    {
           $this->render("index.phtml");
    }  
} 
```

这不起作用？如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T11:08:18.040

它可以通过多种方式完成，例如使用[部分](http://framework.zend.com/manual/1.12/en/zend.view.helpers.html#zend.view.helpers.initial.partial)视图助手。

*编辑：*响应您的代码段：

你最好使用[ViewRenderer Action Helpers](http://framework.zend.com/manual/1.12/en/zend.controller.actionhelpers.html#zend.controller.actionhelpers.viewrenderer)。检查此页面中的示例 #11。代码中的注释非常不言自明。我建议您注意脚本路径。

```
// Bar controller class, foo module:
class Foo_BarController extends Zend_Controller_Action
{
    public function addAction()
    {
        // Render 'bar/form.phtml' instead of 'bar/add.phtml'
        $this->_helper->viewRenderer('form');
    }

    public function editAction()
    {
        // Render 'bar/form.phtml' instead of 'bar/edit.phtml'
        $this->_helper->viewRenderer->setScriptAction('form');
    }

    public function processAction()
    {
        // do some validation...
        if (!$valid) {
            // Render 'bar/form.phtml' instead of 'bar/process.phtml'
            $this->_helper->viewRenderer->setRender('form');
            return;
        }

        // otherwise continue processing...
    }

} 
```

# windows-7 - 批量报警文件不会消失

> ID：13624341
> 
> 赞同：3
> 
> 时间：2012-11-29T11:04:52.980
> 
> 标签：windows-7, batch-file

由于早上起床的巨大问题，我决定编写一个在给定时间执行特定文件的批处理脚本。但是，当我让我的计算机长时间闲置时它不起作用，看起来循环本身不再循环了。

我无法理解是什么导致它无法工作，因为我的屏幕保护程序和 CPU/HDD-sleep 已关闭。

这是代码：

```
echo OFF

@echo Set hour for alarm:
set /p hour=
@echo Set minute for alarm:
set /p minute=

@echo alarm will ring at %hour% : %minute%

:waitDay
for /f "tokens=5-8 delims=:. " %%a in ('echo/^|time') do (
  set hh=%%a
)

IF %hh% GTR %hour% GOTO waitDay

:start
for /f "tokens=5-8 delims=:. " %%a in ('echo/^|time') do (
  set hh=%%a&set nn=%%b&set ss=%%c&set cs=%%d
)

IF %hh% LSS %hour% GOTO start
IF %nn% LSS %minute% GOTO start

cd \d C:
cd \d C:\Users\Oted\Desktop\Stuff\
"alarm.xspf" 
```

很高兴有人可以提供帮助，我使用的是 Windows 7。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T15:25:14.760

尝试这个...

```
@ECHO OFF
setlocal

set /p exectime=Enter when you want the task to execute (HH:MM): 
set batchfilelocation=C:\Users\Oted\Desktop\Stuff\alarm.xspf

SCHTASKS /create /SC DAILY /TN "WAKEUP" /TR "%batchfilelocation%" /S %computername%
pause
endlocal

REM /SC allows for the following frequency schedules:
REM     MINUTE:     1 - 1439 minutes.
REM     HOURLY:     1 - 23 hours.
REM     DAILY:      1 - 365 days.
REM     WEEKLY:     weeks 1 - 52.
REM     ONCE:       No modifiers.
REM     ONSTART:    No modifiers.
REM     ONLOGON:    No modifiers.
REM     ONIDLE:     No modifiers.
REM     MONTHLY:    1 - 12, or FIRST, SECOND, THIRD, FOURTH, LAST, LASTDAY. 
```

这是由朋友创建的，我只是对其进行了编辑以适应这种情况。

这将为您想要唤醒的任何时间创建一个计划任务。

最初由[iesou创建](https://stackoverflow.com/users/1083755/iesou)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T15:34:17.667

我已经重写了你的脚本，所以它更容易阅读，我认为你遇到的问题与 3 条底线有关。

您放置`\d`而不是`/d`意味着它不会更改目录，因此尝试运行该文件`alarm.xspf`会失败，因为它不在正确的文件夹中。

```
@echo off
set /p hour=Set hour for alarm: 
set /p minute=Set minute for alarm: 
echo Alarm will ring at %hour%:%minute%

:waitDay
for /f "tokens=1 delims=:" %%a in ("%time%") do (
set hh=%%a
)

if %hh% gtr %hour% goto :waitDay

:start
for /f "tokens=1 delims=:" %%a in ("%time%") do (
set hh=%%a
set mm=%%b
set ss=%%c
set ms=%%d
)

if %hh% lss %hour% goto :start
if %mm% lss %minute% goto :start

C:\Users\Oted\Desktop\Stuff\alarm.xspf 
```

# java - 从 Java 运行 PHP

> ID：13624346
> 
> 赞同：0
> 
> 时间：2012-11-29T11:05:06.730
> 
> 标签：java, php, runtime, exec

我正在尝试从 java 文件运行以下内容。
我正在尝试显示 php 版本，稍后将更改为运行 php 文件。

```
 Process p = Runtime.getRuntime().exec("cmd /C PHP/php.exe -v");
 BufferedReader in = new BufferedReader(new InputStreamReader(
                p.getInputStream()));
        String line = null;
        while ((line = in.readLine()) != null) {
            System.out.println(line);
        } 
```

当我运行程序时，没有错误。但控制台没有显示任何东西:(
谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T11:06:52.600

You have to [wait](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Process.html#waitFor%28%29) for the process to execute and you must separate the arguments :

```
Process p = Runtime.getRuntime().exec("cmd", "/C", "PHP/php.exe", "-v");
BufferedReader in = new BufferedReader(new InputStreamReader( p.getInputStream()));
p.waitFor();
String line = null;
while ((line = in.readLine()) != null) {
     System.out.println(line);
} 
```

BTW, any time you have a problem in running a process, it's a good idea to look also at [the error stream](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Process.html#getErrorStream%28%29).

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-29T11:14:57.287

我怀疑问题是以下之一：

*   `php.exe`根本没有运行，例如，因为`PHP/php.exe`应该是`PHP\php.exe`什么的。
*   该命令将版本信息写入其“错误”流而不是其“输出”流。

无论哪种方式，您都需要尝试从错误流中读取。您应该看到版本信息或来自`cmd`或的错误消息`php.exe`。

* * *

我还应该详细解释为什么@dystroy 的答案是错误的。

什么`exec`是创建一个新的外部进程来运行命令。此进程连接到 JVM，因此当您的应用程序写入`getOutput()`流时，该流会转到外部进程的“标准输入”，而当外部进程写入其“标准输出”和“标准错误”时，数据可以分别使用`getInput()`和`getError()`流读取。

各个流之间的连接是使用操作系统提供的“管道”实现的。

管道的问题在于它只有有限的缓冲能力。如果一个进程正在向一端写入而另一进程不读取，则写入进程最终将被迫停止写入。或者更准确地说，它会*阻塞*写入系统调用，等待管道耗尽。

@dystroy 的回答说要在 Java 端执行此操作：

1.  开始这个过程。
2.  等待过程完成
3.  读取进程的输出。

但是如果外部进程写入大量输出，它将无法*完成*，因为它会在写入管道时被阻塞。同时，Java 端正在等待外部进程完成，然后才开始从管道中读取数据。

僵局。

# iphone - 如何对存储在 sqlite 中的图像进行动画处理

> ID：13624350
> 
> 赞同：1
> 
> 时间：2012-11-29T11:05:18.937
> 
> 标签：iphone, sqlite, uiimageview

我有一个 UIImageView ，我想在其中显示存储在 sqlite 中的动画系列图像。我怎样才能做到这一点？

在 .hi 有喜欢..

```
 UIImageView *photosImgView;

       @property(nonatomic,retain)IBOutlet UIImageView *photosImgView; 
```

在.mi 有喜欢..

```
 @synthesize photosImgView;

    - (void)viewDidLoad
        {
            [super viewDidLoad];

            PeopleTable *ppl = [[People alloc] init];

         photosImgView.animationImages=[NSArray arrayWithArray:ppl.photo]; //(problem is   in this line)

       photosImgView.animationDuration = 5;
      photosImgView.animationRepeatCount = 1;
      [photosImgView startAnimating];

     [self.view addSubview:photosImgView];
 } 
```

请帮助我..提前谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T11:10:38.583

使用[FMDB](https://github.com/ccgus/fmdb)，这很容易...

并在你的桌子上做一个循环（选择）

```
NSMutableArray *imgs = [NSMutableArray array];
FMResultSet *s = [db executeQuery:@"SELECT * FROM myTable"];
while ([s next]) {
    [imgs addObject:[s stringForColumn:@"row"]];
}

photosImgView.animationImages=imgs; 
```

完毕！

# c++ - 将结构和结构成员传递给函数

> ID：13624353
> 
> 赞同：1
> 
> 时间：2012-11-29T11:05:26.507
> 
> 标签：c++, arrays, structure, members

将结构传递给函数时，原型/标头会是什么样子？将结构的成员传递给函数时它们会是什么样子？

例如...

```
struct a_struct{
int a;
int b;
};

a_struct point;

void f1(a_struct)
void f2(a_struct) 
```

假设我想将整个结构传递给 f1，但只是传递给 f2 的成员。我会使用数据类型 a_struct 作为两者的参数吗？或者 f2 会有不同的数据类型，因为我只传递了一个 int 成员。这对于结构数组会有所不同吗？我受命编写的程序应该使用结构数组。我认为这不会有太大的不同，只是它会自动通过引用传递。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-29T11:10:07.780

当传递对象（不仅仅是标量值）时，您必须关注内存所有权和复制等。这意味着您可以选择多种方式来声明函数的接口。例如，您可以按引用传递或按值传递。

您可能的声明可能是：

```
void f1(a_struct& my_struct); 
```

这将传递对 a_struct 对象的引用并防止对该对象的任何复制。但是，您的示例结构仅包含标量值，因此复制对象的可能性不会引起太多担心。结果，这就足够了：

```
void f1(a_struct my_struct); 
```

就将结构的成员传递给函数而言，需要将函数声明为采用成员的类型。例如，要将 a_struct 的 a 成员传递给函数，您可以：

```
void f1(int val); 
```

最后，数组确实使事情变得复杂，因为它们会作为指向函数的指针出现。例如，要传递一个 a_struct 对象数组，您可以进行以下声明：

```
void f1(a_struct* my_struct); 
```

但是，您可以简单地正常引用该参数。例如：

```
my_structs[1]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-29T11:11:32.670

要`f1`获取`a_struct`，这取决于您是否希望能够在`f1`. `void f1(a_struct s);`可以正常工作，并制作副本。`void f1(const a_struct & s);`需要一个参考，但你不能改变它（无论如何都没有麻烦）。我尽量避免非`const`参考。

如果你`f2`想拿一个`int`，你写`void f2(int);`。它不关心它`int`来自哪里（即在 a 内部`struct`或单独）。然后像这样称呼它`f2(point.b);`

使用数组的函数可能很麻烦，这取决于你想用它做什么。最简单的方法是记住数组退化为指针。

```
void f3 (a_struct * const structArray)
{ /* Do something */ }
a_struct myArray[10];
f3(myArray); 
```

还有其他（更好的）方法可以做到这一点。

编辑：如果您想将函数应用于数组的每个元素，有（表面上）两种方法（如果您考虑一下，实际上只是一种方法）。循环遍历数组，并将每个元素传递给一个接受 的函数`a_struct`，或者将整个数组传入（也带有 size 参数），然后在函数内部循环。即你会这样做：

```
a_struct myArray[10];
for (int i = 0; i < 10; ++i)
{
    f1( myArray[i] );
}

// Or, better, from <algorithm>
std::for_each(myArray, myArray+10, f1); 
```

请注意，这*不是*越界访问。只要从不取消引用，就可以保证允许在数组末尾创建一个*指针（恰好对于这些循环情况）。*

当然，这一切都假设您确实需要一个数组，而不是 a [`std::vector`](http://en.cppreference.com/w/cpp/container/vector)（在这种情况下，循环看起来基本相同，除了您将使用`begin()`and`end()`成员函数）。

实际上，如果您有权访问，则`c++11`可以使用[`std::begin()`](http://en.cppreference.com/w/cpp/iterator/begin)and ，这对于s 或数组的[`std::end()`](http://en.cppreference.com/w/cpp/iterator/end)工作方式完全相同。`vector`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T11:09:21.743

当你想传递一个结构（或一个类）时：

```
return_type fn_name(object_name) 
```

当你想通过它的一个成员时，假设`a`在这种情况下。

```
return_type fn_name(int) 
```

此外，除非我弄错了，否则所有函数参数都默认按值传递，除非您明确指定。如果您需要传递数组，那么它的语法将与任何其他类型相同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T11:09:56.190

如果您只想传递成员函数的值，请发送其类型，例如将 a_struct 的“a”作为参数的函数应该是 void func(int a);

但它适用于按值调用。如果您想使用调用作为参考，请使用指针。

# c# - jQuery Ajax 请求在“广告”文件夹中的页面上失败

> ID：13624354
> 
> 赞同：1
> 
> 时间：2012-11-29T11:05:27.463
> 
> 标签：c#, asp.net, jquery

我和我的团队一直在努力处理我们 ASP.NET 网站的某些页面上失败的 jQuery Ajax 请求，而其他页面却有成功的请求。

这是我的 jQuery 代码：

```
$.ajax({
  url: 'Test.aspx/Hello',
  data: '{"name": "alex"}',
  dataType: 'json',
  type: 'POST',
  contentType: 'application/json; charset=utf-8',
  error: function() { console.log("error"); },
  success: function(data) { console.log(data.d); }
}); 
```

以及 C# 代码（在 Test.aspx.cs 中）：

```
[WebMethod]
public static string Hello(string name)
{
    return "success: " + name;
} 
```

这听起来很奇怪，但似乎问题的出现是因为包含请求失败的页面的文件夹称为**"Adverts"**。

我已将带有 WebMethod (Test.aspx/Test.aspx.cs) 的页面移动到我项目的许多不同文件夹中。我总是可以通过 jQuery Ajax 调用 WebMethod，除非我将页面移动到*Adverts*文件夹中。我已经将*Adverts*文件夹重命名为“Jeffrey”。立即，Ajax 请求成功完成。然后，我创建了另一个名为“Adverts”的文件夹，并在其中移动了带有 WebMethod 的页面。奇怪的是，请求失败了。

我尝试从同一页面调用 WebMethod，如上面的示例，以及不同的页面，如下例：

```
url: '/Adverts/Test.aspx/Hello', 
```

除了不使用名为 Adverts 的文件夹之外，我不知道还能做什么，但这感觉就像退出。任何人都可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T13:37:37.230

Maybe you have some Advertisement-blocking extesions in your browser?

Also you can use "Incognito mode" while debugging.

# matlab - Matlab symbolic eigenvectors

> ID：13624360
> 
> 赞同：2
> 
> 时间：2012-11-29T11:05:44.253
> 
> 标签：matlab, eigenvector, symbolic-computation

I am trying to calculate the symbolic eigenvalues and vectors of matrices of the form

```
[ a, c, 0]
[ c, b, e]
[ 0, e, f] 
```

in matlab (replace a,b,c etc with some expressions containing x, y, z). When I have 4 off diagonal terms 0 then the program is succesful. But when the matrix has only two off diagonal elements zero (like as in the example), the program fails to find eigenvectors but can find eigenvectors (which is expected since it is third degree polynomial). The expression for the eigenvalues is ofcourse quite hectic. And when I try to calculate eigenvectors it gives the error

```
Warning: basis of eigenspace for eigenvalue - 1/2*((c^2*d^2*e^2 -...
Error: Unable to find eigenvectors. [mleigenvectors]
Error in ==> sym.eig at 74
S = mupadfeval('mleigenvectors',A); 
```

I am using matlab R2009a. Is this a problem that can be solved by for instance R2009b or better servers or it is just to many calculations to try? This does not seem plausible to me since if you take the above matrix subtract LI (where K is for eigenvalue I is id matrix) from it and try to solve the eigenvector equation, you can even solve it by hand to get expressions containing L, a,b,c,e,f,g. Then what you have to do is to simply put in expressions for lambda. However ofcourse the result will be very long so I am wondering if this is some memory issue?

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T05:33:17.880

我在 2012a 和 2010a 32bit 中进行了测试，两者都运行良好。

有趣的是，2012a 用了 0.2s，而 2010a 用了 0.3s。如果以下方法不起作用，我会怀疑存在内部错误，因为它们确实会大量更新符号处理。

```
tic; syms a c b e f; A=[a c 0;c b e;0 e f]; [V,D]=eig(A); toc; 
```

搜索证实这是 2008 年的问题......

[http://www.mathworks.com/matlabcentral/newsreader/view_thread/263921](http://www.mathworks.com/matlabcentral/newsreader/view_thread/263921)

> 实际上，史蒂文，在这种情况下，多项式确实简化为三次。Matlab symbolic 确实找到了特征值，但它在特征向量上失败了（使用我的 Matlab 2008b）
> 
> EDU>> 值=eig(A); EDU>>简化（值）
> 
> 答案=
> 
> ```
> (too long to show) 
> ```
> 
> 但是向量失败了：
> 
> EDU>> [向量,值]=eig(A); 警告：特征值的特征空间基础 1/3*a + 1/3*b + 1/3*c + (4/9*a^2 - 1/9*a*b - 1/9*a*c + 1/9*b^2 + 2/9*b*c + 1/9*c^2)/(4/9*a*b^2 + 1/9*a^2*b - 1/18* a*c^2 + 1/9*a^2*c - 7/18*b*c^2 + 1/9*b^2*c - 8/27*a^3 + 1/27*b^ 3 + 1/27*c^3 + (- 1/3*a^4*b^2 - 10/27*a^4*b*c - 1/27*a^4*c^2 + 1/ 9*a^3*b^3 + 2/9*a^3*... [linalg::eigenvectors] ??? 错误使用 ==> mupadfeval 在 28 错误：无法找到特征向量。[mleigenvectors]
> 
> ==> sym.eig 中的错误在 74 S = mupadfeval('mleigenvectors',A);
> 
> 我在 Mathematica 上尝试了同样的方法，它找到了特征向量，（我认为它们是正确的；），这是结果（太大而无法在此处发布）

# java - Java：从不同的类绘制到 JPanel

> ID：13624361
> 
> 赞同：3
> 
> 时间：2012-11-29T11:05:44.270
> 
> 标签：java, jpanel, paint

我有一个小问题 - 如何从其他类/文件/方法重新绘制主类中的 JPanel？

故事是，我有一个 Swing 窗口，它有一个方法列表，这些方法是通过浏览文件夹中的文件和类以及读取方法及其描述（注释）而自动生成的。现在，问题是当出现一个类时，需要从哪个方法绘制，比如说，使用圆圈和线条的太阳，那么我怎样才能让它出现在主窗口中？

我环顾四周（阅读：谷歌搜索），发现 JPanel 应该很方便，但是从另一个类和方法在它上面绘画，不知道他们的名字是什么以及他们什么时候使用绘画，创造了......困难。

我还添加了主要方法，如果这有任何用处..

```
static int indez = 0;
    protected static JList list; 
    static boolean valitud = false;
    public static JTextArea txtala;
    public static JScrollPane scrl;
    public static JPanel pilt;
    static Map<Integer, String[]> info = new TreeMap<Integer, String[]>();
    static ArrayList<Integer> nrs = new ArrayList<Integer>();
    public static void main(String[] args){
        Iterator<Entry<Integer, String[]>> iterator;
        Entry<Integer, String[]> entry;
        Integer val = 0;

        JFrame f = new JFrame("Praktikumid");
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.setSize(750, 350);

        JPanel panel = new JPanel();
        pilt = new JPanel(){public void paintComponent(Graphics g) {
            super.paintComponent(g);
            g.drawString("This is my custom Panel!", 10, 20);
        }};

        pilt.setVisible(false);
        pilt.setPreferredSize(new Dimension(f.getWidth() - 200, f.getHeight() - 20));
        pilt.setBackground(Color.GRAY);

        GroupLayout layout = new GroupLayout(panel);
        panel.setLayout(layout);
        layout.setAutoCreateGaps(true);
        layout.setAutoCreateContainerGaps(true);

        ActionListener kuular = new ActionListener() {
            public void actionPerformed(ActionEvent tegu) {
                valitud = true;
                try {
                    praxStarter();
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        };

        MouseListener hiir = new MouseListener() {  
            public void mouseClicked(MouseEvent e) {
                indez = list.getSelectedIndex();
            }
            @Override
            public void mouseEntered(MouseEvent e) {}
            @Override
            public void mouseExited(MouseEvent e) {}
            @Override
            public void mousePressed(MouseEvent e) {}
            @Override
            public void mouseReleased(MouseEvent e) {}  
        };  

        JLabel kiri = new JLabel("Vali hiirega ja vajuta nupule");

        ArrayList<String> selections = new ArrayList<String>();

        // Iterating over all the items in another method to get the modules

        list = new JList(selections.toArray());
        list.setSelectedIndex(0);
        list.addMouseListener(hiir);

        JScrollPane listScroller = new JScrollPane(list, JScrollPane.VERTICAL_SCROLLBAR_AS_NEEDED, JScrollPane.HORIZONTAL_SCROLLBAR_NEVER);
        listScroller.setMinimumSize(new Dimension(200, 50));
        listScroller.setMaximumSize(new Dimension(200, f.getHeight() * 1000));

        JButton button = new JButton("Vali");
        button.setActionCommand(Integer.toString(list.getSelectedIndex()));
        button.addActionListener(kuular);

        Font font = new Font("Arial", Font.PLAIN, 12);
        txtala = new JTextArea("<-- Vali sealt");
        txtala.setEditable(false);
        txtala.setMargin(new Insets(5, 8, 0, 0));
        txtala.setFont(font);
        scrl = new JScrollPane(txtala, JScrollPane.VERTICAL_SCROLLBAR_AS_NEEDED, JScrollPane.HORIZONTAL_SCROLLBAR_AS_NEEDED);
        scrl.setPreferredSize(new Dimension(f.getWidth() - 200, f.getHeight() - 20));

        pilt.setBackground(Color.PINK);
        pilt.setVisible(false);
        pilt.setPreferredSize(new Dimension(f.getWidth() - 200, f.getHeight() - 20));

        GroupLayout.ParallelGroup menu = layout.createParallelGroup();
        GroupLayout.SequentialGroup row = layout.createSequentialGroup();
        GroupLayout.SequentialGroup leftright = layout.createSequentialGroup();
        GroupLayout.ParallelGroup topdown = layout.createParallelGroup();
        GroupLayout.ParallelGroup dbl = layout.createParallelGroup();
        GroupLayout.ParallelGroup dblrow = layout.createParallelGroup();

        menu.addComponent(kiri);
        menu.addComponent(listScroller);
        menu.addComponent(button);
        leftright.addGroup(menu);
        dbl.addComponent(scrl);
        dbl.addComponent(pilt);
        leftright.addGroup(dbl);

        row.addComponent(kiri);
        row.addComponent(listScroller);
        row.addComponent(button);
        topdown.addGroup(row);
        dblrow.addComponent(scrl);
        dblrow.addComponent(pilt);
        topdown.addGroup(dblrow);

        layout.setHorizontalGroup(leftright);
        layout.setVerticalGroup(topdown);

        panel.setComponentZOrder(pilt, 1);
        panel.setComponentZOrder(scrl, 0);

        f.add(panel);
        //f.pack();
        f.setVisible(true);
    }

    public static void praxStarter()  throws Exception{
            // As a note - nrs is the holder for menu indexes
            // info is a Map of those same menu items 
            // And one entry in info is in the form of String[]{name, class.method}
        String[] tekst = new String[2];
        String kls, met;
        Method meetod;

        txtala.setText("");

        tekst = info.get(nrs.get(indez));
        kls = tekst[1].substring(0, tekst[1].indexOf("."));
        met = tekst[1].substring(tekst[1].indexOf(".") + 1, tekst[1].length());

        meetod = Class.forName(kls).getMethod(met);
        meetod.setAccessible(true);
        meetod.invoke(Class.forName(kls).newInstance());
    } 
```

此外，这将是一个类绘制（或尝试绘制）的示例：

```
public class brush extends Applet {
public void paint(Graphics g) {
        int x0 = 150;
        int y0 = 150;
        int r = 100;
        int x, y;
        double t;

        int w = getWidth();
        int h = getHeight();

        x0 = w / 2;
        y0 = h / 2;

        g.setColor(Color.white);
        g.fillRect(0, 0, w, h);

        g.setColor(Color.black);

        for (t = -Math.PI; t < Math.PI; t = t + Math.PI / 16) {
            x = (int) (r * Math.cos(t) + x0);
            y = (int) (r * Math.sin(t) + y0);
            g.drawLine(x0, y0, x, y);
        }
    }
} 
```

提前感谢您的任何回答和建议！

**编辑：** 这是一个截图： ![截图](../Images/63011852c98d834de34787605be5a598.png)

左侧是常规的屏幕打印文本模块。右侧是隐藏的文本部分，显示了 JPanel，从`pilt = new JPanel()`部分绘制了 JPanel，但在主类之外没有任何其他成功的编辑。

**编辑：**我尝试以多种方式绘制，尝试搜索出现的解决方案，例如

```
`txtala.setVisible(false);
scrl.setVisible(false);
pilt.setBorder(BorderFactory.createLineBorder(Color.BLACK));
pilt.setVisible(true);
//bi = new BufferedImage(pilt.getWidth() + 1000, pilt.getHeight() + 1000, BufferedImage.TYPE_INT_ARGB);
Graphics g = pilt.getGraphics();
g.setColor(Color.black);
g.drawLine(0, 0, 1000, 1000);
g.drawString("OLOLOLOLO!", 30, 50);
pilt.paint(g);
pilt.update(g);
//g.dispose();
//repaint();` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T10:54:46.767

哦，好吧，所以我走了简单的路。我没有在主窗口中使用相同的窗格，而是创建了一个新的弹出窗口并将框架放入其中。我知道，这不是最好的解决方案，但干草，总比没有好。如果我设法找到一种不弹出窗口的方法，那么我将在此处发布。在那之前，祝大家好运！

# image - Windows Phone 8 Xaml image resolution

> ID：13624363
> 
> 赞同：0
> 
> 时间：2012-11-29T11:05:50.080
> 
> 标签：image, xaml, windows-phone-8

with the 3 windows phone resolution :

*   480 × 800
*   768 × 1280
*   720 × 1280

that are scaled to :

*   480 × 800
*   480 × 800
*   480 × 853

What is the size for the image that I should use (admit I want to have a full screen image and that I ignore the 720p resolution) ?

480x800 and use `<Image Source="..." />`

768x1280 and use `<Image Source="..." Width="480" Height="800" />`

Using a 768x1280 image and scalling it to 480x800 is usefull ?

Thanks for your answer Best regard

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T14:08:35.737

> 使用 768x1280 图像并将其缩放到 480x800 有用吗？

是的。您应该始终选择 WXGA 分辨率的图像，并让操作系统为您缩小图像。（比例大约为 1.6）。

此外，如果可以避免的话，永远不要在 XAML 中指定静态宽度/高度。

# javascript - 使用 jQuery 创建 HTML 元素并不总是有效

> ID：13624378
> 
> 赞同：3
> 
> 时间：2012-11-29T11:06:38.560
> 
> 标签：javascript, jquery, backbone.js, underscore.js

我正在为我们的一个项目构建一个实时主题选择器，它可以工作。那太棒了！但是我还有一个错误，我无法解决，这让我发疯。

这就是问题所在：在您加载主题选择器页面的那一刻，主干应用程序（它使用 Backbone JS、Underscore JS 和 jQuery 构建）启动。在初始化时，应用程序会查找几件事，其中一件事是：我需要为当前主题使用什么颜色集（当前主题设置存储在数据库中）。

这是在初始化时调用的函数：

```
 // Select the colorset for the first time a new theme is picked
    selectColorset: function( newTheme ) {
        // Check or this is a new theme or not
        var themeCheck = ( typeof newTheme !== "undefined" ) ? true : false,
            colorset = ( !themeCheck ) ? parseInt( $("#js-colorset-input").val() , 10 ) : 0;

        // Select the right list
        $("#js-theme-colors ul").eq( colorset ).addClass("selected-set");
        this.renderColorStyle( colorset );
    } 
```

如您所见，此功能有两种使用方式：第一种是初始化，另一种是切换到其他主题。

首先我查了一下：为什么要调用这个函数？它是在更改事件上调用，还是在初始化时调用。如果在初始化时调用它，newTheme 变量将不会保存任何数据。

初始化时，颜色集编号将是页面上隐藏字段中的数字。所以现在我们有了颜色集编号，我们可以渲染颜色集样式表（this.renderColorStyle(colorset)）：

```
 // Insert the color stylesheet
    renderColorStyle: function( colorset ) {
        // Check or the colorset is given
        if( typeof colorset === "undefined" || colorset === "" ) {
            colorset = 0;
        }

        // Define the stylesheet for this theme
        if( $("#js-theme-iframe").contents().find("#js-theme-colorset").length > 0 ) {
            // Change the current stylesheet
            $("#js-theme-iframe")
                .contents()
                .find("head #js-theme-colorset")
                .attr("href", "stylesheets/themes/theme-" + this.themeID + "/theme-color-" + colorset + ".css");
        } else {
            // Insert a new stylesheet
            var stylesheet = $("<link />", {
                href: "stylesheets/themes/theme-" + this.themeID + "/theme-color-" + colorset + ".css",
                rel: "stylesheet",
                id: "js-theme-colorset"
            });

            // Append the stylesheet to the iframe
            $("#js-theme-iframe").contents().find("head").append( stylesheet );
        }
    } 
```

正如你所看到的，我首先检查或者我们有一个颜色集（只是为了确定），因为我们在初始化时没有颜色集样式表，所以我们要构建一个。这是用 jQuery 完成的。如您所见，我正在使用 href、rel 和 id（用于查找颜色集样式表）构建元素。

但是jQuery在初始化时一直给我一个空数组。所以样式表不在那里。所有数据都在那里，当我使用console.log（）函数查看或数据真的在那里时，结果证明它是。所以不是这样。

但我真的不知道为什么会这样。因为如果我在主题更改时调用这些函数，一切正常，jQuery 创建样式表。所以只有在初始化时它不起作用，它让我发疯。

希望有人可以向我解释每次调用完全相同的函数是如何可能的，但是在初始化时，它有一个不同于主题更改的输出（具有相同的数字和变量）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T12:14:35.527

整个问题是：我什至在初始化 iFrame 之前就调用了 selectColorset()。感谢@Leandro，我发现这是我的错误。谢谢您的帮助！

# iphone - 从 iOS SDK 中的 iMusic 库中获取特定的播放列表

> ID：13624379
> 
> 赞同：0
> 
> 时间：2012-11-29T11:06:41.950
> 
> 标签：iphone, objective-c, ios6, mpmusicplayercontroller

我是一名 iOS 开发人员。我正在开发 iMusic Library。我需要从 iOS SDK 中的 iMusic Library 中获取特定的特定播放列表。例如“最近添加”、“前 25”或用户手动创建的任何其他播放列表。

现在我正在使用以下代码，通过它我可以获得整个 iMusic 库，但现在我需要获取其特定的播放列表。

```
MPMediaQuery *media = [[MPMediaQuery alloc]init];
    NSArray *arr = [media items];
    int count1arr count];
    NSLog(@" count 1 is %d",count1);
    for(MPMediaItem *song in arr)
    {

        if(count>=count1)
        {
            return;
            count--;
        }
        else{
            //To print songs title
            NSString *title = [song valueForProperty:MPMediaItemPropertyTitle];
            NSString *artistsong valueForProperty:MPMediaItemPropertyAlbumArtist];
            NSLog(@"title is %@", title);
            NSLog(@"artist is %@",artist);

            if(artist == nil || [artist isEqualNSNull null]] || [artist isEqualToString:@""]){
                listDictNSDictionary dictionaryWithObjectsAndKeys:title,@"title",@"Unknown",@"artist", nil ];
                NSLog(@"List now is  %@",listDict);
                [dictArray addObject:listDict];
                NSLog(@"Dict array is %@",dictArray);
            }
            else{
                listDictNSDictionary dictionaryWithObjectsAndKeys:title,@"title",artist,@"artist", nil ];
                NSLog(@"List now is  %@",listDict);
                [dictArray addObject:listDict];
                NSLog(@"Dict array is %@",dictArray);

            }
        }
    }
    NSLog(@"List now is  %@",listDict);. 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T11:13:11.107

正如您在文档中所读到的，您可以通过调用该类[`MPMediaQuery`](http://developer.apple.com/library/ios/#documentation/mediaplayer/reference/MPMediaQuery_ClassReference/Reference/Reference.html)来创建播放列表媒体查询对象。[`playlistsQuery`](http://developer.apple.com/library/ios/#documentation/mediaplayer/reference/MPMediaQuery_ClassReference/Reference/Reference.html#//apple_ref/doc/uid/TP40008220-CH1-SW8)[`MPMediaQuery`](http://developer.apple.com/library/ios/#documentation/mediaplayer/reference/MPMediaQuery_ClassReference/Reference/Reference.html)

```
MPMediaQuery *playlistQuery = [MPMediaQuery playlistsQuery];
NSArray *playlistArray = [playlistQuery collections]; 
```

# android - openFileChooser opening 2 times on selecting image from gallery

> ID：13624383
> 
> 赞同：0
> 
> 时间：2012-11-29T11:06:56.520
> 
> 标签：android

I implemented openFileChooser of webchromeclient which is opening a PHP page. When i select image from gallery it again opens the gallery ie the gallery is opening two times.

Don't know how to get rid of this.

here is my code:

```
public class MyWebChromeClient extends WebChromeClient{
    public void openFileChooser(ValueCallback<Uri> uploadMsg) {

        mUploadMessage = uploadMsg;
        Intent i = new Intent(Intent.ACTION_GET_CONTENT);
        i.addCategory(Intent.CATEGORY_OPENABLE);
        i.setType("image/*");
        startActivityForResult(Intent.createChooser(i,"File Chooser"), FILECHOOSER_RESULTCODE);

    }

    public void openFileChooser( ValueCallback<Uri> uploadMsg, String acceptType ) {
        mUploadMessage = uploadMsg;
        Intent i = new Intent(Intent.ACTION_GET_CONTENT);
        i.addCategory(Intent.CATEGORY_OPENABLE);
        i.setType("*/*");
        startActivityForResult(
                Intent.createChooser(i, "File Browser"),
                FILECHOOSER_RESULTCODE);
    }
} 
```

this is onactivityresult:

```
protected void onActivityResult(int requestCode, int resultCode,
        Intent intent) {

    if (requestCode == FILECHOOSER_RESULTCODE) {
        if (null == mUploadMessage)
            return;
        Uri result = intent == null || resultCode != RESULT_OK ? null
                : intent.getData();
        mUploadMessage.onReceiveValue(result);
        mUploadMessage = null;

    } 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T11:11:55.463

签入清单文件，如果您将活动声明为

> 单实例

那么 Activity on result 方法将在错误的时间被调用。

# c# - Can dependency files of a library be copied programatically based on the library reference

> ID：13624384
> 
> 赞同：2
> 
> 时间：2012-11-29T11:06:59.167
> 
> 标签：c#

I have a library which does some printing logs to file functionality. This DLL is dependent on the .config file of the library project.

I had referenced this library from another project B. When I build the project B copy of the DLL reference is placed to output folder of project B. When I run the project B, DLL is taken from the output folder of Project B and when DLL tries to load the config file form same folder(Output folder Project B) it fails and doesn't work as expected.

Is there any way to copy the dependency config file when referenced as LIBRARY IN C#? Or is there any other way to handle the referencing of DLLs?

# asp.net-mvc - Handling CORS Preflight requests to ASP.NET MVC actions

> ID：13624386
> 
> 赞同：54
> 
> 时间：2012-11-29T11:07:07.083
> 
> 标签：asp.net-mvc, cors

I'm trying to perform a cross-domain POST request to an ASP.NET MVC controller action. This controller action accepts & uses various parameters. The problem is that when the preflight request happens, the controller action actually attempts to execute & because the OPTIONS request doesn't pass any data, the controller action throws out a 500 HTTP error. If I remove the code that uses the parameter, or the parameter itself, the entire request chain is completed successfully.

An example of how this is implemented:

**Controller Action**

```
public ActionResult GetData(string data)
{
    return new JsonResult
    {
        Data = data.ToUpper(),
        JsonRequestBehavior = JsonRequestBehavior.AllowGet
    };
} 
```

**Client-side code**

```
<script type="text/javascript">
        $(function () {
            $("#button-request").click(function () {
                var ajaxConfig = {
                    dataType: "json",
                    url: "http://localhost:8100/host/getdata",
                    contentType: 'application/json',
                    data: JSON.stringify({ data: "A string of data" }),
                    type: "POST",
                    success: function (result) {
                        alert(result);
                    },
                    error: function (jqXHR, textStatus, errorThrown) {
                        alert('Error: Status: ' + textStatus + ', Message: ' + errorThrown);
                    }
                };

                $.ajax(ajaxConfig);
            });
        });
    </script> 
```

Now, whenever the preflight request happens, it returns a 500 HTTP code, because the "data" parameter is null, seeing as the OPTIONS request doesn't pass any values.

The server application has been set up in my local IIS on port 8100 & the page running the client-side code is set up on port 8200 to mimic the cross-domain calls.

I have also configured the host (on 8100) with the following headers:

```
Access-Control-Allow-Headers: Content-Type
Access-Control-Allow-Methods: POST, GET
Access-Control-Allow-Origin: http://localhost:8200 
```

One workaround I had found, was to check the HTTP method that executes the action & if it's a OPTIONS request to just return blank content, otherwise execute the action code. Like so:

```
public ActionResult GetData(string data)
{
    if (Request.HttpMethod == "OPTIONS") {
        return new ContentResult();
    } else {
        return new JsonResult
        {
            Data = data.ToUpper(),
            JsonRequestBehavior = JsonRequestBehavior.AllowGet
        };
    }
} 
```

But this approach feels very clunky to me. I considered adding this sort of logic to an `Attribute`, but even this would mean decorating every action that will get called using CORS with it.

Is there a more elegant solution to getting this functionality to work?

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-11-30T13:24:50.583

所以我找到了一个可行的解决方案。对于每个请求，我检查它是否是 CORS 请求以及请求是否带有 OPTIONS 动词，表明它是预检请求。如果是，我只发回一个空响应（当然，它只包含在 IIS 中配置的标头），从而否定控制器操作的执行。

然后，如果客户端确认允许根据预检返回的标头执行请求，则执行实际的 POST 并执行控制器操作。我的代码示例：

```
protected void Application_BeginRequest()
{
    if (Request.Headers.AllKeys.Contains("Origin", StringComparer.OrdinalIgnoreCase) &&
        Request.HttpMethod == "OPTIONS") {
        Response.Flush();
    }
} 
```

如前所述，这对我有用，但如果有人知道更好的方法，或者我当前的实现中有任何缺陷，我会很高兴听到他们的消息。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-07-31T19:46:01.840

扩展卡尔的答案，我把他的代码插入到我的 OWIN 管道中：

```
app.Use((context, next) =>
{
     if (context.Request.Headers.Any(k => k.Key.Contains("Origin")) && context.Request.Method == "OPTIONS")
     {
         context.Response.StatusCode = 200;
         return context.Response.WriteAsync("handled");
     }

     return next.Invoke();
}); 
```

只需将其添加到 Startup.cs 中 IAppBuilder 的开头（或注册 WebAPI 之前的任何位置）

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-05-25T20:14:00.280

接受的答案就像一个魅力，但我发现请求实际上正在传递给控制器​​。我收到了一个`200`状态码，但响应正文包含大量 HTML，但控制器有异常。因此，我发现使用 而不是 using`Response.Flush()`更好`Response.End()`，它确实会停止请求的执行。此替代解决方案如下所示：

**编辑：**修复了原始答案中的错字。

```
protected void Application_BeginRequest()
{
    if (Request.Headers.AllKeys.Contains("Origin", StringComparer.OrdinalIgnoreCase) &&
        Request.HttpMethod == "OPTIONS") {
        Response.End();
    }
} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-05-05T09:37:07.950

以下是我使用 ASP.Net Web Api 处理预检/CORS 问题的方法。我只是将 Microsoft.AspNet.WebApi.Cors Nuget 包添加到我的 Web 项目中。然后在我的 WebApiConfig.cs 文件中添加了这一行：

```
config.EnableCors(new ApplicationCorsPolicy()); 
```

并创建了一个自定义 PolicyProvider 类

```
public class ApplicationCorsPolicy : Attribute, ICorsPolicyProvider
{
    public async Task<CorsPolicy> GetCorsPolicyAsync(HttpRequestMessage request, CancellationToken cancellationToken)
    {
        var corsRequestContext = request.GetCorsRequestContext();
        var originRequested = corsRequestContext.Origin;

        if (await IsOriginFromAPaidCustomer(originRequested))
        {
            // Grant CORS request
            var policy = new CorsPolicy
            {
                AllowAnyHeader = true,
                AllowAnyMethod = true
            };
            policy.Origins.Add(originRequested);
            return policy;
        }
        // Reject CORS request
        return null;
    }

    private async Task<bool> IsOriginFromAPaidCustomer(string originRequested)
    {
        // Do database look up here to determine if origin should be allowed.
        // In my application I have a table that has a list of domains that are
        // allowed to make API requests to my service. This is validated here.
        return true;
    }
} 
```

请看，Cors 框架允许您添加自己的逻辑来确定允许哪些来源等。如果您将 REST API 暴露给外部世界并且可以访问您网站的人员（来源）列表是，这将非常有用在数据库等受控环境中。现在，如果您只是允许所有来源（在所有情况下这可能不是一个好主意），您可以在 WebApiConfig.cs 中执行此操作以全局启用 CORS：

```
config.EnableCors(); 
```

就像 WebApi 中的过滤器和处理程序一样，您还可以向控制器添加类或方法级别的注释，如下所示：

```
[EnableCors("*, *, *, *")] 
```

请注意，EnableCors 属性具有接受以下参数的构造函数

1.  允许的来源列表
2.  允许的请求标头列表
3.  允许的 HTTP 方法列表
4.  允许的响应头列表

您可以在每个控制器/端点静态指定允许访问什么资源的人。

**2016 年6 月 24 日更新：** 我应该提到我的 Web.config 中有以下内容。看起来这些可能不是每个人的默认设置。

```
<system.webServer>
    <handlers>
        <remove name="ExtensionlessUrlHandler-Integrated-4.0" />
        <remove name="OPTIONSVerbHandler" />
        <remove name="TRACEVerbHandler" />
        <add name="ExtensionlessUrlHandler-Integrated-4.0" path="*." verb="*" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0" />
        </handlers>
</system.webServer> 
```

资料来源：[微软](https://msdn.microsoft.com/en-us/magazine/dn532203.aspx?f=255&MSPPError=-2147217396)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-11-30T13:36:35.537

这可能是一个红鲱鱼。我最近让 CORS 工作正常，没有跳过你正在做的任何事情。

这是使用 Thinktecture.IdentityModel nuget 包的组合完成的，更重要的是......删除所有对 WebDAV 的引用。这包括从 IIS 中删除 webdav 模块，并确保您的 web 配置中有以下行：

```
<system.webServer>
    <validation validateIntegratedModeConfiguration="false" />
    <modules runAllManagedModulesForAllRequests="true">
      <remove name="WebDAVModule" />
      <add name="ErrorLog" type="Elmah.ErrorLogModule, Elmah" preCondition="managedHandler" />
      <add name="ErrorMail" type="Elmah.ErrorMailModule, Elmah" preCondition="managedHandler" />
      <add name="ErrorFilter" type="Elmah.ErrorFilterModule, Elmah" preCondition="managedHandler" />
    </modules>
    <handlers>
      <remove name="WebDAV" />
      <remove name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" />
      <remove name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" />
      <remove name="ExtensionlessUrlHandler-Integrated-4.0" />
      <add name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness32" responseBufferLimit="0" />
  <add name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework64\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness64" responseBufferLimit="0" />
  <add name="ExtensionlessUrlHandler-Integrated-4.0" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0" />
</handlers> 
```

然后，您可以使用 thinktecture 从 Global.asax 使用如下静态类配置 CORS：

```
public class CorsConfig
{
    public static void RegisterCors(HttpConfiguration httpConfiguration)
    {
        var corsConfig = new WebApiCorsConfiguration();
        corsConfig.RegisterGlobal(httpConfiguration);

        corsConfig.ForAllResources().AllowAllOriginsAllMethodsAndAllRequestHeaders();
    }
} 
```

来源：[http ://brockallen.com/2012/06/28/cors-support-in-webapi-mvc-and-iis-with-thinktecture-identitymodel/](http://brockallen.com/2012/06/28/cors-support-in-webapi-mvc-and-iis-with-thinktecture-identitymodel/)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-08-01T06:57:39.613

这些答案都不适合我，但以下 webconfig 设置可以。对我来说，两个关键设置是设置`Access-Control-Allow-Headers`并`Content-Type`注释掉删除`OPTIONSVerbHandler`:

```
 <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"></modules>
    <httpProtocol>
      <customHeaders>
        <add name="Access-Control-Allow-Origin" value="*" />
        <add name="Access-Control-Allow-Headers" value="Content-Type" />
      </customHeaders>
    </httpProtocol>
    <handlers>
      <remove name="ExtensionlessUrlHandler-Integrated-4.0" />
      <!--<remove name="OPTIONSVerbHandler" />-->
      <remove name="TRACEVerbHandler" />
      <add name="ExtensionlessUrlHandler-Integrated-4.0" path="*." verb="*" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0" />
    </handlers>
  </system.webServer> 
```

# python - In what way does celery + sqlalchemy badly handle multiple workers?

> ID：13624392
> 
> 赞同：3
> 
> 时间：2012-11-29T11:07:32.030
> 
> 标签：python, sqlalchemy, celery

According to the [Celery docs](http://docs.celeryproject.org/en/latest/getting-started/brokers/sqlalchemy.html#limitations), the SQLAlchemy broker has problems with "more than a few" workers and may execute tasks multiple times. I haven't been able to find more precise information on this. Does the choice of database matter? Given that the database is PostgreSQL 9.1, does someone have experience with how many "more than a few" are, and how common an occurrence this is? Does it happen all the time or only under extreme corner cases?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T15:30:36.077

不建议使用数据库作为任务代理，因为与 rabbitmq 或 redis 等其他代理（第一个是 celery 的最佳选择）相比，它的性能不佳。

这是因为工作人员将使用资源来轮询数据库以获取新任务并发布状态和结果。

Sqlalchemy 不应用作代理，除非您的任务数量非常有限且只有 1 个工作人员（又名开发/登台机器）

Rabbitmq 是推荐用于生产环境的代理，您应该使用它 :)

# c# - ASP.NET 将反斜杠规范化为正斜杠

> ID：13624396
> 
> 赞同：11
> 
> 时间：2012-11-29T11:07:41.827
> 
> 标签：c#, asp.net, asp.net-mvc-4

ASP.NET 正在将请求路径中的反斜杠“规范化”为正斜杠，我需要它们作为反斜杠出现（它用于在数据库中执行查找）。我不介意转义的正斜杠是否未转义，这与[这个问题](https://stackoverflow.com/questions/591694/url-encoded-slash-in-url)不同。

```
config.Routes.MapHttpRoute(
    name: "TransactionsApi",
    routeTemplate: "api/transactions/{*transaction}",
    defaults: new { controller = "transactions", transaction = RouteParameter.Optional }
); 
```

*请注意，我已设置事务以匹配路径的其余部分。*

我尝试了以下 URL（来自浏览器和 Fiddler）：

*   `api/transactions/mscorlib.pdb\DFA83312EAB84F67BD225058B188F22B1\mscorlib.pdb`
*   `api/transactions/mscorlib.pdb\\DFA83312EAB84F67BD225058B188F22B1\\mscorlib.pdb`
*   `api/transactions/mscorlib.pdb%5CDFA83312EAB84F67BD225058B188F22B1%5Cmscorlib.pdb`
*   `api/transactions/mscorlib.pdb%5C%5CDFA83312EAB84F67BD225058B188F22B1%5C%5Cmscorlib.pdb`

当他们点击我的 Web API 方法时，他们都是`mscorlib.pdb/DFA83312EAB84F67BD225058B188F22B1/mscorlib.pdb`. 我检查了电流`HttpContext`，看起来 ASP.NET 正在执行此规范化（不是 MVC4）。

可能的解决方案：

*   插入事务时，将“\”规范化为“/”，这样无论 ASP.NET 通过什么查找都会成功。*好像有点臭*
*   [Base64](http://haacked.com/archive/2008/04/09/upcoming-changes-in-routing.aspx#68032)`{*transaction}`包含反斜杠的部分。*不是真正的地址栏可破解*

关于如何让 ASP.NET**不**进行这种规范化的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-04-11T17:13:41.427

## 简短的回答

您无法阻止这种行为，因为它被硬编码到 IIS 中。

## 调查

我想通过反编译运行时并遵循代码来调查这个问题。这样做总是很好：您了解运行时的工作原理，有时您会发现问题。让我们开始旅程吧……

作为起点，我使用 ILSpy 反编译 System.Web，从 HttpRuntime 类开始。浏览`public static void ProcessRequest(HttpWorkerRequest wr)`, `ProcessRequestNoDemand`, `ProcessRequestNow`, `ProcessRequestInternal`...

在这里，我想调查以下几行：
`httpContext = new HttpContext(wr, false);`,
`httpContext.Response.InitResponseWriter();`,
`httpAsyncHandler.BeginProcessRequest(httpContext, this._handlerCompletionCallback, httpContext);`.

在`HttpContext.HttpContext(HttpWorkerRequest wr, bool initResponseWriter)`很多事情上可能会导致这种情况：
`this.Init(request, response)`,
`new HttpRequest(wr, this)`。

更准确地说`HttpContext.GetEurl()`（看起来很可疑）、
`Request.InternalRewritePath(VirtualPath.Create(virtualPath), null, true)`（安全）、
`VirtualPath.Create(virtualPath)` （看起来很可疑）、
`virtualPath = UrlPath.FixVirtualPathSlashes(virtualPath);`（臭名昭著的！）。

让我们编写将我们带到这里的堆栈跟踪：

*   `HttpRuntime.ProcessRequest...`（多种方法）
*   `new HttpContext(wr, false)`
*   `this.Init(new HttpRequest(wr, this), new HttpResponse(wr, this));`
*   `if (!string.IsNullOrEmpty(eurl))`（我们可以阻止输入 if 吗？）
*   `this.Request.InternalRewritePath(VirtualPath.Create(virtualPath), null, true);`
*   `VirtualPath Create(string virtualPath)`
*   `unsafe static VirtualPath Create(string virtualPath, VirtualPathOptions options)`

最后一个（不安全的）方法正在对路径做一些事情。首先，每个字符都有一个循环。如果 char 低于 '.'，并且不同于 '/' 并且等于 '\'，则`flag = true`. 在循环之后，`if (flag)`（[src](http://referencesource.microsoft.com/#System.Web/VirtualPath.cs,604)），然后可能会引发异常，并且`virtualPath = UrlPath.FixVirtualPathSlashes(virtualPath);`（[src](http://referencesource.microsoft.com/#System.Web/VirtualPath.cs,610)）。

现在似乎没有什么可以帮助我们避免去那里（也许是 eurl 的事情？）。

( [src](http://referencesource.microsoft.com/#System.Web/Util/UrlPath.cs,318) ) 将反斜杠替换为斜杠，如果删除重复的斜杠`string FixVirtualPathSlashes(string virtualPath)`。耻辱。

`GetEurl`方法呢？当您阅读[src](http://referencesource.microsoft.com/#System.Web/HttpContext.cs,519)时，您会发现这对您没有帮助。

### 结论

http 运行时正在无缘无故地杀死你的反斜杠。您无法禁用此行为。

## 解决方法 #1

现在，一定有办法。引用[此页面的](https://confluence.atlassian.com/fishkb/iis-rewrite-rule-when-committer-name-contains-backslashes-695110056.html)[这个人](https://stackoverflow.com/a/33801447/282105)有一个解决方法。似乎使用重写模块，您可以将原始 URL 放回管道中。我不太喜欢这个解决方案，因为我不知道到底发生了什么。我有另一个想法...

我还没有测试这个东西。你能？

## 搜索解决方法 #2（未找到）

如果有存放原始请求路径的地方呢？

搜索, , ,中`HttpRequest`没有一个包含所需的值。甚至没有, , , , ,私有字段。`Url.OriginalString``RawUrl``Path``ServerVariables``_filePath``_path``_queryStringText``_rawUrl``_rewrittenUrl``_url`

搜索`IIS7WorkerRequest`，该值已在运行时更改。我怀疑 IIS 在将请求推送到 ASP.NET 运行时*之前*正在做这件事。看来是没有希望了。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-15T00:10:19.633

在发出请求之前，您是否尝试过将 UrlEncode() 应用于路径？

# java - Jackrabbit :- Jackrabbit 是否支持在 MS-Office 中以读写模式打开文件？

> ID：13624398
> 
> 赞同：1
> 
> 时间：2012-11-29T11:07:45.110
> 
> 标签：java, jakarta-ee, webdav, jackrabbit

我正在使用 Java-Jackrabbit 创建 WEBDAV 应用程序。首先，我已经部署了 jackrabbit-webapp-2.4.2.war 并运行它。它支持添加新文件，删除和替换现有文件。

但是当我试图在 MS Word 中打开这个文件时，它以只读模式打开它，我想以读写模式打开它。我用其他演示 webdav 应用程序尝试过同样的事情，它工作正常。

可以用 Jackrabbit 实现吗？

# perl - 使用 Powershell 在非常大的日志文件的最后 x 行中搜索特定字符串

> ID：13624403
> 
> 赞同：5
> 
> 时间：2012-11-29T11:08:03.837
> 
> 标签：perl, powershell

我有一个要求，到目前为止我还没有在论坛上找到解决方案或帮助...

问题：我监控实时系统，这些会生成许多非常大的日志文件，这些文件每天都会滚动，1GB 并不少见，我所做的是查看（尾端）日志以了解已知的错误情况或我想要监控的其他字符串，我可能需要对其采取行动。

由于此类工作既耗时又乏味，而且人为错误很容易遗漏日志中的问题，因此我一直在自动化此日志文件监控。我利用一个名为 Servers Alive 的产品来执行计划检查，并编写脚本来监视日志文件中是否出现我感兴趣的日志条目，这些条目可能表明服务存在问题，并且我可以在必要时调用其他脚本来重新启动服务解决遇到的问题。

我之前使用 Perl 为这些日志监控任务编写了脚本，这些脚本非常快，但不一定是最干净的方法，我是管理员而不是程序员，所以我没有开发人员方法或经验依靠。

下面的 Perl 代码片段显示我“打开”了一个日志文件`$logfile`，然后从文件末尾向后“寻找”给定数量的数据，然后我从该点到文件末尾搜索数据我有兴趣监控的日志条目，在这个例子中，日志条目是“ `No packet received from EISEC Client`”

在此示例中，我们正在监视的日志条目表明 EISEC 服务存在问题，并且简单地重新启动服务通常可以解决问题，所有这些我都会自动使用 Servers Alive 作为计划的检查和警报机制。

**Perl 脚本函数**

```
sub checkEisecSrvloggedon {

print "$logfile\n";

if (open (EISECSRV_LOGGEDON, $logfile)) {

    seek (EISECSRV_LOGGEDON, -40000, 2);

    $line = <EISECSRV_LOGGEDON>;

    $eisecsrvloggedon_ok = 0;

    while ($line = <EISECSRV_LOGGEDON>) {   

            if ($line =~/No packet received from EISEC Client/) {

                #increment counter
                ++$eisecsrvloggedon_ok; 

                }

            }
        }
    } 
```

*现在我们已经转移到Windows Server 2008 R2*和*Windows 7*客户端，如果可能的话，我想为此使用 PowerShell 实现一个解决方案，但是我无法找到有关如何快速有效地执行此操作的详细信息，并且没有任何大的内存开销。

我尝试过基于 Get-Content 的解决方案，但由于需要读取整个日志文件，因此这些类型的解决方案无法使用，因为查询日志文件需要很长时间。我需要能够定期检查这些大型日志文件中的一些，在某些情况下每隔几分钟检查一次。我已经看到非常适合尾随日志文件末尾的尾部类型解决方案，并且这些脚本正在使用`System.IO.File`方法。这确实获得了我希望在我的脚本中实现的性能/速度，但我对*PowerShell*不够熟悉，不知道如何使用这种方法快速到达大型日志文件的末尾，然后能够向后读取给定数量的数据，然后在此日志部分中搜索相关字符串。

有没有人有任何想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T11:40:19.707

如果您使用 PowerShell 3.0 或更高版本，则可以结合使用`get-content`和`select-string`命令行开关来获得相同的功能。从 3.0 版开始，`get-content`支持`-tail`仅以有效方式返回文件最后*n*行的选项。使用它，您可以使用以下内容重新实现上面的 Perl 脚本（在最后 1000 行中搜索）：

```
# Returns the number of occurrences
(get-content logfile.txt -Tail 1000 | select-string -pattern "No packet received from EISEC Client").Length 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T11:46:34.757

向后寻求，[对 Poshcode 存储库的贡献](http://poshcode.org/87)似乎非常符合您的要求：

```
# Name: Get-Tail.ps1
# Author: William Stacey
# Created: 02/22/2007
# Description: Gets the last N lines of a file. Does scan from end-of-file so works on large files. Also has a loop flag that prompts for refresh.

function Get-Tail([string]$path = $(throw "Path name must be specified."), [int]$count = 10, [bool]$loop = $false)
{
    if ( $count -lt 1 ) {$(throw "Count must be greater than 1.")}
    function get-last
    {
        $lineCount = 0
        $reader = new-object -typename System.IO.StreamReader -argumentlist $path, $true
        [long]$pos = $reader.BaseStream.Length - 1

        while($pos -gt 0)
        {
            $reader.BaseStream.Position = $pos
            if ($reader.BaseStream.ReadByte() -eq 10)
            {
                if($pos -eq $reader.BaseStream.Length - 1)
                {
                    $count++
                }
                $lineCount++
                if ($lineCount -ge $count) { break }
            }
            $pos--
        } 

        if ($lineCount -lt $count)
        {
            $reader.BaseStream.Position = 0
        }

        while($line = $reader.ReadLine())
        {
            $lines += ,$line
        }

        $reader.Close()
        $lines
    }

    while(1)
    {
        get-last
        if ( ! $loop ) { break }
        $in = read-host -prompt "Hit [Enter] to tail again or Ctrl-C to exit"
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T11:39:33.023

[PSCX](http://pscx.codeplex.com/)有一个名为的 cmdlet `Get-FileTail`，它可以有效地获取文件的最后一行，从而避免事先读取完整的文件。

# java - 如何在Android中删除自定义对话框的白色边框？

> ID：13624406
> 
> 赞同：3
> 
> 时间：2012-11-29T11:08:10.477
> 
> 标签：java, android, android-layout

我想删除自定义对话框的白色边框。我在 Stack Overflow 上找到了很多内容。但仍然没有得到解决方案。如何删除这个白色边框。请有人帮我解决这个问题。在此先感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T13:00:59.830

试试这个使用对话框而不是 AlertDialog.Builder 并从对话框中删除边框线：

```
Dialog dialog = new Dialog(this,android.R.style.Theme_Translucent_NoTitleBar); 
```

并且您必须替换对话框的窗口内容视图。我认为您可以在对话框构造函数中使用它：

```
this.getWindow().setContentView(R.layout.your_dialog_view); 
```

# ios - （越狱 iOS 开发者）iOS 守护进程不工作

> ID：13624407
> 
> 赞同：2
> 
> 时间：2012-11-29T11:08:15.057
> 
> 标签：ios, jailbreak

我正在为越狱的 iPhone 开发一个 iOS 应用程序。作为启动守护进程，它需要在手机启动时运行。所以这是问题所在，当下载包时，Cydia 将守护程序的 plist 放在 /System/Library/LaunchDaemons 中，并将 .app 放在 /Applications 中。当手机重新启动时，应用程序不会运行。

我错过了什么或做错了什么？

PS 当我使用 SSH 手动放置文件时，该应用程序在手机重启时运行完美。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T07:26:48.717

发现问题了！当应用程序打包为 .deb 以供 Cydia 上传时，.app 和 .plist 的权限都从 root 用户更改为普通用户。

解决方案：在设备上安装包时，添加脚本将权限更改为root。

# html - 将不同大小的文本对齐到列表元素的底部

> ID：13624417
> 
> 赞同：3
> 
> 时间：2012-11-29T11:08:32.600
> 
> 标签：html, css

给定以下标记：

```
<ul>
    <li><span>One</span></li>
    <li><span>Two</span></li>
    <li><span>Three</span></li>
    <li><span>Four</span></li>
    <li><span>Five</span></li>
</ul> 
```

以及以下 CSS：

```
body {
 font-family: Arial, sans-serif;
 font-size: 14px;
}

ul {
 list-style-type: none;
 padding: 0;
 margin: 0;   
}

li {
 border-bottom: 1px solid red;      
 float: left;
 margin-left: 10px;
 height: 70px; /* height of largest element */
}

span {
 font-weight: bold;
 display: block; /* important, needs to be block */
}

li:nth-child(2) {
 font-size: 2em;   
}

li:nth-child(3) {
 font-size: 3em;   
}

li:nth-child(4) {
 font-size: 4em;   
}

li:nth-child(5) {
 font-size: 5em;   
} 
```

每个列表项包含不同大小的文本。

我想将每个`<span>`元素与其父元素的底部对齐，以`<li>`确保底部边框也对齐。

这是这个*不起作用*[的jsfiddle](http://jsfiddle.net/benfosterdev/Xj5NA/)。

需要支持IE8>以上。

**注意：项目必须浮动**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T11:13:26.460

`float:left`从 li 中删除并 添加`display:inline; vertical-align:bottom;`

```
li {
 border-bottom: 1px solid red;      
 display:inline;  vertical-align:bottom;  
 margin-left: 10px;
 height: 70px; /* height of largest element */
} 
```

[**演示**](http://jsfiddle.net/Xj5NA/12/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T11:54:56.823

`display:table`在 li 元素上使用

`display:table-cell`在 span 元素上；

另外，对我来说，最大的字体大小是 84px 高。

[现场演示](http://jsfiddle.net/danield770/DDMXm/1/)

# android - Facebook Android Sdk 3.0.2 Post to me/feed 看起来不正确

> ID：13624418
> 
> 赞同：2
> 
> 时间：2012-11-29T11:08:36.110
> 
> 标签：android, facebook

我正在使用适用于 Android 的新 Facebook Sdk 3.0，并且正在尝试使用新的 Graph Api 请求在用户墙上发布帖子。现在，我可以发帖了，但在 Facebook 页面上，它显示好像我共享了一个链接（我不希望那样）。我的最终目标是发表一个看起来像这样的帖子： [https ://docs.google.com/drawings/d/1ARTDj6qtSx4-qZQ0ZU1sZZppEMYMti8zwFLTZneSm2o/edit](https://docs.google.com/drawings/d/1ARTDj6qtSx4-qZQ0ZU1sZZppEMYMti8zwFLTZneSm2o/edit)

当您单击它时，您将转到 Facebook 应用程序。我的请求代码：

```
Bundle params = new Bundle();
params.putString("name", title);
params.putString("caption", caption);
params.putString("description", description);
params.putString("picture", imageURL);
params.putString("link", FACEBOOK_APP_URL);

Request request = new Request(Session.getActiveSession(), "me/feed",
    params, HttpMethod.POST, new Callback() {

        @Override
        public void onCompleted(Response response) {
        // TODO Auto-generated method stub

        }
    });

RequestAsyncTask task = new RequestAsyncTask(request);
task.execute(); 
```

此时，上面的代码正在发布正确的图像和文本，但是在单击时您会被转移到图像 url，并且帖子本身的标题是“Alexander 共享链接”等等。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-19T08:10:20.627

试试这个代码： -

```
Session s = Session.getActiveSession();

Request request = Request.newStatusUpdateRequest(s, "Testing App For genral purpose", new Request.Callback()
    {
        @Override
        public void onCompleted(Response response)
        {
            if (response.getError() == null)
                Toast.makeText(mContext, "Status updated successfully", Toast.LENGTH_LONG)
                        .show();

        }
    });
request.executeAsync(); 
```

# c++ - 使用结构铸造的有趣行为

> ID：13624423
> 
> 赞同：0
> 
> 时间：2012-11-29T11:08:58.293
> 
> 标签：c++, c

我的程序有一个有趣的行为。最好先显示代码。

```
typedef struct PS {
    int num;
} PR;

typedef struct PS* PN;

typedef struct {
    int num;
    int tmp;
} VD;

void F (PN VPtr)
{
    register VD* qVPtr = (VD*)VPtr;
    // if this is call #2
    // qVPtr->tmp already is 8 for VP arg
    // qVPtr->tmp already is 16 for VP1 arg

    switch(VPtr->num){
    case 0:
        qVPtr->tmp = 8;
    return;
    case 1:
        qVPtr->tmp = 16;
        return;
    }
}

int main()
{
    PN VP = NULL;
    VP = (PN)malloc(sizeof(PR));

    VP->num = 0;
    F (VP);

    PN VP1 = NULL;
    VP1 = (PN)malloc(sizeof(PR));

    VP1->num = 1;
    F (VP1);

    F (VP);     // call #2 with VP arg
    F (VP1);    // call #2 with VP1 arg

    return 0;
} 
```

在 main 函数中`VP`，`VP1`不知道`qVPtr`和`tmp`字段，但根据函数`VPtr`中的参数，`F`可以获得 的最后一个值`qVPtr->tmp`。

你能详细解释一下这种可能性吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T11:14:18.033

在函数中`F`写入未分配的内存，这是未定义的行为。*会*发生不好的和奇怪的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T11:29:33.127

F 的行为没有什么奇怪的——如果你告诉它将指针 VPtr 视为指向 VD 结构的指针，它会考虑内存，从 VPtr 开始作为包含 VD 结构对象的内存，尽管那里没有任何 VD 对象。你的“魔法”出现了，因为结构 PR 和 VD 都以相同大小的整数字段开头。但是下一部分内存是未分配的，这意味着系统可以用它做任何事情，当你在那里写的时候，你可以在你的腿上开枪。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T11:20:55.970

您只是在写超过分配的内存块的末尾。它足够小，因此它会命中未分配的虚拟内存区域的机会很低，因此您不会遇到分段错误。但是在内存检查器中运行程序`valgrind`并享受输出：

```
==624== Invalid write of size 4
==624==    at 0x4004E2: F (pr.c:23)
==624==    by 0x400529: main (pr.c:37)
==624==  Address 0x4c38044 is 0 bytes after a block of size 4 alloc'd
==624==    at 0x4A05FDE: malloc (vg_replace_malloc.c:236)
==624==    by 0x40050F: main (pr.c:34)
==624==
==624== Invalid write of size 4
==624==    at 0x4004EB: F (pr.c:26)
==624==    by 0x400555: main (pr.c:43)
==624==  Address 0x4c38094 is 0 bytes after a block of size 4 alloc'd
==624==    at 0x4A05FDE: malloc (vg_replace_malloc.c:236)
==624==    by 0x40053B: main (pr.c:40)
==624==
==624== Invalid write of size 4
==624==    at 0x4004E2: F (pr.c:23)
==624==    by 0x400561: main (pr.c:45)
==624==  Address 0x4c38044 is 0 bytes after a block of size 4 alloc'd
==624==    at 0x4A05FDE: malloc (vg_replace_malloc.c:236)
==624==    by 0x40050F: main (pr.c:34)
==624==
==624== Invalid write of size 4
==624==    at 0x4004EB: F (pr.c:26)
==624==    by 0x40056D: main (pr.c:46)
==624==  Address 0x4c38094 is 0 bytes after a block of size 4 alloc'd
==624==    at 0x4A05FDE: malloc (vg_replace_malloc.c:236)
==624==    by 0x40053B: main (pr.c:40) 
```

# php - 如何更改默认截断内容的长度？

> ID：13624425
> 
> 赞同：2
> 
> 时间：2012-11-29T11:08:57.903
> 
> 标签：php, drupal

现在，当在分类页面上时，它列出了每个节点正文内容的所有内容的一部分。我想控制截断内容的长度，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T04:10:02.313

按照结构/内容类型（`admin/structure/types`），然后单击`manage display`您的内容类型右侧，然后单击`teaser`（在右上角，如果没有这样的链接，您应该通过单击`Custom display settings`页面底部的 来创建它） . 现在您所需要的就是将`Trim length`' 值更改为您想要的任何值。

# spring - 春季交易

> ID：13624427
> 
> 赞同：1
> 
> 时间：2012-11-29T11:09:08.977
> 
> 标签：spring, jta

我在 spring 中编写了一个自定义的 REST 补偿框架，它记录了一个 REST 调用以及补偿调用信息（使用注释和 AOP），如果出现异常，它将被执行。

例如，休息呼叫 1（成功）-> 休息呼叫 2（失败）-> 休息呼叫 1 补偿。

该应用程序还使用 JTA 事务。如果 JTA 事务回滚，我可以扩展 JTA 事务管理器以调用补偿框架逻辑吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T11:23:35.633

您可以注册一个 TransactionSynchronization（Spring 的 TransactionSynchronizationManager 为您提供了一个围绕 JTA 功能的包装器，该功能也适用于非 JTA 环境）。因为您已经在使用 AOP，所以使用 AOP 处理独立于事务的异常会更容易吗？

# algorithm - 如何在多个条件下选择项目

> ID：13624433
> 
> 赞同：2
> 
> 时间：2012-11-29T11:09:50.423
> 
> 标签：algorithm, set, distance

我正在创建一个小软件，遇到了一个概念问题。我将尝试用一个小例子来解释这种情况：

*   我有一个包含多个点的坐标系。
*   每个点都由它在 x 和 y 轴上的位置描述（到目前为止正常），可以是蓝色或红色。
*   现在我想创建事件。
*   每个事件包含一个蓝色点和一个红色点，并且有几个关于如何选择它们的条件。
    *   例如：蓝色（x）和红色（x）之和*（=蓝色和红色点的x值）*必须是偶数。
    *   同时，可能存在 y 值的校验和不能是素数的条件。
*   每个点都可以是多个事件的一部分。
*   在我的情况下，每个点都有在创建事件时“使用”的特定资源，并且只要它具有所需数量的资源，该点就可以成为新事件的一部分。

我需要的是创建尽可能多的事件（即直到蓝色或红色组的资源耗尽）。假设我有 2 个红点和 2 个蓝点。Yes 和 No 表示它们是否满足给定条件：

```
B1 R1 是
B1 R2 是
B2 R1 是
B2 R2 没有
```

如果我匹配 B1 和 R1（每个列表的顶部），我只会得到一个事件，因为 B2 和 R2 不匹配。另一方面，如果我将 B1 与 R2 匹配，将 B2 与 R1 匹配，我会收到 2 个事件。这就是我需要的。

此外，我的事件的平均距离（从蓝点到红点）应该尽可能低。

我考虑过通过随机选择符合条件的蓝点和红点来创建事件，多次执行整个过程并保持事件数量最多和平均距离最短的结果。但我不太喜欢它，因为我无法提供任何关于结果质量的声明。结果也不是确定性的。

任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T16:26:08.830

如有疑问，请从蛮力开始*（至少这样您可以检查其他解决方案的有效性）* - 在非常小的测试数据集上*（例如 4+3 点 => n=4*3 可能的对）：

1.  从所有可能对的乘积中创建一个可能的事件数组*（与标准匹配的蓝-红对的列表，还预先计算此步骤中的距离）*
    - 最坏情况大小`n = red_count * blue_count`
2.  将此数组复制到一组集合中，每个集合只有一个事件：`{{(r1,b1)}, {(r1,b2)}, ...}`
3.  对于每组：

    *   更新积分上的资源*（每组课程单独存储）*
    *   如果还有要匹配的资源，则通过再添加 1 对来拆分当前集*（对可以添加的每一对进行此操作）*并删除当前的不完整集，如下所示：

        ```
        4 sets of 1 event     10 sets of 2 events
        e1 e2 e3 e4              e1 e2 e3 e4
        x  x  x  x            e1 x  x  x  x
                          ->  e2    x  x  x
                              e3       x  x
                              e4          x 
        ```

    *   重复直到没有任何集合可以被新的对改进（没有更多的资源或使用所有对）

=> 最坏情况**O(n ^(2k) )** *(n=r*b=所有可能的红色/蓝色对，k = 最大集合中的事件数)*

然后受到[全局优化](http://en.wikipedia.org/wiki/Global_optimization)技术的启发，不确定如何在没有更详细的规范的情况下组合您的需求，想...

第 1 步和第 2 步是 O(n) =>`5000*300 = 1.5m`对对来说可能是可以接受的

我会尝试**按距离对事件数组进行排序**- *O(nlogn)* - 并且**只使用`x`最短的事件作为我的启发式算法的起点**（测试 1-10 最短以查看性能/准确性权衡）+ 之后只保留`x`最短的集合分裂...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T18:05:25.157

这是一个有趣的问题，但似乎有很多参数需要考虑。

作为第一步，我会尝试使用*兼容性矩阵*来简化问题/参数的呈现。矩阵的行将对应于蓝色点，矩阵的列将代表红色点。对于您的示例问题，矩阵将如下所示：

```
 R1    R2

B1   1     1

B2   1     0 
```

因此，该矩阵表示哪些点可以与哪些其他点配对以产生事件。

接下来，让我们尝试使用此矩阵解决您描述中的示例问题。这可以使用一些动态编程来完成：

1.  假设所有`R`点都存在，但唯一可用的蓝点是`B1`。构建一个*解决方案向量*，列出可能的组合。所以你会得到`[(R1, B1)], [(R2, B1)]`.

2.  现在我们**逐步**引入`B2`上一步构建的解向量。对于解向量的第一个分量，注意`R1`在上一步已经用完了，`R2`不能与 相减`B2`，所以这个解不能改进。然而，解向量的第二个分量可以被改进，因为`(R1, B2)`可以添加到它。这样我们就得到了最终的解向量`[(R1, B1)],[(R2, B1), (R1, B2)]`。

3.  现在，您可以计算解决方案向量的各个组件，并选择其中包含最多项目的组件（或事件，在您的情况下）。

我认为可以将这种方法扩展到您的问题的完整版本，但它需要更多的内务管理（因为您还必须跟踪资源使用情况）。`R1`与您的示例不同，`B1`在第一步中配对并不一定意味着`R1`完成......它可能有足够的资源以便可以重复使用。

我希望这至少能给你一些见解。祝你好运！:)

# c# - 如何在 window.open 方法的 url 末尾发送 C# 属性作为参数

> ID：13624438
> 
> 赞同：2
> 
> 时间：2012-11-29T11:10:03.507
> 
> 标签：c#, javascript

我有一个 url，我必须在其中发送一些属性值。我的财产如下

```
 public string MyValue
        {
            get { return MyValue; }
            set { MyValue = value; }
        } 
```

现在我想将此值作为参数发送到 javascript 中 window.open 方法中的 url。

`window.open("../SearchPage/MySearch.aspx?MyValue=","left=20,top=20,width=500,height=500")` 我试图在 javascript 中访问 `'<%= MyValue %>"`。

但这不会到来。它给出了解析器错误。如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T11:31:30.283

如果你的 JavaScript 位于一个单独的文件中，你不能使用`<%= %>`在那里定义变量，你应该使用`hidden fields, cookies`和类似的东西

但是如果你可以把js放在aspx页面中，它应该可以工作

```
<head runat="server">
    <title></title>
    <script type="text/javascript">
        alert('<%= MyProperty %>');
    </script>
</head> 
```

这对我有用，其中 MyProperty 是我的 aspx 页面中的公共字符串属性，请确保正确放置**引号**

**编辑**

这是我的页面

```
public partial class WebForm1 : System.Web.UI.Page
{
    public string MyProperty { get; set; }
    protected void Page_Load(object sender, EventArgs e)
    {
        MyProperty = "aaaaaaaaa";
    }
} 
```

**编辑**

顺便提一句

```
public string MyValue
{
    get { return MyValue; }
    set { MyValue = value; }
} 
```

不是会导致 StackOverflowException 设置，您应该创建私有变量来存储值:)

```
private string _myValue;
public string MyValue
{
    get { return _myValue; }
    set { _myValue = value; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T11:49:12.033

@Mihir：您使用了 '<%= MyValue %>" ，它的开头有一个单引号。在开头和结尾都使用双引号。

试试这个： **"<%= MyValue %>"**。

可能它会工作。

您还可以使用 Screenfields 将值从一页发送到另一页。

# java - 在给定的字符串日期中获取该月的最后一天

> ID：13624442
> 
> 赞同：75
> 
> 时间：2012-11-29T11:10:14.293
> 
> 标签：java, date, calendar

我的输入字符串日期如下：

```
String date = "1/13/2012"; 
```

我得到的月份如下：

```
SimpleDateFormat dateFormat = new SimpleDateFormat("MM/dd/yyyy");
Date convertedDate = dateFormat.parse(date);
String month = new SimpleDateFormat("MM").format(convertedDate); 
```

但是如何在给定的字符串日期中获取该月的最后一个日历日？

例如：对于字符串`"1/13/2012"`，输出必须是`"1/31/2012"`.

* * *

## 回答 #1

> 赞同：184
> 
> 时间：2012-11-29T11:13:45.317

### Java 8 及更高版本。

通过使用`convertedDate.getMonth().length(convertedDate.isLeapYear())`where`convertedDate`是`LocalDate`.

```
String date = "1/13/2012";
LocalDate convertedDate = LocalDate.parse(date, DateTimeFormatter.ofPattern("M/d/yyyy"));
convertedDate = convertedDate.withDayOfMonth(
                                convertedDate.getMonth().length(convertedDate.isLeapYear())); 
```

### Java 7 及以下。

通过使用`getActualMaximum`方法`java.util.Calendar`：

```
String date = "1/13/2012";
SimpleDateFormat dateFormat = new SimpleDateFormat("MM/dd/yyyy");
Date convertedDate = dateFormat.parse(date);
Calendar c = Calendar.getInstance();
c.setTime(convertedDate);
c.set(Calendar.DAY_OF_MONTH, c.getActualMaximum(Calendar.DAY_OF_MONTH)); 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-11-29T11:16:18.900

这看起来像您的需求：

[http://obscuredclarity.blogspot.de/2010/08/get-last-day-of-month-date-object-in.html](http://obscuredclarity.blogspot.de/2010/08/get-last-day-of-month-date-object-in.html)

代码：

```
import java.text.DateFormat;  
import java.text.DateFormat;  
import java.text.SimpleDateFormat;  
import java.util.Calendar;  
import java.util.Date;  

//Java 1.4+ Compatible  
//  
// The following example code demonstrates how to get  
// a Date object representing the last day of the month  
// relative to a given Date object.  

public class GetLastDayOfMonth {  

    public static void main(String[] args) {  

        Date today = new Date();  

        Calendar calendar = Calendar.getInstance();  
        calendar.setTime(today);  

        calendar.add(Calendar.MONTH, 1);  
        calendar.set(Calendar.DAY_OF_MONTH, 1);  
        calendar.add(Calendar.DATE, -1);  

        Date lastDayOfMonth = calendar.getTime();  

        DateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");  
        System.out.println("Today            : " + sdf.format(today));  
        System.out.println("Last Day of Month: " + sdf.format(lastDayOfMonth));  
    }  

} 
```

输出：

```
Today            : 2010-08-03  
Last Day of Month: 2010-08-31 
```

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2016-11-19T04:56:29.413

通过使用 java 8 java.time.LocalDate

```
String date = "1/13/2012";
LocalDate lastDayOfMonth = LocalDate.parse(date, DateTimeFormatter.ofPattern("M/dd/yyyy"))
       .with(TemporalAdjusters.lastDayOfMonth()); 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2019-01-07T19:24:11.683

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2015-07-30T09:39:46.103

> 使用 Java 8 `DateTime`/ `LocalDateTime`：

```
String dateString = "01/13/2012";
DateTimeFormatter dateFormat = DateTimeFormatter.ofPattern("MM/dd/yyyy", Locale.US); 
LocalDate date = LocalDate.parse(dateString, dateFormat);       
ValueRange range = date.range(ChronoField.DAY_OF_MONTH);
Long max = range.getMaximum();
LocalDate newDate = date.withDayOfMonth(max.intValue());
System.out.println(newDate); 
```

> 或者

```
String dateString = "01/13/2012";
DateTimeFormatter dateFormat = DateTimeFormatter.ofPattern("MM/dd/yyyy", Locale.US); 
LocalDate date = LocalDate.parse(dateString, dateFormat);
LocalDate newDate = date.withDayOfMonth(date.getMonth().length(date.isLeapYear()));
System.out.println(newDate); 
```

输出：

```
2012-01-31 
```

> `LocalDateTime``LocalDate`如果您的日期字符串中有时间信息，则应该使用它。IE`2015/07/22 16:49`

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2019-01-07T12:33:21.593

**Java 8 及更高版本：**

```
import java.time.LocalDate;
import java.time.Year;

static int lastDayOfMonth(int Y, int M) {
    return LocalDate.of(Y, M, 1).getMonth().length(Year.of(Y).isLeap());
} 
```

**以 Basil Bourque 的评论为准**

```
import java.time.YearMonth;

int lastDayOfMonth = YearMonth.of(Y, M).lengthOfMonth(); 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-08-09T05:35:49.330

最简单的方法是构造一个新`GregorianCalendar`实例，见下文：

```
Calendar cal = new GregorianCalendar(2013, 5, 0);
Date date = cal.getTime();
DateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");
System.out.println("Date : " + sdf.format(date)); 
```

输出：

```
Date : 2013-05-31 
```

注意力：

> month 用于设置日历中 MONTH 日历字段的值。月份值是基于 0 的，例如 0 表示一月。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-06-29T13:30:11.897

您可以使用以下代码获取该月的最后一天

```
public static String getLastDayOfTheMonth(String date) {
        String lastDayOfTheMonth = "";

        SimpleDateFormat formatter = new SimpleDateFormat("dd-MM-yyyy");
        try{
        java.util.Date dt= formatter.parse(date);
        Calendar calendar = Calendar.getInstance();  
        calendar.setTime(dt);  

        calendar.add(Calendar.MONTH, 1);  
        calendar.set(Calendar.DAY_OF_MONTH, 1);  
        calendar.add(Calendar.DATE, -1);  

        java.util.Date lastDay = calendar.getTime();  

        lastDayOfTheMonth = formatter.format(lastDay);
        } catch (ParseException e) {
            e.printStackTrace();
        }
        return lastDayOfTheMonth;
    } 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-05-26T12:16:11.640

```
 String givenStringDate ="07/16/2020";
        DateTimeFormatter formatter = DateTimeFormatter.ofPattern("MM/dd/yyyy");
        java.util.Date convertedUtillDate;
            /*
             * If your output requirement is in LocalDate format use below snippet
             * 
             */
            LocalDate localDate =LocalDate.parse(givenStringDate, formatter);
            LocalDate localDateLastDayOfMonth = localDate.with(TemporalAdjusters.lastDayOfMonth());

            /*
             * If your output requirement is in Calendar format use below snippet
             * 
             */
            convertedUtillDate = Date.from(localDate.atStartOfDay(ZoneId.systemDefault()).toInstant());
            Calendar calendarLastDayOfMonth = Calendar.getInstance();
            calendarLastDayOfMonth.setTime(convertedUtillDate);
            int lastDate = calendarLastDayOfMonth.getActualMaximum(Calendar.DATE);
            calendarLastDayOfMonth.set(Calendar.DATE, lastDate); 
```

在 Java 1.8 中测试。我希望这会对某人有所帮助。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-06-12T04:52:44.087

我认为最简单和最快的方法是

```
public static int getLastDayOf(int month, int year) {
    switch (month) {
        case Calendar.APRIL:
        case Calendar.JUNE:
        case Calendar.SEPTEMBER:
        case Calendar.NOVEMBER:
            return 30;
        case Calendar.FEBRUARY:
            if (year % 4 == 0) {
                return 29;
            }
            return 28;
        default:
            return 31;
    }
} 
```

因为这些值是普遍存在的！

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2012-11-29T11:13:29.330

使用`GregorianCalendar`. 设置对象的日期，然后使用`getActualMaximum(Calendar.DAY_IN_MONTH)`.

[http://docs.oracle.com/javase/7/docs/api/java/util/GregorianCalendar.html#getActualMaximum%28int%29](http://docs.oracle.com/javase/7/docs/api/java/util/GregorianCalendar.html#getActualMaximum%28int%29)（但在 Java 1.4 中是一样的）

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2017-10-31T05:57:02.297

```
public static String getLastDayOfMonth(int year, int month) throws Exception{
    DateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");

    Date date = sdf.parse(year+"-"+(month<10?("0"+month):month)+"-01");

    Calendar calendar = Calendar.getInstance();
    calendar.setTime(date);

    calendar.add(Calendar.MONTH, 1);
    calendar.set(Calendar.DAY_OF_MONTH, 1);
    calendar.add(Calendar.DATE, -1);

    Date lastDayOfMonth = calendar.getTime();

    return sdf.format(lastDayOfMonth);
}
public static void main(String[] args) throws Exception{
    System.out.println("Last Day of Month: " + getLastDayOfMonth(2017, 1));
    System.out.println("Last Day of Month: " + getLastDayOfMonth(2017, 2));
    System.out.println("Last Day of Month: " + getLastDayOfMonth(2017, 3));
    System.out.println("Last Day of Month: " + getLastDayOfMonth(2017, 4));
    System.out.println("Last Day of Month: " + getLastDayOfMonth(2017, 5));
    System.out.println("Last Day of Month: " + getLastDayOfMonth(2017, 6));
    System.out.println("Last Day of Month: " + getLastDayOfMonth(2017, 7));
    System.out.println("Last Day of Month: " + getLastDayOfMonth(2017, 8));
    System.out.println("Last Day of Month: " + getLastDayOfMonth(2017, 9));
    System.out.println("Last Day of Month: " + getLastDayOfMonth(2017, 10));
    System.out.println("Last Day of Month: " + getLastDayOfMonth(2017, 11));
    System.out.println("Last Day of Month: " + getLastDayOfMonth(2017, 12));
    System.out.println("Last Day of Month: " + getLastDayOfMonth(2018, 1));
    System.out.println("Last Day of Month: " + getLastDayOfMonth(2018, 2));
    System.out.println("Last Day of Month: " + getLastDayOfMonth(2018, 3));

    System.out.println("Last Day of Month: " + getLastDayOfMonth(2010, 2));
    System.out.println("Last Day of Month: " + getLastDayOfMonth(2011, 2));
    System.out.println("Last Day of Month: " + getLastDayOfMonth(2012, 2));
    System.out.println("Last Day of Month: " + getLastDayOfMonth(2013, 2));
    System.out.println("Last Day of Month: " + getLastDayOfMonth(2014, 2));
    System.out.println("Last Day of Month: " + getLastDayOfMonth(2015, 2));
    System.out.println("Last Day of Month: " + getLastDayOfMonth(2016, 2));
    System.out.println("Last Day of Month: " + getLastDayOfMonth(2017, 2));
    System.out.println("Last Day of Month: " + getLastDayOfMonth(2018, 2));
    System.out.println("Last Day of Month: " + getLastDayOfMonth(2019, 2));
    System.out.println("Last Day of Month: " + getLastDayOfMonth(2020, 2));
    System.out.println("Last Day of Month: " + getLastDayOfMonth(2021, 2));
} 
```

**输出：**

> 每月最后一天：2017-01-31
> 每月最后一天：2017-02-28
> 每月最后一天：2017-03-31
> 每月最后一天：2017-04-30 每月
> 最后一天：2017-05-31每月最后一天
> ：2017-06-30 每月
> 最后一天：2017-07-31每月最后一天
> ：2017-08-31 每月
> 最后一天：2017-09-30 每月
> 最后一天：2017-10-31每月最后一天
> ：2017-11-30 每月
> 最后一天：2017-12-31 每月最后一天：2018-01-31 每月最后一天：2018-02-28 每月
> 最后
> 一天：
> 2018-03-31
> 每月最后一天：2010-02-28
> 每月最后一天：2011-02-28
> 每月最后一天：2012-02-29 每月
> 最后一天：2013-02-28
> 每月最后一天：2014-02-28
> 每月最后一天：2015-02-28
> 每月最后一天：2016-02-29
> 每月最后一天：2017-02-28 每月
> 最后一天：2018-02-28
> 每月最后一天：2019-02-28 每月最后一天：2020-02-29 每月 最后
> 一天：2021-02-28

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2018-11-25T17:48:03.977

您可以使用Java 8中的[plusMonths](https://docs.oracle.com/javase/8/docs/api/java/time/LocalDate.html#plusMonths-long-)和[minusDays方法：](https://docs.oracle.com/javase/8/docs/api/java/time/LocalDate.html#minusDays-long-)

```
// Parse your date into a LocalDate
LocalDate parsed = LocalDate.parse("1/13/2012", DateTimeFormatter.ofPattern("M/d/yyyy"));

// We only care about its year and month, set the date to first date of that month
LocalDate localDate = LocalDate.of(parsed.getYear(), parsed.getMonth(), 1);

// Add one month, subtract one day 
System.out.println(localDate.plusMonths(1).minusDays(1)); // 2012-01-31 
```

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2021-10-13T09:42:09.697

最后我发现解决方案已经过测试并且有效

```
public static Date toDate(String date, String DATE_FORMAT) {
    Date dt = null;
    try {
        String[] d = date.split(" ");
        String[] f = DATE_FORMAT.split(" ");
        if (d.length > 1) {
            if(f.length > 1) {
                DateFormat df = new SimpleDateFormat(DATE_FORMAT);
                df.setLenient(false);
                dt = df.parse(date);
            }
            else
            {
                DateFormat df = new SimpleDateFormat(f[0]);
                df.setLenient(false);
                dt = df.parse(date);
            }
        } else {
            DateFormat df = new SimpleDateFormat(f[0]);
            df.setLenient(false);
            dt = df.parse(date);
        }
        return dt;
    } catch (ParseException e) {

        return null;
    }
}

private SimpleDateFormat dateFormatter;
dateFormatter = new SimpleDateFormat("MM/dd/yyyy", Locale.US);
String StartDate = "05/01/2021";
Calendar endDate = new GregorianCalendar();
Date convertedDate = toDate(StartDate, "MM/dd/yyyy");
endDate.setTime(convertedDate);
endDate.set(Calendar.DAY_OF_MONTH, 1);
endDate.add(Calendar.MONTH, 1);
endDate.add(Calendar.DATE, -1);
String EndDate = dateFormatter.format(endDate.getTime()); 
```

**出局：2021 年 5 月 31 日**

* * *

## 回答 #15

> 赞同：-2
> 
> 时间：2017-09-29T12:13:15.020

对我来说很好用

```
 Calendar cal = Calendar.getInstance(TimeZone.getTimeZone());
    cal.set(Calendar.MONTH, month-1);  
    cal.set(Calendar.YEAR, year);  
    cal.add(Calendar.DATE, -1);  
    cal.set(Calendar.DAY_OF_MONTH, 
    cal.getActualMaximum(Calendar.DAY_OF_MONTH));
    cal.set(Calendar.HOUR_OF_DAY, 0);
    cal.set(Calendar.MINUTE, 0);
    cal.set(Calendar.SECOND, 0);
    cal.set(Calendar.MILLISECOND, 0);
    return cal.getTimeInMillis(); 
```

* * *

## 回答 #16

> 赞同：-3
> 
> 时间：2015-02-27T15:53:47.167

我在我的 JasperServer 报告中使用了这个单行：

```
new SimpleDateFormat("yyyy-MM-dd").format(new SimpleDateFormat("yyyy-MM-dd").parse(new java.util.Date().format('yyyy') + "-" + (new Integer (new SimpleDateFormat("MM").format(new Date()))+1) + "-01")-1) 
```

看起来不太好，但对我有用。基本上它是在当月加 1，得到那个月的第一天，然后减去一天。

# python - Aptana Studio 调试器输出延迟并发布到单独的窗口 - 想要重定向到控制台

> ID：13624447
> 
> 赞同：0
> 
> 时间：2012-11-29T11:10:20.640
> 
> 标签：python, wxpython, stdout, aptana3, stderr

我正在使用 Aptana studio 3.2.2 开发和调试使用 wxPython 和 matplotlib 的 python GUI。

当我在断点处停止调试器时，我的控制台处于非活动状态（这是显示在 Aptana Studio PyDev 透视图中屏幕底部的控制台）。我可以成功输入文本，但是按回车后控制台上没有返回任何内容。

但是，除了我的 gui 之外，还有一个名为“wxPython：stdout/stderr”的窗口是打开的。我的控制台输出出现在这里......但仅当我恢复执行脚本时。在此之前，窗口是无响应的。

这个问题只发生在 Windows 中，当我在 Linux 环境中执行相同操作时，调试器控制台可以正常工作。

有谁知道如何重定向控制台输出以确保它实时显示在 Aptana 控制台中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T10:10:55.753

经过一番狩猎和搜索，解决方案变得非常简单。显然这是 wx 的默认行为。要修复它，简单的使用

```
app = wx.App(redirect=False) 
```

创建应用程序对象时。

见[http://wxpython.org/docs/api/wx.App-class.html](http://wxpython.org/docs/api/wx.App-class.html)

# ruby-on-rails - 不用于发送邮件的必需的延迟作业示例

> ID：13624449
> 
> 赞同：1
> 
> 时间：2012-11-29T11:10:45.300
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, delayed-job

试图让 delay_job 工作。我想在不阻止我的 rails 应用程序的情况下向另一台服务器发布 http 帖子。我认为delayed_job 是个好主意。但是我无法让它工作。

主要是在控制器中，如果我遇到一个条件，我想向已知服务器发送一个 http 帖子。到目前为止我还没有理解的是

1.  我可以延迟控制器本身定义的功能吗？
2.  我是否需要定义一个单独的类并在那里拥有可以包含在控制器中的功能？

到目前为止的步骤：

*   添加 gem 'delayed_job_active_record' 到 Gem 文件
*   还添加了 gem“守护进程”
*   rails 生成延迟作业：升级
*   耙分贝：迁移
*   运行 RAILS_ENV=开发脚本/delayed_job 启动

然后执行代码。控制器中的代码：

尝试 1：# 导致 NoMethodError（SimpleObjectForTestController 的未定义方法`post_to_server`）

```
class SimpleObjectForTestController 
 def create
  ....
  if( some condition )
    SimpleObjectForTestController.delay.post_to_server
  end
  ....
 end
 def post_to_server
     Typhoeus::Request.post( "http://127.0.0.1:4567/hi", :body => $fixed_config )
 end
end 
```

尝试 2：现在使用 SeperatedClass 也给出相同的错误

```
 class SeperatedClass
    def post_to_server
       Typhoeus::Request.post( "http://127.0.0.1:4567/hi", :body => $fixed_config )
    end
 end
 class SimpleObjectForTestController
  def create
    ....
    if( some condition )
       SeperatedClass.delay.post_to_server
    end
    ....
  end
end 
```

其他一些上下文：这是一个非 UI 应用程序。使用 Rails 3.2.6 Ruby 1.9.2 使用delayed_job (3.0.3) 使用delayed_job_active_record (0.3.2)

有人可以告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T12:18:18.123

你`post_to_server`是一个实例方法。这应该有效：

```
def self.post_to_server
  ...
end 
```

# javascript - 如何在javascript中从本地PC获取目录的内容

> ID：13624450
> 
> 赞同：7
> 
> 时间：2012-11-29T11:10:51.950
> 
> 标签：javascript, jquery, html

如何在 javascript/jQuery 中从本地 PC 获取目录的内容？例如从`C:\Images`

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-29T11:15:10.840

这仅适用于谷歌浏览器：

```
<input type="file" webkitdirectory> 
```

这将提示用户选择一个目录，然后您可以访问`files`输入的属性以查看包含的文件。

然后可以使用[文件系统 API](https://developer.mozilla.org/en-US/docs/DOM/File_API/File_System_API)为用户选择的文件构建一个虚拟的沙盒文件系统，并以编程方式访问这个虚拟文件系统，就好像它是一个由桌面应用程序访问的真实文件系统一样。

没有其他办法，因为那将是一个很大的安全问题

谷歌浏览器中的工作演示：http: [//jsfiddle.net/JwgqC/](http://jsfiddle.net/JwgqC/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T11:19:51.403

here you can read local files by html5 and javascript using the file APIS

[http://www.html5rocks.com/en/tutorials/file/dndfiles/](http://www.html5rocks.com/en/tutorials/file/dndfiles/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T11:16:57.143

出于安全原因，Javascript/Jquery 无法访问本地文件系统。这是不可能的。所以尝试一些服务器端基本代码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-10-19T06:39:22.827

现在，几年后，在 Chrome**和**Firefox（52.8，但更新 Firefox 很容易）中[访问本地文件可以正常工作。](https://www.html5rocks.com/en/tutorials/file/dndfiles/)它也适用于 IE 11。

 **```
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>files</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
</head>
<body>
<script>
// Check for the various File API support.
if (window.File && window.FileReader && window.FileList && window.Blob) {
  // Great success! All the File APIs are supported.
} else {
  alert('The File APIs are not fully supported in this browser.');
}
</script>
</body>
</html> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-29T11:13:22.157

我认为这是不可能的，因为访问本地文件系统是一个可怕的安全风险。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-29T11:14:28.783

Javascript 无法访问用户驱动器。那将是一个很大的安全问题，不是吗？:D

相反，您需要使用其他技术，例如 flash 或 java-applet。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-29T11:15:09.983

无法从浏览器通过 javascript 访问本地文件系统，这很好！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-29T11:13:04.977

您可以使用 php、ruby、java 等技术编写脚本，该脚本将列出所有文件，然后通过 ajax 将此信息发送到您的浏览器。

但是由于安全限制，您不能仅通过 javascript 执行此操作。**

# java - iOS 和 Java 与 CTR 模式的 AES 互操作性

> ID：13624451
> 
> 赞同：1
> 
> 时间：2012-11-29T11:10:54.477
> 
> 标签：java, objective-c, encryption, aes, commoncrypto

我在 Java 中使用 CTR 模式加密了一条消息，并试图在 iOS 中解密该消息。但是，我的测试程序在解密时会打乱最后一个块

代码如下：

```
+ (NSData *)doCipher:(NSData *)data key:(NSData *)symmetricKey context:(CCOperation)encryptOrDecrypt {
    CCCryptorStatus status = kCCSuccess;
    // symmetric cipher reference
    CCCryptorRef cryptor = NULL;
    // Cipher Text container.
    NSData *cipherOrPlainText = nil;
    // Pointer to output buffer.
    uint8_t *bufferPtr = NULL;
    // Remaining bytes to be performed on.
    size_t remainingBytes = 0;
    // Number of bytes moved to buffer.
    size_t movedBytes = 0;
    // Total size of the buffer.
    size_t bufferPtrSize = 0;
    // Placeholder for total written.
    size_t totalBytesWritten = 0;
    // A friendly helper pointer.

    LOGGING_FACILITY(data != nil, @"PlainText object cannot be nil." );
    LOGGING_FACILITY(symmetricKey != nil, @"Symmetric key object cannot be nil." );
    LOGGING_FACILITY([symmetricKey length] == kCCKeySizeAES256, @"Disjoint choices for key size." );

    // pointer to the bytes
    void *inputDatPtr = [data bytes];

    // Initialization vector;
    void *ivPtr;
    void *dataPtr = &inputDatPtr[0];
    size_t dataBufferSize = [data length];
    if (encryptOrDecrypt == kCCDecrypt) {
        // iv is first block
        ivPtr = &inputDatPtr[0];
        dataPtr+= kCCBlockSizeAES128;

        dataBufferSize  -= kCCBlockSizeAES128;

        // NSData *iv = [[data subdataWithRange:NSMakeRange(0, kCCBlockSizeAES128)] copy];
        // ivPtr = [iv bytes];

        // NSData *inputData = [[data subdataWithRange:NSMakeRange(kCCBlockSizeAES128, data.length - kCCBlockSizeAES128)] copy];
        // dataPtr = [inputData bytes];
    } else {
        NSData *iv = [self generateIv];
        ivPtr = [iv bytes];
    }

    LOGGING_FACILITY(dataBufferSize > 0, @"Empty plaintext passed in." );

    // Create and Initialize the cipher reference.
    status = CCCryptorCreateWithMode(kCCEncrypt, kCCModeCTR, kCCAlgorithmAES128, ccNoPadding,
            ivPtr, [symmetricKey bytes], kCCKeySizeAES256, NULL, 0, 0, kCCModeOptionCTR_BE, &cryptor);

    LOGGING_FACILITY1( status == kCCSuccess, @"Problem creating the context, status == %d.", status );

    // Calculate byte block alignment for all calls through to and including final.
    bufferPtrSize = CCCryptorGetOutputLength(cryptor, dataBufferSize, true);

    // Allocate buffer.
    bufferPtr = malloc(bufferPtrSize * sizeof(uint8_t));

    // Zero out buffer.
    memset((void *) bufferPtr, 0x0, bufferPtrSize);

    // Initialize some necessary book keeping.
    uint8_t *ptr = bufferPtr;

    // Set up initial size.
    remainingBytes = bufferPtrSize;

    // Actually perform the encryption or decryption.
    status = CCCryptorUpdate(cryptor,
            dataPtr,
            dataBufferSize,
            ptr,
            remainingBytes,
            &movedBytes
    );

    LOGGING_FACILITY1( status == kCCSuccess, @"Problem with CCCryptorUpdate, status == %d.", status );

    // Handle book keeping.
    ptr += movedBytes;
    remainingBytes -= movedBytes;
    totalBytesWritten += movedBytes;

    // Finalize everything to the output buffer.
    status = CCCryptorFinal(cryptor,
            ptr,
            remainingBytes,
            &movedBytes
    );

    totalBytesWritten += movedBytes;

    if (cryptor) {
        (void) CCCryptorRelease(cryptor);
        cryptor = NULL;
    }

    LOGGING_FACILITY1( status == kCCSuccess, @"Problem with encipherment status == %d", status );

    cipherOrPlainText = [NSData dataWithBytes:bufferPtr length:(NSUInteger) totalBytesWritten];

    if (bufferPtr) free(bufferPtr);

    return cipherOrPlainText;
} 
```

测试代码为：

```
NSString *base64Encrypted = [NSString stringWithFormat:@"HWwBZ7Tw94Bk6qTWbXlvRvISkLZrxxy7bmHG1pFWMGgsuA2LY1Q="];
NSData *encrypted = [NSData dataWithBase64EncodedString:base64Encrypted];

NSString *hexKey = @"38a3ba5932c14cd99924eb303fab0c35f300e1bf022286d15160edd247ef263c";
NSData *keyData = [Crypto dataForHexString:hexKey];

NSData *data = [Crypto doCipher:encrypted key:keyData context:kCCDecrypt];
NSString *decryptedText = [[NSString alloc] initWithData:data encoding:NSASCIIStringEncoding];
NSLog(@"decrypted: %@", decryptedText); 
```

消息应该是：`Multiple block message`

但是我得到的输出：

```
2012-11-29 11:04:22.209 crypto-test[23748:1307] decrypted: Multiple block mtn4¶ 
```

请注意，IV 是随机生成并附加到密文的，并且数据应该是 UTF8 编码的（但是在将编码设置为 NSUTF8StringEncoding 时我得到 NULL 输出）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T13:03:42.807

因此，在使用 ECB 实现 CTR 后，它成功解密，这表明我上面的 CTR 实现或 CommonCrypto 实现中存在错误。

工作代码：

```
void xor(uint16_t *data, uint16_t *data2, size_t count, uint16_t *out) {
    uint8_t i;
    for(i = 0; i < count; i++){
        out[i] = data[i] ^ data2[i];
    }
}

+ (NSMutableData *)incrementCtrWithIv:(NSData *)iv increment:(uint16_t)increment {
    NSMutableData *ctrBytes = [[NSMutableData alloc] initWithCapacity:kCCBlockSizeAES128];
    NSMutableArray *arrayOfBytes = [[NSMutableArray alloc] initWithCapacity:8];

    bool carry = true;
    // increment the counter (which is the last 8 bytes of the IV) by 1
    for (int k = 7; k >= 0 ; k--) {
        uint16_t ctr = 0;
        [iv getBytes:&ctr range:NSMakeRange((NSUInteger) (8+k), 1)];
        if (carry){
            if ((ctr + increment) >  255){
                ctr = (uint16_t) (ctr + increment) % 256;
                increment -= ctr;
            }  else {
                ctr += increment;
                carry = false;
            }
        }
        [arrayOfBytes addObject:[NSData dataWithBytes:&ctr length:1]];
    }
    // append the bytes in correct order (reverse of above)
    for (int k=7; k>=0;k--) {
        [ctrBytes appendData:[arrayOfBytes objectAtIndex:(NSUInteger) k]];
    }
    return ctrBytes;
}

+ (NSData *)symmetricCipher:(NSData *)data key:(NSData *)symmetricKey context:(CCOperation)encryptOrDecrypt {
    // Cipher Text container.
    NSMutableData *cipherOrPlainText = [[NSMutableData alloc] initWithCapacity:([data length] + kCCBlockSizeAES128)];

    // Initialization vector;
    NSData *iv = [[data subdataWithRange:NSMakeRange(0, kCCBlockSizeAES128)] copy];

    NSUInteger dataLength = data.length;

    uint8_t start = 0;

    if (encryptOrDecrypt == kCCDecrypt) {
        // iv is first block
        start += kCCBlockSizeAES128;

        dataLength-=kCCBlockSizeAES128;

    } else {
        iv = [self generateIv];
    }

    NSData *incrementalIv = [iv copy];

    size_t blocks = ((dataLength + kCCBlockSizeAES128) / kCCBlockSizeAES128);

    // should fit for less than 2^16 blocks
    for (uint16_t j = 0; j<blocks; j++) {

        size_t realLengthRemaining = dataLength - j*kCCBlockSizeAES128;
        size_t actualLength = (size_t) (realLengthRemaining >  kCCBlockSizeAES128 ? kCCBlockSizeAES128 : realLengthRemaining);

        if (realLengthRemaining > 0){

            // increment the counter (which is the last 8 bytes of the IV) by 1
            if (0 != j) {
                NSData *ctrBytes = [Crypto incrementCtrWithIv:incrementalIv increment:1];
                // start with nonce
                NSMutableData *ctrIv = [[iv subdataWithRange:NSMakeRange(0, 8)] mutableCopy];
                // and append the counter
                [ctrIv appendData:ctrBytes];

                // next Iv is equal to this calculated iv
                incrementalIv = ctrIv;
            }

            // symmetric cipher reference
            CCCryptorRef cryptor = NULL;
            // Pointer to output buffer.
            uint8_t *bufferPtr = NULL;
            // Remaining bytes to be performed on.
            size_t remainingBytes = 0;
            // Number of bytes moved to buffer.
            size_t movedBytes = 0;
            // Total size of the buffer.
            size_t bufferPtrSize = 0;
            // Placeholder for total written.
            size_t totalBytesWritten = 0;
            // A friendly helper pointer.

            LOGGING_FACILITY(data != nil, @"PlainText object cannot be nil." );
            LOGGING_FACILITY(symmetricKey != nil, @"Symmetric key object cannot be nil." );
            LOGGING_FACILITY([symmetricKey length] == kCCKeySizeAES256, @"Disjoint choices for key size." );

            // Create and Initialize the cipher reference.
            CCCryptorStatus status = CCCryptorCreateWithMode(kCCEncrypt, kCCModeECB, kCCAlgorithmAES128, ccNoPadding,
                    nil, [symmetricKey bytes], kCCKeySizeAES256, NULL, 0, 0, 0, &cryptor);

            LOGGING_FACILITY1( status == kCCSuccess, @"Problem creating the context, status == %d.", status );

            // Calculate byte block alignment for all calls through to and including final.
            bufferPtrSize = CCCryptorGetOutputLength(cryptor, kCCBlockSizeAES128, true);

            // Allocate buffer.
            bufferPtr = malloc(bufferPtrSize * sizeof(uint8_t));

            // Zero out buffer.
            memset((void *) bufferPtr, 0x0, bufferPtrSize);

            // Initialize some necessary book keeping.
            uint8_t *ptr = bufferPtr;

            // Set up initial size.
            remainingBytes = bufferPtrSize;

            // Actually perform the encryption or decryption.
            status = CCCryptorUpdate(cryptor,
                    [incrementalIv bytes],
                    kCCBlockSizeAES128,
                    ptr,
                    remainingBytes,
                    &movedBytes
            );

            LOGGING_FACILITY1( status == kCCSuccess, @"Problem with CCCryptorUpdate, status == %d.", status );

            // Handle book keeping.
            ptr += movedBytes;
            remainingBytes -= movedBytes;
            totalBytesWritten += movedBytes;

            // Finalize everything to the output buffer.
            status = CCCryptorFinal(cryptor,
                    ptr,
                    remainingBytes,
                    &movedBytes
            );

            totalBytesWritten += movedBytes;

            if (cryptor) {
                (void) CCCryptorRelease(cryptor);
                cryptor = NULL;
            }

            NSData *out = [NSData dataWithBytes:bufferPtr length:(NSUInteger) totalBytesWritten];
            if (bufferPtr) free(bufferPtr);

            NSData *input = [data subdataWithRange:NSMakeRange(start + j*kCCBlockSizeAES128, actualLength)];

            uint16_t xord[kCCBlockSizeAES128] = {0};
            // xor the counter with the message block
            xor([input bytes],[out bytes], actualLength, xord);

            LOGGING_FACILITY1( status == kCCSuccess, @"Problem with encipherment status == %d", status );

            NSData *blockData = [NSData dataWithBytes:xord length:(NSUInteger) actualLength];

            NSString *decryptedText = [[NSString alloc] initWithData:blockData encoding:NSASCIIStringEncoding];
//            NSLog(@"decrypted block %d: %@", j ,decryptedText);

            [cipherOrPlainText appendData:blockData];

            [self wipeData:blockData];
        }
    }

    if (encryptOrDecrypt == kCCEncrypt) {
        NSMutableData *cipherText = [[NSMutableData alloc] initWithData:iv];
        [cipherText appendData:cipherOrPlainText];
        cipherOrPlainText = cipherText;
    }

    [self wipeData:iv];
    [self wipeData:incrementalIv];

    return cipherOrPlainText;
}

+ (void)wipeData:(NSData *)data {
    memset([data bytes], 0, [data length]);
} 
```

# django - 处理已弃用的 `adminmedia` 模板标签和 {% admin_media_prefix %} 的适当方法

> ID：13624458
> 
> 赞同：24
> 
> 时间：2012-11-29T11:11:28.817
> 
> 标签：django, django-1.5

从 django 1.5 开始，[https://docs.djangoproject.com/en/1.5/releases/1.5/#miscellaneous](https://docs.djangoproject.com/en/1.5/releases/1.5/#miscellaneous)

> 模板标签库 adminmedia 仅包含已弃用的模板标签 {% admin_media_prefix %}，已被删除。尝试使用 {% load adminmedia %} 加载它会失败。如果您的模板仍然包含该行，则必须将其删除。

那么，**替换**遗留库和我的遗留项目中的代码的合适方法是什么，这些遗留项目仍然使用`{% load adminmedia %}`和加载 css，例如：-

```
<link rel="stylesheet" type="text/css" href="{% load adminmedia %}{% admin_media_prefix %}css/login.css"> 
```

?

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-29T13:36:54.647

从 Django 1.3 开始，您可以使用[django.contrib.staticfiles](https://docs.djangoproject.com/en/dev/howto/static-files/)应用程序。

确保 django.contrib.staticfiles 包含在您的 INSTALLED_APPS 中，并且在您的 settings.py 中指定了 STATIC_ROOT 和 STATIC_URL 选项。

然后运行`manage.py collectstatic`命令，所有应用程序的静态文件将被收集到 STATIC_ROOT 文件夹中。

在模板中，您可以使用`{{ STATIC_URL }}`上下文变量（确保 django.core.context_processors.static 包含在 TEMPLATE_CONTEXT_PROCESSORS 中）或`{% static %}`模板标签。

```
<link href="{{ STATIC_URL }}admin/css/login.css" rel="stylesheet"> 
```

或者

```
{% load staticfiles %}
<link href="{% static 'admin/css/login.css' %}" rel="stylesheet"> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-05-19T10:00:11.353

I just copied what's in `base.css`:

```
{% load admin_static %} 
```

and then

```
<link href="{% static 'admin/css/base.css' %}" rel="stylesheet"> 
```

(replace `base.css` with whatever you need, like `login.css` in your case)

Make sure you have `django.contrib.staticfiles` in your `INSTALLED_APPS`.

(I didn't need to configure `STATIC_ROOT` and run `manage.py collectstatic` as suggested previously by Anton)

# regex - 如何从perl中的正则表达式中排除特定模式？

> ID：13624459
> 
> 赞同：1
> 
> 时间：2012-11-29T11:11:28.593
> 
> 标签：regex, perl

我对正则表达式有点麻烦。我有以下一个：`(A|C|G|T){3}`它给出了 A、B、C、D 三个字母的每个排列，但现在我想排除三个特定模式`"TAG"`：`"TAA"`和`"TGA"`. 尝试使用`[^]`，但没有产生预期的结果。使用[环视](http://www.perlmonks.org/?node_id=518444)（向前看和向后看）也是如此。

我想要实现的是找到所有以“ATG”开头、以“TAG”、“TAA”或“TGA”结尾的子字符串，中间应该有三元组A、C、G或T .

谢谢您的帮助！

这是我到目前为止所做的：

```
(ATG)((((A|C|G|T)){3})[^TAG][^TAA][^TGA])*(TAG|TAA|TGA)

(ATG)((?!TAG)(?!TAA)(?!TGA)(((A|C|G|T)){3})*)(TAG|TAA|TGA) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T11:21:36.383

如果我理解正确：

1) 从 ATG 开始

2) 一些三元组，除了 'TAG'、'TAA' 和 'TGA'

3) 三元组“TAG”、“TAA”或“TGA”之一

这应该有效：

```
/
   (ATG)                       # Step 1
   ((?!TAG|TAA|TGA)[ACGT]{3})+ # Step 2
   (TAG|TAA|TGA)               # Step 3
/x 
```

与您的第二个想法的不同之处在于，它在量词内移动负前瞻以获得“多个三元组”步骤，确保三个三元组都不是例外之一

此解决方案不假定步骤 2 和步骤 3 中的元素之间有任何共性。更简单但在您的情况下等效的公式是：

1) 匹配“ATG”

2）匹配多个三元组

3) ...直到你匹配'TAG'、'TAA'、'TGA'。

为此，您只需使第 2 步中的量词不贪心，因为这将测试第 3 步是否匹配，然后再尝试第 2 步是否再次匹配。

那么解决方案将如下所示：

```
/ (ATG) ([ACGT]{3})*? (TAG|TAA|TGA) /x 
```

另一种解释可能是：

1) 从 ATG 开始

2) 多个三元组

3) 三元组“TAG”、“TAA”、“TGA”之一

4) 步骤 2 中找到的子串不得包含子串 'TAG'、'TAA'、'TGA'。

在这种情况下，我将使用两个正则表达式来解决它。在执行步骤 1-3 和步骤 4 中的测试时：

```
 $sequence =~ /(ATG)([ACGT]{3})(TAG|TAA|TGA)/ and $2 !~ /TAG|TAA|TGA/; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T11:17:35.607

在您的情况下，您不必排除中间的任何内容 - 假设您希望最长的序列匹配。这就是 Perl 所做的`*`并且`+`已经做到了：它们是贪婪的并且匹配尽可能长的序列。

因此，在一个简化的示例中，如果您的输入是`ABAACAAC`并且您想要匹配以`B`结尾的`C`所有内容`A`，`B`或者`C`在中间匹配所有内容，那么`m/A[ABC]*C/`将已经匹配`BAACAAC`，而不仅仅是`BAAC`.

通常，您不能使用正则表达式来很好地排除中间的特定事物（尽管有诸如零宽度负前瞻/后瞻断言之类的东西）。

编辑：如果你想在第一次出现“结束模式”时停止匹配，那么只需`*`通过使用`?`. 我的非贪婪示例：`m/A[ABC]*?C/`，尽管对于这种情况，我也可以从 char 类中省略`C`（因为在这个简化的示例中它只是一个字母）。

# java - 类、对象、引用变量在 Java 中存储在哪里。在堆中还是在堆栈中？堆或堆栈位于何处？

> ID：13624462
> 
> 赞同：49
> 
> 时间：2012-11-29T11:11:45.230
> 
> 标签：java

我知道方法的变量存储在堆栈中，类变量存储在堆中。那么我们创建的类和对象在 Java 中存储在哪里呢？

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2014-01-03T07:23:06.470

JVM中的运行时数据区可以划分如下，

1.  **方法区：**已编译类文件的存储区。（每个 JVM 实例一个）

2.  **堆：**对象的存储区域。（每个 JVM 实例一个）

3.  **Java栈：**局部变量的存储区域，中间操作的结果。（每个线程一个）

4.  **PC 寄存器：**如果下一条指令是本机方法，则存储要执行的下一条指令的地址，那么 pc 寄存器中的值将是未定义的。（每个线程一个）

5.  **本机方法堆栈**：帮助执行本机方法（用 Java 以外的语言编写的方法）。（每个线程一个）

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2017-05-24T08:51:55.393

以下是关于 Java 中的内存分配需要考虑的几点。

笔记：

> 对象和对象引用是不同的东西。

1.  Java中`new`经常使用关键字来创建新对象。但`new`所做的是为您正在制作的类的对象分配内存并返回一个引用。这意味着，每当您将对象创建为静态或本地时，它都会存储在**heap**中。

2.  所有**类变量原语或对象引用**（它只是一个指向对象存储位置的指针，即堆）也存储在堆中。

3.  **`ClassLoader`****由静态变量**和**静态对象引用****加载的类**存储在永久代堆中的一个特殊位置。

4.  **局部原始变量**、**局部对象引用**和**方法参数**存储在**堆栈**中。

5.  本地函数**（方法）**存储在堆栈中，但静态函数（方法）存储在永久存储中。

6.  **所有与类相关的信息，如类**名、与类关联的对象数组、JVM 使用的内部对象（如 Java/Lang/Object）和优化信息都进入永久生成区域。

7.  要了解**堆栈、堆和数据，**您应该阅读操作系统中的进程和进程控制块。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-11-29T11:13:53.260

Java 中的所有对象都存储在堆上。持有对它们的引用的“变量”可以在堆栈上，也可以包含在其他对象中（那么它们不是真正的变量，而是字段），这也将它们放在堆上。

定义类的类对象也是堆对象。它们包含构成类的字节码（从类文件加载），以及由此计算的元数据。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-11-29T11:15:12.267

内存的堆栈部分包含方法、局部变量和引用变量。

堆部分包含对象（也可能包含引用变量）。

在短暂的谷歌之后，我找到了一个描述它的链接，是的**youtube 视频**链接。^_^

[http://www.youtube.com/watch?v=VQ4eZw6eVtQ](http://www.youtube.com/watch?v=VQ4eZw6eVtQ)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2019-10-07T06:27:54.017

这个概念很简单：

1.  实例变量（原始、包装类、引用、对象（非静态））- 堆
2.  局部变量，引用 - 堆栈
3.  其他数据对象，如：类元数据、JVM 代码、静态变量、静态对象引用、静态函数等，以前在 Permgen 空间中（直到 Java 7）现在正在被移动到 JAVA 8 中的元空间。

PS：元空间是本机内存的一部分，所以现在不用担心 OOM:Pergem Exeption。

更多详情：[https ://siddharthnawani.blogspot.com/](https://siddharthnawani.blogspot.com/)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-07-29T17:46:25.947

局部变量（方法变量）+方法存在于堆栈中。而对象及其实例变量位于堆上。

现在，引用变量可以是局部变量（如果在方法内部创建）或实例变量（如果在类内部创建，但在方法外部）。所以引用变量可以在任何地方，无论是堆栈还是堆。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-04-03T08:35:15.760

根据 JVM 规范，

类和它自己的常量池，即静态变量存储在**方法区**。这里的类只是一堆字段，方法和常量，这些方法以指令的形式存储在**方法区**中，可以通过地址来识别。

**对象**只不过是一个填充类模板，将在 Heap Area 中创建，但对象引用是在**Stack**中创建的。

```
public class Sample{
int field;
static int constant;
public void test(){
int localVariable=10;
Sample samp=new Sample();
  }
} 
```

在示例中，sample.class 将进入方法区，这意味着在方法区中分配了“字段”、“常量”和方法“测试”。

开始执行时，由**new Sample()**创建的对象将进入**堆**，但“samp”只是一个对象引用，它进入堆栈并保存堆中存在的对象的**地址**

有关更多信息，请查看此链接， [JVM 规范](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-2.html#jvms-2.5)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-07-27T09:37:27.210

在 Java 中，变量可以保存对象引用（`s`in`String s="OOO"`保存对对象的引用`"OOO"`）或原始值（`i`in`int i=10`保存`10`）。这些变量可以在堆上也可以在栈上，这取决于它们是否是本地的以及您使用的 JVM 的风格。

在 Java 虚拟机 8 规范文档 ( [https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-2.html](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-2.html) ) 中，与此相关的内存组织如下。

1.  每个 Java 线程都有自己的 JVM 堆栈。

    > 它保存局部变量和部分结果，并在方法调用和返回中发挥作用。

    堆栈中也可能有对象引用。**只要它是本地的，规范就不会区分原始变量和引用变量**。该堆栈使用称为帧的数据单元。然而，

    > 因为除了推送和弹出帧外，Java 虚拟机堆栈永远不会被直接操作，因此帧可能是堆分配的。

    因此，这取决于框架所在的 JVM 规范（如 OpenJDK 或 Oracle）的实现。

2.  每个 JVM 实例都有一个堆。堆是

    > ...运行时数据区域，所有类实例和数组的内存都从该区域分配。

    保存对象数据的实际内存驻留在堆上。堆在所有 JVM 的线程之间共享。这还包括作为对象一部分的**对象引用**，即实例变量。

    例如，参加以下课程。

    `class Moo{ private String string= "hello"; } class Spoo{ private Moo instanceReferenceVariable = new Moo(); public void poo(){ int localPrimitiveVariable=12; Set<String> localReferenceVariable = new HashSet<String>(); } }`

    在这里，变量引用的对象`instanceReferenceVariable`
    将在堆上，因此该对象的所有实例变量，如 `string`，也将在堆上。变量`localPrimitiveVariable`和 `localReferenceVariable`将在堆栈上。

3.  方法区：方法区是堆的一个受限部分

    > ... 存储每个类的结构，例如运行时常量池、字段和方法数据，以及方法和构造函数的代码，包括类和实例初始化以及接口初始化中使用的特殊方法。

4.  运行时常量池：这是方法区的一部分。

希望这能够澄清事情。

# ruby - 在 Prawn 中使用堆叠边界框时自动开始新页面

> ID：13624463
> 
> 赞同：3
> 
> 时间：2012-11-29T11:11:48.987
> 
> 标签：ruby, prawn

我想在 Prawn 中模拟表格的行为，但由于我可以在单元格内绘制的东西的限制，不能使用表格。

所以我使用边界框来为每行内的元素创建上下文。我遇到的问题与行有关。

我正在尝试这个：

```
require 'prawn'

Prawn::Document.generate("test.pdf") do
  move_down 50
  bounding_box [0, cursor], width: bounds.width do
    20.times do |i|
      stroke_bounds && start_new_page if (i+1) % 11 == 0
      bounding_box [0, cursor], width: bounds.width, height: 50 do
        fill_color "cccccc"
        fill_rectangle [0, bounds.height], bounds.width, bounds.height
      end
    end
    stroke_bounds
  end
end 
```

但我觉得这是非常 hacky 并且不是最优的，因为包含 bounding_box 不能在 start_new_page 之后重新定位（我希望它开始更高一点），而且我必须手动指定页面的位置break 发生（在这种情况下，每 11 个元素）。我尝试使用并使用光标检查它是否到达末尾，但即使在分页符之后`bounds.parent.height`似乎也会增加。`bounds.height`

您对如何改进此解决方案有任何建议吗？

# jsp - ORA-12518, TNS: 侦听器无法切换 客户端连接

> ID：13624464
> 
> 赞同：12
> 
> 时间：2012-11-29T11:11:50.890
> 
> 标签：jsp, servlets, oracle11g

我在 Windows 环境中使用 ORACLE 数据库并在 tomcat 中运行 JSP/servlet Web 应用程序。在我对应用程序进行一些操作后，它给了我以下错误。

> ORA-12518, TNS: 侦听器无法切换​​客户端连接

任何人都可以帮助我找出这个问题的原因并提出解决方案吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-01-07T12:56:20.697

这个问题的解决方案是增加进程数：

```
1\. Open command prompt 
2\. sqlplus / as sysdba; //login  sysdba user
3\. startup force;
4\. show parameter processes;  // This shows 150(some default) processes allocated, then increase the count to 800
5\. alter system set processes=800 scope=spfile; 
```

久经考验。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-07-08T01:38:44.203

就我而言，我发现这是因为我没有在我的应用程序中正确关闭数据库连接。打开的连接太多，Oracle 无法建立更多连接。这是资源限制。后来，当我查看 oracle 论坛时，我可以看到那里提到的有关此问题的一些原因。他们之中有一些是。

1.  在大多数情况下，这是由于网络问题而发生的。
2.  您的服务器可能内存不足，需要将内存交换到磁盘。一个原因可能是 Oracle 进程消耗了太多内存。

如果是第二个，请验证 large_pool_size 或检查调度程序是否足以满足所有连接。

您可以参考下面的链接了解更多详情。 [https://community.oracle.com/message/1874842#1874842](https://community.oracle.com/message/1874842#1874842)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-05-15T15:53:29.270

我遇到了同样的问题，在我的情况下，它是在新桌面上新安装的 Oracle 客户端导致错误，其他客户端正在工作，所以我知道它不会修复数据库配置。tnsping 正常工作，但 sqlplus 因 ora-12518 侦听器错误而失败。

我有一个带有 SID 而不是 service_name 的 tnsnames.ora 条目，然后一旦我修复了它，仍然是同样的错误，并且发现我的 service_name 也有误。一旦我解决了这个问题，错误就消失了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-27T10:32:44.470

如果一天到另一天没有明显原因显示问题，请在 listner.ora 文件的底部添加以下几行。如果您的 oracle_home 环境变量设置如下：

（ORACLE_HOME = **C:\oracle11\app\oracle\** product\11.2.0\server）

要添加的行是：

*ADR_BASE_LISTENER =* **C:\oracle11\app\oracle\**

*DIRECT_HANDOFF_TTC_LISTENER=OFF*

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-07T19:12:27.190

在我的应用程序中执行查询时，我遇到了同样的问题。我正在使用带有 Ruby on Rails 的 Oracle 客户端。

当我不小心启动了几个与数据库的连接并且没有关闭它们时，问题就开始了。

当我解决这个问题时，一切又开始正常工作了。

希望这可以帮助另一个有同样问题的人。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-05-24T19:55:56.433

我在实时应用程序中遇到了同样的问题，第二天问题就自行解决了。经过检查，发现服务器由于运行了额外的进程而耗尽了内存。

所以在我的情况下，原因是服务器内存不足

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-05-02T07:37:16.843

我遇到过同样的问题。重新启动所有 Oracle 服务后，它再次工作。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-10-26T06:58:48.833

升级到 Windows 10 后我遇到了同样的错误。我通过启动已停止的 Oracle 服务解决了这个问题。

启动所有服务，如下图所示：

[![在此处输入图像描述](../Images/6e8c24e81f3016a140a3083a8b9e7f8e.png)](https://i.stack.imgur.com/pcIhW.png)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-05-23T04:53:38.537

我遇到了同样的问题。而从oracle server listener log，可以看到更多的信息。我发现 SERVICE_NAME 与 tnsnames.ora 配置的服务名称不匹配。所以我将应用程序的数据源配置从 SID 值更改为 Service_NAME 值并修复。

```
23-MAY-2019 02:44:21 * (CONNECT_DATA=(CID=(PROGRAM=JDBC Thin Client)(HOST=__jdbc__)(USER=XXXXXX$))(SERVICE_NAME=orclaic)) * (ADDRESS=(PROTOCOL=tcp)(HOST=::1)(PORT=50818)) * establish * orclaic * 12518
TNS-12518: TNS:listener could not hand off client connection
 TNS-12560: TNS:protocol adapter error
  TNS-00530: Protocol adapter error
   64-bit Windows Error: 203: Unknown error 
```

# objective-c - 点击后更改 UIButton 的文本或背景

> ID：13624465
> 
> 赞同：2
> 
> 时间：2012-11-29T11:11:50.597
> 
> 标签：objective-c, ios, uibutton

我尝试根据单击 3 个按钮之一来更改 3 个按钮的外观（TitleLable + 背景）和 TextView 的文本。（类似于选项卡式内容）

我在 xib 中创建了 4 个元素，并将它们与 .h 链接：

```
 IBOutlet UIButton *buttonTab1;
    IBOutlet UIButton *buttonTab2;
    IBOutlet UIButton *buttonTab3;

    IBOutlet UITextView *thisDescription;

    - (IBAction)showTab1:(id)sender;
    - (IBAction)showTab2:(id)sender;
    - (IBAction)showTab3:(id)sender;

@property (strong, nonatomic) IBOutlet UIButton *buttonTab1;
@property (strong, nonatomic) IBOutlet UIButton *buttonTab2;
@property (strong, nonatomic) IBOutlet UIButton *buttonTab3; 
```

在 .mi 尝试更改 4 个元素（这里是按钮 1 的代码）：

```
@synthesize buttonTab1, buttonTab2, buttonTab3;

- (IBAction)showTab1:(id)sender{
        thisDescription.text = [NSString stringWithFormat:@"INHALT TAB 1: %@",transferDescription];
        buttonTab1.imageView.image = [UIImage imageNamed:@"content_tab1_on.png"];
        buttonTab2.imageView.image = [UIImage imageNamed:@"content_tab2.png"];
        buttonTab3.imageView.image = [UIImage imageNamed:@"content_tab3.png"];
        buttonTab1.titleLabel.text = @"Tab1on";
        buttonTab2.titleLabel.text = @"Tab2";
        buttonTab3.titleLabel.text = @"Tab3";
    } 
```

TextViewElement 的文本变化很好，但标题和背景与 xib 中的相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T11:19:01.967

要在按钮上设置背景图像和标题，您应该使用[`setTitle:forState:`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIButton_Class/UIButton/UIButton.html#//apple_ref/doc/uid/TP40006815-CH3-SW7)方法和[`setBackgroundImage:forState:`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIButton_Class/UIButton/UIButton.html#//apple_ref/doc/uid/TP40006815-CH3-SW12)方法。由于按钮可能有不同的标题或背景，具体取决于状态，直接设置图像或标签将不起作用。

这应该让您了解如何在您的代码中实现这一点：

```
[buttonTab1 setBackgroundImage:[UIImage imageNamed:@"content_tab1_on.png"] forState:UIControlStateNormal];
[buttonTab2 setBackgroundImage:[UIImage imageNamed:@"content_tab2.png"] forState:UIControlStateNormal];
[buttonTab3 setBackgroundImage:[UIImage imageNamed:@"content_tab3.png"] forState:UIControlStateNormal];
[buttonTab1 setTitle:@"Tab1on" forState:UIControlStateNormal];
[buttonTab2 setTitle:@"Tab2" forState:UIControlStateNormal];
[buttonTab3 setTitle:@"Tab3" forState:UIControlStateNormal]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T11:47:09.247

关键是您不要更改代码中的背景图像。您所做的是设置 UIButton 对象的（前景）图像。您最终将得到 IB 中定义的背景图像、以编程方式设置的文本和以编程方式设置的图像。

原则上，这应该可以工作，你甚至不会注意到你的错误，但是在 UIButton 上你不能同时设置图像和文本。Button 具有其中任何一个但不能同时显示两者 - 或者至少它不能同时显示两者。

解决方法：设置背景图片而不是图片。

# asp.net - 如何将 ID 传递给我的 selectcommand 以过滤掉我的记录？

> ID：13624466
> 
> 赞同：0
> 
> 时间：2012-11-29T11:11:53.653
> 
> 标签：asp.net

我有这个代码示例。该网页将被另一个通过 url 传递 ID 的网页调用，例如 `http://localhost:49780/bookingform.aspx?passedid=8`

如何将该 ID 获取到我的 selectcommand 以过滤掉我的记录？例如 ProductID <= passid

代码：

```
<%@ page language="C#" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" >
  <head>
    <title>Repeater.DataSourceID Property Example</title>
</head>

  <body>
    <form id="Form1" runat="server">

      <h3>Repeater.DataSourceID Property Example</h3>

      <asp:repeater id="Repeater1"       
        datasourceid="SqlDataSource1"
        runat="server">

        <headertemplate>
          <table border="1">
            <tr>
              <td><b>Product ID</b></td>
              <td><b>Product Name</b></td>
            </tr>
        </headertemplate>

        <itemtemplate>
          <tr>
            <td> <%# Eval("ProductID") %> </td>
            <td> <%# Eval("ProductName") %> </td>
          </tr>
        </itemtemplate>

        <footertemplate>
          </table>
        </footertemplate>
      </asp:repeater>

            <asp:sqldatasource id="SqlDataSource1"          
            connectionstring="<%$ ConnectionStrings:NorthWindConnection%>" 
        selectcommand="SELECT ProductID, ProductName FROM [Products] Where ProductID <= 10"
        runat="server">
      </asp:sqldatasource>

    </form>      
  </body>
</html> 
```

问候

茶

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T11:43:43.143

```
private int _querystring=string.empty;

public int QueryString
{
get
{
return _querystring;
}
set
{
_querystring=value;
}

QueryString=Convert.ToInt32(Request.QueryString["passedid"].ToString()); 
```

在您的代码中传递此值

```
selectcommand='SELECT ProductID, ProductName FROM [Products] Where ProductID="<%=QueryString>"' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T11:34:20.553

嗨，您可以将查询字符串作为参数传递给 sqlconnection

```
 <asp:sqldatasource id="SqlDataSource1"          
        connectionstring="<%$ ConnectionStrings:NorthWindConnection%>" 
    selectcommand="Procedure Name" CommandType="Procedure"
    runat="server">
   <SelectParameters>
  <asp:QueryStringParameter Name="ProductID " QueryStringField="passedidc" Type="Int32" />
   <SelectParameter>
  </asp:sqldatasource> 
```

唯一的问题是，您需要使用过程并将过程名称传递给 selectcommand，而不是在页面上使用查询。

# c# - 使用 FileHelpers 如何将单个数据传递给变量？

> ID：13624470
> 
> 赞同：0
> 
> 时间：2012-11-29T11:12:02.967
> 
> 标签：c#, csv, filehelpers

提前道歉，因为我对此很陌生，所以想象这是一个傻瓜。

无论如何，我希望将单个逗号分隔的数据传递到字段/变量中。我正在使用 FileHelpers 并让它工作并传回数据，但我的 C# 技能现在让我失望了。

CSV 数据为：

汤姆，密码

二、传二

三、PassThree

我的代码是：

```
[DelimitedRecord(",")]
    public class UserDetailsLogin
    {
        FileHelperEngine engine = new FileHelperEngine(typeof(UserDetails));

        [Test]
        public void TestData()
        {
            string User1;
            string User2;
            string User3;
            string Password1;

            UserDetails[] res = engine.ReadFile("TestData.csv") as UserDetails[];
            foreach (UserDetails user in res)
            {
                User1 = user.UserName;
                Console.WriteLine(User1);
            }
        }
    }

    [DelimitedRecord(",")]
    public class UserDetails
    {
        public string UserName;

        public string Password;
    } 
```

其中，为了检查对控制台的写入：

汤姆

二

三

我如何能够将单个数据传递给变量，例如：

用户 1 =“汤姆”

Password1 = "密码"

User2 =“两个”等等等等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T15:51:51.523

你的问题和你的代码都不是很清楚。

我想您是在问如何验证您已读入`UserDetails`数组的值，在这种情况下，您可以使用以下测试：

```
[TestFixture]
public class UserDetailsTests
{
    [Test]
    public void TestData()
    {
        FileHelperEngine engine = new FileHelperEngine(typeof(UserDetails));
        UserDetails[] res = engine.ReadFile("TestData.csv") as UserDetails[];

        Assert.AreEqual(res[0].UserName, "User 1");
        Assert.AreEqual(res[0].Password, "Password 1");
        Assert.AreEqual(res[1].UserName, "User 2");
        Assert.AreEqual(res[2].UserName, "User 3");
    }
} 
```

# java - java中循环的性能（有vs没有bitshift，for vs.while）

> ID：13624479
> 
> 赞同：1
> 
> 时间：2012-11-29T11:12:43.713
> 
> 标签：java, performance, loops, bit-shift

我刚刚用 Java 中的循环做了一个小测试。我假设 Java 中的位移速度通常比默认的整数增量更快。所以这是我的示例代码：

```
final int n = 16;
long n1 = System.nanoTime();
for (int i = 1; i < 1 << n; i <<= 1) {
    // nothing
}
long n2 = System.nanoTime();
for (int i = 0; i < n; i++) {
    // nothing
}
long n3 = System.nanoTime();
System.out.println("with shift = " + (n2 - n1) + " ns");
System.out.println("without shift = " + (n3 - n2) + " ns"); 
```

所以我的想法是，n1 和 n2 之间的时间会小于 n2 和 n3 之间的时间。但是每次运行此代码段时，整数增量似乎都更快。这是上面代码的输出：

```
with shift = 2445 ns
without shift = 1885 ns

with shift = 2374 ns
without shift = 1886 ns

with shift = 2374 ns
without shift = 1607 ns 
```

有人可以解释一下这种行为吗？答案是 JVM 编译这段代码的方式，还是基于底层架构？

```
Ubuntu Linux 3.5.0-17-generic i686 GNU/Linux
processor   : 0
vendor_id   : GenuineIntel
cpu family  : 6
model       : 23
model name  : Pentium(R) Dual-Core CPU       T4300  @ 2.10GHz
stepping    : 10
microcode   : 0xa07
cpu MHz     : 1200.000
cache size  : 1024 KB
physical id : 0
siblings    : 2
core id     : 0
cpu cores   : 2
apicid      : 0
initial apicid  : 0
fdiv_bug    : no
hlt_bug     : no
f00f_bug    : no
coma_bug    : no
fpu     : yes
fpu_exception   : yes
cpuid level : 13
wp      : yes
flags       : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe nx lm constant_tsc arch_perfmon pebs bts aperfmperf pni dtes64 monitor ds_cpl est tm2 ssse3 cx16 xtpr pdcm xsave lahf_lm dtherm
bogomips    : 4189.42
clflush size    : 64
cache_alignment : 64
address sizes   : 36 bits physical, 48 bits virtual
power management:

processor   : 1
vendor_id   : GenuineIntel
cpu family  : 6
model       : 23
model name  : Pentium(R) Dual-Core CPU       T4300  @ 2.10GHz
stepping    : 10
microcode   : 0xa07
cpu MHz     : 1200.000
cache size  : 1024 KB
physical id : 0
siblings    : 2
core id     : 1
cpu cores   : 2
apicid      : 1
initial apicid  : 1
fdiv_bug    : no
hlt_bug     : no
f00f_bug    : no
coma_bug    : no
fpu     : yes
fpu_exception   : yes
cpuid level : 13
wp      : yes
flags       : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe nx lm constant_tsc arch_perfmon pebs bts aperfmperf pni dtes64 monitor ds_cpl est tm2 ssse3 cx16 xtpr pdcm xsave lahf_lm dtherm
bogomips    : 4189.42
clflush size    : 64
cache_alignment : 64
address sizes   : 36 bits physical, 48 bits virtual
power management: 
```

**========== 编辑 ================**

好的，所以我更新了我的代码以获得更好的测量结果。

我的JVM：

```
java version "1.6.0_37"
Java(TM) SE Runtime Environment (build 1.6.0_37-b06)
Java HotSpot(TM) Server VM (build 20.12-b01, mixed mode) 
```

新代码：

```
// amount of shifts
final int n = 16;
// recorded times
long n1 = 0, n2 = 0, n3 = 0, n4 = 0, n5 = 0;
// measured times
long withShiftFor = Long.MAX_VALUE;
long withoutShiftFor = Long.MAX_VALUE;
long withShiftWhile = Long.MAX_VALUE;
long withoutShiftWhile = Long.MAX_VALUE;
// instance to operate with
boolean b = true;
// do some loops to measure a better result
for (int x = 0; x < 2000000; x++) {
    // for loop with shift
    n1 = System.nanoTime();
    for (int i = 1; i < 1 << n; i <<= 1) {
        b = !b;
    }
    // for loop wihtout shift
    n2 = System.nanoTime();
    for (int i = 0; i < n; i++) {
        b = !b;
    }
    // while loop with shift
    n3 = System.nanoTime();
    int i = 1;
    while (i < 1 << n) {
        b = !b;
        i <<= 1;
    }
    // while loop without shift
    n4 = System.nanoTime();
    int j = 0;
    while (j < n) {
        b = !b;
        j++;
    }
    n5 = System.nanoTime();
    // take minimal time to save best result
    withShiftFor = Math.min(withShiftFor, n2 - n1);
    withoutShiftFor = Math.min(withoutShiftFor, n3 - n2);
    withShiftWhile = Math.min(withShiftWhile, n4 - n3);
    withoutShiftWhile = Math.min(withoutShiftWhile, n5 - n4);
}
System.out.println("for with shift = " + withShiftFor + " ns");
System.out.println("for without shift = " + withoutShiftFor + " ns");
System.out.println("while with shift = " + withShiftWhile + " ns");
System.out.println("while without shift = " + withoutShiftWhile + " ns"); 
```

3 次运行后的新输出（每次运行时间超过 5 秒）：

```
for with shift = 907 ns
for without shift = 838 ns
while with shift = 907 ns
while without shift = 907 ns

for with shift = 907 ns
for without shift = 907 ns
while with shift = 907 ns
while without shift = 907 ns

for with shift = 907 ns
for without shift = 838 ns
while with shift = 907 ns
while without shift = 907 ns 
```

所以你是对的，经过几秒钟和多次迭代后，结果几乎相同。但是为什么 for 循环没有比其他解决方案更快地移动呢？jvm 是否有任何优化，尽管您提到了 1 行增量而不是 4 行移位？为什么递增的 while 与其他循环一样快？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T11:28:20.013

> 有人可以解释一下这种行为吗？答案是 JVM 编译这段代码的方式，还是基于底层架构？

当您运行短循环时，将解释代码。因此，如果您不打算经常运行代码或者您无法预热代码，那么您应该对此进行基准测试并期待像您所拥有的那样奇怪的结果。

如果要比较已编译/优化的代码，则应忽略前 10K 到 20K 循环，因为循环需要迭代 10K 时间才能默认编译（然后在后台编译，这需要一点时间）

无论如何，我还建议运行测试至少 2 秒以减少变化。

你的循环没有做任何事情，我希望 JIT 能够消除它们，你最终只需要计算 System.nanoTime() 所需的时间，这可能会增加 40 - 1000 ns，具体取决于系统。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T11:42:32.243

移动一个数字需要 4 个字节码，而递增只需要 1 个字节码。正如 Peter Lawrey 所说，JIT 编译器稍后可能会改变这一点。

# vim - 如何在 vim 中更改自动格式化？

> ID：13624483
> 
> 赞同：1
> 
> 时间：2012-11-29T11:13:02.200
> 
> 标签：vim, scripting, format, autoformatting

我使用 autoformat (textwidth = 72) 在 vi​​m 中编写我的电子邮件。

问题是每次我写一个列表或短语时，vim 都会将它加入到上面的行中。

体育

```
These are my options:
- option nr. 1 
```

当我写“-”时，“-”立即与上面的短语相连：

```
These are my options: - 
```

当我在列表之前使用其他类型的列表 pe 编号列表或其他符号时也是如此。

当我写短于 72 个字符的短语时也是如此

```
This is my text.
This is my text on the 2nd line. 
```

自动格式化将其更改为：

```
This is my text. This is my text on the 2nd line. 
```

我怎样才能改变这种行为？
我只想`<CR>`在前 72 个字符中没有回车时格式化长行。
如果有`<CR>`它必须在那里打破。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T11:38:03.397

`:help autoformat`给出一些有用的提示：

> *   您需要正确定义段落。最简单的是用空行分隔的段落。当没有分隔空行时，考虑使用 'w' 标志并在除最后一行之外的段落的每一行末尾添加一个空格。

因此，要么`:setlocal fo+=w`，要么关闭自动格式化（可能只是暂时的，使用快速切换映射）。

# flash - 域 A 上托管的 swf 横幅嵌入域 B 时不获取 URL

> ID：13624485
> 
> 赞同：1
> 
> 时间：2012-11-29T11:13:06.457
> 
> 标签：flash, crossdomain.xml, geturl

我想托管 swf 横幅广告并允许其他人嵌入它们，而无需将 swf 的副本上传到他们的网络服务器。问题是 swf 上的链接，如果 swf 嵌入到另一个域的页面上，则该链接不起作用。

所以 www.mydomain.com/banner 中的 swf 和嵌入页面 www.mydomain.com/page.asp 的作品，但 www.mydomain.com/banner - www.otherdomain.com/page.asp 不加载目标网站单击横幅时。

我尝试将 crossdomain.xml 添加到 mydomain.com 但没有效果。

横幅上链接的操作脚本非常简单：

```
on (release) {
    getURL("http://www.site.com");
} 
```

swf 发布为 Flash 播放器版本 8，动作脚本版本 2

# android - 无法通知通知？

> ID：13624486
> 
> 赞同：0
> 
> 时间：2012-11-29T11:13:07.113
> 
> 标签：android, service, file-io, notifications

我创建了一个用于检查好友请求的服务。我想知道为什么“用户名”在 logcat 中重复出现以及如何解决它。我有一个可悲的问题，即谁知道如何将数据传递给第三活动中的广播接收器？Log.d("admin",result) 显示了朋友的名字，但是为什么在 ThirdActivity 中无法通知？（我在 ThirdActivity 中更新了一些内容，并在登录前添加了 logcat）

我的服务.java

```
 public int onStartCommand(Intent intent, int flags, int startId)
    {
    doSomethingRepeatedly();
    return START_STICKY;        
    }

    private void doSomethingRepeatedly(){
    timer.scheduleAtFixedRate(new TimerTask(){
        public void run(){
            onClickLoad();
            try{
             httpclient = new DefaultHttpClient();
                httppost = new HttpPost("http://www.kryptoquest.com/tracker/checking.php");
                nameValuePairs = new ArrayList<NameValuePair>(1);
                nameValuePairs.add(new BasicNameValuePair("Username", s));
                Log.d("Username",s);
                 httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
                response = httpclient.execute(httppost);
                is = response.getEntity().getContent();
        }catch(Exception e){
            Log.e("log_tag", "Error:"+e.toString());
        }

        //convert response to string
        try{
                reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
                sb = new StringBuilder();
                line = null;
                while ((line = reader.readLine()) != null) {

                        sb.append(line + "\n");

                }
                Log.d("test",sb.toString());
                is.close();

                result = sb.toString();

             Intent intent = new Intent();
             intent.setAction(MY_ACTION);

             intent.putExtra("DATAPASSED", result);
             Log.d("admin",result);
             sendBroadcast(intent);

        }catch(Exception e){
                Log.e("log_tag", "Error converting result "+e.toString());
        }
        }
    },10000,UPDATE_INTERVAL);
}

    public void onClickLoad(){

        try
        {
            FileInputStream fIn = openFileInput("user.txt");
            InputStreamReader isr = new InputStreamReader(fIn);

            char[] inputBuffer = new char[READ_BLOCK_SIZE];             

            int charRead;
            while((charRead = isr.read(inputBuffer))>0)
            {
                String readString = String.copyValueOf(inputBuffer,0,charRead);

                s += readString;

                inputBuffer = new char[READ_BLOCK_SIZE];
            }                                   
        }catch(IOException ioe){
            ioe.printStackTrace();
        }
    } 
```

MainActivity.java

```
 public void onCreate(Bundle savedInstanceState)
   {
       login.setOnClickListener(new View.OnClickListener()
        {
        public void onClick(View v)
        { ...
          loading();
     }
    }
   }

   public void loading(){
        dialog = ProgressDialog.show(this, "", "Please wait...", true);
        new Thread(new Runnable() {
              @Override
              public void run()
              {
                  try {
                      httpclient = new DefaultHttpClient();
                      httppost = new HttpPost("http://www.kryptoquest.com/tracker/sql.php");
                      // Add your data
                      nameValuePairs = new ArrayList<NameValuePair>(2);
                      nameValuePairs.add(new BasicNameValuePair("Username", name));
                      nameValuePairs.add(new BasicNameValuePair("Password", pass));
                      httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

                      // Execute HTTP Post Request
                      response = httpclient.execute(httppost);
                      inputStream = response.getEntity().getContent();

                      data = new byte[256];

                      buffer = new StringBuffer();
                      int len = 0;     //100 
                      while (-1 != (len = inputStream.read(data)) )
                      {
                          buffer.append(new String(data, 0, len));

                          Log.d("MainActivity", buffer.toString());
                          if(buffer.charAt(0)=='Y')
                          {

                             runOnUiThread(new Runnable()
                               {
                                   public void run()
                                   {   
                                     Toast.makeText(MainActivity.this, "login successfull", Toast.LENGTH_LONG).show();
                                     finish();
                                     onClickSave();
                                       Intent abc = new Intent(MainActivity.this,ThirdActivity.class);
                                       //Bundle b = new Bundle();
                                       abc.putExtra("user", username.getText().toString());
                                       //abc.putExtras(b); 
                                       startActivity(abc);

                                   }
                               });

                          }
                          else
                          {
                             runOnUiThread(new Runnable()
                               {
                                   public void run()
                                   {
                                 Toast.makeText(MainActivity.this, "Invalid Username or password", Toast.LENGTH_LONG).show();
                                   }
                               });
                          }
                      }

                      inputStream.close();
                  }

                  catch (Exception e)
                  {
                      Toast.makeText(MainActivity.this, "error"+e.toString(), Toast.LENGTH_LONG).show();
                  } 

                runOnUiThread(new Runnable() {
                  @Override
                  public void run()
                  {
                      dialog.dismiss();
                  }
                });
              }
            }).start();

    }

    public void onClickSave(){
        String str = username.getText().toString();
        try
        {
            FileOutputStream fOut = openFileOutput("user.txt",MODE_WORLD_READABLE);
            OutputStreamWriter osw = new OutputStreamWriter(fOut);

            osw.write(str);
            osw.flush();
            osw.close();

            Toast.makeText(getBaseContext(), "File saved successfully", Toast.LENGTH_SHORT).show();             

        }catch(IOException ioe){
            ioe.printStackTrace();
        }
    } 
```

第三活动.java

```
 public void onCreate(Bundle savedInstancesState){
    super.onCreate(savedInstancesState);
    setContentView(R.layout.list_screen);
    user = getIntent().getExtras().getString("user");
    Log.d("dg",user);
    getList();
    lv = (ListView) findViewById(android.R.id.list);
    emptyText = (TextView)findViewById(android.R.id.empty);     
    intentFilter = new IntentFilter();
         intentFilter.addAction(MyService.MY_ACTION);

        intentReceiver = new BroadcastReceiver() {
        @Override
        public void onReceive(Context context, Intent intent) {
        datapassed = intent.getStringExtra("DATAPASSED");
        Log.d("datapassed",datapassed);
        if(datapassed.length()>0){

            data = datapassed.split("[*]");
            dlength = data.length;

            for(int i=0;i<dlength;i++){
                if(i==dlength-1){
                    str += String.valueOf(data[i]);                 
                }else{
                    str += String.valueOf(data[i]) + ",";
                }   
            }
            Log.d("dataServices",str);
            displayNotification();
                str = "";           
        }
    /*  else{
            str = "abc";
            displayNotification();
        }*/
        }
        };

    registerReceiver(intentReceiver, intentFilter);
}

        protected void displayNotification(){
            Intent i = new Intent(this,NotificationView.class);
            i.putExtra("notification", notification);
            i.putExtra("name",str);
            Log.d("String",str);
            PendingIntent pi = PendingIntent.getActivity(this, 0, i, PendingIntent.FLAG_UPDATE_CURRENT);

            NotificationManager mnotis =(NotificationManager)getSystemService(NOTIFICATION_SERVICE);

            Notification notis = new Notification(R.drawable.notices2,"Reminder:You have " + dlength + " new friend request",System.currentTimeMillis());
            notis.setLatestEventInfo(this,"Friend Request", str + "has sent you a friend request",pi);
            notis.vibrate = new long[]{100,250,100,500};
            mnotis.notify(0, notis);
        } 
```

检查.php

```
 <?php
 mysql_connect("localhost","xxx","xxx");
 mysql_select_db("thomasl_GPSTracker");

 $num = 1;         
 $name = $_POST['Username'];

 $result = mysql_query("SELECT * FROM Friends WHERE responseRequest = '".$name."'") or die(mysql_error());
 while( $row = mysql_fetch_array($result)) {

 if($row['status']=="unapproved"&&$row['arrived']=="no"){
       mysql_query("UPDATE Friends SET arrived='yes' WHERE sentRequest='".$row['sentRequest']."'");
       if($num==1){
          Print $row['sentRequest'];
          $num++;
       }else{
          Print "*".$row['sentRequest'];
       }

 } 

 }

    mysql_close();
?> 
```

**我被用来解锁事件来调用服务。所以，当我解锁我的设备时，我可以得到我的朋友用户名 EnEn，它应该被发送到 ThirdActivity，它会通知用户收到朋友请求。但问题是，sendBroadcast(intent) 不起作用。在这里停了下来。在我按下登录按钮并启动ThirdActivity后，我收到一条无限通知，显示“abc已向您发送好友请求”（我已修改ThirdActivity中的onReceive（））。这意味着MyService中的数据没有传递给ThirdAcitvity，当我登录时，MyService 开始与 ThirdAcitvity 通信，但它什么也没传递。我怀疑问题可能是由于用于保存用户用户名和加载用户用户名的文件输入和输出。** ** MainActivity 是登录页面。

有人可以帮忙吗？？提前致谢。

logcat 输出（登录前）：

```
 12-02 19:05:45.243: D/Username(21861): admin
 12-02 19:05:45.323: I/global(21861): In close() at SocketHttpClientConnection
 12-02 19:05:47.726: I/global(21861): call socket shutdown, tmpsocket=Socket[address=/96.127.151.252,port=80,localPort=48256], tmpsocket.getSoLinger()=-1
 12-02 19:05:47.726: D/test(21861): EnEn
 12-02 19:05:47.726: D/admin(21861): EnEn
 12-02 19:06:00.238: D/Username(21861): adminadmin
 12-02 19:06:00.258: I/global(21861): In close() at SocketHttpClientConnection
 12-02 19:06:02.570: I/global(21861): call socket shutdown, tmpsocket=Socket[address=/96.127.151.252,port=80,localPort=56975], tmpsocket.getSoLinger()=-1
 12-02 19:06:15.243: D/Username(21861): adminadminadmin
 12-02 19:06:15.263: I/global(21861): In close() at SocketHttpClientConnection
 12-02 19:06:16.264: I/global(21861): call socket shutdown, tmpsocket=Socket[address=/96.127.151.252,port=80,localPort=42588], tmpsocket.getSoLinger()=-1
 12-02 19:06:30.237: D/Username(21861): adminadminadminadmin
 12-02 19:06:30.257: I/global(21861): In close() at SocketHttpClientConnection
 12-02 19:06:32.660: I/global(21861): call socket shutdown, tmpsocket=Socket[address=/96.127.151.252,port=80,localPort=53454], tmpsocket.getSoLinger()=-1 
```

logcat 输出（登录）：

```
 11-29 21:17:23.927: I/global(21100): In close() at SocketHttpClientConnection                                                     //unlock start
 11-29 21:17:24.848: I/global(21100): call socket shutdown, tmpsocket=Socket[address=/96.127.151.252,port=80,localPort=51701], tmpsocket.getSoLinger()=-1
 11-29 21:17:24.858: D/test(21100): EnEn
 11-29 21:17:24.858: D/admin(21100): EnEn
 11-29 21:17:35.899: I/global(21100): In close() at SocketHttpClientConnection                                                       //unlock end
11-29 21:17:35.939: I/Adreno200-EGLSUB(21100): <ConfigWindowMatch:1991>: Format RGBA_8888\.          //start login(pressed login button)
11-29 21:17:36.750: D/MainActivity(21100): Y
11-29 21:17:36.770: I/global(21100): call socket shutdown, tmpsocket=Socket[address=/96.127.151.252,port=80,localPort=60051], tmpsocket.getSoLinger()=-1
11-29 21:17:36.900: D/memalloc(21100): /dev/pmem: Unmapping buffer base:0x55038000 size:20766720 offset:20459520
11-29 21:17:36.900: D/memalloc(21100): /dev/pmem: Unmapping buffer base:0x56406000 size:21073920 offset:20766720
11-29 21:17:36.900: D/memalloc(21100): /dev/pmem: Unmapping buffer base:0x57820000 size:21381120 offset:21073920
11-29 21:17:37.130: D/dg(21100): admin
11-29 21:17:37.170: I/global(21100): In close() at SocketHttpClientConnection
11-29 21:17:37.260: I/Adreno200-EGLSUB(21100): <ConfigWindowMatch:1991>: Format RGBA_8888.
11-29 21:17:37.470: D/OpenGLRenderer(21100): Flushing caches (mode 0)
11-29 21:17:37.480: D/memalloc(21100): /dev/pmem: Unmapping buffer base:0x522e1000 size:23531520 offset:21995520
11-29 21:17:37.480: D/memalloc(21100): /dev/pmem: Unmapping buffer base:0x53b97000 size:4608000 offset:3072000
11-29 21:17:37.480: D/memalloc(21100): /dev/pmem: Unmapping buffer base:0x5468a000 size:6144000 offset:4608000
11-29 21:17:38.241: I/global(21100): call socket shutdown, tmpsocket=Socket[address=/96.127.151.252,port=80,localPort=35677], tmpsocket.getSoLinger()=-1
 11-29 21:17:38.241: D/test(21100): EnEn*EnEn*EnEn*
 11-29 21:17:38.882: I/global(21100): In close() at SocketHttpClientConnection
 11-29 21:17:39.973: I/global(21100): call socket shutdown, tmpsocket=Socket[address=/96.127.151.252,port=80,localPort=44111], tmpsocket.getSoLinger()=-1
  11-29 21:17:39.983: D/String(21100): abc
  11-29 21:17:40.283: D/memalloc(21100): /dev/pmem: Unmapping buffer base:0x54e66000 size:20865024 offset:20766720
  11-29 21:17:42.285: D/memalloc(21100): /dev/pmem: Unmapping buffer base:0x52306000 size:3194880 offset:3072000
  11-29 21:17:53.876: I/global(21100): In close() at SocketHttpClientConnection
  11-29 21:17:54.717: I/global(21100): call socket shutdown, tmpsocket=Socket[address=/96.127.151.252,port=80,localPort=59125], tmpsocket.getSoLinger()=-1
  11-29 21:17:54.717: D/String(21100): abc
  11-29 21:18:08.881: I/global(21100): In close() at SocketHttpClientConnection
  11-29 21:18:10.052: I/global(21100): call socket shutdown, tmpsocket=Socket[address=/96.127.151.252,port=80,localPort=38139], tmpsocket.getSoLinger()=-1
  11-29 21:18:10.052: D/String(21100): abc
  11-29 21:18:23.876: I/global(21100): In close() at SocketHttpClientConnection
  11-29 21:18:24.746: I/global(21100): call socket shutdown, tmpsocket=Socket[address=/96.127.151.252,port=80,localPort=37537],  tmpsocket.getSoLinger()=-1
  11-29 21:18:24.746: D/String(21100): abc 
```

AndroidManifest.xml：

```
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
 package="com.example.android.project"
 android:versionCode="1"
 android:versionName="1.0" >

 <uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15"/>
 <uses-permission android:name="android.permission.INTERNET"></uses-permission>
 <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"></uses-permission>
 <uses-permission android:name="android.permission.VIBRATE"/>
 <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
 <application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" > 
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main"
        android:windowSoftInputMode="stateHidden">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>            
    </activity>
    <receiver  android:name=".SMSReceiver">
        <intent-filter android:priority="100">
            <action android:name="android.provider.Telephony.SMS_RECEIVED" />
        </intent-filter>
    </receiver>       
    <activity
        android:name=".Unapproved"
        android:label="@string/title_activity_main" 
        android:launchMode="singleTask">
    </activity>
    <activity
        android:name=".SecondActivity"
        android:label="@string/title_activity_second" >
    </activity>
    <activity
        android:name=".ThirdActivity"
        android:label="@string/title_activity_third" >
    </activity>
     <activity
        android:name=".AddFriend"
        android:label="@string/title_activity_main" >
    </activity>
    <activity
        android:name=".ServicesActivity"
        android:label="Services" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".NotificationView"
        android:label="Details of notification" >
    </activity>
    <service android:name = ".MyService">
        <intent-filter>
             <action android:name="com.example.MyService" />
        </intent-filter>
    </service>
     <receiver
        android:name=".StartMyServiceAtBootReceiver">
         <intent-filter>
            <action android:name="android.intent.action.SCREEN_OFF"/>
            <action android:name="android.intent.action.SCREEN_ON"/>
            <action android:name="android.intent.action.USER_PRESENT"/>
         </intent-filter>
     </receiver>
     <uses-library android:name="com.google.android.maps"/>
     <activity
        android:name=".Map"
        android:label="Friend Location" >
          <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
  </application>

  </manifest> 
```

# django - 是否可以使用 django 的自定义模板标签在模板的其他块中插入代码？

> ID：13624487
> 
> 赞同：1
> 
> 时间：2012-11-29T11:13:07.117
> 
> 标签：django, django-templates, django-custom-tags

我正在编写一个自定义模板标记，该标记用一些代码包装一个 HTML 元素以使其可编辑。这由一些 CSS 支持，而 JS 负责将数据发送到服务器以保存它。

该组件需要包含

```
 <script type="text/javascript" src="../myscript.js"></script> 
```

在页面底部和

```
 <link rel="stylesheet" type="text/css" href="../mystyle.css"> 
```

在顶部。

我已经在页面模板中有两个“js”和“css”模板块。

**我的问题 - 如果我的标签存在，自定义模板标签是否可以在相关页面块中包含这些脚本一次？**

我输入的IE：

```
 { % mytag %} <div>editable element</div> { % endmytag %} 
```

并且“js”和“css”模板块填充了相关的脚本\链接标签？

（我不想在每个页面中都预先包含这些，因为只有我的一些页面会使用这个标签）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T14:06:58.230

您可以尝试在自定义标签呈现的模板中使用[Django-Sekizai](https://github.com/ojii/django-sekizai)将 CSS 和 JS 文件添加到另一个块，这正是 Sekizai 的设计目的。我在基于 Django-CMS 的项目中广泛使用它，但我还没有尝试过你的用例。

# c++ - ldap_search 函数成功。但是 ldap_count_entries 给出零（0）？

> ID：13624489
> 
> 赞同：1
> 
> 时间：2012-11-29T11:13:10.017
> 
> 标签：c++, windows, active-directory, ldap

我在我的项目中使用 c++（不是 Vc++）。

我想使用 ldap 函数访问 AD。

它会成功直到 ldap_search 函数。但之后 ldap_count_entries 给出 NULL(0)。

问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T11:23:41.753

搜索参数：

*   基础对象
*   搜索范围
*   筛选

没有返回任何条目，或者与授权状态相关的访问控制阻止了任何条目返回给 LDAP 客户端。

# javafx-2 - 像在 Scene Builder 中一样实现拖放

> ID：13624491
> 
> 赞同：7
> 
> 时间：2012-11-29T11:13:13.043
> 
> 标签：javafx-2, scenebuilder

我正在 JavaFx 2.2 中构建一个应用程序，它包含一个拆分窗格，左侧有一个组件面板，右侧有一个工作表。基本上我想做的是一个简单的所见即所得编辑器，您可以在其中将组件从左向右拖动，然后将它们排列在右侧。

在过去的几天里，我一直在尝试实现与 SceneBuilder 相同的拖放功能，但没有运气......

按照[http://docs.oracle.com/javafx/2/drag_drop/HelloDragAndDrop.java.html](http://docs.oracle.com/javafx/2/drag_drop/HelloDragAndDrop.java.html)上的示例，我设法让拖放工作，但我找不到任何方法来更改默认值拖动时出现的文件图标（并将其替换为我正在拖动的组件的快照）以及当您在无法放下的东西上时如何显示禁止图标。

任何帮助（可以是建议、代码片段、示例或其他）将不胜感激:)

谢谢 ！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-29T22:51:23.487

**[更新]**

终于自己管理了：

```
/* The 'sceneRoot' object is the root Node of the scene graph
 *    stage.setScene(new Scene(sceneRoot, 1280, 1024));
 */

private ImageView dragImageView = new ImageView();
private Node dragItem; 
```

_

```
rightPane.setOnMouseDragEntered(new EventHandler<MouseDragEvent>() {
    public void handle(MouseDragEvent e) {
        rightPane.setStyle("-fx-border-color:red;-fx-border-width:2;-fx-border-style:solid;");
        e.consume();
    }
});
rightPane.setOnMouseDragExited(new EventHandler<MouseDragEvent>() {
    public void handle(MouseDragEvent e) {
        rightPane.setStyle("-fx-border-style:none;");
        e.consume();
    }
});
rightPane.setOnMouseDragReleased(new EventHandler<MouseDragEvent>() {
    public void handle(MouseDragEvent e) {
        //TODO: add new instance of dragItem to rightPane
        e.consume();
    }
}); 
```

_

```
private void addGesture(final Node node) {
    node.setOnDragDetected(new EventHandler<MouseEvent>() {
        public void handle(MouseEvent e) {

            SnapshotParameters snapParams = new SnapshotParameters();
            snapParams.setFill(Color.TRANSPARENT);
            dragImageView.setImage(node.snapshot(snapParams, null));

            sceneRoot.getChildren().add(dragImageView);

            dragImageView.startFullDrag();
            e.consume();
        }
    });
    node.setOnMouseDragged(new EventHandler<MouseEvent>() {
        public void handle(MouseEvent e) {
            Point2D localPoint = sceneRoot.sceneToLocal(new Point2D(e.getSceneX(), e.getSceneY()));
            dragImageView.relocate(
                    (int)(localPoint.getX() - dragImageView.getBoundsInLocal().getWidth() / 2),
                    (int)(localPoint.getY() - dragImageView.getBoundsInLocal().getHeight() / 2)
            );
            e.consume();
        }
    });
    node.setOnMouseEntered(new EventHandler<MouseEvent>() {
        public void handle(MouseEvent e) {
            node.setCursor(Cursor.HAND);
        }
    });
    node.setOnMousePressed(new EventHandler<MouseEvent>() {
        public void handle(MouseEvent e) {
            dragItem = node;
            dragImageView.setMouseTransparent(true);
            node.setMouseTransparent(true);
            node.setCursor(Cursor.CLOSED_HAND);
        }
    });
    node.setOnMouseReleased(new EventHandler<MouseEvent>() {
        public void handle(MouseEvent e) {
            dragItem = null;
            dragImageView.setMouseTransparent(false);
            node.setMouseTransparent(false);
            node.setCursor(Cursor.DEFAULT);
            sceneRoot.getChildren().remove(dragImageView);
        }
    });

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-09-04T11:07:46.487

也许晚了，但使用 setDragView 选项，现在更简单了:)

```
// Cursor Display for Drag&Drop
source.setOnMouseEntered(e -> source.setCursor(Cursor.OPEN_HAND));
source.setOnMousePressed(e -> source.setCursor(Cursor.CLOSED_HAND));
source.setOnMouseReleased(e -> source.setCursor(Cursor.DEFAULT));

// Manage drag
source.setOnDragDetected(event -> {
    /* drag was detected, start a drag-and-drop gesture*/
    Dragboard db = source.startDragAndDrop(TransferMode.MOVE);

    // Visual during drag
    SnapshotParameters snapshotParameters = new SnapshotParameters();
    snapshotParameters.setFill(Color.TRANSPARENT);
    db.setDragView(source.snapshot(snapshotParameters, null));

    /* Put a string on a dragboard */
    ClipboardContent content = new ClipboardContent();
    content.putString(source.getText());
    db.setContent(content);

    event.consume();
}); 
```

# c - C语言中的静态循环终止检测工具

> ID：13624492
> 
> 赞同：1
> 
> 时间：2012-11-29T11:13:13.653
> 
> 标签：c, static-analysis

是否有任何“几乎可用”的 C（或类似 C）程序的静态分析工具可以自动推断循环终止，至少对于非常简单的程序？

我环顾四周，发现了几篇研究文章、一些原型，甚至还有一些工具（例如[Frama-C](http://frama-c.com/jessie_tutorial_index.html#htoc8)），它们试图从带注释的源代码中推断出一些终止属性，但我希望至少能找到一个简单的工具你可以给它一个 C 程序，它会输出：`loop #N terminates`// `does not terminate`。`unknown`

（我知道这在一般情况下是无法确定的，但对于某些类别的循环，半算法是可能的）。

我还对适用于 C 以外的命令式语言（例如 Java）的工具感兴趣。

编辑：只是对我的问题的更新，我发现[LoopF​​rog建立在](http://www.cprover.org/loopfrog)[goto-cc](http://www.cprover.org/goto-cc)之上，这似乎是我正在寻找的方向，但是我仍然没有时间真正理解它的输出意味着什么恰恰。如果它是我问题的答案，我会在这里发布更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T20:40:41.807

我不知道您是否阅读过这两篇博文（[1、2](http://blog.frama-c.com/index.php?post/2012/06/07/Verifying-the-termination-of-programs-with-value-analysis-option-obviously-terminates) [）](http://blog.frama-c.com/index.php?post/2012/06/08/To-finish-on-termination)，但您正在寻找的“简单”工具之一可能是一个脚本，它同时启动 Frama-C 的价值分析作为普通声音抽象解释器（能够推断程序的结尾不可达）和它的选项`-obviously-terminates`（在这种情况下，它可以推断程序的所有执行都终止）。在这两种情况下，您可能都想使用超时。对于带有选项的分析`-obviously-terminates`，超时是强制性的，因为如果分析的程序本身没有终止，分析将无法终止。

根据我写的这些博客文章，您应该能够诊断出以下示例，并非所有示例都是微不足道的：

```
char x, y;

main()
{
  x = input();
  y = input();
  while (x>0 && y>0)
    {
      if (input() == 1)
    {
      x = x - 1;
      y = input();
    }
      else
    y = y - 1;
    }
} 
```

终止

* * *

```
char x, y;

main()
{
  x = input();
  y = input();

  while (x>0 && y>0)
    {
      // Frama_C_dump_each();
      if (input())
        {
          x = x - 1;
          y = x;
        }
      else
        {
          x = y - 2;
          y = x + 1;
        }
    }
} 
```

终止

* * *

```
char x;

main(){
  x = input();
  while (x > 0)
    {
      Frama_C_dump_each();
      if (x > 11)
        x = x - 12;
      else
        x = x + 1;
    }
} 
```

终止

* * *

```
unsigned char u;

int main(){
  while (u * u != 17)
    {
      u = u + 1;
    }
  return u;
} 
```

不终止。

* * *

但是，`-obviously-terminates`这些示例中涉及的选项最初并不是为这种用途而设计的（它更多的是对某种程序的分析进行优化）。我没有意识到在极少数情况下，当设置此选项时，分析可能会终止，而被分析的程序本身不会终止。如果您愿意从源代码重新编译，则可以通过在 file中将 variable 设置`obviously_terminates`为`true`（而不是）来解决此问题。如果您有理由认为此脚本不是您正在寻找的解决方案，请不要打扰：正如我所说，这个问题似乎很少见。我只是在试图确定程序是否在更具[竞争性的环境](http://blog.frama-c.com/index.php?post/2012/08/20/Participating-in-the-RERS-2012-competition%3a-liveness-questions)中终止时才注意到它。`false``state_set.ml`

# php - 当我单击搜索按钮时，使用 mysql DB 中的 ajax 或 php 动态填充 html 表

> ID：13624493
> 
> 赞同：3
> 
> 时间：2012-11-29T11:13:13.743
> 
> 标签：php, html, json, jquery

我有一个表格，最初在页面加载时被填满。现在，我有一个搜索按钮来过滤表格，我有发布功能来过滤搜索结果，但每次我通过文本框搜索时它都会加载，这不是好。每次搜索网格时，我都需要一个 ajax 或 J 子或 JavaScript 代码来加载网格。

**我的桌子：**

```
 <table align="center" class="sortable" border="1" width="900px">
        <tr > 
      <td class="sorttable_nosort" style=" font-weight:bold; text-align:center">Select</td>
      <td class="sorttable_nosort" style=" font-weight:bold; text-align:center">Action</td>
      <td style=" font-weight:bold;">Product Code</td>
      <td style=" font-weight:bold;">Warranty Periods In Months</td>
      <td style=" font-weight:bold;">ProRata Period In Months </td>
      <td style=" font-weight:bold;">Manufacturer Date</td>
      <td style=" font-weight:bold;">Applicable Form Date</td></tr>
     <?php
          // This while will loop through all of the records as long as there is another record left. 
          while( $record = mysql_fetch_array($query))
        { // Basically as long as $record isn't false, we'll keep looping.
          // You'll see below here the short hand for echoing php strings.
          // <?=$record[key] - will display the value for that array.
        ?>

         <tr>
         <td bgcolor="#FFFFFF" style=" font-weight:bold; text-align:center"><input name="checkbox[]" type="checkbox" id="checkbox[]" value="<? echo $record['ProductCode']."~".$record['ManufactureDate']; ?>"></td>
         <td bgcolor="#FFFFFF" style=" font-weight:bold; text-align:center"> <a style="color:#FF2222" name="edit" href="productwarrantymaster.php?<?php if(($row['editrights'])=='Yes') { echo 'ProductCode='; echo $record['ProductCode'];echo '&ManufactureDate=';echo $record['ManufactureDate'];} else echo 'permiss'; ?>">Edit</a></td>
         <td  bgcolor="#FFFFFF"><?=$record['ProductCode']?>  </td>
         <td  bgcolor="#FFFFFF"  ><?=$record['WarrantyPeriod']?></td>
        <td  bgcolor="#FFFFFF"> <?=$record['ProRataPeriod']?> </td>
         <td  bgcolor="#FFFFFF"  >  <?=$record['ManufactureDate']?> </td>
        <td  bgcolor="#FFFFFF" >  <?=$record['ApplicableFormDate']?>   </td></tr>

      <?php
          }
      ?>
    </table> 
```

我也使用了分页代码来填充这里也添加的网格。

**我的 POST 功能：**

```
if(isset($_POST['Search']))
{
if(isset($_POST['codes'])||isset($_POST['names']))
{
    if(empty($_POST['codes'])&&empty($_POST['names']))
    {
        ?>
            <script type="text/javascript">
            alert("Enter text Field!!");document.location='productwarrantymaster.php';
            </script>
            <?
    }
    else
    {
    if(!empty($_POST['codes'])&&!empty($_POST['names']))
    {
        $condition="SELECT * FROM productwarranty WHERE ProductCode like'%".$_POST['codes']."%' AND ManufactureDate like'".
        $_POST['names']."%'";

    }
    else if(!empty($_POST['codes'])&&empty($_POST['names']))
    {
        $condition="SELECT * FROM productwarranty WHERE ProductCode like'%".$_POST['codes']."%'";

    }
    else if(!empty($_POST['names'])&&empty($_POST['codes']))
    {
        $condition="SELECT * FROM productwarranty WHERE ManufactureDate like'".$_POST['names']."%'";

    }
    else
    {

        $condition="SELECT * FROM productwarranty WHERE 1";
    }

    $refer=mysql_query($condition);
    $myrow1 = mysql_num_rows($refer);
    //mysql_fetch_array($query);

    $page = (int) (!isset($_GET["page"]) ? 1 : $_GET["page"]);
        $limit = 10;
        $startpoint = ($page * $limit) - $limit;
        //to make pagination
        $statement = "productwarranty";
         //show records
         $starvalue = $myrow1;
       $query = mysql_query("{$condition} LIMIT {$startpoint} , {$limit}");
        if($myrow1==0)  
        {
            ?>
            <script type="text/javascript">
            alert("Entered keyword not found!!");document.location='productwarrantymaster.php';
            </script>
            <?

        }
    }
}

} 
```

我的搜索表：

```
 <div style="width:80px; height:30px; float:left; margin-left:3px; margin-top:16px;" >
                                <label>Product Code</label>
                               </div>
                               <div style="width:145px; height:30px;  float:left; margin-left:3px; margin-top:16px;">
                                 <input type="text" name="codes" value=""/>
                               </div>
                             <!--Row1 end-->  

                               <!--Row2 -->  
                               <div style="width:80px; height:30px; float:left; margin-left:3px; margin-top:9px;">
                                  <label>Manufacturer Date</label>
                               </div>
                               <div style="width:145px; height:30px;  float:left; margin-left:3px; margin-top:16px;" >
                                 <input type="text"  id="searchdate" name="names" value=""/>
                               </div>
                             <!--Row2 end-->

                             <div style="width:83px; height:32px; float:left; margin-top:16px;">
                                <input type="submit" name="Search" value="" class="button1"/>
                               </div> 
```

请帮我解决这个问题。提前致谢：P

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T12:13:56.523

jQuery非常擅长加载数据

这是您可以实现这一目标的总体方向：

1.  修改您的 php 以输出 JSON：http://php.net/manual/en/function.json-encode.php
    php 脚本独立。在浏览器中自行调用脚本会将 JSON 打印到屏幕上。jQuery 将调用此脚本并收集输出。
2.  删除现有表：（类似这样）$('#mytable').remove();
    从正面清理桌子。在下一步中，您将添加一个新的。

3.  获取 JSON:: http://api.jquery.com/jQuery.getJSON/
    上面的链接显示了如何调用 php 文件并解析 JSON
4.  用 jQuery 重建表。上面的链接还显示了如何输出数据。

# c# - 定时器被中断

> ID：13624494
> 
> 赞同：-2
> 
> 时间：2012-11-29T11:13:20.187
> 
> 标签：c#, .net, timer, stream

我在 Windows 窗体应用程序中遇到了计时器问题。需要 Timer 记录归档时间的归档器。但是有什么东西打断了计时器？

我怀疑是溪流。关于什么可能导致计时器被中断的任何建议？

```
public partial class Form1 : Form
{
    int timerCounter = 0;
    System.Windows.Forms.Timer timer = new System.Windows.Forms.Timer();

    public Form1()
    {
        InitializeComponent();
        timer.Interval = 1000; 
        timer.Enabled = true;
    }

    public void button2_Click(object sender, EventArgs e)
    {
        timer.Start();
        timer.Tick += new EventHandler(timer1_Tick); 

        // code for archiving, streams

        timer.Stop(); 

        MessageBox.Show("Archive was created! :)");
    }

    public void timer1_Tick(object sender, EventArgs e)
    {
        this.label7.Text = (++timerCounter).ToString();
    } 
```

}

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-29T11:17:35.953

Windows 窗体计时器不是多线程的。这意味着，tick 事件仅在程序空闲时触发（通过其消息队列接收消息）。在您的程序中，情况似乎并非如此。您可以轻松地检查这一点：如果您的 UI 在归档过程中是响应式的，那么`Forms.Timer`也会运行并且问题出在其他地方。如果它没有响应，那么表单（以及作为结果的计时器）将被阻塞（应用程序的消息队列中的任何消息都不会被处理）。

有两种方法可以解决这个问题：

1.  要完成您想要实现的目标，您可以使用`System.Timers.Timer`or `System.Threading.Timer`，因为它们在后台异步运行。但是，UI 仍然不会更新（计时器方法将停止），因为 UI 仍然被阻止（见上文）。
2.  另一种方法是使用后台工作程序进行归档过程（然后在另一个线程中运行）。UI 和计时器保持响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T11:28:03.757

首先，您应该知道长时间运行的操作应该在 UI 线程之外的其他线程中执行。因此，您创建了一个处理线程，它自己进行归档，并使用 Control.Invoke 方法通知 UI。[Control.Invoke 的 msdn 描述](http://msdn.microsoft.com/ru-ru/library/zyzhdc6b.aspx)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-29T13:26:23.743

这里不需要使用计时器，为什么不直接使用`TimeSpan`

```
public void button2_Click(object sender, EventArgs e)
{
    DateTime startTime = DateTime.Now;

    // code for archiving, streams

    TimeSpan diff = DateTime.Now - startTime;

    MessageBox.Show("Archive was created! in " + diff.TotalSeconds + " seconds.");
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-29T11:18:20.883

最初我认为您正在后台线程中执行存档。如果不是这样 - 您应该考虑使用 BackgroundWorker 在后台执行操作（这里[有一些示例](https://stackoverflow.com/questions/5275177/backgroundworker-c-sharp)）。

不过，这是更简单的解决方案：

尝试添加`Application.DoEvents()`您的*button2_Click*处理程序（我猜您正在等待“流”完成归档）。要触发计时器和要让 label7 重绘其新文本值，应处理重绘事件。

# android - Android NDK - NativeActivity 与 JNI 库

> ID：13624499
> 
> 赞同：6
> 
> 时间：2012-11-29T11:13:31.073
> 
> 标签：android, android-ndk, java-native-interface

两年前，我在[android-7 (Eclair)](http://developer.android.com/about/versions/android-2.1.html)上开发了一个增强现实框架。由于 AR 应用程序是计算密集型任务，我开发了一个 Java 活动使用的 JNI c++ 库来渲染和注册虚拟环境。在 Java 中获取的传感器读数被传递到下划线 c++ 库以计算虚拟环境的注册。三维对象由[GLSurfaceView](http://developer.android.com/reference/android/opengl/GLSurfaceView.html)调用的本机绘图函数渲染。这会导致大量的 JNI 调用。

现在我想将应用程序移植到[android-15(Ice Cream Sandwich)](http://developer.android.com/about/versions/android-4.0.3.html)。从[android-9(Gingerbread)](http://developer.android.com/about/versions/android-2.3.html)开始， Android 允许使用[NativeActivity](http://developer.android.com/reference/android/app/NativeActivity.html)。

我想了解开发 AR 应用程序的更好方法。由于每个 JNI 调用都会引入开销，因此最好避免它们。可以使用 NativeActivity 吗？我没有找到解释 NativeActivity 如何工作的详尽指南，但阅读[此文档](http://en.wikibooks.org/wiki/OpenGL_Programming/Android_GLUT_Wrapper#Android_Events)似乎无论如何都会导致大量 JNI 调用。有没有解释 NativeActivity 如何工作的架构文档？NativeActivity 是否只是避免 Java 代码的“JNI 包装器”？关于性能，使用 NativeActivity 而不是像我以前那样使用 JNI 库有什么优势吗？

非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T16:15:09.860

NativeActivity 不会为您的框架带来性能提升。它仍然使用 JNI 与系统通信，只是在掩护下。

此外，有充分的理由不使用它。如果我正确理解您的目的，您希望其他应用程序利用您的代码。通过强迫他们使用 NativeActivity，你会严重降低他们的自由度，并要求他们在不太熟悉的环境中挣扎。NativeActivity 有许多限制，例如它不能加载多个 JNI 库。

最后，如果您希望优化您的 AR 框架，我会建议一个完全不同的方向：您可以使用新的[setPreviewTexture()](http://developer.android.com/reference/android/hardware/Camera.html#setPreviewTexture%28android.graphics.SurfaceTexture%29) API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T11:40:28.413

据我了解，在使用 NativeActivity 时，您仍然必须使用 JNI。这个类可以作为起点，为了方便起见封装了一些功能，但是访问本机代码的底层技术没有改变，仍然是 JNI。所以在我看来，你只能做一些基准测试来检查 NativeActivity 是否由于某种原因更有效（可能是谷歌的人确实知道一些让它比你的解决方案更快的技巧）。

# php - 警告： implode() [function.implode]: Invalid arguments pass in ... 第 50 行

> ID：13624500
> 
> 赞同：2
> 
> 时间：2012-11-29T11:13:37.677
> 
> 标签：php

```
class  plgSystemUnpublishfront extends JPlugin
{
    /**
     * Constructor
     *
     * For php4 compatability we must not use the __constructor as a constructor for plugins
     * because func_get_args ( void ) returns a copy of all passed arguments NOT references.
     * This causes problems with cross-referencing necessary for the observer design pattern.
     *
     * @param   object      $subject The object to observe
      * @param  array       $config  An array that holds the plugin configuration
     * @since   1.0
     */
    function plgSystemUnpublishfront(& $subject, $config)
    {
        parent::__construct($subject, $config);
    }

    /**
     * Fixes the $my global if the user was restored by the remember me plugin
     */
    function onAfterInitialise()
    {
        $days       = $this->params->get('days');
        $startpoint = $this->params->get('startpoint');
        $excludes   = $this->params->get('excludes',0);

        $db = & JFactory::getDBO();

        $query = "SELECT id FROM #__content AS"
        ."\n WHERE DATE_ADD($startpoint, INTERVAL $days DAY) < NOW() AND id NOT IN($excludes)";
        $db->setQuery($query);
        $rows = $db->loadResultArray();

        $daystring = implode(',' , $rows);

        $query = "DELETE FROM #__content_frontpage WHERE content_id IN($daystring)";
        $db->setQuery($query);
        $db->Query();
    }
}
**line 50 is "$daystring = implode(',' , $rows);"** 
```

那么错误在哪里呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T11:15:52.080

```
$rows = $db->loadResultArray();
var_dump($rows);
$daystring = implode(',' , $rows); 
```

这里 $rows 返回的不是数组，这就是给出警告的原因。

# android - 使用 proguard 时出现 NoClassDefFoundError

> ID：13624503
> 
> 赞同：8
> 
> 时间：2012-11-29T11:13:42.297
> 
> 标签：android, actionbarsherlock, proguard, viewpagerindicator

我的项目包含一些库（ViewPagerIndicator、ActionbarSherlock、SlidingMenu...）。使用 proguard 后，我的应用程序每次启动时都会崩溃。下面是错误日志

```
java.lang.NoClassDefFoundError:android.support.v4.appp.FragmentActivity$2 at android.support.v4.app.FragmentActivity.<init> (Unknown Source).... 
```

这是我的 proguard 脚本：

```
 -injars      bin/classes
-injars      libs
-outjars     bin/classes-processed.jar

-dontpreverify
-repackageclasses ''
-allowaccessmodification
-optimizations !code/simplification/arithmetic
-keepattributes *Annotation*
-verbose

-keep public class * extends android.app.Activity
-keep public class * extends android.app.Application
-keep public class * extends android.app.Service
-keep public class * extends android.content.BroadcastReceiver
-keep public class * extends android.content.ContentProvider
-keep public class * extends android.support.v4.app.FragmentActivity
-keep public class * extends android.support.v4.app.Fragment

-keep public class * extends android.view.View {
    public <init>(android.content.Context);
    public <init>(android.content.Context, android.util.AttributeSet);
    public <init>(android.content.Context, android.util.AttributeSet, int);
    public void set*(...);
}

-keepclasseswithmembers class * {
    public <init>(android.content.Context, android.util.AttributeSet);
}

-keepclasseswithmembers class * {
    public <init>(android.content.Context, android.util.AttributeSet, int);
}

-keepclassmembers class * extends android.content.Context {
   public void *(android.view.View);
   public void *(android.view.MenuItem);
}

-keepclassmembers class * implements android.os.Parcelable {
    static android.os.Parcelable$Creator CREATOR;
}

-keepclassmembers class **.R$* {
    public static <fields>;
}

-dontwarn android.support.**
-dontwarn com.google.android.maps.**
-dontwarn com.slidingmenu.lib.app.SlidingMapActivity
-keep class android.support.** { *; }
-keep class com.actionbarsherlock.** { *; }
-keep interface com.actionbarsherlock.** { *; }
-keep class com.slidingmenu.** { *; }
-keep interface com.slidingmenu.** { *; }
-keep public class com.viewpagerindicator.** { *; }
-keep public interface com.viewpagerindicator.** { *; } 
```

有人知道我的 proguard 脚本有什么问题吗？请让我知道，提前谢谢你。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-29T18:04:51.880

而不是像包名称那样具体

```
-keep public class * extends android.support.v4.app.FragmentActivity
-keep public class * extends android.support.v4.app.Fragment 
```

将其更改为：

```
-keep class android.support.v4.app.** { *; }
-keep interface android.support.v4.app.** { *; } 
```

在它正在寻找的错误中（注意额外的**p**）：

```
android.support.v4.appp.FragmentActivity$2 
```

而不仅仅是

```
android.support.v4.app.FragmentActivity.<init> 
```

编辑，不确定它可能是什么，这是我的一个使用支持库和 ActionBarSherlock 的应用程序的完整 proguard。

```
##---------------Begin: proguard configuration common for all Android apps ----------
-optimizationpasses 5
-dontusemixedcaseclassnames
-dontskipnonpubliclibraryclasses
-dontskipnonpubliclibraryclassmembers
-dontpreverify
-verbose
-dump class_files.txt 
-printseeds seeds.txt 
-printusage unused.txt 
-printmapping mapping.txt 
-optimizations !code/simplification/arithmetic,!field/*,!class/merging/*

-allowaccessmodification
-keepattributes *Annotation*
-renamesourcefileattribute SourceFile
-keepattributes SourceFile,LineNumberTable
-repackageclasses ''

-keep public class * extends android.app.Activity
-keep public class * extends android.app.Application
-keep public class * extends android.app.Service
-keep public class * extends android.content.BroadcastReceiver
-keep public class * extends android.content.ContentProvider
-keep public class * extends android.app.backup.BackupAgentHelper
-keep public class * extends android.preference.Preference
-keep public class com.android.vending.licensing.ILicensingService
-dontnote com.android.vending.licensing.ILicensingService

# Explicitly preserve all serialization members. The Serializable interface
# is only a marker interface, so it wouldn't save them.
-keepclassmembers class * implements java.io.Serializable {
    static final long serialVersionUID;
    private static final java.io.ObjectStreamField[] serialPersistentFields;
    private void writeObject(java.io.ObjectOutputStream);
    private void readObject(java.io.ObjectInputStream);
    java.lang.Object writeReplace();
    java.lang.Object readResolve();
}

# Preserve all native method names and the names of their classes.
-keepclasseswithmembernames class * {
    native <methods>;
}

-keepclasseswithmembernames class * {
    public <init>(android.content.Context, android.util.AttributeSet);
}

-keepclasseswithmembernames class * {
    public <init>(android.content.Context, android.util.AttributeSet, int);
}

# Preserve static fields of inner classes of R classes that might be accessed
# through introspection.
-keepclassmembers class **.R$* {
  public static <fields>;
}

# Preserve the special static methods that are required in all enumeration classes.
-keepclassmembers enum * {
    public static **[] values();
    public static ** valueOf(java.lang.String);
}

-keep public class * {
    public protected *;
}

-keep class * implements android.os.Parcelable {
  public static final android.os.Parcelable$Creator *;
}
##---------------End: proguard configuration common for all Android apps ----------

# Remove Logging statements
-assumenosideeffects class android.util.Log {
    public static *** d(...);
    public static *** v(...);
    public static *** e(...);
    public static *** i(...);
}

##---------------Begin: proguard configuration for Gson  ----------
# Gson uses generic type information stored in a class file when working with fields. Proguard
# removes such information by default, so configure it to keep all of it.
-keepattributes Signature

# Gson specific classes
-keep class sun.misc.Unsafe { *; }
#-keep class com.google.gson.stream.** { *; }

# Application classes that will be serialized/deserialized over Gson
-keep class com.antew.redditinpictures.library.imgur.** { *; }
-keep class com.antew.redditinpictures.library.reddit.** { *; }

##---------------End: proguard configuration for Gson  ----------

##---------------Begin: proguard configuration for ActionBarSherlock  ----------
-keep class android.support.v4.app.** { *; }
-keep interface android.support.v4.app.** { *; }
-keep class com.actionbarsherlock.** { *; }
-keep interface com.actionbarsherlock.** { *; }

##---------------End:   proguard configuration for ActionBarSherlock  ---------- 
```

# jquery - 打开带有特定选项卡的链接

> ID：13624505
> 
> 赞同：0
> 
> 时间：2012-11-29T11:13:46.617
> 
> 标签：jquery

在一个页面中，我有这样的标签

```
<div id="tabs">
    <ul>
        <li><a href="#tabs-1">1</a></li>
        <li><a href="#tabs-2">2</a></li>
        <li><a href="#tabs-3">3</a></li>
    </ul>

    <div id="tabs-1">
       1
    </div>

    <div id="tabs-2">
      2

    </div>
    <div id="tabs-3">
3
    </div>
</div> 
```

和表单中的提交按钮

当我点击提交时，我需要在同一页面中打开特定选项卡

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T11:35:30.057

试试这个

```
<script language="javascript" type="text/javascript">
    $('#tabs').tabs();
    function select_tab(tabeName){
       $('#tabs').tabs('select', '#'+tabname);
    }
</script> 
```

html 提交

```
<input name="" type="button" onclick='select_tab("tab1")' value="submit"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T11:26:44.237

如果您使用 jqueryui 选项卡，则可以采用这种方式；当您单击按钮时，它将选择第二个选项卡

***先加载jquery和jqueryui***

```
<link href="css/smoothness/jquery-ui-1.9.0.custom.css" rel="stylesheet">
<script language="javascript" type="text/javascript" src="jquery-1.8.2.js"></script>
<script src="js/jquery-ui-1.9.0.custom.js"></script>
<script language="javascript" type="text/javascript">
$(function(){
    $("#tabs").tabs();// initiate tabs with jqueryui
});
</script> 
```

***html代码***

我们也可以将按钮放在选项卡之外，但在这里我将它包含在第一个选项卡中

```
<div id="tabs">
    <ul>
        <li><a href="#tabs-1">1</a></li>
        <li><a href="#tabs-2">2</a></li>
        <li><a href="#tabs-3">3</a></li>
    </ul>
    <div id="tabs-1">
       1
       <input name="" type="button" onclick='$("#tabs").tabs( "select", "tabs-2" )' value="select tab2"/>
    </div>
    <div id="tabs-2">
      2

    </div>
    <div id="tabs-3">
     3
    </div>
</div> 
```

示例：[Jsfiddle 演示](http://jsfiddle.net/swarne27/LR8kb/1/)

# java - Java超时一组指令

> ID：13624509
> 
> 赞同：0
> 
> 时间：2012-11-29T11:13:59.300
> 
> 标签：java, multithreading, loops, for-loop, timeout

是否可以在java中为一组指令设置超时？我有以下内容：

```
 new Thread(new Runnable(){
            public void run() {
                    //instructions
                    for(...){

                     ....
                    }
                    //instructions2
            }}).start(); 
```

我想为循环设置一个超时时间，如果它达到时间，请按照指令2正常继续。在循环内部，我有几个函数调用（一个复杂的组织），并且可以在其中任何一个内部被阻塞，从而导致持续时间长的循环。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T11:21:33.210

假设您的阻塞函数响应中断，您可以使用带有超时的未来。如果他们没有，你可以做的不多......请注意，使用下面的方法，您不再需要手动启动线程。

```
 ExecutorService forLoopExecutor = Executors.newSingleThreadExecutor();
    Future<?> future = forLoopExecutor.submit(new Runnable() {

        @Override
        public void run() {
            //your for loop here
        }
    });
    try {
        future.get(1, TimeUnit.SECONDS); //your timeout here
    } catch (TimeoutException e) {
        future.cancel(true);
    }
    forLoopExecutor.shutdownNow();
    //proceed with the rest of your code
    forLoopExecutor.submit(aRunnableForInstructions2); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T11:26:28.967

也许这个例子可以帮助你

```
 long l = System.currentTimeMillis();
    final long TIMEOUTMILLIS = 1000;

    for(;;){

        System.out.println("bla bla bla");
        if(System.currentTimeMillis()>l+TIMEOUTMILLIS){
            break;
        }

    } 
```

您可以计算花费的时间并离开循环。

另一种策略是在指定的时间后中断线程。我希望这有帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T12:10:41.387

如果您`InterruptedException`在 for 循环内的任何地方捕获，请删除所有这些 try/catch 块，而是使用一个包围整个 for 循环的 try/catch。当您中断其线程时，这将允许整个 for 循环停止。

同样，如果您正在捕捉`IOException`，请先捕捉`InterruptedIOException`和`ClosedByInterruptException`。将这些 catch 块移到 for 循环之外。（如果您在内部捕获，编译器将不允许它`IOException`，因为在外部级别没有什么可以捕获的。）

如果阻塞调用没有抛出`InterruptedException`，则需要在每个调用之后添加一个检查，如下所示：

```
if (Thread.interrupted()) {
    break;
} 
```

如果您有许多级别的循环，您可能需要添加一个标签，以便您可以直接退出第一个“指令”循环，而无需添加大量标志变量：

```
instructions:
for ( ... ) {
    for ( ... ) {
        doLongOperation();
        if (Thread.interrupted()) {
            break instructions;
        }
    }
} 
```

无论哪种方式，一旦处理了中断，您就可以让后台线程中断您的第一个 for 循环：

```
final Thread instructionsThread = Thread.currentThread();
Runnable interruptor = new Runnable() {
    public void run() {
        instructionsThread.interrupt();
    }
};
ScheduledExecutorService executor =
    Executors.newSingleThreadScheduledExecutor();
executor.schedule(interruptor, 5, TimeUnit.MINUTES);

// instructions
try {
    for ( ... ) {
    }
} catch (InterruptedException |
         InterruptedIOException |
         ClosedByInterruptException e) {
    logger.log(Level.FINE, "First loop timed out.", e);
} finally {
    executor.shutdown();
}

// instructions2 
```

# matlab - 将旧矩阵复制到新矩阵的快速方法

> ID：13624511
> 
> 赞同：2
> 
> 时间：2012-11-29T11:14:12.060
> 
> 标签：matlab, matrix, octave

例如，我的原始矩阵 (m) 看起来像这样

```
1 2
3 4 
```

然后我使用 n = padarray(m,[oldMatrixRow,OldMatrixColumn]); 我会有

```
x x x x x x
x x x x x x 
x x 1 2 x x 
x x 3 4 x x 
x x x x x x
x x x x x x 
```

这里的重点是我希望我的新矩阵看起来像这样

```
1 2 1 2 1 2
3 4 3 4 3 4
1 2 1 2 1 2
3 4 3 4 3 4
1 2 1 2 1 2
3 4 3 4 3 4 
```

有什么聪明的方法吗？
非常感谢你

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T11:16:59.070

你要`repmat`

```
B = repmat(A,m,n) 
```

`A`您要重复的矩阵在哪里，`m`并`n`定义它如何重复的维度

在您的情况下，请调用您的原始矩阵`A`并使用

```
B = repmat(A,3,3) 
```

得到你想要的输出

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-29T11:17:05.870

假设您只想多次重复矩阵，简单的方法是使用 repmat：

```
m = [1 2;3 4];
n = repmat(m,3,3) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T11:48:22.917

只是提供一个替代解决方案：

```
kron(ones(3), [1 2; 3 4]) 
```

# iphone - 当原始版本尚未发布时，Apple 是否会审核应用程序更新？

> ID：13624522
> 
> 赞同：1
> 
> 时间：2012-11-29T11:14:42.590
> 
> 标签：iphone, xcode, app-store-connect, updates

一周前苹果批准了我的应用程序，它将在 12 月 10 日在 AppStore 上发送。但我在第一个版本中发现了一个大错误，所以我修复了它并发送了更新。我想知道苹果是否在应用发布之前评论更新？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T11:16:06.427

是的。他们审查每一次更新。（否则那将是一个相当大的漏洞！）

# sql - 带外键的 SQL 表性能

> ID：13624532
> 
> 赞同：0
> 
> 时间：2012-11-29T11:15:15.507
> 
> 标签：sql, performance, foreign-keys

我有一个需要对用户进行大量主动搜索的网站。我有一个用户表，其中包含指向所有完整用户详细信息的链接，但只有在查看您自己的帐户时才真正感兴趣。在搜索其他用户时，您需要的信息非常有限，因此为了使搜索更快、更高效，每次更新用户详细信息时，代码都会将一个条目写入一个名为 UserLight 的单独表中 - 该表仅包含大约 8 列并且都是纯数据——即没有到其他子表或集合对象的链接，只是为了速度而使用字符串数据。每个用户一次只能有一个 UserLight 条目，这是他们的帐户如何显示给其他用户的摘要表示。

我的问题是关于性能的，我将 UserId 设置为 User 表的外键约束是否重要？因此，如果没有 User 中的相应行，您将无法创建 UserLight 条目，因此当您删除 User 行时，它会自动级联并删除 UserLight 条目。这是理想的，我希望如何拥有它，但我只是想知道在 UserLight 表上具有此 FK 约束是否会以任何方式减慢对该表的读取或写入操作的性能？如果是这样，我很乐意放弃 FK 约束并拥有一个完全隔离的表，没有约束或对其他对象的外部引用以提高性能，并且只需手动管理内务管理，但如果 FK 约束根本不影响性能 - 我宁愿保留它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T11:22:02.187

它不会妨碍您的性能，而是更喜欢限制数据以避免插入/删除/更新异常。

# android - 安卓应用内结算中的结果错误

> ID：13624533
> 
> 赞同：1
> 
> 时间：2012-11-29T11:15:19.780
> 
> 标签：android

我正在为我的应用程序中的产品实施 Inapp 计费，因为我引用了地下城示例并从中实施！但是现在我不打算在我的应用程序中显示结帐对话框，我什至没有在 logcat 中收到任何错误。应用程序在没有连接消息的对话框中将结果显示为错误

我正在使用日志跟踪问题。我用来显示结帐对话框的代码在我的主类中::::::::::

```
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    Intent j = getIntent();
    int position = j.getExtras().getInt("BId");
    System.err.println("Bid="+position);
    Log.i("J","gf");

    mHandler = new Handler();
    mBooksPurchaseObserver = new BooksPurchaseObserver(mHandler);
    mBillingService = new BillingService();
    mBillingService.setContext(this);
    mItemName = getString(CATALOG[position].nameId);
    mSku = CATALOG[position].sku;
    System.err.println("mSku_______="+mSku);
    System.err.println("mItemName____="+mItemName);
    System.err.println("Consts.DEBUG=="+Consts.DEBUG);
    ResponseHandler.register(mBooksPurchaseObserver);
    if (mBillingService.checkBillingSupported()) {
        Log.i("ds","bsc_checkconnection");

    }
    if (Consts.DEBUG!=true) {
        Log.d(TAG, "buying: " + mItemName + " sku: " + mSku);
        Log.i("x","x");

    }
    mPurchaseDatabase = new PurchaseDatabase(this);

    if(!mBillingService.requestPurchase(mItemName, mSku)){

        Log.e("this is exp","request purchase______________");
        showDialog(DIALOG_BILLING_NOT_SUPPORTED_ID);
    }

    setupWidgets(); 
    Log.i("ga","Request purchaseeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee");
    // Check if billing is supported.

    Log.i("ga","Request purchaseeeeeeeeeee");
} 
```

在计费服务类::::

```
class RequestPurchase extends BillingRequest {
    public final String mProductId;
    public final String mDeveloperPayload;

    public RequestPurchase(String itemId) {
        this(itemId, null);
        Log.i("ga","Request purchase");

    }

    public RequestPurchase(String itemId, String developerPayload) {
        // This object is never created as a side effect of starting this
        // service so we pass -1 as the startId to indicate that we should
        // not stop this service after executing this request.

        super(-1);
        System.err.println("itemId="+itemId);
        Log.i("fads","request only");
        mProductId = itemId;
        mDeveloperPayload = developerPayload;
    }

    @Override
    protected long run() throws RemoteException {
        Log.i("gaaaaaaaaa","Request purchase");
        Bundle request = makeRequestBundle("REQUEST_PURCHASE");
        request.putString(Consts.BILLING_REQUEST_ITEM_ID, mProductId);
        // Note that the developer payload is optional.
        if (mDeveloperPayload != null) {
            request.putString(Consts.BILLING_REQUEST_DEVELOPER_PAYLOAD, mDeveloperPayload);
        }
        System.err.println("mService===="+mService);
        Bundle response = mService.sendBillingRequest(request);
        System.err.println("response__"+response);
        System.err.println("response__!!!!!!!!!!!!"+Consts.BILLING_RESPONSE_PURCHASE_INTENT);
        PendingIntent pendingIntent
                = response.getParcelable(Consts.BILLING_RESPONSE_PURCHASE_INTENT);
        System.err.println("Pending Intent==="+pendingIntent);
        Log.i("12","12");
        if (pendingIntent == null) {
            Log.e(TAG, "Error with requestPurchase");
            return Consts.BILLING_RESPONSE_INVALID_REQUEST_ID;
        }
        Log.i("2","2");
        Intent intent = new Intent();
        Log.i("222222","11111");
        System.err.println("Intent is equals to__"+intent);
        System.err.println("pendingIntent is equals to__"+pendingIntent);
     //   System.err.printf("fsd",ResponseHandler.buyPageIntentResponse(pendingIntent, intent));
        ResponseHandler.buyPageIntentResponse(pendingIntent, intent);
        Log.i("f","fdas");
        return response.getLong(Consts.BILLING_RESPONSE_REQUEST_ID,
                Consts.BILLING_RESPONSE_INVALID_REQUEST_ID);

    }

    @Override
    protected void responseCodeReceived(ResponseCode responseCode) {
        Log.i("response code","response code");
        ResponseHandler.responseCodeReceived(BillingService.this, this, responseCode);
    }
} 
```

我的 CheckbillingSupporting 课程

```
 class CheckBillingSupported extends BillingRequest {
    public CheckBillingSupported() {
        // This object is never created as a side effect of starting this
        // service so we pass -1 as the startId to indicate that we should
        // not stop this service after executing this request.
        super(-1);
    }

    @Override
    protected long run() throws RemoteException {
        Bundle request = makeRequestBundle("CHECK_BILLING_SUPPORTED");
        Bundle response = mService.sendBillingRequest(request);
        System.err.println("response code____"+Consts.BILLING_RESPONSE_RESPONSE_CODE);
        int responseCode = response.containsKey(Consts.BILLING_RESPONSE_RESPONSE_CODE)
                           ? response.getInt(Consts.BILLING_RESPONSE_RESPONSE_CODE)
                           : ResponseCode.RESULT_BILLING_UNAVAILABLE.ordinal();
        if (Consts.DEBUG) {
            Log.i(TAG, "CheckBillingSupported response code: " +
                    ResponseCode.valueOf(responseCode));
        }
        boolean billingSupported = (responseCode == ResponseCode.RESULT_OK.ordinal());
        ResponseHandler.checkBillingSupportedResponse(billingSupported);
        return Consts.BILLING_RESPONSE_INVALID_REQUEST_ID;
    }
} 
```

谁能告诉我我错了吗？

# jquery - 在 Twitter Bootstrap 的弹出窗口中使用 farbtastic colorpicker

> ID：13624535
> 
> 赞同：2
> 
> 时间：2012-11-29T11:15:50.600
> 
> 标签：jquery, twitter-bootstrap, popover, color-picker

在基于[Twitter Bootstrap](http://twitter.github.com/bootstrap)的用户界面中，我有多个按钮应该触发一个`popover`farbtastic [colorpicker](http://acko.net/blog/farbtastic-jquery-color-picker-plug-in/)。目前我已将其附加到`<body />`标签并将其委托给按钮：

**HTML**

```
<div id="body" style="text-align:center;">

<a class="btn" rel="popover">First</a>
<a class="btn" rel="popover">Second</a>

<div id="colorpicker">
    <input type="color" id="color" />
    <div class="my-farbtastic"></div>
</div>

</div> 
```

**JavaScript**

```
$(document).ready(function() {
    $("body").popover({
        trigger: "click",
        placement: "bottom",
        title: "Colorpicker",
        content: $("#colorpicker"),
        selector: "a[rel=popover]",
        html: true
    }).on("click", "a[rel=popover]", function() {
        $("#colorpicker").find(".my-farbtastic").farbtastic("#color");
    });
}); 
```

使用这种方法，我有两个问题：

*   弹出框不会出现在相应按钮旁边，但与`<body />`标签对齐。
*   颜色选择器仅在第一次触发弹出框时起作用。之后，所有基于 JavaScript 的功能都将丢失。

有关现场演示，请参阅[此 jsFiddle](http://jsfiddle.net/JREtC/7/)。

提前感谢您对此提出任何有用的想法！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T09:21:56.597

在这之间我自己解决了这个问题，这就是我的解决方案的样子（另见[jsFiddle 的第 11 版](http://jsfiddle.net/JREtC/11/)）：

**HTML**

```
<div id="body" style="text-align:center;">
    <input type="text" rel="colorpicker" data-tool="first" />
    <input type="text" rel="colorpicker" data-tool="second" />
</div> 
```

**JavaScript**

```
$(document).ready(function() {
    $("input[rel=colorpicker]").each(function(i, input) {
        $this = $(input);
        return $this.popover({
            title: "Colorpicker <i class='icon-remove pull-right'></i>",
            trigger: "click",
            placement: "bottom",
            html: true,
            content: "<div id='colorpicker-" + $this.data("tool") + "'>"
            + "<div class='color-picker'></div>"
            + "</div>"
        }).on("click", function() {
            $this = $(this);
            $target = $("#colorpicker-" + $this.data("tool"));
            $target.find(".color-picker").farbtastic(function(color) {
                $this.val(color).css("background-color", color);
            });
        });
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T12:38:10.893

关于第一个问题，把事件附在`.btn`

```
$(".btn").popover({
        trigger: "click",
        placement: "bottom",
        title: "Colorpicker",
        content: $("#colorpicker"),
        html: true
    }) 
```

# c++ - 从嵌套结构调用受保护的基类函数

> ID：13624538
> 
> 赞同：2
> 
> 时间：2012-11-29T11:16:01.167
> 
> 标签：c++, templates, boost, boost-mpl

通常嵌套结构可以访问拥有的类`public`和`protected`成员`public`函数。`protected`从嵌套结构中调用基类的成员函数也没有问题，即以下代码编译并正常工作：

```
#include <iostream>

class Base
{
public:
    Base()
    {}

protected:
    void baseProtectedFunc()
    {
        std::cout << __func__ << "Called for Base\n";
    }
};

class Derived : public Base
{
public:
    explicit Derived() : Base()
    {}

    void accessBaseProtectedFuncFromNested()
    {
        Nested myNested( this );
        myNested();
    }

private:
    struct Nested
    {
        explicit Nested( Derived* ptr ) : derived_( ptr ) 
        {}

        void operator()()
        {
            derived_->baseProtectedFunc();
        }

        Derived* derived_;
    };
};

int main( int, char** )
{
    Derived myDerived;
    myDerived.accessBaseProtectedFuncFromNested();
    return 0;
} 
```

现在，考虑以下代码，用于`mpl::inherit_linearly`生成派生的基类，使用`mpl::vector`类型：

```
#include <iostream>
#include <typeinfo>

#include <boost/mpl/vector.hpp>
#include <boost/mpl/inherit.hpp>
#include <boost/mpl/inherit_linearly.hpp>
#include <boost/mpl/for_each.hpp>

template<typename T>
class Base
{
public:
    Base()
    {}

protected:
    void baseProtectedFunc()
    {
        std::cout << __func__ << "Called for Base< " << typeid(T).name() << " >\n";
    }
};

typedef boost::mpl::vector< long
    , unsigned
    , bool
    , std::string
    > parameter_type_list_t;

typedef boost::mpl::inherit_linearly< parameter_type_list_t
                  , boost::mpl::inherit< boost::mpl::_1
                                       , Base< boost::mpl::_2 > > 
                  >::type base_types;

class Derived : public base_types
{
public:
    explicit Derived() : base_types()
    {}

    template<typename T>
    void accessBaseProtectedFuncFromNested()
    {
        Nested myNested( this );

        myNested.someFunc<T>();
    }

private:
    struct Nested
    {
        explicit Nested( Derived* ptr ) : derived_( ptr ) 
        {}

        template< typename T >
        void someFunc()
        {
            Base<T>* base = static_cast<Base<T>*>( derived_ );
            base->baseProtectedFunc();
        }

        Derived* derived_;
    };
};

int main( int, char** )
{
    Derived myDerived;
    myDerived.accessBaseProtectedFuncFromNested<unsigned>();

    return 0;
} 
```

使用 GCC 版本 4.4.6-3（在 c++03 和 c++0x 模式下）会生成以下错误：

```
friend-prot.cpp: In member function ‘void Derived::Nested::someFunc() [with T = unsigned int]’:
friend-prot.cpp:47:   instantiated from ‘void Derived::accessBaseProtectedFuncFromNested() [with T = unsigned int]’
friend-prot.cpp:82:   instantiated from here
friend-prot.cpp:17: error: ‘void Base<T>::baseProtectedFunc() [with T = unsigned int]’ is protected
friend-prot.cpp:72: error: within this context 
```

如果我创建函数，我试图调用`public`代码编译并按预期工作。

我可以通过`private`向派生添加一个额外的成员函数来解决这个问题，它只是转发来自嵌套的调用，即：

```
struct Nested
{
    explicit Nested( Derived* ptr ) : derived_( ptr ) 
    {}

    template< typename T >
    void operator()()
    {
        derived_->forwarder<T>();
    }

    Derived* derived_;
}; 

template< typename T >
void forwarder()
{
    Base<T>::baseProtectedFunc();
} 
```

我不明白为什么在使用时`baseProtectedFunc()`我不能打电话。`protected``mpl::inherit`

为什么我可以在第一个示例中调用基类受保护函数，而不是在第二个示例中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T12:38:59.723

你会发现如果你把转发函数写成

```
template <typename T>
void forwarder()
{
    Base<T>* base = static_cast<Base<T>*>( derived_ );
    base->baseProtectedFunc();
} 
```

`baseProtectedFunc`问题是对基指针的强制转换使编译器模糊了使用指定指针从当前上下文中实际可访问的事实。由于这是模糊的，编译器必须假设不允许通过该指针进行访问。

由于您在转发函数中使用的语法也可以在嵌套类中使用，因此解决方案相当简单优雅：

```
struct Nested
{
    explicit Nested( Derived* ptr ) : derived_( ptr ) 
    {}

    template< typename T >
    void someFunc()
    {
        derived_->Base<T>::baseProtectedFunc(); /* <-- Changed */
    }

    Derived* derived_;
}; 
```

# php - 推送通知中的 SSL 错误

> ID：13624542
> 
> 赞同：1
> 
> 时间：2012-11-29T11:16:07.547
> 
> 标签：php

```
Warning: stream_socket_client() [function.stream-socket-client]:
unable to connect to ssl://gateway.sandbox.push.apple.com:2195 
(Unable to find the socket transport "ssl"
 - did you forget to enable it when you configured PHP?)
in C:\xampp\htdocs\PhpProject9\simplepush.php on line 21
Failed to connect: 5 Unable to find the socket transport "ssl"
- did you forget to enable it when you configured PHP? 
```

它可以如何解决？我从*php.ini*中删除了分号，但错误没有改变。

# c++ - 尝试编译工具箱的 c++ 文件，但 cmake 无法找到所有必需的 boost 库

> ID：13624547
> 
> 赞同：1
> 
> 时间：2012-11-29T11:16:15.513
> 
> 标签：c++, boost, cmake, toolbox

我正在尝试安装一个名为“Mocapy”的工具箱并编译它的所有文件。一旦我下载了文件，它会要求我在目录中键入命令。..

制作。制作

但是当我输入 cmake . 时，输出是

```
...
-- 增强版：1.52.0
-- 增强版：1.52.0
-- 找到以下 Boost 库：
-- 序列化
-- 程序选项
-  线
运行 /usr/bin/cmake -E create_symlink "/home/vishalnus/Downloads/Mocapy++-1.07/examples/data" "/home/vishalnus/Downloads/Mocapy++-1.07/examples/data" 2>&1
-- 找不到 Boost
-- 找不到 Boost
-- 找不到 Boost
-- 找不到 Boost
-- 增强版：1.52.0
-- 找到以下 Boost 库：
-- 序列化
-- 找不到 Boost
-- 增强版：1.52.0
-- 找到以下 Boost 库：
-- 序列化
-- 找不到 Boost
...

```

我不知道为什么它只能找到几个 Boost 库而不是全部，任何人都可以帮助我..

# android - 需要将变量传递给远程 swf

> ID：13624549
> 
> 赞同：0
> 
> 时间：2012-11-29T11:16:18.797
> 
> 标签：android, actionscript-3, flash

我正在开发一个原型 Air for Android 应用程序，它加载一些远程 swf 文件（全部由我创建和控制），我需要能够将变量传递给远程 SWF。

以下是该过程当前工作方式的快速分解：

*   名为 Loader 的 Android 应用程序安装在设备上。
*   Loader 指向我的服务器并找到 Player.swf，并将其加载到主阶段。Player.swf 显示登录屏幕。
*   当用户正确登录时，Player.swf 会收到来自 API 的 XML 响应，其中包含要为用户显示的远程 SWF 视频列表。Player.swf 循环遍历 XML 列表并一个接一个地播放每个远程 SWF。

现在，到目前为止，一切都很好。远程 SWF 视频加载并完美播放。但我需要开始从 Player.swf 中获取变量（从 XML 响应中提取）以在远程 SWF 中使用（例如文本字符串、用户 ID 等）

从我所做的所有搜索来看，我相信这取决于沙盒环境，因为 Loader 是一个已编译的应用程序，而 Player.swf + 远程 SWF 都来自服务器。但是，现在我想知道，因为 Player.swf 是具有处理 XML 响应的 AS3 代码的那个，并且与播放的远程 SWF 位于同一服务器上（因此应该是同一个沙箱？ )

我能够使用 URL 参数传递一个变量，但它只能在本地工作，而不是在我使用 Android 应用程序时。

我找到了一个关于 Sandbox Bridges 的旧博客，但是示例文件下载不再起作用。

谁能指出我使用 parentSandboxBridge 函数/类传递变量的正确方向（我见过的所有示例都处理传递函数和/或为 Flex 编码）

我不能发布任何代码，因为我没有什么可以展示我想要实现的目标（我完全被这点难住了！）

编辑：我设法获取要传递的参数（即使它以前在本地工作，但它不适用于 Loader 应用程序 > 远程播放器 > 远程 SWF 动画组合）

我必须在 Player.swf 中设置应用程序域上下文（因为它与远程 swf 动画在同一台服务器上，不知道为什么我需要这样做）

但奇怪的是，我不能使用 parent 或 root 来获取变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T12:24:13.190

我已经在运行 android 2.2.2 的 HTC Desire 上对此进行了测试，它的工作原理与我在评论中所做的一样，因此答案如下：）

您的主机需要定义类似的：

```
 var params:URLVariables = new URLVariables();
            params["string"] = "ala ma kota";
            params["number"] = 1979;

        var request:URLRequest = new URLRequest();
            request.data = params;
            request.url = "urlVarsReader.swf";

        var loader:Loader = new Loader();

        loader.load(request);

        addChild(loader); 
```

然后加载的内容（此处为 urlVarsReader.swf）可以如下读取它们：

```
 var output:TextField = new TextField();
        addChild(output);
        output.border = true;
        output.width = 320;
        output.height = 240;
        output.wordWrap = true;
        output.multiline = true;
        var p:Object = getParams(this.loaderInfo);
        for (var name:String in p) 
        {
            output.appendText(name + " = " + p[name] + "\n");
        } 
```

我有一个读取参数的包装方法：

```
 public function getParams(li:LoaderInfo):Object
    {
        try
        {
            var params:Object = li.parameters;
            var pairs:Object = {};
            var key:String;
            for(key in params)
            {
                pairs[key] = String(params[key]);
            }
        }
        catch(e:Error)
        {
            return {error:e.getStackTrace()};
        }
        return pairs;
    } 
```

此致

编辑：

这仅适用于本地内容失败并出现 SecurytyError 例如 SecurityError：错误 #2070：安全沙箱违规：调用者[http://example.com/urlVarsReader.swf?string=ala%20ma%20kota&number=1979](http://example.com/urlVarsReader.swf?string=ala%20ma%20kota&number=1979)无法访问应用程序拥有的阶段：/加载参数.swf

# sql - 将 TOP(variable) 与数据子集一起使用

> ID：13624551
> 
> 赞同：0
> 
> 时间：2012-11-29T11:16:24.983
> 
> 标签：sql, sql-server-2008, azure-sql-database

我已将问题抽象为以下情况：

我有一个表 ( `A`)，其中包含`Quantity`我要更新的项目数 ( )。接下来，我有一个表 ( `SL`)，其中包含对表 ( `A`) 的引用，我需要从中进行选择。最后是需要更新的表 ( `B`)

```
CREATE TABLE A
(
    Id int,
    Quantity int
)

CREATE TABLE SL
(
    Id int,
    A_Id int,
    S_Id int
)

CREATE TABLE B
(
    Id int,
    StatusValue int,
    A_Id int, 
    S_Id int NULL,
) 
```

因此，让我们插入一些数据用于测试目的：

```
INSERT INTO A Values (1, 4), (2, 2), (3, 3), (4, 4), (5, 2)

delete from B
declare @i int = 1;
declare @j int = 0;
declare @maxA int = 5;
declare @rows_to_insert int = 10;
while @i < @maxA
begin
    while @j < @rows_to_insert * @i
    begin
        INSERT INTO B VALUES (10+@j, 0, @i, null)
        set @j = @j + 1
    end
    set @i = @i + 1
end
select * from B

INSERT INTO SL Values (1, 1, 1), (2, 2, 1), (3 ,2, 1) 
```

现在谈谈问题。我想**更新**与`B`. `SL`基本上这是我想要做的，但它在 SQL 中不受支持：

```
DECLARE @Sale_Id int = 1;
WITH AB (AId, AQuantity, SaleId)
AS
(
    SELECT A.Id, A.Quantity, SL.S_Id FROM A
        INNER JOIN SL on A.Id = SL.A_Id
        WHERE SL.S_Id = @Sale_Id
)
UPDATE TOP(AB.Quantity) B
    SET StatusValue = 1,
        S_Id = AB.SaleId
    FROM AB
    WHERE StatusValue = 0 -- Edited
                AND B.A_Id = AB.AId 
```

错误信息是

> 消息 4104，级别 16，状态 1，行 55 无法绑定多部分标识符“AB.Quantity”。

我有什么选择来完成这项工作？（总是有`Cursor`但这是一个好的选择吗？）

**注意：**数据有一个有趣的一面，在 SL 中有 2 次引用 A_Id = 2 的记录。这意味着结果需要更新 A_Id = 2 的 4 条 B 记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T11:45:13.853

这应该工作

```
DECLARE @Sale_Id int = 1;
with tmp as (
  SELECT A.Id, A.Quantity, SL.S_Id SaleID, B.S_ID, b.id b_id, B.StatusValue,
         rn=dense_rank() over (partition by a.id order by b.id)
    FROM A
    JOIN SL on A.Id = SL.A_Id
    JOIN B ON B.A_Id = A.Id
   WHERE SL.S_Id = @Sale_Id
)
update tmp
   set S_ID = SaleID,
       StatusValue = 1
 where rn <= quantity; 
```

但是，您的数据看起来很有趣，因为 A.id=2 在同一个 SL.id=1 上被出售了两次。

## [SQL小提琴](http://sqlfiddle.com/#!6/56cb3/27/0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T10:49:02.403

所以这似乎`Cursor`是我需要走的路：

```
DECLARE @A_Id int, @Quantity int;
DECLARE ABCursor CURSOR LOCAL READ_ONLY FOR 
    SELECT A.Id, A.Quantity FROM A
        INNER JOIN SL on A.Id = SL.A_Id
        WHERE SL.S_Id = @Sale_Id
OPEN ABCursor
FETCH NEXT FROM ABCursor 
    INTO @A_Id, @Quantity
WHILE @@FETCH_STATUS = 0
BEGIN
    UPDATE TOP(@Quantity) B
        SET StatusValue = 1,
            S_Id = @Sale_Id
        WHERE StatusValue = 0
            AND B.A_Id = @A_Id
            AND S_Id is null
    FETCH NEXT FROM ABCursor 
        INTO @A_Id, @Quantity
END 
CLOSE ABCursor;
DEALLOCATE ABCursor; 
```

现在必须阅读什么是光标的最佳定义，即：`LOCAL READ_ONLY`

# cron - 如何将 cron 分组到 plesk 11.0.9

> ID：13624556
> 
> 赞同：0
> 
> 时间：2012-11-29T11:16:31.083
> 
> 标签：cron, plesk, parallels

我正在使用 Plesk 11.0.9，我尝试为每个网站创建几个 cron，但不知道如何按指定的域或其他东西对它们进行分组......以便更好地查看它们。

我在网站和域>计划任务上，我看到一个“系统用户”，然后当我点击它时..我可以创建所有 cron 作业。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T05:48:25.133

我认为您可以做的最好的分组是在脚本名称中包含域名。从技术上讲，任何脚本都可以访问一个系统帐户下的所有/任何域 - 只有您会知道特定脚本的功能。

# c# - System.Tuple 在可移植类库中的位置在哪里？

> ID：13624558
> 
> 赞同：6
> 
> 时间：2012-11-29T11:16:37.837
> 
> 标签：c#, windows-8, visual-studio-2012, portable-class-library

我不知道我是否安装了不正确的东西，但是在制作了 C# Portable Class Library 目标`.NET for Windows Store apps, .NET Framework 4.5, Silverlight 4 and higher, Windows Phone 7 and higher`之后，我得到了`System.Tuple`丢失的错误。

这怎么可能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T11:22:19.840

`Tuple[<...>]`在 Windows Phone 7 中不存在，因此如果您以该平台为目标，则无法使用它。

我刚刚验证过，如果您创建 PCL 定位：

*   适用于 Windows 应用商店应用的 .NET
*   .NET 框架 4.5
*   Silverlight 4 及更高版本

但**不是**“Windows Phone 7 及更高版本”，那么它工作正常，您可以使用`Tuple[<...>]`.

为了完整起见，如果您包含 Xbox 360，它也不存在。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T20:44:18.850

[Microsoft.Bcl](http://nuget.org/packages/Microsoft.Bcl) NuGet 包包括适用于 Windows Phone 7.5的元组类型，并允许您在面向 WP7.5、SL4、Windows Store 应用程序和 .NET 4（或更高平台）的可移植类库中使用它们。

一般来说，可移植 API 的完整列表以及它们可用的平台在这里：[http](http://sdrv.ms/OVdfNc) ://sdrv.ms/OVdfNc 。但是，该电子表格不包含有关我们通过外部方式（例如 Microsoft.Bcl 包）添加了对哪些类型的支持的信息。

# asp.net-mvc - 找不到另一个 ASP.NET MVC 路由

> ID：13624560
> 
> 赞同：0
> 
> 时间：2012-11-29T11:16:40.863
> 
> 标签：asp.net-mvc, asp.net-mvc-routing

我正在尝试为 MVC 3 路线编写测试，但仍然没有得到匹配。为什么这在测试中不起作用？我要离开[http://haacked.com/archive/2007/12/17/testing-routes-in-asp.net-mvc.aspx](http://haacked.com/archive/2007/12/17/testing-routes-in-asp.net-mvc.aspx)并查看 MVC 代码，它可能与 VirtualPathProvider 有关?

全球.asax

```
public static void RegisterRoutes(RouteCollection routes)
{
    routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

    routes.MapRoute(
        "import_DownloadTemplate",
        "{culture}/Client/{clientId}/DownloadTemplate",
        new { controller = "Import", action = "DownloadTemplate" },
        new { httpMethod = new HttpMethodConstraint("GET") });
} 
```

进口控制器

```
[HttpGet]
[Cache(Order = 1)]
[OutputCache(Order = 2, Duration = 60, VaryByParam = "*")]
public ActionResult DownloadTemplate(string culture, long clientId)
{
    byte[] result = this.repository.GetTemplateByClientId(clientId, culture);

    return new FileContentResult(result, "application/vnd.ms-excel");
} 
```

使用最小起订量进行测试

```
 [TestMethod]
    public void TestRoutes()
    {
        string url = "~/en-us/Client/1/DownloadTemplate";

        var httpContextMock = new Mock<HttpContextBase>();
        httpContextMock.Setup(c => c.Request.AppRelativeCurrentExecutionFilePath)
            .Returns(url);

        RouteCollection routes = new RouteCollection();
        MvcApplication.RegisterRoutes(routes);

        var routeData = routes.GetRouteData(httpContextMock.Object);
        // routeData is null!

        Assert.AreEqual("import", routeData.Values["controller"].ToString());
        Assert.AreEqual("DownloadTemplate", routeData.Values["action"].ToString());
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T21:55:12.453

您必须设置 HttpMethod，因此在 TestRoutes 方法中添加这些行：

```
string httpMethod = "GET";
httpContextMock.Setup(c => c.Request.HttpMethod).Returns(httpMethod); 
```

# php - 来自表单插入的 SQL 注入

> ID：13624562
> 
> 赞同：0
> 
> 时间：2012-11-29T11:16:51.857
> 
> 标签：php, sql, security, sql-injection

> **可能重复：**
> [防止 SQL 注入的最佳方法？](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection)

我无法理解如何清理 php 以防止 SQL 注入，并希望有人能向我解释我需要在这里更改什么以使我的代码安全？

```
<?php
$dbConnection = mysqli_connect('****', '****', '****', 'db');

$query = "INSERT INTO `table` (`1`, `2`, `3`) VALUES ('$_POST[1]', '$_POST[2]', '$_POST[3]')";

if (mysqli_query($dbConnection, $query)) {
echo "Successfully inserted " . mysqli_affected_rows($dbConnection) . " row";
} else {
echo "Error occurred: " . mysqli_error($dbConnection);
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T11:24:48.313

MySQLi 支持[prepared statements](http://php.net/manual/en/mysqli.prepare.php)，这比手动转义要好：

由于您使用的是程序 MySQLi，因此这里有一个示例：

```
/* create a prepared statement */
if ($stmt = mysqli_prepare($dbConnection, "INSERT INTO `table` (`1`, `2`, `3`) VALUES (?, ?, ?)"))
{

    /* bind parameters for markers */
    mysqli_stmt_bind_param($stmt, "sss", $_POST[1], $_POST[2], $_POST[3]);

    /* execute query */
    if(mysqli_stmt_execute($stmt))
    {
        echo "Successfully inserted " . mysqli_affected_rows($dbConnection) . " row";
    }
    else
    {
        echo "Error occurred: " . mysqli_error($dbConnection);
    }

    /* close statement */
    mysqli_stmt_close($stmt);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T11:24:15.197

为了防止 SQL 注入，您可以使用准备好的语句。为此，您将需要更多`mysqli_`功能：

*   [`mysqli_prepare()`](http://php.net/mysqli_prepare)
*   [`mysqli_stmt_bind_param()`](http://php.net/mysqli_stmt_bind_param)
*   [`mysqli_stmt_execute()`](http://php.net/mysqli_stmt_execute)

有了这些，您可以编写如下内容：

```
$dbConnection = mysqli_connect('****', '****', '****', 'db');

// prepare the query
$query = mysqli_prepare( $dbConnection, "INSERT INTO `table` (`1`, `2`, `3`) VALUES (?, ?, ?)";

// bind parameters; 2nd parameter is for data-types
mysqli_stmt_bind_param( $query, "sss", $_POST[1], $_POST[2], $_POST[3] );

// execute query
if ( mysqli_stmt_execute($query) ) {
  echo "Successfully inserted " . mysqli_affected_rows($dbConnection) . " row";
} else {
  echo "Error occurred: " . mysqli_error($dbConnection);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T11:22:19.170

如果您想继续使用旧的 mysql_* 函数，请查看[http://php.net/manual/en/function.mysql-real-escape-string.php](http://php.net/manual/en/function.mysql-real-escape-string.php)

```
$datapoint1 = mysql_real_escape_string($_POST[1]);
...
$query = "INSERT INTO `table` (`1`, `2`, `3`) VALUES ('$datapoint1', '$datapoint2', '$datapoint3')"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T11:22:34.620

您可以使用准备好的语句或[mysqli_real_escape_string](http://www.php.net/manual/en/mysqli.real-escape-string.php)

# ruby-on-rails - 如何为存储单元“number_to_human_size”设置 yml 文件的格式

> ID：13624563
> 
> 赞同：2
> 
> 时间：2012-11-29T11:16:52.650
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, internationalization

下面的代码是正确的格式`number_to_human_size`吗？我将它们放在五个 [en:, es:, de:, it:, fr:] .yml 文件下。

```
storage_units:
  format: "%n %u"
  units:
    byte:
      one: "Byte"
      other: "Bytes"
    kb: "KB"
    mb: "MB"
    gb: "GB"
    tb: "TB" 
```

我有以下参考

```
<%= number_to_human_size(@game.downloadsize, :precision => 2, :locale=>I18n.locale) %> 
```

我收到错误消息：

> 无法从 C:/Documents and Settings/rajg/antixdiscoveraws/config/locales/de.yml 加载翻译，预计它会返回哈希，但不会

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T11:24:27.920

尝试缩进格式：

```
storage_units:
  format: "%n %u"
  units:
    byte:
      one: "Byte"
      other: "Bytes"
    kb: "KB"
    mb: "MB"
    gb: "GB"
    tb: "TB" 
```

# javascript - javascript禁用excel保存按钮

> ID：13624569
> 
> 赞同：0
> 
> 时间：2012-11-29T11:17:15.553
> 
> 标签：javascript, jquery, html

我有这个：

```
<div class="openexcel"> <a href="./xxxxx.xls"> Open excel file </a></div> 
```

我也添加了这段代码：

```
$('.openexcel').click(function(){
/* some code here*/
}); 
```

是否有任何方法或任何代码可以添加到 javascript 中，一旦打开 excel 文件，我可以在其中停止“保存”按钮。

我需要用户阅读和查看，但我不希望他“保存”或“另存为”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T11:19:50.790

这是不可能的，尤其是不使用 javascript。

一旦用户打开了 excel 文档，它就会在他们的本地机器上从他们的本地缓存中打开。

您将无法控制他们的 Excel 软件中可用的功能。

在通过网络提供数据时，您需要接受没有办法阻止人们保留这些数据。

# autohotkey - 为 ahk 编程“计算器”按钮

> ID：13624571
> 
> 赞同：-3
> 
> 时间：2012-11-29T11:17:31.457
> 
> 标签：autohotkey, logitech

我可以为我正在使用的键盘上出现的 Logitech 按钮使用什么名称。我想在 Autohotkey 中重新编程。如果您没有安装专有软件，我看到它会打开计算器。谢谢！例如

```
Calculator::  ;then some commands
Logitech:: ;then some commands 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T22:00:58.150

您可以使用键盘挂钩以及查看键盘历史记录。

[文档](http://www.autohotkey.com/docs/KeyList.htm#SpecialKeys)中指定了查找这些密钥的过程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-09-04T00:40:38.987

以下是我设置`Calc`密钥以使用[AHK](https://www.autohotkey.com/)启动 Google Chrome 的方法：

```
Launch_App2::
    Run, "C:\Program Files (x86)\Google\Chrome\Application\chrome.exe" 
```

# python - 如何使用python在字符串中多次grep相同的模式？

> ID：13624573
> 
> 赞同：0
> 
> 时间：2012-11-29T11:17:33.037
> 
> 标签：python, regex

我正在使用 python 在一个字符串中多次模式匹配一​​个字符串。问题：

```
string = 'The value = 1 The value = 2 The value = 3' 
```

我只想 grep 值，但我的输出应该是这样的：

```
['value = 1 value = 2 value = 3'] 
```

我正在这样做：

```
pattern = re.compile('[value = (\d+)]*')
values = pattern.search(string)
values.group(0) 
```

输出：

```
'' 
```

即NULL（不匹配）

请帮助我给出正确的正则表达式来 grep 所需的输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T11:29:25.297

```
>>> [' '.join(re.findall(r'value = \d+', string))]
['value = 1 value = 2 value = 3'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T11:29:48.043

您正在使用字符类分组。您应该只使用带有`(`.

```
import re

string = 'The value = 1 The value = 2 The value = 3'

pattern = re.compile(r'(value = \d+)')
pattern.findall(string)
# OUT: ['value = 1', 'value = 2', 'value = 3']
" ".join(pattern.findall(string))
# OUT: 'value = 1 value = 2 value = 3' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T11:24:57.257

您在 RE 源代码中使用方括号 ( `[]`) 非常奇怪。这些形成字符集。

你应该使用类似的东西：

```
>>> pattern = re.compile(r'([^=]+)\s*=\s*(\d+)')
>>> pattern.findall(string)
[('The value ', '1'), (' The value ', '2'), (' The value ', '3')] 
```

注意使用`[findall()](http://docs.python.org/2/library/re.html#re.findall)`来获取所有匹配项，并使用分组来获取值名称。

# actionscript-3 - AS#3 改变材质纹理

> ID：13624586
> 
> 赞同：0
> 
> 时间：2012-11-29T11:18:20.547
> 
> 标签：actionscript-3, flash, flash-cs5, away3d

我似乎找不到解决方案，反正我基本上是在尝试使用带有 Flash 的 Away3d 引擎向 3D 模型添加新的动态纹理

```
 var myImage:BitmapData = new BitmapData(256, 256, true,0xFFFFFFFF);

   // i cant seem to reference this to my 3D model in the example: Myevent(enter frame):

   myModel.material = new TextureMaterial(new BitmapTexture(myImage)) 
```

我按照上述方法尝试了不同的方法，我检查了 away3d 文档，但找不到与我目前情况类似的东西：

我使用最新的 Away3d 库和 flash player 11 ......我所有的模型都可以正常工作并加载原始嵌入的 materialtTextures，我只是想将它们更改为我动态创建的位图或纹理

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T14:21:24.693

看看这里：

[https://github.com/away3d/away3d-tutorials-fp11/blob/master/tutorials/materials/basic_shading/src/Basic_Shading.as](https://github.com/away3d/away3d-tutorials-fp11/blob/master/tutorials/materials/basic_shading/src/Basic_Shading.as)

他们使用 Away3D 的 Cast 实用程序类来创建 BitmapTexture 对象，他们还添加了一堆不同的纹理贴图——希望这会有所帮助

** 编辑 --- 本教程有效 **

添加

```
public bmt:BtiMapTexture;

....
private function initMaterials():void {
    this.bmt = new BitmapTexture(new BitmapData(256,256, true, 0x222277FF));
    sphereMaterial = new TextureMaterial(Cast.bitmapTexture(this.bmt));
    sphereMaterial.specularMap = Cast.bitmapTexture(this.bmt);
    sphereMaterial.lightPicker = lightPicker;
} 
```

我有一个漂亮的蓝色球体

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-20T15:30:47.383

我的解决方案是：

```
var mesh:Mesh = 'the mesh for changing'
for each (var item:SubMesh in mesh.subMeshes) {
item.material = null;
}
mesh.material = new ColorMaterial(0xFF00FF); 
```

# vhdl - 实时局部最大值查找器

> ID：13624587
> 
> 赞同：1
> 
> 时间：2012-11-29T11:18:30.167
> 
> 标签：vhdl

当然，对于这个问题，我不想要一个确切的解决方案。只有想法或小指南（我的意思是有经验的！）就足够了。如图所示，我已经在 matlab 中模拟了一个实时信号。信号的长度几乎很大，尚未固定，但大约 100 KB。这是一个实时信号，每个点都将在 CLK 的上升沿计算。任务是找到信号的最大值。一些可能有帮助的点是真实信号的长度也是固定的（我的意思是主要形状，除了零部分），并且峰值之间的距离应该是恒定的并且之前已知。所以，概括一下：我们有一个固定的窗口框架（比如说 100 KB），并且在随机位置有一个固定大小的信号（比如说 50 KB）。我们需要最大峰值出现的时间。

提前感谢您的任何建议！ ![实时信号](../Images/1b05b3f81914aa69e22c6df7902ce4f9.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T19:39:43.283

这听起来像是比较器业务：
您只需将信号的每个点（由二进制数表示）交给比较器即可。比较器将信号的值与保存迄今为止发现的最大值的寄存器进行比较（在 t=0 时最初为 0）。如果信号值大于寄存器中的值，则将当前输入存储在寄存器中（可选地与时间索引一起）并丢弃旧值。如果输入值小于寄存器值，则继续下一个信号点。

# xquery - 加载到marklogic服务器时将xml十六进制实体更改为字符串

> ID：13624588
> 
> 赞同：0
> 
> 时间：2012-11-29T11:18:30.983
> 
> 标签：xquery

在将 XML 数据加载到 marklogic 服务器时，十六进制实体被转换为字符串，请为此提出正确的解决方案。不使用 XLST 魅力图

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-20T19:59:44.400

现在有办法自动做到这一点。

在 xquery 中，为了显示十六进制，您需要使用 然后 x 像这样

```
"&#xA9;" 
```

您可以编写一个函数来查看您加载的内容并找到其中已经存在的所有十六进制并将它们转换为这种格式。

# mysql - 坏chown后如何恢复mysql权限

> ID：13624589
> 
> 赞同：5
> 
> 时间：2012-11-29T11:18:31.067
> 
> 标签：mysql, permissions, centos, root

我错误地将服务器中所有文件的所有者设置为 root ：

```
chown -R root / 
```

现在由于许可，我对mysql服务器有一些问题。

如何将 mysql 所有者设置为正确的文件？

（我无法重新安装 mysql 服务器，因为我的数据库中有重要的表）

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-29T11:22:51.470

在我的 CentOS 机器上，自己和组是`mysql`，安装在这里。这将修复您的 mysql 权限。

`chown -R mysql:mysql /var/lib/mysql`

但是，`chown -R root /`毫无疑问，它会给您带来比简单的 MySQL 更多的问题。

# c++ - VC++ dll 代码区域未更新：VS2010

> ID：13624595
> 
> 赞同：0
> 
> 时间：2012-11-29T11:18:54.643
> 
> 标签：c++, visual-studio-2010

我已经复制了一个 dll 项目并开始在 Visual Studio 2010 中使用它。我遇到了一个奇怪的问题。我在任何函数中添加的任何附加代码都不会被执行。该项目建设良好。没有错误。但是当我将 dll 与应用程序一起使用时，我添加的任何代码都不会被执行。例如

```
int f1()
{
    printf("a");
} 
```

是旧代码。

新代码

```
int f1()
{
    printf("a");
    printf("b");
} 
```

当我从引用 dll 的应用程序调用 f1() 时，我仍然得到打印。b 永远不会打印在屏幕上。我禁用了优化选项。必须在 vs2010 项目中缺少设置。任何指针？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T11:20:41.787

Are you sure you're loading the updated library? This sounds a lot like you've got an older copy of your library somewhere and that's the one loaded all the time. This can get a bit tricky in multi-project solutions building dynamic libraries.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T13:51:53.747

可能加载了较旧的dll。检查动态链接库搜索顺序 [http://msdn.microsoft.com/en-us/library/ms682586%28VS.85%29.aspx](http://msdn.microsoft.com/en-us/library/ms682586%28VS.85%29.aspx)

# android - 在 Android 应用程序中调用显示添加联系人对话框

> ID：13624599
> 
> 赞同：0
> 
> 时间：2012-11-29T11:18:59.920
> 
> 标签：android, android-intent, call, android-contacts

我在 Android 应用程序中使用此代码进行调用：

```
Intent callIntent = new Intent(Intent.ACTION_CALL);    
callIntent.setData(Uri.parse("tel:" + call.Number));   
startActivity(callIntent); 
```

但我得到一个这样的对话框：

![在此处输入图像描述](../Images/3ec470e882340693c48744c1f880b526.png)

为什么不打电话？

Ps：我用的是平板电脑（Acer Iconia A501），不是智能手机。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T11:47:11.493

尝试这个

确保 ：

**拨电至 ：**

```
 startActivity(new Intent(Intent.ACTION_DIAL, Uri.parse("tel:" +mEditText_number.getText()))); 
```

**添加权限：**

```
<uses-permission android:name="android.permission.CALL_PHONE" /> 
```

# vbscript - 如何在 hta 中使用换行符包含文件进行格式化

> ID：13624600
> 
> 赞同：1
> 
> 时间：2012-11-29T11:19:00.390
> 
> 标签：vbscript, hta

当我使用当前脚本加载一些 csv 文件时。Textarea 没有像 csv 格式那样呈现正确的格式：

1.csv：

```
text1
text2 
```

现在 1.csv 输出：

```
text1 text2 
```

预期的 1.csv 输出：

```
text1
text2 
```

实际上 textarea 无法为我创建一些未知的换行符。

剧本：

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
 <hta:application
     applicationname="MyHTA"    
     border="thick"
     borderstyle="normal"
     caption="My HTML Application"
     contextmenu="no"
     icon="myicon.ico"
     maximizebutton="no"
     minimizebutton="yes"
     navigable="no"
     scroll="yes"
     selection="no"
     showintaskbar="yes"
     singleinstance="yes"
     sysmenu="yes"
     version="1.0"
     windowstate="normal"
 >
 <script language="vbscript">  

Sub RunCommonDialog  
  Set objDialog = CreateObject("UserAccounts.CommonDialog")  
  objDialog.Filter = "CSV Files (*.csv)|*.csv|All Files|*.*" 
  objDialog.InitialDir = "C:\Documents and Settings\All Users\Desktop" 
  intResult = objDialog.ShowOpen  
  If intResult = 0 Then  
    Exit Sub  
  Else  
    CommonDialog.value = objDialog.FileName  
    CommonDialog_Span.innerHTML = objDialog.FileName  
    Const ForReading = 1
    Set objFSO = CreateObject("Scripting.FileSystemObject")
    Set objTextFile = objFSO.OpenTextFile(objDialog.FileName, ForReading)
    contents = objTextFile.ReadAll
    objTextFile.Close
    Set objFSO = Nothing
    Set objReadFile = Nothing
    PRE.innerHTML = contents
  End If  
End Sub  
 Sub reloadHTA()
 location.reload True
End Sub

</script>
<body> 
<input type="hidden" id="CommonDialog"><input type="button" onclick="RunCommonDialog" value="Browse..."><input class = "StdBtt Meta" type = "BUTTON" value = "Reset" onclick = "reloadHTA"><br>
<p>File: <span id="CommonDialog_Span"></span></p>
<textarea rows="4" cols="88" name="PRE" readonly="readonly">
</textarea> 
</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T12:13:53.470

如果您使用**专注**于您的问题的 .hta - 例如

```
<html>
 <head>
  <hta:application id="t"></hta>
  <title>t</title>
  <script language="vbscript">
   Sub ol()
     MsgBox "ol"
     a = Array("line1", "line2")
     document.all.ta1.value = Join(a, vbCrLf)
     document.all.ta2.innerHTML = Join(a, vbCrLf)
   End Sub
  </script>
 </head>
 <body onload="ol">
  <textarea id="ta1" rows="4" cols="88"></textarea>
  <textarea id="ta2" rows="4" cols="88"></textarea>
 </body>
</html> 
```

您会一眼看出您的问题是由使用`.innerHTML`而不是`.value`.

（顺便说一句：您应该在 .html 上使用验证器（整洁，...））

**更新：**

证据：

![证据](../Images/aa7044b24f8692e7208a6fa3897cf8f0.png)

# python - python如何在模块中注册动态类

> ID：13624603
> 
> 赞同：17
> 
> 时间：2012-11-29T11:19:09.587
> 
> 标签：python, class, module, metaprogramming

我有模块 foo，在这个模块中我动态创建了类：

```
def superClassCreator():
    return type("Bar", (object,), {}) 
```

现在，我想要实现的是让这个新的动态类作为这个模块的一个类可见：

```
import foo
dir(foo)
>>> [... 'Bar' ...] 
```

你知道怎么做吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-29T11:21:29.437

您可以使用`Bar = superClassCreator()`in `foo`（在模块级别）。

或者，从另一个模块，您可以添加`Bar`作为属性`foo`：

```
import foo

foo.Bar = superClassCreator() 
```

或者，如果必须从生成的类中获取名称：

```
import foo

generatedClass = superClassCreator()
setattr(foo, generatedClass.__name__, generatedClass) 
```

在`foo`模块中，您可以直接在以下位置进行设置`globals()`：

```
generatedClass = superClassCreator()
globals()[generatedClass.__name__] = generatedClass
del generatedClass 
```

使用可选`del`语句`generatedClass`再次从命名空间中删除名称。

# blackberry - LocationUpdate method getting called too frequently on Blackberry

> ID：13624604
> 
> 赞同：2
> 
> 时间：2012-11-29T11:19:16.397
> 
> 标签：blackberry, java-me, gps, jsr179

I have a 3 GSM phones and a 3 verizon (CDMA) phones. I have a BB application in which the location listener is set to a 5 minute interval.

For 2 of the verizon phones the application's location update method gets called frequently. For the rest, the location listener gets called at a regular 5 minute interval.

What could be causing this difference in behavior?

```
public synchronized void locationUpdated(LocationProvider locationProvider, Location location) {
        if (enabled) {

            if (blackberryProvider != null) {
                try {                       
                    constructCriteria(GPSInfo.GPS_MODE_CELLSITE);
                    gpsUpdate();
                } catch (LocationException e) {
                   log stuff//  
                }
            }
        }
    }

    private void gpsUpdate() throws LocationException, InterruptedException {
        try {
            String gpsMode = null;
        if (bbCriteria.getMode() == GPSInfo.GPS_MODE_CELLSITE) {
                gpsMode = "cellsiteMode";
            }

            if (gpsMode == "cellsiteMode" && gpsMode.length() > 0 && bbProvider != null) {
                // variable declaration

                try {
                    bbLocation = (BlackBerryLocation) bbProvider.getLocation(10);
                } catch (LocationException e) {

                    bbLocation = null;
                }

                if (bbLocation != null) {
                    // do stuff
                    // store location in the database   

                        }

                    }

                }

            }
        }
    }

private void constructCriteria(final int mode) {
    blackberryCriteria = null;
    blackberryProvider = null;
    blackberryCriteria = new BlackBerryCriteria();
    blackberryCriteria.setSatelliteInfoRequired(true, false);

     if (mode == GPSInfo.GPS_MODE_CELLSITE) {
        setCriteraForCellSite();
    }
    try {
        blackberryProvider = (BlackBerryLocationProvider) LocationProvider.getInstance(blackberryCriteria);

        if (iLocationListner == null) {
            iLocationListner = new ILocationListner();
            blackberryProvider.setLocationListener(iLocationListner, locationInterval == 0 ? 300 : locationInterval, -1, -1);
        } else {
            blackberryProvider.setLocationListener(iLocationListner, locationInterval == 0 ? 300 : locationInterval, -1, -1);
        }
    } catch (LocationException lex) {
        Logger.log("LocationEventSource constructor", lex);
        return;
    } 

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T18:11:12.637

您将标准设置为每 300 秒更新一次，`locationInterval == 0`否则以默认速率（每秒一次）更新。这真的是你想要的吗？locationInterval 在哪里初始化？随着程序运行，它的值如何变化？

# c# - 如何在 wpf 中实现带有清除按钮的文本框？

> ID：13624606
> 
> 赞同：12
> 
> 时间：2012-11-29T11:19:26.967
> 
> 标签：c#, wpf, user-controls, textbox

我有以下`UserControl`。它是`TextBox`一个`Button`：

```
<Grid>
    <TextBox
        Grid.Column="0"
        Text="{Binding Text, 
               RelativeSource={RelativeSource AncestorType=UserControl}, 
               UpdateSourceTrigger=PropertyChanged}"
         x:Name="TextBox" />

     <Button
         Background="{Binding Background, ElementName=TextBox}"
         Grid.Column="1"
         Style="{StaticResource {x:Static ToolBar.ButtonStyleKey}}"
         HorizontalAlignment="Right"
         Visibility="{Binding IsClearButtonVisible,
                      RelativeSource={RelativeSource AncestorType=UserControl},
                      Converter={StaticResource BooleanToVisibilityConverter}}"
         Command="{Binding ClearTextCommand,
                   RelativeSource={RelativeSource AncestorType=UserControl}}"    
         HorizontalContentAlignment="Center"
         VerticalContentAlignment="Center" >

         <Button.Content>
             <Image
                 Source="{StaticResource Delete2}"
                 Stretch="None"
                 RenderOptions.BitmapScalingMode="NearestNeighbor"
                 VerticalAlignment="Center"
                 HorizontalAlignment="Center" />
        </Button.Content>
    </Button>
</Grid> 
```

在 Windows 7 中它看起来很棒，但在 Windows XP 中我有以下问题：

![在此处输入图像描述](../Images/8ca0ddeacffc8a2631ae38be89e58c80.png)

关于如何解决这个问题的任何想法？如果我使背景透明，则按钮没有问题，但文本位于按钮下方并且看起来很奇怪。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T11:24:28.330

缩小`Button`和/或添加小边距以“缩小”可见背景。

编辑：虽然环顾四周（想知道这还没有被添加为一些新功能），我发现[这篇文章有分步说明，你可以试一试](http://davidowens.wordpress.com/2009/02/18/wpf-search-text-box/)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-11-06T10:38:25.873

试试这个。

```
<TextBox x:Name="SearchFilter" VerticalAlignment="Center" Width="200"  
                                 Text="{Binding SearchItemString}" />
<Button Margin="-20,10,5,0" Width="25" Height="25" Content="X" 
                        Style="{StaticResource TransparentStyle}" /> 
```

这里是风格。

```
<Style x:Key="TransparentStyle" TargetType="{x:Type Button}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="Button">
                <Border Background="Transparent">
                    <ContentPresenter/>
                </Border>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

结果： [![](../Images/a56590b2958c3f647954bc947216a173.png)](https://i.stack.imgur.com/rUhMN.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-29T12:53:10.220

我认为你应该`ControlTemplate`在这里使用 s，例如你可以看到[搜索文本框控件](http://www.codeproject.com/Articles/101975/Building-a-Search-Text-Box-Control-with-WPF) ，[在这里](http://msdn.microsoft.com/en-us/library/ms752068%28v=vs.85%29.aspx)你可以找到文本框模板

# mysql - 在一张表中定义多个多对多关系

> ID：13624610
> 
> 赞同：4
> 
> 时间：2012-11-29T11:19:36.143
> 
> 标签：mysql, database, database-design

我需要在我的数据库中创建多个多对多关系。

有一个“主”表，我们称之为“项目”。

然后有 3 个包含“选项”的表。

假设我们有：类别、地区和用户。这些保存的唯一信息是项目的名称和 ID。

可以将多个类别、区域和用户分配给多个项目。

所以我有两个选择来创建这种关系：

1）为每个“选项”表创建一个关系表。每个表将包含两列：“project_id”和 category_id、region_id 或 user_id。使用这种方法，我将有 3 个关系表，每个表只处理一对表之间的关系。例如：

```
****************************
* project_id * category_id *
****************************
* 1          * 3           *
*------------*-------------*
* 3          * 4           *
*------------*-------------* 
```

2) 创建一个包含 4 列 project_id、category_id、region_id 和 user_id 的关系表。每行在任何时候都只会使用 2 个字段。project_id，然后是相关项目的字段 id。

```
**************************************************
* project_id * category_id * user_id * region_id *
**************************************************
* 1          * 3           *         *           *
*------------*-------------*---------*-----------*
* 3          * 4           *         *           *
*------------*-------------*---------*-----------*
* 3          *             * 2       *           *
*------------*-------------*---------*-----------*
* 4          *             *         * 3         *
*------------*-------------*---------*-----------* 
```

我对第二个选项很感兴趣，因为它会阻止我需要创建额外的关系表。我应该考虑任何陷阱或其他问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T11:23:39.023

> 我应该考虑任何陷阱或其他问题吗？

您的要求之一是“每行在任何时候都只能使用 2 个字段。” 在 MySQL 中，没有简单的方法来强制执行此约束，因此您可能会遇到数据不一致。

如果使用多表设计，可以使用非NULL字段和外键约束来保证一致性。

# html - 谷歌字体在 c9.io IDE 中不起作用

> ID：13624618
> 
> 赞同：0
> 
> 时间：2012-11-29T11:20:00.203
> 
> 标签：html, google-font-api

我在标签之间添加了字体：

```
<link href='Felipa-Regular.ttf' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Felipa' rel='stylesheet' type='text/css'> 
```

在所有托管此工作正常但在 c9.io IDE 中不起作用，也许有人知道这个问题的任何解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T11:58:54.023

删除第一个`link`元素。它试图将字体文件称为 CSS 文件，但这是行不通的。

第二个`link`元素是正确的，但它只使 Felipa 字体可用。它不会使任何元素实际使用它。您需要添加类似的代码

```
<style>
* { font-family: Felipa; }
</style> 
```

如果您仍然对某些托管服务有问题（这似乎是“c9.io IDE”所指的内容），请查阅服务提供商提供的说明。

# html - Wordpress hover css menu meaning?

> ID：13624621
> 
> 赞同：0
> 
> 时间：2012-11-29T11:20:11.420
> 
> 标签：html, wordpress, css

I am just newbie to the wordpress. I was going through wordpress custom theme designing. In css when I was changing the menu css I came through this css for hover style. `#access li:hover > a,#access a:focus{ }` Here can someone tell me what is the meaning of this `#access li:hover > a,#access a:focus`.How it controls the attributes for hover?. I am just newbie so before down voting my question any help and suggestions will be more helpful for me.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T11:24:53.253

`#access li:hover>a, #access a:focus`是将规则应用于两组元素的选择器：

1.  `a`被悬停的元素的直接子元素 ( `>`)并且是具有属性的元素的后代`li``id``access`
2.  `a`具有焦点的元素（即，用键盘选择标签，用鼠标单击）并且是具有`id`属性的元素的后代`access`

# java - Antlr 处理异常

> ID：13624624
> 
> 赞同：8
> 
> 时间：2012-11-29T11:20:21.687
> 
> 标签：java, error-handling, antlr

我使用 AST 树使用 Antlr 3 开发了一个复杂的语法。ANTLR 生成 Lexer 和 Parser。问题是，当用户输入无效的语法时，例如，语法需要';'。用户没有输入这个，然后在我的 Eclipse IDE 中我得到以下异常：

```
 line 1:24 mismatched input '<EOF>' expecting ';' 
```

这个异常怎么处理，因为我试图捕捉这个异常，但是这个异常没有被捕捉到。这是一个例外吗？我似乎不明白为什么没有捕捉到这个异常。我试图找出答案，但是 Antlr 网站似乎已经关闭了一段时间。

我查看了以下内容：[使用“$”进行 ANTLR 异常处理，Java](https://stackoverflow.com/questions/7705845/antlr-exception-handling-with-java)并遵循该示例，但是当 Lexer 通过添加 RuntimeException() 生成代码时，我得到了无法访问的代码。

我不知道该怎么办。

当我尝试从解析器获取语法错误的数量时，它显示为 0。

编辑：

我通过查看找到了一个可行的解决方案：[ANTLR not throwing errors on invalid input](https://stackoverflow.com/questions/8658753/antlr-not-throwing-errors-on-invalid-input)

但是，当我尝试取回异常消息时，它为空。我是否正确设置了所有内容？请参阅示例语法：

```
grammar i;

options {
output=AST;
}

@header {
package com.data;
}

@rulecatch {
    catch(RecognitionException e) {
        throw e;
   }
}

// by having these below it makes no difference
/**@parser::members {
    @Override
    public void reportError(RecognitionException e) {
        throw new RuntimeException("Exception : " + " " + e.getMessage());
    }
}

@lexer::members {
    @Override
    public void reportError(RecognitionException e) {
       throw new RuntimeException("Exception : " + " " + e.getMessage());
    }
}*/ 
```

编辑：

请看看我到目前为止有什么：

```
grammar i;

options {
output=AST;
}

@header {
package com.data;
}

@rulecatch {
    // ANTLR does not generate its normal rule try/catch
    catch(RecognitionException e) {
        throw e;
    }
}

@parser::members {
    @Override
    public void displayRecognitionError(String[] tokenNames, RecognitionException e) {
        String hdr = getErrorHeader(e);
        String msg = getErrorMessage(e, tokenNames);
        throw new RuntimeException(hdr + ":" + msg);
    }
}

@lexer::members {
    @Override
    public void displayRecognitionError(String[] tokenNames, RecognitionException e) {
        String hdr = getErrorHeader(e);
        String msg = getErrorMessage(e, tokenNames);
        throw new RuntimeException(hdr + ":" + msg);
    }
}

operatorLogic   : 'AND' | 'OR';
value       : STRING;
query       : (select)*;
select      : 'SELECT'^ functions 'FROM table' filters?';';
operator    : '=' | '!=' | '<' | '>' | '<=' | '>=';
filters : 'WHERE'^ conditions;
members : STRING operator value;
conditions  : (members (operatorLogic members)*);
functions   : '*';
STRING  : ('a'..'z'|'A'..'Z')+;
WS      : (' '|'\t'|'\f'|'\n'|'\r')+ {skip();}; // handle white space between keywords

public class Processor {

public Processor() {

}

/**
 * This method builds the MQL Parser.
 * @param args the args.
 * @return the built IParser.
 */
private IParser buildMQLParser(String query) {
    CharStream cs = new ANTLRStringStream(query);
    // the input needs to be lexed
    ILexer lexer = new ILexer(cs);
          CommonTokenStream tokens = new CommonTokenStream();
    IParser parser = new IParser(tokens);
    tokens.setTokenSource(lexer);
    // use the ASTTreeAdaptor so that the grammar is aware to build tree in AST format
    parser.setTreeAdaptor((TreeAdaptor) new ASTTreeAdaptor().getASTTreeAdaptor());
return parser;
}

/**
 * This method parses the MQL query.
 * @param query the query.
 */
public void parseMQL(String query) {
    IParser parser = buildMQLParser(query);
    CommonTree commonTree = null;
    try {
                     commonTree = (CommonTree) parser.query().getTree();
                    }
    catch(Exception e) {
        System.out.println("Exception :" + " " + e.getMessage());
    }
}
}

public class ASTTreeAdaptor {

public ASTTreeAdaptor() {

}

/**
 * This method is used to create a TreeAdaptor.
 * @return a treeAdaptor.
 */
public Object getASTTreeAdaptor() {
    TreeAdaptor treeAdaptor = new CommonTreeAdaptor() {
        public Object create(Token payload) {
        return new CommonTree(payload);
        }
    };
    return treeAdaptor; 
}
} 
```

所以当我输入以下内容时：SELECT * FROM table

没有 ';' 我得到一个 MismatchedTokenException：

```
catch(Exception e) {
     System.out.println("Exception : " + " " e);
} 
```

当我尝试：

```
e.getMessage(); 
```

它返回空值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T17:11:55.007

尝试覆盖`displayRecognitionError`：

```
@parser::members { 
   ...

    @Override    
    public void displayRecognitionError(String[] tokenNames, RecognitionException e) {
        String hdr = getErrorHeader(e);
        String msg = getErrorMessage(e, tokenNames);
        throw new RuntimeException(hdr + ":" + msg);
    }
    ...
}
//same code in @lexer::members 
```

如果你想跟踪错误而不是中止，你可以创建一个处理程序接口来跟踪它们：

```
@parser::members { 
   ...
    private YourErrorTrackerInterface errorTracker;

    //getter/setter for errorTracker here        

    @Override    
    public void displayRecognitionError(String[] tokenNames, RecognitionException e) {
        String hdr = getErrorHeader(e);
        String msg = getErrorMessage(e, tokenNames);
        if (errorTracker != null){
          errorTracker.addError(e, tokenNames, hdr, msg);
        }
    }
    ...
}
//same code in @lexer::members 
```

然后错误跟踪器可以决定是抛出异常还是继续。

* * *

上面的代码允许您跟踪“可恢复”错误，即 ANTLR 可以跳过的错误。仍然有一些场景会产生不可恢复的错误，例如 `SELECT * FROM table`（没有结尾`;`）。在这种情况下，您必须在其中`parseMQL`或附近的某个地方捕获异常。（您可以尝试编写自己的恢复代码，但我不建议您这样做。）

这是一个修改`parseMQL`，显示了两种不同类型的解析错误。请注意，我删除了对的调用，`getMessage`因为并非所有异常都来自`RecognitionException`填充它。

```
public void parseMQL(String query) {
    iParser parser = buildMQLParser(query);
    CommonTree commonTree = null;
    try {
        commonTree = (CommonTree) parser.query().getTree();
    } catch (MismatchedTokenException e){
        //not production-quality code, just forming a useful message
        String expected = e.expecting == -1 ? "<EOF>" : iParser.tokenNames[e.expecting];
        String found = e.getUnexpectedType() == -1 ? "<EOF>" : iParser.tokenNames[e.getUnexpectedType()];

        System.out.println("Fatal mismatched token exception: expected " + expected + " but was " + found);   

    } catch (RecognitionException e) {
        System.out.println("Fatal recognition exception " + e.getClass().getName()
                + " : " + e);

    } catch (Exception e) {
        System.out.println("Other exception : " + e.getMessage());
    }
} 
```

输入`SELECT * FROM table`产生消息“致命的不匹配令牌异常：预期';' 但是是<EOF>”。这个异常是由 ANTLR 直接产生的。

输入`SELECT FROM table;`产生消息“其他异常：第 1:7 行：'FROM table' 处缺少 '*'”。这个异常是由上面的代码产生的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T12:29:57.353

如果我理解正确，您想处理您的语言语法错误。这就是我在项目中进行此设置的方式。

```
/**
 * Adapter need for ANTL to recognize our custom nodes
 * 
 * @author Greg
 */
public class PhantomTreeAdaptor extends CommonTreeAdaptor{

    @Override
    public Object create(Token payload){
        return new ASTNode(payload);
    }

    @Override
    public Object dupNode(Object old){
        return (old == null) ? null : ((ASTNode) old).dupNode();
    }

    @Override
    public Object errorNode(TokenStream input, Token start, Token stop, RecognitionException e){
        return new ASTErrorNode(input, start, stop, e);
    }
} 
```

这是错误节点

```
/**
 * This is our custom Error node used by the adapter.
 * 
 * @author Greg
 */
public class ASTErrorNode extends ASTNode {

    org.antlr.runtime.tree.CommonErrorNode delegate;

    public ASTErrorNode(TokenStream input, Token start, Token stop, RecognitionException e) {

        delegate = new CommonErrorNode(input, start, stop, e);

    }

    public boolean isNil() {
        return delegate.isNil();
    }

    public int getType() {
        return delegate.getType();
    }

    public String getText() {
        return delegate.getText();
    }

    public String toString() {

        return delegate.toString();
    }

} 
```

这就是如何将这一切粘合在一起的。

```
 final PhantomSQLLexer lex = new PhantomSQLLexer(input);

        final CommonTokenStream tokens = new CommonTokenStream(lex);
        final PhantomSQLParser g = new PhantomSQLParser(tokens);
        g.setTreeAdaptor(new PhantomTreeAdaptor());
        final start_rule_return r = g.start_rule();
        if (g.getNumberOfSyntaxErrors() == 0) {
            if (LOGGER.isDebugEnabled()) {
                LOGGER.debug("tree=" + ((Tree) r.tree).toStringTree());
                LOGGER.debug("-------------------------------------------");
            }
            final ASTNode root = r.tree;
            exec(root);            
        }
        else {
            LOGGER.debug("Error parsing input");
        } 
```

我们简单地创建了我们的词法分析器和解析器，然后我们使用自定义树适配器（PhantomTreeAdaptor）设置我们的解析器。从那里我们可以检查我们的自定义代码中是否有错误。

# javascript - 用某些特征替换 HTML 中的字符串

> ID：13624625
> 
> 赞同：0
> 
> 时间：2012-11-29T11:20:23.790
> 
> 标签：javascript, jquery, replace

我需要替换以另一个 url`img`开头的标签的每个实例。`http://player.vimeo.com`

例如，您可能会在页面的代码中找到它：

```
<img src="http://player.vimeo.com/video/4887233"> 
```

我正在尝试制作一个 jQuery 脚本，该脚本将找到`img`以 src 开头的每个 src`http://player.vimeo.com`并将其替换为`src`另一个字符串（对于每个 vimeo 链接，它将是相同的字符串，本质上是一个变量）。

如何找到 vimeo 链接并确保无论长度如何都替换整个链接（某些链接会比其他链接长，但总是以相同的字符串开头）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T11:24:30.940

选择所有[以 selector 开头](http://api.jquery.com/attribute-starts-with-selector/)`img`的属性：

```
$("img[src^='http://player.vimeo.com]'").each(function(){
    this.src = this.src.replace("player.vimeo.com", "new.url.com");
}); 
```

以上将替换`player.vimeo.com`为`src`with `new.url.com`。如果您需要`src`完全设置另一个，只需执行`this.src = 'new url';`.

值得注意的是，当您想要更改诸如 的原生属性时`src`，`each`与 相比会表现得更好，正如在这个[jsPerf](http://jsperf.com/attr-vs-each)`attr`中可以看到的那样。

查看[jsFiddle 上](http://jsfiddle.net/7524T/3/)的演示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T11:24:50.923

[http://api.jquery.com/attribute-starts-with-selector/](http://api.jquery.com/attribute-starts-with-selector/)

```
$("img[src^=\"http://player.vimeo.com\"]").attr("src", "new_string") 
```

或者

```
$("img[src^=\"http://player.vimeo.com\"]").attr("src", function(i, val) {return val.replace("http://player.vimeo.com", "new url")}) 
```

[从一个问题来看，它是否应该用另一个字符串替换整个链接或只是“ http://player](http://player) ...”还不够清楚，所以对这两种情况都进行了编码。

根据[Markus Ekwall](https://stackoverflow.com/questions/13624625/replace-string-in-html-with-certain-characteristics/13624713#comment-18685344)的评论， attr 比每个都慢，因此最好将上面的代码替换为：

```
$("img[src^=\"http://player.vimeo.com\"]").each(function() {this.src = "new_string";}); 
```

或者

```
$("img[src^=\"http://player.vimeo.com\"]").each(function() { this.src = this.src.replace("http://player.vimeo.com", "new url"); }) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T11:23:38.577

您可以`filter()`对每个元素执行 a 并匹配`src`属性，然后替换它：

```
$('img').filter(function() {
    return /^http:\/\/player\.vimeo\.com/.test(this.src);
}).attr('src', 'somethingelse'); 
```

如果您想进行个别替换，您也可以使用函数而不是“其他东西”，f.ex：

```
.attr('src', function(i, src) {
    return src.replace(/vimeo/,'youtube');
}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T11:41:44.140

使用 id 访问元素的 href 属性，并将更新后的 href 字符串 url 传递给 attr 方法：

```
 <script>
    $(document).ready(function(){
    $("button").click(function(){
    $("#link").attr("href","http://www.example.com/login.html"); //pass ur new url here
  });
});
 </script> 
```

在 html 正文中：

```
<p><a href="http://www.example.com" id="link">Link name</a></p> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-29T11:27:52.427

如果您只想替换搜索 URL，请使用此选项。

```
$(function(){
    $('img').each(function(index,elem) {
        var newValue = "http://youtube.com";

        var $this = $(this);
        var strSrc = $this.attr('src');
        var regTest = /http:\/\/player\.vimeo\.com/;

        if(regTest.test(strSrc)) {
            $this.attr('src', strSrc.replace(regTest, newValue) );
        }
    });
}); 
```

# google-chrome - callto handler from chrome extension popup window

> ID：13624627
> 
> 赞同：2
> 
> 时间：2012-11-29T11:20:25.723
> 
> 标签：google-chrome, google-chrome-extension, handler

I am trying to develop a chrome extension that when you click in the icon a popup window appears just below the icon (just the easiest thing to do). The popup contains some text and a phone number. I want this phone number to be clickable and that when you click on it a Skype call is triggered.

In a normal html page you would do this with something like:

```
< a href="callto:number" >Call us at number!< /a > 
```

but when I put this code in the popup.html page and load the extension this is not working.

I have opened the popup.html page in a browser tab and the link works but it doesn't from the extension's popup. I have tested other handlers like `mailto` and it works, but `callto` doesn't.

I have also tried:

```
< a href="skype:number?call">Call us!< /a > 
```

and it does not work neither.

Does anybody know why and how should I solve this issue?

thank you very much in advance

These are the files I have created:

manifest.json:

```
{
  "name": "My First Extension",
  "version": "1.0",
  "manifest_version": 2,
  "description": "The first extension that I made.",
  "browser_action": {
    "default_icon": "icon.png",
    "default_popup": "popup.html"
  }
} 
```

And the popup.html:

```
< html >
  < head >
    < title >Getting Started Extension's Popup< /title >
    < style >
      body {
        min-width:357px;
        overflow-x:hidden;
      }

      img {
        margin:5px;
        border:2px solid black;
        vertical-align:middle;
        width:75px;
        height:75px;
      }
    < /style>

  < body>
    < a href="callto:echo123">Call us free!< /a >
    < a href="skype:echo123?call">Call us free 2!< /a >
    < a href="mailto:mymail@gmail.com" target="_newtab">email us!< /a >
    < a href="http://www.elpais.es" target="_newtab"> el pais< /a >
  < /body >
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T14:33:43.787

`< a href="callto:echo123">Call us free!< /a >`或者`< a href="skype:echo123?call">Call us free 2!< /a >`正在调用 chrome 扩展中不允许的本地程序；

![在此处输入图像描述](../Images/119235514592cd31a70c5407daa2b781.png)

如果要调用本地程序，则必须使用[NPAPI Plug-in](https://developer.chrome.com/extensions/npapi.html)。

# sql - How do I remove repeated column values from Table

> ID：13624636
> 
> 赞同：0
> 
> 时间：2012-11-29T11:20:57.817
> 
> 标签：sql, sql-server, sql-server-2005

select * from TableName

FROM THIS:

```
ID     Col1    Col2    Col3   Col4    Col5
1       aa      21      ss     m        p
2       aa      21      tt     f        u
3       bb      21      ss     f        d
4       bb      22      ss     m        d 
```

TO THIS

```
ID     Col1    Col2    Col3   Col4    Col5
1       aa      21      ss     m        p
2                       tt     f        u
3       bb              ss              d
4               22             m 
```

i want this Output is it possible ?

don't want repeat duplicate value if it next to the same

Thanks for your time.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T12:03:50.753

请检查查询，这是您需要的吗？：

```
update a set 
    a.Col1=(case when cnt1=1 then a.Col1 else null end),
    a.Col2=(case when cnt2=1 then a.Col2 else null end),
    a.Col3=(case when cnt3=1 then a.Col3 else null end)
from TableName a
join
(
    select *, 
        row_number() over (Partition By Col1 order by ID) cnt1,
        row_number() over (Partition By Col2 order by ID) cnt2,
        row_number() over (Partition By Col3 order by ID) cnt3
    From TableName
) x on a.ID=x.ID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T12:05:03.190

您可以选择要临时表的所有内容，清除重复值并从更新的临时表中返回结果集。

查询可能如下所示：

```
select 1 as id, 'aa' as col1, '21' as col2,'ss' as col3,'m' as col4,'p' as col5 into #tmp union
select 2, 'aa','21','tt','f','u' union
select 3, 'bb','21','ss','f','d' union
select 4, 'bb','22','ss','m','d' 

update t set
    col1 = case when tp.col1 = t.col1 then '' else t.col1 end,
    col2 = case when tp.col2 = t.col2 then '' else t.col2 end,
    col3 = case when tp.col3 = t.col3 then '' else t.col3 end,
    col4 = case when tp.col4 = t.col4 then '' else t.col4 end,
    col5 = case when tp.col5 = t.col5 then '' else t.col5 end
from #tmp t
left join (
    select t1.id, max(t2.id) as pid
    from #tmp t1
    join #tmp t2 on t1.id > t2.id
    group by t1.id
) p on t.id = p.id
left join #tmp tp on p.pid = tp.id 
```

结果：

```
/*------------------------
select top 100 * from  #tmp
------------------------*/
id   col1    col2    col3    col4    col5
1    aa      21      ss      m       p
2                    tt      f       u
3    bb              ss              d
4            22              m 
```

[SQL小提琴](http://sqlfiddle.com/#!3/d4991/1)

# plone - Overriding CalendarDateConverter in z3c.form

> ID：13624637
> 
> 赞同：2
> 
> 时间：2012-11-29T11:21:02.423
> 
> 标签：plone, z3c.form

z3c.form registers a converter like this:

```
<adapter
  factory=".converter.DatetimeDataConverter"
  /> 
```

Is it possible to override this converter in Plone using overrides.zcml? What kind of input one needs to give for overrides.zcml to override it? Should one copy interface matching definitons from .py code:

```
class DatetimeDataConverter(CalendarDataConverter):
    """A special data converter for datetimes."""
    zope.component.adapts(
        zope.schema.interfaces.IDatetime, interfaces.IWidget) 
```

Any other non-monkey-patching means to override z3c.converters?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T14:50:00.663

我只需为更具体的接口注册新转换器：

```
 <adapter
     factory=".myconverter.MyDatetimeDataConverter"
     for="zope.schema.interfaces.IDatetime
          z3c.form.interfaces.ITextWidget"
     /> 
```

我用作`ITextWidget`示例，将其注册为您希望使用自定义转换器的小部件。

覆盖替换具有相同注册的适配器。就像`<adapter />`在常规 ZCML 文件中注册一样，如果需要，它将采用它（多）适配的接口和它从工厂对象提供的接口，所以如果您`.adapts()`在自己的转换器上使用，那么您可以无需在`<adapter />`注册中重复该信息。

# php - use php variable in name of mysql create table

> ID：13624638
> 
> 赞同：2
> 
> 时间：2012-11-29T11:21:09.550
> 
> 标签：php, mysql, sql

Hey guys i want to use an php variable as a part of a name of a mysql table which i create with a query. I used two types of quotes like a example i saw on the internet. It should create an individual table name. `$cn` is not an array it is an single value. I have php error reporting enabled and it doesn't show any errors. Here is what i tried:

```
$sql2 = "CREATE TABLE lm_Warenkorb_`".$cn."`
     (
     Index TEXT,
     )"; 
```

Why isn't this working? Is this possible or not? Hope it is clear what i want to do.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T11:22:38.500

```
$sql2 = "CREATE TABLE `lm_Warenkorb_".$cn."`
     (
     Index TEXT,
     )"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T11:22:37.453

我认为您需要**将整个表名包含在反引号中**...

```
$sql2 = "CREATE TABLE `lm_Warenkorb_{$cn}`
     (
     Index TEXT,
     )"; 
```

您也可以使用大括号将变量插入用双引号封装的字符串中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-29T11:23:08.427

您的代码将生成字符串：

```
CREATE TABLE lm_Warenkorb_`some_string`(Index TEXT,) 
```

我认为它必须是2个变种：

```
CREATE TABLE `lm_Warenkorb_`.`some_string`(Index TEXT,) 
```

或者

```
CREATE TABLE `lm_Warenkorb_some_string`(Index TEXT,) 
```

# php - PHP接口IteratorAggregate vs Iterator？

> ID：13624639
> 
> 赞同：23
> 
> 时间：2012-11-29T11:21:19.793
> 
> 标签：php, arrays, iterator, traversal

这`IteratorAggregate`是一个*创建外部 Iterator 的接口*：

```
class myData implements IteratorAggregate
{
    public $property1 = "Public property one";
    public $property2 = "Public property two";
    public $property3 = "Public property three";

    public function __construct()
    {
        $this->property4 = "last property";
    }

    public function getIterator()
    {
        return new ArrayIterator($this);
    }
}

$obj = new myData; 
```

您将能够使用以下方法遍历对象`foreach`：

```
foreach($obj as $key => $value) {
    var_dump($key, $value);
    echo "\n";
} 
```

While`Iterator`是*外部迭代器或可以在内部迭代的对象的接口*：

```
class myIterator implements Iterator
{
    private $position = 0;
    private $array = array('one', 'two', 'three');

    function rewind()
    {
        $this->position = 0;
    }

    function current()
    {
        return $this->array[$this->position];
    }

    function key()
    {
        return $this->position;
    }

    function next()
    {
        ++$this->position;
    }

    function valid()
    {
        return isset($this->array[$this->position]);
    }
} 
```

同样，您可以以基本相同的方式遍历它：

```
$it = new myIterator;

foreach($it as $key => $value) {
    var_dump($key, $value);
    echo "\n";
} 
```

那么任何人都可以解释为什么我们需要两个接口以及它们之间的区别是什么？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-29T11:32:07.507

我假设`IteratorAggregate`适用于您想要节省时间`Iterator`的情况，并且适用于您需要通过对象对迭代进行精细控制的情况。例如，它允许您添加自定义异常或故障`next()`、缓存（如果您遍历通过网络获取数据的东西）、在返回值之前预处理值。`key()``prev()`

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-11-19T20:24:45.730

`IteratorAggregate`是实现迭代器的一种简单方法。缺点是您**不能**添加`next()`,`key()`等方法，因为它们不会在正常`foreach`遍历期间被调用。

如果你需要实现自定义方法，你需要实现一个`OuterIterator`or （更容易）来扩展一个`IteratorIterator`.

优点`IteratorAggregate`是速度，它比它的替代品快得多。它的问题是......尽管名称不是迭代器，而是可遍历的（同样，没有下一个，键，当前，有效，倒带方法）。

这是我在我可怜的笔记本电脑上运行的一个简单基准测试，每个 100 万次迭代`IteratorAggregate`，`IteratorIterator`并且`OuterIterator`都使用`iterator_to_array`和`foreach`: *（还要注意`echo`内部聚合的`next`方法：没有打印'x'，证明它从未被调用）*

```
$ repeat 3 php benchIterator.php
------------------------------------
Outer_ToArray: 569.61703300476 ms
Aggregate_ToArray: 552.38103866577 ms
IteratorIt_ToArray: 546.95200920105 ms
Outer_Foreach: 1679.8989772797 ms
IteratorIt_Foreach: 1019.6850299835 ms
Aggregate_Foreach: 367.35391616821 ms
------------------------------------
Outer_ToArray: 570.75309753418 ms
Aggregate_ToArray: 544.40784454346 ms
IteratorIt_ToArray: 555.06300926208 ms
Outer_Foreach: 1682.2130680084 ms
IteratorIt_Foreach: 988.21592330933 ms
Aggregate_Foreach: 356.41598701477 ms
------------------------------------
Outer_ToArray: 566.06101989746 ms
Aggregate_ToArray: 543.1981086731 ms
IteratorIt_ToArray: 546.28610610962 ms
Outer_Foreach: 1663.2289886475 ms
IteratorIt_Foreach: 995.28503417969 ms
Aggregate_Foreach: 356.16087913513 ms 
```

这是我用于基准测试的代码：

```
<?php

class Aggregate implements \IteratorAggregate
{
    protected $var;

    public function __construct($var = null)
    {
        if (is_array($var)) {
            $this->var = new ArrayIterator($var);
        }
        if ($var instanceof \Traversable) {
            $this->var = $var;
        }
    }
    public function next()
    {
        echo 'x';
    }
    public function toArray()
    {
        return iterator_to_array($this->var, true);
    }

    public function getIterator()
    {
        return $this->var;
    }

}

class Outer implements \OuterIterator
{
    protected $var;

    public function __construct($var = null)
    {
        if (is_array($var)) {
            $this->var = new ArrayIterator($var);
        }
        if ($var instanceof \Traversable) {
            $this->var = $var;
        }
    }

    public function toArray()
    {
        return iterator_to_array($this->var, true);
    }

    public function getInnerIterator()
    {
        return $this->var;
    }

    public function current()
    {
        return $this->var->current();
    }
    public function next()
    {
        $this->var->next();
    }
    public function key()
    {
        return  $this->var->key();
    }
    public function valid()
    {
        return  $this->var->valid();

    }
    public function rewind()
    {
     $this->var->rewind();

    }
}

class IteratorIt extends IteratorIterator
{
    public function __construct($var = null)
    {
        if (is_array($var)) {
            $var = new ArrayIterator($var);

        }
        parent::__construct($var);

    }

    public function toArray()
    {
        return iterator_to_array($this->getInnerIterator(), true);
    }
    public function getIterator()
    {
        return $this->getInnerIterator();
    }
}

function bench($name, $test)
{
    echo "$name: ";
    $start = microtime(true);
    $test();
    $time = microtime(true);
    $time -= $start;

    echo ($time * 1000) . ' ms' . PHP_EOL;
}

$max = 1e6;
$array = range (1, 1e6);
$testSuites = [
    'Outer_ToArray' => function () use ($max, $array) {
        $iterator = new Outer($array);
        $r = $iterator->toArray();
    },
    'Aggregate_ToArray' => function () use ($max, $array) {
        $iterator = new Aggregate($array);
        $r = $iterator->toArray();
    },
    'IteratorIt_ToArray' => function () use ($max, $array) {
        $iterator = new IteratorIt($array);
        $r = $iterator->toArray();
    },
    'Outer_Foreach' => function () use ($max, $array) {
        $iterator = new Outer($array);
        foreach ($iterator as $k => $v)
        {

        }
    },
    'IteratorIt_Foreach' => function () use ($max, $array) {
        $iterator = new IteratorIt($array);
        foreach ($iterator as $k => $v)
        {

        }
    },
    'Aggregate_Foreach' => function () use ($max, $array) {
        $iterator = new Aggregate($array);
        foreach ($iterator as $k => $v)
        {

        }
    },
];

echo '------------------------------------'.PHP_EOL;
foreach ($testSuites as $name => $test) {
    bench($name, $test);
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-11-17T09:37:15.473

**他们之间有什么区别？**

名称的差异（“聚合”）。

聚合是什么意思？

> 聚合状态通过禁止外部对象持有对其成员的引用来保证聚合内所做更改的一致性。 [（维基百科）](https://en.wikipedia.org/wiki/Aggregate)

* * *

TC代码：

```
class myData implements IteratorAggregate {//your implementation}

class myIterator implements Iterator {//your implementation} 
```

这是聚合清晰的代码：

```
$renderFunction = function($iterator) {
    foreach($iterator as $key => $value) {
        echo "$key: $value\n";
        foreach($iterator as $key => $value) {
           echo "    $key: $value\n";
        }
    }
};

$renderFunction(new myData); // Aggregate on
$renderFunction(new myIterator); // Aggregate off 
```

你对案件有什么期望？

[https://3v4l.org/JHDNQ](https://3v4l.org/JHDNQ)

```
property1: Public property one
    property1: Public property one
    property2: Public property two
    property3: Public property three
    property4: last property
property2: Public property two
    property1: Public property one
    property2: Public property two
    property3: Public property three
    property4: last property
property3: Public property three
    property1: Public property one
    property2: Public property two
    property3: Public property three
    property4: last property
property4: last property
    property1: Public property one
    property2: Public property two
    property3: Public property three
    property4: last property 
```

对比

```
0: one
    0: one
    1: two
    2: three 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-12-27T14:04:53.767

通过实现`IteratorAggregate`，我们将实现迭代器函数（`key()`, `next()`, `current()`, `valid()`, `rewind()`）的工作委托给其他类（通过仅实现`getIterator()`.

这样，它可以帮助我们在 OOP 中实现关注点分离。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-04-08T08:03:14.523

首先，这一切都取决于您要开发什么，以及其他人是否会使用您的类来开发某些东西。

简单的`Iterator`工作形式与`IteratorAggregate`单级控制循环内一样，并且大部分是可互换的。

```
foreach ($it as $key => $value) {
    // Both examples from the original question will out put the same results.
} 
```

失败的地方`Iterator`是高级逻辑，例如当有多个嵌套循环时。只有一个索引的简单迭代器最终只会循环一次，除了最深的控制循环之外，除非您在每个循环中手动重置它。

```
$i = $j = 0;
foreach ($it as $key => $value) {
    foreach ($it as $key2 => $value2) {
        // Internal index is reset and then incremented as expected.
        $j++;
    }
    // Loop ends after 1 iteration unless you reset internal position.
    # $it->mySetIteratorPosition($i);
    $i++;
}
$i === 1;
$j === count($it); 
```

迭代器没有告诉它循环何时中断的函数，因此如果有人在其中一个嵌套循环完成之前中断它，它很容易导致无限循环。

```
foreach ($it as $key => $value) {
    foreach ($it as $key2 => $value2) {
        // Internal pointer is reset back to 0
        break;
    }
    // Internal pointer is incremented from 0 to 1
}
// Unreachable statement 
```

在哪里`IteratorAggregate`起作用，它是否`Iterator`在新循环开始时创建一个新对象。这意味着嵌套循环更容易维护，并且`Iterator`当循环结束时（或不久之后）垃圾收集器会丢弃新对象。

如果您想手动控制、、或的处理`rewind`，那么您需要做的就是在 中使用自定义类，或者扩展。`current``next``key``valid``Iterator``getIterator``OuterIterator`

```
class myData implements IteratorAggregate
{
    public function getIterator()
    {
        $it = new myIterator($this);
        $it->mySetArray((array) $this);
        return $it;
    }
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-05-17T10:50:28.950

> 那么任何人都可以解释为什么我们需要两个接口以及它们之间的区别是什么？

PHP 中存在一个抽象基接口[Traversable](https://www.php.net/manual/en/class.traversable.php)。

如果一个类实现了，您可以在[foreach 循环](https://www.php.net/manual/en/control-structures.foreach.php)`Traversable`中调用它并对其进行迭代。但是，一个类不能直接实现，因为它是一个抽象基接口。`Traversable`

相反，一个类可以实现`IteratorAggregate`或`Iterator`. 所以它们都有一个共同点，如果你想让一个对象可以用 a 调用，`foreach loop`它需要实现其中一个（或它们的任何子级）。

`Iterator`如果一个人想要控制指针并给出`how`它应该迭代的精确指令，一个实现。如果一个人想要`Iterator`使用在`foreach loop`一个工具中使用的现有`IteratorAggregate`。

而且您始终可以使用[IteratorIterator](https://www.php.net/manual/de/class.iteratoriterator.php)`IteratorAggregate`将 a 转换为`Iterator`a 。[PHP文档](https://www.php.net/manual/de/class.iteratoriterator.php#117108)中也有一个很好的例子

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-05-23T14:39:27.277

对我来说，迭代器接口使代码更具可读性。如果您的业务逻辑需要更具体的方法，那么您可以实现而不是做您想做的事情。或者直接快速创建空类或实例。主要原因是干净的代码。

# c# - How can i re-set the frame-rate of avi file after its done?

> ID：13624647
> 
> 赞同：1
> 
> 时间：2012-11-29T11:21:37.197
> 
> 标签：c#, .net, avi, frame-rate

I had coded a program that records a screencast using AviFile Lib and set the framerate, but i need to adjust the framerate after the recording its done. How can i re-set the header of the avi-file changing the frame-rate of the avi file created?

Thanks in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T11:24:14.037

在 codeplex 上有一个库和示例应用程序，它可能会有所帮助： http: [//www.codeproject.com/Articles/7388/A-Simple-C-Wrapper-for-the-AviFile-Library](http://www.codeproject.com/Articles/7388/A-Simple-C-Wrapper-for-the-AviFile-Library)

# scala - Scala：继承抽象方法

> ID：13624649
> 
> 赞同：0
> 
> 时间：2012-11-29T11:21:46.617
> 
> 标签：scala, methods, abstract, inheritance

我有这样的类层次结构。

```
abstract class Element {
  var name: String
  var description: String 
}

class Group (var name : String, var description : String, var members: Set[Element] =Set()) 
extends Element{}

trait TypedElement extends Element{ 
  var types: Set[Type] 
}

trait ArchitecturalElement extends PropertyHolderElement with TypedElement

abstract class Component extends ConnectableElement with ArchitecturalElement {
  var subElements : Set[ArchitecturalElement]
 var interactionPoints : Set[InteractionPoint]
}

class SAComponent ( var name :String,
                var description : String,

                var types : Set[Type] = Set(),
                var subElements : Set[ArchitecturalElement] = Set(),
                var interactionPoints : Set[InteractionPoint] = Set()
                ) extends Component 
```

Element 是我模型的根类。现在我想在 Element 上放置一个抽象方法“验证”，以便我的所有类继承。并且只在具体实施。我该怎么做呢？我经过验证的方法必须具有不同的签名，并且有些方法返回一个值，但其他方法不返回任何内容。

例如，我想要这样的东西：

```
 abstract class Element {
  var name: String
  var description: String 
  def validate (elem: Element)
}

class Group (var name : String, var description : String, var members: Set[Element] =Set()) 
extends Element{
validate (gr: Group) = {//the method body}
}

trait TypedElement extends Element{ 
  var types: Set[Type] 
  validate (ty : TypedElement )
}

trait ArchitecturalElement extends PropertyHolderElement with TypedElement {
validate (arel: ArchitecturalElement )
}

abstract class Component extends ConnectableElement with ArchitecturalElement {
  var subElements : Set[ArchitecturalElement]
 var interactionPoints : Set[InteractionPoint]
 validate (el : Component, subElem: Set[ArchitecturalElement]) : Boolean = {//the method body}
 //here, I need the return value to avoid cycles of recursion
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T14:58:09.847

这是无法做到的。重写的方法需要具有兼容的签名。这意味着相同数量的参数，在 args 中是逆变的，在返回中是协变的。这意味着您的 args 可以是被覆盖的 args 的超类型，并且返回类型可以是被覆盖的返回类型的子类型，但它们不能任意变化。

Now you can violate these rules, but then you're not overriding, merely overloading, and you will still need to provide an implementation of the abstract method.

# radio-button - Jade radio button checked condition

> ID：13624650
> 
> 赞同：4
> 
> 时间：2012-11-29T11:21:50.937
> 
> 标签：radio-button, conditional-statements, pug

I have form in Jade file, and I want it to be pre-filled with some values that come from backend.In the form, there are radio buttons for user gender.

```
input(type="radio", name="gender_filter", value="1") Male
input(type="radio", name="gender_filter", value="0") Female 
```

Now I also have this variable `gender_param`, and I want the corresponding button to be selected when page loads. In **PHP**, I could do this:

```
<input type="radio" name="gender_filter", value="1" <?php echo ($gender_param==1)?"checked":''; ?>> 
```

Is there the corresponding syntax for Jade? Or I need to write it in the long way with line duplicates like

```
- if gender_param==1
   input(type="radio", name="gender_filter", value="1", checked) Male
- else
   input(type="radio", name="gender_filter", value="1") Male 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-29T19:54:32.263

你可以在jade中做到这一点，甚至比在PHP中更简单：

```
input(type="radio", name="gender_filter", value="1", checked=gender=="male")
| Male
input(type="radio", name="gender_filter", value="0", checked=gender=="female")
| Female 
```

此代码块期望`gender`是从后端传递到视图的变量。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-06-17T17:28:57.760

对于 Jade：这里有一些输入类型和在提交表单后保持选中值的简写，即这样您就可以填充编辑页面...

单选按钮：

`input(type="radio" name="stars" value='1' id='stars' checked=theAlbum.rating=='1')`

选择框：

`option(selected = theAlbum.genre) #{theAlbum.genre}`

`option Jazz option Rock option Rap option Dance`

复选框：

`checked=theAlbum.checkbox`

# c++ - Making a bluetooth connection on windows using C++ (getting error 10060)

> ID：13624653
> 
> 赞同：0
> 
> 时间：2012-11-29T11:21:55.960
> 
> 标签：c++, bluetooth, winsock

I'm trying to get 2 laptops with bluetooth to connect. This is the code I'm using for making a server:

```
WSADATA wsd;
WSAStartup (MAKEWORD(1,0), &wsd);

SOCKET server_socket = socket(AF_BTH, SOCK_STREAM, BTHPROTO_RFCOMM);

SOCKADDR_BTH sa;
memset(&sa, 0, sizeof(sa));
sa.addressFamily = AF_BTH;
sa.port = 0 & 0xFF;

if(0 != bind(server_socket, (SOCKADDR *)&sa, sizeof(sa)))
{
    std::cout << "BIND ERROR: " << WSAGetLastError () << std::endl;
    closesocket(server_socket);
    return false;
}

if(0 != listen (server_socket, 5))
{
    std::cout << "LISTEN ERROR: " << WSAGetLastError () << std::endl;
    closesocket(server_socket);
    return false;
}

SOCKADDR_BTH sa2;
int size = sizeof(sa2);
SOCKET s2 = accept(server_socket, (SOCKADDR*)&sa2, &size);
if(s2 == INVALID_SOCKET)
{
    std::cout << "ACCEPT ERROR: " << WSAGetLastError () << std::endl;
    return false;
}
else
{
    std::cout << "Connected? " << WSAGetLastError () << std::endl;
} 
```

and the following as a client:

```
WSADATA wsd;
WSAStartup (MAKEWORD(1,0), &wsd);

SOCKET client_socket = socket (AF_BTH, SOCK_STREAM, BTHPROTO_RFCOMM);

SOCKADDR_BTH sa;
memset (&sa, 0, sizeof(sa));
sa.addressFamily = AF_BTH;
sa.btAddr = (BTH_ADDR)d.getDeviceAddress();
sa.port = 0;
sa.serviceClassId = *d.getLpServiceClassId();

if(client_socket == INVALID_SOCKET)
{
    std::cout << "SOCKET ERROR: " << WSAGetLastError () << std::endl;
    return false;
}
if (0 != connect (client_socket, (SOCKADDR *)&sa, sizeof(sa))) 
{
    std::cout << "CONNECT ERROR: " << WSAGetLastError () << std::endl;
    return false;
}
else
{
    //std::cout << "CONNECT ERROR: " << WSAGetLastError () << std::endl;
    //Perform error handling.s
    send(client_socket, "ABC",3,0);
    closesocket (client_socket);
    return true;
} 
```

Where "b" is the bluetooth device I give as argument the bluetoothdevice class has the following fields:

```
LPSOCKADDR local_address;
LPSOCKADDR device_address;
LPGUID lp_service_class_id; 
```

This SHOULD work. But when I try to connect to the server, the server gets nothing and the client gives me error 10060.

This error means:

```
WSAETIMEDOUT 10060

The I/O timed out at the Bluetooth radio level (PAGE_TIMEOUT). 
```

Is there anyone out here who has worked with the bluetooth stack on windows and knows where this error comes from?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T15:08:56.847

您是否使用蓝牙 SDP 注册了您的服务？如果不是，我猜，您将无法在客户端代码中使用当前方法进行连接。来自 MSDN：

`The bind function does not automatically advertise the server application using the Bluetooth SDP; applications must call the WSASetService function to be found by remote Bluetooth applications.`

还可以查看蓝牙文档`bind`和功能`connect`：

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa362901%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa362901%28v=vs.85%29.aspx) http://msdn.microsoft.com/en-us/library/windows/desktop /aa362901%28v=vs.85%29.aspx

据我了解，另一种方法是您可以尝试`port`在服务器端和客户端显式指定。但这仅适用于游乐场应用程序就足够了。

有关蓝牙使用的更多信息，您可以参考[http://msdn.microsoft.com/en-us/library/windows/desktop/aa363058%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363058%28v=vs.85%29.aspx)。

# php - 不同的“jpeg”扩展和 php 的 getimagesize()

> ID：13624654
> 
> 赞同：1
> 
> 时间：2012-11-29T11:21:58.203
> 
> 标签：php, image, jpeg, mime-types, getimagesize

所以， some img 有`.jpg`扩展名， some `.jpeg`， some`.JPG`和 some `.JPEG`。

问题：对于 php 函数`getimagesize()`，这 4 个扩展是相同的，并且总是返回`image/jpeg`为 mime 类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T11:27:48.857

文件的[mimetype](http://en.wikipedia.org/wiki/Internet_media_type)与文件的[扩展名](http://en.wikipedia.org/wiki/Filename_extension)不同。mimetype 通常通过[读取文件的（部分）内容](http://en.wikipedia.org/wiki/Content_sniffing)来确定。

# c# - 无法将 C# 代码移植到实现 IDataErrorInfo 的托管 C++

> ID：13624662
> 
> 赞同：1
> 
> 时间：2012-11-29T11:22:22.903
> 
> 标签：c#, c++, .net, managed

这部分。注释代码是cs。在编译时捕获一个错误：

```
Error   78
error C3766: 'Sample::NoteInfo' must provide an implementation for the interface method 'System::String ^System::ComponentModel::IDataErrorInfo::default::get(System::String ^)'
d:\dev\docstreet\sample\pointInfoStoreClass.h   100 
```

有什么不正确的？为什么VS编译器认为这没有实现？

```
//Returns an error description set for the item&#39;s property
//String^ IDataErrorInfo.this[String^ columnName] {
//  get {
//      return GetColumnError(columnName);
//  }
//}

public: property String^ IDataErrorInfo[String^] {
    virtual String^ get(String^ index) override {
        return GetColumnError(index);
    }
} 
```

完整代码：

```
public ref class NoteInfo : IDataErrorInfo {
        int fDay;
        int fMonth;
        int fYear;
        int fNoteID;
        //References the item's owner
        ProjectNotes^ owner;
        //Stores error descriptions for the Day, Month, Year and NoteID properties
        Hashtable^ propertyErrors;
        //Stores an error description for the item
        String^ fNoteError;

    public: NoteInfo(int noteID, int day, int month, int year) {
            fNoteID = noteID;
            fDay = day;
            fMonth = month;
            fYear = year;
            //Set errors to empty strings
            propertyErrors = gcnew Hashtable();
            propertyErrors->Add('Day', '');
            propertyErrors->Add('Month', '');
            propertyErrors->Add('Year', '');
            propertyErrors->Add('NoteID', '');
            fNoteError = '';
            Owner = nullptr;
        }

    public: property int NoteID {
            int get() { return fNoteID; }
            void set(int value) {
                if(fNoteID == value) return;
                fNoteID = value;
            }
        }

    public: void ClearErrors() {
            SetColumnError('Day', '');
            SetColumnError('Month', '');
            SetColumnError('Year', '');
            fNoteError = '';
        }

        //Sets an error for an item's property
    public: void SetColumnError(String^ elem, String^ error) {
            if(propertyErrors->ContainsKey(elem)) {
                if((String^)propertyErrors[elem] == error) return;
                propertyErrors[elem] = error;
            }
        }

        //Gets an error for an item's property
    public: String^ GetColumnError(String^ elem) {
            if(propertyErrors->ContainsKey(elem))
                return (String^)propertyErrors[elem];
            else
                return '';
        }

        //The owner collection
    internal: property ProjectNotes^ Owner {
            ProjectNotes^ get() { return owner; }
            void set(ProjectNotes^ value) { owner = value; }
        }

#pragma region IDataErrorInfo Members

        //Returns an error description set for the item's property
        //String^ IDataErrorInfo.this[String^ columnName] {
        //  get {
        //      return GetColumnError(columnName);
        //  }
        //}

        public: property String^ IDataErrorInfo[String^] {
            virtual String^ get(String^ index) override {
                return GetColumnError(index);
            }
        }

        //Returns an error description set for the current item
    public: property String^ Error {
            virtual String^ get() { return fNoteError; }

        }
#pragma endregion
    }; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T11:53:16.143

C# 和 C++/CLI 语言都需要一个类的索引器的特殊名称，以允许编译器将其识别为索引器。C# 使用*this*，C++/CLI 使用**default**关键字。MSDN 库将其称为“项目”以增加混淆，这在某种程度上不可避免，因为名称取决于语言。所以它必须看起来像这样：

```
public: property String^ default[String^] {
            virtual String^ get(String^ index) {
                // etc...
            }
        } 
```

# android - 将进度条放在用户输入内容后将启动的编辑文本中

> ID：13624664
> 
> 赞同：2
> 
> 时间：2012-11-29T11:22:24.807
> 
> 标签：android

我有一个电子邮件地址字段，我需要检查服务器的可用性。我有网络服务来执行这个测试作为一个异步任务。在进行此检查时，我希望用户填写其他详细信息，但我希望有一个进度指示器来显示电子邮件字段中的处理正在进行中。

我希望在 EditText 字段本身（可能在 EditText 的右上角）内显示一个进度条指示器。是否可以？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T12:52:15.243

取一个与您在 XML 中定义的 EditText 相同属性的进度条。将两者都放在一个 RelativeLayout 中，并使进度条居中。注意，edittext 的高度和宽度都应为 fill_parent。它看起来就像在 EditText 中一样。 ..并在适用的情况下设置进度的可见性消失

```
 <RelativeLayout
            android:layout_width="200dp"
            android:layout_height="200dp" >

            <ProgressBar
                android:id="@+id/progress"
                android:layout_centerInParent="true"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"/>

            <EditText
                android:id="@+id/colorStriptext"
                android:layout_width="fill_parent"
                android:layout_height=fill_parent" />
        </RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-29T11:30:58.213

您可以使任何像这样的视图可见和不可见

```
view.setVisibility(View.VISIBLE);
view.setVisibility(View.View.INVISIBLE); 
```

您需要做的是在 onPreExecute 中使编辑文本不可见并且 ProgressBar 可见。在 onPostExecute 方法中执行相反的操作。

# hadoop - 当您在 Hive 中使用 S3 位置创建外部表时，数据何时传输？

> ID：13624665
> 
> 赞同：7
> 
> 时间：2012-11-29T11:22:27.600
> 
> 标签：hadoop, amazon-s3, amazon, hive

当您在 Hive（在 Hadoop 上）中使用 Amazon S3 源位置创建外部表时，数据何时传输到本地 Hadoop HDFS？是否开启：

*   外部表创建
*   在外部表上运行查询（MR 作业）时
*   从不（从未传输过任何数据）并且 MR 作业读取 S3 数据。

S3 读取的成本是多少？将数据传输到 HDFS 是否有单一成本，或者是否没有数据传输成本，但是当 Hive 创建的 MapReduce 作业在此外部表上运行时，会产生读取成本。

一个示例外部表定义是：

```
CREATE EXTERNAL TABLE mydata (key STRING, value INT)
ROW FORMAT DELIMITED FIELDS TERMINATED BY '='
LOCATION 's3n://mys3bucket/'; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-29T22:46:28.903

Map 任务将直接从 S3 读取数据。在 Map 和 Reduce 步骤之间，数据将被写入本地文件系统，而在 mapreduce 作业之间（在需要多个作业的查询中），临时数据将被写入 HDFS。

如果您担心 S3 读取成本，创建另一个存储在 HDFS 上的表并从 S3 表一次性复制到 HDFS 表可能是有意义的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-29T12:06:30.007

当查询（MR 作业）访问数据时，数据会传输到您的 hadoop 节点。
创建外部表仅更改 Hive 元数据，从不移动实际数据。

# macos - 在 MAC OS 中使用 QtSettings 时，使用 Qt 开发的应用程序将其设置保存在哪里？

> ID：13624677
> 
> 赞同：0
> 
> 时间：2012-11-29T11:23:04.680
> 
> 标签：macos, qt, settings

假设我有一个应用程序，我使用以下代码保存设置：

```
QCoreApplication::setOrganizationName("orgname");
QCoreApplication::setApplicationName("appname");

QSettings settings;
settings.setValue("options/color","green"); 
```

生成的设置文件的名称是什么？它保存在 Mac OS 10.7 中的什么位置？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T13:27:20.187

应该

```
$HOME/Library/Preferences/com.orgname.appname.plist 
```

请参阅：[http ://doc.qt.digia.com/qt/qsettings.html#locations-where-application-settings-are-stored](http://doc.qt.digia.com/qt/qsettings.html#locations-where-application-settings-are-stored)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-29T17:02:05.513

如果您需要在运行时知道它，无论平台如何：

```
QString settingPath = yourSettings.fileName(); 
```

# sql - 检查一行是否由一个 sql 语句中的 2 个不同的“where”子句返回

> ID：13624681
> 
> 赞同：1
> 
> 时间：2012-11-29T11:23:17.947
> 
> 标签：sql, oracle

好吧，我有一个带有 id 的表，我需要检查 2 个条件是否适用。每个条件都是一组 where 子句。

例如，Table1 是我需要检查的。

第一个条件：

```
select t1.id 
from table1 t1, table2 t2, table3 t3 
where 
     condition1,
     condition2,
     condition3 
```

第二个条件：

```
 select t1.id 
 from table1 t1, table2 t2, table4 t4
 where
     condition1,
     condition4,
     condition5 
```

现在我需要检查第一个条件或第二个条件是否适用于相同的 id 或两者。我被告知要使用 union 并在 select 语句中为每个条件添加一个静态值（对于第一个条件`select t1.id, 1`和第二个条件的 ex `select t1.id, 2`）但是当我尝试它时，每一行都单独返回相同的 table1 id。

这些表非常大并且包含数百万条记录，因此我需要在一个 sql 中执行此操作以获得更好的性能，另外我正在从 C 代码访问结果，因为我不确定返回的结果数量，所以我将有一个单独执行每个查询的性能真的很差，将每个查询的结果保存在一个数组中，并在每个数组上执行一个循环以检查哪个 id 两者或一个条件都适用，因为每个 id 的不同处理将根据适用于它的条件进行.

*编辑* 示例：

```
 t1 ids: 1, 2, 3, 4

 for id = 1, only condition 1 apply
 for id = 2, only condition 2 apply
 for id = 3, both conditions apply
 for id = 4, no condition apply 
```

我需要在结果中包含 1 个或 2 个随机静态标志：

```
 id      1       2
  -----------------
  1      1
  2              2
  3      1       2 
```

我知道这听起来很乱，我什至不确定是否可以做到

非常感谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T11:28:24.903

子查询是一种解决方案，但有一种更优雅（虽然鲜为人知）的方法：`intersect`子句。它的工作方式类似于`union`，但使用交集而不是并集。

```
select t1.id 
from table1 t1, table2 t2, table3 t3 
where 
     condition1,
     condition2,
     condition3
intersect
 select t1.id 
 from table1 t1, table2 t2, table4 t4
 where
     condition1,
     condition4,
     condition5 
```

以类似的方式，`minus`可用于查找仅出现在第一个查询中的记录。

```
select t1.id 
from table1 t1, table2 t2, table3 t3 
where 
     condition1,
     condition2,
     condition3
minus
 select t1.id 
 from table1 t1, table2 t2, table4 t4
 where
     condition1,
     condition4,
     condition5 
```

（交换查询以查找仅出现在第二个查询中的查询）

要在一个查询中获取所有内容，您必须使用完整的外连接：

```
with q1 as (
select t1.id 
from table1 t1, table2 t2, table3 t3 
where 
     condition1,
     condition2,
     condition3),
q2 as (
 select t1.id 
 from table1 t1, table2 t2, table4 t4
 where
     condition1,
     condition4,
     condition5
)
select nvl(q1.id, q2.id) as id,
  case when q1.id is not null then 1 else null end "1",
  case when q2.id is not null then 2 else null end "2"
  from q1 full outer join q2 on q1.id = q2.id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T11:39:41.523

似乎无论查询如何，标记一行是否满足一个或多个条件的最佳方法是使用 case 语句......

```
 select id,
        case when condition1 then 1 else 0 end met_condition1,
        case when condition2 then 1 else 0 end met_condition2
 from   my_table
 where  condition1 or
        condition2 
```

编辑：

这个公式通常是我对 (query1 union query 2) 方法的首选，因为优化器可以选择将“condition_1 or condition_2”转换为联合（所有）查询，但我不记得它能够在相反的情况下进行转换方向。

此外，优化器并不总是善于识别条件何时互斥，这将允许使用 UNION ALL 而不是 UNION，并且您可能会背负不必要的 UNION 驱动的 DISTINCT 操作。

当然，优化器并不总是正确，但动态采样可以对决策产生强烈的积极影响，特别是在行有时可以同时匹配两个条件的情况下。

另一个编辑：

我突然想到，在过去，条件1 和条件2 可以通过单独的索引来满足，*并且*它们的结果集中存在一定程度的重叠，我对形式的查询有很好的经验......

```
 select ...
 from   ...
 where  rowid in (
          select rowid
          from   ...
          where  condition_1
          union
          select rowid
          from   ...
          where  condition_2) 
```

无论条件 1 和条件 2 为何，还有其他条件适用，并且这些条件也将数据集缩减了合理的数量，这也可能有助于...

```
 with baseline as (
    select ...
    from   ...
    where  common_condition_set)
 select ...
 from   baseline
 where  condition_1 or condition_2 
```

或者

```
 with baseline as (
    select ...
    from   ...
    where  common_condition_set)
 select ...
 from   baseline
 where  condition_1
 union
 select ...
 from   baseline
 where  condition_2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T11:26:34.563

UPDT

```
 select t1.id as first, ttt.id as second
    from table1 t1, table2 t2, table3 t3,
(select t1.id 
     from table1 t1, table2 t2, table4 t4
     where
         condition1,
         condition4,
         condition5) ttt
    where 
         condition1,
         condition2,
         condition3 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T11:37:54.667

我认为这是显式连接的情况，例如：

```
select
  t1.id,
  case when t2a.id is not null and t3.id is not null then 1 end condition_1st,
  case when t2b.id is not null and t4.id is not null then 1 end condition_2nd
from table1 t1
left join table2 t2a on condition2
left join table3 t3  on condition3
left join table2 t2b on condition4
left join table4 t4  on condition5
where contition1 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-29T11:54:09.077

这是一个应该在合理的时间内做你想做的事情的查询：

```
with tmp1 as (
    select t1.id
    from table1 t1, table2 t2, table3 t3 
    where 
         condition1,
         condition2,
         condition3
), tmp2 as (
    select t1.id
    from table1 t1, table2 t2, table4 t4
    where
        condition1,
        condition4,
        condition5
)
select distinct t1.id, t2.cond as cond1, t3.cond as cond2
from table1 t1, tmp1 t2, tmp2 t3
where t1.id = t2.id(+)
and t1.id = t3.id(+)
and not (t2.cond is null and t3.cond is null)
; 
```

注意：这与 ammoQ 的（更优雅的）完全外连接答案非常相似。

# android - 向设备发送坐标

> ID：13624683
> 
> 赞同：3
> 
> 时间：2012-11-29T11:23:28.003
> 
> 标签：android, android-emulator

我正在学习android，但我遇到了问题。

我在使用 de emulator 时遇到了一些问题，所以我在真实设备上运行我的应用程序。但我有一个问题，因为我必须模拟我接近某个点。例如，我在 x-10,y-10，当我在 x,y 时，我必须显示信息。

我知道如何通过 telnet 发送位置并且我知道 DDMS 工具，但是我可以使用 DDMS 工具在真实设备中模拟吗？如何？

我读过：

使用 DDMS 工具，您可以通过几种不同的方式模拟位置数据：

*   手动将单个经度/纬度坐标发送到设备。
*   使用 GPX 文件描述播放到设备的路径。
*   使用描述各个地点标记的 KML 文件以按顺序播放到设备。

但我看到 de location 控件被禁用。

提前感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T11:27:14.567

您可以使用 Fake gps 等应用程序。

[https://play.google.com/store/apps/details?id=com.lexa.fakegps&hl=en](https://play.google.com/store/apps/details?id=com.lexa.fakegps&hl=en)

下载并安装此 apk。您可以设置任何位置。

要检查您是否到达您的位置，请说 (x, y)：

检查 (x, y) 和您当前的 gps lcoation 之间的距离。如果这两个位置之间的距离（以米为单位）为 0（实际上给出至少 10 的缓冲区），那么你就达到了你的命运！

```
Location currentLocation = your current location fetched from GPS.
Location destinationLocation = your destination location co ordinates

if (currentLocation.distanceTo(destinationLocation) <= 10) {
  // Reached destiny
} 
```

# c# - 将 RDL 转换为 RDLC 的最佳实践

> ID：13624690
> 
> 赞同：6
> 
> 时间：2012-11-29T11:23:40.067
> 
> 标签：c#, dataset, reporting-services

对于我的报告，我正在寻找从 RDL 转移到 RDLC 文件。

原因是：

*   性能（报告是 RDLC 文件性能更好）
*   防火墙问题（我需要打开端口 80 才能连接到 SQL Server 报告服务器）

我的理想情况如下：将报告创建为 RDL 文件，以便轻松编辑。将其作为 RDLC 部署到 webapp。

让一个模块提取存储在 RDLC 中的查询和参数，并创建数据集并将其传递给 reportviewer。

在这种情况下，它易于维护。任何想法是否可用，或创建它的方向？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-11T12:51:57.140

Microsoft 提供有关将 RDL 转换为 RDLC 文件的文档

您可以在 MSDN 中找到该文档：[转换 RDL 和 RDLC 文件](https://msdn.microsoft.com/en-us/library/ms252109(v=vs.140).aspx "转换 RDL 和 RDLC 文件")
如果您需要其他 Visual-Studio 版本的文档，页面上有一个版本选择器。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-14T00:30:55.603

显然，您的方案没有可行的解决方案。

我建议你重新考虑你原来的原因：

*   性能 - 我不知道有任何显着的性能差异。事实上，由于可扩展性和缓存特性，SSRS 服务器的整体性能通常会优于 RDLC 解决方案
*   防火墙问题 - SSRS 服务器不限于端口 80，参考：http: [//msdn.microsoft.com/en-us/library/ms159261.aspx](http://msdn.microsoft.com/en-us/library/ms159261.aspx)

# javascript - 如何在 Table JavaScript 中获取选定的表格单元格？

> ID：13624692
> 
> 赞同：1
> 
> 时间：2012-11-29T11:23:40.597
> 
> 标签：javascript, dom-events

如何在不使用 jQuery 的情况下在 Table JavaScript 中获取选定的表格单元格？用 jQuery 决定很简单，但是在没有 jQuery 的 JavaScript 中——我不知道怎么做。我有表：

```
<table><tr onmouseover="toolnote(this)"><td><td><td></tr></table> 
```

我需要将“onmouseover”事件绑定到表中的每个单元格，但是如果将此事件写入每个单元格，它将非常不可读。因此，我必须将“onmouseover”绑定到通过子标记并在那里确定所选单元格。但我不知道如何获取子索引。

JS代码：

```
function toolnote(el){
    var tt = el.getElementsByTagName('td')
    alert(tt[0].innerHTML);
} 
```

在此示例事件中绑定到 0-index。

有人帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T11:26:09.997

### 怀疑！

1.  您拥有`toolnote()`函数名称，并且正在调用`tooltip()`该元素。这是一个错字吗？
2.  您`;`在声明中缺少 a。

* * *

### 简单的改变：

```
function toolnote(el){
    var tt = el.getElementsByTagName('td'); // «--- You are missing a ;
    alert(tt[0].innerText);
} 
```

* * *

### 或者，如果您使用[jQuery](http://jquery.com/)，那么它仍然更容易。

```
function toolnote(el){
    alert($(el).children("td").first().text());
} 
```

* * *

### 您需要在每个单元格中使用它，然后：

```
<tr><td onmouseover="toolnote(this)"></td><td onmouseover="toolnote(this)"></td><td onmouseover="toolnote(this)"></td></tr> 
```

以这种方式制作 JavaScript：

```
function toolnote(el){
    alert(this.innerText);
} 
```

在**火狐**的情况下：

```
function toolnote(el){
    alert(this.textContent);
} 
```

[这就是原因，我说使用jQuery](http://jquery.com/)会更好，因为它以更好的方式处理这个跨浏览器脚本问题。

* * *

### 在单行中：

```
function toolnote(el) {
    var e = el.getElementsByTagName("td");
    if (e.textContent)
        for (i = 0; i < e.length; i++) e[i].onclick = function () {
            alert(this.textContent); // Firefox
        }
    else
        for (i = 0; i < e.length; i++) e[i].onclick = function () {
            alert(this.innerText); // IE
        }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-03T20:28:00.030

在 tr 调用 onload="setUpToolnote(this);"

```
function toolnote(){
     alert(this.innerText);
}
function setUpToolnote(el){
 var tt=el.getElementsByTagName('td'); 
for(var i=0;i<tt.length;i++){
tt[i].addEventListener("mouseover", toolnote);
}
} 
```

# c# - 循环遍历 javascript 对象以绘制折线谷歌地图

> ID：13624693
> 
> 赞同：0
> 
> 时间：2012-11-29T11:23:41.813
> 
> 标签：c#, javascript, json, google-maps-api-3

我已经在这里找到了一些关于 javascript 对象的文章，但我似乎还没有掌握它。我将 JSON 字符串转换为 javascript 对象，如下所示。

```
public class LinePoint {
    public string Latitude { get; set; }
    public string Longitude { get; set; }
    public int Pointnumber { get; set; }
}

public class PolyLine {
    public List<LinePoint> LinePoints { get; set; }
    public int PolyLineNumBer { get; set; }
}

public class RootObject {
    public List<PolyLine> PolyLines { get; set; }
} 
```

因为我想获取每个列表项的所有纬度和经度属性以将它们绘制为谷歌地图控件中的折线，所以我在地图的初始化中添加了下面的代码。我只是不知道如何遍历对象。

到目前为止，这是我的代码。

```
var line = JSON.parse(document.getElementById('hdfPolyLines').value);
var path = [];

$.each( /* Listitem in rootobject */) {
    //  Parse the array of LatLngs into Gmap points
    for( /* each latlong in the list of listitems */ ){
        path.push(new google.maps.LatLng( // Latitude en Longitude properties from listitems */ ));
    }
    var polyline = new google.maps.Polyline({
        path: path,
        strokeColor: '#ff0000',
        strokeOpacity: 1.0,
        strokeWeight: 3
    });

    polyline.setMap(map);
}); 
```

有人可以通过向我展示如何循环遍历 javascript 对象并获取属性值来帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T11:42:36.883

我错过了有关 html 文档的文档结构的信息。

但是，我会尽力提供帮助：

```
$("#rootitemid").children().each(function(){
    var value= $(this).html(); 
    //..
}); 
```

前面的循环遍历 html 文档中的元素。

```
for(key in objs){
    var value= objs[key];
    //..
} 
```

前面的循环遍历一个 javascript 对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T20:34:28.303

假设您使用的是 jQuery，您可以将 $.each 用于循环。像这样的东西应该工作：

```
 var line = JSON.parse(document.getElementById('hdfPolyLines').value);

    $.each(line.PolyLines, function(polyLineIndex, polyLineValue) {

        var path = Array();

        $.each(polyLineValue.LinePoints, function (linePointIndex, linePointValue) {

            path.push(new google.maps.LatLng(linePointValue.Latitude, linePointValue.Longitude));
        });

        var polyline = new google.maps.Polyline({
            path: path,
            strokeColor: '#ff0000',
            strokeOpacity: 1.0,
            strokeWeight: 3
        });

        polyline.setMap(map);
    }); 
```

# iphone - 在 iOS 上隐藏状态栏的正确方法，带有动画和调整根视图的大小

> ID：13624695
> 
> 赞同：33
> 
> 时间：2012-11-29T11:23:50.327
> 
> 标签：iphone, ios, uiviewcontroller, statusbar, uistatusbar

考虑一个在单击按钮时需要滑出（或隐藏）状态栏的视图控制器。

```
- (void) buttonClick:(id)sender
{
    [[UIApplication sharedApplication] setStatusBarHidden:YES
                                            withAnimation:UIStatusBarAnimationSlide];
} 
```

以上有效地隐藏了状态栏，但没有适当调整根视图的大小，在顶部留下 20 像素的间隙。

我期望的是根视图扩展状态栏先前使用的空间（动画，与状态栏动画具有相同的持续时间）。

这样做的正确方法是什么？

*（我知道有很多类似的问题，但我找不到任何关于按需隐藏状态栏而不是隐藏它以显示新视图控制器的信息）*

# “蛮力”方法

显然，以下工作......

```
[[UIApplication sharedApplication] setStatusBarHidden:YES
                                        withAnimation:UIStatusBarAnimationSlide];
[UIView animateWithDuration:0.25 animations:^{
    CGRect frame = self.view.frame;
    frame.origin.y -= 20;
    frame.size.height += 20;
    self.view.frame = frame;
}]; 
```

...但有缺点：

*   硬编码幻灯片动画的持续时间
*   硬编码状态栏的高度
*   根视图原点保持在 (0,-20)。我喜欢我的帧尽可能从 (0,0) 开始。

# 我已经尝试过的

*   确保根视图的自动调整大小掩码具有`UIViewAutoresizingFlexibleTopMargin`和`UIViewAutoresizingFlexibleHeight`.
*   `[self.view setNeedsLayout]`隐藏状态栏后调用。
*   `[self.view setNeedsDisplay]`隐藏状态栏后调用。
*   设置`wantsFullScreenLayout`为`YES`隐藏状态栏前后。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2015-11-14T23:14:53.627

对于那些尝试使用基于视图控制器的状态栏外观来实现这一点的人，您需要在视图控制器中实现 prefersStatusBarHidden 方法

```
 - (BOOL)prefersStatusBarHidden
{
    // If self.statusBarHidden is TRUE, return YES. If FALSE, return NO.
    return (self.statusBarHidden) ? YES : NO;
} 
```

然后，在您的按钮单击方法中：

```
- (void) buttonClick:(id)sender
{
    // Switch BOOL value
    self.statusBarHidden = (self.statusBarHidden) ? NO : YES;

    // Update the status bar
    [UIView animateWithDuration:0.25 animations:^{
        [self setNeedsStatusBarAppearanceUpdate];
    }];
} 
```

要设置动画样式，请使用：

```
-(UIStatusBarAnimation)preferredStatusBarUpdateAnimation
{
    return UIStatusBarAnimationSlide;
} 
```

并自定义样式：

```
- (UIStatusBarStyle)preferredStatusBarStyle
{
    return UIStatusBarStyleLightContent;
} 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-11-29T13:05:15.013

这工作正常，没有**硬编码**。

```
CGRect appFrame = [[UIScreen mainScreen] applicationFrame];

[[UIApplication sharedApplication] setStatusBarHidden:YES withAnimation:UIStatusBarAnimationSlide];
[UIView animateWithDuration:0.25 animations:^{
    self.navigationController.navigationBar.frame = self.navigationController.navigationBar.bounds;
    self.view.window.frame = CGRectMake(0, 0, appFrame.size.width, appFrame.size.height);
}]; 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-05-23T09:16:49.597

您可以呈现然后关闭模式视图控制器以正确隐藏状态栏

```
- (void)toggleStatusBar {
    BOOL isStatusBarHidden = [[UIApplication sharedApplication] isStatusBarHidden];
    [[UIApplication sharedApplication] setStatusBarHidden:!isStatusBarHidden];

    UIViewController *vc = [[UIViewController alloc] init];
    [self presentViewController:vc animated:NO completion:nil];
    [self dismissViewControllerAnimated:NO completion:nil];
    [vc release];
} 
```

我在横向的“willAnimateRotationToInterfaceOrientation”方法中使用了这段代码，一切正常。但我不知道它是否适用于动画。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-04-30T15:46:42.500

隐藏或显示也会重新调整视图大小的状态栏：

```
-(void)statusBar:(BOOL)status {
UIViewController *rootViewController = self.view.window.rootViewController;
UIView *view = rootViewController.view;

// Hide/Unhide the status bar
[[UIApplication sharedApplication] setStatusBarHidden:status]; // BOOL : YES or NO

// statusBar frame
CGRect statusBarFrame = [UIApplication.sharedApplication statusBarFrame];
// Establish baseline frame
CGRect newViewFrame = self.view.window.bounds;

// Check statusBar frame is worth dodging
if (!CGRectEqualToRect(statusBarFrame, CGRectZero)) {
    UIInterfaceOrientation currentOrientation = rootViewController.interfaceOrientation;
    if (UIInterfaceOrientationIsPortrait(currentOrientation)) {
        // If portrait need to shrink height
        newViewFrame.size.height -= statusBarFrame.size.height;
        if (currentOrientation == UIInterfaceOrientationPortrait) {
            // If not upside-down move down origin
            newViewFrame.origin.y += statusBarFrame.size.height;
        }
    } else { // Is landscape 
        // portrait shrink width
        newViewFrame.size.width -= statusBarFrame.size.width;
        if (currentOrientation == UIInterfaceOrientationLandscapeLeft) {
            // If the status bar is on the left side of the window move origin
            newViewFrame.origin.x += statusBarFrame.size.width;
        }
    }
}
view.frame = newViewFrame; // pass new frame 
} 
```

调用方法（消息）：

```
 if ([[UIApplication sharedApplication] isStatusBarHidden]) {
        [self statusBar:NO];
 } else {
        [self statusBar:YES];
 } 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-06-16T22:55:07.100

为方便起见，@awfulcode 答案的 Swift 4 变体：

```
var statusBarHidden = false {
    didSet {
        UIView.animate(withDuration: 0.25) {
            self.setNeedsStatusBarAppearanceUpdate()
        }
    }
}

override var preferredStatusBarStyle: UIStatusBarStyle {
    return .default
}

override var preferredStatusBarUpdateAnimation: UIStatusBarAnimation {
    return .fade
}

override var prefersStatusBarHidden: Bool {
    return statusBarHidden
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-29T12:00:34.793

我知道这样做的方法，但缺点也很明显。您可以`self.wantsFullScreenLayout = YES;`在您的`viewDidLoad`和设置您的 xib 文件与屏幕一样大（320x480 和 iPhone5 的 320x568）。但这意味着状态栏下方的区域也是不可见的。并且使用这种方式，当您隐藏状态栏时，您的视图也不会展开。如果您没有在状态栏区域显示的内容，您可以考虑这种方式。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-05-03T18:16:16.503

经过数小时的实验和寻找答案；特别是[这个答案](https://stackoverflow.com/a/9389248/1477298)。稍作调整，我成功地做到了，现在过渡之间的顶部间隙 20px 消失了！

假设我们有一个 BOOL `isStatusBarEnabled`ivar，它将指示我们是否应该隐藏状态栏（例如：访问`NSUserDefault`检查时`boolValueForKey`）。

所以，我们首先通过 来检查 statusBar 是否已经被隐藏`[[UIApplication sharedApplication] isStatusBarHidden]`，如果它没有被隐藏（== 被显示），我们就隐藏它！否则，另当别论！

*   要在显示状态时修复 20px - 但导航未正确下推，只需将 20 点添加`origin.y`到`self.navgigationController.navigationBar.frame`.

*   当我们想要隐藏状态栏时也这样做，只需删除那个 20 点就可以`origin.y`了。`self.navgigationController.navigationBar.frame``0`

就是这个！

```
@implementation SomeViewController {
    BOOL isStatusBarEnabled;
}

// ...

- (void)toggleStatusBar
{
    UINavigationBar *navBar = self.navigationController.navigationBar;

    if ([[UIApplication sharedApplication] isStatusBarHidden]) {

        // Change to regular mode
        // Show status bar
        [[UIApplication sharedApplication] setStatusBarHidden:NO
                                                withAnimation:UIStatusBarAnimationSlide];
        [UIView animateWithDuration:0.3
                         animations:^{
                             navBar.frame = CGRectMake(navBar.frame.origin.x, 20, navBar.frame.size.width, navBar.frame.size.height);
                         } completion:nil];

    } else if (![[UIApplication sharedApplication] isStatusBarHidden]) {
        // Change to fullscreen mode
        // Hide status bar
        [[UIApplication sharedApplication] setStatusBarHidden:YES
                                                withAnimation:UIStatusBarAnimationSlide];
        [UIView animateWithDuration:0.4
                         animations:^{
                             navBar.frame = CGRectMake(navBar.frame.origin.x, 0, navBar.frame.size.width, navBar.frame.size.height);
                         } completion:nil];
    }

}

// ... 
```

...然后，就我而言，我有一个设置键让用户选择切换显示/隐藏状态栏。

```
// ...

- (void)onDefaultsChanged:(NSNotification*)aNotification
{

    NSUserDefaults *standardDefaults = [NSUserDefaults standardUserDefaults];
    isStatusBarEnabled = [standardDefaults boolForKey:kStatusBar];

    if (isStatusBarEnabled) {

      if ([[UIApplication sharedApplication] isStatusBarHidden]) {

          // Change to regular mode
          // Show status bar
          [self toggleStatusBar];   

    } else {

        // Change to fullscreen mode
        // Hide status bar
        [self toggleStatusBar];

  }

  // ...
} 
```

就是这样！

# c# - 在任务主体内的 catch 块中返回一个对象

> ID：13624696
> 
> 赞同：-2
> 
> 时间：2012-11-29T11:24:00.157
> 
> 标签：c#, exception, task

请考虑以下情况。

我有一个任务，它返回一个对象，可以说它的类型：

```
class A
{
string success;
} 
```

现在任务的主体是例如：

```
{
return new A() { success = "yes" }
} 
```

该任务的外部无关紧要，如果它是连续任务或其他任何东西。重要的是，在从该任务返回时，我可以通过 task.Result.status 读取这个返回的对象。

我遇到的问题是，如果我想在 try/catch 块中返回该类型的对象，task.Result.status 为空，并且 task.Result 属于 AggregatedException 类型。例如：

```
//(Task body)
{
{
try
{
//something throwing exception
}
catch(Exception exc)
{
return new A() { success = "yes" }
}
} 
```

当执行从该任务返回时，我正在寻找一种方法来获取在 catch 块中返回的对象，而不是我现在收到的 AggregatedException。

请克制自己不要使用通常的论坛“答案”，例如“你为什么想要它”、“它有什么意义”等。我对这样的答案不感兴趣。

如果它不能完成并且你知道这是一个事实（也许抛出异常时的任务总是返回 AggregatedException 无论如何），那么请直截了当地告诉我。另一方面，如果可以的话，我会很高兴我能做到这一点。

卢卡斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T11:30:11.700

您的问题可以得到更好的解释，但据我了解，这非常适合您想要做的并且应该起作用。

```
//(Task body)
{
    A result = null;
    try
    {
        //something that might throwing exception but could also new the result
    }
    catch(Exception)
    {
        result = new A() { success = "yes" }
    }

    return result;
} 
```

任务中捕获的异常不应传播到 AggregateException。如果这种情况仍然发生，那么您在代码的其他地方做错了什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T12:27:10.050

情绪对我来说是最好的。

与往常一样，问题是我以前看不到的。

我试图简化我的问题以找到问题的根源，这就是上面的代码如此基本的原因。事实证明，任务异常处理非常复杂，尤其是当我们处理内部任务和等待调用时。

我正在调用 innerTask.Wait() 方法，而该方法正在引发 Aggregate 异常。

[http://msdn.microsoft.com/en-us/library/dd235635.aspx](http://msdn.microsoft.com/en-us/library/dd235635.aspx)

尽管 innerTask 执行正在运行，并且它正在返回对象，但外部任务在此之前正在处理异常。

一旦我意识到这一点，修复就非常简单易行了。

# java - java 中的 menu.add 不会将 NONE 作为有效整数

> ID：13624698
> 
> 赞同：0
> 
> 时间：2012-11-29T11:24:03.953
> 
> 标签：java, android

正如标题所说，我正在尝试使用该`menu.add()`方法将项目添加到菜单中。用于此的参数是：`menu.add(int groupId, int itemId, int order, int titleRES)`. 文档说，`groupId`如果不需要，则可以将`order`值归因于它们。`NONE`然而，Eclipse 不会接受 NONE 作为有效的整数值。

谁能帮我这个？

发布代码片段没有多大意义！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T11:36:46.557

```
menu.add(groupId, itemId, android.view.Menu.NONE, titleResId) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T11:34:54.510

您是否尝试过 Integer 而不是 int？

# c++ - OpenCV C++：将 RGBA 转换为 HSL，然后拆分通道

> ID：13624703
> 
> 赞同：2
> 
> 时间：2012-11-29T11:24:13.743
> 
> 标签：c++, opencv, colors, hsl

对于一些图像分割工作，我想在 HSL 颜色空间中使用图像的亮度通道。

为此，我将 RGBA 图像转换为 RGB，然后再转换为 HSL。在颜色转换之后，我使用 将图像分割成它的颜色平面`cv::mixChannels`，这为我提供了饱和度/亮度平面的黑色输出。

*代码：*

```
cv::Mat src;
cv::Mat hsl;

cv::cvtColor(srcRgba , src , CV_RGBA2RGB);
cv::cvtColor(src, hsl, CV_RGB2HLS);

cv::Mat hue = cv::Mat::Mat(hsl.size(), hsl.depth());
cv::Mat saturation = cv::Mat::Mat(hsl.size(), hsl.depth());
cv::Mat lightness = cv::Mat::Mat(hsl.size(), hsl.depth());

cv::Mat matsOut[] = { hue, saturation, lightness };

// hsv[0] => hue[0], hsv[1] => saturation[0], hsv[2] => lightness[0]
int ch[] = { 0,0, 1,0, 2,0 };

// number of elements in hsl -> 1
// number of elements in matsOut -> 3
// number of pairs in ch -> 3
cv::mixChannels(&hsl, 1, matsOut, 3, ch, 3); 
```

也许我搞砸了什么`cv::mixChannels`？

**编辑**

这是`cv::split`我使用的代码，Xcode 给了我错误：

*代码：*

```
cv::Mat src;
cv::Mat hsl;

cv::cvtColor(srcRgba , src , CV_RGBA2RGB);
cv::cvtColor(src, hsl, CV_RGB2HLS);

std::vector<cv::Mat> hslChannels;
cv::split(hsl, hslChannels); 
```

*错误：*

```
Undefined symbols for architecture x86_64:
  "cv::split(cv::Mat const&, std::__1::vector<cv::Mat, std::__1::allocator<cv::Mat> >&)", referenced from:
      hsvTest(cv::Mat) in test.o
ld: symbol(s) not found for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

**编辑 2**

明白了，这行得通：

```
cv::Mat src;
cv::Mat hsl;

cv::cvtColor(srcRgba , src , CV_RGBA2RGB);
cv::cvtColor(src, hsl, CV_RGB2HLS);

cv::Mat hslChannels[3];
cv::split(hsl, hslChannels); 
```

现在色调平面完全是黑色的，但饱和度和亮度平面看起来还不错……</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T14:11:20.557

错误是您将 CVMat 的向量传递给 cvSplit。尝试看这里： [http ://docs.opencv.org/modules/core/doc/operations_on_arrays.html?highlight=cvsplit](http://docs.opencv.org/modules/core/doc/operations_on_arrays.html?highlight=cvsplit)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-24T02:07:56.473

如果您仍想使用向量来存储矩阵，则需要预先分配它们（例如 vector< Mat > hslChannels(3) 将在 Mat 类型的向量中创建 3 个元素。）

所以你的代码将是：

```
cv::Mat src;
cv::Mat hsl;

cv::cvtColor(srcRgba , src , CV_RGBA2RGB);
cv::cvtColor(src, hsl, CV_RGB2HLS);

std::vector<cv::Mat> hslChannels(3);
cv::split(hsl, hslChannels); 
```

# java - 给定邻接列表，如何找出图中节点的支配者列表？

> ID：13624706
> 
> 赞同：2
> 
> 时间：2012-11-29T11:24:17.863
> 
> 标签：java, graph

给定 Graph 中所有节点的列表 G、所有现有连接（边）的列表和所有节点的邻接列表列表，如何继续找出给定节点的支配者列表?

我想到的一种方法如下：

对于给定的节点 N，找出从根节点到 N 的所有路径。这些路径的交集会给我一组支配 N 的节点。但是这里的问题是，我如何真正找出路径？*特别是在用 JAVA 编码时。*

任何有用的答案，特别是，将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T06:23:27.763

我成功地实现了 Tarjan 的算法。

FWIW，它就像：

要找出*n*占主导地位的一组节点，只需计算从起始节点到其余节点的所有路径（很容易处理，一旦我们有了所有节点的邻接列表）就可以避开*n*。让这组可到达的节点为*R*。*n*占主导地位的节点是*R*中不存在的节点。也就是说，如果*U*是给定图的所有节点的集合，则*n*将支配属于集合*UR*的节点。

# iphone - 按下主页按钮后 UILocalNotification 不显示文本

> ID：13624707
> 
> 赞同：0
> 
> 时间：2012-11-29T11:24:26.840
> 
> 标签：iphone, ios, notifications, uilocalnotification, uiapplication

我使用此代码创建本地通知：

```
 UILocalNotification *notification=[[UILocalNotification alloc]init];
        notification.soundName = @"new_friend_request.mp3";
        notification.repeatInterval = 0;
        notification.alertAction = @"Go to";
        notification.userInfo = [NSDictionary dictionaryWithObject:@"actionNotification" forKey:@"actionNotification"];
        notification.alertBody = @"Body";
        [[UIApplication sharedApplication] presentLocalNotificationNow:notification];
        [notification release]; 
```

但是按下主页按钮后，我在 iPhone 的主屏幕上看不到通知警报正文。

一开始我以为通知没有被调用，但后来我使用调试发现，通知被正确调用。

所以，我不知道，为什么它不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T14:42:02.493

`presentLocalNotification`在我看来，问题是当应用程序在后台时你是如何打电话的。我发现如果我使用`NSTimer`or`dispatch_after`调用调用的方法，`presentLocalNotification`实际上不会在应用程序处于后台时触发，而是延迟到应用程序返回到前台之后。我想知道您认为正在执行的代码是否在您认为`presentLocalNotification`的实际运行时正在运行。

例如，在我的测试中，当我将`NSTimer`基于 - 的代码调用替换为以下使用 时`scheduleLocalNotification`，如果应用程序恰好在后台运行，我确实会收到您的通知。因此，将您的行替换`presentLocalNotification`为：

```
// put all of your code configuring the UILocalNotification here
// but omit the presentLocalNotification, replacing it with the following code

// just for a test, fire the notification in 5 seconds

notification.fireDate = [[NSDate date] dateByAddingTimeInterval:5.0];
[[UIApplication sharedApplication] scheduleLocalNotification:notification]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T11:30:04.577

这是正常行为，因为您在应用程序运行时直接触发通知，通知会发送到旅游应用程序委托。

通知中心不会处理通知，因为您的应用程序已经在运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T11:32:54.360

您正在使用该`presentLocalNotificationNow`方法。这将在您的应用程序运行的当前时刻发布通知。如果应用程序正在运行，本地通知将不会收到警报或声音，因为它是由您的应用程序直接接收的。

如果您按主页按钮，那么您将不会收到任何警报或声音。

> **现在本地通知：**
> 
> 立即显示本地通知。
> 
> `- (void)presentLocalNotificationNow:(UILocalNotification *)notification`
> 
> **参数**
> 
> **`notification`**
> 
> ```
> A local notification that the operating system presents for the application immediately, regardless of the value of the notification’s fireDate property. 
> ```
> 
> 当有传入的聊天、消息或更新时，在后台运行的应用程序可以立即呈现本地通知。因为操作系统会复制通知，所以您可以在安排好通知后将其发布。

有关更多信息，请参阅[UIApplication 类参考](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIApplication_Class/Reference/Reference.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T04:51:21.543

问题是我的应用程序在 iphone 设置中关闭了本地通知。现在我仍然使用 presentLocalNotification 并且一切正常。

我的应用程序总是在后台运行，因为我的应用程序使用套接字。

但是无论如何，很抱歉浪费了试图帮助我的人们的时间，因为问题是由于我造成的。

# html - 用固定的右 td 动态调整左 td 的大小

> ID：13624708
> 
> 赞同：0
> 
> 时间：2012-11-29T11:24:27.753
> 
> 标签：html, css

我正在尝试获取一个简单的网页，其中包含一些文本和左半部分的按钮以及右侧的动画图像（它会滑动）。目前一切正常，除了当我重新调整网页大小时，背景会流过正确的 td 直到它到达第一个媒体标签。我不确定为什么会发生这种情况，因为右侧 td 是固定宽度，而左侧设置为 100%。我想得到它，以便左侧 td 随着页面大小的增加而变宽，而右侧 td 保持在右手尺寸并保持恒定宽度。

这是代码（抱歉有这么多）

**html:**

```
<table border="0" cellpadding="0" cellspacing="0">
<tr height = "500px">
    <td width = "100%" style="padding: 0 25px 0 40px">  
        <h1>Header.</h1>
        <p>Text.</p>
        <ul>
            <li>List item.</li>
            <li>List item.</li>
            <li>List item.</li>
        </ul>           
        <a href="url" class="button">buttonText</a> 
        <div class="logo"><img width="35%" style="max-width: 200px" src="../img/logo.png"/></div>           
    </td>
    <td width="550px">
        <div class='image-window'>
            <div id="i_sliding_image" class="img sliding-image" ><img src="../img/img-slide.jpg"/></div>
            <div id="img-bubble1" class='img img-bubble hide'><img src="../img/img-bubble1.gif"/></div>
            <div id="img-bubble2" class='img img-bubble hide'><img src="../img/img-bubble2.gif"/></div>             
        </div>
    </td>
</tr>
</table> 
```

**CSS：**

```
div#wrapper
{
    min-width: 960px;
    min-height: 500px;      
    color: #fff;        
}

h1
{
    width: 100%;        
    font-size: 40px;
    color: #ffffff;     
    padding: 0 0 28px 0;
    line-height: 1.1em;
    margin: 0;
}

p
{       
    padding: 0 0 1em 0;
    margin: 0;
    color: #ffffff;
    font-size: 16px;        
    width: 100%;
}

ul
{
    padding: 0 0 0 20px;
    margin: 0 0 50px 0;
    list-style-type: square;
    list-style-position: outside;
    color: #ffffff;
    font-size: 16px;        
}

a.button
{
    margin: 0px 0 0px 0;        
    font-size: 13px;        
    color: #0072C6;
    padding: 7px 19px 10px 19px;
    background: #fff;
    position: absolute;
}

@media (min-width:960px)
{
    #wrapper
    {
        max-width: 960px;
    }
    p, a, ul
    {
        font-size: 16px;
    }
    h1
    {
        font-size: 40px;
    }
    a.button
    {
        font-size: 13px;
    }
}
@media (min-width:1200px)
{
    #wrapper
    {
        max-width: 1200px;
    }
    p,a,ul
    {
        font-size: 18px;
    }
    h1
    {
        font-size: 42px;
    }
    a.button
    {
        font-size: 14px;
    }
}
@media (min-width:1600px)
{
    #wrapper
    {
        max-width: 1400px;
    }
    p,a,ul
    {
        font-size: 20px;
    }
    h1
    {
        font-size: 44px;
    }
    a.button
    {
        font-size: 15px;
    }
}

.image-window
{
    width: 550px;
    height: 500px;
    float: left;
    position: relative;
    overflow: hidden;
    padding: 0;
    margin: 0;
}

#img-bubble1, #img-bubble2
{
    position: absolute;
    z-index: -1;
}

.img-bubble
{
    width: 206px;
    height: 400px;
    position: absolute;
    top: 0;
    right: 0;   
}
.sliding-image
{
    width: 888px;
    height: 500px;
    position: absolute;
    size: auto;
} 
```

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T18:01:53.783

我修复了这个我的删除

```
#wrapper
{
    max-width: 960px;
} 
```

从`@media (min-width:960px)`

对不起，如果我的问题很难理解，但很难描述。感谢所有阅读它的人，感谢 Miqdad Ali 提供的帮助。

# objective-c - 旋转图像保留中心？

> ID：13624714
> 
> 赞同：1
> 
> 时间：2012-11-29T11:24:51.820
> 
> 标签：objective-c, ios, rotation, anchor, catransform3d

我有这个示例图片

![在此处输入图像描述](../Images/854ce8de27fdac2e125aa8bbe4ab65b0.png)

当我旋转时，我需要挡住圆圈中间的中心。
锚点是什么？是锚点的问题吗？

现在图像旋转，不考虑锚点。

```
_Image.layer.anchorPoint = CGPointMake(0.5, 0.5); //?
[...]
CGFloat wAngle = Degrees2Radians([_Weight.text intValue]/300.0*360);
_Image.layer.transform = CATransform3DMakeRotation (wAngle+M_PI, 0, 0, 1); 
```

我需要做一个测试，比如从 0 到 300 的逆时针，保留中心。

> 0，箭头到底部
> 150，箭头到顶部
> 300，箭头到底部
> 等...

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T11:32:36.933

试试这个。它可能对你有帮助。

> CGAffineTransformMakeRotation(-M_PI * 0.5);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T11:32:59.197

这是默认的

```
_Image.layer.anchorPoint = CGPointMake(0.5, 0.5); // 
```

使用类似 CGPointMake(0.5, 0.25)

你需要计算你想要设置的位置。这些不是确切的值

# javascript - 在关于滑块 javascript 的点击回合中停止自动播放

> ID：13624717
> 
> 赞同：0
> 
> 时间：2012-11-29T11:24:56.250
> 
> 标签：javascript, jquery, slideshow

我已经使用了这个[站点上](http://www.joezimjs.com/demos/roundabout-demo/)的round about slider 。

如果我将鼠标悬停在幻灯片上，则自动旋转停止。我需要链接`stop`。`auto play` `on click``Stop auto play`

我的html代码：

```
<div id="carousel">
    <a href="#"><img src="image_main1.jpg" alt=""></a>
    <a href="#" ><img src="image_main2.jpg" alt=""></a>
    <a href="#" ><img src="image_main3.jpg" alt=""></a>
</div>

<div id="carousel-controls">
    <span class="control current"><img src="video_thumb1.jpg" alt=""></span>
    <span class="control"><img src="video_thumb.jpg2" alt=""></span>
    <span class="control"><img src="video_thumb.jpg3" alt=""></span>
</div>
<div><a href="#">Stop auto play</a></div> 
```

我的脚本：

```
(function($) {

var $descriptions = $('#carousel-descriptions').children('li'),
    $controls = $('#carousel-controls').find('span'),
    $carousel = $('#carousel')
        .roundabout({childSelector:"a", minOpacity:1, autoplay:true, autoplayDuration:5000, autoplayPauseOnHover:true })
        .on('focus', 'a', function() {
            var slideNum = $carousel.roundabout("getChildInFocus");

            $descriptions.add($controls).removeClass('current');
            $($descriptions.get(slideNum)).addClass('current');
            $($controls.get(slideNum)).addClass('current');

        });

$controls.on('click dblclick', function() {
    var slideNum = -1,
        i = 0, len = $controls.length;

    for (; i<len; i++) {
        if (this === $controls.get(i)) {
            slideNum = i;
            break;
        }
    }

    if (slideNum >= 0) {
        $controls.removeClass('current');
        $(this).addClass('current');
        $carousel.roundabout('animateToChild', slideNum);
    }
});

}(jQuery)); 
```

怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T11:40:21.417

在 API 页面 (http://fredhq.com/projects/roundabout#/api) 中，btnStopAutoplay 是“一个页面元素的 jQuery 选择器，当点击它时，将停止 Roundabout 的自动播放功能（如果它正在播放）。”

所以，首先添加一个ID，以便它可以被选中

```
<div><a href="#" id="carouselstop">Stop auto play</a></div> 
```

然后，更新您的 Javascript 以包含 btnStopAutoplay：

```
.roundabout({childSelector:"a", minOpacity:1, autoplay:true, autoplayDuration:5000, autoplayPauseOnHover:true, btnStopAutoplay:"#carouselstop" }) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T11:32:07.327

您可以通过将布尔值设置为 false 来停止自动播放

```
<div><a href="#" onclick='$('#carousel').roundabout({autoplay: false});'>Stop auto play</a></div> 
```

[请参阅此链接以供参考](http://fredhq.com/projects/roundabout/#/autoplay)

# android - 在 Jenkins 中使用 ant 构建 Android：无法解析目标

> ID：13624718
> 
> 赞同：2
> 
> 时间：2012-11-29T11:24:58.470
> 
> 标签：android, ant, jenkins

试图在 Jenkins 中用 ant 构建一个 android 项目，但我得到了一个例外。

我可以在控制台中使用“sudo -u jenkins ant debug”重现此错误。

```
/opt/android-sdk-mac_x86/tools/ant/build.xml:539: Unable to resolve project target 'android-17'
    at com.android.ant.GetTargetTask.execute(GetTargetTask.java:160)
    at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
    at sun.reflect.GeneratedMethodAccessor4.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
    at org.apache.tools.ant.Task.perform(Task.java:348)
    at org.apache.tools.ant.Target.execute(Target.java:390)
    at org.apache.tools.ant.Target.performTasks(Target.java:411)
    at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1399)
    at org.apache.tools.ant.Project.executeTarget(Project.java:1368)
    at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41)
    at org.apache.tools.ant.Project.executeTargets(Project.java:1251)
    at org.apache.tools.ant.Main.runBuild(Main.java:809)
    at org.apache.tools.ant.Main.startAnt(Main.java:217)
    at org.apache.tools.ant.launch.Launcher.run(Launcher.java:280)
    at org.apache.tools.ant.launch.Launcher.main(Launcher.java:109) 
```

人们显然认为这是因为它找不到'android-17'的sdk，但是当我用我的普通用户运行相同的命令时（是的，我现在在我的开发机器上运行jenkins确保它有效）它编译得很好。

Jenkins 构建的完整日志：

```
Buildfile: /Users/Shared/Jenkins/Home/jobs/test1/workspace/build.xml

-check-env:
 [checkenv] Android SDK Tools Revision 21
 [checkenv] Installed at /opt/android-sdk-mac_x86

-setup:
     [echo] Project Name: <ProjectName>
  [gettype] Project Type: Application

-pre-clean:

clean:
   [delete] Deleting directory /Users/Shared/Jenkins/Home/jobs/test1/workspace/bin
   [delete] Deleting directory /Users/Shared/Jenkins/Home/jobs/test1/workspace/gen
[getlibpath] Library dependencies:
[getlibpath] No Libraries
   [subant] No sub-builds to iterate on

-set-mode-check:

-set-debug-files:

-check-env:
 [checkenv] Android SDK Tools Revision 21
 [checkenv] Installed at /opt/android-sdk-mac_x86

-setup:
     [echo] Project Name: <ProjectName>
  [gettype] Project Type: Application

-set-debug-mode:

-debug-obfuscation-check:

-build-setup:
     [echo] Resolving Build Target for <ProjectName>...

BUILD FAILED
/opt/android-sdk-mac_x86/tools/ant/build.xml:5309 Unable to resolve project target 'android-17'

Total time: 0 seconds
Build step 'Invoke Ant' marked build as failure
Finished: FAILURE 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T13:48:59.260

哦，我终于想通了。

我在 ANDROID_HOME/platforms 上的权限错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-30T14:51:07.047

转到您的 ANDROID_HOME 目录并为您尝试使用的用户设置读写权限。即Android sdk 目录。（在 Jenkins 情况下，您需要向 Jenkins 用户授予读/写权限。如果您不确定用户，则为每个人设置读/写权限）例如：在我的情况下 ANDROID_HOME= users/localUser/android_sdk_macosx 1）转到 android_sdk_macosx文件夹并为此文件夹和子文件夹设置读/写权限。或者你也可以为每个人设置它。2）转到詹金斯并尝试再次构建。它应该工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T05:48:53.073

我刚遇到你同样的问题。但我发现因为我从 android-15 文件夹中删除了 build.prop,framework.aidl,sdk.properties（我的项目依赖于它。），恢复这些文件解决了我的问题。

# java - 可以使用两个线程访问 LinkedList 中同一对象的不同属性吗？

> ID：13624725
> 
> 赞同：1
> 
> 时间：2012-11-29T11:25:39.727
> 
> 标签：java, multithreading, linked-list

我对多线程系统很陌生，并且对对象的合适数据结构有疑问。

我有一个具有多个属性的对象图像，其中两个是存储图像数据的字节数组数据和存储状态的 int 变量状态。

我有某种形式的传送带架构，这意味着有一个相机线程将数据存储到图像属性中，然后是一个转换器线程，然后是一个处理线程。所以一个线程必须处理前一个线程的输出。

为了避免同步和提高效率，我的想法是有一个`LinkedList<Image>`存储图像对象。网络摄像头线程创建第一个图像对象，分配状态=1（表示数据正在写入），如果完成并转到下一个图像，则分配状态=2。以下转换器线程仅读取状态属性，如果为 1，则休眠或等待（可由网络摄像头线程发出信号），如果为 2，则分配状态 3 并开始工作。完成后，它将设置状态 = 4 并继续下一个图像对象。下一个线程再次读取状态，如果状态 < 4 则将休眠，依此类推。

最后我的问题是，两个不同线程可能同时访问是否会导致问题，同时确保只有一个是写操作，而另一个（读）访问甚至是在不同的属性/变量上进行的（相同的）目的）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T14:14:43.240

即使单个线程修改相同的**共享数据**而其他线程只执行读取，也可能出现竞争和数据损坏。

考虑以下：

```
 Thread 1                       | Thread 2
                                   ...                            | ...  
--> not atomic!                    start writing shared resource  | ...
--> data state is undefined here   ...                            | read shared resource
                                   end writing shared resource    | ... 
```

如果您可以确保在没有任何额外访问（读或写）的情况下对**相同共享数据**进行写访问，那么没有保护就很好。

否则，您需要使用某种锁定机制来保护您的共享资源，例如`semaphore`或`mutex`。从描述听起来像是一个典型的`consumer-producer`问题，看看[Synchronizing producer,consumer and a producer queue](https://stackoverflow.com/questions/3896617/synchronizing-producer-consumer-and-a-producer-queue)和类似的问题。

# design-patterns - 对这位访客的看法

> ID：13624727
> 
> 赞同：0
> 
> 时间：2012-11-29T11:25:51.610
> 
> 标签：design-patterns

典型的访问者基本上根据从接受（对象）开始的类型来调度访问者。

想象一个在 Collection 接口上工作的访问者。

```
enum Visiting {
   STOP
   CONTINUE;
}

Visitor {
   accept( Object );
   Visiting visit( Object );
   Visiting visit( Map );
   Visiting visit( List );
   Visiting visit( Set );
   Visiting visit( Collection );
   Visiting visit( ArrayList).
} 
```

典型访问者中的 >ArrayList< 只会调用 visit(List)。调用 visit(Object) -> visit(Collection) -> visit(List) -> visit(ArrayList) 有什么好处吗？如果任何访问返回 Visiting.STOP 链中的下一个不被调用？

有什么可能的论据会使这成为一个糟糕的选择？

*   (-) 性能，而不是简单地根据类型调用一次访问，整个链都会发生。
*   (+) 易于基于某些超类型集中常用操作，无需重复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T13:39:42.740

> 如果任何访问返回 Visiting.STOP 链中的下一个不被调用？

尝试使用责任链代替访客。您以错误的方式使用访问者，请参考：[http ://en.wikipedia.org/wiki/Visitor_pattern](http://en.wikipedia.org/wiki/Visitor_pattern)

# c# - 以编程方式更改列表项目

> ID：13624731
> 
> 赞同：0
> 
> 时间：2012-11-29T11:26:15.363
> 
> 标签：c#, asp.net, radio-button

目前我正在使用 asp.net 创建一个列表

```
<asp:RadioButtonList ID="formatOfReport" runat="server" Font-Size="Large" 
                  BorderColor="Black" 
                  onselectedindexchanged="formatOfReport_SelectedIndexChanged" 
                  style="width: 124px">
                  <asp:ListItem Selected="True">k</asp:ListItem>
                <asp:ListItem>j</asp:ListItem>

            </asp:RadioButtonList> 
```

我是 c# 的新手，想知道如何以编程方式设置列表项，如上所示

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T11:29:07.660

例如来自`page_load`：

```
protected void Page_Load(object sender, EventArgs e)
{                        
    if(!IsPostBack)
    {
       var item = new ListItem("k", "k");
       item.Selected = true;
       this.formatOfReport.Items.Add(item);
       item  = new ListItem("j", "j")
       this.formatOfReport.Items.Add(item);
    }
} 
```

# php - 当我将我的 html 更新到数据库时，我想禁用 html 标签

> ID：13624732
> 
> 赞同：0
> 
> 时间：2012-11-29T11:26:21.103
> 
> 标签：php, html, mysql

我创建了一个 php 应用程序。我将 html 页面存储在 mysql 中并从 db 中检索。我设计它是为了在页面中删除或添加数据，所以我创建了数据库，所以现在的问题是，当我想编辑放置在 textarea 中的数据时，它会保存和更新，但在 textarea 中它会显示所有带有 html 代码等的文本在整个页面中提取和修改文本很痛苦。

是否有任何方法不会显示 html 标签以及我想要显示或隐藏哪些标签。

是mysql端还是php端的任何解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T11:29:23.230

您可以使用[php strip_tags](http://php.net/manual/en/function.strip-tags.php)方法。

```
<?php
$text = '<p>Test paragraph.</p><!-- Comment --> <a href="#fragment">Other text</a>';
echo strip_tags($text);
echo "\n";

// Allow <p> and <a>
echo strip_tags($text, '<p><a>');
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T11:31:03.747

如果您想保留 HTML 格式，以便当它显示在页面上时它周围有 HTML 标记（这听起来像原始计划），那么您可以使用 WYSIWIG 编辑器。这是一对：

*   [http://www.tinymce.com/](http://www.tinymce.com/)
*   [http://ckeditor.com/](http://ckeditor.com/)

它们都可以配置为允许您想要的任何 HTML 元素。不过，请记住在 PHP 处理时进行验证和验证。我最近开始使用 HTML Purifier 来检查 HTML。

*   [http://htmlpurifier.org/](http://htmlpurifier.org/)

如果您对保持 HTML 格式不感兴趣，那么只需使用`strip_tags()`.

*   [http://php.net/manual/en/function.strip-tags.php](http://php.net/manual/en/function.strip-tags.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T11:35:01.917

您的问题涉及客户端和所见即所得的 JS 库，这将使文本编辑更加舒适。

看看这些解决方案：

*   [WYMeditor](http://www.wymeditor.org)
*   [TinyMCE](http://www.tinymce.com)
*   [CK编辑器](http://ckeditor.com)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T11:35:17.933

您可以解析 HTML DOM，这将允许您添加、删除、编辑任何元素。我会推荐你​​使用[simple_html_dom](http://simplehtmldom.sourceforge.net/) [php 原生 DOM](http://de2.php.net/manual/en/book.dom.php)

这是使用简单 html dom 删除特定 html 标记的示例

```
<?php

$html = new simple_html_dom();
$html->load('<html><body><span>removeme</span></body></html>');
$html->set_callback('remove_tag');

function remove_tag($element)
{
 if($element->tag == 'span'){ $element->outertext = ""; 
} 
```

?>

您还可以使用正则表达式删除特定标签

```
<?php

$html = preg_replace("/<span[^>]+\>/i", "", $html);

?> 
```

# php - 在第 8 行对 \myform.php 中的非对象调用成员函数 escape()

> ID：13624733
> 
> 赞同：-1
> 
> 时间：2012-11-29T11:26:22.960
> 
> 标签：php, wordpress

我正在为 wordpress 制作一个简单的数据输入表单。我将表单提交到以下 php 位：

```
//protect your codes from attacks.
 isset($_POST['exporter']) ? $exporter=$wpdb->escape($_POST['exporter']) : $exporter='';
 isset($_POST['importer']) ? $importer=$wpdb->escape($_POST['importer']) : $importer='';
 isset($_POST['conveyance']) ? $conveyance=$wpdb->escape($_POST['conveyance']) : $conveyance='';
 isset($_POST['origin']) ? $origin=$wpdb->escape($_POST['origin']) : $origin='';
 isset($_POST['dpoe']) ? $dpoe=$wpdb->escape($_POST['dpoe']) : $dpoe='';
 isset($_POST['impcon']) ? $impcon=$wpdb->escape($_POST['impcon']) : $impcon='';
 isset($_POST['container']) ? $container=$wpdb->escape($_POST['container']) : $container='';
 isset($_POST['nopk']) ? $nopk=$wpdb->escape($_POST['nopk']) : $nopk='';
 isset($_POST['tyop']) ? $tyop=$wpdb->escape($_POST['tyop']) : $tyop='';
 isset($_POST['name']) ? $name=$wpdb->escape($_POST['name']) : $name='';
 isset($_POST['botname']) ? $botname=$wpdb->escape($_POST['botname']) : $botname='';
 isset($_POST['quantity']) ? $quantity=$wpdb->escape($_POST['quantity']) : $quantity='';
 isset($_POST['certify']) ? $certify=$wpdb->escape($_POST['certify']) : $certify='';
 isset($_POST['declaration']) ? $declaration=$wpdb->escape($_POST['declaration']) : $declaration='';
 isset($_POST['date']) ? $date=$wpdb->escape($_POST['date']) : $date='';
 isset($_POST['treatment']) ? $treatment=$wpdb->escape($_POST['treatment']) : $treatment='';
 isset($_POST['dutemp']) ? $dutemp=$wpdb->escape($_POST['dutemp']) : $dutemp='';
 isset($_POST['concen']) ? $concen=$wpdb->escape($_POST['concen']) : $concen='';
 isset($_POST['adinfo']) ? $adinfo=$wpdb->escape($_POST['adinfo']) : $adinfo='';
 isset($_POST['insname']) ? $insname=$wpdb->escape($_POST['insname']) : $insname='';
 isset($_POST['place']) ? $place=$wpdb->escape($_POST['place']) : $place='';
 isset($_POST['namedesg']) ? $namedesg=$wpdb->escape($_POST['namedesg']) : $namedesg='';
 isset($_POST['dateissue']) ? $dateissue=$wpdb->escape($_POST['dateissue']) : $dateissue='';
if (is_object($wpdb) && is_a($wpdb, 'wpdb')) {
if (!$wpdb->insert('form',

                        array(
                            'consignor'=>$_POST[exporter]
                            ,'consignee'=>$_POST[importer]
                            ,'conveyance'=>$_POST[conveyance]
                .... ?> 
```

关于我为什么会收到错误的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T11:31:53.077

这是因为 $wpdb。在使用它之前调用它或它的对象之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T11:31:58.913

看起来您的代码位于函数内部，因此`$wpdb`超出范围且无法访问。您需要`global`它才能访问。或者`$wpdb`作为参数传递给你的函数。

```
// at the beginning of your function
global $wpdb; 
```

# iphone - 如何在后台处理调度异步进程？

> ID：13624734
> 
> 赞同：0
> 
> 时间：2012-11-29T11:26:27.310
> 
> 标签：iphone, ios, xcode

我正在使用新的 dispatch_queue 来接收 Xmpp 消息，同时更新我的​​标签栏计数我正在发送通知。但更新我的 Uitabbar 计数需要更多时间。所以我用 dispatch_queue_main() 单独调用通知过程。但它使我的应用程序在更新我的标签栏计数时冻结了几秒钟..

```
dispatch_queue_t exampleQueue = dispatch_queue_create( "xmpp_message", NULL );
dispatch_async(exampleQueue, ^{
// code for proceesing messages....

 dispatch_queue_t queue=dispatch_get_main_queue();
dispatch_async(queue, ^{
    [self sendNotification:msg];
});
}); 
```

任何人都可以帮助解决此问题，以处理通知过程而不会冻结...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T12:21:50.903

上面的语法看起来不错，并采用了适当的技术将任务分派到后台进程，然后将 UI 更新重新分派回主队列。因此，您可能必须扩大调查范围。考虑到这一点，您可能需要考虑：

*   您是否*绝对确定*“处理消息的代码”部分下没有与 UI 更新相关的代码？我见过有人报告无法解释的减速，然后说“哦，我不知道这也包括 Core Graphics”。我知道这不太可能，但请仔细检查。

*   这是一个愚蠢的问题，但你有没有`NSLog`在这两个块的开头写上声明？通过这样做，您可以确认哪个队列是罪魁祸首（如果有的话），更好地了解队列的进入和退出等。不知道您的代码，我会担心“处理消息的代码”花费太长时间。

    所以你可能会：

    ```
    dispatch_queue_t exampleQueue = dispatch_queue_create( "xmpp_message", NULL );
    dispatch_async(exampleQueue, ^{

        NSLog(@"%s dispatched to xmpp_message", __FUNCTION__);

        // code for processing messages....

        dispatch_queue_t queue = dispatch_get_main_queue();
        dispatch_async(queue, ^{

            NSLog(@"%s     re-dispatched to main queue", __FUNCTION__);

            [self sendNotification:msg];

            NSLog(@"%s     finished dispatch to main queue", __FUNCTION__);
        });

        NSLog(@"%s finished dispatched to xmpp_message", __FUNCTION__);
    });

    // if not ARC or supporting iOS versions prior to 6.0, you should release the queue

    dispatch_release(exampleQueue); 
    ```

*   您可能还想确保您没有因自定义队列的串行性质而出现问题。是否需要串行性质，或者您可以考虑并发队列吗？

    所以试试：

    ```
    dispatch_queue_t exampleQueue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0); // or in  recent versions of iOS, you can use dispatch_queue_create( "xmpp_message", DISPATCH_QUEUE_CONCURRENT );
    dispatch_async(exampleQueue, ^{

        NSLog(@"%s dispatched to xmpp_message", __FUNCTION__);

        // code for processing messages....

        dispatch_queue_t queue = dispatch_get_main_queue();
        dispatch_async(queue, ^{

            NSLog(@"%s re-dispatched to main queue", __FUNCTION__);

            [self sendNotification:msg];
        });
    }); 
    ```

*   最后，您可能想尝试使用[Instruments](https://developer.apple.com/library/ios/#documentation/DeveloperTools/Conceptual/InstrumentsUserGuide/Introduction/Introduction.html)中的“Time Profiler”工具运行应用程序。有关如何使用该工具的演示，请参阅有关[构建并发用户界面](https://developer.apple.com/videos/wwdc/2012/?id=211)的 WWDC 2012 会议。

这些是唯一让我跳出来的想法。

# java - Guava : 为 ListenableFuture 回调和监听器设置默认的 Executor

> ID：13624736
> 
> 赞同：4
> 
> 时间：2012-11-29T11:26:29.340
> 
> 标签：java, guava, future

我们的应用程序有许多实现`ListenableFuture`基于 API 的服务，以调整：

```
public interface MyService {
    ListenableFuture<Thing> getMyThing();
    ListenableFuture<?> putMyThing(Thing thing);
} 
```

由于我们的域模型根本不是线程安全的，因此我们在众所周知的单线程上运行大部分代码，除了上述服务`Executor`。我认为，如果服务能够保证添加到`Future`它们生成的 s 的任何侦听器都会被调用，那就太好了`Executor`。

当然，我可以通过调用或使用适当的参数在服务的客户端中很好地执行此操作`ListenableFuture.addListener`，但我的目标是精确地降低客户端代码中的复杂性和错误的可能性，所以我希望监听器当调用这些方法而不传递参数时，调用将在众所周知的情况下发生。`Futures.addCallback``Futures.transform``Executor``Executor``Executor`

所以，现在我一直在以这种方式实现服务的方法：

```
class MyServiceImpl {
    private Executor executor; /* the "main" executor */

    public ListenableFuture<Thing> getMyThing() {
        ListenableFuture<Thing> future = ...; /* actual service call */

        return Futures.transform(future, Functions.<Thing>identity(), executor );
    }
} 
```

首先，这是否有效？从 Guava 源来看，似乎确实如此，但我会很高兴得到某种确认，而且我在考虑对此进行单元测试时有点困难。

此外，我有点担心整个“服务在指定线程上回调（默认情况下）”模式的有用性/成本比。有没有人有这样的经验？这种方法有什么隐藏的陷阱吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T14:55:31.767

难道你不能让你所有的方法都返回一个`ListenableFuture`包装器，比如：

```
import com.google.common.util.concurrent.ForwardingListenableFuture;
import com.google.common.util.concurrent.ListenableFuture;

import javax.annotation.Nonnull;
import java.util.concurrent.Executor;

import static com.google.common.base.Preconditions.checkArgument;
import static com.google.common.base.Preconditions.checkNotNull;

public class ListenableFutureWithFixedExecutor<V> extends ForwardingListenableFuture<V> {

    @Nonnull
    private final ListenableFuture<V> delegate;
    @Nonnull
    private final Executor executor;

    public ListenableFutureWithFixedExecutor(@Nonnull ListenableFuture<V> delegate, @Nonnull Executor executor) {
        this.delegate = checkNotNull(delegate);
        this.executor = checkNotNull(executor);
    }

    @Override
    protected ListenableFuture<V> delegate() {
        return delegate;
    }

    @Override
    public void addListener(Runnable listener, Executor executor) {
        checkArgument(this.executor.equals(executor), "Listeners can only be executed using %s", executor);
        super.addListener(listener, executor);    //To change body of overridden methods use File | Settings | File Templates.
    }

} 
```

`IllegalArgumentException`另一种可能性：当客户端调用`addListener()`不正确的回调时，您可以简单地记录警告，并`super.addListener()`使用正确的执行程序调用，而不是抛出一个。

您甚至可以`<V> void addCallback(FutureCallback<? super V> callback)`使用固定的执行器添加一个将给定回调添加到 Future 的方法。这会让你更流利地使用你的 Future :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T19:09:59.073

您提出的`identity()`解决方案应该有效——有两个例外。

证明：首先，请注意，`Futures.transform`了解输入何时完成的唯一合理方法是通过调用`input.addListener()`. 我们知道这`addListener()`尊重给定的执行者。（如果你不相信我：`ListenableFutureTask`使用`ExecutionList`，它只在两个地方调用监听器：`add()`和。在这两个地方，它都使用给定的执行程序。）因此，在输入完成时运行的`execute()`任何任务都将在给定的执行程序中运行`Future`.

这里的关键词是“在输入`Future`完成时运行”。例外情况：

*   如果有人在完成后添加了一个监听`Future`器，它将在调用的线程中运行`addListener`。
*   如果有人取消了包装器`Future`（与原来相反），监听器将在调用`cancel`.

根据您的应用程序的结构，这些异常可能没问题，但需要牢记。如果它们是一个问题，您可能想要使用`ForwardingListenableFuture`解决方案（如 eneveu's 但显然不那么严格）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T14:33:43.027

我认为您在以下方式中遇到了一个陷阱：侦听器将在 上执行`sameThreadExecutor()`，这意味着它们将在executor 上的*所有相同线程*中执行，而不是像他们应该的那样在同一 executor 中的线程之间分散。

我不相信会有一种方便的方法来做你想做的事情。

# sql - 存储过程将变量值设置为单个列

> ID：13624743
> 
> 赞同：2
> 
> 时间：2012-11-29T11:27:01.167
> 
> 标签：sql, sql-server-2008, stored-procedures

我有`Table structure`一个

```
Empid Int,
EmpName Nvarchar,
Salary Numeric(18,2),
DeptNumber 
```

我有需要 2 个参数的函数。作为 ：

```
ALTER Function [dbo].[GetTotalPrice] 
(
@Salary int,
@DeptNumber int
)
RETURNS int
AS
BEGIN
Declare @TotalSalary int
Select @TotalSalary=@Salary+@DeptNumber 
return @TotalSalary
End 
```

而我的查询是我应该如何开发一个存储过程，它将每个`salary`和`DeptNumber`一个存储过程中，并将其发送到函数并计算一个新的薪水。我曾尝试开发几个 SP，但无法获得任何可能的解决方案。

```
ALTER Proc [dbo].[S7] 
AS
BEGIN
Declare @salary int
Declare @DeptNo int
Select EmpId,EmpName, @salary=salary,@DeptNo=DeptNumber,Salary=dbo.GetTotalPrice(@salary,@DeptNo) 
from dbo.EmpInf
end 
```

当我尝试执行上面的代码时，它给出了以下错误：

```
A SELECT statement that assigns a value to a variable must not be combined with data-retrieval operations. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T11:39:34.200

您正在使用相同`SELECT`的方式将数据放入变量中并从存储过程返回结果集，您不能在同一条语句中同时执行这两种操作。

```
ALTER Proc [dbo].[S7] 
AS
BEGIN
Select EmpId,EmpName, Salary=dbo.GetTotalPrice(salary,DeptNumber) from dbo.EmpInf
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T11:34:18.953

尝试这个

```
 Select EmpId,EmpName,  
 salary=@salary,DeptNumber=@DeptNo,Salary=dbo.GetTotalPrice(@salary,@DeptNo) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T11:41:00.497

错误很明显，可以将两者结合起来

```
Declare @salary int
Declare @DeptNo int,
   @EmpId int, @EmpName varchar(50),
   @Salary int

Select @EmpId=EmpId, @EmpName=EmpName, @salary=salary,@DeptNo=DeptNumber,@Salary=dbo.GetTotalPrice(1000,'XXX') 
from dbo.EmpInf

Select @EmpId As EmpID, @EmpName As EmpName, @Salary As Salary 
```

或者

```
Select EmpID, EmpName, Salary, dbo.GetTotalPrice(1000,'XXX') from dbo.EmpInf 
```

您可以将两者结合起来，在同一个 Select 查询中使用 @XXX 和 XXX。

你要么做`Select @X = value FROM table`OR `Select value From Table`，而不是两者

# android - 是否可以删除 android 地图视图捏缩放的平移？

> ID：13624744
> 
> 赞同：0
> 
> 时间：2012-11-29T11:27:03.317
> 
> 标签：android, google-maps, android-maps

我需要从 mapview 捏缩放中删除平移。

可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T11:31:51.160

通常，捏缩放放大/缩小您两根手指之间的中心点。这就是它所做的一切，你不能阻止它做其他事情。

# java - 在 java 中创建 adobe air 本机扩展

> ID：13624751
> 
> 赞同：0
> 
> 时间：2012-11-29T11:27:33.880
> 
> 标签：java, air, air-native-extension

我必须创建一个本地扩展来访问网络文件。我有一个正在播放的桌面应用程序。网上搜了一下，用java创建了一个air扩展。有很多文档，但它们都适用于 Android 或 iOS。所以它们对于新手来说太复杂了。
您是否知道任何文档或链接简单地解释了如何在 java 上为 Windows 创建 air 扩展？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T14:15:21.470

这是来自 Adob​​e 网站的信息，但永远不要忘记 java API 仅适用于 Android ARM 平台，我的意思是不适用于 Air Apps 和 iOS

[http://help.adobe.com/en_US/air/extensions/WSff7e9115a8550eef-4b2a6195132502c4d38-8000.html](http://help.adobe.com/en_US/air/extensions/WSff7e9115a8550eef-4b2a6195132502c4d38-8000.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-21T13:01:45.153

查看以下两个链接，了解如何创建 .ane 文件的分步过程。 [http://gotoandlearn.com/play.php?id=148](http://gotoandlearn.com/play.php?id=148)
[http://gotoandlearn.com/play.php?id=149](http://gotoandlearn.com/play.php?id=149)

通过下载给出的视频和 .ane 文件，您实际上得到了必须遵循的结构。然后创建一个bat文件保存在.ane代码文件夹中

* * *

然后命令是：
*“位于 airsdk 中的 adt bat 文件的路径” -package* -target ane *“ane 文件名”* *“扩展 xml 的*位置” -swc “.swc 文件的位置” -platform Android-ARM -C ./build /ane/Android-ARM/ .

例如：

"C:\Program Files\Adobe\Adobe Flash Builder 4.7\eclipse\plugins\com.adobe.flash.compiler_4.7.0.349722\AIRSDK\bin\adt.bat" -package -target ane upload.ane ./build/ ane/extension.xml -swc ./build/ane/*.swc -platform Android-ARM -C ./build/ane/Android-ARM/ 。

# mysql - MERGE 语句的语法错误

> ID：13624752
> 
> 赞同：2
> 
> 时间：2012-11-29T11:27:40.353
> 
> 标签：mysql, sql

我正在尝试在 Go 中执行 MERGE 语句：

```
query := "MERGE staged ON (email=$1)" +
" WHEN NOT MATCHED THEN INSERT (email, secret, passwd, ts, newAcct)" +
" VALUES($1,$2,$3,$4,TRUE)" +
" WHEN MATCHED THEN UPDATE staged SET" +
" newAcct=TRUE, existingUser=NULL, secret=$2, ts=$4"

_, err := db.Exec(query, email, secret, passwd, time.Now()) 
```

但我收到了这个错误：

```
pq: S:"ERROR" F:"scan.l" R:"scanner_yyerror" L:"1001" M:"syntax error at or near \"MERGE\"" P:"1" C:"42601" 
```

在 MySQL 中也会发生同样的情况：

```
Error 1064: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'MERGE staged ON (email=?) WHEN NOT MATCHED THEN INSERT (email, secret, passwd, t' at line 1 
```

怎么了？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-29T11:29:37.707

`MERGE`不支持`MySQL`，等价于

**[插入 ... 在重复密钥更新时](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)**

尝试这个，

```
INSERT INTO tableName (email, secret, passwd, ts, newAcct) 
VALUES ($1,$2,$3,$4,TRUE)
ON DUPLICATE KEY UPDATE newAcct=TRUE, existingUser=NULL, secret=$2, ts=$4 
```

但一定`email`要设置为`Primary Key`or `Unique`。

# php - Symfony2：复选框和表单->setData()

> ID：13624757
> 
> 赞同：1
> 
> 时间：2012-11-29T11:27:48.403
> 
> 标签：php, symfony

我有一个班级表格：

```
class MyForm extends AbstractType
{
    public function buildForm(FormBuilder $builder, array $options = array())
    {
        $builder->add('types', 'choice', array(
            'choices'       => $options['data']['types'],
            'required'      => false,
            'multiple'      => true,
            'expanded'      => true,
        ));

        $builder->add('dateFrom', 'date', array(
            'years' => range(date('Y') - 5, date('Y')),
            'required' => false,
        ));
    }
} 
```

在我的控制器中，我接下来要做：

```
$form = $this->createForm(new TransSearchForm, array(
    'types' => $myCheckboxArray
));

// getting form data from required
$data = $this->getRequest()->get($form->getName());

/*... some changes dateFrom param in $data array ...*/

$form->setData($data); 
```

并且选中的复选框未选中（但如果我使用

```
$form->bindRequest($this->getRequest()); 
```

所有工作正常 - 检查复选框。但是我的 dateFrom 参数没有改变......

所以，我需要：1）手动更改 dateFrom 参数 2）查看发送表单后检查的复选框

使用 bindRequest 或 setData - 无论如何。有人可以帮助我吗？

# c++ - 如何使用嵌套在没有名称的结构中的c联合

> ID：13624760
> 
> 赞同：23
> 
> 时间：2012-11-29T11:27:55.347
> 
> 标签：c++, c, unions, anonymous

我正在研究所谓的 Hotspot 开源项目，并查看实现我发现 struct 中的一个讨厌的嵌套联合看起来像这样：

```
typedef struct RC_model_t_st
{
    union
    {
        struct block_model_t_st *block;
        struct grid_model_t_st *grid;
    };
    /* block model or grid model    */
    int type;
    thermal_config_t *config;
}RC_model_t; 
```

据我所知，在 C/C++ 中，联合是不可行的。那么有人如何使用以这种方式声明的联合以及出于什么目的？

谢谢！

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-11-29T11:36:32.257

这是一个*匿名工会。*在 C++ 中，根据 [class.union] 第 5 段：

> 为了名字查找的目的，在匿名联合定义之后，匿名联合的成员被认为是在声明匿名联合的范围内定义的

这意味着您可以像访问其成员一样访问其成员`RC_model_t_st`。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-29T11:30:58.307

在不确定且未尝试的情况下：

工会本身是不可访问的，但它的成员是可访问的。

因此，您应该能够参考`obj.block`和`obj.grid`

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-02-14T05:09:05.177

为了详细说明 Angew 引用有关匿名联合和结构的标准提供的答案，我想提供一个 C 源代码示例，该示例生成的输出显示如何在 a`struct`和 a`union`组成的`struct`组件中分配值`union`。

Angew引用的标准是：

> 出于名称查找的目的，在匿名联合定义之后，匿名联合的成员被认为是在声明匿名联合的范围内定义的。

由命名和匿名结构和联合组成的源代码`struct`如下所示。这是使用 Visual Studio 2005 并`#pragma (pack, 1)`用于对齐`char`边界上的所有内容，以便没有内存漏洞。还定义了一个简单的 C 预处理器宏，以使输出更清晰且更易于编码。

```
typedef unsigned char UCHAR;

// use of Microsoft Visual Studio pragma to force char alignment for the struct.
#pragma pack(push, 1)
const struct {
    union {
        const UCHAR myArray[];  // this array shares memory with struct following
        struct {
            const UCHAR iOne;
            const UCHAR iTwo;
            const UCHAR iThree;
        };  // anonymous struct accessed by specifying Things.
    };      // anonymous union accessed by specifying Things.
//  const UCHAR myArray[];   // will cause error - "error C2020: 'myArray' : 'struct' member redefinition"
    union {
        const UCHAR myArray[];  // this array shares memory with struct following
        struct {
            const UCHAR iOne;
            const UCHAR iTwo;
            const UCHAR iThree;
        } s;    // named struct accessed by specifying Things.u.s
    } u;        // named union accessed by specifying Things.u
} Things = {1, 2, 4, 8, 9, 10, 22, 23, 24, 25};
#pragma pack(pop)

// a little helper macro to make the output easier to code.
#define PRINTF_VAL(x) printf ("%s %d \n", #x, x)

int itSelf (UCHAR iMask)
{
    int iMatch = -1;

    int jj = 0;
    jj = Things.myArray[0]; PRINTF_VAL(Things.myArray[0]);
    jj = Things.myArray[1]; PRINTF_VAL(Things.myArray[1]);
    jj = Things.myArray[2]; PRINTF_VAL(Things.myArray[2]);
    jj = Things.myArray[3]; PRINTF_VAL(Things.myArray[3]);
    jj = Things.myArray[4]; PRINTF_VAL(Things.myArray[4]);
    jj = Things.iOne; PRINTF_VAL(Things.iOne);
    jj = Things.iTwo; PRINTF_VAL(Things.iTwo);
    jj = Things.iThree; PRINTF_VAL(Things.iThree);

    jj = Things.u.myArray[0]; PRINTF_VAL(Things.u.myArray[0]);
    jj = Things.u.myArray[1]; PRINTF_VAL(Things.u.myArray[1]);
    jj = Things.u.myArray[2]; PRINTF_VAL(Things.u.myArray[2]);
    jj = Things.u.myArray[3]; PRINTF_VAL(Things.u.myArray[3]);
    jj = Things.u.myArray[4]; PRINTF_VAL(Things.u.myArray[4]);
    jj = Things.u.s.iOne; PRINTF_VAL(Things.u.s.iOne);
    jj = Things.u.s.iTwo; PRINTF_VAL(Things.u.s.iTwo);
    jj = Things.u.s.iThree; PRINTF_VAL(Things.u.s.iThree);

    return iMatch + 1;
} 
```

此函数生成的输出如下所示：

```
Things.myArray[0] 1
Things.myArray[1] 2
Things.myArray[2] 4
Things.myArray[3] 8
Things.myArray[4] 9
Things.iOne 1
Things.iTwo 2
Things.iThree 4
Things.u.myArray[0] 8
Things.u.myArray[1] 9
Things.u.myArray[2] 10
Things.u.myArray[3] 22
Things.u.myArray[4] 23
Things.u.s.iOne 8
Things.u.s.iTwo 9
Things.u.s.iThree 10 
```

输出显示了 main 的各个组件之间的重叠，这`struct`是`Things`由使用联合引起的。您还可以查看匿名`struct`和`union`的组件与命名`struct`和的组件是如何被引用的`union`。

`const UCHAR myArray[];`也只是为了好玩，我尝试在匿名`union`包含之后添加一个数组定义，`const UCHAR myArray[];`看看会发生什么。编译器报错`error C2020: 'myArray' : 'struct' member redefinition`. `struct`添加在上面的定义中被注释掉`Things`。然而，由于第二次使用`const UCHAR myArray[];`是在一个命名`union`的编译中，因为第二次使用是通过指定联合的名称来访问的。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-03-17T09:19:53.357

此处的代码 ( [https://gist.github.com/klange/4042963](https://gist.github.com/klange/4042963) ) 显示了如何访问 struct 中的匿名联合。您只需访问嵌套联合的成员，就好像它们是结构的成员一样。

```
typedef struct {
    union {
        char * company;
        char * school;
        char * project;
    };
    union {
        char * location;
        char * url;
    };
    union {
        char * title;
        char * program;
    };

    time_t started;
    time_t left;

    char * description[];
} thing_t;

typedef thing_t job_t;

job_t yelp = {
    .company  = "Yelp, Inc.",
    .location = "San Francisco, CA",
    .title    = "Software Engineer, i18n",
    .started  = 1339977600,
    .left     = CURRENT,
    .description = {
        "Developed several internal tools and libraries",
        "Provided critical input and design work for Yelp's launch in Japan",
        NULL
    }
}; 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-11-29T11:47:39.873

在匿名联合中声明的名称可以直接使用，就像非成员变量一样。这样做的一个很好的理由是节省内存。

```
#include <iostream>

int main(int argc, char **argv) {
   union {
      double first;
      double second;
   };

   first = 10.001;
   second = 3.141592;
   std::cout << first << " " << second << std::endl;

   first = 10.002;
   std::cout << first << " " << second << std::endl;
} 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-11-29T11:50:03.797

首先我想说**一个联合，是不同类型变量的集合，就像一个结构。但是，使用联合，您一次只能将信息存储在一个字段中。**

工会基本上用于节省内存，**它的大小等于工会的最大成员。**

**要访问联合的数据字段，请使用点运算符 (.)，就像您对结构使用的一样，@Atmocreations 对此进行了解释。当一个值被分配给一个成员时，其他成员会被淘汰，因为它们共享相同的内存。**

作为工会可能有用的一个例子是

```
union time    
        {
        long time_in_sec;
        double time_in_mili_sec;
        }mytime; 
```

.... 上面的联合可用于存储当前时间（以秒为单位）以将时间精确到一秒。或者它可以用来保持精确到毫秒的时间。据推测，有时您会想要其中一个，但不是两者兼而有之。这个声明应该看起来很熟悉。它与结构定义相同，但使用关键字 union 而不是 struct。

更多信息[http://msdn.microsoft.com/en-us/library/5dxy4b7b(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/5dxy4b7b(v=vs.80).aspx)

# android - android飞行图片动画

> ID：13624764
> 
> 赞同：0
> 
> 时间：2012-11-29T11:28:11.510
> 
> 标签：android, animation

我想创建一个图片动画，比如说，一个圆圈（这是一个 imageView）在指定区域内的屏幕上飞过。不只是在其他位置消失和重新出现，而是在屏幕上平滑移动。有人可以给我一些基本的想法如何实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T15:38:57.740

您可以使用帧动画。

像：

```
<?xml version=”1.0″ encoding=”utf-8″?>
<animation-list xmlns:android=”http://schemas.android.com/apk/res/android”id=”selected”
 android:oneshot=”false”&gt;        
 <item android:drawable=”@drawable/ball1″ android:duration=”50″ />
 <item android:drawable=”@drawable/ball2″ android:duration=”50″ />
 <item android:drawable=”@drawable/ball3″ android:duration=”50″ />
 <item android:drawable=”@drawable/ball4″ android:duration=”50″ />
 <item android:drawable=”@drawable/ball5″ android:duration=”50″ />
 <item android:drawable=”@drawable/ball6″ android:duration=”50″ />
</animation-list> 
```

您可以绘制图像/位图并将其用作框架并根据您的要求设置时间段和位置。您可以使用插值器来提供所需的效果。有许多类型的插值器可用。您可以根据需要使用所需的插值器。

# ruby-on-rails - 如何为@post.tags.map 之类的东西编写规范？

> ID：13624766
> 
> 赞同：0
> 
> 时间：2012-11-29T11:28:15.343
> 
> 标签：ruby-on-rails, rspec

**我在Post**和**Tag**模型之间有一个多对多的关联 。然后，我的帖子视图中有以下内容：

**帖子/show.html.erb：**

```
<p><%= raw @post.tags.map { |t| link_to t.name, tag_path(t.name) }.join(', ') %></p> 
```

这是我写的规范：

**post_pages_spec.rb：**

```
 describe "show page" do
    let!(:post) { FactoryGirl.create(:post, user:        user,
                                            title:       "Lorem",
                                            content:     "Lorem ipsum",
                                            category_id: category.id,
                                            tag_list:     "#{tag.id}") }

    before do 
      sign_in user
      visit post_path(post)
    end

    it { should have_selector('h1',       text: post.title) }
    it { should have_selector('title',    text: post.title) }
    it { should have_link(post.user.name, href: user_path(user)) }
    it { should have_selector('p',        text: post.content) }
    it { should have_selector('p',        text: post.category.name) }
    it { find("p").should have_content(post.tags.map { |t| t.name }.join(", ")) }
    .
    .
    . 
```

我收到此错误：

> 失败：
> 
> 1) 帖子页面显示页面失败/错误：它 { find("p").should have_content(post.tags.map { |t| t.name }.join(", ")) } 期望有内容“ 1, tag28" in "Lorem ipsum" # ./spec/requests/post_pages_spec.rb:28:in `block (3 levels) in '

该代码在真实站点中有效，但正如您所见，规范失败了。编写此规范的正确方法是什么？

**编辑：**

后模型的示例（以防万一）：

```
class Post < ActiveRecord::Base
  include ActionView::Helpers

  attr_accessible :title, :content, :category_id, :tag_list

  has_many :taggings, :dependent => :destroy  
  has_many :tags, :through => :taggings
  .
  .
  . 
```

**现场输出：**

```
 <p><a href="/tags/inkscape">inkscape</a>, <a href="/tags/gimp">gimp</a></p> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T12:07:27.793

**更新**

从评论线程中，我们发现用`find`简单的`have_selector`pass 替换了：

```
it { should have_selector('p', text: post.tags.map { |t| t.name }.join(", ")) } 
```

目前尚不清楚为什么`find('p').should have_content(...)`不起作用。我测试了相同类型的视图（使用`<p>`包含链接列表的标签），发现该`find('p').should ...`模式工作正常，因此您的代码中发生了一些有趣的事情。`have_content`它可能与Capybara 2.0 中的问题相关，也可能不相关，我将在下面讨论。

如果有人有任何想法，请分享！这是我能提供的最好的。

**原始答案**

Capybara 2.0 中的新文本匹配器[排除了不可见的内容](https://github.com/jnicklas/capybara/issues/844)，产生了一些[不直观的结果](https://github.com/jnicklas/capybara/issues/844#issuecomment-10810708)：

```
it { should have_selector('title', text: 'Some Title') } # <= fails
it { should have_selector('title') }                     # <= passes
it { should have_text('Some Title') }                    # <= passes 
```

并且，与这个问题中的案例相关，[这个](https://github.com/jnicklas/capybara/issues/844#issuecomment-10595225)：

```
find("title").should have_content("some text") # <= fails 
```

另请参阅这篇文章：[如何使用 Capybara 2.0 测试页面标题？](https://stackoverflow.com/questions/13573525/rspec-capybara-2-0-tripping-up-my-have-selector-tests/13574731#13574731)

如果`page.body.should ...`正在工作但`page.should ...`（或以另一种形式，`subject { page} ; it { should ... }`）不是，那么也许这就是问题所在。请注意，它`page.body`是一个 HTML 字符串，而`page`它是一个`Capybara::Session`，它们是完全不同的，尽管在 Capybara 2.0 中似乎至少你可以满足你的期望。我认为`page.body`包括*所有*HTML，因此绕过了可见性问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T11:50:37.920

如果您想将`it { ... }`构造用于您的规范，`it`应在顶部定义，如：

```
subject { page } 
```

我不记得请求规范的默认主题是什么，但通常我会`subject`按照描述进行定义。

# audio - 如何将采样率频率除以 10 个频段以进行均衡

> ID：13624767
> 
> 赞同：0
> 
> 时间：2012-11-29T11:28:18.437
> 
> 标签：audio, signal-processing, sample-rate

如何将采样率频率除以 10 个频段以进行均衡。例如，我有 44100 赫兹和每个样本 1 个字节的音频 pcm。我如何了解哪个样本与指定波段相关。以及如何将样本划分为波段。

你能给我解释或链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T12:00:47.147

有两种常见的方法：

1.  使用[滤波器组](http://en.wikipedia.org/wiki/Filter_bank)。您需要设计 10 个[带通滤波器](http://en.wikipedia.org/wiki/Bandpass_filter)。所有滤波器都接收全带宽输入，每个滤波器的输出是一个仅包含该频段感兴趣的频率的子频段。出于均衡目的，您可以缩放每个滤波器输​​出的幅度，然后重新组合缩放的输出。

2.  使用[FFT + IFFT](http://en.wikipedia.org/wiki/Fft)。使用（前向）FFT 将您的时域数据转换为频域。修改每个频域 bin 中的幅度。应用逆 FFT 将均衡数据返回到时域。您需要选择足够大的 FFT 大小 (N) 以获得均衡频带所需的频率分辨率。您还需要使用重叠技术来避免连续帧之间的不连续性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T08:41:37.630

搜索“正交镜过滤器”或“完美重建”。这篇论文看起来是一个很好的起点：

[http://authors.library.caltech.edu/5463/1/VAIieeeasspm87.pdf](http://authors.library.caltech.edu/5463/1/VAIieeeasspm87.pdf)

# c# - 三元运算符未按预期工作

> ID：13624772
> 
> 赞同：1
> 
> 时间：2012-11-29T11:28:23.770
> 
> 标签：c#

我正在使用此代码将结果显示为偶数或奇数，而不是此处的真假：

```
Console.WriteLine(" is " + result == true ? "even" : "odd"); 
```

因此我使用三元运算符，但它抛出错误，这里有一些语法问题但我无法捕捉到它。提前致谢

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

    namespace ConsoleApplicationForTesting
    {
        delegate int Increment(int val);
        delegate bool IsEven(int v);

 class lambdaExpressions
    {
        static void Main(string[] args)
        {

          Increment Incr = count => count + 1;

          IsEven isEven = n => n % 2 == 0;

           Console.WriteLine("Use incr lambda expression:");
           int x = -10;
           while (x <= 0)
           {
               Console.Write(x + " ");
               bool result = isEven(x);
               Console.WriteLine(" is " + result == true ? "even" : "odd");
               x = Incr(x);
           } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T11:36:36.287

看看你得到的错误：

> 运算符“==”不能应用于“字符串”和“布尔”类型的操作数

那是因为缺少括号。它是连接字符串和布尔值，产生一个字符串值，你不能将它与`bool`.

要修复它，请执行以下操作：

```
Console.WriteLine(" is " + (result == true ? "even" : "odd")); 
```

进一步澄清。

```
bool result = true;
string strTemp = " is " + result; 
```

上面的语句是一个有效的语句并产生一个字符串`is True`，所以你的语句当前看起来像：

```
Console.WriteLine(" is True" == true ? "even" : "odd"); 
```

字符串和 bool 之间的上述比较是无效的，因此您会收到错误消息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-29T11:30:36.217

你需要括号。`" is " + (result ? "even" : "odd" );`

三元运算符的优先级低于浓度（参见[MSDN 上的优先级表](http://msdn.microsoft.com/en-us/library/6a71f45d.aspx)）。

您的原始代码说 combine`" is " + result`然后比较`true`.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-29T11:30:51.053

运算符 + 的优先级高于 ==。要修复它，只需在三元表达式周围加上括号：

```
Console.WriteLine(" is " + (result == true ? "even" : "odd")); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-29T11:34:46.733

这是因为**[运算符优先级](http://msdn.microsoft.com/en-us/library/aa691323%28v=vs.71%29.aspx)**。你的表情

```
" is " + result == true ? "even" : "odd" 
```

被解释为

```
(" is " + result) == true ? "even" : "odd" 
```

因为`+`具有比 更高的优先级`==`。使用括号或单独的变量来避免这种行为。

```
" is " + (result == true ? "even" : "odd") 
```

或者

```
var evenOrOdd = result == true ? "even" : "odd";
... " is " + evenOrOdd ... 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-11-29T11:30:27.340

试试看：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace ConsoleApplicationForTesting
{
    delegate int Increment(int val);
    delegate bool IsEven(int v);

 class lambdaExpressions
{
    static void Main(string[] args)
    {

      Increment Incr = count => count + 1;

      IsEven isEven = n => n % 2 == 0;

       Console.WriteLine("Use incr lambda expression:");
       int x = -10;
       while (x <= 0)
       {
           Console.Write(x + " ");
           bool result = isEven(x);
           Console.WriteLine(" is " + (result == true ? "even" : "odd"));
           x = Incr(x);
       } 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-11-29T11:34:31.897

```
Console.WriteLine(" is {0}", result ? "even" : "odd"); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-11-29T11:30:22.007

你错过了一个括号：

```
Console.WriteLine(" is " + (result == true ? "even" : "odd")); 
```

编译器可能会抱怨`" is " + result`，并且您不能添加字符串和布尔值。通过添加括号，您可以对表达式属性进行分组，编译器很高兴。你也是。

# bash - 如何将命令输出的第二行读入 bash 变量？

> ID：13624774
> 
> 赞同：15
> 
> 时间：2012-11-29T11:28:29.890
> 
> 标签：bash

我有一个打印多行的命令，我确实想将第二行放入 bash 变量中。

喜欢`echo "AAA\nBBB"`，我想要一个 bash 命令，它会放入`BBB`一个 bash 变量。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-29T11:33:48.700

与`sed`：

```
var=$(echo -e "AAA\nBBB" | sed -n '2p') 
```

与`awk`：

```
var=$(echo -e "AAA\nBBB" | awk 'NR==2') 
```

然后简单地回显您的变量：

```
echo "$var" 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-29T11:32:39.730

调用`read`两次：

```
echo -e "AAA\nBBB" | { read line1 ; read line2 ; echo "$line2" ; } 
```

请注意，您需要`{}`确保两个命令都获得相同的输入流。此外，在 之外无法访问变量`{}`，因此这**不起作用**：

```
echo -e "AAA\nBBB" | { read line1 ; read line2 ; } ; echo "$line2" 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-29T11:33:31.010

您可以使用`sed`：

```
SecondLine=$(Your_command |sed -n 2p) 
```

例如：

```
 echo -e "AAA\nBBBB" | sed -n 2p 
```

根据要打印的行更改数字。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-29T12:26:42.803

使用带有参数扩展的数组来避免子shell：

```
str="AAA\nBBB"
arr=(${str//\\n/ })
var="${arr[1]}"
echo -e "$str" 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-29T11:32:14.407

您可以通过头/尾管道输出来做到这一点 -`var=$(cmd | tail -n +2 | head -n 1)`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-29T11:31:59.177

像这样：

```
var=$(echo -e 'AAA\nBBB' | sed -n 2p)
echo $var
BBB 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-29T11:36:59.293

在 bash 脚本中：变量=`echo "AAA\nBBB" | awk "NR==2"`

# drupal - 如何在基本页面内容 DRUPAL 上添加图像

> ID：13624779
> 
> 赞同：0
> 
> 时间：2012-11-29T11:28:44.377
> 
> 标签：drupal, drupal-7

我正在尝试在文章的内容中添加图像，但我不知道将 src 指向哪里....

```
<div class="galeria-servicios"><ul><li><p><img src="../images/albanyileria.jpg" /></p><p>Descripción imagen 1</p></li></ul></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T11:36:22.737

试试这个

```
<img src="/images/albanyileria.jpg" /> 
```

`images`如果是根目录中的文件夹，它应该可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T11:37:15.800

默认情况下，drupal 允许您使用过滤的 HTML，其中包括去除标签的许多其他内容。

有很多方法可以做到这一点。一种方法是让您指定图像的绝对 url。第二个将涉及您为图像创建一个字段并将其添加到那里，然后为显示设置主题以满足您的需求（如果它是一个图像或只是几个图像，效果最好。）

第三种方法将涉及使用图像插入模块和所见即所得的编辑器将图像插入到文章中。最后，如果您对 php 有足够的信心，您可以在那里打印图像。（这不是首选的做事方式）

我认为 WYSIWYG 编辑器和图像插入模块。他们在 drupal 网站上有很好的记录。

# java - 如何获取扩展名错误的上传文件的正确文件类型？

> ID：13624780
> 
> 赞同：0
> 
> 时间：2012-11-29T11:28:44.360
> 
> 标签：java, .net

例如。我们可以将a.txt文件名改为a.doc。但文件类型仍然是“文本文档”，它没有转换为“文档”文件。所以，我想要编码来识别此类文件的类型。在这种情况下，“a.doc”文件应将文件类型返回为“文本文档”。不像“医生”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T11:58:11.660

据我所知，只有一种方法：您必须通过文件的内容来识别文件的类型。

一种通用的处理方法是不查看整个文件，而只查看前 X 个字节（通常是文件头）并尝试在其中找到可识别的标记。例如，许多文件类型以标识字节序列开头。

# jquery - 您如何使 Jquery UI Button 具有 32x32 像素的非默认图标？

> ID：13624781
> 
> 赞同：1
> 
> 时间：2012-11-29T11:28:44.453
> 
> 标签：jquery, css, jquery-ui

我想在 Jquery Button 中使用我自己的 32 x 32 像素图标？
这可能吗？我可以通过将图标的背景大小强制为 16x16 来使其工作，但它太小了。

```
.ui-icon-custom-risk { background-size:16px 16px; background-image: url(icons/Current_Risk.png) !important; }
.ui-icon-custom-matrix { background-size:32px 32px;; background-image: url(icons/Current_matrix.png) !important; } 
$('#btn1').button({
   label: 'Risk',
   icons: {primary: 'ui-icon-custom-risk'}
});
$('#btn2').button({
    text: false,
    icons: {
         primary: "ui-icon-custom-matrix"  
    }
}); 
```

# html - CSS让文本在列表中与自定义项目符号正确对齐

> ID：13624785
> 
> 赞同：5
> 
> 时间：2012-11-29T11:29:06.093
> 
> 标签：html, css

我试图让列表中的文本正确对齐，但我无法正确对齐。

![在此处输入图像描述](../Images/a809ec6d97e1301050eda0e0ce5428a6.png)

如您所见，文本略微偏离并从“图像项目符号”基线开始。我希望它在中间。

来源：

```
//CSS
ul  {
    list-style-image:url(image/li.png);
    list-style-position:outside;
    margin:0; padding:0;
}
ul li {
    margin:0; padding:0;
}

//HTML
<ul>
   <li>Item 1</li>
   <li>Item 2</li>
   <li>Item 3</li>
</ul> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T11:32:18.600

**现在定义**您的`li` **背景图像**并`background position`根据**您的设计定义**

```
ul  {
    list-style:none;
     margin:0; padding:0;
}
ul li {
    margin:0; padding:0;
  background:url('') no-repeat 0 0;
  padding-left:40px;  // according to your image with
  min-height:40px; // according to your image height
} 
```

***[演示](http://tinkerbin.com/vU0g3iCF)***

[**DEMO2**](http://tinkerbin.com/pX8ZYIgh) **根据 OP 的确切要求**

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-29T11:31:46.120

您必须将 li 元素的 line-height 属性设置为与自定义图标的高度相同。

例如，如果您的图标高度为 32px，您应该写：

```
ul li {
  line-height: 32px;
} 
```

最好使用 id 来标识 ul 元素，否则最终可能会影响文档中的所有 ul。

# javascript - 带有 Bootstrap 弹出窗口的 jQuery UI 滑块在幻灯片事件上发生变化

> ID：13624790
> 
> 赞同：1
> 
> 时间：2012-11-29T11:29:23.517
> 
> 标签：javascript, twitter-bootstrap, jquery-ui-slider

我在使用引导程序和 jQueryUI 时遇到问题，我认为它更多的是一个实现问题。

我正在尝试将引导弹出框添加到 jQueryUI 滑块，然后在滑块的附带事件中我试图更改弹出框的文本

以下是我到目前为止的代码。

```
<Script type="text/javascript">
    jQuery(function () {
    jQuery("#slider1").slider({
        value: 5,
        min: 0,
        max: 10,
        step: 1,
        slide: function (event, ui) {
            switch(ui.value){
                case 0:
                    jQuery("#slider1").data('popover').options.content = 'new content 0';
                break;
                case 1:
                    jQuery("#slider1").data('popover').options.content = 'new content 1';
                break;
                case 2:
                    jQuery("#slider1").data('popover').options.content = 'new content 2';
                break;
                case 3:
                    jQuery("#slider1").data('popover').options.content = 'new content 3';
                break;
                case 4:
                    jQuery("#slider1").data('popover').options.content = 'new content 4';
                break;
                case 5:
                    jQuery("#slider1").data('popover').options.content = 'new content 5';
                break;
                case 6:
                    jQuery("#slider1").data('popover').options.content = 'new content 6';
                break;
                case 7:
                    jQuery("#slider1").data('popover').options.content = 'new content 7';
                break;
                case 8:
                    jQuery("#slider1").data('popover').options.content = 'new content 8';
                break;
                case 9:
                    jQuery("#slider1").data('popover').options.content = 'new content 9';
                break;
                case 10:
                    jQuery("#slider1").data('popover').options.content = 'new content 10';
                break;
            }
            jQuery("#slider1").find(".ui-slider-handle").text(ui.value);
            jQuery("#ctl00_MainContent_rptQuestions_ctl00_sdrQuestion_hdnValue").val(ui.value);
        }
    });
    jQuery("#amount1").val("£" + jQuery("#slider1").slider("value"));
});
jQuery(document).ready(function() {
    var value = jQuery("#slider1").slider("option","value");
    jQuery("#ctl00_MainContent_rptQuestions_ctl00_sdrQuestion_hdnValue").val(value);
    jQuery("#slider1").popover({title: 'Twitter Bootstrap Popover 5', content: "It's so simple to create a tooltop for my website!"});
    jQuery("#slider1").popover('show');
    jQuery("#slider1").find(".ui-slider-handle").text(value); 
}); 
```

所以基本上上面的代码所做的就是设置一个从 0 到 10 的滑块，增量为 1，然后我在滑块句柄上设置一个标签以显示当前的 ui 值，并在幻灯片事件上更改它。我遇到的问题是移动滑块时引导程序没有改变

引导弹出窗口正在初始化，并显示页面加载时，正确的值，调试JS时，switch语句被命中并且值被传入，它似乎并没有改变bs文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T20:55:25.593

好吧，弹出窗口不会收到您更改选项的通知。尝试调用`setContent`：

```
var popover = jQuery("#slider1").data('popover');
popover.options.content = 'new content 10';
popover.setContent(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T09:06:28.730

好的，所以自从发布问题以来我一直在研究这个问题，我确实找到了解决方法

所以在我添加的 switch 语句中

```
 case 0:
                       jQuery("#slider1").popover('destroy');
                       jQuery("#slider1").popover({title: 'Twitter Bootstrap Popover 0', content: "It's so simple to create a tooltop for my website!", animation: false});
                       jQuery("#slider1").popover('show');
                   break; 
```

然后我对 0 - 10 做了同样的事情，也通过使动画为假，一旦值改变弹出框消失，这正是我想要的。

我唯一遇到的小问题是，当在页面初始化时加载弹出框时，弹出框会出现在它应该出现的位置稍上方，然后当滑块移动时，弹出框会下降一点，但我确定我可以玩弄它并让它出现在同一个地方。

希望这可以帮助任何有同样问题的人

干杯乔。

# ios - 应用程序处于后台时的连接状态和 XMPP 处理

> ID：13624800
> 
> 赞同：2
> 
> 时间：2012-11-29T11:29:53.080
> 
> 标签：ios, sockets, xmpp

我有一个 ios 应用程序，可以向/从 xmpp 服务器发送/接收消息。应用程序的 3 个主要状态是：

1.  如果此应用程序处于活动状态，它会保持与服务器的持久连接，并通过此争用发送/接收消息。

2.  如果退出此应用程序，则连接断开；xmpp 服务器可以通过 APNS 将消息推送到该用户的 iphone。

3.  如果应用切换到后台，但没有退出；连接没有断开，xmpp服务器也可以向这个应用发送消息，但是这个应用可以接收这些消息，直到切换到活动状态。

WRT 3个状态，我有一个问题：
当应用程序切换到后台时，连接没有断开，应用程序可以接收这些消息，然后通过本地通知通知用户吗？如果可能，我该怎么办？或者，在这种情况下，我应该通过 APNS 通知用户吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T12:15:21.360

如果我没记错的话，当应用程序切换到后台时，连接会在几秒/分钟后丢失。除非您已将您的应用标记为支持 VOIP。

也许您可以通过以下链接：

*   [应用程序在后台时如何处理套接字连接的事件？](https://stackoverflow.com/questions/11032745/how-to-handle-socket-connections-events-when-app-is-in-background)
*   [iOS 应用程序如何在后台无限期地保持 TCP 连接处于活动状态？](https://stackoverflow.com/questions/5840365/how-can-an-ios-app-keep-a-tcp-connection-alive-indefinitely-while-in-the-backgro)

# c# - 使用 javascript 打印图像时出现问题

> ID：13624803
> 
> 赞同：3
> 
> 时间：2012-11-29T11:30:06.467
> 
> 标签：c#, asp.net

大家好，我已经编写了一个使用javascript打印图像的代码，如下所示

```
 <script type="text/javascript">
    function printIt() {
        var win = window.open('', 'popup', 'location=1,status=1,scrollbars=1,width=800,height=600');
        if (win) {
            var imageControl = document.getElementById('<%=chkImage.ClientID%>').src;
            win.document.write('<img src="' + imageControl + '">');
            win.document.close();
            win.focus();
            win.print();
        }
        return false;
    }
</script> 
```

我的图像控件定义如下

`<asp:Image ID="chkImage" runat="server" ImageUrl="~/CheckPreview.aspx" />`

但是在打印时，我会根据图像中的附件在纸上获得一些额外的字段，有人可以告诉我如何在打印时避免这些字段![在此处输入图像描述](../Images/90ce2eb6c15192b84723282f8a1da3d8.png)

我的额外字段是我用红色标记的我不想打印那些

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T11:41:10.647

你的意思是打印页面的特殊部分？如果这是正确的。您可以为此使用打印 css，您可以使用一些打印 javascript 插件，例如 JQuery 打印插件。

试试[这个](http://forums.asp.net/p/1545456/3781791.aspx#3781791)或[这个](http://forums.asp.net/p/1535183/3733113.aspx#3733113)

或者您可以通过 javascript 方法将打印内容读取到新页面。

```
<script language="javascript">
function CallPrint(strid)
{
var prtContent = document.getElementById(strid);
//var WinPrint = window.open('');
var WinPrint = window.open('','','letf=0,top=0,width=1,height=1,toolbar=0,scrollbars=0,status=0');
WinPrint.document.write(prtContent.innerHTML);
WinPrint.document.close();
WinPrint.focus();
WinPrint.print();
WinPrint.close();
// prtContent.innerHTML = strOldOne;
}

<a href="javascript:CallPrint('DivContent')"><img src="images/print.gif" title="Print This Result" alt="Print" border="0">
<Div id="DivContent" >
Hello there
</Div> 
```

或者您可以尝试添加 CSS 打印。

[http://css-discuss.incutio.com/wiki/Print_Stylesheets](http://css-discuss.incutio.com/wiki/Print_Stylesheets)

[http://www.w3.org/TR/css-print/](http://www.w3.org/TR/css-print/)

# android - 如何通过打字和滑动来获取用户输入？

> ID：13624806
> 
> 赞同：0
> 
> 时间：2012-11-29T11:30:14.267
> 
> 标签：android

Android 开发新手。我有一个用户应该更新的数字，我想让用户使用键盘进行输入，但也（这将是初级用例）将他的手指放在数字上并将其向上移动以增加它或向下减少它（也许是左右）。 ![例子](../Images/12d9a19bf14b2f448ece749da634ec30.png) 我该怎么做呢？

最好的，

亚舍

PS我在ListView项目中设置一个数字，所以我需要屏幕在我这样做的时候不要滚动..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T12:32:51.700

这听起来像是在 ListView 中做的错误的事情。想象一下那里有 100 行。您必须垂直滚动才能查看所有行，但您也可以垂直滚动以更改音量。不确定这是否可能（我认为 listView 捕获了 onTouch 事件，因此您永远无法在每一行的各个字段中获取它），如果您问我，它也不是那么直观。如果您的元素很少（很少行），我建议您对要更改的元素（图片右侧的元素）使用 LinearLayout 和 OnTouchListener。当您收到 onTouch 事件时，请确保是向上滑动或向下滑动，然后随心所欲地使用它。现在，如果你有几行，我

# grails - Groovy 在 if 语句内部执行闭包，即使 if 语句为假

> ID：13624809
> 
> 赞同：0
> 
> 时间：2012-11-29T11:30:21.397
> 
> 标签：grails, groovy, functional-programming

我有以下代码：

```
 if (false) {

        request.withFormat {

        //Code Here             
        }
} 
```

闭包在这里执行，即使它是假的。这是正确的行为吗？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T20:04:22.380

不，如果这种情况真的发生，那是不正确的行为。

通过放入 println 来测试它以确保它，如果仍然失败，请报告它。我不能让相同的代码失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-17T07:18:52.593

If(false) 不会让流进入 if 块，但我在下面的代码中看到了这一点

```
File file = new File("C:/Users/ajkumar/Desktop/")
  println "${file.isFile()}"
  if("${file.isFile()}")
  {
      println "it's a file"
  }
  else if("${file.isDirectory()}")
  {
      println "it is a directory";
  } 
```

此代码打印： false 这是一个文件，我也不知道为什么会这样。

# model-view-controller - 清除 javxfx fxml 中的 mvc 分离

> ID：13624813
> 
> 赞同：0
> 
> 时间：2012-11-29T11:30:26.343
> 
> 标签：model-view-controller, javafx-2, fxml

我有一个简单的 Javafx 桌面应用程序，我正在尝试拆分代码以匹配 mvc 模式，但我的问题是我在应用程序中有一个包含 MediaPlayer 的嵌套类（我认为这是视图的一部分）。

我想在我的控制器中调用这个 MediaPlayer 的方法，以获取例如状态，但它在那里不可见。我可以在 JavaFX FXML 应用程序中进行干净的 MVC 分离吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T17:36:48.633

您可以使嵌套类成为 FXML 组件（请参阅[https://stackoverflow.com/a/10718683/1054140](https://stackoverflow.com/a/10718683/1054140)）并引入一个将返回状态（甚至是 MediaView 本身）的属性，以使其可以从 Controller 访问。

# c++ - Gcov 报告未命中 return 语句

> ID：13624819
> 
> 赞同：1
> 
> 时间：2012-11-29T11:30:40.843
> 
> 标签：c++, gcov

gcov 抱怨我的一种算法：

```
File 'Algorithm.h'
Lines executed:95.00% of 20
Algorithm.h:creating 'Algorithm.h.gcov'

   17:   25:inline std::vector<std::string> starts_with(const std::vector<std::string>& input, const std::string& startsWith)
    -:   26:{
   17:   27:    std::vector<std::string> output;
   17:   28:    std::remove_copy_if(input.begin(), input.end(), std::back_inserter(output), !boost::bind(&boost::starts_with<std::string,std::string>, _1, startsWith));
#####:   29:    return output;
    -:   30:} 
```

我的测试看起来像这样，它通过了：

```
TEST (TestAlgorithm, starts_with)
{
    std::vector<std::string> input = boost::assign::list_of("1")("2")("22")("33")("222");
    EXPECT_TRUE(starts_with(input,"22") == boost::assign::list_of("22")("222"));
} 
```

问题可能是什么？我没有使用优化。

**更新**：

我的 CMakeList.txt 包含：

```
if(CMAKE_COMPILER_IS_GNUCXX)
    set(CMAKE_CXX_FLAGS "-O0")        ## Optimize
endif() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T12:31:57.550

尝试使用`-fno-elide-constructors`g++ 中的开关

来自 GCC 的权威指南：

> -fno-elide-constructors：编译 C++ 选项时的此选项使 GCC 在初始化相同类型的对象时不会省略创建临时对象，这是 C++ 标准所允许的。指定此选项会导致 GCC 在所有情况下都显式调用复制构造函数。

这里有一些讨论： [如何从 gcov 获得更准确的结果？](https://stackoverflow.com/questions/3432542/how-can-i-get-more-accurate-results-from-gcov) 在这里：[http ://gcc.gnu.org/bugzilla/show_bug.cgi?id=12076](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=12076)

# objective-c - UIViewControllerHierarchyInconsistency 清除关联

> ID：13624820
> 
> 赞同：1
> 
> 时间：2012-11-29T11:30:41.593
> 
> 标签：objective-c, ios, ios6

我知道这个问题之前已经发布过，但我找到的答案不是根据这种情况

运行 2 年前在 Xcode 4.5.1 中编写的应用程序后发生异常。

这是：

> 异常'UIViewControllerHierarchyInconsistency'，原因：'一个视图一次最多只能与一个视图控制器相关联！<UIView: 0xaa9c4f0; 帧 = (0 0; 320 367); 自动调整大小 = W+H；layer = > 与 <TabledReservationListController: 0xaa89e80> 相关联。在将此视图与 <UIViewController: 0x9e9e310> 关联之前清除此关联。

然后在像这样的几个答案中

[尝试呈现模态视图控制器时的 UIViewControllerHierarchyInconsistency](https://stackoverflow.com/questions/12434937/uiviewcontrollerhierarchyinconsistency-when-trying-to-present-a-modal-view-contr)

建议删除 nib 文件中的视图控制器，就像在问题图像上看到的那样。

问题是在这种情况下，我没有 viewController，这是 TabledReservationListController 的 nib 文件：

![TabledReservationListView.xib](../Images/06a04c1f383d08144378787a2e367abb.png)

这是应用程序崩溃的代码部分：

```
- (void)viewDidLoad {
    [super viewDidLoad];

    [navigation setDelegate: self];
    [self createReservationListController];

    [reservationListController viewWillAppear: NO];

     // in this line below
    [[navigation topViewController] setView: [reservationListController view]];

    [reservationListController viewDidAppear: NO];

    [[self view] addSubview: [navigation view]];
    CGRect r = [[self view] frame];
    r.origin.y = 0;
    [[navigation view] setFrame: r];

    [reservationListController setNavigationController: navigation];
}

- (void)createReservationListController {
    TabledReservationListController *res_ =
        [[TabledReservationListController alloc] initWithNibName: @"TabledReservationListView"
                                                          bundle: nil];
    [self setReservationListController: res_];
    [res_ release];

    [[[self navigation] topViewController] setTitle: @"Available Tables"];
} 
```

也许有人可以帮忙，问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T12:43:25.750

你不应该打电话`viewWillAppear`和`viewDidAppear`。这些应该是框架调用您的方法。

与其尝试将`reservationListController`' 的视图提供给不同的控制器，不如将`reservationListController`.

# java - sbt 中的工作目录

> ID：13624822
> 
> 赞同：12
> 
> 时间：2012-11-29T11:30:44.173
> 
> 标签：java, file, classpath, sbt

我希望能够在特定目录中运行 java 程序。我认为，参数化工作目录非常方便，因为它可以轻松管理配置。

例如，在一个文件夹中，您可以进行测试配置，在另一个文件夹中，您可以拥有生产所需的资源。您可能认为，可以选择操作类路径以包含/排除资源，但只有当您对存储在类路径中的资源感兴趣并使用`Classloader.getResource(r)`. 但是如果你有一些外部配置并且你想使用简单的指令来访问它`File file = new File("app.properties");`呢？

让我们看一个普通的例子。

您的应用程序使用**app.properties**文件，您可以在其中存储外部服务的凭据。应用程序在工作目录中查找此文件，因为您使用提到`File file = new File("app.properties");`的指令来访问它。在您的测试中，您希望使用特定于您的测试的*app.properties 。*在您的集成测试中，您希望使用特定于另一个环境的*app.properties 。*最后，当您构建和发布应用程序时，您希望提供其他*app.properties*文件。您希望始终以相同的方式访问所有这些资源，只需键入`File file = new File("app.properties");`而不是（伪代码）：

```
if(configTest) 
    file = File("testWorkDir/app.properties");
else if(config2) 
    file = File("config2WorkDir/app.properties");
else 
    file = File("app.properties"); 
```

或者不是在类路径中使用资源

```
this.getClass.getClassLoader.getResource("app.properties"); 
```

当然，您是聪明的程序员，并且您使用构建工具，例如 maven、gradle 或 sbt`:)`

一开始就够了。至少问题：

**有没有办法在 java 中设置工作目录，如果是，如何在构建工具中配置它（尤其是在 sbt 中）？**

附加信息：

*   更改“user.dir”系统属性不起作用（我尝试以编程方式更改它）。
*   在 sbt[通过 baseDirectory 设置更改“工作目录”以进行测试](https://github.com/harrah/xsbt/wiki/Forking)更改 baseDirectory 在我的理解中它不是基本目录并且它不相等`new java.io.File(".").getAbsolutePath`。
*   提供像 YOUR_APP_HOME 这样的环境变量并从此路径引用资源是可行的，但需要在代码中记住这一点。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-04-18T16:01:07.957

> 在 sbt 通过 baseDirectory 设置更改“工作目录”以进行测试更改 baseDirectory 在我的理解中它不是基本目录并且它不相等`new java.io.File(".").getAbsolutePath`。

我不确定上面的语句是什么意思，但是使用 sbt 你需要在`run`or期间 fork 来改变你的工作目录`test`。这在[启用分叉](http://www.scala-sbt.org/0.13.2/docs/Detailed-Topics/Forking.html#enable-forking)和[更改工作目录](http://www.scala-sbt.org/0.13.2/docs/Detailed-Topics/Forking.html#change-working-directory)中有记录。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-02-20T08:09:54.620

如果你 fork，你可以控制一切，包括工作目录。

[http://www.scala-sbt.org/0.13.5/docs/Detailed-Topics/Forking.html](http://www.scala-sbt.org/0.13.5/docs/Detailed-Topics/Forking.html)

示例代码：

```
fork in run := true
baseDirectory in run := file("/path/to/working/directory/") 
```

# java - 禁用 JPA EclipseLink 2.4 缓存

> ID：13624823
> 
> 赞同：4
> 
> 时间：2012-11-29T11:30:48.427
> 
> 标签：java, caching, jpa, eclipselink

我正在尝试禁用 EclipseLink 2.4 缓存，因此如果数据在 DB 中被其他应用程序更改，相同的数据会在我使用 EclipseLink 2.4 的应用程序中刷新，而无需重新启动它。这些属性似乎都不起作用：

```
<shared-cache-mode>NONE</shared-cache-mode>
...
<property name="eclipselink.cache.shared.default" value="false"/>
<property name="eclipselink.cache.size.default" value="0"/>
<property name="eclipselink.cache.type.default" value="NONE"/>
<property name="eclipselink.query-results-cache" value="false"/>
<property name="eclipselink.refresh" value="true"/> 
```

唯一有帮助的选择是：

```
typedQuery.setHint(QueryHints.REFRESH, HintValues.TRUE); 
```

但这对我来说不是一个选择，因为现在编写了该应用程序，我不想搜索所有查询或`em.find()`方法并将此提示放入。

**EDIT1：**这里描述了类似的问题：http: [//eclipse.1072660.n5.nabble.com/Notifications-about-external-database-changes-td5389.html](http://eclipse.1072660.n5.nabble.com/Notifications-about-external-database-changes-td5389.html)

**EDIT2：**总而言之，我希望所有查询和查找调用都会刷新从数据库中获取的数据。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T14:47:27.970

```
<shared-cache-mode>NONE</shared-cache-mode>
or,
<property name="eclipselink.cache.shared.default" value="false"/> 
```

是正确的机制。或者对特定类使用 @Cache 注释。

我假设您的问题是您对两个查询都使用相同的 EntityManager。EntityManager 还需要维护它管理的所有实例的缓存。总是刷新这些对象会导致您的应用程序所做的任何更改都被丢弃。（EntityManager 是一个事务对象）。

您应该为每个请求或每个事务创建一个新的 EntityManager，或者调用 clear() 以丢弃其托管对象。

EclipseLink 还支持 WEAK EntityManagers，但正确的设计是没有长期存在的 EntityManagers。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-05T19:23:34.330

我想我有[同样的问题](https://stackoverflow.com/questions/20920400/jpa-2-eclipselink-caching-issue?lq=1)。我只是想通过persistence.xml缓存属性（*shared-cache，eclipselink-cache* ...）清除所有缓存，但随机我得到一个实体的旧实例，显然没有任何模式.....

没门！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-27T18:06:18.450

我为每个请求创建新的 EntityManager，

```
<property name="eclipselink.query-results-cache" value="false"/> 
```

在一个请求中通过 JPA 更改实体后，然后在下一个请求中获取实体，仍然会出现 OptimisticLocking 问题。尝试找出问题所在。

# cursor - Android查询通话记录读取失败

> ID：13624827
> 
> 赞同：1
> 
> 时间：2012-11-29T11:30:52.927
> 
> 标签：cursor, android-contentresolver, calllog

我是 android SDK 的新手，我正在尝试从通话日志中读取以获取使用以下代码进行的最后一次通话的信息​​。

```
public class MainActivity extends Activity{

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    String sthh=getdur();
}

public String getdur(){
    String[] projection = new String[] {
            Calls.DATE
            , Calls.DURATION
            , Calls.NUMBER
    };
    ContentResolver cr = getContentResolver();
    Cursor mCur = cr.query(android.provider.CallLog.Calls.CONTENT_URI, projection, null, null, Calls.DATE + " ASC");
    mCur.moveToLast();
    String dur = mCur.getString(mCur.getColumnCount());
    mCur.close();
    return dur;
} 
```

但是，我在 logcat 中得到 RuntimeException 和以下内容。

E/CursorWindow(21773)：无法从具有 473 行 3 列的 CursorWindow 读取第 472 行第 3 列。

我的代码有什么问题？非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T01:50:25.597

解决了，添加

```
Cursor mCur =null; 
```

前

```
mCur = cr.query....... 
```

# android - Android 按钮操作

> ID：13624828
> 
> 赞同：0
> 
> 时间：2012-11-29T11:30:56.730
> 
> 标签：android

我为我的按钮创建了 2 种不同的状态，并且为此购买创建了选择器：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_focused="true" android:state_pressed="false" android:drawable="@drawable/level1_calm" />
    <item android:state_focused="true" android:state_pressed="true" android:drawable="@drawable/level1_on_click" />
    <item android:state_focused="false" android:state_pressed="true" android:drawable="@drawable/level1_on_click" />
    <item android:drawable="@drawable/level1_calm" />
</selector> 
```

但是我怎样才能对所有按钮只使用一个选择器，或者它是被禁止的。
我的意思是我可以在这里使用一些变量，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>

<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_focused="true" android:state_pressed="false" android:drawable="@drawable/level`$Number_button`_calm" />
    <item android:state_focused="true" android:state_pressed="true" android:drawable="@drawable/level`$Number_button`_on_click" />
    <item android:state_focused="false" android:state_pressed="true" android:drawable="@drawable/level`$Number_button`_on_click" />
    <item android:drawable="@drawable/level`$Number_button`_calm" />
</selector> 
```

# css - 我可以 :target 父元素吗？

> ID：13624831
> 
> 赞同：0
> 
> 时间：2012-11-29T11:30:57.637
> 
> 标签：css

我有一个通用的盒子。主盒子中间有五个小盒子。[http://jsfiddle.net/zorikii/fKjET/](http://jsfiddle.net/zorikii/fKjET/)

当单击另一个框时，我希望中间的框更改背景颜色。我的基本标记如下：

HTML-

```
<a id="101" class="select" href="#">A Question</a>
<li id="101_yes" class="one">
    <a href="#101_yes">Yes</a>
</li> 
```

CSS-

```
li a:target ~ a{ background: green;} 
```

在我看来，如果`li.a.href == li.id`顶层`<a>`应该可以选择为`<li>`. 这不像我预期的那样工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T19:14:43.590

只需删除`<li>`并使用通用容器`<div>`：

```
<a id="101" class="select" href="#">A Question</a>
<div id="101_yes" class="one">
    <a href="#101_yes">Yes</a>
</div> 
```

# jquery - 如何全局覆盖 $.ajax 的处理程序

> ID：13624839
> 
> 赞同：-1
> 
> 时间：2012-11-29T11:31:32.733
> 
> 标签：jquery

我的应用程序`$.ajax`大量使用。服务器返回类似`{"STATUS":"RELOGIN"}`登录已过期的信息。我们的应用程序是这样的，如果用户在应用程序上 20 分钟什么都不做，就会在服务器上注销。

所有的帖子和获取都是通过 $.ajax 发生的，我想全局更改 $.ajax 函数，以便万一为请求返回的数据是`{"STATUS":"RELOGIN"}`我想确保在发生这种情况时向用户显示一些通知。

我可以把它作为所有请求的成功处理程序

```
function(data){
if(data.STATUS == "RELOGIN") {
    Notifier.show_error("Login again. Session has expired")
    return
}
// rest of the code depending on the request
} 
```

`Notifier`我写的东西在哪里显示通知

但我不认为在太多地方重复这段代码是个好主意。

我不想接触 jquery 源代码。它是美丽的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T11:35:42.713

看看这个：[http ://api.jquery.com/ajaxComplete/](http://api.jquery.com/ajaxComplete/)

您可以设置全局 ajax 完成处理程序（在每个 ajax 调用完成后调用）`$.ajaxComplete(function(){...})`

更多信息：[http ://api.jquery.com/jQuery.ajaxSetup/](http://api.jquery.com/jQuery.ajaxSetup/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T05:08:35.770

这是我的想法（http://stackoverflow.com/questions/9815058/extending-jquery-ajax-success-globally）：

```
var LOGIN_ERROR_HAS_HAPPENED = false
var INTERNAL_SERVER_ERRORS = false
$(function(){
    var Original_AJAX_function = $.ajax;
    $.ajax = function(options){
        if(options.success){
            var original_callback = options.success
        }
        else{
            var original_callback = function(){}
        }
        options.success = function(data){
            if(data.STATUS == "RELOGIN") {
                if(!LOGIN_ERROR_HAS_HAPPENED){
                    LOGIN_ERROR_HAS_HAPPENED = true
                    Notifier.warning("Login again. Redirecting to login page")
                    setTimeout(function(){
                        window.location.href = "/login"
                    }, 5000)
                }
                return
            }
            original_callback(data)
        }
        if(options.error){
            var original_failure_call_back = options.error
        }
        else{
            var original_failure_call_back = function(){}
        }
        options.error = function(data){
            if(!INTERNAL_SERVER_ERRORS||!LOGIN_ERROR_HAS_HAPPENED){
                INTERNAL_SERVER_ERRORS = true
                Notifier.warning("Oops! Something went wrong. Let us know and we will fix it" )
            }
            original_failure_call_back(data)
        }
        Original_AJAX_function(options)
    }
}) 
```

我打算把这个放在 document.ready 函数中

# javascript - 需要修复 Chrome 和 IE 中的 Tooltip 位置

> ID：13624841
> 
> 赞同：0
> 
> 时间：2012-11-29T11:31:40.410
> 
> 标签：javascript, jquery, html, css

我在十字图标的顶部显示了工具提示窗口......它在Firefox中工作正常。但工具提示位置在 Chrome 和 IE 浏览器中是正确的......

这是[演示](http://jsfiddle.net/Sbqtv/19/)：- 请在 chrom 或 IE 中打开它...

```
$(document).ready(function () {
        //Tooltips
        $(".tip_trigger").hover(function () {
               tip = $(this).find('.tip');
               tip.show(); //Show tooltip
        }, function () {
               tip.hide(); //Hide tooltip          
        })

});​

.tblRpt td{ padding:4px; color:#777;}
.tblServerInfo{border-collapse: collapse; font-size:13px; margin-top:10px;}
.tblServerInfo th{ background:#ececec; border:1px solid #ccc; padding:4px; text-shadow: 1px 1px 0px #fff; color:#666;border-collapse: collapse; line-height:30px; }
.tblServerInfo td{ border:1px solid #ccc; line-height:20px; padding:4px; text-shadow: 1px 1px 0px #fff; color:#666;border-collapse: collapse; text-align:center; }    
.tblServerInfo .feature{ color:#333; font-size:14px;  line-height:30px;  font-weight:bold; padding-left:10px; text-align:left; text-shadow: 1px 1px 0px #fff;}
.tblServerInfo .featureBody{ color:#333; font-size:13px;  line-height:25px;  padding-left:10px; text-align:left; }
.tblServerInfo .rw{background:#f5f5f5;}

/*--Tooltip Styles--*/
.tip_trigger{display:block; padding:6px;}
.tip {
    color: #333;
    background:#ffffff;
    border:1px solid #747474;
    display:none; /*--Hides by default--*/
    padding:10px;
    margin-left:-143px;

    text-align:left; line-height:16px;
    position:absolute;    z-index:1000;
    text-decoration:none;
    cursor:auto;
    -moz-box-shadow: 2px 2px 5px #a2a2a2;-webkit-box-shadow: 2px 2px 5px #a2a2a2;box-shadow: 2px 2px 5px #a2a2a2;
}    
.tblScroll
{ 
    width: 85%;
    overflow:auto;  
    padding-bottom:1px;
}    ​

<div class="tblScroll fLeft">
                    <table class="tblServerInfo">
                       <tbody>
                        <tr style="background:#f5f5f5; line-height:40px; height:39px;">
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                        </tr>
                        <tr>
                            <td></td>
                            <td><img src="http://cdn-img.easyicon.cn/png/5249/524975.png" /></td>
                            <td></td>
                            <td></td>
                            <td>
                            <a class="tip_trigger"><img src="http://cdn-img.easyicon.cn/png/5249/524975.png" />
                            <span class="tip" style="width: 250px;">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas sit amet enim...</span>
                            </a>
                            </td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td>
                            <a class="tip_trigger"><img src="http://cdn-img.easyicon.cn/png/5249/524975.png" />
                            <span class="tip" style="width: 250px;">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas sit amet enim...</span>
                            </a>
                            </td>
                            <td></td>
                            <td></td>
                            <td></td>
                        </tr>
                        <tr class="rw">
                            <td></td>
                            <td><<img src="http://cdn-img.easyicon.cn/png/5249/524975.png" /></td>
                            <td></td>
                            <td></td>
                            <td>
                            <a class="tip_trigger"><img src="http://cdn-img.easyicon.cn/png/5249/524975.png" />
                            <span class="tip" style="width: 250px;">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas sit amet enim...</span>
                            </a>
                            </td>
                            <td></td>
                            <td></td>
                            <td>
                            <a class="tip_trigger"><img src="http://cdn-img.easyicon.cn/png/5249/524975.png" />
                            <span class="tip" style="width: 250px;">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas sit amet enim...</span>
                            </a>
                            </td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                        </tr>
                        <tr>
                            <td></td>
                            <td></td>
                            <td>
                            <a class="tip_trigger"><img src="http://cdn-img.easyicon.cn/png/5249/524975.png" />
                            <span class="tip" style="width: 250px;">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas sit amet enim...</span>
                            </a>
                            </td>
                            <td></td>
                            <td></td>
                            <td>
                            <a class="tip_trigger"><img src="http://cdn-img.easyicon.cn/png/5249/524975.png" />
                            <span class="tip" style="width: 250px;">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas sit amet enim...</span>
                            </a>
                            </td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td>
                            <a class="tip_trigger"><img src="http://cdn-img.easyicon.cn/png/5249/524975.png" />
                            <span class="tip" style="width: 250px;">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas sit amet enim...</span>
                            </a>
                            </td>
                            <td></td>
                            <td>
                            <a class="tip_trigger"><img src="http://cdn-img.easyicon.cn/png/5249/524975.png" />
                            <span class="tip" style="width: 250px;">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas sit amet enim...</span>
                            </a>
                            </td>
                            <td></td>
                        </tr>
                        <tr class="rw">
                            <td>
                            <a class="tip_trigger"><img src="http://cdn-img.easyicon.cn/png/5249/524975.png" />
                            <span class="tip" style="width: 250px;">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas sit amet enim...</span>
                            </a>
                            </td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td>
                            <a class="tip_trigger"><img src="http://cdn-img.easyicon.cn/png/5249/524975.png" />
                            <span class="tip" style="width: 250px;">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas sit amet enim...Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas sit amet enim...</span>
                            </a>
                            </td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td>
                            <a class="tip_trigger"><img src="http://cdn-img.easyicon.cn/png/5249/524975.png" />
                            <span class="tip" style="width: 250px;">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas sit amet enim...</span>
                            </a>
                            </td>
                            <td></td>
                            <td>
                            <a class="tip_trigger"><img src="http://cdn-img.easyicon.cn/png/5249/524975.png" />
                            <span class="tip" style="width: 250px;">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas sit amet enim...</span>
                            </a>
                            </td>
                            <td></td>
                            <td></td>
                            <td>
                            <a class="tip_trigger"><img src="http://cdn-img.easyicon.cn/png/5249/524975.png" />
                            <span class="tip" style="width: 250px;">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas sit amet enim...</span>
                            </a>
                            </td>
                        </tr>
                        <tr class="rw">
                            <td>
                            <a class="tip_trigger"><img src="http://cdn-img.easyicon.cn/png/5249/524975.png" />
                            <span class="tip" style="width: 250px;">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas sit amet enim...</span>
                            </a>
                            </td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td>
                            <a class="tip_trigger"><img src="http://cdn-img.easyicon.cn/png/5249/524975.png" />
                            <span class="tip" style="width: 250px;">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas sit amet enim...Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas sit amet enim...</span>
                            </a>
                            </td>
                            <td></td>
                            <td></td>
                            <td>
                            <a class="tip_trigger"><img src="http://cdn-img.easyicon.cn/png/5249/524975.png" />
                            <span class="tip" style="width: 250px;">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas sit amet enim...</span>
                            </a>
                            </td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td>
                            <a class="tip_trigger"><img src="http://cdn-img.easyicon.cn/png/5249/524975.png" />
                            <span class="tip" style="width: 250px;">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas sit amet enim...</span>
                            </a>
                            </td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td>
                            <a class="tip_trigger"><img src="http://cdn-img.easyicon.cn/png/5249/524975.png" />
                            <span class="tip" style="width: 250px;">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas sit amet enim...</span>
                            </a>
                            </td>
                            <td></td>
                            <td>
                            <a class="tip_trigger"><img src="http://cdn-img.easyicon.cn/png/5249/524975.png" />
                            <span class="tip" style="width: 250px;">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas sit amet enim...</span>
                            </a>
                            </td>
                        </tr>
                        <tr class="rw">
                            <td>
                            <a class="tip_trigger"><img src="http://cdn-img.easyicon.cn/png/5249/524975.png" />
                            <span class="tip" style="width: 250px;">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas sit amet enim...</span>
                            </a>
                            </td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td>
                            <a class="tip_trigger"><img src="images/cross-icon.png" />
                            <span class="tip" style="width: 250px;">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas sit amet enim...Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas sit amet enim...Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas sit amet enim...Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas sit amet enim...Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas sit amet enim...Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas sit amet enim...Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas sit amet enim...Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas sit amet enim...Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas sit amet enim...Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas sit amet enim...Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas sit amet enim...Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas sit amet enim...</span>
                            </a>
                            </td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td>
                            <a class="tip_trigger"><img src="images/cross-icon.png" />
                            <span class="tip" style="width: 250px;">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas sit amet enim...</span>
                            </a>
                            </td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td>
                            <a class="tip_trigger"><img src="images/cross-icon.png" />
                            <span class="tip" style="width: 250px;">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas sit amet enim...</span>
                            </a>
                            </td>
                            <td></td>
                            <td>
                            <a class="tip_trigger"><img src="http://cdn-img.easyicon.cn/png/5249/524975.png" />
                            <span class="tip" style="width: 250px;">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas sit amet enim...</span>
                            </a>
                            </td>

                        </tr>

                       </tbody>
                    </table>
                    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T11:41:08.150

绝对定位元素是根据最近的有定位上下文的父元素定位的，如果没有，它会根据 body 定位自己。

由于您希望相对于悬停的 td 定位工具提示，因此您需要添加`position:relative`并`td`稍微更改您的 js：

```
td{
 position: relative;   
}​

 $(".tip_trigger").hover(function () {
                    tip = $(this).find('.tip');
                    tip.css('top','-40px').show(); //Show tooltip
                } 
```

[看这里。](http://jsfiddle.net/Sbqtv/20/)

这并不完美，但它是您需要的方向。

# c# - 如何使用 android + unity 将 pdf 文件从服务器下载到 sd 卡

> ID：13624843
> 
> 赞同：0
> 
> 时间：2012-11-29T11:31:41.643
> 
> 标签：c#, android, pdf, download, unity3d

我正在尝试从网络服务器（pdf 文件）下载文件并保存到我的 sd 卡中，或者直接将此文件附加到电子邮件并在此之后发送电子邮件。

我的应用程序需要向一些学生发送电子邮件，其中包含一些 pdf 格式的信息，我已经发送了带有主题和竞争的电子邮件，但由于我使用的是 unity + android，我无法下载和/或阅读 pdf 文件。

我正在尝试使用 WWW 类但不工作

```
if(loadInfo.getPantallaActual().Equals("pantallaInicio"))
{   
Email objEmail =    LoadCarreras.objXML.objCarrera.GetEmail();
string to = "to@hotmail.com";
string from = "from@gmail.com";
string subject =     objEmail.GetAsunto();
string body = objEmail.GetCuerpo();
string urlAttachment =   objEmail.GetContenido_url();
StartCoroutine(descarga(urlAttachment));
archivo =    Path.GetFileName(urlAttachment);
File.CreateText(Application.persistentDataPath + "/"+archivo);
                    Debug.Log(" urlAttachment "+urlAttachment);
                    Debug.Log(" archivo "+archivo);
                    Debug.Log(" persistentDataPath "+Application.persistentDataPath + "/"+archivo);

                         message = new MailMessage(from, to, subject, body);

                        SmtpClient client = new SmtpClient("smtp.gmail.com", 587);
                        client.EnableSsl = true;
                        client.UseDefaultCredentials = false;
                        client.Credentials = (ICredentialsByHost) new System.Net.NetworkCredential("from@gmail.com", "pasw.");
                        client.DeliveryMethod = SmtpDeliveryMethod.Network; 
                        client.Timeout = 10000;

                        ServicePointManager.ServerCertificateValidationCallback = 
                        delegate(object s, X509Certificate certificate, X509Chain chain, SslPolicyErrors sslPolicyErrors) 
                            { return true; };

                        try {
                            client.Send(message);
                        }
                            catch (System.Exception ex) {
                            Debug.Log("Exception caught in CreateTestMessage1(): "+ex.ToString() );
                        }   

public IEnumerator descarga(string url){

    descargaA = new WWW(url);
    mandarEmail = true; 
    yield return descargaA;
}
void Update () {
    if(mandarEmail)
    {
        if(descargaA.isDone && cambiar){

            message.Attachments.Add (new Attachment(Application.persistentDataPath + "/"+"file.pdf"));  
            cambiar = false;
        }
    }       
} 
```

# asp.net - 在表单认证系统中使用 ABCpdf.net 生成 PDF

> ID：13624844
> 
> 赞同：0
> 
> 时间：2012-11-29T11:31:43.270
> 
> 标签：asp.net, authentication, abcpdf

我正在使用 ABC.PDF 从我现有的系统生成 pdf。它具有表单身份验证机制。当我生成pdf时，它总是生成登录页面。这是我的功能。请帮助我，谢谢。

私人文档 GeneratePDFPage() {

```
 var theDoc = new Doc();
        theDoc.HtmlOptions.Engine = EngineType.MSHtml;
        theDoc.HtmlOptions.AddLinks = true;
        var uri = Context.Request.Url.ToString();
        theDoc.HtmlOptions.LogonName = Context.User.Identity.Name;
        theDoc.HtmlOptions.LogonPassword = "7126c198-5aee-47b2-8e6a-09c558892703";

        var html = Response.Filter;

        int theId = theDoc.AddImageUrl(uri);

        //We now chain subsequent pages together. We stop when we reach a page which wasn't truncated
        while (true)
        {
            theDoc.FrameRect();
            if (!theDoc.Chainable(theId))
                break;
            theDoc.Page = theDoc.AddPage();
            theId = theDoc.AddImageToChain(theId);
        }
        ////////////////////////////////////////////////////
        // Set pagenumber
        ////////////////////////////////////////////////////
        theDoc.HtmlOptions.LinkPages();
        //Set the position for the page number

        ////theDoc.Rect.String = "35 30 580 50";
        ////theDoc.Font = theDoc.AddFont("Trebuchet");
        ////theDoc.FontSize = 11;
        ////theDoc.HtmlOptions.UseScript = true;
        int pagenumber = 1;

        //flatten the pages. We can't do this until after the pages have been added because flattening will invalidate our previous ID and break the chain.
        for (int i = 1; i <= theDoc.PageCount; i++)
        {
            theDoc.PageNumber = i;

            //Add page number
            //========================================
            string txt = pagenumber.ToString(CultureInfo.InvariantCulture);
            ////theDoc.Color.String = "169 169 169"; //Dark grey text

            //Positioning depends on if the page is even or odd
            theDoc.VPos = 1.0;
            theDoc.HPos = (i % 2) == 0 ? 0.01 : 0.99;

            //Add the page number
            theDoc.AddText(txt);

            //Add a line above page number
            theDoc.AddLine(21, 55, 590, 55);

            //Flatten page
            theDoc.Flatten();

            //Increase the page number count
            pagenumber++;
        }
        return theDoc;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T11:34:35.377

将页面的位置添加到您的 webconfig 并将其从授权中排除，如下所示；

```
 <location path="pdfgenpage.aspx">
    <system.web>
      <authorization>
        <allow users="*"/>
      </authorization>
    </system.web>
  </location> 
```

# c++ - 解析json后提升属性树无法检索记录

> ID：13624848
> 
> 赞同：5
> 
> 时间：2012-11-29T11:31:51.410
> 
> 标签：c++, json, boost, boost-propertytree

我有一个示例 json 记录，我已通过 boost json 解析器解析并将其保存到 boost 属性树以获取所有键值对。ia 遵循代码我能够获取树的第一个属性，但我怎样才能获得第二个属性值？当我尝试获取它时，它向我显示“没有这样的节点”的异常。

如果我迭代树，那么它会向我显示所有键。我不明白它有什么问题。参考： http: [//www.boost.org/doc/libs/1_52_0/doc/html/boost_propertytree/accessing.html](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_propertytree/accessing.html)

```
json string := {"type":"net.aggregate","post.source":"1209010340", "val":1000} 
```

代码：

```
boost::property_tree::ptree pt;    
read_json("jSon string object", pt);
cout << pt.get("type", ""); // working
cout <<  pt.get("post.source", "") // showing error ....` 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-29T15:30:36.780

由于属性名称包含一个点，因此您必须使用不同的分隔符，因此在您的情况下是：

```
cout << pt.get(ptree::path_type("post.source", '/'), ""); 
```

[解释它的 Boost 文档部分](http://www.boost.org/doc/libs/1_49_0/doc/html/boost_propertytree/accessing.html#boost_propertytree.accessing.three_ways_of_getting_data)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T11:40:20.300

因为 Boost`property_tree`使用点来分隔不同的对象。当您请求时`"post.source"`，该`get`函数会查找具有*属性的**对象* 。`post` *`source`*

# java - 除了使用 getSelectedItem 之外，如何从当前选定的列表视图元素中提取文本？

> ID：13624850
> 
> 赞同：0
> 
> 时间：2012-11-29T11:31:56.807
> 
> 标签：java, android, listview, android-intent

我已经阅读了 stackoverflow 上的先前线程如何从当前选定的列表项中提取文本。我使用了 getSelectedItem 方法，但这不起作用。我想要做的是从列表元素中获取文本，然后在滑动手势上将此文本传递给其他活动。这是我的滑动手势代码。

```
public class Descriptor extends ListActivity {

private GestureDetector gestureDetector;
@SuppressWarnings("deprecation")

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.descriptor);

    gestureDetector = new GestureDetector(new SwipeGestureDetector());

    ListView listView = (ListView) findViewById(android.R.id.list);
     // storing string resources into Array
   String[] story_titles = getResources().getStringArray(R.array.story_list);

   // Binding resources Array to ListAdapter

   ArrayAdapter<String> adapter = new ArrayAdapter<String> (this,android.R.layout.simple_list_item_1,android.R.id.text1,story_titles);

   listView.setAdapter(adapter);

   //set single choice of list at a time
   listView.setChoiceMode(ListView.CHOICE_MODE_SINGLE);

   //setting the story description when item clicked from selector class

   TextView story_desc = (TextView) findViewById(R.id.story_desc);

   ImageView image_desc = (ImageView) findViewById(R.id.imageView1);

   Intent i = getIntent();

   String title = i.getStringExtra("title");

   if(title.equalsIgnoreCase("The Ant and the Grasshopper")){
   story_desc.setText(R.string.ant_desc);
   image_desc.setImageResource(R.raw.ant_and_grasshopper);
   }

   if(title.equalsIgnoreCase("The Fox and the Grapes")) {
       story_desc.setText(R.string.fox_desc);
       image_desc.setImageResource(R.raw.fox);
   }

   if(title.equalsIgnoreCase("The Wind and the Sun")){
       story_desc.setText(R.string.wind_desc);
       image_desc.setImageResource(R.raw.wind_and_the_sun);
   }

   if(title.equalsIgnoreCase("The Miser and his Gold")){   
       story_desc.setText(R.string.miser_desc);
       image_desc.setImageResource(R.raw.miser);
   }

   if(title.equalsIgnoreCase("The Frog and the Ox")){
       story_desc.setText(R.string.frog_desc);
       image_desc.setImageResource(R.raw.frog_and_ox);
   }

}

public void onListItemClick(ListView parent,View view, int position, long id) {
    String title = ((TextView) view).getText().toString();

    TextView story_desc = (TextView) findViewById(R.id.story_desc);

    ImageView image_desc = (ImageView) findViewById(R.id.imageView1);

    if(title.equalsIgnoreCase("The Ant and the Grasshopper")){
           story_desc.setText(R.string.ant_desc);
           image_desc.setImageResource(R.raw.ant_and_grasshopper);
           }

           if(title.equalsIgnoreCase("The Fox and the Grapes")) {
               story_desc.setText(R.string.fox_desc);
               image_desc.setImageResource(R.raw.fox);
           }

           if(title.equalsIgnoreCase("The Wind and the Sun")){
               story_desc.setText(R.string.wind_desc);
               image_desc.setImageResource(R.raw.wind_and_the_sun);
           }

           if(title.equalsIgnoreCase("The Miser and his Gold")){   
               story_desc.setText(R.string.miser_desc);
               image_desc.setImageResource(R.raw.miser);
           }

           if(title.equalsIgnoreCase("The Frog and the Ox")){
               story_desc.setText(R.string.frog_desc);
               image_desc.setImageResource(R.raw.frog_and_ox);
           }

}

public boolean onTouchEvent(MotionEvent event) {
    if (gestureDetector.onTouchEvent(event)) {
      return true;
    }
    return super.onTouchEvent(event);
  }

private void onLeftSwipe() {

   Intent intent = new Intent(this,Story.class);
   startActivity(intent);
  }

  private void onRightSwipe() {
    // Do something
  }

private class SwipeGestureDetector extends SimpleOnGestureListener {

    private static final int SWIPE_MIN_DISTANCE = 120;
    private static final int SWIPE_MAX_OFF_PATH = 200;
    private static final int SWIPE_THRESHOLD_VELOCITY = 200;

    @Override
    public boolean onFling(MotionEvent e1, MotionEvent e2,
         float velocityX, float velocityY) {
      try {
        float diffAbs = Math.abs(e1.getY() - e2.getY());
        float diff = e1.getX() - e2.getX();

        if (diffAbs > SWIPE_MAX_OFF_PATH)
          return false;

        // Left swipe
        if (diff > SWIPE_MIN_DISTANCE
        && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) {
           Descriptor.this.onLeftSwipe();

        // Right swipe
        } else if (-diff > SWIPE_MIN_DISTANCE
        && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) {
          Descriptor.this.onRightSwipe();
        }
      } catch (Exception e) {
        Log.e("YourActivity", "Error on gestures");
      }
      return false;
    }
    } 
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

} 
```

请注意，如果我省略 listview 和 string 对象，我的手势可以正常工作，但如果我这样做，则会出现异常。有什么建议么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T12:23:27.233

看看[这里](https://stackoverflow.com/questions/6852764/what-the-purpose-of-the-getselecteditem-from-the-listview) getSelectedItem() 的作用。除非您的列表有选择方法（请查看[此](https://stackoverflow.com/questions/5925892/android-how-do-i-highlight-a-row-in-listview)以获得有关如何实现此目的的漂亮答案），否则您不能使用它。现在，如果您想**在特定行上**向左滑动时执行上述操作，那么您应该在每个行视图上设置一个 OnTouchListener（以捕获向左滑动），然后如前所述，在同一行中使用 setTag() 和 getTag()查看以存储和检索字符串。

# php - php停止一起工作

> ID：13624853
> 
> 赞同：0
> 
> 时间：2012-11-29T11:31:58.773
> 
> 标签：php, wampserver

我正在通过 WAMP 玩 php，试图设置一个小型 MySQL 数据库和一个可以显示和搜索的网页。一切工作了大约 2 个小时，我设法制作了一个 php 页面，该页面从给定的 sql 表中获取行，并制作了一个 html 表并显示它。

突然，脚本停止工作。即使我注释掉或删除除以下代码之外的所有代码，我在 Google Chrome 中得到的只是“Hello HTML world！和...”

```
<html>
<body>
Hello HTML world! <br>
and... <br>
<?php
echo "Hello PHP World";
?>
</body>
</html> 
```

上述代码位于 WAMP 的 www 文件夹中的 .php 文件中。正如我上面提到的，它在第一次安装后直到一个小时前就已经开始工作了。FWIW phpmyadmin 仍然正常工作。

我已经按以下顺序尝试了以下操作：1）重新启动浏览器 2）重新启动计算机 3）重新安装 WAMP 4）清除浏览器缓存 5）编辑“C:\Windows\System32\drivers\etc\hosts”以替换“::1 localhost" 和 "127.0.0.1 localhost" 6) 搜索此站点以及在 google 搜索中显示的任何其他内容。

会是什么呢？

编辑：感谢您的快速回复！

我正在使用以下 URL 在 Chrome 中打开文件“file:///C:/Program%20Files/wamp/www/new.php”

大约一个小时前，我使用它的方式完全相同，当时它运行良好。

如果我使用“查看源代码”选项，我会看到 .php 文件的内容，与本文中的代码块完全相同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T11:44:46.720

如果您通过它访问它，`file:///.....`它将加载文件而不通过 Web 服务器运行它。所以 PHP 永远不会运行脚本。

您需要通过它访问它`http://localhost/path/to/filename.php`，以便它通过服务器运行并让 PHP 做它的事情。

# android - Zebra RW 420 未按应有的方式打印所有内容

> ID：13624860
> 
> 赞同：1
> 
> 时间：2012-11-29T11:32:17.057
> 
> 标签：android, bluetooth

我使用 android 蓝牙打印并有这个 cpcl 文件：

```
! U 
JOURNAL 
SETFF 50 2
SPEED 3
CHAR-SET LATIN9
PRINT 
! U1 PW 720 
! U1 LMARGIN 30
! U1 SETLF 10 
! U1 SETLP Ari08pt.cpf 0 14 

! U1 SETLP Ari16Bpt.cpf 0 30 
     Details

! U1 SETLP Ari10Bpt.cpf 0 14
Test: ! U1 SETLP Ari08pt.cpf 0 14
 $routineTitle$ 

...

Service Data:
! U1 SETLP Ari08pt.cpf 0 4
$seData:{ 
    Time: $it.timeString$
}$ 
```

它打印正常，直到它进入循环（seData），然后它停止一段时间，然后打印每行的一半。有任何想法吗？是打印机问题还是代码问题？

我注意到有时它也可以打印一切正常，但大多数时候都不好。

# c# - ASP.NET Webforms 路由 - 如何停止路由斜杠？

> ID：13624867
> 
> 赞同：1
> 
> 时间：2012-11-29T11:32:56.763
> 
> 标签：c#, asp.net, routing

给定以下代码，在我的 ASP.NET 网络表单应用程序中；

```
void foo(RouteCollection routes){
   routes.MapPageRoute(string.Empty, "testroute", "~/hello.aspx", false);
} 
```

问题是，虽然`http://localhost/testroute`路由到`hello.aspx`，但`http://localhost/testroute/`也路由到 hello.aspx。

有没有办法防止这种情况发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T12:03:27.240

在我看来，最好的办法就是确保您的网站在其`<a>`标签中使用一致的 URL。不要担心进入你的路由机制的无关路径，而是专注于确保只为你的链接使用所需的 URL 模式。

例如，确保您的网站不包含任何`<a>`带有 的标签`href="/testroute/"`，并且响应它并不重要。

正如我在评论中指出的那样，URL 路径部分末尾的斜杠实际上是标准的，它没有效果。你可以包含它，也可以不包含它。这意味着两个“不同”的 URL 可以加载相同的页面：`/page.aspx`并且`/page.aspx/`都加载相同的内容。但是这里还有另一个类似的长期传统，即默认文档。也就是说，`/`并且`/default.aspx`会倾向于加载相同的东西。

当然，这种情况下的解决方案与此处的解决方案相同：只需确保您的`<a>`标签使用一致的、单一版本的 URL 即可。

* * *

作为记录，您可以执行一些检测尾部斜杠并发出 301 重定向的操作，但我认为确保您与 URL 一致会容易得多。

# python - Django在加入时找到最大值

> ID：13624869
> 
> 赞同：0
> 
> 时间：2012-11-29T11:33:23.830
> 
> 标签：python, django, postgresql, django-models, django-orm

我有两个模型：

```
class Source(models.Model):
    name = models.CharField(max_length=200)

class Data(models.Model):
    date = models.DateField(db_index=True)
    metric = models.IntegerField()
    source = models.ForeignKey(Source) 
```

我想找到过去三天内没有任何数据点的所有来源。在 PostgreSQL 中，这是可行的：

```
select influence_source.src, max(influence_data.date) as max_date
from influence_data, influence_source
where influence_data.source_id = influence_source.id
group by influence_source.src
having max(influence_data.date) < now()::date - 7
order by max_date; 
```

这可能使用 Django 的 ORM 吗？

我试过了：

```
>> Source.objects.raw("select influence_source.src, max(influence_data.date) as max_date from influence_data, influence_source where influence_data.source_id = influence_source.id group by influence_source.src having max(influence_data.date) < now()::date - 7 order by max_date")
<RawQuerySet: 'select influence_source.src, max(influence_data.date) as max_date from influence_data, influence_source where influence_data.source_id = influence_source.id group by influence_source.src having max(influence_data.date) < now()::date - 7 order by max_date'>
>> list(_)
InvalidQuery: Raw query must include the primary key 
```

（添加主键给出`DatabaseError: column "influence_source.id" must appear in the GROUP BY clause or be used in an aggregate function`）

我已经阅读了[聚合文档](https://docs.djangoproject.com/en/dev/topics/db/aggregation/)，但对我来说如何执行此查询并不明显：

```
>> Source.objects.all().aggregate(Max('data__date'))
{'data__date__max': datetime.date(2012, 11, 16)} # a single result was not what I wanted 
```

如何找到最近数据对象超过三天的所有源对象？我有很多数据，所以我想做一个数据库查询而不是遍历对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T15:09:25.333

```
import datetime

three_days_ago = datetime.datetime.now() - datetime.timedelta(3)
Source.objects.annotate(max_date=Max('data__date')).exclude(max_date__gt=three_days_ago).order_by('max_date') 
```

# ruby-on-rails - 使用 Arel 语法时 Rails Brakeman SQL 注入警告

> ID：13624870
> 
> 赞同：0
> 
> 时间：2012-11-29T11:33:24.560
> 
> 标签：ruby-on-rails, ruby-on-rails-3, sql-injection, arel, brakeman

在我的 Rails 3.2 应用程序中，[Brakeman](http://brakemanscanner.org/) 1.8.3 为模型中的以下代码引发了高置信度 SQL 注入警告：

**微博.rb**

```
def self.from_users_followed_by(user)
  followed_user_ids = Relationship.select(:followed_id).
                      where("follower_id = :user_id").
                      to_sql
  where("user_id IN (#{followed_user_ids}) OR user_id = :user_id",
        user_id: user.id)
end 
```

但是，当我将代码更改为不使用 Arel 语法时，不会引发警告：

```
def self.from_users_followed_by(user)
  followed_user_ids = "SELECT followed_id FROM relationships
                       WHERE follower_id = :user_id"
  where("user_id IN (#{followed_user_ids}) OR user_id = :user_id",
        user_id: user.id)
end 
```

这是误报，还是与 Arel 语法或`to_sql`方法有关……？我不明白在两个示例中执行的实际代码之间有什么区别，这两个示例需要警告。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T15:09:48.547

这是一个误报。

在这种情况下，Brakeman 知道`Relationship`是一个模型，`select`并且`where`是查询方法。所以它假设`Relationship.select(...).where(...).to_sql`是一个记录属性（并且有潜在危险）。但是，它不应该，因为`to_sql`只是为您提到的查询生成 SQL 代码。我会解决这个问题。

第二个版本当然不会发出警告，因为您正在插入字符串文字。

# ruby-on-rails - Rails 未在开发模式下登录

> ID：13624871
> 
> 赞同：0
> 
> 时间：2012-11-29T11:33:29.550
> 
> 标签：ruby-on-rails, logging

我有一个在 2 台服务器上运行良好的 Rails2 应用程序。两边都配置为开发模式。

在一台服务器上，它停止记录信息，我不知道为什么。我试图删除 development.log 文件，但没有任何改变。

这是environments/development.rb的内容：

```
config.cache_classes = false

# Log error messages when you accidentally call methods on nil.
config.whiny_nils = true

# Show full error reports and disable caching
config.action_controller.consider_all_requests_local = true
config.action_view.debug_rjs                         = true
config.action_controller.perform_caching             = false

# Don't care if the mailer can't send
config.action_mailer.raise_delivery_errors = false
Sass::Plugin.options[:debug_info] = true 
```

# ruby-on-rails - Rails 似乎无法找到一些宝石

> ID：13624875
> 
> 赞同：0
> 
> 时间：2012-11-29T11:33:35.047
> 
> 标签：ruby-on-rails, ruby, gem, gemfile

昨天，一切正常。[你可以在这里](https://gist.github.com/4168344)查看我以前的 Gemfile 。

然后，我添加了一些你可以[在这里](https://gist.github.com/4168353)看到的组。

从那以后，我收到了这样的信息：

```
Exiting
/Users/adrien/code/adserver/backoffice/config/initializers/airbrake.rb:1:in `<top (required)>': uninitialized constant Airbrake (NameError) 
```

[ [AirbrakeFullStackTrace](https://gist.github.com/4168359) ]

由于我无法弄清楚为什么会遇到这种行为并且我被卡住了，所以我尝试`airbrake`在相应的`initializer`. 我重新启动了服务器并收到了以下消息：

```
Exiting
/Users/adrien/code/adserver/backoffice/config/initializers/devise.rb:4:in `<top (required)>': uninitialized constant Devise (NameError) 
```

[[设计全栈跟踪](https://gist.github.com/4168369)]

就像 Airbrake 的错误一样，我需要`devise`在初始化文件中并重新启动服务器。我懂了：

```
Exiting
/Users/adrien/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.8/lib/active_record/dynamic_matchers.rb:50:in `method_missing': undefined local variable or method `acts_as_sane_tree' for #<Class:0x007fd3363593f8> (NameError) 
```

[ [ActsAsSaneTreeFullStackTrace](https://gist.github.com/4168391) ]

我需要`acs_as_sane_tree`在我的模型文件中，重新启动服务器，**现在**它可以工作了。

有人能告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T11:47:06.520

很抱歉让人们感到无聊。我刚得到它。对于那些在 Gemfile 中与组一起玩的人来说，这是要知道和记住的事情。

在`config/application.rb`中，您可以找到以下说明：

```
Bundler.require *Rails.groups(:assets) if defined?(Bundler) 
```

您必须告诉 Bundler 将您添加到 Gemfile 中的任何外来组包括在内。所以，就我而言，这给了我们：

```
Bundler.require *Rails.groups(:assets, :rails, :frontoffice) if defined?(Bundler) 
```

在 Bundler 站点上找到的一些帮助，[使用组](http://gembundler.com/groups.html)。

# node.js - Redis + node.js 渲染对象列表

> ID：13624880
> 
> 赞同：0
> 
> 时间：2012-11-29T11:34:24.080
> 
> 标签：node.js, redis, mustache

我正在尝试使用 node.js 和 redis，并且我设法获得了一些函数来使用 Mustache 作为模板引擎来呈现单个对象。

现在我需要从列表中渲染项目，看起来像这样

```
list:$(id) = [node_id_1, node_id_2, node_id_3]

node:$(id) = {"value1":1, "value2":2, "value3":3, "value4":4 } 
```

这是我处理价值观的方式

```
//get the list of nodes
redis.lrange('list:' + req.param.list_id, 0,-1, function(err, lastNode){

  //request the parameters i need from the single node
  var request = ['id','type'];
  redis.hmget('node:' + lastNode, request, function(err, node){
     //operations on the node
  });
}); 
```

现在我想渲染这些节点。但我不确定最好的方法是什么。我应该将所有内容保存在 js 数组中并计数以确保在读取所有节点后调用渲染函数吗？

可能这真的很微不足道，但我不确定，因为这是我第一次使用 redis 和 node

谢谢，k。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T21:32:03.547

This is indeed a little tricky in asynchronous land. I recommend the [async](https://github.com/caolan/async/) module, which, among other things, can map an array to an asynchronous function:

Something like:

```
// [nodeIds] = [1, 2, 3]
async.map(nodeIds, getNode, function (err, nodes) {
    // render nodes
});

function getNode (node, next) {
    redis.hmget('node' + node, ['id', 'type'], next);
} 
```

Note, though, that `hmget` will return an array with values, which may or may not be what you want to render in a view. If an object would be more suitable, you could try `hgetall`.

# javascript - js动态改变css，

> ID：13624881
> 
> 赞同：0
> 
> 时间：2012-11-29T11:34:31.137
> 
> 标签：javascript, html, css

我正在创建我的页面的移动版本，我在其中插入了一个新的 iphone，如导航，它几乎可以工作，但背景 html 元素仍然显示在不应该显示的位置。

这是我的网站：[http ://www.top-jobs-europe.de/m/](http://www.top-jobs-europe.de/m/)

有人可以看看并尝试帮助我吗？目的是菜单链接一开始应该被隐藏，打开后应该看到它，再次关闭后不会。一旦你看到这个页面，你就会直观地理解我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T11:47:00.093

也许，在 menucss.css 中，您可以将`z-index`of设置`#w #navmenu`为 -1？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T11:58:50.537

在您的`iphonemenu.js`文件中，更改以下内容，添加一个变量来处理动画`menu_cose`：

```
$(document).ready(function(){
    var menuclose = $("menu_close");
    var pagebody = $("#pagebody");
    var themenu  = $("#navmenu");
    var topbar   = $("#toolbarnav");
    var content  = $("#content");
    var viewport = {
        width  : $(window).width(),
        height : $(window).height()
    };
    // retrieve variables as 
    // viewport.width / viewport.height

    function openme() { 
        $(function () {

            topbar.animate({
               left: "290px"
            }, { duration: 300, queue: false });
            pagebody.animate({
               left: "200px"
            }, { duration: 300, queue: false });
                menuclose.animate({
                   left:"0px"
                },{duration:300, queue:false});
        });
    }

    function closeme() {
        var closeme = $(function() {
            topbar.animate({
                left: "0px"
            }, { duration: 180, queue: false });
            pagebody.animate({
                left: "-90px"
            }, { duration: 180, queue: false });
            menuclose.animate({
                left:"-90px"
            },{duration:180,queue:false});
        });
    } 
```

# java - 小程序窗口关闭

> ID：13624886
> 
> 赞同：1
> 
> 时间：2012-11-29T11:34:47.687
> 
> 标签：java, applet

我有一个登录小程序，它接受用户名和密码。单击提交按钮后它有提交窗口，内部用户名和密码由服务器检查，如果信息有效，则会显示一个新窗口。
我希望在单击提交或任何其他按钮时关闭登录小程序。
我尝试使用`System.exit(0)`which 停止整个应用程序。
请告诉我如何仅关闭小程序窗口。

# sql-server-2008 - 大容量加载数据转换错误（截断） - SQL Server

> ID：13624891
> 
> 赞同：1
> 
> 时间：2012-11-29T11:35:01.643
> 
> 标签：sql-server-2008, tsql, bcp

我正在使用以下过程从 CSV 文件导入数据：

```
CREATE TABLE #HSCodeHeading (
[ItemID] [int] IDENTITY(1,1) NOT NULL,
[CMSChapterID] [bigint] NOT NULL,
[HeadingCode] [varchar](2) NOT NULL,
[HeadingDescription] [nvarchar](1125) NOT NULL,
[HeadingDescriptionPT] [nvarchar](1125) NOT NULL,   
PRIMARY KEY CLUSTERED 
(
    [ItemID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF,     ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]

-- Inserting all the from csv to temproary table using BULK INSERT
EXEC ('BULK INSERT #HSCodeHeading
FROM ''' + @FilePath + '''
WITH ( FIELDTERMINATOR = ''<,>'', ROWTERMINATOR =''\n'', FIRSTROW = 2, KEEPIDENTITY, CODEPAGE = ''ACP'' );'); 
```

几乎所有行（1227 行/1229 行）都成功导入，但是下面的 2 行抛出以下错误：

> *消息 4863，级别 16，状态 1，第 1
> 行第 515 行第 5 列 (HeadingDescriptionPT) 的批量加载数据转换错误（截断）。*

以下是行：

第 1 行

> *602<,>97<,>18<,>4818<,>Papel dos tipos utilizados para papel de toucador e para papeis semelhantes, Pasta (Ouate) de celulose ou mantas de fibras de celulose, dos tipos utilizados para fins domésticos ou sanitários , em rolos, de largura não Superior a 36 cm, ou cortados em forma próprias, lenços incluindo os demaquilhagem, toalhas de mão, toalhas de mesa,guardanapos, fraldas para bebés, pensos e tampões higiénicos, lençóis e artigos semelhantes, para usos domésticos, de toucador, higiénicos ou hospitalares, vestuário e seus acessórios, de pasta de papel, papel, Pasta (Ouate) de celulose ou de mantas de fibras de celulose<,>Papel dos tipos utilizados para papel de toucador e para papeis semelhantes,意大利面 (Ouate) de celulose ou mantas de fibras de celulose,dos tipos utilizados para fins domésticos ou sanitários, em rolos, de largura não Superior a 36 cm, ou cortados em forma próprias, lenços incluindo os de demaquilhagem, toalhas de mão, toalhas de mesa,guardanapos, fraldas para bebés, pensos e tampões , lençóis e artigos semelhantes, para usos domésticos, de toucador, higiénicos ou hospitalares, vestuário e seus acessórios, de pasta de papel, papel, Pasta (Ouate) de celulose ou de mantas de fibras de celulose意大利面 (Ouate) de celulose ou de mantas de fibras de celulose意大利面 (Ouate) de celulose ou de mantas de fibras de celulose*

第 2 行

> *545<,>91<,>02<,>4202<,>Arcas para viagem , malas e maletas, os estojos para óculos, binóculos, máquinas fotográficas e de filmar, instrumentos musicais, armas, e artefactos semelhantes, sacos de viagem, sacos isolantes para géneros alimentícios e bebidas, bolsas de toucador, mochilas, bolsas, sacos para compras (sacolas), carteiras, portamoedas, portacartões, cigarreiras, tabaqueiras, estojos para ferramentas, bolsas e sacos para artigos de desporto, estojos para frascos ou para jóias, caixas para pó de arroz, estojos para ourivesaria e artefactos semelhantes, de couro natural ou reconstituído, de folhas de plástico, de matérias têxteis, de fibra vulcanizada ou de carão, ou recobertos, no todo o na maior parte, dessas mesmas matérias ou de papel<,>Arcas para viagem , malas e maletas, os estojos para óculos,binóculos, máquinas fotográficas e de filmar, instrumentos musicais, armas, e artefactos semelhantes, sacos de viagem, sacos isolantes para géneros alimentícios e bebidas, bolsas de toucador, mochilas, bolsas, sacos para compras (sacolas), carteiras, portamoedas, portacartões, cigarreiras, tabaqueiras, estojos para ferramentas, bolsas e sacos para artigos de desporto, estojos para frascos ou para jóias, caixas para pó de arroz, estojos para ourivesaria e artefactos semelhantes, de couro natural ou reconstituído, de folhas de plástico, de matérias têxteis , de fibra vulcanizada ou de carão, ou recobertos, no todo o na maior parte, dessas mesmas matérias ou de papelbolsas de toucador, mochilas, bolsas, sacos para compras (sacolas), carteiras, portamoedas, portacartões, cigarreiras, tabaqueiras, estojos para ferramentas, bolsas e sacos para artigos de desporto, estojos para frascos ou para jóias, caixas para pó de arroz, estojos para ourivesaria e artefactos semelhantes, de couro natural ou reconstituído, de folhas de plástico, de matérias têxteis, de fibra vulcanizada ou de carão, ou recobertos, no todo o na maior parte, dessas mesmas matérias ou de papelbolsas de toucador, mochilas, bolsas, sacos para compras (sacolas), carteiras, portamoedas, portacartões, cigarreiras, tabaqueiras, estojos para ferramentas, bolsas e sacos para artigos de desporto, estojos para frascos ou para jóias, caixas para pó de arroz, estojos para ourivesaria e artefactos semelhantes, de couro natural ou reconstituído, de folhas de plástico, de matérias têxteis, de fibra vulcanizada ou de carão, ou recobertos, no todo o na maior parte, dessas mesmas matérias ou de papelde folhas de plástico, de matérias têxteis, de fibra vulcanizada ou de carão, ou recobertos, no todo o na maior parte, dessas mesmas matérias ou de papelde folhas de plástico, de matérias têxteis, de fibra vulcanizada ou de carão, ou recobertos, no todo o na maior parte, dessas mesmas matérias ou de papel*

我无法发现错误`[HeadingDescription]`，因为两者`[HeadingDescriptionPT]`都有相似的内容。

该方向的任何亮点都将受到欢迎。[我已经从其他 SO 问题中进行](https://stackoverflow.com/questions/13259028/sql-server-bulk-insert-bulk-load-data-conversion-error)了交叉检查（[7520731、13259028](https://stackoverflow.com/questions/7520731/bulk-load-data-conversion-error-truncation)）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T11:51:32.177

好吧，错误很明显：您尝试插入列的`HeadingDescriptionPT`数据**太长**。

该列定义为`[nvarchar](1125)`-

但是这两个文本块的长度分别为**1222** (#602) 和**1470**个字符 (#545) ...

# php - 如何将关联数组排序为替代的最大最小顺序？

> ID：13624892
> 
> 赞同：0
> 
> 时间：2012-11-29T11:35:06.707
> 
> 标签：php, arrays

有谁知道如何将关联数组排序为交替的最大最小值？

IE

```
array("A"=>10, "B"=>2, "C"=>5, "D"=>1, "E"=>30, "F"=>1, "G"=>7) 
```

应该变成：

```
array("E"=>30, "D"=>1, "A"=>10, "F"=>1, "G"=>7, "B"=>2, "C"=>5) 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T11:42:29.643

根据您对此问题的先前版本的回答：

```
$myArray = array("A"=>10, "B"=>2, "C"=>5, "D"=>1, "E"=>30, "F"=>1, "G"=>7);
asort($myArray);
$myArrayKeys = array_keys($myArray);

$newArray = array();
while (!empty($myArray)) {
    $newArray[array_shift($myArrayKeys)] = array_shift($myArray);
    if (!empty($myArray))
        $newArray[array_pop($myArrayKeys)] = array_pop($myArray);
}
var_dump($newArray); 
```

或者，如果你想要最大的第一：

```
$myArray = array("A"=>10, "B"=>2, "C"=>5, "D"=>1, "E"=>30, "F"=>1, "G"=>7);
asort($myArray);
$myArrayKeys = array_keys($myArray);

$newArray = array();
while (!empty($myArray)) {
    $newArray[array_pop($myArrayKeys)] = array_pop($myArray);
    if (!empty($myArray))
        $newArray[array_shift($myArrayKeys)] = array_shift($myArray);
}
var_dump($newArray); 
```

# hive - 在我运行 Hive 的任何地方创建 metastore_db

> ID：13624893
> 
> 赞同：23
> 
> 时间：2012-11-29T11:35:09.620
> 
> 标签：hive, hiveql

文件夹`metastore_db`是在我运行 Hive 查询的任何目录中创建的。有没有办法`metastore_db`在一个定义的位置只有一个并阻止它在所有地方被创建？有什么关系`hive.metastore.local`吗？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-11-30T19:40:12.517

这里感兴趣的属性是`javax.jdo.option.ConnectionURL`。此属性的默认值为`jdbc:derby:;databaseName=metastore_db;create=true`。此值指定您将使用嵌入式 derby 作为 Hive 元存储，并且元存储的位置是`metastore_db`。如果 Metastore 不存在，也会创建它。

请注意，元存储 ( `metastore_db`) 的位置是相对路径。因此，它是在您启动 Hive 的地方创建的。如果您将此属性（在您的 hive-site.xml 中）更新为某个位置的绝对路径，则将从该位置使用元存储。

我必须警告您，嵌入式 derby 元存储一次只能由一个用户访问。Hive 默认使用嵌入式 derby，以提供开箱即用的体验并便于测试。对于任何实际系统，我建议迁移到独立的“真实”数据库，如 MySQL 或 PostgreSQL。[此处](http://www.cloudera.com/content/cloudera-content/cloudera-docs/CDH5/latest/CDH5-Installation-Guide/cdh5ig_hive_metastore_configure.html)提供了有关如何执行此操作的说明。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-03-02T07:18:18.333

由于您使用嵌入式德比模式。使用单个 metastore_db 位置。您需要更改以下属性。

```
<property>
  <name>javax.jdo.option.ConnectionURL</name>  
  <value>jdbc:derby:;databaseName=/<file-location>/metastore_db;create=true</value>
  <description>JDBC connect string for a JDBC metastore</description>
</property> 
```

我希望这能帮到您。更多详情[请点击这里](http://www.hiregion.com/2010/01/hive-metastore-derby-db.html)

# sql - 在具有不同数据类型的两个表列之间查找和替换值

> ID：13624896
> 
> 赞同：1
> 
> 时间：2012-11-29T11:35:17.560
> 
> 标签：sql, sql-server-2008, tsql

我在 sql server 2008 中有两个表

```
TBL_CustomerMaster
[FilingId] [numeric]  (18, 0) NOT NULL,
[CustId]   [nvarchar] (500)   COLLATE SQL_Latin1_General_CP1_CI_AS NOT NULL,

TBL_Customer
[FilingId]  [numeric]  (18, 0) NOT NULL,
[CustUnqId] [numeric]  (18, 0) NOT NULL,
[CustId]    [nvarchar] (500)   COLLATE SQL_Latin1_General_CP1_CI_AS NOT NULL, 
```

我使用批量插入将数据加载到每个 FilingId 的两个表中，两个表的 CustId 是相同的。我为 TBL_Customer 生成了唯一的 CustUnqId

现在我想用 TBL_CustomerMaster 的 CustId 映射 CustUnqId，即将 TBL_CustomerMaster 中的 CustId 替换为 TBL_Customer 中的对应 CustUnqId

请提出解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T11:56:46.647

你可以试试这个，但是将它包含在事务中并在将任何东西放入生产环境之前进行测试：

```
SELECT  a.CustId,
        b.CustUnqId
INTO    #temp
FROM    TBL_CustomerMaster a
JOIN    TBL_Customer b ON
        a.CustId = b.CustId

UPDATE  TBL_CustomerMaster
SET     CustId = t.CustUnqId
FROM    TBL_CustomerMaster a
JOIN    #temp t ON
        t.CustId = a.CustId 
```

# objective-c - 在 NSUserDefaults 中保存 typedef 枚举对象

> ID：13624898
> 
> 赞同：7
> 
> 时间：2012-11-29T11:35:19.133
> 
> 标签：objective-c, enums

我写了以下代码：

```
typedef enum {
    kProductList,
    kProductGrid,
    kProductSingleView
} ProductViewType;

ProductViewType ViewType; 
```

在我的视图更改方法中，我正在更改 ViewType。当应用程序关闭时，我想将最后一个 ViewType 保存在 UserDefauls 中，以便在第一次加载时，我可以检查用户最后一个 ViewType 并将其设置为默认值。

我写了以下代码：

```
[[NSUserDefaults standardUserDefaults] setObject:ViewType forKey:@"ProductViewType"]; 
```

但 XCode 显示警告：指向整数转换的指针不兼容。

任何解决方案？谢谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-29T11:41:12.050

`NSUserDefaults`存储的*对象*不是 C 数据类型。

没有尝试过，但您可能只需进行以下更改即可逃脱：

```
[[NSUserDefaults standardUserDefaults] setObject:@(ViewType) forKey:@"ProductViewType"]; 
```

该`@()`符号是 的简写`[NSNumber numberWithInt:viewType]`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-29T11:40:44.153

[如此处](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSUserDefaults_Class/Reference/Reference.html)所述NSUserDefaults 的`setObject:forKey:`方法只接受对象。由于枚举类型不是对象，因此无法使用此方法设置它。由于枚举默认情况下基本上是整数，因此您可以使用`setInteger:forKey:`方法来存储您的值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T11:37:10.010

因为`ViewType`不是对象。

你可以把 ViewType 放在`NSValue`第一个里面。

```
NSValue *value = [NSValue value:&ViewType withObjCType:@encode(ProductViewType)];
[[NSUserDefaults standardUserDefaults] setObject:value forKey:@"ProductViewType"]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-29T11:37:37.317

枚举是整数，setObject 需要对象！！！

将此枚举封装在一个对象中（可能是 NSValue 或自定义类）。然后将其写入 UserDefaults。

或者，如果您使用的是 XCode4，

```
[[NSUserDefaults standardUserDefaults] setObject:@(ViewType) forKey:@"ProductViewType"]; 
```

# android - 如何计算android上的最小宽度？

> ID：13624903
> 
> 赞同：0
> 
> 时间：2012-11-29T11:35:37.027
> 
> 标签：android, resolution, dpi

分辨率为**1920*1080**，实际尺寸为**5 英寸**。

如何计算android 上的**最小宽度？**

手机上应该使用哪个res文件夹，包括**drawable、values和layout**文件夹？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T06:25:08.593

首先，我得到**dpi**：

**dpi** = 根（1920*1920+1080*1080）/5 = 440.5

然后我使用公式得到**samllestWidth**：

**最小宽度**=1080/(dpi/160)=1080/(440.5/160) = 392.2

所以**最小**宽度是393dp

但如果制造商将**dpi**设置为 480 ，则**最小宽度**将为：

**最小**宽度 = 1080/(480/160) = 360dp

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-29T11:44:53.317

例如，如果有一个图像 (1920*1080) 并假设它是 xlarge。您必须以 3:4:6:8 的比例为其他尺寸创建合适的图像。

如果您有一个 48x48 像素的用于中等密度屏幕（启动器图标的大小）的可绘制位图，则所有不同的大小应该是：

36x36 用于低密度 48x48 用于中密度 72x72 用于高密度 96x96 用于超高密度

您应该查看[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)以获取详细信息。

![在此处输入图像描述](../Images/3018ee63f09b992de541a0e6b682f81a.png)

尺寸

small 用于小尺寸屏幕的资源。

正常尺寸屏幕的正常资源。（这是基线大小。）

large 大尺寸屏幕的资源。

xlarge 超大尺寸屏幕的资源。

# jquery-mobile - 禁用 JQuery Mobile 地理位置

> ID：13624904
> 
> 赞同：1
> 
> 时间：2012-11-29T11:35:39.967
> 
> 标签：jquery-mobile

使用我的 iOS 设备访问任何由 JQuery Mobile 驱动的页面似乎会激活地理定位（箭头出现在 Mobile Safari 的右上角）。[JQuery Mobile 站点](http://jquerymobile.com/demos/1.2.0/)本身就表现出这种行为。我的应用程序不需要地理定位，这似乎很浪费电池。如何禁用此地理位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T09:11:14.067

就像在[https://forum.jquery.com/topic/jquery-mobile-activating-geolocation-on-mobile-devices](https://forum.jquery.com/topic/jquery-mobile-activating-geolocation-on-mobile-devices)中所说的那样，可以通过从 jQueryMobile 1.2 中删除一些代码来修复它（从第 846 行开始）：

```
// DEPRECATED
if ( $.uiBackCompat !== false ) {
     $.Widget.prototype._getCreateOptions = function() {
         return $.metadata && $.metadata.get( this.element[0] )[ this.widgetName ];
    };
} 
```

但我不知道为什么，现在......

# c - 确定参数列表中参数类型的简单方法

> ID：13624906
> 
> 赞同：0
> 
> 时间：2012-11-29T11:35:43.237
> 
> 标签：c, embedded, printf, scanf, avr

我想要一个函数 debug_print(fmt, args) 接受格式字符串、参数并构建一个 char 缓冲区，然后我可以将其发送到 UART。基本上我可以将所有这些传递给scanf，但问题是格式化浮点数需要特别小心。

```
dtostrf( float_num, 3, 4, temp_buf ); 
```

所以我需要`%f`用`%s`格式字符串替换并将 float arg 更改为`temp_buf`. 由于嵌入式环境功能有限，所有这些都必须以最少的步骤完成。

如果有人可以帮助建立这样的功能，将不胜感激。

像这样的东西：

```
void debug_print(char *fmt, ... )
{
    va_list args;
    va_start(args,fmt);
    // use uart function for output
    va_end(args);
} 
```

但是如何有效地遍历占位符以及如何将`float`arg 替换为`char*`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T11:55:25.943

而不是更改格式字符串，如果传递的字符串实际上是文字字符串，这是不可能的，当您找到`"%f"`格式代码时，您使用您的`dtostrf`函数转换下一个参数，将值存储在一个临时的小字符串中，然后将其连接到输出字符串（即`strcat`）。

# jquery - 字符串变量名到 JSON

> ID：13624907
> 
> 赞同：1
> 
> 时间：2012-11-29T11:35:46.433
> 
> 标签：jquery, json, string, object, undefined

我有两个这样的变量：

```
var test = {"1":"test","2":"test2"};
var isdefined = "test.1" 
```

如何检查 isdefined 变量不是“未定义”？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T11:52:29.433

你的问题的答案是否和是，

不，因为如果您的对象属性以数字开头或者它是一个数字，则您无法使用 objectName.12 访问它，这是您无法更改的规则，在您的情况下它是一个数字

另一方面，是的，如果您的对象定义正确，您可以做到，请检查下面的代码块；

```
var test = {"1":"test","_2":"test2"};
var isdefined = "test._2";
alert(eval(isdefined)); // will return test2
alert(eval("test.1"));  // throws exception. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T11:39:19.177

您是否尝试测试是否`1`存在于 中`test`？在这种情况下，你可以做

```
test.hasOwnProperty('1') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T11:44:33.040

JavaScript`undefined`的计算结果为`false`，因此您可以简单地执行以下操作：

```
if ( isdefined ) {
    // do stuff
} 
```

# oracle - plsql累积乘法

> ID：13624908
> 
> 赞同：2
> 
> 时间：2012-11-29T11:35:48.797
> 
> 标签：oracle, plsql

我有一个看起来像这样的查询：

```
SELECT SUM(CAPITAL_RETURN) OVER (PARTITION BY PORTF_CODE, 
                                 EXTRACT(MONTH FROM END_DATE) ORDER BY END_DATE
                                 ) AS CUM_CAPITAL_RET,
 FROM
 .... 
```

这对于创建累积和列来说很好，但我现在需要创建一个累积乘法列。

这可能吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T12:17:30.767

1.  您可以编写用户定义的聚合函数。这是一个例子：

    ```
    SQL> create or replace type t_multiply as object
      2    (
      3    total number,
      4  
      5    static function ODCIAggregateInitialize(nctx IN OUT t_multiply )
      6    return number,
      7  
      8    member function ODCIAggregateIterate(self IN OUT t_multiply ,
      9                                         value number)
     10    return number,
     11  
     12    member function ODCIAggregateTerminate(self IN t_multiply,
     13                                           retVal OUT  number,
     14                                           flags IN number)
     15    return number,
     16  
     17    member function ODCIAggregateMerge(self IN OUT t_multiply,
     18                                       ctx2 IN t_multiply)
     19    return number
     20  )
     21  /

     Type created

     SQL> create or replace type body t_multiply
       2  is
       3  
       4   static function ODCIAggregateInitialize(nctx IN OUT t_multiply)
       5   return number
       6   is
       7   begin
       8     nctx := t_multiply(1);
       9     return ODCIConst.Success;
      10   end;
      11  
      12   member function ODCIAggregateIterate(self IN OUT t_multiply,
      13                                        value IN number)
      14   return number
      15   is
      16  
      17   begin
      18    total := total * value;
      19    return ODCIConst.Success;
      20   end;
      21  
      22   member function ODCIAggregateTerminate(self IN t_multiply,
      23                                          retVal OUT number,
      24                                          flags IN number)
      25   return number
      26   is
      27   begin
      28     retval := total;
      29     return ODCIConst.Success;
      30   end;
      31  
      32   member function ODCIAggregateMerge(self IN OUT t_multiply,
      33                                      ctx2 IN t_multiply)
      34   return number
      35   is
      36   begin
      37     return ODCIConst.Success;
      38   end;
      39  end;
      40  /

      Type body created

      SQL> CREATE OR REPLACE FUNCTION multiply(input in number)
        2  RETURN number
        3  PARALLEL_ENABLE AGGREGATE USING t_multiply;
        4  /

      Function created 
    ```

    示范：

    ```
     SQL> with t1(col1, col2) as(
        2    select 1, 1 from dual union all
        3    select 1, 2 from dual union all
        4    select 1, 3 from dual union all
        5    select 1, 4 from dual
        6  )
        7  select col1
        8       , sum(col2) over(partition by col1 order by col2) as sum1
        9       , multiply(col2) over(partition by col1 order by col2) as mult
       10    from t1
       11  ;

         COL1       SUM1       MULT
       ---------- ---------- ----------
          1          1          1
          1          3          2
          1          6          6
          1         10         24 
    ```

2.  您可以使用模型子句来达到预期的结果：

    ```
     SQL> with t1(col1, col2) as(
       2    select 1, 1 from dual union all
       3    select 1, 2 from dual union all
       4    select 1, 3 from dual union all
       5    select 1, 4 from dual
       6  )
       7  select c1
       8       , col2
       9       , mult
      10   from t1
      11   model
      12   partition by (col1 as c1)
      13   dimension by (row_number() over(order by col2) rn)
      14   measures(col2, 1 as mult)
      15   rules(
      16     mult[rn] = nvl(mult[cv() - 1], 1) * col2[cv()]
      17   )
      18  ;

         C1       COL2       MULT
      ---------- ---------- ----------
         1          1          1
         1          2          2
         1          3          6
         1          4         24 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T13:36:08.000

将@DavidAldridge 的建议放入代码中（并注意处理负值）可能如下所示：

```
WITH T AS
(
    SELECT 2 AS X FROM DUAL
    UNION ALL
    SELECT -3 AS X FROM DUAL
    UNION ALL
    SELECT 4 AS X FROM DUAL
)
SELECT
    CASE
        -- If there are any zeroes, then the result is zero.
        WHEN MAX(CASE WHEN X = 0 THEN 1 END) > 0 THEN 0
        -- Otherwise, if there is an even (or zero) number of 
        -- negative numbers, the result is positive.
        WHEN MOD(COUNT(CASE WHEN X < 0 THEN 1 END), 2) = 0 THEN 1
        -- Otherwise, the result is negative.
        ELSE -1
    END
    *
    EXP
    (
        SUM
        (
            CASE
                WHEN X = 0 THEN 0
                ELSE LN(ABS(X))
            END              
        )
    )
FROM
    T; 
```

但是，需要注意的一件事是，与直接使用乘法的方法（如@NicholasKrasnov 建议的那些方法）相比，这种方法可能存在更大的舍入错误风险。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T11:41:27.823

这样做的经典方法是取值的对数之和的指数，注意正确处理负零。

# php - 在PHP中对所有表格行字段求和

> ID：13624915
> 
> 赞同：0
> 
> 时间：2012-11-29T11:36:16.797
> 
> 标签：php, mysql, sum

我有 4 个表，其中所有表都有 3 行 [记录] 和 3 列 [字段] 字段，如日期名称总计。该表如下所示：

第一个表

```
 Date                  Name                      Total
 2012-11-07             Manoj                       10
 2012-11-08             Ganesh                       4
 2012-11-09             Sri                         30 
```

第二张表

```
 Date                   Name                      Total
2012-11-07               Raju                         5
2012-11-08               ggg                          3
2012-11-09               Shshi                       30 
```

第三表

```
 Date                   Name                      Total
2012-11-07              Ram                         2
2012-11-08               gm                         5
2012-11-09             Shsse                       30 
```

我需要输出类似于 PHP 中的以下类型

```
Date          Total
2012-11-07      17
2012-11-08      12
2012-11-09      90 
```

它应该在 PHP 中显示日期之间的所有总数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T11:39:50.283

您可以使用`UNION ALL`：

```
select date, sum(total) AllTotal
from
(
  select date, total
  from table1
  union all
  select date, total
  from table2
  union all
  select date, total
  from table3
) src
group by date 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/5fec0/2)

或者您可以使用`LEFT JOIN`与此类似的：

```
select t1.date, sum(t1.total + t2.total + t3.total) AllTotal
from table1 t1
left join table2 t2
  on t1.date = t2.date
left join table3 t3
  on t1.date = t3.date
group by t1.date 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/5fec0/4)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T11:39:45.340

```
SELECT DATE, SUM(Total) totalSum
FROM
(
    SELECT * FROM tableA
    UNION ALL
    SELECT * FROM TableB
    UNION ALL 
    SELECT * FROM tableC
) s
GROUP BY DATE 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/62e50/1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T11:40:28.973

```
select tbl1.date,sum(total)
from tbl1,
tbl2,
tbl3
where tbl1.date = tbl2.date and
tbl2.date = tbl3.date
group by tbl1.date; 
```

# json - Facebook 洞察 API 现已推出 4 天

> ID：13624917
> 
> 赞同：1
> 
> 时间：2012-11-29T11:36:20.383
> 
> 标签：json, facebook-insights

我有很多页面可以通过 Graph API 下载见解。所有页面的统计数据在 11 月 25 日左右停止更新。现在是第 29 个，并且只有使用 since= 参数可以获得管理统计信息。

我还通过资源管理器页面（https://developers.facebook.com/tools/explorer）独立验证了这一点

我知道普遍接受的延迟是 48 小时。我可以做些什么来获取最新数据吗？

# java - org.apache.axis2.AxisFault：服务器本地主机未能响应

> ID：13624927
> 
> 赞同：2
> 
> 时间：2012-11-29T11:36:48.180
> 
> 标签：java, tomcat, axis2

我正在编写一个部署在 tomcat 上的 web 服务，当客户端调用 web 服务时，它设法成功发送信息，但是当我应该得到回复时，我在控制台中收到如下错误消息我确实注意到 tomcat 崩溃并关闭，每次我运行客户端时，我都必须再次启动 tomcat

```
at org.apache.axis2.AxisFault.makeFault(AxisFault.java:430)
at org.apache.axis2.transport.http.HTTPSender.sendViaPost(HTTPSender.java:203)
at org.apache.axis2.transport.http.HTTPSender.send(HTTPSender.java:76)
at        org.apache.axis2.transport.http.CommonsHTTPTransportSender.writeMessageWithCommons(CommonsHTTPTransportSender.java:400)
at org.apache.axis2.transport.http.CommonsHTTPTransportSender.invoke(CommonsHTTPTransportSender.java:225)
at org.apache.axis2.engine.AxisEngine.send(AxisEngine.java:438)
at org.apache.axis2.description.OutInAxisOperationClient.send(OutInAxisOperation.java:402)
at org.apache.axis2.description.OutInAxisOperationClient.executeImpl(OutInAxisOperation.java:229)
at org.apache.axis2.client.OperationClient.execute(OperationClient.java:165)
at ws.test.WebserviceSTSStub.certificate(WebserviceSTSStub.java:184)
at client.Client.main(Client.java:144)
Caused by: org.apache.commons.httpclient.NoHttpResponseException: The server localhost failed to respond
at org.apache.commons.httpclient.HttpMethodBase.readStatusLine(HttpMethodBase.java:1976)
at org.apache.commons.httpclient.HttpMethodBase.readResponse(HttpMethodBase.java:1735)
at org.apache.commons.httpclient.HttpMethodBase.execute(HttpMethodBase.java:1098)
at org.apache.commons.httpclient.HttpMethodDirector.executeWithRetry(HttpMethodDirector.java:398)
at org.apache.commons.httpclient.HttpMethodDirector.executeMethod(HttpMethodDirector.java:171)
at org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:397)
at org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:346)
at org.apache.axis2.transport.http.AbstractHTTPSender.executeMethod(AbstractHTTPSender.java:560)
at org.apache.axis2.transport.http.HTTPSender.sendViaPost(HTTPSender.java:199)
... 9 more
Failed at communicating methods 
```

这是来自 tomcat 的日志文件

```
Nov 29, 2012 3:26:44 PM org.apache.coyote.AbstractProtocol pause
INFO: Pausing ProtocolHandler ["http-apr-8080"]
Nov 29, 2012 3:26:44 PM org.apache.coyote.AbstractProtocol pause
INFO: Pausing ProtocolHandler ["ajp-apr-8009"]
Nov 29, 2012 3:26:44 PM org.apache.catalina.core.StandardService stopInternal
INFO: Stopping service Catalina
Nov 29, 2012 3:26:44 PM org.apache.catalina.core.StandardWrapper unload
INFO: Waiting for 1 instance(s) to be deallocated
Nov 29, 2012 3:26:45 PM org.apache.catalina.core.StandardWrapper unload
INFO: Waiting for 1 instance(s) to be deallocated
Nov 29, 2012 3:26:46 PM org.apache.catalina.core.StandardWrapper unload
INFO: Waiting for 1 instance(s) to be deallocated
Nov 29, 2012 3:26:47 PM org.apache.catalina.loader.WebappClassLoader         clearReferencesThreads
SEVERE: The web application [/axis2] is still processing a request that has yet to     finish. This is very likely to create a memory leak. You can control the time allowed for     requests to finish by using the unloadDelay attribute of the standard Context implementation.
Nov 29, 2012 3:26:47 PM org.apache.catalina.loader.WebappClassLoader checkThreadLocalMapForLeaks
SEVERE: The web application [/axis2] created a ThreadLocal with key of type [java.lang.ThreadLocal] (value [java.lang.ThreadLocal@1b3cbc9]) and a value of type [org.apache.axis2.context.MessageContext] (value [[MessageContext: logID=urn:uuid:81669E5CA369177A451354188407165]]) but failed to remove it when the web application was stopped. Threads are going to be renewed over time to try and avoid a probable memory leak.
Nov 29, 2012 3:26:47 PM org.apache.catalina.loader.WebappClassLoader checkThreadLocalMapForLeaks
SEVERE: The web application [/axis2] created a ThreadLocal with key of type [org.apache.xmlbeans.XmlBeans$1] (value [org.apache.xmlbeans.XmlBeans$1@1080026]) and a value of type [java.lang.ref.SoftReference] (value [java.lang.ref.SoftReference@41ca9a]) but failed to remove it when the web application was stopped. Threads are going to be renewed over time to try and avoid a probable memory leak.
Nov 29, 2012 3:26:47 PM org.apache.catalina.loader.WebappClassLoader checkThreadLocalMapForLeaks
SEVERE: The web application [/axis2] created a ThreadLocal with key of type [org.apache.xmlbeans.impl.store.CharUtil$1] (value [org.apache.xmlbeans.impl.store.CharUtil$1@15c4bc6]) and a value of type [java.lang.ref.SoftReference] (value [java.lang.ref.SoftReference@72b4dc]) but failed to remove it when the web application was stopped. Threads are going to be renewed over time to try and avoid a probable memory leak.
Nov 29, 2012 3:26:47 PM org.apache.catalina.loader.WebappClassLoader checkThreadLocalMapForLeaks
SEVERE: The web application [/axis2] created a ThreadLocal with key of type [org.apache.xmlbeans.impl.schema.SchemaTypeLoaderImpl$1] (value [org.apache.xmlbeans.impl.schema.SchemaTypeLoaderImpl$1@c001cd]) and a value of type [java.util.ArrayList] (value [[java.lang.ref.SoftReference@1b66f75]]) but failed to remove it when the web application was stopped. Threads are going to be renewed over time to try and avoid a probable memory leak.
Nov 29, 2012 3:26:47 PM org.apache.coyote.AbstractProtocol stop
INFO: Stopping ProtocolHandler ["http-apr-8080"]
Nov 29, 2012 3:26:47 PM org.apache.coyote.AbstractProtocol stop
INFO: Stopping ProtocolHandler ["ajp-apr-8009"] 
```

我无法判断服务的逻辑是否损坏，或者设置是设置不正确，但我得到的印象是服务无法找到发送请求的客户端

这可能是由外部库引起的吗？我使用刚刚放在 webapps\axis2\WEB-INF\lib 文件夹中的 bouncycastle 库

我在 webapps\axis2\WEB-INF\classes 中还有一个属性文件和一个 jaas 配置文件，我按如下方式访问它们

属性文件

```
Properties props = new Properties();
      props.load( new FileInputStream( "C:\\apache\\apache-tomcat-7.0.29\\webapps\\axis2\\WEB-INF\\classes\\server.properties")); 
```

JAAS 配置文件

```
System.setProperty( "java.security.auth.login.config", "C:\\apache\\apache-tomcat-7.0.29\\webapps\\axis2\\WEB-INF\\classes\\jaas.conf"); 
```

# c++ - 在编译时使用基于模板的长度初始化 const 数组

> ID：13624928
> 
> 赞同：6
> 
> 时间：2012-11-29T11:36:51.620
> 
> 标签：c++, templates, template-meta-programming

> **可能重复：**
> [在 C++ 编译时以编程方式创建静态数组](https://stackoverflow.com/questions/2978259/programmatically-create-static-arrays-at-compile-time-in-c)

是否可以在编译时初始化以下数组？

```
template<int n> void
foo()
{
    static int pairs[2*n]; // = {0,0, 1,1, ..., n-1,n-1}
    for (int i = 0; i < n; i++)
    {
         pairs[2*i] = pairs[2*i+1] = i;
    }

    do_something_with_pairs(pairs);
} 
```

（我在 Xcode 4.5 上使用 Clang，所以 C++11 可以）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T11:49:25.320

据我所知，不可能*扩展*数组初始化程序，这排除了基于递归模板的解决方案作为生成静态初始化数据的一种手段。

但是，您可以做一个简单的事情，即拥有一个包含尽可能多的数据点的静态数组。这可以通过一个简单的脚本生成。或者例如通过 Boost 预处理器库。

然后你可以只使用指向该数组的指针。

# php - MySQL 连接两个表，其中 PHP 变量中的 WHERE 语句已经存在

> ID：13624929
> 
> 赞同：3
> 
> 时间：2012-11-29T11:36:52.273
> 
> 标签：php, mysql, sql, join

我通常会这样做：

```
$query = "SELECT table1.ColA, table2.ColC ".
     "FROM table1, table2".
        "WHERE table1.uid = table2.uid"; 
```

但在这种情况下，WHERE 部分已经用于使用 PHP 变量指定记录。在这种情况下如何加入表 2？

```
SELECT SQL_CALC_FOUND_ROWS ColA, ColB FROM Table1 WHERE value = $value 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T11:39:14.570

他们已经加入了。它与

```
SELECT table1.ColA, table2.ColC 
FROM table1
INNER JOIN table2 ON  table1.uid = table2.uid 
```

如果您需要添加更多条件，请将它们添加到`WHERE`子句中：

```
SELECT table1.ColA, table2.ColC
FROM table1, table2
WHERE table1.uid = table2.uid
  AND value = $value; 
```

或者，使用 ANSI SQL-92 语法：

```
SELECT table1.ColA, table2.ColC 
FROM table1
INNER JOIN table2 ON  table1.uid = table2.uid
WHERE  value = $value; 
```

**请注意：**您应该始终使用后面的语法，用 with`JOIN`来连接表而不是`WHERE`子句。这是执行此操作的推荐方法。有关更多信息，请参阅[**此帖子**](https://stackoverflow.com/a/13289653/722783)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-29T11:45:18.377

请试试这个

```
$query = "SELECT table1.ColA, table2.ColC FROM table1, 
            table2 WHERE table1.uid = table2.uid and table1.value=$value"; 
```

或者

```
$query = "SELECT table1.ColA, table2.ColC FROM table1 INNER JOIN table2 
               ON (table1.uid = table2.uid) WHERE table1.value=$value"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T11:38:34.943

试试这个 ：：

```
SELECT 
SQL_CALC_FOUND_ROWS ColA, 
ColB 

FROM table1, table2
WHERE value = $value 
and table1.uid = table2.uid 
```

或者您可以通过以下方式加入表格

```
SELECT 
SQL_CALC_FOUND_ROWS ColA, 
ColB 

FROM table1 INNER JOIN table2 on table1.uid = table2.uid
WHERE value = $value 
```

# windows-phone-7 - 不可编辑的文本框，但能够选择文本和处理

> ID：13624932
> 
> 赞同：2
> 
> 时间：2012-11-29T11:36:58.617
> 
> 标签：windows-phone-7, c#-4.0, textbox, wp7test

我想在文本框中显示一些文本，并想从中选择一些文本并进行处理。但我不想编辑文本框。如何在 wp7 中实现这一点？只读文本框不允许您处理选定的文本。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T05:24:55.753

可能不是一个理想的解决方案，但如何使用文本块（每个单词）并为每个文本块添加鼠标输入事件？像这样，当他们触摸他们想要翻译的每个单词时，您可以单独处理每个单词吗？如果您有很多单词，则不理想，但对于少数单词，它可能会起作用。

# symfony - Symfony2+FOSOAuthServerBundle：无浏览器初始身份验证

> ID：13624933
> 
> 赞同：3
> 
> 时间：2012-11-29T11:37:00.403
> 
> 标签：symfony, oauth-2.0, symfony-2.1

我们有一个基于 Symfony2.1 的 webapp，我们正在尝试使用 OAuth 来保护一些 REST web 服务。这些 Web 服务将由 Android 应用程序使用。

我们正在尝试 FOSOAuthServerBundle，并且似乎可以验证来自其他网站的 Web 服务的使用，因为身份验证步骤完全基于 Web。

但我们需要的是下一个工作流程：

1.  用户在应用程序中输入他的用户名和密码
2.  然后，应用程序使用此信息自动检索有效的 Oauth 令牌。
3.  该应用程序使用此 Oauth 令牌作为参数，同时使用 OAuth 保护的 REST Web 服务。

这可能吗？FOSOAuthServerBundle 是我们需要的 Bundle 吗？我们如何在**没有用户交互**的情况下检索有效的 OAuth 令牌，仅使用用户名+密码作为身份验证的参数？

非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T09:51:06.453

是的，FOSOAuthServerBundle 可以为您做到这一点。只需根据[OAuth 2 规范](https://www.rfc-editor.org/rfc/rfc6749#section-4.3)使用 Resource Owner Password Credentials Grant 即可。

这是如何添加具有不同授权类型的客户端（应用程序）的说明[http://blog.logicexception.com/2012/04/securing-syfmony2-rest-service-wiith.html](http://blog.logicexception.com/2012/04/securing-syfmony2-rest-service-wiith.html)

可用授权类型列表：[https ://github.com/FriendsOfSymfony/oauth2-php/blob/b0e57e17c84175a51af01cef7bbb2961261c84ad/lib/OAuth2.php#L230](https://github.com/FriendsOfSymfony/oauth2-php/blob/b0e57e17c84175a51af01cef7bbb2961261c84ad/lib/OAuth2.php#L230)

# mocking - PHPUnit Mock Objects 默认情况下从不期望

> ID：13624938
> 
> 赞同：8
> 
> 时间：2012-11-29T11:37:29.033
> 
> 标签：mocking, phpunit, expectations

如果没有正式定义的期望，有没有办法告诉 phpunit 模拟对象永远不要期望方法调用？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-30T09:51:50.103

在我看来，永远不要期望每种方法都没有想法。所以 phpunit 没有任何功能。只有当您想完全确保某些方法不会被调用时，才能使用“从不”期望。

无论如何，您可以使用一些匹配器来接近您的目标。例子：

永远不要期望所有对象的方法（如果将调用任何模拟方法，则失败）：

```
$mock->expects($this->never())
    ->method($this->anything()); 
```

因此，例如，您可以测试某些对象不会调用除测试对象之外的任何方法：

```
$mock = $this->getMock('Some\Tested\Class', array('testedMethod'));
$mock->expects($this->never())
    ->method($this->anything()); 
```

您也可以尝试使用另一个匹配器，例如。`matchesRegularExpression`：

```
$mock->expects($this->never())
    ->method($this->matchesRegularExpression('/get.*/')); 
```

例如，如果调用任何 getter，上述示例将失败。

我知道这不是您想要的，但恐怕 phpunit 没有这样的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-01T15:17:21.123

如果您想测试在给出特定参数时永远不会调用方法，请使用

```
$mock->expects($this->any())
->method('foo')
->with(new PHPUnit_Framework_Constraint_Not('bar')); 
```

# jquery - jQuery变量输出

> ID：13624939
> 
> 赞同：0
> 
> 时间：2012-11-29T11:37:29.360
> 
> 标签：jquery

我的问题快把我逼疯了。

我已经声明了这样的 som 变量

```
var tip01 = "This is my first tip";
var tip02 = "This is my second tip"; 
```

根据我的查询字符串中的值，我想写出我的提示。

我的查询字符串：ex ?myQSvalue=01

```
var myQSvalue = getQueryString('myQSvalue');
var myTip = 'tip' + myQSvalue;

 $("#output").html(myTip); 
```

但输出是：`tip01`insted of `This is my first tip`。

我怎样才能实现这一点并在我声明的变量中输出内容？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T11:40:10.367

而不是不同的变量，你应该使用一个数组

```
var myTips = [];
myTips[0] = "This is my first tip";
myTips[1] = "This is my second tip"; 
```

然后在查询字符串上传递一个索引`?myQSvalue=0`

并从数组中读取：

```
var myQSvalue = parseInt(getQueryString('myQSvalue'),10);
$("#output").html(myTips[myQSvalue]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T13:17:58.813

感谢你的帮助。我采用了数组方法，效果很好。

但是 $("#output").html(window[myTip]); 对我不起作用。

在某些情况下，这种方法会很方便。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T11:42:36.603

Jamiec 已经指出了正确的方法，但为了将来参考，您可以将全局变量称为全局上下文的属性：

```
var myQSvalue = getQueryString('myQSvalue');
var myTip = 'tip' + myQSvalue;

 $("#output").html(window[myTip]); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T11:40:48.437

我建议改为在数组中定义提示，但您应该能够使用：

```
$("#output").html(window[myTip]); 
```

# c++ - 如何在运行 cpp 应用程序的 GUI 时通过 GDB 设置断点

> ID：13624940
> 
> 赞同：1
> 
> 时间：2012-11-29T11:37:30.123
> 
> 标签：c++, linux, gdb

我们已将一个应用程序从 solaris 迁移到 Linux。编码部分在 CPP 中完成。如果创建了任何核心文件，我们可以使用 GDB 对其进行调试。现在我们遇到了一些不同的错误，并且在运行应用程序时没有创建核心文件。

如果我们按下某个提交按钮，我们想知道应用程序中会发生什么。在这种情况下，我们如何在 GUI 中运行应用程序时调试我们的 cpp 代码并设置断点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T11:42:24.120

您是否尝试过使用 gdb 启动应用程序。此[链接](http://www.cs.cmu.edu/~gilpin/tutorial/#3.2)提供了在 GDB 中运行应用程序的方法。因此，您的 GUI 应用程序在 GDB 中启动，然后使用适当的断点，当单击“提交”时，应用程序必须在相关位置停止。

简而言之，在 linux 中使用 GDB 运行 GUI 或非 GUI 应用程序一定不会有太大变化。

# javascript - 如何在javascript中找到捏的方向？

> ID：13624944
> 
> 赞同：5
> 
> 时间：2012-11-29T11:37:47.613
> 
> 标签：javascript, jquery, touch

在我的网络应用程序中，我有一个 div，它将根据捏合方向更改高度和宽度。例如，如果用户水平捏它会改变宽度，垂直捏它会改变高度。

我正在使用手势事件

```
var scaleMe = $("#scaleMe");  
scaleMe[0].ongesturestart = function (e) {
    height = scaleMe .height();
}

scaleMe[0].ongesturechange = function (e) {
    e.preventDefault();                 
    var scaleheight = (scaleMe.height() * e.scale); 
    scaleMe.height(Math.min(Math.max(scaleheight, 50), 400));
} 
```

有没有办法找到捏的方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T17:55:28.003

如果我理解正确..

在“guesturestart”上，您应该保存其中一种手势的捏坐标（或者您可以保存所有手势以获得更好的精度）

> var allTouches = event.originalEvent.touches;
> 
> var prevTouchX = allTouches[0].pageX;
> 
> var prevTouchY = allTouches[0].pageY;

然后，在“guesturechange”上，你必须计算，什么轴运动更长

> var allTouches = event.originalEvent.touches;
> 
> var touchX = allTouches[0].pageX;
> 
> var touchY = allTouches[0].pageY;
> 
> var propertyToChange = null;
> 
> if (Math.abs(touchX - prevTouchX) > Math.abs(touchY - prevTouchY)) >{
> 
> propertyToChange = '宽度';
> 
> } 别的 {
> 
> propertyToChange = '身高';
> 
> }

希望它有用。

# python - 如何检查用户在页面上的权限？

> ID：13624946
> 
> 赞同：1
> 
> 时间：2012-11-29T11:37:55.800
> 
> 标签：python, django

我需要允许用户根据他的权限查看页面的某些部分。

我在这里看到了一些答案，例如使用`@user_passes_test`（[Django - 对某些视图的用户权限？](https://stackoverflow.com/questions/4597401/django-user-permissions-to-certain-views)）并检查模板（[我应该在模板和视图中使用 Django 权限检查吗？](https://stackoverflow.com/questions/8904338/should-i-use-django-permissions-checks-in-the-template-and-the-view)）。

在后者**@e-satis**的回答中指出，对于我的情况，我应该在模板上使用检查。

我的问题是：我该怎么做？最好的方法（性能和安全性）是什么？

为了说明我的需要，我想到了 Facebook。在 Facebook，您允许某些用户查看您的个人资料页面的某些部分或全部。这正是我需要实现的行为。

我很欣赏你的想法。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T12:13:31.280

根据您的示例，我假设您指的是 Django 包上下文中的权限，而不是身份验证检查 (is_authenticated())。这实际上非常直截了当，并在**e-satis** '在[这里](https://stackoverflow.com/questions/9469590/check-permission-inside-a-template-in-django)给出的答案中给出了完整的答案。

**编辑**看起来给出了更好的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T12:13:07.930

它在 django[文档中](https://docs.djangoproject.com/en/dev/topics/auth/#id9)

基本上

```
{% if perms.foo %}
    <p>You have permission to do something in the foo app.</p>
{% else %}
    <p>You don't have permission to do anything in the foo app.</p>
{% endif %} 
```

# xcode - 使用 DAO 管理器和块实现 DAO 层

> ID：13624949
> 
> 赞同：0
> 
> 时间：2012-11-29T11:38:03.740
> 
> 标签：xcode, ios5, objective-c-blocks, dao, data-layers

基于页面上的 JAVA 教程：http: [//tutorials.jenkov.com/java-persistence/dao-manager.html](http://tutorials.jenkov.com/java-persistence/dao-manager.html)，

我试图用 xCode for iOS 实现相同的概念。

目标是提供一个 DAOManager ：一个 DAOCommand（定义为协议）+他的 execute 方法的实现。我可以创建一个实现协议的特定接口，但正如上面提到的例子，我想在调用它时实现该方法。如果我是对的，可以使用 BLOCK 在objective-c 中实现这一点。

上述页面上提供的 java 代码示例：

```
 public interface DaoCommand {
   public Object execute(DaoManager daoManager);
 } 
```

请求 CRUD 服务的代码示例：

```
 DaoManager daoManager = daoFactory.createDaoManager();
  Person person = (Person)
  daoManager.executeAndClose(new DaoCommand(){

    public Object execute(DaoManager manager){
      return manager.getPersonDao().readPerson(666);
    }

  }); 
```

我尝试通过以下方式实现它： 1/ DAOCommand：

```
@protocol IDaoCommand

- (id) executeUsingManager:(DAOManager*)pDAOManager;

@end 
```

2/ 我的 PoiCRUDService 接口，带有一个调用 DAOManager 的方法 getListOfPoi ：

```
- (id) getListOfPoi {

DAOFactory* daoFactory = [[DAOFactory alloc] initWithOfflineMode:YES];
DAOManager* daoManager = [daoFactory createManager];

[daoManager executeAndCloseDaoCmdBlock:^(id<POIDAO> pPoiDAO) {
    [pPoiDAO getListPoi];
}];
 } 
```

3/ 我的 DAOManager 有一个方法 executeAndClose ：

```
- (id) executeAndCloseDaoCmdBlock:(id(^)(id<IDaoCommand>))pDaoCmdBlock {

// Execute the query
//id returnObject = [[self getPoiDAO] getListPoi];
id returnObject = pDaoCmdBlock(self);

// Close the connection
[self.dataSource closeConnection];

return returnObject;
} 
```

当我看到我的代码时，我没有看到 DAOEntity (POIDAO) 的创建。实际上，我很难看到如何将示例 Java 代码转换为 xCode。关于步骤和方法的任何想法？

感谢您的任何想法或建议。英石。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T21:17:33.213

这是我的建议。由于Java中缺少函数类型，它似乎`DaoCommand`只是用作函数对象接口。在 Objective-C 中，你可以只是一个块类型。`DaoCommand`为方便起见，您可以 typedef 。

```
typedef id (^DaoCommand)(DaoManager *); 
```

然后您的样本的精确翻译将类似于：

```
DaoManager *daoManager = [daoFactory createDaoManager];
Person *person =
[daoManager executeAndClose:^(DaoManager *manager){
    return [[manager getPersonDao] readPerson:666];
 }]; 
```

我无法为您提供其他功能的任何帮助，因为我没有看到他们的 Java 代码，但`executeAndClose:`现在应该采用类型参数`DaoCommand`（这是一个块类型）。确保遵循块的正常编码规则，你应该被设置。

# java - 为什么 xercesImpl 要将自己的 XML API 引入我的 maven 项目，而所有 XML API 都在 rt.jar 中？

> ID：13624950
> 
> 赞同：2
> 
> 时间：2012-11-29T11:38:14.073
> 
> 标签：java, maven, xerces

当我将 xercesImpl-2.9.1 添加到我的 maven 项目的 pom 时，xml-apis-1.3.04.jar 作为 xercesImpl-2.9.1 的编译范围依赖项进入我的项目程序集。xml-apis-1.3.04 包含 javax.xml。*, org.w3c.dom。*和 org.sax.xml.*。做什么的？所有这些 API 都由 rt.jar 提供（至少从 1.5 开始）。一个典型的独立应用程序将忽略 xml-apis-1.3.04.jar 并从 rt.jar 加载 XML API 类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T09:17:14.173

这可能是为了向后兼容旧的 JRE（是的，我知道没有人会继续使用它们，但只需查看有关 Java 1.4.2 的问题数量）。

# javascript - WebSocket 的 url 方案错误

> ID：13624952
> 
> 赞同：4
> 
> 时间：2012-11-29T11:38:23.917
> 
> 标签：javascript, playframework-2.0

我在 play 2.1 中有一个 websockets 程序，它工作得很好，模板看起来像这样：

```
// Contents of the view.scala.html file
@(userName: String)(implicit request: RequestHeader)

@main("text") {
  <script type="text/javascript" charset="utf-8">
  $(function() {
    var WS = window['MozWebSocket'] ? MozWebSocket : WebSocket;
    alert("before")
    var socket = new WS("@routes.Application.view(userName).webSocketURL()");
    alert("after")
    socket.onmessage = function(event) {
      alert(event.data);
    };
  });
  </script>
} 
```

问题是，一旦我将我的 javascript 移动到`assets.javascripts`文件夹中并将`view.scala.html`文件更改为以下文件，它就会停止工作。

```
// Contents of the view.scala.html file
@(userName: String)(implicit request: RequestHeader)

@main("text") {
  <script type="text/javascript" charset="utf-8"
          src="@routes.Assets.at("javascripts/viewer.min.js")"></script>
} 
```

Play 找到文件，执行 javascript，我可以看到由`alert("before")`代码行触发的弹出窗口，但之后......什么都没有。

这是我在控制台中遇到的 google chrome 错误：

```
Wrong url scheme for WebSocket
http://localhost:9000/@routes.Application.view(userName).webSocketURL() 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-29T11:41:25.427

WebSocket 需要`ws://`或`wss://`（对于 SSL）而不是`http://`.

但是，您的代码中的问题是该语句`@routes.Application.view(userName).webSocketURL()`显然没有被一些有用的值替换，而是保持原样。这是因为您的框架似乎将资产视为完全静态的，因此忽略了其中任何可能是普通模板中的占位符/变量的内容。

解决您的问题的一种可能方法是将 URL 保留在您的模板中，例如通过添加`data-ws="@....."`到您的`<body>`标签，然后使用 JavaScript 来提取该属性：

```
var socket = new WebSocket(document.body.getAttribute('data-ws')) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-11T10:06:38.093

我使用了以下内容：

> ```
>  ws=new WebSocket("ws://localhost:8080/websocket/wsserver"); 
> ```

谢谢。

# linq - 在 NHibernate 3.2 中左加入 linq

> ID：13624959
> 
> 赞同：4
> 
> 时间：2012-11-29T11:38:52.190
> 
> 标签：linq, nhibernate, left-join

是否可以在 NHibernate 3.2 的 linq 中实现左连接？

我想实现类似于此 sql 查询的 linq 查询：

```
select v.*, cp.EffectiveStart
from Visits v
join VisitServices vs on v.Id = vs.VisitId
left join CarePlans cp on cp.Id = vs.CarePlanId 
```

我写了这样的 linq 查询：

```
var c = (from v in EntitiesRepository
                     join vs in _visitServiceRepository on v.Id equals vs.Visit.Id
                     join cp in _carePlanRepository on vs.CarePlan.Id equals cp.Id into pp                     
                     from pl in pp.DefaultIfEmpty()
                     select new { Visit = v, EffectiveStart = pl.EffectiveStart}).ToList(); 
```

但我得到了这个例外

> 该方法或操作未实现。

**答**：我能够使用导航属性解决问题：

```
 var c = (from v in EntitiesRepository
             join vs in _visitServiceRepository on v.Id equals vs.Visit.Id
             select new { Visit = v, EffectiveStart = vs.CarePlan == null ? null : (DateTime?)vs.CarePlan.EffectiveStart}).ToList(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T11:47:37.850

当前仅在导航属性上支持外部联接。例子：

```
from child in parent.Children.DefaultIfEmpty() 
```

编辑：对不起，好像那不在 3.2 中。不能更新吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T12:42:05.467

我能够使用导航属性解决问题：

```
 var c = (from v in EntitiesRepository
             join vs in _visitServiceRepository on v.Id equals vs.Visit.Id
             select new { Visit = v, EffectiveStart = vs.CarePlan == null ? null : (DateTime?)vs.CarePlan.EffectiveStart}).ToList(); 
```

# android - 在 Android 应用程序中从平板电脑调用

> ID：13624960
> 
> 赞同：-1
> 
> 时间：2012-11-29T11:38:56.070
> 
> 标签：android, android-intent, tablet

> **可能重复：**
> [Android 应用程序中的调用显示添加联系人对话框](https://stackoverflow.com/questions/13624599/call-in-android-application-shows-add-contact-dialog)

如何从平板电脑（Acer ICONIA TAB A501）在 Android 应用程序中拨打电话？

我试过这个代码：

```
Intent callIntent = new Intent(Intent.ACTION_CALL);    
callIntent.setData(Uri.parse("tel:" + call.Number));   
startActivity(callIntent); 
```

但这会打开一个对话框，要求将电话号码添加到我的联系人中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T12:00:40.917

您不能在 Acer iconia 上执行此操作。某些设备不支持呼叫设施（超过 2g 或 3g 网络），至少不支持此设备。这可能是由于某些硬件问题或它可能被锁定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T11:43:50.867

尝试使用 ACTION_DIAL 代替 [http://developer.android.com/reference/android/content/Intent.html#ACTION_DIAL](http://developer.android.com/reference/android/content/Intent.html#ACTION_DIAL)

# java - 使用正确的转义路径执行命令

> ID：13624961
> 
> 赞同：4
> 
> 时间：2012-11-29T11:39:01.860
> 
> 标签：java, launching-application

请参阅[此超级用户](https://superuser.com/questions/512261/explorer-programmatically-select-file-directory-with-space-in-the-path)问题。我需要运行命令

```
explorer.exe /select,"C:\Program Files\foobar" 
```

来自爪哇。下面的 Java 代码不像上面的命令行调用那样工作（资源管理器选择一个完全不同的目录）：

```
Runtime.getRuntime().exec(new String[] {
    "explorer.exe",
    "/select,\"C:\\Program Files\\foobar\""
}); 
```

我在纯 Java 方面还有哪些其他选择（没有本机代码）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T11:51:58.677

您可以将其`/select`放在一个单独的`String`标记中以阻止它被视为路径的一部分：

```
Runtime.getRuntime().exec(new String[] {
        "explorer.exe",
        "/select,", 
        "\"C:\\Program Files\\foobar\""
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T11:46:47.003

试试 ProcessBuilder。该 API 允许您在不引用的情况下传递参数。请参阅[http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/ProcessBuilder.html#command(java.util.List](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/ProcessBuilder.html#command(java.util.List) )

# java - Java，选择随机并插入

> ID：13624962
> 
> 赞同：0
> 
> 时间：2012-11-29T11:39:10.247
> 
> 标签：java

好的，示例无关紧要。我只是用它来把它放在上下文中。但基本上我想知道如何从数组/数组列表中获取随机值？

我尝试使用它：`int random = (int)input[Math.floor(Math.random() * input.length)];` 但它突出了潜在的精度损失，即使我已经`cast`这样做了。我投错了吗？

这个例子真的无关紧要，我接受我所有问题的答案。最初我想在不受我影响的情况下看到一个正确的答案，看看我是否走在正确的轨道上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T11:44:22.103

这正是**[装箱问题](http://en.wikipedia.org/wiki/Bin_packing_problem)**。它也是[NP-Complete](http://en.wikipedia.org/wiki/NP-complete)，因此没有已知[的多项式解决方案（一般假设是不存在，但尚未证明](http://en.wikipedia.org/wiki/P_versus_NP_problem)）。

如果您正在寻找近似算法或相对有效[的精确算法，则该问题被广泛研究](http://link.springer.com/article/10.1007/s10479-009-0557-9?LI=true)

* * *

**PS** - 你建议的随机方法会给你一个解决方案，但它不会是最优的。
**反例：**

```
arr = [2,3,4,1] , size=5 
```

您的算法的可能解决方案可能是：`select 3, select 1, select 4, select 2`，这将产生：

```
[3,1],[4],[2] 
```

虽然最佳解决方案将是`[3,2],[4,1]`

（-）我相信贪婪的方法（选择最高的，把它放在一个可用的箱子里——如果合适，如果不合适——“打开”一个新的箱子）会比随机解决方案做得更好，但仍然不会最优，反例：

```
arr = [5,4,4,3,2,2] size = 10 
```

贪婪会产生`[5,4],[4,3,2],[2]`，而最优是`[5,3,2],[4,4,2]`

* * *

**关于损失 pf 精度**- 发生这种情况是因为`Math.floor(double)`产生 a `long`，而您将其用作 a `int`（理论上这样做时您可能会丢失数据）。但是，在您的情况下这不是问题，因为`Math.floor(Math.random() * input.length`保证在 an 范围内，`int`因为`input.length`是 int 和`Math.random() < 1`。

# mysql - 使用 VBA 在 Excel 中使用 SQL 样式的查询

> ID：13624967
> 
> 赞同：3
> 
> 时间：2012-11-29T11:39:22.477
> 
> 标签：mysql, sql, excel, vba

我有一个大的 excel 表，看起来类似于：

```
date       |  name  |  age  |  type
10/10/2012 | James  |  12   |  man 
11/10/2012 | Jane   |  50   |  woman 
12/10/2012 | Freddy |  2    |  dog
13/10/2012 | Bob    |  23   |  man
14/10/2012 | Mary   |  34   |  woman 
```

我想要做的是创建一个新的、动态生成的表格来显示所有的男人。

在 SQL 中，这将是一个同步：`"SELECT * FROM table WHERE type='men'"`. 我以前从未在 excel 中使用过 VBA（尽管我是一位经验丰富的 PHP/Javascript 程序员，并且在 MS Access 中使用过 VBA），所以我正在寻找初学者的说明来帮助我入门。也许有人可以推荐一个简单的教程或博客文章来完成我需要做的事情？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T15:08:41.973

我花了一天的大部分时间，但我已经弄清楚了。这是代码：

```
Sub Excel_QueryTable()

Sheet2.Cells.ClearContents

Dim oCn As ADODB.Connection
Dim oRS As ADODB.Recordset
Dim ConnString As String
Dim SQL As String

Dim qt As QueryTable

ConnString = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=C:\t.xlsm;Extended Properties=Excel 8.0;Persist Security Info=False"
Set oCn = New ADODB.Connection
oCn.ConnectionString = ConnString
oCn.Open

SQL = "Select * from [Sheet1$] WHERE type='man'"

Set oRS = New ADODB.Recordset
oRS.Source = SQL
oRS.ActiveConnection = oCn
oRS.Open

Set qt = Worksheets(2).QueryTables.Add(Connection:=oRS, _
Destination:=Range("A1"))

qt.Refresh

If oRS.State <> adStateClosed Then
oRS.Close
End If

If Not oRS Is Nothing Then Set oRS = Nothing
If Not oCn Is Nothing Then Set oCn = Nothing

End Sub 
```

要使其在您自己的工作簿上运行，您需要将`Data Source`路径更改为您正在使用的文件的名称。

`[Sheet1$]`查询中是您从中选择的工作表的名称（留在 中`$`）。

`Worksheets(2)`是您在其中创建动态表的工作表的编号。

此外，您需要通过在 Excel 中的 VBA 编辑器中启用其中一个`Microsoft Active X Data Objects`库。`Tools>References`

# .htaccess - .htaccess 与同一规则冲突

> ID：13624972
> 
> 赞同：0
> 
> 时间：2012-11-29T11:39:32.473
> 
> 标签：.htaccess

我的规则如下：

```
RewriteEngine On
RewriteRule ^([a-zA-Z0-9_-]+)$ doctor_viewprofile.php?hid2=$1 [L,NC]
RewriteRule ^([a-zA-Z0-9_-]+)$ blog_mgt_full.php?a=$1&cuserid=$2&cusertype=$3 [L,NC] 
```

第二条规则与第一条规则冲突并重定向到第一条规则或页面。我不确定为什么会这样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T22:24:45.023

> 我不确定为什么会这样。

发生这种情况是因为两个规则都**匹配完全相同的模式**。两者都与 匹配`^([a-zA-Z0-9_-]+)$`，因此第二条规则永远不会被应用，因为第一条规则总是匹配的。没有办法解决这个问题，因为没有办法区分什么应该是 a`doctor_viewprofile.php`和什么应该是 a `blog_mgt_full.php`。您可以尝试添加前缀，使您的网址看起来像

```
http://www.domain.com/doctor/foo 
```

和

```
http://www.domain.com/blog/foo 
```

所以规则可以修改为：

```
RewriteRule ^doctor/([a-zA-Z0-9_-]+)$ doctor_viewprofile.php?hid2=$1 [L,NC]
RewriteRule ^blog/([a-zA-Z0-9_-]+)$ blog_mgt_full.php?a=$1&cuserid=$2&cusertype=$3 [L,NC] 
```

# php - 验证上传的文件类型

> ID：13624975
> 
> 赞同：0
> 
> 时间：2012-11-29T11:39:33.903
> 
> 标签：php, mysql

为什么下面没有识别出正在上传的图像（.jpg）？

我收到上传的文件不是图片！！！

```
$finfo = finfo_open(FILEINFO_MIME_TYPE, 'C:\xampp\php\extras\magic\magic.mime');
if(strpos(finfo_file($finfo, $_FILES['userfile']['tmp_name']),"image")===0) {    

  // prepare the image for insertion
  $imgData =addslashes (file_get_contents($_FILES['userfile']['tmp_name']));

  // put the image in the db...
  // database connection
  mysql_connect($host, $user, $pass) OR DIE (mysql_error());

  // select the db
  mysql_select_db ($db) OR DIE ("Unable to select db".mysql_error());

  // our sql query
  $sql = "INSERT INTO uploaded_images
  (image, name)
  VALUES
  ('{$imgData}', '{$_FILES['userfile']['name']}');";

  // insert the image
  mysql_query($sql) or die("Error in Query: " . mysql_error());
  $msg='<p>Image successfully saved in database with id ='. mysql_insert_id().' </p>';
}
else
  $msg="<p>Uploaded file is not an image.</p>"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T12:13:48.380

如果您无权访问 GD 库，您可以简单地使用 `getimagesize()`它，如果它不是图像，则会返回 false。[http://php.net/manual/en/function.getimagesize.php](http://php.net/manual/en/function.getimagesize.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T11:51:22.140

检测文件类型出奇地不可靠。一些更简单的低级文件类型检测程序只是使用文件扩展名来尝试确定类型。

最好使用专门处理图像的工具，例如`imagemagick`，如果您有能力将其安装在运行代码的服务器上。这是一个示例，它将告诉您文件是否实际上是 JPEG 图像，而不依赖于文件名：

```
exec("identify $image_file",$out);
if(!empty($out)){
    $info = $out[0];
    $info = explode(' ',$out[0]);
    $type = $info[1];
    if($type == 'JPEG'){
        return true;
    }
} 
```

但是，如果您无权安装 imagemagick，您可以使用 GD 库。否则，您要么必须相信文件扩展名是正确的，要么只相信文件是图像。

在单独的说明中，将图像保存在数据库中很少是一个好主意，尤其是当它们作为渲染图像交付时。MySQL 的设计并不是为了高效。最好将它们作为文件存储在可以公开查看的目录中。话虽如此，我不知道您的申请，因此您将最适合确定最佳行动方案。

# mysql - MySQL 错误 1005

> ID：13624978
> 
> 赞同：0
> 
> 时间：2012-11-29T11:39:41.510
> 
> 标签：mysql, sql, mysql-error-1005

我在 MySQL 中创建 3 个表（用户、链接帖子、回复帖子）

前两个表执行得很好，但是当我尝试插入replyPosts 的SQL 时出现错误。以下是三张表的SQL代码：

第一个表 SQL 代码：工作正常

```
CREATE TABLE Users ( 
userName VARCHAR (20) NOT NULL PRIMARY KEY,
password VARCHAR (20),
firstName VARCHAR (200),
lastName VARCHAR (200),
bio VARCHAR (160),
email VARCHAR (200),
country VARCHAR (200)
); 
```

第二张表的代码：工作正常

```
CREATE TABLE linkPosts ( 
linkPostID INT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,
link VARCHAR(255),
linkDescription VARCHAR (140), 
linkPostTime TIMESTAMP,
userName VARCHAR (20),
FOREIGN KEY (userName) REFERENCES Users(userName)); 
```

出现错误的第三个表：

```
CREATE TABLE replyPosts ( 
replyPostID INT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,
reply VARCHAR (140), 
replyPostTime TIMESTAMP,
userName VARCHAR (20),
linkPostID INT,
FOREIGN KEY (linkPostID) REFERENCES linkPosts(linkPostID),
FOREIGN KEY (userName) REFERENCES Users(userName)); 
```

我得到的错误如下：

```
Error 1005 : Can't create table 'mdb_aa847.replyPosts' (errno: 150) 
```

我搜索并尝试了其他人的解决方案，但从未奏效。任何人都可以弄清楚错误在哪里？

提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T11:50:41.007

表**replyPosts**是否已经存在？如果您有重复的外键名称，则可能会发生此错误。将[perror](http://dev.mysql.com/doc/refman/5.0/en/perror.html)与**errno**一起使用（在您的情况下，它的错误 150），您应该得到：

```
MySQL error code 150: Foreign key constraint is incorrectly formed 
```

在查看了完整的 SQL 之后，我认为这取决于创建**LinkPosts**表时**linkPostID 是 INT UNSIGNED**的事实，而在**ReplyPosts**表中，**linkPostID 是 INT**。将其更改为**INT UNSIGNED**并查看它是否有效。

 ******根据此处的文档，[“外键”](http://dev.mysql.com/doc/refman/5.1/en/innodb-foreign-key-constraints.html)应该具有相同的大小和符号，如果它是整数的话。

作为旁注，我仍然坚持使用 UserId 作为用户表上的主键，而不是 UserName。每次在用户表中插入一条记录时，它都会按用户名排序（因为它是主键，因此是聚集索引）。UserName 字段 (Varchar(20)) 越大，对整个表进行排序所需的时间就越长。随着表的增长，将记录插入用户表会变得很麻烦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T11:42:22.853

这是由于外键约束

并且由于您使用`FOREIGN KEY (userName) REFERENCES Users(userName)` 的是varchar，因此在MYSQL中不可能在`varchar`

您可以删除 userName 的外键约束，并尝试使用 userId******

# ruby-on-rails - rails_admin 破坏了一切，未初始化的常量 Admin (NameError)

> ID：13624982
> 
> 赞同：3
> 
> 时间：2012-11-29T11:39:45.370
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, rails-admin

# 我尝试归档的内容

我正在编写一个主要是 CRUD 的 Rails 应用程序。我想要一个管理界面，以便非程序员应该能够控制内容。我决定使用现成的库[rails admin](https://github.com/sferik/rails_admin)，因为它似乎是提供最多约定 > 配置的库。

# 出了什么问题

嗯，大部分都是。

每次我运行一个使用 rails 配置的命令（似乎）它都会停止并给我一个很长的错误。如果您能比我更好地理解我在 shell[中遇到的错误，请在此处发布。](http://pastie.org/private/qsccdnb8m0pycv2i2vtq2a)

如果我执行另一个 rails 命令，例如`rails g model Admin`它以相同的方式失败，则会抱怨`uninitialized constant Admin (NameError)`.

[这是我的 Gemfile](http://pastie.org/private/0khunhucfsdwpdcw7gggog)。

# 它是如何变得如此糟糕的

我一边散步，一边吹口哨，玩得很开心。创建了一个 ruby​​ 应用程序，安装了 Devise 并使用它设置了 User 类，搭建了一些 CRUD MVC 的脚手架，制作了一些自定义控制器视图。我知道 gem 'will_paginate' 与 'rails_admin' 冲突，所以我从我的 gemfile 中删除了它，而是使用了 'kaminari'。

# 我怀疑谁

[埃里克](https://github.com/sferik)。不，我相信他很棒。但是 rails_admin 显然不能很好地与我的应用程序配合使用。我怀疑这与我在安装 gem 之前没有创建“管理员”模型有关。但是我现在无法修复它，因为我得到了这些错误（即使我从 gemfile 中删除 rails_admin，我也会得到错误，执行 a`bundle`然后尝试`rails g`）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-12T16:51:23.500

Have you removed the rails_admin generated route from config/routes.rb:

```
devise_for :admins
mount RailsAdmin::Engine => '/rails_admin', :as => 'rails_admin' 
```

That is what is causing Devise to look for an Admin model. Removing that, along with removing the gem and initializer file should remove the whole thing from your project.

# objective-c - ARC - 隐式桥接

> ID：13624983
> 
> 赞同：5
> 
> 时间：2012-11-29T11:39:48.677
> 
> 标签：objective-c, automatic-ref-counting

如果我理解正确，我们可以将**void ***归类为**“C 可保留指针类型”。** 因此，将其分配给 Objective-C 对象将被隐式桥接。但是，编译器会引发需要显式桥接的错误。

```
 const void * somePtr = (void *)0x12345678;
   - (void)someMethod:(id)sender
   {
        NSObject *obj = (NSObject *)somePtr;
   } 
```

另外，我检查了空指针常量，它在没有显式桥接的情况下编译。

```
 NSObject *obj = (void *)0; 
```

我正在使用 XCode 4.5（Clang 4.1（tags/ *Apple/clang-421.11.66*）（基于*LLVM 3.1svn*））。

* * *

**问题：** 我知道将一些任意/不相关的指针分配给 NSObject 有点奇怪，但我想确保我是否正确理解了规则。我对**“C 可保留指针类型”有点怀疑。**描述; 尤其是关于**(possibly qualifier)**和**(possible qualifier)**的意图。我们可以将哪些指针类型归类为**“C 可保留指针类型”**？

另外，它实际上是否意味着**“系统全局变量”**语句中的系统全局变量？

* * *

> **3.3.2\. 转换为具有已知语义的可保留对象指针类型的表达式** *[开始于 Apple 4.0，LLVM 3.1]*
> 
> 如果一个表达式是已知的，则它与**保留无关：**
> 
> *   一个 Objective-C 字符串文字，
> *   **从C 可保留指针类型**的 const 系统全局变量加载，
> *   或空指针常量。
> 
> 如果强制转换操作数已知为 unretained 或**已知 retain-agnostic**，则转换被**视为 __bridge cast**。
> 
> **7.8\. C 可保留指针类型**
> 
> 如果类型是指向（可能限定的**）** void 的指针或指向**（可能限定符）**结构或类类型的指针，则该类型是 C 可保留指针类型。

[http://clang.llvm.org/docs/AutomaticReferenceCounting.html](http://clang.llvm.org/docs/AutomaticReferenceCounting.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T20:37:41.070

似乎 const 系统全局变量实际上不需要显式桥接。即 kCFBooleanTrue(CFBoolean 实例)、kCFNumberNaN 或 kABPersonPhoneMobileLabel。

```
NSObject *obj = (NSObject *)kCFBooleanTrue; 
```

请注意，CFBoolean 不是免费桥接的，但它仍然可以由编译器隐式桥接。我定义了全局常量，但无法使用隐式桥接编译它们。所以，我想知道编译器如何确定变量是否来自系统？（或者可能是检查类型是否来自 CoreFoundation.framework 这不是一个简洁的解决方案......）

**- - 编辑 - -**

参考 rob mayoff 的回答，我尝试了隐式桥接，但它仍然不起作用。可能有一个编译器标志来确定该文件是核心基础文件。

```
NSObject *obj = (NSObject *)myGlobal; 
```

**“mytest.h”文件**

```
#ifndef mytest_h
#define mytest_h

#pragma clang arc_cf_code_audited begin

typedef const struct MyStruct * MyStructPtr;

CF_EXPORT
const MyStructPtr myGlobal;

#pragma clang arc_cf_code_audited end
#endif 
```

**“mytest.c”文件**

```
#include "mytest.h"

struct MyStruct {
    int a;
};

static struct MyStruct __myglobal = { 123 };
const MyStructPtr myGlobal = &__myglobal; 
```

**- - 编辑 - -**

我还修改了 CoreFoundation.framework 中的 CFNumber.h 头文件并删除**了 CF_IMPLICIT_BRIDGING_ENABLED/CF_IMPLICIT_BRIDGING_DISABLED**，然后清理/构建项目，但它没有禁用这些常量的隐式桥接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T21:09:08.823

尽管您链接的文档中没有说明，但我相信“`const`系统全局变量”的“系统”部分意味着该变量是在编译指示`clang arc_cf_code_audited`生效时定义的。

看看顶部，`CFNumber.h`你会发现：

```
CF_IMPLICIT_BRIDGING_ENABLED 
```

在接近尾声时你会发现：

```
CF_IMPLICIT_BRIDGING_DISABLED 
```

这些宏被定义`CFBase.h`为开始和结束`clang arc_cf_code_audited`编译指示，它被定义了。

# jquery - jquery：功能在外部页面不起作用

> ID：13624984
> 
> 赞同：2
> 
> 时间：2012-11-29T11:39:48.417
> 
> 标签：jquery

我有一个从同一个域加载外部 html 的页面，这个（外部）html 页面有另一个 jquery 代码，由于某种原因拒绝工作。

这页纸：

```
$("#success").click(function () {     
$(this).load("testpage.html", function(response, status, xhr)
... 
```

外部testpage.html：

```
<div id="hidediv">
<a id="hidelinks" href="#">hide</a> <br />
text <br />
</div>

<script>
$('#hidelinks').click(function() {
    $('#hidediv').slideUp();
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T11:42:21.870

由于同源策略，您无法从其他域加载内容。您必须使用 JSONP（并且其他域必须提供它）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T11:43:24.423

你不会让它工作。这是防止 XSS 的安全功能。

也许 iframe 是您的选择？

希望这可以帮助

**编辑** 好的，这是不同的。

尝试将您的代码更改为

```
$(function(){
      $('#hidelinks').click(function() {
       $('#hidediv').slideUp();
   });
}); 
```

因为这个脚本也必须等待它的 DOM 准备好。

# lotus-notes - 笔记侧边栏中的 XPiNC 不使用复合应用程序？

> ID：13624986
> 
> 赞同：0
> 
> 时间：2012-11-29T11:39:49.940
> 
> 标签：lotus-notes, xpages, xpinc

我似乎记得在 Lotusphere 2011 的讨论中，有一种方法可以在不使用复合应用程序的情况下将 XPiNC 页面部署到侧边栏小部件。这对 8.5.3 客户端可行吗？我需要能够通过小部件目录部署 XPage，并且我不能让复合应用程序选项卡出现在客户端中。（如果唯一的 UI 在侧边栏面板中，我可以使用复合应用程序）。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T14:16:32.283

是的，可以在没有复合应用程序的情况下将 XPage 放在侧边栏中。您需要在这里做的是转到文件 -> 首选项 -> 小部件目录并检查“显示小部件工具栏和我的小部件面板”。现在在 XPiNC 中打开您想要创建为小部件的 XPage。在工具栏中，单击“从当前上下文配置小部件”。选择“显示为面板”，单击下一步，然后单击完成按钮。您的 XPage 现在应该显示在边栏中。另一种方法是只需单击 MyWidgets 工具栏中的“显示为面板”按钮，这也会将您的 XPage 放在边栏中。如果您转到 MyWidgets 侧边栏面板，您将能够在那里看到您的 XPage Widget，并且可以将其导出为小部件以发送给其他用户。

# iphone - 删除详细信息屏幕上的图钉后如何从地图中删除图钉弹出到地图视图图钉仍在地图上

> ID：13624996
> 
> 赞同：1
> 
> 时间：2012-11-29T11:40:29.363
> 
> 标签：iphone, objective-c, mkannotation

我正在做地图应用程序。我在地图上显示注释针。在针上点击针附件按钮时有附件按钮，它导航到针详细信息页面。详细页面有一个删除按钮删除地点。删除后我我弹出到地图视图引脚显示在地图上。但是我的对象数组减少了 1。但是引脚显示与以前一样如何解决它。我的要求是当用户弹出到地图视图时删除该引脚不会显示在地图上查看。请帮助我.....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T11:46:31.153

首先尝试此方法，只需在删除注释时调用此方法..

```
-(void) reloadMap
{
    [yourMapView setRegion:yourMapView.region animated:TRUE];
} 
```

**选项**

否则只需删除所有注释并使用您的数组对象再次添加..删除这样的注释

```
 MKCoordinateRegion region;
 MKCoordinateSpan span;
 span.latitudeDelta=0.04;
 span.longitudeDelta=0.04;

region.span=span;  
region.center = currentLocation; 
[MymapView removeAnnotations:[MymapView annotations]];
MyAnnotation *ann = [[MyAnnotation alloc] init]; ///This is My Annotation class which i create for display detail of location
ann.title =MymapView.userLocation.title;  
ann.subtitle = MymapView.userLocation.subtitle;
ann.coordinate = currentLocation;
ann.annLocation=[NSString stringWithFormat:@"%f%f",currentLocation.longitude,currentLocation.latitude];
[MymapView addAnnotation:ann];

[MymapView setRegion:region animated:TRUE];
[MymapView regionThatFits:region]; 
```

# iphone - 如何将 int 格式化为 NSString 并在 iOS 中显示正数的 + 号

> ID：13624997
> 
> 赞同：9
> 
> 时间：2012-11-29T11:40:35.043
> 
> 标签：iphone, objective-c, ios, ipad, nsnumberformatter

AFAIK 仅使用 [NSString stringWithFormat:@"%d"] 是不可能的，因为没有用于显式显示 + 显示的说明符，至少我没有在[Apple Developer String Format Specifiers](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Strings/Articles/formatSpecifiers.html)
找到它 所以看起来我必须使用 NSNumberFormatter就我而言。我找到了如何设置加号表示，但不知道如何实现我的目标。我试过了

```
 NSNumberFormatter *numberFormatter = [[[NSNumberFormatter alloc] init] autorelease];
    [numberFormatter setPositiveFormat:@"+0"];
    NSString strNumber = [numberFormatter stringFromNumber:[NSNumber numberWithInt:intSomeNumber]]; 
```

但我担心它会将数字 GT 9 减少到 1 位，我不希望这样。我只想用 + 显示任何正整数，用 - 显示任何负整数。这是正确的方法吗：

```
NSNumberFormatter *numberFormatter = [[[NSNumberFormatter alloc] init] autorelease];
[numberFormatter setPositiveFormat:@"+#"];
NSString strNumber = [numberFormatter stringFromNumber:[NSNumber numberWithInt:intSomeNumber]]; 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-29T11:49:53.583

从您链接的页面：

> 有关详细信息，请参阅[IEEE printf 规范](http://pubs.opengroup.org/onlinepubs/009695399/functions/printf.html)。

现在来自 IEEE printf 规范：

> + 带符号转换的结果应始终以符号（“+”或“-”）开头。如果未指定此标志，则仅在转换负值时转换应以符号开始。

例子：

```
NSLog(@"%+f", 3.455677); 
```

结果：

```
+3.455677 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-29T11:51:44.783

```
[numberFormatter setPositivePrefix:@"+"]; 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-11-29T11:48:43.983

利用`[NSString stringWithFormat:@"%+d", intSomeNumber]`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-29T11:47:33.497

只需使用：

```
NSString *strNumber = [NSString stringWithFormat:@"%+d",intSomeNumber]; 
```