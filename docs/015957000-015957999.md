# StackOverflow 问答 15957000-15957999

# obfuscation - 用人类可读的名称混淆名称

> ID：15957000
> 
> 赞同：1
> 
> 时间：2013-04-11T19:17:27.083
> 
> 标签：obfuscation, deobfuscation

我必须用其他独特的人名混淆人名

所以说推特句柄 Jane Doe 可能映射到 Sally Bates

此映射必须是唯一的：1 对 1

出于对个人身份信息的担忧，我需要这样做。

问题：

1.  有谁知道这样做的软件组件？
2.  还是有一个常设算法来做到这一点？

笔记：

1.  字符的排列可能是不够的
2.  混淆后的名字应该是易记的名字，比如 johnbrown, john smith are good nhoj is not ok
3.  混淆后的名称不应被不了解混淆策略的人映射
4.  混淆后的名称应该可以通过计算或字典查找轻松映射回源名称

谢谢。

# ios - 如何在 UIToolbar 中将 UILabel 居中

> ID：15957003
> 
> 赞同：-1
> 
> 时间：2013-04-11T19:17:35.073
> 
> 标签：ios

我在界面生成器中有一个 UIToolbar。我使用 IBOutlets 与 UIToolbar 建立了连接。在我的 initWithCoder 和 viewDidLoad 事件的代码中，我尝试访问 UIToolbar 的 bounds.size.width 属性，它显示为 0。最终，我想在 UIToolbar 内居中放置一个 UILabel。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T19:39:21.413

你应该`UIBarButtomItem`这样使用：

```
UIBarButtonItem *flexible1 = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil];

UIBarButtonItem *titleButton = [[UIBarButtonItem alloc] initWithTitle:@"Your Label String" style:UIBarButtonItemStylePlain target:nil action:nil];

UIBarButtonItem *flexible2 = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil];

[toolBar setItems:[NSArray arrayWithObjects:flexible1, titleButton, flexible2, nil]]; 
```

# php - 样式 die() 错误信息

> ID：15957005
> 
> 赞同：0
> 
> 时间：2013-04-11T19:17:37.630
> 
> 标签：php, error-handling, die

如何使`die()`消息在同一页面的 HTML 部分的某个位置回显？

```
$files = array();
  $upload = $_FILES['upload']['tmp_name'];
    foreach($upload as $uploaded){
if(!empty($uploaded)) {
if(isset($uploaded)){
$finfo = finfo_open(FILEINFO_MIME_TYPE);
$mime= finfo_file($finfo, $uploaded);
  switch($mime) {
  case 'application/pdf':
  break;
  default:
die('pdf file only.');     
break;
      }
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T19:19:54.993

`die`将立即停止执行并将缓冲区中的任何内容发送到浏览器。

就个人而言，我喜欢做这样的事情：

```
function halt($str="") {
    if( $str) echo "<div class=\"server_notice\">".$str."</div>";
    require("template/foot.php");
    exit;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T19:19:34.377

怎么样不要只使用 die，做一些事情来插入 html 然后死。

或者，您有`register_shutdown_function`（文档： http: [//php.net/manual/es/function.register-shutdown-function.php](http://php.net/manual/es/function.register-shutdown-function.php)）这将允许您在脚本结束后立即执行操作`die;`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T19:21:54.247

没有办法做到这一点。`die()`或`exit()`将停止执行您的脚本。

你可以做一些错误报告系统。 `$lastError = null`

然后做你想做的事并设置这个错误。

然后你可以在某个地方检查它：

```
if ($lastError == 2){
  echo "The file is no in PDF format" ;
} //and so on. 
```

您还可以创建一些常量，例如：

```
define("ERROR_WRONG_FORMAT", 2); //Make the error clear. 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-11T19:22:42.847

您需要回显 div 标签，然后使用 CSS 定位它们。

```
die('<div id="error">pdf file only.</div>'); 
```

然后将以下文本添加到您的 CSS 中：

```
#error{position:absolute;top:10;left:10;} 
```

您需要根据您希望它们的位置来更改顶部和左侧的值。

如果您不知道 CSS 是什么，我建议您在 YouTube 上观看 TheNewBoston 的教程！

# tidesdk - 在 Ubuntu 上为所有平台创建应用程序

> ID：15957006
> 
> 赞同：0
> 
> 时间：2013-04-11T19:17:41.163
> 
> 标签：tidesdk

是否可以在 Ubuntu(12.10) 下使用 TiedSDK 创建 Windows 和 Mac 应用程序？如果可能的话，我应该如何使用其他 SDK（Win|OSx）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T14:02:28.700

Currently there is no way to cross compile / generate installers for other platforms. If you want installers for windows .. you need to be running on a windows system. You can get a virtual machine with any windows operating system.

# excel - 如果未找到指定字符，则返回原始值的公式

> ID：15957012
> 
> 赞同：0
> 
> 时间：2013-04-11T19:18:20.147
> 
> 标签：excel, if-statement, excel-formula, excel-2007, worksheet-function

我有两张 Excel 表（比如说 sheet1 和 sheet2）。对于此处的示例， sheet1 上从 R1C1 到 R4C1 的值是`0(5)`、`2(6)*`和。`92``44`

我只想将数值从 sheet1 复制到 sheet2。因此，我在 sheet2 的 R1C1 中有这个公式：

```
=LEFT(Sheet1!A1,SEARCH("(",Sheet1!A1)-1) 
```

此公式返回 sheet2 上的值，如下所示：

R1C1 - 0
R2C1 - 2
R3C1 - #价值！
R4C1 - #价值！

主要问题是针对 R3C1 和 R4C1。

如果公式找不到，我们可以在公式中包含一个逻辑测试，它返回`92`R3C1 和R4C1 的值吗？`44``"("`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T01:35:23.830

我建议你试试`=IF(ISNUMBER(Sheet1!A1),Sheet1!A1,"")`

* * *

只有在编辑了问题之后，我现在才意识到要求似乎是针对 OP 的公式和上面我的公式的组合可以提供的服务：

```
=IF(ISNUMBER(Sheet1!A1),Sheet1!A1,LEFT(Sheet1!A1,SEARCH("(",Sheet1!A1)-1)) 
```

这将像之前一样返回 and 的文本`0`以及and`2`的数字。`92``44`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T22:09:49.430

是的，您可以使用 ISERROR 函数检查错误：

```
=IF(ISERROR(LEFT(Sheet1!A1,SEARCH("(",Sheet1!A1)-1)),LEFT(Sheet1!A1,SEARCH("(",Sheet1!A1)-1)) 
```

所以这就像一个 IF, THEN, ELSE 块

IF LEFT(Sheet1!A1,SEARCH("(",Sheet1!A1)-1))= #VALUE

然后只需取 Sheet1!A1)-1

否则取 LEFT(Sheet1!A1,SEARCH("(",Sheet1!A1)-1)

无论如何，这应该让你开始

高温高压

菲利普

# linq - 得到 maxs 组的总和

> ID：15957016
> 
> 赞同：0
> 
> 时间：2013-04-11T19:18:35.073
> 
> 标签：linq, sum

我有这张桌子

```
EquipmentId  Value  Date
1            2      11/04/2013
1            1      11/04/2013
2            3      11/04/2013
2            2      10/04/2013
2            5      10/04/2013
3            1      10/04/2013
3            3      11/04/2013 
```

我想按日期对这些项目进行分组，并有一个以日期为键的字典以及当天所有设备值的最大值之和

结果是这样的

```
[10/04/2013: 6]   // 6 = 5 (as the max of values of the the equipmetId 2) + 1 (as the max of values of the the equipmetId 3)
[11/04/2013: 5]   // 5 = 2(as the max of values of the the equipmetId 1) + 3(as the max of values of the the equipmetId 3) 
```

我设法在没有总和的情况下进行查询，这意味着只有一台设备。

```
var consumptionValues = (from c in context.ConsumptionSet
                         join pi in context.PropertiesInstanceSet on c.PropertiesInstanceID equals pi.PropertiesInstanceID
                         join ep in context.EquipmentPropertiesSet on pi.EquipmentPropertiesID equals ep.EquipmentPropertiesID
                         join e in context.EquipmentSet on ep.EquipmentID equals e.EquipmentID
                         where (e.EquipmentID == equipmentId && pi.ProprietesName == ProprietesName.Energy && c.Date <= DateTime.Now && c.Date >= firstDayDate)
                         group c by SqlFunctions.DatePart("weekday", c.Date) into grp
                         select new
                         {
                             dayOfWeek = (DayOfWeek)grp.Key.Value - 1,
                             value = grp.Max(c => c.Value),
                         }).ToDictionary(c => c.dayOfWeek.ToString(), c => c.value); 
```

这是包含所有连接的完整查询，在示例中我只是给出了一个简化的示例。

是否可以在一个查询中执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T19:25:14.137

我不得不说我不确定它会起作用，但你应该试一试：

```
var consumptionValues = (from c in context.ConsumptionSet
                         join pi in context.PropertiesInstanceSet on c.PropertiesInstanceID equals pi.PropertiesInstanceID
                         join ep in context.EquipmentPropertiesSet on pi.EquipmentPropertiesID equals ep.EquipmentPropertiesID
                         join e in context.EquipmentSet on ep.EquipmentID equals e.EquipmentID
                         where (e.EquipmentID == equipmentId && pi.ProprietesName == ProprietesName.Energy && c.Date <= DateTime.Now && c.Date >= firstDayDate)
                         group new { c, e } by SqlFunctions.DatePart("weekday", c.Date) into grp
                         select new
                         {
                             dayOfWeek = (DayOfWeek)grp.Key.Value - 1,
                             value = grp.GroupBy(i => i.e.EquipmentID).Sum(g => g.Max(i => i.c.Value)),
                         }).ToDictionary(c => c.dayOfWeek.ToString(), c => c.value); 
```

# html - CSS 水平菜单中心

> ID：15957018
> 
> 赞同：1
> 
> 时间：2013-04-11T19:18:41.797
> 
> 标签：html, css

我的导航菜单有这个 CSS 代码：

```
#cssmenu ul { margin: 0; padding: 0;}
#cssmenu li { margin: 0; padding: 0;}
#cssmenu a { margin: 0; padding: 0;}
#cssmenu ul {list-style: none;}
#cssmenu a {text-decoration: none;}
#cssmenu {height: 50px; background-color: #f36f25; box-shadow: 0px 2px 3px rgba(0,0,0,.4);}
#cssmenu > ul > li {
    float: left;
    margin-left: 15px;
    position: relative;
}
#cssmenu > ul > li > a {
    color: #ffffff;
    font-size: 15px;
    line-height: 50px;
    padding: 5px 20px;
-webkit-transition: color .15s;
   -moz-transition: color .15s;
     -o-transition: color .15s;
        transition: color .15s;
}
#cssmenu > ul > li > a:hover {color: #666666; }
#cssmenu > ul > li > ul {
    opacity: 0;
    visibility: hidden;
    padding: 16px 0 20px 0;
    background-color: #eeeeee;
    text-align: left;
    position: absolute;
    top: 30px;
    left: 50%;
    margin-left: -90px;
    width: 180px;
-webkit-transition: all .3s .1s;
   -moz-transition: all .3s .1s;
     -o-transition: all .3s .1s;
        transition: all .3s .1s;
-webkit-border-radius: 5px;
   -moz-border-radius: 5px;
        border-radius: 5px;
-webkit-box-shadow: 0px 1px 3px rgba(0,0,0,.4);
   -moz-box-shadow: 0px 1px 3px rgba(0,0,0,.4);
        box-shadow: 0px 1px 3px rgba(0,0,0,.4);
}
#cssmenu > ul > li:hover > ul {
    opacity: 1;
    top: 65px;
    visibility: visible;
}
#cssmenu > ul > li > ul:before{
    content: '';
    display: block;
    border-color: transparent transparent rgb(250,250,250) transparent;
    border-style: solid;
    border-width: 10px;
    position: absolute;
    top: -20px;
    left: 50%;
    margin-left: -10px;
}
#cssmenu > ul ul > li { position: relative;}
#cssmenu ul ul a{
    color: #000000;
    font-size: 13px;
    background-color: #eeeeee;
    padding: 5px 8px 7px 16px;
    display: block;
-webkit-transition: background-color .1s;
   -moz-transition: background-color .1s;
     -o-transition: background-color .1s;
        transition: background-color .1s;
}
#cssmenu ul ul a:hover {background-color: #f36f25;}
#cssmenu ul ul ul {
    visibility: hidden;
    opacity: 0;
    position: absolute;
    top: -16px;
    left: 206px;
    padding: 16px 0 20px 0;
    background-color: #eeeeee;
    text-align: left;
    width: 160px;
-webkit-transition: all .3s;
   -moz-transition: all .3s;
     -o-transition: all .3s;
        transition: all .3s;
-webkit-border-radius: 5px;
   -moz-border-radius: 5px;
        border-radius: 5px;
-webkit-box-shadow: 0px 1px 3px rgba(0,0,0,.4);
   -moz-box-shadow: 0px 1px 3px rgba(0,0,0,.4);
        box-shadow: 0px 1px 3px rgba(0,0,0,.4);
}
#cssmenu ul ul > li:hover > ul { opacity: 1; left: 196px; visibility: visible;}
#cssmenu ul ul a:hover{
    background-color: #f36f25;
    color: rgb(240,240,240);
} 
```

我需要使子菜单框向上移动一点，这样您就可以在菜单的橙色部分（主要位）上看到顶部的小箭头，并使其保持原样，但使链接/文本居中在页面上

这是一个小提琴：http: [//jsfiddle.net/dQnjt/](http://jsfiddle.net/dQnjt/)

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T19:22:57.557

使用`display: inline-block`代替`float`并添加`text-align: center`到父级`ul`：

```
#cssmenu ul { margin: 0; padding: 0; text-align: center; }

#cssmenu > ul > li {
    display: inline-block;
    margin-left: 15px;
    position: relative;
} 
```

只需减少悬停时的最高值：

```
#cssmenu > ul > li:hover > ul {
    opacity: 1;
    top: 55px;
    visibility: visible;
} 
```

[http://jsfiddle.net/dQnjt/1/](http://jsfiddle.net/dQnjt/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-22T00:50:36.547

您可以添加 `ul:display:table; margin:0 auto;`，这将使浮动元素居中。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-11T19:27:07.440

我添加了一个 Position: 相对于以下内容：

```
#cssmenu > ul > li > ul {
    opacity: 0;
    visibility: hidden;
    padding: 16px 0 20px 0;
    background-color: #eeeeee;
    text-align: left;
    position: relative;
    left: 50%;
    margin-left: -90px;
    width: 180px;
-webkit-transition: all .3s .1s;
   -moz-transition: all .3s .1s;
     -o-transition: all .3s .1s;
        transition: all .3s .1s;
-webkit-border-radius: 5px;
   -moz-border-radius: 5px;
        border-radius: 5px;
-webkit-box-shadow: 0px 1px 3px rgba(0,0,0,.4);
   -moz-box-shadow: 0px 1px 3px rgba(0,0,0,.4);
        box-shadow: 0px 1px 3px rgba(0,0,0,.4);
}
#cssmenu > ul > li:hover > ul {
    opacity: 1;
    top: 0px;
    visibility: visible;
    position:relative;
} 
```

[http://jsfiddle.net/dQnjt/5/](http://jsfiddle.net/dQnjt/5/)

# android - 如何使用 Google Analytics 在 Android 上捕获屏幕退出

> ID：15957025
> 
> 赞同：1
> 
> 时间：2013-04-11T19:18:57.463
> 
> 标签：android, google-analytics, manual

我正在使用适用于 Android 的 Google Analytics V2。我选择使用手动记录屏幕的方法，以便我可以从 Fragments 中记录屏幕。

```
GoogleAnalytics.getInstance().sendView( "/home" ); 
```

但是，当我查看结果时，平均屏幕时间太高了。我做了一些测试，我进入一个屏幕，然后让手机闲置了几分钟。我不确定谷歌是如何确定屏幕访问已经结束的，这肯定是在手机显示屏变暗几分钟后。

那么问题来了，有没有办法告诉 Google Analytics 屏幕视图已经结束？EasyTracker好像有这个概念，但是手动的方法没有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T20:20:08.807

我不知道这是否对你有用，但我所做的是在应用程序传递到后台时发送一个视图：

```
myTracker.sendView("onBackground"); 
```

对于我想知道我所做的时间的屏幕，我手动计算它：

```
Date initial;

onCreate(...)
    initial= new Date();

onDestroy() {
super.onDestroy();
   long time= ((new Date()).getTime() - initial.getTime());
   myTracker.sendTiming("Time", time, "name", "label");
} 
```

如果您愿意，您可以计算 onPause 和 onResume 中的时间以减去 onBackground 时间。

# php - 正则表达式：尝试使用非重音关键字修改重音句子

> ID：15957033
> 
> 赞同：4
> 
> 时间：2013-04-11T19:19:16.453
> 
> 标签：php, regex

我正在尝试使用非重音关键字修改重音句子，以使这些单词变粗。

所以这就是我的问题是如何分裂的。

1 - 我有**重音和无重音**的句子（我有两个可用的，但更愿意只在记忆中保留重音），例如：

*   重音版：*“C'est au neuvième étage”*
*   无口音版本：*“C'est au neuvieme etage”*

2 - 我有**没有重音**的关键字：

*   *“新人”*
*   *“记事本”*

3 - 我尝试获得以下**重音结果**：*“C'est au [b]neuvième[/b] [b]étage[/b]”*

我可以找到“复杂”的解决方案，但我无法找到是否可以使用正则表达式以更直接的方式实现这一点。我正在以这种方式搜索，因为我需要它快速。

如果有人对此有任何想法，我会很高兴阅读它。

谢谢你。

* * *

编辑解决方案。

Qtex 提出的想法有效。

我在 preg_replace 中使用了以下模式：

```
$pattern = array( "'a'","'c'","'e'","'i'","'n'","'o'","'u'","'y'" );

$replace = array( "(a|à|á|â|ã|ä|A|À|Á|Â|Ã|Ä)",
                  "(c|ç|C|Ç)",
                  "(e|è|é|ê|ë|E|È|É|Ê|Ë)",
                  "(i|ì|í|î|ï|I|Ì|Í|Î|Ï)",
                  "(n|ñ|N|Ñ)",
                  "(o|ò|ó|ô|õ|ö|O|Ò|Ó|Ô|Õ|Ö)",
                  "(u|ù|ú|û|ü|U|Ù|Ú|Û|Ü)",
                  "(y|ý|ÿ|Y|Ý)"); 
```

我不得不使用管道字符将它们分开，而不是将它们分组到方括号中，因为重音字符实际上变成了每个字符......所以它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T20:23:55.980

一个简单直接的解决方案是在您的关键字中替换：

*   `a`和`[aáà]`
*   `e`和`[eéè]`
*   等您要处理的所有重音字符

然后使用正则表达式中的新关键字进行匹配和替换：

```
preg_replace('/f[oóò][oóò]|b[aáà]r/i', '[b]$0[/b]', $str) 
```

# php - 如何从我的 div 中获取 contenteditable 的值

> ID：15957038
> 
> 赞同：1
> 
> 时间：2013-04-11T19:19:29.610
> 
> 标签：php, jquery

输入内容后如何获取 contenteditable 的值？

在我单击 div 并编辑文本并将其发送到 php 后，有没有办法获取它的值？..

顺便说一句，我为此使用 jquery 和 php。这是我的代码：

```
<div class="profilestatus"> <a contenteditable>type text here</a></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T19:29:39.650

改为使用`<input>`。如果需要，您可以使用 CSS 对其进行样式设置`<a>`。您可以使用 获取输入的当前值`$('input').val();`。

演示： http: [//jsfiddle.net/9R5VE/](http://jsfiddle.net/9R5VE/)

HTML：

```
<input value="editable"></input> 
```

jQuery：

```
$("input").focusout(function(){
    alert($(this).val());
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T19:30:34.987

也许 ：

```
$('#yourForm').submit(function() {
    $('#hiddenInput').attr(
        'value',
        $('.profilestatus').first().children(0).html()
    );
}); 
```

?

您还可以`<textarea>`使用 CSS 设置样式。这将避免你有一个隐藏的输入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T19:26:21.997

```
var phrase = '<div class="profilestatus"> <a contenteditable>type text here</a></div>'; 
var myRegexp = YOUR MATCH PATTERN;
var match = myRegexp.exec(phrase);
alert(match[1]); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T21:42:46.683

我试图让内容自动突出显示已经很长时间了，但既不能用 JS 也不能用 jQuery :(

无论如何，这就是我所拥有的：

工作示例：[这里](http://www.danielabbey.co.uk/so/15957038/)

```
 <script>
        function formSubmit(content)
        {
            document.eForm.link.value = content;
            document.eForm.submit();
        }
    </script>
    <?php
        $link = isset($_POST['link']) ? $_POST['link'] : NULL;
        ($link !== NULL) ?
        ((stripos($link, 'http://') === FALSE) ?
        header('Location: http://'.strip_tags($link)) :
        header('Location: '.strip_tags($link))) : true;
    ?>
    <form name="eForm" method="Post" action="<?php echo $_SERVER['PHP_SELF'] ?>">
        <input id="try" type="hidden" name="link" />
        <div id="eDiv" class="profilestatus" contenteditable>
            <a id="eLink" onclick="formSubmit(document.getElementById('eLink').innerHTML)">highlight, type, click!</a>
        </div>
    </form> 
```

# jquery - 搜索后显示“未找到结果”

> ID：15957047
> 
> 赞同：2
> 
> 时间：2013-04-11T19:19:51.893
> 
> 标签：jquery, jquery-selectors

我是 jQuery 的新手，但能够使用一些我发现的脚本来获得我想要的结果，但有一个例外。我正在处理的页面有 4 个下拉菜单，允许用户从每个菜单中进行选择，然后单击提交按钮，该按钮从列表中返回结果。

目前，如果您进行了一些选择，但如果没有找到，您只会得到一个空白页。我需要显示“未找到结果”。我在这里看到的一些脚本需要我重写我所拥有的，但我认为有一个简单的解决方案。如果没有，它回到我的键盘。

这是 jsFiddle 上的代码：http: [//jsfiddle.net/LbUfe/](http://jsfiddle.net/LbUfe/)

这是我用来进行选择的脚本。

```
<script type="text/javascript">     
        $(document).ready(function()
        {               
            $("#btnFilter").click(function()
            {
                var portfolio   = $("#portfolio").val();
                var strategy    = $("#strategy").val();
                var geoFocus    = $("#geoFocus").val();
                var spendType   = $("#spendType").val();
                var portfolioSelector = '';
                var strategySelector = '';      
                var geoFocusSelector = '';
                var spendTypeSelector = '';

                if (portfolio == "all" && strategy == "all" && geoFocus == "all" && spendType == "all")                     
                {
                    //show all items in list - working
                    $(".item").show();
                }

                else
                {
                    if (strategy != "all")
                    {
                        strategySelector = '.' + strategy
                    }

                    if (portfolio != "all")
                    {
                        portfolioSelector = '.' + portfolio 
                    }
                    if (geoFocus != "all")
                    {
                        geoFocusSelector = '.' + geoFocus
                    }
                    if (spendType != "all")
                    {
                        spendTypeSelector = '.' + spendType
                    }
                    $(".item").hide();
                    $(strategySelector + portfolioSelector + geoFocusSelector + spendTypeSelector).show(); 
                     }  

            });

        }); 
```

这是工作页面（减去“未找到结果”）。

[http://staging.humanityunited.org/](http://staging.humanityunited.org/)

一个简单的例子：从“Geographic Focus”菜单中选择“Bangladesh”，在“Spending Type”菜单中选择“Sponsorship”，然后点击提交。你会得到一个空白页。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T19:28:35.537

正如我在您的 html 中看到的，所有可能的结果都有一个类 .item。因此，如果没有 .item 显示，则意味着该打印“未找到结果”。您可以在 jQuery 中实现这一点：

```
if($('li.item:visible').length===0)) // no item visible
{
    // put code here to display your message
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T19:30:56.153

您可以添加一个检查以查看有多少列表元素可见。

```
var visibleElements = $('#colRight li:visible').length; 
```

[http://jsfiddle.net/LbUfe/5/](http://jsfiddle.net/LbUfe/5/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T19:32:40.590

尝试改变

```
$(strategySelector + portfolioSelector + geoFocusSelector + spendTypeSelector).show(); 
```

至

```
var $res = $(strategySelector + "," + portfolioSelector + "," + geoFocusSelector + "," + spendTypeSelector).show();
if ($res.length == 0) {
    $res.html("No results found");
}

$res.show(); 
```

（[更新小提琴](http://jsfiddle.net/LbUfe/6/)）

看起来您的问题是您附加了所有这些选择器，因此只会显示所有这些选择器的内容。因此，我在选择器之间添加了逗号。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T19:37:03.903

我认为这更好

```
var ItemsCount=$(strategySelector + portfolioSelector + geoFocusSelector + spendTypeSelector).show().length;
if(ItemsCount= 0)
{
    //show your message
} 
```

# sql-server-2008 - 隐藏钻取报告的列

> ID：15957052
> 
> 赞同：2
> 
> 时间：2013-04-11T19:20:02.920
> 
> 标签：sql-server-2008, reporting-services

第一次加载向下钻取报告时如何隐藏列？我有以下列。

```
Col1    Col2     Col3    Col4
-----------------------------
+ test1    10      

+ test2    20 
```

我想在报告的初始加载时隐藏 Col3 和 Col4。当我单击 Col1 上的 + 并显示 Col3 和 Col4 时。你能告诉我任何建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T21:09:24.503

进入行或列的可见性属性（选择列，右键单击，可见性选项）并选择“该项目的显示可以通过以下字段切换，并将该字段设置为隐藏。

# archiva - 链接 Apache Archiva 的两个实例

> ID：15957055
> 
> 赞同：0
> 
> 时间：2013-04-11T19:20:11.403
> 
> 标签：archiva

我们有两个分布式开发团队。每个都有自己的 Archiva 实例。每个团队都将工件部署到他们自己的存储库中。我想配置这些 Archiva 实例中的每一个，以便它们每个都可以发现彼此的工件。

我在每个 Archiva 上设置了代理连接器。

*   档案 A -> 档案 B
*   档案 B -> 档案 A

但是当有人请求工件时，两个 Archiva 中的一个挂起，需要重新启动服务。

此代理连接器配置是否创建了无限循环？也许我对它们的工作方式感到困惑。如果不应该以这种方式配置它们，我将如何解决我原来的两个 Archiva 共享工件的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T12:37:30.277

您是否使用一些黑/白名单将代理限制为仅您的公司 groupId ？挂起但日志中没有任何内容？

# c# - 使用序列化和 C# 获取奇怪的消息

> ID：15957060
> 
> 赞同：0
> 
> 时间：2013-04-11T19:20:25.157
> 
> 标签：c#, serialization, tcp, client-server

我试图将它从一个客户端发送到另一个客户端，源、目标和数据接收良好，但字符串和双精度变为空。这是的代码`TcpObject`：

```
[Serializable]
public class TcpObject
{
    public Command Command { set; get; }
    public Object Data { set; get; }
    public int Source { set; get; }
    public int Destination { set; get; }
    public string IDString { set; get; }
    public double exactTime { set; get; }

    public TcpObject()
    {
       Command = Command.Null;
       Data = null;
    } 
```

这是我发送数据的地方：

```
TcpObject tcpObject = new TcpObject();
tcpObject.Command = Command.Msg;
tcpObject.Source = 1;
tcpObject.Destination = 2;
byte[] junkMsg = new byte[1000];
tcpObject.Data = junkMsg;
tcpObject.IDString = randomString();
tcpObject.exactTime = exactTime.ExactTime();
WorkClient.Send(tcpObject);
hread.Sleep(20); 
```

这就是我收到的地方：

```
public void Listen()
{
   try
   {
      while (Connected)
      {
         TcpObject tcpObject = new TcpObject();
         IFormatter formatter = new BinaryFormatter();
         tcpObject = (TcpObject)formatter.Deserialize(ServerSocket);

         MessageBox.Show(tcpObject.IDString);
         //TcpObject succeedTcpObject = new TcpObject();
         //get the remainder of the time that the message got send and when the message got accepted.
      }
   }
      catch (Exception) { }
} 
```

这是发送函数：

```
public static void Send(TcpObject tcpObject) 
{
   try
   {
      IFormatter formatter = new BinaryFormatter();
      formatter.Serialize(ServerSocket, tcpObject);
   }
   catch (Exception) { }
} 
```

弹出的MessageBox是空的。我在发送消息之前检查过，并且字符串存在。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T19:39:59.433

显然，您发送的垃圾从未初始化：

```
byte[] junkMsg = new byte[1000];
tcpObject.Data = junkMsg;
--SNIP--
WorkClient.Send(tcpObject); 
```

# c - 客户端服务器程序的Arm开发

> ID：15957062
> 
> 赞同：0
> 
> 时间：2013-04-11T19:20:30.433
> 
> 标签：c, arm

我有一个来自班级的旧程序，它是 1 个客户端、1 个服务器，用 c 语言编写了超级基本的“聊天”程序，代码如下。我现在正在尝试为 angstrom 编译它（在 ARM 芯片上运行），并且遇到了这些错误。我安装了 angstrom 工具链，我是否需要为 arm 制作的特殊版本的 sys/socket.h（或不同的标头，忘记读/写/关闭功能位于哪个标头）等？

错误：

```
~/Desktop/test $ arm-angstrom-linux-gnueabi-g++ main.c -o main -lnsl
main.c: In function 'int main()':
main.c:66: error: invalid conversion from 'int*' to 'socklen_t*'
main.c:66: error:   initializing argument 3 of 'int accept(int, sockaddr*, socklen_t*)'
main.c:75: error: 'read' was not declared in this scope
main.c:77: error: 'write' was not declared in this scope
main.c:79: error: 'close' was not declared in this scope
main.c:81: error: 'unlink' was not declared in this scope 
```

我直接从类中复制了代码，所以第一个错误可能只是一些愚蠢的东西，但最后一对说他们甚至找不到我需要的很多功能......但后来它以某种方式识别了接受命令，并且告诉我我使用了错误的论点：/有什么想法吗？

代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <sys/types.h>
#include <sys/socket.h>  /* define socket */
#include <netinet/in.h>  /* define internet socket */
#include <netdb.h>       /* define internet socket */

#define SERVER_PORT 9999        /* define a server port number */

int main()
{
    int sd, ns, k;
    struct sockaddr_in server_addr = { AF_INET, htons( SERVER_PORT ) };
    struct sockaddr_in client_addr = { AF_INET };
    int client_len = sizeof( client_addr );
    char buf[512], *host;

    /* create a stream socket */
    if( ( sd = socket( AF_INET, SOCK_STREAM, 0 ) ) == -1 )
    {
    perror( "server: socket failed" );
    exit( 1 );
    }

    /* bind the socket to an internet port */
    if( bind(sd, (struct sockaddr*)&server_addr, sizeof(server_addr)) == -1 )
    {
    perror( "server: bind failed" );
    exit( 1 );
    }

    /* listen for clients */
    if( listen( sd, 1 ) == -1 )
    {
    perror( "server: listen failed" );
    exit( 1 );
    }

    printf("SERVER is listening for clients to establish a connection\n");

    if( ( ns = accept( sd, (struct sockaddr*)&client_addr,
                       &client_len ) ) == -1 )
    {
        perror( "server: accept failed" );
        exit( 1 );
    }

    printf("accept() successful.. a client has connected! waiting for a message\n");

    /* data transfer on connected socket ns */
    while( (k = read(ns, buf, sizeof(buf))) != 0)
    {    printf("SERVER RECEIVED: %s\n", buf);
         write(ns, buf, k);
    }
    close(ns);
    close(sd);
    unlink(server_addr.sin_addr);

    return(0);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T19:23:26.363

根据其手册页[read(2)](http://man7.org/linux/man-pages/man2/read.2.html)（或`man 2 read`在您的终端上键入），您需要

```
 #include <unistd.h> 
```

^(我希望您的交叉开发工具链配置得足够好，可以找到与您的*目标*系统相关的*正确标头。* Ypu 可能会传递给您的交叉编译器以检查包含的内容。`unistd.h`*`-H`*)

 *我强烈建议传递`-Wall`给您的 [cross-] 编译器（以获取几乎所有警告）。

您还应该考虑[accept(2)](http://man7.org/linux/man-pages/man2/accept.2.html)手册页（特别是该`NOTES`部分）。*

# javascript - 获取由 RESTfull 服务公开的图像并在 HTML 文档中使用它们

> ID：15957067
> 
> 赞同：0
> 
> 时间：2013-04-11T19:21:10.977
> 
> 标签：javascript, jquery, json, rest, bitmap

我目前正在通过 RESTfull 服务将一些应用程序图标（例如 Notepad.exe 图标）公开为 JSON 格式的位图数据。我想使用 javasript 和/或 jQuery 捕获数据并在我的 HTML 网站中显示原始图标。暴露的图标数量不是固定的，而是任意的。这意味着，网站可能必须动态创建标签才能将捕获的图标显示到（？）中。我怎样才能做到这一点？如果我将图标公开为 JSON/XML 格式的 Base64 字符串，是否更容易实现我的目标？还有其他想法吗？

任何帮助将非常感激。先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T19:24:23.310

我建议您的服务响应指向图像 url，而不是将图像数据添加到响应中。然后在响应时，您可以迭代您的对象并添加任意数量的 img 标签，并将其来源设置为服务为您提供的任何内容。

# python - 尝试安装 numpy 时，easy_install 和 pip 给出错误

> ID：15957071
> 
> 赞同：3
> 
> 时间：2013-04-11T19:21:17.593
> 
> 标签：python, numpy, pip, easy-install

我在我的机器上运行 Python 2.7.2。我正在尝试使用 easy_install 和 pip 安装 numpy，但没有一个能够这样做。所以，当我尝试：

sudo easy_install-2.7 numpy

我收到此错误：

**“软件包安装脚本试图修改系统上不在 EasyInstall 构建区域内的文件，并已中止。此软件包无法通过 EasyInstall 安全安装，即使您运行其安装脚本也可能不支持备用安装位置手动。请通知包的作者和 EasyInstall 维护人员，以了解是否有可用的修复或解决方法。”**

此外，当我尝试使用 pip 时：

sudo pip-2.7 安装 numpy

我收到此错误：

**RuntimeError：损坏的工具链：无法链接简单的 C 程序**

有没有可用的修复？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2019-12-10T07:22:53.850

在安装 django 项目的要求时，我遇到了同样的错误。这对我有用。

**通过pip install --upgrade** setuptools 升级您的 setuptools 版本，然后再次运行安装软件包的命令。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T19:35:13.630

你需要一个编译器和开发工具，以及 Python 的头文件。

你没有提到你的操作系统。

在我的系统（Ubuntu）上，我可以安装 python-dev 和工具链依赖项：

```
$ sudo apt-get install python-dev 
```

然后我可以 pip install numpy.

# java - java swing按住两个鼠标按钮

> ID：15957076
> 
> 赞同：7
> 
> 时间：2013-04-11T19:21:38.727
> 
> 标签：java, swing, mouselistener, mouseleftbuttondown, right-mouse-button

我想实现一种用户需要同时按住鼠标左键和右键的方法。

我正在使用 Swing 和 Java 1.7。我已经尝试过了，但它没有像我期望的那样检测到两个按钮的情况：

```
public void mousePressed(MouseEvent e) {    
     if (SwingUtilities.isLeftMouseButton(e) && SwingUtilities.isRightMouseButton(e)){
              ///code here
     }
} 
```

我试图分离方法并使用布尔值来决定是否按下鼠标按钮，然后我设置一个条件来确定它们是否同时被按下，但这也可以解决..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T19:32:32.697

这是一个 SSCCE，可以满足您的需求……即，如果我正确理解了您的问题。

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

public class StackOverflow15957076 extends MouseAdapter
{
    private JLabel status;

    private boolean isLeftPressed;
    private boolean isRightPressed;

    public StackOverflow15957076 ()
    {
        JFrame frame = new JFrame ();
        frame.setDefaultCloseOperation (JFrame.DISPOSE_ON_CLOSE);

        JPanel panel = new JPanel (new FlowLayout (FlowLayout.CENTER));

        status = new JLabel ("waiting for both mouse buttons...");

        status.addMouseListener (this);

        panel.add (status);

        frame.add (panel);

        frame.pack ();
        frame.setVisible (true);

        isLeftPressed = false;
        isRightPressed = false;
    }

    @Override
    public void mousePressed (MouseEvent e)
    {
        if (SwingUtilities.isLeftMouseButton (e))
        {
            isLeftPressed = true;
        }
        else if (SwingUtilities.isRightMouseButton (e))
        {
            isRightPressed = true;
        }

        if (isLeftPressed && isRightPressed)
        {
            status.setText ("both buttons are pressed");
        }
    }

    @Override
    public void mouseReleased (MouseEvent e)
    {
        if (SwingUtilities.isLeftMouseButton (e))
        {
            isLeftPressed = false;
        }
        else if (SwingUtilities.isRightMouseButton (e))
        {
            isRightPressed = false;
        }

        status.setText ("waiting for both mouse buttons...");
    }

    public static void main (String[] args)
    {
        SwingUtilities.invokeLater (new Runnable ()
        {
            @Override
            public void run ()
            {
                new StackOverflow15957076 ();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T19:38:33.453

似乎不可能直接这样做，因为鼠标事件是按顺序触发的。例如，请参阅[此 SO question/answers](https://stackoverflow.com/questions/1177845/how-are-multi-button-presses-handled-in-swing)。

因此，您需要确定“*同时*”对您的实际意义（即时间应该有多接近）。然后您可以捕获两个单独的事件并比较它们的`getWhen()`值。

# iphone - 事件 willAnimateRotationToInterfaceOrientation 没有调用

> ID：15957077
> 
> 赞同：0
> 
> 时间：2013-04-11T19:21:39.603
> 
> 标签：iphone, ios, uiview, uiviewcontroller, rotation

我有几个`UIViewController`申请。但只有其中一个`willAnimateRotationToInterfaceOrientation`事件正在调用。

如何`willAnimateRotationToInterfaceOrientation`为所有可见视图工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T20:51:01.480

`RootViewController`：_

```
- (void)willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration {
    NSDictionary *userInfo = @{
        @"toInterfaceOrientation":@(toInterfaceOrientation),
        @"duration":@(duration)};
    [[NSNotificationCenter defaultCenter] postNotificationName:@"willAnimateRotationToInterfaceOrientation" object:nil userInfo:userInfo];
} 
```

其他`UIViewControllers`：

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil {
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(willAnimateRotationToInterfaceOrientation:) name:@"willAnimateRotationToInterfaceOrientation" object:nil];
    }
    return self;
}

- (void)willAnimateRotationToInterfaceOrientation:(NSNotification *)notification {
    UIInterfaceOrientation toOrientation = (UIInterfaceOrientation)[notification.userInfo[@"toOrientation"] intValue];
    NSTimeInterval duration = (UIInterfaceOrientation)[notification.userInfo[@"duration"] floatValue];
    [self willAnimateRotationToInterfaceOrientation:toOrientation duration:duration];
}

- (void)willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation duration:(NSTimeInterval)duration {
    // ...
}

- (void)dealloc {
    [[NSNotificationCenter defaultCenter] removeObserver:self];
    [super dealloc];
} 
```

# opencv - OpenCV 区域增长

> ID：15957078
> 
> 赞同：0
> 
> 时间：2013-04-11T19:21:39.717
> 
> 标签：opencv

我正在尝试在图像中查找皮肤区域。通过使用反投影，我可以将图像转换为单通道图像，每个像素值代表该像素是皮肤的概率。

我有两个阈值，T1 和 T2，其中 T1 > T2。通过用 T1 和 T2 对图像进行阈值处理，我得到了两个图像 I1 和 I2，我怎样才能找到 I2 中的区域，使得这些区域包含来自 I1 的区域？

对不起，我的英语不好。非常感谢。

# php - 我怎样才能回显' '而不建立链接？

> ID：15957079
> 
> 赞同：2
> 
> 时间：2013-04-11T19:21:42.073
> 
> 标签：php, html

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T19:22:30.483

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T19:24:11.657

使用[htmlentities](http://php.net/manual/en/function.htmlentities.php)将起作用：

```
<?php echo 'Allowable tags: ' . htmlentities('<a><b>'); ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T19:24:34.350

[**使用 PHP htmlentities()**](http://php.net/manual/en/function.htmlentities.php)将特殊字符转换为 html 实体，如下所示：

```
<?php echo htmlentities('Allowable tags: <a><b>'); ?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T19:25:11.410

您可以使用 HTML 转义字符...

[http://www.w3schools.com/tags/ref_entities.asp](http://www.w3schools.com/tags/ref_entities.asp)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-11T19:29:07.470

[htmlspecialchars](http://php.net/manual/en/function.htmlspecialchars.php) — 将特殊字符转换为 HTML 实体。

```
<?php echo htmlspecialchars('Allowable tags: <a><b>'); ?> 
```

输出 HTML：

```
Allowable tags: &lt;a&gt;&lt;b&gt; 
```

被视为：

> 允许的标签：<a><b>

# c - Array of Structs 输出奇怪？

> ID：15957082
> 
> 赞同：-1
> 
> 时间：2013-04-11T19:21:57.597
> 
> 标签：c, arrays, struct

谁能告诉我为什么结构数组不能正确打印出来？

我认为这与我分配给我不确定的结构的内存有关！

使用 mac osx 山狮 xcode 4 gcc

感谢您完全卡住的任何帮助！（请耐心等待，我只是学生！）

```
#include <stdio.h>
#include <limits.h>
#include <ctype.h>
#include <stdlib.h>
#include <string.h>
#include <unistd.h>
#include <sys/types.h>

typedef struct{
char* one;  
char* two;
 } Node;

 Node *nodes;
 int count = 0;

 //-----------------------------------------------------------------------
 void add(char *one,char*two){

 char x[40];
 char y[40];

 printf("reached..\n");

 strcpy(x,one);
 strcpy(y,two);

 printf("--> X: %s\n",x); 
 printf("--> Y: %s\n",y); 

 Node newNode;
 newNode.one = x;
 newNode.two = y;
 nodes[count]= newNode;

 count++;
 }
 //-----------------------------------------------------------------------

 //-----------------------------------------------------------------------
void print(){

 int x;
 for (x = 0; x < 10; x++)
 {
   printf("%d : (%s, %s) \n",x,nodes[x].one, nodes[x].two);
 }

 }

 //-----------------------------------------------------------------------

 //-----------------------------------------------------------------------
 void check(char **arg)
 {

if(strcmp(*arg, "Add") == 0)
{

add(arg[1],arg[2]);

}else if(strcmp(*arg,"print") == 0)
{

 print();
}else{
    printf("Error syntax Enter either: \n Add [item1][item2]\n OR \n print\n");
}

 }
 //-----------------------------------------------------------------------
 void readandParseInput(char *line,char **arg)
 {  

  if (fgets (line, 512, stdin)!= NULL) {  

  char * pch;
  pch = strtok (line," \n\t");
  int count = 0;
  arg[0] = pch;

  while (pch != NULL)
   {
   count++;
   pch = strtok (NULL, " \n\t"); 
   arg[count] =pch;
   }

}else{
printf("\n");
exit(0);
  }

 }

 //-----------------------------------------------------------------------

 int main() 
{

 int size = 100;
 nodes = calloc(size, sizeof(Node));

 int i;
 for(i = 0;i <100; i++){

 printf("%s , %s \n",nodes[i].one,nodes[i].two );
 // nodes[i].one = ".";
 // nodes[i].two = ".";
 }

 char  line[512];             /* the input line                 */
 char  *arg[50];              /* the command line argument      */

while (1) 
{ 
  readandParseInput(line,arg);
  if(arg[0] != NULL){
    check(arg);
    }

 }

return(0);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T19:25:12.163

您保留指向以下自动变量的指针：

```
 char x[40];
 char y[40]; 
```

这些在返回时超出范围`add()`，留下悬空指针。

您要么必须转换成数组`Node::one`，`Node::two`要么在堆上为它们分配内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T19:25:19.557

在您`add()`的功能中，您不能通过`=`运算符将一个结构分配给另一个...您必须复制它...

`memcpy( &nodes[count], &newNode )`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T19:32:38.620

```
#include <stdio.h>
#include <stdlib.h>

typedef struct {
    char *fn;
}NAME;

#define NAME_LEN 20

int main()
{
    NAME name;

    name.fn = (char *) calloc(NAME_LEN, sizeof(char));

    strcpy(name.fn, "Namco");

    printf("Name: %s\n", name.fn);

    free(name.fn);

    return 0;
} 
```

你不能只在 c 中分配这样的字符串

```
newNode.one = x;
newNode.two = y; 
```

newNode.one 指的是什么？？？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T22:51:33.433

在函数添加

```
 newNode.one = x;
 newNode.two = y; 
```

到

```
 newNode.one = strdup(x);
 newNode.two = strdup(y); 
```

# c++ - 复制构造函数和 operator=（多个数组...）

> ID：15957084
> 
> 赞同：0
> 
> 时间：2013-04-11T19:22:15.297
> 
> 标签：c++, struct, char

我必须为 Reg 类创建一个复制构造函数和赋值 operator=。但我有这些复杂的结构，不知道如何正确复制它。所以，问题是，我如何为 Reg 类创建复制构造函数 - 浅拷贝？另一个问题是， operator= 应该是什么样子 - 它应该是 Reg 的深层副本

```
 struct TMoves
        {
            const char* ddate;
            const char* sstreet;
            const char* ccity;

    public:

           ~TMoves()
          {
           delete [] ccity;
           delete [] ddate;
           delete [] sstreet;
          }

        };

    struct TData
    {
        int stackmult;
        const char* iid;
        const char* nname;
        const char* ssurname;
        int pocet;
        TMoves** moves;
        public:
        TData()
            {
                stackmult=1;
            }
        ~TData()
            {
                delete [] iid;
                delete [] nname;
                delete [] ssurname;

                for(int i=0;i<pocet;i++)
                {
                    delete moves[i];
                }

                delete [] moves;
            }

    };

class Reg
 {
   public:

        Reg ();
        Reg (const Regr&);
        ~Reg();
        Reg& operator= (const Reg &);

        bool Add (const char* id,   const char* name, const char* surname, const char* date, const char* street, const char* city );
        bool Resettle ( const char* id, const char* date, const char* street, const char* city );
   private:
        static const int MAX=1000; //default lenght of pole
        TData **pole;
        int counter; // pole lenght counter - not important now
        int multiplier; // used for realocating pole
 };

Reg::Reg()
{
    counter=0;
    multiplier=1;
    pole=new TData*[multiplier*MAX];

}
Reg::Reg(const Reg& out)
{

//... how?

}
Reg::Reg &operator= (const Reg& copy)
{

//... how?

} 
```

在方法中添加 - 在这里我找到正确的位置（misto）我应该在哪里放置 id - 使用二进制搜索

```
int misto=counter;
pole[misto]=new TData;

char *temp = new char[12];
    strcpy(temp, id);
    pole[misto]->iid = temp;

temp = new char[strlen(name)+1];
    strcpy(temp, name);
    pole[misto]->nname = temp;

temp = new char[strlen(surname)+1];
    strcpy(temp, surname);
    pole[misto]->ssurname = temp;

pole[misto]->moves=new TMoves*[STAT];
pole[misto]->moves[0]=new TMoves;

temp = new char[strlen(city)+1];
    strcpy(temp,city);
    pole[misto]->moves[0]->ccity= temp;

temp = new char[strlen(date)+1];
    strcpy(temp,date);
    pole[misto]->moves[0]->ddate= temp;

temp = new char[strlen(street)+1];
    strcpy(temp,street);
    pole[misto]->moves[0]->sstreet= temp; 
```

在方法 Ressetle - 我找到 id - 我必须找到我应该添加另一个信息（城市、街道、日期）的地方，并为它创建新的 TMove：

```
pole[misto]->moves[misto2]=new TMoves;

char *temp = new char[strlen(city)+1];
strcpy(temp,city);
pole[misto]->moves[misto2]->ccity= temp;

temp = new char[strlen(date)+1];
strcpy(temp,date);
pole[misto]->moves[misto2]->ddate= temp;

temp = new char[strlen(street)+1];
strcpy(temp,street);
pole[misto]->moves[misto2]->sstreet= temp; 
```

这个话题可能令人困惑，但我的代码太长了，我“只”面临这两个复制问题。感谢您的时间和答复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T20:20:27.870

不要为复制构造函数和复制赋值运算符赋予不同类型的语义。

默认情况下，两者都应提供独立副本。

复制构造函数的最佳实现是依赖于成员的复制构造，并且只使用编译器生成的。为此，请使用`std::string`代替`char*`，并`std::vector`用于其他数组。就是这么简单。

* * *

对于明确指示您不要使用and的**家庭作业**情况，请定义您自己的此类类。`string``vector`

坚持每个类最多管理一个资源，例如动态分配的事物。

# javascript - JavaScript [] 是如何真正工作的？

> ID：15957085
> 
> 赞同：12
> 
> 时间：2013-04-11T19:22:18.950
> 
> 标签：javascript, arrays, dictionary, associative-array

我正在为极度资源受限的嵌入式设备（[http://www.espruino.com](http://www.espruino.com)）编写一个 JavaScript 解释器，每次我认为我正确地实现了一些 JavaScript 时，我都意识到我错了。

我现在的问题是关于`[]`. 您将如何正确实现 JavaScript 最基本的部分之一？

我查看了 JavaScript 规范，也许我没有找到正确的位，但我找不到有用的答案。

我之前假设您实际上有两个“映射”——一个用于整数，一个用于字符串。数组长度是最大整数加一的值。然而，这似乎是错误的，根据 jsconsole on chrome：

```
var a = [];
a[5] = 42;
a["5"]; // 42
a.length; // 6 
```

但是也：

```
var a = [];
a["5"] = 42;
a[5]; // 42
a.length; // 6 
```

所以......太好了 - 一切都被转换成一个字符串，并使用代表整数的最高值字符串（加一）来获得长度？错误的。

```
var a = [];
a["05"] = 42;
a.length; // 0 
```

`"05"`是一个有效的整数 - 即使是八进制。那么为什么它不影响长度呢？

您是否必须将字符串转换为整数，然后检查转换回字符串时是否匹配？

有没有人参考用于存储和获取数组或对象中项目的确切算法？看起来应该很简单，但看起来实际上并非如此！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T19:28:20.413

见[MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array)

> 也可以引用 JavaScript 数组索引（例如，years["2"] 而不是 years[2]），尽管这不是必需的。无论如何，通过隐式 toString 转换，JavaScript 引擎最终将 2 in years[2] 强制转换为字符串。正是由于这个原因，“2”和“02”将引用年对象上的两个不同的插槽，以下示例记录为真：

```
console.log(years["2"] != years["02"]); 
```

因此，当您在数组对象上设置属性时，`a["5"]`您正在访问数组。`a["05"]`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-11T19:56:24.700

正如规格所说，并被其他人指出：

> “当且仅当 ToString(ToUint32(P)) 等于 P 且 ToUint32(P) 不等于 2^32-1 时，属性名称 P（以字符串值的形式）是数组索引。”

这解释了为什么在您的场景中`"5"`被视为数组索引而`"05"`不是：

```
console.log("5" === String("5" >>> 0));
// true, "5" is equal to "5", so it's an index

console.log("05" === String("05" >>> 0));
// false, "05" is not equal to "5", so it's not an index 
```

Note: the [Zero-fill right shift](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Bitwise_Operators#%3E%3E%3E_%28Zero-fill_right_shift%29) is the shortest way in JS to have a substitute of `ToUint32`, shifting a number by zero.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-11T19:27:37.383

数组只是对象。这意味着它们可以具有不被视为数组元素的其他属性。

如果方括号参数是一个整数，它使用它来执行对数组的赋值。否则，它将其视为字符串并将其作为属性存储在数组对象上。

**根据 delnan 的评论和 DCoder 的评论进行编辑，这就是 JavaScript 确定它是否是数组的适当索引（而不仅仅是一个属性）的方式：http:** [//www.ecma-international.org/ecma-262/5.1/#sec -15.4](http://www.ecma-international.org/ecma-262/5.1/#sec-15.4)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-11T19:44:37.003

数组也是对象。

通过做这个

```
a["05"] = 5; 
```

你正在做同样的事情：

```
a.05 = 5; 
```

**但是**，上面会导致语法错误，因为在点之后指定的属性不能以数字开头。

所以如果你这样做：

```
a = [];
a["05"] = 5; 
```

您仍然有一个**空数组**，但`a`named的属性`05`具有值`5`。

当且仅当等于时，该数字`x` [是数组索引](http://www.ecma-international.org/ecma-262/5.1/#sec-15.4)（因此在不满足该要求的情况下）。`ToString(ToUint32(x))``x``"05"`

# php - mod_php APC 被符号链接混淆，两次包含相同的文件 - 为什么？

> ID：15957086
> 
> 赞同：4
> 
> 时间：2013-04-11T19:22:20.193
> 
> 标签：php, caching, symlink, apc

我为文件夹（比如）设置了一个 Apache vhost，`website`它是另一个链接到当前版本（比如`website_N`）的文件夹的符号链接，其中 N 是版本号（`website -> website_123`）。部署新版本时，`website_N+1`会创建另一个名为的文件夹，并在其内容准备就绪时`website`重新创建符号链接以链接到该新文件夹 ( `website -> website124`)。

此设置似乎混淆了 APC 的包含缓存。有时（并非总是如此，这很烦人）在新部署之后，应用程序中的以下符号链接开关`include`和`require`指令开始导致重新声明错误：

> 致命错误：无法在 /absolute/path/to/deployment/physical/folder/website_N/include_foobar.php 中重新声明类 Foobar

`website_N`该消息中的文件夹通常是旧的构建文件夹之一，有时甚至不再存在。但有时会生成错误，显示最新发布文件夹的正确物理位置。保持不变的是第一次加载的类的“无法重新声明”错误。

我非常有信心这是一个 APC 问题，因为每次发生这种情况时，添加`apc_clear_cache()`到应用程序引导程序都会解决问题。

我猜这是因为不同的版本位于同一个符号链接文件夹下，共享相同的“未解析”路径。因此，可能会为预编译的图像加载旧的包含连接，并且对其“已解析”路径执行包含依赖项的另一次尝试，因此它显示为新的包含并导致双重包含和以下重新声明错误。虽然这个理论可能没有多大意义，但我不太了解 APC 的内部结构。

有很多方法可以解决这个问题（作为部署过程的一部分清除缓存是显而易见的），但是如果有人可以向我解释该错误背后的机制，即此设置中的什么破坏了 APC 行为以及在什么时候（以及为什么物理上删除的文件夹路径有时会出现在那些错误消息中），那太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-15T12:02:40.290

我使用 TYPO3 并遇到了同样的问题。TYPO3 缓存了很多。将符号链接更改为另一个源时，必须使用 shell 进入 TYPO3 安装文件夹并手动删除缓存的文件。

之后一切都很好。花了一天时间才弄清楚。

# java - 线程“AWT-EventQueue-0”中的异常 java.lang.NumberFormatException：空字符串：Java 中的错误

> ID：15957091
> 
> 赞同：0
> 
> 时间：2013-04-11T19:22:39.960
> 
> 标签：java

我做了一个简单的Java转换器，它将KM转换为M，将摄氏度转换为华氏度，将KG转换为G。转换公里<->米和公斤<->克似乎没问题。但是当我输入温度值时，我总是会收到这个错误：

```
Exception in thread "AWT-EventQueue-0" java.lang.NumberFormatException: empty String
at sun.misc.FloatingDecimal.readJavaFormatString(FloatingDecimal.java:992)
at java.lang.Double.parseDouble(Double.java:510)
at converter.Converter$2.actionPerformed(Converter.java:73)
at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:1995)
at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2318)
at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:387)
at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:242)
at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:236)
at java.awt.Component.processMouseEvent(Component.java:6297)
at javax.swing.JComponent.processMouseEvent(JComponent.java:3275)
at java.awt.Component.processEvent(Component.java:6062)
at java.awt.Container.processEvent(Container.java:2039)
at java.awt.Component.dispatchEventImpl(Component.java:4660)
at java.awt.Container.dispatchEventImpl(Container.java:2097)
at java.awt.Component.dispatchEvent(Component.java:4488)
at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4575)
at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4236)
at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4166)
at java.awt.Container.dispatchEventImpl(Container.java:2083)
at java.awt.Window.dispatchEventImpl(Window.java:2489)
at java.awt.Component.dispatchEvent(Component.java:4488)
at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:668)
at java.awt.EventQueue.access$400(EventQueue.java:81)
at java.awt.EventQueue$2.run(EventQueue.java:627)
at java.awt.EventQueue$2.run(EventQueue.java:625)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87)
at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:98)
at java.awt.EventQueue$3.run(EventQueue.java:641)
at java.awt.EventQueue$3.run(EventQueue.java:639)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87)
at java.awt.EventQueue.dispatchEvent(EventQueue.java:638)
at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:269)
at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:184)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:174)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:169)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:161)
at java.awt.EventDispatchThread.run(EventDispatchThread.java:122) 
```

*很抱歉发布所有内容，但我无法理解为什么会出现此错误。

这是我的代码：

```
package converter;
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
public class Converter {
    public static double result;
    public static String indicator;
    public static void main(String[] args) {

    JFrame converter = new JFrame();
    Container content = converter.getContentPane();

    converter.setLayout(new GridLayout (3,3));

    final String[] convertionChoice = {" ", "Kilometer<->Meter", "Celcius<->Fahrenheit", "Kilograms<->Grams"};
    JComboBox convertionList = new JComboBox(convertionChoice);

    final JLabel value1 = new JLabel("---", SwingConstants.LEFT);
    final JLabel value2 = new JLabel("---", SwingConstants.LEFT);
    JLabel blank1 = new JLabel(" ");
    JLabel blank2 = new JLabel(" ");

    final JTextField one = new JTextField();
    final JTextField two = new JTextField();

    JButton convert = new JButton("Convert");
    JButton exit = new JButton("Exit");
    JButton clear = new JButton("Clear All");

     convertionList.addActionListener(new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent e) {
            JComboBox cb = (JComboBox)e.getSource();
            String currentComboSelection = (String)cb.getSelectedItem();
                 if (currentComboSelection.equals(convertionChoice[1])) {          
                        value1.setText("Kilometer");
                        value2.setText("Meter");
                        indicator = "K/M"; }
                 if (currentComboSelection.equals(convertionChoice[2])) {          
                        value1.setText("Celcius");
                        value2.setText("Fahrenheit");
                        indicator = "C/F"; }
                 if (currentComboSelection.equals(convertionChoice[3])) {          
                        value1.setText("Kilograms");
                        value2.setText("Grams");
                        indicator = "KG/G";}

           }
       } );

     convert.addActionListener(new ActionListener() {
         @Override
         public void actionPerformed (ActionEvent e) {
             if("K/M".equals(indicator)) {
                   String km1 = one.getText();
                   String m1 = two.getText();
                        if(!km1.isEmpty()) {
                            double km2 = Double.parseDouble(km1);
                            result = km2 * 1000;
                            String result2 = Double.toString(result);
                            two.setText(result2);}
                        else {
                            double m2 = Double.parseDouble(m1);
                            result = m2 / 1000;
                            String result2 = Double.toString(result);
                            one.setText(result2); } }

            if("C/F".equals(indicator)) {
                 String cel = one.getText();
                 double cel2 = Double.parseDouble(cel);
                 String fah = two.getText();
                 double fah2 = Double.parseDouble(fah); 
                 if(!cel.isEmpty()) {    
                            result = (fah2 - 32) * 0.56;
                            String result2 = Double.toString(result);
                            two.setText(result2); }
                        else {   
                            result = cel2 * 1.8 + 32;
                            String result2 = Double.toString(result);
                            one.setText(result2); } }

            if("KG/G".equals(indicator)) {
                   String kg1 = one.getText();
                   String g1 = two.getText();
                        if(!kg1.isEmpty()) {
                            double kg2 = Double.parseDouble(kg1);
                            result = kg2 * 1000;
                            String result2 = Double.toString(result);
                            two.setText(result2);}
                        else {
                            double g2 = Double.parseDouble(g1);
                            result = g2 / 1000;
                            String result2 = Double.toString(result);
                            one.setText(result2); } }
         }
     });

     exit.addActionListener(new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent e) {
            System.exit(0);
        }
    });

     clear.addActionListener(new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent e) {
            one.setText("");
            two.setText("");
        }
    });

    content.add(convertionList);
    content.add(value1);
    content.add(one);
    content.add(blank1);
    content.add(value2);
    content.add(two);
    content.add(convert);
    content.add(clear);
    content.add(exit);

    converter.setSize(700,200);
    converter.setTitle("Converter");
    converter.setVisible(true);

    converter.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
} 
```

}

谁能告诉我怎么了？因为每当我输入摄氏度值并按下计算按钮时，总会出现该错误。

任何答案、评论或建议将不胜感激:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T19:31:50.523

从您的代码中，我猜您输入的是度数**或**摄氏度，而不是两者。但在这儿

```
String cel = one.getText();
double cel2 = Double.parseDouble(cel);
String fah = two.getText();
double fah2 = Double.parseDouble(fah); 
```

您正在**解析两者**。结果，其中一个是**空**的，无法解析为双精度。您需要先检查哪个不是空的：

```
if("C/F".equals(indicator)) {
  if(!one.getText().isEmpty()) {   
    String cel = one.getText();
    double cel2 = Double.parseDouble(cel);
    // Processing ...
  } else if(!two.getText().isEmpty()) { 
    String fah = two.getText();
    double fah2 = Double.parseDouble(fah); 
    // Processing ...
  }
} 
```

我没注意，但你已经在用**km 和 kg**做这件事，这就是为什么它只发生在**temperature**上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T05:34:39.563

我想我已经明白了...

我放置了错误的文本字段，这就是为什么它说它是空的...

所以在此之前，这是我的代码：

```
String cel = one.getText();
             double cel2 = Double.parseDouble(cel);
             String fah = two.getText();
             double fah2 = Double.parseDouble(fah); 
             if(!cel.isEmpty()) {    
                        result = (fah2 - 32) * 0.56;
                        String result2 = Double.toString(result);
                        two.setText(result2); }
                    else {   
                        result = cel2 * 1.8 + 32;
                        String result2 = Double.toString(result);
                        one.setText(result2); } 
```

如果 cel 不为空，它应该将 cel 的值计算为华氏度，但我将文本字段二的值（即 fah）放在这里，我从未意识到第二个文本框是空的，这就是它有错误的原因一个空字符串..

所以这是我现在的代码：

```
 String cel = one.getText();
                     String fah = two.getText();
if(!cel.isEmpty()) {
                            double cel2 = Double.parseDouble(cel);
                            result = cel2 * 1.8 + 32;
                            String result2 = Double.toString(result);
                            two.setText(result2);
                        }
                        else {
                            double fah2 = Double.parseDouble(fah);
                            result = (fah2 - 32) * 0.56;
                            String result2 = Double.toString(result);
                            one.setText(result2); } 
```

现在如果 cel 不为空，它将获取 cel 的值并将其转换为华氏温度.. 由于文本框有一个值，它不再显示空字符串错误..

无论如何，感谢大家的帮助...尽管仍然欢迎评论，答案和建议..再次感谢:)

# jquery - .html() 和 .alert() 显示不同的输出

> ID：15957093
> 
> 赞同：1
> 
> 时间：2013-04-11T19:22:47.123
> 
> 标签：jquery

我有一个收集所选跨度的 id 的 jquery。当我想在 html 上显示它时，它没有逗号，而 alert() 打印例如`1,2,3`html() 打印`123`

```
$("#selected_order").click(function() {
        var order = new Array();
        $(".selected").each(function(){
            order.push($(this).attr('data-id'));
        });

        $("#display_selected").html(order);
        alert(order)
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T19:24:46.977

您想在输出到 html 时加入数组。

```
$("#display_selected").html(order.join(",")); 
```

`[]`还使用而不是初始化您的数组`new Array()`。当您希望数组只有这么多值时，后者很有用；`new Array(10)`.

# c - 我可以假设所有平台都支持带有颜色的“printf”吗？

> ID：15957095
> 
> 赞同：2
> 
> 时间：2013-04-11T19:22:50.227
> 
> 标签：c, unix, colors, printf

我想使用`printf`颜色：

像：[_](https://stackoverflow.com/questions/3585846/color-text-in-terminal-aplications-in-unix)

```
#include <stdio.h>

#define KNRM  "\x1B[0m"
#define KRED  "\x1B[31m"
#define KGRN  "\x1B[32m"
#define KYEL  "\x1B[33m"
#define KBLU  "\x1B[34m"
#define KMAG  "\x1B[35m"
#define KCYN  "\x1B[36m"
#define KWHT  "\x1B[37m"

int main()
{
    printf("%sred\n", KRED);
    printf("%sgreen\n", KGRN);
    printf("%syellow\n", KYEL);
    printf("%sblue\n", KBLU);
    printf("%smagenta\n", KMAG);
    printf("%scyan\n", KCYN);
    printf("%swhite\n", KWHT);
    printf("%snormal\n", KNRM);

    return 0;
} 
```

*   我可以假设它将被编译`GCC`并在任何类似 Unix 的平台中得到支持吗？
*   如果没有，我怎样才能打印颜色`stdout`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T20:07:28.340

它不是平台的功能，而是终端的功能。

如果您将 VT525 连接到计算机的串行端口，您将看到所有绚丽的 ANSI 颜色。如果您连接 VT100，您会看到黑底黑字大部分是绿色。如果您连接 IBM 2741，您将看到大部分是黑底白字，或者如果您有这些颜色的胶带，可能会看到棕色、蓝色、绿色或红色，但不是同时（您需要手动更换胶带）。

如今，在各种窗口系统上运行的许多（但不是全部）终端仿真器都支持 ANSI 颜色选择序列。

在类 Unix 系统上，发现和使用终端功能（颜色和许多其他功能）的推荐方法是使用诸如 ncurses 之类的库。该库将为您的终端或终端仿真器选择正确的转义序列，如果不支持颜色，则回退到单色打印。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T19:26:19.867

不，你真的不能假设。不仅不是所有平台都适用，根据终端设置，它甚至可能不适用于任何平台上的所有用户。

# thrift - Thrift IDL 中的通用数据类型设计

> ID：15957098
> 
> 赞同：1
> 
> 时间：2013-04-11T19:23:00.063
> 
> 标签：thrift

我需要在 Thrift IDL 中设计一个通用数据类型以下是我想出的。我需要一些专家来审查。

```
/**
 * wraper over various type declaration
 */
struct BoolType {
    1: required string name,
    2: required list<bool> val
}
struct ByteType {
    1: required string name,
    2: required list<byte> val
}
struct ShortType {
    1: required string name,
    2: required list<i16> val
}
struct IntType {
    1: required string name,
    2: required list<i32> val
}
struct LongType {
    1: required string name,
    2: required list<i64> val
}
struct DoubleType {
    1: required string name,
    2: required list<double> val
}
struct StringType {
    1: required string name,
    2: required list<string> val
}
struct BinaryType {
    1: required string name,
    2: required list<binary> val
}

union BasicType {
    1: BoolType        vBool,
    2: ByteType        vByte,
    3: IntType        vInt,
    4: LongType        vLong,
    5: DoubleType    vDouble,
    6: StringType    vString,
    7: BinaryType   vBinary
}

struct CompoundType {
    1: BoolType     vBool,
    2: ByteType        vByte,
    3: IntType        vInt,
    4: LongType        vLong,
    5: DoubleType    vDouble,
    6: StringType    vString,
    7: BinaryType   vBinary
}

union TObject {
    1: BasicType    vBasicType,
    2: CompoundType vCompoundType
} 
```

`TObject`是我想在我的服务 API 中使用的东西

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-13T22:27:05.157

这里的答案与邮件列表中的答案相同：

1.  提供的信息不足以进行有意义的审查
2.  通用数据结构是不良 API 设计的良好指标。

# c - glibc/math 中的文件名约定？

> ID：15957099
> 
> 赞同：3
> 
> 时间：2013-04-11T19:23:06.637
> 
> 标签：c, naming-conventions, glibc

如果我们查看 C 库 glibc 的目录 math ，我们有以下文件：

```
atest-exp2.c
atest-exp.c
atest-sincos.c
basic-test.c
bits
bug-nextafter.c
bug-nexttoward.c
bug-tgmath1.c
cabs.c
cabsf.c
cabsl.c
carg.c
cargf.c
cargl.c
cimag.c
cimagf.c
cimagl.c
complex.h
conj.c
conjf.c
conjl.c
creal.c
crealf.c
creall.c
divtc3.c
e_acoshl.c
e_acosl.c
e_asinl.c
e_atan2l.c
e_atanhl.c
e_coshl.c
e_exp10.c
e_exp10f.c
e_exp10l.c
e_exp2l.c
e_expl.c
e_fmodl.c
e_gammal_r.c
e_hypotl.c
e_j0l.c
e_j1l.c
e_jnl.c
e_lgammal_r.c
e_log10l.c
e_log2l.c
e_logl.c
e_powl.c
e_rem_pio2l.c
e_scalb.c
e_scalbf.c
e_scalbl.c
e_sinhl.c
e_sqrtl.c
fclrexcpt.c
fedisblxcpt.c
feenablxcpt.c
fegetenv.c
fegetexcept.c
fegetround.c
feholdexcpt.c
fenv.h
fesetenv.c
fesetround.c
feupdateenv.c
fgetexcptflg.c
fpu_control.c
fraiseexcpt.c
fsetexcptflg.c
ftestexcept.c
gen-libm-test.pl
ieee-math.c
k_cosl.c
k_rem_pio2l.c
k_sincosl.c
k_sinl.c
k_tanl.c
libm-test.inc
machine
Makefile
math.h
multc3.c
README.libm-test
s_asinhl.c
s_atanl.c
s_cacos.c
s_cacosf.c
s_cacosh.c
s_cacoshf.c
s_cacoshl.c
s_cacosl.c
s_casin.c
s_casinf.c
s_casinh.c
s_casinhf.c
s_casinhl.c
s_casinl.c
s_catan.c
s_catanf.c
s_catanh.c
s_catanhf.c
s_catanhl.c
s_catanl.c
s_cbrtl.c
s_ccos.c
s_ccosf.c
s_ccosh.c
s_ccoshf.c
s_ccoshl.c
s_ccosl.c
s_cexp.c
s_cexpf.c
s_cexpl.c
s_clog10.c
s_clog10f.c
s_clog10l.c
s_clog.c
s_clogf.c
s_clogl.c
s_cpow.c
s_cpowf.c
s_cpowl.c
s_cproj.c
s_cprojf.c
s_cprojl.c
s_csin.c
s_csinf.c
s_csinh.c
s_csinhf.c
s_csinhl.c
s_csinl.c
s_csqrt.c
s_csqrtf.c
s_csqrtl.c
s_ctan.c
s_ctanf.c
s_ctanh.c
s_ctanhf.c
s_ctanhl.c
s_ctanl.c
s_erfl.c
setfpucw.c
s_expm1l.c
s_fdim.c
s_fdimf.c
s_fdiml.c
s_fma.c
s_fmaf.c
s_fmal.c
s_fmax.c
s_fmaxf.c
s_fmaxl.c
s_fmin.c
s_fminf.c
s_fminl.c
s_ldexp.c
s_ldexpf.c
s_ldexpl.c
s_log1pl.c
s_nan.c
s_nanf.c
s_nanl.c
s_nextafter.c
s_nexttowardf.c
s_nexttowardl.c
s_significand.c
s_significandf.c
s_significandl.c
s_tanhl.c
test-double.c
test-fenv.c
test-float.c
test-fpucw.c
test-idouble.c
test-ifloat.c
test-ildoubl.c
test-ldouble.c
test-matherr.c
test-misc.c
test-powl.c
test-tgmath2.c
test-tgmath.c
test-tgmath-int.c
test-tgmath-ret.c
tgmath.h
t_sincosl.c
tst-CMPLX2.c
tst-CMPLX.c
tst-definitions.c
Versions
w_acos.c
w_acosf.c
w_acosh.c
w_acoshf.c
w_acoshl.c
w_acosl.c
w_asin.c
w_asinf.c
w_asinl.c
w_atan2.c
w_atan2f.c
w_atan2l.c
w_atanh.c
w_atanhf.c
w_atanhl.c
w_cosh.c
w_coshf.c
w_coshl.c
w_drem.c
w_dremf.c
w_dreml.c
w_exp10.c
w_exp10f.c
w_exp10l.c
w_exp2.c
w_exp2f.c
w_exp2l.c
w_expl.c
w_fmod.c
w_fmodf.c
w_fmodl.c
w_hypot.c
w_hypotf.c
w_hypotl.c
w_ilogb.c
w_ilogbf.c
w_ilogbl.c
w_j0.c
w_j0f.c
w_j0l.c
w_j1.c
w_j1f.c
w_j1l.c
w_jn.c
w_jnf.c
w_jnl.c
w_lgamma.c
w_lgammaf.c
w_lgammaf_r.c
w_lgammal.c
w_lgammal_r.c
w_lgamma_r.c
w_log10.c
w_log10f.c
w_log10l.c
w_log2.c
w_log2f.c
w_log2l.c
w_log.c
w_logf.c
w_logl.c
w_pow.c
w_powf.c
w_powl.c
w_remainder.c
w_remainderf.c
w_remainderl.c
w_scalb.c
w_scalbf.c
w_scalbl.c
w_sinh.c
w_sinhf.c
w_sinhl.c
w_sqrt.c
w_sqrtf.c
w_sqrtl.c
w_tgamma.c
w_tgammaf.c
w_tgammal.c 
```

`e_`和`s_`前缀是什么`w_`意思？

# oracle - 在 C# (VS 2010) 上使用 Active-Directory 和 Oracle 进行 SSO

> ID：15957102
> 
> 赞同：1
> 
> 时间：2013-04-11T19:23:22.940
> 
> 标签：oracle, c#-4.0, active-directory, single-sign-on

这是我们所拥有的：

*   Oracle 数据库驱动软件，需要用户身份验证才能启动应用程序。
*   用户通过身份验证登录会话的 Active-Directory 控制器
*   Oracle 10、Windows Server 2008、Windows 7 WS、C# (2010)、DevExpress、旧 VB6 框架

这是我们想要做的：

*   使用 MS 凭据对在我们的应用程序中跳过登录的用户进行身份验证
*   将用户的身份验证信息（使用 AD）映射到 Oracle 权限表
*   删除登录框，除非用户没有足够的权限使用该应用程序

任何线索、书籍参考、教程、指南、howto、示例、文档将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-09T13:02:55.617

阅读你的问题，我很高兴看到你和我在同一个盒子里。

我们有一个 Oracle 9i 驱动的应用程序。我非常感兴趣地阅读了 Oracle 10g 具有 AD 功能，但遗憾的是我们无法亲身体验它，但仍然对我们拥有的东西感到高兴。

在这种情况下，只有设计自己的解决方案。为此，我们已将 Oracle 用户名转换为 AD 等效用户名。我们的想法是针对每个用户会话，应用程序检查用户是否已经通过 AD 身份验证，如果这样，我们将通过将应用程序生成的新密码应用到 AD 身份验证用户来创建会话，然后使用它连接到 Oracle DB。用户不知道生成的密码，也不知道任何人计划将其加密。对于每个会话，都会生成密码并将其应用于用户。

定期更改密码存在开销等缺点，但我们找不到更好的解决方案，如果您有请。与我们分享，造福社会。

# android - HTC DNA 上的可绘制资产被炸毁

> ID：15957104
> 
> 赞同：1
> 
> 时间：2013-04-11T19:23:28.173
> 
> 标签：android, android-drawable, screen-resolution

我在 htc dna 上运行我的应用程序。我观察到我在操作栏中的图标很大，甚至不适合它。我的可绘制对象有 3 个桶：mdpi、hdpi、xhdpi。我尝试创建一个 xxhdpi 存储桶并将我的 xhdpi 资产复制到其中。他们仍然爆炸。我应该怎么做才能使资产正确？

**更新：添加照片**

连结 4：

![在 Nexus 4 上](https://i.stack.imgur.com/iLmSH.png)

宏达基因： ![关于 HTC DNA](https://i.stack.imgur.com/6mXWD.png)

如果有帮助，我已经从 Android 资产工具（[http://android-ui-utils.googlecode.com/hg/asset-studio/dist/index.html](http://android-ui-utils.googlecode.com/hg/asset-studio/dist/index.html)）生成了可绘制对象

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T17:03:44.437

结果是：我生成的图标太大（一些 344x344px）。然而，有趣的是 Android 从 xhdpi 手机（nexus 4）上的 xhdpi 存储桶很好地扩展了这些。但是，当我将它们复制到 xxhdpi 存储桶时，它们被选中（在 1080p 设备 - htc dna 上）并被炸毁。我将图标的大小从 xxhdpi 桶调整到大约 150x150px 现在它们固定在操作栏上并且看起来更好。

# python - 使用 Python 3 安装 PyQt4 - 错误

> ID：15957106
> 
> 赞同：1
> 
> 时间：2013-04-11T19:23:30.810
> 
> 标签：python, pyqt, pyqt4

我按照说明在此处下载和安装 sip 和 pyqt4

[http://ubuntuforums.org/showthread.php?t=1777613](http://ubuntuforums.org/showthread.php?t=1777613)

我有 PyQt4 via aptitude 为我的 Python 2.7 安装工作；为了让它适用于 Python 3，当我运行 sudo make 时，我收到以下消息：

```
 make[1]: Entering directory `/home/usman/programs/PyQt-x11-gpl-4.10/QtCore'
g++ -c -m64 -pipe -fPIC -O2 -Wall -W -D_REENTRANT -DNDEBUG -DSIP_PROTECTED_IS_PUBLIC -Dprotected=public -DQT_NO_DEBUG -DQT_CORE_LIB -I. -I/home/usman/programs/PyQt-x11-gpl-4.10/qpy/QtCore -I/usr/include/python3.2mu -I/usr/mkspecs/linux-g++ -I/usr/include/qt4/QtCore -I/usr/include/qt4 -o sipQtCorecmodule.o sipQtCorecmodule.cpp
/home/usman/programs/PyQt-x11-gpl-4.10/QtCore/sipQtCorecmodule.cpp:9883:1: error: braces around scalar initialiser for type ‘sipSubClassConvertorDef* {aka _sipSubClassConvertorDef*}’
make[1]: *** [sipQtCorecmodule.o] Error 1
make[1]: Leaving directory `/home/usman/programs/PyQt-x11-gpl-4.10/QtCore'
make: *** [all] Error 2 
```

有谁知道解决方案？谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2017-01-24T08:32:14.133

你需要做`sudo make`。完成后，您应该能够编译源代码。

# quickbooks - p_txn_ln 后续税行不允许

> ID：15957112
> 
> 赞同：1
> 
> 时间：2013-04-11T19:24:05.443
> 
> 标签：quickbooks, intuit-partner-platform, intuit

使用 IPP 将发票发送到 QuickBooks Premier 2013 时出现此错误。这个错误是什么意思？

我们将销售税项目设置为发票中的行项目。

# jquery - jquery 不会出错或成功

> ID：15957113
> 
> 赞同：1
> 
> 时间：2013-04-11T19:24:07.817
> 
> 标签：jquery

与此相关：[如何将自动完成功能连接到文本框？](https://stackoverflow.com/questions/15955828/old-school-net-1-1-app-need-autocomplete-connected-to-textbox)

我试图将自动完成（来自 jquery ui）链接到文本框。我有以下内容：

```
$("#txtTags").autocomplete({
        minLength: 0,
        source: function(request, response) {   
            $.ajax({
                type: "POST",
                url: "GetTags.asmx/GetTags",
                dataType: "xml",
                contentType: "text/xml; charset=utf-8",
          success: function(xml) {
               alert("hi");
               // Completion logic goes here
          },
                error: function (XMLHttpRequest, textStatus, errorThrown) {
                    alert(textStatus);
                }
            });
        },    
    }); 
```

为什么我不能`alert`从成功函数或错误函数中得到？我必须使用 dataType XML，因为我在一个古老的`.net 1.1`应用程序上 json/jsonp 当时不支持（2002/2003）。GetTags.asmx 是我的网络服务方法。但是，当我在我的文本框中键入时，我当然没有收到任何错误，也没有收到自动完成选择。

更新：

修复了成功问题，所以我确实进入了成功功能，问题是我的自动完成文本框怎么还是空的？在我在这个问题顶部发布的第一个链接中，我已经从数据库中获取了我的自动完成数据，我将它存储为一个字符串数组，并在我的 webmethod 中返回它。我必须在 jquery 中做什么才能获取这些数据？

## 编辑 2

这是我从 chrome / 运行 webservice (.asmx) 文件后的 xml 文件，即：

```
This XML file does not appear to have any style information associated with it. The document tree is shown below.

 <ArrayOfString xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://tempuri.org/quikfix.jakah.com/GetTags">
    <string>.net</string>
    <string>.net-1.1</string>
    <string>3g</string>
    <string>6283</string>
    <string>7641</string>
    <string>8-id</string>
    <string>80070005</string>
    <string>accounts</string>
    <string>actions</string>
    <string>activation</string>
    <string>active-directory</string>
    <string>active-directory</string>
    <string>ad</string>
    <string>addin</string>
    <string>adp</string>
    <string>adp-tlm-interface</string>
    <string>adptlm</string>
    <string>adupdater</string>
    <string>ajax</string>
 </ArrayOfString> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T19:34:28.430

将函数用于源选项时，您最终必须将数组传递给响应方法。

```
source: function(request, response) {
    ...
        response(thearrayofdata);
    ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T20:02:37.213

从您的 xml 创建数组并将其传递给这样的响应 -

```
 success: function(xml) {
    var data = [];    
    $(xml).find('string').each(function(){ 
         data.push($(this).text());
    });
    response(data);
}, 
```

# algorithm - 扫雷的算法解决方案

> ID：15957116
> 
> 赞同：5
> 
> 时间：2013-04-11T19:24:16.810
> 
> 标签：algorithm, minesweeper

我正在尝试制作扫雷求解器。如您所知，有两种方法可以确定雷区中的哪些字段可以安全打开，或者确定哪些字段已被挖掘并且您需要标记它。第一种确定方法是微不足道的，我们有这样的事情：

if (X 周围的地雷数量 – X 周围当前发现的地雷数量) = X 周围未开垦的田地数 那么 X 周围所有未开垦的田地都被开采

如果（X 周围的地雷数量 == X 周围发现的当前地雷数量）则 X 周围的所有未开垦区域都未被开采

但我的问题是：当我们找不到任何已开采或安全的场地并且我们需要查看多个场地时，情况会怎样？

[http://img541.imageshack.us/img541/4339/10299095.png](http://img541.imageshack.us/img541/4339/10299095.png)

比如这种情况。我们无法使用以前的方法确定任何内容。因此，对于这些情况，我需要算法方面的帮助。

我必须使用 A* 算法来做到这一点。这就是为什么我需要所有可能的安全状态来进行算法的下一步。当我找到所有可能的安全状态时，我会将它们添加到当前最短路径中，并根据启发式函数对路径列表进行排序并选择下一个需要打开的字段。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-11T19:45:01.457

很棒的问题，在你太兴奋之前，请阅读[NP Completeness 和 Minesweeper](http://web.mat.bham.ac.uk/R.W.Kaye/minesw/ordmsw.htm)，以及随附的[演示文稿](http://web.mat.bham.ac.uk/R.W.Kaye/minesw/ASE2003.pdf)，其中开发了一些好的最坏情况示例以及人类如何解决它们。尽管如此，如果我们使用基本的修剪和启发式方法，我们很可能不会遇到时间障碍。

生成游戏的问题在这里问：[扫雷求解算法](https://stackoverflow.com/questions/1738128/minesweeper-solving-algorithm)。有一篇关于[代数](http://quantum-p.livejournal.com/19616.html)方法的非常酷的帖子。您还可以尝试回溯（即猜测一下，看看这是否会使事情无效），类似于本地信息不足以用于类似[sudoku](http://en.wikipedia.org/wiki/Algorithmics_of_sudoku#Solving_sudokus_by_a_brute-force_algorithm)的情况。请参阅有关此[技术](http://luckytoilet.wordpress.com/2012/12/23/2125/)的精彩讨论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T22:07:44.140

正如@tigger 所说，这不是一个可以通过一组简单的规则来解决的问题。Minesweeper 是一个很好的例子，其中 DPLL 等回溯算法很有用。使用命题逻辑这样简单的东西，你可以为扫雷实现一个非常有效的求解器。我不确定您是否熟悉 AI 推理和逻辑推理 - 如果不熟悉，您可能想看看 Stuart Russel 和 Peter Norvig 的《人工智能 - 现代方法》一书。如需快速参考 DPLL 和命题逻辑，请在 Google 上搜索“wumpus 世界命题逻辑”。

# c# - 只返回大对象的某些属性？

> ID：15957120
> 
> 赞同：2
> 
> 时间：2013-04-11T19:24:21.973
> 
> 标签：c#, json, asp.net-web-api

我有一个由许多不同属性组成的大对象。我正在用四个不同的功能操作这个对象。每个函数都返回对象。这是我的设置的一个非常简短的版本：

```
public class myproject
{
    //many attributes
}

public myproject FunctionOne()
{
    //do some logic.
    //return myproject but only properties 4,5,6
}
public myproject FunctionTwo()
{
    //do some logic.
    //return myproject but only properties 1,2,3
}
public myproject FunctionThree()
{
    //do some logic.
    //return myproject but only properties 1,4,7
}
public myproject FunctionFour()
{
    //do some logic.
    //return myproject but only properties 3,2,5
} 
```

所以问题是，当我返回我的对象​​时，我只想在该返回中提供某些属性。有点好像我正在返回一个仅为该目的而动态创建的自定义对象。

我有什么选择来完成这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T19:44:01.267

如果您使用 REST 并返回 JSON，您不妨这样做：

WebApi 调用：

```
public HttpResponseMessage GetOne()
{
    return this.Request.CreateResponse(
        HttpStatusCode.OK,
        FunctionOne());
}
public HttpResponseMessage GetTwo()
{
    return this.Request.CreateResponse(
        HttpStatusCode.OK,
        FunctionTwo());
} 
```

逻辑：

```
public dynamic FunctionOne()
{
    //do some logic.
    //return myproject but only properties 4,5,6
    return new {property4 = "abc", property5 = "xyz", property6 = "123"};
}
public dynamic FunctionTwo()
{
    //do some logic.
    //return myproject but only properties 1,2,3
    return new { property1 = "asdf", property2 = "123", property3 = "aaa" };
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T19:29:39.723

如果您可以控制使用此对象的代码，则可以取消您提到的属性（可能是属性？），并将它们替换为`Dictionary`包含属性名称/值对。

然后，只需在构造函数时用所需的值填充它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T19:35:40.483

如果属性具有 Null 值，则在对象序列化为 Json 时将跳过该属性。因此，一种可能的解决方案是使用可为空的属性。

# java - 将解析后的文本添加到字符串中

> ID：15957122
> 
> 赞同：1
> 
> 时间：2013-04-11T19:24:24.697
> 
> 标签：java, parsing, jsoup

我正在做我的第一个项目，其中包括一个网站解析器。我试图了解一些关于解析器的知识，偶然发现了一个名为“Jsoup”的库，在这里可以找到：http: [//jsoup.org/download](http://jsoup.org/download)

然后我尝试了在教程网站上找到的这个代码示例：

```
import java.io.IOException;

import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;
import org.jsoup.select.Elements;

public class HTMLParserExample1 {

  public static void main(String[] args) {

    Document doc;
    try {

        // need http protocol
        doc = Jsoup.connect("http://google.com").get();

        // get page title
        String title = doc.title();
        System.out.println("title : " + title);

        // get all links
        Elements links = doc.select("a[href]");
        for (Element link : links) {

            // get the value from href attribute
            System.out.println("\nlink : " + link.attr("href"));
            System.out.println("text : " + link.text());

        }

    } catch (IOException e) {
        e.printStackTrace();
    }

  }

} 
```

代码运行良好，所以我决定尝试将它与我的应用程序的其余部分结合起来（这是一个 JFrame，里面有一个文本框）

所以我试图做的是将放入 [code]System.out.println();[/code] 的内容放入字符串中。在这样做时，我在尝试按以下方式进行操作时遇到错误：

```
s + "\nlink : " + link.attr("href");
s + "text : " + link.text(); 
```

我遇到了错误，很快意识到这不是正确的做法，所以我找到了 String.concat 方法并决定使用它。使用它之后它仍然没有工作，然后我也意识到应该解析的内容也停止使用 System.out 命令打印出来。

这是我当前的代码：

```
import java.io.IOException;
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;
import org.jsoup.select.Elements;

public class JParser {

    private String finishedParse;

     public static void JParser() {

         //String that should hold the finished parse
         String finishedParse = new String();

         //test string used to see if what the Netbeans IDE recomended me to do work
         String tester = new String();
         finishedParse = "";

    Document doc;
    try {

        //Need http protocol
        doc = Jsoup.connect("http://google.com").get();

        //Get page title
        String title = doc.title();
        System.out.println("title : " + title);

        //Get all links
        Elements links = doc.select("a[href]");
        for (Element link : links) {

            //Get the value from href attribute
            System.out.println("\nlink : " + link.attr("href"));
            System.out.println("text : " + link.text());
                        tester = finishedParse.concat("\nlink : " + link.attr("href"));
                        tester = finishedParse.concat("text : " + link.text());
                        tester = finishedParse.concat("\n");

        }

    } catch (IOException e) {
        e.printStackTrace();
                System.out.println(e);
    }
  }

     //The method i wish to call from my other class to get the parsed text returned.
     public String getParsedText(String parsedText){
         parsedText = finishedParse;
         return parsedText;
     }
} 
```

现在的问题是，应该使用 System.out 命令打印的内容没有被打印出来，我仍然没有弄清楚如何将解析后的文本放入我的字符串中。

我真的对学习很感兴趣，我很难找到我的代码中的错误。我确实在网上搜索了答案，但没有成功。

**剩下的错误** 如下 两个 System.out 语句没有向控制台打印任何内容，当我从教程中复制代码时它确实有效。这两个代码都在上面的帖子中，请阅读并帮助我。

问题是我以一种奇怪的方式打电话给班级，我最好的猜测是我昨天很累所以我的无知开始了..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T19:28:22.857

尝试这个：

```
for (Element link : links) {

  // Get the value from href attribute
  System.out.println("\nlink : " + link.attr("href"));
  System.out.println("text : " + link.text());
  finishedParse = finishedParse.concat("\nlink : " + link.attr("href"));
  finishedParse = finishedParse.concat("text : " + link.text());
  finishedParse = finishedParse.concat("\n");

} 
```

请注意，使用`concat()`与使用运算符完全相同`+`，真正的问题是您应该更新用于连接最终答案的字符串。更好的是，您应该将 a`StringBuilder`用于此类工作 - 它将就地更新（而`concat()`每次都返回一个新字符串），因此效率更高。

```
StringBuilder sb = new StringBuilder();

for (Element link : links) {

  // Get the value from href attribute
  System.out.println("\nlink : " + link.attr("href"));
  System.out.println("text : " + link.text());
  sb.append("\nlink : " + link.attr("href"));
  sb.append("text : " + link.text());
  sb.append("\n");

}

String finishedParse = sb.toString(); 
```

# c++ - 为什么下面的代码编译

> ID：15957124
> 
> 赞同：4
> 
> 时间：2013-04-11T19:24:31.030
> 
> 标签：c++, linker

```
#include<iostream>
using namespace std;
class Foo {
void Bar( void ) const ;
};
int main()
{
  Foo f;
  cout<<sizeof(f)<<endl;
} 
```

我在 g++ 上运行它，它没有给我任何编译错误。此外，它执行了正确的 o/p 1。但我期待，链接过程中的错误。这个编译器依赖吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-11T19:26:38.583

我只能想象你期望得到一个`Foo::Bar`未定义的错误。标准中的单一定义规则只要求定义*使用*的元素。在您的特定情况下，您的程序中没有任何内容*使用* `Foo::Bar`，因此该程序不需要该定义。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T19:27:07.787

这将链接，因为没有对 Foo::Bar 的未完成引用，并且不需要对其进行定义。如果您实际上尝试进行诸如 f.bar() 之类的调用，它会给您带来错误。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-11T19:27:30.170

没有链接器错误，因为所有依赖项都已解决。

一旦你调用了这个方法`Bar()`并且没有定义它，你就会得到一个链接器错误。因为那时您引用`Bar()`并且链接器无法解决它。

# php - PHP中的嵌套foreach()

> ID：15957126
> 
> 赞同：0
> 
> 时间：2013-04-11T19:24:32.320
> 
> 标签：php, loops, foreach

我需要一些有关嵌套的帮助`foreach`。

这是我的代码：

```
$program = $_POST['program'];
$licence = $_POST['licence'];
    foreach($program as $p){
        foreach($licence as $l){
mysql_query("INSERT INTO programs (pcname, program, licence) VALUES ('". $pcname ."', '". $p ."', '". $l ."')");

  }
} 
```

这不起作用，我知道为什么。但我找不到解决问题的方法。问题是，它会遍历 inside 中的所有值`foreach`，然后遍历它们，再一遍一遍地遍历 outside 中的下一个值`foreach`。

这可能没有很好地解释，但希望你能理解我在努力实现目标并帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T19:26:38.053

假设你的两个数组在它们的元素之间有一个 1:1 的映射，比如说。每个 5 个，那么您的嵌套循环将产生 25 个插入调用。您需要使用一个数组中的键来引用另一个数组：

```
foreach($program as $key => $p) {
    $l = $license[$key];
    mysql_query(...);
} 
```

请注意，您对[sql 注入攻击](http://bobby-tables.com)是开放的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T19:37:46.183

如果我错了，请纠正我，但我相信只需将查询语句移到第一个 for 循环之后即可解决您的问题...

# java - 找不到 javax.servlet 包

> ID：15957143
> 
> 赞同：0
> 
> 时间：2013-04-11T19:25:23.907
> 
> 标签：java

我是编程领域的新手。我想学习“java servlet 编程”。我正在使用以下环境

1.  视窗 7 操作系统
2.  java SE jdk 7u17
3.  apache-tomcat-7.0.37

我按照官网给出的说明设置了tomcat服务器。并启动服务器。我正在尝试运行 O'Reilly 撰写的“java Servlet Programming 2nd Edition”一书中的简单 servlet Hello_word 程序。

按照书中的说明，我将文件保存为 Hello_word.java 的名称，并尝试在 Windows CMD 提示符下使用 javac 命令编译它。它给出了错误 Javax.servlet.... 找不到包。使用记事本对程序进行编码。

我试图解决此链接中给出的“ [Java servlet 无法编译 - 找不到 javax.servlet](https://stackoverflow.com/questions/8107632/java-servlet-will-not-compile-cannot-find-javax-servlet) ”.. 仍然存在同样的问题，任何人都可以帮助我解决这个问题....拜托.....拜托

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T19:26:15.197

您需要将该`servlet-api.jar`文件添加到您的类路径中。它应该包含在 Tomcat 中。

# mysql - 如何在保留 group_concat 的其他列的同时进行内部连接？

> ID：15957144
> 
> 赞同：0
> 
> 时间：2013-04-11T19:25:23.897
> 
> 标签：mysql, join

假设我有这三个表：users、categories 和 users_categories（多对多）。

我正在尝试获取所有用户及其类别，所以它会是这样的：

```
SELECT users.*, GROUP_CONCAT(DISTINCT categories.name separator '/') clist 
FROM users
LEFT JOIN users_categories ON users_categories.user = users.id
LEFT JOIN categories ON categories.id = users_categories.category 
```

很简单。现在，困难的部分是我想显示属于特定类别的所有用户，但仍然在 GROUP_CONCAT 中保持相同的类别列表。执行以下查询仅按预期显示特定类别中的用户，但会截断他所属的其余类别：

```
SELECT users.*, GROUP_CONCAT(DISTINCT categories.name separator '/') clist 
FROM users
LEFT JOIN users_categories ON users_categories.user = users.id
LEFT JOIN categories ON categories.id = users_categories.category
INNER JOIN categories cmust ON cmust.id = categories.id AND cmust.name = 'categoryhere' 
```

我将如何更改最后一个查询？谢谢。

编辑：只有列名的示例数据：

用户表：

```
id, name:
1, myname
2, anothername
3, hisname 
```

类别表：

```
id, name
1, music
2, art
3, sports 
```

USERS_CATEGORIES 表：

```
user, category
1,1
1,2
2,2
3,1
3,3
3,2 
```

没有搜索类别的所需查询结果（如我的第一个查询）：

```
users.id,users.name,clist
1,'myname','music/art'
2,'anothername','art'
3,'hisname','music/sports/art' 
```

具有搜索类别的所需查询结果。假设只有“音乐”类别中的用户。users.id,users.name,clist

```
1,'myname','music/art'
3,'hisname','music/sports/art' 
```

最后一个是我想要完成的。我基本上只是想删除不在指定类别中的用户，并且仍然保留他们所属的其余类别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T21:15:41.207

您可以通过从所需的类别开始，然后找到该/这些类别（/ies）中的用户，然后按照您的原始查询继续进行，从而获得您想要的结果。

这种方法的好处是您可以轻松地一次搜索多个类别，*即*查找*属于*音乐或艺术类别的用户。

```
SELECT users.*, GROUP_CONCAT(DISTINCT categories.name separator '/') clist 
FROM categories C1
INNER JOIN users_categories UC1 ON UC1.category = C1.id
INNER JOIN users ON users.id = UC1.user
INNER JOIN users_categories ON users_categories.user = users.id
INNER JOIN categories ON categories.id = users_categories.category
WHERE C1.name IN ('music') 
group by users.id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T19:47:42.327

您可以简单地使用以下代码：

```
SELECT *
  FROM (
SELECT users.*, GROUP_CONCAT(DISTINCT categories.name separator '/') clist 
  FROM users
       LEFT JOIN users_categories ON users_categories.user = users.id
       LEFT JOIN categories ON categories.id = users_categories.category
       ) a
 WHERE '/'+a.clist+'/' LIKE '/'+'categoryhere'+'/'; 
```

`WHERE`注意：在子句的行中使用正确的 MySQL 字符串连接运算符。这会给你你想要的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T20:43:45.913

你可以找这个

```
 SELECT users.*, GROUP_CONCAT(DISTINCT categories.name separator '/') clist 
    FROM users
    LEFT JOIN users_categories ON users_categories.user = users.id
    LEFT JOIN categories ON categories.id = users_categories.category
    group by users.id 
```

[**在这里演示**](http://www.sqlfiddle.com/#!2/3efcf/9)

如果你想获得带有搜索类别的类别，你可以这样做

```
SELECT users.*, GROUP_CONCAT(DISTINCT categories.name separator '/')  clist 
FROM users
LEFT JOIN users_categories ON users_categories.user = users.id
LEFT JOIN categories ON categories.id = users_categories.category
group by users.id
having GROUP_CONCAT(DISTINCT categories.name separator '/') like '%music%' 
```

[**在这里演示**](http://www.sqlfiddle.com/#!2/3efcf/30)

# c# - 检查 ILookup 中的键是否存在值的最佳方法 使用 linq

> ID：15957146
> 
> 赞同：6
> 
> 时间：2013-04-11T19:25:24.547
> 
> 标签：c#, linq, c#-4.0, linq-to-entities

```
 ILookup<string, string> someList;
            Cricket Sachin
                    Dravid
                    Dhoni
            Football Beckham
                     Ronaldo
                     Maradona 
```

```
bool status = someList.Where(x => x.Key == "Football").Where( y => y.Value == "Ronaldo") 
```

应该返回真

```
bool status = someList.Where(x => x.Key == "Football").Where( y => y.Value == "Venus williams") 
```

应该返回假

ILookup 没有 value 属性，而不是循环，有没有更聪明的方法可以在几行中获得结果。上面的代码是不正确的，如果可能的话，希望有类似的东西。我是 Linq 的新手，所以学习更好的方法

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-11T19:29:28.187

从属性返回的对象[`ILookup<TKey, TElement>.Item`](http://msdn.microsoft.com/en-us/library/bb549314.aspx)（当你这样做时调用它`someList[...]`）是一个`IEnumerable<TElement>`. 因此，您可以将每个项目直接与您的测试值进行比较。像这样：

```
var status = someList["Football"].Any(y => y == "Venus Williams"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T19:29:19.747

```
bool status = someList.Where(x => x.Key == "Football").Any( y => y.Value == "Venus williams") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-23T10:38:35.853

怎么样：

```
var status = someList.Any(grp => grp.Key.Equals("Football") && grp.Contains("Venus Williams")); 
```

说明：ILookup 是 IGrouping 的 IEnumerable - 分组*具有*Key 属性，并且*是*字符串值的列表

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T19:30:32.207

我会用`.Any(x => x.Value == "value")`.

可能是错的，但我认为您希望分两步完成，检查第一个（键）搜索是否成功，然后继续进行值搜索，以确保您没有`.Any()`对`null`对象进行操作

# c# - 正则表达式提取 Javascript 的 URL

> ID：15957149
> 
> 赞同：0
> 
> 时间：2013-04-11T19:25:35.897
> 
> 标签：c#, javascript, regex

我有一个正则表达式，可以从给定的字符串中提取一个 url。它在 C# 中，我想将其转换为 javascript：

```
 private static Regex urlPattern = new Regex(@"(?i)\b((?:[a-z][\w-]+:(?:/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'"".,<>?«»“”‘’]))", RegexOptions.Compiled | RegexOptions.IgnoreCase); 
```

但是当我尝试这个时，因为没有逐字记录，它给了我错误：

```
var regexToken = /(?i)\b((?:[a-z][\w-]+:(?:/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'"".,<>?«»“”‘’]))/i; 
```

我怎样才能轻松地转换它？我得到以下 SyntaxError: invalid quantifier ![在此处输入图像描述](https://i.stack.imgur.com/5oBwE.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T19:54:18.077

`(?i)`在 JavaScript 中设置 ignoreCase 标志是无效的选项（虽然在 Opera 中被忽略，但它似乎会为您抛出一个 SyntaxError ）。*标志*仅作为正则表达式文字的后缀给出，或者作为[`RegExp`构造函数](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp)的第二个参数中的字符串给出。

此外，您忘记转义斜线 - 由于分隔文字，它们需要转义。

使用任一

```
var regexToken = /\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'"".,<>?«»“”‘’]))/i; 
```

或（稍微复杂一点）

```
var regexToken = new RegExp("\\b((?:[a-z][\\w-]+:(?:/{1,3}|[a-z0-9%])|www\\d{0,3}[.]|[a-z0-9.\\-]+[.][a-z]{2,4}/)(?:[^\\s()<>]+|\\(([^\\s()<>]+|(\\([^\\s()<>]+\\)))*\\))+(?:\\(([^\\s()<>]+|(\\([^\\s()<>]+\\)))*\\)|[^\\s`!()\\[\\]{};:'\"\".,<>?«»“”‘’]))", "i"); 
```

# java - 使用 Guava Cache 作为我自己的持久缓存的“助手”是否可行？

> ID：15957152
> 
> 赞同：2
> 
> 时间：2013-04-11T19:25:49.273
> 
> 标签：java, guava

我希望通过在服务提供者和服务客户​​端之间放置一个缓存层来减轻每次访问数据库的“查找服务”的压力。我希望这个缓存层是持久的，并且可以容纳比 RAM 允许的更多的对象，所以香草 Guava 缓存不会这样做。我研究过 EhCache 和 CouchBase 之类的东西，但出于各种原因决定推出自己的产品。

为这个持久缓存层编写简单的代码非常容易。但是，我对缓存有足够的了解，可以意识到有很多并发问题需要处理，而且我很确定我不会第一次就把它们都搞定。例如，有一个“雷霆群”问题，缓存未命中可能会导致对完全相同的对象的支持服务同时发出大量请求。令我震惊的是，这正是 LoadingCache 已经处理的类型。尝试让 Guava 完成处理并发的难题，然后插入我自己的子类来进行实际的对象检索和存储，这似乎是一个合理的想法吗？我不确定我将子类化或覆盖的确切边界在哪里，但我可以弄清楚这是否是' 这只是一个完全错误的想法。我还没有看到扩展/自定义 Guava 缓存的示例，所以如果有任何示例和/或文档可供查看，我会对这些感兴趣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T21:04:13.630

我最终做的事情非常简单。我做了一个普通的LoadingCache，并在load和reload方法中执行了一些额外的操作。这给了我钩子（即 CacheLoader 的加载和重新加载方法）在我的本地数据库中查找对象，如果我没有找到它并保存它，则调用远程服务，而不必担心许多线程会尝试由于 Guava 提供了所有并发保护，因此获得了相同的对象。

我确信这与缓存的使用方式相去甚远，因为我实际上将缓存上的 maximumSize 设置为 0，以便始终调用我的加载函数。（出于各种原因，我想每次都从持久存储中提供对象，而不是从 RAM 中）。我还没有彻底测试它，但它似乎表现得如我所愿。整体效果是一个拉通的“对象镜像”，充当上游服务的自我更新副本。

# javascript - 样式的级联变化并在javascript中显示

> ID：15957156
> 
> 赞同：0
> 
> 时间：2013-04-11T19:26:01.173
> 
> 标签：javascript, jquery

我有一个设置为隐藏的段落 `<td align="center" colspan="2" ><p id="p2" style="display:none">Invalid values</p></td>`

我正在尝试使用 show 将其设置为可见。我的代码中有以下行， `(document.getElementById("p2").show(2000);`但它没有做任何事情编辑：我有以下脚本

```
<script type="text/javascript" src="jquery/js/jquery-1.9.0.min.js"></script>
<script type="text/javascript" src="jquery/js/jquery-ui-1.10.0.custom.min.js"></script> 
```

有什么建议么？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T19:41:09.280

如上面的评论所述，使用jQuery的`.show()`功能：http: [//jsfiddle.net/bMWMT/1](http://jsfiddle.net/bMWMT/1)

```
$("#p2").show(); 
```

# sql - 需要帮助进行查询

> ID：15957159
> 
> 赞同：0
> 
> 时间：2013-04-11T19:26:06.543
> 
> 标签：sql, sql-server, sql-server-2008

下面的查询返回两列 - **dateOfBusiness**，一个**datetime**和**salesOnDate**，一个**int**。这是具有区号 storeId 的一家商店每天产生的销售额。结果集由 500-600 行组成。

我想得到一个月的平均销售额，即salesOnDate 的平均值。我想使用[这个 SO question 中所示的](https://stackoverflow.com/questions/10747963/why-cant-i-perform-an-aggregate-function-on-an-expression-containing-an-aggrega)子查询。但这对我不起作用。我该怎么做呢 ？

```
select count(salesOnDate)
from dbo.localSales
where productName like '%juice%'
and storeId = 'MUN123'
group by dateOfBusiness 
```

我试图这样做，但它不起作用 -

```
select sum(x.count)
from
(
  select  count(id) as 'count'
  from    table   
) x 
```

**附加信息 -**

表结构 -

```
dateOfBusiness | salesOnDate
-------------------------------
2013-10-5   | 200
2013-10-6   | 100
2013-10-7   | 700 
```

我想对任何时间段的 salesOnDate 求和，比如一个月。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T19:34:42.037

您确定不想要`sum`(salesOnDate) 而不是`count`(salesOnDate) 吗？ `Count`返回行数，`sum`将返回所有行值的总和。平均函数是`AVG`，所以你可以说：

```
 select 
           dateOfBusiness,storeId , 
           count(salesOnDate), sum(salesOnDate), avg(salesOnDate)
    from 
           dbo.localSales
    where 
          productName like '%juice%'
          and storeId = 'MUN123'
    group by 
          dateOfBusiness,storeId 
```

好的，鉴于对您问题的修改，请尝试：

```
select 
  storeId , dob_yr, dob_mo, count(salesOnDate), sum(salesOnDate), avg(salesOnDate)
from (
        select 
               dateOfBusiness,storeId , year(dateOfBusiness) as dob_yr, 
               month(dateOfBusiness) as dob_mo,
               salesOnDate
        from 
               dbo.localSales
        where 
              productName like '%juice%'
              and storeId = 'MUN123'
) t
group by
  storeId , dob_yr, dob_mo 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T19:41:28.447

这将为您提供每月的平均销售额以及该月的总销售额：

```
-- can use DATEPART instead of DATENAME if you prefer numbered months (i.e., 1 = January, 2 = February, etc.)
SELECT DATENAME(month, dateOfBusiness) [Month], SUM(salesOnDate) [TotalSales], AVG(salesOnDate) [AverageSales]
FROM dbo.localSales
WHERE productName like '%juice%'
AND storeId = 'MUN123'
GROUP BY DATENAME(month, dateOfBusiness) 
```

查询的重要部分是`DATENAME`（或者`DATEPART`如果您使用该功能）函数，它只会从您的日期列中获取特定信息，而不是整个值。

例如，假设您有 2013 年 4 月 11 日的三条记录

```
 dateOfBusiness     salesOnDate
--------------------- -----------
2013-04-11 08:03:24       5
2013-04-11 11:45:17       1
2013-04-11 20:23:52       3 
```

使用上面的查询将显示它们分组为一个月：

```
 Month          TotalSales      AverageSales
----------------- --------------  ----------------
     April               9               3 
```

# apache - 重写 URL: domain/folder/file.pdf 到 domain/folder

> ID：15957163
> 
> 赞同：0
> 
> 时间：2013-04-11T19:26:14.273
> 
> 标签：apache

我需要重写 URL: domain/folder/file.pdf 到 domain/folder web.telekom.sk/andy/katalog2013.pdf 到 web.telekom.sk/andy

我应该使用什么重写规则？

# c# - 如何强制 Task.Factory.StartNew 到后台线程？

> ID：15957164
> 
> 赞同：14
> 
> 时间：2013-04-11T19:26:14.783
> 
> 标签：c#, .net-4.0, task, threadpool

我已经看到了许多与此类似的其他问题，但没有在那里找到我的答案。

我的问题是我正在使用以下流程创建线程：

```
private void btn_Click(object sender, EventArgs e)
{
    service.GetCount(
        (count, ex) =>
        {
            if (ex != null)
                return;

            for (int i = 0; i < count; i++)
            {
                service.Get(onItemReceived, i);
            }
        }
    );
}

public void GetCount(Action<int, Exception> callback)
{
    var callingThread = TaskScheduler.FromCurrentSynchronizationContext();

    Func<int> action = () =>
    {
        return client.GetCount(); // Synchronous method, could take a long time
    };

    Action<Task<int>> completeAction = (task) =>
    {
        Exception ex = (task.Exception != null) ? task.Exception.InnerException : task.Exception;

        if (callback != null)
            callback(task.Result, ex);
    };

    Task.Factory.StartNew(action).ContinueWith(completeAction, callingThread);
}

public void Get(Action<object, Exception> callback, int index)
{
    var callingThread = TaskScheduler.FromCurrentSynchronizationContext();

    Func<object> action = () =>
    {
        return client.Get(index); // Synchronous method, could take a long time
    };

    Action<Task<object>> completeAction = (task) =>
    {
        Exception ex = (task.Exception != null) ? task.Exception.InnerException : task.Exception;

        if (callback != null)
            callback(task.Result, ex);
    };

    Task.Factory.StartNew(action).ContinueWith(completeAction, callingThread);
} 
```

这样，我的每个服务的异步方法都会回调它们最初调用的线程（通常是 UI 线程）。所以我在模拟 await/async 关键字的工作方式（我不能使用 .NET 4.5）。

这种模式的问题是，在第一次调用“ContinueWith”后，我莫名其妙地锁定了 UI 线程。因此，在这种情况下，如果我尝试为每个进程生成 5 个线程同步函数**Get**，它们将 1 比 1 执行而不是并行执行，并且在执行此操作时它们将阻塞 UI 线程，即使我尝试指定 TaskCreationOptions.LongRunning。

这在我第一次调用 Task.Factory.StartNew 时不会发生，它只会发生**在第一个回调**中的后续调用中。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-04-11T19:26:14.783

为了强制启动新线程，您应该在对 Task.Factory.StartNew 的调用中指定 TaskScheduler.Default，如下所示：

```
Task.Factory.StartNew(action,
                      CancellationToken.None,
                      TaskCreationOptions.None,
                      TaskScheduler.Default).ContinueWith(completeAction); 
```

在我的测试中，您不需要指定 TaskCreationOptions.LongRunning 来强制使用后台线程，尽管它不应该受到伤害。

# matlab - 将 Matlab 计时器对象重置为时间 0

> ID：15957176
> 
> 赞同：3
> 
> 时间：2013-04-11T19:26:45.237
> 
> 标签：matlab, timer

我使用 Matlab 计时器对象以固定间隔（每 1800 秒）轮换一些日志文件：

```
rotateTimer = timer( ...
    'Name', 'Log Rotator', ...
    'Period', 1800, ...
    'StartDelay', 1800, ...
    'ExecutionMode', 'fixedSpacing', ...
    'TimerFcn', {@RotateLogs});
start(rotateTimer); 
```

这种方法非常适合自动轮换，但我需要允许用户手动轮换日志文件。

当发生手动旋转时，我希望在 1800 秒后发生下一次自动旋转；这要求我“重置”计时器对象以在手动旋转时从 0 开始计数。

我没有看到我可以调用的将计时器归零的属性或方法。启动和停止计时器不会重置它，它只是从原来的位置继续计数。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T01:53:44.837

另一种不需要重新创建计时器对象的方法：

```
per = 2;
t = timer('Period'       , per, ...
          'StartDelay'   , per, ...
          'ExecutionMode', 'fixedSpacing',...
          'TimerFcn'     , 'disp(toc);tic;',...
          'StopFcn'      , {@mystop,per},...
          'StartFcn'     , 'tic;');

% Suppress warning from millisecond precision of StartDelay
warning('off','MATLAB:TIMER:STARTDELAYPRECISION')

start(t)
stop(t)
delete(t) 
```

`mystop()`在哪里

```
function mystop(obj,event,in)
    t = toc;
    set(obj,'StartDelay',in-t);
    disp(t)     % Not necessary, just to check
    tic         % Not necessary, just to check 
end 
```

这里的想法是，您可以`StartDelay`在每次停止后重置，为此您需要计算每次计时器执行之间经过的时间。这意味着您必须在每次执行时重置。

**备注**：

*   重置 at`StartFcn()`是为了防止`StartDelay`先前调用的负数`tic`（如果适用）。
*   `disp(toc)`in`TimerFcn`不是必需的，只是为了检查时间是否正常。
*   相同的检查目的服务于`mystop()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T20:08:36.737

也许我只是误解了你在说什么，但你不能只使用'set'命令将计时器归零吗？

通过命令行窗口：

```
help timer
...
Getting and setting parameters:
    get              - Get value of timer object property.
    set              - Set value of timer object property. 
```

因此，当发生手动旋转时，只需将计时器设置回 0

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T18:10:18.477

正如我所期望的那样，我无法通过“重置”计时器对象来解决这个问题。

有效的解决方案：

*   我有一个重复的计时器对象，一旦启用日志记录，它就会以固定的时间间隔（0.5 秒）触发。
*   首次启用日志记录时，我调用`tic()`并保存其结果。
*   在计时器的回调函数中，我调用`toc()`以检查自记录开始以来经过的时间。如果经过的时间超过轮换阈值，我将执行日志轮换。日志轮换调用`tic()`将自轮换以来的时间“重置”为 0。
*   当用户手动轮换日志时，我调用`tic()`将自轮换以来的时间“重置”为 0 并执行日志轮换。

这对我的目的来说足够好。日志轮换之间的时间抖动约为 1 秒，但这对我来说是可以接受的。如果需要，我可以减少计时器对象的周期以减少抖动。

# javascript - 检测右键删除/剪切/复制tinymce

> ID：15957182
> 
> 赞同：3
> 
> 时间：2013-04-11T19:26:58.247
> 
> 标签：javascript, jquery, events, tinymce

如何检测 tinymce 上的右键删除？我通过 onPaste 事件检测到粘贴事件，但我被卡在剪切删除和复制上。我知道有 onContextMenu 事件，但似乎没有保存菜单项的函数或变量。

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T08:50:31.243

我假设“右键单击删除”是指从下拉浏览器右键单击菜单中选择删除。这里的问题是在 tinymce iframe 中没有触发足够的事件。我唯一想到的是 onNodeChange 事件。这应该被解雇，但是这个也被解雇了几种其他任务。另一个（不容易）的选择是开发一个自己的 BrowserAddOn，它可以监听浏览器实习生事件，然后发挥它的魔力。

# scala - 如何防止 java.lang.OutOfMemoryError: PermGen space？

> ID：15957183
> 
> 赞同：35
> 
> 时间：2013-04-11T19:26:59.140
> 
> 标签：scala, sbt

我经常收到`OutOfMemoryError`来自 SBT 的邮件。

```
> test
[error] java.util.concurrent.ExecutionException: java.lang.OutOfMemoryError: PermGen space
[error] Use 'last' for the full log.
> last
[debug] Running task... Cancelable: false, check cycles: false
[debug]
[debug] Initial source changes:
[debug]     removed:Set()
[debug]     added: Set()
[debug]     modified: Set()
[debug] Removed products: Set()
[debug] Modified external sources: Set()
[debug] Modified binary dependencies: Set()
[debug] Initial directly invalidated sources: Set()
[debug]
[debug] Sources indirectly invalidated by:
[debug]     product: Set()
[debug]     binary dep: Set()
[debug]     external source: Set()
[debug] Initially invalidated: Set()
[debug] Copy resource mappings:
[debug]
[debug]
[debug] Initial source changes:
[debug]     removed:Set()
[debug]     added: Set()
[debug]     modified: Set()
[debug] Removed products: Set()
[debug] Modified external sources: Set()
[debug] Modified binary dependencies: Set()
[debug] Initial directly invalidated sources: Set()
[debug]
[debug] Sources indirectly invalidated by:
[debug]     product: Set()
[debug]     binary dep: Set()
[debug]     external source: Set()
[debug] Initially invalidated: Set()
[debug] Copy resource mappings:
[debug]
[debug] Framework implementation 'org.scalacheck.ScalaCheckFramework' not present.
[debug] Framework implementation 'org.specs.runner.SpecsFramework' not present.
[debug] Framework implementation 'org.scalatest.tools.ScalaTestFramework' not present.
[debug] Framework implementation 'com.novocode.junit.JUnitFramework' not present.
[debug] Subclass fingerprints: Stream((org.specs2.specification.SpecificationStructure,false,org.specs2.runner.Fingerprints$$anon$1@34d6488c), ?)
[debug] Annotation fingerprints: Stream()
[debug] Running Test ExpandoObjectTest : subclass(false, org.specs2.specification.SpecificationStructure) with arguments
java.util.concurrent.ExecutionException: java.lang.OutOfMemoryError: PermGen space
    at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:252)
    at java.util.concurrent.FutureTask.get(FutureTask.java:111)
    at sbt.ConcurrentRestrictions$$anon$4.take(ConcurrentRestrictions.scala:196)
    at sbt.Execute.next$1(Execute.scala:85)
    at sbt.Execute.processAll(Execute.scala:88)
    at sbt.Execute.runKeep(Execute.scala:68)
    at sbt.EvaluateTask$.run$1(EvaluateTask.scala:162)
    at sbt.EvaluateTask$.runTask(EvaluateTask.scala:177)
    at sbt.Aggregation$$anonfun$4.apply(Aggregation.scala:46)
    at sbt.Aggregation$$anonfun$4.apply(Aggregation.scala:44)
    at sbt.EvaluateTask$.withStreams(EvaluateTask.scala:137)
    at sbt.Aggregation$.runTasksWithResult(Aggregation.scala:44)
    at sbt.Aggregation$.runTasks(Aggregation.scala:59)
    at sbt.Aggregation$$anonfun$applyTasks$1.apply(Aggregation.scala:31)
    at sbt.Aggregation$$anonfun$applyTasks$1.apply(Aggregation.scala:30)
    at sbt.Command$$anonfun$applyEffect$2$$anonfun$apply$3.apply(Command.scala:62)
    at sbt.Command$$anonfun$applyEffect$2$$anonfun$apply$3.apply(Command.scala:62)
    at sbt.Command$.process(Command.scala:90)
    at sbt.MainLoop$$anonfun$next$1$$anonfun$apply$1.apply(MainLoop.scala:71)
    at sbt.MainLoop$$anonfun$next$1$$anonfun$apply$1.apply(MainLoop.scala:71)
    at sbt.State$$anon$2.process(State.scala:170)
    at sbt.MainLoop$$anonfun$next$1.apply(MainLoop.scala:71)
    at sbt.MainLoop$$anonfun$next$1.apply(MainLoop.scala:71)
    at sbt.ErrorHandling$.wideConvert(ErrorHandling.scala:18)
    at sbt.MainLoop$.next(MainLoop.scala:71)
    at sbt.MainLoop$.run(MainLoop.scala:64)
    at sbt.MainLoop$$anonfun$runWithNewLog$1.apply(MainLoop.scala:53)
    at sbt.MainLoop$$anonfun$runWithNewLog$1.apply(MainLoop.scala:50)
    at sbt.Using.apply(Using.scala:25)
    at sbt.MainLoop$.runWithNewLog(MainLoop.scala:50)
    at sbt.MainLoop$.runAndClearLast(MainLoop.scala:33)
    at sbt.MainLoop$.runLoggedLoop(MainLoop.scala:17)
    at sbt.MainLoop$.runLogged(MainLoop.scala:13)
    at sbt.xMain.run(Main.scala:26)
    at xsbt.boot.Launch$.run(Launch.scala:55)
    at xsbt.boot.Launch$$anonfun$explicit$1.apply(Launch.scala:45)
    at xsbt.boot.Launch$.launch(Launch.scala:69)
    at xsbt.boot.Launch$.apply(Launch.scala:16)
    at xsbt.boot.Boot$.runImpl(Boot.scala:31)
    at xsbt.boot.Boot$.main(Boot.scala:20)
    at xsbt.boot.Boot.main(Boot.scala)
Caused by: java.lang.OutOfMemoryError: PermGen space
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:791)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
    at java.net.URLClassLoader.defineClass(URLClassLoader.java:449)
    at java.net.URLClassLoader.access$100(URLClassLoader.java:71)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:361)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    at sbt.Project$$anon$5.apply(Project.scala:130)
    at sbt.Project$$anon$5.apply(Project.scala:128)
    at sbt.LogManager$.commandBase$1(LogManager.scala:59)
    at sbt.LogManager$.command$1(LogManager.scala:60)
    at sbt.LogManager$$anonfun$suppressedMessage$1.apply(LogManager.scala:61)
    at sbt.LogManager$$anonfun$suppressedMessage$1.apply(LogManager.scala:61)
    at sbt.ConsoleLogger.trace(ConsoleLogger.scala:163)
    at sbt.AbstractLogger.log(Logger.scala:32)
    at sbt.MultiLogger$$anonfun$dispatch$1.apply(MultiLogger.scala:40)
    at sbt.MultiLogger$$anonfun$dispatch$1.apply(MultiLogger.scala:38)
    at scala.collection.LinearSeqOptimized$class.foreach(LinearSeqOptimized.scala:59)
    at scala.collection.immutable.List.foreach(List.scala:76)
    at sbt.MultiLogger.dispatch(MultiLogger.scala:38)
    at sbt.MultiLogger.trace(MultiLogger.scala:30)
    at sbt.TestLogger$$anon$2.trace(TestReportListener.scala:71)
    at sbt.TestLogger.endGroup(TestReportListener.scala:88)
    at sbt.TestRunner$$anonfun$run$5.apply(TestFramework.scala:87)
    at sbt.TestRunner$$anonfun$run$5.apply(TestFramework.scala:87)
    at sbt.TestFramework$$anonfun$safeForeach$1.apply(TestFramework.scala:112)
    at sbt.TestFramework$$anonfun$safeForeach$1.apply(TestFramework.scala:112)
    at scala.collection.LinearSeqOptimized$class.foreach(LinearSeqOptimized.scala:59)
[error] java.util.concurrent.ExecutionException: java.lang.OutOfMemoryError: PermGen space
[error] Use 'last' for the full log. 
```

有时它也会突然退出：

```
sbt appears to be exiting abnormally.
  The log file for this session is at /var/folders/vf/3khb58091wd0_1rz1yh6knb00000gp/T/sbt3242766352271599341.log
java.lang.OutOfMemoryError: PermGen space
Error during sbt execution: java.lang.OutOfMemoryError: PermGen space 
```

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-04-11T19:39:10.883

如果你编译巨大的代码库，有时会发生这种情况——很多类被加载到运行 sbt 的 VM 中。

您需要增加`PermGen`sbt 的空间 - 使用标志`-XX:MaxPermSize=256m`，`256`您可以在其中更改所需的永久代大小。

跑：

```
cat `which sbt` 
```

找到你的 sbt 启动脚本。然后编辑它以包含带有`java`运行 sbt 启动器的命令的标志，其方式与[此处描述](http://www.scala-sbt.org/release/docs/Getting-Started/Setup.html)的修改`-Xmx`和`-Xms`.

添加`-XX:+CMSClassUnloadingEnabled`标志还应该使 sbt 能够卸载类加载器，其中包含不再使用的先前编译运行的类。

编辑：

`SBT_OPTS`或者，如果您使用[扩展脚本运行 sbt](https://github.com/paulp/sbt-extras/blob/master/sbt)，您可以在环境变量中设置这些选项。

# php - 自动更改 JavaScript 函数值

> ID：15957187
> 
> 赞同：0
> 
> 时间：2013-04-11T19:27:09.973
> 
> 标签：php, javascript

这是我的问题.. 我有一些想要运行的 JavaScript，但是每次插入它时我都需要它是唯一的。我尝试向它添加一个会改变它的变量，但是它只会在第一次调用/显示时改变它。这是脚本：

```
 <script type=\"text/javascript\">
                    function validate_f( )
                    {
                    var x=document.forms[\"fill\"][\"textfield\"].value
                    if (x==null || x==\"\")
                      {
                      alert(\"Field cannot be empty\");
                      return false;
                      }
                    }
                    </script> 
```

实际的表单代码是：

```
 echo "<td width=\"10%\">
                <form method=\"POST\"action=\"$actual_link\" id=\"fill\" onsubmit=\"return validate_f( );\">
                <input type=\"hidden\" value=\"{$data['id']}\" name=\"id\">
                <input type=\"text\" size=\"20\" class=\"BUTTON_INPUT\" name=\"url\" value=\"\" id=\"textfield\">
                </td>
                <td width=\"1%\">
                <input type=\"Submit\" class=\"BUTTON_FILL\" name=\"fill\" value=\"\">
                </form> 
```

问题是表单会通过不同的链接多次回显，但脚本只会在第一次工作。所以我能想到的唯一解决方案是让 JavaScript 与表单一起回显，并在脚本和表单上更改函数名称。

我希望我想做的事情是有意义的，所以基本上我需要 "function validate_f( )" & "onsubmit=\"return validate_f( );\"" 来改变每个重复/回声..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T19:34:24.000

如果您的文本字段在每种形式中，您只能使用这样的一个通用函数，该函数适用于所有表单，无论其 id 是什么

```
 function validate_f() {
      var x = this['textfield']
      if (!x || !x.value) {
          alert("field cannot be empty")
          return false
      }
      return true;
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T00:56:00.967

我想出了一个解决方案，并认为我会分享它以防有人遇到这个问题。但基本上，被回显/重复的表单在每次重复时都会得到唯一的数据。所以基本上我把那个唯一的值作为函数和表单ID ..现在我回头看很简单它，我只需要认真思考如何获得改变的独特事物。希望这可以帮助某人..

# angularjs - 为什么在将 Jasmine 与 Angular 一起使用时会出现“注入”未定义错误？

> ID：15957191
> 
> 赞同：13
> 
> 时间：2013-04-11T19:27:17.670
> 
> 标签：angularjs, jasmine

我是 Jasmine/AngularJS 单元测试新手。我创建了一个简单的 Angular 应用程序来添加两个数字，以便我可以学习如何为 Angular 应用程序编写单元测试。关于单元测试的[Angular 文档不完整](http://docs.angularjs.org/guide/dev_guide.unit-testing#!)。根据博客和堆栈溢出答案，我构建了我的第一个测试，但遇到了“注入器”未定义错误。我正在使用 Jasmine 框架进行单元测试。
**HTML**

```
<body>
<div ng-controller="additionCtrl">
    First Number: <input ng-model="NumberOne"/><br/>
    Second Number: <input ng-model="NumberTwo"/>
    <button ng-click="add(NumberOne, NumberTwo)">Add</button><br/>
    Result: {{Result}}
</div>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.0.1/angular.min.js"></script>
<script src="Scripts/additionCtrl.js"></script>
</body> 
```

**控制器：**

```
function additionCtrl($scope) {
$scope.NumberOne = 0;
$scope.NumberTwo = 0;
$scope.Result = 0;
$scope.add = function (a, b) {
};
} 
```

茉莉花规格文件。

```
describe("Addition", function () {
var $scope, ctrl;

beforeEach(inject(function ($rootScope, $controller) {
    this.scope = $rootScope.$new();
    ctrl = $controller('additionCtrl', {
       $scope: this.scope 
    });
}));

it("should add two integer numbers.", inject(function ($controller) {        
    expect(ctrl.add(2, 3)).toEqual(5);
}));
}); 
```

Specrunner.html

```
 <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/angularjs/1.0.1/angular.min.js"></script>
  <script type="text/javascript" src="lib/angular-mocks.js"></script>
  <script type="text/javascript" src="lib/jasmine-1.3.1/jasmine.js"></script>
  <script type="text/javascript" src="lib/jasmine-1.3.1/jasmine-html.js"></script>

  <!-- include source files here... -->
  <script type="text/javascript" src="../App/Scripts/additionCtrl.js"></script>

  <!-- include spec files here... -->
  <script type="text/javascript" src="spec/addition.spec.js"></script> 
```

这是一个失败的测试，一旦测试以预期的结果失败，那么我可以修改代码以使其通过，但我面临的问题是，角度模拟没有得到注入器。
我看到了一个例子，我可以更新控制器而不是使用注入器，但我想尝试学习使用注入器，以便设置更复杂的测试。
我可能在这里遗漏了一些简单的东西。请指导我写我可能错过的任何文章。
谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-11T19:51:51.503

发现问题了，我用来访问 angular-mock 的 url 是错误的。我将其更改为“ [http://code.angularjs.org/1.0.6/angular-mocks.js](http://code.angularjs.org/1.0.6/angular-mocks.js) ”并将脚本标签的顺序更改为

```
<script type="text/javascript" src="lib/jasmine-1.3.1/jasmine.js"></script>
<script type="text/javascript" src="lib/jasmine-1.3.1/jasmine-html.js"></script>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/angularjs/1.0.1/angular.min.js"></script>
<script type="text/javascript" src="http://code.angularjs.org/1.0.6/angular-mocks.js"></script> 
```

现在它在方法上失败了，因为它应该是。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-11T20:05:07.940

供将来参考，这里有一个带有完整单元测试设置的 Plunker（对于我即将发布的问题的答案）

[http://plnkr.co/edit/KZGKM6](http://plnkr.co/edit/KZGKM6)

使此设置可用于共享测试场景很有用。

# c - 如何通过C中的命名管道发送文件？

> ID：15957195
> 
> 赞同：2
> 
> 时间：2013-04-11T19:27:26.960
> 
> 标签：c, client-server, named-pipes, fifo, mkfifo

我有两个程序，服务器和客户端。服务器应该读取一个文件，然后通过命名管道将其内容发送到客户端。但是我的服务器只从文件中读取两个字符，然后退出。这段代码有什么问题？

服务器.c：

```
#include <stdio.h>
#include <stdlib.h>
#include <errno.h>
#include <string.h>
#include <fcntl.h>
#include <sys/types.h>
#include <sys/stat.h>
#include <unistd.h>

#define FIFO_NAME "american_maid"

int main(void)
{
    char line[300];
    int num, fd;
    FILE *fp;
    fp = fopen("out.txt","r");

    mknod(FIFO_NAME, S_IFIFO | 0666, 0);

    printf("waiting for readers...\n");
    fd = open(FIFO_NAME, O_WRONLY);
    printf("got a reader--type some stuff\n");

    while (fgets(line, sizeof(line), fp)) {
        if ((num = write(fd, line, strlen(line))) == -1)
            perror("write");
        else
            printf("speak: wrote %d bytes\n", num);
    }

    fclose(fp);

    return 0;
} 
```

客户端.c：

```
#include <stdio.h>
#include <stdlib.h>
#include <errno.h>
#include <string.h>
#include <fcntl.h>
#include <sys/types.h>
#include <sys/stat.h>
#include <unistd.h>

#define FIFO_NAME "american_maid"

int main(void)
{
    char s[300];
    int num, fd;

    mknod(FIFO_NAME, S_IFIFO | 0666, 0);

    printf("waiting for writers...\n");
    fd = open(FIFO_NAME, O_RDONLY);
    printf("got a writer\n");

    do {
        if ((num = read(fd, s, 300)) == -1)
            perror("read");
        else {
            s[num] = '\0';
            printf("tick: read %d bytes: \"%s\"\n", num, s);
        }
    } while (num > 0);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T14:37:43.150

当我使用命令序列运行下面显示的代码时：

```
$ ln -s server.c out.txt
$ ./client &
$ ./server
$ 
```

我得到了客户端程序打印的源代码的副本。同样，当我使用以下命令运行命令时：

```
$ ./server &
$ ./client
$ 
```

修改后的代码并没有太大的修改。它避免了`do { } while(...)`循环——它们很少真正有益——并且非常小心不要溢出缓冲区。该代码还删除了多余的标题。

### 服务器.c

```
#include <fcntl.h>
#include <stdio.h>
#include <string.h>
#include <unistd.h>

#define FIFO_NAME "american_maid"

int main(void)
{
    const char infile[] = "out.txt";
    FILE *fp = fopen(infile, "r");

    if (fp == 0)
    {
        fprintf(stderr, "Failed to open %s for reading", infile);
        return(1);
    }

    mknod(FIFO_NAME, S_IFIFO | 0666, 0);

    printf("waiting for readers...\n");
    int fd = open(FIFO_NAME, O_WRONLY);
    if (fd > 0)
    {
        char line[300];
        printf("got a reader--type some stuff\n");

        while (fgets(line, sizeof(line), fp))
        {
            int len = strlen(line);
            int num = write(fd, line, len);
            if (num != len)
                perror("write");
            else
                printf("speak: wrote %d bytes\n", num);
        }
        close(fd);
    }

    fclose(fp);

    return 0;
} 
```

### 客户端.c

```
#include <fcntl.h>
#include <stdio.h>
#include <unistd.h>

#define FIFO_NAME "american_maid"

int main(void)
{
    const char outfile[] = "client.out";
    FILE *fp = fopen(outfile, "w");

    if (fp == 0)
    {
        fprintf(stderr, "Failed to open %s for writing\n", outfile);
        return 1;
    }

    printf("waiting for writers...\n");
    mknod(FIFO_NAME, S_IFIFO | 0666, 0);

    int fd = open(FIFO_NAME, O_RDONLY);
    if (fd > 0)
    {
        int num;
        char s[300];
        printf("got a writer\n");

        while ((num = read(fd, s, sizeof(s))) > 0)
        {
            printf("tick: read %d bytes: \"%.*s\"\n", num, num, s);
            fprintf(fp, "%.*s", num, s);
        }

        close(fd);
    }
    fclose(fp);

    return 0;
} 
```

请注意，此版本将其输出写入文件`client.out`；即使给定一个包含一些很长行要处理的文件（2049 字节，包括末尾的换行符），输出 in`client.out`与 .in 中的输入完全匹配`out.txt`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T19:51:37.330

`mknod(FIFO_NAME, S_IFIFO | 0666, 0);`从文件中删除该行`client.c`。然后程序将按预期工作。服务器将创建一个文件并将文件内容发送给fifo。

# php - 使用 sql 选择除字符串 in_array 之外的结果

> ID：15957196
> 
> 赞同：0
> 
> 时间：2013-04-11T19:27:28.880
> 
> 标签：php, sql, arrays

我有这样的代码：

```
$p = $db->query("SELECT ads_id FROM ads_submissions WHERE status = '0'");
$c_ads = array();
while($row = $db->fetchAll($p))
{
    $c_ads[] = $row;
} 
```

输出

```
4 6 9 
```

我想在 WHERE 之后将此行添加到 $new_ads = $db->

```
AND ads_id = !in_array('$output', $c_ads) 
```

选择除 id 4 和 6 和 9 之外的所有 ads_id

```
$new_ads = $db->fetchOne("SELECT ads_id FROM ads_pack WHERE allowed_countries LIKE '%".$country_tr."%'"); 
```

但这永远无法正常工作。

请问有什么帮助吗？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T19:28:55.703

`in array`在sql中没有这样的东西。有简单的结果集。你要

```
AND ads_id NOT IN (4,6,9) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T19:31:14.127

你应该这样做

```
AND ads_id NOT IN ( implode(',', $c_ads) ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T19:48:17.220

您可以使用子查询而不是运行 2 个查询来重写它吗？

```
"SELECT ads_id FROM ads_pack WHERE allowed_countries LIKE '%".$country_tr."%' AND ads_id NOT IN (SELECT ads_id FROM ads_submissions WHERE status = '0')" 
```

# java - 使用 STARTTLS 将套接字升级到 SSLSocket：recv 失败

> ID：15957198
> 
> 赞同：4
> 
> 时间：2013-04-11T19:27:30.347
> 
> 标签：java, ssl, irc, jsse

我正在尝试使用 STARTTLS 将套接字升级为 SSLSocket。在 InspIRCd 的 wiki 上，这是它应该如何工作的

```
>> STARTTLS
<< :test2.chatspike.net 670 nickname :STARTTLS successful, go ahead with TLS handshake
(SSL Handshake) 
```

所以在我写的代码中（稍微简化了）

```
else if (code.equals("670")) {
    SSLSocketFactory sslSocketFactory = ((SSLSocketFactory) SSLSocketFactory.getDefault());
    SSLSocket sslSocket = (SSLSocket) sslSocketFactory.createSocket(
                        socket,
                        socket.getInetAddress().getHostAddress(),
                        socket.getPort(),
                        true);
    sslSocket.startHandshake();
    bufferedReader = new BufferedReader(new InputStreamReader(sslSocket.getInputStream(), getEncoding()));
    bufferedWriter = new BufferedWriter(new OutputStreamWriter(sslSocket.getOutputStream(), getEncoding()));
    socket = sslSocket;
} 
```

然而，无论有没有 startHandshake() 我总是得到一个 recv 失败（没有我只是在我尝试从新的 bufferedReader 读取时得到它

```
java.io.IOException: Can't connect to server
    at org.pircbotx.PircBotX.connect(PircBotX.java:472) [Exception handling]
    at org.pircbotx.PircBotX.connect(PircBotX.java:224) [Overridden constructor]
    at org.pircbotx.impl.PircBotXExample.main(PircBotXExample.java:185)
Caused by: java.net.SocketException: Software caused connection abort: recv failed
    at java.net.SocketInputStream.read(SocketInputStream.java:150)
    at java.net.SocketInputStream.read(SocketInputStream.java:121)
    at sun.security.ssl.InputRecord.readFully(InputRecord.java:442)
    at sun.security.ssl.InputRecord.read(InputRecord.java:480)
    at sun.security.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:927)
    at sun.security.ssl.SSLSocketImpl.waitForClose(SSLSocketImpl.java:1707)
    at sun.security.ssl.HandshakeOutStream.flush(HandshakeOutStream.java:122)
    at sun.security.ssl.Handshaker.kickstart(Handshaker.java:909)
    at sun.security.ssl.SSLSocketImpl.kickstartHandshake(SSLSocketImpl.java:1423)
    at sun.security.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1288)
    at sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1339)
    at sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1323)
    at org.pircbotx.PircBotX.connect(PircBotX.java:411) [startHandshake line]
    ... 2 more 
```

完整日志（带`-Djavax.net.debug=all`）

```
1365707641940 <<<:kenny.chatspike.net 670 PircBotX :STARTTLS successful, go ahead with TLS handshake
keyStore is : 
keyStore type is : jks
keyStore provider is : 
init keystore
init keymanager of type SunX509
trustStore is: C:\Program Files\Java\jdk1.7.0_17\jre\lib\security\cacerts
trustStore type is : jks
trustStore provider is : 
init truststore

[*SNIP* A bunch of adding trusted certificates]

trigger seeding of SecureRandom
done seeding SecureRandom
Ignoring unavailable cipher suite: TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA
Ignoring unavailable cipher suite: TLS_DHE_RSA_WITH_AES_256_CBC_SHA
Ignoring unavailable cipher suite: TLS_ECDH_RSA_WITH_AES_256_CBC_SHA
Ignoring unsupported cipher suite: TLS_DHE_DSS_WITH_AES_128_CBC_SHA256
Ignoring unsupported cipher suite: TLS_DHE_DSS_WITH_AES_256_CBC_SHA256
Ignoring unsupported cipher suite: TLS_DHE_RSA_WITH_AES_128_CBC_SHA256
Ignoring unsupported cipher suite: TLS_ECDH_RSA_WITH_AES_128_CBC_SHA256
Ignoring unsupported cipher suite: TLS_DHE_RSA_WITH_AES_256_CBC_SHA256
Ignoring unsupported cipher suite: TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384
Ignoring unsupported cipher suite: TLS_ECDH_ECDSA_WITH_AES_256_CBC_SHA384
Ignoring unsupported cipher suite: TLS_RSA_WITH_AES_256_CBC_SHA256
Ignoring unavailable cipher suite: TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA
Ignoring unsupported cipher suite: TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256
Ignoring unsupported cipher suite: TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384
Ignoring unavailable cipher suite: TLS_DHE_DSS_WITH_AES_256_CBC_SHA
Ignoring unsupported cipher suite: TLS_ECDH_RSA_WITH_AES_256_CBC_SHA384
Ignoring unsupported cipher suite: TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256
Ignoring unsupported cipher suite: TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA256
Ignoring unavailable cipher suite: TLS_ECDH_ECDSA_WITH_AES_256_CBC_SHA
Ignoring unavailable cipher suite: TLS_RSA_WITH_AES_256_CBC_SHA
Ignoring unsupported cipher suite: TLS_RSA_WITH_AES_128_CBC_SHA256
Allow unsafe renegotiation: false
Allow legacy hello messages: true
Is initial handshake: true
Is secure renegotiation: false
%% No cached client session
*** ClientHello, TLSv1
RandomCookie:  GMT: 1365707642 bytes = { 219, 198, 250, 114, 173, 93, 144, 4, 231, 53, 192, 242, 141, 137, 219, 115, 48, 203, 218, 188, 51, 30, 184, 245, 182, 150, 132, 254 }
Session ID:  {}
Cipher Suites: [TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA, TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA, TLS_RSA_WITH_AES_128_CBC_SHA, TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA, TLS_ECDH_RSA_WITH_AES_128_CBC_SHA, TLS_DHE_RSA_WITH_AES_128_CBC_SHA, TLS_DHE_DSS_WITH_AES_128_CBC_SHA, TLS_ECDHE_ECDSA_WITH_RC4_128_SHA, TLS_ECDHE_RSA_WITH_RC4_128_SHA, SSL_RSA_WITH_RC4_128_SHA, TLS_ECDH_ECDSA_WITH_RC4_128_SHA, TLS_ECDH_RSA_WITH_RC4_128_SHA, TLS_ECDHE_ECDSA_WITH_3DES_EDE_CBC_SHA, TLS_ECDHE_RSA_WITH_3DES_EDE_CBC_SHA, SSL_RSA_WITH_3DES_EDE_CBC_SHA, TLS_ECDH_ECDSA_WITH_3DES_EDE_CBC_SHA, TLS_ECDH_RSA_WITH_3DES_EDE_CBC_SHA, SSL_DHE_RSA_WITH_3DES_EDE_CBC_SHA, SSL_DHE_DSS_WITH_3DES_EDE_CBC_SHA, SSL_RSA_WITH_RC4_128_MD5, TLS_EMPTY_RENEGOTIATION_INFO_SCSV]
Compression Methods:  { 0 }
Extension elliptic_curves, curve names: {secp256r1, sect163k1, sect163r2, secp192r1, secp224r1, sect233k1, sect233r1, sect283k1, sect283r1, secp384r1, sect409k1, sect409r1, secp521r1, sect571k1, sect571r1, secp160k1, secp160r1, secp160r2, sect163r1, secp192k1, sect193r1, sect193r2, secp224k1, sect239k1, secp256k1}
Extension ec_point_formats, formats: [uncompressed]
***
[write] MD5 and SHA1 hashes:  len = 149
0000: 01 00 00 91 03 01 51 67   0B 7A DB C6 FA 72 AD 5D  ......Qg.z...r.]
0010: 90 04 E7 35 C0 F2 8D 89   DB 73 30 CB DA BC 33 1E  ...5.....s0...3.
0020: B8 F5 B6 96 84 FE 00 00   2A C0 09 C0 13 00 2F C0  ........*...../.
0030: 04 C0 0E 00 33 00 32 C0   07 C0 11 00 05 C0 02 C0  ....3.2.........
0040: 0C C0 08 C0 12 00 0A C0   03 C0 0D 00 16 00 13 00  ................
0050: 04 00 FF 01 00 00 3E 00   0A 00 34 00 32 00 17 00  ......>...4.2...
0060: 01 00 03 00 13 00 15 00   06 00 07 00 09 00 0A 00  ................
0070: 18 00 0B 00 0C 00 19 00   0D 00 0E 00 0F 00 10 00  ................
0080: 11 00 02 00 12 00 04 00   05 00 14 00 08 00 16 00  ................
0090: 0B 00 02 01 00                                     .....
main, WRITE: TLSv1 Handshake, length = 149
main, waiting for close_notify or alert: state 1
main, Exception while waiting for close java.net.SocketException: Software caused connection abort: recv failed
main, handling exception: java.net.SocketException: Software caused connection abort: recv failed
main, SEND TLSv1 ALERT:  fatal, description = unexpected_message
    at java.net.SocketInputStream.socketRead0(Native Method)
main, WRITE: TLSv1 Alert, length = 2
main, Exception sending alert: java.net.SocketException: Software caused connection abort: socket write error
main, called closeSocket()
1365707642425 *** Disconnected. 
```

我做错了什么会导致此错误？我知道此功能有效，因为其他客户端可以做到，但我只是不知道如何从 Java 中做到这一点

有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T21:21:27.493

`socket`我做了一些测试，在`sslSocket`握手时接收数据时出现了这个错误。例如，如果您注册（发送 NICK/LOGIN）到`socket`而不是`sslSocket`. 尝试在连接 TLSSTART 后向服务器发出第一个命令，并在发送其他任何内容之前等待 670/691 代码。

以下内容对我没有任何异常，并且可以毫无问题地握手：

```
public static void main(String[] args) throws Exception {
    Socket socket = new Socket("irc.chatspike.net",6667);
    BufferedReader reader = new BufferedReader(new InputStreamReader(socket.getInputStream()));
    BufferedWriter writer = new BufferedWriter(new OutputStreamWriter(socket.getOutputStream()));
    String line;
    writer.write("STARTTLS\r\n");
    writer.flush(); 
    while ((line = reader.readLine()) != null) {
        if (line.contains(" 670 ")) {
            SSLContext sc = SSLContext.getInstance("TLS");
            sc.init(null, new TrustManager[]{
                    new X509TrustManager() {
                        public java.security.cert.X509Certificate[] getAcceptedIssuers() {
                            return null;
                        }
                        public void checkClientTrusted(
                            java.security.cert.X509Certificate[] certs, String authType) {
                        }
                        public void checkServerTrusted(
                            java.security.cert.X509Certificate[] certs, String authType) {
                        }
                    }
                }, new java.security.SecureRandom());
            SSLSocketFactory sslSocketFactory = ((SSLSocketFactory) sc.getSocketFactory());
            SSLSocket sslSocket = (SSLSocket) sslSocketFactory.createSocket(
                                socket,
                                socket.getInetAddress().getHostAddress(),
                                socket.getPort(),
                                true);
            sslSocket.startHandshake();
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-19T00:53:53.100

这里的问题是您在 STARTTLS 命令之后通过纯文本套接字发送 SSL 握手以外的其他内容。一旦您发出 STARTTLS 并被接受，就必须停止使用纯文本套接字。

# winapi - 在win32中忙于等待信号量

> ID：15957199
> 
> 赞同：0
> 
> 时间：2013-04-11T19:27:35.580
> 
> 标签：winapi

我不想实现障碍。为此，我忙着等待，直到信号量的值为 0。

我已经使用信号量的值在 POSIX 上做到了这一点。有没有办法在 Windows 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T19:37:03.743

不要在繁忙的循环中使用简单的整数。通过 使用实际的信号量对象[`CreateSemaphore()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682438.aspx)，并使用[`WaitForSingleObject()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms687032.aspx)（或相关函数）告诉您信号量何时处于通过屏障的状态。

# dojo - dojo 需要自定义函数版本 2

> ID：15957209
> 
> 赞同：1
> 
> 时间：2013-04-11T19:28:05.917
> 
> 标签：dojo, amd

我有一个关于需要我自己的自定义函数的问题。在我的 test.html 中，我写道：

```
require(["dojo/query", "new"], function(query, New) {New();}); 
```

New 是 new.js 文件，它与 dojo 文件夹位于同一位置。在 new.js 中，我写道：

```
define(["dojo/dom"], function(dom){return dom.byId("d1")}); 
```

在这种情况下，我可以在需要时调用我的 New 函数。

但是如果我更改 new.js 的位置，那么当我再次需要“new”时，就会出现 dojo Loader 错误。

如果我改变new.js的位置，对于test.html我应该怎么写？像：

```
require(["dojo/query", "../new"], function(query, New) {...}); 
```

这没有用。

有人知道，如何要求自定义的 js 文件，它与 dojo 文件夹不在同一个地方？

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T01:12:08.650

我已经解决了这样的问题。

首先，我将 dojo 包含在我的`<head>`喜欢中：

```
<script type="text/javascript"
src="https://myserver.com/dojo/1.7.2/dojo/dojo.js"></script> 
```

现在可以在 require 中找到 dojo。很明显，我的 dojo 目录列表是这样的：

`https://myserver.com/dojo/1.7.2/`

![在此处输入图像描述](https://i.stack.imgur.com/TkdM8.png)

您也可以尝试[使用来自 CDN 的 dojo](http://dojotoolkit.org/documentation/tutorials/1.7/cdn/)。

* * *

其次，我将所有的 javascript 放在一个文件夹中，`/js`. 当我`require`，我包括这样的文件夹名称`"js/MyGrid.js"`。 `js`部署到服务器上我的项目的根目录中。现在我可以`require`这样：

```
require([ "dojo", "dijit/Dialog", "dojo/parser", "dojo/_base/lang",
  "dojo/query", "dojo/dom-class", "js/MyGrid.js", "js/MyUploader.js",
  "dijit/form/TextBox", "dijit/form/Textarea", "js/MyJsonHelper.js",
  "dijit/form/SimpleTextarea", "dojox/form/BusyButton", "dojo/dom-attr",
  "dijit/form/Select", "dijit/ProgressBar", "js/MyArray.js", 
  "dojo/domReady!" ], 
  function(dojo, Dialog, parser, lang, query, domClass) { 
```

* * *

**PS：**我绝不提倡将此作为最佳实践。它对我有用。我知道还有其他方法可以做到这一点，比如这样设置**[`data-dojo-config`](http://dojotoolkit.org/documentation/tutorials/1.7/modules/)**：

```
var dojoConfig = {
    packages: [
        { name: "my", location: "js", main: "app" }
    ]
}; 
```

[http://dojotoolkit.org/documentation/tutorials/1.7/modules/](http://dojotoolkit.org/documentation/tutorials/1.7/modules/)

# css-transitions - 通过jquery事件单击中断CSS转换并取消反转

> ID：15957212
> 
> 赞同：1
> 
> 时间：2013-04-11T19:28:17.433
> 
> 标签：css-transitions, interrupt

`.trans{ -webkit-transition:background-position 0.2s; }`

我有导航菜单项并将上面的过渡添加到每个菜单项。

JQuery悬停功能还可以：

`$(".menuUL li").mouseover(function () { $(this).css({'background-position':'center top','color':'white'});}); $(".menuUL li").mouseout(function () {
if(this.id == currentTab) {$(this).css({'background-position':'center top','color':'white'});} else {$(this).css({'background-position':'center bottom','color':'#0196e3'});}});`

并点击功能获取内容：

` $(".menuUL li").click(function(){

```
 $(".menuUL li").not(this).css({'background-position':'center bottom','background-color':'#666666','color':'#0196e3'});
        $(this).css({'background-position':'center top','background-color':'#CCCCCC','color':'white'});}); 
```

`

问题是当我单击一个菜单项并在过渡完成之前突然（在 <200 毫秒内）离开元素（鼠标移出）。发生反向转换，单击的菜单元素的背景位置回到初始位置。

我需要像 $(this).endtransition() 这样的代码

你能帮忙吗？

# php - 致命错误：在 joomla2.5 中对非对象调用成员函数 get()

> ID：15957220
> 
> 赞同：0
> 
> 时间：2013-04-11T19:28:35.603
> 
> 标签：php, joomla

我正在创建一个 joomla2.5 模块。我想从模块中检索数据传递参数，但我得到了关于标题的错误。下面是我的代码：helper.php

```
class modFeedGrabber
{
    function feedurl(){
        $url = $params->get('feedUrl');
        return $url;
    }
    function maxCount(){
        $maxcount = $params->get('maxCount');
        return $maxcount;
    }
    function showDesc(){
        return $params->get('showDesc');
    }
    function showPubDate(){
        return $params->get('showPubDate');
    }
    function targetLink(){
        return $params->get('titleLinkTarget');
    }
    function descChar(){
        return $params->get('descCharacterLimit');
    }
    function fx(){
        return $params->get('fx');
    }
    function delay(){
        return $params->get('delay');
    }
    function timeout(){
        return $params->get('timeout');
    }
    function module_sfx(){
        return $params->get('moduleclass_sfx');
    }
} 
```

mod_feedGrabber.php

```
defined( '_JEXEC' ) or die( 'Restricted access' );

$sitebase = JPATH_BASE;
$doc =& JFactory::getDocument();

// Include the syndicate functions only once
require_once( dirname(__FILE__).DS.'/helper.php' );
$feed = new modFeedGrabber();
$url = $feed->feedurl($url);
$maxcount = $feed->maxcount($maxcount);
require( JModuleHelper::getLayoutPath( 'mod_feedGrabber' ) ); 
```

我的新问题是如何从模块中获取数据传递？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T19:36:21.147

为了说明我上面的评论：

```
$url = $feed->feedurl($url);
                      ^^^^---- $url is not defined at this point 
```

feedurl() 是否返回 $url 值无关紧要。在您**调用**feedurl() 时，`$url`您尝试传递给该方法的未定义。所以在 feedurl() 中，你正在做

```
$url = $params->get(...);
       ^^^^^^^---the $url you passed in to the method, which is null/undefined 
```

然后，当然，还有其他问题：

```
 $url = $params->get(feedUrl);
                        ^^^^^^^--- undefined constant 
```

# javascript - 尝试在 Raphael 中检索渲染文本宽度

> ID：15957223
> 
> 赞同：5
> 
> 时间：2013-04-11T19:28:52.543
> 
> 标签：javascript, jquery, raphael

所以我想在 Raphael 中检索文本字符串的大小，但我似乎做不到。虽然文档说

```
.attr('width'); 
```

是一个选项...我也无法设置宽度。

这是一个[**小提琴**](http://jsfiddle.net/videsignz/Rmegm/6/)

这就是我一直在尝试的……加上其他粗略的方式（甚至使用 Jquery）

```
var page = Raphael("drawing_board");

    // start, move, and up are the drag functions
    start = function () {
        // storing original coordinates
        this.ox = this.attr("x");
        this.oy = this.attr("y");
        this.attr({opacity: .5});
        console.log( this.attr('width') ); //THIS IS WHERE I AM TRYING TO GET THE WIDTH
    },
    move = function (dx, dy) {
        // move will be called with dx and dy

            nowX = Math.min(600, this.ox + dx);
            nowY = Math.min(400, this.oy + dy);
            nowX = Math.max(0, nowX);
            nowY = Math.max(0, nowY);
            this.attr({x: nowX, y: nowY });

    },
    up = function () {
        // restoring state
        this.attr({opacity: 1});

    };   

    page.text(200, 50, "TEXT 1").attr({ cursor: "move", 'font-size': 16  , fill: '#3D6AA2'}).drag(move, start, up);
    page.text(200, 200, "TEXT 2").attr({ cursor: "move", 'font-size': 16  , fill: '#3D6AA2'}).drag(move, start, up); 
```

也许我需要使用其他东西

```
this.attr('width' : 30); //To Set
this.attr('width'); //To Get 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-11T19:54:00.490

您可以使用：

```
this.node.getBBox().width 
```

`this.node`-> 获取与 Raphael 元素关联的 SVG 元素
`getBBox()`-> 边界框

也可以`getBBox`直接使用拉斐尔的方法：

```
this.getBBox().width 
```

您的方法不起作用，因为[svg 文本元素](http://www.w3.org/TR/SVG/text.html#TextElement)没有 width 属性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T20:24:25.610

`this.getBBox()`是获取计算出的 bbox 的 RaphaelJS 方法，从而返回具有`x` `y` `x1` `x2` `width`和`height`属性的对象。它和 Raphaeljs 一样是跨浏览器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T20:03:38.743

SVG 文本元素没有该`width`属性。查看 w3c SVG 规范：[http](http://www.w3.org/TR/SVG/text.html#TextElement) ://www.w3.org/TR/SVG/text.html#TextElement 属性列表中没有`width`，因此无法设置。

但是我们可以`width`使用`jQuery`. 可以首先检索 DOM 元素引用并将其传递给`jQuery`构造函数，然后使用该`width()`函数。这是更新的小提琴：http: [//jsfiddle.net/Rmegm/8/](http://jsfiddle.net/Rmegm/8/)

# php - 在第二台服务器上隐藏 Web 应用程序源

> ID：15957231
> 
> 赞同：0
> 
> 时间：2013-04-11T19:29:19.330
> 
> 标签：php, mysql, security, include

我为客户制作了一个基于 Web 的程序，我想在他的本地服务器上安装该应用程序。

我不想在他付钱之前给他所有的源码，所以我的想法是将大部分核心代码存储在外部服务器上，并且只有一种`include`在他的服务器上，这样他就无法查看/复制/更改实际的 PHP 代码。

我知道我可以`include()`在更改文件中的相应条目后立即使用 URL `PHP.ini`，但是有更安全的方法吗？

另外，我的服务器应该有什么配置，以便他本地服务器上的 PHP 代码能够读取我的 PHP？如果我允许其他服务器“加载”我的 PHP 代码，这不会带来巨大的安全风险吗？

（请注意，我使用免费的 Web 托管服务作为“第二台服务器”，并且我无权访问 conf 文件。）

我希望我已经很好地解释了我的情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T19:35:48.387

远程包含您的 php 是 a) 是的一个巨大的安全风险 b) 没有完成太多，因为您的客户也可以“看到”该远程代码，复制/粘贴它，并将其全部归他所有。

**选项 1：不要放弃应用程序！**

如果您的客户想要测试应用程序，请将其部署到*您*控制的服务器上。让他查看/使用/测试应用程序，无需访问源代码。

**选项2：编码**

如果您绝对必须将您的应用程序提供给客户但又需要保护它，请查看编码解决方案。我们使用[http://www.ioncube.com/](http://www.ioncube.com/)来编码/保护我们部署到客户服务器的 PHP 代码。

# guice - Guice：在这种情况下，如何在模块中配置 @Provides 和 @Singleton？

> ID：15957237
> 
> 赞同：27
> 
> 时间：2013-04-11T19:29:35.873
> 
> 标签：guice

我在带有注释的模块中有一个提供程序方法`@Provides`：

```
@Provides
public ChatServicePerformanceMonitor getChatServicePerfMon() {
  ...
} 
```

我已经`ChatServicePerformanceMonitor`用`@Singleton`. 在我使用这个实例的代码中，我不能让 guice “被动地”注入它，因为我正在使用一个构建封闭类的框架（它不使用 Guice，所以这是我知道的唯一方法获取参考）：

```
chatServicePerfMon = injector.getInstance(ChatServicePerformanceMonitor.class); 
```

似乎 Guice 不尊重我课堂`@Singleton`上的注释。`ChatServicePerformanceMonitor`每次调用 injector.getInstance(ChatServicePerformanceMonitor.class) 都会得到一个实例。

添加`@Singleton`到提供者方法似乎解决了这个问题：

```
@Provides @Singleton
public ChatServicePerformanceMonitor getChatServicePerfMon() {
  ...
} 
```

这是预期的行为吗？似乎`@Singleton`我只需要一个实例。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2016-03-23T12:20:45.870

与此同时，这个特性是可用的（用 Guice 4.0 测试过）。

`@Provides`方法现在也可以用注释`@Singleton`来应用范围。见[https://github.com/google/guice/wiki/Scopes](https://github.com/google/guice/wiki/Scopes)

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-04-11T21:32:50.540

如果你正在创建`ChatServicePerformanceMonitor`这样的：

```
@Provides
public ChatServicePerformanceMonitor getChatServicePerfMon() {
  return new ChatServicePerformanceMonitor();
} 
```

那么您的类级别`@Singleton`注释将无效，因为 Guice 没有创建对象，您是。Guice 只能对它创建的对象强制执行范围。添加`@Singleton`到您的`getChatServicePerfMon()`方法没有任何问题。

如果您在类上有一个无参数构造函数（或`@Inject`构造函数）`ChatServicePerformanceMonitor`并且您删除了您的`@Provides`方法，那么对注入器的持续调用将返回相同的单例。

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2018-04-12T16:09:05.500

你总是可以只做非常简单的方法：

```
private ChatServicePerformanceMonitor perfMon = null;

@Provides
public ChatServicePerformanceMonitor getChatServicePerfMon() {
  if (perfMon == null) {
    perfMon = new ChatServicePerformanceMonitor();
  }

  return perfMon;
} 
```

# vb.net - 使用回调允许多个连接到套接字？

> ID：15957238
> 
> 赞同：1
> 
> 时间：2013-04-11T19:29:39.167
> 
> 标签：vb.net, multithreading, sockets, callback, asyncsocket

我正在尝试创建一个具有处理数据的外部链接的 VB.Net 服务器程序。服务器将在端口 7878 上等待来自客户端的请求。当服务器收到请求时，它将发送一个包含所有变量状态的字符串，并每秒发送一个字符串，其中仅包含已更改变量的值。服务器不需要从客户端接收任何信息进行处理。除了一次允许多个请求之外，我已经成功地实现了一切。基本程序如下所示：

```
Class Server
    Public Sub Main()
        'thread start for ListenForRequests
    End Sub

    Public Sub ListenForRequests()
        'code to set up socket
        'bind socket
        'listen
        Using newConnection as socket.accept()
            'do stuff
            newConnection.send'stuff
        End Using
    End Sub
End Class 
```

谁能告诉我实现异步代码回调的简单方法？我想我需要将我的 'do stuff and send stuff code 移动到一个新的 sub 并在 socket.accept 上触发一个新线程，但我不知道如何将 newConnection 传递给一个新线程。

# jquery-mobile - .load 在页面转换后不起作用

> ID：15957245
> 
> 赞同：0
> 
> 时间：2013-04-11T19:29:53.527
> 
> 标签：jquery-mobile

我在 jquery mobile 中有这 2 页：

主页 - [http://snipt.org/zixj3](http://snipt.org/zixj3)

内部 - [http://snipt.org/ziya9](http://snipt.org/ziya9)

你可以在这里看到现场直播：[www.leoferrari.com/congresso1/](http://www.leoferrari.com/congresso1/)

我用：

```
$( document ).on( "pageinit", ".jqm-demos", function() {
 $("#menu").load('menu.html', function() {
  $(this).trigger("create");
 });

 $("#footer").load('footer.html', function() {
  $(this).trigger("create");
 });
}); 
```

加载菜单和页脚，但是当我单击转到内页时，页脚和菜单不加载，如果重新加载页面，页脚和菜单正常加载

# azure - 从 azure blob 执行脚本文件并将其结果写入文件

> ID：15957247
> 
> 赞同：0
> 
> 时间：2013-04-11T19:30:04.150
> 
> 标签：azure, azure-storage, azure-blob-storage

我将解释我要求的任务：

我在 Azure 中有两个容器，一个叫做“数据”，一个叫做“脚本”。在“数据”容器中有一个包含数据的 txt 文件，在“脚本”容器中有一个脚本文件。

现在，我需要以编程方式（使用 WorkerRole）来执行脚本文件，并将数据文件的内容作为参数（例如：一个接受字符串 's' 并返回屏幕“Hello，'s'”的脚本文件，当's'在给定的字符串中，并且在数据文件中有一个字符串），并将运行结果保存到另一个文件中，该文件需要保存在另一个名为“result”的容器中。

我该如何做所有这些？我已经上传了文件并以编程方式创建了 blob，但我似乎无法理解如何执行文件以及如何将其结果保存到另一个文件？我可以帮忙吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T14:34:49.843

以下是伪代码中的步骤：

1.  从 blob 中检索脚本（使用`DownloadToStream()`）
2.  编译脚本（我会把这个留给你，因为我不知道你的脚本是什么格式）
3.  从 blob 加载参数（与步骤 1 相同）
4.  使用这些参数执行脚本。

如果您的脚本可以写成 lambda 表达式，那么这会变得容易得多，因为您可以将它们变成`Action`'s

根据您的问题进行编辑：

1.  `DownloadText()`不再包含在 Azure Storage 2.0 中，您只能访问`DownloadToStream()`. 即使您使用的是旧版本（例如 1.7），我也建议`DownloadToStream()`您在将来升级时使用。这将避免不得不重构您的代码。
2.  在执行你的脚本方面，取决于它是什么类型的脚本（如果是c#代码你可以使用这个例子：[Is it possible to dynamic compile and execute C# code fragment?。](https://stackoverflow.com/questions/826398/is-it-possible-to-dynamically-compile-and-execute-c-sharp-code-fragments)如果你需要执行不同类型的脚本你需要使用它来运行它`Process.Start`，你可以看看这个例子： http: [//www.dotnetperls.com/process-start](http://www.dotnetperls.com/process-start)

我对第 2 点没有太多经验，但这些是我听到和看到使用的过程。

# java - 如何在这种特殊情况下使 .toLowerCase 工作.. 似乎根本不起作用

> ID：15957248
> 
> 赞同：0
> 
> 时间：2013-04-11T19:30:06.127
> 
> 标签：java, case-sensitive

所以我一直在使用 .toLowerCase 时遇到问题，并且我查看了大量关于它如何工作的文章、视频和书籍。我尝试制作一个愚蠢的游戏作为我朋友的笑话，显然这不会奏效

修复它的最佳方法是什么以及我如何 .toLowerCase() 工作？如果能给出一个简单的解释，我会很高兴的！！:)

“选择”是一个静态字符串。

```
public static void part1()
        {
            System.out.println("Welcome to Chapter ONE ");
            System.out.println("This is just a simple Left Right options.");
            System.out.println("-------------------------");
            System.out.println("You emerge into a cave like structure, It's seems very weird and creeps you out a little, Yet, You continue on your journey \n You see a that you have reached a 'Dead End' and \n now you have two choices: Either go Left into the weird corner, Or Go Right.. Into the Well-Lit Area.");
            choice = input.next();
            if(choice.toLowerCase()=="left")
            {
                deathPre();
            }
            else if(choice.toLowerCase()=="right")
                {
                    TrFight();
                }
            } 
```

所以这是它不起作用的部分（是的，具有讽刺意味的是，这是第一部分）我尝试了其他方法来完成这项工作。虽然这对我来说是最简单的事情突然变得不可能了。

请帮忙！

逻辑：如果用户输入“左”（无论哪种情况，因为我将其转换为小写）..它应该将用户发送到“deathPre（）;如果他输入“右”，它应该去“TrFight (); 其他任何事情都会导致我不介意的错误。但我需要“左”和“右”才​​能工作

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T19:34:57.427

确保你比较字符串，`.equals()`你也可以使用

```
.equalsIgnoreCase("left") 
```

如果您使用第二个，则不需要使用 '.toLowerCase()'

编辑：

就像埃里克说的你也可以使用

```
.trim().equalsIgnoreCase("left") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T19:34:40.163

就像 Zim-Zam 已经评论过的那样，您需要使用 比较字符串`equals`，而不是`==`运算符：

```
if(choice.toLowerCase().equals("right"))
...
else if(choice.toLowerCase().equals("left")) 
```

`.toLowerCase()`可能做得很好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T19:36:33.243

你需要试试这个：

```
public static void part1()
    {
        System.out.println("Welcome to Chapter ONE ");
        System.out.println("This is just a simple Left Right options.");
        System.out.println("-------------------------");
        System.out.println("You emerge into a cave like structure, It's seems very weird and creeps you out a little, Yet, You continue on your journey \n You see a that you have reached a 'Dead End' and \n now you have two choices: Either go Left into the weird corner, Or Go Right.. Into the Well-Lit Area.");
        choice = input.next();
        if(choice.toLowerCase().equals("left"))
        {
            deathPre();
        }
        else if(choice.toLowerCase().equals("right"))
            {
                TrFight();
            } 
```

要比较两个字符串，请使用 String 对象中的 equals 方法。

# android - ANR，但应用程序没有做任何事情

> ID：15957249
> 
> 赞同：0
> 
> 时间：2013-04-11T19:30:08.453
> 
> 标签：android

我目前正在为一个****问题而头晕目眩！大约一周以来，我尝试将任何可能很长的任务放到 asynctask 中，但问题仍然存在。

[这里](http://img4.hostingpics.net/pics/147906Captured.png)记录了 DDMS 跟踪：

![在此处输入图像描述](https://i.stack.imgur.com/s1BPm.png)

这是在 ANR 之前。我们可以看到主线程没有做任何事情。我唯一看到的是 MessageQueue.nativePollOnce() 但不知道它为什么用于？

任何帮助将非常非常感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T07:32:24.550

谢谢山姆的回答，很抱歉我的回复延迟。

我昨天通过阅读Service的Android文档才发现。 [Android 服务文档](http://developer.android.com/reference/android/app/Service.html) 在 onStartCommand 中，我替换了

```
return startId; 
```

经过

```
return START_NOT_STICKY; 
```

由于这个原因，我找到了解决方案：

> 此类服务的一个示例是从服务器轮询数据：它可以通过让警报启动其服务来安排警报每 N 分钟轮询一次。

这正是我的应用程序正在做的事情。但是，如果没有给出这个例子，我想我仍然会寻找解决方案，因为我没有理解以及我想要这些返回语句的解释......

无论如何，我不再有 ANR，这太棒了！！！:D

# mysql - 导入 mysqldump 文件不匹配

> ID：15957250
> 
> 赞同：0
> 
> 时间：2013-04-11T19:30:10.423
> 
> 标签：mysql, mysqldump

我一直在尝试导入一个 mysqldump 文件，但插入内容不匹配。

mysqldump 文件有这样的插入：

```
 INSERT INTO `venues` VALUES (...); 
```

但有时这些值会插入到其他不对应的列中。

如果我将插入中的列名指定为：

```
 INSERT INTO `venues` (column_one, column_two, ...) VALUES (...) 
```

然后以正确的顺序插入值，这是为什么呢？如何在不指定列名的情况下按顺序插入大量数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T20:01:20.313

如果您的转储文件和表没有匹配的列，那么您有一些选择：

1.  编辑转储文件并修复插入语句，使其与您拥有的内容保持一致
2.  将数据按原样导入到辅助表中。然后`insert select`将临时表中的数据复制到主表中。指定适当的（匹配的）列名。

**编辑：**我想第三种选择是以列名包含在`insert`语句中的方式减少数据。

# sitecore - 从 Sitecore 模板中删除字段

> ID：15957252
> 
> 赞同：2
> 
> 时间：2013-04-11T19:30:16.487
> 
> 标签：sitecore, sitecore6

我目前正在处理一个 Sitecore 项目，我们有一个相当大的模板，该模板从项目开始就一直存在。因此，它有大约三打左右的字段我们不再使用。

我们当前的解决方案是删除模板并重新创建它。我们还没有这样做，因为我们必须在新模板中重新创建基于此模板（大约 50 个）的所有对象，或者在删除它们所基于的对象之前尝试将它们转换为新模板的艰巨项目.

有没有办法从模板中删除这些未使用的字段，这样我们就可以避免这些混乱？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T19:32:09.807

没关系。刚发帖我就想通了。

在您定义的字段的树元素中，右键单击并删除。就那么简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T20:05:09.063

此外，您只需清除构建器选项卡上的字段，保存它，它也会删除该字段。

# ruby-on-rails-3 - 没有路线匹配 [POST] "/contacts/1"

> ID：15957253
> 
> 赞同：0
> 
> 时间：2013-04-11T19:30:19.570
> 
> 标签：ruby-on-rails-3, routes

app/view/contact/show.html/erb

```
<%= form_for(@contact) do |f| %>
<p id="notice"><%= notice %></p>

<p>
  <b>Firstname:</b>
  <%= @contact.firstname %>
</p>

<p>
  <b>Lastname:</b>
  <%= @contact.lastname %>
</p>

<p>
  <b>Email:</b>
  <%= @contact.email %>
</p>

<p>
  <b>Mobilephone:</b>
  <%= @contact.mobilephone %>
</p>
<% end %>

<%= link_to 'Edit', edit_contact_path(@contact) %> |
<%= link_to 'List', contacts_path %> 
```

在我看来/contact/index.html.erb 我有一个按钮

```
<%= button_to 'show', contact %> 
```

在我的 contacts_controller.rb 中，我只使用自动设置，例如：

```
def show
    @contact = Contact.find(params[:id])

    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @contact }
    end
  end 
```

在我的路线文件中

```
match '/contacts/:id/edit', :controller => 'contacts', :action => 'edit'
  match '/contacts/contact_:id/show', :controller => 'contacts', :action => 'show'
  resources :contacts
  resources :connections
  resources :addresses
  root :to => 'contacts#index' 
```

在运行 rake 路线后，我得到了

```
/contacts/:id/edit(.:format)    contacts#edit
                       /contacts/:id/show(.:format)    contacts#show
       contacts GET    /contacts(.:format)             contacts#index
                POST   /contacts(.:format)             contacts#create
    new_contact GET    /contacts/new(.:format)         contacts#new
   edit_contact GET    /contacts/:id/edit(.:format)    contacts#edit
        contact GET    /contacts/:id(.:format)         contacts#show
                PUT    /contacts/:id(.:format)         contacts#update
                DELETE /contacts/:id(.:format)         contacts#destroy
    connections GET    /connections(.:format)          connections#index
                POST   /connections(.:format)          connections#create
 new_connection GET    /connections/new(.:format)      connections#new
edit_connection GET    /connections/:id/edit(.:format) connections#edit
     connection GET    /connections/:id(.:format)      connections#show
                PUT    /connections/:id(.:format)      connections#update
                DELETE /connections/:id(.:format)      connections#destroy
      addresses GET    /addresses(.:format)            addresses#index
                POST   /addresses(.:format)            addresses#create
    new_address GET    /addresses/new(.:format)        addresses#new
   edit_address GET    /addresses/:id/edit(.:format)   addresses#edit
        address GET    /addresses/:id(.:format)        addresses#show
                PUT    /addresses/:id(.:format)        addresses#update
                DELETE /addresses/:id(.:format)        addresses#destroy
           root        /                               contacts#index 
```

当我单击“显示”按钮时，我得到了 Routes Error No route matches [POST] "/contacts/1" 有人可以帮我检查一下我犯了什么错误吗？非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T19:51:59.770

如果您使用提供的标准路由可能会更容易`resources contacts`- 那么您可以简单地使用`<%= link_to 'show', contact_path(contact) %>`

此外，该按钮应该执行 GET 请求，而不是 POST，因为该路由未定义。

如果我是你，我会删除你声明的前两个自定义路由，而只依赖该`resources :contacts`方法。这与 GET 请求相结合应该可以解决您的问题。

# java - 将列表中的元素添加到字符串数组

> ID：15957254
> 
> 赞同：0
> 
> 时间：2013-04-11T19:30:22.567
> 
> 标签：java, arrays, collections, arraylist

我有一个字符串数组，例如，

```
 String[] abc= new String[]{}; 
```

我的 List 有一些价值。我迭代列表并将每个列表元素添加到字符串数组。

```
for(int i=0; i<errList.size(); i++)
            {
                abc[i] = errList.get(i).getSrceCd();
            } 
```

errList.size() 有 6 个值。但是当执行 for 循环时，我得到 java.lang.ArrayIndexOutOfBoundsException。有什么输入吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T19:32:41.497

您正在创建一个`String[]`长度为零的对象；因此，当您尝试将项目分配给 时`abc[i]`，它访问的索引不在您的范围内`0 <= i < 0`。

您应该分配`abc`一个长度：

```
String[] abc= new String[errList.size()];
for(int i=0; i<errList.size(); i++)
{
    abc[i] = errList.get(i).getSrceCd();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T19:32:28.637

您需要创建与列表大小相同的字符串数组。它不是动态的。也许你可以通过这个练习说出你想要达到的目标。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T19:35:02.380

您是否尝试使用在集合框架中广泛使用的每个循环？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T19:51:43.530

`String[] abc = errList.toArray(new String[0]);`

或者：

```
String[] abc = new String[errList.size()];    
errList.toArray(abc); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-11T19:53:13.487

我会这样做

```
String[] abc= errList.toArray(new String[errList.size()]); 
```

# c++ - 静态控件设置文本颜色

> ID：15957260
> 
> 赞同：7
> 
> 时间：2013-04-11T19:30:36.643
> 
> 标签：c++, winapi, textcolor

我有一个静态控件：

```
HWND hLabelControl=CreateWindowEx(WS_EX_CLIENTEDGE,"STATIC","",
            WS_TABSTOP|WS_VISIBLE|WS_CHILD|SS_CENTER,0,0,24,24,
        hwnd,(HMENU)hS1,GetModuleHandle(NULL),NULL); 
```

例如，我希望在按下按钮时将静态标签中的文本颜色更改为红色。

我怎样才能做到这一点？

我知道有一个

```
SetTextColor(
  _In_  HDC hdc,
  _In_  COLORREF crColor
); 
```

功能，但我不知道如何获得静态控制的 HDC。

提前致谢。

**编辑：**

这不起作用：

```
 HDC hDC=GetDC(hLabelControl);
        SetTextColor(hDC,RGB(255,0,0)); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-11T19:56:30.700

静态控件[`WM_CTLCOLORSTATIC`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb787524%28v=vs.85%29.aspx)在绘制自己之前向其父级发送消息。您可以通过处理此消息来更改 DC。

```
case WM_CTLCOLORSTATIC:
  if (the_button_was_clicked) {
    HDC hdc = reinterpret_cast<HDC>(wParam);
    SetTextColor(hdc, COLORREF(0xFF, 0x00, 0x00));
  }
  return ::GetSysColorBrush(COLOR_WINDOW);  // example color, adjust for your circumstance 
```

所以诀窍是让静态控件在单击按钮时重新绘制自身。您可以通过几种不同的方式执行此操作，但最简单的方法可能是使用 使窗口无效[`InvalidateRect`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd145002%28v=vs.85%29.aspx)。

# mysql - 为大型数据集创建 MySQL 数据库模式

> ID：15957261
> 
> 赞同：0
> 
> 时间：2013-04-11T19:30:39.447
> 
> 标签：mysql, schema

我正在努力寻找构建适合我的项目的结构的最佳方法。答案可能很简单，但由于列或表的数量庞大，我正在苦苦挣扎，具体取决于它的设置方式。

我们有几个工具，每个都可以为许多客户运行。每个工具都有一系列问题，这些问题填充了答案数据库。工具运行后，我们填充另一系列数据，即工具的输出。我们有大约 10 个工具，都填充了一个包含 1500 个数据点的电子表格。这就是我挣扎的地方......每个工具都可以运行多次，并且许多工具共享相同的数据点。我的下一个项目是构建一个可以开始为工具输入数据的应用程序，但允许导入与已运行的工具共享相同数据点的数据。

一个简单的例子：工具 1 - 公司、用户数量、位置数量、成本 工具 2 - 公司、用户数量、总存储量、员工工资率

因此，如果同一家公司完成了工具 1，我需要能够在他们完成工具 2 时填充“用户数”（或提供填充），因为它已经存在。

我认为归根结底是，最好创建一个具有 1500 个表的结构，每个数据元素 1 个表，每个数据元素周围都有额外的数据，或者创建一个大表 - 比如......

customerID(FK), EventID(fk), ToolID(fk), numberofusers, numberoflocations, cost, total storage, employee pay,.....(1500)

如果我走这条路并拥有一张大桌子，我不确定这将如何影响性能。同样 - 维护 1500 个表将是多么困难。

另一个维度是最好有每个字段的描述：numberofusers,title,description,active(bool)。我认为这只有在每个元素都在自己的表中时才有可能？

想法？建议？抱歉这个冗长的问题，这里是新的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T20:08:19.783

构建一个包含所有常见数据的主表：公司、# 用户、.. 其他内容。给每一行一个唯一的ID。

为每个独特的工具构建一个表格，其中包含上面的公司 ID 以及该实施所特有的任何数据。为每个表提供“工具使用”和“公司”的主键（唯一键）。

这涵盖了一个地方的公共数据，识别每个“客户”并为每个客户提供给定工具的多种用途。每次使用和客户都是可跟踪且不同的。

更多关于[标准化](http://en.wikipedia.org/wiki/Database_normalization)here。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-23T01:44:16.687

我同意 etherbubunny 关于标准化的观点，但是对于更大的数据集，性能方面的考虑很快就会变得很重要。规范化数据库中通常需要连接以显示人类可读信息，即使在中等大小的表上也可能成为性能杀手，这就是为什么许多数据仓库模型使用非规范化数据集进行报告的原因。这实质上是将连接的报告数据预先构建到新表中，并大量使用索引、归档和分区。

在许多情况下，智能地使用分区本身也可以有效地帮助减少被查询的数据集的大小。除非某些参数保持固定，否则这通常需要相当多的维护。

最终，在您的情况下（以及大多数其他情况），我强烈建议您以能够维护和理解正在发生的事情的方式构建它，然后通过慢查询日志、解释和性能监控工具（如 percona 的工具集）执行定期性能检查。这将使您深入了解真正发生的事情，并为您提供一些数据以供您返回此处或 MySQL 论坛。我们总是可以在这里推测，但最终真实数据和您的设置将成为适合您的驱动力。

# javascript - 在each() jQuery 之后运行函数

> ID：15957267
> 
> 赞同：0
> 
> 时间：2013-04-11T19:31:24.500
> 
> 标签：javascript, jquery

我知道 jQuery 中的 each() 是同步的，但它的行为似乎并非如此。当我这样做时：

```
 $('#findRankBtn').click(function () {
             var websiteURL = $('#websiteURL').val();
             var searchTerms = $('#searchTerm').val();
             var pageNumber = $('#currentPage').val();

             //INSERTS A + FOR EVERY SPACE
             var searchTerms = searchTerms.replace(" ", "+");

             searchGoogle(searchTerms, pageNumber, websiteURL);

         });

         function searchGoogle(searchTerms, pageNumber, websiteURL) {
             $.getJSON("https://www.googleapis.com/customsearch/v1?key=AIzaSyDPuIrijE0IQ6330vMLN2p-L_4J6y_G60c&cx=013036536707430787589:_pqjad5hr1a&q=" + searchTerms + "&alt=json&start=" + pageNumber,

             function (recievedData) {
                 //console.log(recievedData);
                 $.each(recievedData.items, function (i, item) {
                     $('#resultsDiv').append('<p class="resultLink">' + item.link + '</p>');
                     var linkAddress = $('.resultLink:last').text();
                     if (linkAddress.indexOf(websiteURL) !== -1) {
                         alert('found');
                         $('.resultLink:last').attr('class', 'yourLink');
                         $('#ifFound').attr('value', 'true');

                     }
                 });

                 var ifFound = $('#ifFound').val();
                 var currentPage = $('#currentPage').val();
                 var nextPage = CurrentPage + 1;
                 if (ifFound == 'false') {
                     //INCREMENT PAGE
                     $('#currentPage').attr('value', nextPage);

                     //GRAB DATA AGAIN
                     var websiteURL = $('#websiteURL').val();
                     var searchTerms = $('#searchTerm').val();
                     //INSERTS A + FOR EVERY SPACE
                     var searchTerms = searchTerms.replace(" ", "+");
                     //SEARCH GOOGLE
                     searchGoogle(searchTerms, nextPage);
                 }

             });
         } 
```

基本上，如果它在结果的第一页上没有找到所需的链接，它应该转到下一页。我在这里的第一页有一个工作小提琴：http: [//jsfiddle.net/p8DY3/1/](http://jsfiddle.net/p8DY3/1/) 那么我怎样才能让 searchGoogle() 运行直到它找到它正在寻找的东西？也许在我不知道的 Google API 中有更好的解决方法？对不起，如果我的问题是业余的，我一个月前才开始自学 JavaScript。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T19:34:49.090

首先，您应该确保您没有达到 Google 的某种速率限制。查看您的网络选项卡以查看请求是否正确返回。

我看到的第一个问题是数学不好。

var`currentPage = $('#currentPage').val();`是一个字符串

在这里`var nextPage = CurrentPage + 1;`，您将其视为一个数字。

在添加之前，您必须将字符串转换为数字。你正在做字符串连接！。

```
var nextPage = parseInt(CurrentPage,10) + 1; 
```

挑剔

不要在输入中存储东西。使用变量，它会让事情变得更快。DOM 查找/操作很慢。

你为什么要重新发明 addClass 和 val()

```
$('.resultLink:last').attr('class', 'yourLink');
$('#currentPage').attr('value', nextPage); 
```

应该

```
$('.resultLink:last').addClass('yourLink');
$('#currentPage').val(nextPage); 
```

为什么又要抓取搜索词和网址？您已经将它们传递到函数中了吗？

***最后你的问题***

```
searchGoogle(searchTerms, nextPage);  <-- What are you missing here?
function searchGoogle(searchTerms, pageNumber, websiteURL) {  <--what it is expecting 
```

当它想要 3 时，你正在传递 2 东西。

# android - 当我尝试使用参数时异步任务失败

> ID：15957268
> 
> 赞同：0
> 
> 时间：2013-04-11T19:31:31.270
> 
> 标签：android, debugging, android-asynctask

伙计们。我有这个代码：

```
package com.example.httpprogress;

import java.io.BufferedInputStream;
import java.io.IOException;
import java.io.InputStream;
import java.net.MalformedURLException;
import java.net.URL;
import java.net.URLConnection;

import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.os.AsyncTask;

public class MyPicGetTask extends AsyncTask<URL , Void, Bitmap>{

    InputStream is = null;
    BufferedInputStream bis = null;
    Bitmap bmp = null;

    @Override
    protected Bitmap doInBackground(URL... urls) {
        // TODO Auto-generated method stub

        URL url = urls[0];

        try {
               URLConnection conn = url .openConnection();
               conn.connect();
               is = conn.getInputStream();
               bis = new BufferedInputStream( is );
               bmp = BitmapFactory.decodeStream( bis );
            } catch (MalformedURLException e) {

            } catch (IOException e) {

            } finally {
               try {
                  is.close();
                  bis.close();
               } catch (IOException e) {

               }
            }
        return bmp;

    }

} 
```

它失败了，但如果我使用 AsyncTask 并将这个类描述为我的活动中的内部 - 没关系。我不能说原因，因为我无法调试，我可以看到调试选项卡在失败时打开，但它对我来说没有信息。有任何想法吗？对不起我的菜鸟问题

那是我的活动：

```
package com.example.httpprogress;

import java.io.BufferedInputStream;
import java.io.InputStream;
import java.net.MalformedURLException;
import java.net.URL;

import android.app.Activity;
import android.graphics.Bitmap;
import android.os.Bundle;
import android.util.Log;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.ImageView;

public class PicActivity extends Activity implements OnClickListener{

    InputStream is = null;
    BufferedInputStream bis = null;
    Bitmap bmp = null;
    private URL url;
    //"http://192.168.0.30/03.jpg";
     /*
    private class getPicTask extends AsyncTask<Void, Void, Void>{

        @Override
        protected Void doInBackground(Void... s) {
            // TODO Auto-generated method stub

            try {
                url = new URL("http://192.168.0.93/image.php");
            } catch (MalformedURLException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            }

            try {
                   URLConnection conn = url .openConnection();
                   conn.connect();
                   is = conn.getInputStream();
                   bis = new BufferedInputStream( is );
                   bmp = BitmapFactory.decodeStream( bis );
                } catch (MalformedURLException e) {

                } catch (IOException e) {

                } finally {
                   try {
                      is.close();
                      bis.close();
                   } catch (IOException e) {

                   }
                }
            return null;

        }

    };

    */
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_pic);

        final ImageView image = (ImageView) findViewById(R.id.imageView1);

        image.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {

        ///////////

                try {
                    url =  new URL("http://192.168.0.30/03.jpg");
                } catch (MalformedURLException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

                new MyPicGetTask().execute(url);

                image.setImageBitmap(bmp);

            }
        });

            ////////////////
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.pic, menu);

        ////////////////

        return true;
    }

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub

        Log.d("httpProgress", "Onclick()");

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T19:35:47.377

将 Log.d() 代码添加到 doInBackground(...) 以打印出所有发生的异常。那应该告诉你出了什么问题，例如

```
try {
    URLConnection conn = url .openConnection();
    conn.connect();
    is = conn.getInputStream();
    bis = new BufferedInputStream( is );
    bmp = BitmapFactory.decodeStream( bis );
} catch (Exception e) {
    Log.d("Async","EXCEPTION",e);
} finally {
    try {
        is.close();
        bis.close();
    } catch (IOException e) {
        Log.d("Close","EXCEPTION",e);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T20:13:13.113

如果您`AsyncTask`将它用作您调用它的活动之外的公共类，则需要接收该活动的上下文。[这里](https://stackoverflow.com/questions/6119305/android-how-to-run-asynctask-from-different-class-file)有很多帖子，[这里](https://stackoverflow.com/questions/3291490/common-class-for-asynctask-in-android)和[这里](http://www.brighthub.com/mobile/google-android/articles/82805.aspx)解释了如何设置它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T19:48:41.787

您从 doInBackground 返回的位图应该用于在 onPostExecute 中更新您的 UI。

```
protected void onPostExecute(Bitmap bitmap) {
    image.setImageBitmap(bitmap);
} 
```

您的 asyncTask 子类需要访问图像才能更新 UI，因此将其作为内部类是确保它可以执行此操作的一种方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T19:50:55.353

当 MyPicGetTask 是一个内部类时，它可以访问 bmp 字段。当您将其从活动中拉出时，它会失去对 bmp 类字段的访问权限。

我建议阅读 Google 的[文档并按照他们的](http://developer.android.com/guide/components/processes-and-threads.html)[AsyncTasks](http://developer.android.com/reference/android/os/AsyncTask.html)示例进行操作。

# android - ListFragment 内容变化

> ID：15957270
> 
> 赞同：0
> 
> 时间：2013-04-11T19:31:32.943
> 
> 标签：android, android-fragments

我有一个简单的 MyListFragment 片段，它在屏幕上显示一个简单的数据数组。

```
public class MyListFragment extends ListFragment {   
      private ArrayAdapter<String> adapter;
      public ArrayAdapter<String> getAdapter() {
          return adapter;
      }
      public void onActivityCreated(Bundle savedInstanceState) {
            super.onActivityCreated(savedInstanceState);
            String[] values = new String[] {"data", "data", "data"};
           adapter = new ArrayAdapter<String>(getActivity(),
                android.R.layout.simple_list_item_1, values);
            setListAdapter(adapter);           
          }
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {       
        return super.onCreateView(inflater, container, savedInstanceState);
    }
} 
```

我想知道如何从我的活动中动态更改这些数据？请告诉我是否有一个简单的方法来做到这一点！我试过但失败了...

UPD：我向 MyListFragment 添加了一个函数 changeContent：

```
 public void changeContent(String[] value) {
        adapter.addAll(value);
        adapter.notifyDataSetChanged();     
    }
} 
```

如您所见，适配器是一个全局变量，它在 onActivityCreated 内部进行了初始化，但我的程序崩溃了，因为内部 changeContent in 等于 null！我不明白为什么！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T19:35:27.943

您可以编写一个函数来更改您的 values 变量，然后在用新数据填充它后，只需调用

```
adapter.notifyDataSetChanged(); 
```

用新数据填充您的列表。

# javascript - 合并 JQuery 和 Javascript

> ID：15957273
> 
> 赞同：-1
> 
> 时间：2013-04-11T19:31:40.347
> 
> 标签：javascript, jquery

单击输入时，我正在使用一些 JavaScript 来复制值。这很好用。通常我会做一个 JavaScript 警报，但现在我想使用一个查询淡化 div。

如果我在单独的脚本中运行 jquery 或 javascript，那么它们工作正常，只要我加入它们就会失败。

我认为这是因为我使用 onMouseOver 进行复制，但使用输入单击事件进行淡化警报。

知道如何合并这些吗？

```
<script language="JavaScript">
        function toClip(me,vals) {
                var clip = new ZeroClipboard.Client();
                clip.setHandCursor( true );
                clip.setText(vals);
                clip.glue(me);
        }
</script>

<script  type="text/javascript">
    $(document).ready(function() {
$('input').click(function() {
    $messageCont = $('<div class="message_cont">');
    $message = $('<div>DONE</div>').hide();
    $messageCont.append($message);
    $('body').prepend($messageCont);
    $messageCont.css({
    "left" : $(this).offset().left,
    "top" : $(this).offset().top
    });
    $message.fadeIn(200, function() {
        setTimeout(function(){
            $messageCont.fadeOut();
            //code to clean up container
        }, 1500)
    })
 })
});
$messageCont.css({
    "left" : $(this).offset().left,
    "top" : $(this).offset().top
});
</script> 
```

这通过以下方式调用：

```
<div class='copy' onmouseOver="toClip(this,'$val')"><input type="button" value="Copy"/></div> 
```

谢谢 ：）

4月15日更新：

有点使用 jquery 而不是 Javascript 来完成这项工作。

```
<input type="button" id="copy_button" data-clipboard-text="Copy Me!" Value="Click ME">
<script src="js/ZeroClipboard.js"></script>
<script>
var clip = new ZeroClipboard( document.getElementById("copy_button"), {
  moviePath: "js/ZeroClipboard.swf"
} );

clip.on( 'complete', function(client, args) {
var $message = $('<div class="message">DONE</div>').hide();
var $messageCont = $('<div class="message_cont" />').append($message).prependTo('body');
$messageCont.css({
   "left" : $(this).offset().left,
   "top" : $(this).offset().top
}).find("div.message").fadeIn(200).delay(1500).fadeOut(function() {
        });
   } );
</script> 
```

我唯一的问题是它只适用于按钮。我有很多我想和它一起工作的东西。有谁知道如何解决这个问题？

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T20:39:41.987

几点：

*   `$messageCont/$message`每次单击输入时可能不需要创建新的？其余代码建议重用。

*   表达式的`$messageCont = ...`HTML 不完整。您必须确保 div 标签是关闭的，无论是 with`<div>...</div>`还是 with `<div />`。

*   脚本淡入`$message`淡出`$messageCont`。这在第一次使用时是可以的，但随后你会看到精确的 nada；没有任何表情可以淡出`$messageCont`。

*   可以使用 来实现动画队列中的延迟`.delay()`，这比使用 更干净`setTimeout()`。

*   很难看出第二个表达式在其内容显示之前定位`$messageCont.css(...)`时应该实现什么。`$messageCont`如果最初需要定位`$messageCont`，那么最好使用样式表指令或在 $(document).ready(function() {...}) 结构内的 jQuery 中进行定位。

在字里行间阅读，我想你可能想要更像这样的东西：

```
$(document).ready(function() {
    var $message = $('<div class="message">DONE</div>').hide();
    var $messageCont = $('<div class="message_cont" />').append($message).prependTo('body');
    $('input').on('click', function() {
        $messageCont.css({
            "left" : $(this).offset().left,
            "top" : $(this).offset().top
        }).find("div.message").fadeIn(200).delay(1500).fadeOut(function() {
            //code to clean up container
        });
    });
}); 
```

# android - 怎么看记忆的图片

> ID：15957274
> 
> 赞同：-3
> 
> 时间：2013-04-11T19:31:42.210
> 
> 标签：android

我正在创建一个“隐藏图片”应用程序，它将所选图片从图库复制到应用程序内存。它完美地工作并成功地将图像从图库复制到应用程序内存位置`/data/data/com.isummation.customgallery/files/`，并以`ListView`. 但是，我想在文件夹视图中显示图像，如下图：

![在此处输入图像描述](https://i.stack.imgur.com/dzkNv.jpg)

我该怎么做才能达到这个效果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T20:12:08.937

尝试这个：

```
Intent intent = new Intent();
intent.setType("image/*");
intent.setAction(Intent.ACTION_GET_CONTENT);
startActivityForResult(
        Intent.createChooser(intent, "Select Picture"),
        SELECT_PICTURE);

@Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        switch (requestCode) {
        case SELECT_PICTURE: {
            if (resultCode == RESULT_OK) {
                Uri selectedImageUri = data.getData();
                mCurrentPhotoPath = getPath(selectedImageUri);
                handlePhotoSelected();
            }
            break;
        } // SELECT_PICTURE

        } // switch
    } 
```

# android - 使用 Android WebView 进行 PayPal 结帐

> ID：15957275
> 
> 赞同：2
> 
> 时间：2013-04-11T19:31:49.693
> 
> 标签：android, android-webview, paypal

由于业务原因，我无法使用 paypal SDK（Express Checkout Library），所以我需要通过 webView 实现结帐。我需要知道如何传递 url（基于交易代码、价格、用户电子邮件等参数）以及如何在重定向页面后返回应用程序。

这是我的代码：

```
public class PayPalHandler extends Activity {
//The reference token that we get from initializing the MECL library
public static String _deviceReferenceToken;
private TextView mResultText;
private CheckoutButton mCheckoutButton;
private WebView _webView;

@Override
public void onCreate(Bundle savedInstanceState) {
    super .onCreate(savedInstanceState);
    setContentView(R.layout.paypal);
    mResultText = (TextView) findViewById(R.id.tv_paypal);
    PayPalInitializer payPalInitializer = new PayPalInitializer(
            this );
    payPalInitializer.execute();
}

private class PayPalInitializer extends
        AsyncTask<Void, Void, Boolean> {

    private static final String APP_ID = "APP-80W284485P519543T";
    private Context mContext;
    private ProgressDialog mProgressDialog;

    public PayPalInitializer(Context context) {
        mContext = context;
    }

    @Override
    protected void onPreExecute() {
        super .onPreExecute();
        mProgressDialog = new ProgressDialog(mContext);
        mProgressDialog
                .setMessage("Loading...");
        mProgressDialog.show();

    }

    @Override
    protected Boolean doInBackground(Void... params) {
        boolean success = false;
        PayPal payPal = PayPal.getInstance();
        if (payPal == null) {
            payPal = PayPal.initWithAppID(mContext, APP_ID,PayPal.ENV_SANDBOX);
            payPal.setLanguage("en_US");

            if (payPal.isLibraryInitialized()) {
                success = true;
            }
        }
        return success;
    }

    @Override
    protected void onPostExecute(Boolean result) {
        super .onPostExecute(result);
        mProgressDialog.hide();
        mProgressDialog = null;
        if (result) {
            setupButton();
        } else {
            setupButton();
            //mResultText.setText("Done!");
        }
    }
};

private void setupButton() {
    TableRow row = (TableRow) findViewById(R.id.row_paypal);
    PayPal payPal = PayPal.getInstance();

    mCheckoutButton = payPal.getCheckoutButton(this , PayPal.BUTTON_194x37, CheckoutButton.TEXT_PAY);
    mCheckoutButton .setOnClickListener(mCheckoutButtonOnClickListener);
    row.addView(mCheckoutButton);
}

private static final int request = 1;
private View.OnClickListener mCheckoutButtonOnClickListener = new View.OnClickListener() {

    private SharedPreferences settings;
    UserUtil user = new UserUtil(PayPalHandler.this);

    @Override
    public void onClick(View v) {
        settings = getSharedPreferences(Constants.SETTINGS_FILE_NAME, Context.MODE_PRIVATE);
        Intent intent = getIntent();
        String name = intent.getStringExtra("name");
        String price = intent.getStringExtra("price");
        String dealCode = intent.getStringExtra("dealCode");
        String token=PayPalHandler._deviceReferenceToken;
        String currentSecurityToken = settings.getString(Constants.SECURITY_TOKEN, null);
        String os = "Android";
        String provider = "paypal";
        String caltureCode = "he-IL";
        String phoneModel = android.os.Build.MODEL;
        String androidVersion = android.os.Build.VERSION.RELEASE;
        double lat = user.getSelfLocation().getLatitude();
        double lon = user.getSelfLocation().getLongitude();

        // here i need to built the string according to parameters like deal code, email, deal title etc

        String buf = "http://api.gooz.co.il/beginpurchase.ashx?request=%7b%22ReturnUrl%22%3a%22http%3a%2f%2flocalhost%3a1295%2fSALI.Server.Web.he-IL%2fThanks.aspx%3fDealCode%3d4%22%2c%22CancelUrl%22%3a%22http%3a%2f%2flocalhost%3a1295%2fSALI.Server.Web.he-IL%2fDealInfo.aspx%3fDealCode%3d4%22%2c%22DealUrl%22%3a%22http%3a%2f%2flocalhost%3a1295%2fSALI.Server.Web.he-IL%2fDealInfo.aspx%3fDealCode%3d4%22%2c%22ShopperEmail%22%3a%22sagi.baron76%40gmail.com%22%2c%22CultureCode%22%3a%22he-IL%22%2c%22Device%22%3a%22android%22%2c%22Provider%22%3a%22paypal%22%2c%22ForceJson%22%3afalse%2c%22PurchaseArgs%22%3a%5b%7b%22DealCode%22%3a%224%22%2c%22Quantity%22%3a%221%22%2c%22PaymentNumber%22%3a%221%22%7d%5d%7d";

        //Construct the WebView
        _webView = new WebView(getApplicationContext());

        WebViewClient webClient = new WebViewClient()
           {
               // Override page so it's load on my view only
               @Override
               public boolean shouldOverrideUrlLoading(WebView  view, String  url)
               {
                return false;
               }
           };
        //Set our view to the WebView
        _webView.getSettings().setJavaScriptEnabled(true);
        setContentView(_webView);

        _webView.setWebViewClient(webClient);
        _webView.requestFocusFromTouch();
        _webView.loadUrl(buf);

    }
}; 
```

}

# asp.net-mvc - 日期格式不起作用 - Telerik 网格详细信息

> ID：15957278
> 
> 赞同：1
> 
> 时间：2013-04-11T19:31:53.283
> 
> 标签：asp.net-mvc, format, telerik-grid

我希望这很容易。我用谷歌搜索并浏览了论坛，找不到可靠的答案。一个答案是添加日历 js 文件，但这似乎不起作用。

查看下面突出显示的代码。定义格式的前 2 个为空白，*不应为*. 当我只需要“MM/dd/yyyy”时，接下来的 2 个具有真正的长日期格式。哎呀！

```
<%= Html.Telerik().Grid<ViewModelProcurementAction>(Model.ProcurementActions) // 
        .Name("ProcurementActionGrid")
            .DetailView(details => details.ClientTemplate(
                Html.Telerik()
                    .TabStrip()
                    .Name("TabStrip_<#= Id #>")
                    .SelectedIndex(0)
                    .Items(items =>
                        {
                            items.Add().Text("Additional Info").Content(
                                "<table>" +
                                    "<tr>" +
                                        "<td style='vertical-align: top'>" +
                                            "<b>Summary Description:</b><br/><#= SummaryDescription #>" +
                                        "</td>" +
                                        "<td style='vertical-align: top'>" +
                                            //"<ul>" +
                                            "<b>Modification Number:</b> <#= ModificationNumber #><br/>" +
                                            "<b>Funding Type:</b> <#= FundingTypeName #><br/>" +
                                            "<b>Department Name:</b> <#= DepartmentName #><br/>" +
                                            "<b>Solicitation Type:</b> <#= SolicitationTypeName #><br/>" +
                                            "<b>Date Entered:</b> <#= $.telerik.formatString('{0:d}', DateEntered) #><br/>" +
                                            //"</ul>" +
                                        "</td>" +
                                        "<td style='vertical-align: top'>" +
                                            "<b>FY12:</b> <#= $.telerik.formatString('{0:c0}', FyByKey[\"FY12\"]==null ? 0 : FyByKey[\"FY12\"]) #><br/>" +
                                            "<b>FY13: </b><#= $.telerik.formatString('{0:c0}', FyByKey[\"FY13\"]==null ? 0 : FyByKey[\"FY13\"]) #><br/>" +
                                            "<b>FY14: </b><#= $.telerik.formatString('{0:c0}', FyByKey[\"FY14\"]==null ? 0 : FyByKey[\"FY14\"]) #><br/>" +
                                            "<b>FY15: </b><#= $.telerik.formatString('{0:c0}', FyByKey[\"FY15\"]==null ? 0 : FyByKey[\"FY15\"]) #><br/>" +
                                            "<b>FY16: </b><#= $.telerik.formatString('{0:c0}', FyByKey[\"FY16\"]==null ? 0 : FyByKey[\"FY16\"]) #><br/>" +
                                            "<b>FY17: </b><#= $.telerik.formatString('{0:c0}', FyByKey[\"FY17\"]==null ? 0 : FyByKey[\"FY17\"]) #><br/>" +
                                            "<b>Out Year Funding: </b><#= $.telerik.formatString('{0:c0}', OutYearFunding==null ? 0 : OutYearFunding ) #><br/>" +
                                        "</td>" +
                                        "<td style='vertical-align: top'>" +
                                            "<b>DBE %: </b><#= $.telerik.formatString('{0:0}', DBE==null ? 0 : DBE) #><br/>" +
                                            "<b>Amount Exceeds: </b><#= AmountExceeds #><br/>" +
//--------------------------------------------------------------------------------
                                            "<b>Cost/Price Analysis Date: </b><#= $.telerik.formatString('{0:MM/dd/yyyy}', CostPriceAnalysisDate==null ? '' : CostPriceAnalysisDate) #><br/>" +
                                            "<b>OIG Review Completion Date: </b><#= $.telerik.formatString('{0:shortDate}', OIGReviewCompletionDate==null ? '' : OIGReviewCompletionDate) #><br/>" +
                                            "<b>Required Procurement Initiation Date: </b><#= RequiredProcurementInitiationDate #><br/>" +
                                            "<b>Required Date of Award: </b><#= RequiredDateOfAward #><br/>" +
//--------------------------------------------------------------------------------
                                            "<b>Number of Option Years: </b><#= NumberOfOptionYears #><br/>" +
                                            "<b>Budget Approval: </b><#= BudgetApproval #><br/>" +
                                            "<b>Point of Contact: </b><#= PointOfContact #><br/>" +
                                        "</td>" +
                                        "<td style='vertical-align: top'>" +
                                            "<b>PRMT Group: </b><#= PRMTGroupName #><br/>" +
                                            "<b>Planned CA Responsible: </b><#= PlannedCAResponsibleFullName #><br/>" +
                                            "<b>Value of Option Years: </b><#= $.telerik.formatString('{0:0}', ValueOfOptionYears==null ? 0 : ValueOfOptionYears) #><br/>" +
                                            "<b>Award Amount: </b><#= $.telerik.formatString('{0:0}', AwardAmount==null ? 0 : AwardAmount) #><br/>" +
                                            "<b>Awarded Vendor: </b><#= AwardedVendor #><br/>" +
                                            "<b>Multiple Year Funding: </b><#= MultipleYearFunding #><br/>" +
                                            "<b>Period of Performance: </b><#= $.telerik.formatString('{0}{1}{2}', PeriodOfPerformanceStartDate==null ? '' : PeriodOfPerformanceStartDate, PeriodOfPerformanceEndDate==null ? '' : ' - ', PeriodOfPerformanceEndDate==null ? '' : PeriodOfPerformanceEndDate) #><br/>" +
                                            "<b>Comments: </b><#= Comments #><br/>" +
                                        "</td>" +
                                    "</tr>" +
                                "</table>"
                                );
                            items.Add().Text("Purchase of Materials").Content(
                                "<br/><input type='checkbox' disabled='disabled' name='AwaitingProcurementPackEnabled' <#= AwaitingProcurementPackEnabled ? checked='checked' : '' #> /> <b>Awaiting Procurement pack from Point of Contact</b><br/>" +
                                Html.Telerik()
                                    .Grid<ViewModelProcurementActivity>()
                                    .Name("ActionGrid_<#= Id #>")
                                    .Footer(false)
                                    .Columns(c =>
                                        {
                                            c.Command(commands =>
                                            {
                                                commands.Edit().ButtonType(GridButtonType.ImageAndText);
                                            }).Title("Actions").Width(120);
                                            c.Bound(e => e.ActivityId).Visible(false);
                                            c.Bound(e => e.Activity);
                                            c.Bound(e => e.OriginalPlannedDate);
                                            c.Bound(e => e.CurrentPlannedDate);
                                            c.Bound(e => e.ActualDate);
                                            c.Bound(e => e.ReasonForDateChange);
                                        })
                                    .DataBinding(dataBinding =>
                                        dataBinding.Ajax()
                                        .Select("AjaxGetActionDatesFor", "ProcurementActions", new { procurementActionId = "<#= Id #>" })
                                        .Update("AjaxUpdateActionDatesFor", "ProcurementActions")
                                        .Enabled(true)
                                        )
                                    .DataKeys(keys => keys.Add(c => c.ActivityId))
                                    .Editable(editing => editing.Mode(GridEditMode.InLine)
                                    )
                                    .Selectable()
                                    .ToHtmlString()
                                );
                        })
                    .ToHtmlString()
            ))
        .Columns(c =>
            {
                c.Command(commands =>
                    {
                        commands.Edit().ButtonType(GridButtonType.ImageAndText);
                        commands.Delete().ButtonType(GridButtonType.ImageAndText);
                        commands.Custom("showHistory")
                                .ButtonType(GridButtonType.ImageAndText)
                                .Text("History")
                                .Action("Show", "ProcurementActions")
                                .DataRouteValues(route => { route.Add(o => o.Id).RouteKey("id"); });
                    }).Title("Actions").Width(100);
                c.Bound(e => e.Id).Visible(false);
                c.Bound(e => e.ActionId).Visible(false);
                c.Bound(e => e.ContractNumber).HtmlAttributes(new {style = "vertical-align: top"});
                c.Bound(e => e.ContractManager).Width(120).HtmlAttributes(new {style = "vertical-align: top"});
                c.Bound(e => e.ActualCAResponsible).Width(150).HtmlAttributes(new {style = "vertical-align: top"});
                c.Bound(e => e.TitleOfRequirement).HtmlAttributes(new {style = "vertical-align: top"});
                c.Bound(e => e.CipOrName).Title("Project Id").HtmlAttributes(new {style = "vertical-align: top"});
                c.Bound(e => e.RecordTypeName).Title("Record Type").HtmlAttributes(new {style = "vertical-align: top"});
                c.Bound(e => e.FullContractType).Title("Contract Type").HtmlAttributes(new { style = "vertical-align: top" });
                c.Bound(e => e.ProcurementActionYearDisplayName).Title("Plan FY").HtmlAttributes(new { style = "vertical-align: top" });
            })
        .DataKeys(keys => keys.Add(o => o.Id))
        .DataBinding(dataBinding =>
                     dataBinding.Ajax()
                       .OperationMode(GridOperationMode.Client)
                       .Select("AjaxGetAll", "ProcurementActions") //, new { procurementActionId = "<#= CurrentAction #>" })
                       .Update("AjaxUpdate", "ProcurementActions")
                       .Delete("AjaxDelete", "ProcurementActions")
                       .Enabled(true)
        )
        .Editable(editing => 
            editing.Mode(GridEditMode.PopUp)
                   .TemplateName("EditProcurementAction")
                   //? .AdditionalViewData(new { ListAllProcurementActionDateTypes = Model.AllProcurementActionDateTypes })
                   //? .AdditionalViewData(Model.AllUsers)
                   //? .AdditionalViewData(Model.ContractTypes)
                   //? .AdditionalViewData(Model.FundingTypes)
            )
        .Pageable(paging => paging.PageSize(15))
        .Scrollable(scrolling => scrolling.Height(500))
        .Filterable()
        .Sortable()
%>    

At the end of my file I changed this:
<%= Html.Telerik().ScriptRegistrar() %>

To this:
<%= Html.Telerik()
        .ScriptRegistrar() 
        .DefaultGroup(group => group.Add("telerik.common.js")
                                    .Add("telerik.calendar.js")
                                    .Add("telerik.datepicker.js")
                                    .Add("telerik.textbox.js"))
%> 
```

依然没有。

我今天（最后一次）试图提供这个，并且正在为格式化而烦恼。

有什么想法吗？

-kb

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-12T16:53:15.703

所以我终于在 ClientTemplate 中找到了如何正确执行此操作：

```
"<b>Cost/Price Analysis Date: </b><#= $.telerik.formatString('{0:MM/dd/yyyy}', CostPriceAnalysisDate==null ? \"\" : CostPriceAnalysisDate) #><br/>" +
"<b>OIG Review Completion Date: </b><#= $.telerik.formatString('{0:MM/dd/yyyy}', OIGReviewCompletionDate==null ? \"\" : OIGReviewCompletionDate) #><br/>" +
"<b>Required Procurement Initiation Date: </b><#= $.telerik.formatString('{0:MM/dd/yyyy}', RequiredProcurementInitiationDate==null ? \"\" : RequiredProcurementInitiationDate) #><br/>" +
"<b>Required Date of Award: </b><#= $.telerik.formatString('{0:MM/dd/yyyy}', RequiredDateOfAward==null ? \"\" : RequiredDateOfAward) #><br/>" + 
```

您需要调用**$.telerik.formatString(...)**

# playframework-2.1 - 播放框架 2.1 NoSuchFieldError

> ID：15957280
> 
> 赞同：0
> 
> 时间：2013-04-11T19:32:03.557
> 
> 标签：playframework-2.1

我有一个功能齐全的 Java Play 2.0.4 应用程序工作得很好，我正在尝试迁移到 2.1

我遵循了[迁移指南](http://www.playframework.com/documentation/2.1.0/Migration)并实施了所有更改。该应用程序编译并正确启动。但是，当我尝试访问任何页面时，我得到`NoSuchFieldError`：

```
play.api.Application$$anon$1: Execution exception[[RuntimeException: java.lang.NoSuchFieldError: Application]] 
```

当然，`Application`控制器存在并且路由是在其中定义的`conf/routes`（就像在工作 2.0.4 版本上迁移之前一样）。

从堆栈跟踪中，我怀疑它与路由器有关。这是完整的跟踪：

```
play.api.Application$$anon$1: Execution exception[[RuntimeException: java.lang.NoSuchFieldError: Application]]
at play.api.Application$class.handleError(Application.scala:289) ~[play_2.10.jar:2.1.0]
at play.api.DefaultApplication.handleError(Application.scala:383) [play_2.10.jar:2.1.0]
at play.core.server.netty.PlayDefaultUpstreamHandler$$anon$2$$anonfun$handle$1.apply(PlayDefaultUpstreamHandler.scala:132) [play_2.10.jar:2.1.0]
at play.core.server.netty.PlayDefaultUpstreamHandler$$anon$2$$anonfun$handle$1.apply(PlayDefaultUpstreamHandler.scala:128) [play_2.10.jar:2.1.0]
at play.api.libs.concurrent.PlayPromise$$anonfun$extend1$1.apply(Promise.scala:113) [play_2.10.jar:2.1.0]
at play.api.libs.concurrent.PlayPromise$$anonfun$extend1$1.apply(Promise.scala:113) [play_2.10.jar:2.1.0]
java.lang.RuntimeException: java.lang.NoSuchFieldError: Application
at play.libs.F$Promise$6.apply(F.java:401) ~[play_2.10.jar:2.1.0]
at scala.concurrent.Future$$anonfun$map$1.liftedTree2$1(Future.scala:253) ~[scala-library.jar:na]
at scala.concurrent.Future$$anonfun$map$1.apply(Future.scala:249) ~[scala-library.jar:na]
at scala.concurrent.Future$$anonfun$map$1.apply(Future.scala:249) ~[scala-library.jar:na]
at scala.concurrent.impl.CallbackRunnable.run(Promise.scala:29) ~[scala-library.jar:na]
at akka.dispatch.BatchingExecutor$Batch$$anonfun$run$1.liftedTree1$1(BatchingExecutor.scala:67) ~[akka-actor_2.10.jar:na]
Caused by: java.lang.NoSuchFieldError: Application
at views.html.login$.apply(login.template.scala:54) ~[na:na]
at views.html.login$.render(login.template.scala:109) ~[na:na]
at views.html.login.render(login.template.scala) ~[na:na]
at controllers.Application.login(Application.java:38) ~[na:na]
at Routes$$anonfun$routes$1$$anonfun$applyOrElse$1$$anonfun$apply$1.apply(routes_routing.scala:241) ~[na:na]
at Routes$$anonfun$routes$1$$anonfun$applyOrElse$1$$anonfun$apply$1.apply(routes_routing.scala:241) ~[na:na] 
```

这是我的`Build.scala`文件：

```
import sbt._
import Keys._
import play.Project._

object ApplicationBuild extends Build {

    val appName         = "rossirixweb"
    val appVersion      = "1.0-SNAPSHOT"

    val appDependencies = Seq(
        javaCore,
        javaJdbc,
        javaEbean,
        "org.apache.xmlrpc" % "xmlrpc" % "3.0",
        "commons-httpclient" % "commons-httpclient" % "3.1",
        "com.google.code.gson" % "gson" % "2.2.2",
        "junit" % "junit" % "4.11",
        "org.mongodb" % "mongo-java-driver" % "2.8.0",
        "org.jongo" % "jongo" % "0.3",
        "mysql" % "mysql-connector-java" % "5.1.22",
        "com.typesafe" %% "play-plugins-mailer" % "2.1.0",
        "be.objectify" %% "deadbolt-java" % "2.1-RC2"
    )

    val main = play.Project(appName, appVersion, appDependencies).settings(
        resolvers += Resolver.url("My GitHub Play Repository", url("http://alexanderjarvis.github.com/releases/"))(Resolver.ivyStylePatterns),
        resolvers += Resolver.url("Objectify Play Repository", url("http://schaloner.github.com/releases/"))(Resolver.ivyStylePatterns),
        resolvers += Resolver.url("Objectify Play Snapshot Repository", url("http://schaloner.github.com/snapshots/"))(Resolver.ivyStylePatterns)
    )
} 
```

我无法启动并运行该应用程序。

有任何想法吗？谢谢！

**更新：**我添加了完整`Build.scala`文件以供参考。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-21T06:47:10.700

此问题与此 Play Framework Bug 有关：[https ://github.com/playframework/Play20/issues/822](https://github.com/playframework/Play20/issues/822)

基本上，类加载器在 DEV 和 PROD 中的行为不同

请转到错误报告并表示您对修复它的支持。

# mpi - 使用 MPI_Isend 向多个处理器发送相同消息的标准方法是什么？

> ID：15957282
> 
> 赞同：1
> 
> 时间：2013-04-11T19:32:13.227
> 
> 标签：mpi

我最初使用 MPI_Send 与 MPI_Irecv 配对，但我最近发现 MPI_Send 可能会阻塞，直到收到消息。因此，我将更改为 MPI_Isend，我需要将相同的消息发送到 N 个不同的处理器。假设缓冲区稍后会被破坏，我应该在循环中有一个带有 MPI_Isend 和 MPI_Wait 的 for 循环，还是应该在循环后使用 MPI_Waitall 制作一个请求数组并且只有 MPI_Isend 在循环中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T19:36:24.847

由于它的消息相同，您应该能够使用[MPI_Bcast](http://www.mcs.anl.gov/research/projects/mpi/www/www3/MPI_Bcast.html)。您只需要创建一个新的通信器来定义一个进程子组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T15:27:21.120

为了将相同的缓冲区分配给“n”个远程队列，MPI_Bcast 是“显而易见的”选择。除非您有一些“压倒性”的理由来避免使用 MPI_Bcast，否则建议使用它。通常，所有主要 MPI 实现都对 MPI_Bcast 进行了很好的优化。

如果阻塞是一个问题，MPI 3.0 标准引入了 MPI_IBcast 以及其他非阻塞集合。非阻塞集合的初始实现似乎是“幼稚的”，并且构建为非阻塞点对点例程的包装器（例如，MPI_IBcast 被实现为对 MPI_ISend 和 MPI_IRecv 调用的包装器）。在接下来的一两年内，实施的质量可能会有所提高——部分取决于 MPI 应用程序开发人员社区的采用速度。

MPI_Send 将“阻塞”，直到调用应用程序可以安全地重新使用发送缓冲区。对相应 MPI_[I]Recv 的状态没有任何保证。

如果您需要非阻塞，那么最好的建议是在循环中调用 MPI_ISend。或者，持久请求可以与 MPI_Start 或 MPI_Startall 一起使用，如果这是一个将在程序过程中重复的消息模式。 [持续的通信请求。](http://www.mpi-forum.org/docs/mpi-11-html/node51.html)

# java-native-interface - 将 jByteArray 转换为 .NET byte[ ] 时遇到问题

> ID：15957295
> 
> 赞同：0
> 
> 时间：2013-04-11T19:32:56.417
> 
> 标签：java-native-interface, c++-cli

我在使用 JNI 时遇到问题，并且已经在这个问题上停留了很长一段时间。我之前已经发布过这个问题，但从未收到答案，并且从现在到那时做了很多研究。

我的 JNI 签名：

```
JNIEXPORT void JNICALL Java_MyApplet_invokeManager(JNIEnv *jniEnvPtr, jobject javaObj, jbyteArray encodedData) 
```

我的一些代码：

```
boolean isCopy;
jbyte* bytes = jniEnvPtr->GetByteArrayElements(encodedData, &isCopy);
jniEnvPtr->ReleaseByteArrayElements(encodedData, bytes, JNI_ABORT);
myManager->ShowQueue(encodedData); 
```

错误信息：

```
error C2664: 'MyModule::JniToManaged::ShowFormQueue' : cannot convert parameter 2 from 'jbyte *' to 'cli::array<Type,dimension> ^' 
```

我找不到将其转换为我需要传递的 C# byte[] 的方法。我听说过要转换 jbyte* 对象，但不知道如何将其转换为正确的格式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T15:00:42.617

我想出了如何将 jbytearray 转换为 cli::array。这是代码：

```
jbytearray jArray; //my array
jint len = jniEnvPtr->GetArrayLength(jArray); //get length

boolean isCopy;
jbyte* b = jniEnvPtr->GetByteArrayElements(jArray, &isCopy); //get pointer 
array<byte, 1> ^myArray = gcnew array<byte, 1>(len); //create the cli::array

//loop through jbytearray and copy elements into our cli::array
for(int i = 0; i < len; i++)
{
    myArray[i] = b[i];
}
jniEnvPtr->ReleaseByteArrayElements(jArray, b, JNI_ABORT); // release 
```

我还必须将 jstring 转换为 System::String^...

```
jboolean blnIsCopy;
jstring jstrOutput;

//jstring to char*
const char* strA = (jniEnvPtr)->GetStringUTFChars(theJString, &blnIsCopy);

//char* to std::string
std::string standardStr(strA);

//std:string to System::String^
System::String^ str2 = gcnew System::String(standardStr.c_str())
MessageBox(NULL, standardStr.c_str(), "Report Name!", MB_OK);
jniEnvPtr->ReleaseStringUTFChars(theJString, strA); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-11T21:58:19.707

如果没有答案，则意味着 (a) 没人知道，(b) 没人关心（在 C++ 下发布 .net 内容是到达那里的可靠方法。发布应该易于修复的错误消息是另一种方式。），或（c）可能是“OP到底想做什么？！这没有任何意义。不，没有头也没有尾。继续……”

# python - Python 3.3：无效语法错误

> ID：15957298
> 
> 赞同：0
> 
> 时间：2013-04-11T19:33:03.257
> 
> 标签：python, python-3.x, syntax-error

我很困惑为什么我在这个程序中得到一个无效的语法错误。我想这很简单，但我对此很陌生。这是整个事情：

```
# Welcome Message
print ("Hello and welcome to the Plesha EasyTube Wizard!")
print ("Today we will be gathering measurements from you to determine the \
materials and cost of your tubes.")
print ("All measurements should be in centimeters!")
print ()

# Collect user inputs
height = float(input("Let's begin: What is the height of you desired tube? "))
radius = float(input("And what is the radius? "))
count = int(input("How many would you like? "))

# Set Constants
steelPrice = 0.14
rubberPrice = 0.02

# Calculations
import math
singleTubeVol = math.pi * (radius ** 2) * height
allTubeVol = singleTubeVol * count
singleTubeSurface = (2 * math.pi * (radius ** 2)) + (2 * math.pi * radius * height)
allTubeSurface = singleTubeSurface * count
singleTubeRubber = 2 * math.pi * (radius + 0.5) * height
allTubeRubber = singleTubeRubber * count
steelCost = steelPrice * allTubeSurface
rubberCost = rubberPrice * allTubeRubber
totalCost = rubberCost + steelCost

# Output
                                                      V------ here is where the problem is
print ("You wanted ", count " tubes in the dimesions ", height \
   " centimeters by ", radius " centimeters (radius).")
print ("The volume of a single tube of your specifications is: ", singleTubeVol)
print ("The total volume of your tube order will be ", allTubeVol)
print ("You will require ", allTubeSurface " square centimeters of steel. Totalling "\
   , steelCost "in price." )
print ("You will require ", allTubeRubber " square centimeters of rubber. Totalling "\
   , rubberCost " in price." )
print ("Your total cost for this order will be ", totalCost) 
```

我感谢任何对新手的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T19:34:36.347

您忘记了几个逗号：

```
print ("You wanted ", count, " tubes in the dimesions ", height,
#                     -----^                              -----^ 
```

以及下一行的更多内容：

```
 " centimeters by ", radius, " centimeters (radius).")
#                       -----^
print ("The volume of a single tube of your specifications is: ", singleTubeVol)
print ("The total volume of your tube order will be ", allTubeVol)
print ("You will require ", allTubeSurface, " square centimeters of steel. Totalling "
#                                    -----^
   , steelCost, "in price." )
#        -----^
print ("You will require ", allTubeRubber, " square centimeters of rubber. Totalling "
#                                   -----^
   , rubberCost, " in price." )
#         -----^ 
```

如果您使用格式，我会更好：

```
print("""\
You wanted {count} tubes in the dimesions {height:0.2f} centimeters by {radius:0.2f} centimeters (radius).
The volume of a single tube of your specifications is: {singleTubeVol:0.2f}
The total volume of your tube order will be {allTubeVol:0.2f}
You will require {allTubeSurface:0.2f} square centimeters of steel. Totalling {steelCost:0.2f} in price.
You will require {allTubeRubber:0.2f} square centimeters of rubber. Totalling {rubberCost:0.2f} in price.
Your total cost for this order will be {totalCost:0.2f}""".format(**locals())) 
```

这使用[`str.format()`方法](http://docs.python.org/3/library/stdtypes.html#str.format)，结合`"""`三重引号字符串一次性格式化文本，用小数点后两位小数格式化浮点值。

样本输出：

```
Hello and welcome to the Plesha EasyTube Wizard!
Today we will be gathering measurements from you to determine the materials and cost of your tubes.
All measurements should be in centimeters!

Let's begin: What is the height of you desired tube? 10
And what is the radius? 2.5
How many would you like? 3
You wanted 3 tubes in the dimesions 10.00 centimeters by 2.50 centimeters (radius).
The volume of a single tube of your specifications is: 196.35
The total volume of your tube order will be 589.05
You will require 589.05 square centimeters of steel. Totalling 82.47 in price.
You will require 565.49 square centimeters of rubber. Totalling 11.31 in price.
Your total cost for this order will be 93.78 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T19:55:43.467

您使用的引用可能很棘手，因此您最好尝试格式化打印参数，这样的事情会有所改进：

```
 # Output ------ here is where the problem is
print ("You wanted %d tubes in the dimesions %d centimeters by %d centimeters (%d)." %(count, height, radius, radius))
print ("The volume of a single tube of your specifications is: ", singleTubeVol)
print ("The total volume of your tube order will be ", allTubeVol)
print ("You will require %d square centimeters of steel. Totalling %d in price." %(allTubeSurface, steelCost))
print ("You will require %d square centimeters of rubber. Totalling %d in price." %(allTubeRubber, rubberCost) )
print ("Your total cost for this order will be ", totalCost) 
```

我仍然确信有一个更好的解决方案。

# c++ - c++/qt 中用于 google-drive 的 API 和工具

> ID：15957300
> 
> 赞同：4
> 
> 时间：2013-04-11T19:33:11.977
> 
> 标签：c++, api, qt

在 C++/Qt 中是否有任何用于 google-drive 的 API 或任何像 Insync 这样免费使用并可用于在 google-drive 上访问和管理的工具。我曾尝试使用 ics 的 qt-google-drive，但它仍在开发中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T20:02:38.910

您基本上可以从任何可以生成 HTTP 请求的东西中使用 Google Drive（并且，显然，使用回复数据）。

[Google Drive SDK](https://developers.google.com/drive/)不包含任何用 C++ 编写的示例，但正如您在参考部分中看到的那样，[这](https://developers.google.com/drive/v2/reference/)一切都是通过相当普通的 HTTP GET、POST 等完成的。

# redis - Redis 立即崩溃而没有错误

> ID：15957301
> 
> 赞同：4
> 
> 时间：2013-04-11T19:33:12.133
> 
> 标签：redis

我的虚拟机上安装了redis，有一段时间没用了。（上次我使用它，它确实有效，但现在它没有......在那段时间（大约一个月）没有任何改变）。不用说我很困惑，但我会尽可能多地发布信息。

`$ redis-server`

服务器启动，但会发出关于过度使用内存设置为 0 的警告。我在虚拟机上，所以如果我愿意，我无法将此设置从 0 更改为 1，无论如何我都不想这样做。不过，我已经编写了一个自定义`redis.config`文件，我希望它使用（并且我过去使用过），因此使用默认配置文件启动它对我没有多大好处。让我们再试一次。

```
$ redis-server redis.config
$ 
```

没有什么。安静。没有错误信息，只是没有启动。

`$ nohup redis-server redis.config > nohup.out&`

我得到一个进程 ID，但随后`$ ps`我看到该进程被列为`stop`并很快消失。同样，没有错误，nohup.out 和 redis 的日志文件中也没有输出。下面是我正在使用的 redis.config（没有注释以保持简短）

```
daemonize yes
pidfile [my-user-account-path]/redis/redis.pid
port 0
bind 127.0.0.1
unixsocket [my-user-account-path]/tmp/redis.sock
unixsocketperm 770
timeout 10
tcp-keepalive 60
loglevel warning
logfile [my-user-account-path]/redis/logs/redis.log
databases 16
save 900 1
save 300 10
save 60 10000
stop-writes-on-bgsave-error no
rdbcompression no
rdbchecksum no
dbfilename dump.rdb
dir [my-user-account-path]/redis/db
slave-serve-stale-data yes
slave-priority 100
appendonly no
lua-time-limit 5000
slowlog-log-slower-than 10000
slowlog-max-len 128

# ADVANCED CONFIG is set to all default settings# 
```

我敢肯定这可能是愚蠢的，甚至可能是某个地方的权限问题（我尝试以 root 身份执行此操作，仅供参考），但无济于事。任何人都经历过与 Redis 类似的事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-22T16:31:23.467

我也经历过redis崩溃。仅供参考 - 负责 redis 大部分开发的人 Salvatore Sanfilippo，又名 antirez，保留了一个有趣的博客，其中对 redis 崩溃有一些见解：

[http://antirez.com/news/43](http://antirez.com/news/43)

# javascript - 两个，几乎相同的代码行具有不同的结果？

> ID：15957303
> 
> 赞同：0
> 
> 时间：2013-04-11T19:33:33.937
> 
> 标签：javascript, html, arrays

我正在学习如何为 Web 开发编写代码，但遇到了问题。两行几乎相同的代码给了我不同的结果：

```
for(i=0; i<=lunarSpells.length; i++){
    document.getElementById(lunarSpells[i]).innerHTML =
    Math.ceil(xpLeft/document.getElementById(lunarSpells[i]+"XP").innerHTML);   
}
for(i=0; i<=standardSpells.length; i++){
    document.getElementById(standardSpells[i]).innerHTML =
    Math.ceil(xpLeft/document.getElementById(standardSpells[i]+"XP").innerHTML);    
} 
```

不确定它的重要性，但想法是从数组中取出一个元素，在文档中找到它，然后相应地填写表格。以下是数组：

```
var lunarSpells = ["cureOther", "NPCContact", "curePlant", "monsterExamine", "bakePie", "cureMe", "TGMoonclan",
                            "TPMoonclan", "TGBarbarian", "superglass", "TPKhazard", "TGKhazard", "dream", "stringJewellery",
                            "statRestorePotShare", "statSpy", "TPBarbarian", "TPWaterbirth", "cureGroup", "TGWaterbirth", "humidify",
                            "hunterKit", "fertileSoil", "plankMake", "TPCatherby", "TGFishingGuild", "TGCatherby", 
                            "boostPotionShare", "TPIcePlateau", "energyTransfer", "healOther", "TGIcePlateau", "vengeanceOther",
                            "vengeance", "healGroup", "spellbookSwap", "magicImbue", "TPFishingGuild"]

var standardSpells = ["confuse", "sapphire", "weaken", "bananas", "curse", "lowAlch", "TPVarrock", "emerald", "TPLumbridge", "TPFalador", "TPHouse",
                                "superheat", "TPCamelot", "ruby", "TPArdougne", "highAlch", "earth", "water", "diamond", "TPWatchtower", 
                                "peaches", "TPTrollheim", "fire", "TPApe", "vulnerability", "air", "dragonstone", "enfeeble", "TOLumbridge", "stun", 
                                "TOFalador", "onyx", "TOCamelot"] 
```

所以我的问题是，为什么 lunarspells 变量有效，而standardspells 变量无效？非常感谢任何帮助，因为我对 HTML 和 JS 还是很陌生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T19:43:20.403

如前所述：

```
xpLeft/document.getElementById(lunarSpells[i]+"XP").innerHTML 
```

`document.getElementById("id_that_doesnt_exist")`如果评估为`null`(as `null.anything`is an error.)将失败。

这将停止`<script>`块中的所有进一步处理，除非您避免错误或换行`try`/ `catch`。

所以你的第二个循环不会被到达/执行。

# android - 使用 wifi/移动网络但不使用 GPS 的位置更新不正确

> ID：15957304
> 
> 赞同：1
> 
> 时间：2013-04-11T19:33:38.183
> 
> 标签：android, gps, location, android-wifi

以下是我从其他工作中获得的编码。我正在尝试通过在我的应用程序中进行必要的更改来实现他的一些工作。这里的问题是单击 GET ADDRESS 按钮时它没有返回正确的地址。此外，它仅适用于 wifi/移动网络，但不适用于 GPS。同时，我想知道如何在呼叫联系人时自动发布数据以切断。谢谢！

```
package com.yang.address;

import java.io.IOException;
import java.util.ArrayList;
import java.util.List;
import java.util.Locale;

import org.apache.http.HttpResponse;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.DefaultHttpClient;

import android.app.Activity;
import android.content.Context;
import android.location.Address;
import android.location.Geocoder;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.TextView;
import android.widget.Toast;

public class AddressActivity extends Activity {
    /** Called when the activity is first created. */
    Double lat, lon;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Button btnLocation = (Button)findViewById(R.id.btnLocation);
        btnLocation.setOnClickListener(new OnClickListener() {
            public void onClick(View arg0) {
                // Acquire a reference to the system Location Manager
                LocationManager locationManager = (LocationManager) AddressActivity.this.getSystemService(Context.LOCATION_SERVICE);
                // Define a listener that responds to location updates
                LocationListener locationListener = new LocationListener() {
                    public void onLocationChanged(Location location) {
                        // Called when a new location is found by the network location provider.
                        lat = location.getLatitude();
                        lon = location.getLongitude();
                        TextView tv = (TextView) findViewById(R.id.txtLoc);
                        tv.setText("Your Location is:" + lat + "--" + lon);
                    }

                    public void onStatusChanged(String provider, int status, Bundle extras) {}
                    public void onProviderEnabled(String provider) {}
                    public void onProviderDisabled(String provider) {}
                };
                // Register the listener with the Location Manager to receive location updates
                locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, locationListener);
            }
        });

        Button btnSend = (Button)findViewById(R.id.btnSend);
        btnSend.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                postData(lat, lon);
            }
        });

        Button btnAdd = (Button)findViewById(R.id.btnAddress);
        btnAdd.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                TextView tv = (TextView)findViewById(R.id.txtAddress);
                tv.setText(GetAddress(lat, lon));
            }
        });

    }

    public void postData(Double lat2, Double lon2) {
        // Create a new HttpClient and Post Header
        HttpClient httpclient = new DefaultHttpClient();
        HttpGet  htget = new HttpGet("http://myappurl.com/Home/Book/"+lat2+"/"+lon2);

        try {
            // Execute HTTP Post Request
            HttpResponse response = httpclient.execute(htget);
            String resp = response.getStatusLine().toString();
            Toast.makeText(this, resp, 5000).show();

        } catch (ClientProtocolException e) {
            Toast.makeText(this, "Error", 5000).show();
        } catch (IOException e) {
            Toast.makeText(this, "Error", 5000).show();
        }
    } 
    public String GetAddress(Double lat2, Double lon2)
    {
        Geocoder geocoder = new Geocoder(this, Locale.ENGLISH);
        String ret = "";
        try {
            List<Address> addresses = geocoder.getFromLocation(lat2,lon2, 1);
            if(addresses != null) {
                Address returnedAddress = addresses.get(0);
                StringBuilder strReturnedAddress = new StringBuilder("Address:\n");
                for(int i=0; i<returnedAddress.getMaxAddressLineIndex(); i++) {
                    strReturnedAddress.append(returnedAddress.getAddressLine(i)).append("\n");
                }
                ret = strReturnedAddress.toString();
            }
            else{
                ret = "No Address returned!";
            }
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
            ret = "Can't get Address!";
        }
        return ret;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T19:50:37.637

自上一个问题以来，您似乎取得了一些进展。

首先，`LocationManager`androids 上的系统是侦听服务，您将其注册为侦听器并允许操作系统在进行更新时通知。*这意味着您应该在需要之前*`OnClick`运行您放入方法中的代码。您最好的选择是让您的 Activity 方法在 Activity 启动时注册侦听器，并使用回调作为将新的存储在类变量中的一种方式。*`OnCreate``onLocationChanged``Location`*

 *```
private Location lastKnownLocation;
private TextView tv;

public void onCreate(Bundle savedInstanceState) {
  //....
  setupLocationServices();
  //....
  tv = (TextView) findViewById(R.id.txtLoc);
  Button btnLocation = (Button)findViewById(R.id.btnLocation);
  btnLocation.setOnClickListener(new OnClickListener() {
    public void onClick(View arg0) {
      updateLocation();
    }
  });
  //....
}

private void setupLocationServices() {
  //....
  LocationListener locationListener = new LocationListener() {
  public void onLocationChanged(Location location) {
    // Called when a new location is found by the network location provider.
    lastKnownLocation = location;
    updateLocation();
  }
  ....
}

private void updateLocation() {
  double lat = lastKnownLocation.getLatitude();
  double lat = lastKnownLocation.getLongitude();
  tv.setText("Your Location is:" + lat + "--" + lon);
} 
```

至于您为什么它不适用于 GPS 的原因是因为您从未注册 GPS 侦听器。你有这条线的地方：

```
locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, locationListener); 
```

您需要替换此值：

```
LocationManager.GPS_PROVIDER 
```

同样，正如我之前建议的那样，我真的建议花时间完全理解[Android 开发者文档](http://developer.android.com/guide/topics/location/strategies.html)

至于您关于收听来电状态的其他问题，您应该先查看[此处](http://developer.android.com/reference/android/telephony/TelephonyManager.html)`TelephonyManager`的文档。专门寻找来电的使用及其附加功能。对于拨出电话，谷歌使用Intents。`ACTION_PHONE_STATE_CHANGED``ACTION_NEW_OUTGOING_CALL`*

# sql - 如何从表中的列中选择一个值，动态使用其他表中的列名（反射）

> ID：15957307
> 
> 赞同：0
> 
> 时间：2013-04-11T19:33:48.357
> 
> 标签：sql, sql-server

我正在尝试根据像这样的另一个表中的列 ID 在具有多列的表中选择一个值

```
foo:
+-------+--------+--------+--------+
|  id   |  tag   | col1   |  col2  |
+-------+--------+--------+--------+
|   1   |   XX   |    1   |    2   |
+-------+--------+--------+--------+
bar:
+-------+--------+--------+
| id    | field  |  tag   |
+-------+--------+--------+
|   1   |  col1  |   XX   |
+-------+--------+--------+
|   2   |  col2  |   XX   |
+-------+--------+--------+ 
```

我想我正在寻找的是一种像反射这样的机制，我可以根据该属性的名称映射到一个属性值，而不必提前知道类或表，因为列会随着时间而变化，结果表应该是这样的

```
foobar:
+--------+--------+
|  tag   | value  |
--------++--------+
|   XX   |    1   |
--------++--------+
|   XX   |    2   |
--------++--------+ 
```

我尝试了类似下面的代码，但是它在两个结果列中都为我提供了列 ID，我需要该特定字段的值而不是列的名称。

```
declare @SQL nvarchar(max)
declare @Pattern nvarchar(100)

set @Pattern = 'select bar.field, ''foo.[COL_NAME]'' as CurrentValue FROM bar INNER JOIN foo ON foo.[tag] = bar.[tag]'

select @SQL = stuff((select ' union all '+replace(@Pattern, '[COL_NAME]', field)
                 from bar
                 for xml path(''), type).value('.', 'nvarchar(max)'), 1, 11, '')

exec (@SQL) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T20:28:27.110

不要以为用一条 SQL 语句就可以动态地做到这一点。但是你可以用动态 sql 来做到这一点。

对于给定的数据集，获得所需结果的最简单方法是使用 case 语句。

```
select foo.tag, 
case 
    when bar.field = 'col1' then foo.col1
    when bar.field = 'col2' then foo.col2
    else null
end as value
from foo
    inner join bar on foo.tag = bar.tag 
```

只有`when...then...`部分是动态的，而其余部分是静态的。因此，循环遍历`bar`表格以构建动态部分，然后将它们连接在一起。

```
declare @sql varchar(2000)
set @sql=''
select @sql = @sql +' when bar.field='''+field+''' then foo.' + field
from (select distinct field from bar) sub

--print @sql

set @sql = 'select foo.tag, 
case ' + @sql  + ' 
    else null
end as value
from foo
    inner join bar on foo.tag = bar.tag'

--print @sql

exec(@sql) 
```

# mysql - 用子选择连接两个表，也用空行

> ID：15957308
> 
> 赞同：0
> 
> 时间：2013-04-11T19:33:52.127
> 
> 标签：mysql, sql, database

我有两个表：trx，带有事务和带有事件的事件。 `trx.purchaseid`=外键`events.id`

我正在尝试为每个事务和事件表中的一个字段创建一个与元组的关系。

```
SELECT trx.*,
    ( SELECT open FROM events AS ev
      WHERE ev.id = trx.purchaseid
    ) AS open
FROM trx 
```

完美运行。但有时没有具有相同 ID 的事件行。子选择返回 0 行。该字段`open`导致`0`. 但是 open 的值可以是 1|0。

有没有办法改变这个查询，让`open`字段包含 1|0|NULL 而不是 1|0|0？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T19:40:51.607

听起来你想使用`JOIN`. 即使在您的示例中，您也可以使用 an`INNER JOIN`而不是子查询。

在这种情况下，您需要一个`LEFT JOIN`, 来包括`NULL`

```
SELECT trx.*, open
FROM trx
LEFT JOIN events AS ev
ON ev.id = trx.purchaseid 
```

# svn - Subversion 合并没有合并文件

> ID：15957309
> 
> 赞同：0
> 
> 时间：2013-04-11T19:33:54.580
> 
> 标签：svn

主干中有一个文件fileA，但在我们的开发分支中不存在。一个开发人员不小心在我们的分支中执行了这个文件的“svn add”，而不是从主干执行 fileA 的“svn 合并”。我所做的是在我们的开发分支中对该文件执行了“svn 删除”。然后我从主干执行合并，以使我们的分支与主干同步。出于某种原因，fileA 没有合并到我们的分支中。当我在分支目录上执行“svn status”时，fileA 有一个“？” 在它的旁边。然后，在我最初执行“svn delete”之后，我尝试“rm”我怀疑是文件的残留副本。我现在如何将 fileA 放入分支？'svn merge' 现在不会合并主干中的任何内容！

任何帮助将不胜感激。

-D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T22:29:47.670

`--ignore-ancestry`使用该选项再次合并。这让合并命令忽略任何跟踪的合并信息，只逐行比较两个文件。

# c++ - std::unordered_map 向量下标超出范围

> ID：15957313
> 
> 赞同：6
> 
> 时间：2013-04-11T19:34:14.700
> 
> 标签：c++, stl, unordered-map

我`std::unordered_map<void *, size_t>`用来保存一些值，并且在添加新值时出现“向量下标超出范围”。我正在使用 Visual Studio 2012，错误跟踪是：

```
std::vector<std::_List_unchecked_iterator<std::_List_val<std::_List_simple_types<std::pair<void * const,unsigned int> > > >,std::_Wrap_alloc<std::allocator<std::_List_unchecked_iterator<std::_List_val<std::_List_simple_types<std::pair<void * const,unsigned int> > > > > > >::operator[](unsigned int _Pos) Line 1140  C++
std::_Hash<std::_Umap_traits<void *,unsigned int,std::_Uhash_compare<void *,std::hash<void *>,std::equal_to<void *> >,std::allocator<std::pair<void * const,unsigned int> >,0> >::_Vec_lo(unsigned int _Bucket) Line 907    C++
std::_Hash<std::_Umap_traits<void *,unsigned int,std::_Uhash_compare<void *,std::hash<void *>,std::equal_to<void *> >,std::allocator<std::pair<void * const,unsigned int> >,0> >::_End(unsigned int _Bucket) Line 936   C++
std::_Hash<std::_Umap_traits<void *,unsigned int,std::_Uhash_compare<void *,std::hash<void *>,std::equal_to<void *> >,std::allocator<std::pair<void * const,unsigned int> >,0> >::_Insert<std::pair<void * const,unsigned int>,std::_Nil>(std::pair<void * const,unsigned int> && _Val, std::_Nil _Pnode) Line 872  C++
std::_Hash<std::_Umap_traits<void *,unsigned int,std::_Uhash_compare<void *,std::hash<void *>,std::equal_to<void *> >,std::allocator<std::pair<void * const,unsigned int> >,0> >::insert(std::pair<void * const,unsigned int> && _Val) Line 371 C++ 
```

具体来说：

```
_Unchecked_iterator& _Vec_lo(size_type _Bucket)
{   // return reference to begin() for _Bucket
return (_Vec[2 * _Bucket]);
} 
```

其中 _Vec 是一个空向量，_Bucket 是指针哈希 (> 0)。当键类型不是 void *，而是 uintptr_t 时，也会发生同样的事情。是 VS 错误还是我做错了什么？

注意：这个问题与[c++ unorderedmap vector subscript out of range 有关](https://stackoverflow.com/questions/15445397/c-unorderedmap-vector-subscript-out-of-range)- 这是同一个问题，但答案不相关

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-03-02T14:45:50.290

这是一个很老的问题，我不知道我的答案是否适合这个问题。但是由于我们没有从 OP 获得更多信息并且我遇到了相同的运行时错误，所以我将针对我的具体问题发布我的解决方案。也许有人也觉得它有用。

就我而言，这是一个静态初始化顺序问题。`unordered_map`在初始化该类的静态成员之前，我访问了（这是一个静态类成员）。

这导致未定义的行为（访问未初始化的对象）导致应用程序因运行时错误而崩溃。

如何解决静态初始化顺序问题可以在[这里](https://isocpp.org/wiki/faq/ctors#static-init-order)找到。

# mysql - 选择除 GROUP BY 子句中指定的列之外的列

> ID：15957314
> 
> 赞同：2
> 
> 时间：2013-04-11T19:34:16.737
> 
> 标签：mysql, sql, group-by, aggregate-functions

有没有办法选择 group by 子句中指定的列以外的列？假设我有以下架构：

Student(id, name, age), Course(id, name, credit), Enrollment(student_id, course_id, Grade)

我想为每门课程查询以下内容：课程名称，student_count。

我想出了解决方法，但我想知道是否有更清洁的方法来做到这一点：

```
SELECT MAX(c.name), COUNT(distinct e.student_id)
FROM Enrollment e
INNER JOIN Course c ON c.id = e.course_id
GROUP BY e.course_id; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T19:53:46.720

您可能想要复制此 DDL，对其进行调整以匹配您的架构，然后将其粘贴到您的问题中。

```
create table Student(
  student_id integer primary key, 
  student_name varchar(35) not null, 
  age int not null default 20
);

create table Course(
  course_id integer primary key, 
  course_name varchar(35) not null, 
  credit integer not null default 3
);

create table Enrollment(
  student_id integer not null references Student (student_id), 
  course_id integer not null references Course (course_id), 
  primary key (student_id, course_id),
  grade char(1) not null
);

insert into student values 
(1, 'a', 20),
(2, 'b', 20),
(3, 'c', 20);

insert into course values
(1, 'course 1', 3),
(2, 'course 2', 3),
(3, 'course 3', 3);

insert into enrollment values
(1, 1, 'b'),
(2, 1, 'b'),
(3, 1, 'b'),
(1, 2, 'b'),
(2, 2, 'b'),
(3, 3, 'b'); 
```

现在，您只需查询“enrollment”表就可以得到每门课程的学生人数。

```
select course_id, count(student_id) num_students
from enrollment
group by course_id
order by course_id;

course_id  num_students
--
1          3
2          2
3          1 
```

剩下的就是获取相应的课程名称。为此，您只需将表“Course”与我们刚刚编写的查询连接起来。

```
select course.course_name, course_enrollment.num_students
from course
inner join (select course_id, count(student_id) num_students
            from enrollment
            group by course_id) course_enrollment
        on course.course_id = course_enrollment.course_id;

course_name  num_students
--
course 1     3
course 3     1
course 2     2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T19:36:32.887

不，你不能。`GROUP BY`但是你可以扩展`c.name`：

```
SELECT MAX(c.name), COUNT(distinct e.student_id)
FROM Enrollment e
INNER JOIN Course c ON c.id = e.course_id
GROUP BY e.course_id, c.name 
```

因为`e.course_id`是独一无二的，所以不会改变结果。

# ms-access - 在 MS Access 中禁用设计视图

> ID：15957315
> 
> 赞同：3
> 
> 时间：2013-04-11T19:34:23.423
> 
> 标签：ms-access

我正在尝试输入一些隐藏“设计视图”的代码作为我们内部应用程序的选项，除非满足特定的权限要求。

以下代码适用于一个例外：

```
On Error Resume Next
If Not GetUserInfo("ADMIN_PERMIS") = 1 Then
    Dim cb As CommandBar
    Dim cbCtl As CommandBarControl
    For Each cb In CommandBars
        If cb.type = msoBarTypePopup Then
            For Each cbCtl In cb.Controls
                If cbCtl.Caption = "&Design View" Then
                    cbCtl.enabled = True
                    cbCtl.visible = False
                Else
                    cbCtl.visible = True
                End If
            Next
        End If
    Next
    Set cb = Nothing: Set cbCtl = Nothing
End If 
```

这样做的一个问题是它不仅对当前数据库禁用设计视图，而且对启动的任何其他访问数据库禁用设计视图。我正在寻找一种方法来尝试应用此代码，使其仅影响我拥有代码的 Access 数据库，而不影响它的每个实例。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-22T21:24:24.687

我建议将数据库转换为已编译的、仅可执行的 .accde 文件（文件 --> 保存和发布 --> 生成 ACCDE）。这样做将防止应用程序中的任何设计或代码更改。保持正常的 .accdb 格式的开发版本。在那里进行更改，然后为每次更新编译成 .accde 版本。

由于您的团队经常更新数据库，因此您可以从使用 Peter De Baets 的[数据库启动器](http://www.peterssoftware.com/aps.htm)中受益。数据库启动器制作数据库前端的本地副本，允许用户在进行设计更改时继续工作。生产acde前端文件更新后，用户下次打开数据库时会自动复制新文件。在我的办公室里，我发现我可以推出一个快速修复程序，然后简单地给每个人发电子邮件说“关闭并重新打开数据库！”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-13T17:04:19.257

所有这些答案都很棒。如果您对最简单的方法感兴趣，我发现表单是关键，尽管在一个奇怪的地方。

在表单属性->其他选项卡->快捷菜单=否

# java - 从两个表 JDO DataNucleus 创建新对象

> ID：15957318
> 
> 赞同：0
> 
> 时间：2013-04-11T19:34:27.797
> 
> 标签：java, persistence, jdo, dto, datanucleus

我试图通过使用 DataNucleus 持久化两个类来创建 DTO 对象。

我希望创建的 DTO：

```
@PersistenceAware
DtoObject{

   Protected String Id;  //populated by Order class
   Protected String status; //populated by Order class
   Protected String phoneNumber; //populated by Customer class
   Protected String address;  //populated by Customer class
}
The Objects:

 @PersistenceCapable
 @FetchGroup(name="dto", members = {@Persistent(name = "Id"), 
 @Persistent(name="status")})
 public Class Order{
   @PrimaryKey
   @Persistent
   private String Id;
   @Persistent
   private String status;
   @Persistent
   private Customer customer;
}

@PersistenceCapable
@FechGroup(name="dto", members = { @Persistent(name = "phoneNumber"),
@Peristent(name="address") })
public Class Customer{

   @PrimaryKey
   @Persistent
   private String Id;
   @Persistent
   private String phoneNumber;
   @Persistent
   private string Address;
} 
```

JDODL：

```
Query q = pm.newQuery(Order.class);
            pm.getFetchPlan().setGroup("dto");
            q.setUnique(true);
            q.setFilter("Id == id");
            q.declareParameters("String id");
            q.setResultClass(DtoObject.class);
            DtoObject dto = (DtoObject)q.execute(id); 
```

我可以使用映射到 Order.class 的属性填充 dto 对象，但无法从 Customer.class 获取属性。Data Nucleus 连接表并从每个表中选择适当的列，但保留 phoneNumber =null 和 address = null;

将不胜感激有关如何使用一个查询进行这项工作的指针。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T06:51:37.243

```
Query q = pm.newQuery("SELECT UNIQUE this.id, this.status, " + 
    " this.customer.phoneNumber, this.customer.address INTO " + 
    DtoObject.class.getName() + 
    " FROM " + Order.class.getName() + " WHERE this.id = :id");
DtoObject dto = (DtoObject)q.execute(idParam); 
```

假设结果类（DtoObject）服从[结果类的条件](http://www.datanucleus.org/products/accessplatform_3_2/jdo/jdoql_result.html)

# internet-explorer - IE10 上的 CSS3 线性渐变

> ID：15957320
> 
> 赞同：3
> 
> 时间：2013-04-11T19:34:28.347
> 
> 标签：internet-explorer, css, internet-explorer-10

我们决定最终支持 Internet Explorer，但目前仅从 10 开始。我一直在阅读 IE 的 CSS 支持，但我不确定目前是否可以在 IE 中执行此操作？

```
background: linear-gradient(bottom right,circle,rgba(0, 0, 0, .04),transparent 80px,transparent 100%); 
```

无论如何要这样做还是仍然需要退回到png？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-11T19:43:59.700

您的 OP 声明将不起作用。不，没有必要回退到图像。您的声明无效。解释你想在“线性”或“圆形”渐变之间做什么......或者只是去[http://www.colorzilla.com/gradient-editor/](http://www.colorzilla.com/gradient-editor/)并重建你的线。

您正在寻找这样的东西（跨浏览器向后兼容）：

```
.shadow {

background: -moz-linear-gradient(left,  rgba(0,0,0,1) 0%, rgba(0,0,0,0.03) 31%, rgba(0,0,0,0) 32%, rgba(0,0,0,0) 100%);
background: -webkit-linear-gradient(left,  rgba(0,0,0,1) 0%,rgba(0,0,0,0.03) 31%,rgba(0,0,0,0) 32%,rgba(0,0,0,0) 100%);
background: -o-linear-gradient(left,  rgba(0,0,0,1) 0%,rgba(0,0,0,0.03) 31%,rgba(0,0,0,0) 32%,rgba(0,0,0,0) 100%);
background: linear-gradient(to right,  rgba(0,0,0,1) 0%,rgba(0,0,0,0.03) 31%,rgba(0,0,0,0) 32%,rgba(0,0,0,0) 100%);
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#000000', endColorstr='#00000000',GradientType=1 );
} 
```

[jsFiddle 用你的和我的](http://jsfiddle.net/SRUGf/428/)，你可以在哪里玩

**[发布说明]**

关于 IE：“过滤器”规则适用于 IE9-，IE10 的预览版使用“-ms”前缀语法，IE10 及更高版本使用标准语法。

有关详细信息，请参阅[MDN 上的线性渐变页面](https://developer.mozilla.org/en-US/docs/Web/CSS/linear-gradient)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-06T09:15:00.927

我在 windows 7 中测试过，来自 modern.ie 的[IE10.0.9200.17148](https://www.modern.ie/en-us/virtualization-tools)

并且`background-image: linear-gradient(to right, rgba(0,0,0,1) 0%,rgba(0,0,0,0.03) 31%,rgba(0,0,0,0) 32%,rgba(0,0,0,0) 100%);`有效。

![ie10-渐变](https://i.stack.imgur.com/RxNFj.png)

如果您有 IE10，请在此处进行测试： [https ://fiddle.jshell.net/txLtok1w/1/](https://fiddle.jshell.net/txLtok1w/1/)

...并报告是否显示渐变，以及您的操作系统和 IE 版本/次要版本。

# android - 用 Object[] 传入的 AsyncTask 实现 EndlessAdapter

> ID：15957323
> 
> 赞同：0
> 
> 时间：2013-04-11T19:34:35.047
> 
> 标签：android, android-arrayadapter, commonsware-cwac

我已经查看了所有文档`CWAC-endlessAdapter`以及演示项目。我确实了解它是如何工作的，并且主要了解一切的去向。但是我有几个关于如何处理我现在正在做的事情的问题（我还没有找到任何可行的例子）。

这是我使用的一个典型`AsyncTask`（清理了一下）：

```
class ReviewTask extends AsyncTask<String, String, Void> {

        @Override
        protected Void doInBackground(String... params) {

            ArrayList<NameValuePair> param = new ArrayList<NameValuePair>();
            param.add(new BasicNameValuePair("username", userName));

            HttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url_select);

            try {
                httpPost.setEntity(new UrlEncodedFormEntity(param));
                HttpResponse httpResponse = httpClient.execute(httpPost);
                HttpEntity httpEntity = httpResponse.getEntity();
                is = httpEntity.getContent();

            } catch (Exception e) {

            }
            try {
                BufferedReader br = new BufferedReader(
                        new InputStreamReader(is));
                StringBuilder sb = new StringBuilder();
                String line = "";
                while ((line = br.readLine()) != null) {
                    sb.append(line + "\n");
                }
                is.close();
                result = sb.toString();

            } catch (Exception e) {

            }
            return null;
    }

        protected void onPostExecute(Void v) {

            String review, newdate, item, rating, cat;
            try {
                JSONArray jArray = new JSONArray(result);
                JSONObject json_data = null;
                for (int i = 0; i < jArray.length(); i++) {
                    json_data = jArray.getJSONObject(i);
                    newdate = json_data.getString("date");
                    review = json_data.getString("review");
                    item = json_data.getString("item");
                    rating = json_data.getString("rating");
                    cat = json_data.getString("category");

                    reviews.add(review);
                    itemslist.add(item);
                    datelist.add(newdate);
                    ratings.add(rating);
                    cats.add(cat);

                }
            } 

            Profile[] p = new Profile[reviews.size()];
            int index = 0;

            for (String i : reviews) {
                p[index] = new Profile(reviews.get(index), datelist.get(index),
                        itemslist.get(index), ratings.get(index),
                        cats.get(index));
                index++;
            }

            if (getActivity() != null) {
                adapter = new ProfileAdapter(getActivity(), p);
                setListAdapter(adapter);
            }

        }
    } 
```

在此，我通过从数据库`task`中获取所有数据。我编写的查询**一次**收集所有数据。仍然以这种方式处理是否正确？`MySQL``php``SQL`

 **另外，我`onCreateView`在我的`ListFragment`. 但看起来需要调用任务`cacheInBackground()`？

最后，听起来我必须`adapter`像`onActivityCreated`这样设置：

```
// from Example
if (adapter==null) {
    items=new ArrayList<Integer>();

    for (int i=0;i<25;i++) { items.add(i); }

    adapter=new DemoAdapter(items);
    adapter.setRunInBackground(false); 

}
setListAdapter(adapter); 
```

我不明白或看不到哪里有构造函数`DemoAdapter(items)`，并且基于我正在传递一个对象数组的事实，我会做类似 DemoAdapter(object[]) 的事情吗？如果它为空也没关系，因为收集数据实际上发生在适配器中，对吗？

*最后一个相关说明是，我所有的适配器都在设置它们的 Fragment 之外的一个类中。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T19:52:44.540

> 我编写的 SQL 查询一次收集所有数据。仍然以这种方式处理是否正确？

那取决于你。但是，这样做，您不需要`EndlessAdapter`，因为您已经拥有所有数据。背后的要点`EndlessAdapter`是支持您*不*“一次收集所有数据”的情况，而是希望收集一部分数据，并仅在用户滚动足够远时收集另一部分数据。

> 另外，我在 ListFragment 的 onCreateView 中调用了这个任务。但看起来任务需要在 cacheInBackground() 中调用？

那取决于你。如果您希望随时使用自己的`AsyncTask`调用，那很好。这在文档中有所介绍：

> 如果您不希望`EndlessAdapter`自己运行`AsyncTask`，请调用`setRunInBackground(false)`. 在这种模式下，您的`cacheInBackground()`方法将在**主应用程序线程**上调用。您可以安排在自己的后台线程上完成工作，然后`onDataReady()`在您希望适配器更新以反映新添加的数据时调用。请注意，`appendCachedData()`不会在这种情况下使用。

> 我不明白或看不到 DemoAdapter(items) 的构造函数

没有，因为演示不需要一个。

> 基于我正在传递一个对象数组的事实，我会做类似 DemoAdapter(object[]) 的事情吗？

那取决于你。

> 如果它为空也没关系，因为收集数据实际上发生在适配器中，对吗？

再次，这取决于你。

但是，正如我之前指出的，由于您不需要`EndlessAdapter`，我建议您停止使用它。**

# java - 具有多个孩子的树的数组中的泛型类型

> ID：15957325
> 
> 赞同：1
> 
> 时间：2013-04-11T19:34:39.937
> 
> 标签：java, arrays, generics, types, tree

我正在尝试实现一棵有多个孩子的树，我需要以某种方式存储这些孩子。我决定可以使用 a`LinkedList`但我想先尝试使用数组。

（请我不想使用任何导入。）

```
class Node<T extends Comparable<? super T>>
{
    Node<T> arrChildren[] = new Node<T>[size];
} 
```

这不起作用。

```
class Node<T extends Comparable<? super T>>
{
    Comparable<Node<T>> arrChildren[] = new Comparable[size];
    T element;
} 
```

这可行，但我无法将`arrChildren[0]`与正常进行比较`Node<T>`，如果我制作所有`Node<T>`s`Comparable`节点，我将无法到达里面的元素。

这是我在 Stack Overflow 上的第一篇文章，希望也能得到很好的回应，我不介意批评。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T03:48:18.810

泛型和数组在 Java 中不能很好地混合。`List<T>`像您正在考虑的那样使用实现会容易得多：

```
List<Node<T>> arrChildren = new LinkedList<>(); 
```

**更长的解释：**

数组：

*   在运行时跟踪它们的组件类型。
*   是协变的（an `Integer[]`is a `Number[]`is an `Object[]`）。

通用类型：

*   [让编译器删除](http://docs.oracle.com/javase/tutorial/java/generics/genTypes.html)它们的类型参数，以使它们在运行时不可用。对 a 的`Node<String>`调用成为对 a的调用，并`Node`通过适当的强制转换为`String`。
*   不是协变的（ a*不是*`List<Integer>`a ）。*`List<Number>`*

 *不允许的原因`new Node<T>[size]`是因为数组需要在运行时知道它的组件类型，此时不再有`T`. 只有类似的东西`new Node<?>[size]`是允许的。

忽略创建数组的限制`Node<T>`，简单地引用一个是不安全的，因为以下情况是可能的：

```
Node<Integer>[] intNodeArray = ...;
Object[] objArray = intNodeArray; //legal because arrays are covariant
objArray[0] = new Node<String>("asfd"); //should fail but doesn't

...

//sometime later
Node<Integer> intNode = intNodeArray[0]; //still doesn't fail because of erasure
Integer i = intNode.getValue(); //only now do we get a runtime exception 
```

`Node<String>`向数组添加 a*应该*会引发运行时异常，但它不会，因为数组只知道它的组件类型是`Node`，而不是`Node<Integer>`。

有关更多信息，请参阅 Angelika Langer 的泛型常见问题解答：[我可以创建其组件类型为具体参数化类型的数组吗？](http://www.angelikalanger.com/GenericsFAQ/FAQSections/ParameterizedTypes.html#Can%20I%20create%20an%20array%20whose%20component%20type%20is%20a%20concrete%20instantiation%20of%20a%20parameterized%20type?)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T09:37:29.603

```
Node<T>[] arrChildren = (Node<T>[])new Node<?>[size]; 
```*

# java - 如何使用 JTable 从选定数据中填充新的二维数组

> ID：15957330
> 
> 赞同：0
> 
> 时间：2013-04-11T19:34:49.873
> 
> 标签：java, swing, jtable, multidimensional-array, listselectionlistener

想知道在用户手动从 JTable 中选择数据后，我将如何解决填充二维数组的问题，即如果您从 JTable 中选择两个单元格（足球、橄榄球），那么它们将被添加到两个数组应该相对于 [row][column] 填充。我问这个，所以我能够将此数组传递给另一个将创建可视化的类。我的 ListSelectionModel 的代码是：

[http://pastebin.com/eNYz3us2](http://pastebin.com/eNYz3us2)

如果我要突出显示两个单元格（足球、橄榄球），它将打印到命令行“FootballRugby”，因此只需将其存储在数组中！

谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T03:31:49.570

这将为您提供选定的行和选定的列`JTable`。如果未选择任何单元格，则[getSelectedXXX](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTable.html#getSelectedColumn%28%29)方法将返回 -1。

```
table.getSelectedColumn(); // Gives the selected column.
table.getSelectedRow();   // Gives the selected row. 
```

获取行列后调用[getValueAt](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTable.html#getValueAt%28int,%20int%29)方法获取该位置的值。

现在您有了所需的数据，您可以将其存储在数组中并将其传递给另一个类进行可视化。

# c# - 使用 ODATA 服务时出现重复项目

> ID：15957334
> 
> 赞同：2
> 
> 时间：2013-04-11T19:34:58.647
> 
> 标签：c#, linq, .net-4.0, wcf-data-services

**WCF/OData Web 服务** 返回类型为的**restful**项`vBeheer`。

在客户端，我创建了使用的方法：

```
 SRTDBEntities es = new SRTDBEntities(_serviceRoot);
        return es.vBeheer.Where(b => 
            b.TrackID == trackid && 
            b.PersoonID == CurrentPersoon.ID ); 
```

但是我注意到（经过一个下午的调试）将**.ToList()**添加到表达式时，结果集会**损坏**。项目的`Count()`正确且符合预期，但项目的值是错误的。许多是**重复**的，许多是**丢失**的（显然）。

所以我在*linqpad*中对此进行了测试：

```
vBeheer.Where (b => b.TrackID==23 && b.PersoonID == 19   ).Dump(); 
```

*   按预期从服务返回正确的结果，注意**ID 应该是**每个“行”的唯一值：

![正确的](https://i.stack.imgur.com/MwQ14.png)

但是在添加 .ToList() 时会出错

```
 vBeheer.Where (b => b.TrackID==23 && b.PersoonID == 19   ).ToList().Dump(); 
```

这会导致许多重复（没有任何模式？）项目

![在此处输入图像描述](https://i.stack.imgur.com/sZVbb.png)

此行为是意外且不需要的。甚至更有趣。我们确定数据库返回正确的结果，在调试服务器（在 web 服务中）时结果仍然正确，但是当到达客户端时，它出现了可怕的错误。

IT 不会是一个问题，但是数据被 DevExpress 组件 (DXGrid) 使用，它无论如何都会执行 ToList()。

注意：在浏览器中执行查询：

```
http://localhost:52671/SRTDataService.svc/vBeheer()?$filter=TrackID%20eq%2023%20and%20PersoonID%20eq%2019 
```

返回一组预期的唯一项。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-11T20:26:45.400

这通常表明您的视图具有不唯一的键列（在 EF 模型中）。EF 只是用一组键值重复它读取的第一行。

有和没有的差异`ToList()`是出乎意料的。这只是枚举查询的一种方式，Linqpad 在执行`Dump()`.

# django - 是否有适用于 Amazon S3 的 Python3 兼容 Django 存储后端？

> ID：15957338
> 
> 赞同：12
> 
> 时间：2013-04-11T19:35:10.293
> 
> 标签：django, heroku, python-3.x, amazon-s3

我正在用 Python 3.3.1 构建一个 Django 应用程序，以部署在 Heroku 上。由于其临时文件系统，Heroku 无法从本地文件系统提供应用程序的静态文件，因此它们需要位于其他地方，而我想将它们放在 Amazon S3 中。

我找到了许多有用的教程（[在 Heroku 上部署 Django](https://mike.tig.as/blog/2012/02/13/deploying-django-on-heroku/)等），所有这些教程都使用 django-storages 应用程序和 boto 来收集静态文件并将它们存储在 S3 上。不幸的是，将 boto 移植到 Python3 的工作仍未完成。django-storages 可以使用其他 S3 存储提供程序（Apache Libcloud 或简单的 Amazon S3 Python 库），但 django-storages 本身也不能在 Python3 上运行。

我还看到了向 Heroku 应用程序的 Procfile 添加 collectstatic 调用的黑客行为，它确实将文件放在了 Django 应用程序可以使用的位置，但它会减慢部署速度；每次部署应用程序时都必须收集和上传文件。无论如何，Heroku dynos 不太适合提供静态文件，我最终也想存储用户数据，这将需要像 S3 这样的非 Heroku 数据存储。

除了 django-storages 中提供的那些之外，Django 是否有兼容 Python3 的存储后端？还是我暂时坚持使用 Python 2.7？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-12-10T23:30:21.330

[`django-storages-redux`（现在只是`django-storages`）](https://github.com/jschneier/django-storages)对我来说非常好用[`boto`](https://github.com/boto/boto)，现在 Python 3 支持它的`s3`功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-09T16:17:02.077

[django-storages-p3](https://github.com/coagulant/django-storages-py3)看起来很有希望。试一试，让我知道：D。

# android - assets 和 res/raw 的区别

> ID：15957347
> 
> 赞同：1
> 
> 时间：2013-04-11T19:35:30.210
> 
> 标签：android, directory, directory-structure

我想弄清楚`assets`和`res/raw` 目录之间的区别。据推测，我可以将任何内容放入资产中而不会使我的应用程序膨胀，同时`res/raw`捆绑在应用程序中并可以从 Android 应用程序源代码中直接访问，这与示例图像和 shell 脚本不同，我可以在之后将其与项目源代码捆绑在一个 zip 文件中将它们放在资产目录下。有人可以确认我对这两个目录的理解吗？

谢谢，

杰森·波西特

# iphone - 重置 UiTableView 表格高度导致表格消失

> ID：15957357
> 
> 赞同：0
> 
> 时间：2013-04-11T19:35:58.490
> 
> 标签：iphone, ios, uitableview

我有一个包含两个 UILabel、两个 UITableViews 和一个 UITextView 的视图。我正在尝试根据它们将显示的内容来布局这两个表。我可以很好地创建初始表格尺寸，但是当我根据表格的实际内容重置表格的高度时，表格不再显示在视图中。下面的代码片段：

```
-(void)viewDidLoad
{
// code to set up the first two UILabels (one of which is clinic name)
...

//
// Create the address table
//
CGRect addrRect = self.view.bounds ;
CGFloat addrStart = clinicNameRect.origin.y + (clinicNameRect.size.height)*1.5 ;
addrRect.origin.y =  addrStart;
addrRect.size.height -= addrStart ; // setting it to size of rest of view which is not what I want

addressList = [[UITableView alloc] initWithFrame:addrRect style:UITableViewStyleGrouped] ;
[addressList setDataSource:self] ;
[addressList setDelegate:self] ;

[addressList setAutoresizingMask:UIViewAutoresizingFlexibleHeight |  
                                 UIViewAutoresizingFlexibleWidth] ;
[addressList setBackgroundColor:clr] ;
[addressList setBackgroundView:nil] ; // no background

[[self view] addSubview:addressList] ; // tried moving this to after with same result

// have the system layout the table, then reset the height to actual size
[addressList layoutIfNeeded];

CGRect newFrame = [addressList frame] ;
newFrame.size.height = [addressList contentSize].height ;

// make the table's frame exactly match its size
[addressList setFrame:newFrame] ;

// go to set up next UITableView... 
```

如果我调用 setFrame：我的表看起来很好（但在视图上占用了太多空间）。如果我留下那个电话，表格根本不会出现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T19:40:23.363

`[UIView bounds]`请阅读有关和之间区别的文档`[UIView frame]`。

尽管`bounds`在某些特定情况下更改原点是可能的，但您真正想要的是更改`frame`.

此外，两者`frame`和`bounds`都是动画属性。设置一个新值会启动一个动画，然后如果您访问该值，则不必获取当前值。

# maven - Maven 在构建初始 jive 项目时无法从存储库中找到 Jive 原型

> ID：15957358
> 
> 赞同：1
> 
> 时间：2013-04-11T19:36:03.197
> 
> 标签：maven

我正在尝试按照此处指定的说明进行操作：[https ://community.jivesoftware.com/docs/DOC-3544](https://community.jivesoftware.com/docs/DOC-3544)

出于某种原因，当我执行时：

```
mvn archetype:generate -e -B -DarchetypeGroupId=com.jivesoftware.maven -DarchetypeArtifactId=maven-jive-archetype -DarchetypeVersion=6.0.x-SNAPSHOT -DgroupId=com.jivesoftware.dummycustomer -DartifactId=dummyCustomerSite 
```

它似乎无法找到原型。

我相信我已经在 ~/.m2/settings.xml 中添加了我需要的所有更改（即代理设置、配置文件和 jive 凭据）

```
<?xml version="1.0"?>
<settings>
  <profiles>
    <profile>
        <id>jive.archiva</id>
        <activation>
            <activeByDefault>false</activeByDefault>
        </activation>
        <repositories>
            <repository>
                <id>jive.internal</id>
                <name>Jive's Repository</name>
                <url>https://maven-secure.jivesoftware.com/archiva/repository/jive.internal</url>
            </repository>

            <repository>
                <id>jive.snapshots</id>
                <name>Jive's Repository</name>
                <url>https://maven-secure.jivesoftware.com/archiva/repository/jive.snapshots</url>
            </repository>
        </repositories>

        <pluginRepositories>
            <pluginRepository>
                <id>jive.internal</id>
                <name>Jive's Repository</name>
                <url>https://maven-secure.jivesoftware.com/archiva/repository/jive.internal</url>
            </pluginRepository>

            <pluginRepository>
                <id>jive.snapshots</id>
                <name>Jive's Repository</name>
                <url>https://maven-secure.jivesoftware.com/archiva/repository/jive.snapshots</url>
            </pluginRepository>
        </pluginRepositories>

        <properties>
            <tomcat6.home><![CDATA[/usr/local/apache-tomcat-6.0.36]]></tomcat6.home>
            <cargo.wait>false</cargo.wait>
            <jive.setup>true</jive.setup>
            <jive.devMode>true</jive.devMode>
            <pluginDirs>null</pluginDirs>
        </properties>
    </profile>
</profiles>
<servers>
 <server>
    <id>jive.internal</id>
    <username>john.smith</username>
    <password>password123</password>
 </server>
 <server>
    <id>jive.snapshots</id>
    <username>john.smith</username>
    <password>password123</password>
 </server>
 <server>
    <id>central</id>
    <username>john.smith</username>
    <password>password123</password>
 </server> 
```

```
 <proxies>
    <proxy>
     <active>true</active>
     <protocol>http</protocol>
     <host>proxy.mycompany.com</host>
     <port>8080</port>
     <nonProxyHosts>*.mycompany.com|localhost</nonProxyHosts>
    </proxy>
   </proxies>
    </settings> 
```

运行时，Maven 说找不到文件：

```
$mvn archetype:create -DarchetypeGroupId=com.jivesoftware.maven -DarchetypeArtifactId=maven-jive-archetype -DarchetypeVersion=5.0.x-SNAPSHOT -DgroupId=com.cirrus.jive -DartifactId=tap
[INFO] Scanning for projects...
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building Maven Stub Project (No POM) 1
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-archetype-plugin:2.2:create (default-cli) @ standalone-pom ---
[WARNING] This goal is deprecated. Please use mvn archetype:generate instead
[INFO] Defaulting package to group ID: com.cirrus.jive
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 1.116s
[INFO] Finished at: Thu Apr 11 16:17:50 CDT 2013
[INFO] Final Memory: 7M/81M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-archetype-plugin:2.2:create (default-cli) on project standalone-pom: Error creating from archetype: org.apache.maven.archetype.downloader.DownloadNotFoundException: Requested com.jivesoftware.maven:maven-jive-archetype:jar:5.0.x-SNAPSHOT download does not exist. Could not find artifact com.jivesoftware.maven:maven-jive-archetype:jar:5.0.x-SNAPSHOT
[ERROR] 
[ERROR] Try downloading the file manually from the project website.
[ERROR] 
[ERROR] Then, install it using the command:
[ERROR] mvn install:install-file -DgroupId=com.jivesoftware.maven -DartifactId=maven-jive-archetype -Dversion=5.0.x-SNAPSHOT -Dpackaging=jar -Dfile=/path/to/file
[ERROR] 
[ERROR] Alternatively, if you host your own repository you can deploy the file there:
[ERROR] mvn deploy:deploy-file -DgroupId=com.jivesoftware.maven -DartifactId=maven-jive-archetype -Dversion=5.0.x-SNAPSHOT -Dpackaging=jar -Dfile=/path/to/file -Durl=[url] -DrepositoryId=[id]
[ERROR] 
[ERROR] 
[ERROR] com.jivesoftware.maven:maven-jive-archetype:jar:5.0.x-SNAPSHOT
[ERROR] 
[ERROR] from the specified remote repositories:
[ERROR] central (http://repo1.maven.org/maven2, releases=true, snapshots=false)
[ERROR] -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException 
```

编辑：遵循查理的建议后，我收到了这些警告。

```
[WARNING] Archetype not found in any catalog. Falling back to central repository (http://repo1.maven.org/maven2).
[WARNING] Use -DarchetypeRepository=<your repository> if archetype's repository is elsewhere.
Downloading: http://repo1.maven.org/maven2/com/jivesoftware/maven/maven-jive-archetype/6.0.x-SNAPSHOT/maven-metadata.xml
Downloading: http://repo1.maven.org/maven2/com/jivesoftware/maven/maven-jive-archetype/6.0.x-SNAPSHOT/maven-metadata.xml
...
...
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 3.245s
[INFO] Finished at: Fri Apr 12 10:03:30 CDT 2013
[INFO] Final Memory: 7M/81M
[INFO] ------------------------------------------------------------------------ 
```

看起来它仍然找不到原型，然后转到另一个存储库，所以这不是我想要的。如果我将原型版本的参数更改为 5.0（我认为我的公司可能希望我使用它）。设置 DarchetypeVersion=5.0.x-SNAPSHOT 给了我这个（注意它说 xxxx 实际上应该说 http 因为 stackoverflow 抱怨我由于缺乏声誉而无法发布 html 链接）：

```
[WARNING] Archetype not found in any catalog. Falling back to central repository (http://repo1.maven.org/maven2).
[WARNING] Use -DarchetypeRepository=<your repository> if archetype's repository is elsewhere.
Downloading: xxxx://repo1.maven.org/maven2/com/jivesoftware/maven/maven-jive-archetype/5.0.x-SNAPSHOT/maven-metadata.xml
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 2.009s
[INFO] Finished at: Fri Apr 12 10:08:44 CDT 2013
[INFO] Final Memory: 7M/81M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-archetype-plugin:2.2:generate (default-cli) on project standalone-pom: The desired archetype does not exist (com.jivesoftware.maven:maven-jive-archetype:5.0.x-SNAPSHOT) -> [Help 1]
org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.apache.maven.plugins:maven-archetype-plugin:2.2:generate (default-cli) on project standalone-pom: The desired archetype does not exist (com.jivesoftware.maven:maven-jive-archetype:5.0.x-SNAPSHOT) 
```

关于为什么我似乎找不到 5.0.x- 快照的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T02:28:12.010

由于命名的配置文件`jive.archiva`默认情况下是不活动的。AFAIK，有以下两种可能的方法：-

1.通过指定profile id来执行maven。

```
mvn archetype:generate -e -B 
   -P jive.archiva 
   -DarchetypeGroupId=com.jivesoftware.maven 
   -DarchetypeArtifactId=maven-jive-archetype 
   -DarchetypeVersion=6.0.x-SNAPSHOT 
   -DgroupId=com.jivesoftware.dummycustomer 
   -DartifactId=dummyCustomerSite 
```

2.通过缺少一些系统属性使配置文件处于活动状态。

```
<profiles>
    <profile>
        <id>jive.archiva</id>
        <activation>
            <activeByDefault>false</activeByDefault>
            <property>
               <name>!disableJive</name>
            </property>
        </activation>
    </profile>
</profile> 
```

您可能想知道为什么我们不使用`<activeByDefault>true</activeByDefault>`. 这里可能是答案

> 除非使用上述方法之一**激活同一 POM 中的另一个配置文件，否则**此配置文件将自动对所有构建处于活动状态。当在命令行或通过其激活配置激活 POM 中的配置文件时**，默认情况下处于活动状态的所有配置文件都会*自动停用。***

请参阅[构建配置文件简介中的](http://maven.apache.org/guides/introduction/introduction-to-profiles.html)更多信息。

我希望这可能会有所帮助。

# c# - NHibernate 查询最近的记录

> ID：15957362
> 
> 赞同：2
> 
> 时间：2013-04-11T19:36:15.710
> 
> 标签：c#, .net, sql, nhibernate

好的，这应该很简单。我是 NHibernate 的新手，但是我搜索过的所有地方都给了我相互矛盾的答案，而且它们似乎都不起作用。基本上，我需要在我的代码中实现以下 SQL 查询。它只是返回特定参与者的最新记录。

```
select *
from result
where ParticipantId = 1
and ResultDate = (select MAX(resultDate)
                  from Result
                  where ParticipantId = 1) 
```

我正在使用 Fluent NHibernate 和 NHibernate 3.3。我可以使用下面的代码在 where 子句中不带“and”的情况下拉回数据，但是当我尝试将其限制为最近的记录时，没有任何效果。

```
var resultSet = session.Query<Result>()
.Where(r => r.Participant.ParticipantId == 1); 
```

为了完整起见，还包括我的域和映射文件。如果需要更多信息，请告诉我。

```
public class Result
{
    public virtual int ResultId { get; set; }
    public virtual Participant Participant { get; set; }
    public virtual ResultType ResultType { get; set; }
    public virtual float? ResultValue { get; set; }
    public virtual string ResultText { get; set; }
    public virtual DateTime ResultDate { get; set; }
    public virtual int? Systolic { get; set; }
    public virtual int? Diastolic { get; set; }
    public virtual DateTime? DateAdded { get; set; }
    public virtual string AddedBy { get; set; }
    public virtual DateTime? DateChanged { get; set; }
    public virtual string ChangedBy { get; set; }
}

public ResultMap() 
{
    Table("Result");
    LazyLoad();
    Id(x => x.ResultId).GeneratedBy.Identity().Column("ResultId");
    References(x => x.Participant).Column("ParticipantId");
    References(x => x.ResultType).Column("ResultTypeId");
    Map(x => x.ResultValue).Nullable();
    Map(x => x.ResultText).Nullable().Length(100);
    Map(x => x.ResultDate).Nullable();
    Map(x => x.Systolic).Nullable();
    Map(x => x.Diastolic).Nullable();
    Map(x => x.DateAdded).Nullable();
    Map(x => x.AddedBy).Nullable().Length(100);
    Map(x => x.DateChanged).Nullable();
    Map(x => x.ChangedBy).Nullable().Length(100);
} 
```

对获取最新数据的简单解决方案有任何想法吗？让我知道如何获得最后两个日期的奖励积分，因为我很快就会需要它们来比较改进。提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T19:52:37.963

要通过 QueryOver 获得相同的查询...

```
var maxResultDate = QueryOver.Of<Result>()
    .Where(x => x.Participant.ParticipantId  == 1)
    .Select(Projections.Max<Result>(x => x.ResultDate));

var rslt = s.QueryOver<Result>()
    .Where(x => x.Participant.ParticipantId == 1)
    .WithSubquery.WhereProperty(x => x.ResultDate).Eq(maxResultDate)
      //or to get the "last" 2 rows...
      //.OrderBy(x => x.ResultDate).Desc
      //.Take(2)
    .List(); 
```

# php - 使用 jQuery 确定浏览器并向元素添加样式

> ID：15957373
> 
> 赞同：0
> 
> 时间：2013-04-11T19:36:42.807
> 
> 标签：php, javascript, jquery

我知道这听起来很讨厌，但我真的只是来寻找可能的解决方案，因为我需要快速修复它。使用 CSS 不起作用，因为它有点 hack，而且我的元素只有`style="margin-left: 50px;"`在我在 HTML 中添加它时才能识别。

通过将 STYLE 直接添加到 HTML 中有一个简单的解决方案，但我发现的另一个问题是 Mozilla 或 Opera 显示的内容不同。例如在 Chrome`margin-left: 50px`中是可以的，但在 Mozilla 中它必须设置为`55px`.

所以，我想知道是否有一个 Javascript 可以找到某人正在使用的网络浏览器版本并在`style="margin-left: --px;"`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T19:49:23.257

您可以使用以下代码检测浏览器和浏览器版本：

```
if ($.browser.msie && $.browser.version == '6.0') {
    $('#myElement').css('margin-left', '20px');
} 
```

请参阅 jQuery 文档@http [://api.jquery.com/jQuery.browser/](http://api.jquery.com/jQuery.browser/)。.browser 函数自 jQuery 1.3 起已被弃用，但直到 1.9 版才被删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T19:39:26.883

这将帮助您 - 浏览器检测

[http://www.quirksmode.org/js/detect.html](http://www.quirksmode.org/js/detect.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T19:41:45.410

如果您需要根据浏览器更改页面，最好使用 PHP 等服务器端语言来完成。您可以使用[http://php.net/manual/en/function.get-browser.php](http://php.net/manual/en/function.get-browser.php)获取浏览器版本，并将`echo`样式表放入头部。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T19:44:13.890

看到这个：

[http://api.jquery.com/jQuery.browser/](http://api.jquery.com/jQuery.browser/)

```
if ($.browser.webkit) {
    alert( "this is webkit!" );
} 
```

不适用于 1.9.1。你必须使用迁移 JS。

# c# - 将项目从另一个类添加到 ListView

> ID：15957382
> 
> 赞同：1
> 
> 时间：2013-04-11T19:37:10.890
> 
> 标签：c#, listview

我已经查找了很多关于如何执行此操作的问题，但它们似乎都不起作用。我的主视图上有一个 ListView，我通过从另一个表单向其中添加数据来填充它。在另一种形式上，我有几个来自文本字段的字符串，我想传递给它。这是我的代码：

// 添加新的预订表单：

```
namespace Booker
{
  public partial class newBookingForm : Form
{
    public newBookingForm()
    {
        InitializeComponent();
    }

    private void NewBookingForm_Load(object sender, EventArgs e)
    {
        roomField.Focus();
    }

    private void newBookingButton_Click(object sender, EventArgs e)
    {
        // Add to ListView
        // Add to Parse
        string room = this.roomField.Text;
        string date = this.datePicker.Value.ToShortDateString();
        string time = this.timeField.Text;
        string person = "<username>"; // Get current Parse user

        Booker booker = new Booker();
        string[] array = new string[4] { room, date, time, person };
        booker.UpdatingListView(array);

        this.Hide();
    }
} 
```

}

// ListView 表单：

```
namespace Booker
{
public partial class Booker : Form
{
    delegate void MyDelegate(string[] array);

    public Booker()
    {
        InitializeComponent();
    }

    protected override void OnFormClosing(FormClosingEventArgs e)
    {
        base.OnFormClosing(e);
        Environment.Exit(0);
    }

    private void Booker_Load(object sender, EventArgs e)
    {
        listView.View = View.Details;
        listView.AllowColumnReorder = false;
    }

    /* Methods for the Booker form */

    private void newBookingButton_Click(object sender, EventArgs e)
    {
        newBookingForm nbf = new newBookingForm();
        nbf.Show();
    }

    public void UpdatingListView(string[] array)
    {
        if (this.listView.InvokeRequired)
            this.listView.Invoke(new MyDelegate(UpdatingListView), new object[] { array });
        else
        {
            ListViewItem lvi = new ListViewItem(array[0]);
            lvi.SubItems.Add(array[1]);
            this.listView.Items.Add(lvi);
        }
    }

    private void exitButton_Click(object sender, EventArgs e)
    {
        // Error - no action being sent
    }

    private void helpButton_Click(object sender, EventArgs e)
    {
        // Display help panel
    }

    private void contactButton_Click(object sender, EventArgs e)
    {
        // Open panel/email
    }

    private void newBooking_Click(object sender, EventArgs e)
    {
        newBookingButton_Click(sender, e);

        //string[] row = { "Meeting room", "April 11, 2013", "12:00PM-1:00PM", "Ryan" };
        //var listViewItem = new ListViewItem(row);
        //listView.Items.Add(listViewItem);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T20:01:33.783

试试这个`UpdatingListView`：

```
ListViewItem lvi = new ListViewItem(array[0],0);
lvi.SubItems.Add(array[1]);
lvi.SubItems.Add(array[2]);
lvi.SubItems.Add(array[3]);
this.listView.Items.Add(lvi); 
```

这将在您的第一个位置创建一列，其中`ListView`数组的 4 项作为该列中的行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-05T17:44:19.337

要从另一个类添加项目，只需访问其他类的方法以添加 from `Program`。像这样：

// 我们要添加的类：

```
string name = "Ryan";
string site = "imryan.net";

string[] array = new string[2] = { name, site };
Program.classWithListView.UpdatingListView(array); 
```

// 我们要添加的类：

```
public void UpdatingListView(string[] array)
    {

        if (this.listView.InvokeRequired)
        {
            this.listView.Invoke(new MyDelegate(UpdatingListView), new object[] { array });

        } else {
            ListViewItem lvi = new ListViewItem(array[0]);
            lvi.SubItems.Add(array[1]);
            lvi.SubItems.Add(array[2]);
            this.listView.Items.Add(lvi);
        }
    } 
```

字符串数组将被添加到`ListView`as 中`SubItems`。

# zend-framework - zend form如何检查选择是否存在

> ID：15957383
> 
> 赞同：-1
> 
> 时间：2013-04-11T19:37:11.267
> 
> 标签：zend-framework, zend-form

如果我在 zendform 类中声明了一个多选，我将如何检查它是否存在于控制器中

例如，在 zendform 中，我使用选项 [foo, bar] 声明了选择元素“mySelectElement”

如果选项 foo 被声明为我的选择元素的选项，我将如何检查控制器？

这些选项实际上是在表单中动态生成的，但上面的例子是否成立？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T23:38:46.633

$form->element->getAttribs(); 返回一个数组键 ['options'] 包含现有选项，然后可以通过 array_key_exists 或 in_array 进行比较。

# javascript - html5 从浏览器获取文件路径

> ID：15957384
> 
> 赞同：0
> 
> 时间：2013-04-11T19:37:13.823
> 
> 标签：javascript, html

我希望在浏览器中提取绝对文件路径。例如，如果有人在他们的桌面上选择了一个 word 文档，它将显示：

```
/Users/tom/Desktop 
```

听说使用 html5 可以做到这一点。有人可以描述这是如何完成的或提供文档链接吗？

# batch-file - reg 根据另一个键值查询一个键值

> ID：15957387
> 
> 赞同：0
> 
> 时间：2013-04-11T19:37:42.110
> 
> 标签：batch-file

我要做的是让批处理脚本返回程序的卸载链接。所以基本上我想要这样的东西：

```
Select UninstallString from HKLM\SOFTWARE\Wow6432Node\Microsoft\Windows\CurrentVersion\Uninstall where DisplayName='Sublime Text 1.0" 
```

我在用着

```
reg query HKLM\SOFTWARE\Wow6432Node\Microsoft\Windows\CurrentVersion\Uninstall /S^|find " DisplayName" 
```

最初获取程序列表，然后将其放入菜单中，然后选择要卸载的程序，它应该转到 HKLM\SOFTWARE\Wow6432Node\Microsoft\Windows\CurrentVersion\Uninstall 中的该程序的注册表并获取它的 UninstallString价值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T23:01:53.940

尝试这个：

```
@echo off&setlocal enabledelayedexpansion
set "regroot=HKLM\SOFTWARE\Wow6432Node\Microsoft\Windows\CurrentVersion\Uninstall"
set "file=%~dpn0.txt"

set /a fcount=0
for /f "delims==" %%i in ('set $ 2^>nul') do set "%%i="
if exist "%file%" (
    for /f "usebackqtokens=1*delims=|" %%i in ("%file%") do (
        set /a fcount+=1
        set "$d%%j=%%j"
        set "$u%%j=%%i"
    )
    goto:menu
)
echo(building "%file%", please wait
for /f "delims=" %%i in ('reg query "%regroot%"') do (
    set "DN="& set "US="
    for /f "tokens=2*" %%j in ('reg query "%regroot%\%%~ni" /v DisplayName 2^>nul^|find /i "DisplayName"') do set "DN=%%~k"
    for /f "tokens=2*" %%j in ('reg query "%regroot%\%%~ni" /v UninstallString 2^>nul^|find /i "UninstallString"') do set "US=%%~k"
    if not "!DN!"=="" if not "!US!"=="" if not defined $d!DN! (
        >>"%file%" echo(!US!^|!DN!
        set /a fcount+=1
        set "$d!DN!=!DN!"
        set "$u!DN!=!US!"
        <nul set/p"=."
    )
)
echo(
:menu
echo(%fcount% programs with uninstall strings found.
:loop
set /a pcount=0
set "program="
set /p "program=type a program name (q=quit): "
if not defined program goto:loop
if "%program%"=="q" goto:eof
echo(
for /f "tokens=2delims==" %%i in ('set $d ^|findstr !program! 2^>nul') do (
    echo(%%i
    echo(!$u%%i!
    echo(
    set /a pcount+=1
)
if %pcount% equ 0 (echo(!program! not found.) else echo(%pcount% program(s^) found.
goto:loop 
```

您可以使用某些`findstr`REGEX 功能（例如，`/i`用于不区分大小写的搜索）。请注意：要搜索所有以“M”开头的程序，您可以使用`"^$dM"`或`/b $dM`。可搜索的字符串总是有一个前导`$d`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-24T10:54:28.043

试试这个“双线”：

```
for /f "tokens=7 delims=\" %%a in ('reg query HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall /S /F "MySoftware" ^| find "{"') do set ProgramUninstallRegKey=%%a
for /f "skip=1 tokens=3*" %%a in ('reg query HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall\%ProgramUninstallRegKey% /V "UninstallString"') do set ProgramUninstallString=%%a %%b 
```

# php - 如何让我的代码检查有效的用户名和密码组合？

> ID：15957388
> 
> 赞同：0
> 
> 时间：2013-04-11T19:37:43.990
> 
> 标签：php

我正在制作一个网站，我现在只希望某些用户能够查看它。所以我想设置一个用户/通行证验证，并设置一些包含允许的用户名和密码的变量，但似乎有一个错误，因为即使我输入了一个随机的用户名或通行证，您仍然可以查看该站点。这是我的代码：

登录.php

```
<body>
<form action="check.php" method="get">
<Username:<input type="text" name="user" maxlength='8'>
<Password:<input type="password" name="password" maxlength='12'>
<input type="Submit" name="Submit" value="Submit">
</form>
<?php
print "<br><code> To proceed to the main page, please give the information and then click the button. You will be automatically be redirected.<br> </code>";
?>
</body> 
```

check.php（检查信息）

```
<?php

$user1 = '';
$user2 = '';
$pass1 = '';
$pass2 = '';

$_GET['user'];
$_GET['password'];

if($_GET['user'] && ($_GET['password'] = $user1 && $user2 && $pass1 && $pass2)) {
    header( "refresh:1;url=" );

} else {
echo 'You are unable to view this page yet, please try again later.';    
}{
}
?> 
```

我不明白我哪里出错了？我已经尝试了一段时间，但没有成功。

### 编辑

我已经对更改我的一些代码进行了排序，不确定谁真正帮助了我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T19:48:26.657

您想`POST`用于传递密码。

这是一种更安全的密码存储方式。

**表格**

```
<form action="check.php" method="post">
Username: <input type="text" name="user" maxlength='8'>
Password: <input type="password" name="password" maxlength='12'>
<input type="Submit" name="Submit" value="Submit">
</form> 
```

**邮报** `(check.php)`

```
$siteKey = 'YPfiC+NIY2JKXbRK_riP!nd0_7AC~9X s`%ax+|*3UpxlZAll3(E?eW#w-1`)|X ';

$users = array(
    array('user' => 'bob', 
          'password' => '56cee8ccfa519021a945a75c01c73c9538c9bce4e96842392d65e81161f8b1c9',
          'salt' => '> c>>.Sr>J-MPn@d/'),
    array('user' => 'tom', 
          'password' => 'd275d8f08ada53d42394b3f13b57f1ef8dad7405d563801d35bccc60038fd14a',
          'salt' => '=]:iK/VMb-{wYg`6+'));

if( !empty($_POST['user']) && !empty($_POST['password']) ) {
    foreach($users as $sub) {
        if( $sub[user] == $_POST['user'] ) {
           $hashPostPoassword = hash('sha256', $siteKey . $sub[salt] . $_POST['user']);

           if( $hashPostPassword == $sub[password] ) {
               //verified
           }
           else {
               echo "Wrong password";
           }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T19:41:59.633

关于这件事有两件事让我担心。第一个为什么你的表格是 GET 而不是 POST。

还有为什么这不是数据库驱动的。

假设您使用数据库：如果您将用户名和密码存储为纯文本，只需使用用户输入的任何内容运行查询并查看是否返回结果。

```
 Select * from users_table where username = $_POST['user'] and password = $_POST['password'];

 if(result from query) {
      //then the user exists and the info entered is correct
 } else {
    //either username and password is wrong or no such user exists.
 } 
```

否则你只有一个 = 符号，而需要 ==

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T19:44:45.750

在您的 if 语句中，您使用了一个等号，它将右侧的值分配给左侧的变量。如果要进行比较，则需要使用两个等号： if($user == $_GET['user'])

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-11T19:41:29.267

你真的应该看看你的语法。那是什么意思？

*   `$_GET['password'] = $user1` *永远*都是真的。[注意你少了一个`=`]
*   `&&user2`永远是*假*的。

实际上，不确定你想要什么。也许这个？

`if(($_GET['password'] == $pass1 && $_GET['user'] == $user1) || ($_GET['password'] == $pass2 && $_GET['user'] == $user2))`

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-11T19:47:51.500

如果您希望您的用户为临时解决方案进行硬编码，您可以执行以下操作：

```
<?php

$users = [
    'user0' => 'password0',
    'user1' => 'password1',
    'user2' => 'password2',
    'user3' => 'password3'
];

$login    = isset($_REQUEST['login'   ]) ? $_REQUEST['login'   ] : null;
$password = isset($_REQUEST['password']) ? $_REQUEST['password'] : null;

if( ! is_null($login) && in_array($login, $users) && $password === $users[$login]) {
    // Show your web site
}

?> 
```

请注意，这只是一个无 db 的解决方案，正如您所说，“现在”应该只有您自己。

# jquery - 为什么我的 jQuery 日期选择器 UI 插件没有在年份字段中显示向上/向下箭头

> ID：15957397
> 
> 赞同：7
> 
> 时间：2013-04-11T19:38:05.810
> 
> 标签：jquery, css, jquery-ui, jquery-plugins

根据这个[有问题的示例](http://www.ucanwest.ca/admissions/apply/online-application/?form=Application&page=3&ref=291ed3b6-4ef2-4869-bff1-8d21529ed7a3)，我似乎无法通过上下箭头来选择早于 2001 年或晚于 2021 年的日期。

```
Education Record
    did you complete high school? * --> Yes
    clicking Graduation Date *  
        clicking 2013 down arrow 
```

![例子](https://i.stack.imgur.com/ayORv.png)

任何想法是什么原因造成的？滚动箭头在 Windows 7 中的 IE10 中根本不显示，在 Firefox 中显示滚动箭头，但在 2001 年之前或 2021 年之后无法滚动。解决方法是选择最小或最大日期并再次单击箭头在几年之前或之后显示。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-15T03:06:28.190

试试这个[- jsFiddle](http://jsfiddle.net/apaul34208/STLRf/1/)

```
$(function () {
 $("#datepicker").datepicker({
     changeMonth: true,
     changeYear: true,
     yearRange: "-120:+10", // magic!
     dateFormat: 'mm/yy',
     onClose: function (dateText, inst) {
         var month = $("#ui-datepicker-div .ui-datepicker-month :selected").val();
         var year = $("#ui-datepicker-div .ui-datepicker-year :selected").val();
         $(this).datepicker('setDate', new Date(year, month, 1));
     }
  });
}); 
```

[API 文档`yearRange`](http://api.jqueryui.com/datepicker/#option-yearRange)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T12:11:23.057

在 jQuery-UI 中，您可以轻松地指定年份范围和默认日期。

```
 $( "#specific_birthdate" ).datepicker( {
        yearRange : "1950:2011",
        changeYear : true,
        defaultDate : new Date(1970, 0, 1, 0, 0, 0, 0)
    } ); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-11T19:51:59.680

正如我在您的屏幕截图中看到的，您使用的是 IE10，它的风格有点怪异。您的选择下拉列表将在 Chrome、FF、Safari 等良好的浏览器中正常工作......我很确定您是否为具有
.ui-datepicker-year 类的选择元素设置了固定高度，例如高度： 150像素；并添加溢出：自动；希望这可以帮助

# r - 如何在具有结构的循环中生成的图形中添加标题图

> ID：15957399
> 
> 赞同：-1
> 
> 时间：2013-04-11T19:38:12.250
> 
> 标签：r, ggplot2

我正在使用具有各种连续变量的数据库，并且必须使用 ggplot2 制作多个图。当我制作循环时，我不能将变量的名称放在每个情节的主要部分。我的循环是下一个：

```
library(ggplot2)
for(i in 1:10)
{
(qplot(Total, data = BaseClientes, geom = "histogram",binwidth = 50, fill = BaseClientes[,i])+geom_histogram(breaks =c(0,5000,10000,15000,20000,25000,30000,35000,40000)))
} 
```

我的问题是我必须手动添加每个变量的名称，如下所示：

```
(qplot(Total, data = BaseClientes, geom = "histogram",binwidth = 50, fill = 4 Groups,main="4 Groups Monto Total")+geom_histogram(breaks =c(0,5000,10000,15000,20000,25000,30000,35000,40000))) 
```

`4 groups`变量的名称在哪里。是否可以在 for 循环中添加所有图形的每个变量的名称。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T20:41:23.260

已经给出的答案将是“最佳实践”，但如果你必须使用，那么你只需要注意和`for`之间的区别。第二个将保留它的类`BaseClients[,i]``BaseClients[i]`

```
> df <- data.frame( var1 = 1:3, var2 = rnorm(3), var3 = sample(10,3))
> df
  var1        var2 var3
1    1 -0.29624838    9
2    2  0.08443593    4
3    3 -1.00889635    8

> class(df[,1])
[1] "integer"

> class(df[1])
[1] "data.frame" 
```

还有它的`names`属性。简而言之，试试这个：

```
for(i in 1:10) {
  qplot(Total, data = BaseClientes, geom = "histogram",binwidth = 50,
        main = names(BaseClientes[i])) +
    geom_histogram(breaks =c(0,5000,10000,15000,20000,25000,30000,35000,40000))
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T19:51:27.630

就像@Baptiste 所说，只需使用刻面。一个例子：

```
ggplot(aes(x = mpg), data = mtcars) + 
    geom_histogram() + 
    facet_wrap(~ cyl) 
```

![在此处输入图像描述](https://i.stack.imgur.com/jCFrb.png)

数据的结构需要类似于`mtcars`该数据集的样本：

```
> head(mtcars)
                   mpg cyl disp  hp drat    wt  qsec vs am gear carb
Mazda RX4         21.0   6  160 110 3.90 2.620 16.46  0  1    4    4
Mazda RX4 Wag     21.0   6  160 110 3.90 2.875 17.02  0  1    4    4
Datsun 710        22.8   4  108  93 3.85 2.320 18.61  1  1    4    1
Hornet 4 Drive    21.4   6  258 110 3.08 3.215 19.44  1  0    3    1
Hornet Sportabout 18.7   8  360 175 3.15 3.440 17.02  0  0    3    2
Valiant           18.1   6  225 105 2.76 3.460 20.22  1  0    3    1 
```

# python - 如何计时冒泡和插入排序？

> ID：15957402
> 
> 赞同：2
> 
> 时间：2013-04-11T19:38:14.490
> 
> 标签：python, sorting, python-2.7

我正在尝试计算气泡和插入排序的时间。排序对它们都很好，但它输出需要 15 秒，这显然是不正确的。任何建议如何解决这个问题？

```
# insertion sort
x = [7, 2, 3, 5, 9, 1]

def insertion(list):
    for index in range(1,len(list)):
        value = list[index]
        i = index - 1
        while i>=0 and (value < list[i]):
            list[i+1] = list[i] # shift number in slot i right to slot i+1
            list[i] = value # shift value left into slot i
            i = i - 1

# bubble sort
y = [7, 2, 3, 5, 9, 1]

def bubble(unsorted_list):
    length = len(unsorted_list) - 1
    sorted = False

    while not sorted:
        sorted = True
        for i in range(length):
            if unsorted_list[i] > unsorted_list[i+1]:
                sorted = False
                unsorted_list[i], unsorted_list[i+1] = unsorted_list[i+1], unsorted_list[i]

def test():
    bubble(y)
    insertion(x)

if __name__ == '__main__':
    import timeit
    print(timeit.timeit("test()", setup="from __main__ import test")) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T19:47:08.403

从[`timeit`文档](http://docs.python.org/2/library/timeit.html#timeit.timeit)中：

> **timeit.timeit** (stmt='pass', setup='pass', timer=, number=1000000)
> 
> 使用给定的语句、设置代码和计时器函数创建一个 Timer 实例，并运行其 timeit() 方法并执行次数。

所以你的代码运行了 1,000,000 次。将返回值除以`10**6`，您就可以上路了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T19:59:41.890

[profile](http://docs.python.org/2/library/profile.html "轮廓")也是您可以考虑的一个选项。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-11T19:48:58.910

试试这个，你捕获当前时间，执行函数，然后从当前时间中减去之前捕获的时间。

```
# insertion sort
x = [7, 2, 3, 5, 9, 1]

def insertion(list):
    for index in range(1,len(list)):
        value = list[index]
        i = index - 1
        while i>=0 and (value < list[i]):
            list[i+1] = list[i] # shift number in slot i right to slot i+1
            list[i] = value # shift value left into slot i
            i = i - 1

# bubble sort
y = [7, 2, 3, 5, 9, 1]

def bubble(unsorted_list):
    length = len(unsorted_list) - 1
    sorted = False

    while not sorted:
        sorted = True
        for i in range(length):
            if unsorted_list[i] > unsorted_list[i+1]:
                sorted = False
                unsorted_list[i], unsorted_list[i+1] = unsorted_list[i+1], unsorted_list[i]

def test():
    start = time.clock()
    bubble(y)
    elapsed = (time.clock() - start)
    print "Time taken for bubble = ", elapsed
    start = time.clock()
    insertion(x)
    elapsed = (time.clock() - start)
    print "Time taken for Insertion = ", elapsed

if __name__ == '__main__':
    import time
    test() 
```

# android - Mono for Android - 纵向的所有活动

> ID：15957404
> 
> 赞同：5
> 
> 时间：2013-04-11T19:38:20.283
> 
> 标签：android, android-activity, orientation, xamarin.android, xamarin

我有一个 MonoDroid 应用程序，我想强制我的所有活动仅以纵向显示。

我想创建一个 Activity 基类，例如：

```
[Activity (ScreenOrientation = ScreenOrientation.Portrait)]         
public abstract class BaseActivity : Activity
{
} 
```

然后我的应用程序中的所有其他活动都应该从它继承（也避免重复并有一个中心位置来定义`ScreenOrientation = ScreenOrientation.Portrait`）。

但是，如果您查看`ActivityAttribute`定义，似乎它不支持继承。

```
[Serializable]
[AttributeUsage(AttributeTargets.Class, AllowMultiple = false, Inherited = false)]
public sealed class ActivityAttribute : Attribute { ... } 
```

1.  我必须`Activity (ScreenOrientation = ScreenOrientation.Portrait)`在我的应用程序的所有活动中放入吗？
2.  在 Android 世界中只支持纵向方向是不是一个坏主意？（我有一个仅支持纵向的 iOS 应用程序，它运行得非常好，并且不需要在横向上运行）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T19:46:21.400

您需要将属性放在每个活动上。如果您正在创建一个原生 Android 应用程序，您需要用 标记清单中的每个 Activity `android:screenOrientation="portrait"`，使用此属性向 Mono For Android 发出信号以执行相同的操作。

不幸的是，属性并没有像您注意到的那样继承。

# matlab - 显示特定数字是否在数组中 -matlab

> ID：15957409
> 
> 赞同：0
> 
> 时间：2013-04-11T19:38:44.833
> 
> 标签：matlab

该程序是

```
clc;
clear;
d =input('enter the hop count of all path');  % [ 1 2 3]
en=[1 0 0 0 0 0 0;   1 1 1 1 1 1 1 ;   1 1 0 0 0 0 0; 1 0 1 0 1 0 1; 1 1 1 1 0 0 0]
c = cumsum(d);    % [1, 3, 6]
s = ceil(size(en,1)*c/c(end));    % [2, 5, 9] 
n = [s(1) diff(s)]; % [2, 3, 4]
B = mat2cell(en, n, size(en,2)); 
n=1;
for i=1:length(d)

disp(sprintf('the transmiting frame thr path %d ',n));
disp(B{i});
n=n+1;
end
disp ('SINGLE BIT ERROR');
        S=randint(1,1,[1,size(en,1)]);
        T=randint(1,1,[1,size(en,2)]);
        if (en(S,T)==1)
            en(S,T)=0;
        elseif (en(S,T)==0)
            en(S,T)=1;
        end
        disp(en);
        disp('SINGLE BIT ERROR INTRODUCED AT');
        disp(S);               %row
        disp(T);                % column
        p=S*T; 
        disp('error at bit');
        disp(p);                       %displays which bit is error

for i=1:length(d)
    disp(sprintf('size of transmitted frame %d',i));
    disp(size(B{i}));              % size of each transmitted frame
    ee(i)=(size(B{i},1)*size(B{i},2)); 
end
disp('display (row*column) of each frame');
    disp(ee(:));               % displays (row*column) of each frame
kk=cumsum(ee(:));
disp('the cumulative sumation is ');
disp(kk);                    % cumulative sumation of the elements in ee 
```

输出将是

```
enter the hop count of all path[ 1 2 3]

en =

     1     0     0     0     0     0     0
     1     1     1     1     1     1     1
     1     1     0     0     0     0     0
     1     0     1     0     1     0     1
     1     1     1     1     0     0     0

the transmiting frame thr path 1 
     1     0     0     0     0     0     0

the transmiting frame thr path 2 
     1     1     1     1     1     1     1
     1     1     0     0     0     0     0

the transmiting frame thr path 3 
     1     0     1     0     1     0     1
     1     1     1     1     0     0     0

SINGLE BIT ERROR
     1     0     0     0     0     0     0
     1     1     1     1     1     1     1
     1     1     0     0     0     0     0
     1     0     1     0     1     1     1
     1     1     1     1     0     0     0

SINGLE BIT ERROR INTRODUCED AT
     4

     6

error at bit
    24

size of transmitted frame 1
     1     7

size of transmitted frame 2
     2     7

size of transmitted frame 3
     2     7

 display (row*column) of each frame
     7
    14
    14

the cumulative sumation is 
     7
    21
    35

>> 
```

因此 p=24 存在于 kk(2) 和 kk(3) 之间。它应该显示“第 3 帧有错误”。同样，如果 p<=kk(1)，它应该显示'第 1 帧有错误'，如果 p 在 kk(1) 和 kk(2) 之间，它应该显示'第 2 帧有错误'。但是长度 (d) 会随着用户的输入而相应变化。我无法像这样显示它。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T20:06:44.050

使用 SPRINTF 函数。因为`kk`是`cumsum`函数的输出，所以是排序的，可以`find`用来查找帧索引。

```
if p <= kk(end)
    idx = find((kk-p)>=0, 1);
    disp( sprintf('frame %d has error',idx) )
end 
```

# android - 在android中，如何提高麦克风的输入以进行录音？

> ID：15957414
> 
> 赞同：1
> 
> 时间：2013-04-11T19:39:20.570
> 
> 标签：android, audio, record

我写了一个记录音频的应用程序。一切正常。但是，我将使用这个应用程序来记录课堂笔记。如何提高麦克风的输入以更好地捕捉所有噪音？如果必须，我不介意使用 root。但不确定是否有 API 可以做到这一点。

感谢大家阅读！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T19:50:32.930

如果您问如何使麦克风更灵敏，我不确定。这将涉及在更高的电压下操作麦克风和/或破解驱动程序，这两者都不能以编程方式实现，AFAIK。但是，您可以尝试通过将输出乘以某个值来放大输出（例如 1.1 表示 10% 的音量提升）。当然，您“放大”输出越多，扬声器就越饱和（也就是使音频失真）。您可以尝试一些信号处理技术来消除背景噪声并隔离感兴趣的特定音频，但是，这些只是处理改进，而不是硬件升级。您可以随时尝试将外部麦克风插入耳机插孔并使用它来录制音频。

我知道这不是您希望的答案，但我希望它有所帮助。

# c# - 无法序列化时间跨度值

> ID：15957419
> 
> 赞同：1
> 
> 时间：2013-04-11T19:39:39.383
> 
> 标签：c#, .net, serialization, time

**我必须以“00:00:23.123213”**的格式保持时间。

 **所以我尝试使用`Timespan`

```
 [Serializable()]
    public class Item
    {
        public TimeSpan Start { get; set; } 
```

但该字段在文件中始终为**空**。

```
var test = new ContentItems();
 var item2 = new Item();
            item2.ContentType = ContentTypes.Paragraph;
            item2.Data = "Create a new XmlSerializer instance with the type of the test class.";
            item2.DataType = DataTypes.Text;
            item2.Start = TimeSpan.FromSeconds(6);
            item2.End = TimeSpan.FromSeconds(9);
            test.Items.Add(item2);

            using (var writer = new System.IO.StreamWriter(@"C:\Projects\1.xml"))
            {
                var serializer = new XmlSerializer(typeof(ContentItems));
                serializer.Serialize(writer, test);
                writer.Flush();
            } 
```

我的问题：***哪种类型更适合在 .NET 中序列化时间？*****

# html - 正则表达式：在 HTML 标记之间查找小写字母组

> ID：15957420
> 
> 赞同：3
> 
> 时间：2013-04-11T19:39:40.823
> 
> 标签：html, regex, epub

我正在尝试开发一个可以在ePub 2 编辑器[Sigil中运行的正则表达式。](http://code.google.com/p/sigil/)

小型股是当前 ePub 阅读器生态系统中的一个众所周知的问题。许多阅读器，例如 Adob​​e Digital Editions，不支持“font-variant: small-caps”。在尝试了几种不同的解决方法后，我决定通过将文本转换为大写并将以前的小写字母设置为“font-size: 0.75em”来创建假的小型大写字母。

这个过程非常繁琐，尤其是在处理有很多尾注并引用其他书籍的书籍时。

假设我在一个带有“SC”类标签的 HTML 页面中有一堆短语。我创建了一个测试短语：

```
<span class="SC">Hello World! Testing: one tWo thrEE &amp; W.T.F.</span>
<span class="foo">Don't touch me!</span> 
```

目标是编写一个仅匹配“SC”跨度标记内的任何小写字母的正则表达式，并将它们替换为：

```
<span class="FSC">LETTERS</span> 
```

我可以设法匹配和替换第一个单词“Hello”中的字母，但在那之后一切都崩溃了。

这是我到目前为止所得到的：

**寻找：**

```
(<span class="SC">.*?)([a-z]+)(.*</span>) 
```

**代替：**

```
\1<span class="FSC">\U\2\E</span>\3 
```

棘手的部分是继续在该标签中找到其余的小写字母，现在引入了新的“FSC”（假小写字母）跨度标签。再次尝试相同的正则表达式会导致“span”，然后“class”得到*FSC*处理。理想情况下，我希望能够一直点击“全部替换”按钮，直到找不到更多匹配项。

完成后，上面的示例将如下所示：

```
<span class="SC">H<span class="FSC">ELLO</span> W<span class="FSC">ORLD</span>! T<span class="FSC">ESTING</span>: <span class="FSC">ONE</span> <span class="FSC">T</span>W<span class="FSC">O</span> <span class="FSC">THR</span>EE &amp; W.T.F.</span>
<span class="foo">Don't touch me!</span> 
```

它并不漂亮，但它适用于我测试过的每个 ePub 阅读器。

如果您在 Google 上搜索“epub small caps regex”，您会看到我编辑的 MobileRead wiki 文章以包含此正则表达式，但我认为该文章并不令人满意：

```
(<span class="[a-zA-Z0-9\- ]*?(?<!F)SC[a-zA-Z0-9\-]*?">(?:.+?<span class="FSC">.+?</span>)*[\.|,|:|;|-|–|—|!|\?]? ?(?:&amp;)? ?[A-Z]+)([a-z'’\. ]+)(.*?</span>) 
```

这最终会缩小一堆标点符号，有时会停在一个短语的中间。我重新开始，认为可能有一个更好的解决方案，它不会尝试预先计划每一种可能性。

如果有人对此提出更好的解决方案，您将成为整个 ePub 出版业的英雄。

## 更新

我已将接受的（也是唯一的）答案添加到[Mobile Read wiki](http://wiki.mobileread.com/wiki/EPubHacks)。请注意，此正则表达式已专门为在 Sigil 中使用而进行了更改；YMMV 在其他环境中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T20:11:55.130

完美用例：[在单个正则表达式中折叠和捕获重复模式](https://stackoverflow.com/questions/15268504/collapse-and-capture-a-repeating-pattern-in-a-single-regex-expression)

针对您的情况对其进行了修改：

```
(<span class="SC">(?:(?!<\/span>)(?:[^a-z&]|&[^;]+;))*|(?!^)\G(?:(?!<\/span>)(?:[^a-z&]|&[^;]+;))*)([a-z]+) 
```

用。。。来代替：`\1<span class="FSC">\U\2\E</span>`

这是正则表达式的解释：[http ://regex101.com/r/jU6bA5](http://regex101.com/r/jU6bA5)

这是“**全部替换**”的解决方案，因为它通过 RegEx 全局修饰符工作`/g`！

# python - 如何使用回调将同步函数转换为python中的异步函数？

> ID：15957421
> 
> 赞同：0
> 
> 时间：2013-04-11T19:39:43.433
> 
> 标签：python, mongodb, asynchronous, tornado, synchronous

我正在使用 tornado 框架，并且我的所有功能都是同步编写的。我将如何使这些异步？

```
class AuthLoginHandler(BaseHandler):
    @tornado.web.asynchronous
    def get(self):

        self.render("login.html")

    def post(self):
        username = self.get_argument("UserName",strip = True)
        password = self.get_argument("Password",strip = True)
        user = auth_actions.login(username,password)
        if not user:
            self.redirect("/auth/login")
            return

        #user = user_actions.get_my_data(self.db,user['_id'])

        self.set_secure_cookie("userdata", tornado.escape.json_encode(dumps(user.to_mongo())))
        self.redirect("/")

def login(username,password,callback=None):
    m = hashlib.md5()
    m.update(password)
    hashed = m.hexdigest()
    login = User.objects(UserName=username.lower(),Password=hashed).exclude("Password","Wall","FriendsRequested","Friends","FriendsRequesting")
    if login.first() is None:
        login = User.objects(Email=username.lower(),Password=hashed).exclude("Password","Wall","FriendsRequested","Friends","FriendsRequesting")
        if login.first() is None:
            return None
    logger.info(username + " has logged in")
    if callback != None:
        return callback(login.first())

    return login.first() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T14:18:44.620

正如 andy boot 所提到的，您将需要一个单独的线程。下面的代码使用来自[tornado-gen](http://www.tornadoweb.org/en/stable/gen.html#module-tornado.gen)`generator`的-`coroutine`方法。另请注意，它将您的功能包装在自己的线程中。`run_async` `decorator`

```
import tornado.ioloop
import tornado.web
import tornado.gen
import time
from threading import Thread
from functools import wraps

def run_async(func):
  @wraps(func)
  def async_func(*args, **kwargs):
    func_hl = Thread(target = func, args = args, kwargs = kwargs)
    func_hl.start()
    return func_hl

  return async_func

@run_async
def login(username,password,callback=None):
  m = hashlib.md5()
  m.update(password)
  hashed = m.hexdigest()
  login = User.objects(UserName=username.lower(),Password=hashed).exclude("Password","Wall","FriendsRequested","Friends","FriendsRequesting")
  if login.first() is None:
    login = User.objects(Email=username.lower(),Password=hashed).exclude("Password","Wall","FriendsRequested","Friends","FriendsRequesting")
    if login.first() is None:
      return None
  logger.info(username + " has logged in")
  if callback != None:
    return callback(login.first())
  return login.first()

class AuthLoginHandler(BaseHandler):
  @tornado.web.asynchronous
  def get(self):
    self.render("login.html")

  @tornado.web.asynchronous
  @tornado.gen.coroutine
  def post(self):
    username = self.get_argument("UserName",strip = True)
    password = self.get_argument("Password",strip = True)
    user = yield tornado.gen.Task(auth_actions.login, username, password)
    if not user:
      self.redirect("/auth/login")
      return
    self.set_secure_cookie("userdata", tornado.escape.json_encode(dumps(user.to_mongo())))
    self.redirect("/") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T13:58:35.833

如果您要对密码进行哈希处理，最好在单独的线程中进行。这是因为散列需要很长时间才能执行并且会阻塞主线程。

[这是在单独线程上散列的示例](https://stackoverflow.com/questions/13103049/how-can-i-hash-a-password-in-tornado-with-minimal-blocking)

请注意，Tornado 的维护者 Ben Darnell 建议使用单独的线程来进行密码哈希：[请参阅这个 google 组](https://groups.google.com/forum/#!topic/python-tornado/wQgm_Slh5II)。

# mysql - MySql Innodb 表奇怪的 SELECT 锁/超时

> ID：15957424
> 
> 赞同：1
> 
> 时间：2013-04-11T19:39:48.973
> 
> 标签：mysql, select, locking, timeout, innodb

我在 Innodb 表中的 SELECT 遇到了一个奇怪的问题，它永远不会返回，我等了两个多小时才看到结果，但没有，还在等待。

```
CREATE TABLE `example` (
  `id` int(11) NOT NULL,
  `done` tinyint(2) NOT NULL DEFAULT '0',
  `agent` tinyint(4) NOT NULL DEFAULT '0',
  `text` varchar(256) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `da_idx` (`done`,`agent`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 | 
```

我无法获得结果的查询是：

```
SELECT id, text FROM example WHERE done = 0 AND agent = 0 LIMIT 120; 
```

首先我想到了一些索引优化或锁定问题，我花了一些时间研究，但后来我发现了这个：

```
SELECT id FROM example WHERE done = 0 AND agent = 0 LIMIT 120;
...
...
...
120 rows in set (0.27 sec)

SELECT text FROM example WHERE done = 0 AND agent = 0 LIMIT 120;
...
...
...
120 rows in set (0.83 sec) 
```

现在我迷路了，如何使用完全相同的查询（相同的 WHERE 和 LIMIT）分别获取 id 或 text 列可以完美地工作，然后不能同时获得它们？

之后再次执行“SELECT id, text...”，两次查询效果相同，永不返回。

任何帮助表示赞赏，Innodb 大师可以提供帮助；）

补充信息：看起来不像事务锁问题，看下一个查询的响应时间呈指数增长：

```
SELECT id, text FROM example WHERE done = 0 AND agent = 0 limit 109;
...
109 rows in set (0.31 sec)

SELECT id, text FROM example WHERE done = 0 AND agent = 0 limit 110;
...
110 rows in set (3.98 sec)

SELECT id, text FROM example WHERE done = 0 AND agent = 0 limit 111;
...
111 rows in set (4 min 5.00 sec) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T04:51:36.820

我找到了自己问题的解决方案，我想在这里分享，因为这很奇怪，至少对我来说。

我一直认为 mysql 客户端在每次查询后返回的时间延迟（例如“120 rows in set (0.27 sec)”）是 mysql 服务器生成该结果所需的时间，但不是。

**问题是网络问题！与mysql服务器完全没有关系！**

因此，我发现，与我一直认为的相反， **mysql 客户端显示的每个查询后的时间都包括网络延迟**。来自与mysql服务器相同数据中心的服务器的相同请求和来自另一个国家的另一个请求返回不同的时间（相当不同）。

# javascript - 附加重复的 javascript 对象

> ID：15957426
> 
> 赞同：1
> 
> 时间：2013-04-11T19:39:49.800
> 
> 标签：javascript

在下面的代码中，我正在 JS 中开发一个简单的计时器。问题是生成的代码只显示一组分隔符冒号。

```
var divider = $('<span>').addClass('divider').text(':');
stopwatchFace = stopwatchFace.append(timeHour).append(divider)
                             .append(timeMin).append(divider).append(timeSec); 
```

第一个没有被捡起来有什么原因吗？我应该明确定义一个divider1 和一个divider2 对象吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T19:42:28.087

如果附加一个已经附加的元素，结果是它被移动了。

您需要克隆元素。在 vanilla JS 中，这就像`divider.cloneNode(true)`.
在 jQuery 中也很简单：`divider.clone()`. 感谢博阿斯提供的信息^_^

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T19:42:51.213

使用需要克隆分隔线。由于分隔符是 dom 单个元素，不能同时存在两个地方。

```
var divider = $('<span>').addClass('divider').text(':');
stopwatchFace = stopwatchFace.append(timeHour).append(divider.clone())
                             .append(timeMin).append(divider).append(timeSec); 
```

# dart - 如何在 base64 中编码 Dart 字符串？

> ID：15957427
> 
> 赞同：46
> 
> 时间：2013-04-11T19:39:49.990
> 
> 标签：dart

我正在使用需要以 base64 编码的数据的 API。如何在 base64 中编码一个简单的字符串？

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2016-02-13T23:52:58.223

无需使用 crypto 包，因为核心库提供了对 base64 编码和解码的内置支持。

[https://api.dartlang.org/stable/2.1.0/dart-convert/dart-convert-library.html](https://api.dartlang.org/stable/2.1.0/dart-convert/dart-convert-library.html)

```
import 'dart:convert';

main() {
  final str = "Hello world";
  final bytes = utf8.encode(str);
  final base64Str = base64.encode(bytes);
  print(base64Str);
} 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-04-11T19:39:49.990

它需要几个步骤，但在 base64 中编码字符串非常简单。

Dart 在[package:crypto](http://www.dartdocs.org/documentation/crypto/0.9.0/index.html#crypto/crypto.CryptoUtils@id_bytesToBase64)库中有一个函数`CryptoUtils.bytesToBase64`，它接受一个字节列表来编码为 base64。为了从 Dart 字符串中获取字节列表，可以使用[dart:convert](https://api.dartlang.org/apidocs/channels/stable/dartdoc-viewer/dart:convert.Utf8Codec#id_encode)库`UTF8.encode()`中的函数。

总之，这看起来像：

```
import 'dart:convert';
import 'package:crypto/crypto.dart';

main() {
  var str = "Hello world";
  var bytes = UTF8.encode(str);
  var base64 = CryptoUtils.bytesToBase64(bytes);
  print(base64);
} 
```

* * *

如果您在浏览器中工作，那么您可以更轻松地选择使用浏览器的内置`btoa`功能。上面的代码片段变成：

```
import 'dart:html';

main() {
  var str = "Hello world";
  var base64 = window.btoa(str);
  print(base64);
} 
```

# ruby - 按月分组时向数组添加空月份

> ID：15957430
> 
> 赞同：0
> 
> 时间：2013-04-11T19:39:52.317
> 
> 标签：ruby, activerecord, ruby-on-rails-3.2, group-by

我正在尝试计算每个月数据库中的记录数。但是有几个月没有任何记录，我也想将它们添加到我的数组中

```
@activity = Activity.find(params[:id])
records_by_month = @activity.records.max_12_months.group_by{ |t| t.happened.beginning_of_month }
hori = Array.new
verti = Array.new
records_by_month.sort.each do |month, recs|
  hori.push(month.strftime('%B'))
  verti.push(recs.count)
end 
```

这是 records_by_month 的样子：

```
#<OrderedHash {Tue, 01 Jan 2013=>[#<Record id: 37, details: "",
happened: "2013-01-09", duration: nil, activity_id: 21, created_at: "2013-04-11 14:31:30",
updated_at: "2013-04-11 14:31:30", price: 15.0>], Fri, 01 Mar 2013=>
[#<Record id: 36, details: "", happened: "2013-03-04", duration: nil,
activity_id: 21, created_at: "2013-04-11 14:31:12", updated_at: "2013-04-11 14:31:12", price: 15.0>],
Thu, 01 Nov 2012=>[#<Record id: 38, details: "", happened: "2012-11-29",
duration: nil, activity_id: 21, created_at: "2013-04-11 14:31:51",
updated_at: "2013-04-11 14:31:51", price: 15.0>]}> 
```

知道如何将月份名称添加到 hori，并将 0 添加到没有记录的每个月的 verti 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T20:40:37.673

这是对您的问题的提示，而不是完整的解决方案：

```
require 'date'

h = {"Tue, 01 Jan 2013" =>[Record_id: 37, details: "",
happened: "2013-01-09", duration: nil, activity_id: 21, created_at: "2013-04-11 14:31:30",
updated_at: "2013-04-11 14:31:30", price: 15.0], "Fri, 01 Mar 2013" =>
[Record_id: 36, details: "", happened: "2013-03-04", duration: nil,
activity_id: 21, created_at: "2013-04-11 14:31:12", updated_at: "2013-04-11 14:31:12", price: 15.0],
"Thu, 01 Nov 2012" =>[Record_id: 38, details: "", happened: "2012-11-29",
duration: nil, activity_id: 21, created_at: "2013-04-11 14:31:51",
updated_at: "2013-04-11 14:31:51", price: 15.0]}

hori = {}
verti = {}

h.each {|k,v| hori[Date.parse(k).strftime('%B')] = v}
p hori

Date::MONTHNAMES.compact.map {|m| verti[m]=0 unless hori.keys.include? m}
p verti 
```

*输出：*

```
{"January"=>[{:Record_id=>37, :details=>"", :happened=>"2013-01-09", :duration=>nil, :activity_id=>21, :created_at=>"2013-04-11 14:31:30", :updated_at=>"2013-04-11 14:31:30", :price=>15.0}], "March"=>[{:Record_id=>36, :details=>"", :happened=>"2013-03-04", :duration=>nil, :activity_id=>21, :created_at=>"2013-04-11 14:31:12", :updated_at=>"2013-04-11 14:31:12", :price=>15.0}], "November"=>[{:Record_id=>38, :details=>"", :happened=>"2012-11-29", :duration=>nil, :activity_id=>21, :created_at=>"2013-04-11 14:31:51", :updated_at=>"2013-04-11 14:31:51", :price=>15.0}]}

{"February"=>0, "April"=>0, "May"=>0, "June"=>0, "July"=>0, "August"=>0, "September"=>0, "October"=>0, "December"=>0} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T19:59:00.450

好的（为测试稍作更改）......这样的事情怎么样？

```
ALL = [%w{
  January February March
  April   May      June
  July    August   September
  October November December
}, [0] * 12].transpose
hori = Hash[ALL]
verti = Hash[ALL]
{'January' => 1, 'March' => 5}.each do |month, recs|
  hori[month] = :test
  verti[month] = recs
end
p hori.sort.map(&:last)  # => [0, 0, 0, 0, :test, 0, 0, :test, 0, 0, 0, 0]
p verti.sort.map(&:last) # => [0, 0, 0, 0, 1, 0, 0, 5, 0, 0, 0, 0] 
```

# python - 解码金字塔 POST 数据（MultiDict 对象）

> ID：15957433
> 
> 赞同：4
> 
> 时间：2013-04-11T19:40:03.757
> 
> 标签：python, json, pyramid

我收到一个 POST 请求，其中的数据格式为 MultiDict 对象。我在哪里可以找到有关此数据结构的文档？以及将这些数据解码为字典对象（内部包含列表和字典）的最佳方法（库）是什么

我确实[在 urllib3 中找到了这个，](http://code.google.com/p/urllib3/source/browse/urllib3/multidict.py?name=multidict)但不确定是否是这样。首选方式。

我已经编写了大部分代码来匹配这种数据风格，所以我并不期待改变从 HTML 表单本身发送数据的方式。

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-11T19:44:09.300

`MultiDict`是[WebOb 项目](http://webob.org/)的一部分，请参阅它的[MultiDict 文档](https://docs.pylonsproject.org/projects/webob/en/stable/api/multidict.html)。

A 的`MultiDict`行为与*python*字典差不多，只是你可以使用and方法显式地请求*一个*值或一个值*列表。*[`.getone()`](https://docs.pylonsproject.org/projects/webob/en/stable/api/multidict.html#webob.multidict.MultiDict.getone)[`.getall()`](https://docs.pylonsproject.org/projects/webob/en/stable/api/multidict.html#webob.multidict.MultiDict.getall)

[`.mixed()`](https://docs.pylonsproject.org/projects/webob/en/stable/api/multidict.html#webob.multidict.MultiDict.mixed)根据需要返回具有单个值和列表值的字典来表示每个键，或者您可以使用它[`.dict_of_lists()`](https://docs.pylonsproject.org/projects/webob/en/stable/api/multidict.html#webob.multidict.MultiDict.dict_of_lists)来为所有键生成列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-01T20:04:27.457

更新的文档链接：[Webob MultiDict](https://tools.ietf.org/doc/python-webob/docs/modules/webob.html#misc-functions-and-internals)

你可能想要`mixed()`或`dict_of_lists()`。

# c - 在C中的文件上的结构数组中写入条目

> ID：15957435
> 
> 赞同：0
> 
> 时间：2013-04-11T19:40:06.900
> 
> 标签：c, arrays, file, structure

我正在用 C 编写程序并尝试将结构数组保存到文件中。我的意图是初始化一个结构数组并将其保存到文件中。此外，我想修改 struct-entry 1、struct-entry 2、struct-entry 3 等的条目。但是这些条目没有写入文件。甚至似乎不存在任何结构数组。

我会很感激任何帮助，因为我不知道为什么数组没有写入文件。

谢谢你

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

struct liste {
    unsigned int code;
    unsigned int activ;
    };
int main()
{
int z;

printf("Enter Index: "); /* Data should fill the z-th entry in array of structures */
scanf("%d",&z);

FILE *mrp;
struct liste bauteil[5]; /* Array with 5 structs for 5 different entries */

mrp = fopen("aaa.txt","w+b");

printf("Number of entry is: %d\n",z);
printf("Enter code: ");
scanf("%d",&bauteil[z].code);
bauteil[z].activ=77777; /* activ entry contains 77777 */

fseek(mrp, z * sizeof(struct liste), SEEK_SET);
fwrite(&bauteil[],sizeof(bauteil),1,mrp);

fclose(mrp);
return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T22:33:57.307

至

```
mrp = fopen("aaa.txt","r+b");
fwrite(&bauteil[z],sizeof(struct liste),1,mrp); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T20:03:24.557

查看 fwrite 参数。要编写整个数组，您需要编写 5 个结构，这些结构由`bauteil`. 尝试`fwrite(bauteil,sizeof(struct liste),5,mrp);` 当前写入太短，因为 sizeof(bauteil) 不会返回整个数组的大小。

# java - 如何使用 android-json-rpc 进行 Android（客户端）/Java（服务器）设置？

> ID：15957436
> 
> 赞同：0
> 
> 时间：2013-04-11T19:40:15.090
> 
> 标签：java, android, json, json-rpc

我正在尝试将[https://code.google.com/p/android-json-rpc/](https://code.google.com/p/android-json-rpc/)用于 android 并在 java 服务器上使用[https://github.com/RitwikSaikia/jsonrpc 。](https://github.com/RitwikSaikia/jsonrpc)

我遵循了 android-json-rpc 客户端和 jsonrpc 服务器设置的示例。

在我的 Android 应用程序中使用 android-json-rpc 时，我执行以下操作。

```
JSONRPCClient client = JSONRPCClient.create("http://service/uri",JSONRPCParams.Versions.VERSION_2);
client.setConnectionTimeout(2000);
client.setSoTimeout(2000);
try 
{
  client.callString("SimpleCalculatorImpl");
  double i = client.callDouble("add", 56, 25);
}
catch (JSONRPCException e)
{
  e.printStackTrace();
} 
```

对于 Java 服务器，我遵循了[https://github.com/RitwikSaikia/jsonrpc#defining-interfaces](https://github.com/RitwikSaikia/jsonrpc#defining-interfaces)和[https://github.com/RitwikSaikia/jsonrpc#hosting-the-service上的示例](https://github.com/RitwikSaikia/jsonrpc#hosting-the-service)

当我调用方法时

```
String string = client.callString("SimpleCalculatorImpl"); 
```

它抛出一个 JSONRPCException: Cannot convert result to String 这来自 callString 方法。

有没有人遇到过这个错误或者知道更好的库来用于Android客户端到Java服务器的JSON？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T19:53:34.307

我还没有尝试过该库，但我知道当 json 未正确解析时会发生此异常，尝试复制结果并通过[JSONLint之类的 json 验证器运行它](http://jsonlint.com/)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-10T18:57:01.820

我实际上只是在 Android 客户端和 Java 服务器端都使用了[https://github.com/FasterXML/jackson](https://github.com/FasterXML/jackson)并创建了我自己的带有反射的 servlet 来处理对 Java 服务器上的方法的调用并在 Android 客户端上取回结果

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-06T21:47:58.700

我没有使用过这两个库，但是通过简单的观察，似乎 jsonrpc 服务器库使用 注册了一个前缀处理程序`executor.addHandler("calc", calcImpl, Calculator.class);`，因此“add”方法的完全限定名称将是“calc.add”。因此，只需尝试在您的代码中执行以下操作：

```
double i = client.callDouble("calc.add", 56, 25); 
```

不需要 call `client.callString("SimpleCalculatorImpl");`，因为 callString() 应该用于返回 String 结果的 RPC 调用。

# java - 带有子查询的 JPQL 以选择最大计数

> ID：15957441
> 
> 赞同：7
> 
> 时间：2013-04-11T19:40:32.080
> 
> 标签：java, sql, hibernate, jpql, named-query

我正在尝试编写一个 jpql 查询来选择评论最多的用户。如果两个用户的评论数量相同，我想同时选择两者。

我试过这个，像这样：

```
SELECT
  c.user, COUNT(c.id) as commentCount 
FROM 
  Comment c
WHERE
  commentCount = (SELECT MAX(SIZE(user.comments)) FROM User user)
GROUP BY 
  c.user 
```

和这个：

```
SELECT
  c.user
FROM 
  Comment c
GROUP BY 
  c.user
HAVING
  COUNT(c) = (SELECT MAX(SIZE(user.comments)) FROM User user) 
```

这两种方法都不起作用。我需要在这里做什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-03-27T21:23:18.763

这是一个解决方案：

```
SELECT
  u
FROM 
  User u
WHERE
  u.comments.size = (SELECT MAX(u2.comments.size) FROM User u2) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T22:39:03.710

如果您使用的是 Oracle，这应该可以工作：

```
select u from User u where size(u.comments) = (
    select max(count(c.id)) 
    from User u2 inner join u2.comments c 
    group by u2.id
) 
```

`max(count(c.id))`但在这种情况下，MySQL 和 SQL Server 不支持嵌套聚合函数。建议使用子查询，但使用 HQL，您不能在 from 子句中包含子查询。所以我建议您手动执行此操作，即加载所有用户：

```
select u, size(u.comments)
from User u 
```

并遍历列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-15T16:09:34.333

For any others coming here and wanting to select a max(count()) in jpql and doesn't have an array, (like in the question the comments) take following jpql code into consideration:

```
select e.city 
from Employees e
group by e.city 
having count(e.id) >= All(select count(e) from Employees  e group by e.city) 
```

full example in a JPA Repository:

```
@Query(value = "select e.city from Employees e group by e.city " +
        "having count(e.id) >= All(select count(e) from Employees  e group by e.city)")
public List<Cities> findCityByMaxEmployeeCount(); 
```

# php - JSON 到 HTML 表

> ID：15957442
> 
> 赞同：2
> 
> 时间：2013-04-11T19:40:32.727
> 
> 标签：php, javascript, jquery, ajax, json

好吧，我还没有解决这个问题。现在已经玩了几天了。我已经做的是：我写了一个 php 脚本来呼应我的 JSON 数据结构。我现在正在尝试编写一个 Html 脚本，它将以 JSON 格式获取结果，但在 html 表中回显。我编写了我的 html 页面，但由于某种原因，表格没有显示出来。

好的，我的 json_encode($res->fetchAll()) 回声看起来像这样；

```
[{"name":"Victoria 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T19:43:13.340

使用[数据表](http://www.datatables.net/)。它非常强大且易于使用的 java script api。它提供了许多功能以及排序搜索等。

您只需要更改 JSON 的格式，其余的都将由数据表处理。

一个[例子](http://www.datatables.net/release-datatables/examples/data_sources/server_side.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T19:48:23.737

您的输出不是有效的 json，`echo "{$res->numRows()}<br/>";`它会使其无效并需要删除。

# html - 我在我的 Tumblr 主题上插入了一个元数据部分，但它没有显示出来。无论如何我可以解决这个问题吗？

> ID：15957447
> 
> 赞同：0
> 
> 时间：2013-04-11T19:40:49.810
> 
> 标签：html, tumblr

这是我的代码。

```
{block:Date}
<section class="metadata">
<ul class="index">
<li>Date Posted: <a href="{Permalink"><time datetime="{MonthNumberWithZero}-{DayOfMonthWithZero}-{Year}">{Month} {DayOfMonth}, {Year}</time></a></li>

{block:ContentSource}
<li>{lang:Source}:<a href="{SourceURL}">{block:NoSourceLogo}{SourceTitle}{/block:NoSourceLogo}
{block:SourceLogo}<img src="{BlackLogoURL}" width="{LogoWidth}"height="{LogoHeight}" alt="{SourceTitle}" />{/block:SourceLogo}</a></li>
{/block:ContentSource} 

{block:NoteCount}<li><a class="notecount" href="{Permalink}#notes">{NoteCountWithLabel}</a></li>{/block:NoteCount}

</ul>
</section>
{/block:Date} 
```

这是我的 Tumblr 主题。

[http://lt-colbylovesamanda.tumblr.com/](http://lt-colbylovesamanda.tumblr.com/)

是我还是 Tumblr 有时会想念它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T20:23:22.043

**NoteCount / NoteCountWithLabel**

仅当帖子的注释计数高于零时，该块`{block:NoteCount}`才会呈现。如果计数为零，则不渲染该块。

但是，它可以呈现字符串`0 Notes`。为此，只需删除块并使用变量`{NoteCountWithLabel}`。

如果您移动外部块`<li>`将呈现，并包括一个音符计数，不管：

```
{block:Date}
<section class="metadata">
<ul class="index">
<li>Date Posted: <a href="{Permalink"><time datetime="{MonthNumberWithZero}-     
{DayOfMonthWithZero}-{Year}">{Month} {DayOfMonth}, {Year}</time></a></li>

<li><a class="notecount" href="{Permalink}#notes">{NoteCountWithLabel} 
</a></li>

</ul>
</section>
{/block:Date} 
```

参考：[http ://www.tumblr.com/docs/en/custom_themes#notes](http://www.tumblr.com/docs/en/custom_themes#notes)

# php - 当我使用沙盒时，PayPal payment_status 始终处于待处理状态

> ID：15957451
> 
> 赞同：1
> 
> 时间：2013-04-11T19:41:14.460
> 
> 标签：php, paypal, paypal-sandbox, paypal-ipn

我正在使用该`PayPal IPN`功能，但是`_POST[payment_status] = Pending`当我使用沙盒进行测试时，我一直在使用该功能。因此，我无法测试完整的购买以确保整个过程正常运行。

这是我的代码：

```
// Set the request paramaeter
$req = 'cmd=_notify-validate';

// Run through the posted array
foreach ($_POST as $key => $value)
{
    // If magic quotes is enabled strip slashes
    if (get_magic_quotes_gpc())
    {
        $_POST[$key] = stripslashes($value);
        $value = stripslashes($value);
    }
    $value = urlencode($value);
    // Add the value to the request parameter
    $req .= "&$key=$value";
}

$ch = curl_init();    // Starts the curl handler
curl_setopt($ch, CURLOPT_URL,$paypal[$testing]); // Sets the paypal address for curl
curl_setopt($ch, CURLOPT_FAILONERROR, 1);
curl_setopt($ch, CURLOPT_RETURNTRANSFER,1); // Returns result to a variable instead of echoing
curl_setopt($ch, CURLOPT_TIMEOUT, 3); // Sets a time limit for curl in seconds (do not set too low)
curl_setopt($ch, CURLOPT_POST, 1); // Set curl to send data using post
curl_setopt($ch, CURLOPT_POSTFIELDS, $req); // Add the request parameters to the post
$result = curl_exec($ch); // run the curl process (and return the result to $result
curl_close($ch);

if (strcmp ($result, "VERIFIED") == 0) // It may seem strange but this function returns 0 if the result matches the string So you MUST check it is 0 and not just do strcmp ($result, "VERIFIED") (the if will fail as it will equate the result as false)
{
// It worked
// do my stuff
}else{

    foreach($_POST as $key=>$value){
        $post_str .="_POST[$key] = $value<br>";
    }

    $sub = "Paypal error";
    $mes = "$post_str";
    mailer($sub, $mes, $from, $to);

} 
```

这是我在电子邮件中收到的错误消息：

```
_POST[mc_gross] = 120.00
_POST[protection_eligibility] = Ineligible
_POST[address_status] = confirmed
_POST[payer_id] = QDZDYY4JWGFVG
_POST[tax] = 0.00
_POST[address_street] = 1 Maire-Victorin
_POST[payment_date] = 12:25:03 Apr 11, 2013 PDT
_POST[payment_status] = Pending
_POST[charset] = windows-1252
_POST[address_zip] = M5A 1E1
_POST[first_name] = gppl
_POST[address_country_code] = CA
_POST[address_name] = gppl Simard's Test Store
_POST[notify_version] = 3.7
_POST[custom] = 
_POST[payer_status] = verified
_POST[address_country] = Canada
_POST[address_city] = Toronto
_POST[quantity] = 1
_POST[verify_sign] = An5ns1Kso7MWUdW4ErQKJJJ4qi4-AjAXF3KMNcb6G83Jslw18dw.Ti32
_POST[payer_email] = 78h23d8712h3d@x.com
_POST[txn_id] = 2KU491796R824634N
_POST[payment_type] = instant
_POST[payer_business_name] = gppl x's Test Store
_POST[last_name] = Simard
_POST[address_state] = Ontario
_POST[receiver_email] = x@x.x
_POST[pending_reason] = unilateral
_POST[txn_type] = web_accept
_POST[item_name] = 926537
_POST[mc_currency] = CAD
_POST[item_number] = 
_POST[residence_country] = CA
_POST[test_ipn] = 1
_POST[handling_amount] = 0.00
_POST[transaction_subject] = 926537
_POST[payment_gross] = 
_POST[shipping] = 0.00
_POST[ipn_track_id] = c7dcef0b1c333 
```

这个错误真的让我发疯。让你们知道，我已经将付款审核设置为`off`。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-10-17T15:55:41.450

如果您使用的是沙盒，请打开 developer.paypal.com->Dashboard->Accounts->facilitator@yourhost.com->Profile->Settings。将“付款审核”设置为“关闭”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T20:10:53.733

确保您的帐户有一个确认的电子邮件地址。当您向没有确认电子邮件地址的帐户发送付款时，通常会发生这种情况。因此，请检查卖家帐户，并确保确认您已将付款发送到的电子邮件地址。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-13T07:33:54.977

我遇到了这个问题 - 我正在向 PayPal 发送我的“实时”payer_email，当我将它更改为它工作的沙箱中的企业电子邮件时。与我使用 ****-facilitator@yoursite.com 的实时电子邮件相同

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-28T08:46:34.357

登录到您的沙盒帐户，查看您是否有任何“无人认领”的付款。这可能是因为它们使用的货币与您的主账户不同。

# ajax - 成功的 AJAX 命令未将新的 SimplePie 生成的 HTML（来自 RSS Feed）返回到浏览器

> ID：15957453
> 
> 赞同：0
> 
> 时间：2013-04-11T19:41:23.953
> 
> 标签：ajax, jquery, rss, simplepie, rss-reader

我正在创建一个基于 AJAX 的 RSS 提要。它是一个类似于 Google Reader 的单一窗格，左侧是提要列表，右侧是提要内容。当您单击任何提要时，这将触发一个 ajax 命令 (jquery's `$.ajax()`)，该命令将触发 RSSFeed 类的公共`getFeed($feed_url)`函数（进而利用 SimplePie 来获取所需的数据。

这使用：

*   jQuery 1.9.1 处理 AJAX 调用和更新浏览器
*   Twitter Bootstrap 2.3.0 用于布局/规范化/样式
*   SimplePie 1.3.1 自己处理 RSS 提要。

当页面加载时，我正在使用`getFeed($feed_url);`来正确获取数据（这有效）：

```
<div class="row">
    <div class="span7" id="feedBody">
        <?php
           $RSSFeed->getFeed("http://rss1.smashingmagazine.com/feed/");
        ?>
    </div>
</div> 
```

这按预期工作。然后可以单击提要项，这将触发以下 AJAX 命令（警报用于调试目的）：

```
"use strict";

//Update the feed
$("a.feedName").click(function(e) {
    e.preventDefault();
    var feedURL;
    feedURL = $(this).attr("href");
    $.ajax('model/RSSFeed.php', {
        data: {url: feedURL},
        beforeSend: function() {
            $("#feedBody").html("<div class=\"alert alert-info span7\"><button type=\"button\" class=\"close\" data-dismiss=\"alert\">&times;</button><strong>Loading Feed&hellip;</strong>");
        },
        cache: false,
        success: function(result) {
            $("#feedBody").html(result);
            alert(result);
        },
        error: function(result) {
            $("#feedBody").hide();
            alert("Error!");
        }
    });
}); 
```

然后`model/RSSFeed.php`看到这个请求，应该使用以下内容来触发获取新内容：

```
if (isset($_GET['url'])) {
    $RSS = new RSSFeed();
    $RSS->getFeed($_GET['url']);
} else if(isset($_POST['url'])) {
    $RSS = new RSSFeed();
    $RSS->getFeed($_POST['url']);
} 
```

这调用了我的 RSSFeed 类，如下所示：

```
class RSSFeed {
    //Get the feed at the $feed_url and echo it out to the browser for the ajax request to display
    public function getFeed($feed_url) {
        $feed = new SimplePie($feed_url);
        $feed->init();
        $feed->handle_content_type();
        foreach ($feed->get_items() as $item) {
            $output = "<article>"
            . "<h3><a href=\"" . $item->get_permalink() . "\" title=\"" . $item->get_title() . "\" class=\"articleTitle\">" . $item->get_title() . "</a></h3><p>";

            if ($category = $item->get_category()) {
                $output .= $category->get_label() . " ";
            }

            $output .= $item->get_date();

            $output .= "</p><p>";

            $output .= shorten($item->get_description(), 600) . "<br /><br />" . "<a href=\"" . $item->get_permalink() . "\" title=\"Read More\" class=\"btn btn-info\">Read More</a>";

            $output .= "</p>";

            echo $output;
        }//end foreach($feed->get_items() as $item)
    }//end getFeed($feed_url)

    //Begin setting up to allow Google Reader takeout files to be imported into the database.
    public function importRSSFeeds($xmlFile, $DB) {
        $xml = simplexml_load_file($xmlFile);
        foreach($xml as $feed) {
            foreach($feed->outline as $thisFeed) {
                if($thisFeed->outline['type'] == "rss") {
                        $DB->addFeedToDatabase($thisFeed['text'], $thisFeed['title'], "folder", "", "");
                    foreach($thisFeed->outline as $feeds) {
                        $DB->addFeedToDatabase($feeds['text'], $feeds['title'], $feeds['type'], $feeds['xmlUrl'], $feeds['htmlUrl']);
                    }
                    echo "<br /><br />";
                }
            }
        }
    } //end importRSSFeeds($xmlFile)
    //Get the feeds from the database and display them on the left for the user.
    public function getFeedList() {
        $lastType = "";
        $DB = new Database();
        $result = $DB->returnFeedList();
        foreach($result as $individualFeed) {
                if($individualFeed['type'] == "folder") {
                    if ($lastType == "rss") {
                        echo "</ul></div>";
                    }
                    echo "<li><a href=\"#\" data-toggle=\"collapse\" data-target=\"#" . str_replace(" ", "", $individualFeed['title']) ."\"><i class=\"icon-folder-close\"></i>" . $individualFeed['title'] . "</a></li>";
                    echo "<div class=\"collapse in\" id=\"" . str_replace(" ", "", $individualFeed['title']) . "\">";
                    echo "<ul class=\"nav nav-list\">";
                } else if($individualFeed['type'] == "rss") {
                    echo "<li><a href=\"" . $individualFeed['xmlUrl'] . "\" class=\"feedName\">" . $individualFeed['title'] . "</a></li>";
                }
                $lastType = $individualFeed['type'];
            }
        $DB->closeDatabaseConnection();
    }
}//end class RSSFeed 
```

检查 javascript 警报时，它会触发`success:`案例但不返回回显数据。为了让 SimplePie 类`echo`通过 AJAX 将正确的数据返回到我的`id="feedBody"`div，我缺少什么？我错过了什么？

**编辑：** Firebug 对 XHR 说了以下内容：

```
//Response Headers
Status: 200 OK
Connection  Keep-Alive
Content-Length  0
Content-Type    text/html
Date    Thu, 11 Apr 2013 19:54:33 GMT
Keep-Alive  timeout=5, max=100
Server  Apache
X-Powered-By    PHP/5.4.4

//Request Headers
Accept  text/html, */*; q=0.01
Accept-Encoding gzip, deflate
Accept-Language en-US,en;q=0.5
Cookie  __utma=111872281.446718044.1365710024.1365710024.1365710024.1; __utmb=111872281.2.10.1365710024; __utmc=111872281; __utmz=111872281.1365710024.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)
DNT 1
Host    localhost:8888
Referer http://localhost:8888/Charcoal-Bootstrap_RSSReader/
User-Agent  Mozilla/5.0 (Macintosh; Intel Mac OS X 10.8; rv:20.0) Gecko/20100101 Firefox/20.0
X-Requested-With    XMLHttpRequest 
```

参数似乎正确传递（仅一个示例）： `url http://iphone.keyvisuals.com/feed/`

完整的 index.php： http: [//pastebin.com/UJiFuBvG](http://pastebin.com/UJiFuBvG)

完整的 RSSFeed.php：[http ://pastebin.com/CGU2nQHB](http://pastebin.com/CGU2nQHB)

完整的 main.js（处理 AJAX）：[http ://pastebin.com/1pPQuPUx](http://pastebin.com/1pPQuPUx)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T11:54:30.490

当我真正推送警报/异常来调试它时，答案就来了，似乎它没有正确加载 simplepie 文件，从而导致致命错误并且它死了。对于那个很抱歉！不过谢谢布拉德

# css - WordPress 主题 li 类在页面上活跃

> ID：15957459
> 
> 赞同：0
> 
> 时间：2013-04-11T19:41:42.237
> 
> 标签：css, wordpress, stylesheet

我刚刚构建了我的第一个 WordPress 主题，唯一我似乎无法解决的问题是如何告诉 WordPress 使菜单链接与页面上的类处于活动状态？这是我为静态页面编写的代码：

```
function curPageName() {
  return substr($_SERVER["SCRIPT_NAME"],strrpos($_SERVER["SCRIPT_NAME"],"/")+1); 
```

}

```
 <?php if(curPageName() == 'index.php'){ ?>
        <li class="current">
            <a href="xxxx" data-description="All starts here">Home</a>
        </li>
        <?php } else{ ?>
        <li>
            <a href="xxxx" data-description="All starts here">Home</a>
        </li>

        <?php } ?> 
```

我仍然在 WordPress 主题中获得了此代码，但目前无法正常工作，我想我可能会使其工作，因为它必须与确切的链接有关，但我也希望内置WordPress 中的菜单，所以这需要我摆脱这段代码..

有人知道我能做什么或将我链接到可以帮助我的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T20:42:42.017

最好的方法是将页面名称分配给页面的主体标签来标识它。如果页面匹配，然后使用 php 分配一个活动类。

CSS

```
 a.active:hover {
    color:#000;
    border:1px solid #000;
    background:#fff;
    } 
```

HTML

```
<body <?php $page = "one" ?>>

<div id="navbar">
    <ul>
        <li><a<?php if($page == 'one'): ?> class="active"<? endif ?> href="one.php">Page 1</a></li>
        <li><a<?php if($page == 'two'): ?> class="active" <? endif ?> href="two.php">Page 2</a></li>
        <li><a<?php if($page == 'three'): ?> class="active" <? endif ?> href="three.php">Page 3</a></li>
        <li><a<?php if($page == 'four'): ?> class="active"<? endif ?> href="four.php">Page 4</a></li>
    </ul>
</div> 
```

在上面的示例中，第一页将处于活动状态

# sql-server - 我的 t-sql 语法/对 microsoft T-sql 语法文档的理解有什么问题

> ID：15957464
> 
> 赞同：0
> 
> 时间：2013-04-11T19:41:46.830
> 
> 标签：sql-server, tsql

我正在尝试添加一个不会应用于现有记录的检查约束。我的尝试是：

```
ALTER TABLE myDB.dbo.myTable 
  ADD CONSTRAINT myConstraintName WITH NOCHECK (dbo.myFunction() = 0); 
```

返回

> 消息 156，级别 15，状态 1，第 1 行
> 关键字“with”附近的语法不正确。
> 消息 319，级别 15，状态 1，第 1 行
> 关键字“with”附近的语法不正确。如果此语句是公用表表达式、xmlnamespaces 子句或更改跟踪上下文子句，则前面的语句必须以分号结束。

我还试图掌握 T-SQL 语法图的窍门。基于[alter table](http://msdn.microsoft.com/en-us/library/ms190273.aspx)语法和 T-SQL[约定](http://msdn.microsoft.com/en-us/library/ms177563.aspx)，我似乎按照下图所示的方式遵循语法图中的开关 - 导致 label `<table_constraint>`。我将其解释为 table_constraint 附加图表的标签。

1.  如何修复 T-SQL 语句中的语法？

2.  我是否正确解释了图表？

![在此处输入图像描述](https://i.stack.imgur.com/qokfP.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T19:46:10.790

您`WITH NOCHECK`需要在 ALTER TABLE 语句之后，并且需要 a`CHECK`来指示约束类型。

`ALTER TABLE myDB.dbo.myTable with NOCHECK ADD CONSTRAINT myConstraintName CHECK (dbo.myFunction() = 0);`

然后，您可以稍后检查约束

`ALTER TABLE myDB.dbo.myTable CHECK myConstraintName`

# c# - 在 C# 中访问多个表单

> ID：15957465
> 
> 赞同：-2
> 
> 时间：2013-04-11T19:41:47.667
> 
> 标签：c#, visual-studio-2010

我正在尝试从项目的主要表单中访问表单。新表单名称将是 AboutBox1，我希望它在用户单击“关于”工具条按钮时打开。

当我在关于工具条按钮中进行编码时，尽管 Intellisense 无法识别我创建的新表单（AboutBox1）

我已经读到我需要创建我的新表单的一个实例，但是我不确定在哪里或如何做到这一点。

以下是我拥有的代码。（中间的东西全部忽略，访问新表单需要点击的工具箱按钮在底部） [https://gist.github.com/anonymous/5366535](https://gist.github.com/anonymous/5366535)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T19:48:11.563

在您的 MenuItem 的 onClick-Handler 中：

```
//assuming AboutBox is derived from Form
AboutBox AboutBox1 = new AboutBox();
AboutBox1.Show(this); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T19:49:52.287

首先，如果您需要从方法外部访问您的表单，请在类的顶部创建一个变量。

```
AboutBox1 frmAboutBox;

[STAThread]
... 
```

但看到这是一个关于页面，我认为你不需要那个。

然后，制作并启动您的表单。

```
AboutBox frmAboutBox = new AboutBox();
frmAboutBox.Show(); 
```

您还可以`frmAboutBox.ShowDialog()`使新孵化的表格始终位于顶部。

# javascript - d3 图有客户的时区而不是数据的

> ID：15957466
> 
> 赞同：7
> 
> 时间：2013-04-11T19:41:48.197
> 
> 标签：javascript, graph, client, d3.js

我正在使用 D3 绘制一些数据，如果我将时区更改为与当前时区不同，则时标会根据客户的时区而变化。我宁愿能够强制图表显示在一个时区，因为这是查看数据时有意义的内容。

我在用

```
x.domain([lowerTime, upperTime]) 
```

创建 x 轴，但我不确定如何利用

```
x.timeFormat() 
```

强制这个域在某个时区，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T07:06:23.160

通过使用[时间尺度](https://github.com/mbostock/d3/wiki/Time-Scales)，您可以获得以下信息：

> # d3.time.scale.utc()
> 
> 用默认域和范围构造一个新的时间尺度；刻度和刻度格式配置为 UTC 时间。

所以，最后你可以这样做：

```
scale = d3.time.scale.utc()
scale.domain([lowerTime, upperTime]) 
```

现在您在任何客户端上都有相同的时间。您仍然需要弄清楚您当前的 UTC 时间是多少，但这要容易得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-06T15:44:08.087

您可以使用 UTC，或[格式化](https://github.com/d3/d3-3.x-api-reference/blob/master/Time-Formatting.md)[刻度标签](https://bl.ocks.org/mbostock/9764126)以使用特定时区

# python - 使用更新的方法更新 Python 脚本？

> ID：15957468
> 
> 赞同：-1
> 
> 时间：2013-04-11T19:41:56.023
> 
> 标签：python, function, methods

我为我正在使用的应用程序借了一个 python 插件。该插件有些过时，因为脚本中使用的方法已更改，我想尝试弄清楚如何编辑脚本并对方法和功能进行适当的更新。脚本中使用了 4 个模块，我不知道哪一个包含该方法及其所有功能

基本上我有这样的一行：

```
layerEPSG = layer.srs().epsg()
projectEPSG = self.canvas.mapRenderer().destinationSrs().epsg() 
```

该`srs()`方法已更改为`crs()`，并且一些函数名称也已更改（但仍然执行相同的操作）。`epsg()`我想以某种方式列出它们，看看是否有新名称`destinationSrs()`

这在我看来是有道理的，但我对模块、类、方法、函数如何协同工作没有完全理解。这是一个需要了解更多信息的项目。

任何帮助表示赞赏，迈克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T20:25:03.863

你可以用它`dir()`来发现模块的结构

```
import layers
# print out the items in the module layers
print dir(layers)
print

x = layer.crs()
# print out the type that crs() returns
print type(x)
# print out the methods on the type returned by crs()
print dir(x) 
```

或者您可以打开模块并阅读其代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T21:01:36.683

您还可以使用`help()`来提供有关类或模块的更多信息。举个例子：

```
>>> class Fantasy():
...     def womble(self):
...         print('I am a womble!')
...     def dragon(self):
...         """ Make the Dragon roar! """
...         print('I am a dragon...ROAR!')
...
>>> help(Fantasy)
Help on class Fantasy in module __main__:

class Fantasy(builtins.object)
 |  Methods defined here:
 |
 |  dragon(self)
 |      Make the Dragon roar!
 |
 |  womble(self)
 |
 |  ----------------------------------------------------------------------
 |  Data descriptors defined here:
 |
 |  __dict__
 |      dictionary for instance variables (if defined)
 |
 |  __weakref__
 |      list of weak references to the object (if defined) 
```

当然，如果类/模块中有文档字符串，这会更有用。

# c - 在 C 中读取文件并拆分字符串

> ID：15957469
> 
> 赞同：1
> 
> 时间：2013-04-11T19:41:56.807
> 
> 标签：c, arrays, file, split

我有一个在 C 中读取文件的程序。现在我想将字符串除以空间放入一个数组中。我该怎么做？

```
#include <stdio.h>
int main()
{
char line[30];
char names[100][20];
int sizes[100];
int i = 0;
FILE *fp;

fp = fopen("in.txt", "rt");

if(fp == NULL)
{
    printf("cannot open file\n");
    return 0;
}
while(fgets(line, sizeof(line), fp) != NULL)
{
     printf(line);

    i++;
}
fclose(fp);

return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T19:44:08.403

看看函数`strtok`或`strtok_r`

[http://www.cplusplus.com/reference/cstring/strtok/?kw=strtok](http://www.cplusplus.com/reference/cstring/strtok/?kw=strtok)

# jsp - struts2 s:form 元素修剪 action 属性中的 s:url 参数

> ID：15957470
> 
> 赞同：2
> 
> 时间：2013-04-11T19:41:57.790
> 
> 标签：jsp, parameters, struts2

我正在使用`<s:url>`创建一个 URL ，该 URL`removeAction.action?id=10`应该由`<s:form>`元素中的 action 属性使用。

这里的问题是当`<s:form>`转换为`<form>`元素时，我只能看到 action 属性值为`action="/project/removeAction.action"`. id 参数正在被修剪。我想要的结果是`action="/project/removeAction.action?id=10"`

```
<s:url var="actionUrl" action="removeAction" includeContext="false">
  <s:param name="id" value="%{id}" /> 
</s:url>

<s:form action="%{actionUrl}" method="post" enctype="multipart/form-data" >
 <div>
  <s:file name="imgUpload"/>
  <s:submit> upload </submit>
 </div>
</s:form> 
```

最近我将 struts2 核心版本升级到 2.3.12，我遇到了这个问题。此问题在版本 2.3.4.1 之后开始

而且我不想使用`hidden`属性来传递参数，因为当文件很大要上传时，这个参数会丢失。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T09:13:27.993

也许你可以使用通配符映射

```
<action name="removeAction\\*" class="..">

</action> 
```

并将 id 作为 url 的一部分传递给 self.eg: removeAction/101

参考[http://struts.apache.org/release/2.3.x/docs/wildcard-mappings.html](http://struts.apache.org/release/2.3.x/docs/wildcard-mappings.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T09:50:42.347

文件太大，文件上传时隐藏参数会丢失是什么意思？它将被重新读取并自动填充...

*   不要调用**`RemoveAction`**实际上是**上传**文件的操作。为了逻辑起见，调用它`UploadAction`：|

*   [在 POST 请求中使用查询参数不是一个好主意](https://stackoverflow.com/a/612035/1654265)，它们应该只在 GET 请求中使用，可能以 REST 方式使用......

*   为防止出现`max multipart size exceeded`错误，请将其放入`Struts.xml`：

    ```
    <constant name="struts.multipart.maxSize" value="52428800" /> 
    ```

*   要调整 中单个文件的最大大小（默认为 2Mb）`fileUpload Interceptor`，请将其放入`Struts.xml`, 中`Stack definition`：

    ```
    <interceptor-ref name="fileUpload">
        <param name="maximumSize">10485760</param>
    </interceptor-ref> 
    ```

    （在此示例中，您最多可以连续上传 5 个 10 MB 的文件）

*   最后，对于所有`HTML5`兼容的浏览器（几乎所有浏览器，除了旧版 IE 和一些移动设备），您可以在发送之前阻止上传，方法是在这样的`onchange`事件中检查其大小：

    ```
    <s:file name="imgUpload"/ 
            onchange="javascript:checkFileSize(this);" />

    <script>
        const maxFileSize = 10485760; // 10MB

        function checkFileSize(fileElement){
            if (fileElement.files[0].size > maxFileSize) {
                var mb = (((fileElement.files[0].size) / 1024)/1024).toFixed(2);
                alert("Max file size exceeded: " + mb + " MegaBytes");
                fileElement.value = '';
            }
        }
    </script> 
    ```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-11T20:14:46.153

发生该问题是因为 org.apache.struts2.components.ServletUrlRenderer.renderUrl() 方法找不到您的操作“removeAction”的操作配置，因为您的 URL (#actionUrl) 已包含“.action”后缀。

来自[struts2 s:form](http://struts.apache.org/release/2.3.x/docs/form.html)关于 action 参数的文档：

> 设置要提交的动作名称，不带 .action 后缀

解决方案非常简单：不要使用`<s:url>`，而是：

```
<s:form action="removeAction?id=%{id}" method="post" enctype="multipart/form-data">
 <div>
  <s:file name="imgUpload"/>
  <s:submit> upload </s:submit>
 </div>
</s:form> 
```

# java - java嵌套循环

> ID：15957476
> 
> 赞同：3
> 
> 时间：2013-04-11T19:42:18.020
> 
> 标签：java, nested-loops

我是java新手，我正在尝试练习构建嵌套循环。

我想要以下打印结果：

```
it is now 00:00:00
it is now 00:00:01
it is now 00:00:02
it is now 00:00:03
...
it is now 11:59:59 
```

所以你明白了。这是对超快时钟的愚蠢模拟

问题是它开始于：

```
it is now 10 : 55 : 46
it is now 10 : 55 : 47
it is now 10 : 55 : 48 
```

...而不是 00 : 00 : 00

到目前为止，这是我的代码：

```
public class Example {

public static void main(String[] args)

{

    int h = 0;
    while(h<=11)
    {
        int m = 0;
        while(m<=59)
        {
            for(int s=0; s<=59;s++)
            {
                System.out.println("it is now " + h + " : " + m + " : " + s );  
            }
            m++;
        }
        h++;

    }

} 
```

任何帮助将不胜感激！西尔万

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-11T19:45:04.253

> 问题是它开始于：10:55:46，而不是 00:00:00

不，它从 0 开始。您看不到初始值的最可能原因是您使用的控制台仅显示最后 xxx 行，而当程序终止时，初始行不再可见。

您可以插入一个`try { Thread.sleep(500); } catch (Exception e) {}`after`h++;`以直观地确认这一点。

# java - 一步一步... 使用 NFC 读取标签

> ID：15957477
> 
> 赞同：0
> 
> 时间：2013-04-11T19:42:19.510
> 
> 标签：java, android, nfc

那么有没有人可以向我解释，为了简单地用 NFC 扫描标签，我需要做什么，而不是简单地将我引导到我不明白的 android 开发者博客？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T19:44:33.907

为什么不查看[本](http://www.netmagazine.com/tutorials/getting-started-nfc-android)教程，它深入阅读和书写卡片。但文档始终是您最好的朋友。

# c# - 解决与温莎城堡的依赖关系

> ID：15957478
> 
> 赞同：0
> 
> 时间：2013-04-11T19:42:20.323
> 
> 标签：c#, asp.net-mvc-4, castle-windsor

我有一个依赖于存储库类的工厂类。如何解决工厂类中的依赖关系？我可以将依赖项从我的控制器传递到工厂，但这似乎不是正确的方法。

```
public BarFactory(IFoo foo) {

} 
```

对于控制器，您可以将依赖项粘贴在构造函数中，然后控制器工厂处理它，但对于其他所有内容，我不太确定。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T07:27:09.743

如果在使用 Windsor 时需要工厂，推荐的方法是使用 TypeFactoryFacility。您可以在此链接中找到所有相关信息：http: [//docs.castleproject.org/Windsor.Typed-Factory-Facility-interface-based-factories.ashx](http://docs.castleproject.org/Windsor.Typed-Factory-Facility-interface-based-factories.ashx)

一般来说，编写自己的工厂要容易得多。只需创建界面，Windsor 就可以完成繁重的工作。

# asp.net-mvc-3 - 参数未从视图正确传递给控制器 操作

> ID：15957479
> 
> 赞同：0
> 
> 时间：2013-04-11T19:42:20.553
> 
> 标签：asp.net-mvc-3, parameters, null

对于我正在开发的应用程序，我为正在开发的视图提供了以下 Razor 代码：

```
@Html.InputFor(m => m.Property1);   // A date
@Html.InputFor(m => m.Property2);   // Some other date
@Html.InputFor(m => m.SomeOtherProperty);  // Something else.
<a href='#' id='some-button'>Button Text Here</a>

<!-- SNIP: Extra code that dosen't matter -->

<script>
  var $someButton = $('#some-button');

  $(document).ready(function () {
    $someButton.click(function (e) {
      e.preventDefault();
      window.open('@Url.Action("Foo", "Home", new {p1 = Model.Property1, p2 = Model.Property2, pX = Model.SomeOtherProperty})', '_blank');
    });
  });
</script> 
```

...根据评论，我检查了呈现的 HTML。正如预期的那样，这些值带有值......

```
<input name="Property1" data-val="true" data-val-required="(Required)" type="text" value="1/1/2013">
<input name="Property2" data-val="true" data-val-required="(Required)" type="text" value="4/11/2013">
<input name="SomeOtherProperty" data-val="true" data-val-required="(Required)" type="text" value="42">
<a href='#' id='some-button'>Button Text Here</a>

<script>
  var $someButton = $('#some-button');

  $(document).ready(function () {
    $someButton.click(function (e) {
      e.preventDefault();
      window.open('http://localhost:xxxx/Home/Foo?p1=1%2F1%2F2013&amp;p2=4%2F11%2F2013&amp;pX=42', '_blank');
    });
  });
</script> 
```

...在服务器端...

```
public ActionResult Foo(string p1, string p2, string pX)
{
  var workModel = new FooWorkModel
  {
    Property1 = p1,
    Property2 = p2,
    SomeOtherProperty = pX
  };

  // Do something with this model, dosen't really matter from here, though.
  return new FileContentResult(results, "application/some-mime-type");
} 
```

我注意到只有第一个参数 ( `p1`) 从前端获取值；我所有的其他参数都被传递了空值！

**问题**：为什么为这些其他字段分配了一些值时，ActionResult 被传递空值？或者，一个免费的问题：为什么只有第一个参数成功传递了它的值，而其他所有参数都失败了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T21:06:08.580

该问题是由`Url.Action()`. （来源：[如何将正确的 Url.Action 传递给 JQuery 方法而没有额外的 & 麻烦？](https://stackoverflow.com/questions/7336532/how-do-i-pass-correct-url-action-to-a-jquery-method-without-extra-ampersand-trou)）

只需在`@Html.Raw()`周围添加一个调用`Url.Action()`，数据就会按预期流动。

```
 window.open('@Html.Raw(Url.Action("Foo", "Home", new {p1 = Model.Property1, p2 = Model.Property2, pX = Model.SomeOtherProperty}))', '_blank'); 
```

# python - 为什么这个 opencl 代码是不确定的？

> ID：15957484
> 
> 赞同：5
> 
> 时间：2013-04-11T19:42:29.850
> 
> 标签：python, opencl, gpgpu, non-deterministic, pyopencl

以下 python 代码使用 PyOpenCL 用数组 b 中的元素之和填充数组**a_plus_b**（这不是我的实际目标，但它是我能找到的最简单的代码，但仍然显示了问题）。

```
import pyopencl as cl
import numpy as np
import numpy.linalg as la

height = 50
width = 32

b = np.arange(width,dtype=np.int32)

ctx = cl.create_some_context()
queue = cl.CommandQueue(ctx)

mf = cl.mem_flags
b_buf = cl.Buffer(ctx, mf.READ_ONLY | mf.COPY_HOST_PTR, hostbuf=b)
dest_buf = cl.Buffer(ctx, mf.WRITE_ONLY, height*4)

prg = cl.Program(ctx, """
    __kernel void sum(__global const int *b, __global int *c)
    {
      int x = get_global_id(1);
      int y;
      c[x] = 0;
      for(y=0;y<get_global_size(0);y++) {
          c[x] += b[y];
      }
    }
    """).build()

prg.sum(queue, (width,height), None, b_buf, dest_buf)

a_plus_b = np.empty(height,dtype=np.int32)
cl.enqueue_copy(queue, a_plus_b, dest_buf)

print(np.sum(b))
print(a_plus_b)
print(np.sum(a_plus_b-np.sum(b))) 
```

给出输出：

```
496
[496 496 496 496 496 496 496 496 496 496 496 496 496 496 496 496 496 496
 496 496 496 496 496 496 496 496 496 496 496 496 496 496 496 496 496 496
 496 496 496 496 496 496 496 496 496 496 496 496 496 496]
0 
```

但是，如果我将**宽度**从 32 更改为 33，则数组不再是同一个元素。

```
528
[555 557 555 559 560 528 560 560 528 528 528 528 528 528 528 528 528 528
 528 528 528 531 540 569 581 528 705 591 560 560 545 560 560 528 560 528
 528 528 528 528 528 528 528 528 528 528 528 532 533 535]
752 
```

事实上，每次运行代码时，都会产生不同的结果。

```
528
[560 560 559 560 560 560 560 528 528 528 528 528 528 528 528 528 528 528
 528 528 528 560 528 514 565 553 621 650 560 560 560 560 560 528 528 528
 528 528 528 528 528 528 528 528 549 528 528 544 528 537]
724 
```

造成差异的原因是什么？什么不是

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T21:29:07.617

您正在运行 WIDTH x HEIGHT 工作项。对于内核中的每个 X 值，都会有 WIDTH 工作项并行执行完全相同的操作：将 C[X] 设置为 0，然后在 Y 循环中更新它。所有这些 WIDTH 工作项将读取 C[X]，然后或多或少地同时更新它。这种“或多或少”是您观察到的变化的原因。

您的算法是一维的，您只需要运行 HEIGHT 工作项，并将 WIDTH 作为内核参数传递。将 C[X] 替换为寄存器“SUM”，并在最后执行单个 C[X]=SUM。

# iis-7 - Appcmd 脚本将监视 IIS 应用程序池并在应用程序池停止时发送电子邮件

> ID：15957485
> 
> 赞同：0
> 
> 时间：2013-04-11T19:42:36.777
> 
> 标签：iis-7, windows-server-2008, appcmd

我正在寻找一个带有 appcmd 的脚本，它将监视 IIS 应用程序池，并且我们还可以在某些应用程序池崩溃时收到电子邮件通知。我们希望将脚本作为调度程序任务。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T20:04:34.940

我建议您将这两个资源中的信息结合起来

1.  [http://technet.microsoft.com/en-us/library/cc771701(v=ws.10).aspx](http://technet.microsoft.com/en-us/library/cc771701(v=ws.10).aspx)
2.  [http://blogs.msdn.com/b/amb/archive/2012/10/18/how-to-get-an-application-pool-configuration-with-appcmd-exe.aspx](http://blogs.msdn.com/b/amb/archive/2012/10/18/how-to-get-an-application-pool-configuration-with-appcmd-exe.aspx)

但总而言之，您可以使用 appcmd 返回未处于“已启动”状态的站点列表；

例如

```
appcmd list apppool /state:"Stopped" 
```

# xna-4.0 - 获取BoundingBox的简单方法？

> ID：15957486
> 
> 赞同：0
> 
> 时间：2013-04-11T19:42:46.053
> 
> 标签：xna-4.0

我在互联网上查看过，有几种不同的方法，但它们似乎对我不起作用。我有一个名为 model1 的模型和一个名为 maxtrix1 的矩阵，我如何从中获取它的最小值和最大值？对不起这个问题，但它一直困扰着我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T15:29:22.167

你是每帧都计算这个bounding box吗，对效率和精度有什么要求？

一种方法是将矩阵应用于每个网格，然后检查此乘法的结果与先前的乘法是否较低，将其设置为新的最小值。查找最大值将以相同的方式完成，但是而是检查它是否大于最后一个而不是更小。

如果您能解释为什么您在互联网上找到的所有解决方案都不适合您，我可能会提供更多帮助/详细说明:)

# c# - 使用 VSTO 切换到 Outlook 日历

> ID：15957488
> 
> 赞同：1
> 
> 时间：2013-04-11T19:42:53.977
> 
> 标签：c#, outlook, vsto, outlook-addin, outlook-2013

我有一个已添加到 Microsoft Outlook 2013 的 CustomTaskPane。此窗格包含一个 WPF 日历控件，双击该控件时，我希望它从当前 Outlook 视图（邮件）切换到日历视图并转到在控制。

这是我正在使用的代码：

```
private void TopCalendar_MouseDoubleClick(object sender, MouseButtonEventArgs e)
{
    CalendarView calView = null;
    Explorer explorer;
    DateTime goToDate = (TopCalendar.SelectedDate.HasValue) ? TopCalendar.SelectedDate.Value : DateTime.Today;

    explorer = Globals.ThisAddIn.Application.ActiveExplorer();
    Views views = Globals.ThisAddIn.Application.GetNamespace("MAPI").GetDefaultFolder(OlDefaultFolders.olFolderCalendar).Views;

    foreach(View v in views)
        if (v.Name == "Calendar")
        {
            calView = (CalendarView)v;
            break;
        }

    calView.CalendarViewMode = OlCalendarViewMode.olCalendarViewMonth;
    calView.GoToDate(goToDate);
    explorer.CurrentView = calView;
} 
```

但是，当我双击调用代码的日期（使用断点验证）时，似乎对 Outlook 没有任何影响。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T21:14:00.163

确保调用[`Apply()`](http://msdn.microsoft.com/en-us/library/office/ff862662.aspx)以使视图成为`Folder`. 您还需要将 分配[`CurrentFolder`](http://msdn.microsoft.com/en-us/library/office/ff866719.aspx)给日历。

```
calView.Apply(); // applies the view
explorer.CurrentFolder = Globals.ThisAddIn.Application.GetNamespace("MAPI").GetDefaultFolder(OlDefaultFolders.olFolderCalendar); // changes current folder 
```

# php - 使用图像跟踪时的 PHP 限制

> ID：15957492
> 
> 赞同：0
> 
> 时间：2013-04-11T19:43:17.950
> 
> 标签：php, .htaccess, mod-rewrite

今天是个好日子！

事情就是这样；一个 .htaccess 文件，mod rewrite，将 imagename.png（非现有文件）重定向到 tracker.php（真实文件）。因此，当用户查看 site.com/hello.png 时，用户实际上是在查看 /hello.php，它收集并存储信息。

**跟踪器.php**

```
<?php
$date = date('d-m-Y');
$time = date('H:i:s');
$ip = $_SERVER['REMOTE_ADDR'];
$ref = @$_SERVER["HTTP_REFERER"];

header('Content-type: image/png');
echo gzinflate(base64_decode('6wzwc+flkuJiYGDg9fRwCQLSjCDMwQQkJ5QH3wNSbCVBfsEMYJC3jH0ikOLxdHEMqZiTnJCQAOSxMDB+E7cIBcl7uvq5rHNKaAIA'));

$myFile = "tr.txt";
$fh = fopen($myFile, 'a');
fwrite($fh, $myFile = $time ." | ". $date . " | " .$ip. " | " .$ref. " | \r\n\r\n");
fclose($fh);
?> 
```

我在我的网站上使用它来跟踪访问者。一切正常，我可以收集有关 ip、webbrowser、ref-link 等的信息。

但我的问题是，这样做有什么限制？我已经试验了很长时间，似乎我只能使用普通的 php（而不是*echo "some other language"*）。我无法重定向或回显文本。循环、if/else、变量等正在工作。如果我尝试重定向，我可以看到该页面正在尝试连接到例如谷歌，但只是一秒钟，所以没有实际的重定向。

tl;dr 使用 php 文件作为图像时，代码有哪些限制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T19:56:19.450

我不认为有任何限制。您的 php 代码已执行并运行。

您显示的内容不会限制 php.ini。

你在那里提到了一个重定向。您正在 html 页面中加载图像（是否由 php 生成，无关紧要）。html 页面从服务器接收到它的标头，并且您的 php 生成的图像也收到了它的标头（内容类型图像）。这是重定向的位置。您的 html 页面没有理由使用图像上的 php headers 函数进行重定向。

如果您直接在浏览器中加载php生成的图像，我认为您将能够重定向用户（直接，不显示图像），但作为html页面中的图像，不可能影响其余部分页面，除非您使用 javascript。

# database - 查找数据库数据

> ID：15957493
> 
> 赞同：0
> 
> 时间：2013-04-11T19:43:18.843
> 
> 标签：database, webmatrix-2

我使用 webmatrix 来建立一个网站。我使用 webmatrix sapply 的数据库，我在哪里可以看到数据库？在项目文件夹中，我只看到源文件，但看不到数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T21:40:04.013

单击左侧窗格中的数据库按钮以查看数据。从 Files 工作区转到 App_Data 以查看 sdf 文件。

# c# - 如何阻止 [Required] 注释在被覆盖的字段上被继承？

> ID：15957495
> 
> 赞同：8
> 
> 时间：2013-04-11T19:43:26.187
> 
> 标签：c#, asp.net-mvc, data-annotations

我有一个电话号码通知模型（用户通过与他们的帐户相关联的电话号码收到紧急情况通知，他们可以设置这些电话号码的顺序）。大多数时候，模型的电话号码部分是必需的，但在创建新用户期间有一个特殊情况，我们不想强制它。

我制作了一个非常简单的子对象 UserCreationPhoneNotificationModel，它继承自上述 UserPhoneNotificationModel。还有一些其他小的更改，但这里的相关更改是覆盖 PhoneNumber 字段，因此不再需要它。

在父模型中

```
[Required]
public virtual string PhoneNumber { get; set; } 
```

在子模型中，它只是

```
public override string PhoneNumber { get; set; } 
```

我认为这可以解决问题，但显然不是。我认为问题在于RequiredAttribute 会有 Inherited = true ，但事实并非如此，所以我不完全确定为什么它会被继承到子类中。

我做了仔细检查以确保，从父类的字段中删除Required也使得子类中的字段不是必需的，所以它绝对是某种继承的东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2019-07-29T14:57:54.977

可以通过用同名的新属性**隐藏现有属性来完成。**所以，如果父类中的属性是这样的：

```
[Required]
public virtual string PhoneNumber { get; set; } 
```

您可以像这样在子类中定义新属性：

```
public new string PhoneNumber { get; set; } 
```

这将在子类中隐藏 PhoneNumber 属性及其属性。现在您可以使用它的任何其他属性。例如，您可以将`[PhoneNumber]`属性添加到子类中的属性。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-25T07:44:37.723

当您正在建模的关系不适合时，使用继承来共享行为可能会出现问题。您通常不会从使用继承在 ViewModel 之间共享行为中获得任何好处，而您可能（并且，在您的情况下，*确实*）遇到问题。

您最好的选择是为每个用例使用不同的模型类。如果您真的需要在 ViewModel 之间共享行为，您可以通过组合来实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-27T07:53:00.723

下面的例子可能会对你有所帮助。

```
public class SigninModel
{
    [Required]
    [EmailAddress]
    public virtual string email { get; set; }
    [Required]
    [StringLength(100, ErrorMessage = "The {0} must be at least {2} characters long.", MinimumLength = 6)]
    [DataType(DataType.Password)]
    public string password { get; set; }
} 
```

这是登录模型，我已经继承到另一个模型，但不需要电子邮件，它的代码如下：

```
public class ExternalLoginModel : SigninModel
{
    public override string email { get; set; }
    public string LoginProvider { get; set; }
    public string ProviderKey { get; set; }
} 
```

我已经覆盖了另一个模型中的电子邮件属性

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-06-25T07:03:08.587

如果使用 C# 4.0，

如何编写“新”构造函数。

```
public new string PhoneNumber { get; set; } 
```

我不确定它是否有效。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2018-03-27T09:00:53.833

**不继承属性是没有意义的**。

重写时删除`[Required]`属性本质上违反了**[LSP](https://en.wikipedia.org/wiki/Liskov_substitution_principle)**。

> *如果`NotRequiredDerived`是 的子类型`RequiredBase`，则类型对象`RequiredBase`可以替换为类型对象`NotRequiredDerived`（即类型对象`RequiredBase`可以替换为子类型的任何对象`NotRequiredDerived`），而不会改变程序的任何所需属性。*

把它放在简单的代码中：

```
var requiredPhoneNumber = new RequiredBase() { PhoneNumber = "123456789" };

HandleRequiredBaseObject(requiredPhoneNumber); //Works

var optionalPhoneNumber = new NotRequiredDerived() { PhoneNumber = null };

HandleRequiredBaseObject(optionalPhoneNumber); //Fails 
```

`HandleRequiredBaseObject(RequiredBase obj)`固有地假设`PhoneNumber`是必需的（根据`RequiredBase`类的定义）；并且不期望收到缺少此约束的派生对象！这将导致运行时异常。

不违反 LSP 的唯一方法是确保`[Required]`在派生类上不违反约束；这意味着首先尝试删除`[Required]`注释是没有意义的。

* * *

我可以想到一个不继承属性有意义的**理论案例：如果属性***扩展*了有效选项的范围，而不是限制它。

假设我们创建一个类`PositiveNumber`和一个属性，将其设置为也允许负数：

```
public class Base 
{
    [NegativesAllowed]
    public PositiveNumber Number { get; set; }
}

public class Derived : Base
{
    public PositiveNumber Number { get; set; }
} 
```

如果`Base`允许所有数字，并且`Derived`只允许正数，那么它本质上并不违反 LSP。

然而，这似乎是一个非常强迫的情况。使用一个*有限*的类型，然后通过一个属性来扩展，这不是你实际会遇到的事情。

* * *

对于您的情况，您根本不应该从另一个视图模型继承一个视图模型。

需要不同属性的事实是您不应该继承这些类的主要原因！他们应该以不同的方式工作，因此不应该假装一个是另一个的派生。

# wix - Windows 8 开始屏幕固定

> ID：15957508
> 
> 赞同：2
> 
> 时间：2013-04-11T19:44:28.673
> 
> 标签：wix, windows-installer

我知道当我安装大多数旧版安装程序时，我似乎得到了大量的快捷方式，然后我必须取消固定。但是，我最近尝试使用 util:InternetShortcut 元素，结果却相反。我必须搜索开始屏幕才能找到要固定的项目。奇怪的是，Bing1 出现了，我可以固定它，但 Bing2 快捷方式没有显示为可用。（编辑：Bing2 现在出现了。奇怪）

这是一个宽泛的问题……但是在 Windows 8 世界中我需要知道什么？我目前在企业 IT 环境中工作，我被要求提出一个管理用户启动屏幕的策略，我正在研究的工具之一是基于 MSI 的安装程序。

我的高级要求之一是能够创建网站快捷方式并配置快捷方式的图标。这似乎受 .url 文件支持，但不受 util:InternetShortcut 支持。（编辑：快捷方式似乎与目标网页自动同步。）

```
 <util:InternetShortcut Id="test1" Directory="ProgramMenuFolder" Name="Bing1" Target="http://www.bing.com" Type="url"/>
    <util:InternetShortcut Id="test2" Directory="ProgramMenuFolder" Name="Bing2" Target="http://www.bing.com" Type="link"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T20:49:43.933

目前不支持显式设置图标和 URL 快捷方式的其他部分`InternetShortcut`。这是可能的，但 WiX 自定义操作代码今天没有实现它。应该不会花太多力气。

至于默认固定，我预计在 WiX 自定义操作中创建快捷方式的方式与 Windows 安装程序创建快捷方式的方式之间存在差异。WiX CA 非常非常简单，不会在其中初始化数据，`IPropertyStore`这可能是开始屏幕忽略它的原因。同样，实施起来并不难，但今天不可用。

# android - 针对 android 的 libusb 编译和链接

> ID：15957509
> 
> 赞同：14
> 
> 时间：2013-04-11T19:44:30.910
> 
> 标签：android, usb

我考虑尝试编译一个允许通过 USB 控制 Gembird SilverShield 电源插座的 C 程序。在我的安卓 HDMI 电视棒上，这将非常有用。有一个开放的[项目](http://sispmctl.sourceforge.net/)。它可以在 Linux 下运行，并且依赖于 libusb。目标平台是android ICS。我想在 Ubuntu Linux 上开发。我让它工作的机会有多大？需要哪些步骤。设置 android SDK、NDK、交叉编译器...[这里](https://stackoverflow.com/questions/7469518/using-libusb-in-android-application-how-to-allow-application-to-access-usb)
有一个较旧的问题，与 android 上的 libusb 相关，但没有关于如何操作的信息。将应用程序移植到 androids 自己的 USB 库是否更容易？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-26T10:25:24.203

Libusb 可以在非 root 的 android 上工作（前提是设备支持 USB 主机......这非常重要，因为并非所有设备都这样做）。您需要使用标准的 android USB 堆栈。然后，您可以从 USBDevice 获取设备描述符并将其传递给 libusb。

不幸的是，您还需要修改 libusb。幸运的是，其他人已经解释了您需要如何修改 LibUSB。

LibUSB 已在[此处](https://github.com/OpenNI/OpenNI2/tree/master/ThirdParty/PSCommon/XnLib/ThirdParty/libusb-1.0.9-Android)进行了修改。

祝你好运！

***编辑***：

首先你需要定义一个广播接收器：

```
private final BroadcastReceiver mUsbReceiver = new BroadcastReceiver() 
{
    public void onReceive(Context context, Intent intent)
    {
        String action = intent.getAction();
        if (ACTION_USB_PERMISSION.equals(action)) 
        {
            synchronized (this) 
            {
                UsbDevice device = (UsbDevice)intent.getParcelableExtra(UsbManager.EXTRA_DEVICE);

                if (intent.getBooleanExtra(UsbManager.EXTRA_PERMISSION_GRANTED, false)) 
                {
                    if(device != null)
                    {
                        UsbDeviceConnection deviceConnection    = mUsbManager.openDevice( device );
                        Log.d( "USB",  deviceConnection.getSerial() );
                    }
                } 
                else 
                {
                    Log.d( "USB", "permission denied for device " + device);
                }
            }
        }
    }
} 
```

现在您需要创建一个 USBManager 并枚举设备：

```
 mUsbManager         = (UsbManager) getSystemService( Context.USB_SERVICE );
    HashMap< String, UsbDevice > stringDeviceMap    =       mUsbManager.getDeviceList();
    Collection< UsbDevice > usbDevices              = stringDeviceMap.values();

    mPermissionIntent = PendingIntent.getBroadcast(this, 0, new Intent( ACTION_USB_PERMISSION ), 0 );
    IntentFilter filter = new IntentFilter(ACTION_USB_PERMISSION);
    registerReceiver( mUsbReceiver, filter );

    Iterator< UsbDevice > usbDeviceIter             = usbDevices.iterator();
    while( usbDeviceIter.hasNext() )
    {
        if ( USBDeviceValid( usbDevice ) )
        {
            // Request permission to access the device.
            mUsbManager.requestPermission( usbDevice, mPermissionIntent );

            // Open the device.
            UsbDeviceConnection connection = mUsbManager.openDevice( usbDevice );
            int fd = connection.getFileDescriptor();

            // Now pass the file descriptor to libusb through a native call.
        }
    } 
```

***编辑 2***：

构建 libusb 只需将文件放在方便的地方（我将它们放在 jni/libusb 中），然后将以下行添加到您的 Android.mk 中：

```
include $(CLEAR_VARS)
LOCAL_MODULE    := libusb
LOCAL_SRC_FILES := libusb/core.c libusb/descriptor.c libusb/io.c libusb/sync.c libusb/os/linux_usbfs.c

LOCAL_LDLIBS    := -llog
include $(BUILD_SHARED_LIBRARY) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-08-28T14:03:58.000

我实现的解决方案是使用 Java API 打开 USB 设备，然后使用带有 libusb 的文件描述符。我使用了 primesense 的 openni 项目中的 libusb（[https://github.com/OpenNI/OpenNI2](https://github.com/OpenNI/OpenNI2)）

代码位：

# 打开设备（使用 swig）：

```
int LibUsbAndroid::android_open(libusb_device *device, libusb_device_handle **devHandle)
{
    int fd = USBJNICallbacks::getCallback()->getDeviceFd(device->bus_number, device->device_address);

    __android_log_print(ANDROID_LOG_VERBOSE,"USB","Got  FD:%d",fd);
    if(fd==-1)
    {
        __android_log_print(ANDROID_LOG_ERROR,"USB","android_open, bad fd");
        return -1;
    }

    return libusb_open(device, devHandle, fd);
} 
```

# 用 JAVA 代码打开设备（不在主线程上运行！）：

```
public int getDeviceFd(int busNumber, int deviceAddress) {
        UsbDevice device = findDevice(busNumber, deviceAddress);

        if(device!=null)
        {
            mReceivedPermission = false;
            PermissionRequester pr = new PermissionRequester(device);
            pr.run();

            if(!mUsbManager.hasPermission(device))
            {
                Log.v("USB", "Requesting permissiom to device");
                mPermissionIntent = PendingIntent.getBroadcast(mContext, 0, new Intent(ACTION_USB_PERMISSION), 0);
                IntentFilter filterPermission = new IntentFilter(ACTION_USB_PERMISSION);
                mContext.registerReceiver(mUsbPermissionReceiver, filterPermission);
                mUsbManager.requestPermission(device, mPermissionIntent);
            }
            else
            {
                Log.v("USB", "Already has permission");
                try {
                    Thread.sleep(1000);
                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

                mReceivedPermission = true;

                Log.v("USB", "Opening device");
                OpenDevice od = openDevice(device);
                Log.v("USB", "Adding to open devices");
                mOpenDevices.put(""+busNumber+"/"+deviceAddress, od);

            }

            Log.v("USB", "Waiting for permission");
            waitForPermissionResult();
            OpenDevice od = mOpenDevices.get(""+busNumber+"/"+deviceAddress);
            if(od!=null)
            {
                Log.v("USB", "Getting FD");
                int result = od.mConnection.getFileDescriptor();

                Log.i("USB","USB File desc:"+result);
                return result;
            }
            else
            {
                Log.v("USB", "Error getting FD");
                return -1;
            }
        }

        return -1;
    } 
```

# 权限处理代码：

私有 BroadcastReceiver mUsbPermissionReceiver=new BroadcastReceiver(){

```
@Override
public void onReceive(Context context, Intent intent) {

    Log.v("USB", "Received permission result");
    String action = intent.getAction();
    if (ACTION_USB_PERMISSION.equals(action)) {
        synchronized (this) {
            UsbDevice device = (UsbDevice)intent.getParcelableExtra(UsbManager.EXTRA_DEVICE);
            if (intent.getBooleanExtra(UsbManager.EXTRA_PERMISSION_GRANTED, false)) {
                Log.v("USB", "Received permission result OK");
                if(device != null){
                    Log.v("USB", "Device OK");
                    mContext.unregisterReceiver(this);      
                    Log.v("USB", "Openning device");
                    OpenDevice od = openDevice(device);
                    Log.v("USB", "Adding to open device list");
                    mOpenDevices.put(""+od.mBus+"/"+od.mAddress,od);

                    Log.v("USB", "Received permission is true");
                    mReceivedPermission = true;
                } 
                else {
                    Log.d(TAG, "permission denied for device " + device);
                }
            }
        }
    }
} 
```

};

# 开启功能：

```
public OpenDevice openDevice(UsbDevice device) {
        UsbDeviceConnection connection = mUsbManager.openDevice(device);

        Log.i("USB","Device name="+device.getDeviceName());

        int bus = getBusNumber(device.getDeviceName());
        int address = getAddress(device.getDeviceName());

        return new OpenDevice(device, connection, bus, address);

    } 
```

# USB 库更改（core.c）：

```
int API_EXPORTED libusb_open(libusb_device *dev,
    libusb_device_handle **handle, int fd)
{
    struct libusb_context *ctx = DEVICE_CTX(dev);
    struct libusb_device_handle *_handle;
    size_t priv_size = usbi_backend->device_handle_priv_size;
    int r;
    usbi_dbg("open %d.%d", dev->bus_number, dev->device_address);

    _handle = malloc(sizeof(*_handle) + priv_size);
    if (!_handle)
        return LIBUSB_ERROR_NO_MEM;

    r = usbi_mutex_init(&_handle->lock, NULL);
    if (r) {
        free(_handle);
        return LIBUSB_ERROR_OTHER;
    }

    _handle->dev = libusb_ref_device(dev);
    _handle->claimed_interfaces = 0;
    memset(&_handle->os_priv, 0, priv_size);

    r = usbi_backend->open(_handle,fd);
    if (r < 0) {
        usbi_dbg("open %d.%d returns %d", dev->bus_number, dev->device_address, r);
        libusb_unref_device(dev);
        usbi_mutex_destroy(&_handle->lock);
        free(_handle);
        return r;
    }

    usbi_mutex_lock(&ctx->open_devs_lock);
    list_add(&_handle->list, &ctx->open_devs);
    usbi_mutex_unlock(&ctx->open_devs_lock);
    *handle = _handle;
    /* At this point, we want to interrupt any existing event handlers so
     * that they realise the addition of the new device's poll fd. One
     * example when this is desirable is if the user is running a separate
     * dedicated libusb events handling thread, which is running with a long
     * or infinite timeout. We want to interrupt that iteration of the loop,
     * so that it picks up the new fd, and then continues. */
    usbi_fd_notification(ctx);

    return 0;
} 
```

# op_open(libusb_fs.c) 更改：

```
static int op_open(struct libusb_device_handle *handle, int fd)
{
    struct linux_device_handle_priv *hpriv = _device_handle_priv(handle);
    char filename[PATH_MAX];

    _get_usbfs_path(handle->dev, filename);
    usbi_dbg("opening %s", filename);

    hpriv->fd = fd;

    if (hpriv->fd < 0) {
        if (errno == EACCES) {
            usbi_err(HANDLE_CTX(handle), "libusb couldn't open USB device %s: "
                "Permission denied.", filename);
            usbi_err(HANDLE_CTX(handle),
                "libusb requires write access to USB device nodes.");
            return LIBUSB_ERROR_ACCESS;
        } else if (errno == ENOENT) {
            usbi_err(HANDLE_CTX(handle), "libusb couldn't open USB device %s: "
                "No such file or directory.", filename);
            return LIBUSB_ERROR_NO_DEVICE;
        } else {
            usbi_err(HANDLE_CTX(handle),
                "open failed, code %d errno %d", hpriv->fd, errno);
            return LIBUSB_ERROR_IO;
        }
    }

    return usbi_add_pollfd(HANDLE_CTX(handle), hpriv->fd, POLLOUT);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T21:01:19.560

即使你编译了它，Android 也可能不会让你通过 libusb 访问 USB 设备，除非你的设备是 root 的。如果将您的应用程序移植到[Android 的本机 USB 堆栈](http://developer.android.com/guide/topics/connectivity/usb/index.html)是可行的，那几乎肯定是一个更稳定的解决方案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-26T12:28:02.703

也可以尝试使用[android串口api](https://code.google.com/p/android-serialport-api/)

这是串行端口初始化的示例。

```
private FileDescriptor mFd;
private FileInputStream mFileInputStream;
private FileOutputStream mFileOutputStream;

public SerialPort(File device, int baudrate, int flags) throws SecurityException, IOException {

    /* Check access permission */
    if (!device.canRead() || !device.canWrite()) {
        try {
            /* Missing read/write permission, trying to chmod the file */
            Process su;
            su = Runtime.getRuntime().exec("/system/bin/su");
            String cmd = "chmod 666 " + device.getAbsolutePath() + "\n"
                    + "exit\n";
            su.getOutputStream().write(cmd.getBytes());
            if ((su.waitFor() != 0) || !device.canRead()
                    || !device.canWrite()) {
                throw new SecurityException();
            }
        } catch (Exception e) {
            e.printStackTrace();
            throw new SecurityException();
        }
    }

    mFd = open("/dev/ttyACM0", 9600, 0);
    if (mFd == null) {
        Log.e(TAG, "native open returns null");
        throw new IOException();
    }
    mFileInputStream = new FileInputStream(mFd);
    mFileOutputStream = new FileOutputStream(mFd);
} 
```

使用 USB 主机上的设备也是如此。

# css - 问题在两个浮点数之间居中一个 div

> ID：15957512
> 
> 赞同：2
> 
> 时间：2013-04-11T19:44:33.077
> 
> 标签：css, css-float, center

我在这个网站上找到了一个解决方案，**[将 div 置于两个 float 之间](https://stackoverflow.com/questions/3172738/centering-a-div-between-one-thats-floated-right-and-one-thats-floated-left)**。该解决方案工作正常，只是我现在有一个双边框。

**CSS**

```
.trilink_container {
margin:5px;
overflow: hidden; /* contain floated elements */
}

.trilink_all {
border: 1px solid #CCCCCC;
color: #444444;
text-shadow: 0 1px 1px #F6F6F6;
background: #fdfdfd;
background: -o-linear-gradient(top,  #fdfdfd,  #eee);
background: -ms-linear-gradient(top,  #fdfdfd,  #eee);
background: -moz-linear-gradient(top,  #fdfdfd,  #eee);
background: -webkit-gradient(linear,  left top,  left bottom,  color-stop(0,  #fdfdfd),  color-stop(1,  #eee));
background: -webkit-linear-gradient(#fdfdfd,  #eee);
background: linear-gradient(top,  #fdfdfd,  #eee);
text-align:center;
 }

.trilink_item {
float: left; 
width: 32%;
margin-left:5px;
}

.trilink_right {
float: right; 
width: 32%;
margin-right:5px;
}

.trilink_center {
margin-left: auto;
margin-right: auto;
} 
```

**HTML**

```
<div class="trilink_container">

<div class="trilink_item trilink_all">Left Test</div>
<div class="trilink_right trilink_all">Right Text</div>
<div class="trilink_center trilink_all">Centre Text</div>

</div> 
```

我还将代码添加到**[jfiddle](http://jsfiddle.net/UVmhP/)**。

顺便说一句，我意识到我的编码有点乱，一旦我有解决方案就打算整理一下:)

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T19:47:46.453

添加`overflow: hidden`（或`auto`；除`visible`）之外的任何东西`.trilink_center`，你会得到你想要的我相信的（[见这个小提琴](http://jsfiddle.net/UVmhP/1/)）。

这建立了一个新的[块格式化上下文](http://www.w3.org/TR/CSS21/visuren.html#block-formatting)，它改变了流程的工作方式。请参阅[这篇文章](http://colinaarts.com/articles/the-magic-of-overflow-hidden/)进行一些讨论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T19:48:58.363

如果要删除双边框，则只需从`margin`div中删除`left``right`

```
.trilink_item {
    float: left; 
    width: 32%;
    //margin-left:5px; remove it
    }

.trilink_right {
    float: right; 
    width: 32%;
    //margin-right:5px; remove it
    } 
```

[JS 小提琴示例](http://jsfiddle.net/UVmhP/3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T19:52:12.443

如果你想消除边缘附近的双边框，试试这个[小提琴。](http://jsfiddle.net/UVmhP/6/)它分别删除`border-left`左右`border-right`div

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T19:54:14.127

`.trilink_center {

```
 margin-left: auto;
 margin-right: auto;
 /* float left or right
 float: left; 
```

}`

就这样

# google-cloud-storage - 在 GCE 实例中挂载 Google Cloud Storage 卷

> ID：15957514
> 
> 赞同：9
> 
> 时间：2013-04-11T19:44:36.660
> 
> 标签：google-cloud-storage, google-compute-engine

是否可以将 Google Cloud Storage 作为卷安装在 GCE 实例中以供应用程序访问？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T05:25:10.220

它仍在进行中，您可以尝试[s3fuse](https://code.google.com/p/s3fuse/)

不要指望生产可靠性，至少这是我大约一个月前的经验......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-17T17:19:38.907

除了[另一个答案](https://stackoverflow.com/a/15963692/3618671)中提到的[s3fuse](https://code.google.com/p/s3fuse/)之外，还有[gcsfs](https://code.google.com/p/gcsfs/)（基于 s3fuse）和[stormfs](https://github.com/benlemasurier/stormfs)。

请注意，我没有尝试过其中任何一个，所以我不能说这些解决方案中的任何一个有多强大。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-02T11:48:11.113

谷歌现在有官方的[gcsfuse](https://github.com/GoogleCloudPlatform/gcsfuse) FS。但是，它处于 Beta 阶段，永远不会稳定发布，因为性能和稳定性存在无法或很难解决的问题。

如果您需要处理许多小文件，性能会迅速下降。此外，扫描包含许多文件的目录（就像`find`确实如此）需要数小时或数天。

我们已经尝试将它用于生产，但它偶尔会出现 I/O 错误。所以现在，我们仅将其用于维护。

# android - 移动应用程序：MySQL 连接

> ID：15957518
> 
> 赞同：0
> 
> 时间：2013-04-11T19:44:46.100
> 
> 标签：android, mysql, ios, connection

我想为 Android 和 iOS 开发一个原生应用程序。该应用程序与在线服务器上的 MySQL 数据库通信。

最好的方法是什么？将数据库存储在应用程序中还是直接在应用程序内与服务器上的实时数据库通信？从应用程序直接连接到数据库是否安全？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T19:54:07.617

您能够在应用程序中存储数据库的唯一方法是它是一个平面文件数据库。

连接到服务器上的 MySql 数据库应该没有任何问题，如果您想要额外的安全性，请加密您的密码并在需要使用它时解密它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T21:05:34.840

当我需要一个应用程序与数据库通信时，我使用服务器端脚本（用 PHP 编写）。

样品流程：

1.  应用程序执行 HTTP POST 并在标头中包含所有必需的变量。
2.  服务器上的脚本查询数据库。
3.  该脚本将数据作为 JSON/XML 数组返回。

这种配置有几个好处，最重要的是您不必分发数据库密码 - 即使您对它们进行加密，这也是一种风险。您还可以轻松监控/记录/拒绝连接。

最后，此实现与平台无关，适用于 Android 和 iOS。

然而，这种技术对我来说很成功，YMMV。

# css - 如何设置 div 或 li 的样式使其看起来像这个进度条？

> ID：15957523
> 
> 赞同：0
> 
> 时间：2013-04-11T19:45:06.037
> 
> 标签：css

我不知道这叫什么，所以我无法很好地为这个问题命名。我想要做的是制作一个栏，显示流程中的哪些步骤已完成，如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/bHIq7.gif)

我不知道如何做这种效果，因为我不知道它叫什么，所以我找不到任何例子或任何东西。

我怎样才能做出像上图那样的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T20:02:10.817

这是从样式开始的好地方：http: [//css3button.net/81334](http://css3button.net/81334)

您正在查看的是：

*   背景的 CSS 渐变：http: [//css-tricks.com/css3-gradients/](http://css-tricks.com/css3-gradients/)

*   **文本上的文本**阴影****

***   **box-shadow**为灯光细节设置为 inset

    *   也许还有一些非常先进的**:before**和**:after**样式： [http ://css-tricks.com/bubble-point-tooltips-with-css3-jquery/](http://css-tricks.com/bubble-point-tooltips-with-css3-jquery/)** 

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T20:00:00.713

它被称为`Progress Trackers`，它看起来类似于`Breadcrumb`导航，但它具有不同的行为和用途。

请参阅以下[链接](http://www.smashingmagazine.com/2010/01/15/progress-trackers-in-web-design-examples-and-best-design-practices/)以查看示例和两者之间的差异。

请参阅以下[教程](http://blog.sathomas.me/post/tracking-progress-in-pure-css)以在纯 CSS 中构建进度跟踪器。**

# c# - Web 应用在首次离线应用加载时丢弃非会话 Cookie

> ID：15957526
> 
> 赞同：1
> 
> 时间：2013-04-11T19:45:24.273
> 
> 标签：c#, javascript, ipad, cookies, iphone-standalone-web-app

我创建了一个 Web 应用程序，它利用 cookie 来存储应用程序状态，以允许应用程序被多次打开，并且用户的会话可以持续存在。我正在使用 cache.manifest 来允许离线访问应用程序。

我可以从应用程序向浏览器添加 cookie，没有任何问题。请注意，它们不是会话 cookie，但它们都在创建后至少 1 年到期。cookie 有两种创建方式： 1\. 使用[https://github.com/carhartl/jquery-cookie](https://github.com/carhartl/jquery-cookie) 2\. 使用 Response.Cookies.Add(httpCookie); 在 C# 服务器代码中

在将我的 iPad 连接到开发人员工具后，我能够确认 cookie 是可见的，并且可以在将它们添加到应用程序后在应用程序的 JavaScript 中使用。

但是，一旦我将 iPad 切换到飞行模式并重新打开应用程序，所有的 cookie 都找不到了。它们在开发人员工具以及请求中不可见。我知道清单工作正常，因为 javaScript 代码将我重定向到正确显示图像的登录屏幕。

另一条信息可能会有所帮助...如果我重新联机，请重新登录应用程序，以便再次添加 cookie（尽管这两种方法），然后重新脱机，cookie 仍然连接到浏览器。

我将尽可能多地使用 LocalStorage 进行转换，但希望有人能够为我澄清这里发生的事情。

# templates - Joomla 1.5：如何找到给定模板的视图？对网站进行逆向工程

> ID：15957527
> 
> 赞同：0
> 
> 时间：2013-04-11T19:45:25.880
> 
> 标签：templates, joomla, views, joomla1.5, reverse-engineering

我面临着对大型 Joomla 网站进行逆向工程的任务——进行更改和添加。

我可以很容易地找到页面后面的模板。然而，要找到哪个视图文件将变量值提供给该模板是很困难的。

任何提示或建议将不胜感激。

谢谢阅读。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T00:43:18.297

我认为您对 Joomla! 模板在 1.5 中工作。

模板不会通过它们显示的视图传递值。

模板就是这样，一个由 Joomla 处理的模板，它查找`<jdoc>`标签并有效地将它们替换为由页面生成的输出`component`和任何`modules`显示在页面上的输出。（插件也可以处理页面内容，但这是一个较低的级别）。

例如，您会在Joomla! 附带`jdoc`的模板中找到这些语句！`rhuk_milkyway`1.5.x

```
<jdoc:include type="modules" name="top" />
<jdoc:include type="modules" name="user3" />
<jdoc:include type="modules" name="user4" />
<jdoc:include type="modules" name="breadcrumb" />
<jdoc:include type="message" />
<jdoc:include type="modules" name="left" style="rounded" />
<jdoc:include type="modules" name="user1" style="xhtml" />
<jdoc:include type="modules" name="user2" style="xhtml" />
<jdoc:include type="component" />
<jdoc:include type="modules" name="footer" style="xhtml"/>
<jdoc:include type="modules" name="right" style="xhtml"/>
<jdoc:include type="modules" name="syndicate" />
<jdoc:include type="modules" name="debug" /> 
```

要找出是什么在页面的特定位置生成内容，您需要确定它是模块还是主要组件。如果它是生成内容的组件（这通常是生成 Joomla! 页面的主体），那么您可以在其菜单项中找到该组件的设置。

如果它是生成您感兴趣的页面部分的模块，您需要打开`Menu Manager`然后找到相关模块并打开它以获取它的设置。

# session - 并行tomcat webapps之间会话迁移的简单方法？

> ID：15957528
> 
> 赞同：1
> 
> 时间：2013-04-11T19:45:26.960
> 
> 标签：session, tomcat, deployment

我在一台 Tomcat 7 (7.0.28) 服务器上有一个 webapp。我想使用 Tomcat 的内置并行部署功能（FOO##001.war、FOO##002.war 等），但我不能让用户留在旧版本上，直到他们的会话超时或其他情况无效。我也不能只是使他们在旧 webapp 上的会话无效并让他们在新 webapp 上再次登录。我已经研究过集群 tomcat 服务器，但同样，我只有一个 Tomcat 实例。

有没有一种简单的方法使用我现有的设置而无需更改太多（或任何东西，最好是）将会话从旧版本自动迁移到新版本，而不会使会话无效或从 webapp 引导用户？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-06T14:36:01.810

经过大量研究和挫折后，事实证明，我想要实现的目标是 Tomcat 根本不可能实现的——至少不是我希望的方式。我最终想出的解决方案是使用 memcached 会话管理器，而不是默认的 Tomcat 序列化策略。这允许会话在 Tomcat 外部保持活动状态，并且还可以在同一 Tomcat 容器中运行的多个 Web 应用程序之间共享它们。

然而，这产生了另一个问题，因为现在同一个会话对同一个 webapp（不同版本）的两个实例有效。Tomcat不知道如何处理这种情况，因为旧版本和新版本的应用程序都在同一个地址，而不是选择一个实例，Tomcat什么也不做，显示一个空白页面。对此的解决方案有点老套——我修改了我们的 Ant 部署脚本，以同时部署新版本的 webapp 和取消部署旧版本的 webapp。

这导致应用程序的完全无缝部署，对最终用户没有影响。

# javascript - 我可以从 Node.js 中运行的 javascript 安装 NPM 包吗？

> ID：15957529
> 
> 赞同：101
> 
> 时间：2013-04-11T19:45:30.320
> 
> 标签：javascript, node.js, npm

我可以从 Node.js 中运行的 javascript 文件安装 NPM 包吗？例如，我想要一个脚本，我们称它为“script.js”，它以某种方式（......使用 NPM 或不......）安装通常通过 NPM 提供的包。在这个例子中，我想安装“FFI”。(npm 安装 ffi)

* * *

## 回答 #1

> 赞同：122
> 
> 时间：2013-04-11T19:48:14.127

确实可以以编程方式使用*npm*，并且在文档的旧版本中对此进行了概述。它已从官方文档中删除，但仍然存在于源代码控制中，并带有以下声明：

> 尽管 npm 可以以编程方式使用，但它的 API 仅供 CLI 使用，不保证它适用于任何其他用途。如果您想使用 npm 可靠地执行某些任务，最安全的做法是使用适当的参数调用所需的 npm 命令。
> 
> npm 的语义版本是指 CLI 本身，而不是底层 API。*即使 npm 的版本表明根据 semver 没有进行重大更改，内部 API 也不能保证保持稳定*。

在原始文档中，以下是提供的代码示例：

```
var npm = require('npm')
npm.load(myConfigObject, function (er) {
  if (er) return handlError(er)
  npm.commands.install(['some', 'args'], function (er, data) {
    if (er) return commandFailed(er)
    // command succeeded, and data might have some info
  })
  npm.registry.log.on('log', function (message) { ... })
}) 
```

由于*npm*存在于该`node_modules`文件夹中，因此您可以`require('npm')`像任何其他模块一样使用它来加载它。要安装模块，您需要使用`npm.commands.install()`.

如果您需要查看源代码，那么它也在[GitHub 上](https://github.com/npm/npm#using-npm-programmatically)。这是代码的完整工作示例，相当于在`npm install`没有任何命令行参数的情况下运行：

```
var npm = require('npm');
npm.load(function(err) {
  // handle errors

  // install module ffi
  npm.commands.install(['ffi'], function(er, data) {
    // log errors or data
  });

  npm.on('log', function(message) {
    // log installation progress
    console.log(message);
  });
}); 
```

注意 install 函数的第一个参数是一个数组。数组的每个元素都是*npm*将尝试安装的模块。

更高级的使用可以[`npm-cli.js`](https://github.com/npm/npm/blob/master/bin/npm-cli.js)在源代码管理文件中找到。

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2017-05-14T10:14:53.047

您可以使用**child_process**。[exec](https://nodejs.org/api/child_process.html#child_process_child_process_exec_command_options_callback)或[execSync](https://nodejs.org/api/child_process.html#child_process_child_process_execsync_command_options)生成一个 shell，然后在该 shell 中执行所需的命令，缓冲任何生成的输出：

```
var child_process = require('child_process');
child_process.execSync('npm install ffi',{stdio:[0,1,2]}); 
```

如果提供了回调函数，则使用参数（error、stdout、stderr）调用它。这样您就可以像手动执行安装一样运行安装并查看完整输出。

child_process.execSync() 方法通常与 child_process.exec() 相同，只是该方法在子进程完全关闭之前不会返回。

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2013-04-11T19:48:43.143

是的。您可以使用 child_process 执行系统命令

```
var exec = require('child_process').exec,
    child;

 child = exec('npm install ffi',
 function (error, stdout, stderr) {
     console.log('stdout: ' + stdout);
     console.log('stderr: ' + stderr);
     if (error !== null) {
          console.log('exec error: ' + error);
     }
 }); 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2013-10-16T14:31:52.713

它实际上可能有点容易

```
var exec = require('child_process').exec;
child = exec('npm install ffi').stderr.pipe(process.stderr); 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2017-07-15T14:49:58.553

我花了很长时间试图让第一个示例在项目目录中工作，在这里发布以防其他人发现它。据我所知，直接加载 NPM 仍然可以正常工作，但是因为它假定 CLI，所以我们必须重复一下自己的设置：

```
// this must come before load to set your project directory
var previous = process.cwd();
process.chdir(project);

// this is the part missing from the example above
var conf = {'bin-links': false, verbose: true, prefix: project}

// this is all mostly the same

var cli = require('npm');
cli.load(conf, (err) => {
    // handle errors
    if(err) {
        return reject(err);
    }

    // install module
    cli.commands.install(['ffi'], (er, data) => {
        process.chdir(previous);
        if(err) {
            reject(err);
        }
        // log errors or data
        resolve(data);
    });

    cli.on('log', (message) => {
        // log installation progress
        console.log(message);
    });
}); 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2018-10-08T15:29:34.617

[pacote](https://www.npmjs.com/package/pacote)是 npm 用来获取包元数据和 tarball 的包。它有一个稳定的公共 API。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2019-09-12T20:37:50.450

此处未提及的另一种选择是直接从`./node_modules/npm/bin/npm-cli.js`

例如，您希望能够通过在未安装 NPM 的机器上运行脚本来安装节点模块。你确实想用 CLI 来做。在这种情况下，只需在构建程序时在本地的 node_modules 中安装 NPM ( `npm i npm`)。

然后像这样使用它：

```
// Require child_process module
const { fork } = require('child_process');
// Working directory for subprocess of installer
const cwd = './path-where-to-run-npm-command'; 
// CLI path FROM cwd path! Pay attention
// here - path should be FROM your cwd directory
// to your locally installed npm module
const cli = '../node_modules/npm/bin/npm-cli.js';
// NPM arguments to run with
// If your working directory already contains
// package.json file, then just install it!
const args = ['install']; // Or, i.e ['audit', 'fix']

// Run installer
const installer = fork(cli, args, {
  silent: true,
  cwd: cwd
});

// Monitor your installer STDOUT and STDERR
installer.stdout.on('data', (data) => {
  console.log(data);
});
installer.stderr.on('data', (data) => {
  console.log(data);
});

// Do something on installer exit
installer.on('exit', (code) => {
  console.log(`Installer process finished with code ${code}`);
}); 
```

然后你的程序甚至可以打包成二进制文件，例如使用[PKG](https://www.npmjs.com/package/pkg)包。在这种情况下，您需要使用`--ignore-scripts`npm 选项，因为运行预安装脚本需要 node-gyp

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-01-28T10:17:58.787

我是一个模块的作者，它允许完全按照你的想法去做。请参阅[live-plugin-manager](https://www.npmjs.com/package/live-plugin-manager)。

您可以从 NPM、Github 或文件夹中安装和运行几乎任何包。

这里有一个例子：

```
import {PluginManager} from "live-plugin-manager";

const manager = new PluginManager();

async function run() {
  await manager.install("moment");

  const moment = manager.require("moment");
  console.log(moment().format());

  await manager.uninstall("moment");
}

run(); 
```

在上面的代码中，我`moment`在运行时安装包，加载并执行它。最后我卸载它。

在内部，我不运行`npm`cli，但实际上下载包并在节点 VM 沙箱中运行。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-11-08T08:39:14.870

@hexacyanide 提供的一个很好的解决方案，但事实证明 NPM 不再发出“日志”事件（至少从 6.4.1 版本开始）。相反，它们依赖于独立模块[https://github.com/npm/npmlog](https://github.com/npm/npmlog)。幸运的是，它是一个单例，因此我们可以访问 NPM 用于日志并订阅日志事件的同一实例：

```
const npmlog = require( "npm/node_modules/npmlog" ),
      npm = require( "npm" );

npmlog.on( "log", msg => {
   console.log({ msg });
});

 process.on("time", milestone => {
   console.log({ milestone });
 });

 process.on("timeEnd", milestone => {
   console.log({ milestone });    
 });

 npm.load({
    loaded: false,
    progress: false,
    "no-audit": true
  }, ( err ) => {

 npm.commands.install( installDirectory, [
      "cross-env@^5.2.0",
      "shelljs@^0.8.2"
    ], ( err, data ) => {
       console.log( "done" );    
    });

  }); 
```

从代码中可以看出，NPM 也会在 上发出性能指标`process`，因此我们也可以使用它来监控进度。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-12-23T15:17:57.353

增加一点[tarkh 的好答案](https://stackoverflow.com/a/57914191/8522689)。如果您不打算显式安装 npm CLI 并且已经通过 package.json 文件安装 npm。那么里面的文件`./node_modules/npm/bin/npm-cli.js`就是可以用来运行命令的CLI。

为了使其全局可用，请运行以下命令并将二进制文件添加到路径中。

```
ln -sf /usr/app/node_modules/npm/bin/npm-cli.js /usr/bin/npm 
```

此外，如果它对某人有帮助。这是您如何模仿`npm install`命令以安装 package.json 中的所有包的方法。

```
const npm = require('npm');
const Bluebird = require('bluebird');

    async installDependencies() {
            await Bluebird.promisify(npm.load)({
                loglevel: 'silent',
                progress: false,
            });
            await Bluebird.promisify(npm.install)(
                "/path/to/directory/where/package.json/is",
            );
        } 
```

# math - 加性持久性ocaml

> ID：15957530
> 
> 赞同：-1
> 
> 时间：2013-04-11T19:45:34.050
> 
> 标签：math, ocaml

我无法弄清楚如何提出整数的加法持久性和数字根例如，从起始数字 9876 获得的序列是 (9876, 30, 3)，因此 9876 的加法持久性为 2 和3的数字根。

我将整数转换为一个列表（即{9; 8; 7; 6}），然后对列表求和以生成另一个整数，依此类推，直到只剩下一个数字。如何检查是否只剩下一位数字？数字根是这个数字

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T20:03:24.087

您可以检查您的号码是否小于 10。

# javascript - 在 javascript 中使用 x-jquery-tmpl 变量

> ID：15957532
> 
> 赞同：0
> 
> 时间：2013-04-11T19:45:56.493
> 
> 标签：javascript, jquery, jquery-templates

我正在使用 jQuery 文件上传插件，有`type="text/x-jquery-tmpl"`. 我第一次看到这种类型的脚本，但是我知道它是如何工作的（至少是这个脚本中使用的那些）。这个脚本中有一些返回值，比如 _name（使用起来很像`${_name}`，我认为它一定是 document.write 之类的东西，对吧？）我需要将此`_name`值保存在 localStorage 中。如何在 javascript 中读取此值？

# php - 如何在 PHPUnit 中测试 STDIN

> ID：15957533
> 
> 赞同：9
> 
> 时间：2013-04-11T19:46:04.417
> 
> 标签：php, testing, tdd, phpunit, bdd

我有从标准输入读取并返回读取值的读取器类。

```
class Reader 
{
    const STREAM_READ = 'php://stdin';

    private $_streamHandle;

    public function __construct($stream = self::STREAM_READ)
    {
        $this->_streamHandle = fopen($stream, 'r');
    }

    public function getReadedValue()
    {
        $value = trim(fgets($this->_streamHandle));

        return $value;
    }

    public function __destruct()
    {
        fclose($this->_streamHandle);
    }
} 
```

现在是我的问题，我如何测试这个类，从标准输入读取一些内容并按`getReadedValue()`函数返回读取的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T20:25:32.627

您测试*Reader*，而不是 STDIN 是否正常工作。

因为您测试单元（*Reader*），所以该文件名是什么并不重要，因为它只是可选的。您可以注入不同的东西，例如临时文件的文件名。

# delphi - 德尔福资源节约

> ID：15957535
> 
> 赞同：-2
> 
> 时间：2013-04-11T19:46:07.697
> 
> 标签：delphi

我有一个包含 4 个资源的项目。我的要求是将它们保存在 4 个不同的路径中。所以我定义了以下代码：

```
procedure TMainForm.FormCreate(Sender: TObject);
var
  ResStream: TResourceStream;
begin
  ResStream := TResourceStream.CreateFromID(HInstance, 00001, RT_RCDATA);
  try
    ResStream.Position := 1;
    ResStream.SaveToFile('C:\MyFile.dll');
  finally
    ResStream.Free;
  end;
end; 
```

我从这个论坛得到它。然后我阅读了[http://docs.embarcadero.com/products/rad_studio/radstudio2007/RS2007_helpupdates/HUpdate4/EN/html/delphivclwin32/!!MEMBEROVERVIEW_Classes_TResourceStream.html](http://docs.embarcadero.com/products/rad_studio/radstudio2007/RS2007_helpupdates/HUpdate4/EN/html/delphivclwin32/!!MEMBEROVERVIEW_Classes_TResourceStream.html)。但我不清楚**TResourceStream.Position 。**第一个资源是否应该为 1，第二个资源是否应该为 2，依此类推。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T20:00:17.280

在这一行

```
ResStream.Position := 1; 
```

您正在设置流的位置。这类似于在文件中设置文件指针。的值[`Position`](http://docwiki.embarcadero.com/Libraries/en/System.Classes.TStream.Position)与资源编号无关。文档是这样描述的：

> 指示当前在读取和写入流中的偏移量。
> 
> 使用 Position 获取流的当前位置。这是从流数据开始的字节数。

事实上你根本不应该设置`Position`。它没有任何目的。您的代码可以是：

```
procedure SaveResourceToFile(const ID: Integer; const FileName: string);
var
  Stream: TResourceStream;
begin
  Stream := TResourceStream.CreateFromID(HInstance, ID, RT_RCDATA);
  try
    Stream.SaveToFile(FileName);
  finally
    Stream.Free;
  end;
end; 
```

所以你需要调用这个函数四次，每次都传递资源的ID和目标文件名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T19:59:03.073

a的`Position`属性`TResourceStream`与它在任何其他`TStream`后代中的含义相同。它定义了流数据中的当前读取或写入位置。设置`Position := 1`意味着下一次读取或写入操作将从数据的第二个字节开始。

您通常不想设置`Position`为零以外的任何值，因为您想处理整个流。但是，在这种情况下，**这并不重要**。`SaveToFile`总是将流的*全部*内容写入文件。当前位置无关紧要。

分别加载每个资源（即，对 的四个单独调用`TResourceStream.Create`）并保存每个资源。

# android - Android BroadcastReceiver：线程模型和非重叠

> ID：15957536
> 
> 赞同：1
> 
> 时间：2013-04-11T19:46:08.823
> 
> 标签：android, multithreading, broadcastreceiver

我有一些关于 Android 的设计问题`BroadcastReceiver`。

我的场景如下：当某个 wifi 网络连接时，检测是否有强制门户，如果有，则对其进行身份验证。该场景涉及网络 I/O，需要几秒钟才能完成（尤其是当您需要等待带有密码的 SMS 时）。

通过调试`BroadcastReceiver`Wifi 状态更改，我发现它是在应用程序的主线程上调用的。这是几分钟后我不知道的事情。我是在说这个，而不是在问，因为这个问题也是我发现的结果。

在无线身份验证阶段，我应该处理用户突然断开连接（例如由于热点故障，用户超出范围......）并重新连接的情况，**避免两个广播重叠**并可能**取消**最终失败的身份验证.

在我发现 BroadcastReceiver 是在主线程中执行后，我得出的结论是我需要一个`AsyncTask`来执行网络 I/O，但请随意提出其他想法。

问题是：如果在长时间运行的任务中间触发了连续广播，我该如何阻止它？事实上，`AsyncTask`s 可以被取消，但是我怎样才能存储一个共享实例`AsyncTask`以便从不同的 BroadcastReceiver 取消它而不会使我的生活变得太复杂？

**Android`BroadcastReceiver`是*事实上的单例还是 Android 每次需要触发新的广播时都会创建一个声明接收器的新实例？***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T19:55:36.740

`Service`为需要一些时间执行的任务启动一个很好的做法。

在你的情况下，我会使用[`IntentService`](http://developer.android.com/reference/android/app/IntentService.html). 这个特定的服务在后台线程中执行，它还处理一个内部队列，所以如果你启动它两次，第二个任务将在第一个任务完成后执行。我强烈建议您使用`IntentService`而不是`AsyncTask`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T19:55:55.000

`BroadcastReceiver`s 与[IntentService](http://developer.android.com/reference/android/app/IntentService.html)完美配合，该服务按顺序处理来自 UI 线程的传入意图。[服务指南](http://developer.android.com/guide/components/services.html#ExtendingIntentService)有一个实施示例。然后，您`BroadcastReceiver`只需调用 IntentService。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T20:02:46.180

> 我得出的结论是我需要一个 AsyncTask 来执行网络 I/O

可能不是。

> 但随时提出其他想法

正如其他人指出的那样，an`IntentService`是一个更好的主意。

部分问题是您几乎没有告诉我们有关您的接收器的任何具体信息。特别是，您没有说明您是如何注册有问题的接收器的：清单，还是`registerReceiver()`？理想情况下，对您的问题的建议会考虑到这一点。答案，以及这个`IntentService`，假设您正在通过清单进行注册。

> Android BroadcastReceivers 是事实上的单例，还是Android 每次需要触发新广播时都会创建一个声明接收器的新实例？

如果您在清单中注册接收器，`BroadcastReceiver`则会为每个广播创建一个新的实例。更重要的是，在这种情况下，没有任何信号向 Android 表明您的进程需要在`onReceive()`返回后继续存在，这就是为什么这`AsyncTask`不是一个好主意，而是一个更好的主意`IntentService`。

> 如果在长时间运行的任务中间触发了连续广播，我该如何阻止它？

可能您不会“停止”，因为很有可能您正在做的事情不能在任何有意义的意义上“停止”而不会给您的数据留下不确定的状态。

如果您真的非常有信心需要“停止”，您将需要创建自己的`Service`具有某些特征`IntentService`（例如，它具有其后台线程）但允许您操作命令队列，停止-进度工作等

> 但是如何存储 AsyncTask 的共享实例以便从不同的 BroadcastReceiver 取消它而不会使我的生活变得太复杂？

你不能，很容易，除非作为一个静态数据成员。但是由于 Android 很可能会在任务完成之前摆脱您的进程，因此使用 an`AsyncTask`不是一个好主意。

# plugins - CodeIgniter - 如何创建插件系统？

> ID：15957540
> 
> 赞同：2
> 
> 时间：2013-04-11T19:46:21.980
> 
> 标签：plugins, codeigniter-2

我想开发一个 CI 应用程序，它允许我创建许多类，并“神奇地”让这些类被应用程序识别并能够使用它们。例如，假设我有动物插件，每个类看起来像这样：

```
class Dog extends Animal
{
    public function get_description()
    {
        return 'A domesticated carnivorous mammal that typically has a long snout, an acute sense of smell, and a barking, howling, or whining voice.';
    }

    public function get_name()
    {
        return 'Dog';
    }

    public function make_sound()
    {
        return 'Bark, bark, bark!';
    }
} 
```

一旦将此类放置在某个指定位置，我希望应用程序能够使用它。示例用途是：

1.  列出所有动物名称和描述
2.  让特定的动物发出声音
3.  等等。

可扩展性是我的目标。我希望人们能够通过为应用程序开发额外的类来扩展这个系统。此外，实际上，每个插件可能需要的不仅仅是一个类。也许它可能需要 CSS、JS、图像等。现在，我只是想了解基本概念，所以我只是使用一个简单的类作为完整插件的示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-20T06:54:41.600

您可以取样：

CI-插件系统：[https ://github.com/Vheissu/CI-Plugin-System](https://github.com/Vheissu/CI-Plugin-System)

# css - 使用 CSS 的锯齿状边缘无法在 IE 中正确呈现

> ID：15957542
> 
> 赞同：0
> 
> 时间：2013-04-11T19:46:24.293
> 
> 标签：css

我正在尝试在我的网页底部添加这样的锯齿效果。

[http://d.pr/i/GpOb](http://d.pr/i/GpOb)

我设法找到了一些在所有浏览器中都能很好地工作的代码，除了 Internet Explorer 之外，我得到了以下结果。

[http://d.pr/i/VdLe](http://d.pr/i/VdLe)

不幸的是，避免使用 Internet Explorer 不是一种选择，我对如何解决这个问题的知识有限。

这是我在 CSS 文件中使用的代码。

```
 #footer {
            position:relative;
            width: 100%;
            height: 280px;
            margin-top:5px;
            background-color: #ab1919 ;
            z-index:1;
            border-bottom: 10px ridge #ab1919 ;
            }

            #footer:before {

            content: " ";
            display:block;
            position: relative;
            top:0px;left:0px;
            width:100%;
            height:36px;
                background: linear-gradient(#fff 0%, transparent 0%), linear-gradient(135deg, #ab1919 33.33%, transparent 33.33%) 0 0%, #ab1919 linear-gradient(45deg, #ab1919 33.33%, #fff 33.33%) 0 0%;
                background: -webkit-linear-gradient(#fff 0%, transparent 0%), -webkit-linear-gradient(135deg, #ab1919 33.33%, transparent 33.33%) 0 0%, #ab1919 -webkit-linear-gradient(45deg, #ab1919 33.33%, #fff 33.33%) 0 0%;
                background: -o-linear-gradient(#fff 0%, transparent 0%), -o-linear-gradient(135deg, #ab1919 33.33%, transparent 33.33%) 0 0%, #ab1919 -o-linear-gradient(45deg, #ab1919 33.33%, #fff.33%) 0 0%;
            background: -moz-linear-gradient(#fff 0%, transparent 0%), -moz-linear-gradient(135deg, #ab1919 33.33%, transparent 33.33%) 0 0%, #ab1919 -moz-linear-gradient(45deg, #ab1919 33.33%, #fff   33.33%) 0 0%;
                background-repeat: repeat-x;
                background-size: 0px 100%, 9px 27px, 9px 27px;
            } 
```

如果有人可以帮助解决这个问题，我将永远感激不尽。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T19:59:02.540

你可以用图像演示[http://jsfiddle.net/kevinPHPkevin/YyyP9/](http://jsfiddle.net/kevinPHPkevin/YyyP9/)

```
body, html {
    height:100%; background:url(http://www.hscripts.com/freeimages/icons/symbols/shapes/triangle/triangle-image8.gif);
    background-repeat:repeat-x;
    background-position:bottom;
} 
```

# sql - 在多列上分组

> ID：15957545
> 
> 赞同：0
> 
> 时间：2013-04-11T19:46:32.823
> 
> 标签：sql, sql-server-2008

我有一个包含以下列的表格：

```
Id(int), StoreId(int), StoreCode(nvarchar), StartDate(date), EndDate(date) 
```

它有一些 StoreId、StartDate、EndDate 相同但 StoreCode 不同的记录。我想选择这些商店代码（其余数据在两个或更多记录中重复）。如何正确分组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T19:49:07.660

```
SELECT  StoreId, StoreDate, EndDate, COUNT(DISTINCT StoreCode) AS Count
FROM MyTableName
GROUP BY StoreId, StoreDate, EndDate
HAVING COUNT(DISTINCT StoreCode) > 1 
```

`DISTINCT StoreCode`当至少出现 2 次时，将返回 (StoreId, StoreDate, EndDate) 组合以及与该组合关联的 s 数。

# php - PHP 表单复选框

> ID：15957551
> 
> 赞同：0
> 
> 时间：2013-04-11T19:46:47.383
> 
> 标签：php, mysql, forms

我正在创建一个表单，其中用户将访问级别设置为数据库中的用户名，该表单显示一个复选框和用户名。

这是下面的表格。它使用数据库填充。

```
<?php
require '../Pages/Database Actions/Database_Connect.php';
$result = mysql_query("SELECT * FROM members");
$row = mysql_fetch_array($result);
$row_num = mysql_num_rows($result);

echo '<table class="setuseraccess_title"><tr><td class="comitttiemembers_title"><h3 align="center">User Access Levels</h3></td></tr></table><br />';
echo'<form class="setuseraccess" action="index.php?page=member-profile" method="post"><table>';

for ($val = 0; $val < $row_num; $val++)
{
    echo '<tr><td><input type=\'checkbox\' name=\'SetAccess\' value=\''.$row['username'].'\' /></td>
        <td>'.$row['username'].'</td><td>'.$row['accesslevel'].'</td></tr>';
    $row = mysql_fetch_array($result);
}

echo '<tr><td colspan="3"><br /><select name="useraccesslevel">
<option value="0">Access Level 0</option>
<option value="1">Access Level 1</option>
<option value="2">Access Level 2</option>
<option value="3">Access Level 3</option>
<option value="4">Access Level 4</option>
<option value="5">Access Level 5</option>
</select><br /></td></tr>';
echo'<tr><td colspan="3"><br /><input class="member-buttons" type="submit" name="mb" value="Set Access" /><br /></td></tr></table></form>';
?> 
```

我将如何更新数据库中用户的访问级别？我也不确定我的复选框值是否应该是玩家用户名。这样做的最佳方法是什么？

-编辑- 抱歉忘记放操作页面。

```
<?php
if(isset($_POST['useraccesslevel']))
{
    $Alevel = trim($_POST['useraccesslevel']);
    echo $Alevel;

    $result = mysql_query("SELECT * FROM members");
    $row = mysql_fetch_array($result);
    $row_num = mysql_num_rows($result);

    for ($val = 0; $val < $row_num; $val++)
    {
        if(isset($_POST[$row['username']]))
        {
            $sql="UPDATE `wohsa`.`members` SET `accesslevel` = '" + $Alevel + "' WHERE `members`.`username` = '" + $_POST[$row['username']] + "';";
            $result1=mysql_query($sql);
        }
    }
}
?> 
```

那是我尝试更新数据库中的值的操作页面

----EDIT 2---- 我已经做到了，而且效果很好！感谢 dianuj 让我在正确的地方:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T20:03:22.103

首先，您必须将名称更正`checkbox`为`array``checbox`

```
 for ($val = 0; $val < $row_num; $val++)
 {
echo '<tr><td><input type=\'checkbox\' name=\'SetAccess[]\' value=\''.$row['username'].'\' /></td>
    <td>'.$row['username'].'</td><td>'.$row['accesslevel'].'</td></tr>';
$row = mysql_fetch_array($result);
} 
```

当您提交时，`form`您可以访问每次使用的值或 ID，`$_REQUEST[SetAcces][index]`并在循环中运行`update`查询到`$_REQUEST[SetAcces][index]`

```
update table set role..... where userid ='your $_REQUEST value' 
```

不是一个完整的功能，但给出一个想法希望这会有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T20:04:04.240

```
<?php

if(isset($_POST['mb'])){

$usernames = array();
foreach($_POST['SetAccess'] as $key=>$value)
$usernames[] = "'".$value."'";

$accesslevel = $_POST['useraccesslevel']

mysql_query("UPDATE `members` SET `accesslevel` = '".$accesslevel."' WHERE `username` IN (".implode(",",$usernames).")");

}
?> 
```

您可以添加自己的其他验证和过滤。

# c# - 用于 FormCollection 的 C# MVC4 ActionResult ActionFilter

> ID：15957553
> 
> 赞同：1
> 
> 时间：2013-04-11T19:46:56.807
> 
> 标签：c#, asp.net-mvc-4, attributes, overriding, action-filter

我有以下 ActionResults ，其中一个旨在替代接受 FormCollection 作为参数的另一个。

```
 [HttpPost]
    public ActionResult PartialAverageDisplay()
    {
        HomeModel C = new HomeModel();
        ChViewModel D = new ChViewModel();
        D = C.AverageCalculation();

        return PartialView(D);
    }
   [HttpPost]
    public ActionResult PartialAverageDisplay(FormCollection myFcollection)
    {
         HomeModel C = new HomeModel();
         System.Data.DataTable myDT = new System.Data.DataTable();
         myDT = (DataTable)Session["DT"];
         ChViewModel D = new ChViewModel();
         D = C.AverageCalculation(myDT, myFcollection);

            return PartialView(D);
        } 
```

我一直无法在网上找到有关如何为需要 FormCollection 创建 actionfilter 属性的示例。我见过的所有东西都使用了一个字符串数组。我没有创建动作过滤器的经验。谁能向我解释如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T19:59:02.210

MVC 不允许您使用相同的动作动词（Post、get 等）覆盖相同的方法。每个方法名称只能有一个 HttpPost。它会编译，但你会在运行时得到一个不明确的调用错误。

这还包括使用多个 ActionName 来尝试解决问题。问题是 URL 只能映射到该类型的单个操作。

# php - PDO中缺少mysql_*的一些有用功能

> ID：15957567
> 
> 赞同：0
> 
> 时间：2013-04-11T19:47:37.953
> 
> 标签：php, mysql, pdo

我想要一个 MySQL 查询或表对象，比如说一个将 PDO 对象作为输入并对表执行所有必要操作的对象。

我在想这个对象可以实现一些数组接口，比如`Countable`, `ArrayAccess`，`Iterator`所以我可以`foreach`像普通数组一样轻松地处理行。

在已弃用`mysql_*`的函数中，有（仍然是）非常有用的函数[`mysql_data_seek()`](http://www.php.net/manual/en/function.mysql-data-seek.php)，它有助于逐行移动，因此我可以实现所有`Iterator`方法。我可以在开始时运行一个查询并将行保留在某个资源私有字段中，并在需要时提供服务。

我可以通过向数据库发送适当的查询并获取结果来涵盖其他功能（主要是信息性的，[`mysql_list_tables()`](http://www.php.net/manual/en/function.mysql-list-tables.php)类似的），但是我如何才能移动到特定的行？

我以为[`fetch()`](http://www.php.net/manual/en/pdostatement.fetch.php)方法的最后一个参数是光标位置，但是当我调用

```
$p = $database->query('SELECT * FROM tobjects');
$row = $p->fetch(PDO::FETCH_ASSOC, PDO::ATTR_CURSOR,$i); 
```

对于 .的任何值，它总是产生相同的行`$i`。

**编辑**

实际上，它不是同一行，而是第一次调用时的第一行`fetch()`，第二行的第二行等等，就像没有游标信息一样。正如答案中所建议的，我这样做了

```
$p = $database->prepare('SELECT * FROM tobjects',
                    array(PDO::ATTR_CURSOR => PDO::CURSOR_SCROLL));
$p->execute();
$row = $p->fetch(PDO::FETCH_ASSOC, PDO::FETCH_ORI_ABS, $i); 
```

但这同样有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T19:54:20.243

你用`PDO::ATTR_CURSOR`错了。您需要做的是首先使用 请求可滚动游标`PDO::prepare`，然后您可以移动到结果集中您想要的任何记录：

```
$s = $database->prepare('SELECT * FROM tobjects',
                        [PDO::ATTR_CURSOR => PDO::CURSOR_SCROLL]);
$s->execute();
$row = $s->fetch(PDO::FETCH_ASSOC, PDO::FETCH_ORI_ABS, $i); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T20:08:00.290

我发现这些功能中的任何一个对于任何现实生活场景都没有用。

mysql_list_tables() 确实可以用对 INFORMATION SCHEMA 提供更多信息和更灵活的查询来代替

如果您已经可以拥有一个常规数组，为什么还要费心实现 ArrayAccess 呢？只有2个场景：

*   要么你需要相对少量的数据，适合网页。只需一次全部选择。

    ```
    $data = $stmt->fetchAll(); 
    ```

    您可以以任何您喜欢的方式遍历生成的数组。

*   或者您需要在某种控制台服务脚本中遍历长表。你不需要来回遍历它。只需选择并循环。

# ios - GKTurnBasedMatch 接收数据

> ID：15957576
> 
> 赞同：3
> 
> 时间：2013-04-11T19:48:18.373
> 
> 标签：ios, objective-c, game-center, gkturnbasedmatch

我正在尝试实现一个基于回合的应用程序，发送回合数据没有问题，但我看不到自动接收数据的方法。到目前为止，我发现了这么多：

*   有一个`GKTurnBasedEventHandlerDelegate`-协议。这很容易实现，但是我在哪里将该对象设置为任何它必须是委托的委托？它似乎不是`GKTurnBasedMatch`, or `GKTurnBasedMatchmakerViewController`, or的代表`GKMatchMaker`。

*   还有一种方法`GKTurnBasedMatch`被称为`loadMatchDataWithCompletionhandler`，但据我了解，它只在您有点直觉需要更新匹配时才调用一次。我怎么知道它必须更新？我必须每隔一秒左右触发一次这个功能吗？

提前致谢。

更新：我已设置`[GKTurnBasedEventHandler sharedTurnBasedEventHandler].delegate`为实现`GKTurnBasedEventHandlerDelegate`. 它仍然永远不会被调用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T21:21:31.940

您使用以下语句设置它，它成为共享实例的委托：

```
[[GKTurnBasedEventHandler sharedTurnBasedEventHandler] setDelegate:self]; 
```

`loadMatchDataWithCompletionhandler`您实际上不需要手动调用，当其中一个参与者调用`endTurnWithMatchData`所有其他参与者时，将通过`GKTurnBasedEventHandler`委托方法通知：

```
-(void) handleTurnEventForMatch:(GKTurnBasedMatch *)match didBecomeActive:(BOOL)didBecomeActive 
```

这就是您需要更新 UI 的地方。请注意，模拟器不支持`GKTurnBasedEventHandler` 委托方法，它们只能在实际设备中调用。

# r - 基于多列重新编码数据框列

> ID：15957579
> 
> 赞同：3
> 
> 时间：2013-04-11T19:48:28.067
> 
> 标签：r, dataframe

如何根据其他列的值重新编码列？假设我有下面的数据框，我想重新编码，以便在和`df$Col3`时值为 0 。`df$Col1 == x``df$Col2 == a`

```
> df <- data.frame(a=c(rep("x",3),rep("y",3),rep("x",4)),letters[c(1:5,3,4:1)],1:10)
> names(df)<-c("Col1","Col2","Col3")
> df
   Col1 Col2 Col3
1     x    a    1
2     x    b    2
3     x    c    3
4     y    d    4
5     y    e    5
6     y    c    6
7     x    d    7
8     x    c    8
9     x    b    9
10    x    a   10 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T19:52:22.407

您可以使用`ifelse`

```
> df$Col3  <- with(df, ifelse(Col1=='x' & Col2=='a', 0, Col3))
> df
   Col1 Col2 Col3
1     x    a    0
2     x    b    2
3     x    c    3
4     y    d    4
5     y    e    5
6     y    c    6
7     x    d    7
8     x    c    8
9     x    b    9
10    x    a    0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T19:52:10.610

这应该有效：

```
df[which(df$Col1=="x" & df$Col2=="a"),"Col3"] <- 0 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T21:01:53.123

只需这样做：

```
> df$Col3[df$Col1 == "x" & df$Col2 == "a"] <- 0

> df
   Col1 Col2 Col3
1     x    a    0
2     x    b    2
3     x    c    3
4     y    d    4
5     y    e    5
6     y    c    6
7     x    d    7
8     x    c    8
9     x    b    9
10    x    a    0 
```

编辑：@Jilber

```
f1 <- function() 
  df$Col3[df$Col1 == "x" & df$Col2 == "a"] <- 0

f2 <- function() 
  df$Col3  <- with(df, ifelse(Col1=='x' & Col2=='a', 0, Col3))

library(microbenchmark)

> microbenchmark(f1(),f2(), times=1000)
Unit: microseconds
 expr    min     lq median     uq     max neval
 f1() 65.749 67.673 68.315 69.597 123.158  1000
 f2() 80.823 83.068 84.030 85.312 207.187  1000 
```

没什么不可思议的，我知道。您的方法（包括条件未满足时的替代值）更通用，因此速度稍慢。基本上，在这种情况下，不需要对`test`参数中的负值进行评估，因为您将自己覆盖原始值。`ifelse`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T19:51:11.043

您可以使用 [] 括号对数据框进行子集化。格式是这样的：df[条件或子集行，条件或子集列]

```
df[df$Col1==x & df$Col2==a, df$Col3]  <- 0 
```

# ruby-on-rails - 将回形针附件图像减少 37.5%

> ID：15957580
> 
> 赞同：1
> 
> 时间：2013-04-11T19:48:28.927
> 
> 标签：ruby-on-rails, imagemagick, paperclip

我在 Rails 应用程序中使用回形针将图像上传到 S3。我在模型中的 has_attached_file 看起来像这样（省略了一些其他细节）：

```
 has_attached_file :media,
                :styles => {:thumb => "100x100>", :two_x => "50%", :one_five_x => "37%", :one_x => "25%"}, 
```

这会正确保存文件的 5 个版本，即 original、thumb、two_x、one_five_x 和 one_x。但是，我希望 one_five_x 资源为图像原始大小的 37.5%。到目前为止，我还没有弄清楚如何做小数点。

如何将回形针样式设置为 37.5%？

# javascript - 流星 - swfobject.js + YouTube API

> ID：15957581
> 
> 赞同：0
> 
> 时间：2013-04-11T19:48:29.267
> 
> 标签：javascript, youtube, meteor, swfobject

我很难弄清楚如何让这个（正常运行的）客户端 js 代码在流星中工作（在屏幕上输入元素的模板事件期间拉出 theVideo 变量。）

```
 <script type="text/javascript" src="swfobject/swfobject.js"></script>    
  <div id="ytapiplayer">
      You need Flash player 8+ and JavaScript enabled to view this video.
 </div>
<script type="text/javascript">
  theVideo = 'tAbCgr6jJ_0';

  if(theVideo != 'null'){
        var params = { allowScriptAccess: "always" };
        var atts = { id: "myytplayer" };
        swfobject.embedSWF("http://www.youtube.com/v/"+theVideo+"?enablejsapi=1&playerapiid=ytplayer&version=3",
        "ytapiplayer", "325", "256", "8", null, null, params, atts);
  }

  function onYouTubePlayerReady(playerId) {
      ytplayer = document.getElementById("myytplayer");
      ytplayer.playVideo();
    }
 </script> 
```

尝试通过 DOM 注入（此 html/javascript）加载脚本不起作用，swfobject 脚本似乎无法从本地和远程主机加载。

将脚本 (swfobject.js) 添加到我的项目根目录（排行榜示例）会在启动应用程序时（在终端输出内）导致“ReferenceError：未定义窗口”。

此代码在普通 HTML 页面内的客户端正常工作以加载脚本。

我在一个古老的（2009 年）repo 中找到了一个[库](http://meteormodel.googlecode.com/svn-history/r92/trunk/METEOR/js/ext_new/build/widgets/chart/swfobject-min.js)，它在启动时没有崩溃，但随后弹出了“swfobject”未找到错误。

关于解决方法的任何想法？将此代码放入模板事件中也不起作用；加载 swfobject 似乎总是问题所在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T06:38:32.850

通过将 swfobject.js 放在根目录中，它也会在没有 a 的服务器上进行解析，`window`因此这就是返回错误的原因。

如果您要将它移动到`/client/lib`（也删除`var`注释下第一行代码的第一个，否则它不会被限制在浏览器窗口中。

然后您不必手动引用该文件，您可以拥有一些 HTML，例如：

```
<template name="video">
    <div id="ytapiplayer">
    You need Flash player 8+ and JavaScript enabled to view this video.
    </div>
</template> 
```

和一些（客户端）js：

```
 Template.video.rendered = function() {
     played = false; //prevent double plays on multiple renders
     theVideo = 'tAbCgr6jJ_0';
     if(theVideo != 'null' && !played){
         played = true
         var params = { allowScriptAccess: "always" };
         var atts = { id: "myytplayer" };
         swfobject.embedSWF("http://www.youtube.com/v/"+theVideo+"?enablejsapi=1&playerapiid=ytplayer&version=3",
    "ytapiplayer", "325", "256", "8", null, null, params, atts);

 }

 onYouTubePlayerReady = function  (playerId) {
    var ytplayer = document.getElementById("myytplayer");
    ytplayer.playVideo();
 } 
```

我重新格式化了 onYouTubePlayerReady 以便可以在全球范围内访问它。我假设这是由脚本自动运行的？我没有在您的代码中看到对它的引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-01T17:51:10.690

自从提出这个问题以来已经有一段时间了，但我相信像我这样的其他人会偶然发现这个问题。这些只是我的笔记。

我让 swfobject 在我的项目中工作（以支持剪贴板复制）的方式是`<script>`直接在 HTML iron-router 模板中添加代码。

`<template name="writeApp"> <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/swfobject/2.2/swfobject.js"></script> ...`

在我的 .js 代码中，我使用我的 template.rendered 函数来设置一个全局可用的会话变量，称为 hasFlash：

`Template.writeApp.rendered = function() { Session.set('hasFlash', (swfobject.hasFlashPlayerVersion('1') && true)); }`

每次页面呈现时，我现在都可以查看用户现在是否拥有 Flash。在需要显示“错误：无闪烁”消息的页面上，我有一个辅助函数：

`Template.writeApp.helpers({ hasFlash: function() { return Session.get('hasFlash'); } });`

在 HTML 中，我可以使用 hasFlash 帮助函数来显示正确的消息：

`{{#if hasFlash}}Copy to Clipboard {{else}} Needs Flash to Copy {{/if}}`

希望这可以帮助任何偶然发现这个问题的人

# mongodb - 使用 Linq 时无法反序列化枚举

> ID：15957582
> 
> 赞同：1
> 
> 时间：2013-04-11T19:48:31.537
> 
> 标签：mongodb, enums, mongodb-.net-driver

所以我有这个枚举

```
public enum JobStatus
{
    Created = 0,
    Assigning = 1,
    Assigned = 2,
    Started = 3,
    Finished = 4
} 
```

在这个界面

```
public interface IJob
{
    Guid Id { get; set; }
    JobStatus Status { get; set; }
    bool IsFaulted { get; set; }
    string ErrorMessage { get; set; }
} 
```

我将其中一个人放入数据库中，一切正常。这就是它的样子。

```
{ "_id" : { "$uuid" : "4e5002b6-3c80-b497-4a33-46b0ea5a39bf"} 
, "_t" : "MyJobObject" 
, "Status" : 0 
, "IsFaulted" : false 
, "ErrorMessage" :  null  
, "Location" : "overthere"} 
```

然后，当我尝试使用此代码获取一个时

```
Database.GetCollection<IJob>("Jobs").AsQueryable().FirstOrDefault(x=>x.Status == JobStatus.Created); 
```

这会引发异常

```
Unable to determine the serialization information for the expression: jobs.Status.
   at MongoDB.Driver.Linq.Utils.BsonSerializationInfoFinder.GetSerializationInfo(Expression node, Dictionary`2 serializationInfoCache)
   at MongoDB.Driver.Linq.Utils.BsonSerializationInfoHelper.GetSerializationInfo(Expression node)
   at MongoDB.Driver.Linq.PredicateTranslator.BuildComparisonQuery(Expression variableExpression, ExpressionType operatorType, ConstantExpression constantExpression)
   at MongoDB.Driver.Linq.PredicateTranslator.BuildComparisonQuery(BinaryExpression binaryExpression)
   at MongoDB.Driver.Linq.PredicateTranslator.BuildQuery(Expression expression)
   at MongoDB.Driver.Linq.SelectQuery.BuildQuery()
   at MongoDB.Driver.Linq.SelectQuery.Execute()
   at MongoDB.Driver.Linq.MongoQueryProvider.Execute(Expression expression)
   at MongoDB.Driver.Linq.MongoQueryProvider.Execute[TResult](Expression expression)
   at System.Linq.Queryable.FirstOrDefault[TSource](IQueryable`1 source) 
```

我的第一次尝试没有将枚举分配给整数，这产生了相同的结果。我在两台不同的机器上看到了这一点，两个全新安装的 MongoDb，一个在 Windows 上，一个在 Ubuntu 12.04 上。

不知道该怎么做，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T20:03:32.620

我最终做了

`Database.GetCollection<IJob>("Jobs").AsQueryable().ToEnumerable().FirstOrDefault(x=>x.Status == JobStatus.Created);`

它工作正常，虽然我有点担心它可能会在那时拉下所有数据。不过它看起来并没有变慢，而且我曾经有超过 50k 的记录，如果发生这种情况，您会认为您会看到性能下降。

# java - Android开发中的精确计算，Java？

> ID：15957583
> 
> 赞同：1
> 
> 时间：2013-04-11T19:48:34.427
> 
> 标签：java, android, main-activity

我正在为Android创建一个计算器，到目前为止它看起来已经完成了......问题是答案并不精确，加法，减法，乘法工作正常，因为通常不需要小数......当涉及到除法时答案被四舍五入到最接近的整数，而不是以十进制显示答案......所以我更改了 TextView 类型以显示小数并使用 float 而不是 int 作为包含答案的变量。结果是我最终得到一个带有“.00”的四舍五入整数：/请帮助！我的代码： MainActivity.java ：

```
package in.rohanbojja.basiccalculator;

import android.app.Activity;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.widget.EditText;
import android.widget.TextView;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }
    public void add( View view){

        EditText n1 = (EditText) findViewById(R.id.editText1);
        EditText n2 = (EditText) findViewById(R.id.editText3);
        TextView res = (TextView) findViewById(R.id.textView1);

        String sn1 = n1.getText().toString();
        String sn2 = n2.getText().toString();
        String sres;

        int in1 = Integer.parseInt(sn1);
        int in2 = Integer.parseInt(sn2);
        float ires;

        ires = in1 + in2;
        sres = Float.toString(ires);
        res.setText(sres);
}
public void sub( View view ){

    EditText n1 = (EditText) findViewById(R.id.editText1);
    EditText n2 = (EditText) findViewById(R.id.editText3);
    TextView res = (TextView) findViewById(R.id.textView1);

    String sn1 = n1.getText().toString();
    String sn2 = n2.getText().toString();
    String sres;

    int in1 = Integer.parseInt(sn1);
    int in2 = Integer.parseInt(sn2);
    float ires;

    ires = in1 - in2;
    sres = Float.toString(ires);
    res.setText(sres);
}
public void mul( View view ){

    EditText n1 = (EditText) findViewById(R.id.editText1);
    EditText n2 = (EditText) findViewById(R.id.editText3);
    TextView res = (TextView) findViewById(R.id.textView1);

    String sn1 = n1.getText().toString();
    String sn2 = n2.getText().toString();
    String sres;

    int in1 = Integer.parseInt(sn1);
    int in2 = Integer.parseInt(sn2);
    float ires;

    ires = in1 * in2;
    sres = Float.toString(ires);
    res.setText(sres);

}

public void clr( View view ){

    EditText n1 = (EditText) findViewById(R.id.editText1);
    EditText n2 = (EditText) findViewById(R.id.editText3);
    TextView res = (TextView) findViewById(R.id.textView1);

    n1.setText("");
    n2.setText("");
    res.setText("Result");
}

public void div( View view){
    EditText n1 = (EditText) findViewById(R.id.editText1);
    EditText n2 = (EditText) findViewById(R.id.editText3);
    TextView res = (TextView) findViewById(R.id.textView1);

    String sn1 = n1.getText().toString();
    String sn2 = n2.getText().toString();
    String sres;

    int in1 = Integer.parseInt(sn1);
    int in2 = Integer.parseInt(sn2);
    float ires;

    ires = in1/in2;
    sres = Float.toString(ires);
    res.setText(sres);
}
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T19:51:14.817

```
int in1 = Integer.parseInt(sn1);
int in2 = Integer.parseInt(sn2);
float ires;

ires = in1/in2; 
```

您仍在进行整数除法，您只是将结果存储在浮点数中。要执行浮点除法，in1 和 in2 必须是浮点数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-11T19:53:42.050

我看到你试图通过将结果存储在 a 中来强制浮点结果`float`，但不幸的是这不会这样做。Java 中的运算符，例如除法运算符 ( `/`) 的工作方式如下：

*   如果**两个**操作数都是浮点数，则结果是浮点数。
*   如果其中**一个**操作数是浮点数，则结果是浮点数。
*   如果**操作**数都不是浮点数（即它们都是整数），则结果为`int`.

由于您属于后一种情况，因此您会得到一个整数结果。解决方案是强制您的*操作数*之一为浮点数，而不仅仅是结果变量，如下所示：

```
ires = ((float) in1) / in2; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T19:51:28.683

在 div 中： in1 和 in2 是整数。您需要将 sn1 和 sn2 解析为浮点数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T19:51:36.563

你有一些小错误，你应该转换`in1`并`in2`浮动，或者像这样：

```
ires = (float)in1/in2; 
```

# backbone.js - 骨干模型上的动态属性

> ID：15957591
> 
> 赞同：1
> 
> 时间：2013-04-11T19:49:03.083
> 
> 标签：backbone.js, backbone-views, backbone-model

我有一个名为`User`. 用户具有城市、州和国家属性。我在这个模型上有一个名为 locationString 的函数，它根据模型上的属性是否为 presnet 输出一个逗号分隔的列表。即亚特兰大、乔治亚州或乔治亚州或亚特兰大，因此只有在需要时才使用逗号。

我在视图的渲染方法中为我的模板设置 json，方法是调用`var json = model.toJSON()`然后设置位置字符串`json.location_string = this.model.locationString();`。

我还通过`this.model.bind('change', this.render);`在视图上调用我的初始化函数将模型的更改事件绑定到我的渲染方法。

所有其他属性都在视图中的模型更新时相应更改，但 location_string 属性没有。

任何帮助将不胜感激

```
location_string: function() {                                                                                                                                                                                      var loc_str = "";      
loc_str += this.city || "";      
loc_str += (this.city && this.geo_state) ? ", " : "";      
loc_str += this.geo_state || "";      
loc_str += (this.geo_state && this.country) ? ", " : "";      
loc_str += this.country || "";      
return loc_str;    
}, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T21:45:22.583

我发现这是因为我打电话`this.field_name`而不是`this.get('field_name')`.

我希望这对其他人有所帮助。

# excel - 如何将用户表单中的数据添加到工作表上的格式化表格

> ID：15957593
> 
> 赞同：1
> 
> 时间：2013-04-11T19:49:06.847
> 
> 标签：excel, range, userform, vba

我创建了一个带有文本框和组合框的用户表单。我无法弄清楚如何使用该用户表单将数据添加到工作表上的格式化表中。请帮忙！

该表如下所示：

```
Date  Inv  Company  Amount  Recd.Date  Recd.Amt. 
```

我已启用总行选项，因此我需要代码在该特定表中添加一行（在最后一个条目之后和总行之前）并自动在该特定行中输入数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T19:54:16.613

在最简单的形式中，您可以只引用工作表上的范围/单元格对象，并将它们设置为等于用户窗体上的对象值。

假设您有一些表单对象，例如`TextBox1`和`ListBox1`（或根据需要进行修改）

`Range("A1").Value = UserForm.TextBox1.Value`

`Range("B2").Value = UserForm.ListBox1.Value`

您可以通过表单对象的事件控件（例如`TextBox1_Change()`等）来执行此操作，或者您可以添加一个按钮并使用该按钮`_Click()`事件来循环通过表单控件并将数据写入需要的工作表。

# matlab - 使用一组可变的点来索引矩阵

> ID：15957595
> 
> 赞同：1
> 
> 时间：2013-04-11T19:49:17.027
> 
> 标签：matlab, data-structures

我正在尝试实现一种检测图像中区域的算法，即从种子像素开始，应将相邻像素添加到该区域，首先是最高值。

我正在寻找一种数据结构来充当可以添加相邻像素的队列。它应该能够

*   索引到矩阵（图像）中，以找到最高值的像素
*   有效地删除点
*   添加一个元素，如果不存在的话

这是我想出的

```
% given:
% I     image (2d matrix)
% x, y  seed point

list = [];
region = zeros(size(I));

while [...]
    % Add all neighbors of (x, y) to list
    if x > 1
        % neighboring pixel to the left
        ind = sub2ind(size(I), x - 1, y);
        if length(find(list == ind)) == 0
            list(end+1) = ind;
        end
    end
    % similarly for all other neighbors
    % [...]

    % Find max in I among points in list
    [dummy, list_max_i] = max(I(list));
    max_i = list(list_max_i);
    [x, y] = ind2sub(size(I), max_i);

    % remove from list
    list(list_max_i) = [];

    region(x, y) = 1;
end 
```

但我想用`list`更适合添加和删除元素的数据结构替换。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-27T14:41:29.727

您如何继续使用仅分批而不是逐个增长的矩阵/向量。这具有预先分配的好处和动态扩展数组的灵活性。这里有两个感兴趣的帖子：

*   [MATLAB中未知长度的矩阵？](https://stackoverflow.com/a/1549094/97160)
*   [将向量附加到空的 MATLAB 矩阵](https://stackoverflow.com/a/783137/97160)

此外，您似乎正在实施[区域增长](http://en.wikipedia.org/wiki/Region_growing)算法。这是[一个关于 FEX 的提交](http://www.mathworks.com/matlabcentral/fileexchange/19084-region-growing)，它使用了与增长矩阵完全相同的技术。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-27T18:31:24.167

我认为你需要重新考虑你的方法。与其维护一个保持其大小变化的列表（非常非 Matlabish 设计），不如为每个像素保留一个掩码？将与最初开始为零`mask`的大小相同。`I`然后，当一个像素插入列表时，它的掩码更改为 1，当它离开列表时，它的值更改为 -1。您可能会使用等找到列表中的最大像素数`max( I( mask == 1 ) )`。
这样，您只更改掩码中的值，而不更改其大小和分配。

你怎么看？

# c# - 为什么创建MVC4应用默认使用nuget？

> ID：15957600
> 
> 赞同：1
> 
> 时间：2013-04-11T19:49:29.927
> 
> 标签：c#, asp.net-mvc-4, nuget

有没有办法从解决方案中删除 nuget，我只是创建了一个全新的 MVC4 项目，我注意到 dll 正在使用 nuget 包。

我在使用 nuget 和 TFS 时遇到问题，尝试设置同事的计算机只是一件令人头疼的事情，我只想尽可能断开与 nuget 的连接。（请参阅我的另一个问题：[当包本地存储在 diff 文件夹中时，nuget 包项目引用会变得混乱吗？](https://stackoverflow.com/questions/15953611/do-nuget-package-project-references-get-messed-up-when-packages-stored-locally-o)）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T05:43:20.430

这是可能的，但并不容易。

NuGet 包基本上只是带有 .dll、配置转换、内容和其他内容的 zip 文件，通常您只需使用包资源管理器下载包，将 dll 解压缩到“lib”文件夹，然后导入引用。

然而，AspNetMvc 包有许多依赖项，这意味着您必须单独下载树中的每个包。这还不错，但它涉及到：

*   Microsoft.AspNet.Mvc
*   Microsoft.Web.Infrastructure
*   Microsoft.AspNet.Razor
*   Microsoft.AspNet.WebPages

从这些包中获得 dll 后，您可以将它们添加到“lib”文件夹中，并照常引用它们。

# c# - 如何仅对某些页面使用 sso

> ID：15957608
> 
> 赞同：0
> 
> 时间：2013-04-11T19:50:12.683
> 
> 标签：c#, asp.net, single-sign-on

我有一个网络应用程序。在我使用 sso 进行身份验证之前。我将下面显示的代码放在 web.config 页面中。

```
<authentication mode="Forms">
      <forms loginUrl="https://sso.***.***.***/login" timeout="30" defaultUrl="~/Index.aspx" cookieless="UseCookies" slidingExpiration="true" path="/" />
    </authentication> 
```

它运作良好。每个人去那个网站都需要先登录。现在我们需要改变一些页面向公众开放。因此人们不需要登录即可访问某些页面，但某些页面仍然需要登录（使用 sso）。怎么做？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T20:01:08.710

使用 web.config 的`<location>`和`<authorization>`部分。如果当前要求用户登录所有页面，我假设您有以下内容：

```
<authorization>
    <deny users="?">
</authorization> 
```

您可以添加`<location>`元素（这些元素超出该`<system.web>`部分）：

```
 <location path="publicpage.aspx">
    <system.web>
      <authorization>
        <allow users="*" />
      </authorization>
    </system.web>
  </location> 
```

您可以根据需要添加任意数量的`<location>`元素，还可以在 path 属性中定位目录。

If you want to keep things a little cleaner for directories, you can add a web.config to a directory and add `<authorization>` and `<location>` elements to that web.config

# objective-c - NSArray 绑定中的偶尔 SIGSEGV

> ID：15957609
> 
> 赞同：0
> 
> 时间：2013-04-11T19:50:16.510
> 
> 标签：objective-c, xamarin.ios, monodevelop, xamarin

我有以下要绑定的属性：

```
@property (nonatomic, readwrite, retain) NSArray* activeTasks; 
```

我与以下代码绑定：

```
[Export("activeTasks", ArgumentSemantic.Retain)]
NSDictionary[] ActiveTasks { get; } 
```

我经常使用这个属性。尽管如此，每千次访问，我就会在 get_activeTasks （选择器的绑定）上获得一个 SIGSEGV。我想知道我做错了什么，为什么这种情况很少发生而不是系统地发生。

```
 at (wrapper managed-to-native) MonoTouch.ObjCRuntime.Messaging.void_objc_msgSend (intptr,intptr) <IL 0x00024, 0xffffffff>
  at MonoTouch.Foundation.NSObject.InitializeObject (bool) [0x00062] in /Developer/MonoTouch/Source/monotouch/src/Foundation/NSObject.cs:136
  at MonoTouch.Foundation.NSObject..ctor (intptr,bool) [0x0000d] in /Developer/MonoTouch/Source/monotouch/src/Foundation/NSObject.cs:62
  at MonoTouch.Foundation.NSObject..ctor (intptr) <IL 0x00003, 0x0002b>
  at MonoTouch.Foundation.NSDictionary..ctor (intptr) <IL 0x00002, 0x00027>
  at MonoTouch.Foundation.NSMutableDictionary..ctor (intptr) <IL 0x00002, 0x00027>
  at (wrapper runtime-invoke) <Module>.runtime_invoke_void__this___intptr (object,intptr,intptr,intptr) <IL 0x00054, 0xffffffff>
  at (wrapper managed-to-native) System.Reflection.MonoCMethod.InternalInvoke (System.Reflection.MonoCMethod,object,object[],System.Exception&) <IL 0x00030, 0xffffffff>
  at System.Reflection.MonoCMethod.Invoke (object,System.Reflection.BindingFlags,System.Reflection.Binder,object[],System.Globalization.CultureInfo) [0x00109] in /Developer/MonoTouch/Source/mono/mcs/class/corlib/System.Reflection/MonoMethod.cs:536
  at System.Reflection.MonoCMethod.Invoke (System.Reflection.BindingFlags,System.Reflection.Binder,object[],System.Globalization.CultureInfo) [0x00000] in /Developer/MonoTouch/Source/mono/mcs/class/corlib/System.Reflection/MonoMethod.cs:551
  at System.Activator.CreateInstance (System.Type,System.Reflection.BindingFlags,System.Reflection.Binder,object[],System.Globalization.CultureInfo,object[]) [0x00174] in /Developer/MonoTouch/Source/mono/mcs/class/corlib/System/Activator.cs:299
  at System.Activator.CreateInstance (System.Type,object[],object[]) [0x00000] in /Developer/MonoTouch/Source/mono/mcs/class/corlib/System/Activator.cs:234
  at System.Activator.CreateInstance (System.Type,object[]) [0x00000] in /Developer/MonoTouch/Source/mono/mcs/class/corlib/System/Activator.cs:229
  at MonoTouch.ObjCRuntime.Runtime.ConstructNSObject (intptr,intptr) [0x0000d] in /Developer/MonoTouch/Source/monotouch/src/ObjCRuntime/Runtime.cs:210
  at MonoTouch.ObjCRuntime.Runtime.GetNSObject (intptr) [0x0001f] in /Developer/MonoTouch/Source/monotouch/src/ObjCRuntime/Runtime.cs:259
  at MonoTouch.Foundation.NSArray.ArrayFromHandle<T> (intptr) [0x0003a] in /Developer/MonoTouch/Source/monotouch/src/shared/Foundation/NSArray.cs:172
  at TouchDBBinding.CouchServer.get_ActiveTasks () <IL 0x0001b, 0x00073> 
```

编辑：

这是使用新框架的更新堆栈跟踪，我不知道它是否可以提供更多帮助：

堆栈跟踪：

```
 at (wrapper managed-to-native) MonoTouch.Foundation.NSObject.monotouch_create_managed_ref (intptr,intptr,bool) <IL 0x0002d, 0xffffffff>
  at MonoTouch.Foundation.NSObject.CreateManagedRef (bool) [0x00000] in /Developer/MonoTouch/Source/monotouch/src/Foundation/NSObject.cs:93
  at MonoTouch.Foundation.NSObject.InitializeObject (bool) [0x000cc] in /Developer/MonoTouch/Source/monotouch/src/Foundation/NSObject.cs:88
  at MonoTouch.Foundation.NSObject..ctor (intptr,bool) [0x0000d] in /Developer/MonoTouch/Source/monotouch/src/shared/Foundation/NSObject2.cs:85
  at MonoTouch.Foundation.NSObject..ctor (intptr) <IL 0x00003, 0x0002b>
  at MonoTouch.Foundation.NSDictionary..ctor (intptr) <IL 0x00002, 0x00027>
  at MonoTouch.Foundation.NSMutableDictionary..ctor (intptr) <IL 0x00002, 0x00027>
  at (wrapper runtime-invoke) <Module>.runtime_invoke_void__this___intptr (object,intptr,intptr,intptr) <IL 0x00054, 0xffffffff>
  at (wrapper managed-to-native) System.Reflection.MonoCMethod.InternalInvoke (System.Reflection.MonoCMethod,object,object[],System.Exception&) <IL 0x00030, 0xffffffff>
  at System.Reflection.MonoCMethod.Invoke (object,System.Reflection.BindingFlags,System.Reflection.Binder,object[],System.Globalization.CultureInfo) [0x00109] in /Developer/MonoTouch/Source/mono/mcs/class/corlib/System.Reflection/MonoMethod.cs:530
  at System.Reflection.MonoCMethod.Invoke (System.Reflection.BindingFlags,System.Reflection.Binder,object[],System.Globalization.CultureInfo) [0x00000] in /Developer/MonoTouch/Source/mono/mcs/class/corlib/System.Reflection/MonoMethod.cs:545
  at System.Reflection.ConstructorInfo.Invoke (object[]) [0x0000e] in /Developer/MonoTouch/Source/mono/mcs/class/corlib/System.Reflection/ConstructorInfo.cs:62
  at MonoTouch.ObjCRuntime.Runtime.ConstructNSObject (intptr,intptr) [0x00051] in /Developer/MonoTouch/Source/monotouch/src/ObjCRuntime/Runtime.cs:269
  at MonoTouch.ObjCRuntime.Runtime.GetNSObject (intptr) [0x0001f] in /Developer/MonoTouch/Source/monotouch/src/ObjCRuntime/Runtime.cs:328
  at MonoTouch.Foundation.NSArray.ArrayFromHandle<T> (intptr) [0x00044] in /Developer/MonoTouch/Source/monotouch/src/shared/Foundation/NSArray.cs:188
  at TouchDBBinding.CouchServer.get_ActiveTasks () <IL 0x0001b, 0x00073> 
```

当具有保留的 NSArray* 绑定到 NSDictionary[] 并且该属性为空时，MonoTouch 的内部工作是否可能存在问题？还是有可能是因为它的内容为空？

谢谢，保罗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T21:14:39.493

堆栈跟踪表明当 MonoTouch 尝试保留 NSArray 的元素之一时发生崩溃。

一个可能的原因是特定元素已被释放（或以其他方式损坏）。特别是这不是因为元素为空（这种情况的处理方式不同）。

# image - 在css中图像大小默认为100％？

> ID：15957610
> 
> 赞同：0
> 
> 时间：2013-04-11T19:50:16.617
> 
> 标签：image, wordpress, css

每次您在 cms 中上传照片时，无论您是否重新调整大小，图像都会保持其完整上传大小，任何人都曾处理过。

就像我无法摆脱的地方有一个隐藏的 min-width:100% 。我必须为我放在网站上的每张照片手动设置最大宽度。我必须摆脱这个。

帮助！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T23:13:58.870

如果您使用 Wordpress 的页面/帖子条目发布，请单击所述条目中的图像，然后单击图像左上角出现的编辑图像图标。这将调出由 Wordpress 设置的图像属性，并允许您调整大小等。

# javascript - 根据浏览器宽度或设备移动广告位置

> ID：15957611
> 
> 赞同：0
> 
> 时间：2013-04-11T19:50:19.837
> 
> 标签：javascript, adsense

有没有办法根据浏览器宽度或设备在页面上的不同位置动态生成 AdSense 广告？

Google Developers 资源提供了一篇关于“动态提供的 JavaScript”的文章，它允许您根据用户代理提供不同的广告。但它没有详细说明这些广告是否可以投放到代码的不同部分。

本质上，我想要做的是在页面的特定部分以“桌面”大小加载三个广告，当网站折叠到移动大小时，不同的广告会显示在不同的位置——所有这些都没有做任何谷歌不允许的废话，比如隐藏/节目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T20:08:52.613

我假设您有这些广告所在的容器。您控制这些容器的位置。您可以使用 CSS 媒体查询为不同的屏幕尺寸指定不同的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-06T19:57:34.067

我确实找到了一半的解决方案，但是我将在下面解释一些严重的问题。如果有人有更好的解决方案，那就太好了。

此解决方案使用 jQuery 来“复制”adSence 广告的 iframe 并将其“粘贴”到基于浏览器大小的占位符 div 中。

```
<script>
if(window.innerWidth < 700){

$("#adSource").find("iframe").appendTo("#ad");

$("#adSource").remove();
}
</script> 
```

当浏览器以小于 700 的宽度加载时，这会将 iframe 放入名为 #adSource 的 div 中，并将其附加到 ID 为 #ad 的 div 中。然后它会从#adSource 中删除 iframe。

这样做的缺点如下：

*   只工作大约 3/4 的时间。iframe 有时加载速度不够快，jQuery 失败

*   增加大约一秒钟的加载时间。由于页面上已经有广告会减慢速度，这可能会很严重

*   没有关于谷歌是否允许这种技术的文档。

我也在寻找解决方案，所以如果您找到更好的解决方案，请告诉我。

# pthreads - 错误：不允许操作

> ID：15957612
> 
> 赞同：1
> 
> 时间：2013-04-11T19:50:28.587
> 
> 标签：pthreads

我尝试用 C 语言测试以下页面的第一个示例，以了解互斥锁在 pthread 创建中的工作原理。但不幸的是，我遇到了“不允许操作”的问题。有人能告诉我这些代码有什么问题吗？我什至测试了其他示例，但我有同样的错误。

[这](https://writer.zoho.com/public/rreginelli/Chapter-8---Mutexes-and-Concurrency-R21/noband)是页面链接

```
my output:     t1: waiting on mutex
               t1: waiting on mutex
               Error creating thread 1: Operation not permitted 
```

我在 Ubuntu/linaro 4.6.3 上的 Eclipse 中运行此示例，谢谢您提前

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T18:40:26.567

你为什么要设置线程的优先级？只需禁用以下这些行

```
//schedp.sched_priority = priority; 
```

和

```
// if ret = 0
// ret = pthread_setschedparam(*thread, SCHED_FIFO, &schedp); 
```

禁用上述行后，它也可以在 linux 机器上正常工作。我已经测试过了。

我不认为你需要设置这些线程的优先级。

# agile - 使用敏捷软件方法时，如何使用多个平台分解用户故事

> ID：15957614
> 
> 赞同：0
> 
> 时间：2013-04-11T19:50:34.323
> 
> 标签：agile, user-stories, agile-processes

我正在做一个项目，我们真的很想尝试使用敏捷软件方法，并且正在编写我们的用户故事。这对我们来说是新的，尽管我们在编写成功的软件方面有很多经验。我的问题与当产品需要在多个平台上运行时如何编写故事有关......

让我们为了争论说我们的用户故事是......

*   用户需要能够登录
*   用户可以重置他们的密码

现在这需要在多个浏览器上工作，很可能是 PC 和 Mac 上的多个版本的浏览器。

过去对不同团队运作良好的方法是，您是否在您希望支持的所有平台上测试故事，或者您是否成功编写了额外的用户故事，例如“必须也适用于 Safari 版本 x.xx”。我不喜欢后者的想法，它没有很好的范围。

另一种选择可能是像这样为每个平台重复编写故事......

*   用户需要能够登录 Safari 版本 x.xx
*   用户需要能够登录 Chrome 版本 x.xx 等

无论如何，真的只是在寻找一些洞察力，并有兴趣了解社区中其他一些团队的成功和失败。

感谢分享...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-03T07:51:28.720

正如 Dave Hillier 所说，DoD 也是一个很好的方法。此外，如果每个浏览器兼容性具有不同的优先级，则将每个故事分开以便可以优先考虑也是一个好方法。

如果需要以相同的优先级完成，并且使浏览器兼容并不难，我会这样做：

```
As a customer, I want to be able to login to the system, so that I can use the system

Exit criteria:
- xxxx
- yyyy
- be able to login on Safari, IE, Chrome, Firefox 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-13T10:38:22.360

您可以创建[完成的定义](http://www.scrum.org/Resources/Scrum-Glossary/Definition-of-Done)(DoD)。

> DoD 通常是一个清晰简洁的需求列表，软件增量必须遵守这些需求，团队才能称其为完整。

在您的国防部中，您应该包括每个故事的强制性内容。

例如，当您实现一个故事时，您可能希望它在最广泛采用的浏览器上工作。包括您希望在 DoD 中支持的每个浏览器的功能的实现和测试。

您可能决定要添加对旧浏览器的支持，但这是一个低得多的优先级，可以稍后完成。您可以将该工作单独包含为单独的产品待办事项项目（例如故事或错误）。然后可以酌情确定它们的优先级。

这些项目可以使用故事模板编写，例如[“作为用户，我想要”](http://www.mountaingoatsoftware.com/blog/advantages-of-the-as-a-user-i-want-user-story-template)。例如：

> 作为客户，我希望能够使用 IE8 登录
> 
> 作为客户，我想从 IE8 重置密码

最后，这是您的团队决定在您的情况下最有效的方法。这取决于您的客户想要什么！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-12T18:02:08.863

我不会为每个平台创建故事，因为美国是“潜在可交付”的单位，应该为最终用户带来价值。

请注意，没有关于用户应该如何访问功能的任何内容，所以问自己一个简单的问题——如果它在平台 A 上有效但在平台 B 上无效，您会将此功能提供给最终用户吗？

IMO 为开发和测试而不是美国创建特定于平台的任务是有意义的，如果任务没有完成，你不能说美国已经“完成”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-07T01:09:27.703

” 写一个额外的用户故事，比如“必须在 Safari 版本 x.xx 上也能工作”。我不喜欢后者的想法，它没有很好的范围。”

你嫌弃的其实是更好更正确的方法！“它也应该适用于其他浏览器......”应该是故事卡背面的 UAC 和功能。

通过这种方式，您可以为客户和您的主要故事添加 BV。

支持 UAC 方式作为正确方式的另一个原因是“在不推荐的做法的帮助下消除”——用户故事不应该是一个洗衣清单。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-15T11:39:22.573

我会选择 4 个故事，例如：

```
Users can Login with Safari
Users can login with IE
Users can login with Chrome
users can login with Firefox 
```

然后，您可以创建验收标准来测试每个主要平台的不同相关版本。

如果可以的话，我希望故事尽可能保持高水平。“用户需要能够登录”是灵活的（只要不是太大）。按浏览器拆分用户故事感觉很像混合非功能性标准和用户故事。

# c# - 在 C# 中切换 MenuItem

> ID：15957615
> 
> 赞同：1
> 
> 时间：2013-04-11T19:50:35.017
> 
> 标签：c#, wpf, xaml

我有一个 DataGrid 的 ContextMenu ，它显示具有属性的项目`Deleted`。ContextMenu 中的项目之一需要删除，但您也可以取消删除项目（项目保留在列表中，但如果要被删除，则具有红色背景）。

目前我有这个：

```
 <Style x:Key="DeleteMenuItemStyle" TargetType="{x:Type MenuItem}">
        <Style.Triggers>
            <DataTrigger Binding="{Binding Deleted}" Value="true">
                <Setter Property="Header" Value="Undelete"/>
            </DataTrigger>
            <DataTrigger Binding="{Binding Deleted}" Value="false">
                <Setter Property="Header" Value="Delete"/>
            </DataTrigger>
        </Style.Triggers>
    </Style> 
```

但是我不确定如何切换项目上的 Deleted 属性，目前我只能删除项目，并且该项目的 Click 事件处理程序是：

```
 private void mnuDelete_Click(object sender, RoutedEventArgs e)
    {
        DatabaseIndex index = (DatabaseIndex)((MenuItem)sender).DataContext;
        index.Deleted = true;
    } 
```

因此，无论菜单项是删除还是取消删除，已删除属性都设置为 true atm。我可以检查发件人的文本是什么，然后根据它设置真或假，但这对我来说似乎完全错误，好像我更改文本“删除”和“取消删除”我必须更改代码。

我可以在样式中使用 EventSetter 并具有两个不同的事件处理程序，但它们彼此相同，除了 true 和 false。

这样做的最佳方法是什么？有没有办法喜欢“将 Click 事件绑定到 Deleted 属性”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T22:34:45.190

为什么不检查`Deleted`房产本身？

```
private void mnuDelete_Click(object sender, RoutedEventArgs e)
{
    DatabaseIndex index = (DatabaseIndex)((MenuItem)sender).DataContext;
    if (index.Deleted)
    {
        index.Deleted = false;
        // code to undelete
    }
    else
    {
        index.Deleted = true;
        // code to delete
    }
} 
```

或者，如果您只想切换`Deleted`属性：

```
index.Deleted = !index.Deleted; 
```

# php - PHP：如何将变量动态分配到数组中

> ID：15957617
> 
> 赞同：3
> 
> 时间：2013-04-11T19:50:39.620
> 
> 标签：php, arrays, variables, indexing

这正在杀死我，对于我的生活，我似乎无法弄清楚如何让它工作，或者为什么它首先不起作用。

这是我正在尝试做的事情：

这是我的变量声明：

```
$locale = 'US';
$realm = 'magtheridon';
$character = 'billymayys'; 
```

这是我的数组声明：

```
$my_array = ( 'L' => $locale, 'R' => $realm, 'C' => $character ); 
```

我是 php 新手，据我所知，这应该创建一个可以打印到的数组：

```
Array( 
      [L] => US, 
      [R] => magtheridon, 
      [C] => billymayys, 
      ); 
```

但事实并非如此。

创建数组的正确方法是什么，我可以命名谁的索引，然后将变量分配给这些索引的值？

数组声明：

```
$my_array = ( 'L' => 'US', 'R' => 'magtheridon', 'C' => 'billymayys' ); 
```

有效，但我不明白为什么我不能使用变量动态分配值。

请帮忙！谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T19:53:04.963

您只是有一个小的语法错误，缺少`array`关键字。

改变：

```
$my_array = ( 'L' => $locale, 'R' => $realm, 'C' => $character ); 
```

至：

```
$my_array = array( 'L' => $locale, 'R' => $realm, 'C' => $character ); 
```

或者：

```
$my_array = [ 'L' => $locale, 'R' => $realm, 'C' => $character ]; // PHP 5.4+ 
```

工作示例：http: [//3v4l.org/d2UWM](http://3v4l.org/d2UWM)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T19:54:34.820

您需要使用`array`关键字：

```
$my_array = array( 'L' => $locale, 'R' => $realm, 'C' => $character ); 
```

不知道为什么第二个会起作用！

# java - 覆盖方法中的泛型

> ID：15957618
> 
> 赞同：14
> 
> 时间：2013-04-11T19:50:45.917
> 
> 标签：java, generics, overloading

遇到一个有趣的问题；以下类编译：

```
public class Test {

    public static void main(String[] args) throws Exception {
        A a = new A();
        B b = new B();

        foo(a);
        foo(b);
    }   

    private static void foo(A a) {
        System.out.println("In A");
    }   

    private static void foo(B b) {
        System.out.println("In B");
    }   

    private static class A {}

    private static class B extends A {}

} 
```

但是这个失败了：

```
public class Test {

    public static void main(String[] args) throws Exception {
        A<String> a = new A<>();
        B b = new B();

        foo(a);
        foo(b);
    }   

    private static void foo(A<String> a) {
        System.out.println("In A");
    }   

    private static void foo(B b) {
        System.out.println("In B");
    }   

    private static class A<T> {}

    private static class B extends A {}

} 
```

出现此错误：

```
Test.java:8: error: reference to foo is ambiguous, both method foo(A<String>) in Test and method foo(B) in Test match              
        foo(b);                                                                                                                    
        ^                                                                                                                          
Note: Test.java uses unchecked or unsafe operations.                                                                               
Note: Recompile with -Xlint:unchecked for details.                                                                                 
1 error 
```

我原以为由于类型擦除，这些基本上是相同的。有人知道这里发生了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T20:01:30.023

原因是您混合了泛型和原始类型（ B 应该声明为`class B<T> extends A<T>`or `class B extends A<SomeType>`）。

发生这种情况的实际原因被埋在[JLS 的某个地方，第 #15.12.2.7 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.12.2.7)及以下 - 祝你好运，简洁地表达它;-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T21:29:06.203

在泛型出现之前，Java 有类似的方法

```
public class Collections

    public void sort(List list) {...}               [1] 
```

用户代码可能有类似的东西

```
public class MyList implements List ...             [2]

MyList myList = ...;
Collections.sort(myList);                           [3] 
```

当泛型添加到 Java 中时，决定将*现有的*类和方法转换为泛型，而不会破坏使用它们的任何代码。就难度而言，这是一项了不起的成就，但代价是让语言变得复杂和有缺陷。

所以`[1]`被泛化，但`[3]`仍必须按原样编译，而不必泛化`[2]`.

黑客在[§15.12.2.3](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.12.2.3)

> 可以通过方法调用转换（第 5.3 节）将 Ai 转换为 Si

基本上说如果参数类型（Ai）是原始的，那么为了匹配的目的也删除参数类型（Si）。

回到你的例子，我们看到为什么`foo(A<String>)`被认为适用于`foo(b)`.

但是还有另一个问题 - 是否`foo(A<String>)`适用于 [§15.12.2.2]？从规范的字母来看，答案似乎是“不”。但这可能是规范的错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T20:01:09.113

```
private static class B extends A {} 
```

您在`A`这里省略了类型参数。你可能的意思是

```
private static class B<T> extends A<T> {} 
```

此外，`B b = new B()`也没有`<String>`论据；你必须做

```
B<String> b = new B<String>(); 
```

……最后，

```
private static void foo(B b) {
    System.out.println("In B");
} 
```

应该是这样的

```
private static void foo(B<String> b) {
    System.out.println("In B");
} 
```

一般来说，如果有一个类型`Foo`有一个泛型参数，`Foo`那么基本上应该*总是*有一个类型参数。在这种特殊情况下，`class B extends A`没有类型参数 for `A`，然后`B`需要一个类型参数，因此您在提到的任何地方都需要一个类型参数`B`。（该规则的一个主要例外是`instanceof`表达式，但这里没有。）

# jquery - 什么时候应该使用 jQuery Mobile？什么是正确的“用例”？

> ID：15957630
> 
> 赞同：7
> 
> 时间：2013-04-11T19:51:35.450
> 
> 标签：jquery, jquery-mobile

根据 SO 的常见问题解答，解决*“程序员常用的软件工具”*的问题是合适的，所以这里是。

我喜欢 jQuery Mobile 的 UI，但我只是真正进入响应式设计，我的网站根据屏幕大小（媒体查询等）做出响应。***那么 jQuery Mobile 在哪里适合呢？***

比如说...

1.  我已经为我的所有屏幕尺寸设计了网站的“外观和感觉”。
2.  我的设计目前不使用任何 jQuery Mobile UI 元素（任何大小）。
3.  那么...我的网站如何通过使用 jQuery Mobile 受益？
4.  难道我不需要重做整个网站才能使用 jQuery Mobile 吗？
5.  还是 jQuery Mobile 只是*（或主要）*用于移动***应用程序***？

令人惊讶的是，我看到这么多教程直接跳到***如何***使用它，但直接跳过了***为什么***和***何时***使用它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-11T20:07:04.220

是的，jQuery Mobile 仅适用于移动应用程序，这意味着它将用于您现有桌面站点的不同网页中。

可以使用您提到的“响应式设计”创建移动站点，但 jQuery Mobile 不止于此，它旨在用于完全专用的移动站点。

我会这样看：

- 如果您希望网页在桌面浏览器上看起来不错，但在移动设备上也可以查看，请使用响应式设计技术，例如 CSS 媒体查询

- 如果您想要将移动设备转发到的单独的移动页面（例如 www.mysite.com/mobile），jQuery Mobile 适合您

另外值得注意的是，JQM 通过减少服务器发出的 http 请求的数量（在您使用 3G 连接等时很重要）针对移动浏览器进行了优化，而您的普通网站可能不会这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T19:57:14.143

jQuery Mobile 是一个框架，它不是您只需插入现有应用程序的东西。如果您已经拥有一个功能齐全的网站，那么 jQuery Mobile 不会有太大帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T19:53:48.857

我认为 jQuery Mobile 主要用于移动应用程序。它为您提供了基本上已经创建的 UI，您可以轻松地根据您的需要进行调整以创建一个看起来很酷的应用程序。

# c - 交换/交换指针时未定义的行为

> ID：15957635
> 
> 赞同：0
> 
> 时间：2013-04-11T19:51:45.247
> 
> 标签：c, pointers

我创建了动态数组。如果用某些值填充。打印它。但是在交换/交换指针之后（任务是在某些条件下交换行）

条件取决于`sumL`。为了不浪费你的时间，我没有描述细节。

**问题在于交换指针。**

```
for ( k = 0; k < N - 1; k++ )
{
    for ( i = 0; i < N - 1; i++
       if (sumL[i] > sumL[i+1])
       {
           temp = sumL[i];            // works
           sumL[i] = sumL[i+1];
           sumL[i+1] = temp;

           temp = *a[i];              // doesn't work. Array is not the same: elements 
           a[i] = a[i+1];             // contain other values.
           *a[i+1] = temp;            /* What is wrong? */
      }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T19:55:39.040

如果你想交换指针，那么它可能应该读

```
temp = a[i]; a[i] = a[i+1]; a[i+1] = temp; 
```

如果你想交换值，那么它可能应该读

```
temp = *a[i]; *a[i] = *a[i+1]; *a[i+1] = temp; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T19:54:44.020

你可以试试

```
*a[i] = *a[i+1]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T19:57:36.250

```
temp = *a[i];              //temp == value pointed by a[i], NOT pointer
a[i] = a[i+1];             // here you actually copy the pointer 
*a[i+1] = temp;            // here you again write value, NOT pointer 
```

你应该做：

```
type* temp_ptr = a[i];     
a[i] = a[i+1];
a[i+i] = temp_ptr; 
```

# isapi-rewrite - ISAPI 重写 - URL 中的空格没有被转义

> ID：15957636
> 
> 赞同：0
> 
> 时间：2013-04-11T19:51:47.833
> 
> 标签：isapi-rewrite

我在 ISAPI Rewrite 中有一条规则，其中包含目标空间，但不知道如何转义它：

RewriteRule ^/directory/(.*) [http://servername.com/newdirectory/PieceA](http://servername.com/newdirectory/PieceA) PieceB PieceC/ [NC,R,L]

当规则如上编写时，我只是得到一个在规则上找不到的文件。

关于如何包含空间的任何想法？我已经尝试了 %20，但它最终被破坏了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T20:09:03.110

我能够通过逃离空间来解决这个问题。

RewriteRule ^/directory/(.*) [http://servername.com/newdirectory/PieceA](http://servername.com/newdirectory/PieceA) \ PieceB\ PieceC/ [NC,R,L]

# php - 如何保存用户在登录过程中输入的用户ID，并使用它来获取有关使用此ID的用户的相关数据

> ID：15957641
> 
> 赞同：0
> 
> 时间：2013-04-11T19:51:57.877
> 
> 标签：php

我对php了解不多。所以请尽量简单易行。我正在制作一个员工管理系统。我做了两张桌子。

“登录”表有 id 和密码。

“员工数据”表有 id、name、age、sex、salary。

当用户登录时，他有三个选项。查看配置文件编辑配置文件注销。

我试图做的是存储他/她在登录期间输入的用户ID。并使用该 ID 从“员工数据”表中获取他的个人资料信息。我怎么能这样做？？？

感谢大家的帮助。我得到了答案。它可以通过会话完成。我应该先搜索一下。无论如何，我要感谢所有 4 位他们的关注和有用的建议。我从你的回答中得到了很多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-03-07T15:12:01.050

我不确定这是否会帮助你，但我做同样的事情与你的问题有关。我在 profile.php 中的方法应该有

```
$id=$_SESSION['employee_id']; 
```

然后在登录

```
$_SESSION['employee_id'] = $db_employee_id; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T21:26:17.757

在验证用户并将 id 存储在会话变量中之后，您将向用户显示 3 个选项。

选项 1\. --view profile-- （如果用户选择此选项）

Step1.1：连接数据库，根据ID查询用户并将检索到的信息存储在一个变量中，并根据需要显示该变量。

```
$conn=odbc_connect($dsn,$user, $password);
$sql="SELECT * FROM tablename where id = $id";
$rs=odbc_exec($conn,$sql);  // executes sql
$empDtls=odbc_fetch_row($rs); // returns the row result from db
print_r($empDtls); //prints the array 
```

问题的第二部分与第一部分非常相似，希望你能弄清楚

对于第三部分，请使用以下内容注销

```
session_destroy(); header("Location: index.php"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T20:00:10.660

根据我从您的问题中收集到的信息，这听起来像是想要阻止`id`成功登录并使用该数据从`employee`表中访问该人的数据。

在这种情况下，我建议您使用 php 会话[http://www.php.net/manual/en/book.session.php](http://www.php.net/manual/en/book.session.php)。

验证成功登录后，您可以在登录脚本中执行类似的操作。

```
// Start the session
session_start();
// Store ID
$_SESSION['id'] = $_POST['id']; 
```

然后在您希望获取会话数据的任何其他页面中，您需要重新启动会话，然后您可以引用数据。所以在你的员工数据脚本中。

```
// Start the session
session_start();
// Logged in id
$id = $_SESSION['id']; 
```

希望这有帮助，如果没有，请更具体地说明您真正想要/需要做的事情！

# windows - C# Socket 服务器表单不显示？

> ID：15957642
> 
> 赞同：0
> 
> 时间：2013-04-11T19:51:59.350
> 
> 标签：windows, winforms, sockets

我正在使用 C# 为我正在开发的游戏创建一个套接字服务器。我可以连接到服务器，它似乎可以完美地接受连接。我遇到的唯一问题是我创建的表单没有显示出来。我正在使用该表单，因为我将对其进行管理控制，但它没有出现。到目前为止，我已经包含了我的代码。

```
using System;
using System.Collections;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Net;
using System.Net.Sockets;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;

namespace MainServer
{
    public partial class Form1 : Form
    {
        public static string data = null;

        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            byte[] bytes = new Byte[1024];

            // Establish the local endpoint for the socket.
            // Dns.GetHostName returns the name of the 
            // host running the application.
            IPHostEntry ipHostInfo = Dns.Resolve(Dns.GetHostName());
            IPEndPoint localEndPoint = new IPEndPoint(IPAddress.Parse("192.168.1.104"), 6510);

            Socket listener = new Socket(AddressFamily.InterNetwork,
            SocketType.Stream, ProtocolType.Tcp);

            try
            {
                listener.Bind(localEndPoint);
                listener.Listen(10);

                // Start listening for connections.
                while (true)
                {
                    serverLog.AppendText("Waiting for connection..");
                    // Program is suspended while waiting for an incoming connection.
                    Socket handler = listener.Accept();
                    data = null;
                }

            }
            catch (Exception a)
            {
                serverLog.AppendText(a.ToString());
            }
        }
    }
} 
```

# scala - Scala 2.10 中的 Json 序列化

> ID：15957649
> 
> 赞同：1
> 
> 时间：2013-04-11T19:52:21.080
> 
> 标签：scala, playframework-2.0, jackson, scala-2.10, jerkson

在 Play 2.1 和 Scala 2.10 之前，我使用了 Jerkson。

不幸的是，还没有正式发布的与 Scala 2.10 兼容的 Jerkson 版本。

我自从将 Jackson 与 Scala 模块一起使用以来，但我没有 Enumerations 所需的行为。

我正在尝试使用 Play 2.1 Reads、Writes 和 Format，使用宏 inception 但它似乎真的很痛苦，我需要在我的模型中添加样板文件，以便 inception 工作：

```
object User extends ((String, String, Option[String], Option[String], Long, Long, Boolean, Boolean, ObjectId) => User) {
 ...
} 
```

然后我可以使用 `implicit val userFormat: Format[User] = Json.format[User]`

而且我仍然不能动态序列化一个`Object`，而只是一个`User`

我没有看过 Lift，但它似乎添加了与 Play2.1 Json 库一样多的样板代码。

* * *

我认为序列化在任何语言中都应该很容易。我不想编写自定义序列化程序或自定义解析器。

**我希望该库可以使用这样的代码：**

```
case class User(name: String, status: Status.Value)
val myUser = User("toto",Status.VALID)
val myMap: Map[String,Object] = ("key1" -> myUser, "key2" -> "value2")
Json.serialize(myMap) 
```

这就是 Java 中 Gson、Jackson 和其他类似工具提供的功能。

* * *

所以对于 Scala 2.10，我不知道该使用哪个工具。而且我不明白为什么我们需要为这种简单的情况构建自定义序列化程序。也许 Play2.1 Json 更快，因为它是基于宏的，但是如果没有提供的格式，它是否有可能使用反射或其他东西？

您知道任何适合我用例的冷却工具吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T22:33:40.340

Jerkson 有许多分支移植到 2.10，但我不知道有多少分支发布到 Maven 存储库。

[这是我的](https://github.com/acruise/jerkson)，主要来自[Rand Hindi 的](https://github.com/randhindi/jerkson)加上我自己的一些补丁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-25T21:32:33.917

[我用Jackson Scala Module](https://github.com/FasterXML/jackson-module-scala)替换了我的 Jerkson 代码，它工作正常

# android - 尝试 ACTION_HEADSET_PLUG 的 Intent 时的 FC

> ID：15957651
> 
> 赞同：0
> 
> 时间：2013-04-11T19:52:27.677
> 
> 标签：android, android-intent, intentfilter

我正在尝试下一个代码。

```
IntentFilter filter = new IntentFilter(Intent.ACTION_HEADSET_PLUG);
Intent headsetState = MainActivity.this.registerReceiver(null, filter);
int state = headsetState.getIntExtra("state", -1);
String name = headsetState.getStringExtra("name"); 
```

我的问题是当我在手机刚启动时尝试该方法时，耳机状态的Intent值为NULL，并且应用程序关闭。但是，如果我在手机上插入/拔出耳机，该应用程序似乎可以工作，耳机状态有一个值。

我的问题是为什么这个“意图”一开始是空的，应该有一个值，不是吗？

感谢您的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T20:01:20.160

从[文档](http://developer.android.com/reference/android/content/Context.html#registerReceiver%28android.content.BroadcastReceiver,%20android.content.IntentFilter%29)中，`registerReceiver`返回

“找到与过滤器匹配的第一个粘性意图，如果没有，则返回 null。”

由于没有找到粘性意图，因此它返回 null。你没有正确使用它。返回值旨在帮助您捕获在您注册接收器*之前*到达的任何粘性广播，并且注册的接收器（您没有提供）将处理`onReceive()`.

# tomcat - 如何安装Tomcat6管理器应用程序

> ID：15957654
> 
> 赞同：7
> 
> 时间：2013-04-11T19:52:30.470
> 
> 标签：tomcat, amazon-ec2, tomcat6

我

*   在 EC2 微实例上安装 Tomcat6，
*   然后添加到`tomcat-users.xml`以下行：`<user name="tomcat-admin" password="mypassword" roles="manager,admin" />`和
*   最后尝试访问管理器应用程序`http://myhost:8080/manager`。

这不起作用 - 我收到了`404`错误消息。`http://myhost:8080/manager/html`也不行。

然后我查看了目录`var/lib/tomcat6/webapps`，发现那里没有`manager`目录（见下文）。

![在此处输入图像描述](https://i.stack.imgur.com/xtApf.png)

在 EC2 linux 中安装 Tomcat6 管理器应用程序的正确方法是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-12T06:08:56.047

我通过使用以下命令行语句根据[本教程删除 Tomcat 6 并安装 Tomcat 7 来解决此问题：](http://in4ray.blogspot.ru/2012/04/install-tomcat-7-on-amazon-linux.html)

`sudo yum install tomcat7-webapps tomcat7-docs-webapp tomcat7-admin-webapps`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T23:18:18.920

只需下载 Tomcat（zip 版本）并将管理器目录上传到您的服务器 webapp 目录。它只包含jsp，所以不需要安装。顺便说一句：如果您正在寻找一个非常棒的 tomcat 管理器工具，您可以查看[PsiProbe](http://code.google.com/p/psi-probe/)。

# jquery - 调整 SlidesJS 幻灯片的大小

> ID：15957661
> 
> 赞同：0
> 
> 时间：2013-04-11T19:52:49.393
> 
> 标签：jquery, slideshow

我有 SlidesJS 工作，但出于某种原因，它认为框架比它们大。因此，如果我将 4 段作为幻灯片放入，则幻灯片仍会占据大部分页面。

我尝试在底部的脚本中输入较小的宽度和高度值，但似乎没有什么不同。

```
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>SlidesJS Standard Code Example</title>
  <meta name="description" content="SlidesJS is a simple slideshow plugin for jQuery. Packed with a useful set of features to help novice and advanced developers alike create elegant and user-friendly slideshows.">
  <meta name="author" content="Nathan Searles">

  <!-- SlidesJS Required (if responsive): Sets the page width to the device width. -->
  <meta name="viewport" content="width=device-width">
  <!-- End SlidesJS Required -->

  <!-- CSS for slidesjs.com example -->
  <link rel="stylesheet" href="css/example.css">
  <link rel="stylesheet" href="css/font-awesome.min.css">

</head>
<body>

  <!-- SlidesJS Required: Start Slides -->
  <!-- The container is used to define the width of the slideshow -->
  <div class="container">
    <div id="slides">
      <p>Hello</p>
      <p>Hello1</p>
      <p>Hello2</p>
      <p>Hello3</p>

      <a href="#" class="slidesjs-previous slidesjs-navigation"><i class="icon-chevron-left icon-large"></i></a>
      <a href="#" class="slidesjs-next slidesjs-navigation"><i class="icon-chevron-right icon-large"></i></a>
    </div>
  </div>
  <!-- End SlidesJS Required: Start Slides -->

  <!-- SlidesJS Required: Link to jQuery -->
  <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
  <!-- End SlidesJS Required -->

  <!-- SlidesJS Required: Link to jquery.slides.js -->
  <script src="js/jquery.slides.min.js"></script>
  <!-- End SlidesJS Required -->

  <!-- SlidesJS Required: Initialize SlidesJS with a jQuery doc ready -->
  <script>
    $(function() {
      $('#slides').slidesjs({
        width: 94,
        height: 52
      });
    });
  </script>
  <!-- End SlidesJS Required -->
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-09T05:26:05.300

更新：我发现是 example.css 中的响应式 CSS 覆盖了我的高度和宽度。

```
 /* For larger displays */
    @media (min-width: 1200px) {
      .container {
        width: 1170px
      } 
```

我改变了这个宽度，它终于听到了。

我有同样的问题。不能说我真的找到了正确的解决方案，但我发现一个谷歌小组正在谈论这个问题。[https://groups.google.com/forum/#!topic/slidesjs/mvbfqq0Fig4](https://groups.google.com/forum/#!topic/slidesjs/mvbfqq0Fig4) 我基本上尝试按照说明在其周围放置一个 div 并为该 div 设置高度和宽度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T20:07:41.037

example.css 中的 CSS 可能会覆盖您在脚本中设置的宽度和高度。尝试在 CSS 中调整宽度和高度。

# php - 使用表单数据更新sql的问题

> ID：15957662
> 
> 赞同：0
> 
> 时间：2013-04-11T19:52:54.283
> 
> 标签：php, mysql, mysqli, sql-update

我正在尝试更新 sql 表中的记录。我按照教程完成了所有应有的操作，但是当我检查记录是否已更新时，我认为这不是这行代码的问题，即整个更新页面。

```
<td>
<input name="first" type="text" id="first" value="<? echo $rows['first']; ?>" size="22">
</td> 
```

根据要求提供更多数据：

```
 $sql="SELECT * FROM $tbl_name WHERE id='$id'";
$result=mysql_query($sql);
$rows=mysql_fetch_array($result);
?>

<table>
<tr>
<form name="form1" method="post" action="update_ac.php">
<tr>
<td>&nbsp;</td>
<td colspan="3"><strong>Update data in mysql</strong> </td>
</tr>
<tr>
<td><strong>First Name</strong></td>
<td><strong>Lastname</strong></td>
<td><strong>Address</strong></td>
<td><strong>Email</strong></td>
<td><strong>Username</strong></td>
<td><strong>Password</strong></td>
</tr>
<tr>

<td>
<input name="first" type="text" id="first" value="<? echo $rows['first']; ?>" size="22">
</td>
<td>
<input name="last" type="text" id="last" value="<? echo $rows['last']; ?>" size="30">
</td>
<td>
<input name="address" type="text" id="address" value="<? echo $rows['address']; ?>" size="40">
</td>
<td>
<input name="email" type="text" id="email" value="<? echo $rows['email']; ?>" size="30">
</td>
<td>
<input name="myusername" type="text" id="myusername" value="<? echo $rows['myusername']; ?>" size="30">
</td>
<td>
<input name="mypassword" type="text" id="mypassword" value="<? echo $rows['mypassword']; ?>" size="20">
</td>
</tr>
<tr>
<td>&nbsp;</td>
<td>
<input name="id" type="hidden" id="id" value="<? echo $rows['id']; ?>">
</td>
<td align="center">
<input type="submit" name="Submit" value="Submit"> 
```

发生的情况是结果在表格中返回，您单击以编辑条目并进入此页面，其中字段预先填充了您应该进行编辑和更新的数据

当我更新该字段时，它似乎没有进行更改

任何帮助表示赞赏，如果我没有正确解释，对不起各位

更新代码

```
mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
mysql_select_db("$db_name")or die("cannot select DB");

// update data in mysql database 
$sql="UPDATE $tbl_name SET last='$last', first='$first', address='$address', email='$email', myusername='$myusername', mypassword='$mypassword' WHERE id='$id'";
$result=mysql_query($sql);

// if successfully updated. 
if($result){
echo "Successful";
echo "<BR>";
echo "<a href='list_records.php'>View result</a>";
}

else {
echo "ERROR";
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T20:36:32.607

您正在查询：

```
$sql="UPDATE $tbl_name SET last='$last', first='$first', address='$address', email='$email', myusername='$myusername', mypassword='$mypassword' WHERE id='$id'"; 
```

在该代码的执行范围内，您传递的变量不存在。我猜你想把它们从 $_POST 数组中拉出来。

我应该顺便提一下，这是一个非常糟糕的主意（[http://en.wikipedia.org/wiki/SQL_injection](http://en.wikipedia.org/wiki/SQL_injection)）。考虑改用 PDO 和准备好的语句。

```
$db = new PDO("mssql:host=$host;dbname=$tbl_name, $user, $pass");
$stmt = $db->prepare("UPDATE $tbl_name SET last=:last, first=:first, address=:address, email=:email, myusername=:myusername, mypassword=:mypassword WHERE id=:id");
$stmt->bindParam(":last", $last);
$stmt->bindParam(":first", $first); 
```

依此类推……直到

```
$stmt->execute(); 
```

在此处阅读有关 PDO 的更多信息：http: [//php.net/manual/en/book.pdo.php](http://php.net/manual/en/book.pdo.php)

或这里的教程：[http ://www.phpro.org/tutorials/Introduction-to-PHP-PDO.html](http://www.phpro.org/tutorials/Introduction-to-PHP-PDO.html)

# c# - 超过大小限制时，大文件上传不会进入自定义错误页面

> ID：15957663
> 
> 赞同：1
> 
> 时间：2013-04-11T19:52:58.690
> 
> 标签：c#, iis, file-upload, web-config, timeout

在我的网络配置中，我指定了允许的最大大小和具有以下设置的自定义错误页面：

```
<system.web>
    <httpRuntime maxRequestLength="102400" executionTimeout="600"/>
.
.
.
</system.web>

<system.webServer>
    <httpErrors errorMode="Custom" existingResponse="Replace">
        <clear/>
        <error statusCode="404" subStatusCode="13" path="/Site/Error" responseMode="Redirect"  />
        </httpErrors>
    <security>
        <requestFiltering>
            <requestLimits maxAllowedContentLength="104857600" />
        </requestFiltering>
    </security>
</system.webServer> 
```

我认为这个问题可能与超时有关。在我的开发环境中，无论文件有多大，我都会被重定向到错误页面。在 QA（不是本地服务器）中，页面上传到大约 80-90%，然后我被发送到这个通用页面：

![在此处输入图像描述](https://i.stack.imgur.com/xHQ3a.jpg)

如果我使用的文件只是稍微超出限制，它会正确地将我发送到错误页面。

我假设正在发生的事情是在开发中，它“上传”非常快，确定它太大然后将我发送到正确的页面。但在 QA 中，由于某些超时设置，它会在该点之前切断连接。但是，我有一个很好的`executionTimeout`价值。我可能缺少一个`<system.webserver>`子设置吗？或者也许我需要在 QA 上进行一些 IIS 设置？

如果这两个问题的答案是否定的，有人知道我还应该研究什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T20:27:24.403

原来在 IIS 中有一个额外的超时设置。[http://www.iis.net/configreference/system.applicationhost/sites/sitedefaults/limits](http://www.iis.net/configreference/system.applicationhost/sites/sitedefaults/limits)

我从这个非常可靠的答案中得到了这个： [如何在 ASP.NET 中为不同的 URL 设置不同的超时](https://stackoverflow.com/questions/6379259/how-to-set-different-timeouts-for-different-urls-in-asp-net)

# iphone - 在 iPhone 奇怪输出上测试后的 Xcode 日志文件

> ID：15957667
> 
> 赞同：0
> 
> 时间：2013-04-11T19:53:05.987
> 
> 标签：iphone, logging

当我在我的 iPhone 上测试我的应用程序时，当应用程序启动时，我得到这个奇怪的输出：

DataFile：文件打开错误：/var/mobile/Library/Keyboard/de_DE-dynamic-Text.dat，（权限被拒绝）

这是什么意思？又该怎么做呢？

编辑：似乎文件打开错误发生在我的代码的那部分，因为当我“注释”它时，错误不会显示：

```
NSMutableDictionary *InfoDic = [[NSMutableDictionary alloc] initWithContentsOfURL:[[NSURL alloc]initFileURLWithPath:[[NSBundle mainBundle]pathForResource:@"AppInformation" ofType:@"plist"]]];

    NSString *Checkstring = [InfoDic objectForKey:@"Language"];

    if ([Checkstring isEqualToString:@"empty"]) {
 UIAlertView *determineLang = [[UIAlertView alloc] initWithTitle:@"Select a Language" message:@"Choose a Language"
delegate:self cancelButtonTitle:@"Deutsch" otherButtonTitles:@"English", nil];
 determineLang.tag=5;
 [determineLang show];

 } 
```

Edit2：似乎我每个应用程序中的每个警报视图都导致了同样的问题，一定是 iPhone 越狱的问题......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T00:25:57.553

这似乎是越狱的 iDevices 和 UIAlertViews 的问题！由于它似乎对应用程序本身的行为没有任何进一步的影响，我想说每个面临问题的人都必须忍受它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-01T22:28:11.560

我的**没有**越狱，它似乎仍然给出了上述结果：

*   (IBAction)callPhoneNumber:(id)sender {

    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:nil message:@"xxxxxxxxxx" delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles:@"Call", nil];

    [警报显示]；}

DataFile：文件打开错误：/var/mobile/Library/Keyboard/en_GB-dynamic-text.dat，（权限被拒绝）

# opencv - 逆变换后的 OpenCV gpu::dft 失真图像

> ID：15957671
> 
> 赞同：1
> 
> 时间：2013-04-11T19:53:14.397
> 
> 标签：opencv, gpu, dft

我正在研究图像频率过滤的 GPU 实现。我的代码在 CPU 上运行良好（我使用过类似的东西[）](https://stackoverflow.com/questions/10269456/inverse-fourier-transformation-in-opencv)，但我花了一整天的时间试图在 GPU 上做同样的工作——但没有成功。我想在频域中应用一个滤波器，因此我需要正向变换的完整（复杂）结果。我已经读到我需要通过两个复杂的矩阵（src 和 dst）来转发 dft 以获得全谱（32FC2）。但是，我在逆变换后无法获得相同的图像（返回的图像非常失真）。

我的代码（最接近的结果）：

```
gpu.img1 = gpu::GpuMat(vrH, imgWidth, CV_32FC2);
gpu.img2 = gpu::GpuMat(vrH, imgWidth, CV_32FC2);
gpu.img4 = gpu::GpuMat(vrH, imgWidth, CV_32FC1);
gpu.img5 = gpu::GpuMat(vrH, imgWidth, CV_8UC1);

Mat planes[] = {imageIn, Mat::zeros(imageIn.size(), CV_32FC1)};
merge(planes, 2, imageIn);

gpu::Stream stream; 
gpu.img1.upload(imageIn);

gpu::dft(gpu.img1, gpu.img2, gpu.img1.size(), 0, stream);
gpu::dft(gpu.img2, gpu.img4, gpu.img1.size(), DFT_INVERSE | DFT_REAL_OUTPUT | DFT_SCALE, stream);
stream.enqueueConvert(gpu.img4, gpu.img5, CV_8U);

stream.waitForCompletion();
gpu.img5.download(imageOut);  
namedWindow("processed",1); imshow("processed", imageOut); waitKey(1000); 
```

非常感谢您的帮助和建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T13:32:36.447

我又花了几个小时，但我最终解决了这个问题。有两种选择

**1) real-to-complex (CV_32FC1 -> CV_32FC2) forward and complex-to-real (CV_32FC2 -> CV_32FC1) inverse**
作为正向变换的结果，得到更窄的频谱矩阵（newWidth = oldWidth/2+1）在[文档](http://docs.opencv.org/modules/gpu/doc/image_processing.html#gpu-dft)中）。它不是非 gpu dft 的 CSS 紧凑矩阵。它是一个复杂的矩阵，它利用了频谱是对称的这一事实。因此，在这里也可以应用任何滤波器，其执行速度比第二种情况少近一半。在这种情况下，应设置以下标志：

*   向前 -> 0
*   逆-> DFT_INVERSE | DFT_REAL_OUTPUT | DFT_SCALE

这对我很有用。记得提前正确声明 GpuMat 用于它们的类型（CV_32FC1 或 CV_32FC2）

**2）复数到复数（CV_32FC2 -> CV_32FC2）正向和复数到复数（CV_32FC2 -> CV_32FC2）逆** 全尺寸谱（CV_32FC2）在前向DFT中产生。在这种情况下，标志是

*   向前 -> 0
*   逆 -> DFT_INVERSE

逆变换的结果是一个复数矩阵（CV_32FC2），因此您需要将其拆分并从零通道中提取所需的结果。稍后需要明确缩放数据：

```
Mat lenaAfter;
Mat lena = imread("C:/Users/Fundespa/Desktop/lena.jpg", CV_LOAD_IMAGE_GRAYSCALE);

lena.convertTo(lena, CV_32F, 1);

std::vector<Mat> planes;
planes.push_back(lena);
planes.push_back(Mat::zeros(lena.size(), CV_32FC1));
merge(planes, lena);

gpu::GpuMat lenaGPU = gpu::GpuMat(512, 512, CV_32FC2);
gpu::GpuMat lenaSpectrum = gpu::GpuMat(512, 512, CV_32FC2);
gpu::GpuMat lenaOut = gpu::GpuMat(512, 512, CV_32FC2);
lenaGPU.upload(lena);

gpu::dft(lenaGPU, lenaSpectrum, lenaGPU.size(), 0, stream);
int c = lenaSpectrum.channels();
Size s = lenaSpectrum.size();
gpu::dft(lenaSpectrum, lenaOut, lenaGPU.size(), DFT_INVERSE, stream);

gpu::split(lenaOut, splitter, stream);
stream.waitForCompletion();
splitter[0].download(lenaAfter);
//  lenaOut.download(lenaAfter);

c = lenaAfter.channels();

double n,x;
minMaxIdx(lenaAfter, &n, &x);

lenaAfter.convertTo(lenaAfter, CV_8U, 255.0/x);

namedWindow("lena after",1);    imshow("lena after", lenaAfter); waitKey(1000); 
```

就如此容易！我不知道为什么我没有早点遇到这个。我决定以任何方式发布它，因为那里的人可能有同样的问题或需要一些指导。

# c - 当文件包含特殊字符以控制进程时如何将文件读入C中的结构

> ID：15957672
> 
> 赞同：0
> 
> 时间：2013-04-11T19:53:15.003
> 
> 标签：c, arrays, file, formatting, structure

我已经尝试了几个小时将此文件读入我想在我的 C 编程项目中使用的结构。我无法让它与结构正常工作。

这是我要读入的文件：

```
# category
- word to guess
*information to help you to guess the word

- another word to guess
* information to help you to guess the word

# another category
- word to guess
*information to help you to guess the word

- another word to guess
* information to help you to guess the word 
```

**这是我的代码**（似乎不起作用）：

```
char retazec[50]; // here goes the read in string from the file
char kategoria[50]; // here the category name is stored

i = 0; // index for the array of structures
j = 1;
while (!feof(otazky)) {
    fgets(retazec, 50, otazky);
    if (strchr(retazec, '#') != NULL) {
        printf("%s", retazec);
        printf("%d\n", i);
        slova[i].kategoria = retazec;
        strcpy(kategoria, retazec);
    }
    if (strchr(retazec, '-') != NULL) {
        printf("%s", retazec);
        printf("%d\n", i-j);
        slova[i-j].slovo = retazec;
        j++;
    }
    if (strchr(retazec, '*') != NULL) {
        printf("%s", retazec);
        printf("%d\n", i-j);
        slova[i-j].napoveda = retazec;
        j++;
    }
    i++;
}

putchar('\n');
putchar('\n');
printf("%s", slova[0].kategoria);
printf("%s", slova[0].slovo);
printf("%s", slova[0].napoveda); 
```

**我希望它如何工作**：

我有`i`变量来存储结构数组的索引。该`j`变量用于更正数组索引。

1.  读取第一个字符串（#类别）

2.  如果确实包含 a `'\#'`，请记住它是什么类别并将其放入`slova[i].kategoria`( `i`is 0)

3.  它检查其他两个并递增`i`

4.  读取第二个字符串（`-`要猜测的单词）

5.  第一个`if`是假的，在第二个中，如果字符串包含 a `'-'`，则将其放入`slova[i-j].slovo`( `i`is 1, `j`is 1 so `i - j = 0`) 并且它会递增`j`，因为在下一步中，当程序要读取信息以帮助用户时猜测，`i`也将是 2，`j`并`i - j`再次给我们 0。正如我所想，这 3 个字符串应该在`slova[0]`结构中。但它不起作用，我不知道为什么。

如果有人知道答案，请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T20:11:00.860

当您在文件中循环时，您正在将数据读入`retazec`缓冲区，然后您测试它是否是一个类别、单词或提示。当它是一个类别时，您将类别名称复制到

`strcpy(kategoria, retazec)`

然而，当它是一个单词或一个提示时，你只是设置了一个指向读取缓冲区的指针

`slova[i-j].napoveda = retazec;`

但是下一次读取会破坏该值（覆盖它）。

您应该复制值，而不是在那里分配指针。您不能分配字符串，您必须复制它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T21:25:33.837

万能的天啊 正是这样的项目让我想起了 C++ 的一些好处，即向量和列表。要么会大大简化任务。

在我看来，您需要保留（a）类别的链接列表读取（b）每个类别中的链接列表，其中包含该猫的单词/提示对。

我只是费心制作每个类别中的单词/提示的链接列表。每当遇到新类别时，我都会简单地覆盖前一个类别。我也会像偷走的火箭燃料一样燃烧记忆。:-D

在处理类别时，您可能希望遵循我用于项目链表的模式，或者您可以选择使用数组和 realloc。

无论如何，希望它对您有所帮助和有用。:-)

**主程序**

```
#include <string.h>
#include <stdio.h>
#include <stdlib.h>

struct sItem
{
    char    *wordToGuess;
    char    *wordGuessHint;
    sItem   *next;
};

struct sCat
{
    char    *categoryName;
    sItem   *itemList;
};

sItem *newItem(char *word, char *hint)
{
    sItem *tmp;
    tmp = (sItem*)malloc(sizeof(sItem));
    tmp->wordToGuess = word;
    tmp->wordGuessHint = hint;
    return tmp;
}

sItem *getTail(sItem *head)
{
    sItem *tmp;
    tmp = head;
    while (tmp->next != NULL)
        tmp = tmp->next;
    return tmp;
}

void addListItem(sItem **listHead, char *word, char *wordHint)
{
    sItem *tmp1, *theNewNode = newItem(word, wordHint);

    // list is empty
    if ((*listHead) == NULL)
        (*listHead) = theNewNode;

    // find end of list and add entry there
    else
    {
        tmp1 = getTail(*listHead);
        tmp1->next = theNewNode;
    }
}

// display a list of sItems (each category has it's own list)
void printList(sItem *listHead)
{
    sItem *tmp = listHead;
    while (tmp != NULL)
    {
        printf("Word: %s\n", tmp->wordToGuess);
        printf("Hint: %s\n", tmp->wordGuessHint);
        printf("\n");
        tmp = tmp->next;
    }
}

void printCategory(sCat &cat)
{
    printf("Category: %s\n", cat.categoryName);
    printList(cat.itemList);
    printf("\n");
}

int main(int argCount, char *argValues[])
{
    char lineBuffer[256];
    sCat curCategory;
    char *curStr=NULL, *curWord=NULL, *curHint=NULL;
    bool isFirst = true;
    FILE *fp = fopen("data.txt", "r");
    curCategory.itemList = NULL;
    while (fgets(lineBuffer, 255, fp) != NULL)
    {
        // 1\. trim trailing new-line character
        lineBuffer[ strlen(lineBuffer) - 1] = 0;
        // 2\. set pointer to point to first char of 'data' in the line
        curStr = lineBuffer + 2;
        switch (lineBuffer[0])
        {
            case '#':                       // category
                if (isFirst != true)
                {
                    printCategory(curCategory);
                }
                curCategory.categoryName = strdup(curStr);
                curCategory.itemList = NULL;
//                printf("# [%s]\n", curStr);
                isFirst = false;
                break;
            case '-':                       // word
                curWord = strdup(curStr);
//                printf("- [%s]\n", curStr);
                break;
            case '*':                       // hint
                curHint = strdup(curStr);
                addListItem(&curCategory.itemList, curWord, curHint);
 //               printf("* [%s]\n", curStr);
                break;
        }
    }
    fclose(fp);
    printCategory(curCategory);
} 
```

**数据.txt**

```
# Animals
- Zebra
* Black + white stripes

- Girraffe
* Tall orange

# Cars
- Mustang
* A real 'animal' of a car

- Lamborghini Diablo
* A devillishly good ride. 
```

**输出：**

```
Category: Animals
Word: Zebra
Hint: Black + white stripes

Word: Girraffe
Hint: Tall orange

Category: Cars
Word: Mustang
Hint: A real 'animal' of a car

Word: Lamborghini Diablo
Hint: A devillishly good ride.

Process returned 0 (0x0)   execution time : 0.080 s
Press any key to continue. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T07:02:26.050

**谢谢 K Scott Piel 和 enhzflep**
因为我不能使用链表，因为这是一个学校项目，他们没有教我们如何使用它们，所以我想出了这个（令人惊讶的是它可以按我的意愿工作至）：

```
char retazec[50];
char kategoria[50];

i = 0;
j = 0;
printf("%d\n", pocet_slov);
while (fgets(retazec, 50, otazky) != NULL) {
    switch(retazec[0]) {
    case '#':
        strcpy(kategoria, retazec);
        strcpy(slova[i-j].kategoria, retazec);
        j++;
        break;
    case '-':
        strcpy(slova[i-j].kategoria, kategoria);
        strcpy(slova[i-j].slovo, retazec);
        j++;
        break;
    case '*':
        strcpy(slova[i-j].napoveda, retazec);
        j++;
        break;
    }
    i++;
}

fclose(otazky);

for (i = 0; i < pocet_slov; i++) {
    putchar('\n');
    putchar('\n');
    printf("%s", slova[i].kategoria);
    printf("%s", slova[i].slovo);
    printf("%s", slova[i].napoveda);
} 
```

**输出：**
#类别
-单词
*帮助猜词

#类别
-单词*帮助猜词

然后，如果它找到另一个类别，它会像这样：

# another category
- word
* help

# another category
- word
* help

# c# - 事件 NotifyChanged 不会与我的静态变量一起触发

> ID：15957673
> 
> 赞同：1
> 
> 时间：2013-04-11T19:53:24.540
> 
> 标签：c#, wpf, events, data-binding, inotifypropertychanged

我创建了一个具有两个静态属性的类：

```
public class CParametres
{

    public static event EventHandler<PropertyChangedEventArgs> StaticPropertyChanged;

    private  static Color m_ThemeColorGradientBegin;
    public  static Color ThemeColorGradientBegin
    {
        get { return m_ThemeColorGradientBegin; }
        set
        {
            m_ThemeColorGradientBegin = value;
            NotifyStaticPropertyChanged("ThemeColorGradientBegin");
        }
    }

    private  static Color m_ThemeColorGradientEnd;
    public  static Color ThemeColorGradientEnd
    {
        get { return m_ThemeColorGradientEnd; }
        set
        {
            m_ThemeColorGradientEnd = value;
            NotifyStaticPropertyChanged("ThemeColorGradientEnd");
        }
    }

    public CParametres()
    {
     ....   
    }

    public void setThemeGradient(Color ColorBegin, Color ColorEnd)
    {
        ThemeColorGradientBegin = ColorBegin;
        ThemeColorGradientEnd = ColorEnd;
    }

    private static void NotifyStaticPropertyChanged(string propertyName)
    {
        if (StaticPropertyChanged != null)
        {
            StaticPropertyChanged(null, new PropertyChangedEventArgs(propertyName));
        }
    }

} 
```

我的问题是，当我使用 setThemeGradient() 来设置这两个属性时，不会引发通知事件。（这是为了做一个绑定）

有人有想法吗？

非常感谢，

此致，

尼克修斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T19:59:28.233

> 你其实并没有`implement INotifyPropertyChanged`...

**你不能那样做`static`。**

您应该正确实现 INotifyPropertyChanged - 然后绑定到实例的属性。

```
public sealed class YourClass : INotifyPropertyChanged 
{
    public event PropertyChangedEventHandler PropertyChanged;
    protected void OnPropertyChanged(string propertyName) { this.PropertyChanged.Raise(this, new PropertyChangedEventArgs(propertyName)); } // my 'raise' use typical event handling  

    public static readonly YourClass Instance = new YourClass(); // your ctor params if needed
    private YourClass() // ensure only you can 'construct'
    { }

    // call OnPropertyChanged from your properties
    // implement 'non-static' properties 
```

然后使用您的视图模型来获取正确的实例（我不确定 CParameters 属于哪里，您的虚拟机看起来如何）。

> 或者，如果您需要一个实例，您可以通过 x:Static 进行绑定 - 并向您的班级公开一个“实例” - 通过“单例” - 例如 `CParameters.Instance`

例如

```
{Binding Path=Property, Source={x:Static my:YourClass.Instance}} 
```

虽然我建议通过您的视图模型层次结构进行正确的绑定。

**注意：**
1) 如此典型的 INotifyPropertChanged 实现
2) 添加`Singleton' implementation - which is`密封的`(not required but good),`private`ctor（不是必需但推荐） - 和只读静态属性 - 以供外部访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T20:00:22.730

```
 public event PropertyChangedEventHandler PropertyChanged;

    // This method is called by the Set accessor of each property. 
    // The CallerMemberName attribute that is applied to the optional propertyName 
    // parameter causes the property name of the caller to be substituted as an argument. 
    private void NotifyPropertyChanged(String propertyName)
    {
        if (PropertyChanged != null && !String.IsNullOrEmpty(propertyName))
        {
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    } 
```

# stack - 如何从 MIPS 程序集中的堆栈中弹出？

> ID：15957678
> 
> 赞同：5
> 
> 时间：2013-04-11T19:53:33.633
> 
> 标签：stack, mips

我正在尝试学习 MIPS 汇编，因为我有一些空闲时间，并且我正在尝试编写一个将数字推入堆栈然后将它们弹出的程序。我希望它计算在达到负数之前弹出的数字的数量，然后每次它得到一个负数时，计算弹出了多少负数和正数。

到目前为止，我得到了这个：

```
 #count the number of negative words on the stock by poping the stack until a non-    negative word is found 
#and print out the number of words found

.text
.globl main
#this code reads the numbers from the data area and stores in them in a stack
#the numbers are located in the test area and the number of numbers in the num area

main:   la $t0, test
lw $t1, num
loop:   lw $t2,($t0)
sub $sp, $sp, 4
sw $t2($sp)
add $t0, $t0, 4
add $t1, $t1, -1
bnez $t1, loop

#pop from the stack and print the number of numbers in the stack before a nonnegative number is reached 
#then keep count of how many negative and positive ones there are total

#code I cannot come up with would go here

.data
test:   .word
2, 0xfffabfff,2,-4,-9,0x99999999,0x90000000,-2147479536,0x80000000
num:    .word 10
ans:    .asciiz "Number is = "
endl:   .asciiz "\n" 
```

据我所知，我让它向右推动，但我无法弄清楚推动和计数的权利。我必须从这里做什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-12T09:06:57.740

弹出将与推送相反。因此，如果您使用它来推送`$t2`：

```
sub $sp,$sp,4
sw $t2,($sp) 
```

你会弹出它：

```
lw $t2,($sp)
addiu $sp,$sp,4 
```

计算堆栈上的负字数将是一个循环，该循环将一个字从堆栈中弹出，`BGEZ`如果弹出的值> = 0，则用于退出循环，否则会增加计数器并重复。

# jquery - 引用 tr 元素

> ID：15957680
> 
> 赞同：3
> 
> 时间：2013-04-11T19:53:36.567
> 
> 标签：jquery

我是 jquery 的新手，所以如果这是一个愚蠢的问题，我深表歉意......

```
$('#sortList tr').each(function()
{
    i = $(this).index();
    v = $(this).find('td:first').text();
    n = $(this).find('td:first').html();  
}); 
```

循环遍历表格的行并获取每行的索引以及每行第一个单元格的文本和 html。一切正常。然后我尝试为下一行得到相同的结果，我发现以下...

这工作正常...`j = $(this).next().index();`

但这失败了……`v = $(this).next().find('td:first').text();`

这失败了......`n = $(this).next().find('td:first').html();`

如果`$(this)`和`$(this).next()`两者都工作，`index()`为什么不`find()`呢？他们不是都指向 a`tr`吗？

```
<table border="0" cellspacing="0" cellpadding="0" id="sortList" class="pagetext" width="200">
    <tr>
        <td align='left'><a href="Javascript:;;" OnClick="Javascript:Link_OnClick('ACCRUAL','Accrual');return false;">Accrual</a></td>
    </tr>
    <tr>
        <td align='left'><a href="Javascript:;;" OnClick="Javascript:Link_OnClick('EETAXES','Employee - Taxes');return false;">Employee - Taxes</a></td>
    </tr>
    <tr>
        <td align='left'><a href="Javascript:;;" OnClick="Javascript:Link_OnClick('EMPVOLDEDS','Employee - Voluntary Deductions');return false;">Employee - Voluntary Deductions</a></td>
    </tr>
    <tr>
        <td align='left'><a href="Javascript:;;" OnClick="Javascript:Link_OnClick('ERMATCH','Employer - 401(k) Match');return false;">Employer - 401(k) Match</a></td>
    </tr>
    <tr>
        <td align='left'><a href="Javascript:;;" OnClick="Javascript:Link_OnClick('ERTAXES','Employer - Taxes');return false;">Employer - Taxes</a></td>
    </tr>
    <tr>
        <td align='left'><a href="Javascript:;;" OnClick="Javascript:Link_OnClick('GTL','Group Term Life');return false;">Group Term Life</a></td>
    </tr>
    <tr>
        <td align='left'><a href="Javascript:;;" OnClick="Javascript:Link_OnClick('MISC','Miscellaneous');return false;">Miscellaneous</a></td>
    </tr>
    <tr>
        <td align='left'><a href="Javascript:;;" OnClick="Javascript:Link_OnClick('NETPAY','Net Payroll');return false;">Net Payroll</a></td>
    </tr>
    <tr>
        <td align='left'><a href="Javascript:;;" OnClick="Javascript:Link_OnClick('TAXFILEE','Tax Filing - Employee Taxes');return false;">Tax Filing - Employee Taxes</a></td>
    </tr>
    <tr>
        <td align='left'><a href="Javascript:;;" OnClick="Javascript:Link_OnClick('TAXFILER','Tax Filing - Employer Taxes');return false;">Tax Filing - Employer Taxes</a></td>
    </tr>
    <tr>
        <td align='left'><a href="Javascript:;;" OnClick="Javascript:Link_OnClick('TPCORTAX','Third Party Checks or Tax Checks');return false;">Third Party Checks or Tax Checks</a></td>
    </tr>
    <tr>
        <td align='left'><a href="Javascript:;;" OnClick="Javascript:Link_OnClick('TPS','Third Party Sick');return false;">Third Party Sick</a></td>
    </tr>
    <tr>
        <td align='left'><a href="Javascript:;;" OnClick="Javascript:Link_OnClick('WAGE','Wage');return false;">Wage</a></td>
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T22:04:12.097

不确定您的代码有什么问题，但这个整理后的版本有效：

```
$('#sortList tr').each(function(rowIndex) {
    var $row = $(this),
        $nextRow = $row.next(),
        $td, j, v, n;

    $td = $row.find('td:first');
    j = rowIndex;
    v = $td.text();
    n = $td.html();

    console.log('this row: ' + j + '\t' + v + '\t' + n);

    if ($nextRow.length > 0) {
        $td = $nextRow.find('td:first');
        j = rowIndex + 1; // duh?
        v = $td.text();
        n = $td.html();
        console.log('next row: ' + j + '\t' + v + '\t' + n);
    }

}); 
```

[http://jsfiddle.net/VxSZf/2/](http://jsfiddle.net/VxSZf/2/)

# iphone - 如何在 Objective-C 上发送带有参数的通知？

> ID：15957686
> 
> 赞同：8
> 
> 时间：2013-04-11T19:53:50.337
> 
> 标签：iphone, ios, notifications

我需要将`@"willAnimateRotationToInterfaceOrientation"`带有参数`toInterfaceOrientation`和`duration`（**问题#1**）的通知发送给`UIViewController`应用程序（**问题#2**）上的所有人。如何为此编写代码？

```
[[NSNotificationCenter defaultCenter]
  addObserver:self
     selector:@selector(willAnimateRotationToInterfaceOrientation:toInterfaceOrientation:duration)
         name:@"willAnimateRotationToInterfaceOrientation"
       object:nil];

[[NSNotificationCenter defaultCenter] 
  postNotificationName:@"willAnimateRotationToInterfaceOrientation"
                object:self]; 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-11T20:00:21.043

使用`postNotificationName:object:userInfo:`并捆绑您希望在`userInfo`字典中传递的任何参数。

例子：

您可以发布这样的通知

```
NSDictionary * userInfo = @{ @"toOrientation" : @(toOrientation) };
[[NSNotificationCenter defaultCenter] postNotificationName:@"willAnimateRotationToInterfaceOrientation" object:nil userInfo:userInfo]; 
```

然后通过执行以下操作检索您传递的信息：

```
- (void)willAnimateRotationToInterfaceOrientation:(NSNotification *)n {
    UIInterfaceOrientation toOrientation = (UIInterfaceOrientation)[n.userInfo[@"toOrientation"] intValue];
  //..
} 
```

总结上面看到的内容，用于处理通知的选择器采用一个可选类型参数，您可以在字典`NSNotification`中存储您想要传递的任何信息。`userInfo`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T20:01:30.690

这不像你想象的那样工作。通知消息调用有一个可选参数，它是一个`NSNotification`对象：

```
-(void)myNotificationSelector:(NSNotification*)note;
-(void)myNotificationSelector; 
```

通知对象有一个属性 ，`userInfo`它是一个字典，可以用来传递相关信息。但是您不能注册任意选择器以供通知中心调用。您通过使用`-postNotificationName:object:userInfo:`而不是通知传递该字典`-postNotificationName:object:`；该`userInfo`参数只是`NSDictionary`您创建的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T20:01:29.830

您使调用方法更容易，它需要更少的参数并为您执行复杂的调用。

```
[[NSNotificationCenter defaultCenter]
  addObserver:self
     selector:@selector(doStuff)
         name:@"willAnimateRotationToInterfaceOrientation"
       object:nil];

- (void)doStuff {
  [self willAnimateRotationToInterfaceOrientation:someOrientation
                                    toOrientation:someOtherOrientation
                                         duration:1];
} 
```

* * *

你不应该打电话给`willAnimateRotationToInterfaceOrientation:`自己。而是创建一个名为 form 的方法，该方法包含您要在轮换和其他时间激活的代码。

# c# - 向导 VisualStudio 断开数据集

> ID：15957689
> 
> 赞同：1
> 
> 时间：2013-04-11T19:54:06.763
> 
> 标签：c#, sql, visual-studio-2012

我正在使用向导创建一个断开连接的数据集项目，但是，它允许我从表中更新和删除数据，但它不允许我插入新数据行并且仍然给我消息框“SUCCESS”！！！！

```
namespace Disconnected_Database_by_Wizard
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }
        SqlConnection myConnection = new SqlConnection();

        SqlDataAdapter myAdapter = null;

        private void Form1_Load(object sender, EventArgs e)
        {
            myConnection.ConnectionString = "Server=CompileMe;Database=MyDataBase;Integrated Security = True";
            myAdapter = new SqlDataAdapter("Select * from MyList", myConnection);
            myConnection.Open();
            myAdapter.Fill(dataSet1,"MyList");
            SqlCommandBuilder myCommandBuilder = new SqlCommandBuilder(myAdapter);

            myAdapter.InsertCommand = myCommandBuilder.GetInsertCommand();
            myAdapter.UpdateCommand = myCommandBuilder.GetUpdateCommand();
            myAdapter.InsertCommand = myCommandBuilder.GetDeleteCommand();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            try
            {

                myAdapter.Update(dataSet1 ,"Mylist");
                MessageBox.Show("Success");
            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.Message);
            }
            finally
            {
                myConnection.Close();

            }

        }
    }
} 
```

提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T20:05:06.317

我找到了问题，第三个命令行应该是：DeleteCommand 而不是 InsertCommand。

```
 { myAdapter.InsertCommand = myCommandBuilder.GetInsertCommand();
     myAdapter.UpdateCommand = myCommandBuilder.GetUpdateCommand();
      myAdapter.DeleteCommand = myCommandBuilder.GetDeleteCommand();
    } 
```

代替 ：

```
 { myAdapter.InsertCommand = myCommandBuilder.GetInsertCommand();
    myAdapter.UpdateCommand = myCommandBuilder.GetUpdateCommand();
    myAdapter.InsertCommand = myCommandBuilder.GetDeleteCommand();
  } 
```

# ios - 没有找到 CAShapeLAyer？

> ID：15957690
> 
> 赞同：1
> 
> 时间：2013-04-11T19:54:07.507
> 
> 标签：ios

我有一个我似乎无法弄清楚的问题，谷歌搜索等等。我试图在我的程序中访问 CAShapeLayer，每次我使用这行代码 CASHapeLayer *layer = [CAShapeLayer layer] 我都会收到此错误消息

```
 Undefined symbols for architecture i386:
  "_OBJC_CLASS_$_CAShapeLayer", referenced from:
      objc-class-ref in NCIStaticBg.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我似乎无法理解为什么它不起作用。对于一个核心图形，默认情况下始终添加到您创建的每个项目中。因此，将#import 添加到任何文件都应该允许我使用这个类。当我输入 CA 时...我能够在智能感知中看到 CAShapeLayer。真正奇怪的是，我可以打开我的一个旧项目，而这些项目使用 CASHapeLayer，我完全没有错误。所以它特定于这个项目，我什至创建了一个新项目，但仍然发生同样的错误。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-11T19:58:18.487

您是否链接到 QuartzCore.framework？我敢打赌，您还没有将该框架添加到您的新项目中。

# java - BoneCP SLF4J ClassNotFoundException

> ID：15957693
> 
> 赞同：0
> 
> 时间：2013-04-11T19:54:12.423
> 
> 标签：java, eclipse, connection-pooling, slf4j, bonecp

我正在测试 BoneCP 以及其他连接池解决方案，但无法让 BoneCP 正常工作。（在 Eclipse 中使用一个简单的 Java 应用程序）

我使用的代码是从[BoneCP JDBC Example](http://jolbox.com/jdbc-example.html)复制而来的。

按照[BoneCP 要求](http://jolbox.com/requirements.html)，我通过导入以下外部 JAR 配置了构建路径：

*   **SLF4J** - *slf4j-jdk14-1.7.5.jar*
*   **谷歌番石榴**- *guava-14.0.1.jar*

以下是我尝试运行 Java 应用程序时遇到的错误：

> 线程“main”中的异常 java.lang.NoClassDefFoundError: org/slf4j/LoggerFactory at com.jolbox.bonecp.BoneCPConfig.(BoneCPConfig.java:60) at Main.BoneCP(Main.java:70) at Main.main(Main .java:24) 引起：java.lang.ClassNotFoundException: org.slf4j.LoggerFactory at java.net.URLClassLoader$1.run(Unknown Source) at java.security.AccessController.doPrivileged(Native Method) at java.net.URLClassLoader .findClass(Unknown Source) at java.lang.ClassLoader.loadClass(Unknown Source) at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source) at java.lang.ClassLoader.loadClass(Unknown Source)

任何帮助或专业知识将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T20:00:46.440

您缺少的类在`slf4j-api`jar 中，当前为 version `slf4j-api-1.7.5.jar`。你可以在[这里](http://mvnrepository.com/artifact/org.slf4j/slf4j-api/1.7.5)得到它。`slf4j-jdk14`如果您使用的是 java 版本 > 1.4 ，请将其添加到您的构建路径并删除您拥有的路径。

# c# - 如何使用带有 ms sql server 的 C#/VB（Web 表单或 MVC）管理用户角色和权限？

> ID：15957698
> 
> 赞同：3
> 
> 时间：2013-04-11T19:54:23.493
> 
> 标签：c#, sql, vb.net

我正在使用需要用户权限和角色的 ms sql server 和 C# 进行开发和应用。目前，我创建了这样的表。

```
 'privileges_table

  PrivilegeID | PrivilegeName
       1      |  Create
       2      |  Update
       3      |  Delete
       4      |  View

  Roles_Table

  RolesID     | RolesName  | PrivilegeID  | RolesGroup
     1           Admin          1         |   1
     2           Admin          2         |   1
     3           Admin          3         |   1
     4           Secretary      2         |   4
     5           Remote User    4         |   5

  User_Table

  UserID   |  UserName   | UserPass  | RoleGroup
    1      |  Wale       | m%^#@     |     1
    2      |  Jane       | k*&%$#    |     5

  ' 
```

我该怎么做才能以更好的方式管理它以减少冗余并仍然避免使用我的 c#/VB 进行过多的编码？感谢所有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T20:26:54.007

你的角色表中有一些冗余

权限表是可以的（尽管这通常被称为权限）

角色：

```
ID | Name
---+----------
1  | Admin
2  | Secretary
3  | Remote User 
```

由于单个角色可以拥有多个权限，并且可以将单个权限分配给多个角色，因此我们有一个：m（或多对多）关系，由连接表解决

角色权限表

```
ID | RoleID | PrivilegeID
---+--------+-------------
1  | 1      | 1
2  | 1      | 2
3  | 1      | 3
4  | 2      | 2
5  | 3      | 4 
```

关于命名风格的另一件事：如果您用单数或复数名称命名您的桌子，请自行选择 - 不是一个复数，另一个是单数下一个......好吧，我希望你得到图片;）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T20:13:08.743

您应该利用 .Net Framework 的[Membership](http://msdn.microsoft.com/en-us/library/yh26yfzy%28v=vs.100%29.aspx)模块。它是管理 Web 应用程序中的用户和角色的标准方法，甚至可以使用此模块在桌面应用程序中管理用户。

至于 ASP.NET MVC，您可以在[MembershipStarterKit](https://github.com/TroyGoode/MembershipStarterKit)（[在 Nuget 上可用](https://nuget.org/packages/MvcMembership/)）等成员模块之上找到实现标准屏幕和功能的项目。

如果可以避免，就不要重新发明轮子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T20:10:01.733

您冷轧您自己的自定义会员提供商。尽管这对于您的要求可能有点过分。

到目前为止，您所拥有的似乎还不错，只需创建一个用户类并在用户使用其适当权限登录时将其存储，然后创建几个函数，例如 isAllowedUpdate(roleID) 作为布尔值，isAllowedCreate(roleID) 作为布尔值等。

对于需要特权的简单 Web 应用程序，我已经这样做了几次。我通常只有一个角色和用户表，尽管创建了非常具体的角色 - 这取决于您希望权限的粒度。

# ruby-on-rails - 来自 mySQL 导出字段的 CSV 中的空白行在 ruby CSV 解析期间导致错误

> ID：15957702
> 
> 赞同：3
> 
> 时间：2013-04-11T19:54:35.817
> 
> 标签：ruby-on-rails, ruby, csv

我从一个旧系统导出了一些粗糙的 mySQL CSV，我正在解析并加载到一个新的 Ruby on Rails 应用程序中。

下面是一个例子：

```
"1","1","When a ticket is marked as Resolved, revert the assigned_to to the one who started it",,"7","1","1.00","0.00","2",NULL,NULL,"1","2009-06-04 16:40:37","2009-06-04 16:40:37",NULL,"0000-00-00 00:00:00";"2","2","Email notifications when ticket is assigned to someone",,"1","1","1.00","0.00","1",NULL,NULL,"1","2009-06-04 16:41:21","2009-06-04 16:41:21",NULL,"0000-00-00 00:00:00";"3","1","When a ticket is marked as Resolved, revert the assigned_to to the one who started it - and notify",,"7","1","1.00","0.00","2",NULL,NULL,"1","2009-06-09 18:10:47","2009-06-09 18:10:47",NULL,"0000-00-00 00:00:00";"4","3","Change Password Capability","Fix the forgot password capability (and for bonus points, add capability for user to change once logged in.","7","1","0.00","0.00","1",NULL,NULL,"9","2009-06-09 18:13:45","2009-06-09 18:13:45",NULL,"0000-00-00 00:00:00";"5","4","Manager View","Don't need listed:
  Milestone
  Status

Do need listed:
  Assigned To
  Position (since we're not assigning case numbers)","7","1","0.00","0.00","1",NULL,NULL,NULL,"2009-06-09 18:16:32","2009-06-09 18:16:32",NULL,"0000-00-00 00:00:00";"6","5","TICKETS: Remove Position / Assign ID","Don't really need to assign a position, instead would be better to automatically assign a ticket number and be able to sort on that.

Also, when you don't assign a position to a ticket, it breaks the system (or at least it doesn't show up and causes an error in the Manager View)","7","1","0.00","0.00","1",NULL,NULL,"9","2009-06-09 18:19:10","2009-06-09 18:19:10",NULL,"0000-00-00 00:00:00";"7","6","Manager View","Don't need listed:
- Milestone
- Status

Do need listed:
- Case ID (preferred)
- Position (until case id implemented)","7","1","0.00","0.00","1",NULL,NULL,"9","2009-06-09 18:24:07","2009-06-09 18:24:07",NULL,"0000-00-00 00:00:00";"8","5","TICKETS: Remove Position / Assign ID","Don't really need to assign a position, instead would be better to automatically assign a ticket number and be able to sort on that.

Also, when you don't assign a position to a ticket, it breaks the system (or at least it doesn't show up and causes an error in the Manager View)","7","1","0.00","0.00","1",NULL,NULL,NULL,"2009-06-09 18:35:00","2009-06-09 18:35:00",NULL,"0000-00-00 00:00:00";"9","7","Ability to \"assign\" projects to users","Some way, even manual in the database, to indicate which projects a user may access","7","1","0.00","0.00","1",NULL,NULL,"9","2009-06-09 18:45:16","2009-06-09 18:45:16",NULL,"0000-00-00 00:00:00"; 
```

字段用双引号括起来，以逗号结尾，行以分号结尾。正如您所希望看到的，在特定领域内有硬回报（？）。这就是它们在 CSV 文件中的显示方式，而不是换行符。

我用于解析 CSV 的 ruby​​ 测试代码：

```
 csv_file_path1 = 'data/file.csv'

  CSV.foreach( csv_file_path2, { :row_sep => ";" } ) do |row|
    puts row[1]
  end 
```

当我通过 rake 任务运行它时，我得到输出：

```
 1
 2   
 3
 4
 5
 6
 7
 8   
 rake aborted!
 Missing or stray quote in line 9
 ... 
```

为什么它不能解析该字段中具有硬返回的行？谢谢。

编辑：更新以显示更多 CSV。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T20:05:13.707

这种情况下的问题是双引号转义，而不是换行符。您有一个包含字符串的字段，该字符串`\"assign\"`应该转义为`""assign""`. 进行该更改会导致以下内容正常运行：

```
require 'csv'
CSV.parse(DATA, :row_sep => ";") do |row|
  puts row
end

__END__
"1","1","When a ticket is marked as Resolved, revert the assigned_to to the one who started it",,"7","1","1.00","0.00","2",NULL,NULL,"1","2009-06-04 16:40:37","2009-06-04 16:40:37",NULL,"0000-00-00 00:00:00";"2","2","Email notifications when ticket is assigned to someone",,"1","1","1.00","0.00","1",NULL,NULL,"1","2009-06-04 16:41:21","2009-06-04 16:41:21",NULL,"0000-00-00 00:00:00";"3","1","When a ticket is marked as Resolved, revert the assigned_to to the one who started it - and notify",,"7","1","1.00","0.00","2",NULL,NULL,"1","2009-06-09 18:10:47","2009-06-09 18:10:47",NULL,"0000-00-00 00:00:00";"4","3","Change Password Capability","Fix the forgot password capability (and for bonus points, add capability for user to change once logged in.","7","1","0.00","0.00","1",NULL,NULL,"9","2009-06-09 18:13:45","2009-06-09 18:13:45",NULL,"0000-00-00 00:00:00";"5","4","Manager View","Don't need listed:
  Milestone
  Status

Do need listed:
  Assigned To
  Position (since we're not assigning case numbers)","7","1","0.00","0.00","1",NULL,NULL,NULL,"2009-06-09 18:16:32","2009-06-09 18:16:32",NULL,"0000-00-00 00:00:00";"6","5","TICKETS: Remove Position / Assign ID","Don't really need to assign a position, instead would be better to automatically assign a ticket number and be able to sort on that.

Also, when you don't assign a position to a ticket, it breaks the system (or at least it doesn't show up and causes an error in the Manager View)","7","1","0.00","0.00","1",NULL,NULL,"9","2009-06-09 18:19:10","2009-06-09 18:19:10",NULL,"0000-00-00 00:00:00";"7","6","Manager View","Don't need listed:
- Milestone
- Status

Do need listed:
- Case ID (preferred)
- Position (until case id implemented)","7","1","0.00","0.00","1",NULL,NULL,"9","2009-06-09 18:24:07","2009-06-09 18:24:07",NULL,"0000-00-00 00:00:00";"8","5","TICKETS: Remove Position / Assign ID","Don't really need to assign a position, instead would be better to automatically assign a ticket number and be able to sort on that.

Also, when you don't assign a position to a ticket, it breaks the system (or at least it doesn't show up and causes an error in the Manager View)","7","1","0.00","0.00","1",NULL,NULL,NULL,"2009-06-09 18:35:00","2009-06-09 18:35:00",NULL,"0000-00-00 00:00:00";"9","7","Ability to ""assign"" projects to users","Some way, even manual in the database, to indicate which projects a user may access","7","1","0.00","0.00","1",NULL,NULL,"9","2009-06-09 18:45:16","2009-06-09 18:45:16",NULL,"0000-00-00 00:00:00"; 
```

# sql-server - 更新记录，如果失败，插入记录然后更新

> ID：15957703
> 
> 赞同：3
> 
> 时间：2013-04-11T19:54:39.570
> 
> 标签：sql-server, stored-procedures, insert

我有一个存储过程，可以跨多个位置更新库存项目。我最想做的是允许适当的记录保存地点之间的库存转移。

我遇到的问题是其中一些位置没有大多数类型的库存项目的记录，所以当我尝试更新数量（从起始位置为 -1，到新位置为 +1）时，没有记录到更新。

这是我的存储过程：

```
 CREATE  procedure dbo.Inv_Transfer (@p_hStock numeric,
 @p_sFProp varchar(20), @p_hTProp numeric,
 @p_dQuan numeric,  @p_Date datetime,
 @p_sUser1 varchar(1000),@p_sUser2 varchar(1000))
 as
 declare
    @v_FInvhMy numeric,
    @v_TInvhMy numeric,
    @v_sStockCode varchar(10),
    @v_hFProp numeric,
    @v_ibegin int,
    @v_iend int
 begin

     set @v_ibegin  = charindex('(', @p_sFProp  ) 
    if @v_ibegin <= 0 
    begin 
       raiserror('From property string not readable',16,1, @p_sFProp ) 
        return(0)
    end
    else
    begin
       set @v_iend  = charindex (')',@p_sFProp) 
       set @v_hFProp  = substring(@p_sFProp,@v_ibegin + 1,@v_iend - @v_ibegin -1) 
    end  

    select @v_sStockCode = sCode  from mm2stock where hMy = @p_hStock 
    if @@ERROR<> 0
    begin
        raiserror('Stock read failed ',16,1)
        return(0)
    end
     select @v_FInvhMy = hMy from mm2inventory where hStock = @p_hStock and hStoreProp = @v_hFprop 
    if @@ERROR<> 0
    begin
        raiserror('From inventory read failed ',16,1)
        return(0)
    end
     select @v_TInvhMy = hMy from mm2inventory where hstock = @p_hStock and hStoreProp = @p_hTProp 
    if @@ERROR<> 0
    begin
        raiserror('To inventory read failed ',16,1)
        return(0)
    end 
    update mm2inventory set iQtyonHand = iQtyonHand - @p_dquan where hmy = @v_FInvhMy
    if @@ERROR<> 0
    begin
        raiserror('Update from inventory failed ',16,1)
        return(0)
    end         
     update mm2inventory set iQtyonHand = iQtyonHand + @p_dquan where hmy = @v_TInvhMy
    if @@ERROR<> 0
    begin
        raiserror('Update to inventory failed ',16,1)
        return(0)
    end     
    else
    begin
        INSERT INTO mm2inventory (scode, hstock, hstoreprop, dcosteach, dbillprice, ireorderlevel, ireorderqty, iqtyonorder, iqtyonhand, suser1, suser2, suser3, suser4, snotes)
        SELECT (SELECT hmy + 1 where hmy in (select max(hmy) from mm2inventory)),@p_hStock,@p_hTProp,(SELECT dcosteach from mm2inventory where hstock = @p_hStock and hstoreprop = @v_hFProp),(SELECT dbillprice from mm2inventory where hstock = @p_hStock and hstoreprop = @v_hFProp),(SELECT ireorderlevel from mm2inventory where hstock = @p_hStock and hstoreprop = @v_hFProp),(SELECT ireorderqty from mm2inventory where hstock = @p_hStock and hstoreprop = @v_hFProp),0,0,'','','','','' FROM mm2inventory

        update mm2inventory set iQtyonHand = iQtyonHand + @p_dquan where hmy = @v_TInvhMy
    end  
     insert into mm2InvXfer( sStock,hinvfrom,hinvto,dquant,dtdate,sUser1,sUser2)
        values (@v_sStockCode,@v_FinvhMy, @v_TInvhMy, @p_dquan,
         isnull(@p_Date,getdate()), @p_sUser1, @p_sUser2) 
    if @@ERROR<> 0
    begin
        raiserror('Insert into inventoryxfer table  failed ',16,1)
        return(0)
    end
 end 
```

我正在研究的摘录：

```
update mm2inventory set iQtyonHand = iQtyonHand - @p_dquan where hmy = @v_FInvhMy
    if @@ERROR<> 0
    begin
        raiserror('Update from inventory failed ',16,1)
        return(0)
    end         
     update mm2inventory set iQtyonHand = iQtyonHand + @p_dquan where hmy = @v_TInvhMy
    if @@ERROR<> 0
    begin
        raiserror('Update to inventory failed ',16,1)
        return(0)
    end     
    else
    begin
        INSERT INTO mm2inventory (scode, hstock, hstoreprop, dcosteach, dbillprice, ireorderlevel, ireorderqty, iqtyonorder, iqtyonhand, suser1, suser2, suser3, suser4, snotes)
        SELECT (SELECT hmy + 1 where hmy in (select max(hmy) from mm2inventory)),@p_hStock,@p_hTProp,(SELECT dcosteach from mm2inventory where hstock = @p_hStock and hstoreprop = @v_hFProp),(SELECT dbillprice from mm2inventory where hstock = @p_hStock and hstoreprop = @v_hFProp),(SELECT ireorderlevel from mm2inventory where hstock = @p_hStock and hstoreprop = @v_hFProp),(SELECT ireorderqty from mm2inventory where hstock = @p_hStock and hstoreprop = @v_hFProp),0,0,'','','','','' FROM mm2inventory

        update mm2inventory set iQtyonHand = iQtyonHand + @p_dquan where hmy = @v_TInvhMy
    end 
```

因此，正如您在上面看到的，我正在尝试更新（如果两个存储位置的库存项目都存在记录，这工作正常）但是如果有错误，那么我想为该特定库存项目插入我的新行，然后用新的数量值更新它，但我做错了。

谁能告诉我我做错了什么？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-06T18:10:00.737

这是您可以执行的操作的简单示例，并且您几乎不需要太多的错误处理（我假设 有一个唯一的约束`product_code`）：

```
--Make sure the inventory record exists:

INSERT INTO inventory (product_code, product_name)
SELECT product_code, product_name FROM source s
WHERE NOT EXISTS (
    SELECT product_code 
    FROM inventory i
    WHERE i.product_code = s.product_code)

--Updates the inventory record because you now know it exists:

UPDATE i
SET i.qty = i.qty + s.qty --obviously change sign where appropriate
FROM inventory i
JOIN source s ON s.product_code = i.product_code 
```

这将做的是`INSERT`每次尝试，但它自然会过滤掉任何已经存在的东西。如果什么都没有`INSERT`，什么都不会发生。然后你就可以轻松追求了`UPDATE`。

# c - 尝试将字符附加到 C 中的字符串时，xCode 上的 EXC_BAD_ACCESS 代码 2

> ID：15957704
> 
> 赞同：0
> 
> 时间：2013-04-11T19:54:41.687
> 
> 标签：c

我正在尝试将 char 附加到 C 中的字符串，但它不断在我正在使用的函数中抛出 EXC_BAD_ACCESS 代码 2 错误

```
void append(char s[], char c)
{
    char str[strlen(s)+1];
    strcpy (str,s);
    char x[2];
    x[0]=c;x[1]='\0';
    strcat(s, x);
} 
```

调用函数，如您所见，它用于从中缀方程创建后缀方程

```
const char * postFix(char x[]){
    PtrToNode P = malloc(sizeof(struct Node));
    P->Next=NULL;
    char* m="";
    char open='(',close=')';
    for (int i=0;i<strlen(x);i++){
        if (x[i]!='+'&&x[i]!='-'&&x[i]!='*'&&x[i]!='/'&&x[i]!='%'&&x[i]!='('&&x[i]!=')'){
            if (x[i+1]!='+'&&x[i+1]!='-'&&x[i+1]!='*'&&x[i+1]!='/'&&x[i+1]!='%'&&x[i+1]!='('&&x[i+1]!=')'){
                append(m, open);
                append(m, x[i]);
                append(m, x[i+1]);
                append(m, close);
            }
            else
                append(m, x[i]);
        }
        else {
            if (x[i]=='(')
                Push(x[i], P);
            else if (x[i]==')'){
                PtrToNode PTN= P->Next;
                char ch=Pop(P);
                while (ch!='(') {
                    append(m,PTN->Element);
                    ch=Pop(P);
                }
            }
            else {
                char peak=Peak(P);
                if (peak=='+'||peak=='-'){
                    if (x[i]=='*'||x[i]=='/'||x[i]=='%'){
                        Push(x[i], P);
                    }
                    else {
                        char whatever = Pop(P);
                        Push(x[i], P);
                        append(m,whatever);
                    }
                }
                else {
                    if (peak=='*'||peak=='/'||peak=='%'){
                        char whatever = Pop(P);
                        append(m,whatever);
                        Push(x[i], P);
                    }
                }
            }
        }
    }
    printf("%s",m);
    return m;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T19:59:55.360

任何一个：

A)`s`所指的内容不可修改，或 B)`s`不足以容纳`strlen(s) + 2`字符

编辑：你发布了你的代码，答案是......两者都是，但 A 更紧迫。

```
char* m=""; 
/* ... */
append(m, open); 
```

`m`是不可修改的字符串。任何试图修改在这种方式中分配的字符串文字都会导致未定义的行为。即使它是可修改的，它也不足以在不重新分配的情况下连接另一个字符。

如果您想更改`m`所指的内容，请像这样分配它：

```
char m[size]; 
```

或者

```
char *m = malloc(size); 
```

此外，您需要预先为最大可能的串联字符串分配足够的空间，或者在调用之前分配更多内存`append`。

顺便说一句，`str`in`append`未使用且完全没有必要。

# linux - 使用 sed 将缺少的 ServerName 添加到 httpd.conf 文件

> ID：15957706
> 
> 赞同：3
> 
> 时间：2013-04-11T19:54:47.220
> 
> 标签：linux, sed

我在 httpd.conf 文件中有以下虚拟主机

```
 <VirtualHost *:80>
    ## could be comments
    could be any line
    could be any line
    could be any line
    </VirtualHost>

    <VirtualHost *:80>
       could be any line
    ## could be comments
    could be any line
    could be any line
    could be any line
    could be any line
    could be any line
    </VirtualHost>

    <VirtualHost *:80>
## may have comments
    ServerName ppp.com
        could be any line
    could be any line
    could be any line
  </VirtualHost>

    <VirtualHost *:443>
   ## could be empty
    ServerName zzz.com
    could be any line
    could be any line
    could be any line
    </VirtualHost> 
```

我正在尝试将“ServerName abc.com”添加到每个尚未设置 ServerName 的虚拟主机。

我试图在 sed 中做到这一点，但我没有得到任何帮助..有什么帮助吗？

这是我到目前为止...

```
sed '/^[ \t]*<VirtualHost/,/^[ \t]*<\/VirtualHost/{
/^ServerName/!{
   /<VirtualHost/{
     /^/a\ServerName abc.com

   }
  }
}' httpd.conf 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T21:28:18.357

使用 sed：

```
sed '/<VirtualHost/{
       :a N;/<\/VirtualHost>/!b a;
       /ServerName/!s!\(</VirtualHost>\)!ServerName abc.com\n\1!
}' input 
```

对于这个特定问题，我认为 awk 与 sed 相比没有任何优势。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T20:33:34.587

我认为也许 awk 更适合这项任务。这里是`add-server-name.awk`：

```
/<VirtualHost/ { named=0; indent=substr($0,1,match($0,/<VirtualHost/)-1) }
/^[[:blank:]]*ServerName[[:blank:]]*/ { named=1; }
/<\/VirtualHost>/ { if (!named) print indent "ServerName abc.com" }
{ print } 
```

用法：

```
awk -f add-server-name.awk httpd.conf 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T20:39:58.667

awk 将在这方面提供更好的帮助。它可以更好地处理多行，而且 httpd.conf 已经是记录格式。

```
# adServer.awk
BEGIN { RS = "</VirtualHost>" }  #separate records on end of a Virtual Host
$0 /ServerName/ { print $0 $RS}  # used for records with a name

$0 ~ /ServerName/ {   # else
    for  ( i = 1; i <= NF; i ++ ) {
        print $i
        if ( $i /<VirtualHost.*>/ ) {
            print "ServerName abc.com\n"
        }
    }
    print $RS
} 
```

# java - 我应该在二叉树中继续添加条目多长时间？

> ID：15957707
> 
> 赞同：1
> 
> 时间：2013-04-11T19:54:49.180
> 
> 标签：java, algorithm

请找到下面的代码进行简单的二叉搜索树检查：

```
class Tree {

    int value;
    Tree left;
    Tree  right;

    public Tree (int a){

        value = a;
        left = right = null;
        }

}

public class VerifyBST {

public static boolean ifBST(Tree myTree, int small , int large){

        if(myTree == null)
            return true;
        if(myTree.value > small && myTree.value < large){

        boolean leftBST = ifBST(myTree.left, small,myTree.value);
        boolean rightBST = ifBST(myTree.right,myTree.value,large);

        return leftBST&&rightBST;
        }
        else{

        return false;
        }

    }

    public static void main(String[] args) {
        /*

                4
               / \
              2   6      
             / \  /\
            1   3 5 7         */

        Tree myTree = new Tree(4);

        myTree.left = new Tree(2);
        myTree.right = new Tree(6);

        myTree.left.left = new Tree(1);
        myTree.left.right = new Tree(3);

        myTree.right.left = new Tree(5);
        myTree.right.right = new Tree(7);

        System.out.println("BST or NOT?" + ifBST(myTree,Integer.MIN_VALUE,Integer.MAX_VALUE));

    }

} 
```

我的问题：

1.  从代码中可以清楚地看出，我已经手动输入了二叉树的所有条目，所以如果在某些情况下我需要检查大型树而手动输入不是一个好主意，那么最好的方法应该是什么应该遵循呢？

2.  既然我已经传入`ifBST(myTree,Integer.MIN_VALUE,Integer.MAX_VALUE)`了main方法，这是否意味着`Integer.MIN_VALUE = 1`并且`Integer.MAX_VALUE = 7`被传递给了方法体？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T20:03:04.463

1.  如果你想创建一棵大树，我建议你创建一个`insertIntoTree(Tree node, int value)`函数，在适当的位置添加一个新节点。然后，您可以根据需要多次在循环中调用该函数，可能使用随机生成的值。请注意，尽管您可能会遇到不平衡的 BT，但仍然是 BT。
2.  不，它不会将 1 和 7 传递给`ifBST`，它会传递整数类型的最小和最大可能值——可能是 -2^31-1 和 2^31。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T20:02:31.933

1）听起来你想写一个添加函数。这是一个从根开始遍历树的函数。如果您要插入的值小于根节点，请输入左节点。如果大于根节点，则输入右节点。使用递归重复此操作，直到您要输入的节点为空。然后在该点创建一个新的树节点并将左或右子节点设置为该节点。

2）考虑使其成为二叉搜索树的条件。左边节点应该比父节点小，右边更大。使用这些条件如何确保树的有效性

# c++ - Assimp 链接器错误 - 未定义的引用

> ID：15957708
> 
> 赞同：3
> 
> 时间：2013-04-11T19:54:51.527
> 
> 标签：c++, build, linker, cmake, assimp

我最近一直在尝试安装`Assimp 3.0`以加载模型`Blender`以在`OpenGL`.

我的项目设置在 中`Sublime Text 3`，因此我创建了`CMake`文件来生成构建项目所需的`make`文件。

例如，我正在使用的所有其他库`SFML`都被包含并链接得很好，但由于某种原因`Assimp`无法正常工作。

在构建时，我收到以下链接器错误：

```
undefined reference to `Assimp::Importer::Importer()
undefined reference to `Assimp::Importer::~Importer()
undefined reference to `Assimp::Importer::~Importer() 
```

由于这是一个链接器错误，我假设我的问题在于我的`CMake`文件。

我创建了一个`FindASSIMP.cmake`文件来为我设置一些变量，其中包含正确的包含目录和`.lib`需要链接的文件的路径，我可以看到它工作正常，因为我可以打印结果变量并获得预期的输出。

我有两个变量`${ASSIMP_INCLUDE_DIR}`和`${ASSIMP_LIBRARY}`.

在`release`构建中：

```
${ASSIMP_INCLUDE_DIR} = C:/lib/assimp/3.0/include
${ASSIMP_LIBRARY} = C:/lib/assimp/3.0/lib/assimp_release-dll_win32/assimp.lib 
```

我`CMake`将所有内容组合在一起的主文件是这样的（去掉了很多不相关的东西）：

```
set(EXE "main")

# Add sub-directories to create libraries from my files
add_subdirectory(various_sub_dirs)

add_executable(${EXE} my_sources.cpp)

# Link up my sub-directory libraries
target_link_libraries(${EXE} various_libraries_from_my_code)

# Link up external libraries
target_link_libraries(${EXE} ${ASSIMP_LIBRARY})
target_link_libraries(${EXE} ${GLEW_LIBRARIES})
target_link_libraries(${EXE} ${GLUT_LIBRARY})
target_link_libraries(${EXE} ${OPENGL_LIBRARIES})
# etc... 
```

我没有收到任何`include`错误，所以我知道`inlcude directory`使用正确，但出于某种原因，即使我可以打印出`.lib`我正在链接的文件的确切路径，它要么实际上没有链接，要么我正在链接错误的东西。

有人知道为什么我会看到这些链接器错误吗？

我需要链接不同的文件吗？或者我可能需要按特定顺序链接它？

任何帮助将不胜感激，因为我看不出我做错了什么。

如果需要更多信息，请发表评论，我会尽快编辑问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T05:07:42.487

问题出在 Assimp 3.0 完整下载附带的预编译库中。

我使用 CMake 和 Make 自己编译 Assimp 库，现在它可以正常工作了。

# java - 如何等待弹出菜单在摆动中关闭

> ID：15957709
> 
> 赞同：0
> 
> 时间：2013-04-11T19:55:01.753
> 
> 标签：java, swing, events, mouseevent, jpopup

我是摇摆新手，我确信还有另一种方法，但由于一些 akward api 设计，我必须实施一个接收 MouseEvent 并返回结果的处理程序。我想向用户显示弹出菜单并等待它关闭并根据用户选择的内容返回值。怎么做？提前致谢。OK 具体问题： Substance TabClos​​eCallback 接口有以下方法。

```
 public TabCloseKind onAreaClick(JTabbedPane tabbedPane,
          int tabIndex, MouseEvent mouseEvent); 
```

我希望根据用户选择的内容在调用 nad 返回值时显示弹出菜单。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T20:02:09.927

看看[如何使用对话框](http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html)

这将允许您显示一个窗口，该窗口将在用户关闭之前一直阻塞

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T19:56:53.923

看看你可以通过调用看到的事件[`JPopupMenu.addPopupMenuListener()`](http://docs.oracle.com/javase/6/docs/api/javax/swing/JPopupMenu.html#addPopupMenuListener%28javax.swing.event.PopupMenuListener%29)。

特别是，您可以[`popupMenuWillBecomeInvisible()`](http://docs.oracle.com/javase/6/docs/api/javax/swing/event/PopupMenuListener.html#popupMenuWillBecomeInvisible%28javax.swing.event.PopupMenuEvent%29)接听电话。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T20:00:02.307

您可以在弹出类中处理关闭事件并将变量设置为您期望的数据

```
yourWindow.addWindowListener(new WindowAdapter() {

    @Override
    public void windowClosing(WindowEvent e) {

        // catch what you want
    }
}); 
```

# c# - 从数据库中获取时间戳字段的值并存储在字符串中

> ID：15957715
> 
> 赞同：1
> 
> 时间：2013-04-11T19:55:36.607
> 
> 标签：c#, mysql, datetime

我正在做一个项目，我从一系列未知的数据库模式中获取值，即用户可以输入任何数据库连接详细信息，我的程序将检索数据，所以我不知道使用的表的类型和是什么存储在其中。

目前，当我尝试获取值并将它们全部存储在字符串中以便可以将它们写入文件时，但是我正在测试的字段之一具有时间戳值，并且当我尝试将其存储在字符串变量中时我得到了错误`Unable to convert MySQL date/time value to System.DateTime`，我试过说`.toString()`，但似乎没有任何区别。

下面是我用来检索数据的代码

```
using (ConnectMySQLDB db = new ConnectMySQLDB(databaseSettings))
{
   string query = string.Format("SELECT * FROM {0}.{1}", database, table);
   using (MySqlCommand cmd = new MySqlCommand(query, db.conn))
   {
      using (MySqlDataReader reader = cmd.ExecuteReader())
      {
         while (reader.Read())
         {
            fieldsAndValues = new Dictionary<string, string>();
            foreach (string field in fields)
            {
               fieldsAndValues.Add(field, reader.GetString(field));

            }
            rows.Add(fieldsAndValues);
         }
      }
   }
} 
```

感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T20:02:07.673

[无法将 MySQL 日期/时间值转换为 System.DateTime](https://stackoverflow.com/questions/2934844/unable-to-convert-mysql-date-time-value-to-system-datetime)

看起来他们使用不同的格式来存储时间。希望这可以解决您的问题。

# sql - 访问创建表vba

> ID：15957722
> 
> 赞同：2
> 
> 时间：2013-04-11T19:56:00.397
> 
> 标签：sql, ms-access, vba

想法是在表单字段中输入新表的名称，然后单击按钮以在远程数据库上使用用户输入字段的名称创建表。但是，新表是使用名称“NewTableName”而不是 NewTableName 字段中的值创建的。有谁知道不同的语法或更好的功能？提前致谢！

```
Private Sub MakeTable_Click()
  Dim dbConnectStr As String
  Dim Catalog As Object
  Dim cnt As ADODB.Connection
  Dim dbPath As String

    dbPath = "\\JAMWHITL-WS01\AccessBackEnds\Assessments\AssessmentsBackEnd.accdb"
    dbConnectStr = "Driver={Microsoft Access Driver (*.mdb, *.accdb)}; Dbq=" & dbPath & ";"

      Set cnt = New ADODB.Connection
      With cnt
        .Open dbConnectStr
        .Execute "CREATE TABLE [NewTableName] (Question Text, ID COUNTER)"

      End With
      Set cnt = Nothing
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T19:58:37.143

创建一个与他们输入表名的文本框的文本属性相等的变量。然后说如下内容：

```
"CREATE TABLE [" + variable + "] (Question Text, ID COUNTER)" 
```

# php - 使用 *delete comment* 功能

> ID：15957723
> 
> 赞同：0
> 
> 时间：2013-04-11T19:56:00.870
> 
> 标签：php, mysql

如果这是一个重复的问题，或者是一个省力的问题，我很抱歉，但我不知道它的名称是什么，如果我知道如何正确执行它，那只会对我有所帮助。

代码是：

```
if(isset($_POST['RemoveComment'])){

mysql_query("DELETE FROM `comments` WHERE `id`='".$commentid."' ");

} 
```

该功能之前的工作方式是它回显出一个从直接配置文件名称中选择的评论表。我尝试使用此删除评论系统的方式是将同一张表中的按钮（每个评论旁边）提供给配置文件所有者或管理员。它将删除带有按下按钮的 ID 的评论。但是，上面的代码只能删除所有评论，甚至可以从其他配置文件中删除一些评论。

我不知道这样的函数的名称，但我很喜欢将它命名为“通用函数”来处理任何评论，请帮助我，我将在我的网站和我缺乏这些功能的知识和名称。

额外代码：（变量）

```
$poster = $get_comments['poster'];
$comment = $get_comments['message'];
$posted = $get_comments['posted'];
$commentid = $get_comments['id']; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T19:59:04.897

我认为您要查找的名称是 a `function`，它是可重复使用的...

```
$link = mysqli_connect('localhost', 'my_user', 'my_password', 'world');

/* check connection */
if (!$link) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

function deleteComment( $link, $messageId ) {
    $stmt = mysqli_prepare($link, "DELETE FROM comments WHERE id = ?");
    mysqli_stmt_bind_param($stmt, 'i', $messageId);

    /* execute prepared statement */
    mysqli_stmt_execute($stmt);

    /* close statement and connection */
    mysqli_stmt_close($stmt);
}

// Call the function
deleteComment( $link, 1 );

/* close connection */
mysqli_close($link); 
```

请注意，`mysql_`函数已被弃用。改为了解[*准备好的语句*](http://j.mp/T9hLWi)，并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli) -[本文](http://j.mp/QEx8IB)将帮助您决定使用哪个。

# java - 如何为泛型对实现等于？

> ID：15957729
> 
> 赞同：3
> 
> 时间：2013-04-11T19:56:47.980
> 
> 标签：java, generics, equals, type-systems

只是为了好玩，我试图在 Java 中实现一个通用的 Pair 类。我遇到了麻烦`equals`：

```
public class Pair<A, B>
{
    public final A _1;
    public final B _2;

    // ... unnecessary details left out ...

    public boolean equals(Pair<A, B> that)
    {
        return (_1.equals(that._1)) && (_2.equals(that._2));
    }

    @Override
    public boolean equals(Object o)
    {
        return (o instanceof Pair<A, B>) && equals((Pair<A, B>) o);
    }
} 
```

但是，`o instanceof Pair<A, B>`似乎不起作用。这是为什么？

使用`(o instanceof Pair) && equals((Pair<A, B>) o)`给我一个演员的警告。摆脱`<A, B>`演员阵容仍然给我一个警告，我想这也是有道理的。

这是否意味着 Java 不能阻止客户端将 Pairs 与不同类型的参数进行比较？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T19:59:43.733

> 这是否意味着 Java 不能阻止客户端将 Pairs 与不同类型的参数进行比较？

是的，但这就是重点——`equals`应该适用于任何任意对象。你想要的看起来像

```
@Override
public boolean equals(Object o)
{
    if (o instanceof Pair) {
       Pair<?, ?> pair = (Pair<?, ?>) o;
       return _1.equals(pair._1) && _2.equals(pair._2);
    }
    return false;
} 
```

但这应该没问题，只要`A`并`B`有适当的实现`equals`采取任意`Object`s。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T19:58:55.980

`instanceof`由于[类型擦除](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)，您不能像以前那样使用。您只能检查`instanceof Pair`. 那
又是怎么回事？真的吗？`_1``_2`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T19:59:13.513

```
o instanceof Pair<A, B> 
```

不起作用，因为泛型在运行时不存在，因此`instanceof`不知道它们。

# html - 需要CSS打印所有页面上的页脚，但最后一个，最后一个不同的页脚

> ID：15957731
> 
> 赞同：0
> 
> 时间：2013-04-11T19:57:02.303
> 
> 标签：html, css, footer

**我需要完成什么**

我有一个打印在纸上的网页。在屏幕上查看时，我不想要任何页脚。当打印在纸上时，我希望除了最后一页之外的每个人都出现相同的页脚，并且最后一页有不同的页脚。理想情况下，这将支持现代浏览器，但也适用于 IE 7/8。

**到目前为止我所拥有的**

```
<!DOCTYPE html>
<html>
<head>
    <title>Test of paging</title>
    <style type="text/css"> 
        .page_footer {
            display: none;
            page-break-after: always;
        }

        .last_page_footer {
            display: none;
        }

        @media print {
            .page_footer {
                display: block;
                position: absolute;
                bottom: 0;
                page-break-after: always;
            }

            .last_page_footer {
                display: block;
                position: absolute;
                bottom: 0;
            }
        }
    </style>
</head>
<body>
<div>One</div>
<div class="page_footer">Not last footer</div>
<div>Two</div>
<div class="page_footer">Not last footer</div>
<div>Three</div>
<div class="page_footer">Not last footer</div>
<div>Four</div>
<div class="last_page_footer">Last footer</div>
</body>
</html> 
```

目前，它显示为一页，所有页脚在底部重叠。如果我注释掉位置值，它们会显示在单独的页面上，但页脚文本不会到底部。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-05T21:32:20.297

我想出了一个解决方案，它是半跨浏览器友好的，只是不同的浏览器似乎默认使用不同的打印边距。IE 似乎是 0.75 英寸，Chrome 是 0.4 英寸。它假定为 8.5x11，这使得它有点不灵活，但考虑到打印的意图，您需要为您的应用程序指定这些类型的东西。

```
<!DOCTYPE html>
<html>
<head>
    <title>Test of paging</title>
    <style type="text/css">
        @media screen {
            .page-footer, .page-break {
                display: none;
            }
        }

        @media print {
            body {
                /* Align first page to top */
                margin: 0;
            }

            .page-section {
                /* Specify physical size of page, margins may vary by browser */

                height: 9.5in; /* IE default margins are .75in */
                position: relative;
            }

            .page-footer {
                display: block;
                position: absolute;
                bottom: 0;
            }

            .page-break {
                page-break-before: always;
            }

        }
    </style>
</head>
<body>
<div class="page-section">
    <div>One</div>
    <div>Two</div>
    <div class="page-footer"><span class="footer-text">Footer one</span></div>
</div>
<div class="page-break"></div>
<div class="page-section">
    <div>Three</div>
    <div class="page-footer">Footer two</div>
</div>
</body>
</html> 
```

# php - 如何在 PHP 中添加 post 操作？

> ID：15957738
> 
> 赞同：0
> 
> 时间：2013-04-11T19:57:24.320
> 
> 标签：php, forms, action

我正在使用我在网上找到的验证系统来保护我的表格。以前用过几次，一直都用这个`mailto`函数，这次需要用到action url，不知道语法

这是验证码脚本

```
<?php 
session_start();

if( isset($_POST['submit'])) {
   if( $_SESSION['security_code'] == $_POST['security_code'] && !empty($_SESSION['security_code'] ) ) {
        // Insert you code for processing the form here, e.g emailing the submission, entering it into a database. 
        action="https://www.salesforce.com/servlet/servlet.WebToLead?encoding=UTF-8" method="POST"
        echo 'Thank you. Your info has been submitted.';
        unset($_SESSION['security_code']);
   } else {
        // Insert your code for showing an error message here
        echo 'Sorry, you have provided an invalid security code';
   }
} else {
?> 
```

它需要提交给

```
<form action="https://www.salesforce.com/servlet/servlet.WebToLead?encoding=UTF-8" method="POST"><input type="hidden" name="oid" value="XXXXXXXXXXXXXXXX" /> 
```

这是提交给我的销售人员的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T20:21:29.773

您可以使用 curl、fsockopen 或 file_get_contents 在 PHP 中发出 post 请求。推荐使用 cURL。周围有很多例子：

[https://stackoverflow.com/a/28411/286619](https://stackoverflow.com/a/28411/286619)

不要忘记启用 curl 扩展...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T20:02:43.240

我认为您应该使用 SalesForce API 而不是直接 POST。在这里你可以看到他们的文档： http: [//www.salesforce.com/us/developer/docs/api/index.htm](http://www.salesforce.com/us/developer/docs/api/index.htm)

您应该使用 SOAP 客户端向 SalesForce 发出请求，但他们有您可以使用的构建 API，因此请使用它。这是更简单的方法。

# php - 通过函数返回引用分配数组值

> ID：15957740
> 
> 赞同：1
> 
> 时间：2013-04-11T19:57:38.017
> 
> 标签：php, pass-by-reference

我想为数组元素赋值，该元素由带有引用参数的函数返回。编码：

```
function f(&$y) {
    return $y;
}

$y = '';

$x = array(
        'a' => 1,
        'b' => 2,
        'c' => f($y)
        );
var_dump($x); // 'c' is empty

$y = 3;

var_dump($x); // 'c' is still empty 
```

我很确定在这种情况下我把整个参考资料都弄错了。即使我尝试通过引用（如`function &f(&y) {}`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T20:09:02.010

如果你想通过函数调用（你也可以`$y`直接别名），那么你需要使用按引用返回（*请参阅：[返回引用](http://php.net/language.references.return.php)*），请参阅`&`函数名称前的符号：

```
function &f(&$y) {
    return $y;
} 
```

您还需要为该引用设置别名（这需要一些特殊处理以使 PHP 解析器允许这样做）：

```
$y = '';

$x = array(
        'a' => 1,
        'b' => 2,
        'c' => &${${''}=&f($y)?!1:!1},
); 
```

[看到它在行动](http://eval.in/16050)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T20:00:07.203

你应该试试

```
$x = array(
    'a' => 1,
    'b' => 2,
    'c' => &$y
    ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T20:07:49.293

首先，警告：这种代码太混乱了，只有在受到枪口威胁时才应该这样做。当他们不得不像这样调试代码时，你未来的自己会讨厌你。

也就是说，要完成这项工作，您需要“moar references”：

```
function &f(&$y) { // two ref-signs here...
    return $y;
}

$y = '';
$x = array(
    'a' => 1,
    'b' => 2,
    'c' => &f($y) // ..and one more here
); 
```

但是，上面仍然[无法编译](http://ideone.com/1nD0i0)（我不知道为什么，将在时间允许时进行调查），因为在创建数组的过程中似乎不允许这样做。但这有效：

```
$y = '';
$x = array('a' => 1, 'b' => 2);
$x['c'] = &f($y); // seems this guy needs to be alone

$y = 3;
print_r($x); 
```

**[看到它在行动](http://ideone.com/0X2tVp)**。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-11T20:05:11.857

根据快速浏览 PHP 手册，您的 array() 语法似乎缺少逗号。

```
$x = array(
    'a' => 1,
    'b' => 2,
    'c' => f($y)
    ); 
```

实际上应该是

```
$x = array(
    'a' => 1,
    'b' => 2,
    'c' => f($y),
    ); 
```

来源： http: [//php.net/manual/en/language.types.array.php](http://php.net/manual/en/language.types.array.php)

我已经很多年没有写过 PHP 了，我只是按照作者放的例子。

# cordova - 什么可以使用监听器来加载完整的页面 map.html 所以在 map.html 上使用 JavaScript

> ID：15957743
> 
> 赞同：0
> 
> 时间：2013-04-11T19:57:48.580
> 
> 标签：cordova, jquery-mobile

如果我有 index.html 和一个转到 map.html 的按钮，什么可以使用监听器来加载完整的页面 map.html 那么在 map.html 上使用 JavaScript 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:55:53.923

```
// This gets called by jQuery mobile when the page has loaded 

$(document).bind("pageload", function(event, data) { init(data.url); }); 

// Set an onload handler to call the init function 
window.onload = init; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T20:00:25.223

如果您使用纯 JavaScript，则可以依赖“加载”事件。

如果你使用 jQuery，你可以依赖 ready 事件。

# html - 如何在图片右侧获取单词？

> ID：15957753
> 
> 赞同：-1
> 
> 时间：2013-04-11T19:58:32.323
> 
> 标签：html, image, words

我是 html 的新手，我撞到了墙，试图将文字放在图片的右侧，而图片在左侧。我搜索了这个网站，发现[如何在 html/css 中的图像旁边垂直居中文本？](https://stackoverflow.com/questions/967022/how-do-i-vertical-center-text-next-to-an-image-in-html-css)代码在一定程度上起作用的地方。我有一个段落要输入，但一半段落位于图片下方，而图片位于中间。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T20:07:59.550

```
<div>
    <img src="yourimage.jpg" style="float: left; margin-right: 5px;" />
    Lorem ipsum dolor sit amet, consectetur adipiscing elit...
</div> 
```

margin-right 不是必需的，但看起来更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T20:02:48.757

如前所述，使用

```
float: left; 
```

这是一个例子：

[http://jsfiddle.net/6236Q/1/](http://jsfiddle.net/6236Q/1/)

如果您希望文本位于图片下方，请删除`overflow: hidden;`

# macos - ascii'编解码器无法解码字节...需要帮助解决输入差异

> ID：15957754
> 
> 赞同：1
> 
> 时间：2013-04-11T19:58:33.923
> 
> 标签：macos, python-2.7, ascii, decode, codec

我有一些我一直在处理的代码，它需要一个 csv 文件并将其转换为一个适当填充的 xls 文件。csv 文件是从客户网站发送给我的。我已经在他们的 8 个 csv 文件上对其进行了测试。前 7 个工作正常，我做了一些小调整以提高它的效率。这个最新的 csv 导致了一个错误。当我尝试前 7 个时，它们运行良好。我得到的错误是：

```
 Traceback (most recent call last):
  File "/Users/USER/Documents/PYTHON/IFG User Update/code/ifg_user_update.py", line 232, in <module>
    wb.save((os.path.expanduser("~/Downloads/Users_IFG_PTI")) + '.out.' + os.path.splitext((os.path.expanduser("~/Downloads/Users_IFG_PTI.xls")))[-1])
  File "/usr/local/lib/python2.7/site-packages/xlwt/Workbook.py", line 643, in save
    doc.save(filename, self.get_biff_data())
  File "/usr/local/lib/python2.7/site-packages/xlwt/Workbook.py", line 618, in get_biff_data
    shared_str_table   = self.__sst_rec()
  File "/usr/local/lib/python2.7/site-packages/xlwt/Workbook.py", line 580, in __sst_rec
    return self.__sst.get_biff_record()
  File "/usr/local/lib/python2.7/site-packages/xlwt/BIFFRecords.py", line 77, in get_biff_record
    self._add_to_sst(s)
  File "/usr/local/lib/python2.7/site-packages/xlwt/BIFFRecords.py", line 92, in _add_to_sst
    u_str = upack2(s, self.encoding)
  File "/usr/local/lib/python2.7/site-packages/xlwt/UnicodeUtils.py", line 50, in upack2
    us = unicode(s, encoding)
UnicodeDecodeError: 'ascii' codec can't decode byte 0xe2 in position 38: ordinal not in range(128) 
```

第 8 个 csv 中有 90 行。当我删除除 1 条记录之外的所有记录时，它起作用了。这让我相信有一些输入导致错误。为了解决这个问题，我在将数据从 csv 写入 xls 的每个实例周围添加了字符串标记。这次尝试失败了。当我查找其他答案时，他们通常处理 encode() 标签。我不直接使用其中的任何一个，尽管被调用的模块可能会使用它们。

有什么建议吗？谢谢你。

下面是我的代码。我正在使用 Python 2.7、Mac os x 10.8.2、

```
#!/usr/bin/env python
## Import OS and Modules
import os
import csv
import xlrd
import xlwt
import xlutils
import csv
import collections

## Define Input File from IFG
ifg_user_file = "New_PCs_to_set_up_in_marketing_database_-_4-11-2013.csv"

## Import data
data = [row for row in csv.reader(open (os.path.expanduser("~/Downloads/" + ifg_user_file),'U'))]

## Find number of rows
row_count = sum(1 for row in data)
print row_count
## Set to turn off when reaching the end of data
end_of_data = False
## Repeat user skips the write to excel portion
repeat_user = False
## y = Row to check. Start with row 2\. Skip header row. 
y=1
## Set empty list of good y values that do not repeat a user
good_y=[]
## Repeat until all data has been observed
while y < row_count:
    ## Open Existing Users list for comparison
    existing_users = open (os.path.expanduser("~/Documents/PYTHON/IFG User Update/ExistingUsersList.txt"),'r')
    ## Check potential new username against existing users list
    for line in existing_users.readlines():
        if (data[y][2]+'\n') == line:
            repeat_user = True
            break
##        print line
##        print data[y][2]
##        print repeat_user
    existing_users.close()
    ## If the user is not a repeat, add user to the list. 
    if repeat_user == False:
        existing_users = open (os.path.expanduser("~/Documents/PYTHON/IFG User Update/ExistingUsersList.txt"),'a')
        existing_users.write('\n' + data[y][2])
        existing_users.close()
        good_y.append(y)

    else:
        repeat_users_list = open (os.path.expanduser("~/Documents/PYTHON/IFG User Update/ExistingUsersList.txt"),'a')
        print "___________Repeated User_______________"
        print data[y][2]
        print "_______________________________________"
    repeat_user = False
    y+=1
    print y

#### Set New Variables #####################################
##number_of_add_users = len(good_y)
##first=[]  # x=0
##last=[]   # x=1
##email=[]  # x=2
##group=[]  # x=3
##company_web=[] # x=4
##office_phone=[] # x=5
##business_name=[]  # x=6
##address=[] # x=7
##address2=[] # x=8
##city=[] # x=9
##state=[] # x=10
##zipcode=[] # x=11
##x=0

from xlutils.copy import copy # http://pypi.python.org/pypi/xlutils
from xlrd import open_workbook # http://pypi.python.org/pypi/xlrd
from xlwt import easyxf # http://pypi.python.org/pypi/xlwt

rb = open_workbook((os.path.expanduser("~/Documents/PYTHON/IFG User Update/Users_IFG_PTI.xls")),formatting_info=True)
r_sheet = rb.sheet_by_index(0) # read only copy to introspect the file
wb = copy(rb) # a writable copy 
w_sheet = wb.get_sheet(0) # the sheet to write to within the writable copy

## Set starting point
xls_row = 7
xls_column = 0
for user in good_y:
    ## Write User Name
    w_sheet.write(xls_row, xls_column, data[user][2])
    xls_column += 1
    ## Write First Name
    w_sheet.write(xls_row, xls_column, data[user][0])
    xls_column += 1
    ## Write Last Name
    w_sheet.write(xls_row, xls_column, data[user][1])
    xls_column += 1
    ## Write Email
    w_sheet.write(xls_row, xls_column, data[user][2])
    xls_column += 1
    ## Write Password
    w_sheet.write(xls_row, xls_column, "XXXXXXXXXXXXX")
    xls_column += 1
    ## Write Company Name
    w_sheet.write(xls_row, xls_column, data[user][6])
    xls_column += 1
    ## Write User Type
    w_sheet.write(xls_row, xls_column, "Purchaser")
    xls_column += 1
    ## Write Active
    w_sheet.write(xls_row, xls_column, "Active")
    xls_column += 1
    ## Write Show Payment Options
    w_sheet.write(xls_row, xls_column, "Yes")
    xls_column += 1
    ## Write Payment Methods
    w_sheet.write(xls_row, xls_column, "Inherit from Group")
    xls_column += 2
    ## Write Calculate Sales Tax
    w_sheet.write(xls_row, xls_column, "Yes")
    xls_column += 1
    ## Write Filter
    w_sheet.write(xls_row, xls_column, "No")
    xls_column += 1
    ## Write Cost Center Options
    w_sheet.write(xls_row, xls_column, "hide cost centers")
    xls_column += 2
    ## Write Profile Admin
    w_sheet.write(xls_row, xls_column, "No")
    xls_column += 1
    ## Write Enable Edit User
    w_sheet.write(xls_row, xls_column, "Edit Password Only")
    xls_column += 1
    ## Write Use Existing Address section for shipping
    w_sheet.write(xls_row, xls_column, "Inherit From Usergroup")
    xls_column += 1
    ## Write Use Existing Address section for billing
    w_sheet.write(xls_row, xls_column, "Inherit From Usergroup")
    xls_column += 1
    ## Write User Group and Group ID
    ## Special section, determine group info based on column 3
    if data[user][3] == "xxxxxxxxxxxx":
        w_sheet.write(xls_row, xls_column, "xxxxxxxxxxxx")
        w_sheet.write(xls_row, (xls_column+1), "xxxxxxxxxxxx")
    elif data[user][3] == "xxxxxxxxxxxx":
        w_sheet.write(xls_row, xls_column, "xxxxxxxxxxxx")
        w_sheet.write(xls_row, (xls_column+1), "xxxxxxxxxxxx)
    elif data[user][3] == "xxxxxxxxxxxx":
        w_sheet.write(xls_row, xls_column, "xxxxxxxxxxxx")
        w_sheet.write(xls_row, (xls_column+1), "xxxxxxxxxxxx)
    elif data[user][3] == "xxxxxxxxxxxx":
        w_sheet.write(xls_row, xls_column, "xxxxxxxxxxxx")
        w_sheet.write(xls_row, (xls_column+1), "xxxxxxxxxxxx")
    elif data[user][3] == "xxxxxxxxxxxx":
        w_sheet.write(xls_row, xls_column, "xxxxxxxxxxxx")
        w_sheet.write(xls_row, (xls_column+1), "xxxxxxxxxxxx")
    elif data[user][3] == "xxxxxxxxxxxx":
        w_sheet.write(xls_row, xls_column, "xxxxxxxxxxxx")
        w_sheet.write(xls_row, (xls_column+1), "xxxxxxxxxxxx")
    elif data[user][3] == "xxxxxxxxxxxx":
        w_sheet.write(xls_row, xls_column, "xxxxxxxxxxxx")
        w_sheet.write(xls_row, (xls_column+1), "xxxxxxxxxxxx")
    elif data[user][3] == "xxxxxxxxxxxx":
        w_sheet.write(xls_row, xls_column, "xxxxxxxxxxxx")
        w_sheet.write(xls_row, (xls_column+1), "xxxxxxxxxxxx")
    elif data[user][3] == "xxxxxxxxxxxx":
        w_sheet.write(xls_row, xls_column, "xxxxxxxxxxxx")
        w_sheet.write(xls_row, (xls_column+1), "xxxxxxxxxxxx")
    elif data[user][3] == "xxxxxxxxxxxx":
        w_sheet.write(xls_row, xls_column, "xxxxxxxxxxxx")
        w_sheet.write(xls_row, (xls_column+1), "xxxxxxxxxxxx")
    else:
        w_sheet.write(xls_row, xls_column, "No Such User Group")
        w_sheet.write(xls_row, (xls_column+1), "Error")
    xls_column += 2
    ## Write Reset Last Activity Date
    w_sheet.write(xls_row, xls_column, "No")
    xls_column += 1
    ## Write Force Password Reset
    w_sheet.write(xls_row, xls_column, "No")
    xls_column += 1
    ## Write Edit Image Collections
    w_sheet.write(xls_row, xls_column, "No")
    xls_column += 1
    ## Write Impersonate Group ID
    w_sheet.write(xls_row, xls_column, "none")
    xls_column += 1
    ## Write Local
    w_sheet.write(xls_row, xls_column, "Inherit")
    xls_column += 1
    ## Reset for next user
    xls_row += 1
    xls_column = 0
    print "updated "+ str(data[user][2])

## Save output copy
wb.save((os.path.expanduser("~/Downloads/Users_IFG_PTI")) + '.out.' + os.path.splitext((os.path.expanduser("~/Downloads/Users_IFG_PTI.xls")))[-1]) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T20:04:38.307

问题是该输入文件中有一个非标准的 ascii 字符，特别是带有 hex value 的字符`0xe2`。如果您有非标准的 ascii，您需要删除有问题的字符或根据文件的实际编码（如 utf-8 或 iso-8859-15 或其他东西）对其进行解码。

例如

```
import codecs

filename = os.path.expanduser("~/Downloads/" + ifg_user_file)
data = [row for row in csv.reader(codecs.open(filename, 'U', encoding='utf-8'))] 
```

# xslt - XSLT：将 XML 属性转换为 XHTML 类？

> ID：15957756
> 
> 赞同：0
> 
> 时间：2013-04-11T19:58:37.260
> 
> 标签：xslt, xpath

我有一个 TEI XML 文档，其内容如下：

```
<said who="#Bernard">“I see a ring,” said Bernard, “hanging above
me.  It quivers and hangs in a loop of light.”&lt;/said>

<said who="#Susan">“I see a slab of pale yellow,” said Susan,
spreading away until it meets a purple stripe.”&lt;/said> 
```

我想像这样输出 XHTML：

```
<p class="Bernard">“I see a ring,” said Bernard, “hanging above
me.  It quivers and hangs in a loop of light.”&lt;/p>

<p class="Susan">“I see a slab of pale yellow,” said Susan,
spreading away until it meets a purple stripe.”&lt;/p> 
```

将属性值映射到 XHTML 类的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T20:13:59.507

### 样式表

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="html" version="1.0" encoding="utf-8"/>

  <!-- Match root node -->
  <xsl:template match="/">
    <html>
      <body>
        <!-- Apply child nodes -->
        <xsl:apply-templates/>
      </body>
    </html>
  </xsl:template>

  <!-- Match <said> elements... -->
  <xsl:template match="said">
    <!-- ...and transform into <p> -->
    <p>
      <!-- Apply attributes and other child nodes -->
      <xsl:apply-templates select="@* | node()"/>
    </p>
  </xsl:template>

  <!-- Match @who attributes... -->
  <xsl:template match="@who">
    <!-- ...and transform into @class attributes -->
    <xsl:attribute name="class">
      <!-- Omit the hash mark -->
      <xsl:value-of select="substring(., 2)"/>
    </xsl:attribute>
  </xsl:template>
</xsl:stylesheet> 
```

### 输入

```
<waves>
  <said who="#Bernard">“I see a ring,” said Bernard, “hanging above
  me.  It quivers and hangs in a loop of light.”&lt;/said>

  <said who="#Susan">“I see a slab of pale yellow,” said Susan,
  spreading away until it meets a purple stripe.”&lt;/said>
</waves> 
```

### 输出

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html><body>
  <p class="Bernard">“I see a ring,” said Bernard, “hanging above
  me.  It quivers and hangs in a loop of light.”&lt;/p>

  <p class="Susan">“I see a slab of pale yellow,” said Susan,
  spreading away until it meets a purple stripe.”&lt;/p>
</body></html> 
```

# html - 如何在移动网页中嵌入外部网页

> ID：15957759
> 
> 赞同：2
> 
> 时间：2013-04-11T19:58:52.317
> 
> 标签：html, jquery-mobile, mobile-website

我正在尝试在移动网页中嵌入外部网页。

我尝试在 div 中使用 iframe，它适用于少数智能手机设备，但对于少数其他设备（如注 ...）它的工作原理，但在单击外部站点的超链接时遇到问题。我能找到的外部网页区域在 Iframe 中加载了超链接，超链接提醒同样不可见，即即使滚动页面，页面移动但超链接无法点击。只能单击 iframe 中加载超链接的位置。

然后我尝试了对象，被对象的高度和宽度卡住了。确实有 100% 的宽度和高度，即使页面有更多的滚动空间，也无法在 x 和 Y 方向上进一步滚动。

第三，我尝试在 div 中使用 jquery onload()

```
http://code.jquery.com/jquery-1.7.2.min.js"></script>
<script>$("#testLoad").load("test.htm");    </script> 
```

我仍然无法解决问题。

请任何人帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-17T08:42:55.620

使用 ajax 获取 html 内容并使用 jQuery 函数 .html() 或 .text() 替换页面中的数据

# asp.net-mvc - MVC 视图 - 查询的结果不能多 次枚举

> ID：15957761
> 
> 赞同：3
> 
> 时间：2013-04-11T19:58:56.507
> 
> 标签：asp.net-mvc, razor

我有一个现有的存储过程，当它被调用时，会在一个表格中填充几周的足球赛程。

然后，用户将从下拉列表中对每个夹具进行预测，然后我希望使用模型绑定将所有预测插入在一起。

我从我的角度显示了下面的相关代码，这目前让我很头疼：

```
@model IEnumerable<PPLMVCNewOne.Models.sp_getMakeYourPredictions_Result>

@for (int i = 0; i < Model.Count(); i++)
    {
    <tr>
        <td>
            @Html.DisplayFor(m => m.ElementAt(i).Home_Team) 
```

我想要做的是添加一个索引，这样我就可以在动作结果中建模绑定。

在 html 帮助行中，我收到以下错误：

查询的结果不能多​​次枚举。

谁能给我一个正确方向的指针？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-11T20:14:36.353

当然，您使用的是`IEnumerable`，这很好，但您需要了解您正在使用什么。枚举非常适合 for 循环之类的事情。显然，它们被优化为可以*枚举*，但优化意味着你只能这样做*一次*。

由于枚举实际上并没有“自身长度”的概念（它的构建是为了吐出一个项目直到它用完项目，仅此而已）。它*可以*使用`Count`，但它必须计算它，并且是计算成员总数以枚举它们并在它们经过时计算它们的唯一方法。这意味着您刚刚运行了枚举，因此您的 for 循环没有任何用处。

解决此问题的方法是将其转换为不存在此问题的其他类型，例如列表。它不如 enumberable 高效，但您别无选择。

您可以使用执行此操作`ToList()`，然后将其保存到您将用于计数和 for 循环的 var 中，也可以从一开始就使用类似`IList<>`或`ICollection<>`代替`IEnumerable<>`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T20:13:18.040

通过调用 ToList() 让操作返回 IList 而不是 IEnumerable。

将视图更改为此

```
@model IList<PPLMVCNewOne.Models.sp_getMakeYourPredictions_Result>

@for (int i = 0; i < Model.Count(); i++)
{
<tr>
    <td>
        @Html.DisplayFor(m => m.ElementAt(i).Home_Team)

... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-24T15:06:48.973

当我将项目列表作为 IEnumerable 取回时，我不断收到此错误。我想手动检查是否从数据库返回了正确的信息，因此，当我遇到断点时，我会检查 IEnumerable 的内容。我不知道，在我阅读答案之前，我一直在阻止它在下面再次被枚举，它正在被处理的地方。

# python - 如何安装 django 1.4

> ID：15957766
> 
> 赞同：8
> 
> 时间：2013-04-11T19:59:03.383
> 
> 标签：python, django

尝试通过以下方式下载 django 时：

```
sudo pip uninstall django 
```

但是，这会下载 django 1.5 的新版本。我将如何通过 pip 强制下载 1.4 版？这是我在尝试安装时得到的：

```
imac9:site-packages pdadmin$ sudo pip install django==1.4.1
Downloading/unpacking django==1.4.1
  Running setup.py egg_info for package django

    warning: no previously-included files matching '__pycache__' found under directory '*'
    warning: no previously-included files matching '*.py[co]' found under directory '*'
  Requested django==1.4.1, but installing version 1.5.1
Installing collected packages: django
    Found existing installation: Django 1.5.1 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-04-11T20:02:09.507

这可以通过使用这个命令来完成

```
sudo pip install django==1.4 #or any desired version. 
```

应该管用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-11T19:39:19.910

使用此命令：

```
pip install django=="1.7" 
```

可能需要管理员权限。如果是这样，那么将它与 sudo 命令一起使用。

这里使用的版本是 1.7 你应该是你需要的版本。

你也可以看看这个教程：[如何安装 Django](http://jstricks.com/install-django-operating-system/)

# ruby-on-rails - ActiveRecord 查询过滤嵌套模型

> ID：15957768
> 
> 赞同：2
> 
> 时间：2013-04-11T19:59:08.093
> 
> 标签：ruby-on-rails, ruby, activerecord

说我有以下型号

```
Course has_many :students
Course has_many :lectures
Lecture has_many :topics 
```

如果我做：

```
courses = Course.find(:all, :includes => [:students, {:lectures => :topics}]) 
```

我得到所有的课程、学生、讲座和主题。

我只想获得包含某些学生的课程，然后对于每门课程，我只想获得某些讲座，但每个讲座的所有主题。

因此，假设我想获得一个名为“约翰”的学生的所有课程，但只有每门课程的 2 次最新讲座以及这 2 次讲座的所有主题。

我不明白如何将这些过滤器应用于上面的原始查询。

希望获得有关如何执行此类查询的一些指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T20:53:13.580

您将使用查询 API 来修改预先加载的内容：

```
courses = Course.includes(:students, {:lectures => :topics}).
                 where(:students => {:name => 'John'}) 
```

只为每门课程获取 2 个最近的讲座是一个重大挑战，我不相信有一个跨数据库解决方案可以在没有递归子查询来确定排名的情况下做到这一点（这将是非微不足道的数据量并取消急切加载的任何好处）。您可以确定最近的（MAX），然后是之后的下一个最近的（比原始 MAX 早的 MAX），但这种方法也将非常低效且非常混乱。

如果您可以选择特定的 DBMS，这可能是可行的。或者，选择不同的策略来确定“最近”（例如，每门课程的缓存日期，或经过的固定时间量）。

**更新**

假设您只需急切加载所有讲座并手动选择前 2 个，您可以使用[`as_json`](http://api.rubyonrails.org/classes/ActiveModel/Serializers/JSON.html#method-i-as_json)序列化程序执行此操作（对于 JSON）：

```
courses = ... # same as above
courses.each do |c|
  c.lectures = c.lectures.sort_by(&:happens_at)[-1..-2]
end.as_json(:include => [:students, {:lectures => {:include => :topics}}]) 
```

# matplotlib - 如何在matplotlib中设置轮廓标签的背景颜色？

> ID：15957774
> 
> 赞同：5
> 
> 时间：2013-04-11T19:59:34.540
> 
> 标签：matplotlib

我正在使用命令：

```
axins.clabel(c, levls, fontsize=4, fmt='%4.2f', colors= 'white') 
```

要为我的轮廓生成标签，我希望它们是白色的（colors='white' 作品），带有红色背景，我找不到是否可以为它们指定背景颜色？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-09-24T08:55:19.240

我参加聚会晚了几年，但这个答案仍在谷歌上出现，所以这是我受到@pelson 答案启发而破解的解决方案。

如果将等高线图设置为：

```
CS = ax.contour(X, Y, Z)
clabels = ax.clabel(CS) 
```

然后你可以简单地使用更新背景颜色

```
[txt.set_backgroundcolor('white') for txt in clabels] 
```

然而，边界框 ( `bbox`) 非常大，并且经常不必要地遮挡其他特征。所以最好`bbox`直接更新：

```
[txt.set_bbox(dict(facecolor='white', edgecolor='none', pad=0)) for txt in clabels] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T20:54:07.457

文本艺术家`backgroundcolor`可能是您需要的（[http://matplotlib.org/users/text_props.html](http://matplotlib.org/users/text_props.html)）。`clabel`通过属性公开文本艺术家`labelTexts`（似乎没有记录）。

类似（未经测试）：

```
clabels = ax.clabel(c, levls, color='white', ...)
[txt.set_backgroundcolor('red') for txt in clabels.labelTexts]. 
```

如果这不起作用，请使用 SSCCE 更新您的问题，我将发布一些工作代码。

高温下，

# c# - 为从数据库中提取的导航创建一个列表视图

> ID：15957777
> 
> 赞同：1
> 
> 时间：2013-04-11T19:59:42.260
> 
> 标签：c#, asp.net, listview

我是 Asp.net 的新手，目前正在尝试将 html 页面转换为 asp.net 网站。导航与 css 配合得很好，并使用无序列表进行填充。

```
<ul class="menu" id="responsive">
<li><a href="General.aspx" runat="server" id="currentGeneral"><i class="home"></i> Overview</a></li>
<li><a href="Calendarized.aspx" runat="server" id="currentCalendarized" ><i class="calendar"></i> Calendar</a></li>
</ul> 
```

现在我要转移到 asp.net 并且根据谁登录，导航会改变。

在我创建的 Site.Master

```
<asp:ListView ID="ListViewMenu" runat="server">

<LayoutTemplate>
    <ul class="menu" id="responsive" runat="server">
        <asp:PlaceHolder ID="menuContainer" runat="server" />
    </ul>
</LayoutTemplate>

<ItemTemplate>
    <li><a href="<%#Eval ("href") %>" runat="server" id="<%#Eval ("id") %>"><i class="<%#Eval ("class") %>"></i><%#Eval ("text") %></a></li>
</ItemTemplate>

</asp:ListView> 
```

然后我创建了一个存储过程，它将根据用户提取我需要的表。

```
ID    href          id              class  text
1     general.aspx  currentGeneral  home   overview 
```

然后在 Site.Master.cs 页面中，我创建了一个类来填充 page_PreRender 上的菜单

```
 void PopulateMenu()
    {
        DataAccess da = new DataAccess();
        da.AddParameter("ID", ID, DataAccess.SQLDataType.SQLInteger, 4);
        SiteMenu = da.runSPDataSet("Portal_MenuCreate");
        ListViewMenu.DataSource = SiteMenu;
        ListViewMenu.DataBind();
    } 
```

我认为这会起作用，但我得到以下

```
Parser Error: The server tag is not well formed. 
<li><a href="<%#Eval ("href") %>" runat="server" id="<%#Eval ("id") %>"><i class="<%#Eval ("class") %>"></i><%#Eval ("text") %></a></li> 
```

任何人都知道我做错了什么，也许这不是最好的方法？感谢您的任何见解。

已编辑--- id-currentGeneral 和 runat"server" 的原因是因为使用模板我需要将 ID 设置为当前页面（如果它是当前页面）（更改选项卡颜色）

```
switch (pageName)
        {
            case "General.aspx":
                currentGeneral.Attributes["class"] = "active";
                break;
            case "Calendarized.aspx":
                currentCalendarized.Attributes["class"] = "active";
                break; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T20:09:58.387

你不能`id="<%#Eval ('id') %>"`有`runat="server"`

```
<li><a href='<%#Eval ("href") %>' runat="server" id="HyperLink1">
   <i class='<%#Eval ("class") %>'></i><%#Eval ("text") %></a></li> 
```

如果您没有在服务器端访问该超链接，您甚至不需要`runat="server"`and 。`id`如果是这样，请删除两者以使您的代码干净 -

```
<li><a href='<%#Eval ("href") %>' class='<%#Eval ("id") %>'>
   <i class='<%#Eval ("class") %>'></i><%#Eval ("text") %></a></li> 
```

**仅供参考：**如果您需要 css 样式，请使用`class`而不是`id`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-11T20:04:18.953

尝试使用单引号，以便正确识别您的双引号

```
<li><a href="<%#Eval ('href') %>" runat="server" id="<%#Eval ('id') %>"><i class="<%#Eval ('class') %>"></i><%#Eval ('text') %></a></li> 
```

# ios - 存在通知时更改设备方向会损坏 UI

> ID：15957787
> 
> 赞同：2
> 
> 时间：2013-04-11T20:00:07.607
> 
> 标签：ios, objective-c, push-notification, orientation

我在我的 iPad 应用程序中订阅了来自 Apple 的推送通知。当屏幕上出现任何通知时，如果我更改设备的方向，则我的 UI 已损坏。有什么办法可以解决这个问题吗？

我从 UIView 实现而不是从 UIViewController 实现。我已经订阅了更改设备通知。我的 UI 在所有情况下都能正确显示，除非存在通知。

# c# - Nancy 查看内部服务器错误

> ID：15957791
> 
> 赞同：2
> 
> 时间：2013-04-11T20:00:19.423
> 
> 标签：c#, nancy, self-hosting

我在我的控制台应用程序中托管 Nancy，当我尝试调用视图（例如“Login.html”）时，页面给了我错误 500。这是代码：

```
public sealed class LoginModule : NancyModule
{
    private readonly DatabaseList _db = Singleton.DB;
    public LoginModule()
    {
        Get["/"] = x => View["Login.html"];
    }
} 
```

我实现了自己的引导程序，因为我需要会话：

```
public class Bootstrapper : DefaultNancyBootstrapper
{
    protected override void ApplicationStartup(TinyIoCContainer container, IPipelines pipelines)
    {
        var directoryInfo = new FileInfo(Assembly.GetExecutingAssembly().Location).Directory;
        if (directoryInfo != null)
            Environment.CurrentDirectory = directoryInfo.FullName;
        CookieBasedSessions.Enable(pipelines);
        Conventions.ViewLocationConventions.Add((viewName, model, viewLocationContext) => String.Concat("Views/", viewName));
    }
} 
```

这是我项目的树：各种路径；

*   网络控制器/
    *   登录模块.cs
    *   南希.cs
*   观看次数/
    *   登录.html

我尝试删除所有删除 CurrentDirectory、ViewLocationConventions、每种类型的路径（如 /Views/、../Views/ 等）的组合，但仍然没有。我还尝试将 Views 路径放在 WebControllers 中，甚至只放在 Index.html 文件中，仍然没有。总之，我也尝试将 Views 重命名为 Login，无事可做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T05:22:45.643

确保您的视图文件设置为复制到输出文件夹，您应该一切顺利

# c# - c#中的更新语句

> ID：15957800
> 
> 赞同：2
> 
> 时间：2013-04-11T20:00:47.340
> 
> 标签：c#, sql, ms-access, oledb

任何人都知道为什么tihs代码不起作用？程序说“无效使用 null”。在访问这个代码是工作，但不是雇用。`UPDATE cas SET cas.skupaj = CDbl([Odhod]-[Prihod])*24;`

```
try
{
    OleDbConnection conn = GetConnection();
    conn.Open();

    String MyString = @"UPDATE cas SET skupaj = CDbl(Odhod-Prihod)*24 " ;  

    OleDbCommand command = new OleDbCommand(MyString, conn);
    command.ExecuteNonQuery();
    conn.Close();
    MessageBox.Show("Uspešno dodano v PB!");
}
catch (Exception ex)
{
    MessageBox.Show(ex.Message);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T20:07:18.770

在 Access Immediate 窗口会话中，这些语句会引发错误 94, *"Invalid use of Null"*。

```
? CDbl(Null)
? CDbl(10 - Null)
? CDbl(Null - 10)
? CDbl(Null - Null) 
```

修改您的查询以确保您不提供`CDbl()`Null 值。

```
UPDATE cas
SET skupaj = CDbl(Odhod-Prihod)*24
WHERE
        Odhod Is Not Null
    AND Prihod Is Not Null 
```

OTOH，尚不清楚为什么需要将该计算值存储到`skupaj`. 您可以在需要时使用`SELECT`查询来返回它，这样您就不必在任何时候或值更改`UPDATE`时再次运行。`Odhod``Prihod`

```
SELECT CDbl(Odhod-Prihod)*24 AS skupaj
FROM cas
WHERE
        Odhod Is Not Null
    AND Prihod Is Not Null 
```

# nvidia - 回溯 5 gnome 32 位上的 nvidia 驱动程序（X 会话无法启动）

> ID：15957802
> 
> 赞同：0
> 
> 时间：2013-04-11T20:01:03.957
> 
> 标签：nvidia, gnome, drivers, xorg, backtrack-linux

我的笔记本电脑上有 2 个显卡：1-英特尔集成 HD 3000 2-Nvidia GT540m

刚刚禁用了 nouveau 驱动程序并安装了 nvidia 驱动程序（来自 nvidia.com 的官方驱动程序）

现在尝试启动 X 时，我收到错误消息：

> X 无法启动，未找到屏幕...

我可以通过删除 xorg.conf 文件来恢复我的桌面，但我想要加载 nvidia 驱动程序......

# 这是我的 xorg.0.log 文件：

```
X.Org X Server 1.7.6
X Protocol Version 11, Revision 0
Current Operating System: Linux bt 3.2.6 #1 SMP Fri Feb 17 10:40:05 EST 2012 i686
Build Date: 25 February 2012  06:59:39AM
Current version of pixman: 0.16.4
    to make sure that you have the latest version.
    (++) from command line, (!!) notice, (II) informational,
(==) Log file: "/var/log/Xorg.0.log", Time: Fri Apr 12 05:01:51 2013
(==) Using config directory: "/usr/lib/X11/xorg.conf.d"
(**) |-->Screen "Screen0" (0)
(**) |   |-->Device "Device0"
(**) |-->Input Device "Mouse0"
(==) Automatically enabling devices
    Entry deleted from font path.
    Entry deleted from font path.
    Entry deleted from font path.
    Entry deleted from font path.
    Entry deleted from font path.
    /usr/share/fonts/X11/misc,
    /var/lib/defoma/x-ttcidfont-conf.d/dirs/TrueType,
(==) ModulePath set to "/usr/lib/xorg/extra-modules,/usr/lib/xorg/modules"
(WW) Disabling Keyboard0
(II) Loader magic: 0x81f0e80
    X.Org ANSI C Emulation: 0.4
    X.Org XInput driver : 7.0
(--) using VT number 7
(--) PCI:*(0:0:2:0) 8086:0116:1462:108d Intel Corporation 2nd Generation Core Processor Family Integrated Graphics Controller rev 9, Mem @ 0xf7400000/4194304, 0xd0000000/268435456, I/O @ 0x0000f000/64
(II) Open ACPI successful (/var/run/acpid.socket)
(II) Loading /usr/lib/xorg/modules/extensions/libextmod.so
    compiled for 1.7.6, module version = 1.0.0
    ABI class: X.Org Server Extension, version 2.0
(II) Loading extension XFree86-VidModeExtension
(II) Loading extension DPMS
(II) Loading extension XVideo-MotionCompensation
(II) LoadModule: "dbe"
(II) Module dbe: vendor="X.Org Foundation"
    Module class: X.Org Server Extension
(II) Loading extension DOUBLE-BUFFER
(II) Loading /usr/lib/xorg/modules/extensions/libglx.so
    compiled for 4.0.2, module version = 1.0.0
(II) NVIDIA GLX Module  310.44  Wed Mar 27 15:19:40 PDT 2013
(II) LoadModule: "record"
(II) Module record: vendor="X.Org Foundation"
    Module class: X.Org Server Extension
(II) Loading extension RECORD
(II) Loading /usr/lib/xorg/modules/extensions/libdri.so
    compiled for 1.7.6, module version = 1.0.0
(II) Loading extension XFree86-DRI
(II) Loading /usr/lib/xorg/modules/extensions/libdri2.so
    compiled for 1.7.6, module version = 1.1.0
(II) Loading extension DRI2
(II) Loading /usr/lib/xorg/modules/drivers/nvidia_drv.so
    compiled for 4.0.2, module version = 1.0.0
(II) NVIDIA dlloader X Driver  310.44  Wed Mar 27 15:01:27 PDT 2013
(II) Primary Device is: PCI 00@00:02:0

no screens found
Please consult the The X.Org Foundation support 
 for help. 
```

# 和 /etc/default/grub 文件：

```
# If you change this file, run 'update-grub' afterwards to update
# /boot/grub/grub.cfg.

GRUB_DEFAULT=0
#GRUB_HIDDEN_TIMEOUT=0
GRUB_HIDDEN_TIMEOUT_QUIET=true
GRUB_TIMEOUT=10
GRUB_DISTRIBUTOR=`lsb_release -i -s 2> /dev/null || echo Debian`
GRUB_CMDLINE_LINUX_DEFAULT="text video=i915:modeset=1 i915.i915_enable_rc6=1 i915.lvds_downclock=1 i915.i915_enable_fbc=1 pcie_aspm=force"
GRUB_CMDLINE_LINUX=""

# Uncomment to disable graphical terminal (grub-pc only)
#GRUB_TERMINAL=console

# The resolution used on graphical terminal
# note that you can use only modes which your graphic card supports via VBE
# you can see them in real GRUB with the command `vbeinfo'
GRUB_GFXMODE=1024x768

# Uncomment if you don't want GRUB to pass "root=UUID=xxx" parameter to Linux
#GRUB_DISABLE_LINUX_UUID=true

# Uncomment to disable generation of recovery mode menu entries
#GRUB_DISABLE_LINUX_RECOVERY="true"

# Uncomment to get a beep at grub start
#GRUB_INIT_TUNE="480 440 1" 
```

只是希望这有助于找到解决方案......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-20T18:57:57.487

我刚刚找到了解决方案，应该安装 bumblebee、virtualgl、linux-headers 和 mesa-utils。所以这就是我为使其正常工作所做的工作：

```
sudo add-apt-repository ppa:bumblebee/stable # bumblebee ppa
sudo apt-get update && sudo apt-get install bumblebee virtualgl linux-headers-`uname -r` mesa-utils # update apt and install them
sudo su -c "useradd -G bumblebee USERNAME" # add the user to bumblebee group. 
```

这是我找到解决方案的链接： [nvidia optimus bumblebee](http://www.linux.org/threads/nvidia-optimus-on-linux.4415/)

希望这也可以帮助其他人......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-01T08:07:59.213

使用这个命令：`mv /etc/X11/xorg.conf /etc/X11/xorg.conf.bak`

# c++ - 从 C++ 中的 std::chrono::time_point 中提取年/月/日等

> ID：15957805
> 
> 赞同：67
> 
> 时间：2013-04-11T20:01:17.693
> 
> 标签：c++, time, c++11, chrono

如何从对象中提取**年、月、日、时、分、秒和毫秒**`std::chrono::time_point`？

我只看到了有关如何从`duration`.

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2013-04-11T20:19:01.910

您只能从`system_clock::time_point`. 这是系统提供的唯一与民用日历相关的时钟。以下是使用此时钟获取当前时间点的方法：

```
 system_clock::time_point now = system_clock::now(); 
```

然后，您可以将其转换为`time_t`：

```
time_t tt = system_clock::to_time_t(now); 
```

然后，您可以使用 C 库将 a 转换`time_t`为 a `tm`，但您必须选择是希望该转换发生在 UTC 时区还是本地时区：

```
tm utc_tm = *gmtime(&tt);
tm local_tm = *localtime(&tt); 
```

然后就可以打印出tm的组件了，例如：

```
std::cout << local_tm.tm_year + 1900 << '\n';
std::cout << local_tm.tm_mon + 1 << '\n';
std::cout << local_tm.tm_mday << '\n'; 
```

**此外**

如果您愿意，您可以利用以下非保证信息：

`system_clock`我知道的每个实现都基于[unix time](http://en.wikipedia.org/wiki/Unix_time)。即自 1970 年 UTC 以来的秒数，忽略闰秒。而且这个计数的精度通常比秒还好。这是一个提取所有这些信息的完整程序：

```
#include <chrono>
#include <ctime>
#include <iostream>

int
main()
{
    using namespace std;
    using namespace std::chrono;
    typedef duration<int, ratio_multiply<hours::period, ratio<24> >::type> days;
    system_clock::time_point now = system_clock::now();
    system_clock::duration tp = now.time_since_epoch();
    days d = duration_cast<days>(tp);
    tp -= d;
    hours h = duration_cast<hours>(tp);
    tp -= h;
    minutes m = duration_cast<minutes>(tp);
    tp -= m;
    seconds s = duration_cast<seconds>(tp);
    tp -= s;
    std::cout << d.count() << "d " << h.count() << ':'
              << m.count() << ':' << s.count();
    std::cout << " " << tp.count() << "["
              << system_clock::duration::period::num << '/'
              << system_clock::duration::period::den << "]\n";

    time_t tt = system_clock::to_time_t(now);
    tm utc_tm = *gmtime(&tt);
    tm local_tm = *localtime(&tt);
    std::cout << utc_tm.tm_year + 1900 << '-';
    std::cout << utc_tm.tm_mon + 1 << '-';
    std::cout << utc_tm.tm_mday << ' ';
    std::cout << utc_tm.tm_hour << ':';
    std::cout << utc_tm.tm_min << ':';
    std::cout << utc_tm.tm_sec << '\n';
} 
```

`duration`创建自定义模型日很方便：

```
typedef duration<int, ratio_multiply<hours::period, ratio<24> >::type> days; 
```

现在，您可以通过以下方式获得自纪元以来的时间，使其尽可能精确：

```
system_clock::duration tp = now.time_since_epoch(); 
```

然后将其截断为天，并将其减去。

然后将其截断为小时，然后减去。

继续，直到您减去秒数。

剩下的就是以 . 为单位的秒的分数`system_clock::duration`。因此，如图所示打印出该运行时间值和该值的编译时间单位。

对我来说，这个程序打印出来：

```
15806d 20:31:14 598155[1/1000000]
2013-4-11 20:31:14 
```

我的输出表明`system_clock::duration`精度为微秒。如果需要，可以将其截断为毫秒：

```
milliseconds ms = duration_cast<milliseconds>(tp); 
```

**更新**

[这个只有头文件的 C++11/14 库](http://howardhinnant.github.io/date/date.html)封装了上述工作，将客户端工作减少到：

```
#include "date.h"
#include <iostream>

int
main()
{
    // Reduce verbosity but let you know what is in what namespace
    namespace C = std::chrono;
    namespace D = date;
    namespace S = std;

    auto tp = C::system_clock::now(); // tp is a C::system_clock::time_point
    {
        // Need to reach into namespace date for this streaming operator
        using namespace date;
        S::cout << tp << '\n';
    }
    auto dp = D::floor<D::days>(tp);  // dp is a sys_days, which is a
                                      // type alias for a C::time_point
    auto ymd = D::year_month_day{dp};
    auto time = D::make_time(C::duration_cast<C::milliseconds>(tp-dp));
    S::cout << "year        = " << ymd.year() << '\n';
    S::cout << "month       = " << ymd.month() << '\n';
    S::cout << "day         = " << ymd.day() << '\n';
    S::cout << "hour        = " << time.hours().count() << "h\n";
    S::cout << "minute      = " << time.minutes().count() << "min\n";
    S::cout << "second      = " << time.seconds().count() << "s\n";
    S::cout << "millisecond = " << time.subseconds().count() << "ms\n";
} 
```

这只是为我输出：

```
2015-07-10 20:10:36.023017
year        = 2015
month       = Jul
day         = 10
hour        = 20h
minute      = 10min
second      = 36s
millisecond = 23ms 
```

**另一个更新**

这个库成长为 C++ 标准提案，现在处于 C++20 工作草案中。`system_clock::time_point`在 C++20 中从 a 中提取这些字段的语法为：

```
#include <chrono>

int
main()
{
    using namespace std::chrono;
    auto tp = system_clock::now();
    auto dp = floor<days>(tp);
    year_month_day ymd{dp};
    hh_mm_ss time{floor<milliseconds>(tp-dp)};
    auto y = ymd.year();
    auto m = ymd.month();
    auto d = ymd.day();
    auto h = time.hours();
    auto M = time.minutes();
    auto s = time.seconds();
    auto ms = time.subseconds();
} 
```

以上假设您需要 UTC 格式的这些字段。如果您更喜欢在其他时区使用它们，那也是可能的。例如，以下是如何在您计算机的当前本地时区执行此操作：

```
#include <chrono>

int
main()
{
    using namespace std::chrono;
    auto tp = zoned_time{current_zone(), system_clock::now()}.get_local_time();
    auto dp = floor<days>(tp);
    year_month_day ymd{dp};
    hh_mm_ss time{floor<milliseconds>(tp-dp)};
    auto y = ymd.year();
    auto m = ymd.month();
    auto d = ymd.day();
    auto h = time.hours();
    auto M = time.minutes();
    auto s = time.seconds();
    auto ms = time.subseconds();
} 
```

上面唯一的区别是它的构造`tp`现在具有类型`local_time`，而不是`sys_time`在 UTC 示例中。或者，可以通过这个小改动选择一个任意时区：

```
auto tp = zoned_time{"Europe/London", system_clock::now()}.get_local_time(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-06-25T14:18:32.323

一旦我想出了这个实现。可能不是最好的，但适用于我的本土项目。

`timeinfo`一个人可以得到除了毫秒和毫秒之外的一切`ms`。

```
static std::wstring GetDateTime()
{
    time_t rawtime;
    struct tm timeinfo;
    wchar_t buffer[20];

    time(&rawtime);
    localtime_s(&timeinfo, &rawtime);

    auto now = std::chrono::system_clock::now();
    auto tt = std::chrono::system_clock::to_time_t(now);
    auto nowTruncated = std::chrono::system_clock::from_time_t(tt);
    auto ms = (now - nowTruncated).count();

    wcsftime(buffer, 20, L"%Y-%m-%d %H:%M:%S", &timeinfo);

    return std::wstring(buffer) + L"." + std::to_wstring(ms).substr(0, 3);
} 
```

示例输出：

> 2021-06-25 10:18:48.295

# sql - ER 数据库建模 - 通过信用卡和/或现金付款

> ID：15957807
> 
> 赞同：1
> 
> 时间：2013-04-11T20:01:18.297
> 
> 标签：sql, database, entity-relationship

我有一个小问题正在尝试解决。任务说药物可以通过现金或信用卡或两者支付。我必须在这里识别实体和关系。我的第一个想法是通过 IS-A 层次结构来表示这一点。我的超类是实体 Payment，以及两个子类 - CreditCard 和 Cash（名称是随机的，现在不是很重要）。信用卡实体具有其独特的属性，但现金实体。没有。我必须将所有这些连接到一个销售订单实体。你可能知道应该怎么做。

# laravel - Laravel 3：我如何创建自己的助手

> ID：15957818
> 
> 赞同：0
> 
> 时间：2013-04-11T20:01:55.120
> 
> 标签：laravel, helpers, laravel-3

如何在 Laravel 中创建助手，我应该把它们放在哪里？我正在考虑类似 codeigniter 的方法：一个 helpers.php 文件和其中的一些帮助函数，我可以根据需要调用它们。

文档中没有太多关于该主题的内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T20:30:15.950

您确实可以创建自己的帮助文件。

您应该在应用程序 start.php 中要求它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T02:35:15.227

我真的取决于你在做什么，但在 Laravel 3 中，你的目标应该是将尽可能多的可重用代码部分提取到[bundles](http://laravel.com/docs/bundles)中。查看[现有的捆绑包](http://bundles.laravel.com/)，您可能会发现已经构建了适合您需求的东西（或至少是很好的示例）。

对于“助手”，您最好还是创建类并将助手函数定义为静态方法，这很干净并且通常易于遵循。

如果您不想为助手创建一个包，那么您也可以将它们放在`application/models`文件夹中，再次包装在一个类中。

[这是](http://forums.laravel.io/viewtopic.php?id=1140)来自论坛的一个帖子，其中显示了一些“助手”类型类的示例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T09:25:25.477

在库目录中创建一个类，你可以在类中添加一些静态方法，你可以像使用它一样使用它`Common::method()`，但是如果你想使用，`function()`那么将你的函数放在你的类语句之外。

例子：

```
class Common
{

}

function display_messages()
{
  exit('Yes');
} 
```

# objective-c - Objective-c How to make GUI window from terminal app

> ID：15957819
> 
> 赞同：2
> 
> 时间：2013-04-11T20:01:58.067
> 
> 标签：objective-c, xcode, macos, user-interface

Is there a way in obj-c to make a gui window, while there is no .app bundle, just extcutable? The problem is that I need a gui application(just one dialog).

I tried: Import appkit.framework into the terminal app. - crashes with tons of reasons. I decided that using x11 is not a good idea because it is not included in OS X 10.8

So, any ideas?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T20:48:12.053

Sadly you need to have a NSApplication running, but you don't need to have an app bundle.

Make sure that when you create your project you select "Foundation" as the type. Then you can set it up like this:

```
#import <Foundation/Foundation.h>
#import <AppKit/AppKit.h>

@interface MyAppDelegate : NSObject <NSApplicationDelegate>
{
    NSWindow *window;
}
@end

@implementation MyAppDelegate

-(id) init
{
    self = [super init];
    if (self)
    {
        // total *main* screen frame size //
        NSRect mainDisplayRect = [[NSScreen mainScreen] frame];

        // calculate the window rect to be half the display and be centered //
        NSRect windowRect = NSMakeRect(mainDisplayRect.origin.x + (mainDisplayRect.size.width) * 0.25,
                                     mainDisplayRect.origin.y + (mainDisplayRect.size.height) * 0.25,
                                     mainDisplayRect.size.width * 0.5,
                                     mainDisplayRect.size.height * 0.5);

        /*
         Pick your window style:
         NSBorderlessWindowMask
         NSTitledWindowMask
         NSClosableWindowMask
         NSMiniaturizableWindowMask
         NSResizableWindowMask
         */
        NSUInteger windowStyle = NSTitledWindowMask | NSMiniaturizableWindowMask;

        // set the window level to be on top of everything else //
        NSInteger windowLevel = NSMainMenuWindowLevel + 1;

        // initialize the window and its properties // just examples of properties that can be changed //
        window = [[NSWindow alloc] initWithContentRect:windowRect styleMask:windowStyle backing:NSBackingStoreBuffered defer:NO];
        [window setLevel:windowLevel];
        [window setOpaque:YES];
        [window setHasShadow:YES];
        [window setPreferredBackingLocation:NSWindowBackingLocationVideoMemory];
        [window setHidesOnDeactivate:NO];
        [window setBackgroundColor:[NSColor greenColor]];
    }
    return self;
}

- (void)applicationWillFinishLaunching:(NSNotification *)notification
{
    // make the window visible when the app is about to finish launching //
    [window makeKeyAndOrderFront:self];
    /* do layout and cool stuff here */
}

- (void)applicationDidFinishLaunching:(NSNotification*)aNotification
{
    /* initialize your code stuff here */
}

- (void)dealloc
{
    // release your window and other stuff //
    [window release];
    [super dealloc];
}

@end

int main(int argc, const char * argv[])
{

    @autoreleasepool
    {
        NSApplication *app = [NSApplication sharedApplication];
        [app setDelegate:[[[MyAppDelegate alloc] init] autorelease]];
        [app run];
    }
    return 0;
} 
```

Keep in mind that the line [app run]; is blocking so you would have to run your logic either within the application loop or on a new thread (application loop preferred).

Hope it helps.

EDIT: Boo.. I was too late!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T20:24:43.640

What you are describing should be possible without creating a .app, however you will need to run the AppKit event loop (otherwise, where would user input events come from?).

The simplest way to do this would be to get the shared NSApplication object and call its run method. You may be able to set up an event loop manually using nsrunloop, however I'm not sure whether the input sources needed are a public API.

Why do you not want a .app? It is likely that whatever you are doing will be easier if you follow the standard patterns.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T20:14:53.467

I think you should just make a cocoa application and simply drag and drop the files you need into the new application. Make sure to tick the box "add to target" and "copy items into destination. . ."

I have made many of these little helper applications that does a simple task just to help me out with something else. And this is usually the way I do it.

# node.js - 如何使猫鼬连接在全球范围内可用

> ID：15957821
> 
> 赞同：15
> 
> 时间：2013-04-11T20:02:04.603
> 
> 标签：node.js, express, mongoose

我正在使用 express 3.x 和 mongoose 3.6.4。

到目前为止，我一直在我的 express apps.js 文件中创建一个猫鼬连接，如下所示：

```
var mongoose = require('mongoose');
mongoose.connect('mongodb://127.0.0.1:27017/mytest'); 
```

然后我将我的模型分成单独的文件，如模型/用户，如下所示：

```
var mongoose = require("mongoose");
var Schema = mongoose.Schema;
var ObjectId = Schema.ObjectId;

var userSchema = new Schema({
userId: ObjectId,
givenName:String ...
});

exports.User = mongoose.model('User', userSchema); 
```

然后在多个路由文件中，我使用了 User 模型，如下所示：

```
var User = require('./models/user').User;
User.findById(id, function(err, user){ ... 
```

这对当地的发展起到了很好的作用。所有模型共享相同的连接。

但现在我想使用 mongoose.createConnection() 并创建一个可以以类似方式使用的连接池。我想在应用程序启动时建立一个连接池并将该池用于所有模型。所以，我试过这个：

```
var conn = mongoose.createConnection("localhost","dpatest", 27017,{user:"???",pass:"???"}); 
```

但模型不会自动共享连接。因此，我尝试了各种方法，例如导出连接并尝试在模型中使用它。但是，除了为每个模型设置单独的连接之外，没有任何效果。

有人可以解释如何使用 mongoose.createConnection() 创建单个连接池吗？

这是有关我的问题的更多信息：

```
/************ app.js *****************/
var http = require('http');
var path = require('path');
var express = require('express');
//these are my routing files
var auth = require('./src/auth');
var profile = require('./src/profile');
var admin = require('./src/admin');
var tx = require('./src/tx');
var system = require('./src/system');
var servicing = require('./src/servicing');

var dbUri;
var dbUser = "?????";
var dbPass = "?????";

//here are my configurations for development and production
app.configure('development', function(){
    app.set('port', 3460);
    app.use(express.errorHandler());
    dbUri = "mongodb://mongodb://127.0.0.1:27017/dpatest";
});

app.configure('production', function(){
    app.set('port', 3461);
    dbName = 'dpa';
    dbUri = "mongodb://"+dbUser+":"+dbPass+"@ds052525.mongolab.com:51437/dpa";
});

/*
this is what I was originally using for development
and want to change for deployment
*/
mongoose.connect(dbUri); 
```

这就是我打算搬到的地方：

```
var conn = mongoose.createConnection(dbUri); 
```

我的模型（5 个不同的模型）位于应用程序根目录下名为 src/models 的目录中。例如用户模型：

```
/************ user.js *************/
var mongoose = require("mongoose");
var Schema = mongoose.Schema;
var ObjectId = Schema.ObjectId;
var userSchema = new Schema({
    userId: ObjectId,
    givenName: String, ...
}); 
```

导出如下：

export.User = mongoose.model('User', userSchema);

然后，模型在各种路由文件中使用，如下所示：

```
/****************auth.js**************/
var User = require('./models/user').User;

exports.createAccount = function(req, res){
    var user = new User({});
    . . . 
    user.save(function(err, usr){

    });
}; 
```

我正在寻找一个如何用 mongoose.createConnection 替换 mongoose.connect() 并让它跨多个模块工作的具体示例。Sergey 的回答看起来很有希望，但我不明白如何在路由文件中引用模型。我试过了：

```
var User = require(../models).User 
```

但无法让它工作。它不断抛出参考错误。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T20:07:36.170

在您的模型文件夹中创建 index.js

例如

```
 module.exports = function (mongoose,  dbconn) {
        return {

            modelname:  require("./file" )(mongoose, dbconn),
            modelname2:  require("./file2" )(mongoose,  dbconn),
   };
}; 
```

然后将其加载到您的主启动文件文件中，您可以在其中通过以下方式创建数据库连接

```
var models    = require("./models")(mongoose,dbconn); 
```

模型文件夹中的示例模型文件应如下所示：

```
module.exports = function (mongoose,  dbconn) {
    /*
     * 
     */
    var schema = new mongoose.Schema({
        /**
         * field
         * @type String
         */
        field: String......
      });

  return dbconn.model("modelname", schema, "collectioname");
}; 
```

等等....

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-11-15T10:20:32.207

我知道已经有一段时间了，但我找到了这篇文章，我想知道你们对此有何看法，它看起来很优雅。 [https://productbuilder.wordpress.com/2013/09/06/using-a-single-global-db-connection-in-node-js/](https://productbuilder.wordpress.com/2013/09/06/using-a-single-global-db-connection-in-node-js/)

它基本上是说使用 Node.js 的 global.varName 机制来全局共享连接。

顺便说一句，我自己试过了，它可以无缝运行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-13T22:48:31.227

GitHub 上的这个示例项目是实现目标的一种非常简单的方法。它优雅而有效： [https](https://github.com/fbeshears/register_models) ://github.com/fbeshears/register_models 。主要代码是：

```
(function(){
  module.exports = function(){
    var mongoose = require('mongoose');
    var Schema = mongoose.Schema; 
    var files = ['kitten.js', 'comments.js'];
    var fn = 0;
            for(fn in files) {
            var path_fn = "./" + files[fn];
            var exported_model = require(path_fn);
            exported_model(mongoose, Schema);
        }

    };
})(); 
```

我在我的主应用程序目录下创建了一个名为“models”的目录，并将其放在文件夹中并要求它，然后调用 register_models();

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-02-10T19:12:59.150

我希望现在可以解决这个问题，但以防万一有人发现它有帮助。简而言之，改为

```
var conn = mongoose.createConnection(..) 
```

要求为此连接注册所有模式。意思是，而不是`User = mongoose.model(...)`你需要`User = db.model(...)`

此处链接的更多详细信息：[.createConnection 与 .connect 之间的差异](https://stackoverflow.com/a/22838614/4547081)

# google-api - Google API：如何获取生日和位置？

> ID：15957828
> 
> 赞同：1
> 
> 时间：2013-04-11T20:02:24.630
> 
> 标签：google-api

很奇怪，当我在成功 OAUTH2.0 身份验证后尝试从 Google API 获取生日时，

```
dob = response.get('birthday') 
```

我得到一个奇怪的值：

```
'0000-09-07' 
```

日期和月份似乎是正确的，但为什么年份是 0000？

我如何获得位置？是否有一个 API 规范列出了一个可以请求的所有可能的查找值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T20:08:30.977

用户很可能隐藏了自己的出生年份，这是 Google+ 上的一个选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T20:07:06.263

可能是因为用户只提供了他们出生的月份和日期，但没有提供年份。但是你在调用什么 API？[Google Contacts API](https://developers.google.com/google-apps/contacts/v3/reference#gcBirthday)显示的是该类型的响应，而`--09-07`不是`0000-09-07`您显示的值。

# javascript - 正则表达式 - 表单验证中的空字段

> ID：15957833
> 
> 赞同：0
> 
> 时间：2013-04-11T20:02:42.960
> 
> 标签：javascript, regex, validation

我有一个现有的正则表达式：

```
/^(\d*)(\.(\d*))?$|^$/ 
```

我如何添加/修改对空字段的检查 - (\s*) 到这个？- 尝试学习正则表达式，进行了搜索但没有找到合适的资源。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T20:07:58.463

首先，你的`|^$`部分是多余的。但是如果你试图禁止一个空字段，你可以试试这个：

```
/^\d*\.?\d+$/ 
```

如果你想忽略开头和结尾的空格，试试这个：

```
/^\s*\d*\.?\d+\s*$/ 
```

你的措辞有点不清楚，所以如果这不是你想要做的，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T20:12:43.987

所以你的正则表达式说：

> 从头开始匹配 - ^ - 零个或多个数字 - \d* -，后面可能跟一个点和零个或多个数字 - (.(\d*))? – 后面没有任何内容 – $，字符串结尾。或者——| – 匹配字符串的开头，然后是字符串的结尾 – ^$ –。

你必须修改它的最后一部分。代替`^$`，您可以 match `^\s*$`，读作*“匹配字符串的开头，后跟零个或多个空格，以及字符串的结尾”*。所以它匹配之前的条件（零空格意味着从头到尾）和新的条件——带有一些空格。

希望它有助于更​​好地理解正则表达式。不幸的是，我不知道 RegExp 有什么好的资源，我只使用[MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T20:43:11.787

您是否尝试过使用[www.debuggex.com](http://www.debuggex.com/?re=%5E%28?%3a%28%5Cd%2a%29%28?%3a%5C.%28%5Cd%2a%29%29?%7C%5Cs%2a%29%24&flags=m&str=%20%20%20%20%20%20%20%09%09%0A1234.34)来帮助您处理正则表达式？我认为这是您正在寻找的正则表达式：

```
^(?:(\d*)(?:\.(\d*))?|\s*)$ 
```

它将匹配一个浮点数或一些空格。请注意，浮点数的格式可能很奇怪。例如，`0000.10`会匹配。

# http - 我如何设置它以便人们访问我的 https 网站，而不是 http 版本？

> ID：15957841
> 
> 赞同：3
> 
> 时间：2013-04-11T20:02:55.200
> 
> 标签：http, https

我将我的网站设置为 http，但提高了 https 的安全性 - 问题是，搜索引擎仍然链接到 http 版本。

我如何获得它，以便如果有人访问我的 http 网站，他们会被转移到 https 版本？

该网站是 www.easy-bingo.co.uk，如果有人有任何其他提示，他们想告诉我！

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T20:09:55.463

这可以通过添加一些重写规则使用 .htaccess 文件来完成，请参阅帖子：[htaccess 重定向到 https://www](https://stackoverflow.com/questions/13977851/htaccess-redirect-to-https-www)

我不确定这将如何影响搜索引擎。

# c++ - 存储在 std::map 中的 C++ 基本迭代器

> ID：15957844
> 
> 赞同：1
> 
> 时间：2013-04-11T20:02:57.697
> 
> 标签：c++, c++11, iterator

我想就一个简单的代码示例提出一些想法：

```
class Base{

public:
  void doSomeNastyThings(int param)
  {
    IteratorInterface *iter_face = iterators[param];
    for(auto it = iter_face->begin(); it != iter_face->end(); it++)
    {
      //do another nasty things
    }
  }

protected:
  std::map<int, IteratorInterface*> iterators;
}; 
```

而且我希望从派生类中填充迭代器映射....但是我怎样才能以 STL 样式创建这样的 IteratorInterface 呢？所有迭代器都会为我提供对相同类型的访问（让我称之为“T”），但它们可以有不同的类型：

```
std::map<T>::iterator, std::vector<T>::iterator, foo<T>::iterator. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T20:16:54.820

一种方法是创建从 IteratorInterface 派生的模板类，它会用迭代器做一些讨厌的事情，实现 IteratorInterface 并为您可能希望它使用的每个迭代器提供实现。但首先你应该阅读[这篇](https://stackoverflow.com/questions/4114503/rules-for-iterator-invalidation)文章，并可能重新考虑整个想法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T20:39:49.473

这是可能的，但不推荐。

您将必须创建一个抽象基类模板，比如`BaseIteratorImpl<T>`，并为每个不同的迭代器类型创建一个具体的派生类，比如`VectorIteratorImpl<T> : public BaseIteratorImpl<T>`。您还需要创建`IteratorInterface<T>`一个保存并封装指向 的指针`BaseIteratorImpl<T>`，以便为迭代器提供熟悉的值语义。

更一般地说，而不是`VectorIteratorImpl<T>`and `ListIteratorImpl<T>`and ... 可以创建

```
class IteratorImpl<ContainerType> : 
    public BaseIteratorImpl<typename ContainerType::value_type> 
```

并使用例如`IteratorImpl<vector<double> >`。

`IteratorInterface<T>`会将所有常见的迭代器操作转发给它的`BaseIteratorImpl<T>`成员。`BaseIteratorImpl<T>`对于这些操作中的每一个，都会有一个纯虚函数。`IteratorImpl<C>`将执行这些操作。

不建议这样做，因为您将不得不编写大量代码，结果只会造成巨大的性能损失。

而不是*迭代器*，您应该使用您的*算法*（内部发生的事情）执行此操作（模板化+虚拟化`doSomeNastyThings`）。

# java - Java：我不能多次运行 JTextArea？

> ID：15957845
> 
> 赞同：0
> 
> 时间：2013-04-11T20:02:58.650
> 
> 标签：java, swing

大家好，欢迎大家，这是我的第一个问题，所以我希望这是一个好的问题。我在探索 swing API 时遇到了一个突然出现在我脑海中的问题。我基本上问自己是否可以构建一个可以使用`while()`循环并在控制台中显示多个 JTextArea 的程序，如下所示：

```
while(x<100){
    System.out.println("This is the number: " + x)
    x++;
} 
```

我希望它在 JFrame 中打印，在此处输入代码，但我似乎无法弄清楚如何。我正在尝试使用 JTextArea，但我真的不认为这是正确的方法。我尝试了标签，但这根本不起作用。这是源代码。

```
import javax.swing.*;
import java.awt.BorderLayout;
import java.awt.Container;

public class MainFrame extends JFrame{

    public static int x=0;
    public static int y = 0;
    MainFrame(String title){
        super(title);   
        // Set Layout
        setLayout(new BorderLayout());

        while(x<100){
            y++;
            x++;
            System.out.println(x);
            Container pane= getContentPane();
            JTextArea x = new TextArea("Wateva" + y);
            JButton button= new JButton("Wateva man");
            pane.add(button, BorderLayout.SOUTH);
            pane.add(x);
        }
    }
} 
```

在控制台中，x 显示每次递增 1，这意味着循环正确运行。作为初学者程序员，我能做出的唯一解释是它创建了 JTextArea，但随后它意识到 x 已更新，因此它用新的 JTextArea 覆盖旧的 JTextArea，它对每个数字都执行此操作，直到达到 100 . 我认为我使用了错误类型的 JComponent，但这就是我在这里的原因。因此，如果有人可以就如何修复给我提示或解决方案，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T20:10:33.103

欢迎阻塞事件调度线程。

除其他外，EDT 负责处理重绘请求。您不应该执行任何阻塞 EDT 的操作，相反，您应该使用类似`SwingWorker`

查看[Swing 中的并发以](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/)获取更多详细信息

**更新了示例**

```
import java.awt.BorderLayout;
import java.awt.EventQueue;
import java.util.List;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTextArea;
import javax.swing.SwingWorker;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class TestTextArea03 {

    public static void main(String[] args) {
        new TestTextArea03();
    }

    public TestTextArea03() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }

        });
    }

    public class TestPane extends JPanel {

        private JTextArea textArea;

        private TestPane() {
            setLayout(new BorderLayout());
            textArea = new JTextArea(10, 10);
            add(new JScrollPane(textArea));

            new TextWorker().execute();
        }

        public class TextWorker extends SwingWorker<Void, String> {

            @Override
            protected void process(List<String> chunks) {
                for (String text : chunks) {
                    textArea.append(text + "\n");
                }
            }

            @Override
            protected Void doInBackground() throws Exception {
                Thread.sleep(1000);
                for (int x = 0; x < 10; x++) {
                    publish(String.valueOf(x));
                    Thread.sleep(250);
                }
                return null;
            }

        }

    }

} 
```

**或摇摆计时器**

```
import java.awt.BorderLayout;
import java.awt.EventQueue;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.List;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTextArea;
import javax.swing.SwingWorker;
import javax.swing.Timer;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class TestTextArea03 {

    public static void main(String[] args) {
        new TestTextArea03();
    }

    public TestTextArea03() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }

        });
    }

    public class TestPane extends JPanel {

        private JTextArea textArea;
        private int x;

        private TestPane() {
            setLayout(new BorderLayout());
            textArea = new JTextArea(10, 10);
            add(new JScrollPane(textArea));

            Timer timer = new Timer(250, new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    x++;
                    textArea.append(String.valueOf(x) + "\n");
                }
            });
            timer.setRepeats(true);
            timer.setCoalesce(true);
            timer.start();
        }        
    }    
} 
```

# css - 水平居中图像，动态宽度，溢出隐藏父级

> ID：15957851
> 
> 赞同：2
> 
> 时间：2013-04-11T20:03:26.653
> 
> 标签：css

我有一个高度可变的父 div。内部是一个必须是其父级高度的 100% 的图像。

我可以像这样在 css 中很容易地实现这一点：

```
.parent {
    width: 640px;
    min-height: 560px;
    height: 100%;
    overflow: hidden;
}
.parent img {
    min-height: 560px;
    height: 100%;
    width: auto;
} 
```

唯一的问题是 img 总是左对齐。我如何将它集中在它的父级中？

如果我使用背景图像，图像将不会调整大小以适应父级的总高度。我不想使用 css3 background-size 属性，因为它在 ie7 和 8 中缺乏支持。

关于 stackoverflow 有一些与此相关的问题，但没有一个（我能找到）解决与可变宽度和高度图像相关的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-10T19:02:53.473

我知道这有点晚了，但是由于这个问题还没有答案，我将把我的解决方案放在这里，以帮助任何为此苦苦挣扎的人。

您将需要 2 个父 div 来实现这一点，基本上内部 div 的宽度将大于其中任何可能的图像。我们在外部 div 内水平居中，这样我们可以使用 text-align: center 来对齐图像。

```
.mask {
  width: 400px;
  overflow: hidden;
  height: 400px;
  position: relative;
}
.imgctn {
  position: absolute;
  width: 1000px;
  left: 50%;
  margin-left: -500px;
  text-align: center;
  height: 100%;
}
.imgctn img {
  height: 100%;
}
```

```
<div class="mask">
  <div class="imgctn">
    <img src="http://www.online-image-editor.com//styles/2014/images/example_image.png" />
  </div>
</div>
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T22:38:14.937

使用**文本对齐：中心；**会成功的：

```
.parent {
   text-align: center;
   width: 640px;
   min-height: 560px;
   height: 100%;
   overflow: hidden;
}

.parent img {
   min-height: 560px;
   height: 100%;
   width: auto;
} 
```

# python - 抓取的页面和抓取的项目之间的 Scrapy spider 区别

> ID：15957853
> 
> 赞同：5
> 
> 时间：2013-04-11T20:03:43.013
> 
> 标签：python, web-crawler, scrapy

我正在编写一个 Scrapy CrawlSpider，它读取第一页上的广告列表，获取一些信息，例如列表和广告 URL 的缩略图，然后向每个广告 URL 发出请求以获取其详细信息。

它在测试环境中工作和分页显然很好，但是今天尝试完整运行我在日志中意识到：

爬**取 3852**页（228 页/分钟），抓取**256**条（15 条/分钟）

我不明白 Crawled pages 和 Scraped items 之间存在如此大差异的原因。任何人都可以帮助我意识到这些物品在哪里丢失了？

我的蜘蛛代码：

```
class MySpider(CrawlSpider):
    name = "myspider"
    allowed_domains = ["myspider.com", "myspider.co"]
    start_urls = [
        "http://www.myspider.com/offers/myCity/typeOfAd/?search=fast",
    ]

    #Pagination
    rules = (
        Rule (
            SgmlLinkExtractor()
           , callback='parse_start_url', follow= True),
    )

    #1st page
    def parse_start_url(self, response):

        hxs = HtmlXPathSelector(response)

        next_page = hxs.select("//a[@class='pagNext']/@href").extract()
        offers = hxs.select("//div[@class='hlist']")

        for offer in offers:
            myItem = myItem()

            myItem['url'] = offer.select('.//span[@class="location"]/a/@href').extract()[0]
            myItem['thumb'] = oferta.select('.//div[@class="itemFoto"]/div/a/img/@src').extract()[0]

            request = Request(myItem['url'], callback = self.second_page)
            request.meta['myItem'] = myItem

            yield request

        if next_page:
            yield Request(next_page[0], callback=self.parse_start_url)

    def second_page(self,response):
        myItem = response.meta['myItem']

        loader = myItemLoader(item=myItem, response=response)

        loader.add_xpath('address', '//span[@itemprop="streetAddress"]/text()') 

        return loader.load_item() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T23:23:47.903

假设您去了第一个`start_urls`（实际上您只有一个），并且在此页面上只有一个锚链接（`<a>`）。因此，您的蜘蛛会抓取`href`此链接中的 url，并且您可以控制回调，`parse_start_url`. 在这个页面里面，你有 5000 个 div 和一个`hlist`类。假设所有 5000 个后续 URL 都返回 404，未找到。

在这种情况下，您将拥有：

*   抓取的页面：5001
*   被刮掉的物品：0

让我们再举一个例子：在您的起始 url 页面上，您有 5000 个锚点，但这些页面中没有一个（如零）有任何带有类参数的 div `hlist`。

在这种情况下，您将拥有：

*   抓取的页面：5001
*   被刮掉的物品：0

您的答案在于 DEBUG 日志输出。

# wordpress - 使用 WooCommerce 添加过滤器

> ID：15957857
> 
> 赞同：0
> 
> 时间：2013-04-11T20:04:12.953
> 
> 标签：wordpress, woocommerce

我一直试图弄清楚如何在 out_of_stock_add_to_cart_text 之后添加一些内容，但我不知道该怎么做。我目前有：

```
add_filter( 'out_of_stock_add_to_cart_text', 'ie_out_of_stock_add_to_cart_text', 1000 ); 
  function ie_out_of_stock_add_to_cart_text($content) {
  $content.='<p>Currently out of stock</p>';
return $content;
} 
```

但这所做的只是将“当前缺货”消息添加到按钮，这会形成一个巨大的按钮。我想让它在之后立即显示。

我很难过

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T20:35:02.553

您需要修改相应的模板，即`loop/add-to-cart.php`. 将其从 woocommerce 模板文件夹复制到`yourtheme/woocommerce/loop/add-to-cart.php`第 17 行（包含按钮链接的行）之后添加您自己的文本。

# c++ - + 对字符串和整数的运算符

> ID：15957860
> 
> 赞同：0
> 
> 时间：2013-04-11T20:04:16.663
> 
> 标签：c++, string, gcc

我正在使用 gcc 4.7.2

使用以下代码：

```
#include <iostream>
using namespace std;

int main()
{
    string x="hello";
    int y=1;
    x=x+y;
    cout<<x;
    return 0;
} 
```

我得到错误：

```
g++     test.cpp   -o test
test.cpp: In function ‘int main()’:
test.cpp:8:6: error: no match for ‘operator+’ in ‘x + y’
test.cpp:8:6: note: candidates are:
In file included from /usr/include/c++/4.7/bits/stl_algobase.h:68:0,
                 from /usr/include/c++/4.7/bits/char_traits.h:41,
                 from /usr/include/c++/4.7/ios:41,
                 from /usr/include/c++/4.7/ostream:40,
                 from /usr/include/c++/4.7/iostream:40,
                 from test.cpp:1:
/usr/include/c++/4.7/bits/stl_iterator.h:335:5: note: template<class _Iterator> std::reverse_iterator<_Iterator> std::operator+(typename std::reverse_iterator<_Iterator>::difference_type, const std::reverse_iterator<_Iterator>&)
/usr/include/c++/4.7/bits/stl_iterator.h:335:5: note:   template argument deduction/substitution failed:
test.cpp:8:6: note:   mismatched types ‘const std::reverse_iterator<_Iterator>’ and ‘int’
In file included from /usr/include/c++/4.7/string:54:0,
                 from /usr/include/c++/4.7/bits/locale_classes.h:42,
                 from /usr/include/c++/4.7/bits/ios_base.h:43,
                 from /usr/include/c++/4.7/ios:43,
                 from /usr/include/c++/4.7/ostream:40,
                 from /usr/include/c++/4.7/iostream:40,
                 from test.cpp:1:
/usr/include/c++/4.7/bits/basic_string.h:2362:5: note: template<class _CharT, class _Traits, class _Alloc> std::basic_string<_CharT, _Traits, _Alloc> std::operator+(const std::basic_string<_CharT, _Traits, _Alloc>&, const std::basic_string<_CharT, _Traits, _Alloc>&)
/usr/include/c++/4.7/bits/basic_string.h:2362:5: note:   template argument deduction/substitution failed:
test.cpp:8:6: note:   mismatched types ‘const std::basic_string<_CharT, _Traits, _Alloc>’ and ‘int’
In file included from /usr/include/c++/4.7/string:55:0,
                 from /usr/include/c++/4.7/bits/locale_classes.h:42,
                 from /usr/include/c++/4.7/bits/ios_base.h:43,
                 from /usr/include/c++/4.7/ios:43,
                 from /usr/include/c++/4.7/ostream:40,
                 from /usr/include/c++/4.7/iostream:40,
                 from test.cpp:1:
/usr/include/c++/4.7/bits/basic_string.tcc:694:5: note: template<class _CharT, class _Traits, class _Alloc> std::basic_string<_CharT, _Traits, _Alloc> std::operator+(const _CharT*, const std::basic_string<_CharT, _Traits, _Alloc>&)
/usr/include/c++/4.7/bits/basic_string.tcc:694:5: note:   template argument deduction/substitution failed:
test.cpp:8:6: note:   mismatched types ‘const _CharT*’ and ‘std::basic_string<char>’
In file included from /usr/include/c++/4.7/string:55:0,
                 from /usr/include/c++/4.7/bits/locale_classes.h:42,
                 from /usr/include/c++/4.7/bits/ios_base.h:43,
                 from /usr/include/c++/4.7/ios:43,
                 from /usr/include/c++/4.7/ostream:40,
                 from /usr/include/c++/4.7/iostream:40,
                 from test.cpp:1:
/usr/include/c++/4.7/bits/basic_string.tcc:710:5: note: template<class _CharT, class _Traits, class _Alloc> std::basic_string<_CharT, _Traits, _Alloc> std::operator+(_CharT, const std::basic_string<_CharT, _Traits, _Alloc>&)
/usr/include/c++/4.7/bits/basic_string.tcc:710:5: note:   template argument deduction/substitution failed:
test.cpp:8:6: note:   mismatched types ‘const std::basic_string<_CharT, _Traits, _Alloc>’ and ‘int’
In file included from /usr/include/c++/4.7/string:54:0,
                 from /usr/include/c++/4.7/bits/locale_classes.h:42,
                 from /usr/include/c++/4.7/bits/ios_base.h:43,
                 from /usr/include/c++/4.7/ios:43,
                 from /usr/include/c++/4.7/ostream:40,
                 from /usr/include/c++/4.7/iostream:40,
                 from test.cpp:1:
/usr/include/c++/4.7/bits/basic_string.h:2399:5: note: template<class _CharT, class _Traits, class _Alloc> std::basic_string<_CharT, _Traits, _Alloc> std::operator+(const std::basic_string<_CharT, _Traits, _Alloc>&, const _CharT*)
/usr/include/c++/4.7/bits/basic_string.h:2399:5: note:   template argument deduction/substitution failed:
test.cpp:8:6: note:   mismatched types ‘const _CharT*’ and ‘int’
In file included from /usr/include/c++/4.7/string:54:0,
                 from /usr/include/c++/4.7/bits/locale_classes.h:42,
                 from /usr/include/c++/4.7/bits/ios_base.h:43,
                 from /usr/include/c++/4.7/ios:43,
                 from /usr/include/c++/4.7/ostream:40,
                 from /usr/include/c++/4.7/iostream:40,
                 from test.cpp:1:
/usr/include/c++/4.7/bits/basic_string.h:2415:5: note: template<class _CharT, class _Traits, class _Alloc> std::basic_string<_CharT, _Traits, _Alloc> std::operator+(const std::basic_string<_CharT, _Traits, _Alloc>&, _CharT)
/usr/include/c++/4.7/bits/basic_string.h:2415:5: note:   template argument deduction/substitution failed:
test.cpp:8:6: note:   deduced conflicting types for parameter ‘_CharT’ (‘char’ and ‘int’)
In file included from /usr/include/c++/4.7/bits/stl_algobase.h:68:0,
                 from /usr/include/c++/4.7/bits/char_traits.h:41,
                 from /usr/include/c++/4.7/ios:41,
                 from /usr/include/c++/4.7/ostream:40,
                 from /usr/include/c++/4.7/iostream:40,
                 from test.cpp:1:
/usr/include/c++/4.7/bits/stl_iterator.h:904:5: note: template<class _Iterator, class _Container> __gnu_cxx::__normal_iterator<_Iterator, _Container> __gnu_cxx::operator+(typename __gnu_cxx::__normal_iterator<_Iterator, _Container>::difference_type, const __gnu_cxx::__normal_iterator<_Iterator, _Container>&)
/usr/include/c++/4.7/bits/stl_iterator.h:904:5: note:   template argument deduction/substitution failed:
test.cpp:8:6: note:   mismatched types ‘const __gnu_cxx::__normal_iterator<_Iterator, _Container>’ and ‘int’
make: *** [test] Error 1 
```

而有了这个：

```
#include <iostream>
using namespace std;

int main()
{
    string x="hello";
    int y=1;
    x+=y;
    cout<<x;
    return 0;
} 
```

我得到输出：

![在此处输入图像描述](https://i.stack.imgur.com/a2K6q.png)

为什么在第二种情况下会出现这种奇怪的行为？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T20:24:37.280

`operator+=`之所以有效，是因为它是模板类实例化的非模板方法`std::string`（`std::string`是模板实例化的 typedef `std::basic_string`）。它做了一些非常出乎意料的事情，将其`int`转换为 a `char`，然后将其视为一个字符。

`operator+`不起作用，因为免费的相应重载`operator+`是：

```
template<class _CharT, class _Traits, class _Alloc>
std::basic_string<_CharT, _Traits, _Alloc>
  std::operator+(
    const std::basic_string<_CharT, _Traits, _Alloc>&,
    _CharT
  ) 
```

`string`它对类型*和*标量类型进行类型推导`char`。这两种类型扣除的权重相等，并且两者都没有一致的类型扣除！（对于`std::string`，它是一个`std::basic_string`with `_CharT`= `char`，而对于`int`，它只会匹配上面的签名 if `_CharT`= `int`）

在您的情况下，您的标量`char`类型是`int`，而您`std::string`的是`std::basic_string< char, /*...*/ >`- 并且`char`不`int`匹配！

模板中的特定错误在这里：

```
/usr/include/c++/4.7/bits/basic_string.h:2415:5: note: template<class _CharT, class _Traits, class _Alloc> std::basic_string<_CharT, _Traits, _Alloc> std::operator+(const std::basic_string<_CharT, _Traits, _Alloc>&, _CharT)
/usr/include/c++/4.7/bits/basic_string.h:2415:5: note:   template argument  deduction/substitution failed:
test.cpp:8:6: note:   deduced conflicting types for parameter ‘_CharT’ (‘char’ and ‘int’) 
```

`string += int`我们可以通过更改`operator+=`为具有类似规则的模板函数来禁用。这可能不那么令人惊讶。但这不是标准所说的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T20:08:20.923

运算符 + 仅用于字符串-字符串连接，而运算符 += 不仅可以附加到现有字符串，还可以附加 char* 和 char。

operator+= 有一个重载版本，它获取 char 并将这个 char 附加到字符串中。您的情况下的 int 被转换为 char 并附加到字符串。这就是你在输入结束时得到这个奇怪字符的方式。

您应该使用 sstream 将 int 附加到字符串。看这里：[http ://www.cplusplus.com/reference/ostream/ostream/operator%3C%3C/](http://www.cplusplus.com/reference/ostream/ostream/operator%3C%3C/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T20:44:23.070

不能加上 string(x="hello") 和 int(y) 类型。

# eclipse-emf - Acceleo 独立 - 第一个参数是代理

> ID：15957861
> 
> 赞同：1
> 
> 时间：2013-04-11T20:04:17.420
> 
> 标签：eclipse-emf, acceleo

看起来我在问一个以前已经问过的问题，但是其他论坛帖子中指出的解决方案对我不起作用。

我正在尝试独立运行 Acceleo 项目。

```
public void registerPackages(ResourceSet resourceSet) {
    super.registerPackages(resourceSet);

    if(!isInWorkspace(PSMAndroid.PSMAndroidPackage.class)){
        System.out.println("uri: "+PSMAndroid.PSMAndroidPackage.eNS_URI); 
            resourceSet.getPackageRegistry().put(PSMAndroid.PSMAndroidPackage.eNS_URI, PSMAndroid.PSMAndroidPackage.eINSTANCE);
    }
} 
```

并且：

```
public void registerResourceFactories(ResourceSet resourceSet) {
    super.registerResourceFactories(resourceSet);
    resourceSet.getResourceFactoryRegistry().getExtensionToFactoryMap().put("psmandroid",new XMIResourceFactoryImpl()); 
```

}

该模块如下所示：

```
[module componentModule('org.colpaert.mathias.PSMAndroid')] 
```

我收到以下错误：

> org.eclipse.acceleo.engine.AcceleoEvaluationException：名为“generateModel”的主模板的第一个参数的类型是代理。

我查看了其他帖子，但没有一个对我有用。（[这里](http://www.eclipse.org/forums/index.php/t/225929/)和[这里](http://dentrassi.de/2011/08/11/struggling-with-acceleo-3-0-after-eclipse-3-7-upgrade/)）

生成器在作为“acceleo 应用程序”启动时工作，没有上面的代码行。当我添加这些行时，作为 java 应用程序运行，我得到了上面的错误。但是，当我再次尝试作为“acceleo 应用程序”运行时，出现以下错误：

![错误](https://i.stack.imgur.com/40iqb.png)

所以这不再起作用了。

我应该怎么办？

额外信息：我在我的 acceleo 生成项目的构建路径属性中添加了 ecore 模型（带有模型和 genmodel 等的项目）作为项目参考。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T15:23:12.237

问题出在我的元模型 URI 中。元模型是使用 ecore 定义的，您应该始终将“http://”放在元模型 URI 前面！

我的元模型的名称是：org.colpaert.mathias.PSMAndroid，它是在我的 acceleo 模块中导入的，如下所示：

> [模块模型('org.colpaert.mathias.PSMAndroid')/]

这导致 acceleo 在相对于模块文件的路径中查找元模型。在独立版本中，编译后，这只是 /bin 文件夹。

我更改了我的 ecore 元模型 URI，重新生成了 genmodel（等）。接下来我将 acceleo 模块更改为：

> [模块模型(' [http://org.colpaert.mathias.PSMAndroid](http://org.colpaert.mathias.PSMAndroid) ')/],

清理解决方案，重新编译并且它工作。

非常感谢 Stéphane Bégaudeau，他在这里解决了这个[问题](http://www.obeonetwork.com/group/acceleo-fr/forum/topics/stand-alone-type-of-parameter-is-proxy?commentId=6359481%3aComment:40975&xg_source=msg_com_gr_forum)（法语版）

# javascript - 在 html 按钮单击上运行 PHP 函数

> ID：15957862
> 
> 赞同：11
> 
> 时间：2013-04-11T20:04:18.813
> 
> 标签：javascript, php, html, ajax, button

单击按钮时，我需要运行一些 PHP 函数。我知道这不应该是 php 的用途，而 js 应该这样做，但是当用户询问时，我的函数在从服务器收集数据时正在做什么。具体来说，它获取一些用户数据并将其写入文件，用户应决定将收集哪些数据。
我怎样才能做到这一点？我看到了[在按钮单击时运行 PHP 文件](https://stackoverflow.com/q/8552945/1786117)的帖子，但我仍然不确定如何使用它。
我正在学习，所以请不要太苛刻

我已经尝试`onclick()`了各种各样的东西，但它并没有带来任何有用的东西

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-11T20:06:24.533

每当您通过 HTTP 请求（无论是 GET、POST、PUT）访问它时，都会运行一个 php 文件。

您可以使用 JQuery/Ajax 在单击按钮时发送请求，甚至只需更改浏览器的 URL 以导航到 php 地址。

*根据在 POST/GET 中发送的数据，您可以让 switch 语句运行不同的功能。*

## 通过 GET 指定函数

您可以在此处使用代码：[如何从存储在变量中的字符串调用 PHP 函数](https://stackoverflow.com/questions/1005857/how-to-call-php-function-from-string-stored-in-a-variable)以及 switch 语句，以根据发送的数据自动调用适当的函数。

所以在 PHP 方面你可以有这样的东西：

```
<?php

//see http://php.net/manual/en/function.call-user-func-array.php how to use extensively
if(isset($_GET['runFunction']) && function_exists($_GET['runFunction']))
call_user_func($_GET['runFunction']);
else
echo "Function not found or wrong input";

function test()
{
echo("test");
}

function hello()
{
echo("hello");
}

?> 
```

并且您可以使用地址栏作为测试发出最简单的获取请求：

```
http://127.0.0.1/test.php?runFunction=hellodddddd 
```

结果是：

```
Function not found or wrong input

http://127.0.0.1/test.php?runFunction=hello 
```

结果是：

```
hello 
```

## 发送数据

**通过 JQuery 获取请求**

见：[http ://api.jquery.com/jQuery.get/](http://api.jquery.com/jQuery.get/)

```
$.get("test.cgi", { name: "John"})
.done(function(data) {
  alert("Data Loaded: " + data);
}); 
```

**通过 JQuery 的 POST 请求**

见：[http ://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)

```
$.post("test.php", { name: "John"} ); 
```

**通过 Javascript 位置获取请求**

见：[http ://www.javascripter.net/faq/buttonli.htm](http://www.javascripter.net/faq/buttonli.htm)

```
<input type=button 
value="insert button text here"
onClick="self.location='Your_URL_here.php?name=hello'"> 
```

## 读取数据 (PHP)

请参阅 PHP Turotial 阅读帖子并获取：[http ://www.tizag.com/phpT/postget.php](http://www.tizag.com/phpT/postget.php)

## 有用的链接

[http://php.net/manual/en/function.call-user-func.php](http://php.net/manual/en/function.call-user-func.php) [http://php.net/manual/en/function.function-exists.php](http://php.net/manual/en/function.function-exists.php)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-11T20:06:49.883

如果您想发出服务器请求，您应该使用 AJAX，这样您就可以将所需的参数发送到服务器，它可以使用这些参数运行您想要的任何 php。

**纯javascript示例：**

```
<input type="text" id="name" value="..."/>
<input type="text" id="location" value="..."/>
<input type="button" onclick="ajaxFunction();" value="Submit" />
<div id="ajaxDiv"></div>
<script type="text/javascript">    
    function ajaxFunction(){
        var ajaxRequest;  // The variable that makes Ajax possible!

        try{
            // Opera 8.0+, Firefox, Safari
            ajaxRequest = new XMLHttpRequest();
        } catch (e){
            // Internet Explorer Browsers
            try{
                ajaxRequest = new ActiveXObject("Msxml2.XMLHTTP");
            } catch (e) {
                try{
                    ajaxRequest = new ActiveXObject("Microsoft.XMLHTTP");
                } catch (e){
                    // Something went wrong
                    alert("Your browser broke!");
                    return false;
                }
            }
        }
        // Create a function that will receive data sent from the server
        ajaxRequest.onreadystatechange = function(){
            if(ajaxRequest.readyState == 4){
                var ajaxDisplay = document.getElementById('ajaxDiv');
                ajaxDisplay.innerHTML = ajaxRequest.responseText;
            }
        }
        var name = document.getElementById('name').value;
        var location = document.getElementById('location').value;
        var queryString = "?name=" + name + "&location=" + location;
        ajaxRequest.open("POST", "some.php" + queryString, true);
        ajaxRequest.send(null); 
    }
</script> 
```

**jQuery Ajax 示例： http:** [//api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

```
$.ajax({
  type: "POST",
  url: "some.php",
  data: { name: "John", location: "Boston" }
}).done(function( msg ) {
  alert( "Data Saved: " + msg );
}); 
```

您可以拥有一个文件，其中包含调用的函数，例如 functions.php

函数.php

```
<?php
  myFunction($Name, $Location) {
      // etc...
  }
  myFunction2() {
  }
  // ... many functions
?> 
```

**一些.php**

```
<?php include("functions.php");    
$Name = $_POST['name'];
$Location = $_POST['location'];

myFunction($Name, $Location);

// make what you want with these variables...?> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-11T20:08:41.960

使用ajax，一个简单的例子，

**HTML**

```
<button id="button">Get Data</button> 
```

**Javascript**

```
var button = document.getElementById("button");

button.addEventListener("click" ajaxFunction, false);

var ajaxFunction = function () {
    // ajax code here
} 
```

或者查看`jquery ajax` [http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-10-13T08:31:07.493

```
<?php
if (isset($_POST['str'])){
function printme($str){
echo $str;
}

printme("{$_POST['str']}");
}
?>
<form action="<?php $_PHP_SELF ?>" method="POST">
<input type="text" name="str" /> <input type="submit" value="Submit"/>
</form> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-11T20:07:27.133

在您的 PHP 文件上使用 AJAX 请求，然后在您的页面上显示结果，无需重新加载。

[http://api.jquery.com/load/](http://api.jquery.com/load/) 如果您不需要任何 POST 数据，这是一个简单的解决方案。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-11T20:08:13.117

这取决于您要运行什么功能。如果您需要在服务器端完成某些操作，例如查询数据库或在会话中设置某些内容或在客户端无法完成的任何操作，则需要 AJAX，否则您可以使用 JavaScript 在客户端完成。当您可以在客户端做您需要做的事情时，不要让服务器工作。

jQuery 提供了一种简单的 ajax 方法： http: [//api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# javascript - 选择以“abc”开头并以“xyz”结尾的元素

> ID：15957868
> 
> 赞同：2
> 
> 时间：2013-04-11T20:04:41.633
> 
> 标签：javascript, jquery, dom, jquery-selectors

我的页面中有 ID 为“abc_1_2_3_xyz”的元素。如何在 Jquery 中选择以“abc”开头并以“xyz”结尾的元素？

```
$('div[id^="abc"], div[id$="xyz"]'); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T20:06:54.137

您可以使用 2 个属性选择器。

```
$('div[id^="abc"][id$="xyz"]'); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-11T20:06:55.080

尝试以下操作：

```
$('div[id^="abc"][id$="xyz"]'); 
```

[http://api.jquery.com/multiple-attribute-selector/](http://api.jquery.com/multiple-attribute-selector/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T20:06:54.567

使用过滤器：

```
$('div')
    .filter(function() {
        return this.id.match(/^abc+xyz$/);
    })
    .html("Matched!")
; 
```

# hadoop - 为什么 BytesWritable.setSize(size) 将字节空间设为 1.5*size？

> ID：15957870
> 
> 赞同：2
> 
> 时间：2013-04-11T20:04:49.313
> 
> 标签：hadoop

我正在使用hadoop编写程序。我的问题代码如下（代码在映射器中）：

```
byte[] tmp = new byte[2];
tmp[0] = 0x01;
tmp[1] = 0x02;
BytesWritable outputKey = new BytesWritable();
outputKey.set(tmp, 0, 2); 
```

然而，当我操作从 mapper 得到的 reducer 中的 key 时，却让我大吃一惊：

```
byte[] reducerKey = key.getBytes(); 
```

reducerKey 如下：

```
reducerKey[0] -> 0x01;
reducerKey[1] -> 0x02;
reducerKey[2] -> 0x00; 
```

为什么我输入的 tmp 是 2 个字节的长度，但是当我得到时，它变成了 3 个字节的长度。

然后我阅读了 BytesWritable.setSize(size) 的源代码，我发现了这个：

```
public void setSize(int size) {
 if (size > getCapacity()) {
  setCapacity(size * 3 / 2);
 }
this.size = size;} 
```

那么当字节写入BytesWritable时，为什么数据结构会为byte[]创建一个1.5*size的空间呢？我认为这是浪费空间，因为 0.5 * 大小的空间是无用的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T06:24:08.613

This is a common programming practice to amortize the cost of [dynamic array](http://en.wikipedia.org/wiki/Dynamic_array) resizes.

Now why it isn't an issue, and a good default behavior, for Hadoop writables ?

1.  Writable objects are usually singletons since they can be, and are, reused. You usually want to size them to fit your largest buffer. Creating a new Writable each time, waste time and can put pressure on the GC. It makes sense to make them a little larger than the largest already used buffer.
2.  If you want to avoid the extra room you can use the [BytesWritable(byte[] bytes)](http://grepcode.com/file/repository.cloudera.com/content/repositories/releases/com.cloudera.hadoop/hadoop-core/0.20.2-737/org/apache/hadoop/io/BytesWritable.java#52) constructor or [setCapacity](http://grepcode.com/file/repository.cloudera.com/content/repositories/releases/com.cloudera.hadoop/hadoop-core/0.20.2-737/org/apache/hadoop/io/BytesWritable.java#117). Please note that the constructor is much more efficient than `set()` since it does not have to copy the data. Only two references have to be set.

# c - 什么时候需要调用 git_remote_update_tips？

> ID：15957871
> 
> 赞同：1
> 
> 时间：2013-04-11T20:04:56.317
> 
> 标签：c, git, libgit2

我一直在使用类似于libgit2的[fetch 示例的 git fetch 功能，但我遇到了一些问题。](http://libgit2.github.com/libgit2/ex/HEAD/fetch.html)提供的示例似乎对我不起作用。具体来说，`git_remote_update_tips`返回 -1 并`giterr_last`表示这是因为我已与遥控器断开连接。我尝试重新排序调用，所以`git_remote_update_tips`先来，但这会导致访问冲突。

我发现 API 文档和源代码在这方面对我来说不是很有启发性 - 我只是想知道在某处是否有指导或很好的解释来说明这个函数的确切作用以及何时需要调用它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T22:37:31.037

事实证明，对图书馆一部分的期望已经改变。遥控器头现在被存储，直到您释放遥控器，因此您可以在断开连接后更新提示，如示例中所示，现在再次工作。

还有一个没有 fetch refspecs 的远程错误，这会出现段错误，`git_remote_update_tips()`我假设这是你使用的。

这两个问题都已修复。

# android - 为 android 构建 ltrace

> ID：15957874
> 
> 赞同：2
> 
> 时间：2013-04-11T20:05:08.367
> 
> 标签：android, ltrace

我正在尝试为 android 构建 ltrace。我尝试了几种方法都没有奏效......

我能够使用 crosstool-ng 的 arm-unknown-linux-gnueabi 和

```
./configure -host=arm-linux-gnueabi -target arm-linux-gnueabi CC=/path/to/toolchain/bin/arm-unknown-linux-gnueabi-gcc -prefix=/path/to/destination/folder 
```

但是当我尝试在 android 上执行该 bin 时，我得到：

```
./ltrace: not found 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-03T13:56:47.733

您可能对 ltrace 二进制文件中的动态链接器有错误的路径。在 android 上，链接器位于 /system/bin/linker 中。默认情况下，路径为 /bin/ld-linux.so。可行的方法是移植 ltrace 以使用 Android NDK，使用 Android NDK 构建一些示例代码并找出所有构建标志，静态链接，或者只是找到一个工作的预构建 ltrace。我现在正在解决这个问题，当我有结果时会发布。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T20:21:02.497

看起来可执行位没有设置？您可以通过做检查`ls -l ltrace`，如果需要，使用`chmod a+x ltrace`.

# c++ - 使用函数参数重塑动态数组

> ID：15957875
> 
> 赞同：2
> 
> 时间：2013-04-11T20:05:08.527
> 
> 标签：c++, openacc

今天我发现这是在一家公司给我的示例文件中：

```
void mySgemm( int m, int n, int k, float alpha, float beta, float a[m][n],   float b[n][k], float c[m][k], int accelerate ) 
```

调用：

```
a_cpu = malloc(..);
b_cpu = malloc(..);
c_cpu = malloc(..);
mySgemm(m, n, k, a, b, a_cpu, b_cpu, c_cpu, true); 
```

我无法编译自己的类似示例，坦率地说，我什至从未见过有人采用动态数组并使用函数参数本身对其进行整形。

这是合法电话吗？

* * *

令我惊讶的是，在`mySgemm`他们访问的函数中`a`，`b`,`c`作为双数组，所以数组本质上是被重塑的！？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T20:14:55.360

不，它不是有效的 C++。

我猜正式参数声明会在 c99 中作为可变参数数组传递，但我不太确定这些参数的实际参数是否会被接受

# python - 在 get_absolute_url 中反向返回一个空字符串

> ID：15957879
> 
> 赞同：1
> 
> 时间：2013-04-11T20:05:19.667
> 
> 标签：python, django

我正在尝试在我的一个模型中对 get_absolute_url 使用反向。但是，它返回空白字符串。

网址.py

```
url(
    regex=r'^$',
    view=SocietyView.as_view(),
    name='society',
),
url(
    regex=r'^(?P<tagname>[\w ]+)/?$',
    view=SocietyView.as_view(),
    name='society_with_tag',
), 
```

模型.py

```
class Tag(models.Model):
    name = models.CharField(max_length=64, unique=True)
    posts = models.ManyToManyField(Post, related_name='tags', null=True, blank=True)

    def __unicode__(self):
        return self.name

    def get_absolute_url(self):
        return reverse("society_with_tag", kwargs={"tagname": self.name}) 
```

模板.html

```
<a href="{{ tag.get_absolute_url }}">
    {{ tag.name }}
</a> 
```

结果.html

```
<a href="">
    tag
</a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T02:28:29.250

你必须提供`app_name`

```
@property
def get_absolute_url(self):
    return reverse("app_name:society_with_tag", args=[self.name]) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T02:36:18.603

确保您正在验证标签名称，以便它始终与您的正则表达式匹配`[\w ]+`

否则，您可以使用更通用的正则表达式`[^/]+`来匹配任何内容，直到下一个`/`

例如，在您的 urls.py 中，使用：

```
url(r'^(?P<tagname>[^/]+)/$', SocietyView.as_view(),
    name='society_with_tag'), 
```

*请注意，您只需要“/？”* [如果您将APPEND_SLASH](https://docs.djangoproject.com/en/dev/ref/settings/#append-slash) *的默认值更改**为 False*

在你的models.py中：

```
@models.permalink
def get_absolute_url(self):
    return ('society_with_tag', [self.name]) 
```

请记住，如果您使用[URL 命名空间](https://docs.djangoproject.com/en/dev/topics/http/urls/#url-namespaces)，则需要将前缀添加到视图名称：

```
@models.permalink
def get_absolute_url(self):
    return ('app_name:society_with_tag', [self.name]) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T20:25:00.987

I have no idea why but removing ',' in the end solved this problem.

Both catherine and caio gave me great answers but since I am not using 1.5, that wasn't it.

I changed

```
def get_absolute_url(self):
    return reverse("society_with_tag", args=[self.name,]) 
```

into

```
def get_absolute_url(self):
    return reverse("society_with_tag", args=[self.name]) 
```

# ios - 以编程方式初始化导航控制器堆栈

> ID：15957881
> 
> 赞同：0
> 
> 时间：2013-04-11T20:05:25.373
> 
> 标签：ios, ios5

这是按钮按下的代码：

```
- (IBAction)newPoint:(id)sender {
    [self.tabBarController setSelectedIndex:1];

    UIViewController *vc = [self.storyboard instantiateViewControllerWithIdentifier:@"navid"];
    UIViewController *tblvc = [self.storyboard instantiateViewControllerWithIdentifier:@"tblid"];

    UINavigationController *nvc1 = self.tabBarController.viewControllers[1];
    [nvc1 pushViewController:tblvc animated:NO];
    [nvc1 pushViewController:vc animated:NO];
} 
```

这是我的故事板 ![在此处输入图像描述](https://i.stack.imgur.com/UzTtZ.png)

这是我得到的例外：

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'Pushing a navigation controller is not supported' 
```

我想要实现的是在点击按钮时显示最右边的视图控制器（在情节提要中）。然后我希望导航控制器的后退按钮进入根视图控制器，就像我手动到达那个控制器一样。

为此，我更改为第二个选项卡（因为按钮位于第一个选项卡上），然后我尝试初始化导航控制器。但是我可能缺少一些东西......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T20:20:56.160

确保在故事板中正确的视图控制器上设置了故事板 ID。对我来说，它看起来像

```
UIViewController *vc = [self.storyboard instantiateViewControllerWithIdentifier:@"navid"]; 
```

或者

```
UIViewController *tblvc = [self.storyboard instantiateViewControllerWithIdentifier:@"tblid"]; 
```

正在创建 UINavigation 控制器的新实例。您可以使用以下方法确认这一点

```
 - (IBAction)newPoint:(id)sender {
        [self.tabBarController setSelectedIndex:1];

        UIViewController *vc = [self.storyboard instantiateViewControllerWithIdentifier:@"navid"];
        UIViewController *tblvc = [self.storyboard instantiateViewControllerWithIdentifier:@"tblid"];

        NSLog(@"vc - %@",NSStringFromClass([vc class]));
        NSLog(@"tblvc - %@",NSStringFromClass([tblvc class]));

        UINavigationController *nvc1 = self.tabBarController.viewControllers[1];
        [nvc1 pushViewController:tblvc animated:NO];
        [nvc1 pushViewController:vc animated:NO];
    } 
```

然后在调试器中检查类名。UINavigationController（或子类）中的哪一个都是问题所在。

# javascript - 循环遍历dict内的json数组

> ID：15957882
> 
> 赞同：1
> 
> 时间：2013-04-11T20:05:31.880
> 
> 标签：javascript, jquery, json

我真的很讨厌 javascript，但你必须学习。我试图通过一个 json 字符串循环来构建一个表。它正在工作（有点）。但是一件是行不通的。我尝试循环遍历一组布尔值。如果是真的，添加一个带有文本“yes”的列，如果它是假的，添加一个带有“no”的列。但那部分行不通。它根本不会添加任何值！

非常感谢我的代码的其他建议：

```
var jsonstr = '{"no_of_places": 4, "teams": {"Player 1": {"done": [true, true, true, false], "time": null},    "Player 2": {"done": [true, true, true, true], "time": "0 dagar 1:10:21"}, "Player 3": {"done": [true, true, true, true], "time": "0 dagar 2:47:34"}}}';

$(document).ready(function () {
    var result = jQuery.parseJSON(jsonstr);
    var theadTr = $('.scorestable thead tr');

    theadTr.append('<th>Team</th>');
    // Adds one header for each place
    for (var i = 0; i < result.no_of_places; i++) {
        theadTr.append('<th>' + (i + 1) + '</th>');
    }

    // Add teams and their result.
    $.each(result.teams, function (index, value) {
        var row = ['<tr><td>', index, '</td><td>'];
        // Add if place is found or not.
        $(this.done).each(function () {
            if (this === true) {
                row.concat(['<td>yes</td>']);
            } else {
                row.concat(['<td>no</td>']);
            }
        });

        $('.scorestable tbody').append(row.join('') + '</tr>');
    });
}); 
```

简单的 HTML 模板：

```
<p></p>
<table class="scorestable">
    <thead>
        <tr></tr>
    </thead>
    <tbody></tbody>
</table> 
```

### 提示（或自我注释，如果你愿意）

1.  我真的从 Kevin B 的这个简单片段中学到了很多：

    ```
    $.each(["foo","bar","foobar"],function(i,val){
       console.log(typeof this,typeof i,typeof val); 
     });

     // OUTPUTS:
     // ========
     // object number string
     // object number string
     // object number string 
    ```

2.  数组在 javascript 中是不可变的（如果我使用错误的术语，请编辑）。

    ```
    // So instead of:
    origArray.concat(['more', 'values']);

    // I need to write:
    origArray = origArray.concat(['more', 'values']); 
    ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T20:09:22.047

您添加了额外的 td [JSFIDDLE](http://jsfiddle.net/cx3VA/9/)

```
$.each(result.teams, function (index, value) {
        var row = ['<tr><td>', index, '</td>']; // extra td
        // Add if place is found or not.
        $(this.done).each(function () {
            if (this === true) {
                row = row.concat(['<td>yes</td>']);
            } else {
                row = row.concat(['<td>no</td>']);
            }
        });

        $('.scorestable tbody').append(row.join('') + '</tr>');
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T20:16:54.730

您需要在 == 上更改 ===，因为这是布尔对象，并且此 === 始终为真。

试试这个代码：

```
if (this == true) {
  row.concat(['<td>yes</td>']);
} else {
   row.concat(['<td>no</td>']);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T20:16:57.173

我建议不要`this`在 $.each 内部使用，这与您所期望的不完全一样。

[http://jsfiddle.net/EzTL7/](http://jsfiddle.net/EzTL7/)

相反，使用您命名的第二个参数`value`

```
 $.each(result.teams, function (index, value) {
    var row = ['<tr><td>', index, '</td>'];
    // Add if place is found or not.
    $(value.done).each(function () {
        if (this === true) { // `this` is ok here because you're using $.fn.each and not $.each
            row.concat(['<td>yes</td>']);
        } else {
            row.concat(['<td>no</td>']);
        }
    });

    $('.scorestable tbody').append(row.join('') + '</tr>');
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-11T20:21:42.863

干得好。each() 方法需要一个索引和值。该值是您的布尔值。

```
 // Add teams and their result.
$.each(result.teams, function (index, value) {
        var row = ['<tr><td>', index, '</td>']; // extra td
        // Add if place is found or not.
        $(this.done).each(function (index, value) {
            if (value === true) {
                row = row.concat(['<td>yes</td>']);
            } else {
                row = row.concat(['<td>no</td>']);
            }
        });

        $('.scorestable tbody').append(row.join('') + '</tr>');

    }); 
```

经过测试和工作

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-11T20:24:22.143

您应该`$.each`用于迭代数组。

```
 $.each(this.done, function (i, v) {
        if (v === true) {
            row = row.concat(['<td>yes</td>']);
        } else {
            row = row.concat(['<td>no</td>']);
        }
        console.log(row);
    }); 
```

而你使用`concat`错误的方式。`concat`不会改变被调用者的值，而是应该使用返回值：

```
row = row.concat(['<td>yes</td>']); 
```

[您的代码的工作示例](http://jsfiddle.net/nfwDb/1/)。

# jquery - Font-Awesome - icon-spin 在隐藏然后显示时不旋转

> ID：15957886
> 
> 赞同：17
> 
> 时间：2013-04-11T20:05:51.280
> 
> 标签：jquery, font-awesome

当我的页面加载时，我通过将其属性设置为无来 隐藏`icon-refresh + icon-spin`图标。`display`

现在，在执行了一些操作后，我希望显示这个图标。`.show()`我在图标上调用 jQuery 的方法。但是，在显示图标时，图标不再旋转。

如果我加载它而不最初隐藏它，它会旋转。但不是当它被隐藏并稍后显示时。

编辑：如果标题不清楚，我正在使用[Font Awesome](http://fortawesome.github.io/Font-Awesome/)来显示图标

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-07-01T11:26:20.447

你必须使用`$element.css("display","inline-block");`而不是`.show();`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-04T16:18:30.333

老话题，但我有类似的问题，“fa-spin”在使用 {可见性：隐藏}隐藏包含元素后不起作用，使用 jQuery 设置。还有一些其他动画涉及，这可能导致时间问题等。

修复方法是在包含元素上设置一个事件以使其再次可见时触发，这会触发此函数：

```
ply_obj.container.on(
            'controlsshown',
            function () {

                if (ply_obj.config.loop_tf) {
                    ply_obj.loop_icon.removeClass('fa-spin');
                    setTimeout(function () { ply_obj.loop_icon.addClass('fa-spin'); }, 100);
                }
            }
        ); 
```

因此，删除“fa-spin”，然后稍加延迟将其添加回来，使其按我的需要工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-27T12:08:24.440

您是在调用“$('#mySpinnerElement').hide() 吗？

我将其更改为 document.getElementById('mySpinnerElement').style.display = 'none';

我的微调器在随后的调用中旋转

高温高压

沼泽

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-03T10:37:39.077

如果初始显示状态为 ，似乎 IE10 不会运行旋转动画`none`。我发现动态更改显示`inline-block`不会触发旋转动画。将微调器移出屏幕解决了这个问题。例如：

```
.icon-spinner {
    position: absolute;
    left: -9999px;
}
.is-pending .icon-spinner {
    left: 0;
} 
```

# wordpress - .htaccess 和 wordpress 301 重定向不在批准的 IP 地址列表中的所有人？

> ID：15957887
> 
> 赞同：2
> 
> 时间：2013-04-11T20:05:54.813
> 
> 标签：wordpress, .htaccess, mod-rewrite, redirect

有没有更清洁的方法来做到这一点？我有兴趣通过将使用允许的 IP 地址定期运行的脚本来使用列表更新文件。

逻辑是：如果 {REMOTE_ADDR} = (1.2.3.4|2.3.4.5|3.4.5.6|192.168.0.0/24) 什么都不做，否则将它们 301 重定向到当前网站。

我尝试了以下测试：

```
 # BEGIN WordPress
    <IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /
    RewriteRule ^index\.php$ - [L]
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule . /index.php [L]
    </IfModule>

    # END WordPress

    # Redirect all except allowed IP
    RewriteCond %{REMOTE_ADDR} !^123\.456\.789\.101$
    ReWriteCond %{REMOTE_ADDR} !^234\.567\.891\.011$
    RewriteRule (.*) http://Currentwebsite.com/$1 [R=301,L] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T20:15:12.407

您需要在您的 wordpress 规则**之前**进行重定向。因为 wordpress 将所有内容都路由到 index.php，所以请求在重定向之前会被破坏：

```
# Redirect all except allowed IP
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteCond %{REMOTE_ADDR} !^123\.456\.789\.101$
ReWriteCond %{REMOTE_ADDR} !^234\.567\.891\.011$
RewriteRule (.*) http://currentwebsite.com/$1 [R=301,L] 
</IfModule>

# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>

# END WordPress 
```

# css - 将一个 Div 居中在另一个 Div 中。我已经尝试了一切

> ID：15957891
> 
> 赞同：-2
> 
> 时间：2013-04-11T20:06:34.117
> 
> 标签：css, html, centering

我试图将一个 div 居中在另一个 div 中，其中父 div 的宽度为 100%，高度为 100px。我对此进行了彻底的研究，并且尝试了所有答案，但没有任何效果。我认为我的代码有问题。

这是我到目前为止所拥有的。

我的 HTML：

```
<div class="footer">

  <div class="footerContainer">
  </div>

</div> 
```

CSS：

```
.footerContainer    {width: 964px; 
                     height: 100px; 
                     margin: 0 auto; 
                     color:#9F0; 
                     right:0;
                     left:0;
                     display:table-cell}

.footer  {background-color:#1e4da0;
          height:300px;
          width:100%;
          left:0;
          right:0;
          position:absolute;
          display:table} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T20:12:04.443

```
<div style="width: 100%; height: 100px; text-align: center;">
    <div>Your content</div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T20:32:13.823

我只能用一个额外的包装来做到这一点。检查[小提琴](http://jsfiddle.net/xMyuJ/2/) 另外，我改变了尺寸并使用了一些糟糕的颜色。你会有这样的东西

```
<div class="wrapper">
    <div class="footer">
      <div class="footerContainer">
     </div>
    </div>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T20:34:58.270

这是一个简单的小提琴示例，您可能想看看它 [http://jsfiddle.net/EZg6q/]

# ios - SoundCloud API 流质量

> ID：15957892
> 
> 赞同：2
> 
> 时间：2013-04-11T20:06:34.687
> 
> 标签：ios, soundcloud

我一直在开发一个从 SoundCloud 流式传输 DJ 混音的 iOS 应用程序。混合的长度大约为 2 小时。

我正在阅读 App Store 指南，第 9.3 项让我有点担心： [https ://developer.apple.com/appstore/resources/approval/guidelines.html#media-content](https://developer.apple.com/appstore/resources/approval/guidelines.html#media-content)

9.3 - 蜂窝网络上的音频流内容在 5 分钟内使用的容量不得超过 5MB

我想知道是否有办法检索低质量的流，这样我就可以让用户选择他们想要收听的质量流。

...或者 - 如果有人有类似情况的经验 - 你们是如何解决这个 App Store 指南的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T11:08:04.583

SoundCloud 在流中提供的 mp3 以 128kbit CBR 编码。

128kbit/s = 0.9375 MB/min（使用[google转换工具](https://www.google.de/search?q=128+kbit+%2Fs+in+MB%2Fmin)）

5 分钟的流 = 4.6875 MB（+ 一点开销）。

因此，您仍然在 Apple 要求的默认流媒体质量范围内。

# c# - 如何解决“事务”附近的错误语法？

> ID：15957894
> 
> 赞同：0
> 
> 时间：2013-04-11T20:06:38.363
> 
> 标签：c#, sql, datatable

我想从用户向 DataTable 插入数据。我得到这个异常：“异常：事务附近的语法不正确”。我试图找到语法错​​误，但无法解决。

```
public void Add_to_Transaction(SqlConnection conn , int serial_number ,  DataTable dt)
{
   try
   {
      //DataTable dt = new DataTable();
      SqlCommand cmd1 = new SqlCommand();
      cmd1.Connection = conn;
      cmd1.CommandText = "SELECT * FROM Transaction";
      SqlDataAdapter adapter = new SqlDataAdapter();
      adapter.SelectCommand = cmd1;
      adapter.Fill(dt);

      SqlParameter serial_number1 = new SqlParameter("product_id",serial_number);
      SqlParameter quantity = new SqlParameter("quantity", 0);
      SqlParameter date = new SqlParameter("date", DateTime.Today);
      cmd1.Parameters.Add(serial_number1);
      cmd1.Parameters.Add(quantity);
      cmd1.Parameters.Add(date);
      Console.WriteLine("111111111111111111");

      cmd1.CommandText = "INSERT INTO Transaction (quantity,date,product_id) VALUES (@quantity,@date,@product_id)";
      cmd1.ExecuteNonQuery();

      Console.WriteLine("222222222222222222");

      cmd1.Parameters.Clear();
   }

   catch (Exception e)
   {
      Console.WriteLine(e.Message);
   }
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T20:16:27.570

T-SQL 中有一些词是保留关键字。如果不使用括号，您不能直接在 sql 中使用它们。因此，要么为这些列或表名选择不同的名称，要么`[forbiddenword]`在它们周围使用括号：

```
INSERT INTO [Transaction] (quantity,date,product_id) VALUES (@quantity,@date,@product_id);
SELECT * FROM [Transaction]; 
```

[**保留关键字 (Transact-SQL)**](http://msdn.microsoft.com/en-us/library/ms189822.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T20:15:52.567

```
SELECT * FROM [Transaction] 
```

输入单词`[ ]`使 SQL 知道它不是关键字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T20:18:32.970

`Transaction`是一个关键词。这是你的意思吗？

# php - 限制访问页面php

> ID：15957898
> 
> 赞同：-4
> 
> 时间：2013-04-11T20:06:54.280
> 
> 标签：php

在用户登录后在我的网站中，我想根据存储在 $_SESSION['user_id'] 中的用户 ID 限制对某些页面的访问，并将未登录的用户重定向到不同的 url:pleaselogin.php ？如何检查用户是否已登录然后可以保留其他重定向到不同的 url 我已登录用户存储在 $_session['user_id'] 如何将未登录的用户重定向到另一个页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T20:09:07.707

```
if(!isset($_SESSION['user_id']))
    header('Location: pleaselogin.php') 
```

应该注意的是，`header()`仅当您尚未在请求中发回内容时才有效。*所以这应该是您在返回任何*数据之前要做的第一件事。查看 PHP 手册`header()`了解更多信息： http: [//php.net/manual/en/function.header.php](http://php.net/manual/en/function.header.php)

# java - MemcachedClient cas 操作未返回已存在

> ID：15957901
> 
> 赞同：1
> 
> 时间：2013-04-11T20:07:00.050
> 
> 标签：java, memcached

我有以下使用 net.spy.memcached.MemcachedClient 的单元测试

```
 @Test
public void testCASFailsWrite() throws Exception {
    Integer begin = new Integer(3);
    client.set(key, 0, begin);

    CASValue<Object> casValue = client.gets(key);

    Assert.assertNotNull(casValue);
    Assert.assertTrue(casValue.getValue() instanceof Integer);

    Integer fromCache = (Integer) casValue.getValue();  
    Integer nextSeq = new Integer(fromCache + 9);

    long myInvalidValue = casValue.getCas() - 1;

    CASResponse response = client.cas(key, myInvalidValue, nextSeq);
    Assert.assertEquals(CASResponse.EXISTS, response);
} 
```

我希望 CASResponse 显示该值已经存在，因为我有一个无效的 casValue，但是它在最后一个 Assert 上返回为 OK。我想确保我的密钥句柄在多个 JVM 上同时更新。我的单元测试是通过 com.thimbleware.jmemcached.AbstractCache 的实现使用嵌入式 memcache 进程。当我的密钥已经在内存缓存中并且我没有相同的 casValue() 时，我可以依靠 CASResponse 来显示 EXISTS 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T00:25:47.410

这很可能是因为您正在针对一个全新的 memcached 实例运行此测试。cas 值在 memcached 实例中是全局的，第一组接收 cas 值 1，第二组接收 cas 值 2，依此类推。当您运行测试时，您的密钥的 cas 值为 1。由于您的无效 cas 是通过仅减少此密钥的 cas 值生成的，因此您的无效 cas 值最终为 0。在更新中指定 cas 值为 0 意味着忽略cas，然后更新。将 myInvalidValue 设置为像 123456 这样的随机数，这个问题就会消失。另一个有趣的事情是，如果你在上面两次运行测试，它会通过第二次。

# java - 如何在TreeMap中获取超过某个键的值

> ID：15957906
> 
> 赞同：0
> 
> 时间：2013-04-11T20:07:13.247
> 
> 标签：java, collections, treemap

我有一个带有键、值对的 TreeMap 作为 SessionIdNode

```
private class SessionNode 
{
    String sessionid;
    Timestamp time;

    private SessionNode (String sessionid, long  d)
    {
        this.time = new Timestamp(d);
        this.sessionid = sessionid;
    }

    public int hashCode()
    {
        return sessionid.hashCode();

    }

    public boolean equals(SessionNode node)
    {
        return this.sessionid.equals(node.sessionid);
    }

} 
```

此类在 TreeMap 内部使用，如下所示：

```
private final Comparator< SessionNode> sessionNodeComparator = new Comparator<SessionNode>() {
        @Override public int compare(SessionNode s1, SessionNode s2) 
        {
            return ((SessionNode)s1).time.compareTo(s2.time);   
        }           
    };

private Map <SessionNode , SessionNode> map = new TreeMap <SessionNode , SessionNode>( sessionNodeComparator); 
```

现在，我的问题是，它根据自定义比较器对 SessionNodes 进行排序，这基本上是根据时间。

现在说给定时间 t1，我需要删除树图中所有具有 SessionNode 时间戳值 > t1 的键。

我该如何做到这一点？任何帮助将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T20:08:14.297

```
map.tailMap(new SessionNode(null, t1), false).clear(); 
```

# sql - “临时表” - x 附近的语法不正确

> ID：15957909
> 
> 赞同：0
> 
> 时间：2013-04-11T20:07:22.357
> 
> 标签：sql, sql-server, sql-server-2008

我在 x 附近收到错误语法错误。为什么 ？另外，是 xa 临时表。如果不是，那是什么？

```
select sum(x.count)
from
(
  select  count(id) as 'count'
  from    table1   
) x 
```

上面的查询可能有效。但是，当将相同的逻辑应用于下面的查询时，我得到相同的错误 - table_name 附近的语法不正确 -

```
select sum(table_name.an_alias)
from 
(select 
  top 5
  avg(some_value) as an_alias
  where (some_condition)
  group by a_date
)table_name 
```

当您只运行内部查询时，它会生成一个 datetime 列和一个 int 列。我想使用外部选择来求和该 int 列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T20:11:37.020

尝试用括号代替单引号

```
 select sum(x.count)
 from  ( select count(id) as [count]
         from table) x, 
```

将别名“count”更改为“cny”，看看会发生什么......

```
 select sum(x.cnt)
 from  ( select count(id) cnt
         from table) x, 
```

但要意识到子查询将只有一行，因为您没有对任何内容进行分组，所以这应该等同于

```
select count(id) from table 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T20:12:06.763

这个查询对我有用，假设您使用实际的表名，而不是“来自表”。

在您的查询中， x 是您的子查询的别名。您可以将其称为表别名，但在这种情况下，它是子查询而不是表的别名。

# svn - 聚合来自不同源代码位置的组件

> ID：15957910
> 
> 赞同：0
> 
> 时间：2013-04-11T20:07:25.560
> 
> 标签：svn, eclipse-plugin, jenkins, tycho

有没有办法在 Jenkins 构建中轻松聚合来自不同 SVN 源代码位置的组件并使用 Tycho 作为构建工具？

假设产品由五个插件组成，一个可能位于 中`trunk/core/pluginA`，另一个位于 中，另一个`/trunk/ui/pluginB`位于分支中`/branches/ui2/pluginC`，也可能位于`/trunk/ui/pluginC`. 我想创建将聚合所有这些插件的 Jenkins 作业。

我当然可以使用单独的存储库 URL 位置单独检查它们，但是当您有 20 或 30 个插件可以使用时，这项任务会变得有点困难。我可以使用它们在 SVN 树中的位置作为聚合信息以某种方式检查所有这些组件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T13:32:01.450

我不知道 Buckminster 构建，但我想它（就像 PDE 无头构建一样）也处理与源代码控制系统的交互。Tycho 不处理源代码控制，但假定在调用 Tycho 构建之前已经检查了源代码。这意味着，您需要首先自己处理源的签出。

我假设 SVN 不允许您一次检查不同的分支。因此，您需要迭代地构建。这是如何编写脚本的：

1.  清除本地 Maven 存储库（以删除以前构建的所有结果）
2.  对于每个捆绑
    *   查看来源
    *   用`mvn clean install`; 这会将构建结果放入本地 Maven 存储库
3.  通过`eclipse-repository`包含所有捆绑包的集合来汇总整体结果。默认情况下，[本地构建的所有内容都是`install`目标平台的一部分](http://wiki.eclipse.org/Tycho/Target_Platform#Locally_built_artifacts)，因此此`mvn`调用将能够看到之前构建的所有包。

您需要自己维护捆绑包列表和源位置。我不知道对此有任何自动化支持。

# asp.net-mvc-3 - 实体查询返回null，如何检查？

> ID：15957919
> 
> 赞同：0
> 
> 时间：2013-04-11T20:07:52.547
> 
> 标签：asp.net-mvc-3, entity-framework

我有一个实体查询：

```
Location location = new Location();

var loc = from l in location.name
          where location.active = true
          select l;

return View(loc.ToList()); 
```

和代码，当运行时抛出一个问题，因为名称和活动都是空的。这很好，但是，有没有办法说：如果不是空返回？这会像`loc`在返回之前询问是否为空一样简单吗？

如果是这样，我该怎么做？

## 更多详细信息

我收到错误消息：

> 说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.ArgumentNullException：值不能为空。参数名称：来源

在线发生：

```
var loc = (from l in location.name 
```

我的上下文类如下所示：

```
using System;
using System.Data.Entity;
using LocationApp.Models;
using System.Data.Entity.ModelConfiguration.Conventions;

namespace LocationApp.DAL
{
    public class LocationAppContext : DbContext
    {
        public DbSet<Content> Contents { get; set; }
        public DbSet<Location> Locations { get; set; }
        public DbSet<ServiceAssignment> ServiceAssignments { get; set; }
        public DbSet<Service> Services { get; set; }

        protected override void OnModelCreating(DbModelBuilder modelBuilder)
        {
            modelBuilder.Conventions.Remove<PluralizingTableNameConvention>();
        }
    }
} 
```

**注意：**这种方法使用代码优先方法，我的数据库中有一个位置条目，它有一个名称，并且它的“活动”设置为 true。所以我不明白为什么这会引起轰动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T20:15:33.997

您的位置将永远为空，如果在默认构造函数中它不填充字段/属性

尝试这个

```
var location = new Location { name= "dsd", active = true};

var tmp = location.FirstOrDefault(x=>x.active);

var loc = tmp == null ? String.Empty : tmp.name; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T20:18:35.377

**如果要返回单个**位置，请使用该`FirstOrDefault`方法。

此外，您需要创建 DBContext 类的对象并访问它的`Locations`属性以获取位置。

```
using(var db=new LocationAppContext())
{
   var loc = (from l in db.Locations
                   where l.active == true
                   select l).FirstOrDefault();
   if(loc!=null)
      return View(loc);
   else
      return View("NotFound")
} 
```

**如果您正在寻找一个集合**，我们`ToList()`在您的表达，您可以检查`Count`属性，看看是否有任何物品被退回

```
using(var db=new LocationAppContext())
{
   var loc = (from l in db.Locations
                  where l.active == true
                  select l).ToList();
   if(loc.Count>0)
      return View(loc);
   else
      return View("NotFound")
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T20:37:03.310

你的 Linq 查询的源集合`IEnumerable<char>`是由`string`（我猜`Location.Name`是 a `string`）实现的，你会返回一个字符列表到你的视图。（你真的想要这个吗？）

无论如何，源集合一定不是`null`. 您必须在 Linq 查询*之前*捕获这种情况。如果是`null`你根本不能使用这个 Linq 查询。

```
Location location = new Location();

List<char> loc = null;
if (location.name != null)
    loc = (from l in location.name
           where location.active.HasValue && location.active.Value
           select l).ToList();
else
    loc = new List<char>();

return View(loc); 
```

但这与实体框架无关。这只是一个内存查询（LINQ-to-Objects）。

# objective-c - 'UIAlertView' 没有可见的@interface

> ID：15957920
> 
> 赞同：0
> 
> 时间：2013-04-11T20:07:53.990
> 
> 标签：objective-c, xcode, ios6

我一直在关注本教程： http: [//www.appcoda.com/hello-world-build-your-first-iphone-app/](http://www.appcoda.com/hello-world-build-your-first-iphone-app/)

尝试创建一个简单的 iOS 6 应用程序。

但是我收到一个错误：`@interface for 'UIAlertView'...`

我有：

```
#import <UIKit/UIKit.h>

@interface AppDelegate : UIResponder <UIApplicationDelegate>

@property (strong, nonatomic) UIWindow *window;

-(IBAction)showMessage;

@end 
```

在我的`AppDelegate.h`文件和

```
-(IBAction)showMessage
{
    UIAlertView *helloWorldAlert = [[UIAlertView alloc]initWithTitle:@"my first app" message:@"hello there world!" delagate:nil cancelButtonTitle:@"dismiss" otherButtonTitles:nil];
    [helloWorldAlert show];
}

@end 
```

在我的`AppDelegate.m`档案中

我似乎不明白错误表示什么，我尝试了谷歌搜索，但没有更接近找到解决方案，所以我在这里错过了什么？我必须解决什么问题？

确切的错误信息：

```
No visible @interface for 'UIAlertView' declares the selector 'initWithTitle:message:delegate:cancelButtonTitle:otherButtonTitles:' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T20:18:33.250

这一行有一个错字：

```
UIAlertView *helloWorldAlert = [[UIAlertView alloc]initWithTitle:@"my first app" message:@"hello there world!" delagate:nil cancelButtonTitle:@"dismiss" otherButtonTitles:nil]; 
```

替换`delagate`为`delegate`。

# javascript - 如何访问表单选择 jQuery？如何从输入的金额中获取“%”？

> ID：15957922
> 
> 赞同：0
> 
> 时间：2013-04-11T20:07:56.100
> 
> 标签：javascript, jquery

我想建立一个费用计算器，为此我需要访问表单，我想知道我是否可以在 jQuery 中做到这一点。所以我的代码是：

```
<form id="fee">
    <input type="text" title="fee" placeholder="Place the amount that you would like to send"/> $
    <input type="submit" onclick="getFee()"/>
</form>
<br/>
<p id="Here will be the fee"></p> 
```

和 JS：

```
function getFee(){
    $("fee > input:fee").
} 
```

这是我的问题。我想知道如何获取用户在输入中输入的金额并添加到这个 10% 的金额，然后在下面的段落中打印出来。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T20:16:56.923

首先，像这样将 id 添加到您的输入中

```
<input type="text" id="amount" 
```

现在得到这样的值：

```
 var amount = $("#amount").val(); 
```

不要在您的 ID 中使用空格

```
<p id="Here will be the fee"></p> 
```

改用这个

```
<p id="feeOnAmount"></p> 
```

现在您可以`10%`像这样添加金额

```
function getFee(){
    var amount = parseFloat($("#amount").val());
    if($.isNumeric(amount)){
        $("#feeOnAmount").html((amount * 1.1));    
    }
    else{
        $("#feeOnAmount").html("please enter a valid number");
    }
} 
```

[http://jsfiddle.net/mohammadAdil/E2rJQ/15/](http://jsfiddle.net/mohammadAdil/E2rJQ/15/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T20:09:20.903

使用 # 符号作为 id。还要在输入中添加一个 id。`id="feeInput"`

标题也不是有效的输入标签。

```
function getFee(){
        $("#fee > input#feeInput").
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T20:12:36.337

尝试这个

```
function getFee(){
    var inputVal = $("#fee > input[title='fee']").val();
    var inputFinal = parseInt(inputVal) + (parseInt(inputVal) * .10);

    //Change the ID of the p your appending to
    //ID is now = "calc"
    $("#calc").text(inputFinal);
} 
```

这是一个演示：http: [//jsfiddle.net/Ln3RN/](http://jsfiddle.net/Ln3RN/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T20:33:10.730

我更改了输出 id 和选择器。 [jsfiddle 中的示例](http://jsfiddle.net/Q77Yp/1/)

[属性选择器](https://developer.mozilla.org/en-US/docs/CSS/Attribute_selectors)

```
$(document).ready(function () {
    $("#fee")[0].onsubmit= getFee;

});
function getFee(){
        var feeInput = $('#fee > input[title="fee"]').val();
        feeInput = parseInt(feeInput);
        $('#Here_will_be_the_fee').text(feeInput*1.1);
        return false;
} 
```

`getFee`返回 false 以便表单不会提交，只会触发 onsubmit 事件。

# windows-8 - Windows 8 应用程序中 FlipView 周围的选定边框

> ID：15957929
> 
> 赞同：1
> 
> 时间：2013-04-11T20:08:13.910
> 
> 标签：windows-8, windows-runtime, winrt-xaml

我有一个占据应用程序全屏的翻转视图。

在该翻转视图内部，我有一些控件，例如图像、一些文本框和几个列表视图。

当我在文本框中输入数据并通过它们进行选项卡时，翻转视图会在其周围获得一个选定的边框。

我尝试设置 isTabStop="False" 但这并不能解决问题。我尝试设置 Margin="-3" 这确实减轻了所选边框的显示，但是当与触摸一起使用时，我无法到达翻转视图中的最后一个项目。

有没有人知道如何阻止我的应用程序出现这个外观问题？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T12:13:32.643

我不知道这是否是您的解决方案，但对我来说效果很好。而且我没有遇到任何触摸问题，我仍然可以访问 FlipView 中的所有项目（还有 ListViews）。我只是创建了 FlipView 样式的副本并将 Margin 设置为 0。请参见下面的（摘录）：

```
<Border BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" Margin="0"> 
```

# actionscript-3 - 带有 Flash as3 的 Google 地图 - 更改网址

> ID：15957934
> 
> 赞同：1
> 
> 时间：2013-04-11T20:08:22.947
> 
> 标签：actionscript-3, api, google-maps, actionscript

我的 as3 谷歌地图已折旧，但除非我更改网址，否则仍然可以使用

www.mydomain.com => www2.mydomain.com

由于我无法创建新密钥，我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T21:09:34.190

### 获取地图 API 密钥

[Maps API for Flash 已正式弃用，但根据Maps API 服务条款 中](https://developers.google.com/maps/terms)定义的弃用政策，现有应用程序将继续受支持。因此，我们建议不要在任何新应用程序中使用 Maps API for Flash，而是建议使用[Google Maps JavaScript API v3](https://developers.google.com/maps/documentation/javascript)。

尽管我们不再为 Maps API for Flash 发布密钥，但我们了解一些现有开发人员可能需要更新用于现有应用程序的密钥，例如由于主机名的更改。如果您需要新密钥，请按照[Maps API for Flash Key Request 网站上的说明进行操作。](https://flash-maps-key-request.appspot.com/)

Google Maps API for Flash 与 Google JavaScript Maps API 一样，需要使用密钥。您将需要在三个可能的位置之一中指定此键：

*   （对于 Flex 应用程序）称为`MXML`声明的特殊配置文件
*   （对于 Flash 应用程序）您的 ActionScript 代码（将其编译到生成的 SWF 文件中）
*   网页中包含的 DOM 元素。

请注意，API 密钥被编译到`SWF`文件中，并且必须与托管文件的域匹配`SWF`，这可能不一定是托管 HTML 文件的位置。该文档集将展示在 MXML 声明中定义 API 密钥的 Flex 示例。

### 我相信上面所说的这部分内容与您有关：

尽管我们不再为 Maps API for Flash 发布密钥，但我们了解一些现有开发人员可能需要更新用于现有应用程序的密钥，例如由于主机名的更改。如果您需要新密钥， 请按照[Maps API for Flash Key Request 网站上的说明进行操作。](https://flash-maps-key-request.appspot.com/)

[来自 Google 的原始问答](https://developers.google.com/maps/documentation/flash/intro#API_Key)

# c# - 一些连接后，我有一个“未登录”的问题

> ID：15957935
> 
> 赞同：0
> 
> 时间：2013-04-11T20:08:26.800
> 
> 标签：c#, login, ftp, ftpwebrequest

在我的 Web 应用程序中，我需要设置两个 FTP 文件夹的路径，在模型验证中，我尝试检查这些文件夹是否存在于 FTP 服务器上。我的问题是第一次这通常有效，第二次通常也有效。但是第三次​​出现此错误“远程服务器返回错误：（530）未登录。”

这是我的代码：

```
try
 {
    FtpWebRequest request = (FtpWebRequest)WebRequest.Create(new Uri(model.configData.FTPInputFolder));
    request.Credentials = new NetworkCredential("ftp_free", "ftp_free");
    request.Method = WebRequestMethods.Ftp.ListDirectory;
    request.KeepAlive = false;

    FtpWebResponse response = (FtpWebResponse)request.GetResponse();
    /*response.Close();*/        
 }
 catch (WebException e)
 {
    ModelState.AddModelError("configData.FTPInputFolder", "Directory does not exist " + e.Message);
 }
 // second request for one other directory
 try
 {
    FtpWebRequest request = (FtpWebRequest)WebRequest.Create(new Uri(model.configData.FTPOutputFolder));
    request.Credentials = new NetworkCredential("ftp_free", "ftp_free");
    request.Method = WebRequestMethods.Ftp.ListDirectory;
    request.KeepAlive = false;

    FtpWebResponse response = (FtpWebResponse)request.GetResponse();

 }
 catch (WebException e)
 {
    ModelState.AddModelError("configData.FTPOutputFolder", "Directory does not exist" + e.Message);
 } 
```

一段时间后一切正常，但经过 2-3 次验证（运行此代码）后，“未登录问题”又回来了。我错过了什么？

此外，如果我取消注释`response.Close();`并且文件存在于文件夹中（里面大约有 25 mb 的文件），它可能会挂起。这里有什么问题？

**Edit1：** 如果我 `PrintWorkDirectory`改用`ListDirectory`它，无论我检查什么目录，它都不会引发异常。图中是服务器上不存在目录的响应对象

![在此处输入图像描述](https://i.stack.imgur.com/iy9iJ.png)

这是现有文件夹的响应对象。完全一样。。。 ![在此处输入图像描述](https://i.stack.imgur.com/JlyAx.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T20:34:45.943

首先，ListDirectory 将列出文件夹中的所有文件，当 FTP 文件夹中有大量文件时，这些文件可能会出现问题。尝试使用：

PrintWorkingDirectory（或者 GetDateTimestamp ）。对于“未记录”错误，请尝试将 UsePassive 设置为 false。这为我解决了许多“未记录”错误。

```
try
{
   FtpWebRequest request = (FtpWebRequest)WebRequest.Create(new Uri(model.configData.FTPInputFolder));
   request.Credentials = new NetworkCredential("ftp_free", "ftp_free");
   request.Method = WebRequestMethods.Ftp.PrintWorkingDirectory;
   request.KeepAlive = false;
   request.UsePassive = false;

   using(FtpWebResponse response = (FtpWebResponse)request.GetResponse())
   {}
}
catch (WebException e)
{
  ModelState.AddModelError("configData.FTPInputFolder", "Directory does not exist " + e.Message);
}

... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T15:49:20.743

这是一个对我有帮助的解决方案

```
try
{
   FTPOperations.ListDirectory(model.configData.FTPInputFolder, model.configData.FTPLogin, model.configData.FTPPassword);
}
catch (WebException e)
{
   FtpWebResponse response = (FtpWebResponse)e.Response;
   if (response.StatusCode == FtpStatusCode.ActionNotTakenFileUnavailable)
   {
      ModelState.AddModelError("configData.FTPInputFolder", "Directory does not exists");
   }
   else
   {
      ModelState.AddModelError("configData.FTPInputFolder", "Directory check error: " + e.Message);
   }
} 
```

和方法

```
public static List<string> ListDirectory(string dirPath, string ftpUser, string ftpPassword)
{
   List<string> res = new List<string>();

   FtpWebRequest request = (FtpWebRequest)WebRequest.Create(dirPath);
   request.Method = WebRequestMethods.Ftp.ListDirectory;
   request.Credentials = new NetworkCredential(ftpUser, ftpPassword);
   request.KeepAlive = false;

   FtpWebResponse response = (FtpWebResponse)request.GetResponse();

   Stream responseStream = response.GetResponseStream();
   StreamReader reader = new StreamReader(responseStream);
   while (!reader.EndOfStream)
   {
      res.Add(reader.ReadLine());
   }
   reader.Close();
   response.Close();

   return res;
} 
```

我不确定为什么它以前不起作用，如果有人证明这一点，将不胜感激:)

现在这段代码没有登录问题，也不会挂起。也许它现在起作用了，因为我们阅读了我们之前没有做过的事情并关闭了回应（没有阅读过去挂起的内容）

# php - Ajax 不发布大文件

> ID：15957936
> 
> 赞同：0
> 
> 时间：2013-04-11T20:08:27.080
> 
> 标签：php, jquery, ajax, file-upload, xmlhttprequest

我正在使用 jQuery 的 ajax 上传文件

```
$("#transfer").live("click", function()
{
    var data = new FormData();

    data.append("your_email", $("#your_email").val());
    data.append("your_message", $("#your_message").val());

    $.each($(".friends_email_item"), function(a,b)
    {
        var email = $(b).text();

        data.append("emails[]", email);
    });

    for(i = 0; i < files.length; i++)
        data.append("files[]", files[i]);

    $.ajax({
        url: "upload.php", 
        type: "POST",

        success: function(a)
        {
            console.log(a);
        },

        data: data,

        contentType: false,
        processData: false
    });
}); 
```

当我选择文本文件或屏幕截图等小文件时。我得到发布的数据和发布的文件的转储。

```
array
  'your_email' => string 'Hello@test.com' (length=14)
  'your_message' => string 'test' (length=7)

array
  'files' => 
    array
      'name' => 
        array
          0 => string '1.png' (length=5)
      'type' => 
        array
          0 => string 'image/png' (length=9)
      'tmp_name' => 
        array
          0 => string 'C:\wamp\tmp\phpBD32.tmp' (length=23)
      'error' => 
        array
          0 => int 0
      'size' => 
        array
          0 => int 117994 
```

当我上传 50mb zip 或 500mb 视频时，我得到一个空数组

```
array
  empty

array
  empty 
```

为什么当它是一个大文件时无法发布任何数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T20:14:49.657

检查会影响上传大小限制`phpinfo()`的服务器配置设置：用于查看值

*   [`upload_max_filesize`](http://www.php.net/manual/en/ini.core.php#ini.upload-max-filesize), 设置上传文件大小的上限
*   [`post_max_size`](http://www.php.net/manual/en/ini.core.php#ini.post-max-size)，这限制了发布数据的总大小，包括文件数据
*   [`max_input_time`](http://www.php.net/manual/en/info.configuration.php#ini.max-input-time)，它限制允许脚本处理输入数据（包括发布的值）的时间长度

`upload_max_filesize`是对每个单独文件的限制；但是，`post_max_size`是整个请求的上限，包括所有上传的文件。

# mysql - MySQL 加入和排序缓慢

> ID：15957938
> 
> 赞同：0
> 
> 时间：2013-04-11T20:08:29.000
> 
> 标签：mysql, performance, join, sql-order-by

我有一个慢查询，它连接 4 个表并按顺序排列。这将需要 +30 秒。

我有 GuruList.GuruName、GuruList.id、GuruName、Stocks.TickerName、Stocks.exchange、triple_insider.symbol、triple_insider.exchange、triple_insider.date 的索引

这是查询：

```
SELECT DISTINCT stock_list.symbol as t, 
                stock_list.exchange,
                REPLACE(stock_list.company, '    ', ' ') as c,
                REPLACE(triple_insider.position, '    ', ' ') as p,
                triple_insider.date as d,
                triple_insider.name as n,
                triple_insider.type as y,
                triple_insider.trans_share as r,
                triple_insider.cost as cs,
                triple_insider.price as z,
                stock_list.price as x,
                ROUND(100*(stock_list.price-triple_insider.price)/triple_insider.price, 1) as h
    FROM  triple_insider 
        LEFT JOIN stock_list 
            ON triple_insider.symbol=stock_list.symbol 
                AND triple_insider.exchange=stock_list.exchange  
        LEFT JOIN Stocks 
            ON triple_insider.symbol=Stocks.TickerName 
                AND triple_insider.exchange=Stocks.exchange  
        LEFT JOIN GuruList 
            ON Stocks.GuruName=GuruList.GuruName    
    WHERE stock_list.price > 0  
        AND stock_list.mktcap >= 100 
        AND stock_list.rank_balancesheet/10 >= 5 
        AND stock_list.volume != 0 
        AND stock_list.volume >= 200000 
        AND stock_list.price >= 2 
        AND stock_list.price <= 10 
        AND stock_list.shares != 0 
        AND stock_list.shares <= 500 
        AND stock_list.p_pct_change != 0 
        AND stock_list.p_pct_change >= 2 
        AND stock_list.cash2debt >0 
        AND stock_list.cash2debt >= 0.1 
        AND stock_list.equity2asset >0 
        AND stock_list.equity2asset >= 0.1 
        AND stock_list.fscore != 0 
        AND stock_list.fscore >= 1 
        AND stock_list.zscore != 0 
        AND stock_list.zscore >= 0 
        AND stock_list.medpsvalue > 0 
        AND stock_list.p2medpsvalue <= 0.7 
        AND stock_list.p2iv_dcf_share <= 0.5 
        AND  GuruList.id IN( 0,155 ,88 ,54 ,11 ,47 ,112 ,84 ,3 ,20 ,22 ,114 ,67 ,40 ,102 ,164 ,50 ,64 ,108 ,163)  
        AND stock_list.exchange IN ('NAS','NYSE','OTCPK','','OTCBB','AMEX')   
    ORDER BY triple_insider.date DESC
    LIMIT 5001 
```

* * *

这是解释：

```
-------------------------------------------+
| id | select_type | table          | type   | possible_keys                                                                      | key      | key_len | ref                                                                       | rows | Extra                                        |
+----+-------------+----------------+--------+------------------------------------------------------------------------------------+----------+---------+---------------------------------------------------------------------------+------+----------------------------------------------+
|  1 | SIMPLE      | GuruList       | range  | PRIMARY,GuruList_GuruName,GuruList_id,GuruName                                     | PRIMARY  | 4       | NULL                                                                      |   20 | Using where; Using temporary; Using filesort |
|  1 | SIMPLE      | Stocks         | ref    | GuruName,TickerName,exchange,exchange_2                                            | GuruName | 43      | g_main.GuruList.GuruName                                                  | 1490 | Using where                                  |
|  1 | SIMPLE      | triple_insider | ref    | triple_insider_symbol_index,exchange                                               | exchange | 22      | g_main.Stocks.exchange,g_main.Stocks.TickerName                           |   56 | Using where                                  |
|  1 | SIMPLE      | stock_list     | eq_ref | PRIMARY,stock_list_mktcap,stock_list_price,stockfscore,stockfzcore,symbol,exchange | PRIMARY  | 22      | g_main.triple_insider.symbol,g_main.triple_insider.exchange               |    1 | Using where                                  |
+----+-------------+----------------+--------+------------------------------------------------------------------------------------+----------+---------+---------------------------------------------------------------------------+------+----------------------------------------------+
4 rows in set (0.00 sec) 
```

* * *

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T20:31:23.853

在 上创建索引`triple_insider.date`。

您可能还想摆脱`LEFT JOIN`或移动除`triple_insider`适当`ON`子句之外的所有内容的条件。

此外`DISTINCT`，虽然它本身是一个合法的结构，但似乎是解决您在帖子中未描述的问题的错误方法。

# javascript - 对象未定义时的最佳实践 if - else

> ID：15957940
> 
> 赞同：3
> 
> 时间：2013-04-11T20:08:34.330
> 
> 标签：javascript

我想知道我的代码接近是否良好，我想：

1.  检查对象是否存在
2.  如果不存在，则创建它并为其分配属性
3.  如果已经存在，只需分配属性

我现在拥有的是以下代码，但我不喜欢在同一行写两次

```
function doSomething(_whatever){
    if(typeof someobject === "undefined"){
        someobject = { //dont exist
            profile : "some value",
            status : []
        }

        someobject.status.push(_whatever);
    }else{
        someobject.status.push(_whatever); //because already exist
    }
} 
```

编写此代码段的更好方法是什么？或者做得更好，更少重复？

提前致谢

------ 原创功能

```
function addPerson(_person){
    var people = Iee.dashboard.analytics.data.people.data;      
    if(typeof people[_person.Id_Emp] === "undefined"){
        people[_person.Id_Emp] = {
            profile : _person,
            status : []
        }

        people[_person.Id_Emp].status.push({Id_Emp : _person.Id_Emp, status : _person.Estatus1, estatusby : _person.Centro_de_trabajo});
    }else{
        people[_person.Id_Emp].status.push({Id_Emp : _person.Id_Emp, status : _person.Estatus1, estatusby : _person.Centro_de_trabajo});
    }

    addBlackList(_person);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T20:10:11.133

执行此操作的常用方法是冗余检查：

```
someobject = someobject || {
    project:"some value",
    status:[]
}; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-11T20:13:48.023

简化代码

```
function addPerson(_person){
        var people = Iee.dashboard.analytics.data.people.data;      
        people[_person.Id_Emp] = people[_person.Id_Emp] || {
                profile : _person,
                status : []
            };

            people[_person.Id_Emp].status.push({Id_Emp : _person.Id_Emp, status : _person.Estatus1, estatusby : _person.Centro_de_trabajo});

        addBlackList(_person);
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T20:22:09.370

在这种情况下，您*希望它是一个对象或 undefined*，但不是字符串、数字等，因此您可以检查它是否具有真值。

```
function addPerson(_person) {
    var people = Iee.dashboard.analytics.data.people.data,
        person = people[_person.Id_Emp];

    if (!person) person = {
        profile: _person,
        status: []
    };
    person.status.push({
        Id_Emp: _person.Id_Emp, 
        status: _person.Estatus1, 
        estatusby: _person.Centro_de_trabajo
    });

    addBlackList(_person);
} 
```

这应该比其他答案中提到的冗余检查稍好一些，因为如果（真实）值不存在，它只会为变量分配一个值。

只是为了好玩，这是一个超浓缩版本：

```
function addPerson(_person) {
    var people = Iee.dashboard.analytics.data.people.data, id = _person.Id_Emp;

    (people[id] || { profile: _person, status: [] }).status.push({
        Id_Emp: id, status: _person.Estatus1, estatusby: _person.Centro_de_trabajo
    });
    addBlackList(_person);
} 
```

# html - 无法让 Twitter Bootstrap 崩溃工作

> ID：15957943
> 
> 赞同：1
> 
> 时间：2013-04-11T20:08:39.903
> 
> 标签：html, css, twitter-bootstrap

有人可以帮我解决这个问题。看来我已经完全按照 Twitter Bootstrap 文档中的建议进行了设置，但是导航栏导航上的折叠对我不起作用。我没有特殊的样式设置会干扰它的工作。发生的情况是，当我将屏幕缩小或在移动设备上查看时，菜单不会按应有的方式折叠。

```
<div class="navbar navbar-inverse"  id="masthead">
  <div class="navbar-inner">
    <div class="container">
      <div class="brand muted" >Redding Salon</div>
      <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
      <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </a>
      <div class="nav-collapse collapse">
        <ul class="nav nav-pills pull-right" id="navbar" >
          <li><a href="#home">Home</a></li>
          <li><a href="#make_an_appointment">Make An Appointment</a></li>
          <li><a href="#meet_the_stylist">Meet The Stylists</a></li>
          <li><a href="#contact_us">Contact Us</a></li>
        </ul>
      </div>
    </div>
  </div>
</div> 
```

在我的标题中，我有以下所有这些都在受人尊敬的领域并被正确添加。

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.8.0.min.js"></script>
<script type="text/javascript" src="assets/js/bootstrap.min.js"></script>
<link rel="stylesheet" type="text/css" href="assets/css/bootstrap.min.css"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T20:17:10.103

将 href 和 src 路径目录从 ( href="assets/ & src="assets/js/ ) 更改为您自己的路径目录。希望这有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T20:37:21.690

您必须包含[`Twitter Bootstrap`响应式 CSS](http://twitter.github.io/bootstrap/assets/css/bootstrap-responsive.css)和[折叠 js](http://twitter.github.io/bootstrap/assets/js/bootstrap-collapse.js)。并且可以选择[转换 js](http://twitter.github.io/bootstrap/assets/js/bootstrap-transition.js)。

工作示例[http://jsfiddle.net/PD4kg/](http://jsfiddle.net/PD4kg/)

# r - 如何修复具有多个返回错误的条件的while循环

> ID：15957949
> 
> 赞同：4
> 
> 时间：2013-04-11T20:08:55.410
> 
> 标签：r, while-loop, multiple-conditions

我编写了代码，要求用户输入“2012”或“2013”​​。然后我会`while`循环检查用户输入的是 2012 还是 2013。

输入有效年份的请求应该一直持续到用户输入有效数字为止。但是，我不断收到一个错误，即发生意外的“{”。我找不到为什么会在我的代码中产生这样的错误。

这是代码：

```
yr_function <-function(){
   year_of_data <- as.numeric(readline("Is the year of concern 2012 or 2013? >>> "))
}

year_of_data = 0
While((year_of_data != 2012) | (year_of_data != 2013)){
    yr_function
if(year_of_data != (2012 | 2013),print("You must type either 2012 or 2013")
} 
```

有错误生成读取：

```
Error: unexpected '{' in "While((year_of_data != 2012) | (year_of_data != 2013)){" 
```

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-12T03:13:00.090

您已经大致了解了这里的总体思路，但是您在几个地方都被简单的错误绊倒了。这是一个注释版本，如您所描述的那样工作：

```
yr_function <-function(){
   res <- as.numeric(readline("Is the year of concern 2012 or 2013? >>> "))
   if (is.na(res)){
    res <- -1
   }
   res
} 
```

您的第一个问题与范围有关。您在此函数内部和循环`year_of_data`之前都定义了。`while`但是在函数内部创建的变量不会引用`while`循环之前的变量。它们存在于不同的环境中。所以我修改了这个函数，改为*返回*用户输入的值。

您没有太多讨论验证，这是一个很大的话题。我在这里添加了一个非常小的验证。基本上，如果用户输入的东西不能被合理地强制转换为数字，那么你会得到一个 NA 值，这将是一个令人头疼的问题。所以我只是检查它并在这种情况下返回 -1。这*不是*验证问题的完整解决方案。

```
year_of_data <- 0
while((year_of_data != 2012) & (year_of_data != 2013)){
    year_of_data <- yr_function()
    if (!year_of_data %in% c(2012,2013)){
        print("You must type either 2012 or 2013")
    }else{
        break
    }
} 
```

这是固定`while`循环。首先，我修复了一些简单的语法错误（`while`不是`While`等）。然后我将结果分配`yr_function()`给`year_of_data`，这样我们就可以检查结果值并采取相应的行动。

`if`您对条件 ( )的尝试在`year_of_data != (2012 | 2013)`语法上不正确，因此我转而检查该值是否包含在 vector 中`c(2012,2013)`。

最后，您在后面`if`加上逗号，然后是打印语句。逗号是另一个语法错误。所以我在`print`语句周围添加了大括号，并添加了一个子句，如果用户输入了正确的内容，则该`else`子句会跳出循环。`while`

更一般地，您可能想要研究`menu`此类任务的功能。它可能会使验证问题更容易处理。

# objective-c - EXC_BAD_ACCESS 错误

> ID：15957950
> 
> 赞同：-1
> 
> 时间：2013-04-11T20:08:56.550
> 
> 标签：objective-c, exc-bad-access

当我从另一个类调用方法时，出现错误：

> （踏步）：EXC_BAD_ACCESS。

这是我在A类中的方法：

```
-(NSString*) parse: (NSString *) filePath
{
    ////do something
     codeWriter* cd;
     cd = [[codeWriter alloc]init];

    NSString* asmLine = [cd getAsmLine:lineContent]; ////here is my problem
} 
```

谁能帮我理解错误是什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T21:14:13.917

该错误意味着您正在尝试访问错误的内存补丁。

数组“linecontent”在哪里初始化？我想在调用该`getAsmLine:`方法时“linecontent”数组还没有在内存中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T20:56:13.800

是的，这是我自己的课。

我在类 codeWriter 中调用的方法：

```
-(NSString *)getAsmLine : (NSArray*) line {
    /////do something
    return string; } 
```

# java - 如何用我自己的实现替换 Runtime.gc()？

> ID：15957951
> 
> 赞同：2
> 
> 时间：2013-04-11T20:08:59.620
> 
> 标签：java, garbage-collection, jvm

我观察到每 60 分钟将“Full GC (System)”消息写入我的日志。当我这样做时：

```
jstat -gccause {pid} 5s 
```

我看到这是来自对 System.gc() 的显式调用。我正在尝试追踪调用 System.gc() 的代码，因为我怀疑这发生在我的一个依赖项中，而不是我自己的代码中。

我确实意识到我可以使用 -XX:-DisableExplicitGC 禁用显式 GC 调用，但我需要弄清楚调用的来源。我在[这里](https://stackoverflow.com/questions/6870829/how-can-i-tell-who-calls-system-gc)和[这里](https://stackoverflow.com/questions/6197813/find-system-gc-in-compiled-libraries)读到[这个人](https://stackoverflow.com/users/57695/peter-lawrey)能够在调用 gc() 时更改运行时类以记录堆栈跟踪。但我不清楚如何做到这一点。有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T20:15:55.930

获取 Runtime.java 的源代码，并在 gc() 方法中添加代码：

```
try {
    throw new Exception("Who is the GC culprit?");
} catch (Exception e) {
    e.printStackTrace();
} 
```

编译类后，用新的类文件更新 rt.jar。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T17:36:53.070

您的应用程序是否通过 RMI 被其他应用程序访问/访问？使用远程方法调用，您将遇到 RMI 的分布式垃圾收集 (DGC)，它基本上是这样的：RMI 定期调用 System.gc()。

`${sun.rmi.dgc.client.gcInterval}`对于客户端，每毫秒触发一次 Full GC 。`${sun.rmi.dgc.server.gcInterval}`对于服务器，每毫秒触发一次 Full GC 。

这些时间间隔的默认值因 JDK 的版本而异。它曾经是每分钟一次（是的......），但已更改为每 30 分钟一次。如果您设置了这些环境变量，您可能会有不同的值，例如，**如果**您设置了`-Dsun.rmi.dgc.client.gcInterval=3600000 -Dsun.rmi.dgc.server.gcInterval=3600000`.

来源：[http ://www.oracle.com/technetwork/java/javase/gc-tuning-6-140523.html#other_considerations](http://www.oracle.com/technetwork/java/javase/gc-tuning-6-140523.html#other_considerations)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T06:59:33.910

也许获取调用 gc() 的代码的最简单方法是将您的应用程序代码放入 IDE（eclipse 或 idea..）下载所有源代码（如果使用 maven 管理您的 lib，它可能很简单）并找到 System.gc 的参考() 或 Runtime.getRuntime.gc()。

# javascript - JavaScript HTML 表格解析

> ID：15957955
> 
> 赞同：2
> 
> 时间：2013-04-11T20:09:04.760
> 
> 标签：javascript, html, parsing

HTML

```
<table id="table">
<tr>
<td>1999.09-2007.06</td>
<td> Secondary School </td>
</tr>
<tr>
<td>2007.09-2011.06</td>
<td> College </td>
</tr>
<tr>
<td>2011.09-2015.06</td>
<td> University</td>
</tr>
</table>

<form autocomplete="on">
<p/>
<label>Year</label>
<input type="text" id="year" name="year" autofocus/>
<p/>
<label>Month</label>
<input type="text" name="month" id="month" />
<p/>
</form>
<input type="button" onClick="method()" /> 
```

JavaScript

```
function method(){
var year = document.getElementById("year").value;
var month = document.getElementById("month").value;
var data = new Date(year,month-1,1);
var dataTable = document.getElementById("table");
var cells = dataTable.querySelectorAll("td");
var cells2 = dataTable.querySelectorAll("td+td");

for (var i = 0; i < cells.length; i++){
    var mikro = cells[i].firstChild.data.split("-");
    var place = cells2[i].firstChild.data;
    var firstData = mikro[0].split(".");
    var secondData = mikro[1].split(".");
    var data1 = new Date(firstData[0],firstData[1]-1,1);
    var data2 = new Date(secondData[0],secondData[1]-1,1);
    if(data1<=data && data2>=data){     
        alert(place);
        }
    }
} 
```

在这里，我在表格中有 2 列，我想创建脚本来帮助我从中查找信息：我有`<input type="text" id="year" name="year" autofocus/>`，`<input type="text" name="month" id="month" />`我可以在哪里输入年和月。输入年和月后，我必须根据第 2 列获取信息第一列的日期例如：“输入年份：2002，输入月份：05 - 结果必须是'中学'”，因为它介于 1999.09-2007.06 之间。我看不出我的脚本有什么问题，它总是给我错误的信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T20:30:57.047

试试这个（[jsfiddle](http://jsfiddle.net/u53kY/)），每次将单元格索引增加 2，并使用更简单的`td`选择器：

```
function method () {
    var year = document.getElementById("year").value;
    var month = document.getElementById("month").value;
    var data = new Date(year, month - 1, 1);
    var dataTable = document.getElementById("table");
    var cells = dataTable.querySelectorAll("td");

    for (var i = 0; i < cells.length; i+=2) {
        var mikro = cells[i].firstChild.data.split("-");
        var place = cells[i+1].firstChild.data;
        console.log(mikro, place);
        var yearMonth1 = mikro[0].split(".");
        var yearMonth2 = mikro[1].split(".");
        var data1 = new Date(yearMonth1[0], yearMonth1[1] - 1, 1);
        var data2 = new Date(yearMonth2[0], yearMonth2[1] - 1, 1);
        if (data1 <= data && data2 >= data) {
            alert(place);
        }
    }
} 
```

# windows - 在循环之前对目录进行排序 - PowerShell

> ID：15957958
> 
> 赞同：2
> 
> 时间：2013-04-11T20:09:15.080
> 
> 标签：windows, powershell

我需要按从最早的创建日期到最新的顺序处理文件

这是正确的还是有更好的方法呢？

谢谢

```
Get-ChildItem -Path C:\Users\Tom\ -Filter "*.journal" | Sort-Object -Property CreationTime

ForEach ($sourcefile In $(Get-ChildItem $source | Where-Object { $_.Name -match "Daily_Reviews\[\d{1,12}-\d{1,12}\].journal" }))
{
    #### Process files in order from oldest to newest
    $file = $source+$sourcefile
 } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T20:35:02.273

简短的回答：不，但你很接近。

除非您将结果存储在变量中，否则排序（和其他效果）仅在管道期间存在。因此，您排序的第一行不用于下一行。但是，您可以像这样组合它们：

```
$source = "C:\Users\Tom\"   

Get-ChildItem -Path $source -Filter "*.journal" | 
Where-Object { $_.Name -match 'Daily_Reviews\[\d{1,12}-\d{1,12}\].journal' } | 
Sort-Object -Property CreationTime | ForEach-Object {
    #### Process files in order from oldest to newest
    $_.FullName
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T20:33:27.683

使用`sort-object`似乎是正确的方法，但您`foreach`没有使用排序列表。我会添加另一个`|`将输出从管道`sort-object`传输到`foreach`.

```
get-childitem -path c:\users\tom\ -filter "*.journal" |
sort-object -property creationtime |
where-object { $_.Name -match "Daily_Reviews\[\d{1,12}-\d{1,12}\].journal" } |
foreach-object {
    # $_ is the file we're currently looking at
    write-host $_.Name
} 
```

第一个命令是`get-childitem`. 它以无特定顺序输出文件列表。

文件的无序列表通过管道传送到`sort-object`. 它输出相同的文件列表，但现在按创建时间排序。

排序后的文件列表通过管道传输到`where-object`. 它输出过滤后的文件列表，仍然排序。

过滤和排序的文件列表通过管道传输到`foreach-object`，因此每个文件的主体`foreach`运行一次，`$_`即当前正在处理的文件。在这段代码中，我写出了文件名，但当然你可以用你想对文件做的任何事情来替换它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T08:15:17.350

这是我对此的看法。当前对象（例如 $_）在 foreach 脚本块中可用：

```
Get-ChildItem -Path C:\Users\Tom -Filter Daily_Reviews*.journal | 
Where-Object { $_.Name -match "Daily_Reviews\[\d{1,12}-\d{1,12}\].journal" } | 
Sort-Object -Property CreationTime | Foreach-Object{
   $_
} 
```

# email - 从 bash 邮件中的地址文本设置

> ID：15957961
> 
> 赞同：4
> 
> 时间：2013-04-11T20:09:37.103
> 
> 标签：email, sendmail

我可以从 bash 发送邮件，但不能更改 from 文本，它目前显示为“root”。

我希望电子邮件客户端在 from 字段中显示以下文本`script on myserver.com (root@myserver.com)`。

请问我该怎么做？

```
emailsubject="$scriptname ($scriptver) log at $startdate"

if [ $errorcount > 0 ]; then
    emailsubject="ERRORS($errorcount) - ${emailsubject}"
fi

mail -s "$emailsubject" tobealerted@hotmail.com < $logfile 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-01-22T11:38:51.833

如果您的“邮件”支持它，您可以使用 -a 开关添加自定义标头，如下所示：

```
mail -s "subject" -a "From: president@whitehouse.gov" ... 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-11T20:24:41.267

这不是 BASH 问题。这是邮件程序本身的问题。

运行命令`man mail`并查看命令的选项。它因系统而异。检查允许您设置邮件来自谁或发件人的参数。如果`mail`没有这样的参数，试试`mailx`哪个有更多的选项。（看起来您的系统`mailx`调用了`mail`.

在我的系统上，我使用`mailx`而不是，`mail`我可以使用`-r`参数来设置*发件人地址*：

```
mailx -r president@whitehouse.gov -s "Secret Message. For your eyes only" < $file 
```

# wpf - WPF 可编辑组合框验证

> ID：15957965
> 
> 赞同：2
> 
> 时间：2013-04-11T20:09:55.427
> 
> 标签：wpf, validation, mvvm

我想要完成的是能够验证输入到可编辑组合框中的新类别或从现有组合框的类别列表中选择一个。

验证仅适用于 selectedItem，不适用于输入到 Text 中的新文本。一旦我添加`ValidateOnDataErrors="True"`到 ComboBox'es Text 属性，输入新文本的事件就不会触发。Category 是一个带有 Id 和 Name 的简单对象。

XAML：

```
<Window.Resources>
    <ControlTemplate x:Key="ValidationErrorTamplate">
        <Border BorderBrush="DodgerBlue" BorderThickness="0.75">
            <AdornedElementPlaceholder />
        </Border>
    </ControlTemplate>
    <Style x:Key="ElementInError" TargetType="{x:Type FrameworkElement}">
        <Style.Triggers>
            <Trigger Property="Validation.HasError" Value="True">
                <Setter Property="ToolTip" Value="{Binding (Validation.Errors)[0].ErrorContent, RelativeSource={x:Static RelativeSource.Self}}" />
            </Trigger>
        </Style.Triggers>
    </Style>
</Window.Resources>

<ComboBox Name="CbCategory"
          DisplayMemberPath="Name"
          IsEditable="True"
          ItemsSource="{Binding Categories}"
          SelectedItem="{Binding SelectedCategory,
                                 UpdateSourceTrigger=PropertyChanged,
                                 ValidatesOnDataErrors=True}"
          Style="{StaticResource ElementInError}"
          Text="{Binding NewCategory.Name,
                         UpdateSourceTrigger=PropertyChanged,
                         ValidatesOnDataErrors=True}"
          Validation.ErrorTemplate="{StaticResource ValidationErrorTamplate}" /> 
```

视图模型：( `: IDataErrorInfo`)

```
 private Category _newCategory;
    private Category _selectedCategory;

    public ExpenseCategory SelectedCategory
    {
       get { return _selectedCategory; }
       set
           {
              if (Equals(_selectedCategory, value)) return;
              _selectedCategory = value;
              SendPropertyChanged("SelectedCategory");
            }
     }
     public ExpenseCategory NewExpenseCategory
     {
        get { return _newExpenseCategory ?? (_newExpenseCategory = new ExpenseCategory()); }
            set
            {
                if (Equals(_newExpenseCategory, value)) return;
                _newExpenseCategory = value;
                SendPropertyChanged("NewExpenseCategory");
            }
        }

public string this[string propertyName]
        {
            get
            {
                switch (propertyName)
                {
                    case "SelectedExpenseCategory":
                    case "NewExpenseCategory":
                        {
                            if ((SelectedCategory == null) || (NewCategory == null)
                            {
                                return "Category must be selected or entered";
                            }
                        }
                        break;
                }
                return string.Empty;
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T20:29:41.950

得到它的工作，它可能不是最好的方法，但它可以完成工作。

我基本上做了什么，我将 NewCategory 更改为字符串，而不是 Category 类型的对象。当用户将新值填充到组合框中时，它会根据传递给 NewCategory 构造函数的值启动一个新的 SelectedCategory。如果我保留对象类型类别的 NewCategory，它将不起作用。

```
 public string NewExpenseCategory
    {
        get { return _newExpenseCategory ?? (_newExpenseCategory = ""); }
        set
        {
            if (Equals(_newExpenseCategory, value)) 
                return;
            _newExpenseCategory = value;
            SendPropertyChanged("NewExpenseCategory");
            SelectedExpenseCategory = new ExpenseCategory
                {
                    Name = value
                };
        }
    }

    public string this[string propertyName]
    {
        get
        {
            switch (propertyName)
            {
                case "SelectedExpenseCategory":
                case "NewExpenseCategory":
                    {
                        if ((SelectedExpenseCategory.Name.Length == 0) && (NewExpenseCategory.Length == 0))
                        {
                            return "Category must be selected or entered";
                        }
                    }
                    break;
            }
            return string.Empty;
        }
    } 
```

# apache-flex - Flex 中 PNG 文件的图像尺寸和文件大小限制

> ID：15957974
> 
> 赞同：1
> 
> 时间：2013-04-11T20:10:31.220
> 
> 标签：apache-flex, exception, default.png

我正在使用 Flash 4.5，并阅读了很多有关图像处理的信息。我了解 Flash 对 JPG 图像的限制——可以毫无问题地处理高达 30000 x 30000 像素的图像。但是，对于 PNG 文件，如果图像的宽度或高度大于 8191 像素，或者文件大小大于 16Mpix，则不会处理图像。

当我加载图像时`FileReference`系统冻结并且它永远不会触发 COMPLETE 事件，这就是图像没有得到处理的原因。我也无法访问文件数据，例如宽度或高度，可能是由于缺少异常。

如何在不需要使用 PHP 的情况下访问图像尺寸和大小？

# javascript - 如何计算我的 Octopress 博客的页面浏览量？

> ID：15957976
> 
> 赞同：6
> 
> 时间：2013-04-11T20:10:33.497
> 
> 标签：javascript, blogs, jekyll, octopress

我想在我的博客文章中添加一个简单的计数器。这样，每篇博文都有自己的计数器，并且可以显示该博文被点击了多少次。

如何使用 Octopress 实现这一目标？有任何想法吗？

提前感谢您的任何提示！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-19T02:48:55.213

我认为最好的方法是设置通过将分析代码放在文件底部来在您的博客上设置[Google Analytics](http://www.google.com/analytics/)`_layouts/default.html`。

它不会让其他人看到您每个帖子的访问次数，但您个人将能够查看该数据以及更多。

其他人也可以看到，您可以使用使用 JavaScript 的第三方 API。第三方服务会为您跟踪浏览量，然后为您提供 JavaScript 片段，您可以将其粘贴到侧边栏或您希望浏览量显示的任何位置。[StatCounter](http://statcounter.com/free-hit-counter/)就是一个例子（没有验证它是否是一个好的服务）。

这是向 Jekyll 生成的静态站点等静态站点添加动态特性的常用方法。人们经常使用同样的技术来使用 Discus 向他们的博客添加评论。

# jboss - JBoss AS 7 模块类加载器 WEB-INF 库

> ID：15957978
> 
> 赞同：0
> 
> 时间：2013-04-11T20:10:53.070
> 
> 标签：jboss, classloader, jboss7.x, classnotfoundexception

我正在尝试将我的 Web 应用程序配置为 jboss 7.1.1.Final。事实证明，使用模块时，类模块中的类需要访问我的 war 文件的 WEB-INF/lib 内的文件夹。发生这种情况时会出现 java.lang.ClassNotFoundException。我认为模块类加载器在我的 WEB-INF/lib 中看不到类。我怎么能解决这个问题？

# python - 如何在 Python 中并行检查多个列表中是否存在一个项目？

> ID：15957980
> 
> 赞同：2
> 
> 时间：2013-04-11T20:10:54.273
> 
> 标签：python, list, loops, python-2.7, python-3.x

作为我项目的一部分，对于字典 d 中的每个单词（如下面的示例代码片段所示），我需要检查它是否存在于不同的列表中`f1, f2, f3`。我在这里只展示了 3 个列表。根据发生情况，我需要计算两个输出值（规则输入和权重）。我在这里面临的问题是，这个词可以出现在任意数量的列表中，比如 dict d 中的 word1 出现在列表中`f1, f2, f3`（如下所示）和 dict d 中的 word2 出现在 f1 和 f2 中，而 word3 仅出现在一个列表 f3 中。我有 100 个这些单独的列表。我需要一种有效且直接的方法来计算字典 d 中每个单词的输出值（规则输入和权重），基于它们在这些列表中的不同出现，这样我就不必检查每个出现的组合并写一个单独的条件，这会使事情变得复杂和丑陋。

**PS：**列表大小不同。在下面的示例中，f1、f2 和 f3 具有不同的大小。

**我的代码：**

```
import itertools

d = {'Rosa': 0.023, 'code': 0.356, 'Syntel': 0.144, 'Robotics': 0.245, 'Web': .134, 'sanskrit': 0.23, 'Tamil': 0.23}
f1 = [['Syntel', 0.2, 4, 0.46, 7, 0.9], ['code', 0.45, 9, 0.43, 2, 0.23], ['Robotics', .43, 3, .1, 3, .73]]
f2 = [['Web', 0.5, 5, 0.06, 6, 0.9], ['code', 0.05, 1, 0.28, 2, 0.73]]
f3 = [['Web', 0.5, 5, 0.06, 6, 0.9], ['sanskrit', 0.05, 1, 0.28, 2, 0.73], ['Tamil', 0.23, 4, .13, 5, .23], ['code', 0.32, 4, 0.12, 4, .24]]

# specific case where I am checking if a word of the dictionary occurs in all of the lists f1, f2 and f3
# I have to write chunk of code for every possible combo of occurrence which I think is a bad approach
# I am brain stuck ! Help please !!
for word, score in d.iteritems():
    for x in f1:
        if word == x[0]:
            for y in f2:
                if word == y[0]:
                    for z in f3:
                        if word == z[0]:
                            A = x[2] * x[3]
                            B = x[4] * x[5]
                            C = y[2] * y[3] + 1
                            D = y[4] * y[5] + 1
                            E = z[2] * z[3] + 1
                            F = z[4] * z[5] + 1
                            mfs = [[A, B], [C, D], [E, F]]
                            weights = sum([x[3], x[5], y[3], y[5], z[3], z[5]])
                            rule_inputs = list(itertools.product(*mfs))
                            len_comb = len(rule_inputs)
                            # 6 --> need code to find this automatically
                            weight_factor = (len(mfs) * len_comb) / 6
                            weights *= weight_factor
                            rule_inputs = sum([sum(r) for r in rule_inputs])
                            print word, rule_inputs, weights 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T20:30:55.960

正如 Joel Cornett 所说，您可能应该首先使用`dict`s 而不是`list`s。

但是如果你`list`出于某种原因需要 s ......好吧，如果你要搜索`list`多次，你可能想要构建一个`dict`来搜索：

```
d1 = {elem[0]: elem for elem in f1} 
```

然后，而不是这个：

```
for z in f3:
    if word == z[0]: 
```

......你可以这样做：

```
z = d3.get(word)
if z is not None: 
```

您可能还想关注 EAFTP 和`try`整个事情。你的整个循环看起来像这样：

```
for word, score in d.iteritems():
    try:
        x, y, z = d1[word], d2[word], d3[word]
    except KeyError:
        continue
    A = x[2] * x[3]
    # etc. 
```

这是假设您特别需要三个列表，而不是任意数字。如果您需要能够处理任意数量的列表，您可以这样做：

```
list_of_dicts = [{elem[0]: elem for elem in lst} for lst in list_of_lists]
for word, score in d.iteritems():
    try:
        values = [d[word] for d in list_of_dicts]
    except KeyError:
        continue
    A = values[0][2] * values[0][3]
    # etc. 
```

* * *

有几种替代方法，但这可能是您想要的。

您可以`sort`列出并使用每个列表，`bisect`而不是迭代线性搜索，或者使用类似的东西[`SortedCollection`](http://code.activestate.com/recipes/577197-sortedcollection/)为您或[`blist.sortedlist`](https://pypi.python.org/pypi/blist/)类似类型包装。这使得搜索 O(log N) 而不是 O(N)，并使代码更简单。但是 a`dict`使搜索 O(1) 而不是 O(N)，并使代码与使用排序列表一样简单，因此，除非您正在处理不可散列的键（而您不是），何必？

您还可以通过编写一个函数来包装`for`/ ，这为您提供与or相同的简单性，但没有性能提升。如果键既不可散列也不可排序，或者如果您有大量的小列表（如此之小以至于线性搜索实际上比 dict 或树查找更快——可能大小约为 2-3？），这可能很有用。但除此之外，你只是在做额外的工作（编写包装器）来减慢自己的速度，所以再说一次，为什么要麻烦呢？`if``find_in_list``dict``sortedlist``find_in_list`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T20:21:59.237

看看 mapreduce 库
[https://developers.google.com/appengine/docs/python/dataprocessing/overview](https://developers.google.com/appengine/docs/python/dataprocessing/overview)

# ruby-on-rails - 用户没有保存在我的教程代码中

> ID：15957981
> 
> 赞同：0
> 
> 时间：2013-04-11T20:10:55.140
> 
> 标签：ruby-on-rails, ruby

出于某种原因，我认为我的用户没有保存到数据库中。我的三个关于登录用户的测试失败：

```
describe "signin" do 
before { visit signin_path }

describe "with invalid information" do 
    before { click_button "Sign in" }

    it { should have_selector('title', text: 'Sign in') }
    it { should have_selector('div.alert.alert-error', text: 'Invalid') }

    describe "after visiting another page" do 
        before { click_link "Home" }
        it { should_not have_selector('div.alert.alert-error') }
    end
end

describe "with valid information" do 
    let(:user) { FactoryGirl.create(:user) }
    before do 
        fill_in "Email",    with: user.email.upcase
        fill_in "Password", with: user.password
        click_button "Sign in"
    end

    it { should have_selector('title', text: user.name) }
    it { should have_link('Profile', href: user_path(user)) }
    it { should have_link('Sign out', href: signout_path) }
    it { should_not have_link('Sign in', href: signin_path) }
end 
```

这是我在运行测试时遇到的错误：

```
ActionView::MissingTemplate:
   Missing template sessions/create, application/create with {:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder, :coffee]}. 
```

当我输入时`localhost:3000/sessions`，会弹出此错误`No route matches [GET] "/sessions"`。

我的配置路线似乎没问题：

```
SampleApp::Application.routes.draw do
  resources :users
  resources :sessions, only: [:new, :create, :destroy]

  root to: 'static_pages#home'

  match '/signup',  to: 'users#new'
  match '/signin',  to: 'sessions#new'
  match '/signout', to: 'sessions#destroy', via: :delete 
```

这是我的会话控制器：

```
def create
    user = User.find_by_email(params[:session][:email].downcase)
    if user && user.authenticate(params[:session][:password])
        sign_in user 
        redirect_to user 
    else
        flash.now[:error] = 'Incorrect email/password combination'
    end
end

def sign_in(user)
    cookies.permanent[:remember_token] = user.remember_token
    self.current_user = user
end

def signed_in?
    !current_user.nil?
end

def current_user=(user)
    @current_user = user 
end

def current_user
    @current_user ||= User.find_by_remember_token(cookies[:remember_token])
end 
```

我可以注册并正常登录，但标题中的“登录”链接不会更改为“退出”。

```
<% if signed_in? %>
        <li><%= link_to "Users", '#' %></li>
        <li id="fat-menu" class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown">
            Account <b class="caret"></b>
          </a>
          <ul class="dropdown-menu">
            <li><%= link_to "Profile", current_user %></li>
            <li><%= link_to "Settings", '#' %></li>
            <li class="divider"></li>
            <li>
              <%= link_to "Sign out", signout_path, method: "delete" %>
            </li>
          </ul>
        </li>
      <% else %>
        <li><%= link_to "Sign in", signin_path %></li>
      <% end %> 
```

我查看了源代码，但显然有些不对劲，我似乎无法找到错误。我也重置了数据库，但这似乎没有任何作用。

如果您需要我添加更多代码，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T20:17:12.040

该错误似乎在`create`会话控制器的操作中。

您应该`render "new"`在身份验证失败时执行

```
else
   flash.now[:error] = 'Incorrect email/password combination'
   render "new"
end 
```

当您没有与控制器操作同名的视图时，您需要重定向或呈现另一个模板（在本例中为`new`操作的模板）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T20:18:31.970

`ActionView::MissingTemplate`你得到的是因为在你的条款`else`中：

```
else
    flash.now[:error] = 'Incorrect email/password combination'
end 
```

没有`redirect_to`or`render`被调用，所以 Rails 将尝试渲染一个 create.html.erb （例如）。

这`No route matches [GET] "/sessions"`是因为您没有 GET 路线（`:index`将是创建此路线的人，但其目的完全不同）。通常在调用 create 时，这是使用 POST 发生的。

因此，要么是工厂没有创建您的用户，要么是您的身份验证方法失败。

# c# - 用年份格式化 TimeSpan

> ID：15957984
> 
> 赞同：27
> 
> 时间：2013-04-11T20:11:05.730
> 
> 标签：c#, .net, formatting, .net-4.5, timespan

我有一个具有 2 个日期属性的类：`FirstDay`和`LastDay`. `LastDay`可以为空。我想生成一个格式为`"x year(s) y day(s)"`. 如果总年份小于 1，我想省略年份部分。如果总天数小于 1，我想省略天部分。如果年或天为 0，则它们应分别表示“天/年”，而不是“天/年”。

**示例：**
2.2 年：“2 年 73 天”
1.002738 年：“1 年 1 天”
0.2 年：“73 天”
2 年：“2 年”

我有什么作品，但它很长：

```
private const decimal DaysInAYear = 365.242M;

public string LengthInYearsAndDays
{
    get
    {
        var lastDay = this.LastDay ?? DateTime.Today;
        var lengthValue = lastDay - this.FirstDay;

        var builder = new StringBuilder();

        var totalDays = (decimal)lengthValue.TotalDays;
        var totalYears = totalDays / DaysInAYear;
        var years = (int)Math.Floor(totalYears);

        totalDays -= (years * DaysInAYear);
        var days = (int)Math.Floor(totalDays);

        Func<int, string> sIfPlural = value =>
            value > 1 ? "s" : string.Empty;

        if (years > 0)
        {
            builder.AppendFormat(
                CultureInfo.InvariantCulture,
                "{0} year{1}",
                years,
                sIfPlural(years));

            if (days > 0)
            {
                builder.Append(" ");
            }
        }

        if (days > 0)
        {
            builder.AppendFormat(
                CultureInfo.InvariantCulture,
                "{0} day{1}",
                days,
                sIfPlural(days));
        }

        var length = builder.ToString();
        return length;
    }
} 
```

有没有更简洁的方法（但仍然可读）？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-04-11T20:20:03.087

A`TimeSpan`没有合理的“年”概念，因为它取决于起点和终点。（月份类似 - 29 天有多少个月？嗯，这取决于......）

为了给一个无耻的插件，我的[Noda Time](https://nodatime.org/)项目使这非常简单：

```
using System;
using NodaTime;

public class Test
{
    static void Main(string[] args)
    {
        LocalDate start = new LocalDate(2010, 6, 19);
        LocalDate end = new LocalDate(2013, 4, 11);
        Period period = Period.Between(start, end,
                                       PeriodUnits.Years | PeriodUnits.Days);

        Console.WriteLine("Between {0} and {1} are {2} years and {3} days",
                          start, end, period.Years, period.Days);
    }
} 
```

输出：

```
Between 19 June 2010 and 11 April 2013 are 2 years and 296 days 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-01-21T14:02:22.020

```
public string GetAgeText(DateTime birthDate)
{
        const double ApproxDaysPerMonth = 30.4375;
        const double ApproxDaysPerYear = 365.25;

        /*
        The above are the average days per month/year over a normal 4 year period
        We use these approximations as they are more accurate for the next century or so
        After that you may want to switch over to these 400 year approximations

           ApproxDaysPerMonth = 30.436875
           ApproxDaysPerYear  = 365.2425 

          How to get theese numbers:
            The are 365 days in a year, unless it is a leepyear.
            Leepyear is every forth year if Year % 4 = 0
            unless year % 100 == 1
            unless if year % 400 == 0 then it is a leep year.

            This gives us 97 leep years in 400 years. 
            So 400 * 365 + 97 = 146097 days.
            146097 / 400      = 365.2425
            146097 / 400 / 12 = 30,436875

        Due to the nature of the leap year calculation, on this side of the year 2100
        you can assume every 4th year is a leap year and use the other approximatiotions

        */
    //Calculate the span in days
    int iDays = (DateTime.Now - birthDate).Days;

    //Calculate years as an integer division
    int iYear = (int)(iDays / ApproxDaysPerYear);

    //Decrease remaing days
    iDays -= (int)(iYear * ApproxDaysPerYear);

    //Calculate months as an integer division
    int iMonths = (int)(iDays / ApproxDaysPerMonth);

    //Decrease remaing days
    iDays -= (int)(iMonths * ApproxDaysPerMonth);

    //Return the result as an string   
    return string.Format("{0} years, {1} months, {2} days", iYear, iMonths, iDays);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T20:14:40.860

我不会用`TimeSpan`. 一旦超过天数，日期数学就会变得棘手，因为一个月中的天数和一年中的天数不再是恒定的。这可能是为什么`TimeSpan`不包含`Years`and的属性`Months`。相反，我会确定两个`DateTime`值之间的年数/月数/天数等，并相应地显示结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-14T18:58:01.667

我认为这应该有效：

```
public static int DiffYears(DateTime dateValue1, DateTime dateValue2)
{
    var intToCompare1 = Convert.ToInt32(dateValue1.ToString("yyyyMMdd"));
    var intToCompare2 = Convert.ToInt32(dateValue2.ToString("yyyyMMdd"));
    return (intToCompare2 - intToCompare1) / 10000;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-15T20:32:16.927

```
Public Function TimeYMDBetween(StartDate As DateTime, EndDate As DateTime) As String
    Dim Years As Integer = EndDate.Year - StartDate.Year
    Dim Months As Integer = EndDate.Month - StartDate.Month
    Dim Days As Integer = EndDate.Day - StartDate.Day
    Dim DaysLastMonth As Integer

    'figure out how many days were in last month
    If EndDate.Month = 1 Then
        DaysLastMonth = DateTime.DaysInMonth(EndDate.Year - 1, 12)
    Else
        DaysLastMonth = DateTime.DaysInMonth(EndDate.Year, EndDate.Month - 1)
    End If

    'adjust for negative days
    If Days < 0 Then
        Months = Months - 1
        Days = Days + DaysLastMonth 'borrowing from last month
    End If

    'adjust for negative Months
    If Months < 0 Then 'startdate hasn't happend this year yet
        Years = Years - 1
        Months = Months + 12
    End If

    Return Years.ToString() + " Years, " + Months.ToString() + " Months and " + Days.ToString() + " Days"

End Function 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-07-15T08:15:16.773

我需要为 Core 3 执行此操作。NodaTime 似乎依赖于 Framework 4.7.2。我编写了以下方法，该方法似乎可以将时间跨度格式化为年、月和日，省略了不需要的部分。

```
public static string ToYearsMonthsAndDays(this TimeSpan span)
    {
        var result = string.Empty;
        var totalYears = span.Days / 364.25;
        var fullYears = Math.Floor(totalYears);

        var totalMonths = (span.Days - (365.24 * fullYears)) / 30;
        var fullMonths = Math.Floor(totalMonths);

        var totalDays = (span.Days - (365.24 * totalYears) - (30 * fullMonths)) / 30;
        var fullDays = Math.Floor(totalDays);
        var sb = new StringBuilder();
        if (fullYears > 0)
        {
            if (sb.Length > 0)
                sb.Append(", ");
            sb.Append(fullYears + "y");
        }
        if (fullMonths > 0)
        {
            if (sb.Length > 0)
                sb.Append(", ");
            sb.Append(fullMonths + "m");
        }
        if (fullDays > 0)
        {
            if (sb.Length > 0)
                sb.Append(", ");
            sb.Append(fullDays + "d");
        }
        return sb.ToString();
    } 
```

# javascript - Node.JS：FFmpeg 管道视频编码未创建缩略图

> ID：15957986
> 
> 赞同：2
> 
> 时间：2013-04-11T20:11:10.957
> 
> 标签：javascript, node.js, ffmpeg

我想在上传到 ffmpeg 期间通过管道传输视频以实时创建缩略图。一切正常，但没有创建 thumbnail.jpg 并且 ffmpeg 标准错误在库版本显示后挂起。

更新：我更新了我的代码，但它也没有创建有效的缩略图。

```
var formidable = require('formidable'),
        http = require('http'),
        sys = require('sys'),
        spawn = require('child_process').spawn;

function spawnFfmpeg(exitCallback) {
    var args = ['-i', 'pipe:0', '-c:v', 'mjpeg', '-ss', '00:00:13', '-vframes', '1', '-s', '100x80', 'thumbnail.jpg']
    var ffmpeg = spawn('ffmpeg', args);
    console.log('Spawning ffmpeg ' + args.join(' '));

    ffmpeg.on('exit', exitCallback);
    ffmpeg.stderr.on('data', function(data) {
        console.log('grep stderr: ' + data);
    });
    return ffmpeg;
}

http.createServer(function(req, res) {
    if (req.url == '/' && req.method.toLowerCase() == 'get') {
        // show a file upload form
        res.writeHead(200, {'content-type': 'text/html'});
        res.end
                ('<form action="/upload" enctype="multipart/form-data" method="post">'
                        + '<input type="text" name="title"><br>'
                        + '<input type="file" name="upload" multiple="multiple"><br>'
                        + '<input type="submit" value="Upload">'
                        + '</form>'
                        );
    } else if (req.url == '/upload' && req.method.toLowerCase() == 'post') {
        // parse a file upload
        var form = new formidable.IncomingForm();
        form.maxFieldsSize = 29 * 1024 * 1024;
        // Handle each part of the multi-part post
        var ffmpeg = spawnFfmpeg(function(code) {
            console.log('child process exited with code ' + code);
            res.end();
        });

        var form = new formidable.IncomingForm();
        // Handle each part of the multi-part post
        form.onPart = function(part) {
            // Handle each data chunk as data streams in
            part.addListener('data', function(data) {
                ffmpeg.stdout.pipe(res);
                res.pipe(ffmpeg.stdin);
                // Write each chunk to disk
                //savedFile.write(data);
            });
        };

        // Do it
        form.parse(req);
        return;
    }
}).listen(80, "127.0.0.1");

process.on('uncaughtException', function(err) {
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T21:35:31.707

经过一些研究和数小时的测试，我找到了正确的解决方案^_^

```
var formidable = require('formidable'),
        http = require('http'),
        sys = require('sys'),
        spawn = require('child_process').spawn;

function spawnFfmpeg(exitCallback) {
    var args = ['-i', 'pipe:0', '-c:v', 'mjpeg', '-ss', '00:00:13', '-vframes', '1', '-s', '100x80', 'thumbnail.jpg']
    var ffmpeg = spawn('ffmpeg', args);
    console.log('Spawning ffmpeg ' + args.join(' '));

    ffmpeg.on('exit', exitCallback);
    ffmpeg.stderr.on('data', function(data) {
        console.log('grep stderr: ' + data);
    });
    return ffmpeg;
}

http.createServer(function(req, res) {
    if (req.url == '/' && req.method.toLowerCase() == 'get') {
        // show a file upload form
        res.writeHead(200, {'content-type': 'text/html'});
        res.end
                ('<form action="/upload" enctype="multipart/form-data" method="post">'
                        + '<input type="text" name="title"><br>'
                        + '<input type="file" name="upload" multiple="multiple"><br>'
                        + '<input type="submit" value="Upload">'
                        + '</form>'
                        );
    } else if (req.url == '/upload' && req.method.toLowerCase() == 'post') {
        // parse a file upload
        var form = new formidable.IncomingForm();
        form.maxFieldsSize = 29 * 1024 * 1024;
        // Handle each part of the multi-part post
        var ffmpeg = spawnFfmpeg(function(code) {
            console.log('child process exited with code ' + code);
            res.end();
        });

        var form = new formidable.IncomingForm();
        // Handle each part of the multi-part post
        form.onPart = function(part) {
            // Handle each data chunk as data streams in
            part.addListener('data', function(data) {
                /*
                 * This only one line was the solution of my problem now all works really fast !! 500mbit like transloadit it does
                 */
                ffmpeg.stdin.write(data);
            });
        };

        // Do it
        form.parse(req);
        return;
    }
}).listen(80, "127.0.0.1");

process.on('uncaughtException', function(err) {
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T20:59:15.270

您的代码看起来像是在设置管道之前启动 ffmpeg。

以下未经验证，但听起来像您需要的：

[http://nodejs.org/api/child_process.html#child_process_child_process_spawn_command_args_options](http://nodejs.org/api/child_process.html#child_process_child_process_spawn_command_args_options)

> child_process.spawn() 的 'stdio' 选项是一个数组，其中每个索引对应于子进程中的一个 fd。该值为以下之一：
> 
> 'pipe' - 在子进程和父进程之间创建一个管道。管道的父端作为 ChildProcess.stdio[fd] 的 child_process 对象上的属性公开给父级。为 fds 0 - 2 创建的管道也可分别作为 ChildProcess.stdin、ChildProcess.stdout 和 ChildProcess.stderr 使用。

# c# - 图像采集卡的多线程性能问题（使用 Decklink SDK）

> ID：15957987
> 
> 赞同：0
> 
> 时间：2013-04-11T20:11:11.497
> 
> 标签：c#, multithreading, task-parallel-library

我使用 Blackmagic 硬件和 decklink SDK 开发了一个 C# 图像采集卡。我的主程序在 MTAthread 模式下运行。

在每个新帧上，我都有一个回调函数，名为`VideoInputFrameArrived()`. 我正在从此函数调用一些多线程任务，如下所示：

```
t1 = Task.Factory.StartNew(() => tempmatch.PictureAnalysis(x1));
t2 = Task.Factory.StartNew(() => tempmatch.PictureAnalysis(x2));
t3 = Task.Factory.StartNew(() => tempmatch.PictureAnalysis(x3));
t4 = Task.Factory.StartNew(() => tempmatch.PictureAnalysis(x4));

Task.WaitAll(t1, t2, t3, t4); 
```

它工作正常，但我不能超过 50% 的 CPU 使用率；我的 CPU 的 4 个内核中的每一个都以 50% 的速度运行。我花了很多时间来了解发生了什么，但我还没有找到要走的路。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T20:23:05.653

每个核心都有可能使用超线程，所以当你有 4 个物理核心时，你可能有 8 个逻辑核心。启动 8 个工作单元而不是 4 个，以便每个内核可以达到 100% 的利用率。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T20:23:22.277

首先：您是否希望单个任务受到cpu限制？如果您在单线程上运行，它会始终 100% 使用内核吗？如果没有，您可能会受到例如 I/O 的限制。如果你在两个核心而不是四个核心上运行，结果会怎样？

如果您希望单个任务受到 cpu 限制，请查看是否存在任何锁争用。这些任务是完全独立的，还是它们会争用锁，例如将结果存储在某个共享数据结构中，例如某个地方的 ConcurrentDictionary？Visual Studio（某些版本）中有一些工具可以让您可视化锁定争用。转到分析 > 启动性能向导。

并行 .NET 代码中的一个常见问题是 GC 受限，在 VS 的并发分析工具中，这将显示为一个线程定期暂停以等待 GC，因为分配是在另一个线程上完成的。如果您遇到这种情况，您基本上是在分析中以过高的速率分配内存。尝试在分析之前而不是在分析内部分配结果结构，并在并行执行期间尽量少分配。您还可以尝试使用不同的 GC 模式（服务器/工作站）和 GC 延迟模式来减少 GC 暂停。

# c# - 如何为 Windows 8 商店应用程序设置多个徽标

> ID：15957991
> 
> 赞同：0
> 
> 时间：2013-04-11T20:11:30.153
> 
> 标签：c#, windows, windows-8, windows-store-apps, manifest

最近我看到了一个 win 8 商店应用程序，它有 2 个标志，当然它们在地铁时间后会改变。

我想在我的应用程序中实现这一点，但我不知道如何添加更多徽标并向系统说这两个会改变。

我试图添加更多的标志来体现，但它没有奏效。

或者只是应用程序的开发人员将徽标制作为 GIF？

谢谢你的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T22:04:19.577

当您说徽标时，我想您是指开始屏幕上的磁贴？您可以通过各种机制实现更改，包括本地、计划、定期和推送通知。如果您只是想要循环浏览并与应用程序捆绑在一起的静态图像数量，则使用[local](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/Hh868253%28v=win.10%29.aspx)或[schedule](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/Hh868223%28v=win.10%29.aspx)。

不久前，我写了一篇关于所有这些选项的[相当广泛的博客系列，](http://blogs.msdn.com/b/jimoneil/archive/2012/08/02/windows-8-notifications-programmatic-concepts.aspx)[在开发中心也有关于这些选项的大量信息](http://msdn.microsoft.com/en-us/library/windows/apps/hh779725.aspx)。[App Builder 计划](http://aka.ms/8in30SO)第 3 周报道的第一部分也将这些信息放入构建应用程序的整体上下文中。

# c# - SimpleMembershipProvider 如何在 MVC4 中连接

> ID：15957993
> 
> 赞同：0
> 
> 时间：2013-04-11T20:11:37.610
> 
> 标签：c#, .net, asp.net-mvc, simplemembership

我们像这样在 asp.net mvc4 互联网模板中创建了一个 CustomSimpleMembershipProvider

```
public class MySimpleMembershipProvider : SimpleMembershipProvider    {
    public override bool RequiresUniqueEmail        {
        get            {                return true;            }
    }
} 
```

但是使用它似乎是一个谜，因为

*   没有 web.config 条目
*   InitializeSimpleMembershipAttribute 或 SimpleMembershipInitializer 中没有对 SimpleMembershipProvider 的引用，
    因此无法在此处更改

所以问题是 - 在 asp.net mvc4 中 SimpleMembershipProvider 的接线在哪里以及如何更改它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T13:32:33.210

它在 web.config 中连接。如果您使用 Internet 模板创建它，您应该在 web.config 中有一个条目，如下所示。

```
 <roleManager enabled="true" defaultProvider="SimpleRoleProvider">
  <providers>
    <clear/>
    <add name="SimpleRoleProvider" type="WebMatrix.WebData.SimpleRoleProvider, WebMatrix.WebData"/>
  </providers>
</roleManager>
<membership defaultProvider="SimpleMembershipProvider">
  <providers>
    <clear/>
    <add name="SimpleMembershipProvider" type="WebMatrix.WebData.SimpleMembershipProvider, WebMatrix.WebData" />
  </providers>
</membership> 
```

您需要将成员资格条目更改为以下内容：

```
 <membership defaultProvider="SimpleMembershipProvider">
  <providers>
    <clear/>
    <add name="SimpleMembershipProvider" type="MyAssembly.MyNamespace.MySimpleMembershipProvider, MyAssembly" />
  </providers>
</membership> 
```

但是创建您自己的从 SimpleMembershipProvider 继承的提供程序可能不是实现目标的最佳方式。SimpleMembership 易于定制，无需修改提供程序，如[本文所示](http://kevin-junghans.blogspot.com/2013/01/seeding-customizing-aspnet-mvc.html)。[您还可以使用WebSecurity.InitializeDatabaseConnection 方法](http://msdn.microsoft.com/en-us/library/gg569366%28v=vs.111%29.aspx)指定将电子邮件用于身份。我不确定覆盖 RequiresUniqueEmail 会给你想要的结果。查看这篇关于[将 SimpleMembership 与 MVC 解耦](http://kevin-junghans.blogspot.com/2013/03/decoupling-simplemembership-from-your.html)的文章。如果您采用这种方法，您可以使用 EF 中的 fluent API 来确保电子邮件是唯一的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T20:40:37.140

主要注册是从此方法执行的：

```
WebSecurity.InitializeDatabaseConnection 
```

[http://msdn.microsoft.com/en-us/library/webmatrix.webdata.websecurity.initializeddatabaseconnection%28v=vs.111%29.aspx](http://msdn.microsoft.com/en-us/library/webmatrix.webdata.websecurity.initializedatabaseconnection%28v=vs.111%29.aspx)

**（编辑）** 不确定您是否真的查看了链接，但这是您连接连接名称、表名称和列的地方。它在没有 web.config 条目的情况下工作的原因是 Simple Membership 默认已启用，您只需调用此方法即可激活它。

```
public static void InitializeDatabaseConnection(
string connectionStringName,
string userTableName,
string userIdColumn,
string userNameColumn,
bool autoCreateTables
) 
```

如果您想建立自己的提供程序，您仍然需要按照旧方式注册。此链接可能会有所帮助：

[http://weblogs.asp.net/jgalloway/archive/2012/08/29/simplemembership-membership-providers-universal-providers-and-the-new-asp-net-4-5-web-forms-and- asp-net-mvc-4-templates.aspx](http://weblogs.asp.net/jgalloway/archive/2012/08/29/simplemembership-membership-providers-universal-providers-and-the-new-asp-net-4-5-web-forms-and-asp-net-mvc-4-templates.aspx)