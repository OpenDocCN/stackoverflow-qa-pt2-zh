# StackOverflow 问答 14193000-14193999

# css - IE 9 - 更改字体大小后文本框中的文本被截断（百分比）

> ID：14193002
> 
> 赞同：1
> 
> 时间：2013-01-07T09:22:54.720
> 
> 标签：css, internet-explorer-9

当我尝试将固定宽度 texx 框的字体大小从 100% 更改为 200% 时，我在 IE 9 中遇到了一个奇怪的行为（而 firefox 工作正常）。输入框中的文本被部分截断。我不知道为什么和

我将源代码和脚本放在下面的 url 中。 [http://jsfiddle.net/VVyQm/3/](http://jsfiddle.net/VVyQm/3/)

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="language" content="en" />
</head>
<body>
<input style="width:100px;font-size:100%" type="text" value="abc"/>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T12:33:04.337

该问题是由 jsfiddle 环境中的某些设置引起的。直接在 IE 9 中测试以下文档不会出现问题：

```
<!doctype html>
<meta charset=utf-8>
<title></title>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<input style="width:100px;font-size:100%" type="text" value="abc"/>
<script>
$('body').css('font-size', '200%');
</script> 
```

因此，如果问题发生在 jsfiddle 之外的环境中，那么它显然是由其他一些代码引起的，例如正在使用的库或框架。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T08:38:46.140

对于 IE，您可以在更改字体大小后刷新输入中的值。之后显示将是正确的。

```
<input id="example_id" style="width:100px;font-size:100%" type="text" value="abc"/>
<script>
        $('body').css('font-size', '200%');    <!-- change font size -->
        $('#example_id').val($('#example_id').val()) <!-- refresh value-->
</script> 
```

# asp.net - 减少“asyncPostBackControlIDs”列表

> ID：14193004
> 
> 赞同：0
> 
> 时间：2013-01-07T09:23:03.483
> 
> 标签：asp.net, asp.net-ajax, updatepanel, fiddler

我有一个包含大量控件的页面，这些控件可以触发对服务器的回发。我知道在一个页面上拥有大量控件并不是一种好的做法，但是我的 ASP.NET Web 应用程序的性质需要它。看到我在这个页面上有大量的控件，我大量使用了UpdatePanels。我将 ViewState 存储在 Session 中，以减少页面的响应大小，效果很好。

但是，使用 Fiddler，我注意到 ajax 响应的 '__VIEWSTATE' 部分之后的 'asyncPostBackControlIDs' 包含每个可以触发回发的 UpdatePanel 的每个控件的列表。这份清单是巨大的！似乎该列表在每页上没有太大变化，因此每次在 UpdatePanel 中发生回发时下载整个列表是没有意义的......

有什么方法可以像使用 ViewState 一样将“asyncPostBackControlIDs”存储在服务器上，或者以其他方式减小“asyncPostBackControlIDs”列表的大小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T09:50:35.243

AFAIK，没有记录在`asyncPostBackControlIDs`其他地方存储的方法-此外，我非常怀疑是否存在这种可能性，因为客户端很可能需要这些控制ID来决定是进行常规回发还是异步回发。

您可以将UpdatePanel 的[ChildrenAsTriggers](http://msdn.microsoft.com/en-us/library/system.web.ui.updatepanel.childrenastriggers.aspx)属性设置为 false 并手动注册实际触发回发的控件 - 例如，您可能拥有具有 java-script 处理程序的 LinkBut​​ton/HyperLink。

此外，也许您可​​以减少可能导致回发的控件列表。例如，您可以使用 anchors(a) 代替链接按钮/超链接，然后设置隐藏变量，然后模拟（隐藏）按钮单击。在服务器端，隐藏变量的值将指示负责回发的实际控制。这样，您可以拥有一个按钮，作为许多其他控件的回发控件。

最后，你真的是一个想要拥有非常高效的请求/响应流然后放弃 ASP.NET 控制模型而转而使用 ASP.NET MVC 的人。或者在较小的范围内，停止使用 AJAX 的更新面板（它们会完成页面的 POST 并且几乎整个页面周期都在服务器端执行）并改用脚本服务（以及 jquery 插件）。

最后，您需要查看实际响应大小的控件 id 大小 - 例如，100K 响应中的 5K 长 id 可能不是很大的开销。减少这些 id 可能会为您节省 5%（如果可能的话），但同样的努力值得吗？

# objective-c - 从服务器端设置 iOS 应用程序语言

> ID：14193008
> 
> 赞同：0
> 
> 时间：2013-01-07T09:23:13.763
> 
> 标签：objective-c, ios, xcode, ios5, localization

我想从服务器端设置我的应用程序语言。这可能吗？这在 AppStore 中是否允许？请告诉我。提前致谢。

# android - Android GCM 服务位于主包之外的另一个包中

> ID：14193009
> 
> 赞同：1
> 
> 时间：2013-01-07T09:23:25.467
> 
> 标签：android

我为我的应用程序实现了 GCM。所以我尝试了 GCM 示例代码并使其工作。但是当我尝试在我的应用程序中注入客户端代码时，我很惊讶我必须将 GCMIntentService 类放在主包中，否则它不起作用（当然我通过添加`<service android:name=".gcm.GCMIntentService" />`“my_main_package.gcm”来更改清单文件是我放置服务的新包裹。

有关信息，当我将服务放在主包中时效果很好。

有人有想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T09:29:41.390

[这](http://dexxtr.com/post/28188228252/rename-or-change-package-of-gcmintentservice-class)是将**GCMIntentService**放入用户定义的包中的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T09:27:31.760

在课堂里`GCMBroadcastReceiver`

你注意到这个功能：

```
protected String getGCMIntentServiceClassName(Context context) {
    String className = context.getPackageName() +
            DEFAULT_INTENT_SERVICE_CLASS_NAME;
    return className;
} 
```

这是强加此功能的功能。您可以覆盖/修复返回值。

# javascript - 在本地存储中使用数组

> ID：14193022
> 
> 赞同：1
> 
> 时间：2013-01-07T09:24:10.260
> 
> 标签：javascript, jquery, arrays, local-storage

我正在尝试将过去的搜索添加到本地存储并使用数组来执行此操作。问题是它会将值添加两次，即使只有一次调用该函数。对于每个新的、不同的搜索，我希望将其添加到我的数组和存储中，如果超过五个，则弹出最后一项。

处理搜索时调用：

```
SetLocalStorageItem(searchString[1]); 
```

应该这样做的功能：

```
function SetLocalStorageItem(search) {
    if(search === '') {
        return;
    }
    console.log(localStorage);

    // Check if the browser support Local Storage
    if(localStorage) { 
        if(localStorage["pastSearches"]) {
            pastSearches.push(JSON.parse(localStorage["pastSearches"]));
        }
        // Check if the value exists in the array,
        // returns -1 if the array does not contain the value
        if($.inArray(search, pastSearches) == -1) {
            // If not, put it first and...
            pastSearches.unshift(search);
            //  ...pop one at the end if array is too big
            if(pastSearches.length > 5) {
                pastSearches.pop();
            }
            pastSearches.push(search);

            // Adding the search to the storage
            localStorage["pastSearches"] = JSON.stringify(pastSearches);
            DisplayPastSearches();
        }
    }
} 
```

清除和显示功能：

```
function ClearSearches() {
    // If there is any past searches
    localStorage.clear();
    pastSearches = [];
}

function DisplayPastSearches() {
    if(pastSearches.length) {
        $("<div>" + pastSearches + "</div>").appendTo(".container");
    }
} 
```

现在，如果我清除搜索数组并且存储为空，然后运行代码并搜索“billy”，上面的console.log提示：

```
Storage
length: 1
pastSearches: "["billy","billy"]"
__proto__: Storage 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T09:29:09.923

你正在推动`localStorage["pastSearches"]`你的`pastSearches`阵列。
这意味着您正在将一个数组推送到您的数组。基本上，您正在这样做：

```
var a = [1,2],
    b = [3,4];
a.push(b);
// a == [1, 2, [3, 4]] 
```

执行此操作时，旧内容也仍在数组中，因此您正在复制数据。

此外，**真正的问题是**您同时使用了`pastSearches.unshift(search);` *and* `pastSearches.push(search);`，并添加`search`了`pastSearches`两次。

试试这个：

```
function SetLocalStorageItem(search) {
    if(search === '') {
        return;
    }
    console.log(localStorage);

    // Check if the browser support Local Storage
    if(localStorage) { 
        if(localStorage["pastSearches"]) {
            pastSearches = JSON.parse(localStorage["pastSearches"]);
        }
        // Check if the value exists in the array,
        // returns -1 if the array does not contain the value
        if(pastSearches.indexOf(search) == -1) { // Also, no need to use jQuery here.
            // If not, put it first and...
            pastSearches.unshift(search);
            //  ...pop one at the end if array is too big
            if(pastSearches.length > 5) {
                pastSearches.pop();
            }
            // pastSearches.push(search); <-- would you look at that, you're adding search to the array twice.

            // Adding the search to the storage
            localStorage["pastSearches"] = JSON.stringify(pastSearches);
            DisplayPastSearches();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T09:31:38.007

一个可能的问题是解析后的数组在`pastSearches`每次`SetLocalStorageItem()`调用时都会被直接推送到数组中：

```
if(localStorage["pastSearches"]) {
   pastSearches.push(JSON.parse(localStorage["pastSearches"]));
} 
```

您可能想在添加新元素之前清空数组：

```
if(localStorage["pastSearches"]) {
   pastSearches = JSON.parse(localStorage["pastSearches"]);
} 
```

然后将新元素添加到其中：

过去搜索.push(搜索);

附带说明：为了清空数组，您可以简单地将其长度设置为零。这将阻止创建新的数组对象：

```
function ClearSearches() {
    // If there is any past searches
    localStorage.clear();
    pastSearches.length = 0;
} 
```

# jakarta-ee - 使 Glassfish 将顶级域重定向到特定文件夹

> ID：14193026
> 
> 赞同：1
> 
> 时间：2013-01-07T09:24:28.137
> 
> 标签：jakarta-ee, glassfish, glassfish-3

我希望我的 Glassfish (3.1.2) 将顶级域的所有流量重定向到特定的应用程序文件夹。假设我的域是`myapplication.com`并且它在 Glassfish`localhost/myapp`文件夹中运行。我已更改 DNS 设置以指向我的服务器 IP 地址。稍后我将让 Glassfish 处理更多指向服务器上特定文件夹的顶级域。目前该应用程序在默认情况下运行`domain1`。

如何将顶级域的所有 Web 流量（端口 80）重定向到 Glassfish 服务器上的特定应用程序文件夹？

PS。我不想在 web 根目录中放置一个文件 (html) 来处理重定向。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T10:29:22.473

在 Glassfish 管理面板中环顾四周后找到了答案。我已将`docroot`参数更改为指向选择的目录。

Glassfish 管理面板：

```
Configuration -> Virtual Server -> Server (Edit Virtual Server) 
```

要编辑的参数：

```
Docroot: ${com.sun.aas.instanceRoot}/myapp 
```

猜猜你应该定义一个新的虚拟服务器来处理更多的顶级域。但是，如果您定义另一个虚拟服务器或者 Glassfish 过滤到不同的文件夹取决于您是否应该使用另一个 http-listner，也许有人可以回答`docroot`？

# c# - 如何在 C# 中调用 method().method()

> ID：14193027
> 
> 赞同：2
> 
> 时间：2013-01-07T09:24:30.867
> 
> 标签：c#

> **可能的重复：**
> [C# 中的方法链](https://stackoverflow.com/questions/1119799/method-chaining-in-c-sharp)
> [创建流利的 API](https://stackoverflow.com/questions/1622662/creating-api-that-is-fluent)

我该如何进行以下编码？

```
Class1 objClass1 = new Class1().Add(1).Add(2).Add(3)... 
```

等等..

我如何实现`Add()`调用无限时间的方法来反映同一个对象？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T09:26:16.190

从逻辑上讲，如果您想在调用之后使用同一个对象，那么您必须返回该对象，该对象在方法中被**this**引用。

```
class Class1
{
    public Class1 Add(int num)
    {
        //TODO
        return this;
    }
} 
```

这是一个**方法链**的例子。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-07T09:27:53.303

它被称为*[可链接的方法](http://en.wikipedia.org/wiki/Method_chaining)*。

> 方法链接，也称为命名参数习语，是面向对象编程语言中调用多个方法调用的常用技术。每个方法都返回一个对象（可能是当前对象本身），从而允许在单个语句中将调用链接在一起。

基本上，您的方法应该返回对象的当前实例。

```
public YourClass Add()
{
    return this;
} 
```

为了清楚地理解方法链，这里是从 Java 转换而来的代码，包含在 wikipedia 页面中。设置器返回“ `this`”（当前`Person`对象）。

```
using System;

namespace ProgramConsole
{
    public class Program
    {
        public static void Main(string[] args)
        {
            Person person = new Person();
            // Output: Hello, my name is Soner and I am 24 years old.
            person.setName("Soner").setAge(24).introduce();
        }
    }

    class Person
    {
        private String name;
        private int age;

        public Person setName(String name)
        {
            this.name = name;
            return this;
        }

        public Person setAge(int age)
        {
            this.age = age;
            return this;
        }

        public void introduce() {
                Console.WriteLine("Hello, my name is " + name + " and I am " + age + " years old.");
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T09:26:46.433

您必须返回 Object 本身才能像这样链接此类方法调用

```
public Class1 Add(Object Whatever)
{
    // Do code here
    return this;
} 
```

# javascript - 图像从左到右的淡入淡出效果

> ID：14193028
> 
> 赞同：2
> 
> 时间：2013-01-07T09:24:32.770
> 
> 标签：javascript, jquery

我有淡入淡出效果结构。具有以下内容：

```
 <img src='firstStar.jpg' alt='star image' id='firstStar' />

    var loopImages = function(){

         $('#firstStar').fadeIn(1500, function(){

                   $('#firstStar').fadeOut(1500, loopImages);           
         });
    }
    loopImages(); 
```

它正在工作。但我想，这种效果从左到右。是否可以？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T09:27:02.863

你可以试试这个，我以前在我以前的项目中使用过它。

[http://jonobr1.github.com/diagonalFade/](http://jonobr1.github.com/diagonalFade/)

希望它符合您的需求。

问候。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T09:29:04.580

你可以尝试这样的事情`animate`

```
$(document).ready(function(){
    $("#firstStar").animate({left:200, opacity:"show"}, 1500);
}); 
```

确保 div 最初是隐藏的 (style="display:none;")。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-10T21:20:53.737

通过'但我想要，这种效果从左到右'，你的意思是指这个吗？

[http://www.oik-plugins.com/wordpress-plugins-from-oik-plugins/wordpress-plugins/oik-nivo-slider/nivo-settings/nivo-slider-transition-effects/nivo-slider-effectslicedownright/](http://www.oik-plugins.com/wordpress-plugins-from-oik-plugins/wordpress-plugins/oik-nivo-slider/nivo-settings/nivo-slider-transition-effects/nivo-slider-effectslicedownright/)

如果是，那么您可以使用名为 as 的效果`sliceDownRight`。

# asp.net - 获取 UpdatePanel 之外的 TextBox 的文本

> ID：14193032
> 
> 赞同：0
> 
> 时间：2013-01-07T09:24:39.153
> 
> 标签：asp.net, ajax, updatepanel

```
 <asp:TextBox ID="TextBox1" runat="server" Height="30px" Width="700px" placeholder="Enter Title" ></asp:TextBox>
    <asp:UpdatePanel ID="UpdatePanel1" runat="server">
            <ContentTemplate>

                            <asp:AjaxFileUpload ID="AjaxUploadImages" runat="server" AllowedFileTypes="jpg,jpeg,png,gif" 
                                onuploadcomplete="AjaxUploadImages_UploadComplete"/>

            </ContentTemplate>
        </asp:UpdatePanel> 
```

我想像这样在 OnUploadComplete 事件上获取 TextBox1 的文本-

```
 protected void AjaxUploadImages_UploadComplete(object sender, AjaxControlToolkit.AjaxFileUploadEventArgs e)
    {
       string path = Server.MapPath("~/images/") + e.FileName;
       AjaxUploadImages.SaveAs(path);
       string content = TextBox1.Text.ToString();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T09:38:25.053

```
 protected void AjaxUploadImages_UploadComplete(object sender,AjaxControlToolkit.AjaxFileUploadEventArgs e)
    {
       string path = Server.MapPath("~/images/") + e.FileName;
       AjaxUploadImages.SaveAs(path);
       string content = TextBox1.Text.ToString();
    } 
```

# r - 通过 RPostgreSQL 将表从 R 导出到 PostgreSQL

> ID：14193034
> 
> 赞同：3
> 
> 时间：2013-01-07T09:24:47.893
> 
> 标签：r, postgresql, export, rpostgresql

我正在使用*RPostgreSQL*我已经完成了一些进程，并且我在 R 中得到了一个表。我想把这个表从 R 放到 PostgreSQL 中，以便进一步分析我将使用 PostgreSQL 代码。问题是当我在 R 中有一个在 PostgreSQL 中不存在的表时，我无法对其执行 SQL 代码。

示例表 s_2 数据格式不是数据帧，temp 是浮点数，DateeTIMEE 是时间戳：

```
 temp    DateeTIMEE
1     -1.64 2007-09-29 00:01:09
2     -1.76 2007-09-29 00:03:09
3     -1.83 2007-09-29 00:05:09
4     -1.86 2007-09-29 00:07:09
5     -1.94 2007-09-29 00:09:09
6     -1.87 2007-09-29 00:11:09
7     -1.87 2007-09-29 00:13:09
8     -1.80 2007-09-29 00:15:09
9     -1.64 2007-09-29 00:17:09
10    -1.60 2007-09-29 00:19:09
11    -1.90 2007-09-29 00:21:09
12    -2.08 2007-09-29 00:23:09
13    -1.94 2007-09-29 00:25:09
14    -2.12 2007-09-29 00:27:09
15    -1.87 2007-09-29 00:29:09
16    -2.18 2007-09-29 00:31:09
17    -1.98 2007-09-29 00:33:09
18    -1.73 2007-09-29 00:35:09
19    -1.84 2007-09-29 00:37:09
20    -2.04 2007-09-29 00:39:09
21    -1.86 2007-09-29 00:41:09
22    -1.94 2007-09-29 00:43:09
23    -1.77 2007-09-29 00:45:09
24    -1.78 2007-09-29 00:47:09
25    -1.50 2007-09-29 00:49:09
26    -1.46 2007-09-29 00:51:09
27    -1.72 2007-09-29 00:53:09
28    -1.67 2007-09-29 00:55:09
29    -1.56 2007-09-29 00:57:09
30    -1.69 2007-09-29 00:59:09
31    -1.97 2007-09-29 01:01:09
32    -1.79 2007-09-29 01:03:09
33    -1.79 2007-09-29 01:05:09
34    -1.84 2007-09-29 01:07:09
35    -1.91 2007-09-29 01:09:09
36    -1.87 2007-09-29 01:11:09
37    -1.98 2007-09-29 01:13:09
38    -1.83 2007-09-29 01:15:09
39    -1.88 2007-09-29 01:17:09
40    -1.88 2007-09-29 01:19:09 
```

我尝试了以下代码：

```
library(sqldf)
sqldf("select * from s_2 where temp > -1 ") 
```

但我想出了这个错误：

```
 Error in postgresqlNewConnection(drv, ...) : RS-DBI driver: (could not connect postgres@localhost on dbname "test" ) Error in !dbPreExists : invalid argument type. 
```

此外，我可以在这种语法中使用表 s_2，而它是 R 中的临时变量并且在 db 中不存在吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T09:29:12.283

名为“p25”的表可以从以下代码轻松导出到数据库：

```
dbWriteTable(con, "p25",p25,overwrite = T ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T10:07:40.040

这个问题有点令人困惑，但您可以使用`sqldf`包来执行 sql 查询

```
library(sqldf)
sqldf("select * from s_2 where temp > -1 ") 
```

例如：我只是把你的 s_2 放在`data.frame`

```
> sqldf("select * from s_2 where temp < -2 ")
   temp      Datee    TIMEE
1 -2.08 2007-09-29 00:23:09
2 -2.12 2007-09-29 00:27:09
3 -2.18 2007-09-29 00:31:09
4 -2.04 2007-09-29 00:39:09 
```

# python - 多捕获对比opencv2.3.0 python2.7 windows

> ID：14193039
> 
> 赞同：1
> 
> 时间：2013-01-07T09:25:14.027
> 
> 标签：python, opencv, frame, capture

我正在尝试让我的网络摄像头执行以下操作：

1.  捕获 10 次捕获，持续 1 分钟（每 6 秒捕获一次）。
2.  然后将它们保存到阵列或计算机上。
3.  然后在 5 分钟内获取其他捕获（每 6 秒捕获一次）并将每个捕获与第一个数组进行比较。

到目前为止，我有这个代码：

```
import cv

cv.NamedWindow("Camera", 1)
# in case im using another camera:
cv.NamedWindow("Camera", 2)

capture = cv.CaptureFromCAM(0)

img = cv.QueryFrame(capture)

while True:
    img = cv.QueryFrame(capture)
    cv.ShowImage("Camera", img)
    if cv.WaitKey(10) == 27:
        break

cv.DestroyWindow("Camera") 
```

我该如何处理？有任何想法吗？提前致谢。

# scala - Converting integers to peano numbers using the type system

> ID：14193040
> 
> 赞同：6
> 
> 时间：2013-01-07T09:25:15.187
> 
> 标签：scala, type-level-computation, peano-numbers

This is a follow-up of [a question I asked almost two years ago](https://stackoverflow.com/questions/4978540/compile-time-check-for-vector-dimension). I am still experimenting with the type system to write a small linear algebra library where the dimensions of vectors/matrices/tensors is encoded using the type system (with Peano numbering). This allows the compiler to restrict the binary operations to objects of corresponding dimensions.

It works well, but I must specify each dimension type manually. For example (using [shapeless natural numbers](https://github.com/milessabin/shapeless/blob/master/core/src/main/scala/shapeless/nat.scala)):

```
type _1 = Succ[Nat._0]
type _2 = Succ[_1]
type _3 = Succ[_2] 
```

It's ok for small sizes but it gets boring if I need to define the size `_1024`. I'm trying (without success) to find a way to convert (at compile time) an integer literal to the corresponding Peano-number type.

In [Daniel Sobral answer](https://stackoverflow.com/questions/4978540/compile-time-check-for-vector-dimension/4979065#4979065) comments, I was told that this was not possible because Scala did not support dependent types. Now, Scala 2.10 has both dependent types and macros. So is there a way to achieve it ?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-07T12:31:11.140

This is possible right now with the macros in 2.10.0 (although the syntax will get cleaner with Paradise). I've posted an off-the-cuff complete working example [here](https://gist.github.com/4474632)—I'm sure it could easily be made much more concise—which you can use like this:

```
val holder = NatExample.toNat(13) 
```

And then:

```
scala> implicitly[holder.N =:= shapeless.Nat._13]
res0: =:=[holder.N,shapeless.Nat._13] = <function1> 
```

It will fail with a reasonable compile-time error if you pass a non-literal integer, etc.

# objective-c - 如何请求基于 someRelationship.count 排序的 coreData

> ID：14193044
> 
> 赞同：1
> 
> 时间：2013-01-07T09:25:29.243
> 
> 标签：objective-c, xcode, core-data

```
@interface Keyword : NSManagedObject

@property (nonatomic, retain) NSString * thekeyword;
@property (nonatomic, retain) NSSet *businesses;
@property (nonatomic, retain) NSSet *catalogWithThisKeywords;
@property (nonatomic, retain) NSSet *images;
@property (nonatomic, retain) CategoryNearby *shortCutSearches;
@end 
```

我想得到一个按排序的请求`businesses.count`

所以我提出这个要求：

```
(lldb) po request
(NSFetchRequest *) $4 = 0x089ccca0 <NSFetchRequest: 0x89ccca0> (entity: Keyword; predicate: (TRUEPREDICATE); sortDescriptors: ((
    "(businesses.count, ascending, compare:)",
    "(thekeyword, ascending, compare:)"
)); type: NSManagedObjectResultType; returnsObjectsAsFaults: NO; ) 
```

注意businesss.count 作为第一个sortDescriptors

这是结果：

```
2013-01-07 16:19:50.391 BadgerNew[88578:c07] *** Terminating app due to uncaught exception 'NSUnknownKeyException', reason: '[<NSDictionaryMapNode 0x89c4720> valueForUndefinedKey:]: this class is not key value coding-compliant for the key count.'
*** First throw call stack:
(0x2208022 0x1d8ecd6 0x2207ee1 0x149eefe 0x140d831 0x140cc99 0x1a22c08 0x143eae2 0x14108c5 0x143f911 0x141087c 0x143e18b 0x1440904 0x1a212e9 0x1a20229 0x1a2004b 0x19a945d 0x19a72fd 0x465bf 0x46372 0x10d443 0x10cedb 0x142f63e 0x14281e7 0x1427eea 0x14b80ad 0x1f65330 0x1f67509 0x213f803 0x213ed84 0x213ec9b 0x292b7d8 0x292b88a 0xaf1626 0x252d 0x2455) 
```

嗯……怎么了？

someKeyword.businesses 的类型是支持的 NSSet `count`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T10:00:40.817

您可以使用“键值编码编程指南”中记录的[集合运算符。](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/KeyValueCoding/Articles/CollectionOperators.html%23//apple_ref/doc/uid/20002176-BAJEAIEE)

在您的情况下，排序描述符

```
[[NSSortDescriptor alloc] initWithKey:@"businesses.@count" ascending:YES] 
```

应该管用。

# entity-framework - EF：禁用时自动迁移正在运行

> ID：14193050
> 
> 赞同：9
> 
> 时间：2013-01-07T09:25:49.013
> 
> 标签：entity-framework, entity-framework-5, database-migration

我正在尝试更新构建服务器上的数据库，但它失败了，因为它正在尝试运行自动迁移，即使它们已被禁用。数据库已经存在，我只需要应用最新的迁移。这是我的背景：

```
public sealed class Configuration : DbMigrationsConfiguration<CableSenseInstanceConfiguratorContext>
{
    public Configuration()
    {
        AutomaticMigrationsEnabled = false;
    }
} 
```

我有一堆手动创建的迁移文件，这是最新的：

```
public partial class Settings : DbMigration
{
    public override void Up()
    {
        AddColumn("dbo.MasterInstances", "Settings", c => c.String());
    }

    public override void Down()
    {
        DropColumn("dbo.MasterInstances", "Settings");
    }
} 
```

如果然后我从包管理器控制台手动更新数据库，我会看到它尝试运行自动迁移（由于表已经存在而失败）：

```
Applying code-based migrations: [201204200805145_NoMoreCerts, 201210311451543_SuperUsers, 201301041036414_Settings, 201301041128583_Settings2].
Applying code-based migration: 201204200805145_NoMoreCerts.
Applying automatic migration: 201204200805145_NoMoreCerts_AutomaticMigration. 
```

我的 __MigrationHistory 表只有一个用于初始创建的条目。如何阻止它进行自动迁移？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-07T12:59:15.860

在此处查看 jjslagace 的答案：

[即使禁用了自动迁移，Update-Database 也会尝试进行自动迁移](https://stackoverflow.com/questions/12341470/update-database-tries-to-do-an-automatic-migration-even-with-automatic-migration)

您正在手动构建迁移。我的猜测是实体框架想要添加一些你在迁移脚本中没有的东西，或者它想要以不同的方式命名列等等。EF 有一个大脑，而且这个大脑相当简单。除非您使用**流利**的方式告诉它（而不是通过手动创建/调整迁移文件），否则它期望事情以某种方式发生。从上面问题的答案看来，有时这会导致您看到的问题。

长话短说不要手动构建迁移文件。而是运行 add-migrations 命令。这将为您创建迁移，并且您可以看到 EF 在将其应用于您的数据库之前期望做什么（因为有时它很愚蠢）。如果您需要覆盖 EF 为您生成的内容，请通过覆盖 OnModelCreating 在 DBContext 类中添加流畅的映射。然后使用 -force 选项再次运行 add-migration。 [这是使用 Fluent API](http://msdn.microsoft.com/en-US/data/jj591617)自定义 EF 映射的一个很好的参考。冲洗并重复，直到获得所需的迁移，**然后**运行 ​​update-database。

希望有帮助！

# drupal - Drupal Solr 正在编制索引，但未显示任何搜索结果

> ID：14193054
> 
> 赞同：1
> 
> 时间：2013-01-07T09:26:05.083
> 
> 标签：drupal, solr, facet

我有一个运行 Apache Solr 安装 (3.6.2) 和 Facets 的 Drupal 7.17 安装。方面似乎工作完美，但是当我导航到搜索页面（选择或不选择方面）时，没有显示任何结果。有人知道可能导致这种情况的原因吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T11:04:51.880

好的，经过数小时的搜索，我终于能够修复错误。如果有人遇到同样的问题，这里是：当结合 Apache solr 使用 facet api 模块时，在 Drupal 的 Apache Solr 设置下创建 facet 时，您将看到以下选项：

*   在非搜索页面上显示构面块（复选框）
*   在以下页面上显示构面块 (textarea)

我启用了复选框，因为我想在所有页面上显示构面块，所以我在 textarea 中输入了 *。然而，问题是（我猜），该构面块随后在搜索页面上呈现两次（但您只能看到一次）并弄乱了 solr 查询，导致没有搜索结果。

所以，很明显，我为解决这个问题所做的就是从 textarea 中删除 *，并设置我想要显示构面的路径（所有，期待搜索页面）。

# php - 为什么我的代码在 php mysql 中只返回每秒一次的结果？

> ID：14193057
> 
> 赞同：1
> 
> 时间：2013-01-07T09:26:11.403
> 
> 标签：php, mysql

我一直在编写一些从 MySQL 数据库中提取条目的代码。这些是数字 1 到 38

但是，它只返回每隔一个数字，即 2,4,6,8 而不是 1,2,3,4。

```
$result = mysql_query("select (caseID) FROM `case` order by caseID")
 or die(mysql_error());  

while(mysql_fetch_array( $result )) 
{ 
    $row = mysql_fetch_assoc($result); 
    $countName= $row['caseID'];

    Print $countName;
} 
```

我尝试了各种更改并将代码减少到最低限度。但似乎没有任何效果。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-07T09:27:08.717

调用 mysql_fetch_array 两次，这就是原因。

试试这个

```
while($row=mysql_fetch_assoc( $result )) 
{ 
$countName= $row['caseID'];
 print $countName;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T09:30:53.887

这是因为您正在调用`mysql_fetch_array`，它检索一个结果，然后您调用`mysql_fetch_assoc`，它检索另一个结果。然后重复此操作，直到没有更多结果。

或者，换句话说，你在不使用它的情况下获取一个结果，然后获取另一个结果，然后使用它，有效地跳过所有其他结果。

这应该做的工作：

```
while($row = mysql_fetch_assoc($result)) 
{ 
    print $row['caseID'];
} 
```

另外，请查看[文档](http://php.net/mysql_query)。把你的眼睛转向那个写着“警告”的大盒子，里面有一个停车标志。

# hibernate - 休眠条件按子属性分组

> ID：14193058
> 
> 赞同：3
> 
> 时间：2013-01-07T09:26:12.897
> 
> 标签：hibernate, hibernate-criteria

假设如下：

```
public class Enterprise
{
   private int id;
   private String name;
}
public class Site
{
   private int id;
   private String name;
   private Enterprise enterprise; //@ManyToOne relation
}
public class Area
{
   private int id;
   private String name;
   private Site site; //@ManyToOne relation
} 
```

我想按企业使用休眠标准分组结果执行查询。

```
 Criteria criteria = session.createCriteria(Area.class);
    criteria.setProjection(Projections.projectionList()  
                    .add(Property.forName("id").as("id")) 
                    .add(Property.forName("name").as("name"))
        .add(Projections.groupProperty("site.enterprise")))
        .setResultTransformer(Transformers.aliasToBean(Area.class));
/*
 * more conditions
 */
    List<Area> areas = criteria.list(); 
```

执行此休眠时返回异常：org.hibernate.QueryException：无法解析属性：site.enterprise ...

有没有一些优雅的方法来做到这一点。先感谢您。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-07T09:39:59.377

我相信您可能需要先设置别名：

```
criteria.createAlias("site", "s") 
```

然后使用：

```
Projections.groupProperty("s.enterprise") 
```

您可能还需要对字段而不是实体进行分组，因此：

```
site.enterprise.name // or id 
```

这可能需要您也为其创建别名，`enterprise`但您可能不需要。

**更新1：**你可能会得到这样的结果：

```
Criteria criteria = session.createCriteria(Area.class);
criteria.createAlias("site", "s")
        .createAlias("s.enterprise", "e")
        .setProjection(Projections.projectionList()  
                .add(Property.forName("id").as("id")) 
                .add(Property.forName("name").as("name"))
    .add(Projections.groupProperty("s.e.name")))
    .setResultTransformer(Transformers.aliasToBean(Area.class)); 
```

**更新 2：**叫我疯了，但从上面的例子来看，你可能会采取一种非常冗长的方法，没有充分利用 Hibernate 的潜力——看起来你正试图像使用 SQL 一样使用它。Hibernate 已经知道您的实体、它们的字段和关系。在我看来，这相当于上面的：

```
Criteria criteria = session.createCriteria(Area.class);
criteria.createAlias("site", "s")
        .createAlias("s.enterprise", "e")
        .add(Projections.groupProperty("s.e.name"));

// Any other conditions.

List<Area> areas = criteria.list(); 
```

我什至不确定你现在为什么要分组...

# c# - Windows Phone 8 Toolkit 中的 CustomMessageBox 抛出 NullPointerException

> ID：14193059
> 
> 赞同：2
> 
> 时间：2013-01-07T09:26:13.837
> 
> 标签：c#, windows-phone, windows-phone-8

创建代码`CustomMessageBox`：

`CustomMessageBox`是一个属性，而不是对 Toolkit 中 C# 类的引用。

```
CustomMessageBox.Dismissed += (dismissSender, dismissedEvent) =>
{
    switch (dismissedEvent.Result)
    {
        case CustomMessageBoxResult.LeftButton:
            PlaceCall(clickedFavorite.Name, clickedFavorite.PhoneNo);
            break;
        case CustomMessageBoxResult.RightButton:
            HERE ---> SendText(clickedFavorite.PhoneNo);
            break;
    }
}; 
```

方法代码`SendText()`：

```
private void SendText(String phoneNo)
{
    var smsTask = new SmsComposeTask
                      {
                          To = phoneNo
                      };

    smsTask.Show();
} 
```

事情是当`SmsComposeTask`启动时，电话导航到短信应用程序，这是正确的。

如果用户随后决定返回，使用硬件返回按钮，SMS 应用程序将关闭并且手机再次显示我的应用程序 - 但立即关闭，由 NullPointerException 引起：

```
 at Microsoft.Phone.Controls.CustomMessageBox.ClosePopup(Boolean restoreOriginalValues)
   at Microsoft.Phone.Controls.CustomMessageBox.<>c__DisplayClass4.<Dismiss>b__1(Object s, EventArgs e)
   at Microsoft.Phone.Controls.Transition.OnCompleted(Object sender, EventArgs e)
   at MS.Internal.CoreInvokeHandler.InvokeEventHandler(Int32 typeIndex, Delegate handlerDelegate, Object sender, Object args)
   at MS.Internal.JoltHelper.FireEvent(IntPtr unmanagedObj, IntPtr unmanagedObjArgs, Int32 argsTypeIndex, Int32 actualArgsTypeIndex, String eventName) 
```

我也尝试过覆盖该`OnBackKeyPress`事件，如下所示：

```
protected override void OnBackKeyPress(System.ComponentModel.CancelEventArgs e)
{
    if (CustomMessageBox != null && CustomMessageBox.IsEnabled)
    {
        e.Cancel = true;
    }
    else
    {
        base.OnBackKeyPress(e);
    }
} 
```

**有谁知道该怎么做？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T12:40:29.340

我找到了解决我自己问题的方法。`CustomMessageBox`我找到[了 Coding4Fun Windows Phone Toolkit](http://coding4fun.codeplex.com/releases/view/92875) ，而不是使用 faulty ，它提供了一个迄今为止更稳定的消息框，称为`MessagePrompt`- 这里是如何使用它。

**创建按钮**

```
var smsButton = new Button { Content = "SMS" };
smsButton.Click += (o, args) =>
{
    // do something
};

var buttonList = new List<Button>
{
    smsButton
}; 
```

**创建实际的消息提示**

```
var msgPrompt = new MessagePrompt
{
    Title = "Message Prompt Title",
    Body = new TextBlock { Text = "Text for the Body", FontSize = 25, TextWrapping = TextWrapping.Wrap },
    ActionPopUpButtons = buttonList
}; 
```

**展示下**

```
msgPrompt.Show() 
```

**没有公牛**

我所经历的一件好事**是**`MessagePrompt`，您不必像 with 那样绑定到两个静态的**左右**按钮。**`CustomMessageBox`**

 **如果需要，您可以将该`Body`属性设置为一个全新的 XAML 页面，这使得该控件具有灵活性。

参考：[Coding4Fun WP7 消息提示深入](http://www.windowsphonegeek.com/articles/Coding4Fun-WP7-Message-Prompt-in-depth)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T09:50:33.760

这个问题与 Windows Phone 应用程序生命周期无关。可以在[这里找到，图 6](http://msdn.microsoft.com/en-us/windowsphonetrainingcourse_applicationlifetimewp7lab_topic2.aspx)。当您的程序处于活动状态时激活另一个程序时，您应该保存所有应用程序数据，以便当重新激活事件（例如使用后退按钮导航回您的应用程序）再次启动您的程序时，您可以再次加载用户的数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T10:00:13.870

我不确定发生了什么，但您可以延迟 SMS 任务以避免该问题：

```
CustomMessageBox.Dismissed += (dismissSender, dismissedEvent) =>
{
    switch (dismissedEvent.Result)
    {
        case CustomMessageBoxResult.LeftButton:
            PlaceCall(clickedFavorite.Name, clickedFavorite.PhoneNo);
            break;
        case CustomMessageBoxResult.RightButton:
            Dispatcher.BeginInvoke(new Action(() => SendText(clickedFavorite.PhoneNo)));
            break;
    }
}; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-09T01:15:01.300

我的 0.02$：这是 CustomMessageBox 中的一个错误。他们在那里让很多单身人士保持活力，一个好的计时错误并没有带来什么好处。同意 KooKiz 的观点，如果不修复 CustomMessageBox 或等到 CustomMessageBox 完成它，你就无法解决这个问题。根据我的临时测试，它需要 2-6 Dispatcher.BeginInvoke() 之间的任何时间，直到这些操作完成。相反，也许考虑使用 DispatcherTimer 并等待 256MS，这应该足够了。

```
private void MainPage_Loaded(object sender, RoutedEventArgs e)
{
    var msgBox = new CustomMessageBox()
                 {
                     Caption = "foo",
                     Message = "bar",
                     LeftButtonContent = "baz",
                     RightButtonContent = "goo",
                     IsFullScreen = false,

                 };

    msgBox.Dismissed += (s, args) =>
    {
        DispatcherTimerHelper.InvokeReallySoon(() =>
        {
            new SmsComposeTask()
            {
                Body = "foo",
                To = "bar"
            }.Show();
        });

    };

    msgBox.Show();
}

public static class DispatcherTimerHelper
{
    public static void InvokeReallySoon(Action action)
    {
        var t = new DispatcherTimer() {Interval = TimeSpan.FromMilliseconds(256)};
        t.Tick += (s, args) => action();
        t.Start();
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-08T13:11:24.567

问题只是发生在 wp8 中。我在 wp7 中使用相同的代码，没有发生任何错误。

使用 Code4fun 消息框是一个不错的选择，但是你需要调用的是 Button Click handler

```
 MessagePrompt.Hide(); 
```

关闭消息提示。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-06-18T21:43:43.700

在被解雇的事件上使用布尔值来定义按下了哪个按钮。然后我实现了我将在 Unloaded 事件中的被解雇事件中实现的代码。这似乎解决了这个问题。

IE

```
 messageBox.Dismissed += (s1, e1) =>
    {
        switch (e1.Result)
        {
            case CustomMessageBoxResult.LeftButton:
                {
                    delete = true ;
                }
                break;
            case CustomMessageBoxResult.RightButton:
                break;
            case CustomMessageBoxResult.None:
                break;
            default:
                break;
        }
    };

    messageBox.Unloaded += (s1, e1) =>
    {
        if (delete)
            DeleteWorkout();
    }; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-06-30T13:19:56.033

这是一个已知的错误。它已在最新版本中修复。删除引用并再次安装工具包。**

# c# - C# 编译器是否会自动处理 IDisposable 对象？

> ID：14193066
> 
> 赞同：2
> 
> 时间：2013-01-07T09:26:28.977
> 
> 标签：c#, .net, idisposable, compiler-optimization

假设我有一个`public static Rectangle DrawRectangle(Vector origin, Vector size)`返回类型对象的方法`Rectangle : IDisposable`

如果我只调用方法`DrawRectangle(origin, size)`，但不将返回值分配给变量`myRectangle = DrawRectangle(origin, size)`，编译器会自动检测并调用`DrawRectangle(origin, size).Dispose()`，还是我必须自己做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T09:27:03.237

没有意义。

最终他完成了，但没有。它不会自动调用 Dispose。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T09:28:42.533

如果您的`Rectangle`班级实现`IDisposable`了，请在可能的情况下尝试该`using( ) { ... }`声明。

[链接](http://msdn.microsoft.com/en-us/library/yh598w02%28v=vs.100%29.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-07T09:33:48.963

编译器将代码构建到程序集中并且不负责任何执行。.net 运行时运行您的代码，更具体地说，垃圾收集器处理内存清理。在 using 块内调用实现 IDisposable 的对象通常是最佳实践。例如：

使用 (var obj = new object) { ... 做你的事情 }

这将帮助运行时了解您的对象何时超出范围并提前清理它，但只要您不保留对对象的引用，运行时最终会清理它并为您处理它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-07T09:33:30.933

如果您希望 CLR 调用 Dispose 方法，通常建议在您的类中实现所谓的[Dispose 模式。](http://msdn.microsoft.com/en-us/library/fs2xkftw%28VS.80%29.aspx)但是，我不会依赖 CLR，也不会等待 GC 收集对象并改用[using](http://msdn.microsoft.com/en-us/library/yh598w02%28v=vs.80%29.aspx)子句。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-07T09:38:35.573

我只能想到编译器自动调用 dispose 的两种情况；最明显的是：

```
using(var obj = ... )
{
  // some code
} 
```

这是一个明确的指令，说“最后，无论成功还是失败，如果`obj`非空，则调用`obj.Dispose()`”。基本上它扩展为：

```
{
   var obj = ...
   try {
       // some code
   } finally {
       if(obj != null) obj.Dispose();   
   }
} 
```

另一个是`foreach`, where-by 迭代器被处理 - 虽然它变得有点复杂，因为`IEnumerator`没有指定这`IDisposable`是必需的（相比之下，`IEnumerator<T>` *确实*指定了），并且在技术上`IEnumerable`甚至不需要`foreach`，但基本上：

```
foreach(var item in sequence) {
   // some code
} 
```

可以表示为（尽管规范可能会略有不同）：

```
{
    var iter = sequence.GetEnumerator();
    using(iter as IDisposable)
    {
        while(iter.MoveNext())
        {   // note that before C# 5, "item" is declared *outside* the while
            var item = iter.Current;
            // some code
        }
    }
} 
```

在所有其他情况下，处置资源是*您的*责任。

如果你不确保它`Dispose()`被调用，那么在 GC 最终收集对象之前什么都不会发生；***如果***有一个终结器（不一定有，通常也没有），将调用终结器 - 但这与`Dispose()`. 它***可能***（取决于每种类型的实现）最终会做与`Dispose()`: 相同的事情，但可能不会。

# android - 改变Actionbar Overflow的样式

> ID：14193071
> 
> 赞同：5
> 
> 时间：2013-01-07T09:26:41.307
> 
> 标签：android, background, android-actionbar, android-menu

我在我当前的 android 应用程序中使用 Theme.Holo。

![在此处输入图像描述](../Images/8de751490186341718bfc1b8198aed0e.png)

以上是我当前主题的溢出 UI。

**我想将溢出菜单的背景颜色自定义为 RGB（245、243、239），将字体颜色自定义为 RGB（64、64、64）。**

以下是我正在使用的 style.xml

```
<style name="CustomActivityTheme" parent="@android:style/Theme.Holo">
    <item name="android:actionBarStyle">@style/CustomActivityTheme.ActionBar</item>
    <item name="android:actionMenuTextColor">#000000</item>
    <item name="android:divider">@drawable/action_bar_div</item>
    <item name="android:actionOverflowButtonStyle">@style/MyActionButtonOverflow</item>
</style>

<style name="MyActionButtonOverflow" parent="android:style/Widget.Holo.ActionButton.Overflow">
    <item name="android:src">@drawable/overflow</item>
</style>

<style name="CustomActivityTheme.ActionBar" parent="@android:style/Widget.Holo.Light.ActionBar">
    <item name="android:background">@drawable/actionbar_bg</item>
    <item name="android:titleTextStyle">@style/CustomActivityTheme.ActionBar.Text</item>
    <item name="android:subtitleTextStyle">@style/CustomActivityTheme.ActionBar.Text</item>
</style>

<style name="CustomActivityTheme.ActionBar.Text" parent="@android:style/TextAppearance">
    <item name="android:textColor">#000000</item>
    <item name="android:textSize">16sp</item>
</style>

<style name="activated" parent="android:Theme.Holo">
    <item name="android:background">?android:attr/activatedBackgroundIndicator</item>
</style>

<!-- style for removing the floating dialog -->
<style name="CustomDialogTheme">
    <item name="android:windowIsFloating">false</item>
    <item name="android:windowNoTitle">true</item>
</style>

<!-- style for transparent image resource  activity -->

<style name="Theme.Transparent" parent="android:Theme">
    <item name="android:windowIsTranslucent">true</item>
    <item name="android:windowBackground">@android:color/transparent</item>
    <item name="android:windowContentOverlay">@null</item>
    <item name="android:windowNoTitle">true</item>
    <item name="android:windowIsFloating">false</item>
    <item name="android:backgroundDimEnabled">true</item>
    <item name="android:windowAnimationStyle">@style/MyAnimation.Window</item>
</style>

<!-- Animations for a non-full-screen window or activity. -->
<style name="MyAnimation.Window" parent="@android:style/Animation.Dialog">
    <item name="android:windowEnterAnimation">@anim/grow_from_middle</item>
    <item name="android:windowExitAnimation">@anim/shrink_to_middle</item>
</style>

<!-- style for transparent audio and video resource  activity -->

<style name="Theme.Transparent_Player" parent="android:Theme">
    <item name="android:windowIsTranslucent">true</item>
    <item name="android:windowBackground">@android:color/transparent</item>
    <item name="android:windowContentOverlay">@null</item>
    <item name="android:windowNoTitle">true</item>
    <item name="android:windowIsFloating">false</item>
    <item name="android:backgroundDimEnabled">true</item>
    <item name="android:windowAnimationStyle">@style/MyPlayerAnimation.Window</item>
</style>

<!-- Animations for a non-full-screen window or activity. -->
<style name="MyPlayerAnimation.Window" parent="@android:style/Animation.Dialog">
    <item name="android:windowEnterAnimation">@anim/grow_from_action_bar</item>
    <item name="android:windowExitAnimation">@anim/shrink_to_action_bar</item>
</style> 
```

在上面的代码中，如何自定义主题以将溢出菜单的背景颜色与 RGB（245、243、239）匹配，并将字体颜色与 RGB（64、64、64）匹配？

提前致谢..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-12-08T20:51:00.233

要更改文本颜色，您可以使用：

```
<item name="android:textAppearanceLargePopupMenu" >@style/m_textAppearanceLargePopupMenu</item>

<item name="android:textAppearanceSmallPopupMenu" >@style/m_textAppearanceSmallPopupMenu</item> 
```

* * *

```
 <style name="m_textAppearanceLargePopupMenu" parent="@android:style/TextAppearance.Holo.Widget.PopupMenu.Large">
        <item name="android:textColor">#FFF</item>
    </style>

    <style name="m_textAppearanceSmallPopupMenu" parent="@android:style/TextAppearance.Holo.Widget.PopupMenu.Small">
        <item name="android:textColor">#FFF</item>
    </style> 
```

这会将弹出菜单文本颜色更改为白色

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T09:34:27.047

试试这个：

```
<style name="CustomActivityTheme" parent="@android:style/Theme.Holo">
    ...
    <item name="android:popupMenuStyle">@style/MyPopupMenu</item>
    ...
</style>

<style name="MyPopupMenu" parent="android:style/Widget.Holo.Light.ListPopupWindow">
    <item name="android:background">#f5fdef</item> 
</style> 
```

我在[这篇文章中找到了](https://groups.google.com/forum/?fromgroups=#!topic/actionbarsherlock/5lHOKNlXn_4)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-29T16:12:09.323

```
<style name="MyActionBar3" parent="@style/Widget.AppCompat.Light.ActionBar">
    <item name="android:background">@color/ActionBarBackground</item>         
</style>

<style name="MyActionBarDropDownStyle" parent="">
    <item name="android:background">#00FF00</item>        
    <item name="android:divider">#ff0000</item>
    <item name="android:dividerHeight">1dp</item> 
    <item name="android:textColor">#FFFFFF</item>     
    <item name="android:textSize">10sp</item>
</style>

<style name="MyTextStyle" parent="@style/Widget.AppCompat.Light.Base.ListPopupWindow">
    <item name="android:popupBackground">#FF0000</item>        
</style> 
```

将样式应用于 android:textAppearanceLargePopupMenu" 项目的属性

# iphone - iphone开发：语音转文字和文字转语音

> ID：14193072
> 
> 赞同：0
> 
> 时间：2013-01-07T09:26:44.053
> 
> 标签：iphone, objective-c, speech-recognition, text-to-speech, turkish

我正在寻找用于文本到语音和语音识别的 sdk。有许多免费资源，但不幸的是它们都是英语或其他流行的欧洲语言。问题是我正在寻找土耳其语。有没有提供它的来源？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T10:01:37.523

请检查此 api。它也支持土耳其语。

[http://www.ispeech.org/api](http://www.ispeech.org/api)

希望它可以帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T11:18:03.423

据我所知，有两个 API 支持土耳其语。

1.  [**阿卡佩拉**](http://www.acapela-group.com/turkish-50-text-to-voice.html)
2.  [**演讲**](http://www.ispeech.org/apps/tts)

# mysql - Mysql Workbench 权限，数据导入

> ID：14193076
> 
> 赞同：1
> 
> 时间：2013-01-07T09:26:51.680
> 
> 标签：mysql, mysql-workbench

当我尝试更改 mysql db 上的权限时，出现以下错误：

请确保使用的帐户有权访问 MySQL 授权表。执行“DESCRIBE mysql.db”时出错

这也是为什么它不允许我从另一个数据库导入表的原因吗？当我尝试时，我得到了错误：

操作失败，退出代码 1

09:20:16 恢复 D:\design and photos\boo.com\db dump\070113.sql

运行：mysql.exe --defaults-extra-file="c:\users\darren\appdata\local\temp\tmpslubjs.cnf" --host=87.117.239.19 --user=boo8_yu52 --port=3306 -- default-character-set=utf8 --comments < "D:\design and photos\boo.com\db dump\070113.sql"

第 1 行的错误 1044 (42000)：用户 'boo8_yu52'@'%' 对数据库 'boo8_6652' 的访问被拒绝

但是，它确实让我手动创建表。根本搞不定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T10:07:49.363

确保您使用的帐户是通过授予选项授予的，并且该帐户应该对 db 授权表退出的 mysql 数据库具有权限

或者最好的方法是使用 root 帐户分配权限

请参阅下面的链接可能对您有用

[http://blog.loftninjas.org/2008/04/22/error-1044-42000-at-line-2-access-denied-for-user-root-to-database-db/](http://blog.loftninjas.org/2008/04/22/error-1044-42000-at-line-2-access-denied-for-user-root-to-database-db/)

# iphone - 对多个字典的数组进行排序

> ID：14193077
> 
> 赞同：0
> 
> 时间：2013-01-07T09:26:52.113
> 
> 标签：iphone, objective-c, ios, ios4

我的数组包含每个数组对象的三个字典。

```
{
    avg = {
        avg1 = 50;
        avg2 = 60;
    };

    posts =         {
        alcoholContent = 450;
        name = "BBB";
        origin = United States;

    };

    reviews =  {

        rev1 = "Test review 1";
        rev2 = "Test review 2";
    };
}

{
    avg = {
        avg1 = 30;
        avg2 = 20;
    };

    posts =         {
        alcoholContent = 550;
        name = "AAA";
        origin = United States;

    };

    reviews =  {

        rev1 = "Test review 1";
        rev2 = "Test review 2";
    };
} 
```

我想通过键**“名称”**（帖子字典）对数组进行排序。我该怎么做？

我尝试了使用排序描述符的正常排序方法，但没有奏效

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T09:34:42.150

尝试 sortUsingComparator：

```
[array sortUsingComparator:^NSComparisonResult(id obj1, id obj2) {
    NSDictionary *dict1 = obj1;
    NSDictionary *dict2 = obj2;

    NSString *string1 = [[dict1 objectForKey:@"posts"] objectForKey:@"name"];
    NSString *string2 = [[dict2 objectForKey:@"posts"] objectForKey:@"name"];

    return [string1 compare:string2];
}]; 
```

# android - 安卓频闪灯

> ID：14193078
> 
> 赞同：1
> 
> 时间：2013-01-07T09:27:00.147
> 
> 标签：android, timer, runnable

我在 stackoverflow 上进行了搜索，并使用了使用 Handler 和 postDelayed 消息的算法来打开和关闭灯。

算法运行完美....这是我所做的：

```
if(mActive)//control the runnable thread
    {
        if(mSwap)//toggler for strobe
        {
            //Turn Flash On
            cam = Camera.open();
            Parameters p = cam.getParameters();
            p.setFlashMode(Parameters.FLASH_MODE_TORCH);
            cam.setParameters(p);
            cam.startPreview();
            mSwap = false;
            mHandler.postDelayed(mRunnable, 1);
        }
        else
        {
            //Turn Flash Off

            cam.stopPreview();
            cam.release();
            cam = null;
            mSwap = true;
            mHandler.postDelayed(mRunnable, 1);

        }
    } 
```

但我无法增加切换以匹配市场上那些应用程序的频闪频率......

我可以使用任何其他逻辑（而不是排队消息）？使用计时器会产生更好的结果吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T10:09:28.010

在您的代码中，您`Camera`每次打开/关闭手电筒时都会分配和解除分配对象。这每次都需要相当长的时间。

要解决此问题，请将分配/解除分配移动到`onStart`and`onStop`方法，并且只做最少的操作来打开和关闭灯。

# widget - 无法弄清楚为什么此下拉类别表单不起作用。不确定如何正确添加参数

> ID：14193082
> 
> 赞同：0
> 
> 时间：2013-01-07T09:27:05.053
> 
> 标签：widget, wordpress

我正在创建一个 Wordpress 最近的帖子小部件，其中包含许多不同的练习功能。我需要它执行的功能之一是允许管理员通过带有类别的下拉菜单指定要显示的类别。我在这里寻求帮助并得到了答案，但我不明白如何让它正常工作。这是我的代码：

```
<?php
/*
Plugin Name: News Recent Posts Widget
Plugin URI: 
Description: A recent post widget with extra functions that allow admin to make changes to certain values
Author: Kevin Ullyott
Version: 1.0
Author URI: http://modmacro.com/
*/

class recentpost extends WP_Widget {

    public function __construct() {
    parent::WP_Widget(
    // or parent::__construct(
        false, 
        'Kevin - Recent Posts Widget',
        array(
            'description' => __('A recent post widget with extra functions that allow admin to make changes to certain values') 

        )
    );
    ;
}

    public function widget( $args, $instance ) {

        extract( $args );

        $headline = $instance['headline'];
        $category = $instance['category'];
        $numberposts = $instance['numberposts'];
        $readmore = $instance['readmore'];

        echo $before_widget;

        echo $before_title;

        echo "<p class=\"headline\">$headline</p>";

        echo $after_title;

        $args = array( 'numberposts' => $numberposts, 'category_name' => $category );
        $recent_posts = wp_get_recent_posts( $args );
        foreach( $recent_posts as $recent ){
        setup_postdata(get_post($recent['ID']));
        echo '<a href="' . get_permalink($recent['ID']) . '" title=" '.esc_attr(get_the_title($recent['ID'])).'" >' .   get_the_title($recent['ID']).'</a> ';
        echo get_the_time('F j, Y', $recent['ID']);
        the_excerpt();
}
wp_reset_postdata();

        echo $after_widget;

    }

    public function update( $new_instance, $old_instance ) {
        $instance = array();
        $instance['headline'] = ( $new_instance['headline'] );
        $instance['category'] = ( $new_instance['category'] );
        $instance['numberposts'] = ( $new_instance['numberposts'] );
        $instance['readmore'] = ( $new_instance['readmore'] );
        return $instance;
    }

    public function form( $instance ) {

        $headline = $instance[ 'headline' ];
        $category = $instance[ 'category' ];
        $numberposts = $instance[ 'numberposts' ];
        $readmore = $instance[ 'readmore' ];

        ?>

<p>
  <label for="<?php echo $this->get_field_id( 'headline' ); ?>">
    <?php _e( 'Headline:' ); ?>
  </label>
  <input class="widefat" id="<?php echo $this->get_field_id( 'headline' ); ?>" name="<?php echo $this->get_field_name( 'headline' ); ?>" type="text" value="<?php echo esc_attr( $headline ); ?>" />
</p>
<label for="<?php echo $this->get_field_id( 'category' ); ?>">
  <?php _e( 'Category:' ); ?>
</label>
<?php wp_dropdown_categories(array('name' => $this->get_field_name('category'), 'selected' => $category, 'id' => $this->get_field_id('category'), 'class' => 'widefat')); ?>
</p>
<label for="<?php echo $this->get_field_id( 'numberposts' ); ?>">
  <?php _e( 'Number of posts:' ); ?>
</label>
<input class="widefat" id="<?php echo $this->get_field_id( 'numberposts' ); ?>" name="<?php echo $this->get_field_name( 'numberposts' ); ?>" type="text" value="<?php echo esc_attr( $numberposts ); ?>" />
</p>
<label for="<?php echo $this->get_field_id( 'readmore' ); ?>">
  <?php _e( 'Read More:' ); ?>
</label>
<input class="widefat" id="<?php echo $this->get_field_id( 'readmore' ); ?>" name="<?php echo $this->get_field_name( 'readmore' ); ?>" type="text" value="<?php echo esc_attr( $readmore ); ?>" />
</p>
<?php 
    }
}

add_action( 'widgets_init', create_function('', 'return register_widget("recentpost");') );

?> 
```

因此，如果您查看类别的表单，我会在那里输入 PHP 代码来创建下拉菜单。它成功地创建了表单并在下拉菜单中显示了正确的类别，但是当我保存它时它没有正确更新并且使小部件不显示任何内容。

给我这个代码的用户告诉我这个。他说：“函数 wp_dropdown_categories 将引入类别，但单独添加函数不会保存或检索所选类别。您需要添加名称选择和 id 参数。” 但问题是我不知道如何添加 name、selected 和 id 参数。到目前为止，我尝试做的一切都失败了。有人可以向我展示使用我的代码执行此操作的正确方法吗？这会有很大帮助。我对此很陌生，正在努力学习，所以请提供我需要做的事情，如果你能解释一下。

抱歉问了这么多，我只是喜欢编码，想尽可能多地了解！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T10:05:50.200

wp_dropdown_categories 返回类别 ID。因此，如果您的表单显示正确的类别并保存，那么它的工作。所以你会想看看你的查询。看起来您目前正在尝试按`category_name`.

`$args = array( 'numberposts' => $numberposts, 'category_name' => $category );`

将其更改为

`$args = array('numberposts' => $numberposts, 'cat' => $category);

# javascript - ClickTale 和 ClickTaleExec

> ID：14193086
> 
> 赞同：0
> 
> 时间：2013-01-07T09:27:26.357
> 
> 标签：javascript, jquery, clicktale

[在这里](http://wiki.clicktale.com/Article/JavaScript_integration)，我找到了如何为 DHTML 页面实现 ClickTale，现在我需要这样做 ClickTale 执行此代码

```
item.next().css('display', 'none');
item.css('background', '#D6E9D6'); 
```

问题 - 我不知道如何编写一个将运行此代码的函数，所以我打算像这样使用 ClickTale：

```
if(typeof ClickTaleExec=='function') {
    ClickTaleExec("item.next().css('display', 'none');");
    ClickTaleExec("item.css('background', '#D6E9D6');");
} 
```

我有一个问题是正确的吗？从逻辑上讲它会起作用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T12:56:38.417

刚刚检查了自己，不，它不会起作用。

但是这个

```
if(typeof ClickTaleExec=='function') {
    ClickTaleExec("$('#" + aItems[iCount].id + "').next().css('display', 'none');");
    ClickTaleExec("$('#" + aItems[iCount].id + "').css('background', '#D6E9D6');");
} 
```

工作正常！:)

# intellij-idea - 停止 IntelliJ IDEA 更新特定文件的版权

> ID：14193092
> 
> 赞同：5
> 
> 时间：2013-01-07T09:27:44.083
> 
> 标签：intellij-idea

有什么办法可以阻止 IntelliJ IDEA 更新特定文件中的版权声明？我刚去做`git commit`，发现它更新了`lightbox.js`我不想要的版权声明——它不是我的！

理想情况下，我想将“第 3 方”子目录标记为被排除在版权更新之外。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T10:52:09.717

转到设置 | 版权所有，找到使用的范围，修改此范围（设置|范围），使其排除您的“第 3 方”子目录。

# xaml - 如何使用 XAML 在 WPF 中创建与 Avast Version7 为 LEFT MENU PANE(Summary,Scan Computer, Real Time Shield)) 部署的相同 GUI？

> ID：14193093
> 
> 赞同：0
> 
> 时间：2013-01-07T09:27:44.557
> 
> 标签：xaml, wpf-controls

我必须为“左侧菜单窗格（摘要、扫描计算机、实时屏蔽）等”创建在 Avast -Version 7 中使用的相同 GUI（用于桌面应用程序）。我已经尝试了很多，最后我问了控件的名称，该控件的名称以这样一种方式进行了自定义，即非常左窗格上的每个选项卡都有子选项卡，例如“摘要选项卡”，在子选项卡之后列出单击 1)当前服务 2 ）云服务 3）统计和其他选项卡子选项自动折叠？您能否简要介绍一下通过 WPF 实现这种效果的指南？

或者，如果您对此类 GUI 有其他解决方案，也请提出建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T07:08:51.490

它只是一个左对齐的选项卡，较大的选项卡由以下较小的选项卡组成，就像在 WPF 中我们可以自定义控件的形状一样。此类 GUI 也已部署用于 Intel 图形控制面板（window 7 64 位）。这种 GUI 非常有利，因为它以最简单、更容易的方式为最终用户保存大量信息。

# solr - 在 Solr 4.0 中，主节点的软提交文档是否立即对从节点可见？

> ID：14193095
> 
> 赞同：1
> 
> 时间：2013-01-07T09:27:52.833
> 
> 标签：solr, replication

我的搜索后端尝试从 Solr 3.6 升级到 Solr 4.0。

现有的基于 Solr 3.6 的架构有 1 个主 Solr 节点和 2 个从属 Solr 节点用于负载均衡，其主节点仅用于更新文档，从节点是只读的。一切 N 分钟，文档被提交到主节点，然后从节点轮询索引文档并安装它们，因此这些文档是可见的。

在 Solr 4.0 中，因为软提交的文档没有同步到磁盘文件，我的问题是，如果我升级到 Solr 4.0 并且**不使用 SolrCloud**，软提交的文档到主 Solr 节点是否立即对从属节点可见。

如果这些对奴隶可见，它是如何工作的，通过动物园管理员？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T10:05:34.600

solr pull 复制机制只是将段文件复制到磁盘上，仅此而已。软提交的文档不在磁盘上（尚未 fsync，这是在提交发生时完成的），这就是为什么在复制时它们不会被拉取。

就像 elasticsearch 一直做的那样，SolrCloud 使用推送方法。当您索引文档时，它们将在它们应该被索引的所有节点上被索引。这就是为什么在它们被索引的所有节点上都可以看到软提交文档的原因。

# monitoring - 监控多个服务（Web 服务、oracle、Web 应用程序）的正常运行时间和运行状况

> ID：14193098
> 
> 赞同：0
> 
> 时间：2013-01-07T09:27:57.370
> 
> 标签：monitoring, sendmail, health-monitoring, uptime

我有几项服务在活动中增长。我正在寻找一种可以监控它们的简单服务（Web 服务、oracle、Web 应用程序），并在出现故障时发送电子邮件。

非常感谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T09:31:34.210

去看看xymon系统。它简单易用，并且可以很好地扩展。我在几个组织中使用过 xymon，它很棒。用户社区也非常活跃和乐于助人。

您可以查看的其他系统是 Nagios 和 OpenNMS。这些虽然更复杂，但可能有点矫枉过正。

# android - 放置foreground()方法的位置

> ID：14193101
> 
> 赞同：0
> 
> 时间：2013-01-07T09:27:57.873
> 
> 标签：android, android-service

我正在尝试运行一项提供通知的服务，如果每隔几分钟提供一次。由于服务会在几个小时后被销毁，我想把它变成前台服务。但如果我这样做，它会显示两个通知。一个是通知栏（这就是我需要和得到的）。Ongoing 列上的另一个显示工作完全进行的图标。它真的很烦人。通知代码是这样的

通知.java

```
n.setLatestEventInfo(getApplicationContext(), "Update", "new update arrived", pIntent);
n.flags = Notification.FLAG_AUTO_CANCEL;
startForeground(2233,n);
n.flags |=Notification.FLAG_NO_CLEAR;
NM = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);
NM.notify(id,n); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T09:49:53.827

您必须有一个持续的通知才能使用前台，以便用户可以知道它处于活动状态。[您可以使用AlarmManager](http://developer.android.com/reference/android/app/AlarmManager.html)安排警报，以便在需要时启动您的服务，而不是一直保持活动状态。然后，您可以按您喜欢的任何时间间隔进行检查，即使服务关闭，您的通知也会保持有效。

# python - 为什么我的 vagrant 脚本没有从 Windows 运行？

> ID：14193102
> 
> 赞同：1
> 
> 时间：2013-01-07T09:28:03.173
> 
> 标签：python, ubuntu, vagrant

我有一个 Vagrant 设置，其中包含一个 bash shell 配置脚本，该脚本在 Mac 上调用时运行良好，但在从 Windows 主机调用时不起作用。有效的行是调用 python 脚本的第一行：

```
foreman run ./manage.py syncdb --noinput 
```

给出的错误是找不到python：

```
/usr/bin/env python
: File not found 
```

我最初认为这只是一个行尾问题（CRLF v LF），但我检查了，行尾是正确的。

如果我 SSH 进入该框，并检查 /tmp/vagrant-shell （这是脚本作为安装的一部分复制到的位置），它看起来很好。如果我`which python`在来宾 VM 上使用，我会得到 virtualenv 版本，这正是我所期望的。如果我检查环境变量，`PYTHONPATH`并且`PATH`设置也正确。

鉴于脚本被复制到虚拟机，然后从那里运行，很难理解从 Windows 或 OSX 主机运行的脚本之间如何存在差异（除了行尾）。

感激地收到任何帮助。

（虚拟机是 Ubuntu 12.04，32 位）

**[更新 1]**

我在`provision.sh`文件上运行了 MD5 哈希，在四个不同的地方：

*   主机 Windows 机器，之后`git pull`
*   来宾 VM，在 Windows 上运行，后置备
*   主机 OSX 机器，之后`git pull`
*   来宾 VM，在 OSX 上运行，后置备

并且每个哈希值都是相同的 - 即运行在 OSX 上的 VM 上的文件是运行在 Windows 上的 VM 上的相同文件的字节匹配。

因此，它在设置时隐含在 VM 上。但是鉴于这台机器是在两者上使用相同的 VirtualBox VM 设置的 - 也许这是一个 VirtualBox 实现问题？

**[更新 2：解决方法]**

通过用`./manage.py`完整的替换，`python manage.py`我已经让脚本工作，这表明这是一个路径问题，但是我没有耐心进一步挖掘。它有效，现在可以。

# lucene.net - Lucene.net 如何自定义评分

> ID：14193111
> 
> 赞同：0
> 
> 时间：2013-01-07T09:28:59.650
> 
> 标签：lucene.net

我遇到了一个我似乎无法用 Lucene.net 解决的问题。我们将 Lucene.net 用于自动完成字段，并希望以搜索词开头的命中显示在列表顶部和下面的其他命中。

基本上，我想要的是搜索结果，从搜索词开始，得到某种提升，出现在顶部。

我已经检查了 CustomScoreProvider 和 CustomScoreQuery，但我无法想象如何使用它来做我想做的事情，并且没有关于如何实现它的好例子。但也许我在错误的树上吠叫，因为这很可能是通过设置一些属性或其他东西来实现的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T01:59:27.110

您可以通过更改查询而不是更改评分算法来解决此问题。

所以你的查询本来是：

```
Field:(this is a piece of text) 
```

变成：

```
Field:"this is a piece of text*"^2 OR Field:(this is a piece of text) 
```

# android - 为即时消息注册用户

> ID：14193112
> 
> 赞同：2
> 
> 时间：2013-01-07T09:29:00.497
> 
> 标签：android, contacts, messaging

我正在计划一个应用程序，用户必须使用他们的手机号码进行注册，并且他们可以与使用相同应用程序的朋友交流。我需要知道如何使应用程序找到电话联系人中的用户是否具有相同的应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T09:32:43.773

1.  获取服务器
2.  当用户注册时，使用他们的电话号码在服务器上注册他们
3.  当另一个用户注册时，注册他们，然后使用您已经注册的号码检查他们的联系人。
4.  如果他们的联系人中的某个号码与您注册的号码匹配，那么您有两个用户使用同一个应用程序。
5.  之后，将服务器用作两个用户之间通信的中间人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T09:31:54.293

查找用户联系人是否有该应用程序？

好吧，您必须有一个服务器来发送消息，并且该服务器将有一个数据库。

现在这个数据库将包含关于用户的信息，包括他们的号码（或者基本上你想要的任何字段）。

交叉检查您的数据库，您会发现还有谁已经拥有该应用程序。

# javascript - IE8 数据集的替代方案（按数据属性对元素进行排序）

> ID：14193114
> 
> 赞同：1
> 
> 时间：2013-01-07T09:29:06.000
> 
> 标签：javascript, jquery

谁能帮我让这个脚本适用于 IE8？它在 Mozilla 和 WebKit 浏览器中运行良好，但在 IE8 中引发错误：“dataset.numValue”为空或不是对象。

```
var $wrapper = $('#containerInner'),
  $sorted = $wrapper.find('.sortMe').get().sort(function (a, b) {
    return +a.dataset.numValue - +b.dataset.numValue;
  }); 
```

我知道 IE8 支持数据属性......但无法弄清楚或在谷歌上找到答案！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T09:32:14.073

您应该尝试使用jQuery 的[data()而不是数据集。](http://api.jquery.com/jQuery.data/)

```
var $wrapper = $('#containerInner'),
  $sorted = $wrapper.find('.sortMe').get().sort(function (a, b) {
    return +$(a).data("numValue") - + $(b).data("numValue");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T09:31:01.087

你应该使用：`$(el).data('key')`。要使用标记在元素上存储数据，只需使用`data-key`属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T09:32:28.037

在 jQuery 中，您可以使用[$.data](http://api.jquery.com/jQuery.data/)方法来获取此值。

# sql - 使用 Microsoft Sync Framework 时将数据保存在本地数据库中

> ID：14193116
> 
> 赞同：0
> 
> 时间：2013-01-07T09:29:15.947
> 
> 标签：sql, vb.net, microsoft-sync-framework

我有一个允许输入测试结果的应用程序。应用程序需要允许用户在离线时输入数据，然后再同步到远程数据库。Microsoft Sync 框架用于完成此操作。

但是，执行的测试依赖于存储在许多其他数据库中的数据，例如测试用例列表和设备列表。这些列表通过应用程序填充并存储在数据库中。这也是使用同步框架执行的。

我需要知道的是，我能否确保所需列表的数据*永久*保留在本地缓存的数据库中，以便在应用程序脱机时可以检索它们。希望我可以在运行时更改连接字符串，以确保将查询定向到本地数据库以检索测试用例和设备等。

一种解决方案是让用户在离开站点之前进行同步，以确保他们拥有最新的数据，但这并不总是可行的。

**编辑**

在我看来，一旦同步完成，本地数据库就会被清除，所做的所有更改都会被推送到远程数据库并从本地缓存版本中删除/删除。如果应用程序离线打开，本地版本无法从远程数据库下载最新数据，因此无法访问最新数据。

每次发生更改时，我都尝试使用该`Microsoft.Synchronization.Data.ChangesSelectedEventArgs`事件在本地保存数据，但它似乎并没有持续存在。

```
Private Sub LocalDeviceCacheServerSyncProvider_ChangesSelected(ByVal sender As Object, ByVal e As Microsoft.Synchronization.Data.ChangesSelectedEventArgs)

    If e.Context.DataSet.Tables.Contains("DeviceListTable") Then
        Dim dataTable = e.Context.DataSet.Tables("DeviceListTable")
        For j As Integer = 0 To dataTable.Rows.Count - 1
            Dim row As DataRow = dataTable.Rows(j)

            If row.RowState = DataRowState.Added Then

                dataTable.Rows.Add(dataTable.Rows(j))
            End If
        Next
    End If

End Sub 
```

**编辑** 问题是，当远程服务器连接不可用时，不会引发错误，并且填充 datagridview 的代码行从未被执行。为了解决这个问题，使用了 try catch 并且填充数据网格的代码在 try/ctach 语句之外执行。

```
 Try
        Dim syncAgent As LocalCacheSyncAgent = New LocalCacheSyncAgent()
        Dim syncStats As Microsoft.Synchronization.Data.SyncStatistics = syncAgent.Synchronize()
    Catch ex As Exception
        MsgBox(ex.Message)
    End Try

    Me.ReferenceListTableTableAdapter.Fill(Me.EMSCalResourcesDataSet.ReferenceListTable) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T02:44:45.933

Sync Framework 不会删除已同步的行。唯一会删除行的情况是需要同步删除行。您是否检查过您的应用程序是否真的在重新创建您的客户端数据库？

# jquery - aspmvc 发布日期时间与 json 错误

> ID：14193120
> 
> 赞同：1
> 
> 时间：2013-01-07T09:29:42.993
> 
> 标签：jquery, asp.net-mvc, json, asp.net-web-api, asp.net-mvc-viewmodel

当我使用 Json 发布 DateTime 时，出现以下错误：错误 500 无法将“System.DateTime”类型的对象转换为“System.Array”类型。

我不明白为什么！你能帮我吗 ？

**标头发送如下所示：**

```
{"MyDate":"2012-12-31T23:00:00.000Z","Param1":"aaaa","IdItem":123} 
```

**我的视图模型：**

```
 public class MyViewModel
 {
public DateTime MyDate { get; set; }
public string Param1 {get;set;}
public Int32? IdItem { get; set; }
 } 
```

**我的控制器：**

```
[HttpPost]
    public void Saisie(MyViewModel model)
    { ... } 
```

**我的 Javascript 代码：**

```
$.ajax({
        url: url,
        type: 'post',
        dataType: 'json',
        data : JSON.stringify(model),
        contentType: 'application/json',
success : function() {...}
}) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T10:04:25.337

使用 **数据：$(form).serialize()**而不是 **数据：JSON.stringify(model)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T16:22:54.737

我发现了我的问题，在我的视图模型中：

```
public class MyViewModel
{
[MaxLength(10)]
public DateTime MyDate { get; set; }
} 
```

MaxLength 属性导致错误

# php - 授予 777 权限以在 php 中动态创建文件

> ID：14193131
> 
> 赞同：20
> 
> 时间：2013-01-07T09:30:23.793
> 
> 标签：php, apache, save

嗨，我有一个脚本，它在我的本地目录上**动态**创建了一个文件请告诉我，我现在如何授予该文件 777 权限，它在浏览器中无法访问

```
<?php
//Get the file
$content = 'http://xxx.xxx.com.mx/media/catalog/product/cache/1/image/9df78eab33525d08d6e5fb8d27136e95/b/r/bridal-shoes1.jpg ';
$content1 = explode('/', $content);
$end = end($content1);
echo $end;
//print_r($content1[12]);
//Store in the filesystem.
$my_file = $end;
$handle = fopen($my_file, 'w') or die('Cannot open file:  '.$my_file); //implicitly creates file
$path = '/var/www/'.$end;

copy($content, $path);

 ?> 
```

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-01-07T09:32:36.397

使用函数 chmod
[chmod](http://it2.php.net/function.chmod)

```
$fp = fopen($file, 'w');
fwrite($fp, $content);
fclose($fp);
chmod($file, 0777); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T09:31:51.840

用于[`chmod()`](http://php.net/manual/en/function.chmod.php)设置文件权限。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-12-05T10:32:14.433

利用：

```
private function writeFileContent($file, $content){
   $fp = fopen($file, 'w');
   fwrite($fp, $content);
   fclose($fp);
   chmod($file, 0777);  //changed to add the zero
   return true;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-11-19T09:40:50.820

**授予动态创建文件的权限**

```
 $upPath = yourpath;
                    if(!file_exists($upPath)) 
                    {
                        $oldmask = umask(0);
                        mkdir($upPath, 0777, true);
                        umask($oldmask);
                    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-09T10:10:38.267

我们**甚至**可以忽略 *** *$handle* ***它仍然会**创建****文件**并将内容 **复制**到**$path**

```
 <?php
    //Get the file
    $content = 'http://dev.aviesta.com.mx/media/catalog/product/cache/1/image/9df78eab33525d08d6e5fb8d27136e95/b/r/bridal-shoes1.jpg ';
    $content1 = explode('/', $content);
    $end = end($content1);
    echo $end;
    //print_r($content1[12]);
    //Store in the filesystem.
    $my_file = $end;
    $handle = fopen($my_file, 'w') or die('Cannot open file:  '.$my_file); //implicitly creates file
    $path = '/var/www/'.$end;

    copy($content, $path);

     ?> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-07T09:32:11.277

您可以使用[chmod()](http://www.w3schools.com/php/func_filesystem_chmod.asp)来执行此操作。

例如`chmod($my_file, 0777);`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-07T11:06:21.247

使用设置`default permission`为您的目录（即`rwx`）`setfacl command`

```
ex: setfacl -d -m o::rwx your/directory/path 
```

然后你在该目录中创建的任何东西都需要`rwx`许可。

# jsp - 当我单击单选按钮时，如何清除 JSF 中的 h:inputText？

> ID：14193132
> 
> 赞同：0
> 
> 时间：2013-01-07T09:30:26.773
> 
> 标签：jsp, jsf, ajax4jsf

`h:inputText`单击单选按钮时如何在 JSF 中清除？

我试过下面的代码

```
if(isExisting.equalsIgnoreCase("N"))
{
    t.setValue(""); 
} 
```

如果单选按钮的 bean 值为 N，则在文本框 bean 值中设置空字符串。

我什至试过

```
t.setValue(null); 
```

但它不会在单击单选按钮时清除文本框。

```
<td width="25%" align="left" class="content_row">
  <h:selectOneRadio id="existingLARB" value="#{LABB.LAOpr.tDetails.isExisting}">
    <f:selectItems value="#{LABB.LAOpr.yesNoList}" />
    <a4j:support event="onclick" reRender="existingDetails,existingDetailsLA" action="#{LABB.showExistingDetails}"></a4j:support>
  </h:selectOneRadio>
</td> 
```

# c# - 从c#动态显示asp.net中的图像

> ID：14193133
> 
> 赞同：1
> 
> 时间：2013-01-07T09:30:35.143
> 
> 标签：c#, asp.net, image, wcf, bytearray

我在我的 asp.net 网站的 c# 代码中动态创建控件。我想创建一个图像控件并显示一个从 wcf 服务获取的字节数组派生的图像。我尝试将字节数组转换为图像并使用以下代码保存在某个位置，但它不起作用。谁能帮我！

```
 public System.Drawing.Image byteArrayToImage(byte[] byteArrayIn)
{
    MemoryStream ms = new MemoryStream(byteArrayIn);
    System.Drawing.Image returnImage = System.Drawing.Image.FromStream(ms);
    return returnImage;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T09:34:05.943

您只是缺少[Save](http://msdn.microsoft.com/en-us/library/ktx83wah.aspx)方法：

```
public string byteArrayToImage(byte[] byteArrayIn)
{
  string saveLocation = "<Path to save image to>"; // e.g. c:\mywebsite\image23.png
  MemoryStream ms = new MemoryStream(byteArrayIn);
  System.Drawing.Image returnImage = System.Drawing.Image.FromStream(ms);
  returnImage.Save(saveLocation);
  return saveLocation;
} 
```

然后使用[Server.MapPath](http://msdn.microsoft.com/en-us/library/ms524632%28v=vs.90%29.aspx)将保存的文件位置的 url 传递给`asp:Image`控件。

我应该提一下，如果您已经有一个字节数组 -***而不是创建一个`image`仅用于保存字节流的对象***- 只需将字节流放在控件的内部，`ImageUrl`如下`asp:image`所示：

```
image1.ImageUrl = "data:image/png;base64," + Convert.ToBase64String(byteArrayIn); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-11-19T13:01:18.883

那很好。不需要创建图像对象。这对我有用：

```
image1.ImageUrl = "data:image/png;base64," + Convert.ToBase64String(byteArrayIn); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-07T09:54:02.253

尝试以下

```
File.WriteAllBytes(@"C:\test.jpg", BYTE_ARRAY_OF_IMAGE); 
```

# vbscript - DateDiff 和区域设置

> ID：14193137
> 
> 赞同：0
> 
> 时间：2013-01-07T09:30:46.930
> 
> 标签：vbscript, datediff, regional-settings

我有一个 VBscript，可以在世界各地的设备上运行，因此使用各种区域设置。

我的脚本的一部分正在计算两个日期之间的差异，但我无法得到一致的结果。

一个例子：

```
'Get system date in EU format    
dEUDate = Right("0" & DatePart("d",Date), 2) & "-" & Right("0" & DatePart("m",Date), 2) & "-" & DatePart("yyyy",Date)

'Read date/time value from an application in registry - will return e.g. 05-01-2013 07-19-00
dateKLAVDef = UCase(objShell.RegRead(strKLAVStateKey & "\Protection_BasesDate"))

'Find date difference
iAVDefAge = DateDiff("d", Left(dateKLAVDef, 10), dEUDate)

WScript.Echo "AV def.: " & dateKLAVDef & vbTab & "Current date: " & dEUDate & vbTab & "Diff: " & iAVDefAge 
```

这是使用 EU 区域设置配置设备时的结果，它给出了正确的结果：

AV 定义：05-01-2013 07-19-00 当前日期：07-01-2013 差异：2

这是使用非欧盟区域设置（例如英语（美国））配置设备时的结果，这（从脚本的角度来看）不正确：

AV 定义：05-01-2013 07-19-00 当前日期：07-01-2013 差异：61

我怎样才能使它与非欧盟区域设置一起使用？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T15:29:20.013

似乎`dateKLAVDef`总是在 dd-MM-yyyy hh-mm-ss。那是对的吗？然后，您必须从该字符串中检索日、月和年，并将其设为`Date`with `DateSerial(y, m, d)`。它将自动转换为正确的语言环境格式。用当前日期做一个`DateDiff`，瞧，你准备好了：

```
' Read date/time value from an application in registry - will 
' return e.g. 05-01-2013 07-19-00
dateKLAVDef = "05-01-2013 07-19-00"

' Define a pattern for the given string
dateKLAVDefPattern = "^(\d+)-(\d+)-(\d+) .*"

' Make a regular expression
Set re = new RegExp
re.Pattern = dateKLAVDefPattern

' Execute the regex
Set matches = re.Execute(dateKLAVDef)

' Retrieve the submatches from the match
dateKLAVDefDay = matches(0).submatches(0)
dateKLAVDefMonth = matches(0).submatches(1)
dateKLAVDefYear = matches(0).submatches(2)

' recreate the dateKLAVDef date as a real date object
dateKLAVDefAsDate = DateSerial(dateKLAVDefYear, dateKLAVDefMonth, dateKLAVDefDay)

' Do a datediff on the created date and the current date
iAVDefAge = DateDiff("d", dateKLAVDefAsDate, Date())
MsgBox iAVDefAge 
```

# php - 不推荐使用：不推荐使用通过引用分配 new 的返回值

> ID：14193141
> 
> 赞同：0
> 
> 时间：2013-01-07T09:30:55.977
> 
> 标签：php, variable-assignment, deprecated

> **可能重复：**
> [不推荐通过引用分配新的返回值](https://stackoverflow.com/questions/1086539/assigning-the-return-value-of-new-by-reference-is-deprecated)

我正在尝试纠正我网站上显示的一些错误，但我无法摆脱它们。

对于以下代码：

```
 $string = preg_replace('# +#', ' ', $string);
    if($useHtml2text){
        $string=new html2text($string);
        $string=$string->get_text();
    }
    return trim($string);
} 
```

我有这个错误

> 不推荐使用：在第 56 行的 /htdocs/modules/googleshopping/class/myTools.php 中不推荐使用通过引用分配 new 的返回值

相关线路是这条

```
$string=new html2text($string); 
```

我已经尝试了几乎所有东西，但它仍然存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T09:39:56.197

错误代码不在您的脚本中，而是在`/htdocs/modules/googleshopping/class/myTools.php`第 56 行。

谷歌的一些时间表明这是某种 Prestashop 模块？与模块作者一起讨论。告诉他们开始行动，自 PHP *5.0*以来，new-by-ref 一直是不好的做法。考虑到 Google 排名靠前的结果也抱怨过时的错误（关于`ereg`-- ewwwww），祝你好运。您可能想找到一个替代模块...

同时，如果您在*生产站点上*`error_reporting`看到这种情况，您需要通过调整最适合您的代码的位置来关闭弃用通知，无论是在您的 init / bootstrap 文件还是在 php.ini 中。

# c# - 在 C# 中向/从 azure 表中插入和检索值

> ID：14193142
> 
> 赞同：0
> 
> 时间：2013-01-07T09:30:56.527
> 
> 标签：c#, azure-storage

我想将位置名称、纬度、经度等值插入到 c# 中的 azure 表中。由于我不擅长使用 azure table，请帮助我实现这一点。我有一个免费的 azure 帐户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T09:33:41.367

你在网上搜索过吗？

这是您正在寻找的官方网站的链接：

[http://www.windowsazure.com/en-us/develop/net/how-to-guides/table-services/](http://www.windowsazure.com/en-us/develop/net/how-to-guides/table-services/)

# gwt - an error while appending data to CellTable second an consequent times in GWT/GWT Platform

> ID：14193144
> 
> 赞同：0
> 
> 时间：2013-01-07T09:31:05.820
> 
> 标签：gwt, gwt-platform, gwt-celltable

I'm using [popup panel](http://code.google.com/p/gwt-platform/wiki/GettingStarted#Dialog_box_and_popup_panels) of gwt platform and the popup contains two panels on the top panel i have some textboxes and a search button.

and in the second panel contails a cell table which automatically loads some data from db as soon as popup pops out. and from the top panel also i should be able to search for specific data and update the cell table. i'm using the following code to update the CellTable

```
public void update(List<UserData> data){
        dataProvider.getList().clear();
        List<UserData> dataList=dataProvider.getList();
        for (UserData rtaData : data) {
            dataList.add(rtaData);
        }
        dataProvider.addDataDisplay(cellTable);     
    } 
```

my code is working fine but when i see the gwt development mode window in eclipse i can see the following error when ever i click on search button.

```
14:46:25.796 [ERROR] [gwtemotor] Uncaught exception escaped

    java.lang.IllegalStateException: The specified display has already been added to this adapter.
        at com.google.gwt.view.client.AbstractDataProvider.addDataDisplay(AbstractDataProvider.java:83)
        at com.bagi.emotor.client.ui.presenter.RTOLocationView.update(RTOLocationView.java:230)
        at com.bagi.emotor.client.ui.presenter.RTOLocationPresenter$2.onSuccess(RTOLocationPresenter.java:85)
        at com.bagi.emotor.client.ui.presenter.RTOLocationPresenter$2.onSuccess(RTOLocationPresenter.java:1)
        at com.gwtplatform.dispatch.client.DefaultDispatchAsync.onExecuteSuccess(DefaultDispatchAsync.java:229)
        at com.gwtplatform.dispatch.client.DefaultDispatchAsync$2.onSuccess(DefaultDispatchAsync.java:137)
        at com.gwtplatform.dispatch.client.DefaultDispatchAsync$2.onSuccess(DefaultDispatchAsync.java:1)
        at com.google.gwt.user.client.rpc.impl.RequestCallbackAdapter.onResponseReceived(RequestCallbackAdapter.java:232)
        at com.google.gwt.http.client.Request.fireOnResponseReceived(Request.java:287)
        at com.google.gwt.http.client.RequestBuilder$1.onReadyStateChange(RequestBuilder.java:395)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
        at java.lang.reflect.Method.invoke(Unknown Source)
        at com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:103)
        at com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)
        at com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172)
        at com.google.gwt.dev.shell.BrowserChannelServer.reactToMessagesWhileWaitingForReturn(BrowserChannelServer.java:337)
        at com.google.gwt.dev.shell.BrowserChannelServer.invokeJavascript(BrowserChannelServer.java:218)
        at com.google.gwt.dev.shell.ModuleSpaceOOPHM.doInvoke(ModuleSpaceOOPHM.java:136)
        at com.google.gwt.dev.shell.ModuleSpace.invokeNative(ModuleSpace.java:561)
        at com.google.gwt.dev.shell.ModuleSpace.invokeNativeObject(ModuleSpace.java:269)
        at com.google.gwt.dev.shell.JavaScriptHost.invokeNativeObject(JavaScriptHost.java:91)
        at com.google.gwt.core.client.impl.Impl.apply(Impl.java)
        at com.google.gwt.core.client.impl.Impl.entry0(Impl.java:213)
        at sun.reflect.GeneratedMethodAccessor34.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
        at java.lang.reflect.Method.invoke(Unknown Source)
        at com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:103)
        at com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)
        at com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172)
        at com.google.gwt.dev.shell.BrowserChannelServer.reactToMessages(BrowserChannelServer.java:292)
        at com.google.gwt.dev.shell.BrowserChannelServer.processConnection(BrowserChannelServer.java:546)
        at com.google.gwt.dev.shell.BrowserChannelServer.run(BrowserChannelServer.java:363)
        at java.lang.Thread.run(Unknown Source) 
```

even though i'm app is working i need to understand why this error is coming,

Thanks,

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T09:48:46.763

You are invoking `dataProvider.addDataDisplay(cellTable);` on every invocation of the `update(List<UserData> data)` . addDataDisplay needs to be invoked only once per view.

If You have multiple views, the mvp way is

```
View 1 -> cellTable
View 2 -> cellTree
Presenter -> dataProvider

dataProvider.addDataDisplay(cellTable) 
dataProvider.addDataDisplay(cellTree) 
```

## Solution

Move `dataProvider.addDataDisplay` into your constructor or lazy initialize it in `update(List<UserData> data);`

```
boolean initialized = false;

public void update(List<UserData> data){
        dataProvider.getList().clear();
        if(!initialized) {
          dataProvider.addDataDisplay(cellTable);
          initialized = true;
        } 
        List<UserData> dataList=dataProvider.getList();
        for (UserData rtaData : data) {
            dataList.add(rtaData);
        }

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T09:48:54.087

The statement `dataProvider.addDataDisplay(cellTable)` adds a data display to this adapter. The current range of interest of the display will be populated with data.

If data display is already added and you try to add this again, it will throw this error.

To avoid this error, you can check condition and remove added display before add same data display. i.e:

```
if (getProvider().getDataDisplays().contains(cellTable)) {
            getProvider().removeDataDisplay(cellTable);
   }
getProvider().addDataDisplay(cellTable); 
```

# html - 将较大的 div 居中在一个较小的 div 中并溢出

> ID：14193145
> 
> 赞同：0
> 
> 时间：2013-01-07T09:31:07.937
> 
> 标签：html, styles, zooming

我找不到或弄清楚。

在带有溢出的 div 中，我放置了另一个带有缩放选项的 div。当通过缩放变大时，我喜欢将内部 div 居中在外部 div 中，但是诸如*margin: 0px auto;之类的解决方案* 不起作用。

```
<div  id="container" style="float:left; overflow:scroll; width:644px; height:702px;">
  <div  id="zoomimg" style="zoom:54%;">
  <img src="plattegrond.jpg" class="map" usemap="#leige">
  </div>
</div> 
```

注意！zoom:54% (644x702) 可以用 JS 在 100% 和 150% 中改变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T16:49:38.193

我有一个类似的问题。您“有效地”失去了父 div 作为将子 div 居中的参考点。我通过以自身为中心来解决它。这应该有效：

```
$(window).load(function(){
    width = $("#container").width();
    height = $("#container").height();
    margL = $(".map").width()/2 -width/2;
    margT = $(".map").height()/2 - height/2;
    $(".map").css('margin-left',-margL)
    $(".map").css('margin-top',-margT)
}) 
```

这就是[这里所做的](http://deepliquid.com/projects/Jcrop/demos.php?demo=thumbnail)

# c# - 有什么方法可以避免注释属性中的幻数？

> ID：14193146
> 
> 赞同：3
> 
> 时间：2013-01-07T09:31:09.893
> 
> 标签：c#, .net, asp.net-mvc, c#-4.0

我有这段代码，在不同的情况下，使用来自[MVC Foolproof Validation](http://foolproof.codeplex.com)`RequiredIf`的属性

```
[Display(Name = "ID Number")]
[RequiredIf("CitizenshipId", 1)]
public string IdNumber { get; set; } 
```

但我真正想要的是

```
[RequiredIf("CitizenshipId", GetId("SA Citizen")] 
```

现在，我认为其他开发人员也希望消除幻数 1 到目前为止，我所想到的只是函数必须查找的查找函数参数的字符串名称。把 1 变成“1”是很糟糕的。

**注意：**这里的常量并不理想，因为上面的幻数指的是数据库的 PK。我想这也不理想，我应该为每个查找条目添加一个带有“常量代码”的第三列，所以无论 PK 是什么，无论文本是什么，我们仍然有一个不可变的值。

**注意：**我在 Orchard 内部工作，所以与定制提供商没有什么有趣的业务。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T10:01:22.660

我使用[了 FluentValidator](http://fluentvalidation.codeplex.com/)，它比 Attributes 更灵活。肯定更容易测试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T09:43:15.377

你最好的选择是使用常量。

1.  无法更改现有属性。
2.  对于属性，不支持泛型。
3.  不能使用 Lambda 表达式，因为属性构造函数（和属性）只能包含常量表达式

# volume-shadow-service - 在 VSS HW Provider 中跳过 GetTgetLuns、LoacteLuns 和 FillinLunInfo

> ID：14193148
> 
> 赞同：2
> 
> 时间：2013-01-07T09:31:16.337
> 
> 标签：volume-shadow-service

我正在编写 VSS 硬件提供程序，并且能够创建快照。因此，当使用跟踪工具进行跟踪时，我注意到 PostCommitSnapshot 非常完美。在自动导入卷影副本的 PostCommit 快照之后，GetTgetLuns、LoacteLuns 和 FillinLunInfo 是必需的，但正如我正在采取的那样某些存储上的卷的快照，因此我没有足够的信息提供给 GetTargetLuns。

1.  如果我继续使用 AreLunsSupported 中提供的相同 LUNinfo，则会在 GetTargetLuns 中引发 BadSourceLun 错误。

2.  如果我尝试通过注释掉 GetTargetLuns 中的检查条件来跳过此错误，则执行将继续，直到 LocateLuns 然后异步等待，然后调用 OnLunEmpty 方法，然后中止快照。

3.  我尝试将快照状态值设置为 VSS_SS_POSTCOMMITTED，但这是保留给系统使用的。

所以我想在 Vss Hardware Provider 中跳过这些方法？

任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-29T14:30:56.810

当快照上下文设置为：VSS_CTX_FILE_SHARE_BACKUP | 时，它不会调用它们。VSS_VOLSNAP_ATTR_TRANSPORTABLE 在请求方。

# .net - Ftp 检索文件的时间戳

> ID：14193150
> 
> 赞同：0
> 
> 时间：2013-01-07T09:31:29.877
> 
> 标签：.net, ftp

我需要获取 ftp 文件夹中文件的时间戳。
在后面，我使用的是在 codeplex 上找到的 ftpclient。[http://ftpclient.codeplex.com/](http://ftpclient.codeplex.com/)

无论如何，我尝试了两种方法：

1.  获取日期时间戳命令

    ```
    '...
    ftp.Method = Net.WebRequestMethods.Ftp.GetDateTimestamp
    '... 
    ```

    我收到如下错误：远程服务器错误（500）语法错误。无法识别的命令..

2.  ListDirectoryDe​​tails 命令

    ```
    '...
    ftp.Method = Net.WebRequestMethods.Ftp.ListDirectoryDetails
    '... 
    ```

    文件列表的 FileDateTime 属性设置为 MinDate。
    调试时，我发现它无法解析像“Dec 24 10:15”这样的字符串，
    但它可以将“Jan 07 10:15”解析为“#1/7/2013 7:10:00 AM#”，即在日期部分是正确的，但在时间部分是错误的。

使用 Windows 资源管理器或 filezilla 客户端浏览 ftp 文件夹，我看到“上次修改”列显示正确的值。

我可以使用原始日期/时间下载文件，但使用 FtpClient 库我会得到类似的信息：请求的 URI 对此 ftp 命令无效。

同样，使用 Windows 资源管理器或 filezilla 客户端下载，原始日期会被保留（Filezilla 可以选择这样做）。

# sunspot - 太阳黑子 - search.results 为 nil:NilClass 抛出未定义的方法“匹配”

> ID：14193153
> 
> 赞同：1
> 
> 时间：2013-01-07T09:31:35.193
> 
> 标签：sunspot, sunspot-rails

我使用 Sunspot 并具有以下代码

```
search = UserSearchKeywords.search do
  fulltext "#{params[:search_keyword]}"
  adjust_solr_params do |params|
    params[:fl] = "user_profile_id"
  end
end 
```

当我尝试调用

```
search.results 
```

方法，我得到以下异常

```
NoMethodError (undefined method `match' for nil:NilClass) 
```

谁能帮我理解我在哪里犯了错误？

问候，Shardul。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T10:52:37.013

在 fl 列表中添加 id 列，这将是 UserSearchKeywords 表的主键

```
params[:fl] = "id user_profile_id" 
```

# javascript - 在 Internet Explorer 中解析 HTML（从字符串）

> ID：14193157
> 
> 赞同：0
> 
> 时间：2013-01-07T09:31:49.723
> 
> 标签：javascript, html, dom, html-parsing

我编写了这个跨浏览器代码，用于从字符串中解析 XML：

```
var xparse = function (xml$s) {
    var xml, p;
    if (typeof(DOMParser) !== 'undefined') {
        var p = new DOMParser();
        xml = p.parseFromString(xml$s, 'text/xml');
    } else {
        xml = new ActiveXObject('Microsoft.XMLDOM');
        xml.async = 'false';
        xml.loadXML(xml$s);
    }

    return xml;
}; 
```

它适用于 XML，但我一直在尝试调整它以解析 HTML。对于除 IE 以外的任何浏览器，只需更改`text/xml`为`text/html`. 我似乎无法找到关于 HTML 等价物的任何信息`ActiveXObject('Microsoft.XMLDOM')`。我也想避免使用任何框架。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T14:41:24.740

要将 HTML 字符串注入 DOM 元素，您可以使用`innerHTML`：

```
element.innerHTML = xml$s; 
```

但是您可能想要[清理 HTML 字符串](https://stackoverflow.com/questions/295566/sanitize-rewrite-html-on-the-client-side)。

# c - C RSA 密钥生成器

> ID：14193166
> 
> 赞同：5
> 
> 时间：2013-01-07T09:32:19.000
> 
> 标签：c, rsa, microcontroller, private-key, key-generator

我在微控制器（不运行任何操作系统）上创建了一个程序，但我在 C 中找不到任何可以为我提供 RSA（PKCS#1）密钥生成器（公共和私有）的库。

我想 OpenSSH 不是一个选项，因为它链接到 Linux 或 Unix。我找到了一些 SSH 实现，但它只支持客户端（通过公钥编码）。

是否存在这样的 C 库（RSA (PKCS#1) 密钥生成器（公共和私有）+ 编码、解码）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T10:59:40.527

我非常怀疑是否有这样的库，它不使用操作系统功能并在微控制器上运行。一个快速的谷歌搜索带来了这个：

[polarssl.org/rsa-源代码](http://polarssl.org/rsa-source-code)

也许您可以使用或调整它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-17T10:20:46.980

对于没有操作系统的嵌入式项目，您可以使用：

1.  PolarSSL ( [https://polarssl.org/](https://polarssl.org/) )
2.  CyaSSL ( [http://www.yassl.com/yaSSL/Home.html](http://www.yassl.com/yaSSL/Home.html) )
3.  RSAEuro (github.com/mort666/RSAEuro)

检查在商业产品中使用此库的许可证。目前我正在尝试使用 PolarSSL 生成 RSA 密钥对。我使用这个库的精简版本，它支持所有硬件功能（AES、DES、3DES、TRNG、SHA1、MD5、HMAC）并入 STM32F4 MCU。

# android - 使用 Theme.Wallpaper 时，Android 操作栏为空

> ID：14193168
> 
> 赞同：5
> 
> 时间：2013-01-07T09:32:19.580
> 
> 标签：android, android-theme

我需要有一个操作栏以及一个设置主题为 Theme.Wallpaper。我已将主题作为墙纸放在 values 文件夹中的 styles.xml 中，但这会使我的操作栏无法初始化。如何完成这两件事？Viz- 主题作为壁纸和动作栏的所有荣耀？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-07T09:38:57.560

在您的 styles.xml 文件中，为了让操作栏正常工作，请使用父主题为 **android:Theme.Holo.Light.DarkActionBar**

要在 android 中获取壁纸主题的属性，请使用 android 壁纸主题样式使用的项目，例如 showWallpaper -> true ...

因此，通过将这些值添加到项目来自定义您的“AppTheme”。

```
<style name="AppTheme" parent="android:Theme.Holo.Light.DarkActionBar" >
   <item name="android:windowBackground">@android:color/transparent</item>
    <item name="android:colorBackgroundCacheHint">@null</item>
    <item name="android:windowShowWallpaper">true</item>
</style> 
```

这将达到目的。

# ssis - 如何将文件添加到 SSIS 项目杂项文件夹

> ID：14193169
> 
> 赞同：16
> 
> 时间：2013-01-07T09:32:19.487
> 
> 标签：ssis, bids

我正在使用 BIDS2008，我想将一个文件添加到我的 SSIS 项目的 Miscellaneous 文件夹中。

我试过了：

1.  将文件拖放到解决方案资源管理器中的文件夹图标 - 不允许
2.  右键单击文件夹图标 - 返回 0 个菜单选项
3.  从解决方案资源管理器中的项目图标添加项目 - 在那里没有看到任何有用的信息
4.  手动创建文件夹，添加一个虚拟文本文件，close-reopen-rebuild 解决方案 - 没有任何成功

这一定很简单，但我不知道是什么。

任何帮助表示赞赏。

提前致谢。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-07T09:39:14.840

右键单击项目 Click `ADD`-> `Exisiting Item`。现在您可以在对话框中指向任何没有扩展名的文件，例如`dtsx`或`config`。选择这些文件将自动将它们放入`Miscellaneous folder`

# drupal-6 - 节点表单上的另一个保存按钮

> ID：14193172
> 
> 赞同：0
> 
> 时间：2013-01-07T09:32:27.400
> 
> 标签：drupal-6, cck

我想在节点添加表单**drupal 6中添加一个按钮“****保存并添加更多**” 。单击此按钮页面应在保存节点后重定向到相同的节点添加表单。我有一个内容类型的孩子要添加孩子，用户可能有多个孩子，所以如果他/她想添加另一个孩子，他/她将点击“保存并添加更多”，用户只有一个孩子，他/她将点击在“保存”上，所以基本上只有重定向是更改新按钮。

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T10:35:45.790

您需要创建一个包含两个文件的简单模块来执行此操作。在 /sites/all/modules/custom 文件夹中创建一个新目录“addmore”（如果该文件夹不存在，则创建该文件夹）并在该目录中创建以下文件：

*   添加更多信息
*   addmore.module

**addmore.info 的内容：**

```
name = "Add More"
description = Create and Add More button on Child node forms
package = Other
core = 6.x 
```

**addmore.module 的内容** （假设“Child”内容类型的机器名是“child”）

```
<?php
/**
 * Implementation of HOOK_form_alter
 *
 * For 'child' node forms, add a new button to the bottons array that submits
 * and saves the node, but redirects to the node/add/child form instead of to
 * the newly created node.
 */
function addmore_form_alter(&$form, $form_state, $form_id) {
  if ($form_id == 'child_node_form') {
    $form['buttons']['save_and_add_more'] = array(
      '#type' => 'submit',
      '#value' => t('Save and add more'),
      '#weight' => 20,
      '#submit' => array(
        // Adds the existing form submit function from the regular "Save" button
        $form['buttons']['submit']['#submit'][0],
        // Add our custom function which will redirect to the node/add/child form
        'addmore_add_another',
      ),
    );
  }
}

/**
 * Custom function called when a user saves a "child" node using the "Save and
 * add more" button. Directs users to node/add/child instead of the newly
 * created node.
 */
function addmore_add_another() {
  drupal_goto('node/add/child');
} 
```

创建这些文件后，导航到模块页面并启用“添加更多”模块。

就是这样。您将看到一个新的“保存并添加更多”按钮，该按钮仅在创建子节点和编辑表单时执行此操作。**

# c - libnuma - 数据类型问题

> ID：14193177
> 
> 赞同：1
> 
> 时间：2013-01-07T09:32:46.083
> 
> 标签：c, types, numa

我将 libnuma 用于增强的 NUMA 感知分配器。如“numa 手册页”或 libnuma API 中所述，有些功能不起作用。准确地说，我在使用这些功能时遇到了问题：`numa_get_run_node_mask()`和`numa_node_to_cpus()`.
关于前者，阅读 API 和手册，它说它返回 a `struct bitmask *`，而编译器要求 a `nodemask_t`。
后者应该需要两个参数，如 API 定义的那样，但编译器要求三个。如果我传递三个参数——在我在源代码定义中找到的这个声明之后：`numa_node_to_cpus_v1(int node, unsigned long *buffer, int bufferlen)`——我每次都会得到一个段错误，无论我使用*什么 bufferlen* *。*

 *顺便提一下，后一个功能与您键入命令时`numa_node_to_cpus()`的用途相同：它用于检索节点中的所有cpu。我通读了源代码，它与两个参数一起正常工作。`numactl``numactl --hardware``int node, struct bitmask *mask`

也许有需要修复的错误，或者通过 libnuma 版本更改的 API 和源之间的一些差异。（顺便说一句，我如何检查机器上正在运行哪个 libnuma/numactl？我在服务器上远程工作，`numactl`似乎没有`--version`选项！）*

# c# - 当我分离一个与另一个缓存实体有关系的对象时，它是否也被分离了？

> ID：14193180
> 
> 赞同：0
> 
> 时间：2013-01-07T09:33:06.673
> 
> 标签：c#, .net, entity-framework

我想知道当我分离一个与另一个缓存实体有关系的对象时会发生什么，这也是分离的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T09:38:44.883

否。关系设置为 null（或集合导航属性被清除）。无法分离对象图。最好的解决方法是通过使用序列化和反序列化来制作附加实体的深层副本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T09:41:10.170

不，导航属性设置为空。

您可以使用[.AsNoTracking()](http://msdn.microsoft.com/en-us/library/gg679352%28v=vs.103%29.aspx)来查询分离的子树。

# oracle - Oracle 错误 PLS-00103

> ID：14193181
> 
> 赞同：-1
> 
> 时间：2013-01-07T09:33:09.637
> 
> 标签：oracle, plsql, oracle10g

我正在尝试在生成动态查询的存储过程上提供一个字符串参数：

```
CREATE OR REPLACE procedure FMIS3.dynamic_pivot(p_cursor in out sys_refcursor, FISCAL_YEAR in FMS_K_BUDGET_ALLOCATION_MST.FKBAM_FISCAL_YEAR%type)
as
sql_query varchar2(5000) := 'select FKOM_OFFICE_ID,FKBAM_BUDGET_ID ';
begin
    for x in (select distinct PFS_SOURCE_ID,PFS_SOURCE_ENG from PBS_FC_SOURCE WHERE PFS_UPPER_SOURCE_ID!=0 )
    loop
        sql_query := sql_query ||
            ' , sum(case when FKBAB_SOURCE_ID = '||x.PFS_SOURCE_ID||' then FKOD_AMOUNT ELSE 0 end) as '||x.PFS_SOURCE_ENG;
            dbms_output.put_line(sql_query);
    end loop;
    sql_query := sql_query || ' FROM FMS_K_OFFICEWISE_DTL
    JOIN FMS_K_OFFICEWISE_MST ON FMS_K_OFFICEWISE_MST.FKOM_OFFICE_MST_ID=FMS_K_OFFICEWISE_DTL.FKOD_OFFICE_MST_ID
    JOIN FMS_K_BUDGET_ALLOCATION_DTL ON FMS_K_BUDGET_ALLOCATION_DTL.FKBAD_BUDGET_ALLOC_DTL_ID=FMS_K_OFFICEWISE_DTL.FKOD_BUDGET_ALLOC_AD_ID
    JOIN FMS_K_BUDGET_ALLOCATION_MST ON FMS_K_BUDGET_ALLOCATION_MST.FKBAM_BUDGET_ALLOC_ID=FMS_K_BUDGET_ALLOCATION_DTL.FKBAB_BUDGET_ALLOC_ID
    JOIN PBS_FC_BUDGET ON PBS_FC_BUDGET.PFB_BUDGET_ID=FMS_K_BUDGET_ALLOCATION_MST.FKBAM_BUDGET_ID
    WHERE FKBAM_FISCAL_YEAR='||FISCAL_YEAR||'
    GROUP BY FKOM_OFFICE_ID,FKBAM_BUDGET_ID ';
    dbms_output.put_line(sql_query);    
    open p_cursor for sql_query;    
end; 
```

您可以看到我使用参数中的值作为条件

```
WHERE FKBAM_FISCAL_YEAR='||FISCAL_YEAR||' 
```

但这给了我错误：

```
PLS-00103: Encountered the symbol "end-of-file" when expecting one of the following:
begin case declare end exception exit for goto if loop mod
null pragma raise return select update while with
<an identifier> <a double-quoted delimited-identifier>
<a bind variable> << close current delete fetch lock insert
open rollback savepoint set sql execute commit forall merge
pipe 
```

任何的想法 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T10:10:35.947

如您所说，如果`FISCAL_YEAR`是varchar2，则需要将其放在引号中。更好的是，在这里使用绑定变量。IE

```
 WHERE FKBAM_FISCAL_YEAR=:year
    GROUP BY FKOM_OFFICE_ID,FKBAM_BUDGET_ID ';
open p_cursor for sql_query using fiscal_year; 
```

如果这仍然失败，请向我们展示该行的输出

```
dbms_output.put_line(sql_query); 
```

我还假设`PFS_SOURCE_ID`是一个数字，并且`PFS_SOURCE_ENG`是一个字符串，行中没有空格/或保留字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T11:01:19.707

改变：

```
WHERE FKBAM_FISCAL_YEAR='||FISCAL_YEAR||'
GROUP BY FKOM_OFFICE_ID,FKBAM_BUDGET_ID '; 
```

到

```
WHERE FKBAM_FISCAL_YEAR='''||FISCAL_YEAR||''' GROUP BY FKOM_OFFICE_ID,FKBAM_BUDGET_ID '; 
```

# javascript - 在数组中迭代哈希

> ID：14193187
> 
> 赞同：1
> 
> 时间：2013-01-07T09:33:37.057
> 
> 标签：javascript, jquery

我如何遍历它并使用结构中的值？

```
"[{\"username\":\"aw\"},{\"username\":\"api\"},{\"companyname\":\"dd\",\"username\":\"dd\"},{\"companyName\":\"Testing\"}]" 
```

我只想得到`username`，这是对使用 mongodb 设计的数据库的调用产品。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T09:35:53.083

尝试这个，

```
arr = JSON.Parse(yourString).map(function(item){
     return item.username;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T09:38:58.803

首先，您必须将其转换为 JavaScript 数组。在 jQuery 中，您可以使用方法[jQuery.parseJSON()](http://api.jquery.com/jQuery.parseJSON/)来完成。所以代码将如下所示：

```
var results = $.parseJSON(resultsFromMongoDB);
for (var i in results) {
    if (results[i]['username'] != undefined) {
        var username = results[i]['username']
        // Some code...
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T09:37:13.113

这是 JSON。

您需要解析它才能拥有一个 javascript 对象。

然后，您可以迭代数组：

```
var obj = JSON.parse("[{\"username\":\"aw\"},{\"username\":\"api\"},{\"companyname\":\"dd\",\"username\":\"dd\"},{\"companyName\":\"Testing\"}]");

for (int i = 0; i < obj.length; i++)
{
    console.log(obj[i].username);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T09:41:41.733

[**编辑**]问题改变了：

~~这里不需要 JSON，它是一个数组~~，你可以解析它并使用`filter`and/or`map`方法：

```
var usernames = JSON.parse(yourResultStringFromMongoDb)
   .filter(function(a){return a.username;})
   .map(function(a){return a.username});
//=> ["aw", "api", "dd"] 
```

[**也可以看看 ...**](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter)

# javascript - 如何检查滚动条状态是否已经在顶部或末尾？

> ID：14193193
> 
> 赞同：9
> 
> 时间：2013-01-07T09:34:21.850
> 
> 标签：javascript, jquery, html, scroll, scrollbar

当用户设置“overflow:auto;”时显示滚动条 并且用户可以从上到下滚动内容。问题是，javascript/jquery 如何检查滚动条是在底部还是在顶部？以便

```
if (is_scrollbar_top || is_scrollbar_end)
//do some thing.. 
```

那么有什么功能/方法可以检查这种状态吗？谢谢

更新：不工作 - 使用 jquery ui 对话框

**html:**

```
<div class = "dialog" id="dialog" title="Past Issues"></div> 
```

**javascript:**

```
$('#pastIssues').click(function (event) {
            var issueString = 'product=Headline&year=2012&month=12';
            $('.issues,#issuesBox').remove();
            var dWidth = $(window).width() * 0.9; 
            var dHeight = $(window).height() * 0.9;

            $( "#dialog" ).dialog({
                    height: dHeight,
                    width: dWidth,
                    modal: true,
                    draggable: false, 
                    resizable: false,
            });

            get_past_issues(issueString,2012,12,event.type);
            return false;
        }); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-07T09:44:55.023

HTML：

```
<div id="mydiv" style="overflow: auto; height: 500px"></div> 
```

脚本：

```
$(document).ready(function()
{
    $("#mydiv").scroll(function()
    {
        var div = $(this);
        if (div[0].scrollHeight - div.scrollTop() == div.height())
        {
            alert("Reached the bottom!");
        }
        else if(div.scrollTop() == 0)
        {
            alert("Reached the top!");
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-07T10:19:15.507

查看

```
if($(window).scrollTop() == 0 || $(window).scrollTop() == $(document).height()- $(window).height()) {
   // do something
} 
```

# phpunit - 使用相同的预期异常测试多个异常

> ID：14193194
> 
> 赞同：0
> 
> 时间：2013-01-07T09:34:25.170
> 
> 标签：phpunit

我正在尝试测试我班级的构造函数等。它只需要一个必须是字符串的参数。所以我写了这个测试：

```
class categoryTest extends PHPUnit_Framework_TestCase {

  public function testConstructor() {

    $this->setExpectedException('Exception', 'Unknown data type.');
    $objCategory = new category(1);

    $this->setExpectedException('Exception', 'Unknown data type.');
    $objCategory = new category(-500);

    $this->setExpectedException('Exception', 'Unknown data type.');
    $objCategory = new category(true);

    $this->setExpectedException('Exception', 'Unknown data type.');
    $objCategory = new category(array());

    ...

  }

  public function testNextMethod() {

  }

} 
```

如您所见，我希望每次都出现相同的异常。

这工作得很好，所以看起来，但脚本会在完成后跳到 testNextMethod()

```
$this->setExpectedException('Exception', 'Unknown data type.');
$objCategory = new category(1); 
```

. 我是否必须为每个测试编写一个自己的 testMethod()？或者有什么解决方法吗？

最好的问候，莫夫

编辑：

你好塞浦路斯，

非常感谢您的回复。我这样解决了我的问题：

```
class categoryTest extends PHPUnit_Framework_TestCase {

    protected $backupGlobals = FALSE;

    /**
      *
      * @dataProvider provider
      *
      **/
    public function testMuff($strCategory) {

      $this->setExpectedException('Exception', 'Unknown data type.');
      $objCategory = new category($strCategory);

    }

    public function provider() {

      $objHIS = new DDDBL('HIS');

      return array(array(1),
                   array(-500),
                   array(true),
                   array(array()),
                   array($objHIS)
                  );

    }

    ...

} 
```

现在它工作得很好，即使我根本不喜欢这个符号。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T11:27:27.373

你要找的东西是`DataProvider`，看这里：

[http://www.phpunit.de/manual/3.6/en/writing-tests-for-phpunit.html#writing-tests-for-phpunit.data-providers](http://www.phpunit.de/manual/3.6/en/writing-tests-for-phpunit.html#writing-tests-for-phpunit.data-providers)

# spring - spring security - 带有身份验证令牌的基于时间的 URL

> ID：14193195
> 
> 赞同：0
> 
> 时间：2013-01-07T09:34:26.063
> 
> 标签：spring, spring-security

我需要在以下位置实现用户身份验证：

1.  用户得到一个链接，在链接上有一个令牌加密他的一些详细信息（id 等）和到期时间 ==> 这个 URL 在我的应用程序之外并且已经实现
2.  当用户点击链接时，我需要解密令牌并解析数据，但我不需要将它与数据库中的数据进行比较。只检查时间没有过期并取出数据（id等）

你能指导我使用哪些类吗？我已经阅读了很多，现在我认为我需要扩展 AbstractPreAuthenticatedProcessingFilter 以从 URL 中获取令牌并对其进行解密，但我不确定身份验证提供程序，以及是否需要 userService 实现？

谢谢！

编辑：

我一直在阅读更多内容，现在我不确定我是否需要 PreAuthenticated 类，因为它不像用户之前已经过身份验证，我仍然需要对他进行身份验证。身份验证实际上是看到解密有效并且尚未达到到期时间。你有什么建议？我开始编写自己的过滤器（扩展 AbstractAuthenticationProcessingFilter），然后我看到我需要自己的 AuthenticationToken 实现，因为 UsernamePasswordAuthentication 不适合我，然后在提供程序中我也找不到真正适合的东西。

任何帮助都将不胜感激。我正在考虑只扩展 AbstractAuthenticationProcessingFilter 但不使用身份验证管理器，因为它只会让我变得更复杂。你怎么看？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T16:26:52.703

这是您可以使用的一种方法：

1) 扩展“GenericFilterBean”以创建您自己的安全过滤器，然后您可以在您的“http”配置中将其用作“自定义过滤器”。

2) 可选：根据您的需要，您可以实现自己的“UserDetails”，这非常简单。

3) 可选：您可以将“PreAuthenticatedAuthenticationToken”用于“身份验证”实施。

4）在过滤器中，您可以查找是否存在适当的参数，尝试解密信息。如果出现任何问题，抛出一个 Authentication Exception 并在接下来描述的入口点处理它。

5) 可选：如果成功，您可以将 UserDetails 对象包装在 PreAuthenticatedAuthenticationToken 中并将其设置为安全上下文持有者。

6) 实现“AuthenticationEntryPoint”并覆盖“commence”以清除安全上下文/会话，处理自定义过滤器中的 AuthenticationException 和/或重定向/调度到视图。将此作为您的切入点。

# javascript - 访问另一个 iframe 内的 iframe 内的 html

> ID：14193197
> 
> 赞同：2
> 
> 时间：2013-01-07T09:34:28.620
> 
> 标签：javascript, jquery, html, iframe

我试图在一秒钟内访问 html `<iframe>`。布局类似于这样：

```
<script type="text/javascript">
   var j = window.frames['a'].window.frames['b'].document.body.innerHTML;
   alert(j);
</script> 
```

html看起来像这样：

```
<iframe id="a">
    <iframe id="b">
        <span style="font-style:italic; font-weight:bold;">heyo!</span>
    </iframe>
</iframe> 
```

但是，每当我尝试这个时，它都不起作用。有任何想法吗？我在哪里搞砸了？

感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-27T12:26:16.930

尝试：

```
<iframe id="a" src="a.html">
</iframe> 
```

然后在 a.html 上：

```
<iframe id="b" src="b.html">
</iframe> 
```

然后在 b.html 上：

```
<span style="font-style:italic; font-weight:bold;">heyo!</span> 
```

# javascript - 可以读取新数据时获取事件 - chrome.socket.read API

> ID：14193201
> 
> 赞同：4
> 
> 时间：2013-01-07T09:34:43.033
> 
> 标签：javascript, sockets, google-chrome-extension, google-chrome-app

尝试`chrome.socket`在 Chrome 版本 25.0.1364.5 dev 上使用 API 使用 TCP 套接字。

查看[文档](http://developer.chrome.com/apps/socket.html)`chrome.socket.read`似乎没有办法在有新数据可供读取时获得通知。

TCP 服务器有一些[示例代码](https://github.com/GoogleChrome/chrome-app-samples/blob/master/tcpserver/tcp-server.js)，它每 500 毫秒轮询一次读取命令，但我认为这不会高效/准确

```
// Start polling for reads.
setInterval(this._periodicallyRead.bind(this, socketId), 500); 
```

更令人困惑的是，在“接收数据”部分下的[“网络通信”文档](http://developer.chrome.com/apps/app_network.html)中，声明可以将特殊处理程序作为`onEvent`选项传递`chrome.socket.create`

> 该参数是一个具有一个值“onEvent”的对象，它是对方法的函数引用，当端口上有数据时将调用该方法。

这个 onEvent 参数将像这样使用

```
chrome.socket.create(
    'udp', '127.0.0.1', 1337, 
    { onEvent: handleDataEvent }, // <-- call this when new data is available
    createHandler
) 
```

但这似乎仅适用于 UDP 连接，因为当我尝试使用它时出现以下错误

```
Error: Invocation of form 
       socket.create(string, string, integer, object, function) 
       doesn't match definition 
       socket.create(string type, optional object options, function callback)

        at Object.normalizeArgumentsAndValidate (schemaUtils:119:11)
        at Object.<anonymous> (schema_generated_bindings:301:32)
        at chrome-extension://obljaojhdffbpcdfbeoiejegaodfoonp/background.js:11:15
        at chrome.Event.dispatchToListener (event_bindings:387:21)
        at chrome.Event.dispatch_ (event_bindings:373:27)
        at dispatchArgs (event_bindings:249:22)
        at Object.app.runtime.onLaunched (app.runtime:116:7)
        at Object.chromeHidden.Event.dispatchEvent (event_bindings:255:35) 
```

所以问题是，这样的事情可以用 TCP Connections 来实现吗？`read`而不是必须每 x 毫秒轮询一次方法？

**更新**

这是我正在使用的一种解决方法，直到存在更好的文档/事件支持。

```
function onReadHandler(readInfo) {
     // do things with data
     // ....

     // re register handler with callback itself
     chrome.socket.read(socketId,null,onReadHandler);         
}

chrome.socket.read(socketId,null,onReadHandler); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T21:26:14.133

对于 TCP 连接，传递给 socket.read 的回调只有在有新数据可用时才会执行。提到的[示例代码](https://github.com/GoogleChrome/chrome-app-samples/blob/master/tcpserver/tcp-server.js#L255)已修复为仅使用回调而不是 setInterval。

网络文档确实已经过时，我们正在努力更新它。如果您想在 API 快速变化的今天避免文档过时的风险，您应该始终检查[API 参考文档](http://developer.chrome.com/apps/api_index.html)——这些文档是直接从代码生成的，不需要编辑工作。如果你觉得“hacky”:-) 你也可以直接查看 Chromium[源代码 API 定义](http://src.chromium.org/viewvc/chrome/trunk/src/chrome/common/extensions/api/)（[这个是针对套接字 API 的](http://src.chromium.org/viewvc/chrome/trunk/src/chrome/common/extensions/api/socket.idl?view=markup)）

最后但同样重要的是，对于[Sublime Text](http://sublimetext.com)用户，有一个[Sublime Chrome Apps and Extensions 插件](https://github.com/mangini/chrome-apis-sublime)。它还没有完成，但您已经可以获得代码完成、CSP 验证和一些用于引导的样板。通过 Sublime [Package Manager](http://wbond.net/sublime_packages/package_control)安装它。

# search - 如何在 umbraco 中创建论坛并使用 umbraco 搜索选项？

> ID：14193202
> 
> 赞同：2
> 
> 时间：2013-01-07T09:34:46.927
> 
> 标签：search, full-text-search, search-engine, umbraco, forum

我需要在我的网站上创建一个论坛并使用 Umbraco 工具设置一个搜索引擎。我需要一些视频链接和电子书。

此[链接](http://umbraco.com/assets/umbracotv/designer/razorcookbook/ep7_search.flv)非常有用，但我需要更多文档和视频。我想在 Umbraco 中实现搜索。我在 umbraco.org/.../adding-a-search-to-your-website 上找到了视频，但只有 2 分钟长。我知道如果我支付 19 欧元，我可以观看整个视频，但我住在伊朗，我付不起。

更新：这个[链接](https://stackoverflow.com/questions/2297009/does-anyone-know-of-a-feature-filled-forum-package-for-umbraco-4-03)是相关的。（论坛）这个[链接](https://stackoverflow.com/questions/14333732/make-a-optional-search-in-umbraco/14335513#14335513)是相关的。（搜索）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T10:41:18.027

[nForum](http://our.umbraco.org/projects/website-utilities/nforum)似乎很有希望。

此外，由于[yaf](http://www.yetanotherforum.net)是一个用户控件，因此您也可以将其集成到 umbraco 中。但是您需要做一些工作才能使其正常工作。演练在[这里](http://www.createsoft.co.uk/blog/2008/10/yaf-integration-to-umbraco-4/)解释。

# database - 流星部署会覆盖现有数据库吗？

> ID：14193203
> 
> 赞同：1
> 
> 时间：2013-01-07T09:34:49.173
> 
> 标签：database, meteor

我第一次使用时，`meteor deploy`所有东西都被完美地捆绑和部署。

现在我已经对要部署的代码进行了更改，但是`meteor deploy`再次使用时数据库的内容会发生什么变化 - 现有数据库的内容会被覆盖还是会保留？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T14:54:23.663

No, the contents of the database will not be overwritten. In fact, all meteor commands except `meteor reset` are non-destructive. See more about the [meteor command line](http://docs.meteor.com/#commandline).

# backbone.js - 为什么collection.reset 像collection.add 一样工作？

> ID：14193204
> 
> 赞同：0
> 
> 时间：2013-01-07T09:34:50.140
> 
> 标签：backbone.js, backbone-views, signalr-hub, backbone.js-collections, backbone.signalr

我有一个 Backbone 集合的视图。当我通过backbone.signalR 集线器重置集合时，我希望得到一个通过集线器传递的新集合，但它只是重置集合，然后像调用`collection.add`传递给它的任何内容一样工作。因此，我在集合中的模型中获得了 12 个属性，其中前 6 个为空值，后 6 个为当前值。

我的收藏包含具有 6 个属性的模型。我想用新的 6 个值重置它们的值。但是我打不通`collection.reset()`。

在重置我的收藏之前，我有一个对象包含以下 6 个属性：

```
 customerId: 2, 
  expectedTimeOfService: "10 min",
  id: 6,
  noOfWaiting: 13, 
  queueName: "Cash Deposit",
  smsCode: "1234", 
```

重置我的收藏后，我得到一个包含以下 12 个属性的对象：

```
 CustomerId: null,
  ExpectedTimeOfService: null,
  Id: null,
  NoOfWaiting: null,
  QueueName: null,
  SmsCode: null,
  customerId: 2,
  expectedTimeOfService: "10 min",
  id: 6,
  noOfWaiting: 13,
  queueName: "Cash Deposit",
  smsCode: "1234", 
```

所以，我不知道是什么问题，或者我怎样才能摆脱这个问题。我只想在集合重置后获得具有更新值的 6 属性值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T10:08:32.253

JavaScript 区分大小写，因此`CustomerId`与`customerId`. 当 Backbone 更新模型时，它没有找到匹配的属性，所以它创建了一个新的。

您应该从源头解决问题并将服务返回的 JSON 密钥更改为`lowerCamelCase`.

如果由于某种原因您无法更改服务响应，则可以在以下位置进行转换`Model.parse`：

```
var Model = Backbone.Model.extend({
  parse: function (attrs) {
    var cleaned = {}
    _.each(attrs, function(val, key) {
      cleaned[key[0].toLowerCase() + key.slice(1)] = val;
    });
    return cleaned;
  }
}); 
```

并在重置时传递选项`parse:true`：

```
collection.reset(data, {parse:true}); 
```

# bash - 在系统中注册自定义 shell 函数（OSX）

> ID：14193207
> 
> 赞同：15
> 
> 时间：2013-01-07T09:35:11.693
> 
> 标签：bash, function, shell, .bash-profile

今天我想编写一个函数，它将我的博客页面（在 nanoc 中开发）自动部署到 github 页面 - 这是脚本：

```
function cmit()
{
  nanoc compile;
  git add .;
  git commit -am $1;
  git push origin source;
  cd output; git add .;
  git commit -am $1;
  git push origin master;
  cd ..;
  echo 'new version deployed! now starting nanoc locally..';
  nanoc aco;
} 
```

示例用法：`cmit "my example commit!"`

我真的不知道如何在系统（OSX）中注册我的功能 - 在`.bashrc`，`.bash_profile`或者其他地方？请帮忙！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-07T09:40:02.200

只需将其添加到文件的底部，您`~/.bashrc`就可以`cmit`像使用常规命令一样使用，您需要刷新当前的 shell 以获取更改，然后运行`source ~/.bashrc`。如果您将函数保存在文件中`cmit`，只需`cat cmit >> ~/.bashrc`将该函数附加到`~/.bashrc`.

您可以先试用一个测试功能：

```
# add to ~/.bashrc first
function test() {
    echo "Some test foo!"
}

$ source ~/.bashrc

$ test
Some test foo! 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-07T09:41:29.593

你可以把它放在你的 中`.bashrc`，只要你以该`.bashrc`文件的所有者身份登录它就可以工作。

如果您希望它可供任何用户使用，请将您的函数内容放在脚本文件中，使其可执行，`chmod`然后将其移入`/usr/bin`（我假设您在该系统上拥有管理员权限）

注意：通常你会给它`rwx rx rx`权限，这对应于`chmod 755 my_script`

编辑：

> 您可以创建自己的 .my_bashrc 并以某种方式告诉系统也查看该文件吗？

是的，您可以，只需告诉您`.bashrc`获取文件的来源：

```
source ~/my_files/.my_bashrc 
```

或者

```
. ~/my_files/.my_bashrc 
```

# ubuntu - 无法安装 libjpeg-turbo-progs 软件包

> ID：14193210
> 
> 赞同：2
> 
> 时间：2013-01-07T09:35:16.993
> 
> 标签：ubuntu, ubuntu-10.04, yeoman

我在安装 libjpeg-turbo-progs 时遇到错误，例如

> sudo apt-get install libjpeg-turbo-progs

它给出的输出为

> 正在读取包列表...完成构建依赖关系树
> 正在读取状态信息...完成 E：无法找到包 libjpeg-turbo-progs

我也试过

> sudo apt-get 升级

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T15:41:29.263

我猜你需要安装 JPEGTran 因为 Yeoman。我在 Ubuntu 11.04 服务器上遇到了同样的错误。

将软件包名称从正确更改`libjpeg-turbo-progs`为`libjpeg-progs`已安装的 JPEGTran：

```
sudo apt-get install libjpeg-progs 
```

[http://wtanaka.com/node/7988](http://wtanaka.com/node/7988)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T14:31:29.840

您应该尝试通过运行重新同步包索引列表：

```
sudo apt-get update 
```

然后尝试安装 jpedTran：

```
sudo apt-get install libjpeg-turbo-progs 
```

# xslt - xsl 多表

> ID：14193218
> 
> 赞同：2
> 
> 时间：2013-01-07T09:35:41.520
> 
> 标签：xslt, foreach, html-table

我是 XSL 的新手，正在使用 w3schools 试用它的编辑器。

提供的xml是

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<!-- Edited by XMLSpy® -->
<catalog>
<cd>
    <title>Empire Burlesque</title>
    <artist>Bob Dylan</artist>
    <country>USA</country>
    <company>Columbia</company>
    <price>10.90</price>
    <year>1985</year>
</cd>
<cd>
    <title>Hide your heart</title>
    <artist>Bonnie Tyler</artist>
    <country>UK</country>
    <company>CBS Records</company>
    <price>9.90</price>
    <year>1988</year>
</cd>
<cd>
    <title>Greatest Hits</title>
    <artist>Dolly Parton</artist>
    <country>USA</country>
    <company>RCA</company>
    <price>9.90</price>
    <year>1982</year>
</cd>
<cd>
    <title>Still got the blues</title>
    <artist>Gary Moore</artist>
    <country>UK</country>
    <company>Virgin records</company>
    <price>10.20</price>
    <year>1990</year>
</cd>
<cd>
    <title>Eros</title>
    <artist>Eros Ramazzotti</artist>
    <country>EU</country>
    <company>BMG</company>
    <price>9.90</price>
    <year>1997</year>
</cd>
<cd>
    <title>One night only</title>
    <artist>Bee Gees</artist>
    <country>UK</country>
    <company>Polydor</company>
    <price>10.90</price>
    <year>1998</year>
</cd>
<cd>
    <title>Sylvias Mother</title>
    <artist>Dr.Hook</artist>
    <country>UK</country>
    <company>CBS</company>
    <price>8.10</price>
    <year>1973</year>
</cd>
<cd>
    <title>Maggie May</title>
    <artist>Rod Stewart</artist>
    <country>UK</country>
    <company>Pickwick</company>
    <price>8.50</price>
    <year>1990</year>
</cd>
<cd>
    <title>Romanza</title>
    <artist>Andrea Bocelli</artist>
    <country>EU</country>
    <company>Polydor</company>
    <price>10.80</price>
    <year>1996</year>
</cd>
<cd>
    <title>When a man loves a woman</title>
    <artist>Percy Sledge</artist>
    <country>USA</country>
    <company>Atlantic</company>
    <price>8.70</price>
    <year>1987</year>
</cd>
<cd>
    <title>Black angel</title>
    <artist>Savage Rose</artist>
    <country>EU</country>
    <company>Mega</company>
    <price>10.90</price>
    <year>1995</year>
</cd>
<cd>
    <title>1999 Grammy Nominees</title>
    <artist>Many</artist>
    <country>USA</country>
    <company>Grammy</company>
    <price>10.20</price>
    <year>1999</year>
</cd>
<cd>
    <title>For the good times</title>
    <artist>Kenny Rogers</artist>
    <country>UK</country>
    <company>Mucik Master</company>
    <price>8.70</price>
    <year>1995</year>
</cd>
<cd>
    <title>Big Willie style</title>
    <artist>Will Smith</artist>
    <country>USA</country>
    <company>Columbia</company>
    <price>9.90</price>
    <year>1997</year>
</cd>
<cd>
    <title>Tupelo Honey</title>
    <artist>Van Morrison</artist>
    <country>UK</country>
    <company>Polydor</company>
    <price>8.20</price>
    <year>1971</year>
</cd>
<cd>
    <title>Soulsville</title>
    <artist>Jorn Hoel</artist>
    <country>Norway</country>
    <company>WEA</company>
    <price>7.90</price>
    <year>1996</year>
</cd>
<cd>
    <title>The very best of</title>
    <artist>Cat Stevens</artist>
    <country>UK</country>
    <company>Island</company>
    <price>8.90</price>
    <year>1990</year>
</cd>
<cd>
    <title>Stop</title>
    <artist>Sam Brown</artist>
    <country>UK</country>
    <company>A and M</company>
    <price>8.90</price>
    <year>1988</year>
</cd>
<cd>
    <title>Bridge of Spies</title>
    <artist>T`Pau</artist>
    <country>UK</country>
    <company>Siren</company>
    <price>7.90</price>
    <year>1987</year>
</cd>
<cd>
    <title>Private Dancer</title>
    <artist>Tina Turner</artist>
    <country>UK</country>
    <company>Capitol</company>
    <price>8.90</price>
    <year>1983</year>
</cd>
<cd>
    <title>Midt om natten</title>
    <artist>Kim Larsen</artist>
    <country>EU</country>
    <company>Medley</company>
    <price>7.80</price>
    <year>1983</year>
</cd>
<cd>
    <title>Pavarotti Gala Concert</title>
    <artist>Luciano Pavarotti</artist>
    <country>UK</country>
    <company>DECCA</company>
    <price>9.90</price>
    <year>1991</year>
</cd>
<cd>
    <title>The dock of the bay</title>
    <artist>Otis Redding</artist>
    <country>USA</country>
    <company>Atlantic</company>
    <price>7.90</price>
    <year>1987</year>
</cd>
<cd>
    <title>Picture book</title>
    <artist>Simply Red</artist>
    <country>EU</country>
    <company>Elektra</company>
    <price>7.20</price>
    <year>1985</year>
</cd>
<cd>
    <title>Red</title>
    <artist>The Communards</artist>
    <country>UK</country>
    <company>London</company>
    <price>7.80</price>
    <year>1987</year>
</cd>
<cd>
    <title>Unchain my heart</title>
    <artist>Joe Cocker</artist>
    <country>USA</country>
    <company>EMI</company>
    <price>8.20</price>
    <year>1987</year>
</cd>
</catalog> 
```

我正在尝试使用 for-each 创建两个表，其中 [price is > 10] 在一个表中，而 price < 10 在另一个表中。（请不要笑） - 我认为 for-each 最好这样做，但它不起作用，并抛出一个关于不规范的异常。显然，我今天读到的关于 XSL 和 XPath 等的所有内容都错过了一些东西。谁能教我我错过的基本原则吗？

这是我的xslt：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<!-- Edited by XMLSpy® -->
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:template match="/">
  <html>
  <body>
  <h2>My CD Collection</h2>
    <table border="1">
      <tr bgcolor="#9acd32">
        <th>Title</th>
        <th>Artist</th>
      </tr>
      <xsl:for-each select="catalog/cd[price>10]">
      <tr>
        <td><xsl:value-of select="title"/></td>
        <td><xsl:value-of select="artist"/></td>
      </tr>
      </xsl:for-each>
    </table>
  <h2>My Dribble Collection</h2>
    <table border="1">
      <tr bgcolor="#FFFF00">
        <th>Title</th>
        <th>Artist</th>
      </tr>
      <xsl:for-each select="catalog/cd[price&lt;10]">
      <tr>
        <td><xsl:value-of select="title"/></td>
        <td><xsl:value-of select="artist"/></td>
      </tr>
      </xsl:for-each>
    </table>
  </body>
  </html>
</xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T10:06:29.087

看来这可能是 Try It Editor 中的错误。它抱怨这条线：

```
<xsl:for-each select="catalog/cd[price&lt;10]"> 
```

说“字符'<'不能在属性值中使用”，但是你拥有它的方式非常好。我建议尝试不同的 XSLT 引擎，或者作为一种解决方法，这个：

```
<xsl:for-each select="catalog/cd[not(price >= 10)]"> 
```

not(price >= 10) 与 price < 10 不完全相同，但在这种情况下已经足够接近了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T09:47:30.377

“格式不正确”的错误可能与 XMLSpy 注释中的注册商标字符触发的编码不匹配有关。尝试从输入 XML 文件和样式表中删除此注释，看看是否可以改进。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T09:44:21.283

首先将价格转换为[数字](https://stackoverflow.com/questions/1265886/string-to-integer-in-xslt)

```
<xsl:for-each select="catalog/cd[number(price) &lt; 10]"> 
```

# java - 连接到 Java 中的数据库的异常：JDBC

> ID：14193220
> 
> 赞同：1
> 
> 时间：2013-01-07T09:35:59.137
> 
> 标签：java, jdbc

我正在尝试使用 JDBC 从表中获取所有列值。

这是我在主程序中编写的代码。

```
 Class.forName( "com.mysql.jdbc.driver" );
 String url = "jdbc:jtds:sqlserver://test.com/abc_1_20121225;instance=abcd";
 Connection conn = DriverManager.getConnection(url,"uname","pwd");
 Statement stmt = conn.createStatement();
 ResultSet rs;

  rs = stmt.executeQuery("SELECT table_name, column_name, data_type, data_length FROM USER_TAB_COLUMNS WHERE table_name = 'MyTable'");
    while ( rs.next() ) {
         String colName = rs.getString("column_name");
                     System.out.println(colName);
      }
  conn.close();
 } catch (Exception e) {
   System.err.println("Got an exception! ");
 System.err.println(e.getMessage()); 
```

我在我的类路径中添加了 jtds.jar。我收到这条消息

```
Got an exception! 
com.mysql.jdbc.driver 
```

有人可以告诉我问题的确切原因吗？

编辑：

添加 stactrace；

```
java.lang.ClassNotFoundException: com.mysql.jdbc.driver
at java.net.URLClassLoader$1.run(Unknown Source)
at java.net.URLClassLoader$1.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
at java.lang.Class.forName0(Native Method)
at java.lang.Class.forName(Unknown Source)
at schwab.TestDB.main(TestDB.java:15) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T09:41:07.330

`Class.forName( "com.mysql.jdbc.driver" );`

--> 如果您使用的是 mysql 驱动程序，则它是驱动程序类而不是驱动程序。

`String url = "jdbc:jtds:sqlserver://test.com/abc_1_20121225;instance=abcd";`

---> 您的 url 将指向 SQL Server 数据库。

确保您使用的是哪个数据库。如果您使用的是 MySQL，请使用 MySQL 连接器 jar 和驱动程序类`com.mysql.jdbc.Driver`。

如果您使用的是 MS Sql 服务器，请使用 Driver Class : `net.sourceforge.jtds.jdbc.Driver`for `jTDS Driver`OR `com.microsoft.sqlserver.jdbc.SQLServerDriver`for Microsoft SQL Server 2005 JDBC Driver

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T09:41:26.897

您正在加载错误的驱动程序。

替换这个：

```
Class.forName("com.mysql.jdbc.driver"); 
```

和

```
Class.forName("net.sourceforge.jtds.jdbc.Driver"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T09:39:42.417

我的猜测是您的类路径中没有 MySQL 驱动程序。但是，如果您提供完整的堆栈跟踪，您应该能够确认这一点。

但是，看起来您使用的是 SQLServer 数据库，所以我不确定您为什么要引用 MYSQL 驱动程序？

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-07T09:48:26.370

下载**sqljdbc4-2.0.jar**并附在您的项目中。它会解决你的问题。

# ruby-on-rails - 从网站中提取数据

> ID：14193228
> 
> 赞同：-2
> 
> 时间：2013-01-07T09:36:52.583
> 
> 标签：ruby-on-rails, ruby, ajax, nokogiri, mechanize-ruby

我想从[网站](http://www.99acres.com/do/quicksearch/)上提取属性数据，

我使用 mechanize 从几个网站获取数据，我在这个网站上尝试过 mechanize，我得到了第一页结果的所有重复结果。

但是在这个[网站上](http://www.99acres.com/do/quicksearch/)，所有的结果调用都是基于ajax调用的，

我如何从这种类型的网站中获取数据，他们使用 ajax，并且在某些 ajax 中调用自身加密。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T20:34:45.470

在第一次加载页面期间，您无法使用 Mechanize 获得 Ajax 请求的结果，也无法获得正常的 HTTP 请求。您必须根据该页面中的参数向其 Ajax 主机发出后续请求，并使用适当的值，与浏览器在加载页面后使用的值相同。

这需要使用类似[Watir](http://watir.com/)的东西，这样您就可以编写脚本然后检索 Ajax 请求接收到的数据，或者通过分析嵌入式 JavaScript 来找出 Ajax 请求使用的参数并使用另一个 Mechanize 或 HTTP 欺骗他们的系统要求。

# c# - 锁定字段或局部变量？

> ID：14193231
> 
> 赞同：9
> 
> 时间：2013-01-07T09:37:04.607
> 
> 标签：c#, .net, multithreading, .net-4.0, locking

*在我阅读[了这个](https://stackoverflow.com/questions/8267323/why-cant-we-lock-on-a-value-type)问题并得到了Marc[的回答之后......](https://stackoverflow.com/questions/13681356/threading-in-c-sharp-value-types-and-reference-types-clarification)*

我有时会看到人们锁定一个*局部*变量。

这段代码坏了吗？

```
public void Do()
{
 object  o  = new Object();
 lock (o)
     {
      ...
     }
} 
```

我相信`object o = new Object();`应该在方法*之外*作为一个`Field`.

由于每个线程都在获取 的新实例`o`，因此会有多个锁。

我在这里想念什么？在这种特定情况下，它不应该锁定字段吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-07T09:48:09.143

> 我相信`object o = new Object();`应该在方法之外作为一个`Field`.
> 
> 由于每个线程都在获取 的新实例`o`，因此会有多个锁。
> 
> 我在这里想念什么？在这种特定情况下，它不应该锁定字段吗？

你的理解是正确的。代码被破坏了。在这个实现中，即使锁处于活动状态，它也不会提供同步，因为它将在不同的对象上。

来自[Microsoft 文档](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/lock-statement)

> 当您同步对共享资源的线程访问时，锁定专用对象实例（例如，私有只读对象 balanceLock = new object();）或另一个不太可能被无关代码部分用作锁定对象的实例. 避免对不同的共享资源使用相同的锁对象实例，因为这可能导致死锁或锁争用。特别是，避免将以下内容用作锁定对象：
> 
> 这个，因为它可能被调用者用作锁。类型实例，因为这些实例可能通过 typeof 运算符或反射获得。字符串实例，包括字符串文字，因为它们可能被实习。保持锁的时间尽可能短，以减少锁争用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-07T09:45:02.080

是的。它被打破。

您希望将静态只读对象作为私有字段来锁定。正如您所怀疑的那样，您的示例代码每次调用 Do 时都会创建一个新对象，因此锁将没有任何东西可以保留并且根本不起作用。

```
private static object syncRoot = new object();

lock (syncRoot) { } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-07T09:40:50.270

每次调用您的方法时，您都在创建 o 对象。所以，锁不起作用。我的意思是其他线程不会等待锁没有发出信号并控制该锁控制的资源。通常锁对象是类中的私有变量，因此所有方法都查看同一个对象。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-07T09:40:54.757

我个人认为没有任何理由使用它，因为只是将 ,*实例*中`lock`的特殊字段设置为信号状态。因此其他线程可以检查该实例的状态，并基于该状态执行语句中的代码或等待它的释放。*`o``lock`*

 *每次拥有局部变量都会分配一个新实例，因此对于每个线程都可以。

看不出这有什么意义。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-08-26T09:00:30.733

锁定局部变量，锁定将起作用。锁定全局变量可以生效以同步多个线程。

```
using System;
        using System.Collections.Generic;
        using System.Linq;
        using System.Text;
        using System.Threading.Tasks;
        using System.Threading;

        namespace testLock
        {
            class Program
            {
                public static void Main()
                {
                    // Start a thread that calls a parameterized static method.
                    for(int i = 0; i< 10;i++)
                    {
                        Thread newThread = new Thread(DoWork);
                        newThread.Start(i);
                    }

                    Console.ReadLine();
                }

                static object gObject= new object();
                public static void DoWork(object data)
                {
                    int len = (int)data % 3;
                    object tmp = new object();
                    Console.WriteLine("to lock...... Data='{0}'  sleepTime:{1}", data, len);
                    lock (tmp)//tmp won't work, change tmp to gObject to see different output, which is good locking case)
                    {
                        Console.WriteLine("in lock...... Data='{0}'  sleepTime:{1}", data, len);

                        Thread.Sleep(  len* 1000);
                        Console.WriteLine("Static thread procedure. Data='{0}'  sleepTime:{1}", data, len);
                    }
                }

            }
        }

    **Lock temp variable,will output:**
    to lock...... Data='1'  sleepTime:1
    in lock...... Data='1'  sleepTime:1
    to lock...... Data='2'  sleepTime:2
    in lock...... Data='2'  sleepTime:2
    to lock...... Data='0'  sleepTime:0
    in lock...... Data='0'  sleepTime:0
    Static thread procedure. Data='0'  sleepTime:0
    to lock...... Data='3'  sleepTime:0
    in lock...... Data='3'  sleepTime:0
    Static thread procedure. Data='3'  sleepTime:0
    to lock...... Data='4'  sleepTime:1
    in lock...... Data='4'  sleepTime:1
    to lock...... Data='5'  sleepTime:2
    in lock...... Data='5'  sleepTime:2
    to lock...... Data='6'  sleepTime:0
    in lock...... Data='6'  sleepTime:0
    Static thread procedure. Data='6'  sleepTime:0
    to lock...... Data='7'  sleepTime:1
    in lock...... Data='7'  sleepTime:1
    to lock...... Data='8'  sleepTime:2
    in lock...... Data='8'  sleepTime:2
    to lock...... Data='9'  sleepTime:0
    in lock...... Data='9'  sleepTime:0
    Static thread procedure. Data='9'  sleepTime:0
    Static thread procedure. Data='1'  sleepTime:1
    Static thread procedure. Data='4'  sleepTime:1
    Static thread procedure. Data='7'  sleepTime:1
    Static thread procedure. Data='2'  sleepTime:2
    Static thread procedure. Data='5'  sleepTime:2
    Static thread procedure. Data='8'  sleepTime:2

    **Then lock gObject, will print:**
    to lock...... Data='0'  sleepTime:0
    in lock...... Data='0'  sleepTime:0
    to lock...... Data='1'  sleepTime:1
    to lock...... Data='2'  sleepTime:2
    Static thread procedure. Data='0'  sleepTime:0
    in lock...... Data='1'  sleepTime:1
    to lock...... Data='3'  sleepTime:0
    to lock...... Data='4'  sleepTime:1
    to lock...... Data='5'  sleepTime:2
    to lock...... Data='6'  sleepTime:0
    to lock...... Data='7'  sleepTime:1
    to lock...... Data='8'  sleepTime:2
    to lock...... Data='9'  sleepTime:0
    Static thread procedure. Data='1'  sleepTime:1
    in lock...... Data='5'  sleepTime:2
    Static thread procedure. Data='5'  sleepTime:2
    in lock...... Data='9'  sleepTime:0
    Static thread procedure. Data='9'  sleepTime:0
    in lock...... Data='2'  sleepTime:2
    Static thread procedure. Data='2'  sleepTime:2
    in lock...... Data='8'  sleepTime:2
    Static thread procedure. Data='8'  sleepTime:2
    in lock...... Data='7'  sleepTime:1
    Static thread procedure. Data='7'  sleepTime:1
    in lock...... Data='4'  sleepTime:1
    Static thread procedure. Data='4'  sleepTime:1
    in lock...... Data='3'  sleepTime:0
    Static thread procedure. Data='3'  sleepTime:0
    in lock...... Data='6'  sleepTime:0
    Static thread procedure. Data='6'  sleepTime:0 
```*

# android - aChartEngine：如何在图表和 y 轴标签之间添加填充

> ID：14193232
> 
> 赞同：4
> 
> 时间：2013-01-07T09:37:07.500
> 
> 标签：android, achartengine

我`aChartEngine`用来显示一个简单的条形图。我想在图表本身和 y 轴标签之间添加填充。标签触及图表的边框，看起来不太好。我知道类的`setMargins`方法`XYMultipleSeriesRenderer`，但这只是控制整个图表的外边距。我该怎么做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-08T10:56:41.890

您可以更改 Y 轴标签的对齐方式，也可以更改字体大小和样式，但不能更改标签和图表本身之间的填充。

我刚刚添加了用于设置 X 轴和 Y 轴的填充的 API。

```
renderer.setXLabelsPadding(10);
renderer.setYLabelsPadding(10); 
```

您可以从 AChartEngine SVN 签出代码并使用`ant dist`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-04T07:39:03.043

添加以下行

```
 multiRenderer.setYLabelsAlign(Paint.Align.RIGHT);
    multiRenderer.setMargins(new int[]{0, 70, 0, 0});
    multiRenderer.setYLabelsPadding(15); 
```

# php - yii cgridview 属性“CActiveDataProvider.abc”未定义

> ID：14193234
> 
> 赞同：1
> 
> 时间：2013-01-07T09:37:16.777
> 
> 标签：php, yii, dataprovider, cgridview

在我的控制器中：

```
$model = new Sheets();
            $criteria = new CDbCriteria;
            $criteria->compare('id', $model->id);
            $criteria->compare('track_name', $model->track_name, true);
            $criteria->addCondition('user_id = '.Yii::app()->user->getId().' and '.$listSetups[$i]['condition']);

$setups = new CActiveDataProvider($model, array('criteria' => $criteria)); 
```

在我看来：

```
<?php $this->widget('zii.widgets.grid.CGridView', array(
            'id' => 'sheets-grid',
            'dataProvider' => $model,
        //'filter' => $model,
        'template'=>'{items}<div class="nav-controller">{pager}</div>',
            'enableSorting' => false,
            'columns' => array(

            array(
                  'header' => 'Track',
                  'name' => 'track_name',
                  'value' => $model->track_name,
                  'htmlOptions' => array(
                  'width' => '135px',
                 ),
            ), 
```

但我得到这个错误：

> 错误：未定义属性“CActiveDataProvider.track_name”。

任何人都可以告诉我这是为什么？我该如何解决它。我不想使用`$data->track_name`，因为我想在此代码中使用 $model->track_name 来自定义按钮“添加”：

```
array(
        'header' => '',
        'class' => 'CButtonColumn',
        'template' => '<div class="wrapper-tools">{share}{facebook}{twitter}{download}{add}{update}{delete2}</div>',
        'buttons'=>array (                                
                            'add' => array
                             (
                                 'label'=>'Add favorite',
                                 'imageUrl'=> (Users::model()->checkFavorite(Yii::app()->user->getId(), $model->track_name)) ? Yii::app()->themeManager->baseUrl."/default/images/favorite.png" : Yii::app()->themeManager->baseUrl."/default/images/favorite-disabled.png",
                                    'url'=>'Yii::app()->createUrl("/sheets/", array("id"=>$data->id))',
                                    'options' => array('id' => 'add-favorite', 'class' => 'admin-tools' ),
                                    //'visible' => 'Users::model()->checkFavorite(Yii::app()->user->getId(), $data->id) == false',
                                ),

                        ),
                        'htmlOptions' => array(
                            'class' => 'admin-tools-2',
                        ),
) 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T09:40:17.083

在您必须使用的 CGridView 中`$data->track_name`，以下行是错误的：

```
'value' => $model->track_name, 
```

您需要像这样设置值：

```
'value' => '$data->track_name', 
```

**更新**

正如您提到的，您想为每一行使用按钮中的数据，您仍然需要使用数据参数，因为 CGridView 小部件一次渲染一行，`$data`参数中包含给定行的数据，`$model->attribute`这里仍然没有上下文，因为它CGridView 中的每一行都会有所不同。

因为`imageUrl`没有评估参数，所以默认情况下您不能使用其中的`$data`参数，但是如果您创建一个自定义类来扩展 CButtonColumn 并覆盖此行为，则可以。

你可以创建一个类，比如说`MyCButtonColumn`，并将它保存在你的`components`文件夹中的一个名为的文件中`MyCButtonColumn.php`（这样它会在需要时自动加载）。

现在您需要`renderButton`在这个新类中创建一个方法来评估`imageUrl`它是否需要评估，然后返回标准`CButtonColumn::renderButton()`方法的结果以及新评估的结果，`imageUrl`如下所示：

```
class MyCButtonColumn extends CButtonColumn
{
    protected function renderButton($id,$button,$row,$data)
    {
        if(isset($button['imageUrl']) && is_string($button['imageUrl']) && strpos($button['imageUrl'],'$data')!==false)
            $button['imageUrl'] = $this->evaluateExpression($button['imageUrl'],array('row'=>$row,'data'=>$data));

        return parent::renderButton($id,$button,$row,$data);
    }
} 
```

最后，您需要将按钮列的类从 更改`CButtonColumn`为`MyCButtonColumn`。完成后，您将能够`$data`通过`imageUrl`变量解析变量，如下所示：

```
array(
    ...
    'class' => 'MyCButtonColumn',
    ...
    'buttons'=>array (
        'add' => array(
            ...
            'imageUrl'=> '(Users::model()->checkFavorite(Yii::app()->user->getId(),$data->track_name)) ? Yii::app()->themeManager->baseUrl."/default/images/favorite.png" : Yii::app()->themeManager->baseUrl."/default/images/favorite-disabled.png"',
            ...
        ),
        ...
    ),
    ...
), 
```

# python - 如何在数据存储中实现数据总和（在网页中表示）

> ID：14193237
> 
> 赞同：0
> 
> 时间：2013-01-07T09:37:22.973
> 
> 标签：python, google-app-engine, datastore

我将创建一个关于使用谷歌应用引擎管理和跟踪我的钱的网站。

但我遇到了一些问题。就像我如何通过在数据存储中使用查询来表示我的钱

这是我的代码，我不知道如何处理 sum_deal 的东西

感谢观看 :)

```
class BlogHandler(webapp2.RequestHandler):
    def write(self, *a, **kw):
        self.response.out.write(*a, **kw)

    def render_str(self, template, **params):
        params['user'] = self.user
        return render_str(template, **params)

    def render(self, template, **kw):
        self.write(self.render_str(template, **kw))

class Book(db.Model):
    deal = db.FloatProperty(required= True)
    created = db.DateTimeProperty(auto_now_add=True)
    sum_deal = db.FloatProperty

class BookMe(BlogHandler):
    def render_book(self, deal="",sum_deal=""):
        deals = db.GqlQuery("SELECT * FROM Book ORDER BY created DESC")
        self.render("book.html", deal=deal, sum_deal=sum_deal,deals = deals)

    def get(self):
        render_book()

    def post(self):
        deal = self.request.get("deal")
        if deal:
            b = Book(deal = deal)
            b.put()
            self.redirect("/") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T10:28:24.523

首先，不要使用浮点数来表示货币金额 - 由于浮点数表示，您会遇到各种错误。使用小数。

其次，这个问题应该不是特别难。数据存储区不支持聚合，但您可以在视图中轻松做到这一点：只需遍历其中的所有元素 `deals`并将`deal`每个元素的内容相加即可。

# postgresql - 无法在 postgresql 中运行函数

> ID：14193241
> 
> 赞同：0
> 
> 时间：2013-01-07T09:37:40.053
> 
> 标签：postgresql

我是新手，`postgresql`起初我想在`postgresql`. 我复制并粘贴了一个示例，`pgsql`但发生了错误。这是我的代码：

```
CREATE FUNCTION somefunc() RETURNS integer AS $$
<< outerblock >>
DECLARE
    quantity integer := 30;
BEGIN
    RAISE NOTICE 'Quantity here is %', quantity;  -- Prints 30
    quantity := 50;
    --
    -- Create a subblock
    --
    DECLARE
        quantity integer := 80;
    BEGIN
        RAISE NOTICE 'Quantity here is %', quantity;  -- Prints 80
        RAISE NOTICE 'Outer quantity here is %', outerblock.quantity;  -- Prints 50
    END;

    RAISE NOTICE 'Quantity here is %', quantity;  -- Prints 50

    RETURN quantity;
END;
$$ LANGUAGE plpgsql; 
```

和我的错误：

```
An error has occured
Fehler:Syntaxfehler bei "CREATE"
Line2:$Body$CREATE FUNCTION somefunc () RETURNS integer AS $$ 
```

**编辑：** 我已经在代码部分编写了上面的代码，但是 psql 在 SQL 部分中已经生成了相同的代码，并带有附加行：

```
$BODY$CREATE FUNCTION somefunc() RETURNS integer AS $$ 
```

如果我删除此行，则此行 ![在此处输入图像描述](../Images/f8bc7c87647c68bfd5105baad5a4a5ff.png) 中发生错误，此错误发生在下一行： ![在此处输入图像描述](../Images/a4473dfd2401ea7c80a25576a08e2325.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T16:15:33.583

我的猜测是您正在使用 GUI 来生成函数。如果是这种情况，那么 GUI 可能具有您填写（或忽略）的函数名称和参数等字段。因此，您现在输入代码的位置将是函数的主体区域，GUI 已经提示您输入所有样板信息。如果所有这些都是这种情况，那么您应该只在该字段中包含函数主体代码，而不是完整的函数创建代码（因为应用程序将根据您输入到 GUI 的内容为您生成该代码）。

或者，如果应用程序允许您执行任意 SQL（确实如此），您可以将 CREATE 作为任意 SQL 执行，而不是使用 GUI。

# c# - 在linq to sql中动态设置tableAttribute映射

> ID：14193243
> 
> 赞同：1
> 
> 时间：2013-01-07T09:37:45.723
> 
> 标签：c#, sql, linq, mapping

我想知道是否可以为 linq 类动态设置表映射：

```
 [global::System.Data.Linq.Mapping.TableAttribute(Name="dbo.[Comfort 0601$Contact]")]
    public partial class Contact : INotifyPropertyChanging, INotifyPropertyChanged
    {
     ... 
```

我想动态或以编程方式更改它的原因是因为我使用的数据库是由 Navision 创建的。那里的表格有这些表格所属的公司名称的前缀。因此，我希望能够更改该前缀。

```
 [global::System.Data.Linq.Mapping.TableAttribute(Name = "dbo.["+SPResources.Database.Company+"$Contact]")] 
```

惠特公司为：

```
 public const string Company = "Comfort 0601"; 
```

我已经尝试过了，但只有当我将 Company 声明为常量时它才有效。

公司之间的表结构是相同的。只是名称和内容更改。

我希望有人可以对此提出一些建议。我也不确定这是否可能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-30T14:25:39.593

认为添加表前缀的正确解决方案是使用 SQL Server 2005（或更高版本），然后为每个所需的前缀创建一个 db-user，并将每个 db-user 的默认架构从“dbo”更改为唯一的。

另一种解决方案是扩展现有的 DataContext ，使其能够在运行时“更正” MappingSource：

```
[Table]  // Look no name
public class DbRecord
{
    [Column(IsPrimaryKey=true)]
    public long Id { get; set; }
}

CustomDataContext.UpdateCustomTable(typeof(DbRecord), "DbTable");

using (CustomDataContext dc = new CustomDataContext(dbConnection))
{
    Table<DbRecord> dbTable = dc.GetTable<DbRecord>();
    var query = from item in dbTable;
} 
```

这是自定义的 DataContext （我想可以很容易地更改它以向现有表名添加前缀）（如果在多线程环境中，请用 ConcurrentDictionary 替换 Dictionary）：

```
public class CustomDataContext : DataContext
{
    static CustomMappingSource _sharedMappingSource = new CustomMappingSource();

    public static void UpdateCustomTable(Type rowType, string tableName)
    {
        _sharedMappingSource.UpdateCustomTable(rowType, tableName);
    }

    public CustomDataContext(System.Data.IDbConnection connection) : base(connection, _sharedMappingSource) { }
    public CustomDataContext(string fileOrServerOrConnection) : base(fileOrServerOrConnection, _sharedMappingSource) { }
}

internal class CustomMappingSource : MappingSource
{
    AttributeMappingSource mapping = new AttributeMappingSource();

    Dictionary<Type, string> _customTableNames = new Dictionary<Type, string>();

    public void UpdateCustomTable(Type rowType, string tableName)
    {
        if (string.IsNullOrEmpty(tableName))
            throw new ArgumentNullException("TableName");

        _customTableNames[rowType] = tableName;
    }

    protected override MetaModel CreateModel(Type dataContextType)
    {
        MetaModel oldmodel = mapping.GetModel(dataContextType);
        CustomMetaModel newmodel = new CustomMetaModel(oldmodel, _customTableNames);
        return newmodel;
    }
}

internal class CustomMetaModel : MetaModel
{
    MetaModel _orgmodel;

    Dictionary<Type, MetaTable> _customtables = new Dictionary<Type, MetaTable>();
    Dictionary<Type, string> _tableNames = new Dictionary<Type, string>();

    public CustomMetaModel(MetaModel orgmodel, Dictionary<Type, string> tableNames)
    {
        _orgmodel = orgmodel;
        _tableNames = tableNames;
    }

    public override MetaType GetMetaType(Type type)
    {
        MetaTable metaTable;
        if (_customtables.TryGetValue(type, out metaTable))
            return metaTable.RowType;
        else
            return _orgmodel.GetMetaType(type);
    }
    public override MetaTable GetTable(Type rowType)
    {
        MetaTable customMetaTable;
        if (_customtables.TryGetValue(rowType, out customMetaTable))
            return customMetaTable;

        if (_tableNames.ContainsKey(rowType))
        {
            MetaTable orgtable = _orgmodel.GetTable(rowType);
            MetaType orgrowtype = orgtable.RowType;
            CustomMetaType newRowType = new CustomMetaType(orgrowtype, this);
            _customtables.Add(rowType, new CustomMetaTable(orgtable, this, newRowType, _tableNames[rowType]));
            newRowType.MetaTable = _customtables[rowType];
            return newRowType.MetaTable;
        }

        return _orgmodel.GetTable(rowType);
    }

    #region MetaModel Forwards
    public override Type ContextType { get { return _orgmodel.ContextType; } }
    public override string DatabaseName { get { return _orgmodel.DatabaseName; } }
    public override MappingSource MappingSource { get { return _orgmodel.MappingSource; } }
    public override Type ProviderType { get { return _orgmodel.ProviderType; } }
    public override MetaFunction GetFunction(System.Reflection.MethodInfo method) { return _orgmodel.GetFunction(method); }
    public override IEnumerable<MetaFunction> GetFunctions() { return _orgmodel.GetFunctions(); }
    public override IEnumerable<MetaTable> GetTables() { return _orgmodel.GetTables(); }
    #endregion
}

internal class CustomMetaTable : MetaTable
{
    MetaTable _orgtable;
    MetaModel _metamodel;
    MetaType _rowtype;
    string _tableName;

    public CustomMetaTable(MetaTable orgtable, MetaModel metamodel, MetaType rowtype, string tableName)
    {
        _orgtable = orgtable;
        _metamodel = metamodel;
        _rowtype = rowtype;
        _tableName = tableName;
    }

    public override MetaModel Model { get { return _metamodel; } }
    public override MetaType RowType { get { return _rowtype; } }
    public override string TableName { get { return _tableName; } }

    #region MetaTable Forwards
    public override System.Reflection.MethodInfo DeleteMethod { get { return _orgtable.DeleteMethod; } }
    public override System.Reflection.MethodInfo InsertMethod { get { return _orgtable.InsertMethod; } }
    public override System.Reflection.MethodInfo UpdateMethod { get { return _orgtable.UpdateMethod; } }
    #endregion
}

internal class CustomMetaType : MetaType
{
    MetaType _orgtype;
    MetaModel _metamodel;

    public MetaTable MetaTable { get; set; }

    public CustomMetaType(MetaType orgtype, MetaModel metamodel)
    {
        _orgtype = orgtype;
        _metamodel = metamodel;
    }

    public override MetaTable Table { get { return MetaTable; } }
    public override MetaModel Model { get { return _metamodel; } }

    #region MetaType Forwards
    public override System.Collections.ObjectModel.ReadOnlyCollection<MetaAssociation> Associations { get { return _orgtype.Associations; } }
    public override bool CanInstantiate { get { return _orgtype.CanInstantiate; } }
    public override System.Collections.ObjectModel.ReadOnlyCollection<MetaDataMember> DataMembers { get { return _orgtype.DataMembers; } }
    public override MetaDataMember DBGeneratedIdentityMember { get { return _orgtype.DBGeneratedIdentityMember; } }
    public override System.Collections.ObjectModel.ReadOnlyCollection<MetaType> DerivedTypes { get { return _orgtype.DerivedTypes; } }
    public override MetaDataMember Discriminator { get { return _orgtype.Discriminator; } }
    public override bool HasAnyLoadMethod { get { return _orgtype.HasAnyLoadMethod; } }
    public override bool HasAnyValidateMethod { get { return _orgtype.HasAnyValidateMethod; } }
    public override bool HasInheritance { get { return _orgtype.HasInheritance; } }
    public override bool HasInheritanceCode { get { return _orgtype.HasInheritanceCode; } }
    public override bool HasUpdateCheck { get { return _orgtype.HasUpdateCheck; } }
    public override System.Collections.ObjectModel.ReadOnlyCollection<MetaDataMember> IdentityMembers { get { return _orgtype.IdentityMembers; } }
    public override MetaType InheritanceBase { get { return _orgtype.InheritanceBase; } }
    public override object InheritanceCode { get { return _orgtype.InheritanceCode; } }
    public override MetaType InheritanceDefault { get { return _orgtype.InheritanceDefault; } }
    public override MetaType InheritanceRoot { get { return _orgtype.InheritanceRoot; } }
    public override System.Collections.ObjectModel.ReadOnlyCollection<MetaType> InheritanceTypes { get { return _orgtype.InheritanceTypes; } }
    public override bool IsEntity { get { return _orgtype.IsEntity; } }
    public override bool IsInheritanceDefault { get { return _orgtype.IsInheritanceDefault; } }
    public override string Name { get { return _orgtype.Name; } }
    public override System.Reflection.MethodInfo OnLoadedMethod { get { return _orgtype.OnLoadedMethod; } }
    public override System.Reflection.MethodInfo OnValidateMethod { get { return _orgtype.OnValidateMethod; } }
    public override System.Collections.ObjectModel.ReadOnlyCollection<MetaDataMember> PersistentDataMembers { get { return _orgtype.PersistentDataMembers; } }
    public override Type Type { get { return _orgtype.Type; } }
    public override MetaDataMember VersionMember { get { return _orgtype.VersionMember; } }
    public override MetaDataMember GetDataMember(System.Reflection.MemberInfo member) { return _orgtype.GetDataMember(member); }
    public override MetaType GetInheritanceType(Type type) { return _orgtype.GetInheritanceType(type); }
    public override MetaType GetTypeForInheritanceCode(object code) { return _orgtype.GetTypeForInheritanceCode(code); }
    #endregion
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T11:02:10.207

Brian 和 Gert 的答案是这个问题的可能解决方案。但是在运行时更改映射是不可能的（正如布赖恩提到的）。

随着我们项目的进展，我们决定如果我们需要另一个公司名称（这意味着该构建是针对不同的客户），我们将重新构建该项目。该决定使以下解决方案成为可能：

我们注释掉了 Visual Studio 生成的原始映射：

```
//[global::System.Data.Linq.Mapping.TableAttribute(Name="dbo.[Comfort 0601$Contact]")]
    public partial class Contact : INotifyPropertyChanging, INotifyPropertyChanged
    {
    ... 
```

因为我们对每个 Linq 类都有自己的部分类，所以我们在自己的类的顶部添加了修改后的映射：

```
[global::System.Data.Linq.Mapping.TableAttribute(Name = "dbo.["+SPResources.Database.Company+"$Contact]")]
public partial class Contact
{ 
```

我们公司将在哪里：

```
public const string Company = "Comfort 0601"; 
```

如果其他公司需要重建，我们只需更改 Company 变量。

**注意**：这仅在您不更改 VS 中的 *.dbml 文件时才能正常工作。如果这样做，VS 将自动撤消您的更改。

**编辑**：随着时间的流逝，我开始更多地研究实体框架，我找到了一个更具体和更适合这个问题的解决方案：http: [//www.codeproject.com/Articles/421643/How-to-Use-MVC- Net-on-the-Dynamics-NAV-Database-St](http://www.codeproject.com/Articles/421643/How-to-Use-MVC-Net-on-the-Dynamics-NAV-Database-St)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T19:37:11.830

如果您首先使用代码，则可以使用[流利的映射](http://msdn.microsoft.com/en-us/subscriptions/hh272551.aspx)，您可以使用该`ToTable()`方法在运行时配置数据库表（请参阅*更改数据库表名称*下）。例如，在`OnModelCreating()`您的 DbContext 派生的覆盖中：

```
string company = "Comfort 0601";
modelBuilder.Entity<Contact>().ToTable(company + "Contact");
modelBuilder.Entity<....
modelBuilder.Entity<.... 
```

您可以从配置文件中获取公司名称。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T13:21:52.080

您可以使用[SQLMetal](http://msdn.microsoft.com/en-us/library/bb386987.aspx)为每个实体自定义生成代码。您不能在运行时动态应用属性，因此这将是最佳选择。

# asp.net - ClientScript.RegisterStartupScript(typeof(Page), Script, Script) 和 Page.RegisterStartupScript(Script, Script) 的区别；

> ID：14193246
> 
> 赞同：1
> 
> 时间：2013-01-07T09:38:01.280
> 
> 标签：asp.net, c#-4.0

和有什么区别

> ClientScript.RegisterStartupScript(typeof(Page), Script, Script)

和

> Page.RegisterStartupScript（脚本，脚本）；

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T09:49:44.180

`Page.RegisterStartupScript`现在**[已过时](http://msdn.microsoft.com/en-us/library/system.web.ui.page.registerstartupscript.aspx)**，*不应使用*..！

改用**[ClientScriptManager.RegisterStartupScript](http://msdn.microsoft.com/en-us/library/system.web.ui.clientscriptmanager.registerstartupscript.aspx)** ...

它提供与前者相同的能力......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T10:54:43.170

如果你使用反射器，你可以看到

```
Page.RegisterStartupScript(Script, Script); 
```

正在使用以下参数调用 ClientScript.RegisterStartupScript：

```
EditorBrowsable(EditorBrowsableState.Advanced), Obsolete("The recommended alternative is   ClientScript.RegisterStartupScript(Type type, string key, string script). http://go.microsoft.com/fwlink/?linkid=14202")]
public virtual void RegisterStartupScript(string key, string script)
{
     this.ClientScript.RegisterStartupScript(typeof(Page), key, script, false);
} 
```

# c# - 为 Web 套接字序列化泛型

> ID：14193247
> 
> 赞同：1
> 
> 时间：2013-01-07T09:38:10.097
> 
> 标签：c#, serialization, web, websocket

我正在使用 Super Web Socket 有一段时间了，它很棒，一切正常，我可以发送命令并且没有问题。现在我正在尝试在一个命令中发送大量命令，我看到如果我发送很多小命令websocketStart 工作速度很慢，所以我提出了新命令来收集几个命令并一次性发送它们。我正在处理序列化问题，如果你能帮助我，我会很高兴。我的命令会将 BulkCMD_Structure 发送给客户端。我仅获取数组中的 CommandID :(

```
 #region BulkCommand
[Serializable]
public class BulkCMD_Structure
{
    public Int64 UserID { get; set; }
    public int DataArrayLength { get; set; }
    public List<BulkCMD_Data> DataArray;
}

[Serializable]
public class BulkCMD_Data
{
    public eWebSocketCMD CommandID { get; set; }
}
[Serializable]
public class BulkWindowCMD_Data : BulkCMD_Data
{
    public int X { get; set; }
    public int Y { get; set; }
    public int Width { get; set; }
    public int Height { get; set; }
    public byte[] Image { get; set; }
}

[Serializable]
public class BulkMouseStatusCMD_Data : BulkCMD_Data
{
    public int mousePositionX { get; set; }
    public int mousePositionY { get; set; }
}
#endregion 
```

我也尝试了以下方法，但得到序列化错误：

```
#region BulkCommand
[Serializable]
public class BulkCMD_Structure
{
    public Int64 UserID { get; set; }
    public int DataArrayLength { get; set; }
    public iBulkCMD_Data [] DataArray;
}
[Serializable]
public class iBulkCMD_Data
{
    eWebSocketCMD CommandID { get; set; }
}
[Serializable]
public class BulkWindowCMD_Data : iBulkCMD_Data
{
    public eWebSocketCMD CommandID { get; set; }
    public int X { get; set; }
    public int Y { get; set; }
    public int Width { get; set; }
    public int Height { get; set; }
    public byte[] Image { get; set; }
}

[Serializable]
public class BulkMouseStatusCMD_Data : iBulkCMD_Data
{
    public eWebSocketCMD CommandID { get; set; }
    public int mousePositionX { get; set; }
    public int mousePositionY { get; set; }
}
#endregion 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T09:54:49.933

简单地改变了：

iBulkCMD_Data [] DataArray 或

列出数据数组

对象 [] DataArray

# javafx-2 - 将鼠标和滚动事件从父级传递回子级（在 JavaFX 中）

> ID：14193249
> 
> 赞同：0
> 
> 时间：2013-01-07T09:38:26.417
> 
> 标签：javafx-2

我里面有一个`StackPane`和一个`Group`。Group 具有实际的视觉内容，用户可以平移和缩放。该组具有坐标变换。

我希望鼠标和滚动事件的行为相同，即使它们发生在组之外（因为它已被缩小或因为组图形中的孔）。

我不能直接从 StackPane 转发（鼠标）事件，因为坐标系不同。

我尝试在组后面放置一个大透明的矩形，但这会导致图形系统纹理大小溢出（= 不好）。

现在我正在考虑在 StackPane 和 Group 中都有处理程序，然后传递给 Group 内的坐标校正的单独方法。有效，但是是否存在我没​​有意识到的更简洁的机制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T13:30:31.943

我解决这个问题的方法：

在`Group`构造函数中，我为其父级设置了处理程序：

```
runLater {   
  val pv= parent.value
  assert( pv != null )

  ..some local var's here..

  pv.onMousePressed = (ev: MouseEvent) => if (ev.primaryButtonDown) {
  ... 
```

`runLater`注意 Group 不需要附加到其父级（或将潜在父级的句柄作为构造函数参数）。一旦 runLater-block 被执行，父母身份就建立了。

我发现这是一种相当巧妙的方法。它允许所有事件处理都在组内，但仍需要使用父级的较大空间。没有代码需要在两个地方。坐标变换总是相同的，因为调用的是父事件（而不是组的）。

我正在使用 Scala，但同样的方法应该适用于任何 JVM 语言。

注意：以 an 开头的处理程序`if`不会在当前的 ScalaFX 中编译。这是 ScalaFX 的一个小故障，可以轻松修复（请向我询问详细信息）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-21T17:05:51.150

只是我的两分钱：我在 JavaFx 8 中遇到了同样的问题，我通过用窗格替换我的组来解决它。没有做任何改变，它就像一个魅力。知道可能有用。

# java - 在基于表单的编辑器中实现撤消重做

> ID：14193251
> 
> 赞同：0
> 
> 时间：2013-01-07T09:38:32.627
> 
> 标签：java, xml, eclipse-plugin, undo-redo

我正在开发一个多页表单编辑器来在 Eclipse 中编辑/创建自定义的 XML 文件。结构看起来像：

*   实现类是`MyXMLFormEditor`扩展 FormEditor。
*   FormEditor 的每个页面都扩展了 FormPage（即 MyXMLFormPage 扩展了 FormPage）。
*   在 FormEditor 和实际的 XML 文件之间，我正在维护 JDOM 模型。
*   我还实现了脏标志处理。因此，用户在表单编辑器中的输入会保存到 JDOM 中，直到用户按下保存按钮。当用户按下保存按钮时，JDOM 被写入/序列化为 XML 文件。

在具有上述功能的编辑器中，我想实现如下撤消/重做功能：

当编辑器变脏时（用户将某些内容更改为表单编辑器但未保存）撤消操作应将表单编辑器以及 JDOM 中的更改恢复到其原始状态（即编辑器未变脏时的状态），重做操作应再次将更改带回 FormEditor 以及 JDOM 和编辑器应该变脏。

以下是我的代码片段

**MyXMLFormEditor.java**

```
public class MyXMLFormEditor extends FormEditor {

    MyXMLFormEditor(){
                                super();                                
                                }

                @Override
                protected FormToolkit createToolkit(Display display) {
                                // Create a toolkit that shares colors between editors.
                                return new FormToolkit(Activator.getDefault().getFormColors(display));
                }

                @Override
                public void init(IEditorSite site, IEditorInput editorInput) {
                                setSite(site);
                                mSite = site;
                                setInput(editorInput);
                                try {
                                                super.init(site, editorInput);
                                } catch (PartInitException e1) {
                                                e1.printStackTrace();
                                }
                                if (!(editorInput instanceof IFileEditorInput))
                                                try {
                                                                throw new PartInitException("Invalid Input: Must be IFileEditorInput");
                                                                } catch (PartInitException e) {
                                                                                e.printStackTrace();
                                                                }
                                setPartName(fileName);
                }
                public void setUpProgFile(IEditorSite site, IEditorInput editorInput){                       
                                IFileEditorInput fileInput = ((IFileEditorInput) editorInput);

                                //create document builder and prepare JDom model for xml file.
                }

                @Override
                protected void addPages() {
                                try {
                                                //add 'Main' page
                                                objMyXMLFormPage = new MyXMLFormPage (this, "FirstPage","Main");
                                                //set rootNode of MyXMLFormPage 
                                                objMyXMLFormPage.rootNode = getRootNode();
                                                objMyXMLFormPage.filePath = filePath;
                                                objMyXMLFormPage.document = document;
                                                addPage(objMyXMLFormPage);

                                } catch (PartInitException e) {
                                                e.printStackTrace();
                                }
                }

                @Override
                public void doSave(IProgressMonitor monitor) {
                                System.out.println("MyXMLFormEditor: doSave");

                                //logic to write jdom contents into xml file.
                                objMyXMLFormPage.setDirty(false);
                }

                @Override
                public void doSaveAs() {
                                System.out.println("MyXMLFormEditor: doSaveAs");
                }
                @Override
                public boolean isSaveAsAllowed() {
                                System.out.println("MyXMLFormEditor: isSaveAsAllowed");
                                return true;
                }

} 
```

**MyXMLFormPage .java**

```
public class MyXMLFormPage  extends FormPage{

                //private members declaration.

                public MyXMLFormPage (MyXMLFormEditor editor,String title, String id) {
                                // initialize the editor and set its title and name.
                                super(editor,title,id );
                                }

                @Override
                public void createFormContent(IManagedForm managedForm) {
                    // Set page title
                                super.createFormContent(managedForm);

                                FormToolkit mMyXMLFormPage Toolkit = managedForm.getToolkit();

                                //Logic to creat UI and populating its contents from JDom

                }

                private void makeEditorDirty() {
                                updateJdom =  true;       
                                setDirty(true);                                                   
                }

                private void updateJDom() {
                                if(updateJdom){
                                                System.out.println("*** Jdom updated ***");
                                                updateJdom = false;
                                }
                }

                @Override
                public boolean isDirty() {
                                return isDirtyFlag;
                }

                protected void setDirty(boolean value) {
                                isDirtyFlag = value;
                                dirtyStateChanged();
                }

                public void dirtyStateChanged() {
                                getEditor().editorDirtyStateChanged();

                }

                @Override
                public boolean isSaveAsAllowed() {
                                System.out.println("MyXMLFormPage .isSaveAsAllowed");
                      return false;
                   }

                @Override
                public void doSave(IProgressMonitor monitor) {
                                System.out.println("MyXMLFormPage .doSave");
                }

} 
```

谁能向我提供有关如何在 FormEditor 中实现撤消/重做功能的指针/示例？如果该方法利用 Eclipse PDE 或工作台的现有撤消/重做框架会很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T11:57:25.120

关于 Eclipse 中的多页面编辑器实现所使用的模式，有几点需要说明。可能还有其他方法可以做到，但 Eclipse 中的编辑器似乎坚持以下几点：

*   维护编辑器中页面共享的数据模型（您正在这样做）。
*   仅在页面即将显示时使用模型数据刷新页面。不要试图让未显示的页面与模型保持同步。
*   当您执行撤消或重做时，对模型进行适当的更改（根据@Scorpion 的评论），然后刷新当前页面。
*   每个页面都应该有一个 its-ok-to-leave-this-page 方法（我不记得名称），该方法被调用以确保显示的数据没有错误，足以允许更改页面（您不要'不希望出现非显示数据的错误）。
*   页面有一个 about-to-leave-this-page 方法，该方法被调用以在切换页面之前保存对模型的任何更改。大多数页面在这里不做任何事情，因为模型有时会被每次击键修改，但是源页面会使用这种方法将模型完全替换为文本编辑器内容的解析结果。

这意味着您的表单不必自己执行撤消/重做。相反，表示多页编辑器页面的类将在模型更改时与模型交互，然后将正确的数据传递给表单以显示。

表单将需要侦听撤消/重做键事件并通过命令模式将这些事件传递给模型。

# asp.net - 通过 WHERE 子句中的参数从数据集中获取数据

> ID：14193253
> 
> 赞同：0
> 
> 时间：2013-01-07T09:38:39.363
> 
> 标签：asp.net, dataset, datasource, asp.net-4.0

我正在关注一个教程，其中他们解释了如何向`Dataset`ASP.NET Web 应用程序添加参数以及如何向`SQL`查询添加参数。但这对我来说并不像他们在教程中那样工作。

我已经`Dataset`在我的`App_Code`文件夹中添加了一个。在数据集中，我与 SQL Server 中的数据库建立了连接。现在我可以通过给数据集一个`SQL query`. 在教程中，他们做了这样的事情：

```
SELECT TOP 20 [ProductID]
      ,[Name]
      ,[ProductNumber]
      ,[MakeFlag]
      ,[FinishedGoodsFlag]
      ,[Color]
      ,[SafetyStockLevel]
FROM [Production].[Product]
WHERE (Color = :Color) 
```

这个例子的重点是`:Color`零件。这就是他们让它知道在哪里添加参数的方式。但是当我在我的中使用这个查询时，`Dataset`它给了我一个警告：

> ':' 附近的 WHERE 子句出错。无法解析查询文本。

之后，他可以`Dataset`通过`Properties`窗口实际添加参数并测试预览他的数据。这对我不起作用，因为当我添加查询时它已经开始抱怨。

我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T09:43:29.523

Sql-Server 中的参数`@`前面有一个：

```
WHERE (Color = @Color) 
```

[配置参数和参数数据类型](http://msdn.microsoft.com/en-us/library/yy6y35y8.aspx)

# jquery - jQuery价格滑块插件问题

> ID：14193261
> 
> 赞同：1
> 
> 时间：2013-01-07T09:39:31.327
> 
> 标签：jquery, jquery-slider

|----|----|----|----|----|

6 12 19 30 50 60

我想将此比例值添加到[This jquery 滑块](http://egorkhmelev.github.com/jslider/)

我尝试了所有其他示例，但这个不使用“步骤：1”我无法理解这个 jqueries 概念请帮助我摆脱这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T09:42:04.810

像这样：

```
{
from: 0,
to: 60,
step: 6,
dimension: '',
scale: ['6', '12', '19', '30', '50', '60'],
limits: false
} 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T09:53:53.080

尝试这个

**HTML**

```
<input id="Slider5" type="slider" name="area" value="0;30" /> 
```

**查询**

```
 jQuery("#Slider5").slider({ 

  from: 0,
  to: 60,
  dimension: '',
  scale: ['6', '12', '19', '30', '50', '60'],
  limits: false

}) 
```

在这里[摆弄](http://jsfiddle.net/pYUJS/)

# javascript - 修改地址栏时可以得到事件吗？

> ID：14193265
> 
> 赞同：8
> 
> 时间：2013-01-07T09:39:46.003
> 
> 标签：javascript, html, events, browser

`event`用户修改地址栏文本时是否会生成任何内容？就像，当用户尝试通过地址栏执行 javascript 时。

我检查了所有`window`事件，它们都与地址栏无关。

**更新**

根据评论，我已经尝试过`window.onhashchange`，但它仅在哈希更改时触发，而不是实际 URL。

我需要这个来找到一种方法来阻止用户从地址栏中执行 javascript 的原因。因此，计时器解决方案也不起作用。

有什么办法可以捕获`onbeforeunload`并将位置设置回之前的位置吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T09:43:52.570

没有这样的事件（我的意思是本地的）

这是一个关于如何根据窗口的位置更改（使用 setInterval）制作事件的主题：

[http://www.bennadel.com/blog/1520-Binding-Events-To-Non-DOM-Objects-With-jQuery.htm](http://www.bennadel.com/blog/1520-Binding-Events-To-Non-DOM-Objects-With-jQuery.htm)

如果您使用的是 ajax，您可能想检查一下：

[http://www.asual.com/jquery/address/](http://www.asual.com/jquery/address/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T09:59:43.380

没有这样的技巧，但也许`window.onbeforeunload`可以帮助你。有了这个，您至少可以知道用户何时离开您的页面。

在此处查看示例：[http ://www.4guysfromrolla.com/demos/OnBeforeUnloadDemo1.htm](http://www.4guysfromrolla.com/demos/OnBeforeUnloadDemo1.htm)

# iphone - 如何在 iPhone 中自动捕获图像？

> ID：14193279
> 
> 赞同：1
> 
> 时间：2013-01-07T09:40:22.227
> 
> 标签：iphone, ios, camera, uiimagepickercontroller

我是 iPhone 开发的新手，我使用 UIImagePickerController 手动捕获图像，但我想自动捕获图像，是否可以这样做。请帮我。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T10:13:54.250

尝试这个。在此我已将屏幕截图保存在相册中

```
-(void)screenShotCapture
{

    //-- Screen Capture --------------------------------------------------------------------//

    UIImage *image = nil;

    UIGraphicsBeginImageContext(loginBgImgVw.frame.size);

    NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
    [formatter setDateFormat:@"MM-dd-yyyy hh:mm:ss"];
    [formatter setTimeZone:[NSTimeZone localTimeZone]];

    NSString *dateToday = [formatter stringFromDate:[NSDate date]];

    UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(375, 0, 600, 44)];
    [label setText:dateToday];
    NSString *fileNameStr = [NSString stringWithFormat:@"%@_Login_%@",providerIdStr,dateToday];

    [label setText:fileNameStr];
    label.backgroundColor = [UIColor clearColor];
    [loginBgImgVw addSubview:label];
    [formatter release];

    loginBgImgVw.frame = CGRectMake(10, 0, 1006, 669);

    [loginBgImgVw.layer renderInContext: UIGraphicsGetCurrentContext()];     
    image = UIGraphicsGetImageFromCurrentImageContext();        
    UIGraphicsEndImageContext();        
    [label removeFromSuperview];

    //=--

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

    NSString *docspath = [paths objectAtIndex:0];
    NSLog(@"path=--%@",paths);

    NSString *dataPath = [docspath stringByAppendingPathComponent:[NSString stringWithFormat:@"ProviderID_%@",providerIdStr]];
    if (![[NSFileManager defaultManager] fileExistsAtPath:dataPath])
    {
        [[NSFileManager defaultManager] createDirectoryAtPath:dataPath withIntermediateDirectories:NO attributes:nil error:nil];
    }

    NSString *savedImagePath = [dataPath stringByAppendingPathComponent:@"Login_Provider.png"];
    NSData *imageData = UIImageJPEGRepresentation(image, 0.2);

    if ([screenCapturNameAry count] != 0)
    {
        if ([screenCapturNameAry containsObject:@"Login"])
        {
            [imageData writeToFile:savedImagePath atomically:NO];

        }

    }
    UIImageWriteToSavedPhotosAlbum([self loadImage:@"Login_Provider"],self,@selector(image:didFinishSavingWithError:contextInfo:),NULL);

    //--------------------------------------------------------------------------------------//

}
- (void)image:(UIImage*)image didFinishSavingWithError:(NSError*)error contextInfo:(void*)contextInfo
{
    if (error == nil)
    {
        NSLog(@"Login Image saved successfully.");
    }
    else
    {
        NSLog(@"Error occurred:%@",[error localizedDescription]);
    }
} 
```

您可以使用以下方法获取保存的图像

```
- (UIImage*)loadImage:(NSString*)imageName 
{

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *dataPath = [documentsDirectory stringByAppendingPathComponent:[NSString stringWithFormat:@"ProviderID_%@",providerIdStr]];

    NSString *fullPath = [dataPath stringByAppendingPathComponent:[NSString stringWithFormat:@"%@.png",imageName]];

    return [UIImage imageWithContentsOfFile:fullPath];

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T10:16:48.797

要截取屏幕截图，您可以使用以下代码。

```
UIGraphicsBeginImageContext(self.window.bounds.size);
[self.window.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();
NSData * data = UIImagePNGRepresentation(image);
[data writeToFile:@"screen.png" atomically:YES]; 
```

对于 Ratina 显示设备，您必须检查：

```
if ([[UIScreen mainScreen] respondsToSelector:@selector(scale)])
    UIGraphicsBeginImageContextWithOptions(self.window.bounds.size, NO, [UIScreen mainScreen].scale);
else
    UIGraphicsBeginImageContext(self.window.bounds.size); 
```

# android - 为不同的设备提供drawable

> ID：14193286
> 
> 赞同：-1
> 
> 时间：2013-01-07T09:40:56.837
> 
> 标签：android, android-layout

本质上，应用程序应该支持各种设备。我正在使用这些指南：[mult.screen.supp](http://developer.android.com/guide/practices/screens_support.html#testing)，[screen.stat](http://developer.android.com/about/dashboards/index.html#Screens)。

在大多数活动中，平板电脑和手机的设计都是相似的。我感到困惑的是如何为两个版本提供可绘制对象，因为它们的密度组提供不同的分辨率，因此可绘制对象不可替代。

例如，将 xlarge(tablet) - mdpi 与 normal(handset) - mdpi 进行比较：

1.  普通屏幕，中密度 (160)，mdpi：320x480
2.  超大屏幕，中密度 (160)，mdpi：1280x800

所以，如果我为第一组创建 foo.png(50px x 50px) 然后测试相同的布局

```
 <ImageView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/foo" /> 
```

在第二组中，它将在 mdpi 文件夹中查找相同的图像 - 图像看起来很小。

我有一个解决方案，但我不确定我是否做得对：

*   为每个屏幕尺寸配置创建 attr.xml。
*   在手机资源文件夹中创建`<item name="foo" type="drawable">@drawable/h_foo</item>`，该文件夹引用适合`normal(handset) - mdpi` 分辨率 h_foo 的图像，例如 50x50。
*   在 tablet-resources 文件夹中创建`<item name="foo" type="drawable">@drawable/t_foo</item>`，该文件夹引用适合`xlarge(tablet) - mdpi` 分辨率 t_foo 的图像，例如 150x150。

您能否说明这种方法是否可行以及其他解决方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T09:47:43.477

最好保留相同的资源名称并使用不同的文件夹来放置实际的 png：

```
drawable-mdpi        -> used for normal screens
drawable-large-mdpi  -> used for large screens 
```

请参阅[提供](http://developer.android.com/guide/topics/resources/providing-resources.html)可用配置限定符的资源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T10:08:57.010

为避免重复，我将所有图像保存在 drawable-nodpi 文件夹中，并为文件名加上大小后缀（例如 image-small.png、image-medium.png 等）。然后，我在每个项目的设备特定（drawable-normal-mdpi、drawable-large-mdpi）文件夹中都有 XML 定义。例如：

可绘制-正常-mdpi/image.xml：

```
<bitmap xmlns:android="http://schemas.android.com/apk/res/android" android:src="@drawable/image-medium" /> 
```

可绘制的大 mdpi/image.xml：

```
<bitmap xmlns:android="http://schemas.android.com/apk/res/android" android:src="@drawable/image-large" /> 
```

请注意，我在这里看到了一位 Google 工程师（现在找不到）的评论，该评论不推荐此功能，但直到有人提出更好的解决方案（与旧版 Android 版本兼容），然后我坚持下去。

# linux - Linux：如何从正在运行的二进制文件中获取库列表及其内存详细信息？

> ID：14193288
> 
> 赞同：0
> 
> 时间：2013-01-07T09:41:03.013
> 
> 标签：linux

在 linux62 上运行二进制文件时，该二进制文件占用了大量内存。这在加载 java 之后尤其发生。同样的事情在早期版本的 Linux 上运行良好，内存更少。

所以我想知道，是否有任何工具可以列出正在运行的二进制文件的加载库及其内存大小。在当前正在运行的二进制文件上，我没有任何实用程序来执行此操作。ldd 和 objdump 仅从对象中获取详细信息，而不是从正在运行的进程中获取详细信息。

由于仅在我的程序启动并运行后才加载 java 库（加载 java 是可选的），我需要一个工具来列出正在运行的二进制文件中的一组库及其内存详细信息。这样我就可以了解哪个库占用更多内存并且可以进一步调试。

谢谢唐加

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T09:56:16.413

```
# pidof init
1
# cat /proc/1/maps
00400000-004d2000 r-xp 00000000 fd:02 9790                               /bin/systemd
006d2000-006df000 r--p 000d2000 fd:02 9790                               /bin/systemd
006df000-006e0000 rw-p 000df000 fd:02 9790                               /bin/systemd
006e0000-006e1000 rw-p 00000000 00:00 0 
008df000-008e2000 rw-p 000df000 fd:02 9790                               /bin/systemd
0203d000-036b1000 rw-p 00000000 00:00 0                                  [heap]
3c0c200000-3c0c222000 r-xp 00000000 fd:02 11536                          /lib64/ld-2.14.90.so
3c0c421000-3c0c422000 r--p 00021000 fd:02 11536                          /lib64/ld-2.14.90.so
3c0c422000-3c0c423000 rw-p 00022000 fd:02 11536                          /lib64/ld-2.14.90.so
3c0c423000-3c0c424000 rw-p 00000000 00:00 0 
3c0c600000-3c0c7ad000 r-xp 00000000 fd:02 12080                          /lib64/libc-2.14.90.so
3c0c7ad000-3c0c9ad000 ---p 001ad000 fd:02 12080                          /lib64/libc-2.14.90.so
3c0c9ad000-3c0c9b1000 r--p 001ad000 fd:02 12080                          /lib64/libc-2.14.90.so
3c0c9b1000-3c0c9b3000 rw-p 001b1000 fd:02 12080                          /lib64/libc-2.14.90.so
3c0c9b3000-3c0c9b8000 rw-p 00000000 00:00 0 
3c0ce00000-3c0ce02000 r-xp 00000000 fd:02 10569                          /lib64/libdl-2.14.90.so
3c0ce02000-3c0d002000 ---p 00002000 fd:02 10569                          /lib64/libdl-2.14.90.so
3c0d002000-3c0d003000 r--p 00002000 fd:02 10569                          /lib64/libdl-2.14.90.so
3c0d003000-3c0d004000 rw-p 00003000 fd:02 10569                          /lib64/libdl-2.14.90.so
3c0d200000-3c0d217000 r-xp 00000000 fd:02 6336                           /lib64/libpthread-2.14.90.so
3c0d217000-3c0d416000 ---p 00017000 fd:02 6336                           /lib64/libpthread-2.14.90.so
3c0d416000-3c0d417000 r--p 00016000 fd:02 6336                           /lib64/libpthread-2.14.90.so
3c0d417000-3c0d418000 rw-p 00017000 fd:02 6336                           /lib64/libpthread-2.14.90.so
3c0d418000-3c0d41c000 rw-p 00000000 00:00 0 
3c0da00000-3c0da07000 r-xp 00000000 fd:02 22071                          /lib64/librt-2.14.90.so
3c0da07000-3c0dc06000 ---p 00007000 fd:02 22071                          /lib64/librt-2.14.90.so
3c0dc06000-3c0dc07000 r--p 00006000 fd:02 22071                          /lib64/librt-2.14.90.so
3c0dc07000-3c0dc08000 rw-p 00007000 fd:02 22071                          /lib64/librt-2.14.90.so
3c0de00000-3c0de15000 r-xp 00000000 fd:02 16692                          /lib64/libgcc_s-4.6.3-20120306.so.1
3c0de15000-3c0e014000 ---p 00015000 fd:02 16692                          /lib64/libgcc_s-4.6.3-20120306.so.1
3c0e014000-3c0e015000 rw-p 00014000 fd:02 16692                          /lib64/libgcc_s-4.6.3-20120306.so.1
3c0e200000-3c0e21d000 r-xp 00000000 fd:02 28104                          /lib64/libselinux.so.1
3c0e21d000-3c0e41d000 ---p 0001d000 fd:02 28104                          /lib64/libselinux.so.1
3c0e41d000-3c0e41e000 r--p 0001d000 fd:02 28104                          /lib64/libselinux.so.1
3c0e41e000-3c0e41f000 rw-p 0001e000 fd:02 28104                          /lib64/libselinux.so.1
3c0e41f000-3c0e420000 rw-p 00000000 00:00 0 
3c0ee00000-3c0ee04000 r-xp 00000000 fd:02 63328                          /lib64/libcap.so.2.22
3c0ee04000-3c0f003000 ---p 00004000 fd:02 63328                          /lib64/libcap.so.2.22
3c0f003000-3c0f004000 rw-p 00003000 fd:02 63328                          /lib64/libcap.so.2.22
3c12600000-3c12643000 r-xp 00000000 fd:02 52994                          /lib64/libdbus-1.so.3.5.6
3c12643000-3c12842000 ---p 00043000 fd:02 52994                          /lib64/libdbus-1.so.3.5.6
3c12842000-3c12843000 r--p 00042000 fd:02 52994                          /lib64/libdbus-1.so.3.5.6
3c12843000-3c12844000 rw-p 00043000 fd:02 52994                          /lib64/libdbus-1.so.3.5.6
3c1be00000-3c1be17000 r-xp 00000000 fd:02 57102                          /lib64/libaudit.so.1.0.0
3c1be17000-3c1c017000 ---p 00017000 fd:02 57102                          /lib64/libaudit.so.1.0.0
3c1c017000-3c1c018000 r--p 00017000 fd:02 57102                          /lib64/libaudit.so.1.0.0
3c1c018000-3c1c019000 rw-p 00018000 fd:02 57102                          /lib64/libaudit.so.1.0.0
3c1c019000-3c1c01d000 rw-p 00000000 00:00 0 
3c1c600000-3c1c604000 r-xp 00000000 fd:02 13766                          /lib64/libattr.so.1.1.0
3c1c604000-3c1c803000 ---p 00004000 fd:02 13766                          /lib64/libattr.so.1.1.0
3c1c803000-3c1c804000 rw-p 00003000 fd:02 13766                          /lib64/libattr.so.1.1.0
3c1d200000-3c1d20d000 r-xp 00000000 fd:02 76182                          /lib64/libpam.so.0.83.1
3c1d20d000-3c1d40c000 ---p 0000d000 fd:02 76182                          /lib64/libpam.so.0.83.1
3c1d40c000-3c1d40d000 r--p 0000c000 fd:02 76182                          /lib64/libpam.so.0.83.1
3c1d40d000-3c1d40e000 rw-p 0000d000 fd:02 76182                          /lib64/libpam.so.0.83.1
3c1d600000-3c1d617000 r-xp 00000000 fd:02 18152                          /lib64/libnsl-2.14.90.so
3c1d617000-3c1d816000 ---p 00017000 fd:02 18152                          /lib64/libnsl-2.14.90.so
3c1d816000-3c1d817000 r--p 00016000 fd:02 18152                          /lib64/libnsl-2.14.90.so
3c1d817000-3c1d818000 rw-p 00017000 fd:02 18152                          /lib64/libnsl-2.14.90.so
3c1d818000-3c1d81a000 rw-p 00000000 00:00 0 
3c1ea00000-3c1ea0e000 r-xp 00000000 fd:02 14124                          /lib64/libudev.so.0.12.0
3c1ea0e000-3c1ec0e000 ---p 0000e000 fd:02 14124                          /lib64/libudev.so.0.12.0
3c1ec0e000-3c1ec0f000 r--p 0000e000 fd:02 14124                          /lib64/libudev.so.0.12.0
3c1ec0f000-3c1ec10000 rw-p 0000f000 fd:02 14124                          /lib64/libudev.so.0.12.0
3c27000000-3c27008000 r-xp 00000000 fd:02 76173                          /lib64/libwrap.so.0.7.6
3c27008000-3c27208000 ---p 00008000 fd:02 76173                          /lib64/libwrap.so.0.7.6
3c27208000-3c27209000 rw-p 00008000 fd:02 76173                          /lib64/libwrap.so.0.7.6
3c27209000-3c2720a000 rw-p 00000000 00:00 0 
7febd3c96000-7febd3ca2000 r-xp 00000000 fd:02 45355                      /lib64/libnss_files-2.14.90.so
7febd3ca2000-7febd3ea1000 ---p 0000c000 fd:02 45355                      /lib64/libnss_files-2.14.90.so
7febd3ea1000-7febd3ea2000 r--p 0000b000 fd:02 45355                      /lib64/libnss_files-2.14.90.so
7febd3ea2000-7febd3ea3000 rw-p 0000c000 fd:02 45355                      /lib64/libnss_files-2.14.90.so
7febd3ea3000-7febd403c000 rw-p 00000000 00:00 0 
7febd40ca000-7febd40d2000 rw-p 00000000 00:00 0 
7febd40f9000-7febd40fc000 rw-p 00000000 00:00 0 
7fffce1cd000-7fffce1ee000 rw-p 00000000 00:00 0                          [stack]
7fffce1ff000-7fffce200000 r-xp 00000000 00:00 0                          [vdso]
ffffffffff600000-ffffffffff601000 r-xp 00000000 00:00 0                  [vsyscall] 
```

# cordova - JQuery Mobile：navigator.app.exitapp() 在 Android 设备上不起作用

> ID：14193300
> 
> 赞同：0
> 
> 时间：2013-01-07T09:41:42.233
> 
> 标签：cordova, jquery-mobile

我正在使用 PhoneGap 框架来开发移动应用程序。我想添加一个按钮退出，使用 navigator.app.exitapp ()，它在我的模拟器上运行良好，但在我的平板电脑上不起作用。

```
 <script type="text/javascript">

 function deconec()
 {
     localStorage.clear(); 
     navigator.app.exitApp();
 }

 </script>

 <a href="" data-role="button" data-icon="home" onclick="deconec()">Quitter</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T19:17:23.760

PhoneGap 可能不适用于您的平板电脑。我在使用 Kindle Fire HD 时遇到了问题。该应用程序可以在我的手机上正常运行，但不能在我的 Kindle 上运行。

# google-drive-api - 如何在 iOS 中的谷歌驱动器文件上设置 modifiedDate 并防止重复的文件名

> ID：14193307
> 
> 赞同：1
> 
> 时间：2013-01-07T09:42:07.737
> 
> 标签：google-drive-api, google-api-objc-client

我在 iOS 中找到了一种方法（对我来说并不明显），使用标准 queryForFilesInsertWithObject 和 uploadParameters 将文件插入到谷歌驱动器文件夹中，并在 GTLDriveParentReference 对象中设置文件夹 id，将该对象添加到数组中，并将该数组分配给上传文件的“父母”属性。我还没有想出的是如何用新版本覆盖任何现有的谷歌驱动器文件而不创建副本。我还想用与我的本地设备文件相同的日期时间戳来标记新上传的谷歌驱动器文件。当我尝试使用文件/更新方法并设置 file.modifiedDate 和 query.setModifiedDate=YES 时，我总是收到 400 Bad Request。

我可以使用patch来更改标题就好了，但是我不能使用api设置modifiedDate。我能够使用 Google 的 Try it 更改 modifiedDate！APIs Explorer，所以谷歌的服务器工作正常。这是失败的代码：

```
GTLDriveFile *file = [GTLDriveFile object];
NSString *fId = insertedFile.identifier;
file.title = @"Tony.jpg";
file.modifiedDate = myNewGoogleDate; // "2012-12-31T08:00:00+00:00"

GTLQueryDrive *qu = [GTLQueryDrive queryForFilesPatchWithObject:file fileId:fId];
qu.setModifiedDate = YES;

[service executeQuery:qu completionHandler:^(GTLServiceTicket *ticket,... 
```

用 modifiedDate 取出两行，google-drive 文件标题更改得很好。我追踪了对executeQuery的api调用，发现以下结果为“DataToPost”。

```
{"method":"drive.files.patch","id":"gtl_7","jsonrpc":"2.0",
"params": {"setModifiedDate":true,"resource":
{"modifiedDate":"2012-12-31T08:00:00+00:00",
"title":"Tony.jpg"},"fileId":"0BxRlXPR_hfR9OEJSdDdyQjkyaE0"},"apiVersion":"v2"} 
```

有人在这篇文章中看到“错误请求”吗？从 executeQuery 返回的错误是：

```
Error Domain=com.google.GTLJSONRPCErrorDomain Code=400 "The operation couldn’t be
completed. (Bad Request)" UserInfo=0x80724b0 {error=Bad Request,
GTLStructuredError=GTLErrorObject 0x806a7a0: {message:"Bad Request" code:400 data:[1]},
NSLocalizedFailureReason=(Bad Request)} 
```

有没有人有一些代码来设置修改日期有效？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T01:14:59.243

您想改用`queryForFilesUpdateWithObject`原始文件来更新文件，`fileId`以确保更新正确的文件。

```
+ (id)queryForFilesUpdateWithObject:(GTLDriveFile *)object
                         fileId:(NSString *)fileId
               uploadParameters:(GTLUploadParameters *)uploadParametersOrNil { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-17T00:58:46.920

如果您提供相同的预先存在的标识符（可能在上面的答案中解释），则可以避免重复的文件名。可以使用 GTLDateTime 构造设置 modifiedDate。两种解决方案如下所示：

```
NSString *fileID = gF.identifier;
gF.modifiedDate  = [GTLDateTime dateTimeWithDate:myNSDate timeZone:[NSTimeZone localTimeZone]];

if (fileID==0) query  = [GTLQueryDrive queryForFilesInsertWithObject:gF               uploadParameters:upParams];
else           query  = [GTLQueryDrive queryForFilesUpdateWithObject:gF fileId:fileID uploadParameters:upParams];
query.setModifiedDate = YES; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-10T08:30:32.003

下面的代码正在使用 GoogleAPIClient v3，我看不到任何错误的请求。

```
driveFile = [GTLDriveFile object];
driveFile.modifiedTime  = [GTLDateTime dateTimeWithDate:[NSDate date] timeZone:[NSTimeZone localTimeZone]];

output:
(lldb) po driveFile.modifiedTime
GTLDateTime 0x157a06470: {2016-08-10T13:44:33.609+05:30} 
```

# javascript - vb.net 整数除法

> ID：14193308
> 
> 赞同：1
> 
> 时间：2013-01-07T09:42:10.030
> 
> 标签：javascript, asp.net, vb.net

我正在尝试将此 ASP.net(vb) 脚本转换为纯 Javascript，但我遇到了这个问题。我正在转换的脚本具有以下内容：

```
Dim F as Integer
Dim Theta(100) as Double 
```

F 以值结束：1 Theta 以以下值结束：

```
[0, 1.2669233316773538, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0] 
```

然后完成一些数学计算，在公式中使用 Theta 数组，如下所示：

```
Cos(Theta(F / 2)) 
```

在这里做简单的数学运算，`F / 2, (or 1 / 2) = 0.5`没有数组键 0.5 所以在我的 Javascript 代码中就像这样说：

```
Math.cos(Theta[0.5]) 
```

最终会做：

```
Math.cos(undefined) 
```

这当然打破了数学。

我的问题很简单。我没有 IIS 服务器或任何方式来修改 vb.net 脚本，以便我可以添加调试输出以查看其工作方式。我基本上是在盲目地做这件事，对任何.net 语言或 ASP 知之甚少。

由于 F 是一个整数，在 vb.net 脚本中除以 F 会产生一个整数吗？是否由于 F 的类型而强制舍入？

就像，在这个脚本中，发生了哪一个？：Theta[0]（连接）或 Theta[1]（四舍五入）或 Theta[0.5]（与 javascript 相同）？

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T10:08:19.123

看看这个答案：[VB.NET vs C# integer division](https://stackoverflow.com/questions/6013626/vb-net-vs-c-sharp-integer-division)

VB.NET 有两个除法运算符：

*   “/”除法：四舍五入
*   "\" 整数除法：结果会被截断

在您的情况下，当您的脚本使用“/”时，结果将为 1（1 / 2 = 0.5 四舍五入为 1）。

你的 JavaScript

```
Math.cos(Theta[0.5]) 
```

应该成为

```
Math.cos(Theta[Math.round(0.5)]) 
```

# cron - 通过 Expect 在远程服务器上执行 shell 脚本

> ID：14193313
> 
> 赞同：0
> 
> 时间：2013-01-07T09:42:32.357
> 
> 标签：cron, crontab, expect

我需要在多台服务器（所有基于 Unix）上设置一个 cron 作业。为此，我创建了一个脚本（让我们将其称为脚本“A”），它可以在*手动*执行时正确设置 cron 作业。此外，我已将此脚本上传到所有目标服务器，目的是通过另一台服务器上的另一个脚本自动调用和执行它。

现在，这台服务器包含脚本“B”（如上所述），它登录到所有目标服务器并调用脚本 A 以便在所有服务器上自动设置 cron。

问题是，永远不会调用脚本 A 并且永远不会设置 cron。脚本 B 是一个 Expect 脚本，代码如下，

```
spawn rsync -avz -e ssh $localDir/autodir $username@$ipaddress:$remoteDir
sleep 10

expect {
"assword:" {
    send "$pwd\r"
    sleep 5
    exp_continue
}
expect {
    "@" {
        send "cd /home/$username/autodir/config\r"
        sleep 5
        exp_continue

        expect "@"
        send "./setCron.sh" # NEED TO EXECUTE THIS AT REMOTE SERVER
        sleep 5
        exp_continue
    }
}
"yes/no" {
    send "yes\r"
    set timeout -5
    exp_continue
}
-re $prompt {
    send "\r"
}
timeout {
    exit
}
eof {
    exit
}
} 
```

基本上，我正在寻找一种通用解决方案来调用远程服务器上的脚本，而不使用 ssh 或公钥身份验证，因为由于某些限制，我不能同时使用这两种方法。因此我尝试使用 Expect 但没有成功。即使经过大量的翻找，我也找不到合适的解决方案。这里需要帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T05:04:22.123

只是在修补时发现了解决方案。这是代码，

```
spawn rsync -avz -e ssh $localDir/autodir $username@$ipaddress:$remoteDir
sleep 10

expect {
"assword:" {
    send "$pwd\r"
    sleep 5
    exp_continue
}
timeout {
    exit
}
}

spawn ssh $username@$ipaddress
sleep 10

expect {
"assword:" {
    send "$pwd\r"
    sleep 5
    send "sh /home/$username/autodir/config/setCron.sh\r"
    sleep 5
    exp_continue
}
timeout {
    exit
}
} 
```

这会登录到我的所有服务器，同步文件/目录并设置 cron 作业。奇迹般有效。我最后不得不使用 ssh。

# cordova - Phonegap - SAP BSP 应用程序 - 无法加载登录弹出窗口

> ID：14193316
> 
> 赞同：2
> 
> 时间：2013-01-07T09:42:38.267
> 
> 标签：cordova, sap-bsp

在 Phonegap 应用程序中，我在 body 的 onload 事件中使用**window.location.href**打开一个外部 Web 应用程序。它适用于 google.com 和 facebook.com 等其他网址。但我必须像这样打开我的 SAP Bsp 应用程序。

当我打开我的 SAP BSP 应用程序时，它会在弹出窗口中询问登录凭据，如下所示。

*从 Windows 操作系统截取的屏幕截图。*

![在此处输入图像描述](../Images/43b9e5b7ea5791f8bb5079313e7afcbe.png)

电话间隙对这种情况没有任何反应。如果我在我的 SAP 系统中禁用此弹出窗口，则应用程序加载良好。但我需要启用此弹出窗口。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T04:33:47.950

现在你不能在phonegap中这样登录。Phonegap 不支持系统弹出窗口。您应该创建自己的 HTML 登录屏幕来执行此操作。

查看此[Phonegap 线程](http://community.phonegap.com/nitobi/topics/phonegap_sap_bsp_application_fails_to_load_with_login_pop_up?utm_content=topic_link&utm_medium=email&utm_source=reply_notification)以获取更多信息。

# amazon-s3 - libs3 分段上传

> ID：14193331
> 
> 赞同：3
> 
> 时间：2013-01-07T09:44:09.463
> 
> 标签：amazon-s3

我正在使用 libs3 从我的 C++ 项目中将文件存储在 S3 上。我看到一篇文章说亚马逊支持 S3 上的分段上传。但我无法在 libs3 中找到此功能。

任何人都可以帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T05:50:04.380

截至 2013 年 3 月 18 日，他们的 TODO 文件表明尚不支持分段上传。

# utf-8 - 在 ColdFusion 中记录 UTF-8 字符

> ID：14193333
> 
> 赞同：3
> 
> 时间：2013-01-07T09:44:15.110
> 
> 标签：utf-8, coldfusion

是否可以使用 ColdFusion 来记录 UTF-8 数据（例如：汉字）`<cflog>`？

默认情况下，它只记录问号而不是字符。

我知道我可以使用文件 API 打开/写入/关闭日志文件，但我不想让日志记录这样简单的事情变得过于复杂。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T13:26:23.663

是的，但是您需要告诉整个 JVM 以 UTF-8 格式处理文件。您可以通过将其添加到 jvm.config 中的 java.args 来执行此操作：

```
-Dfile.encoding=utf8 
```

[参考](http://forums.adobe.com/thread/859351)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T17:08:17.613

您也可以`log4j.appender.LOGFILE.encoding=UTF-8`在 ColdFusion 的`/lib/log4j.properties`文件中进行设置，而不影响整个 VM。虽然如果亚当的解决方案有效，我不一定会改变它。

# c# - GridSplitter 自动调整大小

> ID：14193335
> 
> 赞同：1
> 
> 时间：2013-01-07T09:44:15.757
> 
> 标签：c#, wpf, xaml, grid, gridsplitter

我遇到了问题`GridSplitter`

简单示例代码：

```
<Grid x:Name="MainGrid">
    <Grid.RowDefinitions>
        <RowDefinition Height="100"></RowDefinition>
        <RowDefinition Height="2"></RowDefinition>
        <RowDefinition Height="*"></RowDefinition>
    </Grid.RowDefinitions>
    <Grid x:Name="TopGrid" Grid.Row="0"  HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Background="Red"/>
    <GridSplitter ResizeDirection="Rows" Grid.Row="1" VerticalAlignment="Stretch" HorizontalAlignment="Stretch" Height="2" Background="Black" />
    <Grid x:Name="BottomGrid" Grid.Row="2" HorizontalAlignment="Stretch"  Background="Aquamarine" VerticalAlignment="Stretch"/>
</Grid> 
```

这将创建两个由 . 垂直分隔的 Grid `GridSplitter`。

我想要实现的是，`GridSplitter`自动对齐网格的内容。例如，如果我在底部网格中有一个可折叠元素，我希望顶部网格在折叠元素时变得更大。如果我扩大它，顶部`Grid`应该变小。

我该怎么做呢？稍后我将有 4`Grids`和 3`GridSplitter`的...所以该解决方案也应该适用于多个`GridSplitter`。

[编辑]：

我的xml：

```
 <Grid x:Name="MainGrid">
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*"/>
    </Grid.ColumnDefinitions>
    <Grid.RowDefinitions>
        <RowDefinition Height="100">
            <RowDefinition.MinHeight>
                <MultiBinding Converter="{StaticResource ResourceKey=MultiValueConverter}">
                    <Binding ElementName="dgStapelliste" Path="ActualHeight"></Binding>
                </MultiBinding>
            </RowDefinition.MinHeight>
        </RowDefinition>
        <RowDefinition Height="1"></RowDefinition>
        <RowDefinition Height="*"></RowDefinition >           
    </Grid.RowDefinitions>

    <Grid Grid.Row="0" Grid.Column="0" x:Name="Test">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="200"/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <WPF:DataGrid GridHeaderContent="{Binding StapelListe.HeaderText}" SelectedItem="{Binding StapelListe.SelectedItem}" Grid.Row="0" Grid.Column="0" x:Name="dgStapelliste" HorizontalAlignment="Stretch" ItemsSource="{Binding StapelListe, Mode=OneWay,  UpdateSourceTrigger=PropertyChanged}"/>
        <WPF:DataGrid GridHeaderContent="{Binding EinzelListe.HeaderText}" Grid.Row="0" Grid.Column="1" x:Name="dgEinzelliste" HorizontalAlignment="Stretch"  ItemsSource="{Binding EinzelListe, Mode=OneWay}"/>

        <GridSplitter Grid.Column="0" Width="1" VerticalAlignment="Stretch" Background="Black" />
    </Grid>

    <Grid Grid.Row="2" Grid.Column="0" Grid.RowSpan="2">
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="200"/>
        </Grid.ColumnDefinitions>

        <WPF:DataGrid  GridHeaderContent="{Binding Anforderungsliste.HeaderText}" Grid.Column="0" x:Name="dgAnforderungsliste" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" ItemsSource="{Binding Anforderungsliste, Mode=OneWay}"/>

        <GridSplitter Grid.Column="0" Width="1" VerticalAlignment="Stretch" Background="Black" />
    </Grid>
    <GridSplitter Grid.Column="0" Grid.Row="1" Height="1" ResizeDirection="Rows"  VerticalAlignment="Stretch" HorizontalAlignment="Stretch" Background="Black" x:Name="testSplitter" />
</Grid> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T10:59:42.210

您可以使用 MultiBinding 来实现您想要的。

对于每个 RowDefinition，您设置一个绑定到其内容 ActualHeight 的 MinHeight，如下所示：

```
<RowDefinition Height="100">
    <RowDefinition.MinHeight>
        <MultiBinding Converter="{StaticResource ResourceKey=CalcAll}">
            <Binding ElementName="firstElementInThisRow" Path="ActualHeight"></Binding>
            <Binding ElementName="secondElementInThisRow" Path="ActualHeight"></Binding>
            <Binding ElementName="thirdElementInThisRow" Path="ActualHeight"></Binding>
            <Binding ElementName="fourthElementInThisRow" Path="ActualHeight"></Binding>
        </MultiBinding>
    </RowDefinition.MinHeight>
</RowDefinition> 
```

您的转换器可能如下所示：

```
public object Convert(object[] values, Type targetType, object parameter, CultureInfo culture)
{
    double result = 0.0;
    foreach (object item in values)
    {
        result += System.Convert.ToDouble(item);
    }
    return result;
}

public object[] ConvertBack(object values, Type[] targetType, object parameter, CultureInfo culture)
{
    return null;
} 
```

每次展开控件时，它的 ActualHeight 都会发生变化，并且 Binding 会更新 -> 父级 RowDefinition 的 MinHeight 会发生变化。

但是，如果控件 VerticalAlignment 设置为 Stretch，则不能设置一个，因为 ActualHeight 不会因扩展而改变。

**编辑**：由于我现在能想到的唯一属性是 DesiredSize.Height 属性，因此您不能使用 Binding（如果 DesiredSize.Height 值更改，则绑定不会更新）。但也许您可以使用 double 类型的属性（我们称之为 MinHeightRowOne），它在其设置器中引发 PropertyChanged 事件并绑定到第一行 MinHeight（每行一个属性）：

```
public double _minHeightRowOne;
public double MinHeightRowOne
{
    get
    {
        return _minHeightRowOne;
    }
    set
    {
        _minHeightRowOne = value;
        OnPropertyChanged("MinHeightRowOne");
    }
}

public event PropertyChangedEventHandler PropertyChanged;
public void OnPropertyChanged(string name)
{
    if (PropertyChanged != null)
    {
        PropertyChanged(this, new PropertyChangedEventArgs(name));
    }
} 
```

```
<RowDefinition Height="100" MinHeight="{Binding Path=MinHeightRowOne}"/> 
```

现在将此 EventHandler 添加到第一行中每个控件的 SizeChanged-Event（每行一个处理程序）：

```
private List<KeyValuePair<string,double>> oldVals = new List<KeyValuePair<string,double>>();

private void ElementInRowOneSizeChanged(object sender, SizeChangedEventArgs e)
{
    FrameworkElement elem = (FrameworkElement)sender;
    MinHeightRowOne -= oldVals.Find(kvp => kvp.Key == elem.Name).Value;
    elem.Measure(new Size(int.MaxValue, int.MaxValue));
    MinHeightRowOne += elem.DesiredSize.Height;
    oldVals.Remove(oldVals.Find(kvp => kvp.Key == elem.Name));
    oldVals.Add(new KeyValuePair<string, double>(elem.Name, elem.DesiredSize.Height));
} 
```

通过这个，每次控件的大小更改（应包括展开或折叠项目）时，行的 MinHeight 都会得到更新。

请注意，每个控件都必须具有唯一的名称才能使其正常工作。

# c#-4.0 - Web.config 嵌套列表

> ID：14193338
> 
> 赞同：0
> 
> 时间：2013-01-07T09:44:30.280
> 
> 标签：c#-4.0

我想在我的 web.config 中使用嵌套列表。我看到一些有效的代码，但不是我的，当我尝试阅读配置部分时出现错误：

> System.Configuration.ConfigurationErrorsException : Élément non reconnu IsochroneServicesTestImbrique'。

我的配置：

```
<IsochroneServicesTest>
    <add name="TC">
      <IsochroneServicesTestImbrique>
        <add name="DEFAULT" path="success"/>
      </IsochroneServicesTestImbrique>
    </add>
  </IsochroneServicesTest> 
```

和代码：

```
 [ConfigurationProperty("IsochroneServicesTest")]
    [ConfigurationCollection(typeof(CollectionIsochrone), AddItemName = "add")]
    public CollectionIsochroneType IsochroneServicesTest
    {
        get { return (CollectionIsochroneType)this["IsochroneServicesTest"]; }
        set { this["IsochroneServicesTest"] = value; }
    }

    public class CollectionIsochroneType : ConfigurationElementCollection
    {
        public void Add(ProviderElement element)
        {
            base.BaseAdd(element);
        }

        protected override ConfigurationElement CreateNewElement()
        {
            return new IsochroneElement();
        }

        protected override object GetElementKey(ConfigurationElement element)
        {
            return ((IsochroneTypeElement)element).Name;
        }

        public IsochroneTypeElement this[int index]
        {
            get { return (IsochroneTypeElement)BaseGet(index); }
            set
            {
                if (BaseGet(index) != null)
                {
                    BaseRemoveAt(index);
                }
                BaseAdd(index, value);
            }
        }

        public new IsochroneTypeElement this[string Name]
        {
            get { return (IsochroneTypeElement)BaseGet(Name); }
        }

        public int IndexOf(IsochroneTypeElement element)
        {
            return BaseIndexOf(element);
        }

        protected override void BaseAdd(ConfigurationElement element)
        {
            BaseAdd(element, false);
        }
    }

    public class IsochroneTypeElement : ConfigurationElement
    {
        [ConfigurationProperty("name", IsRequired = true)]
        public string Name
        {
            get { return (string)this["name"]; }
            set { this["name"] = value; }
        }

        [ConfigurationProperty("IsochroneServicesTestImbrique", IsRequired = true)]
        [ConfigurationCollection(typeof(CollectionIsochrone), AddItemName = "add")]
        public CollectionIsochrone IsochroneServicesImbrique
        {
            get { return (CollectionIsochrone)this["IsochroneServicesTestImbrique"]; }
            set { this["IsochroneServicesTestImbrique"] = value; }
        }
    }

public class CollectionIsochrone : ConfigurationElementCollection
{
    public void Add(ProviderElement element)
    {
        base.BaseAdd(element);
    }

    protected override ConfigurationElement CreateNewElement()
    {
        return new IsochroneElement();
    }

    protected override object GetElementKey(ConfigurationElement element)
    {
        return ((IsochroneElement)element).Name;
    }

    public IsochroneElement this[int index]
    {
        get { return (IsochroneElement)BaseGet(index); }
        set
        {
            if (BaseGet(index) != null)
            {
                BaseRemoveAt(index);
            }
            BaseAdd(index, value);
        }
    }

    public new IsochroneElement this[string Name]
    {
        get { return (IsochroneElement)BaseGet(Name); }
    }

    public int IndexOf(IsochroneElement element)
    {
        return BaseIndexOf(element);
    }

    protected override void BaseAdd(ConfigurationElement element)
    {
        BaseAdd(element, false);
    }
}

public class IsochroneElement : ConfigurationElement
{
    [ConfigurationProperty("name", IsRequired = true)]
    public string Name
    {
        get { return (string)this["name"]; }
        set { this["name"] = value; }
    }

    [ConfigurationProperty("path", IsRequired = true)]
    public string Path
    {
        get { return (string)this["path"]; }
        set { this["path"] = value; }
    }
} 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T01:57:16.117

您收到该错误是因为您缺少部分中的`IsochroneServicesTestImbrique`声明`<configSections>`。此外，至少一个类必须继承自`ConfigurationSection`. [请参阅此处](http://msdn.microsoft.com/en-us/library/2tw134k3%28v=vs.100%29.aspx)的示例。

# android - Cocos2d-x如何禁止游戏后台运行

> ID：14193344
> 
> 赞同：0
> 
> 时间：2013-01-07T09:44:54.653
> 
> 标签：android, iphone, cocos2d-iphone, cocos2d-x

我有一个cocos2d-x的游戏。当我按下“主页”按钮退出游戏时，它会关闭游戏，但我不希望它在后台运行。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T11:34:20.880

您可以在当前 Activity 的 onPause() / onStop() 方法上捕获它，并在此处暂停实际游戏。

此外，如果需要，您可以捕获 onResume() 并恢复实际游戏

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T10:13:20.410

进入iOS（iphone）：

根据苹果文档，您不应以编程方式退出应用程序，但如果您仍想在某个按钮的单击事件上退出应用程序，则应使用以下行。

```
 exit(0); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T04:56:39.950

在你的安卓活动中，

```
@Override 
onStop(){ 
    android.os.Process.killProcess(android.os.Process.myPid()); 
} 
```

# jquery - 为什么我的虚拟 jqxgrid 不工作

> ID：14193348
> 
> 赞同：0
> 
> 时间：2013-01-07T09:45:03.697
> 
> 标签：jquery, jqxgrid

为什么我的虚拟 jqxgrid 不工作？

我正在复制虚拟数据分页。

我有 9 条记录的 JsonObject。每次文本框输入更改时，在 Ajax 调用后加载 JsonObject。然后网格也会重新加载 JsonObject 中的新数据。但是这里我手动添加了Json数据来尝试虚拟分页。

它调用 rendergridrows() 很好，但它不加载记录。它只是说正在加载..有什么想法吗？谢谢。

```
<!DOCTYPE html>
<html lang="en">
<head>
    <title id='Description'>In this demo jqxGrid uses a virtualized paging which enables you to handle very large data sets without any impact on client side performance.</title>
    <link rel="stylesheet" href="../../jqwidgets/styles/jqx.base.css" type="text/css" />
    <script type="text/javascript" src="../../scripts/jquery-1.8.2.min.js"></script>
    <script type="text/javascript" src="../../jqwidgets/jqxcore.js"></script>
    <script type="text/javascript" src="../../jqwidgets/jqxdata.js"></script> 
    <script type="text/javascript" src="../../jqwidgets/jqxbuttons.js"></script>
    <script type="text/javascript" src="../../jqwidgets/jqxscrollbar.js"></script>
    <script type="text/javascript" src="../../jqwidgets/jqxmenu.js"></script>
    <script type="text/javascript" src="../../jqwidgets/jqxlistbox.js"></script>
    <script type="text/javascript" src="../../jqwidgets/jqxdropdownlist.js"></script>
    <script type="text/javascript" src="../../jqwidgets/jqxgrid.js"></script>
    <script type="text/javascript" src="../../jqwidgets/jqxgrid.pager.js"></script>
    <script type="text/javascript" src="../../jqwidgets/jqxgrid.selection.js"></script> 
    <script type="text/javascript" src="../../scripts/gettheme.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            var theme = getTheme();
            // prepare the data
            var data = new Array();
            var jsonObject = { "contactList":[

{"age":1,"SId":"S1234567","gender":"male"},
{"age":1,"SId":"S1234567","gender":"male"},
{"age":1,"SId":"S1234567","gender":"male"},
{"age":1,"SId":"S1234567","gender":"male"},
{"age":1,"SId":"S1234567","gender":"male"},
{"age":1,"SId":"S1234567","gender":"male"},
{"age":1,"SId":"S1234567","gender":"male"},
{"age":1,"SId":"S1234567","gender":"male"},
{"age":1,"SId":"S1234567","gender":"male"},

], "totalrecords":9};

//alert("jsonObject.totalrecords : " + jsonObject.totalrecords);

            // generate sample data.
            var generatedata = function (startindex, endindex) {
                var data = {};
                for (var i = startindex; i < endindex; i++) {

            //alert(startindex + " " + endindex);
                    var row = {};

                            row["age"] = jsonObject.contactList[i].age;
                            row["gender"] = jsonObject.contactList[i].gender;
                            row["SId"] = jsonObject.contactList[i].SId;

                    data[i] = row;
                }
                return data;
            }
            var source =
            {
                datatype: "array",
                localdata: {},
                totalrecords: jsonObject.totalrecords
            };

            // load virtual data.
            var rendergridrows = function (params) {

        alert("rendergridrows : " + source.totalrecords);
        //alert("rendergridrows : " + params.startindex + " " + params.endindex);
                var data = generatedata(params.startindex, params.endindex);
                return data;
            }
            var totalcolumnrenderer = function (row, column, cellvalue) {
                var cellvalue = $.jqx.dataFormat.formatnumber(cellvalue, 'c2');
                return '<span style="margin: 6px 3px; font-size: 12px; float: right; font-weight: bold;">' + cellvalue + '</span>';
            }
            var dataAdapter = new $.jqx.dataAdapter(source);
            $("#jqxgrid").jqxGrid(
            {
                width: 670,
                autoheight: true,
                source: dataAdapter,
                theme: theme,
                virtualmode: true,
                pageable: true,
                rendergridrows: rendergridrows,
                columns: [

                          { text: 'Age', datafield: 'age', width: 50 },
                          { text: 'SId', datafield: 'SId', width: 120 },
                          { text: 'Gender', datafield: 'gender', width: 80 },

                ]
            });
        });
    </script>
</head>
<body class='default'>
    <div id='jqxWidget' style="font-size: 13px; font-family: Verdana; float: left;">
        <div id="jqxgrid"></div>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T20:22:47.187

因为，对于循环的最后一项，您的 jsonObject 为空。您有 9 条记录和从 0 到 10 的循环。

# .htaccess - 301将所有子页面重定向到首页

> ID：14193351
> 
> 赞同：1
> 
> 时间：2013-01-07T09:45:36.343
> 
> 标签：.htaccess, redirect, seo

我们正在关闭一个站点，因此我们需要将站点上的所有子页面 301 重定向到首页（在那里我们将收到有关站点关闭等的消息）

但是我们如何使用 .htaccess 来做到这一点？

目前我们的 .htaccess 看起来像这样：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} !^www\.
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L] 
```

但它不会 301 将子页面重定向到首页（我们希望保留非 www 到 www 的重定向）。

谢谢，路易莎

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T09:56:45.803

这个应该工作：

```
RewriteEngine on
RewriteCond %{HTTP_HOST} !^(.*)\.yourdomain\.com$ [NC] 
RewriteRule ^(.*)$ http://www.yourdomain.com/ [R=301,L]
RewriteCond %{REQUEST_URI} !"^/$"
RewriteRule (.+) http://%{HTTP_HOST}/ [R=301,L] 
```

# java - java - 如何从java中的jar中将嵌入的字体加载为InputStream？

> ID：14193356
> 
> 赞同：9
> 
> 时间：2013-01-07T09:45:57.777
> 
> 标签：java, exception, fonts, jar, embedded-resource

如果我从 Eclipse 运行应用程序，那么一切都完成了。但是如果将它导出到 jar 我会得到一个异常。

```
java.io.IOException: Problem reading font data.
at java.awt.Font.createFont(Unknown Source) 
```

[这是包树](http://imageshack.us/photo/my-images/824/pathp.png/)

![在此处输入图像描述](../Images/55e309b7560af5928dca51a3c5963c15.png)

我的代码（在`SzervizPrint.java`文件中）：

```
InputStream istream = getClass().getResourceAsStream("/resources/SerpentineBolditalic.ttf");
Font myFont = Font.createFont(Font.TRUETYPE_FONT, istream);
myFont = myFont.deriveFont(36.0f);
lblNewLabel.setFont(myFont); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-07T10:09:28.820

```
SerpentineBolditalic.ttf 
```

应该：

```
SerpentineBoldItalic.ttf 
```

（大写“我”）

虽然本地文件系统可能不区分大小写，`getResource(String)`但绝对是。

# sql - 带条件的 SQL JOIN

> ID：14193358
> 
> 赞同：-3
> 
> 时间：2013-01-07T09:46:10.117
> 
> 标签：sql, sql-server-2008, join

我正在使用 SQL SERVER 2008 R2。

我的查询连接是这样的：

```
SELECT dbo.TARIF_COURANT.CODE_TARIF, 
dbo.TARIF_COURANT.NO_CLIENT,dbo.TARIF_COURANT.ZONE, dbo.TARIF_COURANT.UNITE, 
dbo.TARIF_COURANT.LIBELLE, dbo.TARIF_COURANT.TR_DEB, dbo.TARIF_COURANT.TR_FIN, 
dbo.TARIF_COURANT.MONTANT,dbo.T_TARIF_ZONE.LIBELLE AS ZONELIB, 
dbo.T_TARIF_ZONE.DEPARTEMENT, dbo.T_TARIF_ZONE.DELAI
FROM dbo.TARIF_COURANT LEFT OUTER JOIN dbo.T_TARIF_ZONE ON 
dbo.TARIF_COURANT.ZONE = dbo.T_TARIF_ZONE.NO_ID
WHERE (dbo.TARIF_COURANT.TEMPO = 2) AND 
(dbo.TARIF_COURANT.ZONE IN (1, 2, 3, 4, 6))
ORDER BY dbo.TARIF_COURANT.TR_DEB 
```

现在我添加另一个表 LS_CLIENT_DEPT，并修改我的联接：

```
SELECT  dbo.TARIF_COURANT.CODE_TARIF, dbo.TARIF_COURANT.NO_CLIENT, 
dbo.TARIF_COURANT.ZONE, dbo.TARIF_COURANT.UNITE, dbo.TARIF_COURANT.LIBELLE, 
dbo.TARIF_COURANT.TR_DEB, dbo.TARIF_COURANT.TR_FIN, dbo.TARIF_COURANT.MONTANT, 
dbo.T_TARIF_ZONE.LIBELLE AS ZONELIB, dbo.LS_CLIENT_DEPT.DEPARTEMENT, 
dbo.T_TARIF_ZONE.DELAI
FROM dbo.TARIF_COURANT LEFT OUTER JOIN dbo.T_TARIF_ZONE ON 
dbo.TARIF_COURANT.ZONE = dbo.T_TARIF_ZONE.NO_ID 
LEFT OUTER  JOIN dbo.LS_CLIENT_DEPT ON dbo.TARIF_COURANT.NO_CLIENT = 
dbo.LS_CLIENT_DEPT.CODE_CLIENT AND dbo.TARIF_COURANT.ZONE = 
dbo.LS_CLIENT_DEPT.ZONE
WHERE (dbo.TARIF_COURANT.TEMPO = 2) AND (dbo.TARIF_COURANT.ZONE IN (1, 2, 3, 
4, 6)) ORDER BY dbo.TARIF_COURANT.TR_DEB 
```

对象是如果表“LS_CLIENT_DEPT”中的 DEPARTEMENT 列是“NOT NULL”，则使用此列值，否则使用表“T_TARIF_ZONE”中的列 DEPARTEMENT 值

提前谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T09:50:36.873

听起来像你想要的：

```
COALESCE(LS_CLIENT_DEPT.DEPARTEMENT, T_TARIF_ZONE.DEPARTEMENT) 
```

因此，`LS_Client_Dept`如果它不为 null，它将从 Department 获取，如果它为 null，则返回 Department from `T_TARIF_ZONE`（但是，这也可能为 null）。

[关于 Coalesce 的 MSDN 文档](http://msdn.microsoft.com/en-us/library/ms190349%28v=sql.100%29.aspx)。

# python - python正则表达式也匹配特殊字符

> ID：14193369
> 
> 赞同：1
> 
> 时间：2013-01-07T09:46:45.400
> 
> 标签：python, regex

目前我使用这个简单的脚本来搜索字符串中的标签；

```
tag = "#tag"
text = "test string with #tag inserted"
match = re.search(tag, text, re.IGNORECASE) #matches 
```

现在假设文本包含a-acute；

```
tag = "#tag"
text = "test string with #tág inserted"
match = re.search(tag, text, re.IGNORECASE) #does not match :( 
```

我如何使这场比赛发挥作用？也应该适用于其他特殊字符（é、è、í 等）

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T09:50:36.047

您可以使用[unidecode](http://pypi.python.org/pypi/Unidecode)规范化文本：

```
import unicodedata

tag = "#tag"
text = u"test string with #tág inserted and a #tag"
text=unidecode(text)
re.findall(tag, text, re.IGNORECASE) 
```

**出去：**

```
['#tag', '#tag'] 
```

# c++ - C++ destroy_tree 指针错误

> ID：14193370
> 
> 赞同：0
> 
> 时间：2013-01-07T09:46:50.440
> 
> 标签：c++, pointers, tree

我在使用 destroy_tree 函数删除 C++ 中的树时遇到问题。编译器说`*** glibc detected *** <path>: free(): invalid pointer: 0x00007f37590d3778 ***`。这是我的`destroy_tree`功能：

```
void Tree::destroy_tree(node** parent) {

if ( (*parent) != NULL ) {

    for (int i=0; i<NUM_ELEMS; i++) {
        destroy_tree( &((*parent)->leaves[i]) );
    }

    if ( (*parent)->zone_id != NULL ) {
        delete (*parent)->zone_id;
        (*parent)->zone_id = NULL;
    }

    delete (*parent);
    (*parent) = NULL;
} 
```

这是结构：

```
struct node {

    int* zone_id;
    node* leaves [NUM_ELEMS];

    node() : leaves() {} //setting all leaves pointers to NULL

}; 
```

指针初始化（在其他函数中）：

```
 (*parent)->leaves[value]->zone_id = new int;
    *((*parent)->leaves[value]->zone_id) = zone_id; 
```

我只是看不出它失败的地方......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T10:54:00.893

试试看..我认为这个“如果”应该包括所有代码不仅递归destroy_tree

```
void Tree::destroy_tree(node** parent) 
{
if ( (*parent) != NULL )  //I think this "if" should be include all code Not only recursion destroy_tree
  {
    for (int i=0; i<NUM_ELEMS; i++) 
    {enter code here
        destroy_tree( &((*parent)->leaves[i]));
    }
   if ( (*parent)->zone_id != NULL )   //the (*parent) should not be NULL
    {
        delete (*parent)->zone_id;
        (*parent)->zone_id = NULL;
    }
    delete (*parent);  //the (*parent) should not be NULL
    (*parent) = NULL;
    }
} 
```

对不起我糟糕的英语

# c - 数组初始化

> ID：14193371
> 
> 赞同：1
> 
> 时间：2013-01-07T09:46:51.580
> 
> 标签：c, arrays

根据建议，我已经修改了代码，但是如何初始化结构中的单个元素？

```
#include<stdio.h>

typedef struct student
{
    int roll_id[10];
    int name_id[10];
} student;

int main()
{
    student p = { {0} };  // if i want to initialize single element ''FIX HERE, PLs'' 
    student *pptr=&p;
    pptr->roll_id[9]={0}; // here is the error pointed 

    printf (" %d\n", pptr->roll_id[7]);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T09:49:09.160

`{0}`仅作为聚合（数组或`struct`）初始化程序有效。

```
int roll_id[10] = {0}; /* OK */
roll_id[0] = 5; /* OK */

int roll_id[10] = 5; /* error */
roll_id[0] = {0}; /* error */ 
```

您似乎想要的是初始化`p`type `struct student`。这是通过嵌套的初始化程序完成的。

```
student p = { {0} }; /* initialize the array inside the struct */ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T09:53:38.010

我可以在您的代码中看到两个错误

```
 #include<stdio.h>

    typedef struct student
    {
    int roll_id[10];

    } student;

    int main()
    {

    student p;
    student *pptr=&p;
    pptr->roll_id[10]={0}; // in this line it should be pptr->roll_id[9]=0;

    printf (" %d\n", pptr->roll_id[7]);

    return 0;
    } 
```

由于数组的长度为 10，因此索引应为 9，并且您只能在数组初始化时使用 {0}。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T12:16:45.320

如下用于单个数组元素初始化：

```
 pptr->roll_id[x] = 8 ; // here x is the which element you want to initialize. 
```

如下用于整个数组初始化：

```
student p[] = {{10, 20, 30}};//just example for size 3.
student *pptr = p;
for (i = 0 ; i < 3; i++)
    printf ("%d\n", pptr->roll_id[i]); 
```

# php - 需要使用 php 在磁盘上保存远程文件

> ID：14193375
> 
> 赞同：0
> 
> 时间：2013-01-07T09:47:17.260
> 
> 标签：php, curl, save

您好我正在尝试使用php将文件保存在磁盘上，当我将文件的地址复制到“Location”变量中时它可以工作，但是当我使用javascript函数传递值时它不会。我想问题是因为空白或类似问题，但不知道如何解决。

```
function upload(location){
if (window.XMLHttpRequest)
            {// code for IE7+, Firefox, Chrome, Opera, Safari
                xmlhttp=new XMLHttpRequest();
            }
            else
            {// code for IE6, IE5
                xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
            }
            xmlhttp.onreadystatechange=function()
            {
                if (xmlhttp.readyState==4 && xmlhttp.status==200)
                {
                    document.getElementById("myOutput").innerHTML="done";
                }
            }
            xmlhttp.open("GET","SaveFiles.php?a="+location,true);
            xmlhttp.send();
    } 
```

```
 if(isset($_GET["a"]))
   {
     $Location = $_GET["a"];
     FileFunc($Location);
   }

 function FileFunc($Location){

     // $Location = "http://www.xxx.com/1.jpg"; <<When I uncomment this line it works
     $ch = curl_init();
     curl_setopt($ch, CURLOPT_URL, $Location);
     curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
     $myFile = curl_exec($ch);
     curl_close($ch);
     $file = 'myFile.jpg';
     file_put_contents($file, $myFile);
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T10:09:17.150

您必须将服务器主机添加到您的 curl 地址

```
 function FileFunc($Location){

  $Location = $_SERVER['HTTP_HOST']."/".$Location;
 $ch = curl_init();
 curl_setopt($ch, CURLOPT_URL, $Location);
 curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
 $myFile = curl_exec($ch);
 curl_close($ch);
    $file = 'myFile.jpg';
 file_put_contents($file, $myFile);
} 
```

# android - 应用程序启动 Android 时显式启动 GCM 服务

> ID：14193381
> 
> 赞同：0
> 
> 时间：2013-01-07T09:47:58.157
> 
> 标签：android, google-cloud-messaging

有没有办法明确启动谷歌云消息服务。显然一段时间后（4 到 5 小时后）我的应用程序停止接收来自 GCM 的任何消息。如果我转到应用程序并检查正在运行的应用程序选项卡，我将无法再在我的应用程序中看到消息服务。这是正常的吗？

此外，我认为 GCM 是推送通知最不可靠的服务。我多次遇到无法发送通知的问题，但如果我启动应用程序，我就会开始接收通知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T00:06:22.247

我认为只有两种可能：

*   GCM 已关闭（不太可能）
*   您的服务器未将消息发送到正确的设备
    *   要么是因为它根本不发送消息
    *   或者因为 GCM 更改了注册 ID，而您的应用程序未能正确处理此问题（但如果您遵循 SDK 中的示例，则应该如此）

# html - CSS反转整个网站（镜像效果）

> ID：14193382
> 
> 赞同：8
> 
> 时间：2013-01-07T09:47:59.057
> 
> 标签：html, css, internationalization, multilingual, right-to-left

我正在建立一个多语言网站。一些语言（如希伯来语）从右到左阅读。除了实际文本之外，这些用户还习惯于将导航和其他视觉线索颠倒过来。

例如，顶部的主菜单将向右对齐。“后退”按钮将指向前方，徽标在右上角而不是左上角等。

一种解决方案当然是创建一个全新的设计，但这意味着我必须维护 2 个模板。不理想。

我只是在想，是否有可能在 CSS 中翻转整个设计？喜欢照镜子吗？

如果这看起来很牵强，我也愿意接受更好的解决方案。

使用的技术：PHP、Yii、Less.css、jQuery

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-07T11:00:45.610

可以完全按照您的描述翻转整个网站，但几行 CSS 请参见此处：http: [//jsbin.com/aduqeq/5/edit](http://jsbin.com/aduqeq/5/edit)

CSS：

```
body { 
        margin: 0 auto;
        width: 300px;
        -moz-transform: scaleX(-1);
        -o-transform: scaleX(-1);
        -webkit-transform: scaleX(-1);
        transform: scaleX(-1);
        filter: FlipH;
        -ms-filter: "FlipH";
      } 
```

然而，这种方法有一些缺点：

1) 虽然它在 Firefox + Chrome 中运行良好，但它只能在 IE8+ 中运行（文本在 IE 中对我来说看起来很奇怪）预计支持有点不完整（这是一个新的 CSS3 功能）

2）这里有明显的语义劣势

3) 有些人似乎对供应商前缀感兴趣

总体而言，在 body 上使用 RTL 并使用不同的样式表可能是一个更好的选择，即使它对您来说更麻烦，最终用户会获得更好的体验（不幸的是，我们想要的快速修复并不总是可用）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-07T09:51:00.963

许多网站由菜单栏和内容区域组成。这些通常是翻转的主要重点领域。使用 3 行 CSS 应该很容易：

```
html[dir="rtl"] #menu {
    float: right;
} 
```

这个相同的 CSS 代码可以很容易地适应其他应该移动的区域。真的不需要维护 2 套模板，除非你硬编码坐标（无论如何这是一个坏主意）。

当然，一定要设置`<html dir="rtl">`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-07T11:48:09.670

```
html {
  direction:rtl;
} 
```

这会将页面上的所有内容从右到左反转。您需要为页面中的每个元素进行调整。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-07T12:16:04.283

MediaWiki 是为数百种语言提供支持的软件，它的开发人员开发了一个名为 CSSJanus 的工具，它可以巧妙地将你的 CSS 动态翻转为从右到左的语言：

[https://github.com/cssjanus](https://github.com/cssjanus)

这成功地用于从右到左语言的维基百科，因此它们几乎不需要重复维护 CSS。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-07T09:50:35.090

你可以试试：

```
body {
  direction:rtl;
} 
```

但这只会为您提供一个起点...

希望能帮助到你。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-01-18T09:31:43.283

您可以使用 Seandunwoody 他的答案翻转整个网站，但这也会反转文本、图标和图像等。如果您将您的内容放入2`<p>`和`<h1>`3 个标签中，而您没有将它们放入彼此中（所以 no `<p><p></p></p>`），您可以像这样应用 css：

```
body,p,h1,h2,h3 { 
    margin: 0 auto;
    width: 300px;
    -moz-transform: scaleX(-1);
    -o-transform: scaleX(-1);
    -webkit-transform: scaleX(-1);
    transform: scaleX(-1);
    filter: FlipH;
    -ms-filter: "FlipH";
  } 
```

它所做的基本上是双重镜像技巧，它镜像整个网站，然后将包含您的文本和图像的所有小段落和标题镜像回原始方向，但仍处于反向网站的位置。

哈克但它有效（虽然在 IE 上不太好）。

*您还需要`dir='rtl'`在`html`or`body`标记中添加 ，以确保文本向右对齐并且希伯来语反转（英语字符将保持从左到右但向右对齐）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-02-13T00:48:18.493

我同意肖恩的回答，它确实有效！但是有一点我想提一下：他需要去掉“margin”和“width”，以使页面更具可读性，但仍然可以翻转。

```
body { -moz-transform: scaleX(-1); -o-transform: scaleX(-1); -webkit-transform: scaleX(-1); transform: scaleX(-1); filter: FlipH; -ms-filter: "FlipH"; } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-01-14T09:37:14.650

有一个很棒的魔术工具叫做[rtlcss](https://rtlcss.com/) TLDR；很久以前，我做了以下事情： 1\. 如果一个元素有`direction:rtl`-> 删除它 2\. 如果一个元素没有`direction:rtl`-> 在大多数情况下添加一个，添加`direction:rtl`到`body` 4\. 如果元素有`align:right/left' -> switch left/right 5\. if element has`margin-right/left ` -> 左/右切换

未处理的限制： 1\. 静态放置的元素可能不会正确放置 2\. 相对放置可能不会正确放置 3\. 应注意 HTML 中的样式（如果存在，建议移入 CSS）

如果您打算使用**查找和替换**，请小心，因为`right`&`left`可以在神秘的地方找到。
例如`.copyright { ... }`可以变成`.copyleft { ... }`

今天搜索（2018 年 1 月），我发现这个很棒的工具可以为您完成以上所有工作： [看看 RTLCSS 网站](https://rtlcss.com/)

我将它用作命令行，因为我需要对我曾经拥有的库 CSS 进行 RTL，但它可以捆绑在您的构建步骤中。

# android - 将 WiFi 设置共享为 WPA2 Enterprise 的 QR 码

> ID：14193383
> 
> 赞同：28
> 
> 时间：2013-01-07T09:48:00.817
> 
> 标签：android, wifi, qr-code

我发现了几个描述用于描述 WiFi 访问设置的字符串格式的来源，其形式为：

```
WIFI:T:WPA;S:mynetwork;P:mypass;; 
```

（示例取自[zxing 文档](https://code.google.com/p/zxing/wiki/BarcodeContents#Wifi_Network_config_%28Android%29)）

对于基本的 WPA 连接，这在我使用[Zxing-Barcode-Scanner-App 的](https://code.google.com/p/zxing/)Android 设备上运行良好。但是，我一直无法找到将 WPA2/EAP 连接设置（也称为 WPA2 企业版）嵌入可扫描二维码的方法。正如我所料，在随机位置插入“L”（登录名）、“N”（姓名）或“I”（身份）参数并没有真正带来任何进步。

这里有没有人成功地将 WiFi 连接设置“嵌入”到二维可扫描代码中以与 Android 设备一起使用？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2020-03-09T17:51:33.053

[我在zxing](https://github.com/zxing/zxing)库项目的 github 页面的以下拉取请求中找到了有关如何格式化 WiFi 配置字符串的一些信息： [https ://github.com/zxing/zxing/pull/865](https://github.com/zxing/zxing/pull/865)

第一篇文章包含一个字符串格式的模板，包括一个错误（前缀`AI:`错误，必须阅读`A:`，看[这里](https://github.com/zxing/zxing/blob/2e2b5ba757b6cbc2fdeaaa0ed6dcdd794abb5b2e/core/src/main/java/com/google/zxing/client/result/WifiResultParser.java)）。因此，根据[来源](https://github.com/zxing/zxing/blob/2e2b5ba757b6cbc2fdeaaa0ed6dcdd794abb5b2e/core/src/main/java/com/google/zxing/client/result/WifiResultParser.java)的正确格式是：

```
WIFI:T:WPA2-EAP;S:[network SSID];H:[hidden?];E:[EAP method];PH2:[Phase 2 method];A:[anonymous identity];I:[username];P:[password];; 
```

当我尝试这个（使用命令行工具[qrencode](https://www.unix.com/man-page/debian/1/QRENCODE/)）时，我的[Barcode Scanner](https://play.google.com/store/apps/details?id=com.google.zxing.client.android&hl=en)应用程序崩溃了。经过反复试验，我发现隐藏 SSID 的选项可以省略：

```
WIFI:T:WPA2-EAP;S:[network SSID];E:[EAP method];PH2:[Phase 2 method];A:[anonymous identity];I:[username];P:[password];; 
```

有了这个，我在 Android 8 的已知无线网络列表中得到了一个工作条目。

截至目前，不支持声明证书和相应的域。如果需要，可以稍后通过从 Android 的 WiFi 菜单中调整设置来指定它。

# c# - 如何从 C# 中获取 Windows 资源管理器的选定文件？

> ID：14193388
> 
> 赞同：11
> 
> 时间：2013-01-07T09:48:26.507
> 
> 标签：c#, windows-shell

我需要获取在 Windows 资源管理器中选择的当前文件集合。[我从这里](https://stackoverflow.com/questions/8292953/get-current-selection-in-windowsexplorer-from-a-c-sharp-application "这里")找到了以下代码。

不过，我并不完全在那里。一方面，`GetForegroundWindow`从哪里来？另一方面，编译器在线抱怨

```
var shell = new Shell32.Shell(); 
```

说

> “找不到类型或命名空间名称‘Shell32’（您是否缺少 using 指令或程序集引用？）”。我添加了 SHDocVw 作为参考，但我仍然无法通过编译器。有人可以帮我完成这个吗？

```
 IntPtr handle = GetForegroundWindow();

    ArrayList selected = new ArrayList();
    var shell = new Shell32.Shell();
    foreach(SHDocVw.InternetExplorer window in shell.Windows()) {
        if (window.HWND == (int)handle)
        {
            Shell32.FolderItems items = ((Shell32.IShellFolderViewDual2)window.Document).SelectedItems();
            foreach(Shell32.FolderItem item in items)
            {
                selected.Add(item.Path);
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-07T10:38:51.310

您不需要获取（资源管理器的）句柄。

在项目的参考资料中添加在该`COM`部分中找到的这些参考资料。需要引用 SHDocVw，它是`Microsoft Internet Controls`COM 对象和`Shell32`，它是 Microsoft Shell 控件和自动化 COM 对象。

然后添加您的：

```
using System.Collections;
using Shell32;
using System.IO; 
```

然后这将起作用：

```
 string filename;  
      ArrayList selected = new ArrayList();
      foreach (SHDocVw.InternetExplorer window in new SHDocVw.ShellWindows())
      {
        filename = Path.GetFileNameWithoutExtension(window.FullName).ToLower();
        if (filename.ToLowerInvariant() == "explorer")
        {
          Shell32.FolderItems items = ((Shell32.IShellFolderViewDual2)window.Document).SelectedItems();
          foreach (Shell32.FolderItem item in items)
          {
            selected.Add(item.Path);
          }
        }
      } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T09:54:17.393

GetForegroundWindow 是一个 Win32 API 函数，要使用它，您需要按照此处的说明导入它： [getforegroundwindow (user32)](http://www.pinvoke.net/default.aspx/user32.getforegroundwindow)

Shell32 在这里描述：

[在 C# 中使用 shell 32](https://stackoverflow.com/questions/5708434/working-with-shell-32-in-c-sharp)

最后，我不知道你的任务，但通常如果需要选择一些文件并访问此集合，则需要使用[FileOpenDialog](http://msdn.microsoft.com/en-us/library/system.windows.forms.openfiledialog.aspx)

# java - Java 在 OutOfMemoryError 之前清空缓存

> ID：14193389
> 
> 赞同：2
> 
> 时间：2013-01-07T09:48:41.327
> 
> 标签：java, caching, memory-management, garbage-collection, jvm

是否有可靠的方法在内存满之前清空缓存？或者根据当前可用的“实际”空闲内存（硬引用对象）更好地限制缓存？

由于高 GC 惩罚，软引用缓存不是一个好主意，一旦达到限制，所有缓存条目都需要重新加载。

此外`runtime.freeMemory()`，对于我的目的，该值也不是那么可靠，因为即使它太低，在下一个 GC 周期之后可能会有足够的可用空间，因此它不能很好地指示实际使用的内存。

我试图弄清楚每个原始时间会消耗多少内存，因此我会知道缓存的实际内存使用情况并对其进行限制，但找不到可靠的方法来确定将使用多少内存来存储大小为 n 的字符串引用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T17:37:00.507

试试最近的 Oracle 1.7 版本之一。他们应该提供 GarbageCollectorMXBean 和 GarbageCollectionNotificationInfo。使用它来监控每个 GC 周期后已使用/未使用的内存量。[这里](http://www.fasterj.com/articles/gcnotifs.shtml)有一些示例代码。然后，您可以按照 Peter 的建议在内存紧张时使用多级缓存来清除外部级别，但保留较小的一级缓存。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T10:00:33.460

收藏两三个。如果您想要降低内存可用性的服务，您可以拥有。

*   最近条目的映射，例如 LinkedHashMap。
*   软参考地图。
*   弱引用图。

您可以控制每个映射的大小，因为弱引用可以在次要收集后清除，软引用将在需要时清除，强引用映射具有始终保留的核心数据。

顺便说一句：如果您经常达到内存限制，您应该考虑购买更多内存，每个 JVM 最多约 32 GB。您可以以不到 200 美元的价格购买 32 GB。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T10:05:04.847

我建议最简单的解决方案是将您的引用更改为弱引用。这样，当所有强引用都超出范围时，引用仍然可以完成并被垃圾收集。

请参阅：[http ://docs.oracle.com/javase/1.5.0/docs/api/java/lang/ref/WeakReference.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/ref/WeakReference.html)

# c# - NHibernate SysCache2 和查询缓存 - 无法避免 Select N+1？

> ID：14193392
> 
> 赞同：2
> 
> 时间：2013-01-07T09:48:53.137
> 
> 标签：c#, nhibernate, syscache2

我正在使用具有 Fluent NHibernate 的二级缓存提供程序 SysCache2，使用标准的 fluent 配置（启用查询缓存，这似乎是一般建议），并以通常的方式定义了基于表的依赖项。

流利：

```
config.Cache(c => c
 .ProviderClass<NHibernate.Caches.SysCache2.SysCacheProvider>()
 .UseQueryCache()
 .UseSecondLevelCache()
 .UseMinimalPuts() 
```

)

网络配置：

```
 <cacheRegion name="User" relativeExpiration="7200">
<dependencies>
  <tables>
    <add name="User" databaseEntryName="OldClient" tableName="tbl_users" />
  </tables>
</dependencies> 
```

用户映射：

```
public class UserMap : ClassMap<User>
{
    public UserMap()
    {
        Table("Users");
        ....
        // caching
        Cache.IncludeAll().ReadWrite().Region("Users");
    }
} 
```

对于单个请求，一切都按预期运行，即：

```
Session<User>.Get() 
```

[正如NHibernate 按 ID 缓存](http://ayende.com/blog/3988/nhibernate-the-difference-between-get-load-and-querying-by-id)的方式所预期的那样。后续请求不会命中数据库，而使数据库中的记录失效会导致Entity失效，从而导致在下一次请求期间进行后续SQL调用。一切都好。

问题在于查询缓存。首先，一切正常。执行调用，例如：

```
Session<User>.Query(item => item.Active == true) 
```

如您所料那样导致 SQL 调用（SELECT * FROM Users WHERE Active = true）。随后的执行不会导致 SQL。伟大的。直到查询集中的一条记录在数据库中发生更改。执行相同的查询会产生一个 SELECT N+1：

```
SELECT * FROM Users WHERE ID = 1
SELECT * FROM Users WHERE ID = 2
SELECT * FROM Users WHERE ID = 3
SELECT * FROM Users WHERE ID = 4
... 
```

我在其他地方找到了对此的参考，尽管没有解决方案：

[StackOverflow - 如何使 NHibernate 缓存获取子集合？](https://stackoverflow.com/questions/8761249/how-do-i-make-nhibernate-cache-fetched-child-collections)请参阅“多一点”部分

[Ayende Caching Strategies](http://ayende.com/blog/4046/nhibernate-beware-of-inadvisably-applied-caching-strategies)他提到确保最后“实体也被缓存”

目前我可以避免这种情况的唯一方法是在每次请求后清除查询缓存——这几乎使它无用。当某个实体无效时，我需要查询缓存来清除该实体的所有内容——而不仅仅是单个记录。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T10:21:41.367

根据您发布的两个链接，查询缓存缓存了查询产生的 ID，并开始一个一个地获取实体：如果您的缓存中有它们，那很好，如果没有，那么运气不好，您现在有很多选择。

在这一点上，我假设您选择的实体不在二级缓存中（不再？）。我从未使用过基于表的依赖项，我们使用的是[基于命令的依赖](http://nhforge.org/doc/nh/en/index.html#d0e13990)项，我只是测试了如果一个实体被标记为无效，那么只有这个缓存的实体，而不是整个缓存区域，会被抛出缓存。

检查配置以确保它是正确的，也许当您认为您正在访问二级缓存时，您实际上正在访问会话缓存？确保您正在测试缓存是否*在*不同的会话中工作。

无论如何，我建议您查看 NHibernate 的 DEBUG 级别日志并查看二级缓存实际发生的情况，您将能够看到所有缓存命中/未命中。我可以给您的另一个提示是在您的配置中启用 generate_statistics 标志。流利：

```
config.ExposeConfiguration(c => c.SetProperty("generate_statistics", "true")); 
```

在此之后，您可以访问会话工厂中的有趣数据，例如`Session.SessionFactory.Statistics.SecondLevelCacheMissCount`和`Session.SessionFactory.Statistics.SecondLevelCacheHitCount`。结合这两种方法，您应该能够查明问题的原因。

# android - 如何识别按钮的引用

> ID：14193394
> 
> 赞同：1
> 
> 时间：2013-01-07T09:48:57.117
> 
> 标签：android, android-button

在java中，以这种方式创建按钮后：

```
Button button1= new Button(); 
```

我可以通过这种方式识别按钮的引用

```
public void actionPerformed(ActionEvent bottonName){            
            Button name_of_the_button= (Button)bottonName.getSource();
                    //Inside 'name_of_the_button' I have 'button1'
} 
```

我怎么能在android上做同样的事情？我试过这种方式

```
 public void onClick(View bottonName) {
            Button name_of_the_button= (Button )bottonName.getSource();
} 
```

但是在 android 上没有 getSource() 方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T09:52:57.057

```
Button name_of_the_button = (Button)findViewById(R.id.my_btn); 
```

然后

```
name_of_the_button.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

            if (v.getId() == R.id.my_btn) {

                              // button action here

            }

        }
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T09:55:58.887

您可以检查如下：

```
Button button1= new Button();

button1.setOnClickListener(this);    

@Override
    public void onClick(View view) {
        // TODO Auto-generated method stub
        if (view.getId() == button1.getId())
        {
            //Perform something
        }

    } 
```

所以两个 id 都将匹配（单击按钮的 id 和您通过 Java 代码创建的一个）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T09:51:31.160

```
Button but1 = (Button)findViewById(R.id.button1); within the onCreate of your layout 
```

听者紧随其后

```
but1.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View v) {

        if (v.getId() == R.id.but1) {

                          // your code here

        }

    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T09:52:48.680

首先，`Android != Corejava`. 为了让您的方法正常工作，您需要`android:onClick = "buttonClick"`在 xml 中为您的按钮定义 onClick by。

那么您的 onClick 方法将是

```
public void onClick(View view)
{
 Button button = (Button)view; // here is the reference.
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-07T09:55:44.407

创建一个按钮，然后将其添加`main layout`为子项，然后`click listener`在该按钮上设置

```
Button buyButton = new Button(this);
    buyButton.setText(R.string.button_back);
    buyButton.setLayoutParams(new LayoutParams(
        ViewGroup.LayoutParams.WRAP_CONTENT,
            ViewGroup.LayoutParams.WRAP_CONTENT));
    layout.addView(buyButton);
buyButton.setOnClickListener(new OnClickListener() {
                public void onClick(View v) {
// Do What you want on click

}}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-07T09:58:12.707

在android中，一个View在屏幕上占据一个矩形区域，负责绘图和事件处理。View 是小部件的基类，用于创建交互式 UI 组件（按钮、文本字段等）。因此，要调用按钮，您必须先声明按钮

```
Button nameButton = (Button)findViewById(R.id.buttononyourXML); 
```

或者您可以使用以编程方式创建它

```
ViewGroup linearLayout = (ViewGroup) findViewById(R.id.yourLinear);
Button btn = new Button(this);
btn.setText("A Button");
btn.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));
linerLayout.addView(btn); 
```

然后根据您需要的方法添加一个监听器

这是你的选择..

干杯

# jsf-2 - 在 encodeBegin 中创建的 JSF 组件在解码中不可见

> ID：14193397
> 
> 赞同：2
> 
> 时间：2013-01-07T09:48:59.640
> 
> 标签：jsf-2, primefaces, custom-component

> **可能重复：**
> [未调用自定义组件操作侦听器中的 Primefaces commandButton](https://stackoverflow.com/questions/14176501/primefaces-commandbutton-in-custom-component-action-listener-not-called)

我创建了扩展的自定义组件`UIComponentBase`。我正在`encodeBegin`（`CommandButton`来自 Primefaces）中创建一些组件，但是当`decode`我在查找按钮时由用户单击按钮触发时，它既不存在也不存在`UIViewRoot`于`this.getChildren()`.

似乎它是在`decode`触发并且组件不存在时调用的组件的新实例。怎么了？

一些代码在： [代码](https://stackoverflow.com/questions/14176501/primefaces-commandbutton-in-custom-component-action-listener-not-called)

如果你愿意，我可以发送整个代码。

* * *

我发现 PrimeFaces 和其他软件中使用了这种技术，但是你能解释一下为什么从 getStateHelper().eval("someKey"); 中检索到的值吗？解码时总是为空？

可能是我网站上的问题，但我无法解决？

这是我开始的线程的链接：

[问题描述更详细](https://stackoverflow.com/questions/14176501/primefaces-commandbutton-in-custom-component-action-listener-not-called)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T12:04:37.100

# android - 使用什么基于 Ruby 的移动跨平台解决方案？

> ID：14193400
> 
> 赞同：16
> 
> 时间：2013-01-07T09:49:10.220
> 
> 标签：android, ios, ruby, cross-platform

我正在寻找使用 Ruby 进行移动跨平台开发的方法。我们至少需要对 Android 和 iOS 的支持，以及对 Windows Phone 和 Blackberry 的支持。这将是一款最终会出现在面向公众的应用商店中的应用，因此它不仅仅是企业内部的事情。到目前为止，我发现：

*   [Rhodes](http://www.motorola.com/Business/US-EN/RhoMobile+Suite/Rhodes)，涵盖了所有提到的平台和开源平台。我们现在不需要 RhoMobile 的额外（付费）功能
*   [红宝石运动](http://www.rubymotion.com/)；仅限 iOS，售价 199 美元，遗憾的是没有可用的试用版
*   [Ruboto](http://ruboto.org/)，仅限 Android 和开源
*   [MobiRuby](http://mobiruby.org/)，iOS 仅计划支持 Android，开源，但在撰写本文时看起来还不够成熟，无法满足我们的需求

我们还有一个必备用例，我们需要同时访问相机和加速度计，并从屏幕上的加速度计中提取数据。因为这是非常具体的，所以我看过的任何跨平台框架（包括 Phonegap、Titanium 等其他框架）都不支持它，看起来我需要为每个平台编写本机代码才能让它工作。

到目前为止，我倾向于选择罗德。这是一个经过验证的框架，似乎能够做我需要的一切，包括上述用例的“原生化”。另一种选择是同时使用 RubyMotion 和 Ruboto，它们都是编写 Ruby 而不是 Objective-C 或 Java 的解决方案。从理论上讲，我应该能够跨平台共享通用代码（如连接和存储），尽管我找不到任何成功使用这两个代码编写适用于 Android 和 iOS 的应用程序的示例。

我想知道是否有人可以证实我的想法或者我忽略了一些东西。当然，欢迎任何其他见解。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T09:17:38.143

如果您选择 Ruboto，您可以按原样使用与 UI 无关的 Ruby 代码。无论如何，UI 代码很可能是平台相关的。

Ruboto 还很年轻，但有更多的项目开始使用它。一个例子是

[https://play.google.com/store/apps/details?id=com.jonsoft.globalchat](https://play.google.com/store/apps/details?id=com.jonsoft.globalchat)

它跨平台共享通信 Ruby 代码。

作为 Ruboto 项目的开发人员之一，我可以向您保证良好的支持和完整的 Ruby 体验。

对于 iOS RubyMotion 看起来不错，但我没有使用它。您应该能够为公共逻辑使用共享代码库，但为 UI 和访问传感器使用单独的代码库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T00:54:06.570

我会继续为 Android 使用原生 Java，为 iOS 使用 RubyMotion，并拥有两个代码库。RubyMotion 是您提到的最稳定的，并且值得用于 iOS 开发，但在 Android 平台上没有很好的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T00:15:18.840

Rhodes has nothing do with web apps. Rhodes allows you to build native apps with Ruby and is many years more mature than those alternatives. It also supports every major smartphone OS

# jquery - 在 fancybox 上将自动播放设置为 false/true

> ID：14193404
> 
> 赞同：3
> 
> 时间：2013-01-07T09:49:23.637
> 
> 标签：jquery, fancybox

我有一个图片库。

```
jQuery("a.thumb").fancybox({
  "loop"        : true,
  "autoPlay"    : true,
  "playSpeed"   : 4000,
  "nextSpeed"   : 500,
  "prevSpeed"   : 500,
  "openSpeed"   : 500,
  "speedOut"    : 500,
  "openEffect"  : "fade", 
  "closeEffect" : "fade",
  "nextEffect"  : "fade",
  "prevEffect"  : "fade"
}); 
```

我想添加一个新按钮来将自动播放设置为 false/true 可以吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T09:59:07.623

另一种方法：

假设您的 html 中有 id="chkFlag" 的复选框。

```
var flag="";
$('#chkFlag').live("change", function() {
       if ($('#chkShowImage').attr("checked"))
             flag = true;
        else
             flag = false ;

      }); 
```

并在您的函数中使用标志：

```
 jQuery("a.thumb").fancybox({        
            'loop'              : true,
            'autoPlay'          : flag,
            'playSpeed'         : 4000,
            'nextSpeed'         : 500,
            'prevSpeed'         : 500,
            'openSpeed'         : 500,
            'speedOut'          : 500,
            'openEffect'        : 'fade', 
            'closeEffect'       : 'fade',
            'nextEffect'        : 'fade',
            'prevEffect'        : 'fade'
             }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T14:15:58.780

[**带有自动播放显示按钮的 jsFiddle DEMO 标题栏**](http://jsfiddle.net/GjNnj/1/) *（用于视觉确认的备用图像）*

[**带有自动播放显示按钮的 jsFiddle DEMO 标题覆盖**](http://jsfiddle.net/GjNnj/3/)

您可以在 Fancybox 标题区域内放置一个按钮，单击该按钮将停止或播放 Fancybox 节目。它还将进行图像交换以直观地指示当前的播放模式。

***上面的 jsFiddle DEMO 包含完整的教程注释。***

**CSS：**

```
.fancyControl {
  float: right;
  margin-left: 20px;
} 
```

**jQuery：**

```
var fancyControlMode = "play";

function fancyPlay(){
  $.fancybox.play();
  $('.fancybox-title .child img').attr('src', 'http://placehold.it/40x24/00ff00/000000&text=PLAY');
  fancyControlMode = "play";
}

function fancyStop(){
  $.fancybox.play();
  $('.fancybox-title .child img').attr('src', 'http://placehold.it/40x24/ff0000/000000&text=STOP');
  fancyControlMode = "stop";
}

function fancyButton() {
  if (fancyControlMode === "play") {
    $('.fancybox-title .child').prepend('<img class="fancyControl" src="http://placehold.it/40x24/00ff00/000000&text=PLAY" />');
    $('.fancyControl').toggle(fancyStop, fancyPlay);
  } else {
    $('.fancybox-title .child').prepend('<img class="fancyControl" src="http://placehold.it/40x24/ff0000/000000&text=STOP" />');
    $('.fancyControl').toggle(fancyPlay, fancyStop);
  }
}

$(".fancybox").fancybox({
  autoPlay: true,
  afterShow: fancyButton
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-17T22:04:09.347

@arttonics，我对你的 fancyBox 精通感到震惊。这是另一种方式：

与@JFK 链接的问题不同，@Xone 您并没有说您需要按钮位于标题区域甚至灯箱框架内。您可能会对用 fancyBox 打包的“按钮”助手感到满意。它提供了一个带有“prev”、“play/pause”、“next”、“full-size”/“fit”和“close”按钮的按钮栏。只需添加

```
<script type="text/javascript" src="your-path-to/fancybox/helpers/jquery.fancybox-buttons.js"></script> 
```

（就在之前`</body>`）和

```
<link rel="stylesheet" type="text/css" href="your-path-to/fancybox/helpers/jquery.fancybox-buttons.css"/> 
```

（在`<head>`; 我使用的占位符路径反映了下载 fancyBox 时文件的位置）。

您的带有自动播放和控制按钮的基本 fancyBox 画廊将是

```
$(".fancybox-button").fancybox({
    autoPlay    : true,
    closeBtn    : false, // remove the default close button (there's one in the button bar)
    arrows      : false, // (optional) remove the default prev/next hover arrows (they duplicate the button bar's arrows)
    helpers     : {
        buttons : {} // add the buttons bar
    }
}); 
```

如果你对 CSS 没问题，自定义这些按钮应该很简单——感谢@fancyapps 使 jquery.fancybox-buttons.css 可读！我可以想象你也可能最终进入 jquery.fancybox-buttons.js 来调整`<div id="fancybox-buttons">`它注入的内容。

# sql - sql server 获取最小时间？

> ID：14193407
> 
> 赞同：1
> 
> 时间：2013-01-07T09:49:54.900
> 
> 标签：sql, sql-server-2008, datetime, max, min

这里的问题，

我有一个名为`attendance`4 列的表：

```
[Username] varchar(256)
[Date] varchar(256)
[Time] varchar(256)
[Action] varchar(256) 
```

我希望实现的是获得第一次入住和退房时间和最后一次入住和退房时间。如果表中只有一个签入和签出行，则返回相同。

样例数据如下：

```
Username | Date       | Time     | Action
--------------------------------------------
User1    | 01/12/2012 | 12:54:41 | Check In
User1    | 01/12/2012 | 18:26:36 | Check Out
User1    | 01/12/2012 | 18:44:17 | Check In
User1    | 01/12/2012 | 22:05:31 | Check Out 
```

我的预期结果如下所示：

```
Output:
Username | Date       | First In | First Out | Last In  | Last Out
User1    | 01/12/2012 | 12:54:41 | 18:26:36  | 18:44:17 | 22:05:31 
```

我试过这个 SQL 语句：

```
SELECT [USERNAME], [DATE]
, min(case when [action] = 'Clock In' then [time] else '' end) as 'First in'
, min(case when [action] = 'Clock Out' then [time] else '' end )as 'First out'
, max(case when [action] = 'Clock In' then [time] else '' end) as 'Last in'
, max(case when [action] = 'Clock Out' then [time] else '' end )as 'Last out'
FROM attendance
WHERE [USERNAME] = 'User1' AND [DATE] = '01/12/2012'
group by [username],[date] 
```

它返回意外结果，即我的最小值始终为“”或为空，但我的最大值“后进”和“后出”均处于正确值。

```
Output:
Username | Date       | First In | First Out | Last In  | Last Out
User1    | 01/12/2012 |          |           | 18:44:17 | 22:05:31 
```

我的 SQL 有什么问题吗？

任何人都可以提出任何建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T10:15:07.870

我会这样做略有不同使用`row_number()`：

```
select username, date,
  max(case when [action] = 'Check In' and rn=1 then time end) FirstIn,
  max(case when [action] = 'Check Out' and rn=1 then time end) FirstOut,
  max(case when [action] = 'Check In' and rn=2 then time end) LastIn,
  max(case when [action] = 'Check Out' and rn=2 then time end) LastOut
from
(
  select username, cast(date as date) date, 
    cast(time as time) time, 
    action,
    row_number() 
      over(partition by username, cast(date as date), action
           order by cast(time as time)) rn
  from attendance
) src
group by username, date; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/4bf82/19)

结果是：

```
| USERNAME |       DATE |          FIRSTIN |         FIRSTOUT |           LASTIN |          LASTOUT |
-----------------------------------------------------------------------------------------------------
|    User1 | 2012-01-12 | 12:54:41.0000000 | 18:26:36.0000000 | 18:44:17.0000000 | 22:05:31.0000000 | 
```

我强烈建议您将`date`and存储`time`为`datetime`数据类型。

*注意：*我将值从`Clock In`/更改`Clock Out`为`Check In`/`Check Out`以匹配您提供的示例数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T10:08:55.277

试试这个：

```
SELECT [USERNAME], [DATE]
, min(case when [action] = 'Clock In' then [time]  end) as 'First in'
, min(case when [action] = 'Clock Out' then [time] end )as 'First out'
, max(case when [action] = 'Clock In' then [time] end) as 'Last in'
, max(case when [action] = 'Clock Out' then [time] end )as 'Last out'
FROM attendance
WHERE [USERNAME] = 'User1' AND [DATE] = '01/12/2012'
group by [username],[date] 
```

你明白问题出在哪里了吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T10:13:47.400

我的解决方案是创建一个存储过程：

```
DECLARE @first_in VARCHAR, @first_out VARCHAR, @last_in VARCHAR, @last_out VARCHAR
BEGIN
SELECT TOP 1
     @first_in = time
FROM attendance
WHERE [USERNAME] = 'User1' AND [DATE] = '01/12/2012' AND [ACTION] = 'first in'
ORDER BY time ASC

SELECT TOP 1
     @first_in = time
FROM attendance
WHERE [USERNAME] = 'User1' AND [DATE] = '01/12/2012' AND [ACTION] = 'first out'
ORDER BY time ASC

SELECT TOP 1
     @last_in = time
FROM attendance
WHERE [USERNAME] = 'User1' AND [DATE] = '01/12/2012' AND [ACTION] = 'first in'
ORDER BY time DESC

SELECT TOP 1
     @last_out = time
FROM attendance
WHERE [USERNAME] = 'User1' AND [DATE] = '01/12/2012' AND [ACTION] = 'first out'
ORDER BY time DESC

SELECT 'User1','01/12/2012', @first_in, @first_out, @last_in, @last_out
END 
```

# oracle - oracle如何清空表

> ID：14193413
> 
> 赞同：0
> 
> 时间：2013-01-07T09:50:05.780
> 
> 标签：oracle, duplicates, delete-row, oracle8i

我在 Oracle 8,1 中有数据表。大约有一百万行。但是很多行被相同的列重复。我需要知道清除这些数据的最快方法。例如我有：

```
id name surname date
21 'john' 'smith' '2012 12 12'; 
21 'john' 'smith' '2012 12 13';
21 'john' 'smith' '2012 12 14';
.... 
```

现在我需要删除前两行，因为它们与前三列重复，并保留最新日期的行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T10:15:30.787

如果确实有很多重复项，我建议仅使用干净数据重新创建表：

```
CREATE TABLE tmp AS 
SELECT id, name, surname, max(d) as d
   FROM t
  GROUP BY id, name, surname; 
```

然后用原表替换原表：

```
RENAME your_table TO old_table;
RENAME tmp_table TO your_table; 
```

不要忘记移动索引、约束和权限...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T10:03:20.093

```
delete from table t where
exists (select * from table where id=t.id and name=t.name and surname=t.surname
        and date > t.date) 
```

这有多快取决于您的 Oracle 参数。(id,name,surname) 上的索引可能会有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T10:09:27.323

如果可能的话，我会选择 CTAS（创建表作为选择），截断原始表，然后将数据复制回来：

```
-- create the temp table (it contains only the latest values for a given (id, name, surname) triple
CREATE TABLE tmp as 
SELECT id, name, surname, date1 from 
(select 
  t1.*, 
  row_number() over (partition by id, name, surname order by date1 desc) rn
from mytab t1)
where rn = 1;

-- clear the original table
TRUNCATE TABLE mytab;

-- copy the data back
INSERT /* +APPEND */ INTO mytab(id,name,surname,date1) 
  (SELECT id,name,surname,date1 from tmp); 
```

# ruby - 如何检查到特定日期的剩余时间？

> ID：14193414
> 
> 赞同：2
> 
> 时间：2013-01-07T09:50:18.587
> 
> 标签：ruby, ruby-on-rails-3

如何查看距离特定日期还有多少天？

例如，我想从今天起 3 天后开始执行一些逻辑？我将对今天的日期进行硬编码，然后从中减去，但是如何呢？

**编辑**

我想做的是在接下来的三天内禁用模型的设计确认电子邮件，

```
if Rails.env== 'production' && (three days left sense 1/7/2013)
   devise :confirmable
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T14:29:17.870

何苦？

```
if Rails.env== 'production' && Time.now.strftime("%Y%m%d").to_i >= 20130110
    devise :confirmable 
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T10:27:54.243

使用[time_diff](https://rubygems.org/gems/time_diff) gem 来获得年、月、周、日、小时、分钟和秒的差异，我这样做很容易实现。

检查这个 - [Rails 计算时差](https://stackoverflow.com/questions/12338721/rails-calculate-time-difference?rq=1)

你会在那里得到你的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T10:32:25.183

如果我做对了，

您只需将开始时间存储在一个变量中，然后根据当前时间检查它（您将以秒为单位获得差异），如果它大于 72（3 天），则该`if`语句将完成。

```
require 'time'
start_time=Time.now

if Rails.env== 'production' && ( (Time.new - start_time)/3600 >72 )
   devise :confirmable
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T10:34:57.397

在你的班级首先你必须设置日期，例如：

在您的情况下，您需要执行以下操作：

```
 ("object name".date.to_time<=time.now+3)
   (do something)if x.date.to_time<=today 
```

to_time 技术使您能够选择时间（日、周、月、年）

```
ENV.all.each do|env|
  where (env.date.to_time<= Time.now+3)
   if Rails.env== 'production' && (env.date.to_time== today)
      devise :confirmable
   end 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-07T11:33:23.230

尝试

```
if Time.now >= <your_time_object> + 3.days
  # start executing some logic
end 
```

# charts - ExtJS3 中的图表

> ID：14193416
> 
> 赞同：2
> 
> 时间：2013-01-07T09:50:32.243
> 
> 标签：charts, extjs3

我正在使用 ExtJS3，我想将此图表放入具有动态存储的面板中 [http://dev.sencha.com/deploy/ext-3.4.0/examples/chart/pie-chart.html](http://dev.sencha.com/deploy/ext-3.4.0/examples/chart/pie-chart.html)

我试图将此图表包含到我的面板代码中，但它不起作用。有没有人有 ExtJS3 面板中包含的图表的解决方案或示例

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T14:35:52.120

我使用您的示例使用动态商店生成图表：

```
Ext.chart.Chart.CHART_URL = 'http://dev.sencha.com/deploy/ext-3.4.0/resources/charts.swf';

Ext.onReady(function(){
    var store = new Ext.data.JsonStore({
    url: "sample_data.php",
    root: 'results',
    fields: [
         {name: 'season'},
         {name: 'total'}
    ]
});

    new Ext.Panel({
        width: 400,
        height: 400,
        title: 'Pie Chart with Legend - Favorite Season',
        renderTo: 'container',
        items: {
            store: store,
            xtype: 'piechart',
            dataField: 'total',
            categoryField: 'season',
            //extra styles get applied to the chart defaults
            extraStyle:
            {
                legend:
                {
                    display: 'bottom',
                    padding: 5,
                    font:
                    {
                        family: 'Tahoma',
                        size: 13
                    }
                }
            }
        }
    });
}); 
```

在哪里`http://dev.sencha.com/deploy/ext-3.4.0/resources/charts.swf`可以找到图表的目标，sample_data.php 返回以下 json：

```
{"results":[
    {"total":"150","season":"Summer"},
    {"total":"245","season":"Fall"},
    {"total":"117","season":"Winter"},
    {"total":"184","season":"spring"}
]} 
```

**注意**：这通常应该设置为本地资源。

希望这可以帮助。

# javascript - 简单的 javascript 正则表达式来匹配 url 模式需要帮助

> ID：14193423
> 
> 赞同：0
> 
> 时间：2013-01-07T09:50:40.577
> 
> 标签：javascript, regex

我从来都不擅长正则表达式语法，有人可以帮我检查一个 URL 是否与我的示例中的特定结构匹配吗？

.* 可以是任何东西，包括 /-_# 等，0-9 可以是任何数字长度（例如 1993334）。

```
var pattern = new RegExp('/articles/[0-9]/[.*]');
if (pattern.test(document.location.href)) {
    // match found
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T09:55:00.680

试试这个：

```
\/articles\/[0-9]+\/.* 
```

因此，转义斜线，并使用`+`指定必须有“一个或多个”前面的元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T10:04:43.697

使用 [0-9]+ 而不是 [0-9] 并正确使用斜线..

```
var pattern = new RegExp(\/articles\/[0-9]+\/(.*));
if (pattern.test(document.location.href)) {
    // match found
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T10:06:05.037

你已经得到了答案，所以没问题，但就像 Cerbrus 告诉你的那样，我将解释为什么正则表达式不起作用。

```
new RegExp('/articles/[0-9]/[.*]'); 
```

该`/articles/`部分是完全正确的。

您已经对`[0-9]`（任何数字）有所了解，但您已指定“这仅出现一次”。通过添加 a`+`您可以指定“一个或多个”，就像您添加 a`*`它意味着“零个或多个”一样。

在您的最后一场比赛中`[.*]`，您匹配“任何字符”（`.`）重复“零次或多次”（`*`）次，因此`/articles/2/`可以匹配（之后没有任何内容）的 URL，我认为这是不需要的行为。

完全准确地说，您甚至可以使用正则表达式

`^/articles/[0-9]+/.+$`

而`^`意思是“这必须是开始”，`$`意思是“这必须是结束”。

If you don't include these, an URL like `/non-relevant-url/articles/123/my-article/whatever/foo/bar` could be matched (and you might not want to match if it starts with `/non-relevant-url` - the `^` fixes this.)

**Note:** The `$` isn't really necessary in this example, seeing as you end it with a "match everything past this point", but I included it so you'd know what it means (as it's just as useful to know as `^`)

Hope it gave you a tiny insight in regex, which once learned is incredibly powerful.

# android - 菜单按钮打开键盘

> ID：14193424
> 
> 赞同：0
> 
> 时间：2013-01-07T09:50:45.800
> 
> 标签：android, android-service, android-softkeyboard, keylistener

我想知道长按硬件菜单按钮时键盘是如何弹出的。我读过关键侦听器在服务中不可用。那么，菜单按钮究竟是如何触发键盘出现的呢？

**编辑**

由于我的问题似乎有点不连贯，这就是我的意思。

当我在应用程序抽屉中并长按菜单按钮时，键盘会弹出。或者，如果我正在使用应用程序并再次长按菜单按钮，键盘仍然会弹出。

所以，我假设它是键盘服务，但服务没有键监听器。

那怎么可能呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T10:03:40.320

将此代码放在您的按钮侦听器上

如果要显示屏幕键盘

```
getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_VISIBLE); 
```

如果你想隐藏它

```
getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T10:06:26.967

```
@Override
public boolean onKeyLongPress(int keycode, KeyEvent event){         
    if (keycode == KeyEvent.KEYCODE_MENU){    
        InputMethodManager inputMethodManager=(InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
        inputMethodManager.showSoftInput(lv, InputMethodManager.SHOW_IMPLICIT);             
    }
    return true;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T03:40:16.677

没有办法将 keyListener 添加到 Android 中的服务。菜单按钮触发我的键盘，因为它是一个自定义模块，并且该功能嵌入在框架本身中。不是因为服务 keylistener 或其他理论。

如果你好奇，我用的是 CM7.2.0-buzz

# vb.net - 在运行时创建 TextBlock

> ID：14193425
> 
> 赞同：0
> 
> 时间：2013-01-07T09:50:51.497
> 
> 标签：vb.net, wpf-controls, runtime, textblock

我正在尝试在运行时创建带有自动换行的复选框。带有自动换行的复选框的 XAML 如下所示：

```
<CheckBox Width="140" Height="35">
    <ContentControl>
        <TextBlock TextWrapping="Wrap">This is a long text with word wrap</TextBlock>
    </ContentControl>
</CheckBox> 
```

现在我想用代码创建这个 XAML，但我不知道如何让它工作。我能够创建复选框并将其添加到现有的 WrapPanel 但 textBlock 控件没有内容属性。如何将内容添加到 textBlock 以及如何将（contentControl 和 textBlock）都添加到复选框？

```
For intIndex = 0 To m_aryActions.Length - 1

    Dim textBlock As TextBlock = New TextBlock
    Dim contentControl As ContentControl = New ContentControl
    Dim checkBox As CheckBox = New CheckBox

    textBlock.TextWrapping = TextWrapping.Wrap
    contentControl.Content = textBlock

    With checkBox
        .Width = 140
        .Height = 25
        .Name = "CheckBox" & intIndex
    End With

    WrapPanel.Children.Add(checkBox)

Next 
```

谢谢，彼得

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T14:11:28.253

好吧，自己找吧：

```
Dim textBlock As TextBlock = New TextBlock
Dim contentControl As ContentControl = New ContentControl
Dim checkBox As CheckBox = New CheckBox

With textBlock
    .TextWrapping = TextWrapping.Wrap
    .Text = m_aryWishes(intIndex)
End With

contentControl.Content = textBlock

With checkBox
    .Width = intWidth
    .Height = intHeight
    .Content = contentControl
    .Name = "CheckBox" & intIndex
    .Padding = New System.Windows.Thickness(10, 0, 20, 0)
    .Focusable = False
    .ClickMode = ClickMode.Press
End With

WrapPanel.Children.Add(checkBox) 
```

# c++ - C++ 堆栈因指针而损坏

> ID：14193429
> 
> 赞同：1
> 
> 时间：2013-01-07T09:51:20.053
> 
> 标签：c++, pointers

我用 C++ 编写了一个简单的指针代码，并且在“str”周围出现堆栈损坏的运行时错误。我知道如果您试图到达数组中未分配的位置，它会给出此错误，但在这种情况下，当指针到达 '\0' 时，while 会停止。可能是ptr继续在内存中前进并指向'\ 0'吗？提前致谢！: - )

这是代码：

```
#include <iostream>
    using namespace std;
    #define SIZE 5
    void CHANGE(char str[]);

    void CHANGE(char str[])
    {
        char *ptr=str;
         while(*ptr!='\0')
         {
            if( ( (*ptr>='a')&&(*ptr<='z') )|| ( (*ptr>='A')&&(*ptr<='Z') ) )
             {
                 if(*ptr=='z')
                     *ptr='a';
                 else if(*ptr=='Z')
                     *ptr='A';
                 else
                    (*ptr)++;

             }

             ptr++;
         }

    }

    void main()
    {

        char str[SIZE];
        cout<<"please enter a sring\n";
        cin>>str;
        CHANGE(str);
        cout<<str<<"\n";
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T09:56:52.963

因为您定义了 SIZE 5，所以您可以获得最大 4 的输入，因为您将其视为以空值结尾的字符串。因此，如果您输入的字符多于 SIZE，您的 CHANGE 函数将尝试访问尚未分配的内存。希望它有所帮助。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-07T09:59:10.467

```
int main() 
```

这个对我有用。顺便说一句，SIZE 应该大得多。

```
#define SIZE 10000 
```

# php - 如何使用 xmapp 和 wordpress 在 localhost 上发送邮件

> ID：14193431
> 
> 赞同：0
> 
> 时间：2013-01-07T09:51:26.843
> 
> 标签：php, xampp, sendmail.exe

我已经`xmapp`在我的系统上安装了，我正在为我的网站使用 WordPress。现在在 WordPress 中，我使用联系表格 7 来发送邮件，当我从这个表格发送邮件时，它给了我错误，即联系你的系统管理员 bla bla bla ...

我`SMTP`为此目的使用了 wp mail 并正确配置了站点

在我的`sendmail.ini`我设置了以下内容：

```
smtp_server=pop.gmail.com 

smtp_port=587 

smtp_ssl=TLS    

;default_domain=localhost 

auth_username= noreply@bllsoft.com    

auth_password= ------- 

hostname=localhost 
```

在我的 php.ini 文件中，我设置了以下内容：

```
;SMTP = 

;smtp_port = 25

; sendmail_from = noreply@bllsoft.com

; For Unix only.  You may supply arguments as well (default: "sendmail -t -i").
; http://php.net/sendmail-path

sendmail_path = "C:\xampp\sendmail\sendmail.exe -t -i" 
```

我所要做的就是修复它，但没有得到我想要的结果。

在 wamp 中，我已经完成了相同的设置，并且能够正确地从本地主机发送邮件，我对此感到满意。

有时在 xampp 中，邮件发送消息来了，但我的收件箱中没有收到邮件，在这种情况下谁能帮助我

非常感谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-10T07:31:08.837

如果您想使用 wordpress 从 localhost 发送邮件并且您想使用您的 gmail 帐户发送邮件，那么您可以使用 gmail SMTP 邮件服务器。

为了简化事情，你可以使用这个插件

[http://wordpress.org/plugins/wp-mail-smtp/](http://wordpress.org/plugins/wp-mail-smtp/)

转到其设置页面（设置下的电子邮件子菜单）并选择以下选项：

```
Mailer: send all wordpress emails via SMTP

SMTP Options:
SMTP Host:smtp.gmail.com
SMTP Port:465
Encryption: Yes, use SMTP authentication
Username: **yourfullemail**@gmail.com
Password: **yourgmailpassword** 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-10T22:06:50.580

这是我基于[MailHog](https://github.com/mailhog/MailHog)的代码段，您首先需要安装[MailHog](https://github.com/mailhog/MailHog)然后对其进行配置，只需将下一个代码段添加到您的`functions.php`

[https://gist.github.com/khalidahmada/74c3ba52e7d179e323b30d97f4847ec6](https://gist.github.com/khalidahmada/74c3ba52e7d179e323b30d97f4847ec6)

请注意，您需要配置您的规则来检查默认情况下是否打开本地规则将常量测试`'WP_HOME'`到您的`wp-config.php`if 包含“测试”或“本地”，您需要指定自己的角色规则片段中的函数`isLocal()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-24T09:09:04.370

在 下`sendmail.ini`，尝试将 更改`smtp_server = pop.gmail.com`为`smtp_server = smtp.gmail.com`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-24T10:07:03.837

**步骤1**

在您的 php.ini 文件中，通常在 'C:\xampp\php' 上找到

编辑【邮件功能】

```
[mail function]
SMTP=smtp.gmail.com
smtp_port=587
sendmail_from = youremail@gmail.com
sendmail_path = "\"C:\xampp\sendmail\sendmail.exe\" -t" 
```

**第2步**

在您的 sendmail.ini 文件中，通常在 'C:\xampp\sendmail' 上找到

编辑[发送邮件]

```
[sendmail]
smtp_server=smtp.gmail.com
smtp_port=587
error_logfile=error.log
debug_logfile=debug.log
auth_username=youremail@gmail.com
auth_password=yourpassword 
```

**第 3 步**

重启阿帕奇

**第4步**

在您的 gmail 帐户上我的帐户 > 登录和安全

打开“允许不太安全的应用程序”

# gwt - 复选框代码不起作用，没有编译时错误

> ID：14193435
> 
> 赞同：0
> 
> 时间：2013-01-07T09:51:32.817
> 
> 标签：gwt

public SubMenuItemCommand(MenuObject menuItem,JsArray listOfMenu,ToothWidgettoothWidget){ this.menuItem=menuItem; this.listOfMenu=listOfMenu; this.toothWidget=toothWidget; }

cb1.addClickHandler(新 ClickHandler(){

```
 public void onClick(ClickEvent event) {

                    System.out.println(menuItem.getImage());
                    boolean checked = ((CheckBox) event.getSource()).getValue();
                    if (checked) {
                        System.out.println("hello3");
                        int left = toothWidget.getToothImage().getAbsoluteLeft();
                        int top =  toothWidget.getVPanel().getAbsoluteTop();//toothWidget.getToothImage().getAbsoluteTop();
                        Image im = new Image();
                        im.setUrl("images/"+menuItem.getImg());
                        int offx = left;
                        int offy = top;     
                        final PopupPanel popup1 = new PopupPanel(true);
                        popup1.setStylePrimaryName("transparent");
                        popup1.setPopupPosition(Math.max(offx, 0),Math.max(offy, 0));
                        //popup.add(im);
                        ToothWidget wgt = new ToothWidget(toothWidget.getToothNumber(),menuItem.getImg(), toothWidget.getTeeth());
                        toothWidget.getTeeth().getMap().get(toothWidget.getToothNumber()).put(menuItem.getName(), wgt);
                        wgt.setMenu(toothWidget.getMenu());
                        wgt.setPanel(popup1);
                        popup1.add(wgt);
                        popup1.show();
                    }

                    else{
                        ToothWidget wgt = toothWidget.getTeeth().getMap().get(toothWidget.getToothNumber()).remove(menuItem.getName());
                        wgt.getPanel().hide();
                    }
                }
             }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T10:13:27.063

通常是路径问题。即图像位置不是您设置的。

如果您的 gwt 模块的**公共文件夹中有****images**文件夹，则需要使用 **`im.setUrl(GWT.getModuleBaseURL()+"/images/"+menuItem.getImg());`**

 **如果您的**战争/图像**中有图像，则需要使用
`im.setUrl(GWT.getHostPageBaseURL()+"/images/"+menuItem.getImg());`

您也可以随时使用 FireFox/FireBug 的网络/图像控制台来检查正在访问的 URL。**

# cordova - 使用PhoneGap从应用程序发送短信而不打开Android上的本机短信应用程序

> ID：14193437
> 
> 赞同：1
> 
> 时间：2013-01-07T09:51:38.373
> 
> 标签：cordova, sms, send

在我的应用程序中有一个按钮。在该按钮的单击事件上，我想发送短信。我正在使用PhoneGap。我正在使用 URL 方案发送短信，如下所示

```
window.location.href = "sms:" + numberstosend + "?body=" + messagetosend + "    I am at   "  + currentlocation; 
```

这工作正常。但是，这会打开带有预配置号码和消息正文的本机 SMS 应用程序。现在再次用户必须单击本机短信应用程序的发送按钮来发送短信。

我的要求是我想在不打开 Android 上的原生短信应用程序的情况下发送短信。用户单击按钮，应发送消息。

可以使用 PhoneGap 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T12:33:58.083

您应该通过 Phonegap 插件使用本机 SMS Manager。

最新插件：[https](https://github.com/Pyo25/phonegap-sms-sending-plugin) ://github.com/Pyo25/phonegap-sms-sending-plugin 您可以在 Github 页面上找到示例。

# python - Python 集合是可变的吗？

> ID：14193438
> 
> 赞同：38
> 
> 时间：2013-01-07T09:51:39.803
> 
> 标签：python, set

Python中的集合是可变的吗？

* * *

换句话说，如果我这样做：

```
x = set([1, 2, 3])
y = x

y |= set([4, 5, 6]) 
```

是否仍然指向同一个对象，或者是否创建了一个新集合并将其分配`x`给？`y``y`

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-01-07T09:53:46.160

```
>>>> x = set([1, 2, 3])
>>>> y = x
>>>> 
>>>> y |= set([4, 5, 6])

>>>> print x
set([1, 2, 3, 4, 5, 6])
>>>> print y
set([1, 2, 3, 4, 5, 6]) 
```

*   集合是无序的。
*   集合元素是唯一的。不允许重复元素。
*   集合本身可以修改，但集合中包含的元素必须是不可变类型。

```
set1 = {1,2,3}

set2 = {1,2,[1,2]}  --> unhashable type: 'list'
# Set elements should be immutable. 
```

结论：集合是可变的。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-01-07T10:00:44.990

你的两个问题不一样。

> Python 集合是可变的吗？

是的：“可变”意味着您可以更改对象。例如，整数是不可变的：您不能将数字更改为`1`其他任何含义。但是，您可以将元素添加到集合中，从而对其进行变异。

> 有`y = x; y |= {1,2,3}`变化`x`吗？

是的。该代码`y = x`的意思是“将名称绑定到该名称当前代表`y`的同一对象”。`x`代码在底层`y |= {1,2,3}`调用了魔法方法`y.__ior__({1,2,3})`，它改变了 name 所代表的对象`y`。由于这与 表示的对象相同`x`，因此您应该期望该集合发生变化。

* * *

您可以使用运算符检查两个名称是否指向完全相同的对象`is`：`x is y`只要名称所代表的对象`x`和`y`是相同的对象。

如果要复制对象，通常的语法是`y = x.copy()`or `y = set(x)`。然而，这只是一个*浅*拷贝：虽然它复制了集合对象，但所述对象的*成员*并没有被复制。如果您想要深拷贝，请使用`copy.deepcopy(x)`.

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2018-07-27T15:01:40.390

Python 集合分为两种类型。可变和不可变。使用“set”创建的集合是可变的，而使用“frozenset”创建的集合是不可变的。

```
>>> s = set(list('hello'))
>>> type(s)
<class 'set'> 
```

以下方法适用于可变集。

s.add(item) -- 将项目添加到 s。`list`如果已经在 s 中，则无效。

s.clear() -- 从 s 中删除所有项目。

s.difference_update(t) -- 删除 s 中也在 t 中的所有项目。

s.discard(item) -- 从 s 中删除项目。如果 item 不是 s 的成员，则什么也不会发生。

所有这些操作都修改了 set 。参数 t 可以是任何支持迭代的对象。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-02-07T08:32:07.367

After changing the set, even their object references match. I don't know why that textbook says sets are immutable.

```
 >>> s1 ={1,2,3}
    >>> id(s1)
    140061513171016
    >>> s1|={5,6,7}
    >>> s1
    {1, 2, 3, 5, 6, 7}
    >>> id(s1)
    140061513171016 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-07T09:53:25.467

```
print x,y 
```

你会看到它们都指向同一个集合：

```
set([1, 2, 3, 4, 5, 6]) set([1, 2, 3, 4, 5, 6]) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-08-14T12:30:10.397

是的，Python 集合是可变的，因为我们可以在集合中添加、删除元素，但集合本身不能包含可变项。像下面的代码会报错：

```
s = set([[1,2,3],[4,5,6]]) 
```

所以集合是可变的，但不能包含可变项，因为集合内部使用哈希表来存储其元素，因此集合元素需要是可哈希的。但是像列表这样的可变元素是不可散列的。

注意：
**可变**元素不可散列
**不可变**元素可散列

就像字典的键不能是列表一样。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-07-11T10:55:18.487

集合是可变的

```
s = {2,3,4,5,6}
type(s)
<class 'set'>
s.add(9)
s
{2, 3, 4, 5, 6, 9} 
```

我们能够改变集合的元素

* * *

## 回答 #8

> 赞同：-3
> 
> 时间：2017-12-25T07:13:21.413

我不认为 Python 集合是可变的，正如**Mark Lutz - O'Reilly Publications 的**“ Learning Python 第 5 版”一书中明确提到的那样

[![在此处输入图像描述](../Images/c64986cb4d60dab918a184b4b9fae0cc.png)](https://i.stack.imgur.com/6Hdic.png)

# ajax - 如何将回发按钮添加到更新面板

> ID：14193440
> 
> 赞同：1
> 
> 时间：2013-01-07T09:51:46.153
> 
> 标签：ajax, updatepanel, autopostback

我必须添加一个后退按钮以将所有站点刷新到更新面板。我该怎么做？

这是我的代码 ASPX：

`<asp:UpdatePanel ID="UpdatePanel1" UpdateMode="Conditional" runat="server"> <ContentTemplate> <tr><td style="border: 1px solid #676767; width:200px;"><span style="color:#FF0000; font-weight:bold;">Wstaw datę dla dnia projektowego: </span></td><td style="border: 1px solid #676767"><asp:TextBox ID="TextBox3" runat="server" Width="249px" style="margin-right:3px;"></asp:TextBox></td><td style="border: 1px solid #676767"> format (2012-10-30)</td></tr> <tr><td style="border: 1px solid #676767; width:200px;"><span style="color:#FF0000; font-weight:bold;">Wstaw procent zaangarzowania: </span></td><td style="border: 1px solid #676767"><asp:DropDownList ID="DropDownList2" runat="server" Width="273px"></asp:DropDownList></td><td style="border: 1px solid #676767"> od (1/8..8/8)</td></tr> <tr><td colspan="3" style="border: 1px solid #676767;"><asp:Button ID="Button2" runat="server" Text="Dodaj pojedyńczy dzień projektowy" onclick="Button2_Click" Width="600px" /></td></tr> </ContentTemplate> </asp:UpdatePanel>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T10:46:12.097

我添加了这段代码，它起作用了；）

`<Triggers> <asp:PostBackTrigger ControlID="Button6" /> </Triggers>`

# asp.net-mvc-3 - 如何使用 DD4T 从 Tridion 获取内容并使用 MVC3 发布？

> ID：14193445
> 
> 赞同：-1
> 
> 时间：2013-01-07T09:52:20.097
> 
> 标签：asp.net-mvc-3, tridion, dd4t

我正在创建一个关于使用 DD4T 和 MVC3 从 Tridion 将内容发布到 Web 的新应用程序。任何人都可以做类似的事情或有同样的想法，所以如果有人可以提供帮助，那将对我有很大的帮助。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T09:55:40.693

您的第一站应该是 DD4T 项目 wiki：

*   [http://code.google.com/p/dynamic-delivery-4-tridion/wiki/TableOfContents?tm=6](http://code.google.com/p/dynamic-delivery-4-tridion/wiki/TableOfContents?tm=6)

除此之外，我发现 Albert Romkes 的帖子对入门非常有用：

*   [http://albertromkes.com/2011/08/24/tridion-and-asp-net-mvc3/](http://albertromkes.com/2011/08/24/tridion-and-asp-net-mvc3/)

# iphone - 使用 restkit 和核心数据的最佳实践

> ID：14193449
> 
> 赞同：0
> 
> 时间：2013-01-07T09:52:32.363
> 
> 标签：iphone, objective-c, ios, core-data, restkit

我正在构建一个不断与`webservice`. 所以一直在发布和获取数据。但是我发布和获取的所有数据也应该保存在手机上。

**问题 1**

当我浏览示例时。我看到他们正在加载`appDelegate`. 对于加载少量数据，这可能是最好的方法。但就我而言，它仍然是最好的方法还是我应该在`ViewController Level`.

**问题 2**

当我启动应用程序时，我检查了*使用核心数据*，这为我在`appDelegate`. 但在这种情况下，我无法达到我`managedObjectContext`的`viewController`水平，对吧？

我现在的问题是，正确完成这项工作的最佳方法是什么？

亲切的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T10:06:31.993

> 问题 1
> 
> 当我浏览示例时。我看到他们正在加载 appDelegate 中的所有数据。对于加载少量数据，这可能是最好的方法。但就我而言，它仍然是最好的方法还是应该在 ViewController 级别上执行此操作。

使用 appDelegate 是典型的示例代码。

如何最好地处理它完全取决于您的应用程序。与使用应用程序委托相比，将数据传输封装到您的视图控制器中无疑是一个进步。但是，根据您的应用程序，您还可以设计一个更具体的数据加载控制器来封装所有相关行为。事实上，我认为即使对于相对简单的项目，后一种选择也最有效。

> 问题 2
> 
> 当我启动应用程序时，我检查了使用核心数据，这在 appDelegate 中为我生成了很多代码。但在这种情况下，我无法在 viewController 级别访问我的 managedObjectContext，对吧？

如果您查看 appDelegate.h 文件，您应该会找到用于从控制器访问核心数据的属性：

```
@property (readonly, strong, nonatomic) NSManagedObjectContext *managedObjectContext;
@property (readonly, strong, nonatomic) NSManagedObjectModel *managedObjectModel;
@property (readonly, strong, nonatomic) NSPersistentStoreCoordinator *persistentStoreCoordinator; 
```

您可以使用它来访问托管对象上下文，`[UIApplication sharedApplication].delegate`也可以将该代码从应用程序委托中分解到您自己的模型管理器类中。同样，这完全取决于您的应用程序。有些应用程序只使用 1 个托管对象上下文，有些应用程序处理更多，等等。如果您的应用程序对核心数据进行了非常基本的使用，您可以保持原样。

# eclipse - Worklight - 如何从 SVN 结帐并保持应用程序结构

> ID：14193450
> 
> 赞同：0
> 
> 时间：2013-01-07T09:52:33.327
> 
> 标签：eclipse, svn, ibm-mobilefirst

我正在尝试将一个现有的 worklight 项目添加到我的 SVN 存储库中，它运行良好（删除了 .project、.classpath 文件和 .settings 文件夹）。但是，我无法在另一台 PC 上检查它。如果我在 Eclipse 中使用 subclipse 检查它并作为一个新的 Worklight 项目，它会删除我的应用程序文件夹并创建一个新文件夹，从而删除我为 Android\iPhone\mobile 创建的文件。如果我正常检查它，Worklight 插件不会将其检测为工作灯项目。

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T10:41:59.987

.project 和 .classpath 需要签入，它们定义了项目的属性。.settings 文件夹是可选的，但我建议也将其签入。通常，此页面概述了您需要签入的内容以及应忽略哪些文件/文件夹 - [http://pic.dhe.ibm.com/infocenter/wrklight/v5r0m5/index.jsp?topic=%2Fcom.ibm.worklight .help.doc%2Fdevref%2Fr_integrating_with_source_contro.html&resultof%3D%2522%2573%2576%256e%2522%2520](http://pic.dhe.ibm.com/infocenter/wrklight/v5r0m5/index.jsp?topic=%2Fcom.ibm.worklight.help.doc%2Fdevref%2Fr_integrating_with_source_contro.html&resultof%3D%2522%2573%2576%256e%2522%2520)

# android - 是否可以根据附近的位置绘制道路

> ID：14193452
> 
> 赞同：0
> 
> 时间：2013-01-07T09:52:36.450
> 
> 标签：android, google-maps, google-api

我目前正在开发一个跟踪您的路径的应用程序，因此它总是在地图上绘制。我想知道是否可以在路上画画，因为我的应用程序获取了我的位置并且它不精确，它总是在我附近（大约 30 m 半径）。我希望它不要将它添加到它所在的位置，而是在最近的道路上

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T08:41:06.393

`Ployline`您可以使用Google Map 类在地图上绘制路径，如下所示：

> ```
>  Polyline line=myMap.addPolyline(new PolylineOptions().add(new LatLng(location.getLatitude(),location.getLongitude())).color(Color.RED)); 
> ```

有关它的更多详细信息，请参阅[此处](https://developers.google.com/maps/documentation/android/lines)

# sql - 从 id 从 30000 开始计时超过 2 分钟的大表中更新和选择时

> ID：14193453
> 
> 赞同：-1
> 
> 时间：2013-01-07T09:52:39.477
> 
> 标签：sql, performance, sql-server-2008-r2, latency

请我有一个包含**2 个表**的数据库：第一个包含超过 200 万条记录，第二个是第一个的历史表。当我们尝试进行选择或更新并且 ID（主键）超过 30 000 时，查询的执行时间超过 1 分钟。如果我截断并导入数据并且 id 从 1 开始，则查询需要 1 秒。请问为什么**ID > 30 000**和任何其他解决方案时的延迟？完成的索引：1 代表 PK 另一个日期和字段优先级整数，如果我做一个简单的 select top 10 * from table1 我有 2 分钟的延迟
PS：很多事务在第一次同时完成表（选择、插入、更新和删除）谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T12:11:48.230

如果您遇到锁争用，您基本上有两种选择：

1.  在执行查询时停止所有其他活动。这将保证数据的一致视图。（技术上需要其他步骤来保证与其他表的一致性）。您可以通过指定`with (TABLOCKX)`查询提示来做到这一点。

    （您还可以使用“序列化”事务隔离级别，它会在您读取表时从头到尾逐步锁定表。您可以使用索引做一些巧妙的事情来减少这种痛苦，但这符合“高级”的条件）。

2.  允许其他活动继续，但接受您得到的答案可能与查询正在进行时发生的活动不一致。也就是说，在查询期间添加的行可能会或可能不会被包括在内，在查询期间被删除的行可能会或可能不会被包括在内，而正在更新的行可能会或可能不会, 具有前面或后面的值。此外，您可能会发现一些较晚的值包含在内，而一些较早的值不包含，因此不会在时间上保持一致。您可以通过`with (NOLOCK)`提示执行此操作。

    （您也可以使用“读取未提交”事务隔离级别。通常在需要时指定 NOLOCK 会更容易）。

根据您在做什么，任何一个选项都可能是最好的。如果您想提供粗略的数字或某种滚动“前 10 名”用于报告/监控目的，请使用选项 2。如果您必须提供诸如会计号码、银行余额等内容，那么您必须有一个检查站在某个时刻知道确切的正确数字，请使用选项 1。这很少见 - 如果有疑问，您可能需要选项 2。

尽管是默认设置，但实际上很少需要“中间”选项，即已提交读取、读取快照等，并且可能仅在您对情况了解得足够清楚以知道是否需要它们时才应使用它们。

# crystal-reports - 水晶报表子报表共享变量未返回关注组部分

> ID：14193455
> 
> 赞同：-1
> 
> 时间：2013-01-07T09:52:52.533
> 
> 标签：crystal-reports

水晶报表

子报告共享变量没有返回关注组部分，如下所示，简单示例。在 main 和 sub 中创建 Shared 变量后，subrepo 的值需要在相应的主报告字段中返回。但它会在下一个组部分返回，如下所示

## 第 1 组

```
 SharedVAR Sales Happen= 
```

第 2 组子报告日期销售
2012 年 1 月 1 日 123.44 SharedVAR 销售发生=Y

## 第 1 组

```
 SharedVAR Sales Happen=Y 
```

第 2 组子报告日期销售
-- 无记录

请建议提前谢谢。SHB

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T23:58:49.423

这里的问题是共享变量总是在打印时被评估，并且 Group1 标题在 Group2 之前打印。如果您移动总计以显示在 Group1 页脚而不是 Group1 页眉中，它应该可以正常工作。

根据报表，您还可以将它们组合在一起：将子报表数据移动到主报表中（并摆脱子报表），或者在主报表中隐藏 group1 标题并显示该数据在子报告的报告标题部分。

# apache-flex - 关于 flex 语法错误

> ID：14193457
> 
> 赞同：0
> 
> 时间：2013-01-07T09:53:01.353
> 
> 标签：apache-flex

我不断收到错误语法错误，期望在公开之前有正确的parren。-ide

公共类 FlashlightWidgetProvider 扩展 AppWidgetProvider {

```
@Override
public void onUpdate(Context context, AppWidgetManager appWidgetManager,
int[] appWidgetIds) {

Intent receiver = new Intent(context, FlashlightWidgetReceiver.class);
receiver.setAction("COM_FLASHLIGHT");
receiver.putExtra(AppWidgetManager.EXTRA_APPWIDGET_IDS, appWidgetIds);
PendingIntent pendingIntent = PendingIntent.getBroadcast(context, 0, receiver, 0);

RemoteViews views = new RemoteViews(context.getPackageName(),
R.layout.widget_layout);
views.setOnClickPendingIntent(R.id.button, pendingIntent);

appWidgetManager.updateAppWidget(appWidgetIds, views);

}
} 
```

# ruby-on-rails-3 - 如何同时使用 Omniauth_callbacks 控制器和自定义设计注册控制器

> ID：14193458
> 
> 赞同：0
> 
> 时间：2013-01-07T09:53:01.957
> 
> 标签：ruby-on-rails-3, routing, devise, omniauth

我有一个用于设计设置的自定义注册控制器，它是：

```
 devise_for :users, controllers: {registrations: "registrations"} 
```

在控制器中：

```
class RegistrationsController < Devise::RegistrationsController

  protected

    def after_update_path_for(resource)
      user_path(resource)
    end
end 
```

它工作得很好。

但是我也有omniauth身份验证，它本身也很有效......

```
 devise_for :users, controllers: {omniauth_callbacks: "omniauth_callbacks"}
class OmniauthCallbacksController < Devise::OmniauthCallbacksController

  def all
    user = User.from_omniauth(request.env["omniauth.auth"])
        if user.persisted?
        flash.notice = "Signed in!"
        sign_in_and_redirect user
        else
        session["devise.user_attributes"] = user.attributes
        redirect_to sign_up_path
        end
  end
    alias_method :linkedin, :all
    alias_method :twitter, :all

end 
```

但是，您可能已经看到我的问题 - 我不确定如何让它们一起工作，因为它们都以 '​​devise_for :users' 开头，所以无论我将它们放在路由文件中的哪种方式，一个不会工作。

如何让它们同时工作，以便注册控制器仅覆盖“编辑”和“更新”操作，而 omniauth_callbacks 控制器处理身份验证？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T10:18:24.277

在 routes.rb 中，您可以像这样放置逗号分隔的路径`devise_for`-

```
devise_for :users, controllers: {registrations: "registrations", omniauth_callbacks: "omniauth_callbacks"} 
```

这将起作用。

# git - 提交怎么会在一个分支上两次？

> ID：14193459
> 
> 赞同：3
> 
> 时间：2013-01-07T09:53:02.817
> 
> 标签：git, github

我有以下 Git 历史：

```
 D-E-A-B-C-A-B-C (feature2)
   /
  *-D-E (feature1)
 /
*-F (develop) 
```

我不知道 A、B 和 C 是如何两次出现在 feature2 上的。`git rebase feature1`我一直在使用and重新调整 feature2 的基础`git rebase --onto develop feature1`。我已经通过挑选 A、B 和 C 到新的分支开发来纠正这种情况，但是：这怎么可能发生？我难住了。

* * *

## 编辑

我*不知道*Github 在这里做什么，但现在 Git 说：

```
Your branch and 'origin/feature2-fresh' have diverged,
and have 113 and 100 different commit(s) each, respectively. 
```

所以这似乎是 Github 的错？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T14:35:12.847

这是发生的事情：

*   所以我重新定位`feature2`到`feature1`.
*   我重新`feature2`回到`develop`.
*   我推了推`feature2`，然后意识到还有更多的工作要做，所以 rebase 再次跳舞（`feature1`需要运行`feature2`）。

现在所有唯一提交的 SHA-1`feature2`与`origin/feature2`.
不知不觉中，我做了一个`pull`. Git 尽职尽责地再次合并所有提交，因为它们具有不同的 SHA。这个故事的寓意是：

# 不要对推送的分支进行变基。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T10:28:01.313

一种可能性：
重复提交可能是一个迹象`git cherry-pick`（请参阅“ [git - 什么是樱桃挑选？](https://stackoverflow.com/questions/13522664/git-what-is-cherry-pick/13524494#13524494) ”[及其重复提交问题](https://stackoverflow.com/questions/2627953/git-cherry-pick-and-datamodel-integrity/2628915#2628915)）。

如果 A 和 B 在变基后的任何时候被挑选出来，即使该分支已经包含 A 和 B（具有不同的 SHA1），它们也可以添加到 feature2 中。

*如果 A 和 B 在变基之前*被挑选出来，那么 A 和 B 不应该被重复（来自[`git rebase`手册页](http://git-scm.com/docs/git-rebase)）

> 如果上游分支已经包含您所做的更改（例如，因为您邮寄了一个应用于上游的补丁），那么该提交将被跳过。

# javascript - Jquery Animate - 通过动画中途触发功能

> ID：14193460
> 
> 赞同：0
> 
> 时间：2013-01-07T09:53:05.177
> 
> 标签：javascript, jquery

是否可以在动画中途触发功能？

动画包括一个从上到下在图像上滑动的实心块 - 我想在图像被完全覆盖时触发一个函数并从 html 中删除图像（在动画的中途）

我目前的功能是 -

```
 function animateCover() {
    $('#cover').animate({ bottom: '1400px'}, 4000, function() { });
} 
```

图像在 800 像素点处完全覆盖 - 我可以访问此属性以触发功能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T09:58:35.233

由于 jQuery 中没有刻度计数器，因此您需要“模拟”它：

```
function animateCover() {
  var  
      $cover = $('#cover'),
      interval = setInterval(function(){
        if ($cover.is(':animated')){
          if (parseInt($cover.css('bottom')) > 800){
             alert('trigger');
             clearInterval(interval);
          }
        } else {
         clearInterval(interval);
        }
      }, 13); // 13 is the minimum possible in Javascript 

  $cover.animate({ bottom: '1400px'}, 4000, function() { $cover.text('done'); });
} 
```

jsFiddle：http: [//jsfiddle.net/emV4p/1/](http://jsfiddle.net/emV4p/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T10:06:03.910

把动画分成2个怎么样。

```
function animateCover() {
    $('#cover').animate({ bottom: '700px'}, 2000, function() {
        $('#imgID').hide();
        $('#cover').animate({ bottom: '1400px'}, 2000 );
    });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T10:33:23.527

**更新**：这是一个完美工作的解决方案，代码最少 -

[**工作演示**](http://jsfiddle.net/4SFwe/4/)

jQuery-

```
$(document).ready(function(){
  setInterval(function(){
    $("#image").css('background-image','none');
    },2000);
  $("#block").animate({
    bottom:'400px'
  },3000);
}); 
```

# java - 子类化的内存有效方式

> ID：14193461
> 
> 赞同：1
> 
> 时间：2013-01-07T09:53:08.680
> 
> 标签：java, android

试图为此提出一个有意义的问题标题是很棘手的。我会准确地解释我想要做什么。

我创建了一个 Android 图形库，可以构建一个可能很大的`Path`对象列表。我现在需要为每个`Path`. 为此，我简单地进行了子类化`Path`（调用它`PathSubclass`）以提供额外的扩展数据字段。在一般用例中，只有极少数`Path`对象实际上会有额外的数据集。例如，可能有`ArrayList`几千个`Path`，但只有少数有额外的数据。在我开发库时，我想附加到每个库的额外数据量可能是`Path`会大幅增长。我很欣赏这可能是过早的优化，但我担心当附加数据很少填充并且使用该对象的相当大的集合时，将对象子类化以包含一些附加数据是无效的。

我想做的可能是开设一个`ExtendedPathData`与我的子类分开的课程`Path`。因此，每个`Path`子类只因需要一个`mExtendedData`成员而有点膨胀，在许多情况下`null`，除了那些`Path`需要额外数据的极少数对象外。我想这类似于`View`使用该方法通常将附加数据附加到 a 的`setTag()`方式。

是否有任何其他方法我应该考虑，因为任何原因更好？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T09:58:10.667

您可以使用组合而不是继承。

**理念一**

一个`PathData`类可能包含对 a`Path`和 a的引用`ExtendedPathData`：

```
// encapsulate properly in your code, this is
// just a short sample
class PathData {
  public Path path;
  public ExtendedPathData data;
} 
```

这使您可以将`data`成员设置为`null`。每个`PathData`实例的大小始终为两个引用。当 in 中的成员数量`ExtendedPathData`增加时，实际内存消耗仅对于`PathData`具有非 null 的实例才会增加`data`。

**想法 2**

您可以通过使用具有两种实现的接口来减少一个参考：

```
interface PathData {
  Path path();
  ExtendedPathData data();
}

final class NullPathData implements PathData {
  Path path;
  public Path path() { return path; }
  public ExtendedPathData data() { return null; }
}

final class ExtendedPathData implements PathData {
  Path path;
  ExtendedPathData data;
  public Path path() { return path; }
  public ExtendedPathData data() { return data; }
} 
```

由您决定拥有两个实现是否真的值得代码，因为您需要一个工厂方法来决定使用什么实现。*每个实例一个*4 字节的引用...

**进一步的东西**

如果`ExtendedPathData`是*不可变*的并且可能存在*许多相等的实例*，您还可以通过公开*使用实例池*而不是公共构造函数的静态工厂方法来将它们汇集起来。

如果你有[Joshua Bloch 的 Effective Java](http://www.amazon.de/Effective-Java-Programming-Language-Series/dp/0321356683)，这里有进一步的参考资料，详细解释了这些技巧（在更一般的上下文中）：

*   Item 1 考虑静态工厂方法而不是构造函数
*   第 16 条 组合优于继承

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T10:00:50.063

`Path`可以在下面的容器中存储子类不是继承的全部意义吗？

```
ArrayList<Path> pathList;

pathList.add(new Path());
pathList.add(new PathPlusPlus()); 
```

还是我不理解问题？

`isinstanceof`正如@assylias 建议的那样，要消除丑陋的调用，您可以向基类添加一个getter，它返回扩展数据。在基类本身中它会返回`null`，而在子类中它会返回相关数据。

# jquery - 一个事件干扰了 Select2 插件的 ajax 检索结果

> ID：14193463
> 
> 赞同：12
> 
> 时间：2013-01-07T09:53:17.900
> 
> 标签：jquery, html, jquery-select2

我正在使用 Igor Vaynberg 的 Select2 jQuery 插件和[Infinite Scroll with Remote Data](http://ivaynberg.github.com/select2/#infinite)选项来为我的网站创建一个自动完成搜索框。AJAX 运行良好，结果显示出来，但它们是不可选择的——更改事件永远不会触发，当您单击结果时，什么也不会发生。

Chrome 控制台中也没有显示任何错误，所以我认为这不是语法错误，而是插件将其误认为是禁用的选择框。**编辑：**已经为结果列表尝试了一个单独的点击事件，它也从未被触发，我现在很确定有什么东西干扰了这些事件。

这是我目前的代码，

```
// Search
$("#site-search").select2({
    placeholder: "Search posts",
    minimumInputLength: 3,
    ajax: {
        url: "http://localhost/mysite/search",
        dataType: 'json',
        quietMillis: 500,
        data: function (term, page) {
            return {
                q: term,
                page_limit: 10,
                page: page // page number
            };
        },
        results: function (data, page) {
            var more = (page * 10) < data.length; // whether or not there are more results available

            // return the value of more to tell if more results can be loaded
            return {results: data, more: more};
        }
    },
    formatResult: function(post) {
        // return html markup for individual result item
        markup = '<img src="'+post.image+'" style="width:40%;float:left;margin-right:5px">';
        markup += '<p>'+post.title+'</p>';
        markup += '<div class="clearfix"></div>';
        return markup;
    },
    formatSelection: function(post) {
        // This shows up in the select box
        return post.title;
    },
    dropdownCssClass: "bigdrop" // apply css that makes the dropdown taller
}).on('change', function(e) {
    try {
        var slug = e.val.slug;
        window.location.href = "http://localhost/mysite/posts/"+slug;
    } catch(error) {
        console.log('Selected search result is invalid: ');
    }
}); 
```

选择框本身只是一个输入类型：隐藏

```
<input type="hidden" class="bigdrop" id="site-search" style="width:100%;height:auto"> 
```

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-01-10T09:37:48.570

您的问题似乎是，您的结果数据没有名为“id”的属性。[Select2 插件需要](https://github.com/ivaynberg/select2/blob/master/select2.js#L716)数据上的 id 字段，如果没有，它会使选项“不可选择”。您可以提供一个 id 函数来覆盖此行为：

```
$("#site-search").select2({
   id: function(obj) {
      return obj.slug; // use slug field for id
   },
   ... 
```

# javascript - RequireJS 文本插件和变量连接字符串

> ID：14193466
> 
> 赞同：3
> 
> 时间：2013-01-07T09:53:20.270
> 
> 标签：javascript, requirejs, amd

我正在使用 RequireJS 文本插件来加载一些 html 模板。当我将字符串文字传递给 require 函数时，它工作正常。

```
var templateHTML = require('text!templates/template_name.html'); 
```

但是当我使用可变连接字符串时

```
var templateName = 'template_name';
var templateHTML = require('text!templates/'+templateName+'.html'); 
```

它抛出以下错误：

```
Uncaught Error: Module name "text!templates/template_name.html" has not been loaded yet for context: _ 
```

对这个问题有什么想法吗？

更新：这是我的测试代码。

```
require.config({
    paths: {
       text: '../lib/text',
    }
});

define(function (require, exports, module) {
   "use strict";
    require(['text'], function (text) {

       //var templateHTML = require('text!templates/template_name.html');

       var templateName = 'template_name';
       var templateHTML = require('text!templates/'+templateName+'.html');

    });
}); 
```

RequireJS 文本版本：2.0.3
RequireJS 版本：2.1.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T11:03:03.963

定义数组中的路径以确保它在使用之前加载它

```
var templateName = 'template_name';
require(['text!templates/'+templateName+'.html'], templateHTML);

//now you can use  
this.template =  _.template(templateHTML, {}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T10:58:33.323

你试过这种方法吗？

```
require.config({
  paths: {
    text: '../lib/text',
  }
});

define(function (require, exports, module) {
  "use strict";
   var templateName = 'template_name';

   require(['text!templates/' + templateName + '.html'], function (template) {
      console.log('loaded template: ', template);
   });
}); 
```

只是一个想法，告诉我它是怎么回事。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-29T14:10:33.633

require 内部的依赖扫描仅适用于字符串文字依赖。您应该查看**require.js**源代码，并尝试找到**cjsRequireRegExp**变量。如前所述，您可以使用回调符号加载内容。

```
cjsRequireRegExp = /[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-18T18:09:57.913

我在尝试使用 Backbone/Marionette 时也遇到了这个问题。感谢上面的@Ignacio 和@Stanislau Tsishkou 的洞察力。

我能够使用数组+回调方法解决它：

```
var templateName = 'template_name';
var templateHTML = require('text!templates/'+templateName+'.html', function (templateHTML) {
  templateHTML = template;
);

// ...

var View = Backbone.Marionette.ItemView.extend({
  // ...

  template: function() { 
    return Handlebars.compile(templateHTML).apply(null, arguments); 
  },

  // ...
}); 
```

重要的部分是：

1.  确保将在回调中返回的结果 templateHTML 设置为可在适当范围内访问的变量（实现此目的的是 templateHTML = 模板）。
2.  如果使用 Marionette，请确保您使用的是生成模板的函数，因为这不会在实际需要之前尝试呈现 templateHTML。
3.  如果使用把手，就像我在这个例子中一样，请务必使用 apply 方法，因为我必须将模板函数中使用的任何参数传递给它，因为 Handlebars.compile() 返回一个函数，而不是编译的模板文本。

如果您不使用 Handlebars，仅使用 Underscore 或 Lodash，则木偶文档提供了一个很好的示例 - [http://marionettejs.com/docs/v2.4.2/marionette.itemview.html#itemview-render](http://marionettejs.com/docs/v2.4.2/marionette.itemview.html#itemview-render)

```
template : function(serialized_model) {
  var name = serialized_model.name;
  return _.template(templateHTML)({
    name : name
  });
} 
```

# javascript - Jquery 正在添加 prevObject: 到数组

> ID：14193469
> 
> 赞同：16
> 
> 时间：2013-01-07T09:53:25.083
> 
> 标签：javascript, jquery, arrays

我想对数组中的所有浮点数求和

当我在 chrome 控制台中执行此操作时

```
$("tr.project_hours").find("td.number").map(function(i,v)
{return parseFloat($(v).attr("data-time"))
}) 
```

我明白了

```
[0, 0, 0, 0, 0, 0, 0] 
```

这就是我要的

但是，在我的代码中，我有更多 $("tr.project_hours") ，我想分别对它们求和。所以，我愿意

```
$("tr.project_hours").each(function(){
    row = $(this).find('td.total')
    row.html(sumInputsIn($(this).find("td.number").map(function(i,v){
     return parseFloat($(v).attr("data-time"))})));
    }) 
```

('td.total') 是应显示结果的列。问题是最后一个代码在控制台中返回这个

```
[0, 0, 0, 0, 0, 0, 0, prevObject: jQuery.fn.jQuery.init[7], context: <tr>] 
```

所以结果就是臭名昭著的NaN。

为什么我会在我的数组中获得 prevObject？我该如何重构以摆脱它？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-01-07T10:04:04.363

调用`map`jQuery 集合的返回类型是另一个 jQuery 集合。如果您只想访问映射中使用的函数的结果，则需要使用`.toArray()`来返回底层数组：

```
var numbersArray = $("tr.project_hours").find("td.number").map(function(i,v)
  {return parseFloat($(v).attr("data-time"))
}).toArray(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T10:03:54.757

这应该会实现预期的结果：

```
$("tr.project_hours").each(function(index, element) {
    var row = $(this).find('td.total');
    var total = 0;
    $(this).find("td.number").each(function (index, element) {
        total += parseFloat($(v).attr("data-time"));
    });
    row.html(total);
}); 
```

如果您获得这些键， [jQuery map](http://api.jquery.com/jQuery.map/)显然`for (item in array)`不会过滤。`hasOwnProperty()`在这种情况下，我猜你需要自己编写逻辑。

# c# - Monodroid BitmapFactory.DecodeFileDescriptor 位图始终为空

> ID：14193470
> 
> 赞同：0
> 
> 时间：2013-01-07T09:53:25.793
> 
> 标签：c#, java, android, xamarin.android

我使用以下方法来防止内存不足异常，但位图始终为空。有人有想法吗？

```
public Bitmap readBitmap(Android.Net.Uri selectedImage) {

        Bitmap bm = null;
        BitmapFactory.Options options = new BitmapFactory.Options();
        options.InSampleSize = 9;
        AssetFileDescriptor fileDescriptor = null;
        try {
            fileDescriptor =  this.ContentResolver.OpenAssetFileDescriptor(selectedImage,"r");
        } catch (FileNotFoundException e) {
            Toast.MakeText(this, e.Message, ToastLength.Long);
        }
        finally{
            try {
                bm =  BitmapFactory.DecodeFileDescriptor(fileDescriptor.FileDescriptor, null, options);
                fileDescriptor.Close();
            } catch (IOException) {
            }
        }
        return bm;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-13T20:47:54.450

是的。这是谷歌的另一个错误。解决方案是这样做：

```
bm =  BitmapFactory.decodeStream(new FileInputStream(fileDescriptor)); 
```

代替

```
bm =  BitmapFactory.DecodeFileDescriptor(fileDescriptor.FileDescriptor, null, options); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T10:12:10.567

也许 Uri 不正确并被`FileNotFoundException`抛出。但是您看不到这一点，因为您`show()`在 catch 子句中缺少 Toast 的方法。

应该是这样的：

```
 Toast.MakeText(this, e.Message, ToastLength.Long).show(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T10:06:28.540

抓住机会，尝试像这样修改

```
} catch (IOException e) {
   Log.v ("Message", ""+e.message);
        } 
```

所以你可以看到它返回 null 的错误是什么

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T10:01:41.490

`BitmapFactory.DecodeFileDescriptor`如果 bm 为空，则必须抛出异常。

# java - 无法使用 eclipse helios 设置 apache 轴 2

> ID：14193475
> 
> 赞同：2
> 
> 时间：2013-01-07T09:53:52.017
> 
> 标签：java, eclipse, soap, axis2

我试图在 Eclipse 中设置 Apache Axis2 Web 服务，但我在控制台中收到以下错误。我按照[这个](http://blog.sencide.com/2011/06/create-web-service-using-apache-axis2.html)博客设置了一个简单的网络服务。但我似乎错过了一些东西。我正在使用 Windows 7 64 位。

```
Jan 07, 2013 2:57:33 PM org.apache.catalina.core.AprLifecycleListener init
INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: C:\Program Files\Java\jre7\bin;C:\Windows\Sun\Java\bin;C:\Windows\system32;C:\Windows;C:\Program Files (x86)\PC Connectivity Solution\;C:\Program Files (x86)\NVIDIA Corporation\PhysX\Common;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Program Files (x86)\Git\cmd;C:\Program Files (x86)\Heroku\bin;C:\Program Files (x86)\git\bin;C:\Program Files (x86)\git\cmd;C:\Program Files\nodejs\;C:\Program Files (x86)\Microsoft SQL Server\100\Tools\Binn\;C:\Program Files\Microsoft SQL Server\100\Tools\Binn\;C:\Program Files\Microsoft SQL     Server\100\DTS\Binn\;C:\Ruby193\bin;C:\Users\intern\AppData\Roaming\npm\;C:\Python27;C:\Python27\Lib\site-    packages\django\bin;D:\shortcuts;C:\Python27\Scripts;C:\mongodb\bin;D:\shortcuts\ffmpg;C:\Program Files\Java\jdk1.7.0_10\bin;;.
Jan 07, 2013 2:57:34 PM org.apache.tomcat.util.digester.SetPropertiesRule begin
WARNING: [SetPropertiesRule]{Server/Service/Engine/Host/Context} Setting property 'source' to 'org.eclipse.jst.jee.server:myFirstWebService' did not find a matching property.
Jan 07, 2013 2:57:34 PM org.apache.tomcat.util.digester.SetPropertiesRule begin
WARNING: [SetPropertiesRule]{Server/Service/Engine/Host/Context} Setting property 'source' to 'org.eclipse.jst.jee.server:MyWebService' did not find a matching property.
Jan 07, 2013 2:57:34 PM org.apache.coyote.http11.Http11Protocol init
INFO: Initializing Coyote HTTP/1.1 on http-8080
Jan 07, 2013 2:57:34 PM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 639 ms
Jan 07, 2013 2:57:34 PM org.apache.catalina.core.StandardService start
INFO: Starting service Catalina
Jan 07, 2013 2:57:34 PM org.apache.catalina.core.StandardEngine start
INFO: Starting Servlet Engine: Apache Tomcat/6.0.36
[WARN] Web application uses org.apache.axis2.transport.http.AxisAdminServlet; please update web.xml to use org.apache.axis2.webapp.AxisAdminServlet instead
[INFO] Clustering has been disabled
[INFO] Deploying module: addressing-1.6.2 - file:/C:/Users/intern/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/MyWebService/WEB-INF/modules/addressing-1.6.2.mar
[INFO] Deploying module: metadataExchange-1.6.2 - file:/C:/Users/intern/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/MyWebService/WEB-INF/modules/mex-1.6.2.mar
[INFO] Deploying module: mtompolicy-1.6.2 - file:/C:/Users/intern/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/MyWebService/WEB-INF/modules/mtompolicy-1.6.2.mar
[INFO] Deploying module: ping-1.6.2 - file:/C:/Users/intern/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/MyWebService/WEB-INF/modules/ping-1.6.2.mar
[INFO] Deploying module: script-1.6.2 - file:/C:/Users/intern/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/MyWebService/WEB-INF/modules/scripting-1.6.2.mar
[INFO] Deploying module: soapmonitor-1.6.2 - file:/C:/Users/intern/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/MyWebService/WEB-INF/modules/soapmonitor-1.6.2.mar
[INFO] Deploying Web service: version.aar - file:/C:/Users/intern/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/MyWebService/WEB-INF/services/version.aar
[INFO] Deploying Web service: WebService - file:/C:/Users/intern/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/MyWebService/WEB-INF/services/WebService/
[WARN] No transportReceiver for org.apache.axis2.transport.http.AxisServletListener found. An instance for HTTP will be configured automatically. Please update your axis2.xml     file!
Jan 07, 2013 2:57:35 PM org.apache.coyote.http11.Http11Protocol start
INFO: Starting Coyote HTTP/1.1 on http-8080
Jan 07, 2013 2:57:35 PM org.apache.jk.common.ChannelSocket init
INFO: JK: ajp13 listening on /0.0.0.0:8009
Jan 07, 2013 2:57:35 PM org.apache.jk.server.JkMain start
INFO: Jk running ID=0 time=0/15  config=null
Jan 07, 2013 2:57:35 PM org.apache.catalina.startup.Catalina start
INFO: Server startup in 1706 ms
Jan 07, 2013 2:57:35 PM org.apache.catalina.core.StandardServer await
SEVERE: StandardServer.await: create[8005]: 
java.net.BindException: Address already in use: JVM_Bind
    at java.net.DualStackPlainSocketImpl.bind0(Native Method)
    at java.net.DualStackPlainSocketImpl.socketBind(Unknown Source)
    at java.net.AbstractPlainSocketImpl.bind(Unknown Source)
    at java.net.PlainSocketImpl.bind(Unknown Source)
    at java.net.ServerSocket.bind(Unknown Source)
    at java.net.ServerSocket.<init>(Unknown Source)
    at org.apache.catalina.core.StandardServer.await(StandardServer.java:406)
    at org.apache.catalina.startup.Catalina.await(Catalina.java:676)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:628)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)

Jan 07, 2013 2:57:35 PM org.apache.coyote.http11.Http11Protocol pause
INFO: Pausing Coyote HTTP/1.1 on http-8080
Jan 07, 2013 2:57:36 PM org.apache.catalina.core.StandardService stop
INFO: Stopping service Catalina
Jan 07, 2013 2:57:36 PM org.apache.catalina.loader.WebappClassLoader checkThreadLocalMapForLeaks
SEVERE: The web application [/MyWebService] created a ThreadLocal with key of type [org.apache.axiom.util.UIDGenerator$1] (value [org.apache.axiom.util.UIDGenerator$1@29fbe6f8    ]) and a value of type [long[]] (value [[J@58f8b950]) but failed to remove it when the web application was stopped. This is very likely to create a memory leak.
Jan 07, 2013 2:57:37 PM org.apache.coyote.http11.Http11Protocol destroy
INFO: Stopping Coyote HTTP/1.1 on http-8080 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T10:14:09.417

我发现了问题。我的 Tomcat 作为 Windows 服务运行，它在 8080 处阻塞了 localhost 端口号。我不得不禁用该服务并在 eclipse 中运行它工作得很好:)

# character-encoding - Win 7 和 Win 2003 Server 显示 ascii 值不同

> ID：14193477
> 
> 赞同：1
> 
> 时间：2013-01-07T09:53:54.093
> 
> 标签：character-encoding, vb6, ascii

在我们的 Visual Basic 6.0 程序中，我们使用函数 chr(11) 附加了一些字符串并显示在文本框中。

在 Windows 2003 Server 中，文本框中的值显示为“a box(for chr(11)) 后跟字符串” 在 Windows 7 中，文本框中的值显示为“♂(for chr(11) 后跟字符串” "

谁能建议它为什么会这样？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T14:51:22.807

这可能是字体的差异。

即使使用相同的“面名”，实际安装的字体也会在支持哪些字形等方面有所不同。

请注意，您的程序在任何意义上都不是使用 ASCII，而是使用 ANSI。从程序中的 Unicode 到用于显示的 ANSI 的映射也因区域设置和字符集设置而异。字符集也可能是这里的一个因素。

`Chr(11)`说“取 11 并将其视为当前代码页中的 ANSI 字符，将其转换为 Unicode，然后将其作为变体字符串返回。”

`Chr$(11)`通过返回一个字符串来消除一些开销，`ChrW$(11)`甚至更干净，通过 ANSI 到 Unicode 的转换也跳过了清洗。

更快的是只为这个字符使用命名常量`vbVerticalTab`。

但这些都不会影响*display*。这更多的是避免不必要的开销的问题。

你依赖的东西是不可靠的，即不可打印的字符总是有一个字形。您看到的那个“盒子”符号意味着该字符没有可用的字形。

即使字符映射小程序也不显示低于 33 (&H21) 的值的字形映射。

# jquery - 如何在ajax返回数据中过滤掉“jquery.js”文件

> ID：14193482
> 
> 赞同：1
> 
> 时间：2013-01-07T09:54:16.823
> 
> 标签：jquery, ajax, filter

我为我的代码使用了一个 php 框架 (Yii)，它在每个 html 表单中自动包含 jquery.js 以用于其验证功能。我对此无能为力。

**这是问题所在：**

我通过 ajax 获得了一段 html，包括表单和 jquery.js 文件，以显示在占位符中。我已经在页面中有一个 jquery.js。所以第二个进来了，所有其他 jquery 插件都停止工作了，我应该重新启动它们！我需要从我的 ajax 返回数据中过滤掉第二个 jquery.js。我该怎么做？

```
jQuery.ajax({
  type: "GET",
  url: $params.url,
  data: $data,
  dataType: $dataType,
  success: function(data){
    // data includes jquery.js code
    callback(data);
  }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T11:02:55.290

如何使用具有以下内容的回调函数：

```
callback(data.replace(/<script.+script>/, "")); 
```

# wpf - 如何在 asp.net MVC 中使用 TFS API 获取用户组

> ID：14193484
> 
> 赞同：0
> 
> 时间：2013-01-07T09:54:21.517
> 
> 标签：wpf, asp.net-mvc, asp.net-mvc-3, tfs

[http://blogs.microsoft.co.il/blogs/shair/archive/2011/12/07/tfs-api-part-41-manage-groups-and-members.aspx](http://blogs.microsoft.co.il/blogs/shair/archive/2011/12/07/tfs-api-part-41-manage-groups-and-members.aspx)

他无法获取属于使用基于 TeamProjectPicker 即时 WPF 的用户的组名：

```
private void BtnConnectClick(object sender, RoutedEventArgs e)
    {
        DisableUi();
        var tpp = new TeamProjectPicker(TeamProjectPickerMode.NoProject, false);
        tpp.ShowDialog();
        if (tpp.SelectedTeamProjectCollection == null) return;

        EnableUi();

        _tfs = tpp.SelectedTeamProjectCollection;
        _css = (ICommonStructureService)_tfs.GetService<ICommonStructureService>();
        _gss = (IGroupSecurityService)_tfs.GetService<IGroupSecurityService>();

        var allSids = _gss.ReadIdentity(SearchFactor.AccountName,
            "Project Collection Valid Users", QueryMembership.Expanded);

        listAllUsers.ItemsSource = _gss.ReadIdentities(SearchFactor.Sid, allSids.Members,
            QueryMembership.None).Where(a => a.Type == IdentityType.WindowsUser
                || a.Type == IdentityType.WindowsGroup);

        listProjects.ItemsSource = _css.ListAllProjects();
    } 
```

在asp.net MVC上实现这个功能时我做不到

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T20:26:50.993

您将需要实现自己的项目选择器或将项目集合 uri 直接提供给该`TfsTeamProjectCollectionfactory.GetProjectCollection`方法。请参阅[此处的文档](http://msdn.microsoft.com/en-us/library/microsoft.teamfoundation.client.tfsteamprojectcollectionfactory.aspx)。

要创建自己的项目选择器，您可以使用 `TfsConfigurationServerFactory.GetConfigurationServer`连接到 TFS 实例。请参阅[此处的文档](http://msdn.microsoft.com/en-us/library/microsoft.teamfoundation.client.tfsconfigurationserverfactory_methods.aspx)。然后，您可以从那里查询所有团队项目集合和基础团队项目。[有关详细信息，请参阅以下文档](http://msdn.microsoft.com/en-us/library/bb286958.aspx)。

# api - 如何在 REST API 中返回资源计数？

> ID：14193485
> 
> 赞同：4
> 
> 时间：2013-01-07T09:54:24.383
> 
> 标签：api, rest, resources, get, count

假设我有一个 REST API，它具有检索用户和用户照片的基本方法。例如：

```
// Get a user:
GET /user/123

// Get the photos of a user:
GET /user/123/photos

// Get a photo:
GET /photo/789 
```

这很简单，但是现在我还需要一种方法来检索特定用户的照片数量。我不想检索所有照片，因为这会减慢一切并且没有必要。在 REST API 中做到这一点的最佳方法是什么？

我考虑过实现类似`GET /user/123/photo_count`“photo_count”之类的东西不是资源，所以这似乎不对。

我将如何在 REST API 中正确呈现此类信息？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T13:32:33.263

```
// Get the photos of a user: 
GET /user/123/photos 
```

这不必实际返回照片，它可以只返回链接列表。

它甚至可以是前 n 个链接的部分列表，其中包含有关总数的信息，以及获取下一个/上一个批次的链接。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-07T14:00:08.763

你可以做一些“自定义”的事情，比如将计数作为响应头返回。然后为了获得计数，您将发出一个[HEAD](http://en.wikipedia.org/wiki/HEAD_%28HTTP%29#Request_methods)，它应该返回没有响应正文的标题（即实际上不加载照片）。

```
GET /user/123/photos
==>
Headers:
X-Count 23
Body:
<photos>
<photo id="1">...</photo>
<photo id="2">...</photo>
...
</photos>

HEAD  /user/123/photos
==>
Headers:
X-Count 23
Body:
none 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-14T19:01:21.227

就像对原始帖子的评论一样，您可以将照片计数作为用户“对象”的属性返回。该`GET /user/123`调用将简单地返回一个包含图片数量作为属性的对象/json/xml。

# jquery - 全屏按钮图像 Jquery Mobile

> ID：14193490
> 
> 赞同：0
> 
> 时间：2013-01-07T09:54:46.000
> 
> 标签：jquery, html, jquery-mobile, button

我正在使用 jQuery Mobile 创建一个应用程序。我想显示全屏按钮图像。按照计划，点击后，它应该转到某个页面。我创建了一个按钮并替换了我的自定义图像。但我无法将其拉伸到全屏。

请帮助我如何去做。

这是我的代码

CSS

```
.button{
 width:100%;
 background-image: url('home1.png') !important;
 background-repeat: no-repeat;
 background-size: cover;
 } 
```

HTML

```
<div data-role="content" id="content" >
    <a href="#button1" class="button" data-role="button" data-inline="false">button1</a>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T10:20:27.847

尝试设置

```
display:inline-block; 
```

测试在[JsFiddle](http://jsfiddle.net/eMTCC/1/)

很可能 Jquery 正在设置宽度，您可以尝试设置 !important 属性，但如果可以的话，请避免这样做，并且如果您可以尝试避免在背景图像上使用该 !important 属性，则通常建议有是您的 CSS 中进一步的问题

# postgresql - 按自定义命名行排序

> ID：14193497
> 
> 赞同：1
> 
> 时间：2013-01-07T09:55:09.440
> 
> 标签：postgresql

我想通过一些花哨的排名函数对我的 postgres 结果进行排序，但为了简单起见，假设我想添加两个自定义行并按它们排序。

```
SELECT my_table.*,
  extract(epoch from (age(current_date, '2012-09-12 10:43:40'::date)))/3600 AS age_in_hours
  Fancy_function_counting_distance() AS distance
FROM my_table
ORDER BY distance + age_in_hours; 
```

但是，它不起作用，因为我收到错误：`ERROR: column "distance" does not exist`. 是否可以按自定义命名行对我的结果进行排序？

我正在运行 postgres 9.1.x

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T09:58:22.607

根据 SQL 标准，`SELECT`列表中的别名在`ORDER BY`.

您可以使用列位置规范（例如`ORDER BY 1,2`），但这不接受表达式；`ORDER BY 1+2`例如，你不能。因此，您需要使用子查询来生成结果集，然后在外部查询中对其进行排序：

```
SELECT *
FROM (
  SELECT my_table.*,
    extract(epoch from (age(current_date, '2012-09-12 10:43:40'::date)))/3600 AS age_in_hours
    Fancy_function_counting_distance() AS distance
  FROM my_table
) x
ORDER BY distance + age_in_hours; 
```

# jquery - iframe 制作 struts 2 动作调用

> ID：14193501
> 
> 赞同：1
> 
> 时间：2013-01-07T09:55:39.970
> 
> 标签：jquery, iframe, struts

我正在使用 iframe 在页面上显示图像。iframe 正在页面加载时进行操作调用，并且操作正在返回文件输入流。我的问题是，如果文件不可用，那么操作就会中断并在页面上抛出错误。那么，如果服务器上的资源不可用，我将如何处理该错误。

我通过 iframe 进行操作调用的方式是

```
$('#imgLogo').attr('src', '../employer/DisplayLogoOnLoad.action'); 
```

我的动作看起来像

```
companyLogo = getLogoPath();  
companyLogo = getClass().getClassLoader().getResource("../../images/" + companyLogo)
      .getPath();  
    inputStream = new FileInputStream(new File(companyLogo));  
    return SUCCESS; 
```

如果资源为空，请建议我处理 iframe 图像的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T17:36:17.990

不要相信没有2个请求的方法：ajax检查资源是否存在（如果为真则返回资源的路径）如果不退出则不显示图像或显示错误消息（没有返回路径和第二个请求不执行）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T17:18:31.337

不要返回成功的结果，而是返回一些呈现适当的东西。

或者，如果未找到请求的图像，则创建默认图像以流回。

# wpf - 如何使用 scatterview 在可缩放地图上覆盖元素？

> ID：14193503
> 
> 赞同：1
> 
> 时间：2013-01-07T09:55:41.857
> 
> 标签：wpf, arcgis, pixelsense

我正在使用在 Microsoft Surface 2.0（现在称为 PixelSense）上运行的交互式地图（使用 ArcGIS API for WPF）构建一个应用程序。在我的应用程序中，我有一个库容器，其中包含用户可以拖出并放置在地图上某个位置的元素。我通过在地图上的元素层中放置一个散点图（包围整个地图）来实现这一点，如下所示：

```
<esri:ElementLayer>
    <esri:ElementLayer.Children>
        <local:DragDropScatterView esri:ElementLayer.Envelope="-19949487.9573175,-20100080.1372686,20125528.7282505,20131479.5822274" x:Name="ScatterLayer" Background="Transparent" Height="Auto"  Width="Auto" ItemContainerStyle="{StaticResource ScatterItemStyle}" />
    </esri:ElementLayer.Children>
</esri:ElementLayer> 
```

当用户放大或缩小地图时会出现问题，导致已放置在散点视图中的元素完全改变其位置。

为了解决这个问题，我尝试将 scatterview 放在 viewbox 内。当我这样做时，元素在地图中保持正确的位置，但现在出现了一个新问题：当我放大和缩小地图时，元素会放大和缩小（例如，当地图全幅显示时，元素几乎不可见），而首选行为是当用户在地图上放大或缩小时元素保持其大小（例如，像谷歌地图中的标记）。

有人对我如何解决这个问题有建议吗？

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T10:40:29.990

您应该执行以下操作，而不是将 ScatterView 放在 Viewbox 中：

*   将 ScatterViewItem 放置在地图上后，将其[中心点](http://msdn.microsoft.com/en-us/library/microsoft.surface.presentation.controls.scattercontentcontrolbase.center.aspx)（位于视口坐标中）转换为世界坐标（纬度和经度）中的位置。ArcGIS API 应该提供这样的转换。

*   当地图被缩放或以其他方式变换时，将每个世界位置变换回视口坐标并相应地设置每个 ScatterViewItem 的 Center 属性。

为了存储每个 ScatterViewItem 的世界坐标，您可以创建[一个附加属性](http://msdn.microsoft.com/en-us/library/vstudio/ms749011.aspx)。

# python - python 3.2.3 忽略字符串中的转义序列

> ID：14193506
> 
> 赞同：1
> 
> 时间：2013-01-07T09:55:59.137
> 
> 标签：python, string, python-3.x, formatting, escaping

我是 Python 新手，我正在使用我在此处找到的示例之一从文件中读取行并打印它们。我不明白为什么解释器会忽略`\n`转义序列：

### 文本文件：

> 以下哪些是您可能会在 PC 中找到的组件？（选择所有正确答案。）
> 
> A、中央处理器
> 
> B、主板
> 
> C. 键盘
> 
> 答案：A、B 和 E。**\n** PC 内的常见组件包括**\n** CPU、主板和**\n** RAM

### Python代码：

```
questions_fname="Test.txt"

with open(questions_fname, 'r') as f:
    questions = [line.strip() for line in f]

for line in questions:
    print (line)

f.close() 
```

我得到的结果是这样的字符串：

```
Answers: A, B, and E. \nCommon components inside a PC include \nthe CPU,motherboard, and \nRAM 
```

我只是在寻找一种简单的方法来格式化长线以适应屏幕。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T10:06:46.187

您没有`"\n"`在字符串中，`"\\n"`因为您从文件中读取它。如果你想拥有`"\n"`那么你需要解码字符串。请注意，3.x 没有`str.decode()`，因此您不能使用 2.x 中的该机制。

```
3>> codecs.getdecoder('unicode-escape')('foo\\nbar')[0]
'foo\nbar' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T11:09:45.830

尝试以下代码以获得想要的行为......

```
questions_fname = "Test.txt"

with open(questions_fname) as f:
    for line in f:
        line = line.rstrip().replace('\\n', '\n')
        print(line) 
```

`.rstrip()`删除尾随空格，`\n`包括. 原因 对文件内容中您的序列的`.replace()`明确的、用户定义的解释`\n`- 捕获为可打印字符`\`，后跟`n`.

使用`with`构造时，`f.close()`会自动完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T04:49:07.790

`\`是仅在 Python 脚本中的转义字符，而不是在文本文件中。在读取文本文件时，Python 将所有反斜杠转换为`\\`，因此在读取文件时，`\n`变为`\\n`不是换行符

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-07T10:03:56.473

**抱歉 - 这对 Python 3.x 无效（我正在查看标签），但我会留在这里作为参考 - 请参阅@Ignacio 的回答：[https ://stackoverflow.com/a/14193673/1252759](https://stackoverflow.com/a/14193673/1252759)**

如果您有效地获得了`raw string`包含文字字符的 a `'\n'`，那么您可以重新解释该字符串以使其再次成为转义序列：

```
>>> a = r"Answers: A, B, and E. \nCommon components inside a PC include \nthe CPU,motherboard, and \nRAM"
>>> print a
Answers: A, B, and E. \nCommon components inside a PC include \nthe CPU,motherboard, and \nRAM
>>> print a.decode('string_escape')
Answers: A, B, and E. 
Common components inside a PC include 
the CPU,motherboard, and 
RAM 
```

`textwrap`如果您想为某些显示器将线换行到某个宽度，您可能还想查看该模块...

# wpf - WPF 中的 DataGrid 和 Observable 集合

> ID：14193507
> 
> 赞同：4
> 
> 时间：2013-01-07T09:56:10.303
> 
> 标签：wpf

我的 WPF 应用程序中有一个如下所示的数据网格。

```
<Window x:Class="MyApp.TestWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <Grid>
    <DataGrid x:Name="dgTest"  ItemsSource="{Binding TestSource}" AutoGenerateColumns="False" >
            <DataGrid.Columns>
                <DataGridTemplateColumn Width="125" >
                       <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                                      <TextBox Text="{Binding Column1}"></TextBox>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
                <DataGridTemplateColumn Width="500" >
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <TextBox Text="{Binding Column2}"></TextBox>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
            </DataGrid.Columns>
        </DataGrid>
         <Button Click="SaveButton_Click">Save</Button>
    </Grid>
</Window> 
```

我使用以下代码绑定它。现在我的要求是当用户在数据网格内的这些文本框中输入一些文本并单击保存按钮时，它应该更新数据库。我怎样才能做到这一点？

```
namespace MyApp
{
    public partial class TestWindow: Window
    {
        private ObservableCollection<Test> _testSource
        public ObservableCollection<Test> TestSource
        {
            get
            {
                return _testSource;
            }
            set
            {
                _testSource = value;
                OnPropertyChanged("TestSource");
            }
        }

        public event PropertyChangedEventHandler PropertyChanged;
        private void OnPropertyChanged(string propName)
        {
            if (PropertyChanged != null)
            {
                PropertyChanged.Invoke(this, new PropertyChangedEventArgs(propName));
            }
        }

        public TestWindow()
        {
            InitializeComponent();
            TestSource= new ObservableCollection<Test>();
             string strConnString = Application.Current.Properties["connectionStr"].ToString();
             SqlConnection con = new SqlConnection(strConnString);
            SqlCommand cmd = new SqlCommand("SELECT Column1,Column2 FROM MyTable", con);
            SqlDataAdapter da = new SqlDataAdapter(cmd);
            DataTable dtTest = new DataTable();
            da.Fill(dtTest);
            foreach (DataRow row in dtTest)
            {
                Test cd = new Test();
                cd.Column1 = row["Column1"].ToString();
                cd.Column2 = row["Column2"].ToString();
                TestSource.Add(cd);
            }
            this.DataContext = this;
        }

        private void SaveButton_Click(object sender, RoutedEventArgs e)
        {
             // here I need to get the updated ObservableCollection, but now it is showing old data
             foreach Test t in TestSource)
            {
                string a = t.Column1;
                string b = t.Column2;
            }
        }
    }

    public class Test: 
    {
        public string Column1{ get; set; }
        public string Column2{ get; set; }
    }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-07T19:12:55.483

在创建自己的 UI `DataGridTemplateColumn`（或[自定义`DataGrid.RowStyle`](https://stackoverflow.com/questions/13943325/how-to-edit-rows-in-a-wpf-datagrid-with-a-custom-rowstyle)）时，DataGrid 会将`UpdateSourceTrigger`所有绑定上的（即何时更新基础数据）更改为`Explicit`您自己未指定它们的情况。

此处简要描述了该“功能”：[5 Random Gotchas with the WPF DataGrid](http://blogs.msdn.com/b/vinsibal/archive/2009/04/07/5-random-gotchas-with-the-wpf-datagrid.aspx)，尽管作者说无论您是否自己设置都会发生这种情况`UpdateSourceTrigger`，但自己设置确实有效（至少在.Net 4.0中）。

用于`LostFocus`模仿默认`TextBox`行为（`PropertyChanged`等等`CheckBox`）：

```
...
<TextBox Text="{Binding Column1, UpdateSourceTrigger=LostFocus}"></TextBox>
...
<TextBox Text="{Binding Column2, UpdateSourceTrigger=LostFocus}"></TextBox>
... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T10:44:49.683

我想做一些旁注。
1）您不需要在您的 TestSource 属性上有一个设置器。您设置了一次这个值，并且在设置 DataContext 之前，所以这是没有意义的。
2）您没有在测试类上实现 INotifyPropertyChanged
3）您在 UI 线程上加载数据。这可能会导致应用程序在加载数据时冻结（变得无响应）。

尝试将 C# 代码更新为以下内容：

```
namespace MyApp
{
    public partial class TestWindow: Window
    {
        private ObservableCollection<Test> _testSource = new ObservableCollection<Test>();

        public TestWindow()
        {
            InitializeComponent();

            //NOTE: this blocks the UI thread. Slow DB/Network will freeze the App while we wait. 
            // This should be done on a background thread.
            string strConnString = Application.Current.Properties["connectionStr"].ToString();
            SqlConnection con = new SqlConnection(strConnString);
            SqlCommand cmd = new SqlCommand("SELECT Column1,Column2 FROM MyTable", con);
            SqlDataAdapter da = new SqlDataAdapter(cmd);
            DataTable dtTest = new DataTable();
            da.Fill(dtTest);
            foreach (DataRow row in dtTest)
            {
                Test cd = new Test();
                cd.Column1 = row["Column1"].ToString();
                cd.Column2 = row["Column2"].ToString();
                TestSource.Add(cd);
            }
            this.DataContext = this;
        }

        public ObservableCollection<Test> TestSource { get { return _testSource; } }

        private void SaveButton_Click(object sender, RoutedEventArgs e)
        {
            var rowIdx = 0;
            foreach(var t in TestSource)
            {
                string a = t.Column1;
                string b = t.Column2;

                Console.WriteLine("Row {0}, col1='{1}', col2='{2}'", rowIdx++, a, b);
            }
        }
    }

    public sealed class Test : INotifyPropertyChanged
    {
        private string _column1;
        private string _column2;

        public string Column1
        { 
            get{return _column1;}
            set
            {
                if(_column1!=value)
                {
                    _column1 = value;
                    OnPropertyChanged("Column1");
                }
            }           
        }
        public string Column2
        { 
            get{return _column2;}
            set
            {
                if(_column2!=value)
                {
                    _column2 = value;
                    OnPropertyChanged("Column2");
                }
            }           
        }

        public event PropertyChangedEventHandler PropertyChanged;
        private void OnPropertyChanged(string propName)
        {
            var handler = PropertyChanged;
            if (handler != null)
            {
                handler(this, new PropertyChangedEventArgs(propName));
            }
        }
    }
} 
```

您可能还想将绑定更新为双向，但我认为这是默认设置。

```
<TextBox Text="{Binding Column1, Mode=TwoWay}" /> 
```

# grails-orm - 如何使用由自己的字段制作的复合 id 保存 GORM 类？

> ID：14193512
> 
> 赞同：1
> 
> 时间：2013-01-07T09:56:35.227
> 
> 标签：grails-orm, grails-2.0

这是我的域类

```
 class ReturnReason implements Serializable {

                Long returnReasonId
                Long languageId
                String name

                int hashCode() {
                    def builder = new HashCodeBuilder()
                    builder.append returnReasonId
                    builder.append languageId
                    builder.toHashCode()
                }

                boolean equals(other) {
                    if (other == null) return false
                    def builder = new EqualsBuilder()
                    builder.append returnReasonId, other.returnReasonId
                    builder.append languageId, other.languageId
                    builder.isEquals()
                }

                static mapping = {
                    id composite: ["returnReasonId", "languageId"]
                    version false
                }

                static constraints = {
                    name maxSize: 128
                }
            } 
```

这是我保存域类的控制器代码。

```
def save() {
    ReturnReason returnReasonInstance = new ReturnReason(params)
    returnReasonInstance.languageId = 1
    if (!returnReasonInstance.save(flush: true)) {
        render(view: "create", model: [returnReasonInstance: returnReasonInstance])
    }
    redirect(action: "list")
} 
```

在尝试保存在我的控制器中时，returnReasonId 出现错误，即 returnReasonId 拒绝值 null。怎么修。？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T09:13:30.993

在保存操作中写入 validate:false

```
def save() {
    ReturnStatus returnStatusInstance = new ReturnStatus(params)
    returnStatusInstance.languageId = 1
    if (!returnStatusInstance.save(validate: false, flush: true)) {
        render(view: "create", model: [returnStatusInstance: returnStatusInstance])
    }
    redirect(action: "list")
} 
```

# java - 在 Eclipse RCP 应用程序上使用 OLE、Java 保存 Excel 文件

> ID：14193515
> 
> 赞同：0
> 
> 时间：2013-01-07T09:56:46.913
> 
> 标签：java, eclipse, excel, eclipse-rcp, ole

我尝试保存 Excel 文件。Excel 文件是带有 makros (*.xltm) 的模板。我可以打开文件并编辑内容，但如果我尝试保存目标 Excel 文件已损坏。我尝试使用以下方式保存文件：

```
int id = _workbook.getIDsOfNames(new String[] {"Save"})[0];
_workbook.invoke(id); 
```

或/和

```
_xlsClientSite.save(_file, true); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T16:29:16.240

您可以尝试在 Save 调用中指定文件格式。

如果幸运的话，您可以在 Excel 帮助中找到所需的文件格式代码。如果在那里找不到所需的东西，则必须使用**OLEVIEW.EXE**程序亲自动手。它的副本可能位于您的硬盘驱动器某处，但如果没有，通过快速谷歌搜索很容易找到副本。

要使用**OLEVIEW.EXE**：

*   运行
*   破解打开“类型库”条目
*   查找您正在使用的 Excel 版本
*   打开该项目
*   搜索为字符串“XlFileFormat”显示的大量文本
*   检查 XLFileFormat 枚举是否有希望的代码

如果您像我一样使用 Office2007（“Excel12”），您可以尝试以下值之一：

*   xlOpenXMLWorkbookMacroEnabled = 52
*   xlOpenXMLTemplateMacroEnabled = 53

这是我使用 OLE 保存 Excel 文件的一种方法：

```
/**
 * Save the given workbook in the specified format.
 * 
 * @param controlSiteAuto the OLE control site to use
 * @param filepath the file to save to
 * @param formatCode XlFileFormat code representing the file format to save as
 * @param replaceExistingWithoutPrompt true to replace an existing file quietly, false to ask the user first
 */
public void saveWorkbook(OleAutomation controlSiteAuto, String filepath, Integer formatCode, boolean replaceExistingWithoutPrompt) {
    Variant[] args = null;
    Variant result = null;
    try {
        // suppress "replace existing?" prompt, if necessary
        if (replaceExistingWithoutPrompt) {
            setPropertyOnObject(controlSiteAuto, "Application", "DisplayAlerts", "False");
        }

        // if the given formatCode is null, for some reason, use a reasonable default
        if (formatCode == null) {
            formatCode = 51;    // xlWorkbookDefault=51
        }

        // save the workbook
        int[] id = controlSiteAuto.getIDsOfNames(new String[] {"SaveAs", "FileName", "FileFormat"});
        args = new Variant[2];
        args[0] = new Variant(filepath);
        args[1] = new Variant(formatCode);
        result = controlSiteAuto.invoke(id[0], args);

        if (result == null || !result.getBoolean()) {
            throw new RuntimeException("Unable to save active workbook");
        }

        // enable alerts again, if necessary
        if (replaceExistingWithoutPrompt) {
            setPropertyOnObject(controlSiteAuto, "Application", "DisplayAlerts", "True");
        }
    } finally {
        cleanup(args);
        cleanup(result);
    }
}

protected void cleanup(Variant[] variants) {
    if (variants != null) {
        for (int i = 0; i < variants.length; i++) {
            if (variants[i] != null) {
                variants[i].dispose();
            }
        }
    }
} 
```

# java - 在 jaxrs 中获取 javax.xml.bind.UnmarshalException

> ID：14193516
> 
> 赞同：0
> 
> 时间：2013-01-07T09:56:46.810
> 
> 标签：java, rest, jax-rs

给带有多个元素标签的 xml 时，我得到一个 javax.xml.bind.UnmarshalException。我的 JAXB 注释类如下所示。

```
@XmlRootElement
    public class Group {

        private String id;
        private String name;

        @XmlElementWrapper(name="groups")
        @XmlElement(name="group")
        private ArrayList<Group> grouplist;

        public void setGrouplist(ArrayList<Group> grouplist){
            this.grouplist=grouplist;
        }

        public ArrayList<Group> getGrouplist(){
            return grouplist;
        }
           ---------------------------
           ---------------------------
           ------------------------- 
```

输入的xml会是这样的......

```
<groups>
<group>
<id>1</id>
<name>asd</name>
<designation>SE</designation>
</group>
</groups> 
```

我的资源是这样的。

```
 @POST
    @Consumes(MediaType.APPLICATION_XML)
    @Produces(MediaType.APPLICATION_XML)    
 public Response addGroup(@Context HttpServletRequest req)throws JAXBException,IOException{
 JAXBContext jaxb = JAXBContext.newInstance(Group.class);
 Group grps= (Group)jaxb.createUnmarshaller().unmarshal(req.getInputStream()); 
```

当我从 req 提供上述 xml 时，我得到以下异常

```
 com.sun.jersey.spi.container.ContainerResponse mapMappableContainerException
SEVERE: The exception contained within MappableContainerException could not be mapped to a response, re-throwing to the HTTP container
javax.xml.bind.UnmarshalException: unexpected element (uri:"", local:"groups"). Expected elements are <{}group>: unexpected element (uri:"", local:"groups"). Expected elements are <{}group> 
```

当我通过删除组标记和相应的@xmlelementWrapper 数组列表在我的 xml 中给一个组时，上述工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T16:49:40.160

我认为您在班级中缺少一个根元素。将其更改为：

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlRootElement
public class Group {
...
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-31T17:13:33.350

如果您在使用 Apache CXF 的 JAX-RS 2.0 客户端时遇到此问题，您可能会遇到[CXF-5980](https://issues.apache.org/jira/browse/CXF-5980)。

# ruby-on-rails-3 - 将模型中的方法转换为范围：Rails3

> ID：14193520
> 
> 赞同：0
> 
> 时间：2013-01-07T09:57:07.937
> 
> 标签：ruby-on-rails-3, scope, active-record-query

我在我的模型项目中定义了两种正常工作的方法。

```
1\.  def completed(user)
         Project.find_by_sql(["Select p.id from bids b LEFT JOIN tasks t ON b.task_id=t.id LEFT  JOIN projects p ON p.id = t.project_id where(b.bidder_id=? and b.status=? and p.status=?) group by p.id", user.id, 'ACCEPTED', 'COMPLETE']).count
    end

2\.   def current(user)
        Project.find_by_sql(["Select p.id from bids b LEFT JOIN tasks t ON b.task_id=t.id LEFT JOIN projects p ON p.id = t.project_id where(b.bidder_id=? and b.status=? and p.status in ('LAUNCHED', 'CONFIRM', 'STAFFED', 'OVERDUE')) group by p.id", user.id, 'ACCEPTED']).count
    end 
```

当我将这两个转换为项目模型中的范围时

```
1\. `scope :completed, proc{|user| joins("LEFT JOIN tasks t ON t.project_id=projects.id LEFT JOIN bids b ON b.task_id=t.id where(b.bidder_id='#{user.id}' and b.status='ACCEPTED' and p.status='#{COMPLETE_STATUS}')").count("DISTINCT p.id")}`

2\. `scope :current, proc{|user| joins("LEFT JOIN tasks t ON t.project_id=projects.id LEFT JOIN bids b ON b.task_id=t.id where(b.bidder_id='#{user.id}' and b.status='ACCEPTED' and p.status IN ('#{LAUNCHED_STATUS}', '#{CONFIRM_STATUS}', '#{STAFFED_STATUS}', '#{OVERDUE_STATUS}')) group by p.id").count("DISTINCT p.id")}` 
```

我收到错误消息：`ActionView::Template::Error (PG::Error: ERROR: missing FROM-clause entry for table "p"`

请建议我，如何正确编写这两个范围声明。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T13:00:36.260

我不认为范围是产生计数的更好解决方案，因为使用范围是为了获得过滤的对象列表。

无论如何，您的错误似乎来自您尝试调用名为“p”的表。“p”不存在，因为这是您的方法中的别名，您尚未在您的范围内声明。

要解决这个问题，您只需将“p”替换为“projects”。

```
scope :completed, proc{|user| joins("LEFT JOIN tasks t ON t.project_id=projects.id LEFT JOIN bids b ON b.task_id=t.id where(b.bidder_id='#{user.id}' and b.status='ACCEPTED' and projects.status='#{COMPLETE_STATUS}')").count("DISTINCT projects.id")}
scope :current, proc{|user| joins("LEFT JOIN tasks t ON t.project_id=projects.id LEFT JOIN bids b ON b.task_id=t.id where(b.bidder_id='#{user.id}' and b.status='ACCEPTED' and projects.status IN ('#{LAUNCHED_STATUS}', '#{CONFIRM_STATUS}', '#{STAFFED_STATUS}', '#{OVERDUE_STATUS}')) group by projects.id").count("DISTINCT projects.id")} 
```

我希望这有帮助

# iphone - 如何在iphone录音中设置电平表？

> ID：14193522
> 
> 赞同：3
> 
> 时间：2013-01-07T09:57:14.437
> 
> 标签：iphone, objective-c, ios, audio-recording

对于录制声音，我使用以下代码：

```
- (IBAction) recordClicked:(id)sender {
    NSLog(@"play Record");
    if (audioPlayerRecord) {
        if (audioPlayerRecord.isPlaying) [audioPlayerRecord stop];
        else {
            [audioPlayerRecord play];
            [self updateCurrentTimeForPlayer:audioPlayerRecord];
        }
        return;
    } 

    //Initialize playback audio session
    AVAudioSession *audioSession = [AVAudioSession sharedInstance];
    [audioSession setCategory:AVAudioSessionCategoryPlayback error:nil];

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *recDir = [paths objectAtIndex:0];
    NSURL *url = [NSURL fileURLWithPath:[NSString stringWithFormat:@"%@/recordTest.caf", recDir]];

    NSError *error;
    audioPlayerRecord = [[AVAudioPlayer alloc] initWithContentsOfURL:url error:&error];
    [audioPlayerRecord play];
    duration.text = [NSString stringWithFormat:@"%d:%02d", (int)audioPlayerRecord.duration / 60, (int)audioPlayerRecord.duration % 60, nil];
    progressBar.maximumValue = audioPlayerRecord.duration;
    [self updateViewForPlayerState:audioPlayerRecord];
    NSLog(@"Recoder file >");
} 
```

当录音正在进行时，我想显示以下类型的电平表

![电平表](../Images/80012a64f9daf3c76e9580569b55b66f.png)

那么有没有其他简化的方法来解决这个问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T13:27:01.890

检查 AQRecorder.mm ...

寻找：`void AQRecorder::StartRecord(CFStringRef inRecordFile)`

在这里你必须评论/删除de line

```
url = CFURLCreateWithString(kCFAllocatorDefault, (CFStringRef)recordFile, NULL); 
```

和

```
url = CFURLCreateWithFileSystemPath(kCFAllocatorDefault, (CFStringRef)recordFile, kCFURLPOSIXPathStyle, false); 
```

# jquery - 动态谷歌地图加载

> ID：14193526
> 
> 赞同：1
> 
> 时间：2013-01-07T09:57:34.950
> 
> 标签：jquery, google-maps

我正在使用一个应用程序，其中的要求就像我有一个选择框，其中有不同的位置名称作为选项。在选择任何位置时，该位置将在谷歌地图上看到。我正在使用 IFrame 加载谷歌地图。我我不知道如何更改“src”属性或从选择框中选择位置时的“url”是什么，以及如何使用 jquery 在谷歌地图上显示它。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T10:12:15.063

如果您的问题只是“如何更改 iFrame 的 URL”，以下内容可能会有所帮助：

```
$('select').change(function() {
    $('iframe').attr('src', newSrc);
}); 
```

但是，如果您的问题是“如何在更改选择框后使用 javascript 在 Google Maps 地图上设置位置”，我*强烈*建议您使用[Google Maps V3 Javascript API](https://developers.google.com/maps/documentation/javascript/reference)来解决您的问题。例子：

HTML：

```
<select name="location">
    <option value="6,51">Location 1</option>
    <option value="5,52">Location 2</option>
</select>

<div id="map"></div> 
```

Javascript：

```
var map;
$(function() {
   initialize();
   $('select[name=location]').change(function() {
      var latLng = $(this).val().split(',');
      map.setCenter(new google.maps.LatLng(latLng[0], latLng[1]));
   });
});

var initialize = function() {
    var mapOptions = {
        zoom: 8,
        center: new google.maps.LatLng(-34.397, 150.644),
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    map = new google.maps.Map(document.getElementById('map'), mapOptions);

}
</script> 
```

# php - 确定网站主色调

> ID：14193529
> 
> 赞同：-4
> 
> 时间：2013-01-07T09:57:42.733
> 
> 标签：php, javascript

有人能告诉我使用 PHP 和/或 javascript 确定网站（不是图像）中 5-6 种最常用颜色的最佳方法吗？我在网上搜索过，但我能找到的只是一些第三方解决方案（不适合我的需要），并且可以从图像中提取颜色。

如果您能以任何方式提供帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T10:04:13.533

作为一般策略，[获取网站的屏幕截图](https://stackoverflow.com/a/757778/19068)并将其存储为无损图像格式（例如 PNG 但不是 JPEG）。然后遍历所有像素并[获取它们的颜色](http://php.net/manual/en/function.imagecolorat.php)。将结果存储在关联的数组 ( `( 'colour code' => 'count of pixels with that colour' )`) 中。循环遍历该数组并找到最高计数。这些是你的颜色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T10:05:43.680

在线图像颜色提取器：

*   [http://www.coolphptools.com/color_extract](http://www.coolphptools.com/color_extract)
*   [http://jrm.cc/color-palette-generator/index.php](http://jrm.cc/color-palette-generator/index.php?image=rec/girl-with-umbrella.jpg&steps=3&method=precise)

在线网站颜色提取器：

*   [http://www.colr.org/](http://www.colr.org/)（点击“其他东西”）
*   [http://www.colorcombos.com/grabcolors.html](http://www.colorcombos.com/grabcolors.html)
*   [http://www.colorhunter.com/](http://www.colorhunter.com/)

# extjs - 如何在没有css的exjts中实现滑块

> ID：14193531
> 
> 赞同：0
> 
> 时间：2013-01-07T09:57:55.593
> 
> 标签：extjs, slider, extjs3, section508

使用 ExtJS，

```
new Ext.slider.MultiSlider({
        renderTo: 'multi-slider-horizontal',
        width   : 214,
        minValue: 0,
        maxValue: 100,
        values  : [10, 50, 90],
        plugins : new Ext.slider.Tip()
    }); 
```

现在这将显示滑块，但我的要求是在关闭 css 时使其工作？试图使其符合第 508 条。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T14:03:01.097

由于我没有你的工作示例，我将使用[我找到的演示](http://dev.sencha.com/deploy/ext-4.0.0/examples/slider/slider.html)。似乎该页面上的*任何*滑块都没有获得键盘焦点，因此与在没有 CSS 的情况下使其工作相比，您遇到的问题更大。

作为一种解决方法，我可能会建议您在滑块旁边放置一个兼容的文本框，以便有人可以使用该文本框来更新滑块。

# visual-studio - 如果GAC中有多个相同的DLL，VS会选择哪个版本？

> ID：14193536
> 
> 赞同：3
> 
> 时间：2013-01-07T09:58:07.453
> 
> 标签：visual-studio, gac, system.data.sqlite

我在一个涉及 SQLITE 和 .NET 的项目中开发了一段时间。最近，SQLITE 发布了一个新版本。我决定将它安装到 GAC（与之前的安装相同）。现在，我可以在 GAC 中看到两个 dll。VS 会自动选择使用最新的吗？

提前谢谢了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T10:04:38.487

如果应用程序中未使用 DLL 的完整路径，这取决于[DLL 搜索顺序。](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms682586%28v=vs.85%29.aspx)默认顺序（`SafeDllSearchMode`禁用）：

> *   加载应用程序的目录。
> *   当前目录。
> *   系统目录。使用该`GetSystemDirectory`函数获取该目录的路径。
> *   16 位系统目录。没有函数获取这个目录的路径，但是被搜索了。
> *   Windows 目录。使用该`GetWindowsDirectory`函数获取该目录的路径。
> *   PATH 环境变量中列出的目录。请注意，这不包括**App Paths**注册表项指定的每个应用程序路径。计算DLL 搜索路径时不使用**App Paths键。**

# java - 无法在 Mac 上“玩新”

> ID：14193544
> 
> 赞同：0
> 
> 时间：2013-01-07T09:58:29.110
> 
> 标签：java, macos, playframework, playframework-2.0

每当尝试在我的 Mac 上运行时，我都会遇到异常。

详细堆栈跟踪为新应用程序将在 /Users/admin/mine/test2 中创建

```
What is the application name? 
> test2    

Which template do you want to use for this new application? 

1 - Create a simple Scala application
2 - Create a simple Java application
3 - Create an empty project

> 2

java.lang.StackOverflowError
at scala.reflect.ClassManifest$class.newArray(ClassManifest.scala:113)
at scala.reflect.ClassTypeManifest.newArray(ClassManifest.scala:233)
at scala.reflect.ClassManifest$class.newWrappedArray(ClassManifest.scala:133)
at scala.reflect.ClassTypeManifest.newWrappedArray(ClassManifest.scala:233)
at scala.collection.mutable.WrappedArrayBuilder.mkArray(WrappedArrayBuilder.scala:31)
at scala.collection.mutable.WrappedArrayBuilder.resize(WrappedArrayBuilder.scala:37)
at scala.collection.mutable.WrappedArrayBuilder.ensureSize(WrappedArrayBuilder.scala:49)
at scala.collection.mutable.WrappedArrayBuilder.$plus$eq(WrappedArrayBuilder.scala:54)
at scala.collection.mutable.WrappedArrayBuilder.$plus$eq(WrappedArrayBuilder.scala:24)
at scala.collection.TraversableLike$$anonfun$filter$1.apply(TraversableLike.scala:213)
at scala.collection.IndexedSeqOptimized$class.foreach(IndexedSeqOptimized.scala:34)
at scala.collection.mutable.WrappedArray.foreach(WrappedArray.scala:33)
at scala.collection.TraversableLike$class.filter(TraversableLike.scala:212)
at scala.collection.mutable.WrappedArray.filter(WrappedArray.scala:33)
at scala.collection.TraversableLike$class.filterNot(TraversableLike.scala:223)
at scala.collection.mutable.WrappedArray.filterNot(WrappedArray.scala:33)
at scalax.file.FileSystem.fromSeq(FileSystem.scala:97)
at scalax.file.FileSystem.apply(FileSystem.scala:108)
at scalax.file.FileSystem.presentWorkingDirectory(FileSystem.scala:48)
at scalax.file.defaultfs.DefaultFileSystem.doCreateFromSeq(DefaultFileSystem.scala:26)
at scalax.file.defaultfs.DefaultFileSystem.doCreateFromSeq(DefaultFileSystem.scala:20)
at scalax.file.FileSystem.fromString(FileSystem.scala:90)
at scalax.file.defaultfs.DefaultPath.toAbsolute(DefaultPath.scala:40)
at scalax.file.defaultfs.DefaultPath.toAbsolute(DefaultPath.scala:36)
at scalax.file.FileSystem.presentWorkingDirectory(FileSystem.scala:48)
at scalax.file.defaultfs.DefaultFileSystem.doCreateFromSeq(DefaultFileSystem.scala:26)
at scalax.file.defaultfs.DefaultFileSystem.doCreateFromSeq(DefaultFileSystem.scala:20)
at scalax.file.FileSystem.fromString(FileSystem.scala:90)
at scalax.file.defaultfs.DefaultPath.toAbsolute(DefaultPath.scala:40)
at scalax.file.defaultfs.DefaultPath.toAbsolute(DefaultPath.scala:36)
at scalax.file.FileSystem.presentWorkingDirectory(FileSystem.scala:48)
at scalax.file.defaultfs.DefaultFileSystem.doCreateFromSeq(DefaultFileSystem.scala:26)
at scalax.file.defaultfs.DefaultFileSystem.doCreateFromSeq(DefaultFileSystem.scala:20)
....
Error during sbt execution: java.lang.StackOverflowError 
```

Java 版本是 OpenJDK 运行时环境（build 1.7.0-internal-henri_2011_06_08_08_48-b00） Scala 版本是 2.9.1（通过 brew 安装） Sbt 版本是 0.11.3 Playframework 版本是 2.0.4（实际上与 2.10 相同的问题）

那我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T12:58:19.733

这可能是因为 java 版本。您应该尝试另一个 java 版本。我在我的 Mac 上使用 java 版本“1.6.0_37”。

# c# - Mono .Net Profile 4.5 上用于异步/等待的语法错误

> ID：14193564
> 
> 赞同：0
> 
> 时间：2013-01-07T09:59:53.393
> 
> 标签：c#, mono, monodevelop, async-await

我正在尝试在 Mono 中使用 .NET 配置文件为 4.5 的 async/await 命令。一切都正确编译，但语法没有正确突出显示并显示错误（红色波浪下划线）。

我正在使用 MonoDevelop 3.1.1、Mono 3.0.2 运行时、.NET Framework 4.5。有谁知道如何修复语法问题？它的其他一切工作正常，但语法错误/突出显示有点烦人。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T10:04:45.450

简短的回答是“等待语法荧光笔修复”，或者甚至“自己修复并提交补丁”（我*认为*核心代码可用？）；3.1.1 是测试版；他们***几乎肯定***已经知道这个问题，但您可以尝试记录它。

# ios - 重新加载一批 UICollectionView 或 UITableView 更改的好算法？

> ID：14193565
> 
> 赞同：7
> 
> 时间：2013-01-07T09:59:54.423
> 
> 标签：ios, uitableview, uicollectionview

设置：我有一个`UICollectionView`或`UITableView`由一个简单的数组数据源支持。我在控制器中保留了该数据源的副本。

现在，我收到来自系统的通知，说有新数据可用。我得到一个新数组，其中可能已添加、删除和更改了位置。

所以现在我有两个数据对象：

*   与 UI 当前显示的内容同步的上一个数组
*   已添加、删除、移动项目的新数组

为了使 UI 与新数组同步，我需要生成一堆 UI 调用。在 的情况下`UICollectionView`，那些是

```
- (void)insertItemsAtIndexPaths:(NSArray *)indexPaths
- (void)moveItemAtIndexPath:(NSIndexPath *)indexPath toIndexPath:(NSIndexPath *)newIndexPath
- (void)deleteItemsAtIndexPaths:(NSArray *)indexPaths 
```

并且有一组类似的方法用于`UITableView`.

我特别不想重新加载整个表格，因为这比只处理几件物品要贵。

所以，问题是：给定以前的和新的数据源数组，我如何生成正确的 UI 调用集，我什么时候“换掉”我的旧数据源为新的？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-11T22:29:13.780

我认为这在很大程度上等同于*差异*/*补丁*问题，其目的是找到一个文本文件和另一个文本文件之间的最小更改数量，然后应用这些更改。在这种情况下，实现定义了操作：

*   添加或插入
*   删除
*   改变

……但不*动*。*省略move*的原因对我来说并不是很明显，但我强烈怀疑包括*move*将需要非常昂贵的计算才能找到最佳运动。

因此，如果我们将操作限制在上面列出的范围内，[差异文件比较算法](http://www.cs.dartmouth.edu/~doug/diff.pdf)或其[派生](http://en.wikipedia.org/wiki/Diff)算法中描述的 Hunt-McIlroy 算法将找到一组接近最优的更改。

您的问题与经典*diff* / *patch*之间的区别在于您有一个二维表，而*diff* / *patch*处理一维项目集（文本行）。将 2-D 问题转换为 1-D 问题的最佳方法将取决于数据表中倾向于进行的更改的特定特征。

例如，如果表格是*n*行 x *m*列，并且更改倾向于按行分组，或者将行作为一个整体插入或删除，那么您可能最好将表格视为文本文件并执行*逐行区分*。或者，如果更改倾向于按列分组或插入或删除列，则可以逐列进行*差异。*如果更改包括插入或删除单个单元格（结果导致后续单元格向右或向左移动），您可以将表格视为表格中的每个单元格位于文本文件的单独行上，使表格线性化以行优先或列优先的顺序。

但是，在不知道这方面问题的细节的情况下，我倾向于避免过早的优化。*因此，我倾向于首先在m* < *n*时逐行实施 Hunt-McIlroy 算法，如果*n* < *m*则逐列实施，然后在确定使用中的应用程序一段时间之前对其进行分析更复杂的算法版本或将您的问题映射到 Hunt-McIlroy 解决方案的替代映射是必要的。

可以[在 stackoverflow](https://stackoverflow.com/questions/805626/diff-algorithm)上找到对各种*diff*算法的很好的讨论。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-16T22:31:01.753

我开发了一个应用程序来处理我能够解决的非常相似的问题。我期待一个复杂的解决方案，但它真的很简单。以下是您可以解决的方法：

1）创建一个新数组，您将在其中接收新项目并将其命名为“moreItems”，当然也可以合成它。

```
@property (nonatomic, readonly) NSMutableArray *moreItems; 
```

2) 在与您的 TableView 或 CollectionView 链接的 ViewController 的 viewDidLoad 中，分配/初始化此数组：

```
moreItems = [[NSMutableArray alloc] init]; 
```

3）现在您需要添加现有数组，让我们说它是“项目”到您刚刚创建的名为“moreItems”的新数组中。您可以使用“addObjectsFromArray”来做到这一点

```
[moreItems addObjectsFromArray:[channel items]]; 
```

'channel items' 包含它之前收到的对象，它将这些项目添加到新创建的名为 'moreItems' 的数组中。我假设您正在从某个 Web 服务收集数据，因此您可以在 connectionDidFinsihLoading 中实现此步骤。

4) 现在更改 TableView/CollectionView 的数据源并将其替换为新数组“moreItems”

5) 下一个问题是您不想重新加载整个 tableview 并且想要处理新项目。要拥有此功能，您需要持久化项目。您可以使用任何您喜欢的归档或核心数据。

6) 已经获取的项目，你将不得不坚持他们让我们说存档。并在用户打开应用程序时在 tableview 中显示它们，同时它会抓取更多在 Web 服务上更新的项目。所以首先立即显示持久化的项目，然后处理新项目。

7）您需要寻找一些独特的对象，在我的情况下它是“链接”，因为每个项目都有不同的链接，我可以在此基础上对它们进行排序和处理。你还需要使用

```
- (BOOL) isEqual:(id)object 
```

比较 Web 服务上的链接和 tableview 中已经存在的链接。此步骤是必要的，因为这样您的应用程序将不会添加带有已在 tableview 中的链接的项目。

8）如果每个项目都有某个日期，您可以使用该日期对它们进行排序并使用“sortUsingComparator”将新的显示在顶部

9）您还需要使用“[[self tableView] insertRowsAtIndexPath:rows withRowAnimation:UITableViewRowAnimationTop”来向用户显示新项目已添加到早期项目之上。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-17T21:31:40.127

> 我特别不想重新加载整个表格，因为这比只处理几件物品要贵。

你确定这是真的吗？除非您有病态的情况，即屏幕上的每个单元格都可见并且有数百个，否则我很难相信“有效”方式会比“蛮力”方式更快。

调用`reloadData`只会要求您的委托更新那些最终将在屏幕上可见的单元格，它*不会*导致整个表格视图重新创建其每个单元格。

如果您正在实施一些改变计算尺寸复杂性的方法（例如`tableView:heightForRowAtIndexPath`），那么使用“高效”方式将不会获得任何好处，因为表格视图无论如何都必须重新计算其所有高度。

我不确定您正在寻找的解决方案是否能解决问题，但我们只是希望我错了。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-17T17:55:47.607

如果您的数据源已经有差异信息，[UITableView reloadRowsAtIndexPaths:withRowAnimation:](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableView_Class/Reference/Reference.html)将降低性能密集型：

# windows-8 - LC.exe”没有找到？

> ID：14193568
> 
> 赞同：0
> 
> 时间：2013-01-07T09:59:56.783
> 
> 标签：windows-8, c#-2.0

目前我已将操作系统从 Windows 7 更改为 Windows 8。虽然自动化运行引用 LC.exe 的 2005 项目，但不会成功编译。但是如果我手动编译这些项目，请编译。

请找出我从命令提示符运行这些项目并自动化时遇到的错误。

> C:\Windows\Microsoft.NET\Framework\v2.0.50727\Microsoft.Common.targets(1679,9): error MSB3091: Task failed because "LC.exe" was not found, or the .NET Framework SDK v2.0没有安装。该任务在注册表项 HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft.NETFramework 的 SDKInstallRootv2.0 值中指定的位置下的“bin”子目录中查找“LC.exe”。您可以通过执行以下操作之一来解决该问题： 1.) 安装 .NET Framework SDK v2.0。2.) 手动将上述注册表项设置到正确的位置。3.) 将正确的位置传递给任务的“ToolPath”参数。

谁能帮帮我吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-22T17:32:10.797

重新安装[.net framework 2.0 SDK](http://www.microsoft.com/en-us/download/details.aspx?id=19988)将解决此问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-29T06:24:06.500

Framework SDK 2.0 拒绝在我的机器上重新安装，但我能够通过[在注册表中弄乱](https://stackoverflow.com/questions/19761155/task-failed-because-lc-exe-was-not-found-after-upgrade-to-windows-8-1/26093607#26093607)来解决这个问题。

# c++ - 解析 xml 文件并发现任何错误

> ID：14193570
> 
> 赞同：3
> 
> 时间：2013-01-07T10:00:01.547
> 
> 标签：c++, xml, parsing

我有一个配置 xml 文件，其中包含一些值，例如

```
<config>
  <map>100,1,200,1</map>
  <image>abc.bmp</image>
  . 
  .
  .
  .
</config> 
```

等等

我导入的文件逐行读取都完成了。我必须验证文件中的字段。像

```
1\.  <map> " "</map> is not empty,no junk value, 
2\.  <image>abc**,**bmp</im*E*ge> (spelling mistake)
3\.  <image>abc.bmp </config> ( missing tags) 
```

我必须开发一种独特的算法，以便不能使用 libs 。有没有什么想法，而不是逐个字符地加载和检查每个字符？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T11:38:23.230

我建议使用 3rd 方库来实现 XML 解析。正确获取 XML 解析的所有细节和陷阱比您想象的要困难得多。

任何完整的 XML 解析器都将很好地支持您的第 2 点和第 3 点。第 1 点将需要 XSL 模式定义和支持模式验证的解析器，或者您需要手动提供额外的验证代码。

如果您担心影响（代码/内存使用），您应该参考这些轻量级 C/C++ XML 解析器：

*   [C++ expat](http://expat.sourceforge.net/)（可用于商业项目）
*   [TinyXml](http://www.grinninglizard.com/tinyxml/)（可用于商业项目）

其他 XML 解析器

*   [POCO XML](http://pocoproject.org/docs/)
*   [Xerces C++](http://xerces.apache.org/xerces-c/)（提供 XSL 模式验证）

# java - Java 如何存储字符串以及子字符串如何在内部工作？

> ID：14193571
> 
> 赞同：9
> 
> 时间：2013-01-07T10:00:03.257
> 
> 标签：java, string, substring

```
class StringTesting {
    public static void main(String args[])
    {
        String str = "abcd";
        String str1 = new String("abcd");
        String str2 = str.substring(0,2);
        String str3 = str.substring(0,2);
        String str4 = str.substring(0,str.length());
        String str5 = str1.substring(0,2);
        String str6 = str1.substring(0,2);
        String str7 = str1.substring(0,str1.length());

        System.out.println(str2 == str3);
        System.out.println(str == str4);
        System.out.println(str5 == str6);
        System.out.println(str1 == str7);
    }
} 
```

这是我在 java 1.6.0_27 上得到的输出：

```
false
true
false
true 
```

有人可以解释一下输出。我知道Java区分存储在堆中的字符串和存储在字符串“公共池”（可以被实习）中的字符串。在内部，它们的表示方式有何不同。它如何改变子字符串算法。请在适当的地方引用书籍/文章/博客等。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-07T10:02:36.473

见评论：

```
 String str = "abcd";  // new String LITERAL which is interned in the pool
    String str1 = new String("abcd"); // new String, not interned: str1 != str
    String str2 = str.substring(0,2); // new String which is a view on str
    String str3 = str.substring(0,2); // same: str3 != str2
    String str7 = str1.substring(0,str1.length()); // special case: str1 is returned 
```

笔记：

*   从 Java 7u6 开始，子字符串返回一个新字符串而不是原始字符串的视图（但这对于该示例没有影响）
*   致电时的特殊情况`str1.substring(0,str1.length());`- 请参阅代码：

    ```
    public String substring(int beginIndex, int endIndex) {
        //some exception checking then
        return ((beginIndex == 0) && (endIndex == value.length)) ? this
                : new String(value, beginIndex, subLen);
    } 
    ```

**编辑**

> 什么是视图？

在 Java 7u6 之前，String 基本上是 a `char[]`，它包含字符串的字符以及偏移量和计数（即字符串由`count`从 中的`offset`位置开始的字符组成`char[]`）。

调用 substring 时，会创建一个具有相同`char[]`但不同的偏移量/计数的新字符串，以有效地在原始字符串上创建视图。（除了上面解释的 count = length 和 offset = 0 时）。

从java 7u6开始，`char[]`每次都新建一个，因为string类中没有more`count`或`offset`字段。

> 公共池具体存储在哪里？

这是特定于实现的。在最近的版本中，池的位置实际上已经移动。在更新的版本中，它存储在堆上。

> 游泳池是如何管理的？

主要特征：

*   字符串文字存储在池中
*   内部字符串存储在池中 ( `new String("abc").intern();`)
*   当一个字符串`S`被保留时（因为它是一个字面量或者因为`intern()`被调用），JVM 将返回一个对池中字符串的引用，如果有一个是`equals`指向的`S`（因此`"abc" == "abc"`应该总是返回 true）。
*   池中的字符串可以被垃圾回收（这意味着如果某个阶段的字符串已满，则可能会从池中删除它）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T10:02:05.467

`String`是不可变的对象。

`String#subString`- 创建一个新字符串。[来源](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/lang/String.java#String.substring%28int,int%29)

在代码中是 [open jdk 6] -

```
 public String substring(int beginIndex, int endIndex) {
    if (beginIndex < 0) {
        throw new StringIndexOutOfBoundsException(beginIndex);
    }
    if (endIndex > value.length) {
        throw new StringIndexOutOfBoundsException(endIndex);
    }
    int subLen = endIndex - beginIndex;
    if (subLen < 0) {
        throw new StringIndexOutOfBoundsException(subLen);
    }
    return ((beginIndex == 0) && (endIndex == value.length)) ? this
            : new String(value, beginIndex, subLen);
} 
```

# wordpress - 如何在wordpress的页面中添加分页

> ID：14193572
> 
> 赞同：1
> 
> 时间：2013-01-07T10:00:09.420
> 
> 标签：wordpress, pagination

我对这个菜鸟问题深感抱歉。我找不到合适的教程。

我的主题仅包括：

*   索引.php
*   页脚.php
*   头文件.php
*   单.php

我想要完成的是创建一个页面，显示来自特定类别的 15 个最近的帖子，并带有分页

下面的代码显示了来自汽车类别的 15 个最近的帖子。

```
<?php get_header(); ?>

<?php
/*
Template Name: CARS
*/
?>

<?php query_posts('category_name=cars&showposts=15'); ?>
<?php while (have_posts()) : the_post(); ?>
        <li><a href="<?php the_permalink(); ?>">
          <?php the_content(); ?>  
          </a>  </li>
        <?php endwhile; ?>

<?php get_footer(); ?> 
```

我创建了cars.php 并粘贴了代码；然后我将它用作 Wordpress 页面上的模板。这显示了 15 个最近的帖子。

在哪里/如何在页面中放置编号的分页而不是（下一个/上一个）超链接？

谢谢。

# asp.net - 使用 asp.net 创建报表和图表

> ID：14193574
> 
> 赞同：0
> 
> 时间：2013-01-07T10:00:13.270
> 
> 标签：asp.net, sql-server, charts

我想为我的 sql server DB 为我的 asp.net 网站创建报告

我正在使用 c#，我希望每个报告都包含一个图表和该图表的数据表，并且可以打印并保存为 pdf。

我也想知道如何绘制这样的图表

![图表](../Images/abb2a49461db7767f7ab8e27dabe982c.png)

从这个查询：

```
SELECT   
     SUM(CASE when ROUND( cast(DATEDIFF(day, BirthDateG,GETDATE())as real)/365.25,0) between 0 and 6  THEN 1 ELSE 0 END) as [Group 1],
     SUM(CASE when ROUND( cast(DATEDIFF(day, BirthDateG,GETDATE())as real)/365.25,0) between 7 and 18  THEN 1 ELSE 0 END) as [Group 2],
     SUM(CASE when ROUND( cast(DATEDIFF(day, BirthDateG,GETDATE())as real)/365.25,0) between 19 and 25  THEN 1 ELSE 0 END) as [Group 3]

FROM Demographic 
group by Gender 
```

# javascript - jqplot中的长标签

> ID：14193576
> 
> 赞同：3
> 
> 时间：2013-01-07T10:00:17.183
> 
> 标签：javascript, jquery, jqplot

我正在使用 jqplot 动态生成一些图表。

我的一些标签是非常长的文本字符串，不能很好地显示 - 我沿 x 轴以 30 度角打印它们，但长标签跑到页面的右侧。

有没有办法为标签设置最大宽度（理想情况下与图表上的条相同）并使标签的文本换行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T13:37:56.557

我认为你可以使用 CSS 来做到这一点。由于`.jqplot-xaxis-tick{ width: xxx px;}`（分别为 jqplot-yaxis-tick、jqplot-y2axis-tick...），来自 xaxis 的刻度是可定制的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T09:25:56.780

几个月前我遇到了同样的问题。这是来自@boro 的一个很好的解决方案的问题：

[JqPlot : 为不包括 y 轴标签的图形区域设置固定高度值](https://stackoverflow.com/questions/11229577/jqplot-set-a-fix-height-value-for-the-graph-area-not-including-y-axe-labels)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-27T10:17:04.673

我用javascript解决了。需要在window.onload上执行脚本，否则无法获取图表的DOM元素。

```
window.onload = function() {
    var xAxisLabel = document.getElementsByClassName("jqplot-xaxis-tick");
    var i;
    for (i = 0; i < xAxisLabel.length; i++) {
        if(i%2 == 0)
        xAxisLabel[i].style.top = "32px";
    }
}; 
```

基本上我将元素的垂直位置更改为 2%0 位置。比你需要调整一些css属性

```
.jqplot-xaxis{margin-top:10px; height: 50px !important;} 
```

.jqplot-xaxis 是 xaxis 标签栏的类。

# playframework - 有没有办法在游戏中使用 EntityManager！框架 1.2.x 404 页面？

> ID：14193585
> 
> 赞同：3
> 
> 时间：2013-01-07T10:00:56.490
> 
> 标签：playframework, playframework-1.x

我们正在提供自定义 404.html 页面（在 app/views/errors 中）以供播放！1.2.5

在服务 404 期间，我们想连接到 DB，但是这样做时我们得到：

```
play.exceptions.JPAException: The JPA context is not initialized. 
JPA Entity Manager automatically start when one or more classes annotated
with the @javax.persistence.Entity annotation are found in the application.
at play.db.jpa.JPA.get(JPA.java:22)
at play.db.jpa.JPA.em(JPA.java:51)
at play.db.jpa.JPQL.em(JPQL.java:18)
at play.db.jpa.JPQL.find(JPQL.java:46)
...
at controllers.Security.check(Security.java:146)
at play.utils.Java.invokeStaticOrParent(Java.java:162)
at play.utils.Java.invokeChildOrStatic(Java.java:184)
at controllers.Secure$Security.invoke(Secure.java:203)
...
at play.server.PlayHandler.serve404(PlayHandler.java:681) 
```

我应该寻求像[https://stackoverflow.com/a/12242994/1444089](https://stackoverflow.com/a/12242994/1444089)这样的解决方案- 所以定义我自己的控制器处理程序而不仅仅是一个模板？

也许有一些配置选项，但找不到。

最后但并非最不重要的一点 - 为什么会发生这种情况，除了典型的播放请求之外，404 是否有理由进入其他请求生命周期？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T09:09:38.500

您可以在 try/finally 中使用 JPAPlugin 方法 startTx 和 closeTx

```
JPAPlugin.startTx(false);
try {
    // your code
} finally {
    JPAPlugin.closeTx();
} 
```

# php - 致命错误：在非对象上调用成员函数 getProductLink()

> ID：14193586
> 
> 赞同：0
> 
> 时间：2013-01-07T10:01:13.930
> 
> 标签：php, prestashop, google-shopping

我刚为 prestashop 买了一个模块，那个人告诉我 PS 1.5 没问题，但实际上不是。

我有很多错误，在一些帮助下，我逐步删除了它们。

其实我有最后一个：

它告诉我
`Fatal error: Call to a member function getProductLink() on a non-object in /htdocs/modules/googleshopping/googleshopping.php on line 420`

这是整个功能

```
 <?php
    /*
     *
     * Google Shopping
     * Licence d'utilisation requise (voir readme.txt)
     *
     *
     */

    require_once(_PS_MODULE_DIR_.'googleshopping'.DIRECTORY_SEPARATOR.'class'.DIRECTORY_SEPARATOR.'myTools.php');
    require_once(_PS_MODULE_DIR_.'googleshopping'.DIRECTORY_SEPARATOR.'class'.DIRECTORY_SEPARATOR.'html2text.inc.php');
    require_once(_PS_MODULE_DIR_.'googleshopping'.DIRECTORY_SEPARATOR.'fonctions.php');             // fonctions

    class GoogleShopping extends Module
    {
        function __construct()
        {
            $this->name = 'googleshopping';
            $this->tab = 'Igwane.com';
            $this->version = '2.0';

            parent::__construct();

            $config = Configuration::getMultiple(array('IGW_DOMAIN', 'IGW_LICNUM'));
            if (isset($config['IGW_DOMAIN']))
                $this->_domain = $config['IGW_DOMAIN'];
            if (isset($config['IGW_LICNUM']))
                $this->_licnum = $config['IGW_LICNUM'];

            if ($this->_domain!=$_SERVER['SERVER_NAME']):
                $this->warning = $this->l('L\'utilisation de ce module n\'est pas autorisée sur ce domaine');
            else:
                try {
                    $handle = fopen("http://www.igwane.com/check_licence.php?domain=".$this->_domain.'&licence='.$this->_licnum, "rb");
                    $valid_licence = '';
                    while (!feof($handle)) {
                      $valid_licence .= fread($handle, 8192);
                    }
                    fclose($handle);
                    if ($valid_licence!='OK'):
                       $this->_licnum=null;
                    endif;

                    if (empty($this->_domain) OR empty($this->_licnum))
                        $this->warning = $this->l('L\'utilisation de ce module n\'est pas autorisée sur ce domaine sans licence (gratuite) - www.igwane.com');

                    $handle = fopen("http://www.igwane.com/googleshopping_current_version.txt", "rb");
                    $current_version = '';
                    while (!feof($handle)) {
                      $current_version .= fread($handle, 8192);
                    }
                    fclose($handle);
                    if ($current_version!=$this->version)
                      $this->warning = $this->l('Une nouvelle version (v'.$current_version.') est disponible.');

                } catch (Exception $e) {

                }
            endif;
            $this->page = basename(__FILE__, '.php');
            $this->displayName = $this->l('Google Shopping by Igwane.com');
            $this->description = $this->l('Exportez vos produits vers Google Shopping.');
        }

        function install()
        {
            if(!parent::install())
            {
                return false;
            }
            return true;
        }

        public function getContent()
        {
            if(isset($_POST['generate']))
            {
                if(isset($_POST['shipping']))
                {
                    Configuration::updateValue('GS_SHIPPING', $_POST['shipping']);

                }

            if(isset($_POST['image']))
            {
                Configuration::updateValue('GS_IMAGE', $_POST['image']);
            }

            // Récupération des langues actives pour la boutique
            $languages = Language::getLanguages();
            foreach ($languages as $i => $lang)
            {
                if(isset($_POST['product_type_'.$lang['iso_code']]))
                {
                    Configuration::updateValue('GS_PRODUCT_TYPE_'.$lang['iso_code'], $_POST['product_type_'.$lang['iso_code']]);
                }
            }

            if(isset($_POST['DOMAIN']))
            {
                Configuration::updateValue('IGW_DOMAIN', rtrim($_POST['DOMAIN']));
            }

            if(isset($_POST['LICNUM']))
            {
                Configuration::updateValue('IGW_LICNUM', $_POST['LICNUM']);
            }

                // Endroit où générer les fichiers
                if(isset($_POST['generate_root']) && $_POST['generate_root'] === "on")
                {
                    Configuration::updateValue('GENERATE_FILE_IN_ROOT', intval(1));

                } else {
                    Configuration::updateValue('GENERATE_FILE_IN_ROOT', intval(0));
                    @mkdir($path_parts["dirname"].'/file_exports', 0755, true);
                    @chmod($path_parts["dirname"].'/file_exports', 0755);
                }
                // Gtin - Code EAN13
                if(isset($_POST['gtin']) && $_POST['gtin'] === "on")
                {
                    Configuration::updateValue('GTIN', intval(1));
                } else {
                    Configuration::updateValue('GTIN', intval(0));
                }
                // Référence fabricant
                if(isset($_POST['mpn']) && $_POST['mpn'] === "on")
                {
                    Configuration::updateValue('MPN', intval(1));
                } else {
                    Configuration::updateValue('MPN', intval(0));
                }
                // Quantité
                if(isset($_POST['quantity']) && $_POST['quantity'] === "on")
                {
                    Configuration::updateValue('QUANTITY', intval(1));
                } else {
                    Configuration::updateValue('QUANTITY', intval(0));
                }
                // Marque
                if(isset($_POST['brand']) && $_POST['brand'] === "on")
                {
                    Configuration::updateValue('BRAND', intval(1));
                } else {
                    Configuration::updateValue('BRAND', intval(0));
                }
                // Description
                if(isset($_POST['description']) && $_POST['description'] != 0)
                {
                    Configuration::updateValue('DESCRIPTION', intval($_POST['description']));
                }

                //Offre spéciale
                if(isset($_POST['featured_product']) && $_POST['featured_product'] === "on")
                {
                    Configuration::updateValue('FEATURED_PRODUCT', intval(1));
                } else {
                    Configuration::updateValue('FEATURED_PRODUCT', intval(0));
                }
                self::generateFileList();
            }

            $output = '<h2>'.$this->displayName.'</h2>';
            $output .= $this->_displayForm();

            // Bloc liens vers les fichiers générés
            $output .= '<fieldset class="space width3">
                            <legend>'.$this->l('Fichiers').'</legend>
                            <p><b>'.$this->l('Liens des fichiers générés').'</b></p>';

            // Récupération des langues actives pour la boutique
            $languages = Language::getLanguages();
            foreach ($languages as $i => $lang)
            {
                if(Configuration::get('GENERATE_FILE_IN_ROOT') == 1)
                {
                    $get_file_url = 'http://'.myTools::getHttpHost(false, true).__PS_BASE_URI__.'googleshopping-'.$lang['iso_code'].'.xml';
                } else {
                    $get_file_url = 'http://'.myTools::getHttpHost(false, true).__PS_BASE_URI__.'modules/'.$this->getName().'/file_exports/googleshopping-'.$lang['iso_code'].'.xml';
                }

                $output .='<a href="'.$get_file_url.'">'.$get_file_url.'</a><br />';
            }

            $output .='<hr><p><b>Génération automatique des fichiers</b></p>
            '.$this->l('Vous devez installer une règle CRON qui appellera le fichier suivant chaque jour ').'<br/>http://'.myTools::getHttpHost(false, true).__PS_BASE_URI__.'modules/'.$this->getName().'/cron.php'.'</p>
            </fieldset>';

            return $output;
        }

        private function _displayForm()
        {

            $options = '';
            $mpn = '';
            $generate_file_in_root = '';
            $quantity = '';
            $brand = '';
            $gtin = '';
            $selected_short = '';
            $selected_long = '';
            $featured_product = '';

            // Checked sur la generate_root box si on veut générer les fichiers à la racine du site
            if(Configuration::get('GENERATE_FILE_IN_ROOT') == 1)
            {
                $generate_file_in_root = "checked";
            }

            // Balises googleshopping optionnelles
            if(Configuration::get('GTIN') == 1)
            {
                $gtin = "checked";
            }
            if(Configuration::get('MPN') == 1)
            {
                $mpn = "checked";
            }
            if(Configuration::get('QUANTITY') == 1)
            {
                $quantity = "checked";
            }
            if(Configuration::get('BRAND') == 1)
            {
                $brand = "checked";
            }
            if(Configuration::get('FEATURED_PRODUCT') == 1)
            {
                $featured_product = "checked";
            }

            (intval(Configuration::get('DESCRIPTION')) === intval(1)) ? $selected_short = "selected" : $selected_long = "selected";

            $form = '
            <form action="'.$_SERVER['REQUEST_URI'].'" method="post">

            <fieldset style="float: right; width: 255px">
                        <legend>'.$this->l('A propos').'</legend>
                        <p style="font-size: 1.5em; font-weight: bold; padding-bottom: 0">'.$this->displayName.' '.$this->version.'</p>
                        <p style="clear: both">
                        '.$this->description.'
                        </p>
                        <p><center><a href="http://www.igwane.com" target="_blank"><img src="http://www.igwane.com/images/logo.jpg"><img src="http://www.igwane.com/images/devis-gratuit.gif"></a></center></p>
                        <p><center><a href="/modules/googleshopping/readme.txt">'.$this->l('Lire les dernières mises à jour (readme.txt)').'</a></p>
                        <p>'.($this->_licnum?'':'<a style="color: #7ba45b; text-decoration: underline;" href="http://www.igwane.com/fr/contact" target="_blank">Demandez votre licence d\'utilisation gratuite (précisez votre nom de domaine)</a>').'</p>
            </fieldset>

            <fieldset class="space width3">
            <legend>'.$this->l('Paramètres').'</legend>';

            if (!$this->_licnum):
            $form.='
                <label>'.$this->l('Licence accordée à').' </label>
                <div class="margin-form">
                    <input type="text" name="DOMAIN" value="'.Configuration::get('IGW_DOMAIN').'" size="40">
                </div>
                <label>'.$this->l('Numéro de licence').' </label>
                <div class="margin-form">
                    <input type="text" name="LICNUM" value="'.Configuration::get('IGW_LICNUM').'" size="40">
                </div>
            ';
            else:
               $form.='
                <label>'.$this->l('Licence accordée à').' </label>
                <div class="margin-form">
                    <input type="text" name="DOMAIN" readonly value="'.Configuration::get('IGW_DOMAIN').' "size="40">
                </div>

            ';
            endif;

            $form.='
                <label>'.$this->l('Type de description').' </label>
                <div class="margin-form">
                    <select name="description">
                        <option value="1" '.$selected_short.'>'.$this->l('Description courte').'</option>
                        <option value="2" '.$selected_long.'>'.$this->l('Description longue').'</option>
                    </select>
                </div>';

            // Récupération des langues actives pour la boutique
            $languages = Language::getLanguages();
            foreach ($languages as $i => $lang)
            {
                $form.='<label title="product_type_'.$lang['iso_code'].'">'.$this->l('Catégorie Google').' '.strtoupper($lang['iso_code']).'</label>
                <div class="margin-form">
                    <input type="text" name="product_type_'.$lang['iso_code'].'" value="'.Configuration::get('GS_PRODUCT_TYPE_'.$lang['iso_code']).'" size="40">
                    <br />(<a href="http://www.google.com/support/merchants/bin/answer.py?answer=160081&query=product_type" target="_blank">'.$this->l('Voir Catégorie Google').'</a>)
                </div>';
            }

            $form.='<label title="[shipping]">'.$this->l('Frais de port').' </label>
                <div class="margin-form">
                    <input type="text" name="shipping" value="'.Configuration::get('GS_SHIPPING').'">
                </div>

                <label title="[image]">'.$this->l('Type de l\'image').' </label>
                <div class="margin-form">
                    <input type="text" name="image" value="'.((Configuration::get('GS_IMAGE')!='')?(Configuration::get('GS_IMAGE')):'large').'">
                </div>

                <hr>

                <table>
                    <tr>
                        <td><label>'.$this->l('Générer les fichiers à la racine du site').'</label></td>
                        <td><input type="checkbox" name="generate_root" '.$generate_file_in_root.'></td>
                    </tr>
                    <tr>
                        <td><label>'.$this->l('Références fabricants').'</label></td>
                        <td><input type="checkbox" name="mpn" '.$mpn.' title="'.$this->l('Recommandé par Google').'"></td>
                    </tr>
                    <tr>
                        <td><label>'.$this->l('Quantité de produits').'</label></td>
                        <td><input type="checkbox" name="quantity" '.$quantity.' title="'.$this->l('Recommandé par Google').'"></td>
                    </tr>
                    <tr>
                        <td><label title="[brand]">'.$this->l('Marque').'</label></td>
                        <td><input type="checkbox" name="brand" '.$brand.' title="'.$this->l('Recommandé par Google').'"></td>
                    </tr>
                    <tr>
                        <td><label>'.$this->l('Code EAN13').'</label></td>
                        <td><input type="checkbox" name="gtin" '.$gtin.' title="'.$this->l('Recommandé par Google').'"></td>
                    </tr>
                    <tr>
                        <td><label>'.$this->l('En solde').'</label></td>
                        <td><input type="checkbox" name="featured_product" '.$featured_product.'></td>
                    </tr>
                </table>
                <br>
                <center><input name="generate" type="submit" value="'.$this->l('Générer les fichiers').'"></center>
            </fieldset>
            </form>
            ';
            return $form;
        }

        public function getName()
        {
            $output = $this->name;
            return $output;
        }

        public function uninstall()
        {
            Configuration::deleteByName('GS_PRODUCT_TYPE');
            Configuration::deleteByName('GS_SHIPPING');

            Configuration::deleteByName('IGW_DOMAIN');
            Configuration::deleteByName('IGW_LICNUM');

            return parent::uninstall();
        }

        public static function generateFileList()
        {
            // Récupération des langues actives pour la boutique
            $languages = Language::getLanguages();
            foreach ($languages as $i => $lang)
            {
                self::generateFile($lang);
            }
        }

        private static function generateFile($lang)
        {
            global $link;
            $path_parts = pathinfo(__FILE__);

            if (Configuration::get('GENERATE_FILE_IN_ROOT')):
                $generate_file_path = '../googleshopping-'.$lang['iso_code'].'.xml';
                else:
                $generate_file_path = $path_parts["dirname"].'/file_exports/googleshopping-'.$lang['iso_code'].'.xml';
                endif;

            //Google Shopping XML
            $xml = '<?xml version="1.0" encoding="UTF-8" ?>'."\n";
            $xml .= '<feed xmlns="http://www.w3.org/2005/Atom" xmlns:g="http://base.google.com/ns/1.0" encoding="UTF-8" >'."\n";
            $xml .= '<title>'.Configuration::get('PS_SHOP_NAME').'</title>'."\n";
            $xml .= '<link href="http://'.myTools::getHttpHost(false, true).__PS_BASE_URI__.'" rel="alternate" type="text/html"/>'."\n";
            $xml .= '<modified>'.date('Y-m-d').'T01:01:01Z</modified><author><name>'.Configuration::get('PS_SHOP_NAME').'</name></author>'."\n";

            $googleshoppingfile = fopen($generate_file_path,'w');

            fwrite($googleshoppingfile, $xml);

            $sql='SELECT * FROM '._DB_PREFIX_.'product p'.
            ' LEFT JOIN '._DB_PREFIX_.'product_lang pl ON p.id_product = pl.id_product'.
            ' WHERE p.active = 1 AND pl.id_lang='.$lang['id_lang'];

            $products = Db::getInstance()->ExecuteS($sql);

            $site_base = __PS_BASE_URI__;       // préfix du site
            $url_site = myTools::getHttpHost(false, true);  // url du site base Serveur
            $url_site_base_prestashop = $url_site.$site_base;

            $title_limit = 70;
            $description_limit = 10000;

            $languages = Language::getLanguages();
            $tailleTabLang = sizeof($languages);

            foreach($products as $product)
            {
                $xml_googleshopping ='';
                $cat_link_rew = Category::getLinkRewrite($product['id_category_default'], intval($lang));
                $product['details'] = new Product((int)($product['id_product']), false, $lang['id_lang']);
                $product_link = $link->getProductLink((int)($product['details']->id), $product['details']->link_rewrite, $cat_link_rew, $product['details']->ean13, $lang['id_lang']);

                $title_crop = $product['name'];
                if(strlen($product['name']) > $title_limit)
                {
                    $title_crop = substr($title_crop, 0, ($title_limit-1));
                    $title_crop = substr($title_crop, 0, strrpos($title_crop," "));
                }

                if(intval(Configuration::get('DESCRIPTION')) === intval(2))
                {
                    $description_crop = $product['description'];
                } else {
                    $description_crop = $product['description_short'];
                }
                $description_crop = myTools::f_convert_text("", $description_crop, false);

                if(strlen($description_crop) > $description_limit)
                {
                    $description_crop = substr($description_crop, 0, ($description_limit-1));
                    $description_crop = substr($description_crop, 0, strrpos($description_crop," "));
                }
                $xml_googleshopping .= '<entry>'."\n";
                $xml_googleshopping .= '<g:id>'.$product['id_product'].'-'.$lang['iso_code'].'</g:id>'."\n";
                $xml_googleshopping .= '<title>'.htmlspecialchars(ucfirst(mb_strtolower($title_crop,'UTF-8'))).'</title>'."\n";
                $xml_googleshopping .= '<link>'.$product_link.'</link>'."\n";
                $xml_googleshopping .= '<g:price>'.Product::getPriceStatic($product['id_product'],true,NULL,2).'</g:price>'."\n";
                $xml_googleshopping .= '<g:description>'.htmlspecialchars($description_crop, null, 'UTF-8', false).'</g:description>'."\n";
                $xml_googleshopping .= '<g:condition>new</g:condition>'."\n"; //condition = neuf, occasion, reconditionné OR new, used, refurbished

                if(Configuration::get('MPN') && $product['supplier_reference'] != '')
                {
                    $xml_googleshopping .= '<g:mpn>'.$product['supplier_reference'].'</g:mpn>'; //ref fabricant
                }

                // Pour chaque image
                $images = Image::getImages($lang['id_lang'], $product['id_product']);
                $indexTabLang = 0;

                if($tailleTabLang >1 ){         
                    while(sizeof($images) < 1 && $indexTabLang<$tailleTabLang){
                        if($languages[$indexTabLang]['id_lang']!=$lang['id_lang']){
                            $images = Image::getImages($languages[$indexTabLang]['id_lang'], $product['id_product']);
                        }
                         $indexTabLang++;   
                    }
                }

                $nbimages=0;
                $image_type=Configuration::get('GS_IMAGE');
                    if ($image_type=='') $image_type='large';

                foreach($images as $im)
                {
                  // Old URL
                  //$image='http://'.$url_site_base_prestashop.'img/p/'.$product['id_product'].'-'.$im['id_image'].'-large.jpg';
                  $image= $link->getImageLink($product['link_rewrite'], $product['id_product'] .'-'. $im['id_image'],$image_type);
                  // BUG :
                  //if (!strpos($url_site_base_prestashop,$image))
                  //  $image = 'http://'.$url_site_base_prestashop.$image;
                  $xml_googleshopping .= '<g:image_link>'.$image.'</g:image_link>'."\n";
                  if (++$nbimages == 10) break;
                }

                // Quantité et disponibilité
                if(Configuration::get('QUANTITY') == 1)
                {
                    if ($product['quantity'] != '' && $product['quantity'] != '0')
                        {
                            $xml_googleshopping .= '<g:quantity>'.$product['quantity'].'</g:quantity>'."\n";
                            $xml_googleshopping .= '<g:availability>in stock</g:availability>'."\n";
                        }
                        else{
                            $xml_googleshopping .= '<g:quantity>0</g:quantity>'."\n";
                            $xml_googleshopping .= '<g:availability>out of stock</g:availability>'."\n";
                        }
                }

                // Marque
                if(Configuration::get('BRAND') && $product['id_manufacturer'] != '0')
                {
                    $xml_googleshopping .= '<g:brand>'.htmlspecialchars(Manufacturer::getNameById(intval($product['id_manufacturer'])), null, 'UTF-8', false).'</g:brand>'."\n";
                }

                // Catégorie
                if(Configuration::get('GS_PRODUCT_TYPE_'.$lang['iso_code']))
                {
                    $product_type = str_replace('>', '&gt;', Configuration::get('GS_PRODUCT_TYPE_'.$lang['iso_code']));
                    $product_type = str_replace('&', '&amp;', $product_type);
                    $xml_googleshopping .= '<g:google_product_category>'.$product_type.'</g:google_product_category>'."\n";
                    $xml_googleshopping .= '<g:product_type>'.$product_type.'</g:product_type>'."\n";               
                }

                // Frais de port
                if(Configuration::get('GS_SHIPPING'))
                {
                    $xml_googleshopping .= '<g:shipping>'."\n";
                    $xml_googleshopping .= '<g:country>FR</g:country>'."\n";
                    $xml_googleshopping .= '<g:service>Standard</g:service>'."\n";
                    $xml_googleshopping .= '<g:price>'.Configuration::get('GS_SHIPPING').'</g:price>'."\n";
                    $xml_googleshopping .= '</g:shipping>'."\n";
                }

                //Poids
                if($product['weight'] != '0')
                {
                    $xml_googleshopping .= '<g:shipping_weight>'.$product['weight'].' kilograms</g:shipping_weight>'."\n";
                }

                // Offre spéciale

        if(Configuration::get('FEATURED_PRODUCT') == 1 && $product['on_sale'] != '0')
            {
                $xml_googleshopping .= '<g:featured_product>o</g:featured_product>'."\n";
            }

            if(Configuration::get('GTIN') && $product['ean13'] != '')
            {
                $xml_googleshopping .= '<g:gtin>'.$product['ean13'].'</g:gtin>'."\n";

            }
                $xml_googleshopping .= '</entry>'."\n";

            // Ecriture du produit dans l'XML googleshopping
            fwrite($googleshoppingfile, $xml_googleshopping);
        }

        $xml = '</feed>';
        fwrite($googleshoppingfile, $xml);
        fclose($googleshoppingfile);

        @chmod($generate_file_path, 0777);
        return true;
    }
}
?> 
```

有关的行是 420 行上的这一行：

```
 $product_link = $link->getProductLink((int)($product['details']->id), $product['details']->link_rewrite, $cat_link_rew, $product['details']->ean13, $lang['id_lang']); 
```

我真的不知道它是从哪里来的，但我有这个致命的错误
`Fatal error: Call to a member function getProductLink() on a non-object in /htdocs/modules/googleshopping/googleshopping.php on line 420`

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-10T13:23:42.370

改变：

```
$link->getProductLink 
```

到：

```
Context::getContext()->link->getProductLink 
```

您将在同一个文件中遇到另一个错误`var getImageLink`

做同样的事。改变：

```
$link->getImageLink 
```

到：

```
Context::getContext()->link->getImageLink 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T10:07:56.633

该函数`generateFile`使用全局`$link`变量。

您可能忘记包含一个附加文件（它在`$link`变量中实例化对象）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T10:09:30.630

该脚本需要一个名为的变量，该变量`$link`据称未设置。既然是`global`，就可以在[函数外定义](http://php.net/manual/en/language.variables.scope.php)

查找定义`$link`并正确包含它的文件

# sql - 在 PL/SQL /Oracle 表单中搜索

> ID：14193589
> 
> 赞同：1
> 
> 时间：2013-01-07T10:01:22.840
> 
> 标签：sql, algorithm, forms, plsql, oracle10g

这是关于在表格中搜索文本

Table_Name：详细信息

列：Fname、Mname、Lname、NName

该表包含近 10 万条记录

我们正在使用 Oracle 表单进行一些查询选项

用户输入一个名称，在表格中搜索名称并根据名称（Fname/Mname/Lname/NName）在其所在的列中进行进一步的操作。

由于表中存在大量数据，因此搜索需要很长时间。

我尝试使用表的功能索引，但没有工作它也需要更多时间

后来我尝试使用类似这样的方法将所有名称连接成一个名称并将其放入游标中。使用我尝试使用 Instring 的光标输出，但它挂起

我也尝试搜索构建动态游标，但没有奏效。

我的数据库是甲骨文

你能帮我找到一个有效的解决方案吗，或者如果我错过了什么，请帮助我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T10:19:58.163

首先，10 万（100,000）条记录本身并不是一张大表。

我可以看到的问题是查询似乎正在对 Fname/Mname/Lname/NName 列执行 OR。这意味着查询将至少执行一次全表扫描以获取结果。您可能希望使用调试来获取它对数据库触发的查询，并尝试在 SQL 提示符下使用自动跟踪来调整它。

您可能需要澄清搜索是否也在对这些列执行类似 LIKE 而不是 EQUALS 的操作。作为 LIKE 将进一步影响查询并影响索引。

当然，使用 INSTR 会禁用搜索列上的索引。

目前尚不清楚您的块是否基于即。表、视图、查询、过程

您可能想尝试使用 FIRST_ROWS 形式的块属性的提示。

# c# - MVVM 模式，ViewModel 集合

> ID：14193592
> 
> 赞同：2
> 
> 时间：2013-01-07T10:01:39.143
> 
> 标签：c#, design-patterns, mvvm, observablecollection

我最近开始尝试掌握似乎还没有工作的 MVVM。

我有我的模型、视图和视图模型。我有一个使用该`INotifyPropertyChanged`界面的基本视图模型。

我想收集`ViewModels`我的数据，以便可以在所有视图中使用我的数据。但我似乎无法让这一切继续下去。

无论如何，在阅读了大量不同的东西之后，我什至不知道应该是什么。

我希望有人能为我回答的最大问题是我在哪里倾倒我的收藏`ViewModels`？我需要在一个中更改一个`ViewModel`并`View`在另一个中再次显示它。

```
public class BaseViewModel : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;

    public  BaseViewModel()
    {

    }

    protected virtual void RaisePropertyChanged(string propertyName)
    {
        PropertyChangedEventHandler handler = this.PropertyChanged;
        if (handler != null)
        {
            handler(this, new PropertyChangedEventArgs(propertyName));
        }
    }
} 
```

那是`ViewModel`在一个视图上填写的，然后需要在另一个视图上显示。但我不知道如何在`ObservableCollection<T>`课堂上完成这项工作。

```
public class WorkViewModel : BaseViewModel
{
    private string reference;
    private string address;
    private string scope;
    private string cost;
    private double amount;
    private double gst;
    private double total;

    public string Reference
    {
        get { return reference; }
        set
        {
            if (reference != value)
            { reference = value; RaisePropertyChanged("Reference"); }
        }
    }

    public string Address
    {
        get { return address; }
        set
        {
            if (address != value)
            { address = value; RaisePropertyChanged("Address"); }
        }
    }

    public string Scope
    {
        get { return scope; }
        set
        {
            if (scope != value)
            { scope = value; RaisePropertyChanged("Scope"); }
        }
    }

    public string Cost
    {
        get { return cost; }
        set
        {
            if (cost != value)
            { cost = value; RaisePropertyChanged("Cost"); }
        }
    }

    public double Amount
    {
        get { return amount; }
        set
        {
            if (amount != value)
            {
                amount = value;
                GST = Math.Round(amount * 0.10,2);
                RaisePropertyChanged("Amount");
            }
        }
    }

    public double GST
    {
        get { return gst; }
        set
        {
            if (gst != value)
            {
                gst = value;
                Total = Math.Round(Amount + GST,2);
                RaisePropertyChanged("GST");
            }
        }
    }

    public double Total
    {
        get { return total; }
        set
        {
            if (total != value)
            {
                total = value;
                RaisePropertyChanged("Total");
            }
        }
    }

} 
```

我试过这个：

```
"Create a BaseViewModel and a Collection ObservableCollection<BaseViewModel> _viewModels;

Create a Property ObservableCollection<BaseViewModel> ViewModels around _viewModels

Define your View Models like this and add to Collection

MainViewModel : BaseViewModel

Tab1ViewModel : BaseViewModel

Tab2ViewModel : BaseViewModel 
```

现在你可以使用这个：

```
Tab1ViewModel vm = (ViewModels.Where(vm => vm is Tab1ViewModel).Count() == 0) ? new  Tab1ViewModel(): (ViewModels.Where(vm => vm is Tab1ViewModel).FirstOrDefault() as Tab1ViewModel;" 
```

好像我需要做一个单身人士？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T10:08:26.387

您不需要在设计中的任何位置存储视图模型的集合。在我看来，您的视图模型应该使用来自支持源（很可能是您的模型）的数据。在该设计中，您应该能够实例化 2 个相同类型的视图模型，并且它们都将看到相同的数据，因为它们使用相同的基础数据。每个视图我总是有 1 个视图模型实例，并且它不与任何其他人共享。

# android - 如何使用 android 使用日历 API 在谷歌日历上添加事件？

> ID：14193595
> 
> 赞同：10
> 
> 时间：2013-01-07T10:01:43.557
> 
> 标签：android, calendar, google-api, google-calendar-api

您好我正在尝试使用 android 中的 Google 日历 API 在**Google 日历中创建一个事件。**

我创建了一个由 [Google](http://code.google.com/p/google-api-java-client/source/browse?repo=samples#hg/calendar-android-sample)提供的示例项目，我按照每个步骤成功编译了该项目。

但是在这个 Google 日历示例中，我只能为我的 Google 日历帐户创建一个日历名称，我不能创建任何事件。

有没有办法在 Google 日历中创建活动？如果是这样，我该怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-17T06:51:10.790

经过一段时间的搜索，我终于找到了解决方案。答案在谷歌文档中，它自己只需通过 [这个链接](https://developers.google.com/google-apps/calendar/v3/reference/events/insert#examples)

它展示了如何使用谷歌日历 API 创建事件。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-12-20T15:52:00.673

这是一个巨大的痛苦 - 但我终于让它至少可以用来创建事件。

下载最新的 Google PHP API zip，并将其上传到您的网络服务器上的包含文件夹。使用 Google API 控制台设置 API 客户端。确保将重定向 url 设置为与页面的 url 相同 - 所以它会重定向到它自己。

我最初只是为事件详细信息设置了一些变量，如果需要，您可以制作一个将这些变量塞入的表单。

这是我的代码：

```
<?php
    $jobname = "BINGO";
    $joblocation = "Your mums house";
    $jobdescription = "An interview with a dog.";
    $startofjob = "2013-12-20T17:00:00.000+00:00"; //datetimes must be in this format
    $endofjob = "2013-12-20T18:00:00.000+00:00"; // YYYY-MM-DDTHH:MM:SS.MMM+HH:MM
    //So that's year, month, day, the letter T, hours, minutes, seconds, miliseconds, + or -, timezoneoffset in hours and minutes

    include('google-api-php-client/src/Google_Client.php');
    include('google-api-php-client/src/contrib/Google_CalendarService.php');

    session_start();

    $client = new Google_Client();
    $client->setApplicationName('doesntmatter-whateveryouwant');
    $client->setClientId('yourclientid');
    $client->setClientSecret('yourclientsecret');
    $client->setRedirectUri('yourredirecturl-setingoogleconsole');
    $client->setDeveloperKey('yourdeveloperkey');
    $cal = new Google_CalendarService($client);

    if (isset($_GET['code'])) {
      $client->authenticate($_GET['code']);
      $_SESSION['token'] = $client->getAccessToken();
      header('Location: http://' . $_SERVER['HTTP_HOST'] . $_SERVER['PHP_SELF']);
    }

    if (isset($_SESSION['token'])) {
      $client->setAccessToken($_SESSION['token']);
    }

    if ($client->getAccessToken()) {
      $event = new Google_Event();
    $event->setSummary($jobname);
    $event->setDescription($jobdescription);
    $event->setLocation($joblocation);
    $start = new Google_EventDateTime();
    $start->setDateTime($startofjob);
    $event->setStart($start);
    $end = new Google_EventDateTime();
    $end->setDateTime($endofjob);
    $event->setEnd($end);

    $createdEvent = $cal->events->insert('YOURCALENDARID@GOOGLE.COM', $event);
    echo $createdEvent->id;

    $_SESSION['token'] = $client->getAccessToken();
    } else {
      $authUrl = $client->createAuthUrl();
      print "<a class='login' href='$authUrl'>Connect Me!</a>";
    }
?> 
```

# inheritance - 如何向 python 代码添加其他参数？

> ID：14193596
> 
> 赞同：0
> 
> 时间：2013-01-07T10:01:46.230
> 
> 标签：inheritance, python-2.7, arguments, argparse

我正在使用一个 python 类，它`argv`用作参数来解析提供给命令行的参数。这个类使用什么样的解析器我不知道，而且我也无法改变这个类。

现在我想创建一个新类，派生自上述类，并添加了额外的参数`argparse`。我怎样才能以最简单、可靠和 Pythonic 的方式实现这一点，`argparse`同时保持原始类的功能完整并使用“组合”帮助输出？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T10:17:59.657

该[`parse_known_args`](http://docs.python.org/2.7/library/argparse.html#partial-parsing)方法应该有助于挑选出额外的论点；然后，您可以`sys.argv`用剩余参数字符串的第二个输出替换并传递控制权。

如果您不知道它正在使用什么解析器或对它有任何访问权限，那么组合帮助输出将变得更加困难。我能想到的最好的选择是运行程序`--help`或任何一次，将输出保存为字符串，然后将其添加到[`description`](http://docs.python.org/2.7/library/argparse.html#description)or[`epilog`](http://docs.python.org/2.7/library/argparse.html#epilog)中。根据代码的工作方式，您可以使用类似于以下内容的方式自动执行此过程

```
import argparse
import sys
from StringIO import StringIO

old_stderr = sys.stderr
sys.stderr = cap = StringIO()
old_argv = sys.argv
sys.argv = ['--help']
TheClass().parse_args()
sys.stderr = old_stderr
sys.argv = old_argv

parser = argparse.ArgumentParser(description=cap.read())
parser.add_argument('--foo', type=float)

my_args, remainder = parser.parse_known_args()
sys.argv = remainder

TheClass(foo=my_args.foo).parse_args() 
```

（未经测试的代码，买家要小心。）

这很可能会给您两个初始使用行，第一个列出您的参数，第二个列出内部类的参数。您可以`argparse`使用参数自定义 ' 行[`usage`](http://docs.python.org/2.7/library/argparse.html#usage)，但它仍然可能看起来有点奇怪；如果不手动编辑字符串，我不知道如何避免这种情况。

# delphi - IWebBrowserDisp ole2 界面无法将 IE 窗口打开到屏幕前面

> ID：14193598
> 
> 赞同：0
> 
> 时间：2013-01-07T10:02:03.393
> 
> 标签：delphi, delphi-4

在 Windows 7/8 中，这个非常好的 ole2 界面 IWebBrowserDisp 不再正常工作，由于某种原因，它现在在实际当前正在运行的 delphi 应用程序后面打开 IExplorer 窗口，而不是像以前那样在屏幕前面工作。

这使得应用程序失败，因为用户无法看到打开的网页，除非手动切换到 Iexplorer 并找到正确的窗口。

我用来启动链接的代码是：

```
 WB : TEmbeddedWB;
  wb.Navigate(URL,x,x,x,x); 
```

这个问题在旧版 Windows 中不存在，或者在我使用 Delphi IDE 时（我使用 Delphi4 并以 ADMIN 身份运行）。

# mysql - MySQL 一对多 SELECT MAX with CASE 以获得 GREATEST 日期

> ID：14193601
> 
> 赞同：0
> 
> 时间：2013-01-07T10:02:06.447
> 
> 标签：mysql, sql

我有一个查询，我试图按最新的发布日期或最新的评论日期对每行进行排序。

一个帖子可能有很多评论，所以我需要获取每行的最大评论日期。如果 postdate 大于 commentdate cdate = postdate else if not cdate = max commentdate。

我正在尝试使用以下方法实现此目的：

```
CASE WHEN max(wc.date_created) > wp.date_created THEN max(wc.date_created) ELSE wp.date_created END AS cdate

ORDER BY cdate DESC 
```

任何帮助将不胜感激。

这是完整的查询（它似乎用每行的注释日期填充 cdate）：

```
SELECT DISTINCT wp.p_id, wp.type, wp.value, wp.media, wp.youtube, wp.post_type, wp.tagedpersons, wp.title AS thetitle, wp.url, wp.description, wp.cur_image, wp.uip, wp.likes, wp.userid, wp.posted_by, wp.post AS postdata, wu . * , UNIX_TIMESTAMP( ) - wp.date_created AS TimeSpent, wp.date_created, wp.course, 
CASE WHEN max(wc.date_created) > wp.date_created THEN max(wc.date_created) ELSE wp.date_created END AS cdate
FROM wallposts wp
INNER JOIN wallusers wu ON wu.mem_id = wp.userid
INNER JOIN wallcomments wc ON wc.post_id = wp.p_id
WHERE (
          wp.userid IN (".$matches.") OR 
          (wp.userid IN (".$courses.") AND wp.course = 1)  OR 
          wp.userid =".$user_id." OR
          wp.tagedpersons LIKE '%".$user_id."%' OR
          EXISTS (SELECT * FROM wallcomments 
          WHERE wp.p_id = wallcomments.post_id AND wallcomments.tagedpersons LIKE '%".$user_id."%')
)
GROUP BY wp.p_id
ORDER BY cdate DESC 
```

表结构 - INNER JOIN wallcomments wc ON wc.post_id = wp.p_id

```
CREATE TABLE IF NOT EXISTS `wallposts` (
  `p_id` int(11) NOT NULL AUTO_INCREMENT,
  `post` text NOT NULL,
  `type` varchar(55) NOT NULL,
  `value` int(11) NOT NULL,
  `date_created` int(11) NOT NULL,
  `userid` varchar(255) NOT NULL,
  `posted_by` int(11) NOT NULL,
  `likes` int(11) NOT NULL,
  `media` int(11) NOT NULL,
  `uip` varchar(222) NOT NULL,
  `title` varchar(255) NOT NULL,
  `description` text NOT NULL,
  `url` text NOT NULL,
  `cur_image` text NOT NULL,
  `post_type` tinyint(1) NOT NULL,
  `youtube` text NOT NULL,
  `tagedpersons` varchar(255) NOT NULL,
  `course` int(255) NOT NULL DEFAULT '0',
  `ctimespent` varchar(255) NOT NULL,
  PRIMARY KEY (`p_id`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=537 ;

CREATE TABLE IF NOT EXISTS `wallcomments` (
  `c_id` int(11) NOT NULL AUTO_INCREMENT,
  `userid` int(11) NOT NULL,
  `comments` text NOT NULL,
  `date_created` int(11) NOT NULL,
  `post_id` int(11) NOT NULL,
  `clikes` int(11) NOT NULL,
  `uip` varchar(222) NOT NULL,
  `tagedpersons` varchar(255) NOT NULL,
  `deleted` int(11) NOT NULL DEFAULT '0',
  PRIMARY KEY (`c_id`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=349 ; 
```

样本数据：

wp.​​date_created 和 wc.date_created（格式） - 1356008534

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T10:18:37.883

让它更整洁并将其放入标量函数中

```
CASE WHEN max(wc.date_created) > wp.date_created THEN max(wc.date_created) ELSE wp.date_created END AS cdate 
```

变成

```
dbo.ReturnDate(wp.p_id) which returns a date for you 
```

然后在您的函数中，您可以进行查询以获取最大日期

返回日期可能包含类似

```
CREATE FUNCTION dbo.ReturnDate(@pid int)
RETURNS date

DECLARE @ReturnDate date, @AnotherDate date
SET @ReturnDate  = (SELECT wp.date_created FROM WallPosts wp WHERE wp.p_id = @pid)
SET @AnotherDate = (SELECT MAX(wc.date_created) FROM WallComments wc WHERE p_id = @pid)

IF @AnotherDate > @ReturnDate
SET @ReturnDate = @AnotherDate

RETURN @ReturnDate 
```

注意我没有检查语法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T10:27:21.253

`date_created`是一个 INT，我假设这可以作为 SQL 服务器中的日期进行转换？

`CAST`他们都作为`DATE`，例如：

```
CAST(wp.date_created AS DATE) > CAST(MAX(wc.date_created AS DATE)) 
```

所以

```
CASE WHEN CAST(max(wc.date_created) AS DATE) > CAST(wp.date_created AS DATE) THEN CAST(max(wc.date_created) AS DATE) ELSE CAST(wp.date_created AS DATE) END AS cdate 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T11:36:56.473

整理好了，效果很好。。。。。。

评论表上的 LEFT JOIN 是关键，也发生了变化

```
CASE WHEN max(wc.date_created) > wp.date_created THEN max(wc.date_created) ELSE wp.date_created END AS cdate 
```

到

```
greatest(max(wp.date_created), COALESCE(max(wc.date_created),0)) AS cdate 
```

这是最终的查询：

```
SELECT DISTINCT wp.p_id, wp.type, wp.value, wp.media, wp.youtube, wp.post_type, wp.tagedpersons, wp.title AS thetitle, wp.url, wp.description, wp.cur_image, wp.uip, wp.likes, wp.userid, wp.posted_by, wp.post AS postdata, wu . * , UNIX_TIMESTAMP( ) - wp.date_created AS TimeSpent, wp.date_created, COALESCE(max(wc.date_created),0), wp.course, 
greatest(max(wp.date_created), COALESCE(max(wc.date_created),0)) AS cdate
FROM wallposts wp
INNER JOIN wallusers wu ON wu.mem_id = wp.userid
LEFT JOIN wallcomments wc ON wc.post_id = wp.p_id
WHERE (
          wp.userid IN (".$matches.") OR 
          (wp.userid IN (".$courses.") AND wp.course = 1)  OR 
          wp.userid =".$user_id." OR
          wp.tagedpersons LIKE '%".$user_id."%' OR
          EXISTS (SELECT * FROM wallcomments 
          WHERE wp.p_id = wallcomments.post_id AND wallcomments.tagedpersons LIKE '%".$user_id."%' AND deleted = 0)
)
GROUP BY wp.p_id
ORDER BY cdate DESC 
```

# android - 如何在Android中为一组相同的元素运行相同的代码

> ID：14193602
> 
> 赞同：0
> 
> 时间：2013-01-07T10:02:06.817
> 
> 标签：android

在我的应用程序中，我有多个 TextViews（此元素的数量在活动创建时会发生变化）。我想在触摸每个元素时执行一些功能：例如更改背景。我尽量避免为每个元素编写相同的函数。我希望它像 jQuery 一样工作，所以如果我触发一些来自某个类的事件，*这个*元素就会改变。我希望它清楚，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T10:05:31.133

让你的活动实现`OnClickListener`，然后在`onClick`方法中放入你的公共代码，并调用`setOnClickListener(this);`你的每个`TextViews`.

如果您点击了不止一种类型的视图，请将 TextView 特定代码包含在：

```
if(<name of the view parameter in your onClick method) instanceof TextView)
{
    //Code here
} 
```

**编辑**

另一种方法是创建您自己的自定义 TextView 并覆盖其本身的方法。就像是：

```
public class MyTextView extends TextView {
//Various constructors go here

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        // TODO Auto-generated method stub

        switch (event.getAction()) {
        case MotionEvent.ACTION_DOWN:
            //Do your stuff here, your textview has been touched
            return true;
        }
        return super.onTouchEvent(event);
    }

} 
```

然后代替使用`TextView tv = new TextView(context);`，使用`MyTextView tv = new MyTextView(context);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T10:09:15.480

简单的：

```
 onCreate( //...
 // do your layout creation
 TextView tv = new TextView(context)
 tv.setOnClickListener(clickListener);
 tv.setTag(0); // this tag can be any object. So feel free to add a KEY_string, or anything that u might use to later identify your view on the click listener.

 tv = new TextView(context);
 tv.setOnClickListener(clickListener);
 tv.setTag(1);

  } // finish on create

  private OnClickListener clickListener = new OnClickListener() {

    @Override
    public void onClick(View v) {
             int id = (Integer)v.getTag();
             switch(id){
                 case 0):
                    // do stuff
                 case 1:
                    // do other stuff       
    }
}; 
```

您还可以根据需要使用其他几个侦听器，只需使用 Eclipse 上的自动完成功能来检查所有选项`tv.setOn...`

# axapta - 将 AX 2012 中附加文件的内容复制到特定记录

> ID：14193605
> 
> 赞同：0
> 
> 时间：2013-01-07T10:02:32.403
> 
> 标签：axapta, x++, dynamics-ax-2012, ax

我需要以任何形式将附件的内容复制到 AX2012 中的特定记录，然后我必须将此内容粘贴到同一表单下的任何字符串类型字段中。

我正在尝试执行此操作：

```
public void getdocucontent()
{
    Dev_ManageTemplates obj_Dev_ManageTemplates;
    DocuRef obj_docuRef;
    DocuValue obj_DocuValue;
    RecId recid;

    TextIo txIoRead,
         txIoWrite;
    FileIOPermission fioPermission;
    TextBuffer txtb;
    container containFromRead;
    int xx,num,
        iConLength;
    str sTempPath,
        sFileName, completename ;
    str 64 s1;
    ;
   Dev_ManageTemplates_ds.getFirst(true);
    recid = Dev_ManageTemplates.RecId;

   select obj_docuRef
        where obj_docuRef.RefRecId == recid;

    select obj_DocuValue
        where obj_DocuValue.name == obj_docuRef.Name;

    sTempPath = obj_docuRef.path();
    sFileName = obj_DocuValue.FileName;
    completename = sTempPath+sFileName+"."+obj_DocuValue.FileType;

   fioPermission = new FileIoPermission("completename",'r');
   txtb = new TextBuffer();
    fioPermission.assert();
    txtb.fromFile("completename"); // Read text from file
    //txtb.toString(); // Copy it to the clipboard
   // StringEdit.text(txtb.getText());
    s1 = txtb.getText();
   // info(txtb.getText());

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T12:20:25.400

当您阅读代码时，错误很明显：

```
new FileIoPermission("completename",'r').assert();
txtb = new TextBuffer();
txtb.fromFile("completename"); 
```

真的应该是：

```
new FileIoPermission(completename,'r').assert();
txtb = new TextBuffer();
txtb.fromFile(completename); 
```

此外，在 AX 中使用[匈牙利表示法并不是](http://en.wikipedia.org/wiki/Hungarian_notation)[最佳实践](http://msdn.microsoft.com/en-us/library/aa632638.aspx)。

# java - 无法检索 Map(HashMap) 的所有键？

> ID：14193607
> 
> 赞同：0
> 
> 时间：2013-01-07T10:02:39.957
> 
> 标签：java, generic-collections

我正在开发一个客户端-服务器应用程序，其中服务器发送指示，客户端接收这些指示。地图被声明为

```
private static Map<key,value> obj=new HashMap<key,value>(); 
```

地图正在通过`synchronised(obj)`值类的构造函数获取值

```
obj.put(this,this); 
```

我正在尝试检索此地图的所有键。我使用过 `Set<key> t=Map.KeySet();`，但这会引发编译错误，提示在接口中找不到符号：KeySet()`java.util.Map.`注意：键是接口，值是声明 Map 的类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T10:12:32.883

正如你所写

```
private static Map<key,value> obj=new HashMap<key,value>(); 
```

你应该写

```
Set<key> t=obj.keySet(); 
```

代替`Set<key> t=Map.KeySet();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T10:11:43.883

Map上没有KeySet方法，keySet是获取key的正确方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T10:15:23.317

检查一次 Map API。Map 是接口，您尝试使用 keySet() 就像调用静态方法一样。

您应该调用创建的对象的方法。

你应该使用`obj.keySet()`

[地图 API](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html#keySet%28%29)

# ios - iOS 黑屏和 MissingMethodException: Method not found: 'System.Type.op_Equality'

> ID：14193608
> 
> 赞同：1
> 
> 时间：2013-01-07T10:02:41.543
> 
> 标签：ios, xamarin.ios, ios-simulator, mvvmcross

我开始使用 MvvmCross 创建一个应用程序。到目前为止，我有一个适用于 Android 和运行 WP 的版本。不幸的是，为 iOS 创建应用程序并不容易。在模拟器中运行 iOS 应用程序时，我只得到一个黑屏。在 MonoDevelop 的应用程序输出中看到以下异常：

```
2013-01-07 10:42:20.506 BestSellersTouch[319:21e03] mvx: Diagnostic:   0.09 Exception masked MissingMethodException: Method not found: 'System.Type.op_Equality'.
  at Cirrious.MvvmCross.Touch.Views.Presenters.MvxTouchViewPresenter.CreateView (Cirrious.MvvmCross.Views.MvxShowViewModelRequest request) [0x00000] in <filename unknown>:0 
at Cirrious.MvvmCross.Touch.Views.Presenters.MvxTouchViewPresenter.Show (Cirrious.MvvmCross.Views.MvxShowViewModelRequest request) [0x00000] in <filename unknown>:0 
at Cirrious.MvvmCross.Touch.Views.MvxTouchViewDispatcher+<>c__DisplayClass4.<RequestNavigate>b__3 () [0x00000] in <filename unknown>:0 
at Cirrious.MvvmCross.Touch.Views.MvxTouchUIThreadDispatcher+<>c__DisplayClass1.<InvokeOrBeginInvoke>b__0 () [0x00000] in <filename unknown>:0 
2013-01-07 10:42:20.508 BestSellersTouch[319:21e03] Application windows are expected to have a root view controller at the end of application launch 
```

这个错误会导致黑屏吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T14:05:09.833

仅在针对4.0（及更高版本）`System.Type.op_Equality`编译程序集时才存在对 的引用。`mscorlib.dll`

当前版本的 MonoTouch 不支持 4.0（并且该成员不是程序集的一部分），这会在运行时导致此异常。

在 MonoTouch 支持 4.0（今年春天）之前，解决方案是重建程序集并确保它引用`mscorlib.dll`MonoTouch 附带的程序集。

在呈现视图时引发此异常的事实*可能*是您的黑屏的原因（没有执行任何操作来显示任何内容）。

# bash - 用于查找和执行更复杂命令的 Bash 脚本

> ID：14193609
> 
> 赞同：0
> 
> 时间：2013-01-07T10:02:44.677
> 
> 标签：bash, find, exec

好的，所以我有一堆文件`test_xx`，`validate_xx`我想通过以下方式执行：

```
./path/test_01 | ./server | ./path/validate_01

./path/test_02 | ./server | ./path/validate_02 
```

... 等等。

现在，我想创建一个`run_all`脚本来定位所有这些其他脚本并以这种方式运行它们。

我可以使用以下代码仅查找和执行，例如 test_01：

```
find ./*/ -name test_01 -exec {} \; 
```

所以，我有两个问题：

1.  （重要！）如何让 bash 执行上面更复杂的行，使用管道和两个未知目录进行搜索？我只能找到如何执行单个命令。

2.  （不太重要，但仍然是一个问题......）循环这个脚本的最佳方法是什么，以便它执行目录中的所有测试/验证脚本，然后停止？这些脚本当前被命名为 test_01、test_02、...、test_26（对于 validate_xx 也是如此）——但如果我添加 test_27 等，我希望脚本仍然可以工作，而不需要更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T10:08:16.917

如果它们不跨越多个目录，则不需要使用`find`：

```
for test in path/test*; do $test | ./server | ${test/test/validate}; done 
```

顺便说一句，有用的花絮：`${a/b/c}`语法说：取变量的值`a`，并替换`b`为`c`.

如果确实需要查找，则可以将重定向包装在 shell 脚本中：

```
find dir -exec sh -c '... | ... | ...' \; 
```

编辑：更详细一点，

```
find . -name test\* -exec sh -c '
  test={}
  validate=${test/test/validate}
  $test | ./server | $validate
' \; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T10:07:07.277

使用`for`循环。例如，您可以循环测试并通过参数扩展从中提取数字：

```
for test in ./path/test_[0-9][0-9] ; do
    "$test" | ./server | ./path/validate_${test: -2}
done 
```

# jquery - Ascensor 插件 - 触发功能“WindowsOn”变化

> ID：14193611
> 
> 赞同：1
> 
> 时间：2013-01-07T10:02:55.787
> 
> 标签：jquery, html, jquery-plugins

美好的一天 - 这是我在 StackOverflow 上的第一篇文章，当谈到 jQuery 和 JS 时，我有点菜鸟......所以对我来说放轻松:) 就这样......

我正在重新创建我的投资组合网站并使用几个 jQuery 插件。其中之一是 jquery.ascensor.js 插件，可在此处找到 - [Ascensor Plugin](http://kirkas.ch/ascensor/#/Home)

这一切都很完美，除了我试图添加一个（希望这是正确的术语）一个自定义回调函数，这将允许我在特定的“ascensorFloor1,2,3 ...等”时设置动画（使用css3）进入视野，然后在视野之外消失......我希望这是有道理的。

这是我调用插件的 HTML：

```
$('#ascensorBuilding').ascensor({
        AscensorName:'ascensor',
        ChildType:'section',
        AscensorFloorName:'Home | Implementation | HTML | Jquery | CSS | Smartphone | Credits',
        Time:1000,
        WindowsOn:1,
        Direction:'chocolate',
        AscensorMap:'2|1 & 2|2 & 2|3 & 2|4 & 2|5 & 1|5 & 2|6',
        Easing:'easeInOutQuad',
        KeyNavigation:true,
        Queued:false
    }); 
```

正文中的 HTML：

```
<section id="ascensorFloor1" class="ascensorFloor" style="position: absolute; width: 1920px; height: 955px; left: 3840px; top: 955px;">
    <article class="container_12">
        <h1>Content for Floor 1</h1>
    </article>
</section>
<section id="ascensorFloor2" class="ascensorFloor" style="position: absolute; width: 1920px; height: 955px; left: 3840px; top: 955px;">
    <article class="container_12">
        <h1>Content for Floor 2</h1>
    </article>
</section>
<section id="ascensorFloor3" class="ascensorFloor" style="position: absolute; width: 1920px; height: 955px; left: 3840px; top: 955px;">
    <article class="container_12">
            <h1>Content for Floor 3</h1>
    </article>
</section> 
```

我想我将能够处理 CSS3 代码，只需要一些关于 jQuery 'Callback' 函数的帮助。

任何帮助都会很棒。提前致谢 ：）

# android - sliding menu list item setting color

> ID：14193615
> 
> 赞同：0
> 
> 时间：2013-01-07T10:03:25.597
> 
> 标签：android, listview, background, slider

I am using a sliding menu in my app.In this menu there is a listview.I am using a row layout for the row items in my listview.

My row layout is like:

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/color_back_frag"
android:layout_width="match_parent"
android:layout_height="50dp"
android:background="@drawable/list_item_selector"
android:orientation="horizontal" >

<ImageView
    android:id="@+id/row_icon"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:padding="10dp"
    android:src="@drawable/ic_launcher" />

<TextView
    android:id="@+id/row_title"
    android:layout_width="0dp"
    android:layout_height="match_parent"
    android:layout_weight="1"
    android:gravity="center_vertical"
    android:padding="10dp"
    android:text="Medium Text"
    android:textAppearance="@android:style/TextAppearance.Medium"
    android:textColor="@color/white" />

</LinearLayout> 
```

and my list_item_selector is like:

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

<item android:drawable="@drawable/and_satir_01" android:state_pressed="true"/>
<item android:drawable="@drawable/and_satir_01" android:state_selected="true"/>
<item android:drawable="@drawable/and_satir_02"/>

</selector> 
```

When I click on a list item the background changes for a moment like a flash.But I want it to be like in facebook app.In facebook app when you click on a sliding menu list item the background stays with the changed bacground image during the "slide-in" process. I am not sure if I had told this clearly.

What I want is, after the list item click, the list item background should stay with the "state_pressed" background until the slide-in process finished. Is there any way to do it?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T10:34:46.983

From `ListView` docs:

> By default, lists do not have any choice behavior. By setting the choiceMode to singleChoice, the list allows up to one item to be in a chosen state.

So you could try to set `android:choiceMode="singleChoice"` param for your `ListView` first of all.

Hope it help you!

# java - 如何在现代 JDeveloper/Weblogic/ADF 中为 JSP 页面启用 debug_mode

> ID：14193616
> 
> 赞同：2
> 
> 时间：2013-01-07T10:03:25.417
> 
> 标签：java, weblogic, oracle-adf, jdeveloper

出于某种原因，而不是目标 jspx 页面，我得到了错误

```
OracleJSP error: java.io.FileNotFoundException:

Set the init-param debug_mode to "true" to see the complete exception message. 
```

（就是这样，没有文件名）。

但我不知道在哪里设置这个初始化参数。

据我用谷歌搜索，每个人都建议（好吧，早在 2001-2009 年）将它设置在`global-web-application.xml`文件中，但现代 JDeveloper 设置中似乎缺少它。

还有人建议在`web.xml`（存在）中添加 init-param，但添加到不存在的部分：

```
<servlet>
  <servlet-name>jsp</servlet-name>
    <servlet-class>oracle.jsp.runtimev2.JspServlet</servlet-class> 
```

所以我很困惑。在现代（11.1.1.6.0+）JDeveloper 设置中，我应该在哪里添加这个 init-param？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T00:03:20.160

最简单的做法是在 JDeveloper 中单击调试图标而不是运行图标 - 这将在调试模式下启动 WebLogic，您将能够调试 JSP。

[https://blogs.oracle.com/shay/entry/introduction_to_the_adf_debugger](https://blogs.oracle.com/shay/entry/introduction_to_the_adf_debugger)

您还可以使用调试参数启动 WebLogic 本身 [http://www.oracle.com/technetwork/developer-tools/jdev/remotedebugwls-086628.html](http://www.oracle.com/technetwork/developer-tools/jdev/remotedebugwls-086628.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T18:25:37.013

正如 Shay 所提到的，您可以只调试项目而不是运行它。要设置调试参数，只需转到：

```
project properties - run debug - launch settings - java options and add all your params 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-23T10:32:37.943

另一种选择 - 在调试模式下启动 Weblogic 并使用来自 JDeveloper 的远程调试器连接到它。

# c++ - 将指针转换为引用，成本高吗？

> ID：14193620
> 
> 赞同：12
> 
> 时间：2013-01-07T10:03:51.833
> 
> 标签：c++, c++11

> **可能重复：**
> [在 C++ 中取消引用指针有多昂贵？](https://stackoverflow.com/questions/431469/how-expensive-is-it-to-dereference-a-pointer-in-c)

如果我有一个指向对象的指针，比如说`Object *ptr;`，我想将它传递给`void foo(Object& obj)`我理解我需要编写的表单的方法：

```
foo(*ptr); 
```

但为什么要取消引用`ptr`？只是通过它没有意义`foo(ptr);`吗？我担心`*ptr`可能会**复制**原始对象，或者至少不只是传递到要`foo`使用的地址。

谁能帮我解决这个问题？是否通过了潜在的瓶颈，因为代码期望它的行为与函数被调用`*ptr`时一样快？`void foo(Object *obj);``foo(ptr)`

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-07T10:07:11.193

> 我担心 *ptr 可能会复制原始对象。

你错了。取消引用指针不会产生任何副本！

```
void f(Object & obj); //note it takes the argument by reference

Object *ptr = get();

foo(*ptr); 
```

在这段代码的*最后一行*没有副本。该标准为您提供了这样的保证。

但是，如果*按 value*`f`取参数，那么*就会有*副本。

 **底线：函数参数中的引用用于*避免*复制（经常）或作为输出参数（偶尔）！

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-07T10:09:36.870

传递`*ptr`是否复制取决于被调用函数是否需要 an`Object`或 an `Object &`。

在前一种情况下，将制作一份副本。在后一种情况下（即您的情况），*不会*制作副本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T10:09:01.253

通过引用传递对象只是传递指针，因此 foo(*ptr) 是正确的并且不会复制对象。为什么要取消引用它？因为函数签名需要一个对象，而不是指向对象的指针。C++ 是一种强类型语言。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T10:09:31.407

要传递对函数的引用，您必须像在值语义中那样传递对象。指针不是引用，因为它们是实体语义（地址）。

如果你取消引用一个指针，你会得到一个可以作为引用嵌入的实际值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-07T10:23:46.217

引用和指针是一样的。但是引用有其自身的优势，那就是它们不能为空（虽然它们可以，但创建一个空引用有点困难），因此您可以省略对 nullptr 的检查。您可以使用 。而不是 -> 是一个较短的字符 xD。关于您的问题，因为指针是引用，所以最终选择一个而不是另一个不会有任何收益。我的意思是下面的代码在编译时是相同的。

```
void foo(int &r) {} 
```

和

```
void foo(int *p) {} 
```

当您使用引用时，后台将取消引用。希望它有所帮助。**

# django - Django模型中的PasswordField？

> ID：14193622
> 
> 赞同：2
> 
> 时间：2013-01-07T10:03:54.213
> 
> 标签：django

我正在尝试创建一个名为 Username 的简单模型，如下所示：

```
class User(models.Model):
    username = models.CharField(max_length=100) #Id is automatically generated by Django
    password = models.CharField(max_length=100) 
```

这是我正在尝试创建的 Django 模型。问题是用户名和密码属性存储为 CharField，而我希望密码在数据库中存储为*** * 或加密形式。似乎他们在 Django 中没有像 CharField 这样的 PasswordField。最好的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T10:07:49.883

根据[文档](https://code.djangoproject.com/wiki/PasswordField)，它是

```
password = forms.CharField( 
    widget=forms.PasswordInput(render_value=False), 
    label="Your Password"
) 
```

这有助于

```
<input type="password" /> 
```

以您呈现的形式

关于您的存储部分，您需要存储密码的哈希值，而不是 * 列表，否则无论如何您都无法检索它。你可以使用[hashlib](http://docs.python.org/2/library/hashlib.html)模块

```
user.password = hashlib.sha224(user.password).hexdigest()
user.save() 
```

当然，在执行此操作时您必须非常注意。以上只是一个简单的示例，请查看文档以进一步学习

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T10:02:15.693

Django 带有用户模型。它在 django.contrib.auth.models 下。该模型具有您需要的一切，如果已经有一个，那么开始创建自己的模型将是愚蠢的。您还在 django.contrib.auth.forms 中有一个用户创建和身份验证表单，例如用户模型中的 set_password 方法和堆更多的东西。

# iphone - 在 iOS 中更改音效 (SFX) 的音高。（音频播放）

> ID：14193632
> 
> 赞同：2
> 
> 时间：2013-01-07T10:04:26.187
> 
> 标签：iphone, objective-c, ios, ipad

我在游戏中的某个事件上播放了音效。当玩家将其中一些事件链接在一起时，相同的声音可能会连续播放 1 到 4 次。

很难找到音高增加但音效相同的 sfx，所以我想知道 iOS 中是否有一种技巧/方法可以用来播放声音文件但会改变声音的音高（正确的术语？）玩的时候？

非常感谢，-代码

# c++ - 在 C++ 中使用管道和超时执行命令（并读取标准输出）

> ID：14193641
> 
> 赞同：3
> 
> 时间：2013-01-07T10:05:00.527
> 
> 标签：c++, timeout, command, exec, pipe

我需要你的帮助 ！

我制作了一个报告守护程序（在 c++ 中），它需要定期在服务器上执行一堆命令。

一个简单的示例命令是：“/bin/ps aux | /usr/bin/wc -l”

第一个想法是派生一个使用 popen() 运行命令的子进程，并在父进程中设置一个 alarm()，如果命令尚未退出，则在 5 秒后杀死子进程。

我尝试使用“sleep 20000”作为命令，子进程被杀死但睡眠命令仍在运行......不好。

第二个想法是使用 execlp() 而不是 popen()，它适用于简单的命令（即没有管道），例如“ls -lisa”或“sleep 20000”。我可以得到结果，如果 5 秒后没有完成，进程将被杀死。

现在我需要执行“/bin/ps aux | /usr/bin/wc -l”命令，显然它不能直接与 execlp() 一起使用，所以我尝试了“hack”：

```
execlp("sh","sh","-c","/bin/ps aux | /usr/bin/wc -l",NULL); 
```

我工作……或者我想……我试过了

```
execlp("sh","sh","-c","sleep 20000",NULL); 
```

只是为了确定，子进程在 5 秒（我的超时）后被杀死，但 sleep 命令只是留在那里......

我愿意接受建议（我愿意接受黑客攻击）！

提前致谢 ！

TLDR；

我需要一种方法：

*   执行“复杂”命令，例如“/bin/ps aux | /usr/bin/wc -l”
*   得到它的输出
*   如果花费超过 5 秒，请确保它被杀死（ps 命令只是示例，实际命令可能会永远挂起）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-07T10:22:19.413

使用`timeout`coreutils 中的命令：

```
/usr/bin/timeout 5 /bin/sh -c "/bin/ps aux | /usr/bin/wc -l" 
```

# hadoop - 无法将分区器设置为 JobConf 对象

> ID：14193646
> 
> 赞同：1
> 
> 时间：2013-01-07T10:05:07.387
> 
> 标签：hadoop, mapreduce, hadoop-partitioning

我编写了一个自定义分区器，但无法将其设置`JobConf`为主类中的对象。

```
import org.apache.hadoop.io.Text;
import org.apache.hadoop.mapreduce.Partitioner;

public class FirstCharTextPartitioner extends Partitioner<Text, Text> {

    @Override
    public int getPartition(Text key, Text value, int numReduceTasks) {
        return (key.toString().charAt(0)) % numReduceTasks;
    }    
} 
```

但是当我尝试将其设置为`JobConf`对象时，出现以下错误。
*JobConf 类型中的方法 setPartitionerClass(Class) 不适用于参数 (Class)*

```
public class WordCount {

    public static class Map extends MapReduceBase implements Mapper<LongWritable, Text, Text, IntWritable> {
        private final static IntWritable one = new IntWritable(1); 
        private Text word = new Text();

        public void map(LongWritable key, Text value, OutputCollector<Text, IntWritable> output, Reporter reporter) throws IOException {
            String line = value.toString();
            String[] tokens = line.split("\\s");
            for (String token : tokens) {
                word.set(token);
                output.collect(word, one);
            }
        }
    }

    public static class Reduce extends MapReduceBase implements Reducer<Text, IntWritable, Text, IntWritable> { 
        public void reduce(Text key, Iterator<IntWritable> values, OutputCollector<Text, IntWritable> output, Reporter reporter) throws IOException { 
            int sum = 0;
            while (values.hasNext()) {
                sum += values.next().get();
            }
            output.collect(key, new IntWritable(sum));
        }
    }

    public static void main(String[] args) throws Exception {
        JobConf conf = new JobConf(WordCount.class);
        conf.setJobName("wordcount");

        conf.setOutputKeyClass(Text.class);
        conf.setOutputValueClass(IntWritable.class);

        conf.setMapperClass(Map.class);
        conf.setCombinerClass(Reduce.class);
        conf.setReducerClass(Reduce.class);
        conf.setPartitionerClass(FirstCharTextPartitioner.class);

        conf.setInputFormat(TextInputFormat.class);
        conf.setOutputFormat(TextOutputFormat.class);

        FileInputFormat.setInputPaths(conf, new Path(args[0]));
        FileOutputFormat.setOutputPath(conf, new Path(args[1]));

        JobClient.runJob(conf);
    }
} 
```

有人可以告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T10:37:36.403

您正在导入**新** `org.apache.hadoop.mapreduce.Partitioner`的.

您需要实现旧接口`org.apache.hadoop.mapred.Partitioner`，如下所示：

```
import org.apache.hadoop.io.Text;
import org.apache.hadoop.mapred.Partitioner;

public class FirstCharTextPartitioner implements Partitioner<Text, Text> {

    @Override
    public int getPartition(Text key, Text value, int numReduceTasks) {
        return (key.toString().charAt(0)) % numReduceTasks;
    }    
} 
```

# c - 带有 lwip 的网络服务器（Cortex M3、Stellaris LM3S6965 评估板）

> ID：14193651
> 
> 赞同：1
> 
> 时间：2013-01-07T10:05:42.227
> 
> 标签：c, cortex-m3, lwip

我正在尝试制作简单的网络服务器，所以如果我在浏览器上搜索并输入设备的 ip，我会看到一个网页。我找到[了这个](http://lwip.wikia.com/wiki/Sample_Web_Server)维基页面

我已按照步骤操作，但在构建时出现错误。

我已包含链接文件夹`"C:\stellarisware\third_party\lwip-1.3.2\apps\httpserver_raw"`以获取 httpd.c 等文件

我添加了`httpd_init()`，但在构建时出现此错误。

```
 [cc] C:\stellarisware\third_party\lwip-1.3.2\apps\httpserver_raw\fsdata.c:328:26: error: array type has incomplete element type
   [cc] C:\stellarisware\third_party\lwip-1.3.2\apps\httpserver_raw\fsdata.c:330:26: error: array type has incomplete element type
   [cc] C:\stellarisware\third_party\lwip-1.3.2\apps\httpserver_raw\fsdata.c:332:26: error: array type has incomplete element type 
```

如果我查看这些文件，它就在其中：

```
const struct fsdata_file file_img_sics_gif[] = {{NULL, data_img_sics_gif, data_img_sics_gif + 14, sizeof(data_img_sics_gif) - 14}};

const struct fsdata_file file_404_html[] = {{file_img_sics_gif, data_404_html, data_404_html + 10, sizeof(data_404_html) - 10}};

const struct fsdata_file file_index_html[] = {{file_404_html, data_index_html, data_index_html + 12, sizeof(data_index_html) - 12}}; 
```

这就是我的目录的样子：

![在此处输入图像描述](../Images/190e1b4511d488cca9d6774d7a4ebe0d.png)

以下是来自网络服务器的源文件：[下载](https://dl.dropbox.com/u/17865437/httpserver_raw.rar)

这是我的 main.c，在第 270 行我调用了 httpd_init(); [下载](http://codepaste.net/yx72oh)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T09:46:48.897

您需要`fsdata.c`从构建中排除：右键单击文件 -> 资源配置 -> 从构建中排除 -> 全选。

该文件是自动生成的，并且在IIRC中有一个`#include "fsdata.c"`声明。`fs.c`在这种`.c`情况下，扩展名有点误导 - 它是一个`C`源文件，但不能单独编译，只能作为具有所有定义和`#include`行的另一个文件的一部分。

# rest - 我应该选择哪种语言来创建可以与我的 php Web 服务器进行 Web 服务（REST）对话的便携式 Windows gui 客户端？

> ID：14193657
> 
> 赞同：0
> 
> 时间：2013-01-07T10:06:06.633
> 
> 标签：rest, user-interface, portable-executable, portable-applications

我们有一个运行 cakephp 的 Web 服务器，它提供 REST Web 服务。现在我们需要在简单的 .exe（带有窗口形式 gui）中创建一个可移植的窗口客户端，它可以与 https 中的 Web 服务进行对话，而无需过多依赖其他库或 api。客户端将发送 xml 并接收 xml。它还会在本地PC中读取一些文本文件并将其压缩并编码为文本格式，如base64，然后通过restful方式将其发送到服务器。

我知道 java 可能会这样做，但我们不希望依赖 jvm。

我知道 .NET 可以做到这一点，但它很大程度上依赖于 .NET 框架。当我们希望支持像 2003、xp 甚至 2000 这样的旧操作系统时，做兼容性检查是个大问题。

C 是一种选择，但对我们来说开发或维护并不容易。

其他语言，如 python、php、ruby 可以做到这一点吗？无需安装附加程序？

我们可以让用户只下载、解压缩和运行吗？

谢谢，任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T12:52:28.567

一种解决方案是使用 tcl/tk。使用这种语言，您可以创建一个**starpack**，它是一个windows .exe，在一个文件中包含一个特定于平台的运行时（即：tcl/tk 语言和库）以及您的应用程序代码和资产。

在 Windows（和 OSX）上，tk 库包括对本机小部件的支持，因此您的 GUI 可以看起来像一个“真正的”Windows 应用程序。

# c++ - 导入eclipse项目（孤立工具链）

> ID：14193659
> 
> 赞同：1
> 
> 时间：2013-01-07T10:06:13.887
> 
> 标签：c++, eclipse, import

我有一个小问题。我在 Eclipse (C/C++) 中导入了一个项目（包括它的设置），但是当我浏览这些设置时，我经常发现 Eclipse 指出以下内容：

> 孤立的工具链 org.eclipse.cdt.cross.arm.gnu.sourcery.windows.elf.toolchain.debug.154435017（ARM Windows GCC (Sourcery G++ Lite)）

我不知道这意味着什么。有人可以启发我，如果可能的话，指出一个解决方案，因为我无法构建我的项目，这让我发疯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T10:19:25.833

由于您复制了`.settings`项目的`.metadata`文件夹而不是工作区的文件夹，这似乎是一个错误。我认为您在原始工作区中使用了某种 Eclipse 扩展或插件，但在目标工作区中没有它。

# php - 使用 formData() 上传文件并将其附加到电子邮件中

> ID：14193661
> 
> 赞同：0
> 
> 时间：2013-01-07T10:06:18.100
> 
> 标签：php, jquery, post, multipartform-data

> **可能重复：**
> [提交成功但上传在组合表单中不起作用](https://stackoverflow.com/questions/13872746/submit-success-but-upload-not-work-at-combine-form)

我正在使用“仅提交文件”标题下的[代码。](http://blog.new-bamboo.co.uk/2012/01/10/ridiculously-simple-ajax-uploads-with-formdata)代码真的很简单，很小，但是当我console.log“文件”时，它没有位置，webkitrelativepath是“”，我可以在提交时看到文件名，大小等。我需要将其发布到我的 feedback.php 文件中并将其附加到电子邮件中，但我不知道如何将文件从 formData 中取出并上传到我的上传文件夹中，这样我就可以- 邮寄...

谢谢。

编辑：

我目前正在使用什么代码：

```
var fileInput = document.getElementById('file-upload-field');
var file = fileInput.files[0];
var formData = new FormData();
formData.append('file', file);
console.log(file);

$.ajax({
  url: baseUrl + "feedback.php",
  data: file,
  cache: false,
  contentType: false,
  processData: false,
  type: 'POST',
  success: function(file){
    alert(file);
  }
}); 
```

在我的 feedback.php

```
 foreach($_FILES as $file){
    $target_path = "uploads/";
    $target_path = $target_path .basename($file['name']);

if(move_uploaded_file($file['tmp_name'], $target_path)) {
echo "the file ".basename($file['name'])." has been uploaded";
}
else {
 echo "there was an error";
}
$mail->AddAttachment($target_path); 
```

}

这不会在任何地方上传或附加任何文件......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T10:13:17.253

只需上传文件

```
move_uploaded_file(string $filename , string $destination ); 
```

而不是作为附件邮寄，如下所示：

```
require("class.phpmailer.php");
$mail = new PHPMailer();
$mail->Host = 'smtp_host';      
$mail->Port = 'smtp_port';
$mail->SMTPAuth = true;         
$mail->Username = 'smtp_user';  // SMTP username
$mail->Password = 'smtp_pass';  // SMTP password
$mail->From = "from@abc.ocm";
$mail->FromName = "fromName";
$mail->AddAddress($email);
$mail->Subject = "Your subject line";
$mail->AddAttachment($source, $fileName);
$mail->Body = "Your Message";

// Send the email.
if(!$mail->Send())
    $message = "Displya some error."; 
```

}

# java - Transformer 对象自动将命名空间附加到子元素

> ID：14193662
> 
> 赞同：1
> 
> 时间：2013-01-07T10:06:21.343
> 
> 标签：java, xml, saxparser, xmlreader, transformer

为了对 XML 文件进行一些更改，我使用以下代码：

```
 public boolean run() throws Exception {
    XMLReader xr = new XMLFilterImpl(XMLReaderFactory.createXMLReader()) {

     public void startElement(String uri, String localName, String qName, Attributes atts) throws SAXException {
          if(AddRuleReq&& qName.equalsIgnoreCase("cp:ruleset"))
           {
             attributeList.clear();
             attributeList.addAttribute(uri, localName, "id", "int", Integer.toString(getNewRuleId()));
             super.startElement(uri, localName, "cp:rule", attributeList);
             attributeList.clear();
             super.startElement(uri, localName, "cp:conditions", attributeList);
             super.startElement(uri, localName, "SOMECONDITION", attributeList);
             super.endElement(uri, localName, "SOMECONDITION");
             super.endElement(uri, localName, "cp:conditions");
             super.startElement(uri, localName, "cp:actions", attributeList);
             super.startElement(uri, localName, "allow", attributeList);
             super.characters(BooleanVariable.toCharArray(), 0, BooleanVariable.length());
             super.endElement(uri, localName, "allow");
             super.endElement(uri, localName, "cp:actions");
           }
      }
};
  Source source = new SAXSource(xr, new InputSource(new StringReader(xmlString)));
  stringWriter = new StringWriter();
  StreamResult result = new StreamResult(stringWriter);
  Transformer transformer = TransformerFactory.newInstance().newTransformer();
  transformer.setOutputProperty(OutputKeys.OMIT_XML_DECLARATION, "yes");
  transformer.setOutputProperty(OutputKeys.INDENT, "yes");
  transformer.setOutputProperty("{http://xml.apache.org/xslt}indent-amount", "3");
  transformer.transform(source, result);
  return stringWriter.toString();
} 
```

我已经粘贴了一小部分并且它有效。但差别不大。

我期望看到的是：

```
<cp:rule id="1">
  <cp:conditions>
    <SOMECONDITION/>
  </cp:conditions>
  <cp:actions>
  <allow>
    true
  </allow>
  </cp:actions>
</cp:rule> 
```

我看到的是：

```
<cp:rule id="1">
  <cp:conditions>
    <SOMECONDITION xmlns="urn:ietf:params:xml:ns:common-policy"/>
  </cp:conditions>
  <cp:actions>
  <allow xmlns="urn:ietf:params:xml:ns:common-policy">
    true
  </allow>
  </cp:actions>
</cp:rule> 
```

根据我的架构，处理后的 XML 也是无效的，下次无法使用。

我的问题是，如何防止将这个命名空间（如本例中的 < SOMECONDITION xmlns="urn:ietf:params:xml:ns:common-policy"/>）添加到子元素中？

提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T12:36:26.370

您正在使用错误的参数调用标记的`startElement`方法`allow`，我很惊讶您的 xml 处理器没有为此引发错误：

```
super.startElement(uri, localName, "allow", attributeList); 
```

这是您作为参数获得`uri`的元素的名称空间 uri ，并且是元素的名称。正确的应该如下，使用空字符串作为命名空间 uri 并匹配 qname 和本地名称的值。`cp:ruleset``localName``ruleset`

```
super.startElement("", "allow", "allow", attributeList); 
```

这同样适用于您的其他`startElement`/`endElement`电话，而不是

```
super.startElement(uri, localName, "cp:rule", attributeList); 
```

它应该是

```
super.startElement(uri, "rule", "cp:rule", attributeList); 
```

# android - GridView中第一项的imageView onClick事件无法工作或延迟

> ID：14193663
> 
> 赞同：3
> 
> 时间：2013-01-07T10:06:21.643
> 
> 标签：android, gridview, click, imageview

我设计了一个带有自定义项目布局的 GridView，左上角有一个 ImageView，右上角有另一个 ImageView，中间有一个主 ImageView 和 Text。

我需要为角落的两个 ImageView 和适配器的 OnItemClickListener 设置 OnClickListener。

一切正常，但只有 GridView 中的第一项无法触发 OnClickListener。任何人都可以解决这个问题吗？

PS我发现ImageView的第一项OnClickListener会在我做下一个动作时触发（例如点击其他项目）

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    View v = convertView;
    TagView tag;
    if (convertView == null) {
        v = m_LayoutInflater.inflate(R.layout.mydoc_grid_item, null);
        tag = new TagView(
                (ImageView) v.findViewById(R.id.myDoc_GridItem_IV),
                (TextView) v.findViewById(R.id.myDoc_GridItem_TV),
                (ImageView) v.findViewById(R.id.iViewAdd2Category),
                (ImageView) v.findViewById(R.id.iViewDelete));
        v.setTag(tag);
    } else {
        tag = (TagView) v.getTag();
    }

    v.setLayoutParams(new GridView.LayoutParams((int) (180 * v
            .getResources().getDisplayMetrics().density), (int) (180 * v
            .getResources().getDisplayMetrics().density)));

    tag.image.setScaleType(ImageView.ScaleType.CENTER_CROP);
    tag.image.setImageDrawable(new BitmapDrawable(BitmapFactory.decodeFile(m_DisplayItems.get(position)
                    .get("image").toString())));
    tag.text.setText(m_DisplayItems.get(position).get("text").toString());
    tag.iAdd2Category.setVisibility((m_IsEdit) ? View.VISIBLE : View.GONE);
    tag.iDelete.setVisibility((m_IsEdit) ? View.VISIBLE : View.GONE);
    if (m_IsEdit) {
        tag.iAdd2Category.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                Log.i(LOG_TAG, "Click on image add 2 category");
            }
        });

        tag.iDelete.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                Log.i(LOG_TAG, "Click on image delete");
            }
        });
    }

    return v;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T01:34:51.730

我终于在这篇文章中找到了答案。

[OnClickListener 不适用于 GridView 中的第一项](https://stackoverflow.com/q/11778228/1954594)

就我而言：

```
if (convertView == null) {
    v = m_LayoutInflater.inflate(R.layout.mydoc_grid_item, null);
    tag = new TagView(
            (ImageView) v.findViewById(R.id.myDoc_GridItem_IV),
            (TextView) v.findViewById(R.id.myDoc_GridItem_TV),
            (ImageView) v.findViewById(R.id.iViewAdd2Category),
            (ImageView) v.findViewById(R.id.iViewDelete));
    v.setTag(tag);
} else {
    tag = (TagView) v.getTag();
} 
```

只需删除 if else 语句，每次都会实例化“标签”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T10:18:17.070

混合`OnClickListeners`和`OnItemClickListeners`用于列表的项目效果不佳。

在您的情况下，您可能应该`OnClickListeners`在项目的不同部分使用多个，并且根本不使用`OnItemClickListener`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-24T10:34:17.957

出现这个问题的原因是，Android 不仅在绘制 View 时为第一项调用 getView()，而且还为 Layout-Measuring！在 getView() 中，度量调用和绘图调用没有任何区别。因此，当您第一次进行绘图调用时，以及稍后的某个度量调用时，您会覆盖 onClickListener。实际上这样做似乎是正确的——因为你每次都这样做，但我观察到了这种行为。也许您设置了 clickListener 并且系统在 getView 调用后将其释放，因为不会绘制视图......我没有跟踪到足够深来保证。

尽管如此，每次都重新创建视图是一个坏主意，因为它非常耗时 - 您的网格可能无法平滑滚动。

解决方案是编写自己的 GridView，如下所示：

```
public class MyGridView extends GridView{
private GridAdapter adapter;

public MyGridView(Context context) {
    super(context);
}

public MyGridView(Context context, AttributeSet attrs, int defStyleAttr) {
    super(context, attrs, defStyleAttr);
}

public MyGridView(Context context, AttributeSet attrs) {
    super(context, attrs);
}

public void setAdapter(GridAdapter adapter) {
    this.adapter = adapter;
    super.setAdapter(adapter);
}

@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    if(adapter!=null)
        adapter.setIsMeasureCall();
    super.onMeasure(widthMeasureSpec, heightMeasureSpec);
}} 
```

并在您的 GridAdapter 中实现方法 setIsMeasureCall()。该方法仅在调用时将标志设置为 true。然后在你的 getView() 方法中检查它是否是一个度量调用，如果这是真的 - 你不设置监听器。

确保在 getView() 方法结束时将 isMeasure 设置为 false。

我希望一切都清楚:)

有关更多信息，您可以查看我的主页，我提供了一个完整的 Android 项目来解决这个问题。 [http://simon.osim.at/projects/gridadapter/#TheSolution](http://simon.osim.at/projects/gridadapter/#TheSolution)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T06:42:34.077

选择器文件

```
 <selector xmlns:android="http://schemas.android.com/apk/res/android" >
    <item android:state_pressed="true" android:drawable="@drawable/gridview_item_shape"></item>
     <item android:state_pressed="false" android:drawable="@android:color/transparent"></item>
</selector> 
```

项目布局文件

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    >

    <ImageView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/griditem"
        android:padding="2dp"
        android:src="@drawable/grid_photo"
        android:layout_centerInParent="true"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@drawable/gridview_item_select"
         />
</RelativeLayout> 
```

# facebook - 如何创建Facebook“挑战好友”活动？

> ID：14193664
> 
> 赞同：0
> 
> 时间：2013-01-07T10:06:23.083
> 
> 标签：facebook, facebook-graph-api, facebook-opengraph

我们有一个应用程序可以让用户在各种挑战中挑战他们的朋友。现在，我们通过向他们的朋友墙发布消息来发起挑战。此功能将在 2 月删除，因此我们需要找到另一种发起挑战的方式。有哪些可用的替代方案？

我们希望朋友得到通知，挑战已经发生，并且在某面墙上生成了某种故事。

我们已经查看了开放图操作，并且提及标记必须由用户自己完成，因此我们不能使用它来提及选定的朋友。而且我们不能使用动作标记，因为这不是已经发生或正在发生的事件。

可能可以使用引用内置“配置文件（外部）”对象的打开图形操作，但这似乎相当混乱 - 我们只想引用 facebook 用户。而且我们不知道这位朋友是否会收到通知——可能不会。

故事可以发布到用户自己的墙上，但我们真的希望朋友被提及和通知。

这似乎是应用程序的一个相当标准的用例 - facebook 是否不再提供此功能？

编辑：我在想也许使用 from 和 to 设置调用 javascript 提要对话框可能会起作用。那么用户也可以为挑战写一条个人信息，它应该出现在两个墙上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T11:00:45.987

最好的方法是使用请求：[https ://developers.facebook.com/docs/requests/](https://developers.facebook.com/docs/requests/)

当然，那时它不会公开，但毕竟这是用户和他的朋友之间的直接行动，其他用户可能会将其视为垃圾邮件。

另一种方法（我猜是第二好的）是使用提及标记： [https ://developers.facebook.com/docs/technical-guides/opengraph/mention-tagging/](https://developers.facebook.com/docs/technical-guides/opengraph/mention-tagging/)

如果提到的用户点击它 > 接受挑战，您可以使用 Open Graph 发布动态链接。如果任何其他用户点击它，他将被重定向到主应用程序页面。

...另一个想法，这可能是最好的：

*   使用挑战的请求对话框
*   发送请求后，让用户（如果他愿意）在他的墙上发布关于它的消息（提要对话框）

# java - 如何在php网站上发布字节码？

> ID：14193671
> 
> 赞同：0
> 
> 时间：2013-01-07T10:06:34.487
> 
> 标签：java, file, blob, typeconverter

我有一种方法可以将数据转换为字节数组，我必须将其发布到 php 网站。我现在要使用 java 套接字。准备如果我这样做了，我会在这里添加

它是字节 [] 方法的数据，我在[PDF 中找到它到字节数组，反之亦然](https://stackoverflow.com/questions/1131116/pdf-to-byte-array-and-vice-versa)

```
public static byte[] readFully(InputStream stream) throws IOException
    {
byte[] buffer = new byte[8192];
ByteArrayOutputStream baos = new ByteArrayOutputStream();

int bytesRead;
while ((bytesRead = stream.read(buffer)) != -1)
{
    baos.write(buffer, 0, bytesRead);
}
return baos.toByteArray();
    }
public static byte[] loadFile(String sourcePath) throws IOException
{
InputStream inputStream = null;
try 
{
    inputStream = new FileInputStream(sourcePath);
    return readFully(inputStream);
} 
finally
{
    if (inputStream != null)
    {
        inputStream.close();
    }
}
} 
```

在这里如何将字节发布到 php 网站...

```
public  static void postMybyte (String out)
{
    try {
            // Construct data
            String data = URLEncoder.encode(out, "UTF-8") ;

            // Send data
            URL url = new URL("");
            URLConnection conn = url.openConnection();
            conn.setDoOutput(true);
            OutputStreamWriter wr = new OutputStreamWriter(conn.getOutputStream());
            wr.write(data);
            wr.flush();

            // Get the response
           BufferedReader rd = new BufferedReader(new InputStreamReader(conn.getInputStream()));
            String line;
            while ((line = rd.readLine()) != null) {
               System.out.println(" --->>>>"+line);
            }
            wr.close();
            rd.close();
    } catch (Exception e) 
    {

    }
} 
```

# asp.net - web.config.CLR4 文件

> ID：14193674
> 
> 赞同：0
> 
> 时间：2013-01-07T10:06:46.937
> 
> 标签：asp.net

ASP.NET Web 应用程序中 web.config.CLR4 文件的用途是什么？具体来说，我在检查由基础设施开发的工具时遇到了它，即在 netadvantage 产品中，它提供了用于开发 Web 应用程序的网格视图、选项卡、树视图等工具。另外，请帮助我使用 c# 从零开始在 asp.net 中开发工具的逐步解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T10:09:22.470

为了将`ASP.NET`项目成功部署到 IIS，您需要适合目标 CLR 的 web.config，因此`CLR2` `CLR35`和有不同的 web.config 文件`CLR4`。

# eclipse - m2eclipse 工作区分辨率 classpth 和测试文件夹

> ID：14193676
> 
> 赞同：1
> 
> 时间：2013-01-07T10:06:57.713
> 
> 标签：eclipse, maven, maven-3, m2eclipse

我正在使用 m2eclipse 在 eclipse 中管理我的类路径，当我想在 eclipse 中使用测试编译目标时我遇到了问题。

我有 2 个项目 A 和 B，项目 B 依赖于 A 类（在文件夹 target/classes 中）和测试类（在文件夹 target/test-classes 中）。如果我在 m2 eclipse 启动器中使用参数 M2_WORKSPACE_RESOLUTION=true 运行测试编译目标，则编译找不到项目 A 的测试类。

在命令行中一切正常。如果我使用 M2_WORKSPACE_RESOLUTION=false 一切正常。

如何强制 m2eclipse 使用具有工作区分辨率的测试类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T10:43:37.690

您必须明确声明对项目 A 的测试类的依赖。请参阅[此问题](https://stackoverflow.com/questions/174560/sharing-test-code-in-maven)以了解如何执行此操作。测试类通常不打包在工件中。这就是为什么您无法从项目 B 访问这些类的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T18:08:11.947

这是 M2eclipse 的问题：

[https://bugs.eclipse.org/bugs/show_bug.cgi?id=352962](https://bugs.eclipse.org/bugs/show_bug.cgi?id=352962)

依赖关系解析将（似乎）在运行 Eclipse 的 JVM 中工作。但是如果另一个 JVM 启动了，它就不会启动。

# objective-c - 视图控制器层次结构是否有 recursiveDescription 方法？

> ID：14193680
> 
> 赞同：30
> 
> 时间：2013-01-07T10:07:05.907
> 
> 标签：objective-c, ios, uiviewcontroller

`recursiveDescription`在调试视图层次结构时非常有用。视图*控制器*层次结构也很重要，有没有等价的？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2015-12-01T12:33:46.120

简而言之，我在 Xcode 的调试器控制台中使用以下命令来打印视图控制器层次结构：

```
po [[[UIWindow keyWindow] rootViewController] _printHierarchy] 
```

PS 这仅适用于 ios8 及更高版本，仅用于调试目的。

链接到帮助我发现这个和许多其他出色的调试技术的文章是[这个](https://www.objc.io/issues/19-debugging/debugging-case-study/)

**编辑 1：** 在 Swift 2 中，您可以通过以下方式打印层次结构：

```
UIApplication.sharedApplication().keyWindow?.rootViewController?.valueForKey("_‌​printHierarchy") 
```

**编辑 2：** 在 Swift 3 中，您可以通过以下方式打印层次结构：

```
UIApplication.shared.keyWindow?.rootViewController?.value(forKey: "_printHierarchy") 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-01-07T10:07:05.907

**更新**- 类似的功能现在以 Apple 提供的形式作为`_printHierarchy`方法提供，因此您不再需要此类别。

现在有：

[Github：视图控制器的递归描述类别](https://github.com/jrturton/UIViewController-RecursiveDescription)。

这添加了一个打印视图控制器层次结构的`recursiveDescription`方法。`UIViewController`非常适合检查您是否正确添加和删除子视图控制器。

代码很简单，包括这里以及上面的 GitHub 链接：

```
@implementation UIViewController (RecursiveDescription)

-(NSString*)recursiveDescription
{
    NSMutableString *description = [NSMutableString stringWithFormat:@"\n"];
    [self addDescriptionToString:description indentLevel:0];
    return description;
}

-(void)addDescriptionToString:(NSMutableString*)string indentLevel:(NSInteger)indentLevel
{
    NSString *padding = [@"" stringByPaddingToLength:indentLevel withString:@" " startingAtIndex:0];
    [string appendString:padding];
    [string appendFormat:@"%@, %@",[self debugDescription],NSStringFromCGRect(self.view.frame)];

    for (UIViewController *childController in self.childViewControllers)
    {
        [string appendFormat:@"\n%@>",padding];
        [childController addDescriptionToString:string indentLevel:indentLevel + 1];
    }
}

@end 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2016-06-22T19:08:47.273

最快的方法（在 lldb/Xcode 调试器中）：

```
po [UIViewController _printHierarchy] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-06T07:56:26.770

_printHierarchy 不为 VC 视图的子视图组件提供递归信息。

**方法 1：**使用 lldb 命令获取完整的视图层次结构。

```
po [[[UIApplication sharedApplication] keyWindow] recursiveDescription] 
```

**方法 2：**使用 XCode 调试器中的“Debug View Hierarchy”按钮获取所有信息的最佳方式。

[![在此处输入图像描述](../Images/2dd561130101088717f431490f8e4806.png)](https://i.stack.imgur.com/BF8Ap.png)

# objective-c - 我需要在当前视图控制器中的标签栏上方弹出操作表，但它不应与标签栏重叠（我需要清楚地看到标签栏）

> ID：14193684
> 
> 赞同：1
> 
> 时间：2013-01-07T10:07:13.410
> 
> 标签：objective-c, ios6, uikit, uiactionsheet

我需要在当前视图控制器中的标签栏上方弹出透明操作表，但它不应与标签栏重叠（我需要清楚地看到标签栏）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T09:07:55.667

要在 UIActionsheet 上创建透明背景，您必须设置委托，然后您可以执行以下操作：

```
- (void)willPresentActionSheet:(UIActionSheet *)actionSheet {
    [actionSheet.layer setContents:nil];
} 
```

* * *

* * *

要创建一个从底部动画的自定义 UIView，你可以这样做>

```
bottomView = [[UIView alloc] initWithFrame:CGRectMake(0, self.view.frame.size.height, self.view.frame.size.width, 250)];
bottomView.backgroundColor = [UIColor redColor];
bottomView.hidden = YES;
[self.view addSubview:bottomView];

UIButton *testButton = [UIButton buttonWithType:UIButtonTypeCustom];
testButton.frame = CGRectMake(20, 50, 280, 40);
testButton.backgroundColor = [UIColor greenColor];
[bottomView addSubview:testButton];

[self animateBottomViewIn]; 
```

并有以下方法：

```
-(void)animateBottomViewIn
{
    bottomView.hidden = NO;
    [UIView animateWithDuration:0.3 animations:^{
        bottomView.frame = CGRectMake(0, self.view.frame.size.height - bottomView.frame.size.height, self.view.frame.size.width, bottomView.frame.size.height);
    } completion:^(BOOL finished) { }];
}

-(void)animateBottomViewOut
{
    [UIView animateWithDuration:0.3 animations:^{
        bottomView.frame = CGRectMake(0, self.view.frame.size.height, self.view.frame.size.width, bottomView.frame.size.height);
    } completion:^(BOOL finished) {
        bottomView.hidden = YES;
    }];
} 
```

# spring - sitemesh 和 spring：只有 index.jsp 被修饰

> ID：14193685
> 
> 赞同：1
> 
> 时间：2013-01-07T10:07:15.300
> 
> 标签：spring, spring-mvc, sitemesh

我正在尝试将 sitemesh 包含到我的 spring-mvc Web 应用程序中。我将此添加到我的 web.xml 中：

```
<filter>
<filter-name>sitemesh</filter-name>
<filter-class>com.opensymphony.module.sitemesh.filter.PageFilter</filter-class>
</filter>

<filter-mapping>
<filter-name>sitemesh</filter-name>
<url-pattern>/*</url-pattern>
</filter-mapping> 
```

我的 decorators.xml 文件：

```
<decorators defaultdir="/WEB-INF/decorators">
    <decorator name="master" page="master.jsp">
        <pattern>/</pattern>
    </decorator>
</decorators> 
```

和 master.jsp 文件：

```
<%@ taglib prefix="decorator" uri="http://www.opensymphony.com/sitemesh/decorator" %>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>
        :: LiVis :: <decorator:title /> ::
    </title>
    <style type="text/css">@import "resources/css/generalStyle.css";</style>
    </head>
    <body>
        <div id="wrapper">
            <div id="header">
                <div id="headerPicture">
                    <img id="livis" src="resources/images/village.png" alt="livis" />
                </div>
                <div id="headerMenu">
                    <ul id="navigation">
                        <li><a href="admin/insertEntryForm.html">Insert</a></li>
                        <li>Table-View</li>
                        <li>Graph-View</li>
                        <li>About</li>
                    </ul>
                </div>
            </div>
            <div id="main">
                <decorator:body />
            </div>
        </div>
    </body>
</html> 
```

我认为 master.jsp 将应用于我的 webapp 中的每个页面，但它仅适用于 index.jsp。对于其他 jsp 文件，它们位于 WEB-INF/views 的某些文件夹中（见图），它没有完成。 ![WEB-INF 中的文件夹结构](../Images/d28241a01ab7498cbfa819f3f4e0536a.png)

这可能是什么原因？谢谢！！

**编辑**

vwies/admin 文件夹中的一个页面：

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<%@taglib uri="http://www.springframework.org/tags" prefix="spring"%>
<%@taglib uri="http://www.springframework.org/tags/form" prefix="form"%>
<%@taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<html>
<head>
<title>Registration Page</title>
</head>
<body>

<form:form method="POST" action="/LiteratureVisualization/admin/insertTest" modelAttribute="object">
    <table>
        <tr>
            <td>First name:</td>
            <td><form:input path="author.firstname" /></td>
        </tr>
        <tr>
            <td>Last name:</td>
            <td><form:input path="author.lastname" /></td>
        </tr>
        <tr>
            <td>Title:</td>
            <td><form:input path="publication.title" /></td>
        </tr>
        <tr>
            <td>Subtitle:</td>
            <td><form:input path="publication.subtitle" /></td>
        </tr>
        <tr>
            <td>Abstract:</td>
            <td><form:input path="publication.abstr" /></td>
        </tr>
        <tr>
            <td>Year of Launch:</td>
            <td><form:input path="publication.launchYear" /></td>
        </tr>
        <tr>
            <td>Month of Launch:</td>
            <td><form:input path="publication.launchMonth" /></td>
        </tr>
        <tr>
            <td>Volume:</td>
            <td><form:input path="publication.volume" /></td>
        </tr>
        <tr>
            <td>Number:</td>
            <td><form:input path="publication.number" /></td>
        </tr>
        <tr>
            <td>Sort of:</td>
            <td><form:input path="publication.sortOf" /></td>
        </tr>
        <tr>
            <td>Published In:</td>
            <td><form:input path="publication.publishedIn" /></td>
        </tr>
        <tr>
            <td colspan="2"><input type="submit" value="Register"></td>
        </tr>
    </table>
</form:form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T10:10:30.180

在模式声明中使用 /* 而不是 /。

或者，如果它不能解决问题，请查看您的 jsp 文件并检查其中是否包含 html 和 body 标记。如果没有，sitemesh 不能用装饰器中声明的标签替换标签。

# uisplitviewcontroller - 没有 nib/xib 文件的拆分视图控制器

> ID：14193695
> 
> 赞同：2
> 
> 时间：2013-01-07T10:07:59.317
> 
> 标签：uisplitviewcontroller, ipad, uisplitview

我有一个类，`NSObject`我试图通过它添加一个`SplitViewController`. 我有两个名为“Master”和“Detail”的文件，但没有 xib。我想使用这些文件创建一个拆分视图控制器。我尝试将它们添加为正常的拆分视图代码，但我只得到一个空白屏幕。我无法看到详细视图，并且在旋转设备时也无法在横向模式下看到主-详细信息窗格。

欢迎各种帮助。提前致谢。

# batch-file - 编号脚本问题

> ID：14193696
> 
> 赞同：1
> 
> 时间：2013-01-07T10:08:09.727
> 
> 标签：batch-file, rename

我正在尝试创建我的第一个 DOS 脚本（更习惯于 bash）。

我正在尝试创建一个脚本，该脚本将使用序列号和年份作为前缀重命名我的照片。我创建了这个脚本：

```
@ECHO OFF
setlocal EnableDelayedExpansion

echo.
SET /P Year=Please enter Year (YYYY) : 
SET /P Start=Starting Number          : 

dir     

set /A i=%Start%
for %%f in (*.JPG) do call :renameit "%%f"
goto done

:renameit

echo %1 %i%
set str=%i%
set str=0000!str:.=!
set str=!str:~-4!  
ren %1 PICT_%Year%_%str%.JPG
set /A i+=1

:done 
```

问题是它有时工作正常，有时会重新命名一个已经重命名的文件。这是 2 个示例（如您所见，我在上面的脚本中添加了 DIR 和 ECHO 用于故障排除）：

运行 1（正确）：

```
Directory of C:\TEST

07/01/2013  10:55    <DIR>          .
07/01/2013  10:55    <DIR>          ..
04/08/2011  14:28            16.823 PICT_2012_0005.JPG
04/08/2011  14:28            16.823 PICT_2012_0006.JPG
04/08/2011  14:28            16.823 PICT_2012_0007.JPG
07/01/2013  10:56               368 script.cmd
           4 File(s)         50.837 bytes
           2 Dir(s)  30.342.901.760 bytes free
"PICT_2012_0005.JPG" 5
"PICT_2012_0006.JPG" 6
"PICT_2012_0007.JPG" 7 
```

运行 2（失败）：

```
Directory of C:\TEST

07/01/2013  10:56    <DIR>          .
07/01/2013  10:56    <DIR>          ..
04/08/2011  14:28            16.823 PICT_2011_0005.JPG
04/08/2011  14:28            16.823 PICT_2011_0006.JPG
04/08/2011  14:28            16.823 PICT_2011_0007.JPG
07/01/2013  10:56               368 script.cmd
           4 File(s)         50.837 bytes
           2 Dir(s)  30.342.901.760 bytes free
"PICT_2011_0005.JPG" 5
"PICT_2011_0006.JPG" 6
"PICT_2011_0007.JPG" 7
"PICT_2012_0005.JPG" 8 
```

知道我做错了什么吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T15:23:32.000

将评论扩展为完整答案。

这是命令的已知功能/问题/**未定义行为**`for`。当遍历文件目录并对这些文件进行修改时，for 循环不会在文件夹中保留静态文件列表。相反，它只是检查下一个文件，直到文件系统没有返回任何内容。但是，当在循环中修改文件时，文件系统会将修改视为附加文件，并再次将其发送到 for 循环。这将导致重新处理未知数量的文件（基于 for 循环和文件系统的竞争条件）。

有关它的深入讨论，请参阅此论坛。

[http://www.dostips.com/forum/viewtopic.php?f=3&t=4138&sid=463cb91964f497c478afcca79c33384a](http://www.dostips.com/forum/viewtopic.php?f=3&t=4138&sid=463cb91964f497c478afcca79c33384a)

您也可以使用此 for 语句：`for /F "delims=" %%F in ('dir /B *.jpg') do call :renameit "%%~fF"`

该`dir`命令将在运行时生成目录中文件的静态列表，以防止文件递归。

# javascript - 禁用后如何启用下拉菜单？

> ID：14193701
> 
> 赞同：0
> 
> 时间：2013-01-07T10:08:24.070
> 
> 标签：javascript

我在这里面临一个下拉禁用问题。我在这里有两个条件，cond1 和 cond2。如果它是 cond1，我将禁用我的下拉菜单，否则我将启用它。

这是我钓出来的：

```
if(cond1)
{
DP1.setAttribute('disabled', 'disabled');
}
else
{
DP1.setAttribute('disabled', false);
} 
```

问题是一旦下拉被禁用，它就不会再次启用。例如，如果它的 cond2，那么它必须被启用。我究竟做错了什么 ？请提出一些解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T10:10:04.687

尝试删除`disabled`属性

```
DP1.removeAttribute('disabled'); 
```

或者，您可以直接设置元素的布尔`.disabled`属性（[更多详细信息](http://www.javascriptkit.com/javatutors/deform3.shtml)）：

```
DP1.disabled = !cond1; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T10:10:07.917

我想`removeAttribute`会做的伎俩：`DP1.removeAttribute('disabled');`

这是一个[**jsfiddle**](http://jsfiddle.net/KooiInc/qXsNu/)，使用它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T10:17:03.440

尝试删除`disabled`属性`removeAttribute`

```
 if(cond1)
    {
    DP1.setAttribute('disabled', 'disabled');
    }
    else
    {
    elem.removeAttribute("disabled");
    } 
```

示例：http: [//jsbin.com/uqenez/1/edit](http://jsbin.com/uqenez/1/edit)

# javascript - 使用 javascript i 加载 xml 文件

> ID：14193704
> 
> 赞同：0
> 
> 时间：2013-01-07T10:08:45.573
> 
> 标签：javascript, html, xml

我正在尝试使用 javascript 上传 xml 文件。我的javascript代码如下：

```
var xmlDoc =null;
var abc = new Array();
if (window.ActiveXObject){
    xmlDoc=new ActiveXObject("Microsoft.XMLDOM");
}
else if (document.implementation.createDocument){
    xmlDoc=document.implementation.createDocument("","",null);
}
else{
    alert('Browser cannot handle this script');
}
if (xmlDoc!=null){
    xmlDoc.async=false;
    xmlDoc.load("employee.xml");
    var x = xmlDoc.getElementsByTagName("EMP");
    for (i=0;i<x.length;i++)
    { 
        abc[0] = x[0].getElementsByTagName("ID")[0].childNodes[0].nodeValue;
        document.write("a is "+abc[0]);
        abc[1] = x[0].getElementsByTagName("ID1")[0].childNodes[0].nodeValue;
        document.write("<br>b is "+abc[1]);
    }
} 
```

我的 xml 文件是：

```
<EMPLOYEE> 
<EMP> 
    <ID>10.99</ID> 
    <ID1>20.54</ID1> 
</EMP> 
</EMPLOYEE> 
```

该代码在 IE 和 firefox 中正常工作，但在 Google Chrome 中，它没有显示任何内容。有人可以告诉我我错在哪里或如何纠正它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T10:12:48.300

为了在 Chrome 中获取 XML 文件，您需要执行 GET。出于安全原因，您不能以直接的方式从文件系统加载它。这是代码：

```
var xmlhttp = new window.XMLHttpRequest(); 
xmlhttp.open("GET", xmlsrc, false); 
xmlhttp.send(null); 
var xmlDoc = xmlhttp.responseXML.documentElement; 
```

# objective-c - 设置为零后对象仍然存在

> ID：14193711
> 
> 赞同：0
> 
> 时间：2013-01-07T10:09:04.430
> 
> 标签：objective-c, ios, memory-management

我正在使用 ARC。我有一个在我编写的游戏结束时运行的方法，它应该清除内存。中有一系列对象`NSMutableArray`，我使用`removeObject:`. 然后我将这些对象设置为`nil`. 但是，`NSLog`在这些对象上使用表明它们仍然存在。为什么将它们设置为`nil`不将它们从内存中删除？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T10:11:09.190

在 ARC（自动引用计数）中，将对象的引用设置为`nil`意味着两种不同的事情，具体取决于您正在使用的引用类型：

1.  如果是`strong`引用，则 nil-ing 表示减少被引用对象的引用计数；

2.  如果它是一个`weak`引用，nil-ing 它什么也不做。

因此，nil-ing 会导致不同的结果。具体来说，只有当引用计数变为零时，才会释放对象。这对应于系统中没有其他对象*拥有*第一个对象的情况（这意味着持有`strong`对它的引用）。

因此，在您的情况下，可能有一些其他对象保留`strong`对您尝试的对象的引用`nil`；或者，您可能正在 nil 一个弱引用。如果您显示一些代码，它可能会变得更清晰。

# iphone - 如何在iphone的相机取消按钮内提供我们自己的自定义操作

> ID：14193723
> 
> 赞同：1
> 
> 时间：2013-01-07T10:09:34.703
> 
> 标签：iphone

我是 iPhone 编程的新手。任何人都可以在拍摄照片之前在相机视图中告诉它显示相机按钮和取消按钮吗？

但是我想代替取消按钮执行我们自己的操作，我可以在该取消按钮中的哪里执行操作。以及如何避免相机中的“使用”和“重拍”按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-04T10:15:16.823

尝试隐藏相机显示按钮`picker.showsCameraControls = NO;`并在相机 API 上绘制自定义按钮

# android - 为什么 android:layout_gravity="right" 在 android xml 中不起作用

> ID：14193727
> 
> 赞同：4
> 
> 时间：2013-01-07T10:09:42.363
> 
> 标签：android, android-layout, android-linearlayout, gravity, layout-gravity

我的列表视图行的 xml 代码是

```
 <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:baselineAligned="false"
    android:orientation="horizontal" >

    <LinearLayout
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="5"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/tv_name"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="10dp" />

        <TextView
            android:id="@+id/tv_time"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="10dp" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal"
        android:layout_weight="2"
        android:gravity="center" >

        <ImageView
            android:id="@+id/iv_image"
            android:layout_width="50dp"
            android:layout_height="40dp"
            android:background="@drawable/app_icon_17"
            android:contentDescription="@string/empty" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_gravity="right"
        android:layout_weight="2"
        android:gravity="center" >

        <Button
            android:id="@+id/btn_delete"
            android:layout_width="40dp"
            android:layout_height="40dp"
            android:background="@drawable/btn_delete_new"
            android:focusable="false" />
    </LinearLayout>

</LinearLayout> 
```

我希望 ID 为 btn_delete 的最后一个按钮保持右对齐。并且它在设计时在“图形布局”中显示为我想要的。但是当我运行它时，在模拟器上它不起作用。

查看输出：

![在此处输入图像描述](../Images/2dfde75058664555be01f0538a8682ab.png)

那么为什么删除按钮没有正确对齐呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-07T10:29:55.637

使用这个，使用相对布局

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <RelativeLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true" >

        <TextView
            android:id="@+id/tv_name"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="10dp" />

        <TextView
            android:id="@+id/tv_time"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/tv_name"
            android:layout_marginLeft="10dp" />
    </RelativeLayout>

    <RelativeLayout
        android:id="@+id/rl_btn"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true" >

        <Button
            android:id="@+id/btn_delete"
            android:layout_width="40dp"
            android:layout_height="40dp"
            android:background="@drawable/btn_delete_new"
            android:focusable="false" />
    </RelativeLayout>

    <RelativeLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginRight="20dp"
        android:layout_toLeftOf="@+id/rl_btn" >

        <ImageView
            android:id="@+id/iv_image"
            android:layout_width="50dp"
            android:layout_height="40dp"
            android:background="@drawable/app_icon_17"
            android:contentDescription="@string/empty" />
    </RelativeLayout>

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-07T10:18:47.353

您似乎误解了布局，`LinearLayouts`不需要嵌入的布局。使用 a `RelativeLayout`，例如：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <TextView
        android:id="@+id/tv_name"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginLeft="10dp" />

    <TextView
        android:id="@+id/tv_time"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_marginLeft="10dp" />

    <ImageView
        android:id="@+id/iv_image"
        android:layout_width="50dp"
        android:layout_height="40dp"
        android:layout_centerVertical="true"
        android:layout_marginLeft="10dp"
        android:layout_toRightOf="@id/tv_time"
        android:background="@drawable/app_icon_17"
        android:contentDescription="@string/empty" />

    <Button
        android:id="@+id/btn_delete"
        android:layout_width="40dp"
        android:layout_height="40dp"
        android:layout_centerVertical="true"
        android:layout_alignParentRight="true"
        android:background="@drawable/btn_delete_new"
        android:focusable="false" />

</RelativeLayout> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T10:36:04.333

正如我们所看到的，您已经为行布局分配了权重。

如果您**为父布局**分配权重，您只需要相应地设置 height 或 with `0dp`。在你的情况下`android:layout_width="0dp"`

但是当您有该加权布局的子布局时，您必须将该布局属性指定为`fill_parent`ie: button's `android:layout_height="fill_parent"`

**因此，如果您不想更改父布局并希望使用现有代码，您可以尝试以下代码。**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:baselineAligned="false"
    android:orientation="horizontal" >

    <LinearLayout
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="5"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/tv_name"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="10dp" />

        <TextView
            android:id="@+id/tv_time"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="10dp" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="2"
        >

        <ImageView
            android:id="@+id/iv_image"
            android:layout_width="fill_parent"
            android:layout_height="40dp"
            android:background="@drawable/icon"
            android:contentDescription="@string/app_name" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="2" >

        <Button
            android:id="@+id/btn_delete"
            android:layout_width="fill_parent"
            android:layout_height="40dp"
            android:background="@drawable/icon"
            android:focusable="false" />

    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T10:15:16.737

改变这个

```
<LinearLayout
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_gravity="right"
        android:layout_weight="2"
        android:gravity="center" >

        <Button
            android:id="@+id/btn_delete"
            android:layout_width="40dp"
            android:layout_height="40dp"
            android:background="@drawable/btn_delete_new"
            android:focusable="false" />
    </LinearLayout> 
```

到

```
<LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content">

        <Button
            android:id="@+id/btn_delete"
            android:layout_width="40dp"
            android:layout_height="40dp"
            android:layout_gravity="right"
            android:background="@drawable/btn_delete_new"
            android:focusable="false" />
    </LinearLayout> 
```

您正在申请`android:layout_gravity="right"`布局。相反，您应该将其应用于布局内的按钮。而且我认为您不需要该布局的权重2。但是，如果您需要，您可以添加它。希望能帮助到你。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2013-01-07T10:12:37.370

```
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_weight="2"
    android:orientation="vertical" >

    <Button
        android:id="@+id/btn_delete"
        android:layout_width="40dp"
        android:layout_height="40dp"
        android:layout_gravity="right"
        android:gravity="right"
        android:background="@drawable/btn_delete_new"
        android:focusable="false" />
</LinearLayout> 
```

# javascript - 使用 jQuery 键入时减小 TextArea 中文本的大小

> ID：14193728
> 
> 赞同：1
> 
> 时间：2013-01-07T10:09:51.737
> 
> 标签：javascript, jquery

我有一个非常好的小功能，如果它们开始溢出，当它们显示在屏幕上时，它会减小一些 div 内的文本大小。

```
$(function(){
    $('div.Body').each(function (index) {
        if ($('div.Body')[index].scrollHeight > 150) {
            $('div.Body')[index].style.fontSize = 'small';
            if ($('div.Body')[index].scrollHeight > 150) {
                $('div.Body')[index].style.fontSize = 'x-small';
                if ($('div.Body')[index].scrollHeight > 150) {
                    $('div.Body')[index].style.fontSize = 'xx-small';
                }
            }
        }
    });
}) 
```

当用户在提交文本时将文本输入到 textArea 时，我想使用相同/相似的功能来做同样的事情，但是 textArea 似乎没有用于 scrollHeight 的功能：

```
$(function() {
    window.status = $('.TextAreaClass').scrollHeight;
}); 
```

这个函数只是返回未定义。

如何在 textArea 中完成此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T10:18:18.367

只需使用`this`, 而不是`$('div.Body')[index]`为循环的每次迭代获取：

```
$('div.Body').each(function () { // Remove the redundant parameter
    if (this.scrollHeight > 150) {
        this.style.fontSize = 'small';
        if (this.scrollHeight > 150) {
            this.style.fontSize = 'x-small';
            if (this.scrollHeight > 150) {
                this.style.fontSize = 'xx-small';
            }
        }
    }
}); 
```

中`.each`，`this`指`$('div.Body')[index]`。

而且，就像 Rory 所说，`$('.TextAreaClass')`返回一个 jQuery 对象。您可能希望使用它`$('.TextAreaClass')[0];`来访问该对象中的第一个 DOM 元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T10:13:08.297

`scrollHeight`是一种本机 javascript 方法，而不是 jQuery 方法，因此您需要执行以下操作来`scrollHeight`获取`textarea`：

```
window.status = $('.TextAreaClass')[0].scrollHeight; 
```

注意`[0]`which 返回 jQuery 对象中的第一个元素，它是本机 DOM 元素。此外，您确实应该在当前代码中缓存所选元素以使其性能更好。试试这个：

```
$('div.Body').each(function (index) {
    var div = $('div.Body')[index];
    if (div.scrollHeight > 150) {
        div.style.fontSize = 'small';
        if (div.scrollHeight > 150) {
            div.style.fontSize = 'x-small';
            if (div.scrollHeight > 150) {
                div.style.fontSize = 'xx-small';
            }
        }
    }
}); 
```

最后，该代码的逻辑似乎有缺陷，因为所有条件都在检查`> 150`？

# objective-c - Objective-C 类方法：点语法和 “类属性”

> ID：14193737
> 
> 赞同：5
> 
> 时间：2013-01-07T10:10:38.350
> 
> 标签：objective-c, class, properties, autocomplete

在为 iOS 编程时，我遇到了以下情况：

我有一个带有类方法的单例类`+ (Store*)sharedStore`。当我想在单例对象上调用实例方法时，我可以使用点语法来获取该对象，即`[Store.sharedStore foo]`.

但是，Xcode 在输入点后不会自动完成“sharedStore”。另一方面，`[[Store sharedStore] foo]` *是*自动完成的！

有没有“类属性”这样的东西？如果我可以`sharedStore`在类上变成只读属性，点语法将获得自动完成。

*更一般地说，Xcode 根本不会在任何非属性的点语法后自动完成，即使这是调用（getter）方法的有效方式。*

感谢任何解决方案、解决方法或信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T12:12:23.197

目前，就类吸气剂而言，我们似乎必须：

*   *在没有自动完成的情况下*使用此语法：`Store.sharedStore`；或者
*   改用括号语法：`[Store sharedStore]`.

我最近没有尝试过其他编辑器（例如 AppCode）。另一个编辑器*可能会*自动更正类 getter 上的点语法。

关于什么是正确的、合乎逻辑的或可读的，意见各不相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T10:22:58.170

点语法用于访问属性。有些人将它与返回值且不获取参数的实例方法一起使用，但这是一种不好的方法。所有其他情况都是错误的。

# gwt - 使用控制台处理程序以生产模式登录 GWT

> ID：14193740
> 
> 赞同：3
> 
> 时间：2013-01-07T10:11:03.497
> 
> 标签：gwt

我已经使用 ConsoleHandler 启用了 GWT 日志记录，如下所示。

```
 <inherits name="com.google.gwt.logging.Logging"/>
   <set-property name="gwt.logging.logLevel" value="INFO"/> 
   <set-property name="gwt.logging.enabled" value="TRUE"/> 
   <set-property name="gwt.logging.consoleHandler" value="ENABLED"/> 
```

因此，我还看到应用程序页面上出现一个日志记录窗口，并登录浏览器的控制台，如此处所示[，](https://developers.google.com/web-toolkit/doc/latest/DevGuideLogging)这很明显。

如何禁用出现在我的应用程序上的窗口并在生产模式下仅打开浏览器控制台？

是我们必须禁用 ConsoleHandler 吗？或者在生产模式下我是否必须使用 SimpleRemoteLogHandler？

还有一个 FirebugLogHandler 但仅限于 Firebug。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T10:23:09.397

在您的情况下禁用弹出窗口 -

```
<set-property name="gwt.logging.popupHandler" value="DISABLED" /> 
```

您还可以配置其他详细信息。在我们的例子中，我们遵循以下

```
 <set-property name="gwt.logging.enabled" value="TRUE" />
    <set-property name="gwt.logging.logLevel" value="FINEST" />
    <set-property name="gwt.logging.consoleHandler" value="ENABLED" />
    <set-property name="gwt.logging.developmentModeHandler"
        value="ENABLED" />
    <set-property name="gwt.logging.firebugHandler" value="ENABLED" />
    <set-property name="gwt.logging.hasWidgetsHandler" value="DISABLED" />
    <set-property name="gwt.logging.popupHandler" value="DISABLED" />
    <set-property name="gwt.logging.systemHandler" value="ENABLED" />
    <set-property name="gwt.logging.simpleRemoteHandler"
        value="DISABLED" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T10:16:58.303

当您`<inherits name="com.google.gwt.logging.Logging"/>`已经启用了大多数日志处理程序时，包括`popupHandler`负责弹出窗口的日志处理程序。

你会想要禁用所有你不想要/不需要的，而不是启用你想要的。

请参阅[https://code.google.com/p/google-web-toolkit/source/browse/tags/2.5.0/user/src/com/google/gwt/logging/LoggingDisabled.gwt.xml#132](https://code.google.com/p/google-web-toolkit/source/browse/tags/2.5.0/user/src/com/google/gwt/logging/LoggingDisabled.gwt.xml#132)

* * *

作为旁注，`gwt.logging.logLevel`已经默认`INFO`并`gwt.logging.enabled`设置为`TRUE`已经在[`com.google.gwt.logging.Logging`](https://code.google.com/p/google-web-toolkit/source/browse/tags/2.5.0/user/src/com/google/gwt/logging/Logging.gwt.xml).

# .net - 调试 JIT 程序集时读取实例字段

> ID：14193745
> 
> 赞同：5
> 
> 时间：2013-01-07T10:11:09.960
> 
> 标签：.net, reflection, jit, sos, ngen

在过去的几周里，我一直在玩弄[非托管 .NET 调试 API](http://msdn.microsoft.com/en-us/library/ms404520.aspx)。

虽然 MSDN 记录了接口本身，但为了了解如何以任何有意义的方式实际使用它们，我求助于各种博客（主要是[Mike Stall 的](http://blogs.msdn.com/b/jmstall/)）和[CLR 托管调试器示例](http://www.microsoft.com/en-us/download/details.aspx?id=2282)和[ILSpy 源](https://github.com/icsharpcode)中的托管包装器。最后，我能够将我的测试程序附加到正在运行的进程，设置断点并点击它们。

接下来我想做的是在遇到这样的断点时，读取相关对象实例的字段。当调试目标方法没有经过 NGEN 或 JIT 时，通过[禁用加载 NGEN 程序集](http://www.reflector.net/2012/03/debugging-debugging-experience/)（环境设置“COMPLUS_ZAPDISABLE=1”）和[禁用 JIT 优化](http://msdn.microsoft.com/en-us/library/9dd8z24x.aspx)（又名“.ini 文件技巧”），这可以正常工作）。

但是，当我对我的理想目标（零售优化（NGEN/JIT'ed）代码）进行相同尝试时，它不起作用。例如：我可以在点击入口断点时仍然检索方法参数的数量，但我无法获取第一个参数本身（调试 API 会引发异常）。

现在，我想这是因为调试 API 应该是平台独立的，在这种情况下，程序集不再是。但是，如果我接受这个平台对英特尔的依赖怎么办：据我所知，CLR 使用[fastcall 调用约定](http://en.wikipedia.org/wiki/X86_calling_conventions)，在这种情况下，ECX 寄存器包含第一个方法参数（成员函数的隐式“this”引用） .

我对此进行了测试，实际上在到达断点时，ECX 在 NGEN 的程序集中包含了 OBJECTREF（对象实例的地址）。

现在读取实例字段的最后一步是检索相对于该指针的字段偏移量，这就是我卡住的地方，因为我似乎无法找出 CLR[在本机代码生成期间如何打包实例字段](http://msdn.microsoft.com/en-us/magazine/cc163791.aspx).

我意识到这可能取决于 CLR 版本/实现，但显然有办法，因为带有 SOS 扩展的 WinDbg 能够找到这种布局。如果不通过调试 API，我可以以某种方式利用 SOS.dll 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T12:43:53.230

对于您的第一个问题，您找不到参数/本地变量的原因是您正在调试优化代码。优化的代码不允许跟踪 args/locals。

至于第二个问题，您需要在 WinDbg 中使用 SOS.dll SOSEX.dll 或 PSSCOR2/4.dll 或在 Visual Studio 中使用 SOS/PSSCOR 才能读取对象的字段。

编辑：我现在看到您想从代码中执行此操作。这需要使用数据访问 (DAC) API，不幸的是，该 API 未记录在案。

# ios - iOS - 计算并返回数组中的重复项数

> ID：14193750
> 
> 赞同：0
> 
> 时间：2013-01-07T10:11:50.180
> 
> 标签：ios, count, nsmutablearray, duplicates

我正在开发一个业务目录，其中有一个包含业务类型（美发师、机械师等）的数组和一个包含业务部分的数组（例如 A 或 B 或 C 或 D...或 Z 等）。

数据将显示在带有 AZ 索引的 tableview 中。

我已将其设置如下，但想不出根据业务部门信函返回部门编号的方法。

我想返回数组中每个部分中具有相同业务类型字母（例如 A 或 B 或 C 或 D ... 或 Z 等）的对象数。

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
return 26;
}

- (NSArray *)sectionIndexTitlesForTableView:(UITableView *)tableView {

    NSMutableArray *tempArray = [[NSMutableArray alloc] init];
    [tempArray addObject:@"A"];
    [tempArray addObject:@"B"];
    [tempArray addObject:@"C"];
    [tempArray addObject:@"D"];
    [tempArray addObject:@"E"];
    [tempArray addObject:@"F"];
    [tempArray addObject:@"G"];
    [tempArray addObject:@"H"];
    [tempArray addObject:@"I"];
    [tempArray addObject:@"J"];
    [tempArray addObject:@"K"];
    [tempArray addObject:@"L"];
    [tempArray addObject:@"M"];
    [tempArray addObject:@"N"];
    [tempArray addObject:@"O"];
    [tempArray addObject:@"P"];
    [tempArray addObject:@"Q"];
    [tempArray addObject:@"R"];
    [tempArray addObject:@"S"];
    [tempArray addObject:@"T"];
    [tempArray addObject:@"U"];
    [tempArray addObject:@"V"];
    [tempArray addObject:@"W"];
    [tempArray addObject:@"X"];
    [tempArray addObject:@"Y"];
    [tempArray addObject:@"Z"];

    return tempArray;

}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
// I want to return the number of objects in the array that have the same section name (EG. A or B or C etc)
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T10:16:38.357

您可以创建字典或数组数组。任何一个都适合你。

看看这个例子：

我有两个数组`alphabets`，其中包含 A、B、C...Z。其他数组`words`包含在 index[0]={apple, axe..}, index[1]={ball, bat}, index[3]={cow, cat, car, cardamom}.... 所以形成一个二维数组。

注意：这里很少有不需要的东西，你可以省略它们，比如字幕。

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView{
    return [self.words count];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{
    return [[self.words objectAtIndex:section]count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{

    UITableViewCell *cell=[tableView dequeueReusableCellWithIdentifier:@"cell"];
    if (cell==nil) {
        cell=[[UITableViewCell alloc]initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:@"cell"];
    }
    cell.textLabel.text=[[self.words objectAtIndex:indexPath.section]objectAtIndex:indexPath.row];
    cell.detailTextLabel.text=[NSString stringWithFormat:@"This is detailed subtitle for %@.",cell.textLabel.text];
    return cell;

}

- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section{
    return [self.alphabets objectAtIndex:section];
}

- (NSArray *)sectionIndexTitlesForTableView:(UITableView *)tableView;{
    return self.alphabets;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T10:25:16.020

您可以[`NSCountedSet`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSCountedSet_Class/Reference/Reference.html "NSCountedSet 文档")从原始数组创建一个知道每个对象出现多少次的

```
NSCountedSet *countedSet = [[NSCountedSet alloc] initWithArray:yourArray]; 
```

然后，您可以`countForObject:`在集合上使用每个对象的计数。

如果顺序对您很重要，那么您可以枚举数组并使用`countForObject:`数组中的对象调用集合。

# sql - SQL查询获取多于一张票的客户

> ID：14193751
> 
> 赞同：0
> 
> 时间：2013-01-07T10:11:51.810
> 
> 标签：sql, oracle, oracle9i

这是架构：

```
 tblCustomers{custid,fname,lname,email}
 tblTicket{ticketId,custid,numOfPassengers,dateofJourney,totafare,trainId} 
```

问题查询是：显示所有预订多于一张票的客户。我正在使用 Oracle 9。两个表的 custid 之间有一个外键。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T10:15:10.760

这？

```
SELECT C.custid
FROM tblCustomers C
  JOIN tblTickets T
    ON C.custid = T.custid
GROUP BY C.custid
HAVING COUNT(*) > 1 
```

如果您想拥有 tblCustomers 的所有字段，请使用以下命令：

```
SELECT C.custid,C.fname,C.lname,C.email
FROM tblCustomers C
  JOIN tblTickets T
    ON C.custid = T.custid
GROUP BY C.custid,C.fname,C.lname,C.email
HAVING COUNT(*) > 1 
```

或者

```
SELECT
       C.custid,
       MAX(C.fname) as fname,
       MAX(C.lname) as lname,
       MAX(C.email) as email
FROM tblCustomers C
  JOIN tblTickets T
    ON C.custid = T.custid
GROUP BY C.custid
HAVING COUNT(*) > 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T10:15:20.650

```
select  * 
from    tblCustomers 
where   custid in (select custid from tblTicket group by custid having count(*) > 1) 
```

# java - 解析带有大量标签的大型 XML

> ID：14193754
> 
> 赞同：-2
> 
> 时间：2013-01-07T10:12:10.587
> 
> 标签：java, xml

我正在尝试将包含大量标记的大型 xml 文件转换为 Java 类进行解析。但是由于没有大量标记，因此很难为每个任务创建 Java 类。有什么可以自动执行此操作。

大约有 200 个独特的标签和一个 400mb 的 xml 文件。

我想要做的是解析 xml 并为其生成 csv，稍后将其插入表中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T10:19:46.913

这个问题很模糊，我不确定你想要达到什么目标，但你可能有兴趣了解 SAX。

在 Java 中解析 XML 的主要方法有 2 种，DOM 和 SAX。SAX 更适合大型文档，因为 DOM 将整个文档加载到内存中，而 SAX 是顺序的和事件驱动的

简单教程[在这里](http://www.mkyong.com/java/how-to-read-xml-file-in-java-sax-parser/)

# c# - 使用内容选择器时返回的奇怪对象

> ID：14193755
> 
> 赞同：1
> 
> 时间：2013-01-07T10:12:12.003
> 
> 标签：c#, user-controls, umbraco

我目前正在为 umbraco 制作用户控件，它将所有内容都`Nodes`包含在`Node`名称“Features”中......而且这一切都可以正常工作，直到我想从“Content Picker”属性（命名为 linkToPage）中获取内容。

当我尝试使用`GetProperty("linkToPage").Value`时，我收到一个关于它是一个对象的错误。所以我然后将它添加到 a`var`并调试，并看到它返回的东西有点奇怪......

```
var linkIdVar = child.GetProperty("linkToPage"); 
```

回报：

```
-   linkIdVar   {1081}      umbraco.interfaces.IProperty {umbraco.NodeFactory.Property}
    -   [umbraco.NodeFactory.Property]  {1081}  umbraco.NodeFactory.Property
        Alias   "linkToPage"    string
        Value   "1081"  string
        +   Version {00000000-0000-0000-0000-000000000000}  System.Guid
        +   Non-Public members      
    Alias   "linkToPage"    string
    Value   "1081"  string
    +   Version {00000000-0000-0000-0000-000000000000}  System.Guid 
```

而且我似乎无法将 Value 设置为 Int 而不会出错，因为它是一个对象......

那么有谁知道如何解决这个问题，或者知道如何更好地从 a 获取页面`Content Picker`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T10:18:58.803

我认为您可能需要将值拆箱为整数，如下所示：

```
var val = (int) child.GetProperty("linkToPage").Value; 
```

但是，如果属性值的内容不是整数，而是字符串，如调试信息所示，则需要转换为整数，如下所示：

```
var val = int.Parse(child.GetProperty("linkToPage").Value as string); 
```

# css - 如何创建一个从模板生成 css 文件的 gem

> ID：14193764
> 
> 赞同：3
> 
> 时间：2013-01-07T10:12:37.893
> 
> 标签：css, ruby-on-rails, gem

我有一组几乎在所有项目中都使用的 css 文件。我想创建一个里面有一个生成器的 gem。我设法使用此处给出的教程编写了一些代码[http://guides.rubyonrails.org/generators.html](http://guides.rubyonrails.org/generators.html)

但是我不确定如何将其移动到 gem 并使用设备安装等命令....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T10:16:37.947

实际上有两种方法可以做到这一点（并且都涉及 Rails Engine afaik）。

*   您创建一个包含文件生成器的引擎
*   您创建一个捆绑 CSS 文件的引擎，这样您就可以在不需要它出现在代码存储库中的情况下使用它。（类似于 jQuery gem）。

要创建引擎，只需遵循本指南：[http](http://edgeguides.rubyonrails.org/engines.html) ://edgeguides.rubyonrails.org/engines.html 。只是没有可挂载选项，您放在`app/assets/stylesheet`目录中的任何内容都可以通过`require`您的 CSS 清单获得。除了你必须做的一般样板设置之外，指南中的相关部分在 6.4 中。

对于同样适用的生成器，您只需像使用应用程序一样将生成器放在生成器目录中，然后可以使用引擎前缀从那里运行它。

# android - 移动网站上的链接从其真实位置移动

> ID：14193767
> 
> 赞同：0
> 
> 时间：2013-01-07T10:12:47.113
> 
> 标签：android, hyperlink, meta-tags, mobile-website

我有一个带有链接的页面。

它应该能够识别移动设备并进行一些更改。当我在移动设备（包括模拟器）上导航到它时，单击链接时没有任何反应。但是，当我向左单击一点时，它会注册一次单击并导航到链接（请参见下图以单击链接 2）

![点击链接 2](../Images/e2e63b55e68cbd9928bbcd96161999f9.png)

有人听说过这样的事情吗？

标记为 android，因为在 anorid 上发现并测试了这个问题，不确定其他设备是否属实。

**`*`编辑`*`**

删除以下内容已解决此问题：

```
<meta name='viewport' content='width=device-width, initial-scale=1, maximum-scale=1'> 
```

我不喜欢这个解决方案，`viewport`标签不是应该帮助移动查看吗？

# media - 将 umbraco 媒体文件夹迁移到另一台服务器

> ID：14193769
> 
> 赞同：2
> 
> 时间：2013-01-07T10:12:50.177
> 
> 标签：media, umbraco, migrate

我需要将我的媒体文件夹迁移到另一台服务器。这就是我现在所拥有的：http: [//mysite.com/media/111/picture.jpg](http://mysite.com/media/111/picture.jpg)

这就是我想要的：http: [//newserver.mysite.com/media/111/picture.jpg](http://newserver.mysite.com/media/111/picture.jpg)

但我想使用 mysite.com/umbraco/ 的 umbraco 后台

我怎样才能做到这一点？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T20:14:43.380

如果我正确理解您的要求，您希望将媒体文件移动到文件系统上的其他位置。

你有两个选择：

1.  将文件夹移动到文件系统上的新位置，然后在 IIS 中添加一个新文件夹，将其命名为 media，并将其指向新文件夹。
2.  在 web.config 中，添加一个名为 UmbracoMediaPath 的新应用设置。根据您的 Umbraco 版本，您可能需要在 /config/FileSystemProviders.config 文件中执行此操作。

更多信息[在这里](http://our.umbraco.org/wiki/reference/webconfig/additional-umbraco-specific-appsettings)和[这里](http://our.umbraco.org/forum/getting-started/installing-umbraco/15541-Different-location-for-Media-folder)

# hibernate - org.hibernate.PropertyNotFoundException：在类 dk.comtalk.billing.server.rating.db.RateDTO 上找不到 flat_rate 的设置器

> ID：14193786
> 
> 赞同：3
> 
> 时间：2013-01-07T10:13:39.763
> 
> 标签：hibernate

`SQL`将结果转换为 时出现此异常`HQL`。`query.setResultTransformer(Transformers.aliasToBean(RateDTO.class)).list()`

但是我已经为课堂上的列设置了设置器和`flat_rate`获取`RateDTO`器

```
private BigDecimal flatRate;

    @Column(name="flat_rate")
public BigDecimal getFlatRate() {
    return flatRate;
}   

public void setFlatRate(BigDecimal flatRate) {
    this.flatRate = flatRate;
} 
```

中的对应表`Mysql DB`。谁能帮帮我吗 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T11:50:18.160

在调用之前尝试使用[addScalar()](http://docs.jboss.org/hibernate/orm/3.3/api/org/hibernate/SQLQuery.html#addScalar%28java.lang.String,%20org.hibernate.type.Type%29)来查询对象`query.list()`

```
final String sql = "select * " + "from international_rate r " + "WHERE LEFT(:called, LENGTH(r.prefix)) = r.prefix " + "and r.valid_from <= :date AND ( r.Valid_to >= :date or r.Valid_to = 0)" + "and r.deleted = 0"; "

    sess.createSQLQuery(sql)
     .addScalar("flatRate", Hibernate.STRING) //like all properties need to Add
.setResultTransformer(Transformers.aliasToBean(RateDTO.class)).list(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-17T12:26:11.017

您应该使用`select student.name as name;`using `select *`will 再次引发异常。您在查询中使用的别名应与 DTO 类中的属性名称相同。

# sql-server - 下面的sql语句对应的LINQ Statement是什么

> ID：14193787
> 
> 赞同：0
> 
> 时间：2013-01-07T10:13:41.370
> 
> 标签：sql-server, linq, entity-framework

**我有两张桌子：**

```
tblCategory (ID, CategoryName, ParentCategoryID)

tblFile (ID, Name, CategoryID, USerID, LanguageID, UpadateDateTime, 
         ActiveDateTime, FilePath) 
```

我想从 tblFile 表中检索所有数据，其中 tblCategory.ParentCategoryID = 1 的 CategoryID 表的 tblFile 表。我想做如下的事情：

```
Select * from tblFile where CategoryID is in 
(select ID from tblCategory where ParentCategoryID =1) && 
UploadDateTime >= startDate && UploadDateTime <= endDate 
```

在这里，我想检索属于特定父类别的所有数据，例如 tblCategory 中的 1。CategoryID 是 tblFile 的外键，对应 tblCategory 的 ID。

而且，什么是 LINQ 语句或实体框架。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T10:20:05.477

```
var results = _db.tblFile.Where(x=> x.UploadDateTime >= startDate && UploadDateTime <= endDate && (_db.tblCategory.Where(c=> c.ParentCategoryId == 1).Select(c=> c.Id).ToArray().Contains(x.CategoryID))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T10:23:03.423

假设您的 EF 模型中存在和之间的 FK 关系`tblCategories`并且`tblFiles`具有默认命名，您可以在两个表上使用带有过滤器的[SelectMany](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.selectmany.aspx)投影：

```
db.tblCategories.Where(cat => cat.ParentCategoryID == 1)
             .SelectMany(cat => cat.tblFiles)
             .Where(file => file.UploadDateTime >= startDate && file.UploadDateTime <= endDate) 
```

**更新**

我相信您的 SQL 可以通过连接来简化：

```
Select * 
  from tblFile f join tblCategory cat
       on f.CategoryID = cat.ID
  where cat.ParentCategoryID =1
        and f.UploadDateTime >= @startDate && f.UploadDateTime <= @endDate 
```

# apache-flex - 在 Linux 上设置 flex 单元

> ID：14193790
> 
> 赞同：2
> 
> 时间：2013-01-07T10:13:54.253
> 
> 标签：apache-flex, maven, flash, flexmojos

我正在使用 Flex 开发一个项目，直到现在我们使用 Windows 为需要 flex 环境的模块/工件运行 flex 单元测试。由于给定的依赖关系，很难自动化任何事情，因为在运行这些 maven 测试时我必须在 linux/windows 之间切换。

我努力尝试让 flex 单元测试在 linux 上运行，但还没有成功。这是 maven clean test -X 在 flex 项目上的一小部分堆栈跟踪。

```
[INFO] Flexmojos 3.8
[INFO]   Apache License - Version 2.0 (NO WARRANTY) - See COPYRIGHT file
[INFO] Running tests /root/trunk/flex-project/flex-surface/flex-surface-common/flex-surface-common-flex/target/test-classes/TestRunner.swf
[DEBUG] [org.sonatype.flexmojos.test.monitor.AsVmPing] opened server socket on port 13540
[DEBUG] [org.sonatype.flexmojos.test.monitor.ResultHandler] opened server socket on port 13539
[DEBUG] [LAUNCHER] ASVmLauncher starting
[DEBUG] [LAUNCHER] exec: /usr/bin/flashplayer - /root/trunk/flex-project/flex-project-arbeidsflate/flex-surface-common/flex-surface-common-flex/target/test-classes/TestRunner.swf
[DEBUG] [LAUNCHER] Creating process
[WARNING] [LAUNCHER] Using xvfb-run to launch headless tests
[DEBUG] [LAUNCHER] Process created java.lang.UNIXProcess@1a6c088
[DEBUG] [MOJO] launcher RUNNING
[DEBUG] [MOJO] pinger STARTED
[DEBUG] [MOJO] resultHandler STARTED
[DEBUG] [LAUNCHER] Output pumpers ON
[DEBUG] [LAUNCHER] Waiting for flashplayer termination
[DEBUG] [LAUNCHER] Flashplayer closed
[DEBUG] [LAUNCHER] Unexpected return code 1
[DEBUG] [SYSERR]: mktemp: cannot create temp file /tmp/Xauthority: File exists
[DEBUG] [MOJO] launcher ERROR
[DEBUG] [MOJO] pinger STARTED
[DEBUG] [MOJO] resultHandler STARTED
[INFO] ------------------------------------------------------------------------
[INFO] Tests run: 0, Failures: 0, Errors: 0, Time Elapsed: 0 sec
[INFO] ------------------------------------------------------------------------
[INFO] Reactor Summary: 
```

我需要帮助找出问题所在。如果你们中的任何人知道在 linux 上运行 flex 单元测试的任何其他方式，而不是通过 JENKINS/HUDSON，我将非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T12:47:11.190

首先，只需按照以下站点上的 linux 部分说明进行操作：[运行单元测试 - FlexMojos](https://docs.sonatype.org/display/FLEXMOJOS/Running+unit+tests)。下载 flashplayer 并将其解压到适当的位置，并将绝对目录路径放入 PATH 变量中。

下载 xvfb-run 脚本并更改以下 'fi'

```
# If the user did not specify an X authorization file to use, set up a temporary
# directory to house one.
if [ -z "$AUTHFILE" ]; then
  XVFB_RUN_TMPDIR="${TMPDIR:-/tmp}/$PROGNAME.$$"
  if ! mkdir -p -m 700 "$XVFB_RUN_TMPDIR"; then
    error "temporary directory $XVFB_RUN_TMPDIR already exists"
    exit 4
  fi
  AUTHFILE=$(mktemp -p "$XVFB_RUN_TMPDIR" Xauthority)
fi 
```

到

```
# If the user did not specify an X authorization file to use, set up a temporary
# directory to house one.
if [ -z "$AUTHFILE" ]; then
   XVFB_RUN_TMPDIR=$(mktemp -d)
   if ! mkdir -p -m 700 "$XVFB_RUN_TMPDIR"; then
     error "temporary directory $XVFB_RUN_TMPDIR already exists"
     exit 4
   fi
   AUTHFILE=$(mktemp "$XVFB_RUN_TMPDIR/Xauthority")
 fi 
```

我解决了我的问题，希望你也一样。祝你好运。

# jquery - jQuery UI 可拖动标签

> ID：14193797
> 
> 赞同：3
> 
> 时间：2013-01-07T10:14:26.813
> 
> 标签：jquery, jquery-ui, jquery-plugins

我的要求是容器中应该有标签，用户可以将标签拖放到输入字段中。如何将放置的标签保持为标签而不是文本。

我尝试[了这个](http://xoxco.com/clickable/jquery-tags-input)插件，当我拖动一个标签并放入第一个元素的输入字段时它工作正常，但对于第二个标签，它会创建全新的容器，并且在添加第二个标签后，无法添加另一个标签。这是代码，

```
<ul id="draggable">
    <li>Tag1</li>
    <li>Tag2</li>
    <li>Tag3</li>
    <li>Tag4</li>
</ul>

<p id="topdropped">
    <input id="tags_1" type="text" class="tags" value="" />
</p>

$(function() {
        $("#draggable li").draggable({
            helper : 'clone'
        });
        $("#topdropped").droppable({
            drop : function(event, ui) {

                $(this).find("#tags_1").val(ui.draggable.text());
                $('#tags_1').tagsInput({
                    width : 'auto'
                });
            }
        });
    }); 
```

[现场演示](http://jsfiddle.net/Noorulamin/jDxvQ/12/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T07:10:56.767

我像这样解决了这个问题，这是 我想要实现的[演示。](http://jsfiddle.net/Noorulamin/jDxvQ/12/)

在问题出现之前，我在 dropable 中调用并启动插件，就像这样

```
 $('#tags_1').tagsInput({
      width : 'auto'
   }); 
```

后来我发现这个插件也提供了`addTag()`方法，然后我调用了这个方法`dropable`，这解决了我的问题，而不是我喜欢的上面的代码。

```
if ($('#tags_1').tagExist(ui.draggable.text())) {
    alert("Already Added.");
    }else {
    $('#tags_1').addTag(ui.draggable.text());
    } 
```

这里`$('selector').tagExist()`插件也提供了检查输入字段中是否已经存在标签。

这是正在工作的代码。

```
<ul id="draggable">
    <li>Tag1</li>
    <li>Tag2</li>
    <li>Tag3</li>
    <li>Tag4</li>
</ul>

<p id="topdropped">
    <input id="tags_1" type="text" class="tags" value="" />
</p>

<script type="text/javascript">
    $(function() {
        $('#tags_1').tagsInput({
            'defaultText' : '',
            width : 'auto',
            'interactive' : true,
        });
        $("#draggable li").draggable({
            helper : 'clone'
        });
        $("#topdropped").droppable({
            drop : function(event, ui) {                    
                if ($('#tags_1').tagExist(ui.draggable.text())) {
                    alert("Already Added.");
                }else {
                    $('#tags_1').addTag(ui.draggable.text());

                }
            }
        });
    });
</script> 
```

# c# - 正则表达式更新 div 的样式属性 - 宽度和高度

> ID：14193798
> 
> 赞同：0
> 
> 时间：2013-01-07T10:14:37.437
> 
> 标签：c#, regex

示例字符串：-

```
<div class="ui-droppable" id="ParentDIV" style="width: 286pt; height: 212pt; background-color: #00752d; background-image: none;">
    <div class="be-canvas-grid" style="background-image: none">
        <div style="width: 200px; height: 50px; top: 77px; left: 162px; font-family: Arial; font-size: 12pt; color: rgb(0, 0, 0); overflow: hidden;" data-uid="2" class="be-component be-text  ui-draggable ui-droppable">
            <span>hello from simple text</span>
        </div>
        <div style="width: 161.567px; height: 39.5667px; top: 127px; left: 172px; font-family: Arial; font-size: 12pt; color: rgb(201, 87, 201); overflow: hidden;" data-uid="3" class="be-component be-text  ui-draggable ui-droppable">
            <span>{[C-FULLNAME:LC]}</span>
        </div>
        <div style="width: auto; height: auto; top: 196px; left: 216px;" data-uid="4" class="be-component be-image  ui-draggable">
            <img src="https://localhost/a/images/BarcodeType1.jpeg" data-qrstub="" alt="">
        </div>
        <div style="width: 200px; height: 50px; top: 6px; left: 12px; font-family: Arial; font-size: 12pt; color: rgb(201, 87, 201); overflow: hidden;" data-uid="5" class="be-component be-text  ui-draggable ui-droppable">
            <span>asd</span>
        </div>
    </div>
</div> 
```

我想提取`ParentDIV`元素的样式属性，即宽度和高度。然后我想用我的值更新宽度和高度 css 属性。样式标签中的高度和宽度属性的顺序`ParentDIV`也可能会改变。

请建议正则表达式。我将在 C#.net 中进行此代码更改。

正则表达式可以借助在线工具[http://www.gskinner.com/RegExr/](http://www.gskinner.com/RegExr/)构建。

# java - 有条件地从 csv 文件中添加行

> ID：14193799
> 
> 赞同：0
> 
> 时间：2013-01-07T10:14:40.567
> 
> 标签：java, csv

```
String csvFilename = "C:\\ClothingItem.csv";
CSVReader csvReader = new CSVReader(new FileReader(csvFilename));
String[] row = null;
while ((row = csvReader.readNext()) != null ) {
    // Here my objective is to check if row[0] contains some 
    // string"abc" then 
    // I want to add the next 15  lines from csv file to a list. 
    // Then again check the same condition after those lines means 
    // from the 16th line and than add again to the list.
    // How could I approach?
} 
```

我在 while 循环中提到了我的目标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T10:20:22.317

```
int counter=0;    
while ((row = csvReader.readNext()) != null ) {
 //Here my objective is to check if row[0] contains some string"abc" then 
         if(counter==0 && row.contains("abc"))  {
           counter=15; //Might be off by one depending upon the condition you have, would you include "abc" line or not?
         } 
         counter--;
         if(counter>0) {
          //Add this line to a List.
         }
        // I want to add the next 15  lines from csv file to a list. Then again check       the same condition after those lines means from the 16th line and than add again to the list.How could I approach?
} 
```

# c++ - 读取/存储不同类型的字符串（utf8/utf16/ansi）

> ID：14193800
> 
> 赞同：1
> 
> 时间：2013-01-07T10:14:47.937
> 
> 标签：c++, string, unicode, byte-order-mark, wstring

我正在解析一个文件，其中包含不同编码的各种字符串。这些字符串的存储方式是这样的：

```
0xFF 0xFF - block header                   2 bytes
0xXX 0xXX - length in bytes                2 bytes
0xXX      - encoding (can be 0, 1, 2, 3)   1 byte
...       - actual string                  num bytes per length 
```

这通常很容易，但是我不确定如何处理编码。编码可以是以下之一：

```
0x00 - regular ascii string (that is, actual bytes represent char*)
0x01 - utf-16 with BOM (wchar_t* with the first two bytes being 0xFF 0xFE or 0xFE 0xFF)
0x02 - utf-16 without BOM (wchar_t* directly)
0x03 - utf-8 encoded string (char* to utf-8 strings) 
```

我需要以某种方式阅读/存储它。最初我在考虑简单`string`，但这不适用于`wchar_t*`. 然后我考虑将所有内容都转换为`wstring`，但这将是相当多的不必要的转换。接下来想到的是`boost::variant<string, wstring>`（我已经`boost::variant`在代码的另一个地方使用了）。在我看来，这是一个合理的选择。所以现在我有点难以解析它。我正在考虑以下几点：

```
//after reading the bytes, I have these:
int length;
char encoding;
char* bytes;

boost::variant<string, wstring> value;
switch(encoding) {
    case 0x00:
    case 0x03:
        value = string(bytes, length);
        break;
    case 0x01:
        value = wstring(??);
        //how do I use BOM in creating the wstring?
        break;
    case 0x02:
        value = wstring(bytes, length >> 1);
        break;
    default:
        throw ERROR_INVALID_STRING_ENCODING;
} 
```

由于我只是稍后打印这些字符串，因此我可以将 UTF8 存储在一个简单的文件中`string`而无需太多麻烦。

我的两个问题是：

1.  这种方法是否合理（即使用 boost::variant）？

2.  如何`wstring`使用特定的 BOM 创建？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T10:46:43.730

UTF16 需要区分 LE 和 BE。

我怀疑`0x02 - utf-16 without BOM (wchar_t* directly)`实际上是 UTF16 BE。`With BOM`编码方式 LE/BE 由 BOM 指示。

C++ 标准库的 Unicode 支持非常有限，我认为 vanilla C++ 不能正确处理 UTF16LE/BE，更不用说 UTF8。许多 Unicode 应用程序使用[ICU](http://site.icu-project.org/)等 3rd 方支持库。

对于内存中的表示，我会坚持使用 std::string。因为 std::string 可以表示任何文本编码，而 std::wstring 对这种多重编码情况没有多大帮助。如果您需要使用 std::wstring 和相关的 std::iostream 函数，请注意系统区域设置和 std::locale 设置。

Mac OS X 使用 UTF8 作为唯一的默认文本编码，而 Windows 使用 UTF16 LE。我认为，您在内部也只需要一种文本编码，再加上几个转换功能就可以达到您的目的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T12:47:59.647

经过一些研究、尝试和错误，我决定使用 UTF8-CPP，它是一个轻量级的、仅包含标头的函数集，用于与 utf8 进行转换。它包括从 utf-16 转换为 utf-8 的功能，据我了解，它可以正确处理 BOM。

然后我将所有字符串存储为`std::string`，将 utf-16 字符串转换为 utf-8，如下所示（来自我上面的示例）：

整数长度；字符编码；字符*字节；

```
string value;
switch(encoding) {
    case 0x00:
    case 0x03:
        value = string(bytes, length);
        break;
    case 0x01:
    case 0x02:
        vector<unsigned char> utf8;
        wchar_t* input = (wchar_t*)bytes;
        utf16to8(input, input + (length >> 1), back_inserter(utf8));
        value = string(utf8.start(), utf8.end());
        break;
    default:
        throw ERROR_INVALID_STRING_ENCODING;
} 
```

这在我的快速测试中效果很好。在最终判断之前，我需要做更多的测试。

# php - 带参数的 Codeigniter 自动加载库

> ID：14193807
> 
> 赞同：1
> 
> 时间：2013-01-07T10:15:08.110
> 
> 标签：php, codeigniter, autoload, filemaker

我正在使用[FX.php](http://www.iviking.org/FX.php/)和 Codeigniter 来访问 Filemaker 数据库。库和配置文件在 config/autoload.php 中自动加载。

此设置在我的开发机器（OS X，PHP 5.3.14）上运行良好。但是，当我在我们的开发服务器（Ubuntu Precise，PHP 5.3.10）上运行该项目时，它不起作用。配置参数未传递给库似乎存在问题。我收到以下错误消息：

```
Severity: Notice
Message:  Undefined index: dataServer
Filename: libraries/CIFX.php
Line Number: 9

Severity: Notice
Message:  Undefined index: dataPort
Filename: libraries/CIFX.php
Line Number: 9

Severity: Notice
Message:  Undefined index: dataType
Filename: libraries/CIFX.php
Line Number: 9

Severity: Notice
Message:  Undefined index: dataURLType
Filename: libraries/CIFX.php
Line Number: 9 
```

我的库/CIFX.php 文件如下所示：

```
require('FX.php');

class CIFX extends FX {

    function __construct ($params = array())
    {
        parent::__construct($params['dataServer'], $params['dataPort'], $params['dataType'], $params['dataURLType']);
    }

}
?> 
```

我的 config/CIFX.php 文件如下所示：

```
$config['dataServer'] = '192.168.1.10';
$config['dataPort'] = '80';
$config['dataType'] = 'FMPro7';
$config['dataURLType'] = '';
$config['dbuser'] = '';
$config['dbpassword'] = ''; 
```

根据[Codeigniter 手册](http://ellislab.com/codeigniter/user-guide/general/creating_libraries.html)，这应该可以工作。

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T11:43:23.837

初始化类时需要传递参数

```
$params = array(
    'dataServer' =>  $this->config->item('dataServer');, 
    'dataPort'   =>  $this->config->item('dataPort');
);

$this->load->library('CIFX ', $params); 
```

# php - PHP中的OOP：创建项目索引

> ID：14193811
> 
> 赞同：0
> 
> 时间：2013-01-07T10:15:19.373
> 
> 标签：php, class, object, orm

如果您要在数据库中创建项目索引......也许是管理员的用户列表......在面向对象的世界中应该如何完成？

以此作为非常基本的例子：

```
$sql = 'SELECT
            u.id,
            u.name
        FROM
            users AS u
        WHERE
            u.deleted = "0000-00-00 00:00:00"';

echo '<ul>';
foreach ($db->fetch_all($sql) as $row) {
    $url = './edit/?id=' . urlencode($row['id']);
    echo '
        <li><a href="' . html($url) . '">' . html($row['name']) . '</a></li>';
}
echo '<ul>'; 
```

请暂时忽略 HTML 与逻辑混在一起的事实（只是尽量保持简短）。

现在一些开发人员似乎认为在 OOP 世界中，应该这样做：

```
class user {
    private $id;
    public function __construct($id) {
        $this->id = $id;
    }
    public function name_get() {
        return $this->value_get('name');
    }
    public function admin_url_get() {
        return '/admin/user/edit/?id=' . urlencode($this->id);
    }
    public function age_get() {
        // Calculate from $this->value_get('dob'), using date_diff()
    }
    public function address_billing_get() {
        // i.e. copy returned value onto the order object during checkout
    }
    public function address_delivery_get() {
    }
    private function value_get($field) {

        $db = db_get();

        $sql = 'SELECT
                    u.' . $db->escape_field($field) . '
                FROM
                    user AS u
                WHERE
                    u.id = "' . $db->escape($this->id) . '" AND
                    u.deleted = "0000-00-00 00:00:00"';

        if ($row = $db->fetch($sql)) {
            return $row[$field];
        } else {
            exit_with_error('Cannot return "' . $field . '" for user id "' . $this->id . '"');
        }

    }
}

class user_factory {
    static function get_all() {

        $users = array();

        $db = db_get();

        $sql = 'SELECT
                    u.id
                FROM
                    user AS u
                WHERE
                    u.deleted = "0000-00-00 00:00:00"';

        foreach ($db->fetch_all($sql) as $row) {
            $users[] = new user($row['id']);
        }

        return $users;

    }
}

echo '<ul>';
foreach (user_factory::get_all() as $user) {
    echo '
        <li><a href="' . html($user->admin_url_get()) . '">' . html($user->name_get()) . '</a></li>';
}
echo '</ul>'; 
```

这方面的一些变化包括：

*   使用 ORM，因此您不必编写实际的 SQL（但那是另一天）。

*   更改用户__construct 方法以执行SELECT * FROM user WHERE id = X，因此无需每次都通过user->value_get() 查找单个值。

*   让 user_factory::get_all() 方法执行 SELECT * FROM，并将所有值传递到各个用户对象中……我相信这被称为“构建器”模式（而不是工厂）。

对我来说，这一切似乎都非常低效，有许多查询进出数据库......或者获取不需要的数据（SELECT * FROM 并不是一个好主意）。

例如，假设用户表有诸如他们的家庭/账单地址之类的字段（每个作为第 1、2、3 行、城镇、邮政编码等）......姓名。

我还假设工厂/构建器对象也应该能够接受参数进行搜索（例如，管理员正在寻找特定用户，也许在此页面上它还应该在搜索中包含他们的电子邮件地址字段），并且还通过在一个限制中（例如分页，我猜 10,000+ 条记录可能会导致请求超时）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T15:32:07.003

你混淆了很多东西，以至于我感到困惑......在“OOP 世界”中，就像在现实世界中一样，我们在对象中思考。如果我理解正确，您想要完成什么是在数据库中有一个您想要查询用于不同目的的用户列表？

嗯，首先，我们喜欢根据称为关注点分离的原则来组织事物，也就是说，我们将应用程序构建在层/模块等中，每一层都有自己的责任。

因此，持久层处理与存储（数据库）相关的所有内容并公开一种抽象，即一个或多个对象，其目的是将应用程序对象“转换”为数据，反之亦然。

在您的示例中，持久层又名 DAL（数据访问层）将处理表和所有这些。因此，您通常为每个任务创建一个表，然后您有一个方法（这当然是简化的）。

因此，对于您只需要用户列表（id、Name）的情况，您将拥有一个像 GetUsers() 这样的方法（函数），它将发送相关查询并返回一个简单 DTO（数据传输对象）的列表) 将仅包含 ID 和名称。

应用程序将从该方法获取结果并使用它们来构造视图。在 MVC 上下文中，返回的数据将是 View Model，View 使用该数据生成 html。

您提供的 OOP 示例除了 OOP 之外的所有内容，它只是将概念组合得很糟糕的混杂。

ORM 和工厂适用于您实际需要它们的情况，而这个例子太琐碎了。

OOP 的想法是像乐高积木一样设计应用程序：具有精确目的的多个小部件可以组装成更大的组件，这些组件本身可以一起使用来实现应用程序的目的。

# security - Google 应用引擎：cron 作业的安全性

> ID：14193816
> 
> 赞同：12
> 
> 时间：2013-01-07T10:15:32.933
> 
> 标签：security, google-app-engine, cron

GAE 为计划作业提供 cron 作业。如何设置一些安全性以防止有人直接执行 http GET？在以下示例中，我可以随时在浏览器的 url 字段中键入 /updateData 以执行以下设置中的作业：

```
cron:
- description: daily update of the data in the datastore
  url: /updateData
  schedule: every day 00:00
  timezone: ... 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-07T13:58:14.080

除了 Paul C 所说的之外，您还可以创建一个装饰器来检查**X-Appengine-Cron**标头，如下所示。顺便说一句，标头不能被欺骗，这意味着如果不是来自 cron 作业的请求具有此标头，App Engine 将更改标头的名称。您还可以为任务编写类似的方法，在这种情况下检查**X-AppEngine-TaskName 。**

```
"""
Decorator to indicate that this is a cron method and applies request.headers check
"""
def cron_method(handler):
    def check_if_cron(self, *args, **kwargs):
        if self.request.headers.get('X-AppEngine-Cron') is None:
            self.error(403)
        else:
            return handler(self, *args, **kwargs)
    return check_if_cron 
```

并将其用作：

```
class ClassName(webapp2.RequestHandler):
    @cron_method
    def get(self):
        .... 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-07T10:28:51.783

您需要添加

```
login: admin 
```

给hander，详细说明如下：[Securing URLS for Cron](https://developers.google.com/appengine/docs/python/config/cron#Securing_URLs_for_Cron)

例如

```
application: hello-cron
version: 1
runtime: python27
api_version: 1

handlers:
- url: /updateData
  script: reports.app
  login: admin 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-26T20:48:30.620

恐怕此时文档可能不是完全最新的。正如姚莉提到的，您需要检查的标头是“HTTP_X_APPENGINE_CRON”这是我针对 Python 3.7、Django 和 GAE Flex 的解决方案片段：

```
from django.http import HttpResponse,HttpResponseForbidden
if 'HTTP_X_APPENGINE_CRON' in request.META:
    if request.META['HTTP_X_APPENGINE_CRON'] == 'true':
        # Handler 
else:
    return HttpResponseForbidden() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-05T16:53:12.427

[谷歌云文档](https://cloud.google.com/appengine/docs/flexible/nodejs/scheduling-jobs-with-cron-yaml)有一些错误。

1.  请求标头应该是`x-appengine-cron`（全部小写！）并且预期值是`"true"`字符串。
2.  源 IP 地址`x-forwarded-for`必须以`10.`（如内部网络 IP `10.1.1.1`）或`0.`（如本地 IP `0.1.0.2`）开头。

# javascript - 根据排名比较字符串列表 - JavaScript/Jquery？

> ID：14193817
> 
> 赞同：1
> 
> 时间：2013-01-07T10:15:37.707
> 
> 标签：javascript, jquery

我的页面中有三个下拉列表-`Rating1`和.`Rating2``OverallRating`

下拉列表值为`High`,`Low`和`Medium`。根据选择的评级`Rating1`，`Rating2`我必须`OverallRating`自动设置评级。我必须设置两个评级中的*最低值*`Rating1`-和`Rating2`.

例如 -

如果`Rating1 == Medium`和`Rating 2 == High`; 然后`OverallRating = Medium`

我怎样才能在 javaScript/jQuery 中做到这一点？如何为字符串分配某种权重/等级并进行比较？

注意：为简单起见，我只取了三个值 High、Low、Medium。实际上，我在下拉列表中有 7-8 个选项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T10:20:42.513

您可以使用按相对值排序的字符串数组。假设`dd1`和是三个下拉列表`dd2`：`dd3`

```
var ratings = ["Low", "Medium", "High"];
var index = Math.min(ratings.indexOf($(dd1).val()), ratings.indexOf($(dd2).val()));
$(dd3).val(ratings[index]); 
```

# php - 读取一个 Zip 文件并在 PHP 中获取它的大小

> ID：14193819
> 
> 赞同：2
> 
> 时间：2013-01-07T10:15:40.320
> 
> 标签：php, zip

我正在尝试读取并获取 PHP 中 zip 文件的大小。

以下是我的代码：

```
 function create_zip($files, $file_name, $overwrite = false) {    
    foreach ($files as $imglink) {
        $img = file_get_contents($imglink);
        $destination_path = $_SERVER['DOCUMENT_ROOT'] . 'demoproject/downloads/' . time() . '.jpg';
        file_put_contents($destination_path, $img);
        $imgFiles[] = $destination_path;
    }

    if (file_exists($file_name) && !$overwrite) {
        return false;
    }
    $valid_files = array();
    if (is_array($imgFiles)) {
        foreach ($imgFiles as $file) {
            $valid_files[] = $file;
        }
    }

    if (count($valid_files)) {
        $zip = new ZipArchive();
        if ($zip->open($file_name, $overwrite ? ZIPARCHIVE::OVERWRITE : ZIPARCHIVE::CREATE) !== true) {
            echo "Sorry ZIP creation failed at this time";
        }
        foreach ($valid_files as $file) {
            $zip->addFile($file, pathinfo($file, PATHINFO_BASENAME));
        }

        $count = $zip->numFiles;
        $resultArr = array();
        $resultArr['count'] = $count;
        $resultArr['destination'] = $file_name;

        $filename = $file_name;
        $filepath = $_SERVER['DOCUMENT_ROOT'] . 'demoproject/';

        $fileSize = filesize($filepath . $filename) / 1024;

        echo 'size of the file is : ' . $fileSize . ' kb';
        exit;

//        $size = 0;
//        $resource = zip_open($filepath . $filename);
//        while ($dir_resource = zip_read($resource)) {
//            $size += zip_entry_filesize($dir_resource);
//        }

        header("Pragma: no-cache");
        header("Expires: 0");
        header("Cache-Control: must-revalidate, post-check=0, pre-check=0");
        header("Cache-Control: public");
        header("Content-Description: File Transfer");
        header("Content-type: application/octet-stream");
        header("Content-Disposition: attachment; filename=\"" . $filename . "\"");
        header("Content-Transfer-Encoding: binary");
        header("Content-Length: " . zip_entry_filesize($filepath . $filename));

        if (@readfile($filepath . $filename) === false) {
            header('http://localhost/demoproject/fbindex.php');
            return 500;
        } else {
            header('Location:http://localhost/demoproject/fbindex.php');
            return 200;
        }
    } else {
        return false;
    }
} 
```

`$files`：包含图像数组和

`$file_name`：包含文件名：即：`$file_name = time() . ".zip";`

在上面的代码`$filename`中包含了实际的 zip 文件并`$filepath`包含了 zip 文件的位置。

问题是它正在读取文件，但始终显示其大小 0 而不是实际文件大小。

这是我正在做的：

`echo $size;`

`O/P : 0`

我哪里错了？需要帮忙。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T10:32:31.753

尝试这个 -

```
$fileSize =  filesize($filepath . $filename)/1024;
echo 'size of the file is : '.$fileSize.' kb'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T11:21:51.960

您不应该在添加文件后立即[关闭ZIP 文件吗？](http://php.net/manual/en/ziparchive.close.php)

```
$zip->close(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-16T06:22:43.023

`clearstatcache()`在打电话之前尝试一下`filesize()`。

在这一切之前关闭您的 zip 文件也是一个好主意。

我知道我在这方面有点晚了，但谁知道呢？

# validation - XText 验证：在其他文件中标记错误

> ID：14193820
> 
> 赞同：0
> 
> 时间：2013-01-07T10:15:41.913
> 
> 标签：validation, xtext

我有一个 xtext 验证程序，它遍历文档的元素，并且可能会在其他文件中的元素上发现错误作为被检查的元素。但是，当提交错误时，它不会在其他文件中标记，而是在当前文件中其文件中错误元素的位置处标记。

如何将错误分配给其他文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T11:30:37.333

我猜您的第一个文档中的元素与其他文档中的元素之间存在某种关系。后者是进口的吗？您的元素是否交叉引用其他文档中的元素？

在任何一种情况下，您通常都应该能够通过引用或代理访问其他文档中的错误元素。一旦你有了这个 EObject，你就可以得到一个指向它的资源的链接，你应该可以在上面添加错误和警告。

它回答了你的问题吗？

亚历克西斯

# amazon-ec2 - 在 Amazon EC2 上运行 kvm：可能吗？

> ID：14193821
> 
> 赞同：4
> 
> 时间：2013-01-07T10:15:53.590
> 
> 标签：amazon-ec2, kvm, amazon-ami

对于各种常规需求，我是一个非常满意的 EC2 用户。

但是，今天，我有更特别的事情要做：我需要在各种机器上运行 kvm 的测试/基准测试。Amazon Ec2 各种类型的 AMI 将满足我的需求：我将能够非常轻松地尝试各种级别的性能。

但是，EC2 实例已经通过 Xen 虚拟化。

所以，我的问题是：我可以尝试在 EC2 AMI 之上安装 kvm 吗？会正常运行吗？需要什么特别的调整吗？

提前致谢

问候

迪迪埃

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T10:21:55.987

不，亚马逊已经是一个虚拟化环境。即使你这样做了，基准也将毫无用处。如果您需要对虚拟化解决方案进行基准测试，您应该在尽可能接近您计划虚拟化的硬件的硬件上进行。

# c# - 读取包含换行符的 CSV

> ID：14193822
> 
> 赞同：1
> 
> 时间：2013-01-07T10:15:56.847
> 
> 标签：c#

我想将 CSV 读取到数组，但 csv 在单元格内与换行符一致。

CSV ( csv 数据 )

```
标题、描述、标签、类别、私人、图像
MyGreatTitle1,"此行后为空行
空白行后的文本",techno,Tech,FALSE,C:\blogpostimg\img1.jpg
MyGreatTitle2,"此行后为空行
空白行后的文本",techno,Tech,FALSE,C:\blogpostimg\img2.jpg
MyGreatTitle3,"此行后为空行
空白行后的文本",techno,Tech,FALSE,C:\blogpostimg\img3.jpg
MyGreatTitle4,"此行后为空行
空白行后的文本",techno,Tech,FALSE,C:\blogpostimg\img4.jpg
MyGreatTitle5,"此行后为空行
空白行后的文本",techno,Tech,FALSE,C:\blogpostimg\img5.jpg
MyGreatTitle6,"此行后为空行
空白行后的文本",techno,Tech,FALSE,C:\blogpostimg\img6.jpg

```

我使用这段代码：

```
string dir = AppDomain.CurrentDomain.BaseDirectory + @"blogpost";
string[] allLines = File.ReadAllLines(dir + "csvdatabase.csv"); 
```

如何逐行读取csv但不在单元格内？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T14:52:50.013

正如 cirrus 所说，您可能应该使用专用的 CSV 库，但如果您想自己做（或了解如何做），这里有一个快速编写的 CSV 解析器，可以给您一个想法。它不处理完整的 CSV 标准，只处理您的特定要求！

```
public class CsvParser
{
    private readonly List<List<string>> entries = new List<List<string>>();
    private string currentEntry = "";
    private bool insideQuotation;

    /// <summary>
    ///   Returns all scanned entries.
    ///   Outer IEnumerable = rows,
    ///   inner IEnumerable = columns of the corresponding row.
    /// </summary>
    public IEnumerable<IEnumerable<string>> Entries
    {
        get { return entries; }
    }

    public void ScanNextLine(string line)
    {
        // At the beginning of the line
        if (!insideQuotation)
        {
            entries.Add(new List<string>());
        }

        // The characters of the line
        foreach (char c in line)
        {
            if (insideQuotation)
            {
                if (c == '"')
                {
                    insideQuotation = false;
                }
                else
                {
                    currentEntry += c;
                }
            }
            else if (c == ',')
            {
                entries[entries.Count - 1].Add(currentEntry);
                currentEntry = "";
            }
            else if (c == '"')
            {
                insideQuotation = true;
            }
            else
            {
                currentEntry += c;
            }
        }

        // At the end of the line
        if (!insideQuotation)
        {
            entries[entries.Count - 1].Add(currentEntry);
            currentEntry = "";
        }
        else
        {
            currentEntry += "\n";
        }
    }
}

internal class Program
{
    private static void Main(string[] args)
    {
        string dir = AppDomain.CurrentDomain.BaseDirectory + @"blogpost";
        string[] allLines = File.ReadAllLines(dir + "csvdatabase.csv");

        CsvParser parser = new CsvParser();
        foreach (string line in allLines )
        {
            parser.ScanNextLine(line);
        }
    }
} 
```

# javascript - 为什么 Marionette.js 需要 JSON2.js？

> ID：14193827
> 
> 赞同：1
> 
> 时间：2013-01-07T10:16:21.533
> 
> 标签：javascript, json, marionette

在 Marionette[下载](http://marionettejs.com/#download)页面的“先决条件”部分，声明：“Marionette 依赖于 Underscore、Backbone、jQuery 和各种其他库作为其基础。”

在先决条件列表中，我看到 JSON2.js，有人知道它的用途以及它是否真的是基本使用所必需的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T10:18:59.317

浏览器对 JSON 的支持很晚。虽然当前的浏览器都支持`JSON.stringify`和`JSON.parse`，但在旧浏览器中，必须对这种行为进行填充，而 JSON2 是一个很好的库。

除非您打算支持应该尽快死去的古老环境，否则您不需要 JSON2。

# mysql - 如何从三个或更多相关表中依次选择值

> ID：14193829
> 
> 赞同：-1
> 
> 时间：2013-01-07T10:16:22.083
> 
> 标签：mysql, sql

我的数据库中有三个相关的表。`Grammars`, `Users`, 和`Organizations`. 表通过字段与表`Grammars`相关，该字段是类型并且是来自 的外键。接下来我们有一个表，它又与表相关。类型的表字段是表的外键。如何选择例如语法，然后选择其相应的信息，然后选择用户所属的相应信息？`users``creator``int``users id``organizations``users``Users``organization``id``organizations id``id``creator``organization`

`describe grammars;`

```
+------------------+------------------+------+-----+---------+----------------+
| Field            | Type             | Null | Key | Default | Extra          |
+------------------+------------------+------+-----+---------+----------------+
| id               | int(11) unsigned | NO   | PRI | NULL    | auto_increment |
| name             | varchar(255)     | NO   |     | NULL    |                |
| short_name       | varchar(255)     | YES  |     | NULL    |                |
| description      | varchar(255)     | YES  |     | NULL    |                |
| domain           | int(10) unsigned | YES  | MUL | NULL    |                |
| url              | varchar(255)     | YES  |     | NULL    |                |
| seo_friendly_url | varchar(255)     | NO   |     | NULL    |                |
| encoding         | int(11) unsigned | YES  | MUL | NULL    |                |
| distribution     | int(11) unsigned | YES  | MUL | NULL    |                |
| project          | int(11) unsigned | YES  | MUL | NULL    |                |
| creator          | int(11) unsigned | YES  | MUL | NULL    |                |
| language         | int(11) unsigned | YES  | MUL | NULL    |                |
| link             | varchar(255)     | NO   |     | NULL    |                |
| creation_date    | datetime         | NO   |     | NULL    |                |
| last_update      | datetime         | NO   |     | NULL    |                |
| schema           | varchar(255)     | YES  |     | NULL    |                |
| type             | int(11) unsigned | YES  | MUL | NULL    |                |
| organization     | int(11) unsigned | YES  | MUL | NULL    |                |
+------------------+------------------+------+-----+---------+----------------+ 
```

`describe Users;`

```
+--------------+------------------+------+-----+---------+----------------+
| Field        | Type             | Null | Key | Default | Extra          |
+--------------+------------------+------+-----+---------+----------------+
| id           | int(11) unsigned | NO   | PRI | NULL    | auto_increment |
| first_name   | varchar(20)      | NO   |     | NULL    |                |
| last_name    | varchar(40)      | NO   |     | NULL    |                |
| username     | varchar(30)      | NO   | MUL | NULL    |                |
| password     | varbinary(32)    | NO   |     | NULL    |                |
| email        | varchar(80)      | NO   | MUL | NULL    |                |
| organization | int(11) unsigned | YES  | MUL | NULL    |                |
| group        | int(11) unsigned | NO   | MUL | 1       |                |
+--------------+------------------+------+-----+---------+----------------+ 
```

`describe Organizations;`

```
+--------------------+------------------+------+-----+---------+----------------+
| Field              | Type             | Null | Key | Default | Extra          |
+--------------------+------------------+------+-----+---------+----------------+
| id                 | int(11) unsigned | NO   | PRI | NULL    | auto_increment |
| name               | varchar(255)     | NO   |     | NULL    |                |
| department         | varchar(255)     | NO   |     | NULL    |                |
| communication_info | varchar(255)     | NO   |     | NULL    |                |
+--------------------+------------------+------+-----+---------+----------------+ 
```

当我尝试

```
SELECT Grammars.name AS name, Grammars.description AS description,
Domains.name AS domain,Types.name AS type, Languages.name AS language, 
Encodings.name AS encoding, 
Organizations.name AS organization_name, Organizations.department AS organization_department, Organizations.communication_info AS organization_comm_info,
Users.last_name AS creator_last_name, Users.first_name AS creator_first_name, Users.email AS creator_email,
Projects.name AS project_name, Projects.short_name AS project_short_name, Projects.url AS project_url,
Projects.funding AS project_funding, Projects.funder AS project_funder,
Projects.start_date AS project_start_date, Projects.end_date AS project_end_date
FROM Grammars 
LEFT JOIN Domains ON Grammars.domain=Domains.id 
LEFT JOIN Types ON Grammars.type=Types.id 
LEFT JOIN Languages ON Grammars.language=Languages.id 
LEFT JOIN Projects ON Grammars.project = Projects.id
LEFT JOIN Encodings ON Grammars.encoding = Encodings.id
LEFT JOIN Users ON Grammars.creator = Users.id
LEFT JOIN Organizations ON Users.organization = Organizations.id
WHERE Grammars.id = 3 ; 
```

有值时我得到空集。有什么建议么？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T11:19:29.450

此查询不返回任何数据的唯一原因是因为 Grammars 中没有行可以完成： Grammars.id = id

如果您使用 LEFT JOIN，它不会限制语法返回。“id”的值是多少？查看表格的描述，我发现每个表格中都有一个“id”字段...您应该限定此字段名并确保某些行满足条件。

# c++ - 什么时候实例化类模板？

> ID：14193830
> 
> 赞同：10
> 
> 时间：2013-01-07T10:16:25.280
> 
> 标签：c++

假设您有以下（格式错误的）程序：

```
struct A
{
    A(int, int)
    {
    }
};

template <typename T>
class B
{
    B()
    {
        if (sizeof (T) == 1)
        {
            throw A(0); // wrong, A() needs two arguments
        }
    }
};

int main()
{
    return 0;
} 
```

GCC 编译这个程序没有任何错误，clang++ 以错误拒绝它。

1.  是否有理由说这*不是*GCC 中的错误，因为模板没有实例化？
2.  铿锵有什么魔力来发现这个错误？
3.  C++ 标准对这些情况有什么看法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-07T10:20:32.423

模板在使用时被实例化。但是，它应该在定义时进行编译。您的代码`A(0)`使用 name `A`，它不依赖于模板参数`T`，因此应该在定义模板时解析它。这称为两阶段查找。clang 发现错误的方法就是在看到调用后立即尝试解决`A(0)`它。

我的 GCC 版本也会静默编译这段代码，即使是`-pedantic-errors`. C++03 和 C++11 都说不需要诊断，即使程序格式错误，所以 GCC 符合。这是 C++03 中的 14.6/7 和 C++11 中的 14.6/8：

> 如果无法为模板定义生成有效的特化，并且该模板未实例化，则模板定义格式错误，无需诊断。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-07T10:32:03.313

1.  是的。当不存在有效的特化但没有实例化模板时——就像这里——程序格式错误，但不需要诊断 (14.6/8)。所以clang和g++都是对的。

2.  与 g++ 相比，clang 对模板声明的检查更多。

3.  往上看。

# php - php函数名中的变量

> ID：14193832
> 
> 赞同：0
> 
> 时间：2013-01-07T10:16:26.073
> 
> 标签：php, image, variables

我想利用 PHP 的内置`imagejpeg`和`imagepng`函数。我有一个`$type`定义文件类型 jpeg 或 png 的变量。

我想要一个函数调用。像这样的东西：

```
image.$type($image, null, 100); 
```

但这不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T10:18:17.163

如果您在 var 中使用完整的函数名，它应该可以工作

```
$func = "image".$type;
$func($image,null,100); 
```

**小心**：`imagepng`使用 0-9 之间的质量（不是 0 和 100）

为了完整性：您应该使用更可靠的方法，使用带有[工厂方法模式](http://en.wikipedia.org/wiki/Factory_method_pattern)的 OOP 方法。但是我不知道你的情况和你的代码。所以这只是一个注释。

# c# - 从 c# 访问 c++ dll 库

> ID：14193835
> 
> 赞同：6
> 
> 时间：2013-01-07T10:16:42.183
> 
> 标签：c#, c++, pinvoke

> **可能重复：**
> [pinvokestackimbalance — 我该如何解决或关闭它？](https://stackoverflow.com/questions/3506796/pinvokestackimbalance-how-can-i-fix-this-or-turn-it-off)

我需要从 c# 代码访问一个 c++ dll 库（我没有源代码）。

例如以下函数：

```
UINT32 myfunc1()
UINT32 myfunc2(IN char * var1)
UINT32 myfunc3(IN char * var1, OUT UINT32 * var2) 
```

对于 myfunc1 我使用以下代码时没有问题：

```
[DllImport("mydll.dll")]
public static extern int myfunc1(); 
```

另一方面，我无法使用 myfunc2 和 myfunc3。对于 myfunc2 我尝试了以下方法：（以及许多其他人拼命地）

```
[DllImport("mydll.dll")]
public static extern int myfunc2(string var1);

[DllImport("mydll.dll")]
public static extern int myfunc2([MarshalAs(UnmanagedType.LPStr)] string var1);

[DllImport("mydll.dll")]
public static extern int myfunc2(char[] var1); 
```

但是他们都给出了以下错误： `"Managed Debugging Assistant 'PInvokeStackImbalance' has detected a problem in 'C:\Users\....\myproject\bin\Debug\myproj.vshost.exe'.`

附加信息：对 PInvoke 函数的调用`'myproject!myproject.mydll::myfunc2'`使堆栈不平衡。这可能是因为托管 PInvoke 签名与非托管目标签名不匹配。检查 PInvoke 签名的调用约定和参数是否与目标非托管签名匹配。”

请指导我应该做什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T10:52:23.493

您的 C++ 函数使用`cdecl`调用约定，但默认调用约定`DllImport`是`stdcall`. 这种调用约定不匹配是堆栈不平衡 MDA 错误的最常见原因。

您可以通过使调用约定匹配来解决问题。最简单的方法是更改​​ C# 代码以指定`cdecl`如下：

```
[DllImport("mydll.dll", CallingConvention=CallingConvention.Cdecl)]
public static extern int myfunc2(string var1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T10:31:00.457

可能只是字符集不匹配试试这个

```
[DllImport("mydll.dll", CharSet = CharSet.Ansi)]
public static extern int SendText([MarshalAs(UnmanagedType.LPStr)] string var1); 
```

来自：

[DLL 从 C# 导入 char * 指针](https://stackoverflow.com/questions/10630419/dll-import-char-pointer-from-c-sharp)

# perl - 模块代码中的包名

> ID：14193837
> 
> 赞同：2
> 
> 时间：2013-01-07T10:16:56.713
> 
> 标签：perl, variables, package, scope, perl-module

# 简洁版本

是否可以从在代码块中声明为`our`使用非限定名称但在外部使用限定名称的模块访问变量？`BEGIN`特别是，这可以在*不*明确命名模块文件中的包的情况下完成吗？

# 例子

让`demomod.pm`_

```
use strict;
use warnings;    
package demomod;
our $foo;
BEGIN { $foo = 42; }
1; 
```

并且`demoscript.pl`成为

```
#!/usr/bin/perl -Tw
use strict;
use warnings;
BEGIN { @INC = ('.', @INC); }
use demomod;
print $demomod::foo."\n"; 
```

在这种情况下，所有名称都同意，并且一切正常。有没有办法`package demomod;`从`demomod.pm`代码中省略该行并仍然让它工作？

# 动机

我问的原因是因为我在最近升级[Foswiki](http://www.foswiki.org/)时遇到了这些问题。该软件有一个~~没有~~~~行的模块~~*（编辑：似乎该**行仅在我的本地副本中丢失，原因未知）*。它[声明](http://trac.foswiki.org/browser/tags/FoswikiRelease01x01x06/core/lib/Foswiki.pm#L67)并[初始化](http://trac.foswiki.org/browser/tags/FoswikiRelease01x01x06/core/lib/Foswiki.pm#L611)一个变量，就像我的例子一样。还有一个 CGI 脚本，称为which sets and then do后跟. 由于变量未初始化，最后一行对我来说总是失败：[`Foswiki.pm`](http://trac.foswiki.org/browser/tags/FoswikiRelease01x01x06/core/lib/Foswiki.pm) ~~`package`~~ *`package`*`$engine`[`view`](http://trac.foswiki.org/browser/tags/FoswikiRelease01x01x06/core/bin/view)`@INC``use Foswiki ();``$Foswiki::engine->run()`

```
Can't call method "run" on an undefined value at …/view 
```

在`BEGIN`模块的块中，`$engine`设置正确但`$Foswiki::engine`显然不是。所以看起来这里有两个变量，一个是合格的，一个是不合格的。

所有这些代码显然都适用于其他人，以前的版本也适用于我，也~~没有`package`一行~~. 因此，当我试图了解它是如何破坏的时，我也试图了解它以前是如何工作的，没有那条线。是否有某种机制可以使这项工作发挥作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T10:33:36.413

如果您的代码中没有`package`语句，那么任何包变量都将被声明到`main`包中。所以不，你不能做你描述的事情。

如果您查看`Foswiki`您链接的代码的第 2 行，您会看到它*确实*有一个 package 语句。

# java - 使用 Hibernate 归档数据的最佳方法

> ID：14193841
> 
> 赞同：0
> 
> 时间：2013-01-07T10:17:06.883
> 
> 标签：java, sql, spring, hibernate, archive

我有两个表 chart 和 chartHistory 具有相似的表结构

```
chart_id   NUMERIC(9,0)
chart_ref_id  NUMERIC(9,0) NOT NULL
chart_property VARCHAR2(20) NOT NULL
chart_value  VARCHAR2(100) 
```

当我们获得图表参考 id 的新属性/值对时，图表中的条目需要存储到 chartHistory 表中。

我打算通过以下方式使用 Hibernate 来实现它

使用 chartReferenceId 从 CHART 表中获取值列表

```
List<Chart>  chartList =  chartDao.findChartByVisitRef(chartReferenceId); 
```

*（命名查询：findChartByRef = from Chart chart where chart.chartReferenceId=:chartReferenceId）*

使用检索到的列表并使用来自 chartList 的值构建一个 chartHistoryList 并调用 Hibernate 方法 saveAll

```
chartHistoryDao.saveAll(chartHistoryList); 
```

保存后，从 CHART 表中删除现有条目。

```
chartDao.deleteAll(chartList); 
```

为收到的新条目构建一个 newChartList，并执行休眠 saveAll

```
chartDao.saveAll(newChartList); 
```

如您所见，这执行了四个查询，即。用于检索旧记录，将它们保存到存档表中，删除旧条目并插入新值。

我想知道是否有更好的方法来实现这一点？我猜有些东西插入 .. (select from...) 会更有效？请指教。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T10:25:08.017

试试 Hibernate 的 envers/audit 模块，它会自动为您处理所有这些。

envers/audit 现在的主要问题是查找文档。[Envers](http://www.jboss.org/envers)（原始模块）应该从 3.5 开始与 Hibernate 代码合并，但[核心文档](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html/)没有提到任何关于版本控制或审计的内容，尽管 InfoQ 坚持“ [Hibernate 4.1 Released With Improvement Auditing Support](http://www.infoq.com/news/2012/02/hibernate-4-1-released) ”

[因此，请尝试从过时的envers](http://www.jboss.org/envers)页面链接的过时文档，并希望获得最好的结果。

免责声明：我多年来没有使用过 Hibernate 或 envers。

# java - Java 与 SQL：如何使用 ResultSet

> ID：14193842
> 
> 赞同：-2
> 
> 时间：2013-01-07T10:17:06.540
> 
> 标签：java, sql

我有例如以下代码行

```
ResultSet rs = stmt.executeQuery("SELECT * FROM item WHERE itemID='"+ X +"'"); 
```

如果项目`table scheme`是：`ItemID,itemName,Count,location`

表中的行如何“坐在”结果集中？有没有办法获取整行并将其推送到 ArrayList 的第一个单元格（即我必须返回的值并且我无法更改它，对于具有多行结果的其他查询，每行将位于不同的单元格中大批）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T10:20:15.560

您可以使用迭代您的结果集[`ResultSet.next()`](http://docs.oracle.com/javase/6/docs/api/java/sql/ResultSet.html#next%28%29)并获取每次迭代的行信息并将其添加到您的数组列表中。

```
List<YourObj> ref = new ArrayList<>();
ResultSet rs = stmt.executeQuery("SELECT * FROM item WHERE itemID='"+ X +"'");
while(rs.next())
      ref.add(new YourObj(rs.getName(), rs.getWhatever()));
} 
```

这是[Oracle Trails的参考资料](http://docs.oracle.com/javase/tutorial/jdbc/basics/retrieving.html)

# javascript - Jquery hover - > slideDown on div with textfield：自动完成被视为鼠标悬停

> ID：14193843
> 
> 赞同：0
> 
> 时间：2013-01-07T10:17:12.560
> 
> 标签：javascript, jquery, html, css

我有一个 div 容器，它使另一个 div 容器出现在 mouseover 上/在 mouseout 上消失：

```
$('#my-escada').hover( 
    function() {  
        $(".login-popdown").stop(true,true).slideDown(500) ; 
    },
    function() { 
        $(".login-popdown").stop(true,true).slideUp(300) ;                     
    }
); 
```

在出现的 div 容器 (class="login-popdown") 中是一个文本字段。问题如下：

当我双击该文本字段时，会显示自动完成建议，这很好，但是当我将鼠标悬停在其中一个选项上时，Jquery 将其视为 mouseout 并且向下滑动的 div 消失。

这个问题有解决方案吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T10:20:56.043

尝试这个：

```
$('#my-escada').mousenter( 
    function() {  
        $(".login-popdown").stop(true,true).slideDown(500) ; 
    }
 );
 $('#my-escada').mouseleave(
    function() { 
        $(".login-popdown").stop(true,true).slideUp(300) ;
    }
); 
```

# spotify - Spotify：链接页面上的曲目

> ID：14193844
> 
> 赞同：0
> 
> 时间：2013-01-07T10:17:15.473
> 
> 标签：spotify

如何链接Spotify页面上特定选项卡中存在的不同曲目，以便在单击Spotify下一个/上一个按钮时播放下一个/上一个曲目。
如果单击下一个按钮，它不会播放任何东西，当它应该开始播放页面上存在的下一首曲目时，
我的脚本看起来像这样，

```
 $.each(allTracks,function(index,track){         
       models.Track.fromURI(track, function(track) {
       models.Album.fromURI(track.album.uri, function(album) {                      
          var single_track = models.Track.fromURI(track.uri);
          var single_track_playlist = new models.Playlist();
          single_track_playlist.add(single_track);                
          var pl = new views.Player();
          pl.context = single_track_playlist;
          if(index==0) {       
            $("#firstTrack").append(pl.node);
          }
         .............
         ............. 
```

谁能指导我如何去做这件事？先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T12:24:56.013

在您的情况下，每个`Player`视图的上下文都是具有该单个曲目的播放列表。如果您想将您的曲目渲染为播放器，并让它们同步，以便下一首曲目在前一首曲目结束后播放，您需要创建一个自定义解决方案。

您可以查看这个[Grid Play Spotify App](https://github.com/JMPerez/spotify-grid-play)，它显示了如何实现它的示例。它基本上创建自定义`Player`视图，以响应`Player`模型和其他`Player`视图触发的某些事件。

# css - 导航栏 Windows 8 Metro 应用程序中的 CSS 问题

> ID：14193845
> 
> 赞同：2
> 
> 时间：2013-01-07T10:17:19.837
> 
> 标签：css, html, windows-8

当鼠标在从左到右移动的图像上时，我们使用 css 将图像放置在 HTML 页面的导航栏中。如何停止那个移动的动画？它应该是恒定的。

这是css代码：

```
.homebtn1 .win-commandimage {
background-image: url('/images/homeActive.png');      
width:140px;
height:75px;

.mydealsbtn1.win-commandimage {
background-image: url('/images/home2Active.png');     
width:140px;
height:75px; 
```

这是html代码

```
<button class="homebtn1" data-win-control="WinJS.UI.AppBarCommand" data-win-options="     {id:'home',section:'selection',tooltip:'Home',extraClass:'appbarExtraClass'}">
</button>
<button class="mydealsbtn1" data-win-control="WinJS.UI.AppBarCommand" data-win-options="{id:'mydeals',section:'selection',tooltip:'Mydeals',extraClass:'appbarExtraClass'}">
 </button> 
```

这是鼠标在图像上改变位置时的第一个屏幕截图，您可以检查下一张图像的差异。当鼠标不在图像上时，它会再次从确切位置更改位置。 ![在此处输入图像描述](../Images/629ee5a79080bf35774fa0428fd200b3.png) ![在此处输入图像描述](../Images/2cf868622a164dcfdee878c8edac6d67.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T11:35:12.043

由于任何选择器中的转换属性，它可能正在移动。尝试添加`transition:none;`到上面的类。

# kendo-ui - 刷新绑定数据后 kendo ui 网格失败

> ID：14193846
> 
> 赞同：1
> 
> 时间：2013-01-07T10:17:21.067
> 
> 标签：kendo-ui, kendo-grid, knockout-2.0

我正在使用淘汰赛剑道，这是我的代码：标记：

```
<body>
<div id="mursi"
     data-bind="kendoGrid:{ dataSource:{data:selectedAsset().RealEstateAssetBlockParcel ,pageSize:3} ,data:selectedAsset().RealEstateAssetBlockParcel, pageable: true,pageSize:5,sortable:true,scrollable:false,selectable:true,columns:[{title:'parcel'},{title:'plot'},{title:'subplot'},{ width:60},{ width:60}] ,rowTemplate: 'rowParcelTmpl', altRowTemplate: 'altParcelTmpl', useKOTemplates: true }"></div>

<button data-bind="replaceSelectedAsset">click me</button>

<script id="rowParcelTmpl" type="text/html">
    <tr>
        <td>
            <div data-bind="text:Block"></div>
        </td>
        <td>
            <div data-bind="text:Plot"></div>
        </td>
        <td>
            <div data-bind="text:SubPlot"></div>
        </td>
        <td>
            <button class="k-button"><span class="update-button"></span></button>
        </td>
        <td>
            <button class="k-button"><span class="remove-button"></span></button>
        </td>
    </tr>
</script>
<script id="altParcelTmpl" type="text/html">
    <tr class="k-alt">
        <td>
            <div data-bind="text:Block"></div>
        </td>
        <td>
            <div data-bind="text:Plot"></div>
        </td>
        <td>
            <div data-bind="text:SubPlot"></div>
        </td>
        <td>
            <button class="k-button"><span class="update-button"></span></button>
        </td>
        ><span class="remove-button"></span></button></td>
    </tr>
</script>
</body> 
```

这是我的 JS：

```
var selectedAsset = ko.observable();
//viewmodels
var assetViewModel = function () {
    this.RealEstateAssetBlockParcel = ko.observableArray([]);
};
var asset = new assetViewModel();
asset.RealEstateAssetBlockParcel.push({Block: 1, Plot: 2, SubPlot: 3, Id: 0});
selectedAsset(asset);
var replaceSelectedAsset = function () {
    selectedAsset(asset);
};
ko.applyBindings(); 
```

一切都很好，直到您按下“单击我”按钮，该按钮假设选择另一个资产并显示其包裹网格，但我收到以下错误：“未捕获的类型错误：无法调用未定义的“查找”方法”（起源于剑道。网络.all)

[http://jsbin.com/oboxig/3/edit](http://jsbin.com/oboxig/3/edit) 帮助将不胜感激 谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T12:03:05.750

我在您的 JSBin 中看到的`data-bind`是`button`.

你能试试：

```
function replaceSelectedAsset () {
    selectedAsset(asset);
}; 
```

并将其定义`button`为：

```
<button onclick="replaceSelectedAsset()">click me</button> 
```

# java - jsp与java应用程序之间的通信

> ID：14193847
> 
> 赞同：0
> 
> 时间：2013-01-07T10:17:32.243
> 
> 标签：java, jsp, network-programming, social-networking

我的项目要求是开发一个与mysql数据库交互的网站和一个在服务器上持续运行的java应用程序。用户在某个远程计算机上，他通过在服务器上执行 jsp 代码向 java 应用程序发送请求，jsp 代码等待应用程序发回信息。一旦 jsp 接收到信息。它向数据库发送请求。由于数据库的限制和我的项目要求，这是一种特殊类型的数据库。请告诉我请求是如何发送的，即 java 的哪一部分将帮助我做到这一点。

一些具有相同信息但不准确的链接[两个独立的 Java 桌面应用程序之间的通信](https://stackoverflow.com/questions/1680898/communication-between-two-separate-java-desktop-applications)。

编辑：我的问题是....我应该在 jsp 页面中使用什么，这样我才能获得信息。来自以特殊形式的数据结构存储数据的应用程序。现在我不想和数据库说话。我只想与正在运行的应用程序进行交互。

例如，服务器上有一个程序，它返回两个数字的总和，等待有人给它输入。现在我的 jsp 向应用程序发送两个数字，应用程序将这两个数字相加并将总和返回给 jsp 页面。现在 jsp 页面代码可以做任何我现在不关心的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T11:02:10.100

通过网站访问数据库是任何基于 Web 的开发的重要组成部分之一。JDBC，一种允许 Java 与数据库对话的机制。

Java 数据库连接 (JDBC) 是用于访问数据库的标准应用程序编程接口 (API)，与应用程序驱动程序和数据库产品无关。换句话说，JDBC 为数据库提供了一个统一的接口，但是，如果您更改数据库管理系统和您的应用程序，您只需要更改它们的驱动程序。JDBC 提供与各种 SQL 数据库和其他表格数据源（如电子表格或平面文件）的跨 DBMS 连接。

这是示例示例：

```
import java.sql.*;
class DBQuery1{
    public static void main(String args[]) throws SQLException
  {
            try{
               Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
               }catch(ClassNotFoundException e){};
        Connection cnn;
        Statement mystmt;
        ResultSet myrs;
            String op = "jdbc:odbc:JavaTest";
        cnn = DriverManager.getConnection(op,
                 "Admin", "");
        mystmt = cnn.createStatement();
            String sql;
            sql = "SELECT * FROM SupplierMaster " +
              "WHERE SupplierCode IN ( " +
                    "SELECT SCode " +
                    "FROM Relation " +
                    "WHERE PCode IN ( " +
                          "SELECT ProductCode " +
                          "FROM ProductMaster " +
                          "WHERE ProdCatg IN ( " +
                                "SELECT CatgID " +
                                "FROM CategoryMaster " +
                                            "WHERE CategoryName = 'Eatables')))";
        myrs = mystmt.executeQuery(sql);
            System.out.println("   "+"Sup Code" + "       " +"Sup Name" + "    " + "Sup Address    ");
            System.out.println("--------------------------------------------------------------------");
        String name, add;
            int code;
            while (myrs.next())
        {
             code = myrs.getInt("SupplierCode");
             name = myrs.getString("SupplierName");
             add = myrs.getString("SupplierAddress");
             System.out.println("       " + code +"       " + name+"        " + add);
        }
  } 
```

}

您可以在此链接上找到更多信息：

[http://webserver.ignou.ac.in/virtualcampus/adit/course/cst302/block2/cst302-bl2-u3.htm](http://webserver.ignou.ac.in/virtualcampus/adit/course/cst302/block2/cst302-bl2-u3.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T10:24:33.143

Java 应用程序最常通过使用 JDBC 驱动程序与关系数据库进行通信。驱动程序告诉应用程序如何与特定数据库进行通信。每个数据库供应商通常都为其特定数据库提供驱动程序。在您的情况下，您将需要[MySql Connecter/J 驱动程序](http://dev.mysql.com/doc/refman/5.1/en/connector-j-overview.html)，您将把它作为 jar 文件包含在您的项目中。

数据库供应商提供的 JDBC 驱动程序实现了一个接口，因此连接到不同的数据库几乎相同，除了参数之间的一些语法差异。可以找到大量关于如何通过 Java 应用程序连接到数据库的信息。

# php - 在Mysql中选择最近添加到数据库的记录

> ID：14193848
> 
> 赞同：1
> 
> 时间：2013-01-07T10:17:37.393
> 
> 标签：php, mysql

我在数据库中有一个表，它有一个名为 id 的主键。现在我想在表中显示最近添加的 2 条记录。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T10:19:27.540

假设 id 是某种自动递增的整数值，那么以下将起作用

```
SELECT * FROM table ORDER BY id DESC LIMIT 2; 
```

如果您只想要最后插入的记录 id（再次假设插入生成自动增量 id）还有[LAST_INSERT_ID](http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_last-insert-id)。但要注意这是全局的，将返回最后插入的 id 数据库范围，因此它不常用于 SELECTS 中，而是作为例程中的 OUT 参数返回刚刚插入的行的 id。

```
SELECT LAST_INSERT_ID(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T10:20:37.677

这肯定会奏效，

```
SELECT * FROM table_name ORDER BY id DESC,LIMIT 2. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T10:22:44.003

尝试，

```
SELECT * FROM `table`
ORDER BY id 
DESC 
LIMIT 0, 2; 
```

# android - 使用 Fragments 自定义 ListView

> ID：14193851
> 
> 赞同：-1
> 
> 时间：2013-01-07T10:17:48.877
> 
> 标签：android

我是 android 技术的新手。我想`ListView`使用`Fragments`. 我已经在谷歌上搜索了它，但我没有得到它。所以请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T10:43:19.083

我在我的应用程序中有一个屏幕，包含左右两个列表片段以及自定义列表视图。希望这是你需要的，使用这些，让我知道它是否对你有帮助？

这是包含片段的类

```
 public class MoreChannelsActivity extends FragmentActivity 
    implements ChannelsMenuFragment.OnHeadlineSelectedListener {

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.news_articles);

    // Check whether the activity is using the layout version with
    // the fragment_container FrameLayout. If so, we must add the first fragment
    if (findViewById(R.id.fragment_container) != null) {

        // However, if we're being restored from a previous state,
        // then we don't need to do anything and should return or else
        // we could end up with overlapping fragments.
        if (savedInstanceState != null) {
            return;
        }

        // Create an instance of ExampleFragment
        ChannelsMenuFragment firstFragment = new ChannelsMenuFragment();

        // In case this activity was started with special instructions from an Intent,
        // pass the Intent's extras to the fragment as arguments
        firstFragment.setArguments(getIntent().getExtras());

        // Add the fragment to the 'fragment_container' FrameLayout
        getSupportFragmentManager().beginTransaction()
                .add(R.id.fragment_container, firstFragment).commit();
    }
}

public void onArticleSelected(int position) {
    // The user selected the headline of an article from the ChannelsMenuFragment

    // Capture the article fragment from the activity layout

  /// ChannelsSubMenuFragment articleFrag = (ChannelsSubMenuFragment) getSupportFragmentManager().findFragmentById(R.id.channels_fragment);

TestSubMenuFragment articleFrag = (TestSubMenuFragment) getSupportFragmentManager().findFragmentById(R.id.channels_fragment);

    if (articleFrag != null) {
        // If article frag is available, we're in two-pane layout...

        // Call a method in the ChannelsSubMenuFragment to update its content
      // articleFrag.updateArticleView(position);
           articleFrag.updateListView(position);

    } else {
        // If the frag is not available, we're in the one-pane layout and must swap frags...

        // Create fragment and give it an argument for the selected article
        TestSubMenuFragment newFragment = new TestSubMenuFragment();
        Bundle args = new Bundle();
        args.putInt(TestSubMenuFragment.ARG_POSITION, position);
        newFragment.setArguments(args);
        FragmentTransaction transaction = getSupportFragmentManager().beginTransaction();

        // Replace whatever is in the fragment_container view with this fragment,
        // and add the transaction to the back stack so the user can navigate back
        transaction.replace(R.id.fragment_container, newFragment);
        transaction.addToBackStack(null);

        // Commit the transaction
        transaction.commit();
    }
   }
   } 
```

这是包含片段的xml...

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="horizontal" >

<fragment
    android:id="@+id/menus_fragment"
    android:name="com.example.android.fragments.ChannelsMenuFragment"
    android:layout_width="0dp"
    android:layout_height="match_parent"
    android:layout_weight="1" />
<View
    android:layout_width="3px"
    android:layout_height="fill_parent"
    android:layout_marginTop="0dp"
    android:background="#FF909090" />

<fragment
    android:id="@+id/channels_fragment"
    android:name="com.example.android.fragments.TestSubMenuFragment"
    android:layout_width="0dp"
    android:layout_height="match_parent"
    android:layout_weight="2" />

  </LinearLayout> 
```

这是列表活动类

```
 public class ChannelsMenuFragment extends ListFragment {
OnHeadlineSelectedListener mCallback;

// The container Activity must implement this interface so the frag can deliver messages
public interface OnHeadlineSelectedListener {
    /** Called by ChannelsMenuFragment when a list item is selected */
    public void onArticleSelected(int position);
}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // We need to use a different list item layout for devices older than Honeycomb
    int layout = Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB ?
            android.R.layout.simple_list_item_activated_1 : android.R.layout.simple_list_item_1;

    // Create an array adapter for the list view, using the AudioVideoChannelsList headlines array
    setListAdapter(new ArrayAdapter<String>(getActivity(), layout, AudioVideoChannelsList.Menus));
}

@Override
public void onStart() {
    super.onStart();

    // When in two-pane layout, set the listview to highlight the selected list item
    // (We do this during onStart because at the point the listview is available.)
    if (getFragmentManager().findFragmentById(R.id.channels_fragment) != null) {
        getListView().setChoiceMode(ListView.CHOICE_MODE_SINGLE);
    }
}

@Override
public void onAttach(Activity activity) {
    super.onAttach(activity);

    // This makes sure that the container activity has implemented
    // the callback interface. If not, it throws an exception.
    try {
        mCallback = (OnHeadlineSelectedListener) activity;
    } catch (ClassCastException e) {
        throw new ClassCastException(activity.toString()
                + " must implement OnHeadlineSelectedListener");
    }
}

@Override
public void onListItemClick(ListView l, View v, int position, long id) {
    // Notify the parent activity of selected item
    mCallback.onArticleSelected(position);

    // Set the item as checked to be highlighted when in two-pane layout
    getListView().setItemChecked(position, true);
    }
   } 
```

这是我们提供给列表适配器的名为 AudioVideoChannelsList 的数据类

```
 public class AudioVideoChannelsList {

static String[] Menus = {
    "Channel One",
    "Channel Two"
};

static String[] ChannelsList1 = {
   "Country",
   "Genre",
   "Language"
  };

    static String[] ChannelsList = {
    "Article One\n\nExcepteur pour-over occaecat squid biodiesel umami gastropub, nulla           laborum salvia dreamcatcher fanny pack. Ullamco culpa retro ea, trust fund excepteur eiusmod direct trade banksy nisi lo-fi cray messenger bag. Nesciunt esse carles selvage put a bird on it gluten-free, wes anderson ut trust fund twee occupy viral. Laboris small batch scenester pork belly, leggings ut farm-to-table aliquip yr nostrud iphone viral next level. Craft beer dreamcatcher pinterest truffaut ethnic, authentic brunch. Esse single-origin coffee banksy do next level tempor. Velit synth dreamcatcher, magna shoreditch in american apparel messenger bag narwhal PBR ennui farm-to-table.",
    "Article Two\n\nVinyl williamsburg non velit, master cleanse four loko banh mi. Enim kogi keytar trust fund pop-up portland gentrify. Non ea typewriter dolore deserunt Austin. Ad magna ethical kogi mixtape next level. Aliqua pork belly thundercats, ut pop-up tattooed dreamcatcher kogi accusamus photo booth irony portland. Semiotics brunch ut locavore irure, enim etsy laborum stumptown carles gentrify post-ironic cray. Butcher 3 wolf moon blog synth, vegan carles odd future."
};

static String[] ChannelsList2 = {
     "Country2",
     "Genre2",
     "Language2"
   };
  } 
```

这是第二个列表活动类

```
 public class TestSubMenuFragment extends ListFragment {

// The container Activity must implement this interface so the frag can deliver messages
public interface OnHeadlineSelectedListener {
    /** Called by ChannelsMenuFragment when a list item is selected */
    public void onArticleSelected(int position);
}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // We need to use a different list item layout for devices older than Honeycomb
    int layout = Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB ?
            android.R.layout.simple_list_item_activated_1 : android.R.layout.simple_list_item_2;

    // Create an array adapter for the list view, using the AudioVideoChannelsList headlines array
    setListAdapter(new ArrayAdapter<String>(getActivity(), layout, AudioVideoChannelsList.ChannelsList1));
 }

@Override
public void onStart() {
    super.onStart();

    // When in two-pane layout, set the listview to highlight the selected list item
    // (We do this during onStart because at the point the listview is available.)
    if (getFragmentManager().findFragmentById(R.id.channels_fragment) != null) {
        getListView().setChoiceMode(ListView.CHOICE_MODE_SINGLE);
    }
}
final static String ARG_POSITION = "position";
int mCurrentPosition = -1;
public void updateListView(int pos)
{
    if(pos==0)
    {
     int layout = Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB ?
             android.R.layout.simple_list_item_activated_1 : android.R.layout.simple_list_item_2;

     // Create an array adapter for the list view, using the AudioVideoChannelsList headlines array
     setListAdapter(new ArrayAdapter<String>(getActivity(), layout, AudioVideoChannelsList.ChannelsList1));
    }
    else
    {
        int layout = Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB ?
                android.R.layout.simple_list_item_activated_1 :      android.R.layout.simple_list_item_2;

        // Create an array adapter for the list view, using the AudioVideoChannelsList headlines array
        setListAdapter(new ArrayAdapter<String>(getActivity(), layout, AudioVideoChannelsList.ChannelsList2));

    }
}

@Override
public void onAttach(Activity activity) {
    super.onAttach(activity);

    // This makes sure that the container activity has implemented
    // the callback interface. If not, it throws an exception.
    try {

    } catch (ClassCastException e) {
        throw new ClassCastException(activity.toString()
                + " must implement OnHeadlineSelectedListener");
    }
}

@Override
public void onListItemClick(ListView l, View v, int position, long id) {
    // Notify the parent activity of selected item

    // Set the item as checked to be highlighted when in two-pane layout

  }
   } 
```

# jquery - jQuery克隆div问题

> ID：14193852
> 
> 赞同：1
> 
> 时间：2013-01-07T10:17:51.920
> 
> 标签：jquery, clone

我想在单击标题时一次克隆一个 div

```
$("h3").click(function() { $("div").clone().insertAfter("div:last")); }); 
```

现在它会克隆所有的 div 并将它们放在最后一个之后，但我想克隆 div1 然后 div2 等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T10:21:54.707

您可以使用 .each() 方法来获得正确的要求。

```
$("h3").click(function() { 
    $("div").each(function() {
        $this = jQuery(this);
        // do something with current div $this
        $this.clone().insertAfter("div:last"));

        // a bit better?
        $this.parent().prepend($this.clone());
    });
}); 
```

我希望这对你有更多帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T10:19:22.203

尝试`each`：

```
$("h3").click(function() { 
    $.each($("div"), function() {
        $(this).clone().insertAfter("div:last"); 
    });
}); 
```

# ios - 在 ios 中使用 UIDocumentIntractionController 将图像共享到 Whatsapp

> ID：14193853
> 
> 赞同：1
> 
> 时间：2013-01-07T10:17:52.973
> 
> 标签：ios, image, sharing, whatsapp

是否可以在 iPhone 应用程序开发中使用 UIDocumentIntractionController 或 API将 iOS 应用程序中的图像和文本共享到**WhatsApp ？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-06T07:20:16.500

Please look at this link from the FAQ:

[http://www.whatsapp.com/faq/en/iphone/23559013](http://www.whatsapp.com/faq/en/iphone/23559013)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-30T07:28:40.103

我发现如果您的应用程序创建了照片、视频或音频笔记，并且您希望您的用户使用 WhatsApp 共享这些媒体，您可以使用 Document Interaction API 将您的媒体发送给您的 WhatsApp 联系人和群组。

你可以参考这个链接： http: [//www.whatsapp.com/faq/en/iphone/23559013](http://www.whatsapp.com/faq/en/iphone/23559013)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-10-28T05:49:27.493

在 Swift 3 中使用此代码

```
 @IBAction func whatsappShareWithImages(_ sender: AnyObject)
    {

        let urlWhats = "whatsapp://app"
        if let urlString = urlWhats.addingPercentEncoding(withAllowedCharacters:CharacterSet.urlQueryAllowed) {
            if let whatsappURL = URL(string: urlString) {

                if UIApplication.shared.canOpenURL(whatsappURL as URL) {

                    if let image = UIImage(named: "whatsappIcon") {
                        if let imageData = UIImageJPEGRepresentation(image, 1.0) {
                            let tempFile = URL(fileURLWithPath: NSHomeDirectory()).appendingPathComponent("Documents/whatsAppTmp.wai")
                            do {
                                try imageData.write(to: tempFile, options: .atomic)
                                self.documentInteractionController = UIDocumentInteractionController(url: tempFile)
                                self.documentInteractionController.uti = "net.whatsapp.image"
                                self.documentInteractionController.presentOpenInMenu(from: CGRect.zero, in: self.view, animated: true)

                            } catch {
                                print(error)
                            }
                        }
                    }

                } else {
                    // Cannot open whatsapp
                }
            }
        }

    } 
```

在您的应用“plist”中添加此代码

```
 <key>LSApplicationQueriesSchemes</key>
    <array>
        <string>whatsapp</string>
    </array> 
```

也可以参考小程序参考：[https ://github.com/nithinbemitk/iOS-Whatsapp-Share](https://github.com/nithinbemitk/iOS-Whatsapp-Share)

# javascript - 如何确定哪个 DOM 对象被 jQuery 和模糊事件单击/聚焦？

> ID：14193858
> 
> 赞同：0
> 
> 时间：2013-01-07T10:18:03.920
> 
> 标签：javascript, jquery, jquery-events, blur

我有这个 HTML：

```
<div class="container">
    <a href="#mylink" tabindex="-1">select this</a>
    <a href="#mylink" tabindex="-1">select this</a>
    <a href="#mylink" tabindex="-1">select this</a>
</div>

<a href="#begin" tabindex="-1">click here to begin selecting</a> 
```

我有这段 JS/jQuery 代码片段：

```
$('a[href="#begin"]').blur(function(e) {
    console.log( e.target.href ); // this will output: #begin
}); 
```

所以我需要的`.blur`是确定在模糊之后哪个元素得到了焦点`<a href="#begin">`。

JS/jQuery 可以做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T10:20:13.273

您可以使用该[`.focus`](http://api.jquery.com/focus/)方法检查哪个元素获得焦点，类似于`.blur`

在你的模糊事件期间，你可以设置一个标志来“注意”下一个控制焦点。在您的焦点功能中，如果设置了此标志，那么您知道您的“存在”字段是最后一个失去焦点的字段。当任何其他字段模糊时，您还需要重置标志。

这是一个简单的概念示例...

```
var beginWasLast = false;

$('a[href="#begin"]').blur(function(e) {
    e.preventDefault();
    beginWasLast = true;
    console.log( e.target.href ); // this will output: #begin
});

$('a[href="#begin"]').click(function(e) {
    e.preventDefault();
});

$('a:not(a[href="#begin"])').blur(function(e) {
    e.preventDefault();
    beginWasLast = false;
});

$('a:not(a[href="#begin"])').click(function(e) {
    e.preventDefault();
    if(beginWasLast){
        console.log( e.target.href );
    }
}); 
```

[这是一个工作示例](http://jsfiddle.net/musefan/6zKDF/)

我添加了`e.preventDefault();`调用，以便单击链接时页面不会重新加载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T10:20:17.940

不可能知道哪个元素从`blur`事件本身获得了焦点。您需要添加一个点击事件来获得它，如下所示：

```
$('a[href="#begin"]')
    .blur(function(e) {
        console.log( e.target.href ); // previous link href
    });
    .click(function(e) {
        console.log( e.target.href ); // current link href
    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T11:06:14.323

另一种可能的方法是： [SEE DEMO](http://jsfiddle.net/8SpxW/)

```
$('a[href="#begin"]').blur(function(e) {
  setTimeout(function(){console.log( $(document.activeElement).attr('href') );},0); 
}); 
```

# jsp - 提交后检查 JSF 中的回发

> ID：14193862
> 
> 赞同：0
> 
> 时间：2013-01-07T10:18:22.333
> 
> 标签：jsp, jsf

我正在 JSF 中创建应用程序。我希望当我单击提交按钮时，它应该调用同一页面，但显示编辑按钮而不是提交按钮。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T11:12:46.690

让 action 方法在 bean 中设置一个布尔属性`@ViewScoped`来切换按钮并返回`null`或`void`返回相同的视图。让视图根据布尔值有条件地呈现提交和编辑按钮。

基本上，

```
private boolean editmode;

public void submit() {
    editmode = true;
}

public boolean isEditmode() {
    return editmode;
} 
```

和

```
<h:commandButton value="Submit" action="#{bean.submit}" rendered="#{not bean.editmode}" />
<h:commandButton value="Edit" action="#{bean.edit}" rendered="#{bean.editmode}" /> 
```

* * *

**与具体问题无关**，这是一个非常奇怪的要求。您问题中的“提交按钮”实际上不应该是“编辑按钮”，而您问题中的“编辑按钮”实际上不应该是“保存按钮”吗？那会更有意义。

# air - 如何使用 Air SDK 上的 qnx.net.NetworkManager 在 Blackberry 10 Dev Alpha Simulator 中检测网络

> ID：14193870
> 
> 赞同：2
> 
> 时间：2013-01-07T10:18:56.693
> 
> 标签：air, blackberry-simulator, blackberry-10

我正在尝试使用此代码检测模拟器的互联网连接

```
if (
    NetworkManager.networkManager.isConnected(NetworkType.WIFI) ||
    NetworkManager.networkManager.isConnected(NetworkType.CELLULAR)
) {
    //we have connection!!
    doSomething();
} else {
    //no connection =(
    showError();
} 
```

但是，这总是返回 false。似乎模拟器使用了另一种未被 NetworkType 常量标识的网络。我认为这是因为 VMWare 通过黑魔法使连接成为可能。

所以我不确定我是否应该坚持这个代码并希望它能够在使用 WiFi 或蜂窝网络的真实设备中工作，或者应该找到另一种方法来满足我的需要。

我也试过这样做（不传递参数）

```
NetworkManager.networkManager.isConnected() 
```

但无论我的电脑是否有互联网连接，它都会返回 true。我认为 VMWare 又在欺骗我。

那么，关于我应该如何在真实设备中获得更好结果的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-01T23:00:18.193

好吧，只是为了更新。我终于得到了一个 BBZ10，并有机会尝试这个代码。 即使模拟器无法真正模拟它们的功能，它似乎 也会按照预期`NetworkManager.networkManager.isConnected(NetworkType.WIFI)` 的 方式工作。`NetworkManager.networkManager.isConnected(NetworkType.CELLULAR)`

因此，如果您真的需要此功能，请继续尝试，一旦部署，它将真正起作用。

# java - Java JPopupMenu Mac OS X

> ID：14193882
> 
> 赞同：4
> 
> 时间：2013-01-07T10:19:37.947
> 
> 标签：java, macos, swing, jpopupmenu

我在 Mac 上的 JPopupmenu 有三个问题，所有问题都可以通过随附的 java 程序或例如 netbeans java 应用程序重现。

第一件事是当显示弹出菜单时，Java 应用程序不会阻塞停靠栏。因此，当我在我的 java 应用程序中右键单击以打开弹出菜单时，我仍然可以将鼠标移到停靠区域上，并且停靠出现。在非 Java 应用程序（Outlook、Textwrangler、Finder...）中，如果在这些应用程序中显示上下文菜单，则停靠栏不会出现。

有没有办法让 java 应用程序表现得像一个“本机”OS X 应用程序，所以在这种情况下不会显示停靠栏？

下一个问题更烦人。如果上下文菜单由 java 应用程序显示，并且现在用户切换（cmd-TAB 或通过 Dock）到另一个应用程序，比如说 Outlook，Java 应用程序的上下文菜单仍然在另一个应用程序窗口的顶部可见。

如果另一个应用程序具有焦点，有没有办法隐藏 java 应用程序的弹出菜单？

最后一个问题。假设一个应用程序在 netbeans 前面，现在您右键单击 netbeans 窗口，将显示来自 netbeans 的弹出菜单，但是如果您将鼠标移到菜单项上，则不会突出显示任何菜单项。您可以通过按下鼠标来选择菜单项，但是通过将鼠标移到菜单项上，它们不会突出显示。

为什么菜单项没有突出显示，有解决方法吗？

Mac OS X 10.6.8 Java：1.6.0_35

```
package popupmenu;

import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import javax.swing.JFrame;
import javax.swing.JMenuItem;
import javax.swing.JPopupMenu;
import javax.swing.SwingUtilities;

public class PopupMenuApp {
private JPopupMenu popup;

private class PopupListener extends MouseAdapter {
    @Override
    public void mousePressed(MouseEvent e) {
        maybeShowPopup(e);
    }

    @Override
    public void mouseReleased(MouseEvent e) {
        maybeShowPopup(e);
    }

    private void maybeShowPopup(MouseEvent e) {
        if (e.isPopupTrigger()) {
            popup.show(e.getComponent(), e.getX(), e.getY());
        }
    }
}

private void start() {
    SwingUtilities.invokeLater(new Runnable() {
        public void run() {
            JFrame frame = new JFrame();
            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

            popup = new JPopupMenu();
            popup.add(new JMenuItem("A popup menu item"));
            frame.addMouseListener(new PopupListener());

            frame.setSize(300, 200);
            frame.setLocationRelativeTo(null);
            frame.setVisible(true);
            frame.setAlwaysOnTop(true);
        }
    });
}

public static void main(String[] args) {
    PopupMenuApp app = new PopupMenuApp();
    app.start();
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-15T21:48:48.027

对于第二个问题，添加一个 WindowFocusListener 就可以了：

```
popupMenu.show(button, 0, bounds.height + 1);
frame.addWindowFocusListener(new WindowFocusListener() {
    @Override public void windowGainedFocus(WindowEvent arg0) {}
    @Override public void windowLostFocus(WindowEvent arg0) {
        popupMenu.setVisible(false);
        frame.removeWindowFocusListener(this);
    }
}); 
```

# geolocation - 场地的国家代码是如何生成的？

> ID：14193884
> 
> 赞同：0
> 
> 时间：2013-01-07T10:19:50.687
> 
> 标签：geolocation, geospatial, foursquare

我正在使用 FS API 开发一个 APP，我需要对场地进行地理定位。没有什么特别困难的，只是“美国”或“非美国”。我虽然使用每个场地对象附带的国家代码（CC 字段），但我不确定这个国家代码是如何计算的：

a) 您是否使用场地的纬度和经度推断出某些东西，因此 FS 会直接使用地理空间查询进行计算？b) 是否是用户手动插入的内容（不仅是 CC，还有国家本身），因此可能会丢失或拼写错误/错误插入？

干杯，

阿尔弗雷多

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T00:21:04.407

国家信息由多种来源构成，包括地理位置和用户输入。但是输入是经过验证的，所以不应该有任何无效的国家代码。您可以期望国家代码将准确表示场地所在的位置。

# javascript - 中止 AJAX 请求 ZeptoJS

> ID：14193889
> 
> 赞同：0
> 
> 时间：2013-01-07T10:20:10.193
> 
> 标签：javascript, ajax, zepto

我想知道是否有办法在 ZeptoJS 中中止 AJAX 调用，就像我`.abort()`在 jQuery 中使用的一样。

我已经尝试过了，但我不断收到此错误：

```
Uncaught TypeError: Object #<t> has no method 'abort' 
```

这是 AJAX 调用的样子：

```
SITE.Address.pendingZipLookup = $.ajax({
    url: '/us/en-us/services/globalization/getcitysuggestions',
    data: {"ZipCode" : newZipCode},
    type: 'POST',
    success: function (data) {
        if(SITE.Address.suppressZipLookup) return;
        if(data.length === 0) {
            SITE.Navigation.showModal( SITE.TextTranslations.address.noAddressText , SITE.TextTranslations.address.noAddressHeading );
        } else if(data.length == 1) {
            SITE.Address.fillAddressElm($addressFormItem, data[0]);
        } else {
            SITE.Navigation.showModal(  Mustache.to_html( $tmplSelectCity.html(), {Cities:  data} ) , SITE.TextTranslations.address.selectCity );
            $('.modal').find('.modal-header .buttonClose').one('click', clearForm).end();
        }
    },
    error: function() {}
}); 
```

我正在调用`.abort()`变量：

```
if ( SITE.Address.pendingZipLookup !== null && SITE.Address.pendingZipLookup.readyState !== 4 ) {
    console.log(SITE.Address.pendingZipLookup.readyState);
    SITE.Address.pendingZipLookup.abort();
} 
```

既不`.readyState`评估，它只是`undefined`在控制台中返回。

**编辑：**这是`SITE.Address.pendingZipLookup`登录控制台时的外观：

```
t {_deferred: e}
_deferred: e
_context: Window
_promise: t
_state: "resolved"
_withArguments: Array[3]
always: function (){return n.apply(t,arguments)}
done: function (){return n.apply(t,arguments)}
fail: function (){return n.apply(t,arguments)}
notify: function (){return n.apply(t,arguments)}
notifyWith: function (){return n.apply(t,arguments)}
pipe: function (){return n.apply(t,arguments)}
progress: function (){return n.apply(t,arguments)}
promise: function (){return n.apply(t,arguments)}
reject: function (){return n.apply(t,arguments)}
rejectWith: function (){return n.apply(t,arguments)}
resolve: function (){return n.apply(t,arguments)}
resolveWith: function (){return n.apply(t,arguments)}
then: function (){return n.apply(t,arguments)}
__proto__: e
    always: function (){var t,i,u,f=this;return(t=1<=arguments.length?n.call(arguments,0):[],t.length===0)?this:(i=r(t),this._state==="pending"?(this._alwaysCallbacks||(this._alwaysCallbacks=[]),(u=this._alwaysCallbacks).push.apply(u,i)):i.forEach(function(n){return n.apply(f._context,f._withArguments)}),this)}
    constructor: function e(n){this.then=t(this.then,this),this.resolveWith=t(this.resolveWith,this),this.resolve=t(this.resolve,this),this.rejectWith=t(this.rejectWith,this),this.reject=t(this.reject,this),this.promise=t(this.promise,this),this.progress=t(this.progress,this),this.pipe=t(this.pipe,this),this.notifyWith=t(this.notifyWith,this),this.notify=t(this.notify,this),this.fail=t(this.fail,this),this.done=t(this.done,this),this.always=t(this.always,this),this._state="pending",typeof n=="function"&&n.call(this,this)}
    done: function (){var t,i,u,f=this;return(t=1<=arguments.length?n.call(arguments,0):[],t.length===0)?this:(i=r(t),this._state==="resolved"?i.forEach(function(n){return n.apply(f._context,f._withArguments)}):this._state==="pending"&&(this._doneCallbacks||(this._doneCallbacks=[]),(u=this._doneCallbacks).push.apply(u,i)),this)}
    fail: function (){var t,i,u,f=this;return(t=1<=arguments.length?n.call(arguments,0):[],t.length===0)?this:(i=r(t),this._state==="rejected"?i.forEach(function(n){return n.apply(f._context,f._withArguments)}):this._state==="pending"&&(this._failCallbacks||(this._failCallbacks=[]),(u=this._failCallbacks).push.apply(u,i)),this)}
    notify: function (){var t;return t=1<=arguments.length?n.call(arguments,0):[],this.notifyWith.apply(this,[i].concat(n.call(t))),this}
    notifyWith: function (){var t,i,r;return(i=arguments[0],t=2<=arguments.length?n.call(arguments,1):[],this._state!=="pending")?this:((r=this._progressCallbacks)!=null&&r.forEach(function(n){return n.apply(i,t)}),this)}
    pipe: function (t,i){var r;return r=new e,this.done(function(){var u,i,e;return u=1<=arguments.length?n.call(arguments,0):[],t!=null?(i=t.apply(this,u),f(i)?i.done(function(){var t,i;return t=1<=arguments.length?n.call(arguments,0):[],(i=r.resolveWith).call.apply(i,[r,this].concat(n.call(t)))}).fail(function(){var t,i;return t=1<=arguments.length?n.call(arguments,0):[],(i=r.rejectWith).call.apply(i,[r,this].concat(n.call(t)))}):r.resolveWith.call(r,this,i)):(e=r.resolveWith).call.apply(e,[r,this].concat(n.call(u)))}),this.fail(function(){var t,u,e,o;return t=1<=arguments.length?n.call(arguments,0):[],i!=null?(u=i.apply(this,t),f(u)?u.done(function(){var t,i;return t=1<=arguments.length?n.call(arguments,0):[],(i=r.resolveWith).call.apply(i,[r,this].concat(n.call(t)))}).fail(function(){var t,i;return t=1<=arguments.length?n.call(arguments,0):[],(i=r.rejectWith).call.apply(i,[r,this].concat(n.call(t)))}):r.rejectWith.call(r,this,u),(e=r.rejectWith).call.apply(e,[r,this].concat(n.call(t)))):(o=r.rejectWith).call.apply(o,[r,this].concat(n.call(t)))}),r.promise()}
    progress: function (){var t,i,u;return(t=1<=arguments.length?n.call(arguments,0):[],t.length===0||this._state!=="pending")?this:(i=r(t),this._progressCallbacks||(this._progressCallbacks=[]),(u=this._progressCallbacks).push.apply(u,i),this)}
    promise: function (){return this._promise||(this._promise=new u(this))}
    reject: function (){var t;return t=1<=arguments.length?n.call(arguments,0):[],this.rejectWith.apply(this,[i].concat(n.call(t))),this}
    rejectWith: function (){var t,i,r,u,f=this;return(i=arguments[0],t=2<=arguments.length?n.call(arguments,1):[],this._state!=="pending")?this:(this._state="rejected",this._withArguments=t,this._context=i,(r=this._failCallbacks)!=null&&r.forEach(function(n){return n.apply(f._context,t)}),(u=this._alwaysCallbacks)!=null&&u.forEach(function(n){return n.apply(f._context,t)}),this)}
    resolve: function (){var t;return t=1<=arguments.length?n.call(arguments,0):[],this.resolveWith.apply(this,[i].concat(n.call(t))),this}
    resolveWith: function (){var t,i,r,u,f=this;return(i=arguments[0],t=2<=arguments.length?n.call(arguments,1):[],this._state!=="pending")?this:(this._state="resolved",this._context=i,this._withArguments=t,(r=this._doneCallbacks)!=null&&r.forEach(function(n){return n.apply(f._context,t)}),(u=this._alwaysCallbacks)!=null&&u.forEach(function(n){return n.apply(f._context,t)}),this)}
    state: function (){return this._state}
    then: function (n,t,i){return this.done(n),this.fail(t),this.progress(i),this}
__proto__: Object 
```

如果它看起来很奇怪，那是因为我复制了我在控制台中得到的对象，如果有更好的打印结果的方法，有人应该让我知道:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T10:35:03.730

*   首先，您需要获取“请求”实例。如果你使用`$.ajax`，那么`var request = $.ajax(options)`。
*   然后你可以这样写：`request.abort();`

如果您无法获取请求实例，我认为没有任何方法可以中止请求。

你可以把你的代码贴出来。

# javascript - 设定时间的 stop() 动画

> ID：14193898
> 
> 赞同：0
> 
> 时间：2013-01-07T10:20:32.853
> 
> 标签：javascript, jquery

在我正在创建的游戏中，用户必须根据问题单击数字，我添加了一个冻结图标，该图标将计时器停止 3 秒。

我还希望这个冻结图标停止所有移动的 div 3 秒钟，然后恢复正常动画。

这个我试过了。。

```
$('#container').children().stop(3000); 
```

但它不起作用。我哪里错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T10:22:24.410

更好用`.delay(3000)`

```
$('#container').children().delay(3000); 
```

查看文档：[http ://api.jquery.com/delay/](http://api.jquery.com/delay/)

# php - PHP：避免在 foreach 循环中重复

> ID：14193902
> 
> 赞同：0
> 
> 时间：2013-01-07T10:20:39.063
> 
> 标签：php

您好，我正在循环一个数组，例如：

```
Array
(
[01/04/2013 - 14:54] => Array
        (
            [0] => 13528
            [1] => status
            [2] => Waiting
            [3] => 10000
            [4] => Message to user
            [5] => Message3 to my dear user
        )

[01/04/2013 - 14:14] => Array
        (
            [0] => 13523
            [1] => status
            [2] => Waiting
            [3] => 10000
            [4] => Message to user
            [5] => Message2 to my dear user
        )

[12/20/2012 - 09:13] => Array
        (
            [0] => 13476
            [1] => status
            [2] => Waiting
            [3] => 10000
            [4] => Message to user
            [5] => Message do my dear user
       )
); 
```

我需要的是正确显示它以避免重复：这是我的代码。

```
foreach ($histories_by_date as $date => $events) {
$output .= $date;
foreach ($events as $key => $event) {
    switch ($events[$key]) {
        case 'Message from user':
            $output .= $events[$key + 1];
            break;
        case 'Message to user':
            $output .= $events[$key + 1];
            break;
       }
    }//foreach2
    }//foreach1 
```

令人讨厌的是我得到了重复，例如：

```
01/04/2013 - 14:54 (CET)
Message3 to my dear user

01/04/2013 - 14:14 (CET)
Message3 to my dear user
Message2 to my dear user

12/20/2012 - 09:13 (CET)
Message3 to my dear user
Message2 to my dear user
Message do my dear user 
```

我只需要在原始数组中显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T10:24:33.663

应该像这样工作：

```
$tmp = '';
$output = '';
foreach ($histories_by_date as $date => $events) {
    $output .= $date;
    foreach ($events as $key => $event) {
      switch ($events[$key]) {
        case 'Message from user':
            $tmp  .= $events[$key + 1];
            break;
        case 'Message to user':
            $tmp .= $events[$key + 1];
            break;
       }
    }//foreach2
    $output.=$tmp;
    $tmp = '';
}//foreach1 
```

替代解决方案是将 foreach 循环中断，而不仅仅是这样的开关：

```
$output = "";
foreach ($histories_by_date as $date => $events) {
    $output .= $date;
    foreach ($events as $key => $event) {
        $tmp = '';
        switch ($events[$key]) {
            case 'Message from user':
                $tmp  .= $events[$key + 1];
                break 2;
            case 'Message to user':
                $tmp .= $events[$key + 1];
                break 2;
           }
    }//foreach2

    $output.=$tmp;
}//foreach1
echo $output; 
```

# php - PHP ORM 避免递归

> ID：14193908
> 
> 赞同：0
> 
> 时间：2013-01-07T10:20:53.577
> 
> 标签：php, database, orm

如何避免以下代码中的递归？我有**两个数据库表**：

1.  公司（公司）
2.  销售点 (pos)

有以下**关系**：

1.  一家公司有很多职位
2.  一个 pos 有一个公司

**示范课**：

```
class Company
{
    protected $_pos;

    public function addPos(Pos $pos)
    {
        $this->_pos[] = $pos;
    }

    public function getPos()
    {
        return $this->_pos;
    }
}

class Pos
{
    protected $_company;

    public function setCompany(Company $company)
    {
        $this->_company = $company;
    }

    public function getCompany()
    {
        return $this->_company;
    }
} 
```

现在我将向您展示问题：

```
$company = new Company();

$pos1 = new Pos();
$pos1->setCompany($company);

$pos2 = new Pos();
$pos2->setCompany($company);

$company->addPos($pos1);
$company->addPos($pos2); 
```

我的目标是能够拥有以下返回特定对象的方法：

```
$company = $pos->getCompany(); 
```

和

```
$pos = $company->getPos(); 
```

非常感谢您的帮助。

# javascript - 从javascript中的字符串解析标志/参数

> ID：14193911
> 
> 赞同：1
> 
> 时间：2013-01-07T10:20:59.400
> 
> 标签：javascript, flags

我正在用javascript构建一个“终端事物”。这个想法是每个命令都是一个单独的 .js 文件，采用 AMD 格式，并且所有内容都使用 requirejs 加载。

我希望命令被称为：

```
command -s "string u-l: extra" -g http://domain.com/random.txt -r -a --test fixed 
```

这将转化为类似的东西：

```
command({'-s': 'string u-l: extra', '-g': 'http://domain.com/random.txt', '-r': true, '-a': true, '--test': 'fixed'}); 
```

但这就是我卡住的地方，我尝试在脑海中运行不同的场景，但我找不到任何好的答案，但我可以提出冲突：

*   split() - 如果有一些额外的空格会破坏一切
*   正则表达式 - 正则表达式每次都依赖于获取相似的字符串，如果我想要“wget [http://code.jquery.com/jquery-1.8.3.min.js](http://code.jquery.com/jquery-1.8.3.min.js) ”之类的东西怎么办？
*   在命令本身中定义规则 - 仍然需要弄清楚解析
*   管道 - 如果我想要管道，我必须弄清楚如何不破坏错误的管道，即：“command -s 'random | pipe' | command2 asd”

任何想法/建议将不胜感激，我坚持这一点。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-07T10:31:09.680

如果你分开，事情会更容易：

*   解析（使用特殊用途的库，如[https://github.com/jfd/optparse-js](https://github.com/jfd/optparse-js)？）
*   将解析的输入转换为所需模块的列表（如果我理解正确，您必须定义参数和命令模块之间的映射）
*   需要上述模块，然后将相关参数传递给每个模块？

# c# - 检查出现在数据表列中的单词的出现

> ID：14193912
> 
> 赞同：0
> 
> 时间：2013-01-07T10:21:01.440
> 
> 标签：c#, system.data.datatable

我在数据表中有以下数据，这是示例数据。我想在数据表中出现 12,13，因为通常数据表中会有 10-20 百万行。

```
Customer  |  quantity  |  Product  | Code 

1         |  3         |  Product  | 12 
2         |  4         |  Product  | 13 
3         |  1         |  Product  | 12 
4         |  6         |  Product  | 13 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T10:22:49.933

您可以使用`Linq-To-DataTable`：

```
int[] allowedCodes = new []{ 12, 13 };
var rows = table.AsEnumerable()
                .Where(r => allowedCodes.Contains(r.Field<int>("Code"))); 
```

但是，如果数据表中有 10-2000 万行，则应考虑在数据库本身中进行过滤。

如果您想知道它们出现的数量：

```
int count = table.AsEnumerable()
                 .Count(r => allowedCodes.Contains(r.Field<int>("Code"))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T11:02:56.293

简单怎么样`for each loop`

```
private int getCount(int yourSearchDigit)
{
    int counter = 0;
    foreach (DataRow dr in youDataTable.Rows)
    {
        if (Convert.ToInt32(dr["Code"]) == yourSearchDigit)
        counter++;
    }
    return counter;
} 
```

# php - 自动填写 Web 表单并返回结果页面

> ID：14193913
> 
> 赞同：4
> 
> 时间：2013-01-07T10:21:10.397
> 
> 标签：php, javascript, webforms, automation

这是我第一次在这里发帖。我非常感谢有关此主题的任何和所有指导。

我正在尝试制作一个自动填写网络表单并提交数据的程序，将生成的页面返回给程序，以便它可以继续“浏览”页面，允许它递归地提交更多数据。

我遇到的主要问题是：

*   “提交”按钮是用 Javascript 编码的，所以我不知道发出页面请求时表单数据的去向。
*   我想使用 Excel 表格中的数据填写表格，因此我需要能够从页面外部访问数据。
*   我需要能够浏览结果页面以继续提交更多数据。

更具体地说，我正在尝试首先登录[Practice Mate 网站](https://pm.officeally.com/pm/login.aspx)，导航到“管理患者”，点击“添加患者”，然后填写正确的表格并提交。我正在从数千行长的 Excel 表格中填写表格。
抱歉，如果不提供用户名和密码，我无法更清楚地说明这一点。

我一直在尝试做的是使用 Javascript 从使用 PHP 从 Excel 文档中检索信息的页面发出页面请求。不过，我似乎仍然无法使用这种方法。

我很抱歉在这方面是一个相对新手。提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-07T10:29:47.913

您可以使用[PHP cURL](http://php.net/manual/en/book.curl.php)浏览和提交表单到网站，但这取决于网站的设置方式。大多数都进行了安全检查以防止机器人出现，并且很难让一切正常工作。

我花了一点时间想出了这个登录脚本。如果没有有效的用户名和密码，我无法验证它是否成功，但应该做你需要的。这个简短的示例首先浏览到页面以设置任何 cookie 并抓取提交表单所需的 __VIEWSTATE 值。然后它使用您提供的用户名/密码提交表单。

```
<?php

// Login information
$username = 'test';
$password = 'mypass';
$utcoffset = '-6';
$cookiefile = '/writable/directory/for/cookies.txt';

$client = new Client($cookiefile);

// Retrieve page first to store cookies 
$page = $client -> get("https://pm.officeally.com/pm/login.aspx");
// scrape __VIEWSTATE value
$start = strpos($page, '__VIEWSTATE" value="') + 20;
$end = strpos($page, '"', $start);
$viewstate = substr($page, $start, $end - $start);

// Do our actual login
$form_data = array(
    '__LASTFOCUS' => '', 
    '__EVENTTARGET' => '',
    '__EVENTARGUMENT' => '',
    '__VIEWSTATE' => $viewstate,
    'hdnUtcOffset' => $utcoffset,
    'Login1$UserName' => $username,
    'Login1$Password' => $password,
    'Login1$LoginButton' => 'Log In'
);
$page = $client -> get("https://pm.officeally.com/pm/login.aspx", $form_data);

// cURL wrapper class    
class Login {
    private $_cookiefile;

    public function __construct($cookiefile) {
        if (!is_writable($cookiefile)) {
            throw new Exception('Cannot write cookiefile: ' . $cookiefile);
        }
        $this -> _cookiefile = $cookiefile;
    }

    public function get($url, $referer = 'http://www.google.com', $data = false) {
        // Setup cURL
        $ch = curl_init();
        curl_setopt($ch, CURLOPT_URL, $url);
        curl_setopt($ch, CURLOPT_REFERER, $referer);
        curl_setopt($ch, CURLOPT_COOKIEFILE, $this -> _cookiefile);
        curl_setopt($ch, CURLOPT_COOKIEJAR, $this -> _cookiefile);
        curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
        curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
        curl_setopt($ch, CURLOPT_AUTOREFERER, true);
        curl_setopt($ch, CURLOPT_MAXREDIRS, 10);

        // Is there data to post
        if (!empty($data)) {
            curl_setopt($ch, CURLOPT_POST, 1);
            curl_setopt($ch, CURLOPT_POSTFIELDS, http_build_query($data));
        }

        return curl_exec($ch);
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-15T21:03:28.997

好吧，我认为 cURL 可以解决问题，`curl_init()`处理程序很容易解释。仍然在文档阅读的开始，但是，预期会有好的结果。好吧，不太确定结构的 PHP 灵活性，因为这对 cURL 意义重大。希望以后能找到好运。

# iphone - 视图控制器：Ladnscape 到 Portrait

> ID：14193916
> 
> 赞同：0
> 
> 时间：2013-01-07T10:21:23.357
> 
> 标签：iphone, ios, ipad

我的应用程序中有一个视图控制器。让它的第一个视图控制器，我的第一个视图控制器在手机中以纵向模式出现，当用户以横向模式旋转手机时，第一个视图控制器也以横向模式旋转。

它工作正常，现在我在第一个视图控制器上有一个按钮，当我触摸按钮时，第二个视图控制器出现。我只想做的是，即使第一个视图控制器处于横向模式，第二个视图控制器也应该始终以纵向模式出现。是否有任何方法我必须重写才能获得此功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T10:29:06.643

在导航控制器中，控制器的方向取决于导航控制器的根控制器的方向。

你有两种可能：

1.  根据实际显示的控制器，使您的根控制器`shouldAutorotateToInterfaceOrientation:`返回不同的值；

2.  在您的视图控制器的视图上使用转换，以便旋转它。

我会尝试第一种方法，开始。看看[这篇文章](https://stackoverflow.com/questions/1196758/selective-autorotation-within-a-uinavigationcontroller-and-uitabbarcontroller)，了解如何去做（只是忽略这些`UITabBarController`东西），或者试试这个（它只是将消息中继到导航层次结构中的顶部控制器）：

```
 - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {   
    return [self.navigationController.topController shouldAutorotateToInterfaceOrientation:interfaceOrientation];
 } 
```

为了在 iOS6 上达到同样的效果，请尝试定义以下方法：

```
-(NSUInteger)supportedInterfaceOrientations {
  return [self.navigationController.topController supportedInterfaceOrientations];
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation {
  return [self.navigationController.topController  preferredInterfaceOrientationForPresentation];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T11:24:06.323

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
   // Return YES for supported orientations
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
} 
```

在第二个视图控制器中保留这个。

# ruby-on-rails - rails 2.3 named_scope 条件中的嵌套哈希

> ID：14193917
> 
> 赞同：1
> 
> 时间：2013-01-07T10:21:26.247
> 
> 标签：ruby-on-rails, rails-activerecord

我对 ruby​​/ruby on rails 真的很陌生，并且得到了一个看起来像这样的模型类。我只是想问为什么当我尝试调用 Ranks.search_word("Jagger") 时它会给我哈希错误的奇数列表

我正在使用 Rails 2.3.5/ActiveRecord 2.3.5

```
class Ranks < ActiveRecord::Base
  set_table_name 'CM_GT_RANK'
  set_primary_key 'rank_id'

  has_one :character_atlas, :class_name => "CharAtlas", :foreign_key => "char_id_db"
  has_one :player_records, :class_name => "PlayerRecord", :foreign_key => "char_id"

  default_scope  :joins => :character_atlas,
                 :order => "rank asc"
  named_scope :search_word,
    lambda{ |keyword|
      {
        if keyword.present?
          {:conditions => { :CM_CHAR_ATLAS => {:char_name => keyword }} }
        else
          {}
        end
      }
  }
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T10:27:38.627

您还有一对不需要的大括号。尝试：

```
named_scope :search_word, lambda{ |keyword|
  if keyword.present?   
    {:conditions => { :CM_CHAR_ATLAS => {:char_name => keyword }} }
  else
    {}
  end
} 
```

# nginx - 在 nginx 的子文件夹中查找文件

> ID：14193920
> 
> 赞同：0
> 
> 时间：2013-01-07T10:21:33.937
> 
> 标签：nginx, rewrite

我正在更改文件结构。以前在站点的根级别可用的一些 url 现在已移至子文件夹。

所以我有一个`$uri`. I`try_files $uri @check_subfolder;` 如果文件（普通的 .html 文件）仍然存在于根级别，或者它的 url 写入正确，则可以正常`try_files $uri`工作。但是如果文件被移动到子文件夹，那么我输入

```
location @check_subfolder {
} 
```

如果在这里我只是进行重定向`rewrite ^(.*) $scheme://$host/articles$1 permanent;`，那么一切仍然是完美的。但我想首先检查子文件夹中是否`$uri`真的存在。`/articles`所以我愿意

```
location @check_subfolder {
    if (-f "/articles${uri}") {
        rewrite ^(.*) $scheme://$host/articles$1 permanent;
    }
} 
```

它只是归结为错误 404。不会发生重定向。没有`if`重定向工作。所以很明显，我如何制定条件的方式存在问题。

`if (-f "/articles${uri}")`不起作用。 `if (-f "/articles${request_filename}")`不起作用。 `if (-f "/articles/${request_filename}")`不起作用。 `if (-f /articles/$request_filename)`不起作用。 `if (-f /articles/$uri)`不起作用。

我显然写错了连接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T18:15:26.187

我的回答是我不认为在文件系统中`-f`寻找文件，而不是在网页中，所以我必须包含`$document_root`. 所以现在它像

```
location @check_subfolders {
    if (-f $document_root/articles/$uri ) {
        rewrite ^(.*) $scheme://$host:8090/articles$1 permanent;
    }
} 
```

# ios - 取消已经启动iOS的UIGesture

> ID：14193924
> 
> 赞同：3
> 
> 时间：2013-01-07T10:21:52.523
> 
> 标签：ios, uitableview, uigesturerecognizer

**我目前拥有的：**

`UIViewController`我的main 里面有一个孩子`UIViewController`。在这个孩子中，`UIViewController`我有一个`UITableView`，尽管它里面可以有任何东西（`UIScrollView`, `UIImageView`, 不同`UIViews`子类的组成）。

在我的 main`UIViewController`我有`GestureRecognizerDelegate`，所以我在做出手势时收到回调，如下所示：

```
- (void)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer movedWithTouches:(NSSet*)touches andEvent:(UIEvent *)event;

- (void)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer endWithTouches:(NSSet*)touches andEvent:(UIEvent *)event;

@optional

- (void)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer beganWithTouches:(NSSet*)touches andEvent:(UIEvent *)event; 
```

对于在 main 之上完成的特定手势`UIViewController`，我展示了一个`UIView`带有`UIImageView`. 因此，基本上，当从顶部到底部进行触摸时，Y < 100 的 UIView 动画并显示图像，当我从屏幕上松开手指时，`UIView`返回顶部。它很像 Apple 提供的通知中心，只是我不控制它的滚动，它只显示距离顶部 200 像素的区域。

**问题：**

理论上`UIView`with the`UIImage`是我的层次结构中最高的`UIView`，但是当我用手指在它的区域上继续移动时，我可以看到它`UITableView`下面的移动。对我来说这没有意义，因为`UIView`with the`UIImageView`应该捕捉这些手势。

**我想要的是：**

只是当我显示`UIView`禁用`UIImage`所有交互时`childViewController`。

**我试过的：**

目前我有这个：

```
-(BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer
{
    return YES;
} 
```

如果我设置为 NO，则`UIView`with`UIImage`甚至不会显示。

如果我放了类似的东西`myChildViewController.view.userInteractionEnabled = NO`，因为手势已经开始，所以它不起作用。当然，如果我在手势开始之前使用它，一切都会按预期工作。但问题是我将无法使用`UITableView`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T07:36:05.103

好吧，最终起作用的是：

```
 -(BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer
{
    // Check if I am not on the Default state (UIView with the UIImageView hidden)
    if(currentState != kDefaultState)
    {
        otherGestureRecognizer.enabled = NO;
        [arrayOfDisabledGestures addObject:otherGestureRecognizer];
    }

    return YES;
} 
```

当我最终关闭`UIView`时，`UIImageView`我执行以下操作：

```
[arrayOfDisabledGestures makeObjectsPerformSelector:@selector(setEnabled:) withObject:@YES]; 
```

重新启用所有手势。我真的不喜欢这个解决方案，我认为应该有（而且我打赌有）其他方法可以做到这一点。

# node.js - 在 node.js 中，无法摆脱错误的符号链接

> ID：14193926
> 
> 赞同：5
> 
> 时间：2013-01-07T10:21:54.653
> 
> 标签：node.js, filesystems

我有一个`uglify`函数可以创建一个文件`lib-0.1.4-min.js`，然后将其符号链接到`lib-production-min.js`. `0.1.4`是当前版本。

由于此目录的同步，有时`lib-production-min.js`链接断开。

当我运行编译函数时，`fs.existsSync( "lib-production-min.js" )`返回false。当我稍后尝试创建符号链接时，`node`使用`file already exists`.

```
var version = 'lib-0.1.4-min.j';
var prod = 'lib-production-min.js';

// if production exists, get rid of it
if( fs.existsSync(prod) ) fs.unlinkSync( prod );  // not exists - not deleted

// link version to production
fs.symlinkSync( version, prod );                  // ERROR: file already exists 
```

1.  如何检查此死链接是否在目录中？

2.  会正常`fs.unlinkSync( "lib-production-min.js" )`删除吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-21T15:08:06.547

`fs.lstat()`或者`fs.lstatSync()`可能会帮助你。他们应该带来有关链接本身的信息，而不是跟随它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T17:11:28.443

用于`fs.readlinkSync(symlinkPath)`获取符号链接指向的文件，然后`fs.existsSync`与该路径一起使用。

问题是链接文件存在，链接的目标是缺少的那个。

# gwt - 我如何在 www 上部署我的 GWT 应用程序

> ID：14193928
> 
> 赞同：-2
> 
> 时间：2013-01-07T10:22:03.953
> 
> 标签：gwt, tomcat

我创建了我的第一个 Java EE 应用程序（GWT + Hibernate）。我想在 Tomcat Web 服务器上部署我的应用程序。

你能给我一步一步的教程吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T10:27:36.260

如果您正在尝试部署到 Google Cloud，您可以从**Google App Engine + GWT教程开始 -** [https://developers.google.com/web-toolkit/doc/latest/tutorial/appengine](https://developers.google.com/web-toolkit/doc/latest/tutorial/appengine)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T08:46:16.773

这个问题很大，所以我将尝试将其归结为需要进行一些研究才能实施的一些步骤。

第一个。您使用 GWT 和 Hibernate 创建了一个应用程序。这意味着您需要某种**理解**java 并且可以将逻辑从 java**重写**为 javascript（用于客户端）的 Web 服务器，并且还可以连接到服务器端的数据库并为客户端检索数据。

这个网络服务器是tomcat，所以你需要的是：

1.  将作为服务器工作的计算机。这可能是您自己的机器或您可以购买的一些服务器作为托管解决方案。购买这样的东西需要您的研究和努力，这里无法解释。
2.  一个版本的 Tomcat 或 Resin 或任何其他理解 java 的 web 服务器
3.  一个域名。这些可以[从像这样的网站](http://www.domain.com/)购买，但网络上有一些免费的。它们需要**静态 ips**，即您不能从更改 ips 的家庭线路使用它们。即使**没有**域名，您也可以在服务器上托管您的站点，但您需要通过写入机器的 ip 来访问它。- 可选 - 一个临时解决方案是在您的路由器上使用某种动态 dns 服务。
4.  在设置好 tomcat（您可能希望将端口 80 给 tomcat）和服务器之后，您可以通过上传 war 文件来托管您的应用程序。您可以按照[此处的说明从 gwt 创建一个 war 文件](http://blog.elitecoderz.net/gwt-and-tomcat-create-war-using-eclipse-to-deploy-war-on-tomcat/2009/12/)
5.  要上传 war 文件，您可以使用 tomcat 管理器界面，或者您可以连接到服务器并将其手动放置在用于 Web 应用程序的文件夹中。

我知道每一步都需要尽可能多的解释，我希望我在这里稍微清理一下这个区域。

# jquery - 用于执行快速 jquery/CSS 作业的 FireFox 工具栏插件

> ID：14193937
> 
> 赞同：1
> 
> 时间：2013-01-07T10:22:31.197
> 
> 标签：jquery, css, firefox, toolbar

是否有一个插件（你知道我在 google 中没有找到）可以让你在工具栏中每次单击按钮时执行/设置微小的 CSS 属性？

例如，我有一个网站，我需要将某些东西设置为可见，某些不可见以用于测试目的。我现在用 firebug 来做，但我每次都需要导航到元素，然后显示：none-them。

一个可以执行的按钮：

```
$('#id1').show();
$('.test').hide(); 
```

我不想将其添加到代码中，因为我害怕人类的遗忘行为。并且因为它是一个可能导致网站外观不同的元素。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T11:38:54.833

您可能会做的是创建所谓的书签。

小书签是可以从书签工具栏中的链接或“书签”在当前页面上运行一些代码的东西。

最受欢迎和最明显的书签示例之一可能是 Pinterest。如果您曾经使用过它，他们会使用书签来运行 JS 代码，该代码会从当前页面中抓取所有图像。非常聪明的东西，但是一旦你了解它就相当简单。

有一个 jQuery 小书签生成器...试试这个链接，看看你的代码的例子：

[http://benalman.com/code/test/jquery-run-code-bookmarklet/?name=Run+jQuery+Code&ver=1.3.2&code=%24%28%27%23id1%27%29.show%28% 29%3B%0D%0A%24%28%27.test%27%29.hide%28%29%3B%0D%0A](http://benalman.com/code/test/jquery-run-code-bookmarklet/?name=Run+jQuery+Code&ver=1.3.2&code=%24%28%27%23id1%27%29.show%28%29%3B%0D%0A%24%28%27.test%27%29.hide%28%29%3B%0D%0A)

您应该会在其上看到一个绿色的大按钮。此按钮将运行您的代码。但这本身有什么用呢？您现在需要做的是**单击此按钮并将其拖动到**浏览器中的书签栏。

然后，当您现在在任何页面上单击此按钮时，它应该会根据需要运行/执行。

希望这可以帮助？米奇

# sql - 可序列化事务隔离锁

> ID：14193939
> 
> 赞同：5
> 
> 时间：2013-01-07T10:22:42.050
> 
> 标签：sql, sql-server, serialization, transaction-isolation

我已经为一个事务设置了一个可序列化的事务隔离锁。但是我观察到了一些意想不到的结果。

我的查询是

```
update tabl1 set col2 = 10 where col1 > 10 and col1 < 20 
```

这里 col1 是主键。这里 col1 值为 10,11,12....19,20 的行被锁定以进行更新/插入。在 where 条件下，我给出了 col1>10 和 col1<20 的条件，但 col1=10 和 col1=20 的行仍然被锁定。

如果我给

```
update tabl1 set col2 = 10 where col1 => 10 and col1 <= 20 
```

然后 col2 的值从 9 到 21 的行被锁定。那么为什么 col1 的 9 和 21 被锁定在这里？

对于下面的查询，全表被锁定。这里 col3 是一个非主列。如果 where 条件中的列不是主键，我不能设置锁定吗？

```
update tabl1 set col2 = 10 where col3 > 10 and col3 < 20 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T10:33:26.323

对于键范围锁定，SQL Server 必须使用索引来满足范围条件，因此关于您的最后一个查询，您需要一个索引`col3`（如果计划不使用它，可能还有查询提示来强制使用它）

此外，它不仅锁定您的`WHERE`子句中的特定范围。它锁定钥匙。键上的范围锁定保护从该键向下到下一个键的范围，因此将被阻止的确切范围取决于索引中存在哪些键。

更多详细信息/链接[在我的回答中](https://stackoverflow.com/a/3225131/73226)

# zend-framework2 - Zend 框架 2 中 Zend_Controller_Plugin_ErrorHandler 和 Zend_Controller_Action_Exception 的等价物

> ID：14193942
> 
> 赞同：0
> 
> 时间：2013-01-07T10:22:53.127
> 
> 标签：zend-framework2

Zend 框架 2 中 Zend_Controller_Plugin_ErrorHandler 和 Zend_Controller_Action_Exception 的等价物是什么？我习惯于在框架的过去版本中编写 ErrorController（例如[http://framework.zend.com/manual/1.12/en/zend.controller.plugins.html](http://framework.zend.com/manual/1.12/en/zend.controller.plugins.html)），但现在使用的是第二版，我不能查找有关如何编写自定义错误处理程序的任何示例。

在我的实例中，我正在编写一个 REST 服务器，并希望抛出与特定 HTTP 错误代码相对应的异常。

据我所知，看来我可能需要编写自己的 Zend\Mvc\View\Http\ExceptionStrategy 自定义版本，由 Zend\Mvc\View\Http\ViewManager 调用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T18:40:40.420

ZF2 没有真正等同`ErrorController`于 ZF1 中带有错误处理程序的东西。我不建议尝试在 ZF2 中实现类似的东西（因为它的工作方式非常非常不同）。

在您的情况下，我会简单地使用 default `Zend\Mvc\View\Http\ExceptionStrategy`，然后使用视图脚本来区分不同的错误代码和请求类型。

# c - C中的枚举数组

> ID：14193943
> 
> 赞同：1
> 
> 时间：2013-01-07T10:22:53.673
> 
> 标签：c, arrays, enums

我需要使数组像枚举一样工作，我可以在初始化期间更改数组中元素的索引位置。例如，我们可以有一个枚举

```
enum Fruit_t {
APPLES,
ORANGES,
STRAWBERRIES = 8 } 
```

在这里，草莓而不是 2，变成了 8。这可以在数组中完成，位置可以改变吗？这在C中可能吗？如果是，请问如何？

任何其他可能的建议将不胜感激

让我解释一下我的意图

我正在使用一个函数指针数组

```
static BT (*data_access_typ [4])() =
{ 

    NULL,
    ARRAY,  
    STRUCT,
    dnt_cr

}; 
```

我需要调用这个函数

```
(access_data[*VAL])() 
```

其中 *VAL 可以是此枚举中的任何此值

```
enum data_access_typ    {
                        Null, array, struc, bool, bit_str, int32, unsin32, float_pt, oct_str=9, vis_str,
                        bcd=13, int8=15, int16, unsin8, unsin16, int64=20, unsin64, _enum, float32, float64,
                        date_tim, date, time, dnt_cr=225
                    }; 
```

如果值是 NULL、ARRAY、STRUCT，直到 dnt_car (255)，则需要执行单独的函数，但我不需要所有类型。只有几个 5 或 6 个功能。所以我真的不打算使用枚举（仍然试图弄清楚如何让它为我想做的事情工作）。

我想要做的是，*VAL 的值决定了在函数指针数组中调用哪个函数，其索引应该对应于假定枚举中的值。

例如，

`(access_data[*VAL])()`

从上面的代码中，它只会在 *VAL 为 3 时调用 dnt_cr 函数，但我想要的是在 *VAL 为 225 时调用 dnt_cr。

我希望这很清楚...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T10:26:20.493

C99+：

```
int a[6] = { [4] = 29, [2] = 15 }; 
```

此语法也可用作 C89 模式下的 gcc 扩展。

# java - JAXB 编组 使用 CDATA 解组

> ID：14193944
> 
> 赞同：30
> 
> 时间：2013-01-07T10:22:56.250
> 
> 标签：java, xml, jaxb

我正在尝试使用 JAXB 进行编组。

我的输出是这样的：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<root>
    <name>&lt;![CDATA[&lt;h1&gt;kshitij&lt;/h1&gt;]]&gt;</name>
    <surname>&lt;h1&gt;solanki&lt;/h1&gt;</surname>
    <id>&lt;h1&gt;1&lt;/h1&gt;</id>
</root> 
```

...但我需要这样的输出：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
    <root>
        <name><![CDATA[<h1>kshitij</h1>]]></name>
        <surname><![CDATA[<h1>solanki</h1>]]></surname>
        <id><![CDATA[0]]></id>
    </root> 
```

我正在使用以下代码来执行此操作。

如果我取消注释代码，我会得到`PropertyBindingException`. 没有它我可以编译，但我没有得到所需的确切输出。

```
 package com.ksh.templates;

import java.io.IOException;
import java.io.StringWriter;
import java.io.Writer;
import javax.xml.bind.JAXBContext;
import javax.xml.bind.Marshaller;
import com.sun.xml.bind.marshaller.CharacterEscapeHandler;

public class MainCDATA {
    public static void main(String args[])
    {
        try
        {
            String name = "<h1>kshitij</h1>";
            String surname = "<h1>solanki</h1>";
            String id = "<h1>1</h1>";

            TestingCDATA cdata = new TestingCDATA();
            cdata.setId(id);
            cdata.setName(name);
            cdata.setSurname(surname);

            JAXBContext jaxbContext = JAXBContext.newInstance(TestingCDATA.class);
            Marshaller marshaller = jaxbContext.createMarshaller();
            marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);

            marshaller.setProperty(CharacterEscapeHandler.class.getName(), new CharacterEscapeHandler() { 
                public void escape(char[] ac, int i, int j, boolean flag,
                Writer writer) throws IOException {
                writer.write( ac, i, j ); }
                });
            StringWriter stringWriter = new StringWriter(); 
            marshaller.marshal(cdata, stringWriter);
            System.out.println(stringWriter.toString());
        } catch (Exception e) {
            System.out.println(e);
        }       
    }
} 
```

我的豆子看起来像这样：

```
package com.ksh.templates;

import javax.xml.bind.annotation.XmlAccessType;
import javax.xml.bind.annotation.XmlAccessorType;
import javax.xml.bind.annotation.XmlElement;
import javax.xml.bind.annotation.XmlRootElement;
import javax.xml.bind.annotation.adapters.XmlJavaTypeAdapter;
import com.sun.xml.txw2.annotation.XmlCDATA;

@XmlRootElement(name = "root")
@XmlAccessorType(XmlAccessType.FIELD)
public class TestingCDATA {

    @XmlElement
    @XmlJavaTypeAdapter(value = AdaptorCDATA.class)
    private String name;
    @XmlElement
    @XmlJavaTypeAdapter(value = AdaptorCDATA.class)
    private String surname;

    @XmlCDATA
    public String getName() {
        return name;
    }
    @XmlCDATA
    public void setName(String name) {
        this.name = name;
    }
    @XmlCDATA
    public String getSurname() {
        return surname;
    }
    @XmlCDATA
    public void setSurname(String surname) {
        this.surname = surname;
    }
} 
```

适配器类

```
public class AdaptorCDATA extends XmlAdapter<String, String> {

    @Override
    public String marshal(String arg0) throws Exception {
        return "<![CDATA[" + arg0 + "]]>";
    }
    @Override
    public String unmarshal(String arg0) throws Exception {
        return arg0;
    }
} 
```

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-01-07T14:25:01.567

您可以执行以下操作：

**适配器CDATA**

```
package forum14193944;

import javax.xml.bind.annotation.adapters.XmlAdapter;

public class AdapterCDATA extends XmlAdapter<String, String> {

    @Override
    public String marshal(String arg0) throws Exception {
        return "<![CDATA[" + arg0 + "]]>";
    }
    @Override
    public String unmarshal(String arg0) throws Exception {
        return arg0;
    }

} 
```

**根**

`@XmlJavaTypeAdapter`注释用于指定`XmlAdapter`应该使用的。

```
package forum14193944;

import javax.xml.bind.annotation.*;
import javax.xml.bind.annotation.adapters.XmlJavaTypeAdapter;

@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class Root {

    @XmlJavaTypeAdapter(AdapterCDATA.class)
    private String name;

    @XmlJavaTypeAdapter(AdapterCDATA.class)
    private String surname;

    @XmlJavaTypeAdapter(AdapterCDATA.class)
    private String id;

} 
```

**演示**

我必须包裹起来`System.out`才能`OutputStreamWriter`获得预期的效果。另请注意，设置 a`CharacterEscapeHandler`意味着它负责该 的所有转义处理`Marshaller`。

```
package forum14193944;

import java.io.*;
import javax.xml.bind.*;
import com.sun.xml.bind.marshaller.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Root.class);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        File xml = new File("src/forum14193944/input.xml");
        Root root = (Root) unmarshaller.unmarshal(xml);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.setProperty(CharacterEscapeHandler.class.getName(),
                new CharacterEscapeHandler() {
                    @Override
                    public void escape(char[] ac, int i, int j, boolean flag,
                            Writer writer) throws IOException {
                        writer.write(ac, i, j);
                    }
                });
        marshaller.marshal(root, new OutputStreamWriter(System.out));
    }

} 
```

**输入.xml/输出**

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<root>
    <name><![CDATA[<h1>kshitij</h1>]]></name>
    <surname><![CDATA[<h1>solanki</h1>]]></surname>
    <id><![CDATA[0]]></id>
</root> 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-01-07T11:07:12.400

**请注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/#moxy)负责人，也是[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

如果您使用 MOXy 作为您的 JAXB (JSR-222) 提供程序，那么您可以将`@XmlCDATA`扩展用于您的用例。

**根**

`@XmlCDATA`注释用于指示您希望将字段/属性的内容包装在 CDATA 部分中。`@XmlCDATA`注释可以与 结合使用`@XmlElement`。

```
package forum14193944;

import javax.xml.bind.annotation.*;
import org.eclipse.persistence.oxm.annotations.XmlCDATA;

@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class Root {

    @XmlCDATA
    private String name;

    @XmlCDATA
    private String surname;

    @XmlCDATA
    private String id;

} 
```

**jaxb.properties**

要将 MOXy 用作您的 JAXB 提供程序，您需要添加以`jaxb.properties`以下条目命名的文件。

```
javax.xml.bind.context.factory=org.eclipse.persistence.jaxb.JAXBContextFactory 
```

**演示**

下面是一些演示代码，以证明一切正常。

```
package forum14193944;

import java.io.File;
import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Root.class);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        File xml = new File("src/forum14193944/input.xml");
        Root root = (Root) unmarshaller.unmarshal(xml);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(root, System.out);
    }

} 
```

**输入.xml/输出**

下面是运行演示代码的输入和输出。

```
<?xml version="1.0" encoding="UTF-8"?>
<root>
   <name><![CDATA[<h1>kshitij</h1>]]></name>
   <surname><![CDATA[<h1>solanki</h1>]]></surname>
   <id><![CDATA[0]]></id>
</root> 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2010/07/cdata-cdata-run-run-data-run.html](http://blog.bdoughan.com/2010/07/cdata-cdata-run-run-data-run.html)
*   [http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html](http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-12-28T01:18:09.290

很抱歉挖掘了这个问题，并发布了一个新的答案（我的代表还不够高，无法发表评论......）。我遇到了同样的问题，我尝试了 Blaise Doughan 的答案，但从我的测试来看，要么它不涵盖所有情况，要么我在某处做错了什么。

```
 marshaller.setProperty(CharacterEscapeHandler.class.getName(),
                    new CharacterEscapeHandler() {
                        @Override
                        public void escape(char[] ac, int i, int j, boolean flag,
                                Writer writer) throws IOException {
                            writer.write(ac, i, j);
                        }
                    }); 

```

从我的测试中，无论您是否`@XmlJavaTypeAdapter(AdapterCDATA.class)`在属性上使用注释，此代码都会删除所有转义...

为了解决这个问题，我实现了以下内容`CharacterEscapeHandler`：

```
    公共类 CDataAwareUtfEncodedXmlCharacterEscapeHandler 实现 CharacterEscapeHandler {

        private static final char[] cDataPrefix = "<![CDATA[".toCharArray();
        private static final char[] cDataSuffix = "]]>".toCharArray();

        公共静态最终 CDataAwareUtfEncodedXmlCharacterEscapeHandler 实例 = new CDataAwareUtfEncodedXmlCharacterEscapeHandler();

        私人 CDataAwareUtfEncodedXmlCharacterEscapeHandler() {
        }

        @覆盖
        public void escape(char[] ch, int start, int length, boolean isAttVal, Writer out) 抛出 IOException {
            布尔 isCData = 长度 > cDataPrefix.length + cDataSuffix.length；
            如果（isCData）{
                for (int i = 0, j = start; i < cDataPrefix.length; ++i, ++j) {
                    if (cDataPrefix[i] != ch[j]) {
                        isCData = 假；
                        休息;
                    }
                }
                如果（isCData）{
                    for (int i = cDataSuffix.length - 1, j = start + length - 1; i >= 0; --i, --j) {
                        if (cDataSuffix[i] != ch[j]) {
                            isCData = 假；
                            休息;
                        }
                    }
                }
            }
            如果（isCData）{
                out.write(ch, start, length);
            } 别的 {
                MinimumEscapeHandler.theInstance.escape(ch, start, length, isAttVal, out);
            }
        }
    }

```

如果您的编码不是 UTF*，您可能不想调用 MinimumEscapeHandler，而是调用 NioEscapeHandler 甚至 DumbEscapeHandler。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-15T19:49:26.877

```
 @Test
    public void t() throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Root.class);
        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        Root root = new Root();
        root.name = "<p>Jorge & Mary</p>";
        marshaller.marshal(root, System.out);
    }
    @XmlRootElement
    @XmlAccessorType(XmlAccessType.FIELD)
    public static class Root {
        @XmlCDATA
        private String name;
    }
    /* WHAT I SEE IN THE CONSOLE
     * 
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<root>
    <name>&lt;p&gt;Jorge &amp; Mary&lt;/p&gt;</name>
</root>
     */ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-01T17:54:15.910

com.sun.internal 不适用于 play2，但可以

```
private static String marshal(YOurCLass xml){
    try{
        StringWriter stringWritter = new StringWriter();
        Marshaller marshaller = JAXBContext.newInstance(YourCLass.class).createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.setProperty(Marshaller.JAXB_ENCODING, "ISO-8859-1");
        marshaller.marshal(xml, stringWritter);
        return stringWritter.toString().replaceAll("&lt;", "<").replaceAll("&gt;", ">");
    }
    catch(JAXBException e){
        throw new RuntimeException(e);
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-02-28T09:52:35.913

我登陆此页面试图找到类似问题的解决方案，我找到了另一种解决此问题的方法。解决此问题的一种方法是将 XML 作为 SAX2 事件发送到处理程序，然后在处理程序中编写逻辑以将 CDATA 标记添加到 XML。这种方法不需要添加任何注释。在从 XSD 生成要编组的类的情况下很有用。

假设您在从 XSD 生成的类中有一个要编组的字符串字段，并且该字符串字段包含要放入 CDATA 标记内的特殊字符。

```
@XmlRootElement
public class TestingCDATA{
    public String xmlContent;

} 
```

我们将从搜索一个合适的类开始，它的方法可以在我们的内容处理程序中被覆盖。一个这样的类是 com.sun.xml.txw2.output 包中的 XMLWriter，它在 jdk 1.7 和 1.8 中可用

```
import com.sun.xml.txw2.output.XMLWriter;
import org.xml.sax.SAXException;

import java.io.IOException;
import java.io.Writer;
import java.util.regex.Pattern;

public class CDATAContentHandler extends XMLWriter {
    public CDATAContentHandler(Writer writer, String encoding) throws IOException {
        super(writer, encoding);
    }

    // see http://www.w3.org/TR/xml/#syntax
    private static final Pattern XML_CHARS = Pattern.compile("[<>&]");

    public void characters(char[] ch, int start, int length) throws SAXException {
        boolean useCData = XML_CHARS.matcher(new String(ch, start, length)).find();
        if (useCData) {
            super.startCDATA();
        }
        super.characters(ch, start, length);
        if (useCData) {
            super.endCDATA();
        }
    }
} 
```

我们正在重写 characters 方法，使用正则表达式来检查是否包含任何特殊字符。如果找到它们，那么我们在它们周围放置 CDATA 标记。在这种情况下，XMLWriter 负责添加 CDATA 标记。

我们将使用以下代码进行编组：

```
public String addCDATAToXML(TestingCDATA request) throws FormatException {
    try {
        JAXBContext jaxbContext = JAXBContext.newInstance(TestingCDATA.class);
        Marshaller jaxbMarshaller = jaxbContext.createMarshaller();
        StringWriter sw = new StringWriter();
        CDATAContentHandler cDataContentHandler = new CDATAContentHandler(sw, "UTF-8");
        jaxbMarshaller.marshal(request, cDataContentHandler);
        return sw.toString();
    } catch (JAXBException | IOException e) {
        throw new FormatException("Unable to add CDATA for request", e);
    }
} 
```

如果我们按如下所述传递要编组的请求，这将编组对象并返回 XML。

```
TestingCDATA request=new TestingCDATA();
request.xmlContent="<?xml>";

System.out.println(addCDATAToXML(request)); // Would return the following String

Output- 

<?xml version="1.0" encoding="UTF-8"?>
<testingCDATA>
<xmlContent><![CDATA[<?xml>]]></xmlContent>
</testingCDATA> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-01-27T14:41:16.217

除了@bdoughan 的回答。支持 CDATA 的字符转义处理程序

```
import com.sun.xml.bind.marshaller.CharacterEscapeHandler;

import java.io.IOException;
import java.io.Writer;

/**
 * This class is a modern version of JAXB MinimumEscapeHandler with CDATA support
 *
 * @author me
 * @see com.sun.xml.bind.marshaller.MinimumEscapeHandler
 */
public class CdataEscapeHandler implements CharacterEscapeHandler {

    private CdataEscapeHandler() {
    }  // no instanciation please

    public static final CharacterEscapeHandler theInstance = new CdataEscapeHandler();

    @Override
    public void escape(char[] ch, int start, int length, boolean isAttVal, Writer out) throws IOException {
        // avoid calling the Writerwrite method too much by assuming
        // that the escaping occurs rarely.
        // profiling revealed that this is faster than the naive code.
        int limit = start + length;
        for (int i = start; i < limit; i++) {
            if (!isAttVal
                    && i <= limit - 12
                    && ch[i] == '<'
                    && ch[i + 1] == '!'
                    && ch[i + 2] == '['
                    && ch[i + 3] == 'C'
                    && ch[i + 4] == 'D'
                    && ch[i + 5] == 'A'
                    && ch[i + 6] == 'T'
                    && ch[i + 7] == 'A'
                    && ch[i + 8] == '[') {
                int cdataEnd = i + 8;
                for (int k = i + 9; k < limit - 2; k++) {
                    if (ch[k] == ']'
                            && ch[k + 1] == ']'
                            && ch[k + 2] == '>') {
                        cdataEnd = k + 2;
                        break;
                    }
                }
                out.write(ch, start, cdataEnd + 1);
                if (cdataEnd == limit - 1) return;
                start = i = cdataEnd + 1;
            }
            char c = ch[i];
            if (c == '&' || c == '<' || c == '>' || c == '\r' || (c == '\"' && isAttVal)) {
                if (i != start)
                    out.write(ch, start, i - start);
                start = i + 1;
                switch (ch[i]) {
                    case '&':
                        out.write("&amp;");
                        break;
                    case '<':
                        out.write("&lt;");
                        break;
                    case '>':
                        out.write("&gt;");
                        break;
                    case '\"':
                        out.write("&quot;");
                        break;
                }
            }
        }

        if (start != limit)
            out.write(ch, start, limit - start);
    }
}
```

# physics - 物理 - 弹丸获得发射角度以击中所需位置？

> ID：14193945
> 
> 赞同：2
> 
> 时间：2013-01-07T10:22:56.230
> 
> 标签：physics, projectile

我正在游戏中编写一个简单的球弹。更新几乎看起来像：

```
velocity += gravity;
velocity *=0.9;
pos += vel; 
```

有没有办法设置发射的角度和功率以击中鼠标指定的点？像 peggle，http://youtu.be/4KbNiWsgJck?t= [45s](http://youtu.be/4KbNiWsgJck?t=45s)

我知道有一个我几年前使用过的解决方案，但我找不到它。我相信它把我的更新变成了一个二次公式，或者推导出来什么的。它有两个用二次方程求解的解。

ps-希望这可以是 3D，但我也可以使用 2D 解决方案，因为我的曲线是 2D

有什么帮助吗？谢谢，丹

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T16:26:44.177

是的，你可以这样做。如果你可以改变角度和速度，你就会拥有比你需要的更多的可变性，所以你必须找到一组合理的参数，这并不难。基本方程是：

x = x [0] + t*v [0x]
y = y [0] + v [0y] t + (1/2)a [y] t ²

在这里，x 和 y 将是您要击中的点，而 t 将是您击中它们的时间。 *t*不会出现在最终解决方案中，但您将使用它作为中介来计算您想要的值。

[然后，基本上，为 v 0x]选择一个合理的值。使用 x 方程，找出击中目标时的*t 。*然后将该值代入 y 方程，求解 v [0y]。然后，这将为您提供一对 v [0x]和 v [0y]值，它们可以击中目标。

# java - if条件java出错

> ID：14193951
> 
> 赞同：4
> 
> 时间：2013-01-07T10:23:21.080
> 
> 标签：java

```
public class SomeClass{

    public static void main (String[] args){
        if(true) int a = 0;// this is being considered as an error 
        if(true){
            int b =0;
        }//this works pretty fine
    }
}//end class 
```

在上面的类中，首先 if 语句显示编译错误

```
Exception in thread "main" java.lang.Error: Unresolved compilation problems: 
    Syntax error on token "int", delete this token
    a cannot be resolved to a variable 
```

但是第二个 if 语句工作正常。我只是无法自己弄清楚。我知道在单个语句中声明变量是没有用的`if`。这两种说法有何不同，有人可以解释一下。对不起，如果问题真的很简单。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-07T10:25:21.043

要定义`int a`你需要花括号的范围。这就是为什么你得到编译器错误

```
if(true) int a = 0; 
```

虽然这有效：

```
if(true){
    int b =0;
} 
```

有关if 语句，请参阅[JLS §14.9 ，](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.9)

```
IfThenStatement:
    if ( Expression ) Statement 
```

在 中时`if(true) int a = 0;`，`int a = 0`是`LocalVariableDeclarationStatement`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-07T10:36:58.927

它在 java 语言规范中指定。被`IfThenStatement`指定为

> `if ( Expression ) Statement`

`int a = 0;`不是语句，而是一个`LocalVariableDeclarationStatement`（*不是*的子类型`Statement`）。但是 a`Block`是 a`Statement`并且 a`LocalVariableDeclarationStatement`是块的合法内容。

```
 if (true) int a = 0;
           ^--------^    LocalVariableDeclarationStatement, not allowed here!

 if (true) {int a = 0;}
           ^----------^  Statement (Block), allowed. 
```

**参考**

*   [局部变量声明语句](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.4)
*   [声明](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.5)
*   [如果语句](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.9)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-07T10:34:13.473

从 java 语言规范 §14.2 中，您可以看到*LocalVariableDeclaration*不是*Statement*，因此只能出现在*BlockStatement*中：

```
BlockStatement:
    LocalVariableDeclarationStatement
    ClassDeclaration
    Statement 
```

参考：[http ://docs.oracle.com/javase/specs/jls/se7/jls7.pdf](http://docs.oracle.com/javase/specs/jls/se7/jls7.pdf)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T10:26:15.040

单独定义一个变量。并在 If 中分配您想要的值。如果你这样做，它只会是 if 块内的一个变量。但是既然你有一行 if block 它真的没有意义。

# nginx - 上游过早关闭连接，同时从上游读取响应标头，客户端

> ID：14193954
> 
> 赞同：6
> 
> 时间：2013-01-07T10:23:41.493
> 
> 标签：nginx, memcached, fastcgi, freebsd, spawn-fcgi

`/var/log/messages`我在我的 FreeBSD 机器上收到此错误。我正在使用和`nginx`启用模块。`spawn-fcgi``memcache``apc`

```
upstream prematurely closed connection while reading response header from upstream, 
client HTTP/1.1", upstream: "fastcgi://unix:/tmp/fcgi.sock:", host: 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T02:24:41.937

它与PHP的版本有关。我使用了最新版本的 nginx 和稍微旧版本的 PHP。该问题已通过将 PHP 更新到最新版本来解决。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-22T21:46:03.697

我在 unicorn + nginx 上遇到过类似的错误。

最终结果是，由于防火墙配置错误，独角兽超时，死了，让 NGINX 不知道该做什么（nginx 会抛出 503）。

一旦端口打开，我的问题就解决了。

我还看到这种情况发生在需要很长时间（比我的 30 秒独角兽超时时间）的 API 调用中。我最终将它运送到后台工作，所以独角兽没有超时。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-21T22:16:18.283

在使用 EC2 + Amazon RDS 数据库实例时，我遇到了类似的问题，即 Nginx 与 RoR 应用程序超时。

该问题已通过编辑我的 RDS 实例的安全组以允许 EC2 的 IP 通过端口 5432 解决。只需编辑安全组的规则，为您与 RDS 实例通信的端口添加自定义规则，并将 EC2 服务器的白名单私有 IP 地址。之后立即工作！

# html - 绘制弧线将线性渐变html5画布

> ID：14193956
> 
> 赞同：7
> 
> 时间：2013-01-07T10:23:42.673
> 
> 标签：html, canvas

我在画布上画了一个圆弧，是否可以给它三种颜色的线性渐变？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-07T12:23:22.167

是的，有可能！Javascript 中有一个名为的方法，`createLinearGradient`它获取画布上下文的源并应用由`sx`, `sy`, `dx`,`dy`坐标定义的渐变。前两个选项定义起始坐标，后两个选项定义结束坐标。

```
var gradient = context.createLinearGradient(sx, sy, dx, dy); 
```

调用此方法后，您可以通过调用该方法将渐变颜色应用于画布`colorStop`：

```
gradient.addColorStop(0,   '#f00'); // red
gradient.addColorStop(0.5, '#ff0'); // yellow
gradient.addColorStop(1,   '#00f'); // blue 
```

这些是在画布上实现渐变的基本要素。如果您需要圆形渐变，下一步将是计算圆形颜色渐变位置。这可以通过以下公式来满足：

```
var applyAngle = function (point, angle, distance) {
    return {
          x : point.x + (Math.cos(angle) * distance),
          y : point.y + (Math.sin(angle) * distance)
    };
}; 
```

然后将结果`x`和`y`位置插入到 createLinearGradient 方法中，这将创建一个漂亮的圆形渐变。当然，你需要使用`arc`方法使其成为圆形。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2018-08-07T16:20:59.447

我看不到 OP 发布的示例（链接断开？），但我有一个*非常*相似的问题，这里的答案都没有帮助我。

所以，这就是我想做的：

![](../Images/f3d29e5c6f0c96cd1ca6cbebc22196d0.png)

我就是这样做的：

```
var center = { "x": 115, "y": 115 };
var radius = 100;
var quadrants = [
	{
    	"angleStart": Math.PI * -0.5,
        "angleEnd": 0,
    	"x1": center.x,
        "y1": center.y - radius,
        "x2": center.x + radius,
        "y2": center.y,
        "colorStops": [
        	{ "stop": 0, "color": "blue" },
            { "stop": 1, "color": "green" }
        ]
    },
	{
    	"angleStart": 0,
        "angleEnd": Math.PI * 0.5,
    	"x1": center.x + radius,
        "y1": center.y,
        "x2": center.x,
        "y2": center.y + radius,
        "colorStops": [
        	{ "stop": 0, "color": "green" },
            { "stop": 1, "color": "yellow" }
        ]
    },
	{
    	"angleStart": Math.PI * 0.5,
        "angleEnd": Math.PI,
    	"x1": center.x,
        "y1": center.y + radius,
        "x2": center.x - radius,
        "y2": center.y,
        "colorStops": [
        	{ "stop": 0, "color": "yellow" },
            { "stop": 1, "color": "red" }
        ]
    },
	{
    	"angleStart": Math.PI,
        "angleEnd": Math.PI * 1.5,
    	"x1": center.x - radius,
        "y1": center.y,
        "x2": center.x,
        "y2": center.y - radius,
        "colorStops": [
        	{ "stop": 0, "color": "red" },
            { "stop": 1, "color": "black" }
        ]
    }    
];

var c = document.getElementById("myCanvas");
var ctx = c.getContext("2d");
// Draw arc quadrants.
for (var i = 0; i < quadrants.length; ++i) {
  var quad = quadrants[i];
  var grad = ctx.createLinearGradient(quad.x1, quad.y1, quad.x2, quad.y2);
  // Color stops.
  for (var j = 0; j < quad.colorStops.length; ++j) {
    var cs = quad.colorStops[j]; 
    grad.addColorStop(cs.stop, cs.color);
  }
  // Draw arc.
  ctx.beginPath();
  ctx.arc(center.x, center.y, radius, quad.angleStart, quad.angleEnd);
  ctx.strokeStyle = grad;
  ctx.lineWidth = 30;
  ctx.stroke();
}
```

```
<!DOCTYPE html>
<html>
<body>

<canvas id="myCanvas" width="230" height="230" style="border:1px solid #d3d3d3;">
Your browser does not support the HTML5 canvas tag.</canvas>
<p><strong>Note:</strong> The canvas tag is not supported in Internet 
Explorer 8 and earlier versions.</p>

</body>
</html>
```

以下是我在实施之前的想法草案：

```
Linear gradient distribution on arc:

               ***********
          ***       |       ***
       **           |           **
     **             |             **
    *     _         |               *
  **       /|       |      \         **
 **       /         |      _\|        **
 *                  |                  *
*    4th Quadrant   |   1st Quadrant    *
*                   |                   *
*-------------------|-------------------*
*                   |                   *
*    3rd Quadrant   |   2nd Quadrant    *
 *          _       |                  *
 **       |\        |         /       **
  **        \       |       |/_      **
    *               |               *
     **             |             **
       **           |           **
          ***       |       ***
               *********** 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-16T05:00:00.223

干得好。

```
var canvas = document.getElementById('circle');
var ctx = canvas.getContext('2d');

var x = 250,
y = 250,
radius = 200,
// 0deg   - 1.5 * Pi,
// 90deg  - 0   * Pi, 
// 180deg - 0.5 * Pi, 
// 270deg - 1   * Pi
angleStart = 1.5 * Math.PI,
angleEnd = 0.7 * Math.PI;

//Create gradient
var gradient = ctx.createLinearGradient(0,500,0, 0);
gradient.addColorStop(0, '#000');
gradient.addColorStop(1, '#40d6a5');

//Draw circle
ctx.beginPath();
ctx.arc(x, x, radius, 0, 2*Math.PI, false);
ctx.lineWidth = 30;
ctx.strokeStyle = 'rgba(255,255,255, 0.2)'
ctx.stroke();

//Draw arc
ctx.beginPath();
ctx.arc(x, y, radius, angleStart, angleEnd);
ctx.strokeStyle = gradient;
ctx.lineWidth = 30;
ctx.lineCap = 'round';
ctx.stroke(); 
```

不是我的代码，我在下面的链接中找到了它。

[http://codepen.io/alsheuski/pen/eJNwNX](http://codepen.io/alsheuski/pen/eJNwNX)

或者这个

[http://jsfiddle.net/simonsarris/Msdkv/](http://jsfiddle.net/simonsarris/Msdkv/)

# sql - 将 Char 字段转换为 DateTime，但仅当字段包含格式为 dd/mm/yyyy 的日期时 - Sql Server 2005

> ID：14193960
> 
> 赞同：0
> 
> 时间：2013-01-07T10:23:45.703
> 
> 标签：sql, sql-server-2005, datetime

我有一张桌子：

`Comments (Id int identity primary key, PersonId Int(6), Comment1 Char(60))`

该字段应该**只**`Comment1`包含非必要的评论，但是该字段已用于存储非必要的评论以及 dd/mm/yyyy 格式的重要日期。

 **因此，例如，表中的数据如下所示：

```
* Id * PersonId *    Comment1     *
|  1 |        5 | Likes Chocolate |
|  2 |        5 | 19/05/1992      |
|  3 |        5 | 23/07/1999      |
|  4 |        5 | 05/06/1994      |
|  5 |        8 | 07/12/1998      |
|  6 |        8 | Is very Tall    |
|  7 |        8 | 24/05/1995      |
|  8 |        8 | 16/10/2002      |
|  9 |       11 | 13/11/2005      |
| 10 |       11 | 21/09/2000      |
| 11 |       11 | 8/99/100/23-1   | 
```

## [SQL小提琴](http://sqlfiddle.com/#!3/5b621/4)

他们现在需要为每个人找到包含该`Comment1`字段中最近日期的一行。

首先，我尝试使用以下查询删除那些不包含有效日期的行：

```
Select 
  Id,
  PersonId,
  Case 
    When IsDate(Comment1) = 1 
    Then convert(date, cast(rtrim(Comment1) as nvarchar), 103)
    Else NULL
  End
From Comments 
```

但这只会让我回来：

```
* Id * PersonId *    Comment1     *
|  4 |        5 | 1994-06-05      |
|  5 |        8 | 1998-12-07      | 
```

其他行是`(null)`. 这可以在 SQL Fiddle 链接中看到。

有人可以告诉我哪里出错了吗？

Once this select statement returns what I require I expect I should be able to return the most recent date per `PersonId` using an aggregate function.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T10:33:28.973

Use [SET DATEFORMAT](http://msdn.microsoft.com/en-us/library/ms189491.aspx)

```
set dateformat dmy

Select 
  Id,
  PersonId,
  Case 
    When IsDate(Comment1) = 1 
    Then convert(date, cast(rtrim(Comment1) as nvarchar), 103)
    Else NULL 
  End
From Comments 
```

[SQL Fiddle](http://sqlfiddle.com/#!3/5b621/5)**

# selenium-webdriver - 如何测试文本字段中的占位符

> ID：14193962
> 
> 赞同：1
> 
> 时间：2013-01-07T10:23:50.253
> 
> 标签：selenium-webdriver, robotframework

我想使用机器人框架验证文本字段中存在的占位符文本。

![用户名](../Images/5f67ffac02bb5cadad0b0f19ed954b7e.png)

我使用了不同的 Selenium2Library 关键字，但它们都没有完全符合我的要求。

有没有人有办法从我的测试中获得这个功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T10:25:33.630

您可以运行命令`getAttribute(input_field_locator@placeholder)`。这将返回您想要的文本，然后您可以对其进行断言。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T16:33:32.240

一旦您设法从 REPL 访问您正在寻找的功能，您可能会发现它无法通过机器人框架访问。您可以通过为 Selenium2Library 创建一个包装器来公开新关键字，该包装器使用额外的功能对其进行扩展 - 例如，请参阅教程中的[https://github.com/alistair-broomhead/scalable-robotframework-example/blob/master/TestLibraries/Selenium2Custom](https://github.com/alistair-broomhead/scalable-robotframework-example/blob/master/TestLibraries/Selenium2Custom)我正在努力。

如果您改为导入此类（获取文本和获取 HTML，这对验证很有用），则此示例只是在 Selenium2Library 中的关键字之上添加两个关键字到robotframework：

```
from Selenium2Library import Selenium2Library
class Selenium2Custom(Selenium2Library):
    """
    Custom wrapper for robotframework Selenium2Library to add extra functionality
    """
    def get_text(self, locator):
        """
        Returns the text of element identified by `locator`.

        See `introduction` for details about locating elements.
        """
        return self._get_text(locator)
    def get_html(self, id=None):
        """
        Get the current document as an XML accessor object.
        """
        from lxml import html
        src = self.get_source().encode('ascii', 'xmlcharrefreplace')
        page = html.fromstring(src)
        element = page.get_element_by_id(id) if id is not None else page
        return html.tostring(element) 
```

因此，做这样的事情是微不足道的：

```
from Selenium2Library import Selenium2Library
class Selenium2Custom(Selenium2Library):
    """
    Custom wrapper for robotframework Selenium2Library to add extra functionality
    """
    def get_placeholder(self, locator):
        """
        Returns the placeholder text of element identified by `locator`.
        """
        element = self._element_find(locator, True, False)
        return element.get_attribute("@placeholder") 
```

现在我不知道这肯定对你有用，但对我来说它是这样工作的：

```
Python 2.7.3 (v2.7.3:70274d53c1dd, Apr  9 2012, 20:52:43) 
[GCC 4.2.1 (Apple Inc. build 5666) (dot 3)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> from Selenium2Library import Selenium2Library
>>> def get_placeholder(self, locator):
...     element = self._element_find(locator, True, False)
...     return element.get_attribute("placeholder")
... 
>>> Selenium2Library.get_placeholder = get_placeholder
>>> session = Selenium2Library()
>>> session.open_browser("http://www.wikipedia.org/wiki/Main_Page",
                         remote_url="http://127.0.0.1:4444/wd/hub")
1
>>> session.get_placeholder("search")
u'Search'
>>> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-24T11:14:02.530

我还想检查占位符文本，来到这里阅读评论后，我得到了一些线索。现在，棘手的部分是如何在机器人框架中做到这一点，在做了一些数学之后，我能够很容易地做到这一点。这是我的两行答案：

```
${webelement}=  Get WebElement  locator

${placeholder}=  Call Method  ${webelement}  get_attribute  placeholder 
```

# android - Android 列表包装内容

> ID：14193964
> 
> 赞同：0
> 
> 时间：2013-01-07T10:23:52.480
> 
> 标签：android, android-layout, android-listview, android-linearlayout

我正在动态创建一些`TextView`, `ImageView`,`HtmlView`并将其添加到以下布局中。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/parent"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical">

    <LinearLayout
        android:id="@+id/ad_space"
        android:layout_width="fill_parent"
        android:layout_height="40dp"
        android:background="@drawable/navigation_bar"
        android:visibility="gone" >
    </LinearLayout>

    <ViewFlipper
        android:id="@+id/viewflipper"
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight="1" >

        <ScrollView
            android:id="@+id/quiz_scroll_view"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" >

            <LinearLayout
                android:id="@+id/quizView"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical" >

                <LinearLayout
                    android:id="@+id/answer_layout"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:orientation="vertical" />
            </LinearLayout>
        </ScrollView>

        <ScrollView
            android:id="@+id/quiz_scroll_viewTwo"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" >

            <LinearLayout
                android:id="@+id/quizViewTwo"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical" >

                <LinearLayout
                    android:id="@+id/answer_layoutTwo"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:orientation="vertical" />
            </LinearLayout>
        </ScrollView>
    </ViewFlipper>
</LinearLayout> 
```

我在`QuizView`运行时添加了一些与问题相关的视图，对于答案，我正在创建一个列表视图运行时并添加到`answer_layout`. 我用来根据情况`BaseAdapter`创建运行时。`ListView`

但我`ListView`没有显示所有内容，它只显示第一个单元格。

我有这样的添加`ListView`。

```
ListView ansList = new ListView(Test.this);
ansList.setAdapter(adapter);
ansList.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT));
ansCellLayout.addView(ansList); 
```

它只显示一个列表单元格。

如果我`int`为高度设置了一些值，那么它的显示所有列表包含。

```
ansList.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.MATCH_PARENT, 600)); 
```

但我不能硬编码列表视图高度，因为我的内容是动态的。

`WRAP_CONTENT`在这种情况下 如何制作列表视图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T12:10:44.177

根据[此](http://www.youtube.com/watch?v=wDBM6wVEO70)Google I/O 2010 视频中的 Android 开发人员的说法，无法将 ListView 的高度设置为 wrap_content。如果是 ，则考虑前三个子元素的高度。其他的根本不包括在内。

尝试在运行时设置 ListView 的高度。或者甚至更好地将其设置为 FILL_PARENT。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-07T10:33:14.170

从文档 a`ListView`是

> 在垂直滚动列表中显示项目的视图

所以它不应该与它一起使用，`WRAP_CONTENT`而是在它里面有一个固定的高度和滚动内容。

`LinearLayout`为此，您最好使用垂直。

# delphi - 如何判断 TJvDockServer 表单是取消固定还是固定？

> ID：14193967
> 
> 赞同：1
> 
> 时间：2013-01-07T10:23:57.667
> 
> 标签：delphi, delphi-2010, jvcl

我只是想知道是否有人知道如何确定 TJvDockServer 表单是否容易被固定或取消固定。我能够这样做的唯一方法是通过...检查父表单是否是 TJvDockVSPopupPanel...

```
ancestor := GetAncestors(Self, 3);
if (ancestor is TJvDockTabHostForm) then
    if ancestor.Parent <> nil then
    begin
        if ancestor.Parent is TJvDockVSPopupPanel then
        begin
            // Code here
        end;  
    end; 
```

和 getAncestors 是...

```
function GetAncestors(Control : TControl; AncestorLevel : integer) : TWinControl;
begin
    if (Control = nil) or (AncestorLevel = 0) then
        if Control is TWinControl then
            result := (Control as TWinControl)
        else
            result := nil // Must be a TWinControl to be a valid parent.
    else
        result := GetAncestors(Control.Parent, AncestorLevel - 1);
end; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T15:54:54.093

我会先检查 DockState，如下所示：

```
function IsUnpinned(aForm:TMyFormClassName):Boolean;
begin
  result := false;
 if Assigned(aForm) then
    if aForm.Client.DockState = JvDockState_Docking then
    begin
      // it's docked, so now try to determine if it's pinned (default state,
      // returns false) or unpinned (collapsed/hidden) and if unpinned, return true.
      if aForm.Client.DockStyle is TJvDockVSNetStyle then
      begin
        if Assigned(aForm.Parent) and (aForm.Parent is TJvDockVSPopupPanel) then
        begin
          result := true;
        end;
      end;  
    end;
end; 
```

未固定意味着停靠样式支持双模式（单击它打开，单击它关闭）状态从固定（停靠时的默认状态）变为未固定（但仍停靠）状态，除了一个小的铭牌标记之外完全隐藏.

我编写的上述代码不会通过父级递归，因此它无法处理您的代码试图处理它的情况，即表单是选项卡式笔记本的一部分，然后隐藏在 JvDockVSPopupPanel 中。（制作三页，然后通过取消固定将它们全部隐藏）。在这种情况下，您需要使用祖先方法，但我至少仍会将检查添加到 `TJvDockClient.DockState`您使用的任何方法中。

但是，您似乎对 3 级递归进行硬编码的方法可能仅适用于您的确切控件集，因此我会考虑一般重写它，通过说“如果 aForm 在最后 X 代父母中的父母是TJvDockVSPopupPanel，则返回 true，否则返回 false”。

# iphone - 如何使用 iphone .xib 文件创建新文件？

> ID：14193968
> 
> 赞同：0
> 
> 时间：2013-01-07T10:24:01.367
> 
> 标签：iphone, ios, user-interface

在 Xcode 中，当我创建一个新文件时，我可以选择包含一个 iPad 大小的 .xib 文件。如何获得 iPhone 大小的 .xib？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T10:35:27.757

只需在创建新文件时取消选中“Targeted for iPad”选项即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T10:26:44.160

它非常简单

右键单击您的 iPad xib，在 Finder 中显示 -> 将该文件保存在其他系统路径中 -> 通过从文件名中删除 -iPad 来重命名。

现在，将该 xib 拖到您的项目中，如果纵向方向，将您的 xib 调整为 320*460。

希望对你有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T11:18:09.657

我的猜测是，当您创建项目时，您选择了“设备：iPad”。将其更改为 Universal，然后您可以创建 iPad 和 iPhone xib 文件。

# networking - 什么样的光纤收发器是单模光纤并支持802.1Q？

> ID：14193969
> 
> 赞同：0
> 
> 时间：2013-01-07T10:24:05.313
> 
> 标签：networking

我想知道什么是单模光纤收发器，单模和多模光纤的区别？我想对这两者有清晰的概念。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T10:01:02.650

所有类型的光纤收发器（在第 1 层工作）都支持 802.1Q（用于虚拟 LAN 的第 2 层标记）。这与询问 '5 类电缆是否支持 TCP/IP 一样无关紧要

单模光纤支持在与光纤轴紧密对齐的光线上传输——这就是单模。传输的额定距离通常为 20 公里，但需要昂贵的光学器件和校准，以确保传输激光器与光纤耦合。光纤中的轻微损坏或缺陷可以完全切断单条光线的传输

单模光纤（主要是g.652光纤）光缆以其低廉的价格和高性能成为当前光通信传输的主流。光纤通信领域的新技术层出不穷，无论是远距离、大容量，还是商用，无一不是为单模光纤而开发的。

多模光缆是最早商用的光缆，由于存在色散严重、衰减大、可用带宽窄、成本问题，已退出主战场平台的光纤网络电信运营商。只是为了保持智能建筑光纤布线的市场份额。当多模光缆进行视频传输时，只能满足最远的3~5km左右的传输距离，并且对视频复用器的带宽（模拟调制）和传输速率（数字）有很大的限制，一般适用于近距离、小容量、简单的应用场合。尤其大大限制了非压缩数字光复用器在传输距离和容量上的应用。

多模光纤支持在大致对齐的光线上传输，并允许沿着光纤轴不完全对齐的光线 - 它们可以是直的，沿路径反弹一次、两次、多次。这些是多种模式。

[光纤收发器](http://www.ingellen.com/fiber-optic-transceiver-c-1.html)

# emacs - 在 Org 中删除 DONE 任务的标题

> ID：14193975
> 
> 赞同：6
> 
> 时间：2013-01-07T10:24:31.713
> 
> 标签：emacs, elisp, org-mode

我真的很想在 Org 模式下完成我的 DONE 任务。[按照http://lists.gnu.org/archive/html/emacs-orgmode/2007-03/msg00179.html](http://lists.gnu.org/archive/html/emacs-orgmode/2007-03/msg00179.html)的片段（通过 Sacha Chua 的博客）：

```
(setq org-fontify-done-headline t)
(custom-set-faces
 '(org-done ((t (:foreground "PaleGreen"
                 :weight normal
                 :strike-through t))))
 '(org-headline-done
            ((((class color) (min-colors 16) (background dark))
               (:foreground "LightSalmon" :strike-through t))))) 
```

但是，这对我不起作用（颜色已更改但没有删除线）。我*认为*这可能是由于我使用的日晒主题：[https ://github.com/sellout/emacs-color-theme-solarized](https://github.com/sellout/emacs-color-theme-solarized)

不幸的是，我自己无法修复它...如果我查看`customize-face`org-done 删除线的值“打开”，但没有视觉效果。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T02:49:45.927

如果您使用的是浅色背景，则需要修改片段，原作者可能使用了深色主题。

关键线是：

```
((class color) (min-colors 16) (background dark)) 
```

您可以替换`(background dark)`为`(background light)`，或者完全删除背景 s-exp 以在深色和浅色主题中工作。

```
((class color) (min-colors 16)) 
```

在`init.el`它上面的 eval-buffer 应该适用于您的轻主题。我用日光照射做了一个快速测试，它可以工作。

# c# - 计算机目录树视图c#

> ID：14193976
> 
> 赞同：0
> 
> 时间：2013-01-07T10:24:32.050
> 
> 标签：c#, winforms, treeview, directory

我想访问我正在使用文件夹浏览器的计算机目录，然后使用所选路径的值来显示 treeeview。谁能告诉我在单击按钮中调用 LISTDIRECTORY 方法时要使用哪些参数。此外，我不知道我在做什么错误的请帮助

```
 private void button2_Click(object sender, EventArgs e)
        {
            tView.Nodes.Clear();

            if (folderBrowser.ShowDialog() == DialogResult.OK)
            {
                string[] folders = Directory.GetDirectories(folderBrowser.SelectedPath);
                foreach (string path in folders)
                {
                    ListDirectory(tView.Nodes,file.Name);
                }
            }
        }
        private static void ListDirectory(TreeView treeView,string  path)
        {

            var stack = new Stack<TreeNode>();
            var rootDirectory = new DirectoryInfo(path);
            var node = new TreeNode(rootDirectory.Name) { Tag = rootDirectory };
            stack.Push(node);

            while (stack.Count > 0)
            {
                var currentNode = stack.Pop();
                var directoryInfo = (DirectoryInfo)currentNode.Tag;
                foreach (var directory in directoryInfo.GetDirectories())
                {
                    var childDirectoryNode = new TreeNode(directory.Name) { Tag = directory };
                    currentNode.Nodes.Add(childDirectoryNode);
                    stack.Push(childDirectoryNode);
                }
                foreach (var file in directoryInfo.GetFiles())
                    currentNode.Nodes.Add(new TreeNode(file.Name));
            }

            tView.Nodes.Add(node);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T12:05:05.817

使用以下代码而不是您的代码：

```
 private void button2_Click(object sender, EventArgs e)
    { 
      if (folderBrowser.ShowDialog() == DialogResult.OK)
        {
            string strSearchPath=folderBrowserDialog1.SelectedPath;
            GetTree(strSearchPath);
        }
    } 

   void GetTree(string strSearchPath)
        {
            tView.Nodes.Clear();
            SetNode(tView, strSearchPath);
            tView.TopNode.Expand();
        }

        void SetNode(TreeView treeName, string path)
        {
            DirectoryInfo dirInfo = new DirectoryInfo(path);
            TreeNode node = new TreeNode(dirInfo.Name);
            node.Tag = dirInfo;
            GetFolders(dirInfo, node);
            GetFiles(dirInfo, node);
            treeName.Nodes.Add(node);
        }

        void GetFolders(DirectoryInfo d, TreeNode node)
        {    
            try
            {
                DirectoryInfo[] dInfo = d.GetDirectories();    
                if (dInfo.Length > 0)
                {
                    TreeNode treeNode = new TreeNode();
                    foreach (DirectoryInfo driSub in dInfo)
                    {
                        treeNode = node.Nodes.Add(driSub.Name, driSub.Name, 0, 0);
                        GetFiles(driSub, treeNode);
                        GetFolders(driSub, treeNode);
                    }
                }
            }
            catch (Exception ex) { }

        }

        void GetFiles(DirectoryInfo d, TreeNode node)
        {
           //if you want to search .doc or docx file then:
           // var files = d.GetFiles("*.doc*");

            var files = d.GetFiles("*.*");
            FileInfo[] subfileInfo = files.ToArray<FileInfo>();

            if (subfileInfo.Length > 0)
            {
                for (int j = 0; j < subfileInfo.Length; j++)
                {
                   //Checking for Hiddend files
                    bool isHidden = ((File.GetAttributes(subfileInfo[j].FullName) & FileAttributes.Hidden) == FileAttributes.Hidden);
                    if (!isHidden)
                    {                       
                            TreeNode treeNode = new TreeNode();
                            string path = subfileInfo[j].FullName;
                            string name = subfileInfo[j].Name;
                            treeNode = node.Nodes.Add(path, name);                 
                    }
                }
            }
        } 
```

希望这可以帮助你:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T10:32:02.353

或者您必须传递 TreeView 而不是 TreeView.Nodes。或者您可以将参数类型更改为节点，这样您就可以传递节点而不是整个树视图。

```
 ListDirectory(**tView.Nodes**,file.Name);
            }
        }
    }
    private static void ListDirectory(**TreeView treeView**,string  path)
    { 
```

HTH，约翰

# java - 依赖验证函数调用 mockito

> ID：14193979
> 
> 赞同：0
> 
> 时间：2013-01-07T10:24:33.827
> 
> 标签：java, testing, junit, mocking, verify

我想创建单元测试来测试包含另一个对象的类。我为第二个对象创建了一个模拟。

当我测试我的第一个类的方法时，我想验证是否调用了第二个对象的函数。为此，我使用该功能`verify(mock).myfunction();`

我的问题是我的对象 2 的相同函数可以被我的第一个类的几个函数调用。

当我编写测试类时，我逐个编写测试函数，但似乎“时间”没有在测试方法的开头重置。

我不知道我是否清楚，因此，举个例子：

```
public class Main  {
    public Object o = createObject();

    public void function1(){
        o.function();
    }

    public void function2(){
        o.function();
    }

    public Object createObject() {
        return new Object() ;
    }

public class MainTest {
    private static Main main;

    @BeforeClass
    public static void setUp() throws Exception {
        final Object mockO = mock(Object.class);

        main = new Main() {
            @Override
            public Object createObject() {
                return mockO;
            }
            }; 
    }

    @Test
    public void testfunction1(){
        verify(main.world[0], never()).function();
        main.function1();
        verify(main.world[0]).function();
    }

    @Test
    public void testfunction2(){
        verify(main.world[0], never()).function();
        main.function2();
        verify(main.world[0]).function();
    } 
```

如果我测试`testfunction1()`并`testfunction2()`忽略，它的工作。

如果我测试`testfunction2()`并`testfunction1()`忽略，它的工作。

但是如果执行这两个测试，我有一个错误：

```
org.mockito.exceptions.verification.NeverWantedButInvoked:
Object.function();
Never wanted here : 
-> at test.MainTest.testfunction1
but invoked here :
at source.Main.function2 
```

如何独立测试这两个功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T10:29:42.113

将您的`setUp()`方法重命名为其他方法，使其成为非静态方法，并使其成为`@Before`而不是`@BeforeClass`：

```
private Main main;

@Before
public void initMain()
{
    // what you already do
} 
```

`@BeforeClass`方法在类中的所有测试之前运行一次，而`@Before`方法在*每次*测试之前运行一次。

# c# - 如何限制用户双击任何命令按钮

> ID：14193985
> 
> 赞同：0
> 
> 时间：2013-01-07T10:24:54.997
> 
> 标签：c#, winforms, silverlight

我面临的一个问题是限制用户双击命令按钮。它所做的是执行两次在其单击事件中编写的代码。我已经阅读了许多解决方案，我发现这些解决方案无关紧要。他们说，命令按钮应该在单击后禁用，这样用户就不能再进行单击了。当发生错误并且为启用按钮而编写的代码未执行时，这将产生问题。

还有其他方法吗？请建议是否有人有比这更好的选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T10:32:29.250

您可以禁用它，并将所有代码放在`try`, `catch`,`finally`子句中，然后将启用代码放在`finally`.

[读一读。](http://msdn.microsoft.com/en-us/library/dszsf989%28v=vs.71%29.aspx)

这样它应该总是运行，异常与否。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T11:10:58.560

我假设您指的是 WPF，因为 Windows 窗体具有可以忽略的特定双击事件。

不幸的是，WPF 没有区分双击按钮和单击按钮两次。这意味着您必须执行检查以查看第二次点击是否发生得太早，而不是第一次点击。

这可以通过将 DateTime.Now 存储在按钮单击事件处理程序的成员变量中来完成，如果单击发生在上一次单击的太短时间内，只需指示按钮单击事件已处理并返回而不执行任何事物。

# php - 解析 PHP 的 XML 元素

> ID：14193987
> 
> 赞同：-1
> 
> 时间：2013-01-07T10:25:03.807
> 
> 标签：php, xml

嗨，你能帮我解析 XML 元素吗？我正在尝试从 XML 中获取值并将其写入 csv 文件，到目前为止，我可以读取所有内容，但 XML 中的内部元素让我感到困惑，所以如果你能给出解决方法的想法?

我有一个 XML：

```
 <Product>
            <ProductCode>51629AE</ProductCode>
            <Vendor>HEWLETT PACKARD</Vendor>
            <ProductType>Printer Ink Cartridge</ProductType>
            <ProductCategory>Printeri</ProductCategory>
            <ProductDescription>Ink Cartridge HEWLETT PACKARD Black 40ml for HP DJ600/660/670/680/690/DW 600/660/680/690/OJ500/600/700/PSC-370/380/FAX 910 (650pages)</ProductDescription>
            <Image>https://www.it4profit.com/catalogimg/wic/1/51629AE</Image>
            <ProductCard>https://content.it4profit.com/itshop/itemcard_cs.jsp?ITEM=50409104044691930&amp;THEME=asbis&amp;LANG=lv</ProductCard>
            <AttrList>
              <element Name="Ink Color" Value="Black"/>
              <element Name="Ink Capacity" Value="40 ml"/>
              <element Name="Compliance" Value="HP DJ600/660/670/680/690/DW 600/660/680/690/OJ500/600/700/PSC-370/380/FAX 910"/>
              <element Name="Estimated Maximum Cartridge Life" Value="650 pages"/>
              <element Name="Number of Ink Colors" Value="1"/>
              <element Name="Typical Page Coverage" Value="5 %"/>
              <element Name="Warranty Products returnable" Value="Yes"/>
              <element Name="Pack Weight Brutto (kg)" Value="0.1 kg"/>
              <element Name="Pieces in pack" Value="1"/>
            </AttrList>
            <MarketingInfo>
              <element>The HP no. 29 black inkjet print cartridge is ideal for business or home users who want professional-quality printouts. The HP no. 29 is a 600-dpi black pigmented inkjet print cartridge that delivers sharp, professional quality documents and is made to work with HP colour inks for maximum results. Output is consistently crisp and clean on almost any plain paper. The print cartridge contains genuine HP ink that provides quality and reliability every time you print.</element>
            </MarketingInfo>
            <Images>
              <Image>https://content.it4profit.com/pimg/s/resize/160x160x160x160/2783330.jpg</Image>
            </Images>
          </Product> 
```

该数据只是示例，我需要将其中的任何内容写入 csv。这部分给我带来了问题。我不知道如何从这个 XML 文件中提取这些数据现在当涉及到这个脚本中断时，这就是问题所在并且在获取这些数据时遇到问题：

```
 <AttrList>
              <element Name="Ink Color" Value="Black"/>
              <element Name="Ink Capacity" Value="40 ml"/>
              <element Name="Compliance" Value="HP DJ600/660/670/680/690/DW 600/660/680/690/OJ500/600/700/PSC-370/380/FAX 910"/>
              <element Name="Estimated Maximum Cartridge Life" Value="650 pages"/>
              <element Name="Number of Ink Colors" Value="1"/>
              <element Name="Typical Page Coverage" Value="5 %"/>
              <element Name="Warranty Products returnable" Value="Yes"/>
              <element Name="Pack Weight Brutto (kg)" Value="0.1 kg"/>
              <element Name="Pieces in pack" Value="1"/>
            </AttrList> 
```

我需要保存该名称的名称和值

这是我的代码，但不适用于元素。那是缺失的，我需要弄清楚如何在这段代码中实现它：

```
 function parsing_xml($supplier_name,$xml_url,$opsi='string'){
        $xml = simplexml_load_file(utf8_encode($xml_url), 'SimpleXMLElement', LIBXML_NOCDATA);
        //$xml = simplexml_load_file($xml_url, 'SimpleXMLElement', LIBXML_NOCDATA);
        if(!$xml){echo "xml $xml_url not loaded.";exit;}
        $i=0;
        $string="";
        foreach($xml as $k=>$v){
            $b="";
            if($i==0){
                foreach($v as $k1=>$v1){
                    $head[]=$k1;
                }
                array_push($head,"ime_proizvoda","meta_description","meta_tag","tax","supplier","quantity","price","Referenca","tezina","opis_link");
                //array_push($head,"dugi_opis","ime_proizvoda","meta_description","meta_tag","tax","supplier","quantity","price","Referenca","tezina");
                foreach($head as $k4=>$v4){
                    $b.= "$v4".DELIMITER;
                }
            }//echo $xml->$k->BrojArtikla."=>".$xml->$k->Image."<pre>".print_r($head,1)."</pre>";
            foreach($head as $k3=>$v3){
                if($v3=='meta_description'){$v3='Naziv';}

                if(empty($v->$v3) or $v->$v3=="" or !isset($v->$v3)){
                    $v->$v3="|||";
                }
                if($v3=='tax'){
                    $b.=TAX.DELIMITER;
                    $v->$v3=TAX;
                }elseif($v3=='supplier'){
                    $b.=$supplier_name.DELIMITER;
                    $v->$v3=$supplier_name;
                }elseif($v3=='quantity'){
                    if($v->Stanje=="+"){
                    //if($v->Status=='Raspoloživo'){
                        $b.="4".DELIMITER;
                        $v->$v3=2;
                    }else{
                        $b.="0".DELIMITER;
                        $v->$v3=0;
                    }
                }elseif($v3=='Cijena'){
                    //$b.=(string) floatval($v->$v3).DELIMITER;
                    //$v->$v3=(string) floatval($v->$v3);

                    $b.=str_replace(',', '.', (string) $v->$v3).DELIMITER;
                    $v->$v3=str_replace(',', '.', (string) $v->$v3);

                    //$b.= str_replace(',', '.', floatval($v->$v3)).DELIMITER;
                    //$v->$v3= str_replace(',', '.', floatval($v->$v3));
                }elseif($v3=='ListPrice'){
                    $b.= (string) floatval($v->$v3).DELIMITER;
                    $v->$v3= (string) floatval($v->$v3);
                }elseif($v3=='Rabat'){
                    $b.= (string) floatval($v->$v3).DELIMITER;
                    $v->$v3= (string) floatval($v->$v3);
                }elseif($v3=='price'){
                    $b.= (string) floatval($v->Cijena)*MARZA.DELIMITER;
                    $v->$v3=(string) floatval($v->Cijena)*MARZA;
                }

                elseif($v3=='meta_tag'){
                    $b.=$v->$v->Brand.DELIMITER;
                    $v->$v3=$v->$v->Brand;
                }

                //ovo za ime da makne cudne znakove

                 elseif($v3=='ime_proizvoda'){

                 $b.=(string) preg_replace('/[%&#\\/-]/', '', $v->Naziv).DELIMITER;
                 //
                 //
                 //
                  $v->$v3=(string) preg_replace('/[%&#\\/-]/', '', $v->Naziv);

                    }

                    //ovo za referencu makni prva 4 znaka
                 elseif($v3=='Referenca'){

                 $b.=substr($v->Sifra, 4).DELIMITER;

                   $v->$v3=substr($v->Sifra, 4);

                    }

                      //ovo opis sa linkom
                 elseif($v3=='opis_link'){

                 $b.=$v->$v->Opis."<br/>Link na proizvod: <p><a href=$v->Link>$v->Link</a></p>".DELIMITER;
                 $v->$v3=$v->Opis."<br/>Link na proizvod: <p><a href=$v->Link>$v->Link</a></p>";

                    }

                    elseif($v3=='tezina'){

                 $b.=str_replace(',', '.', $v->Bruto_tezina_kg).DELIMITER;

                   $v->$v3=str_replace(',', '.', $v->Bruto_tezina_kg);;

                    }

                else{
                    $b.=$v->$v3.DELIMITER;
                }
            }
            $supplier_item[(string)$v->Sifra]=$v;
            $b=substr($b,0,-1);
            $b=str_replace("'","\'",$b);
            $b=str_replace('"','\"',$b);
            $b=str_replace("\n"," ",$b);

            $i++;
            $string.="\n$b";

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T10:45:58.713

您应该能够使用 获取 simpleXmlElement 的属性`$element->attributes()`，这将返回一个具有属性名称和值的关联数组，在您的示例中：

```
"Name" => "Ink Color"
"Value" => "Black" 
```

有关 SimpleXmlElement 的文档，请参见[http://php.net/manual/en/simplexmlelement.attributes.php](http://php.net/manual/en/simplexmlelement.attributes.php)。

# apache-flex - Flex 4 错误标签宽度

> ID：14193989
> 
> 赞同：0
> 
> 时间：2013-01-07T10:25:11.610
> 
> 标签：apache-flex, flex4, flex3, flash-builder

我的应用程序中出现 labelWidth 错误，我认为这个问题很简单，但我找不到正确的答案。代码：

```
<s:FormItem labelWidth="0"> 
```

错误： **无法解析组件类型 spark.components.FormItem 的属性“labelWidth”。**

我正在从 flex 3 迁移到 4，并且在应用程序设计中发生了很多变化我如何在 spark 中使用 labelWidth？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T10:30:47.280

你有一个语法错误。尝试这个：

```
<s:FormItem width="0" label="Form Item:">
      <s:Label text="label text" />
</s:FormItem> 
```

# android - 以编程方式使用 logcat 命令写入日志文件时出错。使用执行命令

> ID：14193991
> 
> 赞同：0
> 
> 时间：2013-01-07T10:25:12.970
> 
> 标签：android, file, logging, exec

我在创建日志文件时遇到了很多麻烦。它在另一个程序中对我有用，但在这个程序中不起作用，我快疯了，因为我写的完全一样......我想将 logcat 存储在 Android 设备 SDCard 中的 .txt 文件中。它创建文件，但它是空的。

编码：

```
public void logging() throws IOException{
    Log.i(TAG, "On logging");
    String listLogs = "dalvikm:I System.err:I AndroidRuntime:I NetworkInfo:I ActivityManager:I ";
    File filename = new File(Environment.getExternalStorageDirectory()+"/logEth.txt");      
    try {
        filename.createNewFile();
        String cmd = "logcat -d -v threadtime -f "+ filename.getAbsolutePath() +" "+ listLogs +" *:S";
        Runtime.getRuntime().exec(cmd);     
        Log.d(TAG, "logs written");
    } catch (IOException e) {
        Log.e(TAG, " on creating logging ", e);
        throw new IOException(TAG+" error creating the logs. ", e);
    }
} 
```

太感谢了！

# joomla - 在 joomla 2.5 中更改管理员路径

> ID：14193996
> 
> 赞同：3
> 
> 时间：2013-01-07T10:25:46.697
> 
> 标签：joomla, joomla2.5

过去 2 年我一直在使用 joomla。由于 joomla 是 php 爱好者非常受欢迎的 CMS，因此黑客总是试图在 joomla 中破坏网站。**任何人都可以通过使用wappanalyzer 软件**轻松检测网站正在使用 joomla 或任何其他编程语言。[在 joomla 中，我们可以通过输入http://phalana.com/administrator](http://phalana.com/administrator)来访问管理员面板 。

所以我的问题是如何将 /administrator 更改为其他内容，这样黑客就不会进入管理员面板。到目前为止，我已经看到了[官方 joomla 目录](http://extensions.joomla.org/extensions/access-a-security/site-security/login-protection)中的扩展数量但是仍然缺少一些东西。任何人都可以帮我更改管理员路径。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T12:34:26.640

出于多种原因，更改`/administrator`是一个非常糟糕的主意，具有讽刺意味的是，最重要的是安全性。除此之外：

*   破坏了很多组件
*   使您无法轻松应用安全更新
*   从安全的角度来看，重命名的影响是未知的

保护 Joomla`/administrator`区域的最佳方法是遵循一些简单的步骤......

1.  `/administrator`除非您的黑客设法找出他们难倒的用户名和密码，否则以这种方式将领域身份验证添加到目录中。
2.  使用[JSecure](http://extensions.joomla.org/extensions/access-a-security/site-security/login-protection/12254)或 Akeeba 的[管理工具](http://extensions.joomla.org/extensions/access-a-security/site-security/site-protection/16363)之类的扩展程序（两者都允许您在 URL 上设置“秘密词” ）或检查[Joomla的](http://extensions.joomla.org/)[登录保护部分](http://extensions.joomla.org/extensions/access-a-security/site-security/login-protection)中`administrator`已有的扩展程序！[扩展目录](http://extensions.joomla.org/)（简称JED）。*注意我个人最喜欢管理工具**，他们的应用程序防火墙和**制造商。**`/administrator?secreword``.htaccess`*
3.  遵循 Joomla Doc 网站[安全检查表上的建议](http://docs.joomla.org/Security_Checklist/Getting_Started)

就个人而言，我们会做所有这些事情以及更多……[正如我们不断告诉人们](https://vimeo.com/channels/joomlavideos/46561574)的那样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-19T17:49:16.147

您可以通过创建一个替代目录来保护或隐藏您的 /administrator 目录，该目录设置一个发送到请求中的 http 标头的 cookie。该 cookie 将从 /administator 目录中的 index.php 文件进行验证，如果未验证（当未经授权的用户想要通过已知的 /administrator 目录检测您的站点是否基于 Joomla 时），那么它将被重定向到您网站的根目录。

这些是步骤。

*创建一个替代的 /administrator 目录，即：/admins_place

*在 /admins_place 中，使用以下代码片段创建一个 index.php

```
<?php
$admin_cookie_code = "_hashed_secret_code_here_";
setcookie("JoomlaAdminSession", $admin_cookie_code, 0, "/");
header("Location: ../administrator/index.php");
?> 
```

*在管理员目录中，在 index.php 文件的开头添加此代码片段。

```
<?php
if($_COOKIE['JoomlaAdminSession'] != "_hashed_secret_code_here") {
header("Location: ../index.php");
} 
```

我希望这有帮助

# javascript - 通过其他元素通过 ID 获取 HTML 元素

> ID：14193998
> 
> 赞同：-3
> 
> 时间：2013-01-07T10:25:59.300
> 
> 标签：javascript, jquery, html

我需要在其他元素中通过 ID 获取 HTML 元素。但我需要通过父元素来做到这一点。

```
<div id="one" class="a">html value 1
    <div id="two" class="a">html value 2</div> 
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T10:26:59.037

```
$('#one div:first').attr('id'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T10:39:03.280

ID 应该始终是唯一的.. 具有相同 id 的两个 html 元素是无效的.. 你可以用 class 替换 ids 并使用类选择器..

**HTML**

```
<div id="one" class="a">html value 1
  <div  class="a two">html value 2</div> 
  <div  class="a three">html value 3</div> 
  <div  class="a four">html value 4</div> 
    ....
</div> 
```

**查询**

```
$('#one.two').text(); //to get the text inside the element having class as two , gives(html value 2) here.. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T10:28:40.573

尝试这个....

```
$('#one > div').attr('id'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T10:33:46.483

使用`$('#one #two')`应该返回 jquery 包装的元素`div#two`。
**注意**：`id`应该是唯一的