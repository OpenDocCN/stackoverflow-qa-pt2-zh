# StackOverflow 问答 13778000-13778999

# objective-c - ViewDidLoad 之前的 TableView didSelectRowAtIndexPath

> ID：13778003
> 
> 赞同：0
> 
> 时间：2012-12-08T13:42:42.133
> 
> 标签：objective-c, uitableview, viewdidload, didselectrowatindexpath

我希望在 ViewDidLoad 之前执行 didSelectRowAtIndexPath。

怎么做？

在 didSelectRowAtIndexPath ：

```
[[NSUserDefaults standardUserDefaults] setObject:[[array objectAtIndex:indexPath.row + 1] objectForKey:@"gid"] forKey:@"lastGID"];
NSLog(@"lastGID (saved) = %@", [[NSUserDefaults standardUserDefaults] objectForKey:@"lastGID"]); 
```

在 viewDidLoad ：

```
[super viewDidLoad];
NSLog(@"%@", [[NSUserDefaults standardUserDefaults] objectForKey:@"lastGID"]); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T13:44:32.210

如果这一切都发生在一个视图控制器中，你***就不能***这样做。必须先加载视图的资源/用户界面（即必须显示表格并连接插座等），然后才能选择表格的一行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T18:42:17.767

我必须使用 viewDidAppear 而不是 viewDidLoad。

希望，这会有所帮助

# objective-c - nstableview 中的目录列表

> ID：13778010
> 
> 赞同：0
> 
> 时间：2012-12-08T13:43:43.810
> 
> 标签：objective-c, macos, cocoa

如何获取 NSTableView 中的目录列表？

例如，我有一个包含目录列表和 TableView 的 IBOutlet 的数组。

下一步是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T13:47:24.240

如果您已经有一个包含目录列表的数组，您可以实现 [所需的 NSTableView 数据源协议方法](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Protocols/NSTableDataSource_Protocol/Reference/Reference.html)。

您还可以[将表视图绑定到一个数组控制器](https://stackoverflow.com/questions/9164867/binding-an-nstableview-to-an-nsarraycontroller-instead-of-fetching-the-data-dire)，该数组控制器*“拥有”*该数组以及一个目录列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T14:10:09.323

你真的应该看看这个关于`NSTableViews`. 教程的创建者非常好。我通过观看他的视频开始学习objective-c。
看看这些教程：

1.  [教程 1](http://www.youtube.com/watch?v=_Qbjwx0hB6A) - 简介`NSTableViews`
2.  [教程 2](http://www.youtube.com/watch?v=p5U94-uRCOo) - 将数据添加到`NSTableViews`
3.  [教程 3](http://www.youtube.com/watch?v=8Pm1CfmQxfE) - 编辑数据

# jquery-ui - 加载数据时在jquery数据表中显示自定义消息？

> ID：13778011
> 
> 赞同：4
> 
> 时间：2012-12-08T13:43:52.003
> 
> 标签：jquery-ui, datatables

我在 jsp 中有以下代码来创建数据表。我使用 bProcessing 作为 true，它显示“处理”指示器，直到我从服务器获取数据。我想将消息显示为“正在加载数据..”而不是“处理”。我尝试按照各个站点上的建议使用 sProcessing，但它不起作用？

```
 customersTable = $('cutomer').dataTable({
         "sAjaxSource": "ajax url",
         "bProcessing":true,
         "bDeferRender": true,
         "sServerMethod": "POST",
             "oLanguage": {
                "sProcessing": "loading data..."
              }
      }); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-09T07:43:28.510

```
 "oLanguage": {
          "sProcessing": "loading data..."
   } 
```

对我有用，并且在 dataTable Api 的[http://datatables.net/ref](http://datatables.net/ref)中也有建议。只需检查您是否放置在正确的位置。否则你也可以试试 fnPreDrawCallback 和 fnDrawCallback

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-08T19:12:44.707

您可以尝试使用 sLoadingRecords 而不是 sProcessing，因为 sLoadingRecords 处理加载数据，而 sProcessing 处理数据表排序/搜索本地数据。由于您使用的是服务器端处理，我不认为 sLoadingRecords 对您有用，但它实际上可能会为您更改文本。让我们知道它对您有用。

这是 DataTables 网站上关于 sLoadingRecords 的信息。

> 当使用 Ajax 源数据时以及在 DataTables 收集数据的第一次绘制期间，此消息显示在表中的空行中，以向最终用户指示正在加载数据。请注意，通过服务器端处理加载数据时不使用此参数，仅使用 Ajax 来源的数据进行客户端处理。

而对于 sProcessing

> 当表格处理用户操作（通常是排序命令或类似命令）时显示的文本。

# regex - 查找 HTML 字符串并备注

> ID：13778017
> 
> 赞同：0
> 
> 时间：2012-12-08T13:44:31.933
> 
> 标签：regex, batch-file, sed

我有一个 HTML 创建脚本，在其中我试图：

1.) 使用 SED 将 RelatedLinksBlock 的所有实例替换为多行 DOS 变量
2.) 查找与 DOS 变量匹配的字符串并使用 SED 将其移除或删除

几个小时后，我无法让任何一个 SED 命令工作，需要一些帮助。

代码：

```
SETLOCAL ENABLEEXTENSIONS
SETLOCAL ENABLEDELAYEDEXPANSION
set nl=^& echo.
set fullHTMLpath=http://this.com
set FileTitle=Computer TEST
set keyfile=test.html
set rempath=REMthisOUT
set "delpath=^<li^> - ^<a href="%fullHTMLpath%" title="%FileTitle%"^>%FileTitle%^</a^>^</li^>"
set "path1=^<li^> - ^<a href="http://that.com/computers-and-operating-systems/asus-computer-support.html" title="ASUS Computer Support"^>ASUS Computer Support^</a^>^</li^>"
set "path2=^<li^> - ^<a href="http://that.com/computers-and-operating-systems/asus-laptop-support.html" title="ASUS Laptop Support"^>ASUS Laptop Support^</a^>^</li^>"
set "path3=^<li^> - ^<a href="http://that.com/computers-and-operating-systems/asus-support.html" title="ASUS Support"^>ASUS Support^</a^>^</li^>"
set alllinks=%path1%%nl%%path2%%nl%%path3%

sed -i "s/RelatedLinksBlock/%alllinks%/g" "%keyfile%"
sed -i "s/%delpath%/%rempath%/g" "%keyfile%" 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T23:13:56.817

如果我知道 sed 正确，则换行符应该是 \n 以便 sed 处理换行符而不是批处理文件；并且字符串中的正斜杠需要用反斜杠转义。每当字符 \ / & 按字面意思使用时，都需要对其进行转义。在您的代码段中也没有使用延迟扩展，所以我删除了它。

```
SETLOCAL ENABLEEXTENSIONS
set "fullHTMLpath=http:\/\/this.com"
set "FileTitle=Computer TEST"
set "keyfile=test.html"
set "rempath=REMthisOUT"
set "delpath=^<li^> - ^<a href="%fullHTMLpath%" title="%FileTitle%"^>%FileTitle%^<\/a^>^<\/li^>"
set "path1=^<li^> - ^<a href="http:\/\/that.com\/computers-and-operating-systems\/asus-computer-support.html" title="ASUS Computer Support"^>ASUS Computer Support^<\/a^>^<\/li^>"
set "path2=^<li^> - ^<a href="http:\/\/that.com\/computers-and-operating-systems\/asus-laptop-support.html" title="ASUS Laptop Support"^>ASUS Laptop Support^<\/a^>^<\/li^>"
set "path3=^<li^> - ^<a href="http:\/\/that.com\/computers-and-operating-systems\/asus-support.html" title="ASUS Support"^>ASUS Support^<\/a^>^<\/li^>"
set "alllinks=%path1%\n%path2%\n%path3%"

sed -i "s/RelatedLinksBlock/%alllinks%/g" "%keyfile%"
sed -i "s/%delpath%/%rempath%/g" "%keyfile%" 
```

除了这些建议之外，您是否收到任何可以向我们展示的错误消息？

# magento - Magento：限制每个客户的产品最大数量（不是每个订单）

> ID：13778026
> 
> 赞同：1
> 
> 时间：2012-12-08T13:45:34.200
> 
> 标签：magento, e-commerce, magento-1.5

我知道我们可以很容易地[限制客户每个订单可以购买的给定产品的最大数量](https://stackoverflow.com/a/10857952/139040)，但是**是否有可能（本机甚至使用插件）限制每个客户的给定产品的最大数量**？

我不想[使用优惠券](https://stackoverflow.com/a/7553978/139040)也不想[修改代码](http://blog.allgiftsdirect.co.uk/magneto/how-to-restrict-quantity-of-items-in-magento/)：它需要是借助本机或扩展功能的**销售价格。**

Magento 1.5.1

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-08T16:19:11.047

这不可能是原生的，但您可以制作一个执行此类限制的模块。

1.  您需要创建一个资源模型，该模型将检索具有特定产品 ID 的产品的未取消且未退款的订单。实际上，它只是对 sales/order 和 sales/order_item 表的简单选择。资源模型的方法可能如下所示：

    ```
    public function getPurchasedProductQty(array $productIds, $customerId)
    {
        $select = $this->_getReadAdapter()->select();
        $select
            ->from(array('order_item' => $this->getTable('sales/order_item')),
                      array(
                          'qty' => new Zend_Db_Expr('order_item.ordered_qty - order_item.canceled_qty - order_item.refunded_qty'),
                          'product_id'))
            // Joining order to retrieve info about item and filter out canceled or refunded orders
            ->join(array('order' => $this->getTable('sales/order')),
                   'order.entity_id = order_item.order_id',
                   array())
            // Limit it to the current customer
            ->where('order.customer_id = ?', $customerId)
            // Filter out refunded and canceled orders
            ->where('order.state NOT IN(?)', array(
                Mage_Sales_Model_Order::STATE_CLOSED,
                Mage_Sales_Model_Order::STATE_CANCELED
            ))
            // Add Product Id Condition
            ->where('order_item.product_id IN(?)', $productIds);

        return $this->_getReadAdapter()->fetchCol($select);
    } 
    ```

2.  然后，当您观察`sales_quote_item_collection_products_after_load`事件时，您只需放置自定义逻辑，检查将在购物车中使用的产品的限制，然后从加载的集合中删除这些限制。这个逻辑你应该自己实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T17:05:50.280

假设您正在尝试限制当前登录的注册客户可以添加到购物车的产品数量。

（这是一对一的关系，但可以轻松修改以适应许多不同的产品和每个客户的数量）

创建一个自定义模块，该模块将在客户实体中添加一个字段，因此管理员可以为每个客户设置适当的数量。

字段名称：[ModuleName]_product_id（请参阅[向客户实体添加属性](https://stackoverflow.com/questions/5961290/adding-attributes-to-customer-entity/5962237#5962237)）

字段名称：[ModuleName]_max_cart_qty（请参阅[向客户实体添加属性](https://stackoverflow.com/questions/5961290/adding-attributes-to-customer-entity/5962237#5962237)）

在（将下面的文件复制到本地模板文件夹）并更新数量输入字段。

/app/design/frontend/base/default/template/catalog/product/view/addtocart.phtml /app/design/frontend/base/default/template/checkout/cart/item/default.phtml

改变

```
 <input type="text"  class="input-text qty" name="qty" id="qty" maxlength="12" value="<?php echo $this->getProductDefaultQty() * 1 ?>" title="<?php echo $this->__('Qty') ?>" /> 
```

到（添加一个验证类以确保数量小于或等于）

```
$addValidationClass = '';
if( Customer is login && ModuleName_product_id == $_product->getId() && [ModuleName]_max_cart_qty > 0){
    $addValidationClass = ' validate-digits-range-1-' . [ModuleName]_max_cart_qty
}

<input type="text"  class="input-text qty<?php echo $addValidationClass; ?>" name="qty" id="qty" maxlength="12" value="<?php echo $this->getProductDefaultQty() * 1 ?>" title="<?php echo $this->__('Qty') ?>" /> 
```

如果您想进行服务器端验证，则为添加到购物车事件创建一个观察者，将上述逻辑与当前添加到购物车的项目进行比较

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-01-13T04:59:16.887

下面的扩展将有助于实现这一目标

[https://www.magentocommerce.com/magento-connect/maximum-order-quantity.html](https://www.magentocommerce.com/magento-connect/maximum-order-quantity.html)

**编辑** 在这个扩展给

店主经常需要在购物车页面使用自定义消息来限制订购产品的数量。这在使用默认管理员设置时是不可能的。但是，通过使用此扩展程序，您可以使用自定义错误消息设置产品数量限制。如果最大数量限制超过限制，则会在购物车页面显示错误消息。

您可以使用自定义错误消息设置每个产品的最大数量。您可以使用后端选项全局启用/禁用它们。

# ajax - ASP.NET MVC3 HttpPost + jquery ajax 多线程？

> ID：13778030
> 
> 赞同：0
> 
> 时间：2012-12-08T13:46:38.790
> 
> 标签：ajax

比如有一个Register按钮，当按钮被点击时，它会向Action Register发送一个ajax请求做数据库处理，然后发送验证邮件。

```
$.ajax({
    url: "/Register",
    type: 'POST',
    error: function(xhr) {},
    success: function(data) {
       //after success, change the button color                   
    }
});

[HttpPost]
public ActionResult Register() { 
     //database processing
     ......
    //send email 
    //(this step takes long period of time, the button wait for long time to change the color, how can i solve this issue?)
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T13:54:24.450

当您从网页调用长时间处理操作时，您不想等待它完成。所以你要做的就是将长处理任务添加到队列中并返回。您可以使用 MSMQ 之类的东西，也可以自己构建简单的队列机制，即在表中插入要发送的电子邮件的记录，然后让其他进程查看该表并发送电子邮件...

# sql-server - 如何在 SQL Server Management Studio 中更改 LocalDB 的“数据库默认位置”？

> ID：13778034
> 
> 赞同：26
> 
> 时间：2012-12-08T13:47:08.377
> 
> 标签：sql-server, ssms, localdb, sql-server-2012-express

1.  在 SSMS 中连接到 LocalDB
2.  打开服务器属性 -> 数据库设置 ![在此处输入图像描述](../Images/4706c0642b1efba7463e08ca378c2d09.png)
3.  更改数据/日志/备份位置 -> 单击确定

当我单击确定时，我收到此错误： ![在此处输入图像描述](../Images/0b9341c36f4b6854fa3be12bcd2f80d4.png)

找到了一些博文并在 regedit 中进行了更改，但没有帮助。 ![在此处输入图像描述](../Images/6a40e5fe9d223efc84b98e1f991a891c.png)

有人有其他我可以尝试的想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2017-11-26T22:10:01.557

我不相信 SQL Server LocalDB 的这些默认路径是可变的。^(这是非常不幸的，因为 SQL Server Express 2017 LocalDB **)似乎是一个错误（从 SQL Server 2017的 CU 6 开始修复） ，根据 DBA.StackExchange 上的这个问题（以及我的回答）：

[LocalDB v14 为 mdf 文件创建错误的路径](https://dba.stackexchange.com/a/191748/30859)

但是，您不需要使用默认路径。当您创建数据库而不指定物理位置时使用这些。如果您指定物理位置，那么您应该能够将文件创建到您具有读/写访问权限的任何文件夹/目录中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-16T21:58:26.530

在注册表中进行更改后，尝试重新启动 sql 实例。此外，我会确保运行 SQL Server 的帐户能够写入该文件夹。为了进行简单的测试，您可以转到文件夹属性-> 安全性，然后添加帐户“每个人”，然后让他们完全控制。然后尝试进行更改。如果它有效，那是该帐户的权限问题。如果没有一定级别的管理员，帐户通常无权访问其他用户帐户。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2014-07-14T08:43:19.537

我认为 LocalDB 的目的之一是非常方便地将演示数据库与应用程序的源文件捆绑在一起。当然，数据库文件及其日志位于源文件目录中的某个位置。

以 Visual Studio 解决方案为例，在 web.config 或 app.config 中，您可以看到如下内容：

```
<connectionStrings>
<add name="DefaultConnection" connectionString="Data Source=(LocalDb)\v11.0;Initial Catalog=aspnet-XXXXXX-20140609153630;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\aspnet-XXXXXX-20140609153630.mdf" providerName="System.Data.SqlClient" /> 
```

现在每个 LocalDB 的位置都在配置文件中指定，我认为“默认位置”没有多大意义。

# linux - 有没有更好的方法从 arp 表中获取 mac 地址？

> ID：13778035
> 
> 赞同：5
> 
> 时间：2012-12-08T13:47:14.753
> 
> 标签：linux, algorithm, bash, awk, arp

我想通过使用 ip 地址从 arp 表中获取一个 mac 地址。目前我正在使用这个命令

```
arp -a $ipAddress | awk '{print $4}' 
```

这个命令打印我想要的。但我对此并不满意，我想知道是否有任何内置方式或更稳定的方式来做到这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-08T14:01:41.667

您可以使用以下方法解析`/proc/net/arp`文件`awk`：

```
awk "/^${ipAddress//./\.}\>/"' { print $4 }' /proc/net/arp 
```

但我不确定它是否更简单（虽然它节省了一个叉子和一个子shell）。

如果你想要一个 100% 的 bash 解决方案：

```
while read ip _ _ mac _; do
    [[ "$ip" == "$ipAddress" ]] && break
done < /proc/net/arp
echo "$mac" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T13:50:21.327

好吧，您可以编写一个程序（例如用 C 语言）来实际使用 ARP 协议（​​是的，我*知道*这是多余的，例如 ATM 机或 PIN 号）本身来获取信息，但这可能比简单的管道。

也许您应该更严格地检查您的舒适度，因为它可能会给您带来一些不必要的努力:-)

[Linux ARP 内核模块](http://linux.die.net/man/7/arp)的手册页列出了几种操作或读取 ARP 表的方法，`ioctl`可能是最简单的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T14:01:19.043

的输出`arp -a`取决于区域设置（即它随您的系统语言而变化）。因此，至少将其强制为默认语言环境可能是一个好主意：

```
LC_ALL=C arp -a $ipAddress | awk '{print $4}' 
```

但是，我和您一样担心 的输出`arp -a`不应该被解析。如果您的程序仅限于 linux 系统，另一种选择是解析文件`/proc/net/arp`。该文件由内核导出，并且是 arp 本身解析以获取其信息的文件。该文件的格式在手册页 proc(5) 中进行了描述，请参阅`man 5 proc`. 这可以使用 awk 轻松完成：

```
awk '$1==IPADDRESS {print $4}' /proc/net/arp 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-09T03:08:55.217

这是一个 awk + ​​sed 解决方案，它不假定列号始终为 4。

```
#!/bin/bash

cat /proc/net/arp |\
    # remove space from column headers
    sed 's/\([^ ]\)[ ]\([^ ]\)/\1_\2/g' |\
    # find HW_address column number and/or print that column
    awk '{
        if ( !column ) {
            for (i = 1; i <= NF; i++ ) {
                if ( $i ~ /HW_address/ ) { column=i }
            };
            print $column
         }
         else {
            print $column
         }
    }' 
```

这里仍然有一些脆弱的假设，例如列名是“HW 地址”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-09T05:46:46.293

更新，移除了 PIPE

```
sed -nr 's/^'${ipAddress//./\.}'.*(([0-9A-Za-z]{2}:){5}[0-9A-Za-z]{2}).*$/\1/p' /proc/net/arp 
```

非固定柱解决方案；

```
arp -a $ipAddress | sed -n 's/^.*\(\([0-9A-Z]\{2\}:\)\{5\}[0-9A-Z]\{2\}\).*$/\1/p' 
```

**解释**

*   `^.*`- 匹配字符串的开头，`^`后跟任何字符`.*`。
*   `[0-9A-Z]\{2\}:`- 匹配任何数字字母数字字符两次，后跟冒号。
*   `\([0-9A-Z]\{2\}:\)\{5\}``( )`- 匹配五次之间的模式。
*   `[0-9A-Z]\{2\}`- 匹配任何数字字母数字字符两次。
*   `.*$`- 匹配任何字符零次或多次，`.*`直到字符串结束`$`。
*   `\1/p`- 返回捕获模式 1 /`p`打印匹配项。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-02-22T15:36:54.713

您可以将其用于脚本：

```
awk ' $1~/[[:digit:]]/ {print $4}' /proc/net/arp 
```

它的作用：

1.  读取 /proc/net/arp（标准 arp 输出）

2.  搜索带有 [0-9] 的字符串

3.  使用 mac 地址获取第 4 个“列”

享受！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-12-16T23:08:22.463

我更喜欢使用该`arping`命令来显式查询某个 IP 地址的 MAC（这也会更新本地 ARP 缓存）：

```
 arping -c 1 192.168.2.24 | grep -Eo "([0-9a-fA-F]{2}:){5}[0-9a-fA-F]" 
```

查找是否存在两个或多个使用相同 IP 地址的主机（添加 -D 选项）或使用简单脚本检查本地 VLAN 中使用的当前 IP 地址非常有用，例如：

```
for i in $(seq 1 254); do 
    IP="192.168.5.$i"
    MAC=$(arping -c 1 $IP | grep -Eo "([0-9a-fA-F]{2}:){5}[0-9a-fA-F]")
    if [ "$MAC" ] ; then
        echo "$IP $MAC"
    fi
done 
```

请注意，这种`arping`方式无法检测到本地主机的 IP 地址（但我们可以在脚本中添加检查以显示它是否存在于范围内）。

有几个版本的`arping`选项和输出略有不同。在 Linux Ubuntu 中，包*iputils-arping*中有一个，包 arping中有*另一个*。

注意：要回答问题而不是问题，过滤`/proc/net/arp`时必须使用确保完全匹配的正则表达式，例如以空格结束表达式（否则，在此示例中，如果存在，它还将显示 2.240-2.249 地址）：

```
ipaddress="192.168.2.24"
grep "^${ipaddress} " /proc/net/arp | grep -Eo "([0-9a-fA-F]{2}:){5}[0-9a-fA-F]") 
```

# java - JLabels（和其他东西）不会出现在 JFrame（多个 JFrame）中的 JPanel 内

> ID：13778043
> 
> 赞同：2
> 
> 时间：2012-12-08T13:48:11.807
> 
> 标签：java, swing, jframe, jpanel, null-layout-manager

我创建了一个应用程序，但我的 JLabels 无法正确显示。该应用程序当前如下所示：

![应用截图](../Images/8b8363dc545f187d2bcbce720f9b4731.png)

这些是使用以下代码创建的 JFrame 中的 2 个 JPanel：

```
public JFrame window = new JFrame();
public JPanel top = new JPanel();
public static JPanel main = new JPanel();
public JPanel login = new JPanel();

// ... 
```

在主类内部：

```
window.setSize(1000, 700);
login.setSize(250, 200);
//   main.setSize(500,500);
main.setLocation(500,100);

window.add(login);
window.add(main);

login.add(new view.LoginPanel());

main.setLayout(new BorderLayout());
main.add(new view.CategoryList(), BorderLayout.CENTER);
main.validate();
main.repaint();

window.validate();
window.setVisible(true); 
```

这将显示我现在拥有的框架。但在黑线上方应该有一个由此创建的标题：

```
public class CategoryList extends JPanel implements MouseListener {
    public CategoryList() {
        super();
        setLayout(null);
        initComponents();
        revalidate();
        repaint();
        addTitle();
    }
} 
```

标题是这样创建的：

```
private void addTitle() {
    JLabel lblTitle = new JLabel();
    lblTitle.setText("Winkelapplicatie");
    lblTitle.setBounds(20, 20, 150, 20);
    lblTitle.setFont(WinkelApplication.FONT_16_BOLD);
    this.add(lblTitle);
    System.out.println("addTitle");
} 
```

但它没有出现。我知道这段代码中没有显示很多方法，但我已经包含了我认为所有必要的代码。

我希望有人可以帮助我，在此先感谢！

编辑：

我已经剥离了我的代码，以便它可以在线：主包：WinkelApplication.java：

```
package main;

import java.awt.BorderLayout;
import java.awt.Font;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;
import javax.swing.UIManager;

public final class WinkelApplication {

public static final String NAME = "hi";
public static final String CURRENCY = "\u20AC";
public JFrame window = new JFrame();
public JPanel top = new JPanel();
public static JPanel main = new JPanel();
public JPanel login = new JPanel();

public static final Font FONT_10_PLAIN = new Font("Verdana", Font.PLAIN, 10);
public static final Font FONT_10_BOLD = new Font("Verdana", Font.BOLD, 10);
public static final Font FONT_12_BOLD = new Font("Verdana", Font.BOLD, 12);
public static final Font FONT_16_BOLD = new Font("Verdana", Font.BOLD, 16);

private static WinkelApplication instance = new WinkelApplication();

private WinkelApplication() {
}

public void initialize() {
    try {
        UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
    } catch (Exception e) {
        System.err.println("Error setting LookAndFeelClassName: " + e);
    }

}

public void startup() {
    window.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    window.setSize(1000, 700);
    login.setSize(250, 200);
     main.setLocation(500,100);
    window.add(login);
    window.add(main);
    login.add(new main.LoginPanel());  
     main.setLayout(new BorderLayout());
    main.add(new main.CategoryList(), BorderLayout.CENTER);
    main.validate();
    main.repaint();
    window.validate();
    window.setVisible(true);

}

public static WinkelApplication getInstance() {
    return instance;
}

public static void main(String args[]) {
    final WinkelApplication applicatie = WinkelApplication.getInstance();
    SwingUtilities.invokeLater(new Runnable() {
        @Override
        public void run() {
            try {
                applicatie.initialize();
                applicatie.startup();
            } catch (Exception e) {
                System.out.println("Application" + applicatie.getClass().getName() + "failed to launch");
            }
        }
    });
}
} 
```

LoginPanel 类：（只是在 Netbeans 中使用 GUI 设计器创建的文本字段）

```
 /*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package main;

import main.WinkelApplication;

public class LoginPanel extends javax.swing.JPanel {

/**
 * Creates new form LoginPanel
 */
public LoginPanel() {
    initComponents();
}

private Boolean loggedIn = null;

@SuppressWarnings("unchecked")
// <editor-fold defaultstate="collapsed" desc="Generated Code">                          
private void initComponents() {

    javax.swing.JLabel jLabel1 = new javax.swing.JLabel();

    jLabel1.setText("TextField in JPanel 1");

    javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
    this.setLayout(layout);
    layout.setHorizontalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(layout.createSequentialGroup()
            .addContainerGap()
            .addComponent(jLabel1, javax.swing.GroupLayout.PREFERRED_SIZE, 124, javax.swing.GroupLayout.PREFERRED_SIZE)
            .addContainerGap(114, Short.MAX_VALUE))
    );
    layout.setVerticalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(layout.createSequentialGroup()
            .addContainerGap()
            .addComponent(jLabel1)
            .addContainerGap(98, Short.MAX_VALUE))
    );
}// </editor-fold>                        

public Boolean isLoggedIn(){
    return loggedIn;
}
// Variables declaration - do not modify                     
// End of variables declaration                   
} 
```

CategoryList 类（这里的文本应该在行的上方，但没有显示出来）

```
package main;

import main.WinkelApplication;
import java.awt.Graphics;
import javax.swing.JLabel;
import javax.swing.JPanel;

public class CategoryList extends JPanel {

public CategoryList() {
    super();
    setLayout(null);
    initComponents();
}

/** create the gui for this page */
private void initComponents() {
    addTitle();
}

/** add the page's title */
private void addTitle() {
    JLabel lblTitle = new JLabel();
    lblTitle.setText("Winkelapplicatie");
    lblTitle.setBounds(20, 20, 150, 20);
    lblTitle.setFont(WinkelApplication.FONT_16_BOLD);
    this.add(lblTitle);
    System.out.println("addTitle");
}

@Override
public void paint(Graphics graphics) {
    super.paint(graphics);
    graphics.drawLine(20, 45, 540, 45);
}
} 
```

希望现在有人可以帮助我。再次提前感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T15:55:22.793

一个可能的简单解决方案：

您的主应用程序 JPanel 应该使用 BorderLayout。将标题 JLabel 放在 BorderLayout.PAGE_STATE（也称为 BorderLayout.NORTH）中，并将 GUI 的其余部分放在 BorderLayout.CENTER 位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T11:33:30.993

我通过将主布局也设置为 setLayout(null) 来解决这个问题，我只需要在这个项目中使用它......

下次我必须从头开始编写它时，我不会使用它！无论如何，感谢您的帮助，我永远不会发现问题。

# algorithm - 在曼哈顿距离中找到两组之间的距离

> ID：13778044
> 
> 赞同：1
> 
> 时间：2012-12-08T13:48:15.887
> 
> 标签：algorithm, set

我正在从算法中学习测试，我发现了几天无法处理的问题。所以我写在这里寻求帮助。

**对于平面上**给定的两个不相交集：

```
G={(x_1^G, y_1^G), (x_2^G, y_2^G), ..., (x_n^G, y_n^G)}
D={(x_1^D, y_1^D), (x_2^D, y_2^D), ..., (x_n^D, y_n^D)}

Where for every 1 <= i, j <= n we have y_i^D < y_j^G, so G is above D. 
```

找到一个有效的算法， `counts the distance between them` 定义为：

```
d(G,D) = min{ d(a,b): a \in G and b\in D }, 
where d(a,b) = |x_a - x_b| + |y_a - y_b| 
```

*O(n^2) 是微不足道的，所以它不是答案。*

我希望解决方案不会太难，因为它是从材料到测试前的审查。有人可以帮忙吗？

我认为这似乎是一些常见问题的特例。但如果是特殊情况，也许解决方案会更容易一些？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T16:19:35.250

在 O(n log n) 时间内有几种不同的方法可以做到这一点。

一：计算G点的曼哈顿距离[Voronoi图](http://en.wikipedia.org/wiki/Voronoi_diagram)，并以此为基础构建点位置数据结构。这需要 O(n log n) 时间。对于每个 D 点，使用点位置数据结构找到最近的 G 点。每个 D 点需要 O(log n) 时间。取您刚刚找到的配对之间距离的最小值，这就是您的答案。

二：你可以用[Fortune的算法](http://en.wikipedia.org/wiki/Fortune%27s_algorithm)来解决这个问题；只需为 D 和 G 点保留单独的二叉树。形容有点烦。

下一个想法计算无穷范数的最近对的距离，即 max(|x1-x2|, |y1-y2|)。您可以将问题倾斜 45 度（代入 u = xy，v = x+y）以将其转换为适当的形式。

三（二的变体）：按 y 坐标对所有点进行排序。保持 d，即目前看到的最近对之间的距离。我们将从上到下扫过一条线，维护两棵二叉搜索树，一个是 G 点，一个是 D 点。当一个点在扫描线上方 d 或更远时，我们将其从其二叉搜索树中删除。当扫描线第一次遇到一个点时，比如一个 D 点，我们 (1) 检查 G 二叉搜索树，看它是否有任何元素的 x 坐标在新点的 d 范围内，必要时更新 d， (2) 将新点插入到 D 的二叉搜索树中。每个点只导致恒定数量的二叉搜索树操作加上恒定数量的额外工作，因此扫描为 O(n log n)。不出所料，排序也是如此，因此我们的整体时间复杂度是符合要求的。

您也可以根据与三个类似的想法制定分而治之的策略。

# android - ViewFlipper 布局问题

> ID：13778054
> 
> 赞同：0
> 
> 时间：2012-12-08T13:49:01.263
> 
> 标签：android, android-layout, viewflipper

我已经定义了一个这样的视图翻转器：

```
 <?xml version="1.0" encoding="utf-8"?>
    <RelativeLayout xmlns:tools="http://schemas.android.com/tools"
        android:orientation="horizontal" android:layout_width="match_parent"
        android:layout_height="match_parent" android:layout_marginRight="5dp"
        xmlns:android="http://schemas.android.com/apk/res/android">

        <TextView android:id="@+id/Heading001" android:gravity="center"
            android:layout_width="105dp" android:layout_height="40dp"
            android:layout_marginLeft="10dp" android:layout_marginRight="20dp"
            android:layout_marginTop="5dp" android:text="XXX" android:textSize="25sp"
            android:background="@drawable/rectanglefield" android:textAppearance="?android:attr/textAppearanceMedium" />

        <TextView android:id="@+id/tvLongName" android:layout_width="wrap_content"
            android:layout_height="wrap_content" android:layout_alignParentBottom="false"
            android:layout_alignParentTop="true" android:layout_marginTop="0dp"
            android:gravity="center" android:layout_toRightOf="@+id/Heading001"
            android:text="XXX" android:textAppearance="?android:attr/textAppearanceMedium"
            android:typeface="normal" />

        <TextView android:id="@+id/tvUsage" android:layout_below="@+id/tvLongName"
            android:layout_toRightOf="@id/Heading001" android:layout_height="wrap_content"
            android:layout_width="wrap_content" android:layout_marginRight="5dp"
            android:textColor="#ff0000" android:text="R"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <TextView android:id="@+id/tvCardinality"
            android:layout_height="wrap_content" android:layout_width="50dp"
            android:layout_alignParentRight="false" android:layout_below="@+id/tvLongName"
            android:layout_toRightOf="@+id/tvUsage" android:layout_marginRight="5dp"
            android:text="(0..1)" android:textAppearance="?android:attr/textAppearanceMedium" />

        <TextView android:id="@+id/tvDatatype" android:gravity="center_vertical"
            android:layout_width="wrap_content" android:layout_height="40dp"
            android:layout_marginLeft="10dp" android:layout_marginRight="15dp"
            android:layout_marginTop="5dp" android:layout_alignParentRight="true"
            android:text="XX" android:textColor="#000000" android:background="@drawable/rectanglewhite"
            android:textSize="25dp" android:textAppearance="?android:attr/textAppearanceMedium" />

        <ViewFlipper android:id="@+id/viewFlipper1"
            android:layout_width="fill_parent" android:layout_height="fill_parent"
            android:layout_alignRight="@+id/Heading001" android:layout_weight="1"
            android:layout_marginRight="50dp">
            <include android:id="@+id/flipperView02" android:layout_width="wrap_content"
                layout="@layout/detail_item_view02" />
            <include android:id="@+id/flipperView01" android:layout_width="wrap_content"
                layout="@layout/detail_item_view01" />
        </ViewFlipper>
    </RelativeLayout> 
```

FlipperView01 视图的定义如下：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout  xmlns:tools="http://schemas.android.com/tools" 
    android:orientation="horizontal"
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content" 
    xmlns:android="http://schemas.android.com/apk/res/android">

    <TextView android:id="@+id/tvNotes"
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content" 
        android:layout_marginTop="55dp" 
        android:text="abcdef ef abcdef abcdef " 
        android:textAppearance="?android:attr/textAppearanceMedium"/>

</LinearLayout> 
```

我遇到的问题是我希望“flipperView01”中的 TextView 是对话框的全宽，目前它不是只是非常窄

![在此处输入图像描述](../Images/af80cf123751bba0db2f351cdd64ceb8.png)

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T15:06:00.560

要解决此问题，请从as 中删除该`android:layout_alignRight="@+id/Heading001"`属性，该属性将使 the 的右边距与*Heading001*的右边距对齐（并且具有有限的尺寸）。`ViewFlipper``ViewFlipper` *`TextView``TextView`*

 *另外关于您的布局：

*   在a 中`layout_weight`是没用的`RelativeLayout`
*   您应该`@+id/theId`仅在布局中第一次出现该 id 时使用该符号，在下一个您将使用的地方，您`id`只需使用`@id/theId`*

# php - Web服务器上的PHP Websocket

> ID：13778056
> 
> 赞同：6
> 
> 时间：2012-12-08T13:49:09.347
> 
> 标签：php, html, client, websocket, phpwebsocket

几天前，我从[http://code.google.com/p/phpwebsocket/设置了这个 WebSocket 服务器](http://code.google.com/p/phpwebsocket/)

通过使用 Xampp，它在我的本地主机上运行良好。然后，我将它上传到我在 Strato 上的网络空间，但现在我无法连接到服务器。

我将套接字连接更改为我的域，但它不起作用

客户端.html：

```
var host = "ws://xxxxxxxx.com:12345/Websocket/server.php"; 
```

服务器.php：

```
$master  = WebSocket("xxxxxx",12345); 
```

我已经尝试过使用不同的端口（80,443,12345,8080,8000 ....），使用 server.php 中的 IP 地址而不是域。

我还在 client.html 中使用了绝对路径和相对路径。

从项目页面[http://code.google.com/p/phpwebsocket/](http://code.google.com/p/phpwebsocket/)有人建议在 server.php 中使用 0 或 0.0.0.0，但这也不起作用。

在 client.html 中它只显示：

WebSocket - 状态 0 断开连接 - 状态 3

我猜这个问题是 Strato 阻止了我使用 WebSockets。是否可以在我的网络空间上运行 WebSockets？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T20:09:53.573

我敢打赌，您的主机正在阻止对套接字的传入请求。您不应该在 Web 服务中运行像 phpwebsocket 这样的脚本（它本身就是一个服务器）。这让很多人感到困惑，因为 PHP 通常用于编写网页脚本，而不是用于编码守护进程。

我这样说是因为您提到在 Xampp 中运行脚本，并将您的托管服务称为“网络空间”。

如果是这种情况，您将必须升级到虚拟服务器包，以便您可以运行自己的服务。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T17:19:11.727

好的，到此结束。

我找到了使用我的 websockets 应用程序的解决方案，并且解释了为什么它在我的共享托管解决方案上不起作用。

我联系了 Strato，他告诉我他们不允许在共享主机上使用 Websocket。获得类似结果的唯一方法是使用 AJAX 长池化。

现在我购买了一个虚拟服务器，我的 websocket 应用程序现在运行良好。

谢谢你的支持。

# uiview - 在 Y 和 Z 方向上倾斜 UIView

> ID：13778058
> 
> 赞同：0
> 
> 时间：2012-12-08T13:49:18.423
> 
> 标签：uiview, calayer, catransform3d, catransform3drotate

我的图形是这样的，为了使我的视图内容与图形正确对齐，它需要深度旋转，即沿 z 轴旋转。可能沿 z 方向 5-10 度，沿 y 方向负 5-10 度。

目前我使用这个：（argView是我的imageview）

```
[argView.layer setTransform:CATransform3DMakeRotation(0.5, 1, -1, 0)]; 
```

然而，这给了我非常扭曲的形象——绝对不是我想要的，但我不知道我应该在那里提供什么。

我从阅读苹果文档开始，但是有太多的功能让我感到困惑。如果有人有任何好的指南可以让我很容易，那就太好了。如果有人能指出这件事在哪里完成，那就更好了。

# php - php_memcache.dll 用于 64 位 wampserver 与 php 5.3.13 或 5.4.3

> ID：13778070
> 
> 赞同：6
> 
> 时间：2012-12-08T13:51:49.927
> 
> 标签：php, memcached, 64-bit, wamp, wampserver

好的，到目前为止，我已经在谷歌上搜索并试图找到超过 6 个小时的解决方案。通常我不会发布问题，因为我觉得答案应该可以找到，但这里什么都没有。

我需要使用实现了 memcache 类的 PHP 代码。我使用 wampserver 2.2 作为 64 位安装，使用 apache 2.2.2、php 5.4.3（也安装了 5.3.13，看看我是否可以在那个版本中修复它）和 mysql 5.5.24

[我已经使用 memcached-win64-1.4.4-14.zip链接](http://s3.amazonaws.com/downloads.northscale.com/memcached-win64-1.4.4-14.zip)和 memcached-1.2.6-win32-bin.zip[链接](http://code.jellycan.com/files/memcached-1.2.6-win32-bin.zip)运行了 memcache 服务

我现在正处于当（重新）启动apache模块-> mem_cache_module时，我得到的来自wampserver的反馈如下，使用stackoverflow.com/questions/3894065/php-memcache-dll-上类似线程的答案vc6-x64)，结合 php 5.3.13 64 位：

> PHP Startup: memcache: Unable to initialize module Module 编译的模块 API=20090626 PHP 编译的模块 API=20100525 这些选项需要匹配

这比我使用其他选项得到的要远得多，我能想到的大多数（或全部）结果似乎都重定向到 32 位 dll（我无法使用，因为我的 wampserver 是 64 位）或错误的 php版本或 api 版本（编译日期？）.. 我不认为我能够编译我自己的库来解决这个问题。

我已将 *extension=php_memcache.dll* 添加到两个 php 版本的 php.ini 文件中，并且 dll 文件已放置到 wamp 服务器的正确 php/php5.xx/ext/ 文件夹中

到目前为止，我的假设是我需要在 2010 年 5 月 25 日为 php 5.3.13 编译为 64 位（x64）的 php_memcache.dll。或者我需要安装与 6 月 26 日编译的二进制文件匹配的 php 版本, 2009 年。

你们中有人对我的具体困境有解决方案吗？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T08:21:51.583

基本上，您需要与您的 PHP 可执行文件匹配的 Memcache 或 Memcached 库。当我说匹配时，我不是在说日期，而是在说代码。旧的 PHP 将不支持新的 Memcache，反之亦然。

你可以尝试为你的 PHP 版本编译一个特殊的（我用其他库试过一次，它不好玩）。或者您可以找到可以与 Memcache 版本一起使用的 PHP 版本，但是这个新的 PHP 还需要与您的 Apache 版本一起使用...

在玩了多年之后，我放弃了，只使用了一个 unix 系统。

PS：现在我想起来 PHP 已经带有正确版本的 Memcache ......所以你的错误可能只是你正在使用“new Memcached();” 而不是“新的 Memcache();”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-04T14:53:37.253

我尝试了所有 dll，但没有一个起作用，但突然间，falcontoast [http://www.mediafire.com/?8d3vd26z3fg6bf1](http://www.mediafire.com/?8d3vd26z3fg6bf1)在评论中给出的那个起作用了。

如果它适用于某人会很高兴:)。

必须从 phpinfo() 检查 phpversion 的体系结构，并且必须使用相应的 dll 文件。此外，memcached 服务的版本应该是相同的类型。

尝试以下可能对您有用的步骤。是的，当我几乎放弃时，它确实对我有用。

1 - 关闭**所有**已运行的**memcached**服务。

2 - 获取此服务memcached-win64-1.4.4-14（找到它）并安装它然后开始。（安装方法已经给出）。

3 - 通过 falcontoast 获取注释中的 dll 文件并将其放入扩展（ext）文件夹中。

4 - 在 php.ini 文件中进行更改。

5 - 重新启动 wamp 服务器（可能退出它然后再次启动它）。

如果一切正常，那么这里给出的程序[https://commaster.net/content/installing-memcached-windows](https://commaster.net/content/installing-memcached-windows)应该可以正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-08T19:55:45.807

谢谢扎比！！最后吓坏了，我已经尝试了所有可能的 dll，你提供的那个终于工作了，所有其他人都给了 Invalid Win32 application。

我的设置是带有 Apache 的 Wamp 64 位：2.4.4 MySQL：5.6.12 PHP：5.4.12 on Windows 8 64bit

# java - 为什么 bson java 实现使用 4 字节的 inc 字段？

> ID：13778071
> 
> 赞同：1
> 
> 时间：2012-12-08T13:51:53.650
> 
> 标签：java, mongodb, driver, bson, objectid

在 BSON Java 实现中，一个 ObjectId 由 3 部分组成（源代码： http: [//grepcode.com/file/repo1.maven.org/maven2/org.mongodb/mongo-java-driver/2.9.0/org/ bson/types/ObjectId.java#ObjectId.%3Cinit%3E%28int%2Cint%2Cint%29](http://grepcode.com/file/repo1.maven.org/maven2/org.mongodb/mongo-java-driver/2.9.0/org/bson/types/ObjectId.java#ObjectId.%3Cinit%3E%28int%2Cint%2Cint%29)）：

```
XXXX   XXXX          XXXX
-------------------------
time   machine&pid   inc 
```

*（每个 X 代表一个字节）*

这与文档中描述的有点不同（文档：[http](http://docs.mongodb.org/manual/core/object-id/) ://docs.mongodb.org/manual/core/object-id/ ）

```
XXXX   XXX       XX    XXX
--------------------------
time   machine   pid   inc 
```

*（每个 X 代表一个字节）*

谁能让我知道**为什么 java-driver 没有遵循规范？**

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T14:17:02.143

我希望 ObjectID 的初衷是生成一个合理唯一的主键，而不是打包驱动程序然后开始解析为数据的字段。

随着 MongoDB 生态系统的发展，一些开发人员发现从多个驱动程序解释 ObjectID 以及确保生成的 ID 的一致性很有用。

如果您查看[BSON 规范](http://bsonspec.org/#/specification)，您将看到旧驱动程序使用的 UUID 的一些子类型，以及互操作性的各种更改。例如，[PYTHON-387](https://jira.mongodb.org/browse/PYTHON-387)中提到了支持 C# 和 Java 驱动程序的“传统”字节顺序和字节序。

根据MongoDB 问题跟踪器中的[JAVA-337](https://jira.mongodb.org/browse/JAVA-337)，计划在 3.0 Java 驱动程序版本中解决 Java 驱动程序的 ObjectID 不一致问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T14:41:52.917

我会把这个作为答案，因为评论有点长。

有几个 JIRA 链接到此：

*   [https://jira.mongodb.org/browse/JAVA-81](https://jira.mongodb.org/browse/JAVA-81)
*   [https://jira.mongodb.org/browse/JAVA-337](https://jira.mongodb.org/browse/JAVA-337)

第二个承认规范在 Java 下是不同的，但没有提及原因。

如果我猜测这可能是由于 Java 中的 PID 和机器 ID 的工作方式，它可能与：[https](https://jira.mongodb.org/browse/JAVA-586) ://jira.mongodb.org/browse/JAVA-586 有关。

您可能会在 Google Group 上找到更好的答案：mongodb-user，因为维护人员在那里闲逛。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T14:29:02.223

我无法解释为什么它们不同，但我可以告诉你 Python 驱动程序使用与 Java 相同的方法生成对象 ID：

[https://github.com/mongodb/mongo-python-driver/blob/master/bson/objectid.py](https://github.com/mongodb/mongo-python-driver/blob/master/bson/objectid.py)

# html - 未指定的 div 高度

> ID：13778073
> 
> 赞同：0
> 
> 时间：2012-12-08T13:51:58.393
> 
> 标签：html, css

[我](http://www.inside-guides.co.uk/brentwood/events/2012/December/vintage-vogue-fashion-and-lifestyle-fair.html)在左侧导航中的页面显示类别（`div.cat`）在高度上间隔开`48px`，我不知道为什么。

没有`padding`或`margin`s 或`height`指定。如果有人可以看看检查员，看看是什么原因造成的，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T13:53:01.657

clearfix 导致孩子内部出现问题。整个结构是块和内联元素的混乱，应该以一种或另一种方式清理。每个类别中的任何块元素似乎都是不必要的。您可能还想使用 a`ul`以获得更大的语义含义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T13:59:56.467

`.cat`在 css 文件中声明了类。

```
.cat, .cat a {
padding: 0 5px;
color: #444066;
} 
```

`padding`从那里删除或`5px`减少填充`0px`

发现另一件事是在`body`课堂上

```
body {
line-height: 1.6;
font-size: 15px;
} 
```

`line-height`所有`div`s 和元素的增量

# multithreading - IIS 长轮询 AsyncController

> ID：13778075
> 
> 赞同：0
> 
> 时间：2012-12-08T13:52:01.517
> 
> 标签：multithreading, iis, request, signals, long-polling

我在 IIS 中遇到了一个有趣的问题，我想深入了解它。

我有一个长民意调查的应用程序。我已经实施了自己的长轮询。

一个请求进来了。我阻止了那个请求并从我的工作线程写入它。然后一切都结束了。我发出信号。处理 GET 请求的线程是发布。

我不是在这里谈论可扩展性。这不是我关心的问题。只是为了测试，我只发出并发获取请求。所以只有2个线程在运行。一个用于获取请求和一个工作线程。我知道请求线程安全退出。我在控制器的操作返回之前打印了一个。（这样够好吗？）

我遇到的是。即使我正在退出 GET 线程，IIS 也会在一段时间后变慢。

那么为什么会变慢呢？当我使用 AsyncController 实现时，它不会变慢。我知道 AsyncControllers 从池中附加和分离线程。但是如果我的池中有 25 个线程可用，并且如果我有一个用于工作线程的活动线程和一个用于获取的进入和退出的线程。我有点迷路了。谢谢

# cuda - 访问共享内存的延迟

> ID：13778076
> 
> 赞同：1
> 
> 时间：2012-12-08T13:52:04.277
> 
> 标签：cuda, shared-memory, latency

## 以下两种情况之间的延迟时间较长，

1.  数据从全局内存填充到共享内存中，所有线程同时访问共享内存。多线程访问数据可能相同
2.  所有线程都访问全局内存，但数据是邻居。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T15:10:54.903

如果您计划只访问每个值一次，那么您将不会从使用共享内存中获得任何收益。

共享内存中的值仅在块内有效，因此每个块中的一个或多个线程必须从全局内存中加载值。所以你无法避免全局内存访问。

如果您的设备的计算能力 >= 2.0 (Fermi)，则从全局内存中读取的值会自动缓存在 L1 和 L2 缓存中。L1 具有与共享内存相同的延迟。

延迟是一个固定值，取决于您访问的内存。它没有改变。共享内存的延迟总是比全局内存低得多。

我认为您可能真正要问的是哪种访问类型可以为您提供最佳的内存吞吐量。如果您将只使用每个值一次，则案例 (2) 将提供最佳吞吐量。如果您将重用值并且 CC >= 2.0，则让 L1 处理缓存可能会提供最佳吞吐量。如果您在 CC < 2.0 上重用值，则使用共享内存将提供最佳吞吐量。

情况 (1) 可能会或可能不会导致银行冲突，但无论如何都会提供更好的吞吐量，对于已经存储在共享内存中的值。

案例（2）描述了全局内存的最佳访问模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T14:06:43.457

也许我不明白这两种情况之间的区别。但如果我这样做：

如果您的硬件架构允许，第二个会更快。例如，在具有并行寄存器的多核机器上。另请注意，在第二种情况下，即使从纯软件的角度来看，也不需要将数据设置为线程安全的，因为交错会导致竞争条件。

可以这样想：

案例二：

你有一张有五份晚餐的大桌子，你有五个孩子要吃它们：不需要同步。

情况1：

比如说，你有三张桌子和三顿晚餐；这样两个孩子可能不得不从同一个盘子里吃东西，因此可能需要同步他们的动作，这样他们就不会互相撞击。同步意味着延迟。

# html - 如何在我的主机上安装 web socket？

> ID：13778081
> 
> 赞同：0
> 
> 时间：2012-12-08T13:52:30.983
> 
> 标签：html, websocket

我想在我的主机上安装 websocket，

我怎样才能做到这一点？

是否有任何指南显示如何在主机上安装 websocket？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T14:08:15.370

审查：

[大卫沃尔什 - websocket](http://davidwalsh.name/websocket)

您可以使用 Socket.io 并与 Express 集成，Express 是 Nodejs 的框架。

[socket.io - 如何使用](http://socket.io/#how-to-use)

我希望它有所帮助。

问候。

# javascript - 谷歌图表和实时更新

> ID：13778082
> 
> 赞同：4
> 
> 时间：2012-12-08T13:52:34.413
> 
> 标签：javascript, charts, google-visualization

我正在考虑使用谷歌图表 api，特别是柱形图和散点图。我想知道这些图表是否可以通过它通过 websocket 从服务器接收的数据不断更新。

我的理解是，这些数据将首先添加到数据表中，然后绘制到图表上。因此，如果表中的数据正在更新，这将“实时”更新图表。

另一个问题是，当列无法立即定义但又会被接收到的数据更新时，我也会有一个实例；谷歌图表可以再次处理这个问题。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T15:06:18.703

我不知道谷歌图表，但最近我发现了[Smoothie Charts](http://smoothiecharts.org/)。它可以实时（流畅）。唯一的问题是，根据这篇[介绍冰沙图表](http://joewalnes.com/2010/08/10/introducing-smoothie-charts/)的帖子，我只在 Chrome、Firefox 中工作。

或者也许[highCharts](http://www.highcharts.com/)。[jsfiddle](http://tinyurl.com/d53b3o2)的实时示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-12T13:30:34.170

如果你有

```
var data = new google.visualization.DataTable();
var chart = new google.visualization.LineChart(document.getElementById('chart_div')); 
```

你可以做

```
data.addRows([2015,10])
chart.draw(data); 
```

它会更新图表

我制作了一个在这个 JSfiddle 中添加数据的按钮：

[https://jsfiddle.net/kdn2ojxb/3/](https://jsfiddle.net/kdn2ojxb/3/)

# c# - DateTime.ParseExact 为：2012 年 12 月 7 日星期五 16:36:21

> ID：13778087
> 
> 赞同：2
> 
> 时间：2012-12-08T13:53:10.063
> 
> 标签：c#, string, parsing, datetime

我有以下字符串，我想将其绑定到`DateTime`对象以进行进一步处理：

```
Fri Dec   7 16:36:21 2012 
```

我试过这个：

```
string format = "ddd MMM dd hh:mm:ss yyyy";
DateTime.ParseExact(_srdfLag.CaptureTime, format,
                CultureInfo.InvariantCulture, DateTimeStyles.AllowWhiteSpaces); 
```

但是，它会引发异常：`String was not recognized as a valid DateTime`

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T13:54:21.110

您有相应的 24 小时日期更改格式，您需要`HH` `instead`，`hh`也使用`d` `instead`.`dd`

```
string date = "Fri Dec 7 16:36:21 2012";
string format = "ddd MMM d HH:mm:ss yyyy";
DateTime dt = DateTime.ParseExact(date, format, CultureInfo.InvariantCulture, DateTimeStyles.AllowWhiteSpaces); 
```

# php - html/php 用户下载文件

> ID：13778088
> 
> 赞同：2
> 
> 时间：2012-12-08T13:53:10.050
> 
> 标签：php, html

在我的网络服务器上，我有一个 bat（无害）文件。

我有代码，

```
<a href="test.bat" title="Bat">Test Bat File</a> 
```

但是当用户点击时，它会显示代码而不是下载文件。
您必须右键单击“另存为..”才能下载 bat 文件。

当用户点击时，有没有办法下载（不必右键单击另存为）？
也许一个弹出窗口询问用户他/她是否要下载文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T13:56:08.640

您可以编写一个 php 文件，该文件添加一个 content-disposition 标头，将 mime 类型设置为二进制文件并回显文件内容。

例子：

文件.php

```
$batchfile = file_get_contents('batchlocation');
$size = strlen($batchfile);
header('Content-Disposition: attachment; filename="downloaded.bat"');
header('Content-Type: BAT MIME TYPE or something like application/octet-stream');
header('Content-Lenght: '.$size);
echo $batchfile; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T13:57:19.443

您可以通过在 PHP header() 函数中设置文件来实现。

这里解释： [如何在 PHP 中自动开始下载？](https://stackoverflow.com/questions/40943/how-to-automatically-start-a-download-in-php)

# java - java AudioInputStream AudioSystem.write 到管道长度错误

> ID：13778093
> 
> 赞同：0
> 
> 时间：2012-12-08T13:53:56.483
> 
> 标签：java, jruby, processbuilder, javax.sound.sampled

尝试将我从库中获得的 AudioInputStream 传输到此过程：

```
oggenc - -o wtf.ogg 
```

通过

```
AudioSystem.write(audio, AudioFileFormat::Type::WAVE, process.getOutputStream()); 
```

给我错误：

```
IOException
stream length not specified

file: com.sun.media.sound.WaveFileWriter.write(WaveFileWriter.java)
line: 129 
```

所以似乎需要指定音频流长度。这是一个 44.8 kHz 立体声 PCM 格式的音频，没有指定长度。**我从图书馆得到这个，所以我不能修改他们的代码。**我尝试从此流创建另一个 AudioInputStream，但找不到合适的长度。那么如何指定长度呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T14:23:13.807

因此，我发现您正在`audio`从某个未知的地方阅读，然后尝试将其写入`WAV`格式。但是`WAV`格式需要写标题，其中应该包含文件长度。`WaveFileWriter`如果在不知道长度的情况下由流馈送，无论如何都会引发异常。

我猜你的方向是`Java -> oggenc`。

所以，你要学习`oggenc`并知道它是否接受无头`WAV`流。如果是这样，那么只需将您的输出流传递给`audio`输出流，而无需处理`AudioSystem.write()`which is for headed `WAV`s

根据这里http://www.linuxcommand.org/man_pages/oggenc1.html[你](http://www.linuxcommand.org/man_pages/oggenc1.html)可以接受`RAW`.`oggenc`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-28T09:59:23.813

如果您重新实现 AudioSystem.write 方法，您将能够解决长度问题。由于标头中的数据长度，它不适用于流和 WAVE 格式。您应该将音频数据写入某个数组，然后准备正确的 WAVE Header。示例：[如何将音频录制到字节数组](http://privateblog.info/kak-zapisat-zvuk-na-java-v-byte-massiv)

# java - 通过 Apache Http Client（和 java.util.concurrent）的并发请求似乎可以正确完成，但会使我的操作系统崩溃

> ID：13778095
> 
> 赞同：0
> 
> 时间：2012-12-08T13:54:13.070
> 
> 标签：java, apache-httpclient-4.x, java.util.concurrent, apache-httpcomponents

我目前正在学习使用 java.util.concurrent 包提供的 Java 并发特性。作为一个练习，我尝试编写一个小程序来测试 HTTP API 的性能。但不知何故，我的程序并没有经常正确终止。它甚至使我的操作系统崩溃。

以下是**我的程序的伪代码**：

*   实例化查询 HTTP API 的请求对象（在示例中我只查询一个随机站点）。
*   实例化多个Callables，其中每个代表一个代表一个Http Call。
*   遍历 Callables 并通过 ScheduledExecutorService 安排它们（可以在代码开头配置每秒应执行的请求数）。
*   在安排好所有 Callables 之后，我开始迭代 Futures。如果期货完成，则检索响应。每秒都这样做。如果没有新的 Future 完成，退出循环。

**我详细遇到了什么问题？**

*   很多时候，程序没有正确完成。我在控制台中看到了所有的日志打印，就好像程序正在正确完成一样。但实际上我看到 eclipse 中的停止按钮仍然处于活动状态![停止](../Images/34c386bd744d79b8537f34ee5147c891.png)。如果我单击它，它表示程序无法正确终止。无论我等待多长时间，它都不会完成（注意：我正在 eclipse 中启动程序）。
*   如果我增加请求的数量，我可以很容易地引发错误。如果我达到 2000 年，这肯定会发生。如果它发生我的操作系统甚至崩溃，我仍然可以使用 eclipse，但其他应用程序不再工作了。
*   我的环境是 Mac OS X 10.7 上的 Eclipse 3.7，带有 Java 1.6 和 Apache httpclient 4.2.2

您在我的代码中发现任何重大错误吗？在我的操作系统崩溃并且根本看不到任何异常的情况下，我从未在 java 程序中遇到过此类问题。

**编码：**

```
public class ConcurrentHttpRequestsTest {

    /**
     * @param args
     */
    public static void main(String[] args) {
        ScheduledExecutorService scheduledExecutorService = Executors.newScheduledThreadPool(25);

        Integer standardTimeout = 5000;
        Float numberOfRequestsPerSecond = 50.0f;
        Integer numberOfRequests = 500;
        Integer durationBetweenRequests = Math.round(1000 / numberOfRequestsPerSecond);

        // build Http Request
        HttpGet request = null;
        request = new HttpGet("http://www.spiegel.de");
        // request.addHeader("Accept", "application/json");
        HttpParams params = new BasicHttpParams();
        HttpConnectionParams.setConnectionTimeout(params, standardTimeout);
        HttpConnectionParams.setSoTimeout(params, standardTimeout);
        request.setParams(params);

        // setup concurrency logic
        Collection<Callable<Long>> callables = new LinkedList<Callable<Long>>();
        for (int i = 1; i <= numberOfRequests; i++) {
            HttpClient client = new DefaultHttpClient();
            callables.add(new UriCallable(request, client));
        }

        // start performing requests
        int i = 1;
        Collection<Future<Long>> futures = new LinkedList<Future<Long>>();
        for (Callable<Long> callable : callables) {
            ScheduledFuture<Long> future = scheduledExecutorService.schedule(callable, i * durationBetweenRequests, TimeUnit.MILLISECONDS);
            futures.add(future);
            i++;
        }

        // process futures (check wether they are ready yet)
        Integer maximumNoChangeCount = 5;
        boolean futuresAreReady = false;
        int noChangeCount = 0;
        int errorCount = 0;
        List<Long> responses = new LinkedList<Long>();
        while (!futuresAreReady) {
            boolean allFuturesAreDone = true;
            boolean atLeast1FutureIsDone = false;
            Iterator<Future<Long>> iterator = futures.iterator();

            while (iterator.hasNext()) {
                Future<Long> future = iterator.next();
                allFuturesAreDone = allFuturesAreDone && (future.isDone());
                if (future.isDone()) {
                    try {
                        atLeast1FutureIsDone = true;
                        responses.add(future.get());
                        iterator.remove();
                    } catch (Exception e) {
                        // remove failed futures (e.g. timeout)
                        // System.out.println("Reached catch of future.get()" +
                        // e.getClass() + " " + e.getCause().getClass() + " " +
                        // e.getMessage());

                        iterator.remove();
                        errorCount++;
                    }
                }
                if (future.isCancelled()) {
                    // this code is never reached. Just here to make sure that
                    // this is not the cause of problems.
                    System.out.println("Found a cancelled future. Will remove it.");
                    iterator.remove();
                }
            }
            if (!atLeast1FutureIsDone) {
                System.out.println("At least 1 future was not done. Current noChangeCount:" + noChangeCount);
                noChangeCount++;
            } else {
                // reset noChangeCount
                noChangeCount = 0;
            }
            futuresAreReady = allFuturesAreDone;

            // log the current state of responses, errors and remaining futures
            System.out.println("Size of responses :" + responses.size() + "; Size of futures:" + futures.size() + " Errors:" + errorCount);
            if (noChangeCount >= maximumNoChangeCount) {
                System.out.println("Breaking while loop becauce no new future finished in the last " + maximumNoChangeCount + " iterations");
                break;
            }
            // check every second
            try {
                Thread.sleep(1000);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }

        for (Long responsetime : responses) {
            // analyze responsetimes or whatever
        }
        // clean up
        // .shutdown() made even more problems than shutdownNow()
        scheduledExecutorService.shutdownNow();
        System.out.println("Executors have been shutdown - Main Method finished. Will exit System.");
        System.out.flush();
        System.exit(0);
    }

    private static class UriCallable implements Callable<Long> {
        private HttpUriRequest request;
        private HttpClient client;

        public UriCallable(HttpUriRequest request, HttpClient client) {
            super();
            this.request = request;
            this.client = client;
        }

        public Long call() throws Exception {
            Long start = System.currentTimeMillis();
            HttpResponse httpResponse = client.execute(request);
            Long end = System.currentTimeMillis();
            return end - start;
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T14:17:28.770

永远不要循环执行此操作：

```
 } catch (InterruptedException e) {
            e.printStackTrace();
        } 
```

它可能会导致关机问题。

此外，您的大部分代码都可以通过一次调用来替换`ExecutorService.invokeAll()`，因此请尝试一下，看看您是否有更多的运气。

最后，当您不知道您的 Java 应用程序在做什么时，运行`jconsole`，附加到应用程序，并查看线程堆栈以查看当前正在进行的代码。

# xml - 在 Spring 3 中使用注解注册转换器和转换器工厂

> ID：13778099
> 
> 赞同：8
> 
> 时间：2012-12-08T13:54:28.733
> 
> 标签：xml, spring, spring-mvc, annotations, converter

首先......我在 Spring 中相对较新，我使用 spring 3.x 并且我不喜欢 SPRING 的 XML 配置文件......我不希望每次重构都运行到 XML 文件进行更新......

我正在尝试以针对任何请求的方式配置spring，如果我的hadlers中有一些@RequestParam/@RequestBody/@PathVariable等类型不是String，spring会将值正确转换为该类型或将null放入处理程序args（我从不在处理程序参数中使用原始类型）。到目前为止，一切都很好 ...

到目前为止，我已经像这样注册了所有转换器/转换器工厂类：

```
 <bean id="conversionService" class="org.springframework.context.support.ConversionServiceFactoryBean">
     <property name="converters">
         <list>
             <!-- converters is a set of both converters and converterfactories -->
             <bean class="controller.converters.enumConverter" />
             <bean class="controller.converters.integerConverter" />
             <bean class="controller.converters.objects.FooConverter" />
             ...
         </list>
     </property>
 </bean> 
```

有没有办法用注释注册转换器？

关于 Spring XML 的任何事情（或只是基本的东西）都可以只用注释来完成，并且一劳永逸地摆脱 XML 配置吗？... 如何？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-08T14:41:07.330

Spring 没有对转换器的注解支持，但您可以构建自己的。

您所需要的只是一个自定义限定符注解（让我们称之为`@AutoRegistered`）和某种[`FormatterRegistrar`](http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/format/FormatterRegistrar.html)使用此`@AutoRegistered`注解注册所有 Spring Beans 的 Converter/Formatter Registrar（实现）（以及一些用于注册此注册服务的 xml）。

然后，您需要使用此注释（以及其他一些注释以使其成为 Spring bean）来注释您的转换器，仅此而已。

`@AutoRegistered`注解：

```
@Target({ ElementType.FIELD, ElementType.PARAMETER, ElementType.TYPE })
@Retention(RetentionPolicy.RUNTIME)
@Qualifier
public @interface AutoRegistered {} 
```

注册服务：

```
import java.util.List;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.core.convert.converter.Converter;
import org.springframework.format.FormatterRegistrar;
import org.springframework.format.FormatterRegistry;

public class AutoregisterFormatterRegistrar implements FormatterRegistrar {

    /**
     * All {@link Converter} Beans with {@link AutoRegistered} annotation.
     * If spring does not find any matching bean, then the List is {@code null}!.
     */
    @Autowired(required = false)
    @AutoRegistered
    private List<Converter<?, ?>> autoRegisteredConverters;

    @Override
    public void registerFormatters(final FormatterRegistry registry) {
        if (this.autoRegisteredConverters != null) {
            for (Converter<?, ?> converter : this.autoRegisteredConverters) {
                registry.addConverter(converter);
            }
        }
    }
} 
```

注册商的 XML 配置：

```
<bean id="applicationConversionService"
    class="org.springframework.format.support.FormattingConversionServiceFactoryBean">
    <property name="formatterRegistrars">
        <set>
            <bean
                class="AutoregisterFormatterRegistrar"
                autowire="byType" />
        </set>
    </property>
</bean> 
```

顺便说一句，对于您的枚举转换器，您不需要`ConversionFactory`- 一个简单的转换器就足够了：

```
@AutoRegistered
@Component
public class EnumConverter implements Converter<Enum<?>, String> {

    /** Use the same immutable value instead of creating an new array every time. */
    private static final Object[] NO_PARAM = new Object[0];

    /** The prefix of all message codes. */
    private static final String PREFIX = "label_";

    /** The separator in the message code, between different packages
        as well as between package can class. */
    private static final String PACKAGE_SEPARATOR = "_";

    /** The separator in the message code, between the class name
        and the enum case name. */
    private static final String ENUM_CASE_SEPARATOR = "_";

    /** The message source. */
    private MessageSource messageSource;

    @Autowired
    public EnumConverter(final MessageSource messageSource) {
        if (messageSource == null) {
            throw new RuntimeException("messageSource must not be null");
        }

        this.messageSource = messageSource;
    }

    @Override
    public String convert(final Enum<?> source) {
        if (source != null) {
            String enumValueName = source.name();
            String code = PREFIX + source.getClass().getName().toLowerCase().
                  replace(".", PACKAGE_SEPARATOR)
            + ENUM_CASE_SEPARATOR + enumValueName.toLowerCase();

            String message = messageSource.getMessage(code, NO_PARAM, enumValueName,
                                                  LocaleContextHolder.getLocale());

             return message;
         } else {
            return "";
         }
     }   
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-04-27T10:51:07.307

*[`@EnableAutoConfiguration`](http://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/autoconfigure/EnableAutoConfiguration.html)开启时，Spring Boot 还提供了*Converter bean 的自动注册- 请参阅*[Spring Boot 特性](http://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-developing-web-applications.html#boot-features-spring-mvc-auto-configuration)。似乎不需要额外的注释（除了将每个转换器 bean 标记为 a 之外`@Component`）。*

 ** * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-15T02:17:43.633

首先你必须定义一个注解：TypeConverter

```
@Target({ElementType.TYPE})
@Retention(RetentionPolicy.RUNTIME)
@Documented
@Component
public @interface TypeConverter {
} 
```

然后您必须注册转换服务并添加所有具有注释的 bean。这将使用以下后处理器完成：

```
public class ConverterRegistryPostProcessor implements BeanDefinitionRegistryPostProcessor {

public void postProcessBeanDefinitionRegistry(BeanDefinitionRegistry registry) throws BeansException {
    registry.registerBeanDefinition("conversionService", BeanDefinitionBuilder.rootBeanDefinition(ConversionServiceFactoryBean.class).getBeanDefinition());
}

public void postProcessBeanFactory(ConfigurableListableBeanFactory beanFactory) throws BeansException {
    Map<String, Object> beansWithAnnotation = beanFactory.getBeansWithAnnotation(TypeConverter.class);
    Collection converters = beansWithAnnotation.values();
    DefaultConversionService conversionService = (DefaultConversionService) beanFactory.getBean("conversionService");
    for (Object converter : converters) {
        conversionService.addConverter((Converter<?, ?>) converter);
    }
}
} 
```

如果您需要更多详细信息，请查看此 [博客条目](http://www.apprenticeshipnotes.org/2013/03/springframework-using-annotations-to_14.html)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-12-08T18:05:29.327

@Ralph 概述的方法很简洁，我已经 +1 了他的答案。让我还推荐一种使用`@Configuration` [支持](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/beans.html#beans-java-basic-concepts)​​的替代方法- 本质上是一种使用 Java 而不是 xml 配置 Spring bean 的方法。使用这种方法，消息转换器可以这样注册：

```
 @Configuration
 @EnableWebMvc
 @ComponentScan(...)
 public class CustomConfig extends WebMvcConfigurerAdapter {

    @Override
    public void configureMessageConverters(List<HttpMessageConverter<?>> converters) {
        converters.add(new EnumConverter());
                converters.add(new FooConverter());
                ...
    }

 } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-02-05T08:37:15.920

使用 Spring MVC 3.2，您可以创建一个扩展 DefaultFormattingConversionService 的转换服务类，例如

**应用程序转换服务.java**

```
import org.springframework.format.support.DefaultFormattingConversionService;
import org.springframework.stereotype.Component;

@Component("conversionService")
public class ApplicationConversionService extends DefaultFormattingConversionService  { 

    public ApplicationConversionService(){
        //DefaultFormattingConversionService's default constructor
        //creates default formatters and converters
        super(); //no need for explicit super()?

        //add custom formatters and converters
        addConverter(new MyConverter());
    }

} 
```

并在 spring 配置中指定它，例如

**调度程序-servlet.xml**

```
<mvc:annotation-driven conversion-service="conversionService"/> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-12-15T09:53:48.750

我不确定这是否适用于 Spring 3，但这是 Spring 4 的解决方案：

```
@Configuration
@EnableWebMvc
class WebMvcContext extends WebMvcConfigurerAdapter {

    @Override
    public void addFormatters(FormatterRegistry registry) {
        registry.addConverter(new DateConverter("yyyy-MM-dd HH:mm:ss"));
        //registry.addConverter(anotherConverter);
    }
} 
```

DateConverter 是一个自定义转换器：

```
public class DateConverter implements Converter<String, Date>{
    private static final Logger LOGGER = LoggerFactory.getLogger(DateConverter.class);
    private final String dateFormat;
    private final SimpleDateFormat formatter;
    public DateConverter(String dateFormatPattern) {
        this.dateFormat = dateFormatPattern;
        this.formatter = new SimpleDateFormat(dateFormatPattern);
    }

    @Override
    public Date convert(String source) {
        Date date = null;
        try {
            date = formatter.parse(source);
        } catch (ParseException e) {
            e.printStackTrace();
        }
        return date;
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-11-19T11:01:20.840

请执行下列操作：

```
@SpringBootApplication
@PropertySources({ @PropertySource("classpath:application.properties") })
public class YourApplication {

public static void main(String[] args) {
    SpringApplication.run(YourApplication.class, args);

    ConversionService conversionService = DefaultConversionService.getSharedInstance();
    ConverterRegistry converters = (ConverterRegistry) conversionService;
    converters.addConverter(new LocalDateToStringConverter());

    }

} 
```

LocalDateToStringConverter 看起来像这样。

```
public class LocalDateToStringConverter implements Converter<LocalDate, String> {

@Override
public String convert(LocalDate localDate) {
    try {

        String date = localDate.format(DateTimeFormatter.ofPattern("dd-MM-yyyy"));
        return date;
    } catch(DateTimeParseException ex) {
    }
    return null;
  }
} 
```*

# css - 有什么方法可以在 Less 中获取另一个元素值？

> ID：13778100
> 
> 赞同：17
> 
> 时间：2012-12-08T13:54:40.733
> 
> 标签：css, less

我是新手`Less`。

在我的脚本中，我想`width`使用`box1`in `box2`。

请检查我的脚本。

```
#box1
{
    width: 1000px;
    height: 500px;
}
#box2
{
    width: #box1.width - 100px;
} 
```

有没有可能？如果是，请给我正确的`Less`代码。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-08T14:24:16.600

不幸的是，这确实是不可能的。但是，您可以使用变量并执行以下操作：

```
@box1width: 1000px;
#box1
{
    width: @box1width;
    height: 500px;
}
#box2
{
    width: @box1width - 100;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T14:11:17.340

不，那是不可能的。LESS 处理样式表以生成 CSS，它对页面中的元素一无所知。

您正在寻找的是[CSS Expressions](http://msdn.microsoft.com/en-us/library/ms537634%28v=VS.85%29.aspx)，但这仅在 Internet Explorer 中受支持，并且在 IE8 中已放弃对它的支持。

# jquery - jQuery 向下滑动并显示前 3 个不同高度的孩子

> ID：13778102
> 
> 赞同：1
> 
> 时间：2012-12-08T13:54:56.417
> 
> 标签：jquery

这听起来很容易，但由于脚本和隐藏的孩子之后加载图像，我发现很难让它正常工作。每次加载页面时，我都会不断获得不同的高度。

[http://jsfiddle.net/ek5Uf/](http://jsfiddle.net/ek5Uf/)

```
$("h2").click(function(){
    var $wrap = $(this).parents(".wrapper");
    $wrap.find(".scroller").height(function(){
        var height = 0;            
        $wrap.find(".scroller > li:lt(3)").each(function(){
            height += $(this).outerHeight(true);
        });
        return height;
    }).slideDown();
});

$("h2").eq(0).click(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T14:38:24.397

不是很优雅，但这应该是将滚动条的高度设置为其前 3 个`li`项目的高度的可靠解决方案：

```
$("h2").click(function(){
    var $wrap = $(this).closest(".wrapper");
    $wrap.find(".scroller").height(function() {
        var lis = $("> li:gt(2)", this).detach(),
            ret = $(this).outerHeight(true);
        $(this).append(lis);
        return ret;
    }).slideDown();
}); 
```

[**小提琴**](http://jsfiddle.net/ek5Uf/5/)
我已经稍微编辑了你的小提琴，以便为图像提供不同的尺寸，以便更好地进行测试。

我尝试使用解决方案，`.position()`但它给出了奇怪`detach`的结果，因此`li`s > 2，仅使用前 3 s 获取`.scroller`s并重新附加分离的 s 是我能想象的最佳解决方案。`outerHeight``li``li`

# javascript - 输入百分比值

> ID：13778104
> 
> 赞同：2
> 
> 时间：2012-12-08T13:55:24.640
> 
> 标签：javascript, html, spring-mvc

我的 webapp 上有一些输入，我们要求用户输入百分比值（例如 10.75%、23%）。目前，他们必须以十进制形式输入这些值（例如 0.1075、0.23）。

这给一些用户造成了困惑，所以我希望有一种方法可以将值转换为这些格式（后端有十进制值，HTML 输入显示百分比值）。有没有办法解决这个问题，而不必用 javascript 或类似的东西自己动手？

我在 HTML5 输入中没有看到任何可以执行此操作的内容，并且我无法找到可以轻松执行此操作的 javascript 库。

其他人以什么方式在 HTML 中进行百分比输入？

* * *

**附加信息**

webapp 正在使用 Java/Spring，因此进入 HTML 页面的值来自相关 java 对象的字符串，所以理想情况下，我正在寻找不需要任何后端编码的东西。

* * *

**回答**

事实证明，Spring 3.0 会自动执行此操作。注释有问题的字段：

```
@NumberFormat(style = NumberFormat.Style.PERCENT)
private BigDecimal rate; 
```

将执行与输入字段之间的所有转换。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T14:55:10.387

所需的 javascript 非常简单。例如，您可以在用户提交时将用户输入的分数值存储在隐藏字段中。

```
​&lt;form id="myForm">
    <input type="text" id="myPercent" name="myPercent" />%
    <input type="hidden" id="myFraction" name="myFraction" />
    <input type="submit" />
</form>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​
<script type="text/javascript">
    document.getElementById('myForm').onsubmit = function() {
        document.getElementById('myFraction').value = 
            document.getElementById('myPercent').value / 100;
    }
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T13:58:44.860

这是简单的数学...... 75 到 0.75 是 75/100。包括在提交数字后转换数字的行。

# java - 当字符串是对象的属性时，为什么 Rhino (jsr-223) 不评估字符串？

> ID：13778107
> 
> 赞同：4
> 
> 时间：2012-12-08T13:55:37.953
> 
> 标签：java, javascript, rhino, jsr223

为什么 jsr-223 在是对象的属性时不评估字符串？

只有一个 String 属性的简单类：

```
public class EvalJSR223Bean {
    public String evalFnt;
} 
```

使用文本和对象的简单评估，当使用对象时，Rhino 不执行评估。但是，如果我将空的 javascript 字符串连接到对象属性，Rhino eval。

```
public static void main(String[] args) throws ScriptException {
    ScriptEngineManager manager = new ScriptEngineManager();
    ScriptEngine engine = manager.getEngineByName("JavaScript");

    engine.eval("function f2() {println('EXECUTED!!!!!')}; function f1(source) {  return eval(source); };");

    String evalFnt = "(function(){f2();return '0';})();";
    engine.put("evalFnt", evalFnt);
    engine.eval("f1(evalFnt);"); // f2 is executed.

    EvalJSR223Bean bean = new EvalJSR223Bean();
    bean.evalFnt = evalFnt;

    engine.put("bean1", bean.evalFnt);
    engine.eval("f1(bean1.evalFnt);"); // Why does NOT executed f2 ?!!.

    engine.put("bean", bean);
    engine.eval("f1(bean.evalFnt);"); // Why does NOT executed f2 ?!!.

    engine.put("bean", bean);
    engine.eval("f1( ''+bean.evalFnt );"); // And if I concatenate a string, f2 is executed!!!
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T16:08:18.157

`eval`如果字符串不是“string”类型，则忽略该字符串：

```
eval(new String('console.log("foo");')); 
```

因此，这可能是 Rhino 将属性视为“对象”类型的结果。当您`put`将字符串导入引擎时，它必须将其转换为值类型。

这段代码：

```
import javax.script.*;

public class ScriptDemo {
  public static class Bar {
    public String bar = "bar";
  }

  public static void main(String[] args) throws ScriptException {
    ScriptEngine engine =
                         new ScriptEngineManager().getEngineByName("JavaScript");
    engine.put("foo", "foo");
    engine.put("bar", new Bar());
    engine.eval("println(typeof foo);");
    engine.eval("println(typeof bar.bar);");
    engine.eval("println(typeof String(bar.bar));");
    engine.eval("println(typeof new String(bar.bar));");
  }
} 
```

输出：

```
string
object
string
object 
```

# c++ - 检查前提条件是否存在原子增量，即原子值小于指定值？

> ID：13778110
> 
> 赞同：4
> 
> 时间：2012-12-08T13:55:48.837
> 
> 标签：c++, c++11, atomic, atomic-swap, stdatomic

在新的标准 C++ 原子递增操作中，在递增值之前检查先决条件，即原子值小于指定值？

我可以比下面的代码更容易更快地完成它吗？

```
int atomic_inc(std::atomic_int& val, int less_than) {
 int new_val;
 int old_val = val.load();
 do
 {
   if (old_val > less_than) return old_val;
   new_val = old_val + 1;
 } while (!val.compare_exchange_weak(old_val, new_val));

 return new_val;
} 
```

如果有人不知道 compare_exchange_weak 的工作原理： compare_exchange_weak 读取 val，与 old_val 进行比较，如果它们不相等，则将 val 保存到 old_val。如果相等，则将 new_val 保存到 val。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-12T03:07:00.753

我过去做过的事情，可能对你有用，这取决于你用它做什么。

如果你可以假设它`val`不会经常剪辑——因此不做 CAS 的可能优化不会为你节省太多——你可以盲目地增加值并在阅读后调整它：

```
int atomic_inc(std::atomic_int& val, int less_than) {
    return std::min(++val, less_than);
} 
```

然后在需要时偶尔剪辑`val`回`less_than`，通常足以让您不必担心`int`溢出，并且您是金色的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-12T02:42:38.777

不，对于增加小于一个值的值没有特别的支持。您的代码尽可能高效。C++11 中没有无等待变体

有无限数量的可能“如果 X 则增加”模式。硬件制造商决定“不改变就增加”是他们唯一需要支持的东西。

理论上你可以发明一个带有特殊汇编代码的硬件平台，但 C++11 并不直接针对它。

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-12-08T14:22:41.627

如果您使用线程，则可以使用互斥锁进行原子增量。在这种情况下，你会这样做：

全局声明和初始化互斥锁：

```
pthread_mutex_t lock;
pthread_mutex_init(&lock, NULL) 
```

在一个线程中：

```
int atomic_inc(std::atomic_int& val, int less_than) {
    pthread_mutex_lock(&lock);
    int newVal = val.load();
    if (newVal < less_than)
        newVal++
    pthread_mutex_unlock(&lock);
    return new_val;
} 
```

`val`在任何其他线程中修改之前，您必须锁定和解锁互斥锁。

有关互斥锁的更多信息：[http ://www.yolinux.com/TUTORIALS/LinuxTutorialPosixThreads.html#SYNCHRONIZATION](http://www.yolinux.com/TUTORIALS/LinuxTutorialPosixThreads.html#SYNCHRONIZATION)

# java - JSF 与 RMI 教程

> ID：13778113
> 
> 赞同：3
> 
> 时间：2012-12-08T13:56:16.917
> 
> 标签：java, jsf, web-applications, rmi

我必须用 JSF 应用程序实现 RMI，但我还没有找到任何关于如何集成这两种技术的教程。我对 Java 的经验很少，只有一个用 JSF 开发的简单应用程序，所以我还是个初学者。

如果您知道任何可能有用的链接，请分享或提示，如果您可以解释我必须复习的要点，以便正确构建/配置我的项目。

先感谢您。

**更新：**

这是项目的要求：

“考虑一个名为“求职服务”的分布式网络应用程序。该应用程序应记录过去一年中的所有工作机会，说明该工作是否已被录用。用户应该能够发布工作机会并通过搜索按日期或类别提供的工作机会。

在使用分布式对象技术实现此系统时，请考虑以下约束：

1.  远程对象应公开“发布作业”系统功能，让用户向系统添加作业。
2.  远程对象应公开“搜索工作”功能，允许用户按日期或类别搜索工作。
3.  所有工作机会都必须有职位名称、公司名称、截止日期、联系方式和工作规范。

你的任务：

使用 Java 或 .NET 特定技术设计、实现和测试分布式应用程序。（RMI 或 .NET 远程处理技术是强制性的）"

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T14:30:37.400

这样做并不神秘。请记住，JSF 托管 bean 只是 Java 类，所以这里唯一的就是您的应用程序设计。为此，您可以拥有一个（非常）基本的骨架，如下所示：

在 JSF 项目中：

```
@ManagedBean
@RequestScoped
public class LoginBean {

    private String user;
    private String password;

    public LoginBean() {
    }

    //getters and setters...

    public String validateUser() {
        UserService userService = new UserService();
        if (userService.validateUser(user, password)) {
            return "success";
        }
        return "problems";
    }
}

public class UserService extends  {

    public UserService() {
    }

    public boolean validateUser(String user, String password) {
        //do the Java RMI client job here...
        boolean result = false;
        if (System.getSecurityManager() == null) {
            System.setSecurityManager(new SecurityManager());
        }
        try {
            String name = "UserServiceRMI";
            Registry registry = LocateRegistry.getRegistry(args[0]);
            UserServiceRMI userServiceRMI = (UserServiceRMI) registry.lookup(name);
            result = userServiceRMI.validateUser(user, password);
        } catch (Exception e) {
            //you can (and must) do a better error handling
            System.out.println("UserService exception:");
            e.printStackTrace();
        }
        return result;
    }
} 
```

在 RMI 服务器项目中：

```
public interface UserRMIService extends java.rmi.Remote {
    boolean validateUser(String user, String password) throws java.rmi.RemoteException;
}

public class UserService implements UserRMIService {

    public UserService() {
        super();
    }

    public boolean validateUser(String user, String password) {
        //do the user validation here...
        //check against the database or another way you want/need
    }

    public static void main(String[] args) {
        if (System.getSecurityManager() == null) {
            System.setSecurityManager(new SecurityManager());
        }
        try {
            String name = "UserRMIService";
            UserRMIService engine = new UserService();
            UserRMIService stub =
                (UserRMIService) UnicastRemoteObject.exportObject(engine, 0);
            Registry registry = LocateRegistry.getRegistry();
            registry.rebind(name, stub);
            System.out.println("UserService bound");
        } catch (Exception e) {
            //you can (and must) do a better error handling
            System.out.println("UserService exception:");
            e.printStackTrace();
        }
    }
} 
```

# java - 发送请求有时会落在我的应用程序中

> ID：13778116
> 
> 赞同：0
> 
> 时间：2012-12-08T13:56:38.810
> 
> 标签：java, android, http, httprequest, send

在使用我的 android 应用程序工作几个小时后，在下面的代码中，此代码崩溃，只是应用程序停止了，但如果我不关闭 wifi 连接工作，如果停止并尝试让一些资源应用程序崩溃。

```
public String getRequest(String url, ArrayList<NameValuePair> nameValuePairs)
    {

        HttpParams httpParameters = new BasicHttpParams();
        HttpProtocolParams.setContentCharset(httpParameters, HTTP.UTF_8);
        HttpProtocolParams.setHttpElementCharset(httpParameters, HTTP.UTF_8);

        AndroidHttpClient httpclient = null;

        //HttpClient httpclient = null;
        try {

            httpclient  = AndroidHttpClient.newInstance("V");

            //  httpclient = new DefaultHttpClient(httpParameters);

            httpclient.getParams().setParameter("http.protocol.content-charset", HTTP.UTF_8);

            HttpPost httppost = new HttpPost(url);

            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs,HTTP.UTF_8));  

            HttpResponse response = httpclient.execute(httppost);

            if((response != null) && (response.getStatusLine().getStatusCode() != 200))
            {
                int code =  response.getStatusLine().getStatusCode();
                httpclient.close();
                throw new IOException("Bad status code! - "+ code);
            }

            HttpEntity entity = response.getEntity();
            InputStream instream = entity.getContent();

            Reader reader = new InputStreamReader(instream, HTTP.UTF_8);

            StringBuilder buffer = new StringBuilder("");

            char[] tmp = new char[1024];
            int l;
            while ((l = reader.read(tmp)) != -1) {
                buffer.append(tmp, 0, l);
            }

            reader.close();

            try{
                if(entity != null){
                    entity.consumeContent();
                }
            }catch(Exception e){
                if((e != null) && (e.getMessage() != null)){
                    Log.e("V","Consume content ex-> "+e.getMessage().toString());
                }

            }

            String resp = buffer.toString().replace("&quot;", "\"");

            Log.d("V", "RESPONSE:-----\n" + resp + "\n--------------");

            try{

            httpclient.close();

            } catch(Exception e_close){
                if((e_close != null) && (e_close.getMessage() != null)){
                    Log.e("V","Exception in closing"+e_close.getMessage().toString());
                }
                Log.e("V","Exception - closing http unsuccessfully!");
            }

            return resp;

        } catch (IOException e){

            Log.e("V IOException [Send Request]","IO Ex");
            if((e != null) && (e.getMessage() != null)){
                Log.e("V",e.getMessage().toString());
            }
            return "";

        } catch (Exception e) { 

            Log.e("V Exception [Send Request]","Exception Requester");
            if((e != null) && (e.getMessage() != null)){
                Log.e("V",e.getMessage().toString());
            }
            return "";

        }finally {
            if (httpclient != null && httpclient.getConnectionManager() != null) {
                httpclient.getConnectionManager().shutdown();
                httpclient = null;
            }
        }

    } 
```

# html - 为什么我的 SVG 在 Firefox 中不能正确缩放？

> ID：13778118
> 
> 赞同：2
> 
> 时间：2012-12-08T13:56:44.180
> 
> 标签：html, css, firefox, svg, scaling

好吧，我已经用头撞了这个几个小时了，所以现在是时候把它扔在这里了，看看是否有人可以提供帮助：

基本问题是我在 html 页面上有一个 SVG，它的样式是响应式的，并且可以调整到浏览器窗口的宽度。该代码在 IE 和 Chrome 中都可以正常工作，但在 Firefox 上，当窗口小于某个大小时，SVG 会停止缩放。它会很好地扩大规模。只是为了激怒我，似乎当我在 Firefox 中“检查元素”并检查代码时，SVG 会正确调整大小以适应现在更小的查看区域。这是我的意思的一些屏幕截图：

![SVG 在 Chrome 中工作](../Images/477960cd21391fd690e81c349caab522.png)

![SVG 在 Firefox 中不起作用](../Images/ddbe096a494be65eb54e33c2bec4c735.png)

![Firefox“检查元素”视图中的 SVG](../Images/eab2348c012e94866ff7ea2ee439cd56.png)

这是我的代码，虽然很基本：

```
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" />
<title>Glynne McReynolds</title>
<link rel="stylesheet" type="text/css" href="css/styles.css">
</head>

<body>
<header>
    <img src="images/glynne-mcreynolds.svg" alt="Glynne McReynolds" title="Glynne McReynolds">
</header>
</body>
</html> 
```

以及相关的 CSS：

```
header {
    max-width: 500px;
    text-align: center;
    margin: 0px auto;
}
header img {
    width: 100%;
    height: auto%;
} 
```

我应该注意，我还包括了modernizr.js 的开发版本，但删除它并没有任何区别，所以我把它省略了。

我尝试过的事情：

*   从 SVG 中删除宽度和高度声明。
*   将 SVG 作为对象而不是`img`标签嵌入。

这里还有一个代码，这里[是](http://tylergreencreative.co.uk/glynne-mcreynolds.svg)[SVG](http://jsfiddle.net/tylergreen/3mGAV/)。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T03:59:08.130

您的 Firefox 屏幕截图显示窗口比浏览器 UI 要窄（注意截断的工具栏），因此视口实际上最终比窗口宽。

正如 Robert 上面提到的，UI 无法缩小到某个点通常是由向 UI 添加非灵活元素的附加组件引起的......

# java - 按降序对数组中的特定索引进行排序

> ID：13778120
> 
> 赞同：1
> 
> 时间：2012-12-08T13:56:58.913
> 
> 标签：java, arrays, eclipse

我有一个名为look的数组。它包含10个项目。如何按降序对数组中的索引 7 到 9 进行排序？下面是我使用升序排序索引 0 到 6 的代码。

```
Arrays.sort(look, 0, 6); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T14:02:04.397

`Arrays.sort(look, 7, 9, Collections.reverseOrder());`

应该管用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T14:01:42.203

您可以使用数组方法：

`public static <T> void sort(T[] a, int fromIndex, int toIndex, Comparator<? super T> c)`

在 Comparator 接口的帮助下，您可以定义自己的排序机制。

参见：[public static void sort(T[] a, int fromIndex, int toIndex, Comparator c))](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#sort%28T%5b%5d,%20int,%20int,%20java.util.Comparator%29)和[Comparator](http://docs.oracle.com/javase/7/docs/api/java/util/Comparator.html)

# php - php select-option post back 保留值

> ID：13778123
> 
> 赞同：0
> 
> 时间：2012-12-08T13:57:24.833
> 
> 标签：php

我有一个带有输入类型选择的表单，但是当页面提交并回发错误消息时选择值是干净的，我尝试使用单选按钮（选中未选中）来保留该值，但它不起作用。

```
//HTML///////////////////////////////////////////////////////////////////
<select name="age">
     <option value="">Age</option>
     <option value="14-17" <?PHP echo $age_14; ?>>14 - 17</option>
     <option value="18-29" <?PHP echo $age_18; ?>>18 - 29</option>
</select>

//PHP////////////////////////////////////////////////////////////////////
$age_14="unchecked";
$age_18="unchecked";

$age=$_POST['age'];
  if($age=='14-17'){$age_14="checked";}
  else if($age=='18-29'){$age_18="checked";} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T13:59:33.650

对于`select`框，属性是`selected`，而不是`checked`。您也不需要该`unchecked`属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T13:59:52.457

使用`select`标签，您必须使用`selected="selected"`not `checked`。

尝试：

```
$age_14 = "";
$age_18 = "";

$age = $_POST['age'];
if ($age == '14-17') {
    $age_14 = 'selected="selected"';
} elseif ($age == '18-29') { 
    $age_18 = 'selected="selected"';
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T14:00:34.190

没有`checked`属性。您需要使用`selected`：

```
$age=$_POST['age'];
$age_14 = $age=='14-17'?"selected":"";
$age_18 = $age=='18-29'?"selected":""; 
```

# c# - 从基于消息的请求中构建 where 过滤器

> ID：13778124
> 
> 赞同：1
> 
> 时间：2012-12-08T13:57:34.733
> 
> 标签：c#, servicestack, ormlite-servicestack

我有一个小请求对象要过滤。

```
public class BufferFlatViewFilter
{
    public bool? Active { get; set; }
    public int? CustomerId { get; set; }
    public int? TypeId { get; set; }
} 
```

我需要为 db 请求建立 where 过滤器。

使用实体框架，我能够像这样构建 Where 语句。

```
public List<BufferFlatView> GetBufferFlatView(BufferFlatViewFilter filter)
{
    var data = db.qryCampaignOverView
        .AsQueryable();

    if (filter.TypeId.HasValue)
        data = data.Where(x => x.TypeId == filter.TypeId.Value);

    if (filter.CustomerId.HasValue)
        data = data.Where(x => x.CustomerId == filter.CustomerId);

    if (filter.Active)
        data = data.Where(x => x.Active == filter.Active);

    return data.ToList();
} 
```

鉴于实体框架查询是延迟加载的，但不是 OrmLight 查询，我不确定如何为 OrmLight 构建 where 语句。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T20:24:32.937

我们最近在 OrmLite ExpressionVisitor 中添加了表达式链 - 从单元测试中复制和粘贴代码：

```
var visitor = dbConnection.CreateExpression<Person>();
visitor.Where(x => x.FirstName.StartsWith("Jim")).And(x => x.LastName.StartsWith("Hen"));
var results = db.Select<Person>(visitor);
Assert.AreEqual(1,results.Count);

visitor.Where(x => x.Age < 30).Or(x => x.Age > 45);
results = db.Select<Person>(visitor);
Assert.AreEqual(5, results.Count);
Assert.IsFalse(results.Any(x => x.FirstName == "Elvis")); 
```

注意： Where(x => predicate) 和 .And(x => predicate) 在功能上是相同的。

您还可以建立您的 Order By 表达式

```
visitor.OrderBy(x => x.Name).ThenByDescending(x => x.Age); 
```

所以你的代码变成

```
public List<BufferFlatView> GetBufferFlatView(BufferFlatViewFilter filter)
{
    //assumes IDbConnection instance injected by IOC
    var ev = dbConnection.CreateExpression<Campaign>();

    if (filter.TypeId.HasValue)
        ev.Where(x => x.TypeId == filter.TypeId.Value);

    if (filter.CustomerId.HasValue)
        ev.Where(x => x.CustomerId == filter.CustomerId);

    if (filter.Active)
        ev.Where(x => x.Active == filter.Active);

    return dbConnection.Select<Campaign>(ev); 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T19:34:24.910

你可以做这样的事情。

```
public class Poco
    {
        public int TypeId { get; set; }
        public int CustomerId { get; set; }
        public bool Active { get; set; }
    }

public class Filter<T>
{
    private List<Func<T, bool>> filters = new List<Func<T, bool>>();

    public void AddFilter(Func<T, bool> filter)
    {
        this.filters.Add(filter);
    }
    public bool PredicateFilter(T item)
    {
        return filters.All(x => x(item));
    }
}

static void Main(string[] args)
{

    var list = new List<Poco>() { new Poco { Active = true, CustomerId = 1, TypeId = 1 } };

    var filter = new Filter<Poco>();
    filter.AddFilter(x => x.Active == false);
    filter.AddFilter(x => x.CustomerId == 1);
    filter.AddFilter(x => x.TypeId == 1);

    var item = list.Where(x => filter.PredicateFilter(x));

    Console.Read();

} 
```

# java - 文件夹名称中的最后一个字符无法替换

> ID：13778125
> 
> 赞同：5
> 
> 时间：2012-12-08T13:57:41.840
> 
> 标签：java, formatting, directory, rename

我使用 .replace() 指令来清理文件夹名称。到目前为止，这对这些字符效果很好：{“。”，“”，“（”，“[”}但是当我到达右括号时，我收到一个错误。当我查看抛出这个的文件夹时错误它总是在末尾有一个右括号。手动删除右括号并再次执行代码后，下一个带有尾括号的文件夹会发生错误。

在每种情况下，字符都被替换为一个空格。

```
public void cleanFormat() {
    for (int i = 0; i < directories.size(); i++) {
        File currentDirectory = directories.get(i);
        for (File currentFile : currentDirectory.listFiles()) {
            String formattedName = currentFile.getName();
            formattedName = formattedName.replace(".", " ");
            formattedName = formattedName.replace("(", " ");
            formattedName = formattedName.replace(")", " "); // error here
            formattedName = formattedName.replace("[", " ");
            formattedName = formattedName.replace("]", " "); // and here
            formattedName = formattedName.replace("  ", " ");
            Path source = currentFile.toPath();
            try {
                Files.move(source, source.resolveSibling(formattedName));
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    }
    JOptionPane.showMessageDialog(null, "All folders have been formatted");
} 
```

错误是：

```
Exception in thread "AWT-EventQueue-0" java.nio.file.InvalidPathException: Trailing char < > at index 68: A Good Old Fashioned Orgy 2011 LIMITED 720p BluRay X264-AMIABLE EtHD 
at sun.nio.fs.WindowsPathParser.normalize(Unknown Source)
at sun.nio.fs.WindowsPathParser.parse(Unknown Source)
at sun.nio.fs.WindowsPathParser.parse(Unknown Source)
at sun.nio.fs.WindowsPath.parse(Unknown Source)
at sun.nio.fs.WindowsFileSystem.getPath(Unknown Source)
at sun.nio.fs.AbstractPath.resolveSibling(Unknown Source)
at domain.DirectoryListing.cleanFormat(DirectoryListing.java:86) 
```

文件夹名称：

```
A Good Old Fashioned Orgy 2011 LIMITED 720p BluRay X264-AMIABLE EtHD] 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-08T14:05:45.643

您收到此异常是因为文件名中的最后一个字符是空格，而底层操作系统 (Windows) 将不接受带有尾随空格字符的文件名。

这个空格作为尾随字符很可能是多次`String#replace`调用的结果，请确保不要用空格替换字符串中的最后一个字符。

# python - Python 3 的 TrueType 字体库

> ID：13778126
> 
> 赞同：1
> 
> 时间：2012-12-08T13:57:50.280
> 
> 标签：python, windows, python-3.x, truetype

我在列表中有一个字体名称。我想将这些字体的字体文件（.ttf，.otf）从 Windows 字体目录复制到指定目录。并且一些字体名称是本地化的形式（即我不能使用 Windows 注册表来找出字体名称）

我找到了几个 Python 解决方案，但我找不到在 python 3 和 windows 上运行的任何解决方案。

有没有我可以使用的库（因为速度并不重要，所以我可以使用可以读取 ttf/otf 元数据的库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T14:16:17.027

如果你找到了 python2 的解决方案，你可以用[2to3将它们转换为 python3](http://docs.python.org/2/library/2to3.html)

# java - Eclipse 中没有 java.lang.NoClassDefFoundError 错误

> ID：13778128
> 
> 赞同：0
> 
> 时间：2012-12-08T13:58:39.670
> 
> 标签：java, eclipse

我在 Eclipse 中有一个项目，它在几分钟前运行良好。我添加了一个 JDBC 驱动程序广告试图运行它，现在甚至以前的可运行文件都给了我

**线程“主”java.lang.NoClassDefFoundError 中的异常：示例**

有谁知道为什么会发生它与罐子有什么关系吗？我什至把罐子拿走了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T14:17:07.540

尝试跟随，一一

1.  如果您正在使用库，请检查是否所有内容都正确包含在项目中。
2.  重建项目
3.  “几分钟前工作”意味着它曾经工作过。您是否添加了任何新代码？那么错误就在那里，检查那些代码是否调用了其他类，是否可用
4.  重启IDE

一旦我使用以下方法解决了同样的问题

[http://javarevisited.blogspot.com/2011/06/noclassdeffounderror-exception-in.html](http://javarevisited.blogspot.com/2011/06/noclassdeffounderror-exception-in.html)

如果以上都失败了，那可能是由于 JVM 崩溃了。我也经历过。

# scala - 使用 Scala 进行类似方法调用的单个中缀

> ID：13778132
> 
> 赞同：1
> 
> 时间：2012-12-08T13:59:13.087
> 
> 标签：scala

在 Scala 中，点表示法在很多情况下是可选的，例如`1 + 2`equals `1.+(2)`。

但是是否也有可能，用一些魔法，写出类似的东西：

```
object u {
  def meth (s: String) = println(s)
  meth "str"  // as shortcut for meth("str")
} 
```

结果：

```
<console>:3: error: ';' expected but string literal found. 
```

但这对于创建内部 DSL 来说将是非常有趣的，如果这样的话。*注意*：在这个假设的问题中，我不想使用`u meth "str"`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T14:14:27.940

您可以使用 Scala 2.10 中的字符串插值来做类似的事情，但我认为您不应该：

```
scala> implicit class Meth(val sc: StringContext) extends AnyVal {
     |   def meth(): String = "meth" + sc.parts(0)
     | }
defined class Meth

scala> meth"str"
res0: String = methstr 
```

不可能像`meth "str"`在 Scala 中那样使用表达式。您可以写`u meth "str"`,或`"str" meth`,但不能。`meth"str"``meth ("str")``meth "str"`

# c++ - QT在QGraphicsScene上绘制富文本

> ID：13778133
> 
> 赞同：1
> 
> 时间：2012-12-08T13:59:24.097
> 
> 标签：c++, qt, qt4, rich-text-editor, richtext

我正在为图形编写非常简单的矢量工具。我在`QTextEditor`. 我也有课延伸`QGraphicsScene`到我所有的图纸所在的地方。我想以某种方式从`QTextEditor`这个场景中绘制文本？我有哪些选择？

此致！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T14:02:22.683

你可以使用[`QPainter::drawtext()`](http://harmattan-dev.nokia.com/docs/library/html/qt4/qpainter.html#drawText)方法。基本上你得到一个你想画的区域的画家，然后用这个方法来画你的文字。

```
 QPainter p(this);
 p.drawText(rect(), Qt::AlignCenter, "Hello World!"); 
```

# android - 带有 ScrollView 的相对布局

> ID：13778134
> 
> 赞同：1
> 
> 时间：2012-12-08T13:59:30.630
> 
> 标签：android, android-layout

嗨，里面有主要的线性布局，我有这些视图具有相同的树 ScrollView、LinearLayout 然后是相对布局，我正在尝试设置相对布局边距，它是大多数子视图，但它的边距没有做任何事情，我有所有这些视图高度和宽度为 Fill_Parent。任何人都可以指导我如何解决这个问题？

# hadoop - 蜂巢总是减少到 0%

> ID：13778136
> 
> 赞同：2
> 
> 时间：2012-12-08T13:59:41.473
> 
> 标签：hadoop, mapreduce, hive, bigdata

我使用 hive 分析数据我在 hive 上运行 hiveql 时创建表并将本地文件加载到 hive

`select sum(qlog_test.contlength) from qlog_test where qlog_test.area='HK' limit 10;` 它卡在地图上 100% 减少 0%

`2012-12-08 21:39:28,349 Stage-1 map = 80%, reduce = 0%, Cumulative CPU 29.72 sec 2012-12-08 21:39:29,370 Stage-1 map = 80%, reduce = 0%, Cumulative CPU 29.72 sec 2012-12-08 21:39:30,385 Stage-1 map = 80%, reduce = 0%, Cumulative CPU 29.72 sec 2012-12-08 21:39:31,401 Stage-1 map = 80%, reduce = 0%, Cumulative CPU 29.72 sec 2012-12-08 21:39:32,413 Stage-1 map = 80%, reduce = 0%, Cumulative CPU 29.72 sec 2012-12-08 21:39:33,423 Stage-1 map = 80%, reduce = 0%, Cumulative CPU 29.72 sec 2012-12-08 21:39:34,434 Stage-1 map = 100%, reduce = 0%, Cumulative CPU 35.89 sec 2012-12-08 21:39:35,445 Stage-1 map = 100%, reduce = 0%, Cumulative CPU 35.89 sec 2012-12-08 21:39:36,455 Stage-1 map = 100%, reduce = 0%, Cumulative CPU 35.89 sec 2012-12-08 21:39:37,466 Stage-1 map = 100%, reduce = 0%, Cumulative CPU 35.89 sec 2012-12-08 21:39:38,485 Stage-1 map = 100%, reduce = 0%, Cumulative CPU 35.89 sec 2012-12-08 21:39:39,503 Stage-1 map = 100%, reduce = 0%, Cumulative CPU 35.89 sec 2012-12-08 21:39:40,515 Stage-1 map = 100%, reduce = 0%, Cumulative CPU 35.89 sec 2012-12-08 21:39:41,526 Stage-1 map = 100%, reduce = 0%, Cumulative CPU 35.89 sec 2012-12-08 21:39:42,536 Stage-1 map = 100%, reduce = 0%, Cumulative CPU 35.89 sec 2012-12-08 21:39:43,551 Stage-1 map = 100%, reduce = 0%, Cumulative CPU 35.89 sec 2012-12-08 21:39:44,561 Stage-1 map = 100%, reduce = 0%, Cumulative CPU 35.89 sec 2012-12-08 21:39:45,570 Stage-1 map = 100%, reduce = 0%, Cumulative CPU 35.89 sec 2012-12-08 21:39:46,580 Stage-1 map = 100%, reduce = 0%, Cumulative CPU 35.89 sec 2012-12-08 21:39:47,589 Stage-1 map = 100%, reduce = 0%, Cumulative CPU 35.89 sec 2012-12-08 21:39:48,603 Stage-1 map = 100%, reduce = 0%, Cumulative CPU 35.89 sec 2012-12-08 21:39:49,619 Stage-1 map = 100%, reduce = 0%, Cumulative CPU 35.89 sec 2012-12-08 21:39:50,632 Stage-1 map = 100%, reduce = 0%, Cumulative CPU 35.89 sec 2012-12-08 21:39:51,647 Stage-1 map = 100%, reduce = 0%, Cumulative CPU 35.89 sec 2012-12-08 21:39:52,661 Stage-1 map = 100%, reduce = 0%, Cumulative CPU 35.89 sec 2012-12-08 21:39:53,675 Stage-1 map = 100%, reduce = 0%, Cumulative CPU 35.89 sec 2012-12-08 21:39:54,686 Stage-1 map = 100%, reduce = 0%, Cumulative CPU 35.89 sec 2012-12-08 21:39:55,698 Stage-1 map = 100%, reduce = 0%, Cumulative CPU 35.89 sec 2012-12-08 21:39:56,710 Stage-1 map = 100%, reduce = 0%, Cumulative CPU 35.89 sec 2012-12-08 21:39:57,720 Stage-1 map = 100%, reduce = 0%, Cumulative CPU 35.89 sec 2012-12-08 21:39:58,732 Stage-1 map = 100%, reduce = 0%, Cumulative CPU 35.89 sec 2012-12-08 21:39:59,747 Stage-1 map = 100%, reduce = 0%, Cumulative CPU 35.89 sec 2012-12-08 21:40:00,758 Stage-1 map = 100%, reduce = 0%, Cumulative CPU 35.89 sec 2012-12-08 21:40:01,768 Stage-1 map = 100%, reduce = 0%, Cumulative CPU 35.89 sec 2012-12-08 21:40:02,777 Stage-1 map = 100%, reduce = 0%, Cumulative CPU 35.89 sec 2012-12-08 21:40:03,786 Stage-1 map = 100%, reduce = 0%, Cumulative CPU 35.89 sec 2012-12-08 21:40:04,795 Stage-1 map = 100%, reduce = 0%, Cumulative CPU 35.89 sec 2012-12-08 21:40:05,804 Stage-1 map = 100%, reduce = 0%, Cumulative CPU 35.89 sec 2012-12-08 21:40:06,815 Stage-1 map = 100%, reduce = 0%, Cumulative CPU 35.89 sec 2012-12-08 21:40:07,828 Stage-1 map = 100%, reduce = 0%, Cumulative CPU 35.89 sec 2012-12-08 21:40:08,840 Stage-1 map = 100%, reduce = 0%, Cumulative CPU 35.89 sec 2012-12-08 21:40:09,854 Stage-1 map = 100%, reduce = 0%, Cumulative CPU 35.89 sec 2012-12-08 21:40:10,867 Stage-1 map = 100%, reduce = 0%, Cumulative CPU 35.89 sec` 这是我的 hadoop 节点详细信息

![在此处输入图像描述](../Images/bd41158b344363a340a4e45823cc8257.png)

这是地图/减少工作细节 ![在此处输入图像描述](../Images/33863b30edac896d21cb26d87c9f8d36.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-13T20:49:39.110

我有这个问题。确保查看减速器日志。参考您的屏幕截图，单击减少行中的 1 并跟踪记录所有数据的文件。然后，单击全部，然后查看导致问题的原因。我遇到的问题是 IP 配置错误，因此 mapper 和 reducer 无法通信。重新启动我的系统有帮助。编辑您的问题以包括减少日志所说的内容，也许我们可以进一步帮助您。

# unit-testing - midje 事实的设置和拆卸临时目录

> ID：13778139
> 
> 赞同：2
> 
> 时间：2012-12-08T13:59:59.233
> 
> 标签：unit-testing, clojure, midje

这是我想要实现的框架

```
(let [temp-dir (create-temp-dir)]          ; setup
  (fact
    (do-something-with temp-dir) => true)  ; actual test
  (delete-dir temp-dir))                   ; teardown 
```

midje 测试框架允许[访问词法范围](https://github.com/marick/Midje/wiki/Setup,-Teardown,-and-State)（向下滚动到最后）。所以这就是我期望的工作：

```
(against-background
  (around :facts
    (let [temp-dir (create-temp-dir)]
      (do ?form (delete-dir temp-dir))))
  (fact (do-something-with temp-dir) => true)) 
```

但是编译器抱怨它无法解析符号`temp-dir`。知道如何进行这项工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T16:17:39.543

您缺少包装器周围的方括号。从您包含的链接中：

> 零个或多个包装器可以以三种不同的形式找到：
> 
> （反对背景[包装] ...）
> 
> 包装器适用于背景中的所有表单。
> 
> （事实......（反对背景包装）......）
> 
> 从语义上讲，这与包装这个单一事实的背景相同。反背景表单可以出现在事实的顶级表单中的任何位置，并且可以有多个。请注意，它没有被 [] 包围。
> 
> （背景包装......）

# asp.net-mvc - 一个控制器中的多个存储库并初始化数据库连接

> ID：13778142
> 
> 赞同：3
> 
> 时间：2012-12-08T14:00:08.047
> 
> 标签：asp.net-mvc

我想使用存储库模式（我知道我可以使用工作单元模式，但我想在这里使用存储库模式）。因此，在每个存储库类中，我都有对特定表的查询，例如：

```
public class NotesRepository : INotesRepository, IDisposable
{
    private DatabaseContext context;

    public NotesRepository(DatabaseContext context)
    {
        this.context = context;
    }

    public IQueryable<Notes> GetAllNotes()
    {
        return (from x in context.Notes
                select x);
    }
} 
```

还有另一个存储库示例：

```
public class CommentsRepository : ICommentsRepository, IDisposable
{
    private DatabaseContext context;

    public CommentsRepository(DatabaseContext context)
    {
        this.context = context;
    }

    public IQueryable<Comments> GetAllComments()
    {
        return (from x in context.Comments
                select x);
    }
} 
```

现在我想在一个控制器中使用这两个存储库。因此，使用存储库模式，我在控制器构造函数中初始化数据库连接并将其传递给每个存储库，对吗？例如：

```
public class HomeController : Controller
{
    private INotesRepository NotesRepository;
    private ICommentsRepository CommentsRepository;

    public HomeController()
    {
        DatabaseContext db = new DatabaseContext();

        this.NotesRepository = new NotesRepository(db);
        this.CommentsRepository = new CommentsRepository(db);
    }

    // ........
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T16:10:20.390

我认为您应该至少更进一步，让控制器将存储库作为构造函数中的依赖项。这意味着您将在自定义`ControllerFactory`（在 ASP.NET MVC 和 MVC2 中使用）或 DependencyResolver（在 ASP.NET MVC3 IIRC 中引入；如果迁移到 IoC 容器则非常适合）创建 Controller 和 Repository 实例。DatabaseContext 通常`HttpRequest`在 Web 应用程序中创建，以便在请求期间保持相同的 UnitOfWork。如果您使用的是 IoC 容器，这很容易完成，因为所有主要容器都内置了对此的支持。如果您手动执行此操作，则必须连接一些机制来创建和处理`DatabaseContext`in`Application.BeginRequest`和`EndRequest`事件。

为简单起见，我将给您一个 ASP.NET MVC 示例，不使用容器并且`DatabaseContext`每个`Controller`. 当 Controller 被“释放”时，DatabaseContext 也不会被释放。

```
public class HomeController : Controller
{
    private INotesRepository notesRepository;
    private ICommentsRepository commentsRepository;

    public HomeController(INotesRepository notesRepostory, 
        ICommentsRepository commentsRepository)
    {
        this.notesRepository = notesRepository;
        this.commentsRepository = commentsRepository;
    }
}

public class MyControllerFactory : DefaultControllerFactory
{
    protected override IController GetControllerInstance(
        RequestContext requestContext, Type controllerType)
    {
        if (controllerType == null)
            return base.GetControllerInstance(requestContext, controllerType);

        DatabaseContext db = new DatabaseContext();
        //Here you should have logic to determine which 
        //type of controller to create
        return new HomeController(new NotesRepository(db), 
            new CommentsRepository(db));
    }
} 
```

在 Global.asax Application.Start 事件处理程序中：

```
ControllerBuilder.Current.SetControllerFactory(new MyControllerFactory()); 
```

如果你走容器路线的话，有很多使用 MVC 和你最喜欢的 Container 品牌的 IoC 的例子。

使用控制反转的优点是应用程序变得松散耦合并且更易于更改和维护。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T14:08:10.673

当您使用存储库时，您希望将数据访问代码从业务逻辑中抽象出来，因此处理控制器内部的连接不是很干净。也许存储库不是您在这里需要的...

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-08T14:04:37.127

这里的情况非常适合使用依赖注入（`DatabaseContext`是`NotesRepository`和的依赖`CommentsRepository`）。

[像Ninject](http://stefanoricciardi.com/2011/01/21/ninject-mini-tutorial-part-1/)这样的依赖注入容器很容易解决这个问题。

# jquery - KendoUI Slider：我可以在没有鼠标交互的情况下生成 SLIDE 或 CHANGE 事件吗？

> ID：13778143
> 
> 赞同：2
> 
> 时间：2012-12-08T14:00:12.073
> 
> 标签：jquery, events, slider, mouseevent, kendo-ui

我正在开发一个使用 KendoUI 小部件作为 GUI的[六边形图案生成器。](http://bit.ly/hexagrid)

我正在尝试实现一个`Randomize()`将滑块句柄动画到随机位置的函数。单击随机化时调用该函数！按钮。这应该会在 Kendo 滑块上生成一个`slide`or`change`事件，该事件又会触发`changeYcomp(e)`调用`init()`更新模式的函数的回调。

**滑块的标记**：

```
 <div class="sliderwrapper" id="yslider">
                            <label for="ycompSlider">Y variation</label>
          <input id="ycompSlider" class="slider" />
 </div> 
```

**回调脚本**：

```
function changeYcomp(e) {
    kendoConsole.log("New slide value is: " + e.value);
    ycomp = e.value;
    init();
} 
```

**滑块的参数分配**：

```
$("#ycompSlider").kendoSlider({
                                slide: changeYcomp,
                                change: changeYcomp,
                                min: -10,
                                max: 10,
                                smallStep: 1,
                                largeStep: 10,
                                value: 0
                            }); 
```

**随机化功能**：

```
function Randomize() {
    console.log("Randomizing!")
    $("#yslider .k-draghandle").animate({
      left: Math.round(Math.random()*130-7)
    });

} 
```

不幸的是，无论是`.k-draghandle`通过 CSS 动画更改位置，还是更改任何滑块的 HTML 属性都不会触发任何事件。

**我假设滑块只监听鼠标事件。**

目前唯一的选择是通过`step`在动画上添加功能来分别管理滑块手柄位置和更新功能。

我想避免这种情况，因为它会强制重新设计或涉及重复。

帮助表示赞赏。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-08T14:47:48.347

您可以`trigger()`在小部件上使用该函数来触发其事件：

```
$("#yslider").data("kendoSlider").trigger("slide", { value: 123 }); 
```

需要注意的是，您必须指定它传递给回调的事件对象。幸运的是，幻灯片事件仅包含该`value`属性。

所以你可以这样做：

```
var slider = $("#slider").data("kendoSlider");
slider.value(5);
slider.trigger("slide", { value: slider.value() }); 
```

有关工作示例，请参阅[此 jsFiddle 。](http://jsfiddle.net/rally25rs/66Wsj/1/)

# java - 如何从命令行 Java 程序清除终端中的先前内容

> ID：13778144
> 
> 赞同：-1
> 
> 时间：2012-12-08T14:00:13.437
> 
> 标签：java, input

我是Java新手，我认为有一个简单的问题，我找不到答案（可能是我的谷歌无法正常工作:)）。

我有一个创建一些应用程序的任务，在它开始之前，用户应该在控制台中输入一些信息，例如：

```
[devel@edu-cs-tpl bank_side]$  ./crypto.sh -i
Enter number of ZMK components (1 - 9): 2
Enter ZMK component 1: 1f1f1f1f1f1f1f1f2d2d2d2d2d2d2d2d
Enter ZMK component 2: 4a4a4a4a4a4a4a4a4a4a4a4a4a4a4a4a
Enter ZEK under ZMK: 
```

我正在使用 java.util.Scanner 进行此输入。是否可以在 Java 上“隐藏”上次输入的组件？我是说：

1)

```
[devel@edu-cs-tpl bank_side]$  ./crypto.sh -i
Enter number of ZMK components (1 - 9): 2
Enter ZMK component 1: 1f1f1f1f1f1f1f1f2d2d2d2d2d2d2d2d 
```

2)

```
[devel@edu-cs-tpl bank_side]$  ./crypto.sh -i
Enter number of ZMK components (1 - 9): 2
Enter ZMK component 2: 4a4a4a4a4a4a4a4a4a4a4a4a4a4a4a4a 
```

请建议我该怎么做。

非常感谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-08T14:09:16.790

您可以在运行时通过命令行参数传递参数。

另请查看[java 中的清除屏幕选项](https://stackoverflow.com/questions/1682212/clear-screen-option-in-java) 上面的链接表明没有直接的方法可以做您正在寻找的事情。

# java - 如何在java项目中提取PE-Header信息？

> ID：13778151
> 
> 赞同：1
> 
> 时间：2012-12-08T14:00:56.300
> 
> 标签：java, portable-executable

我需要从`Portable Executable`标题中提取一些字段并在 java 项目中使用它们的值。如何组合我的 Java 项目中存在的不同插件（例如 , `PE-Explorer`）`PE-Info`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T11:50:46.193

我建议只创建一个二进制阅读器并根据文件格式自己读取字节。这并不难，你可以提取你需要的东西。

请参阅：http: [//msdn.microsoft.com/en-us/magazine/ms809762.aspx](http://msdn.microsoft.com/en-us/magazine/ms809762.aspx)

# javascript - 如何在javascript中将数字添加到数组中？

> ID：13778161
> 
> 赞同：-1
> 
> 时间：2012-12-08T14:02:17.053
> 
> 标签：javascript, arrays

我正在尝试向数组添加一个数字。

代码：

```
var year = mm[2].value+1; 
```

但结果未定义。

你们能怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T14:12:13.843

在添加之前，您需要将字符串解析为整数：

```
var dt = "12/02/2012"; 
var mm = de.split("/"); 
var year = parseInt(mm[2])+1; 
```

# r - ggplot 不按给定顺序绘制数据

> ID：13778164
> 
> 赞同：1
> 
> 时间：2012-12-08T14:02:27.733
> 
> 标签：r, ggplot2

我正在尝试绘制一些日期点：

```
library(ggplot2)
library(plyr)
set.seed(1234)

df <- data.frame(
  c1 = as.character(1:10),
  c2 = sample(seq(from=as.Date("2012-01-01"),to=as.Date("2012-12-01"),by="day"), 10)
)
df <- arrange(df,c2)
qplot(c2,c1,data=df) + scale_x_date(breaks="1 month") 
```

虽然我使用*arrange*来对数据进行排序，但ggplot并没有按顺序绘制数据： ![在此处输入图像描述](../Images/07c6e981e816f4f5cf19e5bef2ab951b.png)

预期的情节是：

![在此处输入图像描述](../Images/a93263d89f692b1521ff825d396d92b2.png)

如何告诉 ggplot 以给定的顺序绘制 c1 列，而不是“字符”类型的自然排序顺序？

会话信息（）：

```
R version 2.14.1 (2011-12-22)
Platform: x86_64-pc-linux-gnu (64-bit)

locale:
 [1] LC_CTYPE=fr_FR.UTF-8       LC_NUMERIC=C               LC_TIME=fr_FR.UTF-8        LC_COLLATE=fr_FR.UTF-8    
 [5] LC_MONETARY=fr_FR.UTF-8    LC_MESSAGES=fr_FR.UTF-8    LC_PAPER=C                 LC_NAME=C                 
 [9] LC_ADDRESS=C               LC_TELEPHONE=C             LC_MEASUREMENT=fr_FR.UTF-8 LC_IDENTIFICATION=C       

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] plyr_1.7.1      ggplot2_0.9.2.1

loaded via a namespace (and not attached):
 [1] colorspace_1.2-0   dichromat_1.2-4    digest_0.5.2       grid_2.14.1        gtable_0.1.1       labeling_0.1      
 [7] MASS_7.3-16        memoise_0.1        munsell_0.4        proto_0.3-9.2      RColorBrewer_1.0-5 reshape2_1.2.1    
[13] scales_0.2.2       stringr_0.6.1      tools_2.14.1 
```

输入（df）：

```
structure(list(c1 = structure(c(8L, 1L, 9L, 2L, 4L, 5L, 3L, 7L, 
10L, 6L), .Label = c("1", "10", "2", "3", "4", "5", "6", "7", 
"8", "9"), class = "factor"), c2 = structure(c(15343, 15378, 
15416, 15508, 15543, 15547, 15548, 15551, 15558, 15625), class = "Date")), .Names = c("c1", 
"c2"), row.names = c(NA, -10L), class = "data.frame") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T15:58:06.977

# 没有问题（R）。

您一直在针对从整数强制转换的数字字符向量绘制日期的随机排列。你得到的正是你所要求的。无需重新安装 R 或任何软件包。'c2' 列中的日期将在构建绘图的过程中进行排序，因此无需对它们进行预排序，这样做不会产生任何影响。

如果您希望 y 轴上的标签是 c1 值，但 y 值是顺序统计量（整数顺序），那么您需要绘制 1:length(c1) 与日期并更改默认标签。（这在您理解绘图过程的预期行为方面仍然存在困难。无需重新安装 R。）这是基本图形解决方案：

```
> with(df, plot(c2,1:10, yaxt="n"))
> axis(2, at=1:10, labels=df$c1) 
```

我发现 ggplot 文档相当令人沮丧。尝试找到如何替换轴标签的方法并不明显。我尝试了 update_labels 没有成功。在该系统中使用不同的语言来绘制实体对我来说仍然是一个持续的障碍。我知道很多人有相反的反应，而且 ggplot2 是许多人最喜欢的包。（编辑：这似乎在 ggplot 世界中创建了所需的情节：）

```
> p <- qplot(c2, 1:nrow(df),data=df) + scale_x_date(breaks="1 month")
> p
> p + scale_y_discrete( labels=df$c1) 
```

# php - 使用PHP删除XML中节点内的节点

> ID：13778165
> 
> 赞同：0
> 
> 时间：2012-12-08T14:02:30.000
> 
> 标签：php, xml, removechild

我想从我的 XML 文件中删除一个特定的节点，似乎我错过了代码中的某些内容！你能帮我弄清楚吗，例如我想删除标签及其所有内部标签。

XML结构：

```
 <students>
    <student>
     <username>sally</username>
     <subjects>
    <subjects>sub1</subjects>
    <subjects>sub2</subjects>
    <subjects>sub3</subjects>
     </subjects>
    </student>
<student>
     <username>jojo</username>
     <subjects>
    <subjects>sub1</subjects>
    <subjects>sub2</subjects>
    <subjects>sub3</subjects>
 <subjects>sub4</subjects>
 <subjects>sub5</subjects>
     </subjects>
    </student>
    </students> 
```

功能 ：

```
 public static function delete_subjects($UserName, $fileName) {
        //delete from xml
        $xml = new DOMDocument();
        $xml->load($fileName);

        $users = $xml->getElementsByTagName('student');
        foreach ($users as $user) {
          $username = $user->getElementsByTagName('username')->item(0)->nodeValue;
          if ($username == $UserName) {
                $p=$user->getElementsByTagName('subjects')->item(0);
                $xml->documentElement->removeNode($p);

                break;
            }
        }
        $xml->save($fileName);
    } 
```

称呼 ：

```
delete_subjects('jojo', $fileName); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T14:05:50.823

而不是`$xml->documentElement->removeNode($p);`尝试使用`$user->removeChild($p);`

**编辑**：甚至`$p->parentNode->removeChild($p);`

# mysql - GPS 跟踪系统的 MySQL 查询优化

> ID：13778168
> 
> 赞同：0
> 
> 时间：2012-12-08T14:02:57.283
> 
> 标签：mysql, optimization

我有以下查询：

```
SELECT * FROM `alltrackers`
WHERE `deviceid`='FT_99000083401624'
AND `locprovider`!='none'
ORDER BY `id` DESC 
```

这是显示创建表：

```
CREATE TABLE `alltrackers` (
  `id` int(11) NOT NULL AUTO_INCREMENT, 
  `deviceid` varchar(50) NOT NULL,
  `gpsdatetime` int(11) NOT NULL,
  `locprovider` varchar(30) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `statename` (`statename`),
  KEY `gpsdatetime` (`gpsdatetime`),
  KEY `locprovider` (`locprovider`), 
  KEY `deviceid` (`deviceid`(18))
) ENGINE=MyISAM AUTO_INCREMENT=8665045 DEFAULT CHARSET=utf8; 
```

我已经删除了我认为对于这个问题没有必要的列。

这是此查询的 EXPLAIN 输出：

> id select_type table type possible_keys key key_len ref rows Extra
> 
> 1 SIMPLE alltrackers ref locprovider,deviceid deviceid 56 const 156416 使用where；使用文件排序

此特定查询在 mytop (mtop) 中显示为需要几秒钟。不过，我有点困惑，因为相同的查询但具有不同的“deviceid”并不需要很长时间。虽然我只需要最后一行，但我已经删除了 LIMIT 1，因为这样会花费更长的时间。该表当前包含 300 万行。

它用于存储来自不同 GPS 设备的位置。每个 GPS 设备都有一个唯一的设备 ID。位置进来并被添加到表中。对于统计信息，我正在运行上述查询以查找从某个设备上次接收到位置的时间。

我愿意就进一步优化查询甚至表的方法提出建议。

提前谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T14:23:08.080

如果您只需要最后一行，请在`(deviceid, id, locprovider)`. 使用索引会更快`(deviceid, id, locprovider, gpsdatetime)`：

```
ALTER TABLE alltrackers
  ADD INDEX special_covering_IDX
    (deviceid, id, locprovider, gpsdatetime) ; 
```

然后试试这个：

```
SELECT  id, locprovider, gpsdatetime 
FROM alltrackers
WHERE deviceid = 'FT_99000083401624'
AND locprovider <> 'none'
ORDER BY id DESC
  LIMIT 1 ; 
```

# python - QWebview：上传到 Youtube 返回错误

> ID：13778169
> 
> 赞同：0
> 
> 时间：2012-12-08T14:03:07.453
> 
> 标签：python, video, upload, youtube, qwebview

这是我的情况：我创建了一个 QWebview，加载了一个 Youtube 页面，然后登录。我选择上传选项 (http://www.youtube.com/my_videos_upload)，然后选择要上传的视频。但是，youtube 总是返回

“服务器返回了无效响应。请按照以下步骤重新尝试上传文件。”

我该如何解决这个问题？谢谢。

编辑：我使用的代码是：

```
import sys
from PyQt4.QtCore import QUrl
from PyQt4.QtGui import QApplication
from PyQt4.QtWebKit import QWebView
from PyQt4.QtNetwork import QNetworkAccessManager
from PyQt4 import QtCore

def fillForm(web, username, password):
    print "Filling in the form"
    doc = web.page().mainFrame().documentElement()

    print "Finding username tag"
    user = doc.findFirst("input[id=Email]")
    print "Finding passwd tag"
    passwd = doc.findFirst("input[id=Passwd]")    

    print "Setting information"
    user.evaluateJavaScript("this.value = '%s'" % username)
    passwd.evaluateJavaScript("this.value = '%s'" % password)    
    button = doc.findFirst("input[id=signIn]")
    button.evaluateJavaScript("this.click()")

def doLogin(web, url, username, password):        
    web.loadFinished.connect(lambda: fillForm(web, username, password))
    web.load(url)
    web.show()

if __name__ == "__main__":
    app = QApplication(sys.argv)
    nam = QNetworkAccessManager()
    web = QWebView()
    web.page().setNetworkAccessManager(nam)
    url = QUrl(r"https://accounts.google.com/Login")
    username = "name"
    password = "pass"
    doLogin(web, url, username, password)
    app.exec_() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T14:30:31.017

尝试在之后添加`web = QWebView()`：

```
settings = web.settings()
settings.setAttribute(QWebSettings.PluginsEnabled, True) 
```

# networking - UDP 网络基础

> ID：13778172
> 
> 赞同：3
> 
> 时间：2012-12-08T14:03:23.007
> 
> 标签：networking, udp

我一直在做一些使用 UDP 的 C# Networking 工作。我过得很好，但需要回答几个我在测试时遇到问题的基本问题：

*   目前我正在以约 16000 字节的数据报的形式发送数据，根据wireshark 的说法，它被分成几个 1500 字节的数据包（由于最大数据包大小限制），然后在另一端重新组装。

我是否理解数据报将在另一端完整接收或根本不接收。IE 这是一个全有或全无的事情。由于数据包丢失，没有机会以碎片数据报结束？

因此，我只需要对每个数据报进行 ACK，而不是确保我的数据报小于 1500 字节并且每个都 ACK？

我看过很多地方，但数据报和底层数据包之间的差异似乎有很多混淆......

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T14:26:09.780

> 由于数据包丢失，没有机会以碎片数据报结束？

我相信这是真的：分片和分片重组是由 UDP 下面的协议层处理的，即它是由“IP”层处理的，如果它无法将数据包碎片重组成数据报（例如，搜索[RFC 792](https://www.rfc-editor.org/rfc/rfc792)中的“片段” ）。

[http://www.pcvr.nl/tcpip/udp_user.htm#11_5](http://www.pcvr.nl/tcpip/udp_user.htm#11_5)说，

> “目的地的 IP 层执行重组。目标是使分段和重组对传输层（TCP 和 UDP）透明，但可能会降低性能。”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T14:26:20.130

正如您现在可能的 16 位 UDP 长度字段表明您总共可以发送 65535 个字节。但是理论上数据可以是(sizeof(IP Header) + sizeof(UDP Header)) = 65535-(20+8) = 65507字节。

但这并不意味着所有使用 UDP 的应用程序都会发送此数量的数据，例如 DNS 数据包限制为 512 字节。这是因为您没有从服务器获得任何 ACK 数据包。这是数据包可能在网络中丢失的原因之一（数据包传输问题和丢失）。其次，中间节点可以将数据报封装在另一个协议中，例如 IPSEC 或其他协议就是这样做的。

对于 UDP，没有 ACK 数据包，因此在您的情况下，如果底层应用程序使用 UDP，您应该看不到任何 ACK 数据包。其次，一些服务器根据应用程序将它们的大小限制为最大 UDP 数据包，因此如果您有从客户端到服务器的数据传输，您应该看到相同的字节，例如 512 字节。在wireshark中来来往往。大多数情况下，源发出请求，而目标发送回 X 字节的 UDP 数据报。

这些链接可能对您的问题有帮助：

1.  [Wireshark UDP分析](http://it.iut.ac.ir/sites/fsites/it/files/u4/uploads/Networking%20Class-Wireshar%20Labs-Solutions/04-Wireshark_UDP_Solution_July_22_2007.pdf)
2.  [RFC 1122](https://www.rfc-editor.org/rfc/rfc1122) （声明 576 是最小最大重组缓冲区大小）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-08T22:58:02.767

> 我是否理解数据报将在另一端完整接收或根本不接收。IE 这是一个全有或全无的事情。由于数据包丢失，没有机会以碎片数据报结束？

那是对的。

> 因此，我只需要对每个数据报进行 ACK，而不是确保我的数据报小于 1500 字节并且每个都 ACK？

我不明白这个问题。无论大小如何，您都需要对每个数据报进行 ACK，*并且*应该使它们 < 1500 字节，这样它们就不会碎片化。否则，您可能永远无法传输任何特定的数据报，如果它反复分片并且片段反复丢失。

# arduino - 如何使用 Processing 绘制串行数据

> ID：13778173
> 
> 赞同：1
> 
> 时间：2012-12-08T14:03:44.347
> 
> 标签：arduino, processing

我正在尝试绘制一些通过串行端口读取的传感器数据。我找到了 2D 绘图仪的处理示例代码，我正在尝试对其进行更改以适用于我的应用程序。

不过，编程有点过头了。我可以看到它正在从三个方程类中获取三行的数据。我想用变量或指向最新传感器更新的东西替换读取 mouseX 的部分。传感器数据在 void`Draw()`循环中不断更新。

```
/**
 * RollingGraph
 * This sketch makes ise of the RollingLine2DTrace object to
 * draw a dynamically updated plot.
 */

import org.gwoptics.graphics.graph2D.Graph2D;
import org.gwoptics.graphics.graph2D.traces.ILine2DEquation;
import org.gwoptics.graphics.graph2D.traces.RollingLine2DTrace;

class eq implements ILine2DEquation{
    public double computePoint(double x,int pos) {
        return mouseX;
    }
}

class eq2 implements ILine2DEquation{
    public double computePoint(double x,int pos) {
        return mouseY;
    }
}

class eq3 implements ILine2DEquation{
public double computePoint(double x,int pos) {
    if(mousePressed)
        return 400;
    else
        return 0;
    }
}

RollingLine2DTrace r,r2,r3;
Graph2D g;

void setup(){
    size(600,300);

    r  = new RollingLine2DTrace(new eq() ,100,0.1f);
    r.setTraceColour(0, 255, 0);

    r2 = new RollingLine2DTrace(new eq2(),100,0.1f);
    r2.setTraceColour(255, 0, 0);

    r3 = new RollingLine2DTrace(new eq3(),100,0.1f);
    r3.setTraceColour(0, 0, 255);

    g = new Graph2D(this, 400, 200, false);
    g.setYAxisMax(600);
    g.addTrace(r);
    g.addTrace(r2);
    g.addTrace(r3);
    g.position.y = 50;
    g.position.x = 100;
    g.setYAxisTickSpacing(100);
    g.setXAxisMax(5f);
}

void draw(){
    background(200);
    g.draw();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T18:24:26.807

不完全确定您拥有的代码是否是您所需要的，但这里有一个简单的程序，它接受串行输入并制作折线图。希望这可以帮助。

```
 import processing.serial.*;
    Serial myPort;
    int x = 0;

    void setup() {
      size(600, 400);
      println(Serial.list());  //list of available serial ports
      String portName = Serial.list()[0]; //replace 0 with whatever port you want to use.
      myPort = new Serial(this, portName, 9600);
    }

    void draw() {
    }

    void serialEvent(Serial myPort) {
      int inByte = myPort.read();
      println(inByte);
      stroke(90, 76, 99);
      //vertical line with height varying according to input
      line(x, height, x, height - inByte); 
      if (x >=width) {
        x=0;
        background(0);
      }
      x++;
    } 
```

# c - 简单的 C 数据类型

> ID：13778174
> 
> 赞同：1
> 
> 时间：2012-12-08T14:03:52.993
> 
> 标签：c, types, primitive-types

> **可能重复：**
> [int8_t、int_least8_t 和 int_fast8_t 的区别？](https://stackoverflow.com/questions/5254051/the-difference-of-int8-t-int-least8-t-and-int-fast8-t)

我很困惑。我认为...（如果我错了，请纠正我）

```
u_int8_t = unsigned short ?
u_int16_t = unsigned int ?
u_int32_t = unsigned long ?
u_int64_t = unsigned long long ?

int8_t = short ?
int16_t = int ?
int32_t = long ?
int64_t = long long ? 
```

那么是什么`int_fast8_t`意思呢？`int_fastN_t`? `int_least8_t`?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T14:06:53.300

我写 int 是 16 位的：

```
u_int8_t = unsigned char  
u_int16_t = unsigned int
u_int32_t = unsigned long int
u_int64_t = unsigned long long int 

int8_t =  char
int16_t = int 
int32_t = long int
int64_t = long long int 
```

* * *

问：“那么 int_fast8_t 是什么意思？int_fastN_t？int_least8_t？”

正如 dan04 在[他的回答](https://stackoverflow.com/questions/5254051/the-difference-of-int8-t-int-least8-t-and-int-fast8-t/5254321#5254321)中所说：

> 假设您有一个用于 36 位系统的 C 编译器，具有`char`= 9 位、`short`= 18 位、`int`= 36 位和`long`= 72 位。然后
> 
> *   `int8_t` *不存在*，因为没有办法满足*只有*8 个值位且没有填充的约束。
> *   `int_least8_t`是一个 typedef `char`。不是`short`or `int`，因为标准要求具有至少 8 位的*最小类型。*
> *   `int_fast8_t`可以是任何东西。`int`如果“本机”大小被认为是“快速”，它可能是一个 typedef 。

* * *

如果您在`Linux`大多数情况下，这些都定义在`/usr/include/linux/coda.h`. 例如

```
#ifndef __BIT_TYPES_DEFINED__
#define __BIT_TYPES_DEFINED__
typedef signed char       int8_t;
typedef unsigned char       u_int8_t;
typedef short            int16_t;
typedef unsigned short     u_int16_t;
typedef int          int32_t;
typedef unsigned int       u_int32_t;
#endif 
```

和

```
#if defined(DJGPP) || defined(__CYGWIN32__)
#ifdef KERNEL
typedef unsigned long u_long;
typedef unsigned int u_int;
typedef unsigned short u_short;
typedef u_long ino_t;
typedef u_long dev_t;
typedef void * caddr_t;
#ifdef DOS
typedef unsigned __int64 u_quad_t;
#else 
typedef unsigned long long u_quad_t;
#endif 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T14:09:54.063

这些都在 C99 标准（第 7.18 节）中指定。

这些`[u]intN_t`类型是通用类型（在 ISO C 标准中），其中`N`表示位宽（8、16 等）。8位不一定是`short`或，`char`因为shorts/ints/longs/etc被定义为具有*最小*范围（不是位宽）并且可能不是二进制补码。

这些较新的类型*是*二进制补码，而不考虑更常见类型的编码，可能是二进制补码或符号/大小（请参阅[C 中负数的表示？](https://stackoverflow.com/questions/3952123/representation-of-negative-numbers-in-c/3952262#3952262)和[为什么 SCHAR_MIN 在 C99 中定义为 -127？](https://stackoverflow.com/questions/8010040/why-is-schar-min-defined-as-127-in-c99/8010063#8010063)）。

`fast`并且`least`正是它们听起来的样子，快速最小宽度类型和至少给定宽度的类型。

该标准还详细说明了哪些类型是必需的，哪些是可选的。

# c# - 重新创建子控件和 ViewState

> ID：13778176
> 
> 赞同：0
> 
> 时间：2012-12-08T14:04:18.467
> 
> 标签：c#, asp.net, viewstate, composite-controls, childcontrol

请参阅[https://stackoverflow.com/questions/41810306/appointment-scheduling](https://stackoverflow.com/questions/41810306/appointment-scheduling) ...。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T15:30:50.420

好的，我找到了解决方案：

诀窍是为每个 editButton 提供一个 ID (string.format("editButton_{0}", i)。

如果您有更好的解决方案，请告诉我。

# php - 具有特定输入的登录字段

> ID：13778182
> 
> 赞同：2
> 
> 时间：2012-12-08T14:04:54.710
> 
> 标签：php, web, preg-match, string-matching

我想创建一个仅接受某些类型的电子邮件地址的注册输入字段（例如，只接受以 结尾的电子邮件地址`@yahoo.com`），以便我可以在谁可以访问我的网站方面提供一些安全性（例如，我只想接受来自我学校学生的电子邮件地址，即它们必须以`@school.edu`) 结尾。

这是我到目前为止所拥有的，但这并不区分特定类型的电子邮件：

```
<?php

    // configuration
    require("../includes/config.php"); 

    // if form was submitted
    if ($_SERVER["REQUEST_METHOD"] == "POST")
    {
        // validate inputs
        if (empty($_POST["username"]))
        {
            apologize("You must provide a username.");
        }
        else if (empty($_POST["password"]))
        {
            apologize("You must provide a password.");
        }
        else if (empty($_POST["confirmation"]) || $_POST["password"] != $_POST["confirmation"])
        {
            apologize("Those passwords did not match.");
        }

        // try to register user
        $results = query("INSERT INTO users (username, hash, cash) VALUES(?, ?, 10000.0000)",
            $_POST["username"], crypt($_POST["password"])
        );
        if ($results === false)
        {
            apologize("That username appears to be taken.");
        }

        // get new user's ID
        $rows = query("SELECT LAST_INSERT_ID() AS id");
        if ($rows === false)
        {
            apologize("Can't find your ID.");
        }
        $id = $rows[0]["id"];

        // log user in
        $_SESSION["id"] = $id;

        // redirect to portfolio
        redirect("/");
    }
    else
    {
        // else render form
        render("register_form.php", ["title" => "Register"]);
    }

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T14:18:57.293

您还可以使用简单的正则表达式来验证用户的电子邮件

```
if(preg_match('#^(.*)\@school\.edu$#', $_POST['email'])) {
    echo 'email is valid';
} else {
    echo 'this is not valid email!';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T14:09:46.670

您可以结合使用[substr()](http://php.net/manual/en/function.substr.php)函数和[strrpos()](http://php.net/manual/en/function.strrpos.php)来获取电子邮件的最后一部分：

```
if(substr($email, strrpos($email, "@")) == "@school.edu") {
  //all good
} 
```

完成此操作后，您可以通过电子邮件向他们发送一个指向所提供电子邮件的确认链接，以确保它不是伪造的。

# javascript - 无法使用带有 Uploadify 的表单传递数据

> ID：13778186
> 
> 赞同：2
> 
> 时间：2012-12-08T14:05:33.520
> 
> 标签：javascript, jquery, uploadify

对不起，如果我是多余的，但我已经尝试了我在这里和谷歌上找到的每一个例子：D

我想要做的是上传图片，在输入框中输入的内容将被发送到我插入的 uplodify.php。我的问题是，图片的名称已保存到 mysql，但在文本字段上输入的内容却没有。

你们能让我知道发生了什么事吗？

这是我的代码的一部分

```
'multi'                 : true,
'auto'                  : false,
'onUploadStart' : function(file) {
$("#file_upload").uploadify('settings', 'formData', {'galeria':  $('#galeria').val()});
}, 

<form id="form1" name="form1" action="">
  <p>
    <input type="file" id="file_upload" name="file_upload" />
    <br>
    <br>
    Galeria<br>
    <label>
      <input type="text" name="galeria" id="galeria"> 
```

上传文件

```
 $galeria = $_POST['galeria'];
    $regiao = $_POST['regiao'];

if (!empty($_FILES)) {
    $img      = $_FILES['Filedata']['name'];
    $ext      = substr($img, -4);
    $img      = md5($img).date("dmYHis").$ext;  
    $tempFile = $_FILES['Filedata']['tmp_name'];
     $targetPath = $_SERVER['DOCUMENT_ROOT'] . $_REQUEST['folder'] . '/';
    $targetFile =  str_replace('//','/',$targetPath) . $img;

    $adicionar = mysql_query ("INSERT INTO imagens (foto, galeria, regiao) VALUES('$img','$galeria','$regiao')");

    // $fileTypes  = str_replace('*.','',$_REQUEST['fileext']);
    // $fileTypes  = str_replace(';','|',$fileTypes);
    // $typesArray = split('\|',$fileTypes);
    // $fileParts  = pathinfo($_FILES['Filedata']['name']);

    // if (in_array($fileParts['extension'],$typesArray)) {
        // Uncomment the following line if you want to make the directory if it doesn't exist
    //  mkdir(str_replace('//','/',$targetPath), 0755, true);

        move_uploaded_file($tempFile,$targetFile);
        echo str_replace($_SERVER['DOCUMENT_ROOT'],'',$targetFile);
    // } else {
    //  echo 'Invalid file type.';
    // }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T05:38:14.663

尝试更改您的 onUploadStart 方法以扩展 uploadify formData 属性，如下所示：

```
onUploadStart: function ( file ) {
  var $fileUpload = $('#file_upload')
      , formData = $fileUpload.uploadify('settings', 'formData')
      , newFormData = $.extend({}, formData, { galeria: $('#galeria').val() });

      $fileUpload.uploadify('settings', 'formData', newFormData);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T19:40:00.007

我终于成功了

这是我使用的代码

```
 $('#file_upload').attr('file_upload', response).show();
$.post("insert2.php",{name: fileObj.name, galeria: $("#galeria").val(), regiao: $("#regiao").val()}, function(info) {
alert(info); // alert UPLOADED FILE NAME
        });
    }
}); 
```

现在我有一个不同的问题，哈哈，它总是显示正确......

由于在 dabase 上保存文件的代码在 insert2.php 上，而重命名图片的代码在 uploadify.php 中。如何将新名称保存在数据库中，而不是我上传的文件名？

另一个问题....这是一种根据数据库中的图片生成缩略图的方法吗？

# javascript - jQuery Carousel 控件锁定在内容的底部

> ID：13778187
> 
> 赞同：2
> 
> 时间：2012-12-08T14:05:40.823
> 
> 标签：javascript, jquery, html, css

有一个很棒的小旋转木马滑块。`next-slide/prev-slide`问题是，只有当它们所在的 div 位于标记中的滑块内容 div 下方时，这些控件似乎才起作用。我希望这些控件位于滑块内容之上，有点像这样——

```
<h4>Slider</h4><div id="controls" style="float:right;">prev | next</div>
<div id="slider content">
  <ul>
    <li></li>
  </ul>
</div> 
```

现在只有当我将控件 div 放在滑块内容 div 下时它才会起作用。

现在，我可以使用 CSS 将控件相对定位在页面上并将它们推到滑块内容上方，即使它们在标记中位于滑块内容下方，但这是一个问题，因为它在不同的浏览器中产生了很多松散的差异，因为其中的滑块内容`ul`非常流畅。我只想将控件浮动在与 h4 相同的行上，而不必使用相对定位等使整个控件 div 跳过滑块 div。

有没有办法将控件从滑块的“主体”中分离出来，以便它可以在我放置控件 div 的任何地方工作？

```
(function( $ ){

var _css = {};

var methods = {
    //
    // Initialize plugin
    //
    init : function( options ){

        var options = $.extend( {}, $.fn.lemmonSlider.defaults, options );

        return this.each(function(){

            var $slider = $( this ),
                data = $slider.data( 'slider' );

            if ( ! data ){

                var $sliderContainer = $slider.find( options.slider ),
                    $sliderControls = $slider.next().filter( '.controls' ),
                    $items = $sliderContainer.find( options.items ),
                    originalWidth = 1;

                $items.each(function(){ originalWidth += $( this ).outerWidth( true ) });
                $sliderContainer.width( originalWidth );

                // slide to last item
                if ( options.slideToLast ) $sliderContainer.css( 'padding-right', $slider.width() );

                // infinite carousel
                if ( options.infinite ){

                    originalWidth = originalWidth * 3;
                    $sliderContainer.width( originalWidth );

                    $items.clone().addClass( '-after' ).insertAfter( $items.filter(':last') );
                    $items.filter( ':first' ).before( $items.clone().addClass('-before') );

                    $items = $sliderContainer.find( options.items );

                }

                $slider.items = $items;
                $slider.options = options;

                // first item
                //$items.filter( ':first' ).addClass( 'active' );

                // attach events
                $slider.bind( 'nextSlide', function( e, t ){

                    var scroll = $slider.scrollLeft();
                    var x = 0;
                    var slide = 0;

                    $items.each(function( i ){
                        if ( x == 0 && $( this ).position().left > 1 ){
                            x = $( this ).position().left;
                            slide = i;
                        }
                    });

                    if ( x > 0 && $sliderContainer.outerWidth() - scroll - $slider.width() > 0 ){
                        slideTo( e, $slider, scroll+x, slide, 'fast' );
                    } else if ( options.loop ){
                        // return to first
                        slideTo( e, $slider, 0, 0, 'slow' );
                    }

                });
                $slider.bind( 'prevSlide', function( e, t ){

                    var scroll = $slider.scrollLeft();
                    var x = 0;
                    var slide = 0;

                    $items.each(function( i ){
                        if ( $( this ).position().left < 0 ){
                            x = $( this ).position().left;
                            slide = i;
                        }
                    });

                    if ( x ){
                        slideTo( e, $slider, scroll+x, slide, 'fast' )
                    } else if ( options.loop ){
                        // return to last
                        var a = $sliderContainer.outerWidth() - $slider.width();
                        var b = $items.filter( ':last' ).position().left;
                        slide = $items.size() - 1;
                        if ( a > b ){
                            slideTo( e, $slider, b, slide, 'fast' );
                        } else {
                            slideTo( e, $slider, a, slide, 'fast' );
                        }
                    }

                });
                $slider.bind( 'nextPage', function( e, t ){

                    var scroll = $slider.scrollLeft();
                    var w = $slider.width();
                    var x = 0;
                    var slide = 0;

                    $items.each(function( i ){
                        if ( $( this ).position().left < w ){
                            x = $( this ).position().left;
                            slide = i;
                        }
                    });

                    if ( x > 0 && scroll + w < originalWidth ){
                        slideTo( e, $slider, scroll+x, slide, 'slow' );
                    } else if ( options.loop ){
                        // return to first
                        slideTo( e, $slider, 0, 0, 'slow' );
                    }

                });
                $slider.bind( 'prevPage', function( e, t ){

                    var scroll = $slider.scrollLeft();
                    var w = $slider.width();
                    var x = 0;

                    $items.each(function( i ){
                        if ( $( this ).position().left < 1 - w ){
                            x = $( this ).next().position().left;
                            slide = i;
                        }
                    });

                    if ( scroll ){
                        if ( x == 0 ){
                            //$slider.animate({ 'scrollLeft' : 0 }, 'slow' );
                            slideTo( e, $slider, 0, 0, 'slow' );
                        } else {
                            //$slider.animate({ 'scrollLeft' : scroll + x }, 'slow' );
                            slideTo( e, $slider, scroll+x, slide, 'slow' );
                        }
                    } else if ( options.loop ) {
                        // return to last
                        var a = $sliderContainer.outerWidth() - $slider.width();
                        var b = $items.filter( ':last' ).position().left;
                        if ( a > b ){
                            $slider.animate({ 'scrollLeft' : b }, 'slow' );
                        } else {
                            $slider.animate({ 'scrollLeft' : a }, 'slow' );
                        }
                    }

                });
                $slider.bind( 'slideTo', function( e, i, t ){

                    slideTo(
                        e, $slider,
                        $slider.scrollLeft() + $items.filter( ':eq(' + i +')' ).position().left,
                        i, t );

                });

                // controls
                $sliderControls.find( '.next-slide' ).click(function(){
                    $slider.trigger( 'nextSlide' );
                    return false;
                });
                $sliderControls.find( '.prev-slide' ).click(function(){
                    $slider.trigger( 'prevSlide' );
                    return false;
                });
                $sliderControls.find( '.next-page' ).click(function(){
                    $slider.trigger( 'nextPage' );
                    return false;
                });
                $sliderControls.find( '.prev-page' ).click(function(){
                    $slider.trigger( 'prevPage' );
                    return false;
                });

                //if ( typeof $slider.options.create == 'function' ) $slider.options.create();

                $slider.data( 'slider', {
                    'target'  : $slider,
                    'options' : options
                })

            }

        });

    },
    //
    // Destroy plugin
    //
    destroy : function(){

        return this.each(function(){

            var $slider = $( this ),
                $sliderControls = $slider.next().filter( '.controls' ),
                data = $slider.data( 'slider' );

            $slider.unbind( 'nextSlide' );
            $slider.unbind( 'prevSlide' );
            $slider.unbind( 'nextPage' );
            $slider.unbind( 'prevPage' );
            $slider.unbind( 'slideTo' );

            $sliderControls.find( '.next-slide' ).unbind( 'click' );
            $sliderControls.find( '.prev-slide' ).unbind( 'click' );
            $sliderControls.find( '.next-page' ).unbind( 'click' );
            $sliderControls.find( '.next-page' ).unbind( 'click' );

            $slider.removeData( 'slider' );

        });

    }
    //
    //
    //
}
//
// Private functions
//
function slideTo( e, $slider, x, i, t ){

    $slider.items.filter( 'li:eq(' + i + ')' ).addClass( 'active' ).siblings( '.active' ).removeClass( 'active' );

    if ( typeof t == 'undefined' ){
        t = 'fast';
    }
    if ( t ){
        $slider.animate({ 'scrollLeft' : x }, t, function(){
            checkInfinite( $slider );
        });
    } else {
        var time = 0;
        $slider.scrollLeft( x );
        checkInfinite( $slider );
    }

    //if ( typeof $slider.options.slide == 'function' ) $slider.options.slide( e, i, time );

}
function checkInfinite( $slider ){

    var $active = $slider.items.filter( '.active' );
    if ( $active.hasClass( '-before' ) ){

        var i = $active.prevAll().size();
        $active.removeClass( 'active' );
        $active = $slider.items.filter( ':not(.-before):eq(' + i + ')' ).addClass( 'active' );
        $slider.scrollLeft( $slider.scrollLeft() + $active.position().left );

    } else if ( $active.hasClass( '-after' ) ){

        var i = $active.prevAll( '.-after' ).size();
        $active.removeClass( 'active' );
        $active = $slider.items.filter( ':not(.-before):eq(' + i + ')' ).addClass( 'active' );
        $slider.scrollLeft( $slider.scrollLeft() + $active.position().left );

    }

}
//
// Debug
//
function debug( text ){
    $( '#debug span' ).text( text );
}
//
//
//
$.fn.lemmonSlider = function( method ){  

    if ( methods[method] ) {
        return methods[ method ].apply( this, Array.prototype.slice.call( arguments, 1 ));
    } else if ( typeof method === 'object' || !method ){
        return methods.init.apply( this, arguments );
    } else {
        $.error( 'Method ' +  method + ' does not exist on jQuery.lemmonSlider' );
    }

};
//
//
//
$.fn.lemmonSlider.defaults = {

    'items'       : '> *',
    'loop'        : true,
    'slideToLast' : false,
    'slider'      : '> *:first',
    // since 0.2
    'infinite'    : false

}

})( jQuery ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T21:08:31.517

似乎迫使您将控件移至底部的行是这一行：

```
$sliderControls = $slider.next().filter( '.controls' ), 
```

那就是寻找紧跟在滑块元素之后的元素，然后在所述元素中寻找具有“控件”类的元素。

如果您希望控件直接位于滑块上方，您可以尝试将该行替换为：

```
$sliderControls = $slider.prev().filter( '.controls' ), 
```

# c# - 检测 2 个线阵列的变化并突出显示差异？

> ID：13778191
> 
> 赞同：0
> 
> 时间：2012-12-08T14:05:59.550
> 
> 标签：c#, visual-studio, c#-4.0, text, richtextbox

基本上我得到了这两个带有文本的行数组。

我想比较这两个数组并突出显示差异。这些数组相当大，因为我有一些巨大的文本文件。

欢迎任何有关解决此问题的帮助。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T14:23:20.043

您可以在用于进行基因组序列比对的算法上使用某种变体。本质上，您正在寻找两个字符串中的差异，将它们存储在一个地方作为 diff 1、diff 2 等等？

[http://www.codeproject.com/Articles/304772/DNA-Sequence-Alignment-using-Dynamic-Programming-A](http://www.codeproject.com/Articles/304772/DNA-Sequence-Alignment-using-Dynamic-Programming-A)

我希望我没有猜错你的要求。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T14:27:00.373

这是一个相当难解决的问题，被称为“最长公共子序列问题”。我可以尝试描述它以及解决方案，但我只会将你指向维基百科，因为我只是看了这篇文章并且有人做得非常好。

[http://en.wikipedia.org/wiki/Longest_common_subsequence_problem](http://en.wikipedia.org/wiki/Longest_common_subsequence_problem)

# apache-flex - 如何从 bepl 生成的 wsdl 获取服务

> ID：13778193
> 
> 赞同：1
> 
> 时间：2012-12-08T14:06:13.090
> 
> 标签：apache-flex, wsdl

我正在使用 flex 完成需要获取 Web 服务的浏览器客户端，

```
 <s:WebService id="wsTest" wsdl="blablabla">

        <s:operation name="?" result="doResault(event)">

            <s:request>

            </s:request>

        </s:operation>

    </s:WebService> 
```

但是问题来了，因为这个 wsdl 是由 BEPL 生成的，我在那里看不到操作名称，那我该怎么办？

BEPL生成的wsdl如下，我删了很多东西：BEPL应该是个大函数，就是不知道bepl的入口在哪里，用什么方法

```
 <?xml version="1.0" encoding="UTF-8"?>
    <wsdl:definitions>
    <wsdl:types>
    ...
    </wsdl:types>

    <wsdl:message name="mainRequest">
        <wsdl:part name="parameters" element="ns:main"/>
    </wsdl:message>
    ...
    <wsdl:portType name="PositioningWebServicePortType">
        <wsdl:operation name="main">
            <wsdl:input message="ns:mainRequest" wsaw:Action="urn:main"/>
        </wsdl:operation>
    <wsdl:operation name="training">
        <wsdl:input message="ns:trainingRequest" wsaw:Action="urn:training"/>
        <wsdl:output message="ns:trainingResponse" wsaw:Action="urn:trainingResponse"/>
        <wsdl:fault message="ns:IOException" name="IOException" wsaw:Action="urn:trainingIOException"/>
        <wsdl:fault message="ns:SQLException" name="SQLException" wsaw:Action="urn:trainingSQLException"/>
    </wsdl:operation>

    </wsdl:portType>

    <wsdl:binding name="PositioningWebServiceSoap11Binding" type="ns:PositioningWebServicePortType">
        <soap:binding transport="http://schemas.xmlsoap.org/soap/http" style="document"/>
        <wsdl:operation name="main">
            <soap:operation soapAction="urn:main" style="document"/>
                <wsdl:input>
                    <soap:body use="literal"/>
                </wsdl:input>
            </wsdl:operation>
        <wsdl:operation name="training">
             <soap:operation soapAction="urn:training" style="document"/>
                 <wsdl:input>
                    <soap:body use="literal"/>
                  </wsdl:input>
                  <wsdl:output>
                     <soap:body use="literal"/>
                  </wsdl:output>
        <wsdl:fault name="IOException">
            <soap:fault use="literal" name="IOException"/>
        </wsdl:fault>
        <wsdl:fault name="SQLException">
            <soap:fault use="literal" name="SQLException"/>
        </wsdl:fault>
    </wsdl:operation>

    </wsdl:binding>

    <wsdl:service name="PositioningWebService">

    </wsdl:service>
</wsdl:definitions> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T16:15:32.227

您可以通过多种方式查看操作或集成服务。以下是一些帮助您入门的方法：

1) 使用 Web 浏览器打开输出的 WSDL 的 URL。您可以通过它查看所有操作节点。在这些节点中，您将看到它需要的参数以及响应中的预期内容。

2）使用FlashBuilder中的数据连接功能。选择您的项目，然后选择 Data -> Connect to web service... 并按照向导导入 WSDL 并为您内省服务。然后您将看到所有操作等。然后它们可以用于数据绑定等。

这是关于使用 WSDL、WebService 组件甚至使用操作和绑定的深入教程。[http://www.adobe.com/devnet/flex/videotraining/exercises/ex2_05_web.html](http://www.adobe.com/devnet/flex/videotraining/exercises/ex2_05_web.html)

# php - 在 Symfony 1.4 中检测 HTTP 连接的提前终止

> ID：13778194
> 
> 赞同：0
> 
> 时间：2012-12-08T14:06:21.913
> 
> 标签：php, http, connection, symfony-1.4

我有兴趣将标记用作[此处指定的电子邮件和应用内通知的读取方法](https://gist.github.com/4235649?utm_source=twitter&utm_medium=social&utm_content=18911ef9-5f82-40ca-9f4a-afb1cb9ba98e)

我正在使用 Symfony 1.4，但我在其中找不到任何东西，`sfContext`也找不到任何`sfWebRequest`可用于检测连接是否已终止的东西。在 Symfony 框架内有没有办法做到这一点？

我可以使用 PHP 函数吗`connection_status()`？`connection_aborted()`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T14:11:12.817

在典型的 PHP 脚本中，脚本执行将在用户终止连接后的下一个可勾选事件处停止。

因此，您不需要真正做任何事情来使其工作（除非您在 php.ini 中更改了此设置）或有人设置了`ignore_user_abort`标志。

但是，如果您想安全，可以执行以下操作：

```
<?php

// Whatever you need here
sleep(5);

if (false == connection_aborted()) {
    // Mark the notification as read
} 
```

# asynchronous - 异步 Javascript 加载不同的行为

> ID：13778200
> 
> 赞同：0
> 
> 时间：2012-12-08T14:07:05.017
> 
> 标签：asynchronous, extjs, dom-events, unobtrusive-javascript

我正在开发一个小部件，并且正在使用 extJS 框架（以及 stomp、轨道服务器）。它需要 5 个不同的 Javascript 文件。为了避免影响用户的加载时间，我尝试异步加载它们。

通过一些回调堆栈，我设法按需要的顺序异步加载它们。

但是，小部件在异步情况下根本不起作用。然后，我从 Chrome 的开发人员工具中复制了“修改后的”结果 HTML DOM，并创建了一个静态 HTML 文件。

静态文件有效。当在这两种情况下加载不同的 JS 文件时，我会打印一些警报。这些警报的顺序是相同的。

如何检测并修复错误。大量调试后难住了。

（链接在生产服务器上已删除。设法检测到问题并找到解决方法 - 请参阅下面的答案 - 保留以供任何人参考）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T07:14:08.570

问题是 Ext.onReady 在文档准备好后立即被调用，这是在任何其他脚本异步加载之前。

因此，初始化代码没有被调用。我设法通过在加载的最后一个 javascript 中调用 Ext.each("dummy args", initialization_function, this) 来解决它。这使事情对我有用。

# java - 递归迷宫求解方法

> ID：13778204
> 
> 赞同：0
> 
> 时间：2012-12-08T14:07:30.360
> 
> 标签：java, algorithm, recursion, maze

我正在研究一种递归求解由单元格组成的方法。

该方法完全行不通。任何建议，将不胜感激。

> 参数：srow = 起始 x 值。scol = 凝视 y 值 erow = 结束 x 值。ecol = 结束 y 值。L = 已解决路径点的链表

代码：

```
private InputGraphicMaze2 maze;
private int R, C; 

//code added by me
private String[] [] cell; //an array to keep track of cells that are proven dead ends. 

public YourMazeWithPath2() 
{       
   // an R rows x C columns maze
  maze = new InputGraphicMaze2();

  R=maze.Rows(); C=maze.Cols();  

  //code added by me
  cell = new String[R+2][C+2];
  for (int i=0; i<R+2; i++) {
      for (int k=0; k<C+2; k++) {
          cell[i][k] = "no";
      }
  }

  // Path holds the cells of the path
  LinkedList<Point> Path = new LinkedList<Point>();
   // Create the path
   CreatePath(maze, 1, 1, R, C, Path);
   // show the path in the maze
   maze.showPath(Path);
}

private void setDead(int x, int y) {
    cell[x][y] = "dead";
}

private void setVisited(int x, int y) {
    cell[x][y] = "visited";
}

public boolean CreatePath(InputGraphicMaze2 maze,      
  int srow, int scol, int erow, int ecol, LinkedList<Point> L)
{

    int x = srow;
    int y = scol;
    Point p = new Point(x, y);

    if ((x<1) || (y<1) || (x>R) || (y>C)) {
        return false; //cell is out of bounds
    }

    else if ((x==R) && (y==C)) {
        return true; // cell is the exit cell
    }

    else {
        if ((maze.can_go(x, y, 'U')) && (x!=1) && (!cell[x-1][y].equals("dead")) && (!cell[x-1][y].equals("visited"))) {
            L.addLast(p);
            setVisited(x,y);
            CreatePath(maze, x-1, y, R, C, L);
            return false;
        }
        else if ((maze.can_go(x, y, 'R')) && (y!=C) && (!cell[x][y+1].equals("dead")) && (!cell[x][y+1].equals("visited"))) {
            L.addLast(p);
            setVisited(x, y);
            CreatePath(maze, x, y+1, R, C, L);
            return false;
        }
        else if ((maze.can_go(x, y, 'D')) && (x!=R) && (!cell[x+1][y].equals("dead")) && (!cell[x+1][y].equals("visited"))) {
            L.addLast(p);
            setVisited(x, y);
            CreatePath(maze, x+1, y, R, C, L);
            return false;
        }
        else if ((maze.can_go(x, y, 'L')) && (y!=1) && (!cell[x][y-1].equals("dead")) && (!cell[x][y-1].equals("visited"))) {
            L.addLast(p);
            setVisited(x, y);
            CreatePath(maze, x, y-1, R, C, L);
            return false;
        }
        else {
            if ((maze.can_go(x, y, 'U')) && (x!=1) && (cell[x][y-1].equals("visited"))) {
                setDead(x, y);
                if (L.contains(p))
                    L.remove(p);
                CreatePath(maze, x-1, y, R, C, L);
                return false;
            }
            else if ((maze.can_go(x, y, 'R')) && (y!=C) && (cell[x][y+1].equals("visited"))) {
                setDead(x, y);
                if (L.contains(p))
                    L.remove(p);
                CreatePath(maze, x, y+1, R, C, L);
                return false;
            }
            else if ((maze.can_go(x, y, 'D')) && (x!=R) && (cell[x+1][y].equals("visited"))) {
                setDead(x, y);
                if (L.contains(p))
                    L.remove(p);
                CreatePath(maze, x+1, y, R, C, L);
                return false;
            }
            else if ((maze.can_go(x, y, 'D')) && (y!=1) && (cell[x][y-1].equals("visited"))) {
                setDead(x, y);
                if (L.contains(p))
                    L.remove(p);
                CreatePath(maze, x, y-1, R, C, L);
                return false;
            }
            else {
                return false;
            }
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-04T13:12:07.037

来自[另一个类似的线程](https://stackoverflow.com/questions/25644884/recursive-function-maze-solver-cant-find-a-bug/25646110?noredirect=1#comment40082871_25646110)，只是为了用一种不太冗长的语言来查看问题，看看这个由用户 @Sergey Rudenko 制作的微型 JS 递归迷宫求解器

```
var map = [
    [1,1,0,0,0,0,0,0],
    [0,1,1,0,0,0,0,0],
    [1,1,1,0,0,0,0,0],
    [1,0,0,1,1,1,1,1],
    [1,1,0,0,1,0,0,1],
    [0,1,1,0,1,0,0,1],
    [1,1,1,0,1,0,0,1],
    [1,0,0,0,1,1,1,1]
]

var goalx = 7;
var goaly = 7;

function findpath(x,y){

    // illegal move check
    if (x < 0 || x > (map[0].length -1) || y < 0 || y > (map.length - 1)) return false; //if it is outside of map
    if (map[y][x]==0) return false; //it is not open

    // end move check
    if (x== goalx && y== goaly){
        console.log('Reached goal at: ' + x + ':' + y);
        return true; // if it is the goal (exit point)
    }

    if(map[y][x] == 9 || map[y][x] == 8)
        return false;

    console.log('Im here at: ' + x + ':' + y);

    map[y][x]=9; //here marking x,y position as part of solution path outlined by "9"

    if(findpath(x+1,y)) 
        return true;    
    if(findpath(x,y+1)) 
        return true;    
    if(findpath(x,y-1))
        return true;
    if(findpath(x-1,y)) 
        return true;                    

    return false;
};

findpath(0, 0); 
```

[JSfiddle](http://jsfiddle.net/1x1xgn9j/2/)

是的。它很小、简单、天真和缺乏但见鬼，它是递归的，它有效！此外，您可以清楚地看到许多迷宫遍历算法的共同部分。

对于更认真的阅读，[此页面](http://theory.stanford.edu/~amitp/GameProgramming/)有关于许多游戏相关算法的优秀*深入但非科学的论文*教程。

购买算法时需要回答一些相关问题：

需要任何解决方案吗？

需要所有解决方案？

需要最快的吗？

迷宫的地形是什么？网格？图表？

想在未来实施移动成本？

想要实施启发式方法来选择最佳路线？

最后，如果您还没有遇到它，请检查 a* 算法。很受欢迎。

玩得开心！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T14:21:15.213

这是一个基本的图遍历问题。我建议您使用 dfs 而不是 bfs。几乎任何关于算法和数据结构的教科书都会有实现。

一旦达到目标，您只需调整递归部分即可停止搜索。另一方面，如果您正在寻找通向目标的所有路径，只需执行所有路径，然后从那里开始。对于提示，您可以查找 Bellman–Ford 或 Dijkstra 算法 (http://en.wikipedia.org/wiki/Bellman%E2%80%93Ford_algorithm)。同样，任何有关于图表的章节的好教科书。

# php - 在zend框架中设置文件路径

> ID：13778205
> 
> 赞同：0
> 
> 时间：2012-12-08T14:07:41.087
> 
> 标签：php, zend-framework

我正在更新一个项目，问题是所有图像 src 和标题链接等都有这样的路径：

```
src="/media/js/hoverIntent.js" 
```

我在 localhost 上看不到一切正常

当我删除 src 中的第一个“/”时，一切正常。但是项目很大，一个一个删不掉，怎么解决。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T14:30:35.353

用于`mod_rewrite`将失败的 URL 指向正确的 URL。

例如：您的应用程序使用 URL，`/media/js/hoverIntent.js`但每次 URL`/media`都以`/myapp/media/...`. `.htaccess`在这种情况下，您可以通过在根文件夹中放置以下内容来解决它：

```
RewriteEngine On
RewriteRule ^media/(.*)$ /myapp/media/$1 
```

当然，您需要在 localhost 上调整文件的目标 URL

# python - 只需为临时文件生成路径

> ID：13778206
> 
> 赞同：0
> 
> 时间：2012-12-08T14:07:42.967
> 
> 标签：python, python-2.7

正如`tempfile.mktemp`Python 2.7 中所贬值的那样，我生成了一个临时文件的唯一路径，如下所示：

```
temp = tempfile.NamedTemporaryFile(suffix=".py")
path_to_generated_py = temp.name
temp.close()
# now I use path_to_gerated_py to create a python file 
```

这是 Python 2.7 中推荐的方式吗？当我立即关闭临时文件时，它看起来像是在滥用`NamedTemporaryFile`......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T15:21:07.907

的直接替换`tempfile.mktemp()`是`tempfile.mkstemp()`. 后者创建文件，如`NamedTemporaryFile`，因此您必须关闭它（如您的代码片段中所示）。不同`NamedTemporaryFile`之处在于文件在关闭时不会被删除。这实际上是必需的：您的版本具有理论上的竞争条件，其中两个进程可能以相同的临时文件名结束。如果您改用`mkstemp()`该文件，则该文件永远不会被删除，并且可能会被您使用的第 3 方库覆盖 --- 但在任何时间点，该文件都存在，因此不会有另一个进程会创建一个同名临时文件。

# emacs - 如何在 dired 模式下快速打开子文件夹中的文件？

> ID：13778208
> 
> 赞同：1
> 
> 时间：2012-12-08T14:07:58.667
> 
> 标签：emacs, dired

在dired模式下，如何在子文件夹中快速打开文件？我发现加载`dired+', the key 'j' is`dired-goto-file'后。但我不能在 emacs 24 + Windows 7 中使用它。

是否有任何方便的键可以快速打开/查找子文件夹中的文件？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T17:02:48.633

就个人而言，我建议`isearch`您在缓冲区中找到某些内容时使用，包括`dired`. `incremental search`在我熟悉它之后，我发现它真的很有帮助和高效。

您可以查看[使用 Emacs 提高生产力的 10 种特定方法](https://sites.google.com/site/steveyegge2/effective-emacs)。这是技巧4。

正如他所说：

**“一旦你掌握了这项技术，怎么强调都不为过。”**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-01T20:08:36.550

我想我能理解这个问题。平台应该无关紧要。Pressing`j`在迷你缓冲区中提供当前目录字符串，方便编写文件名和制表符完成它。当该文件名是 dired 目录的子目录时，可以在该子目录中找到文件。

现在，如果选择了该子目录中的文件并按下`RET`，则 minibuffer 会通知该*标记 set*，并点停留脚。

我试图`C-x C-SPC` `(pop-global-mark)`查看是否会跳转到在另一个缓冲区中找到的文件，但不是这样。标记设置在点上。

因此，这没有提供任何答案，但最好是对原始问题的澄清。我同意在子目录中的那个文件上跳转会很好。

我偶然发现了这个，因为我想知道`j`在 dired 模式下会发生什么，错误地按下它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-27T18:14:30.497

你的问题我不清楚。

1.  在 Dired（包括[**Dired+**](http://www.emacswiki.org/DiredPlus)）中，`j`提示您输入文件名并将*光标移动到*Dired 中的该文件名。它不适合你吗？你说你不能在 Emacs 24 和 Windows 7 中使用它。我一直在 Emacs 24 和 Windows 7（以及**Dired+**）中使用它，没有问题。

    请提供更多信息。使用时会发生什么`j`？你期望会发生什么，而真正发生了什么？

2.  但是您谈到“**打开**”文件。那不是什么`j`。`RET`当光标位于文件名上时，它就是这样做的。这对你不起作用吗？

3.  也许您只是想在提示输入文件名后打开文件？为此，只需使用`C-x 4 f`or `C-x C-f`。

不清楚。但取决于你真正想要什么，也许答案就在这里：`j`、`RET`或`C-x 4 f`。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-08T14:28:23.300

即使我不使用 dired 模式，
我只是尝试了 dired 和 j，迷你缓冲区提示我打开文件。我对文件和缓冲区使用[lusty 模式](http://www.emacswiki.org/cgi-bin/wiki/LustyExplorer)。但你可以使用

```
open-dribble-file 
```

从某个位置打开文件

# javascript - 检查仓库是否使用 GitHub API 加星标

> ID：13778212
> 
> 赞同：5
> 
> 时间：2012-12-08T14:08:23.763
> 
> 标签：javascript, api, rest, github

我目前正在尝试检查并查看是否由经过**身份验证的用户**使用 GitHub API (v3) 为 repo 加注星标。我可以成功列出登录用户加星标的存储库，但是在检查用户是否为存储库加星标时，我似乎无法让它工作。

例如..

(GET) /user/starred?access_token=... 正确返回我已加星标的完整存储库列表。

(GET) /user/starred/joynet/node?access_token=... 始终返回状态 404，无论我使用什么所有者/存储库组合，或者我是否真的将该存储库加星标。

我还应该注意，除了 (GET) /user/starred 之外，我似乎无法访问 /user/starred 上的任何内容。无论我做什么，任何对 /user/starred/:owner/:repo 的 PUT、DELETE 或 POST 请求都会返回 404。

知道我应该如何使用这个 API 吗？我已经阅读了文档，我相信我做对了，但我似乎无法让它工作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-09T18:44:12.273

我能够解决这个问题。问题是我浏览了文档，没有看到我必须在授权期间请求 repo 范围才能修改星星 :) 只需添加“repo”范围即可解决我的问题！

GitHub 在这里简要提到了他们的范围：http: [//developer.github.com/v3/oauth/](http://developer.github.com/v3/oauth/)但没有提到主演需要“repo”范围。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T13:50:39.320

您正在使用 API 权利。根据[文档](http://developer.github.com/v3/activity/starring/)，如果您没有为存储库加星标（或存储库或用户或两者都不存在），您将获得 404 状态，否则您将获得 204。您总是会获得 404 状态，因为您用户名**joyent**拼写错误。

因此，要检查经过身份验证的用户是否为节点存储库加注星标：

```
GET /user/starred/joyent/node 
```

要为节点 repo 加注星标：

```
PUT /user/starred/joyent/node 
```

并取消节点回购：

```
DELETE /user/starred/joyent/node 
```

此外，如果您尝试使用不存在的所有者或存储库向 /user/starred/:owner/:repo 发出 PUT 或 DELETE 请求，您将获得 404 状态。因此，由于用户名拼写错误，您可能会收到所有这些 404 状态。

# android - Android：阿拉伯字体

> ID：13778213
> 
> 赞同：2
> 
> 时间：2012-12-08T14:08:42.390
> 
> 标签：android, fonts, arabic

我正在尝试解析一个包含复杂阿拉伯字母的 XML 文件..

当我在 android 2.3.7 上测试时，并非所有的阿拉伯字母都支持，仍然有一些复杂的显示为正方形..

但是在 android 4.0.4 上测试时，所有字母看起来都很棒..

我需要找到 4.0.4 中使用的 .ttf 阿拉伯字体或最好的 android 阿拉伯字体以强制它在我的应用程序中在所有版本上正常工作，你能帮我吗？

我试过 DroidNaskh-Regular.ttf 和 DroidSansArabic.ttf 但不像 android 4.0.4 ..

谢谢 ..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T14:40:30.277

试试这个解决方案：

[从这里](http://developer.android.com/design/downloads/index.html)获取在 android 4 上使用的机器人字体。如果这不起作用，您可以尝试其他字体，例如[DejaVu](http://dejavu-fonts.org/wiki/Download)字体。例如，其他字体可[在此处](http://openfontlibrary.org/en/search?license=Apache%202.0)获得。

然后，将文件放入您的资产文件夹，对于需要显示文本的每个视图（如 textView），使用以下字体：

```
Typeface face = Typeface.createFromAsset(getAssets(), "Roboto-Regular.ttf");
textview.setTypeface(face); 
```

我过去尝试过希伯来语，结果很好。可悲的是，特殊的点（称为“NIKUD”）没有显示得那么好，所以你可能对阿拉伯语有类似的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T14:30:52.547

这是我在我的 Goyalla 词典中使用的库代码，用于在 4.0 之前的 Android 版本上重塑阿拉伯语。您可以从 github 示例中获取它的[示例](https://github.com/agawish/Better-Arabic-Reshaper)。

同时需要调用 *.ttf 文件。

```
package go.goyalla.dict.arabicDictionary.file;

public class ArabicReshape {

    static final char RIGHT_LEFT_CHAR = 0x0001;
    static final char RIGHT_NOLEFT_CHAR_ALEF = 0x0006;
    static final char RIGHT_NOLEFT_CHAR = 0x0004;
    static final char RIGHT_LEFT_CHAR_LAM = 0x0003;
    static final char TANWEEN = 0x000C;
    static final char TASHKEEL = 0x000A;
    static final char TATWEEL_CHAR = 0x0008;
    static final char NORIGHT_NOLEFT_CHAR = 0x0007;
    static final char NOTUSED_CHAR = 0x000F;
    static final char NOTARABIC_CHAR = 0x0000;

    static final char RIGHT_LEFT_CHAR_MASK = 0x0880;
    static final char RIGHT_NOLEFT_CHAR_MASK = 0x0800;
    static final char LEFT_CHAR_MASK = 0x0080;

    private static final char allchar[][] = {
            { 0x0621, 0x0007, 0xFE80, 0xFE80, 0xFE80, 0xFE80 },
            { 0x0622, 0x0806, 0xFE81, 0xFE82, 0xFEF5, 0xFEF6 },
            { 0x0623, 0x0806, 0xFE83, 0xFE84, 0xFEF7, 0xFEF8 },
            { 0x0624, 0x0804, 0xFE85, 0xFE86, 0xFE86, 0xFE86 },
            { 0x0625, 0x0806, 0xFE87, 0xFE88, 0xFEF9, 0xFEFA },
            { 0x0626, 0x0881, 0xFE89, 0xFE8A, 0xFE8B, 0xFE8C },
            { 0x0627, 0x0806, 0xFE8D, 0xFE8E, 0xFEFB, 0xFEFC },
            { 0x0628, 0x0881, 0xFE8F, 0xFE90, 0xFE91, 0xFE92 },
            { 0x0629, 0x0804, 0xFE93, 0xFE94, 0xFE94, 0xFE94 },
            { 0x062A, 0x0881, 0xFE95, 0xFE96, 0xFE97, 0xFE98 },
            { 0x062B, 0x0881, 0xFE99, 0xFE9A, 0xFE9B, 0xFE9C },
            { 0x062C, 0x0881, 0xFE9D, 0xFE9E, 0xFE9F, 0xFEA0 },
            { 0x062D, 0x0881, 0xFEA1, 0xFEA2, 0xFEA3, 0xFEA4 },
            { 0x062E, 0x0881, 0xFEA5, 0xFEA6, 0xFEA7, 0xFEA8 },
            { 0x062F, 0x0804, 0xFEA9, 0xFEAA, 0xFEAA, 0xFEAA },
            { 0x0630, 0x0804, 0xFEAB, 0xFEAC, 0xFEAC, 0xFEAC },
            { 0x0631, 0x0804, 0xFEAD, 0xFEAE, 0xFEAE, 0xFEAE },
            { 0x0632, 0x0804, 0xFEAF, 0xFEB0, 0xFEB0, 0xFEB0 },
            { 0x0633, 0x0881, 0xFEB1, 0xFEB2, 0xFEB3, 0xFEB4 },
            { 0x0634, 0x0881, 0xFEB5, 0xFEB6, 0xFEB7, 0xFEB8 },
            { 0x0635, 0x0881, 0xFEB9, 0xFEBA, 0xFEBB, 0xFEBC },
            { 0x0636, 0x0881, 0xFEBD, 0xFEBE, 0xFEBF, 0xFEC0 },
            { 0x0637, 0x0881, 0xFEC1, 0xFEC2, 0xFEC3, 0xFEC4 },
            { 0x0638, 0x0881, 0xFEC5, 0xFEC6, 0xFEC7, 0xFEC8 },
            { 0x0639, 0x0881, 0xFEC9, 0xFECA, 0xFECB, 0xFECC },
            { 0x063A, 0x0881, 0xFECD, 0xFECE, 0xFECF, 0xFED0 },
            { 0x063B, 0x000F, 0x0, 0x0, 0x0, 0x0 },
            { 0x063C, 0x000F, 0x0, 0x0, 0x0, 0x0 },
            { 0x063D, 0x000F, 0x0, 0x0, 0x0, 0x0 },
            { 0x063E, 0x000F, 0x0, 0x0, 0x0, 0x0 },
            { 0x063F, 0x000F, 0x0, 0x0, 0x0, 0x0 },

            { 0x0640, 0x0888, 0x0640, 0x0640, 0x0640, 0x0640 },
            { 0x0641, 0x0881, 0xFED1, 0xFED2, 0xFED3, 0xFED4 },
            { 0x0642, 0x0881, 0xFED5, 0xFED6, 0xFED7, 0xFED8 },
            { 0x0643, 0x0881, 0xFED9, 0xFEDA, 0xFEDB, 0xFEDC },
            { 0x0644, 0x0883, 0xFEDD, 0xFEDE, 0xFEDF, 0xFEE0 },
            { 0x0645, 0x0881, 0xFEE1, 0xFEE2, 0xFEE3, 0xFEE4 },
            { 0x0646, 0x0881, 0xFEE5, 0xFEE6, 0xFEE7, 0xFEE8 },
            { 0x0647, 0x0881, 0xFEE9, 0xFEEA, 0xFEEB, 0xFEEC },
            { 0x0648, 0x0804, 0xFEED, 0xFEEE, 0xFEEE, 0xFEEE },
            { 0x0649, 0x0804, 0xFEEF, 0xFEF0, 0xFEF0, 0xFEF0 },
            { 0x064A, 0x0881, 0xFEF1, 0xFEF2, 0xFEF3, 0xFEF4 },
            { 0x064B, 0x000C, 0x064B, 0xFE70, 0xFE71, 0xFE70 },
            { 0x064C, 0x000C, 0x064C, 0xFE72, 0xFE72, 0xFE72 },
            { 0x064D, 0x000C, 0x064D, 0xFE74, 0xFE74, 0xFE74 },
            { 0x064E, 0x000A, 0x064E, 0xFE76, 0xFE77, 0xFE76 },
            { 0x064F, 0x000A, 0x064F, 0xFE78, 0xFE79, 0xFE78 },
            { 0x0650, 0x000A, 0x0650, 0xFE7A, 0xFE7B, 0xFE7A },
            { 0x0651, 0x000A, 0x0651, 0xFE7C, 0xFE7D, 0xFE7C },
            { 0x0652, 0x000A, 0x0652, 0xFE7E, 0xFE7F, 0xFE7E },

            { 0x0653, 0x000F, 0x0, 0x0, 0x0, 0x0 },
            { 0x0654, 0x000F, 0x0, 0x0, 0x0, 0x0 },
            { 0x0655, 0x000F, 0x0, 0x0, 0x0, 0x0 },
            { 0x0656, 0x000F, 0x0, 0x0, 0x0, 0x0 },
            { 0x0657, 0x000F, 0x0, 0x0, 0x0, 0x0 },
            { 0x0658, 0x000F, 0x0, 0x0, 0x0, 0x0 },
            { 0x0659, 0x000F, 0x0, 0x0, 0x0, 0x0 },
            { 0x065A, 0x000F, 0x0, 0x0, 0x0, 0x0 },
            { 0x065B, 0x000F, 0x0, 0x0, 0x0, 0x0 },
            { 0x065C, 0x000F, 0x0, 0x0, 0x0, 0x0 },
            { 0x065D, 0x000F, 0x0, 0x0, 0x0, 0x0 },
            { 0x065E, 0x000F, 0x0, 0x0, 0x0, 0x0 },
            { 0x065F, 0x000F, 0x0, 0x0, 0x0, 0x0 },

            { 0x0660, 0x000B, 0x0660, 0x0660, 0x0660, 0x0660 },
            { 0x0661, 0x000B, 0x0661, 0x0661, 0x0661, 0x0661 },
            { 0x0662, 0x000B, 0x0662, 0x0662, 0x0662, 0x0662 },
            { 0x0663, 0x000B, 0x0663, 0x0663, 0x0663, 0x0663 },
            { 0x0664, 0x000B, 0x0665, 0x0664, 0x0664, 0x0664 },
            { 0x0665, 0x000B, 0x0665, 0x0665, 0x0665, 0x0665 },
            { 0x0666, 0x000B, 0x0666, 0x0666, 0x0666, 0x0666 },
            { 0x0667, 0x000B, 0x0667, 0x0667, 0x0667, 0x0667 },
            { 0x0668, 0x000B, 0x0668, 0x0668, 0x0668, 0x0668 },
            { 0x0669, 0x000B, 0x0669, 0x0669, 0x0669, 0x0669 },

            { 0x066A, 0x000F, 0x0, 0x0, 0x0, 0x0 },
            { 0x066B, 0x000F, 0x0, 0x0, 0x0, 0x0 },
            { 0x066C, 0x000F, 0x0, 0x0, 0x0, 0x0 },
            { 0x066D, 0x000F, 0x0, 0x0, 0x0, 0x0 },

            { 0x066E, 0x000E, 0x065E, 0x065E, 0x065E, 0x065E },
            { 0x066F, 0x000E, 0x065F, 0x065F, 0x065F, 0x065F },

            { 0x0670, 0x000F, 0x0, 0x0, 0x0, 0x0 },

            { 0x0671, 0x0804, 0xFB50, 0xFB51, 0xFB51, 0xFB51 },
            { 0x0672, 0x000F, 0x0, 0x0, 0x0, 0x0 },
            { 0x0673, 0x000F, 0x0, 0x0, 0x0, 0x0 },
            { 0x0674, 0x000F, 0x0, 0x0, 0x0, 0x0 },
            { 0x0675, 0x000F, 0x0, 0x0, 0x0, 0x0 },
            { 0x0676, 0x000F, 0x0, 0x0, 0x0, 0x0 },
            { 0x0677, 0x000F, 0x0, 0x0, 0x0, 0x0 },
            { 0x0678, 0x000F, 0x0, 0x0, 0x0, 0x0 },

            { 0x0679, 0x0881, 0xFB66, 0xFB67, 0xFB68, 0xFB69 },
            { 0x067A, 0x0881, 0xFB5E, 0xFB5F, 0xFB60, 0xFB61 },
            { 0x067B, 0x0881, 0xFB52, 0xFB53, 0xFB54, 0xFB55 },
            { 0x067C, 0x000F, 0x0, 0x0, 0x0, 0x0 },
            { 0x067D, 0x000F, 0x0, 0x0, 0x0, 0x0 },
            { 0x067E, 0x0881, 0xFB56, 0xFB57, 0xFB58, 0xFB59 },
            { 0x067F, 0x0881, 0xFB62, 0xFB63, 0xFB64, 0xFB65 },
            { 0x0680, 0x0881, 0xFB5A, 0xFB5B, 0xFB5C, 0xFB5D },

            { 0x0681, 0x000F, 0x0, 0x0, 0x0, 0x0 },
            { 0x0682, 0x000F, 0x0, 0x0, 0x0, 0x0 },
            { 0x0683, 0x0881, 0xFB76, 0xFB77, 0xFB78, 0xFB79 },
            { 0x0684, 0x0881, 0xFB72, 0xFB73, 0xFB74, 0xFB75 },
            { 0x0685, 0x000F, 0x0, 0x0, 0x0, 0x0 },

            { 0x0686, 0x0881, 0xFB7A, 0xFB7B, 0xFB7C, 0xFB7D },
            { 0x0687, 0x0881, 0xFB7E, 0xFB7F, 0xFB80, 0xFB81 },
            { 0x0688, 0x0804, 0xFB88, 0xFB89, 0xFB89, 0xFB89 },
            { 0x0689, 0x000F, 0x0, 0x0, 0x0, 0x0 },
            { 0x068A, 0x000F, 0x0, 0x0, 0x0, 0x0 },
            { 0x068B, 0x000F, 0x0, 0x0, 0x0, 0x0 },

            { 0x068C, 0x0804, 0xFB84, 0xFB85, 0xFB85, 0xFB85 },
            { 0x068D, 0x0804, 0xFB82, 0xFB83, 0xFB83, 0xFB83 },
            { 0x068E, 0x0804, 0xFB86, 0xFB87, 0xFB83, 0xFB83 },
            { 0x068F, 0x000F, 0x0, 0x0, 0x0, 0x0 },
            { 0x0690, 0x000F, 0x0, 0x0, 0x0, 0x0 },

            { 0x0691, 0x0804, 0xFB8C, 0xFB8D, 0xFB8D, 0xFB8D },
            { 0x0692, 0x000F, 0x0, 0x0, 0x0, 0x0 },
            { 0x0693, 0x000F, 0x0, 0x0, 0x0, 0x0 },
            { 0x0694, 0x000F, 0x0, 0x0, 0x0, 0x0 },
            { 0x0695, 0x000F, 0x0, 0x0, 0x0, 0x0 },
            { 0x0696, 0x000F, 0x0, 0x0, 0x0, 0x0 },
            { 0x0697, 0x000F, 0x0, 0x0, 0x0, 0x0 },

            { 0x0698, 0x0804, 0xFB8A, 0xFB8B, 0xFB8B, 0xFB8B },
            { 0x0699, 0x000F, 0x0, 0x0, 0x0, 0x0 },
            { 0x069A, 0x000F, 0x0, 0x0, 0x0, 0x0 },
            { 0x069B, 0x000F, 0x0, 0x0, 0x0, 0x0 },
            { 0x069C, 0x000F, 0x0, 0x0, 0x0, 0x0 },
            { 0x069D, 0x000F, 0x0, 0x0, 0x0, 0x0 },
            { 0x069E, 0x000F, 0x0, 0x0, 0x0, 0x0 },
            { 0x069F, 0x000F, 0x0, 0x0, 0x0, 0x0 },
            { 0x06A0, 0x000F, 0x0, 0x0, 0x0, 0x0 },
            { 0x06A1, 0x000F, 0x0, 0x0, 0x0, 0x0 },
            { 0x06A2, 0x000F, 0x0, 0x0, 0x0, 0x0 },
            { 0x06A3, 0x000F, 0x0, 0x0, 0x0, 0x0 },
            { 0x06A4, 0x0881, 0xFB6A, 0xFB6B, 0xFB6C, 0xFB6D },
            { 0x06A5, 0x000F, 0x0, 0x0, 0x0, 0x0 },
            { 0x06A6, 0x0881, 0xFB6E, 0xFB6F, 0xFB70, 0xFB71 },
            { 0x06A7, 0x000F, 0x0, 0x0, 0x0, 0x0 },
            { 0x06A8, 0x000F, 0x0, 0x0, 0x0, 0x0 },

            { 0x06A9, 0x0881, 0xFB8E, 0xFB8F, 0xFB90, 0xFB91 },
            { 0x06AA, 0x000F, 0x0, 0x0, 0x0, 0x0 },
            { 0x06AB, 0x000F, 0x0, 0x0, 0x0, 0x0 },
            { 0x06AC, 0x000F, 0x0, 0x0, 0x0, 0x0 },
            { 0x06AD, 0x0881, 0xFBD3, 0xFBD4, 0xFBD5, 0xFBD6 },
            { 0x06AE, 0x000F, 0x0, 0x0, 0x0, 0x0 },

            { 0x06AF, 0x0881, 0xFB92, 0xFB93, 0xFB94, 0xFB95 },
            { 0x06B0, 0x000F, 0x0, 0x0, 0x0, 0x0 },
            { 0x06B1, 0x0881, 0xFB9A, 0xFB9B, 0xFB9C, 0xFB9D },
            { 0x06B2, 0x000F, 0x0, 0x0, 0x0, 0x0 },

            { 0x06B3, 0x0881, 0xFB96, 0xFB97, 0xFB98, 0xFB99 },
            { 0x06B4, 0x000F, 0x0, 0x0, 0x0, 0x0 },
            { 0x06B5, 0x000F, 0x0, 0x0, 0x0, 0x0 },
            { 0x06B6, 0x000F, 0x0, 0x0, 0x0, 0x0 },
            { 0x06B7, 0x000F, 0x0, 0x0, 0x0, 0x0 },
            { 0x06B8, 0x000F, 0x0, 0x0, 0x0, 0x0 },
            { 0x06B9, 0x000F, 0x0, 0x0, 0x0, 0x0 },
            { 0x06BA, 0x0804, 0xFB9E, 0xFB9F, 0xFB9F, 0xFB9F },
            { 0x06BB, 0x0881, 0xFBA0, 0xFBA1, 0xFBA2, 0xFBA3 },
            { 0x06BC, 0x000F, 0x0, 0x0, 0x0, 0x0 },
            { 0x06BD, 0x000F, 0x0, 0x0, 0x0, 0x0 },
            { 0x06BE, 0x0881, 0xFBAA, 0xFBAB, 0xFBAC, 0xFBAD },
            { 0x06BF, 0x000F, 0x0, 0x0, 0x0, 0x0 },
            { 0x06C0, 0x0804, 0xFBA4, 0xFBA5, 0xFBA5, 0xFBA5 },
            { 0x06C1, 0x0881, 0xFBA6, 0xFBA7, 0xFBA8, 0xFBA9 },
            { 0x06C2, 0x000F, 0x0, 0x0, 0x0, 0x0 },
            { 0x06C3, 0x000F, 0x0, 0x0, 0x0, 0x0 },
            { 0x06C4, 0x000F, 0x0, 0x0, 0x0, 0x0 },
            { 0x06C5, 0x0804, 0xFBE0, 0xFBE1, 0xFBE1, 0xFBE1 },
            { 0x06C6, 0x0804, 0xFBD9, 0xFBDA, 0xFBDA, 0xFBDA },
            { 0x06C7, 0x0804, 0xFBD7, 0xFBD8, 0xFBD8, 0xFBD8 },
            { 0x06C8, 0x0804, 0xFBDB, 0xFBDC, 0xFBDC, 0xFBDC },
            { 0x06C9, 0x0804, 0xFBE2, 0xFBE3, 0xFBE3, 0xFBE3 },
            { 0x06CA, 0x000F, 0x0, 0x0, 0x0, 0x0 },
            { 0x06CB, 0x0804, 0xFBDE, 0xFBDF, 0xFBDF, 0xFBDF },
            { 0x06CC, 0x0881, 0xFBFC, 0xFBFD, 0xFBFE, 0xFBFF },
            { 0x06CD, 0x000F, 0x0, 0x0, 0x0, 0x0 },
            { 0x06CE, 0x000F, 0x0, 0x0, 0x0, 0x0 },
            { 0x06CF, 0x000F, 0x0, 0x0, 0x0, 0x0 },
            { 0x06D0, 0x0881, 0xFBE4, 0xFBE5, 0xFBE6, 0xFBE7 },
            { 0x06D1, 0x000F, 0x0, 0x0, 0x0, 0x0 },
            { 0x06D2, 0x0804, 0xFBAE, 0xFBAF, 0xFBAF, 0xFBAF },
            { 0x06D3, 0x0804, 0xFBB0, 0xFBB1, 0xFBB1, 0xFBB1 } };

    public static String reshape(String Str) {
        String Temp = " " + Str + " ";
        char pre, at, post;
        StringBuilder reshapedString = new StringBuilder();
        int i = 0;
        int len = Str.length();

        char post_post;
        char pre_pre = ' ';

        while (i < len) {
            pre = Temp.charAt(i);
            at = Temp.charAt(i + 1);
            post = Temp.charAt(i + 2);

            int which_case = getCase(at);
            int what_case_post = getCase(post);
            int what_case_pre = getCase(pre);
            int what_case_post_post;
            int what_case_pre_pre;
            // which_case=0x000F&
            // Log.v("what case"," :" +which_case);
            int pre_step = 0;
            if (what_case_pre == TASHKEEL) {
                pre = pre_pre;
                what_case_pre = getCase(pre);
            }
            if ((what_case_pre & LEFT_CHAR_MASK) == LEFT_CHAR_MASK) {
                pre_step = 1;

            }

            switch (which_case & 0x000F) {

            case NOTUSED_CHAR:
            case NOTARABIC_CHAR:

                reshapedString.append(at);

                i++;
                continue;
            case NORIGHT_NOLEFT_CHAR:
            case TATWEEL_CHAR:
                reshapedString.append(getShape(at, 0));

                i++;
                continue;
            case RIGHT_LEFT_CHAR_LAM:

                if ((what_case_post & 0x000F) == RIGHT_NOLEFT_CHAR_ALEF) {
                    reshapedString.append(getShape(post, pre_step + 2));
                    i = i + 2;

                    continue;
                } else if ((what_case_post & RIGHT_NOLEFT_CHAR_MASK) == RIGHT_NOLEFT_CHAR_MASK) {
                    reshapedString.append(getShape(at, 2 + pre_step));
                    i = i + 1;

                    continue;

                } else if (what_case_post == TANWEEN) {
                    reshapedString.append(getShape(at, pre_step));
                    i = i + 1;
                    continue;

                } else if (what_case_post == TASHKEEL) {
                    post_post = Temp.charAt(i + 3);
                    what_case_post_post = getCase(post_post);
                    if ((what_case_post_post & RIGHT_NOLEFT_CHAR_MASK) == RIGHT_NOLEFT_CHAR_MASK) {
                        reshapedString.append(getShape(at, 2 + pre_step));
                        i = i + 1;

                        continue;

                    } else {
                        reshapedString.append(getShape(at, pre_step));
                        i = i + 1;
                        continue;

                    }

                } else {
                    reshapedString.append(getShape(at, pre_step));
                    i = i + 1;
                    continue;

                }

            case RIGHT_LEFT_CHAR:
                if ((what_case_post & RIGHT_NOLEFT_CHAR_MASK) == RIGHT_NOLEFT_CHAR_MASK) {
                    reshapedString.append(getShape(at, 2 + pre_step));
                    i = i + 1;
                    continue;

                } else if (what_case_post == TANWEEN) {
                    reshapedString.append(getShape(at, pre_step));
                    i = i + 1;
                    continue;

                } else if (what_case_post == TASHKEEL) {
                    post_post = Temp.charAt(i + 3);
                    what_case_post_post = getCase(post_post);
                    if ((what_case_post_post & RIGHT_NOLEFT_CHAR_MASK) == RIGHT_NOLEFT_CHAR_MASK) {
                        reshapedString.append(getShape(at, 2 + pre_step));
                        i = i + 1;
                        continue;

                    } else {
                        reshapedString.append(getShape(at, pre_step));
                        i = i + 1;
                        continue;

                    }

                } else {
                    reshapedString.append(getShape(at, pre_step));
                    i = i + 1;
                    continue;

                }
            case RIGHT_NOLEFT_CHAR_ALEF:
            case RIGHT_NOLEFT_CHAR:
                reshapedString.append(getShape(at, pre_step));
                i = i + 1;
                continue;
            case TASHKEEL:
                reshapedString.append(getShape(at, 0));
                i++;
                pre_pre = pre;
                continue;
            case TANWEEN:
                reshapedString.append(getShape(at, 0));
                i++;
                pre_pre = pre;
                continue;

            default:
                reshapedString.append(getShape(at, 0));
                i++;

            }

        }

        return reshapedString.toString();
    }

    public static String reshape_reverse(String Str) {
        String Temp = " " + Str + "   ";
        char pre, at, post;
        StringBuilder reshapedString = new StringBuilder();
        int i = 0;
        int len = Str.length();

        char post_post;
        char pre_pre = ' ';

        while (i < len) {
            pre = Temp.charAt(i + 2);
            at = Temp.charAt(i + 1);
            post = Temp.charAt(i);

            int which_case = getCase(at);
            int what_case_post = getCase(post);
            int what_case_pre = getCase(pre);
            int what_case_post_post;
            int what_case_pre_pre;
            // which_case=0x000F&
            // Log.v("what case"," :" +which_case);
            int pre_step = 0;
            if (what_case_pre == TASHKEEL) {
                pre = Temp.charAt(i + 3);
                what_case_pre = getCase(pre);
            }
            if ((what_case_pre & LEFT_CHAR_MASK) == LEFT_CHAR_MASK) {
                pre_step = 1;

            }

            // System.out.println("##letter "+ pre);
            switch (which_case & 0x000F) {

            case NOTUSED_CHAR:
            case NOTARABIC_CHAR:

                reshapedString.append(at);

                i++;
                continue;
            case NORIGHT_NOLEFT_CHAR:
            case TATWEEL_CHAR:
                reshapedString.append(getShape(at, 0));

                i++;
                continue;
            case RIGHT_NOLEFT_CHAR_ALEF:

                // System.out.println("--letter "+ pre);

                if ((what_case_pre & 0x000F) == RIGHT_LEFT_CHAR_LAM) {
                    pre = Temp.charAt(i + 3);
                    // System.out.println("++letter "+ pre);
                    what_case_pre = getCase(pre);
                    pre_step = 0;
                    if ((what_case_pre & LEFT_CHAR_MASK) == LEFT_CHAR_MASK) {
                        pre_step = 1;

                    }
                    reshapedString.append(getShape(at, pre_step + 2));
                    i = i + 2;

                    continue;
                } /*
                 * else if
                 * ((what_case_post&RIGHT_NOLEFT_CHAR_MASK)==RIGHT_NOLEFT_CHAR_MASK
                 * ){ reshapedString.append(getShape(at,2+pre_step)); i=i+1;
                 * 
                 * continue;
                 * 
                 * 
                 * } else if (what_case_post==TANWEEN){
                 * reshapedString.append(getShape(at,pre_step)); i=i+1;
                 * continue;
                 * 
                 * 
                 * } else if (what_case_post==TASHKEEL){
                 * post_post=Temp.charAt(i+3);
                 * what_case_post_post=getCase(post_post); if
                 * ((what_case_post_post
                 * &RIGHT_NOLEFT_CHAR_MASK)==RIGHT_NOLEFT_CHAR_MASK){
                 * reshapedString.append(getShape(at,2+pre_step)); i=i+1;
                 * 
                 * continue;
                 * 
                 * } else { reshapedString.append(getShape(at,pre_step)); i=i+1;
                 * continue;
                 * 
                 * }
                 * 
                 * 
                 * 
                 * 
                 * 
                 * }
                 */else {
                    reshapedString.append(getShape(at, pre_step));
                    i = i + 1;
                    continue;

                }
            case RIGHT_LEFT_CHAR_LAM:
            case RIGHT_LEFT_CHAR:
                if ((what_case_post & RIGHT_NOLEFT_CHAR_MASK) == RIGHT_NOLEFT_CHAR_MASK) {
                    reshapedString.append(getShape(at, 2 + pre_step));
                    i = i + 1;
                    continue;

                } else if (what_case_post == TANWEEN) {
                    reshapedString.append(getShape(at, pre_step));
                    i = i + 1;
                    continue;

                } else if (what_case_post == TASHKEEL) {
                    post_post = Temp.charAt(i + 3);
                    what_case_post_post = getCase(post_post);
                    if ((what_case_post_post & RIGHT_NOLEFT_CHAR_MASK) == RIGHT_NOLEFT_CHAR_MASK) {
                        reshapedString.append(getShape(at, 2 + pre_step));
                        i = i + 1;
                        continue;

                    } else {
                        reshapedString.append(getShape(at, pre_step));
                        i = i + 1;
                        continue;

                    }

                } else {
                    reshapedString.append(getShape(at, pre_step));
                    i = i + 1;
                    continue;

                }

            case RIGHT_NOLEFT_CHAR:
                reshapedString.append(getShape(at, pre_step));
                i = i + 1;
                continue;
            case TASHKEEL:
                reshapedString.append(getShape(at, 0));
                i++;
                pre_pre = pre;
                continue;
            case TANWEEN:
                reshapedString.append(getShape(at, 0));
                i++;
                pre_pre = pre;
                continue;

            default:
                reshapedString.append(getShape(at, 0));
                i++;

            }

        }

        return reshapedString.toString();
    }

    public static String reshape_browser(String Str) {
        String Temp = " " + Str + " ";
        char pre, at, post;
        StringBuilder reshapedString = new StringBuilder();
        int i = 0;
        int len = Str.length();
        boolean pre_can_connect = false;
        char post_post;
        char pre_pre = ' ';

        while (i < len) {
            pre = Temp.charAt(i);
            at = Temp.charAt(i + 1);
            post = Temp.charAt(i + 2);

            int which_case = getCase(at);
            int what_case_post = getCase(post);
            int what_case_pre = getCase(pre);
            int what_case_post_post;
            int what_case_pre_pre;
            // which_case=0x000F&
            // Log.v("what case"," :" +which_case);

            if (at == '\u060c') {
                reshapedString.append(',');
                i++;
                continue;
            }
            // if (at==)

            int pre_step = 0;
            if (what_case_pre == TASHKEEL) {
                pre = pre_pre;
                what_case_pre = getCase(pre);
            }
            if ((what_case_pre & LEFT_CHAR_MASK) == LEFT_CHAR_MASK) {
                pre_step = 1;

            }

            switch (which_case & 0x000F) {

            case NOTUSED_CHAR:
            case NOTARABIC_CHAR:

                reshapedString.append(at);
                pre_can_connect = false;
                i++;
                continue;
            case NORIGHT_NOLEFT_CHAR:
                reshapedString.append(getShape(at, 0));
                i++;
                continue;
            case TATWEEL_CHAR:
                reshapedString.append(getShape(at, 0));
                pre_can_connect = false;
                i++;
                continue;
            case RIGHT_LEFT_CHAR_LAM:

                if ((what_case_post & 0x000F) == RIGHT_NOLEFT_CHAR_ALEF) {
                    reshapedString.append(getShape(post, pre_step + 2));
                    i = i + 2;
                    pre_can_connect = false;
                    continue;
                } else if ((what_case_post & RIGHT_NOLEFT_CHAR_MASK) == RIGHT_NOLEFT_CHAR_MASK) {
                    reshapedString.append(getShape(at, 2 + pre_step));
                    i = i + 1;
                    pre_can_connect = true;
                    continue;

                } else if (what_case_post == TANWEEN) {
                    reshapedString.append(getShape(at, pre_step));
                    i = i + 1;
                    continue;

                } else if (what_case_post == TASHKEEL) {
                    post_post = Temp.charAt(i + 2);
                    what_case_post_post = getCase(post_post);
                    if ((what_case_post_post & RIGHT_NOLEFT_CHAR_MASK) == RIGHT_NOLEFT_CHAR_MASK) {
                        reshapedString.append(getShape(at, 2 + pre_step));
                        i = i + 1;
                        pre_can_connect = true;
                        continue;

                    } else {
                        reshapedString.append(getShape(at, pre_step));
                        i = i + 1;
                        continue;

                    }

                } else {
                    reshapedString.append(getShape(at, pre_step));
                    i = i + 1;
                    continue;

                }

            case RIGHT_LEFT_CHAR:
                if ((what_case_post & RIGHT_NOLEFT_CHAR_MASK) == RIGHT_NOLEFT_CHAR_MASK) {
                    reshapedString.append(getShape(at, 2 + pre_step));
                    i = i + 1;
                    continue;

                } else if (what_case_post == TANWEEN) {
                    reshapedString.append(getShape(at, pre_step));
                    i = i + 1;
                    continue;

                } else if (what_case_post == TASHKEEL) {
                    post_post = Temp.charAt(i + 3);
                    what_case_post_post = getCase(post_post);
                    if ((what_case_post_post & RIGHT_NOLEFT_CHAR_MASK) == RIGHT_NOLEFT_CHAR_MASK) {
                        reshapedString.append(getShape(at, 2 + pre_step));
                        i = i + 1;
                        pre_can_connect = true;
                        continue;

                    } else {
                        reshapedString.append(getShape(at, pre_step));
                        i = i + 1;
                        continue;

                    }

                } else {
                    reshapedString.append(getShape(at, pre_step));
                    i = i + 1;
                    continue;

                }
            case RIGHT_NOLEFT_CHAR_ALEF:
            case RIGHT_NOLEFT_CHAR:
                reshapedString.append(getShape(at, pre_step));
                i = i + 1;
                continue;
            case TASHKEEL:
                reshapedString.append(getShape(at, 0));
                i++;
                pre_pre = pre;
                continue;
            case TANWEEN:
                reshapedString.append(getShape(at, 0));
                i++;
                pre_pre = pre;
                continue;

            default:
                reshapedString.append(getShape(at, 0));
                i++;

            }

        }

        return reshapedString.toString();
    }

    static int getCase(char ch) {
        if (ch < 0x0621 || ch > 0x06d2) {
            return 0;

        } else {

            return allchar[(int) ch - 0x0621][1];

        }

    }

    static char getShape(char ch, int which_shape) {

        return allchar[(int) ch - 0x0621][2 + which_shape];

    }
} 
```

# javascript - 如何为多个项目创建一个 javascript/jquery 函数处理程序？

> ID：13778214
> 
> 赞同：1
> 
> 时间：2012-12-08T14:08:59.563
> 
> 标签：javascript, jquery

我有如下的html：

```
<table class="table" id="subscriptions">
  <tbody id="subscriptions-tbody">
    <tr>
      <td>Item 1</td>
      <td><a href="#">delete</a></td>
    </tr>
    <tr>
      <td>Item 2</td>
      <td><a href="#">delete</a></td>
    </tr>
    <tr>
      <td>Item 3</td>
      <td><a href="#">delete</a></td>
    </tr>
  </tbody>
</table> 
```

项目可以在那里动态添加。

现在，我应该创建函数，如果用户单击删除，它将帮助我从列表中删除元素。看起来我应该：

1.  为列表中的每个项目分配一些唯一的 id（我有这样的 id）——我应该把它们放在哪里？部分为`href`?;
2.  一旦用户单击链接，我应该阻止默认操作并将控制权传递给我的函数（它将隐藏列表中的元素并将 POST 请求发送到服务器），并将项目 ID 作为参数。

怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T14:15:18.133

这是*事件委托*的完美案例。将事件挂在`table`or上`tbody`，但仅当它发生在您的删除链接上时才要求 jQuery 触发它，如下所示：

```
$("#subscriptions-tbody").delegate("a", "click", function(event) {
    var row = $(this).closest('tr');

    // ...delete the row

    return false; // Don't try to follow the link
}); 
```

[实例](http://jsbin.com/ojarij/1)| [来源](http://jsbin.com/ojarij/1/edit)

因为事件与`table`or挂钩，所以`tbody`添加和删除行并不重要，因为事件是在`table`or`tbody`级别处理的。

在上面，我使用[`delegate`](http://api.jquery.com/delegate)它是因为我喜欢它的显式程度。使用 jQuery 1.7 或更高版本，您可以改用 way-too-overloaded-[`on`函数](http://api.jquery.com/on/)：

```
$("#subscriptions-tbody").on("click", "a", function(event) {
    var row = $(this).closest('tr');

    // ...delete the row

    return false; // Don't try to follow the link
}); 
```

[实例](http://jsbin.com/ojarij/2)| [来源](http://jsbin.com/ojarij/2/edit)

请注意，参数的顺序略有不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T14:19:11.690

试试这个：

```
<table class="table" id="subscriptions">
  <tbody id="subscriptions-tbody">
    <tr data-id="1">
      <td>Item 1</td>
      <td><a href="#" class="delete">delete</a></td>
    </tr>
    <tr data-id="2">
      <td>Item 2</td>
      <td><a href="#" class="delete">delete</a></td>
    </tr>
    <tr data-id="3">
      <td>Item 3</td>
      <td><a href="#" class="delete">delete</a></td>
    </tr>
  </tbody>
</table> 
```

您将为您的删除锚命名一个类，比如说`class="delete"`，并且您将`data-id`属性放置到表行中，以便唯一标识每个项目并知道要发送到服务器的 id。

现在你的 js 可能看起来像这样：

```
$("#subscriptions-tbody").on('click', 'a.delete', function(e){

   var tr = $(e.currentTarget).closest('tr');

   //get the id
   var id = tr.attr("data-id");

   //make ajax request
   $.ajax({
      url: 'script.php',
      data: id,
      success: function(data) {

         //hide the item or remove
         tr.remove(); // tr.hide();

         // ajax callback
     }
   });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T14:20:01.890

您应该将服务器端所需的信息（*如`id`*）保留在`tr`with[`data-`属性](http://www.w3.org/TR/2011/WD-html5-20110525/elements.html#embedding-custom-non-visible-data-with-the-data-attributes)上，并用于[`.on()`](http://api.jquery.com/on)处理表中的事件。

**html**

```
<table class="table" id="subscriptions">
  <tbody id="subscriptions-tbody">
    <tr data-id="3">
      <td>Item 1</td>
      <td><a href="#" class="delete">delete</a></td>
    </tr>
    <tr data-id="5">
      <td>Item 2</td>
      <td><a href="#" class="delete">delete</a></td>
    </tr>
    <tr data-id="6">
      <td>Item 3</td>
      <td><a href="#" class="delete">delete</a></td>
    </tr>
  </tbody>
</table> 
```

**脚本**

```
$("#subscriptions").on("click", "a.delete", function(e) {
    e.preventDefault();
    var row = $(this).closest('tr'),
        relatedId = row.data('id');

    $.post(...); // use relatedId here
    row.fadeOut(500, function(){
       row.remove();
    })
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-08T14:23:47.987

您可以将 ID 作为`data-`属性存储在控件或行上。`on()`将单击处理程序委托给表 itleslf 以说明在使用方法运行代码时不存在的动态添加的元素。

HTML：

```
<!-- class added to element -->
<a href="#" class="delecte-btn" data-id="3">delete</a> 
```

JS

```
$('#subscriptions').on('click', '.delete-btn',function(evt){  
    evt.preventDefault();
    var id=$(this).data('id'), $row=$(this).closest('tr');
    /* send data to server and remove row on success*/
   $.post('serverUrl.php', { rowID: id, action :'delete'}, function(){
         $row.remove();
   })
}) 
```

# mysql - Orchard 的后台运行功能

> ID：13778217
> 
> 赞同：0
> 
> 时间：2012-12-08T14:09:14.590
> 
> 标签：mysql, nhibernate, orchardcms

所以我想要做的是一个果园功能，**如果启用**，它会运行一个单独的线程（**服务**）来查询一些**PartRecord的****IRepository<>**。

 **### 关于启动服务：

我尝试在**IFeatureEventHandler.Enabled()**上启动服务，但这**仅在启用该功能时执行**，而不是在启动 Orchard 时执行。

所以我在 Orchard 框架中查找了我可以使用的任何东西，我发现**了 IOrchardShellEvents.Activated()**。

所以我基本上是这样做的：

```
 public class MyService : IOrchardShellEvents {

    ...More stuff...

    public void Activated() {
        running = true;
        //Run DoWork() in separate thread
    }

    public void Terminating() {
        running = false;
    }

    private void DoWork(){
        //do service work while running = true
    }

} 
```

这碰巧有效，但我不确定这是否是在 Orchard 启动时启动自定义线程的常见做法。所以，如果不是这样，**请纠正我..**

### 关于Repository查询问题：

存储库被注入，起初它查询表就好了。过了一会儿，它抛出一个异常说：***“当前不支持多个同时连接或在同一事务中具有不同连接字符串的连接。”*** .

似乎非常奇怪的是，执行了几次的查询会在一段时间后崩溃；这是展示我如何使用存储库的代码：

```
 public MyService(ServiceManager manager, IRepository<SomePartRecord> repo) {
        this.manager = manager;
        //The manager of the service uses the repository to get a single column(ExpectaId, not a PK) out of each row
        manager.LoadIds = () =>
              repo.Table.ToList().Select(record => record.ExpectaId);
    } 
```

**注意：** Func<> manager.LoadIds 每 10 秒调用一次

**注意：**我使用的是 MySql Server 5.5

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T22:33:19.720

好的，所以任何以“我如何旋转一个单独的线程以便...”开头的问题的答案都是“不要”。严重地。参见例如[http://ayende.com/blog/158945/thou-shall-not-do-threading-unless-you-know-what-you-are-doing](http://ayende.com/blog/158945/thou-shall-not-do-threading-unless-you-know-what-you-are-doing)

幸运的是，Orchard 提供了一种无需自旋线程即可在后台运行任务的方法：[如何在 Orchard 中运行计划任务？](https://stackoverflow.com/questions/11475187/how-to-run-scheduled-tasks-in-orchard)**

# php - PHP：如何在不等待发送电子邮件的情况下输出注册脚本的验证状态？

> ID：13778226
> 
> 赞同：0
> 
> 时间：2012-12-08T14:09:47.760
> 
> 标签：php

我的网站上有一个注册表单。表单通过 AJAX 发送到服务器，然后进行验证。然后，如果它被验证为有效信息，它将为浏览器输出一个重定向到的地址。然后 PHP 将向指定的电子邮件发送一封验证电子邮件。问题是电子邮件的发送需要 10 秒，我不希望我的用户等待 10 秒从他们按注册到他们被重定向......

PHP 有没有办法告诉客户端信息已正确验证并输出重定向 URL，并在客户端无需等待的情况下继续发送电子邮件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T14:14:28.393

这称为后台作业。

以最简单的方式做到这一点（注意：不是最好的，而是最简单的）：

1.  我假设您将注册详细信息存储在某种形式的数据库中。添加一个额外的列来标记您需要向该用户发送验证电子邮件。

2.  在另一个脚本中，检查数据库中设置了此标志的任何行，然后从那里发送电子邮件。

3.  第二个脚本将由 cronjob 或类似任务按照您选择的时间表触发。

这样，用户无需等待那 10 秒。

有更有效的解决方案可以更好地应对更大规模的站点，但我猜你还不需要知道这一点，如果我把它们带入等式，事情就会变得混乱。如果您想了解更多信息，请查看作业队列。

# wpf - 从 DependencyObject 继承的自定义 IValueConverter

> ID：13778231
> 
> 赞同：2
> 
> 时间：2012-12-08T14:10:33.910
> 
> 标签：wpf, binding, ivalueconverter, dependencyobject

我想尝试能够有一个转换器，其参数可以与当前数据上下文绑定。谁能告诉我为什么到达 Convert() 函数时，Source 属性始终为空？

```
namespace WpfApplication32
{
    public class ConverterTest : DependencyObject, IValueConverter
    {
        public static readonly DependencyProperty SourceProperty =
            DependencyProperty.Register("Source", typeof(DependencyObject), typeof(ConverterTest));

        public DependencyObject Source
        {
            get { return (DependencyObject)this.GetValue(SourceProperty); }
            set { this.SetValue(SourceProperty, value); }
        }

        public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
        {
            return value;
        }

        public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
        {
            return value;
        }
    }

    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            Value = 7;

            InitializeComponent();
            DataContext = this;
        }

        public float Value
        {
            get;
            set;
        }
    }
}

<Window x:Class="WpfApplication32.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:WpfApplication32">

    <Slider>
        <Slider.Value>
            <Binding Path="Value">
                <Binding.Converter>
                    <local:ConverterTest Source="{Binding}"/>
                </Binding.Converter>
            </Binding>
        </Slider.Value>
    </Slider>

</Window> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T14:42:35.277

一种可能的解决方案是让您的 Converter 从**Freezable**继承（[Hillberg Freezable 技巧](http://blogs.msdn.com/b/mikehillberg/archive/2008/05/21/model-see_2c00_-model-do.aspx)）。然后，您甚至可以在 Resources 中定义 Converter 并在绑定中将其作为属性而不是额外的子元素引用。

# c# - C# 控制台应用程序标准输入/标准输出重定向

> ID：13778236
> 
> 赞同：6
> 
> 时间：2012-12-08T14:11:41.040
> 
> 标签：c#, console, pinvoke, stdout

我有一个有趣的（阅读：令人沮丧的）问题，从 C# WPF 应用程序启动控制台应用程序并重定向其标准输入和标准输出。

它大部分都在工作，但是一旦我开始重定向标准输入，我似乎最终没有从标准输出获得一些数据。

我会用一个例子来澄清。如果我没有在 STARTUPINFO 结构中设置 hStdInput，当我启动子进程时，我会收到以下信息：

```
MongoDB shell version: 2.2.0
connecting to: test
local:PRIMARY> 
```

然而，一旦我设置了 hStdInput，我就会得到这个：

```
MongoDB shell version: 2.2.0
connecting to: test 
```

我知道处理标准输出的 BackgroundWorker 仍在运行，因为如果我在标准输入上向进程发送某些内容，它会相应地响应。

```
use TestDB
switched to db TestDB 
```

所以，这就是我创建过程的方式：

```
_processInfo = new ProcessInfo();

bool ok = false;

SECURITY_ATTRIBUTES sattr = new SECURITY_ATTRIBUTES();
sattr.bInheritHandle = 1;
unsafe
{
    sattr.lpSecurityDescriptor = null;
}
sattr.nLength = Marshal.SizeOf(sattr);

IntPtr hWrite;
ok = CreatePipe(out _hReadStdOut, out hWrite, ref sattr, 0);
ok = SetHandleInformation(_hReadStdOut, HANDLE_FLAGS.INHERIT, 0);
IntPtr hRead;
ok = CreatePipe(out hRead, out _hWriteStdIn, ref sattr, 0);
ok = SetHandleInformation(_hWriteStdIn, HANDLE_FLAGS.INHERIT, 0);

var startInfo = new StartupInfo
{
    dwFlags = 0x0001 | 0x0100,
    wShowWindow = 0,
    hStdOutput = hWrite,
    hStdError = hWrite,
    hStdInput = hRead // If this is IntPtr.Zero, I get everything from stdout
};

SECURITY_ATTRIBUTES pSec = new SECURITY_ATTRIBUTES();
pSec.nLength = Marshal.SizeOf(pSec);
SECURITY_ATTRIBUTES tSec = new SECURITY_ATTRIBUTES();
tSec.nLength = Marshal.SizeOf(tSec);

unsafe
{
    ok = CreateProcess(
        null,
        pathToExeAndArgs,
        ref pSec,
        ref tSec,
        true,
        0,
        IntPtr.Zero,
        null,
        ref startInfo,
        out _processInfo);
} 
```

我在 DoWork 上有一个 BackgroundWorker 处理标准输出，它像这样读取管道：

```
success = ReadFile(
    _hReadStdOut,
    bufPtr,
    1024,
    &read,
    IntPtr.Zero); 
```

我没有使用 .Net Process 类，因为在控制台应用程序发送换行符之前它没有从 stdout 获取数据，所以在那种情况下我也没有得到提示。

非常感谢您对此的任何帮助。

干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T16:06:14.560

我怀疑以下内容可以解释您所观察到的情况：

*   当您未定义`hStdInput`子进程时，将使用附加到控制台的标准输入设备。子进程检测到标准输入是交互式控制台设备并编写提示。
*   当您定义`hStdInput`子进程时，检测到标准输入是管道，因此忽略了编写提示。毕竟，提示非交互式输入设备有什么意义呢？

子进程将用于`GetFileType(GetStdHandle(STD_INPUT_HANDLE))`检测连接到标准输入的设备类型。值`FILE_TYPE_CHAR`表示控制台。当您将管道附加到标准输入时，标准输入文件类型将为`FILE_TYPE_PIPE`.

我的结论是，一切都按设计和预期工作。

# python - 开关发生器输出

> ID：13778237
> 
> 赞同：0
> 
> 时间：2012-12-08T14:11:52.810
> 
> 标签：python, generator

我有一项任务，我需要根据某些条件“切换”发电机中流的输出。

假设我们有一个生成器，它从某个无限来源产生数据。每次我们从生成器读取 1GB 数据时，我们都会将输出切换到其他读取器。

```
input = MyInfiniteGenerator()
Reader1(input) # does something with the first gigabyte of data
Reader2(input) # does something with the second gigabyte of data
... 
```

当我们将输出从 Reader1 切换到 Reader2 时，Reader1 应该关闭。我无法改变读者的行为方式，他们只是迭代输入。

这个问题类似于旋转文件日志。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T15:00:28.337

我建议将您的生成器包装在另一个只会读取您想要的数量的生成器中。`itertools.islice`应该很好地完成工作：

```
import itertools

gen = someInfiniteGenerator()

while True:
    slice = itertools.islice(gen, 1000000) # reads one million items from gen
    reader = Reader(slice) # consumes all of the slice 
```

唯一潜在的问题是，如果`gen`真的结束（即，它 raise `StopIteration`），你永远不会检测到它，除非 Reader 在它得到一个空的生成器时翻转。如果这是可能性，您可以使用额外级别的生成器来解决它，该生成器在生成任何内容之前检查生成器中是否至少有一个项目：

```
class EmptyGenerator(Exception):
    pass

def notEmptyGen(gen):
    try:
        first = next(gen)
        yield first
    except StopIteration: # empty source generator
        raise EmptyGenerator()

    yield from gen 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T14:20:13.987

你可以做类似的事情

```
input_chunk = (i for _, i in zip(xrange(chunk_size), input)) # `range` in Python3 
```

或者，也许更一般地说，

```
from itertools import takewhile    
input_chunk = takewhile(condition, input) 
```

并喂给等`input_chunk`。`Reader1`

`condition`必须是一个接受一个参数的函数—— 的项目`input`。

另请注意，这`input`是一个[内置函数](http://docs.python.org/2/library/functions.html#input)的名称，并且将其用作变量名称会隐藏它。

上的文档[`itertools.takewhile`](http://docs.python.org/2/library/itertools.html#itertools.takewhile)。

# javascript - Javascript 滑入但无法滑出

> ID：13778244
> 
> 赞同：0
> 
> 时间：2012-12-08T14:13:01.763
> 
> 标签：javascript, javascript-events

我有这个简单的 JavaScript 代码，应该将 div 放入和 div 输出。它在滑入时工作完美。通过完美工作可以轻松滑动 div。但是，当您单击滑出时，div 就会从浏览器中消失。我不知道为什么，我找不到错误。我的代码在这里

```
<!DOCTYPE html>
<html>
    <head></head>
    <body>

        <script>

            function slideIt()
            {
                var stopPosition = 50;
                var slidingDiv = "";
                slidingDiv = document.getElementById("d3");
                if (parseInt(slidingDiv.style.left) < stopPosition )
                {
                    slidingDiv.style.left = parseInt(slidingDiv.style.left) + 2 + "px";
                    setTimeout(slideIt, 1);
                }
            }

            function slideOut()
            {
                var startPosition =-150;
                var slidingDiv = "";
                slidingDiv = document.getElementById("d4");
                if (parseInt(slidingDiv.style.left) > startPosition )
                {
                    slidingDiv.style.left = parseInt(slidingDiv.style.left) - 2 + "px";
                    setTimeout(slideOut(), 1);

                }
            }

        </script>
        <div id="d1" onclick="slideIt();">Slide in</div>
        <div id="d2" onclick="slideOut();">Slide out</div>
        <div id="d3" style="position: absolute; left:-150px; top:300px" >horizontally sliding div</div>
        <div id="d4" style="position: absolute; left:150px; top:300px">horizontally sliding div</div>

    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T14:15:56.140

您不需要`slideOut`在第二次超时中调用。删除括号。

```
setTimeout(slideOut, 1); 
```

这是一个演示：http: [//jsfiddle.net/cctqf/](http://jsfiddle.net/cctqf/)

# jmeter - 使用jmeter的代理记录时“发生错误。请返回或关闭浏览器再试一次”

> ID：13778245
> 
> 赞同：-3
> 
> 时间：2012-12-08T14:13:08.557
> 
> 标签：jmeter

我正在对 .net 应用程序进行性能测试。每当我们在浏览器中输入 url 时，都会打开一个浏览器窗口，询问用户名和密码。进入该网站页面后出现。

当我点击开始按钮录制脚本并在浏览器中输入 URL 时设置代理后，一条消息：

> 发生了错误。请返回或关闭浏览器，然后重试。

出现了。
现在没有登录窗口被打开。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T12:58:58.157

您看到的是 HTTP 身份验证窗口。它可以是 3 种类型：基本、摘要、NTLM。

JMeter 仅支持 Basic 和 NTLM 身份验证。如果您的站点使用它，您可以将具有正确基本 URL、用户名和密码的[HTTP 授权管理器添加到您的测试计划中。](http://jmeter.apache.org/usermanual/component_reference.html#HTTP_Authorization_Manager)

# ruby - 使用 rack-perftools_profiler 分析 Sinatra（使用 net/http）

> ID：13778247
> 
> 赞同：3
> 
> 时间：2012-12-08T14:13:16.040
> 
> 标签：ruby, http, profiling, sinatra, rack

我的 Sinatra 操作之一使用响应执行另一个请求`net/http`并根据响应计算某些内容：

```
api_response = Net::HTTP.get_response(uri) 
```

它就像一种魅力，但是当我尝试对此进行分析时：

```
configure do
  use ::Rack::PerftoolsProfiler, default_printer: 'pdf', frequency: 4000, mode: :walltime
end 
```

（并放入`?profile=true`请求的参数中，我得到了这个：

```
Errno::EADDRINUSE - Address already in use - connect(2):
    /Users/tomek/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/net/http.rb:762:in `initialize'
    /Users/tomek/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/net/http.rb:762:in `open'
    /Users/tomek/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/net/http.rb:762:in `block in connect'
    /Users/tomek/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/timeout.rb:54:in `timeout'
    /Users/tomek/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/timeout.rb:99:in `timeout'
    /Users/tomek/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/net/http.rb:762:in `connect'
    /Users/tomek/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/net/http.rb:755:in `do_start'
    /Users/tomek/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/net/http.rb:744:in `start'
    /Users/tomek/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/net/http.rb:454:in `get_response' 
```

知道发生了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-06T19:07:30.190

我尝试以与您相同的方式设置这些。

```
require 'sinatra'
require 'rack/perftools_profiler'
require 'net/http'

configure do
  use ::Rack::PerftoolsProfiler, default_printer: 'pdf', frequency: 4000, mode: :walltime
end

get "/" do
  uri = URI('http://google.com')
  api_response = Net::HTTP.get_response(uri)
end 
```

它在 ruby​​ 1.9.3-p286 和 rack-perftools_profiler (0.6.1) 上运行没有问题。

两个建议：

*   更新你的红宝石版本
*   更新你的宝石

如果这些不能帮助检查哪个程序绑定了您的端口`sudo netstat -nlp`

如果这些都没有帮助，请告诉我们更多关于您的设置。

# java - 将字符串结果 [] 转换为 ArrayList 一个列表;

> ID：13778248
> 
> 赞同：-1
> 
> 时间：2012-12-08T14:13:21.810
> 
> 标签：java

> **可能重复：**
> [如何将 String[] 转换为 ArrayList<String>](https://stackoverflow.com/questions/10230929/how-can-i-convert-string-to-arrayliststring)

嗨，任何人都可以帮助我，我有：

```
private String results[]; 
private ArrayList<String> alist; 
```

我要转换

```
String results[] to  ArrayList<String> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T14:15:18.480

将字符串数组转换为 ArrayList 为

```
String[] results = new String[] {"Java", "Android", "Hello"};
ArrayList<String> strlist = 
     new ArrayList<String>(Arrays.asList(results)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T14:15:02.510

您可以使用[Arrays.asList()](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#asList%28T...%29)方法将数组转换为列表。

例如`List<String> alist = Arrays.asList(results);`

请注意，`Arrays.asList()`返回的是一个`List`实例，而不是一个`ArrayList`实例。如果你真的需要一个`ArrayList`实例，你可以使用`ArrayList`构造函数将`List`实例传递给它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T14:19:55.587

试试这个：

```
ArrayList<String> aList = new ArrayList<String>();
for(String s : results){
    aList.add(s);
} 
```

它的作用是，它构造了一个名为 aList 的字符串 ArrayList：`ArrayList<String> aList = new ArrayList<String>();`

然后，对于结果中的每个字符串：`String s : results`

它添加了那个字符串：`aList.add(s);`.

希望这可以帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-08T14:29:46.303

你应该使用

```
Arrays.asList(results) 
```

默认情况下，除非您出于某种原因绝对必须拥有一个`ArrayList`.

例如，如果你想修改列表，在这种情况下你使用

```
new ArrayList(Arrays.asList(results)) 
```

# php - IF/ELSE 在 PHP 中回显图像

> ID：13778250
> 
> 赞同：0
> 
> 时间：2012-12-08T14:13:26.493
> 
> 标签：php, if-statement

我正在尝试根据 IF/ELSE 语句的结果来回显特定图像，但是我无法完全确定 IF/ELSE 语句的措辞。我是 PHP 的相对新手，所以我确信这只是代码中的一个小错误，但如果有人可以提供任何帮助，我将不胜感激！

我目前处于以下阶段：

```
<?php
     $fresh = if ($reviews['reviews']['freshness']) = 'fresh' {
            echo '<img src="assets/images/fresh.png" class="rating" title="Fresh" alt="Fresh" />';
        } else {
            echo '<img src="assets/images/rotten.png" class="rating" title="Rotten" alt="Rotten" />';
        }
?>

<?php
                        foreach($reviews['reviews'] as $rv){
                            if ($tmp++ < 10);
                            echo $fresh;
                            echo '<li>' . $rv['quote'] . '</li>';
                        }
                    ?> 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T14:15:18.457

您不能将 if 语句分配给一个值。

```
if ($reviews['reviews']['freshness'] == 'fresh') {
            echo '<img src="assets/images/fresh.png" class="rating" title="Fresh" alt="Fresh"/>';
        } else {
            echo '<img src="assets/images/rotten.png" class="rating" title="Rotten" alt="Rotten" />';
    } 
```

另一种更漂亮的方式是：

```
if ($reviews['reviews']['freshness'] == 'fresh') {
   $image = "fresh";
}
else {
    $image = "rotten";
}

echo '<img src="assets/images/' . $image . '.png" class="rating" title="Rotten" alt="Rotten" />'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T14:19:46.450

是的，您的代码非常错误，但我可以看到您正在尝试做什么。

```
<?php
if ($reviews['reviews']['freshness'] == 'fresh') {
    $image = '<img src="assets/images/fresh.png" class="rating" title="Fresh" alt="Fresh" />';
} else {
    $image = '<img src="assets/images/rotten.png" class="rating" title="Rotten" alt="Rotten" />';
}
?> 
```

您的主要错误是括号的位置不正确，以及 IF 语句在 PHP 中不返回值的事实。

也就是说，我不确定你为什么在下面做你的 foreach 循环，所以我没有触及它；也许您可以进一步解释您要达到的目标？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T14:21:38.787

这可能会帮助您朝着正确的方向前进：

```
<?php
if ($reviews['reviews']['freshness'] == 'fresh'){
    echo '<img src="assets/images/fresh.png" class="rating" title="Fresh" alt="Fresh" />';
}
else{
    echo '<img src="assets/images/rotten.png" class="rating" title="Rotten" alt="Rotten" />';
}

while($reviews['reviews']){
    for($i=0;i<10;i++{
        echo // What do you actually want to print out?
        echo '<li>'.$reviews['reviews']['quote'].'</li>';
    }
}
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-08T14:31:17.757

我想这就是你想要的...

```
<?php
    for ($tmp = 0; $tmp < 10 && $tmp < count($reviews); $tmp++) {
        if ($reviews[$tmp]['freshness'] == 'fresh') {
            echo '<img src="assets/images/fresh.png" class="rating" title="Fresh" alt="Fresh" />';
        } else {
             echo '<img src="assets/images/rotten.png" class="rating" title="Rotten" alt="Rotten" />';
        }
        echo '<li>' . $reviews[$tmp]['quote'] . '</li>';
    }
 ?> 
```

**ETA：**查看了 API 并修复了一些问题。

**ETAx2：**对于那些想要查看从 API 返回的 JSON 示例的人...

```
{
"total": 41,
"reviews": [
    {
        "critic": "Joe Baltake",
        "date": "2010-07-27",
        "freshness": "fresh",
        "publication": "Passionate Moviegoer",
        "quote": "'Toy Story 3': Alternately affecting, hilarious and heartbreaking and the most original prison-escape movie ever made",
        "links": {
            "review": "http://thepassionatemoviegoer.blogspot.com/2010/07/perfectimperfect.html"
        }
    },
    {
        "critic": "Rafer Guzman",
        "date": "2010-07-06",
        "freshness": "fresh",
        "publication": "Newsday",
        "quote": "It's sadder and scarier than its predecessors, but it also may be the most important chapter in the tale.",
        "links": {
            "review": "http://www.newsday.com/entertainment/movies/toy-story-3-andy-grows-up-1.2028598"
        }
    },
    {
        "critic": "Richard Roeper",
        "date": "2010-06-30",
        "original_score": "5/5",
        "freshness": "fresh",
        "publication": "Richard Roeper.com",
        "quote": "The best movie of the year so far.",
        "links": {
            "review": "http://www.richardroeper.com/reviews/toystory3.aspx"
        }
    },
... 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-20T17:53:25.197

通过反复试验，我找到了以下解决方案。

```
<?php
  $ID=$row_RecordsetLast['ID'];

$image = '../../pics/'.$ID.'.jpg';

if (file_exists($image)) {
    echo '<img src="../../pics/' . $ID . '.jpg" alt="" width="110" height="161" />';
} else {
    echo '<img src="guest.png" alt="" width="110" height="161" />';
}
?> 
```

# python - 导入 httplib ImportError: 没有名为 httplib 的模块

> ID：13778252
> 
> 赞同：76
> 
> 时间：2012-12-08T14:13:44.760
> 
> 标签：python, python-3.x

运行 test.py 时出现此错误

```
C:\Python32>python.exe test.py
Traceback (most recent call last):
  File "test.py", line 5, in <module>
    import httplib
ImportError: No module named httplib 
```

如何纠正它？

**test.py**的代码块：

```
#!/usr/local/bin/python

import httplib
import sys
import re
from HTMLParser import HTMLParser

class miniHTMLParser( HTMLParser ):

  viewedQueue = []
  instQueue = []

  def get_next_link( self ):
    if self.instQueue == []:
      return ''
    else:
      return self.instQueue.pop(0)

  def gethtmlfile( self, site, page ):
    try:
      httpconn = httplib.HTTPConnection(site)
      httpconn.request("GET", page)
      resp = httpconn.getresponse()
      resppage = resp.read()
    except:
      resppage = ""

    return resppage

  def handle_starttag( self, tag, attrs ):
    if tag == 'a':
      newstr = str(attrs[0][1])
      if re.search('http', newstr) == None:
        if re.search('mailto', newstr) == None:
          if re.search('htm', newstr) != None:
            if (newstr in self.viewedQueue) == False:
              print ("  adding", newstr)
              self.instQueue.append( newstr )
              self.viewedQueue.append( newstr )
          else:
            print ("  ignoring", newstr)
        else:
          print ("  ignoring", newstr)
      else:
        print ("  ignoring", newstr)

def main():

  if sys.argv[1] == '':
    print ("usage is ./minispider.py site link")
    sys.exit(2)

  mySpider = miniHTMLParser()

  link = sys.argv[2]

  while link != '':

    print ("\nChecking link ", link)

    # Get the file from the site and link
    retfile = mySpider.gethtmlfile( sys.argv[1], link )

    # Feed the file into the HTML parser
    mySpider.feed(retfile)

    # Search the retfile here

    # Get the next link in level traversal order
    link = mySpider.get_next_link()

  mySpider.close()

  print ("\ndone\n")

if __name__ == "__main__":
  main() 
```

* * *

## 回答 #1

> 赞同：144
> 
> 时间：2012-12-08T14:16:21.627

您正在 Python 3 上运行 Python 2 代码。在 Python 3 中，模块已重命名为[`http.client`](http://docs.python.org/3/library/http.client.html).

您可以尝试在您的代码上运行该[`2to3`工具](http://docs.python.org/2/library/2to3.html#to3-reference)，并尝试使其自动翻译。对的引用`httplib`将自动重写以`http.client`替代使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2021-05-15T20:28:14.137

您可以使用以下代码导入 http.client 并将其重命名为 httplib：

将 http.client 导入为 httplib

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2019-12-30T12:58:35.410

如果您使用 PyCharm，请将您的“项目解释器”更改为“2.7.x”

[![在此处输入图像描述](../Images/9f2fc1ffcf8ca21ebc03218e5ed9273d.png)](https://i.stack.imgur.com/gaibu.png)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2019-08-13T20:42:21.393

当我试图使我的 Docker 容器更小时，我遇到了这个问题。这是因为我安装了 Python 2.7：

```
apt-get install -y --no-install-recommends python 
```

而且我不应该包括`--no-install-recommends`标志：

```
apt-get install -y python 
```

# vim - 在插入模式下映射功能键

> ID：13778254
> 
> 赞同：5
> 
> 时间：2012-12-08T14:13:54.330
> 
> 标签：vim

我正在尝试将我的编译和运行命令映射到 F5，它在正常模式下工作正常，具有以下功能：

```
nmap <F5> :<C-U>make<CR>:!%:r.exe<CR>:redraw<CR> 
```

但是当我尝试在插入模式下做同样的事情时：

```
imap <F5> :<C-U>make<CR>:!%:r.exe<CR>:redraw<CR> 
```

它只是将字符 F5 打印到我的源代码中。

有没有办法让它在两种模式下工作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-08T14:21:47.503

这个怎么样：

```
imap <F5> <Esc>:<C-U>make<CR>:!%:r.exe<CR>:redraw<CR>i 
```

所以它切换到正常模式，然后再返回。

# wpf - 部分部署 WPF 应用程序

> ID：13778257
> 
> 赞同：1
> 
> 时间：2012-12-08T14:14:14.727
> 
> 标签：wpf, deployment

我有一个 WPF 应用程序，我使用 ClickOnce 作为部署策略。一切正常，但我有一个文件大小问题。我的应用程序重约**36MB**，因此我的用户每次更新都必须下载此文件大小，从而增加了网络带宽的使用。

但是，几乎 25MB 不会更改，因为它们属于第三方组件。

我正在考虑创建自定义部署策略：例如，仅过滤不会更改的 dll，只下载我想要的（可能是压缩的），然后我会更新安装文件夹。

我知道这听起来不切实际，那么对于如何提高部署规模和最大限度地减少停机时间有什么建议吗？

# ruby-on-rails - Rails + 谷歌 OpenID

> ID：13778259
> 
> 赞同：1
> 
> 时间：2012-12-08T14:14:20.483
> 
> 标签：ruby-on-rails, ruby, openid

我正在尝试让我的应用使用 Google OpenID 标识符。它应该完全是 Google OpenID，因为我将使用 Google Chrome Web Store。我做了一些研究，但在这里没有找到任何例子。

该应用程序使用 Rails 3.2。

那么有没有很好的例子来说明如何做到这一点？我应该使用哪种宝石？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T15:06:59.113

我会看看[OmniAuth](http://www.omniauth.org)，更具体地说是它的[OpenID 策略](https://github.com/intridea/omniauth-openid)。

# jquery - jQuery在不选择元素两次的情况下将高度增加10px

> ID：13778264
> 
> 赞同：7
> 
> 时间：2012-12-08T14:14:33.800
> 
> 标签：jquery

我想将我选择的元素高度增加 10 像素。有没有更好的方法而不选择元素两次。

例如

```
$(this).height($(this).height()+10); 
```

jquery 中是否有一些方法可以处理我错过的问题？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-08T14:18:22.733

尝试这样的事情：

```
$(this).height("+=10"); 
```

# java - 排序对象

> ID：13778265
> 
> 赞同：-1
> 
> 时间：2012-12-08T14:14:37.460
> 
> 标签：java, jakarta-ee

> **可能重复：**
> [使用多个键对 Java 对象进行排序](https://stackoverflow.com/questions/8036429/sorting-java-objects-using-multiple-keys)

我有一个员工班。根据我要排序的员工姓名。如果两个对象（即两个员工）的员工姓名相同，那么我想根据员工年龄对其进行排序。

为了对员工姓名进行排序，我实现了 COMparable 接口并使用了以下代码：

```
@Override
public int compareTo(Employee o) {
    return name.compareTo(o.getName());
} 
```

这段代码对我来说很好用。但是当两名员工的姓名相同时，我无法理解如何根据年龄进行排序？

我需要为此使用比较器吗？我不确定如何实现这一目标。

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T14:16:02.440

如果名称相同（即结果为 0），那么您可以按年龄排序。如果名称返回非零结果，则返回

例如

```
@Override
public int compareTo(Employee o) {
    int i = name.compareTo(o.getName());
    if (i == 0) { //ie the names are the same
        return age.compareTo(o.getAge();
    }
    return i;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T14:29:57.257

您可以将员工存储到 ArrayList 中，然后可以使用 Collections.sort 对它们进行排序

```
public class CustomComparator implements Comparator<Employee> {
    @Override
    public int compare(Employee o1, Employee o2) {
        return o1.getAge().compareTo(o2.getAge());
    }
} 
```

现在您可以使用 Collections.sort 如下：

```
Collections.sort(employeeList, new CustomComparator()); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-08T14:22:03.217

您描述中的逻辑应直接转化为您的代码：

```
public int compareTo(Employee o)
{
    firstfield = name.compareTo(o.name())
    if( firstfield == 0 )
    {
        return age.compareTo(o.age())
    }
    else
    {
        return firstfield
    }
} 
```

您还可以通过构建新的字符串进行比较来完成这项工作：

```
public int compareTo(Employee o)
{
    me = sprintf( "%s:%d", name, age)
    them = sprintf( "%s:%d", o.name, o.age )
    return me.compareTo(them)
} 
```

# r - 如何合并具有相同列名的多个数据框？

> ID：13778267
> 
> 赞同：9
> 
> 时间：2012-12-08T14:14:51.343
> 
> 标签：r, join, merge, dataframe

### 我有的：

我有一个“主”数据框，其中包含以下列：

```
userid, condition 
```

由于有四个实验条件，我也有四个携带答案信息的数据框，以下列：

```
userid, condition, answer1, answer2 
```

现在，我想加入这些，因此用户 ID、条件及其对这些条件的答案的所有组合都被合并了。每个条件只应在每行的相应列中具有正确答案。

* * *

### 简短、独立的示例：

```
master = data.frame(userid=c("foo","foo","foo","foo","bar","bar","bar","bar"), condition=c("A","B","C","D","A","B","C","D"))
cond_a = data.frame(userid=c("foo","bar"), condition="A", answer1=c("1","1"), answer2=c("2","2"))
cond_b = data.frame(userid=c("foo","bar"), condition="B", answer1=c("3","3"), answer2=c("4","4"))
cond_c = data.frame(userid=c("foo","bar"), condition="C", answer1=c("5","5"), answer2=c("6","6"))
cond_d = data.frame(userid=c("foo","bar"), condition="D", answer1=c("7","7"), answer2=c("8","8")) 
```

如何将所有条件合并到主表中，使主表如下所示？

```
 userid condition answer1 answer2
1    bar         A       1       2
2    bar         B       3       4
3    bar         C       5       6
4    bar         D       7       8
5    foo         A       1       2
6    foo         B       3       4
7    foo         C       5       6
8    foo         D       7       8 
```

我尝试了以下方法：

```
temp = merge(master, cond_a, all.x=TRUE) 
```

这给了我：

```
 userid condition answer1 answer2
1    bar         A       1       2
2    bar         B    <NA>    <NA>
3    bar         C    <NA>    <NA>
4    bar         D    <NA>    <NA>
5    foo         A       1       2
6    foo         B    <NA>    <NA>
7    foo         C    <NA>    <NA>
8    foo         D    <NA>    <NA> 
```

但只要我这样做……</p>

```
merge(temp, cond_b, all.x=TRUE) 
```

条件没有值`B`。怎么来的？

```
 userid condition answer1 answer2
1    bar         A       1       2
2    bar         B    <NA>    <NA>
3    bar         C    <NA>    <NA>
4    bar         D    <NA>    <NA>
5    foo         A       1       2
6    foo         B    <NA>    <NA>
7    foo         C    <NA>    <NA>
8    foo         D    <NA>    <NA> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-08T14:29:41.710

您可以使用`Reduce()`和`complete.cases()`如下：

```
merged <- Reduce(function(x, y) merge(x, y, all=TRUE), 
                 list(master, cond_a, cond_b, cond_c, cond_d))
merged[complete.cases(merged), ]
#    userid condition answer1 answer2
# 1     bar         A       1       2
# 2     bar         B       3       4
# 4     bar         C       5       6
# 6     bar         D       7       8
# 8     foo         A       1       2
# 9     foo         B       3       4
# 11    foo         C       5       6
# 13    foo         D       7       8 
```

`Reduce()`可能需要一些时间来适应。您定义您的函数，然后提供一个`list`对象以重复应用该函数。因此，该声明就像在做：

```
temp1 <- merge(master, cond_a, all=TRUE)
temp2 <- merge(temp1, cond_b, all=TRUE)
temp3 <- merge(temp2, ....) 
```

或类似的东西：

```
merge(merge(merge(master, cond_a, all=TRUE), cond_b, all=TRUE), cond_c, all=TRUE) 
```

`complete.cases()`创建指定列是否“完整”的逻辑向量；此逻辑向量可用于从合并的`data.frame`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T14:51:41.377

正如OP所述，鉴于与主数据框没有明确的关系，一个选项是：

```
temp <-rbind(cond_a,cond_b,cond_c,cond_d)
temp[order(temp["userid"]),] 
```

或许，如果已知任何关系，可能会有一个不简单的解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-09T21:03:40.527

您可以将此连接表示为`SQL`语句，然后使用`sqldf`库执行它。

```
cond_all = rbind(cond_a, cond_b, cond_c, cond_d)

> sqldf('select p.userid as userid, p.condition as condition, answer1, answer2 from master as p join cond_all as q on p.userid=q.userid and p.condition=q.condition order by userid, condition')
  userid condition answer1 answer2
1    bar         A       1       2
2    bar         B       3       4
3    bar         C       5       6
4    bar         D       7       8
5    foo         A       1       2
6    foo         B       3       4
7    foo         C       5       6
8    foo         D       7       8 
```

您在评论中提到主数据帧具有 cond 数据帧中不存在的额外列。您应该能够修改此 SQL 查询以仍然适用于这种情况。

# linux - 寻找独特的线条

> ID：13778273
> 
> 赞同：105
> 
> 时间：2012-12-08T14:15:26.417
> 
> 标签：linux, sorting, unique, uniq

如何找到唯一行并从文件中删除所有重复项？我的输入文件是

```
1
1
2
3
5
5
7
7 
```

我希望结果是：

```
2
3 
```

`sort file | uniq`不会做这项工作。将显示所有值 1 次

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2012-12-08T14:25:25.973

`uniq`有您需要的选项：

```
 -u, --unique
          only print unique lines 
```

```
$ cat file.txt
1
1
2
3
5
5
7
7
$ uniq -u file.txt
2
3 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2012-12-08T14:25:53.977

使用如下：

```
sort < filea | uniq > fileb 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2019-03-15T20:16:27.927

`cat`您还可以使用命令通过管道打印出“文件”中的唯一值`sort`和`uniq`

`cat file | sort | uniq -u`

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2019-02-21T09:12:30.730

虽然`sort`需要 O(n log(n)) 时间，但我更喜欢使用

```
awk '!seen[$0]++' 
```

* * *

`awk '!seen[$0]++'`是 的缩写，如果不为零`awk '!seen[$0]++ {print}'`，则打印 line(=$0) 。`seen[$0]`它需要更多空间，但只需要 O(n) 时间。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2016-01-21T05:23:54.277

uniq -u 一直让我发疯，因为它不起作用。

因此，如果你有 python（大多数 Linux 发行版和服务器已经有它），而不是那样：

# 假设您在 notUnique.txt 中有数据文件

```
#Python
#Assuming file has data on different lines
#Otherwise fix split() accordingly.

uniqueData = []
fileData = open('notUnique.txt').read().split('\n')

for i in fileData:
  if i.strip()!='':
    uniqueData.append(i)

print uniqueData

###Another option (less keystrokes):
set(open('notUnique.txt').read().split('\n')) 
```

# 请注意，由于空行，最终集合可能包含 '' 或仅包含空格的字符串。您可以稍后将其删除。或者只是逃避从终端复制;）

#

仅供参考，来自 uniq 手册页：

“注意：'uniq' 不会检测重复的行，除非它们是相邻的。您可能希望先对输入进行排序，或者在不使用 'uniq' 的情况下使用 'sort -u'。此外，比较遵循 'LC_COLLATE' 指定的规则。”

调用的正确方法之一是：# sort nonUnique.txt | 独特的

## 示例运行：

```
$ cat x
3
1
2
2
2
3
1
3

$ uniq x
3
1
2
3
1
3

$ uniq -u x
3
1
3
1
3

$ sort x | uniq
1
2
3 
```

# 可能会打印空格，所以请做好准备！

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2019-04-21T15:23:34.757

您可以使用：

```
sort data.txt| uniq -u 
```

对数据进行排序并按唯一值过滤

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2012-12-08T14:17:57.870

`uniq -u < file`将完成这项工作。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2020-09-08T07:35:08.243

我觉得这更容易。

```
sort -u input_filename > output_filename 
```

`-u`代表独特。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2016-04-19T18:03:28.750

`uniq`如果你的文件是/可以排序的，应该没问题，如果由于某种原因你不能对文件进行排序，你可以使用`awk`：

`awk '{a[$0]++}END{for(i in a)if(a[i]<2)print i}'`

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2018-04-04T19:00:01.203

```
sort -d "file name" | uniq -u 
```

这对我来说是类似的。如果没有安排，请使用它。如果已排列，您可以删除排序

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-12-09T12:41:32.077

这是我第一次尝试

```
skilla:~# uniq -u all.sorted  

76679787
76679787 
76794979
76794979 
76869286
76869286 
...... 
```

做了 cat -e all.sorted 之后

```
skilla:~# cat -e all.sorted 
$
76679787$
76679787 $
76701427$
76701427$
76794979$
76794979 $
76869286$
76869286 $ 
```

每第二行都有一个尾随空格:(删除所有尾随空格后它起作用了！

谢谢你

# c# - c# 中的全局异常处理（控制台应用程序）

> ID：13778274
> 
> 赞同：2
> 
> 时间：2012-12-08T14:15:29.813
> 
> 标签：c#, exception-handling

> **可能重复：**
> [控制台应用程序中的 .NET 全局异常处理程序](https://stackoverflow.com/questions/3133199/net-global-exception-handler-in-console-application)

我已经阅读了很多关于 stackoverflow 上的全局异常处理的内容，但是我找不到任何与我的主题相关的内容。我编写了一个控制台应用程序，它仅在它们发生的方法中捕获异常。根本没有投掷。我想要的是全局异常处理。我没有关于异常处理的基本指导方针，但除了这些基础知识之外一无所知。想象中应该有一个类处理这些异常（由不同类的方法抛出）。我还不需要任何错误记录或错误报告机制。只需要基础知识（无论什么模式......）来实现这个全局处理。感谢您到目前为止的阅读！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T15:07:39.660

全局处理异常仅适用于某些任务，例如记录错误或应用程序的正常退出。

在所有其他情况下，建议您在最相关的地方处理异常。例如，如果您从您的应用程序进行 Web 服务调用并且该服务不可用，则您应该在进行 Web 服务调用时处理该异常，而不是全局捕获它。这提高了代码的可读性，而且在全局级别做任何明智的事情也是不切实际的，因为您对异常起源的信息知之甚少。（当然你有堆栈跟踪，但它不容易用于编程操作）

[但是，您可以通过将处理程序附加到AppDomain.UnhandledException](http://msdn.microsoft.com/en-us/library/system.appdomain.unhandledexception.aspx)来添加应用程序范围的异常处理程序，正如@Jesse 的评论中所指出的那样

# java - 对象输入流异常

> ID：13778277
> 
> 赞同：0
> 
> 时间：2012-12-08T14:15:54.060
> 
> 标签：java, java-server

> **可能重复：**
> [StreamCorruptedException：无效类型代码：AC](https://stackoverflow.com/questions/2393179/streamcorruptedexception-invalid-type-code-ac)

大家好，我正在尝试通过网络从流中读取对象...我正在使用 ReadInputObject 方法...并且我在线程中实现它以接收数据...这是线程中的 while 循环

```
while((dp = (DataPackage) ois.readObject()) != null)
        {

             Ball b = new Ball();
             b.setX(dp.x);
             b.setY(dp.y);
             jTextField1.setText(b.getX() + "    " +b.getY());
             b.paint(ob.getGraphics());
             b.setVisible(true);
             ois.reset();

        }
    } catch (IOException ex) {
        System.out.println("Error 1 is Here");
    } catch (ClassNotFoundException ex) {
        System.out.println("Error 2 is here");
    } 
```

问题是 ois 获取了第一个对象，然后....它进入异常并打印出这个错误 1 ​​is here

这是我发送对象的代码

```
DataPackage dp = new DataPackage();
    dp.x=b1.getX();
    dp.y=b1.getY();
    dp.t=b1.getT();
    dp.dx=(int)b1.getDx();
    dp.dy=(int)b1.getDy();

    ObjectOutputStream oos = null;
    try {
        oos = new ObjectOutputStream(Server_login.client.getOutputStream());
    } catch (IOException ex) {
        Logger.getLogger(Game_Painters_right.class.getName()).log(Level.SEVERE, null, ex);
    }
    try {
        oos.writeObject(dp);
    } catch (IOException ex) {
        Logger.getLogger(Game_Painters_right.class.getName()).log(Level.SEVERE, null, ex);
    } 
```

我的代码有什么问题？谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T14:23:34.823

好吧，删除对`ois.reset()`. 为什么它首先存在？

# iphone - iOS 应用程序：显示大量小图像时出现延迟问题

> ID：13778282
> 
> 赞同：3
> 
> 时间：2012-12-08T14:16:12.593
> 
> 标签：iphone, ios, image, uiimageview, uiimage

**环境：**

我正在创建一个“[照片马赛克](https://www.google.com/search?num=10&hl=fr&safe=off&authuser=0&site=imghp&tbm=isch&source=hp&biw=1294&bih=738&q=photo+mosaic&oq=photo+mosaic&gs_l=img.3..0l2j0i24l8.1141.1141.0.2483.1.1.0.0.0.0.52.52.1.1.0...0.0...1ac.2.0gxiTdE3WNE)”应用程序，我尝试同时在屏幕上显示 1024（32*32）张小图像（视网膜尺寸->w:30px h:20px）。这意味着总的来说，它与全屏图像大小相同。

**问题：**

我加载了 1024 个 UIImage，创建了 1024 个 UIImageView，并将它们全部添加到 UIView。当我滚动到这个视图时，有一个很大的滞后：在 iPhone4(iOS 5) 和 iPhone5(iOS 6) 上进行测试。它只是出现在iPhone4上，在iPhone5上很好。（假设 iPhone5 有更好的 CPU，所以我认为这是合理的）。

**我的想法：**

假设所有图像已经从内存中的本地目录加载（使用方法“imageNamed”），所以我认为问题一定出在步骤显示/渲染图像的某个地方。

那么有什么想法吗？任何，任何想法都会有所帮助。

非常感谢，

**更新**

在我听取了@Antwan van Houdt 的建议后，情况好多了。下面是原理代码：

```
-(void)updateCoverImageView:(UIImageView *)smallImage{
    UIGraphicsBeginImageContextWithOptions(self.frame.size, NO, 0.0f);
    CGContextRef ctx = UIGraphicsGetCurrentContext();
    [self.coverImageView.layer renderInContext:ctx];
    [smallImage.image drawInRect:smallImage.frame];
    self.coverImageView.image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
} 
```

然后你只需将 smallImage 的 alpha 值设置为零，这样系统就不会渲染它们。封面图片将取代它。这适用于同时显示大量 UIView 导致的滞后问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T14:19:00.973

每个图像都在自己的视图中吗？

在任何一种情况下，对于如此大量的图像，您可能应该考虑在 1 个视图中绘制它们，如果该绘制方法仍然太慢，您可以绘制一次，将视图渲染为图像，然后在缓存时简单地绘制该图像展示。

苹果有几个指南可以处理自定义视图绘图的性能和类似的东西..你应该给他们一读。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T14:26:27.547

不知道代码的全部细节，像这样的任何事情，都应该在后台线程上完成。我会阅读图形上下文、大型中央调度，然后使用这两个概念在另一个线程中创建结果图像，然后获取结果图像并将其显示在主线程中。

事实上，由于您有许多可以并行处理的图像，因此使用 GCD 可以非常快速地完成。

如果您可以发布代码，我可以帮助您优化它。

# android - 使用 SharedPreferences 进行应用程序设置。安卓

> ID：13778287
> 
> 赞同：1
> 
> 时间：2012-12-08T14:16:46.387
> 
> 标签：android, settings, sharedpreferences

我想知道在应用程序设置中使用共享首选项的最佳方式是什么，即更改文本大小和文本颜色。我发现的教程都令人困惑，其中大多数都使用了已弃用的方法。继续 API 17 的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T15:12:15.190

[使用它](http://developer.android.com/reference/android/preference/PreferenceScreen.html)创建一个首选项屏幕，以便您的用户可以更改值。在您的代码中，检查您在此首选项屏幕中使用的键的值并执行您需要执行的任何操作。

顺便说一句，我链接的 Android 文档中的示例显示了硬编码的键字符串文字。执行此操作的最佳实践方法是在 strings.xml 资源文件中创建字符串键，并在您的首选项屏幕 xml 文件和 java 代码中引用该字符串键。

例如，在 strings.xml 中：

```
<string name="wifiEnabled">wifi enabled</string> 
```

在您的偏好屏幕 xml 文件中：

```
<CheckBoxPreference
            android:key="@string/wifiEnabled"
            android:title="WiFi" /> 
```

在您的 java 代码中：

```
String wifiEnabledStringKey = getString(R.string.wifiEnabled);
//this will give you just 'wifi enabled'; you can then use this to retrieve the value of this key from SharedPreferences. 
```

# c - 在不同的迭代中使用 fscanf/fgets 读取文件时随机崩溃

> ID：13778291
> 
> 赞同：0
> 
> 时间：2012-12-08T14:17:07.853
> 
> 标签：c, file, file-io

我正在尝试从具有以下格式的 while questions.txt 中读取：

```
Question\n
Difficulty:Cost:Prize\n
Correct Answer\n
Answer 1\n
.
.
.
Answer i\n
\n 
```

下面是一个从 questions.txt 中读取的函数，并将其存储到一个临时节点以添加到链表中。

```
pQuestionType loadQuestions(pQuestionType pFirst)
{
    pQuestionType pTemp = malloc(sizeof(pQuestionType));
    FILE* pFile;
    string sFilename, sTemp;
    char cDump;
    int nTemp, n=0;
    gotoxy(0,0);
    system("cls");
    printf("Enter file name: ");
    gets(sFilename);
    pFile = fopen(sFilename, "rt");
    while(!feof(pFile))
    {
        printf("Iteration \n");
        fgets(sTemp, 255, pFile);
        strcpy(pTemp->sQuestion, sTemp);
        pTemp->sQuestion[strlen(sTemp)-1] = '\0';
        printf("Add question success\n");

        fscanf(pFile, "%d%c", &nTemp, &cDump);
        pTemp->nDifficulty = nTemp;
        printf("Add difficulty success\n");

        fscanf(pFile, "%d%c", &nTemp, &cDump);
        pTemp->nCost = nTemp;
        printf("Add cost success\n");

        fscanf(pFile, "%d%c", &nTemp, &cDump);
        pTemp->nWinnings = nTemp;
        printf("Add winnings success\n");

        fgets(sTemp, 255, pFile);
        strcpy(pTemp->sCorrect, sTemp);
        pTemp->sCorrect[strlen(sTemp)-1] = '\0';
        strcpy(pTemp->sAnswers[0], sTemp);
        pTemp->sAnswers[0][strlen(sTemp)-1] = '\0';
        printf("Add answer success\n");

        for(n=1; n<10; n++)
        {
            fgets(sTemp, 255, pFile);
            if(*sTemp == '\n')break;
            strcpy(pTemp->sAnswers[n], sTemp);
            pTemp->sAnswers[n][strlen(sTemp)-1] = '\0'; 
        }
        printf("Add choices success\n");

        printf("\n");   
        pFirst = addQuestion(pFirst, pTemp);        
        if(*sTemp == EOF) break;
    }
    fclose(pFile);

    return pFirst;
} 
```

当程序试图读取我的第三个问题的难度时，我在第三次迭代时崩溃了。是什么原因造成的，我可以做些什么来修复我的代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T14:38:39.560

```
pQuestionType pTemp = malloc(sizeof(pQuestionType)); 
```

如果`pQuestionType`是一个*指针*类型（它似乎是因为它们的声明附近既没有`pFirst`也`pTemp`没有`*`字符），那么它的大小将是指针的大小（目前可能是 4 或 8）。

所以这`malloc`几乎肯定不会给你足够的内存。你需要`sizeof(*pTemp)`改用。

# ios - 加载 iAd 时 Adwhirl 崩溃

> ID：13778297
> 
> 赞同：0
> 
> 时间：2012-12-08T14:17:46.743
> 
> 标签：ios, adwhirl

我已经实现了`AdWhirl`显示不同的网络广告，但是当它在我的视图上显示广告并且我点击打开广告时它崩溃并在日志中显示以下内容

> -[AdWhirlAdapterIAd helperNotifyDelegateOfFullScreenModal]：无法识别的选择器发送到实例 0x9fce850 2012-12-08 19:40:27.571 ExerMemosApp[2294:1b203] ***由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[AdWhirlAdapterIAd 帮助程序]NotifyDcre发送到实例 0x9fce850'

我搜索了太多但找不到解决方案。给我建议以消除此错误。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T18:30:21.347

您确定该`AdWhirlAdNetworkAdapter+Helpers.h`文件包含在您的项目中吗？确保`AdWhirl/Internal`在您的构建设置中正确引用了下面的所有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T15:22:28.377

您的文件中没有`helperNotifyDelegateOfFullScreenModal`方法。检查那个，因为名字说，它的委托方法。您可能忘记实现该方法

# android - 如何将网格布局包含到 android 平台 2.2 API 级别 8

> ID：13778299
> 
> 赞同：0
> 
> 时间：2012-12-08T14:17:58.213
> 
> 标签：android, android-layout, android-emulator

我尝试通过右键单击我的项目、android 工具、添加支持库来将 Android 兼容性安装到平台 2.2，然后我收到了这些消息

```
[2012-12-08 06:13:12 - SDK Manager] Fetching https://dl-ssl.google.com/android/repository/addons_list-1.xml
[2012-12-08 06:13:18 - SDK Manager] Validate XML
[2012-12-08 06:13:18 - SDK Manager] Parse XML
[2012-12-08 06:13:18 - SDK Manager] Fetched Add-ons List successfully
[2012-12-08 06:13:18 - SDK Manager] Fetching URL: https://dl-ssl.google.com/android/repository/repository-6.xml
[2012-12-08 06:13:21 - SDK Manager] Validate XML: https://dl-ssl.google.com/android/repository/repository-6.xml
[2012-12-08 06:13:21 - SDK Manager] Parse XML:    https://dl-ssl.google.com/android/repository/repository-6.xml
[2012-12-08 06:13:21 - SDK Manager]     Found Android SDK Platform-tools, revision 12
[2012-12-08 06:13:21 - SDK Manager]     Found Android SDK Tools, revision 20
[2012-12-08 06:13:21 - SDK Manager] Fetching URL: https://dl-ssl.google.com/android/repository/addon.xml
[2012-12-08 06:13:26 - SDK Manager] Validate XML: https://dl-ssl.google.com/android/repository/addon.xml
[2012-12-08 06:13:26 - SDK Manager] Fetching URL: http://software.intel.com/sites/landingpage/android/addon.xml
[2012-12-08 06:13:28 - SDK Manager] Validate XML: http://software.intel.com/sites/landingpage/android/addon.xml
[2012-12-08 06:13:28 - SDK Manager] Done loading packages. 
```

然后我尝试在我的 XML 布局上创建新的 Gridlayout，但 eclipse eclipse 无法识别此布局。

1.  是否安装了gridlayout？
2.  如果是的话我怎么用它
3.  如果我可以使用它，我什么时候会在我的手机上安装 apk（2.2）我是否也在我的手机上安装了这个库？它是用 apk 移动的吗？

# 编辑

这是我打开 SDK 管理器时得到的，我来自叙利亚，是不是因为谷歌禁止其产品进入叙利亚？ ![在此处输入图像描述](../Images/4a584300b53559acd5af4ad32d9b6885.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T14:36:41.103

![在此处输入图像描述](../Images/ae0c5b197f03bc854a44b9dfe763954a.png)GridLayout 已向后移植以与 API 级别 7 及更高级别兼容。它是（某种）支持库的一部分。下载支持库后，您将在本地 sdk 文件夹中找到一个 Android 库项目，该文件夹位于：

```
<sdk_folder>\extras\android\compatibility\v7\gridlayout 
```

将其设置为您正在处理的项目的依赖项。之后，您需要确保将整个项目中的所有引用都指向该版本，而不是 15 级版本，以支持 ICS 之前的设备。用法应该是相似的，如果不完全相同的话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T14:36:57.107

在我看来，您没有收到安装兼容性库的提示。我刚刚在 Eclipse 中进行了测试运行并安装了兼容性库，我得到一个交互式对话框，说明它找到了 Android 支持库并让我完成了安装过程。这是我下载支持库时控制台上的输出。

```
[2012-12-08 06:25:13 - SDK Manager] Done loading packages.
[2012-12-08 06:25:18 - SDK Manager] Preparing to install archives
[2012-12-08 06:25:18 - SDK Manager] Downloading Android Support Library, revision 11
[2012-12-08 06:25:22 - SDK Manager] Installing Android Support Library, revision 11
[2012-12-08 06:25:26 - SDK Manager]   Installed Android Support Library, revision 11
[2012-12-08 06:25:26 - SDK Manager] Done. 1 package installed 
```

也许您可以尝试的一件事是使用 SDK 管理器在 Extras 文件夹下安装 Android 支持库，然后在安装后，您将转到项目 -> 属性 -> Java 构建路径。单击库，然后单击“添加外部 JAR”。从那里您将被要求包含一个 JAR 文件，支持库将位于您的 SDK 安装路径/Extras/Android/Support/v## 下，其中哈希标记指示您已安装的 Android 支持库的版本。在那里会有一个 android-support-v##.jar 文件，这就是您要导入到项目中的文件。

希望这会有所帮助。

# java - 使用 JSP 代码动态更改 DIV 标记内容

> ID：13778300
> 
> 赞同：0
> 
> 时间：2012-12-08T14:18:01.677
> 
> 标签：java, javascript, html, jsp, servlets

我将描述这件事是如何工作的，然后是我希望实现的目标：

我有一个基本的 HTML 页面，它有一个文本框和一个**发送**按钮。当我键入一些字符串并单击按钮时，此请求会到达 Servlet。servlet 执行某些操作，然后将 req&resp 重定向到 jsp 文件 ( `getServletContext().getRequestDispatcher("myJSP.jsp").forward(req, resp);`)

因此，基本上，当有人在文本框中键入内容并单击“**发送**”按钮时，他会得到一个由***myJSP.jsp***文件生成的新页面。

有什么方法可以代替获得一个完整的新文件，我希望***myJSP.jsp***生成的结果显示在同一个主页中，比如说在文本框下（在 DIV 标记中？）。

我怎样才能实现这种行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T14:28:30.633

您必须使用 javascript 执行异步请求，以便页面不会为用户重新加载。服务器必须返回一个响应，然后您可以使用 javascript 附加到页面。

这种技术称为[ajax](http://en.wikipedia.org/wiki/Ajax_%28programming%29)。用于执行 ajax 请求的流行工具（除了大量其他方式）是`ajax()` JQuery javascript 库（[文档](http://api.jquery.com/jQuery.ajax/)）的功能

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T14:54:07.633

尝试做 jquery $.ajax() 函数，首先下载 jquery.js 并将其保存到您的项目文件夹并找到它。如下：

```
<head>
 <script src="../resources/jquery.js"></script> <script src="../resources/jquery.js"></script>
</head>

<body>
   <input type="text"><input class="button" type="button" value="Click">
<div></div>
<script>
    $(".button").click(function () {
        $.ajax({
              url: "ajax.html",
              cache: false
            }).done(function( html ) {
              $("div").append(html);
            });
        });
</script>
</body> 
```

# ios - iOS：通过蓝牙发送 NSData，不要让 Apple 拒绝它

> ID：13778304
> 
> 赞同：-3
> 
> 时间：2012-12-08T14:18:32.143
> 
> 标签：ios, bluetooth, nsdata, core-bluetooth

有没有办法通过蓝牙发送 NSData 而不会被 Apple 拒绝，因为它是用 GameKit API 或其他东西制作的？如果是，如何？我看到了 CoreBluetooth，但是可以通过 CoreBluetooth 发送 NSData 吗？如果是，如何？我知道，很多问题，我希望你们知道答案。;)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T09:46:08.023

是的，CoreBluetooth 可以。

请参阅最新的示例代码 - [BTLE Central Peripheral Transfer](https://developer.apple.com/library/ios/#samplecode/BTLE_Transfer/Introduction/Intro.html#//apple_ref/doc/uid/DTS40012927)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T14:36:03.867

我只是误解了博客中的帖子！我当然可以使用 GameKit 来做到这一点，对于这个愚蠢的问题，我感到非常抱歉！

# domain-driven-design - DDD - 存储库可以通过标识符以外的方式获取聚合吗？

> ID：13778312
> 
> 赞同：0
> 
> 时间：2012-12-08T14:19:57.230
> 
> 标签：domain-driven-design, ddd-repositories

我将用户建模为聚合根，用户由标识符值对象和电子邮件值对象组成。两个值对象都可以唯一地标识一个用户，但是允许更改电子邮件而不能更改标识符。

在我见过的大多数 DDD 示例中，聚合根的存储库仅按标识符获取。添加另一种通过电子邮件获取到存储库的方法是否正确？我建模这么差吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T21:36:23.537

我会说是的，存储库具有通过身份以外的其他方式检索聚合的方法是合适的。但是，有一些微妙之处需要注意。

许多存储库示例仅通过 ID 检索的原因是基于这样的观察，即存储库与聚合结构相结合并不能满足所有查询要求。例如，如果您有一个查询，它调用聚合中的某些字段以及引用聚合和一些汇总数据的某些字段，则相应的聚合类不能用于表示此数据。相反，需要一个专用的[读取模型](http://gorodinski.com/blog/2012/04/25/read-models-as-a-tactical-pattern-in-domain-driven-design-ddd/)。因此，查询职责与存储库分离。这有几个优点（查询可以由专门的非规范化存储提供），它是[CQRS的主要范例](http://martinfowler.com/bliki/CQRS.html). 在这种类型的架构中，域类仅在需要执行某些行为时才由存储库检索。所有只读用例都由读取模型提供服务。

我认为存储库具有 GetByEmail 方法的原因是基于 YAGNI 和与复杂性作斗争。您可以让您的应用程序随着需求的变化和增长而发展。您无需立即跳转到 CQRS 和单独的读/写存储。您可以从一个恰好也有查询方法的存储库开始。唯一要记住的是，当您需要在这些实体上调用某些行为时，您应该尝试按 ID 检索实体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T13:30:32.003

> 在我见过的大多数 DDD 示例中，聚合根的存储库仅按标识符获取。

我很想知道你看过哪些例子。根据 DDD[定义](http://domaindrivendesign.org/resources/ddd_terms)，存储库是

> 一种封装存储、**检索**和**搜索**行为的机制，它模拟对象的集合。

搜索显然包括通过各种标准获取一个根或一组根，而不仅仅是它们的 ID。

存储库是 、 等的`GetCustomerByEmail()`理想`GetCustomersOver18()`场所`GetCustomersByCountry(...)`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T22:42:38.927

*添加另一种通过电子邮件获取到存储库的方法是否正确？*- 我不会那样做。在我看来，存储库应该只有通过 id 获取、保存和删除的方法。

我宁愿问为什么您在要获取用户并在其上调用域方法的命令处理程序中没有用户 ID。我不知道你到底在做什么，但是对于登录/注册场景，我会做以下事情。当用户登录时，他传递了一个电子邮件地址和一个密码，然后您进行查询以验证用户身份 - 这不会使用域或存储库（仅用于命令），但会使用一些查询实现，该实现会返回一些UserDto 将包含用户 ID，从这一点开始，您就有了用户 ID。下一个场景是注册。创建新用户的命令处理程序将创建一个新用户实体，然后用户需要登录。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-08T14:26:05.147

我会将此功能放入特定于您的用户对象的服务/业务层中。并非每个对象都会有一个电子邮件标识符。这似乎更像是业务逻辑，而不是存储库的责任。我相信您已经知道这一点，但是[这里](https://stackoverflow.com/questions/5049363/difference-between-repository-and-service-layer)很好地解释了我在说什么。

我不建议这样做，但是您可以为公开`a GetByEmail(string emailAddress)`方法的用户提供存储库的特定实现，但我仍然喜欢服务理念。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-09T06:33:39.743

我同意 eulerfx 的回答：

> 你需要问自己为什么需要使用 ID 以外的东西来获取 AR。

我认为很明显，您*没有*ID，但您*确实*有一些其他唯一标识符，例如电子邮件地址。

如果您使用 CQRS，您需要首先确定数据对域重要还是仅对查询存储重要。如果您要求数据 100% 一致，那么它会稍微改变一些东西。例如，如果要检查电子邮件地址是否存在以满足唯一性约束，则需要 100% 的一致性。如果查询的数据在任何时候都是陈旧的，您可能会遇到问题。

请记住，存储库代表各种类型的集合。因此，如果您不需要在 AR（命令端）上实际操作，但您已经决定在哪里使用您的域是合适的，那么您可以随时`ContainsEMailAddress`在存储库上进行操作；否则，您的域数据存储也可以有一个查询端，因为您的域数据存储（OLTP 类型存储）是 100% 一致的，而您的查询存储（OLAP 类型存储）可能只是最终一致，这在 CQRS 中是典型的，具有单独的查询商店。

# symfony - 使用作为服务公开的验证器的自定义验证约束

> ID：13778317
> 
> 赞同：1
> 
> 时间：2012-12-08T14:20:48.963
> 
> 标签：symfony

我有一个作为服务公开的自定义验证器（因为它需要其他服务作为依赖项）。我是这样定义的：

```
<?xml version="1.0" encoding="UTF-8" ?>

<container xmlns="http://symfony.com/schema/dic/services"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="http://symfony.com/schema/dic/services http://symfony.com/schema/dic/services/services-1.0.xsd">

   <services>
      <service id="validator.unique.available_email_validator" 
               class="Nourdine\BasicBundle\Validator\Constraints\AvailableEmailValidator">
         <argument type="service" id="signup_manager" />
         <tag name="validator.constraint_validator" alias="available_email_validator" />
      </service>   
   </services>

</container> 
```

麻烦的是整个事情都不起作用，错误是：

```
Class 'available_email_validator' not found in /home/nourdine/development/symf-app/vendor/symfony/symfony/src/Symfony/Bundle/FrameworkBundle/Validator/ConstraintValidatorFactory.php on line 67 
```

事实上，验证器在执行以下操作时不会出现在可用服务中：

```
console container:debug 
```

所以我怀疑问题在于服务没有正确暴露。解决这个问题，我就解决了验证过程崩溃的问题。

任何人？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T14:29:25.833

正如[文档](http://symfony.com/doc/current/cookbook/validation/custom_constraint.html#constraint-validators-with-dependencies)中所说：

```
As mentioned above, Symfony2 will automatically look for a class named after the constraint, with Validator appended. If your constraint validator is defined as a service, it's important that you override the validatedBy() method to return the alias used when defining your service, otherwise Symfony2 won't use the constraint validator service, and will instantiate the class instead, without any dependencies injected. 
```

如果找不到您的类，您可能忘记通过别名（在您的验证器类中）重命名validateBy() 方法返回的字符串：

```
public function validatedBy()
{
    return 'available_email_validator';
} 
```

# python - 在 Arch Linux (ARM) 上安装 python2 pandas 模块

> ID：13778319
> 
> 赞同：4
> 
> 时间：2012-12-08T14:21:07.497
> 
> 标签：python, python-2.7, pip, archlinux

是否有可能让 python (2.7) pandas 模块和使用 ARM 的 Arch Linux 工作？

我试过了：

```
pip2 install pandas 
```

但没有运气..

我尝试下载[AUR tar 球](https://aur.archlinux.org/packages/python2-pandas/?ID=46552&comments=all)

但它抱怨ARM

顺便说一句：我不是 Linux 专家……

## 更新

我终于有时间（圣诞节是一个非常忙碌的时间）记录安装消息： ![第一部分](../Images/d9f16251ce3bfd41b89240c132d212b2.png) ![第二部分](../Images/30548ee55857a69ea4a3aeba20f9f911.png) 然后它就停在这里..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T04:25:53.517

`numpy`似乎在 ARM 上不可用。请参阅[包搜索](https://www.archlinux.org/packages/?q=python2-numpy)。

另外，我认为[AUR 助手](https://wiki.archlinux.org/index.php/AUR_Helpers)可以帮助您找到构建和安装 AUR 包所需的缺失依赖项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T23:25:38.150

我没有要测试的 ARM 设备（但我正在运行 Arch Linux）。

根据我的调查...

`pandas`需要`numpy`. 基于[这个问题请求](https://github.com/numpy/numpy/issues/2290#issuecomment-9623172)，我怀疑它`numpy`本身适用于 ARM 处理器；当然，前提是您拥有安装软件包的工具（例如 gcc）。

但是，我怀疑它`pandas`尚未开发用于 ARM 架构（鉴于我在 x86-64 架构上安装它没有问题）。

# java - 查找Java中多个整数HashSet中没有重复的所有元素

> ID：13778320
> 
> 赞同：5
> 
> 时间：2012-12-08T14:21:10.547
> 
> 标签：java, set

`HashSet`在多个`Integers`我想获得所有这些元素，它们没有重复。即在所有的联合中只出现过一次`HashSet`。我无法以编程方式对其进行概念化。

例如，假设第一个集合包含 {2,4,6,8,9}，第二个集合包含 {2,8,9}，第三个集合包含 {2,4,8,9}。在所有这些集合中，元素 6 仅出现一次。

如何在Java的多个整数HashSet中找到所有不重复的元素？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T14:33:14.137

您可以保存至少出现一次和至少两次的元素集。这有点手动循环，但它是可能的。这将适用于任意数量的差异集，并且不会修改输入：

```
public static Set<E> unique(Set<? extends E>... sets){
   Set<E> once = new HashSet<E>();
   Set<E> twice = new HashSet<E>();

   for(Set<? extends E> set:sets){
      for(E el:set){
         if(once.contains(el)){
            twice.add(el);
         } else {
            once.add(el);
         }
      }
   }

   once.removeAll(twice);
   return once;
} 
```

ideone：http: [//ideone.com/reGDBy](http://ideone.com/reGDBy)

示例用法：

```
Set<Integer> set1, set2, set3;
...
Set<Integer> u = unique(set1, set2, set3); 
```

评估示例：

> 例如，假设第一个集合包含 {2,4,6,8,9}，第二个集合包含 {2,8,9}，第三个集合包含 {2,4,8,9}。在所有这些集合中，元素 6 仅出现一次。

*   第一个内循环完成后，`once`包含 {2,4,6,8,9} 并且`twice`为空。
*   添加第二个集合：2、8 和 9 已经在`once`集合中，因此它们被添加到`twice`集合中。
*   `once`现在是 {2,4,6,8,9}，`twice`现在是 {2,8,9}。
*   从第三组开始： 2 被重新添加到`twice`， 4 被添加到`twice`， 8 ， 9 被重新添加到`twice`。
*   `once`现在是 {2,4,6,8,9}（所有集合的并集），`twice`现在是 {2,4,8,9}（至少出现两次的元素）。
*   从. `twice`_ 现在是 {6}。返回。`once``once``once`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T14:36:30.740

您可以使用该`contains()`方法来做到这一点。首先，从所有其他集合中创建一个新的 HashSet。然后遍历这个集合并检查是否有其他集合`contains()`指定的元素。如果两个或更多列表包含它，那么您有一个重复的并且可以`continue`。例如，如果只有一个集合包含该元素，您可以将其存储在不同结​​果集中的某个位置。

我写了一个实用方法来实现你所需要的：

```
public static <E> HashSet<E> uniques(HashSet<E>... sets){
    HashSet<E> everything = new HashSet<E>();
    for(HashSet<E> set : sets){
        everything.addAll(set);
    }
    HashSet<E> uniques = new HashSet<E>();
    for(E e : everything){
        int count = 0;
        for(HashSet<E> set : sets){
            if(set.contains(e)){
                count++;
            }
            if(count > 1){
                break;
            }
        }
        if(count == 1){
            uniques.add(e);
        }

    }
    return uniques;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T16:28:11.240

使用中间[Multiset](http://docs.guava-libraries.googlecode.com/git/javadoc/index.html)的[番石榴](https://code.google.com/p/guava-libraries/)版本：

```
@SafeVarargs
public static <E> Set<E> uniqueElements(Set<? extends E>... sets) {
    final Multiset<E> multiset = HashMultiset.create();
    for (Set<? extends E> set : sets) {
        multiset.addAll(set);
    }
    return Sets.filter(multiset.elementSet(), new Predicate<E>() {
        @Override
        public boolean apply(E element) {
            return multiset.count(element) == 1;
        }
    });
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-08T14:33:54.767

创建一个多重集并遍历它，取出计数为 1 的所有元素 `O(n)`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-08T14:34:01.127

```
 public static void main(String[] args) {
        HashSet<Integer> set1 = new HashSet<Integer>();

        set1.add(2);
        set1.add(4);
        set1.add(6);
        set1.add(8);
        set1.add(9);
        HashSet<Integer> set2 = new HashSet<Integer>();
        set2.add(2);
        set2.add(8);
        set2.add(9);
        HashSet<Integer> set3 = new HashSet<Integer>();
        set3.add(2);
        set3.add(4);
        set3.add(8);
        set3.add(9);
        set1.removeAll(set2);
        set1.removeAll(set3);
        System.out.println(set1);
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-08T14:35:23.460

如何创建 2 个新的 Hashset。称为 seenOnce 和 seenMoreThenOnce。

然后迭代不同哈希图中的所有整数。

```
For each integer:
   If it is in seenMoreThenOnce do nothing.
   else If it is in seenOnce, remove it from seenOnce and add it to seenMoreThenOnce
   Else add it to seenOnce. 
```

当您完成对所有哈希图的迭代时，seenOnce 将包含只看到一次的整数。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-09-15T16:21:00.577

```
public class test {

public static void main(String[] args) throws Exception, IOException {

    int count=0;
    HashSet<Integer> set1 = new HashSet<Integer>();
    HashMap<Integer, String> ee=new HashMap<Integer,String>();
    BufferedReader br=new BufferedReader(new InputStreamReader(System.in));
    System.out.println("how many elements u want to store");
    int n=Integer.parseInt(br.readLine());
    System.out.println("enter te element u want insert");
    for(int i=0;i<n;i++)
    {
        boolean x=set1.add(Integer.parseInt(br.readLine()));
        if(x==false)
        {
            count++;
        }
    }
    System.out.println("no of duplicate elements is   "+count);
    }
} 
```

# vim - vimscript 代码创建一个新的编号文件

> ID：13778322
> 
> 赞同：2
> 
> 时间：2012-12-08T14:21:13.057
> 
> 标签：vim

我在乳胶文件中写了很多数学和物理问题，这些文件的文件名编号为`albn002.tex`.

通常，我需要根据我已经在编辑的文件创建一个新文件。为此，我必须将文件以新名称保存在同一目录中，下一个编号不存在文件。

理想的是一个程序“saveToNewNumberedFile”，这样我就可以将它分配给“，stn”之类的东西

这可以直接在vimscript中编程吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T15:22:33.033

看看我的[EditSimilar 插件](http://www.vim.org/scripts/script.php?script_id=2544)。**编辑**：在其最新版本 2.30 中，该`:999SavePlus`命令（具有大量计数）将搜索该偏移范围内的最后一个现有文件，然后以大于该偏移量的偏移量保存当前文件。

# ruby-on-rails - Rails - 传递对象的 id

> ID：13778327
> 
> 赞同：1
> 
> 时间：2012-12-08T14:21:44.760
> 
> 标签：ruby-on-rails, ruby-on-rails-3, post, web, get

我正在使用 ruby​​ on rails 创建一个留言板站点。
我生成了两个脚手架：`Topic`和`Forum`. `Topic`属于_to `Forum`。

当用户创建一个新主题时，我应该传递 forum_id（一个 GET 变量）。类似于：
[http ://example.com:3000/topics/new/1](http://example.com:3000/topics/new/1)

然后，当用户提交表单时，他将 forum_id 与 POST 请求一起传回（通过隐藏的 html 字段？）。

什么是正确的做法？
谢谢

路线：

```
 resources :forums

  get "admin/index"

  resources :posts

  resources :topics

  resources :users

  match '/signup', :to => 'users#new'

  get   '/login', :to => 'sessions#new', :as => :login
  match '/auth/:provider/callback', :to => 'sessions#create'
  match '/auth/failure', :to => 'sessions#failure'

  match '/topics/new/:id', :to => 'topics#new' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T14:35:43.720

一个很好的方法是将`topics`资源嵌套在`forums`资源中，如下所示：

```
resources :forums do
  resources :topics
end 
```

然后在你的 TopicsController

```
class TopicsController < ApplicationController
  def new
    @forum = Forum.find params[:forum_id]
    @topic = Topic.new
  end

  def create
    @forum = Forum.find params[:forum_id] # See the redundancy? Consider using before_filters
    @topic = @forum.topics.build params[:topic]

    if @topic.save
      redirect_to @topic
    else
      render action: :new
    end
  end
end 
```

最后在您的意见/主题/_form.html.erb 中：

```
<%= form_for [@forum, @topic] do |f| %>
  # Your fields
<% end %> 
```

# javascript - 如何禁用 contenteditable div 中的元素？

> ID：13778329
> 
> 赞同：6
> 
> 时间：2012-12-08T14:21:55.550
> 
> 标签：javascript, jquery, css, html

伙计，我有一个属性`contentEditable`为 true 的 div！

我这样做是因为我希望它像一个文本区域一样根据其文本改变其高度！完美运行

**但是**，当我复制超链接并将其粘贴到我的 div 中而不是纯文本时，它具有锚元素......如果我选择任何网站的某些部分并将其粘贴到该 contenteditable div 中，它会显示所有 HTML。我希望该 div 仅显示纯文本并禁用其中的所有元素！

工作小提琴：http: [//jsfiddle.net/4ctVx/](http://jsfiddle.net/4ctVx/)

只需复制其中的任何 HTML，它还会显示带有该 HTML 的 youdiv。我希望它被禁用并且 div 只显示纯文本！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T16:48:49.433

如果给可编辑内容 div 添加事件监听器，则可以使用 jQuery 将 RichText 替换为 PlainText。[我在这里从balupton 获取](https://stackoverflow.com/users/130638/balupton)了事件侦听器：[https](https://stackoverflow.com/a/6263537/1887483) ://stackoverflow.com/a/6263537/1887483 。

```
$('[contenteditable]').live('focus', function() {
    var $this = $(this);
    $this.data('before', $this.html());
    return $this;
}).live('blur keyup paste', function() {
    var $this = $(this);
    if ($this.data('before') !== $this.html()) {
        $this.data('before', $this.html());
        $this.trigger('change');
    }
    return $this;
});
//use this jQuery snippet to swap HTML for Text.
$('.editableContent').live('change', function() {
    $(this).html($(this).text());
    alert('changed');
});​ 
```

# python - 绕过烧瓶中的“资源只能打开阅读”

> ID：13778330
> 
> 赞同：2
> 
> 时间：2012-12-08T14:22:00.853
> 
> 标签：python, flask

使用会在烧瓶中`app.open_resource('foobar.txt', 'w')`生成错误。`Resources can only be opened for reading`

有没有办法打开一个资源来写入它？

如果没有，您能否使用烧瓶获取资源的路径，然后我可以手动打开它并写入它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T06:48:46.313

这应该有效：

```
import os
f = open(os.path.join(app.root_path, 'foobar.txt'), 'w') 
```

这更方便：

```
import os
with open(os.path.join(app.root_path, 'foobar.txt'), 'w') as f:
    ... 
```

# php - 在我的动态 php 网站中按下链接时，如何使我的 jquery 插件不重新启动？

> ID：13778335
> 
> 赞同：0
> 
> 时间：2012-12-08T14:22:24.520
> 
> 标签：php, javascript, jquery

我有一个经典的 php 控制器，它从 url 获取页面名称，并在我的幻灯片所在的标题部分下显示该页面。每次按下链接时，幻灯片都会再次从第一张照片重新启动，或者在滑动和图像时被终止。我知道其原因是每次将链接提供给浏览器时，所有页面都会再次处理。我知道使用 Ajax 解决问题的几种方法，但唯一的问题是 url 不会改变，因为它将是异步的。我想保留我的 url，以便我的访问者能够共享他们想要的链接。一个示例站点位于[http://sounds.beatport.com](http://sounds.beatport.com)，您可以在其中按下一个样本进行播放，它会将其加载到顶部，然后您可以通过样式下拉菜单更改链接进行浏览，但样本仍在播放。

所以我想要实现的是让我的幻灯片插件有一个 div 继续在我的网站顶部播放，而无需在访问者浏览网站时重新启动；

# amazon-ec2 - Rails 和 Amazon RDS：“未配置生产数据库”

> ID：13778337
> 
> 赞同：0
> 
> 时间：2012-12-08T14:22:26.710
> 
> 标签：amazon-ec2, amazon-rds, amazon-elastic-beanstalk

我对 AWS 的所有东西都是全新的，并试图在 Beanstalk 上启动我的 Rails 应用程序。我正在关注[最近的教程](http://ruby.awsblog.com/post/Tx2AK2MFX0QHRIO/Deploying-Ruby-Applications-to-AWS-Elastic-Beanstalk-with-Git)，但我无法将我的应用程序连接到 RDS。乘客屏幕出现错误：

```
production database is not configured (ActiveRecord::AdapterNotSpecified) 
```

我的`database.yml`样子：

```
production:
  adapter: mysql2
  encoding: utf8
  database: <%= ENV['RDS_DB_NAME'] %>
  username: <%= ENV['RDS_USERNAME'] %>
  password: <%= ENV['RDS_PASSWORD'] %>
  host: <%= ENV['RDS_HOSTNAME'] %>
  port: <%= ENV['RDS_PORT'] %> 
```

我确实配置并运行了一个 RDS 实例。我还通过 ssh 进入 EC2 实例，并验证我可以通过 RDS_USERNAME、RDS_HOSTNAME 等成功连接到 RDS。

考虑到也许我需要在 MySQL 中手动创建我的数据库，我使用 MySQL 客户端来执行此操作，但我仍然遇到同样的错误。

所以再次在 EC2 实例上，我手动检查了我的项目并运行`bundle exec rake db:migrate --trace`以更完整地了解它失败的位置：

```
** Invoke db:migrate (first_time)
** Invoke environment (first_time)
** Execute environment
** Invoke db:load_config (first_time)
** Execute db:load_config
rake aborted!
production database is not configured
/usr/share/ruby/1.9/gems/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_specification.rb:39:in `resolve_string_connection'
/usr/share/ruby/1.9/gems/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_specification.rb:25:in `spec'
/usr/share/ruby/1.9/gems/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_specification.rb:129:in `establish_connection'
/usr/share/ruby/1.9/gems/1.9.1/gems/activerecord-3.2.8/lib/active_record/railtie.rb:82:in `block (2 levels) in <class:Railtie>'
/usr/share/ruby/1.9/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/lazy_load_hooks.rb:36:in `instance_eval'
/usr/share/ruby/1.9/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/lazy_load_hooks.rb:36:in `execute_hook'
/usr/share/ruby/1.9/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/lazy_load_hooks.rb:43:in `block in run_load_hooks'
/usr/share/ruby/1.9/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/lazy_load_hooks.rb:42:in `each'
/usr/share/ruby/1.9/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/lazy_load_hooks.rb:42:in `run_load_hooks'
/usr/share/ruby/1.9/gems/1.9.1/gems/activerecord-3.2.8/lib/active_record/base.rb:721:in `<top (required)>'
/usr/share/ruby/1.9/gems/1.9.1/gems/activerecord-3.2.8/lib/active_record/railties/databases.rake:6:in `block (2 levels) in <top (required)>'
/usr/share/ruby/1.9/gems/1.9.1/gems/rake-10.0.2/lib/rake/task.rb:227:in `call'
/usr/share/ruby/1.9/gems/1.9.1/gems/rake-10.0.2/lib/rake/task.rb:227:in `block in execute'
/usr/share/ruby/1.9/gems/1.9.1/gems/rake-10.0.2/lib/rake/task.rb:222:in `each'
/usr/share/ruby/1.9/gems/1.9.1/gems/rake-10.0.2/lib/rake/task.rb:222:in `execute'
/usr/share/ruby/1.9/gems/1.9.1/gems/rake-10.0.2/lib/rake/task.rb:166:in `block in invoke_with_call_chain'
/usr/share/ruby/1.9/monitor.rb:211:in `mon_synchronize'
/usr/share/ruby/1.9/gems/1.9.1/gems/rake-10.0.2/lib/rake/task.rb:159:in `invoke_with_call_chain'
/usr/share/ruby/1.9/gems/1.9.1/gems/rake-10.0.2/lib/rake/task.rb:187:in `block in invoke_prerequisites'
/usr/share/ruby/1.9/gems/1.9.1/gems/rake-10.0.2/lib/rake/task.rb:185:in `each'
/usr/share/ruby/1.9/gems/1.9.1/gems/rake-10.0.2/lib/rake/task.rb:185:in `invoke_prerequisites'
/usr/share/ruby/1.9/gems/1.9.1/gems/rake-10.0.2/lib/rake/task.rb:165:in `block in invoke_with_call_chain'
/usr/share/ruby/1.9/monitor.rb:211:in `mon_synchronize'
/usr/share/ruby/1.9/gems/1.9.1/gems/rake-10.0.2/lib/rake/task.rb:159:in `invoke_with_call_chain'
/usr/share/ruby/1.9/gems/1.9.1/gems/rake-10.0.2/lib/rake/task.rb:152:in `invoke'
/usr/share/ruby/1.9/gems/1.9.1/gems/rake-10.0.2/lib/rake/application.rb:141:in `invoke_task'
/usr/share/ruby/1.9/gems/1.9.1/gems/rake-10.0.2/lib/rake/application.rb:99:in `block (2 levels) in top_level'
/usr/share/ruby/1.9/gems/1.9.1/gems/rake-10.0.2/lib/rake/application.rb:99:in `each'
/usr/share/ruby/1.9/gems/1.9.1/gems/rake-10.0.2/lib/rake/application.rb:99:in `block in top_level'
/usr/share/ruby/1.9/gems/1.9.1/gems/rake-10.0.2/lib/rake/application.rb:108:in `run_with_threads'
/usr/share/ruby/1.9/gems/1.9.1/gems/rake-10.0.2/lib/rake/application.rb:93:in `top_level'
/usr/share/ruby/1.9/gems/1.9.1/gems/rake-10.0.2/lib/rake/application.rb:71:in `block in run'
/usr/share/ruby/1.9/gems/1.9.1/gems/rake-10.0.2/lib/rake/application.rb:158:in `standard_exception_handling'
/usr/share/ruby/1.9/gems/1.9.1/gems/rake-10.0.2/lib/rake/application.rb:68:in `run'
/usr/share/ruby/1.9/gems/1.9.1/gems/rake-10.0.2/bin/rake:37:in `<top (required)>'
/usr/bin/rake:23:in `load'
/usr/bin/rake:23:in `<main>'
Tasks: TOP => db:migrate => db:load_config 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T13:48:48.487

是用户错误：链接文章中的复制/粘贴导致“空格”显然是一些 unicode 杂乱无章而不是 ASCII 32。

经验教训：用于`od -c your_file.yml`诊断潜在的有趣字符。

# mysql - 如何在 MySQL 查询中定义时间戳值？

> ID：13778340
> 
> 赞同：0
> 
> 时间：2012-12-08T14:22:47.180
> 
> 标签：mysql, null, timestamp

我有一个`timestamp`类型的列。我想获得适用于特定条件的最新时间并增加 1 分钟。如果条件导致零记录，我得到`NULL`. 为了正确操作它，我需要将其`NULL`视为默认/最小/零时间戳。而且我不确定如何在 SQL 查询中做到这一点（而不是在字段定义中）。我试过这个：

```
SELECT COALESCE((SELECT MAX(`time`) FROM `table` WHERE false), 0) + INTERVAL 1 MINUTE
SELECT COALESCE((SELECT MAX(`time`) FROM `table` WHERE false), TIMESTAMP('0000-00-00 00:00:00')) + INTERVAL 1 MINUTE
SELECT COALESCE((SELECT MAX(`time`) FROM `table` WHERE false), TIMESTAMP('1970-01-01 00:00:00')) + INTERVAL 1 MINUTE 
```

全部返回`NULL`。使用`TIMESTAMPADD`and UNIX_TIMESTAMP 也没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T14:35:36.567

据我记得添加时间戳和日期总是产生 null ，甚至`SELECT UNIX_TIMESTAMP() + interval 1 minute`返回`NULL`。我想您需要做的就是更改`+INTERVAL 1 MINUTE`为`+60`（秒）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T14:37:55.453

> `time`从`table`哪里选择 MAX( ) 错误

对我来说，这似乎是一个糟糕的陈述，因为“WHERE false”永远不会返回任何东西（即为 NULL）......您是否缺少像“WHERE column=false”这样的列？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T14:41:52.983

你应该尝试这样的事情：

```
SELECT [whatever] FROM [wherever] WHERE EXISTS([the timestamp query]) 
```

看这里：[http ://dev.mysql.com/doc/refman/5.0/en/exists-and-not-exists-subqueries.html](http://dev.mysql.com/doc/refman/5.0/en/exists-and-not-exists-subqueries.html)

# ibatis - 关联查询问题

> ID：13778347
> 
> 赞同：0
> 
> 时间：2012-12-08T14:23:34.260
> 
> 标签：ibatis, mybatis

我正在使用 mybatis ，遇到关联查询问题，请先看一下表结构。

```
DROP TABLE IF EXISTS `comp_items_spec`;

CREATE TABLE `comp_items_spec` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `comp_id` int(11) NOT NULL,
  `content_type_id` int(11) NOT NULL,
  `in_list_flag` char(1) DEFAULT NULL,
  `label` varchar(200) DEFAULT NULL,
  `static_flag` char(1) DEFAULT NULL,
  `ext1_name` varchar(200) DEFAULT NULL,
  `ext1_value` text,
  `ext2_name` varchar(200) DEFAULT NULL,
  `ext2_value` text,
  `ext3_name` varchar(200) DEFAULT NULL,
  `ext3_value` text,
  `ext4_name` varchar(200) DEFAULT NULL,
  `ext4_value` text,
  `ext5_name` varchar(200) DEFAULT NULL,
  `ext5_value` text,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=47 DEFAULT CHARSET=latin1;

/*Data for the table `comp_items_spec` */

insert  into `comp_items_spec`(`id`,`comp_id`,`content_type_id`,`in_list_flag`,`label`,`static_flag`,`ext1_name`,`ext1_value`,`ext2_name`,`ext2_value`,`ext3_name`,`ext3_value`,`ext4_name`,`ext4_value`,`ext5_name`,`ext5_value`) values (43,22,1,'\0','description','Y','description','description1......',NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL),(44,22,3,'\0','static image','Y',NULL,'http://img3.cache.netease.com/cnews/2012/12/6/20121206092637ba11c.jpg',NULL,'501',NULL,'425',NULL,NULL,NULL,NULL);

/*Table structure for table `components_spec` */

DROP TABLE IF EXISTS `components_spec`;

CREATE TABLE `components_spec` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(200) DEFAULT NULL,
  `show_latest_num` int(11) DEFAULT NULL,
  `more_link_url` varchar(200) DEFAULT NULL,
  `more_link_flag` char(1) DEFAULT NULL,
  `open_in_new_flag` char(1) DEFAULT NULL,
  `create_date` datetime DEFAULT NULL,
  `update_date` datetime DEFAULT NULL,
  `creator_sso` varchar(20) DEFAULT NULL,
  `updator_sso` varchar(20) DEFAULT NULL,
  KEY `id` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=23 DEFAULT CHARSET=latin1;

/*Data for the table `components_spec` */

insert  into `components_spec`(`id`,`name`,`show_latest_num`,`more_link_url`,`more_link_flag`,`open_in_new_flag`,`create_date`,`update_date`,`creator_sso`,`updator_sso`) values (22,'Banner',5,'more.blog.ge.com','Y','Y','2012-12-08 21:30:58','2012-12-08 21:30:58','502156886','502156886'); 
```

components_spec 和 comp_items_spec 的关系是 1:N，comp_items_spec 有两种数据，动态项和静态项，区别于列 static_flag，当 static_flag='N' 时是动态项，我还定义了 bean ComponentSpec 和 CompItemSpec 来映射实体。请从下面查看源代码：

```
import java.util.ArrayList;
import java.util.Date;
import java.util.List;

public class ComponentSpec {
    private int id;
    private String name;
    private int showLatestNum;
    private String moreLinkUrl;
    private char moreLinkFlag;
    private char openInNewFlag;
    private Date createDate;
    private Date updateDate;
    private String creatorSSO;
    private String updatorSSO;
    private List<CompItemSpec> staticItemSpecList =new ArrayList<CompItemSpec>();
    private List<CompItemSpec> dynamicItemSpecList =new ArrayList<CompItemSpec>();

    public Date getCreateDate() {
        return createDate;
    }

    public void setCreateDate(Date createDate) {
        this.createDate = createDate;
    }

    public int getId() {
        return id;
    }

    public void setId(int id) {
        this.id = id;
    }

    public char getMoreLinkFlag() {
        return moreLinkFlag;
    }

    public void setMoreLinkFlag(char moreLinkFlag) {
        this.moreLinkFlag = moreLinkFlag;
    }

    public String getMoreLinkUrl() {
        return moreLinkUrl;
    }

    public void setMoreLinkUrl(String moreLinkUrl) {
        this.moreLinkUrl = moreLinkUrl;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public int getShowLatestNum() {
        return showLatestNum;
    }

    public void setShowLatestNum(int showLatestNum) {
        this.showLatestNum = showLatestNum;
    }

    public Date getUpdateDate() {
        return updateDate;
    }

    public void setUpdateDate(Date updateDate) {
        this.updateDate = updateDate;
    }

    public char getOpenInNewFlag() {
        return openInNewFlag;
    }

    public void setOpenInNewFlag(char openInNewFlag) {
        this.openInNewFlag = openInNewFlag;
    }

    public List<CompItemSpec> getStaticItemSpecList() {
        return staticItemSpecList;
    }

    public void addStaticItemSpec(CompItemSpec compStaticItemSpec){
        getStaticItemSpecList().add(compStaticItemSpec);
        compStaticItemSpec.setComponentSpec(this);
    }

    public List<CompItemSpec> getDynamicItemSpecList() {
        return dynamicItemSpecList;
    }

    public void addDynamicItemSpec(CompItemSpec dynamicItemSpec){
        getDynamicItemSpecList().add(dynamicItemSpec);
        dynamicItemSpec.setComponentSpec(this);
    }

    public String getCreatorSSO() {
        return creatorSSO;
    }

    public void setCreatorSSO(String creatorSSO) {
        this.creatorSSO = creatorSSO;
    }

    public String getUpdatorSSO() {
        return updatorSSO;
    }

    public void setUpdatorSSO(String updatorSSO) {
        this.updatorSSO = updatorSSO;
    }

}

public class CompItemSpec {
    private int id;
    private int compId;
    private int contentTypeId;
    private char inListFlag;
    private char staticFlag;
    private String label;
    private String ext1Name;
    private String ext1Value;
    private String ext2Name;
    private String ext2Value;
    private String ext3Name;
    private String ext3Value;
    private String ext4Name;
    private String ext4Value;
    private String ext5Name;
    private String ext5Value;
    private ComponentSpec componentSpec;

    public int getCompId() {
        return compId;
    }

    public void setCompId(int compId) {
        this.compId = compId;
    }

    public String getExt1Name() {
        return ext1Name;
    }

    public void setExt1Name(String ext1Name) {
        this.ext1Name = ext1Name;
    }

    public String getExt1Value() {
        return ext1Value;
    }

    public void setExt1Value(String ext1Value) {
        this.ext1Value = ext1Value;
    }

    public String getExt2Name() {
        return ext2Name;
    }

    public void setExt2Name(String ext2Name) {
        this.ext2Name = ext2Name;
    }

    public String getExt2Value() {
        return ext2Value;
    }

    public void setExt2Value(String ext2Value) {
        this.ext2Value = ext2Value;
    }

    public String getExt3Name() {
        return ext3Name;
    }

    public void setExt3Name(String ext3Name) {
        this.ext3Name = ext3Name;
    }

    public String getExt3Value() {
        return ext3Value;
    }

    public void setExt3Value(String ext3Value) {
        this.ext3Value = ext3Value;
    }

    public String getExt4Name() {
        return ext4Name;
    }

    public void setExt4Name(String ext4Name) {
        this.ext4Name = ext4Name;
    }

    public String getExt4Value() {
        return ext4Value;
    }

    public void setExt4Value(String ext4Value) {
        this.ext4Value = ext4Value;
    }

    public String getExt5Name() {
        return ext5Name;
    }

    public void setExt5Name(String ext5Name) {
        this.ext5Name = ext5Name;
    }

    public String getExt5Value() {
        return ext5Value;
    }

    public void setExt5Value(String ext5Value) {
        this.ext5Value = ext5Value;
    }

    public int getId() {
        return id;
    }

    public void setId(int id) {
        this.id = id;
    }

    public int getContentTypeId() {
        return contentTypeId;
    }

    public void setContentTypeId(int contentTypeId) {
        this.contentTypeId = contentTypeId;
    }

    public char getInListFlag() {
        return inListFlag;
    }

    public void setInListFlag(char inListFlag) {
        this.inListFlag = inListFlag;
    }

    public char getStaticFlag() {
        return staticFlag;
    }

    public void setStaticFlag(char staticFlag) {
        this.staticFlag = staticFlag;
    }

    public String getLabel() {
        return label;
    }

    public void setLabel(String label) {
        this.label = label;
    }

    public ComponentSpec getComponentSpec() {
        return componentSpec;
    }

    public void setComponentSpec(ComponentSpec componentSpec) {
        this.componentSpec = componentSpec;
    }
} 
```

sqlmap如下：

```
 <mapper namespace="com.ge.dao.ComponentSpecMapper">
<resultMap id="componentMap" type="componentSpec">
    <id column="id" property="id"/>
    <result column="temp_id" property="tempId"/>
    <result column="show_latest_num" property="showLatestNum"/>
    <result column="more_link_url" property="moreLinkUrl"/>
    <result column="more_link_flag" property="moreLinkFlag"/>
    <result column="open_in_new_flag" property="openInNewFlag"/>
    <result column="update_date" property="updateDate"/>
    <result column="create_date" property="createDate"/>
    <result column="updator_sso" property="updatorSSO"/>
    <result column="creator_sso" property="creatorSSO"/>
    <collection property="staticItemSpecList" ofType="itemSpec">
        <id column="static_item_id" property="id"/>
        <result column="id" property="compId"/>
        <result column="static_content_type_id" property="contentTypeId"/>
        <result column="static_label" property="label"/>
        <result column="static_ext1_value" property="ext1Value"/>
        <result column="static_ext2_value" property="ext2Value"/>
        <result column="static_ext3_value" property="ext3Value"/>
        <result column="static_ext4_value" property="ext4Value"/>
        <result column="static_ext5_value" property="ext5Value"/>
    </collection>
    <collection property="dynamicItemSpecList" ofType="itemSpec">
        <id column="dynamic_item_id" property="id"/>
        <result column="id" property="compId"/>
        <result column="dynamic_content_type_id" property="contentTypeId"/>
        <result column="dynamic_in_list_flag" property="inListFlag"/>
        <result column="dynamic_label" property="label"/>
        <result column="dynamic_ext1_value" property="ext1Value"/>
        <result column="dynamic_ext2_value" property="ext2Value"/>
        <result column="dynamic_ext3_value" property="ext3Value"/>
        <result column="dynamic_ext4_value" property="ext4Value"/>
        <result column="dynamic_ext5_value" property="ext5Value"/>
    </collection>

</resultMap>

<sql id="compSpecMain">
      SELECT
          comp.id,
          comp.name,
          show_latest_num,
          more_link_url,
          more_link_flag,
          open_in_new_flag,
          create_date,
          update_date,
          creator_sso,
          updator_sso,
          si.id static_item_id,
          si.content_type_id static_content_type_id,
          si.in_list_flag static_in_list_flag,
          si.label static_label,
          si.ext1_value static_ext1_value,
          si.ext2_value static_ext2_value,
          si.ext3_value static_ext3_value,
          si.ext4_value static_ext4_value,
          si.ext5_value static_ext5_value,
          di.id dynamic_item_id,
          di.content_type_id dynamic_content_type_id,
          di.in_list_flag dynamic_in_list_flag,
          di.label dynamic_label,
          di.ext1_value dynamic_ext1_value,
          di.ext2_value dynamic_ext2_value,
          di.ext3_value dynamic_ext3_value,
          di.ext4_value dynamic_ext4_value,
          di.ext5_value dynamic_ext5_value
        FROM components_spec comp
            LEFT JOIN comp_items_spec si ON si.comp_id=comp.id AND si.static_flag='Y'
            LEFT JOIN comp_items_spec di ON di.comp_id=comp.id AND di.static_flag='N'
</sql>

<select id="selectComponentSpecByID" parameterType="int" resultMap="componentMap">
        <include refid="compSpecMain"/>
        WHERE
            comp.id=#{id}
</select>

 <select id="selectComponentSpecByName" parameterType="string" resultMap="componentMap">
        <include refid="compSpecMain"/>
        WHERE
            comp.name like #{name}

</select> 
```

这里的问题是当我进行 selectComponentSpecByID 查询时，动态项目列表应该没有任何内容，但实际结果是两个元素，我认为这是结果映射定义的问题，但没有胶水。有什么建议么？谢谢 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T03:55:52.683

最后我自己找到了解决方案，因为当 id 属性为 null 时，意味着结果中没有检索到记录，mybatis 仍然比较它们并将它们视为有效结果并将它们放入子列表中，这就是原因，修复它，只需定义防止空 id 的 Collection 元素的 notNullColumn。完毕！

```
 <resultMap id="componentMap" type="componentSpec">
        <id column="id" property="id"/>
        <result column="temp_id" property="tempId"/>
        <result column="show_latest_num" property="showLatestNum"/>
        <result column="more_link_url" property="moreLinkUrl"/>
        <result column="more_link_flag" property="moreLinkFlag"/>
        <result column="open_in_new_flag" property="openInNewFlag"/>
        <result column="update_date" property="updateDate"/>
        <result column="create_date" property="createDate"/>
        <result column="updator_sso" property="updatorSSO"/>
        <result column="creator_sso" property="creatorSSO"/>
        <collection property="staticItemSpecList" notNullColumn="static_item_id" ofType="itemSpec">
            <id column="static_item_id" property="id"/>
            <result column="id" property="compId"/>
            <result column="static_content_type_id" property="contentTypeId"/>
            <result column="static_label" property="label"/>
            <result column="static_ext1_value" property="ext1Value"/>
            <result column="static_ext2_value" property="ext2Value"/>
            <result column="static_ext3_value" property="ext3Value"/>
            <result column="static_ext4_value" property="ext4Value"/>
            <result column="static_ext5_value" property="ext5Value"/>
        </collection>
        <collection property="dynamicItemSpecList" notNullColumn="dynamic_item_id" ofType="itemSpec">
            <id column="dynamic_item_id" property="id"/>
            <result column="id" property="compId"/>
            <result column="dynamic_content_type_id" property="contentTypeId"/>
            <result column="dynamic_in_list_flag" property="inListFlag"/>
            <result column="dynamic_label" property="label"/>
            <result column="dynamic_ext1_value" property="ext1Value"/>
            <result column="dynamic_ext2_value" property="ext2Value"/>
            <result column="dynamic_ext3_value" property="ext3Value"/>
            <result column="dynamic_ext4_value" property="ext4Value"/>
            <result column="dynamic_ext5_value" property="ext5Value"/>
        </collection>

    </resultMap> 
```

# java - java.lang.String.concat 可以改进吗？

> ID：13778351
> 
> 赞同：8
> 
> 时间：2012-12-08T14:23:58.283
> 
> 标签：java, string, string-concatenation

我正在考虑向 Oracle Bug 数据库提交 RFE（增强请求），这应该会显着提高字符串连接性能。但在我这样做之前，我想听听专家对它是否有意义的评论。

这个想法是基于这样一个事实，即现有的 String.concat(String) 在 2 个字符串上的工作速度是 StringBuilder 的两倍。问题是没有连接 3 个或更多字符串的方法。外部方法无法做到这一点，因为 String.concat 使用包私有构造函数`String(int offset, int count, char[] value)`，它不复制 char 数组而是直接使用它。这确保了高 String.concat 性能。在同一个包中 StringBuilder 仍然不能使用这个构造函数，因为这样字符串的 char 数组将被暴露以进行修改。

我建议将以下方法添加到 String

```
public static String concat(String s1, String s2) 
public static String concat(String s1, String s2, String s3) 
public static String concat(String s1, String s2, String s3, String s4) 
public static String concat(String s1, String s2, String s3, String s4, String s5) 
public static String concat(String s1, String... array) 
```

注意：为了提高效率，在 EnumSet.of 中使用了这种重载。

这是其中一种方法的实现，其他的工作方式相同

```
public final class String {
    private final char value[];
    private final int count;
    private final int offset;

    String(int offset, int count, char value[]) {
        this.value = value;
        this.offset = offset;
        this.count = count;
    }

    public static String concat(String s1, String s2, String s3) {
        char buf[] = new char[s1.count + s2.count + s3.count];
        System.arraycopy(s1.value, s1.offset, buf, 0, s1.count);
        System.arraycopy(s2.value, s2.offset, buf, s1.count, s2.count);
        System.arraycopy(s3.value, s3.offset, buf, s1.count + s2.count, s3.count);
        return new String(0, buf.length, buf);
    } 
```

另外，将这些方法添加到 String 后，Java 编译器

```
String s = s1 + s2 + s3; 
```

将能够建立高效

```
String s = String.concat(s1, s2, s3); 
```

而不是当前的低效

```
String s = (new StringBuilder(String.valueOf(s1))).append(s2).append(s3).toString(); 
```

**更新**性能测试。我在我的笔记本 Intel Celeron 925 上运行它，连接 3 个字符串，我的 String2 类准确地模拟了它在真实 java.lang.String 中的样子。选择字符串长度以便将 StringBuilder 置于最不利的条件下，即当它需要在每次追加时扩展其内部缓冲区容量时，而 concat 总是只创建一次 char[]。

```
public class String2 {
    private final char value[];
    private final int count;
    private final int offset;

    String2(String s) {
        value = s.toCharArray();
        offset = 0;
        count = value.length;
    }

    String2(int offset, int count, char value[]) {
        this.value = value;
        this.offset = offset;
        this.count = count;
    }

    public static String2 concat(String2 s1, String2 s2, String2 s3) {
        char buf[] = new char[s1.count + s2.count + s3.count];
        System.arraycopy(s1.value, s1.offset, buf, 0, s1.count);
        System.arraycopy(s2.value, s2.offset, buf, s1.count, s2.count);
        System.arraycopy(s3.value, s3.offset, buf, s1.count + s2.count, s3.count);
        return new String2(0, buf.length, buf);
    }

    public static void main(String[] args) {
        String s1 = "1";
        String s2 = "11111111111111111";
        String s3 = "11111111111111111111111111111111111111111";
        String2 s21 = new String2(s1);
        String2 s22 = new String2(s2);
        String2 s23 = new String2(s3);
        long t0 = System.currentTimeMillis();
        for (int i = 0; i < 1000000; i++) {
            String2 s = String2.concat(s21, s22, s23);
//          String s = new StringBuilder(s1).append(s2).append(s3).toString();
        }
        System.out.println(System.currentTimeMillis() - t0);
    }
} 
```

在 1,000,000 次迭代中，结果为：

```
version 1 = ~200 ms
version 2 = ~400 ms 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-08T15:51:58.437

事实上，单个字符串连接表达式的性能很重要的用例并不常见。在大多数性能受字符串连接约束的情况下，它发生在一个循环中，逐步构建最终产品，在这种情况下，可变变量`StringBuilder`显然是赢家。这就是为什么我看不到通过干预基础`String`课程来优化少数人关注的提案的前景。但无论如何，就性能比较而言，您的方法确实具有显着优势：

```
import com.google.caliper.Runner;
import com.google.caliper.SimpleBenchmark;

public class Performance extends SimpleBenchmark
{
  final Random rnd = new Random();
  final String as1 = "aoeuaoeuaoeu", as2 = "snthsnthnsth", as3 = "3453409345";
  final char[] c1 = as1.toCharArray(), c2 = as2.toCharArray(), c3 = as3.toCharArray();

  public static char[] concat(char[] s1, char[] s2, char[] s3) {
    char buf[] = new char[s1.length + s2.length + s3.length];
    System.arraycopy(s1, 0, buf, 0, s1.length);
    System.arraycopy(s2, 0, buf, s1.length, s2.length);
    System.arraycopy(s3, 0, buf, s1.length + s2.length, s3.length);
    return buf;
  }

  public static String build(String s1, String s2, String s3) {
    final StringBuilder b = new StringBuilder(s1.length() + s2.length() + s3.length());
    b.append(s1).append(s2).append(s3);
    return b.toString();
  }

  public static String plus(String s1, String s2, String s3) {
    return s1 + s2 + s3;
  }

  public int timeConcat(int reps) {
    int tot = rnd.nextInt();
    for (int i = 0; i < reps; i++) tot += concat(c1, c2, c3).length;
    return tot;
  }

  public int timeBuild(int reps) {
    int tot = rnd.nextInt();
    for (int i = 0; i < reps; i++) tot += build(as1, as2, as3).length();
    return tot;
  }

  public int timePlus(int reps) {
    int tot = rnd.nextInt();
    for (int i = 0; i < reps; i++) tot += plus(as1, as2, as3).length();
    return tot;
  }

  public static void main(String... args) {
    Runner.main(Performance.class, args);
  }
} 
```

结果：

```
 0% Scenario{vm=java, trial=0, benchmark=Concat} 65.81 ns; σ=2.56 ns @ 10 trials
33% Scenario{vm=java, trial=0, benchmark=Build} 102.94 ns; σ=2.27 ns @ 10 trials
67% Scenario{vm=java, trial=0, benchmark=Plus} 160.14 ns; σ=2.94 ns @ 10 trials

benchmark    ns linear runtime
   Concat  65.8 ============
    Build 102.9 ===================
     Plus 160.1 ============================== 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-08T14:44:39.720

如果您希望他们认真对待您，您需要努力完成全面实施、测试和彻底对您提议的更改进行基准测试。完整的实现将包括对 Java 编译器的更改，以发出字节码以使用您的方法。

写下结果，然后将代码更改作为补丁提交到 OpenJDK 7 或 8。

我的印象是 Java 开发人员没有资源来尝试像这样的优化的推测性想法。没有基准测试结果和代码补丁的 RFE 不太可能受到关注……

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T17:04:29.410

问他们总是可以的，别担心。

我不会有这么多重载版本。在 EnumSet 中，节省可能很重要；在字符串中不太可能如此。

实际上我认为允许任意数量的参数的静态方法更好

```
 public static String join(String... strings) 
```

因为 args 的数量在编译时可能是未知的。

# css - 动画 CSS3 - 不起作用

> ID：13778356
> 
> 赞同：0
> 
> 时间：2012-12-08T14:24:49.940
> 
> 标签：css, animation, menu

我正在开发一个小的 CSS3 菜单。现场示例：http: [//jsfiddle.net/e592S/](http://jsfiddle.net/e592S/)

（代码满了很长）

```
/*Fifth Box*/
@-webkit-keyframes myFifth {
    0% {
        right: 300px;
        top: 13px;
        background: #D0D0D0;
        opacity: 0;
    }

    100% {
        background: #909090;
        right: 300px;
        top: 63px;
        opacity: 1;
    }
}

#box.box5 {
    top: 113px;
}

#littlebox5 {
    top: 053px;
    position: relative;

}
#bothcontaine5:hover ~ .box5 {
    -webkit-transition: all 0s;
    right: 300px;
    top: 63px;
    -webkit-animation: myFifth .75s;
    -webkit-animation-fill-mode: initial;
    opacity: 1;
    background: #909090;
    right: 300px;
    -webkit-animation-fill-mode: initial;
}

#bothcontainer5:hover .littlebox-sentence {
    background: -webkit-gradient(linear, 0% 0%, 0% 100%, from(#D0F2F9), to(#84CEFB));
}

#bothcontainer5:hover .triangle {
    border-right: 20px solid #909090;
} 
```

问题是第四个和第五个不起作用，（代码完全一样）。第一个第二个第三个盒子工作正常。我的问题是如何解决这个问题，以便*所有*的盒子都能正常工作？

希望得到帮助。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T15:03:58.060

不太清楚问题是什么，但正如@rob所说，你有，并且可能仍然有html错误，比如多个id，当id在DOM中必须是唯一的，也是为了你自己在尝试调试时的理智，你应该尝试[DRY](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)在您的代码中，可以将相同的动画应用于所有框，例如，您不必重复它。
我所做的是从 id 开始逐步重构您的代码

```
<div class="box3 box"> 
```

更正代码：http: [//jsfiddle.net/e592S/1/](http://jsfiddle.net/e592S/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T14:47:45.207

“id”对于页面上的一个元素必须是唯一的。没有测试看看是不是这个问题。看看是否将其命名为“类”名称可以解决问题。

# java - 带有 byte[] 的 MemoryImageSource（创建一个可行的颜色模型）

> ID：13778357
> 
> 赞同：1
> 
> 时间：2012-12-08T14:25:00.513
> 
> 标签：java, memoryimagesource

我从整数数组设置图像没有问题。（因为 MemoryImageSource 的整数版本可以用一个更简单的构造函数来实例化）。

我试过了：

```
 ComponentColorModel model = new ComponentColorModel(
        ColorSpace.getInstance(ColorSpace.CS_sRGB),
        false,
        false,
        ComponentColorModel.OPAQUE,
        DataBuffer.TYPE_BYTE);
    ImageProducer ip = new MemoryImageSource(width, height, model, bytes, 0, width); 
```

但图像似乎是空的（完全透明）。我尝试使用图像数据且不使用 alpha，并且还构建了带和不带 alpha 通道的模型。- 没有图像显示。

如果我转换`byte[]`为`int[]`并使用构造函数，则完全没有问题：

```
MemoryImageSource(int w, int h, int[] pix, int off, int scan) 
```

...但不适用于：

```
MemoryImageSource(int w, int h, ColorModel cm, int[] pix, int off, int scan) 
```

我可能有错误的颜色模型，但即便如此，我仍希望看到一些失真的像素数据（尤其是使用 usong ComponentColorModel.OPAQUE）。

# eclipse - eclipse休眠tomcat错误

> ID：13778358
> 
> 赞同：2
> 
> 时间：2012-12-08T14:25:03.260
> 
> 标签：eclipse, hibernate, tomcat, servlets

尝试在 Eclipse 中的 tomcat 上运行 Web 应用程序时出现此错误：

> 严重：为 org.apache.catalina.loader.WebappClassLoader 的 org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1680) 的 servlet Kartoteka java.lang.ClassNotFoundException: org.hibernate.criterion.Criterion 分配异常。 loadClass(WebappClassLoader.java:1526) 在 java.lang.Class.private 的 java.lang.Class.getDeclaredConstructors0(Native Method) 在 java.lang.Class.getConstructor0(Unknown Source) 在 java.lang.Class .newInstance0(Unknown Source) at java.lang.Class.newInstance(Unknown Source) at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1149) at org.apache.catalina.core.StandardWrapper.allocate( StandardWrapper.java:827) 在 org.apache.catalina.core.StandardWrapperValve。在 org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127) 在 org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191) 调用(StandardWrapperValve.java:129) .catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:103) 在 org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) 在 org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java :293) 在 org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:606) 在 org.apache.tomcat 的 org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:861)。 util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489) at java.lang.Thread.run(Unknown Source)StandardContextValve.invoke(StandardContextValve.java:191) at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127) at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:103) at org .apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) 在 org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293) 在 org.apache.coyote.http11.Http11Processor.process(Http11Processor .java:861) 在 org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:606) 在 org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489) 在java.lang.Thread.run（未知来源）StandardContextValve.invoke(StandardContextValve.java:191) at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127) at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:103) at org .apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) 在 org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293) 在 org.apache.coyote.http11.Http11Processor.process(Http11Processor .java:861) 在 org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:606) 在 org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489) 在java.lang.Thread.run（未知来源）127) org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:103) org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) org.apache.catalina.connector.CoyoteAdapter .service(CoyoteAdapter.java:293) 在 org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:861) 在 org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:606) 在org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489) 在 java.lang.Thread.run(Unknown Source)127) org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:103) org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) org.apache.catalina.connector.CoyoteAdapter .service(CoyoteAdapter.java:293) 在 org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:861) 在 org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:606) 在org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489) 在 java.lang.Thread.run(Unknown Source)org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:606) 在 org.apache.tomcat.util.net.JIoEndpoint$ 的 apache.coyote.http11.Http11Processor.process(Http11Processor.java:861) Worker.run(JIoEndpoint.java:489) at java.lang.Thread.run(Unknown Source)org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:606) 在 org.apache.tomcat.util.net.JIoEndpoint$ 的 apache.coyote.http11.Http11Processor.process(Http11Processor.java:861) Worker.run(JIoEndpoint.java:489) at java.lang.Thread.run(Unknown Source)

似乎没有特定的库，但我不知道到底是哪个。我使用最后一个休眠版本（4.1.8 最终版本）。我试图从 hiberante 链接所有库，但它没有帮助。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T14:20:01.573

具有 webapp 运行时依赖项的 JAR 文件必须放在`/WEB-INF/lib`文件夹中。您面临的异常表明情况并非如此。因此，要解决所有问题，您只需确保将 JAR 文件放置在正确的位置即可。

一个常见的初学者错误是他们在项目的*构建路径*属性中摆弄以添加运行时依赖项。这是错误的。它只添加编译时依赖项。您需要撤消在其中所做的所有更改以尝试解决此问题，否则它可能仍会发生冲突。

# php - 在 ASP.NET Web 服务中解析 PHP 数组？

> ID：13778364
> 
> 赞同：0
> 
> 时间：2012-12-08T14:25:45.303
> 
> 标签：php, asp.net, arrays, web-services, parsing

对于在 PHP 中具有这种结构的 Web 服务：

```
function getAlbums($quantity) 
    {

       /* this is a sample array */

        $albums=array();
        $albums[0]['title']='Stripped';
        $albums[0]['artist']='Christina Aguilera';
        $albums[0]['genre']='Pop';
        $albums[0]['songs'][0]='Beautiful';
        $albums[0]['songs'][1]='Fighter';

        $return=array();
        for($i=0;$i<=$quantity;$i++){

           $return[$i]=$albums[$i]; 

        }

        return $return;

    } 
```

我使用 PHP 客户端在我的浏览器中显示良好，但现在如何在 ASP.NET 中解析它以显示数据？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T14:30:32.267

我想知道你为什么/如何加入 PHP 和 ASP.net。但是，当您想在两个不同系统之间交换数据时，您可以将其转换为双方都能理解的中间格式。在任何这种情况下，您都可以将数据转换为 JSON 并从 ASP.net 读取该数据。通过这样做，您可以将 PHP 数组转换为数组 ASp.net。希望这可以帮助...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T14:33:54.217

这两件事完全相反：它们都是不同的语言。你需要在他们中间找点东西。最好是数据库，更糟糕的是某种文件系统......

# java - 从 JS 到 Java？

> ID：13778372
> 
> 赞同：0
> 
> 时间：2012-12-08T14:26:26.130
> 
> 标签：java, javascript, gwt

我知道 GWT 能够用 Java 编写代码并将编译过程中的内容翻译成 JS。

反过来呢？有什么东西可以把 JS 翻译成 Java 代码吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T14:30:42.220

你可能想看看[犀牛](https://developer.mozilla.org/en-US/docs/Rhino)。

从他们的网站：

> Rhino 是完全用 Java 编写的 JavaScript 的开源实现。它通常嵌入到 Java 应用程序中，以向最终用户提供脚本。它作为默认的 Java 脚本引擎嵌入在 J2SE 6 中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T14:33:11.760

除了 Rhino（由 Mozilla 提供）之外，还有[Nashorn](http://en.wikipedia.org/wiki/Nashorn_%28JavaScript_engine%29)（由 Oracle 提供）（顺便说一句，在德语中的意思是“Rhino”），它是 Java 中的官方 JS 实现。

它将在 2013 年与 Java8 一起开源。

# c# - 将字节数组或文件存储转换为位图图像

> ID：13778377
> 
> 赞同：0
> 
> 时间：2012-12-08T14:27:03.443
> 
> 标签：c#, windows, windows-8

选择文件到存储文件后，如何将此文件转换为 שn 图像以便像个人资料图片一样显示？
我将文件转换为字节数组，但不知道下一步该怎么做或有其他方法？

这是我的代码：

```
var openPicker = new Windows.Storage.Pickers.FileOpenPicker();
openPicker.ViewMode = Windows.Storage.Pickers.PickerViewMode.Thumbnail;
openPicker.SuggestedStartLocation = Windows.Storage.Pickers.PickerLocationId.DocumentsLibrary;
openPicker.FileTypeFilter.Add(".png");
openPicker.FileTypeFilter.Add(".Jpeg");
openPicker.FileTypeFilter.Add(".Jpg");
StorageFile file = await openPicker.PickSingleFileAsync();

var stream = await file.OpenReadAsync();

using (var dataReader = new DataReader(stream))
  {
      var  bytes = new byte[stream.Size];
      await dataReader.LoadAsync((uint)stream.Size);
      dataReader.ReadBytes(bytes);
      var stream2 = new MemoryStream(bytes);
  } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T15:41:01.977

下面的代码将字节转换为 BitmapImage

```
BitmapImage image1 = new BitmapImage();
InMemoryRandomAccessStream ms = new InMemoryRandomAccessStream();
ms.WriteAsync(tBytes.AsBuffer());
ms.FlushAsync().AsTask().Wait();
ms.Seek(0);
image1.SetSource(ms);
image.Source = image1; 
```

我从某个地方得到这个，如果有帮助，试试这个

```
FileOpenPicker openPicker = new FileOpenPicker();
openPicker.FileTypeFilter.Add(".jpg");
openPicker.FileTypeFilter.Add(".cmp");
openPicker.FileTypeFilter.Add(".png");
openPicker.FileTypeFilter.Add(".tif");
openPicker.FileTypeFilter.Add(".gif");
openPicker.FileTypeFilter.Add(".bmp");
StorageFile file = await openPicker.PickSingleFileAsync();
IRandomAccessStream stream = await file.OpenAsync(FileAccessMode.Read);
BitmapImage bmp = new BitmapImage();
bmp.SetSource(stream);
Image1.Source = bmp; 
```

# linux - 从 Linux 切换到 Windows 时的字符编码

> ID：13778378
> 
> 赞同：0
> 
> 时间：2012-12-08T14:27:29.330
> 
> 标签：linux, windows, character-encoding

我在 Ubuntu 上创建了一个 tex 文件。现在我通过 FTP 在 Apache-Webserver 上上传文件。我很确定，该服务器是基于 unix 的服务器。之后，我从网络服务器下载文件，并在 Windows-7 上使用 JEdit 打开它，德语变音符号（ä、ö 等）看起来很奇怪。

我想：如果我将 JEdit 中的文件属性更改为 UTF-8，一切都应该没问题，但是，变音符号仍然看起来很奇怪。

如何处理文件编码困境？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T14:41:43.947

转到 FileZilla 中的设置 -> 传输 -> 文件类型，并将您用于文本文件的扩展名设置为二进制。

如果您使用的是命令行客户端，请尝试`binary`切换到二进制模式。

# postgresql - postgres 9.1 全文搜索没有返回结果

> ID：13778385
> 
> 赞同：3
> 
> 时间：2012-12-08T14:28:53.207
> 
> 标签：postgresql, full-text-search, full-text-indexing, psql, tsvector

我在网上搜索了很多天，似乎互联网从未听说过我的问题：

我有一个包含英国大约 37M 条记录的邮政地址数据库表，它有一个地理空间索引和一个衍生的全文索引，如下所示：

```
create index on gb_locations using gin(to_tsvector('english', "Postcode" || ' ' || "Postcode_outcode" || ' ' || "Road" || ' ' || "Neighbourhood" || ' ' || "Admin2" || ' ' || "Admin3");) 
```

我的全文搜索采用以下形式：

```
SELECT * FROM gb_locations
WHERE
    to_tsvector('english', "Postcode" || ' ' || "Postcode_outcode" || ' ' || "Road" || ' ' || "Neighbourhood" || ' ' || "Admin2" || ' ' || "Admin3") @@ plainto_tsquery('english', 'greenham road rg14') 
```

该查询适用于大多数英国地址，尤其是在伦敦地区，但对于更远的位置，查询不会返回任何结果。

我已经验证该记录存在于表中，因为我可以使用地理空间搜索找到它，但对于全文搜索，数据库似乎不知道它。

这是解释：

```
Bitmap Heap Scan on gb_locations  (cost=52.04..56.10 rows=1 width=521)
  Recheck Cond: (to_tsvector('english'::regconfig, ((((((((((("Postcode")::text || ' '::text) || ("Postcode_outcode")::text) || ' '::text) || "Road") || ' '::text) || ("Neighbourhood")::text) || ' '::text) || ("Admin2")::text) || ' '::text) || ("Admin3")::text)) @@ '''greenham'' & ''road'' & ''rg14'''::tsquery)
  ->  Bitmap Index Scan on text_search_index  (cost=0.00..52.04 rows=1 width=0)
        Index Cond: (to_tsvector('english'::regconfig, ((((((((((("Postcode")::text || ' '::text) || ("Postcode_outcode")::text) || ' '::text) || "Road") || ' '::text) || ("Neighbourhood")::text) || ' '::text) || ("Admin2")::text) || ' '::text) || ("Admin3")::text)) @@ '''greenham'' & ''road'' & ''rg14'''::tsquery) 
```

任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-08T15:08:28.973

如果某些字段可以为 NULL，则需要`coalesce(field, '')`在获取要搜索的字符串的全局串联中应用它们。

否则，它似乎适用于评论中给出的示例值：

```
select to_tsvector('english','RG147SW RG14 Greenham Road Newbury  West Berkshire')
  @@ plainto_tsquery('english', 'greenham road rg14');

 ?column? 
----------
 t
(1 row) 
```

但是这个不匹配（结果为 NULL），当`Admin2`为 NULL 或更一般地任何其他字段按原样传递给`||`操作员时就是这种情况。

```
 select to_tsvector('english','RG147SW RG14 Greenham Road ' || NULL || ' Newbury  West Berkshire')
      @@ plainto_tsquery('english', 'greenham road rg14');

?column? 
----------

(1 row) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-08T15:30:18.203

只是为了补充 Daniel Vérité 所说的，

如果任何字段预期为 NULL，则必须按如下方式创建全文索引：

```
create index [index name] on [table name] using gin(to_tsvector('english', coalesce("Field1",'') || ' ' || coalesce("Field2",'') || ' ' || coalesce("Field3",'') ....)); 
```

此外，查询本身必须使用相同的模板，如下所示：

```
SELECT * FROM [table name] WHERE to_tsvector('english', coalesce("Field1",'') || ' ' || coalesce("Field2",'') || ' ' || coalesce("Field3",'') ....) @@ plainto_tsquery('english', '[your search sentance/phrase]'); 
```

# c# - 由于具体类和接口没有与 IEnumerable 匹配的返回类型而导致的错误 并列出

> ID：13778389
> 
> 赞同：3
> 
> 时间：2012-12-08T14:29:15.240
> 
> 标签：c#, list, interface, ienumerable

我有以下接口和具体类。

我收到以下错误：

> “DAL.Model.Audit.Categories”无法实现“DAL.Interfaces.IAudit.Categories”，因为它没有匹配的返回类型“System.Collections.Generic.IEnumerable”。

谁能解释我在这里做错了什么？

```
public interface IAudit
{
    IEnumerable<ICategory> Categories { get; set; }
    IEnumerable<IAuditAnswer> Answers { get; set; }
}

public class Audit : IAudit
{
    public List<ICategory> Categories { get; set; }
    public List<IAuditAnswer> Answers { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-08T14:36:51.150

实现接口时必须遵守约定：

```
public class Audit : IAudit
{
    public IEnumerable<ICategory> Categories { get; set; }
    public IEnumerable<IAuditAnswer> Answers { get; set; }
} 
```

在接口中，这两个属性定义为`IEnumerable<T>`，因此在您的实现类中，您应该使用相同的类型而不是`List<T>`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T14:46:48.920

你可以阅读这篇非常有用的文章来了解原因：

[泛型类型的变异（C# 编程指南）](http://msdn.microsoft.com/en-us/library/ms228359%28v=vs.90%29.aspx)

> 不幸的是，强类型集合有其自身的缺点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T16:28:59.000

这不起作用的原因是因为`IList`它比`IEnumerable`.

在您的脑海中，您（我猜想）您认为`IList`实现`IEnumerable`了“为什么我不能只使用它？” 真正的答案在于[这个 stackoverflow 响应](https://stackoverflow.com/a/7996237/314661)。

# asp.net-mvc-3 - MVC3 System.Collections.Generic.List 传递错误的模型项

> ID：13778391
> 
> 赞同：0
> 
> 时间：2012-12-08T14:29:33.480
> 
> 标签：asp.net-mvc-3

大家好，我检查了我的控制器并查看它似乎没有问题，但我收到系统收集错误。

这是我的控制器

```
 public ViewResult Index()
        {

            return View(db.banner.ToList());
        } 
```

这是我的看法

```
{
@model IEnumerable<icerik.Models.banner>
} 
```

我得到这个错误

```
The model item passed into the dictionary is of type 'System.Collections.Generic.List`1[icerik.Models.banner]', but this dictionary requires a model item of type 'System.Collections.Generic.IEnumerable`1[icerik.Models.contents]'. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T14:32:45.147

也许您的主视图中有一个部分：

```
@Html.Partial("SomePartial") 
```

并且这个部分被强输入为`IEnumerable<contents>`：

```
@model IEnumerable<icerik.Models.contents> 
```

因此，请确保您将正确的模型传递给此部分。如果您没有为 Partial 助手指定任何内容（如我的示例中），则主模型将传递给此部分。

所以总是指定正确的模型：

```
@Html.Partial("SomePartial", SomeModelInstance) 
```

# android - android检查是否以编程方式允许非市场应用程序

> ID：13778395
> 
> 赞同：2
> 
> 时间：2012-12-08T14:29:48.120
> 
> 标签：android, google-play

如何以编程方式检查 android 手机上是否允许非市场应用程序？

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-08T14:40:27.363

你可以试试这个，它会打开设置屏幕

**检查它**

```
import android.provider.Settings;

int result = Settings.Secure.getInt(getContentResolver(),  Settings.Secure.INSTALL_NON_MARKET_APPS, 0); 
```

**打开设置**

```
Intent intentSettings = new Intent();
 intentSettings.setAction(android.provider.Settings.ACTION_MANAGE_APPLICATIONS_SETTINGS);
 startActivity(intentSettings); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T14:36:48.310

使用`PackageManager`类来做到这一点，更多信息在[这里](http://developer.android.com/reference/android/content/pm/PackageManager.html)。

# node.js - 我可以使用 swank-js 在 js2-mode 中完成 node.js API 吗？

> ID：13778399
> 
> 赞同：7
> 
> 时间：2012-12-08T14:30:22.407
> 
> 标签：node.js, emacs, elisp, slime, swank

我在 emacs 的 js2-mode 中使用 swank-js。可以用它来完成node.js内置或者js2-mode中的,,,等`fs.readFile`第三方`fs.writeFile`API`express.use`吗？`async.forEach`如果是，那么最好的设置是什么？

任何帮助表示赞赏:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T03:40:15.793

`swank-js`支持自动完成。我在`auto-complete`mode 和`ac-slime`. 这是我的设置：

```
(eval-after-load 'auto-complete
  '(progn
     (add-to-list 'ac-modes 'slime-repl-mode)
     (add-to-list 'ac-modes 'js2-mode)
     (add-to-list 'ac-modes 'js-mode)
     (add-hook 'slime-mode-hook 'set-up-slime-ac)
     (add-hook 'slime-repl-mode-hook 'set-up-slime-ac)))

(eval-after-load 'slime
  '(progn
     (setq slime-protocol-version 'ignore
           slime-net-coding-system 'utf-8-unix
           slime-complete-symbol*-fancy t
           slime-complete-symbol-function 'slime-fuzzy-complete-symbol)
     (slime-setup '(slime-repl slime-js)))) 
```

我不确定 3rd 方 API，但我能够自动完成我自己定义的模块。

编辑：显然它可以自动完成任何需要的东西。如果你连接到 web 远程，它甚至可以完成 DOM API。

![swank-js](../Images/43aa385f41b35dab5b4023551b817a14.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T06:00:27.367

@Ispinfx 也许您可以尝试 ac-js2-mode [https://github.com/ScottyB/ac-js2](https://github.com/ScottyB/ac-js2) 这种模式可以在 js 文件中自动完成。

# iphone - 为什么单击任何按钮时我的 UIActionSheet 会崩溃？

> ID：13778409
> 
> 赞同：1
> 
> 时间：2012-12-08T14:31:29.717
> 
> 标签：iphone, ios, objective-c, uiactionsheet

我的`UIActionSheet`. 当我单击任何按钮时，它会崩溃。我激活了`NSZombieEnabled`。然后，我收到以下错误消息。

```
[FacebookConfigurationController actionSheet:clickedButtonAtIndex:]: 消息发送到
释放实例 0x84d4430

```

我在我的方法中放了一个断点

```
-(void) actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger) index 
```

但在它停止之前崩溃。这是我的代码，如果你能帮助我

`FacebookConfigurationController.h`

```
@interface FacebookConfigurationController: UIViewController<UIActionSheetDelegate,...> 
```

`FacebookConfigurationController.m`

```
-(void) LaunchFacebookMenu
{    
     if([Commentaire isEqual:@""])
    {
        NSLog(@"You must enter a comment");
    }
    else
    {
        UIActionSheet *action = [[UIActionSheet alloc] initWithTitle: [self getLanguageValue: @"facebook_popup_title"]
                                                            delegate: self 
                                                   cancelButtonTitle: nil 
                                              destructiveButtonTitle: 
                                 [self getLanguageValue: @"facebook_popup_cancel"]
                                                   otherButtonTitles: 
                                 [self getLanguageValue: @"facebook_popup_userwall"], 
                                 [self getLanguageValue: @"facebook_popup_friendwall"],
                                 [self getLanguageValue: @"facebook_popup_deconect"],nil];
        action.actionSheetStyle =UIActionSheetStyleBlackTranslucent;

        [action showInView:m_CurrentView.view];
        [action release];
    }
}

- (void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)Index
{ 
    switch (Index) 
    {

        case 0:
        {
            [m_CurrentView dismissModalViewControllerAnimated:YES];   
            break;
        }
        case 1:
        {

         ...
         ...
         ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T02:49:51.770

你释放你的`FacebookConfigurationController object`？

因为委托方法

```
(void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)Index{} 
```

当你有 release 时很快就会被调用`"self"`。

# google-maps-api-3 - 我得到了我的 Google API 浏览器密钥。接下来我该怎么办？

> ID：13778411
> 
> 赞同：0
> 
> 时间：2012-12-08T14:31:56.510
> 
> 标签：google-maps-api-3, google-maps-api-2

我正在开发一个使用谷歌地图 API 的 ASP.NET 网站。如 google.com 中的教程中所述，我需要一个 google API 密钥才能使其工作。我得到了那个密钥，但是每次我运行我的网站时，我都会收到以下错误：

> Google 已禁用此应用程序的 Maps API。提供的密钥不是有效的 Google API 密钥，或者未授权用于本网站上的 Google Maps Javascript API v2。如果您是此应用程序的所有者，您可以在此处了解如何获取有效密钥：[http ://code.google.com/apis/maps/documentation/javascript/v2/introduction.html#Obtaining_Key](http://code.google.com/apis/maps/documentation/javascript/v2/introduction.html#Obtaining_Key)

问题可能是什么？本教程没有说明如何处理 API 密钥。它只是说转到服务并激活 google Maps API v2 以获取密钥。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T14:52:44.327

加载 Google 地图脚本时，您是否将 API 密钥包含在 URL 中？

从错误消息中的文档[链接：](https://developers.google.com/maps/documentation/javascript/v2/introduction#Obtaining_Key)

```
<script src="http://maps.google.com/maps?file=api&amp;v=2&amp;key=abcdefg&sensor=true_or_false"
        type="text/javascript"></script> 
```

用于加载脚本的链接是：

```
http://maps.google.com/maps?file=api&amp;v=2&amp;key=abcdefg&sensor=true_or_false 
```

您需要将其替换`abcdef`为从 Google 地图获得的 API 密钥。

# c++ - std::remove_pointer 无法删除 VS2012 上的 const volatile 函数指针

> ID：13778412
> 
> 赞同：1
> 
> 时间：2012-12-08T14:32:00.893
> 
> 标签：c++, stl

`std::remove_pointer`无法删除 VS2012 上的 const volatile 函数指针，这是 vs2012 中的 buf 吗？

```
#include "iostream"
#include <typeinfo>
using namespace std;

int main()
{
    typedef void (* const cfunp_t) ();

    cout<<typeid(cfunp_t).name()<<endl;
    cout<<typeid(std::remove_pointer<cfunp_t>::type).name()<<endl;

    return 0;
} 
```

由 vs2012 构建的输出：

```
void (__cdecl*)(void)
void (__cdecl*)(void)         // can not remove the const function pointer 
```

由 mingw gcc 4.7.2 构建的输出

```
PFvvE
FvvE                          // can remove the const function pointer 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T15:02:05.297

谢谢大家

我更改了我的测试代码：

```
#include "iostream"
#include <typeinfo>
using namespace std;

typedef void fun_t();
typedef fun_t* funp_t;
typedef const funp_t cfunp_t;

template<typename T>
void print_type()
{
    cout<<"unknow"<<endl;
}

template<>
void print_type<fun_t>()
{
    cout<<"is a function"<<endl;
}

template<>
void print_type<funp_t>()
{
    cout<<"is a function pointer"<<endl;
}

template<>
void print_type<cfunp_t>()
{
    cout<<"is a const function pointer"<<endl;
}

int main()
{
    print_type<cfunp_t>();
    print_type<std::remove_pointer<cfunp_t>::type>();

    return 0;
} 
```

一个输出：

在vs2012中

```
is a const function pointer

is a const function pointer 
```

在 gcc 中

```
is a const function pointer

is a function 
```

# android - 如何在android中正确设置一个大的小部件图标

> ID：13778418
> 
> 赞同：7
> 
> 时间：2012-12-08T14:32:27.067
> 
> 标签：android, android-widget, widget, android-appwidget

这是我的问题：我的程序有 2 个小部件。其中之一是 4x1 单元格大小。此小部件在清单文件中设置了一个图标（与小部件本身具有相同的宽度）

```
android:icon="@drawable/widget_4bg" 
```

我的问题是，在小部件列表中的 android OS 4.x 手机上，该图标并未分布在整个 4 个单元格上，而仅分布在一个单元格上。

![在此处输入图像描述](../Images/367f4e77f034f97a076b0a46188daddf.png)

如何以编程方式正确设置图标？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-08T14:45:37.363

尝试使用这个。

```
android:previewImage="@drawable/widget_4bg" 
```

示例 xml**小部件信息**

```
<?xml version="1.0" encoding="utf-8"?>
<appwidget-provider xmlns:android="http://schemas.android.com/apk/res/android"
    android:initialLayout="@layout/your_widget_layout"
    android:minHeight="400dip"
    android:minResizeHeight="250dip"
    android:minResizeWidth="300dip"
    android:minWidth="450dip"
    android:previewImage="@drawable/widget_preview"
    android:resizeMode="horizontal|vertical"
    android:updatePeriodMillis="172800000" >

</appwidget-provider> 
```

**更新**

```
 <receiver
            android:name="com..widget.WidgetProvider"
            >
            <intent-filter>
                <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />

            </intent-filter>

            <meta-data
                android:name="android.appwidget.provider"
                android:resource="@xml/widget_info" />
        </receiver> 
```

# sql - 搜索多个表并生成单个可分页的混合结果集

> ID：13778419
> 
> 赞同：-1
> 
> 时间：2012-12-08T14:32:35.573
> 
> 标签：sql, sql-server-2008

我在 SQL Server 2008 数据库中有 4 个具有以下架构的表

```
Tutorials (TutorialID, Title, Approved, AddedDate)
Albums    (AlbumID, Title, Approved, AddedDate)
Profiles  (ProfileID, Title, Approved, AddedDate)
Polls     (PollID, Title, Approved, AddedDate) 
```

我想提供搜索工具来搜索所有这些表，并生成一个可分页的结果集，显示所有表的混合数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T19:52:23.787

您可能想要一个联合视图：

```
CREATE VIEW MixedData(Type, ID, Title, Approved, AddedDate) AS
    SELECT 'Tutorial' AS Type, TutorialID AS ID, Title, Approved, AddedDate
    UNION ALL
    SELECT 'Album'    AS Type, AlbumID    AS ID, Title, Approved, AddedDate
    UNION ALL
    SELECT 'Profile'  AS Type, ProfileID  AS ID, Title, Approved, AddedDate
    UNION ALL
    SELECT 'Poll'     AS Type, PollID     AS ID, Title, Approved, AddedDate 
```

然后，您可以从`MixedData`应用您想要的标准中进行选择。“AS Type”和“AS ID”子句不是绝对必要的。

# qt - QListView 在编辑时失去选择

> ID：13778424
> 
> 赞同：1
> 
> 时间：2012-12-08T14:33:11.733
> 
> 标签：qt, qlistview, qsqltablemodel

我有一个 QListView 从 QSQLTableModel 中提取数据。

用户单击“添加”按钮后，我添加了一个新项目并将其打开以进行编辑：

```
QSqlTableModel *tblModel= qobject_cast<QSqlTableModel *>(ui->listView->model());
if(tblModel->insertRow(tblModel->rowCount()))
    ui->listView->edit(tblModel->index(tblModel->rowCount()-1, 1)); 
```

但是一旦用户完成了对新值的编辑，listView 的选择就会丢失。我在 QListView 或 QSQLTableModel 上找不到信号来处理何时和编辑完成，以便我“恢复”选择。

有没有办法可以确保保留选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T15:07:20.920

摘自 edit() 函数文档：

> 请注意，此函数不会更改当前索引。由于当前索引定义了要编辑的下一个和上一个项目，因此用户可能会发现键盘导航无法按预期工作。要提供一致的导航行为，请在此函数之前使用相同的模型索引调用 setCurrentIndex()。

# google-apps-script - 电子表格电子邮件触发器

> ID：13778433
> 
> 赞同：1
> 
> 时间：2012-12-08T14:34:11.860
> 
> 标签：google-apps-script, google-sheets, google-spreadsheet-api

我在 Google 电子表格上编写了脚本，以便在修改电子表格或添加任何数据时发送电子邮件。电子邮件触发器正在工作，但每当在下一行中输入任何数据时，它也会将电子邮件发送到以前的电子邮件地址。

请提出解决方案

以下是编写的脚本：

```
function onEdit(e) {
  var sheet = SpreadsheetApp.getActiveSheet();
  var startRow = 2;  // First row of data to process
  var numRows = 1;   // Number of rows to process
  var dataRange = sheet.getRange(startRow, 1 , numRows,3) // Fetch the range of cells A2:B3

  // Fetch values for each row in the Range.
  var data = dataRange.getValues();
for (i in data) {
    var row = data[i];
    var emailAddress = row[2];  // First column
    var message = row[0] + "requested" + row [1];       // Second column
    var subject = "Sending emails from a Spreadsheet";
    MailApp.sendEmail(emailAddress, subject, message);
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T01:49:52.803

您似乎正在使用共享电子表格来收集添加用户请求，并信任请求者填写信息。在您共享的详细文档中，进一步显示请求已添加，但未编辑。（这是一个重要的简化区别。）

我建议您真正需要的是使用表单来接收该输入。使用表单将在您的电子表格中创建一个“数据表”，一组您不能乱用的列。（您可以编辑内容、添加和删除行，但不能添加或删除列。）但是，您可以在此表之外的电子表格中添加列，这为您提供了一个方便的地方来存储有关个人状态的状态信息要求。

![示例表](../Images/11e38cd737afa16cc667aaeb425050fa.png)

此外，您可以触发您的处理以在表单提交时运行，而不是简单的“onEdit”——这可以避免 ScampMichael 指出的问题。或者，您可以使用可安装的编辑触发器，如[本答案](https://stackoverflow.com/a/27277585/1677912)中所述。

试试[这张表](https://docs.google.com/spreadsheet/ccc?key=0AmkSPNhhUowadFdaZFJYX2FnbzRLUHJ4R2tnaVdkSXc)和[这张表格](https://docs.google.com/spreadsheet/viewform?formkey=dFdaZFJYX2FnbzRLUHJ4R2tnaVdkSXc6MQ#gid=0)。为自己保存一份副本，进入脚本并删除阻止发送电子邮件的评论，然后尝试一下。电子表格中有一个菜单项可以开始处理；只需清除“请求状态”列即可重新运行它。您可以打开表单（并找到它的 URL），并添加更多条目进行实验。

它是我编写的类似系统的核心，包含一个用于处理请求的谨慎状态机。我的系统在多个电子表格中有大量非常复杂的数据，因此它经常被抢占，然后需要再次运行。（我为此使用了一个定时触发器。）这就是请求通过状态处理的原因。如果您觉得这太复杂，请仅取出您需要的部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T15:32:51.503

您的问题不清楚...在脚本中的任何地方我都看不到实际修改了哪个单元格的内容...您的目标范围在第 2 行被硬编码，因此唯一可以处理的行是第 2 行（并且邮件只能是发送一次）...

你也可以：

*   解释它应该如何工作
*   解释它现在是如何工作的，尤其是“以前的电子邮件”是什么意思
*   删除代码中的拼写错误（行 [2] 不是第一列）
*   解释你是如何触发这个函数的：这个名字`onEdit(e)`暗示了一个 onEdit 触发器，但简单的触发器不能发送邮件，所以我想你已经设置了一些其他的触发器。
*   解释为什么`(e)`在你的函数参数中而不使用它？

* * *

**编辑：**感谢信息的补充。您建议的脚本不足以实现您想要的。这里的想法是通过**添加**（或插入）一行数据或（如果我理解良好）通过使用新值**编辑工作表中的任何行来检查工作表中的某些内容是否已被修改。**

这并不像乍一看那么简单；-)

我会做什么来拍摄工作表的“快照”并 - 基于`timer`或`onEdit`- 将该快照与工作表的当前状态进行比较。

获得该结果的方法不止一种，您可以在电子表格中有第二张表格，没有人可以修改，这是您在每次修改/发送邮件后更新的主表格的副本。因此，在更新脚本之前，应该查找工作表之间的任何差异，并在发现差异时将报告发送到相应的电子邮件。

另一种方法是将转换为字符串的工作表数据存储在脚本属性中，原理相同，但对于访问电子表格的普通用户来说更“不可见”。

您也可以使用 scriptDb 或您的 userproperties，但脚本属性可能更适合（更简单）此用例。

告诉我们您的想法/偏好，我（或其他人）可能会给您一些代码来开始。

# php - 初学者——AJAX 真假区别？

> ID：13778436
> 
> 赞同：1
> 
> 时间：2012-12-08T14:34:20.023
> 
> 标签：php, ajax

```
function loadxmldoc()
{
  var xmlhttp;
  if (window.XMLHttpRequest)
  {
     xmlhttp=new XMLHttpRequest();
  }
  else
  {
     xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }

 xmlhttp.onreadystatechange=function()
 {
   if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
      document.getElementById("myDiv").innerHTML=xmlhttp.responseText;
    } 
 }

 xmlhttp.open("GET","ajax_info.php?fname=sakthi&lname=karthiga",false);

 xmlhttp.send();
} 
```

ajax_info.php

```
<?php
  echo( "hello"."<br>".$_GET["fname"].$_GET["lname"]); 
?> 
```

在这段代码中，我将 ajax 状态更改为 FALSE，但仍然与 TRUE 一样工作，你能说出黑白 TRUE 和 false 的区别吗？如果我改变 false 服务器端会发生什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T14:42:35.453

我想你说的是`open`函数的第三个参数。它指示请求是否应该是异步的。在这两种情况下，完全相同的请求将被发送到服务器。差异将在客户端。如果您使用异步（AJAX 推荐），客户端浏览器在请求执行期间不会冻结，并且该`send`方法将立即返回。一旦服务器上的执行完成，您订阅的回调将被调用。

如果将参数设置`false`为`send`方法，将在对服务器的请求的整个执行过程中阻塞并冻结客户端浏览器。这完全违背了 AJAX 的全部目的，但它被一些想要在成功回调之外使用请求结果的人使用。不要犯同样的错误。

我强烈建议您始终使用异步 AJAX 请求 ( `true`) 而不是阻塞调用。

# crystal-reports - 在 Windows 8 上的 Visual Studio 2010 中缺少程序集引用 Crystal Reports

> ID：13778437
> 
> 赞同：1
> 
> 时间：2012-12-08T14:34:27.753
> 
> 标签：crystal-reports, report, crystal-reports-2010

[我从http://www.sdn.sap.com](http://www.sdn.sap.com)为 VS 2010 安装了 Crystal Reports
当我在 CrystalReport.cs 类中创建新的 Crystal Report 时，有几个错误：

> 命名空间“CrystalDecisions.CrystalReports”中不存在类型或命名空间名称“Engine”（您是否缺少程序集引用？）

我手动浏览`CrystalDecisions.CrystalReports.Engine.dll`并将其添加到参考文献中，但仍然给我错误

CrystalDecisions.ReportSource 给我
同样的错误 CrystalDecisions.Shared 给我同样的错误

当`CrystalDecisions.CrystalReports.Engine`我转到添加参考 .NET 选项卡时也不存在 ..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-12T11:51:35.240

对于所有仍然存在此问题的人：不知何故，我发现 .NET 4 存在问题，使用 .NET 4.5 和 VS2012 它们可以正常工作。

我还没有尝试过 Ally 的解决方案，但这可能是我的问题的正确答案，但无论我切换到 vs2012 和 4.5，它们都可以正常工作。

谢谢

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-08-01T19:20:08.473

您必须在项目属性中更改 .Net 的版本。在选项卡应用程序中，将目标框架更改为 .Net Framework 4。我确实遇到了问题。事实上，当我创建项目时，最初的 .Net Framework 是 .Net Framework 4 Client Profile。正如我所说，我更改为 .Net 框架 4。

问题完美解决。

# javascript - 是否可以将变量值用作另一个变量名称的一部分？

> ID：13778438
> 
> 赞同：2
> 
> 时间：2012-12-08T14:34:28.830
> 
> 标签：javascript, jquery

```
var b = '1'; 
```

如何使用变量 b 的内容创建变量名？我在每个循环中都这样做，所以 b 会改变。

我希望最终产品是这样的：

```
var trip1 = ''; 
```

我将如何完成这样的事情？

```
var trip + b = '';
var trip.b = ''; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T14:36:10.060

不，但是您可以使用对象的属性来做到这一点：

```
var obj = {};
obj.b = '1'
obj['trip' + obj.b] = '';

// or

var obj = {};
var b = '1'
obj['trip' + b] = ''; 
```

在 JavaScript 中，您可以通过两种方式访问​​属性：

1.  使用点和文字属性名称，例如`obj.trip1`.

2.  使用方括号和*字符串*属性名称，例如`obj['trip1']`.

在后一种情况下，字符串不必是字符串文字，它可以是任何表达式的结果，因此是上面的示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T14:36:28.543

> 我在每个循环中这样做

由于您正在迭代它们，因此最好的方法是使用数组。

```
var trip = [1,2,3,4,5];
for (var i = 0; i < trip.length; i++){
    alert(trip[i]);
} 
```

为了解决您的问题，您可以将值存储为对象的属性：

```
var obj = {};
var b = '1';
obj['trip' + b] = ""; 
```

如果您在全局范围内执行此操作，您还可以将变量添加为全局对象的属性：

```
var b = '1';
window['trip' + b] = "";

trip1; // == "" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T14:36:41.490

您可以使用如下动态键通过窗口对象访问全局变量：

```
var b = '1';

trip1 = 'hello';

console.log(window['trip'+b]); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-08T14:54:58.363

听起来您正在寻找 eval() 方法。

```
var b = '1';
(eval('var trip'+b+' = 3')); // Is the same as writing var trip1 = 3;
console.log(trip1); 
//Output of variable trip1 is 3 
```

虽然，做一个快速谷歌搜索为什么 eval(); 在你使用这种技术之前是不好的。

# javascript - 如何使用 JavaScript 获取 div 的 CSS left-property 值

> ID：13778439
> 
> 赞同：20
> 
> 时间：2012-12-08T14:34:35.867
> 
> 标签：javascript, css

我的 CSS 规则如下所示：

```
#my-div{
    display: none;
    position: absolute;
    left: -160px;
    bottom: -150px;
} 
```

我试图像这样获得左属性的价值：

*   `document.getElementById('my-div').style.left`
*   `document.getElementById('my-div').offsetLeft`

问题是两者都返回`null`。哪里有问题？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-12-08T14:40:19.687

问题是`someElement.style.left`只有当你有内联样式时才有效。由于您通过样式表应用样式，因此您将无法以您期望的方式获取值。

您可以采取其他几种方法来通过 JavaScript 获取价值：

**window.getComputedStyle：**

可以使用 获取元素的计算样式[`window.getComputedStyle`](https://developer.mozilla.org/en-US/docs/DOM/window.getComputedStyle)，问题是它的支持非常有限（IE9+）。如果您仍想使用它，可以将其包装在一个函数中，以便更轻松地获取每个属性：

```
function getCssProperty(elmId, property){
   var elem = document.getElementById(elmId);
   return window.getComputedStyle(elem,null).getPropertyValue(property);
}
// You could now get your value like
var left = getCssProperty("my-div", "left"); 
```

**[工作示例](http://jsfiddle.net/57e2m/)**

**jQuery（或其他一些库）：**

另一种选择是使用[jQuery](http://jquery.com)之类的 JavaScript 库（或任何您喜欢的），它将为您提供跨浏览器的解决方案来获取价值。

使用 jQuery，您可以使用该[`.css()`](http://api.jquery.com/css/)方法读取元素的 CSS 属性。

```
$(function () {
  var left = $("#my-div").css("left");
}); 
```

**[工作示例](http://jsfiddle.net/57e2m/1/)** ​</p>

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-08T14:37:38.277

你应该这样称呼

```
document.getElementById('my-div').style.left
document.getElementById('my-div').offsetLeft 
```

加载文档时，如果您之前调用它，它将返回 null 因为元素尚不存在。因此，您可以使用 jQuery 来确定何时加载所有内容。

```
$(function() {
    //put your code here
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-08T14:37:45.753

问题在于，由于 CSS 是与 JS 分开加载的，因此没有官方方法可以确保该`style.left`属性准确无误。该`style.left`属性是一个不同的、更高优先级的样式覆盖。

您需要使用该`getComputedStyle`功能。

[https://developer.mozilla.org/en-US/docs/DOM/window.getComputedStyle](https://developer.mozilla.org/en-US/docs/DOM/window.getComputedStyle)

前任：

```
var div = document.getElementById('my-div');
var style = getComputedStyle(div);
var left = style.getPropertyValue("left"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-08T14:38:42.087

也许您必须在文档准备好后调用您的函数。

如果你使用 jQuery，你可以更快地找到左值：

```
 $(document).ready(function() {
     var $left = $('#my-div').css('left');
     console.log($left);
 }); 
```

# mysql - 带有连字符分隔值的 MySQL Sum 列

> ID：13778440
> 
> 赞同：0
> 
> 时间：2012-12-08T14:34:43.490
> 
> 标签：mysql, sum, calculated-columns, hyphen

我需要用连字符分隔的成本列相加。我知道这通常是由 sum() 完成的，但在这种情况下，我需要去掉“-”，这样我就可以汇总整列。如下图所示。这是我的数据样例。并非每一行都有连字符。所以请指出如何在 mySQL 中实现它。

**数据表。**

![在此处输入图像描述](../Images/9bc240767263296558585e2ea9a26f4e.png)

根据图像。我预计 bk_rcost 末尾的值从 2012-10-09 20:29:44 到 2012-10-28 22:33:58 总计等于 203396（如果我总结正确的话）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T17:56:12.333

正如他们之前写的那样，如果您重新设计数据库会更好，但是如果您没有这种可能性，此功能应该可以帮助您

```
delimiter //
DROP function IF EXISTS explode_sum//
create function explode_sum(source varchar(255))
returns integer
deterministic
begin
    declare p int;
    declare l int;
    declare r int;
    declare t int;
    set p = 1;
    set r = 0;
    repeat
        set l = locate('-', source, p);
        if l=0 then
            if p=1 then
                set r = r + source;
            else
                set r = r + substr(source, p, length(source)-p+1);
            end if;
        else
            set r = r + substr(source, p, l-p);
        end if;
        set p = l+1;
    until l=0
    end repeat;
    return(r);
end//
delimiter ; 
```

您可以将其用作任何其他 mysql 函数，因为分隔符是硬编码的

```
select explode_sum(bk_rcost) from table; 
```

# java - 如何迭代Java中的向量并仅存储指定的类？

> ID：13778441
> 
> 赞同：12
> 
> 时间：2012-12-08T14:34:44.607
> 
> 标签：java, iterator

我有一个用例，我需要迭代`Vector`元素并将结果存储在 say 数组中，前提是该实例属于类`method`

有什么容易做到的吗？

目前我正在这样做：

```
 Iterator itr = vec.iterator();
    Iterator element = vec.iterator();

    while(itr.hasNext())
    {
        boolean method = itr.next() instanceof Method;
        if(method)
            System.out.println( "\t" + ( (Method)(element.next()) ).name);
        else
            element.next();
    } 
```

但我认为会有比这更好的方法。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-08T14:43:17.320

假设你有一个类`Method`，那么代码可能是这样的：

```
 List<Method> list = new ArrayList<Method>();
    for (Object obj : vector) {
        if (obj instanceof Method) {
            list.add(obj);
        }
    } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-02-15T09:55:53.333

没有人担心在没有同步的情况下迭代 Vector 吗？

如果`vector`不是线程受限的，在存在另一个线程修改其内容的情况下，for-each 迭代可能会抛出`ConcurrentModificationException`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-06-15T12:00:24.443

在 Java 8 中，您可以调用`.stream()`返回向量元素流的方法，因此可以通过调用 Collector 来存储元素，例如存储在列表中

```
Vector<String> vec = new Vector<>();
vec.add("hello");
vec.add("world");

List<String> list = vec.stream().collect(Collectors.toList()); 
```

# mongodb - Mongodb聚合和日期操作

> ID：13778443
> 
> 赞同：2
> 
> 时间：2012-12-08T14:35:09.497
> 
> 标签：mongodb, mongodb-query, aggregation-framework

考虑一个包含带有日期和计数字段的文档的集合：

```
{ _id: ObjectId("..."), date: ISODate("..."), count: 3} 
```

我想按周查询计数，所以我必须按截断到一周开始的日期对数据进行分组。但似乎没有办法用 mongodb 聚合框架来实现这一点。

我期待能够做这样的事情（`$dateOfWeek`是一个日期运算符，我想在一周的开始截断日期）：

```
db.data.aggregate( [ {$project : { date: {$dateOfWeek: '$date'}, count:1}, 
                     { $group: {_id:'$date', count: {$sum: '$count'}} ]) 
```

但是我没有找到合适的日期操作员来做这件事。

我知道我可以使用 mapreduce 来做到这一点，但是拥有一个日期运算符而不是编写 javascript 代码会更加优雅。

# javascript - 自定义组件上的分页工具栏查询本地数据存储

> ID：13778444
> 
> 赞同：2
> 
> 时间：2012-12-08T14:35:21.940
> 
> 标签：javascript, extjs, view, paging, store

我有一些关于分页存储的问题。

商店将在页面加载时提取大量历史数据。

如果记录数大于 10，那么我需要在自定义组件/视图上实现分页。该视图将使用 Ext.view.View 和 XTemplate 生成。

我想知道我是否可以在自定义组件上使用分页工具栏，以及是否可以查询所有数据都保存在本地的 Store。因此，不是将参数传递给服务器并拉回新数据，而是查询数据存储本身并将结果显示给用户。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T02:56:34.307

可以使用 Ext.ux.data.PagingMemoryProxy 代理。它位于 examples\ux\data\PagingMemoryProxy.js

以下示例向您展示如何在使用 Ext.view.View 和 XTemplate 创建的自定义视图中分页图像：

```
Ext.define('Image', {
    extend: 'Ext.data.Model',
    fields: [
        { name:'src', type:'string' },
        { name:'caption', type:'string' }
    ]
});

Ext.create('Ext.data.Store', {
    id:'imagesStore',
    model: 'Image',
    proxy: {
        type: 'pagingmemory'
    },
    data: [
        { src:'http://www.sencha.com/img/20110215-feat-drawing.png', caption:'Drawing & Charts' },
        { src:'http://www.sencha.com/img/20110215-feat-data.png', caption:'Advanced Data' },
        { src:'http://www.sencha.com/img/20110215-feat-html5.png', caption:'Overhauled Theme' },
        { src:'http://www.sencha.com/img/20110215-feat-perf.png', caption:'Performance Tuned' }
    ],
    pageSize: 2
});

var imageTpl = new Ext.XTemplate(
    '<tpl for=".">',
        '<div style="margin-bottom: 10px;" class="thumb-wrap">',
          '<img src="{src}" />',
          '<br/><span>{caption}</span>',
        '</div>',
    '</tpl>'
);

var store = Ext.data.StoreManager.lookup('imagesStore');
Ext.create('Ext.panel.Panel', {
    title: 'Pictures',
    autoScroll: true,
    height: 300,
    items: {
        xtype: 'dataview',
        store: store,
        tpl: imageTpl,
        itemSelector: 'div.thumb-wrap',
        emptyText: 'No images available'
    },    
    dockedItems: [{
         xtype: 'pagingtoolbar',
         store: store,
         dock: 'bottom',
         displayInfo: true
     }],    
    renderTo: Ext.getBody()
});​ 
```

你可以看到它在 jsfiddle.net 中工作：http: [//jsfiddle.net/lontivero/QHDZU/](http://jsfiddle.net/lontivero/QHDZU/)

我希望这很有用。

祝你好运！

# php - 我如何从 XML 文件中删除子节点

> ID：13778445
> 
> 赞同：0
> 
> 时间：2012-12-08T14:35:21.027
> 
> 标签：php, xml, xpath

我有这个 XML：

```
 <photo>
 <position>1</position>
 <title>panos1</title>
 </photo>

 <photo>
 <position>2</position>
 <title>panos2</title>
 </photo>

 <photo>
 <position>3</position>
 <title>panos3</title>
 </photo>

 <photo>
 <position>4</position>
 <title>panos4</title>
 </photo> 
```

我想 使用 PHP删除`position` 带有值的标签。`4`

我在用着`Xpath`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T15:06:11.543

您可以使用 removeChild()。看这个：

```
<?php
$xml = new DOMDocument();
$xml->formatOutput = true;
$xml->preserveWhiteSpace = false;
$xml->loadXML($str) or die("Error");

// original
echo "<xmp>OLD:\n". $xml->saveXML() ."</xmp>";

// get document element
$root   = $xml->documentElement;
$fnode  = $root->firstChild;

//get a node
$ori    = $fnode->childNodes->item(1);

// remove
$fnode->removeChild($ori);

echo "<xmp>NEW:\n". $xml->saveXML() ."</xmp>";
?> 
```

# php - 测试驱动开发和接口

> ID：13778449
> 
> 赞同：2
> 
> 时间：2012-12-08T14:35:46.560
> 
> 标签：php, unit-testing, testing, phpunit

我将如何对接口进行单元测试，例如以下简单示例：

```
interface My_App_My_Interface
{
    /**
     * @return int
     */
    public function getInteger();

    /**
     * @return string
     */
    public function getString();
} 
```

还有这将如何在我的应用程序测试目录中组织：

`tests > My > App > My > InterfaceTest`??

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T14:38:13.367

你不测试接口。你测试实现。如果接口提供所有必需的功能，则应（由人工）检查接口

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T14:50:32.670

正如 piotrek 所说，你永远不会测试接口，因为它们只是一个合约，里面没有代码。

例如，使用[atoum 测试框架，您可以为](https://github.com/atoum/atoum)**实现**您的接口的类编写代码。

```
namespace mageekguy\atoum\tests;

class TestMyInterfaceImplementation extends atoum\test{
    public function test__construct(){
        $object = new MyObject();
        $this->object($object)->instanceof('MyInterface');
    }
    public function test_getInteger(){
       $object = new MyObject();
        $this->integer($object->getInteger);
    }
 } 
```

由于接口只提供抽象方法，它们无法实例化，因此无法编写测试。

# android - Android应用和耗时的原生代码

> ID：13778450
> 
> 赞同：0
> 
> 时间：2012-12-08T14:35:47.983
> 
> 标签：android, multithreading, java-native-interface

我正在开发一个图像处理 Android 应用程序。假设您有一个 C++ 单例对象，它提供了一些耗时的函数并分配了自己的内存。此外，C++ 库还将提供一些其他功能，这些功能也会执行一些耗时的工作。此函数将由单例对象调用。他们可以分配自己的临时内存（将在函数终止时释放）并且需要与单例对象交换数据。工作流程如下：

1.  加载本地 C++ 库，创建单例对象（它将分配内存并从资产目录加载数据）。
2.  用户，使用应用程序界面，选择图像并加载它
3.  图像被传递给将计算一些信息的单例对象
4.  用户可以请求特定的图像处理算法，要求单例对象调用相应的函数
5.  如果用户加载另一个图像，则从 4 重复或转到 2（将重置单例对象（在步骤 1 中分配的内存将保留到应用程序终止））。

第 2 步和第 3 步是应用程序中最耗时的部分。我希望用户能够在时间过长时停止当前处理，并且应用程序在耗时的处理算法期间保持响应。执行此应用程序的最简单方法是调用本机函数并等待，但这可能会阻塞 UI。另一种方法是设计这些函数来检查每 N 个处理像素的标志，以了解该函数是否必须停止（这将允许我在它发生时释放内存）。第三种选择可能是使用 java 线程，但是如何使用呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T14:52:06.400

您将不得不从 UI 线程运行耗时的任务。您可以使用本机线程执行此操作，但从 java 中的后台线程调用本机函数会更简单 - 您可以通过多种方式来执行此操作，例如异步任务等，您可以阅读相关内容。

当您开始耗时的操作时，您会希望 UI 向用户显示某种忙碌指示符。UI 线程必须保持响应（即用户可以“返回”或“主页”），但如果您愿意，您可以禁用大多数其他控件。

正如您所建议的，您在后台线程中的本机操作会定期检查停止请求标志。您可能会发现将其设为本地标志并使用从 UI 线程调用的另一个（简短）本地函数设置它是最简单的；可以选择将其设置为 java 标志并从 C 调用 java 来检查它，但这似乎更复杂。

如果您的处理将特别冗长，可以说您不仅应该在后台进行工作，还应该在 Android 服务而不是活动的上下文中进行工作。大致而言，本机代码不会关心差异，但是如果活动在处理期间进入后台会发生什么 - 如果工作正在服务中完成（或者更具体地说，如果流程包含一个处于活动状态的服务），Android 将尽可能让它继续运行。相反，如果该进程只有一个活动，而该活动现在因为其他东西在前台而不活动，Android 更有可能杀死它或限制其可用的 CPU。最终，无论您做什么，您的本机代码都需要处理在工作完成之前其进程被终止的可能性 - 即，当用户将您的活动返回到创建新进程时，您必须能够从这种状态中恢复前景。让您的标志也能够通知 onDestroy() 调用的本机代码作为保存其工作的警报可能会有所帮助，但它仍然需要能够从被杀死的情况下恢复（至少干净地重做）该通知的礼貌。

# excel - 未能粘贴到新的 Excel 文件/工作簿中

> ID：13778455
> 
> 赞同：0
> 
> 时间：2012-12-08T14:36:20.977
> 
> 标签：excel, vba

我正在尝试编写一个遍历特定列的脚本，然后将所述列中包含“拒绝”值的所有行复制到新的 Excel 文件/工作簿中。

除了每次都失败的实际粘贴命令外，一切似乎都运行良好。

编码：

子按钮（）

```
 Dim x As String
  Dim found As Boolean
  strFileFullName = ThisWorkbook.FullName
  strFileFullName = Replace(strFileFullName, ".xlsm", "")
  strFileFullName = strFileFullName + "_rejected.xlsx"
 ' MsgBox strFileFullName
  Set oExcel = CreateObject("Excel.Application")
  Set obook = oExcel.Workbooks.Add(1)
  Set oSheet = obook.Worksheets(1)
  oSheet.Name = "Results"

  ' Select first line of data.
  Range("E2").Select
  ' Set search variable value.
  x = "rejected"
  ' Set Boolean variable "found" to false.
  found = False
  ' Set Do loop to stop at empty cell.
  Do Until IsEmpty(ActiveCell)
     ' Check active cell for search value.
     If ActiveCell.Value = "" Then
     Exit Do
     End If
     If ActiveCell.Value = x Then
        found = True

        rowToCopy = ActiveCell.Row
        ActiveSheet.Rows(ActiveCell.Row).Select
        Selection.Copy

        oSheet.Range("A1").Select
        lastrow = oSheet.Cells(Rows.Count, "B").End(xlUp).Row
    '   oSheet.Rows(1).Select.PasteSpcial

     End If
     ' Step down 1 row from present location.
     ActiveCell.Offset(1, 0).Select

      Loop
   ' Check for found.
      If found = True Then
         MsgBox "Value found in cell " & ActiveCell.Address
      Else
         MsgBox "Value not found"
      End If
      obook.SaveAs strFileFullName
      obook.Close
End Sub 
```

知道为什么我的粘贴功能一直失败吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T15:22:36.083

试试这个，不涉及选择。

```
 Sub AddWB()
    Dim nwBk As Workbook, WB As Workbook, Swb As String
    Dim Rws As Long, Rng As Range, c As Range, sh As Worksheet

    Set WB = ThisWorkbook
    Set sh = WB.Worksheets("Sheet1")

    Rws = sh.Cells(Rows.Count, "E").End(xlUp).Row
    Set Rng = Range(sh.Cells(2, 5), sh.Cells(Rws, 5))

    Set nwBk = Workbooks.Add(1)
    Swb = WB.Path & "\" & Mid(WB.Name, 1, Len(WB.Name) - 5) & ".xlsx"
    MsgBox Swb

    For Each c In Rng.Cells
        If c = "x" Then c.EntireRow.Copy nwBk.Sheets(1).Cells(Rows.Count, "A").End(xlUp).Offset(1, 0)
    Next c

    nwBk.SaveAs Filename:=Swb

End Sub 
```

[XLorate.com](http://xlorate.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T16:54:05.737

您的`PasteSpecial`命令可能会因为拼写错误而失败。无论如何，如果你有很多行，你应该考虑一些比遍历它们更快的方法。

这使用 AutoFilter 一次性复制所有符合条件的行。它还将复制标题行。如果这不是您想要的，您可以在复制后删除新工作表的第 1 行：

```
Sub CopyStuff()
Dim SearchString As String
Dim Found As Boolean
Dim wsSource As Excel.Worksheet
Dim wbTarget As Excel.Workbook
Dim wsTarget As Excel.Worksheet
Dim LastRow As Long

Set wsSource = ActiveSheet
SearchString = "rejected"
With wsSource
    Found = Application.WorksheetFunction.CountIf(.Range("E:E"), SearchString) > 0
    If Not Found Then
        MsgBox SearchString & " not found"
        Exit Sub
    End If
    Set wbTarget = Workbooks.Add(1)
    Set wsTarget = wbTarget.Worksheets(1)
    wsTarget.Name = "Results"
    .Range("E:E").AutoFilter
    LastRow = .Range("E" & .Rows.Count).End(xlUp).Row
    .Range("E:E").AutoFilter field:=1, Criteria1:=SearchString
    .Range("E1:E" & LastRow).SpecialCells(xlCellTypeVisible).EntireRow.Copy _
            Destination:=wsTarget.Range("A1")
End With
wbTarget.SaveAs Replace(ThisWorkbook.FullName, ".xlsm", "_rejected.xlsx")
wbTarget.Close
End Sub 
```

我没有使用您的代码来创建一个新的 Excel 实例，因为我看不出这里为什么需要它，而且它可能会导致问题。（例如，你不会杀死原始代码中的实例。）

# jquery - 在这个简单的例子中使用 each() 不起作用

> ID：13778459
> 
> 赞同：2
> 
> 时间：2012-12-08T14:36:31.727
> 
> 标签：jquery

我试图了解如何使用 jquery 的 each()，因为到目前为止我尝试的方法不起作用。

在我的示例中，我尝试在单击任何“特殊”div 时为*第一个元素*`.each()`添加边框。下次单击“特殊” div 时，为*第二个*“特殊”元素添加边框。第三次单击任何“特殊” div 为*第三个元素添加边框，*等等...

 ***JS

```
$.each(function(i) {
     $('.special').click(function(){
         $('.special[i]').css('border','2px solid red');
     }
     i++;
}); 
```

HTML

```
 <div class="special">fooft1</div>
    <div class="special">fooft2</div>
    <div class="special">fooft3</div>
    <div class="special">fooft4</div>
    <div class="special">fooft5</div>
    <div class="special">fooft6</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T14:40:01.493

你不想要`each`这个：

```
(function() {
    var nextIndex = 0;

    $(".special").click(function() {
        $('.special').eq(nextIndex).css('border','2px solid red');
        ++nextIndex;
    });

})(); 
```

*（包装函数的原因是我不想做`nextIndex`一个全局的。如果你的代码**已经**在一个函数中，你不需要额外的包装器。）*

或者，如果特价不是动态的，您可以根据需要在通话之间记住它们：

```
(function() {
    var nextIndex = 0,
        specials = $(".special");

    specials.click(function() {
        specials.eq(nextIndex).css('border','2px solid red');
        ++nextIndex;
    });

})(); 
```

如果您经过最后一个行为，您可能还需要一些行为，例如删除处理程序或类似行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T14:41:12.463

试试这个

```
var i = 0;
$('.special').click(function() {
    $('.special').eq(i).css('border', '2px solid red');
    i++;
}); 
```

工作[**小提琴**](http://jsfiddle.net/videsignz/T8wvS/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T14:43:18.960

```
var i = 0;
$('.special').click(function(){
         $(".special:eq("+i+")").css('border','2px solid red');
     }
     i++;
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-08T14:44:53.837

`.each()`是一个迭代函数。它可以作为`for each`声明的替代品。

此外，您的第二个选择器不正确，`'.special[i]'`这不会被 jQuery 解释。要使其工作，您必须连接变量`'.special[' + i + ']'`。这将使您的代码为集合中的每个元素添加边框。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-08T14:47:37.610

```
$('div.special').each(function(i,e) {
    $(this).click(function() {
        if($(this).hasClass('current')) {
            $(this).css('border', '1px solid red').removeClass('current');
            $(this).next().addClass('current');
        }
   });        
});

<div class="special current">fooft1</div>
<div class="special">fooft2</div>
<div class="special">fooft3</div>
<div class="special">fooft4</div>
<div class="special">fooft5</div>
<div class="special">fooft6</div> 
```

[http://jsfiddle.net/v7gJF/](http://jsfiddle.net/v7gJF/)***

# iphone - 用另一个标签栏替换一个标签栏，就像在 iPhoto 中一样？

> ID：13778465
> 
> 赞同：0
> 
> 时间：2012-12-08T14:37:04.270
> 
> 标签：iphone, objective-c, ios, xcode, uitabbar

我正在使用 Interface Builder 中的故事板开发一个选项卡式应用程序。TabBar的 Stack Overflow 问题[在一个视图中导致第二个视图与另一组标签栏](https://stackoverflow.com/questions/6354005/tabbar-in-one-view-leading-to-a-second-view-with-another-set-of-tabbar)似乎回答或至少与我的问题相关，但不幸的是我不完全理解答案。

UITabBarController 中的第一个选项卡将人们带到主/主视图控制器，它在屏幕上显示一个简短的文本。我想添加一个功能，用户点击屏幕并滑入一个新的标签栏（就像在 iPhoto 中点击已显示的照片时一样），其中包含发送、删除或编辑文本的选项。

我不需要新的标签栏像 iPhoto 中那样是半透明的。

我该怎么做呢？

# php - 如何在php中屏蔽域

> ID：13778466
> 
> 赞同：-4
> 
> 时间：2012-12-08T14:37:10.057
> 
> 标签：php, .htaccess, mod-rewrite

我有一个 php 网站。有一个域示例[http://www.mydomain.com/clubs.php](http://www.mydomain.com/clubs.php)我想将它添加到[http://www.mydomain.com/groups.php](http://www.mydomain.com/groups.php)并且地址的其余部分将保持不变。可能吗。

请指导我如何实现它..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T14:40:23.600

您可以创建一个名为`groups.php`并包含在其中的新文件`clubs.php`。
或者你可以`mod_rewrite`通过`.htaccess`文件使用。

对于包括文件使用：

```
<?php include_once 'clubs.php'; ?> 
```

用于重写使用并将其添加到 line 之后`RewriteEngine On`：

```
RewriteRule ^groups.php$ clubs.php [L] 
```

希望我已经理解你所说的*mask*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T14:47:34.287

使用 Apache mod_rewrite 模块，见下文：

[http://httpd.apache.org/docs/current/mod/mod_rewrite.html](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)

[http://net.tutsplus.com/tutorials/other/using-htaccess-files-for-pretty-urls/](http://net.tutsplus.com/tutorials/other/using-htaccess-files-for-pretty-urls/)

[http://docforge.com/wiki/Clean_URL](http://docforge.com/wiki/Clean_URL)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T14:42:27.430

如果我理解正确，那么您需要使用 apache 指令 URLRewrite (mod_rewrite)。去谷歌上查询。在这里解释起来很复杂，但基本上在 .htaccess 文件中添加几行代码，并且您的网络服务器必须支持它。有些出于安全原因不支持。如果服务器由您管理，那么您可以在 httpd.conf 文件的 VirtualHost 指令中轻松修改它。

格言

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-08T15:48:01.083

您不能“屏蔽”域或 URL。链接指向某个 URL。该 URL 是浏览器找到它应该向其发送请求并发出请求的服务器所必需的。浏览器会将请求发送到该 URL，并将在地址栏中显示它发送请求的 URL。您不能让它向一个 URL 发送请求，而是让它显示不同的 URL。

您可以让您的网络服务器以任何您想要的方式对该 URL/请求作出反应。仅仅因为请求说“clubs.php”并不意味着网络服务器将执行一个名为“clubs.php”的文件，或者它必须执行一些PHP文件。这可以在网络服务器本身中进行定制，通常通过 Apache 中的 URL 重写。这一切都只是网络服务器的内部，但是它配置了您的网络服务器如何响应对某个 URL 的传入请求；它不会“屏蔽” URL。

如果您有指向“clubs.php”的链接，但您希望它们指向“groups.php”，则您必须更改您的链接。没有办法解决它。

您*可以* **将**所有对“clubs.php”的请求重定向到“groups.php”。即，当您的网络服务器收到对“clubs.php”的请求时，它会通过告诉客户端请求“groups.php”来响应客户端。那是一个*重定向*。它仍然会让你的链接指向“clubs.php”。

# php - 获取选择选项值的名称但获取错误的 ID。

> ID：13778467
> 
> 赞同：0
> 
> 时间：2012-12-08T14:37:15.847
> 
> 标签：php, html, option

```
$sql = "SELECT distinct s.doc_id, s.pat_id as pat_id, p.pat_fullname as fullname, p.pat_id from patient p, patientscript s WHERE s.doc_id = '$doc_id' AND s.status = '1' AND s.pat_id = p.pat_id;";
$result = mysql_query($sql) OR
    die("Database Error. MYSQL-Error:".mysql_error()."\n");
echo "<form name='form'> ";
echo "<label>Patient :</label>";
echo "<select name='patname'>";
echo "<option>Select a patient</option>";
while ($row = mysql_fetch_array($result))
{
    $patname = $row['fullname'];    
    $pat_id = $row['pat_id'];
    echo  "<option value='$patname'>$patname</option>"; 
}
echo "</select>";
echo "<input type='button' value='Submit' onClick='get();' >";
echo "<input type='hidden' name='pat_id' value='$pat_id'/>";
echo "</form>";
echo "<div id='showName'></div>"; 
```

Let say, there are 2 echo results from option value, A and B. When select A, I get 12(id) A from output When select B, I get 12(id) B from output Actually the 12 is for B, A是7，任何人都可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T15:02:03.677

试试这个：

(...)

```
echo "<select name='patdata'>";
    echo "<option>Select a patient</option>";
    while ($row = mysql_fetch_array($result))
    {
        $patname = $row['fullname'];    
        $pat_id = $row['pat_id'];
        echo  "<option value='".$patname."-".$pat_id."'>$patname</option>"; 
    }
    echo "</select>";
    echo "<input type='button' value='Submit' onClick='get();' >";
    echo "</form>"; 
```

(...)

然后，*（我假设您在发布后获取结果）*

```
$patdata = explode( '-', $_REQUEST['patdata']);
$patname = $patdata[0];
$pat_id = $patdata[1]; 
```

# c# - 从另一个类问题中调用方法

> ID：13778473
> 
> 赞同：-1
> 
> 时间：2012-12-08T14:37:58.467
> 
> 标签：c#, user-interface, methods

我在从 Employee 类调用方法时遇到问题，我的代码如下，任何建议都值得赞赏。

```
private void exitToolStripMenuItem1_Click(object sender, EventArgs e)
    {
        this.Close();
    }

    private void openToolStripMenuItem_Click(object sender, EventArgs e)
    {
        int num = 0;
        string str = null;
        string str2 = null;
        double num2 = 0.0;
        double num3 = 0.0;

        //code to allow a file to be browed for and opened
        Stream myStream = null;
        OpenFileDialog openFileDialog1 = new OpenFileDialog();

        openFileDialog1.InitialDirectory = "c:\\";
        openFileDialog1.Filter = "text files (*.txt)|*txt";

        if (openFileDialog1.ShowDialog() == DialogResult.OK)
        {
            if ((myStream = openFileDialog1.OpenFile()) != null)
            {
                //the streamreader is named 'data'
                data = new StreamReader(myStream);

                string fileData = "";
                while (fileData != null)
                {
                    fileData = data.ReadLine();
                    if (fileData != null)
                    {
                        num = int.Parse(fileData);
                        str = data.ReadLine();
                        str2 = data.ReadLine();
                        string[] strArray = data.ReadLine().Split(new char[0]);
                        num3 = double.Parse(strArray[0]);
                        num2 = double.Parse(strArray[1]);
                        EmployeeData[count++] = Convert.ToString(new Employee(num, str, str2, num2, num3));
                    }
                }
                NextBtn.Enabled = true;
                numEmployees = count;
                count = 0;
                nameTxtBox.Text = EmployeeData[count].GetName();
                addressTxtBox.Text = Convert.ToString(EmployeeData[count].GetAddress());
                string str4 = string.Format("{0:C}", EmployeeData[count].calcPay());
                payTxtBox.Text = str4;
            }
        }
    }

    private void button1_Click(object sender, EventArgs e)
    {
        count++;
        if (count < this.numEmployees)
        {
            nameTxtBox.Text = EmployeeData[count].GetName();
            addressTxtBox.Text = EmployeeData[count].GetAddress();
            string str = string.Format("{0:C}", EmployeeData[count].calcPay());
            payTxtBox.Text = str;
        }
        else
        {
            NextBtn.Enabled = false;
            nameTxtBox.Clear();
            addressTxtBox.Clear();
            payTxtBox.Clear();
        }

    }

 }
} 
```

我的 Employee 方法如下所示：

```
public class Employee
{
    private string employeeAddress;
    private string employeeName;
    private int employeeNumber;
    private const double FED_TAX = 0.2;
    private const int FULL_TIME = 40;
    private double hourlyWage;
    private double hoursWorked;
    private const double OVER_TIME = 1.5;
    private const double STATE_TAX = 0.075;

    public Employee()
    {
        employeeNumber = 0;
        employeeName = "";
        employeeAddress = "";
        hourlyWage = 0.0;
        hoursWorked = 0.0;
    }

    public Employee(int _num, string _name, string _address, double _hours, double _wage)
    {
        employeeNumber = _num;
        employeeName = _name;
        employeeAddress = _address;
        hourlyWage = _wage;
        hoursWorked = _hours;
    }

    public double calcPay()
    {
        double pay = hoursWorked * hourlyWage;
        double ot = hoursWorked - FULL_TIME;
        if (ot > 0.0)
        {
            pay += ot * (hourlyWage * OVER_TIME);
        }
        double tax1 = pay * FED_TAX;
        double tax2 = pay * STATE_TAX;
        return ((pay - tax1) - tax2);
    }

    public string GetAddress()
    {
        return employeeAddress;
    }

    public double GetHours()
    {
        return hoursWorked;
    }

    public string GetName()
    {
        return employeeName;
    }

    public double GetWage()
    {
        return hourlyWage;
    }
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T14:44:10.997

您的问题似乎是您的`EmployeeData`集合是 type `string`，而不是`Employee`，从而丢失了类实例的所有结构信息。您需要更改集合的类型，以及以下行：

```
 EmployeeData[count++] = Convert.ToString(new Employee(num, str, str2, num2, num3)); 
```

...到：

```
 EmployeeData[count++] = new Employee(num, str, str2, num2, num3); 
```

# arrays - Matlab，矩阵上的定时迭代

> ID：13778483
> 
> 赞同：2
> 
> 时间：2012-12-08T14:39:15.317
> 
> 标签：arrays, matlab, matrix, timer

我正在开发一个模拟器作为一个爱好项目。我遇到问题的特定函数从矩阵中取出一行并每 50 毫秒提供给一个函数，但我是 Matlab 脚本的新手，需要一些帮助。

每次计时器点击时，矩阵中的下一行应提供给函数“simulate_datapoint()”。Simulate_datapoint() 获取行，执行一些计算魔术并更新轨道数组中的复杂“轨道”对象。

这是试图解决这个问题的一种完全倒退的方式，还是我接近一个可行的解决方案？任何帮助将不胜感激。

这是我现在不起作用的东西：

```
function simulate_data(data)
    if ~ismatrix(data)
        error('Input must be a matrix.')
    end

    tracks = tracks_init(); % create an array of 64 Track objects.
    data_size = size(data,1); % number of rows in data.
    i = 0;
    running = 1;

    t = timer('StartDelay', 1, 'Period', 0.05, 'TasksToExecute', data_size, ...
          'ExecutionMode', 'fixedRate');
    t.StopFcn = 'running = 0;';
    t.TimerFcn = 'i = i+1; simulate_datapoint(tracks, data(i,:));';

    disp('Starting timer.')
    start(t);

    while(running==1)
        % do nothing, wait for timer to finish.
    end

    delete(t);
    disp('Execution complete.')
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T22:16:01.863

您非常接近工作原型。一些笔记。

1）您的字符串为 timerFn 和 stopFn 指定的 MATLAB 函数不共享相同的内存地址，因此变量“i”是没有意义的，并且不会在它们之间共享

2) 使用 waitfor(myTimer) 等待...等待计时器。

以下代码应该可以帮助您入门，其中我使用了与调用函数共享范围的“嵌套函数”，因此它们了解并与调用范围共享变量：

```
function simulate

    iterCount = 0;
    running = true;

    t = timer('StartDelay', 1, 'Period', 0.05, 'TasksToExecute', 10, ...
          'ExecutionMode', 'fixedRate');

    t.StopFcn = @(source,event)myStopFn;
    t.TimerFcn = @(source,event)myTimerFn;

    disp('Starting timer.')
    start(t);
    waitfor(t);
    delete(t);
    disp('Execution complete.')

    % These are NESTED functions, they have access to variables in the
    % calling function's (simulate's) scope, like "iterCount"
    % See: http://www.mathworks.com/help/matlab/matlab_prog/nested-functions.html
    function myStopFn
        running = false;
    end
    function myTimerFn
        iterCount = iterCount + 1;
        disp(iterCount);
    end
end 
```

# windows-phone-7 - 如何像 Windows Phone 主页那样实现 tile 重新排列

> ID：13778484
> 
> 赞同：1
> 
> 时间：2012-12-08T14:39:27.983
> 
> 标签：windows-phone-7, windows-phone

我在我的应用程序中使用 HubTile 网格，我希望能够像 Windows Phone 主页那样重新排列（也就是通过点击并按住重新排序项目）磁贴。我遇到了一些类似的东西 - [A Gesture-Driven Windows Phone Todo List](http://www.codeproject.com/Articles/428088/A-Gesture-Driven-Windows-Phone-To-Do-List "手势驱动的 Windows Phone 待办事项列表")，但我不认为它很容易使用。是否有某种开源库或商业产品做得很好。我真的不想自己动手，因为截止日期快到了，我需要尽可能多地利用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T07:25:09.243

最好的方法是使用 WrapPanel。如果您将 Hub Tiles 添加到 WrapPanel，它将为您提供与 Windows Phone 主页相同的效果。以下链接应该可以帮助您了解如何使用 WrapPanel。

[http://www.windowsphonegeek.com/articles/WP7-WrapPanel-in-depth](http://www.windowsphonegeek.com/articles/WP7-WrapPanel-in-depth)

[http://www.kotancode.com/2010/12/29/wp7-presenting-listbox-items-inside-a-wrappanel/](http://www.kotancode.com/2010/12/29/wp7-presenting-listbox-items-inside-a-wrappanel/)

完成后，您可以使用触摸操作来移动 Hub Tiles。

[http://blogs.msdn.com/b/mikeormond/archive/2010/07/08/enabling-touch-manipulations-on-windows-phone.aspx](http://blogs.msdn.com/b/mikeormond/archive/2010/07/08/enabling-touch-manipulations-on-windows-phone.aspx)

首先，将所有 Hub Tiles 分组到 List<> 或 ObservableCollection<> 中。（我建议使用 ObservableCollection）

使用触摸操作来移动 Hub Tile。根据 Hub Tile 的位置（当触摸操作完成时），您可以重新排列 ObservableCollection 中 Hub Tiles 的顺序。更新列表框。

我的意思是，如果 HubTile[3] 被拖动并移动到 Listbox 的顶部，在 List<> 中，将 HubTile[3] 的索引更改为 HubTile[0]，并更新其余的索引HubTiles 的。刷新 ListBox 时，您应该重新排列 HubTiles。

您可以为动画创建故事板。

# android - 如何将一组对象从一个 Activity 发送到另一个？

> ID：13778485
> 
> 赞同：1
> 
> 时间：2012-12-08T14:39:30.913
> 
> 标签：android, class, bundle

我有一个像这样的课程：

```
Class persona implements Serializable {

    int age;
    String name;

} 
```

我的第一个 Activity 填充了一个数组：

```
persona[] p; 
```

然后，我在另一个活动中需要此信息。**我怎样才能发送它？**

我试着做：

```
Bundle b = new Bundle();
b.putSerializable("persona", p); 
```

但我不能。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-08T14:50:13.843

AFAIK 没有任何方法可以将可序列化的数组放入 bundle 中，这是一种使用 parcel 的解决方案

把你的班级改成这个

```
import android.os.Parcel;
import android.os.Parcelable;

public class persona implements Parcelable {

    int age;
    String name;

    public static final Parcelable.Creator<persona> CREATOR = new Creator<persona>() {

        @Override
        public persona[] newArray(int size) {
            // TODO Auto-generated method stub
            return new persona[size];
        }

        @Override
        public persona createFromParcel(Parcel source) {
            // TODO Auto-generated method stub
            return new persona(source);
        }
    };

    public persona(Parcel in) {
        super();
        age = in.readInt();
        name = in.readString();
    }

    public persona() {
        super();
        // TODO Auto-generated constructor stub
    }

    @Override
    public int describeContents() {
        // TODO Auto-generated method stub
        return 0;
    }

    @Override
    public void writeToParcel(Parcel dest, int flags) {
        dest.writeInt(age);
        dest.writeString(name);

    }
} 
```

然后你可以像这样发送数组

```
Bundle b = new Bundle();

b.putParcelableArray("persona", p); 
```

顺便说一句，使用 Parcelable 而不是 Serializable 在 Android 中更有效

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T14:50:39.863

您的班级将需要实施[`Parcelable`](http://developer.android.com/reference/android/os/Parcelable.html). 然后，您可以使用 - 方法将其打包发送[`Bundle.putParcelableArray()`。](http://developer.android.com/reference/android/os/Bundle.html#putParcelableArray%28java.lang.String,%20android.os.Parcelable%5B%5D%29)

此外，一般建议：类名应**始终以**大写开头

# java - 围绕角度上的给定点转动图形

> ID：13778487
> 
> 赞同：1
> 
> 时间：2012-12-08T14:39:45.507
> 
> 标签：java, graphics2d

我画了一个椭圆`g.fillOval (0, 0, 100, 40)`；如何从图形中心以任意角度转动它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T14:42:21.720

使用`Graphics2D`，您可以执行以下操作：

```
Graphics2D g2 = (Graphics2D)g;
g2.rotate(angle, 51, 21); 
```

# mongodb - nil 类的未定义方法“map”

> ID：13778488
> 
> 赞同：2
> 
> 时间：2012-12-08T14:39:46.410
> 
> 标签：mongodb, ruby-on-rails-3.2, mongoid, production

我是新手，在生产模式下使用 mongodb（使用 mongoid）运行 rails 3 服务器时遇到了一些麻烦。在开发模式下一切正常，我无法弄清楚我错过了什么。请帮助我，非常感谢。这是错误：

> ActionView::Template::Error（nil:NilClass 的未定义方法 `map'）：

```
2: #control{:style => "float: left;"}
3:   %h3= t(:manage_shop)
4:   =# debugger
=###### Already checking @shops variable but still got error ######
5:   = hidden_field_tag :shop_list, @shops.blank? ? "test" : @shops.to_json
6:   = form_tag("/shop", :method => "POST", :id => "frm_create_shop") do
7:     %table
8:       %tr 
```

> app/views/shop/index.html.haml:5:in`_app_views_shop_index_html_haml___1855911541554609468_28040500'

这是我的行动：

```
def index
  @shops = Shop.all
  respond_to do |format|
    format.html
  end
end 
```

我的模型：

```
class Shop
  include Mongoid::Document
  include Mongoid::Geospatial

  field :id,          type: Integer
  field :name,        type: String
  field :position,    type: Point, :spatial => true, :delegate => true

  spatial_scope :position
end 
```

和我的 production.rb 配置：

```
Trunk::Application.configure do
  config.cache_classes = true
  config.consider_all_requests_local       = false
  config.action_controller.perform_caching = true
  config.serve_static_assets = false
  config.assets.compress = true
  config.assets.compile = false
  config.assets.digest = true
  config.i18n.fallbacks = true
  config.active_support.deprecation = :notify
end 
```

第二件事是我无法从 db 获得任何东西，尽管一切都在开发模式下运行良好。如果您有什么建议，请帮忙，谢谢。

# c# - Form2.Show（）时如何强制Form2.label1.Text立即出现？

> ID：13778492
> 
> 赞同：0
> 
> 时间：2012-12-08T14:40:04.210
> 
> 标签：c#, forms, label, delay, show

我有这个代码：

```
namespace TuyenTk
{
    public partial class Form1 : Form
    {
        Form2 _form2 = new Form2("");
        public Form1()
        {
            InitializeComponent();
            _form2.Show();
            int i = 0;
            while (i < 5)
            {
                _form2.label1.Text = "" + i;
                Thread.Sleep(500);
                i++;
            }
        }
    }

    public class Form2 : Form
    {
        public System.Windows.Forms.Label label1;
        public System.ComponentModel.Container components = null;

        public Form2()
        {
            InitializeComponent();
        }
        private void InitializeComponent(string t)
        {
            this.label1 = new System.Windows.Forms.Label();
            this.SuspendLayout();
            // 
            // label1
            // 
            this.label1.Location = new System.Drawing.Point(5, 5);
            this.label1.Name = "label1";
            this.label1.Size = new System.Drawing.Size(290, 100);
            this.label1.TabIndex = 0;
            this.label1.Text = t;
            // 
            // Form2
            // 
            this.AutoScaleBaseSize = new System.Drawing.Size(5, 13);
            this.ClientSize = new System.Drawing.Size(300, 100);
            this.ControlBox = false;
            this.Controls.Add(this.label1);
            this.Name = "Form2";
            this.FormBorderStyle = System.Windows.Forms.FormBorderStyle.FixedToolWindow;
            this.ShowInTaskbar = false;
            this.ResumeLayout(false);    
        }
    }
} 
```

当 Form1 运行时，它显示 Form2，但 Form2.label1 背景是白色的，并且没有文字。
2.5 秒后，Form2.label1.Text = 4。所以 i 的值 0、1、2、3 不会出现。我该如何解决？非常感谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T14:56:00.473

您想要做的（定期更新标签）是通过使用 Timer 组件来实现的（您可以将它从 ToolBox 拖放到您的表单上）。

```
public partial class Form1 : Form
{
   Form2 _form2 = new Form2("");
   Timer _timer;
   int _counter;

   public Form1()
   {
       InitializeComponent();          
       _form2.Show();

       if (components == null)
           components = new System.ComponentModel.Container();
       _timer = new Timer(components); // required for correct disposing

       _timer.Interval = 500;
       _timer.Tick += timer_Tick;
       _timer.Start();
   }

   private void timer_Tick(object sender, EventArgs e)
   {
       if (_counter < 5)
       {
          _form2.label1.Text = _counter.ToString();
          _counter++;
          return;
       }

       _timer.Stop();
   } 
```

在其他表单上创建公共控件也不是一个好主意 - 如果您确实需要更新 form2 上的某些值，那么最好在 Form2 类中声明公共方法/属性，这将更新标签：

```
public partial class Form2 : Form
{
     public int Value
     {             
         set { label1.Text = value.ToString(); }
     }
} 
```

还可以考虑将计时器移至 Form2（让此表单自行更新）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T14:54:06.713

如果您`Thread.Sleep(500);`在 UI 线程中调用，则 GUI 将不负责任。这就是为什么你得到你的 Fomr2.label1 的背景白色。我建议你移动你的代码

```
while (i < 5)
{
   _form2.label1.Text = "" + i;
   Thread.Sleep(500);
   i++;
} 
```

到另一个线程。您可以参考此[链接](https://stackoverflow.com/questions/661561/how-to-update-the-gui-from-another-thread-in-c)来实现您的目标。

# macos - 动态库和 OSX 应用程序

> ID：13778493
> 
> 赞同：0
> 
> 时间：2012-12-08T14:40:05.147
> 
> 标签：macos, dll

我正在构建需要一组动态库才能运行的 OS X 应用程序（Graphviz 库）。在我正在开发的机器上工作正常，但是当我尝试在另一台机器上运行应用程序时，应用程序崩溃（这并不让我感到惊讶）可能是因为它没有找到库，它们安装在不同的位置。

我的问题是确保您的程序有效的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T14:57:06.277

[Graphviz 库](http://www.graphviz.org/Download_macos.php) *应该*安装到“ `/usr/local`”中，[但可以安装在其他地方](http://www.phil.uu.nl/~js/graphviz/)。

有一些方法可以在您构建的应用程序包中包含 dylib（[这个相关问题的答案有更多信息](https://stackoverflow.com/questions/9098926/can-i-include-dylib-s-in-my-executable)），但是在 Xcode 中设置构建步骤/阶段以在构建时执行额外步骤有点麻烦（例如调用“ `install_name_tool`”指向“ `@executable_path`”）。

如果您的应用程序要安装在不多的机器上，我建议您确保 Graphviz 已正确安装到预期的位置。如果你打算广泛地分发这个应用程序，你最好在你的应用程序包中包含 Graphviz dylibs。第三个（可能的）选项可能是将 Graphviz 安装程序作为您创建的安装程序的子安装程序调用。

# c# - 处理 ashx 处理程序 POST 结果

> ID：13778496
> 
> 赞同：0
> 
> 时间：2012-12-08T14:40:26.210
> 
> 标签：c#, javascript, asp.net, iframe, handler

我在 Web 表单中嵌入了一个 IFrame，IFrame 有一个调用 ashx 处理程序的提交按钮，该处理程序执行服务器端工作并通过以下方式返回响应调用：

```
 context.Response.ContentType = contentType;
 context.Response.Write(someResultData); 
```

如何从 IFrame 外部或内部捕获客户端的此响应？我可以使用 javascript 来做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T14:51:34.917

是的，您可以使用 JavaScript 来做到这一点。如果你使用[jQuery](http://api.jquery.com/)，它很简单：

```
$.post("your/file", function(data) {
       // data should contain your response
 }); 
```

您必须将事件处理程序附加到提交按钮单击处理程序，或表单提交事件并在该事件处理程序方法中执行上述操作。

# java - finally 块会在主线程以外的线程中执行吗？

> ID：13778499
> 
> 赞同：0
> 
> 时间：2012-12-08T14:40:32.430
> 
> 标签：java, multithreading

```
public class Test {
    public static void main(String args[]) throws Exception{
        try{        
            System.out.print("1");
            throw new Exception("first");
        }   
        catch (Exception e) {
            System.out.print("2");
            throw new Exception("second");      
        }
        **finally**{
            System.out.print("3");
            try{
                System.out.print("4");              
            }catch (Exception e) {
                System.out.print("5");
                throw new Exception("third");
            }
            finally{
                System.out.print("6 ");             
            }
        }
    }   
} 
```

**首次运行时输出：**

```
12Exception in thread "main" 346 java.lang.Exception: second
    at src.dec.TST501.main(TST501.java:11) 
```

**第二次运行的输出：**

```
12346 Exception in thread "main" java.lang.Exception: second
    at src.dec.TST501.main(TST501.java:11) 
```

第三次运行时输出：线程“main”中的 1Exception java.lang.Exception：src.dec.TST501.main(TST501.java:11) 处的第二个 2346

谁能解释一下它是怎么发生的？finally 块是否将在除 main 之外的任何其他线程中执行？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-08T14:45:39.270

该`finally`块在同一个线程上执行。输出以这种方式交错的原因与标准输出和标准错误输出数据的方式有关。

标准输出是缓冲的（而标准错误不是），因此输出的交错方式取决于系统何时选择刷新输出缓冲区。（由于您的终端仿真器只是将这两个流一起显示，因此您会得到观察到的混合输出。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T08:16:16.617

就是因为`System.err`比 慢`System.out`，改成System.err，你会 `12346 Exception in thread "main" java.lang.Exception: second at Test.main(Test.java:8)` 一直看到

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-12-08T14:43:48.923

发生这种情况是因为您的两个 finally 块都将在执行的任何情况下执行，无论是否出现任何异常

# php - 将视图子文件夹路由到zend中的控制器

> ID：13778507
> 
> 赞同：3
> 
> 时间：2012-12-08T14:41:28.733
> 
> 标签：php, zend-framework, zend-framework-routing

Zend 新手在这里。

我的视图中有一个管理文件夹链接到管理控制器，但我需要管理视图中的子文件夹来处理各种功能。

例如：views/scripts/admin 我也想要views/scripts/admin/linksfunction 或views/scripts/admin/adduserfunction。

我的问题是，如何将这些子目录与我的控制器挂钩？我希望在 AdminController 甚至单独的控制器中处理这些功能。有谁知道我将如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T17:25:33.707

有几种方法可以实现这一点。

如果您对每个功能都有一个操作（adduserfunction 和 linksfunction），您可以使用`viewAction helper` [Action View Helper](http://framework.zend.com/manual/1.12/en/zend.view.helpers.html#zend.view.helpers.initial.action)
From `views/scripts/admin.index.phtml`call`echo $this->action('adduserfunction', 'admin')`和`echo $this->action( 'linksfunction', 'admin')`. 这会将整个动作呈现给视图。它非常简单和方便。但是视图动作助手被认为是非常昂贵的。检查此 ZF 手册[performance.view.action](http://framework.zend.com/manual/1.12/en/performance.view.html#performance.view.action)

另一种方法是使用[Actionstack](http://framework.zend.com/manual/1.12/en/zend.controller.actionhelpers.html#zend.controller.actionhelpers.actionstack)，您可以在其中将多个操作添加到堆栈并按顺序执行。

另一种方法是使用[Partial Helper](http://framework.zend.com/manual/1.12/en/zend.view.helpers.html#zend.view.helpers.initial.partial)或[Zend_View 的 render()](http://framework.zend.com/manual/1.12/en/zend.view.scripts.html)。仅在真正需要时才使用 partial()，因为它非常昂贵。

这些资源可以帮助您
[什么时候使用 viewscripts/partials 与 view helpers](https://stackoverflow.com/questions/2389531/zend-framework-when-to-use-viewscripts-partials-vs-view-helpers)
[为什么 Zend Framework Actionstack 是邪恶的](http://www.rmauger.co.uk/2009/03/why-the-zend-framework-actionstack-is-evil/)

# php - 使用 htaccess 将 PHP 文件名重写为 cgi 并拒绝访问 php 文件

> ID：13778510
> 
> 赞同：0
> 
> 时间：2012-12-08T14:41:46.537
> 
> 标签：php, .htaccess

我用下面的 htaccess 代码重写了 php 文件的文件名：

```
ErrorDocument 404 /notfound.html

AddType application/x-httpd-php .cgi
RewriteEngine on 
RewriteCond %{QUERY_STRING} mosConfig_[a-zA-Z_]{1,21}(=|\%3D) [OR]
RewriteCond %{QUERY_STRING} base64_encode[^(]*\([^)]*\) [OR]
RewriteCond %{QUERY_STRING} (<|%3C)([^s]*s)+cript.*(>|%3E) [NC,OR]
RewriteCond %{QUERY_STRING} GLOBALS(=|\[|\%[0-9A-Z]{0,2}) [OR]
RewriteCond %{QUERY_STRING} _REQUEST(=|\[|\%[0-9A-Z]{0,2})

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php [F,L]
RewriteRule ^(.*)\.cgi $1\.php 
```

***我想做什么：***我也可以限制对 php 文件的访问吗？例如，如果访问者想看`page.php`得到 404 错误，而当想看`main.cgi`页面时可以看到没有错误的页面，这可能吗？
如果我不能只用 htaccess 做到这一点，最好的解决方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T14:53:56.060

您可以通过将 php 文件放在公共文件夹之外来实现您想要的，而不是让您的 index.php 文件包含它们

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php [F,L] 
```

在 index.php 中类似

```
$validFiles = array('page', 'about', 'gallery');

$requestedFile = str_replace('.cgi', '', trim($_SERVER['REQUEST_URI'], '/');

if(in_array($requestedFile, $validFiles ))
{
    // ../ goes into the parent folder, and code is a sibling of your public folder
    include '../code/'.$requestedFile.'.php';
}
else
{
    // file not found stuff or index here
} 
```

尽管我会质疑您为什么需要使用 .cgi 扩展名，但这与您的主机有关，还是与旧要求有关？因为使用 htaccess，您可以拥有干净的网址，例如

mydomain.com/products/widget/

# wpf - 将 SelectedPath 属性与 WPF TreeView 中的 SelectedItem 同步

> ID：13778515
> 
> 赞同：4
> 
> 时间：2012-12-08T14:42:18.350
> 
> 标签：wpf, treeview, selecteditem

我正在尝试创建一个`SelectedPath`与 WPF 同步的属性（例如在我的视图模型中）`TreeView`。理论如下：

*   每当树视图中的选定项发生更改（`SelectedItem`属性/`SelectedItemChanged`事件）时，更新`SelectedPath`属性以存储一个字符串，该字符串表示选定树节点的整个路径。
*   每当`SelectedPath`更改属性时，找到路径字符串指示的树节点，将整个路径展开到该树节点，并在取消选择之前选择的节点后选择它。

为了使所有这些可重现，让我们假设所有树节点都是类型`DataNode`（见下文），每个树节点都有一个在其父节点的子节点中唯一的名称，并且路径分隔符是单个正斜杠`/`。

更新事件中的`SelectedPath`属性`SelectedItemChange`不是问题 - 以下事件处理程序可以完美运行：

```
void TreeView_SelectedItemChanged(object sender, RoutedPropertyChangedEventArgs<object> e)
{
    DataNode selNode = e.NewValue as DataNode;
    if (selNode == null) {
        vm.SelectedPath = null;
    } else {
        vm.SelectedPath = selNode.FullPath;
    }
} 
```

但是，我无法使相反的方式正常工作。因此，我的问题是，基于下面的通用和最小化代码示例：**如何使 WPF 的 TreeView 尊重我对项目的编程选择？**

现在，我走了多远？首先TreeView的[`SelectedItem`属性](http://msdn.microsoft.com/en-us/library/system.windows.controls.treeview.selecteditem.aspx)是只读的，所以不能直接设置。我发现并阅读了许多深入讨论此问题的 SO 问题（例如[this](https://stackoverflow.com/questions/413890/how-to-programmatically-select-an-item-in-a-wpf-treeview)、[this](https://stackoverflow.com/questions/9177946/change-the-selected-item-of-a-treeview-in-wpf)或[this](https://stackoverflow.com/questions/940243/how-to-select-treeview-item-from-code)），以及其他站点上的资源，例如[this blogpost](http://quickduck.com/blog/2008/12/11/selecting-an-item-in-a-treeview-in-wpf/)、[this article](http://www.codeproject.com/Articles/26288/Simplifying-the-WPF-TreeView-by-Using-the-ViewMode)或[this blogpost](http://blogs.msdn.com/b/hulyap/archive/2008/07/07/setting-treeview-selecteditem-in-code.aspx)。

几乎所有这些资源都指向定义一种样式，将's 的属性`TreeViewItem`绑定到视图模型中底层树节点对象的等效属性。有时（例如[here](https://stackoverflow.com/questions/413890/how-to-programmatically-select-an-item-in-a-wpf-treeview)和[here](https://stackoverflow.com/questions/940243/how-to-select-treeview-item-from-code)），绑定是双向的，有时（例如[here](http://blogs.msdn.com/b/hulyap/archive/2008/07/07/setting-treeview-selecteditem-in-code.aspx)和[here](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/7e368b93-f509-4cd6-88e7-561e8d3246ae/)）它是单向绑定。我没有看到将其设为单向绑定的意义（如果树视图 UI 以某种方式取消选择该项目，则该更改当然应该反映在底层视图模型中），因此我已经实现了双向绑定版本。（通常建议使用相同的方法，因此我还为此添加了一个属性。）`TreeViewItem``IsSelected``IsExpanded`

这是`TreeViewItem`我正在使用的风格：

```
<Style TargetType="{x:Type TreeViewItem}" BasedOn="{StaticResource {x:Type TreeViewItem}}">
    <Setter Property="IsSelected" Value="{Binding IsSelected, Mode=TwoWay}"/>
    <Setter Property="IsExpanded" Value="{Binding IsExpanded, Mode=TwoWay}"/>
</Style> 
```

我已经确认实际应用了这种样式（如果我添加一个 setter 将`Background`属性设置为`Red`，所有树视图项都显示为红色背景）。

这是简化和通用的`DataNode`类：

```
public class DataNode : INotifyPropertyChanged
{
    public DataNode(DataNode parent, string name)
    {
        this.parent = parent;
        this.name = name;
    }

    private readonly DataNode parent;

    private readonly string name;

    public string Name {
        get {
            return name;
        }
    }

    public override string ToString()
    {
        return name;
    }

    public string FullPath {
        get {
            if (parent != null) {
                return parent.FullPath + "/" + name;
            } else {
                return "/" + name;
            }
        }
    }

    protected virtual void OnPropertyChanged(PropertyChangedEventArgs e)
    {
        if (PropertyChanged != null) {
            PropertyChanged(this, e);
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;

    private DataNode[] children;

    public IEnumerable<DataNode> Children {
        get {
            if (children == null) {
                children = DataSource.GetChildNodes(FullPath).Select(s => new DataNode(this, s)).ToArray();
            }

            return children;
        }
    }

    private bool isSelected;

    public bool IsSelected {
        get {
            return isSelected;
        }
        set {
            if (isSelected != value) {
                isSelected = value;
                OnPropertyChanged(new PropertyChangedEventArgs("IsSelected"));
            }
        }
    }

    private bool isExpanded;

    public bool IsExpanded {
        get {
            return isExpanded;
        }
        set {
            if (isExpanded != value) {
                isExpanded = value;
                OnPropertyChanged(new PropertyChangedEventArgs("IsExpanded"));
            }
        }
    }

    public void ExpandPath()
    {
        if (parent != null) {
            parent.ExpandPath();
        }
        IsExpanded = true;
    }
} 
```

如您所见，每个节点都有一个名称，一个对其父节点的引用（如果有的话），它懒惰地初始化它的子节点，但只有一次，它有一个`IsSelected`和一个`IsExpanded`属性，两者都从接口触发`PropertyChanged`事件`INotifyPropertyChanged`.

因此，在我的视图模型中，该`SelectedPath`属性的实现方式如下：

```
 public string SelectedPath {
        get {
            return selectedPath;
        }
        set {
            if (selectedPath != value) {
                DataNode prevSel = NodeByPath(selectedPath);
                if (prevSel != null) {
                    prevSel.IsSelected = false;
                }

                selectedPath = value;

                DataNode newSel = NodeByPath(selectedPath);
                if (newSel != null) {
                    newSel.ExpandPath();
                    newSel.IsSelected = true;
                }

                OnPropertyChanged(new PropertyChangedEventArgs("SelectedPath"));
            }
        }
    } 
```

该`NodeByPath`方法正确（我已经检查过）检索`DataNode`任何给定路径字符串的实例。尽管如此，当将 a 绑定`TextBox`到`SelectedPath`视图模型的属性时，我可以运行我的应用程序并看到以下行为：

*   type `/0`=> item`/0`被选中并展开
*   type `/0/1/2`=> item`/0`保持选中状态，但 item`/0/1/2`被扩展。

同样，当我第一次将选定路径设置为 时`/0/1`，该项目会被正确选择和扩展，但对于任何后续路径值，项目只会被扩展，从未被选中。

调试了一段时间后，我*认为*`SelectedPath`问题是该行中setter的递归调用`prevSel.IsSelected = false;`，但是添加一个标志会阻止在执行该命令时执行setter代码似乎并没有改变程序的行为一点也不。

那么，**我在这里做错了什么？我看不出我在哪里做的事情与所有这些博文中的建议不同。是否需要以某种方式通知 TreeView`IsSelected`新选择项的新值？**

为了您的方便，构成独立的最小示例的所有 5 个文件的完整代码（在此示例中数据源显然返回虚假数据，但它返回一个常量树，因此使上述测试用例可重现）：

* * *

**数据节点.cs**

```
using System;
using System.ComponentModel;
using System.Collections.Generic;
using System.Linq;

namespace TreeViewTest
{
    public class DataNode : INotifyPropertyChanged
    {
        public DataNode(DataNode parent, string name)
        {
            this.parent = parent;
            this.name = name;
        }

        private readonly DataNode parent;

        private readonly string name;

        public string Name {
            get {
                return name;
            }
        }

        public override string ToString()
        {
            return name;
        }

        public string FullPath {
            get {
                if (parent != null) {
                    return parent.FullPath + "/" + name;
                } else {
                    return "/" + name;
                }
            }
        }

        protected virtual void OnPropertyChanged(PropertyChangedEventArgs e)
        {
            if (PropertyChanged != null) {
                PropertyChanged(this, e);
            }
        }

        public event PropertyChangedEventHandler PropertyChanged;

        private DataNode[] children;

        public IEnumerable<DataNode> Children {
            get {
                if (children == null) {
                    children = DataSource.GetChildNodes(FullPath).Select(s => new DataNode(this, s)).ToArray();
                }

                return children;
            }
        }

        private bool isSelected;

        public bool IsSelected {
            get {
                return isSelected;
            }
            set {
                if (isSelected != value) {
                    isSelected = value;
                    OnPropertyChanged(new PropertyChangedEventArgs("IsSelected"));
                }
            }
        }

        private bool isExpanded;

        public bool IsExpanded {
            get {
                return isExpanded;
            }
            set {
                if (isExpanded != value) {
                    isExpanded = value;
                    OnPropertyChanged(new PropertyChangedEventArgs("IsExpanded"));
                }
            }
        }

        public void ExpandPath()
        {
            if (parent != null) {
                parent.ExpandPath();
            }
            IsExpanded = true;
        }
    }
} 
```

* * *

**数据源.cs**

```
using System;
using System.Collections.Generic;

namespace TreeViewTest
{
    public static class DataSource
    {
        public static IEnumerable<string> GetChildNodes(string path)
        {
            if (path.Length < 40) {
                for (int i = 0; i < path.Length + 2; i++) {
                    yield return (2 * i).ToString();
                    yield return (2 * i + 1).ToString();
                }
            }
        }
    }
} 
```

* * *

**视图模型.cs**

```
using System;
using System.ComponentModel;
using System.Collections.Generic;
using System.Linq;

namespace TreeViewTest
{
    public class ViewModel : INotifyPropertyChanged
    {
        private readonly DataNode[] rootNodes = DataSource.GetChildNodes("").Select(s => new DataNode(null, s)).ToArray();

        public IEnumerable<DataNode> RootNodes {
            get {
                return rootNodes;
            }
        }

        private DataNode NodeByPath(string path)
        {
            if (path == null) {
                return null;
            } else {
                string[] levels = selectedPath.Split(new[] { '/' }, StringSplitOptions.RemoveEmptyEntries);
                IEnumerable<DataNode> currentAvailable = rootNodes;
                for (int i = 0; i < levels.Length; i++) {
                    string node = levels[i];
                    foreach (DataNode next in currentAvailable) {
                        if (next.Name == node) {
                            if (i == levels.Length - 1) {
                                return next;
                            } else {
                                currentAvailable = next.Children;
                            }
                            break;
                        }
                    }
                }

                return null;
            }
        }

        private string selectedPath;

        public string SelectedPath {
            get {
                return selectedPath;
            }
            set {
                if (selectedPath != value) {
                    DataNode prevSel = NodeByPath(selectedPath);
                    if (prevSel != null) {
                        prevSel.IsSelected = false;
                    }

                    selectedPath = value;

                    DataNode newSel = NodeByPath(selectedPath);
                    if (newSel != null) {
                        newSel.ExpandPath();
                        newSel.IsSelected = true;
                    }

                    OnPropertyChanged(new PropertyChangedEventArgs("SelectedPath"));
                }
            }
        }

        public event PropertyChangedEventHandler PropertyChanged;

        protected virtual void OnPropertyChanged(PropertyChangedEventArgs e)
        {
            if (PropertyChanged != null) {
                PropertyChanged(this, e);
            }
        }
    }
} 
```

* * *

**Window1.xaml**

```
<Window x:Class="TreeViewTest.Window1"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="TreeViewTest" Height="450" Width="600"
    >
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <TreeView ItemsSource="{Binding RootNodes}" SelectedItemChanged="TreeView_SelectedItemChanged">
            <TreeView.Resources>
                <Style TargetType="{x:Type TreeViewItem}" BasedOn="{StaticResource {x:Type TreeViewItem}}">
                    <Setter Property="IsSelected" Value="{Binding IsSelected, Mode=TwoWay}"/>
                    <Setter Property="IsExpanded" Value="{Binding IsExpanded, Mode=TwoWay}"/>
                </Style>
            </TreeView.Resources>
            <TreeView.ItemTemplate>
                <HierarchicalDataTemplate ItemsSource="{Binding Children}">
                    <TextBlock Text="{Binding .}"/>
                </HierarchicalDataTemplate>
            </TreeView.ItemTemplate>
        </TreeView>
        <TextBox Grid.Row="1" Text="{Binding SelectedPath, Mode=TwoWay}"/>
    </Grid>
</Window> 
```

* * *

**Window1.xaml.cs**

```
using System;
using System.Windows;

namespace TreeViewTest
{
    public partial class Window1 : Window
    {
        public Window1()
        {
            InitializeComponent();

            DataContext = vm;
        }

        void TreeView_SelectedItemChanged(object sender, RoutedPropertyChangedEventArgs<object> e)
        {
            DataNode selNode = e.NewValue as DataNode;
            if (selNode == null) {
                vm.SelectedPath = null;
            } else {
                vm.SelectedPath = selNode.FullPath;
            }
        }

        private readonly ViewModel vm = new ViewModel();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T14:25:00.093

我无法重现您描述的行为。您发布的与 TreeView 无关的代码存在问题。TextBox 默认 UpdateSourceTrigger 是 LostFocus 因此 TreeView 只有在 TextBox 失去焦点后才会受到影响，但您的示例中只有两个控件，因此要使 TextBox 失去焦点，您必须在 TreeView 中选择某些内容（然后整个选择过程就搞砸了）。

我所做的是在表单底部添加一个按钮。该按钮什么也不做，但单击时 TextBox 失去焦点。现在一切正常。

我使用 .Net 4.5 在 VS2012 中编译它

# php - PHP & MySQL 用户登录和权限系统

> ID：13778521
> 
> 赞同：0
> 
> 时间：2012-12-08T14:42:41.533
> 
> 标签：php, mysql

我有一个使用 PHP 和 MySQL 设置的网站的用户登录系统。我的问题是我是否可以修改我现在拥有的东西，以创建一个“权限”系统。换句话说，只为用户显示某些控件，而为管理员显示不同的控件。在我的 mysql 表中，我有列`'id'`、`'username'`、`'password'`和一个带有 'a'、'b' 的 ENUM 'permissions'。'a' 是默认值（不是管理员）。下面我将向您展示我尝试过的方法。

这个文件是“ `checklogin.php`”（为了节省空间我不会添加所有代码）

```
//First I include variables to connect to the database & connect
//Then I define username and password as $_POST from a form on an earlier page
$user=a;
$admin=b;
$sql="SELECT * FROM $tbl_name WHERE username='$myusername' and password='$mypassword' and permissions='$user'";
$sqladmin="SELECT * FROM $tbl_name WHERE username='$myusername' and password='$mypassword' and permissions='$admin'";
$result=mysql_query($sql);
$resultadmin=mysql_query($sqladmin);

$count=mysql_num_rows($result);
$countadmin=mysql_num_rows($resultadmin);

// If result matched $myusername and $mypassword, table row must be 1 row
if($count==1){
 // Register $myusername, $mypassword and redirect to file "login_success.php"
 session_register("myusername");
 session_register("mypassword"); 
 session_register("user"); 
 header("location:login_success.php");
}
else {
  if($countadmin==1){
   session_register("myusername");
   session_register("mypassword"); 
   session_register("admin"); 
   header("location:login_success.php");
  }
  else {
    if($count==0) {
      if($countadmin==0) {
       echo "Wrong Username or Password";
      }
    }
  }
} 
```

所以在这个文件中，我正在检查表中有多少行与用户输入匹配，以及它是否是管理员，如果有，那么我使用用户名、密码和权限注册一个会话。

接下来，我有文件“ `login_success.php`”

```
<?php
session_start();
if(!session_is_registered(myusername)){
 header("location:main_login.php");
}
else {
}
?>
<html>
<body>
Login Successful

<?php
if(session_is_registered(admin)){
echo "Welcome Admin!";
}
else {
echo "Not admin...";
}
?> 
```

上面的代码只是检查会话是否已注册，如果没有，则将您发送回登录表单。下面是一段代码，用于检查用户是否为管理员。这个工作的登录部分我只是无法计算出权限。

所以最后，我想我的问题是为什么这不起作用？这似乎在逻辑上是正确的。很抱歉这篇冗长的帖子。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T14:53:36.663

首先，您正在使用 deprecated `session_register,session_is_registered`。PHP 手册建议使用`$_SESSION`. `session_is_registered`需要字符串，但您不传递字符串 - 它应该类似于`session_is_registered("admin")`，而不是`session_is_registered(admin)`

另外，我认为您可以改进整个例程：

1.  从数据库读取`SELECT * FROM $tbl_name WHERE username='$myusername'`（假设 $myusername 正确转义）；
2.  如果记录不存在，则用户名无效
3.  检查密码（或从安全角度来看更好的哈希和）是否与存储的值匹配。如果不是，您可能需要增加“failed_login_attempts”字段
4.  然后检查权限。我猜客户可能有超过 1 个角色。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T14:56:43.923

首先，您对引号很懒惰，例如在以下几行中：

```
$user=a;
$admin=b;
if(!session_is_registered(myusername)){ 
```

但我不知道这是否是问题所在。

其次，您需要`session_start()`在使用会话之前调用。

为什么不直接执行以下查询？

```
SELECT * FROM $tbl_name WHERE username='$myusername' and password='$mypassword' 
```

然后您可以读取返回的权限，而不必摆弄复杂的双重查询设置。当然，您必须确保没有重复的用户名，但情况总是如此。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T14:51:50.177

我建议您遵循以下逻辑：如果用户在其中一个列中有“a”，那么您对他的待遇不同。这意味着每个用户仍然只有一行。只有一个会话。相同的数据结构。同一届。但是根据“权限”列的价值，您可以在应用程序中为他打开更多“门”。您要做的就是检查他的会话的“权限”是否设置为“a”或将他标识为管理员的任何内容。

希望这可以帮助。格言

# actionscript-3 - AS3：导出air文件后加载XML不起作用？

> ID：13778524
> 
> 赞同：0
> 
> 时间：2012-12-08T14:43:11.683
> 
> 标签：actionscript-3

```
import flash.events.Event;
import flash.net.URLLoader;
import flash.net.URLRequest;

names();

function names()
{

var url:URLRequest = new URLRequest("http://artbeatmedia.net/application/xmlkpisname.php?username=adel_artbeat&password=ADL1530");
url.contentType = "text/xml";
url.method = URLRequestMethod.POST;
var loader:URLLoader = new URLLoader();
loader.load(url);
loader.addEventListener(Event.COMPLETE, onLoadComplete);

}
function onLoadComplete(event:Event):void
{
trace('good');
} 
```

我使用 adobe air 使用 as3 加载 xml，此代码仅适用于 .fla 文件，但是当我导出 .air 文件时它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T01:13:05.580

发布 AiR 应用程序时是否包含 XML 文件？曾经发生在我身上，忘记在发布对话中包含文件....我生命中的一个小时，我永远不会回来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T18:12:35.190

Vizzy 跟踪器仍将捕获来自 Air 应用程序的跟踪调用。[从 Google 代码中获取 Vizzy](http://code.google.com/p/flash-tracer/)

我刚刚尝试了没有修改的代码，它工作得很好，所以我想你的问题只是一个失败的追踪。试一试，Vizzy 甚至显示来自 Flash IDE 的跟踪，所以看看会发生什么。如果仍然失败，则可能是一些连接/权限问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T17:02:43.467

如果您导出程序，跟踪消息将不可见。你仍然可以使用 MonsterDebugger，但这是一个安全隐患。

# r - 如何（在 pca 之后）在对象中仅使用一个向量？

> ID：13778532
> 
> 赞同：0
> 
> 时间：2012-12-08T14:43:58.267
> 
> 标签：r, pca

我觉得有点像个笨蛋......

好吧，我有一个 pca（我使用过 prcomp），我正在寻找协方差矩阵的特征向量。我知道我得到那些使用轮换的人。旋转给了我一个由特征向量组成的矩阵。但是，如果我只想打印（或用于任何其他目的）这些特征向量中的一个：我该如何称呼它？我知道我可以使用 print (mypcqobject$rotation) 打印所有这些，但如果我只想要一个怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T14:49:59.957

您将子集 $rotation 对象。你要哪个向量？

```
> prcomp(USArrests, scale=T)$rotation[1,]    # Murder row
       PC1        PC2        PC3        PC4 
-0.5358995  0.4181809 -0.3412327  0.6492278 
> prcomp(USArrests, scale=T)$rotation[,1]    # PC1 column
    Murder    Assault   UrbanPop       Rape 
-0.5358995 -0.5831836 -0.2781909 -0.5434321 
```

# matlab - 将图像作为变量导入 Matlab 时出错

> ID：13778541
> 
> 赞同：2
> 
> 时间：2012-12-08T14:45:14.350
> 
> 标签：matlab, input, tiff

我想使用文件/导入数据工具将 tif 图像作为变量导入 Matlab 工作区。但我收到以下错误“警告：标签 SamplesPerPixel 的数据类型应该是 TIFF_SHORT 而不是 TIFF_LONG。这可能会导致数据损坏”。图像类型为单浮点，32 位。而且尺寸真的很大（4144,12619,7）。matlab可以读取并显示这样的图像。这个错误是什么意思？我该如何纠正？

太感谢了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T19:38:42.453

阅读[TIFF 规范](http://partners.adobe.com/public/developer/en/tiff/TIFF6.pdf)。

从警告消息看来，所选格式存在一些问题。读取 TIFF 文件时，每个 IFD 都有许多条目，其中之一是 SamplesPerPixel（参见规范的第 24 页）。这应该是 SHORT 类型（有关类型列表及其是什么，请参见第 15 页）。但是，显然，您在那里输入了 LONG。这似乎引起了问题。matlab 识别不正确，或者您用于保存图像的软件未遵循 TIFF 规范。

# xml - XML 结构 - 1 个文件还是多个？

> ID：13778542
> 
> 赞同：1
> 
> 时间：2012-12-08T14:45:17.003
> 
> 标签：xml, file, structure

只是想知道您当前的最佳实践或您的偏好对 XML 文件的要求是什么？

目前，我有一个系统（Java），它读取一个目录，遍历文件并将 XML 提取到对象中。每个用户都有自己的 XML 文件：

用户 0.xml -->`<user id="0" username="UserName1" password="whatever">`

用户 1.xml -->`<user id="1" username="UserName2" password="whatever" />`

问题是当我执行大量时，反序列化这些文件会变得很慢。（10,000 在我的笔记本电脑上大约需要 5 秒）。我正在尝试对我的系统进行未来证明，以便它可以处理数千个 XML 文档（我计划使用相同的方法来编写一个可以想象有数千个线程/回复等的论坛系统）。

将它们全部保存在一个 XML 文件中然后反序列化会更容易/更好/更安全/更快（请建议）吗？

用户.xml -->`<user id="0" username="UserName1" password="whatever" /><user id="1" username="UserName2" password="whatever" />`

附言。请注意，我正在加密密码。

编辑：格林威治标准时间 08/12/2012 21:17 我已经使用 DOM 解析器和 stax 实现对此进行了测试。在这两种情况下，瓶颈肯定是文件系统查找。

对于 10k 个文件，stax 和 DOM 解析器的粗略时间约为 5 - 6 秒和 6 ~ 7 秒。

当我们使用单个 XML 文件时，时间会**急剧下降。**DOM 解析器约为 1.5 秒，stax 约为 650 毫秒。

哦，好吧......看起来我正在重写我的 UserAccount 实现！:(

# c++ - 通过 UDP 发送时的不同结果

> ID：13778543
> 
> 赞同：0
> 
> 时间：2012-12-08T14:45:31.000
> 
> 标签：c++, sockets, udp

我正在编写一个用于视频传输的程序 - 它使用 OpenCV 将视频分割成帧，然后通过 UDP 发送它们。

问题是 - 当我发送时，我得到不同的结果 - 有时只发送几帧，有时它们已损坏。这很奇怪，因为我正在发送到本地主机（127.0.0.1）并且不应该有任何数据丢失。

我按块发送帧，每个块的大小为 10240 字节。

我还使用带有阻塞套接字的 Winsock 2。

这个问题的根本原因是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T14:48:11.417

您知道in代表不可靠，是吗*？*不，不是真的，但这是记住协议不保证交付的好方法。`U``UDP`

如果您需要保证交付，您应该使用`TCP`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T14:48:28.123

[https://www.google.com/search?q=udp+localhost+packet+loss](https://www.google.com/search?q=udp+localhost+packet+loss)的前几个结果表明即使发送到 localhost 也可能丢失数据包。

# sed - 在文本文件中替换，使用 Applescript 和 sed

> ID：13778544
> 
> 赞同：3
> 
> 时间：2012-12-08T14:45:31.753
> 
> 标签：sed, applescript

[问题是HTML 代码 (Automator/AppleScript) 的纯文本 URL](https://stackoverflow.com/questions/13670756/plain-text-url-to-html-code-automator-applescript)的续集。

假设我有一个纯 txt 文件 /Users/myname/Desktop/URLlist.txt：

```
title 1
http://a.b/c

title 2
http://d.e/f

... 
```

我想 (1) 将所有 URL ( [http://..](http://..) .) 转换为 HTML 代码，并且 (2) 添加

```
&nbsp;<br /> 
```

到每个空行，这样前面提到的内容就变成了：

```
title 1
<a href="http://a.b/c">http://a.b/c</a>
&nbsp;<br />
title 2
<a href="http://d.e/f">http://d.e/f</a>
&nbsp;<br />
... 
```

我来到以下Applescript：

```
set inFile to "/Users/myname/Desktop/URLlist.txt"
set middleFile to "/Users/myname/Desktop/URLlist2.txt"
set outFile to "/Users/myname/Desktop/URLlist3.txt"

do shell script "sed 's/\\(http[^ ]*\\)/<a href=\"\\1\">\\1<\\/a>/g' " & quoted form of inFile & " >" & quoted form of middleFile
do shell script "sed 's/^$/\\&nbsp;<br \\/>/g' " & quoted form of middleFile & " >" & quoted form of outFile 
```

它有效，但它是多余的（而且很愚蠢？）。谁能让它更简洁？是否可以只涉及一个文本文件而不是三个（即 /Users/myname/Desktop/URLlist.txt 中的原始内容被最终结果覆盖）？

非常感谢您提前。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T16:17:07.167

尝试：

```
set inFile to "/Users/myname/Desktop/URLlist.txt"

set myData to (do shell script "sed '
/\\(http[^ ]*\\)/ a\\
&nbsp;<br />
' " & quoted form of inFile & " | sed 's/\\(http[^ ]*\\)/<a href=\"\\1\">\\1<\\/a>/g' ")

do shell script "echo " & quoted form of myData & " > " & quoted form of inFile 
```

这将允许您稍后在脚本中使用 myData 变量。如果这不是较大脚本的一部分，而您只是修改文件，请按照 jackjr300 的建议使用 -i 选项。此外，此脚本查找原始模式并将新行附加到其中，而不是简单地查找空行。

编辑：

```
set inFile to "/Users/myname/Desktop/URLlist.txt"
set myData to (do shell script "sed 's/\\(http[^ ]*\\)/<a href=\"\\1\">\\1<\\/a>/g; s/^$/\\&nbsp;<br \\/>/g' " & quoted form of inFile)
do shell script "echo " & quoted form of myData & " > " & quoted form of inFile 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T16:25:39.460

使用`-i ''`选项就地编辑文件。

```
set inFile to "/Users/myname/Desktop/URLlist.txt"

do shell script "sed -i '' 's:^$:\\&nbsp;<br />:; s:\\(http[^ ]*\\):<a href=\"\\1\">\\1</a>:g' " & quoted form of inFile 
```

如果您想要原始文件的副本，请使用指定的扩展名，例如`sed -i ' copy'`

- 更新：

`DOCTYPE 是必需的序言。出于遗留原因，需要 DOCTYPE。当省略时，浏览器倾向于使用与某些规范不兼容的不同呈现模式。在文档中包含 DOCTYPE 可确保浏览器尽最大努力遵循相关规范。

HTML lang 属性可用于声明网页或网页的一部分的语言。这是为了帮助搜索引擎和浏览器。`<html>`根据 W3C 建议，您应该在标签内使用 lang 属性声明每个网页的主要语言

该`<meta>`标记提供有关 HTML 文档的元数据。`<meta>`标签总是在`<head>`元素内部。该`http-equiv`属性为内容属性的信息/值提供 HTTP 标头。 ：与或名称属性 `content`关联的值。：要正确显示**HTML**页面，浏览器必须知道使用什么字符集。`http-equiv``charset`

 **在此脚本中：我将“ **utf-8** ”作为编码，通过原始文件的编码对其进行更改。

```
set inFile to "/Users/myname/Desktop/URLlist.html" -- text file with a ".html" extension
set nL to linefeed
set prepandHTML to "<!DOCTYPE html>\\" & nL & "<html xmlns=\"http://www.w3.org/1999/xhtml\" xml:lang=\"en-US\" lang=\"en-US\">\\" & nL & tab & "<head><meta http-equiv=\"content-type\" content=\"text/html; charset=utf-8\" />\\" & nL & "</head>\\" & nL

do shell script "sed -i '' 's:^$:\\&nbsp;<br />:; s:\\(http[^ ]*\\):<a href=\"\\1\">\\1</a>:g; 1s~^~" & prepandHTML & "~' " & quoted form of inFile
do shell script "echo '</html>' " & quoted form of inFile -- write last HTML tag 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T18:01:33.817

我不能很好地理解 sed 命令（它让我的大脑受伤）所以这里是执行此任务的 applescript 方法。希望能帮助到你。

```
set f to (path to desktop as text) & "URLlist.txt"

set emptyLine to "&nbsp;<br />"
set htmlLine1 to "<a href=\""
set htmlLine2 to "\">"
set htmlLine3 to "</a>"

-- read the file into a list
set fileList to paragraphs of (read file f)

-- modify the file as required into a new list
set newList to {}
repeat with i from 1 to count of fileList
    set thisItem to item i of fileList
    if thisItem is "" then
        set end of newList to emptyLine
    else if thisItem starts with "http" then
        set end of newList to htmlLine1 & thisItem & htmlLine2 & thisItem & htmlLine3
    else
        set end of newList to thisItem
    end if
end repeat

-- make the new list into a string
set text item delimiters to return
set newFile to newList as text
set text item delimiters to ""

-- write the new string back to the file overwriting its contents
set openFile to open for access file f with write permission
write newFile to openFile starting at 0 as text
close access openFile 
```

***编辑***：如果您在编码时遇到问题，这两个处理程序将正确处理读/写。因此，只需将它们插入代码并调整这些行以使用处理程序。祝你好运。

***注意***：使用 TextEdit 打开文件时，请使用文件菜单并专门以 UTF-8 格式打开。

```
on writeTo_UTF8(targetFile, theText, appendText)
    try
        set targetFile to targetFile as text
        set openFile to open for access file targetFile with write permission
        if appendText is false then
            set eof of openFile to 0
            write «data rdatEFBBBF» to openFile starting at eof -- UTF-8 BOM
        else
            tell application "Finder" to set fileExists to exists file targetFile
            if fileExists is false then
                set eof of openFile to 0
                write «data rdatEFBBBF» to openFile starting at eof -- UTF-8 BOM
            end if
        end if
        write theText as «class utf8» to openFile starting at eof
        close access openFile
        return true
    on error theError
        try
            close access file targetFile
        end try
        return theError
    end try
end writeTo_UTF8

on readFrom_UTF8(targetFile)
    try
        set targetFile to targetFile as text
        targetFile as alias -- if file doesn't exist then you get an error
        set openFile to open for access file targetFile
        set theText to read openFile as «class utf8»
        close access openFile
        return theText
    on error
        try
            close access file targetFile
        end try
        return false
    end try
end readFrom_UTF8 
```**

# scala - 你可以在 Scala 中使用 varargs 来咖喱函数吗？

> ID：13778545
> 
> 赞同：5
> 
> 时间：2012-12-08T14:45:33.923
> 
> 标签：scala, functional-programming, currying

我正在考虑如何使用可变参数来柯里化一种方法，我意识到我什至没有直觉知道如何去做。理想情况下，它可以让您随时开始使用它，然后以可迭代的方式结束它。

```
def concat(strs: String*) = strs.mkString

val curriedConcat = concat.curry

curriedConcat("OK")("hello", "world")("welcome")(Seq(): _*) 
```

scala 对此有支持吗？除了将它绑定到长度为 N 的函数然后对它进行 curry 之外，我不知道如何做任何事情。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-08T15:45:41.820

使用 Scala 2.10 和无形：

```
import shapeless.Nat._
import shapeless.{Nat, Succ}

trait Curry[T, Res, N <: Nat] {
  type Out
  def apply(as: Seq[T], f : Seq[T] => Res) : Out
}

object Curry {
  implicit def curry[Out0, T, Res, N <: Nat](implicit curry : CurryAux[Out0, T, Res, N]) = new Curry[T, Res, N] {
    type Out = Out0
    def apply(as: Seq[T], f : Seq[T] => Res) = curry(as, f)
  }
}

trait CurryAux[Out, T, Res, N <: Nat] {
  def apply(as: Seq[T], f : Seq[T] => Res) : Out
}

object CurryAux {
  implicit def curry0[Res, T] = new CurryAux[Res, T, Res, _0] {
    def apply(as: Seq[T], f : Seq[T] => Res) : Res = f(as)
  }

  implicit def curryN[Out, T, Res, N <: Nat](implicit c : CurryAux[Out, T, Res, N]) =
    new CurryAux[T => Out, T, Res, Succ[N]] {
      def apply(as: Seq[T], f : Seq[T] => Res) : (T => Out) = (a: T) => c(as :+ a, f)
    }
}

implicit class CurryHelper[T, Res](f : Seq[T] => Res) {
  def curry[N <: Nat](implicit c : Curry[T, Res, N]): c.Out = c(IndexedSeq[T](), f)
} 
```

用法：

```
scala> def concat(strs: String*) = strs.mkString
concat: (strs: String*)String

scala> val test = ( concat _ ).curry[_3]
test: String => (String => (String => String)) = <function1>

scala> test("1")("2")("3")
res0: String = 123 
```

没有无形：

```
class CurryHelper[T, Res](f: Seq[T] => Res, as: Seq[T]) {
  def myCurry() = this
  def apply(ts: T*) = new CurryHelper(f, as ++ ts)
  def apply(ts: Seq[T]) = f(as ++ ts)
}

implicit def toCurryHelper[T, Res](f: Seq[T] => Res) = new CurryHelper(f, IndexedSeq[T]())

scala> def concat(strs: String*) = strs.mkString
concat: (strs: String*)String

scala> val test = ( concat _ ).myCurry
test: CurryHelper[String,String] = CurryHelper@4f48ed35

scala> test("1")("2")("3", "4")(Nil)
res0: String = 1234 
```

# android - arrayoutofboundsexception android自定义适配器listview

> ID：13778548
> 
> 赞同：0
> 
> 时间：2012-12-08T14:45:45.477
> 
> 标签：android, listview

我的 2 列列表视图中有一个 arrayoutofboundsexception 错误，

请在下面检查我的代码：

```
 private static ListView lv;
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.meal_result);

    BreakFastLog info = new BreakFastLog(this);
    info.open();

    String data1 = info.getMealNameData();
    String data2 = info.getServingData();

    String[] inputData = data1.split( " " );
    String[] inputData2 = data2.split( " " );

    lv = (ListView) findViewById (R.id.lvBF);   

    /*
    ArrayList<HashMap<String, String>> mylistData =
            new ArrayList<HashMap<String, String>>();

    int[] columnIds = new int[] {
            R.id.tvBreakfastMealContainer, R.id.tvBreakfastServingContainer};

    HashMap<String, String> map = new HashMap<String, String>();
    //initialize row data
    map.put( "Meal", data1 );
    map.put( "Serving", data2 );
    mylistData.add( map );

    //lv.setAdapter( new ArrayAdapter<String>( this,android.R.layout.simple_list_item_1, inputData ) );

    //SimpleAdapter arrayAdapter =
    //           new SimpleAdapter(this, mylistData, R.layout.breakfast_listview_header,
    //                   new String[] {"Meal", "Serving"}, columnIds);
    //lv.setAdapter(arrayAdapter);   */
    lv.setAdapter( new MyCustomAdapter( inputData, inputData2 ) );

    lv.setTextFilterEnabled( true ); 

    info.close();

}

class MyCustomAdapter extends BaseAdapter
{

       String[] data_meal;
       String[] data_serving;

 MyCustomAdapter()
 {
       data_meal = null;
       data_serving = null;
 }

 MyCustomAdapter( String[] meal, String[] serving )
 {
       data_meal = meal;
       data_serving = serving;
 }

 public int getCount()
 {
       return data_meal.length;
 }

 public String getItem( int position )
 {
       return null;
 }

 public long getItemId( int position )
 {
       return position;
 }

 public View getView( int position, View convertView, ViewGroup parent )
 {

       LayoutInflater inflater = getLayoutInflater();
       View row;

       row = inflater.inflate( R.layout.breakfast_listview_header, parent, false );

       TextView txtMeal = ( TextView ) row.findViewById ( R.id.tvBreakfastMealContainer );
       TextView txtServing = ( TextView ) row.findViewById ( R.id.tvBreakfastServingContainer );

       txtMeal.setText( data_meal[ position ] );
       txtServing.setText( data_serving[ position ] );

       return (row);

     }
 } 
```

请帮我弄清楚出了什么问题。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T15:33:52.267

虽然它不会修复错误，但此代码应该可以帮助您找出问题所在。

尝试将您的 getView() 方法调整为如下所示：

```
public View getView( int position, View convertView, ViewGroup parent )
{
    LayoutInflater inflater = getLayoutInflater();
    View row = inflater.inflate( R.layout.breakfast_listview_header, parent, false );

    TextView txtMeal = ( TextView ) row.findViewById ( R.id.tvBreakfastMealContainer );
    TextView txtServing = ( TextView ) row.findViewById ( R.id.tvBreakfastServingContainer );

    if (position > data_meal.length)
    {
        txtMeal.setText(data_meal[position]);
    ]
    else
    {
        txtMeal.setText("MISSING!!");
    }

    if (position > data_serving.length)
    {
        txtServing.setText(data_serving[position]);
    ]
    else
    {
        txtServing.setText("MISSING!!");
    }

    return row;
} 
```

# java - 导入 com.apple.dnssd 无法解析。日食，Win32

> ID：13778549
> 
> 赞同：0
> 
> 时间：2012-12-08T14:45:50.320
> 
> 标签：java, eclipse, import, bonjour, dns-sd

我有一个问题：突然（就像那样）我的 Eclipse IDE 丢失了 com.apple.dnssd 库。“昨天”我正在开发一个应用程序，“今天”它给我带来了标题中的错误。有趣的是，我仍然可以导入：

```
com.apple.*;
com.apple.jdirect.*;
com.apple.mrj.*;
com.apple.mrj.macos.*;
com.apple.mrj.macos.carbon.*; 
```

所以唯一的dnssd丢失了。

我已经正确安装了 Bonjour API，我已经从苹果开发者那里安装了 2.0.4 版本并且正在使用它。我在 Bonjour 目录和 jre7 中都有 dns_sd.jar。我试图从 SDK 重新安装 Bonjour。一样的东西。我就是不明白出了什么问题。有任何想法吗？

- - 编辑 - -

当 Eclipse 读取项目中包含的库时，它会从 %jre%\lib、%jre%\lib\ext 中读取所有库，除了这个唯一的文件：dns_sd.jar。当我创建一个新项目时，它还包括所有需要的文件，除了这个......这怎么可能？那有什么问题？前几天还好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T14:10:13.317

Workspace 文件夹的 .metadata 配置出现问题。我删除了这个 .metadata 文件夹，在 IDE 中重新导入了所有项目，我的问题就解决了。希望这对其他人有帮助。

# mysql - 如何在数据库中组织国际产品

> ID：13778556
> 
> 赞同：0
> 
> 时间：2012-12-08T14:47:02.357
> 
> 标签：mysql, database-design

现在我的数据库中只有美国产品。它们位于名为 的表中`products`。这些产品可通过分配在单独表格中的标签进行搜索。
我的挑战是现在添加来自不同国家/地区的产品，并要求无论用户来自哪里，他都只能看到来自他所在国家/地区的产品。

国家可以通过这些臭名昭著的国家标志选择器下拉菜单选择，在用户配置文件中设置或首先由访问者 IP 确定。

您将如何将国际产品存储在数据库中？据推测，不仅会增加一个国家，而且还会增加更多。简单地在该产品所属的国家/地区的表中添加一列*或* 具有映射表*或* 为每个国家/地区具有单独的表*或* 完全不同的东西
是否有意义？`products`

 ***现在我不能肯定地说每种产品只会在一个国家独家销售。所以我不得不假设一种产品可能在多个国家销售。

期待听到您对此的看法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T14:51:06.353

这是一个经典的多对多案例。

创建一个国家表和一个参考表，其中存储了 countryID 和 productID 之间的链接。这样，您就可以在一个国家或任意多个国家销售产品。

SO上有很多关于多对多关系的信息：[https ://stackoverflow.com/search?q=many-to-many+mysql](https://stackoverflow.com/search?q=many-to-many+mysql)***

# java - 如何将多个class文件转换为一个jar文件？

> ID：13778558
> 
> 赞同：0
> 
> 时间：2012-12-08T14:47:15.837
> 
> 标签：java, jar, applet

我已经反编译了一个jar文件，

![在此处输入图像描述](../Images/cd41ecf61cf7ba6d15dc109e0fc1cb22.png)

并从中制作了两个课程。之后，我尝试用这两个类文件制作一个新的jar文件，使用这段代码

```
jar cvf AB.jar WinRegistry.class StartPageChangeApplet.class 
```

创建的文件没有任何错误。但是，当我查看 Java Decompiler 上的源代码时，它显示“内部错误”，这意味着我无法正确生成 jar 文件。

![在此处输入图像描述](../Images/033e1f61f7ed87c48bf562f6a8c58ab7.png)

我在哪里做错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T15:46:04.457

请定义“从中制作两个类”。您使用的是哪个 java 编译器（例如 javac.exe）？您是否只是将源代码复制到 .class 文件而不进行编译？

Java 反编译器 JAD 实际上显示的是源代码，而不是类字节码。不要被编辑的标题弄糊涂了`WinRegistry.class`。

因此，您不能将其保存为`.class`. 您需要将其保存为 a`.java`然后`.class`使用 java 编译器编译它：

```
javac WinRegistry.java StartPageChangeApplet.java
jar cf AB.jar WinRegistry.class StartPageChangeApplet.class 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-09T10:39:47.443

在 Eclipse 中，您可以这样做。![在此处输入图像描述](../Images/2a3a8a6b718f2e3cf7627b1a87d48905.png)

# javascript - Chrome 扩展中的域授权

> ID：13778559
> 
> 赞同：3
> 
> 时间：2012-12-08T14:47:19.577
> 
> 标签：javascript, jquery, ajax, google-chrome, google-chrome-extension

需要通过 ajax 向 chrome 扩展中的远程服务发出跨域请求。

当用户在使用扩展程序之前获得服务授权时，一切正常。但是，当未经授权的用户提出请求扩展失败并*出现 401 错误代码 (unathorized)*。

我的目的是完成**像浏览器一样的外观**。如果您未在某些网页浏览器上获得授权，则会出现建议您输入凭据的对话框。由于它们是正确的浏览器显示网页内容。

我试图在扩展 HTML 布局中添加一些位于服务上的不可见元素，以强制浏览器内置域授权对话框出现，但 id 似乎不是正确的方法。

长话短说，你知道一些策略来**强制浏览器内置授权**从 chrome 扩展或简单地通过 javascript 代码而不将用户重定向到某个单独的服务网页。或者，也许，这是不可能的，为什么？

发出请求的代码很简单：

```
$.ajax({
    url: 'service url that requires authorization',
    dataType: 'json',
    success: function (info){
        //success handler
    },
    error: function (){
        //error handler
    }
}); 
```

WBR，维塔利

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T07:08:36.920

我认为可以收听`chrome.webRequest.onAuthRequired`（[https://developer.chrome.com/trunk/extensions/webRequest.html#event-onAuthRequired](https://developer.chrome.com/trunk/extensions/webRequest.html#event-onAuthRequired)）。在事件侦听器中，您可以提示用户输入凭据，例如，通过显示一个类似于内置授权对话框的自定义窗口。`onAuthRequired`是 chrome.webRequest 中唯一支持异步阻塞的事件，它允许您异步获取凭据（来自用户）并传递响应（凭据）。

```
chrome.webRequest.onAuthRequired.addListener(function(details, callback){
    // Prompt the user to enter credentials. Call 
    // callback({authCredentials: {username: xxx, password: xxx}});
    // when they are ready.
}, {.../*request filter*/}, ['asyncBlocking']); 
```

# java - TableModel - 在 gui 中不显示任何内容？

> ID：13778561
> 
> 赞同：0
> 
> 时间：2012-12-08T14:47:25.620
> 
> 标签：java, swing, jtable, abstracttablemodel, listselectionlistener

我正在从 DAO 获取数据到 GUI 级别。

当我想加载表时，我得到一个空表，只有单击的 db 符号的正确行数：

![在此处输入图像描述](../Images/8cfcff383985fa16fadfe475f25ef3ae.png)

要加载我使用的元素：

```
playlistTable.addMouseListener(new MouseAdapter() {
    public void mouseClicked(MouseEvent e) {
    if (e.getClickCount() == 1) {
        JTable target = (JTable)e.getSource();
        int row = target.getSelectedRow();
        playlistTableModel.setPlaylists(playlistService.getMoviesOfPlaylist(row));
} 
```

为什么表是空的？

**更新**

表型号代码：

```
public class PlaylistTableModel extends AbstractTableModel {

    /**
     * Generated UID
     */
    private static final long serialVersionUID = 9058516120594137393L;

    /**
     * List of playlist to be shown
     */
    private List<Playlist> playlist;

    public PlaylistTableModel(List<Playlist> playlist){
        this.playlist=playlist;
    }

    public int getColumnCount() {
        return 1;
    }

    public int getRowCount() {
        return playlist.size();
    }

    public Object getValueAt(int arg0, int arg1) {
        Playlist playlists = playlist.get(arg0);
        switch(arg1){
        case 0: return playlists.getName();
        default: return null;
        }
    }    

    public void setPlaylists(List<Playlist> playlist){
        this.playlist=playlist;
        fireTableDataChanged();//Aktualisiert Playlist automatisch
    }

    public void setPlaylist(Playlist playlists){
        playlist.add(playlists);
        fireTableRowsInserted(playlist.size()-1, playlist.size()-1);
    }

    public String getColumnName(int column) {
        if(column==0){
            return "Playlist";
        }
        else{
            return null;
        }
    }

    /**
     * Returns a movie from the list specified by the index
     * @param row index of the movie
     * @return movie
     */
    public Playlist getPlaylist(int row){
        return playlist.get(row);
    }

    @Override
    public boolean isCellEditable(int row, int col) {
        return true;
    }

    @Override
    public void setValueAt(Object aValue, int rowIndex, int columnIndex){
        if(columnIndex!=0){
            return;
        }    
        fireTableCellUpdated(rowIndex, columnIndex);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T04:32:50.620

这个方法可能有问题，

```
public void setPlaylist(Playlist playlists){
    playlist.add(playlists);
    fireTableRowsInserted(playlist.size()-1, playlist.size()-1);
} 
```

例如，如果我们得到大小为 20 的播放列表。然后在分配给您正在调用的表模型播放列表后，

```
fireTableRowsInserted(playlist.size()-1, playlist.size()-1); 
```

这将减少到，

```
fireTableRowsInserted(19, 19); 
```

但实际上发生的事情是我们不只是插入一行，而是 20 行。因此，正如[@Ivan.Latysh](https://stackoverflow.com/questions/13778561/tablemodel-doesnt-show-anything-in-the-gui)在答案部分中所建议的那样，您需要从行数开始到行数结束调用 insert。这将`repaint`插入的行。

**PS：**您也可以简单地调用`fireTableDataChanged();`方法。但是这种方法将`repaint`整张桌子。仅当整个表列表发生更改时才首选此方法。否则，您有各自`fireXX`的[插入、更新、删除方法。](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/table/AbstractTableModel.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T15:00:34.403

可能问题出在`getValueAt`方法上，像这样改变

```
 public Object getValueAt(int arg0, int arg1) {
        // since you use only one column     
        return playlist.get(arg0).getName();
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T22:01:22.307

问题是您正在触发错误的更改事件

```
fireTableRowsInserted(playlist.size()-1, playlist.size()-1); 
```

文档状态：

```
public void fireTableRowsInserted(int firstRow,
                              int lastRow)

Notifies all listeners that rows in the range [firstRow, lastRow], inclusive, have been inserted. 
```

因此，如果您想达到最佳状态，请执行以下操作：

```
public void setPlaylist(Playlist playlists){
  int firstRow = playlist.size();
  playlist.add(playlists);
  fireTableRowsInserted(firstRow, playlist.size()-1);
} 
```

或者干脆重新绘制整个表格。不要忘记该表也可能重新计算其大小。

```
fireTableDataChanged(); 
```

# android - 在 Android 中使用 Facebook API 标记图片中的朋友

> ID：13778566
> 
> 赞同：0
> 
> 时间：2012-12-08T14:47:46.807
> 
> 标签：android, facebook-graph-api

我在使用 android 中的 Facebook API 标记图片中的朋友时遇到问题。这就是我目前所拥有的

```
Bundle param;

    Bitmap bitmap = BitmapFactory.decodeResource(context.getResources(),R.drawable.picture);
    ByteArrayOutputStream stream = new ByteArrayOutputStream();
    bitmap.compress(Bitmap.CompressFormat.JPEG, 100, stream);
    byte[] data = stream.toByteArray();

    AsyncFacebookRunner mAsyncRunner = new AsyncFacebookRunner(facebook);
    InputStream is = null;
    param = new Bundle();
    param.putString("message", dataMsg);
    param.putString("filename", "Invite");
    String[] numArr = invitedNum.toArray(new String[invitedNum.size()]); 
    param.putStringArray("message_tags",numArr);
    param.putByteArray("picture", data);
    mAsyncRunner.request("me/photos", param, "POST", new SampleUploadListener(), null);

    Toast.makeText(context, "Picture posted to Facebok.", Toast.LENGTH_SHORT).show(); 
```

这会上传图片并在其上设置一条消息，但不会标记图片中的任何人。任何想法都会非常有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T21:17:29.423

要标记用户，您需要遵循此处列出的方法：

[https://developers.facebook.com/docs/reference/api/photo/#tags](https://developers.facebook.com/docs/reference/api/photo/#tags)

所以你会：

1/ 上传照片

2/ 获取照片ID（上传成功应该返回）

3/ 调用这个 Graph API 端点：

```
PHOTO_ID/tags 
```

并在 tags 参数中传入 FB ID：

```
 tags=[{"id":"1234"}, {"id":"12345"}]. 
```

# c++ - What is practiced in C++ to use for byte manipulation uint8 or char?

> ID：13778568
> 
> 赞同：0
> 
> 时间：2012-12-08T14:48:01.300
> 
> 标签：c++

I am coming from Java to C++ and I need something similar to `byte[]` from Java. I can use `std::vector<>` for easy array like manipulation but I need answer what is practiced in C++ to use for byte manipulation `uint8` or `char` ? ( I have lot off packing bigger integers in arrays with & 0xff and >> number so it need to be quick)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T14:56:41.660

Assuming that `uint8` is an 8 bit unsigned integer type, the main difference on a "normal" C++ implementation is that `char` is not necessarily unsigned.

On "not normal" C++ implementations, there could be more significant differences -- `char` might not be 8 bits. But then, what would you define `uint8` to be on such an implementation anyway?

Whether the sign difference matters or not depends how you're using it, but as a rule of thumb it's best to use unsigned types with bitwise operators. That said, they both get promoted to `int` in bitwise `&` anyway (again on a "normal" C++ implementation) and it really doesn't matter for `&`, it doesn't cause surprises in practice. But using `<<` on a negative signed value results in undefined behavior, so avoid that.

So, use an unsigned type. If the most convenient way for you to write that is `uint8`, and you know that your code deals in octets and will only run on systems where `char` is an octet, then you may as well use it.

If you want to use a standard type, use `unsigned char`. Or `uint8_t` in order to deliberately prevent your code compiling on "not normal" implementations where `char` is not an octet.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T14:51:41.677

C++ reserved words are `char`, `signed char`, and/or `unsigned char`. `uint8` is probably a typedef synonym for `unsigned char`.

# python - 如何在 Python 中获取字符串的原始表示？

> ID：13778571
> 
> 赞同：12
> 
> 时间：2012-12-08T14:48:05.537
> 
> 标签：python, python-3.x, rawstring

我正在制作一个严重依赖正则表达式的类。

假设我的班级看起来像这样：

```
class Example:
    def __init__(self, regex):
        self.regex = regex

    def __repr__(self):
        return 'Example({})'.format(repr(self.regex.pattern)) 
```

假设我这样使用它：

```
import re

example = Example(re.compile(r'\d+')) 
```

如果我这样做`repr(example)`，我得到`'Example('\\\\d+')'`，但我想要`'Example(r'\\d+')'`。考虑到打印时正确显示的额外反斜杠。我想我可以实现它来 return `"r'{}'".format(regex.pattern)`，但这对我来说并不合适。万一 Python 软件基金会有一天会改变指定原始字符串文字的方式，我的代码不会反映这一点。不过，这是假设的。我主要关心的是这是否总是有效。不过，我想不出一个边缘案例。有没有更正式的方式来做到这一点？

[编辑： Format Specification Mini-Language](http://docs.python.org/3/library/string.html#formatspec)、[`printf`-style String Formatting guide](http://docs.python.org/3/library/stdtypes.html?highlight=str#printf-style-string-formatting)或[`string`module](http://docs.python.org/3/library/string.html)中似乎没有出现任何内容。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-08T15:02:16.580

原始字符串表示的问题在于，您不能以可移植（即不使用控制字符）的方式表示所有内容。例如，如果您的字符串中有换行符，则必须将字符串从字面上断开到下一行，因为它不能表示为原始字符串。

也就是说，获取原始字符串表示的实际方法是您已经给出的：

```
"r'{}'".format(regex.pattern) 
```

原始字符串的定义是没有应用任何规则，除了它们以它们开头的引号字符结束并且您可以使用反斜杠转义所述引号字符。因此，例如，您不能像`"\"`原始字符串表示形式那样存储字符串的等价物（`r"\"`yield SyntaxError 和`r"\\"`yield `"\\\\"`）。

如果你真的想这样做，你应该使用像这样的包装器：

```
def rawstr(s):
    """
    Return the raw string representation (using r'') literals of the string
    *s* if it is available. If any invalid characters are encountered (or a
    string which cannot be represented as a rawstr), the default repr() result
    is returned.
    """
    if any(0 <= ord(ch) < 32 for ch in s):
        return repr(s)

    if (len(s) - len(s.rstrip("\\"))) % 2 == 1:
        return repr(s)

    pattern = "r'{0}'"
    if '"' in s:
        if "'" in s:
            return repr(s)
    elif "'" in s:
        pattern = 'r"{0}"'

    return pattern.format(s) 
```

测试：

```
>>> test1 = "\\"
>>> test2 = "foobar \n"
>>> test3 = r"a \valid rawstring"
>>> test4 = "foo \\\\\\"
>>> test5 = r"foo \\"
>>> test6 = r"'"
>>> test7 = r'"'
>>> print(rawstr(test1))
'\\'
>>> print(rawstr(test2))
'foobar \n'
>>> print(rawstr(test3))
r'a \valid rawstring'
>>> print(rawstr(test4))
'foo \\\\\\'
>>> print(rawstr(test5))
r'foo \\'
>>> print(rawstr(test6))
r"'"
>>> print(rawstr(test7))
r'"' 
```

# signal-processing - vDSP_fft_zrip 理解转换后的 DSPSplitComplex 内容

> ID：13778577
> 
> 赞同：1
> 
> 时间：2012-12-08T14:48:55.077
> 
> 标签：signal-processing, fft, vdsp

假设“A”是一个以正确方式打包的实向量（使用 vDSP_ctoz），执行以下操作：

```
vDSP_fft_zrip(setupReal, &A, 1, FFT_LENGTH_LOG2, FFT_FORWARD); 
```

将我的真实内容转换为它的频率表示。

那么以下值代表什么？：

```
A.realp[0];
A.imagp[0];

A.realp[i];
A.imagp[i];

A.realp[N-1];
A.imagp[N-1]; 
```

实际上我想知道 DC 和 Nyquist 组件存储在哪里。A.imagp[j] 也是 A.realp[j] 的虚部吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T15:34:36.187

令**H**为向量，它是 FFT 的数学结果，因此 H [k]是向量的第 k^个元素。H [0]是直流分量，H [N/2]是奈奎斯特分量。然后：

`A.realp[0]`包含 H [0]。

`A.imagp[0]`包含 H [N/2]。

对于 0 < k < N/2，`A.realp[k]`并且`A.imagp[k]`组合包含 H [k]。具体来说，包含 H [k]`A.realp[k]`的实部，并包含 H [k]的虚部。等效地，H [k] = + *i* • 。[`A.imagp[k]`[[`A.realp[k]`*`A.imagp[k]`*]]]

 *有关 vDSP FFT 的一些文档在[此处](https://developer.apple.com/library/mac/#documentation/Performance/Conceptual/vDSP_Programming_Guide/UsingFourierTransforms/UsingFourierTransforms.html)。*

# jquery - 粘贴功能不适用于第一次jquery

> ID：13778578
> 
> 赞同：1
> 
> 时间：2012-12-08T14:49:02.730
> 
> 标签：jquery

```
<script type="text/javascript">
$(document).ready( function() {
$(".editableContent").bind('paste', function() {
var value = $(this).text();
var string = value.replace(/(<([^>]+)>)/ig,"");
$(this).text(string);
});
});
</script> 
```

粘贴功能第一次不起作用，但第二次起作用，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T15:06:49.623

看起来您正试图从可编辑的 div 中删除标记。只需使用这个：

```
$(".editableContent").on('paste', function() {
    var self = this;
    setTimeout(function() {
        $(self).find('*').remove();
        $(self).append('<br />')
    }, 0);
}); 
```

这是一个演示：http: [//jsfiddle.net/4jSNN/1/](http://jsfiddle.net/4jSNN/1/)

# html - 在 Qt 中将 Unicode 字符编码为 HTML

> ID：13778581
> 
> 赞同：4
> 
> 时间：2012-12-08T14:49:28.917
> 
> 标签：html, qt, unicode, encode

我想将包含 Unicode 字符的 QString 转换为纯 HTML 文本。例如“私”会变成“私”。

Qt中有这样的功能吗？我找到了这个函数`QString Qt::escape ( const QString & plain )`，但它只转换 HTML 元字符 <、>、& 和“。

似乎有很多用于编码和国际化的 Qt 类和函数，但我只是不知道在哪里看。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T15:44:44.313

我在 Qt Center 论坛上问过，有人给了我我需要的答案。[这里是。](http://www.qtcentre.org/threads/52456-HTML-Unicode-ampersand-encoding)

这是建议的代码并解决了我的问题：

```
QString ampersand_encode(const QString &string) {
  QString encoded;
  for(int i=0;i<string.size();++i) {
    QChar ch = string.at(i);
    if(ch.unicode() > 255)
      encoded += QString("&#%1;").arg((int)ch.unicode());
    else
      encoded += ch;
  }
  return encoded;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T02:13:06.983

你应该看看

```
QString QUrl::toString(FormattingOptions options = FormattingOptions( PrettyDecoded )) const
QByteArray QUrl::toPercentEncoding ( const QString & input, const QByteArray & exclude = QByteArray(), const QByteArray & include = QByteArray() ) 
```

Qt 在线文档[QUrl::toString](http://doc.qt.digia.com/qt/qurl.html#toString) , [QUrl::toPercentEncoding](http://doc.qt.digia.com/qt/qurl.html#toPercentEncoding)

btw:我也说中文，以后可以多交流</p>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T22:16:41.880

我在这里和那里找到了各种 Qt 方法，并决定创建自己的编码函数：

```
QString ampersand_encode(const QString& str){

    QString chr;
    QStringList list = QStringList();

    for (int i = 0; i < str.size(); ++i) {
        chr = QString(str[i]);
        list << "&#x" + QString(chr.toUtf8().toHex()) + ";";
    }

    return list.join("");
} 
```

它*几乎*可以工作。它适用于 ASCII 字符，但是当我尝试使用其他 Unicode 字符时，我只能得到韩文字符。为什么？我觉得没什么可改变的，但我不知道是什么。此外，我的代码的任何改进将不胜感激。:)

# php - 配置CKeditor 4.0

> ID：13778583
> 
> 赞同：-2
> 
> 时间：2012-12-08T14:49:36.910
> 
> 标签：php, ckeditor

我正在尝试在我的网站上配置 CKeditor4.0。但不幸的是，我无法正确配置它。[我完全按照前面的问题](https://stackoverflow.com/questions/8151889/how-to-add-or-embed-ckeditor-in-php-page)中提到的步骤尝试了这些步骤。

但是我收到一条错误消息，例如

```
Warning: include_once(ckeditor/ckeditor.php) [function.include-once]:
failed to open stream: 
```

当我试图在 ckeditor 目录中找到 ckeditor.php 文件时，我找不到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T14:52:10.847

那个文件应该在那里。如果它不存在，则您的副本已损坏。从 ckeditor 的站点再次下载文件。

# php - XML 解析 Imgur API 问题

> ID：13778591
> 
> 赞同：2
> 
> 时间：2012-12-08T14:50:35.773
> 
> 标签：php, file-upload, xml-parsing, imgur

我正在尝试创建一个网站，允许您将图像上传到 Imgur，并将图像的 url 存储在该网站的数据库中。为此，我从这个 Stack overflow 帖子中提取了很多代码：[imgur api won't work](https://stackoverflow.com/questions/4986470/imgur-api-wont-work)，然后修改它以适合我的代码，如下所示：

第一：我的表格

```
<form action="uploadfile.php" method="post" enctype="multipart/form-data">
    <input type="file" name="file" id="file" /> 
    <input type="submit" name="submit" value="Submit" />
</form> 
```

上传文件.php：

```
 <?
//configuration
define("IMGUR_API_KEY", "");
require("../includes/config.php"); 
include 'xmlparser.php'; // From http://www.criticaldevelopment.net/xml/doc.php

if($_SERVER['REQUEST_METHOD'] == "POST")
{
$data = file_get_contents($_FILES["file"]['tmp_name']);

// $data is file data
$pvars   = array('image' => base64_encode($data), 'key' => IMGUR_API_KEY);
$timeout = 30;
$curl    = curl_init();

curl_setopt($curl, CURLOPT_URL, 'http://api.imgur.com/2/upload.xml');
curl_setopt($curl, CURLOPT_TIMEOUT, $timeout);
curl_setopt($curl, CURLOPT_POST, 1);
curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($curl, CURLOPT_POSTFIELDS, $pvars);

$xml = curl_exec($curl);

$parser = new XMLParser($xml);
$parser->Parse();
echo $parser->images->item->links->original;

curl_close ($curl); 
}

else
{
    render("uploadfile_form.php", ["title"=>"Upload Image"]);
}
?> 
```

配置和渲染只是我构建网站的框架的一部分；只允许我的程序运行。但是，当我的程序运行并到达第 27 行时，它是： echo $parser->images->item->links->original;

我在第 26 行收到“通知：未定义属性：/home/jharvard/vhosts/project/html/uploadfile.php 中的 XMLParser::$images”，然后又收到三个通知，用于尝试获取非对象的属性同一行。知道 $parser 出了什么问题吗？

# java - 我怎样才能在我的字符串中只保留数字字母

> ID：13778595
> 
> 赞同：-3
> 
> 时间：2012-12-08T14:51:05.557
> 
> 标签：java, regex, string

我想从我的字符串中删除所有奇怪的符号。只在我的字符串中保留一些 [AZ][az][0-9][" ' : ; / ? . , < > ` ~ ! @ # $ % ^ & * ( ) ]。示例

```
String a="abc:d(E) ƒ†â¥‡"; 
```

结果将是：

```
a="abc:d(E)"; 
```

我只是稍微研究一下java regex。你能帮我解决这个问题吗？

我的代码到现在

```
a=a.replaceAll("[^a-zA-Z]+, "") 
```

不知道添加 [* & ^ ..] 部分

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T14:56:23.530

您可以使用`replaceAll`，如下所示：

```
a = a.replaceAll("[^A-Za-z0-9\"'<and so on>]", ""); 
```

请注意`^`字符范围开头的 ：它表示“方括号中列表的其余部分*未涵盖的所有字符”。*

由于替换是一个空字符串，匹配正则表达式的字符将被删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T14:54:32.250

你可以用所有的坏字符创建一个字符串，然后简单地检查你必须使用坏字符串的每个字符串。如果你发现一个坏字符，删除它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T15:16:49.927

[在整个此类的文档中，短语“匹配字符”用于表示“this.matches(c) 为其返回 true 的任何字符 c”。](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/CharMatcher.html)

# model-view-controller - 编写jsp标签库

> ID：13778607
> 
> 赞同：0
> 
> 时间：2012-12-08T14:52:24.810
> 
> 标签：model-view-controller, jsp, tld

我正在使用 MVC 模型，在该模型中我为不同的不同应用程序编写了太多基于 Web 的小部件，这导致我需要大量重复工作来解决问题我计划为每个小部件的 jsp 标签编写新包（使用tld) 和生成的 jar 我将包含在许多使用这些小部件的应用程序中，我也能够成功地做到这一点。

但是在这里我有点担心小部件使用的css和javascript。

假设我在库中的 jsp 标记本身中编写 css，那么在这种情况下，它每次都会获取 css 和脚本，这会导致额外的延迟，以防我在客户端编写通用 css，那么对于使用我的小部件包的多个应用程序需要一遍又一遍地写css？

我包含在我的 MVC 项目中的小部件的 jar。

```
jar -tvf AcmeUIUtils-1.0.jar
     0 Fri Dec 07 07:41:56 IST 2012 META-INF/
   106 Fri Dec 07 07:41:54 IST 2012 META-INF/MANIFEST.MF
     0 Fri Dec 07 15:54:40 IST 2012 com/
     0 Fri Dec 07 15:54:40 IST 2012 com/amazon/
     0 Fri Dec 07 15:54:40 IST 2012 com/amazon/spotui/
     0 Fri Dec 07 15:54:40 IST 2012 com/amazon/spotui/basicui/
  2339 Fri Dec 07 02:11:38 IST 2012 com/amazon/spotui/basicui/AcmeMessage.class
  1684 Fri Dec 07 15:54:40 IST 2012 com/amazon/spotui/basicui/Ping.class
     0 Fri Dec 07 15:54:40 IST 2012 com/amazon/spotui/utils/
  2989 Fri Dec 07 15:54:40 IST 2012 com/amazon/spotui/utils/AcmeTags.class
     0 Fri Dec 07 07:41:40 IST 2012 META-INF/css/
   635 Fri Dec 07 07:40:14 IST 2012 META-INF/css/error.css
  1059 Fri Dec 07 14:47:20 IST 2012 META-INF/spot-ui-component.tld
     0 Fri Dec 07 15:54:40 IST 2012 test-resources/ 
```

现在我的问题是如何以优雅的方式在我的应用程序中加载 error.css ？还是我需要在小部件级别进行更改？

我不介意针对该问题的任何开源解决方案。但我只需要 jsp 标签。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T15:02:50.343

从 servlet 3.0 开始，放置在 WEB-INF/lib 下的 jar 文件可以包含将由 webapp 直接提供的资源。这些资源必须放在 jar 文件的 META-INF/resources 目录下。

因此，如果您的标签库 jar 包含一个文件`META-INF/resources/js/MyTaglib.js`，则该文件将可以通过 URL 直接使用

```
http://the.host.com/theWebApp/js/MyTaglib.js 
```

如果您的目标是 pre-servlet3.0 webapps，那么告诉开发人员将 taglib 的 CSS 和 JS 文件部署在 webapp 的特定目录下。

# android - 将列表项转换为对象

> ID：13778608
> 
> 赞同：0
> 
> 时间：2012-12-08T14:52:34.703
> 
> 标签：android, listview

我有一个 ListView，其中填充了来自 ArrayList 的硬编码数据。该列表包含 Person 对象。

我已成功让它们显示在列表中，并为每个项目分配了一个侦听器。我想要做的是将所选项目添加到一个名为 employees 的 ArrayList 中。

```
protected void onListItemClick(listView l, View v, int position, long id){

     Person p = l.getItemAtPosition(position);
     employees.add(p);
} 
```

我知道上面的代码将不起作用，因为 getItemAtPosition 返回一个长值。但是有没有办法可以使用这个值来创建一个人对象来保存用户单击的项目？

所以基本上我有一个由 ArrayList 人中的数据填充的 ListView。

```
ArrayList<Person> people; 
```

然后，我想将用户单击的项目添加到 ArrayList 员工中。

```
ArrayList<Person> employee; 
```

# android - 如何使用多线程控制android中的surfaceview？

> ID：13778611
> 
> 赞同：0
> 
> 时间：2012-12-08T14:52:49.473
> 
> 标签：android, multithreading, surfaceview

我正在创建一个 android 游戏（仍然是 android 开发的初学者，所以请善待），我将有几个对象在屏幕上移动。

我正在使用线程和表面视图来控制屏幕上的所有图像。

每个物体都会有它的开启速度，所以我想知道如何做到这一点。我虽然在使用多个线程时，每个对象都有自己的线程，然后它会被绘制到表面视图......我如何使用相同的表面视图，因为它在不同的类上？

如果你不明白我的意思，请告诉我，我会用另一种方式解释。

谢谢。

# javascript - ajax回复后jquery访问表单元素

> ID：13778613
> 
> 赞同：1
> 
> 时间：2012-12-08T14:53:15.120
> 
> 标签：javascript, jquery

我正在将表单发送到服务器，当我收到它时，我需要访问它的元素

这里是代码。

一些html

```
<here is the form>
<div style='border-style:solid' id='user_pic_n_1'></div> 
```

和 javascript

```
pic_type=($(this).attr('pic_type'));                    
pic_number=($(this).attr('pic_number')); 
```

解释： pic_type 获取 >`user_pic`和 pic_number 获取 >`1`

所以形式是`user_pic_form_n_1`

```
$('#'+pic_type+'_form_n_'+pic_number).ajaxSubmit({
    success: function(responseimage)
    {
$('#'+pic_type+'_n_'+pic_number).html(responseimage); 
```

现在当表单进入 div 时，我需要获取它的输入值。

请编写如何访问它的代码示例

在我的示例中，我试图通过这样的警报来获取值，但可能我写错了

```
alert($(\"#'+pic_type+'_form_n_'+pic_number+' input[name=error]\").val()); 
```

元素名称是“错误”，所以我试图从表单中获取它。

**更新**

这是我从 AJAX 获得的 HTML 表单

```
<form id='user_pic_form_n_1' name='user_pic_form_n_1'   action='/serv/pic_processor.php' method='POST'>
<input type='hidden' name='error' value='456'/>
</form> 
```

因此，当它从服务器进入 responseimage 变量时，我将其放入 Div 然后我想访问此表单和名为“错误”的标记的警报值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T15:05:51.510

您可以将包含响应 html 的元素与选择器一起作为上下文传递。

```
selectorElem = '#'+pic_type+'_n_'+pic_number;
$(selectorElem).html(responseimage);
$('form[name=A] #B', $(selectorElem)) 
```

编辑，根据评论

**[现场演示](http://jsfiddle.net/rajaadil/bzMHu/)**

*html*

```
<form id='user_pic_form_n_1' name='user_pic_form_n_1'   action='/serv/pic_processor.php' method='POST'>
<input type='hidden' name='error' value='456'/>
</form>​ 
```

*Javascript*

```
pic_type = 'user_pic';
pic_number= '1';
selectorElem = pic_type+'_form_n_'+pic_number;
selectorElem = 'form[name='+selectorElem +'] :hidden[name=error]';
alert($(selectorElem).val()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T15:04:39.440

完成此操作后：

```
$('#'+pic_type+'_n_'+pic_number).html(responseimage); 
```

并且您正在寻找`#b`带有 class 的内部形式的 val `a`，它将是：

```
$('#'+pic_type+'_n_'+pic_number+ ' form.a #b').val() 
```

# asp.net - 在 ASP.NET 中的 DIV 内水平和垂直居中图像

> ID：13778616
> 
> 赞同：0
> 
> 时间：2012-12-08T14:53:39.753
> 
> 标签：asp.net, css, image, html

我想在 div 中间显示一个 ASP.NET 图像（水平和垂直），我应该如何排列我的 div 和图像（图像应该是 runat=server），我还应该设置 max-width 和 max-height我的图像的样式，DIV 充当占位符，我的图像应该在 DIV 内，并且它应该在水平和垂直方向上完全居中，你能显示我正确的 HTML 和 CSS 吗？有样品吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T15:56:26.983

利用：

CSS

```
 .placeholder{min-width:200px; min-height:200px;}
    .placeholder img{
    margin: 0px auto; /*centers element horizontally*/
    vertical-align:middle; /*centers element vertically */
    } 
```

您的 html 应该类似于：

```
<div class="container">
   <div class="placeholder">
       <!-- load image here -->
   </div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-20T15:35:00.840

我非常努力地寻找解决方案，希望它 100% 有帮助:-)

```
<html>
<style>
.placeholder {
    width: 250px;
    min-width: 250px;
    height: 250px;
    min-height: 250px;
    display: block;
    margin-left: auto;
    margin-right: auto;
    position: absolute;
    left: 50%;
    top: 40%;   
    margin: -100px 0 0 -125px;
}
</style>
<IMG class="placeholder" src="http://www.swoo.co.uk/content/images/icons/stackoverflow.png">
</html> 
```

替换您想要的任何 img 来代替等于“src”的 URL。请注意，它在浏览器中放大和缩小时也可以使用，它完全位于页面的中间，您可以找到最好的代码:)

# css - CSS/HTML：子 DIV 溢出父

> ID：13778619
> 
> 赞同：1
> 
> 时间：2012-12-08T14:53:59.237
> 
> 标签：css, html, height, overflow

如何让父 DIV 环绕子 DIV？问题出`position:absolute`在`.nav-content`.

[http://jsfiddle.net/9H77Y/8/](http://jsfiddle.net/9H77Y/8/)

编辑：嗯，显然我想要的是不可能的。解决这个问题的唯一方法是 javascript，它首先会破坏这个目的。但是，将固定高度设置为`nav-tabs`将起作用。

HTML

```
<div class="nav-tabs-wrapper">
  <div class="nav-tabs">
    <div class="nav-tab">
      <input type="radio" id="tab1" name="nav-group" checked>
      <label for="tab1">foooooooo</label>
      <div class="nav-content">
        <div> stuff1 </div>
      </div>
    </div>
    <div class="nav-tab">
      <input type="radio" id="tab2" name="nav-group">
      <label for="tab2">bar</label>
      <div class="nav-content">
        <div> stuff2 </div>
      </div>
    </div>
  </div>
</div> 
```

CSS

```
.nav-tabs-wrapper
{
    padding: 10px; /* separates the code from other content */
    border: 1px solid #F00; /* visibility aid */
}
.nav-tabs
{
    position: relative; /* needed as future positioning reference base */
            clear: both;
            height: 200px; /* Unfortunate */
    padding-left: 10px; /* provides the paragraph-tab effect to the tabs */
    font: 100%/1.4 Verdana, Arial, Helvetica, sans-serif;
}
.nav-tab
{
    float: left; /* keeps the tabs inline with no gap [inline-block introduces gaps] */
}
.nav-tab label
{
    display: block; /* needed so tabs can be positioned correctly to hide nav-content border */
    position: relative; /* needed to position tabs correctly */
    top: 1px; /* lowers the tabs to cover the border of nav-content; needed so bottom corners aren't slanted, but a 90deg angle */
    padding: 4px;
    border: 1px solid #999;
    border-bottom-width: 0px; /* removes bottom border; needed so bottom corners aren't slanted, but a 90deg angle */
    background-color: #CCC;
}
.nav-tab [type=radio]
{
    display: none; /* hide the radio selectors */
}
.nav-tab [type=radio]:checked ~ label
{
    z-index: 2; /* makes sure that the active tab is drawn above nav-content to cover border */
    background-color: #FFF; /* covers the nav-content border */
}
.nav-tab [type=radio]:checked ~ .nav-content
{
    visibility: visible !important; /* unhides the nav-content div for the current tab */
}
.nav-tab:nth-child(n+2)
{
    margin-left: -1px; /* positions the left border of every second+ tab over the previous tab's right border */
}
.nav-content
{
    visibility: hidden; /* hides the content by default */
    position: absolute; /* positions the content for all tabs to the absolute left relative to the tabs */
    left: 0; /* undo's the padding from the paragraph-tab effect */
    width: 100%; /* fills the nav-content DIV completely for a better looking border */
    z-index: 1; /* makes sure that the border is drawn under the tabs */
    border: 1px solid #999;
}
.nav-content div
{
    padding: 10px; /* separate div needed to keep nav-content from overflowing due to padding */
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-08T14:58:41.663

你不能考虑`position:absolute`元素。

它们完全从文档流中删除。

引用[规格](http://www.w3.org/TR/CSS2/visuren.html#choose-position)

> **absolute**
> 框的位置（可能还有大小）由“ *top* ”、“ *right* ”、“ *bottom* ”和“ *left* ”属性指定。这些属性指定相对于盒子的包含块的偏移量。***绝对定位的盒子从正常流程中取出***。这意味着***它们对后面的兄弟姐妹的布局没有影响***。此外，尽管绝对定位的框有边距，但它们不会与任何其他边距一起折叠。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T12:22:37.203

给 .nav-tab 一个确定的高度，并给溢出：自动（或溢出：隐藏）给 .nav-tabs-wrapper

# java - 一个 HttpClient 在处理最大数量的请求时阻塞？

> ID：13778622
> 
> 赞同：0
> 
> 时间：2012-12-08T14:54:05.837
> 
> 标签：java, concurrency

我在整个应用程序中使用 HttpClient 单例，在任何给定时间，它最多必须同时处理 3 个请求。我想在处理 3 个请求时阻止任何尝试执行请求的线程。到目前为止，这是我的代码：

```
public class BlockingHttpClient implements HttpClient {

    private static final int MAX_CONNECTIONS = 3;

    private static BlockingHttpClient instance;
    private HttpClient delegate;
    private Semaphore semaphore;

    private BlockingHttpClient() {
        delegate = new DefaultHttpClient();
        semaphore = new Semaphore(MAX_CONNECTIONS, true);
        // Set delegate with a thread-safe connectionmanager and params etc..
    }

    public static synchronized BlockingHttpClient getInstance() {
        if(instance == null) {
            instance = new BlockingHttpClient();
        }

        return instance;
    }

    @Override
    public HttpResponse execute(HttpUriRequest request) throws IOException,
            ClientProtocolException {
        HttpResponse response = null;

        try {
            semaphore.acquire();
            response = delegate.execute(request);
            semaphore.release();
        } catch (InterruptedException e) {
            e.printStackTrace();
        }

        return response;
    }

     .... the other delegated methods look the same ... 
```

我担心的是这很难看，即如果调用线程在获取时被中断，那么返回的响应将为空。当谈到 Java 的并发性时，我也很绿色，这种方法还有其他问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T18:19:42.303

为了避免返回空响应，您可以使用的一个肮脏技巧是：

```
 boolean responseOK;
    do {
        try {
            semaphore.acquire();
            response = delegate.execute(request);
            semaphore.release();
            responseOK = true;
        } catch (InterruptedException e) {
            e.printStackTrace();
            responseOK = false;
        }
    } while(!responseOK); 
```

我知道这有点脏，也许你可以在迭代之间添加一些睡眠以防止它变成主动等待，但这是确保请求最终被执行的一种方式（如果其他请求完成，那就是...... ）。

希望能帮助到你！

# asp.net-mvc - 由于下拉列表，ModelState.IsValid 返回 false

> ID：13778625
> 
> 赞同：1
> 
> 时间：2012-12-08T14:54:23.627
> 
> 标签：asp.net-mvc

我是使用 asp.net mvc 4 开发的新手，当我编辑我的一个模型时，我得到 ModelState.IsValid 总是返回 false。我的模型是下一个：

```
public class ShowTime
{
    public int ID { get; set; }

    [Display(Name = "Date")]
    [Required(ErrorMessage = "Date is required")]
    public DateTime Date { get; set; }

    [Display(Name = "Time")]
    [Required(ErrorMessage = "Time is required")]
    public DateTime DateTime { get; set; }

    public virtual Place Place { get; set; }
}

public class Place
{
    public int ID { get; set; }

    [Display(Name = "Place name")]
    [Required(ErrorMessage = "Place name is required")]
    public string Name { get; set; }

    public virtual Address Address { get; set; }
} 
```

然后我有下一个表格来编辑 ShowTimes：

```
<fieldset class="formulari">
    <p>
        @Html.LabelFor(model => model.Date)
        @Html.EditorFor(model => model.Date)
        @Html.ValidationMessageFor(model => model.Date)
    </p>

    <p>
        @Html.LabelFor(model => model.DateTime)
        @Html.EditorFor(model => model.DateTime)
        @Html.ValidationMessageFor(model => model.DateTime)
    </p>            
    <p>
        <label>Escenari</label>
        @Html.DropDownListFor(model => model.Place.ID, new SelectList(new PlaceBLL().GetAll(), "ID", "Name"))
    </p>
    <p>
        @Html.LabelFor(model => model.Ticket.Price)
        @Html.EditorFor(model => model.Ticket.Price, "Ticket", new ViewDataDictionary(Html.ViewDataContainer.ViewData) { TemplateInfo = new System.Web.Mvc.TemplateInfo { HtmlFieldPrefix = "Ticket" } })
        @Html.ValidationMessageFor(model => model.Ticket.Price)
    </p>
    <p>
        @Html.LabelFor(model => model.Ticket.BuyingTicketURL)
        @Html.EditorFor(model => model.Ticket.BuyingTicketURL)
        @Html.ValidationMessageFor(model => model.Ticket.BuyingTicketURL)
    </p>            

    @Html.HiddenFor(model => model.ID)
    @Html.HiddenFor(model => model.Ticket.ID)

    <br />
    <input type="submit" value="Save" />
</fieldset> 
```

这里的问题在于 Place 对象。用户从下拉列表中选择 ShowTime 的地点，当用户单击保存按钮时，模型返回并且 ModelState.IsValid 返回 false，因为模型中 ShowTime 的 Place 对象从 DropDownList 获取其值，并且仅填充了 ID 属性（记住地点的名称属性是必需的），验证模型状态失败，因为地点的属性名称为空。

如果我从下拉列表中获取 place 对象并且 Place 对象未填充其所有属性，如何使模型有效？我相信在这种情况下，我将数据库模型完全映射到视图上是错误的，也许更好的解决方案是创建这样的 ViewModel，并将模型转换为服务器代码上的 ShowTime

```
public class ShowTimeViewModel
{
    public int ID { get; set; }

    [Display(Name = "Date")]
    [Required(ErrorMessage = "Date is required")]
    public DateTime Date { get; set; }

    [Display(Name = "Time")]
    [Required(ErrorMessage = "Time is required")]
    public DateTime DateTime { get; set; }

    public int PlaceID { get; set; }

    public Ticket Ticket { get; set; }
} 
```

其他选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T15:19:42.813

名称永远不会发送到服务器。这就是`<select>`元素的工作原理。它仅将选定的值发送到服务器（即`ID`）。所以使用视图模型并摆脱这个`Name`属性。将 ID 属性设为可为空的整数，并使用Required 属性进行装饰，强制用户在DropDown 中选择一个值。在 POST 操作中取回 ID 后，您可以查询数据库，以便在需要时检索相应的名称。

# php - htaccess 重定向 scss 文件

> ID：13778627
> 
> 赞同：0
> 
> 时间：2012-12-08T14:54:47.070
> 
> 标签：php, .htaccess, sass

我不知道如何编写执行以下操作的 htaccess 规则：

```
seapip.com/bambi/yellow.scss -> seapip.com/magic.php/yellow.scss 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T14:58:10.413

尝试：

```
RewriteRule ^bambi/(.+).scss$ /magic.php/$1.scss [L] 
```

# php - Zend框架中如何将数组值存储在数据库表中？

> ID：13778629
> 
> 赞同：-1
> 
> 时间：2012-12-08T14:55:03.220
> 
> 标签：php, ajax, zend-framework

$array = Array ( [type] => Array ( [0] => course [1] => course )

```
 [c_name] => Array
        (
            [0] => mca
            [1] => bca
        )

    [year] => Array
        (
            [0] => 2013
            [1] => 2010
        )

    [status] => Array
        (
            [0] => pursuing
            [1] => completed
        )

    [entity_type_rm_id] => Array
        (
            [0] => 1
            [1] => 1
        )

) 
```

我正在使用： foreach($array as $row){ 如何创建此数组以存储在 db 表中？}

表名

```
entity_type_rm_courses 
```

和表格列

```
id  | entity_type_rm_id | type | c_name | year | statue 
```

我想设置这样的值

```
id | entity_type_rm_id | type   | c_name | year | statue
--- ------------------- -------- -------- ------ ---------
1  |       1           | course | mca    |2013  | pursuing
2  |       1           | course | bca    |2010  | completed 
```

我想使用 createRow() 方法在表中插入记录

```
$courseRow = $courseTable->createRow($Course);
$courseRow->save();

$courseRow = $courseTable->createRow($Certification);
$courseRow->save(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T15:10:20.737

我认为您的数组与代码不匹配，数组来自哪里，$Course 和 $Certification 是在哪里构建的？

下面的工作吗？

```
$course = array('type'=>'course', 'c_name'=>'mca', 'year'=>2012, 'status'=>'completed');

$courseRow = $courseTable->createRow($course);
$courseRow->save(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T15:00:20.103

虽然从您的问题正文中看不出任何内容，但要将数组存储在数据库中，请使用 serialize()。Serialize 将 PHP 变量转换为字符串形式，以便于存储。unserialize() 反转该过程。

# haskell - 使用 Haskell 打印菱形图案

> ID：13778632
> 
> 赞同：5
> 
> 时间：2012-12-08T14:55:52.830
> 
> 标签：haskell, recursion, io

我需要编写一个 Haskell 程序，该程序将递归生成菱形输出。这是给定输入的一些示例输出

输入：1
输出：

```
 *
* *
 * 
```

输入：2
输出：

```
 *
   * *
    *
 *     *
* *   * *
 *     *
    *
   * *
    * 
```

输入：3
输出：

```
 *             
            * *             
             *              
          *     *           
         * *   * *          
          *     *           
             *              
            * *             
             *              

    *                 *    
   * *               * *   
    *                 *    
 *     *           *     * 
* *   * *         * *   * *
 *     *           *     * 
    *                 *    
   * *               * *   
    *                 *    
             *             
            * *             
             *              
          *     *           
         * *   * *          
          *     *           
             *              
            * *             
             * 
```

我写了以下函数：

```
next 0 = [1,0,1]
next n = map (+3^n) (next (n-1)) ++ next (n-1) ++ map (+3^n) (next (n-1))
lpad n = map (++"*") (zipWith ($) (map (take)(next (n-1))) ((repeat(repeat ' '))))
pretty n = putStrLn $ intercalate "\n" $ lpad n 
```

给出以下输出：

漂亮 1

```
 *
*
 * 
```

漂亮 2

```
 *
   *
    *
 *
*
 *
    *
   *
    * 
```

谁能帮我剩下的一半？提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-08T16:05:31.340

我喜欢这个任务，所以我写了一个替代解决方案。

我们可以构建它，有点像使用漂亮的打印机。查看[漂亮](http://hackage.haskell.org/package/pretty/)的包以获取这些想法并正确使用它们，但让我们坚持使用简单的旧`[String]`方法。

首先让我们制作一个空白网格

```
blank :: Int -> [String]
blank n = replicate (3^n) $ replicate (3^n) ' ' 
```

然后让我们定义一个钻石。

```
diamond :: Int -> [String]
diamond 0 = ["*"]
diamond n = let 
        o = diamond (n-1) 
        x = blank (n-1) in
    joinMatrix [[x,o,x]
               ,[o,x,o]
               ,[x,o,x]] 
```

但是我们如何才能将这个矩阵`[String]`连接在一起呢？首先使用`String`s 将所有应该连接在一起的 s 彼此相邻而不是在彼此下方连接在一起`transpose`，然后将`concat`它们全部连接起来：

```
joinLine :: [[String]] -> [String]
joinLine = map concat.transpose 
```

要对整个矩阵执行此操作，我们需要将每一行的行连接起来，然后将所有行连接到一个行列表中：

```
joinMatrix :: [[[String]]] -> [String]
joinMatrix = concat.map joinLine 
```

打印辅助函数：

```
put = mapM_ putStrLn
d n = put $ diamond n 
```

您可能会争辩说数值解更有效，它确实是，但它是`d 4`适合我屏幕的最大且不慢的。你也可以争辩说这个解决方案更清晰。

```
*Main> d 0
*
*Main> d 1
 * 
* *
 * 
*Main>  d 2
    *    
   * *   
    *    
 *     * 
* *   * *
 *     * 
    *    
   * *   
    * 
```

（它也适用于更高的 n，但他们会使这篇文章在页面上不必要地长。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-08T15:48:22.923

对于`n==0`,`next n`描述整个图片直到镜像。对于更大的情况不再如此`n`。因此，在第一步中，我们更改`next`函数以输出对称图片：

```
mmap = map . map

next :: Int -> [[Int]]
next 0 = [[1],[0,2],[1]]
next n = sn ++ map (\a -> a ++ map (+2*3^n) a) nn ++ sn
  where
    nn = next (n - 1)
    sn = mmap (+3^n) nn 
```

现在，`next n`描述所有星星的位置。为了打印它们，我们首先计算相对距离。

```
diffs :: [Int] -> [Int]
diffs (x:xs) = x: diffs' x (xs)
  where
    diffs' x (y:ys) = y - x - 1 : diffs' y ys
    diffs' _ [] = []
diffs [] = []

lpad :: Int -> [[Char]]
lpad = map (concatMap $ \n -> replicate n ' ' ++ "*") . map diffs . next' 
```

应用于一行，`diffs`返回我们需要在每颗星之前放置的空格数列表，并`lpad`从中生成图片。像以前一样打印它：

```
pretty :: Int -> IO ()
pretty n = putStrLn $ unlines $ lpad n 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T11:24:32.473

这源自 AndrewC 的解决方案。空间块是递归生成的，我更喜欢使用运算符来使代码更清晰：

```
diamond
    = putStr
    . unlines
    . fst
    . (iterate f (["*"], [" "]) !!)
  where
    f (d, e)
        = (  e + d + e
         ++  d + e + d
         ++  e + d + e
          ,  e + e + e
         ++  e + e + e
         ++  e + e + e
          )

    (+) = zipWith (++) 
```

一个概括。如果我们想要这个：

```
 +             
            - -            
             +             
          -     -          
         + +   + +         
          -     -          
             +             
            - -            
             +             
    -                 -    
   + +               + +   
    -                 -    
 +     +           +     + 
- -   - -         - -   - -
 +     +           +     + 
    -                 -    
   + +               + +   
    -                 -    
             +             
            - -            
             +             
          -     -          
         + +   + +         
          -     -          
             +             
            - -            
             + 
```

那么解决方案在`star 3`哪里

```
star
    = putStr
    . unlines
    . (\(d, p, e) -> d)
    . (iterate f (["-"], ["+"], [" "]) !!)
  where
    f (d, p, e)
        = (  e + p + e
         ++  d + e + d
         ++  e + p + e
          ,  e + d + e
         ++  p + e + p
         ++  e + d + e
          ,  e + e + e
         ++  e + e + e
         ++  e + e + e
          )

    (+) = zipWith (++) 
```

# asp.net - 在 .aspx 页面中获取 ID

> ID：13778634
> 
> 赞同：0
> 
> 时间：2012-12-08T14:56:09.080
> 
> 标签：asp.net, request

我正在做一个电影评论网站。ShowMovie.aspx?Id= **6**

我无法从 .aspx 页面中的 url 获取 Id

```
 <table border="1" cellpadding="1" cellspacing="1" style="width: 500px;">
                <tbody>
                    <asp:Repeater ID="Repeater1" runat="server" DataSourceID="SqlDataSource1">
                        <ItemTemplate>
                            <tr>
                                <td>
                                    <asp:Label ID="lblType" runat="server" Text='<%# Eval("Comment") %>'></asp:Label>
                                </td>
                            </tr>
                        </ItemTemplate>
                    </asp:Repeater>
                    <asp:SqlDataSource ID='SqlDataSource1' runat='server' ConnectionString='<%$ ConnectionStrings:con %>'
                        SelectCommand='SELECT [Comment] FROM [Comment] where [MovieId]=<%= Request.QueryString("Id") %>'>
                    </asp:SqlDataSource>
                </tbody>
            </table> 
```

但我可以在 .aspx.cs 页面中使用

```
protected void Page_Load(object sender, EventArgs e)        {
        Id = Request.QueryString["Id"];
        String types = "";
        con = new Connect().Connection();
        cmd = new SqlCommand("Select * from Movie where Id=" + Id, con);
        dr = cmd.ExecuteReader();
        dr.Read();
        lblTitle.Text = dr["Title"].ToString();
        lblDescription.Text = dr["Description"].ToString();
        Picture.ImageUrl = dr["Picture"].ToString();
        dr.Close(); 
```

}

这是“<”附近的错误语法错误。异常详细信息：System.Data.SqlClient.SqlException：“<”附近的语法不正确。

堆栈跟踪：[SqlException (0x80131904)：'<' 附近的语法不正确。]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T15:49:59.813

SelectCommand 不支持表达式。无论如何，您应该为您的 ID 使用参数以避免 sql 注入。一个好的解决方案是像这样定义您的 SqlDataSource：

```
 <asp:SqlDataSource ID='SqlDataSource1' runat='server' 
ConnectionString='<%$ ConnectionStrings:con %>' 
SelectCommand='SELECT [Comment] FROM [Comment] where [MovieId]=@Id'>
     <SelectParameters>
        <asp:Parameter Name="Id" Type="Int32" DefaultValue="0" />
      </SelectParameters>
</asp:SqlDataSource> 
```

然后在页面加载中：

```
SqlDataSource1.SelectParameters["Id"].DefaultValue = Request.QueryString["Id"] 
```

# java - 用Java检查网站的状态

> ID：13778635
> 
> 赞同：1
> 
> 时间：2012-12-08T14:56:14.427
> 
> 标签：java, web

在 Java 中，是否有允许检查网站状态的标准库，即该网站是否可访问？

如果没有，是否有任何第三方库可以做同样的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T15:05:47.393

您可以打开与 URL 的连接并检索响应代码和（可选）内容：

```
 public static boolean isSiteUp(URL site) {
        try {
            HttpURLConnection conn = (HttpURLConnection) site.openConnection();
            conn.getContent();
            if (conn.getResponseCode() == HttpURLConnection.HTTP_OK) {
                return true;
            }
            return false;
        } catch (SocketTimeoutException tout) {
            return false;
        } catch (IOException ioex) {
            // You may decide on more specific behaviour...
            return false;
        }
      } 
```

您认为哪些响应代码表示该站点“向上”和“向下”将稍微取决于您的应用程序。（如果您收到“内容禁止”响应，这是否意味着该站点出于您的目的“已启动”？）除非该站点实际上返回代码说“我已关闭”，否则您需要做出决定例如，超时是否表示站点实际上已关闭，或者您有本地防火墙问题等。但是，上述的一些变体应该就足够了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T15:15:37.520

您可以执行以下操作，您可以在其中获得响应，`200`即可访问，否则无法访问

```
public static boolean isAccessable(String url, int timeout) {
    url = url.replaceFirst("https", "http"); // Otherwise an exception may
                                                // be thrown on invalid SSL
                                                // certificates.

    try {
        HttpURLConnection connection = (HttpURLConnection) new URL(url)
                .openConnection();
        connection.setConnectTimeout(timeout);
        connection.setReadTimeout(timeout);
        connection.setRequestMethod("HEAD");
        int responseCode = connection.getResponseCode();
        if (responseCode != 200) {
            return false;
        }
    } catch (IOException exception) {
        return false;
    }
    return true;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T14:59:06.390

您可以使用[https://hc.apache.org/](https://hc.apache.org/)之类的 HTTP 库发出请求并检查返回码

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-08T15:02:18.540

您可以使用 jersey 客户端（大量示例，例如[http://www.mkyong.com/webservices/jax-rs/restful-java-client-with-jersey-client/](http://www.mkyong.com/webservices/jax-rs/restful-java-client-with-jersey-client/)）

或者你可以使用 org.apache.http.client。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-08T15:13:59.667

您可以使用任何可以进行 http 调用的 JAVA 库。两个这样流行的 java 库是**HttpClient**和**URLConnection**。

因此，您只需要使用上述任一库获取 url 的状态。如果状态为 200，则 URL 已启动。

如果您想在任何基于 unix 的机器上执行此操作，那么**curl**实用程序很容易知道状态。只要做一个男人卷曲你就会得到所有的选择。

# c++ - 在列表框中添加项目 (API)

> ID：13778637
> 
> 赞同：0
> 
> 时间：2012-12-08T14:56:25.520
> 
> 标签：c++, visual-studio, api, listbox

我只想在 C++ 中向我的 listBox 添加一个 wostringstream (tmp) 项。这是我尝试的方式：

```
 for(int i=0; i<6; i++){
    tmp<<hex<<m_device_info.Adress.rgBytes[i];
    if (i<5)
     tmp<<L":";
 }
listBox2->Items->Add(tmp.str()); 
```

我得到的错误是：

> “错误 C2664：'System::Windows::Forms::ListBox::ObjectCollection::Add' 在 'system::object ^' 中转换 'wchar_t' 是不可能的”

有人有线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T15:55:46.423

```
listBox2->Items->Add(System::Runtime::InteropServices::
    Marshal::PtrToStringUni(IntPtr(tmp.str().c_str())));

```

在 .NET 应用程序中使用托管 System::String 类比使用非托管字符串和流更好。如果这不是绝对必要的，请不要混合托管和非托管类型。

这是我的测试项目中的代码：

```
private: System::Void button1_Click(System::Object^  sender, System::EventArgs^  e) {
             std::wostringstream s;
             s << L"test";

             listBox1->Items->Add( System::Runtime::InteropServices::
                 Marshal::PtrToStringUni( IntPtr( (void*)s.str().c_str() ) ) );

         } 
```

# xpages - XPages xe:listView 不会隐藏列

> ID：13778642
> 
> 赞同：1
> 
> 时间：2012-12-08T14:56:46.457
> 
> 标签：xpages, xpages-extlib

我创建了一个示例来演示。我有一个名为“testView”的视图，其中三列引用“field1”、“field2”、“field3”。

当我运行此 XPage 时，显示的所有三列都不应该显示第三列。单击该按钮也不会隐藏第二列。

谁能告诉我我有什么问题？

```
<?xml version="1.0" encoding="UTF-8"?>
<xp:view xmlns:xp="http://www.ibm.com/xsp/core"
    xmlns:xe="http://www.ibm.com/xsp/coreex"
    xmlns:xc="http://www.ibm.com/xsp/custom">

    <xp:this.beforePageLoad><![CDATA[#{javascript:if ( sessionScope.showCol2 == null ) 
    sessionScope.showCol2 = true;}]]></xp:this.beforePageLoad>
    <xe:restService id="restService1">
        <xe:this.service>
            <xe:viewJsonService viewName="testView"
                defaultColumns="true">
            </xe:viewJsonService>
        </xe:this.service>
    </xe:restService>
    <xp:panel style="margin-left:20.0px;margin-top:20.0px">
        <xe:listView id="listView1" storeComponentId="restService1">
            <xe:listViewColumn id="listViewColumn1" columnName="field1"
                columnTitle="Field1">
            </xe:listViewColumn>
            <xe:listViewColumn id="listViewColumn2" columnName="field2"
                columnTitle="Field2">
            <xe:this.rendered><![CDATA[#{javascript:return sessionScope.showCol2;
}]]></xe:this.rendered></xe:listViewColumn>
            <xe:listViewColumn id="listViewColumn3" columnName="field3"
                columnTitle="Field3" rendered="false">
            </xe:listViewColumn>
        </xe:listView></xp:panel>
    <xp:panel style="margin-top:20.0px;margin-left:20.0px">
        <xp:button id="button1" value="Toggle Column 2">
            <xp:eventHandler event="onclick" submit="true"
                refreshMode="partial" refreshId="listView1">
                <xp:this.action><![CDATA[#{javascript:if (     sessionScope.showCol2 == false ) { 
    sessionScope.showCol2 = true;
}
else { 
    sessionScope.showCol2 = false;
}}]]></xp:this.action>
            </xp:eventHandler></xp:button>
    </xp:panel></xp:view> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T11:31:23.473

看起来像 ExtLib 中的一个错误。但是您可以使用*hidden* * 属性隐藏代码中的列：

```
<xp:button id="button1" value="Toggle Column 2">
   <xp:eventHandler event="onclick" submit="true"
      refreshMode="partial" refreshId="listView1">
         <xp:this.action>
            <![CDATA[#{javascript:
               var cmp = getComponent('listViewColumn2');
               if( cmp.isHidden() ){
                  cmp.setHidden(false);
               }else{
                  cmp.setHidden(true);
               }
            }]]>
         </xp:this.action>
   </xp:eventHandler>
</xp:button> 
```

*：该属性也被隐藏

# sql - 如何为 SQL Server 中的所有表列设置默认值？

> ID：13778643
> 
> 赞同：0
> 
> 时间：2012-12-08T14:56:50.967
> 
> 标签：sql, database

如何为 SQL Server 中的所有表列设置默认值？

如果它是字符串，它将为空，如果它在已创建的表中是 int。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T15:01:44.550

添加`DEFAULT`约束

这是执行此操作的方法：

```
CREATE TABLE Persons
(
id int NOT NULL,
LName varchar(25) NOT NULL,
FName varchar(25),
Addr varchar(255),
City varchar(255) DEFAULT 'Hawaii'
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T15:20:24.533

如果您使用 GUI 设计表而不是使用 SQL 语句创建表，您也可以在 SQL Server Management Studio 中执行此操作。

为此（在我的脑海中），选择您正在编辑的列，属性窗口应该是可见的（如果不是我认为 f4 会打开它）。大约一半可以设置列默认值。

# java - 是否可以在 IntelliJ Idea 中超链接评论？

> ID：13778645
> 
> 赞同：21
> 
> 时间：2012-12-08T14:56:56.097
> 
> 标签：java, intellij-idea

我正在使用 IntelliJ Idea 进行 Android 开发。有什么方法可以在 IDE 中超链接两条评论。例如

**文件** *a.java*

```
import a;

/**
* This class does something and something
* and does implements interface b, 
* (i want a hyperlink here, if pressed opens file b.java in IDE and cursor is at comments        
*  before method n)
*/

public class a {
  //do something
} 
```

**文件** *b.java*

```
import k;

public interface b {

   public j;
   public m;
   /**
    * This will be used when this and this will happen.
   */  
   public n;
} 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-08T15:32:07.910

[您可以在此处](http://docs.oracle.com/javase/7/docs/technotes/tools/windows/javadoc.html#see)使用 Javadocs 的`@see`标记示例。

做这样的事情就足够了：

```
/**
* Bla bla bla
* @see b#n
*/
public class a 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2015-11-26T15:59:54.603

当前的 IntelliJ 版本支持 @link 表示法，就像 Eclipse 一样。

要链接到另一个类/方法，只需使用以下模式：

```
/**
 * {@link Class#method}
 */
public void myMethod() {
} 
```

您还可以保留该方法，或将参数类型列表添加到该方法（在括号中），如果方法使用不同的参数实现并且您想要链接到特定的参数，这很有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-05-05T16:19:06.847

您可以只使用方括号，格式为：`[class.method]`. 对于您的示例，它将如下所示：

```
/**
* This class does something and something
* and does implements interface [b.n]
*/ 
```

# java - CGI 和 Apache Struts

> ID：13778647
> 
> 赞同：-1
> 
> 时间：2012-12-08T14:57:10.543
> 
> 标签：java, struts, cgi

我正在阅读[struts in action](https://rads.stackoverflow.com/amzn/click/com/1930110502)，它说CGI是struts的使能技术之一，有人可以帮助我理解CGI和struts之间的关系吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T15:46:37.013

CGI 和 Struts 是两个“Web 应用程序框架”。我相信很多人可能不同意将 CGI 归类为 Web 应用程序框架，并且我怀疑当 CGI 是处理动态 Web 资源请求的主要框架时，这个术语并不存在，但它本质上是相同的事物。

Web 应用程序框架只是提供开箱即用的基础设施来处理处理每个 Web 请求时必须完成的琐事。这些包括解组传入请求参数、验证该数据、处理响应上的 HTTP 标头等。CGI 是最早的机制之一。Struts 是事实上的 Web 应用程序框架，持续了近十年，几年前就结束了。

在过去的几年里，出现了一批全新的“第二代”Web 应用程序框架。这些新特性包括对快速开发的支持、对 Ajax 的支持、对单元测试的支持以及采用约定优于配置模式。

所以，这应该回答你的问题。但是，正如评论者所建议的那样，除非您进行某种历史研究，否则没有理由继续阅读有关 Struts 的信息。Struts2 是一个不错的选择，还有其他的。这个话题很热门。询问哪个框架最好是 stackoverflow 上的一条广泛流传的路径。

虽然这是一个完全有效的想法，但事实是它并不是那么简单。如果您从一般意义上提出问题，那么就没有答案；至少有 6 个不错的选择（我完全凭空选择了 6 个）。如果您对您的应用程序有特定要求，那么您可以开始进行一些评估。但是，只有在有具体要求的情况下才能进行评估。

# java - 为什么静态初始化块中不允许有限定的静态最终变量？

> ID：13778650
> 
> 赞同：53
> 
> 时间：2012-12-08T14:57:22.003
> 
> 标签：java, static, final, static-initialization, qualified-name

## 情况1

```
class Program {
    static final int var;

    static {
        Program.var = 8;  // Compilation error
    }

    public static void main(String[] args) {
        int i;
        i = Program.var;
        System.out.println(Program.var);
    }
} 
```

## 案例2

```
class Program {
    static final int var;

    static {
        var = 8;  //OK
    }

    public static void main(String[] args) {
        System.out.println(Program.var);
    }
} 
```

为什么**情况 1**会导致编译错误？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-12-08T15:05:27.830

JLS 给出了答案（注意粗体声明）：

> 同样，每个空白的 final 变量最多只能赋值一次；当对它进行分配时，它必须*绝对未分配。***当且仅当变量的简单名称（或者，对于字段，其简单名称由此限定）出现在赋值运算符的左侧时，才定义这样的赋值。**[ [§16](http://docs.oracle.com/javase/specs/jls/se7/html/jls-16.html) ]

这意味着在分配静态最终变量时必须使用“简单名称” - 即没有任何限定符的 var 名称。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-08T17:51:50.053

Apparently this is a cheap syntactic trick to limit definite (un)assignment analysis within the class itself.

If the field is syntactically qualified with a class name, the code is *usually* in another class, where the analysis cannot reach.

This trick fails in your example. Other examples of oddity:

```
static class A
{
    static final int a;
    static
    {
        // System.out.println(a); // illegal
        System.out.println(A.a);  // compiles!
        a = 1;
    }
} 
```

If they had more resources, they probably would've made a finer rule. But we can't change spec now.

# php - Ruby 到 PHP AES

> ID：13778653
> 
> 赞同：2
> 
> 时间：2012-12-08T14:58:02.977
> 
> 标签：php, ruby, aes, sha256, cbc-mode

我试图将一些在 CBC 模式下使用 AES 265 加密数据的 ruby​​ 代码转换为 php，但它不起作用，转换后的 php 代码返回一个空字符串。这是我所拥有的：

红宝石：

```
require 'openssl'

module AESCrypt
  def self.encrypt(message, password)
    Base64.encode64(self.encrypt_data(message.to_s.strip, self.key_digest(password), nil, "AES-256-CBC"))
  end

  def self.decrypt(message, password)
    base64_decoded = Base64.decode64(message.to_s.strip)
    self.decrypt_data(base64_decoded, self.key_digest(password), nil, "AES-256-CBC")
  end

  def self.key_digest(password)
    OpenSSL::Digest::SHA256.new(password).digest
  end

def self.decrypt_data(encrypted_data, key, iv, cipher_type)
    aes = OpenSSL::Cipher::Cipher.new(cipher_type)
    aes.decrypt
    aes.key = key
    aes.iv = iv if iv != nil
    aes.update(encrypted_data) + aes.final  
  end

def self.encrypt_data(data, key, iv, cipher_type)
    aes = OpenSSL::Cipher::Cipher.new(cipher_type)
    aes.encrypt
    aes.key = key
    aes.iv = iv if iv != nil
    aes.update(data) + aes.final      
  end
end 
```

和PHP代码：

```
echo base64_encode($encrypted_data = mcrypt_encrypt(MCRYPT_RIJNDAEL_128, hash('sha256', 'p4ssw0rd'), 'hey', MCRYPT_MODE_CBC)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T15:05:49.623

看一下

[https://github.com/nirnanaaa/xlix/blob/master/xlix/lib/Xlix/Bundle/Crypto/Aes/TwoLevel.php](https://github.com/nirnanaaa/xlix/blob/master/xlix/lib/Xlix/Bundle/Crypto/Aes/TwoLevel.php)

我前段时间根据我在网上找到的 GIST 为我的加密函数写了这个

# excel - 更新外部数据时暂停 Excel VBA

> ID：13778656
> 
> 赞同：0
> 
> 时间：2012-12-08T14:58:11.567
> 
> 标签：excel, vba

我有一个正在循环的宏。我想将其设置为记录来自外部源的动态数据。

但是，在宏运行时，它不允许更新外部数据。

我已经尝试过 DoEvents，但在宏停止之前，数据根本不会从外部源刷新。

任何人都可以建议答案吗？

谢谢

TT

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T14:08:53.453

好问题（不管其他人怎么说），不需要代码来回答它。答案是：问题出在外部连接上，而不是代码上。

转到功能区 > 数据 > 连接。现在对于每个连接，转到属性并禁用后台刷新。

后台刷新是使外部数据更新并行而不是串行过程的选项。禁用它会将其放回串行线路中，您的代码将不得不等到刷新完成！

祝你好运。

# c++ - shared_ptr 如何提供 noexcept 分配？

> ID：13778664
> 
> 赞同：22
> 
> 时间：2012-12-08T14:59:39.713
> 
> 标签：c++

怎么能`std::shared_ptr`提供`noexcept` `operator=`？当然，如果这`shared_ptr`是最后一个，那么它必须销毁其内容，并且不能保证该对象的析构函数不抛出，或者原来使用的自定义删除器不抛出。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-08T15:08:01.103

[对我来说看起来像是一个缺陷，尽管我在活动问题列表](http://www.open-std.org/jtc1/sc22/wg21/docs/lwg-active.html)中找不到一个（尽管 #2104 是*相似*的）。

*   Per `[C++11: 20.7.2.2.3/1]`，分配被定义为等价于`shared_ptr(r).swap(*this)`;

*   但per `[C++11: 20.7.2.2.2]`，`~shared_ptr`本身不是`noexcept`。

除非我误解了`noexcept`工作方式，否则这一定是一个错误。

或者，它可能只是意味着赋值运算符仅在基础对象类型和删除器类型都不会引发破坏时才可用，尽管即使在这种情况下，标准措辞中缺乏任何信息性注释让我认为这不太可能.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-08T17:39:49.680

According to the isocpp forums, `shared_ptr` simply assumes that the deleter will not throw, and otherwise is UB. This would mean that the real defect is that `shared_ptr`'s destructor is not marked as nothrow.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-08T16:58:17.837

重要的是要注意`reset()`（不带参数）并且`swap`也被声明`nothrow`。

此外，如果我们看一下`boost::shared_ptr`它提供了相同的声明，除了它还声明它是析构函数`never throws`，`std::shared_ptr`因为某些原因没有。

据我了解，它的意思不是“我保证~T() 不会抛出”，而是“我**禁止**~T() 抛出并希望你知道你在做什么”。

# javascript - 单选按钮和显示无

> ID：13778665
> 
> 赞同：1
> 
> 时间：2012-12-08T14:59:43.717
> 
> 标签：javascript

我正在创建一个订单表单，当单击按钮时，它会在单独的 div 中显示图像。该代码适用于复选框，但单选按钮不会隐藏先前单击的图像。

```
function displayImage(id) {
    var el = document.getElementById(id);
    if (el.style.display == "inline") {
        el.style.display = "none";
    } else {
        el.style.display = "inline";
    }
} 
```

* * *

```
<tr>
    <td>
        <input type="radio" name="cheese" id="chkcheese" value="Yellow American" onclick="displayImage('imgamerican');" />
        <label for="chkcheese">Yellow American</label>
    </td>
    <td>
        <input type="radio" name="cheese" value="Pepper Jack" id="pepperjack" onclick="displayImage('imgjack');" />
        <label for="chkjack">Pepper Jack</label>
    </td>
    <td>
        <input type="radio" name="cheese" value="Mozzarella" id="chkmozz" onclick="displayImage('imgmozz');"/>
        <label for="chkmozz">Mozzarella</label>
    </td>
</tr>

<div class="cheese">
    <img id="imgamerican" src="images/american-cheese-slice.png" style="display:none"/>
    <img id="imgcheddar" src="images/agedcheddar.png" style="display:none"/>
    <img id="imgjack" src="images/pepperJack.png" style="display:none" />
    <img id="imgswiss" src="images/swisscheese.png" style="display:none" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T15:10:42.540

点击事件只发生在被点击的收音机上。

您需要迭代单选按钮并确保取消选中的按钮隐藏了相应的图像，或者只是迭代图像并在显示单击单选按钮之前隐藏它们。

```
function displayImage(id) {
    var imgs = document.querySelectorAll(".cheese > img");

    for (var i = 0; i < imgs.length; i++) {
        imgs[i].style.display = "none";
    }
    document.getElementById(id).style.display = "inline";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T15:16:34.177

看起来您的问题是`click`当单选按钮变为`unchecked`. 但事实并非如此。您需要专门更改最后显示的奶酪的显示，但仅当它是单击的单选按钮时。

这个解决方案有点像黑客，但它应该在这种情况下工作：

JavaScript：

```
var lastUnique;
function displayImage(id, unique) {
    var el = document.getElementById(id);

    if (unique) {
        if (lastUnique) {
            lastUnique.style.display = 'none';
        }

        lastUnique = el;
    }

    el.style.display = 'block';
} 
```

单选按钮（注意添加的`true`）：

```
<tr>
  <td><input type="radio" name="cheese" id="chkcheese" value="Yellow American" onclick="displayImage('imgamerican', true);" />
  <label for="chkcheese">Yellow American</label></td>
  <td><input type="radio" name="cheese" value="Pepper Jack" id="pepperjack" onclick="displayImage('imgjack', true);" />
  <label for="chkjack">Pepper Jack</label></td>
  <td><input type="radio" name="cheese" value="Mozzarella" id="chkmozz" onclick="displayImage('imgmozz', true);" />
  <label for="chkmozz">Mozzarella</label></td>
</tr> 
```

因此，JavaScript 会跟踪显示的最后一个元素，唯一参数为真，并在另一个调用`unique == true`发生时隐藏它。

**在旁边：**

您可能会研究如何在现代世界中完成事件处理。这是做这件事的老方法，而且它不是完全可以管理的。

此外，考虑研究模块化和封装技术。

# jquery - Jquery div在点击时不显示

> ID：13778666
> 
> 赞同：1
> 
> 时间：2012-12-08T14:59:44.800
> 
> 标签：jquery, jquery-ui

这段代码有什么问题？它没有在点击时显示 37DIV

```
<a href="#" id="37" class="he"> CS504 </a>
<script>
$( "#37" ).click(function() {
    $( "37DIV" ).show( "bounce", 1000 );
});
</script>
<div id="37DIV" style="display:none">       
        <a href="thread-52.html">lorem pum sum</a>          
        <a href="thread-52.html">lorem pum sum</a>      
        <a href="thread-52.html">lorem pum sum</a>      
        <a href="thread-52.html">lorem pum sum</a>      
        </div>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
<script src="http://code.jquery.com/ui/1.9.0/jquery-ui.js"></script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T15:00:50.117

你忘记了告诉 jQuery 按 id 搜索的 #。

代替

```
$( "37DIV" ). 
```

和

```
$("#37DIV" ). 
```

您还应该在准备好的回调中准备好您的代码。

而且你必须在使用之前导入 jQuery。将导入元素放在文档的头部：

```
<!DOCTYPE html>
<html>
<head>
  <title> no title </title>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
  <script src="http://code.jquery.com/ui/1.9.0/jquery-ui.js"></script>
</head>
<body>
<a href="#" id="37" class="he"> CS504 </a>
<div id="37DIV" style="display:none">       
        <a href="thread-52.html">lorem pum sum</a>          
        <a href="thread-52.html">lorem pum sum</a>      
        <a href="thread-52.html">lorem pum sum</a>      
        <a href="thread-52.html">lorem pum sum</a>      
</div>
<script>
$(function(){
  $("#37").click(function() {
    $("#37DIV").show( "bounce", 1000 );
  });
});
</script>
</body>
</html> 
```

请注意，以数字开头的 ID 在 HTML4 中无效（但这应该不是问题）。还要注意 jQuery 1.5 已经很老了。您应该使用更新的版本，因为您使用的是最近的 jQuery UI。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T15:00:50.657

您需要在选择器中的 id 之前，在[**此处**](http://api.jquery.com/category/selectors/)`#`阅读有关选择器的更多信息[](http://api.jquery.com/category/selectors/)

 **改变

```
 $("37DIV" ).show( "bounce", 1000 ); 
```

到

```
 $("#37DIV" ).show( "bounce", 1000 ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T15:04:10.400

$("#37DIV")。而不是 $("37DIV")。其中 # 指定 ID

```
$( "#37" ).click(function() {
    $( "#37DIV" ).show( "bounce", 1000 );
}); 
```

[http://jsfiddle.net/TgZKn/5/](http://jsfiddle.net/TgZKn/5/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-08T15:13:36.827

试试这个：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
<script src="http://code.jquery.com/ui/1.9.0/jquery-ui.js"></script>    
<script>
$(document).ready(function() {

    $( "#37" ).click(function() {
    $( "#37DIV" ).show("bounce", 1000);
});

});

</script>

</head>

<body>

<a href="#" id="37" class="he"> CS504 </a>
<div id="37DIV" style="display:none">       
        <a href="thread-52.html">lorem pum sum</a>          
        <a href="thread-52.html">lorem pum sum</a>      
        <a href="thread-52.html">lorem pum sum</a>      
        <a href="thread-52.html">lorem pum sum</a>      
        </div>
</body>
</html> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-08T15:16:27.460

对于切换检查以下

```
$( "#37" ).click(function() {
    $( "#37DIV" ).toggle("bounce" );
}); 
```

[http://jsfiddle.net/TgZKn/5/](http://jsfiddle.net/TgZKn/5/)**

# macos - 是否可以将 Mac OS X 上的 Instruments 分析器扩展为一种新语言？

> ID：13778669
> 
> 赞同：1
> 
> 时间：2012-12-08T15:00:07.840
> 
> 标签：macos, haskell, profiling, instruments

我想在 Mac 上使用 Instruments 分析器来分析 Haskell 代码。但是，Haskell 不是 Xcode/Instruments 支持的语言。

是否可以扩展 Instruments 以支持使用新的/不受支持的语言进行分析？会涉及什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T15:12:38.180

Instruments 是[DTrace 的前端](https://developer.apple.com/library/mac/#documentation/developertools/Conceptual/InstrumentsUserGuide/CreatingCustomInstruments/CreatingCustomInstruments.html#//apple_ref/doc/uid/TP40004652-CH8-SW1)。您可以[将 DTrace 挂钩与 GHC 一起使用](http://hackage.haskell.org/trac/ghc/wiki/DTrace)。

# objective-c - 带有分析器的内存泄漏 pList 数组 - 如何解决？

> ID：13778679
> 
> 赞同：0
> 
> 时间：2012-12-08T15:01:15.087
> 
> 标签：objective-c, object, memory, copy, retain

我有一个项目，我从 pList 文件加载字典对象数组，然后遍历它们以实例化应用程序的一些“章节”。分析器告诉我有内存泄漏，但如果我从 pList 中释放字典对象，应用程序就会崩溃。我了解内存管理的基础知识，但对于是否保留或复制 pList 中的值有点困惑。下面是代码：

```
NSArray *chapterDictsArray = [[NSArray alloc] initWithContentsOfFile:path];

//Create array to hold all chapeters and levels 

mChapters = [[NSMutableArray alloc] init];
//(this value is synthesized as @synthesized chapters = mChapters;
// defined in the header @property (nonatomic, readonly) NSMutableArray *chapters;

NSMutableDictionary *eachChapterDict = nil;
for (eachChapterDict in chapterDictsArray) {
    //Create a chpater from each
    ChapterData *aChapter = [[ChapterData alloc] initWithDictionary:eachChapterDict];
    //[aChapter trace];
    //Only add those that are enabled
    if(aChapter.enabled || [aChapter isComingSoon] == YES)
    {
        [mChapters addObject:aChapter];
    }
    [aChapter release];
}
// [chapterDictsArray release];//<--uncommenting this causes the app to crash

//Set last level of game flag so we know its the last when completed
ChapterData *veryLastChapter = [mChapters objectAtIndex:[mChapters count]-2];
//Analyzer states potential leak here of an object stored in chapterDictsArray (has a retain count of +1) ??? 
```

我想知道我在 Chapter 类中处理我的属性的方式是否是我编写的 initWithDictionary 方法中的问题，我正在分配和保留这样的属性：

```
self.enabled = [[aChapterDictionary objectForKey:@"enabled"] boolValue]; //header file @property (nonatomic, assign)BOOL enabled;

//and 
 self.instructions = [aChapterDictionary objectForKey:@"instructions"];//@property (nonatomic, retain)NSString* title; 
```

我是否应该复制这些值。只是混淆了如何清理这个混乱，所以分析器停止报告它。顺便说一句，应用程序运行 frin 并且这些对象在应用程序的整个生命周期内都存在，所以目前不会引起任何问题，但我确定我做错了什么（或一些错误）。

有人可以为我翻译分析器警告吗？

# android - 输入修改 URL Webview？

> ID：13778680
> 
> 赞同：0
> 
> 时间：2012-12-08T15:01:36.747
> 
> 标签：android, variables, android-activity, webview

用户有一个带有编辑文本和按钮的活动。在编辑文本中，他们必须插入他们的登录 ID。然后按 go 以显示其他活动，其中 webview 加载了正确的站点。

一个例子。这是我希望用户访问的链接。www.example.com/time/id=1 ***/*** type=student

如果 sombody 在编辑文本中输入 2，它将打开学生 id 2 的时间，依此类推。

这就是我所拥有的。

**登录**

```
package com.beter;

import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.app.Activity;
import android.content.Intent;

public class LoginActivity extends Activity {

Button go_btn;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.login);

            go_btn = (Button) findViewById(R.id.go_btn);

      go_btn.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            Intent myIntent = new Intent(LoginActivity.this, WebActivity.class);
            LoginActivity.this.startActivity(myIntent);
        }
    });      
} 
```

**和布局**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<EditText
    android:id="@+id/idfield"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:ems="10"
    android:hint="@string/id"
    android:inputType="number" >

    <requestFocus />
</EditText>

<Button
    android:id="@+id/go_btn"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:layout_toRightOf="@+id/idfield"
    android:text="@string/login" /> 
```

**Webview 活动**

```
package com.beter;

import android.app.Activity;
import android.os.Bundle;
import android.webkit.WebView;

public class WebActivity extends Activity  {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.webview);

    WebView webview = new WebView(this);
    setContentView(webview);

    webview.loadUrl("http://roosters.gepro-osi.nl/roosters/rooster.php?wijzigingen=1&leerling=116277&type=Leerlingrooster&afdeling=12-13_OVERIG&school=905");
}
} 
```

**再次布局**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <WebView
        android:id="@+id/webView1"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />

</LinearLayout> 
```

我如何进行用户输入。显示良好的网络视图。?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T15:11:03.100

首先在您的登录活动中获取对您的编辑文本的引用

```
 go_btn = (Button) findViewById(R.id.go_btn);
 ed_txt = (EditText)findViewById(R.id.youredittextid); 
```

将您的 onClick 更改为

```
public void onClick(View v) {
  Intent myIntent = new Intent(LoginActivity.this, WebActivity.class);
  myIntent.putExtra("id", ed_txt.getText());
  LoginActivity.this.startActivity(myIntent);
} 
```

然后在您的 WebActivity onCreate 中检索此 id

```
String id = getIntent().getExtras().getString("id"); 
```

那么你的网址将是

```
String myURL = "www.example.com/time/id="+id+"/type=student"; 
```

# ruby-on-rails - 从 Sprockets 中的所需文件中获取文件

> ID：13778688
> 
> 赞同：0
> 
> 时间：2012-12-08T15:02:18.140
> 
> 标签：ruby-on-rails, ruby, gem, sprockets, middleman

我想需要一个本身需要其他 javascript 文件的 javascript 文件：

*在 main.js*

```
//= require plugins

... Shared Code 
```

*在 plugins.js 中*

```
//= require vendor/handlebars-1.0.rc.1.js
//= require vendor/jquery.animate-colors-min.js
//= require vendor/spin.min.js 
```

然而，尽管 sprockets 将 plugins.js 的内容添加到 main.js，但它似乎并没有评估其中的需求，因此它们作为注释包含在编译后的 main.js 中，而不是拉入 js 文件并包含它们.

*在编译好的 main.js*

```
//= require vendor/handlebars-1.0.rc.1.js
//= require vendor/jquery.animate-colors-min.js
//= require vendor/spin.min.js

...Shared Code 
```

如果我将这些需求添加到 main.js 而不是 plugins.js 中，它们是 propprly 必需的，并且它们的内容包含在编译的 main.js 中

那么为什么 sprockets 不评估 plugins.js 中的包含？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T13:26:46.130

您应该将`//=`指令放在 plugins.js 的顶部

# android - 将xml中相邻视图的ID传递给自定义视图并在自定义视图的构造函数中检索它

> ID：13778690
> 
> 赞同：4
> 
> 时间：2012-12-08T15:02:29.967
> 
> 标签：android, android-layout, android-widget, android-custom-view

下面是我的xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:padding="5dp" xmlns:app="http://schemas.android.com/apk/res/com.infibeam.allthingsd.apps.spinr">

   <com.asyncimagewidget.AsyncImageView
        android:id="@+id/discover_list_icon"
        android:layout_width="130dp"
        android:layout_height="130dp"
        android:layout_alignParentLeft="true"
        android:layout_centerHorizontal="true"
        app:progressId="@+id/asyncLoadingProgress"
         />
    <ProgressBar
        android:id="@+id/asyncLoadingProgress"
        android:layout_width="130dp"
        android:layout_height="130dp"
        android:layout_alignParentLeft="true"
        android:layout_centerHorizontal="true"
     />
</RelativeLayout> 
```

你可以看到

> app:progressId="@+id/asyncLoadingProgress"

这是我在 attrs.xml 中定义的自定义属性，如下所示。

```
<resources>
    <declare-styleable name="AsyncImageView">
        <attr name="defaultSrc" format="reference" />
        <attr name="parentId" format="reference" />
        <attr name="progressId" format="reference" />
        <attr name="url" format="string" />
        <attr name="inDensity">
            <enum name="ldpi" value="120" />
            <enum name="mdpi" value="160" />
            <enum name="hdpi" value="240" />
            <enum name="xhdpi" value="320" />
        </attr>
    </declare-styleable>
</resources> 
```

**现在我的问题是我想在 AsyncImageView 的构造函数中获取 Progressbar 的资源标识符，如下所示。**

```
public AsyncImageView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);

        initializeDefaultValues();

        TypedArray a = context.obtainStyledAttributes(attrs,
                R.styleable.AsyncImageView, defStyle, 0);

        Drawable d = a.getDrawable(R.styleable.AsyncImageView_defaultSrc);
        if (d != null) {
            setDefaultImageDrawable(d);
        }

        final int inDensity = a
                .getInt(R.styleable.AsyncImageView_inDensity, -1);
        if (inDensity != -1) {
            setInDensity(inDensity);
        }

        setUrl(a.getString(R.styleable.AsyncImageView_url));

        a.recycle();

    } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-08T15:17:55.967

> 现在我的问题是我想在 AsyncImageView 的构造函数中获取 Progressbar 的资源标识符，如下所示。

如果我没记错的话，您可以[`getResourceId()`](http://developer.android.com/reference/android/content/res/TypedArray.html#getResourceId%28int,%20int%29)在构造函数中使用该方法：

```
TypedArray a = context.obtainStyledAttributes(attrs, R.styleable.AsyncImageView, defStyle, 0);
int progressId = a.getResourceId(R.styleable.AsyncImageView_progressId, 0); 
```

此外，如果您`ProgressBar`在`AsyncImageView`属性中声明 id ，那么我认为您需要为 id 设置这样的 id `ProgressBar`：

```
android:id="@id/asyncLoadingProgress" 
```

# c# - 将 XML 节点存储在数组中

> ID：13778692
> 
> 赞同：0
> 
> 时间：2012-12-08T15:02:41.950
> 
> 标签：c#, .net

我在 XML 响应下面有这个。我需要将每个节点及其值存储在一个数组中，并将 URL 中的数组作为查询字符串附加并重定向到不同的页面。请帮忙

```
<responseId>76</responseId>
<status>SUCCESS</status>
<result>
    <reference_number>FA002900118</reference_number>
    <remitter_id>10023</remitter_id>
    <remitter_name>TEST SACCO</remitter_name>
    <beneficiary_id>9</beneficiary_id>
    <beneficiary_name>KENYA USA DIASPORA SACCO LTD</beneficiary_name>
    <trans_type>Account</trans_type>
    <destination_country>Kenya</destination_country>
    <source_currency>USD</source_currency>
    <source_transfer_amount>10.00</source_transfer_amount>
    <rate>83.4000</rate>
    <destination_currency>KES</destination_currency>
    <destination_amount>834.00</destination_amount>
    <commission>5.00</commission>
    <agent_fee>0.00</agent_fee>
    <hq_fee>0.00</hq_fee>
    <remitter_pay_amount>15.00</remitter_pay_amount>
    <agent_deduction>2.50</agent_deduction>
    <agent_to_pay_hq>12.50</agent_to_pay_hq>
    <delivery_date>2012-12-07 00:00:00-05</delivery_date>
    <payment_token>3954d4d87aa2926dbb6150658881ec4622b101b6</payment_token>
</result> 
```

我以某种方式使用了一些代码来获取带有一些定界符的输出，但仍然困惑如何将其放入数组中并将其作为查询字符串传递到下一页

字符串 str = "";

```
 XmlTextReader reader = new XmlTextReader("D:/TempXml.Xml");
    while (reader.Read())
    {
        XmlNodeType nodeType = reader.NodeType;
        switch (nodeType)
        {
            case XmlNodeType.Element:
                str+= " Element - " + reader.Name + ";";
                if (reader.HasAttributes)
                {
                    for (int i = 0; i < reader.AttributeCount; i++)
                    {
                        reader.MoveToAttribute(i);
                        str+= "Attribute - " + reader.Name + reader.Value;
                    }
                }
                break;
            case XmlNodeType.Text:
                str += " Value - " + reader.Value + ";";
                break;
        }
    }
    Label1.Text = str; 
```

输出

元素 - 响应；元素 - responseId；值 - 76；元素 - 状态；价值——成功；元素 - 结果；元素 - 参考编号；值 - FA002900118；元素 - remitter_id；值 - 10023；元素 - 汇款人姓名；价值 - TEST SACCO；元素 - beneficiary_id；值 - 9；元素 - 受益人名称；价值 - KENYA USA DIASPORA SACCO LTD; 元素 - trans_type; 价值 - 账户；元素 - 目的地国家；价值 - 肯尼亚；元素 - source_currency; 价值 - 美元；元素 - source_transfer_amount；值 - 10.00；元素 - 速率；价值 - 83.4000；元素 - 目的地货币；价值——KES；元素-destination_amount；价值 - 834.00；元素——佣金；值 - 5.00；元素 - agent_fee；值 - 0.00；元素 - hq_fee；值 - 0.00；元素 - remitter_pay_amount；价值 - 15.00; 元素 - agent_deduction；值 - 2.50；元素 - agent_to_pay_hq；价值 - 12.50；元素 - 交付日期；价值 - 2012-12-07 00:00:00-05; 元素 - payment_token；值 - 3954d4d87aa2926dbb6150658881ec4622b101b6；

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T15:47:29.027

使用您可以获得`List`的下一个代码`KeyValuePair`，其中键是标签名称，值是标签内容文本：

```
string responce = @"
<responce>
<responseId>76</responseId>
<status>SUCCESS</status>
<result>
<reference_number>FA002900118</reference_number>
<remitter_id>10023</remitter_id>
<remitter_name>TEST SACCO</remitter_name>
<beneficiary_id>9</beneficiary_id>
<beneficiary_name>KENYA USA DIASPORA SACCO LTD</beneficiary_name>
<trans_type>Account</trans_type>
<destination_country>Kenya</destination_country>
<source_currency>USD</source_currency>
<source_transfer_amount>10.00</source_transfer_amount>
<rate>83.4000</rate>
<destination_currency>KES</destination_currency>
<destination_amount>834.00</destination_amount>
<commission>5.00</commission>
<agent_fee>0.00</agent_fee>
<hq_fee>0.00</hq_fee>
<remitter_pay_amount>15.00</remitter_pay_amount>
<agent_deduction>2.50</agent_deduction>
<agent_to_pay_hq>12.50</agent_to_pay_hq>
<delivery_date>2012-12-07 00:00:00-05</delivery_date>
<payment_token>3954d4d87aa2926dbb6150658881ec4622b101b6</payment_token>
</result>
</responce>";

        StringReader reader=new StringReader(responce);

        XElement root = XElement.Load(reader);

        XElement resultNode = (XElement)root.Nodes().Single(node => ((XElement)node).Name == "result");

        IList<KeyValuePair<string, string>> result = new List<KeyValuePair<string, string>>();

        foreach(XElement item in resultNode.Nodes())
        {
            KeyValuePair<string, string> resultItem = new KeyValuePair<string, string>(item.Name.ToString(), item.Value);
            result.Add(resultItem);
        } 
```

我认为您可以创建查询字符串表单列表。对于重定向到 ASP.NET 中的其他页面，您可以使用`HttpResponce.Redirect`（更多信息 [http://msdn.microsoft.com/en-us/library/t9dwyts4.aspx](http://msdn.microsoft.com/en-us/library/t9dwyts4.aspx)）

# dependency-injection - 在 glassfish 上执行资源注入时出错

> ID：13778695
> 
> 赞同：5
> 
> 时间：2012-12-08T15:03:04.180
> 
> 标签：dependency-injection, glassfish, ejb

这是我的问题：我正在学习 Java EE 开发，我想使用 Ejb 构建一个 WebApplication。首先，我尝试在同一台机器上开发，在 glassfish 域上创建一个 EJB 模块，并通过在同一台机器上但在不同域上运行的 Web 应用程序访问它：一切正常。由于我的 WEB-ING 文件夹中 glassfish-web.xml 的定义，我能够使用 glassfish 3.1 从 webapp 访问 EJBmodule：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE glassfish-web-app PUBLIC "-//GlassFish.org//DTD GlassFish Application Server 3.1 Servlet 3.0//EN" "http://glassfish.org/dtds/glassfish-web-app_3_0-1.dtd">
<glassfish-web-app>
  <ejb-ref>
    <ejb-ref-name>ejb/FirstBeanRemote</ejb-ref-name>
    <jndi-name>corbaname:iiop:127.0.0.1:3700#java:global/EJBModule/FirstBean!ejb.FirstBeanRemote</jndi-name>
  </ejb-ref>
</glassfish-web-app> 
```

在此之后，我想改变实验，为 ejb 模块和 webapp 使用不同的机器。首先，我在 debian 机器 glassfish 3.1 上安装并部署了我的模块，包括所需的接口。部署中没有返回错误，所以我继续启动域，一切似乎都正常。在 server.log 中，我为我的 EJB FirstBean 复制了可移植的 jndi 名称：

```
Portable JNDI names for EJB FirstBean: [java:global/EJBModule/FirstBean, java:global/EJBModule/FirstBean!ejb.FirstBeanRemote] 
```

所以现在在另一台使用 Netbeans 的机器上（在 windows 7 下）我创建了与前一个相同的 webapp，只是以这种方式更改 glassfish-web.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE glassfish-web-app PUBLIC "-//GlassFish.org//DTD GlassFish Application Server 3.1 Servlet 3.0//EN" "http://glassfish.org/dtds/glassfish-web-app_3_0-1.dtd">
<glassfish-web-app>
  <ejb-ref>
    <ejb-ref-name>ejb/FirstBeanRemote</ejb-ref-name>
    <jndi-name>corbaname:iiop:192.168.1.110:3700#java:global/EJBModule/FirstBean!ejb.FirstBeanRemote</jndi-name>
  </ejb-ref>
</glassfish-web-app> 
```

我确定 Ip（我的局域网中的静态）和端口（我在 glassfish 上创建了一个默认域）。现在问题来了。当我启动 web 应用程序时，我收到错误：

```
com.sun.faces.mgbean.ManagedBeanCreationException: An error occurred performing resource injection on managed bean prova
    at com.sun.faces.mgbean.BeanBuilder.injectResources(BeanBuilder.java:211)
    at com.sun.faces.mgbean.BeanBuilder.build(BeanBuilder.java:103)
    at com.sun.faces.mgbean.BeanManager.createAndPush(BeanManager.java:409)
    at com.sun.faces.mgbean.BeanManager.create(BeanManager.java:269)
    at com.sun.faces.el.ManagedBeanELResolver.resolveBean(ManagedBeanELResolver.java:244)
    at com.sun.faces.el.ManagedBeanELResolver.getValue(ManagedBeanELResolver.java:116)
    at com.sun.faces.el.DemuxCompositeELResolver._getValue(DemuxCompositeELResolver.java:176)
    at com.sun.faces.el.DemuxCompositeELResolver.getValue(DemuxCompositeELResolver.java:203)
    at com.sun.el.parser.AstIdentifier.getValue(AstIdentifier.java:103)
    at com.sun.el.parser.AstValue.getValue(AstValue.java:179)
    at com.sun.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:224)
    at com.sun.faces.facelets.el.TagValueExpression.getValue(TagValueExpression.java:109)
    at javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:194)
    at javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:182)
    at javax.faces.component.UIOutput.getValue(UIOutput.java:169)
    at com.sun.faces.renderkit.html_basic.HtmlBasicInputRenderer.getValue(HtmlBasicInputRenderer.java:205)
    at com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.getCurrentValue(HtmlBasicRenderer.java:355)
    at com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.encodeEnd(HtmlBasicRenderer.java:164)
    at javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:875)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1764)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1760)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1760)
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:402)
    at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:131)
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722)
Caused by: com.sun.faces.spi.InjectionProviderException: com.sun.enterprise.container.common.spi.util.InjectionException: Eccezione durante il tentativo di inserire Remote ejb-ref name=ejb/FirstBeanRemote,Remote 3.x interface =ejb.FirstBeanRemote,ejb-link=null,lookup=,mappedName=,jndi-name=corbaname:iiop:192.168.1.110:3700#java:global/EJBModule123/FirstBean!ejb.FirstBeanRemote,refType=Session in class ciao.Prova: Lookup failed for 'java:comp/env/ejb/FirstBeanRemote' in SerialContext[myEnv={java.naming.factory.initial=com.sun.enterprise.naming.impl.SerialInitContextFactory, java.naming.factory.state=com.sun.corba.ee.impl.presentation.rmi.JNDIStateFactoryImpl, java.naming.factory.url.pkgs=com.sun.enterprise.naming}
    at org.glassfish.faces.integration.GlassFishInjectionProvider.inject(GlassFishInjectionProvider.java:194)
    at com.sun.faces.mgbean.BeanBuilder.injectResources(BeanBuilder.java:205)
    ... 51 more
Caused by: com.sun.enterprise.container.common.spi.util.InjectionException: Eccezione durante il tentativo di inserire Remote ejb-ref name=ejb/FirstBeanRemote,Remote 3.x interface =ejb.FirstBeanRemote,ejb-link=null,lookup=,mappedName=,jndi-name=corbaname:iiop:192.168.1.110:3700#java:global/EJBModule123/FirstBean!ejb.FirstBeanRemote,refType=Session in class ciao.Prova: Lookup failed for 'java:comp/env/ejb/FirstBeanRemote' in SerialContext[myEnv={java.naming.factory.initial=com.sun.enterprise.naming.impl.SerialInitContextFactory, java.naming.factory.state=com.sun.corba.ee.impl.presentation.rmi.JNDIStateFactoryImpl, java.naming.factory.url.pkgs=com.sun.enterprise.naming}
    at com.sun.enterprise.container.common.impl.util.InjectionManagerImpl._inject(InjectionManagerImpl.java:703)
    at com.sun.enterprise.container.common.impl.util.InjectionManagerImpl.inject(InjectionManagerImpl.java:470)
    at com.sun.enterprise.container.common.impl.util.InjectionManagerImpl.injectInstance(InjectionManagerImpl.java:171)
    at org.glassfish.faces.integration.GlassFishInjectionProvider.inject(GlassFishInjectionProvider.java:184)
    ... 52 more
Caused by: javax.naming.NamingException: Lookup failed for 'java:comp/env/ejb/FirstBeanRemote' in SerialContext[myEnv={java.naming.factory.initial=com.sun.enterprise.naming.impl.SerialInitContextFactory, java.naming.factory.state=com.sun.corba.ee.impl.presentation.rmi.JNDIStateFactoryImpl, java.naming.factory.url.pkgs=com.sun.enterprise.naming} [Root exception is javax.naming.NamingException: Exception resolving Ejb for 'Remote ejb-ref name=ejb/FirstBeanRemote,Remote 3.x interface =ejb.FirstBeanRemote,ejb-link=null,lookup=,mappedName=,jndi-name=corbaname:iiop:192.168.1.110:3700#java:global/EJBModule123/FirstBean!ejb.FirstBeanRemote,refType=Session' .  Actual (possibly internal) Remote JNDI name used for lookup is 'corbaname:iiop:192.168.1.110:3700#java:global/EJBModule123/FirstBean__3_x_Internal_RemoteBusinessHome__' [Root exception is org.omg.CORBA.BAD_PARAM: Buono: IOP00100009: string_to_object conversion failed due to bad schema specific part in name java:global/EJBModule123/FirstBean__3_x_Internal_RemoteBusinessHome__  vmcid: SUN  minor code: 9  completed: No]]
    at com.sun.enterprise.naming.impl.SerialContext.lookup(SerialContext.java:518)
    at com.sun.enterprise.naming.impl.SerialContext.lookup(SerialContext.java:455)
    at javax.naming.InitialContext.lookup(InitialContext.java:411)
    at javax.naming.InitialContext.lookup(InitialContext.java:411)
    at com.sun.enterprise.container.common.impl.util.InjectionManagerImpl._inject(InjectionManagerImpl.java:599)
    ... 55 more
Caused by: javax.naming.NamingException: Exception resolving Ejb for 'Remote ejb-ref name=ejb/FirstBeanRemote,Remote 3.x interface =ejb.FirstBeanRemote,ejb-link=null,lookup=,mappedName=,jndi-name=corbaname:iiop:192.168.1.110:3700#java:global/EJBModule123/FirstBean!ejb.FirstBeanRemote,refType=Session' .  Actual (possibly internal) Remote JNDI name used for lookup is 'corbaname:iiop:192.168.1.110:3700#java:global/EJBModule123/FirstBean__3_x_Internal_RemoteBusinessHome__' [Root exception is org.omg.CORBA.BAD_PARAM: Buono: IOP00100009: string_to_object conversion failed due to bad schema specific part in name java:global/EJBModule123/FirstBean__3_x_Internal_RemoteBusinessHome__  vmcid: SUN  minor code: 9  completed: No]
    at com.sun.ejb.EjbNamingReferenceManagerImpl.resolveEjbReference(EjbNamingReferenceManagerImpl.java:191)
    at com.sun.enterprise.container.common.impl.ComponentEnvManagerImpl$EjbReferenceProxy.create(ComponentEnvManagerImpl.java:1109)
    at com.sun.enterprise.naming.impl.GlassfishNamingManagerImpl.lookup(GlassfishNamingManagerImpl.java:776)
    at com.sun.enterprise.naming.impl.GlassfishNamingManagerImpl.lookup(GlassfishNamingManagerImpl.java:744)
    at com.sun.enterprise.naming.impl.JavaURLContext.lookup(JavaURLContext.java:169)
    at com.sun.enterprise.naming.impl.SerialContext.lookup(SerialContext.java:498)
    ... 59 more
Caused by: org.omg.CORBA.BAD_PARAM: Buono: IOP00100009: string_to_object conversion failed due to bad schema specific part in name java:global/EJBModule123/FirstBean__3_x_Internal_RemoteBusinessHome__  vmcid: SUN  minor code: 9  completed: No
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
    at com.sun.corba.ee.spi.orbutil.logex.corba.CorbaExtension.makeException(CorbaExtension.java:248)
    at com.sun.corba.ee.spi.orbutil.logex.corba.CorbaExtension.makeException(CorbaExtension.java:95)
    at com.sun.corba.ee.spi.orbutil.logex.WrapperGenerator.handleFullLogging(WrapperGenerator.java:387)
    at com.sun.corba.ee.spi.orbutil.logex.WrapperGenerator.access$400(WrapperGenerator.java:107)
    at com.sun.corba.ee.spi.orbutil.logex.WrapperGenerator$2.invoke(WrapperGenerator.java:511)
    at com.sun.corba.ee.spi.orbutil.proxy.CompositeInvocationHandlerImpl.invoke(CompositeInvocationHandlerImpl.java:99)
    at $Proxy151.soBadSchemaSpecific(Unknown Source)
    at com.sun.corba.ee.impl.resolver.INSURLOperationImpl.resolveCorbaname(INSURLOperationImpl.java:227)
    at com.sun.corba.ee.impl.resolver.INSURLOperationImpl.resolveINSURL(INSURLOperationImpl.java:154)
    at com.sun.corba.ee.impl.resolver.INSURLOperationImpl.operate(INSURLOperationImpl.java:145)
    at com.sun.corba.ee.impl.orb.ORBImpl.string_to_object(ORBImpl.java:976)
    at com.sun.ejb.EjbNamingReferenceManagerImpl.resolveEjbReference(EjbNamingReferenceManagerImpl.java:184)
    ... 64 more
Caused by: org.omg.CosNaming.NamingContextPackage.NotFound: IDL:omg.org/CosNaming/NamingContext/NotFound:1.0
    at org.omg.CosNaming.NamingContextPackage.NotFoundHelper.read(NotFoundHelper.java:72)
    at org.omg.CosNaming._NamingContextExtStub.resolve_str(_NamingContextExtStub.java:165)
    at com.sun.corba.ee.impl.resolver.INSURLOperationImpl.resolveCorbaname(INSURLOperationImpl.java:222)
    ... 68 more 
```

在我看来，这是一个 jndi 问题，实际上在异常列表中我可以阅读“查找失败的 'java:comp/env/ejb/FirstBeanRemote'，所以 webapp 甚至无法访问 EJBModule。但我想知道为什么，因为我使用的是 glassfish 服务器本身提供的便携式 jndi！

我希望我很清楚，有人可以帮助我。

最大限度

# javascript - 从javascript函数中删除多个转义字符

> ID：13778702
> 
> 赞同：0
> 
> 时间：2012-12-08T15:04:04.137
> 
> 标签：javascript, asp.net

我正在使用此语句来调用 javascript 并从我传递给 javascript 函数的值中删除单引号转义字符。

```
<label style="text-decoration: underline" onclick="javascript:GetSelectedRow('<%# Eval("ID") %>','<%# Eval("systempath").ToString().Replace("'", @"\'"); %>','','',1);"><%#Eval("ID") %></label> 
```

如何修改上面的行，以便它同时删除双引号和单引号。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T16:13:06.217

我认为您想转义字符串，以便在 javascript 方法调用中安全使用？你可以在你的数据源中创建一个新的属性来转义系统路径属性：

```
public string EscapedSystemPath
{
    get
    {
            return new JavaScriptSerializer().Serialize(systempath);
    }
} 
```

然后你可以对它进行数据绑定：

```
<label style="text-decoration: underline" onclick="javascript:GetSelectedRow('<%# Eval("ID") %>','<%# Eval("EscapedSystemPath") %>','','',1);"><%#Eval("ID") %></label> 
```

# javascript - 将打开/关闭图标添加到 Twitter Bootstrap 可折叠项（手风琴）

> ID：13778703
> 
> 赞同：88
> 
> 时间：2012-12-08T15:04:05.720
> 
> 标签：javascript, jquery, twitter-bootstrap

我已经设置了这个简单版本的 Bootstrap[手风琴](http://twitter.github.com/bootstrap/javascript.html#collapse)：

**简单的手风琴：http:** [//jsfiddle.net/darrenc/cngPS/](http://jsfiddle.net/darrenc/cngPS/)

目前图标只指向**down**，但有谁知道需要实现什么 JS 才能将图标的类更改为：

```
<i class="icon-chevron-up"></i> 
```

...所以它在**展开时指向****上方**，在折叠时再次切换回**下方**，所以第四个？

 ***** * *

## 回答 #1

> 赞同：94
> 
> 时间：2013-10-21T16:48:35.740

这是那些在 Bootstrap 3 中寻找解决方案的人（比如我自己）的答案。

## HTML部分：

```
<div class="btn-group">
  <button type="button" class="btn btn-danger">Action</button>
  <button type="button" class="btn btn-danger" data-toggle="collapse" data-target="#demo">
    <span class="glyphicon glyphicon-minus"></span>
  </button>
</div>
<div id="demo" class="collapse in">Some dummy text in here.</div> 
```

## js部分：

```
$('.collapse').on('shown.bs.collapse', function(){
$(this).parent().find(".glyphicon-plus").removeClass("glyphicon-plus").addClass("glyphicon-minus");
}).on('hidden.bs.collapse', function(){
$(this).parent().find(".glyphicon-minus").removeClass("glyphicon-minus").addClass("glyphicon-plus");
}); 
```

* * *

## 手风琴示例：

[Bootply 手风琴示例](http://bootply.com/89084)

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2013-08-20T08:47:48.467

这是我对 Bootstrap 2.x 的方法。这只是一些CSS。无需 JavaScript：

```
 .accordion-caret .accordion-toggle:hover {
        text-decoration: none;
    }
    .accordion-caret .accordion-toggle:hover span,
    .accordion-caret .accordion-toggle:hover strong {
        text-decoration: underline;
    }
    .accordion-caret .accordion-toggle:before {
        font-size: 25px;
        vertical-align: -3px;
    }
    .accordion-caret .accordion-toggle:not(.collapsed):before {
        content: "▾";
        margin-right: 0px;
    }
    .accordion-caret .accordion-toggle.collapsed:before {
        content: "▸";
        margin-right: 0px;
    } 
```

只需将类*手风琴插入符号*添加到手风琴组 div，如下所示：

```
<div class="accordion-group accordion-caret">
    <div class="accordion-heading">
        <a class="accordion-toggle" data-toggle="collapse" href="#collapseOne">
            <strong>Header</strong>
        </a>
    </div>
    <div id="collapseOne" class="accordion-body collapse in">
        <div class="accordion-inner">
            Content
        </div>
    </div>
</div> 
```

* * *

## 回答 #3

> 赞同：42
> 
> 时间：2012-12-08T15:18:20.740

Bootstrap Collapse 有一些您可以对其做出反应的事件：

```
$(document).ready(function(){    
    $('#accordProfile').on('shown', function () {
       $(".icon-chevron-down").removeClass("icon-chevron-down").addClass("icon-chevron-up");
    });

    $('#accordProfile').on('hidden', function () {
       $(".icon-chevron-up").removeClass("icon-chevron-up").addClass("icon-chevron-down");
    });
}); 
```

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2014-05-21T01:19:54.173

使用 CSSes 伪选择器：在使用 Bootstrap 3 的集成 Glyphicons 获得**无 JS 答案**后，对您的 HTML 进行少量修改......

**CSS**

```
.panel-heading [data-toggle="collapse"]:after
{
    font-family: 'Glyphicons Halflings';
    content: "\e072"; /* "play" icon */
    float: right;
    color: #b0c5d8;
    font-size: 18px;
    line-height: 22px;

    /* rotate "play" icon from > (right arrow) to down arrow */
    -webkit-transform: rotate(-90deg);
    -moz-transform:    rotate(-90deg);
    -ms-transform:     rotate(-90deg);
    -o-transform:      rotate(-90deg);
    transform:         rotate(-90deg);
}
.panel-heading [data-toggle="collapse"].collapsed:after
{
    /* rotate "play" icon from > (right arrow) to ^ (up arrow) */
    -webkit-transform: rotate(90deg);
    -moz-transform:    rotate(90deg);
    -ms-transform:     rotate(90deg);
    -o-transform:      rotate(90deg);
    transform:         rotate(90deg);
} 
```

**HTML**

添加`class="collapsed"`到默认关闭的任何锚标记。

这将转动锚点，例如

```
<a data-toggle="collapse" data-parent="#accordion" href="#collapseTwo"> 
```

进入

```
<a class="collapsed" data-toggle="collapse" data-parent="#accordion" href="#collapseTwo"> 
```

**CodePen 实时示例**

[http://codepen.io/anon/pen/VYobER](http://codepen.io/anon/pen/VYobER)

**截屏**

![它是如何出现在 JSBin 中的](../Images/68e3782f58298006065dc8ca832ec241.png)

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2013-02-24T14:03:41.417

添加到@muffls 答案中，以便它适用于所有 twitter bootstrap 折叠并在动画开始之前更改箭头。

```
$('.collapse').on('show', function(){
    $(this).parent().find(".icon-chevron-left").removeClass("icon-chevron-left").addClass("icon-chevron-down");
}).on('hide', function(){
    $(this).parent().find(".icon-chevron-down").removeClass("icon-chevron-down").addClass("icon-chevron-left");
}); 
```

根据您的 HTML 结构，您可能需要修改`parent()`.

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2013-04-12T07:47:38.477

我认为最好的代码是这些：

```
 $('#accordion1').collapse({
    toggle: false
  }).on('show',function (e) {
        $(e.target).parent().find(".icon-chevron-down").removeClass("icon-chevron-down").addClass("icon-chevron-up");
      }).on('hide', function (e) {
        $(e.target).parent().find(".icon-chevron-up").removeClass("icon-chevron-up").addClass("icon-chevron-down");
      }); 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2013-11-26T12:18:22.980

如果有人感兴趣，这就是您使用 BS3 的方式，因为他们更改了事件名称：

```
$('.collapse').on('show.bs.collapse', function(){
  var i = $(this).parent().find('i')
  i.toggleClass('fa-caret-right fa-caret-down');
}).on('hide.bs.collapse', function(){
  var i = $(this).parent().find('i')
  i.toggleClass('fa-caret-down fa-caret-right');
}); 
```

您只需将示例中的类名更改为您在案例中使用的类名。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2017-02-21T10:07:01.110

最易读的纯 CSS 解决方案可能是使用 aria-expanded 属性。请记住，您需要将 aria-expanded="false" 添加到所有折叠元素，因为这不是在加载时设置的（仅在第一次单击时）。

### 的HTML：

```
<h2 data-toggle="collapse" href="#collapseId" aria-expanded="false">
    <span class="glyphicon glyphicon-chevron-right"></span>
    <span class="glyphicon glyphicon-chevron-down"></span> Title
</h2> 
```

### CSS：

```
h2[aria-expanded="false"] span.glyphicon-chevron-down,
h2[aria-expanded="true"] span.glyphicon-chevron-right
{
    display: none;
}

h2[aria-expanded="true"] span.glyphicon-chevron-down,
h2[aria-expanded="false"] span.glyphicon-chevron-right
{
    display: inline;
} 
```

适用于 Bootstrap 3.x。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2013-07-18T08:15:12.333

这是我的解决方案，它从@john-magnolia 发布的解决方案进一步完善，并解决了它的一些问题

```
/**
 * Toggle on/off arrow for Twitter Bootstrap collapsibles.
 *
 * Multi-collapsible-friendly; supports several collapsibles in the same group, on the same page.
 */
function animateCollapsibles() {

    $('.collapse').on('show', function() {
        var $t = $(this);
        var header = $("a[href='#" + $t.attr("id") + "']");
        header.find(".icon-chevron-right").removeClass("icon-chevron-right").addClass("icon-chevron-down");
    }).on('hide', function(){
        var $t = $(this);
        var header = $("a[href='#" + $t.attr("id") + "']");
        header.find(".icon-chevron-down").removeClass("icon-chevron-down").addClass("icon-chevron-right");
    });
} 
```

这是示例标记：

```
<div class="accordion" id="accordion-send">
    <div class="accordion-group">
        <div class="accordion-heading">
            <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion-send" href="#collapse-refund">
                <i class="icon icon-chevron-right"></i> Send notice
            </a>
        </div>
        <div id="collapse-refund" class="accordion-body collapse">
            <div class="accordion-inner">
                <p>Lorem ipsum Toholampi city</p>
            </div>
        </div>
    </div>
</div> 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2014-03-11T06:51:59.700

一个引导 v3 解决方案（其中事件具有不同的名称），也仅使用一个 jQuery 选择器（如[这里](https://stackoverflow.com/a/14928493/637423)所示）：

```
$('.accordion').on('hide.bs.collapse show.bs.collapse', function (n) {
    $(n.target).siblings('.panel-heading').find('i.glyphicon').toggleClass('glyphicon-chevron-down glyphicon-chevron-up');
}); 
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2015-10-02T17:14:06.003

这就是我没有任何js的方式。

我使用了图标 glyphicon-triangle-right 但它适用于任何其他图标，它的作用是在面板打开或不打开时对图标应用 90 度旋转。我正在为此使用**Bootstrap 3.3.5 。**

CSS 代码

```
h4.panel-title a {
    display: block;

}
h4.panel-title a.collapsed .glyphicon-triangle-right {
        color: #ada9a9 !important;
        transform: rotate(0deg);
}
h4.panel-title a .glyphicon-triangle-right {
        color: #515e64 !important;
        transform: rotate(90deg);
} 
```

这是从 Bootstrap 示例中获取的 HTML 结构

```
<div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">
                            <div class="panel panel-default">
                                <div class="panel-heading" role="tab" id="headingOne">
                                    <h4 class="panel-title">
                                        <a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                                            Proven Expertise
                                            <span class="glyphicon glyphicon-triangle-right pull-right" aria-hidden="true"></span>
                                        </a>
                                    </h4>
                                </div>
                                <div id="collapseOne" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="headingOne">
                                    <div class="panel-body">
                                        Anim pariatur cliche reprehenderit, enim eiusmod high life accusamus terry richardson ad squid. 3 wolf moon officia aute, non cupidatat skateboard dolor brunch. Food truck quinoa nesciunt laborum eiusmod. Brunch 3 wolf moon tempor, sunt aliqua put a bird on it squid single-origin coffee nulla assumenda shoreditch et. Nihil anim keffiyeh helvetica, craft beer labore wes anderson cred nesciunt sapiente ea proident. Ad vegan excepteur butcher vice lomo. Leggings occaecat craft beer farm-to-table, raw denim aesthetic synth nesciunt you probably haven't heard of them accusamus labore sustainable VHS.
                                    </div>
                                </div>
                            </div>

                        </div> 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2015-11-23T15:26:22.767

以上都没有对我有用，但我想出了这个并且它有效：

```
function toggleChevron(el) {
  if ($(el).find('i').hasClass('icon-chevron-left'))
      $(el).find('.icon-chevron-left').removeClass("icon-chevron-left").addClass("icon-chevron-down");
  else 
      $(el).find('.icon-chevron-down').removeClass("icon-chevron-down").addClass("icon-chevron-left");
} 
```

HTML实现：

```
<div class="accordion" id="accordion-send">
  <div class="accordion-group">
    <div class="accordion-heading" onClick="toggleChevron(this)">
      <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion-send" href="#collapse-refund">
        <i class="icon icon-chevron-right"></i> Send notice
      </a>
      ... 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2014-02-05T23:11:28.293

@RobSadler：

RE Martin Wickman 的纯 CSS 版本...

您可以通过将手风琴插入符号放在锚标记上并默认给它一个折叠的类来解决这个问题。像这样：

```
<div class="accordion-group">
<div class="accordion-heading">
    <a class="accordion-toggle accordion-caret collapsed" data-toggle="collapse" href="#collapseOne">
        <strong>Header</strong>
    </a>
</div>
<div id="collapseOne" class="accordion-body collapse in">
    <div class="accordion-inner">
        Content
    </div>
</div> 
```

这对我有用。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2014-09-27T22:50:59.363

对于 Bootstrup 3.2 + FontAwesome

```
$(document).ready(function(){    
    $('#accordProfile').on('shown.bs.collapse', function () {
       $(".fa-chevron-down").removeClass("fa-chevron-down").addClass("fa-chevron-up");
    });

    $('#accordProfile').on('hidden.bs.collapse', function () {
       $(".fa-chevron-up").removeClass("fa-chevron-up").addClass("fa-chevron-down");
    });
}); 
```

有时你必须这样写。如果是这样的话

```
$('.collapsed span').removeClass('fa-minus').addClass('fa-plus'); 
```

当您按下隐藏菜单时自动生成 (class="collapsed")。

ps 当你需要创建树形菜单时

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2015-11-24T15:38:31.550

这已经通过多种方式得到解答，但我想出的是最简单和最简单的 Bootstrap 3 和字体真棒。我已经做了

```
$('a.toggler').on('click', function () {$('i', this).toggleClass('fa-caret-up');}); 
```

这只是切换我要显示的图标的 CSS 类。我将类*切换*器添加到我想要应用它的项目中。这可以添加到您想要切换图标的任何项目上。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2021-09-15T12:23:56.693

这是这个非常古老的问题的**2021 年**更新...

**引导程序 5**

使用 CSS 上/下三角形的图标不可知解决方案（不使用特定的图标库）......

```
/* for up.down arrows after collapse items with submenus */
[data-bs-toggle="collapse"]::after {
  display: inline-block;
  margin-left: 0.255em;
  vertical-align: 0.255em;
  content: "";
  border-top: 0;
  border-right: 0.3em solid transparent;
  border-bottom: 0.3em solid;
  border-left: 0.3em solid transparent;
}

[data-bs-toggle="collapse"].collapsed::after {
  display: inline-block;
  margin-left: 0.255em;
  vertical-align: 0.255em;
  content: "";
  border-bottom: 0;
  border-right: 0.3em solid transparent;
  border-top: 0.3em solid;
  border-left: 0.3em solid transparent;
} 
```

[演示使用带有折叠子菜单的侧边栏](https://www.codeply.com/p/ra7vfR5Jcz)

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2016-06-10T22:38:45.913

另一个使用折叠功能本身的无 JavaScript 解决方案：

```
/* Prevent block display and transition animation */
.expand-icon.collapse.in,
.collapse-icon.collapse.in {
  display: inline; }
.expand-icon.collapsing {
  display: none; }

/* HTML Toggler with glyphicons */
<a data-toggle="collapse" href=".my-collapse">
 <span class="my-collapse collapse-icon collapse in">
  <span class="glyphicon glyphicon-collapse-up"></span>
 </span>
 <span class="my-collapse expand-icon collapse">
  <span class="glyphicon glyphicon-expand"></span>   
 </span>
</a> 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2017-03-04T17:51:25.213

对于使用 Bootstrap 3 的纯 CSS（和无图标）解决方案，我不得不根据上面的 Martin Wickman 的回答做一些摆弄。

我没有使用手风琴-* 符号，因为它是通过 BS3 中的面板完成的。

此外，我必须在页面加载时打开的项目中包含初始 HTML aria-expanded="true"。

这是我使用的 CSS。

```
.accordion-toggle:hover { text-decoration: none; }
.accordion-toggle:hover span, .accordion-toggle:hover strong { text-decoration: underline; }
.accordion-toggle:before { font-size: 25px; }
.accordion-toggle[data-toggle="collapse"]:before { content: "+"; margin-right: 0px; }
.accordion-toggle[aria-expanded="true"]:before { content: "-"; margin-right: 0px; } 
```

这是我清理过的 HTML：

```
<div id="acc1">    
    <div class="panel panel-default">
        <div class="panel-heading">
            <span class="panel-title">
                <a class="accordion-toggle" data-toggle="collapse" aria-expanded="true" data-parent="#acc1" href="#acc1-1">Title 1
                    </a>
            </span>
        </div>
        <div id=“acc1-1” class="panel-collapse collapse in">
            <div class="panel-body">
                Text 1
            </div>
        </div>
    </div>
    <div class="panel panel-default">
        <div class="panel-heading">
            <span class="panel-title">
                <a class="accordion-toggle" data-toggle="collapse" data-parent="#acc1” href=“#acc1-2”&gt;Title 2
                    </a>
            </span>
        </div>
        <div id=“acc1-2” class="panel-collapse collapse">
            <div class="panel-body">
                Text 2                  
            </div>
        </div>
    </div>
</div> 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2018-12-10T20:22:08.310

最短的可能答案。

**HTML**

```
<a data-toggle="collapse" data-parent="#panel-quote-group" href="#collapseQuote">
    <span class="toggle-icon glyphicon glyphicon-collapse-up"></span>
</a> 
```

**JS：**

```
<script type="text/javascript">
 $(function () {
     $('a[data-toggle="collapse"]').click(function () {
     $(this).find('span.toggle-icon').toggleClass('glyphicon-collapse-up glyphicon-collapse-down');
     })
 })
 </script> 
```

当然，您可以使用任何选择器代替锚标记`a`，也可以使用特定选择器来代替`this`您的图标位于单击的元素之外。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2020-08-29T19:45:17.350

这是一个解决方案，它使用某种材料设计、bootstrap 4.5/5 alpha 和完全非 JavaScript 创建一个可扩展的部分。

**头部样式**

```
<style>
[data-toggle="collapse"] .fa:before {
    content: "\f077";
}

[data-toggle="collapse"].collapsed .fa:before {
    content: "\f078";
}
</style> 
```

**正文 html**

```
<div class="pt-3 pb-3" style="border-top: 1px solid #eeeeee; border-bottom: 1px solid #eeeeee; cursor: pointer;">
<a href="#expandId" class="text-dark float-right collapsed" data-toggle="collapse" role="button" aria-expanded="false" aria-controls="expandId">
    <i class="fa" aria-hidden="false"></i>
</a>
<a href="#expandId" class="text-dark collapsed" data-toggle="collapse" role="button" aria-expanded="false" aria-controls="expandId">Expand Header</a>
<div class="collapse" id="expandId">
    CONTENT GOES IN HERE
</div> 
```****

# ruby-on-rails - ElasticSearch / Tire with rails：没有元素解析器

> ID：13778705
> 
> 赞同：0
> 
> 时间：2012-12-08T15:04:13.837
> 
> 标签：ruby-on-rails, ruby, elasticsearch, tire

我正在将 elasticsearch 与轮胎宝石一起用于 Ruby on Rails。

到目前为止一切顺利，我在日期上有一个成功的范围方面，但现在我正在尝试对浮点字段做同样的事情，它给了我“没有元素解析器”错误。

```
mapping
  indexes :budget, type: 'float'
  indexes :post_date, type: 'date'
end 
```

（隐藏其他字段）

在我的搜索中：

```
tire.search(load: true, page: params[:page], per_page: 8) do
  query do
    boolean do
      must { string params[:query], default_operator: "AND" } if params[:query].present?
    end
    facet('timeline') { range :post_date, { :ranges => [ { to: Date.today+1, from: Date.today-7 }, { to: Date.today+1, from: Date.today-14 }, { to: Date.today+1, from: Date.today-30 } ] } } 
    facet('budget') { range :budget, {:ranges => [{ to: 500 }, { from: 500, to: 1000 },{ from: 1000, to: 1500 },{ from: 1500 }]}}
  end
end 
```

时间线工作正常，我已重新编制索引（力 = 真）

我收到此错误：（类似错误重复了几次）

```
500 : {"error":"SearchPhaseExecutionException[Failed to execute phase [query], total failure; shardFailures {[8B30I3dRQ6elhGcF6El0lw][projects][1]: SearchParseException[[projects][1]: query[(status:posted status:awarded status:closed)~1],from[-1],size[-1],sort[<custom:\"display_type\": org.elasticsearch.index.field.data.strings.StringFieldDataType$1@618faee9>!,<custom:\"post_date\": org.elasticsearch.index.field.data.longs.LongFieldDataType$1@6e9691da>]: Parse Failure [Failed to parse source [{\"query\":{\"bool\":{\"must\":[{\"terms\":{\"status\":[\"posted\",\"awarded\",\"closed\"]}}]}},\"sort\":[{\"display_type\":\"desc\"},\"post_date\"],\"facets\":{\"status\":{\"terms\":{\"field\":\"status\",\"size\":10,\"all_terms\":false}},\"industry_finance\":{\"terms\":{\"field\":\"finance\",\"size\":10,\"all_terms\":false}},\"industry_law\":{\"terms\":{\"field\":\"law\",\"size\":10,\"all_terms\":false}},\"industry_consulting\":{\"terms\":{\"field\":\"consulting\",\"size\":10,\"all_terms\":false}},\"expertise\":{\"terms\":{\"field\":\"expertise\",\"size\":25,\"all_terms\":false}},\"skills\":{\"terms\":{\"field\":\"skills\",\"size\":25,\"all_terms\":false}},\"country\":{\"terms\":{\"field\":\"geo\",\"size\":10,\"all_terms\":false}},\"language\":{\"terms\":{\"field\":\"language\",\"size\":10,\"all_terms\":false}},\"location\":{\"terms\":{\"field\":\"location\",\"size\":10,\"all_terms\":false}},\"timeline\":{\"range\":{\"field\":\"post_date\",\"ranges\":{\"ranges\":[{\"to\":\"2012-12-09\",\"from\":\"2012-12-01\"},{\"to\":\"2012-12-09\",\"from\":\"2012-11-24\"},{\"to\":\"2012-12-09\",\"from\":\"2012-11-08\"}]}}},\"budget\":{\"range\":{\"field\":\"budget\",\"ranges\":{\"ranges\":[{\"to\":500},{\"from\":500,\"to\":1000},{\"from\":1000,\"to\":1500},{\"from\":1500}]}}}},\"size\":8}]]]; nested: SearchParseException[[projects][1]: query[(status:posted status:awarded status:closed)~1],from[-1],size[-1],sort[<custom:\"display_type\": org.elasticsearch.index.field.data.strings.StringFieldDataType$1@618faee9>!,<custom:\"post_date\": org.elasticsearch.index.field.data.longs.LongFieldDataType$1@6e9691da>]: Parse Failure [No parser for element [budget]]] 
```

相关位似乎是：解析失败[元素[预算]没有解析器]
不知道是什么原因造成的，非常感谢任何输入！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T11:51:26.737

我认为您应该重新索引要使用的索引。例如，对于文章类：

耙 RAILS_ENV=生产轮胎：进口 CLASS=Article FORCE=true

# sql - 查找特定时间段内的重复项

> ID：13778706
> 
> 赞同：2
> 
> 时间：2012-12-08T15:04:26.580
> 
> 标签：sql, sql-server, sql-server-2008

我有一个具有以下结构的表

```
ID  Person  LOG_TIME
-----------------------------------
1   1       2012-05-21 13:03:11.550
2   1       2012-05-22 13:09:37.050 <--- this is duplicate
3   1       2012-05-28 13:09:37.183
4   2       2012-05-20 15:09:37.230
5   2       2012-05-22 13:03:11.990 <--- this is duplicate
6   2       2012-05-24 04:04:13.222 <--- this is duplicate
7   2       2012-05-29 11:09:37.240 
```

我有一些用数据填充这个表的应用程序工作。

有一条业务规则，每个人每 7 天只能有 1 条记录。

从上面的例子中，记录# 2,5 和 6 被认为是重复的，而 1,3,4 和 7 是可以的。

我想要一个 SQL 查询来检查在不到 7 天内是否有同一个人的记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T17:18:56.720

[请在此处](http://sqlfiddle.com/#!3/b3656/4/0)查看我对 SQLFiddle 的尝试。

您可以使用连接`DATEDIFF()`来查找相隔不到 7 天的记录：

```
WITH TooClose
AS
(
    SELECT
        a.ID AS BeforeID,
        b.ID AS AfterID
    FROM
        Log a
        INNER JOIN Log b ON a.Person = b.Person
                        AND a.LOG_TIME < b.LOG_TIME
                        AND DATEDIFF(DAY, a.LOG_TIME, b.LOG_TIME) < 7
) 
```

但是，这将包括您不认为“重复”的记录（例如，ID 3，因为它太接近 ID 2）。根据您所说，我推断如果记录太接近的记录本身就是“重复”，则该记录不是“重复”。

因此，要应用此规则并获取重复项的最终列表：

```
SELECT
    AfterID AS ID
FROM
    TooClose
WHERE
    BeforeID NOT IN (SELECT AfterID FROM TooClose) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T22:05:48.667

```
;WITH cte AS
 (
  SELECT ID, Person, LOG_TIME,
         DATEDIFF(d, MIN(LOG_TIME) OVER (PARTITION BY Person), LOG_TIME) AS diff_date
  FROM dbo.Log_time
  )
SELECT *
FROM cte
WHERE diff_date BETWEEN 1 AND 6 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/792cd/1/0)上的演示[](http://sqlfiddle.com/#!3/792cd/1/0)

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T15:22:09.747

请看一下这个样本。

参考：[SQLFIDDLE](http://sqlfiddle.com/#!2/5c483/1)

询问：

```
select person, 
datediff(max(log_time),min(log_time)) as diff,
count(log_time)
 from pers 
 group by person
;

select y.person, y.ct
from (
select person, 
datediff(max(log_time),min(log_time)) as diff,
count(log_time) as ct
 from pers 
 group by person) as y
where y.ct > 1
and y.diff <= 7
;

PERSON  DIFF    COUNT(LOG_TIME)
1   1   3
2   8   3

PERSON  CT
1   3 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-12T05:53:30.387

声明@Count int

```
set @count=(
select COUNT(*) 
from timeslot  
where (( (TimeFrom<@Timefrom and TimeTo >@Timefrom) 
      or (TimeFrom<@Timeto and TimeTo >@Timeto))
      or (TimeFrom=@Timefrom or TimeTo=@Timeto))) 
```**

# asp.net - asp.net gridview 外部按钮保存

> ID：13778707
> 
> 赞同：0
> 
> 时间：2012-12-08T15:04:26.737
> 
> 标签：asp.net, gridview

我在运行时动态构建了 gridview 绑定到数据表，以及保存放置在 gridview 之外的 gridview 数据的按钮

1-创建网格视图

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
         CreateGrid();
    }
}

      void CreateGrid()
      {
                int nTransID = Convert.ToInt32(Session["trans_id"]);
                //
                string strSQL = @"EXEC [dbo].[sp_GetTransaction] " + nTransID;
                DataTable dtData = clsGlobal.GetDataTable(strSQL);
                //
                if (ViewState["dtTransDetail"] == null) ViewState.Add("dtTransDetail", dtData);
                else ViewState["dtTransDetail"] = dtData;
                //
                foreach (DataColumn dc in dtData.Columns)
                {
                    if (dc.ColumnName.Contains("!;"))
                    {
                        TemplateField tField = new TemplateField();
                        tField.ItemTemplate = new AddTemplateToGridView(ListItemType.Item, dc.ColumnName);
    //\\ --- template contain textbox
                        tField.HeaderText = dc.ColumnName;
                        GridView1.Columns.Add(tField);
                    }
                }
            } 
```

这是我的模板类：

```
public class AddTemplateToGridView : ITemplate
    {
        ListItemType _type;
        string _colName;

        public AddTemplateToGridView(ListItemType type, string colname)
        {
            _type = type;
            _colName = colname;
        }

        void ITemplate.InstantiateIn(System.Web.UI.Control container)
        {
            switch (_type)
            {
                case ListItemType.Item:
                    TextBox text = new TextBox();
                    text.ID = "txtAmount";
                    text.DataBinding += new EventHandler(txt_DataBinding);
                    container.Controls.Add(text);
                    break;
            }
        }

        void txt_DataBinding(object sender, EventArgs e)
        {
            TextBox textBox = (TextBox)sender;
            GridViewRow container = (GridViewRow)textBox.NamingContainer;
            object dataValue = DataBinder.Eval(container.DataItem, _colName);
            if (dataValue != DBNull.Value)
            {
                textBox.Text = dataValue.ToString();
            }
        }  
    } 
```

所以我有一个带有 textboxe 的 gridview 可以立即编辑问题是，当我点击保存按钮“它在 gridview 之外”时，所有 textboxe 都消失了

```
protected void btnSave_Command(object sender, CommandEventArgs e)
        {
for (int nRow = 0; nRow < GridView1.Rows.Count; nRow++)
            {
                for (int nCol = 0; nCol < GridView1.Columns.Count; nCol++)
                {
                    if (GridView1.Rows[nRow].Cells[nCol].Controls.Count == 0) continue;
//\\ --- Controls.Count always = 0
//\\ --- However each cell contain textbox
//\\ --- textbox disappear after save button clicked
                    TextBox txt = (TextBox)GridView1.Rows[nRow].Cells[nCol].Controls[0];
                }
            }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T15:24:26.307

看起来您在回发后没有创建 GridView，并且 Save 按钮正在导致回发。您需要在每个页面加载时动态创建 GridView。此外，我发现[这个关于 ASP.NET 页面生命周期的文档在](http://msdn.microsoft.com/en-us/library/ms178472%28v=vs.100%29.aspx)很多情况下都有帮助。

在文档中，您将看到为什么您的代码无法按您希望的方式运行的稍微不直观的原因 - btnSave_Command 直到回发和 Page_Load 之后才会运行。

# python - 弄清楚 unicode：“ascii”编解码器无法解码

> ID：13778711
> 
> 赞同：0
> 
> 时间：2012-12-08T15:04:40.763
> 
> 标签：python, unicode

我目前使用 Sublime 2 并在那里运行我的 python 代码。当我尝试运行此代码时。我收到此错误：

> UnicodeDecodeError：“ascii”编解码器无法解码位置 6 中的字节 0xc3：序数不在范围内（128）

```
# -*- coding: utf-8 -*-  
s = unicode('abcdefö') 
print s 
```

我一直在阅读有关 unicode 的 python 文档，据我了解这应该可以工作，或者是控制台不工作

**编辑：**使用 s = u'abcdefö' 作为字符串会产生几乎相同的结果。我得到的结果是

> UnicodeEncodeError：'ascii' 编解码器无法在位置 6 编码字符 u'\xf6'：序数不在范围内（128）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-08T15:34:41.987

发生的事情是在*运行时*`unicode('abcdefö')`尝试将编码的字符串解码为 un​​icode 。该行仅告诉 Python*源文件*以 utf8 编码。当脚本运行时，它已被编译并且字符串已被存储为*编码字符串*。因此，当 Python 尝试解码字符串时，它默认使用 ascii。由于字符串实际上是 utf8 编码的，因此失败。*`coding: utf-8`*

 ***您可以`s = u'abcdefö'`告诉编译器使用为文件声明的编码解码字符串并将其存储为 unicode。`s = unicode('abcdefö', 'utf8')`或者`s = 'abcdefö'.decode('utf8')`会在运行时做同样的事情。

不过并不一定意味着`print s`现在就可以。首先，必须将内部 unicode 字符串编码为标准输出（控制台/编辑器/IDE）可以实际显示的字符集。遗憾的是，Python 经常无法找出正确的字符集并再次默认为 ascii，并且当字符串包含非 ascii 字符时会出现错误。Python Wiki 知道[一些](http://wiki.python.org/moin/PrintFails)正确设置标准输出的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T15:05:57.410

您需要将字符串标记为 unicode 字符串：

```
s = u'abcdefö' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-07T16:36:47.727

**s = 'abcdefö'**

如果字符串已经是 unicode，请不要尝试 unicode()。即**unicode(s) 是错误的**。

IF **type(s) == str**但包含 unicode 字符：

1.  首先转换为unicode

    ```
    str_val = unicode(s,'utf-8’)
    str_val = unicode(s,'utf-8’,’replace') 
    ```

2.  最后编码为字符串

    ```
    str_val.encode('utf-8') 
    ```

现在您可以打印：

印刷***

# mobile - 为移动设备优化 prettyPhoto 灯箱？

> ID：13778714
> 
> 赞同：10
> 
> 时间：2012-12-08T15:04:50.467
> 
> 标签：mobile, size, lightbox, prettyphoto

我目前在我正在开发的网站上使用[prettyPhoto](http://www.no-margin-for-errors.com/projects/prettyphoto-jquery-lightbox-clone/)，但在移动设备上遇到了一个小问题。

该插件有选项“allow_resize: false”，它不允许调整大于视口的照片大小，但是缩小后的图像在视口宽度的大约 30-35% 处太小了。这在 480 像素宽的屏幕上是个问题，因为图像只使用了可用空间的一小部分。

我想要做的是让它重新缩放到大约 95% 的视口。我已经尝试使用 css 和媒体查询来解决这个问题，但是我遇到了一个问题，即当宽度设置为 95% 时垂直图像会从页面上消失。

我猜修改原始插件或添加 javascript 会是一个更好的解决方案。有没有人对最好的方法有任何建议？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-10-29T19:00:59.290

试试这个（不是我的代码）：

```
/* prettyPhoto styling for small screens */
@media (max-width: 500px)
{
    .pp_pic_holder.pp_default
    {
        width: 100%!important;
        margin-top:-100px !important;
        left: 0!important;
        overflow: hidden;
    }
    div.pp_default .pp_content_container .pp_left
    {
        padding-left: 0!important;
    }
    div.pp_default .pp_content_container .pp_right
    {
        padding-right: 0!important;
    }
    .pp_content
    {
        width: 100%!important;
        height: auto!important;
    }
    .pp_fade
    {
        width: 100%!important;
        height: 100%!important;
    }
    a.pp_expand,
    a.pp_contract,
    .pp_hoverContainer,
    .pp_gallery,
    .pp_top,
    .pp_bottom
    {
        display: none!important;
    }
    #pp_full_res img
    {
        width: 100%!important;
        height: auto!important;
    }
    .pp_details
    {
        box-sizing: border-box;
        width: 100%!important;
        padding-left: 3%;
        padding-right: 4%;
        padding-top: 10px;
        padding-bottom: 10px;
        background-color: #fff;
        margin-top: -2px!important;
    }
    a.pp_close
    {
        right: 10px!important;
        top: 10px!important;
    }
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-07-16T13:46:43.410

我在漂亮的照片上遇到了同样的问题，并找到了与 rafael.dev 发布的相同的 css 代码修复。但是，它似乎仍然不太好，因为上一个和下一个按钮消失了，而且样式很奇怪。我认为问题只是由调整大小的计算引起的，所以我尝试从 js 源中找到调整大小函数的片段，很容易得到如下解决方案：

我用的是 3.1.6 版本，请在第 568 行找到函数。然后`_fitToViewport`向下滚动一些你会看到`imageWidth = (windowWidth - 200);``imageHeight = (windowHeight - 200);`

只需减少数量，然后移动视图将变得非常好！我尝试调整了很多次，得到的最适合的数字是 38 和 100。您可以复制以下代码来替换原来的代码：

```
if(pp_containerWidth > windowWidth - 38){
    imageWidth = (windowWidth - 38);
    imageHeight = (height/width) * imageWidth;
} else if(pp_containerHeight > windowHeight - 100) {
    imageHeight = (windowHeight - 100);
    imageWidth = (width/height) * imageHeight;
} else {
    fitting = true;
}; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-09-21T09:39:59.727

```
@media only screen and (max-width: 480px) { 

    .pp_pic_holder.pp_default { width: 90%!important; left: 5%!important; overflow: hidden; }
    div.pp_default .pp_content_container .pp_left { padding-left: 0!important; }
    div.pp_default .pp_content_container .pp_right { padding-right: 0!important; }
    .pp_content { width: 100%!important; height: auto!important; }
    .pp_fade { width: 100%!important; height: 100%!important; }
    a.pp_expand, a.pp_contract, .pp_hoverContainer, .pp_gallery, .pp_top, .pp_bottom { display: none!important; }
    #pp_full_res img { width: 100%!important; height: auto!important; }
    .pp_details { width: 100%!important; padding-left: 3%; padding-right: 4%; padding-top: 10px; padding-bottom: 10px; background-color: #fff; margin-top: -2px!important; }
    a.pp_close { right: 7%!important; top: 10px!important; }
    #pp_full_res { padding: 5px !important; }

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-03-29T09:36:35.877

```
@media only screen and (max-width: 480px) { 

        *[class~=pp_pic_holder] { width: 100% !important; left: 0px !important; }  
        *[class~=pp_hoverContainer] { width: 90% !important; height: 180px !important;  }  
        *[class~=pp_fade] { width: 389px !important;  } 
        *[class~=pp_hoverContainer] { height: 190px !important;  }   
        *[class~=pp_right] { height: 220px !important;  }   
        *[class~=pp_content]  { height: 100% !important; width: 320px !important; }  
        #fullResImage { height: 100% !important; width: 320px !important; }  

} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-04-12T18:48:38.117

在第 580 行编辑 jquery.prettyPhoto.js 你会发现这个代码：

```
 if((pp_containerWidth > windowWidth)){
                imageWidth = (windowWidth - 200);
                imageHeight = (height/width) * imageWidth;
            }else if((pp_containerHeight > windowHeight)){
                imageHeight = (windowHeight - 200);
                imageWidth = (width/height) * imageHeight;
            }else{
                fitting = true;
            }; 
```

只需将值从 200 更改为 30。我认为这对您来说很好。

# iphone - UITabBarController 图像 iOS 5

> ID：13778715
> 
> 赞同：0
> 
> 时间：2012-12-08T15:04:56.643
> 
> 标签：iphone, objective-c, ios, uitabbar, uiappearance

我`UITabBarController`为 iOS5 创建了一个带有故事板的故事板。我的 ViewController 中没有`UITabBar`声明，也无法为标签栏设置背景图像。

```
UIImage *tabBackground = [[UIImage imageNamed:@"tabBarBackground.jpg"] resizableImageWithCapInsets:UIEdgeInsetsMake(0, 0, 0, 0)];
// Set background for all UITabBars
[[UITabBar appearance] setBackgroundImage:tabBackground];
// Set background for only this UITabBar
[[tabBarController tabBar] setBackgroundImage:tabBackground]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T15:57:54.810

您需要指定`tabBarController`为 IBOutlet 属性

```
@property (nonatomic, strong) IBOutlet UITabBarController *tabBarController; 
```

然后在 Interface Builder 的 Connections 检查器中将它们连接起来，您将能够使用如图所示的代码。

![在此处输入图像描述](../Images/f3fc90989b92d5d61002fcd0ad8b2ed2.png)

# javascript - 本地存储和保存会话状态

> ID：13778716
> 
> 赞同：0
> 
> 时间：2012-12-08T15:05:02.650
> 
> 标签：javascript, local-storage, mobiscroll

我正在制作一个 webapp，它使用 mobiscroll 作为数字计数器。这些数字通过其下方的提交按钮保存。我遇到的问题是每当用户按下主页按钮时，当重新加载 web 应用程序时，它会重置号码列表。我认为将值保存到本地存储是一个好主意，并在重新打开应用程序时调用它。现在这就是我卡住的地方。

这是正常工作的按钮按下功能：

```
<script type="text/javascript">
    function save_it() {
        //Save the scroll value for later
        var scrollsave = $('#i').scroller('getValue');
        localStorage.setItem("scrollsave", scrollsave);
        localStorage.saveServer
    }
</script> 
```

我有一个功能更进一步，这给我带来了麻烦，并且拒绝正常工作，我尝试了以下方法：

我第一次尝试分配

```
<script type="text/javascript">
    $(function () {
        var scrollstate = localStorage["scrollsave"];
        if (scrollstate != null) {
            $('#i').scroller('setValue', scrollstate);
        }

    });
</script> 
```

我收到一个错误，对象 x,x,x,x 没有“加入”方法。

第二次尝试转换为数组并返回，但没有运气。

```
var oldscroll = localStorage.getItem["scrollsave"];
var finalsaved = SON.parse(oldscroll);
if (finalsaved != null) {
    $('#i').scroller('setValue', finalsaved); 
```

关于 mobiscroll 的文档在这里[http://docs.mobiscroll.com/22/mobiscroll-core](http://docs.mobiscroll.com/22/mobiscroll-core)。它说，“数据参数中的滚动值作为数组传递”。

我的键 scrollsave 存储的值为 1,2,1,1 。这似乎符合正确的格式以放入 mobiscroll 部分。

我有一种感觉，我忽略了一些微不足道的东西，但我不知道是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T15:17:13.940

`var oldscroll = localStorage.getItem["scrollsave"];`应该`var oldscroll = localStorage.getItem("scrollsave");`

# ruby - 在 Ruby 中按日期（按距离）聚类

> ID：13778717
> 
> 赞同：2
> 
> 时间：2012-12-08T15:05:10.840
> 
> 标签：ruby, algorithm, cluster-analysis

我有一个巨大的日志，其中包含用户所做的操作（例如，审核内容）。我想找到“大众”动作，这意味着动作太密集（用户可能在没有想太多的情况下做出这些动作:)）。

这将转化为按日期（在线性空间中）对动作进行聚类，并标记过于密集的聚类。

我不是聚类算法和方法方面的专家，但我认为[k-means 聚类](http://en.wikipedia.org/wiki/K-means_clustering)无法解决问题，因为我不知道聚类的数量。此外，理想情况下，我还想“微调”算法。

你有什么建议？

PS 以下是我找到的一些资源（在 Ruby 中）：

*   [hierclust](https://github.com/Empact/hierclust) - 一个简单的空间数据层次聚类库
*   [AI4R](http://ai4r.rubyforge.org/) - 实现一些聚类算法的库

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T15:44:53.017

只要您对*先验*已知数量的集群感兴趣，K-means 可能会做得很好。既然您不这样做，您可能会考虑阅读有关[LBG 算法](http://www.data-compression.com/vq.html#lbg)的信息，该算法基于 k-means，用于矢量量化的数据压缩。它基本上是迭代 k 均值，它在质心收敛后分裂并不断分裂，直到达到可接受的集群数量。

另一方面，由于您的数据是一维的，您可以做一些完全不同的事情。

假设您的动作发生在 5 个时间点：（8、11、15、16、17）。让我们为这些动作中的每一个绘制一个高斯曲线，其中 μ 等于时间且 σ = 3。

![在此处输入图像描述](../Images/2063b95e1da23e6aeda9a55f4328d8dd.png)

现在让我们看看这些高斯值的总和是什么样子的。

![在此处输入图像描述](../Images/9872de951a4e42a3355c3785b2302236.png)

它显示了在 16 左右达到峰值的动作密度。

基于这一观察，我提出了以下简单的算法。

1.  为感兴趣的时间范围创建一个零向量。
2.  对于每个动作，计算高斯并将其添加到向量中。
3.  扫描向量，寻找大于向量中最大值乘以 α 的值。

请注意，对于每个动作，只有一小部分向量需要更新，因为高斯的值很快收敛到零。

您可以通过调整值来调整算法

1.  α ∈ [0,1]，表示必须注意活动峰值的重要性，
2.  σ，它影响被认为彼此接近的动作的距离，以及
3.  每个向量元素的时间段（分钟、秒等）。

请注意，该算法对于动作的数量是线性的。此外，并行化应该不难：将数据拆分到多个进程中，对高斯求和，然后对生成的向量求和。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T07:52:32.093

看看基于密度的聚类。例如[DBSCAN](https://en.wikipedia.org/wiki/DBSCAN)和 OPTICS。

这听起来正是您想要的。

# asp.net-mvc-3 - 在 OrderSummary.cshtml 页面中显示的 Nopcommerce 2.30 图像

> ID：13778718
> 
> 赞同：1
> 
> 时间：2012-12-08T15:05:16.693
> 
> 标签：asp.net-mvc-3, nopcommerce

在将图像添加到产品变体部分之前，购物车中为产品显示的图像是该产品的产品图像列表中的第一个产品图像。现在显示 Productvariant 图像。

如何保留 productvariant 图像但恢复使用产品图像中的第一张图像作为购物车中显示的图像？

```
@if (Model.ShowProductImages)
                    {
                        <td class="productpicture">
                            <img style="border-width: 0px;" alt="@item.Picture.AlternateText" src="@item.Picture.ImageUrl" title="@item.Picture.Title" />
                        </td>
                    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T16:04:05.597

在 Nop.Web.Controllers.ShoppingCartController.cs 中，函数 PrepareShoppingCartModel：

```
using (profiler.Step("Picture"))
{
    //picture
    if (_shoppingCartSettings.ShowProductImagesOnShoppingCart)
    {
        var picture = _pictureService.GetPictureById(sci.ProductVariant.PictureId);
        if (picture == null)
        {
            picture = _pictureService.GetPicturesByProductId(sci.ProductVariant.Product.Id, 1).FirstOrDefault();
        }
        cartItemModel.Picture = new PictureModel()
        {
            ImageUrl = _pictureService.GetPictureUrl(picture, _mediaSetting.CartThumbPictureSize, true),
            Title = string.Format(_localizationService.GetResource("Media.Product.ImageLinkTitleFormat"), cartItemModel.ProductName),
            AlternateText = string.Format(_localizationService.GetResource("Media.Product.ImageAlternateTextFormat"), cartItemModel.ProductName),
        };
     }
} 
```

只需将其开头部分更改为：

```
var picture = _pictureService.GetPicturesByProductId(sci.ProductVariant.Product.Id, 1).FirstOrDefault(); 
```

# r - 将 Matlab eig 转换为 R eigen

> ID：13778720
> 
> 赞同：1
> 
> 时间：2012-12-08T15:05:17.830
> 
> 标签：r, matlab

如何翻译这个 MATLAB 代码

```
[W LA] = eig(Matrix) 
```

在 R 代码中，我有这个

```
w= eigen(Matrix)$vectors 
```

但是如何获得'LA'矩阵

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-10T01:55:48.920

```
LA= eigen(Matrix)$values %*% diag(length(Matrix)) 
```

# c# - “System.DateTime”不是有效的 Windows 运行时参数类型

> ID：13778724
> 
> 赞同：16
> 
> 时间：2012-12-08T15:05:42.900
> 
> 标签：c#, windows-runtime, windows-store-apps

我正在使用 C# 类，它在我的 Windows Store App (C#) 中运行良好。但是当我尝试在 Windows 运行时组件中使用它时，我收到以下错误：

> Calculator.Calculate(System.DateTime)' 具有类型为“System.DateTime”的参数“dateTime”。“System.DateTime”不是有效的 Windows 运行时参数类型。

类中的示例对象：

```
public DateTime Calculate(DateTime dateTime)
{
   int dayNumberOfDateTime = ExtractDayNumber(dateTime);
   int sunRiseInMinutes = CalculateSunRiseInternal(tanSunPosition, differenceSunAndLocalTime);
   return CreateDateTime(dateTime, sunRiseInMinutes);
} 
```

我怎样才能解决这个问题？问题是什么？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-12-08T16:00:44.483

当您创建 Windows 运行时组件时，您的组件可以由不受管理的语言使用，例如 Javascript 或 C++。显然，这些语言不知道如何生成正确的 System.DateTime，它是一种特定的 .NET 类型。

因此，此类组件必须仅使用本机 WinRT 类型，否则必须遵守 WinRT 中存在的限制。您从一开始就会遇到这样一个限制，即 WinRT 不支持实现继承。这需要您声明您的班级*seal*。

本机 WinRT 类型与 .NET 类型非常不同。可以存储日期的真正运行时类型是 Windows.Foundation.DateTime。字符串实际上是一个 HSTRING 句柄。List 实际上是一个 IVector。等等。

Needless to say, if you would actually have to use those native types then your program wouldn't resemble a .NET program anymore. And you don't, the .NET 4.5 version of the CLR has a *language projection* built in. Code that automatically translates WinRT types to their equivalent .NET types. That translation has a few rough edges, some types cannot easily be substituted. But the vast majority of them map without trouble.

System.DateTime is one such rough edge. The language projection of Windows.Foundation.DateTime is System.DateTimeOffset. So simply solve your problem by declaring your method like this:

```
public DateTimeOffset Calculate(DateTimeOffset dateTime) {
    // etc..
} 
```

The only other point worth noting is that this is only required for members that other code might use. Public members.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-11-28T09:21:28.903

I was also facing the same issue in my Windows Runtime Component as below.

```
Severity Code Description Project File Line Suppression State
Error Method '.put_TxPower(System.SByte)' has parameter 'value' of type 'System.SByte'.  
System.SByte' is not a valid Windows Runtime parameter type. 
```

As Lukasz Madon mentioned in the comment, changing the access modifier from the **public** to **internal** worked for me.

Before:

```
public sbyte TxPower { get; set; } 
```

After:

```
internal sbyte TxPower { get; set; } 
```

# iphone - 在 iOS 中同时运行多个视频。

> ID：13778730
> 
> 赞同：1
> 
> 时间：2012-12-08T15:05:58.377
> 
> 标签：iphone, objective-c, ios, video

我想在我的 iPhone 应用中播放多个视频。

我确实尝试过使用 myVideoPlayer 库，但是当我这样做时，我只能同时运行其中的四个。其余的没有响应。

我需要最终结果是这样的： [https ://dl.dropbox.com/u/18654072/MadPad.mov](https://dl.dropbox.com/u/18654072/MadPad.mov)

你有什么建议吗？

谢谢

# list - Haskell List Comprehension，其中 x 不能等于列表的元素

> ID：13778732
> 
> 赞同：1
> 
> 时间：2012-12-08T15:06:09.563
> 
> 标签：list, haskell, list-comprehension

我想从元组列表中生成一个元组列表，其中元组的左侧部分仅出现在列表的所有元素的左侧。

基本上我想要的是以下更通用的版本：

```
[ (x,y) | (x,y) <- [(1,5),(5,2)], x /= 5, x /=2 ] 
```

如果 [(1,5),(5,2)] 是一个名为 list 的变量，那么 x 不能等于 (map snd list) 的任何值。如何将此条件置于列表理解中？（或者我应该使用其他东西吗？比如过滤器？）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-08T15:11:06.513

> 那么 x 不能等于 (map snd list) 的任何值

的直接翻译是

```
x `notElem` map snd list 
```

所以你会使用类似的东西

```
let xs = [(1,5),(5,2)] in [(x,y) | (x,y) <- xs, x `notElem` map snd xs] 
```

如果列表很长，那效率不高，那么您可以 - 如果类型允许，即是一个实例`Ord`- 构建一个集合并检查集合中的成员资格

```
let xs = [(1,5),(5,2)]
    st = Data.Set.fromList (map snd xs)
in [(x,y) | (x,y) <- xs, not (Data.Set.member x st)] 
```

将第一个复杂度降低`O(n²)`到一个`O(n*log n)`复杂度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T15:11:20.053

构造一个包含所有第二个元素的[Set](http://hackage.haskell.org/packages/archive/containers/latest/doc/html/Data-Set.html)（我们称之为`seconds`），然后只过滤`flip notMember seconds . fst`. 如果你真的想要的话，你可以很容易地把它写成一个列表理解（但你最终会重写过滤器，那为什么要这样做呢？）。

# html - 为什么两个div不对齐？

> ID：13778734
> 
> 赞同：1
> 
> 时间：2012-12-08T15:06:12.357
> 
> 标签：html, css, alignment

```
<div id="container">
  <div id="top"></div>
  <div id="left"></div>
  <div id="right"></div>
  <div id="clear"></div>
</div> 
```

```
#container{
  width:200px;
  margin-left:auto;
  margin-right:auto;
  margin-top:50px;   
}

#top{
  width:200px;
  height:20px;
  border:medium ridge #FFF;
}
#left{
  float:left;
  width:50px;
  height:20px;
  border:medium ridge #FFF;
}
#right{
  float:right;
  width:40px;
  height:20px;
  border:medium ridge #FFF;
}
#clear{
  clear:both;  
} 
```

为什么`#right`and`#top`不正确对齐？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T15:12:12.723

这是因为`top`元素实际上溢出了容器的边界，而浮动元素`right`被限制在它里面。`top`元素溢出，因为`container`边框不包含在宽度中。所以`top`实际上是占用204px。

通过示例说明问题：http: [//jsfiddle.net/KhJ6e/2/](http://jsfiddle.net/KhJ6e/2/)

要修复，请调整`top`以考虑每边的 2px 边框。`auto`（从容器的宽度中减去 4）或根据您的意图指定宽度。

```
#top{
    width:196px;
    height:20px;
    border:medium ridge #FFF;
} 
```

示例：http: [//jsfiddle.net/KhJ6e/1/](http://jsfiddle.net/KhJ6e/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T15:13:51.460

顶部比它的父容器宽

```
#top{
  width:auto;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T15:34:20.893

问题是如何为盒子模型计算宽度。屏幕上的所有元素都有 4 个组件（从内到外）：内容、内边距、边框、边距。默认情况下，宽度仅包括内容。通过添加边框，顶部变得大于 200 像素。使用 chrome 中的开发人员工具，它呈现为 206px。

有两种可能的解决方案，一种是修改宽度，另一种是修改盒子模型。第一个会起作用，但很难维护。任何小的变化都会弄乱对齐方式。

更好的解决方案是使用`box-sizing: border-box`. 通过添加该 CSS 样式，宽度属性将包括内容、填充和边框。因此，最初的 padding 和border 环绕在*外部*，但使用border-box，则侵占了*内部*。

*   原文：http: [//jsfiddle.net/deafcheese/Gv5BZ/](http://jsfiddle.net/deafcheese/Gv5BZ/)
*   更正（使用 `boz-sizing: border-box`）：http: [//jsfiddle.net/deafcheese/Gv5BZ/1/](http://jsfiddle.net/deafcheese/Gv5BZ/1/)
*   盒子尺寸参考：[http ://css-tricks.com/box-sizing/](http://css-tricks.com/box-sizing/)

# groovy - 在 Groovy 表达式中使用文字运算符（例如“and”、“or”）？

> ID：13778737
> 
> 赞同：5
> 
> 时间：2012-12-08T15:06:36.223
> 
> 标签：groovy, dsl

我当前的工作项目允许在特定上下文中评估用户提供的表达式，作为他们扩展和影响工作流程的一种方式。这些表达式是通常的逻辑表达式 f。为了让非程序员更容易接受，我想让他们选择使用文字运算符（例如，and、or，而不是 &、|、！）。

简单的搜索和替换是不够的，因为数据可能包含引号中的这些单词，并且构建解析器虽然可行，但可能不是最优雅和最有效的解决方案。

把问题说清楚：Groovy 中有没有一种方法可以让用户编写

```
x > 10 and y = 20 or not z 
```

但是让 Groovy 像这样评估它：

```
x > 10 && y == 20 || !z 
```

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-05-04T23:35:22.087

最近版本的 Groovy 支持[Commandchains](http://docs.groovy-lang.org/latest/html/documentation/core-domain-specific-languages.html#_command_chains)，所以确实可以这样写：

```
compute x > 10 and y == 20 or not(z) 
```

这里的“计算”一词是任意的，但不能省略，因为它是命令链中的第一个“动词”。接下来的所有内容都在动词和名词之间交替：

```
 compute  x > 10  and  y == 20  or   not(z)
 ───┬───  ──┬───  ─┬─  ───┬───  ─┬─  ──┬───
   verb    noun   verb   noun   verb  noun 
```

命令链编译如下：

```
verb(noun).verb(noun).verb(noun)... 
```

所以上面的例子被编译成：

```
compute(x > 10).and(y == 20).or(not(z)) 
```

有很多方法可以实现这一点。这只是一个快速而肮脏的概念证明，除其他外，它没有实现运算符优先级：

```
class Compute {
    private value
    Compute(boolean v) { value = v }
    def or (boolean w) { value = value || w; this }
    def and(boolean w) { value = value && w; this }
    String  toString() { value }
}

def compute(v) { new Compute(v) }
def not(boolean v) { !v } 
```

您可以单独使用命令链（作为顶级语句）或赋值运算符的右侧（局部变量或属性赋值），但不能在其他表达式中使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T01:34:38.883

如果您可以分别将操作符和操作符换成facelets -like`>`和，我认为您的情况可能是可行的，尽管这需要付出很多努力：`=``gt``eq`

```
x gt 10 and y eq 20 or not z 
```

决议：

```
x(gt).10(and).y(eq).20(or).not(z) 
```

这将是地狱解析。

@Brian Henry 建议的方式是最简单的方式，虽然不是用户友好的，因为它需要括号和圆点。

好吧，考虑到我们可以交换运算符，您可以尝试拦截`Integer.call`to start 表达式。将脚本中缺少的属性解析为操作可以解决您的新关键字问题。然后您可以构建表达式并将它们保存到列表中，在脚本末尾执行它们。它还没有完成，但我伴随着这个：

```
// the operators that can be used in the script
enum Operation { eq, and, gt, not }

// every unresolved variable here will try to be resolved as an Operation
def propertyMissing(String property) { Operation.find { it.name() == property} }

// a class to contain what should be executed in the end of the script
@groovy.transform.ToString 
class Instruction { def left; Operation operation; def right }

// a class to handle the next allowed tokens
class Expression {
  Closure handler; Instruction instruction
  def methodMissing(String method, args) {
    println "method=$method, args=$args"
    handler method, args
  }
}

// a list to contain the instructions that will need to be parsed
def instructions = []

// the start of the whole mess: an integer will get this called
Integer.metaClass {
  call = { Operation op ->
    instruction = new Instruction(operation: op, left: delegate)
    instructions << instruction
    new Expression(
      instruction: instruction,
      handler:{ String method, args -> 
        instruction.right = method.toInteger()
        println instructions
        this
      })
  }
}

x = 12
y = 19
z = false

x gt 10 and y eq 20 or not z 
```

由于部分未实现，这将给出异常，`not()`但它可以在失败之前构建两个指令对象：

```
[Instruction(12, gt, 10), Instruction(19, eq, 20)] 
```

不确定是否值得。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T19:13:57.017

[GDK](http://groovy.codehaus.org/groovy-jdk/java/lang/Boolean.html)对布尔值进行附加`and()`和`or()`方法。如果您提供了类似的方法

```
Boolean not(Boolean b) {return !b} 
```

你可以写一些像

```
(x > 10).and(y == 20).or(not(4 == 1)) 
```

不过，我不确定这是否特别容易编写。

# eclipse - EMF 在运行时从 ECore XMI 生成模型类

> ID：13778741
> 
> 赞同：1
> 
> 时间：2012-12-08T15:06:51.713
> 
> 标签：eclipse, eclipse-emf, eclipse-emf-ecore

据我所知，我们可以像这样生成 ECore 模型：

```
// 动态创建一个Book的子类，Magic power comes from here
        // create the SchoolBook EClass
        EClass schoolBookEClass = efactory.createEClass();
        schoolBookEClass.setName("SchoolBook");

        // create a new attribute for this EClass
        EAttribute level = efactory.createEAttribute();
        level.setName("level");
        level.setEType(epackage.getEInt());
        schoolBookEClass.getEStructuralFeatures().add(level);

        // 设置父类
        schoolBookEClass.getESuperTypes().add(ExtlibraryPackage.eINSTANCE.getBook());

        // 创建新的课程类
        EClass courseEClass = efactory.createEClass();
        courseEClass.setName("Course");

        // 课程名称属性
        EAttribute courseName = efactory.createEAttribute();
        courseName.setName("courseName");
        courseName.setEType(epackage.getEString());
        courseEClass.getEStructuralFeatures().add(courseName);

        // 课程对教材的引用关系
        EReference courseBook = efactory.createEReference();
        courseBook.setName("courseBook");
        courseBook.setEType(schoolBookEClass);
        courseBook.setContainment(false);
        courseEClass.getEStructuralFeatures().add(courseBook);

        // 创建包
        EPackage schoolPackage = efactory.createEPackage();
        schoolPackage.setName("elv");
        schoolPackage.setNsPrefix("elv");
        schoolPackage.setNsURI("http:///www.elver.org/School");
        schoolPackage.getEClassifiers().add(courseEClass);
        schoolPackage.getEClassifiers().add(schoolBookEClass);
        EPackage.Registry.INSTANCE.put(schoolPackage.getNsURI(), schoolPackage); 
```

类路径中根本没有这样的类，但我们可以将它们用于其他操作，例如创建 ui，保存到数据库。

如果我在 xml 文件（例如 mymodel.ecore）中定义了一些 EMF 模型类，它只包含这些 ECore 模型的 XMI 序列化。那么如何在运行时创建它们的实例而不在类路径上生成类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T23:57:36.507

您实际上可以在运行时加载 ECore 模型并实例化对象：

```
 ResourceSet resourceSet = new ResourceSetImpl();
    resourceSet.getResourceFactoryRegistry().getExtensionToFactoryMap().put( "ecore", new EcoreResourceFactoryImpl());
    Resource resource = resourceSet.getResource(URI.createFileURI("C:\\my.ecore"), true);
    EPackage model = (EPackage)resource.getContents().get(0);
    EClass eClass = (EClass) model.getEClassifiers().get(0);
    EObject object = model.getEFactoryInstance().create(eClass); 
```

# php - 如何在另一个 PHP 页面中显示信息

> ID：13778747
> 
> 赞同：1
> 
> 时间：2012-12-08T15:07:28.223
> 
> 标签：php, html, mysql, sql

我在使用迷你购物车时遇到问题。我已经创建了迷你购物车，当添加产品时，它会进入购物篮页面。但是，我想创建一个结帐页面。我如何抓住购物篮中的产品并将其放入结帐页面。

例如，结帐页面将如下所示

商品名称、商品型号、商品价格

```
 TOTAL OF ITEMS 
```

结帐按钮（链接到支付系统）

这是我的 Basket.php 代码：

```
<?php
    $bikecode = $_GET['id'];     //the product id from the URL 
    $action = $_GET['action']; //the action from the URL

if($bikecode && !productExists($bikecode)) {
    die("Product Doesn't Exist");
} 

    switch($action) {   //decide what to do 

        case "add":
            $_SESSION['cart'][$bikecode]++; //add one to the quantity of the product with id $bikecode 
        break;

        case "remove":
            $_SESSION['cart'][$bikecode]--; //remove one from the quantity of the product with id $bikecode 
            if($_SESSION['cart'][$bikecode] == 0) unset($_SESSION['cart'][$bikecode]); //if the quantity is zero, remove it completely (using the 'unset' function) - otherwise is will show zero, then -1, -2 etc when the user keeps removing items. 
        break;

        case "empty":
            unset($_SESSION['cart']); //unset the whole cart, i.e. empty the cart. 
        break;
    }

    if($_SESSION['cart']){

        echo "<table width=\"100%\">";   

          foreach($_SESSION['cart'] as $bikecode => $quantity) { 
             $sql = sprintf("SELECT BikeCode, Model, Price FROM Bike WHERE BikeCode = '%s';", $bikecode);

                $result = mysqli_query($con, $sql);

                if(mysqli_num_rows($result) > 0) {

                    list($bikecode, $model, $price) = mysqli_fetch_row($result);    

                    $cost = $quantity * $price;
                    $total = $total + $cost;

                        echo "<tr><th>BikeCode:</th><th>Model:</th><th>Quantity:</th><th>Price:</th></tr>";
                        echo "<tr>";
                        echo "<td align=\"center\">$bikecode</td>";
                        echo "<td align=\"center\">$model</td>";
                        echo "<td align=\"center\">$quantity <a href=\"$_SERVER[PHP_SELF]?action=remove&id=$bikecode\">X</a></td>";
                        echo "<td align=\"center\">£$cost</td>";
                    echo "</tr>";
                }
            }

            echo "<tr>";
                echo "<td colspan=\"3\" align=\"right\">Total</td>";
                echo "<td align=\"right\">£$total</td>";
            echo "</tr>";

            echo "<tr>";
                echo "<td colspan=\"4\" align=\"right\"><a href=\"$_SERVER[PHP_SELF]?action=empty\" onclick=\"return confirm('Are you sure?');\">Empty Cart</a></td>";
            echo "</tr>";       
        echo "</table>";

    }else{
        echo "You have no items in your shopping cart.";
    }

function productExists($bikecode) {
    $sql = sprintf("SELECT * FROM Bike WHERE BikeCode = '%s';", $bikecode); 
    return mysqli_num_rows(mysqli_query($con, $sql)) > 0;
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T15:21:45.897

只要您`session_start();`在每个页面的顶部都有一个，您就应该能够使用与在这段编码中完全相同的 foreach 循环。与信息的会话将被转移到下一页。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T15:27:15.833

假设您有一个名为 test.php 的页面，其中包含以下代码：

```
<?php
session_start();
$_SESSION['test'] = 1;
echo $_SESSION['test']; 
?> 
```

然后访问 othertest.php 页面中的测试变量，只需执行以下操作：

```
<?php
session_start();
echo $_SESSION['test']; ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T15:49:50.117

您忘记添加`session_start()`到 php 文件的顶部。我建议添加`session_start()`到一个单独的文件，然后将该文件包含在每个使用会话变量的 php 页面中。

# css - 字体图标 IE 8 问题

> ID：13778751
> 
> 赞同：1
> 
> 时间：2012-12-08T15:08:19.703
> 
> 标签：css, fonts

我正在使用来自这个优秀网站[http://fontello.com/](http://fontello.com/)的字体图标。但是在 IE 上，我得到了一些字体两个小竖线。您可以在下面看到问题。有人可以让我知道任何解决方法吗？谢谢你

![在此处输入图像描述](../Images/9ae366a0645a93bb8ce1f177a000907f.png)

您可以通过从[http://fontello.com/下载这些字体来尝试这个](http://fontello.com/)

![在此处输入图像描述](../Images/1695da20ff7563ba63d50bfafd834476.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T16:53:51.680

有时字体制造商会给你一个样式表/javascript 文件，标题为“ie-fix”，有时你只是 SOL Font Awesome 有一些很棒的、**非常**兼容的字体图标。

祝你好运！

# iphone - EKRecurreceRule：如何设置属性 firstDayOfTheWeek

> ID：13778762
> 
> 赞同：2
> 
> 时间：2012-12-08T15:09:50.307
> 
> 标签：iphone, objective-c, ios, eventkit

我使用了 EventKit 并在 中找到了该属性`firstDayOfTheWeek`，`EKRecurrenceRule`但该属性只是只读的，所以我的问题是有人知道如何设置此属性或如何设置任何`readonly`属性吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T15:35:56.077

[根据Apple关于“EKRecurrenceRule”的文档](http://developer.apple.com/library/ios/#documentation/EventKit/Reference/EKRecurrenceRuleClassRef/Reference/Reference.html)......

> **注意**：目前无法直接修改 EKRecurrenceRule 或其任何属性。此功能是通过创建新的 EKRecurrenceRule 并设置事件或提醒来使用新创建的规则来实现的。

换句话说，**EKRecurrenceRule**对象中的所有属性都是只读的。这对我来说很有意义：一旦用户设置了规则，它就不应该成为移动目标。如果你想改变它，你必须创建一个全新的和/或单独的规则。

至于“firstDayOfTheWeek”的事情，我不能 100% 确定 Apple 的实施是否返回重复事件发生的一周的第一天，或者它是否是日历一周中的第一个实际日子（无论是星期日还是星期一）。我的猜测是前者。[Apple 的文件称，该属性](http://developer.apple.com/library/ios/documentation/EventKit/Reference/EKRecurrenceRuleClassRef/Reference/Reference.html#//apple_ref/occ/instp/EKRecurrenceRule/firstDayOfTheWeek)“指示重复规则将一周中的哪一天视为一周的第一天。”

# .net - 如何在菜单条中显示数据库中的所有表名？

> ID：13778771
> 
> 赞同：1
> 
> 时间：2012-12-08T15:10:51.850
> 
> 标签：.net, database, visual-studio-2010, menu

我想在菜单条中显示我的数据库中的所有表名。

当我将鼠标悬停在菜单上时，所有表格的列表都会出现在菜单中。当我单击表名时，该表将显示在 datagridview 中，其中包含所有记录。我怎样才能做到这一点？

任何帮助将不胜感激。

谢谢

# android - Android 和 iPhone 的文本缩放不同

> ID：13778778
> 
> 赞同：3
> 
> 时间：2012-12-08T15:11:33.347
> 
> 标签：android, iphone, css, font-size

`font-size`在 Android 和 iPhone 上进行不同的缩放是否存在任何已知问题？

我有一个在`HTML`选择器上设置了 107% 字体大小的网站。然后我在它的`media query`正下方有一个设置字体大小为 150% 的屏幕小于 500 像素。

如果我删除媒体查询并在 Iphone 和 android 上查看页面，则 107% 大小的文本在两种设备上看起来大小相当。

如果我重新添加媒体查询，则两个设备上的文本都会按预期变大。然而，在 iPhone 上它变得如此之大以至于它比它在 android 上显示的要大 50% 到 100%！它完全打破了布局！这发生在布局中各处的所有文本元素上。

这是移动设备的已知问题还是我发生了某种复合单元问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T15:45:29.637

那么，它是在纵向和横向模式下，还是仅在横向模式下？因为，在横向中，默认浏览器行为字体会变大。也许一个是纵向模式，另一个是横向模式？

请在此处查看 > [当 iPhone 方向从纵向更改为横向时保留 HTML 字体大小](https://stackoverflow.com/questions/2710764/preserve-html-font-size-when-iphone-orientation-changes-from-portrait-to-landsca)

如果这是您的问题，解决方案类似于>

```
html {
  -webkit-text-size-adjust: 100%;
} 
```

# c++ - NormalBayesClassifier 在 opencv 代码中给出未声明的标识符

> ID：13778780
> 
> 赞同：0
> 
> 时间：2012-12-08T15:11:48.180
> 
> 标签：c++, opencv, machine-learning

我试图`NormalBayesClassifier`在我的代码中使用词袋。预训练矩阵已经准备好并交给`trainme`矩阵。我使用它如下：

```
NormalBayesClassifier classifier;
classifier.train(trainme, labels); 
```

我收到以下错误：

```
error C2065: 'NormalBayesClassifier' : undeclared identifier 
```

我添加了所有正确的库并且所有其他 opencv 函数都可以工作，包括 features2d 函数。

这是我的图书馆：

```
#include <stdafx.h>
#include <stdlib.h>
#include <cv.hpp>
#include <cxcore.hpp>
#include <highgui.h>
#include <iostream>
#include "opencv2/nonfree/features2d.hpp"
#include "opencv2/calib3d/calib3d.hpp"
#include "opencv2/imgproc/imgproc.hpp"
#include "opencv2/nonfree/nonfree.hpp"
#include <fstream>
#include <windows.h>
using namespace cv;
using namespace std; 
```

那应该涵盖该`NormalBayesClassifier`功能，那为什么我会收到此错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T15:44:22.107

根据[文档](http://docs.opencv.org/modules/ml/doc/normal_bayes_classifier.html)，Normal Bayes Classifier 的类实际上被调用`CvNormalBayesClassifier`。

对应的头文件为：

```
#include "opencv2/ml/ml.hpp" 
```

# mysql - sql 缓存干扰了我进行查询优化的尝试

> ID：13778781
> 
> 赞同：1
> 
> 时间：2012-12-08T15:11:50.380
> 
> 标签：mysql, sql

我正在尝试多种方法来编写相同的查询，但查询缓存干扰了我的工作。

我做了一次查询，大约需要 3.5 秒。我再做一次，它需要 0.015。我稍微更改了 JOIN，但仍然需要 0.015 秒，这让我很难看出哪个更快。

我尝试了以下方法无济于事：

```
RESET QUERY CACHE;
FLUSH TABLES; 
```

IE。完成这些之后，我的查询仍然需要 0.015 秒。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T15:18:36.423

查询优化的第一步是检查执行计划。在大多数情况下，计划越便宜，性能越好。然后，您可能需要检查系统视图（取决于 RDMS）以验证并发问题、物理/逻辑读/写次数等（通常在进行一些负载测试后才有意义）。

您所拥有的执行时间的差异是因为缓存 - 如果您以非常短的间隔运行相同的查询，则第二次查询不会真正执行。

# c++ - 等待异步操作

> ID：13778782
> 
> 赞同：1
> 
> 时间：2012-12-08T15:12:05.940
> 
> 标签：c++

我想实现一种机制，允许我阻止程序流，直到异步操作完成。（主要用于没有消息循环的单元测试。）

我创建的代码创建了一个线程并等待线程内的条件通知：

```
#include <chrono>
#include <condition_variable>
#include <iostream>
#include <memory>
#include <mutex>
#include <stdexcept>
#include <thread>

struct Blocker {
    Blocker() :
        wait_thread([this]() {
            std::mutex mtx;
            std::unique_lock<std::mutex> lck(mtx);            
            cond.wait(lck);
        })
    {
    }

    void wait() { wait_thread.join(); }

    void notify() { cond.notify_one(); }

    std::condition_variable cond;    
    std::thread wait_thread;
};

template<typename Callback>
void async_operation(const Callback & cb) { cb(); }

int main() {
    Blocker b;
    async_operation([&](){ b.notify(); });
    b.wait();
} 
```

问题是它经常死锁，因为调用`notify`发生在线程甚至开始之前。我应该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T15:31:03.900

```
#include <mutex>
#include <condition_variable>

struct blocker
{
  blocker () : done (false) {}

  void
  notify ()
  {
    std::unique_lock<std::mutex> lock (m);
    done = true;
    c.notify_all (); 
  }

  void
  wait ()
  {
    std::unique_lock<std::mutex> lock (m);
    while (!done)
      c.wait (lock);
  }

  bool done;
  std::mutex m;
  std::condition_variable c;
}; 
```

# c - 在c中通过引用函数内的函数

> ID：13778786
> 
> 赞同：-3
> 
> 时间：2012-12-08T15:12:45.750
> 
> 标签：c, function

我想在c中通过引用在函数内传递一个函数。它们都使用相同的参数。这是代码

```
#include <stdio.h>
#include <stdlib.h>
#include <math.h>
void AtoB(int *A, int *B, int *C, int n,int *h1,int *h2,int *h3 );
void AtoC(int *A, int *B, int *C, int n,int *h1,int *h2,int *h3 );
void BtoC(int *A, int *B, int *C, int n,int *h1,int *h2,int *h3 );
void function2(int *A, int *B, int *C, int n);

int main(){
int n;
int e;
int h3=1;
int h2=1;
int h1=0;
int min;
int *A;
int *B;
int *C;

printf("Give me the number of disks:");
scanf("%d",&n);
A = (int *) calloc(n,sizeof(int));
B = (int *) calloc(n,sizeof(int));
C = (int *) calloc(n,sizeof(int));
min=pow(2,n)-1;
for (e=0;e<n;e++){
  A[e]=e+1;
}

if (n%2==0){
 for (e=0;e<min/3;e++){
   AtoB(A,B,C,n,&h1,&h2,&h3);

 }

 }

free(A);free(B);free(C);

 return 0;
}

int function1(int Z[],int n){
int j,i,k,a;
for (i=0;i<n;i++){
 k=n-Z[i];
  for (j=0;j<n;j++){
   if(k==j){
    for(a=0;a<2*Z[i]-1;a++){
    printf("%d",Z[i]);
    }
   }
   else if((j==n-1)&&(Z[i]==0)){
    printf("|");
   }
   else{
   printf(" ");
   }
   }
printf("\n");

 }for(i=0;i<2*n-1;i++){
 printf("-");
}
printf("\n\n");
return 0;
}
void function2(int A[],int B[],int C[],int n){

    printf("A\n");
    function1(A,n);
    printf("B\n");
    function1(B,n);
    printf("C\n");
    function1(C,n);
}

void AtoB(int A[],int B[],int C[],int n,int *h1,int  *h2,int *h3){
     if (B[n-1]==0){
     printf("A->B\n");
     B[n-1]=A[*h1];
     A[*h1]=0;
     *h1=*h1+1;
     function2(A,B,C,n);}
     else if (A[n-1]==0){
     printf("A->B\n");
     A[0]=B[n-*h2];
     B[n-*h2]=0;
     *h2=*h2-1;
     function2(A,B,C,n);

    }
AtoC(A,B,C,n,&h1,&h2,&h3);

}

void AtoC(int A[], int B[], int C[], int n,int *h1,int *h2,int *h3 ){

} 
```

程序必须在显示塔结构的同时解决河内塔。

我收到错误：从不兼容的指针类型传递“AtoC”的参数 5。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T15:24:21.770

您不能那样做，在 AtoB 函数中，您已将 h1 声明为指针，而在 AtoC 函数中，您正在传递该指针的地址。两个函数都应该有像 *h1,*h2,*h3 这样的相同声明。

# bash - 使用 ssh 手动加载私钥

> ID：13778787
> 
> 赞同：12
> 
> 时间：2012-12-08T15:12:56.470
> 
> 标签：bash, ssh, private-key

是否可以在`ssh`忽略默认`.ssh`目录的情况下运行并指定其他一个或更好地指定的私钥？

例如：

```
ssh --private-key other_id_rsa login@host 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-08T15:15:32.623

您可以使用该`-i`选项。

来源：`man ssh`

```
-i identity_file
    Selects a file from which the identity (private key) for public key authentication is read.  The default is ~/.ssh/identity for protocol
    version 1, and ~/.ssh/id_dsa, ~/.ssh/id_ecdsa and ~/.ssh/id_rsa for protocol version 2\.  Identity files may also be specified on a per-
    host basis in the configuration file.  It is possible to have multiple -i options (and multiple identities specified in configuration
    files).  ssh will also try to load certificate information from the filename obtained by appending -cert.pub to identity filenames. 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-01T22:57:00.730

您还可以为您访问的每个主机添加特定配置，这与持久使用 ssh 中可用的标志几乎相同。

整个世界都有可用的标志，并且提供的每个不同的服务专业化都有一些映射。在您的情况下，使用特定`id_rsa`文件，您可以写下您的`~/.ssh/config`文件：

```
...

Host host_alias
    HostName host_name
    IdentityFile ~/.ssh/id_rsa_you_want

... 
```

然后，您可以简单地使用：

```
ssh host_alias 
```

并且`id_rsa_you_want`将使用 - 以及您可能应用于连接的任何其他配置。有关`man ssh_config`可用指令的完整列表，请参阅。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-11-24T23:12:26.720

另一种方法是在使用 ssh 之前手动使用 ssh-agent 和 ssh-add 命令。

```
ssh-agent (if not running already)
ssh-add /path/to/private_key

example:
ssh-agent
ssh-add ~/.ssh/id_rsa 
```

# entity-framework - Entity Framework 可以按相关实体上的属性对实体进行排序吗？

> ID：13778789
> 
> 赞同：2
> 
> 时间：2012-12-08T15:13:32.297
> 
> 标签：entity-framework, orm

假设我有以下“Foo”和“Bar”实体：

```
class Foo {
   int FooId;
   string FooName;
}

class Bar {
   int BarId;
   Foo RelatedFoo;
   string BarName;
} 
```

我们还假设我希望默认情况下延迟加载“RelatedFoo”。

在实体框架中，是否可以执行返回可枚举的“Bar”实体的查询，其中元素按“bar.RelatedFoo.FooName”排序？

如果是这样，这可以在固定数量的数据库查询中完成吗？我想避免做[N+1 查询](https://stackoverflow.com/questions/97197/what-is-the-n1-selects-problem)。

如果不是，这在另一个 .NET ORM 框架中是否可行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T15:30:36.750

```
var bars = _context.Bars.OrderBy(b => b.RealtedFoo.FooName) 
```

您可能还想只带回那些`RealtedFoo`不为空的栏

```
var bars = _context.Bars.Where(b => b.RelatedFoo != null).OrderBy(b => b.RealtedFoo.FooName) 
```

**更新：**

```
 //For EF only
    _context.Configuration.LazyLoadingEnabled = false

    //If you want to bring back RealtedFoo then include it. 
//Otherwise, you can just query for it and not use the Include() extension.
    var bars = _context.Bars.Include(b => b.RealtedFoo).Where(b => b.RelatedFoo != null).OrderBy(b => b.RealtedFoo.FooName) 
```

# powershell-2.0 - 在文本文件中查找字符串并将其替换为父文件夹的名称

> ID：13778790
> 
> 赞同：3
> 
> 时间：2012-12-08T15:13:35.827
> 
> 标签：powershell-2.0

我有这个问题，我必须将所有文本文件中的字符串“121212”替换为其父文件夹的名称（例如，如果父文件夹名为“123456”，则字符串“121212”应替换为“123456”）

我以为我想出了如何使用以下命令来做到这一点：

```
PS E:\testenvironment> $parent=get-childitem -recurse | where {$_.FullName -match "[testenvironment]\\\d{6}$"} | foreach {$_.Name}
PS E:\testenvironment> $parent
123456
456789
654321
987654
PS E:\testenvironment> $files=get-childitem -recurse | where {$_.FullName -match "\\\d{6,6}\\AS400\\test3.txt$"} | foreach {$_.FullName}
PS E:\testenvironment> $files
E:\testenvironment\123456\AS400\test3.txt
E:\testenvironment\456789\as400\test3.txt
E:\testenvironment\654321\AS400\test3.txt
E:\testenvironment\987654\AS400\test3.txt
PS E:\testenvironment> foreach ($file in ($files)) {Get-Content "$file" | foreach-Object {$_ -replace "121212", "($name in ($parent))"} | set-content "$file"} 
```

但我收到这条消息：

```
Set-Content : The process cannot access the file 'E:\testenvironment\123456\AS400\test3.txt' **because it is being used by another process**.
At line:1 char:127
+ foreach ($file in ($files)) {Get-Content "$file" | foreach-Object {$_ -replace "121212", "($name in ($parent))"} | set-content <<<<  "$file"}
    + CategoryInfo          : NotSpecified: (:) [Set-Content], IOException
    + FullyQualifiedErrorId : System.IO.IOException,Microsoft.PowerShell.Commands.SetContentCommand 
```

（......我当然会为每个 test3.txt 文件收到这个......）

我无法弄清楚如何将“当前内存”放入新变量中，以便可以用新数据覆盖文件（当前位于内存中）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T19:18:57.457

如果您所有的文本文件都在您发布的目录结构中，以下将完成工作：

```
get-childitem $testEnvPath -recurse -filter "*.txt" | foreach{
    $content = Get-Content $_.fullname 
    #To get the file's grandparent directory name ($_.fullname -split '\\')[-3]
    $content -replace "121212", ($_.fullname -split '\\')[-3] | 
    set-content $_.fullname
} 
```

请注意，要“移动”到内存中的下一个文件/目录，这些项目的枚举必须在 foreach 语句内部，而您在外部枚举它们。

希望有帮助。

# sql - 日期差异从函数中获得的结果与从 select 语句中获得的结果不同

> ID：13778792
> 
> 赞同：-1
> 
> 时间：2012-12-08T15:13:36.807
> 
> 标签：sql, oracle, oracle10g

我需要获取 2 个日期字段的差异，如果较大的日期为空，那么我将使用它`SYSDATE`。有这个需求，我创建了一个函数来解决这个问题（注意：此代码遵循组织的标准，不是我个人的口味）

```
CREATE FUNCTION F_GET_DIFFERENCE (P_WORKFLOWID NUMBER)
RETURN NUMBER --result in minutes
IS
    TIME NUMBER;
BEGIN
    TIME := 0
    SELECT
        F_WORKTIME_DIFF(NVL(X.ENDDATE, SYSDATE), X.STARTDATE)
    INTO
        TIME
    FROM
        TABLEX X
    WHERE
        X.WORKFLOWID = P_WORKFLOWID;

    RETURN TIME;
EXCEPTION
    WHEN OTHERS THEN
        RETURN 0;
END; 
```

该`F_WORKTIME_DIFF`函数已经存在并计算一天的工作时间（假设没有人在上午 12 点工作，诸如此类）。问题是在调用此函数时，结果包含额外的时间。这很奇怪，因为在函数中执行查询时，它返回了预期的输出。

示例（重要：秘鲁的日期格式为*DD/MM/YYYY HH24:MI:SS*）

```
TABLEX

WORKFLOWID        STARTDATE                ENDDATE
    1             '01/12/2012 10:00:00'      null 
```

假设服务器日期是同一天（01/12/2012）但更大的时间（10:01:00），我们执行函数：

```
SELECT F_GET_DIFFERENCE(1)
FROM DUAL; 
```

结果是：14。

现在，在函数中执行查询并让服务器时间为 10:02:00，结果为 2（精确输出）。

我什至尝试执行这个

```
SELECT
    F_WORKTIME_DIFF(NVL(X.ENDDATE, SYSDATE), X.STARTDATE) SELECT_WAY,
    F_GET_DIFFERENCE(1) FUNCTION_WAY
FROM
    TABLEX X
WHERE
    X.WORKFLOWID = 1 
```

结果是（服务器时间为 10:10:00）

```
SELECT_WAY    FUNCTION_WAY
    10             24 
```

在内部函数中使用 Oracle 日期或任何可以解释这种奇怪行为的东西时，我是否必须考虑任何考虑因素？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T17:50:37.493

没有看到函数 F_WORKTIME_DIFF 就很难说出任何事情。无论从 F_WORKTIME_DIFF 返回的数据类型是什么，它`number`在分配给变量时都会被强制转换为`time`。这可能是一个线索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T15:17:02.170

这可能不是您要查找的内容，但第一个示例为您提供了两个日期之间的小时差异：

```
Select EXTRACT(HOUR FROM (SYSDATE - trunc(SYSDATE )) DAY TO SECOND ) From dual
/

Select
  EXTRACT(hour   From Cast(SYSDATE as timestamp)) hh,
  EXTRACT(minute From Cast(SYSDATE as timestamp)) mi,
  EXTRACT(second From Cast(SYSDATE as timestamp)) ss
From dual
/ 
```

# android - 更改场景中的多个纹理

> ID：13778798
> 
> 赞同：1
> 
> 时间：2012-12-08T15:14:26.583
> 
> 标签：android, andengine

根据来自站点[和引擎示例](https://github.com/nicolasgramlich/AndEngineExamples/blob/GLES2/src/org/andengine/examples/UpdateTextureExample.java)的示例，我创建了自己的项目，但对象不止一个。假设它是一个棋盘，我每 8 个矩形有 8 种颜色。现在我卡住了，因为如果将具有特定颜色的矩形之一设置为 false （我有变量`isclicked = false/true`），所有具有相同颜色的矩形也会发生变化。我应该如何解决这个问题？

我编写了与上面链接中的源代码相同的代码。我将颜色存储在单个图片中，该图片进一步拆分。

这是一张图片：
![酒吧1](../Images/0a77ef0058d0a4eb3ca9361fc815dddd.png)
未点击的颜色游戏中的

![酒吧2](../Images/e907988eae490fa13a4c4f626bd7550c.png)
点击颜色

![未点击](../Images/741cfdb86bc5ba5678719b86e5477a0b.png)
（未点击）

![点击](../Images/f564e7803222d12be5f634fdf031dfdc.png)
游戏中的颜色（点击了一个）

这是我的代码，我将不胜感激。

```
public class Main extends SimpleBaseGameActivity {

    private static final int SIZE = 50;
    private static final int IMAGES_COUNT = 8;
    private static int CAMERA_WIDTH = 400;
    private static int CAMERA_HEIGHT = 600;
    private ITextureRegion[] mColorsRegion = new ITextureRegion[8];

    //
    private BitmapTextureAtlas mColorsTextureAtlas;
    private TiledTextureRegion mColorsTextureRegion;
    private TextureRegion mBackgroundTextureRegion;
    private BitmapTextureAtlas mBackgroundTextureAtlas;
    private BitmapTextureAtlas mPanelTextureAtlas;
    private TextureRegion mPanelTextureRegion;

    @Override
    public EngineOptions onCreateEngineOptions() {
        final Camera camera = new Camera(0, 0, CAMERA_WIDTH, CAMERA_HEIGHT);
        return new EngineOptions(true, ScreenOrientation.PORTRAIT_FIXED, new RatioResolutionPolicy(CAMERA_WIDTH, CAMERA_HEIGHT), camera);
    }

    @Override
    protected void onCreateResources() {

        BitmapTextureAtlasTextureRegionFactory.setAssetBasePath("gfx/");

        // stuff with colors
        this.mColorsTextureAtlas = new BitmapTextureAtlas(this.getTextureManager(), 320, 40, TextureOptions.BILINEAR);
        this.mColorsTextureRegion = BitmapTextureAtlasTextureRegionFactory.createTiledFromAsset(this.mColorsTextureAtlas, this, "bar.png",
                0, 0, 8, 1);
        this.mColorsTextureAtlas.load();

        // woohoo! stuff with background
        this.mBackgroundTextureAtlas = new BitmapTextureAtlas(getTextureManager(), 400, 800, TextureOptions.BILINEAR_PREMULTIPLYALPHA);
        this.mBackgroundTextureRegion = BitmapTextureAtlasTextureRegionFactory.createFromAsset(this.mBackgroundTextureAtlas, this,
                "bg.jpg", 0, 0);
        this.mBackgroundTextureAtlas.load();

        // stuff with panel
        this.mPanelTextureAtlas = new BitmapTextureAtlas(getTextureManager(), 400, 800, TextureOptions.BILINEAR_PREMULTIPLYALPHA);
        this.mPanelTextureRegion = BitmapTextureAtlasTextureRegionFactory.createFromAsset(this.mPanelTextureAtlas, this, "panel.png", 0, 0);
        this.mPanelTextureAtlas.load();

    }

    @Override
    protected Scene onCreateScene() {

        this.mEngine.registerUpdateHandler(new FPSLogger());

        final Scene scene = new Scene();
        scene.setBackground(new Background(5.F, 5.F, 5.F));

        // show background
        Sprite background = new Sprite(0, 0, mBackgroundTextureRegion, getVertexBufferObjectManager());
        scene.attachChild(background);

        // show panel
        Sprite panel = new Sprite(0, 400, mPanelTextureRegion, getVertexBufferObjectManager());
        scene.attachChild(panel);

        // show minirectangles

        // Init generating color numbers
        MyColors colors = new MyColors(IMAGES_COUNT);

        // Init minirectangles with randomed images
        MiniRectangle[] minirectangle = new MiniRectangle[IMAGES_COUNT * IMAGES_COUNT];
        for (int i = 0; i < IMAGES_COUNT; i++) {
            for (int j = 0; j < IMAGES_COUNT; j++) {
                final int index = i * IMAGES_COUNT + j;
                minirectangle[index] = new MiniRectangle(j * SIZE + 2, i * SIZE + 2, SIZE - 4, SIZE - 4,
                        mColorsTextureRegion.getTextureRegion(colors.getRan(index)), getVertexBufferObjectManager()) {

                    @Override
                    public boolean onAreaTouched(TouchEvent pSceneTouchEvent, float pTouchAreaLocalX, float pTouchAreaLocalY) {

                        if (this.isVisible()) {
                            setClicked();

                            togglex(this.isClicked());

                        }
                        return true;
                    }
                };

                // further setting for minirectangle
                minirectangle[index].setIndexX(j);
                minirectangle[index].setIndexY(i);
                minirectangle[index].setNumber(index);
                minirectangle[index].setClicked(false);
                minirectangle[index].setColorNumber(colors.getRan(index));
                minirectangle[index].addColors(mColorsRegion);

                // attach to scene and register touch arena
                scene.attachChild(minirectangle[index]);
                scene.registerTouchArea(minirectangle[index]);
            }
        }

        return scene;
    }

    protected void togglex(boolean clicked) {
        this.mColorsTextureAtlas.clearTextureAtlasSources();
        boolean xclicked = clicked;
        BitmapTextureAtlasTextureRegionFactory.createTiledFromAsset(this.mColorsTextureAtlas, this, xclicked ? "bar2.png"
                : "bar.png", 0, 0, 8, 1);

    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T00:40:30.080

您无法更改纹理图集的内容 - 您的所有纹理区域都在引用它，因此它们都已更改。

将纹理图集视为一个*大数组*。纹理区域就像*指向*该数组中不同区域的指针。所以如果你想更新你的精灵的纹理区域，*你应该把它指向 texure 中的另一个区域*。但是，您正在更改这个大数组的内容，即纹理。所以所有引用它的纹理区域也在变化。

**解决方案**：

您应该将这两个图像加载到您的图集，并**仅**更改纹理区域。

加载两个图像：

```
this.mColorsTextureAtlas = new BitmapTextureAtlas(this.getTextureManager(), 320, 80, TextureOptions.BILINEAR); //Note that I doubled the height of the texture.
this.mColorsNotClickedTextureRegion = BitmapTextureAtlasTextureRegionFactory.createTiledFromAsset(this.mColorsTextureAtlas, this, "bar.png", 0, 0, 8, 1);
this.mColorsClickedTextureRegion = BitmapTextureAtlasTextureRegionFactory.createTiledFromAsset(this.mColorsTextureAtlas, this, "bar2.png", 0, 40, 8, 1); //The position of bar2.png is not 0,0 because it'll override bar.png. If the height is 40, we position it 40 units below the position of bar.png.
this.mColorsTextureAtlas.load(); 
```

现在，当单击一个矩形时，更改它的纹理区域。

# matlab - 散点图可视化matlab中的相同点

> ID：13778799
> 
> 赞同：6
> 
> 时间：2012-12-08T15:15:05.000
> 
> 标签：matlab, scatter-plot

我有以下问题：我需要构建数据的散点图。一切都很好，但那里有一些重复的数据：

```
x = [11, 10, 3, 8, 2, 6, 2, 3, 3, 2, 3, 2, 3, 2, 2, 2, 3, 3, 2, 2];
y = [29, 14, 28, 19, 25, 21, 27, 15, 24, 23, 23, 18, 0, 26, 11, 27, 23, 30, 30, 25]; 
```

可以看到有两个元素`(2, 25);` `(2,27);` `(3,24);` 因此如果使用常规构建此数据，`scatter(x,y)`我将丢失此信息： ![在此处输入图像描述](../Images/b07233a9215b25eac4e31c8d51e06b2e.png)

我发现的解决方法是使用未记录的`'jitter'`参数

```
scatter(x,y, 'jitter','on', 'jitterAmount', 0.06); 
```

但我不喜欢这样的前景： ![在此处输入图像描述](../Images/4d20f42a9a68a328223c1a57c2a377d9.png)

我试图实现的是：

![在此处输入图像描述](../Images/0e8c141652e0a57ec4cf46fdd48c8010.png)

重复的数量在点旁边（如果数量大于 1），或者可能在点内。

知道如何实现这一目标吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-08T16:06:32.593

你可以很容易地做到这一点，让我们把它分成两部分：

首先，您需要识别唯一的 2d 点并计算它们。这就是我们拥有[unique](http://www.mathworks.nl/help/matlab/ref/unique.html)和[accumarray](http://www.mathworks.nl/help/matlab/ref/accumarray.html)函数的目的。如果您不立即了解他们在做什么以及他们有什么输出，请通读文档：

```
x = [11 10 3  8  2  6  2  3  3  2  3  2  3  2  2  2  3  3  2  2];
y = [29 14 28 19 25 21 27 15 24 23 23 18 0  26 11 27 23 30 30 25];
A=[x' y'];

[Auniq,~,IC] = unique(A,'rows');
cnt = accumarray(IC,1); 
```

现在每一行都`Auniq`包含唯一的 2d 点，同时`cnt`包含每个点的出现次数：

```
>> [cnt Auniq]

ans =

     1     2    11
     1     2    18
     1     2    23
     2     2    25
     1     2    26
     ...etc 
```

对于显示出现次数，有很多可能性。正如您所提到的，您可以将数字放在散布标记的内部/旁边，其他选项是颜色编码、标记的大小......让我们做所有这些，您当然也可以组合！

## 标记旁边的数字

```
scatter(Auniq(:,1), Auniq(:,2));
for ii=1:numel(cnt)
    if cnt(ii)>1
        text(Auniq(ii,1)+0.2,Auniq(ii,2),num2str(cnt(ii)), ...
            'HorizontalAlignment','left', ...
            'VerticalAlignment','middle', ...
            'FontSize', 6);
    end
end
xlim([1 11]);ylim([0 30]); 
```

![在此处输入图像描述](../Images/c01624d025a33fe9a6af564350624dcd.png)

## 标记内的数字

```
scatter(Auniq(:,1), Auniq(:,2), (6+2*(cnt>1)).^2); % make the ones where we'll put a number inside a bit bigger

for ii=1:numel(cnt)
    if cnt(ii)>1
        text(Auniq(ii,1),Auniq(ii,2),num2str(cnt(ii)), ...
            'HorizontalAlignment','center', ...
            'VerticalAlignment','middle', ...
            'FontSize', 6);
    end
end 
```

正如你所看到的，我使用 scatter 函数本身非常简单地放大了标记的大小。

![在此处输入图像描述](../Images/dbf28a21c7022155f95d863c23a9deca.png)

## 颜色编码

```
scatter(Auniq(:,1), Auniq(:,2), [], cnt);
colormap(jet(max(cnt))); % just for the looks of it 
```

![在此处输入图像描述](../Images/edbdb3d6906dbe2c0a6b6f20a943518e.png)

之后，您可以添加[颜色](http://www.mathworks.nl/help/matlab/ref/colorbar.html)条或[图例](http://www.mathworks.nl/help/matlab/ref/legend.html)以指示每种颜色的出现次数。

# jquery - 未显示 Spring MVC 自动完成 jquery 下拉列表

> ID：13778802
> 
> 赞同：0
> 
> 时间：2012-12-08T15:15:58.927
> 
> 标签：jquery, spring, model-view-controller, drop-down-menu, autocomplete

大家好，我按照输入字段中的自动完成教程进行操作，但我遇到了问题。问题是一切正常，但下拉列表没有显示。

这是我的jsp：

```
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<%@ taglib uri="http://www.springframework.org/tags/form" prefix="form"%>
<%@page contentType="text/html;charset=UTF-8" pageEncoding="UTF-8"%>
<%@taglib uri="http://www.springframework.org/tags" prefix="spring"%>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt"%>
<%@ page language="java" import="java.util.*"%>

<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Καταχώρηση Εγγράφου</title>

 <link rel="stylesheet" type="text/css" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" />

 <script type="text/javascript"
    src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript"
    src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.min.js">    </script>

  <script type="text/javascript">

   $(document).ready(function() {

   $( "#apostoleas" ).autocomplete({

        source: '${pageContext. request. contextPath}/articles/get_country_list.html'

});

});
</script>
<script type="text/javascript"> 

<body>

<h1 align="left"><font size="5"> &nbsp;<spring:message  code="label.eggrafo" /></font></h1>

<c:url var="saveArticleUrl" value="/articles/saveeggrafo.html" />
<form:form   name="sds"  enctype="multipart/form-data" onsubmit="return validateForm()"  modelAttribute="eggrafo" method="POST" action="${saveArticleUrl}">
<table style=" min-height:570px; height:570px;min-width:570px; width:570px;  " bgcolor="990099">
     <tr>
        <th style="display:none">Id</th>
    </tr>   
    <tr>
        <th style="display:none"><form:input readonly="true" path="idtypiko" /></th>
    </tr>
    <tr>    
        <th style="display:none">User</th>
    </tr>
    <tr>    
         <th style="display:none"><form:input  path="username" value="${username}" /></th>    
    </tr> 

     <tr>
        <th><FONT SIZE="5" FACE="courier" ><spring:message   code="label.etos" /></FONT></th>

    </tr>
    <tr>
        <th><form:input cssStyle="width: 420px;height: 30px;font-size : 1.0em;"   id="etos" path="year" value="${year}"/></th>

    </tr>
     <tr>
        <th><FONT SIZE="5" FACE="courier" ><spring:message code="label.fakelos" /></FONT></th>

    </tr>
    <tr>
     <th><form:input cssStyle="width: 420px;height: 30px;font-size : 1.0em;" path="fakelos_eggrafou" id="fakelos_eggrafou" /></th>

    <%--<th><form:select  class="styled-select"   path="fakelos_eggrafou" >
                <OPTION  onclick="javascript:mine();"   selected="selected" VALUE=""><c:out value="Άλλο"/></OPTION>
                <c:forEach items="${fakeloi}" var="fake">
                <OPTION   onclick="javascript:form();" VALUE="${fake}"><c:out value="${fake}"/></OPTION>
                </c:forEach>
                </form:select></th> --%>    
    </tr>
    <tr>    
        <th><FONT SIZE="5" FACE="courier" ><spring:message code="label.diab" /></FONT></th>
    </tr>
    <tr>    
         <th><form:select  class="styled-select"  path="diabathmisi">
                <c:forEach items="${diabathmiseis}" var="diab">
                <OPTION VALUE="${diab.onoma}"><c:out value="${diab.onoma}"/></OPTION>
                </c:forEach>
                </form:select></th>

    </tr>
    <tr>    
        <th><FONT SIZE="5" FACE="courier" ><spring:message code="label.apostol" /></FONT></th>
    </tr>
    <tr>    
    <%-- <th>
       <form:select  id="apostoleas" class="styled-select1"  path="apostoleas">
                <c:forEach items="${apostoleis}" var="apost">
                <OPTION VALUE="${apost.apostoleas}"><c:out value="${apost.apostoleas}"/></OPTION>
                </c:forEach>
                </form:select>

                </th>  --%>
<td><form:input   id="apostoleas"  path="apostoleas"   /></td>

    </tr>
    <tr>
        <th><FONT SIZE="5" FACE="courier" ><spring:message code="label.tauteg" /></FONT></th>

    </tr>
    <tr>
        <th><form:input cssStyle="width: 420px;height: 30px;font-size : 1.0em;"  id="tautotitaegg"  path="tautotitaeg"   /></th>

    </tr>
    <tr>
    <th><FONT SIZE="5" FACE="courier" ><spring:message code="label.thema" /></FONT></th>    
</tr>
<tr>
    <th><form:input cssStyle="width: 420px;height: 30px;font-size : 1.0em;" path="thema" /></th>
</tr>

<tr>
     <th><FONT SIZE="5" FACE="courier" ><spring:message code="label.sinimena" /></FONT></th>
</tr>
<tr>
    <th><form:input cssStyle="width: 420px;height: 30px;font-size : 1.0em;" path="sinimena" /></th>
</tr>
    <tr>
        <th><FONT SIZE="5" FACE="courier" ><spring:message code="label.hmerypogr" /></FONT></th>
    </tr>
    <tr>
         <th> <input style="width: 420px;height: 30px;font-size : 1.0em;"  value="${date}" name="hmeromhniaypog" id="datepick" class="date-pick"/>
                    <script type="text/javascript">
                        datepickr('datepick', { dateFormat: 'Y-m-d' });
                    </script></th>
    </tr>

    <tr>
        <th><FONT SIZE="5" FACE="courier" >Αρχείο</FONT></th>

    </tr>
    <tr>
        <th><form:input cssStyle="width: 420px;height: 30px;font-size : 1.0em;" path="file" type="file" id="file"/></th>

    </tr>
    <tr>
    <th><FONT SIZE="5" FACE="courier" ><spring:message code="label.parat" /></FONT></th>
</tr>
<tr>
    <th><form:textarea cssStyle="width: 420px;height: 30px;font-size : 1.0em;" cols="30" rows="3" path="parathrhseis" /></th>
</tr>
    <tr>

    </table>
    <br />
<input  name="s" class="groovybutton" onMouseOver="goLite(this.form.name,this.name)" onMouseOut="goDim(this.form.name,this.name)" type="submit" value="<spring:message code="label.button" />" />

</form:form>

     </body> 
```

这是控制器部分：

```
@RequestMapping(value = "/get_country_list",
        method = RequestMethod.GET,
        headers="Accept=*/*")
public @ResponseBody List<String> getCountryList(@RequestParam("term") String query) {

     List<String> countries;

    String data = "Afghanistan, Albania, Algeria, Andorra, Angola, Antigua & Deps,"+ 
            "Argentina, Armenia, Australia, Austria,Azerbaijan,Bahamas,Bahrain,Bangladesh,Barbados,"+ 
            "Belarus,Belgium,Belize,Benin,Bhutan,Bolivia,Bosnia Herzegovina,Botswana,Brazil,Brunei,"+ 
            "Bulgaria,Burkina,Burundi,Cambodia,Cameroon,Canada,Cape Verde,Central African Rep,Chad,"+ 
            "Chile,China,Colombia,Comoros,Congo,Congo {Democratic Rep},Costa Rica,Croatia,Cuba,Cyprus,"+ 
            "Czech Republic,Denmark,Djibouti,Dominica,Dominican Republic,East Timor,Ecuador,Egypt,El Salvador,"+ 
            "Equatorial Guinea, Eritrea,Estonia,Ethiopia,Fiji,Finland,France,Gabon,Gambia,Georgia,Germany,"+ 
            "Ghana, Greece, Grenada,Guatemala,Guinea,Guinea-Bissau,Guyana,Haiti,Honduras,Hungary,Iceland,"+ 
            "India, Indonesia,Iran,Iraq,Ireland {Republic},Israel,Italy,Ivory Coast,Jamaica,Japan,"+ 
            "Jordan,Kazakhstan,Kenya,Kiribati,Korea North,Korea South,Kosovo,Kuwait,Kyrgyzstan,Laos,"+ 
            "Latvia,Lebanon,Lesotho,Liberia,Libya,Liechtenstein,Lithuania,Luxembourg,Macedonia,Madagascar,"+ 
            "Malawi,Malaysia,Maldives,Mali,Malta,Marshall Islands,Mauritania,Mauritius,Mexico,Micronesia,"+ 
            "Moldova,Monaco,Mongolia,Montenegro,Morocco,Mozambique,Myanmar {Burma},Namibia,Nauru,Nepal,"+ 
            "Netherlands,New Zealand,Nicaragua,Niger,Nigeria,Norway,Oman,Pakistan,Palau,Panama,Papua New Guinea,"+ 
            "Paraguay,Peru,Philippines,Poland,Portugal,Qatar,Romania,Russian Federation,Rwanda,St Kitts & Nevis,"+
            "St Lucia,Saint Vincent & the Grenadines,Samoa,San Marino,Sao Tome & Principe,Saudi Arabia,Senegal,"+ 
            "Serbia,Seychelles,Sierra Leone,Singapore,Slovakia,Slovenia,Solomon Islands,Somalia,South Africa,"+ 
            "Spain,Sri Lanka,Sudan,Suriname,Swaziland,Sweden,Switzerland,Syria,Taiwan,Tajikistan,Tanzania, "+
            "Thailand,Togo,Tonga,Trinidad & Tobago,Tunisia,Turkey,Turkmenistan,Tuvalu,Uganda,Ukraine,United Arab Emirates,"+
            "United Kingdom,United States,Uruguay,Uzbekistan,Vanuatu,Vatican City,Venezuela,Vietnam,Yemen,Zambia,Zimbabwe";

    countries = new ArrayList<String>();
    StringTokenizer st = new StringTokenizer(data, ",");

    //Parse the country CSV list and set as Array
    while(st.hasMoreTokens()) {
        countries.add(st.nextToken().trim());
    }

    String country = null;
    query = query.toLowerCase();
    List<String> matched = new ArrayList<String>();
    for(int i=0; i < countries.size(); i++) {
        country = countries.get(i).toLowerCase();
        if(country.startsWith(query)) {
            matched.add(countries.get(i));
        }
    }

    System.out.println(matched);
    return matched;
} 
```

有谁知道问题出在哪里？

我按照本教程 [http://viralpatel.net/blogs/spring-3-mvc-autocomplete-json-tutorial/](http://viralpatel.net/blogs/spring-3-mvc-autocomplete-json-tutorial/)

我还检查了萤火虫返回的内容并返回以下内容：

```
GET http://localhost:8080/Spring3Hibernate/articles/get_country_list.html?term=5 
```

406 不可接受 66ms

此请求标识的资源只能生成具有根据请求“接受”标头不可接受的特征的响应。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T15:59:29.647

```
@RequestMapping(value = "/getProductAutoCompleteList.do", method = RequestMethod.GET, headers="Accept=*/*")
    public @ResponseBody List<String> getProductAutoComplete(@RequestParam("term") String prodName, HttpServletResponse response){
        logger.info("getProductAutoCompleteList called with parameter: " + prodName);
        response.setStatus(HttpServletResponse.SC_OK);
        final List<String> productList = ProductSearchHelper.getProductAutoCompleteList(prodName);

        response.setContentType("application/json");
        return productList;
    } 
```

确保你

1.  指定 response.setStatus(HttpServletResponse.SC_OK); 在控制器方法中
2.  可选，setContentType 为 application/json
3.  具有@ResponseBody 注释，Spring MVC 调用一个建立在 Jackson JSON 处理器上的 MappingJacksonHttpMessageConverter。当您使用 mvc:annotation-driven 配置元素和 Jackson 存在于您的类路径中时，此实现会自动启用。

# ios - iOS - 按标签查找和操作文本字段？

> ID：13778803
> 
> 赞同：2
> 
> 时间：2012-12-08T15:16:06.070
> 
> 标签：ios, text, foreach, tags

我在 iOS 应用程序中为一系列字段提供了“inc”和“dec”按钮，用于操作匹配的文本字段。我查看了我所有的参考资料，并不能完全了解如何按标签遍历文本视图，并能够从那里操作它们。我找到了至少如何将它们列出来的方法，但这并不能完全完成这项工作。

对于这可能是一个简单的问题，我深表歉意，但我还没有找到如何做到这一点 - 是否有可能，或者我是否必须为每个按钮编写单独的代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T15:28:15.150

您不需要为此使用标签。

创建对控制器中每个对象的引用，将它们分配给[IBOutletCollection](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIKitConstantsReference/Reference/reference.html)，然后您可以使用它来枚举对象：

![在此处输入图像描述](../Images/fe000f102e265a092fd93ac6b4f28597.png)

# java - 如何将标签文本设置为特殊字符？

> ID：13778804
> 
> 赞同：0
> 
> 时间：2012-12-08T15:16:06.070
> 
> 标签：java, gwt, special-characters

我需要设置一个标签来包含一些特殊字符，我正在尝试：

```
Label label = new Label();
label.setText("•");
label.setText("♦");
label.setText("★"); 
```

我没有看到渲染的字符（firefox 17）。输出 html 如下所示：

```
<div class="gwt-Label"></div> 
```

我们需要用不同的方式将文本设置为这些字符吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T15:23:42.130

您应该确保您的源代码使用`UTF-8`编码。如果您使用的是 Eclipse，您可以在 Windows -> Preferences 中设置默认编码。

简短的版本是：如果您在 GWT 项目和部署中绝对使用`UTF-8`编码完成所有操作，那么您的所有特殊字符都应该按预期工作。

如果您有很多现有文件要转换，JDK 包含一个小工具可以为您转换文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T16:13:05.903

我认为 Label 小部件不可能。您应该使用扩展标签的**HTML**类。

```
SafeHtmlBuilder builder = new SafeHtmlBuilder();
builder.appendEscaped("★");
HTML widget = new HTML();
widget.setHTML(builder.toSafeHtml());
RootPanel.get().add(widget); 
```

还要确保使用**SafeHtmlBuilder**类的最佳实践。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T16:59:58.367

您可以使用 html 代码：`&#9733;`星号 (★)、`&#149;`项目符号 (•) 等。

[http://www.quackit.com/html/html_special_characters.cfm](http://www.quackit.com/html/html_special_characters.cfm)

# javascript - 如何获取浏览器左右两侧的距离？

> ID：13778810
> 
> 赞同：4
> 
> 时间：2012-12-08T15:17:08.300
> 
> 标签：javascript

![在此处输入图像描述](../Images/0e064760d253c95e52d9059d3659c7c8.png)

是否可以获得左右之间的当前距离？不是全宽。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T15:27:27.567

[`window.innerWidth`](https://developer.mozilla.org/en/docs/DOM/window.innerWidth)可用于获取浏览器窗口视口宽度，包括滚动条（如果存在并呈现）。

还有[`document.body.clientWidth`](https://developer.mozilla.org/en-US/docs/DOM/element.clientWidth)一个不包括滚动条、边距、边框或填充 - 如果您有`margin:0; padding:0;`并且没有将边框设置为 ，则后 3 个是无关紧要的`body`，这是使用重置样式表时的情况。否则你只需要补偿这些。

**笔记：**

*   `clientWidth`，尽管所有主要浏览器（IE 5.5+、FF3+、Chrome、Opera、Safari）都支持，但 W3C 从未定义过，因此浏览器支持可能会有所不同。
*   `window.innerWidth`具有[W3C 规范](http://www.w3.org/TR/cssom-view/#dom-window-innerwidth)，但在 IE < 9 中不受支持。

这是一个比较两者的[小提琴。](http://jsfiddle.net/ePWtR/2/)

* * *

**编辑：** `window.innerWidth`在 IE<9 中不支持，因此混合使用`innerWidth`and `clientWidth`（对于较旧的 IE）可能是最好的方法：

```
var viewportWidth = window.innerWidth || document.body.clientWidth; 
```

此外，尽管`clientWidth`它没有被 W3C 标准化，但它在所有主要浏览器中都受到支持，因此很多人认为它足够可靠，可以单独使用它来`clientWidth`代替 W3C 标准`innerWidth`。

如果不包括滚动条对您的用例很重要，则`clientWidth`可以用作第一个/唯一选项：

```
var viewportWidth = document.body.clientWidth; //no scrollbars included 
```

确保`body`有`margin:0`，`padding:0`以防万一您使用上述内容。

# html - 用不同的样式格式化不同的输入

> ID：13778812
> 
> 赞同：0
> 
> 时间：2012-12-08T15:17:17.890
> 
> 标签：html, css, ruby-on-rails, templates

我有一个带有以下代码的 rails 模板表单：

```
<div class="field">
    <%= f.label :title %><br />
    <%= f.text_field :title %>
</div>
...
<div class="actions">
<%= f.submit %>
</div> 
```

这又会产生：

```
<div class="field">
<label for="item_title">Title</label><br />
<input id="item_title" name="item[title]" size="30" type="text" />
</div>
...
<div class="actions">
<input name="commit" type="submit" value="Create Item" />
</div> 
```

我目前将其用作 application.css 的一部分：

```
input{
color:#000000;
padding:2px;
background-color:#F8F8F8;
border:1px solid #66CC00;
} 
```

如何将这些样式设置为与 application.css 文件分开的元素？我已经尝试过`.text_field{#styles here}`，只是`.field{#styles here}`在文件中，但没有运气。

我基本上希望它们看起来“不错”，但不要让它们如此相似。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T15:23:52.137

像这样使用 css 属性选择器：

```
input[name=item\[title\]] {
    color: red;
} 
```

例如，根据名称选择输入（如果您没有可用的类属性）。

[有关属性选择器](http://www.w3.org/TR/CSS2/selector.html#attribute-selectors)的更多信息

但是，我猜你想要的是：

```
.field input[type=text] {
    color: red;
} 
```

或者

```
.actions input[type=text] {
    color: red;
} 
```

这是css的基础。

如果您想了解有关样式输入元素的更多信息，请参阅[其他答案](https://stackoverflow.com/questions/7095895/style-input-elements-css)。

# c - 想要将结构成员的所有属性复制到C中同一结构中的另一个

> ID：13778814
> 
> 赞同：2
> 
> 时间：2012-12-08T15:17:37.617
> 
> 标签：c, struct, copy, member

我有以下结构，我想将里面的所有属性和结构复制 `sch[j]`到`sch[j-1]`.

我想问这样可以吗？

```
sch[j-1]=sch[j]; 
```

请说是！！！否则，你能解释一下我该怎么做吗？好像你在向一个笨蛋解释？因为我在编码方面很新。实际上，如果更容易编写，我可能更喜欢将 schedules 结构的一些元素复制到相同类型的新结构中。

```
struct modevariables{
    float xvalue1;
    float xvalue2;
};

struct ActivityVariables{
    int es,ec,ls,lc,discritized;
    int relxd1,relxdmode1,relxd2,relxdmode2,cr,noofpred;
    int chmode1,chmode2,ilpr1ptime,ilpr2ptime;
    float lpr1cost,fs,stime5,lpr2cost,lpr1ptime,lpr2ptime;
    float lpr1fs,ilprfs,lpr2fs,stime1,stime2;
    modevariables modev[22];
};

struct schedules{
    float WF1,WF2;
    int TC1,TC2,seeded;
    double tcplex1,tcplex5,tgams5cagir,timewhile,orjsch;
    ActivityVariables actv[52];
    int type;  
    int dominance;
    int dominates;
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T16:26:53.330

是的，您可以使用赋值语句将一个结构复制到另一个相同类型的结构（包括同一数组的两个元素）。

# iphone - iOS：如何阅读播放实时音乐？

> ID：13778816
> 
> 赞同：3
> 
> 时间：2012-12-08T15:17:43.117
> 
> 标签：iphone, objective-c, ios, ios5, audio

我想创建一个音频可视化器，我有一个问题：

如何获取设备上一次播放的音乐部分？

PS示例“ [aurioTouch](http://developer.apple.com/library/ios/#samplecode/aurioTouch/Introduction/Intro.html) ”类似于必要的，但它处理来自麦克风的声音，我需要来自设备。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T15:23:21.337

如果你想用实时音频做事，那么你应该看看[Core Audio](https://developer.apple.com/library/ios/#documentation/MusicAudio/Conceptual/CoreAudioOverview/WhatisCoreAudio/WhatisCoreAudio.html#//apple_ref/doc/uid/TP40003577-CH3-SW1)

# string - Excel 2010 VBA 遍历一个字符串并按顺序将一个字符放入每个单元格

> ID：13778819
> 
> 赞同：2
> 
> 时间：2012-12-08T15:18:06.827
> 
> 标签：string, excel, vba

许多年前，我习惯于在“C”中进行字符串切片，但我正在尝试使用 VBA 来完成这项特定任务。

现在我创建了一个字符串“这是一个字符串”并创建了一个新工作簿。

我现在需要的是使用字符串切片将't'放入A1中，A2中的'h'，A3中的'i'等到字符串的末尾。

之后我的下一个字符串将进入，比如 B1 等，直到所有字符串都被切片。

我已经搜索过了，但似乎大多数人都想反过来（连接一个范围）。

有什么想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-08T15:35:01.660

使用中间功能。

```
=MID($A$1,1,1) 
```

第二个参数是起始位置，因此您可以将其替换为 row 或 col 函数，以便您可以动态拖动公式。

IE。

```
=MID($A$1,ROW(),1) 
```

如果您想纯粹在 VBA 中执行此操作，我相信 mid 函数也存在于其中，因此只需遍历字符串即可。

```
Dim str as String
str = Sheet1.Cells(1,1).Value

for i = 1 to Len(str)
    'output string 1 character at a time in column C
    sheet1.cells(i,3).value = Mid(str,i,1)
next i 
```

*** 编辑 ***

如果您想使用数组中的多个字符串执行此操作，您可以使用以下内容：

```
Dim str(1 to 2) as String
str(1) = "This is a test string"
str(2) = "Some more test text"

for j = Lbound(str) to Ubound(str)
    for i = 1 to Len(str(j))
        'output strings 1 character at a time in columns A and B
        sheet1.cells(i,j).value = Mid(str(j),i,1)
    next i
next j 
```

# java - 类加载器不会被垃圾回收，即使没有 GC 根

> ID：13778822
> 
> 赞同：7
> 
> 时间：2012-12-08T15:18:41.433
> 
> 标签：java, memory-leaks, garbage-collection, classloader, glassfish-2.x

我们有一个在 Glassfish V2.1.1 下运行的复杂应用程序。为了能够动态加载我们的代码，我们实现了一个能够重新定义类的 CustomClassloader。行为非常简单：当动态加载的类发生变化时，CustomClassloader 的当前实例被“删除”并创建一个新实例以重新定义所需的类。

这很好用，除了在重新加载同一个类几次之后（因此每次创建新的 CustomClassloader 时），我们都会收到 PermGen 空间错误，因为 CustomClassloader 的其他实例没有被垃圾收集。（这个类应该只有一个实例）

我尝试了不同的方法来追踪泄漏的位置：

1.  [visualvm](http://visualvm.java.net/) => 我做了一个堆转储并提取 CustomClassloader 的所有实例。我可以看到它们都没有最终确定。当我检查最近的 GC 根时，visualvm 告诉我没有（最后一个实例除外，因为它是“真正的”使用过的）。
2.  [jmap/jhat](http://docs.oracle.com/javase/6/docs/technotes/tools/share/jhat.html) => 它给了我几乎相同的结果：我看到了 CustomClassloader 的所有实例，然后当我单击链接以查看其中一个的引用在哪里时，我得到一个空白页，这意味着没有.. .
3.  [Eclipse Memory Analyzer Tool](http://www.eclipse.org/mat/) => 当我运行以下 OQL 查询时得到一个奇怪的结果： `SELECT c FROM INSTANCEOF my.package.CustomClassloader c` 只有一个结果，表明只有一个实例，这显然是*不*正确的。

我还检查了此[链接](http://victor-jan.blogspot.ch/2010/05/memory-leaks-where-classloader-cannot.html)并在创建新的 CustomClassloader 时实现了一些资源释放，但没有任何变化：PermGen 内存仍在增加。

所以我可能遗漏了一些东西，点 (1-2) 和 (3) 之间的区别显示了我不明白的东西。我在哪里可以了解问题所在？由于我遵循的所有教程都显示了如何使用“搜索最近的 GC 根”功能来搜索泄漏的引用（在我的情况下没有），我不知道如何跟踪错误。

[编辑 1：我在这里](http://dev.sai-erp.net/nogcroot.hprof.zip)上传了一个堆转储示例。可以使用以下查询在 visualvm 中选择未卸载的 ClassLoader：`select s from saierp.core.framework.system.SAITaskClassLoader s` 可以看到有 4 个实例，并且应该收集前三个实例，因为没有 GC 根... 某处必须有引用，但我没有不知道如何搜索它。欢迎任何提示:)

编辑 2：经过一些更深入的测试后，我看到了一个非常奇怪的模式。泄漏似乎取决于 OpenJPA 正在加载的数据：如果没有加载新数据，则可以对类加载器进行 GC，否则不会。这是我在创建新的 SAITaskClassLoader 以“清除”旧的时使用的代码：

```
PCRegistry.deRegister(cl);
LogFactory.release(cl);
ResourceBundle.clearCache(cl);
Introspector.flushCaches(); 
```

= 模式 1（类加载器是 GCed）： =

1.  新的 SAITaskClassLoader
2.  加载数据 D1, D2, ..., Dn
3.  新的 SAITaskClassLoader
4.  加载数据 D1, D2, ..., Dn
5.  ...

![cl-gc](../Images/9c29cce2a3511c930cc309a9f7eb3cdb.png)

= 模式 2（类加载器未经过 GC）：=

1.  新的 SAITaskClassLoader
2.  加载数据 D1、D2、D3
3.  新的 SAITaskClassLoader
4.  加载数据 D3、D4、D5
5.  新的 SAITaskClassLoader
6.  加载数据 D5、D6、D7
7.  ...

![cl-nogc](../Images/704c88f2d9b22bc8203f91ba15244f39.png)

在所有情况下，已清除的 SAITaskClassLoader 都没有 GC 根。我们使用的是 OpenJPA 1.2.1。

谢谢和最好的问候

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-08T15:55:35.357

如果没有源代码片段`CustomClassLoader`或实际堆转储，将很难追查问题。你`CustomClassLoader`不能是单身人士。如果是这样，你的设计就不能工作（或者我错过了一些东西）。

您需要获取`ClassLoader`类型实例的列表`CustomClassLoader`并跟踪对这些对象的引用。

这些帖子可能会帮助您进一步分析它并深入了解寻找 ClassLoader 泄漏的黑暗细节：

*   [在堆转储中调试动态类加载器](http://blog.bosch-si.com/debugging-dynamic-classloaders-in-heap-dumps/)
*   [如何分析泄漏的网络应用程序](http://blog.bosch-si.com/how-to-analyze-leaky-webapps/)
*   [ClassLoader 泄漏的几个典型原因](http://www.mhaller.de/archives/140-Memory-leaks-et-alii.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T11:33:56.027

类加载器的垃圾收集是一件非常棘手的事情。使用[JProfiler](http://www.ej-technologies.com/products/jprofiler/overview.html)，我看到以下对当前活动的自定义类加载器的传入引用链：

![在此处输入图像描述](../Images/3949b1faac882db6d190ddf3709f4cff.png)

这表明您的自定义类加载器中有一个静态字段“singleInstance”，它引用了类加载器本身。您应该尝试在重新部署时清除该字段，以使 VM 更容易收集类加载器。

关于您使用 Eclipse MAT 获得的结果的注释：它删除了所有不可强可达的对象。JProfiler 默认也这样做。所以前面的三个类加载器应该被垃圾回收，但它们不是，因为 JVM 对类加载器 GC 的特殊规则没有被堆中的标准引用捕获。

免责声明：我公司开发JProfiler

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-03T23:21:56.297

最后，我可以关闭这个 bug，因为它似乎与 OpenJPA 和非参数化查询相关联。另一个要查看的线程：[自定义类加载器未收集垃圾](https://stackoverflow.com/questions/14113554/custom-classloader-not-garbage-collected)

# qt - Qt、QML ListView 和桌面应用程序

> ID：13778824
> 
> 赞同：0
> 
> 时间：2012-12-08T15:18:55.723
> 
> 标签：qt, listview, qml, qwidget

我的问题是一个两部分的条件问题。我有一个用 C++/Qt 编写的桌面应用程序。在应用程序中，我有几个要装饰的列表，并添加带有图标和富文本的列表项。

我第一次尝试在 QWidget 世界中做到这一点，但我越是研究它，我就越认为 QML 可能是一个更好的选择。但现在我也想知道这一点，因为 QML 似乎更适合触摸屏设备。更不用说我在 QML 方面的进展令人沮丧。在下面给他们QML，我不知道如何：（1）当我点击一个项目时突出显示它，（2）添加一个滚动条：

```
import QtQuick 1.0

Item
{
    width: 300
    height: 200

    ListModel
    {
        id: myModel2

        ListElement { text: "List Item 1" }
        ListElement { text: "List Item 2" }
        ListElement { text: "List Item 3" }
        ListElement { text: "List Item 4" }
        ListElement { text: "List Item 5" }
        ListElement { text: "List Item 6" }
    }

    Component
    {
        id: beerDelegate

        Rectangle
        {
            id: beerDelegateRectangle
            height: beerDelegateText.height * 1.5
            width: parent.width

            Text
            {
                id: beerDelegateText
                text: "<b>" + modelData + "</b> <i>(" + modelData + ")</i>"
            }

            MouseArea
            {
                anchors.fill: parent
                onClicked: 
                {
                    console.log("clicked: " + modelData + " at index: " + index);
                    beerList.currentIndex = index;
                }
            }
        }
    }

    ListView
    {
        id: beerList
        anchors.fill: parent
        model: myModel2
        delegate: beerDelegate

        highlightFollowsCurrentItem: true
        highlight: Rectangle
        {
            width: parent.width
            color: "red"
        }

        focus: true
    }
} 
```

鉴于此 QML，我如何完成我正在寻找的东西？或者在 QWidget 桌面应用程序中使用 QML 只是一个坏主意？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-24T12:40:08.503

不再需要自己实现滚动条。**从Qt 5.1**开始就有[`ScrollView`](http://qt-project.org/doc/qt-5/qml-qtquick-controls-scrollview.html)-Item 。只需将-Item （例如，您使用的 ListView-Item 也是“Flickable”）与 ScrollView-Item 包围起来，就可以了：**`Flickable`**

 **```
ScrollView {   
    ListView {
        id: beerList
        anchors.fill: parent
        model: myModel2
        delegate: beerDelegate

        highlightFollowsCurrentItem: true
        highlight: Rectangle
        {
            width: parent.width
            color: "red"
        }

        focus: true
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T15:53:11.303

对于第一个问题（突出显示）：

您的列表实际上绘制了突出显示，但是，您的项目委托用白色矩形覆盖了它！只需用一个项目替换矩形，它就可以工作：

```
Component
{
    id: beerDelegate

    Item
    {
        ...
    }
} 
```

对于第二个问题（滚动条）：

据我所知，QML 没有提供开箱即用的滚动条。然而，有一个[Qt 桌面组件项目](https://qt-project.org/wiki/QtDesktopComponents)（[git 存储库](https://qt.gitorious.org/qtplayground/qtdesktopcomponents)），它使您可以访问 QML 世界中的大多数小部件。其中，有一个`ScrollArea`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-16T18:04:43.620

对于第二个问题。即**ListView 上**的滚动条：我已经为 ListView 上的滚动条创建了代码。它也可以在**GridView上工作**

滚动条.qml

```
import Qt 4.7

Item {
    property variant target

    width: 8
    anchors.top: target.top
    anchors.bottom: target.bottom
    anchors.margins: 1
    anchors.rightMargin: 2
    anchors.bottomMargin: 2
    anchors.right: target.right
    visible: (track.height == slider.height) ? false : true

    Image {
        id: scrollPath
        width: 2
        anchors.top: parent.top
        anchors.bottom: parent.bottom
        anchors.horizontalCenter: parent.horizontalCenter
        source: "qrc:/resources/buttons/slider2.png"
    }

    Item {
        anchors.fill: parent

        Timer {
            property int scrollAmount

            id: timer
            repeat: true
            interval: 20
            onTriggered: {
                target.contentY = Math.max(0, Math.min(target.contentY + scrollAmount,
                                                       target.contentHeight - target.height));
            }
        }

        Item {
            id: track
            anchors.top: parent.top
            anchors.topMargin: 1
            anchors.bottom: parent.bottom
            width: parent.width

            MouseArea {
                anchors.fill: parent
                onPressed: {
                    timer.scrollAmount = target.height * (mouseY < slider.y ? -1 : 1)
                    timer.running = true;
                }
                onReleased: {
                    timer.running = false;
                }
            }

            Image {
                id:slider
                anchors.horizontalCenter: parent.horizontalCenter
                source: "qrc:/resources/buttons/slider.png"
                width: parent.width
                height: Math.min(target.height / target.contentHeight * track.height, track.height) < 20 ? 20 : Math.min(target.height / target.contentHeight * track.height, track.height)
                y: target.visibleArea.yPosition * track.height

                MouseArea {
                    anchors.fill: parent
                    drag.target: parent
                    drag.axis: Drag.YAxis
                    drag.minimumY: 0
                    drag.maximumY: track.height - height

                    onPositionChanged: {
                        if (pressedButtons == Qt.LeftButton) {
                            target.contentY = slider.y * target.contentHeight / track.height;
                        }
                    }
                }
            }
        }
    }
} 
```

我在 MyListView.qml 中将滚动条项与 ListView 一起使用：

MyListView.qml

```
ListView {
    id: list
    clip: true
    anchors.margins: 5
    anchors.fill: parent
    model: 10
    delegate: trackRowDelegate
    interactive: contentHeight > height
}

ScrollBar {
    id: verticalScrollBar
    target: list
    clip: true
} 
```

此 ScrollBar 项可以与 GridView 一起使用

```
GridView {
    id: grid
    clip: true
    anchors.margins: 5
    anchors.fill: parent
    cellWidth:100
    cellHeight: 100
    model: items
    interactive: contentHeight > height
    snapMode: GridView.SnapToRow
    delegate: myDelegate
}

ScrollBar {
    id: verticalScrollBar
    target: grid
    clip: true
    visible: grid.interactive
} 
```**

# javascript - 加载外部站点并更改其可视化

> ID：13778825
> 
> 赞同：3
> 
> 时间：2012-12-08T15:18:58.230
> 
> 标签：javascript, jquery, html, css, ajax

我正在尝试创建一个能够更改站点可视化（.css 或 / 和 .js）的网页，以便重新创建 Firebug for Firefox 或 Chrome 的 Inspector 提供的相同实时更改功能。

这里有一张图片可以更好地解释我的任务：

![在此处输入图像描述](../Images/55aeba36fee796c750161b8bf59aae19.png)

[我已经能够使用 iframe 在我的页面中可视化其他站点，但不幸的是，由于“同源策略”](http://it.wikipedia.org/wiki/Same_origin_policy)，无法更改其可视化并访问其元素。

有没有办法使用 iframe 或在另一个元素中加载外部站点？

* * *

**更新：**

考虑到答案，选项应该是：

*   创建一个 php 代理页面以加载目标站点并在其上更改可视化。
*   创建浏览器扩展。

我尝试了第一个，即使它需要安装一个 Web 服务器（xampp），一个简单的页面调用该函数`file_get_contents('http://www.site.com')`；
页面已加载但不幸错过了一些元素（如图像），它只是一个静态副本；
无法在站点导航中走得更远。

* * *

**更新 2：**

如果可以实时更改代码，那么通过 javascript 加载整个页面可能是更好的解决方案（我不知道如何），但是与此“页面副本”交互并将交互转移到原始页面的可能性呢？

方案：

![在此处输入图像描述](../Images/6f52c6177a003065e556c7296a9d810c.png)

* * *

**解释：**

我注意到 Firebug 扩展可以选择和实时编辑任何页面元素，即使它们属于加载外部域页面的 iframe。
我正在寻找的是一种像 Firebug 一样的方式，获取一个元素并改变它的样式。
我正在尝试将网站加载到 iframe 中，因为我想在其上方创建一个工具栏来选择我的“可视化样式”；例如一个使标题变大变红的按钮。
无论如何，我对任何其他方法建议持开放态度。

* * *

**更新 3：**

我为 FireFox 和 Chrome 找到了一个扩展，它非常接近我的目标：`"Stylish"`
这个插件允许实时更改任何站点的 css 属性并保存它，以便在每次访问页面时重新加载它们。

现在我的问题是：如何创建专用页面来加载和更改特定站点的可视化？

* * *

**最终编辑：**

为了用更相关的论点继续这个问题，我决定问一个新的问题：
[创建一个 php 代理页面](https://stackoverflow.com/questions/14010316/create-a-php-proxy-page)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T15:20:49.153

不，您的解决方案可能是

*   让您自己的站点充当代理，因此不会触发同源策略
*   构建一个扩展，这将依赖于浏览器（Firefox 或 Chrome），并且需要授权和安装

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T15:39:03.570

我不确定我是否非常了解您想要什么，但我觉得“欺骗”这更容易可能会给您的第一个站点（iframe）提供非常具体的高度和宽度并执行 jQuery 条件

```
 If ($('body').width() == 500 && $('body').height() == 400 {
      $('body').addClass('isiFrame');
    } 
```

然后，您只需要执行您的 css .isiFrame .myCoolDivs {....} 您可能还必须在准备好的文档上使用它，但这可能是一种欺骗它的方法，因为您没有在调整大小时这样做（如果有人在开始时将他的屏幕设置为这个精确的宽度和高度）

更安全的方法可能是使用 PHP 创建主会话，但我不能给你一个例子，因为如果 master_session 或变量等于 true，它已经很长并回显 body 类

希望它有所帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T18:43:38.673

如果您尝试与**Same_origin_policy 抗争**并尝试与之抗争，我相信您不会获得太大的成功。

**服务器端**

我建议你在服务器端处理这个，抓取网页并应用你想要的任何样式和脚本，应该很容易！

如果您使用 Ruby on rails - **Nokogiri** gem 可以帮助您解析 html。您可以使用标准库来“获取”网页。

**客户端**

如果您想在客户端执行此操作，则需要编写一些 jquery/javascript 代码，您可以采取以下步骤：

1.  获取您要显示的网页。
2.  抓取包含 js/css 文件的元素，删除它们和你自己的。
3.  在页面中存在的新 iframe 中显示页面。

# c# - 我不太明白 MySql 连接的样子

> ID：13778826
> 
> 赞同：3
> 
> 时间：2012-12-08T15:19:02.477
> 
> 标签：c#, mysql, windows, forms

今天我一直坐在我的电脑前，尝试如何连接和使用 MySql 数据库。我有很多问题，但我会尽量保留几个。

1.  当我使用语句初始化与服务器的连接时，`sqlConnection.Open();` 此连接现在是否打开并准备好使用，直到我告诉服务器否则？

2.  该`Close()`语句似乎没有关闭连接，如果我查看我的服务器状态，我可以看到我发送后连接仍然存在。

3.  假设我想从我的数据库中检索数据，我首先执行我的函数`setupConnection();` This fuuction 发送`Open()`，然后返回 true 或 false。然后我可能会有一个函数来检索数据以进行显示和计算等。当我调用这个函数时，我需要再次打开连接吗？

稍微总结一下，是不是程序和`Open();`函数在同一个作用域时才打开连接？

还有我能做些什么来不必在每个函数中声明这个：

MySqlConnection sqlConnection; sqlConnection = new MySqlConnection();

这是我今天做的一些代码：

```
 /// <summary>
    /// InitConnection outputs the connectionstring
    /// </summary>
    /// <param name="Adress">Server adress</param>
    /// <param name="Port">Server port</param>
    /// <param name="Uid">Username</param>
    /// <param name="Pwd">Password</param>
    /// <param name="Database">Database</param>
    /// <returns>the connectionstring</returns>
    public string initConnection(string Adress, string Port, 
         string Uid, string Pwd, string Database)
    {
        return "server=" + Adress + ";port=" + Port + ";uid=" + Uid + ";" +
            "pwd=" + Pwd + ";database=" + Database + ";";
    }

    /// <summary>
    /// setuupConnection will setup an active connection to the database 
    /// specified in initConnection
    /// </summary>
    /// <param name="ConnectionString">The return value of 
    /// initConnection</param>
    /// <returns>True or False</returns>
    public bool setupConnection(string ConnectionString)
    {
        MySqlConnection sqlConnection;
        sqlConnection = new MySqlConnection();
        sqlConnection.ConnectionString = ConnectionString;            
        try
        {
            sqlConnection.Open();
        return true;
        }
        catch (MySqlException ex)
        {
            switch (ex.Number)
            { 
                case 0:
                    MessageBox.Show("Cannot connect to server.");
                    break;
                case 1045:
                    MessageBox.Show("Invalide username/password.");
                    break;
            }
        return false;
        } 
    }

    /// <summary>
    /// closeConnection will terminate the database connection.
    /// </summary>
    /// <returns>True or False</returns>
    public bool closeConnection()
    {
        MySqlConnection sqlConnection;
        sqlConnection = new MySqlConnection();
        try
        {
            sqlConnection.Dispose();
        return true;
        }
        catch (MySqlException ex)
        {
            MessageBox.Show(ex.Message);
        return false;
        }  
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T15:29:39.247

您正在设置和关闭功能范围内设置连接。您设置连接，打开它，然后您的功能结束并且连接超出范围。在您的关闭函数中，您定义一个连接只是为了处理它，这是没有意义的。设置您的连接，打开它，**使用它**，然后关闭它。

看来您应该学习和理解变量范围。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T20:23:59.777

我不完全理解这个问题。您尝试连接到 MySQL，并且您设法做到了；但随后停了下来。为什么？

其实一切都很简单，网上有很多很多的例子。

您想从 MySQL 表中检索数据吗？一种变体是使用 IDataReader：

*   创建一个 MySqlCommand
*   运行 ExecureReader 方法
*   获取 IDataReader 实例
*   阅读记录，一一阅读。

祝你好运！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T21:23:56.383

1.  是的，如果您调用 Open() 并且没有出现异常，那么您就可以使用了。您应该生成一个 SQL 并使用命令对象将其发送到服务器。

2.  在您的“closeconnection”方法中，您只需创建一个新的连接对象，然后立即处理它。你甚至没有打开那个连接。

3.  你需要在类中声明你的连接对象，而不是在方法中。这样做允许您只使用一个连接对象并允许您的代码运行。您当前的代码不起作用，因为您在每种方法中使用了不同的连接对象。

但是，数据库连接很昂贵，如果您不经常使用连接，那么您可能应该打开连接-使用数据库完成您的工作-关闭它。在开始时打开数据库连接并保持连接打开直到应用程序结束不是一个好习惯。

而且我认为，正如@PhoenixReborn 所说，您应该研究变量范围。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-08T15:26:57.340

您可以使用[http://connectionstring.com](http://connectionstring.com)非常有用的网站：

[http://www.connectionstrings.com/mysql](http://www.connectionstrings.com/mysql)

> 标准
> 
> `Server=myServerAddress;Database=myDataBase;Uid=myUsername;Pwd=myPassword;`
> 
> 指定 TCP 端口
> 
> ```
>  Server=myServerAddress;Port=1234;Database=myDataBase;Uid=myUsername;Pwd=myPassword; 
> ```
> 
> 端口 3306 是默认的 MySql 端口。如果使用 Unix 套接字，则忽略该值。
> 
> 多个服务器 使用它来连接到复制服务器配置中的服务器，而不用关心使用哪个服务器。
> 
> ```
>  Server=serverAddress1, serverAddress2, serverAddress3;Database=myDataBase; Uid=myUsername;Pwd=myPassword; 
> ```
> 
> 使用加密（旧） 此选项为客户端和服务器之间发送的所有数据激活 SSL 加密。服务器必须安装证书。
> 
> ```
>  Server=myServerAddress;Database=myDataBase;Uid=myUsername;Pwd=myPassword;Encrypt=true; 
> ```
> 
> 此选项适用于 Connector/NET 版本 5.0.3 至 6.2.1。从 6.2.1 开始，请改用 SslMode 选项。
> 
> 使用加密（新）如果服务器支持 SSL，则使用 SSL，但在所有情况下都允许连接
> 
> ```
>  Server=myServerAddress;Database=myDataBase;Uid=myUsername;Pwd=myPassword; 
> ```
> 
> SslMode=首选；此选项在 Connector/NET 版本 6.2.1 中可用
> 
> 强制加密 始终使用 SSL。如果服务器不支持 SSL，则拒绝连接。
> 
> ```
>  Server=myServerAddress;Database=myDataBase;Uid=myUsername;Pwd=myPassword; 
> ```
> 
> SslMode=必需；此选项在 Connector/NET 版本 6.2.1 中可用

# javascript - Angular JS + Kinetic = 画布上的动态图表

> ID：13778827
> 
> 赞同：2
> 
> 时间：2012-12-08T15:19:17.610
> 
> 标签：javascript, mvvm, angularjs, kineticjs

这是小提琴：http: [//jsfiddle.net/paska27/L6VAe/5/](http://jsfiddle.net/paska27/L6VAe/5/)

代码（否则会抱怨）：

```
<div ng-app ng-controller="MainCtrl"
ng-init="list = [
{name: 'Sergey', age: 26},
{name: 'Johan', age: 27},
{name: 'Iwan', age: 28}
];">
    <div id="box" ng-controller="PlaneCtrl"></div>       
    <input ng-model="currentItem.name" />
</div>

/** an extention of Kinetic shape (group, rect or what ever) **/
var Item = function(planeScope, item){
Kinetic.Group.call(this, {
    draggable: true
});

var self = this;

var text = new Kinetic.Text({
    x: 0,
    y: 0,
    text: item.name,
    fontSize: 20,
    fontFamily: 'Calibri',
    textFill: 'green',
    draggable: true
});

self.add(text);

self.name = text.getText();

self.on('dragstart', function(){
   planeScope.$parent.currentItem = self;
   planeScope.$apply();       
});
}
Kinetic.Global.extend(Item, Kinetic.Group);

var MainCtrl = function($scope){
    $scope.currentItem;
}

var PlaneCtrl = function($scope, $element){
    var stage = new Kinetic.Stage({
    container: 'box',
    width: 200,
    height: 200
}),
layer = new Kinetic.Layer();

angular.forEach($scope.list, function(item){
    item = new Item($scope, item);
    layer.add(item);
});

stage.add(layer);   
} 
```

任务：

*   我需要建立某种带有项目的图表（只是项目，在这里保持简单）
*   项目将来可以是任何形状（实际上是 Kinetic.Group 形状）
*   这就是我需要画布的原因
*   在更新任何属性（文本和 x/y 坐标现在）的意义上，项目/形状需要是高度动态的
*   这就是为什么我需要一些所谓的 MVVM 框架

一般的问题：如何构建这一切？

我选择的具体实现是：如何进行 veiw --> 模型值更新。或者就相关库而言：如何从 ng-model 指令更新形状属性（例如 Kinetic.Text obj 的文本）？

提前谢谢了 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-22T18:49:36.237

使用自定义图表指令实现这一点应该相当简单。您可以将 绑定`items`到该指令，然后该指令创建一个画布实例并呈现您的图表。绑定`items`到指令将导致它在每次`items`数据更改时刷新，反之亦然。

要创建画布实例，只需在指令的链接函数中启动该部分。也就是说，您现在拥有的几乎所有代码都可以添加到链接函数中。只需确保将`items`对象传递给指令。

我在这里展示了一个类似的例子`three.js`： [AngularJS Binding to WebGL / Canvas](https://stackoverflow.com/questions/16054424/angularjs-binding-to-webgl-canvas/16876844#16876844)

# c - 此代码系列中的术语数？

> ID：13778829
> 
> 赞同：-6
> 
> 时间：2012-12-08T15:19:25.670
> 
> 标签：c

给定一个 C 代码

```
for(i=n,j=0 , i>0,i/=2 ,  j+=i) 
```

for循环结束后j的值是多少？

在我书中的解决方案中，它从以下内容开始：

```
j=n+n/2 +n/4+....+log n terms. 
```

现在我可以理解上述系列中的 log n 术语了。

任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T15:28:17.123

这是具有*log [2] n 个*元素的几何级数的总和。总和取决于您的`n`，但无论如何它都以 为界`2n`。理论在这里：[http ://en.wikipedia.org/wiki/Geometric_progression](http://en.wikipedia.org/wiki/Geometric_progression)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T15:22:02.387

它是*log [2] n*，即 n 的二进制表示中的二进制位数（或最高 1 位的等级）

你打错字了，你可能是说

```
 for(i=n,j=0 ; i>0 ;  (i/=2), (j+=i)); 
```

所以你从开始，`i==n`然后将它减半，直到达到 0 （因此*log [2] n*循环数）。

# php - 在 2 个域上拆分 PHP 页面 - 将变量发送到第二个域并再次返回

> ID：13778830
> 
> 赞同：5
> 
> 时间：2012-12-08T15:19:33.783
> 
> 标签：php, variables, post, get

我需要在两个域之间拆分一个 php 页面。也就是说，我需要将一些变量（包括数组）发送到第二个域，其中将使用变量完成一些计算，然后我需要将结果返回到第一个域。

目前我有一个 php 页面，它接受一些变量，对它们进行计算并显示结果。我想与其他域的所有者共享此功能，同时对计算的完成方式保密。

我认为最好的方法是给他们一个 php 页面，将变量发送到我的域，在那里完成计算，然后将结果发回。

我想知道最好的方法是什么。如果有人做过类似的事情，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T15:24:56.557

如果使用您的数据的站点将在那里内联显示它，那么这种功能通常会使用 AJAX 来完成。创建一个接受变量的页面，执行计算，然后将结果输出为 JSON。需要计算的站点只需将它们的值发布到您的页面并捕获结果，这些结果很容易以任何语言解析。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T15:26:05.553

如果要传输的数据量不大，我会使用一个`urlencode`设置：

PHP 1：

```
$a=urlencode(serialize($array1));
$b=urlencode($value2);
$result = file_get_contents('http://example.com/getvalue.php?a='.$a.'&b='.$b); 
```

PHP2：

```
$array1:=unserialize(urldecode($_GET['a']));
$value2=urldecode($b);
//Now do your calculations
echo $result; 
```

但这是否真的是一个好的解决方案取决于您的数据。

# apache2 - 在 Windows 上安装 Apache 2.4 时出错 - 未以管理员身份登录

> ID：13778836
> 
> 赞同：10
> 
> 时间：2012-12-08T15:20:16.780
> 
> 标签：apache2, installation

我正在尝试按照[本指南](http://www.sitepoint.com/how-to-install-apache-on-windows/)在我的 windows vista 上设置 Apache 2.4 。但是当我运行命令 httpd -k install 时出现错误

// 错误 (OS 5) 访问被拒绝。: AH00369: WinNT服务管理器打开失败，可能是你忘记以管理员身份登录了？

当我在我的电脑上切换时，我没有以管理员身份登录。当我检查控制面板，管理工具，然后服务 Apache 不在列表中。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-26T17:15:09.317

找到cmd.exe并右键选择以管理员身份运行 [![在此处输入图像描述](../Images/47f400635784bb034bc3d191c0b9c374.png)](https://i.stack.imgur.com/otyjL.png)

[![在此处输入图像描述](../Images/8e532ee241c103a7c17963723f215b82.png)](https://i.stack.imgur.com/cFeLc.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-25T10:03:49.050

您必须在管理员模式下启动命令行。

[以管理员模式打开命令行窗口](https://i.stack.imgur.com/KOye4.png)

注意：Snap 来自 Windows 8。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-07T08:07:19.973

在 Windows server 2008 上，由于某种原因，命令 httpd -k install 不起作用（AH00369），即使我在管理员命令提示符下。

但是我能够使用 sc 命令安装该服务（参考[https://support.microsoft.com/en-us/help/251192/how-to-create-a-windows-service-by-using-sc- exe](https://support.microsoft.com/en-us/help/251192/how-to-create-a-windows-service-by-using-sc-exe)和[使用 sc.exe 创建服务时如何传入上下文参数？](https://stackoverflow.com/questions/3663331/when-creating-a-service-with-sc-exe-how-to-pass-in-context-parameters)）

```
sc.exe create apache2.4 start= auto obj= "<username>" password= "<password>" DisplayName= "Apache 2.4" depend= "Tcpip/Afd" binpath= "\"c:\wamp\bin\apache\apache2.4.33\bin\httpd.exe\" -k runservice" 
```

如果您从 apache 访问网络驱动器或 UNC 路径名，则需要用户名和密码

# php - PHP：加载 xml 文件并获取节点值

> ID：13778842
> 
> 赞同：0
> 
> 时间：2012-12-08T15:21:21.473
> 
> 标签：php, xml

我的 xml 文件如下所示..

```
<CA>
  <student>
    <name>james</name>
    <seat>A2</seat>
  </student>
  <student>
    <name>Asada</name>
    <seat>M13</seat>
  </student>
</CA> 
```

我想使用 PHP 接近“座位”节点的值“A2”和“M13”。

```
$root = $xml->documentElement;
$current = $root->firstChild;
$test = $current->firstChild; 
```

我可以使用上面的代码访问“名称”节点。如何访问“座位”节点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T15:39:25.957

您可以为此使用 XPath：

```
$xml = <<<END
<CA>
  <student>
  <name>james</name>
  <seat>A2</seat>
  </student>
  <student>
  <name>Asada</name>
  <seat>M13</seat>
  </student>
</CA> 
END;

$dom = new DOMDocument();
$dom->loadXml($xml);

$xpath = new DOMXPath($dom);
$entry = $xpath->query("//CA/student/seat");
foreach($entry as $ent){
  echo $ent->nodeValue;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T15:34:39.147

您可以为此使用 SimpleXML：

```
$xml = simplexml_load_string($xmlContents);
foreach($xml->student as $student) {
    echo (string)$student->seat."\n";
} 
```

# html - 为什么在使用 CSS3 动画属性时，Firefox 中的 CPU 使用率如此之高？

> ID：13778844
> 
> 赞同：7
> 
> 时间：2012-12-08T15:21:34.770
> 
> 标签：html, css

今天我打算用 CSS 制作几个关键帧动画。我正在使用以下 CSS：

```
-webkit-animation: ballanim 5.6s infinite;
     -o-animation: ballanim 5.6s infinite;
        animation: ballanim 5.6s infinite; 
```

不过有一个大问题，我不知道是我的代码有问题还是 Firefox 有问题。作为比较，在这些动画中的 10 倍上：

*   Safari：12.8% 的 CPU 使用率。
*   Firefox：超过 70% 的 CPU 使用率。

我在这里上传了我的网页：

[http://hkwh01.99k.org/test/services.html](http://hkwh01.99k.org/test/services.html)

Firefox 不适合 CSS 动画吗？有人知道这是什么原因吗？我应该考虑另一种制作动画的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T17:23:11.663

CSS 动画应该是硬件 (GPU) 加速的。

看看这个非常邪恶的例子[http://ie.microsoft.com/testdrive/Performance/Chalkboard/](http://ie.microsoft.com/testdrive/Performance/Chalkboard/) 并比较 IE10（默认为原生 HWA）和其他浏览器（目前默认没有 HWA）的性能。然后 - 启用 HWA，看看其他浏览器的第二次性能好多少（但仍然比 IE10 差）。

在所有目标浏览器默认支持 HWA 之前，您不应该依赖动画来实现非必要功能。为它们禁用动画可能是个好主意。

# regex - Postgres 正则表达式贪婪控制

> ID：13778845
> 
> 赞同：1
> 
> 时间：2012-12-08T15:21:35.860
> 
> 标签：regex, postgresql, regex-greedy

要更改文本周围的标签对，这个 Postgres SELECT 表达式适用于我：

```
select regexp_replace('The corpse of the huge <i>fin whale</i> created a spectacle on <span class="day">Friday</span> as <i>people</i> wandered the beach to observe it.',
                      '(<i>)([^/]+)(</i>)',
                      '<em>\2</em>',
                      'g'); 
```

尽管参考第二条，我担心过度贪婪。我第一次尝试引用第二个是 (.+)，但这是失败的。([^/]+) 效果更好。但我想知道它是否足够好。

可以做些什么来使 SELECT 语句更健壮吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-08T15:26:52.767

通常有两种可能性（[PostreSQL 的正则表达式引擎似乎都支持这](http://www.postgresql.org/docs/8.3/static/functions-matching.html)两种可能性）。

1.  使重复不贪婪：

    ```
    <i>(.+?)</i> 
    ```

2.  使用[负前瞻](http://www.regular-expressions.info/lookaround.html)来确保您使用除以下内容之外的任何内容`</i>`：

    ```
    <i>((?:(?!</i>).)+)</i> 
    ```

在这两种情况下，我都删除了不必要的捕获。您`\1`现在可以在替换字符串中使用。

这两个在他们所做的事情上应该是等价的。他们的表现可能会有所不同。前者需要回溯，而后者必须在每个位置尝试前瞻。必须分析哪个更快，甚至可能取决于单个输入字符串。请注意，由于第二种模式使用贪婪重复，您可以删除尾随`</i>`，您仍然会得到相同的结果。

从某种意义上说，您拥有的方法已经很强大，您永远无法超越`</i>`. 但同时您的方法不允许嵌套标签（因为重复不能超过嵌套对的结束标签）。

但是，您应该注意，[正则表达式并不能真正胜任解析/操作 HTML 的工作](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454)。如果标签中有多余的空格怎么办？或者如果开始标签有属性怎么办？或者，如果其中一个或两个标签出现在属性名称或注释中怎么办？

# asp.net-mvc - HttpPostedFileBase 对于部分视图始终为空

> ID：13778846
> 
> 赞同：5
> 
> 时间：2012-12-08T15:21:40.693
> 
> 标签：asp.net-mvc, razor

我正在开发一个应用程序，用于使用自定义模式弹出在服务器上上传 pdf 文件。我正在使用文件上传浏览器 html 控件来上传 .pdf 文件，并且该控件是在部分视图中设计的。当我单击“添加”按钮时，在服务器端我没有得到 HttpPostedFileBase 和 FormCollection 值。

这是我的代码：

局部视图：

```
@model Zytron.Models.ProductDataControls

    @using (Html.BeginForm("UploadFiles", "AdminPanel", FormMethod.Post, new
    {
        @id = "file_upload",
    }))

    {

        <table width="100%" cellpadding="5" cellspacing="1">
            <tr>
                <td>
                    <span>Description</span>
                </td>
            </tr>
            <tr>
                <td>
                    @Html.TextBoxFor(m => m.Description, new
               {
                   @class = "textBox"
               })
                    @Html.HiddenFor(m => m.ProductId)
                    @Html.HiddenFor(m => m.ParentId)
                </td>
            </tr>
            <tr>
                <td>
                    <span>File Source</span>
                </td>
            </tr>
            <tr>
                <td>
                    <input type="file" id="fileUpload" name="fileUpload" size="23" />
                </td>
            </tr>
        </table>
    } 
```

型号代码：

```
public class ProductDataControls

 {

       public string Description { get; set; }

  } 
```

自定义模式弹出代码：

```
function loadProdAttachFile(tag, event, target) 
{
    event.preventDefault();
    var $loading = $('<img src="@Url.Content("~/Images/ajaxLoading.gif")" alt="loading" class="ui-loading-icon">');
    var $url = $(tag).attr('href');
    var $title = $(tag).attr('title');
    var $dialog = $('<div></div>');
    $dialog.empty();
    //            alert($url);
    $dialog
            .append($loading)
            .load($url)
              .dialog({
                  autoOpen: false
               , title: $title
               , width: 500
               , modal: true
               , minHeight: 220
               , show: 'fade'
               , hide: 'fade'
              });

              $dialog.dialog("option", "buttons", {
                  "Add": function () {
                      var dlg = $(this);
                      //$('form#file_upload').submit();

                      var file = document.getElementById("fileUpload").value;
                      var pid = getParamValue("pid", $url);
                      var type = getParamValue("type", $url);

                      $.ajax({
                          url: '/AdminPanel/UploadFiles',
                          type: 'POST',
                          data: { 'file': file, 'pid' : pid, 'type' : type },
                          success: function (response) {
                              dlg.dialog('close');
                              dlg.empty();
                          },
                          error: function (xhr) {
                              if (xhr.status == 400)
                                  dlg.html(xhr.responseText, xhr.status);     /* display validation errors in edit dialog */
                              else
                                  displayError(xhr.responseText, xhr.status); /* display other errors in separate dialog */
                          }
                      });

                  },
                  "Cancel": function () {
                      $(this).dialog("close");
                      $(this).empty();
                  }
              });
    $dialog.dialog('open');
}; 
```

控制器代码：

```
[HttpPost]

public void UploadFiles(HttpPostedFileBase file, FormCollection form)
{
} 
```

查看代码：

```
<a href "/ UploadFiles” class="ModalDlgProdAttachment"   <img src=”../Images/MyImage.jpg" /> </a>

$('a. ModalDlgProdAttachment).live("click", function (event) { loadProdAttachFile(this, event, "# file_upload"); }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T10:42:47.123

您需要确保输入元素的“名称”属性与“上传文件”方法中的 HttpPostedFileBase 参数的名称相同。这就是 MVC 将上传的文件与方法匹配的方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T15:24:18.040

您不能使用 AJAX 上传文件。这已经在 StackOverflow 上讨论过很多次。你有几个解决方案：

*   如果您使用的客户端浏览器支持，[`HTML5 File API`](https://developer.mozilla.org/en-US/docs/Using_files_from_web_applications)您可以使用它通过 AJAX 上传文件。
*   如果他们不支持它，您可以使用文件上传组件，例如`Uploadify`BlueImp [File Upload](https://github.com/blueimp/jQuery-File-Upload)和[Valums File Uploader](https://github.com/valums/file-uploader)。这些控件将测试客户端浏览器是否支持 HTML5，如果支持则使用它，如果它不回退到涉及使用隐藏 iframe 或 Flash 电影的其他技术。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T15:40:40.953

如果您想在没有 AJAX 的情况下执行此操作，您可以`<input type="file" />`在表单标签中使用上传文件并在操作中将其检索为`HttpPostedFileBase`. 只需确保将`enctype`参数添加到路由值对象：

```
@using (Html.BeginForm("UploadFiles", "AdminPanel", FormMethod.Post, new { @id = "file_upload", enctype = "multipart/form-data" }))
{
    <input type="file" name="uploadedFile" />
} 
```

动作签名：

```
[HttpPost]
public ActionResult UploadFiles(HttpPostedFileBase uploadedFile, SomeOtherViewModel stuff) 
```

但是，正如 Darin 所说，这一次只处理一个文件，不会处理 AJAX 调用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-15T06:23:03.273

在您的视图中使用以下代码：

@using (Html.BeginForm("SubmitTicket", "Ticket", FormMethod.Post, new { @class = "form", enctype = "multipart/form-data", @id = "frmTicket" }))

# vbscript - 如何在 32 位操作系统上使用 VBScript 显示 64 位双数？

> ID：13778856
> 
> 赞同：5
> 
> 时间：2012-12-08T15:22:38.273
> 
> 标签：vbscript, double

我有一个包含 64 位数字（双）参数的设备。我可以使用 Modbus 协议分两部分读取它的 Double 参数。所以我使用按位运算将 64 位数字拆分为两个 32 位数字。

示例：（`2289225.841082`十进制）= `41417724-EBA8953E`（十六进制）

您可以在以下站点检查和测试十六进制对话：http: [//babbage.cs.qc.edu/IEEE-754/](http://babbage.cs.qc.edu/IEEE-754/)复制`41417724EBA8953E`并粘贴到上述站点的“要分析的值”编辑框中，然后按 Enter。

但是在传输了两个 32 位整数后，我*无法*将其合并为原始 64 位数字。我尝试在 VBScript 中使用`CDbl`and`FormatNumber`函数，但失败了！

```
Dim nL, nH, fL, fH, f64 
nL = 1094809380 ' 4141 7724
nH = 3953694014 ' EBA8 953E
fL = CDbl($nL)
fH = CDbl($nH)
f64 = CDbl((fH * CDbl(2 ^ 32)) + CDbl(fL))
$strNum64 = FormatNumber( f64, 2) 
```

那么，如何在 32 位操作系统上使用 VBScript 显示 64 位数字？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-09T14:45:20.290

假设纯 VBScript，对此的“简单”答案是编写一个 bignum 加法和乘法，然后以这种方式计算答案。

使用[RosettaCode](http://rosettacode.org/wiki/Long_Multiplication#Liberty_BASIC)中的代码，我创建了以下 VeryLargeInteger 类和一个 Hex64 函数，它表示 4702170486407730494 是 0x41417724EBA8953E 的 64 位十进制等效值

```
Option Explicit
Class VeryLongInteger
    'http://rosettacode.org/wiki/Long_Multiplication#Liberty_BASIC
    Public Function MULTIPLY(Str_A, Str_B)
        Dim signA, signB, sResult, Str_Shift, i, d, Str_T
        signA = 1
        If Left(Str_A,1) = "-" Then 
            Str_A = Mid(Str_A,2)
            signA = -1
        End If
        signB = 1
        If Left(Str_B,1) = "-" Then 
            Str_B = Mid(Str_B,2)
            signB = -1
        End If
        sResult = vbNullString
        Str_T = vbNullString
        Str_shift = vbNullString
        For i = Len(Str_A) To 1 Step -1
            d = CInt(Mid(Str_A,i,1))
            Str_T = MULTBYDIGIT(Str_B, d)
            sResult = ADD(sResult, Str_T & Str_shift)
            Str_shift = Str_shift & "0"
            'print d, Str_T, sResult 
        Next
        If signA * signB < 0 Then sResult = "-" + sResult
        'print sResult
        MULTIPLY = sResult
    End Function

    Private Function MULTBYDIGIT(Str_A, d)
        Dim sResult, carry, i, a, c
        'multiply Str_A by digit d
        sResult = vbNullString
        carry = 0
        For i = Len(Str_A) To 1 Step -1
            a = CInt(Mid(Str_A,i,1))
            c = a * d + carry
            carry = c \ 10
            c = c Mod 10
            'print a, c
            sResult = CStr(c) & sResult 
        Next
        If carry > 0 Then sResult = CStr(carry) & sResult
        'print sResult
        MULTBYDIGIT = sResult
    End Function

    Public Function ADD(Str_A, Str_B)
        Dim L, sResult, carry, i, a, b, c
        'add Str_A + Str_B, for now only positive
        l = MAX(Len(Str_A), Len(Str_B))
        Str_A=PAD(Str_A,l)
        Str_B=PAD(Str_B,l)
        sResult = vbNullString 'result
        carry = 0
        For i = l To 1 Step -1
            a = CInt(Mid(Str_A,i,1))
            b = CInt(Mid(Str_B,i,1))
            c = a + b + carry
            carry = Int(c/10)
            c = c Mod 10
            'print a, b, c
            sResult = CStr(c) & sResult
        Next
        If carry>0 Then sResult = CStr(carry) & sResult
        'print sResult
        ADD = sResult
    End Function

    Private Function Max(a,b)
        If a > b Then
            Max = a
        Else
            Max = b
        End If
    End Function

    Private Function pad(a,n)  'pad from right with 0 to length n
        Dim sResult
        sResult = a
        While Len(sResult) < n
            sResult = "0" & sResult
        Wend
        pad = sResult
    End Function
End Class

Function Hex64(sHex)
    Dim VLI
    Set VLI = New VeryLongInteger

    Dim Sixteen(16)
    Sixteen(0) = "1"
    Sixteen(1) = "16"
    Sixteen(2) = VLI.MULTIPLY(Sixteen(1),"16")
    Sixteen(3) = VLI.MULTIPLY(Sixteen(2),"16")
    Sixteen(4) = VLI.MULTIPLY(Sixteen(3),"16")
    Sixteen(5) = VLI.MULTIPLY(Sixteen(4),"16")
    Sixteen(6) = VLI.MULTIPLY(Sixteen(5),"16")
    Sixteen(7) = VLI.MULTIPLY(Sixteen(6),"16")
    Sixteen(8) = VLI.MULTIPLY(Sixteen(7),"16")
    Sixteen(9) = VLI.MULTIPLY(Sixteen(8),"16")
    Sixteen(10) = VLI.MULTIPLY(Sixteen(9),"16")
    Sixteen(11) = VLI.MULTIPLY(Sixteen(10),"16")
    Sixteen(12) = VLI.MULTIPLY(Sixteen(11),"16")
    Sixteen(13) = VLI.MULTIPLY(Sixteen(12),"16")
    Sixteen(14) = VLI.MULTIPLY(Sixteen(13),"16")
    Sixteen(15) = VLI.MULTIPLY(Sixteen(14),"16")

    Dim theAnswer, i, theDigit, theMultiplier, thePower, aPower
    theAnswer = "0"
    aPower = 0
    For i = Len(sHex) To 1 Step -1
        theDigit = UCase(Mid(sHex,i,1))
        theMultiplier = InStr("0123456789ABCDEF",theDigit)-1
        thePower = Sixteen(aPower)
        thePower = VLI.MULTIPLY(CStr(theMultiplier),thePower)
        theAnswer = VLI.ADD(theAnswer,thePower )
        aPower = aPower + 1
    Next
    Hex64 = theAnswer
End Function

WScript.Echo Hex64("41417724EBA8953E") 
```

我想说“享受”，但距离最初的发布已经超过六个月了，所以你可能已经找到了另一个解决方案。尽管如此，这很有趣。

**之后**

如果您想避免预先计算 16 的幂，则执行 Hex64 的另一种方法是：

```
Function Hex64b(sHex)
    Dim VLI
    Set VLI = New VeryLongInteger       
    Dim theAnswer, i, theDigit, theMultiplier, thePower, aPower
    theAnswer = "0"
    thePower = "1"
    For i = Len(sHex) To 1 Step -1
        theDigit = UCase(Mid(sHex,i,1))
        theMultiplier = InStr("0123456789ABCDEF",theDigit)-1
        theAnswer = VLI.ADD(theAnswer,VLI.MULTIPLY(thePower,theMultiplier))
        thePower = VLI.MULTIPLY(thePower,"16")
    Next
    Hex64b = theAnswer
End Function 
```

# linux - 尝试使用 sudo 将文件附加到根拥有的文件时权限被拒绝

> ID：13778857
> 
> 赞同：45
> 
> 时间：2012-12-08T15:22:52.620
> 
> 标签：linux, bash, shell, command-line, sudo

这是当我尝试使用 sudo 将文件中的数据附加到另一个文件时导致“权限被拒绝”的 shell 命令：

```
sudo cat add_file >> /etc/file 
```

at 的文件`/etc/file`归`root`（即我）所有，其权限为`rw-r--r--`. 我应该`root`暂时让它工作还是有解决方法`sudo`？

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-12-08T15:25:49.020

运行`bash`为`sudo`：

```
$ sudo bash -c "cat add_file >> /etc/file"

$ whoami;sudo bash -c "whoami";whoami
iiSeymour
root
iiSeymour 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-12-08T15:24:44.777

尝试这样做：

```
sudo tee -a /etc/file < add_file 
```

它比运行 bash 或`sh -c command`

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-12-08T15:42:58.083

一个有趣的可能性是使用`ed`（标准编辑器）：

```
sudo ed -s /etc/file <<< $'r add_file\nwq' 
```

我知道我不会因为这个精彩的答案而获得投票，但我还是想把它包括在这里（因为它很有趣）。完毕！

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-12-08T15:32:57.540

您正在尝试将命令的结果写入`sudo cat add_file`文件 /etc/file. 显然你没有这个权利。

`man sudo`给出了这个例子：

> ```
>  To make a usage listing of the directories in the /home partition.  Note
>    that this runs the commands in a sub-shell to make the cd and file
>    redirection work.
> 
>     $ sudo sh -c "cd /home ; du -s * | sort -rn > USAGE" 
> ```

所以你应该尝试：

`sudo sh -c "cat add_file >> /etc/file"`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-05-25T11:18:22.660

[与@gniourf_gniourf](https://stackoverflow.com/a/13778998/55075)答案类似的方法，但使用`ex`：

```
sudo ex +"r in.txt" -cwq out.txt 
```

相当于 `vi`/ `vim`Ex-mode ( `-e`)。

这个就地编辑示例是简单、安全和方便的方法，因为它不使用任何 shell 管道、FIFO 或 shell 变通方法中的 shell。

为了提高脚本性能，请考虑使用静音模式 ( `-s`)。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2014-02-27T21:19:11.183

尝试

```
sudo bash -c 'cat add_file >> /etc/file' 
```

或者

```
cat add_file | sudo tee -a /etc/file > /dev/null 
```

# ruby - Octopress 错误 - rake 预览、观看或生成

> ID：13778858
> 
> 赞同：7
> 
> 时间：2012-12-08T15:22:58.173
> 
> 标签：ruby, rake, jekyll, rakefile, octopress

我遵循了[Octopress 文档](http://octopress.org/docs/)中的所有说明：

```
sddhrthrt@thinkpad:~/octopress$ rake generate
## Generating Site with Jekyll
directory source/stylesheets/ 
   create source/stylesheets/screen.css 
Configuration from /home/sddhrthrt/octopress/_config.yml
/home/sddhrthrt/octopress/plugins/pygments_code.rb:5: 
      warning: already initialized constant PYGMENTS_CACHE_DIR
/home/sddhrthrt/octopress/plugins/render_partial.rb:25:in `require':
             ./plugins/octopress_filters.rb:69: undefined (?...) sequence:
              /<div class="entry-content">(?<content>[\s\S]*?)<\/div>\s*<(footer|\/article)>/ (SyntaxError)
        from /home/sddhrthrt/octopress/plugins/render_partial.rb:25
        from /var/lib/gems/1.8/gems/jekyll-0.11.2/bin/../lib/jekyll/site.rb:76:in `require'
        from /var/lib/gems/1.8/gems/jekyll-0.11.2/bin/../lib/jekyll/site.rb:76:in `setup'
        from /var/lib/gems/1.8/gems/jekyll-0.11.2/bin/../lib/jekyll/site.rb:75:in `each'
        from /var/lib/gems/1.8/gems/jekyll-0.11.2/bin/../lib/jekyll/site.rb:75:in `setup'
        from /var/lib/gems/1.8/gems/jekyll-0.11.2/bin/../lib/jekyll/site.rb:30:in `initialize'
        from /var/lib/gems/1.8/gems/jekyll-0.11.2/bin/jekyll:224:in `new'
        from /var/lib/gems/1.8/gems/jekyll-0.11.2/bin/jekyll:224
        from /usr/local/bin/jekyll:19:in `load'
        from /usr/local/bin/jekyll:19 
```

和

```
sddhrthrt@thinkpad:~/octopress$ rake preview
Starting to watch source with Jekyll and Compass. Starting Rack on port 4000
rake aborted!
undefined method `spawn' for Process:Module

Tasks: TOP => preview
(See full trace by running task with --trace) 
```

和

```
sddhrthrt@thinkpad:~/octopress$ rake watch
Starting to watch source with Jekyll and Compass.
rake aborted!
undefined method `spawn' for Process:Module

Tasks: TOP => watch
(See full trace by running task with --trace) 
```

我承认，我从来没有研究过 Ruby。因此，我不太愿意解读错误。谷歌搜索也没有产生任何我能理解的东西。

**编辑：**

所以在答案中提到，我安装了 rbenv 然后`ruby 1.9.3-p327`. 我回来`~/octopress`跑了`bundle install`，它说所有的 gem 都已经安装了（当我有 ruby​​ 1.8x 时我已经安装了）。现在 rake 给了我这个错误：

```
sddhrthrt@thinkpad:~/octopress$ rake --trace
rake aborted!
cannot load such file -- bundler/setup
/home/sddhrthrt/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
/home/sddhrthrt/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
/home/sddhrthrt/octopress/Rakefile:2:in `<top (required)>'
/home/sddhrthrt/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/rake/rake_module.rb:25:in `load'
/home/sddhrthrt/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/rake/rake_module.rb:25:in `load_rakefile'
/home/sddhrthrt/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/rake/application.rb:501:in `raw_load_rakefile'
/home/sddhrthrt/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/rake/application.rb:82:in `block in load_rakefile'
/home/sddhrthrt/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/rake/application.rb:133:in `standard_exception_handling'
/home/sddhrthrt/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/rake/application.rb:81:in `load_rakefile'
/home/sddhrthrt/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/rake/application.rb:65:in `block in run'
/home/sddhrthrt/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/rake/application.rb:133:in `standard_exception_handling'
/home/sddhrthrt/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/rake/application.rb:63:in `run'
/home/sddhrthrt/.rbenv/versions/1.9.3-p194/bin/rake:32:in `<main>' 
```

我应该使用捆绑所有宝石重新安装吗？我无法理解。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T06:08:55.307

试试看嘛

```
$ rvm use 1.9.3 
```

在您网站的根文件夹中。注意，`1.9.3`是你的 Ruby 版本。

然后我想当你跑步时

```
$ rake watch 
```

或者

```
$ rake preview 
```

现在可以工作了。

* * *

### 编辑：

因此，对于`rbenv`，请尝试：

```
$ rbenv global 1.9.3-p327 
```

或者你可以`local`改用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T03:22:24.943

您是否错过了 rbenv 配置的第 3 步？

```
$ echo 'eval "$(rbenv init -)"' >> ~/.bash_profile 
```

[https://github.com/sstephenson/rbenv/#rbenv-shell](https://github.com/sstephenson/rbenv/#rbenv-shell)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T18:09:54.150

我想问题出在过时的 Ruby 上。根据这个：[https://github.com/imathis/octopress/issues/142](https://github.com/imathis/octopress/issues/142)你应该在 Ruby 1.9 上（稳定版本现在是 1.9.3-p327）。您可以直接从 Ruby 站点获取它，但我建议使用 RVM（或 rbenv）来设置您的 Ruby 环境。

您可以在此处找到如何在您的盒子上安装 RVM 的指南：[https ://rvm.io/rvm/install/](https://rvm.io/rvm/install/)

然后安装 Ruby 1.9.3 将非常简单：

```
rvm install 1.9.3
rvm --default 1.9.3
rvm reload 
```

然后，您必须在 Octopress 根目录中安装所有依赖项`bundle install`（以获取`bundler`: ）。`gem install bundler`

**编辑：**

同样`.rvmrc`在 Octopress 的项目根目录中说它需要 Ruby 1.9.3：[https ://github.com/imathis/octopress/blob/master/.rvmrc](https://github.com/imathis/octopress/blob/master/.rvmrc)

# c# - 单选按钮更改警告消息

> ID：13778859
> 
> 赞同：0
> 
> 时间：2012-12-08T15:23:00.590
> 
> 标签：单选按钮, c#, radio-button

您好，我有两个单选按钮。一男一女。问题是，当其中一个被选中（例如男性）并且用户尝试更改为另一个（女性）时，我会向用户显示警告消息。如果他按下确定，[单选按钮](/questions/tagged/radio-button "显示标记为“单选按钮”的问题")会从女性变为男性，一切正常。但是当他按下取消按钮时，单选按钮也会从女性变为男性。我怎样才能防止这种情况？有什么方法可以禁用 radiobutton_checked 侦听器并在我想要的时候启用？
男性和女性听众的代码如下：

```
private void NewTrdButtonMale_Checked(object sender, RoutedEventArgs e)
    {
//if there are participants for deletion i display a warning message that says that if you change from female to male the deletion will be done
        if (newAreParticipantsForDeletion())
        {
            switch (warningMessage())
            {
                case "OK":
                    //nothing useful for you here
                    break;
                case "Cancel":
                    break;
            }
        }
        else
        {
            //nothing interesting here
        }

    }

    private void NewTrdButtonFemale_Checked(object sender, RoutedEventArgs e)
    {
        //it is the same code as the above but it is for female
    } 
```

上述方法是单选按钮的侦听器。我想要做的是，如果用户按下取消，则无需进行任何更改。但这是困难的部分，因为我已经在男性检查的听众里面，所以改变已经完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T16:13:19.573

我找到了解决方案。

我必须将下一个代码放入取消选择中。

```
NewTrdButtonFemale.Checked -= new RoutedEventHandler(NewTrdButtonFemale_Checked);
                    NewTrdButtonFemale.IsChecked = true;
                    NewTrdButtonFemale.Checked += new RoutedEventHandler(NewTrdButtonFemale_Checked); 
```

上面的代码禁用了监听器。之后我恢复了女性选择，然后我再次启用了监听器。

# php - Codeingiter 2.1 - 在第一次加载时只运行一次函数

> ID：13778860
> 
> 赞同：1
> 
> 时间：2012-12-08T15:23:07.823
> 
> 标签：php, codeigniter, codeigniter-2

当用户加载网站时，有没有办法只运行一次功能？我有一个函数，它根据用户的 IP 确定用户所在的国家/地区，我需要它在开始时运行，以便自动设置站点的语言（通过 SESSION），稍后如果需要，用户可以通过按钮更改语言。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T15:37:34.423

我认为最好的方法是扩展控制器以检查是否设置了语言。如果未设置，则运行地理/语言设置功能。

关于如何扩展控制器的说明 [http://www.gregaker.net/2011/mar/18/extending-codeigniters-controller/](http://www.gregaker.net/2011/mar/18/extending-codeigniters-controller/)

# php - 附加 URI 段

> ID：13778861
> 
> 赞同：0
> 
> 时间：2012-12-08T15:23:13.907
> 
> 标签：php, codeigniter

我喜欢 SO 处理 URI 的方式。我想模仿 CI 中的相同行为。我有一个名为的控制器`Users`，索引方法应该采用一个参数，即用户 ID。我在数据库中搜索与该用户 ID 关联的用户名。考虑一下，`user:1`我`username:Santa Claus`怎样才能将用户名附加到 URI，使它看起来像`http://foo.com/users/1/santa-claus`

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Users extends CI_Controller {

function index($uID = 0) {
    if ($uID > 0) {
        $this->load->model('users_model');
        $uname = $this->users_model->_getUsername($uID);

        #append somehow..       

    } else {
        echo('load all users');
    }
}

} 
```

* * *

为了清楚起见，我正在努力实现这一目标：

[https://stackoverflow.com/a/11041075/704015](https://stackoverflow.com/a/11041075/704015)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T23:48:13.363

应用程序/config/routes.php

```
$route['users/(:num)/(:any)'] = 'users/index/$1'; 
```

控制器

```
 function index($uID = 0) {
         .....
         $uname = strtolower(str_replace(" ", "-", $uname));

         header("Location: ".base_url()."user/".$uID."/".$uname); 
```

请包括一个条件做其他事情，以防用户名已经存在以避免循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T15:33:12.487

这在你的 config/routes.php

```
 $route['users/(:num)/(:any)'] = 'users/$1/$2'; 
```

这在你的控制器中

```
public function users($id,$username = FALSE)
{ 
```

# ios - 获取范围（含）之间值的正确查询

> ID：13778862
> 
> 赞同：0
> 
> 时间：2012-12-08T15:23:16.527
> 
> 标签：ios, sql, sqlite

我正在编写一个 Iphone 应用程序并使用 sqlite 作为我的数据库。如果对象在某个范围（MIN 和 MAX）之间，我对它们有折扣，但问题是当我进行查询时，折扣似乎也适用于该范围之外。不知道如何正确地做到这一点。

例如，我想要 36(MIN) 到 60(MAX) 之间的范围。

sql 语句如下所示：

```
NSString *queryString = [NSString stringWithFormat:@"SELECT * FROM DISCOUNT WHERE PACKAGEID = '%@' AND CATEGORYID = '%@' AND '%@' >= MIN ORDER BY MAX DESC ",item.packageid,item.categoryid,item.discount]; 
```

这个代码是我前辈的。需要改变它..需要一些帮助...我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T15:41:11.747

在最后添加`AND '%@' <= MAX`查询`AND '%@' >= MIN`

您的查询应如下所示

```
NSString *queryString = [NSString stringWithFormat:@"
SELECT * FROM DISCOUNT WHERE PACKAGEID = '%@' AND CATEGORYID = '%@' 
AND '%@' >= MIN AND '%@' <= MAX ORDER BY MAX DESC",
item.packageid,item.categoryid,item.discount,item.discount]; 
```

# sql - 基于 Oracle 的 SQL 查询

> ID：13778863
> 
> 赞同：2
> 
> 时间：2012-12-08T15:23:16.933
> 
> 标签：sql, database, oracle

我在交替这张表时遇到了一些麻烦：

我的桌子是`styles`( `id, style`)

```
id    Style      
------------
01   Style-01 
02   Style-02 
03   Style-03
04   Table
06   Chair 
```

我需要将单词“Style-XX”更改为 Coach-XX，其中 XX 是偶数（0、2、4、6）。

所以它看起来像这样：

```
id    Style      
------------
01   Coach-02 
02   Style-03 
03   Coach-04
04   Table
06   Chair 
```

好吧，我知道它必须是这样的：XX mod 2 = 0，才能使数字为偶数（0、2、4 等）。

但我真的不知道如何分开这些词：S

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T18:24:55.687

```
MERGE INTO style s
USING (
   SELECT id
   FROM style ss
   WHERE ss.style LIKE 'Style%'
   AND  mod(to_number(substr(ss.style,6)),2)=0)e
   ON (s.id = e.id
      )
 WHEN MATCHED THEN
  UPDATE SET style =replace(style,'Style','Coach'); 
```

SQLFIDDLE：[链接](http://www.sqlfiddle.com/#!4/30dd3/6)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T18:40:17.877

如果您需要更改数据：

```
update STYLES set STYLE = 'Coach-'||substr(STYLE,-2,2)
where STYLE like 'Style-__'
  and substr(STYLE,-2,2) between '00' and '99'
  and mod(to_number(substr(STYLE,-2,2)),2) = 0; 
```

如果只需要在读取数据时进行转换：

```
select 
  ID
 ,case
    when STYLE like 'Style-__'
     and substr(STYLE,-2,2) between '00' and '99'
     and mod(to_number(substr(STYLE,-2,2)),2) = 0
    then 'Coach-'||substr(STYLE,-2,2)
    else STYLE
  end as STYLE
from STYLES; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T16:24:46.947

你的问题让我有点困惑，因为这些词与你的例子不太匹配。无论如何，如何使用一个简单的`UPDATE`步骤，如下所示：

```
update your_table
from (
   select id
        , case
             when Style = 'Style-01' then 'Coach-02'
             when Style = 'Style-03' then 'Coach-04'
             when Style = 'Style-05' then 'Coach-06'
             when Style = 'Style-07' then 'Coach-08'
             when Style = 'Style-09' then 'Coach-00'
             end as new_style
   from  your_table
   where Style in ('Style-01','Style-03','Style-05'
                   'Style-07','Style-09'
   ) x

set Style = x.new_style

where your_table.id = x.id 
```

我认为明确地做事情比试图解析一个值并做算术更好。如果您需要重新访问代码，这样的事情会更容易理解。

# java - 多级和分层状态机的设计

> ID：13778864
> 
> 赞同：7
> 
> 时间：2012-12-08T15:23:19.040
> 
> 标签：java, design-patterns, state-machine

在网络编程中，您需要具有多个层次深度的状态机。

```
State Machine 1
     State Machine 2

     State Machine 3
          State Machine 4 
```

这里状态机`1`包含两个状态机`2`和`3`. `3`还包含一台机器`4`。

根据外部机器的状态，消息应该通过内部状态机。此外，如果内部状态机存在一些错误，则应将反馈提供给上层机器。

有没有好的方法来做到这一点？

现在我有一堆 if 语句和标志可以为我做这件事。我一直面临一些问题，即由于状态机的整个状态处于不可恢复状态而未设置某些标志。

**更新：** 我试图保持状态和机器静态。由于请求将通过机器和状态，请求本身将存储所需的所有元数据。在这种情况下，正常的状态机模式没有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T17:28:55.587

[State Pattern](http://en.wikipedia.org/wiki/State_pattern)将 state 和*Context*分开。*上下文*可以存储状态的层次结构，而状态子类本身不知道这种层次结构。所有的 if 语句都消失了，因为 if 下的每个部分都进入了一个单独的状态子类。

# c# - XML - 将值转换为特定格式

> ID：13778866
> 
> 赞同：0
> 
> 时间：2012-12-08T15:23:24.430
> 
> 标签：c#

我正在将 XML 文件加载到 GRIDVIEW 中，并且我设法做到了。但是我目前陷入一件事，那就是当我尝试加载一个特定值（47.138）时。该值应该以以下格式加载（分钟：秒.英里秒）。在这种情况下将是 "0:47.138" 。

我的问题是，如何加载此类数据并以正确的格式显示？

```
XmlNodeList drivers = doc.GetElementsByTagName("Driver");

        foreach (XmlNode driver in drivers)
        {
            dInfo = new BusObjects.DriverInfo();

if (driver.ChildNodes[i].Name.Equals("BestLapTime"))
                    dInfo.FastestLap = Convert.ToDouble(driver.ChildNodes[i].InnerText).ToString("????");                     
            } 
```

这是我的 DriverInfo.cs

```
 private double _fastestlap;

    public double FastestLap
    {
        get { return _fastestlap; }
        set { _fastestlap = value; }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T15:37:40.727

您可以创建一个`TimeSpan`对象并使用它来格式化文本。

```
TimeSpan ts = TimeSpan.FromSeconds(47.138);
Console.WriteLine(ts.ToString(@"mm\:ss\.fff")); 
```

在你的`DriverInfo`课堂上，你可以有一种方法来为你做这件事。

```
public string GetFormattedTime()
{
   TimeSpan ts = TimeSpan.FromSeconds(_fastestlap);
   return ts.ToString(@"mm\:ss\.fff");

   //shorter version if you prefer
   //return TimeSpan.FromSeconds(_fastestlap).ToString(@"mm\:ss\.fff");
} 
```

[MSDN](http://msdn.microsoft.com/en-us/library/ee372287.aspx)提供了有关自定义 TimeSpan 格式的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T18:15:59.677

扩展[keyboardP的答案](https://stackoverflow.com/a/13778959)....

```
foreach (XmlNode driver in drivers)
{
  dInfo = new BusObjects.DriverInfo();

  if (driver.ChildNodes[i].Name.Equals("BestLapTime"))
  {
    dInfo.FastestLap = Convert.ToDouble(driver.ChildNodes[i].InnerText);
  }
}

// you can use an auto property for FastestLap
public double FastestLap {get; set;}

// Add another property for FormattedFastestLap:
public string FormattedFastestLap 
{
    get { return TimeSpan.FromSeconds(FastestLap).ToString(@"mm\:ss\.fff"); }
} 
```

在`foreach`循环中，您正在设置 FastestLap 的值，它是双精度值。通过创建另一个名为 FormattedFastestLap 的属性，您可以访问 FastestLap 属性并将双精度数转换为字符串，方法是先转换为 TimeSpan 对象，然后以格式化字符串返回 TimeSpan。

然后，在您的网格中，将显示绑定到 FormattedFastestLap 而不是 FastestLap 属性。

# c# - Windows Phone 7 XNA 游戏、MouseMove、OnUpdate

> ID：13778869
> 
> 赞同：0
> 
> 时间：2012-12-08T15:23:51.520
> 
> 标签：c#, visual-studio-2010, windows-phone-7, xna

我正在 Windows Phone 7 上开发 Arkanoid (Breakout) 游戏。

我在 GamePage 构造函数的基础上添加了一个处理程序：

```
public GamePage()
    {
        InitializeComponent();

        // Get the content manager from the application
        contentManager = (Application.Current as App).Content;

        // Create a timer for this page
        timer = new GameTimer();
        timer.UpdateInterval = TimeSpan.FromTicks(333333);
        timer.Update += OnUpdate;
        timer.Draw += OnDraw;

        base.OnMouseMove += new MouseEventHandler(GamePage_MouseMove);

        init();
    } 
```

这是处理函数：

```
private void GamePage_MouseMove(object sender, MouseEventArgs e)
    {
        //this changes the ball coordinates based on yVel and xVel properties of the ball
        ball.moveBall();
    } 
```

GamePage_MouseMove 函数从未被调用，我不知道为什么。球不动。

另一个问题是 onUpdate 函数：

```
private void OnUpdate(object sender, GameTimerEventArgs e)
    {
        //if the ball rectangle intersects with the paddle rectange, change the ball yVel
        if (ball.BallRec.Intersects(paddle.PaddleRec))
            ball.YVel = -1;
        ball.moveBall();
    } 
```

即使球与桨相交，它也会继续向原来的方向移动并且不会“反弹”。

请帮忙。

## 更新

稍作修改后，onUpdate 函数现在为：

```
private void OnUpdate(object sender, GameTimerEventArgs e)
    {
        MouseState ms = Mouse.GetState();
        if(ms.LeftButton == ButtonState.Pressed)
            paddle.movePaddle((int)ms.X);
    } 
```

但桨不动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T16:10:12.707

您应该考虑在更新期间检查[MouseState](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.input.mousestate.aspx)结构，而不是尝试捕获鼠标事件。

类似于以下内容：

```
protected override void Update(GameTime gameTime)
{
  // snip...

  MouseState mouseState = Mouse.GetState();

  //Respond to the position of the mouse.
  //For example, change the position of a sprite 
  //based on mouseState.X or mouseState.Y

  //Respond to the left mouse button being pressed
  if (mouseState.LeftButton == ButtonState.Pressed)
  {
    //The left mouse button is pressed. 
  }

  base.Update(gameTime);
} 
```

在文档中有一个很好的例子来说明如何使用鼠标作为输入设备：http: [//msdn.microsoft.com/en-us/library/bb197572.aspx](http://msdn.microsoft.com/en-us/library/bb197572.aspx)

此外，对于手机，请记住您拥有真正的触控功能以及您可以使用的加速度计。您可以在此处了解所有输入选项：http: [//msdn.microsoft.com/en-us/library/bb203899.aspx](http://msdn.microsoft.com/en-us/library/bb203899.aspx)

# drupal-7 - 将 cck 字段添加到 Drupal 7 中的现有作者字段集

> ID：13778875
> 
> 赞同：0
> 
> 时间：2012-12-08T15:24:23.780
> 
> 标签：drupal-7, locale, cck, author, form-api

我已经为自定义节点类型创建了自己的 cck 布尔字段“显示作者”。节点类型具有由 node.module 设置的默认作者字段，您可以在其中设置作者和日期。我想在这个字段集中显示我自己的字段。

到目前为止，我只是移动了该字段并取消了旧字段：

```
$form['author']['field_show_author'] = $form['field_show_author'];
unset($form['field_show_author']); 
```

一切正常；该字段显示在我想要的位置，该值已正确保存。

但是随后 locales.modules 出现并破坏了一切！它使用 field_info_instances() 循环遍历所有字段，并且由于该字段未设置，因此找不到数组索引并失败。

那么如何在不破坏语言环境的情况下将自定义 cck 字段移动到现有作者字段集？我可以指定它是添加在那里而不是在表单的“根”中吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T08:25:38.130

所以我找到了一个简单的解决方案：

```
<?php
$form['field_show_author'] = array('language' => NULL);
?> 
```

这似乎解决了所有问题。

# c# - System.Xml 或 System.Linq 检查属性计数是否有序

> ID：13778879
> 
> 赞同：0
> 
> 时间：2012-12-08T15:25:12.220
> 
> 标签：c#, xml, linq

我有这个示例 xml：

```
<tr:secmain>
    <fn:footnote num ="1">
    <fn:footnote num ="2">
    <fn:footnote num ="3">
    <fn:footnote num ="3">
    <fn:footnote num ="5">
</tr:secmain>
<tr:secmain>
    <fn:footnote num ="1">
    <fn:footnote num ="2">
    <fn:footnote num ="3">
    <fn:footnote num ="4">
    <fn:footnote num ="6">
</tr:secmain> 
```

对于每个元素，我需要检查所有脚注是否有序，如果发现错误，我需要检查此行出现的位置。在示例中，行错误是第 5 行和第 13 行。

现在我正在使用 Linq 检查错误，方法是将所有数字提取到其他文本文件并使用此方法检查不正确的行：

```
int[] IncorrectLines(string filename)
{
    // Parse the file into an array of ints, 10* each version number.
    var ints = File.ReadLines(filename)
    .Select(s => (int)(10 * decimal.Parse(s))).ToArray();
    // Pair each number up with the previous one.
    var pairs = ints
    .Zip(ints.Skip(1), (p, c) => new { Current = c, Previous = p });
    // Include the line numbers
    var withLineNos = pairs
    .Select((pair, index) => new { Pair = pair, LineNo = index + 2 });
    // Only keep incorrect lines
    var incorrect = withLineNos.Where(o =>
    o.Pair.Current - 1 != o.Pair.Previous && // not a simple increment
    o.Pair.Current % 10 != 0);               // not a whole new version
    // Return the line numbers; could return (double)o.Pair.Current / 10 instead.
    return incorrect.Select(o => o.LineNo).ToArray();
} 
```

但是我现在遇到了麻烦，因为我需要检查每个 tr:secmain 的序列

感谢您的所有建议。:)

编辑：

脚注可以按以下顺序：（只是一个示例）

```
1
2
    2.1
    2.2
    2.3
3
    3.1
    3.2
    3.3
    3.4
    3.5
    3.7
4
5

etc. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T16:34:22.663

不要检查其订单的属性，只需订购它们，例如：

```
string xml =
@"<tr>
    <footnote num =""5""/>
    <footnote num =""3""/>
    <footnote num =""2""/>
    <footnote num =""3""/>
    <footnote num =""1""/>
</tr>
";

var xdoc = XDocument.Parse(xml);

var results =
xdoc.Element("tr")
    .Descendants()
    .OrderBy (x => x.FirstAttribute.Value);

results.ToList()
       .ForEach(element => Console.WriteLine (element));/* Ouputs:

<footnote num="1" />
<footnote num="2" />
<footnote num="3" />
<footnote num="3" />
<footnote num="5" />

*/ 
```

# java - javax.servlet 不存在

> ID：13778883
> 
> 赞同：0
> 
> 时间：2012-12-08T15:26:07.550
> 
> 标签：java, tomcat

我是第一次使用linux开发servlet/jsp。当我尝试编译一个简单的 servlet 时，我得到 javax.servlet 不存在。我应该怎么办？我知道这是路径的问题，但是如何在不覆盖路径中已经存在的值的情况下纠正它。

我应该在哪里放置 .class servlet？我正在阅读的关于 servlet 的书说的是一件事，我在网上找到了其他内容。我不想弄乱设置。我发现在线海报建议在 /usr/share/tomcat6/webapp 下创建一个文件夹并将所有 .class 移到那里，它无需任何进一步设置即可工作。这是真的？

非常感谢你，迈克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-04T12:55:21.127

为避免此编译错误，1\. 复制 jar 文件：tomcat\common\lib\servlet-api.jar 或 tomcat\lib\servlet-api.jar 2\. 将其粘贴到 Program Files\Java\jdk1.6.0_10\jre \lib\ext

/// 您的安装路径可能略有不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T15:30:16.120

您是否已将 servlet-api.jar 添加到您的类路径中？如果没有，这个 jar 应该存在于你的类路径中，以便与 servlet 一起使用。

# php - 使用 preg_match_all 在 php 中搜索一个值

> ID：13778888
> 
> 赞同：0
> 
> 时间：2012-12-08T15:27:17.413
> 
> 标签：php, pcre, preg-match-all

我有一个字符串：

```
<li><a href="http://www.site.tv/watch/some-text-english-subbed-dubbed-online/" title="title">title</a></li><div class="clear"></div></ul><h3><a name="dot">.dot</a></h3><ul><li><a href="http://www.site.tv/watch/searched-too-some-words-english-subbed-dubbed-online/" title="title2">title22</a></li> 
```

我想用 preg_match_all 找到“some-text”和“searched-too-some-words”。但它不适用于这个

```
preg_match_all('/http\:\/\/www\.site\.tv\/watch\/([^-]*)-english[^\/]*/s', $var, $result, PREG_PATTERN_ORDER); 
```

$result 什么都不是

或者

```
preg_match_all('/http\:\/\/www\.site\.tv\/watch\/(.*)-english[^\/]*/s', $var, $result, PREG_PATTERN_ORDER);

$result will be: http://www.site.tv/watch/some-text-english-subbed-dubbed-online/" title="title">title</a></li><div class="clear"></div></ul><h3><a name="dot">.dot</a></h3><ul><li><a href="http://www.site.tv/watch/searched-too-some-words-english-subbed-dubbed-online 
```

有没有办法在“http://www.site.tv/watch/”之后找到这个词，直到“-english”

问候基督徒

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T15:30:50.410

我假设您要将 url 与 word 之前的文本匹配`english`。

尝试

```
preg_match_all('/http\:\/\/www\.site\.tv\/watch\/(.*?)-english[^\/]*/s', $var, $result, PREG_PATTERN_ORDER); 
```

实际上，您不需要转义冒号`:`。更好的是，您可以使用其他东西作为分隔符，正如 Asad 的评论所说

```
preg_match_all('|http://www\.site\.tv/watch/(.*?)-english[^/]*|s', $var, $result, PREG_PATTERN_ORDER); 
```

那`.*?`是一个惰性匹配 - 使`.`匹配尽可能少的字符，直到找到下一个匹配/令牌，在你的情况下是`-english`

# rsync - rsync：--size-only 和--ignore-times 之间的区别

> ID：13778889
> 
> 赞同：133
> 
> 时间：2012-12-08T15:27:19.160
> 
> 标签：rsync

我试图了解两个选项之间的区别

```
rsync --size-only 
```

和

```
rsync --ignore-times 
```

据我了解，默认情况下 rsync 会比较时间戳和文件大小，以决定是否应该同步文件。上述选项允许用户影响此行为。

这两种选择似乎，至少在口头上会导致相同的结果：**仅按大小比较**。

我在这里错过了一些微妙的东西吗？

* * *

## 回答 #1

> 赞同：126
> 
> 时间：2012-12-08T16:18:52.593

rsync 比较文件有几种方法——权威来源是 rsync 算法描述：[https](https://www.andrew.cmu.edu/course/15-749/READINGS/required/cas/tridgell96.pdf) ://www.andrew.cmu.edu/course/15-749/READINGS/required/cas/tridgell96.pdf 。rsync 上的[维基百科文章](http://en.wikipedia.org/wiki/Rsync)也很不错。

对于本地文件，rsync 会比较元数据，如果它看起来不需要复制文件，因为源和目标之间的大小和时间戳匹配，它就不需要进一步查找。如果它们不匹配，则它是 cp 文件。但是，如果元数据确实匹配但文件实际上并不相同怎么办？然后 rsync 可能没有按照您的意图进行。

相同大小的文件可能仍然发生了变化。一个简单的示例是一个文本文件，您可以在其中更正错字——例如将“teh”更改为“the”。文件大小相同，但更正后的文件将具有更新的时间戳。`--size-only`说“不要看时间；如果大小匹配假定文件匹配”，在这种情况下这将是错误的选择。

另一方面，假设你`cp -r A B`昨天不小心做了一件大事，但你忘记保存时间戳，现在你想做反向操作`rsync B A`。你 cp'ed 的所有文件都有昨天的时间戳，即使它们昨天并没有真正修改，并且默认情况下 rsync 最终会复制所有这些文件，并将时间戳也更新为昨天。`--size-only`在这种情况下可能是您的朋友（以上面的示例为模）。

`--ignore-times`表示无论文件是否具有相同的修改时间，都要比较文件。考虑上面的拼写错误示例，但是您不仅纠正了拼写错误，而且还`touch`使纠正后的文件具有与原始文件相同的修改时间——假设您这样偷偷摸摸。即使大小和时间匹配，*也会*`--ignore-times`对文件进行比较。

 ** * *

## 回答 #2

> 赞同：94
> 
> 时间：2017-06-04T11:52:39.000

简短的回答是，它`--ignore-times`所做的比它的名字所暗示的要多。它忽略*了*时间和大小。相反，`--size-only`它完全按照它所说的去做。

* * *

长答案是，`rsync`有三种方法可以确定文件是否过时：

1.  比较源和目标的大小。
2.  比较源和目标的时间戳。
3.  比较源和目标的静态校验和。

这些检查在传输数据之前执行。值得注意的是，这意味着静态校验和不同于流校验和——后者是在传输数据时计算的。

默认情况下，`rsync`仅使用 1 和 2。 1 和 2 可以通过单个 一起获取`stat`，而 3 需要读取整个文件（这与读取文件进行传输无关）。假设只指定了一个修饰符，这意味着以下内容：

*   通过使用`--size-only`，仅执行 1 - 忽略时间戳和校验和。除非文件两端的大小相同，否则将复制文件。

*   通过使用`--ignore-times`，不会执行 1、2 或 3。始终复制文件。

*   通过使用`--checksum`，*除了*1 之外还使用了 3，但*不*执行 2。除非大小和校验和匹配，否则将复制文件。仅当大小匹配时才计算校验和。

* * *

## 回答 #3

> 赞同：53
> 
> 时间：2014-10-16T15:25:43.343

您错过了 rsync 也可以通过校验和比较文件。

`--size-only`意味着 rsync 将跳过大小匹配的文件，即使时间戳不同。这意味着它将同步比默认行为更少的文件。它会错过任何不影响整体文件大小的更改的文件。如果您有一些东西可以在不更改文件的情况下更改文件的日期，并且您不希望 rsync 花费大量时间对这些文件进行校验和以发现它们没有更改，则可以使用此选项。

`--ignore-times`意味着 rsync 将对每个文件进行校验和，即使时间戳和文件大小匹配。这意味着它将同步比默认行为更多的文件。即使文件大小相同并且修改日期/时间已重置为原始值，它也会包括对文件的更改。校验和每个文件意味着它必须完全从磁盘读取，这可能很慢。一些构建管道会将时间戳重置为特定日期（如 1970-01-01），以确保最终构建文件可逐位重现，例如，当打包到保存时间戳的 tar 文件时。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-02-16T16:37:26.577

在 Scientific Linux 6.7 系统上，rsync 上的手册页说：

```
--ignore-times          don't skip files that match size and time 
```

我有两个内容相同但创建日期不同的文件：

```
[root@windstorm ~]# ls -ls /tmp/master/usercron /tmp/new/usercron
4 -rwxrwx--- 1 root root 1595 Feb 15 03:45 /tmp/master/usercron
4 -rwxrwx--- 1 root root 1595 Feb 16 04:52 /tmp/new/usercron

[root@windstorm ~]# diff /tmp/master/usercron /tmp/new/usercron
[root@windstorm ~]# md5sum /tmp/master/usercron /tmp/new/usercron
368165347b09204ce25e2fa0f61f3bbd  /tmp/master/usercron
368165347b09204ce25e2fa0f61f3bbd  /tmp/new/usercron 
```

与`--size-only`，这两个文件被认为是相同的：

```
[root@windstorm ~]# rsync -v --size-only -n  /tmp/new/usercron /tmp/master/usercron

sent 29 bytes  received 12 bytes  82.00 bytes/sec
total size is 1595  speedup is 38.90 (DRY RUN) 
```

使用`--ignore-times`，这两个文件被认为是不同的：

```
[root@windstorm ~]# rsync -v --ignore-times -n  /tmp/new/usercron /tmp/master/usercron
usercron

sent 32 bytes  received 15 bytes  94.00 bytes/sec
total size is 1595  speedup is 33.94 (DRY RUN) 
```

所以它看起来根本没有`--ignore-times`任何影响。*

# java - Jfree 图表等高线图 ColorBar 的变化值

> ID：13778893
> 
> 赞同：-3
> 
> 时间：2012-12-08T15:27:43.433
> 
> 标签：java, plot, jfreechart, contour

我下载了这个例子[http://www.java2s.com/Code/Java/Chart/JFreeChartContourPlotDemo2.htm](http://www.java2s.com/Code/Java/Chart/JFreeChartContourPlotDemo2.htm)并用我自己的方式更改 tmpDoubleYY、tmpDoubleXX、tmpDoubleZZ 中的值，但如何将值更改为 colorBar ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T16:33:06.850

我的问题是如何使用 ContourPlot 更改 colorBar (zAxis) 的范围，答案是：

```
public class Plot extends ContourPlot{

public Plot(ContourDataset dataset, ValueAxis domainAxis, ValueAxis rangeAxis, ColorBar colorBar, double colorBarMinValue, double colorBarMaxValue) {
    super(dataset, domainAxis, rangeAxis, colorBar);

    colorBar.setMaximumValue(colorBarMaxValue);
    colorBar.setMinimumValue(colorBarMinValue);
} 
```

}

# java - Java日期格式问题

> ID：13778900
> 
> 赞同：1
> 
> 时间：2012-12-08T15:29:18.880
> 
> 标签：java, date

我正在尝试使用 Java Date 类格式化一些日期。我有一些通过以前的计算得到的长值。在我开始格式化任何日期之前，我有一个长列表，它们如下所示。

```
-12345
0
12345 
```

我做了一些这样的基本格式......

```
 DateFormat df = new SimpleDateFormat("dd/MMM/yyyy HH:mm:ss");
 String formattedDate = df.format(new Date(dateNumber.longValue())); 
```

因为 Java 使用 1970 年初作为基础，所以我的预期输出类似于

```
31/Dec/1969 23:59:47
01/Jan/1970 00:00:00
01/Jan/1970 00:00:12 
```

但是我实际得到的输出是

```
31/Dec/1969 18:59:47
31/Dec/1969 19:00:00
31/Dec/1969 19:00:12 
```

我有点困惑，为什么他们都在 12 月 31 日，而不是在 12 月 31 日和 1 月 1 日之间分开。由于列表中的后两个数字是正面的，我无法弄清楚为什么日期会在之前1970\. 如果有人可以使用基本的 Java 库帮助我解决这个问题，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T15:52:31.770

您可以将数据格式对象的时区设置为 GMT：

```
df.setTimeZone(TimeZone.getTimeZone("GMT")); 
```

你应该得到你想要的。时间戳表示“自 1970 年 1 月 1 日 00:00:00 GMT 以来的毫秒数”，对于您当前的时区，结果会有所不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T15:38:29.060

您需要小心时区。看起来你是美国东部时间。日期假定为 UTC。当您打印时，您正在打印东部时间，因此您落后 5 小时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-05T02:41:44.300

其他答案是正确的但已过时。正如他们所提到的，java.util.Date 的许多不好的特性之一是它的`toString`方法在生成日期时间值的字符串表示时静默地应用您的 JVM 的当前默认时区。

# java.time

Java 8 及更高版本带有 java.time 框架。对旧的 java.util.Date/.Calendar的*巨大*改进。

## 世界标准时间

在[UTC](https://en.wikipedia.org/wiki/Coordinated_Universal_Time)的时间线上片刻，使用[`Instant`](http://docs.oracle.com/javase/8/docs/api/java/time/Instant.html)该类。java.time 有一个工厂方法[`ofEpochMilli`](http://docs.oracle.com/javase/8/docs/api/java/time/Instant.html#ofEpochMilli-long-)，方便我们在这里使用自 1970 UTC 第一时刻以来的毫秒数。但请注意，java.time 类的底层分辨率要高得多，为[纳秒](https://en.wikipedia.org/wiki/Nanosecond)而不是毫秒。

```
Instant negative = Instant.ofEpochMilli ( - 12345L );
Instant zero = Instant.ofEpochMilli ( 0L );
Instant positive = Instant.ofEpochMilli ( 12345L ); 
```

转储到控制台。

```
System.out.println ( "negative: " + negative + "  zero: " + zero + "  positive: " + positive ); 
```

> 负：1969-12-31T23:59:47.655Z 零：1970-01-01T00:00:00Z 正：1970-01-01T00:00:12.345Z

## 在一个时区

我们可以将这些`Instant`对象中的任何一个调整到[特定的时区](https://en.wikipedia.org/wiki/List_of_tz_database_time_zones)。这会产生一个[`ZonedDateTime`](http://docs.oracle.com/javase/8/docs/api/java/time/ZonedDateTime.html)对象。

您[的 UTC 偏移量](https://en.wikipedia.org/wiki/UTC_offset)似乎是`-05:00`. 所以我会为那个偏移量任意选择一个[时区。](https://en.wikipedia.org/wiki/List_of_tz_database_time_zones)[`America/Jamaica`](http://www.timezoneconverter.com/cgi-bin/zoneinfo?tz=America/Jamaica)

```
ZoneId zoneId = ZoneId.of ( "America/Jamaica" );
ZonedDateTime zdtNegative = ZonedDateTime.ofInstant ( negative, zoneId );
ZonedDateTime zdtZero = ZonedDateTime.ofInstant ( zero, zoneId );
ZonedDateTime zdtPositive = ZonedDateTime.ofInstant ( positive, zoneId ); 
```

转储到控制台。

```
System.out.println ( "zdtNegative: " + zdtNegative + "  zdtZero: " + zdtZero + "  zdtPositive: " + zdtPositive ); 
```

> zdtNegative: 1969-12-31T18:59:47.655-05:00[America/Jamaica] zdtZero: 1969-12-31T19:00-05:00[America/Jamaica] zdtPositive: 1969-12-31T19:00:12.345- 05:00[美国/牙买加]

# php - 假设有一个“日期”列和一个“名称”列，如何只获取“当前日期”之前的“名称”？

> ID：13778901
> 
> 赞同：-1
> 
> 时间：2012-12-08T15:29:23.793
> 
> 标签：php, mysql

> **可能重复：**
> [PHP SQL，查询只返回一行数据](https://stackoverflow.com/questions/9644212/php-sql-query-returns-only-one-row-of-data)

我的一个朋友被要求做一些编码。**他创建了一个 MySQL 数据库，其中包含“gameName”（VARCHAR）和“releaseDate”（日期）列。他需要从当前日期之前发布的“gameName”中获取并显示游戏名称。**

这里我使用了 MySQL 的*CURDATE()*函数来过滤掉已经发布的游戏。但问题是我必须为每个结果写一条回显线。这是糟糕的编程，其背后的逻辑非常糟糕。

```
<?php
$mysql_host="host_name";
$mysql_username="db_user";
$mysql_password="db_password";
$mysql_database="db_name";
$mysql_table="table_name";

mysql_connect("host_name", "db_user", "db_password") or die("YOLO");
mysql_select_db("db_name") or die("YOLO");

$sql = mysql_query("SELECT gameName FROM table_name WHERE CURDATE() > releaseDate");
$result = mysql_fetch_row($sql);

echo $result[0];
echo $result[1];
echo $result[2];
// and so on...?
?> 
```

结果：只显示了一条记录。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-08T15:32:31.997

首先，`mysql_*`函数已被弃用，不应再使用。我强烈推荐 PDO 库，尤其是当您要处理用户输入时。

如果您坚持使用`mysql_*`，您的代码应该看起来更像这样：

```
$result = mysql_query("your query") or die(mysql_error());
while ($row = mysql_fetch_row($result)) {
    echo $row['gameName'] . '<br />';
} 
```

不过我同意上面的评论。我建议您在过度参与之前认真阅读手册。拥有一点额外的知识可以大大提高您作为程序员的效率（更不用说代码的安全性了）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T16:22:29.797

PDO 示例，

```
 $config = array(
        'host'  => 'hostname',
        'db'    => 'db_name',
        'user'  => 'db_user',
        'pass'  => 'db_pass'
    );

    try{

        $PDO = new PDO(
            'mysql:host='.$config['host'].';dbname='.$config['db'],
            $config['user'],
            $config['pass']
        );

        $query = $PDO->query("
                    SELECT id FROM table_name WHERE CURDATE() > releaseDate"
            );
        $query->setFetchMode(PDO::FETCH_OBJ);
        while($game = $query->fetch()){
            echo $game->gameName;
        }   

    }catch(PDOException $e){
        echo $e->getMessage();
    }
    unset($PDO); 
```

# c++ - 重载运算符为友元

> ID：13778902
> 
> 赞同：1
> 
> 时间：2012-12-08T15:29:29.067
> 
> 标签：c++, friend, friend-class

我对使用这个词有一个想法`friend`，可以访问除自己的类之外的私有成员。例如，我有一个 A 类，需要在 AI 的方法中访问 B 类属性的私有方法，可以将该方法声明为友元。

但是，请参阅以下代码：

```
#include <cstdlib>

class Coord {
  private:
    int x, y;
  public:
    Coord (int i1, int i2) : x(i1), y(i2) {
    }
    friend Coord operator- (Coord const& c1, Coord const& c2) {
        return Coord(c1.x-c2.x, c1.y-c2.y);
    }
    Coord abs() {
        return Coord(std::abs(x),std::abs(y));
    }
}; 
```

作为朋友，哪些好处可能会使操作员超负荷？我真的不明白为什么有人会对它感兴趣。

我已经阅读了很多关于它的内容，但我没有一个明确的想法。

有人可以写一个我可以观察到事实的小例子吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T15:36:32.670

看看[Herb Sutters](http://www.drdobbs.com/cpp/how-non-member-functions-improve-encapsu/184401197)和 Scott Meyers 的例子：

总结如下：

第一：使运算符像 - 非成员：如果您执行 c = a - b 减号属于哪个对象？一个？乙？或没有。大多数人都不同意，因此不是会员。第二：运营商需要修改私有内容，因此你要么交朋友，要么使用getter之类的访问功能。所以大多数人都坚持朋友。

在您的具体示例中，朋友声明后紧跟定义，这是定义**全局**朋友函数的最紧凑方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T15:37:05.453

当操作符函数被实现为成员函数时，**最左边（或唯一的）操作数必须是操作符类的对象（或对对象的引用）**。如果左操作数必须是不同类或基本类型的对象，则此运算符函数必须实现为非成员函数（例如，在重载时`<<`，`>>`分别作为流插入和流提取运算符）。

`friend`如果该函数必须直接访问该类的成员`private`或该类的成员，则该非成员运算符函数可以成为该类的一个`protected`。仅当二元运算符的左操作数专门是该类的对象或一元运算符的单个操作数是该类的对象时，才调用特定类的运算符成员函数（由编译器隐式调用）。

您可能选择非成员函数来重载运算符的另一个原因是使运算符具有**可交换性**。

例如，假设我们有一个*基本类型变量*, `number`, 类型`long int`, 和一个对象`bigInteger1`, 类`HugeInteger`(一个整数可以任意大的类, 而不受底层硬件机器字大小的限制)。减法运算符 ( `-`) 产生一个临时`HugeInteger`对象作为 a`HugeInteger`和 a的差`long int`（如在表达式中`bigInteger1 - number`），或作为 a`long int`和 a的差`HugeInteger`（如在表达式中`number - bigInteger1`）。因此，我们要求减法运算符是*可交换*的（就像两个*基本类型的操作数*一样）。问题是类对象必须出现在*左边*如果要将该运算符作为成员函数重载，则为减法运算符。因此，我们还将运算符重载为非成员函数，以允许`HugeInteger`出现在减法的右侧。`operator-`处理`HugeInteger`左边的函数仍然可以是成员函数。非成员函数可以简单地交换它的参数并调用成员函数。

# sql - 为多个表创建 SQL 平均值

> ID：13778903
> 
> 赞同：1
> 
> 时间：2012-12-08T15:29:33.903
> 
> 标签：sql, oracle, charts, sum, average

我有两张表需要从...中创建平均总和

*Caravan Category M:1 Caravan*（大篷车有一个类别，类别有很多大篷车）

大篷车（**Caravan_no**，Rental_amount，annual_rent ....

大篷车类别 ( **Caravan_type_id** , caravan_type, pets ....

大篷车类别类型具有以下实体；美国经典，传统双 GRP...

我想创建一个图表，列出每个大篷车类型的平均租金金额（caravan_type 是一个静态的选择列表）

有帮手吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T18:16:52.830

您必须加入大篷车和大篷车类别表，然后找到按大篷车类型分组的平均值，例如：

```
SELECT cat.caravan_type,  AVG(Rental_amount) 
FROM Caravan c
INNER JOIN Category cat
ON c.caravan_type_id = cat.caravan_type_id
GROUP BY cat.caravan_type 
```

# c# - 如何使用 .NET Compact Framework 隐藏表单

> ID：13778907
> 
> 赞同：2
> 
> 时间：2012-12-08T15:30:27.407
> 
> 标签：c#, winforms, windows-mobile, compact-framework, hide

我正在使用安装了 Windows Mobile 6.1 的智能设备。我需要完全隐藏我的应用程序 (a `Form`)，但我无法做到这一点。我尝试调用该`Form.Hide`方法，但它没有任何效果，表单仍然是打开的、可见的和最大化的。我也尝试关注[这篇文章](http://christian-helle.blogspot.it/2007/06/programmatically-minimize-application.html)：

```
[DllImport("coredll.dll")]
static extern int ShowWindow(IntPtr hWnd, int nCmdShow);

public Form1()
{
    InitializeComponent();
    Hide();
}

public new void Hide()
{
    const int SW_MINIMIZED = 6;

    FormBorderStyle = FormBorderStyle.FixedDialog;
    WindowState = FormWindowState.Normal;
    ControlBox = true;
    MinimizeBox = true;
    MaximizeBox = true;

    // Since there is no WindowState.Minimize, we have to P/Invoke ShowWindow
    ShowWindow(this.Handle, SW_MINIMIZED);
} 
```

但没有任何影响（再次）。做这项工作的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T16:31:20.217

应用程序不需要调用`Application.Run`（这需要 Compact Framework 中的表单）来操作。如果您的应用不需要 UI，请不要创建表单。您可以从入口点创建一个状态循环、多线程以及几乎任何其他东西，`Main`而无需使用表单。`GetMessage`如果您需要处理 Windows 消息，您始终可以通过调用和自己来创建自己的消息泵`DispatchMessage`。

# android - 我的设备未在 Eclipse Android 中检测到

> ID：13778913
> 
> 赞同：2
> 
> 时间：2012-12-08T15:31:00.113
> 
> 标签：android, eclipse

（我是一个完整的新手）

之前，我使用 Windows 7 操作系统在设备上运行该应用程序并且它可以工作。但是当我搬到 vista 时它无法工作。当通过 USB 电缆将我的设备插入笔记本电脑后。笔记本电脑需要安装 cdc 抽象控制模型。当我安装设备失败。如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T15:58:47.863

我会尝试使用命令行工具（ adb devices ）查看 - 它会显示您连接的设备。如果它不存在，您将需要某个地方的一些奇怪的驱动程序（去谷歌搜索它，我使用 linux 并且不需要它们）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T16:05:38.143

您必须在您的机器中安装 USB 驱动程序软件并重新启动 eclipse

# excel - EXCEL 2010 / MS ACCESS 中的错误或功能

> ID：13778915
> 
> 赞同：0
> 
> 时间：2012-12-08T15:31:05.953
> 
> 标签：excel

我在 excel 表中使用一个函数 `=LEFT(C$,4)` 来将一些字符从一个列复制到另一个列。如果我尝试将这些文件导入 MS ACCESS，则此字段为空。没有在访问权限中找到正确从 excel 选项卡导入值的选项。该问题的任何解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T22:19:52.653

对我来说很好：将文件另存为 xls，然后将文件 - 外部数据 - 从访问中导入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T15:43:36.967

MS-Access 不喜欢表格中其他程序的公式。对于该功能，您必须在没有公式的情况下导入信息，然后在字段中执行表达式以执行相同操作。您可以通过向表中添加一个字段然后在 SQL 构建器中使用内置函数来完成“左”功能来做到这一点。这将位于内置函数 > 文本文件夹中。

# sql - 运行插入 SQL 查询

> ID：13778917
> 
> 赞同：4
> 
> 时间：2012-12-08T15:31:07.863
> 
> 标签：sql, ms-access-2007

如何在 Microsoft Access 中运行 INSERT SQL 查询？

例如：

```
INSERT INTO tbl_UserPurchase (ID, Name) Values (321, Joe) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T15:34:30.163

您需要在 SQL 中引用文字：

```
INSERT INTO tbl_UserPurchase (ID, Name) VALUES (321, 'Joe') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-08T18:39:54.900

您可以在 Access 的查询设计器中构建您的查询，然后在仍在设计视图中时，单击功能区上的“运行”。（寻找红色的解释点。）

如果要从代码中完成，可以使用`.Execute`DAO 数据库对象或 ADO`CurrentProject.Connection`对象的方法。

```
Dim strInsert As String
strInsert = "INSERT INTO tbl_UserPurchase (ID, [Name])" & vbCrLf & _
    "VALUES(321, 'Joe');"
CurrentDb.Execute strInsert, dbFailOnError 
```

但是，参数查询会更灵活（对其他用户名有用，而不仅仅是 Joe）并防止 SQL 注入。

```
Dim db As DAO.database
Dim qdf As DAO.QueryDef
Dim strInsert As String

strInsert = "INSERT INTO tbl_UserPurchase (ID, [Name])" & vbCrLf & _
    "VALUES (321, [which_user]);"
Set db = CurrentDb
Set qdf = db.CreateQueryDef("", strInsert)
' you could read the parameter value from a text box on a form,
' but this example will just hard code Joe
qdf.Parameters("[which_user]").value = "Joe"
qdf.Execute dbFailOnError 
```

还有其他方法可以给这只猫剥皮。如果所有建议都不令人满意，请向我们提供有关您希望如何以及在何处运行`INSERT`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-08T15:34:41.223

我认为 name 字段是（或**DB**`VarChar`中的某个字符串值）所以它的意思是你的查询应该是

 **```
 INSERT INTO tbl_UserPurchase (ID, Name) Values(321, 'Joe'); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-08-30T06:44:41.020

尝试这个：`INSERT INTO tbl_name VALUES (1, 'xyz')`

请让我知道，如果这对你有用。

祝你好运**

# c - C strcpy =未处理的异常：访问冲突写入位置0x00000000

> ID：13778918
> 
> 赞同：2
> 
> 时间：2012-12-08T15:31:27.553
> 
> 标签：c, strcpy

我对 strcpy 函数有疑问。使用 C。这个简单代码（如下）的要点是将字符串从数组复制到指针数组。

```
char string[20] = "ABCDEFGH\0";
char * array_of_pointers[20];

// now I want to copy string to the first available slot;

strcpy(array_of_pointers[0],string); 
```

然后 strcpy 向我抛出错误：

```
Unhandled exception: Access violation writing location 0x00000000. 
```

为什么？我知道这个问题可能很简单，但我真的不知道。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-08T15:33:44.093

目标缓冲区尚未初始化。 `array_of_pointers[0]`只是一个指针（在这种情况下基于访问冲突的错误信息）指向地址 0。您需要对其进行初始化。可能：

```
array_of_pointers[0] = malloc( strlen( string ) + 1 ); 
```

`array_of_pointers`是一个包含 20 个指针的数组。像这样定义的，该数组中的每个条目都必须在使用之前进行初始化。还要记住，如果您确实使用`malloc`（或可能`strdup`）分配内存，请使用`free`释放内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T15:42:34.213

您需要初始化 array_of_pointers ：

```
array_of_pointers[0] = malloc(strlen(string)+1); 
```

或者最好：

```
array_of_pointers[0] = strdup(string); 
```

# java - 停止运行多个实例的 Eclipse/Java

> ID：13778919
> 
> 赞同：27
> 
> 时间：2012-12-08T15:31:43.817
> 
> 标签：java, eclipse, swing, jframe

我不是 java 专家或 eclipse 专家。目前我正在做一个项目，我需要经常调试/测试。我使用 Eclipse 运行按钮。但是当我不关闭程序时，eclipse/java 会再次打开它（第二个窗口）。这是一个带有 swing jframe 的 gui 应用程序。

eclipse 或 java 中是否有一个函数可以终止以前的构建并在运行时打开新的构建？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2017-07-14T00:31:28.473

在 Eclipse Neon 中转到`Window -> Preferences -> Run/Debug -> Launching`并`Launch Operation`检查部分：

`[X] Terminate and Relaunch while launching`

[![启动时终止并重新启动](../Images/7adc241ec5d8eeaaffb41e2fb42a6bfc.png)](https://i.stack.imgur.com/Ra2I2.png)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-06-04T21:08:11.157

尝试以下方法：

1.  如果您处于调试视角，您可以右键单击正在运行的实例并单击“终止并重新启动”（您可以从 Window -> Preferences -> General -> Keys 绑定快捷方式）这对我来说效果很好。

2.  [该链接](https://stackoverflow.com/questions/321118/what-is-the-short-cut-in-eclipse-to-terminate-debugging-running)说您可以在任何方面绑定“终止并重新启动”。你可以试一试，但对我来说同样没有效果。

3.  使用此插件[https://bitbucket.org/mantis78/relaunch-plugin](https://bitbucket.org/mantis78/relaunch-plugin)（未尝试）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-06-10T05:41:15.690

在 Eclipse 中，当您运行/调试应用程序时，会创建一个新实例。有两种选择：

1.  当您运行应用程序时，它会在控制台中打开 UI/结果。因此，您必须通过单击以下之一来停止现有应用程序：![控制台视图](../Images/afb04e9ecd09dc3746691cae63d89723.png)

2.  在调试模式下，您必须这样做。![调试视图](../Images/86356188846d071322f5b1dc86738b39.png)

否则你必须在代码中处理这个。检查此线程：[如何将 Eclipse-RCP 应用程序限制为单个实例？](https://stackoverflow.com/questions/8630627/how-to-restrict-eclipse-rcp-application-to-a-single-instance)

希望这会有所帮助。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-06-10T06:56:34.957

只是添加另一个，最快的（对我来说）解决方案：

启动前，按`ctrl-F2`。

此快捷方式终止当前运行/调试的应用程序。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-06-10T07:21:54.830

我觉得问题不在于 Eclipse，而在于您实现应用程序的方式。详情请参考以下网址。如果您的应用程序在 Eclipse 之外运行，上述解决方案虽然有效，但会出现问题。每次用户启动和关闭您的应用程序时，都会启动一个新的 jvm 实例。

[退出关闭按钮](https://stackoverflow.com/questions/258099/how-to-close-a-java-swing-application-from-the-code)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-09-05T16:37:36.620

真的迟到了，但是，嘿，迟到总比没有好。初始化所有内容时使用 start()。如果您使用的是 JFrame，请使用 start(Jframe frame) 以便在手动关闭程序时自动处理。如果不是，请在手动退出程序时调用 onClose() ，否则下次将不会启动。

```
package your.package;

import java.awt.event.WindowAdapter;
import java.awt.event.WindowEvent;
import java.io.File;
import java.io.IOException;

import javax.swing.JFrame;

public class ReLaunch {
    private static boolean relaunchClose = false;
    private static File runCheck = new File("run.check");
    private static File deleteCheck = new File("delete.check");

    /**
     * Use ReLaunch to stop multiple instances
     */
    public static void start() {
        //Check to see if application is already running
        if(runCheck.exists()) {
            //Mark a request to exit the existing application
            try { deleteCheck.createNewFile(); } catch (IOException e) { e.printStackTrace(); }
            //Wait until the existing application terminates itself
            while(runCheck.exists());
            //Remove the delete request so current application doesn't terminate
            if(deleteCheck.exists()) deleteCheck.delete();
        }

        //Mark that this application is currently running
        try { runCheck.createNewFile(); } catch (IOException e) { e.printStackTrace(); }

        //Creates a new thread that checks if a new application is requesting to run
        new Thread(new Runnable() {
            public void run() {
                //Wait until delete request shows up
                while(!deleteCheck.exists());
                //Proof that the application is closed to be re-launched
                relaunchClose = true;
                //Unmarks this application as running
                if(runCheck.exists()) runCheck.delete();
                //Terminated so new application can run
                System.exit(0);
            }
        }).start();
    }

    /**
     * Same as start, but automatically handles when the frame is closed by the user by marking that no applications are running
     * @param frame JFrame which needs to be closed
     */
    public static void start(JFrame frame) {
        start();
        //Listen for when the window is manually closed
        frame.addWindowListener(new WindowAdapter() {
            public void windowClosing(WindowEvent event) {
                onClose();
            }
        });
    }

    /**
     * Marks this application as not running if it is exited manually
     */
    public static void onClose() {
         if(!relaunchClose) runCheck.delete();
    }
} 
```

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2013-06-11T17:36:36.483

just press the stop button . or close the session by exit button

# java - android BroadcastReceiver 无法按预期工作

> ID：13778921
> 
> 赞同：1
> 
> 时间：2012-12-08T15:31:52.073
> 
> 标签：java, android, android-activity, broadcastreceiver

据我所知，这应该可行。除非它没有：-/

这个想法是扩展我使用的所有 Activity 类，以包含一个 BroadcastReceiver，它在我发送 Toast 消息时会弹出它们。这种策略的最终结果是异步工作者作业可以“自己发现”这是“最高级”的形式（如果可用），然后通过 toast 向用户发布消息，尽管当**我不选择时它是异步事件的一部分(*)**将上下文作为参数传递。

> 问题：当我调用 doDemo() 时，会发生火灾事件（我 `log.d`从 doDemo() 获取）但接收事件永远不会触发。

**(*)这是必不可少的，这是整个目的**

```
public class ToastActivity extends Activity{
    private BroadcastReceiver ToastBroadCastReceiver = new BroadcastReceiver() {
        @Override
        public void onReceive( Context context, Intent intent ) {
            Toast.makeText(getApplicationContext(), intent.getAction() + " package: "+ intent.getPackage(), Toast.LENGTH_SHORT).show();
            Log.d("ToastBroadCastReceiver", "Broadcastreceiver: " + intent.getAction() + " package: "+ intent.getPackage() + " @" + System.currentTimeMillis());
        }
    };

    public void onResume() {
        super.onResume();
        registerReceiver(ToastBroadCastReceiver, new IntentFilter("com.my.domain.BROADCAST"));
    }

    public void onPause() {
        super.onPause();
        unregisterReceiver(ToastBroadCastReceiver);
    }

    public void doDemo(){
        Log.d("ToastBroadCastReceiver", "doDemo Broadcast started" );
        Intent broadCastIntent = new Intent();
        broadCastIntent.setAction( "com.my.domain.BROADCAST");
        broadCastIntent.setPackage( "well hello test!" );        
        sendBroadcast(broadCastIntent);
        Log.d("ToastBroadCastReceiver", "doDemo Broadcast sent" );
    }

} 
```

**编辑**

经过与阿里的长时间交谈，这就是我们想出的

```
public class ToastActivity extends Activity{
    private BroadcastReceiver ToastBroadCastReceiver = new BroadcastReceiver() {
        @Override
        public void onReceive( Context context, Intent intent ) {

            if (intent.getAction().equals("TOASTMESSAGE")) {
                String message = "";
                Bundle extras = intent.getExtras();
                if (extras != null)            {
                    message = extras.getString("message");
                }
                Toast.makeText(getApplicationContext(), message, Toast.LENGTH_SHORT).show();
                Log.d("ToastBroadCastReceiver", "Broadcastreceiver: " + message + "|" + intent.getAction());
            }
        }
    };

    public void ToastRegister(){
        registerReceiver(ToastBroadCastReceiver, new IntentFilter("TOASTMESSAGE"));
    }

    public void ToastDeRegister(){
        try { 
            unregisterReceiver(ToastBroadCastReceiver);     
        } 
        catch (Exception e) {
            Log.e("ToastBroadCastReceiver", e.getMessage());
        }       
    }

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        ToastRegister();
    }

    public void onResume() {
        super.onResume();
        ToastRegister();
    }

    public void onPause() {
        super.onPause();
        ToastDeRegister();
    }

    public void onDestroy() {
        super.onDestroy();
        ToastDeRegister();
    }

    public void doDemo(){
        Log.d("ToastBroadCastReceiver", "doDemo Broadcast started" );

        Intent broadCastIntent = new Intent();
        broadCastIntent.setAction("TOASTMESSAGE");
        broadCastIntent.putExtra("message","hello test message!");
        sendBroadcast(broadCastIntent);

        Log.d("ToastBroadCastReceiver", "doDemo Broadcast sent" );
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T15:36:50.587

这条线是问题 `broadCastIntent.setPackage( "well hello test!" );`

像这样编辑您的代码

```
 broadCastIntent.setPackage( "com.my.domain.BROADCAST");
 broadCastIntent.setAction( "well hello test!" ); 
```

**也替换你的这条线**

```
 registerReceiver(ToastBroadCastReceiver, new IntentFilter("com.my.domain.BROADCAST")); 
```

**有了这个**

```
 registerReceiver(ToastBroadCastReceiver, new IntentFilter("well hello test!")); 
```

**在你的 onReceive 中这样做**

```
if (intent.getAction().equals("well hello test!")) {
                Update_chat_counter(); 
```

# java - 财产 不工作

> ID：13778928
> 
> 赞同：2
> 
> 时间：2012-12-08T15:33:09.940
> 
> 标签：java, spring, session, spring-security

我想限制用户的会话数。

这是我使用的示例配置（[在此处](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/session-mgmt.html)获取）：

```
<http>
  <custom-filter position="CONCURRENT_SESSION_FILTER" ref="concurrencyFilter" />
  <custom-filter position="FORM_LOGIN_FILTER" ref="myAuthFilter" />

  <session-management session-authentication-strategy-ref="sas"/>
</http>

<beans:bean id="concurrencyFilter"
   class="org.springframework.security.web.session.ConcurrentSessionFilter">
  <beans:property name="sessionRegistry" ref="sessionRegistry" />
  <beans:property name="expiredUrl" value="/session-expired.htm" />
</beans:bean>

<beans:bean id="myAuthFilter" class=
   "org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter">
  <beans:property name="sessionAuthenticationStrategy" ref="sas" />
  <beans:property name="authenticationManager" ref="authenticationManager" />
</beans:bean>

<beans:bean id="sas" class=
 "org.springframework.security.web.authentication.session.ConcurrentSessionControlStrategy">
  <beans:constructor-arg name="sessionRegistry" ref="sessionRegistry" />
  <beans:property name="maximumSessions" value="1" />
</beans:bean>

<beans:bean id="sessionRegistry"
    class="org.springframework.security.core.session.SessionRegistryImpl" /> 
```

我没有收到任何错误，并且可以看到`SessionRegistry`. 但`maximumSessions`价值是`1`，我可以为一个用户创建 2 个会话（为此我使用了不同的浏览器）。

以下属性也没有导致任何异常：`<beans:property name="exceptionIfMaximumExceeded" value="true" />`. 我还尝试覆盖`equals()`和`hashCode()`用于 UserDetails 实现（正如这里所建议的那样[）](https://stackoverflow.com/questions/3670991/spring-security-form-login-and-concurrent-sessions)。

`maximumSessions`为什么我可以使用此值为一个用户登录两次？我应该以其他方式限制会话数吗？任何建议将不胜感激，在此先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T09:45:23.403

My bad, I didn't correctly override equals method with `EqualsBuilder`. As it's shown [here](http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/builder/EqualsBuilder.html), I had `.appendSuper(super.equals(obj))` line before actually needed comparisons, so even the same user details were different. Without this line everything's fine and I can't log in twice.

# eclipse - 安装了 WTP 但 Web -> 没有出现动态 Web 项目

> ID：13778932
> 
> 赞同：3
> 
> 时间：2012-12-08T15:33:56.870
> 
> 标签：eclipse

我安装了 WTP，但在 web 文件夹中只出现“静态 web 项目”。为什么我没有“动态网络项目”。我重新启动，卸载，我还能做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T22:51:04.627

好吧，我找到了某种解决方案...

似乎还需要一些其他组件，事实是，如果您安装完整的 ** Web、XML、Java EE 和 OSGi 企业开发 ** 而不是只安装 WTP，一切正常，并且出现“动态 Web 项目”。

# asp.net - 在 asp.net 中， 我在 asp:Gridview 标签下使用 asp:BoundField 标签。在这个标签中，我将从 sql 获取我的数据，这是我能够得到的所有数据，但我在这里面临的问题是我无法从左侧对齐它从中心开始的文本标签 所以在这里我不能应用内联样式所以我应该怎么做才能让标题文本从左边开始？ 问题是如何为盒子模型计算宽度。屏幕上的所有元素都有 4 个组件（从内到外）：内容、内边距、边框、边距。默认情况下，宽度仅包括内容。通过添加边框，顶部变得大于 200 像素。使用 chrome 中的开发人员工具，它呈现为 206px。 有两种可能的解决方案，一种是修改宽度，另一种是修改盒子模型。第一个会起作用，但很难维护。任何小的变化都会弄乱对齐方式。 更好的解决方案是使用box-sizing: border-box. 通过添加该 CSS 样式，宽度属性将包括内容、填充和边框。因此，最初的 padding 和border 环绕在外部，但使用border-box，则侵占了内部。 原文：http: //jsfiddle.net/deafcheese/Gv5BZ/ 更正（使用 boz-sizing: border-box）：http: //jsfiddle.net/deafcheese/Gv5BZ/1/ 盒子尺寸参考：http ://css-tricks.com/box-sizing/ asp.netvisual-studio-2010 4 1 回答 1 This answer is useful 0 尝试代码以应用 cssclass 并在其中应用样式 <asp:boundfield sortexpression="LastName" datafield="LastName" headertext="LastName"></asp:boundfield>于 2012-12-08T15:39:57.473 回答 Related 1 c# - 如何使用 ServiceStack.Redis 客户端向 Redis 发送任意命令？ 0 scala - 如何使用 Java API 复制文件 2 dependencies - 如何让closurebuilder添加我的文件？ 1 php - 在 PHP 文档中使用 XSL 进行 XML 样式设置 1 iphone - 从 iPhone 使用 phpMyAdmin 的问题 1 c++ - 一个模板类的朋友模板函数 1 php - 表 php/mysql 中的联合或联接中的减法 1 javascript - 如何使用 socket.io 将数据库中的更改推送到客户端？ 1 php - htaccess 和 DNS 问题，无法正确引导网站 1 mysql - 如何使用mysql从子查询中求和 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：13778933
> 
> 赞同：0
> 
> 时间：
> 
> 标签：asp.net, visual-studio-2010

我在 asp:Gridview 标签下使用 asp:BoundField 标签。在这个标签中，我将从 sql 获取我的数据，这是我能够得到的所有数据，但我在这里面临的问题是我无法从左侧对齐它从中心开始的文本标签

```
 <asp:BoundField DataField = "Foo" HeaderText = "Foo"/> 
```

所以在这里我不能应用内联样式所以我应该怎么做才能让标题文本从左边开始？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T15:39:57.473

尝试代码以应用 cssclass 并在其中应用样式

```
<asp:boundfield
        sortexpression="LastName"
        datafield="LastName"
        headertext="LastName">
          <itemstyle CssClass="product">
          </itemstyle>
      </asp:boundfield> 
```

# android - 打算修改 INSTALL_NON_MARKET_APPS 设置

> ID：13778941
> 
> 赞同：0
> 
> 时间：2012-12-08T15:34:51.730
> 
> 标签：android, android-intent, google-play

我有一个应该为此自我更新的应用程序我需要`INSTALL_NON_MARKET_APPS`启用，因此我将用户引导到设置页面以启用此选项。

问题是这个选项似乎在不同设备上的不同位置，有人可以告诉我如何根据设备、运营商、API 级别或其他任何东西以编程方式确定此设置的位置吗？

这是我目前拥有的：

```
static public void startActivityToEnableUnknownSources(Context context){
    Intent intent = new Intent(android.provider.Settings.ACTION_SECURITY_SETTINGS);
    context.startActivity(intent);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T22:57:55.453

您的问题的答案在[这里](https://stackoverflow.com/a/11649591/932307)，我引用@commonsware

欢迎设备制造商更改“设置”中项目的组织方式，我们对此无能为力。欢迎您众包设备数据库以及关键设置的位置（如“未知来源”）所在的位置，然后使用该数据库来帮助驱动您的应用程序的行为，对于那些不在数据库中的默认为 ACTION_MANAGE_APPLICATIONS_SETTINGS。然而，除此之外，我们无能为力。

# c# - WPF Datagrid-更改单击按钮所在行的背景颜色

> ID：13778944
> 
> 赞同：0
> 
> 时间：2012-12-08T15:35:09.947
> 
> 标签：c#, wpf, datagrid, background

我的 wpf 应用程序中有一个数据网格。我希望当用户单击数据网格中的任何按钮时，相应的行应该是红色的。我认为我们可以通过使用事件触发器来做到这一点，但我真的不知道如何使用它。

```
 <DataGrid x:Name="dgEmp" Grid.Row="1" AutoGenerateColumns="False" CanUserAddRows="False" >          
        <DataGrid.Columns>
        <DataGridTextColumn Header="Name" Width="*" Binding="{Binding Path=Name}"></DataGridTextColumn>
        <DataGridTextColumn Header="Age" Width="*" Binding="{Binding Path=Age}"></DataGridTextColumn>
            <DataGridTemplateColumn Header="Delete" Width="*">
                <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <Button Content="Delete selected row"></Button>                              
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>
            </DataGridTemplateColumn>
        </DataGrid.Columns>
    </DataGrid> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T15:57:43.370

您可以在每一行中设置一个颜色属性，将其绑定到行背景颜色并在 SelectedItem 更改时更改它。

```
<DataGrid.RowStyle>
    <Style TargetType="DataGridRow">
       <Setter Property="Background" Value="{Binding RowColour}" />
    </Style>
</DataGrid.RowStyle> 
```

# android - 将对象写入android的内部存储（在新目录内）

> ID：13778946
> 
> 赞同：4
> 
> 时间：2012-12-08T15:35:18.167
> 
> 标签：android, serialization, android-sdcard, outputstream, objectoutputstream

我已经看到了如何使用这种方法写入内部存储..

```
public void storeSerializedObject(MyObject theObject) {

        FileOutputStream fileOut = null;
        String fileName = theObject.getName();
        try {

            fileOut = context.getApplicationContext().openFileOutput(
                    fileName + ".ser", Context.MODE_PRIVATE);
            ObjectOutputStream out = new ObjectOutputStream(fileOut);
            out.writeObject(theObject);
            out.close();
            fileOut.close();

        } catch (IOException i) {
            i.printStackTrace();
        }

    } 
```

问题是我想将对象放在一些新的指定目录中。然后最终在该目录中搜索所有 .ser 文件，并反序列化每个对象。
所以基本上，你会怎么做？

此外，使用上述文件存储方法，有没有办法检查默认未命名位置以获取其内容中所有文件名的列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T17:20:29.133

`Context`有几种获取内部文件和目录的方法，您可能需要使用[`Context#getDir()`](http://developer.android.com/reference/android/content/Context.html#getDir%28java.lang.String,%20int%29).

`getDir("serfiles", Context.MODE_PRIVATE)`应该产生一个名为的目录
`/data/data/your.package.name/app_serfiles`

要在其中列出文件，请使用`File#list()`或`File#listFiles()`。如果您只需要特定文件，请将其与过滤器结合使用

```
private static File[] listSerFiles(Context context, String dirName) {
    File dir = context.getDir(dirName, Context.MODE_PRIVATE);
    return dir.listFiles(SER_FILTER);
}
private static final FileFilter SER_FILTER = new FileFilter() {
    public boolean accept(File file) {
        return file.isFile() && file.getName().endsWith(".ser");
    }
}; 
```

你可以像这样打开输出流

```
private static FileOutputStream getOutputStreamInDir(Context context, String dirName, String fileName) throws FileNotFoundException {
    File dir = context.getDir(dirName, Context.MODE_PRIVATE);
    File file = new File(dir, fileName);
    return new FileOutputStream(file);
} 
```

# c# - 如何为给定的字符串键入集合

> ID：13778947
> 
> 赞同：-2
> 
> 时间：2012-12-08T15:35:22.457
> 
> 标签：c#, list, recursion, set, backtracking

> **可能重复：**
> [如何获得子集的所有可能组合？](https://stackoverflow.com/questions/13765699/how-can-i-obtain-all-the-possible-combination-of-a-subset)

我正在尝试键入给定字符串的集合，例如“123”将给出 {1}{2}{3}{13}{23}{12}{123}{} 但我的代码给了我 1 1 请可以任何人告诉我为什么，请帮我解决它谢谢大家

```
using System;
using System.Collections.Generic;
using System.Linq; 
using System.Text;

namespace TestAAD
{
class Program
{
    static List<string> sets = new List<string>();
    static int len = 0;

    private static void Generte_Sets(string str, int i)
    {

        sets.Add(str[i].ToString());

        if (i < len)
            Generte_Sets(str, i + 1);
        else
        {
            for (int j = 0; j < sets.Count; j++)
                Console.Write(sets[j]);
            Console.WriteLine();
        }

        sets.Remove(str[i].ToString());  
        if (i < len)
            Generte_Sets(str, i + 1);
        else
        {
            for (int j = 0; j < sets.Count; j++)
                Console.Write(sets[j]);
            Console.WriteLine();
        }
    }

    static void Main(string[] args)
    {
        string set = "123";

        Generte_Sets(set, 0);
        len = set.Length;
        for (int i = 0; i < sets.Count; i++)
        {
            Console.WriteLine(sets[i]);
        }
    }
} 
```

}

请我需要帮助来输入我需要快速帮助的集合 谢谢大家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T15:50:37.463

```
class Program
    {
        static List<string> sets = new List<string>();
        static int len = 0;

        private static void Generte_Sets(string str, int i)
        {
            sets.Add(str[i].ToString());           

            **if (i + 1 < len)**
                Generte_Sets(str, i + 1);
            else
            {
                for (int j = 0; j < sets.Count; j++)
                    Console.Write(sets[j]);
                Console.WriteLine();
            }

            sets.Remove(str[i].ToString());          

            **if (i + 1 < len)**
                Generte_Sets(str, i + 1);
            else
            {
                for (int j = 0; j < sets.Count; j++)
                    Console.Write(sets[j]);
                Console.WriteLine();
            }
        }

        static void Main(string[] args)
        {
             string set = "123"; 
             **len = set.Length;**
             Generte_Sets(set, 0);

            for (int i = 0; i < sets.Count; i++)
            {
                Console.WriteLine(sets[i]);
            }
        }
    } 
```

# r - 将字符串转换为R中的唯一整数

> ID：13778950
> 
> 赞同：5
> 
> 时间：2012-12-08T15:36:11.210
> 
> 标签：r

我有一个这种类型的数据框

```
string1,string2,value1
string3,string1,value2
string3,string5,value3
...
... 
```

我会将 srings 转换为唯一整数：

```
1,2,value1
3,1,value2
3,5,value3
...
... 
```

我正在尝试使用 c() 运算符，它将字符串转换为唯一的整数。问题是如何管理数据框的两列。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-08T15:50:33.303

如果要将数字分配给字符串，而不是删除文本“字符串”，则可以使用具有已知级别的因子，然后强制转换为数字。

```
d <- read.csv(header=TRUE, file=textConnection("a,b,c
string1,string2,value1
string3,string1,value2
string3,string5,value3"))

l=unique(c(as.character(d$a), as.character(d$b)))

d1 <- data.frame(a=as.numeric(factor(d$a, levels=l)), b=as.numeric(factor(d$b, levels=l)), c=d$c)
> d1
  a b      c
1 1 3 value1
2 2 1 value2
3 2 4 value3 
```

请注意，选择的数值与字符串中的数字不一致，但每个字符串都有一个唯一的数字。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-08T16:36:48.243

这是一个简单的解决方案，使用`match`：

```
df <- read.csv(text="string1,string2,value1
string3,string1,value2
string3,string5,value3", header = FALSE)

cbind(sapply(df[-3], match, unique(unlist(df[-3]))), df[3])

  V1 V2     V3
1  1  3 value1
2  2  1 value2
3  2  4 value3 
```

*工作原理*：两列的值都与这些列的唯一编号向量相匹配。这将返回他们的位置。

# php - 为什么重定向uri不起作用？

> ID：13778961
> 
> 赞同：0
> 
> 时间：2012-12-08T15:37:55.267
> 
> 标签：php, facebook, redirect, uri

我的 fb 应用程序有问题，我已将路径设置为`mySite.com/facebook/appName`所有 php 文件并将其设置为使用 facebook 登录，但是当我输入字段路径`mySite.com/facebook/appName/`时，它返回 191 错误！上周一直很好用！我已经尝试了一切 `mySite.com/facebook/`，`mySite.com/`但仍然没有！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T15:42:06.207

`redirect_uri`当与站点路径不相关或不等效时，会引发 Facebook API 191 错误。

例如，如果您的站点设置为`mySite.com/myhomepage`并且您的站点设置`redirect_uri`为`mySite.com/facebook/appName`您将遇到问题。

`redirect_uri`必须相对于站点路径。这意味着它们的域必须匹配，并且您的路径`redirect_uri`必须包含站点 URL 的任何路径组件。

如果您可以发布您的 FB 应用程序配置的屏幕截图，我们或许可以提供帮助。但是，这根本不是 PHP 问题，也不是编程问题。

# html - HTML/CSS：如何使复选框在放大时放大并在缩小时缩小？

> ID：13778963
> 
> 赞同：8
> 
> 时间：2012-12-08T15:38:23.367
> 
> 标签：html, css, checkbox

我有这个简单的测试代码：

```
<html>
<head>
<style type="text/css">
    ul{
        float:left;
        margin:0;
        list-style:none;
        padding:0;
      }
</style>
    </head>
<body>
    <ul>
       <li><input type="checkbox" id="c1" class="checkBox">a</li>
        <li><input type="checkbox" id="c2" class="checkBox"/>b</li>
        <li><input type="checkbox" id="c3" class="checkBox"/>c</li>
    </ul>
    <ul>
        <li><input type="checkbox" id="c4" class="checkBox"/>d</li>
        <li><input type="checkbox" id="c5" class="checkBox"/>e</li>
           <li><input type="checkbox" id="c6" class="checkBox" />f</li>
    </ul>
    <ul>
        <li><input type="checkbox" id="c7" class="checkBox"/>g</li>
        <li><input type="checkbox" id="c8" class="checkBox"/>h</li>
        <li><input type="checkbox" id="c9" class="checkBox"/>i</li>
    </ul>
</body>
</html> 
```

结果如下：

![在此处输入图像描述](../Images/a5241414b04cf549bf9a6313e9b8ef35.png)

但是如果我缩小文本会变小但复选框保持不变

![在此处输入图像描述](../Images/31d71aa93e00492fa75655daa6141e59.png)

如果我放大文本变大但复选框保持不变

![在此处输入图像描述](../Images/c675ab8df63ff48f2bbbbf2ccd96683d.png)

是否有可能使复选框也改变它们的大小？例如与标签的大小成比例？提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T02:59:32.693

[**jsFiddle 演示**](http://jsfiddle.net/cW4Vf/)

使用 CSS3 缩放列表以及浏览器呈现的复选框！

```
.extraLarge ul {
  -moz-transform: scale(1.50);
  -webkit-transform: scale(1.50);
  -o-transform: scale(1.50);
  transform: scale(1.50);
  padding: 10px;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T02:12:28.433

您可以使用 CSS3 a 使用 :checked 选择器来完成。这样做是使用带有背景图像的样式输入。因此，当您放大/缩小时，它将与文本一起重新调整大小。不幸的是，它在 IE9 及以下版本中不起作用。

CSS：

```
.theCheckbox input {
    display: none;
}

.theCheckbox span {
    width: 20px;
    height: 20px;
    display: block;
    background: url("link_to_image");
}

.theCheckbox input:checked + span {
    background: url("link_to_checked_image");
} 
```

HTML：

```
<label for="test">Label for checkbox</label>
<label class="theCheckbox">
    <input type="checkbox" name="test"/>
    <span></span>
</label> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T20:35:17.817

您可以创建自己的复选框控件，这样您就不会依赖本机操作系统实现。当您使用常见的 html 元素创建它时，浏览器缩放将顺利进行。

有很多现有的库插件（如 jQuery）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T05:29:38.177

Firefox 具有**“纯文本”**缩放功能，与缺少此功能的 Chrome 不同。

要在 Firefox 中放大**所有内容，请****取消**选中标记并重置缩放级别。

![在此处输入图像描述](../Images/2f232b84bfd7a7aaf809f7bd1b5ce1ba.png)

对于 Chrome 浏览器，请查看具有此功能的 Zoom 插件。

# android-mapview - Google Maps Android API V2 检查设备上是否安装了 GoogleMaps

> ID：13778965
> 
> 赞同：31
> 
> 时间：2012-12-08T15:38:44.067
> 
> 标签：android-mapview, google-maps-android-api-2

使用 Google Maps Android API V2 时，我将按照[Google Play 服务设置文档](https://developer.android.com/google/play-services/setup.html)进行检查，以确保已安装 Google Play 服务，在我的主要活动中使用以下代码：

```
@Override
public void onResume()
{
      checkGooglePlayServicesAvailability();

      super.onResume();
}

public void checkGooglePlayServicesAvailability()
  {
      int resultCode = GooglePlayServicesUtil.isGooglePlayServicesAvailable(this);
      if(resultCode != ConnectionResult.SUCCESS)
      {
          Dialog dialog = GooglePlayServicesUtil.getErrorDialog(resultCode, this, 69);
          dialog.setCancelable(false);
          dialog.setOnDismissListener(getOnDismissListener());
          dialog.show();
      }

      Log.d("GooglePlayServicesUtil Check", "Result is: " + resultCode);
  } 
```

这工作正常。但是，我注意到我放置的一些较旧的 Android 手机（主要运行 2.2）缺少 GooglePlayServices 以及 Google Maps 应用程序本身。

LogCat 会报这个错误：Google Maps Android API: Google Maps application is missing。

**问题**- 我如何执行与上述类似的检查以检查设备上 Google 地图的可用性？其次，如果用户已经安装了谷歌地图，我认为检查需要确保他们安装的版本与 Android Maps API V2 兼容。

**更新** 这是我的 setupMapIfNeeded() 方法，它在 onCreate() 结束时调用。这是我想我想确定是否安装了谷歌地图并提醒用户的地方，请参阅 else 块：

```
private void setUpMapIfNeeded() 
{
    // Do a null check to confirm that we have not already instantiated the map.
    if (mMap == null) 
    {
        // Try to obtain the map from the SupportMapFragment.
        mMap = ((SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.basicMap)).getMap();

        if (mMap != null) 
        {
            mMap.setLocationSource(this);

            mMap.moveCamera(CameraUpdateFactory.newLatLngZoom(new LatLng(44.9800, -93.2636), 10.0f));
            setUpMap();
        }
        else
        {
            //THIS CODE NEVER EXECUTES - mMap is non-null even when Google Maps are not installed
            MapConstants.showOkDialogWithText(this, R.string.installGoogleMaps);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-12-09T17:35:21.847

好吧，经过更多的戳戳和刺激，我意识到我只需要询问 PackageManager 是否安装了谷歌地图。IMO 这应该真正包含在 Google Maps Android API V2 开发人员指南中……会有很多开发人员错过这个案例并让用户感到沮丧。

以下是如何检查是否已安装 Google 地图，如果未安装，则将用户重定向到 Google 地图的 Play 商店列表（请参阅`isGoogleMapsInstalled()`）：

```
private void setUpMapIfNeeded() {
    // Do a null check to confirm that we have not already instantiated the map.
    if (mMap == null) 
    {
        // Try to obtain the map from the SupportMapFragment.
        mMap = ((SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.basicMap)).getMap();

        if(isGoogleMapsInstalled())
        {
            if (mMap != null) 
            {
                setUpMap();
            }
        }
        else
        {
            Builder builder = new AlertDialog.Builder(this);
            builder.setMessage("Install Google Maps");
            builder.setCancelable(false);
            builder.setPositiveButton("Install", getGoogleMapsListener());
            AlertDialog dialog = builder.create();
            dialog.show();
        }
    }
}

public boolean isGoogleMapsInstalled()
{
    try
    {
        ApplicationInfo info = getPackageManager().getApplicationInfo("com.google.android.apps.maps", 0 );
        return true;
    } 
    catch(PackageManager.NameNotFoundException e)
    {
        return false;
    }
}

public OnClickListener getGoogleMapsListener()
{
    return new OnClickListener() 
    {
        @Override
        public void onClick(DialogInterface dialog, int which) 
        {
            Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse("market://details?id=com.google.android.apps.maps"));
            startActivity(intent);

            //Finish the activity so they can't circumvent the check
            finish();
        }
    };
} 
```

我用这些细节写了一篇简短的博客文章：[如何检查是否安装了谷歌地图并将用户重定向到 Play 商店](http://discgolfsoftware.wordpress.com/2012/12/09/check-if-google-maps-are-installed-on-android-if-not-direct-user-to-the-play-store/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-05-08T01:39:55.253

[来自谷歌指南](https://developers.google.com/maps/documentation/android-api/intents#intent_requests)

```
if (mapIntent.resolveActivity(getPackageManager()) != null) {
    ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T14:30:05.573

您可以通过调用 MapFragment.getMap() 或 MapView.getMap() 方法并检查返回的对象是否不为空来验证 GoogleMap 是否可用。

> 公共谷歌地图 getMap()
> 
> 谷歌地图。如果片段的视图尚未准备好，则为 Null。如果片段生命周期尚未通过 onCreateView(LayoutInflater, ViewGroup, Bundle) 可能会发生这种情况。如果 Google Play 服务不可用，也会发生这种情况。如果之后 Google Play 服务可用，并且 Fragment 已通过 onCreateView(LayoutInflater, ViewGroup, Bundle)，再次调用此方法将初始化并返回 GoogleMap。

您可以在此处阅读有关[验证地图可用性的信息](https://developers.google.com/maps/documentation/android/map#verify_map_availability)。

# javascript - 通过 chrome 扩展检查 cookie 是否存在

> ID：13778966
> 
> 赞同：1
> 
> 时间：2012-12-08T15:38:51.353
> 
> 标签：javascript, json, google-chrome

清单摘录：

```
 "permissions": [
    "tabs",
    "cookies",
    "*://*/*"
   ] 
```

我在 Popup.js 上尝试过的代码（没有用）：

```
function getCookie(name) {
var dc = document.cookie;
var prefix = name + "=";
var begin = dc.indexOf("; " + prefix);
if (begin == -1) {
    begin = dc.indexOf(prefix);
    if (begin != 0) return null;
}
else
{
    begin += 2;
    var end = document.cookie.indexOf(";", begin);
    if (end == -1) {
    end = dc.length;
    }
}
return unescape(dc.substring(begin + prefix.length, end));
} 

function doSomething() {
var myCookie = getCookie("TestCookie");

if (myCookie == null) {
document.write("<p>unable to load</p>");
throw "stop execution";
}
else {
document.write("<p>loaded</p>");
    // do cookie exists stuff
}
} 
```

我收集到 chrome 扩展不支持完整的 java，但我不确定。我该如何处理这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-30T17:33:44.730

从您的问题中不清楚您想要获得哪些 cookie。如果您在扩展程序中设置 cookie，您可以通过它访问它，`document.cookie`但这不是在扩展程序中保存持久信息的正确方法，因为有更好的东西，例如`localStorage`or `chrome.storage`。但是，如果您需要在扩展中获取站点 cookie，最好的方法是这样的：

```
chrome.cookies.get({ url: 'http://example.com', name: 'somename' },
  function (cookie) {
    if (cookie) {
      console.log(cookie.value);
    }
    else {
      console.log('Can\'t get cookie! Check the name!');
    }
}); 
```

不要忘记在清单中包含权限：

```
"permissions": [
  "cookies",
  "*://*.example.com/*"
] 
```

# c# - BinaryWriter.Write(Int32)

> ID：13778967
> 
> 赞同：1
> 
> 时间：2012-12-08T15:38:54.690
> 
> 标签：c#, file, int32, binarywriter

我有一个包含这样的结构的文件：

```
public struct index
{
    public string word;         //30 bytes
    public int pos;             //4 bytes
}; 
```

对于这个词，我确保在写入之前将其扩展到 30 个字节，并且我按原样写入 pos，因为我知道 int32 是 4 个字节。

这是要写入文件的代码：

```
for (i = 0; i < ind.word.Length; i++)
{
   bword[i] = (byte)idx_array[l].word[i];
}
for (; i < SIZE_WORD; i++) //30
{
   bword[i] = 0;
}
bw_idx.Write(bword, 0, SIZE_WORD);
bw_idx.Write(ind.pos); 
```

代码编译并且运行良好，除了一件事： int32 没有被写入。如果我使用记事本++检查文件，我会看到 int 应该在哪里：`SOH NULL NULL NULL` 我查找了 SOH，它应该是 SOH（标题开头）：

> 该字符用于指示标题的开始，可能包含地址或路由信息。

你们中的任何人都知道为什么我的 int32 不写吗？

代码供您尝试（该文件将保存在项目的 bin 调试文件夹中）：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.IO;

namespace test_write
{
    class Program
    {
        struct enreg
        {
            public string word;
            public int pos;
        }

        const int SIZE_WORD = 30; //30 bytes
        const int SIZE_POS = 4; //4 bytes

        static byte[] bword = new byte[SIZE_WORD];        
        static byte[] bpos = new byte[SIZE_POS];

        static void Main(string[] args)
        {
            enreg enr = new enreg();

            Console.Write("word : ");
            enr.word = Console.ReadLine();
            Console.Write("\anumber : ");
            enr.pos = int.Parse(Console.ReadLine());

            FileStream fs = File.Open("temp", FileMode.Create, FileAccess.ReadWrite);
            BinaryWriter bw = new BinaryWriter(fs);

            int i = 0;
            for (i = 0; i < enr.word.Length; i++)
            {
                bword[i] = (byte)enr.word[i];
            }
            for (; i < SIZE_WORD; i++)
            {
                bword[i] = 0;
            }
            bpos = BitConverter.GetBytes(enr.pos);

            bw.Write(bword, 0, SIZE_WORD);
            bw.Write(bpos, 0, SIZE_POS);

            fs.Close();

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T16:54:46.767

`BinaryWriter`将其结果以*二进制*格式编码。如果要输出文本，请使用`StreamWriter`. 文本和字节没有直接关系。您不能将它们视为相同。

并且请不要通过将字符转换为字节来写入字符。如果您不知道为什么这是不可能的，请阅读有关字符编码的信息。这是每个程序员都需要具备的基础知识。

# json - 来自json的kendoui网格

> ID：13778968
> 
> 赞同：-2
> 
> 时间：2012-12-08T15:38:57.953
> 
> 标签：json, datagrid, kendo-ui

我得到这个代码的空网格：

```
<div id="grid"></div>
 <script>

$(document).ready(function () {

  var crudServiceBaseUrl = '/api/notes/';

  GridDataSource = new kendo.data.DataSource({
    transport: {
      read: crudServiceBaseUrl,
    },
  });

  $("#grid").kendoGrid({
    dataSource: GridDataSource.rows,
    navigatable: true,
    pageable: true,
    height: 300,
    toolbar: ["create", "save", "cancel"],
    columns: [
      { field: "id", title: "ID", width: 150 },
      { field: "name", title: "Book", width: 150 },
      { field: "author", title: "Author", width: 100 },
      { command: "destroy", title: "&nbsp;", width: 110 }
    ],
    editable: true
  });
});
 </script>
</div> 
```

JSON就像：

```
{"total": 6, "rows": [{"id": "AA", "name": "Foo", "author": "Bar"}, ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T18:59:12.257

[您可以在第一个Grid-Binding to remote data](http://demos.kendoui.com/web/grid/remote-data.html)上观看 kendo ui 网格使用的示例。接下来你必须阅读[kendo ui docs](http://docs.kendoui.com/)。对于此示例，它需要为存储数据的 dataSource 定义字段。只需在传输后添加模式声明...并扩展传输参数：

```
 GridDataSource = new kendo.data.DataSource({
    transport: {
      read: {
         url: crudServiceBaseUrl, 
         dataType: "json"
      }
    },
    schema:{
        data: "rows"
    }
  }); 
```

# java - 序列化到 json 响应时避免休眠延迟初始化异常的更好方法

> ID：13778970
> 
> 赞同：4
> 
> 时间：2012-12-08T15:39:17.143
> 
> 标签：java, json, spring, hibernate

这是参考[我一个月前提出的一个问题](https://stackoverflow.com/questions/13354766/avoid-hibernate-lazy-initialization-exception)。

[在这个问题](https://stackoverflow.com/questions/13354766/avoid-hibernate-lazy-initialization-exception)中，避免json序列化时出现惰性初始化异常的答案是将导致惰性初始化异常的变量设置为null。但是考虑一下当类有很多依赖时。现在随着代码库的增长，每次我都必须将 null 设置为代码中任何地方的麻烦变量，以避免 json 序列化问题。当代码库很大时，该方法看起来不整洁。

下面显示的示例代码看起来不太好。

```
//setting some variables to avoid lazy init exception in jackson mapper serialization
batch.setEnrollmentList(null);
List<BatchSchedule> scheduleList = (ArrayList<BatchSchedule>) batch.getBatchScheduleList();

            for (BatchSchedule batchSchedule : scheduleList) {
                batchSchedule.setBatch(null);
            }
            batch.getLecturer().setBatchList(null);
            batch.getLecturer().setSubjectList(null);
            batch.getSubject().setBatchList(null);
            batch.getSubject().setLecturerList(null); 
```

你能否建议我一个更好的方法来处理这个问题。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T15:53:43.033

您可以注释惰性属性，`@JsonIgnore`以便杰克逊在序列化时忽略它。

# ios - 在 UITabBarController 中使用 UINavigationController 时无法返回

> ID：13778971
> 
> 赞同：0
> 
> 时间：2012-12-08T15:39:19.840
> 
> 标签：ios, uinavigationcontroller, uitabbarcontroller

我有一个包含 UINavigationControllers 的 UITabBarController，它的根视图是 UIViewController（命名为 V1），在导航堆栈中，另一个 UIViewController（命名为 V2）被推送。问题是，V1中的事件发生后，V2出来OK，然后V2就可以弹出了。再次执行此操作时，在 V1 中的事件发生后，V2 出来 OK，当按下后退按钮时，V2 不会消失，认为 UINavigationBarItem 中的标题已更改。

任何人都知道为什么？

# ruby-on-rails - Ruby on Rails 显示从两个日期时间字段计算的小时数

> ID：13778974
> 
> 赞同：1
> 
> 时间：2012-12-08T15:39:56.457
> 
> 标签：ruby-on-rails

我有一个包含`starts_at:datetime`and的表`ends_at:datetime`。

在索引视图中，我想显示两个日期时间字段之间的小时数。

我该怎么做？

提前致谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T15:43:58.223

这取决于您期望的格式。您可以使用[`distance_of_time_in_words`](http://api.rubyonrails.org/classes/ActionView/Helpers/DateHelper.html#method-i-distance_of_time_in_words)例如

如果您需要两个日期之间的小时数：

```
((foo.ends_at - foo.stars_at) / 1.hour).to_i 
```

# playframework - Play Framework 2.0.4 和 BoneCP - 那么如何避免连接泄漏？

> ID：13778978
> 
> 赞同：2
> 
> 时间：2012-12-08T15:40:12.933
> 
> 标签：playframework, playframework-2.0, bonecp, connection-leaks

我的应用程序中只有一个地方使用了连接。
它看起来像这样：

```
Connection conn = Db.getConnection();
try
{
    // do some job
}
finally
{
    conn.close();
} 
```

所以，连接总是关闭的。
但是一段时间后，**我总是得到**比bonecp配置中定义的更多的连接......

**问题：**
**这个问题有明确的解决方案吗？**
也许我应该尝试玩框架 2.1？

**我真的无法理解有些人如何毫无问题地使用该框架......**

**配置：**

```
db.default.autocommit=true
db.default.isolation=READ_COMMITTED

db.default.partitionCount=3
db.default.minConnectionsPerPartition=6
db.default.maxConnectionsPerPartition=12
db.default.acquireIncrement=1

db.default.acquireRetryAttempts=5
db.default.acquireRetryDelay=50 毫秒

db.default.connectionTimeout=50 毫秒
db.default.idleMaxAge=3 分钟

db.default.idleConnectionTestPeriod=0
db.default.initSQL="SELECT 1"

db.default.logStatements=true
db.default.maxConnectionAge=10 分钟

db.default.releaseHelperThreads=0

```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T11:25:09.477

另请查看 poolThreshold 参数。默认情况下，这设置为所有连接的 20%（在版本 < 0.8 中，我从 0.8 及更高版本将其默认为零，因为它让很多人感到惊讶）。

华莱士

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T14:40:06.083

尝试使用 BoneCP 0.8.0-rc1 并使用以下配置：

```
db.default.idleMaxAge=10 minutes
db.default.idleConnectionTestPeriod=35 seconds
db.default.connectionTimeout=20 second
db.default.connectionTestStatement="SELECT 1"
db.default.maxConnectionAge=30 minutes 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T10:38:26.000

我的理解是 conn.close() 并没有真正关闭连接。相反，它将连接释放回连接池。连接池始终尝试将 minConnections（在您的情况下，每个分区 6 个）连接到数据库。

这可能是“总是获得更多联系”的原因，但这是他们应该工作的方式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-15T02:48:49.027

在亚马逊上部署我的网站后，我一直面临同样的问题。

**试用解决方案 1**

利用

```
Connection conn = Db.withConnection(); //instead of DB.getConnection() 
```

如果这不起作用，请使用最新的 BoneCp 版本并将其添加到您的 SBT 中。（显然 BoneCP 处理连接的方式存在问题。）

```
val appDependencies = Seq(
"com.jolbox" % "bonecp" % "0.8.0-rc2-SNAPSHOT-20130712-14382677.jar",
....

val main = PlayProject(appName, appVersion, appDependencies, mainLang = JAVA).settings(
  libraryDependencies += "com.jolbox" % "bonecp" % "0.8.0-rc2-SNAPSHOT-20130712-14382677.jar" from "https://dl.dropboxusercontent.com/u/36714110/libraries/bonecp-patches/bonecp-0.8.0-rc2-SNAPSHOT-20130712-14382677.jar"
,resolvers += ... 
```

请参考提到此问题的**boneCP** [GitHub页面。](https://github.com/wwadge/bonecp/pull/10)

如果这对您有帮助，请告诉我。

# javascript - 在 Kendo Grid 客户端模板中添加换行符

> ID：13778982
> 
> 赞同：0
> 
> 时间：2012-12-08T15:40:54.053
> 
> 标签：javascript, kendo-ui

我有一个带有自定义列的 Kendo UI 网格，如下所示：

```
columns.Template(@<text></text>)
              .Width(50)
              .ClientTemplate("#= getDeleteHTML(Id, DisplayLocation) #"); 
```

它调用一个 js 函数来构建要作为表单注入的 html 以提交删除：

```
function getDeleteHTML(itemId, itemName) {
        var deleteHtml = "<form action='"+ '@Url.Action("Delete", "ManageLocations")'+"/" + itemId +"' method='post'>"
                            + "<input type='image' onclick='return confirm(\"Are you sure you wish to delete: \r\n" + itemName + "?\");' value='Delete' class='delete' src='../Images/transparent.gif'>"
                        + "</form>";
        return deleteHtml;
    } 
```

我想将确认消息分成两行。我已经尝试过 \r\n 和 @Environment.NewLine + itemName，因为我不确定在这种情况下使用的是哪个解析器（客户端或服务器）。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T20:29:05.237

您是否尝试过将确认移动到另一个功能

```
function getDeleteHTML(itemId, itemName) {
        var deleteHtml = "<form action='"+ '@Url.Action("Delete", "ManageLocations")'+"/" + itemId +"' method='post'>"
             + "<input type='image' onclick='confirmDelete(" + itemName + ")' value='Delete' class='delete' src='../Images/transparent.gif'>"
             + "</form>";
        return deleteHtml;
    }

function confirmDelete(itemName) {
   return confirm("Are you sure you wish to delete: \n" + itemName + "?");
} 
```

# javascript - Sencha Touch：如何在 JsonP 请求中设置变量

> ID：13778984
> 
> 赞同：1
> 
> 时间：2012-12-08T15:41:00.917
> 
> 标签：javascript

我是 sencha touch 2 的新手。我无法设置我的 qrCodeHtml 变量并在 JsonP 请求之外使用它。我知道除了能够设置 qrCodeHtml 变量之外，所有这些代码都有效。请帮我完成这个：

```
 onMyProfileCommand: function () {
    var api_username = "o_xxxxx";
    var api_key = "R_xxxxxxxxxx";
    var long_url = "http://google.com";
    var qrCodeHtml = '';

    Ext.data.JsonP.request({
        url: 'https://api-ssl.bitly.com/v3/shorten',
        callbackKey: 'callback',
        params: {
            login: api_username,
            apiKey: api_key,
            longUrl: long_url
        },
        success: function (result, request) {
            var shortUrl = result.data.url;
            qrCodeHtml = '<div style="font-size:15px; margin-bottom:5px;">Friends can scan this to <a href="' + shortUrl +
                             '" style="color:inherit; text-decoration:none; font-weight:bold;">view your profile!</a></div><img src="' +
                             shortUrl + '.qrcode" style="height:110px; width:110px;" />';
        }
    });

    this.getLblQrCodeHtml().setData({ QrCodeHtml: qrCodeHtml });
    Ext.Viewport.animateActiveItem(this.getProfileView(), this.slideLeftTransition);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T14:44:55.130

谢谢 Goyuix，正是我所需要的！这是解决方案：

```
 onMyProfileCommand: function () {
var api_username = "o_xxxxx";
var api_key = "R_xxxxxxxxxx";
var long_url = "http://google.com";
var controller = this;

Ext.data.JsonP.request({
    url: 'https://api-ssl.bitly.com/v3/shorten',
    callbackKey: 'callback',
    params: {
        login: api_username,
        apiKey: api_key,
        longUrl: long_url
    },
    success: function (result, request) {
        var shortUrl = result.data.url;
        var qrCodeHtml = '<div style="font-size:15px; margin-bottom:5px;">Friends can scan this to <a href="' + shortUrl +
                         '" style="color:inherit; text-decoration:none; font-weight:bold;">view your profile!</a></div><img src="' +
                         shortUrl + '.qrcode" style="height:110px; width:110px;" />';

        controller.getLblQrCodeHtml().setData({ QrCodeHtml: qrCodeHtml });
    }
});

Ext.Viewport.animateActiveItem(controller.getProfileView(), this.slideLeftTransition); 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T16:01:36.803

JsonP 请求将异步发出 - 也许您只需将最后两个语句移动到成功事件处理程序中？否则，请求将排队并发出，最后两行将在 qrCodeHtml 变量设置为您尝试生成的 HTML 之前立即发出。

您需要`this`从外部函数中捕获变量，以便在成功处理程序中使用，因此在定义其他变量的顶部附近的某个地方：

```
var that = this; 
```

然后更新您的成功处理程序以在`that`您的请求返回后使用该变量执行更新：

```
success: function (result, request) {
  var shortUrl = result.data.url;
  qrCodeHtml = '<div style="font-size:15px; margin-bottom:5px;">Friends can scan this to <a href="' + shortUrl +
                         '" style="color:inherit; text-decoration:none; font-weight:bold;">view your profile!</a></div><img src="' +
                         shortUrl + '.qrcode" style="height:110px; width:110px;" />';
  that.getLblQrCodeHtml().setData({ QrCodeHtml: qrCodeHtml });
  Ext.Viewport.animateActiveItem(this.getProfileView(), this.slideLeftTransition);
    }
}); 
```

# java - Android：尝试使用 GregorianCalendar 类从 12 月 21 日开始倒计时

> ID：13778986
> 
> 赞同：1
> 
> 时间：2012-12-08T15:41:51.370
> 
> 标签：java, android

我正在尝试制作一个简单的应用程序，它将显示倒计时到 12 月 21 日。

我有以下代码

```
 GregorianCalendar gToday = new GregorianCalendar();
         GregorianCalendar gEndOfWorld = new GregorianCalendar();
         gEndOfWorld.set(2012,12,1); 
```

我的想法是减去 2 个日期。但似乎没有办法减去日期。他们有办法做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T15:47:22.507

你可以像这样计算时差

```
GregorianCalendar c1 = new GregorianCalendar();
      GregorianCalendar c2 = new GregorianCalendar();
      c1.setGregorianChange(date1);
      c2.setGregorianChange(date2);
      long differenceInMS = c1.getTimeInMillis() - c2.getTimeInMillis(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T15:47:26.253

您可以通过以下方式执行此操作

```
 GregorianCalendar gToday = new GregorianCalendar();
        GregorianCalendar gEndOfWorld = new GregorianCalendar();
        gEndOfWorld.set(2012, 12, 1);
//Add below line for your requirement satisfaction to minus 2 dates
        gToday.add(Calendar.DATE, -2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T15:50:36.883

如果你想让生活变得轻松，那么你可以使用 Joda Time 库，然后很容易地计算从今天到世界末日之间的天数。有关一些示例，请参阅[此页面](http://joda-time.sourceforge.net/faq.html#datediff)。

```
 Days d = Days.daysBetween(today, endOfWorld);
   int days = d.getDays(); 
```

# c# - 没有出现异常详细信息的 Javascript 弹出窗口

> ID：13778987
> 
> 赞同：1
> 
> 时间：2012-12-08T15:41:55.743
> 
> 标签：c#, javascript, exception, popup

我有一个 try-catch 块：

```
try{
//stuff here
}catch(Exception x){
    tran.Rollback();
    Response.Write("<script>alert('Error details: " + x + "');</script>");
    Response.Write("<script>alert('Error');</script>");
} 
```

将弹出“错误”消息，但不会弹出“错误详细信息”。我错过了什么？我试过 x.ToString(), x.Message...什么都没有...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T16:46:12.120

您可能想要序列化您放入该脚本的字符串。

```
try 
{

}
catch (Exception ex)
{
    JavaScriptSerializer ser = new JavaScriptSerializer();
    String jsSafeString = ser.Serialize(ex.Message);
    // use this string in your script.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T17:18:30.153

尝试这个

`cleanMessage`是你的`exception string`。

```
string script = string.Format("alert('{0}');", cleanMessage);
if (page != null && !page.ClientScript.IsClientScriptBlockRegistered("alert")) 
{
    page.ClientScript.RegisterClientScriptBlock(page.GetType(), "alert", script, true /* addScriptTags */);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T16:00:04.790

如果只希望在页面上打印消息，只需获取异常类的**Message属性即可**

```
try{
//stuff here
}catch(Exception x){
tran.Rollback();
Response.Write("<script>alert('Error details: " + x.Message + "');</script>");
Response.Write("<script>alert('Error');</script>"); 
```

}

# tomcat7 - Maven Tomcat 部署因非空白密码而失败

> ID：13778989
> 
> 赞同：0
> 
> 时间：2012-12-08T15:42:21.720
> 
> 标签：tomcat7, maven-3

***当密码为空***时，我可以通过 maven tomcat 插件***成功地***将我的战争部署到 tomcat ：

 *设置.xml

```
<server>
  <id>local_tomcat</id>
  <username>admin</username>
  <password></password>
</server> 
```

tomcat-users.xml

```
<role rolename="manager-gui" />
<role rolename="manager-script" />
<user username="admin" password="" roles="tomcat,admin,manager-gui,manager-script" /> 
```

但是，如果我只将密码更改为非空白（例如 foobar）并重新启动 tomcat，那么我将无法再部署：

```
[ERROR] Failed to execute goal org.codehaus.mojo:tomcat-maven-plugin:1.1:deploy (default-cli) on project myapp: Cannot invoke Tomcat manager: Server returned HTTP response code: 401 for URL: http://localhost:8080/manager/html/deploy?path=%2Fmyapp&war= -> [Help 1] 
```

知道是什么原因造成的吗？

**编辑：**

我的 pom.xml 有：

```
<plugin>
  <groupId>org.codehaus.mojo</groupId>
  <artifactId>tomcat-maven-plugin</artifactId>
  <configuration>
     <server>local_tomcat</server>
     <url>http://localhost:8080/manager/html</url>
  </configuration>
</plugin> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T14:16:01.440

对我来说，它与 tomcat 7 和 Apache 的 tomcat-maven-plugin 一起使用，当使用文本管理器端点`http://localhost:8080/manager/text`( 另见[http://tomcat.apache.org/maven-plugin-2.0/](http://tomcat.apache.org/maven-plugin-2.0/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T17:08:07.917

根据[文档](http://mojo.codehaus.org/tomcat-maven-plugin/deploy-mojo.html)，如果密码为空，则不应在插件的配置块中定义服务器标签。

此外，我建议使用[Apache 的 tomcat-maven-plugin](http://tomcat.apache.org/maven-plugin-2.0/)*

# php - preg_match 401 访问被拒绝

> ID：13778991
> 
> 赞同：1
> 
> 时间：2012-12-08T15:42:29.813
> 
> 标签：php, preg-match, http-status-code-401

我正在尝试使用 preg_match 来检查“401 访问被拒绝”，如果找到，则回显“失败”否则“正常”。我似乎无法获取正确的信息，所以我可以输出它。

```
HTTP/1.1 401 Access Denied Set-Cookie: cprelogin=no; 
HttpOnly; path=/; port=2082 Set-Cookie: 
cpsession=%3aXYBHer1OXxaqzCNVLHNR3ujtmdkZow6PYsnyE8daVUF1lq8fQBiFd7EeHJ99CK93; 
HttpOnly; path=/; port=2082 Server: cpsrvd/11.34.1.4 Content-type: text/html; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T15:44:59.290

尝试类似的东西

```
preg_match('#^HTTP\/1\.(0|1)\s401#i', $yourheaders, $match);

if(!empty($match) && !is_null($match[1])){
   echo "failed";
}else{
   echo "ok";
} 
```

得到：

```
 HTTP/1.1 500 Internal Server Error Set-Cookie: cprelogin=no;.
  HttpOnly; path=/; port=2082 Set-Cookie:.
  cpsession=%3aXYBHer1OXxaqzCNVLHNR3ujtmdkZow6PYsnyE8daVUF1lq8fQBiFd7EeHJ99CK93;.
  HttpOnly; path=/; port=2082 Server: cpsrvd/11.34.1.4 Content-type: text/html;

ok
Array
(
) 
```

401：

```
HTTP/1.1 401 Access Denied Set-Cookie: cprelogin=no; 
HttpOnly; path=/; port=2082 Set-Cookie: 
cpsession=%3aXYBHer1OXxaqzCNVLHNR3ujtmdkZow6PYsnyE8daVUF1lq8fQBiFd7EeHJ99CK93; 
HttpOnly; path=/; port=2082 Server: cpsrvd/11.34.1.4 Content-type: text/html;

failed
Array
(
    [0] => HTTP/1.1 401
    [1] => 1
) 
```

# html - 使用 CSS 为屏幕阅读器隐藏内嵌文本会影响 SEO 吗？

> ID：13778993
> 
> 赞同：3
> 
> 时间：2012-12-08T15:42:35.833
> 
> 标签：html, seo, web-crawler, googlebot, text-indent

我真的很喜欢一种做法，因为它对可访问性和使用屏幕阅读器的人来说非常有用，但我想知道谷歌是否可以认为这*是“试图愚弄他”*并将我列入黑名单？这是我的例子：当我创建一个公司名称的徽标时，我真的很喜欢这样做：

```
<h1>
  <a href="index.php">
    <img src="my_cool_logo.png" alt="Coolness Inc Logo" />
    COOLNESS INC
  </a>
</h1> 
```

然后，我会`text-indent: -9999px;`在我的 CSS 中将文本推出屏幕，但使用屏幕阅读器的人将能够阅读它......你怎么看？不好或好的做法，我可以为此被列入黑名单吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T15:58:32.460

**简短的回答：**是的，这不是一个好习惯。

**长答案：**屏幕阅读器确实会阅读`ALT`标签；因为这主要是该`ALT`属性包含在标签中的原因。[查看更多](http://accessibility.psu.edu/imageshtml)。

到目前为止，Googlebot 不解析 CSS 和 Javascript。它可能开始提取所有相关文件并研究页面呈现的那一天可能不远了。我发现了一篇有趣的文章（[当 Google 理解 CSS 文件时](http://www.webmasterworld.com/google/3190999.htm?highlight=msg3192672)）不久前讨论了这种可能性。所以你不是唯一一个这样想的人.. :)

> Google 可以像浏览器一样开始简单地查询网站，然后解析对象模型。当 Google 实际“查看”它们时，您的页面将如何排名？

垃圾邮件发送者通常会在 HTML 中放置许多热门关键字，以帮助提高他们的搜索排名，但通过 CSS 巧妙地向用户隐藏这些关键字转储。**Googlebot 足够聪明，可以检测到此类转储，并对此类网站进行处罚。**所以是的，Googlebot 可以在一定程度上理解 CSS（我绝不打算质疑 Google 的伟大思想和 Googlebot 的能力 :)）

所以我会很累，不要过度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T18:52:07.117

在这种情况下，您不需要添加和隐藏文本，因为这就是该`alt`属性的用途。屏幕阅读器会读取公司名称两次。

但是，您应该更改`alt`属性的内容。“Coolness Inc Logo”*不是*图像内容的描述。您应该改用“Coolness Inc”（不带“徽标”）。

在其他情况下，可能会使用这种文本隐藏技术（或类似的技术，如 using `clip`），但您不应*滥用*它。如果您只是将它用于几个小句子（帮助文本、图像替换等），那么任何搜索引擎都不应该有惩罚的理由。