# StackOverflow 问答 14287000-14287999

# amazon-web-services - Amazon Web Services：令牌自动售货机（匿名/身份）加密

> ID：14287000
> 
> 赞同：4
> 
> 时间：2013-01-11T21:34:07.113
> 
> 标签：amazon-web-services, token

基本上，我想知道如果通信是通过 HTTPS，为什么所有额外的加密步骤？

IE。对于身份：

用户进行身份验证，通过 HTTPS 为该用户提供一个身份令牌，他们可以使用他们来执行您允许的任何操作。如果他们行为不端，我可以撤销权利并禁止该帐户使用未来的代币。

IE。对于匿名：

好吧，如果我要给匿名代币，我们真的不应该让他们做任何可能有害的事情……只要给他们代币并希望他们不要滥用它。如果检测到滥用行为，只需撤销权利并通过 IP 将其列入黑名单（我的意思是那真的是我当时唯一能做的事情，对吧？）。

除了我上面描述的之外，以上所有其他复杂性是什么？IE。“使用高级加密标准通过 https 传递的密钥进行加密”，“由从时间戳生成的 HMAC 哈希组成的加密签名，使用从密码派生的安全密钥”

这真的有必要吗？有什么好处？我是否还需要对令牌的使用进行主动监控，并且我是否按照我上面对行为不端的用户所描述的那样做？

资源：[http ://aws.amazon.com/articles/4611615499399490](http://aws.amazon.com/articles/4611615499399490)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-15T19:20:05.477

我在 AWS 移动开发工具包上工作。Anonymous 和 Identity TVM 旨在用作将 AWS 令牌传送到移动设备的示例参考应用程序。您应该修改 TVM 以满足您的特定需求。至少，您应该更新应用于令牌的策略，以限制移动应用程序仅访问它需要的那些 AWS 资源。正如您所提到的，在身份 TVM 中限制谁可以访问 TVM 也是正确操作 TVM 的一个关键方面。

我们添加了额外的加密层以提供更好的整体安全性。SSL 的使用是此处使用的层之一 - 它用于保护令牌本身到设备的传递，以及用于加密令牌的密钥。

请注意，一旦发行了令牌，就无法撤销它。令牌具有 1 - 36 小时的可配置时间限制，因此设置适当的策略和持续时间是 TVM 及其服务的应用程序的重要安全考虑因素。

如果有帮助，以下文章提供了一个自定义身份 TVM 的示例，其中将特定策略对象应用于令牌：

[http://aws.amazon.com/code/4598681430241367](http://aws.amazon.com/code/4598681430241367)

希望这可以帮助，

格伦

# android - Android 多行 SQLite 命令

> ID：14287005
> 
> 赞同：0
> 
> 时间：2013-01-11T21:34:23.697
> 
> 标签：android, database, sqlite

如果您有一个多行 SQLite 命令的字符串表示形式，是否有任何方法可以在不循环每个命令的情况下执行。IE`sqLiteDatabase.execSQL(statement)`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T21:54:24.583

您必须分别调用每个命令。
我假设您只是在仔细检查，但`execSQL()` [文档](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#execSQL%28java.lang.String%29)非常清楚：

> **参数**
> *sql* 要执行的 SQL 语句。不支持以分号分隔的多个语句。

* * *

[`rawQuery()`](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#rawQuery%28java.lang.String,%20java.lang.String%5b%5d%29)匹配方法也是如此：

> **参数**
> *sql* SQL 查询。SQL 字符串不能是 ; 终止

# flash - 带有 Flash 的 Windows 8 应用程序

> ID：14287008
> 
> 赞同：0
> 
> 时间：2013-01-11T21:34:38.007
> 
> 标签：flash, windows-8

是否可以在 Windows 8 应用程序中加载 Flash SWF 文件？

我似乎找不到任何关于它的信息，当我尝试像在网页上一样基本上通过 default.html 加载它时，什么都没有加载。

基本上我想要做的就是加载一个预先存在的 Flash 文件，但将它包装在整个磁贴界面等中。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T22:35:07.393

假设您正在谈论 Windows Store/Metro 应用程序，答案是否定的。除非有人将 Flash 播放器的实现移植到 WinRT，否则您将无法在 Metro 应用程序中播放 swf 文件。

# ruby - 控制器中获取对象的私有方法

> ID：14287009
> 
> 赞同：0
> 
> 时间：2013-01-11T21:34:39.710
> 
> 标签：ruby, ruby-on-rails-3

```
module Api  
   class ApiController < ApplicationController

    before_filter :authenticate        
    private
      def authenticate
        #check if GET parameter
        return true if @user = User.find_by_token(params[:token])

        #check if token in header
        authenticate_or_request_with_http_token do |token, options|
           @user = User.find_by_token(token)
        end      
      end      
  end
end

module Api
  module V1
    class AdvertisementImagesController < ApiController

      def index
        @images = images
      end

      def create
        if images.create :remote_image_url=>params[:image][:remote_image_url] 
          return render :nothing => true, :status=>201
        else
          return render :nothing => true, :status=>500
        end

     private
      def images
        @user.advertisements.find(params[:advertisement_id]).images  
      end 
```

投掷

```
undefined local variable or method `images' for #<Api::V1::AdvertisementImagesController:0xb2d558d8> 
```

如果我将方法放在 ApiController 中，那么它就可以工作。

```
#in ApiControler
private        
  def images
    @user.advertisements.find(params[:advertisement_id]).images  
  end 
```

如果我将该方法放在 images_controller 中，则它会给出错误。

问题是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T21:58:39.713

你忘了结束你的方法`create`。这就是为什么红宝石会感到困惑。

# vb.net - 循环直到网页更改 - 访问被拒绝

> ID：14287010
> 
> 赞同：0
> 
> 时间：2013-01-11T21:34:56.710
> 
> 标签：vb.net

我正在尝试创建一个循环来暂停我的子程序，直到它更改页面。一旦循环应该结束（一旦到达 /get 页面），我就会不断收到“访问被拒绝”。为什么会出现这种情况？有没有更好的方法来判断您何时更改了页面？我不相信我可以有效地使用文档完成事件来完成我想做的事情。

```
'axweb.navigate("my.url.com/")

    htmldoc = axWeb.Document.frames("Frame1").document

    If htmldoc.url = "my.url.com" Then

        Do Until htmldoc.url = "my.url.com/get"  'this gives me access denied when stepping out
            My.Application.DoEvents()

            Try
                htmldoc = axWeb.Document.frames("Frame1").document

            Catch ex As Exception

            End Try

        Loop 
```

# sql - 在 SQL 中按 MONTH 分组

> ID：14287011
> 
> 赞同：5
> 
> 时间：2013-01-11T21:34:58.270
> 
> 标签：sql, db2, ibm-midrange

我正在尝试整理一个包含完整日期 YYYY-MM-DD 的表，仅提取月份信息，然后将月份组合为单独的行。

我已经尝试使用`MONTH(DATE)`带有`Group by`and命令的`Order By`命令，并且我得到了表中列出的 4 年返回的月份。我返回 48 行，列出 1-12，重复 4 次。我想按顺序获得 1-12 的 1 个回报。

这是我到目前为止的代码。

```
select MONTH(DATE) As "Month"
from DW******.SL****
Group By DATE
Order by DATE 
```

刚开始使用 SQL，所以我为这个简单的问题道歉。

如果有人可以请帮我一把。这是我要使用的 Db，`CONVERT`但它不适用于我们的服务器。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-11T21:39:07.913

你不能在你的组中使用月份（日期）吗？

```
select MONTH(DATE) As "Month"
from DW******.SL****
Group By MONTH(DATE)
Order by MONTH(DATE) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T21:41:43.203

您需要 group by `MONTH(Date)`，而不是 DATE

```
select MONTH(DATE) As "Month"
from DW******.SL****
Group By MONTH(DATE)
Order by MONTH(DATE) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T23:27:09.270

当您进入更复杂的查询时，另一种方法通常可以帮助您，这使您可以在精神上将事情分解成块（或阶段）。

它看起来像这样：

```
WITH  x as
( fullselect1)
fullselect2 
```

其中 x 指的是*fullselect1 ，而 x 在**fullselect2*中用作 FROM 表。您可以将其视为第 1 步和第 2 步，尽管优化器可以根据自己的选择完成此操作。

在你的情况下，你可以说

```
with Q as
( select MONTH(DATE) as mo, units
    from DW******.SL**** 
)
select mo, sum( units ) qty_sold
  from Q
  group by mo
  order by mo 
```

这个概念虽然在这里不是必需的，但可以很好地扩展，并且可以通过将复杂的查询分解成更容易理解的部分来帮助您编写复杂的查询。

如果您在参考手册中查看此内容（我将提供信息中心的链接），IBM 将其称为公共表表达式。[CTE]

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-06-09T20:49:07.947

如果您需要一月、二月、三月等月份，请使用以下查询

***从客户中选择 MONTHNAME (CURRENT_TIMESTAMP)；***

# objective-c - 在启用 ARC 的环境中，Objective-C 对象释放中的奇怪行为

> ID：14287015
> 
> 赞同：1
> 
> 时间：2013-01-11T21:35:48.050
> 
> 标签：objective-c, memory-management, automatic-ref-counting

问题：我看到在设置为 nil 后在静态对象上调用 dealloc 方法的顺序中出现了一些奇怪的行为。

为了说明问题，我取了一个类名BBSampleClass，它有两个方法

```
interface BBSampleClass : NSObject
+ (BBDummyObject*)getInstance; 
+ (void)cleanUp;
@end

static BBSampleClass *sInstance = nil;
@implementation BBSampleClass

+ (void)initialize
{
    sInstance = [[BBDummyObject alloc] init];
}

+ (BBDummyObject*)getInstance
{
    return sInstance;
}

+ (void)cleanUp
{
    sInstance = nil;
}

- (void)dealloc
{
    NSLog(@"BBSampleClass Object Dealloc");
}

@end 
```

在我的应用程序的某个时刻，如果我在*BBSampleClass中调用类方法****cleanUp***（它将静态实例变量*sInstance*设置为*nil*），人们会期望在执行其他语句之前立即调用它的 dealloc，因为此时没有其他对象拥有 sInstance .

 ***即执行这两个语句

```
[BBSampleClass cleanUp]
NSLog(@"After Cleanup"); 
```

应该将以下内容输出到控制台，这是正确的。

```
**2013-01-11 14:14:32.280 BBSampleCode[7781:c07] BBSampleClass Object Dealloc 
```

2013-01-11 14:14:32.280 BBSampleCode[7781:c07] 清理后**

但是，如果我尝试通过它的***getInstance***类方法检索 BBSampleClass 的对象，就像这样

```
[BBSampleClass getInstance];//do something with object 
[BBSampleClass cleanUp];  
NSLog(@"After Cleanup"); 
```

NSLog 语句的执行顺序颠倒了，即 BBSampleClass 的静态对象在执行完语句***NSLog(@"After Cleanup")***后被释放，这是错误的。

```
 **2013-01-11 14:15:43.940 BBWebView[7811:c07] After Cleanup
2013-01-11 14:15:43.940 BBWebView[7811:c07] BBSampleClass Object Dealloc** 
```

**编辑：解决方案**

将 [BBSampleClass getInstance] 移动到 @autoreleasepool { } 块中可以解决问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T22:11:41.707

`initialize`在任何其他消息之前发送到一个类，因此您从对`sTop`对象的强引用开始。

*场景#1：*

`[BBDummyObject cleanUp]`套`sTop = nil`。对该对象的最后一个强引用消失了，该对象立即被释放。

所以“Dummy Dealloc”在“After Cleanup”之前打印。

*场景#2：*

该`[BBDummyObject getInstance]`方法保留返回的对象`sTop`并将其添加到自动释放池中，如Clang ARC 文档的[3.2.3 未保留的返回值中所述。](http://clang.llvm.org/docs/AutomaticReferenceCounting.html#unretained-return-values)

`[BBDummyObject cleanUp]`套`sTop = nil`。这会破坏对对象的强引用，`sTop`并且保留计数会减少。但是保留计数仍然是正数，因此此时对象没有被销毁。

然后打印“清理后”。

当程序离开 current 的范围时`@autoreleasepool { }`，自动释放池中的所有对象都会收到一条`release`消息。您的对象的保留计数现在为零，并且该对象已被释放。

因此现在打印“Dummy Dealloc”。

一个*简化的描述*是：`[BBDummyObject getInstance]`创建一个强引用，当当前自动释放池被销毁时自动销毁。因此 `[BBDummyObject cleanUp]`不会立即销毁对象，而是在“Dummy Dealloc”之前打印“After Cleanup”。

* * *

`getInstance`由于 ARC 命名约定，返回未保留的返回值。如果您将方法重命名为`copyInstance`then ，它将返回一个 (+1) 保留值，该值不会添加到自动释放池中。例如：

```
BBDummyObject *obj = [BBDummyObject copyInstance]; // retain count of object is increased.
// do something with obj ...
obj = nil; // retain count is decreased immediately.
[BBDummyObject cleanUp]; // should dealloc object immediately. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T21:50:33.027

```
Scenario #1

[BBDummyObject cleanUp];
NSLog(@"After Cleanup");

Output #1

 Dummy Dealloc
 After Cleanup 
```

这有点直：

您调用了 cleanUp，将其设置为`nil`. 调用哪个结果`dealloc`。然后你的`NSLog`工作。***

# java - Java 数组到底是什么？它是一个对象吗？是原始人吗？

> ID：14287022
> 
> 赞同：5
> 
> 时间：2013-01-11T21:36:02.187
> 
> 标签：java, arrays

> **可能重复：**
> [数组是如何在 java 中实现的？](https://stackoverflow.com/questions/2267790/how-are-arrays-implemented-in-java)
> [为什么没有 java.lang.Array 类？如果一个java数组是一个对象，它不应该扩展对象吗？](https://stackoverflow.com/questions/8546500/why-isnt-there-a-java-lang-array-class-if-a-java-array-is-an-object-shouldnt)

我最近在考虑 Java 数组，我想知道它们到底是什么？

**他们是对象吗？**

*   您可以对它们调用 toString() （即使它只为您提供
    内存地址）
*   以下行编译`Object a = new int[5]`；

**然而，它们真的是对象吗？**

*   您通过...创建一个新数组，`new int[5]`这就像我从未见过的构造函数一样。人们会认为它会是`new Array<Integer>(5)`或类似的东西
*   如果您查看 Java API，您将找不到一个`array` 类...您会发现`Array`，但这并不是真正的数组

**它的可迭代属性是怎么回事**

*   您可以在 for each 循环中遍历一个数组，但是`iterator`我找不到任何数组方法

我认为数组只是Java 语言中直接内置的*一些特殊异常；*然而，这也提出了一个问题：为什么要对数组进行特殊处理？（为什么没有 Array API？为什么有不同类型的构造函数？）

任何关于数组真实性质的澄清将不胜感激。

PS我有几年的Java经验，所以我知道如何使用数组以及它们的作用，我只是想问它们是如何实现的以及为什么？

# sql - 在 where 子句中使用集合 sql 时的布尔值

> ID：14287024
> 
> 赞同：0
> 
> 时间：2013-01-11T21:36:24.263
> 
> 标签：sql, case, where, notin

我正在尝试在 where 中使用 Not In 和布尔变量来确定是否在集合中搜索某些东西。例如：

```
 Select
      BLAH
    FROM
      BLAH
    WHERE
      ...
      AND CASE WHEN @variable = 'false' THEN
           warningcode1 NOT IN (101,102,103) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T21:37:58.503

试试这个

```
Select
      BLAH
    FROM
      BLAH
    WHERE
      ...
      AND (@variable <> 'false' OR warningcode1 NOT IN (101,102,103)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T21:38:12.323

只需使用：

```
AND (@variable <> 'false' OR  warningcode1 NOT IN (101,102,103)) 
```

因此，警告代码1 仅在变量 = 'false' 时才重要，否则将被忽略。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T21:42:55.883

试试这个

```
AND IF( @variable = 'false' , warningcode1 NOT IN (101,102,103) , warningcode1 IN (101,102,103) ) 
```

# ruby-on-rails - 在 Devise 和 Rails 中创建仅限电子邮件的注册时遇到问题

> ID：14287026
> 
> 赞同：0
> 
> 时间：2013-01-11T21:36:29.767
> 
> 标签：ruby-on-rails, authentication, devise

我目前正在根据[有关标记为仅电子邮件注册的设计教程](https://github.com/plataformatec/devise/wiki/How-To%3a-Email-only-sign-up)建立一个项目，并且似乎遇到了一个我无法解决的特定错误。除了第 3 步找不到我添加的自定义方法（称为`confirm`. 我已经告诉 Devise 使用

```
devise_for :users, :controllers => {:confirmations => 'confirmations'} 
```

对于我的用户插件，但它忽略了我的控制器。

我有一个名为 Confirmations_controller.rb 的控制器，它包含以下代码：

```
class ConfirmationsController < Devise::ConfirmationsController
  def show
    self.resource = resource_class.find_by_confirmation_token(params[:confirmation_token])
    super if resource.confirmed? 
  end

  def confirm
    self.resource = resource_class.find_by_confirmation_token(params[resource_name][:confirmation_token])
    if resource.update_attributes(params[resource_name].except(:confirmation_token)) && resource.password_match?
      self.resource = resource_class.confirm_by_token(params[resource_name][:confirmation_token])
      set_flash_message :notice, :confirmed
      sign_in_and_redirect(resource_name, resource)
    else
      render :action => "show"
  end
end 
```

确切的错误是：

```
undefined method `confirmed?' for #<User:0x425f130> 
```

我正在使用 rails 3.2.9 版并设计 2.2.1 版

我只是在学习 rails 和 ruby​​，所以我真的希望有人可以帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T12:23:29.683

错误消息是关于`confirmed?`未定义的方法。您添加的自定义方法是`confirm`

该`confirmed?`方法由[`confirmable`设备模块添加](http://rubydoc.info/github/plataformatec/devise/master/Devise/Models/Confirmable#confirmed%3F-instance_method)

正如 Jesse 在上面的评论中提到的，为 User 类启用“confirmable”模块。

示例用户类：

```
class User < ActiveRecord::Base
  devise ..., :confirmable, ...

  ...

end 
```

# android - 如何在 Android 中获取 Youtube 用户历史记录？

> ID：14287027
> 
> 赞同：0
> 
> 时间：2013-01-11T21:36:30.583
> 
> 标签：android, youtube-api

有谁知道我如何从 Android 应用程序获取用户的视频历史记录？我一直在搜索，但找不到任何示例。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T12:49:37.607

使用新的 YouTube Data API v3，您可以获得以下用户播放列表：

*   上传的视频
*   最喜欢的视频
*   积极评价（喜欢）的视频
*   观看历史
*   稍后观看

[https://developers.google.com/youtube/v3/docs/playlists](https://developers.google.com/youtube/v3/docs/playlists)

以及以下用户活动：

*   最喜欢的
*   公告
*   评论
*   社会的
*   上传
*   播放列表项
*   推荐
*   像
*   订阅

[https://developers.google.com/youtube/v3/docs/activities](https://developers.google.com/youtube/v3/docs/activities)

我写了一篇关于如何使用 YouTube API v3 Android 的教程的文章，但是是用西班牙语写的：

[http://fuse21.blogspot.com.ar/2013/01/utilizando-youtube-data-api-v3-desde.html](http://fuse21.blogspot.com.ar/2013/01/utilizando-youtube-data-api-v3-desde.html)

我相信您可以看到代码更改并重用它们。

在教程中，我对官方示例 tasks-android-sample 进行了更改（此示例显示了任务列表..另一个服务..任务）：

[http://code.google.com/p/google-api-java-client/source/browse/tasks-android-sample/?repo=samples](http://code.google.com/p/google-api-java-client/source/browse/tasks-android-sample/?repo=samples)

我展示了如何重用该应用程序来获取用户 YouTube 活动的列表。我相信通过本教程您可以了解如何在 Android 中使用 YouTube API 来获取“用户历史记录..”

# c# - 如何在 C# windows 商店应用程序中创建共享 AppBar？

> ID：14287029
> 
> 赞同：1
> 
> 时间：2013-01-11T21:36:33.057
> 
> 标签：c#, xaml, windows-store-apps

我有一个用 C# 开发的 Windows 商店应用程序在其中我有几个页面，它们之间的导航是通过 Page.TopAppBar 完成的 我找不到创建这个栏的共享版本的方法，所以我被迫在我的所有页面中都有 xaml 和相关代码的副本。

我唯一能想到的是使用后面的代码动态创建它，我可以从每个页面调用它，但如果可能的话，我宁愿保持在 Xaml 中创作的简单性，并且无论如何快速尝试都失败了，看起来像 Page.TopAppBarProperty 是只读的，不能从代码隐藏设置

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T14:14:10.970

也许这个技巧会帮助你：

[AppBar 技巧](http://silverlightguy.com/2012/03/20/windows-8-metro-application-appbar-trick/)

以下是如何从后面的代码修改 AppBar 的示例：

```
protected async override void OnNavigatedTo(NavigationEventArgs e)
   {
            rootPage =  e.Parameter as MainPage;
            bottomAppBarPnl = rootPage.FindName("bottomAppBar") as StackPanel;

            if(bottomAppBarPnl != null)
            {               
             // Create the button to add             
             newCust = new Button();               
             newCust.Content = "New Customer";              
             newCust.Click += new RoutedEventHandler(newCust_Click);               
            // Add the button to the AppBar               
            bottomAppBarPnl.Children.Add(newCust);

            }

        } 
```

# xna - 在屏幕 XNA 上多次绘制一个类

> ID：14287031
> 
> 赞同：-1
> 
> 时间：2013-01-11T21:36:41.863
> 
> 标签：xna, xna-4.0, spritebatch

我正在制作一个简单的破砖游戏。我有一个球桨类，我都可以在屏幕上移动。我也有一个砖类，一个砖，当它被球击中时它消失了。现在我想要屏幕上的多个砖块，而无需通过编写手动绘制它们

> spriteBatch.Draw（brickTexture，brickPosition，Color.White）；

一遍又一遍。（位置不同）。我如何多次绘制课程并且每块砖都能够在被击中时消失。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T21:41:19.863

在初始化期间，您可以创建一个数组`Brick`来包含您的积木的所有实例：

```
Brick[] bricks = new Brick[num_bricks];
for(int i=0; i<num_bricks; i++) 
    bricks[i] = new Brick(); 
```

然后你可以使用一个`foreach`循环来绘制它们：

```
foreach(Brick br in bricks) 
    spriteBatch.Draw(brickTexture, br.position, Color.White); 
```

# jquery - jQuery/Visualforce 选项卡未加载

> ID：14287032
> 
> 赞同：3
> 
> 时间：2013-01-11T21:36:56.223
> 
> 标签：jquery, jquery-ui, tabs, visualforce

我一直在旋转我的轮子并寻找答案一段时间，所以我想我会发布。

尝试将简单的 JQuery 选项卡添加到 visualforce 页面，我已经验证 jquery 和 jquery ui 正在加载。我过去做过这个，不记得是“陷阱”了。有任何想法吗？

这是我的简单代码：

```
<code>
<apex:page standardController="Account" showHeader="false" sidebar="false" standardStylesheets="false" doctype="html-5.0" cache="false">
<head>
</head><apex:includeScript value="https://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.js"/>
<apex:includeScript value="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.7/jquery-ui.js"/>
</head>
<body>

    <div id="tabs">
      <ul>
        <li><a href="#tabs-1">Nunc tincidunt</a></li>
        <li><a href="#tabs-2">Proin dolor</a></li>
        <li><a href="#tabs-3">Aenean lacinia</a></li>
      </ul>       
      <div id="tabs-1">
        <p>Content for tabs-1</p>
      </div>
      <div id="tabs-2">
        <p>Content for tabs-2</p>
      </div>
      <div id="tabs-3">
        <p>Content for tabs-3</p>
      </div>      
    </div>

</body>
<script type="text/javascript">
    jQuery.noConflict();
    jQuery(document).ready(function() {
        jQuery( "#tabs" ).tabs();
    });
</script>
</apex:page>
</code> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T21:49:41.647

我认为您可能需要更新您的 jQuery 引用。您包含的混合似乎不起作用。

将 your's 与 jQuery 1.6.4 和 jQuery UI 1.8.7 一起使用会导致所有选项卡的内容显示在所有选项卡上。

* * *

[**演示**](http://jsfiddle.net/Uwsnv/)- 使用您的参考资料，选项卡始终显示所有内容

* * *

[**尝试使用jQuery UI DEMO 页面**](http://jqueryui.com/tabs/)中使用的引用。

```
http://code.jquery.com/jquery-1.8.3.js  
http://code.jquery.com/ui/1.9.2/jquery-ui.js  
http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css 
```

* * *

[**DEMO**](http://jsfiddle.net/RxFTE/) - 使用来自 DEMO 的引用的选项卡

* * *

来自演示的 HTML：

```
<div id="tabs">
  <ul>
    <li><a href="#tabs-1">Nunc tincidunt</a>

    </li>
    <li><a href="#tabs-2">Proin dolor</a>

    </li>
    <li><a href="#tabs-3">Aenean lacinia</a>

    </li>
  </ul>
  <div id="tabs-1">
    <p>Content for tabs-1</p>
  </div>
  <div id="tabs-2">
    <p>Content for tabs-2</p>
  </div>
  <div id="tabs-3">
    <p>Content for tabs-3</p>
  </div>
</div> 
```

脚本

```
jQuery.noConflict();
jQuery(document).ready(function () {
  jQuery("#tabs").tabs();
}); 
```

# css - 浮动 li 元素：为什么它们会掩盖父 div 元素？

> ID：14287037
> 
> 赞同：0
> 
> 时间：2013-01-11T21:37:04.557
> 
> 标签：css, html

为什么我将“#header ul li”设置为**向左浮动时黄色条纹（#header）消失了；**? 为“#header ul li”设置了固定大小后，我希望 li 元素并排放置，而不是更多。3 * 100px 的宽度不足以覆盖在整个页面上水平延伸的#header。

HTML：

```
<!DOCTYPE html>
<html>
<head>

<style type="text/css">
#header {
    background: yellow;
}
#header ul {
    list-style-type: none;
}
#header ul li {
    background: pink;
    width: 100px;
    float: left; // <--- here!
}
</style>
</head>
<body>
<div id="header">
<ul>
    <li>link</li>
    <li>link</li>
    <li>link</li>

</ul>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T21:41:56.750

因为浮动元素是[从内容流中取出的：](http://www.w3.org/TR/CSS2/visuren.html#floats)

> 由于浮动不在流中，因此在浮动框之前和之后创建的非定位块框垂直流动，就好像浮动不存在一样。但是，浮动旁边创建的当前和后续行框会根据需要缩短，以便为浮动的边距框腾出空间。

您必须使用`<div style="clear:left;"></div>`才能更正此问题：

```
<div id="header">
<ul>
    <li>link</li>
    <li>link</li>
    <li>link</li>
</ul>
<div style="clear:left;"></div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T21:41:42.167

当浮动子元素时，您需要`overflow:auto;`在父元素上设置以使其扩展以覆盖它们的宽度和高度：

**[jsFiddle 示例](http://jsfiddle.net/j08691/zbkv9/)**

```
#header {
  background: yellow;
  overflow:auto;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-11T21:42:28.667

由于您通过浮动将 li 从文档流中取出，因此您必须在 ul 上设置显式高度或使用清晰的 div 将 #header 的高度“推”过 ul。

```
<div id="header">
    <ul>
    <li></li>
    </ul>
<div class="clear"></div>
</div>

.clear {clear:both;} 
```

jsFiddle [http://jsfiddle.net/QHrwZ/1/](http://jsfiddle.net/QHrwZ/1/)

# sql-server - SSIS 数据传输添加字符（SQL Server 到 Postgres）

> ID：14287038
> 
> 赞同：2
> 
> 时间：2013-01-11T21:37:07.660
> 
> 标签：sql-server, postgresql, ssis, greenplum

我创建了一个 SSIS 包，它从 SQL Server 数据库中取出地理数据并将其复制到`Greenplum`Postgres 数据库中的几何列。

由于PGNP驱动程序在以正常方式尝试时出现奇怪错误，我正在以迂回的方式进行操作。所以我正在做的是`GeogColumn.STAsText()`在 SQL Server 源上使用并将其插入到数据库中的文本列中，然后运行一个任务，使用新插入的文本`Greenplum`更新表中的几何列，例如应该看起来像.`Greenplum``POLYGON(-85 42, -86 43)`

问题是**\\000**在每个字符之后添加，然后更新将不起作用。这是它的样子：

来源 ![在此处输入图像描述](../Images/0532c05e984b989aa62256a1c2f41155.png)

目的地

![在此处输入图像描述](../Images/7f66df90dd574e5faba3477d5b69e7f8.png)

我该如何阻止这种情况发生？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T02:33:07.207

也许尝试以下（在您的 TSQL 源查询中）：

```
,CAST(geogColumn.STAsText() as varchar(max)) AS WKT_TEXT 
,geogColumn.STAsBinary() AS WKB_IMAGE 
```

我会选择第二种口味，因为它应该更有效

不确定目标列需要在 PG 端，但我怀疑 TEXT 和 IMAGE

# .htaccess - 使用 htaccess 将日期添加到 url

> ID：14287039
> 
> 赞同：-1
> 
> 时间：2013-01-11T21:37:13.947
> 
> 标签：.htaccess, url, date

我试图让 htaccess 与年份匹配，然后动态重写到页面

例如 www.website.com/party/2013 到 www.website.com/events.php?e=party

我试过

```
Options +FollowSymLinks  
RewriteCond %{SCRIPT_FILENAME} !-d  
RewriteCond %{SCRIPT_FILENAME} !-f 
RewriteCond %{REQUEST_URI} events
RewriteRule ^(\w+)/%year%$ ./events.php?e=$1 
```

但这不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T22:36:26.553

如果您检查，它将永远不会匹配，因为这是您的目标 URL 而不是您的源`REQUEST_URI`。`events`当前年份是`TIME_YEAR`和不是`year`，但`TIME_YEAR`仅在 a 中可用`RewriteCond`。您的目标 URL 以点开头，这不起作用。

放下`RewriteCond %{REQUEST_URI} events`。如果要根据当前年份检查 URL，可以在`RewriteCond`指令中执行此操作。

```
RewriteCond %{TIME_YEAR}/$2 (....)/\1
RewriteRule /(\w+)/(\d\d\d\d) /events.php?e=$1 
```

RewriteCond`current year/URL year`针对模式进行测试`(digits)/same digits as backreference`。这有点棘手，但它有效。

# python - 在 OSX 上使用格式语言的德语数字分隔符？

> ID：14287051
> 
> 赞同：15
> 
> 时间：2013-01-11T21:37:55.077
> 
> 标签：python, macos, formatting, osx-mountain-lion

### 更新：到目前为止，答案显示它似乎是 OSX 上与平台相关的错误，与特定的语言环境设置有关，因为它们不完全支持分组数字。

### 更新 2：我刚刚在 Python 的错误跟踪器上打开[了一个问题。](http://bugs.python.org/issue16944)让我们看看是否有解决此问题的方法。

* * *

我想根据德国编号约定格式化整数和浮点数。这可以使用格式语言和演示类型`n`，但在我的平台上失败了。

*   平台：OS X 10.8.2（山狮）
*   Python：2.7.3 64 位`(v2.7.3:70274d53c1dd, Apr 9 2012, 20:52:43) [GCC 4.2.1 (Apple Inc. build 5666) (dot 3)] on darwin`

例子：

*   `1234`=>`1.234`
*   `1234.56`=>`1.234,56`
*   `1000000`=>`1.000.000`

到目前为止我已经尝试过：

1.  设置德语语言环境

    ```
    import locale
    locale.setlocale(locale.LC_ALL, 'de_DE') 
    ```

2.  格式规范选项`,`仅识别英文格式。

    ```
    '{:,}'.format(1234)
    '1,234'

    '{:,}'.format(1234.56)
    '1,234.56'

    '{:,}'.format(1000000)
    '1,000,000' 
    ```

3.  根据[Python 文档](http://docs.python.org/2/library/string.html#format-specification-mini-language)，整数和浮点表示类型`n`应该做我想做的事，但事实并非如此。

    ```
     '{:n}'.format(1234)
     '1234'

     '{:n}'.format(1234.56)
     '1234,56'  # at least the comma was set correctly here

     '{:n}'.format(1000000)
     '1000000'

     '{:n}'.format(12345769.56)
     '1,23458e+07'  # it's doing weird things for large floats 
    ```

4.  受@JFSebastian启发的更多示例和比较：

    ```
    for n in [1234, 1234.56, 1000000, 12345769.56]:
        print('{0:,} {0:n}'.format(n))
        fmt, val = "%d %f", (n, n)
        print(fmt % val)
        print(locale.format_string(fmt, val))
        print(locale.format_string(fmt, val, grouping=True))
        print('-'*60) 
    ```

    这会在我的平台上产生以下错误结果：

    ```
     1,234 1234
        1234 1234.000000
        1234 1234,000000
        1234 1234,000000
        ------------------------------------------------------------
        1,234.56 1234,56
        1234 1234.560000
        1234 1234,560000
        1234 1234,560000
        ------------------------------------------------------------
        1,000,000 1000000
        1000000 1000000.000000
        1000000 1000000,000000
        1000000 1000000,000000
        ------------------------------------------------------------
        12,345,769.56 1,23458e+07
        12345769 12345769.560000
        12345769 12345769,560000
        12345769 12345769,560000
        ------------------------------------------------------------ 
    ```

    我没有得到的正确结果如下所示：

    ```
     1,234 1.234
        1234 1234.000000
        1234 1234,000000
        1.234 1.234,000000
        ------------------------------------------------------------
        1,234.56 1.234,56
        1234 1234.560000
        1234 1234,560000
        1.234 1.234,560000
        ------------------------------------------------------------
        1,000,000 1.000.000
        1000000 1000000.000000
        1000000 1000000,000000
        1.000.000 1.000.000,000000
        ------------------------------------------------------------
        12,345,769.56 1,23458e+07 
        12345769 12345769.560000
        12345769 12345769,560000
        12.345.769 12.345.769,560000
        ------------------------------------------------------------ 
    ```

你有一个只使用格式语言的解决方案吗？有什么方法可以欺骗我平台上的区域设置以接受分组？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-11T21:50:36.360

超级丑陋，但从技术上回答了这个问题：

来自[PEP 378](http://www.python.org/dev/peps/pep-0378/)：

```
'{:,}'.format(1234.56).replace(",", "X").replace(".", ",").replace("X", ".")
'1.234,56' 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-11T22:31:44.283

不幸的是， Python 的`locale`模块实现在不同平台之间存在很大差异。它实际上只是 C 库供应商的语言环境概念的一个轻包装。

因此，在 Windows 7 上，使用 Python 2.7.3 64 位，这恰好可以工作（注意：[语言环境在 Windows 中具有不同的名称](https://stackoverflow.com/questions/955986/what-is-the-correct-way-to-set-pythons-locale)）：

```
>>> import locale
>>> locale.setlocale(locale.LC_ALL, 'deu_deu')
'German_Germany.1252'
>>> '{0:n}'.format(1234.56)
'1.234,56' 
```

是否使用千位分隔符可以通过检查[“本地约定”](http://docs.python.org/2/library/locale.html#locale.localeconv)来确定：

```
>>> locale.localeconv()['grouping'] # On Windows, 'deu_deu'.
[3, 0] # Insert separator every three digits.

>>> locale.localeconv()['grouping'] # On OS X, 'de_DE'.
[127] # No separator (locale.CHAR_MAX == 127).

>>> locale.localeconv()['grouping'] # Default C locale.
[] # Also no separator. 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-11T22:06:43.700

当与德语语言环境一起使用时，这对我有用：

```
>>> import locale
>>> locale.setlocale(locale.LC_ALL, 'de_DE')
'de_DE'
>>> '{0:n}'.format(1234.56)
'1.234,56' 
```

这是在 Windows 7 下的 Cygwin 中：

```
>>> import sys
>>> print sys.version
2.6.5 (r265:79063, Jun 12 2010, 17:07:01)
[GCC 4.3.4 20090804 (release) 1] 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-03-13T13:40:31.030

更难看的是`split`,`join`和`replace`：

```
>>> amount = '{0:,}'.format(12345.67)
>>> amount
'12,345.67'
>>> ','.join([s.replace(',','.') for s in amount.split('.')])
'12.345,67' 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-12T20:35:47.797

@Lattyware 要求我提供我自己的解决方案，以便根据德国编号约定在不使用格式语言的情况下包含分隔符。这是我能想到的最佳解决方案：

```
import re

def group_num(num):
    if isinstance(num, (int, float)):
        if isinstance(num, float):
            head, tail = str(num).split('.')
        elif isinstance(num, int):
            head, tail = str(num), ''
        digit_parts = re.findall(r'\d{1,3}\-?', ''.join(head[::-1]))
        num = '.'.join(part[::-1] for part in digit_parts[::-1])
        if tail:
            num = ','.join((num, tail))
        return num
    else:
        raise TypeError(num, 'is not of type int or float')

>>> group_num(1234)
'1.234'
>>> group_num(123456.7890)
'123.456,789'
>>> group_num(-1000000000.12)
'-1.000.000.000,12' 
```

与@Jon-Eric 给出的解决方案相比，性能也相当不错。

```
%timeit group_num(1000000000.12)
10000 loops, best of 3: 20.6 us per loop

# For integers, it's faster since several steps are not necessary
%timeit group_num(100000000012)
100000 loops, best of 3: 18.2 us per loop

%timeit '{:,}'.format(1000000000.12).replace(",", "X").replace(".", ",").replace("X", ".")
100000 loops, best of 3: 2.63 us per loop

%timeit '{:,}'.format(100000000012).replace(",", "X").replace(".", ",").replace("X", ".")
100000 loops, best of 3: 2.01 us per loop 
```

如果您知道如何优化我的解决方案，请告诉我。

# sql-server-2008 - SQL Server 扩展事件没有较新的事件

> ID：14287054
> 
> 赞同：3
> 
> 时间：2013-01-11T21:38:08.797
> 
> 标签：sql-server-2008, extended-events

我正在查询 system_health 会话，并注意到并非所有事件都被返回。今天肯定很少有死锁，但这些不在输出中。

我遇到了[这个连接文件](https://connect.microsoft.com/SQLServer/feedback/details/433859/xe-ring-buffer-target-does-not-show-all-collected-events)，但从评论中这个问题已经在 SQL Server 2008 SP2 中得到解决。但我的版本是 SQL Server 2008 SP3 Standard。这里有更多细节。

那么这是一个错误还是我查询错误？

```
<RingBufferTarget truncated="1" eventsPerSec="31291" processingTime="209" totalEventsProcessed="6540" eventCount="1947" droppedCount="0" memoryUsed="4193813">

SELECT  TOP 1 e.event.value('(@timestamp)[1]','datetime') AS MaxDate, GETDATE() Today
FROM 
( SELECT ( SELECT 
        CONVERT(xml, target_data) 
        FROM sys.dm_xe_session_targets st 
        JOIN sys.dm_xe_sessions s ON 
        s.address = st.event_session_address 
        WHERE s.name = 'system_health' 
        AND st.target_name = 'ring_buffer' 
        )AS [x] 
        FOR XML PATH(''), TYPE 
) AS the_xml(x) 
CROSS APPLY x.nodes('x/RingBufferTarget/event') e (event) 
ORDER BY MaxDate DESC

MaxDate                     Today
2013-01-09 20:05:31.853     2013-01-11 15:22:37.887 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T20:46:06.050

可能两者都不是，因为您仍然可以使用 max_memory 的 4MB ring_buffer 配置来达到 8MB XML 限制，这是默认设置。您还可能在扩展事件中遇到了一个不同的错误，它导致时间戳被错误地报告，我在这里写过博客：

[扩展事件中的事件时间戳不正确](http://www.sqlskills.com/blogs/jonathan/incorrect-timestamp-on-events-in-extended-events/)

了解您遇到的场景的唯一方法是将 collect_system_time 的操作添加到会话中的事件中，并将文件目标添加到会话中以捕获不受 DMV 限制的媒体中的所有事件是。我要指出的是，在 SQL Server 2012 中，system_health 会话默认配置了 file_target，因此 IMO 建议在 2008 年这样做。

# ruby-on-rails - 如何在 Rails 中为两个表之间的两种不同类型的关系设置 has_many 关系？

> ID：14287056
> 
> 赞同：1
> 
> 时间：2013-01-11T21:38:10.310
> 
> 标签：ruby-on-rails, associations, rails-activerecord

这是我的架构：

```
Participant = 
   id: int
   user_id: int
   program_id: int
   ... other fields
end

User = 
   id: int
   name: text
   ... other fields
end

Program = 
   id: int
   user_id:  int # this is the manager of the program
end 
```

所以，用英语：

*   用户就是人。
*   程序由用户管理。
*   一个程序也有一组参与者，每个参与者都是一个用户

在 Rails 中也是如此：

```
class Participant
   belongs_to :user
   belongs_to
end

class User
   has_many :programs
   has_many :participants
end

class Program
   has_many :participants
   belongs_to :user
end 
```

请注意，用户确实拥有_many 程序，他们管理的程序，以及通过参与者的has_many 程序，这是他们参与的所有程序。

我想要的是能够说：

*   a_user.manages_programs
*   a_user.participates_in_programs

所以有两种用户 has_many 程序。我需要对 :through、:as、:class 或类似的东西做一些神奇的组合，但到目前为止我还想不通。

另一个问题继续这个例子。我现在有

```
class User
  has_many :participations, class_name: "Participant"
  has_many :moderated_programs, class_name: "Program", foreign_key: 'moderator_id'
  has_many :participating_programs, through: :participations, class_name: "Program", source: :program
end

class Participant
  belongs_to :user
  belongs_to :program
end 
```

注意第三行。我想要的是利用这一系列的关联：一个参与者有一个 user_id 和一个 program_id。我希望能够说 u1.participating_programs 并获得该用户参与的一个或多个程序的列表，但上述方法不起作用。你能告诉我我在哪里吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T22:12:57.223

我同意查尔斯的观点，你有一些令人困惑的措辞/语言问题。参与可能是一个更好的术语。我不建议在这里使用多态 - 用户可能有两个不同的角色，但用户不会属于不同的类型。特别是如果经理也有可能成为参与者......

```
class User
  has_many :participations
  has_many :programs, through: :participations
  has_many :managed_programs, class_name: 'Program'
end

class Program
  belongs_to :manager, class_name: 'User'
  has_many :participations
  has_many :users, through: :participations
end

# Just a join table.  Nothing special
class Participation
  belongs_to :user
  belongs_to :program
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T21:55:43.793

首先，只是语言问题：我不认为用户有很多参与者。他*是*参与者，或者他*是*项目的经理。所以他宁愿参与很多。

你可以这样写：

```
class User
    has_many :participations, class_name: "Participant"
    has_many :managed_programs, class_name: "Program"
end 
```

此外，至少在您上面的代码中，缺少 Participant 类

```
belongs_to :user 
```

由于您似乎需要区分两种不同类型的用户，因此该`polymorphic`功能会派上用场。那么你就不需要额外的参与者表了。[见这里](http://guides.rubyonrails.org/association_basics.html#polymorphic-associations)。

# css - 为自定义硬币滑块部分填充圆圈

> ID：14287057
> 
> 赞同：0
> 
> 时间：2013-01-11T21:38:11.200
> 
> 标签：css, html, canvas

我想设计一个自定义硬币滑块，在通过特定硬币代表的特定范围的图像时，硬币的“填充”因子应该在 0 到 1 之间变化。假设范围是 10 个图像，我在第三张图片，它应该看起来像（填满的硬币代表之前已经遍历的范围，而靠近末尾的空硬币代表尚未触及的范围。从左边开始的第 6 个圆圈在这里很有趣）：

![在此处输入图像描述](../Images/f9271cf789fa2b6948b8351b91385d71.png)

如何生成这样的圆形图像？有一些可用的 CSS 技巧吗？或者也许使用 HTML5 画布？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T21:57:02.300

如果你想尽可能地使用 css，你可能想尝试设置一堆 10 个 div。如果您将边界半径设置为 50%，它们会得到圆形。然后您将所有这些设置为所选颜色的边框

如果您将前 6 个圆圈设置为特定类，并将背景颜色与该类相关联，则您将拥有实心圆圈。

# css - Windows 中锯齿状的谷歌字体和粗体的外来字符

> ID：14287060
> 
> 赞同：5
> 
> 时间：2013-01-11T21:38:17.827
> 
> 标签：css, windows, internet-explorer, fonts, font-face

我正在为我的网站使用谷歌字体[Titillium web](http://www.google.com/webfonts/specimen/Titillium+Web)。它在我的 Mac 上很漂亮，但是当我在 Windows（chrome 和 IE）上查看它并单击波兰语标志以显示波兰语文本时，波兰语字符以粗体显示（我认为它们使用不同的字体）。这些字符存在于字体中，所以我不知道它为什么不使用它们。此外，字体的边缘都是锯齿状的。

这是我的[网站](http://pen.huddersfieldwebsitedesigner.co.uk/)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T08:16:06.757

我注意到您正在使用`font-weight: 500;`谷歌字体中未包含的一些文本。这可能是锯齿状外观的原因。

# networking - 在 VMWare Fusion 中使用主机名访问来宾操作系统

> ID：14287069
> 
> 赞同：4
> 
> 时间：2013-01-11T21:39:00.343
> 
> 标签：networking, centos, vmware, hostname, cloudera

我正在使用 CentOS（Cloudera CDH3 映像）作为在我的 VMWare Fusion 中运行的来宾操作系统。一切正常，我可以使用 IP 地址通过我的 MAC 操作系统访问来宾机器。我正在桥接我的 MAC 和 VMWARE 机器之间的网络，因此来宾有一个单独的 IP，我可以使用该 IP 成功地通过 SSH 连接到它。我面临的问题是无法通过主机名访问来宾操作系统。我尝试在来宾操作系统上设置主机名，但 MAC 仍然无法使用主机名连接到机器，甚至无法识别来宾主机名。我需要这个，因为我正在使用一个接收远程机器主机名作为连接参数的库。不幸的是，它不接受 IP，到目前为止我还无法让它工作。关于如何解决这个问题的任何想法？

我什至尝试对 VMWare 使用 NAT，但 CentOS 在此模式下无法连接到 Internet。我尝试手动修改但没有成功。这是来宾操作系统（CentOS）的屏幕截图：

![在此处输入图像描述](../Images/13f10198acb1b1028a70a14f662836a6.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T16:46:17.580

您可以将此 IP 地址输入到您的 DNS 服务器中，或者执行以下操作：

```
on your 'host' machine, edit `/etc/hosts`
add this line:
`<ip-address-of-your-VM> <hostname-you-wish-to-call>` 
```

# django - 服务器重新启动后，模型中的 Django 列表对象不会保留在会话中

> ID：14287074
> 
> 赞同：-1
> 
> 时间：2013-01-11T21:39:09.387
> 
> 标签：django, list, session, model, persistence

好的，所以我将从我的代码开始：

模型.py

```
class Order(models.Model):
order_id = models.IntegerField(primary_key = True)
order_status = models.IntegerField()
orderItems = [] 
```

视图.py

```
def addToList(request):
   prodId = request.GET['prodId'] or None
   if not prodId is None:
      prod = Product.objects.get(prod_id=prodId)
      custOrder = request.session.get(definitions.CUSTOMER_ORDER) or \
                Order(order_total = 0, order_status=1)
    custOrder.addOrderItem(prod)
    request.session[definitions.CUSTOMER_ORDER] = custOrder

return HttpResponseRedirect('/')

def home(request):
    shoppingList = request.session.get(definitions.CUSTOMER_ORDER) 
```

好的，如您所见，我创建了订单模型，然后将 orderItem 添加到该模型中的列表并将其存储在会话中。现在这工作正常，数据按预期持续存在。事情是当我重新启动服务器时， Order 模型仍然在我想要的会话中，但列表对象是**EMPTY**。orderItems = [] 当我调试它时。

现在我不是 python 大师，所以如果有人能指出我做错了什么，我将不胜感激。

编辑：为 models.py 添加 orderItem 模型

```
class OrderItem(models.Model):
orderItem_id = models.IntegerField(primary_key = True)
orderItem_cost = models.FloatField()
orderItem_quantity = models.IntegerField()
order = models.ForeignKey(Order)

def getOrderCost(self):
    return self.orderItem_cost * self.orderItem_quantity

class Meta:
    db_table = u'orderItems' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T21:55:39.177

您不是`orderItems`在数据库中持久化，它只是`Order`对象中的一个列表属性。您可以重新设计模型，例如使用`ManyToManyField`with `Product`s in `Order`。

[多对多示例](https://docs.djangoproject.com/en/dev/topics/db/examples/many_to_many/)

# ruby-on-rails - Redis::CommandError: 运行 rspec 时出现 ERR 无效的数据库索引

> ID：14287075
> 
> 赞同：17
> 
> 时间：2013-01-11T21:39:10.827
> 
> 标签：ruby-on-rails, rspec, redis

我刚刚开始使用现有的 Rails 代码库，并且正在尝试在代码库中运行测试。但是，当我运行时`bundle exec rspec spec/`，每次测试都会出现以下错误：

```
Failure/Error: Unable to find matching line from backtrace
Redis::CommandError:
   ERR invalid DB index
 # ./lib/redised.rb:35:in `flushdb_all'
 # ./lib/redised.rb:35:in `each_value'
 # ./lib/redised.rb:35:in `flushdb_all' 
```

我对 Rails 很陌生——我只完成了 Michael Hartl 的 rails 教程中的 11 章中的 8 章——所以我对 Redis 并不熟悉。我的 Redis 版本是`redis-2.4.17`.

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-11T22:23:41.470

问题是我需要增加数据库的数量。为此，我去了`/usr/local/etc`并修改了`redis.conf`. 我将数据库编号设置为 128: `databases 128`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-04-11T18:23:36.980

虽然为时已晚，但可能对其他人有所帮助。

如果您使用像“test”这样的数据库名称，请将其替换为像“0”/0 这样的索引。如果您不确定索引，请尝试使用 0 作为您的索引。祝您好运

# mysql - 有没有更有效的方法来构建没有联合和重复语句的查询？

> ID：14287077
> 
> 赞同：1
> 
> 时间：2013-01-11T21:39:22.217
> 
> 标签：mysql

我有一个查询，基本上可以找到符合特定产品条件的所有成员及其家人。每个家庭成员都列在单独的行上，即使他们属于同一个家庭。我们使用注意的 MySQL。

例如（实际返回的所有数据的小样本）：

```
ID  | familyid |  firstname | lastname | address      | city      | relationship
==============================================================================
1   |    1     |   john     |  davis   | 942 James Ln | cityplace | primary
2   |    1     |   suzy     |  davis   | 942 James Ln | cityplace | spouse
3   |    2     |   andrew   |  smith   | 444 A Rd     | new york  | primary
4   |    3     |   Mike     |  lewis   | 123 Street   | dallas    | primary
5   |    3     |   Donna    |  lewis   | 123 Street   | dallas    | child
1   |    3     |   Jamie    |  lewis   | 123 Street   | dallas    | child 
```

上表中的（组成）数据来自两个表：

> 1.  主要信息（包含有关会员和地址的所有一般信息）
> 2.  家庭信息（包含配偶和子女的姓名和性别信息）

为简单起见，我们假设这些表中包含的唯一信息如下：

# 成员

```
ID | familyid | firstname | lastname | address | city
----------------------------------------------------- 
```

# 家庭

```
ID | familyid | firstname | lastname | type | gender
------------------------------------------------------ 
```

我们系统中的成员可以拥有他们选择的多个产品（信息位于单独的表格中）。不幸的是，我知道构建上述语句的唯一方法是本质上选择相同的信息两次，然后执行 UNION ALL 语句，如下面的示例语句：

```
SELECT r.* FROM (
  SELECT familyid, firstname, lastname, address, city, 'primary'
  FROM member
 UNION ALL
  SELECT a.familyid, b.firstname, b.lastname, a.address, a.city, IF(b.type = 1, 'spouse', 'child')
  FROM member a
  JOIN family b ON (a.familyid = b.familyid)
) r 
```

这已经有点乱了，但是当我开始将其他几个表加入已经收集的“名称”信息时，“真正的”问题就出现了。例如，我可以在整个查询中添加一个 join 语句，以仅显示选择了 HBO 电视服务的成员或家庭：

```
after last statement: JOIN channels c ON (r.familyid = c.familyid) 
```

这将清除之前选择的声明中没有 HBO 的所有成员，但是如果我想选择 HBO 的子部分（例如，那些只有会员版本的人与全家庭版本的人）怎么办。这些随后的查询基本上迫使我进行两次完全相同的调用，只返回略有不同的信息。

```
SELECT r.* FROM (
  SELECT familyid, firstname, lastname, address, city, 'primary'
  FROM member m
  JOIN channels c ON (m.familyid = c.familyid)
  WHERE c.name = "HBO" and c.memtype = "member only"
 UNION ALL
  SELECT a.familyid, b.firstname, b.lastname, a.address, a.city, IF(b.type = 1, 'spouse', 'child')
  FROM member a
  JOIN family b ON (a.familyid = b.familyid)
  JOIN channels c ON (b.familyid = c.familyid)
  WHERE c.name = "HBO" and c.memtype = "family"
) r 
```

有没有办法更好地优化这些语句？MySQL 在这件事上只是 SOL 吗？

注意：表格按原样进行了标准化，因此请不要建议对其进行改进。此特定查询仅针对每月根据需要自动生成一次的单个报告（非常罕见）。我只是想找出是否有可能避免使用模式的 Union 语句。无法修改架构。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T21:55:52.383

您似乎正在使用该`member`表来存储家庭的“主要”成员和家庭地址，并使用该`family`表来存储有关家庭中其他人的信息。这似乎设计得不是很好，名字也不是很好选择。

建议：将所有“主要”成员也添加到`family`表中，并添加一个新的第三个`type`：

```
INSERT INTO family
  (family_id, type, firstname, lastname)
SELECT family_id, 2, firstname, lastname
FROM member ; 
```

然后您可以使用简单的连接进行`r`查询：

```
SELECT a.familyid, b.firstname, b.lastname, a.address, a.city, 
       CASE b.type 
         WHEN 0 THEN 'child'
         WHEN 1 THEN 'spouse'
         WHEN 2 THEN 'primary'
       END AS type
FROM member a
  JOIN family b 
    ON a.familyid = b.familyid ; 
```

您甚至可以从表中删除`firstname`和`lastname`列`member`（并且可能重命名表以更好地反映它们的使用情况）。

* * *

第二种情况可以写成：

```
SELECT a.familyid, b.firstname, b.lastname, a.address, a.city, 
       CASE b.type 
         WHEN 0 THEN 'child'
         WHEN 1 THEN 'spouse'
         WHEN 2 THEN 'primary'
       END AS type
FROM member a
  JOIN family b 
    ON a.familyid = b.familyid
  JOIN channels c 
    ON b.familyid = c.familyid
WHERE c.name = 'HBO' AND ( b.type <> 2 AND c.memtype = 'family'  
                        OR b.type  = 2 AND c.memtype = 'member only'
                         ) ; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T22:13:08.933

正如我在评论中提到的那样，我认为使用如下更灵活的模式（简化）会更可行：

![](../Images/a61c08496aaa99dc65cc401efeea5b33.png)

该`family`表将假设一个家庭，其中包含来自 的成员`member`。这些成员之间的关系将在`member_map`. 是可选的`parent_member_id`，在这种情况下将指示户主。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T22:29:14.857

我不太确定我是否完全理解这个问题。（因为我不知道预期的结果集是什么）。但是，最好将家庭概念与个人成员分开。为此，Family 应该是一个表，而家庭成员应该是一个名为 Members 的单独表。（这可能很明显，但只是为了清楚起见）

创建表 Family（Family_ID、Family_Name、Family_Address、...）

创建表 MEmbers ( Member_ID Is_Primary / *1 or 0* /, Member_Name /* 根据需要扩展为尽可能多的列 - first name, last name ... */, Member_Info /* as Gender, Age ... */ )

然后，您的加入应构造为：家庭加入频道，用于获取具有某种观看模式的家庭和个人成员：家庭加入频道加入会员。

（这是我对 Stackoverflow 的第一条评论。我不太清楚如何语法高亮...）。我会发现它会更精致。

# json - CouchDB 设计文档和 validate_doc_update 函数有问题

> ID：14287082
> 
> 赞同：1
> 
> 时间：2013-01-11T21:39:40.500
> 
> 标签：json, couchdb

我是 CouchDB 的新手，让我的设计文档在我的数据库中工作时遇到了很多麻烦。

这是我的设计文档：

```
{
"language": "javascript",

"validate_doc_update": "function(newDoc, oldDoc, userCtx) {
    function require(field, message) {
        message = message || "Document must have a " + field;
        if (!newDoc[field]) throw({forbidden : message});
    };
    function unchanged(field) {
        if (oldDoc && toJSON(oldDoc[field] != toJSON(newDoc[field])) {
        }
    };

    if (newDoc.type == "fortune") {
        require("body");
        require("sequence_id");
        require("created_at");
        unchanged("sequence_id");
        unchanged("created_at");
    }
};",

"views": { 
    "fortune_count": {
        "map": "function(doc) { if(doc.sequence_id && doc.body) { emit(doc.sequence_id, doc.body); }",
        "reduce": "_count"
        }
},

"shows": {
}
} 
```

让我分解一下我遇到的问题：

1.  我无法将此作为放置请求发送到我的数据库。显然这是无效的 JSON。我不是 JSON 专家，这非常令人沮丧。有什么想法吗？

2.  由于我在 put 请求中遇到的问题，我决定使用 Futon 添加我的设计文档。我的数据库似乎与我在这里的视图很好，但是当我尝试将文档添加到数据库时，我收到一条错误消息，指出我的 validate_doc_update 文本没有评估为函数。关于我的验证功能有什么问题的任何建议？

由于我的验证功能遇到困难，我尝试在设计文档中放置一个愚蠢的版本：

```
"validate_doc_update": "function(newDoc, oldDoc, userCtx) { if (newDoc.type == "fortune") {} };", 
```

我可以使用这个版本创建文档，但它没有多大用处。

任何帮助，将不胜感激。

谢谢，

保罗尼科尔斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T09:20:44.887

您刚刚忘记关闭括号`(oldDoc && toJSON(oldDoc[field] != toJSON(newDoc[field]))`

# android - 单击按钮从一个片段导航到另一个片段

> ID：14287093
> 
> 赞同：19
> 
> 时间：2013-01-11T21:40:30.803
> 
> 标签：android

我想通过单击按钮从一个片段导航到另一个片段，并且我还想传递数据。我应该为此做些什么？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-11T21:53:03.877

这是一个可以帮助您的示例：

```
your_button.setOnClickListener(new View.OnClickListener() {
    public void onClick(View v) {

                            Fragment frag = new YourFragment(Data yourdata);

                    FragmentTransaction ft = getFragmentManager().beginTransaction();
                    ft.replace(R.id.fragment_container, frag);
                    ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_FADE);
                    ft.addToBackStack(null);
                    ft.commit();
                 }
     }); 
```

xml:

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

 <FrameLayout android:name="fragments.YourInitialFragment"
            android:id="@+id/fragment_container"
            android:layout_weight="1"
            android:layout_width="match_parent"
            android:layout_height="0dip" />

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-10-31T16:09:49.123

阅读[有关此主题的 Android 文档](https://developer.android.com/training/basics/fragments/communicating.html)：

> 所有 Fragment 到 Fragment 的通信都是通过关联的 Activity 完成的。**两个 Fragment 永远不应该直接通信。**

事实上，如果您使用 Android Studio 模板添加片段，它将使用接口添加实现本文中描述的模式的模板代码。

为了解决您的特定场景，您的活动将实现如下接口：

```
public interface OnFragmentInteractionListener
{
    void onButtonClick(Data data);
} 
```

然后在该方法的实现中，活动可以使用**FragmentManager**执行导航，如另一个答案中所示。这篇文章对这个过程给出了更详细的解释。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-10-03T04:48:14.697

```
Fragment fragment =null;
switch (view.getId()) {
                   case R.id.fragMentOneLayout:
                        fragment = new FragMentOne();
                        break;
                    case R.id.fragMentTwoLayout:
                        fragment = new FragMentTwo();
                        break;

                }

 FragmentManager fm = getFragmentManager();
// create a FragmentTransaction to begin the transaction and replace the Fragment
FragmentTransaction fragmentTransaction = fm.beginTransaction();
// replace the FrameLayout with new Fragment
fragmentTransaction.replace(R.id.frameLayout, fragment);
fragmentTransaction.commit(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-11T22:28:12.013

试试看：

为按钮创建一个点击监听器，例如：

```
mybutton.setOnClickListener(view -> clickExecuted()); 
```

获取控制器（如果没有）：

```
private NavController getNavController() {
    Fragment fragment = getSupportFragmentManager().findFragmentById(R.id.mainactivity_slide_navigation_datalayout_fragment);
    if (!(fragment instanceof NavHostFragment)) {
        throw new IllegalStateException("Activity " + this + " does not have a NavHostFragment");
    }
    return ((NavHostFragment) fragment).getNavController();
} 
```

然后导航：

```
public void clickExecuted() {
    navController.navigate(R.id.destination_fragment);
} 
```

# php - 订单关键字结果相关性

> ID：14287096
> 
> 赞同：1
> 
> 时间：2013-01-11T21:40:44.373
> 
> 标签：php, mysql, sorting, relevance

我创建了一个查询，该查询根据用户创建的关键字从数据库中获取相当短的字符串（[感谢 zhikharev](https://stackoverflow.com/users/919105/zhikharev "日哈列夫")的[回答](https://stackoverflow.com/a/7240875/1523238 "回答")）：

```
$searchArray = explode(' ', $search);
$searchNumber = count($searchArray);

$query = "SELECT * FROM tags WHERE tags.tag LIKE CONCAT('%',?,'%')" . 
    str_repeat(" OR tags.tag LIKE CONCAT('%',?,'%')", $searchNumber - 1);

$stmt = $mysqli -> prepare($query);
$bind_names[] = str_repeat('s', $searchNumber);

for ($i = 0; $i < count($searchArray); $i++){
    $bind_name = 'bind'.$i; /*generate a name for variable bind1, bind2, bind3...*/
    $$bind_name = $searchArray[$i]; /*create a variable with this name and put value in it*/
    $bind_names[] = & $$bind_name; /*put a link to this variable in array*/
}

call_user_func_array(array($stmt, 'bind_param'), &$bind_names);
$stmt -> execute(); 
```

我的问题是我不知道如何按相关性对结果进行排序。请注意，数据库中的一个标签可以包含多个单词。

假设用户搜索“纽约市”。然后在数据库中我有：

```
 New York
    York
    New York City
    New Zealand
    Kansas City 
```

我希望结果如下所示：

```
 New York City
    New York
    New Zealand
    York
    Kansas City 
```

它应该查找与用户输入中的单词最匹配的标签，以及与搜索中单词的顺序大致相同的标签。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T02:23:13.070

这是 Sphinx 等独立全文搜索引擎的完美用例。我最近开始在一个项目中使用 Sphinx，到目前为止我对它非常满意。它的索引速度非常快，而且我看到与直接 MySQL 查询相比，速度提高了 10 倍。

启用星模式将允许部分匹配： [http ://sphinxsearch.com/docs/2.0.6/conf-enable-star.html](http://sphinxsearch.com/docs/2.0.6/conf-enable-star.html)

它还允许各种排序方法： [http ://sphinxsearch.com/docs/2.0.6/sorting-modes.html](http://sphinxsearch.com/docs/2.0.6/sorting-modes.html)

更多链接： [http](http://sphinxsearch.com/docs/2.0.6/) ://sphinxsearch.com/docs/2.0.6/ http://php.net/manual/en/sphinx.examples.php

# java - 不允许在字符串 REGEX 中使用 SSN 和电话号码

> ID：14287097
> 
> 赞同：0
> 
> 时间：2013-01-11T21:40:45.187
> 
> 标签：java, regex

> **可能重复：**
> [SSN 和电话号码的正则表达式](https://stackoverflow.com/questions/14103840/regular-expression-for-ssn-and-phone-number)

```
^(?!.*(\\d{16})|.*(\\d{9})|.*(\\d{3}-\\d{2}-\\d{4})|.*(\\d{3}-\\d{3}-\\d{3})).* 
```

以上`regex`不允许在字符串中包含 SSN 和电话号码。但它也不允许`\n`（输入字符）。如果用户通过按 Enter 输入两行文本，则会`regex`失败。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T21:45:31.657

默认情况下，句点 ( `.`) 不匹配换行符。如果您无法配置`DOTALL`模式，请根据[此 SO answer](https://stackoverflow.com/questions/3222649/any-character-including-newline-java-regex)考虑以`[\s\S]*`(任意数量的空格或非空格字符) 结尾，而不是`.*`.

# mysql - 使用现有的 mysql 数据库创建 ActiveAdmin 项目？

> ID：14287098
> 
> 赞同：2
> 
> 时间：2013-01-11T21:40:49.257
> 
> 标签：mysql, sql, ruby-on-rails, activeadmin

我有一个相当大的 SQL 数据库，我想开始使用 ActiveAdmin/Rails 进行管理。我应该尝试为数据库中的每个表创建一个 ActiveRecord 模型，还是有更简单的方法来完成这个？我对 Rails 有相当多的经验，但这将是我第一次使用 ActiveAdmin。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T22:41:18.360

是的，您必须描述模型中的所有表格。您可以尝试在没有模型本身的情况下描述 Active Admin，但您会收到错误消息。
更多信息在这里[http://activeadmin.info/docs/3-index-pages.html](http://activeadmin.info/docs/3-index-pages.html)

# mysql - MySQL选择具有相同FK但在其他行中具有不同值的行

> ID：14287100
> 
> 赞同：1
> 
> 时间：2013-01-11T21:40:52.113
> 
> 标签：mysql

我要回过头来审核一些数据库条目，并且需要一个查询来查找我需要处理的行。

我已经尝试了一些子查询，但我无法接近我正在寻找的东西。

一个示例表是：

```
code_id     id     exchange
1           23     5
2           23     5
3           24     5
4           24     7
5           25     5
6           26     5 
```

我要提取的只是第 3 行和第 4 行。我需要知道 id 列在哪里相同但交换不同。

我想如果我得到这个，我将能够将其他 2 个表构建到查询中。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T21:44:01.300

```
SELECT * FROM my_table NATURAL JOIN (
  SELECT id FROM my_table GROUP BY id HAVING COUNT(DISTINCT exchange) > 1
) t 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/029e9/1/0)上查看。

# excel - Excel 2007 插件显示但不工作

> ID：14287101
> 
> 赞同：7
> 
> 时间：2013-01-11T21:40:59.793
> 
> 标签：excel, vba, add-in

我创建了一个出现在 UI 中的 Excel 插件，但是每当我单击它时它都不起作用。

```
Option Explicit

Public sheetscol As Collection, depshtnm
Public hasdeps As Boolean
'***********************************
'*finds the external dependencies of the cell, and places them in the 'sheetscol' collection
'***********************************
Sub depfinder_eventhandler(control As IRibbonControl)
    depfinder
End Sub
'--------------
Sub depfinder
 ...
End sub 
```

这是 XML CustomUI：

```
<customUI xmlns="http://schemas.microsoft.com/office/2006/01/customui"
  xmlns:m="MattSinSpace">
    <ribbon>
        <tabs>
            <tab idQ="m:MattTab" label="Matt Tools" insertAfterMso="TabHome">
                <group idQ="m:migration" label="migration tools">
                    <button idQ="m:DepFinderButton1" label="Highlight Dependencies" size="large"
                     onAction="depfinder_eventhandler"                         imageMso="HappyFace" />
        </group>
                <group idQ="m:RS1" visible = "false"/>
            <group idQ="m:RS2" visible = "false"/>
            </tab>
        </tabs>
    </ribbon>
</customUI> 
```

我在制作插件方面非常业余，我一直在使用这个页面来帮助我：

[http://erpcoder.wordpress.com/2012/05/30/how-to-create-a-custom-ribbon-addin-for-excel-2010/](http://erpcoder.wordpress.com/2012/05/30/how-to-create-a-custom-ribbon-addin-for-excel-2010/)

看起来一切都很好，在我的代码和 UI 中，唯一的区别是我已经包含了命名空间。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T00:42:13.753

您的问题在于组和按钮的 XML 中。您正在使用 idQ，它是在加载项之间共享控件时使用的限定符标识符。您希望在选项卡中使用此选项，因为您可以在加载项之间共享选项卡，但不能在组或按钮之间共享。以下 XML 将起作用：

```
<customUI xmlns="http://schemas.microsoft.com/office/2006/01/customui" xmlns:m="MattSinSpace">
<ribbon>
    <tabs>
        <tab idQ="m:MattTab" label="Matt Tools" insertAfterMso="TabHome">
                <group id="migration" label="migration tools">

        <button id="DepFinderButton1" label="Highlight Dependencies" size="large"
                 onAction="depfinder_eventhandler"  imageMso="HappyFace" />

        </group>

           <group id="RS1" visible = "false"/>
             <group id="RS2" visible = "false"/>
        </tab>
    </tabs>
</ribbon> 
```

# yii - Yii 中 Model/ActiveRecord 的“加载后”事件

> ID：14287106
> 
> 赞同：1
> 
> 时间：2013-01-11T21:41:16.760
> 
> 标签：yii

当从数据库加载记录并且模型对象（通常是后代）填充了适当的数据时，我找不到拦截事件的方法`CActiveRecord`- 这与`onAfterSave`. [文档](http://www.yiiframework.com/doc/api/1.1/CActiveRecord)列出了以下事件：`onAfterConstruct`, `onAfterDelete`, `onAfterFind`, `onAfterSave`, `onAfterValidate`, `onBeforeDelete`, `onBeforeFind`, `onBeforeSave`, `onBeforeValidate`, `onUnsafeAttribute`.

唯一可能相关的是`onAfterConstruct`，所以我在派生自的模型类中实现了事件处理程序`CActiveRecord`，但它没有被调用。

**更新：**

除了接受的答案之外，我发现还有一个受保护的方法[`instantiate`](http://www.yiiframework.com/doc/api/1.1/CActiveRecord#instantiate-detail)，它的目的是相同的。它可以被覆盖以访问新实例的属性。最重要的是在记录的任何实例化之后调用它，而不仅仅是在 之后`find`，因此它似乎更可靠。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T23:46:44.977

我认为您正在寻找的是`onAfterFind()`， onAfterFind() 在实例化记录后 `onAfterConstruct()`引发，而在模型实例由**new**运算符创建后引发

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-10T15:33:57.090

在 CActiveRecord.php 中，您还有函数 populateRecord($attributes,$callAfterFind=true) 执行以下操作：

```
//instantiate: by default only returns a new empty object of this class
$record = instantiate() 

//then fill all the record attributes
...

//call afterfind
if($callAfterFind) $record->afterFind(); 
```

这意味着每次加载记录时，都会调用 afterFind。我没有找到填充记录值的其他地方，所以似乎 afterFind 可以解释为加载后/“afterLoad”（谷歌请索引这个）

# twitter-bootstrap - 如何将第二个项目定位到导航栏中

> ID：14287111
> 
> 赞同：0
> 
> 时间：2013-01-11T21:41:34.680
> 
> 标签：twitter-bootstrap

这里有很多 html，但对于任何拥有引导站点的人来说，它应该看起来非常熟悉。

```
<body>
<section class="container-fluid">
    <div class="navbar navbar-fixed-top">
        <div class="navbar-inner">
            <div class="container-fluid">
                <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </a>
                <a class="brand" href="/">Home</a>
                <div class="nav-collapse">
                    <ul class="nav">
                        <li><a href="#">One</a></li>
                        <li><a href="#">Two</a></li>
                        <li><a href="#">Three</a></li>
                    </ul>
                    <ul class="pull-right nav">
                        <li class="dropdown">
                            <a href="##" class="navbar-link dropdown-toggle" data-toggle="dropdown">
                                Your name here
                            </a>
                            <ul class="dropdown-menu">
                                <li><a href="/Profile/Profile.cfm">Profile</a></li>
                                <li><a href="/?logout">Logout</a></li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <form>
        <textarea name="Comment"></textarea>
        <div class="form-actions">
            <input type="submit" name="Save" value="Save">
        </div>
    </form>
</section>
</body> 
```

我可以使用这个 css 将“保存”按钮放在屏幕的右上角：

```
.form-actions {
    position:absolute;
    right:0;
    top:25px;
} 
```

我想做的是给它一个固定顶部的属性。换句话说，这样当用户向下滚动时它不会滚动到屏幕外。

我可以更改 html、css 以及实现此目标所需的任何内容。例如，现在“你的名字在这里”位于导航栏的右侧，但那是一时兴起 - 这不是必需的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T23:03:24.073

我不完全清楚你希望最后一页是什么样子，但这是一个开始吗？
[http://jsfiddle.net/panchroma/R5Q3W/](http://jsfiddle.net/panchroma/R5Q3W/)

重要的是表单是您想要“窥探”的内容，所以我将它包装在一个包含 div 中，如下所示：

```
<div class="formWrapper" data-spy="affix" data-offset-top="10">
<form> ...... </form>
</div><!-- close formWrapper div --> 
```

（data-offset-top 是在词缀动作开始之前页面需要滚动的距离）

然后我添加了这个 CSS 来定义你想在这个 div 被贴上时发生什么

```
.formWrapper.affix{
right:0;
top:25px;
width:100%;
} 
```

希望这可以帮助！

# c# - 控制台应用程序 - 无法找到运行此应用程序的运行时版本（我拥有所有这些）

> ID：14287114
> 
> 赞同：4
> 
> 时间：2013-01-11T21:41:49.563
> 
> 标签：c#, .net, console-application

像其他人一样，我遇到了一个从我们的数据库中读取记录的简单控制台应用程序的问题。

这个小程序需要放在我们的文件服务器上。它读取新记录并将摘要转发给母公司。

这将是一个计划任务，每 X 分钟运行一次。

我不想要安装程序，因为我不希望服务器需要重新启动。

从屏幕截图中，请注意我已经安装了几乎所有版本的框架，并且调试信息已复制到程序文件夹中。

这是程序的调试版本，但没有其他调试信息输出到窗口。

我尝试过在 2.0、3.5 和 4.0 上构建。所有版本都给我相同的错误信息。

![截屏](../Images/d464fa489008c5c885635e26ea09b0fe.png)

**[更新]：** [沃尔](https://stackoverflow.com/users/224410/wal)在评论中询问

```
<?xml version="1.0"?>
<configuration>
<startup>

<supportedRuntime version="v2.0.50727"/></startup>
</configuration> 
```

这是一个控制台应用程序，所以这实际上是整个`app.config`文件。**当涉及到这些.config**设置时，我通常一无所知；但是，我似乎觉得我掌握了这个！:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T17:40:42.413

当我把我的可执行文件放在这里时，我原本以为有人会因为技术不好而对我大惊小怪，但当时我并不在意。我只是想让它工作。

注意可执行文件的放置位置？

![来自OP的截图](../Images/2d443f64927c9f095ba649a20bbed0e0.png)

它在`C:\Windows\System32`文件夹中。

显然，该`System32`文件夹适用于 Windows 命令。

**那么，为什么我把我的小可执行文件放在这里呢？**因为该文件夹几乎可以保证包含在 Windows 环境路径中。

我知道有人最终会生我的气，所以我想我今天把它移到目录中一个适当命名的新文件夹中`Program Files (x86)`。

好吧，我做到了，现在，就像魔术一样，程序运行良好。

因此，我猜测不允许在该`System32`文件夹中运行 .NET Framework 应用程序。

但是，我想听听人们告诉我这到底是怎么回事，以及为什么 .NET Framework 应用程序不能进入这里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T22:05:19.593

我怀疑.Net 安装已损坏。您可以尝试使用以下工具清理 .net 框架并重新安装。

[.net 框架清理工具](http://blogs.msdn.com/b/astebner/archive/2012/08/04/10336934.aspx)

# c - 如何使 valgrind 准确重现错误？

> ID：14287118
> 
> 赞同：1
> 
> 时间：2013-01-11T21:41:56.603
> 
> 标签：c, valgrind

我创建了崩溃的 ac 程序（分段错误）。我想使用 valgrind 找到错误，但是当我运行它时：

```
valgrind -v ./executable 
```

程序不会崩溃。当我使用 gdb 运行它时它仍然崩溃。

如何设置 valgrind 来重现错误，例如 gdb？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T08:40:52.093

> 如何设置 valgrind 来重现错误，例如 gdb？

你不应该，事实上你不能。

这是因为程序在 Valgrind 下运行的环境与原生运行时略有不同。这就是 Valgrind 的工作原理，请参阅[Valgrind 常见问题解答](http://valgrind.org/docs/manual/faq.html#faq.crashes)。

您真正需要的是修复所有 Valgrind 错误，尤其是无效读取。

# python - cx_oracle 用 executemany 删除？

> ID：14287123
> 
> 赞同：0
> 
> 时间：2013-01-11T21:42:10.070
> 
> 标签：python, cx-oracle

与 cx_Oracle.executemany 等效，我可以用什么来排除？

通过一个非常简单的示例，我使用此代码块插入数据，但是可以为删除条目执行此操作吗？

```
try:

    con = None

    con = cx_Oracle.connect(uid , pwd, dsn)
    cur = con.cursor()
    cur.executemany(sql,params)
    con.commit()

except cx_Oracle.DatabaseError, e:

        print 'Error %s' % e
        sys.exit(1)

finally:

    if con:

        con.close() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T21:49:26.187

DB-API 支持使用`executemany()`. 我手边没有 Oracle 数据库，但下面是一个使用 SQLite 的经过测试的示例：

```
import sqlite3
conn = sqlite3.connect(':memory:')
conn.execute('create table t (c);')
conn.executemany("insert into t values (?);", ('a','b','c',))
conn.execute('select c from t;').fetchall()
# -> [(u'a',), (u'b',), (u'c',)]
conn.executemany('delete from t where c = ?;', ('a','b',))
conn.execute('select c from t;').fetchall()
# -> [(u'c',)]
conn.close() 
```

# html - 使文本从输入框的左上角开始

> ID：14287125
> 
> 赞同：0
> 
> 时间：2013-01-11T21:42:12.153
> 
> 标签：html, input, vertical-alignment

我在一个页面上有几个输入框，我希望文本从左上角开始。目前，我在下面使用的是左对齐，但在框的中间。我试过垂直对齐和其他东西，但没有运气。我不想使用填充，因为文本需要环绕，它只会让它从框的顶部弹出：

```
<input style="height:200px;width:800px;font-family:Arial;border:1px solid #a6a6a6;
              background-color:#fff9eb;resize:none" wrap="hard"
              id="submitsummary" name="submitsummary"
              placeholder="1000 character limit..." 
              maxlength="1000" size="1000" type="text"/> 
```

编辑-因此，根据建议，我已将其改回 textarea，现在我的 HTML 中有 textarea 框（已简化为仅在表单中显示）：

```
<form id="submitform" name="submitform" action="submit.php" onsubmit="return validateSubmitForm()" method="post">

    <textarea style="height:60px;width:600px;font-family:Arial;border:1px solid #a6a6a6;
          background-color:#fff9eb;resize:none" wrap="hard" size="200" 
          placeholder="200 character limit..." maxlength="200"
          id="submitsummary" name="submitsumary" type="text"></textarea>

    <p id="submitsummaryfail"></p>
    <input type="submit" value="Submit" class="btn">
</form> 
```

而我正在尝试做的是一个验证功能：

```
<script>
function validateSubmitForm()
{
    var submitsummary=$('#submitsummary').val();

    // check that summary isn't blank
    if (submitsummary==null || submitsummary=="")
        {
        $('#submitsummaryfail').html("Summary cannot be blank");
        return false;
        }
    else
        {
        $('#submitsummaryfail').html("");
        return true;
        }
}
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T21:59:16.933

根据您的评论，您可以使用`<textarea>`然后使用 jquery 获取值`.val()`：

```
var text = $("#submitsummary").val(); 
```

[https://stackoverflow.com/a/13321580/802791](https://stackoverflow.com/a/13321580/802791)

# c++ - 如何检查 std::async 任务是否完成？

> ID：14287127
> 
> 赞同：24
> 
> 时间：2013-01-11T21:42:20.707
> 
> 标签：c++, multithreading, asynchronous, c++11, std

在我的图形应用程序中，我想在另一个线程中生成批处理网格。因此我使用异步调用成员函数`std::async`。

```
task = async(launch::async, &Class::Meshing, this, Data(...)); 
```

在我的更新循环中，我尝试检查线程是否准备好。如果是，我会将网格发送到视频卡并开始下一个线程。如果没有，我将跳过这些操作。

```
#include <future>
using namespace std;

class Class
{
public:
    void Update()
    {
        if(task.finished()) // this method does not exist
        {
            Data data = task.get();
            // ...
            task = async(launch::async, &Class::Meshing, this, Data(/* ... */));
        }
    }

private:
    struct Data
    {
        // ...
    };
    future<Data> task;
    Data Meshing(Data data)
    {
        // ...
    }
}; 
```

如何检查异步线程是否完成而不卡在更新功能中？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-11T21:46:10.173

使用[`future::wait_for()`](http://cppreference.com/w/cpp/thread/future/wait_for). 您可以指定超时，然后获取状态代码。

### 例子：

```
task.wait_for(std::chrono::seconds(1)); 
```

这将返回`future_status::ready`,`future_status::deferred`或`future_status::timeout`，因此您知道操作的状态。您还可以将超时时间指定为 0 以使检查~~尽快~~返回。

# visual-studio-2010 - 构建时被另一个进程锁定的输出文件

> ID：14287128
> 
> 赞同：2
> 
> 时间：2013-01-11T21:42:22.093
> 
> 标签：visual-studio-2010, xna, kinect

我正在使用 Visual Studio 2010 创建一个带有 Kinect SDK 1.6 的 XNA 应用程序。我有一个问题，即在调试应用程序后构建通常会失败（并非总是）。有一个进程正在锁定`KinectDrobePrototype1.exe`。

```
Error 12 Unable to copy file "obj\x86\Debug\KinectDrobePrototype1.exe" to 
"bin\x86\Debug\KinectDrobePrototype1.exe". The process cannot access the file
'bin\x86\Debug\KinectDrobePrototype1.exe' because it is being used by another
process.

Error 11 Could not copy "obj\x86\Debug\KinectDrobePrototype1.exe" to
"bin\x86\Debug\KinectDrobePrototype1.exe". Exceeded retry count of 10\. Failed. 
```

我使用了[Process Explorer](http://download.cnet.com/Process-Explorer/3000-2094_4-10223605.html)，它告诉我这是`System`进程。

```
Process  |  PID  |  Type  |  Name
System       4      File     C:\Users\ ... \KinectDrobePrototype1\KinectDrobePrototype1\KinectDrobePrototype1\bin\x86\Debug\KinectDrobePrototype1.exe 
```

我看过类似的帖子，[但](https://stackoverflow.com/questions/2002273/visual-studio-locks-output-file-on-build)没有帮助。我觉得我的应用程序中一定有一些东西仍然可以处理一些东西。我确定当应用程序终止时，以下代码会在我的`KinectManager`类中执行。

```
public void CleanUp()
{
    if (ActiveKinectDevice != null)
        UnintialiseDevice(ActiveKinectDevice);
}

private void UnintialiseDevice(KinectSensor device)
{
    device.Stop();

    device.ColorStream.Disable();
    _ColourPixelData = null;

    device.DepthStream.Disable();
    _DepthPixelData = null;

    device.SkeletonStream.Disable();
    _SkeletonData = null;
} 
```

我对 XNA 很陌生，所以可能有一些我没有做过的事情。在`UnloadContent`我有以下内容：

```
protected override void UnloadContent()
{
    _KinectManager.CleanUp();
    _DrawingManager.CleanUp();           
} 
```

然后在我的`DrawingManager`课堂上，我处理了我使用过的一些纹理，我的`SpriteBatch`和`GraphicsDevice`：

```
public void CleanUp()
{
    HandIcon.Dispose();
    JointIcon.Dispose();
    _ColourImage.Dispose();
    _DepthImage.Dispose();

    _SpriteBatch.Dispose();
    _GraphicsDevice.Dispose();           
} 
```

有没有人有任何建议？还是我犯了一个明显的错误？

**编辑 1：**我忘了提到我正在使用 Kinect 的轮询方法，这就是为什么我没有取消注册任何事件的原因。

**编辑 2：**为澄清起见，系统进程最终会释放文件 - 它不会保持锁定状态。我认为这通常需要一到两分钟。

**更新 1：**我确实安装了防病毒软件。我已禁用它，但它并没有解决问题。

**更新 2：**我可以确认这是我的台式机特有的问题。我还没有在我的笔记本电脑上重现这个问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-28T23:32:26.190

我在一个论坛上发现了一个标题为'[系统进程“异常”](http://forum.sysinternals.com/system-process-anomaly_topic24458_page1.html) '的讨论。

这取自 Jblom1986 的帖子。他的解决方案解决了我的问题。要进行更改，请使用**msconfig.exe**转到**服务**选项卡。

 **> **“当名为“应用程序体验”**的 Windows 服务（当出现崩溃时在微软数据库中找到解决方案的服务）关闭时，另一个名为**“搜索索引器”**的服务（负责快速查找驱动器上的文件的服务）索引它们）开始出现故障。因此，Windows 会在几分钟内锁定您移动、复制或使用的任何内容以“索引”该文件，然后再释放它，然后您可以删除该文件。它使用进程 ID 号锁定它4 (PID:4)”。

**编辑：**这是在 Windows 7 机器上。我不确定其他版本的 Windows 是否有此错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T22:01:19.330

Windows 保证进程将在终止时关闭所有句柄。缺少损坏的操作系统，无论如何，当您的进程退出时，您的句柄都会关闭。

最有可能的是，您有一个防病毒或类似的进程正在打开和扫描该文件。**

# python - 用基本算法开始 Python 麻烦

> ID：14287141
> 
> 赞同：0
> 
> 时间：2013-01-11T21:43:31.843
> 
> 标签：python, algorithm, structure

我是一个完整的菜鸟，在 Mac 上使用 eclipse 学习 Python 2.7 不到四天，我已经设法在大约 20 分钟内从头开始编写了一个“FizzBang”，但是......我有一个见鬼基本算法的时代。我想知道这是否是我会及时加快速度的事情，或者是否有某种“逻辑思维”练习在我上面没有指导。到目前为止，记忆语法一直没有问题，当一切顺利时，我真的很享受这种感觉。

我的问题是，我是否应该绕开我目前的初学者书籍并阅读一些有关基本算法的内容（也许是 Python 算法特有的内容）？

如果是这样，你会推荐什么初学者文本？

我搜索了这个主题并没有找到任何匹配的东西，所以如果这是一个重复的帖子，或者你怎么称呼它，我的错。

我会很感激我从你那里得到的任何帮助。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T21:48:22.997

学习编程语言的语法来表达算法就像学习英语的语法来表达思想一样。
当然，英语中有一些细微差别可以让你比其他语言或其他语言更好地表达一些想法。但是，掌握英语并不会自动使您能够思考一些想法。

同样，如果你想买一本算法书，那就去吧！您对 python 的理解与您的开发能力和解决问题的算法之间的联系非常松散。

一旦你学会了如何解决问题，你将能够开发一种算法来解决手头的特定问题，然后选择最适合表达该算法的语言

……随着你设计的算法越来越多，你会越来越擅长开发更好的算法；随着你编写更多的 Python 代码，你会在编写 Python 代码方面做得更好。

我不知道您目前正在阅读什么书，但初学者书籍倾向于使用简单的算法示例来教授语言（语法、语义等）。如果您很难理解控制这些示例解决方案的算法，您可能应该对算法进行一些初学者阅读。真的，这有点像一个循环——为了学习算法，你需要能够表达它们（算法最容易用代码表达）。因此，要理解算法，您需要理解代码。
这并不完全正确——伪代码很好地解决了这个问题。但是您至少需要了解伪代码。

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T22:01:40.843

请参阅[免费提供的编程书籍列表](https://stackoverflow.com/questions/194812/list-of-freely-available-programming-books)。“Language Agnostic”部分中有很多很好的参考资料，可以帮助您进入编程格式塔。

练习、犯错误并让程序以当时对你有意义的任何方式运行是非常重要的。当您阅读更广泛并获得经验时，这将非常有价值，因为当您遇到更好的做事方式时，它将帮助您识别它。“嘿，这就像我之前试图解决的那个问题，这种方式更清晰/更短/更快/更灵活/更性感！”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T21:57:53.657

我建议继续玩。逼自己，但要有耐心。找出你无法解决的问题并尝试解决它们。搜索 Google、Stackoverflow 等...也许 euler 项目会很好。[欧拉项目](http://projecteuler.net/problems)。

我认为“思考”部分是随着时间而来的。你看的语言越多，尝试的项目越多，你就越意识到如何实现想法。

我建议使用 Python 做的一件事是通读 pdf 库。查看 [itertools](http://docs.python.org/2/library/itertools.html)和[collections](http://docs.python.org/2/library/collections.html)模块，因为它们通常提供优雅的方式来实现想法。

我个人是从 Python 开始的，我喜欢它，但目前正在玩 Haskell。您不需要特定于 python 的教程来理解有效且更重要的是“新”思维方式。

所以......嗯......也许这有点漫无边际......但我认为我的情绪在那里。玩得开心！

# oracle - Oracle SQL 加载程序参考

> ID：14287142
> 
> 赞同：-1
> 
> 时间：2013-01-11T21:43:32.463
> 
> 标签：oracle, sql-loader

你们能给我一些关于 Oracle SQL 加载器的很好的参考吗？我做了谷歌，我发现的搜索都没有用

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T21:47:22.047

加载器包含在 Database Utilities 书中，这本书写得很好： http: [//docs.oracle.com/cd/E11882_01/server.112/e22490/toc.htm](http://docs.oracle.com/cd/E11882_01/server.112/e22490/toc.htm)

就个人而言，我现在会使用外部表而不是 SQL*Loader ......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-28T10:54:33.880

下面是一些有用的**SQL*Loader**参考资料-：

1.  [SQL*Loader 概念](https://docs.oracle.com/cd/B19306_01/server.102/b14215/ldr_concepts.htm#i1004619)
2.  [特定于表的加载](https://docs.oracle.com/database/121/SUTIL/GUID-227B995D-72A8-42EE-ADD9-350B8A229495.htm#SUTIL1106)
3.  [将数据加载到空表中](https://docs.oracle.com/database/121/SUTIL/GUID-63D25923-62F8-41A4-8062-662744CB1C84.htm)
4.  [将数据加载到非空表中](https://docs.oracle.com/database/121/SUTIL/GUID-2F1B7E71-AE90-40CB-9A7F-B44187FD059C.htm)
5.  [SQL*Loader 参数](https://docs.oracle.com/cd/B19306_01/server.102/b14215/ldr_concepts.htm#i1007844)
6.  [参数文件](https://docs.oracle.com/cd/B19306_01/server.102/b14215/ldr_params.htm#i1005781)
7.  [选项条款](https://docs.oracle.com/cd/B19306_01/server.102/b14215/ldr_control_file.htm#i1004788)

最后但同样重要的是，关于 SQL*Loader 的最有用的常见问题。

*   **[SQL*Loader 常见问题](https://www.orafaq.com/wiki/SQL*Loader_FAQ)**

# ruby-on-rails - 在 Rails 中解析 JSON

> ID：14287144
> 
> 赞同：2
> 
> 时间：2013-01-11T21:43:40.683
> 
> 标签：ruby-on-rails, json, parsing

我坚持的基本问题：

如果我收到带有以下 JSON 的 POST 请求：

```
JSON: {
  "type": "invoice.payment_succeeded",
  "pending_webhooks": 0,
  "created": 1357936579,
  "object": "event",
  "livemode": false,
  "id": "evt_15PLdo9JdZ2yN4",
  "data": {
    "object": {
      "subtotal": 3500,
      "attempted": true,
      "paid": true,
      "amount_due": 3500,
      "closed": true,
      "period_end": 1357936578,
      "lines": {
        "url": "/v1/invoices/in_15PLg6oL0IiYYj/lines",
        "count": 1,
        "object": "list",
        "data": [
          {
            "type": "subscription",
            "period": {
              "end": 1360614978,
              "start": 1357936578
            },
            "livemode": false,
            "object": "line_item",
            "proration": false,
            "amount": 3500,
            "quantity": 1,
            "plan": {
              "interval_count": 1,
              "livemode": false,
              "object": "plan",
              "amount": 3500,
              "trial_period_days": null,
              "name": "forecast3",
              "currency": "usd",
              "id": "forecast3",
              "interval": "month"
            },
            "id": "su_15PLVebFWecrdQ",
            "currency": "usd",
            "description": null
          }
        ]
      },
      "starting_balance": 0,
      "charge": "ch_15PLYLUiVusQDH",
      "object": "invoice",
      "total": 3500,
      "ending_balance": 0,
      "date": 1357936578,
      "period_start": 1357936087,
      "attempt_count": 0,
      "discount": null,
      "livemode": false,
      "id": "in_15PLg6oL0IiYYj",
      "next_payment_attempt": null,
      "customer": "cus_15OrEWGsLN3CkP",
      "currency": "usd"
    }
  }
} 
```

我如何解析它以访问参数`"id": "in_15PLg6oL0IiYYj"`

谢谢！！

注意：这是来自通过 Stripe Payment Processing 的 webhook。

我已经尝试了一些变体，但似乎在绕圈子：

```
# Parse JSON
event_data = JSON.parse(json)

# Get Invoice id
invoice_id = Stripe::Invoice.retrieve(event_data.data.object.id) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-11T21:53:40.470

代替`event_data.data.object.id`

你应该试试：

```
event_data["data"]["object"]["id"] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T21:49:08.607

如果您收到 params 哈希中的数据，则：

```
logger.debug params["id"] 
```

应该管用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-26T11:57:26.453

那是**RAW POST DATA**，而不是 URL 参数

您可以交叉检查是否在[http://requestb.in/上获取原始数据](http://requestb.in/)

原始数据将无法通过 params['id'] 访问，因为它没有密钥

你想要的数据可以通过

```
request.env["rack.input"].read 
```

# ajax - 单击“是”关闭引导模式后 AJAX 未触发

> ID：14287145
> 
> 赞同：0
> 
> 时间：2013-01-11T21:43:44.897
> 
> 标签：ajax, yii, request

我有一个链接类，每次单击它们时都会触发引导模式。

```
 <a class="ptdel" href="#myModalx" role="link" data-toggle="modal" id="668" title='Delete'>x</a>
     <script type="text/javascript">
     jQuery(document).ready(function(){  
         $(".ptdel").click(function(){ 

            var pcid = $(this).attr('id');
            if(pcid >= 40){
                $("#myModalxLabel").html("Delete?");  //adds to modal display text
            }

            $("#modalButtonxy").addClass("del_"+pcid); //adds class to yes button 

         });
     });
     </script> 
```

使用 href="#myModalx" 单击链接时会弹出模式。这已经使用 Bootstrap 进行了配置。

这是我的模态html代码...

```
 <pre>
  my modal id="myModalx"
  my modal header id="modalHeadx" 

  my Yes button id="modalButtonxy" data-dismiss="modal" aria-hidden="true" class="" onclick="yesDel(this);"

   my No button id="modalButtonxn" data-dismiss="modal" aria-hidden="true"

  </pre> 
```

在我的 DOM 就绪代码中，我向 yes 按钮添加了一个类，以便我可以获取单击的链接的 id。

它正确调用下面的 JavaScript 函数...警报正在触发...但问题是它不会触发 ajax。我在控制台上没有日志。我将 Yii 用于我的 php 框架......这里的 url 代码在我的其他 ajax 调用中工作。

```
 function yesDel(thecl){
 //    alert("works");    

            var modalclass = thecl.attr('class');
            var pid = modalclass.split("_").pop();
            //should return true or false back from request
            $.ajax({
                url: '<?php echo CController::createUrl('/link/deletenow'); ?>',
                type: "POST",
                data: {linkid:pid,YII_CSRF_TOKEN: '<?php echo Yii::app()->request->csrfToken ?>'},
                dataType: 'text',
                success: function(data){  
                      if(!!data){

                         $("#flashmid").show();        
                         $("#flashmid").fadeIn(400).html('Delete Successful!');
                         $("#flashmid").fadeOut(400);  
                      }
                },
                error: function(xhr, textStatus, error){
                   console.log(xhr.statusText);
                   console.log(textStatus);
                   console.log(error);
                   alert("error in deleting");
                }
            });   
  } 
```

请帮助我解决各种问题。当我定期检查数据库更改时，该帖子实际上有效......但我需要它在点击时工作，并且在用户选择是删除后。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-21T12:11:05.563

我知道这是一个老问题。但我的问题是一样的。

也许我们的问题是按钮中的数据关闭。我认为它可能会减轻表单中的所有数据，但我不太确定。

至于我，这个解决方案有效：

我用 jquery 函数隐藏了模态 onclick，一切正常。

```
$('#newBuildingSubmit').click(function(){

                                $('#newBuildingModal').modal('hide');

                               // AJAX CODE HERE

                            }); 
```

我的按钮看起来像这样：

```
<button type="submit" id="newBuildingSubmit" class="btn btn-primary"><span class="glyphicon glyphicon-ok"></span> Speichern</button> 
```

我的按钮被包裹在一个模式中。

迟到的答案，但可能对面临同样问题的其他人有所帮助:)。

# javascript - Jquery 不能正确调整窗口大小

> ID：14287147
> 
> 赞同：0
> 
> 时间：2013-01-11T21:43:50.487
> 
> 标签：javascript, jquery

在调整窗口浏览器的大小时，我设法使边距变小并且正文的宽度保持不变。问题是**“#content”仍然闪烁**一秒钟。

如果您测试下面的代码，您会明白我的意思。很难表达它的行为。有人知道如何解决吗？它与回调函数和事件顺序有什么关系。谢谢你。

这是代码：

```
<html>
    <head>          
        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>     
        <style>
            html, body{
                padding: 0;         
                margin: 0, auto;                
            }           
            body{
                position:absolute;
                margin: 0px;
                padding: 0px;
            }
            #content{
                background-color: green;
            }
            #mainContent{
                background-color: orange; 
            }
            aside{
                background-color: blue;
            }
            .floatLeft{
                float:left;
            }
            .clear{
                clear:both;
            }
        </style>
    </head>
    <body>      
        <section id="content" class="border">
            <section id="mainContent" class="floatLeft" >   
                mainContent
            </section>                      
            <!-- End of main content -->

            <aside class="floatLeft">                               
                aside                   
            </aside>
            <!-- End of aside -->

            <p class="clear"></p>

        </section>
        <!-- End of content -->

        <script type="text/javascript">
            $(document).ready(function(){               
                change_template();
            });

            change_template = function(){       
                var window_h, window_w, top, left_right, content_w, mcontent_w, aside_w, left_right2, last_width;       
                left_right = 180;

                aux = left_right;

                top = screen.height - (screen.height - 100);            
                left_right = left_right - (screen.width -  $(window).width())/2;

                resize_body(top, left_right, left_right);

                    last_width = $(window).width();

                    $( window ).resize(
                    function(){

                        if($(window).width() > last_width){

                            left_right = left_right + ($(window).width() - last_width)/2;                           

                        }else if($(window).width() < last_width){

                            left_right = left_right - (last_width -  $(window).width())/2;

                        }

                        resize_body(top, left_right, left_right);

                            last_width = $(window).width();                         

                    });                                                 

                content_w = screen.width - 2*aux;                   

                mcontent_w = content_w - 300;
                $('#mainContent').css('width', mcontent_w);

                aside_w = content_w - mcontent_w;
                $('aside').css('width', aside_w);                               

            }

            resize_body = function(top, left, right){

                $('body').css('top', top+'px');
                $('body').css('left', left+'px');
                $('body').css('right', right+'px');             
            }
        </script>               
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T22:27:49.507

它闪烁的原因是因为浏览器每秒只向 JavaScript 发送“调整大小”事件这么多次（取决于您使用的浏览器），并且您的浏览器只能如此快速地执行代码（取决于浏览器和您的计算机的功能）是）。您所做的几乎是每秒执行数十次调整大小功能，并且代码运行速度不够快，无法跟上您调整窗口大小的速度。此外，当您最终停止移动窗口并触发最终调整大小事件时，运行代码需要时间 - 它不仅会立即完成，所有代码都需要一些时间才能运行。

如果您不想注意到闪烁，请使用媒体查询。

# sql - 如何使用 DBIx::Class 创建不区分大小写的唯一索引

> ID：14287150
> 
> 赞同：1
> 
> 时间：2013-01-11T21:44:11.293
> 
> 标签：sql, perl, postgresql, dbix-class

我正在使用 Postgres，我希望使用 DBIx::Class 在我的数据库上创建一个不区分大小写的唯一约束。

我明白一个例子是：

```
__PACKAGE__->add_unique_constraint("table_unique_constraint", ["col_name"]); 
```

将在给定表上创建唯一约束。

我正在寻找一种方法来更好地使用 DBIx::Class 创建不区分大小写的唯一约束，但我会说我想创建一个唯一索引。我试图生成的 SQL 查询类似于：

```
CREATE UNIQUE INDEX table_unique_constraint ON "table_name"(lower("column_name")); 
```

这个例子确保我在不考虑大小写的情况下检查表中的值是否插入了条目。

有没有办法将它添加到结果中？特别是，捕获是lower（）。

当然，[DBIx::Class Manual](http://search.cpan.org/~jrobinson/DBIx-Class-Manual-SQLHackers-1.1/lib/DBIx/Class/Manual/SQLHackers/CREATE.pod#UNIQUE_indexes)指导我创建约束而不是唯一索引的挂钩。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T11:55:11.943

DBIx::Class 本身不会创建 DDL 查询，因此您的问题不适用。如果您使用 $schema->deploy，则在后台使用 SQL::Translator。我不认为 DBIC 可以保存这种特殊的元数据来控制唯一密钥的创建，但请查看 SQL::Translator 文档以确保真正确定。我建议使用 deployment_statements 创建 DDL 语句并修改生成的语句，或者使用 after deploy 方法修饰符执行更改 SQL 语句以使生成的约束不区分大小写。

# html - 下载整个 HTML 页面？

> ID：14287161
> 
> 赞同：4
> 
> 时间：2013-01-11T21:45:23.927
> 
> 标签：html, ruby, nokogiri

我正在尝试编写一个屏幕截图，我想下载一个网站的主页。

当我在浏览器上查看页面的源代码时，我没有看到完整的 HTML 代码。当我在浏览器中查看源代码时，如何确保加载我看到的所有内容？

```
# Required Gems
require 'rubygems' # Loads gems
require "nokogiri" # Nokogiri
require "open-uri" # For Nokogiri
require "chronic" # For time parsing
require "cgi" # For parsing urls
require 'net/http' # For image downloading

URL = URI.parse("http://www.gocrimson.com/landing/index")

hBOList = Nokogiri::HTML(open(URL)) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T06:47:36.350

浏览器的源视图不一定与请求的 HTML 文件本身相匹配，因为 Ajax 被用于在原始请求页面加载之后加载页面块。

如果页面使用 JavaScript 和 Ajax，则不能使用常规方法检索页面源，除非您解码整个内容加载链并在 Ruby 代码中重新创建它们。

或者，您可以使用 Ruby 可以与之通信的浏览器，告诉它加载初始页面，然后在浏览器中触发 JavaScript 的操作，浏览器将加载其他内容，然后您的代码可以提取它并执行您想要的操作. 为此，您应该查看[Watir](http://watir.com)或其衍生物之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T21:56:16.507

做：

```
require 'open-uri'
File.open("page_test.txt","w"){|f| f << open("http://www.gocrimson.com/landing/index").read} 
```

复制所需页面的全部内容？如果是这样，Nokogiri 在某处丢了一些东西和/或这些家伙在页面渲染后通过 JavaScript 加载了一些东西，如果不是，你的解析代码会很有趣。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T21:08:38.240

Hisako 和 redcup 你应该按照上面铁皮人的建议尝试 watir。就像是：

```
require 'rubygems'
require 'watir-webdriver'

browser = Watir::Browser.new
browser.goto "http://www.gocrimson.com/landing/index"

puts browser.html 
```

应该做你想做的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-13T08:56:45.173

我认为某些内容是通过单击某些按钮或某些操作后的 ajax 调用加载的。如果您知道您想要的东西以及执行此操作的操作。然后你可以看到[mechanize](https://github.com/sparklemotion/mechanize)。Mechanize 在内部使用 Nokogiri，它有助于加载需要一些操作的页面。

# java - primefaces viewscoped 和 sessionscoped 冲突

> ID：14287164
> 
> 赞同：1
> 
> 时间：2013-01-11T21:45:37.930
> 
> 标签：java, jsf, xhtml, primefaces

我有一个托管 bean，它从数据库中获取点并将它们添加到覆盖中。在同一个托管 bean 中，我从数据库中检索相关数据，并在用户单击任何标记时显示它们。

直到这里没有问题。我的托管 bean 使用`@SessionScoped`. 但是，当我尝试将项目添加到系统时，它会添加，但它仍然显示以前版本的数据。当我将其更改`@ViewScoped`为根据请求检索数据时，基本上它将数据作为其最后更新的状态。

这是我的豆：

```
@ManagedBean
@SessionScoped
public class MapBean implements Serializable{

    private static final long serialVersionUID = 1L;

    private MapModel simpleModel;
    private Marker marker;
    //genel
    private String projectName, projectExp, projectCoordLong, projectCoordLat, district, sector, workStatus, assistant, bidName, company, bidCost, costPaid;

    //getters and setters ...

    //süre bilgileri
    private String processTime = "0", startDate, endDate;
    //teknik bilgiler
    private String parcel, planStatus, roadLength, roadWidth, totalArea, extraInfo;
    //genel devam
    private String unitOffer, approxCost, projectCost, fileNu;
    //idare kontrol teşk.
    private String chef, arch, strEng, landArch, elecEng, geoEng, machEng, mapEng, planEng;
    //ihale önce takip
    private String assistantBefore, engArch;
    //uygulamacı birim kontrol teşkilatı
    private String mudYard, mim, ins, peyz, elek;
    //fima iletişim bilgileri
    private String compResp, compResJob, compTel, compAddress, compMail,total;

    public String getTotal() {
        return total;
    }

    public void setTotal(String total) {
        this.total = total;
    }

    public MapModel getSimpleModel() {
        return simpleModel;
    }
    //con to db
    Connection con = DriverManager.getConnection("jdbc:mysql://localhost:3306/projetakip?useUnicode=true&characterEncoding=utf-8", "root", "");
    Statement stmt = con.createStatement();
    String SQL;
    ResultSet rs;

    public MapBean() throws Exception {
        SQL = "select * from projects";
        rs = stmt.executeQuery(SQL);
        simpleModel = new DefaultMapModel();
        LatLng coord1;

        //add markers to map
        while (rs.next()) {
            coord1 = new LatLng(Double.valueOf(rs.getString("projectCoordLat")), Double.valueOf(rs.getString("projectCoordLon")));
            simpleModel.addOverlay(new Marker(coord1, rs.getString("id"), "", "http://maps.google.com/mapfiles/ms/micons/red-dot.png"));
        }

    }

    public void onMarkerSelect(OverlaySelectEvent event) throws Exception {
        marker = (Marker) event.getOverlay();

        Statement stmt2= con.createStatement();
        String markerSQL = "select * from projects where id=" + marker.getTitle();
        ResultSet markerRs = stmt.executeQuery(markerSQL);

        while (markerRs.next()) {

            //proje bilgisi
            projectName = markerRs.getString("projectName");
            startDate = markerRs.getString("startDate");
            endDate = markerRs.getString("endDate");
            company = markerRs.getString("company");
            bidCost = markerRs.getString("biddCost");
            sector = markerRs.getString("sector");
            workStatus = markerRs.getString("workStatus");
            projectExp = markerRs.getString("projectExp");
            projectCoordLat = markerRs.getString("projectCoordLat");
            projectCoordLong = markerRs.getString("projectCoordLon");
            district = markerRs.getString("district");
            assistant = markerRs.getString("assistant");
            bidName = markerRs.getString("bidName");
            costPaid = markerRs.getString("costPaid");
            processTime = markerRs.getString("processTime");

            //teknik bilgiler
            parcel = markerRs.getString("parcel");
            planStatus = markerRs.getString("planStatus");
            roadWidth = markerRs.getString("roadWidth");
            roadLength = markerRs.getString("roadLength");
            totalArea = markerRs.getString("totalArea");
            extraInfo = markerRs.getString("extraInfo");
            unitOffer = markerRs.getString("unitOffer");
            approxCost = markerRs.getString("approxCost");
            projectCost = markerRs.getString("projectCost");
            fileNu = markerRs.getString("fileNu");

            //idare kontrol teşkilatı
            chef = markerRs.getString("chef");
            arch = markerRs.getString("arch");
            strEng = markerRs.getString("strEng");
            landArch = markerRs.getString("landArch");
            elecEng = markerRs.getString("elecEng");
            geoEng = markerRs.getString("geoEng");
            machEng = markerRs.getString("machEng");
            mapEng = markerRs.getString("mapEng");
            planEng = markerRs.getString("planEng");

            //uyg birim teşk
            mudYard = markerRs.getString("mdYard");
            mim = markerRs.getString("mim");
            ins = markerRs.getString("ins");
            peyz = markerRs.getString("peyz");
            elek = markerRs.getString("elek");

            assistantBefore = markerRs.getString("assistantBefore");
            engArch = markerRs.getString("engArch");

            //firma iletişim
            compResp = markerRs.getString("compRes");
            compResJob = markerRs.getString("compResJob");
            compTel = markerRs.getString("compTel");
            compAddress = markerRs.getString("compAddress");
            compMail = markerRs.getString("compMail");

        }

        //addMessage(new FacesMessage(FacesMessage.SEVERITY_INFO, "Seçilen proje:", marker.getTitle()));

    }

    public Marker getMarker() {
        return marker;
    }
} 
```

这是我的 jsf 片段：

```
<script src="http://maps.google.com/maps/api/js?sensor=false" type="text/javascript"></script>
            <p:growl id="growl" showDetail="true"/>
            <p:gmap center="41.067445,29.047749" zoom="11" type="HYBRID"  model="#{mapBean.simpleModel}" style="width:100%;height:100%" streetView="true"> 
                <p:ajax event="overlaySelect" listener="#{mapBean.onMarkerSelect}" update="growl"/>
                <p:gmapInfoWindow rendered="true">  

                    <h:form id="form">  

                        <p:tabView id="tabView" dynamic="true" cache="true"  orientation="top" effect="blind" style="font-size: 10px;font-weight: bold;"> 

                            <p:tab id="tab1" title="Proje Bilgileri" >

                                <h:panelGrid columns="2" cellpadding="3">  
                                    <h:outputText value="Proje Adı: " style="font-size: 13px;"/>  
                                    <h:outputText value="#{mapBean.projectName}" style="font-weight: bold; font-size: 13px;"/>  

                                    <h:outputText value="Proje Detayı: " style="font-size: 13px;"/>  
                                    <h:outputText value="#{mapBean.projectExp}" style="font-weight: bold; font-size: 13px;"/>  

                                    <h:outputText value="Proje Koordinatları: " style="font-size: 13px;"/>  
                                    <h:outputText value="#{mapBean.projectCoordLat}, #{mapBean.projectCoordLong}" style="font-weight: bold; font-size: 13px;"/>  

                                    <h:outputText value="İlçe: " style="font-size: 13px;"/>  
                                    <h:outputText value="#{mapBean.district}" style="font-weight: bold; font-size: 13px;"/>  

                                    <h:outputText value="Sektör: " style="font-size: 13px;"/>  
                                    <h:outputText value="#{mapBean.sector}" style="font-weight: bold; font-size: 13px;"/>       

                                    <h:outputText value="İş Durumu: " style="font-size: 13px;"/>  
                                    <h:outputText value="#{mapBean.workStatus}" style="font-weight: bold; font-size: 13px;"/> 

                                    <h:outputText value="Sorumlu Müd. Yard.: " style="font-size: 13px;"/>  
                                    <h:outputText value="#{mapBean.assistant}" style="font-weight: bold; font-size: 13px;"/>      

                                    <h:outputText value="İhale Adı: " style="font-size: 13px;"/>  
                                    <h:outputText value="#{mapBean.bidName}" style="font-weight: bold; font-size: 13px;"/>      

                                    <h:outputText value="Firma: " style="font-size: 13px;"/>  
                                    <h:outputText value="#{mapBean.company}" style="font-weight: bold; font-size: 13px;"/>  

                                    <h:outputText value="İhale Bedeli: " style="font-size: 13px;"/>  
                                    <h:outputText value="#{mapBean.bidCost}" style="font-weight: bold; font-size: 13px;"/>  

                                    <h:outputText value="Ödenen Hak Ediş Tutarı: " style="font-size: 13px;"/>  
                                    <h:outputText value="#{mapBean.costPaid}" style="font-weight: bold; font-size: 13px;"/>   

                                    <h:outputText value="SÜRE BİLGİSİ" style="font-weight: bold; font-size: 13px; float: right; font-style: italic"/><p:separator />

                                    <h:outputText value="Başlangıç Tarihi: " style="font-size: 13px;"/>  
                                    <h:outputText value="#{mapBean.startDate}" style="font-weight: bold; font-size: 13px;"/>  

                                    <h:outputText value="İşin Süresi: " style="font-size: 13px;"/>  
                                    <h:outputText value="#{mapBean.processTime}" style="font-weight: bold; font-size: 13px;"/>     

                                    <h:outputText value="Bitiş Tarihi: " style="font-size: 13px;"/>  
                                    <h:outputText value="#{mapBean.endDate}" style="font-weight: bold; font-size: 13px;"/> 
                                </h:panelGrid>
                            </p:tab>  

                            <p:tab id="tab2" title="Teknik Bilgiler">  
                                <h:panelGrid columns="2" cellpadding="3">  
                                    <h:outputText value="Ada/Parsel: " style="font-size: 13px;"/>  
                                    <h:outputText value="#{mapBean.parcel}" style="font-weight: bold; font-size: 13px;"/> 

                                    <h:outputText value="Plan Durumu: " style="font-size: 13px;"/>  
                                    <h:outputText value="#{mapBean.planStatus}" style="font-weight: bold; font-size: 13px;"/> 

                                    <h:outputText value="Yolun Genişliği: " style="font-size: 13px;"/>  
                                    <h:outputText value="#{mapBean.roadWidth}" style="font-weight: bold; font-size: 13px;"/> 

                                    <h:outputText value="Yolun Uzunluğu: " style="font-size: 13px;"/>  
                                    <h:outputText value="#{mapBean.roadLength}" style="font-weight: bold; font-size: 13px;"/> 

                                    <h:outputText value="Toplam Alan: " style="font-size: 13px;"/>  
                                    <h:outputText value="#{mapBean.totalArea}" style="font-weight: bold; font-size: 13px;"/> 

                                    <h:outputText value="İlave Bilgi: " style="font-size: 13px;"/>  
                                    <h:outputText value="#{mapBean.extraInfo}" style="font-weight: bold; font-size: 13px;"/> 

                                    <h:outputText value="Teklif Birim Fiyat: " style="font-size: 13px;"/>  
                                    <h:outputText value="#{mapBean.unitOffer}" style="font-weight: bold; font-size: 13px;"/> 

                                    <h:outputText value="Yapım Yaklaşık Maliyeti: " style="font-size: 13px;"/>  
                                    <h:outputText value="#{mapBean.approxCost}" style="font-weight: bold; font-size: 13px;"/> 

                                    <h:outputText value="Proje Maliyeti: " style="font-size: 13px;"/>  
                                    <h:outputText value="#{mapBean.projectCost}" style="font-weight: bold; font-size: 13px;"/> 

                                    <h:outputText value="Dosya Kodu: " style="font-size: 13px;"/>  
                                    <h:outputText value="#{mapBean.fileNu}" style="font-weight: bold; font-size: 13px;"/> 

                                </h:panelGrid>  
                            </p:tab>  

                            <p:tab id="tab3" title="Proje Teşkilatı">  
                                <h:panelGrid columns="2" cellpadding="3">  

                                    <h:outputText value="Şef: " style="font-size: 13px;"/>  
                                    <h:outputText value="#{mapBean.chef}" style="font-weight: bold; font-size: 13px;"/> 

                                    <h:outputText value="Mimar: " style="font-size: 13px;"/>  
                                    <h:outputText value="#{mapBean.arch}" style="font-weight: bold; font-size: 13px;"/> 

                                    <h:outputText value="İnşaat Mühendisi: " style="font-size: 13px;"/>  
                                    <h:outputText value="#{mapBean.strEng}" style="font-weight: bold; font-size: 13px;"/> 

                                    <h:outputText value="Peyzaj Mimarı: " style="font-size: 13px;"/>  
                                    <h:outputText value="#{mapBean.landArch}" style="font-weight: bold; font-size: 13px;"/> 

                                    <h:outputText value="Elektrik Mühendisi: " style="font-size: 13px;"/>  
                                    <h:outputText value="#{mapBean.elecEng}" style="font-weight: bold; font-size: 13px;"/> 

                                    <h:outputText value="Jeoloji Mühendisi: " style="font-size: 13px;"/>  
                                    <h:outputText value="#{mapBean.geoEng}" style="font-weight: bold; font-size: 13px;"/> 

                                    <h:outputText value="Makine Mühendisi: " style="font-size: 13px;"/>  
                                    <h:outputText value="#{mapBean.machEng}" style="font-weight: bold; font-size: 13px;"/> 

                                    <h:outputText value="Harita Mühendisi: " style="font-size: 13px;"/>  
                                    <h:outputText value="#{mapBean.mapEng}" style="font-weight: bold; font-size: 13px;"/> 

                                    <h:outputText value="Şehir Plancısı: " style="font-size: 13px;"/>  
                                    <h:outputText value="#{mapBean.planEng}" style="font-weight: bold; font-size: 13px;"/> 

                                    <h:outputText value="İHALE ÖNCESİ TAKİP" style="font-weight: bold; font-size: 13px; float: right; font-style: italic"/><p:separator />

                                    <h:outputText value="Sorumlu Müd. Yard.: " style="font-size: 13px;"/>  
                                    <h:outputText value="#{mapBean.assistantBefore}" style="font-weight: bold; font-size: 13px;"/> 

                                    <h:outputText value="Sorumlu Müh./Mimar: " style="font-size: 13px;"/>  
                                    <h:outputText value="#{mapBean.engArch}" style="font-weight: bold; font-size: 13px;"/> 

                                    <h:outputText value="UYGULAMACI KONTROL TEŞKİLATI" style="font-weight: bold; font-size: 13px; float: right; font-style: italic"/><p:separator />

                                    <h:outputText value="Müdür Yard.: " style="font-size: 13px;"/>  
                                    <h:outputText value="#{mapBean.mudYard}" style="font-weight: bold; font-size: 13px;"/> 

                                    <h:outputText value="Mimar: " style="font-size: 13px;"/>  
                                    <h:outputText value="#{mapBean.mim}" style="font-weight: bold; font-size: 13px;"/> 

                                    <h:outputText value="İnşaat Mühendisi: " style="font-size: 13px;"/>  
                                    <h:outputText value="#{mapBean.ins}" style="font-weight: bold; font-size: 13px;"/> 

                                    <h:outputText value="Peyzaj Mimarı: " style="font-size: 13px;"/>  
                                    <h:outputText value="#{mapBean.peyz}" style="font-weight: bold; font-size: 13px;"/> 

                                    <h:outputText value="Elektrik Mühendisi: " style="font-size: 13px;"/>  
                                    <h:outputText value="#{mapBean.elek}" style="font-weight: bold; font-size: 13px;"/> 

                                </h:panelGrid>
                            </p:tab>  

                            <p:tab id="tab4" title="Firma Bilgisi">  
                                <h:panelGrid columns="2" cellpadding="3">  

                                    <h:outputText value="Yetkili Kişi: " style="font-size: 13px;"/>  
                                    <h:outputText value="#{mapBean.compResp}" style="font-weight: bold; font-size: 13px;"/> 

                                    <h:outputText value="Görevi: " style="font-size: 13px;"/>  
                                    <h:outputText value="#{mapBean.compResJob}" style="font-weight: bold; font-size: 13px;"/> 

                                    <h:outputText value="Telefon: " style="font-size: 13px;"/>  
                                    <h:outputText value="#{mapBean.compTel}" style="font-weight: bold; font-size: 13px;"/> 

                                    <h:outputText value="Adres: " style="font-size: 13px;"/>  
                                    <h:outputText value="#{mapBean.compAddress}" style="font-weight: bold; font-size: 13px;"/> 

                                    <h:outputText value="E-Posta: " style="font-size: 13px;"/>  
                                    <h:outputText value="#{mapBean.compMail}" style="font-weight: bold; font-size: 13px;"/>     

                                </h:panelGrid>  
                            </p:tab>  

                            <p:tab title="Yorumlar">  
                                <h:panelGrid columns="2" cellpadding="10">  
                                    <p:graphicImage value="/images/pdf.png" />  
                                    <h:outputText value=""/>
                                </h:panelGrid>  
                            </p:tab> 

                            <p:tab title="Dosyalar">  
                                <h:panelGrid columns="2" cellpadding="10">  
                                    <p:graphicImage value="/images/pdf.png" />  
                                    <h:outputText value=""/>
                                </h:panelGrid>  
                            </p:tab> 

                            <p:tab title="Resimler">  
                                <h:panelGrid columns="2" cellpadding="10">  
                                    <p:graphicImage value="/images/pdf.png" />  
                                    <h:outputText value=""/>
                                </h:panelGrid>  
                            </p:tab> 

                        </p:tabView>
                        <br />
                        <center>
                            <h:outputText value="Toplam Proje Sayısı: #{mapBean.total}" style="font-size: 13px;"/>  
                        </center>
                    </h:form>

                </p:gmapInfoWindow>
            </p:gmap> 
```

如图所示，我单击一个标记，它会在选项卡中显示数据。当我使用`@SessionBean`它时，它会填充所有选项卡，但不会在当前会话中从数据库中获取最后更新。

当我使用`@ViewScoped`它时，它会识别最后的更新，但只填充第一个选项卡。其他都是空的。

我怎样才能做到这一点？任何帮助将不胜感激。

# jquery-mobile - trigger.io 和 jquery mobile - 在 android 上运行缓慢？

> ID：14287165
> 
> 赞同：2
> 
> 时间：2013-01-11T21:45:38.760
> 
> 标签：jquery-mobile, trigger.io

我有一个使用 HTML5 + jQuery mobile 的非常基本的测试应用程序（网络上没有发生任何事情等）并且正在使用`TriggerIO`. 它明显比在我的 Droid4 上运行的任何其他应用程序慢，即使在关闭转换之后也是如此。

在这个看似简单的公式中是否有明显的东西我可能会丢失会导致缓慢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T16:15:30.687

这是一个可以与 trigger.io 一起使用的 jQuery Mobile + Backbone.js 模板 -

[https://github.com/draghor/jquery-mobile-backbone-template](https://github.com/dragthor/jquery-mobile-backbone-template)

页面转换已启用。在您的设备上尝试一下没有害处。让我知道我是否可以提供帮助。

# linux - SORT - 如果某些列中缺少值怎么办？

> ID：14287167
> 
> 赞同：0
> 
> 时间：2013-01-11T21:45:44.677
> 
> 标签：linux, bash, unix, sorting

我想使用 SORT 命令根据第 5 列对表格文件进行排序，但是，第 3 列中有一些缺失值。而且我注意到 sort 命令不能与 -k5,5 一起正常工作，但是 -k1,1 或 -k2,2 没有问题。是因为缺少值吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T21:53:02.983

默认情况下，`sort`只要有一个空格字符后跟一个非空格字符，就会认为一个字段开始。例如，在这个片段中：

```
a     b     c     d
e           f     g 
```

第一行有四个字段，第二行有三个字段。

如果要使用不同的分隔符，可以使用`-t`选项指定。例如，要将制表符用作分隔符，您可以编写：

```
sort -t $'\t' -k 5,5 
```

这将允许`sort`检测空字段（因为两个连续的选项卡将被解释为两个不同的分隔符，它们之间有一个空字段）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T21:57:34.497

如果您有时缺少列，我会猜测您的数据是固定格式的，即文本对齐如下：

```
1  2       3
2 23   12345 
```

或这个

```
1  2   3
2  23  12345 
```

而不是这个

```
1 2 3
2 23 12345 
```

如果这是真的，您可以使用实际上没有出现在输入中的制表符，并使用键对现在的单字段`-t/ -k1.20`进行排序，例如对从第 20 列开始的字符进行排序。

# amazon-web-services - 连接到 AWS EC2 上的 redis 服务器

> ID：14287176
> 
> 赞同：7
> 
> 时间：2013-01-11T21:46:24.787
> 
> 标签：amazon-web-services, amazon-ec2, redis, remote-access

我正在尝试连接到在 EC2 上运行的 redis 服务器。我取消注释 redis conf 文件中的绑定行。

```
>> netstat -nlpt | grep 6379
tcp        0      0 0.0.0.0:6379            0.0.0.0:*               LISTEN      - 
```

但我仍然无法使用以下命令连接到它：

```
redis-cli -h ec2-xx-xx.us-west-1.compute.amazonaws.com -p 6379 
```

我在这里错过了什么吗？我可以通过 ssh 连接 ec2 盒子：

```
ssh -i ~/.ec2/ec2.pem ubuntu@ec2-xx-xx.us-west-1.compute.amazonaws.com 
```

谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-11T22:27:31.020

您需要设置与实例关联的安全策略以允许端口 6379 上的入站流量。

# jquery - 如何在 TinyMCE 编辑器中获取和设置 CSS 类？

> ID：14287179
> 
> 赞同：2
> 
> 时间：2013-01-11T21:46:48.113
> 
> 标签：jquery, css, tinymce

这是两个问题，但也是一个问题：

*   如何获取当前/选定的对象 CSS `class`？

*   如何设置当前/选定对象 CSS `class`？

我正在使用 TinyMCE 3.5.8（jQuery 版本）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T08:36:23.043

您可以使用

```
var node = tinymce.get('your_editor_id').selection.getNode(); 
```

和班级

```
$(node).attr("class"); 
```

# iframe - 有没有办法使用 iframe 阻止推荐的 youtube 视频？

> ID：14287181
> 
> 赞同：0
> 
> 时间：2013-01-11T21:47:01.480
> 
> 标签：iframe, youtube

我正在使用 iFrame 在我的网站上显示一些 youtubes 视频。有没有办法删除出现在视频末尾的推荐视频？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T21:51:29.517

是的，只是想知道您是否阅读过 YouTube API？明确说明：&rel=0

# javascript - 在回调时从代码隐藏更改 javascript 变量

> ID：14287184
> 
> 赞同：-1
> 
> 时间：2013-01-11T21:47:11.810
> 
> 标签：javascript, asp.net

好的，所以我已经在这个上旋转了很长时间了，和往常一样，我确信这是一个非常简单的修复，所以这里......

我需要使用我的代码隐藏文件中的变量设置一个 javascript 变量。通常，我这样做如下：

```
var Test = <%= TestVar%> 
```

在正常的页面加载中，这种方法（虽然可能不是最好的方法）对我来说非常有用。我现在遇到的问题是，我需要使用回调/更新面板更改回调上的变量。我所拥有的是，该变量设置在页面标题的 javascript 块中，然后我调用一个函数，该函数利用回调面板的 EndCallback 事件中的变量。

```
var Var1 = <%= Var1%>;
function endCallback()
{
    //some action with Var1;
} 
```

一切运行良好，除了服务器标签没有重新加载（因为我没有进行整页回发）。有没有更好的方法来更新部分回发的 javascript 变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T22:13:10.337

如果要更改服务器变量，则需要 ajax 调用。使用 jquery 或其他方法。在服务器端，您需要创建一个方法，也许是一个 Web 服务。然后从发送新值的客户端调用它。

客户端：

```
$.ajax({
   url: "(webservice url)",
   data:(parameters if needed),
   success:function(response){
        variable = response;
   }
}); 
```

服务器端：

```
[WebMethod()]
public object GetValue(object param1){
   ...
   return new_value;
} 
```

# python - 动画 mayavi points3d 图

> ID：14287185
> 
> 赞同：12
> 
> 时间：2013-01-11T21:47:15.350
> 
> 标签：python, animation, vtk, mayavi

我正在尝试制作粒子轨迹的视频。但是，不知何故，我的场景永远不会更新。这是一个非常简单的例子：

```
from __future__ import absolute_import, division, print_function
from mayavi import mlab
import numpy as np
import math

alpha = np.linspace(0, 2*math.pi, 100)  

xs = np.cos(alpha)
ys = np.sin(alpha)
zs = np.zeros_like(xs)

mlab.points3d(0,0,0)
plt = mlab.points3d(xs[:1], ys[:1], zs[:1])

@mlab.animate(delay=100)
def anim():
    f = mlab.gcf()
    while True:
        for (x, y, z) in zip(xs, ys, zs):
            print('Updating scene...')
            plt.mlab_source.x[0] = x
            plt.mlab_source.y[0] = y
            plt.mlab_source.z[0] = z
            f.scene.render()
            yield

anim()
mlab.show() 
```

如果我运行这个脚本，它会显示一个带有两个点和动画 GUI 的窗口。它还在终端上打印连续的“更新场景...”消息流。但是，场景根本没有显示任何动静。

我究竟做错了什么？

Python 2.7、Mayavi 4.1、VTK 5.8

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-10-26T01:05:45.110

只需更改为：

...

```
 for (x, y, z) in zip(xs, ys, zs):
        print('Updating scene...')
        plt.mlab_source.set(x=x, y=y, z=z)
        yield 
```

...

`f.scene.render()`根据[文档](http://docs.enthought.com/mayavi/mayavi/mlab_animating.html#mlab-animating-data) ，您甚至不需要,`mlab_source.set`保证刷新。

此外，由于`shape`您的数据没有改变，您不需要使用`mlab_source.reset`.

我也测试过并且工作正常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T21:54:17.167

你试过 mlab_source.reset 吗？即使 x、y 和 z 数组的长度发生变化，它也能正常工作。

在您的情况下，它将是： `plt.mlab_source.reset(x=x,y=y,z=z)`.

# sql - 比较相似列的相等性

> ID：14287188
> 
> 赞同：1
> 
> 时间：2013-01-11T21:47:34.897
> 
> 标签：sql, equality, inequality

我有一个（简化的）表，其结构如下：

```
Table: ItemData

PK | ItemID | StoreFK | Retail
1  | 100101 | 1       | 4.99
4  | 100101 | 2       | 4.99
7  | 100101 | 3       | 0.99
2  | 100102 | 1       | 6.99
5  | 100102 | 2       | 6.99
8  | 100102 | 3       | 6.99
3  | 100103 | 1       | 7.99
6  | 100103 | 2       | 8.99
9  | 100103 | 3       | 9.99 
```

我想退回一家或多家商店零售店不同的所有商品：

**回报：**

```
ItemID
100101 
100103 
```

*   商品在商店`100101`的零售额低于商店的零售价，并且被退回。`3``1``2`

*   商品`100103`在每个商店位置都有不同的零售店，因此会被退回。

*   商品`100102`在所有三个商店的零售额相同，因此不予退货。

我对 SQL 并不陌生，但我不知道如何在有效的庄园中检查这种不等式。根据另一列上的分组检查一列中是否相等的最佳方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T21:59:42.757

我能想到的最简单的解决方案是将每个的平均值与每个`ItemID`的最大值*（或最小值）*进行比较`ItemID`

**SQL 语句类似于**

```
SELECT ItemID
FROM   ItemData
GROUP BY
       ItemID
HAVING MAX(Retail) <> AVG(Retail) 
```

*请注意，如果`retail`可以为空，则存在场景的此方法失败。*

请参阅此[SQL Fiddle 演示](http://www.sqlfiddle.com/#!6/d41d8/1948)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T22:15:03.193

另一种方法：但我仍然喜欢@Liven 的回答 :) 我的查询**也告诉您不同价格**的数量。

```
select x.itemid, count(x.storefk) from (
select a.* , 
row_number() over 
(partition by a.retail order by
                   a.itemid desc) as r
from retailers a)x
group by x.itemid, x.r
having count(*) > 1
; 
```

结果：根据 OP 更新的问题和数据。

```
| ITEMID | COLUMN_1 |
---------------------
| 100101 |        2 |
| 100103 |        3 | 
```

*   [SQLFIDDLE 演示](http://sqlfiddle.com/#!3/b9c6f/1)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T22:01:24.190

```
SELECT *
  FROM ItemData
  WHERE itemID IN ( SELECT itemID
                      FROM ItemData
                      GROUP BY itemID
                      HAVING COUNT(DISTINCT Retail) > 1
                  ) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-11T22:55:46.567

恕我直言，我更喜欢这个：

```
SELECT ItemID
FROM   ItemData
GROUP BY
       ItemID
HAVING COUNT(DISTINCT Retail)>1 
```

# asp.net - 页面上有多个表单标签的奇怪行为

> ID：14287189
> 
> 赞同：-1
> 
> 时间：2013-01-11T21:47:34.877
> 
> 标签：asp.net, multiple-forms

我看到一些奇怪的东西，我不知道它是这样工作的。

我有一个基于模板的 ASP.NET 页面，该页面有一个带有 runat="server 标记的表单。在这个页面上，我有另一个表单，它是客户端的，所以它没有 runat="server" 标记。这个表单包含一个带有指向第三方网站的 URL 的操作属性。单击此表单的提交按钮时，表单永远不会通过，页面就这样。

如果我在此页面上的标签正上方添加另一个标签，那么我可以将表单提交到操作 URL。我的问题是为什么表单不提交，除非我在其中放置一个额外的空标签？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T22:32:12.187

您[不能嵌套 HTML 表单](http://www.w3.org/MarkUp/html3/forms.html)

> 每个表单都必须包含在一个 FORM 元素中。一个文档中可以有多个表单，但 FORM 元素不能嵌套。

看看[PostBackUrl](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.button.postbackurl.aspx)是否能解决您在 ASP.Net *Web Forms*中的需求。

*除此之外，您当然可以使用 ASP.Net Razor，从而摆脱 ASP.Net Web Forms*的“单一 FORM 网页模型” 。

# android - android：无法将只读数据库从版本 0 升级到 1

> ID：14287191
> 
> 赞同：3
> 
> 时间：2013-01-11T21:47:44.777
> 
> 标签：android, database, version, upgrade

我知道有许多具有相同标题的主题，但我已经尝试了所有主题。我无法解决我的问题。
我得到的错误正是这个：

android.database.sqlite.SQLiteException: Can't upgrade read-only database from version 0 to 1: /data/data/com.halilkaya.flashcard/databases/flashcarddb.db

实际上，它有效在模拟器上，但是当我将它安装到我的手机上时，它不起作用！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T21:51:48.803

希望你放弃桌子并再次升级它，如下所示

```
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    db.execSQL("DROP TABLE IF EXISTS " + LOCATION_TABLE);
    db.execSQL("DROP TABLE IF EXISTS " + PHONE_TABLE);
    // Create tables again
    onCreate(db);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-01T17:43:51.410

当我点击这个时，logcat 中早些时候出现了另一个 sql 异常（我的 HTC OneX 测试手机喜欢隐藏崩溃，让我去寻找它们而不是仅仅崩溃）。我的升级逻辑中有一个格式错误的语句。一旦我清除了它，我不再收到“无法升级只读数据库”错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-09T03:53:56.383

这是一个使用意图从 onclick 按钮启动的类。

```
public class disp_emails_sent extends Activity

......
protected void onCreate(Bundle bd) 
    {
        super.onCreate(bd);
        setContentView(R.layout.disp_db_res);

        lv = (ListView) findViewById(R.id.myEmail_list);

        List<String> arrayL = new ArrayList<String>();
        db_handler dbHand = new db_handler(disp_emails_sent.this); 
```

上面显示的 (disp_emails_sent.this) 通常是您传递上下文的地方。this.getApplicationContext() 对我不起作用，但确实如此。

不知道它是如何工作的，但确实如此。

尝试了社区提供的上述答案，但这不是问题。

如果有人有，希望得到解释。

# java - 了解 ExecutorService 何时完成

> ID：14287195
> 
> 赞同：4
> 
> 时间：2013-01-11T21:47:59.200
> 
> 标签：java, multithreading

我正在尝试使用`ExecutorService`with`BlockingQueue<Runnable>`但退出脚本时遇到问题。它完成没有问题，但然后继续等待，我不知道是什么。

首先我有一堂课

```
public class GenericTask implements Runnable {
    public void run() {
        // do stuff
    }
} 
```

那么这是代码

```
BlockingQueue<Runnable> queue = new ArrayBlockingQueue<Runnable>(10000, true);
ExecutorService myExecutor = Executors.newFixedThreadPool(numThreads);

new Thread(new Runnable() {
    public void run() {
        for (; ; ) {
            try {
                myExecutor.execute(queue.take());
            } catch (InterruptedException ignored) {
            }
        }
    }
}).start();

while (...) {
    queue.put(new GenericTask());
}

int waitTime = 500;
myExecutor.shutdown();
try {
    while (!myExecutor.awaitTermination(waitTime, TimeUnit.MILLISECONDS)) {
        logger.info("Waiting...");
        Thread.sleep(waitTime);
    }
} catch (Exception e) {
    e.printStackTrace();
}

System.out.println("Finished!"); 
```

当它打印“完成！”时，它真的完成了，但是除非我添加一个，否则脚本会继续进行`System.exit(0)`，但我认为这是不正确的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T21:59:48.150

最后，您正确地关闭了线程池中的所有线程。但是还有另一个非守护线程阻止 JVM 终止。你能发现吗？这是你的匿名生产者线程，里面有无限循环：`for (;;)`。

使用[`Thread.setDaemon(true)`](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#setDaemon%28boolean%29)：

```
Thread t = new Thread(new Runnable() {
  //...
});
t.setDaemon(true);
t.start(); 
```

现在，当所有线程在`ExecutorService`关闭后终止时，`main`线程也会终止并且 JVM 将停止，因为您唯一剩余的线程是一个守护进程。

# java - 运行慢，内存占用高

> ID：14287204
> 
> 赞同：1
> 
> 时间：2013-01-11T21:48:31.730
> 
> 标签：java, performance, memory

我正在为我的班级编写一个基于文本的小型游戏。导航很简单，玩家可以点击按钮进入不同的部分。所有这些部分都被分成它们自己的代码块。到目前为止，我只设置了两个部分，每个部分都可以通过按钮相互访问。基本上：

```
private void level1() {
//Stuff here, player clicks a button which runs "level2();"
}

private void level2() {
//Stuff here, player clicks a button which runs "level1();"
} 
```

这样就可以了，但是在 1 和 2 之间来回单击后，程序开始运行非常缓慢。任务管理器报告大约 700MB 的内存使用情况。

我敢肯定，我遗漏了一些非常明显的东西。我正在寻找一种方法，让用户能够多次单击许多按钮，而不是让程序使用这么多资源。帮助将不胜感激。

编辑：更多代码。Choice1-3 是按钮的名称。变量已经在程序顶部声明，并在初始化部分设置。它们将使用每个代码块进行修改，例如 Scene1 和 2。

```
private void setScene1() // TITLE SCREEN
{
    TITLE.setText("Title Label");
    main.setText("Main text body for the game.");
    choice1.setText("Play");
    choice1.setBounds(10, 600, 996, 91); // This makes choice1 as large as
                                            // all three buttons combined.
    choice2.setEnabled(false);// There's only one option anyway.
    choice3.setEnabled(false);
    choice2.setVisible(false);
    choice3.setVisible(false);

    choice1.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent arg0) {
            setScene2();
        }
    });

}

private void setScene2() // CHARACTER GENERATION SCENE
{
    TITLE.setText("Character Generation");
    main.setEnabled(false); // Disable & Hide the main text window, as
                            // Chargen requires a nicer looking interface.
    main.setVisible(false);
    choice2.setEnabled(true);
    choice2.setVisible(true);
    choice1.setBounds(10, 600, 996, 34); //Resizing the bottom portion to fit two buttons
    choice2.setBounds(10, 645, 996, 34);
    choice1.setText("Continue");
    choice1.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent arg0) {
            // Nothing here for now
        }
    });
    choice2.setText("Back to the Title Screen");
    choice2.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent arg0) {
            main.setEnabled(true);
            main.setVisible(true);
            setScene1();
        }
    });

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T21:51:33.630

如果这两种方法继续相互调用，你最终会吃掉你的记忆：这就是递归。如果你从不返回调用树，它只会变得任意深，直到繁荣。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T22:09:20.233

问题似乎在于您每次切换场景时都添加了一个 ActionListener 。以前的 ActionListener 永远不会消失，但你在它上面堆叠了更多的东西来做同样的事情。每一个都执行相同的动作，所以当你按下切换场景时，它现在拥有的所有ActionListners也会去切换场景。你的 CPU 会上升，因为现在有 2^n 个 ActionListeners 等待输入，而且内存中有很多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T22:09:06.850

您应该在构造函数或其他地方添加 ActionListeners。这样，您每次按下按钮时都会添加一个新的 ActionListener（即使它相同）。

# xcode - Cocos2D 中的锯齿状边缘 - 抗锯齿问题？

> ID：14287209
> 
> 赞同：2
> 
> 时间：2013-01-11T21:49:08.937
> 
> 标签：xcode, cocos2d-iphone, antialiasing, pointer-aliasing

我们目前正在开发一个涉及图形（由边连接的节点）的游戏，我们希望能够移动节点。我们让节点移动（响应触摸），但是当边缘（用 .png 图像初始化）由于节点移动而重新渲染时，它们看起来是锯齿状的。我们尝试过使用 Aliasing 和 Anti-Aliasing，但无论我们做什么，边缘都是锯齿状的。

这是我们初始化边缘图像的地方（带有图像文件）：

```
-(id) initWithSet:(int)setNum Level:(int) levelNum
{
    if( (self=[super init]) ) {

           <code omitted>

           for (NSArray *e in self.level.targetGraph) {

               <code omitted>

               CCSprite *edgeOutline = [CCSprite spriteWithFile:@"EdgeOutline.png"];
               [edgeOutline setPosition:ccp((ax+bx)/2, (ay+by)/2)];
               edgeOutline.scaleX = (dist * edgeOutline.scaleX)/edgeOutline.contentSize.width;
               edgeOutline.scaleY = (self.nodeSize * 0.5 * edgeOutline.scaleY)/edgeOutline.contentSize.height;
               edgeOutline.rotation = -angle;
               [outlines addChild:edgeOutline];

               CCSprite *edgeFill = [CCSprite spriteWithFile:@"EdgeFill.png"];
               [edgeFill setPosition:ccp((ax+bx)/2, (ay+by)/2)];
               edgeFill.scaleX = (dist * edgeFill.scaleX)/edgeFill.contentSize.width;
               edgeFill.scaleY = (self.nodeSize * 0.4 * edgeFill.scaleY)/edgeFill.contentSize.height;
               edgeFill.rotation = -angle;
               [fills addChild:edgeFill];

         }

  return self;
} 
```

这里是我们更新边缘图的地方（使用 nextFrame 方法的后半部分）：

```
- (void) nextFrame:(ccTime)dt {

    for (NSArray *e in self.level.graph) {
        CCSprite *a = [self.graphNodeOutlines objectForKey:[e objectAtIndex:0]];
        double ax = a.position.x;
        double ay = a.position.y;
        CCSprite *b = [self.graphNodeOutlines objectForKey:[e objectAtIndex:1]];
        double bx = b.position.x;
        double by = b.position.y;

        double dx = ax-bx;
        double dy = ay-by;
        double angle = 90;
        if (dx != 0) {
            angle = atan2(ay-by, ax-bx)*180/M_PI;
        }
        double dist = sqrt(dx*dx+dy*dy);

        //TODO: get anti-aliasing to work in this next part!

        CCSprite *edgeOutline = [self.graphEdgeOutlines objectForKey:e];
        [edgeOutline setPosition:ccp((ax+bx)/2, (ay+by)/2)];
        edgeOutline.scaleX = (dist)/edgeOutline.contentSize.width;
        edgeOutline.scaleY = (self.nodeSize * 0.25)/edgeOutline.contentSize.height;
        edgeOutline.rotation = -angle;

        //The line we hoped would fix the jagged edge problem.
        [[edgeOutline texture] setAntiAliasTexParameters];

        CCSprite *edgeFill = [self.graphEdgeFills objectForKey:e];
        [edgeFill setPosition:ccp((ax+bx)/2, (ay+by)/2)];
        edgeFill.scaleX = (dist)/edgeFill.contentSize.width;
        edgeFill.scaleY = (self.nodeSize * 0.2)/edgeFill.contentSize.height;
        edgeFill.rotation = -angle;

        //The (same) line we hoped would fix the jagged edge problem.
        [[edgeFill texture] setAntiAliasTexParameters];

    }
} 
```

我们使用的是 Cocos2D v2.0 和 XCode v4.5。

任何帮助将不胜感激。谢谢！

更新：显示问题的图片：

![在此处输入图像描述](../Images/fdd1c20f50ef5df33f0eb40942863e49.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T01:26:22.060

我有办法！按照本教程的“添加 MainWindow.xib”部分：[http ://www.raywenderlich.com/4817/how-to-integrate-cocos2d-and-uikit](http://www.raywenderlich.com/4817/how-to-integrate-cocos2d-and-uikit)

不知何故，将一些图形职责交给 UIKit 解决了这个问题。雷是我的救星。

编辑：这似乎只能解决 ipad 上的问题。不知道为什么。

编辑2：忽略所有这些；所有抗锯齿都与模拟器缩放有关。相反，请帮我弄清楚这篇文章的含义： http: [//www.cocos2d-iphone.org/forum/topic/4773](http://www.cocos2d-iphone.org/forum/topic/4773)

# android - Googlemap 未在 PHONEGAP ANDROID 模拟器中显示

> ID：14287211
> 
> 赞同：0
> 
> 时间：2013-01-11T21:49:13.913
> 
> 标签：android, cordova, google-maps-api-3

现在我已经看到了一些与此相关的主题，其中大部分是因为宽度高度，但是我的代码中有这个。

```
<!DOCTYPE html>
<html>
<head>
    <title>MAP APPLICATION</title>
    <meta name="viewport" content="user-scalable=no,initial-scale=1, maximum-scale=1,minimum-scale=1, width=device-width;" />
    <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?key=----MY KEY---&sensor=true"></script>
    <script type="text/javascript" charset="utf-8" src="phonegap-1.9.0.js"></script>
    <script type="text/javascript" charset="utf-8">

    // Wait for PhoneGap to load
    //
    document.addEventListener("deviceready", onDeviceReady, false);

    var watchID = null;

    // PhoneGap is ready
    //
    function onDeviceReady() {
        // Update every 3 seconds
        var options = { frequency: 3000, enableHighAccuracy: true };
        watchID = navigator.geolocation.watchPosition(onSuccess, onError, options);
    }

    // onSuccess Geolocation
    //
    function onSuccess(position) {
            var element = document.getElementById('geolocation');
            element.innerHTML = 'Latitude: '  + position.coords.latitude      + '<br />' +
                            'Longitude: ' + position.coords.longitude     + '<br />' +
                            '<hr />'      + element.innerHTML;

            var latLng   =  new google.maps.LatLng(position.coords.latitude,position.coords.longitude);
            var mapOptions = {
                    center: latLng,
                    panControl: false,
                    zoomControl: true,
                    zoom: 16,
                    mapTypeId: google.maps.MapTypeId.ROADMAP
             };
             var map = new google.maps.Map(document.getElementById('map_holder'),mapOptions);
             var marker = new google.maps.Marker({
                    position: latLng,
                    map: map
             });
    }                            

    // onError Callback receives a PositionError object
    //
    function onError(error) { 
        var errString = '';
        // Check to see if we have received an error code
        if(error.code) {
            // If we have, handle it by case
            switch(error.code)  {
                case 1: // PERMISSION_DENIED
                errString =
                'Unable to obtain the location information ' +
                'because the device does not have permission '+
                'to the use that service.';
                break;
                case 2: // POSITION_UNAVAILABLE
                errString =
                'Unable to obtain the location information ' +
                'because the device location could not be ' +
                'determined.';
                break;
                case 3: // TIMEOUT
                errString =
                'Unable to obtain the location within the ' +
                'specified time allocation.';
                break;
                default: // UNKOWN_ERROR
                errString =
                'Unable to obtain the location of the ' +
                'device due to an unknown error.';
                break;
            }
        }
        // Handle any errors we may face
        var element = document.getElementById('map_holder');
        element.innerHTML = errString;
    }

    </script>
  </head>
  <body>
    <p id="geolocation">Watching geolocation...</p>
    <button id="btnWatchPosition" onclick="onDeviceReady();">TOGGLE</button> <br>
    <div id="map_holder" width="100%" height="100%"></div>
  </body>
</html> 
```

在我按下切换按钮后，坐标显示出来了......但没有地图显示出来，我做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T16:32:51.160

删除此行，它将在 Android Simulator (eclipse) 中运行

```
<meta name="viewport" content="user-scalable=no,initial-scale=1, maximum-scale=1,minimum-scale=1, width=device-width;" /> 
```

# java - 当线程 A 停止时停止线程 B

> ID：14287215
> 
> 赞同：0
> 
> 时间：2013-01-11T21:49:27.253
> 
> 标签：java, multithreading, swt

我有一个启动并运行线程 A 的操作侦听器。当操作完成时，线程 A 停止并且对话窗口关闭。

我创建了一个未知的简单进度条。主要是因为没有办法获得平均操作时间。时间取决于各种因素。所以，我将 TOTAL_TIME 设置得相当高。

我想在对话框关闭之前以某种方式停止进度条线程。

**进度条线程**

```
 class ProgressBarThread implements IRunnableWithProgress {
  private static final int TOTAL_TIME = 5000;
  private static final int INCREMENT = 1000;

  public ProgressBarThread() {

  }

  public void run(IProgressMonitor monitor) throws InvocationTargetException,InterruptedException {
     monitor.beginTask("Sending Plot", IProgressMonitor.UNKNOWN);
     for (int total = 0; total < TOTAL_TIME ; total += INCREMENT) {
        Thread.sleep(INCREMENT);
        monitor.worked(INCREMENT);
        if (total == TOTAL_TIME / 2) monitor.subTask("Please be patient... Operation should finish soon.");
    }
    monitor.done();

  } 
```

**OperationListener - 当操作返回时关闭窗口**

```
 public abstract class MyOperationListener implements InterfaceAIFOperationListener {

  AplotPlotterDialog w = null;

  public MyOperationListener(AplotPlotterDialog win) {
     w = win;
  } 

  public void startOperation(String startMessage) {
     Display.getDefault().asyncExec(new Runnable() {
        public void run() {
           w.getShell().setCursor(new Cursor(Display.getCurrent(), SWT.CURSOR_WAIT));
           w.recursiveSetEnabled(getShell(), getShell().getEnabled());
           w.getShell().setEnabled(!getShell().getEnabled());
        }
     });
  } 

  public void endOperation() {
     try {
        endOperationImpl();
     }
     finally {
        Display.getDefault().asyncExec(new Runnable() {
           public void run() {
              w.getShell().setCursor(new Cursor(Display.getCurrent(), SWT.CURSOR_ARROW));
              w.recursiveSetEnabled(getShell(), true);
              w.getShell().setEnabled(!getShell().getEnabled());
              w.close();
           }
        });
     }
  } 
  abstract protected void endOperationImpl(); 
```

}

**启动 ProgressBar 的方法**

```
 public void startProgressBar() {
  try {
     new ProgressMonitorDialog(getShell()).run(true, false,
        new ProgressBarThread());
  } 
  catch (InvocationTargetException e) {
     MessageDialog.openError(getShell(), "Error", e.getMessage());
  }  
  catch (InterruptedException e) {
     MessageDialog.openInformation(getShell(), "Cancelled", e.getMessage());
  } 
```

}

**操作方法和 ProgressBar 从哪里开始**

```
 public void startPrintOperation() {
  Display.getDefault().asyncExec(new Runnable() {
     public void run() {
        startProgressBar();
     }
  });
  final ArrayList<PlotData> datasetData =  AplotPlotDataModel.getInstance().getPlotDataArray();
  plotOp = new AplotPlotOperation(appReg.getString("aplot.message.PLOTTING"),datasetData, getPlottersData(), getSpinnerValue(), session);
  plotOp.addOperationListener(new MyOperationListener(this) {
     public void endOperationImpl() {
        try {
           plotResults = (ArrayList) plotOp.getPlotResults();
           for (int i = 0; i < plotResults.size(); ++i) {
                            AplotResultsDataModel.getInstance().addEntry((AplotPlotResultsParser.DatasetPlotResult) plotResults.get(i));
           } // end for
        }
        catch (Exception e) {
           e.printStackTrace();
        }
        finally {
           plotOp.removeOperationListener(this);
           plotOp = null;
           Display.getDefault().asyncExec(new Runnable() {
              public void run() {
                 baseDialog.removeAllTableRows();
                 AplotPlotDataModel.getInstance().clearPlotDataArray();
              }
           });
        }
     }
  });
  session.queueOperation(plotOp);
} 
```

***- - - - - - - - - - - - 编辑 - - - - - - - - -***

这就是我尝试实施@Serious 建议的方式。

对 ProgressBar 类所做的更改

```
class ProgressBarThread implements IRunnableWithProgress  {
  private static final int TOTAL_TIME = 10000;
  private static final int INCREMENT = 1000;
  private Condition done = null;

  public ProgressBarThread(Condition done) {
     this.done = done;
  }

  public void run(IProgressMonitor monitor) throws InvocationTargetException,InterruptedException {
     monitor.beginTask("Creating PDF File(s)", IProgressMonitor.UNKNOWN);
     for (int total = 0; total < TOTAL_TIME ; total += INCREMENT) {
        if (done.await(INCREMENT, TimeUnit.MILLISECONDS))
        {
           break;
        }
        monitor.worked(INCREMENT);
        if (total == TOTAL_TIME / 2) monitor.subTask("Please be patient... Operation should finish soon.");
     }
    monitor.done();
  }
} 
```

这是对 MyOperationLister 类的更改

```
public abstract class MyOperationListener implements InterfaceAIFOperationListener {
  AplotCreatePDFDialog w = null;
  Condition done = null;

  public MyOperationListener(AplotCreatePDFDialog win) {
     w = win;
     Lock lock = new ReentrantLock();
     done = lock.newCondition();
  } 

  public void startOperation(String startMessage) {
     Display.getDefault().asyncExec(new Runnable() {
        public void run() {
     startProgressBar();
        }
     });
  }

  public void startProgressBar() {
     try {
        new ProgressMonitorDialog(getShell()).run(true, false,
        new ProgressBarThread(done));
     } 
     catch (InvocationTargetException e) {
        MessageDialog.openError(getShell(), "Error", e.getMessage());
     }  
     catch (InterruptedException e) {
        MessageDialog.openInformation(getShell(), "Cancelled", e.getMessage());
     }
  }

  public void endOperation() {
     try {
        endOperationImpl();
     }
     finally {
        Display.getDefault().asyncExec(new Runnable() {
           public void run() {
              w.getShell().setCursor(new Cursor(Display.getCurrent(), SWT.CURSOR_ARROW));
              w.recursiveSetEnabled(getShell(), true);
              w.getShell().setEnabled(!getShell().getEnabled());
              done.signal();
              w.close();
           }
        });
     }
  } 
  abstract protected void endOperationImpl();
} 
```

我从对话类中删除了 startProgressBar 方法。我还从启动操作侦听器的方法中删除了 startProgressBar

```
 private void startSavePdfOperation() {
  //Display.getDefault().asyncExec(new Runnable() {
  //   public void run() {
  //      startProgressBar();
   //  }
  //});
  saveOp = new AplotSaveOperation(appReg.getString("aplot.message.SAVETOPDF"), "PDF", session);
  saveOp.addOperationListener(new MyOperationListener(this) {<-- this is the start operation listener call. 
```

结果：我得到一个错误对话框而不是 ProgressBar 对话框。我也收到以下错误

![在此处输入图像描述](../Images/3857f9147365ede2e330647c8f8358cf.png)

并且应用程序冻结。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T23:00:06.057

你可以等待一个**条件**：

```
class ProgressBarThread implements IRunnableWithProgress
{
    private static final int TOTAL_TIME = 5000;
    private static final int INCREMENT = 1000;

    private Condition done = null;

    public ProgressBarThread(Condition done)
    {
        this.done = done;
    }

    public void run(IProgressMonitor monitor) throws InvocationTargetException,InterruptedException
    {
        monitor.beginTask("Sending Plot", IProgressMonitor.UNKNOWN);
        for (int total = 0; total < TOTAL_TIME ; total += INCREMENT)
        {
            if (done.await(INCREMENT, TimeUnit.MILLISECONDS))
            {
                break;
            }
            monitor.worked(INCREMENT);
            if (total == TOTAL_TIME / 2) monitor.subTask("Please be patient... Operation should finish soon.");
        }
        monitor.done();
    }
} 
```

条件由主进程创建：

```
AplotPlotterDialog w = null;

Condition done = null;

public MyOperationListener(AplotPlotterDialog win)
{
    w = win;
    Lock lock = new ReentrantLock();
    done = lock.newCondition();
} 

public void startProgressBar()
{
    try
    {
        new ProgressMonitorDialog(getShell()).run(true, false,
        new ProgressBarThread(done));
    } 
    catch (InvocationTargetException e)
    {
        MessageDialog.openError(getShell(), "Error", e.getMessage());
    }  
    catch (InterruptedException e)
    {
        MessageDialog.openInformation(getShell(), "Cancelled", e.getMessage());
    }
}

public void endOperation()
{
    try
    {
        endOperationImpl();
    }
    finally
    {
        Display.getDefault().asyncExec(new Runnable() {
        public void run() {
        w.getShell().setCursor(new Cursor(Display.getCurrent(), SWT.CURSOR_ARROW));
        w.recursiveSetEnabled(getShell(), true);
        w.getShell().setEnabled(!getShell().getEnabled());
        done.signal();
        w.close();
    }
    });
    }
} 
```

在操作进行期间，行为将与您当前的版本相同。

但是当主进程完成时，它将通过发出条件信号通知进度条线程，该线程将立即退出循环。

# tsql - TSQL MERGE 命令似乎实际上并未合并

> ID：14287218
> 
> 赞同：0
> 
> 时间：2013-01-11T21:49:43.023
> 
> 标签：tsql, merge

我正在研究[这里](http://technet.microsoft.com/en-us/library/bb522522%28v=sql.105%29.aspx)的代码。

当我从那里剪切并粘贴以下代码时：

-- 正确指定连接条件的 MERGE 语句。

```
USE tempdb;
GO
BEGIN TRAN;
MERGE Target AS T
USING Source AS S
ON (T.EmployeeID = S.EmployeeID) 
WHEN NOT MATCHED BY TARGET AND S.EmployeeName LIKE 'S%' 
    THEN INSERT(EmployeeID, EmployeeName) VALUES(S.EmployeeID, S.EmployeeName)
WHEN MATCHED 
    THEN UPDATE SET T.EmployeeName = S.EmployeeName
WHEN NOT MATCHED BY SOURCE AND T.EmployeeName LIKE 'S%'
    THEN DELETE 
OUTPUT $action, inserted.*, deleted.*;
ROLLBACK TRAN;
GO 
```

它产生他们说的输出，但它实际上并没有改变目标表。如何让它实际更改 TARGET 表的结果？有什么开关吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T21:52:45.760

将 替换`ROLLBACK TRAN;` 为`COMMIT TRAN;`

目标表正在更改，因此您会看到正确的`OUTPUT`结果，但随后您将通过回滚事务在下一条语句中撤消它。

# entity-framework-5 - 如何禁用代码迁移

> ID：14287221
> 
> 赞同：0
> 
> 时间：2013-01-11T21:50:05.723
> 
> 标签：entity-framework-5, entity-framework-migrations

我已将 AzureSQL Db 转换为 SQL Compact Db。当我启动 ASP.Net MVC4 项目时，我得到：

> 自数据库创建以来，支持“DDContext”上下文的模型已更改。考虑使用 Code First 迁移来更新数据库

我假设 _MigrationHistory 表没有被 SQL Server Compact Toolbox 正确转换。

我不再需要或想要代码迁移功能，它们仅在项目开始时短暂使用。

我怎样才能让框架忽略 _MigrationHIstory 表中的内容，并尝试使用旧学院的 Db？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-03T20:18:16.280

您应该能够从项目中删除 Migrations 文件夹以及配置类和其中的任何迁移类。据我所知，这就是它使用代码优先迁移的全部内容。

希望有帮助。:)

# android - android中的自定义通用监听器/钩子

> ID：14287223
> 
> 赞同：0
> 
> 时间：2013-01-11T21:50:14.883
> 
> 标签：android, listener

我想编写一个类，用作具有相同 API 的驱动程序/连接器。但并非在每个请求中我都会收到相同的数据。

所以最好的解决方案是在这个类事件中创建

```
onVariableOneNameChangeListener(String variableOne) 
```

并将其附加到布局元素中的任何元素（EditText、TextView 等）。

那么如何构建具有通用附加事件的类呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T22:31:55.400

不确定你的意思。您想要一个可以响应任何视图上的任何事件的侦听器吗？这可能是不可能的，因为每个事件侦听器都有自己的签名。你能详细说明用例吗？

# javascript - 按接收顺序处理 WebSockets 消息

> ID：14287224
> 
> 赞同：15
> 
> 时间：2013-01-11T21:50:15.987
> 
> 标签：javascript, websocket, dom-events

我的应用程序的客户端部分需要以严格的顺序处理 WebSocket 消息。不幸的是，每条消息的处理时间都很长（大约 3 秒），因此在第一条消息结束之前会出现另一条消息。几条消息后，顺序完全不同。如何在 JavaScript 中解决这个问题。

我想过一个任务队列，但我不知道如何实现它以不阻止我的网络应用程序的 GUI。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2015-08-08T14:30:16.983

我认为另一个答案是错误的。WebSocket IS TCP，这意味着**传送的顺序是有保证的**。正如@Maël Nison 所引用的，请参阅[RFC6455](https://www.rfc-editor.org/rfc/rfc6455)：

> 消息片段必须按照发送者发送的顺序传递给接收者

因此，您可以认为您的处理将按顺序*开始*。但是，如果您有很多异步回调，那么稍后的处理可能会在之前的处理仍在继续之前*完成。*但这只是错误的实现（还有一点回调地狱）。

类似帖子：

*   [websocket消息可以乱序到达吗？](https://stackoverflow.com/questions/11804721/can-websocket-messages-arrive-out-of-order)
*   [Websocket：服务器数据是否同步发送？](https://stackoverflow.com/questions/9282892/websocket-are-server-data-sent-synchronously)

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2013-01-11T21:57:28.293

目前，浏览器中的 WebSocket API 不公开基于*帧*或*流*选项/API。所以没有真正的选择来完成这个*本机*。

这意味着您需要在从服务器发送到客户端的数据包中创建自己的逻辑/结构。这应该是一项相对容易的任务，我可以考虑传输可能在顶层具有*索引属性的简单**JSON 字符串/对象。*

 *```
{
    packetIndex: 0,
    data: { }
} 
```

并且您的客户端脚本将需要查看每个到达的数据包并正确排序（跟踪到达的数据包并在到达索引过高的数据包时“保持+等待”）*

# xslt - xslt 1 与 xslt 2 的性能对比

> ID：14287228
> 
> 赞同：2
> 
> 时间：2013-01-11T21:50:36.723
> 
> 标签：xslt

我一直在尝试寻找 xslt 1 与 xslt 2 的基准以提高速度性能。2 是否引入了任何性能优势，还是仅具有新功能（如果使用正确，可以提高性能）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-12T00:18:39.503

你的问题真的没有意义。XSLT 1 和 2 是规范，而不是实现。他们没有表现。实现有性能。XSLT 2.0 具有新特性，因此您无法将它们的性能与 XSLT 1 实现中的任何性能进行比较；它也有一些澄清，这只能使实施者受益；除此之外，它还包含 XSLT 1 所包含的所有内容，并且没有理由让实现在这部分的性能上有所不同。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-12T08:52:30.107

实际上，在所有其他条件相同的情况下，如果您迁移到 XSLT 2.0 并且不更改任何其他内容，那么性能可能会变得更差。例如，($a = $b) 的语义在 2.0 中要复杂得多，因为有更多可能的数据类型需要考虑，如果不利用声明数据类型的能力，系统将不得不在运行时确定要做什么。然而，XSLT 2.0 处理器可能具有更复杂和成熟的优化器这一事实弥补了这一点，因为没有这个，它就无法真正有效地完成工作。因此，我看到将 1.0 样式表从 Saxon 6.5（1.0 处理器）迁移到 Saxon 9.x（2.0 处理器）的情况下，速度提高了 100 倍。但正如 EJP 指出的那样，这就是实施的全部内容；它'

# php - 从 Mysql 到 HTML 的数学符号？

> ID：14287230
> 
> 赞同：-6
> 
> 时间：2013-01-11T21:50:51.693
> 
> 标签：php, html, mysql

我无法将符号“平方根”和“theta”从 mysql 带到 html

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T21:56:09.870

HTML 将无法识别这些符号，除非它们被转换为 HTML 实体 - 类似于`&#8730;`平方根符号的符号。[您可以使用 PHP 的htmlentities()](http://php.net/manual/en/function.htmlentities.php)函数从 MySQL 转换为它们。

W3C HTML 5 实体参考：[http](http://dev.w3.org/html5/html-author/charref)
://dev.w3.org/html5/html-author/charref 有用的 HTML 实体概述：http: [//htmlentities.net/html/entities/](http://htmlentities.net/html/entities/)

# html - 仅应用横向

> ID：14287231
> 
> 赞同：0
> 
> 时间：2013-01-11T21:51:04.967
> 
> 标签：html, ipad, css

我的 CSS（在外部 .css 文件中）如下：

```
 @media all and (orientation:portrait) {

            #slider {
                    border: 10px solid black;
            }

    }
    @media all and (orientation:landscape) {

            #slider {
                    border: 1px solid blue;
            }

    } 
```

无论我是纵向还是横向，都只显示蓝色边框。我正在 iPad 模拟器中进行测试。

编辑：我的另一个线程上的某个人说“在同一上下文中应用了两次相同的规则”。我不明白。一种是人像，一种是风景。

# android - 'HttpGet' 请求强制关闭

> ID：14287233
> 
> 赞同：-1
> 
> 时间：2013-01-11T21:51:11.983
> 
> 标签：android, response, http-get

我使用以下代码，当我单击一个按钮时，它会强制关闭。我想从网页读取响应并将其显示在消息框或编辑文本或其他任何内容中。

我该如何解决这个问题？

### 代码

```
 HttpGet request = new HttpGet("http://www.google.com");
    HttpClient client = null;
    HttpResponse resp = null;
    try {
        resp = client.execute(request);
    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    HttpEntity entity = resp.getEntity();
    MessageBox("Response : "+entity.toString());
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T22:00:50.047

您正在尝试在 UI 代码中运行 HTTP 请求。这就是为什么你有一个*Force Close*。请尝试在服务、AysncTask 或线程中运行它，这样 UI 线程就不会被阻塞。

请参考*[AsyncTask 中的示例 Android HTTP 请求](http://brainking.info/archives/615-Android-HTTP-Request-in-AsyncTask.html)*。

# database - 如何获取 og:image 标记以填充存储在数据库中的图像

> ID：14287234
> 
> 赞同：0
> 
> 时间：2013-01-11T21:51:15.897
> 
> 标签：database, facebook, image, facebook-opengraph

> **可能重复：**
> [Facebook Sharer 如何选择图片？](https://stackoverflow.com/questions/1138460/how-does-facebook-sharer-select-images)

我将所有用户的缩略图作为 BLOB 存储在我的数据库中。当用户向 facebook 发表评论时，我正在尝试使用 og:image 标签来显示这些图像。我不太确定如何让这些正确显示。

# servicestack - ServiceStack Razor 模型验证

> ID：14287235
> 
> 赞同：2
> 
> 时间：2013-01-11T21:51:21.517
> 
> 标签：servicestack

使用不正确的尝试值将验证错误返回到视图的最佳实践是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T03:14:37.737

服务错误应自动填充到视图的`@ModelError`占位符中，您可以访问该`@ResponseStatus`属性以获取存储异常详细信息的填充类型 ResponseStatus。

# haskell - 当我预计会看到失败时，为什么我会看到 attoparsec 的部分结果？

> ID：14287237
> 
> 赞同：14
> 
> 时间：2013-01-11T21:51:24.150
> 
> 标签：haskell, attoparsec

我对 attoparsec 的这种行为有点困惑。

```
$ ghci
> :m Data.Attoparsec.Text
> :m + Data.Text
> parse (string (pack "module")) (pack "mox")
Partial _
> parse (string (pack "module")) (pack "moxxxx")
Fail "moxxxx" [] "Failed reading: takeWith"
> 
```

为什么我需要添加字符来触发失败？

遇到第一个“x”不应该失败吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-11T23:02:07.053

这是一个实现细节，`string`解析器在知道是否还有足够的输入以使其可能成功之前不会完成。这是这些解析器全有或全无行为的结果（我认为，这通常对性能有好处）。

```
string :: Text -> Parser Text
string s = takeWith (T.length s) (==s) 
```

`string s`尝试获取`length s`的单位`Text`，然后将它们与`s`.

```
takeWith :: Int -> (Text -> Bool) -> Parser Text
takeWith n p = do
  s <- ensure n
  let h = unsafeTake n s
      t = unsafeDrop n s
  if p h
    then put t >> return h
    else fail "takeWith" 
```

`takeWith n p`首先尝试确保`n`单位`Text`可用，并且

```
ensure :: Int -> Parser Text
ensure !n = T.Parser $ \i0 a0 m0 kf ks ->
    if lengthAtLeast (unI i0) n
    then ks i0 a0 m0 (unI i0)
    else runParser (demandInput >> go n) i0 a0 m0 kf ks
  where
    go n' = T.Parser $ \i0 a0 m0 kf ks ->
        if lengthAtLeast (unI i0) n'
        then ks i0 a0 m0 (unI i0)
        else runParser (demandInput >> go n') i0 a0 m0 kf ks 
```

`ensure n`创建一个继续要求更多~~粥~~`Partial`如果没有立即找到足够的输入，则输入（结果）。

你可能会失败

```
Prelude Data.Attoparsec.Text Data.Text> parseOnly (string (pack "module")) (pack "mox")
Left "not enough input" 
```

预先告诉解析器它不会再获得任何输入（然后`demandInput`from`ensure`使它失败），或者稍后

```
Prelude Data.Attoparsec.Text Data.Text> parse (string (pack "module")) (pack "mox")
Partial _
Prelude Data.Attoparsec.Text Data.Text> feed it (pack "")
Fail "mox" ["demandInput"] "not enough input" 
```

通过告诉`Partial`结果就是它，给它一个空的`Text`。

# knockout.js - 将单选按钮值发送到可观察到的淘汰赛

> ID：14287249
> 
> 赞同：1
> 
> 时间：2013-01-11T21:52:10.797
> 
> 标签：knockout.js, radio-button, observable

我正在尝试将值从单选按钮发送到可观察到的淘汰赛。我究竟做错了什么？（顺便说一句，我是淘汰赛的新手..）

```
function Question(data) {
this.question= ko.observable(data.question);
this.answers = ko.observableArray(data.answers);
this.explenation = ko.observable(data.explenation );
}

function QuestionViewModel() {
// Data
var self = this;
self.questoin= ko.observable();
var questionNumber = 0;
self.currentAnswer = ko.observable();

self.nextQuestion = function() {
    $.getJSON("json/quiz.json", function(data) {
        var newQuestion = new Question(data[questionNumber]);
        self.question(newQuestion );
    });
    questionNumber++;
}

self.setCurrentAnswer = function(){
    self.currentAnswer = currentAnswerValue;
}
}

ko.applyBindings(new QuestionViewModel());

<ul data-bind="foreach: question">
            <li>
                <text data-bind="text: question">
            </li>
            <li>
                <ul data-bind="foreach: answers">
                    <li>
                        <input type="radio" name="radioAnswer" data-bind="checked: $root.setCurrentAnswer, value: currentAnswerValue">
                        <text data-bind="text: answerValue"></text>
                    </li>
                </ul>
            </li>

        </ul> 
```

“currentAnswerValue”是 'true' 或 'false' 并使用 json 设置。（值是正确的，当我尝试时它起作用）：

```
<text data-bind="text: currentAnswerValue"></text> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-30T09:08:46.693

这是获得选择的答案部分：

**HTML：**

```
Question:
<ul data-bind="foreach: answers">
    <li>
        <input type="radio" name="group" data-bind="value: itemName, checked: $root.currentAnswer" /> <span data-bind="text: itemName"></span>
    </li>
</ul>
<label data-bind="text: currentAnswer()"></label> 
```

**JS/淘汰赛：**

```
var AnswerVM = {
    answers: ko.observableArray([{
        itemName: 'Answer 1'
    }, {
        itemName: 'Answer 2'
    }]),
    currentAnswer: ko.observable()
};

ko.applyBindings(AnswerVM); 
```

试试看：

[http://jsfiddle.net/5bc66m2h/3/](http://jsfiddle.net/5bc66m2h/3/)

希望能帮助到你！

# regex - 如何将 NFA 转换为相应的正则表达式？

> ID：14287250
> 
> 赞同：1
> 
> 时间：2013-01-11T21:52:18.393
> 
> 标签：regex, computation-theory, nfa

我正在为明天的考试而学习，我已经检查了许多教程，告诉我如何将 NFA 转换为正则表达式，但我似乎无法确认我的答案。按照教程，我解决了 NFA

![在此处输入图像描述](../Images/95ca1661bf1cf32f5f5b08f396f74211.png)

我的解决方案是：

> ***阿坝*_**

 *我对么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T10:11:53.560

## 如何将 NFA 转换为正则表达式？

你的答案`a*ba*`是正确的。我可以从给定的图像中得出您的答案，`NFA`如下所示：

*   在带有标签的开始状态 q [0]`a`上有一个自循环。因此`a`，初始（前缀）可以有任意数量的 s，包括`^`RE 中的 null。所以正则表达式（RE）以`a*`.

*   您只需要一个`b`即可达到最终状态。实际上是一个接受字符串；和`b`的字符串中必须至少有一个。所以 RE要达到 q [1]或 q [2]。两者都是*最终状态*。 `a``b``a*b`

**   一旦达到最终状态（q [1]或 q [2]）。字符串中不可能有其他（从 q [1]和 q [2]`b`没有出边）。`b`

    *   [在 q 1]和 q [2]处只有符号是`a`可能的。同样对于，在 q [1]或在 q [2]移动切换 q [1]， q [2]并且两者都是最终的。所以在符号之后可以有任意数量的s 后缀。（所以字符串以 结尾）。 [[`a`[[[[`b``a``a*`]]]]]]* 

 *而 RE 是`a*ba*`。

此外，它的**DFA**如下：

```
 DFA: 
======

    a-          a-  
    ||          ||
    ▼|          ▼|
--►(q0)---b---►((q1))      

    a*    b      a*    :RE  
                       ==== 
```

*   任意数量的`a`s`q0`是： `a*`

*   一旦你得到`b`你可以切换到最终状态`q1`： `b`

*   在最终状态下，任何数量的`a`都是可能的： `a*`

它是最小化的 DFA！

这是我在`FAs`和上的一些更有趣的答案`REs`，我相信对您有用：

1.  [如何为 DFA 编写正则表达式](https://stackoverflow.com/questions/7550711/what-is-the-language-of-this-deterministic-finite-automata/13965717#13965717)
2.  [回复 DFA](https://stackoverflow.com/questions/14122755/what-will-be-the-dfa-for-the-regular-expression-00101011?answertab=votes#tab-top)
3.  [正则表达式到 DFA](https://stackoverflow.com/questions/13770814/drawing-minmal-dfa-for-the-given-regular-expression/14024179#14024179)
4.  [从正则表达式构造等效的正则语法](https://stackoverflow.com/questions/13816439/left-linear-and-right-linear-grammars/13945932#13945932)
5.  [如何消除上下文无关语法中的左递归](https://stackoverflow.com/questions/14033250/left-recursion-elimination/14041093#14041093)
6.  [a* 和 (a*)* 一样吗？](https://stackoverflow.com/questions/13779645/is-a-the-same-as-a/13779675#13779675)
7.  [在正则表达式的情况下：是`(AB)* = A*B*?`](https://stackoverflow.com/questions/13355710/confusion-related-to-regular-expression/13355754#13355754)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T22:02:24.463

这个答案是正确的，因为以下两个都是正确的：

*   任何匹配正则表达式的字符串都会导致 NFA 以接受状态结束（双圈状态）
*   任何导致 NFA 以接受状态结束的字符串也与正则表达式匹配

但是，我无法检查您的工作，因为您还没有发布任何内容。**

# c++ - 从 QML 访问 C++ QLists

> ID：14287252
> 
> 赞同：29
> 
> 时间：2013-01-11T21:52:39.597
> 
> 标签：c++, qml, qt5, qlist, qtquick2

如果我有 C++ 中的内容列表，如何将其公开给 QML（在 Qt5 / QtQuick 2 中）？似乎 QML 只能理解`QObject`- 派生类，这是一个问题，因为`QObject`s 不能放入 a`QList`或复制。我该怎么做呢：

```
struct Thing
{
    int size;
    QString name;
};

class ThingManager : public QObject
{
    Q_OBJECT

    // These macros support QtQuick, in case we one day want to use it to make a slick
    // interface (when QML desktop components are released).
    Q_PROPERTY(QList<Thing> things READ things NOTIFY thingssChanged)

public:
    // ...
    QList<Thing> things() const;

    // ...

}; 
```

这样我就可以在 QML 中做这样的事情：？

```
var a = thingManager.things[0].name; 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-14T16:09:49.897

或者，您可以使用`QVariantList`( `QList<QVariant>`)，它会在传递给 QML 时自动更改为 JavaScript 数组，并且可以从 C++ 和 QML 读取和写入

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-04-05T09:49:47.897

我在尝试解决类似问题时遇到了这个问题，我想在 QML 中使用 C++ 代码作为模型源。TheBootro 给出的答案为我指明了正确的方向，但并没有完全适合我。我没有足够的声誉直接回答他（但我确实赞成他的回答）。

我正在使用 Qt 5.0.0 我发现[这个链接](https://doc.qt.io/qt-5/qtquick-modelviewsdata-cppmodels.html)很有帮助

ThingManager 的定义应该修改如下

```
class ThingManager : public QObject
{
    Q_OBJECT
    Q_PROPERTY(QList<QObject*> things READ getThings NOTIFY thingsChanged)

public:
    QList<QObject*> getThings () const { return m_things; }

signals:
    void thingsChanged ();

private:
    QList<QObject*> m_things;
}; 
```

请注意，我将 getThings 的返回类型更改为 QList<QObject*>。如果没有此更改，Qt 会警告它“无法处理未注册的数据类型 'QList<Thing*>'”。

在 QML 代码中，Thing 的属性可以通过模型作为 model.modelData.size 和 model.modelData.name 访问。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-12-11T08:54:50.147

在获得更多 QML 经验后，我发现拥有事物列表的最佳方式是使用[`QAbstractListModel`](http://qt-project.org/doc/qt-5/qabstractlistmodel.html).

你让你的`Thing`派生，`QObject`所以它可以存储在一个`QVariant`（注册后）。然后您可以将实际值`Thing`作为模型项返回。您可以在`Repeater`as中访问它`model.display.a_property_of_thing`。列表长度为`model.count`.

这有以下优点和缺点：

1.  快速 - 它不会复制整个列表来访问一个元素。
2.  您可以轻松获取列表更改的动画（添加、重新排列和删除项目）。
3.  它很容易从 QML 中使用。
4.  为了使动画能够正常工作，每当您更改列表时，您都必须做一些稍微古怪的簿记（`beginInsertRows()`等）

...

```
class Things : public QObject
{
...
};

Q_DECLARE_METATYPE(Thing*)

class ThingList : public QAbstractListModel
{
    Q_OBJECT

public:
    explicit ThingList(QObject *parent = 0);
    ~ThingList();

    int rowCount(const QModelIndex& parent = QModelIndex()) const override;
    QVariant data(const QModelIndex& index, int role = Qt::DisplayRole) const override;

public slots:

    // Extra function to get the thing easily from outside Repeaters.
    Thing* thing(int idx);

private:
    QList<Thing*> mThings;
};

int ThingList::rowCount(const QModelIndex& parent) const
{
    return mThings.size();
}

QVariant ThingList::data(const QModelIndex& index, int role) const
{
    int i = index.row();
    if (i < 0 || i >= mThings.size())
        return QVariant(QVariant::Invalid);

    return QVariant::fromValue(mThings[i]);
}

Thing* ThingList::thing(int idx)
{
    if (idx < 0 || idx >= mThings.size())
        return nullptr;

    return mThings[idx];
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-01-11T23:39:09.367

啊，我找到了答案（我认为，未经测试）：[`QQmlListProperty`](http://qt-project.org/doc/qt-5.0/qtqml/qqmllistproperty.html)

示例中有一些用途，例如`qtdeclarative/examples/quick/tutorials/gettingStartedQml/filedialog/directory.*`：

不幸的是，您目前只能拥有只读列表。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-01-29T08:48:44.450

您对 QObject 是完全错误的，它们可以简单地以指针的形式提供给 QList，如下所示完美：

```
class Thing : public QObject
{
    Q_OBJECT

    Q_PROPERTY (int     size READ getSize CONSTANT)
    Q_PROPERTY (QString name READ getName CONSTANT)

public:
    Thing(QObject * parent = NULL) : QObject(parent) {}

    int     getSize () const { return m_size; }
    QString getName () const { return m_name; }

private:
    int     m_size;
    QString m_name;
};

class ThingManager : public QObject
{
    Q_OBJECT
    Q_PROPERTY(QList<Thing*> things READ getThings NOTIFY thingsChanged)

public:
    QList<Thing*> getThings () const { return m_things; }

signals:
    void thingsChanged ();

private:
    QList<Things*> m_things;
}; 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-01-21T13:38:15.690

最好的方法是使用 [QQmlListProperty](http://doc.qt.io/qt-5/qqmllistproperty.html) 。看 这个简单的例子，希望对你有所帮助。
[对象和列表属性类型示例](http://doc.qt.io/qt-5/qtqml-referenceexamples-properties-example.html)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-12-10T12:29:46.010

题主给出的答案`eatyourgreens`是正确的。通过以这种方式实现您的类，您可以访问任意数量的后代。我发现另一个有用的技巧是在 qml 委托元素内为我们的模型创建一个别名。

```
ListView {
   anchors.fill: parent
   model: thing_manager.things
   delegate: ItemDelagate {}
   clip: true
   spacing: 10
} 
```

然后在 ItemDelegate.qml 中，您可以为模型创建别名以不一直使用 model.modelData

```
Item{
    width: 600
    height: 200
    property var thing: model.modelData
    Rectangle {
        anchors.fill: parent
        color: "red"
        Text {
            text: thing.name // or any other field
        }
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-11T23:14:34.730

实现它的一种高度间接的方法是：

i.) 在 qml 中制作模型

```
ListModel 
{
     id: thingModel

     ListElement 
     {
         size: 10
         name: "Apple"
     }     
} 
```

ii.) 然后提供几个 javascript 函数来修改这个列表，例如。

```
function jAppendThing( newSize, newName )
{
    thingModel.append({"size": nameSize, "name": newName })
}

function jClearThing()
{
    thingModel.clear()
} 
```

类似地 jDeleteThing 等。

iii.) 您可以阅读有关[如何从 c++ 调用 qml 函数的信息](http://qt-project.org/doc/qt-4.8/qtbinding.html)

iv.) 在 C++ 列表上运行一个循环并调用 qml 的 append 函数将所有数据添加到 qml 列表中。

v.) 在 C++ 侧列表中的任何更新中，同时使用上述函数修改 qml 数据以使其保持更新。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-01-23T10:46:29.247

存在一个好的，但没有提到的解决方案：

```
class ThingManager : public QObject
{
Q_OBJECT

// These macros support QtQuick, in case we one day want to use it to make a slick
// interface (when QML desktop components are released).
Q_PROPERTY(QList<Thing> things MEMBER m_things NOTIFY thingssChanged)

// ...
private:
// ...
QList<Thing> m_things;
// ...

}; 
```

读写都适用。没有昂贵的函数调用和数据复制。只需直接访问 QML 中的类成员：

```
var a = thingManager.things[0].name; 
```

有关更多信息，请参阅文档：[https ://doc-snapshots.qt.io/qt5-dev/properties.html](https://doc-snapshots.qt.io/qt5-dev/properties.html)

# azure - 在 Azure 移动服务和 Azure 网站之间共享表

> ID：14287253
> 
> 赞同：1
> 
> 时间：2013-01-11T21:52:42.823
> 
> 标签：azure, azure-web-app-service, azure-mobile-services

我想创建一个共享同一数据库的网站和一个 Windows 8 应用程序。我按照本教程创建了网站[https://www.windowsazure.com/en-us/develop/net/tutorials/web-site-with-sql-database/](https://www.windowsazure.com/en-us/develop/net/tutorials/web-site-with-sql-database/)并使用 Azure 管理门户创建了我的移动服务.

尽管它们中的每一个都运行良好，但我无法让我通过 Web 应用程序发布的表格显示在我的移动服务中。当我使用 JS 应用程序连接时

```
var mobileService = new Microsoft.WindowsAzure.MobileServices.MobileServiceClient(
 "url",
 "secret"
 ); 
```

表不存在。

如何在两个服务之间共享这些表？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-12T05:19:24.543

Azure 移动服务在其自己的架构（服务名称）下创建其表。您必须将现有表移动到此架构，并且必须将它们添加到 Azure 移动服务门户。

请参阅： [将现有数据库与 Azure 移动服务一起使用](http://www.strathweb.com/2012/12/using-existing-database-with-azure-mobile-services/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T14:51:26.487

移动服务团队的 PM 保罗巴图姆在这里概述了一个快速的解决方案：http: [//social.msdn.microsoft.com/Forums/en-US/azuremobile/thread/60764eb6-17d0-4395-a887-2a793b44ce88](http://social.msdn.microsoft.com/Forums/en-US/azuremobile/thread/60764eb6-17d0-4395-a887-2a793b44ce88)

Chris Risner 是移动服务的开发人员宣传员，也在这里提供了完整的演练：http: [//chrisrisner.com/Connecting-an-Existing-Database-to-Windows-Azure-Mobile-Services](http://chrisrisner.com/Connecting-an-Existing-Database-to-Windows-Azure-Mobile-Services)

# jquery - 从绝对元素内的孩子计算 newHeight

> ID：14287258
> 
> 赞同：0
> 
> 时间：2013-01-11T21:52:55.040
> 
> 标签：jquery

我不是程序员，所以我相信这可以很容易地回答：

如何将此 jQuery 脚本更改为：

1.  将新高度除以 2

和/或

1.  只计算 div 内第一个元素的高度？

    ```
    $( document ).ready(function() {
        $( "#left-sidebar-inner" ).each(function() {
            var newHeight = 0, $this = $( this );

            $.each( $this.children(), function() {
                newHeight += $( this ).height();
            });

            $this.height( newHeight );
        });
    }); 
    ```

两个答案都会很棒！提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T21:55:51.267

```
$(document).ready(function () {
    $("#left-sidebar-inner").each(function () {
        var newHeight = 0,
        $this = $(this);
        $.each($this.children(), function () {
            newHeight += $(this).height();
        });
        $this.height(Math.round( newHeight / 2) );
    });
}); 
```

不确定第二部分是什么意思，您必须发布相应的 html

# ruby-on-rails - 使用 PostGIS 和 Rails 查找边界框中的所有项目

> ID：14287260
> 
> 赞同：7
> 
> 时间：2013-01-11T21:52:59.020
> 
> 标签：ruby-on-rails, postgresql, gis, postgis

我有一个使用 PostGIS`POINT`类型来存储位置坐标的 Rails 模型。如何查询边界框中包含的所有位置？边界框来自谷歌地图，如下所示：

`/locations?within=40.766159%2C-73.989786%2C40.772781%2C-73.979905&per_page=500`

然后在我的模型中，我有一个范围来处理这个问题，但无法弄清楚如何正确查询：

```
scope :within, ->(box_string) {
    sw = box_string.split(",")[0..1].reverse.map {|c| c.to_f}
    ne = box_string.split(",")[2..3].reverse.map {|c| c.to_f}
    box = "BOX3D(#{sw[0]} #{sw[1]}, #{ne[0]} #{ne[1]})"
    where( ***WHAT DO I DO HERE?*** )
  } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-16T01:07:12.650

使用 rgeo 宝石：

宝石文件：

```
gem 'rgeo' 
```

模型.rb：

```
def self.within_box(sw_lat, sw_lon, ne_lat, ne_lon)
  factory = RGeo::Geographic.spherical_factory
  sw = factory.point(sw_lon, sw_lat)
  ne = factory.point(ne_lon, ne_lat)
  window = RGeo::Cartesian::BoundingBox.create_from_points(sw, ne).to_geometry
  where("your_point_column && ?", window)
end 
```

请注意，工厂`point`方法的参数顺序是 (lon, lat)。

您可能想要使用`activerecord-postgis-adapter`包含 rgeo 的 gem）。

# vb.net - 你如何改变前景色？

> ID：14287268
> 
> 赞同：1
> 
> 时间：2013-01-11T21:53:19.723
> 
> 标签：vb.net, datagridview

我无法更改`DataGridView cells`. 我生成了多个*运行时*`DataGridView`，我正在使用以下代码：

```
For Each tbp As TabPage In frmTimingP2P.tabctrlTimingTable.TabPages
   For Each ctrl As Control In tbp.Controls
        Dim dgv As DataGridView = TryCast(ctrl, DataGridView)
        If Not dgv Is Nothing Then
            For Each dc As DataGridViewColumn In dgv.Columns
                If dc.Name.EndsWith("Gain/Loss") Then
                    For Each dr As DataGridViewRow In dgv.Rows
                        If Not dr.Cells(dc.Index).Value Is DBNull.Value Then
                            If dr.Cells(dc.Index).Value = 0 Then
                                dr.Cells(dc.Index).Style.ForeColor = Color.Blue
                            ElseIf dr.Cells(dc.Index).Value < 0 Then
                                dr.Cells(dc.Index).Style.ForeColor = Color.Red
                            ElseIf dr.Cells(dc.Index).Value > 0 Then
                                dr.Cells(dc.Index).Style.ForeColor = Color.Green
                            End If
                        End If
                    Next
                End If
            Next
            dgv.Refresh()
        End If
    Next
Next 
```

此代码仅适用于当前关注的 DataGridView，但不适用于其他`DataGridview`。

我已经修改了我的代码，现在提出了以下内容：

```
Private Sub dgvOverview_CellFormatting(sender As Object, e As System.Windows.Forms.DataGridViewCellFormattingEventArgs) Handles dgvOverview.CellFormatting
    Dim dgv As New DataGridView
    dgv = sender

    If dgv.Columns(e.ColumnIndex).Name.EndsWith("Gain/Loss") Then
        If e.Value IsNot DBNull.Value Then
            Dim intCellValue As Integer = CType(e.Value, Integer)
            If intCellValue = 0 Then
                e.CellStyle.ForeColor = Color.Blue
            ElseIf intCellValue > 0 Then
                e.CellStyle.ForeColor = Color.Green
            ElseIf intCellValue < 0 Then
                e.CellStyle.ForeColor = Color.Red
            End If
        End If
    End If

End Sub 
```

这一切都很好。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T22:07:13.917

更好的方法是处理 DataGridView CellFormatting 事件。有关详细信息，请参阅[http://msdn.microsoft.com/cs-cz/library/system.windows.forms.datagridview.cellformatting.aspx](http://msdn.microsoft.com/cs-cz/library/system.windows.forms.datagridview.cellformatting.aspx)。

# iphone - 如何使用IOS Pdf reader Api通过Url查看远程pdf文件？

> ID：14287269
> 
> 赞同：5
> 
> 时间：2013-01-11T21:53:26.933
> 
> 标签：iphone, ios, xcode, api, pdf-viewer

我使用[iOS PDF Reader Core](https://github.com/vfr/Reader) Api 创建了一个 iPhone 应用程序，在我的设备文件系统上显示 pdf 文件。

我的疑问是如何通过提供 url 路径来使用这个 api 来查看远程 pdf 文件。ReaderDocument 对象只接受要指定的文件路径。

请帮我..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T10:01:00.047

我不相信有办法做到这一点。我对您链接到的框架不是很熟悉，但我全职工作在 PSPDFKit iOS PDF SDK 上。要在 iOS 上渲染 PDF，它们需要完全下载。您基本上可以通过以下方式在某个时候创建​​一个 CGPDFDocument

```
CGPDFDocumentCreateWithURL(...)
(or)
CGPDFDocumentCreateWithProvider(...) 
```

现在，如果您尝试使用远程 URL 提供 CGPDFDocumentCreateWithURL，CoreGraphics 将抛出一些神秘的错误 15（尽管它确实适用于 /localhost/ 远程 URL）

从理论上讲，您可以编写一个 CGDataProvider 来动态下载文档，但问题是 iOS 仍然会读取并解析整个 PDF，然后才能显示它——而且我自己编写了一个自定义提供程序（支持AES256 并动态解密 PDF 内容以提高安全性）。把它做好真的很棘手。

**tl,dr：您需要下载 PDF。**例如，使用我编写的这个简洁[的 AFNetworking 扩展](https://github.com/steipete/AFDownloadRequestOperation)- 它甚至支持简历。

# mysql - 如何将MYSQL表中的M / D / Y，时间列转换为Y / M / D，时间？

> ID：14287273
> 
> 赞同：0
> 
> 时间：2013-01-11T21:53:40.133
> 
> 标签：mysql, sql, time

我看到了一些与我类似的其他问题，但与我的不完全一样。我的一个表中有一个名为 的列`time`，但是自从新年以来，当我订购时`time`，它并没有按正确的时间顺序排列，因为年份没有被考虑到排序中。它基本上是按月/天订购的。

所以，我假设我可以执行一个命令，将`time`当前为 的列转换`M/D/Y, hour:minutes:seconds`为`Y/M/D, hour:minutes:seconds`.

我只是不知道它是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T21:59:40.550

你真的应该使用 MySQL 的[时间类型](http://dev.mysql.com/doc/en/date-and-time-types.html)来存储时间数据：

```
ALTER TABLE my_table
  ADD COLUMN new_time DATETIME AFTER time;

UPDATE my_table SET new_time = STR_TO_DATE(time, '%m/%d/%y %H:%i:%s');

ALTER TABLE my_table
  DROP time,
  CHANGE new_time time DATETIME; 
```

请注意，您也需要更改应用程序代码以使用新的数据格式。

如果您无法更改列数据类型，您可以`ORDER BY STR_TO_DATE()`在此期间更改（但不会非常高效）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T22:01:57.040

在您的选择中，您可以使用：

```
 SELECT DATE_FORMAT('2012-10-10', '%y/%c/%d'); 
```

将其更改为您想要的格式。检查[http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format)了解更多详情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T22:08:38.300

首先，您应该将此列设置为日期时间列，这样就不会遇到这样的问题，但是因为在清理数据之前您不能这样做。我们将在这里为您进行转换。首先添加一个新的日期时间字段

首先从 m/d/Y 记录中填充日期：

```
UPDATE table SET new_datetime= STR_TO_DATE(old_datetime, '%m/%d/%y,%H:%i:%s') WHERE autoincrement <= [Last autoincrement value for m/d/y format]; 
```

然后从 Y/m/d 记录中填充：

```
UPDATE table SET new_datetime= STR_TO_DATE(old_datetime, '%y/%m/%d,%H:%i:%s') WHERE autoincrement > [Last autoincrement value for m/d/y format]; 
```

然后，您可以删除旧字段。

请注意，您需要确保`STR_TO_DATE()`函数中使用的格式与您当前拥有的格式相匹配（例如，我不确定`,`您的字符串中是否有文字或所有 2 位数字月/日。您可能需要调整相应的格式模式。有关如何指定格式的信息，请参阅此链接[http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_date-format](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_date-format)

# java - GET上的Android REST客户端不填充文本字段

> ID：14287274
> 
> 赞同：0
> 
> 时间：2013-01-11T21:53:44.923
> 
> 标签：java, android, rest, button

抱歉，如果标题格式不正确。基本上这是我的问题：我的 Android 项目是一个 REST 客户端。webservice 项目包含一些数据，这些数据基本上可以为一个人制作个人资料（名字、姓氏等）。在我的 Android 客户端中，我有一个活动，上面有一个文本字段和一个按钮。Main 活动中的文本字段是用户输入帐号 (id=enter_acct) 的地方，该帐号指向特定人员，其详细信息在 Web 服务项目中。在我的 MainActivity java 文件中，我告诉按钮打开一个包含文本字段的新活动。换句话说，Main Activity 包含执行 GET 请求的所有代码。辅助 Activity 只是一个包含文本字段的布局。这是我的主要布局文件代码：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
  ......
/>

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true" />

<EditText
    android:id="@+id/enter_acct"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/textView1"
    android:layout_alignParentLeft="true"
    android:layout_marginBottom="20dp"
    android:layout_marginLeft="34dp"
    android:ems="10"
    android:hint="@string/acct" />

<Button
    android:id="@+id/search_button"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignTop="@+id/textView1"
    android:layout_toRightOf="@+id/textView1"
    android:text="@string/searchText"
    android:onClick="retrievePersonData"
     /> 
```

下面是 Main Activty java 文件中包含方法 retrievePersonData 的代码：

```
public class MainActivity extends Activity {
private static final String SERVICE_URL = "http://serverIP";
private static final String TAG = "MainActivity";

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    try {

        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_main);

        Button btnOpenNewActivity = (Button) findViewById(R.id.search_button);
        btnOpenNewActivity .setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {

        Intent myIntent = new Intent(MainActivity.this,PersonModel.class);

        MainActivity.this.startActivity(myIntent);

        }

        });
        }
        catch (Exception e)
        {

        }
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

public void handleResponse(String response) {
    EditText edFirstName = (EditText) findViewById(R.id.firstName);
    EditText edLastName = (EditText) findViewById(R.id.lastName);
    EditText edEmail = (EditText) findViewById(R.id.email);
    EditText edAddress = (EditText) findViewById(R.id.address);

    edFirstName.setText("");
    edLastName.setText("");
    edEmail.setText("");
    edAddress.setText("");

    try {
        JSONObject jso = new JSONObject(response);

        String firstName = jso.getString("firstName");
        String lastName = jso.getString("lastName");
        String email = jso.getString("email");
        String address = jso.getString("address");

        edFirstName.setText(firstName);
        edLastName.setText(lastName);
        edEmail.setText(email);
        edAddress.setText(address);

    } catch (Exception e) {
        Log.e(TAG, e.getLocalizedMessage(), e);

    }
}

public void hideKeyboard() {
    InputMethodManager inputManager = (InputMethodManager) MainActivity.this.getSystemService(Context.INPUT_METHOD_SERVICE);
    inputManager.hideSoftInputFromWindow(MainActivity.this.getCurrentFocus().getWindowToken(), InputMethodManager.HIDE_NOT_ALWAYS);
}

public class WebServiceTask extends AsyncTask<String, Integer, String> {
    public static final int GET_TASK = 1;
    public static final int POST_TASK = 2;

    private static final String TAG = "WebServiceTask";

    // connection timeout in milliseconds.. waiting for connect
    private static final int CONN_TIMEOUT = 3000;

    // socket timeout, in milisecs (waiting for data)...
    private static final int SOCKET_TIMEOUT = 5000;

    private int taskType = GET_TASK;
    private Context mContext = null;
    private String processMessage = "Processing...";

    private ArrayList<NameValuePair> params = new ArrayList<NameValuePair>();

    private ProgressDialog pDlg = null;

    public WebServiceTask(int taskType, Context mContext, String processMessage) {
        this.taskType = taskType;
        this.mContext = mContext;
        this.processMessage = processMessage;

    }

    public void addNameValuePair(String name, String value) {
        params.add(new BasicNameValuePair(name, value));
    }

    private void showProgressDialog() {
        pDlg = new ProgressDialog(mContext);
        pDlg.setMessage(processMessage);
        pDlg.setProgressDrawable(mContext.getWallpaper());
        pDlg.setProgressStyle(ProgressDialog.STYLE_SPINNER); 
        pDlg.setCancelable(false);
        pDlg.show();
    }

    @Override
    protected void onPreExecute() {

        hideKeyboard();
        showProgressDialog();

    }

    protected String doInBackground(String... urls) {
        String url = urls[0];
        String result = "";

        HttpResponse response = doResponse(url);

        if(response == null) {
            return result;
        } else {
            try {

                result = inputStreamToString(response.getEntity().getContent());

            } catch (IllegalStateException e) {
                Log.e(TAG, e.getLocalizedMessage(), e);

            } catch (IOException e) {
                Log.e(TAG, e.getLocalizedMessage(), e);
            }
        }

        return result;

    }

    @Override
    public void onPostExecute(String response) {

        handleResponse(response);
        pDlg.dismiss();

    }

    public HttpParams getHttpParams() {

        HttpParams httpa = new BasicHttpParams();

        HttpConnectionParams.setConnectionTimeout(httpa, CONN_TIMEOUT);
        HttpConnectionParams.setSoTimeout(httpa, SOCKET_TIMEOUT);

        return httpa;
    }

    public HttpResponse doResponse(String url) {

    HttpClient hClient = new DefaultHttpClient(getHttpParams());

    HttpResponse response = null;

    try {
        switch (taskType) {

        case POST_TASK:
            HttpPost httppost = new HttpPost(url);
            httppost.setEntity(new UrlEncodedFormEntity(params));
            response = hClient.execute(httppost);
            break;
        case GET_TASK:
            HttpGet httpget = new HttpGet(url);
            response = hClient.execute(httpget);
            break;
        }

    } catch (IOException e) {
        Log.e(TAG, e.getLocalizedMessage(), e);
    }
    return response;
    }

    private String inputStreamToString(InputStream is) {

        String line = "";
        StringBuilder total = new StringBuilder();

        BufferedReader bf = new BufferedReader(new InputStreamReader(is));

        try {
            while ((line = bf.readLine()) != null) {
                total.append(line);
        }
    } catch (IOException e) {
        Log.e(TAG, e.getLocalizedMessage(), e);
    }
    return total.toString();
    }   

} 
```

当我单击按钮时，它应该做两件事：

1.  使用文本字段打开一个新活动。

2.  使用来自 Web 服务项目的信息填充这些文本字段。

如果我有一个带有文本字段和按钮的活动（即，我单击它与 Web 服务对话并用信息填充字段），这工作得很好。在这种情况下，我单击按钮，它会打开新活动，但不会填充文本字段......它什么也不做。

有人可以帮忙吗，如果需要更清楚，我会的。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T22:45:39.707

您正在尝试在您的 UI 代码中运行 HTTP 请求，这就是您获得强制关闭的原因。请尝试在服务或 AysncTask 或线程中运行，这样 UI 线程不会被阻塞。

请参考[这个例子](http://brainking.info/archives/615-Android-HTTP-Request-in-AsyncTask.html)：

您可以在按钮单击中执行多个操作，触发 GET 方法如上述技术和 startActivity：

```
public class PersonModel extends Activity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        EditText firstNameTxt= (EditText) findViewById(R.id.editText1);
        firstNameTxt.setText("set your value");
    }
} 
```

尝试在 PersonModel 的 OnCreate 方法中使用 SetText 填充 EditText 的值。

谢谢

# java - 工作正常的 ImageIO.read 表达式突然停止这样做

> ID：14287276
> 
> 赞同：0
> 
> 时间：2013-01-11T21:54:07.190
> 
> 标签：java, null, nullpointerexception, javax.imageio

我目前正在尝试为我正在开发的一个小游戏加载一个精灵表。问题是这里的那段代码：

```
private void load(){
    try {
        BufferedImage image = ImageIO.read(Sprite.class.getResource(path));
        int w = image.getWidth();
        int h = image.getHeight();
        image.getRGB(0, 0, w, h, pixels, 0, w);
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

`ImageIO.read()`总是返回`null`。它也不会抛出任何异常。显然，我在下一行遇到错误，因为我称之为`image.getWidth()`image is `null`。

真正困扰我的是同一段代码在 10 分钟前运行良好。除了一个完全不影响阅读过程的值之外，我没有改变任何东西；即使改回来也无济于事。

有谁知道在这里做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T10:17:51.193

我认为你的问题在这里：

```
Sprite.class.getResource(path) 
```

你可以写下这条线并检查你的路径是否正确。当您的文件路径不正确时，会出现此问题。使用这行代码检查您的文件路径：

```
System.out.println(Sprite.class.getResource(path)); 
```

那么你就可以找到问题所在了。

# python - 如何循环在python中有子菜单的菜单？

> ID：14287277
> 
> 赞同：1
> 
> 时间：2013-01-11T21:54:07.407
> 
> 标签：python, loops, menu

我正在尝试创建带有子菜单的主菜单。我想这样做，无论用户从主菜单到子菜单选择什么顺序，他们最终都会被引导回主菜单——也就是说，直到他们选择最后一个选项（3.按住并结束转弯） .

这就是我卡住的地方。现在，用户只能通过菜单序列一次。我如何使它成为一个重复循环？

```
#main menu
playermenumain=raw_input("What would you like to do?\n (1) Buy\n (2)Sell\n (3)Hold and end turn ")

if playermenumain=="1":

        buyermenu=raw_input("In what area would you like to buy?"\n (1)Stocks\n (2) Bonds\ (3) Nevermind\n)
        if buyermenu=="1":
            stockamount=stockamount+500
        elif buyermenu=="2":
            bondamount=bondamount+500
        else:
            buyermenu=raw_input("In what area would you like to buy?"\n (1)Stocks\n (2) Bonds\ (3) Nevermind\n) 

if playermenumain=="2":

    sellermenu=raw_input("In what area would you like to buy?"\n (1)Stocks\n (2) Bonds\ (3) Nevermind\n)
        if sellermenu=="1":
            stockamount=stockamount-500
        elif sellermenu=="2":
            bondamount=bondamount-500
        else:
            sellermenu=raw_input("In what area would you like to buy?"\n (1)Stocks\n (2) Bonds\ (3) Nevermind\n) 

if playermenumain=="3":

    break
#main menu loop: no matter what is selected, player is directed back to main menu until option 3 (end turn) is selected:

while playermenumain=="1" or playermenumain=="2":

        playermenumain=raw_input("What would you like to do?\n (1) Buy\n (2)Sell\n (3)Hold and end turn ")
        continue 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T22:06:22.793

尝试使用带有 break 的 while True 循环，而不是您拥有的 while 条件。例如：

```
def submenu_buy():
  # Put your submenus here
  pass

def submenu_sell():
  # Put your submenus here
  pass

while True:
  playermenumain=raw_input("What would you like to do?\n (1) Buy\n (2)Sell\n (3)Hold and end turn ")
  if playermenumain == "1":
    submenu_buy()
  elif playermenumain == "2":
    submenu_sell()
  elif playermenumain == "3":
    break 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T22:07:48.743

您应该将主菜单代码放在一个方法中，并在循环中调用该方法。每个子菜单也应该是一个方法调用，并且应该在您返回上一个菜单时返回。

您应该查看基本的方法使用和程序流程；这更像是一个通用的编程概念，而不是一个特定的语言问题。它对您将要做的几乎所有事情都至关重要，因此您应该花时间真正理解它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T23:02:25.380

我有几个建议：

1.  创建一个函数 menu() 以 a) 显示菜单，b) 拒绝无效响应，以及 c) 返回有效响应。此菜单将删除代码中的冗余，因为您需要它 3 次。
2.  将销售逻辑移到一个单独的函数中，我们称之为 sell()
3.  同样，将购买逻辑移至 buy()
4.  使用下划线使标识符（变量和函数名）更易于阅读。我更喜欢“main_menu_response”而不是“playermenumain”

有了这些建议，我的实现是：

```
def menu(prompt, choices):
    print '\n\n{0}\n'.format(prompt)
    count = len(choices)
    for i in range(count):
        print '({0}) {1}'.format(i + 1, choices[i])
    response = 0
    while response < 1 or response > count:
        response = raw_input('    Type a number (1-{0}): '.format(count))
        if response.isdigit():
            response = int(response)
        else:
            response = 0
    return response

def buy(stockamount, bondamount):
    response = menu('What to buy?', ['Stocks', 'Bonds', 'Nevermind'])
    # Do something

def sell(stockamount, bondamount):
    response = menu('What to sell?', ['Stocks', 'Bonds', 'Nevermind'])
    # Do something

# ======================================================================
# Main program starts here
# ======================================================================
stockamount=10000
bondamount=10000

main_menu_response = 0
while main_menu_response != 3:
    main_menu_response = menu('What to do?', ['Buy', 'Sell', 'End'])
    if main_menu_response == 1:
        buy(stockamount, bondamount)
    elif main_menu_response == 2:
        sell(stockamount, bondamount) 
```

# c# - 如何在运行时在游戏类之外加载已编译的 .xnb 资源？

> ID：14287278
> 
> 赞同：0
> 
> 时间：2013-01-11T21:54:09.450
> 
> 标签：c#, xna, runtime

我试图让我的游戏在主游戏类之外加载已编译的 xnb 纹理，就像我通常对我的图像文件（未编译为 xnb 格式）所做的那样，但它不起作用。

`Texture2D.FromStream`返回“意外错误”，并且

```
using (var g = new Game1())
{
    Texture2D t2d = g.Content.Load<Texture2D>(file);
} 
```

表示该文件不存在，而`File.Exists`在它旁边显示它确实存在。

我无法将这些 xnb 文件添加到我的项目中，因为我不会在编译时拥有它们。我该如何解决这个问题？

* * *

更多代码：

```
public void LoadXNA(Microsoft.Xna.Framework.Content.ContentManager cmgr, string path)
{
    string xnaTexturesPath = path.Substring(0, path.LastIndexOf("\\")) + "\\textures xna";

    if (Directory.Exists(xnaTexturesPath))
    {
        var files = Directory.GetFiles(xnaTexturesPath, "*.xnb");

        foreach(var file in files)
        {
            string filename = Path.GetFileNameWithoutExtension(file);

            string ext = Path.GetExtension(file);
            string pathNoext = file.Replace(ext, "");

            var t2d = cmgr.Load < Texture2D > (pathNoext);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T11:53:15.053

首先，您不需要一个完整的`Game`. 您只需要一个`GraphicsDevice`. 请注意，纹理绑定到图形设备 - 因此它必须在纹理存在时保持存在 - 并且纹理不能在多个设备之间共享。

要获得`ContentManager`没有课程的`Game`课程，请查看[XNA WinForms Sample](http://xbox.create.msdn.com/en-us/education/catalog/sample/winforms_series_1)。特别是，它展示了如何创建`GraphicsDevice`到给定控件的绑定（可以是`Form`- 如果您不需要使用它，可以将其隐藏），如何创建服务提供者并将 a`IGraphicsDeviceService`放入其中，然后是如何`ContentManager`使用该服务提供者创建一个。

或者，看看[这个答案](https://stackoverflow.com/a/3854195/165500)，它提供了一些你可以直接使用的代码（它使用了同一个 WinForms 示例中的一些类）。它是 XNA 3.1，因此可能需要对 4.0 进行细微调整，但通常应该可以工作。

`Texture2D.FromStream`无法加载 XNB 文件。需要运行 XNB 文件`ContentManager`才能基本上“解包”所有 XNB 内容。

您遇到的问题可能`ContentManager.Load`是因为您在文件名中包含了文件扩展名。它会`.xnb`为您添加，如果您也添加它会感到困惑。

# ios - 修复了 UITableViewCells 中 ImageViews 的填充？

> ID：14287280
> 
> 赞同：1
> 
> 时间：2013-01-11T21:54:13.167
> 
> 标签：ios, cocoa-touch, uitableview, imageview

我试图将`UIImageView`我的`UITableView`. 为此，我必须创建 的子类`UITableViewCell`，并更新`imageView`in的位置`-(void)layoutSubviews`。我尝试了几种方法，基本上是这样的：

```
-(void)layoutSubviews
{
    [super layoutSubviews];

    self.imageView.center = self.center;
} 
```

这不像我想要的那样工作。似乎有一个固定的填充`imageView`或类似的东西，导致`imageView`之后的中心实际上是在单元格实际中心的右侧有点下降。如果我写类似的东西`self.imageView.center.x = self.center.x;`，图像的高度居中，但有点太靠右了。所以我想我必须写一些类似`self.imageView.center.x = self.center.x - someValue;`的东西才能把它弄好，如果填充是问题的话。我在哪里可以找到这个填充，它是否适合不同的设备？或者也许没有填充，这是由其他原因引起的？

顺便说一句，它是一个**分组**的tableView，如果这可能与它有关..

而且， UIImageView 的高度和宽度应该小于单元格的高度和宽度，所以我不认为这是将其推低的原因。

我暂时为我的图像添加了一个边框，只是为了看看它偏离了多少，我认为这很令人不安。你在图像中看到的代码是添加到自定义单元格类中的唯一代码。

这就是我得到的： ![结果](../Images/f4af9d0333dc8cfe49c101d55b05315c.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T01:21:29.347

> 顺便说一句，它是一个分组的 tableView，如果这可能与它有关..

对！

分组的表格视图有填充 - 或边距 - 不管它是什么，它都很不方便。我没有在这里发布代码答案，因为有很多独特的方法可以处理您的问题，但是知道 UITableView 肯定会为分组表视图执行此操作是一个开始。这里还有其他帖子可以帮助您找到处理由分组表视图引起的间距的方法。祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T23:24:24.137

这对我有用：

```
- (void)layoutSubviews
{
    [super layoutSubviews];
    self.imageView.center = self.contentView.center;
    self.imageView.layer.borderColor = [UIColor blackColor].CGColor;
    self.imageView.layer.borderWidth = 2.0;

    self.contentView.layer.borderColor = [UIColor greenColor].CGColor;
    self.contentView.layer.borderWidth = 2.0;
} 
```

这是结果：

![在此处输入图像描述](../Images/d2cc7958755de8401b24a38347ec936c.png)

或者，您可以使用`backgroundView`：

```
UIView *bg = [[UIView alloc] initWithFrame:self.frame];
UIImageView *img = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"icon"]];

[bg addSubview:img];
img.center = bg.center;

self.backgroundView = bg; 
```

# xcode - 在 x86_64（64 位）Mountain Lion 上构建 i386（32 位）应用程序

> ID：14287290
> 
> 赞同：1
> 
> 时间：2013-01-11T21:55:12.293
> 
> 标签：xcode, macos, gcc, osx-mountain-lion

我正在运行通过 MacPorts 获得的 GCC 4.7.2 的 Mac OS X 10.8.2 工作站上构建。`x86_64`我可以使用此设置构建 64 位 ( ) 应用程序。

我正在尝试通过添加`-arch i386`到编译标志来从源代码构建一个 32 位二进制文​​件。我想在 10.5 和 10.6 上添加对 32 位客户端的支持。

我收到以下错误消息（其中包括），这些消息似乎与缺少 32 位库有关：

```
ld: warning: ignoring file /opt/local/lib/gcc47/libgcc_ext.10.5.dylib, missing required architecture i386 in file /opt/local/lib/gcc47/libgcc_ext.10.5.dylib (1 slices)
ld: warning: ignoring file /opt/local/lib/gcc47/gcc/x86_64-apple-darwin12/4.7.2/libgcc.a, file was built for archive which is not the architecture being linked (i386): /opt/local/lib/gcc47/gcc/x86_64-apple-darwin12/4.7.2/libgcc.a 
```

我的问题是：

*   我应该为此使用不同的标志，而不是`-arch i386`？

*   或者，我在哪里可以获得（或如何编译）`i386`我需要安装的库以获得 32 位支持？

（我可以`i386`通过下载 GCC 4.7.2 源代码来编译架构库吗？我应该在`./configure`语句中添加一组特定的选项来启用它吗？）

*   一旦安装了这些库，我当前的 gcc 安装如何“知道”这些库将在哪里找到？

*   我可以通过 Xcode 4.5.2 添加什么吗？我已经在命令行上执行此操作，但我只能将“命令行工具”和 iOS 模拟器视为“首选项”小程序中的下载选项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T22:13:27.317

移除 GCC 的 MacPorts 安装，并通过 XCode 安装“命令行工具”包。完成此操作后，`gcc -arch i386`将按预期工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T01:35:53.360

使用选项重建 GCC 4.7.2 的 MacPorts 安装`+universal`提供了对编译 32- ( `i386`) 和 64 位 ( `x64_86`) 二进制文件的支持。

# ios - 如果不使用 genstrings，那么 NSLocalizedString 比 localizedStringForKey:value:table: 有什么好处吗？

> ID：14287292
> 
> 赞同：0
> 
> 时间：2013-01-11T21:55:17.833
> 
> 标签：ios, cocoa, internationalization

如果不打算使用[genstrings](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/LoadingResources/Strings/Strings.html)控制台工具来创建*.strings*文件，那么使用[NSLocalizedString](https://developer.apple.com/library/mac/documentation/cocoa/reference/foundation/miscellaneous/foundation_functions/reference/reference.html#//apple_ref/c/macro/NSLocalizedString)宏而不是直接调用 NSBundle[本地化StringForKey:value:table:](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSBundle_Class/Reference/Reference.html#//apple_ref/occ/instm/NSBundle/localizedStringForKey%3avalue%3atable%3a)方法有什么好处吗？

这些宏调用相同的 NSBundle 方法。那么支持*genstrings*是这些宏的唯一目的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T09:40:32.647

如果你看`NSLocalizedString`定义：

```
#define NSLocalizedString(key, comment) \
    [[NSBundle mainBundle] localizedStringForKey:(key) value:@"" table:nil] 
```

很明显，`NSLocalizedString`仅`localizedStringForKey:`使用默认参数进行调用，同时还允许指定注释（被`localizedStringForKey:`. 忽略）

因此，`localizedStringForKey:`适用于：

1.  处理多个字符串表；

2.  未找到翻译时指定自定义返回值 ( `value`arg)。

`NSLocalizedString`相反：

1.  更适合最简单（最常见？）的情况（只有一个字符串表）；

2.  更紧凑；

3.  允许指定上下文注释。

何时使用其中一种？

IMO，最大的标准是您是否有多个字符串表。如果是这样，你必须使用`localizedStringForKey:`，否则`NSLocalizedString`会很好。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T03:36:44.783

它们的打字时间也更短，更容易阅读。有时您需要使用底层方法调用（例如我经常使用的非标准字符串文件），但通常`NSLocalizedString()`更方便。它也更容易审计（参见[find_nonlocalized](https://github.com/iosptl/ios6ptl/blob/master/ch17/find_nonlocalized)的例子）。

# vb.net - 对象函数数组

> ID：14287293
> 
> 赞同：0
> 
> 时间：2013-01-11T21:55:27.623
> 
> 标签：vb.net

我有第三方网络服务。使用 VB.Net，我正在使用的函数的一个参数接受一个`MyObject`. 因此，如果我编写下面的代码，`SomeFunction`将按预期工作。

```
 Dim myArr(0) As MyObject
    SomeFunction(myArr) 
```

由于`myArr`可以容纳许多元素，我想创建一个**不同**的函数，允许我将相关元素 (0,1,2,3,4....) 传入`SomeFunction`，而不是传入`0`（在这种情况下是手动）。

我不知道该怎么做。有人可以在这里帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T22:21:04.420

我不确定我是否完全理解您的问题，但是如果您尝试传入对象的单个值而不是数组，您是否尝试过类似的方法：

```
Dim myArr1 As MyObject
Dim myArr1 As MyObject

   SomeFunction({myArr1})
   SomeFunction({myArr2}) 
```

或者，更具体地说，在您的情况下：

```
Dim myArr(100) As MyObject

   ... code ...
   SomeFunction({myArr(20)}) 
```

......类似的东西？

如果我没有正确理解您的问题，我深表歉意。

# jquery - $(window).width 的条件行为

> ID：14287299
> 
> 赞同：2
> 
> 时间：2013-01-11T21:55:50.737
> 
> 标签：jquery

当窗口高于 1278 像素时，我想要某种 mouseenter 和 mouseleave 行为。对于低于 1278 的宽度，我想禁用此切换行为并将 2 个元素设置为 1 状态（可见和活动）。如果浏览器的宽度大于 1278，我还必须将状态重置为默认值（隐藏和非活动）。这就是我所拥有的：

```
$('section').live('mouseenter', function() {
  if ($(window).width() > 1278) {
    $(this).find('menu').removeClass('hidden');
    $(this).find('div.section-wrapper').addClass('active');
  }
}).live('mouseleave', function() {
  if ($(window).width() > 1278) {
    $(this).find('menu').addClass('hidden');
    $(this).find('div.section-wrapper').removeClass('active');
  }
});

$(document).ready(function() {
  $(window).bind('load resize orientationchange', function(){
    if ($(window).width() < 1278) {
      $('section').find('menu').removeClass('hidden');
      $('section').find('div.section-wrapper').addClass('active');
    } else {
      $('section').find('menu').addClass('hidden');
      $('section').find('div.section-wrapper').removeClass('active');
    }
  });
}); 
```

它有效，但我想知道我是否可以做一些更优雅的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T22:38:01.010

CSS 媒体查询是这里的最佳选择。尽管除非您使用速度较慢的设备，否则您不会注意到性能的提高，但这是更快的等价物：

```
@media(min-width: 1279px) {
  section:hover {
    menu.hidden {
      display: block;
      visibility: visible;
    }
    .section-container { padding: 14px; }
    .section-wrapper { border: 1px #ddd solid; }
  }
}
@media(min-width: 768px) and (max-width: 1278px) {
  menu.hidden {
    display: block;
    visibility: visible;
  }
  .section-container { padding: 14px; }
  .section-wrapper { border: 1px #ddd solid; }
} 
```

这两个块看起来几乎相同，但事实并非如此。它们在悬停时以及屏幕宽度低于 1278 像素但高于 768 像素时强制显示“活动”外观。

# java - Flex 从 Java 接管加载库

> ID：14287302
> 
> 赞同：0
> 
> 时间：2013-01-11T21:55:56.483
> 
> 标签：java, android, c++, apache-flex, shared-libraries

我的应用程序使用 Flex、Java 和 C++。C++ 代码被编译成一个共享库。Java 执行库中的方法。之后，Flex 代码使用该库来使用其他功能。

问题是 Flex 使用的方法只能在 Java 代码使用库完成后才能使用。

那么有没有可能在 Java 完成之后 Flex 加载相同的共享库（换句话说：使用相同的实例），以便它们可以使用相同的静态函数/变量？仅使用 Flex 或 Java 不可能执行所有功能。

最终应用程序是适用于 Android 的移动 AIR 应用程序。我使用的 Flex SDK 版本是 4.6，它与 Adob​​e AIR 3.1 一起部署 Flex 为 Java 库创建了一个扩展上下文。该 Java 库使用 JNI 与 C++ 库进行通信。这很好用。Java 在 C++ 库中分配了大量静态变量后，我希望 Flex 能够使用 C++ 库的相同实例。因此，如果 Flex 从库中调用一个函数，它会使用与 Java 之前分配的具有相同值的相同静态变量。

我的想法是为 java 库创建第二个扩展上下文，将“创建”传递给 C++ 库。本机 C/C++ 使用指向 Flex 的方法的指针来使用它们。Java 给出了一个对象的实例。但也许可以在 Java 中捕获初始化请求并将其发送到 C++

# c# - 缺少 C# XML 异常标记描述？

> ID：14287306
> 
> 赞同：2
> 
> 时间：2013-01-11T21:56:09.723
> 
> 标签：c#, exception, documentation

我似乎从来没有看到异常文档标签中提供的“描述”。下面是一个例子：

![没有异常的 XML 描述](../Images/eb358877d70b2891cf6358d8a7e6a06e.png)

请注意，我看到了抛出的异常类型，但没有看到关于何时抛出的描述。我在哪里可以看到这个描述？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T21:59:39.923

在类定义上按 F12 以显示相关的程序集或代码部分。在代码文档中有关于在哪些情况下引发哪些异常的信息。

# utf-8 - 从 DataGrid 保存时，斯堪的纳维亚字符会变得混乱

> ID：14287310
> 
> 赞同：0
> 
> 时间：2013-01-11T21:56:23.910
> 
> 标签：utf-8, character-encoding, dojox.grid.datagrid, xpages-extlib, non-english

我正在开发一个`xe:djxDataGrid`通过`xe:restService`. 它从 Domino 文档加载数据，此时所有斯堪的纳维亚字符（如 ä 和 ö）看起来都正常。

但是如果数据被修改并保存回服务器，ä 会变成 Ã¤ 并且 ö 会变成 Ã¶。我认为这是因为数据是 UTF-8 编码的，但在某些时候会被解释为 ISO-8559-1。

我正在尝试在任何地方使用 UTF-8：

*   Internet 站点文档：使用 UTF-8 进行输出 - 是
*   数据库属性：编码 - utf-8
*   形式：字符集 - Unicode (UTF-8)

页面的响应头有这一行：`Content-Type:text/html;charset=utf-8`

我还尝试将字符集更改为 ISO-8559-1，但这无济于事。我尝试将 REST 控件的*computeWithForm*属性设置为 true 以查看是否使其使用表单字符集，但它没有效果。

在**Firefox** (17.0.1) 中一切正常！该问题至少出现在**Chrome**和**IE9**中。

因为它是特定于浏览器的，所以我认为当 Dojo 将数据发送到 REST 服务时它会中断。但我还没有看到专门告诉 Dojo 使用 UTF-8 的方法。

HTML 标记如下所示：

铬：`<html lang="fi">` 火狐：`<html class="dj_gecko dj_contentbox" lang="fi">`

djConfig 是这样的：`djConfig="locale: 'fi-fi'`.

Domino 版本是 8.5.3FP3，ExtLib 日期是 20121217。

不幸的是，我不能强迫用户只使用 Firefox。任何想法如何解决这一问题？

**编辑 1**

ExtLib 演示应用程序中出现了同样的问题：xpagesext.nsf/REST_DojoGrid.xsp 和 xpagesext.nsf/REST_DojoGridJsonRest.xsp。

**编辑 2**

作为一种解决方法，我可以在表单上的字段*输入翻译*中执行此操作：

```
@ReplaceSubstring(@ThisValue; "Ã¤":"Ã¶"; "ä":"ö"); 
```

这在我在 REST 控件中启用*computeWithForm时有效。*我需要包括所有可能使用的非英语字符。还是有一种通用的方法来转换所有？

**编辑 3**

根据@Esailija 的建议，我检查了将数据保存到服务器的 HTTP PUT 请求。这次我用同样有问题的**Opera** 12.12 进行测试。PUT 请求的内容类型为：

```
Content-Type: application/json 
```

使用 Firefox 是：

```
Content-Type:application/json; charset=UTF-8 
```

这解释了问题，但如何解决呢？据我了解，问题出在*dojox.grid.DataGrid* (1.6) 控件上，它没有在 PUT 请求中设置字符集。Firefox 似乎会自动设置它。或者实际上是在 ExtLib DataGrid 中未能在 Dojo 控件中设置字符集？我还没有找到在 DataGrid 中设置字符集的方法。

**编辑 4**

尝试将REST 控件中的*contentType*属性从更改`application/json`为`application/json; charset=UTF-8`。这没有帮助，PUT 的内容类型仍然是`application/json`.

谢谢，

*   帕努

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-30T07:53:53.483

我修改了代码，它的工作

```
dojo.addOnLoad( 
    function() {
        if( !(dojo._xhrPost )) {
            dojo._xhrPost = dojo.xhrPost;
        }

        dojo.xhrPost = function (args) {
            if ( args.headers && ( args.headers["Content-Type"] == "application/json" ) ) {
                args.headers["Content-Type"] = "application/json;charset=UTF-8";
            }
            return dojo._xhrPost(args);
        }
    }
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T13:35:17.203

我应该能够`charset`通过覆盖 Dojo`xhrPut`和修改 HTTP 标头来修改。

以下是 Sven Hasselbach 的做法，但需要对其进行修改，这样我们就不会覆盖现有的标头（因为它们被 REST 服务使用）并且只需添加/修改它们：

```
/**
 * Cache Prevention for Dojo xhr requests
 *
 * Adds no-cache header and enables dojo's preventCache feature
 * for every dojo xhr call. This prevents the caching of partial
 * refreshs.
 *
 * @author Sven Hasselbach
 * @version 0.3
 *
 **/
dojo.addOnLoad(
    function(){
        if( !dojo._xhr )
        dojo._xhr = dojo.xhr;

        dojo.xhr = function(){        
            try{
                var args = arguments[1];   
                args["preventCache"] = true;
                args["headers"] = { "cache-control": "no-cache" };
                arguments[1] = args;
          }catch(e){}

          dojo._xhr( arguments[0], arguments[1], arguments[2] );
        }
    }
) 
```

[http://openntf.org/XSnippets.nsf/snippet.xsp?id=cache-prevention-for-dojo-xhr-requests](http://openntf.org/XSnippets.nsf/snippet.xsp?id=cache-prevention-for-dojo-xhr-requests)

我已经有了解决方法，但会在某个时候尝试一下。

# javascript - 在 IE 中访问友好的 iframe 内容

> ID：14287317
> 
> 赞同：1
> 
> 时间：2013-01-11T21:57:01.147
> 
> 标签：javascript, internet-explorer, iframe

我创建了一个[友好的 iframe](http://sparecycles.wordpress.com/2012/03/08/inject-content-into-a-new-iframe/)（相同的域）并使用 JavaScript 将它添加到 DOM。它在我的页面上可见。检查 HTML 如下所示：

```
<iframe id="test_frame" frameSpacing="0" height="100" src="javascript:window['contents']" width="100" name="test_frame">
  <!DOCTYPE html>
  <html>
    <head>
      <title>test_frame</title>
      <base target=_top>
    </head>
    <body style="margin: 0px; padding: 0px">
      <p>Hello World</p>
    </body>
  </html>
</iframe> 
```

然后我运行以下命令以访问 iframe 中的标记`<body>`：

```
 alert(window.frames["test_frame"].document.body.innerHTML); 
```

**`body`Internet Explorer 6-10 失败，因为`null`**. iframe的`document`对象存在，但似乎没有可读属性。其他浏览器只显示字符串`<p>Hello World</p>`。

但有趣的是，以下适用于 IE 6-10 和所有其他浏览器：

```
 window.setTimeout(function(){
      alert(window.frames["test_frame"].document.body.innerHTML);
    }, 1); 
```

据我所知`setTimeout`，在全局范围内执行传递的函数。所以我尝试使用[call](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call)但它*不起作用*：

```
 (function(){
      alert(window.frames["test_frame"].document.body.innerHTML);
    }).call(window); 
```

我见过类似的情况，在 setTimeout 中包装代码可以解决 IE iframe 问题。**IE 背后的机制或逻辑是什么？有适当的解决方法吗？**

*上面的测试是在标准模式下运行的，除了所述的错误之外没有其他错误。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T23:02:06.200

> IE 背后的机制或逻辑是什么？有适当的解决方法吗？

该机制非常简单：等待一毫秒（实际上是四毫秒），然后尝试访问 iFrame。

*时机就是一切。如果您调用得太快，您将看到一个空的 iFrame。*即使`src`是javascript代码，您也必须让代码运行。

* * *

*   如果您在 DOM 中遇到 iFrame 后立即访问它：它很可能是空的。它尚未从互联网上获取。*即使`src`是`javascript:...`，iFrame 也会是空的*。

*   如果您在页面加载后 1 毫秒执行此操作，则很可能它还没有被获取。但是，如果它在浏览器缓存中（通常不应该是一个页面）或者它是一个数据（或 javascript，在您的情况下）URL，那么这可能会起作用（尽管没有任何许可）。此时该`document.body`元素可能已经存在 - 即使它将为空。

*   预期的工作流程是您等待 iFrame`load`事件。您可以在创建 iFrame 或设置其`src`. 找到一组跨浏览器可靠地发送消息的事件是一个棘手的问题，但`load`应该可以跨浏览器工作。

*   如果`load`事件未能足够晚，请多等一毫秒。这不应该是必要的，但 IE 中可能存在一个愚蠢的错误（我认为没有）。

*   如果您从控制台触发它，这应该是成功的。事实上，根据我的观察，情况一直如此。

# java - 如何在多个项目中包含外部库而不制作多个副本android java

> ID：14287321
> 
> 赞同：1
> 
> 时间：2013-01-11T21:57:10.600
> 
> 标签：java, android, eclipse, shared-libraries

我正在使用*afreechart*，`edu.emory.mathcs.jtransforms`并且`org.afree.chart`在我为 Android 编写的许多不同活动中。我在配置每个新项目时遇到了很大的麻烦，以便我可以

1.  当我在 Eclipse IDE 中编写代码时，“查看”库中的类。
2.  请参阅这些类的附加源
3.  有关这些类，请参阅附加的 javadoc
4.  当我尝试运行我的活动时，请参阅这些类的 .class 文件。

我现在要做的是为我使用的每个库制作一份 .jar、doc src 和 .properties 的副本。我将这四件事复制到我正在创建的每个项目（每个活动一个）的本地 lib 文件夹中。

我一定错过了一些简单的东西。很明显，我应该将这些库及其 doc、src 和 .properties 放在一个位置，并且我应该能够在使用这些库的每个项目中引用该位置。但我还没有弄清楚如何做到这一点。请告诉我怎么做。

如果有一种方法可以定义一组 jars 和相关的 src & doc，我所做的任何新的 eclipse 项目都会自动并始终搜索它们，那就更好了。

编辑添加关于外部库的答案后：

所以我确实把 jtransforms-2.4.jar 放在了一个外部目录中。在同一个目录中，我放置了包的 src 和 doc，以及一个带有 doc 和 src 条目的文件 jtransforms-2.4.properties，它们指向带有 doc 和 src 的本地文件。我将它们作为外部 jar 添加到我的构建路径中。

1) Eclipse IDE 确实在 .jar 中找到了这些类，并且没有将任何内容标记为丢失。2) 文档和 src 显示为未附加。 **如何将 doc 和 src 信息与库一起放置，以便它们自动显示我将 jar 链接为外部 jar 的每个位置？** 3）当我尝试运行该应用程序时，我得到了“jar中所有类的NoClassDefFound错误。也就是说，Eclipse IDE可以在外部库中找到这些类，但它们没有进入到类路径中应用程序。

总结：因此“外部 jar”技术在三个重要方面中的两个方面都失败了：1）没有 src 和 doc 显示为 eclipse IDE 中的附件 2）不为应用程序提供更新的类路径。

最后：当我将 jar、.properties、doc 和 src 复制到项目的 lib 文件夹中，并删除了外部 jar 引用时，一切正常。

所以我重申我最初的问题，给出的答案（添加到构建路径作为外部 jar）没有解决任何问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T22:01:57.750

他们这里的关键字是*external*。您可以将库添加到项目中，而无需将它们放在本地 lib 文件夹中。您只需要将它们添加为“外部档案”。![添加外部库以在 Eclipse Juno 中构建路径](../Images/a40daca1462069baee2ed21e0d2bded8.png)

您还可以通过项目的属性添加和更改它们。
虽然我认为这不是一个好主意，但为您创建的每个项目添加一些库，可能会有一个脚本，但 imo 它不是内置函数。
**编辑：**
嗯，它不是真正内置的，对我来说它看起来很老套，但[这个](https://stackoverflow.com/questions/9873152/how-to-attach-javadoc-or-sources-to-jars-in-libs-folder)线程可能对你有用。它包含一种通过属性文件解决问题的方法。您只需创建一次此文件并将其添加到您的项目中。所以这是半自动的；）
但我认为这个解决方案比将它添加到每个项目中更好，因为你不应该每次都需要所有这些库......
**编辑2：（**在你之后）至于第一点：
该库不能作为外部库工作的原因可能有多种：

1.  您在该文件夹中没有正确的权限
2.  您的类路径中有多个版本的库。删除那些其他引用，然后重试

正如我已经提到的，仅将其添加到类路径不会自动提供链接的 src 和文档。我建议查看上面的链接。使用这种技术，您可能会半自动地实现目标。
但是，如果您在 Google 上搜索外部 jars 和 eclipse，您会遇到许多与您遇到相同问题的人。所以通常它应该开箱即用。你介意更新你的日食吗？ **另一个编辑：** 我完全忘记了你正在编写一个 Android 应用程序的事实。嗯，这是一个非常特殊的情况。关于这个问题有*很多*话题。也许你也应该看看[这个](https://stackoverflow.com/questions/7994715/noclassdeffounderror-on-external-library-project-for-android)。使用 ADT17 将库放置在库中会触发自动导入。这就是为什么它为你工作的原因。（当你把它放在 /libs 中时）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T00:11:22.063

您可以将[maven](http://code.google.com/p/maven-android-plugin/)与 android 一起使用，如果 jar 在 maven Central 中，您只需要引用它。如果没有，只需将它放在本地 maven 存储库中（我在本地机器上运行一个）。

Maven 将管理诸如此类的依赖项。由于 eclipse 也有一个 maven 插件，它也会正确地看到您的项目引用。我最近进行了切换，这是非常值得的（但需要几天时间才能正确设置）。

# .net - LINQ to SQL 存储过程调用的重试策略

> ID：14287322
> 
> 赞同：0
> 
> 时间：2013-01-11T21:57:12.297
> 
> 标签：.net, vb.net, linq, linq-to-sql

我知道这已经被问过好几次了，但我想我可能有不同的解决方案；但是，我需要一些帮助才能使其正常工作。

思路：业务层调用数据层函数。数据层函数将对数据库上下文的存储过程函数的调用包装在重试策略中。本质上，我希望 LINQ 工具能够导入和管理对存储过程的实际调用，但我希望它能够使用一些重试策略来包装逻辑，以应对可重试的错误。

这个概念的大部分来自[What is good C# coding style for catch SQLException and retrying](https://stackoverflow.com/questions/4821668/what-is-good-c-sharp-coding-style-for-catching-sqlexception-and-retrying)，然而，这似乎只适用于 LINQ to SQL 命令，而不是调用在 DBML 中生成的存储过程函数。

老方法：

```
Sub BLFunctionWithoutRetry()
    Using DB as CustDataContext
        DB.sp_GetCustomers()
    End Using
End Sub 
```

重试的新逻辑：

```
Sub BLFunctionWithRetry()
    GetCustomers()
End Sub

Function GetCustomers() As List(Of Customer)
    Return Retry(Of List(Of Customer))(sp_GetCustomers())
End Function

Function Retry(Of T)(FunctionToCall As Func(Of T)) As T
    Dim Attempt As Integer = 0
    While True
        Try
            Using DB as MyDataContext
                DB.FunctionToCall()
            End Using
        Catch ex as SQLException
            If Retryable() Then Attempt += 1
            If Attempt >= Max Or Not Retryable() Then Throw
        End Try
    End While

Function Retryable() As Boolean
    Return True
End Function 
```

这是总体思路；但是，我需要帮助编写上面的重试函数。我得到了明显的错误`FunctionToCall() is not a member of 'MyDataContext'`。另外，我不知道如何编写它，因此它适用于具有任意长度输入参数的任何存储过程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-22T22:51:51.190

在需要实现类似这样的东西之后，我继续将它变成了一个库：[https](https://github.com/daveaglick/LinqToSqlRetry) ://github.com/daveaglick/LinqToSqlRetry （MIT 许可并在 NuGet 上可用）。它是一个标准的 .NET 库，因此它也应该可以在 VB 中使用（尽管我下面的示例是 C# - 请原谅我不太了解 VB）。

您可以`SubmitChanges()`改写来重试调用`SubmitChangesRetry()`：

```
using(var context = new MyDbContext())
{
  context.Items.InsertOnSubmit(new Item { Name = "ABC" });
  context.SubmitChangesRetry();
} 
```

您还可以使用`Retry()`扩展方法重试查询：

```
using(var context = new MyDbContext())
{
  int count = context.Items.Where(x => x.Name == "ABC").Retry().Count();
} 
```

具体的重试逻辑由策略控制。在后台，重试机制如下所示：

```
int retryCount = 0;
while (true)
{
    try
    {
        return func();
    }
    catch (Exception ex)
    {
        TimeSpan? interval = retryPolicy.ShouldRetry(retryCount, ex);
        if (!interval.HasValue)
        {
            throw;
        }
        Thread.Sleep(interval.Value);
    }
    retryCount++;
} 
```

了解调用中的函数`func()`和`retryPolicy`对象是根据使用情况提供的。这只是让您了解重试循环期间发生了什么。只需在存储库中查看更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T23:23:14.067

有时答案就在问题中，在这种情况下完全是字面意思。[什么是好的 C# 编码风格中用于捕获 SQLException 和重试](https://stackoverflow.com/questions/4821668/what-is-good-c-sharp-coding-style-for-catching-sqlexception-and-retrying)的函数 Retry实际上也适用于存储过程调用！对于那些仍在使用 VB 的人，这里是代码：

```
Public Class DatabaseHelper

    Private Enum RetryableSqlErrors
        SqlConnectionBroken = -1
        SqlTimeout = -2
        SqlOutOfMemory = 701
        SqlOutOfLocks = 1204
        SqlDeadlockVictim = 1205
        SqlLockRequestTimeout = 1222
        SqlTimeoutWaitingForMemoryResource = 8645
        SqlLowMemoryCondition = 8651
        SqlWordbreakerTimeout = 30053
    End Enum

    Public Shared Sub Retry(Of T As {DataContext, New})(retryAction As Action(Of T), ByVal MaxAttempts As Integer, ByVal Delay As Integer)
        Dim retryCount = 0
        Using ctx = New T()
            While True
                Try
                    retryAction(ctx)
                    Exit Sub
                Catch ex As SqlException
                    If Not [Enum].IsDefined(GetType(RetryableSqlErrors), ex.Number) Then
                        Throw
                    End If

                    retryCount += 1
                    If retryCount > MaxAttempts Then
                        Throw
                    End If

                    Thread.Sleep(If(ex.Number = CInt(RetryableSqlErrors.SqlTimeout), Delay * 5, Delay))
                End Try
            End While
        End Using
    End Sub

    Private Shared Function InlineAssignHelper(Of T)(ByRef target As T, ByVal value As T) As T
        target = value
        Return value
    End Function
End Class 
```

然后调用存储过程：

```
Dim results = New YourType
Retry(Of YourDataContext)(Function(ctx) InlineAssignHelper(Of YourType)(results, ctx.YourStoredProc("Your", "Proc", "Inputs", 1).First), 3, .5)
Return results 
```

与原始版本略有不同：我决定只使用 1 个延迟值，然后将其乘以 5 以表示超时。

感谢大卫克拉克的原帖！非常令人印象深刻的功能。

# ruby - 如何在不滚动的情况下写入 shell？

> ID：14287323
> 
> 赞同：1
> 
> 时间：2013-01-11T21:57:15.703
> 
> 标签：ruby, shell, terminal, output

为游戏创建 shell 输出，但不希望窗口随着游戏板的每次更新而滚动。怎么做？

在 Ruby 中工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T22:10:15.543

[`curses`](http://ruby-doc.org/stdlib-1.9.3/libdoc/curses/rdoc/index.html)你能很好地控制你的应用程序的文本输出吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T02:37:48.473

使用以下内容效果很好。不使用宝石。

```
require "curses"
include Curses

class Display
  def self.show board
    win = Window.new(20, 200, 0, 0) # 20 lines x 200 chars
    win.addstr board
    win.refresh
    win.close
  end

  def self.initialize
    crmode
    curs_set 0 # Hide cursor
    init_screen
  end
end 
```

如何使用：

```
Display.initialize

while true do
  Display.show board
  board.update # Or whatever the game needs to do...
end 
```

参考：[http ://www.ruby-doc.org/stdlib-1.9.3/libdoc/curses/rdoc/Curses.html](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/curses/rdoc/Curses.html)

# model-view-controller - 在我的视图模型中使用对象的属性时，附加视图数据 ID 不会覆盖编辑器自动生成的 ID

> ID：14287327
> 
> 赞同：1
> 
> 时间：2013-01-11T21:57:27.587
> 
> 标签：model-view-controller, mvvm, asp.net-mvc-4

我的问题：在我的视图模型中，我创建了一个`InterfaceDisplay`包含一些显示属性和其他元数据的类，用于设置我的界面条目表单。

我想知道为什么当我使用 additionalViewData 对象设置自定义 id 时，例如。`@Html.EditorFor(item => item.Interface.DependantSystem, new { @id = "ls" })`我的控件 id 是否仍设置为自动生成`id="Interface_DependantSystem"`的？

我的视图模型：

```
public class ApplicationViewModel
{
    //Other Properties

    public class InterfaceDisplay {
        [DisplayName("Linked System")]
        public string DependantSystem { get; set; }

        [DisplayName("Data Flow")]
        public string DataFlow { get; set; }

        [DisplayName("Method")]
        public string Type { get; set; }

        [DisplayName("Name")]
        public string Name { get; set; }

        [DisplayName("Description")]
        [DataType(DataType.MultilineText)]
        public string Description { get; set; }
    }
} 
```

我的观点

```
@model Namespaces.ApplicationViewModel
<table class="content-table">
        <tr>
            <td style="width: 240px;">
                @Html.Hidden("appid", @Model.Id)

                @Html.LabelFor(item => item.Interface.DependantSystem)
                @Html.EditorFor(item => item.Interface.DependantSystem, new { @id = "ls" })

                @Html.LabelFor(item => item.Interface.DataFlow)
                @Html.EditorFor(item => item.Interface.DataFlow, new { @id = "df" })

                @Html.LabelFor(item => item.Interface.Type)
                @Html.EditorFor(item => item.Interface.Type, new { @id = "mt" })

                @Html.LabelFor(item => item.Interface.Name)
                @Html.EditorFor(item => item.Interface.Name, new { @id = "nm" })

                @Html.LabelFor(item => item.Interface.Description)
                @Html.EditorFor(item => item.Interface.Description, new { @id = "de" })
            </td>
        </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T22:02:19.170

您传递给`EditorFor`帮助程序的第二个参数是为相应的编辑器模板定义附加视图数据。但是如果你不写自定义的编辑器模板，那么[`default template`](http://bradwilson.typepad.com/blog/2009/10/aspnet-mvc-2-templates-part-3-default-templates.html)就会用到。正如您从我在上一句中链接到的博客文章中看到的那样，这个默认模板对您传递给它的附加视图数据属性参数完全没有任何作用。

因此，如果您希望此参数产生一些效果，您将必须编写一个自定义模板 - 在您的情况下是一个编辑器模板，因为您正在使用 EditorFor 帮助器。由于您将其应用于字符串类型 ( `Description`) 的属性，因此您可以添加以下自定义编辑器模板`~/Views/Shared/EditorTemplates/string.cshtml`，其中包含以下内容：

```
@Html.TextBox(
    "", 
    ViewData.TemplateInfo.FormattedModelValue,
    ViewData
) 
```

请注意我如何覆盖默认模板并将 ViewData 作为第三个参数传递给 TextBox 帮助器，以便您在视图中创建的匿名对象作为 EditorFor 帮助器的第二个参数最终成为该模板将使用的相应输入字段的 HTML 属性产生。

现在，由于您在使用时覆盖了字符串类型的默认编辑器模板，因此`Html.EditorFor(x => x.SomePropertyOfTypeString, new { @class = "foo", id = "bar" })`将使用此自定义模板而不是默认模板，它将为您生成以下标记：

```
<input class="foo" id="bar" name="Description" type="text" value="some value" /> 
```

# ndepend - NDepend 检测属性可以是自动的

> ID：14287330
> 
> 赞同：0
> 
> 时间：2013-01-11T21:57:35.640
> 
> 标签：ndepend

我们有旧代码，人们针对自定义私有变量编写属性，这些私有变量可以变成自动属性（public Foo { get; set; }）。我怎样才能检测到这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T07:48:21.663

要编写这样的规则，您需要以某种方式加入相应的属性访问器和字段。我可以想象两种方法：

1.  您可以检查哪个属性 getter/setter 正在读取/分配哪个字段（只有一个字段）

2.  您可以在字段和属性的名称上定义模式（例如每个字段名称都以两个字符为前缀， **Foo**属性对应于**m_Foo**字段）

第一条规则可能如下所示：

```
// <Name>Use Automatic Property</Name>
warnif count > 0 
from t in Application.Types

from f in t.Fields
where !f.Name.Contains('<') // Eliminate generated by compiler fields

let getter = (from m in t.Methods
where m.IsPropertyGetter &&
      m.FieldsReadButNotAssigned.Contains(f) &&
      m.FieldsUsed.Count() == 1
select m)

let setter = (from m in t.Methods
where m.IsPropertySetter &&
      m.FieldsAssigned.Contains(f) &&
      m.FieldsUsed.Count() == 1
select m)

where getter.Count() > 0 || setter.Count() > 0

select new { f, getter, setter } 
```

第二条规则可能如下所示：

```
// <Name>Use Automatic Property</Name>
warnif count > 0 
from t in Application.Types

from f in t.Fields
where !f.Name.Contains('<') // Eliminate generated by compiler fields

// Here we consider that field name is prefixed with two any characters
where f.Name.Length > 2
let name = f.Name.Substring(2, f.Name.Length -2)

let getter = (from m in t.Methods
where m.IsPropertyGetter &&
      m.SimpleName == "get_" + name
select m).SingleOrDefault()

let setter = (from m in t.Methods
where m.IsPropertySetter &&
      m.SimpleName == "set_" + name
select m).SingleOrDefault()

where getter != null || setter != null

select new { f, getter, setter } 
```

虽然第二条规则可能会漏掉一些积极的东西，但第一条规则会返回许多误报。也许我们可以编写两者的混合（使用名称模式，例如属性名称包含部分字段名称）。

![在此处输入图像描述](../Images/d6c2ac16bba9000b4b948004c93ef9ab.png)

# velocity - 速度模板资源图像

> ID：14287332
> 
> 赞同：1
> 
> 时间：2013-01-11T21:57:44.807
> 
> 标签：velocity

我有一个弹簧配置的 Web 应用程序，并且正在使用速度引擎和 ITextRenderer 生成 PDF 文件。在我的 src/main/resources 中，我既有 .vm 文件，也有我想在 PDF 中显示的图像文件。如何在我的 .vm 模板中引用此图像文件，以便它在生成时显示在我的 PDF 文档中。

我试过html代码：

```
img src="image.jpg" 
```

和：

```
img src="src/main/resources/image.jpg" etc 
```

这些都不起作用。我希望嵌入此图像，因此我不必为 Web 服务器配置已发布的图像目录。

我将如何实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T22:37:32.563

HTML 在 Web 上下文中查找图像，而不是从类路径中查找。

（希望很明显，使用 Maven 源路径是不可能的。）

图像需要在`webapp`Maven 目录下，因此 Maven 可以将它们打包到战争中。

如果您的图像将发生变化/等。然后图像应该完全存在于 webapp*之外*，并通过 servlet 或控制器流回。

# ios - 带有图像和内存管理的 UIScrollView

> ID：14287336
> 
> 赞同：0
> 
> 时间：2013-01-11T21:57:49.647
> 
> 标签：ios, image, caching, memory

我有一个带有很多大图像的 UIScrollView。我按照[WWDC 2010 Video: Designing Apps with Scrolls Views](https://developer.apple.com/videos/wwdc/2010/)中的步骤操作，我认为他们的内存管理方法不需要任何缓存设置。在此之前我开发了一个 Android 应用程序，我需要实现一个缓存来存储图像。iOS中也是这种情况吗？

PS - 在我滚动到一定数量的图像后，该应用程序才会关闭。这显然是一个门槛。

# invokerequired - InvokeRequired=true 在主线程上？

> ID：14287337
> 
> 赞同：0
> 
> 时间：2013-01-11T21:57:50.587
> 
> 标签：invokerequired

我正在调试一个 WinForm 控件，它返回 InvokeRequired = true 尽管我在主线程上。控件是否有可能成为非 UI 线程的子级？我认为作为 UI 组件的控件只能是 UI 线程的子级。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T22:33:13.100

是的，有可能该控件是在应用程序 (ui) 线程之外的其他线程上创建的，请参见下面的示例。

```
 var task = Task<Button>.Factory.StartNew(() => {
            var button = new Button();
            var thisForcesControlToCreateHandle = button.Handle;
            return button;
        });
        var taskResult = task.Result;
        var invokeRequired = taskResult.InvokeRequired; // will be True 
```

阅读控制属性 Handle 很重要，它强制创建句柄，请参阅[http://msdn.microsoft.com/en-us/library/system.windows.forms.control.invokerequired.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.invokerequired.aspx)表单更多信息。

# neo4j - 无法在 OSX 10.7.5 上正确启动 neo4j

> ID：14287342
> 
> 赞同：1
> 
> 时间：2013-01-11T21:58:15.560
> 
> 标签：neo4j

我刚刚下载了 neo4j 企业版 1.8.1 并尝试启动服务器并访问网络管理员。这就是发生的事情：

```
$ bin/neo4j start
Starting Neo4j Server...16:56:10,175 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Could NOT find resource [logback.groovy]
16:56:10,175 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Could NOT find resource [logback-test.xml]
16:56:10,176 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Found resource [logback.xml] at [jar:file:/Users/sharpei/Downloads/neo4j-enterprise-1.8.1/system/lib/neo4j-server-1.8.1.jar!/logback.xml]
16:56:10,198 |-INFO in ch.qos.logback.core.joran.spi.ConfigurationWatchList@7786df0f - URL [jar:file:/Users/sharpei/Downloads/neo4j-enterprise-1.8.1/system/lib/neo4j-server-1.8.1.jar!/logback.xml] is not of type file
16:56:10,262 |-INFO in ch.qos.logback.classic.joran.action.ConfigurationAction - debug attribute not set
16:56:10,268 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - About to instantiate appender of type [ch.qos.logback.core.ConsoleAppender]
16:56:10,272 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - Naming appender as [STDOUT]
16:56:10,288 |-INFO in ch.qos.logback.core.joran.action.NestedComplexPropertyIA - Assuming default type [ch.qos.logback.classic.encoder.PatternLayoutEncoder] for [encoder] property
16:56:10,336 |-INFO in ch.qos.logback.classic.joran.action.RootLoggerAction - Setting level of ROOT logger to INFO
16:56:10,336 |-INFO in ch.qos.logback.core.joran.action.AppenderRefAction - Attaching appender named [STDOUT] to Logger[ROOT]
16:56:10,338 |-ERROR in ch.qos.logback.core.joran.action.IncludeAction - Could not find resource corresponding to [custom-logback.xml]
16:56:10,339 |-INFO in ch.qos.logback.classic.joran.JoranConfigurator@379e8f17 - Registering current configuration as safe fallback point

process [50657]... waiting for server to be ready...... OK.
Go to http://localhost:7474/webadmin/ for administration interface. 
```

我尝试访问 webadmin url，但我只是得到一个空白页面。没有错误或任何东西。我尝试在这里搜索各种日志，但一无所获。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T13:57:26.940

你有机会分享那个安装吗？可能是权限问题，sinc ehte logback.xml 不被识别为文件？neo4j 进程是否对所有文件都有 rwx 权限？

# android - R.java 丢失无法编译

> ID：14287344
> 
> 赞同：4
> 
> 时间：2013-01-11T21:58:18.387
> 
> 标签：android, eclipse

我将我的项目导入 Eclipse，但由于 R.java 文件丢失，编译器显示错误。

这是日志屏幕中显示的内容：

```
[2012-01-11 15:35:41 - Check-list-AndroidApplication1] ERROR: Unable to open class file C:\Workspace\Android\Check-list-AndroidApplication1\gen\com\mobyfactory\uiwidgets\R.java: No such file or directory 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T22:08:31.127

再次按照@Metalfrekans 所说的操作，设置自动生成，然后保存文件，Eclipse 应该生成 R.java

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T22:03:40.327

如果你有 R.java，复制 R.java 的内容并从项目中删除。并在 gen 文件夹中创建新的 R.java。将您复制的内容粘贴到其中。

如果您没有 R.java，请创建一个新项目。将除 R.java 之外的 activity.java 文件和 .xml 文件的内容复制到新项目中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T22:10:17.390

通常，当您遇到 R.Class 问题时，是因为某些布局 xml 文件或某些图像 adcionada 项目名称在模式之外，带有空格，例如“图像名称”而不是“图像名称”等。

修改它并尝试继续项目-> 清理如果问题是 R.Class 将自动重新创建。

# c# - 尝试清除时的 DataGridView 奇怪的显示行为

> ID：14287350
> 
> 赞同：1
> 
> 时间：2013-01-11T21:58:49.240
> 
> 标签：c#, datagridview, datatable

我有一个绑定到 DataTable 的 DataGridView。

我稍后将一个新的按钮列直接添加到 DGV。下次我刷新表时，我想从 DGV 中清除所有以前的数据。

对于我刚刚做的表，`var table = new DataTable();` 但是当 DGV 被定义为方法内的本地时，使用 DataGridView 执行此操作会导致它永远不会显示在表单上。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            //dataGridView1 = new DataGridView(); //<-- uncommenting this line breaks the form's dgv from displaying anything

            DataTable table = new DataTable();
            table.Columns.Add("C_" + table.Columns.Count);
            table.Rows.Add("R1");
            table.Rows.Add("R2");
            dataGridView1.DataSource = table;

            DataGridViewButtonColumn oCol = new DataGridViewButtonColumn();
            oCol.Name = "Buttons";
            oCol.Text = "(...)";
            oCol.UseColumnTextForButtonValue = true;
            dataGridView1.Columns.Add(oCol);
        }
    }
} 
```

这是一个错误还是我应该如何正确刷新/重置/清除 dgv？

### 编辑：

上面的代码片段已从原始内容中编辑。取消注释代码中的行以查看 button1 在 RunMode 时的不同行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T22:01:50.340

```
dataGridView1.DataSource = null; 
```

或者您可以选择清除列/行。

```
dataGridView1.Rows.Clear();
dataGridView1.Columns.Clear(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T00:33:45.437

我认为这不是一个错误。但不幸的是我无法解释:)

只需使用`Controls.Add(..)`

```
 DataGridView dgv = new DataGridView(); 
    private void button1_Click(object sender, EventArgs e)
    {
        DataTable table = new DataTable();
        table.Columns.Add("C_" + table.Columns.Count);
        table.Rows.Add("R1");
        table.Rows.Add("R2");
        dgv.DataSource = table;

        DataGridViewButtonColumn oCol = new DataGridViewButtonColumn();
        oCol.Name = "Buttons";
        oCol.Text = "(...)";
        oCol.UseColumnTextForButtonValue = true;
        dgv.Columns.Add(oCol);

        Controls.Add(dgv); //<--Try to check this.
    }

    private void button2_Click(object sender, EventArgs e)
    {
        dgv.Columns.Clear();
    } 
```

# ios - 在集合视图单元格中设置文本时出错

> ID：14287353
> 
> 赞同：1
> 
> 时间：2013-01-11T21:58:54.043
> 
> 标签：ios, uicollectionview, uicollectionviewcell

当我将它设置为NULL后nslog值时，为什么？

```
CustomCollectionVIewCell *cell =[[CustomCollectionVIewCell alloc]init];
NSString *name =[dict valueForKey:@"filterName"];//works
[cell.labelDisplay setText:name];//does not
NSLog(@"name = %@",cell.labelDisplay.text);
cell.isSelected=NO;
[_availableHealthFilters setObject:cell atIndexedSubscript:i]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T03:18:27.220

在自定义单元格中初始化您的 labelDisplay。

```
//customColectionCell.h
@property(strong,nonomatic) NSString *labelText;
-(void)setCellLabelText:(NSString *)labelText;
//customCollectionCell.m
-(id)init{
//init cellLabel and addSubView to customCell 

}
//Than set label in custom method
-(void)setCellLabelText:(NSString *)labelText{
_labelText = labelText;
sefl.labelDisplay.text = labelText;
} 
```

# jquery - jQuery datepicker 生成 XML 错误并且不工作

> ID：14287363
> 
> 赞同：-1
> 
> 时间：2013-01-11T21:59:59.380
> 
> 标签：jquery, jquery-ui, datepicker

我在一个新应用程序中使用[jQuery](http://en.wikipedia.org/wiki/JQuery) datepicker。我正在初始化 jQuery 和[jQuery UI](http://en.wikipedia.org/wiki/JQuery_UI)，如下所示。

```
<script type="text/javascript">
    //=== Load in any web modules necessary
    google.load("jquery", "1");
    google.load("jqueryui", "1");
</script>
<link rel="stylesheet" href="http://code.jquery.com/ui/1.9.0/themes/base/jquery-ui.css" /> 
```

输入是：

```
<input id="cqupmj" class="hasDatepicker" type="text" value="12-18-2012"> 
```

我的 datepicker jQuery 控制函数定义如下：

```
var dte = $('#cqupmj').val(); 
```

日期（dte）输入格式：'12-18-2012'

```
 $( "#cqupmj" ).datepicker({
        defaultDate:  dte,
        dateFormat: 'mm-dd-yyyy',
        //dateFormat: 'yyyy-mm-dd',
        changeMonth: true,
        changeYear: true,
        numberOfMonths: 1,
        //dateFormat: 'mm-dd-yy',
        altFormat: 'mm-dd-yyyy',
        onSelect: quote.get_date
    }); 
```

XML错误如下：

```
Error: An exception occurred.
Traceback (most recent call last):
  File "resource://jid1-f9uj2thwoam5gq-at-jetpack/api-utils/lib/system/events.js", line 58, in 
data: data
File "resource://jid1-f9uj2thwoam5gq-at-jetpack/api-utils/lib/observer-service.js", line 35, in listener
callback.call(target || callback, subject, data);
File "resource://jid1-f9uj2thwoam5gq-at-jetpack/collusion/lib/main.js", line 395, in 
queueInfo(connection);
File "resource://jid1-f9uj2thwoam5gq-at-jetpack/collusion/lib/main.js", line 197, in queueInfo
if (types.indexOf(info.type) == -1) {
TypeError: types is undefined 
```

这些日期选择器曾经工作过，现在不工作了。代码没有改变，但我不知道出了什么问题。我如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T23:23:10.647

从代码中删除`hasDatepicker`类，

```
<input id="cqupmj" type="text" value="12-18-2012"> 
```

如果您从相同的输入中获取默认日期，则也不需要默认日期。见[演示](http://jsfiddle.net/oceog/fM3gr/)。

日期格式也应该是`mm-dd-yy`，不是`mm-dd-yyyy`。

还要确保用`$(function() {/*INIT CODE*/}`.

您收到的错误似乎来自您的浏览器扩展错误，而不是您的页面。

# maven - 在 github 的 maven 站点插件中指定 github 的 url

> ID：14287365
> 
> 赞同：1
> 
> 时间：2013-01-11T22:00:16.240
> 
> 标签：maven, github

我在这里使用 github maven 站点插件：[https ://github.com/github/maven-plugins](https://github.com/github/maven-plugins)

我想为 github 配置 url，因为我正在使用 github 企业安装而不是常规的 github 服务器。

我可以弄清楚如何设置服务器的 id，它清楚地记录在[README.md](https://github.com/github/maven-plugins/blob/master/README.md#pomxml)中：

```
<properties>
  <github.global.server>github</github.global.server>
</properties> 
```

但是，我不知道如何为服务器配置 URL。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T22:05:44.393

看起来我让事情变得比他们需要的更困难。com.github.github.site-maven-plugin 支持`<host>`里面的一个参数，`<configuration>`这就是我需要使用的所有参数。

# spotify - 从 Spotify 下载封面艺术 URL 和键值观察

> ID：14287370
> 
> 赞同：1
> 
> 时间：2013-01-11T22:00:43.430
> 
> 标签：spotify, cocoalibspotify-2.0

我在我的应用程序的表格视图中显示 Spotify 曲目列表，我想下载这些曲目所属专辑的封面艺术。

我登录到 CocoaLibSpotify，我可以播放所有曲目，所以这部分很好。我似乎无法开始工作的是封面艺术的下载。我遵循 SimplePlayer 项目的代码，除了我将 SPTrack 实例存储在可变字典 (tracksDownladingForCoverArt) 中，因为可能有许多轨道下载封面艺术。

所以，这就是我所做的：

```
[[SPSession sharedSession] trackForURL:nativeSpotifyURL callback:^(SPTrack *track) {
    if (track != nil) {

        [track addObserver:self forKeyPath:@"album.cover.spotifyURL" options:0 context:NULL];
        self.tracksDownloadingForCoverArt[nativeSpotifyURL] = track;

        [SPAsyncLoading waitUntilLoaded:track timeout:kSPAsyncLoadingDefaultTimeout then:^(NSArray *tracks, NSArray *notLoadedTracks) {
            if ([tracks count] > 0) {
                // I don't believe I need to do anything here
            }
        }];
    }
}]; 
```

observeValueForKeyPath:ofObject:change:context: 被调用一次，新旧值都为 nil，但在那之后，什么也没有。但是，如果我遵循 SimplePlayer 的字母（即使用 self.currentTrack 而不是字典）并注册键路径 @"self.currentTrack.album.cover.spotifyURL"，observerValue... 方法被调用两次，一次与 nil 和一次与实际值。

我错过了什么？哦，我注册的是 spotifyURL 而不是图像，所以我可以缓存图像。这样，当用户退出应用程序并稍后返回时，不必重新加载所有图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T14:17:45.090

这是预期的行为——除非您明确要求它降低数据使用量，否则不会加载封面艺术。要加载所有封面，您可以这样做……</p>

```
NSArray *tracksToGetArtFor = …; // Get some tracks;
[SPAsyncLoading waitUntilLoaded:tracks timeout:kSPAsyncLoadingDefaultTimeout then:^(NSArray *loadedTracks, NSArray *notLoadedTracks) {

    NSArray *coverArts = [tracks valueForKey:@"album.cover"]; // Get an array of the track's covers

    [SPAsyncLoading waitUntilLoaded:coverArts timeout:kSPAsyncLoadingDefaultTimeout then:^(NSArray *loadedCovers, NSArray *notLoadedCovers) {
        NSLog(@"Number of covers that're loaded: %@:", @(loadedCovers.count));
    }];
]}; 
```

您可能需要更大的超时时间来加载大量封面，因为它们可能相当大。

如果您不想用于封面，另一种方法是在每个轨道的属性上`SPAsyncLoading`使用`SPAsyncLoading`KVO加载轨道。`album.cover`要强制所有封面开始加载，您需要调用`-startLoading`每个封面的方法。例如：

```
NSArray *tracksToGetArtFor = …; // Get some tracks;
[SPAsyncLoading waitUntilLoaded:tracks timeout:kSPAsyncLoadingDefaultTimeout then:^(NSArray *loadedTracks, NSArray *notLoadedTracks) {

    NSArray *coverArts = [tracks valueForKey:@"album.cover"]; // Get an array of the track's covers

    // Trigger the -startLoading method of each cover.
    [coverArts makeObjectsPerformSelector:@selector(startLoading)];

]}; 
```

# java - JSF 转换器

> ID：14287372
> 
> 赞同：0
> 
> 时间：2013-01-11T22:00:56.257
> 
> 标签：java, jsf, jakarta-ee, jsf-2, managed-bean

我收到以下错误：`Conversion Error setting value 'home' for 'null Converter'.` `Home`是正在显示的字符串表示形式。

对我来说，这没有意义。这是JSF代码：

```
<h:selectOneMenu value="#{createResourceDialogController.selectedDir}">
    <f:selectItems value="#{createResourceDialogController.dirs}" />
</h:selectOneMenu> 
```

这是 ManagedBean 代码：

```
public Map<String,IDir> getDirs()
{
    Map<String,IDir> retVal = new LinkedHashMap<String, IDir>();
    List<IDir> dirs;
    if(isCompanyResource)
    {
        dirs = convertToIDir(getCompanyDir());
    }
    else
    {
        dirs = convertToIDir(getUserDir());
    }
    for(IDir iDir : dirs)
    {
        retVal.put(iDir.getDir(),iDir);
    }
    return retVal;
}

public IDir getSelectedDir()
{
    return selectedDir;
}

public void setSelectedDir(IDir selectedDir)
{
    this.selectedDir = selectedDir;
} 
```

对我来说，似乎所有类型都匹配，甚至不需要转换器。`getDirs()`返回一个值为 的地图`IDir`。当 setter 被调用时，它应该得到`IDir`? 有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T22:20:55.250

JSF 将您的`<h:selectOneMenu />`in 转换为 html `select`，它在纯文本中只有 value 和 label 属性。因此，您需要为此使用转换器，或者您也可以创建一个`SelectItem`带有 id-label 值的列表，当您收到表单时，只需重新加载`IDir`id。

**xhtml**

```
<h:selectOneMenu value="#{createResourceDialogController.selectedDirId}">
    <f:selectItems value="#{createResourceDialogController.options}" />
</h:selectOneMenu> 
```

**支持豆**

```
@ManagedBean
@ViewScoped
public class CreateResourceDialogController {

    private List<SelectItem> options;

    private String selectedDirId;

    private void initBean(){
        options = new ArrayList<SelectItem>();
        SelectItem item1 = new SelectItem(dir.getId.toString(), dir.getName());
        options.add(item1);
    }

    public List<SelectItem> getOptions(){
        return options;
    }

    public void setSelectedDirId(String dirId){
        selectedDirId = dirId;
    }

    public String getSelectedDirId(){
        return selectedDirId;
    }
} 
```

看看这个[教程](http://tunatore.wordpress.com/2011/06/29/how-to-use-hselectonemenu-jsf-2-0-example/)。但是，如果您要多次重用此代码，则应考虑使用转换器，作为更清洁的解决方案。

# java - 使用 JAXB 编组时出现“无法识别的签名”错误

> ID：14287378
> 
> 赞同：1
> 
> 时间：2013-01-11T22:01:29.327
> 
> 标签：java, jaxb, marshalling

我有以下代码：

```
 javax.xml.bind.Marshaller m = ...
    java.io.OutputStream outputStream = ...
    Object jaxbElement = ...
    m.marshal(jaxbElement, outputStream); 
```

它工作正常。

我也有以下代码：

```
 javax.xml.bind.Marshaller m = ...
    java.io.BufferedWriter writer = ...
    Object jaxbElement = ...
    m.marshal(jaxbElement, writer); 
```

在这种情况下执行对 marshal 的调用会产生以下异常：

```
javax.xml.bind.MarshalException
 - with linked exception:
[java.io.IOException: Unrecognizable signature: "<?xml version="1.0" e".] 
```

**两种情况下的 jaxbElement 是相同的。**

为什么第一个示例有效，而第二个示例失败？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T11:48:03.300

我无法重现您看到的异常，以下对我有用。

**富**

```
import javax.xml.bind.annotation.XmlRootElement;

@XmlRootElement
public class Foo {

    private String bar;

    public String getBar() {
        return bar;
    }

    public void setBar(String bar) {
        this.bar = bar;
    }

} 
```

**演示**

```
import java.io.*;
import javax.xml.bind.*;
import javax.xml.namespace.QName;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Foo.class);

        Foo foo = new Foo();
        foo.setBar("Hello World");
        marshal(jc, foo);

        Object jaxbElement = new JAXBElement<Foo>(new QName("root"), Foo.class, foo);
        marshal(jc, jaxbElement);
    }

    private static void marshal(JAXBContext jc, Object jaxbElement) throws Exception {
        Marshaller m = jc.createMarshaller();
        StringWriter stringWriter = new StringWriter();
        BufferedWriter writer = new BufferedWriter(stringWriter);
        m.marshal(jaxbElement, writer);
        writer.close();
        System.out.println(stringWriter.toString());
    }

} 
```

**输出**

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?><foo><bar>Hello World</bar></foo>
<?xml version="1.0" encoding="UTF-8" standalone="yes"?><root><bar>Hello World</bar></root> 
```

# .net - 如何在 .net 2.0 中完全删除特殊字符，不提供 linq

> ID：14287379
> 
> 赞同：1
> 
> 时间：2013-01-11T22:01:38.767
> 
> 标签：.net, string, char, trim, remove-if

我必须使用 .NET 2.0，而且我这里没有 Linq 支持，也...

我尝试使用 Remove() 和 Trim() 函数来修剪字符，例如：

```
 string guid = Guid.NewGuid().ToString();
  string result = header.Trim( new Char[] { ' ', '-'} )); 
```

但是对于`Trim()`样本，结果与`string guid`（它们只是相等）相同。

我已经完成了这样的功能，但我想正确使用密封的功能`String class`。

```
 string guid = Guid.NewGuid().ToString(); 
        string result = String.Empty;

        for (int i = 0; i < guid.Length; i++)
        {
            if (guid[i] != '-') result += guid[i];
        } 
```

但它看起来像普通的 C 风格，我想完全使用 String 函数。我在哪里使用 Trim() 和 Remove() 失败了。

别忘了，我不能使用 Linq 或更高版本的 .net 2.0，所以问题是在较低级别上......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T22:10:27.583

```
string guid = Guid.NewGuid().ToString("N"); //generate it the right way 
```

或者

```
result = guid.Replace("-", "").Replace(" ", ""); 
```

不要使用正则表达式。这是不必要的复杂和不必要的缓慢。这不是最好的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T22:07:43.807

你总是可以使用正则表达式

```
 system.text.regularexpressions.regex.replace(guid.NewGuid(),"[\s|-]",""); 
```

# ios - 使用 NSAttributedString 更改字符串颜色？

> ID：14287386
> 
> 赞同：158
> 
> 时间：2013-01-11T22:01:51.223
> 
> 标签：ios, cocoa-touch, nsattributedstring

我有一个用于调查的滑块，它根据滑块的值显示以下字符串：“非常糟糕、糟糕、好的、好、非常好”。

这是滑块的代码：

```
- (IBAction) sliderValueChanged:(UISlider *)sender {
    scanLabel.text = [NSString stringWithFormat:@" %.f", [sender value]];
    NSArray *texts=[NSArray arrayWithObjects:@"Very Bad", @"Bad", @"Okay", @"Good", @"Very Good", @"Very Good", nil];
    NSInteger sliderValue=[sender value]; //make the slider value in given range integer one.
    self.scanLabel.text=[texts objectAtIndex:sliderValue];
} 
```

我希望“非常糟糕”为红色，“糟糕”为橙色，“好的”为黄色，“好”和“非常好”为绿色。

我不明白如何使用`NSAttributedString`来完成这项工作。

* * *

## 回答 #1

> 赞同：212
> 
> 时间：2013-01-11T22:50:39.413

没有必要使用`NSAttributedString`. 您所需要的只是一个带有正确`textColor`. 此外，这个简单的解决方案适用于所有版本的 iOS，而不仅仅是 iOS 6。

但是，如果您不必要地希望使用`NSAttributedString`，您可以执行以下操作：

```
UIColor *color = [UIColor redColor]; // select needed color
NSString *string = ... // the string to colorize
NSDictionary *attrs = @{ NSForegroundColorAttributeName : color };
NSAttributedString *attrStr = [[NSAttributedString alloc] initWithString:string attributes:attrs];
self.scanLabel.attributedText = attrStr; 
```

* * *

## 回答 #2

> 赞同：113
> 
> 时间：2013-01-11T22:07:11.607

使用这样的东西（未检查编译器）

```
NSMutableAttributedString *string = [[NSMutableAttributedString alloc]initWithString:self.text.text];
NSRange range=[self.myLabel.text rangeOfString:texts[sliderValue]]; //myLabel is the outlet from where you will get the text, it can be same or different

NSArray *colors=@[[UIColor redColor],
                  [UIColor redColor],
                  [UIColor yellowColor],
                  [UIColor greenColor]
                 ];

[string addAttribute:NSForegroundColorAttributeName 
               value:colors[sliderValue] 
               range:range];           

[self.scanLabel setAttributedText:texts[sliderValue]]; 
```

* * *

## 回答 #3

> 赞同：52
> 
> 时间：2016-02-04T16:43:13.297

在**斯威夫特 4**中：

```
// Custom color
let greenColor = UIColor(red: 10/255, green: 190/255, blue: 50/255, alpha: 1)
// create the attributed colour
let attributedStringColor = [NSAttributedStringKey.foregroundColor : greenColor];
// create the attributed string
let attributedString = NSAttributedString(string: "Hello World!", attributes: attributedStringColor)
// Set the label
label.attributedText = attributedString 
```

在**斯威夫特 3**中：

```
// Custom color
let greenColor = UIColor(red: 10/255, green: 190/255, blue: 50/255, alpha: 1)
// create the attributed color
let attributedStringColor : NSDictionary = [NSForegroundColorAttributeName : greenColor];
// create the attributed string
let attributedString = NSAttributedString(string: "Hello World!", attributes: attributedStringColor as? [String : AnyObject])
// Set the label
label.attributedText = attributedString 
```

享受。

* * *

## 回答 #4

> 赞同：33
> 
> 时间：2017-03-08T16:48:52.840

对于**斯威夫特 5：**

```
var attributes = [NSAttributedString.Key: AnyObject]()
attributes[.foregroundColor] = UIColor.red

let attributedString = NSAttributedString(string: "Very Bad", attributes: attributes)

label.attributedText = attributedString 
```

对于**斯威夫特 4：**

```
var attributes = [NSAttributedStringKey: AnyObject]()
attributes[.foregroundColor] = UIColor.red

let attributedString = NSAttributedString(string: "Very Bad", attributes: attributes)

label.attributedText = attributedString 
```

对于**斯威夫特 3：**

```
var attributes = [String: AnyObject]()
attributes[NSForegroundColorAttributeName] = UIColor.red

let attributedString = NSAttributedString(string: "Very Bad", attributes: attributes)

label.attributedText = attributedString 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2018-02-06T08:53:15.620

你可以创建[`NSAttributedString`](https://developer.apple.com/documentation/foundation/nsattributedstring)

```
NSDictionary *attributes = @{ NSForegroundColorAttributeName : [UIColor redColor] };
NSAttributedString *attrStr = [[NSAttributedString alloc] initWithString:@"My Color String" attributes:attrs]; 
```

或[`NSMutableAttributedString`](https://developer.apple.com/documentation/foundation/nsmutableattributedstring)使用范围应用自定义属性。

```
NSMutableAttributedString *attributedString = [[NSMutableAttributedString alloc] initWithString:[NSString stringWithFormat:@"%@%@", methodPrefix, method] attributes: @{ NSFontAttributeName : FONT_MYRIADPRO(48) }];
[attributedString addAttribute:NSFontAttributeName value:FONT_MYRIADPRO_SEMIBOLD(48) range:NSMakeRange(methodPrefix.length, method.length)]; 
```

可用属性：[NSAttributedStringKey](https://developer.apple.com/documentation/foundation/nsattributedstringkey?language=objc)

* * *

更新：

## 斯威夫特 5.1

```
let message: String = greeting + someMessage
let paragraphStyle = NSMutableParagraphStyle()
paragraphStyle.lineSpacing = 2.0

// Note: UIFont(appFontFamily:ofSize:) is extended init.
let regularAttributes: [NSAttributedString.Key : Any] = [.font : UIFont(appFontFamily: .regular, ofSize: 15)!, .paragraphStyle : paragraphStyle]
let boldAttributes = [NSAttributedString.Key.font : UIFont(appFontFamily: .semiBold, ofSize: 15)!]

let mutableString = NSMutableAttributedString(string: message, attributes: regularAttributes)
mutableString.addAttributes(boldAttributes, range: NSMakeRange(0, greeting.count)) 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2017-08-01T11:33:51.083

在 Swift 4 中，`NSAttributedStringKey`有一个名为`foregroundColor`. `foregroundColor`有以下声明：

```
static let foregroundColor: NSAttributedStringKey 
```

> 该属性的值是一个`UIColor`对象。使用此属性可在渲染期间指定文本的颜色。如果不指定此属性，则文本以黑色呈现。

以下 Playground 代码显示了如何使用 设置`NSAttributedString`实例的文本颜色`foregroundColor`：

```
import UIKit

let string = "Some text"
let attributes = [NSAttributedStringKey.foregroundColor : UIColor.red]
let attributedString = NSAttributedString(string: string, attributes: attributes) 
```

* * *

下面的代码显示了一个可能的`UIViewController`实现，它依赖于从 a`NSAttributedString`更新 a 的文本和文本颜色：`UILabel``UISlider`

```
import UIKit

enum Status: Int {
    case veryBad = 0, bad, okay, good, veryGood

    var display: (text: String, color: UIColor) {
        switch self {
        case .veryBad:  return ("Very bad", .red)
        case .bad:      return ("Bad", .orange)
        case .okay:     return ("Okay", .yellow)
        case .good:     return ("Good", .green)
        case .veryGood: return ("Very good", .blue)
        }
    }

    static let minimumValue = Status.veryBad.rawValue
    static let maximumValue = Status.veryGood.rawValue
} 
```

```
final class ViewController: UIViewController {

    @IBOutlet weak var label: UILabel!
    @IBOutlet weak var slider: UISlider!
    var currentStatus: Status = Status.veryBad {
        didSet {
            // currentStatus is our model. Observe its changes to update our display
            updateDisplay()
        }
    }

    override func viewDidLoad() {
        super.viewDidLoad()

        // Prepare slider
        slider.minimumValue = Float(Status.minimumValue)
        slider.maximumValue = Float(Status.maximumValue)

        // Set display
        updateDisplay()
    }

    func updateDisplay() {
        let attributes = [NSAttributedStringKey.foregroundColor : currentStatus.display.color]
        let attributedString = NSAttributedString(string: currentStatus.display.text, attributes: attributes)
        label.attributedText = attributedString
        slider.value = Float(currentStatus.rawValue)
    }

    @IBAction func updateCurrentStatus(_ sender: UISlider) {
        let value = Int(sender.value.rounded())
        guard let status = Status(rawValue: value) else { fatalError("Could not get Status object from value") }
        currentStatus = status
    }

} 
```

但是请注意，您实际上并不需要使用`NSAttributedString`这样的示例，并且可以简单地依赖`UILabel`'s`text`和`textColor`属性。因此，您可以`updateDisplay()`使用以下代码替换您的实现：

```
func updateDisplay() {
    label.text = currentStatus.display.text
    label.textColor = currentStatus.display.color
    slider.value = Float(currentStatus.rawValue)
} 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2019-04-01T21:00:22.637

Swift 5.2 更新

```
var attributes = [NSAttributedString.Key: AnyObject]()

attributes[.foregroundColor] = UIColor.blue

let attributedString = NSAttributedString(string: "Very Bad",
attributes: attributes)

label.attributedText = attributedString 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-03-05T16:51:11.357

Swift 的一个班轮：

```
NSAttributedString(string: "Red Text", attributes: [.foregroundColor: UIColor.red]) 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-06-09T01:48:00.360

我喜欢让事情变得更简单，试试这个

```
-(NSArray *) reArrangeArrays:(NSArray *)iObjects {

    NSMutableArray *Words = [[NSMutableArray alloc] init];
    NSMutableArray *Colors = [[NSMutableArray alloc] init];

    CFIndex OneThree = 0;
    CFIndex TwoFour = 1;
    for (CFIndex iCounter = 0; iCounter < iObjects.count; iCounter ++) {

        [Words addObject:[iObjects objectAtIndex:OneThree]];
        [Colors addObject:[iObjects objectAtIndex:TwoFour]];

        OneThree = OneThree + 2;
        TwoFour = TwoFour + 2;

        if (OneThree > iObjects.count || TwoFour > iObjects.count)
            break;
    }

    return @[[NSArray arrayWithArray:Words],[NSArray arrayWithArray:Colors]];
}

+(NSMutableAttributedString *) OriginalText:(NSString *)OriginalText WordsAndColors:(NSArray *)WordsAndColors TheRestOfTheTextColor:(UIColor *)TheRestColor {

    NSArray *Text = [[self.alloc reArrangeArrays:WordsAndColors] objectAtIndex:0];
    NSArray *Color = [[self.alloc reArrangeArrays:WordsAndColors] objectAtIndex:1];

    NSMutableAttributedString *MutableAttString = [[NSMutableAttributedString alloc] initWithString:OriginalText attributes:@{NSForegroundColorAttributeName : TheRestColor}];

    NSString *text = OriginalText;

    if (OriginalText != nil) {

    for (NSUInteger Counter = 0; Counter < Color.count; Counter ++) {

    NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:[NSString stringWithFormat:@"(%@)",[Text objectAtIndex:Counter]] options:kNilOptions error:nil];

    NSRange range = NSMakeRange(0 ,text.length);

    [regex enumerateMatchesInString:text options:kNilOptions range:range usingBlock:^(NSTextCheckingResult *result, NSMatchingFlags flags, BOOL *stop) {

        NSRange subStringRange = [result rangeAtIndex:0];

        [MutableAttString addAttribute:NSForegroundColorAttributeName value:[Color objectAtIndex:Counter] range:subStringRange];

    }];

    }
}
    return MutableAttString;
} 
```

这就是如何使用

```
 NSString *Text = @"Made by @CrazyMind90";

 NSMutableAttributedString *AttriString = [ViewController OriginalText:Text
            WordsAndColors:@[

            @"Made",UIColor.redColor,
            @"by",UIColor.yellowColor,
            @"@CrazyMind90",UIColor.blueColor,

            ]

           TheRestOfTheTextColor:UIColor.whiteColor];

           //Not TextView.text BUT TextView.attributedText
           TextView.attributedText = AttriString; 
```

[结果](https://i.stack.imgur.com/H8lYh.png)

..

# javascript - 在带有嵌套 div 的循环内循环

> ID：14287394
> 
> 赞同：0
> 
> 时间：2013-01-11T22:02:20.650
> 
> 标签：javascript, pug

为什么以下创建没有嵌套的div？我希望`.square`s 在`.row`s内

```
- for (var i = 1; i <= rows; i++) {
    div(class='row row-'+i)
    - for (var j = 1; j <= cols; j++) {
        .div(class='square square-'+j)
    - }
- } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T22:05:57.457

只是猜测，您可能需要缩进第二个 for 循环以位于第一个 div 内

**编辑**：此代码按预期为我工作，带有嵌套的 div

```
//- set variables for testing only
rows = 3
cols = 2

- for (var i = 1; i <= rows; i++) {
  div(class='row row-'+i)
    //- indent the for loop inside containing div
    - for (var j = 1; j <= cols; j++) {
      .div(class='square square-'+j)
    - }
- } 
```

# php - 在 CakePHP 登录操作中编写会话 if/else 中断

> ID：14287396
> 
> 赞同：0
> 
> 时间：2013-01-11T22:02:31.490
> 
> 标签：php, session, cakephp

我正在尝试将 if/else 添加到 CakePHP 中的登录操作。登录操作有很多行，当我在 LoginValidate 之后添加 if/else 时，登录操作的括号现在无法正确关闭。

会话确实被写入，但是当在 sublime text2 中使用括号荧光笔时，最上面的括号不会被突出显示。这是代码。如果用户不在 UserGroup 'Admin' 中，我想要做的是将 KCFinder 的会话变量写入'true'，如果用户在 UserGroup 'Admin' 中，则为 false。

```
public function login() {
    print_r($this -> Session -> read());
    if ($this->request -> isPost()) {
        $this->User->set($this->data);                                  
        if($this->User->LoginValidate()) {
            $email  = $this->data['User']['email'];
            $password = $this->data['User']['password'];
            $user = $this->User->findByUsername($email);
            $UserGroup = $this->User->UserGroup;

            if (empty($user)) {
                $user = $this->User->findByEmail($email);
                if (empty($user)) {
                    $this->Session->setFlash(__('Incorrect Email/Username or Password'));
                    return;
                }
            }
                //write session value for kcfinder
            if ($user['UserGroup']['name']='Admin') {
                $this -> Session -> write("kcfinder", "false");
                $_SESSION['KCFINDER']['disabled']=false; //config from ckfinder
            } else {
                $this -> Session -> write("kcfinder", "true");
                return;
            }   

            // check for inactive account
            if ($user['User']['id'] != 1 and $user['User']['active']==0) {
                $this->Session->setFlash(__('Sorry your account is not active, please contact to Administrator'));
                return;
            }
            // check for verified account
            if ($user['User']['id'] != 1 and $user['User']['email_verified']==0) {
                $this->Session->setFlash(__('Your registration has not been confirmed please verify your email or contact to Administrator'));
                return;
            }
            if(empty($user['User']['salt'])) {
                $hashed = md5($password);
            } else {
                $hashed = $this->UserAuth->makePassword($password, $user['User']['salt']);
            }

            if ($user['User']['password'] === $hashed) {
                if(empty($user['User']['salt'])) {
                    $salt=$this->UserAuth->makeSalt();
                    $user['User']['salt']=$salt;
                    $user['User']['password']=$this->UserAuth->makePassword($password, $salt);
                    $this->User->save($user,false);
                }
                $this->UserAuth->login($user);
                $remember = (!empty($this->data['User']['remember']));
                if ($remember) {
                    $this->UserAuth->persist('2 weeks');
                }
                $OriginAfterLogin=$this->Session->read('Usermgmt.OriginAfterLogin');
                $this->Session->delete('Usermgmt.OriginAfterLogin');
                $redirect = (!empty($OriginAfterLogin)) ? $OriginAfterLogin : LOGIN_REDIRECT_URL;
                $this->redirect($redirect);
            } else {
                $this->Session->setFlash(__('Incorrect Email/Username or Password'));
                return;
            }

        }

    }
} 
```

附加点：

1) 此代码来自用户管理插件： http: [//usermgmt.ektasoftwares.com](http://usermgmt.ektasoftwares.com)

2）我添加的部分是：

```
 //write session value for kcfinder
        if ($user['UserGroup']['name']='Admin') {
            $this -> Session -> write("kcfinder", "false");
            $_SESSION['KCFINDER']['disabled']=false; //config from ckfinder
        } else {
            $this -> Session -> write("kcfinder", "true");
            return;
        } 
```

添加我的会话部分的结果是两个最上面的括号没有正确突出显示（再次使用 sublime text2 中的突出显示插件）

感谢您的评论和输入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T23:31:38.350

## 检查您的比较

这是一项任务 - 不是比较：

```
if ($user['UserGroup']['name']='Admin') { 
```

*即在此之后将*值`$user['UserGroup']['name']`设置为true，并且代码将始终进入此if 块。这大概就是本意：

 *```
if ($user['UserGroup']['name'] === 'Admin') { 
```

使用一致的空格更容易发现这样的错误（问题中的代码非常多样化）。您也可以使用这种样式来避免它们：

```
if ('Admin' === $user['UserGroup']['name']) { 
```

哪个“有效”，因为如果你犯了同样的错误，你会得到一个解析错误而不是一个赋值：

```
if ('Admin' = $user['UserGroup']['name']) { 
```

## 一些奖励评论

### 这是很多代码

这个登录函数非常大（它引用了更多代码，没有显示）。它可能会简单得多。例如从[书中](http://book.cakephp.org/2.0/en/tutorials-and-examples/blog-auth-example/auth.html)（一定要比较你正在使用的蛋糕版本的书）：

```
public function login() {
    if ($this->request->is('post')) {
        if ($this->Auth->login()) {
            $this->redirect($this->Auth->redirect());
        } else {
            $this->Session->setFlash(__('Invalid username or password, try again'));
        }
    }
} 
```

问题中的代码中还有一些额外的逻辑位 - 但也有大量代码重复 Auth 登录功能的作用。

## 使用 CakePHP

如果您使用的是 CakePHP -*使用*CakePHP。这一行：

```
$_SESSION['KCFINDER']['disabled']=false; //config from ckfinder 
```

相当于：

```
$this->Session->write('KCFINDER.disabled', false); 
```

同样，保持一致使代码更易于阅读，最终更易于维护。*

# asp.net-mvc-3 - 页面出错时向网站管理员发送电子邮件

> ID：14287397
> 
> 赞同：2
> 
> 时间：2013-01-11T22:02:32.630
> 
> 标签：asp.net-mvc-3, error-handling

我已经`<customErrors mode="On"/>`在我的 web.config 中设置了。如果站点上出现错误，用户会收到“用户友好”的错误消息。同时，我想向自己发送一封包含实际错误消息的电子邮件（所以我确切地知道出了什么问题）。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T22:11:23.053

您必须编写代码以在文件的`Application_Error`方法中发送邮件`Global.asax`。

[此处为使用 Application_Error 方法的示例](https://stackoverflow.com/questions/434859/handling-application-error-in-asp-net-apps-global-asax)。

# sql - 按日期范围对时态数据分组 SQL Server

> ID：14287399
> 
> 赞同：0
> 
> 时间：2013-01-11T22:02:41.690
> 
> 标签：sql, sql-server, sql-server-2008, tsql

```
CREATE TABLE [dbo].[rx](
            [pat_id] [int] NOT NULL,
            [fill_Date] [date] NOT NULL,
            [script_End_Date]  AS (dateadd(day,[dayssup],[filldate])),
            [drug_Name] [varchar](50) NULL,
            [days_Sup] [int] NOT NULL,
            [quantity] [float] NOT NULL,
            [drug_Class] [char](3) NOT  NULL,
            CHECK(fill_Date <=script_End_Date
PRIMARY KEY CLUSTERED 
(
            [clmid] ASC
)
CREATE TABLE [dbo].[Calendar](
            [cal_date] [date] NOT NULL,
            [julian_seq] [int] IDENTITY(1,1) NOT NULL,
--unsure if the above line is an acceptable way of adding a 'julianized date number', the data in this database ranges from 1-1-2007 to 12-31-2009
PRIMARY KEY CLUSTERED 
(
            [cal_date] ASC
) 
```

我有我感兴趣的表和具有上述结构的日历表。我试图通过字段 drug_class 找到一个人在给定时间（重叠日期）在一定数量的家庭中服用的不同药物的最大数量。

在社区的帮助下，我在类似的问题上取得了成功，但目前我做的事情不正确，结果非常不准确。如果可能的话，我希望返回的结果集看起来像

```
create table DesiredResults
(pat_id int, min_overlap date, max_overlap date, drug_class char(3),drug_name varchar(50))
insert into Desired_Results(patid, minoverlap, maxoverlap, drug_class,drug_name)
values (1111,'2008-11-28', '2008-12-18','h3a','drug X')
      ,(1111,'2008-11-28','2008-12-18','h3a','drug Y') 
```

这意味着在上述时间范围内，患者 111 被开了药物 x 和药物 y。

我的查询是 -

```
;with Overlaps (pat_id,cal_date,drug_class)
as
(
select
mdo.pat_id
,c1.cal_date
,mdo.drug_class
from
(
--this gives a table of all the scripts a person had within the classes restricted in the where rx.drug_class IN clause and their fill_date and script_end_dates
SELECT DISTINCT
 rx.pat_id
,rx.drug_class
,rx.drug_name
,rx.fill_date
,rx.script_end_date
FROM   rx
WHERE  rx.drug_class IN( 'h3a', 'h6h', 'h4b', 'h2f', 'h2s', 'j7c', 'h2e' )
--
) as mdo,Calendar as c1
where c1.cal_date between mdo.fill_date and mdo.script_end_date
group by mdo.pat_id,c1.cal_date,mdo.drug_class
having count(*) > 1--overlaps
)
,
Groupings(pat_id,cal_date,drug_class,grp_nbr)
as
(
select
o.pat_id
,o.cal_date
,o.drug_class
,c2.julian_seq

--julianized date
-row_number() over(partition by o.pat_id,o.drug_class order by o.cal_date) as grp_nbr
from Overlaps as o,calendar as c2
where c2.cal_date = o.cal_date
)
,x

as
(

--i think this is what's causing the problem

select pat_id,min(cal_date) as min_overlap,max(cal_date) as max_overlap,drug_class
from groupings
group by pat_id,grp_nbr,drug_class

)

select 
 x.pat_id
,x.min_overlap
,x.max_overlap
,y.drug_class
,y.drug_name
from x
inner join
(
select distinct
 rx.pat_id
,rx.drug_name
,rx.drug_class
,rx.fill_date
from rx
) as y on x.pat_id = y.pat_id and x.drug_class=y.drug_class
          and y.fill_date between x.min_overlap and x.max_overlap
order by datediff(day,min_overlap,max_overlap) desc 
```

我正在寻找给定类别中处方最多药物的天数。但是，现在这给了我比任何单一的日期范围都大的日期范围`datediff(day,fill_date,script_end_date)`。

这使得数字被人为地夸大了，因为一些重叠范围长达数年，而它们最多应该是医生编写脚本的天数。如果在同一天开出 'h3a' 类中的五种药物，那么我会将这段时间记为`pat_id`, `fill_date`, `end_date`,`h3a`对该类中的每种药物重复五次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T02:41:02.100

我不确定这是否能解决您的问题。这给出了规定最大数量药物的日期：

```
select c.cal_date
from (select c.cal_date, count(*) as NumDrugs,
             dense_rank() over (order by count(*) desc) as seqnum
      from Calendar c join
           rx
           on c.cal_date between rx.fill_date betwen rx.script_end_date and
              rx in IN( 'h3a', 'h6h', 'h4b', 'h2f', 'h2s', 'j7c', 'h2e' )
      group by c.cal_date
    ) crx
where seqnum = 1 
```

它比您的查询简单得多，所以我想知道我是否遗漏了什么。

如果你需要把它变成句号，那也是可以的，但是SQL比较麻烦。

此外，此 SQL 未经测试，因此可能存在语法错误。

# php - 如何仅搜索未读电子邮件并将其标记为已读

> ID：14287401
> 
> 赞同：0
> 
> 时间：2013-01-11T22:02:45.237
> 
> 标签：php

我收到了包含车辆位置的电子邮件，我想在我的数据库中记录位置。我想出了如何获取电子邮件并找到部分内容。现在我需要弄清楚如何仅搜索尚未阅读的电子邮件的内容，并在完成后将它们标记为已读。

```
$hostname = '{imap.gmail.com:993/imap/ssl}INBOX';
$username = 'myusername';
$password = 'mypassword';

$inbox = imap_open($hostname,$username,$password) or die('Cannot connect to Gmail: ' .     imap_last_error());
$emails = imap_search($inbox,'FROM "onlyoneemail@email.com"');

if($emails) {
  $output = '';
  rsort($emails);
  foreach($emails as $email_number) {
    $overview = imap_fetch_overview($inbox,$email_number,0);
    $message = imap_fetchbody($inbox,$email_number,1);

    if (preg_match('/\bAddress\s*:\s*(.+?)\s*$/mi', $message, $match)){
        echo $match[1] . "<br>";
    }
  }
  echo $output;
} 

imap_close($inbox); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T22:10:14.683

您可以像这样将关键字添加`UNSEEN`到搜索条件中`imap_search()`：

```
$emails = imap_search($inbox, 'FROM "onlyoneemail@email.com" UNSEEN'); 
```

# azure - 如何在共享模式下检测 Azure 网站何时达到其配额？什么时候该扩大规模？

> ID：14287402
> 
> 赞同：1
> 
> 时间：2013-01-11T22:02:48.473
> 
> 标签：azure, azure-web-app-service

假设您发布了一个新的 Azure 网站。您从“共享”模式开始，因为您真的不知道它是否会成功以及是否会有大量流量。

您如何监控您的站点以了解是否存在一些配额开销？您如何知道是否该切换到预留实例？请避免一些不可靠的解决方案，例如来自外部服务的定期检查，这只是抽样。

例如，我想知道我的网站因配额开销而关闭了多少次。Microsoft 对此的官方建议是什么？有没有我可以用来接收和记录此类事件的 API？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T08:46:13.027

有多种方法可以做到这一点。您可以拥有图形界面、命令行界面或只是一个 API，这样您就可以将管理整合到您自己的工具中，或者让第三方公司编写其他工具。

他们之中有一些是 ：

Windows Azure 管理门户

Windows Azure 管理 API

PowerShell 命令

SQL Server 管理工作室 / 数据工具 / Visual Studio

开源工具

[**获取有关Windows Azure 管理和监控工具的**](http://blogs.msdn.com/b/buckwoody/archive/2012/07/03/management-and-monitoring-tools-for-windows-azure.aspx)完整详细信息[](http://blogs.msdn.com/b/buckwoody/archive/2012/07/03/management-and-monitoring-tools-for-windows-azure.aspx)

 ****更新**

通过使用下面提到的链接，您可以查看网站的使用配额

[**如何监控网站**](http://www.windowsazure.com/en-us/manage/services/web-sites/how-to-monitor-websites/)

[**对 Windows Azure 网站的重大改进**](http://weblogs.asp.net/scottgu/archive/2012/09/17/announcing-great-improvements-to-windows-azure-web-sites.aspx)

我希望这对你有帮助。**

# class - 如何使用类

> ID：14287405
> 
> 赞同：0
> 
> 时间：2013-01-11T22:03:11.893
> 
> 标签：class, c#-4.0

我有一个应用程序需要为输入源的每一行提取有关各种实体*（供应商、工人等）的一些信息。*我以为这是 a 的定义`class`，但我现在很挣扎。

```
class Vendor
{
    public int ID { get; set; }
    public string Name { get; set; }

    public Vendor(int vendorID)
    {
        using (CPASEntities ctx = new CPASEntities())
        {

            tblVendor v = (from vndr in ctx.tblVendors
                           where vndr.ID == vendorID
                           select vndr).FirstOrDefault();
            if (v == null)
            {
                ID = 0;
                Name = null;
            }
            else
            {
                ID = v.ID;
                Name = v.Vendor_Name;
            }
        }
    } 
```

它在主程序的同一个命名空间中。现在我想实例化该类并将其提供给供应商`ID`，以便我可以使用这两个属性*（黑匣子，有点......）*

所以，我尝试了：

`vendor v= vendor(VendorID);`

然后，我尝试了：

`vendor v = new vendor(VendorID);`

我什至把它变成了一个*静态类*并尝试了上述两种方法。我在想这个是错误的，我敢肯定。

有人可以指出我正确的方向吗？

* * *

代码（早期阶段......）：

```
using CPAS_EM;
using Excel = Microsoft.Office.Interop.Excel;
using SpreadsheetGear;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Xml;
using System.Xml.Linq;

namespace ProcTimesheets
{    
    public static class Vendor

{
    public int ID { get; set; }
    public string Name { get; set; }

    public Vendor(int vendorID)
    {
        using (CPASEntities ctx = new CPASEntities())
        {

            tblVendor v = (from vndr in ctx.tblVendors
                           where vndr.ID == vendorID
                           select vndr).FirstOrDefault();
            if (v == null)
            {
                ID = 0;
                Name = null;
            }
            else
            {
                ID = v.ID;
                Name = v.Vendor_Name;
            }
        }
    }
}
public static class Worker
{....}
static class LaborRate
{....}
class Program
{
    static void Main(string[] args)
    {
        XmlNodeList timesheets = TSList();
        foreach (XmlNode doc in timesheets)
        {
            string link = @"http://moss.mava.xxx.com/" + doc.Attributes["ows_FileRef"].InnerText.Split('#')[1];             // Leaves out the "//" at the beginning
            Timesheet tsheet = new Timesheet(link);
            tsheet.TimesheetID = Convert.ToInt32(doc.Attributes["ows_ID"].InnerText);
            tsheet.WeekStartDate = Convert.ToDateTime(doc.Attributes["ows_WeekStart"].InnerText);
            tsheet.CurrentStatus = doc.Attributes["ows_TimesheetStatus"].InnerText;
            tsheet.ApproverName = doc.Attributes["ows_Approver"].InnerText;
            tsheet.VendorFullName = doc.Attributes["ows_Vendor"].InnerText.Split('#')[1];               // strips some crap at the beginnining
            tsheet.Creator = doc.Attributes["ows_Author"].InnerText.Split('(')[1].Split(')')[0];         // Strips out only the NT user name
            tsheet.CreateDate = doc.Attributes["ows_Created"].InnerText;                                 // Leaves it in string format...never used as a date
            tsheet.Modifier = doc.Attributes["ows_Editor"].InnerText.Split('(')[1].Split(')')[0];       // Strips out only the NT user name
            tsheet.ModDate = doc.Attributes["ows_Modified"].InnerText.Split('(')[1].Split(')')[0];      // Leaves it in string format...never used as a date
            tsheet.OverrideStatus = doc.Attributes["ows_OverrideStatus"].InnerText;
        }
    }
    static XmlNodeList TSList()
    {
        //  This function returns an XML list of all Documents in the library with a status that needs to be audited.
        //  It uses the URL and Library Name found in the project property settings             
       ....
    }
}
public class Timesheet
{
    private enum NotifyType
    {
        General,
        Approver,
        OverrideApprover,
        BadWO
    }

    private Excel.Worksheet xlSH;                               // Local variables
    private Excel.Range xlRange;                                //
    private Excel.Application xlApp;                            //  
    private Excel.Workbooks xlWBS;                              //
    private Excel.Workbook xlWB;                                //

    public int RowCount { get; set; }                           // Row count in the "Used Range" (including the header row)
    public int ColCount { get; set; }                           // Column count in the "UsedRange"
    public int TimesheetID { get; set; }                        // Set from the SP Document Property
    public int VendorID                                         // "Read-only" property derived from the VendorFullName Document Property
    {
        get
        {
            return Convert.ToInt32(VendorFullName.Split('(')[1].Split(')')[0]); // Retrieves the parenthesized Vendor ID
        }
    }

    public DateTime WeekStartDate { get; set; }                 // Set from the SP Document Property
    public DateTime WeekEndDate                                 // "Read-only" property 
    {
        get
        {
            return WeekStartDate.AddDays(6);                    //(always returns WeekStartDate+6)
        }
    }

    public string CurrentStatus { get; set; }                   // Set from the SP Property unchanged
    public string ApproverName { get; set; }                    // Set from the SP Property unchanged
    public string ApproverEmailAddress
    {
        get
        {
            return ApproverName + "@xxx.com";
        }
    }
    public string VendorFullName { get; set; }                  // Set from the SP Property unchanged
    public string link { get; set; }                            // Derived from the SP Property
    public string Creator { get; set; }                         // NT user name of the SP Document creator
    public string CreatorEmailAddress
    {
        get
        {
            return Creator + "@xxx.com";
        }

    }
    public string CreateDate { get; set; }                      // straight from ows_Created -- left as a string
    public string Modifier { get; set; }                        // NT user name of the SP Document ows_Modifier
    public string ModDate { get; set; }                         // straight from ows_Modified -- left as a string
    public string OverrideStatus { get; set; }
    public string VendorShortName
    {
        get
        {
            return VendorFullName.Split('(')[0].Trim();        // Strips off trailing (), and trims it up
        }
    }

    List<string> WorkbookErrors = new List<string>();        

    public bool IsValid
    {
        get                                   // This property is set by "validating" the worksheet
        {
            vendor v = new Vendor(VendorID);
            bool returnvalue = true;
             // Don't forget spreadsheetgear is zero based.....
            for (int row = 0; row < RowCount; row++)
            {

            }
            return returnvalue;
        }
    }                                // "Read-only" property
    private void NotifyWorkbookError(List<string> MsgLst)
    {  ....  }
    private void Notify(NotifyType nType, List<string> MsgLst)
    {....}
    private string GetHTML(int MessageID)
    {....}
    public Timesheet(string wbPath)
    {
        link = wbPath;
        bool validDocument = OpenWorkbook();
        // Vendor curVndr = new Vendor(VendorID);
        //  Test the headings to make sure the workbook is valid
        if (validDocument)
        {

        }
        else
        {

        }

        xlWB.Close();
        xlWBS.Close();
        xlApp.Quit();

        System.Runtime.InteropServices.Marshal.ReleaseComObject(xlRange);
        System.Runtime.InteropServices.Marshal.ReleaseComObject(xlSH);
        System.Runtime.InteropServices.Marshal.ReleaseComObject(xlWB);
        System.Runtime.InteropServices.Marshal.ReleaseComObject(xlWBS);
        System.Runtime.InteropServices.Marshal.ReleaseComObject(xlApp);
        GC.Collect();
        GC.WaitForPendingFinalizers();

    }
    bool OpenWorkbook()
    {
        xlApp = new Excel.Application();
        xlApp.Visible = false;
        xlWBS = xlApp.Workbooks;
        xlWB = xlWBS.Open(link);

        if ((xlWB.ReadOnly == true) || (ValidHeadings(xlRange) == false))
        {
            WorkbookErrors.Add("This workbook is read-only. Someone has it open for writing. No processing can be completed");
            return false;                                           // Read-only Workbooks or WBs with bad heading row are not auditable
        }
        xlSH = xlWB.Worksheets[Properties.Settings.Default.Timesheet_WorkSheetName];
        xlRange = xlSH.UsedRange;
        RowCount = xlRange.Rows.Count;
        ColCount = xlRange.Columns.Count;
        return true;
    }
    bool ValidHeadings(Excel.Range range, int headingrow = 1)
    {....}
    static bool ValidRow(Excel.Range row, int vendorID)
    {
        bool returnvalue = false;

        return returnvalue;
    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T22:15:24.103

我怀疑您的类不是真的在同一个命名空间中，或者它在另一个项目中，并且您的主项目没有对该项目的引用。

如果 Vendor 类确实与程序的主入口点在同一个命名空间中，那么您所要做的只是：

```
Vendor v = new Vendor(VendorID); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T22:39:45.777

C# 区分大小写。如果您的班级是`Vendor`（大写 V），那么您可以创建一个对象

```
int id = ...; // your vendor Id goes here
Vendor v = new Vendor(id); 
```

# jquery - 滚动固定全屏 DIV 执行动画幻灯片，如 Bagigia.com 上所示

> ID：14287412
> 
> 赞同：1
> 
> 时间：2013-01-11T22:04:02.683
> 
> 标签：jquery, scroll, parallax

是否有某种插件或框架可以用来复制[http://bagigia.com](http://bagigia.com)上的功能？我知道我可以 WGET 整个源代码，但需要一些非常自定义的东西，并且对在 Bagigia 上找到的几个 JS 文件进行逆向工程似乎是个坏主意。或者是吗？这是我最好的选择吗？

# entity-framework - 复制记录并保持关系完好

> ID：14287414
> 
> 赞同：0
> 
> 时间：2013-01-11T22:04:30.303
> 
> 标签：entity-framework

我发现难以复制记录和保持当前关系的完整性。我什至不确定我需要做什么可以完成。

我的数据库非常大，但我会将示例限制为 3 个表。下面是代表这些表的类。

```
public class FiscalYear
{
    public FiscalYear()
    {
        this.Divisions = new HashSet<Division>();
    }

    public int FiscalYearId { get; set; };

    ...other members....

    public virtual ICollection<Division> Divisions { get; set; }
    ...more Navigation properties...
}

public class Division
{
    public Division()
    {
        this.Majors = new HashSet<Major>();
    }

    public int DivisionId { get; set; };
    public int FiscalYearId { get; set; }

    ...other members....

    public virtual ICollection<Major> Majors { get; set; }
    public virtual FiscalYear FiscalYear { get; set; }
    ...more Navigation properties...
}

public class Major
{
    public Major()
    {
        this.Courses = new HashSet<Course>();
    }

    public int MajorId { get; set; };
    public int FiscalYearId { get; set; }

    ...other members....

    public virtual ICollection<Course> Courses { get; set; }
    public virtual FiscalYear FiscalYear { get; set; }
    ...more Navigation properties...
} 
```

该数据库的一些表与一个财政年度相关联。我想要做的是将记录从一个财政年度复制到下一个财政年度。因此，例如，如果我定义了 2012 财年和 2012 年定义的部门（例如 IT），我希望能够创建一个新的财年（比如 2013 年）并将所有关系从 2012 年复制到 2013 年. 但问题出在层次结构的层次上。每个部门都有许多专业，但这些专业也与财政年度相关。因此，我还需要为 2013 财年的专业创建新记录，并将这些新记录与新的 2013 部门相关联，但与 2012 部门具有相同的关系。依此类推。

可以做这样的事情吗？如果这令人困惑，我深表歉意——我也是。

# jquery - 我无法让 .effect 在我的 jQuery 函数中工作

> ID：14287415
> 
> 赞同：0
> 
> 时间：2013-01-11T22:04:34.570
> 
> 标签：jquery, effects

嗨，我目前正在做一个项目，需要我使用 jQuery 对页面上的产品进行排序和过滤。我的脚本可以根据用户选择完美地显示和隐藏结果，但是我希望转换之间的动画以不同的方式运行。我已经使用淡出和淡入设置了它们。但是想利用 jQuery 的 .effects 特性。我不确定我哪里出错了，或者我什至可以使用它。请参阅下面的代码。这是我使用淡入淡出的完整脚本。

```
 $(document).ready(function() {
$('ul#filter a').click(function() {
    $(this).css('outline','none');
    $('ul#filter .current').removeClass('current');
    $(this).parent().addClass('current');

    var filterVal = $(this).text().toLowerCase().replace(' ','-');

    if(filterVal == 'all') {
        $('ul#selection li.hidden').fadeIn('slow').removeClass('hidden');
    } else {

        $('ul#selection li').each(function() {
            if(!$(this).hasClass(filterVal)) {
                $(this).fadeOut('slow').addClass('hidden');
            } else {
                $(this).fadeIn('slow').removeClass('hidden');
            }
        });
    }

    return false;
}); 
```

});

下面是我尝试使用折叠效果。

```
 $('ul#selection li').each(function() {
        if(!$(this).hasClass(filterVal)) {
            $(this).effect('fold','slow').addClass('hidden');
        } else {
            $(this).fadeIn('slow').removeClass('hidden');
        }
    });
} 
```

有人可以指出我哪里出错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T22:15:05.547

1.  确保包含 jQuery UI
2.  试试这个：`$(this).effect('fold','slow', function(e) { $(this).addClass('hidden'); })`

如果您只是`.addClass()`直接在 之后链接`.effect()`，它将立即发生，而不是在效果完成时发生。因此，如果你的`.hidden`类实际上用 CSS 隐藏了一些东西，它们似乎会在你注意到折叠效果之前立即消失。所以`.addClass()`应该是一个回调来`.effect()`代替。

# java - 一个类的所有依赖项都是由同一个类加载器加载的吗？

> ID：14287417
> 
> 赞同：6
> 
> 时间：2013-01-11T22:04:54.960
> 
> 标签：java, class, tomcat, web-applications, classloader

*   在我的`/tomcat/lib`目录中，我有课`SharedClass`（因此与所有网络应用程序共享）。
*   在我的网络应用程序中，`WEB-INF/lib`我有 class `LocalClass`。
*   `SharedClass`有参考`LocalClass`。

在我的网络应用程序中，我尝试创建一个实例，`SharedClass`但它失败并显示以下消息：

> NoClassDefFoundError：本地类。

由于`SharedClass`是共享的并且`LocalClass`是我的网络应用程序的本地应用程序，我希望它可以工作，但它没有。

我的怀疑是`SharedClass`由Tomcat父类加载器`LocalClass`加载并由Web App类加载器加载。由于`SharedClass`是由父级加载的，我假设它的所有依赖项也必须由父级加载。因此，父级找不到`LocalClass`并抛出错误。

这有意义吗？有没有办法解决这个问题（不写我自己的类加载器）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-11T22:13:00.430

类加载器是分层的。类加载器有一个父级，并且可以看到其父级的类。反过来是不正确的。因此，由 webapp 的类加载器加载的类可以访问由通用 Tomcat 类加载器（其父类）加载的类，后者可以访问 JRE 类（Tomcat 类加载器的父类）。

有关更多详细信息，请参阅[Tomcat 文档](http://tomcat.apache.org/tomcat-7.0-doc/class-loader-howto.html)和[ClassLoader javadoc](http://docs.oracle.com/javase/6/docs/api/java/lang/ClassLoader.html)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-11T22:13:08.737

这确实是有道理的，这也是 Tomcat 能够隔离应用程序的方式。更多信息可以在这里找到：http: [//tomcat.apache.org/tomcat-6.0-doc/class-loader-howto.html](http://tomcat.apache.org/tomcat-6.0-doc/class-loader-howto.html)

共享类加载应用程序类或创建应用程序类实例的正当理由很少。对于需要执行此操作的极少数情况，您可以调用`Thread.getCurrentThread().getContextClassloader()`.

* * *

编辑：我觉得我正在将浸过 LOX 的煤球交给想要开始篝火的人，所以这里是为什么*从共享类加载器加载应用程序类是一个坏主意*的原因。

直接的问题是您实际上并未将类加载到共享类加载器中，因此您无法轻松地操作您创建的对象。相反，您需要使用反射来调用方法，这会使您的代码变得一团糟。

但更糟糕的问题是，如果您的`SharedClass`实例维护对 的实例的引用`LocalClass`，这些引用将阻止 Tomcat 取消部署应用程序。实际上，它会声称取消部署，但在这些引用被收集之前，仍然会有旧应用程序的碎片存在于 permgen 中，这通常会导致 permgen 耗尽。

因此，虽然上下文类加载器是一个有用的工具——并且应该是您访问类路径资源的*唯一*方式——但它是一个很容易导致事情崩溃的工具。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-22T16:08:28.077

在普通的 Java 应用程序中，当要求类加载器加载一个类时，它首先将请求委托给它的父类加载器，然后在父类加载器找不到请求的类时加载它。

对于 Web 应用程序服务器，这略有不同。对于部署在像 tomcat 这样的 Web 应用程序服务器中的每个 Web 应用程序，通常有不同的类加载器。对于 Tomcat，它如下所示 -

![在此处输入图像描述](../Images/8d2c3778dbf7ebc92ea6ff1167a7763a.png)

因此，对于 Web 应用程序类加载资源按以下顺序发生 -

1.  JVM 的引导类（核心 java 类）
2.  /WEB-INF/Web 应用程序的类
3.  /WEB-INF/lib/*.jar 您的 Web 应用程序
4.  系统类加载器类（Tomcat / Classpath 特定类）
5.  通用类加载器类（所有 Web 应用程序通用的类）

但请注意，如果配置了 Web 应用程序类加载器，`delegate="true"`则顺序会更改 -

1.  JVM 的引导类（核心 java 类）
2.  系统类加载器类（Tomcat / Classpath 特定类）
3.  通用类加载器类（所有 Web 应用程序通用的类）
4.  /WEB-INF/Web 应用程序的类
5.  /WEB-INF/lib/*.jar 您的 Web 应用程序

有关更多详细信息，您可以查看 Apache Tomcat 的[Class Loader HOW-TO](http://tomcat.apache.org/tomcat-7.0-doc/class-loader-howto.html)页面。

# spring - 找不到 PropertyPlaceholderConfigurer 文件

> ID：14287422
> 
> 赞同：2
> 
> 时间：2013-01-11T22:05:51.847
> 
> 标签：spring, jboss7.x, war

我正在尝试将 PropertyPlaceholderConfigurer 与外部属性文件一起使用，该文件不是 WAR 文件的一部分。

我将bean配置如下：

```
<property name="location" value="${jboss.server.data.dir}/my-dir/common.properties"/> 
```

部署 WAR 文件时，我收到一条错误消息：

.....无法加载属性；嵌套异常是 java.io.FileNotFoundException: 无法打开 ServletContext 资源 [/C:/dir/jboss-as-7.1.1.Test/standalone/data/my-dir/common.properties]

有什么办法可以将属性文件放在 WAR 文件之外？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T22:08:25.520

是的，您可以，但使用值 classpath:common.properties。只要确保它在某个地方的类路径中。

```
<property name="location" value="classpath:common.properties"/> 
```

如果文件不在类路径中，您也可以使用文件：来使其正常工作。

```
<property name="location" value="file:${jboss.server.data.dir}/my-dir/common.properties"/> 
```

# android - ActionBar 中 MenuItem 的默认全息蓝色背景是什么？

> ID：14287423
> 
> 赞同：1
> 
> 时间：2013-01-11T22:05:53.230
> 
> 标签：android, android-actionbar, click

为了我的应用程序的需要，我需要在 ActionBar 中的自定义视图（因为这个视图应该很容易通过代码修改）

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

    <item
        android:id="@+id/menu_custom"
        android:actionLayout="@layout/menu_layout"
        android:showAsAction="always"/>

</menu> 
```

这不是很困难;-)

现在的问题是我的视图不再对点击做出视觉反应。我知道我可以使用带有按下/选择/.. 状态的自定义背景，但我想使用默认的 ACtionBar 背景，所以我确信我不会在某些设备上破坏任何东西。

我已经开始查看 ActionBarSherlock 和 Android 源代码，但我不知道具体在哪里查看。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-07-17T13:26:37.280

您可以直接`android:background="?android:attr/actionBarItemBackground"`用于您的 actionLayout 的根项。这将引用当前应用主题中的资源值。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-11T22:16:54.760

这些是来自 ActionBarSherlock 的操作项背景选择器：

```
/res/drawable/abs__item_background_holo_dark.xml
/res/drawable/abs__item_background_holo_light.xml 
```

以及 SDK 中的相应文件：

```
<sdk>/platforms/android-<version>/data/res/drawable/item_background_holo_dark.xml
<sdk>/platforms/android-<version>/data/res/drawable/item_background_holo_light.xml 
```

# c# - Gridview不刷新

> ID：14287424
> 
> 赞同：1
> 
> 时间：2013-01-11T22:05:54.173
> 
> 标签：c#, asp.net, gridview

所以我有一个员工列表的网格视图。用户可以选择员工并对员工执行各种任务，包括删除此列表中的员工。在用户完成选择该员工后，我尝试更新网格视图。它只是空白。我希望它能提供更新的员工名单。这很奇怪，因为当页面加载时，gridview 是正确的。

我已经包含了我的 Page_Load 和将用户发送回 gridview 的方法之一。

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (EmployeeWrapper.GetSessionWrapper() == null)
        {
            ddlArea.Visible = true;
            lblArea.Text = ddlArea.Text;
        }
        else lblArea.Text = EmployeeWrapper.GetSessionWrapper().Name;
        string test = "SELECT [EmployeeName], [BeginTime], [Task_Name] FROM [ActiveTaskView]  WHERE ([Area] = '" + lblArea.Text + "')";
        SqlDataSource1.SelectCommand = test;
    }

    protected void cmdCancel_Click(object sender, EventArgs e)
    {
        lblName.Enabled = false;
        lblName.Text = "";
        lblNewTask.Visible = false;
        lblSta.Visible = false;
        ddlNewTask.Visible = false;
        txtStartTime.Visible = false;
        cmdStart.Visible = false;
        cmdCancel.Visible = false;
        string test = "SELECT [EmployeeName], [BeginTime], [Task_Name] FROM [ActiveTaskView]  WHERE ([Area] = '" + ddlArea.Text + "')";
        SqlDataSource1.SelectCommand = test;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T22:11:31.910

在您想做的任何操作之后。称呼`gridView.DataBind();`

# sql - 使用 Access 和 SharePoint 列表创建报表

> ID：14287427
> 
> 赞同：0
> 
> 时间：2013-01-11T22:06:07.653
> 
> 标签：sql, sharepoint, ms-access

将 SharePoint 列表链接到 Microsoft Access。我在 SharePoint 列表中的一列是“个人或组”，它是一个包含来自 SharePoint 用户的多个属性的查找。这些属性包括 ID、姓名、电子邮件地址。我将电子邮件地址属性用于 SharePoint 中的工作流。现在我想从 SharePoint 列表中创建一个报告，打印出分配给每个记录/行的所有名称。它不会打印出名称，而是返回 ID 号。如何获取访问报告以返回从共享点列表链接的名称？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T20:55:35.660

每当您链接到 SharePoint 网站时，如果您仔细观察，您总是会看到一个名为 UserInfo 的表（列表）。

那么，用用户名代替 ID 呢？

首先设置一个指向这个 userInfo 表的链接。

因此，在外部数据（导入和链接）的功能区上，选择链接到 SharePoint 列表。选择您的站点，然后在表列表中，选择 UserInfo 之一：

例如：

![在此处输入图像描述](../Images/8d28a0d588ecab1bdfd6815c387b0bc6.png)

因此将设置到 UserInfo 列表/表的链接。

然后，只需从用户的 ID 列构建查询（左连接）。

查询将如下所示：

![在此处输入图像描述](../Images/469396654b177e4cabf723942e3e8965.png)

构建一个在 UserInfo 中留下联接的查询。

但是，请注意，如果您查看表格，您不会看到额外的列，但您会在查询生成器中看到。请注意，SharePoint 编辑器已添加到每个表中。所以请注意每个表的这些字段：

![在此处输入图像描述](../Images/23851705c664d71735515989fc511eaa.png)

因此，您甚至可能不需要使用连接到 UserInfo 表的查询，因为如上所示，在 Access ALL 表中，SharePoint 编辑器会自动添加到每个链接表中。

但是，根据您所拥有的“id”链接到 UserInfo 表应该允许您在 id 中显示“名称”。

# android - Android Activity 不断恢复保存的实例状态

> ID：14287428
> 
> 赞同：1
> 
> 时间：2013-01-11T22:06:08.737
> 
> 标签：android, android-intent, android-activity, android-notifications

所以这个应用程序包含一个 2 活动。第一个要求用户提供有关发出通知的规范。在按钮上单击活动会创建通知。此活动的代码如下：

```
package com.dewey.notifymanager;

import java.util.Random;

import android.os.Bundle;
import android.app.Activity;
import android.app.Notification;
import android.app.NotificationManager;
import android.app.PendingIntent;
import android.content.Context;
import android.content.Intent;
import android.support.v4.app.NotificationCompat;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        final Button button = (Button) findViewById(R.id.button1);
        final TextView texty = (TextView) findViewById(R.id.textView2);
        final EditText input = (EditText) findViewById(R.id.editText1);
        final EditText input2 = (EditText) findViewById(R.id.editText2);
        button.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {

                String notificationmessage = input.getText().toString();
                String notificationdetails = input2.getText().toString();
                texty.setText("Notification Created");
                displayNotification(notificationmessage, notificationdetails);
            }
        });
    }
    @Override
    protected void onStart() {

    super.onStart();

    }
    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    public void displayNotification(String msg,String details)
    {

         NotificationManager manager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);
         Notification notification = new Notification(R.drawable.ic_launcher, msg, System.currentTimeMillis());

        Random generator = new Random();
        int i = 90686958 - generator.nextInt(92938);

        Intent intent = new Intent(this, ResultActivity.class);
        intent.putExtra("details", details);
        intent.putExtra("msg", msg);
        intent.putExtra("id", i);
        PendingIntent pendingIntent = PendingIntent.getActivity(this, 0, intent, 0);
        notification.setLatestEventInfo(this, msg, details, pendingIntent);
        notification.flags = notification.FLAG_ONGOING_EVENT;
        manager.notify(i, notification);

    }

} 
```

单击通知时，将启动一个新的 Activity，并在 Intent 中传递一些数据，包括通知 ID。然后第二个活动显示通知包含的数据，它还有一个按钮。当用户单击此按钮时，通知将被删除。第二个活动的代码如下：

```
package com.dewey.notifymanager;

import android.os.Bundle;
import android.app.Activity;
import android.app.NotificationManager;
import android.content.Context;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;

public class ResultActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(null);
        setContentView(R.layout.activity_result);

        String details = getIntent().getExtras().getString("details");
        String msg = getIntent().getExtras().getString("msg");
        final int id = getIntent().getExtras().getInt("id");
        TextView title = (TextView)findViewById(R.id.title);
        TextView descrip = (TextView)findViewById(R.id.details);
        title.setText(msg);
        descrip.setText(details);

        Button exitButton = (Button)findViewById(R.id.exitButton);
        exitButton.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                NotificationManager notificationManager = (NotificationManager) 

              getSystemService(Context.NOTIFICATION_SERVICE);
                notificationManager.cancel(id);
            finish();

            }
        });

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_result, menu);
        return true;
    }
} 
```

当我运行该应用程序时，它的工作方式很奇怪。当我创建一个通知然后单击它时，它会启动第二个活动并显示正确的数据，并且完成按钮会将通知从状态栏上删除。但是当我创建第二个通知并单击它时，它会启动第二个活动，但会显示第一个应用程序包含的旧数据。我需要防止这种情况发生。

到目前为止，我认为问题在于我的活动正在恢复已保存实例状态，但我在第二个活动中将其设置为“null”。我的问题到底是什么？

关于恢复 saveInstanceState 的活动甚至是一个问题，还是我的逻辑？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T05:23:21.443

您必须将`FLAG_ACTIVITY_NEW_TASK`标志添加到您的`PendingIntent`创建中，因为从应用程序上下文`Activity`启动的`Notification`来自外部。所以修改你的代码如下：

```
PendingIntent pendingIntent =
    PendingIntent.getActivity(this, 0, intent, Intent.FLAG_ACTIVITY_NEW_TASK); 
```

此外，我注意到您已经在使用支持库，我**强烈**建议您改用 using`Notification.Builder`而不是 using `setLatestEventInfo()`，这是一种已弃用的做法。以下代码`Notification`使用支持库中的构建器 API 创建相同的 .

```
NotificationManager manager =
    (NotificationManager)getSystemService(Context.NOTIFICATION_SERVICE);

Random generator = new Random();
int i = 90686958 - generator.nextInt(92938);

Intent intent = new Intent(this, ResultActivity.class);
intent.putExtra("details", details);
intent.putExtra("msg", msg);
intent.putExtra("id", i);
PendingIntent pendingIntent =
    PendingIntent.getActivity(this, 0, intent, Intent.FLAG_ACTIVITY_NEW_TASK);

NotificationCompat.Builder builder = new NotificationCompat.Builder(this);
builder.setTicker(msg);
builder.setSmallIcon(R.drawable.ic_launcher);

builder.setContentTitle(msg);
builder.setContentText(details);
builder.setContentIntent(pendingIntent);

Notification notification = builder.build();
manager.notify(i, notification); 
```

作为旁注，如果您计划实现任何分层导航，您也可以考虑使用`TaskStackBuilder`支持库中的 来为您构建。`PendingIntent`

**编辑**

根据您关于一次创建多个的第二个问题`Notification`。首先，我不得不说这不一定是一个好的模式；您的应用程序不应该养成使用多个行项污染设备的窗帘的习惯，将它们压缩，您的用户会感谢您。

但是，更重要的是，您无法使其工作的原因是因为使用`PendingIntent`与前一个实例相同的操作、数据、目标等创建的实例将简单地替换第一个而不创建第二个。您可以解决此问题的一种方法是使用您传递给的相同唯一 ID，`NotificationManager`并将其用作请求代码`PendingIntent`，即：

```
PendingIntent pendingIntent =
    PendingIntent.getActivity(this, i, intent, Intent.FLAG_ACTIVITY_NEW_TASK); 
```

这将使`PendingIntent`您创建的每一个都足够独特以传输正确的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T22:36:47.833

您可以尝试在您的第一个活动中处理简历

```
OnResume()
{
super.onresume();
 NotificationManager notificationManager = (NotificationManager) 

              getSystemService(Context.NOTIFICATION_SERVICE);
                notificationManager.cancel(id);
} 
```

并且在完成第二个活动后，必须在第一个活动中输入 on resume 方法。

# node.js - 将节点生产部署到 AWS 的当前最佳实践是什么

> ID：14287429
> 
> 赞同：6
> 
> 时间：2013-01-11T22:06:13.263
> 
> 标签：node.js, amazon-web-services

我正在为我们的 Web 应用程序的一小部分评估 nodejs，它似乎很适合。我知道节点很年轻而且发展很快，但它似乎终于进入了“准备生产类别”。然而，谷歌搜索，我看到的关于生产部署的大多数信息都是一年前的，并且仍然警告节点可能有多脆弱并且可能会意外出错，然后是一些重启的解决方案。这本身并没有把我吓跑，但似乎没有关于“正确方式”将节点可靠地放在那里的官方说法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T00:24:20.427

`cluster`似乎是一个不错的选择，尽管取决于您的操作系统，它的负载平衡性能可能很差。一个非常简单的版本是这样的：

```
var cluster = require('cluster')

if(cluster.isMaster) {
  var i, worker, workers;
  for(i = 0;i < numWorkers;i++) {
    worker = cluster.fork();
    workers[worker.process.pid] = worker;
  }
  cluster.on("exit", function(deadWorker) {
    delete workers[deadWorker.process.pid];
    worker = cluster.fork();
    workers[worker.process.pid] = worker;
  });
}
else {
  //be a real server process
} 
```

这是一个不错的选择，因为它既可以通过重新启动死进程为您提供一些稳定性，又可以为您提供多个共享负载的进程。请注意，`cluster`基本上修改了 server.listen 以便工作人员都在监听来自主服务器的事件，主服务器正在监听。这就是“免费”负载平衡的来源。

集群文档可以在这里找到：[http ://nodejs.org/api/cluster.html](http://nodejs.org/api/cluster.html)

如果您希望能够触发某些事件，例如杀死并重新启动所有进程，或者杀死所有进程并关闭，那么让主进程处理几个信号也是值得的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-22T11:39:39.660

我目前正在将 node.js 应用程序投入生产，以实现高度可扩展的社交媒体应用程序。为了创建一个重要的部署解决方案，我目前正在使用 AWS Elastic Beanstalk。可以在此处找到节点 AWS 文档 [http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/create_deploy_nodejs.html]。

我在我的测试环境中尝试过这个，虽然它有效，但它不是一个简单或容易遵循的过程。特别是我在为我的环境使用虚拟私有云的配置方面遇到了一些问题。此外，由于该服务有点新，没有很多免费的信息和故障排除建议 - 当然可以通过从亚马逊购买支持来解决。

Elastic Beanstalk 部署似乎确实为您提供了以下功能：

*   如果您有资格获得免费层级开发环境。
*   用于节点应用程序和节点架构的可扩展 EC2 部署。
*   跨环境（即开发、测试、uat、生产）的一致部署。
*   监测。
*   部署的可重复性和自动化。

# sql - 通过仅获取不同的列来过滤数据

> ID：14287430
> 
> 赞同：0
> 
> 时间：2013-01-11T22:06:17.333
> 
> 标签：sql, sql-server, tsql

我有一个查询

```
SELECT *
FROM tblMyTable 
```

返回这些结果：

```
ID | TypeID | Name
----------------------------------
1DF6EAA0-D0EC-4E4D-9E6B-1779F0E42A82 | 8518A117-F032-61E6-EF15-1917F5B4E795 | AAA
7BB627EC-16CE-40DA-9CC0-A1861277988D | 8518A117-F032-61E6-EF15-1917F5B4E795 | BBB
25B68C46-C03E-4C1F-94BC-7A371B2F1AC3 | DBE7A7EF-5B97-448C-0D2E-5C0C2155A2FA | CCC
AD1A8990-4A57-4F95-BCBD-6112111782B0 | CAE4D031-2C02-2BB8-5D15-FF865A24AD55 | DDD
94C24A30-18EF-471E-8984-6D165EAB566B | A7FE61B5-F4EB-6286-D3A6-72E458D8745C | EEE
D3A7F2E2-DAAF-B991-E41D-105EBB071323 | A7FE61B5-F4EB-6286-D3A6-72E458D8745C | FFF
3EBE7F2F-A05E-FC02-4AE3-27DF6D9A524E | A7FE61B5-F4EB-6286-D3A6-72E458D8745C | GGG 
```

我想过滤结果，以便只有不同的 TypeId，以便返回的结果是：

```
ID | TypeID | Name
----------------------------------
1DF6EAA0-D0EC-4E4D-9E6B-1779F0E42A82 | 8518A117-F032-61E6-EF15-1917F5B4E795 | AAA
25B68C46-C03E-4C1F-94BC-7A371B2F1AC3 | DBE7A7EF-5B97-448C-0D2E-5C0C2155A2FA | CCC
AD1A8990-4A57-4F95-BCBD-6112111782B0 | CAE4D031-2C02-2BB8-5D15-FF865A24AD55 | DDD
94C24A30-18EF-471E-8984-6D165EAB566B | A7FE61B5-F4EB-6286-D3A6-72E458D8745C | EEE 
```

我怎样才能改变我的查询来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T22:13:45.870

您可以申请[`row_number()`](http://msdn.microsoft.com/en-us/library/ms186734.aspx)：

```
select id, typeid, name
from
(
  select id, typeid, name,
    row_number() over(partition by typeid order by typeid, name) rn
  from yourtable
) src
where rn =1 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/578f0/6)

# image - 如何将数据变成图片（MATLAB）

> ID：14287431
> 
> 赞同：1
> 
> 时间：2013-01-11T22:06:18.203
> 
> 标签：image, matlab, vectorization

我只是一个新手程序员，我需要一些帮助来解决这个问题。

我目前正在模拟在二维晶格上相互作用和移动的粒子。粒子在任何点的位置数据存储在我在模拟过程中使用的二维数组中。模拟之后，我希望能够直观地看到所有粒子的最终位置。目前，我将数据发送到 MATLAB，并让它在图形上绘制每个粒子。这有效，并创建了我的系统配置的“图片”。但是，对于大晶格中的大量粒子（尺寸为 600 个粒子宽 x 1200 个粒子高），这会使处理图片的速度非常慢，MATLAB 和文字处理处理起来非常慢，而且消耗很多内存和空间。

必须有更好的方法来做到这一点，有人对查看我的系统或控制数据的更好方法有任何想法吗？

我的 matlab 代码如下：

```
%--------------------------------------- Particle Picture
clc; clear all;
particle_file = fopen('ABC_Particles_600X1200T1.txt');
particles = fscanf(particle_file,'%f');
fclose(particle_file);

figure(3);
hold on;
sizex = 600;
sizey = 1200;

for a = 1:1:sizey*sizex
    b = int32(a);
    if particles(a) == 0
        plot(mod(b,sizex)+1,idivide(b,sizex)+1,'c')
    end
    if particles(a) == 1
        plot(mod(b,sizex)+1,idivide(b,sizex)+1,'r')
    end
    if particles(a) == 2
        plot(mod(b,sizex)+1,idivide(b,sizex)+1,'k')
    end
end    
title('Size 600X1200; Time T = 1')
axis([0 sizex 0 sizey]) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T22:43:45.283

您可以使用逻辑条件而不是循环来矢量化您的代码。例如，`z=(particles==0)`是`0`和的向量`1`，你得到`1`粒子元素=0的值。这替换了代码：

```
for a=1:n
     if particles(a) == 0
        z(a)=1
    else
        z(a)=0
    end
end 
```

因此，首先我们将长向量重塑`particles`为矩阵：

```
p=reshape(particles,600,1200); 
```

然后我们可以像以前一样使用逻辑条件，或者类似地，根据您编写的函数`find`来获取 x 和 y 坐标`p`

```
[x0 y0]=find(p==0);
[x1 y1]=find(p==1);
[x2 y2]=find(p==2); 
```

然后我们可以绘制它：

```
plot(x0,y0,'c',x1,y1,'r',x2,y2,'k') 
```

顺便说一句，如果`0,1,2`是您的数据的唯一值，您可以跳过所有这些并使用：

```
imagesc(p) 
```

这将对您的点进行不同的颜色编码，但您可以将[颜色图](http://www.mathworks.com/help/matlab/ref/colormap.html)更改为您想要的任何颜色

# css - 我怎样才能在可点击的内容上使用渐变 css？

> ID：14287432
> 
> 赞同：0
> 
> 时间：2013-01-11T22:06:19.327
> 
> 标签：css

我有一个水平的图像列表，只能在 x 方向滚动。在右侧的末尾有一个 css 渐变，以表明有更多的内容。（滚动条将被删除，可能不明显是可滚动的内容）

我已将光标更改为列表项上的指针，以表明如果单击它们将指向不同的页面。渐变后面的右侧被光标更改阻挡，z-index 无法解决问题。

任何帮助深表感谢！

```
.gradient{
    /*background: -moz-linear-gradient(left center, transparent, white);*/
          /* webkit example */
        background-image: -webkit-gradient(
          linear, right top, left top, from(rgba(255, 255, 255, 1.0)),
          to(rgba(255, 255, 255, 0))
        );

        /* mozilla example - FF3.6+ */
        background-image: -moz-linear-gradient(
          right center,
          rgba(255, 255, 255, 1.0) 20%, rgba(255, 255, 255, 0) 95%
        );

        /* IE 5.5 - 7 */
        filter: progid:DXImageTransform.Microsoft.gradient(
          gradientType=1, startColor=0, endColorStr=#FFFFFF
        );

        /* IE8 uses -ms-filter for whatever reason... */
        -ms-filter: progid:DXImageTransform.Microsoft.gradient(
          gradientType=1, startColor=0, endColoStr=#FFFFFF
        ); 
```

[这里的例子](http://jsfiddle.net/V5uLN/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T22:12:14.723

`pointer-events: none`您可以在渐变 div 上设置 css 属性。这应该解决它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T23:09:49.770

我认为最简单的解决方案可能是 joeltine 建议向渐变添加点击事件，然后确定图像是否低于渐变上的点击点并触发该事件。

另一种解决方案是：

*   在每个列表元素中放置一个绝对定位的渐变（在图像上方）
*   给列表元素溢出：隐藏（因此渐变被剪裁在 li 内）
*   然后根据滚动位置根据列表元素的位置更新列表元素内的所有渐变位置。

这种方法的缺点是渐变位置将使用 js 而不是 css 更新，这意味着它在滚动时可能会滞后一瞬间，并且拥有大量图像可能会影响性能，因为每个图像都有自己的渐变。

只需从您的 html 中删除渐变 div，然后将 li css 更改为：

```
li {
  display:inline-block;
  cursor: pointer;
  overflow: hidden;
  position:relative;
} 
```

并添加以下脚本：

```
function setupGradient($ul) {
  var gradientWidth = 250;

  $ul.find("li").each(function(){
    $("<div/>").addClass("gradient")
               .css("width", gradientWidth)
               .appendTo($(this));
  });

  var setGradient = function(){
    $ul.find("li").each(function() {
      $(this).find("div")
         .css("left", $ul.width() - $(this).position().left - gradientWidth);
    });
  };

  $ul.bind("scroll", setGradient);
  setGradient();
}

setupGradient($("ul")); 
```

这是一个工作演示（仅在 Chrome 中测试）：

[http://jsfiddle.net/yFG5W/](http://jsfiddle.net/yFG5W/)

# php - php，将随机日期转换为一致的格式

> ID：14287438
> 
> 赞同：0
> 
> 时间：2013-01-11T22:06:36.173
> 
> 标签：php, date, datetime

我有一个页面，用户可以在其中上传 .csv 的 url 和日期。格式如下所示：

```
http://www.google, 1/05/2013
http://www.yahoo, 1/04/2013 
```

然后我打开文件，读取文件并将其放入数据库以供其他用途。

我需要我的脚本以某种方式处理不同的日期格式。它可能是正则表达式或拆分字符串等。

到目前为止，我收到的格式是

```
month/day/year
day/month/year
year-day-month 
```

我需要能够将某人给我的任何日期始终转换为相同的日期格式以插入数据库。

目前我有这个功能来检查日期是否为美国格式（月/日/年）。

```
protected function checkDate($handle) {
    $europeanDateFormat = false;

    while (($row = fgetcsv($handle, 1000)) !== false) {
        $dateChunks = explode("/", $row[1]);

        if (isset($dateChunks[0]) && $dateChunks[0] > 12) {
            $europeanDateFormat = true;
            break;
        } else if (isset($dateChunks[1]) && $dateChunks[1] > 12) {
            $europeanDateFormat = false;
            break;
        }
    }
    rewind($handle);

    return $europeanDateFormat;
} 
```

如果它不是美国格式，我会翻转它们，正如你所看到的，当它上传时我无法处理破折号。

```
protected function makeDateAmerican($date) {
    $dateChunks = explode('/', $date);
    $rawDate = $dateChunks[1] . '/' . $dateChunks[0] . '/' . $dateChunks[2];
    return date('Y-m-d', strtotime($rawDate));
} 
```

此外，此脚本需要处理 long 和 sort 格式：

```
month = 1 or 01
day = 1 or 01
year = 13 or 2013 
```

最后，我需要将所有日期转换为 stringtotime 函数的相同格式：

```
date('Y-m-d', strtotime($dateString)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T22:10:47.607

使用`strtotime`which 似乎使用伪智能并解析[各种日期格式](http://php.net/manual/en/datetime.formats.date.php)：

```
echo date("Y-m-d H:i:s", strtotime("5/6/2012")); // May 6, 2012 (slash)
echo date("Y-m-d H:i:s", strtotime("5-6-2012")); // Jun 5, 2012 (dot/tab/dash) 
```

恕我直言，它可能尽可能接近。

# ios - Objective-C 基于时间的观察者模式

> ID：14287440
> 
> 赞同：4
> 
> 时间：2013-01-11T22:06:51.653
> 
> 标签：ios, objective-c

在 Objective-C 中，等待在特定时间执行某事的最佳方式是什么（设置为可以传递给观察者对象以知道等待什么时间的时间戳）。

例如，我想为将来“完成”某件事设置一个时间，比如盖房子，当当前时间是应用程序设置为完成时间的时间时，应用程序将发送通知或发送给另一个对象的消息。

在 Objective-C 中执行此操作的最佳方法是什么？

感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T03:42:39.747

我假设您正在谈论在程序运行期间发生的事情（而不是“公共汽车”是几个月后建造的真实房屋）。

用于此的常规工具是`-[NSTimer initWithFireDate:interval:target:selector:userInfo:repeats:`]。这将让您设置调用方法的特定时间。它只是在 runloop 上安排事件，这非常便宜。`NSTimer`对于时间要求不严格且延迟相当长（超过几秒钟）的事情是理想的。

# javascript - 将字符串的每一次出现都放入 html 标记中

> ID：14287441
> 
> 赞同：0
> 
> 时间：2013-01-11T22:06:55.453
> 
> 标签：javascript, jquery, html

为了将`p`字符串放入`div`我们可以使用 jquery 的 wrap() 函数，如下所示：

```
 $('p').wrap("<div></div>"); 
```

有没有办法将字符串“p”的每次出现都包含在 html 标记中？

```
<html>
    <head>

    </head>
    <body>

        bla bla bla Hello world other words and etc and again Hello world

    </body>
</html> 
```

在这个 html 文档中有两个“Hello world”，我怎样才能把它们放在`p`标签中？

所需的 html 结果必须是：

```
bla bla bla `<p>Hello world</p>` other words and etc and again `<p>Hello world</p>` 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T22:29:41.290

用你的例子..你可以使用正则表达式来做到这一点

```
$('body').html(function(i,v){
  return v.replace(/Hello world/g,'<p>Hello world</p>');
}); 
```

[小提琴](http://jsfiddle.net/UfNx3/)

或使用拆分

```
$('body').html(function(i,v){
  return v.split('Hello world').join('<p>Hello world</p>');
}); 
```

[小提琴](http://jsfiddle.net/N6vPv/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T22:13:03.930

据我了解，您想将 Hello World 放在该段落元素中。有两种方法可以做到这一点。

任何一个

```
$('<p>Hello World</p>').wrap("<div></div>"); 
```

或者

```
$('p').wrap("<div></div>").text('Hello World'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T22:37:53.150

因此，您可以找到所有文本节点，

```
function forEachTextNode(f, node) {
  if (node.nodeType === 3) {
    f(node);
  } else {
    for (var child = node.firstChild, next; child; child = next) {
      next = child.nextSibling;  // Grab next early in case f mutates the DOM.
      forEachTextNode(f, child);
    }
  }
} 
```

然后拆分使用[`Text.splitText`](https://developer.mozilla.org/en-US/docs/DOM/Text.splitText)来打破你想要的单词：

```
function forEachSubstring(f, text, textNode) {
  var i = textNode.nodeValue.indexOf(text);
  if (i >= 0) {
    // Split before the words we want to operate on.
    textNode.splitText(i);
    var substringNode = textNode.nextSibling;
    // Split after the words we want to operate on.
    substringNode.splitText(text.length);
    var rest = substringNode.nextSibling;
    // Operate on the substring.
    f(substringNode);
    // Recurse to look for more occurrences of text.
    forEachSubstring(f, text, rest);
  }
} 
```

然后将它们绑在一起：

```
function wrapInParagraph(node) {
  var wrapper = node.ownerDocument.createElement('p');
  node.parentNode.replaceChild(wrapper, node);
  wrapper.appendChild(node);
}

forEachTextNode(
    function (tn) { forEachSubstring(wrapInParagraph, "Hello, World", tn); },
    document.body); 
```

# verification - 在 systemverilog 中正确使用“禁用分叉”

> ID：14287446
> 
> 赞同：10
> 
> 时间：2013-01-11T22:07:17.773
> 
> 标签：verification, system-verilog

我有类似于以下伪代码的东西：

```
for (lets say 10 iterations)
begin
// Do some configuration changes
    fork
        begin
        ///apply input to design
        end
        begin
        while (1)
        /// at particular point update expected status / values
        end
        begin
        while (1)
        /// read status and verify with expected values
        end
    join_any
end 
```

从代码：只有输入的应用程序才能打破分叉，因为其他2个线程正在工作，而（1）我想在每次迭代之间禁用所有线程，即一旦应用输入流-禁用所有产生的线程，直到下一次迭代开始（新配置）

所以我将上面的代码修改为

```
 ....
 join_any
 disable_fork
 end 
```

然而，这似乎也禁用了 for 循环/或类似的东西，我不明白但效果是测试被挂起。有人可以解释一下原因和解决方案吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-23T13:52:16.610

“disable fork”不仅会杀死由你的 fork...join_any 启动的进程，还会杀死作为执行 disable-fork 的同一进程的后代的任何其他进程。如果您在该进程生命周期的早期启动了任何其他进程（例如，使用 fork...join_none），那么这些其他进程也将被终止。

您可以通过使您的 fork...join_any 及其后来的 disable-fork 在其自己的新子进程中运行来相当容易地防止这种情况发生。这限制了您的 disable-fork 的影响，因此它只能影响您关心的新启动的进程，并保证没有其他不需要的影响。

通过将整个混乱包含在“fork begin...end join”中来做到这一点，如下所示：

```
fork begin // isolate the following code as a single child process
  fork  // launch the processes you wish to manage
    apply_input();
    update_status();
    verify_status();
  join_any // kill off the *_status threads when apply_input terminates
  disable fork;
end join // end of child process isolation 
```

这是 fork...join_any 和 fork...join_none 的一个众所周知的问题。最近在 Verification Guild 论坛上进行了讨论，并在 Sutherland 和 Mills 的书“Verilog 和 SystemVerilog Gotchas”的第 79 和第 80 节中进行了描述。

将“fork begin”和“end join”放在单行上是不寻常的，但我喜欢它作为一种非常明显的方式，即我正在同步分叉一个子进程。通常这将是无用的事情，但在这种情况下，这是必不可少的。

这个习语很常见，也很容易出错，你可能更喜欢将它封装在一对宏中（我不喜欢这个，但是......）：

```
`define BEGIN_FIRST_OF fork begin fork
`define END_FIRST_OF join_any disable fork; end join 
```

现在你可以写...

```
`BEGIN_FIRST_OF
    apply_input();
    update_status();
    verify_status();
`END_FIRST_OF 
```

其中名称“...FIRST_OF”旨在反映与执行相同操作的 Specman (e) 语言结构的相似性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-01-24T16:41:08.667

您应该考虑在 SystemVerilog 中使用*进程*而不是*禁用*

```
process process1;
process process2;
fork
  begin
    process1 = process::self();
    # do something in process 1
  end
  begin
    process2 = process::self();
    # do something in process 2
  end
join_any
#1;
if (process1 != null && process1.status != process::FINISHED)
  process1.kill();
if (process2 != null && process2.status != process::FINISHED)
  process2.kill(); 
```

它应该比禁用更安全。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-12-26T02:56:08.433

禁用叉子应该可以正常工作。这是一个小例子。

```
 module top;

      initial
      begin
          $display(" BEFORE fork  time = %0t ",$time );

          for(int i = 0 ; i < 3 ; i++)
          begin
            fork
              automatic int j = i;
              begin
                  $display(" Action thread started time = %0t  j: %0d",$time,j);
                  #(10*j);
                  $display(" Action thread ended time = %0t  j: %0d",$time,j);
              end

              begin
                 $display(" Entered timeout_15 = %0t j: %0d",$time,j);
                 #15;
                 $display(" Ended timeout_15 = %0t j: %0d",$time,j);
              end
            join_any

            disable fork; // it kills all processes
            $display("---------------------------------------------------");
        end

       #100; // This is to make sure if there any threads ..

       $display(" time = %0d Outside the main fork ",$time );
       $display(" time = %0d  After wait fork ",$time );
      end
    endmodule 
```

输出：：

```
BEFORE fork  time = 0
 Action thread started time = 0  j: 0
 Entered timeout_15 = 0 j: 0
 Action thread ended time = 0  j: 0
---------------------------------------------------
 Action thread started time = 0  j: 1
 Entered timeout_15 = 0 j: 1
 Action thread ended time = 10  j: 1
---------------------------------------------------
 Action thread started time = 10  j: 2
 Entered timeout_15 = 10 j: 2
 Ended timeout_15 = 25 j: 2
---------------------------------------------------
 time = 125 Outside the main fork
 time = 125  After wait fork 
```

# c# - C# .Net 2.0 线程池等效于 .Net 4.5 TPL 生产者消费者逻辑

> ID：14287447
> 
> 赞同：1
> 
> 时间：2013-01-11T22:07:18.207
> 
> 标签：c#, multithreading, task-parallel-library, threadpool, consumer

在我的应用程序中，我有一组要执行的操作。我想指定特定数量的线程来执行操作。由于某些操作可能比其他操作花费更长的时间并且可能正在等待响应，因此当线程完成时，我希望它返回队列并开始下一个操作。因此，当十个线程之一释放时，它会执行一个新操作，依此类推，直到队列为空，然后继续。在继续之前，我需要等待所有操作完成。

因此，我使用 TPL 进行了一些研究和测试，在记住“哦，废话，我在此应用程序中仅限于 .Net 2.0”之前效果很好。我试图仅使用 .Net 2.0 进行重建，但没有运气。我几乎没有使用线程的经验。

谁能帮我把这个逻辑转换成.Net 2.0？

```
List<int> results = new List<int>();
var stopwatch = Stopwatch.StartNew();

Random random = new Random();
using (BlockingCollection<Action> queue = new BlockingCollection<Action>())
{
    for (int i = 0; i < 20; i++)
    {
        int index = i;
        queue.Add(delegate
                      {

                          int foo = random.Next(1, 1500);
                          Thread.Sleep(foo);
                          results.Add(foo);
                          Debug.WriteLine(index + " Working: " + foo + " " + Task.CurrentId);
                      });
    }
    queue.CompleteAdding();

    const int numWorkers = 10;
    Task[] tasks = new Task[numWorkers];
    for (int i = 0; i < numWorkers; i++)
    {
        tasks[i] = Task.Factory.StartNew(() =>
                                             {
                                                 foreach (Action action in queue.GetConsumingEnumerable())
                                                 {
                                                     action();
                                                 }
                                             }, CancellationToken.None, TaskCreationOptions.LongRunning, TaskScheduler.Default);
    }
    Task.WaitAll(tasks);
}
Debug.WriteLine("WaitAll took {0} seconds", stopwatch.Elapsed.TotalSeconds); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T22:15:03.467

我将概述我之前是如何做到这一点的：

1.  创建 N 个线程
2.  将工作项放入已知大小的列表中
3.  有一个共享变量`int lastIndex = -1;`
4.  让所有线程都这样做：

    ```
    while(true) {
        var index = Interlocked.Increment(ref lastIndex);
        if (index >= list.Count) return;
        ProcessItem(list[index]);
    } 
    ```

很简单。

将所有这些抽象为一个辅助方法。它应该接受一个委托，这样您就不需要硬编码`ProcessItem`.

在需要保证线程池不提供的精确并行度的情况下，即使对于 .NET 4.5，此帮助器实际上也很有用。

# c# - 更改选项卡图标时 TabControl 闪烁

> ID：14287452
> 
> 赞同：6
> 
> 时间：2013-01-11T22:07:35.407
> 
> 标签：c#, .net, vb.net, winforms

快要在这里失去理智了。我已经在谷歌上搜索了一个小时，试图解决这个轻微但令人难以置信的严重问题。

我的`TabControl`表格上有两个标签。每个选项卡都有一个 16x16 的图标和一些文本。这里没有什么疯狂的事情。

在某些情况下，我需要让其中一个选项卡图标闪烁。所以我创建了两个图像，![light_on.png](../Images/7bbbc1d4271ea628367cf348e83ad95a.png)并将![light_off.png](../Images/eec6db8677feb7d1dedc6ae007c6792c.png)它们添加`ImageList`到`TabControl`. 我设置了一个背景计时器，它在两个图像之间切换以模拟闪烁的图标。工作正常。

但是，它会导致所有选项卡标题重新绘制，从而使它们闪烁。

`TabControl`无论您尝试做什么，都不支持双缓冲。

我发现人们使用以下代码成功地驯服了闪烁：

```
 Protected Overrides ReadOnly Property CreateParams() As CreateParams 
        Get
            Dim cp As CreateParams = MyBase.CreateParams
            cp.ExStyle = cp.ExStyle Or &H2000000
            Return cp
        End Get
    End Property 
```

这很有效，因为它不会闪烁......但图标也不会在视觉上发生变化，除非鼠标光标悬停在导致重绘的东西上。

有没有人有任何可能有效的替代解决方案或技巧？这实际上是该软件的一个非常重要的功能。

骨架代码：

```
Public Class Form1
    Dim BlinkTimer As Windows.Forms.Timer
    Dim BlinkToggler As Boolean = False

    Private Sub Form1_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
        InitBlinker()
    End Sub

    Private Sub InitBlinker()
        BlinkTimer = New Windows.Forms.Timer
        AddHandler BlinkTimer.Tick, AddressOf Blinker_Tick
        With BlinkTimer
            .Enabled = True
            .Interval = 250
        End With
        StartBlinker()
    End Sub
    Public Sub StartBlinker()
        SomeTabPage.ImageKey = "light_off.png"
        BlinkToggler = False
        BlinkTimer.Start()
    End Sub
    Public Sub StopBlinker()
        SomeTabPage.ImageKey = "light_off.png"
        BlinkToggler = False
        BlinkTimer.Stop()
    End Sub
    Private Sub Blinker_Tick()
        If BlinkToggler Then
            SomeTabPage.ImageKey = "light_on.png"
        Else
            SomeTabPage.ImageKey = "light_off.png"
        End If
        BlinkToggler = Not BlinkToggler
    End Sub

End Class 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T08:17:59.157

这是手动绘制图像的快速技巧（有几件事需要调整，但这是一个开始）。

```
Imports System.Threading

Public Class MyTabControl
    Inherits TabControl

    Private tabsImages As New Concurrent.ConcurrentDictionary(Of TabPage, List(Of String))
    Private tabsImagesKeys As New Concurrent.ConcurrentDictionary(Of TabPage, String)

    Private cycleImagesThread As Thread

    Private mInterval As Integer = 500

    Public Sub New()
        Me.SetStyle(ControlStyles.OptimizedDoubleBuffer, True)

        Me.DrawMode = TabDrawMode.OwnerDrawFixed

        cycleImagesThread = New Thread(AddressOf CycleImagesLoop)
        cycleImagesThread.Start()
    End Sub

    Protected Overrides Sub OnHandleCreated(e As EventArgs)
        If Me.FindForm IsNot Nothing Then AddHandler CType(Me.FindForm, Form).FormClosing, Sub() cycleImagesThread.Abort()
        MyBase.OnHandleCreated(e)
    End Sub

    Private Sub CycleImagesLoop()
        Do
            Thread.Sleep(mInterval)

            If tabsImagesKeys.Count > 0 Then
                For Each tabImageKey In tabsImagesKeys
                    Dim index = tabsImages(tabImageKey.Key).IndexOf(tabImageKey.Value)
                    index += 1
                    index = index Mod tabsImages(tabImageKey.Key).Count
                    tabsImagesKeys(tabImageKey.Key) = tabsImages(tabImageKey.Key)(index)
                Next

                Me.Invalidate()
            End If
        Loop
    End Sub

    Public Property Interval As Integer
        Get
            Return mInterval
        End Get
        Set(value As Integer)
            mInterval = value
        End Set
    End Property

    Public Sub SetImages(tabPage As TabPage, images As List(Of String))
        If tabsImages.ContainsKey(tabPage) Then
            tabsImages(tabPage) = images
        Else
            tabsImages.TryAdd(tabPage, images)
        End If
        tabsImagesKeys(tabPage) = images.First()
    End Sub

    Protected Overrides Sub OnDrawItem(e As DrawItemEventArgs)
        Dim g As Graphics = e.Graphics
        Dim r As Rectangle = e.Bounds
        Dim tab As TabPage = Me.TabPages(e.Index)
        Dim tabImage As Image

        Using b = New SolidBrush(IIf(e.State = DrawItemState.Selected, Color.White, Color.FromKnownColor(KnownColor.Control)))
            g.FillRectangle(b, r)
        End Using

        If tabsImagesKeys.Count > 0 OrElse Me.ImageList IsNot Nothing Then
            If tabsImagesKeys.ContainsKey(tab) Then
                tabImage = Me.ImageList.Images(tabsImagesKeys(tab))
                g.DrawImageUnscaled(tabImage, r.X + 4, r.Y + (r.Height - tabImage.Height) / 2)
            End If
            r.X += Me.ImageList.ImageSize.Width + 4
        End If

        Using b = New SolidBrush(tab.ForeColor)
            Dim textSize = g.MeasureString(tab.Text, tab.Font)
            g.DrawString(tab.Text, tab.Font, b, r.X, r.Y + (r.Height - textSize.Height) / 2)
        End Using

        MyBase.OnDrawItem(e)
    End Sub
End Class 
```

请按照以下步骤设置控件：

1.  首先，为 分配一个`ImageList`控件`MyTabControl`并用图像填充它。
2.  接下来，调用`SetImages`方法来定义应在每个选项卡上显示哪些图像。

    MyTabControl1.SetImages(TabPage1, New List(Of String) From {"icon.gif", "icon2.gif"}) MyTabControl1.SetImages(TabPage2, New List(Of String) From {"myImage1.gif", "myImage2\. gif"})

请注意，该`SetImages`方法的第二个参数是应该存在于`ImageList`. 控制将完成其余的工作......

# html - 在 IE 中的标签之间换行

> ID：14287453
> 
> 赞同：1
> 
> 时间：2013-01-11T22:07:38.283
> 
> 标签：html, internet-explorer, label

我在 IE 上遇到了一个有趣的问题。我有一个很大的页面，其中部分代码是这样的：

```
<html>
<head>
</head>
<body>
<table width="100%" border="0" cellSpacing="0" cellPadding="0">
<tr>
<TD style="PADDING-RIGHT: 2px" >Label:
</TD>
<TD  >
    <LABEL style="WHITE-SPACE: nowrap">
    <INPUT  type="radio" name="inputs" /> 
    input 1 
    </LABEL>

    <LABEL style="WHITE-SPACE: nowrap">
    <INPUT type="radio" name="inputs" /> 
    input 2 blah bblah </LABEL>
</TD>
</tr>
</table>
</body>
</html> 
```

然后，当我更改页面的宽度时，我希望单选按钮+标签在第二行中中断。这适用于所有浏览器，并且在 IE 中使用我作为示例使用的代码。事情是一样的，除了页面中的其他内容，在我的示例中，它在表格周围有另一个表格。但是，它不会破裂。两个单选按钮+标签始终保持在同一行。但是，当我`&nbsp;`在第一个标签的末尾和第二个标签的开头之间放置时，它会中断，但会在第二行的开头添加一个空格。我不想复制整个页面，但我想知道是否有人会对如何解决这个问题有一个绝妙的主意..

谢谢阅读！

更新：我注意到如果我`style="WHITE-SPACE: nowrap"`从第一个标签中删除，第二个单选按钮+标签将中断到下一行。但如果“输入 1”文本太大（我想避免这种情况），它可能会中断。所以我不确定如何防止这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T22:40:43.973

`LABEL`默认情况下，元素是内联的。将`LABEL {display: block; }`规则添加到您的 CSS。或者，如果您想防止在单独/对内断线，同时能够在需要时在对之间断线，请使用`display: inline-block`而不是。在 IE 6/7（如果需要）中，可以使用.`display: block``input``label``display: inline; zoom: 1;`

顺便说一句，您的代码非常老派，并且会从转换为更多语义/结构标记中受益。例如：

```
<dl>
    <dt><label for="example">Example label</label></dt>
    <dd><input type="text" name="example" id="example" /></dd>

    <dt><label for="foobar">Foobar</label></dt>
    <dd><input type="text" name="foobar" id="foobar" /></dd>
</dl> 
```

# git - 连接github报错

> ID：14287457
> 
> 赞同：0
> 
> 时间：2013-01-11T22:08:03.120
> 
> 标签：git, github

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-11T22:25:04.140

您无法通过 ssh 连接 github。SSH 密钥被配置为使用 git 协议来接收和发送存储库中的更改。

在 github (https://github.com/new) 中创建一个新存储库并按照站点说明进行操作。

# c# - 编译查询没有隐式引用转换为 ObjectContext

> ID：14287458
> 
> 赞同：9
> 
> 时间：2013-01-11T22:08:07.770
> 
> 标签：c#, asp.net, objectcontext, compiled-query

我正在创建一个委托来检索数据库中的所有专辑记录。我在另一个项目中使用了同样的方法，但由于某种原因，这次我遇到了错误。

我错过了一步吗？我不确定为什么会出现此错误。

**代码**

```
 public static readonly Func<CodySolutionEntities, IQueryable<Album>> SelectAlbums =
        CompiledQuery.Compile<CodySolutionEntities, IQueryable<Album>>(
            query => from q in query.Albums.Include("Photo")
                     select q); 
```

**错误**

错误 1 ​​类型 'CodyData.Diagram.CodySolutionEntities' 不能用作类型`parameter 'TArg0' in the generic type or method 'System.Data.Objects.CompiledQuery.Compile<TArg0,TResult>(System.Linq.Expressions.Expression<System.Func<TArg0,TResult>>)'. There is no implicit reference conversion from 'CodyData.Diagram.CodySolutionEntities' to 'System.Data.Objects.ObjectContext'. C:\Users\Cody\Documents\CMBS\CodySolution\CodyData\Delegates\PhotoDelegates.cs 13 13 CodyData`

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-12T05:53:25.383

错误消息表明`CodySolutionEntities`不是从 派生的`ObjectContext`，这是一个问题，因为`CompiledQuery`仅适用于`ObjectContext`。在这种情况下`CodySolutionEntities`，必须从一个`DbContext`对象派生，此时[推荐使用的上下文对象](http://msdn.microsoft.com/en-us/data/jj613116.aspx)。

这`CompiledQuery`可能在过去有效，因为 4.1 之前的实体框架版本创建了一个派生自的对象，`ObjectContext`而不是`DbContext`让您管理您的实体。

就像[这篇](http://www.devproconnections.com/article/entity-framework/entity-framework-5-143875)文章解释的那样，如果您能够以 .NET 4.5 为目标，则可以使用 EF 5，您将不再需要它`CompiledQuery`，因为它会自动为您缓存已编译的 LINQ to Entity 查询。如果不是，您可能想要考虑切换回使用`ObjectContext`.，但在此之前，请确保您的思维方式不是简单地[编译或破坏](http://www.codinghorror.com/blog/2010/03/compiled-or-bust.html)。

# php - 如何使用 Modx 革命 API

> ID：14287463
> 
> 赞同：3
> 
> 时间：2013-01-11T22:08:32.310
> 
> 标签：php, api, modx, modx-revolution

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T08:14:51.927

您找到的足以使用 API modx 的文档。连接模式 API 后（[http://rtfm.modx.com/display/revolution20/Loading+MODx+Externally](http://rtfm.modx.com/display/revolution20/Loading+MODx+Externally) - 我最喜欢的第三个示例）您可以使用 modx 处理器做任何必要的事情，例如验证用户：

```
if(isset($_POST) && count($_POST)){
    $c = array(
        'username' => $_POST['username'],
        'password' => $_POST['password']
    );
    $response = $modx->runProcessor('security/login',$c);
    if($response->response['success'] == 1){
        $user['id'] = $modx->user->get('id');
                $profile = $modx->user->getOne('Profile');
        $user['fullname'] = $profile->get('fullname');
        $user['email'] = $profile->get('email');
        echo json_encode($user);
    }else{
        echo json_encode($response->response); 
    }
} 
```

简单获取资源：

```
if ($res = $modx->getObject('modResource', 1)) {
    print_r($res->toArray());
} 
```

或高级获取：

```
$response = $modx->runProcessor('resource/get', array('id' => 1));
if (!$response->isError()) {
    print_r($response->response['object']);
}
else {
    $modx->log(modX::LOG_LEVEL_ERROR, $response->getMessage());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-26T18:44:35.767

ModX 文档多年来一直不是它的强项，但这里有几个链接。

首先，了解[ModX 的工作原理和架构](http://rtfm.modx.com/revolution/2.x/developing-in-modx)，以便您可以使用/为它进行开发。

ModX 的 API 参考位于[http://api.modx.com](http://api.modx.com)。在那里，您将找到所有可用的方法、其属性和参数。它不是指南，而是参考，所以不要期望太多的文献。

从 2.3 版开始，您可以[在 ModX 之上构建自己的 API](http://rtfm.modx.com/revolution/2.x/developing-in-modx/advanced-development/developing-rest-servers)。对于自定义 RESTful 端点非常有用，但除非您有一些工作/构建 API 的经验，否则这可能具有挑战性。

最后，如果您正在寻找更深入的文档[，请查看书籍](http://modx.com/learn/modx-books/other-modx-books/)。

例如，您可以通过以下方式使 ModX 对象从外部可用：

```
<?php
require_once '/absolute/path/to/modx/config.core.php';
require_once MODX_CORE_PATH.'model/modx/modx.class.php';
$modx = new modX();
$modx->initialize('web');
$modx->getService('error', 'error.modError'); 
```

# html - 字体未加载

> ID：14287465
> 
> 赞同：1
> 
> 时间：2013-01-11T22:08:33.090
> 
> 标签：html, css, font-face

我在我的网站上使用了一些服装字体，但我遇到了一个没有加载的问题，我无法弄清楚问题，这是代码：

```
@font-face { 
    font-family: OuachitaWayWbw; 
    src: url('fonts/Ouachita Way Wbw.ttf') format("truetype") ; 
    font-family: 'ChromeYellowNF'; 
    src: url('fonts/Chrome Yellow NF.ttf');
}

#name { 
    font-size:26px; 
    font-family: 'OuachitaWayWbw'; 
    padding-top:30px; 
    color:#000000; 
    margin-bottom:20px; 
} 
```

`ChromeYellowNF`作品的。我也试图把每一个都放在不同的地方，`Font-face`但没有奏效。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-11T22:45:08.117

对于每种字体，您必须有一个 @font-face 声明：

```
@font-face { 
  font-family: OuachitaWayWbw; 
  src: url('fonts/Ouachita Way Wbw.ttf') format("truetype") ; 
}
@font-face { 
  font-family: ChromeYellowNF; 
  src: url('fonts/Chrome Yellow NF.ttf');
} 
```

不需要单引号。

如果您想为 IE9 使用自定义字体，您还需要提供“.eot”字体文件。[http://www.w3schools.com/cssref/css3_pr_font-face_rule.asp](http://www.w3schools.com/cssref/css3_pr_font-face_rule.asp)

编辑：好的，不同的浏览器有不同的字体实现方式：

```
@font-face {
   font-family: OuachitaWayWbw; 
   src: url('fonts/Ouachita Way Wbw.ttf') format("truetype"),
        url('fonts/Ouachita Way Wbw.woff') format("woff");
   src: url('fonts/Ouachita Way Wbw.eot');
} 
```

您可能还需要将以下类型添加到 .htaccess/IIS：

```
AddType application/vnd.ms-fontobject .eot
AddType font/ttf .ttf
AddType font/otf .otf
AddType application/x-font-woff .woff 
```

取自此处：[Chrome 中 MIME 类型错误的字体](https://stackoverflow.com/questions/4051826/font-face-problem-in-chrome)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T22:17:18.097

对此不确定，但看起来您的字体系列名称可能应该用引号引起来。您也可以尝试将每种字体放在自己的 @font-face 声明中。那应该可以解决您的问题。我认为它采用了@font-face 声明中指定的最后一个字体系列。

```
@font-face { 
  font-family: 'OuachitaWayWbw'; 
  src: url('fonts/Ouachita Way Wbw.ttf') format("truetype") ; 
}
@font-face { 
  font-family: 'ChromeYellowNF'; 
  src: url('fonts/Chrome Yellow NF.ttf');
}

#name {
    font-size:26px; 
    font-family: 'OuachitaWayWbw'; 
    padding-top:30px; 
    color:#000000; 
    margin-bottom:20px; 
} 
```

# emacs - 从“MacPython”过渡到 MacPorts python3 对 EIN 和 Scipy 来说是个好主意吗？

> ID：14287466
> 
> 赞同：0
> 
> 时间：2013-01-11T22:08:35.667
> 
> 标签：emacs, python-3.x, scipy, macports, ipython-notebook

我开始使用 python.org [Python dmg](http://www.python.org/ftp/python/3.3.0/python-3.3.0-macosx10.6.dmg)在 OS X 10.6 (Snow Leopard) 上学习 Python 。我想[我在 SO 上看到过这个叫做“MacPython”的东西](https://stackoverflow.com/questions/1213690/what-is-the-most-compatible-way-to-install-python-modules-on-a-mac/7220022#7220022)，但我也认为[这个 MacPython](http://homepages.cwi.nl/~jack/macpython/index.html)（目前谷歌的“MacPython”最热门）是不同的，对吧？

虽然我觉得我的 python.org Python 3.3.0 安装最初对我来说运行良好（使用`distribute`、`easy_install`和`pip`，我安装了几个新包，包括`IPython`），但我想开始使用[Emacs IPython Notebook (EIN)](http://tkf.github.com/emacs-ipython-notebook/)和[Scipy](http://scipy.github.com/install.html)，我很清楚，这种安排需要[CheeseShop](http://pypi.python.org/pypi)提供很多额外的东西。另外，很长一段时间以来，我一直非常高兴地将[MacPorts](http://www.macports.org/)用于 GNU Emacs 和其他 unix（非 Python）包，所以我认为移动我所有的 Python 工作可能是一个好主意（我很专注关于学习 py3) 远离我现在使用 python.org 安装并进入 MacPorts Python 的内容。

这是一个好主意吗？IOW，我是否可能会为自己花费大量额外的时间/工作/头痛（就像@davidavr 在[这里](https://stackoverflow.com/questions/189912/what-package-manager-do-you-prefer-for-mac-os-x)写的头痛，“MacPorts 会下拉并安装完整的 Python 2.4 发行版以及库。”）获得很少的收益，或者使用 MacPorts 之类的包管理器来处理我的 Python 内容是否会像我怀疑的那样节省大量时间？

我在这里阅读了许多其他线程（[大多数相当旧](https://stackoverflow.com/questions/1213690/what-is-the-most-compatible-way-to-install-python-modules-on-a-mac/7220022#7220022)），它们部分相关，但不觉得最近有什么能真正解决我的问题，而且我遇到了很多旧的建议，很明显新的建议有冲突，所以我'我在问什么可能被认为是重复的，但如果是，我不禁想到几年的过去可能已经改变了对旧的类似问题的一些答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T15:39:44.470

在尝试了 MacPorts 和 pip3 很多天后，最终无法获得一个功能强大的 IPython notebook/qtconsole 与 matplotlib 和 numpy 和 sympy 以及所有这些美妙的东西，我放弃并改用自制软件，它最终对我有用，但我有从源代码定期安装几个较大的软件包。尽管 homebrew 会安装这些包，但它似乎只针对 Python 2.7 而不是针对 Python3；我在 homebrew 中尝试了几个选项来解决这个问题，但最终放弃了，只是从源代码安装了那些像 Qt 这样困难的包。

所以我想我的经验是带有 pip3 的 MacPorts 对于我的特定目标来说不是一个好主意，而带有 pip3 的自制软件更好，但对于带有 Python3 的 Scipy 包来说仍然不完整。（虽然也许如果我尝试从源代码安装以补充 MacPorts，就像我使用自制软件那样，那么 MacPorts 也足够了。）

回顾经验，我认为对于新用户如何从头开始并构建这些功能，我认为非常需要更详细和全面的文档，因为我尝试了许多不同的策略，最终只能通过反复试验和大量来自网络各地的不同点点滴滴的建议，我终于得到了一些。我仍然没有 EIN，但我认为这将需要严格来自 emacs 世界的工具才能实现。EIN 文档强烈鼓励使用名为 el-get（或 MELPA）的 emacs 包管理器，我发现两者都有问题，所以到目前为止我所拥有的只是使用浏览器的 IPython notebook，它仍然很棒。

**编辑**

哦，另一件非常重要的事情：我停止尝试使用 Python 3.3.0 并移回 Python 3.2.3，因为[numpy 1.6.2 不支持 Python 3.3.0，尽管这显然已在 numpy 1.7.x 中得到修复，目前没有发布 numpy 1.6.3 的计划](http://projects.scipy.org/numpy/ticket/2221)。

# iphone - Objective-c：addObjectsFromArray 是否复制对象？

> ID：14287470
> 
> 赞同：0
> 
> 时间：2013-01-11T22:08:59.050
> 
> 标签：iphone, objective-c, xcode, pointers

很难弄清楚这个...

addObjectsFromArray 是 NSArray 内部的一种便捷方法，它会复制所有内容，还是将“otherArray”参数保留在内存中的位置，并使用 LinkedList 样式将尾部指向“otherArray”类型的移动？

我问是因为我有指向某些现有数组中的重要对象的指针，但这些指针可能指向传入数组上的不同对象。

我将重要对象指针重新指向传入数组中的某个对象，然后使用传入数组在现有数组上调用 addObjectsFromArray。

我担心的是，如果传入数组实际被复制，当 ARC 决定取消传入数组时，我重新指向的重要对象指针将指向任何内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T22:18:25.510

我觉得你想多了。你不会有一个“指向” NSArray 的指针。您将有一个指向对象的指针，并且 NSArray 也将有一个指向该对象的指针。重新分配指针不会改变 NSArray 中的指针。

至于复制，NSArray 不复制对象。但如上所述，它确实将指针复制到对象，而不是持有指向指针的指针或类似的奇怪东西。所以在这段代码中：

```
NSMutableString *a = [NSMutableString stringWithString:@"Cool"];
NSMutableString *b = a;
NSMutableArray *array = [NSMutableArray array];
[array addObject:a];
NSMutableString *c = [array objectAtIndex:0];
[b appendString:@" beans"];
a = nil; 
```

在运行结束时：

*   `b`并且`c`将持有相同的 NSMutableString - “Cool beans” - 并且变异其中一个会出现在另一个中

*   `b`该数组包含与“Cool beans”相同的 NSMutableString，`c`并且访问那里的字符串也会显示字符串的突变

*   `a`将为零。当我们重置它时，这不会影响指向字符串的任何其他指针，因为它们指向的是字符串，而不是变量。

当 you 时`addObjectsFromArray:`，就好像您遍历数组并单独添加每个数组一样。那个时候另一个数组可能会消失，这并不重要，因为你的 NSArray 现在有指向所有对象的指针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T22:17:02.617

我认为这`addObjectsFromArray`就像`addObject`：将指向对象的指针添加到数组中；对象本身没有被修改，除了它的保留计数会增加。

# ruby-on-rails-3 - rmagick 2.13.1 - 与 imagemagick 6.8.1-9 不兼容

> ID：14287472
> 
> 赞同：1
> 
> 时间：2013-01-11T22:09:04.277
> 
> 标签：ruby-on-rails-3, bundler, rmagick

我正在使用 rails 3.2.9 我现在已经安装了 ImageMagick 6.8.1-9 和 rmagick 2.13.1 gem。

一旦我启动服务器，它就会返回此错误：

```
D:/Ruby/lib/ruby/gems/1.9.1/gems/rmagick-2.13.1/lib/RMagick.rb:11:in `require': This installation of RMagick was configured with ImageMagick 6.5.6 but ImageMagick 6.8.1-9 is in use. (RuntimeError). 
```

真的是因为版本比 rmagick 预期的要新吗？有机会下载所需的 ImageMagick 版本吗？

谢谢你。彼得

# sql - 返回了重复的（ish）行。如何消除？

> ID：14287477
> 
> 赞同：1
> 
> 时间：2013-01-11T22:09:17.173
> 
> 标签：sql, sqlite

我不精通 SQL 或 SQLITE。

我正在运行一个简单的选择和加入语句。我基本上是从 sqlite3 数据库中提取联系人并手动转储到 csv 中。

我遇到的问题是，我在一张表中有姓名和 ID，在另一张表中有电话号码和标签。其中，label 表示“Mobile”、“Work”等。

因此，我将名称的 ID = 加入电话号码的所有者 ID。

我发现（这很有意义）是，如果我有一个人的三个电话号码，那个人会出现三次。

IE：

```
John Doe, 123-123-1234, Home, someInc
John Doe, 123-123-4321, Mobile, someInc
John Doe, 123-456-3214, Work, someInc 
```

现在..我如何通过实际的 SQL 语句本身获得更像这样的结果：

```
John Doe, 123-123-1234, Home, someInc
          123-123-4321, Mobile, someInc
          123-456-3214, Work, someInc
Foo Barr, 987-654-3211, Home, anotherInc
[...] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T02:22:21.837

也许你想把桌子弄平：

```
select n.name,
       max(case when p.label = 'home' then p.phonenumber end) as PhoneHome,
       max(case when p.label = 'work' then p.phonenumber end) as PhoneWork,
       max(case when p.label = 'mobile' then p.phonenumber end) as PhoneMobile
from names n join
     phones p
     on n.nameid = p.nameid
group by n.name 
```

这会将每种类型的电话号码放在单独的列中。您需要研究所有不同的标签以获得正确的列。

您也可以将所有电话号码放在一个字段中，例如“home:0001112222,work:33344455555:

```
select n.name,
       group_concat(p.tag||':'||p.phonenumber) as AllNumbers
from names n join
     phones p
     on n.nameid = p.nameid
group by n.name 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T22:42:35.983

有两种选择：

1.  将数据原样复制到 Excel 并应用[此问题](https://stackoverflow.com/questions/5942588/combine-multiple-rows-with-same-value-into-one-plus-more-in-excel)的解决方案。

2.  如果您的`Phones`表上有一些唯一 ID，则使用稍微不同的 SQL 来执行此操作：

    ```
    SELECT 
        CASE t.rank WHEN 1 THEN t.Name ELSE '' END as Name,
        t.Phone,
        t.Work 
    FROM (
        SELECT  t.*, 
            (
                SELECT  COUNT(*)
                FROM    yourTable ti
                WHERE   t.phoneID >= ti.phoneId
            ) AS rank
        FROM  yourTable t
        ORDER BY phoneID
    ) 
    ```

# javascript - 简单的 jQuery 内容滑块

> ID：14287478
> 
> 赞同：2
> 
> 时间：2013-01-11T22:09:20.050
> 
> 标签：javascript, jquery, html

我有一个无序列表，其中包含“x”个列表项。将显示这些列表项，但一次只能看到“n”个数量。然后我想添加下一个和上一个，从而将以前的内容滑出，并将新的“n”个列表项滑入。

但是，我所拥有的功能既可以用作分页器，也可以用作内容滑块。

[jsFiddle](http://jsfiddle.net/5QLM6/8/%5d)

HTML

```
<ul>
  <li><span class="box"></span></li>
  <li><span class="box"></span></li>
  <li><span class="box"></span></li>
  <li><span class="box"></span></li>
  <li><span class="box"></span></li>
  <li><span class="box"></span></li>
  <li><span class="box"></span></li>
  <li><span class="box"></span></li>
  <li><span class="box"></span></li>
</ul>
<a href="" id="prev">Prev</a>
<a href="" id="next">Next</a> 
```

CSS

```
body {
  margin: 5px;
}
ul {
  overflow: hidden;
}
li {
  float: left;
}
.box {
  width: 100px;
  height: 100px;
  background: #33cccc;
  margin: 5px;
  display: block;
} 
```

JS

```
var from = 0, step = 3;

// show show next function
function showNext(list) {
  list
    .find('li').hide().end()
    .find('li:lt(' + (from + step) + '):not(li:lt(' + from + '))')
      .show();
  from += step;
}
// show previous function
function showPrevious(list) {
  from -= step;
  list
    .find('li').hide().end()
    .find('li:lt(' + from + '):not(li:lt(' + (from - step) + '))')
      .show();
}

// show initial set
showNext($('ul'));

// clicking on the 'more' link:
$('#more').click(function(e) {
  e.preventDefault();
  showNext($('ul'));
});

// clicking on the 'prev' link:
$('#prev').click(function(e) {
  e.preventDefault();
  showPrevious($('ul'));
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T00:34:50.100

如果我理解正确，您想从侧面滑动下一个/上一个项目。

您需要制作一个包含所有项目的长块，并在其周围使用固定大小的包装块`overflow:hidden`。然后动画内部块（`position:relative;left:-...px;`）或包装滚动的位置[https://jsfiddle.net/uXn2p/1/](https://jsfiddle.net/uXn2p/1/)

# javascript - Javascript 或 jQuery 滑动到元素

> ID：14287482
> 
> 赞同：0
> 
> 时间：2013-01-11T22:09:35.977
> 
> 标签：javascript, jquery, html, css

当用户单击“联系我”按钮时，我希望屏幕滑动到#contact 元素，但不知道该怎么做。我尝试了各种不同的代码片段并尝试根据我的需要对其进行调整，但似乎没有任何效果。

网站在这里；[http://dombracher.com/](http://dombracher.com/)

只是希望屏幕滑动到上面提到的 div，而不是快速捕捉到它。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T22:27:34.157

```
$(document).ready(function() {
  $("a[href^='#']").anchorAnimate()
});

jQuery.fn.anchorAnimate = function(settings) {

    settings = jQuery.extend({
        speed : 1100
    }, settings);   

    return this.each(function(){
        var caller = this
        $(caller).click(function (event) {  
            event.preventDefault()
            var locationHref = window.location.href
            var elementClick = $(caller).attr("href")

            var destination = $(elementClick).offset().top;
            $("html:not(:animated),body:not(:animated)").animate({ scrollTop: destination}, settings.speed, function() {
                window.location.hash = elementClick
            });
            return false;
        })
    })
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-11T22:29:15.793

您可以自己动画窗口滚动

```
$(".menu2").click(function(){
    $(document.body).animate({
        "scrollTop": $("#contact").offset().top
    }, 2000, "swing"); // animation time and easing
    return false; // preventing default jump
}); 
```

小提琴：http: [//jsfiddle.net/M8JE2/](http://jsfiddle.net/M8JE2/)

或者使用[http://flesler.blogspot.com/2007/10/jquerylocalscroll-10.html](http://flesler.blogspot.com/2007/10/jquerylocalscroll-10.html)之类的 jquery 插件来使任何/所有本地链接与动画一起使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T22:27:00.753

在这里，滚动到页面底部，因为您的联系表格在那里：

```
jQuery(function () {
    jQuery('#nav1 li.menu2').click(function (e) {
        jQuery("html, body").stop().animate({
            scrollTop: jQuery(document).height()
        }, 1000);
        e.preventDefault();
        return false;
    });
}); 
```

# linux - Bash 未终止的字符串/语法错误

> ID：14287483
> 
> 赞同：1
> 
> 时间：2013-01-11T22:09:35.740
> 
> 标签：linux, bash, awk, grep

我试图让以下代码从用户那里读取变量；要搜索的文件、搜索字符串、输出所需的空格和要输出的字段数量。

第一个问题是 AWK 命令。如果我输入一个有效的空格，例如“”（单个空格）或“\t”，我会收到未终止的字符串和语法错误，只有在我请求输出多个字段时才会发生这种错误（否则不会添加空格上）。

其次，使用搜索字符串时，GREP 似乎有点挑剔。为了使用整个字符串，我必须在变量的开头和结尾添加双引号。

```
#!/bin/bash
#****************************************************
#Name:          reportCreator.sh
#Purpose:       Create reports from log files
#Author:        
#Date Written:      11/01/2013
#Last Updated:      11/01/2013
#****************************************************

clear

#Determine what to search for
printf "Please enter input file name(s): "
read inputFile
printf "Please enter your search query: "
read searchQuery
printf "Please enter the whitespace character: "
IFS= read whitespace
printf "Please enter the amount of fields to be displayed: "
read fieldAmount

#Add quotation marks to whitespace and searchQuery
whitespace=\""$whitespace"\"
searchQuery=\""$searchQuery"\"

#Declare variables
declare -i counter=0
declare -a fields[$fieldAmount]
declare -a fieldInsert[$fieldAmount]

#While loop for entering fields
while [[ "$counter" -ne "$fieldAmount" ]]
do
        #Ask for field numbers
        printf "Please enter number for required field $((counter+1)): "
        read fields[$counter]
        ((counter++))
done

#Create function to add '$' before every field and the whitespace characters
function fieldFunction 
{
    for (( counter=0; counter <= ($fieldAmount-1); counter++ ))
    do
        fieldInsert[$fieldAmount]="$""${fields[$counter]}"
        if (( counter!=($fieldAmount-1) ))
        then
            printf "${fieldInsert[*]}$whitespace"
        else
            printf "${fieldInsert[*]}"
        fi  
    done
}
printf "%b\n"

tac $inputFile | grep "$searchQuery" | less #| awk '{print $(fieldFunction)}'

exit 0 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T23:03:28.733

1.  Grep 不理解引号，因此删除将它们添加到 $searchQuery 的行。
2.  对 awk 使用双引号而不是单引号，因此 $(fieldFunction) 会扩展。

解决这个问题（以及取消注释 awk，当然），它可以工作：

```
user@host 15:00 ~ $ cat script
#!/bin/bash
#****************************************************
#Name:          reportCreator.sh
#Purpose:       Create reports from log files
#Author:        
#Date Written:      11/01/2013
#Last Updated:      11/01/2013
#****************************************************

clear

#Determine what to search for
printf "Please enter input file name(s): "
read inputFile
printf "Please enter your search query: "
read searchQuery
printf "Please enter the whitespace character: "
IFS= read whitespace
printf "Please enter the amount of fields to be displayed: "
read fieldAmount

#Add quotation marks to whitespace and searchQuery
whitespace=\""$whitespace"\"

#Declare variables
declare -i counter=0
declare -a fields[$fieldAmount]
declare -a fieldInsert[$fieldAmount]

#While loop for entering fields
while [[ "$counter" -ne "$fieldAmount" ]]
do
        #Ask for field numbers
        printf "Please enter number for required field $((counter+1)): "
        read fields[$counter]
        ((counter++))
done

#Create function to add '$' before every field and the whitespace characters
function fieldFunction
{
    for (( counter=0; counter <= ($fieldAmount-1); counter++ ))
    do
        fieldInsert[$fieldAmount]="$""${fields[$counter]}"
        if (( counter!=($fieldAmount-1) ))
        then
            printf "${fieldInsert[*]}$whitespace"
        else
            printf "${fieldInsert[*]}"
        fi
    done
}
printf "%b\n"

tac $inputFile | grep "$searchQuery" | awk "{print $(fieldFunction)}"

exit 0
user@host 15:01 ~ $ cat file
foo two three four
foo two2 three2 four2
bar two three four
user@host 15:01 ~ $ bash script
Please enter input file name(s): file
Please enter your search query: foo
Please enter the whitespace character:
Please enter the amount of fields to be displayed: 2
Please enter number for required field 1: 4
Please enter number for required field 2: 2

four2   two2
four    two
user@host 15:01 ~ $ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T15:27:28.243

我们来看看这段代码：

```
#Create function to add '$' before every field and the whitespace characters
function fieldFunction
{
    for (( counter=0; counter <= ($fieldAmount-1); counter++ ))
    do
        fieldInsert[$fieldAmount]="$""${fields[$counter]}"
        if (( counter!=($fieldAmount-1) ))
        then
            printf "${fieldInsert[*]}$whitespace"
        else
            printf "${fieldInsert[*]}"
        fi
    done
}
printf "%b\n"

tac $inputFile | grep "$searchQuery" | awk "{print $(fieldFunction)}" 
```

它可以更简单、更健壮地重写为（未经测试）：

```
tac "$inputFile" |
awk -v fieldsStr="${fields[*]}" -v searchQuery="$searchQuery" -v OFS="$whitespace" '
   BEGIN{ numFields = split(fieldsStr,fieldsArr) }
   $0 ~ searchQuery {
      for ( i=1; i <= numFields; i++ )
         printf "%s%s", (i==1?"":OFS), $(fieldsArr[i])
      print "\b"
   }
' 
```

我不知道你为什么需要“tac”来打开文件，但我想你有你的理由，所以我把它留在了里面。

# windows-8 - 让 windows-8 语义缩小以包括空项目

> ID：14287486
> 
> 赞同：0
> 
> 时间：2013-01-11T22:09:59.873
> 
> 标签：windows-8, semantic-zoom

我了解向 ItemTemplate 选择器提供数据模板，但我想要显示的项目不是数据的一部分。例如，假设您在教室中有以下儿童列表：

1.  马克·安德森
2.  萨拉白金汉
3.  戴夫克里斯蒂
4.  珍妮汤普森。

并使用姓氏中的第一个字母来组织数据。如果我将代表学生（名字、姓氏）的数据项传递给 groupedItemList

```
'groupedItemList = itemList.createGrouped(
                function getGroupKey(dataItem) {
                    return dataItem.LastName.toUpperCase().charAt(0);

                },
                function getGroupData(dataItem) {
                    return {
                        Name: dataItem.LastName.toUpperCase().charAt(0)
                    };
                },
                function compareGroups(left, right) {
                    return left.toUpperCase().charCodeAt(0) - right.toUpperCase().charCodeAt(0);
                }
            ),` 
```

语义缩小仅包含以下字母

```
A, B, C, T. 
```

我想要一个字母表中所有字母的列表，然后设置它们的样式，以便那些没有项目的字母得到另一种视觉处理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T13:42:02.630

在花了一些时间尝试找到相同问题的解决方案后，我找到了解决方案并将其发布在 gist 上。

[https://gist.github.com/pimpreneil/4714483](https://gist.github.com/pimpreneil/4714483)

希望它足够清楚。

# ruby-on-rails - 如何从 Rails 记录器中排除操作？

> ID：14287487
> 
> 赞同：3
> 
> 时间：2013-01-11T22:10:00.140
> 
> 标签：ruby-on-rails

我每隔 n 秒就会进行一次 ajax 调用，以检查队列状态并在我的页面上修改小部件的进度条。当然，这会将调用转储到日志中。我想将操作的条目过滤到日志中。这可以用 Logger 完成吗？

例子

```
class QueueCallersController < ApplicationController

   # code to stop logger from logging my_ajax_action?       

   def my_action

     # auto log this

   end

   def my_ajax_action

     #  do not log this

   end

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T19:02:41.207

工作解决方案基于[https://github.com/rails/rails/issues/2639#issuecomment-6591735](https://github.com/rails/rails/issues/2639#issuecomment-6591735)中的代码 ，并通过[Ahmad Sherif](https://stackoverflow.com/users/1856239/ahmad-sherif)的回答通过更新链接找到。

```
# Usage: in develoopment.rb
#
#   config.middleware.insert_before Rails::Rack::Logger, DisableAssetsLogger
#
class DisableAssetsLogger
  def initialize(app)
    @app = app
    Rails.application.assets.logger = Logger.new('/dev/null')
  end

  def call(env)
    previous_level = Rails.logger.level
    Rails.logger.level = Logger::ERROR if env['PATH_INFO'].index("/assets/") == 0
    @app.call(env)
  ensure
    Rails.logger.level = previous_level
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T23:24:19.103

您可以使用此处描述的自定义记录器：

[http://dennisreimann.de/blog/silencing-the-rails-log-on-a-per-action-basis/](http://dennisreimann.de/blog/silencing-the-rails-log-on-a-per-action-basis/)

基本上，您可以根据每个操作将默认记录器替换为自定义记录器，从而使该操作的所有输出静音。您将需要指定要在其他地方静音的路径。与在操作本身中添加静默代码相比，这具有更清洁且侵入性更小的优点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T23:19:25.253

好吧，我确信有很多方法可以解决这个问题，但这里有一个基于这个关于沉默资产日志的[答案的方法。](https://stackoverflow.com/a/7508407/1856239)

```
if Rails.env.development?
  Rails.application.assets.logger = Logger.new('/dev/null')
  Rails::Rack::Logger.class_eval do
    def call_with_quiet_assets(env)
      previous_level = Rails.logger.level
      Rails.logger.level = Logger::ERROR if env['PATH_INFO'] =~ %r{^/queue_callers/my_ajax_action/} # Change the path here
      call_without_quiet_assets(env)
    ensure
      Rails.logger.level = previous_level
    end
    alias_method_chain :call, :quiet_assets
  end
end 
```

将代码添加到`config/initializers`目录中的文件中，然后重新启动服务器。

# c# - 是否可以在单个查询中跟踪外键引用链？

> ID：14287488
> 
> 赞同：3
> 
> 时间：2013-01-11T22:10:08.267
> 
> 标签：c#, linq-to-sql, linqpad

我有一个包含两个（相关）表的数据库：`Actions`并且`Documents`正在使用 LINQ 查询它。

一个动作指向它的输入文档，一个文档指向创建它的动作，所以`Action.Document`和`Document.SourceAction`。

通过追溯这些关系，我们得到了交替动作和文档的处理链。

```
Final Document-> Last Action-> Middle Document-> First Action-> Source Document 
```

当文档没有源操作时，它是原始源文档。

我在 LINQPad 中使用以下查询来收集此类链中的所有操作并输出它们：

```
var actions = new List<LINQPad.User.Action>();
var action = Actions.Where(a => a.Id == 1240).First();
while (action != null) {
    actions.Add(action);
    action = action.Document != null ? action.Document.SourceAction : null;
}
actions.Dump(); 
```

此查询工作正常，但它当然会为每个操作触发 SQL 查询。

有没有办法在单个 LINQ 查询中获取所有这些操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T22:14:18.160

仅当您将所有数据拉入内存时，您才能在单个查询中执行此操作。否则你应该做很多查询。

# java - Ubuntu 中 etc/环境中的 Java 主页

> ID：14287501
> 
> 赞同：3
> 
> 时间：2013-01-11T22:10:53.460
> 
> 标签：java, ubuntu, ubuntu-12.04, ubuntu-server

无法 使用`JAVA_HOME`_`/etc/enviroment``JAVA_HOME="/home/syncsys/bin/jdk1.7.0_10/"`

该命令`echo $JAVA_HOME`给了我`/home/syncsys/bin/jdk1.7.0_10/`，但它不是正确的 Java HOME 还是我需要其他东西？

**我不想要 bashrc 或配置文件（一些问题）**。只有`/etc/enviroment`一种方法可以消除`/etc/enviroment`更新后重新启动的需要。

**我的 /etc/envirment ：**

```
JAVA_HOME="/home/syncsys/bin/jdk1.7.0_10"
PATH=$JAVA_HOME:$PATH
PATH="/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games" 
```

**一些要测试的命令：**

```
syncsys@sync-pc:~$ JAVA_HOME=/home/syncsys/bin/jdk1.7.0_10
syncsys@sync-pc:~$ export JAVA_HOME
syncsys@sync-pc:~$ PATH=$JAVA_HOME:$PATH
syncsys@sync-pc:~$ export PATH
syncsys@sync-pc:~$ java -version
The program 'java' can be found in the following packages:
 * default-jre
 * gcj-4.6-jre-headless
 * gcj-4.7-jre-headless
 * openjdk-7-jre-headless
 * openjdk-6-jre-headless 
```

**更新 ：**

```
$ cat /etc/environment 
JAVA_HOME="/home/syncsys/bin/jdk1.7.0_10"
PATH="$JAVA_HOME/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games"
syncsys@sync-pc:~$ java -version
The program 'java' can be found in the following packages: 
```

**--------（已解决）-------- 现在对我来说可以的工作样本。**

```
 $ cat /etc/environment JAVA_HOME="/home/syncsys/bin/jdk1.7.0_10" PATH="/home/syncsys/bin/jdk1.7.0_10/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin‌​:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games" 
```

我已经为此阅读了很多教程和类似的论坛帖子，但它不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T23:19:03.700

啊哈！我看到了问题...

您的 JAVA_HOME 是正确的（如果路径指向您的 JDK，我希望如此）。问题是你应该改变

```
PATH=$JAVA_HOME:$PATH 
```

进入

```
PATH=$JAVA_HOME/bin:$PATH 
```

因为可执行文件“java”不在您的 JAVA_HOME 中，它位于 JAVA_HOME/bin

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T22:17:15.850

您可以安装一个名为“galternatives”的程序，它可以直观地显示您的 Java 二进制文件的替代符号链接。

当然，您可以在 shell 脚本中单独设置 JAVA_HOME（作为替代），如下所示：

```
JAVA_HOME=/any/location/i/want
export JAVA_HOME
PATH=$JAVA_HOME/bin:$PATH
export PATH 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T22:18:15.750

在你的外壳中尝试：

导出 JAVA_HOME=/etc/环境

如果工作，编辑您的 .bash_profile 文件并为每个会话再次添加此行

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-27T17:11:45.313

我有同样的问题，这是我的解决方案：

```
$] uname -a

Linux ******* x86_64 x86_64 x86_64 GNU/Linux 
```

=> 下载一个 bin :jdk-6u45-linux-x64.bin => 在我的安装位置

```
$]chmod u+x jdk-6u45-linux-x64.bin
$]./jdk-6u45-linux-x64.bin
...
Done

$]cd jdk1.6.0_45/jre/bin
$]./java -version

java version "1.6.0_45"
Java(TM) SE Runtime Environment (build 1.6.0_45-b06)
Java HotSpot(TM) 64-Bit Server VM (build 20.45-b01, mixed mode) 
```

有用..

1/ 检查您的服务器配置 2/ 解压后验证目录的所有者。2/ 使用二进制打包 .bin

问候。

里奇。

# javascript - 简单的数学用乘法添加许多零？

> ID：14287502
> 
> 赞同：0
> 
> 时间：2013-01-11T22:10:58.577
> 
> 标签：javascript, math

编辑：找到答案，不需要进一步的评论/答案，谢谢！

我不知道我的脚本中发生了什么，我知道可能有一个与此非常相似的问题，但这里是：

```
console.log( ( 3 * 0.10 ) ); 
= 0.3000000000004 ( estimated the zeros, but close ) 
```

我试过了`parseInt()`，我试过`.1`了 `0.1`。为什么不给我`0.3`？。

```
console.log( ( 2 * 0.10 ) ); 
= 0.2 
```

有人可以帮我弄这个吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T22:15:15.090

发生这种情况是因为我们无法映射整个实数范围。参见[w:floating point](http://en.wikipedia.org/wiki/Floating_point)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T22:15:25.963

JavaScript 使用二进制浮点数。没有办法将`0.1`or表示`0.3`为有限长度的二进制数，就像不可能写成`1/3`十进制数一样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T22:34:46.080

这就是数字的二进制表示所发生的情况。用二进制表示 0.3 是不可能的，所以当计算机转换数字时，它会尽可能地接近。在这种情况下，不完全是 0.3 。您可以通过格式化输出来解决这个问题 - 使用该`.toFixed()`方法。在您的情况下，如果您只想输出一个有效数字，您会这样做

```
var result
result = 3 * 0.10
console.log( result.toFixed(1) ) 
```

# javascript - 简单的 JSON 数组

> ID：14287503
> 
> 赞同：0
> 
> 时间：2013-01-11T22:11:00.873
> 
> 标签：javascript, arrays

我想创建一个简单的数组`item_structure = {thumb, head, cont}`，这是我的代码：

```
$('.items_options').find('#'+item_id+' .option .blog_item_structure li')
                   .each(function(event) {
    var item_class = $(this).attr('class');
    item_structure[] = item_class;
}); 
```

但似乎表达`item_structure[] = ...`不起作用。那么你们中有人知道什么是 rigt 语法吗？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T22:17:05.583

您可能意味着`push`一个值：

```
item_structure.push(item_class); 
```

这添加`item_class`为 的最后一个元素`item_structure`。

为此，`item_structure`必须是一个数组，最容易这样制作：

```
item_structure = []; 
```

# javascript - jquery ajax 没有在第一次调用时填充下拉列表

> ID：14287505
> 
> 赞同：0
> 
> 时间：2013-01-11T22:11:03.427
> 
> 标签：javascript, json, jquery, bootstrap-typeahead

我有一个输入文本框，每次用户输入数据并填充输入文本时都会触发。我正在使用`bootstrap typehead`. 问题是当我输入一个字母`a`时，它会触发 ajax jquery 调用并获取数据，但没有填充输入文本框。现在，当`aw`输入另一个字母时，针对字母 a 提取的数据会填充到文本区域中。

我在这里托管了代码`http://hakunalabs.appspot.com/chartPage`

好的，这是我的 html 代码的一部分

```
<script type="text/javascript">

    $(document).ready(function () {
        $('#txt').keyup(function () {
            delay(function () {
                CallData();
            }, 1000);
        });
    });

    var delay = (function () {
        var timer = 0;
        return function (callback, ms) {
            clearTimeout(timer);
            timer = setTimeout(callback, ms);
        };
    })();
</script>

<input type="text" id="txt" runat="server" class="span4 typeahead local remote" placeholder="Search..." /> 
```

这是我的javascript代码

```
 var DataProvider;
function CallData() {
    DataProvider = [];
    var vdata = $('#txt').val();
    if (vdata != "") {
        var urlt = "http://examples/search?keyword=" + vdata + "&callback=my_callback";
        $.ajax({
            type: "GET",
            url: urlt,
            jsonpCallback: "my_callback",
            dataType: "jsonp",
            async: false,
            error: function (xhr, errorType, exception) {
                var errorMessage = exception || xhr.statusText;
                alert("Excep:: " + exception + "Status:: " + xhr.statusText);
            }
        });

    }
}

function my_callback(data) {

    var NameArray = new Array();
    var descArray = new Array();

    for (var i = 0; i < data.count; i++) {
        NameArray.push(data.response[i].days_till_close + " Days Left | " + data.response[i].name + " | " + data.response[i].description);
    }

    for (var i = 0; i < data.count; i++) {
        descArray.push(data.response[i].description);
    }

    DataProvider = [];
    for (var i = 0; i < data.count; i++) {
        var dataObject = { id: i + 1, name: NameArray[i], description: descArray[i] };
        DataProvider.push(dataObject);
    }

    var vdata = $('#txt').val();
    var urlp = "http://example.com/v1/members/search?keyword=" + vdata + "&my_callbackMember";
    $.ajax({
        type: "GET",
        url: urlp,
        jsonpCallback: "my_callbackMember",
        dataType: "jsonp",
        error: function (xhr, errorType, exception) {
            var errorMessage = exception || xhr.statusText;
            alert("Excep:: " + exception + "Status:: " + xhr.statusText);
        }
    });

}

function my_callbackMember(data) {
    var memberArray = new Array();

    for (var i = 0; i < data.count; i++) {
        memberArray.push(data.response[i].name);
    }

    for (var i = 0; i < data.count; i++) {
        var dataObject = { id: i + 1, name: memberArray[i] };
        DataProvider.push(dataObject);
    }

    localStorage.setItem("name", JSON.stringify(DataProvider));

    var sources = [
      { name: "local", type: "localStorage", key: "name", display: "country" }
    ];

    $('input.typeahead.local.remote').typeahead({
        sources: [{ name: "", type: "localStorage", key: "name", display: "name"}],
        itemSelected: function (obj) { alert(obj); }
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T22:22:13.663

您的问题是 typeahead 只能向您显示在您按下按键时*已经在本地存储中的结果。*因为您的结果是通过 AJAX 获取的，所以它们只会在您按下该键后一秒钟左右出现在本地存储中。因此，您将始终在 typeahead 结果中看到最后一次成功的 ajax 请求的结果。

阅读引导文档以了解提前输入[http://twitter.github.com/bootstrap/javascript.html#typeahead](http://twitter.github.com/bootstrap/javascript.html#typeahead)并阅读有关“源”的部分。您可以通过传递给异步数据源的源函数的参数来定义“进程”回调。

# objective-c - WebView 本地 CSS

> ID：14287506
> 
> 赞同：1
> 
> 时间：2013-01-11T22:11:07.510
> 
> 标签：objective-c, css, cocoa, webkit

我如何加载网页，例如。google.com，然后**加载覆盖某些样式的本地 CSS 文件？**

第一部分我能做，后一部分我似乎做不到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T13:04:40.327

像往常一样，答案很简单。

```
WebPreferences *webPrefs = [WebPreferences standardPreferences];
[webPrefs setUserStyleSheetEnabled:YES];
//Point to wherever your local/custom css is
[webPrefs setUserStyleSheetLocation:[[NSBundle mainBundle] URLForResource:@"style" withExtension:@"css"]];

//Set your webview's preferences
[myWebView setPreferences:webPrefs]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-07T16:58:47.240

我在这里尝试做同样的事情，除了在我的情况下，我想从我的 OS X 目录中的特定目录加载它。

```
NSFileManager *fileManager = [NSFileManager defaultManager];
WebPreferences *webPrefs = [WebPreferences standardPreferences];
[webPrefs setUserStyleSheetEnabled:YES];
NSString *folder = @"~/Library/Application Support/irccloud/Style/";
folder = [folder stringByExpandingTildeInPath];

if ([fileManager fileExistsAtPath:folder] == NO) {
    [fileManager createDirectoryAtPath:folder withIntermediateDirectories:YES attributes:nil error:NULL];
}
//Point to wherever your local/custom css is
NSURL *fileURL = [NSURL fileURLWithPath:@"/Users/ali/Library/Application Support/irccloud/Style/style.css"];
[webPrefs setUserStyleSheetLocation:fileURL];
//Set your webview's preferences
[webView setPreferences:webPrefs]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-14T08:37:00.790

在斯威夫特：

```
 // Now kick start css
    let ourWebPrefs:WebPreferences = WebPreferences.standardPreferences();
    ourWebPrefs.userStyleSheetEnabled = true;
    ourWebPrefs.userStyleSheetLocation = NSBundle.mainBundle().URLForResource("webview", withExtension: "css");
    customWebView.preferences = ourWebPrefs; 
```

# ios - iOS 上的 Unity3D，在 Obj-C 中检查设备摄像头图像

> ID：14287507
> 
> 赞同：7
> 
> 时间：2013-01-11T22:11:12.770
> 
> 标签：ios, objective-c, camera, unity3d

我有一个 Unity/iOS 应用程序，它可以捕获用户的照片并将其显示在 3D 环境中。现在我想利用`CIFaceFeature`它来查找眼睛位置，这需要访问本机（Objective-C）层。我的流程看起来像：

Unity -> `WebCamTexture`（编码并将图像发送到本机 -**这是 SLOW**）

Obj-C -> `CIFaceFeature`（查找眼睛坐标）

unity -> 显示眼睛位置

我有一个工作原型，但速度很慢，因为我在 Unity (WebCamTexture) 中捕获图像，然后将其发送到 Obj-C 进行 FaceFeature 检测。似乎应该有一种方法可以简单地让我的 Obj-C 类“检查活动相机”。这必须比编码和传递图像快得多。

所以我的问题，简而言之：

*   我可以在 Obj-C 中查询“当前是否有摄像头正在拍摄？”
*   如果是这样，我如何从当前运行的会话中“快照”图像？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-03-22T11:03:42.457

您可以通过统一更改 CameraCapture.mm 来访问相机的预览捕获流。

我建议您查看一些名为 Camera Capture 的现有插件，以了解如何将额外的相机 I/O 功能添加到捕获会话/“捕获管道”中。

让你朝着正确的方向前进。看看 CameraCapture.mm 中的函数 initCapture ：

```
- (bool)initCapture:(AVCaptureDevice*)device width:(int)w height:(int)h fps:(float)fps 
```

在这里，您将能够添加到捕获会话。

然后你应该看看 Apple 在面部识别上提供的代码示例：

[https://developer.apple.com/library/ios/samplecode/SquareCam/Introduction/Intro.html](https://developer.apple.com/library/ios/samplecode/SquareCam/Introduction/Intro.html)

干杯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-19T05:25:30.783

Unity 3D 允许执行本机代码。在脚本参考中，查找本机插件。通过这种方式，您可以显示本机 iOS 视图（使用相机视图，可能根据您的要求隐藏）并运行 Objective C 代码。如果您在 3D 视图中需要，则将眼睛检测结果返回给 Unity。

# php - imap 标头返回的格式化字符串分解为值

> ID：14287516
> 
> 赞同：1
> 
> 时间：2013-01-11T22:11:44.580
> 
> 标签：php, regex

我有一个通过 imap_headers() 返回的字符串，其格式如下：

```
Flags Number) Date Sender Subject (Size) 
```

从数组返回的示例字符串是：

```
A 454)22-Jun-2004 cust.serv@amazon.co.uk Your Amazon.co.uk Order (5284 chars)
1)10-Oct-2010 Gmail Team Get Gmail on your mobile (2457 chars)
5)12-Nov-2010 =?ISO-8859-1?Q?Eric_ For Website (671669 chars)
U 6)17-Nov-2010 no-reply@hostmessage host.net account : boom (2082 chars) 
```

我想解码/解析这个字符串并从这个字符串中创建一个对象。例如

```
Flags
Date
Sender
Subject 
```

我发现使用 php 字符串函数很难解析它，因为这个字符串只是用空格分隔。有人可以帮我吗？发件人部分也可以是名称，因此我们可以将其视为电子邮件添加或网站 url。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T22:30:11.320

正如我在上面的评论中提到的，几乎不可能创建一个适合您的正则表达式，因为您没有提供足够的信息。但是，我会给你一个与你的线路相匹配的例子，也许你可以从那里继续：

```
preg_match('_([A-Z]+) (\d+)\)(\d+-[A-Za-z]+-\d{4}) (\S+@\S+\.\S+) (.+) \((\d+) chars\)_', $header, $matches);
var_dump($matches); 
```

现在，如果您需要扩展此表达式以考虑可能输出的其他变体，则取决于您的应用程序。[您可以在官方文档](http://php.net/manual/de/reference.pcre.pattern.syntax.php)中阅读我在那里所做的所有细节。

# apache-flex - 如何在 Windows 中编译 Wami Recorder

> ID：14287517
> 
> 赞同：1
> 
> 时间：2013-01-11T22:11:51.270
> 
> 标签：apache-flex, compiler-construction, mxml

大家好，我正在尝试使用 flex 编译 wami 记录器，但我收到两个错误 -->![在此处输入图像描述](../Images/2f00c41a1ca2ec0cd1fa33dcd0802e29.png)

[我从这个网址http://code.google.com/p/wami-recorder/source/browse/](http://code.google.com/p/wami-recorder/source/browse/)下载了 src并且没有做任何更改，我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-11T13:40:39.707

我遇到了同样的问题，最后使用这个命令行让它工作：

> mxmlc -compiler.source-path=C:\wami\src -static-link-runtime-shared-libraries=true c:\wami\src\edu\mit\csail\wami\client\Wami.mxml -输出 C: \wami\src\edu\mit\csail\wami\test.swf

希望它对你也有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T22:25:23.640

您将源代码下载到错误的目录中；使 Flex 认为某个类位于错误的位置。由于您没有指定源路径；Flex 可能假设 C:\ 是源代码的根目录。因此，请尝试指定源路径。大概是这样的：

```
mxmlc Wani.mxml -source-path "C:\edu\mit\csail\wami\client" 
```

有关[Flex 编译器选项](http://livedocs.adobe.com/flex/3/html/help.html?content=compilers_01.html)的更多信息。

# stl - D std lib 是否包含诸如 boost.fusion 和 boost.mpl 之类的东西？

> ID：14287519
> 
> 赞同：5
> 
> 时间：2013-01-11T22:12:00.200
> 
> 标签：stl, d, numerical-methods, boost-mpl, boost-fusion

我仍在评估是否应该开始使用 D 来制作物理数字代码的原型。

阻止我的一件事是我喜欢 boost，特别是 fusion 和 mpl。

D 非常适合模板元编程，我认为它可以做 mpl 和 fusion 的东西，但我想确定一下。

即使我将开始使用 d，我也需要一段时间才能达到 mpl 级别。所以我希望有人分享他们的经验。

（通过 mpl 我的意思是将 stl 用于模板，通过融合，我的意思是 stl 用于元组。）

关于性能的注释也很好，因为它在物理模拟中至关重要。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-12T15:55:21.287

在 D 中，在大多数情况下，元编程就是编程。真的不需要像 boost.mpl 这样的库

例如，考虑在 C++ 中在编译时对数字数组进行排序时必须达到的长度。在 D 中，您只需做显而易见的事情：使用`std.algorithm.sort`

```
import std.algorithm;

int[] sorted(int[] xs)
{
    int[] ys = xs.dup;
    sort(ys);
    return ys;
}

pragma(msg, sorted([2, 1, 3])); 
```

`[1, 2, 3]`这在编译时打印出来。注意：`sort`没有内置在语言中，并且绝对没有用于在编译时工作的特殊代码。

这是另一个在编译时为斐波那契数列构建查找表的示例。

```
int[] fibs(int n)
{
    auto fib = recurrence!("a[n-1] + a[n-2]")(1, 1);
    int[] ret = new int[n];
    copy(fib.take(n), ret);
    return ret;
}

immutable int[] fibLUT = fibs(10).assumeUnique(); 
```

在这里，`fibLUT`完全是在编译时构建的，同样不需要任何特殊的编译时代码。

如果你想使用类型，有一些类型元函数在[`std.typetuple`](http://dlang.org/phobos/std_typetuple.html). 例如：

```
static assert(is(Filter!(isUnsigned, int, byte, ubyte, dstring, dchar, uint, ulong) ==
              TypeTuple!(ubyte, uint, ulong))); 
```

我相信，该库包含您可以从 Fusion 获得的大部分功能。但请记住，您确实不需要像在 C++ 中那样在 D 中使用太多模板元编程的东西，因为无论如何大多数语言在编译时都是可用的。

我无法真正评论性能，因为我对两者都没有丰富的经验。但是，我的直觉是 D 的编译时执行速度更快，因为您通常不需要实例化大量模板。当然，C++ 编译器更成熟，所以我在这里可能是错误的。您真正发现的唯一方法是针对您的特定用例进行尝试。

# mysql - 字段中不可见的数据

> ID：14287520
> 
> 赞同：2
> 
> 时间：2013-01-11T22:11:59.690
> 
> 标签：mysql

以下查询没有结果：

```
SELECT * FROM `personal_interest` WHERE LENGTH(`interest`) = 0

SELECT * FROM `personal_interest` WHERE TRIM(`interest`) = ''

SELECT * FROM `personal_interest` WHERE `interest` = '' 
```

但是这个查询

```
SELECT * FROM  `personal_interest` WHERE person = 380298 
```

有这些结果：

![phpMyAdmin 截图](../Images/396fbbea0405250501fde44f973c36e0.png)

// 编辑：

```
SELECT HEX(interest) FROM personal_interest WHERE id = 19496 
```

结果：

![phpMyAdmin 截图 2](../Images/aad341b864cfaab1e4c521a40dff57ed.png)

我的查询没有选择它的字段中可能有什么？我应该使用什么查询？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T22:18:34.380

默认情况下，[`TRIM()`](http://dev.mysql.com/doc/en/string-functions.html#function_trim)仅删除空格。该字段可以包含其他空格（例如制表符或换行符）或其他非打印字符。要查看字段内容的二进制编码，您可以使用：

```
SELECT HEX(interest) FROM personal_interest WHERE id = 19496 
```

从结果中可以看出，您的字段包含`0x0d`，这是一个[回车](http://www.fileformat.info/info/unicode/char/000d/)符。要选择所有空白或仅包含空格字符的记录，您可以使用[正则表达式](http://dev.mysql.com/doc/en/regexp.html)：

```
SELECT * FROM personal_interest WHERE interest RLIKE '^[[:space:]]*$' 
```

# javascript - Phonegap - iOS 文件传输不适用于授权标头

> ID：14287523
> 
> 赞同：1
> 
> 时间：2013-01-11T22:12:22.457
> 
> 标签：javascript, ios, cordova, jquery-mobile

我正在尝试将从相机捕获的图像上传到服务器。下面的方法适用于任何 Android 设备，但由于某种原因，它在 iOS 上失败了。它返回一个 401 错误，这没有意义：

```
var options = new FileUploadOptions();
    options.fileKey="files[]";
    options.fileName = 'image_' + obj.id + '.jpg';
    options.mimeType="image/jpeg";
    options.chunkedMode = false;

    var params = new Object();
    params.headers = {
        Authorization: 'Basic ' + loginCreds
    }

    options.params = params;
    var ft = new FileTransfer();
    ft.upload(imageURI, CONTEXT+'URL/files", 
        function(r){
            alert('Finished upload!');
            $.mobile.loading( 'hide' );  
        }, 
        function(error){
            console.log(error.http_status);
            alert('Error uploading image: ' +error.http_status+ ' and code - ' +error.code); 
            $.mobile.loading( 'hide' );  
        }, 
        options, true); 
```

我知道在 iOS 中设置标题存在问题，但我认为从 Phonegap 1.9.0 开始就已修复。我在这里做错了吗？

我检查了服务器日志，似乎授权标头只是没有在 iOS 中设置。奇怪的...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T21:23:42.697

因此，经过一整天的角力，想出了这个。事实证明，Android 和 iOS 在获取 headers 参数的方式上有所不同。

安卓：

```
var params = new Object();
params.headers = {Authorization: 'Basic ' + loginCreds};
options.params = params; 
```

或者

```
options.headers = {Authorization: 'Basic ' + loginCreds}; 
```

IOS：

```
options.headers = {Authorization: 'Basic ' + loginCreds}; 
```

希望这可以在某个地方节省一些人的头疼...

# visual-c++ - 带有 Visual C++ 的 OpenCV 2.4.3 表达级联分类器图像查询

> ID：14287525
> 
> 赞同：0
> 
> 时间：2013-01-11T22:12:38.427
> 
> 标签：visual-c++, opencv, tracking, object-detection, training-data

我正在学习实现一个手势识别项目。为此，我浏览了几个教程，其中使用了颜色信息、背景减法和各种对象分割技术。

但是，我想使用一种使用级联分类器的方法，但是我对这种方法没有太多了解。我已经阅读了几篇文章和论文，并且理解了它的理论，但是，我仍然不明白什么是训练级联分类器的好图像。在自然彩色图像或通过精明边缘检测或其他方式处理的手势图像上训练它更好吗？

此外，是否有任何方法使用类似于 openTLD 的在线培训和测试方法，但在其中解释了步骤。2.3-2.4.3 的 openCV 文档在机器学习和对象识别和跟踪方面是不完整的，除了以下代码：http: [//docs.opencv.org/doc/tutorials/objdetect/cascade_classifier/cascade_classifier.html](http://docs.opencv.org/doc/tutorials/objdetect/cascade_classifier/cascade_classifier.html)

我知道这是一个很长的问题，但我想彻底解释我的问题。这将帮助我更好地理解这个概念，而不仅仅是使用在线代码。

提前真诚感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T00:52:37.363

如果您考虑 haar 分类器，[这里有一个很好的教程](http://note.sonots.com/SciSoftware/haartraining.html)

# objective-c - 使用 Objective C 解析 SRT 文件

> ID：14287527
> 
> 赞同：5
> 
> 时间：2013-01-11T22:12:45.500
> 
> 标签：objective-c, parsing, nsdictionary

文本示例：

```
1
00:00:00,000 --> 00:00:01,000
This is the first line

2
00:00:01,000 --> 00:00:02,000
This is the second line

3
00:00:02,000 --> 00:00:03,000
This is the last line 
```

在 JavaScript 中，我当然会用正则表达式来解析它。我只是想知道，这是在 Obj C 中执行此操作的最佳方法吗？我确信我可以找到一种*方法*来做到这一点，但我想以一种*适当*的方式来做。

我只需要知道从哪里开始，我很乐意做剩下的，但为了理解起见，我最终会得到这样的东西（伪代码）：

```
NSDictionary
index -> [0-9]+
start -> hh:mm:ss,mmm
end -> hh:mm:ss,mmm
text -> one of the lines of text 
```

在这种情况下，我会将三个条目解析到我的字典中。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-11T23:38:35.903

一些背景知识：我编写了一个小应用程序并创建了一个名为 stuff.srt 的文件，其中包含驻留在包中的示例；因此，我访问它的方式。

这只是一个快速而肮脏的事情，一个概念验证。请注意，它不检查结果。实际应用程序总是检查他们的结果。如您所见，工作发生在`-applicationDidFinishLaunching:`方法中（我在 Mac OS X 中工作，而不是 iOS）。

**编辑：**

有人指出，最初发布的代码没有正确处理多个文本行。为了解决这个问题，我利用[SRT 文件使用 CRLF 作为其换行符](http://en.wikipedia.org/wiki/SubRip)这一事实，并搜索此序列的两次出现。然后，根据我[在此处](http://www.matroska.org/technical/specs/subtitles/srt.html)观察到的内容，我将文本字符串中所有出现的 CRLF 更改为空格。这不考虑文本每行中的前导或尾随空格。

我将 stuff.srt 文件的内容更改为：

```
1
00:00:00,000 --> 00:00:01,000
This is the first line
and it has a secondary line

2
00:00:01,000 --> 00:00:02,000
This is the second line

3
00:00:02,000 --> 00:00:03,000
This is the last line
and it has a secondary line too 
```

并且代码修改如下（我也将所有内容都放入了@autoreleasepool 指令；在解析文件的过程中可能会生成*很多自动释放的对象！）：*

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    NSString *path = [[NSBundle mainBundle] pathForResource:@"stuff" ofType:@"srt"];

    NSString *string = [NSString stringWithContentsOfFile:path encoding:NSUTF8StringEncoding error:NULL];

    NSScanner *scanner = [NSScanner scannerWithString:string];

    while (![scanner isAtEnd])
    {
        @autoreleasepool
        {
            NSString *indexString;
            (void) [scanner scanUpToCharactersFromSet:[NSCharacterSet newlineCharacterSet] intoString:&indexString];

            NSString *startString;
            (void) [scanner scanUpToString:@" --> " intoString:&startString];

            // My string constant doesn't begin with spaces because scanners
            // skip spaces and newlines by default.
            (void) [scanner scanString:@"-->" intoString:NULL];

            NSString *endString;
            (void) [scanner scanUpToCharactersFromSet:[NSCharacterSet newlineCharacterSet] intoString:&endString];

            NSString *textString;
            // (void) [scanner scanUpToCharactersFromSet:[NSCharacterSet newlineCharacterSet] intoString:&textString];
            // BEGIN EDIT
            (void) [scanner scanUpToString:@"\r\n\r\n" intoString:&textString];
            textString = [textString stringByReplacingOccurrencesOfString:@"\r\n" withString:@" "];
            // Addresses trailing space added if CRLF is on a line by itself at the end of the SRT file
            textString = [textString stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceCharacterSet]];
            // END EDIT

            NSDictionary *dictionary = [NSDictionary dictionaryWithObjectsAndKeys:
                                        indexString, @"index",
                                        startString, @"start",
                                        endString , @"end",
                                        textString , @"text",
                                        nil];

            NSLog(@"%@", dictionary);
        }
    }
} 
```

修改后的输出如下所示：

```
2013-02-09 16:10:17.727 SRTFileScan[4846:303] {
    end = "00:00:01,000";
    index = 1;
    start = "00:00:00,000";
    text = "This is the first line and it has a secondary line";
}
2013-02-09 16:10:17.729 SRTFileScan[4846:303] {
    end = "00:00:02,000";
    index = 2;
    start = "00:00:01,000";
    text = "This is the second line";
}
2013-02-09 16:10:17.730 SRTFileScan[4846:303] {
    end = "00:00:03,000";
    index = 3;
    start = "00:00:02,000";
    text = "This is the last line and it has a secondary line too";
} 
```

我从今天阅读的内容中学到的另一件事：SRT 文件格式起源于法国，输入中看到的逗号是那里使用的小数分隔符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-13T12:48:16.203

Apple 有一个示例代码来解析字幕文件。在此处检查相关部分：

[https://developer.apple.com/library/mac/samplecode/avsubtitleswriterOSX/Listings/avsubtitleswriter_SubtitlesTextReader_m.html#//apple_ref/doc/uid/DTS40013409-avsubtitleswriter_SubtitlesTextReader_m-DontLinkElementID_5](https://developer.apple.com/library/mac/samplecode/avsubtitleswriterOSX/Listings/avsubtitleswriter_SubtitlesTextReader_m.html#//apple_ref/doc/uid/DTS40013409-avsubtitleswriter_SubtitlesTextReader_m-DontLinkElementID_5)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T17:00:35.397

我的建议是使用[NSDateFormatter](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDateFormatter_Class/Reference/Reference.html)来解析第二行。我会将该字符串拆分为两个字符串（请参阅 componentsSeparatedByString: in [NSString 类参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html)）。这在每行读取文件行时。

所以循环将是：

*   如果文件再次包含数据，则读取下一行；
*   如果下一行是 4 的倍数，则分配一个新对象。这个对象应该能够包含两个日期，一个整数和一个字符串；
*   如果下一行不是 4 的倍数，则读取该行并将其值分配给相应的字段。

# jquery - 寻找具有 1 天 Cookie 过期时间的 ColorBox 的工作示例

> ID：14287529
> 
> 赞同：2
> 
> 时间：2013-01-11T22:12:56.083
> 
> 标签：jquery, cookies, colorbox

使用 ColorBox jQuery Lightbox，我几乎已经完成了这项工作，但它只适用于 IE 而不是 FireFox ......我有什么想法可以解决这个问题以使其在 Firefox 和其他 Mozilla 浏览器中工作？

```
 <!DOCTYPE html>
<html lang="en">
    <head>
    <meta charset=utf-8 />
    <title>Working ColorBox Example Using Cookie</title>
    <style type="text/css">
        body{font:12px/1.2 Verdana, sans-serif; padding:0 10px;}
        a:link, a:visited{text-decoration:none; color:#416CE5; border-bottom:1px solid #416CE5;}
        h2{font-size:13px; margin:15px 0 0 0;}
    </style>
    <link media="screen" rel="stylesheet" href="colorbox.css" />
     <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.6/jquery-ui.min.js"></script>
<script src="../colorbox/jquery.colorbox.js"></script>
</head>
<body>
      <script>
$(document).ready(function(){
    if (document.cookie.indexOf('visited=true') === -1) {
        var expires = new Date();
        expires.setDate(expires.getDate()+1); // +1 = in 1 day
        document.cookie = "visited=true; expires="+expires.toUTCString();

        // replace this with your actual call to colorbox.
        $.colorbox({html:"welcome!"});
    }
});
    </script>
Back Page
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T19:26:47.517

用于创建 cookie 的本机代码非常简单，所以我不认为我会使用插件来设置/读取单个 cookie。颜色框常见问题解答上有一个条目：[http ://www.jacklmoore.com/colorbox/faq#faq-cookie](http://www.jacklmoore.com/colorbox/faq#faq-cookie)

对你来说，它看起来像这样：

```
$(document).ready(function(){
    if (document.cookie.indexOf('visited=true') === -1) {
        var expires = new Date();
        expires.setDate(expires.getDate()+1); // +1 = in 1 day
        document.cookie = "visited=true; expires="+expires.toUTCString();

        // replace this with your actual call to colorbox.
        $.colorbox({html:"Welcome!"});
    }
}); 
```

# asp.net - 更新面板、用户控件和 RegisterClientScriptInclude

> ID：14287534
> 
> 赞同：0
> 
> 时间：2013-01-11T22:13:04.237
> 
> 标签：asp.net

我有一个带有脚本管理器的母版页。我有一个带有更新面板的内容页面。在更新面板中，我有几个用户控件，最初都是可见的=假。打开用户控件之一后，我无法使用
RegisterClientScriptInclude 附加我的 js 文件。我用过：

```
ScriptManager.RegisterClientScriptInclude(Page, this.GetType(), "key5", ResolveClientUrl("~/js/configurator.js")); 
```

在母版页、内容页和后面的用户控制代码中。其中没有一个表明正在加载 js 文件。我一直能够做到这一点，但所有控件从一开始都是可见的。有人可以指出如何加载脚本以使其可用于用户控件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T18:34:29.147

我所要做的就是创建一个像这样的 javascript 处理程序，以便在可见 = true 之后可以拾取它。$("按钮").live("点击", function(e){......});

# pdf - 我需要一些关于 PDF 书签的见解

> ID：14287542
> 
> 赞同：1
> 
> 时间：2013-01-11T22:13:50.863
> 
> 标签：pdf, pdf-generation

我没有进行任何编程来深入处理 PDF，只使用 PHP 创建 PDF。

我被要求参与一个项目，该项目的要求是生成 PDF 书签，其中的标题是从选定的文本中创建的。

场景是这样的：

*   用户突出显示给定 PDF 文件中的一些文本。
*   提示用户输入章节的起始页码（书签）
*   创建一个书签，其标题指向给定的页码。
*   应该支持处理子章节（如子节点）的多级书签。

***由于一些限制，如果可能***的话，客户希望这是一个网络应用程序。

你会推荐什么平台/语言/技术/库？

它在浏览器中可行吗？这应该是一个桌面应用程序吗？

我精通 PHP/Javascript，并且能够使用 Python，在处理 PDF 文件方面有一点经验（除了生成格式化的 PDF）。（加上愿意学习任何新东西）

我有一些时间来挖掘和概念化它，所以我非常愿意接受建议。

任何见解将不胜感激。

# php - 从数据库表中获取整行

> ID：14287550
> 
> 赞同：-6
> 
> 时间：2013-01-11T22:14:29.597
> 
> 标签：php, sql

我正在创建这个英雄联盟网站，在一个数据库中，我有每个英雄的名字、位置和法术名称的表格。我想知道如何只为一个特定的冠军访问整行。

该表的构建如下：

```
TABLE `champions` (
`Champion_Name` TEXT NULL,
`Champion_Positions` TEXT NULL,
`Spell_Passive` TEXT NULL,
`Spell_1` TEXT NULL,
`Spell_2` TEXT NULL,
`Spell_3` TEXT NULL,
`Spell_Ultimate` TEXT NULL
) 
```

我选择了用什么冠军来获取`$_get`，那么我如何让 PHP 搜索数据库表并包括包含相应冠军姓名的整行？

我在网上查看过，但找不到我理解或我认为对我有用的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T22:24:49.707

假设你有一个活跃`$_SESSION`的用户名。只需通过您的 API 搜索您的数据库。

MySQLI:

```
$ChampName = $_GET['ChampionName'];
$Query = $Conn->prepare("SELECT * FROM champions WHERE `Champion_Name`=?");
$Query->bind_param('s',$ChampName);
$Query->execute();
$Results = $Query->fetch_array(MYSQLI_ASSOC); 
```

如果您需要除此之外的更多帮助.. 您将不得不显示一些您尝试过的代码。

您可能想在 php.net 上查看 mysqli __construct

并且不要使用 mysql_* 函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T22:35:14.930

我认为 MySQLI 的答案会很好用，但如果你想使用它，这里有一个 PHP MySQL 版本；对我来说，这种格式总是自然而然地更有意义，所以以防万一你在这里也是这样：

```
<?php
$ChampName = $_GET['ChampionName'];
//all your db conneciton stuff
$query = mysql_query("SELECT * FROM champions Where Champion_name='" . $ChampName . "'");
$data = mysql_fetch_assoc($query);
echo $data['Champion_Name'] . '<br>';
echo $data['Champion_Positions'] . '<br>';
echo $data['Spell_Passive'] . '<br>';
/// etc...
?> 
```

# ruby-on-rails - Ruby on Rails，从模型中调用一个非常大的方法

> ID：14287553
> 
> 赞同：2
> 
> 时间：2013-01-11T22:15:02.077
> 
> 标签：ruby-on-rails

我的模型中有一个非常大的功能，我想将它存储在其他地方以保持模型干燥。我读到在 ApplicationHelper 中存储方法然后从模型中调用它们是一个坏主意。那么什么是好主意呢？我想用我的大方法有一个单独的文件，并从模型中调用它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T22:20:09.027

您可以创建一个“普通的旧红宝石对象 (PORO)”来为您完成工作。假设您有一种方法可以计算用户的逾期金额。

因此，您可以创建 app/services/calculates_overages.rb

```
class CalculatesOverages
  def initialize(user)
    @user = user
  end

  def calculate
    # your method goes here
  end
end 
```

那么你就可以：

```
class User < ActiveRecord::Base
  def overage_amount
    CaluclatesOverage.new(self).calculate
  end
end 
```

或者，在控制器中，您可以：

```
def show
  @amount = CaluclatesOverage.new(current_user).calculate
end 
```

app/services 目录也可以是 app/models 或 lib 目录。这（还）没有固定的约定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T22:58:50.253

使用关注点。[https://gist.github.com/1014971](https://gist.github.com/1014971)

这很简单。在`app/models/concerns`创建文件`your_functionality.rb`如下：

```
module YourFunctionality
  extend ActiveSupport::Concern

  def your_fat_method
    # insert...
  end
end 
```

在您的模型中简单地：

```
include YourFunctionality 
```

# cuda - cuda 将数组从全局内存复制到共享内存

> ID：14287557
> 
> 赞同：0
> 
> 时间：2013-01-11T22:15:08.113
> 
> 标签：cuda, shared-memory

hy，我正在尝试将 2 个数组从全局内存复制到共享内存：全局数组类型是双精度的，每个人都有 32 个元素。网格是一维的，块是一维的。网格尺寸为 10000，NumberThreadPerBlock 为 32

```
__global__ void kernel_0(double px[], double py[], int N)
{
int ii,

    jj,tid;
    tid=blockIdx.x*blockDim.x + threadIdx.x;
    __shared__ double s_px[256];
    __shared__ double s_py[256];
    __shared__ double s[256];

s_px[threadIdx.x]=px[tid];
s_py[threadIdx.x]=py[tid];
s[threadIdx.x]=py[tid];
__syncthreads();
}

int main (int argc, char *argv[]){
    double *px, *py , *x, *y, PI, step, *d_x, *d_y,*d_px, *d_py,sharedMemSize;
    int N, Nx, ii;
    PI = 4*atan(1.0);
    Nx = 10000; 
    N = 32; 

    px = (double *) malloc(N*sizeof(double));
    py = (double *) malloc(N*sizeof(double));

    // lookup table: sin // from 0 to PI 
    step = 1.0 / (N-1);
    for (ii = 0; ii < N; ii++){ 
        px[ii] = ii*step*PI;
        py[ii] = sin(px[ii]);
    }   

    cudaMalloc( (void **) &d_px, N*sizeof(double) );
    cudaMalloc( (void **) &d_py, N*sizeof(double) );        

    cudaMemcpy( d_px, px, N*sizeof(double), cudaMemcpyHostToDevice );
    cudaMemcpy( d_py, py, N*sizeof(double), cudaMemcpyHostToDevice );

    dim3 dimGrid(Nx);
    dim3 dimBlock(N,1,1);
    kernel_0<<< dimGrid, dimBlock>>>(px, py, N);

} 
```

它可以编译，但 cuda-memmcheck 显示了很多错误：

```
========= Invalid __global__ read of size 8
=========     at 0x00000058 in kernel_0
=========     by thread (31,0,0) in block (6,0,0)
=========     Address 0x11e0db38 is out of bounds
=========
========= ERROR SUMMARY: 96 errors 
```

你能帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T02:24:04.853

据我所知，分配给设备指针（px，py）的内存是 32*sizeof(double)，但是你拥有的块数是 10000。设备内存是全局的，所有块共享它，只有共享内存为每个块定义。因此，对于 blockId.x = 1，您应该获得无效的内存访问。而且，在内核调用中，应该是d_px，d_py。

# android - 从 SVN 存储库构建 Android Eclipse 项目？

> ID：14287558
> 
> 赞同：1
> 
> 时间：2013-01-11T22:15:10.867
> 
> 标签：android, eclipse, svn

使用 SVN 插件运行 Eclipse 3.8。我到了被问到“选择如何签出文件夹'主干'”的地步，似乎正确的是选择“签出指定名称的项目：”，然后它继续检查所有代码。一切看起来都很好，但现在我什么都做不了。构建全部/构建项目无论是否选中自动构建都是灰色的。那么接下来的步骤是什么让这个东西被识别为一个项目，编译和运行？谢谢。

# c# - 如何从 MDI 子窗体（MDI 应用程序）打开窗体对话框

> ID：14287560
> 
> 赞同：1
> 
> 时间：2013-01-11T22:15:16.600
> 
> 标签：c#, winforms, dialog, mdi, mdichild

我有一个 MDI 主窗体，一个显示子窗体的菜单项（我们称之为`frmEmployees`），在这个窗体内部是一个`Button`（btnNew ...），我如何从这里打开一个窗体作为对话框（`frmNewEmployee`）；我的意思是，在关闭`frmEmployees`之前无法到达。`frmNewEmployee`

```
// Main_Form_Load
Main_Form.IsMdiContainer = true; 
```

从主窗体中的菜单项，我打开`frmEmployees`

```
// MenuItem_Click
frmEmployees frmEmp = new frmEmployees();
frmEmp.MdiParent = this;
frmEmp.Show(); 
```

从一个按钮，我打开另一个表单

```
// newButton_Click
frmNewEmployee frmNE = new frmNewEmployee();
frmNE.MdiParent = this.MdiParent;
//frmNE.Show();      // OK, but allows return to frmEmployees
frmNE.ShowDialog();  // here comes the problem 
```

打开`frmEmployees`时有什么方法可以阻止吗？`frmNewEmployee`

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T22:48:28.363

不要设置 frmNE.mdiParent。让实例成为 frmEmployees 的子代。重申一下，不要设置 mdiParent 属性并调用 frmNE.ShowDialog() 并且被阻止的表单将是 frmEmployee。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T22:49:25.173

```
namespace ModalTest
{
    using System;
    using System.Windows.Forms;

    public partial class frmMain : Form
    {
        frmEmployees frmEmp = new frmEmployees();
        frmNewEmployee frmNE = new frmNewEmployee();

        public frmMain()
        {
            InitializeComponent();
            IsMdiContainer = true;
        }

        private void btnGo_Click(object sender, EventArgs e)
        {
            frmEmp.MdiParent = this;
            frmEmp.Show();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            frmNE.MdiParent = frmEmp.MdiParent;
            frmEmp.Hide();
            frmNE.Show();
        }
    }
} 
```

基本上我所做的是将第三个表单分配给第二个表单`frmNE`的父级`frmEMP`，然后使用 frmEmp.Hide() 隐藏表单。正如我上面提到的，使用“.ShowDialog()”会强制您的第三种表单变为模态，因此需要在继续执行之前满足它。

# ruby - ruby 代码中未定义的方法“lambda”

> ID：14287567
> 
> 赞同：2
> 
> 时间：2013-01-11T22:15:26.813
> 
> 标签：ruby

我有一个代码

```
class A < BasicObject

    def initialize var1, *args, &block
      if var1 == :lambda
        @var1 = lambda &block
      end
    end
end

a = A.new :lambda, 123  do |var|
  puts "ha ha ha"
end 
```

为什么会导致错误？

```
undefined method `lambda' for #<A:0x00000001687968> (NoMethodError) 
```

不像这个（它不会导致它）

```
class A
   def initialize var1, *args, &block
      if var1 == :lambda
        @var1 = lambda &block
      end
    end
end 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-11T22:18:34.617

该`lambda`方法在`Kernel`模块中定义。`Object`包括`Kernel`. `BasicObject`才不是。因此，如果您想`lambda`从 BasicObject 中使用，您必须将其称为`::Kernel.lambda`.

请注意，这并不特定于`lambda`- 它也适用于任何其他内核方法（如 eg `puts`）。

PS：请注意，`@var1 = lambda &block`这与 write 的作用相同，因此这里实际上不需要`@var1 = block`使用 of 。`lambda`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T23:56:14.437

您使用 BasicObject 作为基类，它是一个显式的空白类，特别是不包括内核，因此当您访问任何内核方法时，您需要限定符 ::Kernel。

在单独的说明 -

你可以使用内核方法 block_given，而不是传递一个你有一个块的参数？所以以你为例-

```
class A
  def initialize  *args, &block
    if block_given?
      @var1 = lambda &block
    end
    puts @var1.call
  end
end
a = A.new  123  do |var|
  puts "ha ha ha"
end 
```

# javascript - 我想停止倒计时

> ID：14287568
> 
> 赞同：1
> 
> 时间：2013-01-11T22:15:33.457
> 
> 标签：javascript, html

这是我在此的头一篇博文。我对 JS 不是很熟悉，还不能掌握它。几天来，我一直在尝试各种代码，试图在倒数计时器超时之前停止它（这不是我的代码），但无济于事，所以放弃了“猜测”，并会问专家。提前致谢。

```
<button onclick="myStopFunction()">STOP</button><p>

<script> 
function countDown(frm)
{ 
var start=frm.v1.value; 
var now=new Date(); 
var end=new Date(frm.yr.value,frm.mth.value-    1,frm.day.value,frm.hrs.value,frm.min.value); 
var diff = (end - now)/1000; 
var step=(start-frm.v2.value)/diff; 
document.getElementById("counter").innerHTML=start; 
var myint=setInterval(function(){start=start-step;     document.getElementById("counter").innerHTML=start.toFixed(2); 
if(start<frm.v2.value){document.getElementById("counter").innerHTML="Ended";     clearInterval(myint)}},1000);
}

function myStopFunction()
{
clearInterval(myint);
}
</script> 
```

我已经尝试过您的更新（见下文），但计数器将不再启动。我可能误解了你的回复。

```
var myint; 
function countDown(frm) 
{ 
var start=frm.v1.value; 
var now=new Date(); 
var end=new Date(frm.yr.value,frm.mth.value-    1,frm.day.value,frm.hrs.value,frm.min.value); 
var diff = (end - now)/1000; 
var step=(start-frm.v2.value)/diff; 
document.getElementById("counter").innerHTML=start; 

}
{
myint=setInterval(function(){start=start-step;     document.getElementById("counter").innerHTML=start.toFixed(2); 
if(start<frm.v2.value)    {document.getElementById("counter").innerHTML="Ended";clearInterval(myint)}},1000); 
}

function myStopFunction()
{
clearInterval(myint);
} 
```

你的“神童”非常感谢你。看了你第一百遍的回复后，我知道我肯定误解了你的回复。它现在工作正常。我是一个学习者。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T22:18:19.677

`myStopFunction`不知道是什么`myint`，因为`myint`是本地的`countDown`。一个简单的解决方案是`myint`通过将其放在`countDown`.

```
var myint;
function countDown(frm)
{ 
 ...
 myint=setInterval(... //note the lack of var here
 ...
}

function myStopFunction()
{
 clearInterval(myint);
} 
```

# mongodb - 聚合框架中的MongoDB $cond

> ID：14287573
> 
> 赞同：3
> 
> 时间：2013-01-11T22:16:01.357
> 
> 标签：mongodb

我有一个包含如下文档的集合：{

```
ipAddr: '1.2.3.4',
"results" : [
             {
                     "Test" : "Sight",
                     "Score" : "FAIL",
                     "Reason" : "S1002"
             },
             {
                     "Test" : "Speed",
                     "Score" : "FAIL",
                     "Reason" : "85"
             },
             {
                     "Test" : "Sound",
                     "Score" : "FAIL",
                     "Reason" : "A1001"
             }
     ],
     "finalGrade" : "FAILED" 
```

}

这是我正在尝试编写的聚合查询，我想要做的（见注释掉的部分）是创建一个分组字段，每个 ipAddr，“原因/错误”代码，但前提是原因代码以一个特定的字母，并且只添加一次代码，我尝试了以下方法：

```
 db.aggregate([
   {$group: 
        {  _id: "$ipAddr", 
         attempts: {$sum:1}, 
         results: {$push: "$finalGrade"},    
        // errorCodes: {$addToSet: {$cond: ["$results.Reason": /[A|B|S|N.*/, "$results.Reason", ""]}},                                                              
        finalResult: {$last: "$finalGrade"} } 
   }
]); 
```

一切正常，不包括注释掉的“errorCodes”行。我试图创建的逻辑是：“添加错误代码设置结果的值。如果它以 A、B、S 或 N 开头，则原因代码，否则没有可添加的内容”。

对于上面的记录，errorCodes 集*应*包含：
... errorCodes: [S1002,A1001], ...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T03:57:03.803

`$group`不能采用条件表达式，这就是该行不起作用的原因。`$project`是您可以基于`$cond`ional 表达式（除其他外）转换原始文档的阶段。

您需要先在聚合管道中执行两个步骤`$group`- 首先您需要`$unwind`结果数组，然后您需要`$match`过滤掉您不关心的结果。

这将做一件简单的事情，只需将结果与您不关心保留的错误代码一起丢弃，但听起来您想计算包括所有错误代码在内的失败总数，然后只将特定错误代码添加到输出中大批？没有直接的方法可以做到这一点，您必须`$group` `$unwind`在管道中进行两次传递。

类似的事情会做到这一点：

```
db.aggregate([
   {$unwind : "$results"},
   {$group:
        { _id: "$ipAddr",
          attempts: {$sum:1},
          results: {$push : "$results"},
          finalGrade: {$last : "$finalGrade" } 
        } 
   },
   {$unwind: "$results"},
   {$match: {"results.Reason":/yourMatchExpression/} },
   {$group: 
        {  _id: "$ipAddr", 
         attempts: {$last:"$attempts"},    
         errorCodes: {$addToSet: "$results.Reason"},                                                              
        finalResult: {$last: "$finalGrade"}
   }
]); 
```

如果您只想计算具有匹配错误代码的尝试，那么您可以使用单个来执行此`$group`操作 - 您需要这样做`$unwind`,`$match`和`$group`. 您可以像以前一样使用 $project `$cond`，但是您的 errorCodes 数组将有一个空字符串条目以及所有正确的错误代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-12T11:00:32.740

从 Mongo 2.4 开始，$regex 可用于模式匹配，但不能作为返回布尔值的表达式，这是 $cond 所要求的

然后，您可以使用 $match 运算符来使用 $regex 关键字：

[http://mongotry.herokuapp.com/#?bookmarkId=52fb39e207fc4c02006fcfed](http://mongotry.herokuapp.com/#?bookmarkId=52fb39e207fc4c02006fcfed)

```
[
{
    "$unwind": "$results"
},
{
    "$match": {
        "results.Reason": {
            "$regex": "[SA].*"
        }
    }
},
{
    "$group": {
        "_id": "$ipAddr",
        "attempts": {
            "$sum": 1
        },
        "results": {
            "$push": "$finalGrade"
        },
        "undefined": {
            "$last": "$finalGrade"
        },
        "errorCodes": {
            "$addToSet": "$results.Reason"
        }
    }
}
] 
```

或者您可以使用 $substr 因为您的模式匹配非常简单 [http://mongotry.herokuapp.com/index.html#?bookmarkId=52fb47bc7f295802001baa38](http://mongotry.herokuapp.com/index.html#?bookmarkId=52fb47bc7f295802001baa38)

```
[
{
    "$unwind": "$results"
},
{
    "$group": {
        "_id": "$ipAddr",
        "errorCodes": {
            "$addToSet": {
                "$cond": [
                    {
                        "$or": [
                            {
                                "$eq": [
                                    {
                                        "$substr": [
                                            "$results.Reason",
                                            0,
                                            1
                                        ]
                                    },
                                    "A"
                                ]
                            },
                            {
                                "$eq": [
                                    {
                                        "$substr": [
                                            "$results.Reason",
                                            0,
                                            1
                                        ]
                                    },
                                    "S"
                                ]
                            }
                        ]
                    },
                    "$results.Reason",
                    "null"
                ]
            }
        }
    }
}
] 
```

# java - 我是否正确访问文件？

> ID：14287577
> 
> 赞同：0
> 
> 时间：2013-01-11T22:16:07.977
> 
> 标签：java, android, opencv

这是我正在尝试使用的代码

```
File filePath = new File(Environment.getExternalStorageDirectory(), "/test.bmp");
String file = filePath.getAbsolutePath();
Mat input_mat = Highgui.imread(file); 
```

当我将应用程序与最后一行一起使用时，它会崩溃。我不确定最后一行是错误还是我没有正确访问 test.bmp 文件。它保存在 sdcard 的根目录中。

它适用于 Eclipse 上的 android 应用程序。

**编辑日志猫**

```
01-11 22:38:50.288: E/AndroidRuntime(545): FATAL EXCEPTION: main
01-11 22:38:50.288: E/AndroidRuntime(545): java.lang.UnsatisfiedLinkError: imread_1
01-11 22:38:50.288: E/AndroidRuntime(545):  at org.opencv.highgui.Highgui.imread_1(Native Method)
01-11 22:38:50.288: E/AndroidRuntime(545):  at org.opencv.highgui.Highgui.imread(Highgui.java:324)
01-11 22:38:50.288: E/AndroidRuntime(545):  at com.example.android.photobyintent.PhotoIntentActivity.dispatchProcVideoIntent(PhotoIntentActivity.java:186)
01-11 22:38:50.288: E/AndroidRuntime(545):  at com.example.android.photobyintent.PhotoIntentActivity.access$2(PhotoIntentActivity.java:182)
01-11 22:38:50.288: E/AndroidRuntime(545):  at com.example.android.photobyintent.PhotoIntentActivity$4.onClick(PhotoIntentActivity.java:264)
01-11 22:38:50.288: E/AndroidRuntime(545):  at android.view.View.performClick(View.java:3480)
01-11 22:38:50.288: E/AndroidRuntime(545):  at android.view.View$PerformClick.run(View.java:13983)
01-11 22:38:50.288: E/AndroidRuntime(545):  at android.os.Handler.handleCallback(Handler.java:605)
01-11 22:38:50.288: E/AndroidRuntime(545):  at android.os.Handler.dispatchMessage(Handler.java:92)
01-11 22:38:50.288: E/AndroidRuntime(545):  at android.os.Looper.loop(Looper.java:137)
01-11 22:38:50.288: E/AndroidRuntime(545):  at android.app.ActivityThread.main(ActivityThread.java:4340)
01-11 22:38:50.288: E/AndroidRuntime(545):  at java.lang.reflect.Method.invokeNative(Native Method)
01-11 22:38:50.288: E/AndroidRuntime(545):  at java.lang.reflect.Method.invoke(Method.java:511)
01-11 22:38:50.288: E/AndroidRuntime(545):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
01-11 22:38:50.288: E/AndroidRuntime(545):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
01-11 22:38:50.288: E/AndroidRuntime(545):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T22:50:30.190

这与读取位图文件无关。`UnsatisfiedLinkError`意味着它无法找到`.so`实现该类的共享对象（文件）。这意味着您的项目配置有问题。您是否将所需文件复制到`libs/armeabi`和？`libs/armeabi-v7a``libs/x86`

另见：

[Android for OpenCV - 打开跟踪文件时出错，UnsatisfiedLinkError](https://stackoverflow.com/questions/11852642/android-for-opencv-error-opening-trace-file-unsatisfiedlinkerror)

# ios - NSInternalInconsistencyException：无法让 NSPersistentStore 启动或创建商店

> ID：14287579
> 
> 赞同：0
> 
> 时间：2013-01-11T22:16:12.500
> 
> 标签：ios, xcode, appdelegate, nspersistentstore

我整天都在努力解决一个我发现是错误的`NSInternalInconsistencyException`错误。我收到的错误控制台消息是“此 NSPersistentStoreCoordinator 没有持久存储。它无法执行保存操作。” 我还得到“执行被中断，原因：EXC_BAD_ACCESS（代码=1，地址=0x1）。”

我的 App Delegate 中有以下代码：

```
- (void)saveContext
{
    NSError *error = nil;
    NSManagedObjectContext *managedObjectContext = self.managedObjectContext;
    if (managedObjectContext != nil) {
        if ([managedObjectContext hasChanges] && ![managedObjectContext save:&error]) {

            NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
            abort();
        }
    }
}

#pragma mark Core Data stack

- (NSManagedObjectContext *)managedObjectContext {

    if (_managedObjectContext != nil) {
        return _managedObjectContext;
    }

    NSPersistentStoreCoordinator *coordinator = [self persistentStoreCoordinator];
    if (coordinator != nil) {
        _managedObjectContext = [[NSManagedObjectContext alloc] init];
        [_managedObjectContext setPersistentStoreCoordinator: coordinator];
    }
    return _managedObjectContext;
}

- (NSManagedObjectModel *)managedObjectModel {

    if (_managedObjectModel != nil) {
        return _managedObjectModel;
    }
    _managedObjectModel = [NSManagedObjectModel mergedModelFromBundles:nil];
    return _managedObjectModel;
}

- (NSPersistentStoreCoordinator *)persistentStoreCoordinator
{
    if (_persistentStoreCoordinator != nil) {
        return _persistentStoreCoordinator;
    }

    NSURL *storeURL = [[self applicationDocumentsDirectory] URLByAppendingPathComponent:@"shindy.sqlite"];

    NSError *error = nil;
    _persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:[self managedObjectModel]];
    if (![_persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeURL options:nil error:&error]) {
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
    }

    return _persistentStoreCoordinator;
}

#pragma mark Application's documents directory

- (NSURL *)applicationDocumentsDirectory
{
    return [[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask] lastObject];
} 
```

我已经仔细阅读了与此类似的其他问题，看来我的代码是一致的，我不应该遇到这个问题。然而，我是...

我已经尝试清理和删除应用程序并重新安装。我在设备和模拟器上都尝试了该应用程序。我将附加的 URLPath 的名称“shindy.sqlite”更改为我以前没有使用过的各种名称。`[self saveContext];`我还尝试在我的方法中强制实例化，`applicationDidFinishLaunching`以使我的应用程序创建商店。

我所有解决问题的尝试都只是返回了相同的错误。我不知道还能尝试什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T06:21:57.933

我最终弄清楚我做错了什么。不幸的是，它可能对你们大多数人没有多大帮助，因为这是我犯的一个愚蠢的错误。

我在 App Delegate 中的 URL 上进行了正常的“附加”。然后在将加载的第一个视图控制器中再次“附加”。这导致我的代码将名称附加到已创建的 sqlite 文件夹中。

# linker - osg构建osgviewer时链接器错误

> ID：14287583
> 
> 赞同：1
> 
> 时间：2013-01-11T22:16:46.260
> 
> 标签：linker, slackware

我正在尝试从源代码在 slackware 14.0 上构建 osg 14.0。从 osgviewer 创建可执行文件时出现链接器错误：

```
Linking CXX executable ../../bin/osgviewer
../../lib/libosg.so.3.0.1: undefined reference to     `std::__detail::_List_node_base::_M_transfer(std::__detail::_List_node_base*,     std::__detail::_List_node_base*)'
../../lib/libosg.so.3.0.1: undefined reference to     `std::__detail::_List_node_base::_M_hook(std::__detail::_List_node_base*)'
../../lib/libosg.so.3.0.1: undefined reference to     `std::__detail::_List_node_base::_M_unhook()'
../../lib/libosgDB.so.3.0.1: undefined reference to         `std::__detail::_List_node_base::swap(std::__detail::_List_node_base&,              std::__detail::_List_node_base&)'
collect2: error: ld returned 1 exit status
make[2]: *** [bin/osgviewer] Error 1
make[1]: *** [applications/osgviewer/CMakeFiles/application_osgviewer.dir/all] Error 2
make: *** [all] Error 2 
```

这是 ld.so.conf

```
/usr/local/lib
/usr/i486-slackware-linux/lib
/usr/lib/seamonkey
/usr/lib 
```

你知道问题可能出在哪里吗？

谢谢你。

# ruby - 为什么这个 Unicode gsub 替换在 Ruby 中不起作用？

> ID：14287585
> 
> 赞同：1
> 
> 时间：2013-01-11T22:17:01.847
> 
> 标签：ruby, unicode

在[另一个问题](https://stackoverflow.com/questions/878789/replace-umlaute-auo-for-seo-link-in-rails-best-way)中，有人询问如何替换元音变音。接受的问题是以下代码：

```
# encoding: utf-8
foo = "ich bin doch nicht blöd, mann!".gsub(/[äöü]/) do |match|
    case match
        when "ä" 'ae'
        when "ö" 'oe'
        when "ü" 'ue'
    end
end
puts foo 
```

但是，当我尝试运行它时，输出是：

```
$ ruby /tmp/test.rb 
ich bin doch nicht bld, mann! 
```

因此，元音变音显然不会被替换。**有什么我想念的吗？**我正在使用 Ruby 1.9.3p362（2012-12-25 修订版 38607）[x86_64-linux]

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-11T22:22:10.423

您使用的语法不正确，您需要使用`then`或使用换行符和缩进。

```
# encoding: utf-8
foo = "ich bin doch nicht blöd, mann!".gsub(/[äöü]/) do |match|
    case match
        when "ä" then 'ae'
        when "ö" then 'oe'
        when "ü" then 'ue'
    end
end

puts foo 
```

或者

```
# encoding: utf-8
foo = "ich bin doch nicht blöd, mann!".gsub(/[äöü]/) do |match|
    case match
        when "ä"
            "ae"
        when "ö"
            "oe"
        when "ü"
            "ue"
    end
end 
```

执行此操作的可靠方法是，`result = Iconv.iconv('ascii//ignore//translit', 'utf-8', foo)`但您需要设置`"de_DE"`在没有 ac 扩展的情况下无法在 ruby​​ 中完成的语言环境。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T22:19:53.827

```
"ich bin doch nicht blöd, mann!".gsub("ä","ae").gsub("ö","oe").gsub("ü","ue") 
```

应该做的伎俩

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-11T22:48:04.320

（不是问题的真正答案，但对于评论来说有点大。）`gsub`具有这种替换的语法，使用哈希：

```
#encoding: utf-8
table = {"ä" => 'ae',
         "ö" => 'oe',
         "ü" => 'ue'}
re = Regexp.union(table.keys)
# re = /[äöü]/ # is fine too
p "ich bin doch nicht blöd, mann!".gsub(re, table)
# => "ich bin doch nicht bloed, mann!" 
```

# xslt - 单引号转义 XSLT 1.0 中的动态字符串值

> ID：14287598
> 
> 赞同：5
> 
> 时间：2013-01-11T22:17:32.420
> 
> 标签：xslt, xslt-1.0

我正在从 XSLT 定义一个 JavaScript 变量，并且由于未转义的字符串而出现错误。我知道我需要将其替换为`&apos;`，但我不确定如何在 XSLT 1.0 中执行此操作。

XSLT 示例：

```
var currentComment = '<xsl:value-of select="root/Reviews/Review/Comment" />'; 
```

使用未转义的单引号渲染 javascript：

```
var currentComment = 'Let's test a string.',
// Causing an error ------^ 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-12T15:42:35.280

正如 Ian Roberts 在他的评论中指出的那样，您需要考虑反斜杠而不仅仅是撇号。Dimitre 的答案可以进行如下修改以解决此问题：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output omit-xml-declaration="yes" indent="yes"/>

  <xsl:template match="/">
    <xsl:text>var currentComment = '</xsl:text>
    <xsl:apply-templates select="root/value" mode="escape" />
    <xsl:text>'&#xA;</xsl:text>

    <!-- Example with placing the escaped value in a variable first -->
    <xsl:variable name="escapedOther">
      <xsl:apply-templates select="root/otherValue" mode="escape" />
    </xsl:variable>
    <xsl:value-of select='concat("var otherComment = &apos;", $escapedOther, "&apos;")' />
  </xsl:template>

  <xsl:template match="@* | node()" mode="escape">
    <!-- Escape the apostrophes second -->
    <xsl:call-template name="replace">
      <xsl:with-param name="pTarget" select='"&apos;"' />
      <xsl:with-param name="pReplacement" select='"\&apos;"'/>
      <xsl:with-param name="pText">
        <!-- Escape the backslashes first, and then pass that result directly into the next template -->
        <xsl:call-template name="replace">
          <xsl:with-param name="pTarget" select="'\'" />
          <xsl:with-param name="pReplacement" select="'\\'" />
          <xsl:with-param name="pText" select="." />
        </xsl:call-template>
      </xsl:with-param>
    </xsl:call-template>
  </xsl:template>

  <xsl:template name="replace">
    <xsl:param name="pText"/>
    <xsl:param name="pTarget" select='"&apos;"'/>
    <xsl:param name="pReplacement" select="'\&quot;'"/>

    <xsl:if test="$pText">
      <xsl:value-of select='substring-before(concat($pText,$pTarget),$pTarget)'/>
      <xsl:if test='contains($pText, $pTarget)'>
        <xsl:value-of select='$pReplacement'/>
      </xsl:if>

      <xsl:call-template name="replace">
        <xsl:with-param name="pText" select='substring-after($pText, $pTarget)'/>
        <xsl:with-param name="pTarget" select="$pTarget"/>
        <xsl:with-param name="pReplacement" select="$pReplacement"/>
      </xsl:call-template>
    </xsl:if>
  </xsl:template>
</xsl:stylesheet> 
```

任何时候你需要逃避某些东西，你都可以使用`apply-templates`mode `escape`。对于此输入 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<root>
  <value>Let's test a string that refers to something like the C:\ drive's \Program Files Directory.</value>
  <otherValue>This value has a bunch of apostrophes '''' and backslashes \\\\ in it</otherValue>
</root> 
```

这会产生：

```
var currentComment = 'Let\'s test a string that refers to something like the C:\\ drive\'s \\Program Files Directory.'
var otherComment = 'This value has a bunch of apostrophes \'\'\'\' and backslashes \\\\\\\\' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-12T04:52:11.207

**这种转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:variable name="vSomething">Let's test a string.</xsl:variable>

 <xsl:template match="/">
  <xsl:text>var currentComment = '</xsl:text>
  <xsl:call-template name="replace">
   <xsl:with-param name="pText" select="$vSomething"/>
  </xsl:call-template>'
 </xsl:template>

 <xsl:template name="replace">
  <xsl:param name="pText"/>
  <xsl:param name="pTarget" select='"&apos;"'/>
  <xsl:param name="pReplacement" select='"\&apos;"'/>

  <xsl:if test="$pText">
   <xsl:value-of select='substring-before(concat($pText,$pTarget),$pTarget)'/>
   <xsl:if test='contains($pText, $pTarget)'>
     <xsl:value-of select="$pReplacement"/>
   </xsl:if>

   <xsl:call-template name="replace">
    <xsl:with-param name="pText" select='substring-after($pText, $pTarget)'/>
    <xsl:with-param name="pTarget" select="$pTarget"/>
    <xsl:with-param name="pReplacement" select="$pReplacement"/>
   </xsl:call-template>
  </xsl:if>
 </xsl:template>
</xsl:stylesheet> 
```

**当应用于任何 XML 文档（未使用）时，会产生所需的正确结果：**

```
var currentComment = 'Let\'s test a string.' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-29T13:54:53.067

这只是我为完成我的 xml 所做的 JLRische-Novachev 解决方案的一个实现。也许它可能有用：

```
<?xml version="1.0" encoding="utf-8"?>
<root>
  <value msg="1- Let's test a string that refers to something like the C:\ drive's \Program     Files Directory." num="1"/>
  <value msg="2- Let's test a string that refers to something like the C:\ drive's \Program Files Directory." num="2"/>  
</root> 
```

xsl:

```
 ...
 <xsl:template match="@* | node()" mode="escape">

    <!-- Escape the apostrophes second -->
    <xsl:call-template name="replace">
      <xsl:with-param name="pTarget" select='"&apos;"' />
      <xsl:with-param name="pReplacement" select='"\&apos;"'/>
      <xsl:with-param name="pText">
        <!-- Escape the backslashes first, and then pass that result directly into the next     template -->
        <xsl:call-template name="replace">
          <xsl:with-param name="pTarget" select="'\'" />
          <xsl:with-param name="pReplacement" select="'\\'" />
          <xsl:with-param name="pText" select="./@msg" />
        </xsl:call-template>
      </xsl:with-param>
    </xsl:call-template>

<xsl:text>, Number: </xsl:text><xsl:value-of select="./@num"/><xsl:text>&#xA;</xsl:text> 
```

```
... 
```

输出：

```
1- Let\'s test a string that refers to something like the C:\\ drive\'s \\Program Files Directory., Number: 1
2- Let\'s test a string that refers to something like the C:\\ drive\'s \\Program Files Directory., Number: 2 
```

# html - cmd.exe 的 CSS 字体系列

> ID：14287600
> 
> 赞同：3
> 
> 时间：2013-01-11T22:17:52.857
> 
> 标签：html, css, font-face, font-family

我在 CSS 中找不到任何字体系列，它类似于 CMD.exe 中使用的字体系列。请你帮助我好吗？

![控制台字体](../Images/870c99d5fe09833ee029ae1ce127d849.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T22:20:04.987

您可以使用

```
font-family:monospace 
```

指定您希望使用等宽字体。

控制台使用等宽字体来确保所有字符具有相同的宽度。

请注意，一些浏览器没有正确实现等宽，尽管有一些方法可以解决这个问题，例如

[http://code.stephenmorley.org/html-and-css/fixing-browsers-broken-monospace-font-handling/](http://code.stephenmorley.org/html-and-css/fixing-browsers-broken-monospace-font-handling/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T22:31:19.453

它是 CMD.exe 中类似位图字体的实现，所以如果你想尝试：

找到正确的位图文件（例如：[https](https://github.com/idispatch/raster-fonts) ://github.com/idispatch/raster-fonts ）

然后使用 HTML5 画布并像这样使用您的位图：

[http://html5.santo.fr/index.php?post/2011/02/03/Tutorial-8-%3A-Hello-Word-with-BitMap-Font](http://html5.santo.fr/index.php?post/2011/02/03/Tutorial-8-%3A-Hello-Word-with-BitMap-Font)

祝你好运 ;）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-20T23:37:23.430

默认情况下，CSS 不提供与命令提示符的光栅字体完全一样的字体。

可以在 dafont.com 上找到一些看起来相似的字体，但我发现的字体并不是真正的等宽字体（并且强制使用非等宽字体[真的很难](https://stackoverflow.com/questions/10149330/force-non-monospace-font-into-fixed-width-using-css)看）然后我找到了这个网站：

[https://int10h.org/oldschool-pc-fonts/fontlist](https://int10h.org/oldschool-pc-fonts/fontlist)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-11T22:20:03.710

[CSS3 支持 Lucida 控制台](http://www.css3.com/css-font-family/)。除此之外，我不知道你在说什么。

# ajax - Express.js : req.body 奇怪地堆积起来

> ID：14287601
> 
> 赞同：0
> 
> 时间：2013-01-11T22:17:52.683
> 
> 标签：ajax, node.js, express

**编辑 ：**

总结问题：当我第一次使用 ajax 发布内容时，它会设置 req.body 值，但该值永远不会重置，即使我再次加载页面（F5），或者如果我执行另一个 POST 请求：数据保持设置，并且保持相同的值并且永远不会再次更新（直到我重置服务器）

**原帖：**

我不擅长使用 Express.js。

我正在使用下面的代码执行一个非常基本的 AJAX 表单提交。

```
sites_edit: function(req, res)
{
    if (req.route.method == 'post')
    {
        //console.log('========== POST');
        var oSite = req.param('site');
        var SiteModel = models.Site;
        //console.log(oSite);
        //console.log(req.body);

        var pCallback = function()
        {
            oSite.owner = app.getOwner();
            new SiteModel(oSite).save(function(e)
            {
                //console.log('saved.');
                //console.log(e);
                var aRet = app.analyzeSave(e);
                if (aRet.success)
                    aRet.site = oSite;

                res.json(aRet);
            });
        };

        if (oSite.id)
        {
            models.Site.findById(oSite.id, function(err, oTmpSite)
            {
                if (err)
                    throw new Error(err);

                if (oTmpSite.owner != app.getOwner().id)
                    throw new Exception('bad owner');

                pCallback();
            });
        }
        else
            pCallback();

        return;
    }

    // Handling GET request here
    // (...)
} 
```

提交的数据如下：

```
site[id]:
site[name]:
site[address]:
site[postal_code]:
site[city]:
site[phone]:
site[email]: 
```

问题是，当我第一次发布表单时，我得到（生成的）缺失字段的错误。但是，如果我再次提交它，我只会在 Firebug 的网络监控中收到一个事件，但我会收到两个新的 node.js POST 调用，包括“标头已发送”错误。此外，req.body 中的数据会堆积起来。

我的意思是，我在控制台中得到以下输出：

```
Starting server in environment: local
Express app started on port 80
POST /configuration/site/enregistrer 200 9ms - 262
Error: Can't set headers after they are sent.
    at ServerResponse.OutgoingMessage.setHeader (http.js:645:11)
    at ServerResponse.res.setHeader (E:\nodejs\projects\arent\node_modules\express\node_modules\connect\lib\patch.js:59:22)
    at next (E:\nodejs\projects\arent\node_modules\express\node_modules\connect\lib\proto.js:153:13)
    at multipart (E:\nodejs\projects\arent\node_modules\express\node_modules\connect\lib\middleware\multipart.js:60:27)
    at module.exports (E:\nodejs\projects\arent\node_modules\express\node_modules\connect\lib\middleware\bodyParser.js:57:9)
    at IncomingMessage.module.exports (E:\nodejs\projects\arent\node_modules\express\node_modules\connect\lib\middleware\urlencode
d.js:68:11)
    at IncomingMessage.EventEmitter.emit (events.js:90:17)
    at IncomingMessage._emitEnd (http.js:366:10)
    at HTTPParser.parserOnMessageComplete [as onMessageComplete] (http.js:149:23)
    at Socket.socket.ondata (http.js:1704:22)
POST /configuration/site/enregistrer 200 10ms - 128
Error: Can't set headers after they are sent.
    at ServerResponse.OutgoingMessage.setHeader (http.js:645:11)
    at ServerResponse.res.setHeader (E:\nodejs\projects\arent\node_modules\express\node_modules\connect\lib\patch.js:59:22)
    at next (E:\nodejs\projects\arent\node_modules\express\node_modules\connect\lib\proto.js:153:13)
    at multipart (E:\nodejs\projects\arent\node_modules\express\node_modules\connect\lib\middleware\multipart.js:60:27)
    at module.exports (E:\nodejs\projects\arent\node_modules\express\node_modules\connect\lib\middleware\bodyParser.js:57:9)
    at IncomingMessage.module.exports (E:\nodejs\projects\arent\node_modules\express\node_modules\connect\lib\middleware\urlencode
d.js:68:11)
    at IncomingMessage.EventEmitter.emit (events.js:90:17)
    at IncomingMessage._emitEnd (http.js:366:10)
    at HTTPParser.parserOnMessageComplete [as onMessageComplete] (http.js:149:23)
    at Socket.socket.ondata (http.js:1704:22)
POST /configuration/site/enregistrer 200 7ms - 128 
```

如果我调试 req.body 值，我得到：

```
// First AJAX submit
{ site:
   { id: '',
     name: '',
     address: '',
     postal_code: '',
     city: '',
     phone: '',
     email: '' } }
// Second AJAX submit
{ site:
   { id: '',
     name: [ '', '' ],
     address: [ '', '' ],
     postal_code: [ '', '' ],
     city: [ '', '' ],
     phone: [ '', '' ],
     email: [ 'site[id]=', '' ] } }
// And another POST request is (strangely) handled by Express.js during the 2nd AJAX submit, which leads to third dump of the (apparently updated) variable
{ site:
   { id: '',
     name: [ '', '', '' ],
     address: [ '', '', '' ],
     postal_code: [ '', '', '' ],
     city: [ '', '', '' ],
     phone: [ '', '', '' ],
     email: [ 'site[id]=', 'site[id]=', '' ] } } 
```

说真的，这里到底发生了什么？这甚至有可能吗？

非常感谢您的任何帮助！

**编辑：**

如果我在提交一次表单后刷新页面，我会收到数十个“标头已发送”错误，分布在不同的 HTTP 请求中（用于获取静态 js/css 文件）。

如下错误：

```
Error: Can't set headers after they are sent.
    at ServerResponse.OutgoingMessage.setHeader (http.js:645:11)
    at ServerResponse.res.setHeader (E:\nodejs\projects\arent\node_modules\express\node_modules\connect\lib\patch.js:59:22)
    at next (E:\nodejs\projects\arent\node_modules\express\node_modules\connect\lib\proto.js:153:13)
    at multipart (E:\nodejs\projects\arent\node_modules\express\node_modules\connect\lib\middleware\multipart.js:60:27)
    at module.exports (E:\nodejs\projects\arent\node_modules\express\node_modules\connect\lib\middleware\bodyParser.js:57:9)
    at IncomingMessage.module.exports (E:\nodejs\projects\arent\node_modules\express\node_modules\connect\lib\middleware\urlencode
d.js:68:11)
    at IncomingMessage.EventEmitter.emit (events.js:123:20)
    at Object.resume (E:\nodejs\projects\arent\node_modules\express\node_modules\connect\node_modules\pause\index.js:25:18)
    at resume (E:\nodejs\projects\arent\node_modules\express\node_modules\connect\lib\middleware\static.js:61:13)
    at SendStream.error (E:\nodejs\projects\arent\node_modules\express\node_modules\connect\lib\middleware\static.js:73:37) 
```

如果我在 AJAX 提交之前刷新页面，我永远不会收到这些错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T23:34:46.750

对不起，但解决方案并不明显。

但是您的 expressjs 代码很奇怪：我的方法处理通常类似于：

```
app.post('/enregistrer/:site', function (req, res) {
  ...
} 
```

这样我就不必测试`req.route.method`.

错误消息`Can't set headers after they are sent.`表明您没有结束响应，并且下一个响应是相同的。

但是，您使用`res.json`, 应该表现得像`res.send`. 因此，应该发送响应。

或者，您在响应代码中使用`res.send`ou`res.json`两次，然后第二次再次发送标头？

# xml - 从 XML 名称/值架构中提取值并在结果中显示为列

> ID：14287602
> 
> 赞同：1
> 
> 时间：2013-01-11T22:18:01.673
> 
> 标签：xml, sql-server-2008, xpath, xquery, sql-server-2012

鉴于我将这样的信息存储在 XML 列中，其架构如下所示 -

```
<root>
  <Setting>
     <Name>BookingDate</Name>
     <Value>01 Jan 2013</Value>
  </Setting>
  <Setting>
     <Name>Price</Name>
     <Value>23.66</Value>
  </Setting>
</root> 
```

我可以编写一个查询，将“名称”提取为列，将“设置”提取为行值，这样它们看起来就好像我对该行做了一个简单的选择，即

```
行ID | 正常列1 | 正常列2 | 预订日期 | 价格
-------------------------------------------------- ------------
 1 | X | 是 | 2013 年 1 月 1 日 | 23.66

```

我可以做一个静态查询，但是当项目被添加到 XML 中时，我如何编写一个返回更多结果的查询？我想把它放在一个带有 Select * 的视图中，这样当人们向 XML 添加更多信息时，更多的结果将从视图上的查询中显示出来。

然后我可以索引这个模式，甚至可以到达输入的点。目的是存储未知的信息。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T18:01:30.617

您需要动态构建查询以获得动态数量的列，并确定需要解析 XML 的每个节点的列，如果表中有相当数量的行，这在服务器上可能会很困难.

我建议您有一个`Setting`包含有效设置名称的表，并在触发器中将该表更新为该`Settings`表。

要获得反映您拥有的设置的视图，您可以在表上添加一个触发器`Setting`来动态更新视图。

[SQL小提琴](http://sqlfiddle.com/#!3/184b3/3)

**MS SQL Server 2008 架构设置**：

```
create table Settings
(
  RowID int identity primary key,
  Settings xml
) 

go

create table Setting
(
  Name varchar(20) primary key
)

go

create view v_Settings as 
select RowID 
from Settings

go

create trigger tr_Settings on Settings for insert, update as
with C(Name) as
(
  select distinct T.N.value('text()[1]', 'nvarchar(20)') 
  from inserted as I
    cross apply I.Settings.nodes('/root/Setting/Name') as T(N)
)
insert into Setting(Name)
select Name
from C
where C.Name not in (select Name from Setting) 

go

create trigger tr_Setting on Setting for insert as
declare @SQL nvarchar(max)
set @SQL = 'alter view v_Settings as ' + 
           'select S.RowID'+
           (
           select ',S.Settings.value(''(root/Setting[Name="' + 
                  S.Name + 
                  '"]/Value/text())[1]'', ''varchar(max)'') as '+
                  quotename(S.Name)
           from Setting as S
           for xml path(''), type
           ).value('text()[1]', 'nvarchar(max)')+
           ' from Settings as S'

exec (@SQL) 
```

**查询 1**：

```
insert into Settings values
('<root>
  <Setting>
     <Name>BookingDate</Name>
     <Value>01 Jan 2013</Value>
  </Setting>
  <Setting>
     <Name>Price</Name>
     <Value>23.66</Value>
  </Setting>
</root>')

select *
from v_Settings 
```

**[结果](http://sqlfiddle.com/#!3/184b3/3/1)**：

```
| ROWID | BOOKINGDATE | PRICE |
-------------------------------
|     5 | 01 Jan 2013 | 23.66 | 
```

**查询 2**：

```
insert into Settings values
('<root>
  <Setting>
     <Name>BookingDate</Name>
     <Value>02 Jan 2013</Value>
  </Setting>
  <Setting>
     <Name>PriceX</Name>
     <Value>24.66</Value>
  </Setting>
</root>')

select *
from v_Settings 
```

**[结果](http://sqlfiddle.com/#!3/184b3/3/3)**：

```
| ROWID | BOOKINGDATE |  PRICE | PRICEX |
-----------------------------------------
|     5 | 01 Jan 2013 |  23.66 | (null) |
|     6 | 02 Jan 2013 | (null) |  24.66 | 
```

**更新：**

从上面的评论看来，您已经有一个表格来记录所有可能的设置名称。如果是这种情况，您不需要在`Settings`. `Setting`如果您只是确保在更新 table 后重建视图，您实际上不需要触发器`Setting`。

# matlab - 重新排序核矩阵

> ID：14287605
> 
> 赞同：0
> 
> 时间：2013-01-11T22:18:06.570
> 
> 标签：matlab, linear-algebra

我有一个 mxm 核矩阵 K，为了简单起见，一个线性核计算为 pdist2(X,X)，其中 X 是 mxn，m 维与具有 n 维的特征向量相关。

由于 n 很大，我通过预先计算所有 X 的 K 来节省计算时间。

稍后，我需要交换 X 中的两个特性，比如 X_1 和 X_5。

我可以以某种方式重新排列 K，而不必重新计算整个矩阵吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T02:51:55.087

如果`pv`是你的置换向量和`J0=pdist2(X,X)`，那么

```
Y=X(pv,:); J1=pdist2(Y,Y); 
```

应该给你同样的答案

```
J1=J0(pv,pv); 
```

如果您正在排列列（我无法从您的问题中完全看出），那么它似乎`J1`并且`J0`应该是相等的......

# mysql - 使用 JOIN 和 UNION 组合来自不同表的记录

> ID：14287609
> 
> 赞同：3
> 
> 时间：2013-01-11T22:18:14.297
> 
> 标签：mysql

我需要创建一个查询来组合来自两个表的数据，我认为可能是 JOIN 和 UNION 的组合。

在这个例子中，我需要列出所有状态为活动的名字，只列出一次，他们的葡萄酒、苏打水、晚餐、甜点和水果偏好组合，按名字排序。

我不确定单独的 JOIN 是否有效，因为名称并不总是在两个表中，并且 UNION 很棘手，因为它们没有相同的列。我尝试使用空值来使 UNION 工作，但这给了我每个名称的重复行，而不是每个名称将它们分组为一行。

```
DRINK
====================================
name         status   wine    soda
----------   ------   ------  ------
John Smith   active   red     cola
Mary Jones   active   white   lemonade
Tom Brown    old      red     fanta
Judy White   active   red     dr pepper
Sam Wing     old      red     cola

FOOD
=============================================
name         status   dinner  dessert  fruit
----------   ------   ------  ------   ------
John Smith   active   steak   muffin   apple
Mary Jones   active   fish    cake     kiwi
Walter Yu    active   pasta   cake     banana
Jim Adams    old      steak   candy    apple
Adam Sheers  active   pasta   candy    grapes 
```

我需要查询来生成这样的结果 -

```
RESULT
==================================================================  
name         status    wine     soda       dinner  dessert  fruit
----------   ------    ------   ------     ------  ------   ------
Adam Sheers  active    -        -          pasta   candy    grapes
John Smith   active    red      cola       steak   muffin   apple
Judy White   active    red      dr pepper  -       -        -
Mary Jones   active    white    lemonade   fish    cake     kiwi
Walter Yu    active    -        -          pasta   cake     banana 
```

非常感谢您对此的任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T22:20:10.180

这应该有效：

```
SELECT names.name, drink.wine, drink.soda, food.dinner, food.dessert, food.fruit
FROM
    (SELECT name FROM food WHERE status = 'active'
    UNION
    SELECT name FROM drink WHERE status = 'active') names
LEFT JOIN drink ON drink.name = names.name
LEFT JOIN food ON food.name = names.name 
```

**结果**

```
| 姓名 | 葡萄酒 | 苏打水 | 晚餐 | 甜点 | 水果 |
-------------------------------------------------- --------------
| 约翰·史密斯 | 红色 | 可乐 | 牛排| 松饼 | 苹果| 高分辨率照片| CLIPARTO
| 玛丽琼斯 | 白色 | 柠檬水| 鱼| 高分辨率照片| CLIPARTO 蛋糕| 猕猴桃 |
| 余华 | (空) | (空) | 意大利面| 蛋糕| 香蕉| 高分辨率照片| CLIPARTO
| 亚当·希尔斯 | (空) | (空) | 意大利面| 糖果| 葡萄|
| 朱迪·怀特 | 红色 | 胡椒博士 | (空) | (空) | (空) |
```

## [看到它在行动](http://sqlfiddle.com/#!2/f6131/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T22:27:57.083

```
SELECT name, status, MAX(wine) wine, MAX(soda) soda, MAX(dinner) dinner, MAX(dessert) dessert, MAX(fruit) fruit
FROM
  (
    SELECT name, status, wine, soda, NULL dinner, NULL dessert, NULL  fruit
    FROM DRINK WHERE status = 'active'
    UNION ALL
    SELECT name, status, NULL wine, NULL soda, dinner, dessert, fruit
    FROM FOOD WHERE status = 'active'
  ) R
  GROUP BY name, status 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T22:20:15.127

```
select * 
from food f 
left join drink d on f.name = d.name 
where d.status = 'active' and f.status = 'active' 
```

# c# - 在 asp.net 站点中带有是/否的 js 脚本

> ID：14287614
> 
> 赞同：-1
> 
> 时间：2013-01-11T22:18:34.540
> 
> 标签：c#, javascript

我的 asp.net 网站上有一个按钮，它通过`OnClientClick`设置为`potwierdzenie()`. 剧本：

```
<script type="text/javascript"> 
    function potwierdzenie() 
    {
        var answer = confirm("Do you want to delete it")
        if (answer)
            ???
        else
            ???
    }
</script> 
```

我想要做的就是根据用户点击的内容（是或取消）在 c# 中做一些工作（从 mysql db 中删除一些东西）。我怎样才能做到这一点？如何在此脚本中执行 c# 代码，或者如何以其他最简单的方式执行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T22:23:27.440

只需从此回调中返回 true 或 false：

```
<script type="text/javascript"> 
    function potwierdzenie() {
        return confirm("Do you want to delete it")
</script> 
```

现在，如果用户选择 Yes，则将返回 true。如果返回 true，ASP.NET 将执行您订阅的 OnClick 服务器端回调并执行实际操作：

```
protected void BtnDelete_Click(object sender, EventArgs e)
{
    // perform the actual delete here
} 
```

如果用户选择否，则返回 false，并且永远不会调用服务器端回调。

尽管在您的 OnClientClick 订阅中执行以下操作很重要：

```
OnClientClick="return potwierdzenie()" 
```

这是您的链接可能看起来如何的完整示例：

```
<asp:Button 
    ID="btnDelete" 
    runat="server" 
    OnClientClick="return potwierdzenie()" 
    OnClick="BtnDelete_Click" 
    Text="Delete record"
/> 
```

# node.js - 猫鼬改变模式格式

> ID：14287617
> 
> 赞同：35
> 
> 时间：2013-01-11T22:19:27.800
> 
> 标签：node.js, mongodb, mongoose

我们正在快速开发一个使用 Mongoose 的应用程序，并且我们的架构经常变化。我似乎无法弄清楚为现有文档更新架构的正确方法，而不是将它们吹走并从头开始完全重新创建它们。

我遇到了[http://mongoosejs.com/docs/api.html#schema_Schema-add](http://mongoosejs.com/docs/api.html#schema_Schema-add)，看起来是对的。关于如何实际实现这一点的文档很少甚至没有，这对于刚接触 MongoDB 的人来说非常困难。

我只是想添加一个名为启用的新字段。我的架构定义是：

```
var sweepstakesSchema = new Schema({
    client_id: {
        type: Schema.Types.ObjectId,
        ref: 'Client',
        index: true
    },
    name: {
        type: String,
        default: 'Sweepstakes',
    },
    design: {
        images: {
            type: [],
            default: []
        },
        elements: {
            type: [],
            default: []
        }
    },
    enabled: {
        type: Boolean,
        default: false
    },
    schedule: {
        start: {
            type: Date, 
            default: Date.now
        },
        end: {
            type: Date,
            default: Date.now
        }
    },
    submissions: {
        type: Number,
        default: 0
    }
}); 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2016-05-16T10:36:07.417

考虑到您的 Mongoose 模型名称为`sweepstakesModel`，此代码会将`enabled`具有布尔值的字段添加`false`到您的集合中的所有预先存在的文档中：

```
db.sweepstakesModel.find( { enabled : { $exists : false } } ).forEach(
    function (doc) {
        doc.enabled = false;
        db.sweepstakesModel.save(doc);
    }
) 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-01-11T23:23:38.800

Mongoose 没有内置任何关于迁移现有文档以符合模式更改的内容。您需要根据需要在自己的代码中执行此操作。在像新`enabled`字段这样的情况下，编写代码可能是最干净的，以便它将丢失的`enabled`字段视为已设置为，`false`这样您就不必接触现有的文档。

就架构本身的更改而言，您只需更新您的`Schema`定义，如您所展示的那样，但是像带有`default`值的新字段这样的更改只会影响未来的新文档。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-12-02T14:54:56.833

我也在寻找类似迁移的东西，但没有找到。作为替代方案，您可以使用默认值。如果一个键有默认值并且该键不存在，它将使用默认值。

[猫鼬默认值](http://mongoosejs.com/docs/2.7.x/docs/defaults.html)

> 构建文档框架时应用默认值。这意味着如果您创建一个新文档 (new MyModel) 或如果您找到一个现有文档 (MyModel.findById)，如果缺少某个键，两者都将具有默认值。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-05-29T14:03:53.913

我遇到了完全相同的问题，发现使用`findOneAndUpdate()`而不是调用`save`允许我们更新架构文件，而无需先删除所有旧文档。

如果需要，我可以发布代码片段。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-04-27T23:57:01.593

您可以使用 mongo shell 更新特定集合中的现有文档

```
db.SweeptakesModel.update({}, {$set: {"enabled": false}}, {upsert:false, multi:true}) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-06-17T02:39:56.680

在使用 Node 构建应用程序时，我有一个类似的要求，必须添加到现有模式中，并且只发现这个（很久以前发布的）查询有帮助。

我通过在架构的原始描述中引入该行然后运行类似于以下行的内容（仅一次）来更新现有记录，从而添加到该架构：

```
myModelObject.updateMany( { enabled : { $exists : false } }, { enabled : false } ) 
```

'updateMany' 是我想在这里提到的功能。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-02-27T10:13:56.697

只是除了 Vickar 的建议之外，这里是用 Javascript (Nodejs) 编写的 Mongoose 示例：

```
const mongoose = require('mongoose');
const SweeptakesModel = mongoose.model(Constants.SWEEPTAKES,sweepstakesSchema);
SweeptakesModel.find( { enabled : { $exists : false } }).then(
function(doc){
       doc.enabled = false;
       doc.save();
    }
) 
```

# jquery - 悬停后如何使鼠标“留下痕迹”？

> ID：14287619
> 
> 赞同：-1
> 
> 时间：2013-01-11T22:19:49.973
> 
> 标签：jquery, colors, bind, mouseover, live

嗨，谁愿意帮助:)

我正在尝试编写一些我在网站上看到的示例，因为即使他们提供了代码，我也无法使其工作。

这是我从中获取示例的链接：

[http://coding.smashingmagazine.com/2012/05/31/50-jquery-function-demos-for-aspiring-web-developers/](http://coding.smashingmagazine.com/2012/05/31/50-jquery-function-demos-for-aspiring-web-developers/)

向下滚动到“Bind() Unbind()”部分。这是橙色和紫色方块的第二个示例。我想知道如何获得改变颜色的效果，然后保持改变，如果鼠标第二次越过方块，再改变。

*我不需要双击效果，只是颜色变化。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T22:23:30.970

div 元素的基本 CSS 是橙色的。

在鼠标悬停时，它会切换一个名为的 CSS 类`purplebg`，添加时将其变为紫色，并在再次触发鼠标悬停时恢复为橙色。差不多就是这样。

```
}).live('mouseover', function(e) {
  $(this).toggleClass('purplebg');
}); 
```

这是一个简单的[jsFiddle 示例](http://jsfiddle.net/SsDaG/1/)

# java - 实现前缀模式

> ID：14287624
> 
> 赞同：0
> 
> 时间：2013-01-11T22:20:04.930
> 
> 标签：java, tcp

我正在开发一个服务器-客户端应用程序。服务器用 Java (PC) 完成，客户端用 Java 完成。（安卓）

我在以下实现中遇到问题：

> 服务器抓取位图 -> 原始字节 -> TCP -> 客户端（异步流

现在字节数组在客户端以多个不同长度的数据包传递。所以要正确处理这个问题，我应该使用前缀方法。

> 要使用前缀模式，您需要将消息的长度（以字节为单位）发送为四个字节，然后发送消息

我的代码

```
public void sendScreenshot(byte[] buffer) throws IOException {
    OutputStream os = socket.getOutputStream();
    os.write(buffer.length + 1);
    os.write((byte) 0);
    os.write(buffer, 0, buffer.length);
    os.flush();
} 
```

在 VB.net 中，这是通过以下代码实现的：

```
Private Sub dat(ByVal dat As String)
    Dim nstream As NetworkStream = sock.GetStream()
    Dim bit As Byte() = System.Text.Encoding.UTF8.GetBytes(dat)
    Dim bw As New BinaryWriter(sock.GetStream())
    bw.Write(bit.Length + 1)
    bw.Write((byte)command)
    bw.Write(bit, 0, bit.length)

End Sub 
```

欢迎在 Java 中实现它的任何帮助？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T22:23:32.953

使用[`DataOutputStream`](http://docs.oracle.com/javase/7/docs/api/java/io/DataOutputStream.html)：

```
DataOutputStream out = new DataOutputStream(os);
out.writeInt(buffer.length + 1);
// This writes a single byte
out.write(0);
out.write(buffer);
out.flush(); 
```

这里`.writeInt()`来自您引用的文本的这一部分：

> 您需要将消息的长度（以字节为单位）作为四个字节发送

这意味着一个`int`. 请注意，这将按网络顺序写入 int。虽然这在您的摘录中未指定，但我想这是预期的。

同样，在接收端，您可以使用 a [`DataInputStream`](http://docs.oracle.com/javase/7/docs/api/java/io/DataInputStream.html)，将长度作为 int 读取，然后读取有效负载。

# java - 运行 JFlex 生成的词法分析器时出现 Java 错误

> ID：14287636
> 
> 赞同：1
> 
> 时间：2013-01-11T22:21:26.820
> 
> 标签：java, debugging, parsing, compiler-construction, jflex

我有这个基本的 JFlex 词法分析器：

```
import java.util.*;
%%

%public
%class TuringLexer
%type Void

%init{
yybegin(YYINITIAL);
%init}

%state COMM, GETALPH, MT, PARSELOOP, PARSELEMS, PARSESYMB, PARSEMT
%{
  ArrayList<Character> alf = new ArrayList<Character>();   
  String crtMach;
  String crtLoop;
  String crtLoopContent;
  String crtLoopContentParam;
  String crtContent;
  String crtSymb;
%}

//Input = [^\r\n]
SEP = [:space:]*
//COMM =[;.*$] 
name = [A-Za-z_]*
tok=[A-Za-z0-9#$@\*]
AL = "alphabet :: "
cont = [^]]*
param =[^)]*
letter = [A-Za-z]
opn = [\[?]
symb = [^\}]+
%%
 <COMM> {
  "."  { /* ignore */  System.out.println("Got into comm state ");}
  "\n" {System.out.println("Got out of comm state ");yybegin(YYINITIAL);}
}
 <GETALPH> {
 {SEP} { /* ignore */ }
 {tok} { String str = yytext();
     System.out.println("Alphabet -- " + str);
     Character c = str.charAt(0);
     alf.add(c); }
 ";"  {yybegin(YYINITIAL);}

}
 <YYINITIAL> {
 "\n"   { /* ignore */ System.out.println("Got into YYINITIAL"); }
 ";"  { yybegin(COMM); }

[^]                    { throw new Error("Illegal character <"+yytext()+">"); }
} 
```

为了清楚起见，代码已被删除，但问题仍然存在，因此在这里更容易识别。

这是输入文件 -> 文件名为[simple.mt](http://pastebin.com/Tp8NzqFL)

这是主要课程：

```
import java.io.FileNotFoundException;
import java.io.IOException;
import java.io.Reader;
import java.io.BufferedReader;
import java.io.FileReader;
public class MainClass  {
public static void main(String args[]) throws IOException {
    Reader reader = new BufferedReader(new FileReader ("simple.mt"));
    reader.read();
    TuringLexer tl = new TuringLexer(reader);
    tl.yylex();
}
} 
```

当我在 Eclipse（或终端，就此而言）运行项目时，我得到：

```
Exception in thread "main" java.lang.Error: Illegal character <l>
    at TuringLexer.yylex(TuringLexer.java:576)
    at MainClass.main(MainClass.java:11) 
```

我不知道错误意味着什么以及如何调试它，jflex 文件中剩下的只是一个小样本，所以错误应该不难弄清楚

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T23:17:28.193

因此，您的输入中出现了一个您不知道如何处理的字符。

所有 lex 文件都应该有一个最终的 . 规则，要么*打印*“非法字符”*错误消息*（不是抛出的异常），要么只返回`yytext[0]`解析器以供解析器处理。

后一种策略还使您不必为每个特殊字符编写规则，例如 =、+ 等：解析器应该将它们用作`'='`、`'+'`等。然后 (a) 任何非法字符都会变成语法错误，但更重要的是（b）解析器可以使用它的错误恢复，而不是仅仅把令牌扔掉。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T04:52:25.760

您要么没有显示所有语法，要么语法不完整。

```
Exception in thread "main" java.lang.Error: Illegal character <l> 
```

此消息告诉您不处理`loop`关键字。

# python - 添加从for循环返回的所有整数？

> ID：14287637
> 
> 赞同：-2
> 
> 时间：2013-01-11T22:21:34.937
> 
> 标签：python

我刚刚开始使用 python，我正在编写一个脚本来返回一堆链接的点击次数。我正在使用 for 循环遍历所有链接并返回每个链接的点击次数：

```
for url in short_urls:
    query_params = {
         'access_token': ACCESS_TOKEN,
         'link': url.values()}

    endpoint = ENDPOINT
    response = requests.get(endpoint, params = query_params)

    data = json.loads(response.content)

    print "link_clicks:" + " " + str(data['data']['link_clicks']) 
```

返回到终端的结果如下所示：

```
link_clicks: 938
link_clicks: 63
link_clicks: 3921
link_clicks: 47
link_clicks: 21 
```

将所有这些数字相加并返回总数的最佳方法是什么？理想情况下，我希望能够在终端中将总数打印为“total link_clicks: (total)”。

**编辑：**

谢谢大家的回答。我想我的头脑中的解决方案过于复杂，出于某种原因，我认为它需要创建一个列表，必须将 for 循环中的每个新整数添加到该列表中，然后通过索引单独添加该新列表的每个元素以获取总数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T22:24:09.923

你并没有真正“返回”任何东西。您只是将文本打印到控制台。

如果要返回一个值，则需要使用`return`语句：

```
values = []

for url in short_urls:
    ...

    values.append(number)

return values 
```

或者你可以`yield`用来制作一个生成器：

```
for url in short_urls:
    ...

    yield number 
```

两者都可以使用函数进行总结`sum`：

```
total = sum(your_function()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T22:23:55.620

您用于`sum()`添加列表中的元素。

```
nums = []

for url in short_urls:
    query_params = {
         'access_token': ACCESS_TOKEN,
         'link': url.values()}

    endpoint = "https://api-ssl.bitly.com/v3/link/clicks"
    response = requests.get(endpoint, params = query_params)

    data = json.loads(response.content)

    print "link_clicks:" + " " + str(data['data']['link_clicks'])
    nums.append(data['data']['link_clicks'])

print 'total link_clicks:', sum(nums) 
```

或者只是将它们添加到变量中..

```
total_links_clicks = 0

for url in short_urls:
    query_params = {
         'access_token': ACCESS_TOKEN,
         'link': url.values()}

    endpoint = "https://api-ssl.bitly.com/v3/link/clicks"
    response = requests.get(endpoint, params = query_params)

    data = json.loads(response.content)

    print "link_clicks:" + " " + str(data['data']['link_clicks'])
    total_links_clicks += data['data']['link_clicks']

print 'total link_clicks:', total_links_clicks 
```

# z3 - 对 Z3 表达式的集合操作

> ID：14287638
> 
> 赞同：1
> 
> 时间：2013-01-11T22:21:36.403
> 
> 标签：z3

是否有定义集合操作的函数，例如 `set, intersection, union, members`等，超过 Z3 表达式？此外，是否有功能可以检查公式是 a`cnf`还是`dnf`？

如果没有，我可以尝试在 z3utils 文件中实现它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T17:41:34.710

我们可以使用 Python 集来编码表达式集。唯一的问题是`__eq__`Z3Py 表达式的运算符将构建一个新表达式，而不是比较表达式是否相等。为了解决这个问题，我们可以使用调用正确的比较 Z3 表达式的包装器。这是一个示例（可在[rise4fun](http://rise4fun.com/Z3Py/QYGf)在线获得）。

```
class AstRefKey:
    def __init__(self, n):
        self.n = n
    def __hash__(self):
        return self.n.hash()
    def __eq__(self, other):
        return self.n.eq(other.n)
    def __repr__(self):
        return str(self.n)

def askey(n):
    assert isinstance(n, AstRef)
    return AstRefKey(n)

x = Int('x')
s = set()
s.add(askey(x+1))
s.add(askey(x))
print s
print askey(x + 1) in s
s2 = set()
s2.add(askey(x+2))
s2.add(askey(x))
print s2
print s.union(s2) 
```

唯一的不便是我们必须继续使用`askey`. 我们可以通过定义一个`ASTSet`包装 Python对象并为我们`set`调用的类来避免这种不便。`askey`

关于`dnf`和`cnf`识别器。此功能未在外部 API 中公开。

# time - 如何测量 ISR 执行时间？

> ID：14287639
> 
> 赞同：1
> 
> 时间：2013-01-11T22:21:45.030
> 
> 标签：time, linux-device-driver, interrupt, isr

我在 linux 内核 2.6.32 上。我面临一个问题，其中两个 ISR（串行和以太网）之一在几次/在我不知道的某些情况下需要更多时间（数百微秒）。我想每次执行 ISR 时都获得时间差。

什么是最好的方法（就所涉及的开销而言最便宜）。我没有看到 ARM 架构有一些 TSC 寄存器（read_tsc api），它可以让我直接访问时间，因为它在其他架构上提供。

所以想法是1）调用ISR的那一刻测量时间2）ISR完成的那一刻测量时间。3）获得1和2的差异将其存储在某个变量中。4) 继续执行步骤 1 到 2，当步骤 3 中收到的值大于过去的值时，将其覆盖（保持/保留最大延迟的值）。当问题发生时（一些突然的条件打印值）或最后 10 个值的数组）。

我需要在内核驱动程序中做，所以让我知道什么是最便宜的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T01:19:49.157

OMAP3 具有 Cortex-A8 内核。那确实有性能监视器单元（PMU）。Cycle Count (CCNT) 将对应于 x86 TSC，除非您可能必须在阅读之前启用它计数。[BeagleBoard 帖子](https://groups.google.com/forum/?fromgroups=#!topic/beagleboard/4VUJyOJx2r8)中的好信息。

在 2.6.32.55 中，我看到 arch/arm/oprofile/op_model_v7.c 提供了完全访问和控制。我的需求是裸机，我使用了简单且适合我的[ARM 示例代码。](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.faqs/ka4237.html)

也可以使用 OMAP3 GPT，但这会做更多的工作，例如从 PRCM 设置其时钟输入。

# sublimetext2 - Sublime Text 2：如何让Sublime默认打开文件时运行命令（折叠代码）？

> ID：14287640
> 
> 赞同：14
> 
> 时间：2013-01-11T22:21:50.617
> 
> 标签：sublimetext2, sublimetext

我想这样当我在 Sublime 中打开一个文件时，它会自动执行“Fold Level 2”编码，这是命令快捷方式 Ctrl-K、Ctrl-2（或 CMD-K、CMD-2）。我同时使用mac和pc。

我不想每次都输入该快捷方式，而是希望 Sublime 在打开文件时自动运行该快捷方式。请让我知道是否有办法做到这一点。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-12T08:43:27.113

我认为解决您问题的最佳方法是[Buffer Scroll](https://github.com/SublimeText/BufferScroll)插件。它可以记住并恢复很多东西，包括折叠。

如果您不想安装该插件，可以创建自己的：

1.  创建新插件`Tools / New Plugin...`
2.  插入代码

```
import sublime, sublime_plugin

class Folding(sublime_plugin.EventListener):
    def on_load(self, view):
        view.run_command("fold_by_level", {"level": 2}) 
```

1.  `User`使用您喜欢的文件名将其保存在您的目录中。

对于您打开的每个文件，这会将折叠级别设置为 2。

# c# - Azure Blob 存储 - MVC Web 应用程序 - 有没有办法直接上传到 Azure Blob 存储而不通过 MVC Web 应用程序？

> ID：14287641
> 
> 赞同：2
> 
> 时间：2013-01-11T22:21:56.450
> 
> 标签：c#, azure, storage, blob

有没有办法让 MVC Web 应用程序的用户避免必须通过 MVC 应用程序上传文件并最终让应用程序将其传输到存储？

换句话说，是否可以为 Web 客户端提供正确的 SAS 令牌以将其直接上传到 Azure Blob 存储中的正确位置？

我已经看到客户端应用程序直接复制到 Blob 存储的示例，但在 Web 应用程序上找不到任何内容。谢谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T05:58:54.453

目前这是不可能的，因为 Windows Azure 存储不支持 CORS。然而，在 \Build 会议存储团队的一次演讲中表示它即将到来。实现此目的的一种方法是仅按照@viperguyz 的链接中提到的那样在该存储帐户中托管用于上传的 HTML 页面，并使用 SAS 在该存储帐户中上传 blob。如果需要，您可以将自定义域映射到您的 Blob 存储帐户并使用该域名。自定义域名的问题是您将无法使用 SSL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-16T09:34:20.530

您可以从客户端上传，而无需使用 JavaScript 接触 MVC 站点，我写了一篇博客文章，其中包含有关如何执行此操作的示例 [http://blog.dynabyte.se/2013/10/09/uploading-directly-to- windows-azure-blob-storage-from-javascript/](http://blog.dynabyte.se/2013/10/09/uploading-directly-to-windows-azure-blob-storage-from-javascript/)[代码位于](https://github.com/MartinWa/BlobUploader) GitHub

它基于[Gaurav Mantris 示例](http://gauravmantri.com/2013/02/16/uploading-large-files-in-windows-azure-blob-storage-using-shared-access-signature-html-and-javascript/)，并通过在 Blob 存储本身上托管 JavaScript 来工作。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-11T22:38:31.123

当然 - 这是一个例子：

```
using Microsoft.WindowsAzure;
using Microsoft.WindowsAzure.StorageClient;

    private string UploadFileToBlob(string file)
    {
        // Retrieve storage account from connection string
        CloudStorageAccount storageAccount = CloudStorageAccount.Parse(CloudConfigurationManager.GetSetting("StorageConnectionString"));

        // Create the blob client
        CloudBlobClient blobClient = storageAccount.CreateCloudBlobClient();

        // Retrieve reference to a previously created container
        CloudBlobContainer container = blobClient.GetContainerReference("mydeployments");

        // Retrieve reference to a blob named "myblob"
        var date = DateTime.UtcNow.ToString("yyyyMMdd-hhmmss-");
        var fileinfo = new FileInfo(file);
        if (fileinfo.Exists)
        {
            var fileToUpload = new FileInfo(file).Name;
            var filename = date + fileToUpload;
            try
            {
                CloudBlob blob = container.GetBlobReference(filename);

                // Create or overwrite the "myblob" blob with contents from a local file
                using (var fileStream = System.IO.File.OpenRead(file))
                {
                    blob.UploadFromStream(fileStream);
                }

                return blob.Uri.AbsoluteUri;
            }
            catch (Exception ex)
            {
                LogError("Error uploading file to blog: ", ex.Message);
                return "";
            }
        }

        LogError("Error - specified file does not exist: ", file);
        return "";
    } 
```

# javascript - 如何在 TexBoxFor 中放置掩码日期和时间？

> ID：14287642
> 
> 赞同：0
> 
> 时间：2013-01-11T22:22:00.410
> 
> 标签：javascript, asp.net-mvc, jquery-ui, asp.net-mvc-4

我正在使用带有视图引擎 Razor 的 ASP.Net MVC4。我喜欢将掩码日期和时间放在 TexBoxFor 我为 nugget jquery.maskedinput-1.3.min.js 安装并添加到视图中

```
(document).ready(function () {
        $("#FechaDen").mask("99/99/9999");
        $("#HoraDen").mask("99:99:99");
    }); 
```

但是我有这个错误： Uncaught TypeError: Object [object Object] has no method 'mask' 我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T22:35:32.417

您似乎忘记`jquery.maskedinput`在您的页面中引用该插件：

```
<script type="text/javascript" src="@Url.Content("~/scripts/jquery.maskedinput-1.3.min.js")"></script> 
```

确保路径正确并且插件实际上位于此文件夹中。使用 javascript 调试工具（如 FireBug）的网络选项卡，确保您的脚本引用没有 404 错误。

还要确保你在jQuery**之后添加了这个脚本包含。**请注意，因为在 ASP.NET MVC 4 Internet 项目模板中，该`~/Views/Shared/_Layout.cshtml`文件将 jquery 呈现为 DOM 末尾的包：

```
 @Scripts.Render("~/bundles/jquery")
    @RenderSection("scripts", required: false)
</body> 
```

因此，如果您将此引用放在您的视图中，请确保这发生在该`scripts`部分内：

```
@section scripts {
    <script type="text/javascript" src="@Url.Content("~/scripts/jquery.maskedinput-1.3.min.js")"></script>
    <script type="text/javascript">
        $("#FechaDen").mask("99/99/9999");
        $("#HoraDen").mask("99:99:99");
    </script>
} 
```

另请注意，由于此脚本现在位于 DOM 的末尾，因此我已经摆脱了`$(document).ready`不再需要的调用（并且您在显示的代码中弄错了，因为您忘记在它前面加上 a 前缀`$`）。

# python-3.x - Lambda 和求和 Python

> ID：14287643
> 
> 赞同：1
> 
> 时间：2013-01-11T22:22:00.830
> 
> 标签：python-3.x, lambda

```
def summation(calc_termo, linf, prox, lsup):
    soma = 0
    while linf <= lsup:
        soma = soma + calc_termo(linf)
        linf = prox(linf)
    return soma
summation(lambda x: summation(lambda x: x, 1, lambda x: x + 1, x),1, lambda x: x + 1, 5) 
```

我很难理解这段代码是如何工作的。我从我的大学得到了这个作为练习，我在理解代码时遇到了一些麻烦。

它似乎是 1 到 5 之间数字的总和，但无法理解是什么`summation(lambda x: x, 1, lambda x: x + 1, x)`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T22:47:49.703

我首先将这些论点分开：

```
lambda x: summation(lambda x: x, 1, lambda x: x + 1, x) 
```

将这些变量替换回原始函数并简化它：

```
def inner_function(x):
    soma = 0
    linf = 1

    while linf <= x:
        soma += linf + 1
        linf += 1

    return soma 
```

再简化一点：

```
def inner_function(x):
    soma = 0

    for linf in range(1, x + 1):
        soma += linf

    return soma 
```

还有一点：

```
inner_function = lambda x: sum(range(1, x + 1)) 
```

还有更多：

```
inner_function = lambda x: x * (x + 1) / 2 
```

现在您的原始功能变为：

```
def summation(calc_termo, linf, prox, lsup):
    soma = 0

    while linf <= lsup:
        soma = soma + calc_termo(linf)
        linf = prox(linf)

    return soma

summation(inner_function, 1, lambda x: x + 1, 5) 
```

或者：

```
def summation(linf, prox, lsup):
    soma = 0

    while linf <= lsup:
        soma = soma + linf * (linf + 1) / 2
        linf = prox(linf)

    return soma

summation(1, lambda x: x + 1, 5) 
```

你可以从那里拿走它。我有：

```
summation = lambda: sum(n * (n + 1) / 2 for n in range(6)) 
```

这等于：

```
sum(sum(range(n + 1)) for n in range(6)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T22:51:26.657

您遇到问题的最后一行可以更好地表述为：

```
summation(lambda x: summation(lambda y: y, 1, lambda z: z + 1, x),1, lambda w: w + 1, 5) 
```

如果您对此感到困惑，那么 lambda 并不都会相互干扰。

# html - 包含 textarea 的 div 与左右重叠的 div

> ID：14287647
> 
> 赞同：0
> 
> 时间：2013-01-11T22:22:21.893
> 
> 标签：html, css

我有一个由页眉、正文和页脚的一系列 div 组成的对话框，这些 div 进一步细分为左、中和右部分。想象一个井字游戏板，你就会明白。出于某种原因，只要我在正文中心放置一个文本区域，它就会与左右正文 div 重叠。问题发生在使用“con”类的 div 部分的某个地方。

这是问题的图片： http: [//s8.postimage.org/fvlt9qi51/Dialog_Overlap.jpg](http://s8.postimage.org/fvlt9qi51/Dialog_Overlap.jpg)

编辑：我设法通过在 CSS 的 .con 部分中将 height: 100% 替换为 height: 175px 来使其工作。我不明白为什么看起来不错，但 height: 100% 却不行？包含构成对话框的所有子 div 的顶级 div 具有以像素为单位指定的尺寸，对话框页眉和页脚也是如此。为什么中间也必须指定一个精确的值？我不想这样做，因为这意味着我需要为每个对话框设置一个特殊的 CSS 类，以便可以将特定的高度值添加到对话框的中间。

HTML在下面，CSS在后面。

```
 <div class="ttl">
        <div class="ttlt">
            <div class="ttlt-l"></div>
            <div class="ttlt-m">
                <a class="close" href="javascript:void(0);" onclick="cancelNotes();this.blur();return false;"></a>
                <span>Create Note</span>
            </div>
            <div class="ttlt-r"></div>
        </div>
        <div class="ttlb">
            <div class="ttlb-l"><span></span></div>
            <div class="ttlb-m"><span></span></div>
            <div class="ttlb-r"><span></span></div>
        </div>
    </div>

    <div class="con">
        <div class="con-l"></div>
        <div class="">
            <input type="hidden" id="hdnNoteID" />
            <textarea id="txtNote" rows="11" cols="50"></textarea>
        </div>
        <div class="con-r"></div>
    </div>

    <div class="ftr">
        <div class="ftr-l"></div>
        <div class="ftr-m">
            <a onclick="cancelNotes();this.blur();return false;" href="javascript:void(0);" class="btn"><span>Cancel</span></a>
            <a onclick="addNotes();this.blur();return false;" href="javascript:void(0);" class="btn"><span>Add Note</span></a>
        </div>
        <div class="ftr-r"></div>
    </div> 
```

CSS

```
/* Title Bar */

.ttl { width:100%;height:38px; }

    /* Close button */
    .ttl a { margin-top:4px;display:block;float:right;width:23px;height:21px;background:transparent url("img/dialog/static.png") no-repeat -18px 0;cursor:default; }
    .ttl a:hover { background-position:-18px -21px; }
    .ttl a:active { background-position:-18px -42px;outline:none; }

    .ttlt { width:100%;height:30px; }
        .ttlt-l { width:9px;height:30px;background:transparent url("img/dialog/static.png") no-repeat;float:left; }
        /* ttlt-m width is dialogue width (450px) - 18px (the left & right divs are 9px each) */
        .ttlt-m { width:432px;height:30px;background:#000 url("img/dialog/horizontal.png") repeat-x;float:left; }
        .ttlt-mWide { width:632px;height:30px;background:#000 url("img/dialog/horizontal.png") repeat-x;float:left; }
        .ttlt-mExtraWide { width:930px;height:30px;background:#000 url("img/dialog/horizontal.png") repeat-x;float:left; }
        .ttlt-r { width:9px;height:30px;background:transparent url("img/dialog/static.png") no-repeat -9px 0;float:left; }
    .ttlt span { cursor:inherit;margin-left:4px;line-height:30px;color:#fff;font-weight:bold;font-family:Tahoma,"Lucida Grande",Verdana,Arial,Helvetica,sans-serif;font-size:11px; }

    .ttlb { width:100%;height:8px; }
        .ttlb span { display:none; }
        .ttlb-l { width:9px;height:8px;background:#000 url("img/dialog/static.png") no-repeat 0 -30px;float:left; }
        /* ttlb-m width is dialogue width (450px) - 18px (the left & right divs are 9px each) */
        .ttlb-m { width:432px;height:8px;background:#fff url("img/dialog/horizontal.png") repeat-x 0 -67px;float:left; }
        .ttlb-mWide { width:632px;height:8px;background:#fff url("img/dialog/horizontal.png") repeat-x 0 -67px;float:left; }
        .ttlb-mExtraWide { width:930px;height:8px;background:#fff url("img/dialog/horizontal.png") repeat-x 0 -67px;float:left; }
        .ttlb-r { width:9px;height:8px;background:#000 url("img/dialog/static.png") no-repeat -9px -30px;float:left; }

        .tabbed .ttlb-l { background-position:0 -38px; }
        .tabbed .ttlb-m { background-position:0 -75px; }
        .tabbed .ttlb-r { background-position:-9px -38px; }

/* Body */
.con { width:100%;height:100%;background-color:#fff;font-family:Tahoma,"Lucida Grande",Verdana,Arial,Helvetica,sans-serif;font-size:11px; cle}
    .con-l { width:9px;height:100%;background:#000 url("img/dialog/vertical.png") repeat-y;float:left; }
    /* con-m width is dialogue width (450px) - 18px (the left & right divs are 9px each) */
    .con-m { width:432px;height:100%;background-color:#fff;float:left; }
        .con-m .top { margin-top:2px; }
    .con-mWide { width:632px;height:100%;background-color:#fff;float:left; }
    .con-mExtraWide { width:930px;height:100%;background-color:#fff;float:left; }
    .con-r { width:9px;height:100%;background:#000 url("img/dialog/vertical.png") repeat-y -9px 0;float:left; }

/* Dialogue footer */
.ftr { width:100%;height:37px;font-family:Tahoma,"Lucida Grande",Verdana,Arial,Helvetica,sans-serif;font-size:11px; clear: left;}
    .ftr-l { width:9px;height:37px;background:transparent url("img/dialog/static.png") no-repeat 0 -75px;float:left; }
    /* ftr-m width is dialogue width (450px) - 18px (the left & right divs are 9px each) */
    .ftr-m { width:432px;height:37px;background:#eee url("img/dialog/horizontal.png") repeat-x 0 -30px;float:left; }
    .ftr-mWide { width:632px;height:37px;background:#eee url("img/dialog/horizontal.png") repeat-x 0 -30px;float:left; }
    .ftr-mExtraWide { width:930px;height:37px;background:#eee url("img/dialog/horizontal.png") repeat-x 0 -30px;float:left; }
    .ftr-r { width:9px;height:37px;background:transparent url("img/dialog/static.png") no-repeat -9px -75px;float:left; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T23:05:38.907

如果没有接触到真实的东西，很难在那里提供帮助。

挡块`.con`及其左右部分都有`height:100%`。仅当它们的父级具有以像素为单位的高度时，这才有效。现在这个左右部分是不可见的，因为它们的高度为 0。如果您为此块的外部 div 提供 html 和 css 会更简单。尝试为其设置固定高度，例如 300px。

我也可以建议肮脏的解决方法。在您的样式后添加此 css：

```
.con {
  border:9px solid #000;
  border-width:0 9px;
  padding:0 9px;
  width:auto;
} 
```

# file - 批处理文件比较不同目录中同名的两个文件，然后复制最新的

> ID：14287653
> 
> 赞同：-1
> 
> 时间：2013-01-11T22:22:50.053
> 
> 标签：file, batch-file, compare

虽然我在这个网站上看到过类似的问题，但在我看来，它们都没有真正能够做我需要的事情。我需要比较不同位置的两个同名文件。一个在计算机上，另一个位置在闪存驱动器上。批处理文件将驻留在闪存驱动器上。我需要比较这两个文件，然后复制最新的一个，这样它就在计算机和闪存驱动器上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T00:24:52.720

## 演讲

您在批处理脚本方面尝试或倾向于什么？**[请参阅 StackOverflow 常见问题解答](https://stackoverflow.com/faq#questions)**。请不要只发布有需要的问题，而是展示您尝试过的内容和学到的内容。

这里有一些很好的资源可以帮助您：

**[Technet](http://technet.microsoft.com/en-us/library/cc772390%28v=ws.10%29.aspx)** \ **[DosTips](http://www.dostips.com)** \ **[SS64](http://ss64.com/)** \ **[Rob van de Woude](http://www.robvanderwoude.com/batchfiles.php)** \ **[ComputerHope](http://www.computerhope.com/jargon/c/commandi.htm)**

另外，看看这些命令

`xcopy`或者`robocopy`

键入大多数命令后跟`/?`以查看帮助文档。

* * *

## 回答

```
xcopy "E:\path on flash drive\file.ext" "C:\path on computer\file.ext" /D
xcopy "C:\path on computer\file.ext" "E:\path on flash drive\file.ext" /D 
```

# android - AsyncTask 在 4.0.4 上不起作用

> ID：14287656
> 
> 赞同：2
> 
> 时间：2013-01-11T22:23:17.480
> 
> 标签：android, android-asynctask, compatibility

我在下面创建了一个类，它可以访问互联网并向 php 脚本发送请求。为了在 4.0.4 上工作，我创建了它，`AsyncTask`而不是在主线程中，但是当我测试它时，它不起作用，虽然它在 2.2 上工作正常。你知道是什么问题吗？

```
class download extends AsyncTask<String, Integer, String> {

        protected String doInBackground(String s1, String s2) {
            String result = "";
            //http post

            ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
            nameValuePairs.add(new BasicNameValuePair("Vreme", s1));
            nameValuePairs.add(new BasicNameValuePair("Datum", s2));

            InputStream is = null;
            try {

                String adresa = "http://senzori.open.telekom.rs/script.php";
                HttpPost httppost = new HttpPost(adresa);
                httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
                HttpClient httpclient = new DefaultHttpClient();

                HttpResponse response = httpclient.execute(httppost);
                HttpEntity entity = response.getEntity();
                is = entity.getContent();
            } catch (Exception e) {
                Log.e("log_tag", "Error in http connection " + e.toString());
            }
            //convert response to string
            try {
                BufferedReader reader = new BufferedReader(new InputStreamReader(is, "iso-8859-1"), 8);
                StringBuilder sb = new StringBuilder();
                String line = null;
                while ((line = reader.readLine()) != null) {
                    sb.append(line + "\n");
                }
                is.close();

                result = sb.toString();

            } catch (Exception e) {
                Log.e("log_tag", "Error converting result " + e.toString());
            }
            return result;
        }

        @Override
        protected String doInBackground(String... params) {
            // TODO Auto-generated method stub
            return null;
        }
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-11T22:25:14.960

它可能不起作用，因为您重载了 doInBackground，但没有调用重载方法。

改变它，使原来的方法是这样的：

```
@Override
protected String doInBackground(String... params) {

    return doInBackground (params[0], params[1]);
} 
```

请注意，它现在使重载无用，将代码移回 overriden `doInBackground (String... params)`，并且您还需要确保在调用 时`execute()`提供两个字符串作为参数。

# wordpress - 摆脱 Wordpress 中的空选择菜单

> ID：14287658
> 
> 赞同：0
> 
> 时间：2013-01-11T22:23:21.750
> 
> 标签：wordpress, select, menu

我已经搜索和搜索。[我在http://propelyourteam.com](http://propelyourteam.com)上找不到如何删除空的选择菜单

**CSS**

```
.select-menu, .select {
display: none;}

.menu-main-container {
position: relative;} 
```

**菜单 PHP**

```
<div class="header-right">
                <?php wp_nav_menu( array( 'theme_location' => 'header', 'menu_id' => 'nav', 'menu_class' => 'nav-top', 'container' => '', 'container-class' => '', ) ); ?>

                <div class="clear"></div>
            </div>

            <div class="clear"></div>` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T22:36:32.733

在`custom.js`第 69 行的文件中，您正在使用 Mobile Menu 插件创建看起来像移动菜单的内容。[您可以在此处](https://github.com/mambows/mobilemenu)找到有关如何使用该插件的更多信息。（它需要将一些参数传递给函数，以便正确选择导航菜单项）。

但是，如果您不想使用此插件，您可以删除第 69 行，并且可能还想阻止它包含在您的`functions.php`.

# php - php -$result->fetch_array 不起作用

> ID：14287663
> 
> 赞同：2
> 
> 时间：2013-01-11T22:23:32.247
> 
> 标签：php, mysql

我正在尝试使用 GET 方法在我的数据库中选择一个表。现在，当我对其中的变量值（表名）进行硬编码时，它会按预期工作并返回数组中的值。

但是当我尝试通过变量确定表名时，出现以下错误：

> 致命错误：在非对象上调用成员函数 fetch_array()

现在我已经尝试了`var_dump($result);`但是返回`bool(false)`。

现在变量确实带有一个值，因为当我将它回显到屏幕时，它给出了我期望的值。

那么为什么在为我的表搜索进行查询时不返回值？？？

```
 $result = $mysqli->query("SELECT * FROM PodcastSermons  WHERE sermonSeries = ". $series); //This where a change needs to happen

    var_dump($result);

        $posts = array();

        while($row = $result->fetch_array()) 
        {    
            $ID=$row['ID'];
            $sermonTitle=$row['sermonTitle'];
            $sermonSpeaker=$row['sermonSpeaker'];
            $sermonSeries=$row['sermonSeries'];
            $sermonDate=$row['sermonDate'];
            $linkToImage=$row['linkToImage'];
            $linkToAudioFile=$row['linkToAudioFile'];

            $posts []= array (
                'ID'=> $ID,
                'sermonTitle'=> $sermonTitle,
                'sermonSpeaker'=> $sermonSpeaker,
                'sermonSeries'=> $sermonSeries,
                'sermonDate'=> $sermonDate,
                'linkToImage'=> $linkToImage,
                'linkToAudioFile'=> $linkToAudioFile
            );
    }

    $response['posts'] = $posts;

    var_dump($posts); 
```

PS我读过mysql风格的贬值，我知道必须使用mysqli写作。我正在运行 PHP 版本 5.2.6-1+lenny16

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T22:27:56.213

> 现在我已经尝试了`var_dump($result);`但是返回`bool(false)`。

因为您的查询失败。

尝试：

```
if( ! $result = $mysqli->query("SELECT * FROM PodcastSermons  WHERE sermonSeries = ". $series); ) {
  echo "An error has occurred: \n" . var_export($mysqli->error_list, TRUE);
} else {
  //do stuff
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-11T22:46:25.133

如果`$series`是字符串，则需要在变量周围加上引号..

尝试...

```
$result = $mysqli->query("SELECT * FROM PodcastSermons  WHERE sermonSeries = '". $series ."'"); 
```

希望能帮助到你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T22:30:52.700

`$result = $mysqli->query("SELECT * FROM PodcastSermons WHERE sermonSeries = ". $series); //This where a change needs to happen`

`$series`如果变量：是用户定义的，您应该使用准备好的语句。

```
$result->prepare("SELECT * FROM PodcastSermons WHERE `sermonSeries`=?");
$result->bind_param('s', $series);
$result->execute(); 
```

另外， Print_r($result); 检查您的姓名首字母`$result`是否已被填充；此外，在您的 SQL 查询中`sermonSeries`是否与您的 SQL 表正确匹配？

**更新：**

```
while($row = $result->fetch_array()) 
        { 
```

尝试将其修改为：

```
while($row = $result->fetch_array(MYSQLI_ASSOC))
{ 
```

[http://uk1.php.net/manual/en/mysqli-result.fetch-array.php](http://uk1.php.net/manual/en/mysqli-result.fetch-array.php)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-11T22:32:05.360

在我看来，中心问题是：`$series`从哪里来？该变量在哪里被初始化？

如果您从 Web 表单中传递它，有两件事：使用`$_GET`或`$_POST`（您在表单中使用的任何操作）。然后你必须清理来自那里的东西，以免受到 SQL 注入攻击。在这种情况下，准备好的陈述是你的朋友；它们有助于强化您的脚本以抵​​御此类攻击。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-11T22:32:11.383

试试这个

```
$result = $mysqli->query("SELECT * FROM PodcastSermons  WHERE sermonSeries = '$series' "); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-11T22:30:43.997

您的查询根本失败。检查 var_dump($series); 在执行之前。

我认为它可能是一个字符串，而您只是不引用它？

只是一个提示：在调用 $mysqli->query 之前，首先使用您的命令文本构建一个字符串。并使用该字符串（如 $mysqli->query($cmd);

转储那个字符串:)可能会让你大开眼界；）

这样你就可以提取它并直接对数据库执行它（fe phpmyadmin）。

# django - 在 Django admin 中使用父模型值自定义下拉值

> ID：14287665
> 
> 赞同：1
> 
> 时间：2013-01-11T22:23:35.413
> 
> 标签：django, django-models, django-forms, django-admin

我在 Django 中有几个模型：

```
from django.db import models

class First(models.Model):
    first_name = models.CharField('First Name', max_length=100)
    first_value = models.IntegerField('Value')

    def __unicode__(self):
        return self.first_name 

class Second(models.Model):
    first_ref = models.ForeignKey(First)
    second_name = models.CharField('Second Name', max_length=100)
    second_value = models.IntegerField('Second Value')

    def __unicode__(self):
        return self.second_name

class Third(models.Model):
    second_ref = models.ForeignKey(Second)
    third_name = models.CharField('Third Name', max_length=100)
    third_value = models.IntegerField('Third Value')

    def __unicode__(self):
        return self.third_name 
```

现在，当我尝试`Third`在我的 Django 管理员中为模型添加新记录时，我的`<select>`框中填充了`second_name`值。如何显示两个“父”表中不同值的串联字符串，例如`first_name + first_value + second_name + second_value`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T23:38:18.713

只需更新模型的`unicode`方法`second`：

```
class Second(models.Model):
    first_ref = models.ForeignKey(First)
    second_name = models.CharField('Second Name', max_length=100)
    second_value = models.IntegerField('Second Value')

    def __unicode__(self):
        return '%s %s %s %s' % (
            self.first_ref.first_name, self.first_ref.first_value,
            self.second_name, self.second_value) 
```

# android - 以编程方式使 TableLayout 列完全适合其内容的大小

> ID：14287672
> 
> 赞同：2
> 
> 时间：2013-01-11T22:24:14.480
> 
> 标签：android, android-tablelayout

我正在尝试在 Android（最低 API 级别 10）中制作一个表格，其中一些列必须尽可能地拉伸，而有些列需要缩小以适应其内容的大小。

这就是我所拥有的：

![](../Images/127589b710676903ad8b27055fe6144a.png)

（颜色只是为了查看单元格的宽度和高度）

'at' 列就是我所说的。我需要它看起来像这样：

[http://img268.imageshack.us/img268/1572/77141b8b8eb443d783cede5.png](http://img268.imageshack.us/img268/1572/77141b8b8eb443d783cede5.png)

这是我现在使用的代码：

```
ScrollView sv = new ScrollView(this);

    TableLayout table = new TableLayout(this);
    table.setShrinkAllColumns(true);
    table.setStretchAllColumns(true);
    table.setPadding(10, 10, 10, 10);

    //title row
    TableRow rowTitle = new TableRow(this); 
    rowTitle.setGravity(Gravity.CENTER_HORIZONTAL);  
    TextView title = new TextView(this);  
    title.setText("Majors - Season 10");  
    title.setTextSize(TypedValue.COMPLEX_UNIT_DIP, 18);  
    title.setGravity(Gravity.CENTER);
    title.setTypeface(Typeface.SERIF, Typeface.BOLD);  
    TableRow.LayoutParams params = new TableRow.LayoutParams();  
    params.span = 4;
    rowTitle.addView(title, params);

    //header row
    TableRow rowHeaders = new TableRow(this);

    TextView away = new TextView(this);  
    away.setText("Away");
    away.setTypeface(Typeface.DEFAULT_BOLD);
    away.setGravity(Gravity.CENTER_HORIZONTAL);
    rowHeaders.addView(away);

    TextView empty = new TextView(this);
    empty.setText("  ");
 //     empty.setGravity(Gravity.CENTER_HORIZONTAL);
    empty.setBackgroundColor(Color.GREEN);
    rowHeaders.addView(empty);

    TextView home = new TextView(this);  
    home.setText("Home");  
    home.setTypeface(Typeface.DEFAULT_BOLD);  
    home.setGravity(Gravity.CENTER_HORIZONTAL);
    rowHeaders.addView(home);

    TextView score = new TextView(this);  
    score.setText("Score");  
    score.setTypeface(Typeface.DEFAULT_BOLD);
    score.setGravity(Gravity.RIGHT);
    rowHeaders.addView(score);

    TableRow rowMatch = createMatchRow();  
    TableRow rowMatch2 = createMatchRow();

    table.addView(rowTitle);  
    table.addView(rowHeaders);  
    table.addView(rowMatch);  
    table.addView(rowMatch2);  

    sv.addView(table);
    return sv; 
```

*createMatchRow()*只是一个为每个匹配项返回一个 TableRow 的方法。（第 2 行-）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-11T22:37:27.940

嗯，通过删除修复它

```
table.setShrinkAllColumns(true);
table.setStretchAllColumns(true); 
```

并添加：

```
table.setColumnStretchable(0, true);
table.setColumnStretchable(2, true); 
```

# c# - 设置 ProcessorAffinity 和 TPL

> ID：14287673
> 
> 赞同：2
> 
> 时间：2013-01-11T22:24:16.817
> 
> 标签：c#, task-parallel-library

如果我像这样为我的进程设置处理器亲和性：

```
var me = Process.GetCurrentProcess();
me.ProcessorAffinity = (IntPtr) processorAffinityMask; 
```

...，TPL 会为其所有工作兑现这一点吗？也就是说，是否有任何默认调度程序可以将工作推送到我给定掩码不允许的处理器？有没有可以证明这一点的测试？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T22:25:13.587

是的，TPL 将遵循您指定的关联掩码。

*它不能*兑现它的唯一方法是明确地去改变亲和力，它没有这样做。

虽然在 TPL 中创建一个测试所有可能的代码路径的测试是非常不可行的，但您当然可以设置一个可以从许多可用内核中受益的测试，将关联掩码设置为 1 个 CPU，并通过任务管理器观察关联永远不会改变，CPU 利用率永远不会超过 1/N，其中 N 是存在的核心数。

您还可以将该测试扩展为具有 M 个内核的亲和力，并观察 CPU 利用率 <= M/N。您也可以在任务管理器中直接观察到亲和力没有变化。

一个合适的测试是每次迭代需要大量时间并提供许多独立的工作单元，例如计算第一个素数 > N，其中 N 很大，并在目标素数数组上使用 Parallel.Foreach。阵列大小应显着大于存在的核心数。

附带说明一下，显式设置 CPU 亲和性很少是一个好主意。好奇你的用例是什么。

# c++ - 奇怪的 OpenGL 阴影映射行为

> ID：14287674
> 
> 赞同：8
> 
> 时间：2013-01-11T22:24:31.563
> 
> 标签：c++, opengl, shadow-mapping

我正在使用 SFML 开发 C++ 和 OpenGL 3.2 的 3D 游戏。我一直在努力实现点光阴影映射。到目前为止，我所做的*似乎*与我所学到的和我所看到的例子一致，但仍然没有阴影。

我所做的是按照我使用它的确切顺序编写我使用的所有代码的简单列表，但不是完整的源代码，只有相关的代码（因为我的项目分为几个类）：

```
Omnidirectional shadow mapping

C++
- Initialization
-- Use shadow pass shader program
-- Generate + bind the shadow frame buffer
glGenFramebuffers(1, &shadowFrameBuffer);
glBindFramebuffer(GL_FRAMEBUFFER, shadowFrameBuffer);

-- Generate a texture
glGenTextures(1, &shadowMap);

-- Bind texture as cubemap
glBindTexture(GL_TEXTURE_CUBE_MAP);

-- Set texture parameters
glTexParameteri(GL_TEXTURE_CUBE_MAP, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
glTexParameteri(GL_TEXTURE_CUBE_MAP, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);
glTexParameteri(GL_TEXTURE_CUBE_MAP, GL_TEXTURE_WRAP_R, GL_CLAMP_TO_EDGE);
glTexParameteri(GL_TEXTURE_CUBE_MAP, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
glTexParameteri(GL_TEXTURE_CUBE_MAP, GL_TEXTURE_MAG_FILTER, GL_LINEAR);

-- Generate empty 1024 x 1024 for every face of the cube
for (int face = 0; face < 6; face++)
        glTexImage2D(GL_TEXTURE_CUBE_MAP_POSITIVE_X + face, 0, GL_DEPTH_COMPONENT32F , 1024, 1024, 0, GL_DEPTH_COMPONENT, GL_FLOAT, NULL);

-- Attach the cubemap to the framebuffer
glFramebufferTexture(GL_FRAMEBUFFER, GL_DEPTH_ATTACHMENT, shadowMap, 0);

-- Only draw depth to framebuffer
glDrawBuffer(GL_NONE);

- Every frame
-- Clear screen
glClearColor(0.0f, 0.0f, 0.0f, 1.0f);
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

-- Render shadow map
--- Bind shadow frame buffer
glBindFramebuffer(GL_FRAMEBUFFER, shadowFrameBuffer);

--- Set the viewport to the size of the shadow map
glViewport(0, 0, 1024, 1024);

-- Cull front faces
glCullFace(GL_FRONT);

-- Use shadow mapping program
--- Define projection matrix for rendering each face
glm::mat4 depthProjectionMatrix = glm::perspective(90.0f, 1.0f, 1.0f, 10.0f);

--- Define view matrices for all six faces
std::vector<glm::mat4> depthViewMatrices;

depthViewMatrices.push_back(glm::lookAt(lightInvDir, glm::vec3(1,0,0),  glm::vec3(0,-1,0) )); // +X
depthViewMatrices.push_back(glm::lookAt(lightInvDir, glm::vec3(-1,0,0), glm::vec3(0,1,0) )); // -X
depthViewMatrices.push_back(glm::lookAt(lightInvDir, glm::vec3(0,1,0),  glm::vec3(0,0,1)  )); // +Y
depthViewMatrices.push_back(glm::lookAt(lightInvDir, glm::vec3(0,-1,0), glm::vec3(0,0,-1) )); // -Y
depthViewMatrices.push_back(glm::lookAt(lightInvDir, glm::vec3(0,0,1),  glm::vec3(0,-1,0) )); // +Z
depthViewMatrices.push_back(glm::lookAt(lightInvDir, glm::vec3(0,0,-1), glm::vec3(0,1,0)  )); // -Z

--- For every object in the scene
---- Bind the VBO of the object
---- Define the model matrix for the object based on its position and orientation
---- For all six sides of the cube
----- Set the correct side to render to
glFramebufferTexture2D(GL_FRAMEBUFFER, GL_DEPTH_ATTACHMENT, GL_TEXTURE_CUBE_MAP_POSITIVE_X + i, shadowMap, 0);

----- Clear depth buffer
glClear(GL_DEPTH_BUFFER_BIT);

----- Send model, view and projection matrices to shadow mapping shader
glUniformMatrix4fv(glGetUniformLocation(shadowMapper, "lightModelMatrix"), 1, GL_FALSE, glm::value_ptr(depthModelMatrix));
glUniformMatrix4fv(glGetUniformLocation(shadowMapper, "lightViewMatrix"), 1, GL_FALSE, glm::value_ptr(depthViewMatrices[i]));
glUniformMatrix4fv(glGetUniformLocation(shadowMapper, "lightProjectionMatrix"), 1, GL_FALSE, glm::value_ptr(depthProjectionMatrix));

----- Draw the object
glDrawElements(....);
- END SHADOW MAP DRAW
-- Cull back faces
glCullFace(GL_BACK);

-- Use standard shader program
-- Bind default framebuffer
glBindFramebuffer(GL_FRAMEBUFFER, 0);

-- Activate cubemap texture
glActiveTexture(GL_TEXTURE1);

-- Bind cubemap texture
glBindTexture(GL_TEXTURE_CUBE_MAP, shadowMap);

-- Tell shader to use first texture
glUniform1i(glGetUniformLocation(currentProgram->id, "shadowmap"), 1);

-- Send standard MVPs and draw objects
glDrawElements(...);

- END C++

=================================
GLSL

shadowpass vertex shader source

#version 150

in vec3 position;
out vec3 worldPosition;

uniform mat4 lightModelMatrix;
uniform mat4 lightViewMatrix;
uniform mat4 lightProjectionMatrix;

void main()
{
    gl_Position = lightProjectionMatrix * lightViewMatrix * lightModelMatrix * vec4(position, 1.0);
    worldPosition = (lightModelMatrix * vec4(position, 1.0)).xyz; // Send world position of vertex to fragment shader
}

shadowpass fragment shader source

#version 150

in vec3 worldPosition; // Vertex position in world space
out float distance; // Distance from vertex position to light position
vec3 lightWorldPosition = vec3(0.0, 0.0, 0.0); // Light position in world space

void main()
{
    distance = length(worldPosition - lightWorldPosition); // Distance from point to light
    // Distance will be written to the cubemap
}

standard vertex shader source

#version 150

in vec3 position;
in vec3 normal;
in vec2 texcoord;

uniform mat4 modelMatrix;
uniform mat4 viewMatrix;
uniform mat4 projectionMatrix;

out vec3 fragnormal;
out vec3 fragnormaldirection;
out vec2 fragtexcoord;
out vec4 fragposition;
out vec4 fragshadowcoord;

void main()
{
    fragposition = vec4(position, 1.0); // Position of vertex in object space
    fragtexcoord = texcoord;
    fragnormaldirection = normalize(modelInverseTranspose * normal);
    fragnormal = normalize(normal);

    gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(position, 1.0);
}

standard fragment shader source

#version 150

out vec4 outColour;

in vec3 fragnormaldirection;
in vec2 fragtexcoord;
in vec3 fragnormal;
in vec4 fragposition;

uniform mat4 modelMatrix;
uniform mat4 viewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrixInversed;

uniform sampler2D tex;
uniform samplerCube shadowmap;

void main()
{   
    vec3 lightpos = vec3(0.0, 0.0, 0.0);

    vec3 pointToLight = (fragposition * modelMatrix).xyz - lightpos; // Get vector between this point and the light

    float dist = texture(shadowmap, pointToLight).x; // Get distance written in texture

    float shadowfactor = 1.0;

    if (length(pointToLight) > dist) // Is it occluded?
        shadowfactor = 0.5;

    outColour = texture(tex, fragtexcoord) * shadowfactor;
} 
```

这是我的代码现在所做的图片：

![破碎的阴影贴图](../Images/7a6cd4bebebd192743366beffdb50a4f.png)

这是一个奇怪的效果，但似乎接近我的意思。似乎任何在 0、0、0 处暴露在光线下的表面在其中心都有一个无阴影的圆圈，而其他一切都没有阴影。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T02:52:32.913

调试阴影贴图的一种非常有用的方法确实可以将阴影贴图的内容显示为屏幕上的四边形。在立方体阴影贴图的情况下为 6 个四边形。这可以作为一个调试复活节彩蛋来实现，您可以在整个屏幕上显示完整的纹理并“转到下一张脸”，这样您就可以使用另一个按键组合来滑动 6 个面。

然后，三次阴影贴图中最重要的事情之一就是深度范围。点光源没有无限范围，因此通常您希望缩放深度存储以匹配光照范围。

您可以使用浮点 16 位亮度（或红色通道）纹理来存储世界深度（球形，即使用像素着色器中的一点计算的真实长度（射线到交点））或者您可以使用线性深度（与存储在经典 ZBuffer 中的相同类型，即归一化设备坐标的深度。即投影矩阵之后的深度。在这种情况下，在光照着色器中重建一次世界位置（下一次传递），问题在乘以相机立方体面逆视图*投影后，一定要除以 w。

调试阴影贴图的关键在于着色器的旋转。首先使用颜色来可视化存储在阴影贴图中的深度，就像世界像素所感知的那样。这是帮助修复我公司引擎中的点阴影贴图的唯一方法。您可以使用混合和钳位的组合来制作颜色代码，例如从 0 到 0.3 的蓝色、从 0.3 到 0.6 的红色、从 0.6 到 1 的绿色。如果您有世界距离存储，它会更容易，但通过 vizu 仍然很有趣颜色代码。只需使用相同的功能，但将距离除以您的预期世界范围。

使用该 vizu 方案，您将能够立即看到阴影区域，因为它们都具有相同的颜色（因为“光线”被更近的表面截获）。一旦达到这一点；其余的一切都会顺利进行。

祝你好运 ：）

# crystal-reports - 在 Crystal Reports 中使用通配符对文本进行条件格式设置

> ID：14287677
> 
> 赞同：2
> 
> 时间：2013-01-11T22:24:56.900
> 
> 标签：crystal-reports, formatting

我需要编写一个条件格式，如果以“X”开头的文本应该是斜体。否则它应该是普通字体。

如何实现字符串与通配符的比较？我尝试了以下方法：

```
IF({my_sp.field_label} like '  X%') then crItalic else crRegular 
```

任何指针将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T22:36:28.363

Crystal Reports 将 识别`*`为类似比较中的通配符。

从一些[在线提供的 CR 文档中](http://publib.boulder.ibm.com/infocenter/radhelp/v7r5/topic/com.businessobjects.integration.eclipse.designer.doc/html/topic901.html)：

> 类似于模式运算符 Basic 和 Crystal 语法。
> 
> Like 运算符对于选择要从报告中包含或排除的记录很有用。
> 
> 用法 x 像 y
> 
> {fieldname} 像“c?n*”
> 
> 此运算符测试 {fieldname} 的内容是否与您在字符串“c?n*”中指定的模式匹配。如果字段的内容符合“c?n*”模式，则公式返回值 True。如果该字段以其他任何内容开头，则公式将返回 False。
> 
> 使用通配符？和 * 代表可变字符。这 ？代表单个字符。* 符号代表任意数量的字符。
> 
> 示例 以下示例适用于 Basic 和 Crystal 语法：
> 
> {customer.FIRST NAME} 喜欢“D?n”
> 
> TRUE，其中 {customer.FIRST NAME} = Dan 或 Don。
> 
> {customer.FIRST NAME} 喜欢“D?n”
> 
> FALSE，其中 {customer.FIRST NAME} = Doug 或 Rob。
> 
> {customer.LAST NAME} 喜欢“ *s?n* ”
> 
> TRUE，其中 {customer.LAST NAME} = Johnson 或 Olson 或 Olsen。
> 
> {customer.LAST NAME} 喜欢“ *s?n* ”
> 
> FALSE，其中 {customer.LAST NAME} = Johnston 或 Smith。

# jquery - 使用 jQuery 获取（半）动态 css 类

> ID：14287685
> 
> 赞同：0
> 
> 时间：2013-01-11T22:26:06.597
> 
> 标签：jquery, jquery-selectors

我现在有点卡住了。我需要从一个元素中获取某个类。类属性可能如下所示：

```
<div class="span12 display"> 
```

或者：

```
<div class="span24 overview overview-small"> 
```

所以**跨度***总是相同的，只是数字可以不同。

我真的不知道如何每次使用 jQuery获取**span* 。**

**编辑：** 我的目标是改变元素的大小。例如从 span12 到 span18。我可能需要将大小从 span10 更改为 span18 或从 span8 更改为 span18。这就是为什么我更喜欢通用解决方案的原因。

所以这个数字是相当随机的。在将其更改为 span18 之前了解 span-number 非常重要，因为应该可以更改以前的大小（span）。

对不起，我忘了提这个。:|

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T22:38:58.570

简单的字符串解析就能帮你搞定：http: [//jsfiddle.net/7sXFb/](http://jsfiddle.net/7sXFb/)

```
$("div[class*=span]").each(function(){
  var cls = this.className,
      prt = cls.split(" "),
      spn = 0;

  for (var i = 0; i < prt.length; i++){
    if (prt[i].indexOf("span") > -1)
      spn = +prt[i].replace("span","");
  }

  console.log(spn);
}); 
```

您可以像这样添加 10 个：

```
this.className = this.className.replace("span" + spn, "span" + (spn+10)); 
```

或者，像这样：

```
$(this).removeClass("span" + spn).addClass("span" + (spn+10)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T22:27:51.660

如果你有号码，应该不会那么难。

```
var spanNumber = 15;
var spanSelector = ".span"+spanNumber;
var spanClassName = $(spanSelector)[0].className; 
```

如果您没有号码，则可以查找部分匹配项，然后对该组执行某些操作

```
var spans = $('div[class*=span]'); 
```

也许迭代它们：

演示：http: [//jsfiddle.net/hFx26/](http://jsfiddle.net/hFx26/)

```
spans.each(function(index,element){
 var spanClass = element.className;
 var tar = spanClass.indexOf("span");
 var number = "";
 for( var i = (tar + 4); i < spanClass.length; i++ ){
  if( spanClass[i] == " " ) break;
  number += spanClass[i].toString();
 }
 number = parseInt(number);
 //call some function with number, element, or replace the className
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T22:29:36.103

`allspans`您可以简单地为每个具有 span* 值的元素添加另一个类，并将其用作选择器。

# c - 在内核中使用 printk

> ID：14287687
> 
> 赞同：6
> 
> 时间：2013-01-11T22:26:32.440
> 
> 标签：c, linux, linux-kernel, kernel

我正在尝试实现我自己的新`schedule()`. 我想调试我的代码。

我可以使用`printk`函数`sched.c`吗？

我用过`printk`，但它不起作用。我错过了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-11T22:30:15.577

你知道多久`schedule()`被叫一次吗？它的调用速度可能比您的计算机将打印缓冲区刷新到日志的速度更快。我建议使用另一种调试方法。例如，在 QEMU 中运行内核并通过将 kernel.syms 文件加载为符号表并设置断点来使用远程 GDB。其他虚拟化软件也提供类似的功能。或者以手动方式执行并遍历您的代码。在中断处理程序中使用 printk 通常是一个坏主意（除非您即将恐慌或停止）。

如果您看到的错误没有发生，请经常考虑使用`BUG()`or`BUG_ON(cond)`代替。这些是有条件的错误消息，不应该像无条件的那样经常发生`printk`

编辑`schedule()`函数本身通常是一个坏主意（除非您想支持多个运行队列等......）。改为修改调度程序类会更好、更容易。查看 CFS 调度程序的代码来执行此操作。如果您想完成其他事情，我可以提供更好的建议。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-24T02:28:03.923

试试`trace_printk()`。 `printk()`有太多的开销，并且`schedule()`在之前的`printk()`调用完成之前再次被调用。这将创建一个活锁。这是一篇关于它的好文章：[https ://lwn.net/Articles/365835/](https://lwn.net/Articles/365835/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-28T17:47:26.453

在持有运行队列锁的同时调用 printk 是不安全的。引入了一个特殊功能`printk_sched`，以便在持有运行队列锁时使用 printk 机制（[https://lkml.org/lkml/2012/3/13/13](https://lkml.org/lkml/2012/3/13/13)）。不幸的是，它只能在一个滴答声中打印一条消息（并且在保持运行队列锁定时不能超过一个滴答声，因为中断被禁用）。这是因为内部缓冲区用于保存消息。

您可以使用[lttng2](http://lttng.org/lttng-kernel-tracer) 记录到用户空间，也可以修补实现`printk_sched`以使用静态分配的缓冲区池，该缓冲区可以在一个滴答内使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T22:31:18.280

这取决于，基本上它应该可以正常工作。

尝试`dmesg`在 shell 中使用来跟踪你`printk`，如果它不存在，你显然没有调用它。

```
2396         if (p->mm && printk_ratelimit()) {
2397                 printk(KERN_INFO "process %d (%s) no longer affine to cpu%d\n",
2398                                 task_pid_nr(p), p->comm, cpu);
2399         }
2400 
2401         return dest_cpu;
2402 } 
```

有一个部分不起作用`sched.c`，例如`printk`

```
1660 static int double_lock_balance(struct rq *this_rq, struct rq *busiest)
1661 {
1662         if (unlikely(!irqs_disabled())) {
1663                 /* printk() doesn't work good under rq->lock */
1664                 raw_spin_unlock(&this_rq->lock);
1665                 BUG_ON(1);
1666         }
1667 
1668         return _double_lock_balance(this_rq, busiest);
1669 } 
```

## **编辑**

您可以尝试`printk`1000 次而不是每次。

# ruby-on-rails - 在rails中使用form_for修改文本字段大小时的CSS代码

> ID：14287689
> 
> 赞同：0
> 
> 时间：2013-01-11T22:26:48.617
> 
> 标签：ruby-on-rails

我在 rails 中使用 form_for 创建用户表单以进行登录。我没有使用引导程序来格式化表格。我想更改表单中文本字段框的大小。任何人都可以建议我的css代码吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T22:37:02.500

如果你想编辑所有的输入文本元素，你会使用这样的东西。

```
 form input[type='text'] {
   width: 100px;
   height: 30px;
 } 
```

否则你也可以使用

```
#user_email {
  your styling;
} 
```

或者，您也可以通过以下方式将自定义类附加到您的文本字段

```
f.text_field :email, :class => 'login-email-field' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T22:36:06.070

好吧，也许您可​​以尝试以下方法：

在红宝石中：

```
<%= form_for @client do |f| %>
    <%= f.text_field :request, class: "client-request" %>
    <%= f.submit %>
<% end %> 
```

在 CSS 中：

```
.client-request {
    width: 300px;
    height: 60px;
} 
```

关于什么？

# c# - 如果名称未知，则从 Config 中读取部分？

> ID：14287690
> 
> 赞同：-1
> 
> 时间：2013-01-11T22:26:59.333
> 
> 标签：c#, .net, xml, configuration

我有一个简单的程序，可以让用户在自定义配置文件中添加一个部分，它的设置比显示的要多。我用所有配置的列表填充了一个 datagridview。我的问题是，填充列表框的方法不知道用户可能添加的所有部分的名称，我试图成为动态的。有没有一种简单的方法可以遍历这些部分并获取它们的名称？还是我必须创建一个部分、集合和元素才能做到这一点？

谢谢。

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
 <configSections>
    <section name="Jason" type="SQLQueryOutput.SQLQueryOutputConfigSection, SQLQueryOutput, Version=1.0.0.0, Culture=neutral, PublicKeyToken=760d257b40400289" />
    <section name="Steve" type="SQLQueryOutput.SQLQueryOutputConfigSection, SQLQueryOutput, Version=1.0.0.0, Culture=neutral, PublicKeyToken=760d257b40400289" />
</configSections>
    <Jason OutputFilePath="C:\temp\jason.txt" />
    <Steve OutputFilePath="C:\temp\steve.txt" />
</configuration> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T22:43:09.850

如何使用 Linq To Xml 解析您的配置文件。例如，

```
var xDoc = XDocument.Load(configFile);
var sections = xDoc.XPathSelectElements("//configSections/section")
                    .Select(x=>x.Attributes().ToDictionary(a=>a.Name,a=>a.Value))
                    .ToList();

var name = sections[0]["name"]; 
```

或者

```
var outputFilePaths = xDoc.Root.Elements()
       .Where(d => d.Name.LocalName != "configSections")
       .ToDictionary(e => e.Name.LocalName, e => e.Attribute("OutputFilePath").Value); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T22:51:05.217

实际上你的`configSections`元素也可以包含`sectionGroup`元素。使用[Linq 到 Xml](http://msdn.microsoft.com/en-us/library/bb387098.aspx)：

```
XDocument xdoc = XDocument.Load(config_file_path);
var names =  xdoc.Root.Element("configSections")
                 .Descendants("section") // selects also sectionGroup/section
                 .Select(s => (string)s.Attribute("name")); 
```

# java - 如何将精灵放置在另一个更大精灵的中心？

> ID：14287692
> 
> 赞同：1
> 
> 时间：2013-01-11T22:27:08.280
> 
> 标签：java, android, andengine

我有一个 80x80 的 PNG。

我有另一个适合 80x80 png 的 png。我不知道第二个 png 的确切宽度和高度是多少，但它会小于 80x80。

我有一种方法可以`png.setPosition(x,y)`用来设置 png 位置。我还有一个名为的方法`getX()`，`getY()`它允许我们检索第二个 png 的尺寸。

我想做的是获得将第二个png放置在80x80 png的中心的x和y。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T22:39:14.150

首先，找到你的大精灵的中间。

```
midX = img1.getPositionX()+img1.getWidth()/2;
midY = img1.getPositionY()+img1.getHeight()/2; 
```

然后，到该中间位置，删除第二张图像的一半尺寸：

```
midX-=img2.getWidth()/2;
midY-=img2.getHeight()/2; 
```

并将该位置设置为小于 80x80 png

```
img2.setPosition(midX,midY); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T22:48:41.670

我创建了一个纸牌游戏，并使用这种方法在牌组中设置了一张牌：

```
card.setPositionX(deck.getPositionX() + ((deck.getWidth() - card.getWidth()) / 2));
card.setPositionY(deck.getPositionY() + ((deck.getHeight() - card.getHeight()) / 2)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T14:51:18.197

您可以将第二个图像附加到第一个（如果您使用 AndEngine 的 AnchorCenter 分支，坐标系从实体的左下角开始）

Image2 位置将参考 image1。所以你可以这样做：

```
image1.attachChild(image2);
image2.setPosition(image1.getWidth()/2, image1.getHeight()/2); 
```

使用此解决方案，您可以移动 image1 并且 image2 将继续在 image1 的中间

# git - 使用 git merge 时丢失更改

> ID：14287693
> 
> 赞同：1
> 
> 时间：2013-01-11T22:27:14.310
> 
> 标签：git, version-control, git-merge

我对 git 有点陌生，当我`git merge`. 我正在合并的分支似乎正在发生变化，这不是我对它应该如何工作的理解。

这是一个例子。我有两个分支：master 和 new-branch。new-branch 领先于 master 几个提交。也许我切换回大师以快速修复。然后我切换回新分支，我希望应用来自 master 的相同修复。所以（在新分支中）我这样做：

`git merge master`

现在，主人应该完全改变了吗？我希望只有来自 master 的更改才能应用于新分支，但这似乎没有发生。我不断失去工作，不得不重做，我不知道为什么。有什么建议吗？

这里有一些`git log`：

```
ESL-MAC:sow3.dev $ git log
commit d30a517211c8663ab5cd28664d1b7ea59c82b248
Author: el
Date:   Fri Jan 11 17:18:44 2013 -0500

    fixed wsat page again

commit 31557a867585ac81b6fda33971d9ba16f1efafb9
Merge: 35af780 5ea9b23
Author: el
Date:   Fri Jan 11 17:10:22 2013 -0500

    replaced meta for get_wsat() in WSAT

commit 5ea9b233fb3d01c0dc9dfb5b0e48c80e8fb0eb58
Author: el
Date:   Fri Jan 11 16:50:06 2013 -0500

    removed admin bar AGAIN

commit 177d9ab8973c0e9f85a21ffad4ef6065cf6e9675
Author: el
Date:   Fri Jan 11 16:47:07 2013 -0500

: 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T22:49:59.463

这是肯定的。如果你在 git 中：

```
git checkout new-branch 
```

...接着...

```
git merge master 
```

...什么都不`master`应该改变。我想你已经知道了，你要求 git 将任何新的提交合并`master`到`new-branch`. 如果你得到不同的结果，那就是严重错误。很难知道是什么，尽管正如您所说，您是 git 的新手，但我最好的猜测是您实际上并没有像您认为的那样致力于 master 。

最简单的提交过程是：

做一些工作...

```
git add path-to-file(s)
git status (not strictly necessary, but will confirm that you actually added what you think you added)
git commit -m "This commits the file(s) I just added" 
```

正如 Edward 所说，查看 git 日志可能会有所启发。

！

# language-agnostic - 为什么在编程示例中使用 Hello World？

> ID：14287695
> 
> 赞同：0
> 
> 时间：2013-01-11T22:27:19.333
> 
> 标签：language-agnostic

> **可能重复：**
> [“Hello world”从何而来？](https://stackoverflow.com/questions/602237/where-does-hello-world-come-from)

为什么大多数编程示例都是为了打印特定短语而编写的`Hello World`？有时您会看到诸如此类`ohai world`的衍生产品，但总是从 Hello World 分支。有没有人不知道这是为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T22:29:06.930

像这样的简单程序为语言的语法、程序的结构等提供了一个很好的例子。

# ruby-on-rails - 创建记录时如何获取自动生成的 id？

> ID：14287701
> 
> 赞同：0
> 
> 时间：2013-01-11T22:27:50.230
> 
> 标签：ruby-on-rails

创建记录时，它有一个自动生成的 id。我想得到它。

我在 Ruby On Rails 中创建了一个名称表。

我输入了四个名字：

*   阿隆
*   比尔
*   希拉里
*   埃雷兹

在我的表中，有一个自动 ID，对吗？名称“Alon”被分配 id=1，依此类推 - 名称“Erez”的 id=4。此 ID 不是我在表中定义的 ID。

我用另外一句话解释：

当我为名称“Alon”输入函数“显示”时，它看起来像：`http://localhost:3000/mycontroller/1`. （我认为 '1' 是在我的表中找到名称 'Alon' 的 id。

**我怎样才能得到这个ID？**

```
def index
   @name = Tablenames.find(:all, :conditions => ["name=?", "Alon"]);
end 
```

`index.html.erb`：

```
<% @name.each do |worker_name| %> worker_name.id <% end %> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T22:32:13.677

什么时候需要身份证？创建后直接？

```
user = User.create(name: "Alon")

puts user.id 
```

当你在寻找名字的时候？

```
user = User.find_by_name "Alon"

puts user.id 
```

# joomla2.5 - 向组件打包文件添加变量

> ID：14287709
> 
> 赞同：1
> 
> 时间：2013-01-11T22:29:02.913
> 
> 标签：joomla2.5, joomla-extensions

在安装期间，我希望 Joomla 从语言文件中获取组件名称。实际上我试图以这种方式做到这一点。

```
<extension type="component" version="2.5.0" method="upgrade">

<name>COM_MYGREATCOMPONENT_NAME</name> 
... 
```

在语言文件中我有这个：

```
COM_MYGREATCOMPONENT_NAME=Name of my great Component 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T08:54:35.433

我很确定这是不可能的。

您必须在该变量中添加“com_name”名称，并且它不应该因每种语言而改变。

您可以在此处阅读有关此文件的更多信息：

[http://docs.joomla.org/Manifest_files](http://docs.joomla.org/Manifest_files)

# registration - 如何使用 ITKTools 将 4D 图像系列保存到单个 DICOM 文件？

> ID：14287711
> 
> 赞同：1
> 
> 时间：2013-01-11T22:29:06.717
> 
> 标签：registration, dicom, itk, elastix

我有几个 3D CT 扫描，我将使用 Metz 等人 (2010) 在 elastix 注册工具箱 ( [http://elastix.bigr.nl/wiki/index.php/Par0012](http://elastix.bigr.nl/wiki/index.php/Par0012) )中实现的分组注册方法进行注册. 该工具要求将 4D 数据（多个 3D 图像）封装在一个文件中。我知道这可以通过 ITKTools 工具箱的“pxcastconvert”工具来实现（因为 github [https://github.com/ITKTools/ITKTools/blob/master/src/castconvert/castconvert4D.cxx](https://github.com/ITKTools/ITKTools/blob/master/src/castconvert/castconvert4D.cxx)中有一个“castconvert4d.cxx” ) 但我无法找出正确的命令行参数。用法是：

```
<< "pxcastconvert\n"
<< "  -in      inputfilename\n"
<< "  -out     outputfilename\n"
<< "  [-opct]  outputPixelComponentType, default equal to input\n"
<< "  [-z]     compression flag; if provided, the output image is compressed\n"
<< "OR pxcastconvert\n"
<< "  -in      dicomDirectory\n"
<< "  -out     outputfilename\n"
<< "  [-opct]  outputPixelComponentType, default equal to input\n"
<< "  [-s]     seriesUID, default the first UID found\n"
<< "  [-r]     add restrictions to generate a unique seriesUID\n"
<< "           e.g. \"0020|0012\" to add a check for acquisition number.\n"
<< "  [-z]     compression flag; if provided, the output image is compressed\n\n" 
```

如果可能的话，您能否建议我如何使用 pxcastconvert 在单个文件 DICOM 或 MHD 文件中组合多个 3D 图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T10:27:31.363

我会推荐使用 MeVisLab。使用 DicomImport 模块，您可以将 DICOM 切片转换为 4D 卷，随后您可以使用 ImageLoad 模块打开并使用 itkImageFileWriter 模块以 ITK 格式保存。有一个免费版本的 MeVisLab 应该足以执行这些任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T09:25:02.630

你确定你提到的程序会成功吗？因为它似乎有 cast 和 convert 功能，而不是 compose。

我不知道是否有任何程序可以做到这一点，但你可以看看[http://www.itk.org/Wiki/ITK/Examples/VectorImages/ImageToVectorImageFilter](http://www.itk.org/Wiki/ITK/Examples/VectorImages/ImageToVectorImageFilter) 将 2d 标量输入更改为 3d 很容易以及输出向量。

# ios - 如何将自定义类添加到情节提要？

> ID：14287712
> 
> 赞同：1
> 
> 时间：2013-01-11T22:29:07.970
> 
> 标签：ios, objective-c, uistoryboard

我目前正在尝试实现一个我一直在搞乱的自定义单选按钮类（位于[https://github.com/t4ku/RadioButtonWithUIKit](https://github.com/t4ku/RadioButtonWithUIKit)）。这个单选按钮解决方案以编程方式绘制所有内容。

我想知道是否有使用通过情节提要添加的按钮的类似解决方案。我已经通过 Storyboard 获得了我想要的设计，并且更愿意以某种方式将按钮与我的单选按钮类“链接”。

任何新的想法或建议将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T00:36:24.047

您可以在身份检查器中更改 Storyboard 上对象的类（您可以手动输入类，而不是依赖下拉菜单）。然后，您可以随意链接对象。

如果 Storyboard 出于某种原因不接受 RadioButton 类，您还可以创建一个自定义 UIButton 类，该类继承自 RadioButton 类，然后以相同的方式使用它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-12T01:22:18.717

该控件基于`UIView`，因此在情节提要中只需添加一个新`View`对象，选择它，然后将`class`（在图像顶部）设置为`RadioButton`：

![在此处输入图像描述](../Images/d511cd2e127d66da33860e14aa888690.png)

除了放置它的空白视图之外，您将看不到任何东西，但是当您启动应用程序时它会正常工作。这至少会使调整大小、位置等变得更容易。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-12T10:20:04.970

如果我正确理解您的问题，要以编程方式引用添加到情节提要的按钮，您必须将 .h 文件中的变量名称链接到 .xib 文件中的实际按钮。如果您将以下行添加到您的 .h 文件中

```
@property (nonatomic) IBOutlet UIButton *theButton; 
```

然后，当您返回 .xib 时，情节提要面板的左侧应该有一个黄色立方体（文件的所有者）。如果你右键单击那个立方体，你应该得到一个出口列表。在包含按钮名称的行的末尾，应该有一个圆圈。如果您按住 Ctrl+单击并按住并将其拖动到情节提要中的按钮，则它应该像 .h 文件中的变量一样将其拖到情节提要中的按钮上。

所以现在当您引用您创建的变量名称时，您将引用故事板中的按钮。

# android - 我应该为 MenuItem 自定义布局使用什么填充、边距和大小？

> ID：14287716
> 
> 赞同：8
> 
> 时间：2013-01-11T22:29:21.337
> 
> 标签：android, icons, menuitem

我目前正在为我的 MenuItem 使用自定义布局：

![在此处输入图像描述](../Images/792a325a6608ecd75099f31448b4e828.png)

代码是基本的：

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

    <item
        android:id="@+id/menu_custom"
        android:actionLayout="@layout/menu_layout"
        android:showAsAction="always"/>

</menu> 
```

虽然在 Android 设计和指南中描述了以像素为单位的图标大小，但我不知道我应该为这个图标使用的边距、填充、宽度和高度，所以它在所有设备上看起来都是合法的。

我目前的布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/searchProgressWrapper"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

    <ImageButton
        android:id="@+id/ivfolder"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_gravity="center"
        android:scaleType="fitCenter"
        android:background="@drawable/abs__item_background_holo_dark"
        android:src="@drawable/ic_menu_archive" />

</RelativeLayout> 
```

最大的问题是，如您所见，图标的宽度完全错误，与其他 MenuItem 完全不同。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-11T22:33:45.557

`android:minWidth`应该是`56dip`，`android:paddingBottom`应该`android:paddingTop`是`8dip`。发现于`<sdk>/platforms/android-17/data/res/values/dimens.xml`：

```
<!-- Minimum width for an action button in the menu area of an action bar -->
<dimen name="action_button_min_width">56dip</dimen>

<!-- Vertical padding around action bar icons. -->
<dimen name="action_bar_icon_vertical_padding">8dip</dimen> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-07-19T08:24:30.567

```
View view = mToolbar.getMenu().findItem(R.id.spinner).getActionView();

view.setPadding(0,0,0,0); 
```

这对我有用。

# asp.net - asp.net 运行速度快，重启时慢

> ID：14287718
> 
> 赞同：1
> 
> 时间：2013-01-11T22:29:32.017
> 
> 标签：asp.net, sql-server, iis-6

为什么每次服务器宕机，asp.net重启后，重启几分钟后响应时间超快。我想是因为每个人都离开了服务器，而我是少数（或唯一）这么快回到服务器上的人之一？

我已经与我们的开发人员讨论过这个问题，他们说响应时间通常取决于服务器上的每个人（200 多个桌面），当你是那里唯一的人时，它就会飞起来。真的吗？那么这是否意味着我们需要更新、更快的网络服务器？

我不是程序员，但我认为可能有两个答案，一个是上面的开发人员说的是真的，二是系统正在累积某种临时文件，当服务器崩溃然后重新启动时它们会被清除。

我们如何证明谁可能是对的？从哪里开始寻找 asp.net 瓶颈？

windows server 2003 asp.net 3.0 iis6 12GB 内存

sql server 2005 (db admin说sql没有负载问题..)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T23:11:46.740

您可以遵循并检查您的服务器是否在限制下工作的一些非常基本的步骤是：

首先，您从 sysinternals 下载[Process Explorer](http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx)并运行它以查看两件事。

*   你的服务器在他们的内存限制上工作吗？

如果是，那么是什么程序吃掉了内存，通常 SQL Server 2005 使用大量内存用于数据库缓存，这是经过多次工作后才完成的。

*   服务器是否使用了他所有的计算能力，如果是，请检查哪个程序需要所有计算能力。

现在下一步，从 sysinternals 下载[TCPView](http://technet.microsoft.com/en-us/sysinternals/bb897437.aspx)，运行它并查看已完成的连接数、速度等……您可以看到异常情况，或者计算机是否也处于极限。

最后一步是对磁盘进行碎片整理。

还有我的 asp.net 会话是[锁定所有用户的整个视图](https://stackoverflow.com/questions/12284530/asp-net-server-does-not-process-pages-asynchronously/12285168#12285168)。因此，如果您在 Web 上有一个应用程序，用户太多，并且每个用户或某些用户长时间处理他们的呼叫，那么这可能会导致所有用户延迟。

# c++ - 从另一个 MPI 程序中启动 MPI 可执行文件

> ID：14287719
> 
> 赞同：0
> 
> 时间：2013-01-11T22:29:35.670
> 
> 标签：c++, mpi

我有两个程序，1.exe 和 2.exe，每个都使用 MPI。我想使用 mpirun 启动 1.exe，然后调用 2.exe 并等待它完成后再继续。我不需要程序之间进行通信，只需读取 2.exe 生成的文件并处理此输出。一旦启动，2.exe 应该使用分配给 1.exe 的所有处理器，因为它只是在等待。有没有从 1.exe 中调用 2.exe 的好方法？

我已经尝试过 MPI_Comm_Spawn 但似乎我需要在 1.exe 和 2.exe 之间设置一个内部通信器才能等待 2.exe 完成。但是，我无权访问 2.exe 的源代码来设置此通信器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T14:30:02.183

我可能错了，但是说 mpirun 已经启动了 n 个 1.exe 实例，每个实例都可以生成一个 2.exe 实例，要求它完成这项工作（通过命令行参数、环境变量或 2.exe 通常用于的任何其他机制知道该怎么做），这个实例将使用分配给 1.exe 实例的处理器。

然后 1.exe 只需等待 2.exe 完成，例如使用**waitpid**： http: [//linux.die.net/man/3/wait](http://linux.die.net/man/3/wait)或监控 2.exe 生成的文件。

重要的是 1.exe 不是活动的，所以不会消耗它的资源，但会让 2.exe 充分利用它。

# sql-server-2008 - 处理大量冗长的文本字段

> ID：14287726
> 
> 赞同：1
> 
> 时间：2013-01-11T22:30:00.707
> 
> 标签：sql-server-2008, database-design, varchar, page-size

我正在设计一个需要有相当多*（大约 15 个）*长`varchar`字段的 SQL Server 数据库，其中大部分我想分配至少*1024 或 2048*的长度。由于这显然会远远超出*8060*的页面大小，因此我意识到数据库可能会在访问此表时对性能造成很大影响。

我还考虑将这些叙述分组为类似的主题并制作*3 或 4 个单独的表格*，或者只创建一个带有`varchar(max)`字段和`int`表示叙述类型的表格：

```
create table Narrative
(
  narrative varchar(max),
  narrativeType int
) 
```

1.  原始设计是否会对性能产生重大影响？
2.  处理大型文本字段时可以使用哪些类型的最佳实践？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T05:38:16.300

我不声称我的回答是关于这个主题的最终决定。也许其他人可以补充这一点。

`VARCHAR(MAX)`由于列的大小，您将无法在列上构建聚集或非聚集索引。这将使您的桌子上的搜索变得非常缓慢。但是，您将能够使用[全文搜索](http://msdn.microsoft.com/en-us/library/ms142571%28v=sql.100%29.aspx)，这将显着提高性能。

就个人而言，如果可以避免的话，我不会将数据分成多个表。这样做的原因是它使查询同质数据变得很麻烦。

在 的情况下`Full Text Search\Indexing`，如果您的文本使用多种语言（FTS 取决于语言），您可能会想创建多个表。我通过在我的表上创建多个`Indexed Views`并在我的表上构建全文索引来解决这个问题`Indexed Views`

如果您期望大量数据，您可能需要考虑[分区](http://msdn.microsoft.com/en-us/library/ms188730%28v=sql.100%29.aspx)

最好阅读有关这些主题的更多信息，然后进一步完善您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T16:25:04.327

我决定继续将这些叙述拆分到它们自己的表中，并与主表保持 1:1 的关系。我不怀疑我会查询这些`varchar`字段中的值，也不需要对它们进行任何索引。此外，与原始表中的任何其他字段相比，它们的访问频率要低得多，因此将它们拉到单独的表中有助于集中数据库设计，甚至可以提高性能，因为只有在绝对必要时才需要处理它们.

# sql - 计划选择的数据驱动限制

> ID：14287729
> 
> 赞同：1
> 
> 时间：2013-01-11T22:30:13.763
> 
> 标签：sql, join, filter, restriction

我正在使用一个复杂的数据结构，我不太确定如何在单个 SQL 查询中解决它，尽管我的直觉告诉我这应该是可能的。

我所做的本质是尝试根据所选硬件模型显示给定供应商的可用计划的结果。结果应仅遵循可能的组合，并且计划包含当前作为键/值对存储在限制表中的限制。以下是我正在使用的简化：

（我将使用无线设备进行类比，因为几乎每个人都熟悉手机）

型号表

* * *

```
model_id
vendor_id
is_data
is_voice
is_4g
is_3g 
```

样本数据：

```
model_id,vendor_id,is_data,is_voice,is_4g,is_3g
DeviceA,Sprint,1,1,0,1
DeviceB,Sprint,1,0,1,0
DeviceC,Sprint,0,1,0,0
DeviceD,Sprint,0,1,0,0
DeviceE,Sprint,0,1,0,0
DeviceF,Verizon,1,1,0,1
DeviceG,Verizon,1,0,1,0
DeviceH,Verizon,0,1,0,0
DeviceI,Verizon,0,1,0,0
DeviceJ,Verizon,0,1,0,0
DeviceK,Tmobile,1,1,0,1
DeviceL,Tmobile,1,0,1,0
DeviceM,Tmobile,0,1,0,0
DeviceN,Tmobile,0,1,0,0
DeviceO,Tmobile,0,1,0,0 
```

计划表

* * *

```
plan_id
vendor_id
name 
```

样本数据：

```
plan_id,vendor_id,name
PlanA,Sprint,Big Data Only Plan
PlanB,Verizon,Small Data Only Plan
PlanC,Sprint,300 Min Plan
PlanD,Verizon,900 Min Plan
PlanE,Verizon,Big Data Only Plan
PlanF,Tmobile,Small Data Only Plan
PlanG,Tmobile,300 Min Plan
PlanH,Tmobile,1000 Min Plan 
```

plan_restrictions 表

* * *

```
restriction_id
vendor_id
plan_id
type
value 
```

样本数据：

```
restriction_id,vendor_id,plan_id,type,value
1,Sprint,PlanA,radio,3G
2,Sprint,PlanA,device_type,data
3,Verizon,PlanB,radio,4G
4,Sprint,PlanC,radio,3G
5,Sprint,PlanC,device_type,voice
6,Verizon,PlanD,radio,3G
7,Verizon,PlanD,device_type,voice
8,Verizon,PlanE,radio,3G
9,Verizon,PlanE,device_type,voice
10,Tmobile,PlanF,device_type,data
11,Tmobile,PlanG,device_type,voice
12,Tmobile,PlanH,device_type,voice 
```

键控限制（实际上我接近 50，这是相同类型的表示）：

* * *

```
type / value possibilities
radio / 3g, 4g
device_type / data, voice 
```

我对重组表以使其更容易重新查询的可能性持开放态度，但是我需要保留一定的灵活性，因为我确实有大约 1000 个模型、1000 个计划和大约 2000 个限制。

我个人认为这里存在某种结构问题，即。模型可能应该将它们的元素作为键/值对放在一个单独的表中，但这更加复杂，而且我还没有确定如何首先正确应用数据驱动的限制。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T23:14:30.010

这样的事情应该让你开始：

```
SELECT p.name
FROM Plans as p
INNER JOIN plan_restriction as pr
ON p.plan_id = pr.plan_id
INNER JOIN models as m
ON pr.model_id = pr.model_id
WHERE p.vendor_id = 1 AND m.is_data = 1 AND is_4g = 1 AND ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T00:12:35.547

我与其他 dba 在这里踢了大约最后一个小时，并认为我解决了它。我为任何发现自己处于类似情况的人发布此信息。最大的问题是我离数据太近了，并且试图在计划需求和模型属性之间强制执行“有意义的”属性和限制......这并不是真正必要的。

我可以将我的数据重组为下表：

*   计划
*   限制
*   楷模

* * *

*   计划与限制有多对多的关系
*   模型与限制有多对多的关系

* * *

我会解决与 intirum 表的多对多关系

*   Plans_Restrictions
*   Models_Restrictions

* * *

这会让我有愚蠢的“限制”，比如“红色的东西”

我会查询为一个链：

*   计划
*   Plans_Restrictions
*   限制
*   Models_Restrictions
*   楷模

IE。要获取符合计划的所有模型及其属性信息（限制信息），我可以使用：

```
SELECT 
    M.* 
    ,R.*
FROM (
    SELECT P1.*
    FROM Plans P1
    WHERE id_vendor = @id_vendor
) P

INNER JOIN Plans_Restrictions PR
ON P.plan_id = PR.plan_id

INNER JOIN Restrictions R
ON PR.property = R.property

INNER JOIN Model_Restrictions MR
ON R.property = MR.property

INNER JOIN Model M
ON MR.model_id = M.model_id 
```

为了获得符合模型条件的所有计划，我将反转 5 表链式连接。

谢谢 Abe .. 详细写下来解释它，并理解为什么你的建议没有解决我的问题真的帮助我理解我的问题是什么以及我真正需要做什么。如果没有你，我想我不会这么快解决它。

# c++ - Qt 嵌入式触摸屏在收到 MouseButtonRelease 之前未收到 QMouseEvents

> ID：14287733
> 
> 赞同：2
> 
> 时间：2013-01-11T22:30:33.613
> 
> 标签：c++, linux, qt, touchscreen, qtembedded

我在带有触摸屏的小型 ARM 嵌入式 Linux 设备上使用 Qt 4.8.3。我用 tslib 配置了我的触摸屏并对其进行了校准，因此 /etc/ 中有一个指针文件。我的触摸事件的位置工作得很好，但无论我在鼠标按下或鼠标释放事件之前获得鼠标移动的 QEvent。此外，在我从触摸屏上抬起手指之前，我不会收到任何与鼠标相关的事件。我需要正常的行为，我按下触摸屏并立即接收鼠标按下事件，然后是我的移动事件（如果有的话），然后是当我抬起手指时的鼠标释放事件。

```
So what I'm seeing from the point of view of events received when I pressed down and then release looks like:

50 SockAct <-- Received right at press down
           <-- NO Other events received until press released
           <-- Now release by lifting finger from screen
50 SockAct <-- Immediately received a 50 ( SockAct ) and the rest of the events below:
2          <-- 2 == mouse down
2          <-- 2 == mouse down
3          <-- 3 == mouse release / up
3          <-- 3 == mouse release / up
77         <-- 77 == redraw 
```

我还尝试通过实现以下 qwsEventFilter 来查看 QWS 服务器事件，以查看进入我的 QApplication 的 QWS 事件：

```
/// For investigation mouse events
#include <QWSServer>
#include <QWSMouseHandler>
#include <QWSEvent>

bool GUIApp::qwsEventFilter(QWSEvent *e)
{

    qDebug() << e->type;

    if(e->type == QWSEvent::Mouse) {

        QWSMouseHandler *curMouse = QWSServer::mouseHandler();
        qDebug() << "mouse position is: " << curMouse->pos();

    }

    return false;

    /*
    QWSEvent::NoEvent   0   No event has occurred.
    QWSEvent::Connected 1   An application has connected to the server.
    QWSEvent::Mouse 2   A mouse button is pressed or released, or the mouse cursor is moved. See also Qt for Embedded Linux Pointer Handling.
    */

} 
```

现在，当我启动我的应用程序时，我在触摸屏幕后看到了相同的行为——即打印以下内容：

```
2 <-- Nothing is printed until I release my finger from the screen!
mouse position is:  QPoint(89,312) 
2 
mouse position is:  QPoint(89,312) 
```

正如你所看到的，只要我松开手指，我就会得到 2 个事件，大概是按下并松开。

我在 Linux 中的 /dev/input/touchscreen 设备上运行了“evtest”，并且在按下屏幕时肯定会立即看到一个触摸事件。在我抬起手指之前，我不会收到鼠标释放事件，因此驱动程序的行为符合预期。当我按下时也没有“重复”触地事件 - 这只是一次按下的事件，但行为正确。

我不确定为什么我会看到我的行为。Qt 和输入设备之间一定存在翻译问题。

此外，如果我在处理 MouseButtonRelease 接收到的事件时添加一个 3 毫秒的小延迟，那么我会在应用程序的工作方式方面获得所需的行为，但在我释放新闻之前我仍然没有收到我的鼠标事件。我根本不需要添加延迟，我希望我的鼠标向下发生，然后是任何移动，最后是鼠标向上事件

有谁知道如何解决这个问题或可能是什么原因造成的？非常感谢你！

--

在我真正抬起手指之前，我看不到以下打印出来的内容：

```
...
MOVE TYPE:  5 
"Mouse move (382,129)" 
MOUSE BUTTON PRESS TYPE:  2 
"Mouse Button Press (1)" 
MOUSE BUTTON RELEASE TYPE:  3 
"Mouse Button Release (1)" 
.... 
```

这是我的 eventFilter，我在其中检查我的应用程序中收到的事件：

```
////////////////////////////////////////////////////////////////////////////////////////////////////////////
// Just for kicks print out the mouse position
if (event->type() == QEvent::MouseButtonPress)
{
    qDebug() << "MOUSE BUTTON PRESS TYPE: " << event->type();
    QMouseEvent *mouseEvent = static_cast<QMouseEvent*>(event);
    qDebug() << QString("Mouse Button Press (%1)").arg(mouseEvent->button());
}
if (event->type() == QEvent::MouseMove)
{
    qDebug() << "MOVE TYPE: " << event->type();
    QMouseEvent *mouseEvent = static_cast<QMouseEvent*>(event);
    qDebug() << QString("Mouse move (%1,%2)").arg(mouseEvent->globalX()).arg(mouseEvent->globalY());
}
if (event->type() == QEvent::MouseButtonRelease)
{
    qDebug() << "MOUSE BUTTON RELEASE TYPE: " << event->type();
    QMouseEvent *mouseEvent = static_cast<QMouseEvent*>(event);
    delay();
    qDebug() << QString("Mouse Button Release (%1)").arg(mouseEvent->button());
    //return true; // Gobble the event
}
//////////////////////////////////////////////////////////////////////////////////////////////////////////// 
```

这是我的延迟功能：

```
void Monitor::delay()
{
    QTime dieTime = QTime::currentTime().addMSecs(3);
    while( QTime::currentTime() < dieTime )
    QCoreApplication::processEvents(QEventLoop::AllEvents, 100);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T19:06:53.720

已解决-我找到了这个线程：[https](https://github.com/kergoth/tslib/issues/10) ://github.com/kergoth/tslib/issues/10 ，它概述了同样的问题。Atmel MXT Maxtouch 驱动程序在 Tslib 中似乎是一个问题。注释掉 ts.conf 文件中的 Variance 模块解决了我的问题 - 我现在在触摸屏幕后立即收到鼠标按下事件。

# jersey - 如何将数据从 ContainerRequestFilter 传递到 Jersey 框架中的资源

> ID：14287734
> 
> 赞同：5
> 
> 时间：2013-01-11T22:30:35.463
> 
> 标签：jersey, jax-rs

我试图将 ContainerRequestFilter 用于我的 rest webservice 应用程序来验证输入请求。一旦请求通过身份验证，我需要传递一个对象来获取所有信息。有人可以让我知道我们如何实现这一目标吗？

谢谢你的帮助..

〜女士

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-12T12:30:43.307

在您的过滤器中，您需要拉入 servlet 请求：

```
@Context
private transient HttpServletRequest servletRequest; 
```

并将您的数据存储为属性：

```
this.servletRequest.setAttribute("My data", myObject); 
```

然后在资源中，您可以拉入 servletRequest 并使用：

```
Object myObject = this.servletRequest.getAttribute("My data"); 
```

# javascript - 在 Magento 一页结帐页面中添加 SSL 授权 javascript 代码

> ID：14287735
> 
> 赞同：1
> 
> 时间：2013-01-11T22:30:38.957
> 
> 标签：javascript, magento, checkout

我一直在尝试在一页 Magento 结帐的边缘添加 SSL 签名机构提供的一串 javscript 代码。在结帐的第一步之后，Magento 中的某些东西似乎正在剥离 javascript 代码，但我找不到有问题的代码。其他人注意到这个问题或解决方案吗？

我在 \app\design\frontend\default\myTheme\template\checkout\onepage\progress.phtml 的底部添加了 JS 代码。

代码如下所示：

```
 <span id="siteseal"><script type="text/javascript" src="https://seal.godaddy.com/getSeal?sealID=xxx"></script></span> 
```

起初我以为它是隐藏的，但徽标出现在第一步但在后续步骤中消失了，但是“siteseal”跨度仍然存在 - 空

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T04:13:37.370

虽然进度部分的初始输出是基于 PHP 的，但 Magento会在您一步一步移动时通过 AJAX**更新页面的进度部分。**这由以下代码处理

```
#File: skin/frontend/base/default/js/opcheckout.js
reloadProgressBlock: function(toStep) {
    var updater = new Ajax.Updater('checkout-progress-wrapper', this.progressUrl, {
        method: 'get',
        onFailure: this.ajaxFailure.bind(this),
        parameters: toStep ? {toStep: toStep} : null
    });
}, 
```

如果您查看[Ajax.Updater](http://prototypejs.org/doc/latest/ajax/Ajax/Updater/)的文档，您会看到 Magento 没有传入的附加选项

> evalScripts（布尔值；默认为 false）：是否应评估响应文本中的元素。

这意味着当 Magento 通过 Ajax 更新页面的该部分时，不会评估脚本，这是您看到所描述行为的最可能原因。

为了解决您的问题，我会跳过将此代码添加到`progress.phtml`模板中，而是使用以下布局更新（在`local.xml`或其他地方，如果这是您的风格）

```
<layouts>
    <checkout_onepage_index>
        <reference name="right">
            <block type="core/text" name="my_extra_stuff" before="checkout.progress.wrapper">
                <action method="setText"><text><![CDATA[
                <span id="siteseal"><script type="text/javascript" src="https://seal.godaddy.com/getSeal?sealID=xxx"></script></span>
                ]]></text></action>
            </block>
        </reference>
    </checkout_onepage_index>
</layouts> 
```

如果您希望您的代码低于进度内容，只需`before="checkout.progress.wrapper"`从布局更新 xml 中删除。

# css - 如何使未知宽度的div块居中？

> ID：14287742
> 
> 赞同：1
> 
> 时间：2013-01-11T22:31:07.157
> 
> 标签：css, html

我正在努力从我的网站上删除表格，并且只是学习所涉及的 div 技巧。我[的主页](http://r0k.us/rock/games/CoH/HallsOfHeroes/)目前有一个居中的表格嵌套在另一个表格中。对于刚刚学习非表方法的人来说，移除外部表有点棘手，但它已经完成了。

我的问题是，内表非常容易居中（CSS 中的“margin:0 auto”），但它的[div 等价物](http://r0k.us/rock/junk/HoH_DivVsTable.png)不是。如果我指定绝对宽度（例如 640 像素），则 div 将居中，但由于我使用用户的字体大小进行设计（不是我指定的），我不知道给定用户的实际宽度。

我已经简化了主页并将其联机（[test.html](http://r0k.us/rock/games/CoH/HallsOfHeroes/test.html)和[HoH.css](http://r0k.us/rock/games/CoH/HallsOfHeroes/HoH.css) 这是 test.html 的概述[图像](http://r0k.us/rock/junk/HoH_HPproblem.jpg)。

对不起所有的链接。但是在另一个漂浮的东西里面有一个漂浮的东西，我不知道什么是相关的。文件 test.html 包含 63 行格式化的 HTML。640px hr 仅供参考；它不会是最后一页的一部分。

PS：我删除表格是因为当我要求网站评论时，几乎每个人的第一条评论都是“摆脱该死的表格”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T22:49:11.270

可能您不应该担心用户的字体大小，因为所有现代浏览器都会缩放整个页面，不仅是字体大小，而且每个人都会对您的固定宽度感到满意。

您也可以使用 EM 值代替 PX，1em = 以 px 为单位的字体大小。如果您的字体大小为 16px，则可以将 640px 更改为 40em。例如，如果有人有两倍大的字体，他会得到两倍宽的块。

如果你想要未知宽度块居中的 css 解决方案，你可以使用`inline-block`和`text-align:center`：http: [//jsfiddle.net/rBc4T/](http://jsfiddle.net/rBc4T/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T23:06:31.107

使用 CSS 和 jQuery -

CSS -

```
#divID{ left:50%;} 
```

jQuery -

```
(function(){
var marginLeft = $('#divID').width();
$('#divID').css('marginLeft','-'+ marginLeft /2 +'px');
}); 
```

# python - re.sub 在 python 中添加换行符

> ID：14287743
> 
> 赞同：0
> 
> 时间：2013-01-11T22:31:11.147
> 
> 标签：python, xml, regex

我有以下文字：

```
xml = '''
<accessibility_info>
    <accessibility role="captions" available="true" />
</accessibility_info>
<crew_member billing="top"
    <display_name>John Viscount</display_name>
</crew_member>
<products>
    <territory>GB</territory>
</products>''' 
```

我需要删除以下`<crew_member>`块。这就是我目前正在做的事情：

```
clean_xml = re.sub('<crew_member>.*</crew_member>', '', metadata_contents, 
                    flags=re.DOTALL) 
```

但是，它还添加了一个换行符：

```
<accessibility_info>
    <accessibility role="captions" available="true" />
</accessibility_info>

<products>
    <territory>GB</territory>
</products> 
```

我将如何更改正则表达式以去除换行符，所以它看起来像：

```
<accessibility_info>
    <accessibility role="captions" available="true" />
</accessibility_info>
<products>
    <territory>GB</territory>
</products>' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T22:36:09.077

试试这个

`print re.sub('<crew_member([^\>]*)>.*</crew_member>\n', '', xml, flags=re.DOTALL)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-01T13:03:12.437

我知道这有点旧，但我想说新行实际上来自用于将新文本写入文件的方法。如果我使用`print()`添加新行，但如果我使用例如`sys.stdout.write()`，则不会添加新行。

# python - ImportError 使用 Flask 和 wsgi 和 Apache2

> ID：14287744
> 
> 赞同：0
> 
> 时间：2013-01-11T22:31:14.213
> 
> 标签：python, apache, apache2, flask, wsgi

我正在尝试使用 Flask、wsgi 和 apache2 建立一个简单的网站。我在尝试从 site.py 导入 site.wsgi 时遇到以下错误：

```
[Fri Jan 11 16:42:20 2013] [error] [client 174.48.34.188] mod_wsgi (pid=15170): Target WSGI script '/home/www/site/site.wsgi' cannot be loaded as Python module.
[Fri Jan 11 16:42:20 2013] [error] [client 174.48.34.188] mod_wsgi (pid=15170): Exception occurred processing WSGI script '/home/www/site/site.wsgi'.
[Fri Jan 11 16:42:20 2013] [error] [client 174.48.34.188] Traceback (most recent call last):
[Fri Jan 11 16:42:20 2013] [error] [client 174.48.34.188]   File "/home/www/site/site.wsgi", line 1, in <module>
[Fri Jan 11 16:42:20 2013] [error] [client 174.48.34.188]     from site import app as application
[Fri Jan 11 16:42:20 2013] [error] [client 174.48.34.188] ImportError: cannot import name app 
```

这是我的site.py：

```
from flask import Flask, render_template

app = Flask(__name__)

@app.route('/')
def home_page():
    return render_template('index.html')

app.debug = True
if __name__ == '__main__'
    app.run() 
```

这是我的site.wsgi：

```
from site import app as application 
```

这是我的 apache 配置：

```
<VirtualHost *:80>
    ServerAdmin my@email.here
    ServerName mywebsite.here
    DocumentRoot /home/www/site

    WSGIDaemonProcess site user=${APACHE_RUN_USER} group=${APACHE_RUN_GROUP} threads=5
    WSGIScriptAlias / /home/www/site/site.wsgi

    <Directory /home/www/site>
        WSGIProcessGroup site
        WSGIApplicationGroup %{GLOBAL}
        WSGIScriptReloading On
        Order deny,allow
        Allow from all
    </Directory>

    ErrorLog ${APACHE_LOG_DIR}/error.log
</VirtualHost> 
```

我已经搜索了一段时间试图弄清楚这一点，但我很难过。我对网页设计也很陌生，所以这可能很愚蠢。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T03:06:12.083

找到了答案 - 正如 Audrius 在评论中所说，这是一个冲突，因为我将文件命名为 site.py。我在必要的地方将其更改为 mysite.py，并将以下内容添加到 mysite.wsgi（以前的 site.wsgi）：

```
import sys
sys.path.insert(0, '/home/www/mysite.wsgi') 
```

# javascript - Javascript 布尔类型

> ID：14287747
> 
> 赞同：1
> 
> 时间：2013-01-11T22:31:26.690
> 
> 标签：javascript

> **可能重复：**
> [为什么 !new Boolean(false) 在 JavaScript 中等于 false？](https://stackoverflow.com/questions/8695341/why-does-new-booleanfalse-equals-false-in-javascript)

```
var b = new Boolean(null);

alert(b instanceof Boolean);

 if(b) {
    alert('cv');
    alert(b.toString());
 } 
```

为什么如果代码块被执行？b 应该是布尔类型并被评估为假吗？

请解释谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T22:35:36.740

代码块执行，因为对象存在并且不是未定义的，尽管它当前没有值。javascript中布尔对象的要点是将非布尔对象转换为“真”或“假”值。

如果你有

```
if( b.valueOf() ); 
```

这将评估对象的实际价值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T22:32:29.357

所有`object`s 都是真实的，除了`null`。因此，即使你写`new Boolean(false)`得很具体，它仍然是真实的。

这就是你从不写作的原因`new Boolean`。要转换为布尔值，只需使用`!!`

# javascript - 如何以json格式获取返回的php页面？

> ID：14287749
> 
> 赞同：0
> 
> 时间：2013-01-11T22:31:43.473
> 
> 标签：javascript, jquery

我正在尝试获取返回的php页面的内容，如下：

```
(<?php echo json_encode(array("color"=>"Red")); ?>) 
```

我的 JavaScript：

```
<script>
;
    $.get("page.php", 
        function(data){
            $('body').append("Color: " + data.color)
    }, "json");
;
</script> 
```

我的 page.php：

```
<?php echo json_encode(array("color"=>"Red")); ?> 
```

如何让它发挥作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T22:37:08.257

试试这个

```
<?php    
header('Content-type: application/json');
echo json_encode(array("color"=>"Red"));
die; 
```

# wix - 是否有用于安装 MMC 管理单元/扩展的 WIX 扩展？

> ID：14287751
> 
> 赞同：2
> 
> 时间：2013-01-11T22:31:45.417
> 
> 标签：wix, wix3.6, mmc, wix2

似乎以前[在 Wix2 中有一个 MMC 扩展，](http://wix.sourceforge.net/manual-wix2/mmc_xsd_snapin.htm)建议 xmlns [http://schemas.microsoft.com/wix/MmcExtension](http://schemas.microsoft.com/wix/MmcExtension) - 尝试读取此 URL 当前会导致错误页面。

我似乎无法找到 Wix3.6 的等价物，这是故意（重新）移动，还是只是丢失了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T15:48:32.420

它已被删除，您必须手动创建注册表项。[此链接](http://windows-installer-xml-wix-toolset.687559.n2.nabble.com/registering-an-MMC-snap-in-td3172059.html)很好地总结了您需要做的事情。

旧扩展只是上面链接中包含的代码的包装器。我不知道他们为什么把它拿出来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-18T09:52:48.247

您也可以使用 heat 工具（您可以在 wix bin/ 目录中找到它）。使用很简单，你只需要导出 installutil 生成的注册表项并启动命令：

`heat reg <your_exported_registry> -o <output_filename>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-24T18:57:21.800

**相关信息：**
生成注册表项后，我们的 MMC 管理单元的更大问题是它正在扩展 AD 用户和计算机管理单元 - 特别是扩展其他目录对象类型的节点类型。

我曾希望这样的 wix 扩展能够涵盖这些，但它不在早期版本中。

在等待 Microsoft 解决过度保护 ADUAC、SMADUAC 和 GPO 等的 Windows 文件/注册表保护问题时，我们的客户已要求我们解决此问题。

使用自定义操作，我们从 WRP TrustedInstaller 获得所有权，并授予 Adminstrators 组访问权限以修改 NodeType 密钥，以便可以添加其他密钥。

**最初来自 MSDN 示例的**
[函数 SetPrivilege 示例代码 获取](http://msdn.microsoft.com/en-us/library/windows/desktop/aa446619%28v=vs.85%29.aspx)
[所有权示例代码](http://msdn.microsoft.com/en-us/library/windows/desktop/aa379620%28v=vs.85%29.aspx)
[修改 ACL 示例代码](http://msdn.microsoft.com/en-us/library/windows/desktop/aa379283%28v=vs.85%29.aspx)- 已调整 获取所有权以扩展 ACL 而不是创建新 ACL 并爆破旧 ACL

**一些进一步的注意事项：**
Win7 之前 - 获取所有权的替代方法是使用 SE_RESTORE_NAME 以允许直接更改 ACL，但是 Win7 的安装程序进程故意阻止它，这也阻止了获取所有权能够恢复原始所有者。

平台类型：SetNamedSecurityInfo 不允许针对 64 位注册表执行 32 位 - Windows 操作系统限制仍然存在于 Windows 8 中，但是它允许 64 位执行来解决 64 和 wow6432 部分。对于二进制自定义操作，至少需要一个特定于平台的 dll。

# c++ - 有没有办法确定上下文是否允许使用“this”？

> ID：14287752
> 
> 赞同：3
> 
> 时间：2013-01-11T22:31:46.327
> 
> 标签：c++, c++11, macros, this, compile-time

有没有办法确定上下文是否允许使用“this”？

我的目标是编写一个通用宏，用于记录，根据上下文使用“this”（例如，用于打印“this”的值）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T23:05:39.230

即使你能做到这一点，你也永远无法使用它。即使代码永远无法被调用，它也必须是合法的，`this`在这种情况下提及它是不合法的。考虑：

```
if (this_is_legal())
   std::cout << this << std::endl;
else
   std::cout << "not in member function" << std::endl; 
```

好吧，即使魔法`this_is_legal`奏效，这段代码也不会编译。因为第一`std::cout`行不会在`this`不合法的上下文中编译。

`const void *getThis() { return NULL; }`作为全局函数和`const void *getThis() { return this; }`成员函数，你可以做一个非常丑陋的事情。这会给你一个返回`NULL`or的函数`this`。依靠未定义的行为，您必须希望`this`指针在没有成员变量的基类中不会被修改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T23:18:50.550

如果您有能力为调试目的定义基类，则定义全局和类成员`debug`函数。成员函数可以使用`this`，而全局函数可以使用其他信息，范围规则可以选择正确的`debug`函数。

另一种方法是定义两个宏：

```
#define ENTER_CLASS_SCOPE
# undef IN_CLASS
# define IN_CLASS 1

#define EXIT_CLASS_SCOPE
# undef IN_CLASS
# define IN_CLASS 0 
```

并拥有`#define IN_CLASS 0`最初。然后，您可以在定义成员函数的文件的顶部和末尾使用这些宏，`cpp`并检查宏中的标志`DEBUG`。

# c# - 如何自动使用验证嵌套对象

> ID：14287761
> 
> 赞同：5
> 
> 时间：2013-01-11T22:32:24.893
> 
> 标签：c#, .net, nhibernate

说有`class A`一个参考`class B`像这样

```
class A
{
    [NotNull]
    string Alpha;
    B bObject;
}

class B
{
   [NotNull]
   string Beta;
}

A a = new A();
a.Alpha = "test"
a.bObject = new b();
a.bObject.Beta = null; 
```

现在，当为 A 的实例调用 Create 之类的东西时，代码调用`NHibernate.Validator.Engine.ValidatorEngine.Validate`

但是，它只验证`A (Alpha)`. 当`NHibernate`尝试持久化对象时，它会失败，因为数据库不允许*null*为`Object`.

是否可以对其进行配置，以便验证`A`也验证 的属性`B`？

*编辑：

我目前解决这个问题的方法是手动调用`Validate(A.bObject)`存储库需要创建/更新的任何地方`A`，例如：

在存储库中`A`

```
public void Update(A entity)
{
    //I want to avoid having to do this in every class repository that has a 
    //reference to B
    var errorsList = valEngine.Validate(entity.bObject);

    if (errorsList .Length == 0)
    {
        status = base.Create(entity); 
        //Simply calls the appropriate NH function to persist the object
    }
} 
```

如何避免重复`B`每次验证的行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T01:58:02.187

从[文档](http://nhforge.org/wikis/validator/nhibernate-validator-1-0-0-documentation.aspx)中，您可以使用 Valid 属性来：

**在关联对象上递归执行验证。如果对象是集合或数组，则递归验证元素。如果对象是 Map，则递归验证值元素。**

你试过了吗？

```
class A
{
    [NotNull]
    string Alpha;

    [Valid]
    B bObject;
} 
```

# php - Wordpress 循环，回显帖子值？

> ID：14287764
> 
> 赞同：0
> 
> 时间：2013-01-11T22:32:34.793
> 
> 标签：php, wordpress

我有当前循环来显示帖子，但我似乎无法获得要填充的标题或内容。我错过了什么？

```
 <?php
        // LOOP ARGUMENTS
        $args = array( 'post_type' => 'cbd_slider', 'posts_per_page' => -1 ); // -1 Shows ALL Posts
        $loop = new WP_Query( $args );
        while ( $loop->have_posts() ) : $loop->the_post();

        // CUSTOM CONTENT
        $slideLink = get_post_meta($post->ID,"slideLink",true);
        $thumb = wp_get_attachment_image_src(get_post_thumbnail_id(), 'thumbnail_name');
        $imgURL = (isset($thumb[0]) ? $thumb[0] : get_template_directory_uri() . "/images/placeholder.jpg");
        ?>

        <li class="clearfix"><!-- Start of featured slide -->
              <a href="<?php echo $slideLink ?>">
                    <img src='<?php echo get_template_directory_uri(); ?>/thumb.php?src=<?php echo urlencode($imgURL); ?>&h=330&w=496' alt='featuredimage'  /></a>

              <div class="description">
                    <h2>TITLE GOES HERE</h2>
                    <p>POST CONTENT GOES HERE</p>
                    <a href="<?php echo $slideLink ?>" class="more"> more </a>
              </div>
        </li><!-- End of featured slide --><?php /* END WHILE AND RESET QUERY */ endwhile; wp_reset_query(); ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T22:40:06.703

你试过`the_title`吗？代替`<?php the_title(); ?>`你的`TITLE GOES HERE`和？`<?php the_content(); ?>``CONENT GOES HERE`

# security - 密码符号、长度和“强度”

> ID：14287767
> 
> 赞同：3
> 
> 时间：2013-01-11T22:32:39.327
> 
> 标签：security, passwords, permutation, probability

注意：这与编程没有明确的关系，但我希望这可以从程序员的角度来解释。

关于当前的“密码强度等级”，我根本不了解两件事。这一切都与蛮力进入有关。（如果这些“密码强度等级”与除使用常用/流行密码之外的任何其他类型的违规行为有关，请告诉我）。

1) 只要密码系统允许使用它们，我是否包含数字/符号/大写字母又有什么关系？

例如，让我们说：

a) 系统接受的字符是 az、AZ、0-9，以及它们的“移位值”'！' 到 ')'，所以有 72 个可能的符号。

b) 我使用长度为 10 的密码，因此有 72^10 种可能性。

c) 我的密码不在前 10,000 个最常用/最流行的密码之列。所以剩下 72^10 - 10,000 种可能性。

像“sndkehtlyo”这样的全小写密码是否与“kJd$56H3di”具有相同的强度，因为它们都具有包含附加字符的相同可能性？无论我是否使用它们，蛮力算法是否都必须包含这些数字/符号/大写字母？似乎这些评级系统认为暴力尝试将首先尝试所有 26^n 小写密码，然后尝试所有 52^n 密码，然后是所有 62^n 密码，依此类推。

2）为什么这很重要？我还没有遇到任何密码系统在经过少量固定尝试（通常是 5 次）后不会将您锁定。如今，蛮力方法怎么可能奏效？

我觉得我在这里遗漏了一些基本的东西。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-11T22:40:06.370

1）破解密码不需要一次性发生。一个实施良好的蛮力破解可能首先迭代小范围的字符，然后进入大写字母和数字。首先从最简单的范围开始（可能只是小写的 az）会找到那些不幸构建*弱*密码的密码。它们也可能首先从字典攻击或*最常用密码*攻击开始，因为它们花费的时间很少。

2) 破解者不会通过某些在线服务的登录提示进行暴力破解。任何真正想要访问帐户的人都会检索用户密码的哈希并在他们自己的机器上破解它，而不是通过互联网。虽然实际上有无限种方法来散列密码，但有一些非常常见的方法可以通过诸如散列字符长度等属性来识别。[您可以在此 Wikipedia 文章](http://en.wikipedia.org/wiki/Cryptographic_hash_function#Cryptographic_hash_algorithms)中阅读有关常见哈希算法的更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T23:44:14.770

1) 所有人造密码都不是完全随机的。换句话说，考虑到人为因素（例如记忆性），密码空间的概率分布是不均匀的。

2）尝试次数限制用于**身份验证**，这是一种访问控制的手段。它与密码强度无关。它是系统级控制方法，通常是可配置的。当然，它是对抗暴力攻击的有效武器，但是没有这种访问控制方法仍然可以设计一个系统。此外，黑客可能不会直接破解系统，但他们可以从网络中截获包含加密密码或其他任何内容的用户数据，并使用暴力或其他方式破解它。因此，高强度密码方案、高安全性密码方法和精心设计的访问系统可以共同构成一个强大的安全系统。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T22:35:17.423

一般来说，使用蛮力系统，你是正确的。但是，许多自动密码破解者通过尝试常见的英语单词及其组合来开始搜索。例如：运动队、州、日期等……因此，通过拥有这些特殊字符，它立即消除了很多这些可能性。一般来说，如果你担心暴力破解，长得多的密码比带有特殊字符的短密码更安全。

# base64 - CFML 中 toBase64() 的不同输出在 2 台不同的机器上

> ID：14287773
> 
> 赞同：8
> 
> 时间：2013-01-11T22:33:25.243
> 
> 标签：base64, railo, rc4-cipher, cfml

**最终编辑：**已解决，将本地开发人员升级到 railo 3.3.4.003 解决了该问题。

* * *

我必须对一些字符串进行 RC4 加密并将它们进行 base64 编码，并且我遇到了一种情况，即相同的输入将在 2 个不同的开发设置上生成不同的输出。

例如，如果我`test2@mail.com`
在一台机器 (DEV-1) 上有一个字符串，我将得到：`DunU+ucIPz/Z7Ar+HTw=`
而在另一台机器 (DEV-2) 上，它将是：`DunU+ucIlZfZ7Ar+HTw=`

首先，我通过[此处找到的函数](http://www.4guysfromrolla.com/webtech/010100-1.shtml)对其进行 rc4 加密。接下来我将它喂给：`toBase64( my_rc4_encrypted_data, "iso-8859-1")`

据我所知，两者的 rc4 加密输出是相同的（或者我遗漏了一些东西）。下面是两台机器的 SERVER 变量以及加密函数。

这是我们必须忍受的事情，还是我可以做些什么来“妥善处理”（因为缺乏更好的词）。我担心将来这会咬我，想知道它可以避免。

**编辑 1：** my_rc4_encrypted_data.getBytes() 的输出返回：dev-1：

```
Native Array (byte[])
14--23--44--6--25-8-63-63--39--20-10--2-29-60 
```

开发-2：

```
Native Array (byte[])
14--23--44--6--25-8-63-63--39--20-10--2-29-60 
```

（没有编码传递给`getBytes()`）

**DEV-1（远程）**

```
server.coldfusion
productname Railo
productversion  9,0,0,1

server.java
archModel   64
vendor  Sun Microsystems Inc.
version 1.6.0_26

server.os
arch    amd64
archModel   64
name    Windows Server 2008 R2
version 6.1

server.railo
version 3.3.2.002

server.servlet
name    Resin/4.0.18 
```

**DEV-2（本地）**

```
server.coldfusion
productname     Railo
productversion  9,0,0,1

server.java
vendor  Oracle Corporation
version 1.7.0_01

server.os
arch    x86 
name    Windows 7
version 6.1

server.railo
version 3.2.2.000

server.servlet
name    Resin/4.0.18 
```

**RC4 功能：**

```
function RC4(strPwd,plaintxt) {
  var sbox = ArrayNew(1);
  var key = ArrayNew(1);
  var tempSwap = 0;
  var a = 0;
  var b = 0;
  var intLength = len(strPwd);
  var temp = 0;
  var i = 0;
  var j = 0;
  var k = 0;
  var cipherby = 0;
  var cipher = "";

  for(a=0; a lte 255; a=a+1) {  
    key[a + 1] = asc(mid(strPwd,(a MOD intLength)+1,1));
    sbox[a + 1] = a;
  }

  for(a=0; a lte 255; a=a+1) {  
    b = (b + sbox[a + 1] + key[a + 1]) Mod 256;   
    tempSwap = sbox[a + 1];
    sbox[a + 1] = sbox[b + 1];
    sbox[b + 1] = tempSwap;    
  }

  for(a=1; a lte len(plaintxt); a=a+1) {  
    i = (i + 1) mod 256;
    j = (j + sbox[i + 1]) Mod 256;    
    temp = sbox[i + 1];
    sbox[i + 1] = sbox[j + 1];
    sbox[j + 1] = temp;
    k = sbox[((sbox[i + 1] + sbox[j + 1]) mod 256) + 1];    
    cipherby = BitXor(asc(mid(plaintxt, a, 1)), k);
    cipher = cipher & chr(cipherby);      
  }
  return cipher;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T15:14:09.807

Leigh wrote:

> But be sure to use the same encoding in your test ie String.getBytes(encoding) (Edit) If you omit it, the jvm default is used.

Leigh is right - [RAILO-1393](https://issues.jboss.org/browse/RAILO-1393) resulted in a [change](https://github.com/getrailo/railo/commit/7ded821318ba9919f1a899929478fdbd7bf5d0d2#railo-java/railo-core/src/railo/runtime/functions/string/ToBase64.java) to toBase64 related to charset encodings in 3.3.0.017, which is between the 3.3.2.002 and 3.2.2.000 versions you are using.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T17:31:03.553

> 据我所知，两者的 rc4 加密输出是相同的（或者我遗漏了一些东西）。下面是两台机器的 SERVER 变量以及加密函数。

我建议将输出保存到两个文件，然后比较文件大小，或者更好的是文件比较工具。Base64 编码是将二进制数据转换为字符串数据的标准方法。

Assuming that your binary files are both exactly 100% the same, on both of your servers try converting the data to base 64 and then back to binary again. I would predict that only one (or neither) of the servers are able to convert the data back to binary again. At that point, you should have a clue about which server is causing your problem and can dig in further.

If they both can reverse the base 64 data to binary and the binary is correct on both servers... well, I'm not sure.

# php - php Mysql数据库查询错误

> ID：14287774
> 
> 赞同：-1
> 
> 时间：2013-01-11T22:33:33.163
> 
> 标签：php

基本上，从我发送的表格`customer_name`和这段代码中，我将其拉出并将其与时间一起保存到数据库中。这段代码不断给我这个错误：

> 致命错误：在第 19 行的 /home/projectu/public_html/sub/save.php 中不在对象上下文中时使用 $this

注意：第 19 行是这一行：

```
$db->query($queryone); 
```

这是我的代码：

整个保存.php

```
include('db-config.php');

$customer_name = $_POST['customername'];

/* Kaspersky */
$kaspersky_date = strtotime("+11 months").'|'.strtotime("+12 months");
$kaspersky = explode("|", $kaspersky_date);
$kaspersky_temp = "$customer_name got new kaspersky.";

/* PC Picked-UP */
$pickedups_date = strtotime("+1 months");
$pickedups_temp = "$customer_name picked up his computer.";

if(isset($_POST['kaspersky'])) {
$queryone = "INSERT INTO sublist (scheduled_date, customer_name, kaspersky_status, kaspersky_template)
                       VALUES ($kaspersky[0], $customer_name, YES, $kaspersky_temp)";

$this->query($queryone);

$querytwo = "INSERT INTO sublist (scheduled_date, customer_name, kaspersky_status, kaspersky_template)
                       VALUES ($kaspersky[1], $customer_name, YES, $kaspersky_temp)";

$this->query($querytwo);

}
if(isset($_POST['pickeduppc'])) {
$query = "INSERT INTO sublist (scheduled_date, customer_name, pcpickup_status, pcpickup_template)
                       VALUES ($pickedups_date, $customer_name, YES, $pickedups_temp)";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T22:52:38.813

您不能`$this`在非对象或静态方法中使用。您应该创建一个新对象。

```
$db = new mysqli(......);
$db->query("SELECT ... FROM..."); 
```

# cordova - Cordova 和 PhoneGap 有不同的 config.xml 示例

> ID：14287775
> 
> 赞同：7
> 
> 时间：2013-01-11T22:33:42.583
> 
> 标签：cordova

当我生成一个新的 PhoneGap 2.3 应用程序时，该文件适用于 Cordorva，并且与PhoneGap 列出的*任何*`config.xml`示例都不匹配。这包括 Github 上的示例应用程序 (https://github.com/phonegap/phonegap-start/blob/master/www/config.xml)。我需要做什么才能让事情顺利进行？

 ** * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-13T09:13:13.563

有两个不同的 config.xml 文件。一个位于 Cordova 的本机部分使用的“project_path/res/xml/config.xml”中。第二个由 PhoneGap Build 服务使用 - [https://build.phonegap.com/docs/config-xml](https://build.phonegap.com/docs/config-xml)*

# c++ - 重定向到文件后，使用 cout 或 cerr 输出到控制台

> ID：14287777
> 
> 赞同：2
> 
> 时间：2013-01-11T22:33:46.920
> 
> 标签：c++, stl

将 cout 或 cerr 重定向到文件很容易。我可以使用它来将第三方输出重定向到文件。但是，在我将第三方输出重定向到文件后，我如何使用 cout 自己输出到控制台？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T22:37:32.733

您保存缓冲区并稍后恢复它：

```
std::streambuf *buf = std::cout.rdbuf(); //save
// Do other stuff
std::cout.rdbuf(buf); // restore 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-11T23:03:37.237

我是 RAII 的忠实粉丝，所以我曾经写过这个小助手类。它将重定向流，直到超出范围，此时它将恢复原始缓冲区。很方便。:)

```
class StreamRedirector {
public:
    explicit StreamRedirector(std::ios& stream, std::streambuf* newBuf) :
        savedBuf_(stream.rdbuf()), stream_(stream)
    {
        stream_.rdbuf(newBuf);
    }

    ~StreamRedirector() {
        stream_.rdbuf(savedBuf_);
    }

private:
    std::streambuf* savedBuf_;
    std::ios& stream_;
}; 
```

可以这样使用：

```
using namespace std;
cout << "Hello stdout" << endl;
{
    ofstream logFile("log.txt");
    StreamRedirector redirect(cout, logFile.rdbuf());
    cout << "In log file" << endl;
}
cout << "Back to stdout" << endl; 
```

# .net - 运行多个 C# 应用程序实例

> ID：14287779
> 
> 赞同：0
> 
> 时间：2013-01-11T22:34:01.613
> 
> 标签：.net, c#-4.0, powershell

我在 Power shell 脚本中定义了一个 WMI 事件，该脚本不断监视文件夹中的新文件。

当一个新文件出现时，power-shell 脚本会触发一个 C# 程序。当我一次有 1 个文件时，这工作正常。

但是，如果我在同一个文件夹中有多个新文件，那么如何创建我的应用程序的多个实例来处理这些文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T22:57:42.880

更改您的 c# 程序以将文件夹作为参数。

处理文件夹中每个未处理的文件文件夹中的文件。该过程的一部分应该对文件做一些事情，例如重命名它（比如用_processed作为后缀），更改扩展名（.processed），或者我最喜欢将它移动到另一个文件夹。

比启动大量可执行文件更有效。

# php - php将xml处理成数组

> ID：14287782
> 
> 赞同：0
> 
> 时间：2013-01-11T22:34:24.423
> 
> 标签：php, xml

我正在尝试将 xml（网站）处理成 php 数组。

我已经尝试了以下代码，它适用于结果中的每一个，但我需要获取我无法看到如何做到这一点的总页数。

```
function get_content($url) 
    /// basically opens the page and stores it as a variable. Buggered if I know how it works! 
    {   
        $ch = curl_init();  
        curl_setopt ($ch, CURLOPT_URL, $url);
        curl_setopt ($ch, CURLOPT_HEADER, 0);
        ob_start();
        curl_exec ($ch);
        curl_close ($ch);
        $string = ob_get_contents();
        ob_end_clean();
        return $string;
        $string = NULL;
        $ch = NULL;
        $url = NULL;
    }
$url = "url";
$content = get_content($url);
$content_x = explode("<result>", $content);

foreach ($content_x as $item)
    {
        $p1 = strpos($item, '<title>');
        $p2 = strpos($item, '</title>');
        $l1 = $p2 - $p1;
        echo '<br>'.$title = substr($item, $p1, $l1);
    } 
```

xml 网站提要

```
<?xml version="1.0" encoding="UTF-8"?>
<response version="2">

    <totalpage>1005</totalpage>

    <results> 
        <result>
            <title>test</title>
            <title2>test2</title2>
            <title3>test3</title3>
        <result>
                <result>
            <title>test</title>
            <title2>test2</title2>
            <title3>test3</title3>
        <result>
                <result>
            <title>test</title>
            <title2>test2</title2>
            <title3>test3</title3>
        <result>
                ........so on

    <results>

</response> 
```

我需要得到**总页数**和**结果中的每一个**

如何获得**总页数，它们是处理****结果**的更好方法吗

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T22:40:31.670

您绝对不应该使用字符串操作来尝试解析 XML。有许多 PHP 库可以做到这一点。我可能会推荐 SimpleXML。

用法是：

```
$xml = simplexml_load_string($content);
$totalpage = $xml->response->totalpage; 
```**

# wordpress - WooCommerce MyStile 主题 - 类别页面上没有分页

> ID：14287785
> 
> 赞同：2
> 
> 时间：2013-01-11T22:34:29.010
> 
> 标签：wordpress, woocommerce, pagination, shortcode

我正在一个具有 WooThemes MyStile 主题并运行 WooCommerce 的网站上工作。由于某种原因，商店页面上没有分页。我用于这些页面的简码是：

```
[product_category category="books" per_page="12" columns="4" orderby="date" order="desc"] 
```

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-24T21:19:44.527

You can try this solution: [https://gist.github.com/klihelp/7810337](https://gist.github.com/klihelp/7810337)

In the past, I used to set up product category archives page templates - that was my best workaround. Reading that Github solution, it looks like it would work beautifully... try it out!

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-03-25T12:16:05.227

要进行分页，您不应该使用简码，您可以从 woocommerce 设置中制作您的商店页面

Woocommerce - 产品 - 展示（制作您的商店页面）

# php - 计算两个邮政编码之间的距离

> ID：14287795
> 
> 赞同：0
> 
> 时间：2013-01-11T22:35:12.890
> 
> 标签：php, mysql, geocoding, distance

我想要一些关于如何计算两个邮政编码之间距离的帮助。这是我想要的设置，让我给你一个场景。

一个用户登录我的网站（他们提供了他们的详细信息，他们的邮政编码就是其中之一）。该数据存储在`users`表中。

我有另一张桌子，上面有关于`locations`. 我想显示离用户最近的位置（和距离）。

我知道可以使用某些方法，例如：

将邮政编码转换为经纬度并使用内置方法计算距离，我认为谷歌提供免费服务。但我不知道我将如何实现这样的事情。我看过的所有教程似乎都太复杂了，目前我想要一个非常粗略和简单的解决方案，我可以在此基础上构建，更重要的是学习！

在数据的基本输入/输出方面，我对 PHP 和 MySQL 相当熟悉。但我不确定处理有关用户数据和“企业”位置的信息的最佳方式。

任何建议，评论将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-09-16T15:55:35.613

如果您在美国，此 API 应该可以满足您的需求：[https ://www.zipcodeapi.com](https://www.zipcodeapi.com)

它专门用于查找两个邮政编码之间的距离，告诉您邮政编码的经纬度，查找相对于某个位置的所有邮政编码等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-16T14:36:26.017

1.  从条例调查中免费获取邮政编码北区东区数据（在您的网页上记下它们以获得免费）

2 计算与相应 csv 平面文件的距离（M.csv 包含所有曼彻斯特邮政编码以及北和东）。

3.  距离是 sqrt((n1-n2)**2 +(e1-e2)**2) - 请原谅我的 fortran

4.  如果它很慢，并且您想要一个近似的距离，请创建一个包含上半年邮政编码平均值的小型数据库，以便您查找 M20 而不是 M20 3nb。

5 NB 谷歌不喜欢你在谷歌地图之外使用他们的邮政编码 API。

6.  我想知道一种算法，以便对于短距离，如果您正在查看靠近邮政编码的地方，您只需搜索 M 个邮政编码以找到 M 个邮政编码（如果您有一个相邻的表格，则可能是附近的邮政区域，如 SK、OL邮政编码区）。

7 有没有人更进一步？

# compiler-construction - 新硬件的编译器修改

> ID：14287800
> 
> 赞同：1
> 
> 时间：2013-01-11T22:35:18.770
> 
> 标签：compiler-construction, instruction-set

当使用诸如 C 之类的语言编写时，编译器理论上会获取您的人类可读代码并将其转换为机器代码 - 相对依赖于硬件的原子指令。每个 CPU 架构似乎都有一个指令集，它以某种硬连线方式为 CPU 实现，但似乎不同的 CPU 可以以不同的方式实现相同的 ISA，比如 x86。

这是否意味着 ISA 本质上充当了硬件的抽象层？x86 说：这些是我提供的标准指令——你不需要知道硬件是怎么做的，只要知道它是怎么做的，你就可以通过向我发送以下机器代码来使用它们？

因此，如果我要构建一个新的 CPU 并且我以遵循 x86 标准的方式实现我的 CPU，我不需要编写特定于我的硬件的编译器，而是任何从 C 编译到 x86 的编译器ISA 对我的新 CPU 是否足够？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T22:52:58.743

> 编译器理论上会获取您的人类可读代码并将其转换为机器代码

我会说这就是编译器所做的。这不是理论上的。

如果您符合指令集的规范，那么您可以自由选择您的硬件实现。

指令集可能有一些简单的指令，如 ADD、SUBTRACT，只要 CPU 执行位精确指令，您就不必关心实现。事实上，这是可以通过增加加法器实现的复杂性来提高性能的地方，以允许更快的时钟速度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T22:53:12.463

是的，x86 架构有据可查，并形成了一个抽象层。但是，如果优化编译器了解加载使用延迟、加载存储单元的数量、计算单元的数量和类型、缓存大小和缓存行，则它可以做得更好；内部寄存器的数量，一些处理器对指令流进行更多的重新排序等；这些东西是特定于实现的。

例如，一个较旧的处理器可能只有一个整数乘法单元，一个较新的处理器可能有两个（一个非常旧的处理器可能没有，我研究过这样的一个，虽然不是 x86）。它们的类型也可能不同。这些差异改变了优化/代码生成中速度-空间权衡之间的平衡，因此一种知道哪个可能使用不同指令序列的策略。例如，使用乘法指令乘以一个大常数可能是最短的，但可能比几个移位和加法操作更慢或更快，具体取决于底层实现。因此，编译器可以做出一些选择，并且由于它可以跟踪正在编写的代码的许多状态，因此它可以使用相当复杂的决策策略。

Another common optimization strategy is to interleave two or more different computations; this so as to keep the processor more busy. To do this often increases the number of registers needed, and may even require more instructions, and could be quicker yet longer or not depending again on the underlying implementation.

# sql - SQL中的分层与短路分配？

> ID：14287802
> 
> 赞同：3
> 
> 时间：2013-01-11T22:35:23.057
> 
> 标签：sql, tsql, conditional, conditional-statements, teradata

SQL 是否同时具有短路和分层多重评估语法？

短路分配示例。当 ... 为真时，这里`decision`得到 FIRST *** 子句：

# 短路

```
 case  
     when (...) then (***) 
     when (...) then (***)
     when (...) then (***)
     else (...)
   end as decision 
```

分层分配的示例。当 ... 为真时，这里`decision`得到 LAST *** 表达式。

# 分层的

```
 if (...) then (decision = ***) end
    if (...) then (decision = ***) end
    if (...) then (decision = ***) end 
```

# 相互转换

很明显，颠倒表达式的顺序会在分层和短路之间切换。我想知道 SQL 是否也有一个可以分配 LAST tr 表达式的构造？

# 测试用例：

下面给出一个非常简单的玩具示例：

```
select 
  flag1, flag2, flag3,
  case
     when flag1=1 and flag2=0 then 'LEFT'
     when flag1=0 and flag2=0 then 'NONE'
     when flag2=0 and flag3=1 then 'RIGHT'
  end as decision 
FROM 
( select 
  1 as flag1, 0 as flag2, 1 as flag3
  -- from dual                               -- if you use Oracle
) tmp ; 
```

短路 SQL 将返回 'LEFT'

分层分配将返回“RIGHT”。

**编辑：**您可以通过单击链接在[SQL-Fiddle](http://sqlfiddle.com/#!1/d41d8/703)中运行此示例。（感谢 ypercube 指出那个有用的网站！（+1））

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T23:04:13.860

没有表达式可以在一次选择中进行层次分配，但它可以像任何其他编程语言一样通过多个 if 语句来实现

```
DECLARE @flag1 BIT = 1, @flag2 BIT = 0, @flag3 BIT = 1, @decision VARCHAR(50)

IF @flag1 = 1 AND @flag2 = 0
    SET @decision = 'LEFT'

IF @flag1 = 0 AND @flag2 = 0
    SET @decision = 'NONE'

IF @flag2 = 0 AND @flag3 = 1
    SET @decision = 'RIGHT'

SELECT @decision 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-11T23:08:23.497

对于 SQL，这不是很重要，因为您最终在`CASE WHEN`子句中只有一个值。所以你需要做的就是重新安排你的条件。

在其他语言中，您执行一些存储在变量等中的计算，在*纯*SQL 中并非如此。

# jquery - twitter bootstrap 下拉菜单 水平链接

> ID：14287806
> 
> 赞同：0
> 
> 时间：2013-01-11T22:35:37.057
> 
> 标签：jquery, iphone, html, css, twitter-bootstrap

![在此处输入图像描述](../Images/caf319f3b07a98cb181d235286f00f64.png)

我使用 twitter bootstrap 开发响应式 css 你能告诉我如何开发带有水平方向链接而不是垂直方向的下拉菜单

请检查[此](http://jsfiddle.net/AJ5JW/)页面

```
<div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="#">
            <img alt="change" class="defieLogo" src="http://www.defie.co/designerImages/defie_logo_only.png">
          </a>
          <div class="nav-collapse in collapse" style="height: auto;">
            <ul class="nav">
              <li class="active"><a href="/docs/examples/product.html">Product</a></li>
              <li><a href="/docs/examples/solutions.html">Solutions</a></li>
              <li><a href="/docs/examples/services.html">Services</a></li>
              <li><a href="/docs/examples/partners.html">Partners</a></li>
              <li><a href="/docs/examples/partners.html">Contact</a></li>
            </ul>
            <form class="navbar-form pull-right">
              <input class="span2" type="text" placeholder="Email">
              <input class="span2" type="password" placeholder="Password">
              <button type="submit" class="btn">Sign in</button>
            </form>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T23:56:14.217

不确定这是否是您要查找的内容，因为它是单击下拉菜单而不是：悬停。单击“产品”导航项对其进行测试。

jsFiddle [http://jsfiddle.net/AJ5JW/1/](http://jsfiddle.net/AJ5JW/1/)

变化：

```
 <li class="dropdown active"><a href="/docs/examples/product.html" class="dropdown-toggle" data-toggle="dropdown">Product</a>
          <ul class="dropdown-menu">
              <li><a href="http://">Hi1</a></li>
              <li><a href="http://">Hi2</a></li>
              <li><a href="http://">Hi3</a></li>
          </ul>
      </li> 
```

从第 1424 行开始，垂直“移动”视图的过渡效果也很好。

利用这个[http://twitter.github.com/bootstrap/components.html#navbar](http://twitter.github.com/bootstrap/components.html#navbar)

# java - 如何使用整数引用枚举以在数组中使用

> ID：14287807
> 
> 赞同：1
> 
> 时间：2013-01-11T22:35:53.567
> 
> 标签：java, arrays, oop, enums

我正在尝试用卡片对象创建一个套牌。此卡片对象有两个`enums`，一个 int 和一个`boolean`，如下所示。为了创建这个套牌，我需要循环浏览套装和面值。

不幸的是，如果我必须按名称引用每个值，则这将需要 4*13 if 语句才能完成`enum`，即`card[0] = new Card(Suit.Spade, Face.two, j, false);`

我需要知道的是，是否有一种方法可以`enum`通过而不是 Suit.Spade 来设置每张卡的值，例如 suit.int，这样下面的内容就可以在没有 52 个 if 语句的情况下工作。我只是数牌，这`Suit.j, Face.k`只是我正在寻找的一个例子。

```
 int i = 0;
    int j = 1;
    int k = 1;

    while(j <= suitCount)
    {
        k = 0;
        while(k <= faceCount)
        {
            card[i] = new Card(Suit.j, Face.k, i, false);

            k++;
            i++;
        }
        j++;
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T22:41:57.943

尝试类似：

```
int i = 0;
List<Card> cards = new ArrayList<>(Suit.values().length * Face.values().length);
for (Suit suit : Suit.values()){
    for (Face face : Face.values()){
        cards.add(new Card(suit, face, i, false));
        i++;
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-11T22:39:09.377

使用隐式静态`#values()`方法。

```
Suit[] allSuits = Suit.values();
Face[] allFaces = Face.values();

// ...

card[i] = new Card(allSuits[j], allFaces[k], i, false); 
```

[http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html](http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T22:44:13.363

```
int i = 0;
for (Suit s : Suit.values())
{
  for (Face f : Face.values())
  {
     card[i] = new Card(s, f, i, false);
     i++;
  }
} 
```

也许

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-11T22:52:38.557

与 puce 的答案基本相同，但由于我花时间将其全部输入......

```
package com.example.cards;

public class Card
{
    private Suit suit;
    private Rank rank;

    public Card(Suit suit, Rank rank)
    {
        this.suit = suit;
        this.rank = rank;
    }

    public enum Suit {
        SPADE, HEART, CLUB, DIAMOND;
    }

    public enum Rank {
        ACE, TWO, THREE, FOUR, FIVE, SIX, SEVEN,
        EIGHT, NINE, TEN, JACK, QUEEN, KING
    }

    /* Test building a deck of cards */
    public static void main(String[] args)
    {
        Card[] deck = new Card[52];
        int i = 0;

        for (Suit suit : Suit.values()) {
            for (Rank rank : Rank.values()) {
                deck[i++] = new Card(suit, rank);
            }
        }
    }
} 
```

# java - 无需通过 BigDecimal 即可获得双精度的纯字符串表示

> ID：14287812
> 
> 赞同：6
> 
> 时间：2013-01-11T22:36:13.963
> 
> 标签：java, string, double

在 Java 中使用双精度数，是否可以获得纯字符串表示（例如，`654987`）而不是科学格式（例如，`6.54987E5`）？

现在我知道我们可以使用该`BigDecimal.toPlainString()`方法，但是创建一个`BigDecimal`简单地获取一个`String`（真的？）对我来说似乎有点草率和低效。有谁知道另一种方式？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T22:40:16.890

```
double d = 12345678;

System.out.println(d);
System.out.println(String.format("%.0f", d)); 
```

```
1.2345678E7
12345678

```

请注意，如果您只需要打印此字符串表示形式，您可以简单地使用`System.out.printf("%.0f", d)`.

*如果您根本*不想要任何舍入，那么我会坚持您的建议，即`(new BigDecimal(d)).toPlainString()`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-11T22:41:48.020

使用[`DecimalFormat`](http://docs.oracle.com/javase/6/docs/api/java/text/DecimalFormat.html)/ [`NumberFormat`](http://docs.oracle.com/javase/6/docs/api/java/text/NumberFormat.html)。

示例中的基本用法：

```
NumberFormat nf = NumberFormat.getInstance();
output.println(nf.format(myNumber)); 
```

对于`DecimalFormat`，您可以传入格式化模式/区域设置信息以格式化数字。 [这个链接](http://docs.oracle.com/javase/tutorial/i18n/format/decimalFormat.html)是一个很好的使用教程`DecimalFormat`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T23:48:44.663

你可以这样做：

```
double number = 654987;

String plain = String.format("%.0f", number); 
```

# c++ - 如何将库添加到 Eclipse CDT？（没有相应的文件和目录）

> ID：14287817
> 
> 赞同：4
> 
> 时间：2013-01-11T22:36:48.460
> 
> 标签：c++, eclipse

我在添加头库时遇到了一些问题。

我右键单击我的项目，然后单击**Properties-> C/C++ General-> Paths and Symbols**。

在**包含**选项卡中：**语言-> GNU C++**

我单击**添加... -> 文件系统**，然后添加名为 boost_1_52_0 的文件夹或任何其他文件夹。

当我使用 Eclipse 的智能感知时，它会找到我想要的，但是它在构建时失败了。

```
fatal error: boost/random/...: No such file or directory 
```

不知道为什么会这样。

任何刚刚起步的帮助将不胜感激。

```
22:34:02 **** Incremental Build of configuration Default for project TestProj****
make all 
g++ -O2 -g -Wall -fmessage-length=0    -c -o TestProj.o TestProj.cpp
TestProj.cpp:5:52: fatal error: boost/random/random_number_generator.hpp: No such file     or directory
<builtin>: recipe for target `TestProj.o' failed
compilation terminated.
make: *** [TestProj.o] Error 1 
```

显然，这并不像将文件夹添加到 eclipse 提供的接口的目录中那么容易。我敬畏。

问候， 戴恩

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T21:56:14.753

> 我右键单击我的项目，然后单击属性-> C/C++ 常规-> 路径和符号。
> 
> 在包含选项卡中：**语言-> GNU C++**
> 
> 我单击**添加... -> 文件系统**，然后添加名为 boost_1_52_0 的文件夹或任何其他文件夹。
> 
> 当我使用 Eclipse 的智能感知时，它会找到我想要的，但是它在构建时失败了。

是的，这就是您可能需要使 Eclipse CDT 智能感知和索引器与您的外部引用保持同步。

```
fatal error: boost/random/...: No such file or directory 
```

> 不知道为什么会这样。

这是因为您对如何构建项目的设置可能会选择您自己管理构建过程： ![CDT C/C++ 构建属性](../Images/8eb989ead762053dce2bb43f57627805.png)

如果是这样，您必须让您手动管理`makefile`了解环境和编译器/链接器标志设置。

在这种情况下，使用 Eclipse CDT 构建属性与手动管理的 makefile 进行通信的一种方法是使用上述项目属性部分中的 **构建变量**或**环境设置：**![在此处输入图像描述](../Images/e3caa7d4050422a506f8a34468f14a1c.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-31T20:48:39.560

添加什么取决于您要包含的内容。在 Boost 的情况下，有许多只包含头文件的库，并且有些库需要在静态/共享对象库中进行链接（例如，序列化）。

## 仅标头库

对于仅头文件的库，您只需要包含所有头文件的基本目录。使用，您可以使用标志`gcc`添加目录（例如， ）。使用 Eclipse 中的托管 makefile 项目，您可以使用`-I``-I C:/path/to/boost_52_0``Properties > C/C++ Build > Settings > Tool Settings > GCC C++ Compiler > Directories`

## 静态/共享对象库

对于静态/共享对象库，您必须指定两个选项：

1.  `-l`--> 库的名称，减去“lib”前缀和文件后缀（例如，`libboost_serialization.dll`->`boost_serialization`
2.  `-L`--> 查找库文件的目录。仅当库位于非标准路径上时才需要。

正如@Chris 指出的那样，对于托管的 makefile 项目，这两个选项都可以通过`Properties > C/C++ Build > Settings > Tool Settings > GCC C++ Linker > Libraries`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T01:25:36.973

你搜索的是`Properties > C/C++ Build > Settings > Tool settings > ... Linker > Libraries`什么？这是从命令行编译时添加 -l 选项的地方。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-10-13T06:47:53.460

我有同样的问题。`C/C++ Build`在-->中更改设置`Settings`解决了这个问题。确保排除了“.lib”文件扩展名！请看下面的截图：[![在此处输入图像描述](../Images/16fa7766b824baa526c30f27732bc88c.png)](https://i.stack.imgur.com/wyejZ.png)

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2013-01-25T13:22:43.243

通过将 -I 添加到 makefile 来解决。

```
BOOST =     C:/Users/neo/Documents/boost_1_52

CXXFLAGS =  -O2 -g -Wall -fmessage-length=0 -I$(BOOST)

OBJS =      p1.o

LIBS =      

TARGET =    p1.exe

$(TARGET):  $(OBJS)
    $(CXX) -o $(TARGET) $(OBJS) $(LIBS)

all:    $(TARGET)

clean:
    rm -f $(OBJS) $(TARGET) 
```

# jquery - 文本输入更改后jQuery移动div

> ID：14287819
> 
> 赞同：1
> 
> 时间：2013-01-11T22:36:53.390
> 
> 标签：jquery, css, html, position

在更改了来自两个单独文本字段输入的输入后，我试图将图像持有者 div 移动到特定的 x 和 y 坐标。下面是仅 x 坐标的代码。

这是一个jfiddle **[here](http://jsfiddle.net/dhpkW/)**

```
var img1x;
var img1y;
var img1position;

img1position = $( "#img1" ).position();
img1x = img1position.left;
img1y = img1position.top; 
```

我已经尝试过了，如果输入值为“0”，它只会移动 div。它不会移动其他任何东西：

```
$("#img1x").change(function() {
  //alert("img1x: " +img1x);
    $( "#img1" ).css('left', $( "#img1x" ).val());
}); 
```

我已经尝试过了，但它什么也没做。

```
$("#img1x").change(function() {
  img1x = $( "#img1x" ).val();
  //alert("img1x: " +img1x);
    $( "#img1" ).css('left', img1x);
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T22:40:19.150

尝试添加`'px'`：

```
$("#img1x").change(function() {
  img1x = $( "#img1x" ).val();
  alert("img1x: " +img1x);
    $( "#img1" ).css('left', img1x + "px");
}); 
```

为我工作：http: [//jsfiddle.net/VNqqx/](http://jsfiddle.net/VNqqx/)

有效的原因`0`是因为`left: 0`是有效的 CSS。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T22:41:31.137

尝试添加 'px' 或 * 1 以获得 int：

```
$( "#img1" ).css('left', img1x + 'px'); 
```

见[http://jsfiddle.net/dhpkW/1/](http://jsfiddle.net/dhpkW/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T22:42:03.687

将“px”添加到您的左侧值：

```
$( "#img1" ).css('left', img1x+'px'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-11T22:45:37.080

你可以试试这个进行流畅的过渡

```
$("#img1x").change(function () {
    img1x = $("#img1x").val();
    alert("img1x: " + img1x);
    $("#img1").animate({
        'left': img1x
    }, 700);
}); 
```

你不需要那个`px`时候。

看看[http://jsfiddle.net/dhpkW/6/](http://jsfiddle.net/dhpkW/6/)

# visual-studio-2012 - TFS 中签入失败：找不到文件

> ID：14287824
> 
> 赞同：1
> 
> 时间：2013-01-11T22:37:22.157
> 
> 标签：visual-studio-2012, nuget

> 操作过程中出现多个错误，第一个如下所示。输出窗口中提供了完整的错误列表。
> 
> 找不到文件'C:\tfs\Local\Local\packages\ImageResizer.FluentExtensions.1.0.0.4\ImageResizer.FluentExtensions.1.0.0.4.nupkg'。

我找不到对 ImageResizer 的任何引用。它早已被删除，并且没有对其的引用或 nuget 引用。我运行了这个命令，项目 ImageManager 也已被删除，它不在解决方案中，我通过 VS IDE 将其删除。

> PS C:\tfs\Local> dir -Recurse *.config | 选择字符串'ImageResizer'
> 
> 本地\ImageManager\packages.config:6:本地\ImageManager\packages.config:7:本地\ImageManager\packages.config:8:本地\ImageManager\packages.config:9:本地\ImageManager\packages.config:10:

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T21:02:29.440

第三方库应该在一开始就签入一次，并且您永远不会签出它们进行编辑，因为没有关于它们的编辑，因此它们必须存在于项目主文件夹之外的文件夹中，因此如果您单击整个项目要签出以进行编辑，它不会受到影响，我建议您查看 TFS 上的文件夹以及我们应该如何放置我们的第三方 dll 和框架。

```
$MyTeamProject1
         /Main                                                              Can contain solution (.sln) files    
                /Source
                            /MyApp1                                         Contains MyApp1.sln file
                                        /Source                             Contain folder for all source
                                                    /ClassLibrary1          Contains ClassLibrary1.csproj
                                                    /MyApp1Web              Contains Default.aspx
                                        /UnitTests                          Container folder for unit tests
                                                    /ClassLibrary1Tests     Contains test project and code
                                                    /MyApp1WebTests         Contains test project and code
                            /SharedBinaries                                 Shared binaries e.g. libraries
                            /SharedSource                                   Shared source code           
                /Docs                                                       Contains product documentation
                /Tests                                                      Container for tests
                            /FunctionalTests
                            /PerformanceTests
                            /SecurityTests / 
```

更多信息：

[第 4 章 – 在 Team Foundation 源代码控制中构建项目和解决方案](http://msdn.microsoft.com/en-us/library/bb668954.aspx)

# java - java paint(g)、repaint()、update(g) 后端和本地重绘

> ID：14287830
> 
> 赞同：2
> 
> 时间：2013-01-11T22:37:50.397
> 
> 标签：java, swing, awt, backend, graphics2d

今天我一直在与一群同学讨论这个话题，他们每个人都在研究不同的想法，以“滥用”Java2D API 来制作一个简单的 2D 游戏。

我正在使用一个类扩展`JComponent`并覆盖该`paintComponent()`方法来获取`Graphics2D`对象并从那里定义我的渲染逻辑。修改后`JComponent`的是`contentPane`我的覆盖`JFrame`。

我的问题来了： call 和 in the 的后端对我的屏幕有什么`paint(Graphics)`不同的影响`repaint()`？我提到，当从我的“帧定时器”调用任何东西（每秒调用 50 次有问题的方法）时，屏幕的某些部分有时会闪烁，我清楚地告诉它渲染的某些东西是不可见的（或快速闪烁）和一切都感觉不对。这里有什么区别？我试图深入了解 AWT 后端的源代码，直到它以某种方式进行管理，但我停在那里以使我的大脑免受极其丑陋的代码的影响。`update(Graphics)``JFrame``repaint()``EventQueue``PaintEvent`

此外，在讨论整个`repaint()`事情时，我们谈到了仅重新绘制与模型中的明确变化相对应的屏幕位置的“策略”，从而节省了我们的 CPU/GPU 功率。尽管完成这些事情（以及动画）仍然需要逻辑，但下一个问题是我如何“访问”`FrameBuffer`已绘制屏幕的内容，以便我可以参考我的渲染已经完成的工作。

是的，我们已经经常听到 Java 可能不是以最佳方式支持我们正在寻找的所有操作的编程语言......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-11T23:44:48.760

> 我的问题来了：在 JFrame 的后端调用paint(Graphics)、repaint() 和 update(Graphics) 对我的屏幕有什么不同？我提到，当从我的“帧计时器”（每秒调用 50 次相关方法）调用除 repaint() 之外的任何内容时，屏幕的某些部分有时会闪烁，我明确告诉它渲染的某些内容不可见（或闪烁迅速），一切都感觉不对。这里有什么区别？我试图深入挖掘 AWT 后端的源代码，直到 EventQueue 以某种方式管理 PaintEvent，但我停在那里以使我的大脑免受极其丑陋的代码的影响。

在 Swing 中调度绘画是`RepaintManager`. 它（除其他外）负责确定应用程序的哪些区域需要重新绘制，并安排这些更新在事件调度线程的上下文中发生。

何时可能发生重绘完全取决于重绘管理器。重绘哪些区域也部分取决于重绘管理器，并且重绘管理器可以选择将多个重绘请求合并到单个重绘事件中，从而节省时间和 CPU。

一般来说，你不应该调用`paint(Graphics)`or `update(Graphics)`，除了你实际上不能创建图形上下文之外，重绘管理器会为你做这件事。即使你想打印屏幕，你也应该使用组件的`print(Graphics)`方法，除了它不是双缓冲之外，还有与尝试将缓冲区复制回本机对等相关的问题；）

闪烁通常是因为您正在从非双缓冲上下文进行绘制，例如覆盖`paint`而不是`paintComponent`. 一般来说，在极少数情况下，您实际上需要覆盖`paint`顶级容器的方法，例如`JFrame`

> 此外，在讨论整个 repaint() 事情时，我们来到了“策略”，即仅重新绘制与模型中的明确变化相对应的屏幕位置，从而节省 CPU/GPU 功率。尽管完成这些事情（以及动画）仍然需要逻辑，但下一个问题是我如何“访问”绘制屏幕的 FrameBuffer，以便可以参考我的渲染已经完成的工作。

通常，除非您确实需要这样做，否则不要担心。如果你对你的重绘代码很小心（你实际上可以安排一个区域被重绘，而不是重绘整个组件），你不应该真的需要关心。确保您使用的是该方法的祖先`JComponent`并使用该`paintComponent`方法，并且您获得了自动双缓冲...

另一个问题是，您真的不知道组件何时可能会请求重新绘制它自己，例如响应鼠标移动或组件属性的更改......

访问“帧缓冲区”可能真的不是一个好主意，更好的是生成自己的缓冲区（使用类似 a 的东西`BufferedImage`），渲染到它，然后将其渲染到屏幕上（屏幕外缓冲）。这样您就可以生成自己的“FrameBuffer”

现在，如果你真的很绝望，你可以看看[`BufferStrategy`](http://docs.oracle.com/javase/7/docs/api/java/awt/image/BufferStrategy.html)

但我建议您在深入研究之前先看看[在 AWT 和 Swing 中的绘画](http://www.oracle.com/technetwork/java/painting-140037.html)，这将使您更深入地了解绘画的工作原理。

此外，永远不要认为你在控制，你不是。如果您尝试“控制”，请准备好让事情迅速发生在您的脸上。了解流程并使用它。

看看这些（简单的）例子......

*   [如何让线条动画更流畅？](https://stackoverflow.com/questions/13540534/how-to-make-line-animation-smoother/13547895#13547895)
*   [Java弹跳球](https://stackoverflow.com/questions/13022754/java-bouncing-ball/13022788#13022788)
*   [图像未加载](https://stackoverflow.com/questions/12642852/the-images-are-not-loading/12648265#12648265)

# ssl - 使用 SSL 证书通过 Buildr 访问 Maven 存储库？

> ID：14287834
> 
> 赞同：0
> 
> 时间：2013-01-11T22:38:30.610
> 
> 标签：ssl, alfresco, buildr

我想试用一下 Buildr，并想将它用于使用 Alfresco 的项目。Alfresco 项目正在维护一个 Maven 存储库： [https ://artifacts.alfresco.com](https://artifacts.alfresco.com)

如您所见，它使用的是https。

我尝试通过声明将 2 个 jars + 依赖项下载到类路径：

`ALFRESCO_CORE= transitive('org.alfresco:alfresco-core:jar:4.2.b')`

`ALFRESCO_REPOSITORY= transitive('org.alfresco:alfresco-repository:jar:4.2.b')`

构建文件失败并显示以下错误消息：

`Requesting https://artifacts.alfresco.com/org/alfresco/alfresco-core/4.2.b/alfresco-core-4.2.b.pom warning: peer certificate won't be verified in this SSL session Buildr aborted! RuntimeError : Failed to download org.alfresco:alfresco-core:pom:4.2.b, tried the following repositories: http://repo1.maven.org/maven2/ https://artifacts.alfresco.com/`

我相信，这是因为建造者不信任 Maven 存储库证书？

我怎样才能让它接受证书？或者，跳过证书验证？

目前，我无法访问存储库是一个主要的阻碍:(

我希望有人可以提示如何进行！阿加塔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T23:52:23.443

我无法重现此问题广告，至少从这里 ssl 证书似乎是有效的。我用来测试的构建文件是；

```
repositories.remote << 'https://artifacts.alfresco.com/nexus/content/groups/public/'
repositories.remote << 'https://artifacts.alfresco.com/nexus/content/groups/public-snapshots/'
repositories.remote << 'http://repo1.maven.org/maven2'

project 'foo' do
  project.group = 'x'
  project.version = 'x'
  compile.with transitive('org.alfresco:alfresco-core:jar:4.2.b')
end 
```

但是，如果 SSL 证书无效并且您不在乎，您应该能够通过添加具有以下内容的文件 tasks/ssl_fix.rake 来修改 buildr 类

```
module URI
  class HTTP
    def connect
      if proxy = proxy_uri
        proxy = URI.parse(proxy) if String === proxy
        http = Net::HTTP.new(host, port, proxy.host, proxy.port, proxy.user, proxy.password)
      else
        http = Net::HTTP.new(host, port)
      end
      if self.instance_of? URI::HTTPS
        require 'net/https'
        # Patch so verifying is not a problem
        http.verify_mode = OpenSSL::SSL::VERIFY_NONE
        http.use_ssl = true
      end
      yield http
    end
  end
end 
```

高温高压

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T00:14:47.507

> `warning: peer certificate won't be verified in this SSL session`

这部分消息表明 ruby​​ 不会尝试验证证书，所以我认为这不是 SSL 问题。

看来错误消息中的 URL 确实没有工件：

```
$ curl -v -IHEAD https://artifacts.alfresco.com/org/alfresco/alfresco-core/4.2.b/alfresco-core-4.2.b.pom
[...]
> HEAD /org/alfresco/alfresco-core/4.2.b/alfresco-core-4.2.b.pom HTTP/1.1
> User-Agent: curl/7.21.4 (universal-apple-darwin11.0) libcurl/7.21.4 OpenSSL/0.9.8r zlib/1.2.5
> Host: artifacts.alfresco.com
> Accept: */*
> 
< HTTP/1.1 404 Not Found 
```

这表明工件名称或存储库存在问题。Peter 的工作示例使用存储库`https://artifacts.alfresco.com/nexus/content/groups/public/`。从错误消息的 URL 看来，您正在使用`https://artifacts.alfresco.com/`. 你可以试试彼得的存储库 URL 吗？

# node.js - 有什么方法可以将 Asterisk sip 帐户/对等节点推迟到 node.js？

> ID：14287837
> 
> 赞同：0
> 
> 时间：2013-01-11T22:38:56.010
> 
> 标签：node.js, sip, asterisk

我想知道是否可以将通常在 Asterisk 的 sip.conf 中列出的 sip 帐户推迟到 node.js 中的某种“AGI”，就像在 extensions.conf 中的呼叫路由一样。这个想法是利用 Redis 数据存储，并在有人注册或断开连接时允许在 javascript 中编写一些脚本——而不是使用诸如 autocreatepeer 或从 MySQL 数据库生成的文件之类的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T10:41:03.273

是的你可以。

您有 2 个选项。

1) 设置 odbc 接口到 Redis 并使用星号实时

[http://www.voip-info.org/wiki/view/Asterisk+RealTime](http://www.voip-info.org/wiki/view/Asterisk+RealTime)

2) 使用 node.js(http://www.voip-info.org/wiki/view/Asterisk+FastAGI) 创建 fastagi 接口，或者在配置文件中包含外部脚本

```
---------extensions.conf-------
# here is script which send to STDOUT extensions.conf file
#exec "somescript.sh" 
```

正确的方法是第一。

实际上对你来说任务有效的方法是创建一些 fastagi 脚本，它将向你的 node-js 发出 curl 请求并询问数据（用于扩展）。

# youtube-api - 在 c# 中使用 youtube gdata api 和 microsoft windows phone 8 sdks

> ID：14287839
> 
> 赞同：-1
> 
> 时间：2013-01-11T22:38:59.287
> 
> 标签：youtube-api, windows-phone-8

我正在用 c# 开发一个 windows phone 8 应用程序，为此我需要使用 gdata api 从 youtube 获取一些元数据。

经过几个小时的搜索，我仍然无法在网上找到合适的教程来解释如何在 windows phone 8 应用程序中使用 youtube gdata api。我已经阅读了官方文档，但都是徒劳的。

我需要在 youtube 上获取用户喜欢的视频列表。

有人可以为我提供一个关于如何做的很好的教程，或者只是一个基本功能，至少解释了如何开始使用它。

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T18:03:31.197

对于这个问题，windows phone 没有什么特别的。请阅读 GData 文档。

从[https://developers.google.com/youtube/2.0/developers_guide_protocol_favorites](https://developers.google.com/youtube/2.0/developers_guide_protocol_favorites)开始，您可以看到这是为未经身份验证的用户调用的 URL：（还有一个用于经过身份验证的用户的 URL）

> [https://gdata.youtube.com/feeds/api/users/userId/favorites](https://gdata.youtube.com/feeds/api/users/userId/favorites)

似乎未经身份验证的视图重定向到“播放列表”，然后可以对其进行探索，您可以在其中获取播放列表和视频的名称。对于经过身份验证的 URL，您必须[使用 GData 的 OAuth 2.0](https://stackoverflow.com/questions/6901435/using-google-oauth-on-wp7)并调用以下 URL：

> [https://gdata.youtube.com/feeds/api/users/default/favorites](https://gdata.youtube.com/feeds/api/users/default/favorites)

# ios - iOS 6 上的 UINavigationBar 缺少图像

> ID：14287840
> 
> 赞同：0
> 
> 时间：2013-01-11T22:39:00.143
> 
> 标签：ios, ios6, uinavigationbar, iphone-5

我正在开发一个不久前为 iOS 4.2 构建的项目。我不得不为 iPhone 5 等调整一些视图的大小。除了缺少背景图像的 NavigationBar 之外，一切都运行良好。

当我尝试在 iOS 6 上编译它时得到的唯一警告是：

```
@interface UINavigationBar (HomeBrokerNavigationBar) 

UIView * topItemHeaderView;

Cannot declare variable inside @interface or @protocol. 
```

我注释掉了那行，并在@interface 上写了同一行，所以现在我没有收到任何编译错误，但 NavigationBar 显示没有图像。

这不是我的项目，所以我不想过多地使用控制器。我只是应该更新视图。有人遇到过这种问题吗？事情是这样的：

```
UIView * topItemHeaderView; 

@interface UINavigationBar (HomeBrokerNavigationBar) 

//UIView * topItemHeaderView; //This caused an error so I commented it and placed the line outside. 

- (void)layoutNavigationBarBackground;
- (void)layoutNavigationBarShadow;
- (void)setTopItemTitle:(NSString *)title andSubtitle:(NSString *)subtitle;
- (void)setTitleForStockWithShortName:(NSString *)stockShortName andLargeName:(NSString *)stockLargeName;
- (void)setFirstActionButtonWithImage:(NSString *)imageName forTarget:(id)target andAction:(SEL)action;
- (void)setSecondActionButtonWithImage:(NSString *)imageName  forTarget:(id)target andAction:(SEL)action;
- (void)setThridActionButtonWithImage:(NSString *)imageName  forTarget:(id)target andAction:(SEL)action;

- (void)setActionButtonWithFrame:(CGRect)frame andImage:(NSString *)imageName forTarget:(id)target andAction:(SEL)action;

@end 
```

和 .m 文件：

```
- (void)drawRect:(CGRect)rect {

self.topItem.hidesBackButton = YES;

if(!self.hidden)
{
    self.tintColor = [UIColor colorWithRed:0.003922 green:0.137255 blue:0.313726 alpha:1.0];

    [self layoutNavigationBarBackground];
    [self layoutNavigationBarShadow];
}
}

- (UIView *)topItemHeaderView {
return topItemHeaderView;
}

- (void)layoutNavigationBarShadow {

    CAGradientLayer * navigationBarShadow;

    navigationBarShadow = [[CAGradientLayer alloc] init];

    navigationBarShadow.frame = CGRectMake(self.frame.origin.x, 0, self.frame.size.width + 20, 20);

    CGColorRef topColor = [UIColor colorWithRed:0.0 green:0.0 blue:0.0 alpha:0.5].CGColor;

    CGColorRef bottomColor = [self.tintColor colorWithAlphaComponent:0.0].CGColor;

    navigationBarShadow.colors = [NSArray arrayWithObjects:(id)topColor, (id)bottomColor, nil];

    [navigationBarShadow autorelease];

    [self.topItemHeaderView.layer addSublayer:navigationBarShadow];
} 
```

所以它只是 bgHeader.png 没有出现。

![在此处输入图像描述](../Images/66e419366c3b5aa6778e5da982d40e81.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T22:55:51.540

为什么要创建 UINavigationBar 的类别来设置背景图片？使用 UIAppearance API。

```
[[UINavigationBar appearance] setBackgroundImage:[UIImage imageNamed:@"navbar_image"] forBarMetrics:UIBarMetricsDefault]; 
```

或者，如果您只想为一个 UINavigationController 设置背景，请执行以下操作：

```
[self.navigationController.navigationBar setBackgroundImage:image forBarMetrics:UIBarMetricsDefault]; 
```

编辑 - -

由于该类别中使用了其他东西，我建议您改为子类 UINavigationBar，从而子类 UINavigationController 用子类 UINavigationBar 替换 navigationBar 属性。

或者，由于您无法将 ivars 添加到类别中，因此您必须创建一个属性。属性在 .h 方法中的工作方式相同，但在涉及类别时与 setter 和 getter 方法不同。

为了设置和获取类别中的属性，您必须实现`objc_getAssociatedObject()`, 和`objc_setAssociatedObject()`.

```
@interface UINavigationBar (HomeBrokerNavigationBar) 

@property (nonatomic, retain) UIView * topItemHeaderView;

@end

static const void *TopItemHeaderViewKey = &TopItemHeaderViewKey;    
@implementation UINavigationBar (HomeBrokerNavigationBar)

@dynamic topItemHeaderView;

- (UIView *)topItemHeaderView {
    return objc_getAssociatedObject(self, TopItemHeaderViewKey);
}

- (void)setTopItemHeaderView:(UIView *) newHeader {
    objc_setAssociatedObject(self,TopItemHeaderViewKey, newHeader, OBJC_ASSOCIATION_RETAIN_NONATOMIC);
}

@end 
```

# map - VTK 是否支持 SVG 渲染？

> ID：14287863
> 
> 赞同：4
> 
> 时间：2013-01-11T22:41:50.600
> 
> 标签：map, svg, vtk

我基本上是在尝试使用 VTK 在地理地图上进行可视化，并且想知道是否有可能使用 .svg 或 .ai 等矢量图像？如果没有，您对使用 VTK 制作可扩展地图有何建议？

谢谢。Eb

# java - java中的二维码解码，不使用任何库

> ID：14287867
> 
> 赞同：1
> 
> 时间：2013-01-11T22:42:16.293
> 
> 标签：java, qr-code

我一直在寻找如何在不使用 ZXing 或任何其他库的情况下在 Java`QRCode`中扫描。`BufferedImage`那一定是我自己的解码器。我正在寻找最简单的方法来做到这一点。

有人知道任何例子或知道如何轻松做到这一点吗？任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T22:44:38.277

Java 不支持开箱即用的 QR 码扫描。如果您不想使用库，则必须自己编写整个烂摊子。这意味着您必须逐个像素地扫描图像并确定图像的外观和含义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T22:56:13.497

正如@Till Helge Viking 提到的，它不包含在标准的java 库中，因此您必须自己实现编码和解码。[此信息](http://www.swetake.com/qr/qr1_en.html)可能对您有用。

# php - PHP，mysqli insert_id 不工作

> ID：14287868
> 
> 赞同：2
> 
> 时间：2013-01-11T22:42:21.207
> 
> 标签：php

我一直在疯狂地试图弄清楚为什么 insert_id 在我的数据库中返回 0。我上传了一张图片，然后上传了它所属的类别以及带有 image_id 的简短描述（应该从 insert_id 中获取）我无法弄清楚它为什么不起作用。

上传图片功能是：

```
function postImageShare($image_name)
{
    global $BEAR;

    if ($stmt = $BEAR->Database->prepare("INSERT INTO images SET account_name = '".$_SESSION['account_name']."', image_name = ?"))
    {
        $stmt->bind_param('s', $image_name);
        $stmt->execute();
        //$stmt->close();   
    }       

    $lastItemID  = $BEAR->Database->insert_id;
    return $lastItemID; 
} 
```

然后插入描述/图像ID和类别（称为hoard）的函数如下：

```
function postImageShareInformation($description, $hoard_id)
{
    global $BEAR;

    if ($stmt = $BEAR->Database->prepare("INSERT INTO imagesInformation SET account_name = '".$_SESSION['account_name']."', image_id = '$lastItemID', description = ?, hoard_id = ? "))
    {
        $stmt->bind_param('si', $description, $hoard_id);
        $stmt->execute();
        $stmt->close(); 
    }   

} 
```

当我运行上面的数据库时，除了 image_id 每次都是 0 之外，数据库被有效地填充。当我运行上述内容时，我还会收到关于 $lastIteID 的通知。我试着把

```
 $lastItemID  = $BEAR->Database->insert_id; 
```

在第二个“postImageShareInformation”函数中，插入的结果仍然是 0。两个表都具有自动递增的 id 字段，$BEAR 是我与数据库的连接。任何帮助将不胜感激，因为这个问题让我发疯。

更新 ：

的HTML：

```
<form action=" " id="share_form" method="post" enctype="multipart/form-data">
       <input type="file" id="share_image" name="share_image" style="display:none"/>
       <div id="upload-image-button" class="uibutton-upload">Choose Image</div>        
</form> 
```

上面是上传图片的表格，下面是通过j'query和PHP完成的：

```
 $(document).ready(function() { 
        $('#share_image').live('change', function(){ 
            $("#preview_share").html('');
            $("#preview_share").html('<div class="loading_bar"><div id="image_bar" class="bar"><span></span></div></div>');

            $("#share_form").ajaxForm({
                target: '#preview_share'
            }).submit();
    });
}); 
```

然后通过此表单上传图像描述和囤积：

```
<form autocomplete="off" enctype="multipart/form-data" method="post" name="form">
    <input type="text" name="description"/><br/>
    <input type="text" name="hoard_id"/><br/>
    <input type="submit" value="submit"> 
 </form> 
```

这是使用以下功能的 php：

```
 if(isset($_POST['description']))
{   // Set and Clean Variables
    $BEAR->Template->setData('description', $_POST['description'], TRUE);
    $BEAR->Template->setData('hoard_id', $_POST['hoard_id'], TRUE);
    $BEAR->Webprofile->postImageShareInformation($BEAR->Template->getData('description'), $BEAR->Template->getData('hoard_id'));
}

else if(isset($_FILES['share_image']) )
{
    $valid_formats = array("jpg", "jpeg", "png");

    $name = $_FILES['share_image']['name'];
    $size = $_FILES['share_image']['size'];

    if ($size > 2097152)
    {
        echo '<div class="image_error">Photo Too Large</div>';
    }
    else if(strlen($name))
    {

        list($txt, $ext) = explode(".", $name);

        if(in_array($ext,$valid_formats))
        {

            // Set Image Upload Data
            $BEAR->Template->setData('actual_image_name', $_SESSION['account_name']."-".rand().time().substr(str_replace(" ", "_", $txt), 5).".".$ext);
            $tmp = $_FILES['share_image']['tmp_name'];

            // Move Location
            $location_original = "uploads/test/".$_SESSION['account_name']."/";
            $location_large = "uploads/test/".$_SESSION['account_name']."/large/";
            $location_small = "uploads/test/".$_SESSION['account_name']."/small/";

            if (!file_exists("uploads/test/" . $_SESSION['account_name']))
            {

                mkdir($location_original, 0744);
                mkdir($location_small, 0744);
                mkdir($location_large, 0744);

                move_uploaded_file($tmp, $location_original.$BEAR->Template->getData('actual_image_name'));
                $BEAR->Assets->create_thumb(125, 125, $location_original, $BEAR->Template->getData('actual_image_name'), $location_small);
                $BEAR->Assets->create_thumb(500, 500, $location_original, $BEAR->Template->getData('actual_image_name'), $location_large);

                echo "<img src='uploads/test/".$_SESSION['account_name']."/large/".$BEAR->Template->getData('actual_image_name')."'class='preview'>".$BEAR->Template->getData('actual_image_name');
            }
            else
            {
                // Move Image
                move_uploaded_file($tmp, $location_original.$BEAR->Template->getData('actual_image_name'));
                $BEAR->Assets->create_thumb(125, 125, $location_original, $BEAR->Template->getData('actual_image_name'), $location_small);
                $BEAR->Assets->create_thumb(500, 500, $location_original, $BEAR->Template->getData('actual_image_name'), $location_large);  

                $BEAR->Webprofile->postImageShare($BEAR->Template->getData('actual_image_name'));
                echo "<img src='uploads/test/".$_SESSION['account_name']."/small/".$BEAR->Template->getData('actual_image_name')."' class='preview'>";
            } 
        }
        else 
        {
            echo '<div class="image_error">Invalid File Type</div>';
        }                       
    }                        
    else
    {
        echo '<div class="image_error">Failed</div>';
    }
} 
```

以上所有内容都允许用户在提交描述和囤积 ID 之前预览上传的图像。希望这会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T09:08:39.567

在我看来，你的函数`postImageShareInformation($description, $hoard_id)`没有得到`$lastItemID`变量。`$lastItemID`因此，请尝试在函数本身中传递 的值，如下所示。

```
function postImageShareInformation($description, $hoard_id, $lastItemID)
{
    global $BEAR;

    if ($stmt = $BEAR->Database->prepare("INSERT INTO imagesInformation SET account_name = '".$_SESSION['account_name']."', image_id = '".$lastItemID."', description = ?, hoard_id = ? "))
    {
        $stmt->bind_param('si', $description, $hoard_id);
        $stmt->execute();
        $stmt->close(); 
    }   

} 
```

**到更新的问题**

您在调用`postImageShareInformation()`函数之前调用了`postImageShare()`函数。因此它永远不会得到`$lastItemID`. 假设您使用我修改后的新功能，我已经修改了您的代码。但这仍然应该给你一个想法。

```
if(isset($_FILES['share_image']) )
{
    $valid_formats = array("jpg", "jpeg", "png");

    $name = $_FILES['share_image']['name'];
    $size = $_FILES['share_image']['size'];

    if ($size > 2097152)
    {
        echo '<div class="image_error">Photo Too Large</div>';
    }
    else if(strlen($name))
    {

        list($txt, $ext) = explode(".", $name);

        if(in_array($ext,$valid_formats))
        {

            // Set Image Upload Data
            $BEAR->Template->setData('actual_image_name', $_SESSION['account_name']."-".rand().time().substr(str_replace(" ", "_", $txt), 5).".".$ext);
            $tmp = $_FILES['share_image']['tmp_name'];

            // Move Location
            $location_original = "uploads/test/".$_SESSION['account_name']."/";
            $location_large = "uploads/test/".$_SESSION['account_name']."/large/";
            $location_small = "uploads/test/".$_SESSION['account_name']."/small/";

            if (!file_exists("uploads/test/" . $_SESSION['account_name']))
            {

                mkdir($location_original, 0744);
                mkdir($location_small, 0744);
                mkdir($location_large, 0744);

                move_uploaded_file($tmp, $location_original.$BEAR->Template->getData('actual_image_name'));
                $BEAR->Assets->create_thumb(125, 125, $location_original, $BEAR->Template->getData('actual_image_name'), $location_small);
                $BEAR->Assets->create_thumb(500, 500, $location_original, $BEAR->Template->getData('actual_image_name'), $location_large);

                echo "<img src='uploads/test/".$_SESSION['account_name']."/large/".$BEAR->Template->getData('actual_image_name')."'class='preview'>".$BEAR->Template->getData('actual_image_name');
            }
            else
            {
                // Move Image
                move_uploaded_file($tmp, $location_original.$BEAR->Template->getData('actual_image_name'));
                $BEAR->Assets->create_thumb(125, 125, $location_original, $BEAR->Template->getData('actual_image_name'), $location_small);
                $BEAR->Assets->create_thumb(500, 500, $location_original, $BEAR->Template->getData('actual_image_name'), $location_large);  

                // This will return $lastItemID which we will pass now to postImageShareInformation() function in the block below.
                $lastItemID = $BEAR->Webprofile->postImageShare($BEAR->Template->getData('actual_image_name'));

                if(isset($_POST['description']))
                {   // Set and Clean Variables
                    $BEAR->Template->setData('description', $_POST['description'], TRUE);
                    $BEAR->Template->setData('hoard_id', $_POST['hoard_id'], TRUE);
                    //You were calling this function before ...
                    $BEAR->Webprofile->postImageShareInformation($BEAR->Template->getData('description'), $BEAR->Template->getData('hoard_id'),$lastItemID);
                }
                echo "<img src='uploads/test/".$_SESSION['account_name']."/small/".$BEAR->Template->getData('actual_image_name')."' class='preview'>";
            } 
        }
        else 
        {
            echo '<div class="image_error">Invalid File Type</div>';
        }                       
    }                        
    else
    {
        echo '<div class="image_error">Failed</div>';
    }
} 
```

这应该工作...

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T13:16:28.803

现在我明白这里发生了什么。所以我们有这两个功能：

```
function postImageShare($image_name)
{
    global $BEAR;

    if ($stmt = $BEAR->Database->prepare("INSERT INTO images SET account_name = '".$_SESSION['account_name']."', image_name = ?"))
    {
        $stmt->bind_param('s', $image_name);
        $stmt->execute();
        //$stmt->close();   
    }       

    $lastItemID  = $BEAR->Database->insert_id;
    return $lastItemID; 
} 
```

和

```
// Note that I've added a new parameter to this function and also
// I've modified your prepare statement
function postImageShareInformation($description, $hoard_id, $lastItemID)
{
    global $BEAR;

    if ($stmt = $BEAR->Database->prepare("INSERT INTO imagesInformation SET account_name = '".$_SESSION['account_name']."', image_id = ?, description = ?, hoard_id = ? "))
    {
        $stmt->bind_param('si', $lastItemID, $description, $hoard_id);
        $stmt->execute();
        $stmt->close(); 
    }   

} 
```

现在，当我们调用第一个时，我们必须将返回的 id 分配给一个变量：

```
$lastItemID = postImageShare("myImageName"); 
```

当我们调用第二个函数时，我们可以将此变量分配给最后一个参数：

```
postImageShareInformation("My description", 13, $lastItemID); 
```

现在应该就好了！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-11T22:49:05.920

我假设 $Bear 对象不是直接的 mysqli 连接。它是你创建的一个类？

如果你有

```
$mysqli = new MySQLi($host, $user, $password, $db_name); 
```

然后在你运行查询之后

```
$mysqli->query("INSERT INTO test VALUES ('test')"); 
```

你可以通过

```
$mysqli->insert_id 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-11T22:53:05.333

MySQL 在函数中提供了这个`last_insert_id()`功能。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-12T10:08:17.583

我会说这是因为您的表的 id 列没有 AUTO_INCREMENT 属性

# javascript - 如何在jquery中识别空格与标签按钮

> ID：14287873
> 
> 赞同：0
> 
> 时间：2013-01-11T22:42:37.547
> 
> 标签：javascript, jquery

实际上，我曾寻求有关单击标签按钮以放置在搜索字段中的帮助。那部分已经完成。但我注意到我不能在一个标签中搜索超过 2 个东西。

例如：当用户想要搜索“银行贷款”这个词作为一个查询时。它会像这样返回：![在此处输入图像描述](../Images/05f52c3d6bb406ff6172499cee08e676.png)

所以为了避免这种情况，我想在“标签”而不是空格上完成标签。我将如何做到这一点？我在[这里有一个小提琴](http://jsfiddle.net/YEr6m/18/)来说明我的意思。

```
var $input = $('#search'),
    $tagInput = $('.tag-input');

$input.bind('input', function() {
    var inputValues = $input.val().trim().split(' ');
    console.log(inputValues);
    $tagInput.html('');
    if ($input.val().trim().length > 0) {
        for (var i in inputValues) {
            $tagInput.append('<a>' + inputValues[i] + '</a>');
        }
    }
    $input.width($tagInput.width());
});

$('.keywords .tag').click(function(e){
    e.preventDefault();
    var $this = $(this);
    $input.val(($input.val() + ' ' + $this.text().trim()).trim());
    $input.trigger('input');
}); 
```

提前谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T22:44:52.600

大多数这样做的库将允许您将关键字括在引号中以使其成为关键短语。

# php - UTF-8 编码的电子邮件未正确显示

> ID：14287874
> 
> 赞同：0
> 
> 时间：2013-01-11T22:42:45.547
> 
> 标签：php, codeigniter, email, html-email

我使用 Codeigniter 创建了一个注册表单，要求用户单击通过确认电子邮件发送的链接。我已将此电子邮件编码为 UTF-8，并使用以下方法将其作为 HTML 发送：

```
$this->load->library('email');
$config['charset'] = 'utf-8';
$config['wordwrap'] = TRUE;
$config['mailtype'] = 'html'; 
```

用户已注册并且他收到了一封仅包含前两个字母的电子邮件。第一个词包括字母`Š`。邮件到 时就坏了`Š`，之后什么也没有显示。用户通过 注册`citromail.hu`。是我的错误还是邮件服务的错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-25T10:39:07.683

我找到了解决方案。打开 application/system/libraries/Email.php 并将“quoted-printable”字符串更改为 $this->_encoding。

它会起作用。

# regex - JAX-RS - 带有正则表达式的 @Path 参数

> ID：14287875
> 
> 赞同：2
> 
> 时间：2013-01-11T22:42:44.933
> 
> 标签：regex, path, jax-rs

我正在尝试使用 JSX-RS 实现服务，我在这里遇到的情况是，在具有不同版本号的多种类型的请求中，应该通过一种方法来满足。

```
@Path("/url1/url2{version: [[/v][0-9][.][0-9]]*}") 
```

这应该迎合 -

```
/url1/url2
/url1/url2/v1
/url1/url2/v1.2

```

其中版本分别为 0、1 和 1.2。

我有正确的正则表达式，但代码似乎不接受它 `((/v[0-9])(.[0-9])?)`？我在这里很困惑。

我需要将其限制为仅在 v 之后和小数点 (.) 之后的一位数字，并且我只需要出现一次 /v*。例如 -

`/ur1/url2/v1v1`不允许

另外我想知道性能方面的知识，如果我有一个带小数点的网址，是否会花费我更多的时间来解析它。我必须对它进行 url 编码吗？任何其他建议将不胜感激。

另一种方法是针对每个版本，我有一个带有@path 参数的单独方法。最后哪个是最好的解决方案？

非常欢迎任何建议或想法！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T23:36:08.037

好的，这就是我这样做的方式：

首先， the`v`是可选的，因为您必须接受`/url1/url2`. 所以，我将从：

```
(/v)? 
```

这`?`意味着零次或一次。

现在，如果你放 a`/v`那么你必须在它之后有一个版本数字（即`/v1`），但这只是你放第`/v`一个，对吧？

有点像：`(/v\d)?`

无需为数字指定量词，`\d`因为默认情况下为 1。`?`由于量词，整个组可以出现零次或一次。

现在，如果您放置一个版本数字，那么您可以选择放置一个用点分隔的第二个版本数字（即`/v1.1`）。但这仅在您首先使用版本号时才有效，并且该组是可选的。如果它出现，它应该只出现一次，所以我们可以`?`再次为这个组使用量词。

所以，有点像这样：

```
(/v\d(\.\d)?)? 
```

请注意，我用 a`\.`来表示我们期望这里有一个“点”。之所以如此，是因为`.`它是一个预定义的正则表达式字符类，它代表任何字符，因此您必须对其进行转义以表示您期望一个`"."`.

因此，这适用于您提供的所有测试场景。

# javascript - 使用 AJAX 完全加载网站内容

> ID：14287879
> 
> 赞同：1
> 
> 时间：2013-01-11T22:43:35.000
> 
> 标签：javascript, ajax, wordpress, web, preload

我正在考虑让我的网站完全加载 ajax，以提高响应能力，并且我期望整体效率。它似乎没有任何缺点。

*   我打算把网站安装成一个普通的wordpress网站，有很多普通的页面，但是页面加载后，使用ajax方法来重载所有链接，其他页面的文本内容会被预先加载，而图形会被预先加载懒加载。
*   我打算找到一个库来处理浏览器历史记录（不确定处理这个跨平台会有多难）
*   是否已经有这种事情的例子？这很常见吗？
*   有什么我想念的吗？

# php - 只有 .php 文件循环使用 .htaccess 重定向

> ID：14287882
> 
> 赞同：2
> 
> 时间：2013-01-11T22:43:55.750
> 
> 标签：php, apache, .htaccess, redirect

我正在设置一个带有指向子文件夹的通配符子域的系统。由于我以外的原因，这必须使用 .htaccess 来完成。例如，要将[http://subdomain.example.com](http://subdomain.example.com)重定向到 example.com 的 public_html 下的目录 /subdomain/，以下*部分*有效（感谢[此 Q&A](https://stackoverflow.com/questions/8368473/wordpress-and-subdomains-htaccess)）：

```
RewriteEngine On
RewriteRule ^subdomain/ - [L]
RewriteCond %{HTTP_HOST} ^subdomain\.example\.com$
RewriteRule ^(.*)$ /subdomain/$1 [L] 
```

它适用于所有类型的文件，*除非*它们具有扩展名 .php。例如，如果我将 sometext.txt 文件放在 /subdomain/ 目录中，我可以在[http://subdomain.example.com/sometext.txt](http://subdomain.example.com/sometext.txt)获取它，但如果我将文本文件的扩展名更改为 .php，我会得到由于重定向循环而导致的 500 错误。

这让我觉得 PHP 模块尝试读取文件的方式有些奇怪。或者 Apache 和 PHP 之间的关系。我不熟悉这个；这就是我问的原因。

我在共享主机上，因此无法访问 Apache 配置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T22:59:14.327

如果这样做对你有用，你能试试吗？

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^subdomain\.localhost$
RewriteRule ^(.*)$ http://localhost/subdomain/$1 [L] 
```

因此，请尝试直接添加您的实际域 URL，而不是 localhost。

我在我的本地主机上测试了这个，首先使用这样的 url，然后它们正确重定向

```
http://subdomain.localhost/test.txt
http://subdomain.localhost/test.php 
```

* * *

我建议放松一下，喝杯咖啡，然后回来。（有时这有帮助）

然后只关注重定向，

*   排除他们的 Apache 配置问题
*   您可以稍后再担心 301
*   仅使用 test.php，没有 index.php

在你的调试中试试这个：

*   关闭所有其他 chrome 浏览器选项卡。
*   以隐身方式打开，您要测试的网址
*   继续关闭那个隐身，所以它总是确保完全刷新
*   更改 htacess 文件，并始终打开一个新的隐身标签

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T00:59:55.547

正如我所怀疑的，问题是由托管服务提供商的配置引起的。.htaccess 很好。有人告诉我这是 DirectAdmin 中最近发现的一个问题，使用 php-fpm 和 FastCgi。（解决方案是让他们在我的主目录中删除指向 public_html 的符号链接并将其替换为空目录。我对此一无所知！）

谢谢大家！

# java - StringBuffer 如何与 .append 一起使用

> ID：14287884
> 
> 赞同：4
> 
> 时间：2013-01-11T22:44:11.507
> 
> 标签：java, string-concatenation, stringbuffer

我正在做一个计算机科学项目，我需要合并`StringBuffer`s. 我需要帮助`.append`了解连接的含义和含义。有人告诉我，我可以通过使用`.append`with来显示谁是（我的游戏的）赢家`StringBuffer`。

```
 public static void winner ()
  {
    if (position1 >= 100){
      System.out.println("THE WINNER IS " + name1); 
    }
    else if (position2 >= 100){
      System.out.println("THE WINNER IS " + name2); 
    }
  } 
```

`StringBuffer`我可以用来输出谁赢得了比赛，而不是将名称作为字符串？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-11T22:51:28.057

感谢编译器，您已经在使用`StringBuilder`更新、更快的`StringBuffer`.

您上面的代码将编译为等效于：

```
public static void winner ()
{
  if (position1 >= 100){
    System.out.println(new StringBuilder("THE WINNER IS ").append(name1).toString()); 
  }
  else if (position2 >= 100){
    System.out.println(new StringBuilder("THE WINNER IS ").append(name2).toString()); 
  }
} 
```

因此，在这种情况下，您将不会完成尚未为您完成的任何事情。在循环`StringBuilder`构建时使用。`String`

在您的情况下，他们可能正在谈论为两种情况预初始化单个 StringBuilder ：

```
public static void winner() {
  StringBuilder out = new StringBuilder("THE WINNER IS ");
  if (position1 >= 100) {
    out.append(name1);
  } else if (position2 >= 100 {
    out.append(name2);
  } else {
    return; // Preserve previous behavior just in case, remove this if it's not needed
  }
  System.out.println(out);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-11T22:57:41.010

你可能想要这样的东西：

```
 public static void winner ()
  {
      StringBuffer sb = new StringBuffer("THE WINNER IS ");

      if (position1 >= 100)
          System.out.println(sb.append(name1).toString());
      else if (position2 >= 100)
          System.out.println(sb.append(name2).toString());
  } 
```

但是通常 StringBuilder 比 StringBuffer 更受欢迎，因为对 StringBuffer 的访问是同步的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T22:46:45.867

您可以，因为`System.out.println`会自动将其参数转换为 a `String`，从而产生`StringBuffer`. 大多数情况下，您会在需要迭代一组数据时使用它。

使用该`append`方法，您可以将数据附加到缓冲区：

```
String[] values = { 'string value', 'testing' };
StringBuffer sb = new StringBuffer();
for(String value: values) {
    sb.append(value);
} 
```

将导致 -->`string valuetesting`

**注意：**改为考虑可能会更好`StringBuilder`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-11T22:48:59.583

小字符串追加和连接通常不会从使用中获得太多好处，`StringBuilder`但请记住，字符串追加有 3 个操作，1 个新分配，包括添加的两个字符串的大小，以及 2 个复制操作来复制内容（这意味着您现在在内存中有 3 个字符串），`StringBuilder`您只需附加并调整大小到一个固定宽度的缓冲区，大部分时间只需要 1 个副本（摊销成本副本，有时您需要调整大小，需要 2 个）。如果您将很多内容附加到 1 个字符串中，我建议您`StringBuilder`改用，但对于像您这样的连接，您不应该看到性能损失（至少可测量）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-11T22:53:29.290

使用`StringBuffer`or的想法`StringBuilder`是避免重复连接字符串，如下所示：

```
String result = "";
for (int i = 0; i < 200; i++) {
    result = result + i + ",";
} 
```

这效率不高，在每个循环中（在内部）创建一个 String 对象

使用 StringBuilder / StringBuffer：

```
StringBuilder buf = new StringBuilder(200); // init with a estimation of length has advantage
for (int i = 0; i < 200; i++) {
    buf.append(i).append(",");
}
String result = buf.toString(); 
```

这避免了在每个循环中不必要地创建字符串，它只是用字符填充缓冲区，并在需要时调整缓冲区的大小。

但是，在您的情况下，这不值得付出努力。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-11T23:21:23.160

是的你可以。就像每个人都指出的那样， StringBuffer.toString() 会将内容作为字符串刷新。你需要问自己的问题是，你真的关心你使用什么，还是你特别想使用 StringBuffer 来学习一些东西。

对于您的操作，一个与另一个一样好。如果你真的想做你朋友告诉你的，我想这里的人已经回答得很清楚了。

或者你可以告诉你的朋友，“没关系。在我的情况下，一个和另一个一样好”:)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-09-25T08:40:58.183

为了获得字符串的同步版本，建议在需要线程安全的地方使用 StringBuffer。对于不需要线程安全的非同步使用 StringBuilder 类，我们的应用程序将提供更好的性能..

# zsh - 基于多路径的自定义 zsh 补全

> ID：14287887
> 
> 赞同：2
> 
> 时间：2013-01-11T22:44:33.787
> 
> 标签：zsh

我想为接受目录作为参数的命令编写自定义完成。我认为用一个例子来解释它应该如何工作是最容易的。

假设我在某处定义了一个目录列表：

```
d=(~/somedir/foo ~/somedir/foo/bar ~/other/dir/baz) 
```

对命令的有效调用是

```
mycmd foo
mycmd bar
mycmd baz
mycmd baz/and/some/subdir 
```

完成应该可以做

```
mycmd f<TAB>              => mycmd foo
mycmd baz/and/some/s<TAB> => mycmd baz/and/some/subdir 
```

不知何故，我有点迷失在 zshcompsys 的复杂性中，所以我不确定如何最好地解决这个问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-12T07:13:11.087

### 1\. 预定义目录作为参数。

如果您事先知道 的参数`mycmd`可以是什么，您可以使用一个非常简单的完成函数，其中的值是硬编码的：

```
 #compdef _mycmd
 _arguments "1: :(foo bar baz baz/and/some/subdir)" 
```

这给出了以下内容：

```
zsh% mycmd<TAB>
bar                    baz                    baz/some/other/subdir  foo    
zsh% mycmd baz<TAB>
baz                    baz/some/other/subdir
zsh% mycmd baz/<TAB>
zsh% mycmd baz/some/other/subdir 
```

### 2.完成一个目录内的所有子目录

假设 的任何子目录`foo`是 的有效路径`mycmd`：

```
~/foo/bar         # Valid path
~/foo/subdir/baz  # Valid path
~/baz/bar         # Invalid path 
```

您可以告诉`compctl`完成其中的任何目录`foo`作为参数`mycmd`：

```
# In your ~/.zshrc
compctl -/ -W ~/foo mycmd 
```

我不知道这将如何与`mycmd`您编写的任何其他完成函数一起发挥作用（例如，如果`mycmd`也接受非文件名参数）。它是这样完成的：

```
zsh% mycmd<TAB>
bar/  baz/  caz/
zsh% mycmd baz/s<TAB>
zsh% mycmd baz/subdir/ 
```

### 注意：我的路径/命令有点长。我在下面的粘贴中剪掉了一些（替换为`...`）。

### 3\. 使用预定义的数组。

如果我们有一个数组`d=(foo bar baz)`，其中每个元素都是 的有效补全`mycmd`，我们可以使用`-k`：

```
→ compctl -k "(foo bar baz)" mycmd
→ mycmd
bar  baz  foo 
```

### 4\. 数组的子目录。

使用以下目录结构：

```
~/.../somedir
~/.../somedir/bar
~/.../somedir/foo
~/.../somedir/foo/invalid
~/.../otherdir
~/.../otherdir/subdir
~/.../otherdir/subdir/baz 
```

的`-W`选项`compctl`也将数组作为参数，允许这样做：

```
→ compctl -/ -W "(/.../otherdir /.../somedir)" mycmd
→ mycmd <TAB>
bar/     foo/     subdir/ 
```

我相当确定这现在符合您的要求。
**注意：**该`-W`选项适用于`-/`（阅读手册页`zshcompctl`） -`-W`不能单独使用。

### 5\. 带有部分子目录的数组

让我们假设有效的论点是：

```
mycmd foo  # Valid
mycmd baz  # Valid
mycmd baz/and/some/subdir # Valid - subdirectory of `baz`
mycmd foo/subdir # Invalid!! 
```

我们**不**想要 的子目录`foo`，只想要 的子目录`baz`。我们可以通过混合`-k`和来实现`-/ -W`：

```
→ compctl -/ -W "(/.../otherdir)" -k "(/.../somedir/foo)" mycmd
→ mycmd <TAB>
/Users/simont/sandbox/completion/somedir/foo  subdir/ 
→ mycmd foo/<TAB> # No further completion - we can't complete foo/invalid. 
→ mycmd subdir/<TAB>
→ mycmd subdir/baz/ 
```

但是，这会留下完整的路径`foo`（不像`-W`，它会删除它）。要解决此问题，请不要将其放入数组中`-k`：

```
compctl -/ -W "(/.../otherdir)" -k "(foo)" mycmd 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T22:02:23.053

Thanks for your help, simont, but I took another approach using a completion function. It's mostly based on trial and error rather than reading the documentation, so I have no idea if this is the right way[tm] to do it, but it works and does not require much code.

```
function _foo {
    setopt LOCALOPTIONS
    unsetopt AUTOPUSHD
    local paths
    paths=(/home/dani '/var/log' '/usr/share' '/etc')

    if [[ $PREFIX == *'/'* ]] {
        for p ($paths) {
            if [[ ${PREFIX[(ws:/:)1]} == ${p:t} ]] {
                local oldpwd=$PWD
                cd -q ${p:h}
                local matches
                matches=($PREFIX*(/))
                 if [[ ${#matches} -gt 0 ]] {
                    compadd -p ${matches[1]:h}'/' -q -S '/' -- ${matches:t}
                }
                cd -q $oldpwd
                return
            }
        }
    } else {
        compadd -q -S '/' -- ${^paths:t}
    }
}

compdef _foo foo 
```

# java - 在新窗口中创建 JTable 作为 Java 中 JMenuItem 的操作侦听器

> ID：14287889
> 
> 赞同：2
> 
> 时间：2013-01-11T22:44:47.470
> 
> 标签：java, swing, user-interface, jtable

我想创建一个新窗口，其中包含`JTable`按 a 的结果`JMenuItem`，我尝试在动作侦听器中创建一个新类，但不确定它有多正确。反正不管用，求指教。

```
...

help.add(currencyTable);
...

        //action listener for the currency table JMenuItem button

        currencyTable.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e)
            {
                class currencyJTableClass extends JFrame
                {
                    JTable currencyTable;

                    public currencyJTableClass()
                    {
                        setLayout(new FlowLayout());
                        String[] headLine = {"x","y","z"} ;
                        String [][] currencyData =
                                {
                                        {
                                          "a","b","c"
                                        },
                                        {
                                          "d","e","f"
                                        },
                                };
                        currencyJTable = new JTable(currencyData,headLine);
                    }

                } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T22:53:02.840

不要在你`JFrame`的. 而是在启动时创建一个带有 a的*单曲*，以及. 然后，在您的 中，使用您希望显示的数据更新模型。`JTable``ActionListener` *`JFrame``JTable``TableModel``ActionListener`*

 *当开始学习如何使用表模型时，请从 开始，`DefaultTableModel`因为它支持使用[addRow](http://docs.oracle.com/javase/7/docs/api/javax/swing/table/DefaultTableModel.html#addRow%28java.lang.Object%5B%5D%29)和[removeRow](http://docs.oracle.com/javase/7/docs/api/javax/swing/table/DefaultTableModel.html#removeRow%28int%29)对模型进行动态更改。

这是一个[例子](http://www.java2s.com/Code/JavaAPI/javax.swing.table/DefaultTableModeladdRowObjectrowData.htm)

注意：如果您*确实*需要创建一个单独的窗口来显示数据，一些可能性是：

*   使用模式`JDialog`——将用户的焦点吸引到窗口中的内容
*   改用[CardLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html) — 可以轻松显示许多组件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T01:07:31.610

看来你似乎决心要走这条路，你有很多选择……

## 艰难的路...

```
public void actionPerfomed(ActionEvent e) {

    TableModel model = //... Create the new model based on you needs
    JTable table = new JTable(model);

    JFrame frame = new JFrame();
    frame.setLayout(new BorderLayout());
    frame.add(new JScrollPane(table));
    frame.pack();
    frame.setLocationRelativeTo(null);
    frame.setVisible(true);

} 
```

这将要求您在每个动作侦听器中复制此代码...这是很多代码...

## 稍微容易一些

为自己创建一个简单的实现，将所有必需的逻辑包装到几个基本类中......

```
public class ModelPane extends JPanel {

    private JTable table;

    public ModelPane(TableModel model) {
        setLayout(new BorderLayout());
        table = new JTable(model);
        add(new JScrollPane(table));
    }

}

public class ModelFrame extends JFrame {

    public ModelFrame(TableModel model) {
        setLayout(new BorderLayout());
        add(new ModelPane(model));
        pack();
        setLocationRelativeTo(null);
    }

} 
```

然后在你的`actionPerformed`方法中你可以简单地做......

```
public void actionPerfomed(ActionEvent e) {
    TableModel model = //... Create the new model based on you needs
    ModelFrame frame = new ModelFrame(model);
    frame.setVisible(true);
} 
```

这集中了用于显示和管理表格和数据的核心逻辑

## 好一点

使用第二个选项，您可以使用`Action`API 生成基本操作，这些操作提供生成模型所需的信息，但允许基本操作类实际确定`actionPerformed`方法应该如何工作......

```
public abstract class AbstractModelAction extends AbstractAction {

    public abstract TableModel getModel();

    @Override
    public void actionPerformed(ActionEvent e) {
        ModelFrame frame = new ModelFrame(getModel());
        frame.setVisible(true);
    }
}

public class CurrencyModelAction extends AbstractModelAction {

    @Override
    public TableModel getModel() {
        return //... Create the new model based on you needs
    }

} 
```

查看[如何使用操作](http://docs.oracle.com/javase/tutorial/uiswing/misc/action.html)了解更多信息...

## 结论

使用最灵活并提供最佳重用的方法。我很少创建 custom `JFrame`，仅仅是因为我更喜欢创建面板，因为这意味着我可以在我想要的任何上下文中重复使用它们，灵活且可重复使用；）*

# php - 如何在运行 Ubuntu 12.04 和 PHP 5.4 的 vagrant box 上安装 APC？

> ID：14287893
> 
> 赞同：1
> 
> 时间：2013-01-11T22:45:06.417
> 
> 标签：php, ubuntu, apc, chef-infra, vagrant

在我的“Vagrant”文件中，我有这一行：

```
chef.add_recipe("php::module_apc") 
```

但它给了我这个错误：

```
[2013-01-11T22:14:53+00:00] INFO: Processing package[php-apc] action install (php::module_apc line 34)
================================================================================
Error executing action `install` on resource 'package[php-apc]'
================================================================================
Chef::Exceptions::Exec
----------------------
apt-get -q -y install php-apc=3.1.7-1 returned 100, expected 0

Resource Declaration:
---------------------
# In /tmp/vagrant-chef-1/chef-solo-1/cookbooks/php/recipes/module_apc.rb

 33: when "debian"
 34:   package "php-apc" do
 35:     action :install
 36:   end
 37: end

Compiled Resource:
------------------
# Declared in /tmp/vagrant-chef-1/chef-solo-1/cookbooks/php/recipes/module_apc.rb:34:in `from_file'

package("php-apc") do
  retry_delay 2
  retries 0
  recipe_name "module_apc"
  action [:install]
  cookbook_name :php
  package_name "php-apc"
end
[2013-01-11T22:14:53+00:00] ERROR: Running exception handlers
[2013-01-11T22:14:53+00:00] ERROR: Exception handlers complete
[2013-01-11T22:14:53+00:00] FATAL: Stacktrace dumped to /tmp/vagrant-chef-1/chef-stacktrace.out
[2013-01-11T22:14:53+00:00] FATAL: Chef::Exceptions::Exec: package[php-apc] (php::module_apc line 34) had an error: Chef::Exceptions::Exec: apt-get -q -y install php-apc=3.1.7-1 returned 100, expected 0
Chef never successfully completed! Any errors should be visible in the output above. Please fix your recipes so that they properly complete. 
```

我之前也运行过这个：

```
chef.add_recipe("apt") 
```

但这也无济于事。

任何想法如何解决这一问题？非常感谢！

顺便说一句，我正在使用 OpsCode 的所有食谱： [https ://github.com/opscode-cookbooks/](https://github.com/opscode-cookbooks/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-30T10:18:01.687

`module_apc.rb`变化中；

```
apt-get install php-apc 
```

... 至：

```
apt-get install php5-apc 
```

# jquery - 用户登录后走出灯箱（模态框）？

> ID：14287899
> 
> 赞同：1
> 
> 时间：2013-01-11T22:45:46.107
> 
> 标签：jquery, fancybox

我确信有一个简单的解决方案，我只需要一些方向。

当用户单击它时，我有显示“登录”的按钮，我网站的后端部分出现在 iframed 选项卡中（主站点位于根目录中，后端位于 /clients/ iframe 中加载索引）

因此，虽然我希望登录部分（全部在 index.php 中）出现在灯箱中，但我不希望整个体验都在灯箱内……在用户登录后，他们被定向到帐户。 php，不幸的是，我的问题是在 account.php 中它们留在灯箱中。

登录后在灯箱之外进入整个页面的解决方案是什么..

注意：我已经尝试过这个解决方案，但没有成功（也许我做错了）

我将以下内容放在标题中。

```
 `<script language="javascript">
    function redirectParent()
    {
    window.opener.document.location("account.php");
    }
    </script>` 
```

然后在提交按钮所在的 index.php 中，我输入以下内容

```
 `onclick="redirectParent()"` <--- I added that inside the following below

     `<input name="submit" onclick="redirectParent()" value="<?php echo             lang('LOGIN_BUT_NOW');?>" type="submit" class="button"/>` 
```

那没有做任何事情，我觉得我可能在这里遗漏了一些简单的东西。如果这不是我正在寻找的解决方案，我将不胜感激为我正在努力实现的正确解决方案的方向。

太感谢了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T22:56:19.093

尝试

```
window.top.location.href = "account.php"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T06:21:07.090

您实际上不需要从fancybox 内重定向到新页面，只需在提交表单后关闭它。使用标签上不在（提交）标签中的`onsubmit`属性，例如：`form``input`

```
<form onsubmit="parent.jQuery.fancybox.close();" .... 
```

...然后，在您的fancybox自定义脚本（您用来打开fancybox的脚本）中添加回调`afterClose`以重定向到您想要的页面，例如：

```
$(".fancybox").fancybox({
    afterClose : function() {
      window.location.href = "path/account.php";
        return;
    }
}); 
```

# pandas - How do you make plotting two pandas Series in the same ipython notebook cell use different colors automatically?

> ID：14287903
> 
> 赞同：4
> 
> 时间：2013-01-11T22:46:25.067
> 
> 标签：pandas, ipython-notebook

When I run this in one cell, both plot lines are blue. I could have sworn I saw Wes do a demo of baby names with two plots where the two plot lines came out in different colors without having to specify a color:

```
pd.Series(randn(100)).cumsum().plot()
pd.Series(randn(100)).cumsum().plot() 
```

Yes, it was at 2:06:44 of this YouTube video: [http://www.youtube.com/watch?v=w26x-z-BdWQ](http://www.youtube.com/watch?v=w26x-z-BdWQ)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T18:08:05.977

You just need to pass a couple of kwargs to the call to `plot`

```
import numpy as np
import pandas as pd
import matplotlib.pyplot

fig, ax = plt.subplots()
pd.DataFrame(np.random.randn(100, 2)).cumsum().plot(ax=ax) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T10:46:56.693

I'm not sure how Wes did it in the video, but when using plot(df.index, df.column) and do that several times with different columns, then the graphs have different colors.

(I'm using the plot command from ipython --pylab) for this. )

# networking - 如何查看浏览器请求？

> ID：14287904
> 
> 赞同：6
> 
> 时间：2013-01-11T22:46:26.520
> 
> 标签：networking, post, browser, get

我正在和另一个程序员一起工作，他最近给我发了一个新的基于 JSON 的 API 来工作。他说我可以通过访问特定网站并查看我的浏览器请求来查看所有 API 调用的示例。我的问题是，**如何查看我的浏览器请求？** 我之前使用过 Wireshark 来分析我的一个程序正在发送的数据包 - 这就是他在说的吗？这是“查看我的浏览器请求”吗？或者有没有更简单的方法来做到这一点，也许在命令行上？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T22:59:04.683

使用适用于任何浏览器的内置工具或可用插件，例如用于 Firefox 的[Firebug](https://getfirebug.com/)或[Chrome 的开发者工具](https://developer.chrome.com/devtools/index)。每个都有一个网络选项卡，您可以使用它来查看所有 GET/POST 请求和对任何类型资源的响应。

[Wireshark](https://www.wireshark.org/)让你看得更深。虽然浏览器工具通常只会监听 HTTP 流量，但 Wireshark 会让您监听其他协议以及通过它们发送的每个数据包。

如果您正在使用 REST API，您将会有兴趣使用浏览器的工具来观察传入和传出的呼叫。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T22:48:24.967

我几乎每天都使用[**Firebug 。**](http://addons.mozilla.org/en-us/firefox/addon/firebug)它应该允许您查看请求等等。我相信它需要 Firefox，但也可能已移植到 Google Chrome。

# c# - 线程 0x0 可能已在 MonoMac 中使用 NSOpenPanel 过早完成

> ID：14287912
> 
> 赞同：3
> 
> 时间：2013-01-11T22:47:10.747
> 
> 标签：c#, cocoa, mono, monomac

当从 NSMenuItem 类型的对象的操作调用 NSOpenPanel 类型的对象时，我遇到了问题。

我的 MainController 有下一个方法，其中 tblTest 是一个 NSScrollView：

```
 public override void AwakeFromNib ()
    {
        base.AwakeFromNib ();
        tblTest.Menu = this.GetContextualMenu ();
    }

    private NSMenu GetContextualMenu ()
    {
        NSMenu menu = new NSMenu ();
        NSMenuItem item = new NSMenuItem ();
        item.Title = "Execute Action";
        item.Activated+= delegate
        {
            NSOpenPanel openPanel= new NSOpenPanel();
            openPanel.Prompt = "Select file";
            openPanel.RunModal();
        };
        menu.AddItem (item);
        return menu;
    } 
```

然后，当我单击菜单项“执行操作”时，我得到下一个异常并且应用程序卡住了：

```
Native stacktrace:

0   libmono-2.0.dylib                   0x0029ed6f mono_handle_native_sigsegv + 287
1   libmono-2.0.dylib                   0x00203f33 mono_sigsegv_signal_handler + 355
2   libsystem_c.dylib                   0x94aa859b _sigtramp + 43
3   ???                                 0xffffffff 0x0 + 4294967295
4   DesktopServicesPriv                 0x9bd75e96 _ZN7TFSInfo10InitializeEhP29OpaqueLSSharedFileListItemRef + 770
5   DesktopServicesPriv                 0x9bcfbf2e _ZN19TFSInfoSynchronizer13FetchChildrenEv + 652
6   DesktopServicesPriv                 0x9bce7df3 _ZN5TNode19SynchronizeChildrenEmR16TNodeEventPtrSet + 181
7   DesktopServicesPriv                 0x9bce7867 _ZN5TNode10HandleSyncEm + 2123
8   DesktopServicesPriv                 0x9bce6fef _ZN5TNode10HandleSyncERK11TCountedPtrI9TNodeTaskERK8TNodePtr + 55
9   DesktopServicesPriv                 0x9bd35830 _ZN5TNode17HandleNodeRequestERK11TCountedPtrI9TNodeTaskERKS0_I17TVolumeSyncThreadE + 978
10  DesktopServicesPriv                 0x9bd58d7e __PostNodeTaskRequest_block_invoke_010 + 87
11  DesktopServicesPriv                 0x9bd6b269 _Z18ExceptionSafeBlockU13block_pointerFvvE + 55
12  DesktopServicesPriv                 0x9bd58d21 __PostNodeTaskRequest_block_invoke_0 + 86
13  libdispatch.dylib                   0x9b792fc9 _dispatch_call_block_and_release + 15
14  libdispatch.dylib                   0x9b79494f _dispatch_queue_drain + 224
15  libdispatch.dylib                   0x9b7947f4 _dispatch_queue_invoke + 47
16  libdispatch.dylib                   0x9b793ffc _dispatch_worker_thread2 + 187
17  libsystem_c.dylib                   0x94a52b24 _pthread_wqthread + 346
18  libsystem_c.dylib                   0x94a546fe start_wqthread + 30

Debug info from gdb:
Unhandled Exception: System.NullReferenceException: Object reference not set to an instance of an object
[ERROR] FATAL UNHANDLED EXCEPTION: System.NullReferenceException: Object reference not set to an instance of an object
Thread 0x0 may have been prematurely finalized 
```

有谁知道发生了什么？？

# matlab - 使用 Matlabs fprintf 命令

> ID：14287916
> 
> 赞同：-1
> 
> 时间：2013-01-11T22:47:40.527
> 
> 标签：matlab, printf

我正在 matlab 中编译一个函数，它会告诉我

1.  三角形的第三条边
2.  三角形的周长
3.  三角形的面积

到目前为止我已经想出了这个

```
function findHypotenuse(a, b)
    c=sqrt(a^2+b^2);
    circumference = (a+b+c);
    area = (.5*(a*b));
    fprintf('Triangle has side c which is %g.\n',c)
    fprintf('Triangle has a circumference of %g.\n',circumference)
    fprintf('Triangle has area of %g.\n',area)
    fprintf('Triangle has area of %g.\n',area) 
```

结果当放入命令窗口时给了我这样的东西

```
 >> findHypotenuse(6,8)
      Triangle has side c which is 10.
      Triangle has a circumference of 24.
      Triangle has area of 24.
      Triangle has area of 24. 
```

我需要帮助来弄清楚如何让它说出“带有边_和边_的三角形有边c，其中c”和发现的其他两件事的相同格式。

另外*我想编译一个函数，如果三角形是等腰三角形，它会告诉我是或否

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T22:52:30.593

`fprintf('A triangle with sides %.1f and %.1f has a hypotenuse of %.1f and a circumference of %.1f\n', a, b, c, a+b+c);`

似乎是你需要的。如果您希望能够以不同的方式格式化您的数字，您可以变得非常聪明并添加

```
fs = '%.3f';
fprintf(['A triangle with sides ' fs ' and ' fs ' has a hypotenuse of %.1f and a circumference of %.1f\n], a, b, c, a+b+c); 
```

这将允许您更改答案的精度，并且所有数字的格式都将以相同的方式更改。

# php - Magento 产品视图页面上的奇怪 PHP 现象被不同的浏览器解释不同

> ID：14287917
> 
> 赞同：0
> 
> 时间：2013-01-11T22:47:40.497
> 
> 标签：php, magento

下面的脚本有一个奇怪的问题。我整天都在努力。我正在尝试在 Magento 购物车的产品视图页面的侧栏中显示每个类别的畅销商品。此脚本在 IE（全部）中有效，但不一样。实际上 IE 做对了，而我尝试过的所有其他浏览器都做错了。

这就是问题所在。它是 php，而 php 应该是一种服务器端语言。但似乎 IE 收到了不同的信息。在下面，您会注意到我在一个部分周围有一个红色边框，在另一部分周围有一个绿色边框。IE 得到红色边框，其余的得到绿色边框。红色边框具有“类别名称”，它在 IE 中工作，但绿色边框......如果我为类别名称放置脚本，它会打印一条错误消息。

除了我得到的多个“被零除”警告（不知道为什么）我想知道如果 php 是一种服务器端语言，为什么两种浏览器会收到两条不同的消息！？

谢谢

```
<?php

/**
 * @author Branko Ajzele | http://activecodeline.com | branko.ajzele@surgeworks.com
 * @license GPL
 */

/**
*
*
05/06/2011 Modified by Erik Gabor | erikvail@gmail.com | http://www.mage-contacts.com
* @license GPL

*/ 

$storeId = Mage::app()->getStore()->getId();

$totalPerPage = ($this->show_total) ? $this->show_total :1;
$counter = 1;
$visibility = array(
                      Mage_Catalog_Model_Product_Visibility::VISIBILITY_BOTH,
                      Mage_Catalog_Model_Product_Visibility::VISIBILITY_IN_CATALOG
                  );

$storeId = Mage::app()->getStore()->getId();
$_productCollection = Mage::getResourceModel('reports/product_collection')
                              ->addAttributeToSelect('*')
                              ->setStoreId($storeId)
                  ->addStoreFilter($storeId)
                              ->addOrderedQty()
                              ->addAttributeToFilter('visibility', $visibility);

        if ($current_category = Mage::registry('current_category'))
    $_productCollection->addCategoryFilter($current_category);
    $_productCollection->setPage(1,$totalPerPage);  
        $_productCollection->setOrder('ordered_qty', 'desc');

        Mage::getSingleton('catalog/product_status')->addVisibleFilterToCollection($_productCollection);
        Mage::getSingleton('catalog/product_visibility')->addVisibleInCatalogFilterToCollection($_productCollection);

        $_helper = $this->helper('catalog/output');

//Mage_Reports_Model_Mysql4_Product_Collection
?>

<?php

/**
 * Each product in foreach loop is array of following fields
 *

Array
(
    [ordered_qty] => 2.0000
    [entity_id] => 150
    [entity_type_id] => 10
    [attribute_set_id] => 62
    [type_id] => simple
    [sku] => 500gb7200
    [category_ids] => 29,36
    [created_at] => 2008-07-25 01:12:44
    [updated_at] => 2008-07-25 02:09:26
    [has_options] => 0
    [visibility] => 4
    [hardrive] => 500 GB
    [meta_keyword] =>
    [description] => 500GB- 7200RPM, SATA 3.0Gb/s, 32MB Cache
    [short_description] => 500GB - 7200RPM, SATA 3.0Gb/s, 32MB Cache
    [custom_layout_update] =>
    [status] => 1
    [tax_class_id] => 1
    [manufacturer] => 118
    [weight] => 1.0000
    [price] => 299.0000
    [name] => Western Digital 500GB HD - 7200RPM
    [url_key] => 500gb-7200rpm
    [gift_message_available] => 2
    [harddrive_speed] => 7200 rpm
    [meta_title] =>
    [meta_description] =>
    [thumbnail] => /w/e/western-digital-500gb-hd-7200rpm.jpg
    [small_image] => /w/e/western-digital-500gb-hd-7200rpm.jpg
    [image] => /w/e/western-digital-500gb-hd-7200rpm.jpg
    [custom_design] =>
    [options_container] => container2
    [stock_item (Mage_CatalogInventory_Model_Stock_Item)] => Array
        (
            [item_id] => 119
            [product_id] => 150
            [stock_id] => 1
            [qty] => 999994.0000
            [min_qty] => 0.0000
            [use_config_min_qty] => 1
            [is_qty_decimal] => 0
            [backorders] => 0
            [use_config_backorders] => 1
            [min_sale_qty] => 1.0000
            [use_config_min_sale_qty] => 1
            [max_sale_qty] => 0.0000
            [use_config_max_sale_qty] => 1
            [is_in_stock] => 1
            [low_stock_date] => 0000-00-00 00:00:00
            [use_config_notify_stock_qty] => 1
            [manage_stock] => 0
            [use_config_manage_stock] => 1
            [product (Mage_Catalog_Model_Product)] => *** RECURSION ***
        )

    [is_salable] => 1
)

 */
 $_collectionSize = $_productCollection->count();

 if($current_category && $_collectionSize) :

?>
<div class="block" style="border:1px solid red">
<div class="block-title">
<strong><span><?php echo $current_category->getName()  ?> <?php echo $this->__('Bestseller') ?></span></strong>
</div>
<?php else: ?>
<div class="block" style="border:1px solid green">
<div class="block-title">
<strong><span> <?php echo $this->__('Bestseller') ?></span></strong>
</div>
 <?php endif;?>
  <?php $_collectionSize = $_productCollection->count() ?>
    <?php $_columnCount = $this->getColumnCount(); ?>
    <?php $i=0; foreach ($_productCollection as $_product): ?>
        <?php if ($i++%$_columnCount==0): ?>
        <ul>
        <?php endif ?>
            <li class="">
                <a href="<?php echo $_product->getProductUrl() ?>" title="<?php echo $this->stripTags($this->getImageLabel($_product, 'small_image'), null, true) ?>" class="product-image"><img src="<?php echo $this->helper('catalog/image')->init($_product, 'small_image')->constrainOnly(TRUE)->keepAspectRatio(TRUE)->keepFrame(FALSE)->resize(195); ?>" width="195" height="284" alt="<?php echo $this->stripTags($this->getImageLabel($_product, 'small_image'), null, true) ?>" /></a>

                <h2 class="product-name" style="float:left;width:180px;margin:7px"><a href="<?php echo $_product->getProductUrl() ?>" title="<?php echo $this->stripTags($_product->getName(), null, true) ?>"><?php echo $_helper->productAttribute($_product, $_product->getName(), 'name') ?></a></h2>
                 <div style="float:left;width:180px;margin:7px">
                <?php if($_product->getRatingSummary()): ?>
                <?php echo $this->getReviewsSummaryHtml($_product, 'short') ?>
                <?php endif; ?>
                <?php  echo Mage::helper('core')->currency($_product->getPrice()) ?>

                    <?php if($_product->isSaleable()): ?>
                        <button type="button" title="<?php echo $this->__('Add to Cart') ?>" class="button btn-cart" onclick="setLocation('<?php echo Mage::getUrl('checkout/cart/add', array('product' => $_product->getId())) ?>')"><span><span><?php echo $this->__('Add to Cart') ?></span></span></button>
                    <?php else: ?>
                        <p class="availability out-of-stock"><span><?php echo $this->__('Out of stock') ?></span></p>
                    <?php endif; ?>
                    <ul class="add-to-links">
                        <?php if ($this->helper('wishlist')->isAllow()) : ?>
                            <li><a id="wish" href="<?php echo $this->helper('wishlist')->getAddUrl($_product) ?>" class="link-wishlist"><?php echo $this->__('Add to Wishlist') ?></a></li>
                        <?php endif; ?>
                        <?php if($_compareUrl=$this->getAddToCompareUrl($_product)): ?>
                            <li><a id="compare" href="<?php echo $_compareUrl ?>" class="link-compare"><?php echo $this->__('Add to Compare') ?></a></li>
                        <?php endif; ?>
                    </ul>
                </div>
            </li>
        <?php if ($i%$_columnCount==0 || $i==$_collectionSize): ?>
        </ul>
</div>
        <?php endif ?>
        <?php endforeach ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T22:56:40.617

没有足够的信息来快速调试您的问题（这段代码在哪里，它是如何运行的），但这里有两个快速建议可能会为您指明正确的方向。

首先，保存 Web 浏览器的源代码（使用 View -> Source）命令（而不是各种 Web 检查器，它们有时会将 DOM 调整为正确的形式）并比较两个浏览器的输出。您可能会遇到输出相同的情况**，**但是有关 CSS 规则和 javascript 的某些内容会导致浏览器页面看起来不同。

如果页面中存在差异，那么可能发生的情况是浏览器从 IE 与您的其他浏览器向 PHP 发送不同的信息**和/或**在不同浏览器中的 PHP 会话中有不同的信息导致 PHP 代码出现有不同的结果。

希望有帮助。

# ios - 这是使用 AFNetworking 使用 Web 服务的正确方法吗

> ID：14287920
> 
> 赞同：-1
> 
> 时间：2013-01-11T22:48:05.977
> 
> 标签：ios, objective-c, web-services, afnetworking

我目前正在实现从应用程序到我的网络服务的连接，目前我正在尝试找出正确的方法。我决定使用 AFNetworking 库进行连接，并通过 AFNetworking 处理 JSON 输出。我在这里读到，实现这种异步的最佳方法是使用回调委托。这是我的两个课程的链接。我真的很喜欢一些关于我的实施的提示和批评，尤其是要改进的地方。

[视图控制器](http://pastebin.com/AUfPhD58)

[网络服务类](http://pastebin.com/FQtbNdG4)

代码：

```
#import "SLLoginViewController.h"

@interface SLLoginViewController ()

@end

@implementation SLLoginViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self)
    {
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    sharedWebService = [SLWebService sharedWebService];
    [sharedWebService setDelegate:self];
    [sharedWebService login:@"test@hotmail.de" withPassword:@"12345"];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
}

- (void)requestFinished:(NSString *)name withResult:(NSDictionary *)result andError:(NSError *)error
{
    NSLog(@"%@", result);
}
@end 
```

网络服务

```
#import <Foundation/Foundation.h>
#import "AFNetworking.h"

@class SLWebService;

@protocol SLWebServiceDelegate <NSObject>

@required
- (void)requestFinished:(NSString *)name withResult:(NSDictionary *)result andError:(NS

Error *)error;

@end

@interface SLWebService : NSObject
{
    NSURL *baseURL;
    AFHTTPClient *client;
}
@property id <SLWebServiceDelegate> delegate;

+ (id)sharedWebService;

- (void)login:(NSString *)email withPassword:(NSString *)password;

- (NSError *)generateError:(NSString *)description domain:(NSString *)domain;

@end

#import "SLWebService.h"

@implementation SLWebService

@synthesize delegate;

+ (id)sharedWebService
{
    static SLWebService *sharedWebService = nil;
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        sharedWebService = [[self alloc] init];
    });
    return sharedWebService;
}

-(id)init
{
    self = [super init];

    if(self)
    {
        baseURL = [[NSURL alloc] initWithString:@"http://www.domain.de/"];
        client = [[AFHTTPClient alloc] initWithBaseURL:baseURL];
    }

    return self;
}

-(void)login:(NSString *)email withPassword:(NSString *)password
{
    NSDictionary *params = @{@"email":email, @"password":password};
    NSMutableURLRequest *request = [client requestWithMethod:@"GET" path:@"login.php" parameters:params];

    AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request
    success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON)
    {
        NSString *result = [JSON objectForKey:@"result"];
        if ([result isEqualToString:@"fail"])
        {
            [[self delegate] requestFinished:@"login" withResult:nil andError:[self generateError:[JSON objectForKey:@"reason"] domain:@"de.Searchlight.WebServiceError"]];
        }
        else
        {
            NSDictionary *dic = @{@"firstname":[JSON objectForKey:@"firstname"], @"lastname":[JSON objectForKey:@"lastname"], @"gender":[JSON objectForKey:@"gender"]};
            [[self delegate] requestFinished:@"login" withResult:dic andError:[self generateError:[JSON objectForKey:@"reason"] domain:@"de.Searchlight.WebServiceError"]];
        }
    }
    failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *err, id JSON)
    {
        [[self delegate]requestFinished:@"login" withResult:nil andError:err];
    }];

    [operation start];
}

-(NSError *)generateError:(NSString *)description domain:(NSString *)domain
{
    NSError *error;
    NSDictionary *userInfo = @{NSLocalizedDescriptionKey : description};
    error = [NSError errorWithDomain:domain code:200 userInfo:userInfo];
    return error;
}
@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T00:32:26.407

AFNetworking 是一个不错的选择！我建议使用块，将登录请求和结果处理放在一起。它还将简化和缩短代码。

然后，就像 AFNetworking 的[Getting Started](https://github.com/AFNetworking/AFNetworking/wiki/Getting-Started-with-AFNetworking)最后建议的那样，子类化是个好主意`AFHTTPCLIENT`。

一般评论：正如奇妙的[Objective-C Phrasebook](http://www.amazon.de/Objective-C-Phrasebook-Developers-Library-Chisnall/dp/0321813758/ref=sr_1_3?ie=UTF8&qid=1357947485&sr=8-3) 所暗示的，可以在没有 GCD 的情况下使用语言的`+initialize`. 而且共享变量一般是静态的，而不是实例变量。

第一部分看起来像：

```
@class SLWebService;

@interface SLWebService : AFHTTPClient

+ (SlWebService)sharedWebService;

- (void)login:(NSString*)email 
     password:(NSString*)password
      success:(void (^)(AFHTTPRequestOperation* operation, NSDictionary* response))success
      failure:(void (^)(AFHTTPRequestOperation* operation, NSError* error))failure;

@end

#import "SLWebService.h"

@implementation SLWebService

static SLWebService*  sharedWebService;

+ (void)initialize
{
   if ([SLWebService class] == self)
   {
        sharedWebService = [[self alloc] initWithBaseURL:[NSURL URLWithString:@"http://www.domain.de/"]];

        // Let AFNetworking do conversion to/from JSON.
        [sharedWebService setParameterEncoding:AFJSONParameterEncoding];
        [sharedWebService setDefaultHeader:@"Accept" value:@"application/json"];
        [sharedWebService registerHTTPOperationClass:[AFJSONRequestOperation class]];
    }
}

+ (id)allocWithZone:(NSZone*)zone
{
    if (sharedWebService && [SLWebService class] == self)
    {
        [NSException raise:NSGenericException format:@"Duplicate SLWebService singleton creation"];
    }

    return [super allocWithZone:zone];
}

+ (SLWebService*)sharedWebService
{
    return sharedWebService;
}

... 
```

作为最后的题外话：我不喜欢 Apple 的/Xcode 建议`-initWithNibName::`用于视图控制器，因为这会将 XIB 名称保留在类之外。您几乎不需要使用不同的 XIB 进行初始化，因此我宁愿在“-init”中指定 XIB。像这样：

```
- (id)init
{
    if (self = [super initWithNibName:@"SLLoginView" bundle:nil])
    {
    }

    return self;
} 
```

干杯，希望这会有所帮助！

# javascript - 淘汰赛j2中的嵌套下拉菜单我做错了什么？

> ID：14287922
> 
> 赞同：0
> 
> 时间：2013-01-11T22:48:19.617
> 
> 标签：javascript, knockout.js

好的，我正试图了解 knockoutjs 嵌套下拉菜单。

基本上我想从绑定的下拉列表 a 中选择一个选项，并让下拉列表 b 显示相关选项。

这是我从淘汰赛教程中摘录并修改的模型：

```
 function SeatReservation(name, initialMeal) {
            var self = this;
            self.name = name;
            self.meal = ko.observable(initialMeal);
        }

        // Overall viewmodel for this screen, along with initial state
        function ReservationsViewModel() {
            var self = this;

            // Non-editable catalog data - would come from the server
            self.availableMeals = ko.observableArray([
                { mealName: "Standard (sandwich)", price: 0, Sizes: [{ Desc: "large" }, { Desc: "medium" }, { Desc: "small" }] },
                { mealName: "Premium (lobster)", price: 34.95, Sizes: [{ Desc: "large1" }, { Desc: "medium1" }, { Desc: "small1" }] },
                { mealName: "Ultimate (whole zebra)", price: 290, Sizes: [{ Desc: "large2" }, { Desc: "medium2" }, { Desc: "small2" }] }
            ]);

            // Editable data
            self.seats = ko.observableArray([
                new SeatReservation("Steve", self.availableMeals[0]),
                new SeatReservation("Bert", self.availableMeals[0])
            ]);

        }

        ko.applyBindings(new ReservationsViewModel()); 
```

然后我的html：

```
<tbody data-bind="foreach: seats">
    <tr>
        <td><input data-bind="value: name" /></td>
        <td><select data-bind="options: $root.availableMeals, value: meal, optionsText: 'mealName'"></select></td>
         <td data-bind="with: $root.availableMeals">
                    <select data-bind='options: $parent.Sizes, optionsText: "Desc", optionsCaption: "Select...", value: Desc'> </select>
                </td>
        <td data-bind="text: meal().price"></td>
    </tr>    
</tbody> 
```

现在我知道我的 html 可能不正确，因为我已经搞砸了很多尝试让这个工作但基本上我想从下拉列表中选择一顿饭，并在第二个下拉列表中显示其相关尺寸......

我究竟做错了什么？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T23:18:09.800

目前，所有`SeatReservation`对象都可能指向`availableMeal`项目的相同副本。

如果每个预留都能够自定义“大小”，那么您可能希望将大小存储在预留对象上。也许像：

```
function SeatReservation(name, initialMeal) {
  var self = this;
  self.name = name;
  self.meal = ko.observable(initialMeal);
  self.size = ko.observable();
} 
```

然后你可以像这样绑定：

```
 <td data-bind="if: meal">
    <select data-bind='options: meal().Sizes, optionsText: "Desc", optionsCaption: "Select...", optionsValue: "Desc", value: size'></select>
  </td> 
```

示例：http: [//jsfiddle.net/rniemeyer/HsDeG/](http://jsfiddle.net/rniemeyer/HsDeG/)

# android - 在 Android 中显示 YouTube JSON 数据

> ID：14287923
> 
> 赞同：0
> 
> 时间：2013-01-11T22:48:20.593
> 
> 标签：android, arrays, json, string, listview

我正在制作一个应用程序来显示来自频道的视频。目前，我正在努力在 ListView 中显示视频的标题。每当我启动活动 VideoPlay 时，应用程序就会崩溃。我的代码有什么问题？

# 视频播放

代码：

```
package com.aer.illbehonest;

import java.io.IOException;

import android.app.Activity;
import android.os.Bundle;
import android.widget.ArrayAdapter;
import android.widget.ListView;

public class VideoPlay extends Activity {   
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_video_play);

        ListView listView = (ListView) findViewById(R.id.videolist);
        String[] values = null;

        try {
            VideoData.getTitle(values);
        } catch (IOException e) {
            e.printStackTrace();
        }

        ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
                    android.R.layout.simple_list_item_1, android.R.id.text1, values);

            listView.setAdapter(adapter); 
    }
} 
```

# 视频数据

代码：

```
import java.io.IOException;
import java.io.InputStream;
import java.net.URL;
import java.net.URLConnection;

import net.sf.json.JSONArray;
import net.sf.json.JSONObject;
import net.sf.json.JSONSerializer;

import org.apache.commons.io.IOUtils;

public class VideoData {
    public static String[] getTitle(String[] title) throws IOException {
            URL jsonURL = new URL("http://gdata.youtube.com/feeds/api/users/illbehonest/uploads?v=2&alt=jsonc");
            URLConnection jc = jsonURL.openConnection();
            InputStream is = jc.getInputStream();
            String jsonTxt = IOUtils.toString(is);

            JSONObject json = (JSONObject) JSONSerializer.toJSON(jsonTxt);

            JSONObject jdata = json.getJSONObject("data");

            JSONArray jentry = jdata.getJSONArray("items");
            for (int entryNumber = 0; entryNumber<=25; entryNumber++){
                    JSONObject entry = jentry.getJSONObject(entryNumber);
                    String[] jtitle = {entry.getString("title")};
                    title = jtitle;
            }
            return title;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T23:05:16.510

您需要使用[异步任务](http://developer.android.com/reference/android/os/AsyncTask.html)来进行网络调用。

这里有一个 ListView 示例： [http ://android-er.blogspot.co.uk/2010/07/load-listview-in-background-asynctask.html](http://android-er.blogspot.co.uk/2010/07/load-listview-in-background-asynctask.html)

# python - 如何在 Python 中重构 100 多个类方法？

> ID：14287935
> 
> 赞同：9
> 
> 时间：2013-01-11T22:50:00.620
> 
> 标签：python

我正在处理一些遗留代码（由喜欢意大利面条代码的人创建），它有超过 150 个 getter 和超过 150 个 setter。吸气剂看起来像这样：

```
def GetLoadFee(self):
    r_str = ""
    if len(self._LoadFee) > 20:
        r_str = self._LoadFee[:20]
    else:
        r_str = self._LoadFee.strip()
    return r_str.strip()

def GetCurrency(self):
    r_str = ""
    if len(self._Currency) > 3:
        r_str = self._Currency[:3]
    else:
        r_str = self._Currency.strip()
    return r_str.strip() 
```

我很乐意将这些 Getter 的内容放入装饰器/闭包或其他方法中，以使此代码更易于维护。二传手都是一个班轮，所以他们不那么重要。但它们也基本相同。有什么想法可以减轻这种痛苦吗？

注意：我仍然需要原始的 Getter 名称，因为它们在其他程序中使用，因为这个讨厌的脚本在许多其他遗留代码中使用。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-11T22:55:09.820

```
def make_generic_getter(name, maxlen):
    def getter(self):
        value = getattr(self, name)
        r_str = ""
        if len(value) > maxlen:
            r_str = value[:maxlen]
        else:
            r_str = value.strip()
        return r_str.strip()
    return getter 
```

现在，您可以这样做：

```
class Foo(object):
    def __init__(self):
        self._Bar = 'abc'
        self._Baz = 'def'
    GetBar = make_generic_getter('_Bar', 5)
    GetBaz = make_generic_getter('_Baz', 2) 
```

然后：

```
>>> f = Foo()
>>> f.GetBar()
'abc'
>>> f.GetBaz()
'de' 
```

显然，原始函数中还有很多重复和不必要的东西。（并且为您的属性使用 PEP8 样式的名称会好得多。）但显然，首先重构，然后改进，比反过来要容易得多。（换句话说，从这里开始，但不要止步于此。）

从评论：

> 方法制造者如何获得“自我”参考？

方法制造者实际上并没有得到`self`参考。在调用方法制造商时没有`self`参考 get 。但是在定义类时也没有`self`获取普通方法的参考。在任何一种情况下，您都只是定义了一个将`self`其作为第一个参数的函数，`self`当您调用它时，它会以某种方式神奇地得到适当的参数。

要真正了解这*实际上是*如何工作的，您需要了解描述符。见[Implementing Descriptors](http://docs.python.org/2/reference/datamodel.html#descriptors)和Invoking Descriptors（或[3.3](http://docs.python.org/3/reference/datamodel.html#descriptors)版本），多读几遍，看看`@property`decorator是怎么实现的，在交互式解释器里玩转，放弃，睡觉，明天再试，应该全部点击。但是如果你先学习魔法版本会更容易，所以让我们用一个更简单的例子来做吧：

```
>>> def func(self): pass
>>> class C(object):
...     def meth(self): pass
...     fake1 = func
>>> C.fake2 = func
>>> func, C.meth, C.fake1, C.fake2
(<function __main__.func>, <unbound method C.meth>, <unbound method C.func>, <unbound method C.func>) 
```

一个未绑定的方法只是一个`im_class`持有它的类、一个`im_func`持有一个普通函数和一个`im_self`持有的东西`None`。当你`fake1 = func`在类定义中或者`C.fake2 = func`事后这样做时，你实际上并没有最终将`func`它自己作为`fake1`or的值`fake2`，而是用一个未绑定的方法包裹着`func`，它`im_class`指向`C`.

```
>>> c = C()
>>> c.meth, c.fake1
(<bound method C.meth of <__main__.C object at 0x111ebb0d0>>, <bound method C.meth of <__main__.C object at 0x111ebb0d0>>) 
```

当您获取一个类的实例时，它的所有未绑定方法都将成为绑定方法。如果您查看绑定方法的属性，它们与未绑定方法相同，只是`im_self`它`c`不是`None`. 当你调用 时`c.fake1()`，它就是这样工作的——Python 认为这`c.fake1`是一个绑定方法，所以实际上它调用了`c.fake1.im_func(c.fake1.im_self)`. 这就是如何`fake`获取它的 self 参数。

（这一切在 Python 3 中变得更简单，因为不再有未绑定方法之类的东西，但我假设您更关心 Python 2，因为您正在处理大量遗留代码。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-11T23:31:53.333

您不一定需要在创建类时创建 getter/setter 方法。您还可以根据需要创建可调用对象：

```
class MyClass(object):
    # get/set properties for this class: {'Name':length}
    __properties = {'LoadFee':20, 'Currency':3}

    def __init__(self):
        self._Currency = '01 34'
        self._LoadFee = 'lorem ipsum dolor sit amet consecuti'

    def __getattr__(self, name):
        basename = name[3:]
        attrname = '_'+basename
        if basename in self.__properties:
            if name.startswith('Get'):
                return lambda : getattr(self, attrname)[:self.__properties[basename]].strip()
            elif name.startswith('Set'):
                return lambda value: setattr(self, attrname, value)
        raise AttributeError(name)

m = MyClass()

print m.GetCurrency()
print m.GetLoadFee() 
```

尽管这种方法很容易理解并且不使用任何元编程巫术，但它很慢并且无法自省。

您可以通过在调用它们时“具体化”方法来加快速度，即，`instancemethod`在访问类实例的属性时将一个附加到类。

```
# MethodType is not actually necessary because
# everything it does can be done with normal Python
# but it will make our dynamic methods look as "normal"
# and not-dynamic as possible to introspection
from types import MethodType

class MyClass(object):
    # get/set properties for this class: {'Name':length}
    __properties = {'LoadFee':20, 'Currency':3}

    def __init__(self, **args):
        props = self.__properties
        emptystr = ''
        for k in props:
            setattr(self, '_'+k, args.get(k, emptystr))

    def __getattr__(self, name):
        print '__getattr__(%s)' % name
        # we can cache accesses by "reifying" our getters/setters as they are accessed
        cls = self.__class__
        basename = name[3:]
        attrname = '_'+basename
        # nested lambdas are just for delayed evaluation
        # they cache property size lookup--assumes __properties is class-constant!
        def getsize():
            return cls.__properties[basename]
        methodfactories = {
            'Get': lambda size: lambda self: getattr(self, attrname)[:size].strip(),
            'Set': lambda size: lambda self, value: setattr(self, attrname, value),
        }
        try:
            print '  creating', name
            callable = methodfactories[name[:3]](getsize())
        except (KeyError, AttributeError) as e:
            raise AttributeError("'{}' object has no attribute '{}'".format(cls.__name__, name))
        callable.__name__ = name #cosmetics
        unboundmethod = MethodType(callable, None, cls)
        setattr(cls, name, unboundmethod) # add unbound method to the class
        # magically get bound method on the instance!
        # this works because MethodType creates a descriptor that
        # returns a bound callable in an instance context
        # and an unbound one in a class context
        return getattr(self, name) # not an infinite loop! 
```

如果您随后运行以下代码：

```
m = MyClass(Currency='01', LoadFee='lorem ipsum dolor sit')
n = MyClass(Currency='02', LoadFee='amet consecuti')
try:
    # AttributeError because it hasn't been used by an instance
    MyClass.GetCurrency 
except AttributeError, e:
    print ' 7:', e
print ' 8:', m.GetCurrency()
print ' 9:', MyClass.GetCurrency
print '10:', m.GetCurrency
print '11:', n.GetCurrency
print '12:', m.GetCurrency is n.GetCurrency
print '13:', n.GetCurrency()
print '14:', m.GetLoadFee()
print '15:', m.__dict__ # no per-instance callable! 
```

您将得到以下结果：

```
 7: type object 'MyClass' has no attribute 'GetCurrency'
 8: __getattr__(GetCurrency)
  creating GetCurrency
01
 9: <unbound method MyClass.GetCurrency>
10: <bound method MyClass.GetCurrency of <__main__.MyClass object at 0x106f87b90>>
11: <bound method MyClass.GetCurrency of <__main__.MyClass object at 0x106f87f10>>
12: False
13: 02
14: __getattr__(GetLoadFee)
  creating GetLoadFee
lorem ipsum dolor si
15: {'_Currency': '01', '_LoadFee': 'lorem ipsum dolor sit'} 
```

请注意，只有在*任何实例**第*一次访问特殊属性时才会调用**getattr 。**之后，从我们动态创建并附加到实例类的绑定方法返回。在第一次访问属性之后，类和实例将与我们以“正常”方式创建的方法几乎没有区别，并且将具有完全相同的运行时速度。**`instancemethod`**

 *** * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T22:53:59.753

你可以尝试这样的事情：

```
def getter(attr, length):
    def wrapper(self):
        value = getattr(self, attr)
        return value[:length].strip()
    return wrapper

GetCurrency = getter("_Currency", 3) 
```

因为切片时不能超出字符串的结尾，所以不再需要长度测试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-12T00:50:21.257

如果确实有数百个 getter 共享相同的代码；您可以使用元类来自动创建 getter：

```
def length_limiting_getter(name, maxlen):
    g = lambda self: getattr(self, "_"+name)[:maxlen].strip()
    g.__name__ = name
    return g

def add_attrs(attr_maxlens):
    def meta(class_name, base_classes, attrs):
        attrs.update((name, length_limiting_getter(name, maxlen))
                     for name, maxlen in attr_maxlens.items())
        return type(class_name, base_classes, attrs)
    return meta

Meta = add_attrs({n: maxlen for n, maxlen in zip("a b c".split(),
                                                 [1, 10, 50])})
class ClassWithManyGetters(object): # On Python 3 use: `(metaclass=Meta)` syntax
    __metaclass__ = Meta
    def __init__(self):
        for name in "abc":
            setattr(self, "_" + name, "X"*20)

c = ClassWithManyGetters()
print(c.a())
print(c.b())
print(c.c()) 
```

### 输出

```
X
XXXXXXXXXX
XXXXXXXXXXXXXXXXXXXX 
```

输出显示长度限制功能有效。

也可以看看：

[任何人都可以帮助压缩这个 Python 代码吗？](https://stackoverflow.com/questions/11921320/can-anyone-help-condense-this-python-code)

[Python 中的元类是什么？](https://stackoverflow.com/questions/100003/what-is-a-metaclass-in-python)**

# cocos2d-iphone - CCParticleFire 和 CCParticleSystemQuad 文件未加载

> ID：14287938
> 
> 赞同：2
> 
> 时间：2013-01-11T22:50:34.237
> 
> 标签：cocos2d-iphone, ccparticlesystem, cctexturecache

我正在尝试创建这样的粒子效果：

```
emitter = [[CCParticleSystemQuad alloc] initWithTotalParticles:45];
[emitter setEmitterMode: kCCParticleModeGravity];
emitter.position = ccp(100, 100);
emitter.texture=[[CCTextureCache sharedTextureCache] addImage:@"fire.png"];
CCParticleFire *fire = [[CCParticleFire alloc]init];
fire.position = ccp(0,0);
[self addChild:fire];
[self addChild:emitter]; 
```

我总是收到以下错误：

```
 013-01-11 17:45:49.263 Jumpy[8945:c07] -[CCFileUtils fullPathFromRelativePath:resolutionType:] : cocos2d: Warning: File not found: fire.png
    2013-01-11 17:45:49.264 Jumpy[8945:c07] cocos2d: CCTexture2D. Can't create Texture. cgImage is nil
    2013-01-11 17:45:49.264 Jumpy[8945:c07] cocos2d: Couldn't add image:fire.png in CCTextureCache
    2013-01-11 17:45:49.265 Jumpy[8945:c07] cocos2d: CCTexture2D. Can't create Texture. cgImage is nil
    2013-01-11 17:45:49.265 Jumpy[8945:c07] cocos2d: Couldn't add image:fire.png in CCTextureCache 
```

这是否意味着没有图像？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T23:19:28.663

您必须将 fire.png 添加到您的 Xcode 项目中，否则应用程序将无法找到它。

fire.png 位于 cocos2d 的资源或测试文件夹中的某个位置。

# c++ - 如何在 64 位（而不是任何 80 位寄存器）中强制所有双精度

> ID：14287940
> 
> 赞同：4
> 
> 时间：2013-01-11T22:50:45.397
> 
> 标签：c++

我试图获得一个数字包，以在两个不同的平台（linux 和 macos）上给出相同的结果，以排除错误/硬件问题。我怀疑当前差异的来源是 64 位和 80 位双精度算术不同。我知道 gcc 有编译器选项来控制它，但我认为还有一个函数调用来设置它，以及可以在命令行或 shell 环境中完成的一些事情。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T00:34:08.983

好的，假设您在 x86 上，使用浮点，您应该将 x87 寄存器 FCW 中的位 9-8 设置为 10b。[这也是 Windows 出于某种原因默认执行的操作]。

像这样的东西应该在 gcc 中工作：

```
void set_fp_mode()
{
    short mode;
    __asm__ __volatile__ ("fstcw %0\n"
               "andw   $0xFEFF, %0\n"       // Clear bit 8\. 
               "orw    $0x200, %0\n"        // just to be safe, set bit 9.
               "fldcw %0\n" : : "m" (mode));
} 
```

[几年前我工作的地方，有人抱怨他们的新计算机在浮点方面不如旧计算机，并给了我一个二进制结果的转储。我得到了一台与客户旧计算机相似的计算机和一台新计算机，但我无法让它变得不同 - 直到我意识到一台机器正在运行 Windows，另一台没有，所以浮点结果“更好" 在非 Windows 机器上。在我给客户一段与上面非常相似的代码之后，但是将第 8 位和第 9 位都设置为 80 位精度，客户很高兴！]

# ruby - 如何在 Windows 7 上正确安装 Compass？

> ID：14287941
> 
> 赞同：9
> 
> 时间：2013-01-11T22:50:54.423
> 
> 标签：ruby, windows-7, compass-sass

当我从 Ruby 的 bin 文件夹之外的任何地方运行 compass 时，它会返回一个错误：

```
'compass' is not recognized as an internal or external command, operable program or batch file. 
```

这有发生在其他人身上吗？我在某处读到，Windows32 中可能需要一个文件，可能是 compass.exe，我不确定，因为那里没有说 compass 的内容。任何想法为什么安装无法做到？

另外我应该注意，我通过 Parallels 在 Mac 上使用 Windows 7。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-12T08:02:17.930

确保你的 Windows 机器上[安装了 ruby ​​。](http://rubyinstaller.org/)完成后，使用 Ruby 打开命令提示符并键入`gem install haml sass compass` ![CMD 与 Ruby](../Images/3778e6fec4aeeb5e593031ae21261bd3.png)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-14T20:28:16.750

@djthoms 的响应有效，但事实证明我没有正确安装 ruby​​，因为我没有选中“在 PATH 中创建 ruby​​”（或某种程度的东西）的框，这使得“ruby”成为一个可识别的命令。

同样，在将 ruby​​ 安装到 windows 的过程中，您必须选中一个框才能使安装正常工作 -**它尚未选中**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-16T09:33:46.930

@TravisHeeter
如上所述安装 ruby​​ + compass 后。确保退出命令提示符，或者在我的情况下退出 XYplorer，从我启动“Git Bash”提示符的地方退出，并且它没有拾取带有 ruby​​ 的 PATH。希望它可以帮助某人。

# c++ - 无法将 'void* (Network::*)(void*)' 转换为 'void* (*)(void*)'

> ID：14287942
> 
> 赞同：4
> 
> 时间：2013-01-11T22:50:57.353
> 
> 标签：c++, void

我是一名初级 C++ 程序员，我正在 Linux 机器上编程。

我收到了这个错误：

```
cannot convert ‘void* (Network::*)(void*)’ to ‘void* (*)(void*)’ for argument ‘3’ to ‘int pthread_create(pthread_t*, const pthread_attr_t*, void* (*)(void*), void*) 
```

它来自这条线：

```
pthread_create(&thread_id,0,&Network::SocketHandler, (void*)csock ); 
```

我试图调用的函数是：

```
void* Network::SocketHandler(void* lp) 
```

我将头文件中的两个函数都声明为私有的。

你们有没有看到我做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-11T22:53:44.677

您正在使用需要常规*函数指针的**成员函数指针*。*成员函数*有一个隐含的额外参数：. 不考虑这一点。**`this``pthread_create`**

 **您必须使该功能`static`能够与`pthread_create`. 然后，您可以使用该`void*`参数传递`this`指针。

就个人而言，我会放弃*pthreads*以支持*C++11* `std::thread`，或者`boost::thread`如果您无权访问*C++11*实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T22:54:46.833

**编辑：如果您不尝试使用`Network`该函数的实例，那么 K-ballo 的答案就是您所需要的。如果是，请继续阅读。**

`pthread_create`期望调用普通函数，并且您正在尝试将成员函数用作非成员函数。成员函数不是普通函数，因为它必须有一个调用对象。

您可以创建一个调用 a 的函数`Network::SocketHandler`并`Network`这样做：

```
void* call_sockethandler(void* nw) {
    Network* network = static_cast<Network*>(nw);

    void* result = network->SocketHandler(somearg);

    // do something w/ result

    return nullptr;
}

Network nw; // this can't go out of scope though
pthread_create(&thread_id, 0, call_sockethandler, &nw); 
```**

# hibernate - 当在 JBoss7 + JPA(Hibernate) + Infinispan 中使用 orm.xml 时，@Cacheable 被忽略

> ID：14287944
> 
> 赞同：1
> 
> 时间：2013-01-11T22:51:00.050
> 
> 标签：hibernate, jboss, jpa-2.0, infinispan, cpu-cache

我正在尝试在 JBoss 7.1 上使用 JPA 二级缓存。并试图拥有：

*   使用`@Cacheable`注解进行实体缓存。
*   仅将 orm.xml 用于命名查询。

当通过 persistence.xml 启用二级缓存和选择性缓存时，似乎`@Cacheable`注释被忽略并且实体不会被缓存在 L2 缓存中。

我知道如果我在 orm.xml 中添加带有 cacheable=”true” 的实体元素，L2 缓存可以工作，但是可以将`@Cacheable`注释与 orm.xml 一起使用吗？我想使用 JBoss 7.1、JPA（由 Hibernate 支持）、Infinispan 作为二级缓存提供程序。

[持久性.xml]

```
<mapping-file>META-INF/orm.xml</mapping-file>
<shared-cache-mode>ENABLE_SELECTIVE</shared-cache-mode>

<property name="hibernate.cache.use_second_level_cache" value="true" />
<property name="hibernate.cache.use_query_cache" value="true" />
<property name="hibernate.cache.use_minimal_puts" value="true" /> 
```

# xamarin.android - 创建 csv 文件并将其保存在可访问的路径中

> ID：14287949
> 
> 赞同：1
> 
> 时间：2013-01-11T22:51:24.470
> 
> 标签：xamarin.android

我敢肯定，我确实缺少一些非常明显的东西，但是您如何使用 monodroid 创建和存储文件。我在谈论一些简单的事情

```
private void Save(int rating)
{
        try
        {
            var externalStorageDirectory =  Environment.GetExternalStoragePublicDirectory(Environment.DirectoryDcim);
            File.WriteAllText(Path.Combine(externalStorageDirectory.Path,"mycsv.csv"),
                string.Format("{0},{1},{2},"+ System.Environment.NewLine, _name, _model, rating));      
        }
        catch(Exception ex)
        {
            Console.WriteLine("Problem saving", ex.Message, ex.StackTrace);
        }

    } 
```

当我尝试上述方法时，我能想到的每个可能的目录都会得到一个**DirectoryNotFoundException**。我确信这是一件微不足道的事情，但快速浏览并没有给我带来任何结果，而且我确信有比硬编码路径更好的方法。
此外，如果 File.WriteAllText 不是要走的路，那么在创建应该在外部使用的文件时，我会全神贯注。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T22:58:39.610

`var fileName = Android.OS.Environment.ExternalStorageDirectory + Java.IO.File.Separator + "MyFile.csv";`

这将为您提供外部存储的文件夹，这通常是 MicroSD 卡。

然后只需将您的文件写入`FileStream`：

```
using (var fs = new FileStream(fileName, FileMode.OpenOrCreate))
{
    //Write your file here
} 
```

# javascript - 编译多个 Typescript 文件

> ID：14287954
> 
> 赞同：9
> 
> 时间：2013-01-11T22:51:56.770
> 
> 标签：javascript, node.js, compiler-construction, webserver, typescript

我的 nodejs Typescript 服务器变得越来越复杂，现在依赖于另一个 .ts 文件中定义的一些类。这造成了一个奇怪的编译问题：

*   `tsc server.ts`编译一切正常。但是`node server.js`在从另一个 .ts 文件实例化一个类的第一行崩溃

*   `tsc --out server.js server.ts`导致错误消息：“模块发出与发出的脚本发生冲突”

*   `tsc --out serv.js server.ts`似乎可以工作，但实际上编译除了 server.ts 之外的所有内容。其他文件的代码在那里，`node serv.js`只是返回而没有任何输出

我不是唯一一个遇到此错误的人，[https:](https://typescript.codeplex.com/workitem/294) //typescript.codeplex.com/workitem/294 不幸的是，codeplex 上的解决方案对我不起作用。

如何`tsc`正确使用？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-12T00:15:59.390

您的`server.ts`依赖项需要是使用顶级`export`指令导出其表面区域的模块，并且`server.ts`应该使用指令加载它们`import`。这里的根本原因是 TypeScript 有两种不同的编译宇宙。

第一个是您用于常规网页的默认文件，其中一些简单的加载器以某种固定顺序获取 1 个或多个源文件并按该顺序执行它们，并且您自己进行依赖排序。这称为“*程序*”编译。在程序编译中，您可以进行并行编译 (a.ts => a.js, b.ts => b.js)，也可以使用`--out`((a.ts + b.ts)进行级联编译=> out.js)。

在*程序*`///<reference>`编译中，您使用标签来引用您的引用。如果这些引用是对源文件 ( `.ts`) 的引用，则它们将在使用时连接到输出中`--out`，否则作为并排`.js`文件发出。`.d.ts`如果这些引用指向一个声明文件`<script>`（

第二种是用于 node.js 或其他执行异步或幂等模块加载和运行时依赖解析的环境的编译类型。这称为“*模块*”编译。在这里，`--module`您传递的标志很`tsc`重要，唯一有效的做法是并行编译，因为将单个文件作为模块加载（通常）是 node.js 中的模块加载器等工作的方式。

在*模块*编译中，您`export`在顶级对象（函数、类、模块、接口或 var）上使用关键字来控制使用`import`. 您应该只拥有`/// <reference>`指向`.d.ts`声明文件的标签，因为基于模块的运行时加载器没有加载裸 JS 文件的概念。你不会用`--out`.

你**永远**不想混合和匹配这些编译模式，因为它根本行不通。事实上，在 0.8.2.0 中，`tsc`如果您尝试这样做，只会发出错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T21:03:58.247

我有一个包含大量 TypeScript 文件的网络应用程序。这是我解决这个问题的方法：

1.  在 ~/Scripts 目录中创建了一个全局 _references.ts 文件。该文件对于 web 项目中的每个 ts文件都有一个*参考路径=...。*
2.  接下来，我使用 T4 模板生成了这个文件，因为手动管理它变得很痛苦。
3.  此外，使用 T4 模板，我根据我的 TypeScript 依赖项对*_references.ts中的引用进行了排序。*例如，顶部的所有 ..Base.ts 文件。
4.  另外，我创建了一个以 -out app.js 开头的 tsc 参数文件，后跟项目中每个 ts 文件的列表。这也是使用 T4 生成的，我称之为*app.tsproj*。
5.  最后，我调用*tsc @app.tsproj*来生成所有依赖项都正确排序的 JavaScript。

_references.ts T4 模板：[https ://gist.github.com/danabenson/5224712](https://gist.github.com/danabenson/5224712)

app.tsproj T4 模板：[https ://gist.github.com/danabenson/5224718](https://gist.github.com/danabenson/5224718)

# algorithm - 选择 R* 树分割平面

> ID：14287957
> 
> 赞同：2
> 
> 时间：2013-01-11T22:52:27.447
> 
> 标签：algorithm, data-structures, r-tree

我正在研究基于[本文](http://dbs.mathematik.uni-marburg.de/publications/myPapers/1990/BKSS90.pdf)的 R* 树的实现。关于选择分割轴算法，我有几个问题。

> R*-tree 使用 followmg 方法来寻找好的分裂。沿每个轴，条目首先按较低值排序，然后按其矩形的较高值排序。

矩形的下限值/上限值是什么意思？

> 对于每个分布，确定好的值。根据这些优良值确定条目的最终分布。实验测试了三种不同的优值以及在不同组合中使用它们的不同方法。
> 
> （一）面积-值area[bb(第一组)] + area[bb(第二组)]
> 
> （二）margin-valuemargin[bb(第一组)]+margin[bb(第二组)]
> 
> (三)重叠值区域[bb(第一组)+bb(第二组)]
> 
> 这里 bb 表示一组矩形的边界框

这是什么意思`margin-value`？我将如何计算这个值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T22:56:14.110

据我所知，“矩形的下限/上限”是矩形沿相关轴的最小值和最大值。

根据链接文章的p323，“这里的边距是矩形边缘长度的总和”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T10:19:08.637

矩形通常由每个维度中的 min+max 对表示。所以“上”和“下”值是最小值和最大值。

边距是周长。原因是在许多情况下，*正方形*是首选的矩形类型。例如，当您进行欧几里得（或曼哈顿，几乎任何 Lp 范数）最近邻搜索时。原因是它们在某种程度上是“公正的”。

其他拆分策略，例如 Ang et Tan 的“线性”拆分忽略了这一点，并且往往会产生非常长的切片。维基百科有一个例子：

[https://en.wikipedia.org/wiki/File:Zipcodes-Germany-AngTanSplit.svg](https://en.wikipedia.org/wiki/File:Zipcodes-Germany-AngTanSplit.svg)

这些是 R*-tree 试图避免的分裂。因为大多数查询会与很多这些切片相交，所以你获得的收益很少。

请注意，R*-tree 使用了许多启发式方法和决胜局。此外，它做了一个两步决策：首先它只选择用于分割的轴。确定轴后，它实际上使用不同的逻辑来选择沿该轴的拆分。

# database - 未显示 data/data/com.package/databases 文件夹

> ID：14287959
> 
> 赞同：1
> 
> 时间：2013-01-11T22:52:31.360
> 
> 标签：database, eclipse, file, directory, explorer

我做了一个安卓词典应用程序。我创建了一个名为“kamusJawa.sqlite”的数据库并将其复制到资产文件夹中。我尝试了此链接[Own Database in Assets Folder on Android Eclipse Project 中的代码](https://stackoverflow.com/questions/10808357/own-database-in-assets-folder-on-android-eclipse-project)

这是我的数据库管理器类：

```
 package com.kamusJI;

 public class DBHelper extends SQLiteOpenHelper{

private static String DBPATH = "/data/data/com.kamusJI/databases/";
private static String DBNAME = "kamusJawa.sqlite";
private SQLiteDatabase DBSQ;
private final Context KJICtx;

public DBHelper(Context context) throws IOException {
    super(context, DBNAME, null, 1);
    this.KJICtx = context;
    // TODO Auto-generated constructor stub
    boolean dbexist = cekDB();
    if (dbexist) {
        //System.out.println("Database exists");
        openDB(); 
    } else {
        System.out.println("Database doesn't exist");
            createDB();

    }
}

public void createDB() throws IOException{
    boolean dbExist = cekDB();
    if(!dbExist){
        this.getReadableDatabase();
        try{
            salinDB();
        }catch (IOException e){
            throw new Error("Gagal menyalin database");
        }
    }
}
 boolean cekDB() {
    //SQLiteDatabase cekDatabase = null;
 boolean cekdb = false;
    try{
    String path = DBPATH + DBNAME;
    File dbfile = new File(path);
    //cekDatabase = SQLiteDatabase.openDatabase(path, null, SQLiteDatabase.OPEN_READONLY);
    cekdb = dbfile.exists();
    }catch(SQLException e){
        System.out.println("Database tidak ada");
    }

    return cekdb;
    //return cekDatabase !=null ? true : false;
} 

private void salinDB() throws IOException{
    AssetManager AM = KJICtx.getAssets();
    File DbFile = new File(DBPATH+DBNAME);
    InputStream in = KJICtx.getAssets().open(DBNAME);
    //OutputStream out = new FileOutputStream(DbFile);
    OutputStream out = new FileOutputStream("/data/data/com.kamusJI/databases/kamusJawa.sqlite");
    DbFile.createNewFile();
    byte[] b = new byte[1024];
    int i, r;
    String[] Files = AM.list("");
    Arrays.sort(Files);

    i= 1;
    String fdb = String.format("kamusJawa.db.00%d", i);
    while(Arrays.binarySearch(Files, fdb)>=0){
        //InputStream in = AM.open(fdb);
        while(( r = in.read(b))>0)
            out.write(b,0,r);
        in.close();
        i++;
        fdb = String.format("kamusJawa.db.00%d", i);
    }
    out.flush();
    out.close();
}

public void openDB() throws SQLException{
    String path = DBPATH+DBNAME;
    DBSQ = SQLiteDatabase.openDatabase(path, null, SQLiteDatabase.OPEN_READONLY);
}

public synchronized void close(){
    if(DBSQ !=null)
        DBSQ.close();
    super.close();
}

@Override
public void onCreate(SQLiteDatabase arg0) {
    // TODO Auto-generated method stub

}

@Override
public void onUpgrade(SQLiteDatabase arg0, int arg1, int arg2) {
    // TODO Auto-generated method stub

}

} 
```

这是我的主要课程：

```
package com.kamusJI;

public class KJI extends ListActivity {
private KJI this_class = this;
String[] Menu = {"Basa Jawa", "Bahasa Indonesia", "Tambah Data"};
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    setListAdapter(new ArrayAdapter<String>(this, R.layout.row, R.id.Cari, Menu));
    ListView lv = getListView();
    lv.setTextFilterEnabled(false);

    /* Defines On Item Click callback method */
    lv.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view, int position,
                long id) {
            Intent action = null;
            switch(position) {
                case 0:
                case 1:
                    action = new Intent(getApplicationContext(), Cari.class);
                    action.putExtra("MODE", position);
                    break;
                case 2:
                    action = new Intent(getApplicationContext(), Tambah.class);
                    action.putExtra("MODE", position);
                    break;
                case 3:
                    finish();
                    return;
            }
            startActivity(action);
            Toast.makeText(getApplicationContext(), ((TextView) view).getText(), Toast.LENGTH_SHORT).show();

        }
    });
}

public void InitDatabase() {
    AsyncTask<String, Void, String> InitDB = new AsyncTask<String, Void, String>() {
        Dialog progress = null;
        String msg;
        DBHelper dbhelper;

        @Override
        protected void onPreExecute() {
            try {
                dbhelper = new DBHelper(this_class);
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            if (!dbhelper.cekDB())
            progress = ProgressDialog.show(this_class, "", "Installing Database.\nPlease wait.");
            super.onPreExecute();
        }

        @Override
        protected String doInBackground(String... params) {
            try {
                dbhelper.createDB();
                msg = "Database successfully installed.";
            } catch (IOException ioe) {
                msg = "Database installation failed.";
            }
            return msg;
        }

        @Override
        protected void onPostExecute(String result) {
            super.onPostExecute(result);
            if (progress!=null) {
                progress.dismiss();
                Toast.makeText(getApplicationContext(), result, Toast.LENGTH_SHORT).show();
            }
        }
    };
    InitDB.execute(new String());
   }
} 
```

当我运行我的应用程序时，然后我转到文件资源管理器，我找不到 data/data/com.kamusJI/databases。怎么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T06:12:44.743

将您的数据库扩展名更改为 .db

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-01T22:12:51.480

您需要特殊权限（例如[root 访问权限](https://en.wikipedia.org/wiki/Rooting_(Android_OS))）才能读取路径：

**/data/data** /com.package/databases

# json - 带有映射插件的淘汰赛，使用带有 MVC 的 postJSON 发布，模型集合始终包含空对象

> ID：14287963
> 
> 赞同：2
> 
> 时间：2013-01-11T22:52:45.933
> 
> 标签：json, asp.net-mvc-3, knockout.js, knockout-mapping-plugin

我有一个用于创建页面的模型：

```
public class PageCreateModel : ActionModel
{
    public IList<KeyValuePair<Guid, string>> AvailablePermissions { get; set; }
    public IList<KeyValuePair<Guid, string>> AvailableUsers { get; set; }
    public IList<KeyValuePair<Guid, string>> AvailableGroups { get; set; }

    public string Heading { get; set; }
    public bool ShowHeading { get; set; }
    public string Description { get; set; }
    public ICollection<string> RouteUrls { get; set; }
    public IList<KeyValuePair<Guid, string>> SelectedEditingPermissions { get; set; }
    public IList<KeyValuePair<Guid, string>> SelectedEditingUsers { get; set; }
    public IList<KeyValuePair<Guid, string>> SelectedEditingGroups { get; set; }
} 
```

我正在使用淘汰赛映射将其转换为页面加载时的淘汰赛模型：

```
 var mappedModel = ko.mapping.fromJS(@Html.Raw(JsonConvert.SerializeObject(Model))); 
```

发布和使用此代码后：

```
mappedModel.save = function(form) {
        mappedModel.AvailablePermissions([]);
        mappedModel.AvailableUsers([]);
        mappedModel.AvailableGroups([]);
        console.log(ko.toJS(mappedModel));
        ko.utils.postJson('@Url.Action("Create", "Page")', { pageCreateModel: ko.toJS(mappedModel) });
    }; 
```

它转到此操作：

```
 [HttpPost]
    public ActionResult Create(PageCreateModel pageCreateModel)
    {

        return View(HydrateModel(pageCreateModel));
    } 
```

此时我的标准属性值已发布查找。但是我的收藏（到目前为止，在我的页面上我只添加了`SelectedEditingUsers`）在收藏中有空对象。例如，如果在页面上我将 2 个用户添加到集合中，然后我将其发布。MVC 模型的 SelectedEditingUsers 将有一个包含两个的集合，但这些对象包含一个 Empty Guid 和 null 作为值。

这是从 Chrome 控制台发送到服务器的数据：

> pageCreateModel:{"AvailablePermissions":[],"AvailableUsers":[],"AvailableGroups":[],"Heading":"Test","ShowHeading":true,"Description":null,"RouteUrls":null,"SelectedEditingPermissions":[],"SelectedEditingUsers":[{"Key":"d81f409a-5fed-4330-8640-004bede4e6fb","Value":"User1"},{"Key":"5628ad64-567b-499d-bee1-cb6c3dc397eb","Value":"User2"}],"SelectedEditingGroups":[],"ActionSuccess":false,"ActionMessage":null,"**ko_mapping**":{"ignore":[],"include":["_destroy"],"copy":[],"observe":[],"mappedProperties":{"AvailablePermissions[0].Key":true,"AvailablePermissions[0].Value":true,"AvailablePermissions[1](https://i.stack.imgur.com/Mfe23.png).Key":true,"AvailablePermissions[1](https://i.stack.imgur.com/Mfe23.png).Value":true,"AvailablePermissions[2].Key":true,"AvailablePermissions[2].Value":true,"AvailablePermissions[3].Key":true,"AvailablePermissions[3].Value":true,"AvailablePermissions[4]...[etc]

How can I fix it so that the full model gets properly received by MVC? I need to use postJSON so I can use RedirectToAction and other similar things.

EDIT: Trying the AJAX call instead:

```
 mappedModel.save = function(form) {
        mappedModel.AvailablePermissions([]);
        mappedModel.AvailableUsers([]);
        mappedModel.AvailableGroups([]);
        //mappedModel.__ko_mapping__([]);
        //console.log(ko.toJS(mappedModel));
        $.ajax({
            url: '@Url.Action("Create", "Page")',
            type: 'POST',
            data: ko.toJSON(mappedModel),
            contentType: 'application/json; charset=utf-8',
            success: function(data) {
                alert("Success!");
            }
        });
        //ko.utils.postJson('@Url.Action("Create", "Page")', { pageCreateModel: ko.toJS(mappedModel) });
        //ko.utils.postJson($("form")[0], { pageCreateModel: ko.toJS(mappedModel) });
        //ko.utils.postJson('@Url.Action("Test", "Page")', { ko.toJS(mappedModel) });

    }; 
```

And I still get the same problem:

![enter image description here](../Images/65e96996ee59c5dcdf6615349b169723.png)

And here is the POST from that:

> {"AvailablePermissions":[],"AvailableUsers":[],"AvailableGroups":[],"Heading":"Test","ShowHeading":true,"Description":null,"RouteUrls":null,"SelectedEditingPermissions":[],"SelectedEditingUsers":[{"Key":"5628ad64-567b-499d-bee1-cb6c3dc397eb","Value":"User1"},{"Key":"6d7439aa-7728-4add-953f-28b306fff5d0","Value":"User2"}],"SelectedEditingGroups":[],"SelectedViewingPermissions":[],"SelectedViewingUsers":[],"SelectedViewingGroups":[],"ActionSuccess":false,"ActionMessage":null,"**ko_mapping**":{"ignore":[],"include":["_destroy"],"copy":[],"observe":[],"mappedProperties":{"AvailablePermissions[0].Key":true,"AvailablePermissions[0].Value":true,"AvailablePermissions[1](https://i.stack.imgur.com/Mfe23.png).Key":true,"AvailablePermissions[1](https://i.stack.imgur.com/Mfe23.png).Value":true,"AvailablePermissions[2].Key":true,"AvailablePermissions[2].Value":true,"AvailablePermissions[3].Key":true,...etc"

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T22:57:30.167

`ko.utils.postJson` doesn't set the Content-Type request header to `application/json`. It will simply send the request as form encoded value. So use `$.ajax` instead which allows you to specify the correct content type header:

```
mappedModel.save = function(form) {
    mappedModel.AvailablePermissions([]);
    mappedModel.AvailableUsers([]);
    mappedModel.AvailableGroups([]);
    $.ajax({
        url: '@Url.Action("Create", "Page")',
        type: 'POST',
        data: ko.toJSON(mappedModel),
        contentType: 'application/json; charset=utf-8',
        success: function(data) {
           ...do something
        }
    });
}; 
```

The Content-Type request header is used by ASP.NET MVC when trying to read the request in order to know how is this request being serialized.

In addition to that you might want to replace the `IList<KeyValuePair<Guid, string>>` types with `IList<MyViewModel>` where `MyViewModel` would be a view model class exposing two public properties: `Key` and `Value`. I am not sure that the JSON serializer would cope well with those `KeyValuePair<Guid, string>` type.

# iphone - Xcode 应用程序随机崩溃并出现错误

> ID：14287974
> 
> 赞同：0
> 
> 时间：2013-01-11T22:53:19.710
> 
> 标签：iphone, objective-c, xcode

我正在目标 c 中制作 iPhone 应用程序并遇到了问题。每运行 15 次左右，它就会抛出一个随机错误，说“libc++abi.dylib：终止调用抛出异常”。我无法追踪导致此问题的代码，因为它是随机的并且不经常发生。我已经在上面运行了僵尸分析器，并且没有僵尸。我正在使用ARC。任何人都可以提供任何建议来寻找原因吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T09:41:12.857

这是一个 C++ 异常。您可以调试它设置 C++ 异常断点（添加异常断点 -> 在断点导航器中的 C++）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T22:58:03.433

当您将项目文件夹拖到另一个位置时，通常会发生这种情况。然后，当您运行项目时，它会崩溃，可能是因为某些 Xcode 文件的位置（我仍然完全不知道）不匹配。

尝试从头开始创建您的项目：创建一个新项目并添加您在其中创建的所有文件。并且永远不要将其转移到另一个位置。

# google-profiles-api - 检索/更改个人资料图片 Google Profile API

> ID：14287976
> 
> 赞同：1
> 
> 时间：2013-01-11T22:53:21.483
> 
> 标签：google-profiles-api

我可以使用以下代码通过 Jquery 中的 AJAX 调用检索配置文件信息：

```
var url = 'https://www.google.com/m8/feeds/profiles/domain/{DOMAIN_NAME}/full';
        $.ajax({
            url: url
                +'?access_token='
                +accessToken,
            headers: {
                'GData-Version': '3.0',
                'If-Match': '*'
            },
            async: false,
            dataType: 'text',
            success: function(data) {
                $('#result').text(data);
            }
        });
    }; 
```

但是，当我尝试使用相同的访问令牌检索图片时：

```
var url = 'https://www.google.com/m8/feeds/profiles/domain/{MY_DOMAIN}/full/{USER_NAME}';   
        $.ajax({
            url: url
                +'?access_token='
                +accessToken,
            headers: {
                'GData-Version': '3.0'
            },
            async: false,
            dataType: 'text',
            success: function(data) {
                $('#result').text(data);
            }
        }); 
```

我收到错误：401（令牌无效 - AuthSub 令牌的范围错误）

我使用的范围是配置文件数据 api 页面上提供的范围：https: [//www.google.com/m8/feeds/profiles](https://www.google.com/m8/feeds/profiles)

如何获得正确的授权？提供的访问令牌是否不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T19:31:32.223

对于个人资料图片，我认为表单的 URL 应该是

[https://www.google.com/m8/feeds/photos/profile/domainName/userName](https://www.google.com/m8/feeds/photos/profile/domainName/userName)

这是文档： [https ://developers.google.com/google-apps/profiles/#retrieving_photo](https://developers.google.com/google-apps/profiles/#retrieving_photo)

你会尝试一下，看看它是否有效？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T23:49:56.283

尝试使用此路径作为范围

```
https://www.google.com/m8/feeds/ 
```

你可以参考这个[帖子](https://stackoverflow.com/questions/13717809/to-get-users-profile-information-in-google-script)

# .net - .NET Framework 中未记录的异常

> ID：14287977
> 
> 赞同：-1
> 
> 时间：2013-01-11T22:53:26.433
> 
> 标签：.net, exception, getfiles, undocumented-behavior

再一次，我正在努力理解该方法的无证行为`GetFiles`（`System.IO.Directory`这会让我发疯）。在运行一些例行测试时，我惊讶地发现对该方法的调用引发了一个类型为 的异常，该异常在[MSDN 页面 about](http://msdn.microsoft.com/en-us/library/07wt70x2.aspx)`NotSupportedException`中未提及，在其他异常所在的列表中。[`GetFiles`](http://msdn.microsoft.com/en-us/library/07wt70x2.aspx)

例如，C# 中的这个调用：

```
Directory.GetFiles(@"XY:"); 
```

抛出一个`NotSupportedException`. 我的第一印象是文档页面缺少一条信息，但再想一想，我不太确定。我的意思是我一直假设在使用 .NET Framework 类时我需要关心的所有异常都是众所周知的并记录在案的。例如，`FileNotFoundException`当我加入字符串时，我从来没有为 a 放置一个处理程序，因为我不希望这个异常发生在那里。

我的假设是错误的吗？我是否应该期望至少某些异常可能会从任何地方弹出`OutOfMemoryException`？我需要阅读任何声明吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T23:05:52.850

当然，某些类型的异常可能会在没有警告的情况下随时发生（一个很好的例子就是经典的`StackOverflowException`）。

不过，我将这种特殊情况称为文档错误。的文档`NotSupportedException`确实提到了`System.IO`一般的类，并且还说该`HRESULT`值`COR_E_NOTSUPPORTED`转换为所述异常类型。我不确定要求将PInvoked 代码导致的*每个*可能的错误结果都明确列为可能的异常类型是否合理，但这似乎是这里发生的事情。

# algorithm - 使用前序和中序字符串检查子树

> ID：14287980
> 
> 赞同：7
> 
> 时间：2013-01-11T22:53:56.407
> 
> 标签：algorithm, binary-tree, tree-traversal

我正在阅读的一本书声称，检查二叉树是否是二叉树`B`的子树的一种`A`方法是构建两棵树的`inorder`和`preorder`字符串（表示每棵树的中序和前序遍历的字符串），并检查是否`inorder_B`是`inorder_A` **和** 的子串`preorder_B`是 的子串`preorder_A`。请注意，它声称您必须检查inorder**和**preorder 字符串**的子字符串匹配。**

 **是否真的有必要检查中序和预序字符串上的子字符串**匹配**？不也来检查一下吗？有人可以提供一个例子来证明我错了（即证明书中的主张是正确的）吗？我想不出两棵树不相等但前序或中序字符串匹配的例子。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-11T22:58:17.417

考虑以 A 和 B 作为节点的两棵两节点树。树一有 B 作为根，A 作为左孩子。树二以 A 为根，B 为右孩子。中序遍历匹配，但树不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T23:03:41.930

如果树不是二叉搜索树而是普通二叉树，我认为你需要两者。任何一组节点都可以是预序符号。假设有一棵二叉树 a,b,c,d,e,f,g,h 并且您的子树是 cdef。您可以使用子树 cde 和另一个子树 fg 创建另一个树。没有办法知道区别。

如果它是二叉搜索树，那么你不需要中序。

顺便说一句，这里有一个有趣的算法问题：给定一个预序符号，找到满足它的二叉树的数量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-30T05:08:22.597

作为对user1952500回答的补充：如果是二叉搜索树，则只有前序或只有后序才能使其唯一，而只有中序不能。例如：

```
 5
 / \
3   6 
```

inorder: 3-5-6 然而，另一个二叉搜索树可以有相同的顺序：

```
3
 \
  5
   \
    6 
```

另外，我相信 preorder+inorder+string_comparison 仅用于检查两棵树是否相同。它无法检查一棵树是否是另一棵树的子树。要查看示例，请参阅 [使用前序字符串和中序字符串确定二叉树是否是另一棵二叉树的子树](https://stackoverflow.com/questions/16381294/determine-if-a-binary-tree-is-subtree-of-another-binary-tree-using-pre-order-and)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-29T22:35:57.480

使用哨兵进行前序遍历来表示空节点就足够了。我们可以使用这种方法来序列化/反序列化二叉树。这意味着在二叉树和它的前序之间存在一对一的映射，具有哨兵表示。**

# javascript - 在javascript中将两个数组与一些逻辑合并

> ID：14287985
> 
> 赞同：0
> 
> 时间：2013-01-11T22:54:13.343
> 
> 标签：javascript, arrays

我尝试合并类似的东西（我在 json 中显示）

```
[["Field1","0"],["Field2","0"],["Field3","0"]] 
```

和

```
{"0":{"Name":"Foo","Lastname":"Bar"}} 
```

当我做

```
$.extend({}, firstArray, secondArray); 
```

我进入 JSON

```
{
 "0":{"Name":"Foo","Lastname":"Bar"},
 "1":["Field1","0"],
 "2":["Field2","0"]
} 
```

如您所见，第一个数组与第二个数组混合在一起。我希望它像这样被包裹起来

```
{
"0":{"Name":"Foo","Lastname":"Bar"},
"1":[ "1": ["Field1","0"],"2":["Field2","0"]]
} 
```

因此，稍后当我使用它时，我可以将字段内容作为一个数组获取。有可能吗？我无法让它工作。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T23:03:15.927

看起来您只需要添加`secondArray`为 的属性`firstArray`，而是转换为对象。可以这样完成：

```
firstArray["1"] = $.extend({}, {}, secondArray); 
```

现在`firstArray`变成：

```
{
"0":{"Name":"Foo","Lastname":"Bar"},
"1":{"0": ["Field1","0"], "1":["Field2","0"]}
} 
```

我希望这已经足够好了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T23:02:05.247

`firstarray = firstarray.concat(secondarray)`

# python - 如何参考 | 蟒蛇| 语法/逻辑

> ID：14287986
> 
> 赞同：0
> 
> 时间：2013-01-11T22:54:26.033
> 
> 标签：python, syntax, reference, logic, automatic-generalization

我编写了 python 代码来组织 40G 的音乐，但它只适用于我的计算机，所以我想概括代码，以便它可以在任何计算机的任何目录中工作。

```
import os #imports os functions
import eyed3 #imports eyed3 functions
import errno
import shutil

root_folder = os.getcwd()

files = os.listdir(root_folder) #lists all files in specified directory

for file_name in files:
    if file_name.endswith('.mp3'): #if file ends with ".mp3" it continues onto the next line

        abs_location = '%s/%s' % (root_folder, file_name)

        try:
            song_info = eyed3.load(abs_location) #loads each file into eyed3 and assignes the return value to song_info
        except IOError:
            pass
        if song_info.tag is None:
            print 'Skipping %s' % abs_location
            continue
        if song_info is None:
            print 'Skipping %s' % abs_location
            continue
            print 'Skipping %s' % abs_location
            continue
        try:
            os.mkdir(os.path.expanduser('~/Desktop/mp3-organizer/%s' % song_info.tag.artist))
        except OSError as e:
            if e.errno!= errno.EEXIST:
                raise
        except UnicodeDecodeError:
            pass
        try:
            os.mkdir(os.path.expanduser('~/Desktop/mp3-organizer/%s/%s' % (song_info.tag.artist, song_info.tag.album)))
        except OSError as e:
            if e.errno!= errno.EEXIST:
                raise
        except OSError:
                continue
        print song_info
        print song_info.tag.artist
        try :
            shutil.move('%s' % file_name, '%s/%s' % (song_info.tag.artist, song_info.tag.album))
        except UnicodeDecodeError:
            pass
        except shutil.Error:
            try:
                os.renames('%s' % file_name, '%s_%s' % (file_name, song_info.tag.artist))
            except OSError:
                pass
    else:
        pass

#improvements
    #have this work on other computers 
```

我想将使用“~/Desktop/mp3-organizer/”的行更改为“root_folder/%s”% song_info.tag.artist，其中“root_folder”=当前工作目录

但我知道那行不通，我只是不知道如何“用词”它。

回顾一下，目标是让代码在放置脚本的目录中运行。不仅适用于我计算机中的特定目录。

感谢任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T22:58:59.287

您可以像这样获取当前目录：

```
>>> import os
>>> os.curdir
'.'
>>> d = os.path.realpath(os.curdir)
>>> print d
/Users/jdoe 
```

然后，添加子目录：

```
>>> print os.path.join(d, 'mp3-organizer')
/Users/jdoe/mp3-organizer 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T00:22:45.737

要获取当前脚本的目录，请尝试：

```
import os
root_folder = os.path.abspath(__file__) 
mp3_dir = os.path.join(root_dir, 'mp3-organizer') 
```

现在，无论您在哪个当前目录下运行脚本，您都可以填充 mp3_dir

# jquery - ajax with cakephp2 on updated div

> ID：14287987
> 
> 赞同：0
> 
> 时间：2013-01-11T22:54:31.033
> 
> 标签：jquery, ajax, recursion, cakephp-2.0

I have currently migrated my cakePHP application from 1.3 to 2.2.4\. It manages tasks with tree behavoir. I use jQuery for the ajax.

When I click on a task, an ajax request is fired and the response (the subtasks) update the content of the task div. That works fine for the first level. But the 2nd level does not have any javascript code beeing generated, so the click leads to a blank page, only showing the plain ajax response (only the subtasks of the 2nd level).

How can I tell cakePHP to generate further Javascript code to update the the div? HTML ID's are beeing generated correctly.

Any help would be great!

function **expand** in TasksController.php:

```
function expand($id = NULL, $check = 1) {
/*
    get details of given task ID
*/
// if not expanded yet
if ((!$this->Session->check('Task.expand.'.$id))||($check==0)) {
    // set session variable to "expanded"
    $this->Session->write('Task.expand.'.$id, 1);

    // get task details
    $zahlen = array(1 => 'eins', 2 => 'zwei', 3 => 'drei', 4 => 'vier', 5 => 'fünf');
    $this->set('commentlimit', $zahlen[$this->Session->read('Profile.commentcount')]);
    $this->Task->Behaviors->attach('Containable');
    $this->Task->recursive = -1;
    $this->Task->contain(array('Assignee' => array('fields' => array('id', 'name', 'firstname')), 'Tasktype', 'Comment' => array('fields' => 'text', 'limit' => $this->Session->read('Profile.commentcount'), 'order' => 'lft DESC', 'user_id', 'User' => array('fields' => array('name', 'firstname')))));
    $this->set('task', $this->Task->find('first', array('conditions' => array('Task.id' => $id, 'Task.user_id' => $this->Session->read('UserId')))));
}
// if yet expanded, collapse / unload
else {
    $this->Session->delete('Task.expand.'.$id);
    $this->redirect(array('controller' => 'tasks', 'action' => 'collapse'));
}
    //  pr ($this->Session->read('Task'));

    $this->render('expand', 'ajax'); 

    } 
```

And this is my taskelement, which is beeing requested and filled for each task:

```
<div class="task <?php echo $thisclass; ?>">
    <?php
    echo $this->Js->link($task['Task']['name'], array( 'controller' => 'tasks', 'action' => 'expand', $task['Task']['id'] ), array( 'update' => '#details'.$task['Task']['id'] ));
    echo " <span>(".$this->requestAction('/tasks/countAllChildren/'.$task['Task']['id'])." Unterpunkte, davon ";
    echo $this->requestAction('/tasks/countDirectChildren/'.$task['Task']['id'])." direkt)</span>";
    echo " <span>(".$this->requestAction('/tasks/countAllDoneChildren/'.$task['Task']['id'].'/'.$task['Task']['lft'].'/'.$task['Task']['rght'])." erledigt)</span>";
    ?>
<div id="details<?php echo $task['Task']['id']; ?>">
    <?php
        echo $this->requestAction('/tasks/is_expanded/'.$task['Task']['id']);
    ?>
</div>
    </div> 
```

The relevant part of expand.ctp look like this:

```
 <?php
    $children = $this->requestAction('/tasks/getChildren/'.$task['Task']['id']);
    if ($children) {
    ?>
<p><h4>Unteraufgaben:</h4>
<?php
echo $this->Html->link('Neu',"/tasks/add/".$task['Task']['id'], array('class'=>'button'));
foreach ($children as $child) {
    $this->set('task', $child);
// todo: das hier eleganter machen, ohne zusätzliche Abfragen
    $this->set('level', $this->requestAction('/tasks/getDepth/'.$task['Task']['id']));
    echo "<tr>".$this->element('taskmesh')."</tr>";
}
    }
    else {
?>
<p><h4>Keine Unteraufgaben</h4>
<?php
echo $this->Html->link('Neu',"/tasks/add/".$task['Task']['id'], array('class'=>'button'));
    }
?>
</p> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T22:06:43.310

When I asked another CakePHP guy, he told me to use the JavaScript buffer and linked to it in the CakeBook: [http://book.cakephp.org/2.0/en/core-libraries/helpers/js.html](http://book.cakephp.org/2.0/en/core-libraries/helpers/js.html)

So the answer to my question is:

Add the following code the bottom of the view of the requested ajax action:

```
echo $this->Js->writeBuffer(); // Write cached scripts 
```

# jquery-mobile - 如何在导航栏中持久标头的情况下实现滑动

> ID：14287988
> 
> 赞同：0
> 
> 时间：2013-01-11T22:54:32.623
> 
> 标签：jquery-mobile

在我的 Android JQM 应用程序中，我有一个包含 5 个选项卡的选项卡式布局`navbar`。每个选项卡就像一个持久的标题。以下是第二个选项卡的代码。
现在如何实现跨多个标签的滑动？

```
<div data-role="header" data-position="fixed" data-id="headernav">
    <h1>Header1</h1>
    <a href="index.html" class="ui-btn-left" data-icon="home">Home</a>
    <div data-role="navbar">
       <ul>
            <li>
                <a href=" Description.html" data-transition="slide" ><b>Description </b></a>
            </li>
            <li>
                <a href="illustration3.html" data-transition="slide" class="ui-btn-active ui-state-persist" ><b>Illustration</b></a>
            </li>
           <li>
                <a href=" Complications.html" data-transition="slide" ><b>Complications</b></a>
            </li>
           <li>
                <a href="Indications.html" data-transition="slide" ><b>Indications</b></a>
            </li>
            <li>
                <a href="Equipment.html" data-transition="slide"><b>Equipment</b></a>
            </li>
        </ul>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T07:12:52.507

您可以像这样使用`swipeleft`和`swiperight` [事件](http://jquerymobile.com/demos/1.2.0/docs/api/events.html)：

```
function changeNavTab(left) {
    var $tabs = $("div[data-role=navbar] li a", $("div[data-role=page].ui-page-active"));
    var curidx = $tabs.closest("a.ui-btn-active").parent().index();
    var nextidx = 0;
    if (left){
        nextidx = (curidx == $tabs.length - 1) ? 0 : curidx + 1;
    } else {
        nextidx = (curidx == 0) ? $tabs.length - 1 : curidx - 1;
    }
    $tabs.eq(nextidx).click();
}

$("div[data-role=content]").on("swipeleft", function(event){
    changeNavTab(true);
});

$("div[data-role=content]").on("swiperight", function(event){
    changeNavTab(false);
}); 
```

工作示例（jsFiddle）在[这里](http://jsfiddle.net/pmatseykanets/TSy26/)

# android - 初学者 - 使用 Android SDK eclipe 的简单 AJAX Web 服务调用

> ID：14287989
> 
> 赞同：0
> 
> 时间：2013-01-11T22:54:38.257
> 
> 标签：android, ajax, eclipse, web-services

我是学习Android应用程序开发的初学者。这是我的问题

我正在使用与 Android SDK 一起提供的 Eclipse 来开发应用程序。要启用 Web 应用程序，我使用 phonegap 构建教程添加了 cordova API。现在，如果我只使用普通的 HTML 控件或文本，我就可以看到 html 文件。但我有一个代码，它从另一个 WebSphere 服务器调用 web 服务并显示数据。当我在 IIS 服务器中运行代码时（使用 DreanWeaver IDE），它运行良好。但是当我尝试在模拟器中将其作为应用程序运行时（来自 Android SDK），我没有看到来自 web 服务的任何输出。我什至看不到从 android 应用程序到我的 webspehere 服务器的调用（当我在 Dreamweaver 中将此代码作为网页运行时可以看到）。这是我的 index.html 代码。如果有人对此感到疑惑，我已将 ws.js 和 prototype.js 包含在 assets/www/scripts/ 中。有人可以帮我解决这个问题。

```
 <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no;" />
    <meta charset="utf-8">

    <script type="text/javascript" src="scripts/prototype.js"></script>
    <script type="text/javascript" src="scripts/ws.js"></script>
    <script type="text/javascript">

    function onBodyLoad(name, container)
    {
        console.log("Here1"); 
        var call = new WS.Call('http://localhost:9080/ILM/services/ILMReports'); 
        var nsuri = '';
        var qn_op = new WS.QName('getInboundSearchByItemReport',nsuri);
        var qn_op_resp = new WS.QName('getInboundSearchByItemReportResponse',nsuri);  

        call.invoke_rpc(
        qn_op,
        new Array(
        {name:'name',value:name}
        ),null,
        function(call,envelope) {
            var ret = 
            envelope.get_body().get_all_children()[0].
              get_all_children()[0].get_value();
            container.innerHTML = ret;
            }
        );

        /*window.location = "TestingAJAXWS.html";*/
    }

    function onDeviceReady()
    {
        // do your thing!
        navigator.notification.alert("PhoneGap is working")
    }

    </script>
</head>
<body onload="onBodyLoad('aaa',$('result'))">
<h1>Hey, it's PhoneGap!</h1>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-13T11:01:06.450

我可以看到的问题是您用于访问 Web 服务的本地主机地址。

不知何故，android模拟器不允许本地主机地址，因为模拟器不知道。（如果你知道原因请写）

这是一种旧思路。但我希望它会帮助别人。/T

# c++ - 跨平台 64 位类型

> ID：14287991
> 
> 赞同：2
> 
> 时间：2013-01-11T22:54:54.717
> 
> 标签：c++, visual-studio-2010, gcc, sizeof, bit

在每个操作系统（32/64 位）中是否存在 64 位类型，并且每个编译器的大小为 64？

同样的问题也适用于 32 位类型。（应该是int？）

*问题的根源是*：我正在实施具有两种指令的系统：

1.  32 位
2.  64 位

我想写一些类似的东西：

```
typedef int instruction32bit;

typedef long long instruction64bit //it is not correct some system have sizeof(long long) = 128 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-11T22:56:41.903

您正在寻找`int64_t`和`int32_t`，或他们未签名的朋友`uint64_t`和`uint32_t`。包括[`cinttypes`](http://en.cppreference.com/w/cpp/header/cinttypes)或[`cstdint`](http://en.cppreference.com/w/cpp/header/cstdint)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-11T23:05:15.803

如果您希望您的代码真正可移植，那么您可能想要 typedef 您自己的类型，并使用例如

```
 typedef int32_t instruction32bit;
   typedef int64_t instruction64bit; 
```

这在大多数情况下都可以工作，但如果它不适用于特定的系统/编译器/任何东西，您可以添加如下操作：

```
 #ifdef SOMEDEFINE
   typedef long long int instruction64bit;
   typedef int instruction32bit;
 #else
   typedef int32_t instruction32bit;
   typedef int64_t instruction64bit;
 #endif 
```

当然，对于不支持 int32_t 和 int64_t 的每个编译器/操作系统（或其组）模型，您可能需要一个特殊的`#ifdef`.

这正是所有真正可移植的代码所做的，因为无论你发现“几乎所有编译器都做 X”，如果你的代码足够流行，总会有人想用“Bob's Compiler Project”编译代码没有这个功能。当然，另一件事是让那些使用“Bob 的编译器”的人编辑 typedef 本身，而不接受“对于 Bob 的编译器，你需要这个……”补丁，这不可避免地会以你的方式发送。

正如 Carl Norum 在评论中指出的那样，在许多情况下，`#ifdef`可能可以转换为 a `#if`，然后使用泛型类型，例如`int`and `long`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T12:00:09.140

使用`uint_least32_t`和`uint_least64_t`。固定大小的类型`uint32_t`不会`uint64_t`存在于没有它们描述的确切大小的系统上。

# rvm - RVM 不是 Raspbian RVM 安装中的功能

> ID：14287992
> 
> 赞同：0
> 
> 时间：2013-01-11T22:54:55.113
> 
> 标签：rvm, debian, raspberry-pi, raspbian

在使用 LXTerminal 在 Raspbian 上安装 RVM 时，我正在寻找“RVM 不是函数”问题的解决方案。以下线程讨论了此问题的解决方法：

[rvm 安装不工作：“RVM 不是函数”](https://stackoverflow.com/questions/9336596/rvm-installation-not-working-rvm-is-not-a-function)

一种解决方案是通过执行 /bin/bash --login 以“登录模式”启动终端，但这对 Raspbian 没有帮助，因为它使用 LXTerminal。其他人建议将以下行放在 .bash_rc 文件的末尾：

源 ~/.rvm/scripts/rvm

...这似乎工作。只是想知道（a）上述解决方法是否合法并且不会搞砸任何事情，以及（b）是否有人在 Raspbian 上找到了更优雅的 RVM 解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T02:09:26.680

看起来最好的解决方案是运行它：

```
lxterminal -e "bash -li" 
```

它将使终端使用一个`login`和`interactive`外壳。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-10T22:42:16.680

我尝试了这个，但是当在 ruby​​ on rails 应用程序的根应用程序目录中它停止工作时，我将此“源 /usr/local/rvm/scripts/rvm”添加到我的 .bashrc 文件中，该文件在 /home/user/ 中工作文件夹和根 ruby​​ on rails 应用程序文件夹

# python - 从 NLTK 中的 Text.similar() 和 ContextIndex.similar_words() 生成的单词按频率排序？

> ID：14287993
> 
> 赞同：5
> 
> 时间：2013-01-11T22:55:02.070
> 
> 标签：python, nltk

我正在使用这两个函数来查找相似的单词，它们会返回不同的列表。我想知道这些功能是否按最频繁到最不频繁的关联排序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T23:23:05.407

[`ContextIndex.similar_words(word)`](http://nltk.org/_modules/nltk/text.html#ContextIndex.similar_words)将每个单词的相似度得分计算为每个上下文中频率乘积的总和。 [`Text.similar()`](http://nltk.org/_modules/nltk/text.html#Text.similar)简单地计算单词共享的唯一上下文的数量。

`similar_words()`似乎在 NLTK 2.0 中包含一个错误。请参阅[nltk/text.py](http://nltk.org/_modules/nltk/text.html#ContextIndex.similar_words)中的定义：

```
def similar_words(self, word, n=20):
    scores = defaultdict(int)
    for c in self._word_to_contexts[self._key(word)]:
        for w in self._context_to_words[c]:
            if w != word:
                print w, c, self._context_to_words[c][word], self._context_to_words[c][w]
                scores[w] += self._context_to_words[c][word] * self._context_to_words[c][w]
    return sorted(scores, key=scores.get)[:n] 
```

返回的单词列表应该按照相似度得分的降序排列。将 return 语句替换为：

```
return sorted(scores, key=scores.get)[::-1][:n] 
```

在`similar()`中，对的调用`similar_words()`被注释掉，可能是由于这个错误。

```
def similar(self, word, num=20):
    if '_word_context_index' not in self.__dict__:
        print 'Building word-context index...'
        self._word_context_index = ContextIndex(self.tokens,
                                                filter=lambda x:x.isalpha(),
                                                key=lambda s:s.lower())

#   words = self._word_context_index.similar_words(word, num)

    word = word.lower()
    wci = self._word_context_index._word_to_contexts
    if word in wci.conditions():
        contexts = set(wci[word])
        fd = FreqDist(w for w in wci.conditions() for c in wci[w]
                      if c in contexts and not w == word)
        words = fd.keys()[:num]
        print tokenwrap(words)
    else:
        print "No matches" 
```

*注意：在 a 中`FreqDist`，与 a 不同`dict`，它`keys()`返回一个排序列表。*

**例子：**

```
import nltk

text = nltk.Text(word.lower() for word in nltk.corpus.brown.words())
text.similar('woman')

similar_words = text._word_context_index.similar_words('woman')
print ' '.join(similar_words) 
```

**输出：**

```
man day time year car moment world family house boy child country
job state girl place war way case question   # Text.similar()

#man ('a', 'who') 9 39   # output from similar_words(); see following explanation
#girl ('a', 'who') 9 6
#[...]

man number time world fact end year state house way day use part
kind boy matter problem result girl group   # ContextIndex.similar_words() 
```

`fd`, 中的频率分布`similar()`是每个单词的上下文数量的统计：

```
fd = [('man', 52), ('day', 30), ('time', 30), ('year', 28), ('car', 24), ('moment', 24), ('world', 23) ...] 
```

对于每个上下文中的每个单词，`similar_words()`计算频率乘积的总和：

```
man ('a', 'who') 9 39  # 'a man who' occurs 39 times in text;
                       # 'a woman who' occurs 9 times
                       # Similarity score for the context is the product:
                       #     score['man'] = 9 * 39
girl ('a', 'who') 9 6
writer ('a', 'who') 9 4
boy ('a', 'who') 9 3
child ('a', 'who') 9 2
dealer ('a', 'who') 9 2
...
man ('a', 'and') 6 11  # score += 6 * 11
...
man ('a', 'he') 4 6    # score += 4 * 6
...
[49 more occurrences of 'man'] 
```