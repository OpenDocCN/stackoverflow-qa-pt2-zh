# StackOverflow 问答 13249000-13249999

# python - 实现类概念在 python 中不起作用

> ID：13249009
> 
> 赞同：0
> 
> 时间：2012-11-06T10:25:37.530
> 
> 标签：python

程序1：基于功能：-

```
import xml.etree.ElementTree as ET
import sys   
doc       = ET.parse("users.xml")
root      = doc.getroot()
root_new  = ET.Element("users") 
for child in root:
    username             = child.attrib['username']
    password             = child.attrib['password']   
    # create "user" here
    user    = ET.SubElement(root_new, "user") 
    user.set("username",username)               
    user.set("password",password) 
    #checking attribute for skipping KeyError
    if 'remote_access' in child.attrib:
        remote_access   = child.attrib['remote_access']
        user.set("remote_access",remote_access) 
    for g in child.findall("group"):
        # create "group" here
        group     = ET.SubElement(user,"group")  
        if g.text != "lion":
            group.text = g.text 
tree = ET.ElementTree(root_new)
tree.write(sys.stdout) 
```

这是 xml :-

```
<users>
<user username="admin"  password="admin" remote_access="yes"></user>
<user username="private_user1" password="user1" ><group>group1</group><group>group2</group></user>
<user username="private_user2" fullname="user2" password="user2"><group>group1</group><group>group2</group></user>
</users> 
```

我的班级实施:-完全错误:(

```
import xml.etree.ElementTree as ET
import sys

class users_detail (object):

    def __init__( self, xml_path ):
     """bla bla
     """
    try:
        doc = ET.parse("users.xml")
    except:
        print 'xml not found' 
        root      = doc.getroot() 
        root_new  = ET.Element("users") 
        for child in root:
            username             = child.attrib['username']
            password             = child.attrib['password']
            user    = ET.SubElement(root_new, "user") 
            user.set("username",username)               
            user.set("password",password) 
            if 'remote_access' in child.attrib:
                remote_access   = child.attrib['remote_access']
            for g in child.findall("group"):
                group     = ET.SubElement(user,"group")  
                if g.text != "lion":
                    group.text = g.text 
        tree = ET.ElementTree(root_new)
        tree.write(sys.stdout)
if __name__=='main':
    users_detail() 
```

如何通过面向对象的概念类以更好的方式实现这一点。而且我的班级实施根本不起作用。请帮帮我。:(

我需要将上面的代码变成一个 Python 类：这就是要求:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T10:29:31.923

您有缩进问题（`print`语句之后的所有内容都缩进了一级）。

并告诉我的老师，将随机代码重写为“类”是胡说八道。像这样的代码不需要 Python 中的类。

# blackberry - 黑莓错误：Jar 命令失败

> ID：13249011
> 
> 赞同：0
> 
> 时间：2012-11-06T10:25:44.330
> 
> 标签：blackberry, error-handling, compiler-errors

以下是我得到的错误

> 错误：jar 命令失败：
> 
> jar -cfm "E:\Blackberry Workspace\Kenexa\deliverables\Standard\7.1.0\Kenexa.jar"
> 
> C:\Users\Acer\AppData\Local ... 打包项目 Kenexa 失败（耗时 8.81 秒）

项目工作正常，突然发生了。我已经阅读了论坛，他们说要为系统设置 jdk 的环境变量，也有人说要将 jre exe 文件放在 jdk 中，类似这样，我做了两个选项，但仍然没有工作，我得到了这个错误。

但是当我删除一些类它开始工作并再次添加新类时会出现这个问题，我现在总共有 22 个类，这与大小或限制有关吗？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T10:19:12.287

[Blackberry Support](http://supportforums.blackberry.com/t5/Java-Development/why-cause-more-then-100-compiled-classes-packaging-I-O-error/m-p/520282)的回答您是否使用 BlackBerry JDE 或 BlackBerry Java Plug-in for Eclipse？

如果您使用的是 BlackBerry JDE，您可能会遇到一个问题，即您已达到命令行支持的最大长度（所有文件都列在命令行上）。如果是这种情况，您可以通过减少类的数量（如您所做的那样）或减少源文件的路径长度（将它们移近驱动器的根目录）来解决它。Mark Sohm 黑莓开发顾问

所以，我只需要将我的工作区文件夹名称从“Blackberry Workspace”更改为“Workspace”。命令行并没有走很长的路。

# android - 以编程方式创建 StateListDrawable 时如何设置 constantSize？

> ID：13249012
> 
> 赞同：0
> 
> 时间：2012-11-06T10:25:47.390
> 
> 标签：android, android-view

我正在[`StateListDrawable`](http://developer.android.com/reference/android/graphics/drawable/StateListDrawable.html)为我的一个自定义视图以编程方式创建背景。为了使drawable正常工作，[`constantSize`](http://developer.android.com/reference/android/graphics/drawable/StateListDrawable.html#attr_android%3aconstantSize)需要设置为true。创建 时`StateListDrawable`，这只是一个 XML 属性，但看起来该属性并没有在类中公开。我已经使用以下代码解决了这个问题：

```
StateListDrawable drawable = new StateListDrawable();
((DrawableContainer.DrawableContainerState) drawable.getConstantState()).setConstantSize(true); 
```

有没有更清洁的方法来做到这一点？

# iphone - 如何从 iPhone 中的图像中去除红眼？

> ID：13249013
> 
> 赞同：3
> 
> 时间：2012-11-06T10:25:56.780
> 
> 标签：iphone, ios, ipad, image-processing, iphone-sdk-3.0

我想从照片中删除红眼效果，但没有得到任何示例，任何人都可以帮助我处理演示代码或代码片段吗？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-06T10:35:17.440

使用`category`以下`UIImage`：

```
@interface UIImage (Utitlities)
  -(UIImage*)redEyeCorrection;
@end 
```

* * *

```
@implementation UIImage (Utitlities)
  -(UIImage*)redEyeCorrection
  {
    CIImage *ciImage = [[CIImage alloc] initWithCGImage:self.CGImage];

    // Get the filters and apply them to the image
    NSArray* filters = [ciImage autoAdjustmentFiltersWithOptions:[NSDictionary dictionaryWithObject:[NSNumber numberWithBool:NO] forKey:kCIImageAutoAdjustEnhance]];
    for (CIFilter* filter in filters)
    {
      [filter setValue:ciImage forKey:kCIInputImageKey];
      ciImage = filter.outputImage;
    }

    // Create the corrected image
    CIContext* ctx = [CIContext contextWithOptions:nil];
    CGImageRef cgImage = [ctx createCGImage:ciImage fromRect:[ciImage extent]];
    UIImage* final = [UIImage imageWithCGImage:cgImage];
    CGImageRelease(cgImage);
    return final;
  }
@end 
```

**用法**：下面给出的示例代码

```
 UIImage *redEyeImage = [UIImage imageNamed:@"redEye.jpg"];

if (redEyeImage) {
    UIImage *newRemovedRedEyeImage = [redEyeImage redEyeCorrection];
    if (newRemovedRedEyeImage) {
        imgView.image = newRemovedRedEyeImage;
    }
} 
```

参考[NYXImagesKit UIImage Enhancing](https://github.com/Nyx0uf/NYXImagesKit/blob/master/Categories/UIImage%2BEnhancing.m)链接

# jquery - WdCalendar 一天中事件的总小时数

> ID：13249014
> 
> 赞同：0
> 
> 时间：2012-11-06T10:25:58.703
> 
> 标签：jquery, jquery-plugins, google-calendar-api

我正在使用 JqueryCalendar 插件，我能够总结所有事件的总小时数，但不能总结月视图中的单个日期。任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T09:10:53.780

终于找到了计算总数的方法

由于我必须将此项目转换为 MVC3，因此我做了一些更改。

**程序更改**：proc_JQCalendar_listCalendarByRange 已将查询修改为按开始时间排序，以便每天连接总数。

公共静态字典 listCalendarByRange（字符串 sd，字符串 ed）{

```
 // Convert unitx timestamp to DateTime
        DateTime dtSd = fn.ConvertFromUnixTimestamp(Convert.ToDouble(sd));
        DateTime dtEd = fn.ConvertFromUnixTimestamp(Convert.ToDouble(ed));

        Dictionary<string, object> ret = new Dictionary<string, object>();

        string sStp = "proc_JQCalendar_listCalendarByRange";
        int sqlReturn = 0;

        DataTable dtResults = new DataTable();
        SqlConnection oSqlCon = new SqlConnection(ConfigurationManager.ConnectionStrings["SqlServer"].ConnectionString);
        SqlCommand oSqlCmd = new SqlCommand(sStp, oSqlCon);
        SqlDataAdapter oSqlDa = new SqlDataAdapter(oSqlCmd);

        try
        {

            oSqlCmd.CommandType = CommandType.StoredProcedure;
            oSqlCmd.CommandTimeout = 900;

            SqlParameter paramStartTime = new SqlParameter("@starttime", SqlDbType.DateTime);
            SqlParameter paramEndTime = new SqlParameter("@endtime", SqlDbType.DateTime);

            // Assign values to parameters
            paramStartTime.Value = dtSd;
            paramEndTime.Value = dtEd;

            // Add the parameters to oSqlCmd object
            oSqlCmd.Parameters.Add(paramStartTime);
            oSqlCmd.Parameters.Add(paramEndTime);

            // Open SQL connection and execute it
            oSqlCon.Open();
            sqlReturn = oSqlDa.Fill(dtResults);

            List<object> evtList = new List<object>();

            Decimal totalExpense = 0;
            Decimal newtotalExpense = 0;
            Decimal newDateExpense = 0;
            DateTime dStart=DateTime.MinValue;
            DateTime dCheck = DateTime.MinValue;
            int flag = 0;
            int count = dtResults.Rows.Count;
            Decimal whole = 0;

            for (int i = 0; i < count ; i++)
            {

                DataRow row = dtResults.Rows[i];

            //foreach (DataRow row in dtResults.Rows)
            //{

                    DateTime dtST = DateTime.Parse(row["StartTime"].ToString());
                    DateTime dtET = DateTime.Parse(row["EndTime"].ToString());

                    if (flag == 0)
                    {
                        dStart = dtST;
                    }
                    else
                    {
                        dCheck = dtST;
                    }

                    int total = 0;

                    string sAde = row["IsAllDayEvent"].ToString();

                    object[] EvtData = new object[13];

                    EvtData[0] = (int)row["id"];
                    EvtData[1] = row["Subject"].ToString();
                    EvtData[2] = dtST.ToString("MM/dd/yyyy HH:mm");
                    EvtData[3] = dtET.ToString("MM/dd/yyyy HH:mm");
                    EvtData[4] = Convert.ToInt16(sAde);
                    EvtData[5] = 0;
                    EvtData[6] = 0;
                    EvtData[7] = row["Color"].ToString();
                    EvtData[8] = 1;
                    //  EvtData[9] = row["Location"].ToString();
                    EvtData[10] = string.Empty;
                    EvtData[11] = row["Amount"].ToString();

                    evtList.Add(EvtData);
                   // evtList.AsReadOnly();

                    if (i != count - 1)
                    {

                        DataRow rowNext = dtResults.Rows[i + 1];

                        if (row["StartTime"].ToString() == rowNext["StartTime"].ToString())
                        {

                            Decimal granT, granT2;

                             granT = Convert.ToDecimal(row["Amount"]);
                             granT2 = Convert.ToDecimal(rowNext["Amount"]);

                            if (whole == 0)
                            {
                                whole += granT + granT2;
                            }
                            else
                            {
                                whole += granT2;
                            }

                        }
                        else
                        {

                            Decimal granTnew = Convert.ToDecimal(row["Amount"]);

                            if (whole != 0)
                            {
                                EvtData = objectFucntions(row, dtST, dtET, sAde, (whole));
                            }
                            else
                            {
                                EvtData = objectFucntions(row, dtST, dtET, sAde, (granTnew));
                            }

                            evtList.Add(EvtData);
                            whole = 0;
                        }
                    }
                    else
                    {
                        Decimal granTnew=Convert.ToDecimal(row["Amount"]);                         
                        whole += granTnew;
                        EvtData = objectFucntions(row, dtST, dtET, sAde, whole);
                        evtList.Add(EvtData);
                        whole = 0;
                    }

                    ////if (EvtData[11] == null) { EvtData[11] = 0; }
                    //if (dCheck == dStart)
                    //{

                    //    totalExpense = Convert.ToDecimal(EvtData[11]) + Convert.ToDecimal(newtotalExpense);
                    //    newtotalExpense = totalExpense;
                    //    newDateExpense = 0;

                    //}
                    //else
                    //{

                    //    newDateExpense = 0;
                    //    if (flag > 0)
                    //    {
                    //        object[] EvtD = new object[4];
                    //        EvtD[0] = EvtData[2];
                    //        EvtD[1] = EvtData[3];
                    //        EvtD[2] = newtotalExpense;
                    //        evtList.Add(EvtD);
                    //        newtotalExpense = 0;
                    //    }
                    //    newDateExpense = Convert.ToDecimal(EvtData[11]) + Convert.ToDecimal(newDateExpense);
                    //    newtotalExpense = newDateExpense;

                    //}

                    dCheck = dStart;

                    flag += 1;

                }

            ret.Add("events", evtList);
            ret.Add("issort", true);
            ret.Add("start", dtSd.ToString("MM/dd/yyyy HH:mm"));
            ret.Add("end", dtEd.ToString("MM/dd/yyyy HH:mm"));
            ret.Add("error", null);

        }
        catch (Exception ex)
        {
            ret.Add("error", "list calendar by range failed: " + ex.Message);
            //ret["error"] = "list calendar by range failed: " + ex.Message;

        }
        finally
        {
            if (oSqlCon.State == ConnectionState.Open)
                oSqlCon.Close();
        }

        return ret;

    } 
```

还有一个功能：

public static Object[] objectFucntions(DataRow row, DateTime dtST, DateTime dtET, String sAde, Decimal total) {

```
 object[] EvtData = new object[13];
        EvtData[0] = (int)row["id"];
        EvtData[1] = total;
        EvtData[2] = dtST.ToString("MM/dd/yyyy HH:mm");
        EvtData[3] = dtET.ToString("MM/dd/yyyy HH:mm");
        EvtData[4] = Convert.ToInt16(sAde);
        EvtData[5] = 0;
        EvtData[6] = 0;
        EvtData[7] = 3;
        EvtData[8] = 1;
        //  EvtData[9] = row["Location"].ToString();
        EvtData[10] = string.Empty;
        EvtData[11] = row["Amount"].ToString();

        return EvtData;
    } 
```

PS：这与我的数据库有关。

# php - PHP：以 OOP 方式搜索 CSV 文件

> ID：13249018
> 
> 赞同：5
> 
> 时间：2012-11-06T10:26:05.910
> 
> 标签：php, oop, object, loops, csv

我需要编写一个脚本来搜索 CSV 文件，并对其执行某些搜索功能；

1.  在列中查找重复条目
2.  在另一列中查找与禁止条目列表的匹配项
3.  在指定的列上通过正则表达式匹配查找条目

现在，我在程序上对此进行编码完全没有问题，但是当我现在转向面向对象编程时，我想改用对象的类和实例。

然而，在 OOP 中思考对我来说还不是很自然，所以我不完全确定该走哪条路。我不是在寻找特定的代码，而是关于如何设计脚本的建议。

我目前的想法是这样的；

1.  创建一个文件类。这将处理数据的导入/导出
2.  创建一个搜索类。文件的子类。这将包含各种搜索方法

它在 index.php 中的作用：

1.  从 index.php 文件对象中的 csv 获取一个数组
2.  创建一个循环来遍历数组的值
3.  从搜索对象调用循环中的方法并回显它们

我用这种方法看到的问题是这样的；

*   我将要指向数组中的不同元素以查看特定的“列”。我可以将我的循环放在一个函数中并将其作为参数传递，但是这种方式违背了 OOP 的意义，我觉得
*   我的搜索方法将以不同的方式工作。使用嵌套循环搜索重复条目相当简单，但我不需要嵌套循环来执行简单的单词或正则表达式搜索。

我应该这样去吗？

1.  创建一个文件类。这将处理数据的导入/导出
2.  创建一个循环类文件类的子类。这将包含处理遍历数组的方法
3.  创建一个搜索类。循环的子类。这将包含各种搜索方法

我的主要问题是我可能需要多个搜索对象并在我的循环类中遍历它。

任何帮助将非常感激。我对 OOP 很陌生，虽然我了解各个部分，但我还不能看到更大的图景。我可能使我正在尝试做的事情过于复杂，或者可能有一种我还看不到的更简单的方法。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-08T10:31:19.167

PHP 已经提供了一种[使用 SplFileObject 以 OO 方式读取 CSV 文件的方法](https://stackoverflow.com/questions/2805427/how-to-extract-data-from-csv-file-in-php/2805486#2805486)：

```
$file = new SplFileObject("data.csv");

// tell object that it is reading a CSV file
$file->setFlags(SplFileObject::READ_CSV);
$file->setCsvControl(',', '"', '\\');

// iterate over the data
foreach ($file as $row) {
    list ($fruit, $quantity) = $row;
    // Do something with values
} 
```

由于 SplFileObject 流过 CSV 数据，因此内存消耗非常低，您可以有效地处理大型 CSV 文件，但由于是文件 i/o，它并不是最快的。但是，SplFileObject 实现了 Iterator 接口，因此您可以将该 $file 实例包装到其他迭代器中以修改迭代。例如，要限制文件 i/o，您可以将其包装到 CachingIterator 中：

```
$cachedFile = new CachingIterator($file, CachingIterator::FULL_CACHE); 
```

要填充缓存，您需要遍历 $cachedFile。这将填充缓存

```
foreach ($cachedFile as $row) { 
```

然后迭代缓存，你做

```
foreach ($cachedFile->getCache() as $row) { 
```

权衡显然是增加了内存。

现在，要进行查询，您可以将 CachingIterator 或 SplFileObject 包装到 FilterIterator 中，这将在迭代 csv 数据时限制输出

```
class BannedEntriesFilter extends FilterIterator
{
    private $bannedEntries = array();

    public function setBannedEntries(array $bannedEntries)
    {
        $this->bannedEntries = $bannedEntries;
    }

    public function accept()
    {
        foreach ($this->current() as $key => $val) {
            return !$this->isBannedEntryInColumn($val, $key);
        }
    }

    public function $isBannedEntryInColumn($entry, $column)
    {
        return isset($this->bannedEntries[$column])
            && in_array($this->bannedEntries[$column], $entry);
    }
} 
```

FilterIterator 将忽略内部 Iterator 中不满足 FilterIterator 的 accept 方法中的测试的所有条目。上面，我们检查 csv 文件中的当前行与一组禁止条目，如果匹配，则数据不包含在迭代中。你像这样使用它：

```
$filteredCachedFile = new BannedEntriesFilter(
    new ArrayIterator($cachedFile->getCache())
) 
```

由于缓存的结果始终是一个数组，因此我们需要将该数组包装到一个 ArrayIterator 中，然后才能将其包装到我们的 FilterIterator 中。请注意，要使用缓存，您还需要至少迭代一次 CachingIterator。我们只是假设你已经在上面做了。下一步是配置禁止条目

```
$filteredCachedFile->setBannedEntries(
    array(
        // banned entries for column 0
        array('foo', 'bar'),
        // banned entries for column 1
        array( …
    )
); 
```

我想这很简单。您有一个多维数组，其中包含禁止条目的 CSV 数据中的每一列都有一个条目。然后，您只需遍历实例，它只会为您提供没有被禁止条目的行

```
foreach ($filteredCachedFile as $row) {
    // do something with filtered rows
} 
```

或者，如果您只想将结果放入数组中：

```
$results = iterator_to_array($filteredCachedFile); 
```

您可以堆叠多个 FilterIterators 以进一步限制结果。如果您不想为每个过滤编写一个类，请查看 CallbackFilterIterator，它允许在运行时传递接受逻辑：

```
$filteredCachedFile = new CallbackFilterIterator(
    new ArrayIterator($cachedFile->getCache()),
    function(array $row) {
        static $bannedEntries = array(
            array('foo', 'bar'),
            …
        );
        foreach ($row as $key => $val) {
            // logic from above returning boolean if match is found
        }
    }
); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-06T10:43:19.333

我将说明一种合理的方法来设计满足您陈述的需求的 OOP 代码。虽然我坚信以下提出的想法是合理的，但请注意：

*   设计可以改进——这里的目的是展示方法，而不是最终产品
*   该实现仅作为*示例*- 如果它（几乎）有效，那就足够了

* * *

### 如何去做这件事

一个高度工程化的解决方案将从尝试定义数据接口开始。也就是说，考虑一下允许您执行所有查询操作的数据表示形式。这是一个可行的方法：

*   *数据集*是*行*的有限集合。给定从零开始的索引，可以访问每一行。
*   *行*是*值*的有限集合。每个值都是一个字符串，并且可以根据其从零开始的索引（即列索引）来访问。数据集中的所有行都具有完全相同数量的值。

通过遍历行并对特定列的值执行某种类型的测试，此定义足以实现您提到的所有三种类型的查询。

下一步是定义一个在代码中描述上述内容的接口。一个不是特别好但仍然足够的方法是：

```
interface IDataSet {
    public function getRowCount();
    public function getValueAt($row, $column);
} 
```

现在这部分已经完成，您可以去定义一个实现此接口并可以在您的情况下使用的具体类：

```
class InMemoryDataSet implements IDataSet {
    private $_data = array();

    public function __construct(array $data) {
        $this->_data = $data;
    }

    public function getRowCount() {
        return count($this->_data);
    }

    public function getValueAt($row, $column) {
        if ($row >= $this->getRowCount()) {
            throw new OutOfRangeException();
        }

        return isset($this->_data[$row][$column])
            ? $this->_data[$row][$column]
            : null;
    }
} 
```

下一步是编写一些将输入数据转换为某种类型的代码`IDataSet`：

```
function CSVToDataSet($file) {
    return new InMemoryDataSet(array_map('str_getcsv', file($file)));
} 
```

现在您可以轻松地从 CSV 文件创建一个`IDataSet`，并且您知道您可以对其执行查询，因为它`IDataSet`是专门为此目的而设计的。您快到了。

唯一缺少的是创建一个可重用的类，该类可以在`IDataSet`. 这是其中之一：

```
class DataQuery {
    private $_dataSet;

    public function __construct(IDataSet $dataSet) {
        $this->_dataSet = $dataSet;
    }

    public static function getRowsWithDuplicates($columnIndex) {
        $values = array();
        for ($i = 0; $i < $this->_dataSet->getRowCount(); ++$i) {
            $values[$this->_dataSet->->getValueAt($i, $columnIndex)][] = $i;
        }

        return array_filter($values, function($row) { return count($row) > 1; });
    }
} 
```

此代码将返回一个数组，其中键是 CSV 数据中的值，值是数组，其中每个值出现的行的索引从零开始。由于只返回重复值，因此每个数组至少有两个元素。

所以此时你已经准备好了：

```
$dataSet = CSVToDataSet("data.csv");
$query = new DataQuery($dataSet);
$dupes = $query->getRowsWithDuplicates(0); 
```

### 你这样做的收获

干净、可维护的代码，支持将来修改，而无需在整个应用程序中进行编辑。

如果您想添加更多查询操作，请将它们添加到`DataQuery`您可以立即在所有具体类型的数据集上使用它们。数据集和任何其他外部代码不需要任何修改。

如果要更改数据的内部表示，请相应地修改`InMemoryDataSet`或创建另一个实现`IDataSet`并使用该类的类，而不是从`CSVToDataSet`. 查询类和任何其他外部代码不需要任何修改。

如果您需要更改数据集的*定义*（可能允许更有效地执行更多类型的查询），那么您必须修改`IDataSet`，这也将所有具体的数据集类都带入图片中，并且可能`DataQuery`也是如此。虽然这不会是世界末日，但这正是你想要避免的事情。

这正是我建议*从这个开始*的原因：如果您为数据集提出了一个好的定义，那么其他一切都会水到渠成。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-06T15:58:19.540

您实际上选择了一个不好的例子来学习 OOP。因为，您正在寻找“导入”和“搜索”文件的功能，最好以过程方式实现，而不是面向对象的方式。请记住，并非世界上的所有事物都是“对象”。除了对象，我们还有“过程”、“动作”等。你仍然可以用类来实现这个功能，实际上这是推荐的方式。但是，仅仅将一个功能放在一个类中并不会自动将它变成真正的 OOP。

我要说明的一点是，您可能难以理解 OOP 方面的此功能的原因之一是，它实际上并不是面向对象的性质。如果你熟悉Java Math类（PHP可能也有类似的东西），它有abs，log等b一堆方法/函数。这虽然是一个类，但在面向对象中并不是真正的类感觉。它只是一堆功能。

什么是面向对象意义上的真正的类？这是一个很大的话题，但至少有一个通用标准是它同时具有状态（属性/字段）和行为（方法），从而在行为和状态之间存在内在联系。如果是这样，例如，对方法的调用会访问状态（因为它们是如此紧密地联系在一起）。这是一个简单的 OOP 类：

```
Class person {

  // State
  name;
  age;
  income;

  // Behavior
  getName();
  setName()
  . 
  .
  .
  getMonthlyIncome() {
    return income / 12;
  }

} 
```

这是一个类，尽管它的外观（作为一个类）实际上是程序性的：

```
class Math {

  multiply(double x, double y) {
    return x * y;
  }

  divide(double x, double y) {
    return x / y;
   }

  exponentiate(double x, double y) {
     return x^y;
  } 
```

# java - 如何访问 NULL 值

> ID：13249019
> 
> 赞同：-1
> 
> 时间：2012-11-06T10:26:10.773
> 
> 标签：java, nullreferenceexception

```
while(i<word.length)
{
   ans=swn.extract(word[i], pos[i]);
   if(ans== null)
        polarvalue[i]= " ";
   else
        polarvalue[i]=ans;
   i++;
   System.out.println(ans);
} 
```

嗨，朋友，这是我的代码和 swn.extracts 一个可以为空的值，因此 ANS 包含空值，当我尝试访问它时会给出 NULlPOinterException 有什么方法可以检查 NULL 值并将其更改为任何其他价值。？但是如果我删除了整个 If..else 部分，它不会给出错误并在输出中打印“NULL”......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T10:58:49.870

> 如果我删除整个 If..else 部分，则代码将打印空值。

如果上述情况属实，则意味着您的`polarvalue[]`数组是`null`并且您正在尝试`ith`使用`polarvalue[i]`这种方式分配位置值，它会引发空指针异常。`polarvalue[]`在分配之前对数组进行空检查。

你的代码很危险，它似乎可以抛出`NPE`任何地方

```
while(i<word.length)   // do a null check
ans=swn.extract(word[i], pos[i]);  // do a null check
polarvalue[i]= " ";  // do a null check
polarvalue[i]=ans;  // do a null check 
```

做一个空检查将需要几分钟，但会减少您最宝贵的时间。

# c++ - 如何在 C++ 类中实例化对象？

> ID：13249023
> 
> 赞同：5
> 
> 时间：2012-11-06T10:26:14.190
> 
> 标签：c++, instantiation

出于 C++ 学习的目的，我有文件`class1.h`、`class1.cpp`和. 我想实例化一个名为inside的对象。我在哪里以及如何实例化这个对象？我是否在构造函数中实例化？`class2.h``class2.cpp``class1Obj``class2``classObj``class2`

过去我创建了一个指向类的指针，当时效果很好，但我认为指针不是我这次应该采取的路线，因为`classObj`只会在内部使用`class2`。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-06T10:33:40.720

```
class class1
{
   //...
};

class class2
{
   class1 member; 
   //...
}; 
```

在class2 ctor中，可以`member`在构造函数初始化列表中进行初始化。

```
class2::class2(...)
: member(...)
{
   //...
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-06T10:33:42.430

那么您过去是如何创建指针的呢？大概，你做了这样的事情：

```
class class2
{
  public:
    class2()
    {
      class1Pointer = new class1();
    }
    // Destructor, copy constructor/assignment, etc...
  private:
    class1* class1Pointer;
}; 
```

现在你想做同样的事情，但这次你不想要一个指向 的指针`class1`，你想要一个`class1`本身：

```
class class2
{
  public:
    class2() {}
    // Destructor, copy constructor/assignment, etc...
  private:
    class1 class1Obj;
}; 
```

创建对象时，该对象将被默认初始化`class2`。如果您的 class1 构造函数需要一些参数，请使用初始化列表：

```
class class2
{
  public:
    class2() : class1Obj(1, 2, 3) {}
    // Destructor, copy constructor/assignment, etc...
  private:
    class1 class1Obj;
}; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-06T13:05:35.193

在一个类中实例化一个类：

```
#include <iostream>
using namespace std;

class Foo 
{
 public:
     Foo(int i) 
     {

     }  
};

class Bar  
{     
  Foo i;  //<--- instantiate a class inside a class ----
  public:

  Bar() : i(1)  //<--- instantiate a class inside a class ----
  {

  }  
};

int main(void)
{

  Bar b;

  cout<<" \nPress any key to continue\n";
  cin.ignore();
  cin.get();

   return 0;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-06T10:35:06.180

这取决于您的 Class1。如果它的构造函数接受一些参数，那么您必须在 Class2 构造函数或初始化列表中显式初始化它。

```
Class2 {
public:

    class2() {
        //Here m_class1Obj will be instantiated
        m_class1Obj = Class1(/*some params*/);
    }

private:
    Class1 m_class1Obj;
}; 
```

或者

```
Class2 {
public:

    class2() : m_class1Obj() {}

private:
    Class1 m_class1Obj;
}; 
```

# jquery - 在 Bootstrap 中添加滚动时导航链接不活动

> ID：13249024
> 
> 赞同：0
> 
> 时间：2012-11-06T10:26:22.743
> 
> 标签：jquery, css, twitter-bootstrap, navigation, scroll

首先，我需要说我对 html/css 很陌生，并且对 js 和 jquery 知之甚少。

现在我的问题。我正在用 Bootstrap 完成一个网站，它有不同的容器可以向下滚动。我寻找了一个滚动 js 代码，它运行良好，但问题是导航链接不再活跃。我尝试过使用不同的滚动脚本和解决方案，但根据我的实际知识，我无法弄清楚如何解决它。同样，除了没有激活导航链接之外，该脚本工作正常，没有它，网络也可以正常工作。

这是我的导航 html：

```
<div class="navbar navbar-inverse navbar-fixed-top" id="navigation">
  <div class="navbar-inner">
    <div class="container-fluid">
      <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
        <span><i class="icon-reorder"></i></span>
      </button>
      <div class="nav-collapse collapse">
        <ul class="nav">
          <li class="active">
          <a href="#tebamar" title="tebamar" class="scroll-page"><i class="icon-home icon-white"></i> Tebamar</a>
          </li>
          <li class="#">
          <a href="#quien" title="quien" class="scroll-page"><i class="icon-group icon-white"></i> Nosotros</a>
          </li>
          <li>
            <a href="#que" title="que" class="scroll-page"><i class="icon-th icon-white"></i> Qué hacemos</a>
          </li>
          <li>
            <a href="#donde" title="donde" class="scroll-page"><i class="icon-map-marker icon-white"></i> Dónde</a>
          </li>
          <li>
            <a href="#como" title="como" class="scroll-page"><i class="icon-briefcase icon-white"></i> Cómo</a>
          </li>
          <li>
            <a href="#contacto" title="contacto" class="scroll-page"><i class="icon-envelope-alt icon-white"></i> Contacto</a>
          </li>
        </ul></div></div></div></div> 
```

这是我正在使用的脚本：

```
<script>
$(document).ready(function() {
// Smooth animation when page scrolls
$("a.scroll-page").scrollToSection()

/* Initialise Carausel */
$('.carousel').carousel();

/* Initialise Tooltip */
$('[rel="tooltip"]').tooltip(); 

 });

jQuery.fn.scrollToSection = function(settings) {

settings = jQuery.extend({
    speed : 1000
}, settings);   

return this.each(function(){
    var caller = this
    $(caller).click(function (event) {  
        event.preventDefault()
        var locationHref = window.location.href
        var elementClick = $(caller).attr("href")

        var destination = $(elementClick).offset().top;
        if(elementClick == "#home"){
            destination = 0;
        }
        $("html:not(:animated),body:not(:animated)").animate({ scrollTop:  destination}, settings.speed, function() {
            window.location.hash = elementClick;
        });
        return false;
    })
})
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T11:10:27.600

我不确定您到底想在这里做什么，但是要使导航链接处于活动状态，您可以使用这样的东西（[http://jsfiddle.net/wcRJQ/4/](http://jsfiddle.net/wcRJQ/4/)）：

```
$(".nav li").each(function()
{
    $(this).click(function(e) 
    {
        $(".nav .active").removeClass("active");
        $(this).addClass("active");
    })
}); 
```

# jenkins - 如何将 Jenkins 中的 SONAR 分析推迟到构建后操作中的最后一个操作？

> ID：13249032
> 
> 赞同：0
> 
> 时间：2012-11-06T10:27:04.457
> 
> 标签：jenkins, sonarqube, jenkins-plugins

我有一个`Ant-based`项目，我正在使用`Jenkins`. 如果我`Add standalone SONAR`从 ' ' 选项中添加 ' ' 分析`Add build steps`，它可以正常工作，但需要很长时间。问题是有一个`post-build custom step`在服务器上部署构建。由于声纳分析需要很长时间，`deployment has to wait till its complete`. 我可以以某种方式将 SONAR 分析推迟到部署完成后吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T10:28:13.627

为什么在儿童詹金斯工作中不进行声纳分析？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T12:03:11.677

您还可以在部署步骤之后将 Sonar 作为 POST 构建步骤运行。

# powershell - 使用 PowerShell 在每个子目录中运行命令

> ID：13249034
> 
> 赞同：10
> 
> 时间：2012-11-06T10:27:15.430
> 
> 标签：powershell

我想`mvn clean compile`在我的 Eclipse 工作区中包含一个`pom.xml`文件的每个目录中运行。

我能够`svn update`为每个包含`.svn`这样的目录运行：

```
PS C:\workspace> Get-ChildItem -recurse -force | 
where {$_.name -eq ".svn"} | 
foreach {svn update $_.parent.FullName} 
```

`svn`但是，这给出了当前目录的完整路径并从其运行。`mvn clean compile`需要在目录中运行，afaik 。尝试执行以下操作，但随后我收到一条错误消息，指出某些内容不能为空。似乎是`cd`它抱怨的第一个电话。我只是有一些语法错误，还是我使用`foreach`错误？

```
PS C:\workspace> Get-ChildItem -recurse | 
where {$_.name -eq "pom.xml"} | 
foreach { cd $_.parent.name; mvn clean compile; cd ..; } 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-06T12:28:22.273

似乎`$_.parent.FullName`属性在第一种情况下有效，因为我只过滤掉了目录。在这种情况下，我过滤掉了文件，所以我通过使用`$_.DirectoryName`来让它工作。

```
PS C:\workspace> Get-ChildItem -recurse | 
where {$_.name -eq "pom.xml"} | 
foreach { cd $_.DirectoryName; mvn clean compile; cd ..; } 
```

# c - 只读时的共享内存

> ID：13249037
> 
> 赞同：2
> 
> 时间：2012-11-06T10:27:22.687
> 
> 标签：c, shared-memory

我正在阅读[beej 的共享内存段指南](http://beej.us/guide/bgipc/output/html/multipage/shm.html)

最后他说：

更常见的是，一个进程将附加到该段并运行一段时间，而其他程序正在更改并读取共享段。观察一个进程更新段并看到更改出现在其他进程上是很不错的。同样，为简单起见，示例代码并没有这样做，但您可以看到数据是如何在独立进程之间共享的。

我的问题是：共享内存是只读的时候有必要吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T10:31:41.590

The main purpose of shared memory is the `Inter-process communication (IPC)`. But when you make shared memory `read only` the purpose is defeated.So at least there should be one process which can write into it and then you can make to READ ONLY for rest of the processes.

# c# - Web API 删除方法不起作用

> ID：13249039
> 
> 赞同：4
> 
> 时间：2012-11-06T10:27:30.317
> 
> 标签：c#, asp.net-mvc, asp.net-web-api

调用 DELETE 方法 Web API 未到达服务器。在网上搜索类似的问题后，非对我有用。下面是我的解决方案中的代码简介。

**网络接口：**

```
 [AuthorizeService]
    [HttpDelete]
    public HttpResponseMessage Delete(Int32 id)
    {
        String username = User.Identity.Name;
        this._clientDataManager.DeleteRestaurant(id,username);

        return new HttpResponseMessage(HttpStatusCode.OK);
    } 
```

**阿贾克斯调用：**

```
$.ajax({
    url: 'localhost:53378/api/RestaurantWebAPI/1135',
    type: "DELETE",
    statusCode: {
        200: function (data) {
            //success
        }
    }, beforeSend: setHeader
}); 
```

**网络配置：**

```
<system.webServer>
    <modules runAllManagedModulesForAllRequests="true">
    </modules>
    <validation validateIntegratedModeConfiguration="false" />
    <handlers>
        <remove name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" />
        <remove name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" />
        <remove name="ExtensionlessUrlHandler-Integrated-4.0" />
        <add name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness32" responseBufferLimit="0" />
        <add name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework64\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness64" responseBufferLimit="0" />
        <add name="ExtensionlessUrlHandler-Integrated-4.0" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0" />
    </handlers>

</system.webServer> 
```

感谢任何帮助。

* * *

## 回答 #1

> 赞同：-5
> 
> 时间：2012-11-06T10:45:25.363

好的让它工作，但不知何故，解决方案让我有点困惑。首先是解决方案，最终将以下内容添加到 WebApiConfig 文件中：

```
 config.Routes.MapHttpRoute(
       name: "DeleteApi",
       routeTemplate: "api/{controller}/Delete/{id}",
       defaults: new { name = RouteParameter.Optional }
   ); 
```

现在，当请求的类型设置为“DELETE”时，这不是 MVC 4 Web API 中的一个功能，用于将请求直接路由到 delete 方法吗？对此事的任何澄清都非常受欢迎。

# wcf - X.509 证书无法通过“FindBySubjectName”找到

> ID：13249041
> 
> 赞同：16
> 
> 时间：2012-11-06T10:27:46.523
> 
> 标签：wcf, ssl, certificate, x509certificate, wcf-security

在与 WCF Security 进行了一场残酷的斗争之后，我想我现在已经到了最后阶段，可以看到曙光了。

我的服务器上安装了一个客户端证书，现在按照建议位于证书存储的 Trusted People 文件夹中。

但是，当我尝试阅读证书申请 -> 服务时，我收到此错误：

> 无法使用以下搜索条件找到 X.509 证书：StoreName 'My'、StoreLocation 'CurrentUser'、FindType 'FindBySubjectName'、FindValue 'Forename Surname'。

“姓氏”是我证书的“颁发给”部分。在我看过的所有教程中，这只是一个词；这是问题吗？我从我的 CA 收到了我的证书，上面有这两个词，带有一个空格。

任何人都遇到过这个，有什么我公然做错了吗？

更新，证书可以在这里看到：

![在此处输入图像描述](../Images/2118e761e116369f732224cdc63c95af.png)

更新：

它变得更加奇怪：

我在我的 Web 服务器上安装了 Visual Studio，并使用以下代码通过 Thumbprint 获取证书：

```
var store = new X509Store(StoreName.TrustedPeople, StoreLocation.CurrentUser);
store.Open(OpenFlags.ReadOnly);
var certs = store.Certificates.Find(X509FindType.FindByThumbprint, "71995159BFF803D25BFB691DEF7AF625D4EE6DFB", false); 
```

这实际上返回了一个有效的结果。但是，当我将此信息放入我的服务/客户端的 web.config 时，我仍然收到错误消息。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-06T10:53:30.130

**我认为..您在Trusted People**位置安装了证书并在商店名称**my处搜索**

```
var store = new X509Store(StoreName.TrustedPeople, StoreLocation.CurrentUser);
store.Open(OpenFlags.ReadOnly);
var certs = store.Certificates.Find(X509FindType.FindBySubjectDistinguishedName, certificateSubject, false); 
```

还有两个搜索词`FindBySubjectName`or `FindBySubjectDistinguishedName`，后者与关键字更相关，第一个搜索关键字会找到任何内容。

所以基本上你需要寻找主题，如果你使用上面的代码，那么你的搜索字符串将是 .."CN=urs.microsoft.com, O=DO_NOT_TRUST, OU=Created by [http://fiddler2.com](http://fiddler2.com) "

![证书属性](../Images/3fe7adfc7f23fd070e3537ae87a26289.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-04-21T18:05:41.937

[https://i.stack.imgur.com/QtYvV.png](https://i.stack.imgur.com/QtYvV.png)

```
private X509Certificate2 GetCertificateFromStore()
        {
            var store = new X509Store(StoreName.My, StoreLocation.LocalMachine);
            store.Open(OpenFlags.ReadOnly);
            var certCollection = store.Certificates;
            var currentCerts = certCollection.Find(X509FindType.FindBySubjectDistinguishedName, "CN=sf.sandbox.mapshc.com", false);
                return currentCerts.Count == 0 ? null : currentCerts[0];
        } 
```

# sql - 关系 SQL 查询

> ID：13249048
> 
> 赞同：-2
> 
> 时间：2012-11-06T10:28:08.417
> 
> 标签：sql

有两个表通过不同的所谓 PK 建立关系。

```
Email     Gender  
a@a.cn    12345  
b@b.cn    12365

PK     String    
12345  MALE  
12365  FEMALE 
```

获取电子邮件和性别字符串的查询是什么样的？

```
 select 
  user.Email,
  users.Gender
from
  users,
values 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T10:30:49.953

你会想要`JOIN`两张桌子。我的建议是使用 ANSI`JOIN`语法，`INNER JOIN`或`LEFT JOIN`在表之间使用逗号代替，类似于：

```
select u.Email, v.String
from users u
inner join value v
   on u.Gender = v.PK 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/dd54d/2)

如果您对`JOIN`语法感到困惑，这里是[连接的一个很好的视觉解释](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T10:30:04.323

这就是你需要的。

```
select user.Email, gender.String
from user, gender
where user.Gender = gender.String 
```

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T10:31:01.053

您需要使用联接。

在**MySQL的情况下**

```
SELECT `user`.`Email`, `gender`.`String`
  FROM `user`, `gender`
  WHERE `user`.`Gender` = `gender`.`String` 
```

在**MSSQL的情况下**

```
SELECT user.Email, gender.String
  FROM user, gender
  WHERE user.Gender = gender.String 
```

### 输出：

```
+------------------+
| Email  |  Gender |
+------------------+
| a@a.cn | MALE    |
| b@b.cn | FEMALE  |
+------------------+ 
```

# sql-server - 数据库计算错误

> ID：13249054
> 
> 赞同：1
> 
> 时间：2012-11-06T10:28:32.987
> 
> 标签：sql-server

这是我正在设置的内容：

```
result = price / (case when tax = 0 then @tax1h / 100 else @tax2 / 100 end + 1) 
```

这些是值：

```
price = 17.5
tax = 1
tax2 = 6 
```

17.5 / (6 / 100 + 1) = 16.5

这将返回 17.5 为什么会发生这种情况以及如何解决？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T10:30:52.153

[整数除法](http://mathworld.wolfram.com/IntegerDivision.html)：

```
select (6 / 100 + 1) 
```

上面的结果是1。

然而，结果：

```
select (6 / 100.0 + 1) 
```

是 1.06。

# algorithm - Dijkstra：在有向图中查找最短路径

> ID：13249057
> 
> 赞同：1
> 
> 时间：2012-11-06T10:28:46.863
> 
> 标签：algorithm, data-structures, dijkstra

考虑下图所示的有向图。顶点 S 和 T 之间存在多条最短路径。Dijstra 的最短路径算法会报告哪一条？假设在任何迭代中，只有在发现到 v 的严格更短的路径时，才会更新到顶点 v 的最短路径。 ![在此处输入图像描述](../Images/f4a4bbfade4d3c6d8af1049f5e4e9723.png)

我的答案是 SBDT 但在解决方案中它给了 SACET 我不知道为什么..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T06:11:36.460

Dijkstra 算法选择节点如下：

```
B(3) from S
A(4) from S
C(5) from A
E(6) from C
D(7) from S or B
G(8) from E
T(10) from D or E 
```

因此，到 的最短路径`T`是或。`SBDT``SDT``SACET`

但是由于*`"the shortest path to a vertex v is updated only when a strictly shorter path to v is discovered"`*，当`E`被访问时，`T`的最短路径的先前节点将被设置为`E`并且不再改变。

因此答案是`SACET`。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-08T14:10:13.163

[在http://dracos.co.uk/maths/dijkstra/](http://dracos.co.uk/maths/dijkstra/)中运行它， 答案是 SDT。原因：在节点S之后，考虑它的直接邻居即：A(4),D(7),B(3) 现在考虑这些节点的直接邻居。我们在考虑节点 C 之前到达 SDT(10)，因为 C 不是 S 的直接邻居。答案：SDT

# qt - 返回一个派生的 QTreeWidgetItem

> ID：13249062
> 
> 赞同：0
> 
> 时间：2012-11-06T10:28:57.613
> 
> 标签：qt, qtreewidgetitem

我认为这不是关于特别是 Qt 的问题，而是缺乏编程经验的问题。

我从 QTreeWidgetItem 派生了一个类，并添加了一些布尔标志。当我初始化 QTreeWidget 时，我添加了其中的两个

```
_NewItem1=MyQTreeWidgetItem(_treewidget); 
```

后来我添加了一些项目

```
_NewItem1_1=MyQTreeWidgetItem(_NewItem1);
_NewItem1_1->boleanvalue1=true; 
```

如果我以后想退回这些物品，我会打电话

```
(MyQTreeWidgetItem)_NewItem1->child(i) 
```

但这当然只是返回一个带有新初始化的布尔标志的 MyQTreeWidgetItem 。

我是否必须重写子函数才能重新调整我之前初始化的真实项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T12:29:59.250

`_NewItem1->child(i)`返回指向 的指针`QTreeWidgetItem`，它是 的基类`MyQTreeWidgetItem`。你已经投是平安地`MyQTreeWidgetItem`，考虑到它也可能是真实的`QTreeWidgetItem`。这是通过C++ 中的[dynamic_cast实现的，它在运行时检查类型。](http://www.cplusplus.com/doc/tutorial/typecasting/)

```
QTreeWidgetItem *item = _NewItem1->child(i);
MyQTreeWidgetItem *myItem = dynamic_cast<MyQTreeWidgetItem>(item);
if (myItem) {
    qDebug() << myItem->boleanvalue1;
} else {
    qDebug() << item << "is not of type MyQTreeWidgetItem";
} 
```

另一方面，类型转换运算符`()`允许将任何类型转换为任何其他类型而无需任何检查，如果这种转换是可能的。例如，您已将指针转换`QTreeWidget`为类型的对象`MyQTreeWidgetItem`。对变量的后续访问将产生运行时错误或意外结果。

# file-upload - ColdFusion：上传的文件中没有收到数据

> ID：13249065
> 
> 赞同：1
> 
> 时间：2012-11-06T10:29:11.860
> 
> 标签：file-upload, coldfusion, coldfusion-8

我的错误报告告诉我，当用户尝试将空文件上传到我的服务器时发生错误（不要问用户为什么这样做 - 我不知道），现在我想捕获那个说“*不”的异常在上传的文件中收到数据*“。我想知道是否有比这样放置 a 更好的`<CFTRY>`方法`<CFFILE action="upload">`：

```
<CFTRY>
  <CFFILE action="upload" destination="#expandpath("upload")#" filefield="form.file" nameconflict="makeunique" />
  <CFCATCH>
    <!--- handle that error --->
  </CFCATCH>
</CFTRY> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T11:07:27.150

Try/Catch 是我通常处理它的方式。

```
<cftry>
    <cffile action="upload" ...>

    <cfcatch type="any">
        <cfif Find("Saving empty (zero-length) files is prohibited", CFCatch.Detail) GT 0>

            <!--- Create a zero length file on disk and continue processing as usual --->
            <cffile action="write" file="..." output="">
        <cfelse>
            <cfrethrow>
        </cfif>
    </cfcatch>
</cftry> 
```

# algorithm - 验证从应用程序到 Web 服务的答案，反之亦然

> ID：13249066
> 
> 赞同：0
> 
> 时间：2012-11-06T10:29:14.360
> 
> 标签：algorithm, web-services, security, verification

设想：

我的应用程序连接到 Web 服务（主服务器）。**有时我会在应用程序启动时进行诸如登录**之类的调用，其中我的应用程序将用户凭据发送到主服务器进行验证。

那么，我如何**首先**验证答案来自我的**真实**服务器，而不是带有路由主机文件的假本地网络服务器？**第二**我如何解析这个答案？

我总是这样解析（虚拟代码）：

```
if($answerFromWebserver == "LOGIN_OK") {
    doLogin();
} 
```

有没有更好、更安全的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T10:36:54.187

我看到/使用的一些安全功能，

1.  您可以允许特定 IP 访问服务器，可以为此设置防火墙。
2.  设置 SSL/HTTPS 将对安全传输级别大有裨益。
3.  您可以发送与每条消息一起加密的用户名/密码，因此每次都会在服务器端进行身份验证。您可以为此使用 SOAP 标头。

[您可以在此处](http://msdn.microsoft.com/en-us/library/ff648643.aspx)阅读 ms的有关保护服务的大量文章。

# linux - 管道重定向到外壳文件的限制？

> ID：13249069
> 
> 赞同：0
> 
> 时间：2012-11-06T10:29:29.053
> 
> 标签：linux, shell, freebsd, io-redirection

我正在尝试执行以下操作：

```
uname>>1.txt | echo #####>>1.txt | echo uname>>1.txt & 
```

获得以下输出：

```
uname
## ## ## ## ## 
```

Linux（或任何名称）

但相反，我得到的输出是： uname

但是，如果我尝试：

```
uname>>1.txt | echo uname>>1.txt & 
```

然后我得到以下输出：

```
uname

Linux 
```

想知道这种管道重定向是否有一些限制？

==================================================== ======================

我将从 tcl 脚本中调用这个 shell 命令。实际上有一个从 tcl 脚本中执行的命令列表，输出需要按以下方式格式化 <------->

我想在后台运行它们以减少执行时间，因为这些命令的输出彼此不相关。

我认为 () 中的命令会将格式化的输出输出到 1.txt 作为后台进程。

你会建议另一种方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T10:43:42.123

这里有很多问题。

1.  一般来说，将输出重定向和管道结合起来是个坏主意。一旦重定向，就没有任何东西可以管道了。
2.  管道到`echo`没有一点意义。
3.  使用括号将一组命令放在后台。
4.  你不应该把它放在后台。
5.  通常命令从左到右运行，而不是从右到左。

你想要的是

`(echo uname > 1.txt; echo ------ >>1.txt; uname >>1.txt)`

* * *

**更新**（根据问题的评论和更改）

您将继续使用此命令调用本质上未定义的行为：

> uname>>1.txt | 回声 unname>>1.txt &

来自的管道`uname`是无效的，因为一旦您重定向了输出，就没有任何东西可以管道了。管道`echo`无效，因为不从标准输入读取。哪个`uname`或`echo`命令首先将它的输出打印到文件`1.txt`中，这里有待讨论。这显然是你想要的：

> bash -c 'echo uname >> 1.txt; 回声 ------ >> 1.txt; unname >> 1.txt'

请注意`-c`选项`bash`。这告诉 bash 后面的参数`-c`是一个包含 shell 命令的字符串。

# c++ - 递归模板习语如何避免基类是子类的朋友

> ID：13249073
> 
> 赞同：2
> 
> 时间：2012-11-06T10:29:49.163
> 
> 标签：c++, templates, design-patterns, idioms, crtp

我使用[递归模板习语](https://stackoverflow.com/questions/10332725/how-to-automatically-register-a-class-on-creation)在工厂中自动注册基类的所有子类。然而，在我的设计中，子类必须将基类作为朋友类。由于我的基类的构造函数应该是私有的，以避免通过工厂以外的方式实例化此类。

总体目标是工厂的注册在 BaseSolver 中完成，并且 ChildClasses 不能通过工厂以外的方式实例化。

这是我的基类的代码，它自动在 SolverFactory 中注册所有子类。

```
template<class T>
struct BaseSolver: AbstractSolver
{
protected:
    BaseSolver()
    {
        reg=reg;//force specialization
    }
    virtual ~BaseSolver(){}
    /**
     * create Static constructor.
     */
    static AbstractSolver* create()
    {
        return new T;
    }

    static bool reg;
    /**
     * init Registers the class in the Solver Factory
     */
    static bool init()
    {
        SolverFactory::instance().registerType(T::name, BaseSolver::create);
        return true;
    }
};

template<class T>
bool BaseSolver<T>::reg = BaseSolver<T>::init(); 
```

这里是我的子类的头文件：

```
class SolverD2Q5 : public BaseSolver<SolverD2Q5>{

private:
  //how can I avoid this?
  friend class BaseSolver;

  SolverD2Q5();

  static const std::string name;

} 
```

这工作正常。但是我真的不喜欢将 BaseSolver 添加为友元类，但是我***不***希望构造函数和静态成员名称是公开的。

是否有更优雅的解决方案或更好的布局来避免这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-10T03:34:38.400

**更新：** 我相信这个技巧还没有被理解，因此我现在创建了完整的解决方案。这只是对 OP 代码的一点点改动。只需将 中的 T 替换为`BaseSolver`派生自 的空类定义`T`。

**原文：** 我认为您可以通过将友谊委托给基础 Solver 私有的包装类来做到这一点。该类将从要为其创建实例的任何类继承。编译器应该优化包装类。

```
#include <iostream>
#include <map>

struct AbstractSolver { virtual double solve() = 0; };

class SolverFactory
{
    std::map<char const * const, AbstractSolver * (*)()> creators;
    std::map<char const * const, AbstractSolver *> solvers;
public:
    static SolverFactory & instance()
    {
        static SolverFactory x;
        return x;
    }
    void registerType(char const * const name, AbstractSolver *(*create)())
    {
        creators[name] = create;
    }
    AbstractSolver * getSolver(char const * const name)
    {
        auto x = solvers.find(name);
        if (x == solvers.end())
        {
            auto solver = creators[name]();
            solvers[name] = solver;
            return solver;
        }
        else
        {
            return x->second;
        }
    }
};

template<class T> class BaseSolver : public AbstractSolver
{
    struct Wrapper : public T { // This wrapper makes the difference
        static char const * const get_name() { return T::name; }
    };
protected:
    static bool reg;
    BaseSolver() {
        reg = reg;
    }
    virtual ~BaseSolver() {}
    static T * create() {
        return new Wrapper; // Instantiating wrapper instead of T
    }
    static bool init()
    {
        SolverFactory::instance().registerType(Wrapper::get_name(), (AbstractSolver * (*)())BaseSolver::create);
        return true;
    }
};

template<class T>
bool BaseSolver<T>::reg = BaseSolver<T>::init();

struct SolverD2Q5 : public BaseSolver<SolverD2Q5>
{
public:   
    double solve() { return 1.1; }
protected: 
    SolverD2Q5() {} // replaced private with protected
    static char const * const name;
};
char const * const SolverD2Q5::name = "SolverD2Q5";

struct SolverX : public BaseSolver<SolverX>
{
public:    
    double solve() { return 2.2; }
protected: 
    SolverX() {} // replaced private with protected
    static char const * const name;
};
char const * const SolverX::name = "SolverX";

int main()
{
    std::cout << SolverFactory::instance().getSolver("SolverD2Q5")->solve() << std::endl;
    std::cout << SolverFactory::instance().getSolver("SolverX")->solve() << std::endl;
    std::cout << SolverFactory::instance().getSolver("SolverD2Q5")->solve() << std::endl;
    std::cout << SolverFactory::instance().getSolver("SolverX")->solve() << std::endl;

    char x;
    std::cin >> x;
    return 0;
} 
```

# delphi - Delphi如何完全删除代码完成？

> ID：13249079
> 
> 赞同：8
> 
> 时间：2012-11-06T10:30:23.527
> 
> 标签：delphi, ide, delphi-xe2, code-completion

每次按“。”时，我的 IDE 都会挂起几分钟，因为我在处理一个大项目。或按 CTRL+SPACE。

如果幸运的话，我会按时按 ESC 键，否则我必须等待 1 分钟，同时将头撞在桌子上。

我想完全禁用它，怎么办？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-06T11:25:06.240

Andreas Hausladen 的 IDE Fix Pack 解决了 Delphi IDE 中的几个性能问题

[http://andy.jgknet.de/blog/ide-tools/ide-fix-pack-2009-10/](http://andy.jgknet.de/blog/ide-tools/ide-fix-pack-2009-10/)

这就是其中之一。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-06T10:36:25.367

在搜索了第 10 次后，我找到了它：

工具 > 选项 > 编辑器选项 > 代码洞察

当你真的想在 UI 中找到某些东西时，很难找到它......

# c# - 用户控件可见属性何时影响其子级？

> ID：13249082
> 
> 赞同：2
> 
> 时间：2012-11-06T10:30:32.990
> 
> 标签：c#, asp.net, .net, vb.net, user-controls

我有一个包含其他控件的**ASP.NET userControl 。**有时，当更改用户控件的`visible`属性时，它确实会更改其子控件的可见值，但有时不会。

我认为这取决于页面生命周期中属性更改的那一刻，因为在`Page_PreRender`事件中更改时它似乎运行良好，但我遇到了一个不起作用的情况。

任何想法，关于我如何仅通过这个的 visible 属性影响用户控件的所有控件的可见性？我不想循环遍历所有的孩子来设置他们的 visbile 属性。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T13:42:51.397

它从不“影响”它的孩子。将父级设置为 false 不会更改`Visible`子级的属性。但是，在呈现页面时，如果将任何父对象设置为 false，则不会呈现任何子对象。在渲染过程和调试过程中，child的`Visible`属性仍然会显示为 true，但它永远不会渲染。

# php - Twitter API PHP 获取未验证的最新推文

> ID：13249083
> 
> 赞同：0
> 
> 时间：2012-11-06T10:30:35.827
> 
> 标签：php, api, twitter

我正在使用这段代码来尝试获取我所有的最新推文以在我的网站上打印，但它返回了一个关于未通过身份验证的错误。我在 Dev 部分创建了一个应用程序并获取了我的使用者和 OAuth 密钥，并将它们添加到代码中的正确位置。

```
 <?php
        function buildBaseString($baseURI, $method, $params) {
            $r = array();
        ksort($params);
        foreach($params as $key=>$value){
            $r[] = "$key=" . rawurlencode($value);
        }
        return $method."&" . rawurlencode($baseURI) . '&' . rawurlencode(implode('&', $r));
        }

        function buildAuthorizationHeader($oauth) {
        $r = 'Authorization: OAuth ';
        $values = array();
        foreach($oauth as $key=>$value)
            $values[] = "$key=\"" . rawurlencode($value) . "\"";
        $r .= implode(', ', $values);
        return $r;
        }

        $url = "https://api.twitter.com/1.1/statuses/user_timeline.json?screen_name=jameskrawczyk";
        $oauth_access_token = "SECURITY";
        $oauth_access_token_secret = "SECURITY";
        $consumer_key = "SECURITY";
        $consumer_secret = "SECURITY";

        $oauth = array( 'oauth_consumer_key' => $consumer_key,
                    'oauth_nonce' => time(),
                    'oauth_signature_method' => 'HMAC-SHA1',
                    'oauth_token' => $oauth_access_token,
                    'oauth_timestamp' => time(),
                    'oauth_version' => '1.0');

        $base_info = buildBaseString($url, 'GET', $oauth);
        $composite_key = rawurlencode($consumer_secret) . '&' .     rawurlencode($oauth_access_token_secret);
        $oauth_signature = base64_encode(hash_hmac('sha1', $base_info, $composite_key, true));
        $oauth['oauth_signature'] = $oauth_signature;

        $header = array(buildAuthorizationHeader($oauth), 'Expect:');
        $options = array( CURLOPT_HTTPHEADER => $header,
                      //CURLOPT_POSTFIELDS => $postfields,
                      CURLOPT_HEADER => false,
                      CURLOPT_URL => $url,
                      CURLOPT_RETURNTRANSFER => true,
                      CURLOPT_SSL_VERIFYPEER => false);

        $feed = curl_init();
        curl_setopt_array($feed, $options);
        $json = curl_exec($feed);
        curl_close($feed);
        $twitter_data = json_decode($json, true);
        foreach ($twitter_data as $elem)
        {
          print_r($elem);
          echo '<br>';
        } 
```

页面返回错误

```
Array ( [0] => Array ( [message] => Could not authenticate you [code] => 32 ) ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T10:36:41.050

答案似乎是那行

```
$url = "https://api.twitter.com/1.1/statuses/user_timeline.json?screen_name=jameskrawczyk"; 
```

最后不应该有`?screen_name=jameskrawczyk`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T10:36:55.070

> 您必须使用库从 twitter 获取数据
> “themattharris”是一个很好的著名库，从[这里下载](https://github.com/themattharris)

# php - 从 google map api 获取某个位置的机场附近的详细信息

> ID：13249084
> 
> 赞同：2
> 
> 时间：2012-11-06T10:30:36.237
> 
> 标签：php, google-maps, google-maps-api-3

我使用了来自谷歌地图的地理编码 API。在结果中提供位置详细信息，包括位置边界、国家和一些特定位置的详细信息（仅名称）。

例如我正在寻找城市“迪拜”的详细信息：

这是返回详细信息的链接[http://maps.googleapis.com/maps/api/geocode/xml?address=dubai&sensor=false](http://maps.googleapis.com/maps/api/geocode/xml?address=dubai&sensor=false)

但我需要靠近迪拜市的机场。

*另请注意，我将在 php 中编写代码。*

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-06T11:04:33.887

这将返回机场及其位置 + 视口

[http://maps.googleapis.com/maps/api/geocode/json?address=airport%20Dubai&sensor=false](http://maps.googleapis.com/maps/api/geocode/json?address=airport%20Dubai&sensor=false)

看看[https://developers.google.com/maps/documentation/geocoding/?hl=en](https://developers.google.com/maps/documentation/geocoding/?hl=en)`Address Component Types` _

# powershell - 限制 Get-ChildItem 递归深度

> ID：13249085
> 
> 赞同：83
> 
> 时间：2012-11-06T10:30:38.113
> 
> 标签：powershell

我可以使用以下命令递归地获取所有子项：

```
Get-ChildItem -recurse 
```

但是有没有办法限制深度？例如，如果我只想向下递归一两个级别？

* * *

## 回答 #1

> 赞同：113
> 
> 时间：2012-11-06T11:52:17.930

使用它来将深度限制为 2：

```
Get-ChildItem \*\*\*,\*\*,\* 
```

它的工作方式是返回每个深度 2,1 和 0 的孩子。

* * *

解释：

这个命令

```
Get-ChildItem \*\*\* 
```

返回深度为两个子文件夹的所有项目。添加 \* 添加一个额外的子文件夹进行搜索。

根据 OP 问题，要使用 get-childitem 限制递归搜索，您需要指定可以搜索的所有深度。

* * *

## 回答 #2

> 赞同：77
> 
> 时间：2016-01-25T22:46:24.867

[从 powershell 5.0](https://msdn.microsoft.com/en-us/powershell/reference/5.0/microsoft.powershell.management/get-childitem)开始，您现在可以`-Depth`使用`Get-ChildItem`!

您将它与`-Recurse`限制递归。

```
Get-ChildItem -Recurse -Depth 2 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-11-06T14:39:10.967

试试这个功能：

```
Function Get-ChildItemToDepth {
    Param(
        [String]$Path = $PWD,
        [String]$Filter = "*",
        [Byte]$ToDepth = 255,
        [Byte]$CurrentDepth = 0,
        [Switch]$DebugMode
    )

    $CurrentDepth++
    If ($DebugMode) {
        $DebugPreference = "Continue"
    }

    Get-ChildItem $Path | %{
        $_ | ?{ $_.Name -Like $Filter }

        If ($_.PsIsContainer) {
            If ($CurrentDepth -le $ToDepth) {

                # Callback to this function
                Get-ChildItemToDepth -Path $_.FullName -Filter $Filter `
                  -ToDepth $ToDepth -CurrentDepth $CurrentDepth
            }
            Else {
                Write-Debug $("Skipping GCI for Folder: $($_.FullName) " + `
                  "(Why: Current depth $CurrentDepth vs limit depth $ToDepth)")
            }
        }
    }
} 
```

[资源](http://www.indented.co.uk/index.php/2010/01/22/limit-recursion-depth-with-get-childitem/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-12T11:36:05.343

我尝试使用 Resolve-Path 限制 Get-ChildItem 递归深度

```
$PATH = "."
$folder = get-item $PATH 
$FolderFullName = $Folder.FullName
$PATHs = Resolve-Path $FolderFullName\*\*\*\
$Folders = $PATHs | get-item | where {$_.PsIsContainer} 
```

但这很好用：

```
gci "$PATH\*\*\*\*" 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-05-03T13:44:56.070

这是一个函数，每个项目输出一行，根据深度级别缩进。它可能更具可读性。

```
function GetDirs($path = $pwd, [Byte]$ToDepth = 255, [Byte]$CurrentDepth = 0)
{
    $CurrentDepth++
    If ($CurrentDepth -le $ToDepth) {
        foreach ($item in Get-ChildItem $path)
        {
            if (Test-Path $item.FullName -PathType Container)
            {
                "." * $CurrentDepth + $item.FullName
                GetDirs $item.FullName -ToDepth $ToDepth -CurrentDepth $CurrentDepth
            }
        }
    }
} 
```

它基于博客文章*[Practical PowerShell: Pruning File Trees and Extending Cmdlet](https://www.simple-talk.com/dotnet/.net-framework/practical-powershell-pruning-file-trees-and-extending-cmdlets/)*。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-01-07T22:05:37.633

@scanlegentil 我喜欢这个。
一点改进将是：

```
$Depth = 2
$Path = "."

$Levels = "\*" * $Depth
$Folder = Get-Item $Path
$FolderFullName = $Folder.FullName
Resolve-Path $FolderFullName$Levels | Get-Item | ? {$_.PsIsContainer} | Write-Host 
```

如前所述，这只会扫描指定的深度，所以这个修改是一个改进：

```
$StartLevel = 1 # 0 = include base folder, 1 = sub-folders only, 2 = start at 2nd level
$Depth = 2      # How many levels deep to scan
$Path = "."     # starting path

For ($i=$StartLevel; $i -le $Depth; $i++) {
    $Levels = "\*" * $i
    (Resolve-Path $Path$Levels).ProviderPath | Get-Item | Where PsIsContainer |
    Select FullName
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-12-13T11:19:13.447

$path = C:
$depth = 0 #, 0 是基数，1 个文件夹更深，2 个文件夹更深

Get-ChildItem -Path $path -Depth $depth | Where-Object {$_.Extension -eq ".extension"}

# wpf - EF 6 中的异步等待问题

> ID：13249086
> 
> 赞同：3
> 
> 时间：2012-11-06T10:30:39.113
> 
> 标签：wpf, entity-framework, async-await, entity-framework-6

我正在尝试使用实体框架 6（代码优先）+ WPF 进行异步等待编程，但我不明白为什么在我使代码异步后 UI 仍然冻结。这是我从第一行开始做的事情：

首先有一个响应点击按钮的事件处理程序：

```
private async void LoginButton_Click(object sender, RoutedEventArgs e) {
  if (await this._service.Authenticate(username.Text, password.Password) != null)
    this.Close();
} 
```

然后我的服务层中有 Authenticate 方法：

```
public async Task<User> Authenticate(string username, string password) {
  CurrentUser = await this._context.GetUserAsync(username.ToLower().Trim(), password.EncryptPassword());
  return CurrentUser;
} 
```

最后是上下文中的 EF 代码：

```
public async Task<User> GetUserAsync(string username, string password) {
  return await this.People.AsNoTracking().OfType<User>().FirstOrDefaultAsync(u => u.Username == username && u.Password == password);
} 
```

**更新：**经过一些跟踪，UI冻结的原因原来是初始化过程。UI 线程阻塞，直到 EF 上下文被初始化，一旦完成，实际的查询/保存过程就会异步执行。

**在单击处理程序开始处调用 Task.Yield() 后**更新调试输出：****

 **```
53:36:378 Calling Task.Yield
53:36:399 Called Task.Yield
53:36:400 awaiting for AuthenticateAsync
53:36:403 awaiting for GetUserAsync
'MyApp.vshost.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\Microsoft.Net\assembly\GAC_32\System.Transactions\v4.0_4.0.0.0__b77a5c561934e089\System.Transactions.dll', Skipped loading symbols. Module is optimized and the debugger option 'Just My Code' is enabled.
'MyApp.vshost.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\Microsoft.Net\assembly\GAC_MSIL\System.Numerics\v4.0_4.0.0.0__b77a5c561934e089\System.Numerics.dll', Skipped loading symbols. Module is optimized and the debugger option 'Just My Code' is enabled.
'MyApp.vshost.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\Microsoft.Net\assembly\GAC_32\System.Data.OracleClient\v4.0_4.0.0.0__b77a5c561934e089\System.Data.OracleClient.dll', Skipped loading symbols. Module is optimized and the debugger option 'Just My Code' is enabled.
'MyApp.vshost.exe' (Managed (v4.0.30319)): Loaded 'D:\SkyDrive\Works\MyApp\MyApp.UI.WPF.Shell\bin\Debug\EntityFramework.SqlServer.dll'
'MyApp.vshost.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\Microsoft.Net\assembly\GAC_32\System.EnterpriseServices\v4.0_4.0.0.0__b03f5f7f11d50a3a\System.EnterpriseServices.dll', Skipped loading symbols. Module is optimized and the debugger option 'Just My Code' is enabled.
'MyApp.vshost.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\Microsoft.Net\assembly\GAC_32\System.EnterpriseServices\v4.0_4.0.0.0__b03f5f7f11d50a3a\System.EnterpriseServices.Wrapper.dll', Skipped loading symbols. Module is optimized and the debugger option 'Just My Code' is enabled.
'MyApp.vshost.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\Microsoft.Net\assembly\GAC_MSIL\System.Runtime.Serialization\v4.0_4.0.0.0__b77a5c561934e089\System.Runtime.Serialization.dll', Skipped loading symbols. Module is optimized and the debugger option 'Just My Code' is enabled.
'MyApp.vshost.exe' (Managed (v4.0.30319)): Loaded 'EntityFrameworkDynamicProxies-MyApp.Model.Domain.People'
'MyApp.vshost.exe' (Managed (v4.0.30319)): Loaded 'EntityFrameworkDynamicProxies-MyApp.Model.Domain.Security'
53:39:965 Out of GetUserAsync
53:39:968 out of AuthenticateAsync
The thread '<No Name>' (0x1e98) has exited with code 0 (0x0).
The thread '<No Name>' (0x17d4) has exited with code 0 (0x0).
The thread '<No Name>' (0x175c) has exited with code 0 (0x0).
The thread '<No Name>' (0x220) has exited with code 0 (0x0).
The thread '<No Name>' (0x1dc8) has exited with code 0 (0x0).
The thread '<No Name>' (0x1af8) has exited with code 0 (0x0). 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T13:37:19.393

标记为“异步”的方法在第一次“等待”发生之前仍然是同步的。因此，如果该初始代码中发生的任何事情花费的时间太长（我认为 WinRT 的指导方针是 200 毫秒或更多，这似乎是合理的），那么您可能希望通过提前插入等待来强制代码更快地返回。

例如，在您的 LoginButton_Click 中，您可以插入第一行“await [Task.Yield](http://msdn.microsoft.com/en-us/library/system.threading.tasks.task.yield.aspx) ()”，这将允许调用更快地返回 UI 线程。

现在，仅通过该更改，由于异步/等待行为，这些方法仍将在 UI 线程上运行。我仍然喜欢首先进行更改，因为在许多情况下，这是用户实际期望发生的事情（'async' 修饰符在这方面有点令人困惑），并且您可以在处理程序开始时执行此操作而不必搞砸随着事情的发展。

如果上述内容不足（例如上下文初始化花费的时间太长，仍然发生在 UI 线程上，并且仍然冻结 UI，只是在稍微不同的时间点），我们可以做的下一步是采取那些不这样做的部分不需要在 UI 线程上发生，并让 await 知道它们可以在任何线程上处理，而不仅仅是 UI 线程。对于响应能力而言，这通常是一个很好的做法，即使在代码当前运行“足够快”而不会成为明显问题的情况下也是如此。

为此，我们使用将[ConfigureAwait](http://msdn.microsoft.com/en-us/library/system.threading.tasks.task.configureawait.aspx) (false) 添加到任务。

*   GetUserAsync 方法应该在 FirstOrDefaultAsync 调用之后添加它（“链”它）
    *   或者，恕我直言，稍微干净一点，就是去掉 GetUserAsync 方法中的 async/await 关键字，只返回从 FirstOrDefaultAsync 返回的任务。在这种方法中，异步/等待并没有真正“购买”你任何东西，恕我直言：)
*   在 Authenticate 中，您可能应该在 GetUserAsync 调用之后添加它
    *   我不确定的一个潜在“问题”是 CurrentUser 是否数据绑定到 UI 中。由于它是 _service 的成员，我猜它不是，但即使是，我*认为*WPF 可以很好地处理在非 UI 线程上更新的数据绑定项，并且它处理将更改封送回 UI （调度员？）线程。这与 Silverlight 等框架不同，在 Silverlight 等框架中，更新数据绑定到 UI 的非 UI 上的属性将导致与手动更新目标控件相同的跨线程故障。如果我对此有误，并且 1) CurrentUser 是数据绑定到您的 UI*和*2) 非 UI 线程上的数据绑定更新导致运行时异常，则避免在此方法中添加 ConfigureAwait(false)。很抱歉这篇文章的长度，只是想把我对这个特定修改有点不确定的地方联系起来。:)
*   在 LoginButton_Click 中，我们不应该*添加*它，因为方法的其余部分 (this.Close) 需要在 UI 线程上发生，而这里的 ConfigureAwait(false) 会破坏它

一旦完成这两项更改，您将 1) 尽快将控制权返回给调用者（与事件处理程序同步的代码量最少）和 2) 做不需要的工作在其他线程上的 UI 线程上，这应该意味着您的 UI 不再“冻结”。

如果在这些更改之后它仍然冻结，您可能只需要在调试器下运行它，当它冻结时，break 以查看 UI 线程的堆栈是什么来找到有问题的代码。:)

祝你好运！**

# magento - 如何为 adminhtml 设置付款 info.phtml

> ID：13249087
> 
> 赞同：1
> 
> 时间：2012-11-06T10:30:38.980
> 
> 标签：magento, magento-1.6

如何为 adminhtml 设置付款 info.phtml ...

像为前端设置......这样的东西

```
class Ks_Gippayment_Block_Info extends Mage_Payment_Block_Info
{

protected function _construct()
{
    parent::_construct();
    $this->setTemplate('ks/info.phtml');
} 
```

感谢：D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T12:59:20.060

这段代码也将完成 adminhtml 的工作。只需确保存在以下模板：

```
app/design/adminhtml/base/default/template/ks/info.phtml 
```

# iphone - 从 UITableViewController 加载通用视图

> ID：13249095
> 
> 赞同：1
> 
> 时间：2012-11-06T10:31:11.527
> 
> 标签：iphone, objective-c, view

`.xib`这是我的问题：我用一些标签创建了一个。我创建了一个`UITableViewController`这样的：

```
- (void)viewDidLoad {
    [super viewDidLoad];
     dataToShow = [[NSArray alloc] initWithObjects:@"cave",@"garage",nil];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
    }

    cell.textLabel.text = [dataToShow objectAtIndex:indexPath.row];

    return cell;
} 
```

和正确填写`numberOfSectionInTableView`，`numberOfRowInSection`当运行程序时，列表显示为它应该。我现在想根据用户在表格视图中单击的行来加载我创建的 xib 并用文本填充标签。这可能吗？如果是，我该如何解决？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T10:46:36.907

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    yourNextViewController *nextViewXib = [[yourNextViewController alloc]initWithNibName:@"yourNextViewController" bundle:nil];
     nextViewXib.yourLable.text=[dataToShow objectAtIndex:indexPath.row];
    [self.navigationController pushViewController:nextViewXib animated:YES];
    [nextViewXib release];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T10:37:48.363

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{

 NSLog(@"selected row:%d",indexPath.row);
}

 //in this mathod you get will row is calling.. 
```

# php - Show website activities on Facebook timeline?

> ID：13249096
> 
> 赞同：1
> 
> 时间：2012-11-06T10:31:12.200
> 
> 标签：php, facebook-timeline

How can I show website activity on the Facebook timeline?

I integrated Facebook API and [Facebook Connect](http://en.wikipedia.org/wiki/Facebook_Platform#Facebook_Connect). Now, if any new user uploads a video on the website then I want to display this activity on the Facebook log. What function of Facebook API can I use for this?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T10:49:50.453

您应该使用 Open Graph 操作和对象。我建议您创建：

*   视频对象
*   “上传”动作以及利用内置“观看”动作

这里有一个完整且非常有用的[教程](https://developers.facebook.com/docs/opengraph/tutorial/)。需要考虑的事项：

*   您需要向`publish_actions`您网站的用户请求许可，如果您已经在使用 Facebook 登录，那么只需将其添加到您请求的权限列表中即可
*   为每个上传的新视频发布上传操作，确保您得到用户的明确同意，以便您可以使用该`fb:explicitly_shared`参数。
*   对人们在您的网站上观看的任何视频使用观看操作。

# java - 忽略正则表达式中的换行符？

> ID：13249099
> 
> 赞同：5
> 
> 时间：2012-11-06T10:31:23.510
> 
> 标签：java, regex

我在文本文件中有以下内容

```
 some texting content <img  src="cid:part123" alt=""> <b> Test</b> 
```

我从文件中读取它并将其存储在字符串中，即 inputString

```
 expectedString = inputString.replaceAll("\\<img.*?cid:part123.*?>",
    "NewContent"); 
```

我得到预期的输出，即

```
 some texting content NewContent <b> Test</b> 
```

基本上，如果在 img 和 src 之间有行尾字符，如下所示，它不起作用，例如下面

```
 <img  
          src="cid:part123" alt=""> 
```

有没有办法正则表达式在匹配时忽略行尾字符？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-06T10:37:26.853

如果你也想`dot (.)`匹配`newline`，你可以使用[`Pattern.DOTALL`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#DOTALL)标志。或者，在 的情况下`String.replaceAll()`，您可以`(?s)`在模式的开头添加一个，这相当于这个标志。

来自[`Pattern.DOTALL`-JavaDoc](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#DOTALL)：-

> **Dotall**模式也可以通过嵌入式标志表达式*(?s)*启用。（*s*是“单行”模式的助记符，在 Perl 中就是这样称呼的。）

因此，您可以像这样修改您的模式：-

```
expectedStr = inputString.replaceAll("(?s)<img.*?cid:part123.*?>", "Content"); 
```

**注意： -**你不需要逃避你的`angular bracket(<)`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T10:37:07.990

默认情况下，该`.`字符将不匹配换行符。[`Pattern.DOTALL`您可以通过指定标志](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#DOTALL)来启用此行为。在`String.replaceAll()`中，您可以通过将 a 附加`(?s)`到模式的前面来做到这一点：

```
expectedString = inputString.replaceAll("(?s)\\<img.*?cid:part123.*?>", 
    "NewContent"); 
```

另请参见[Pattern.DOTALL 和 String.replaceAll](https://stackoverflow.com/questions/6500036/pattern-dotall-with-string-replaceall)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T10:36:08.757

您需要使用[`Pattern.DOTALL`](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html#DOTALL)模式。

`replaceAll()`不将模式标志作为单独的参数，但您可以在表达式中启用它们，如下所示：

```
expectedString = inputString.replaceAll("(?s)\\<img.*?cid:part123.*?>", ...); 
```

但是请注意，使用正则表达式解析 HTML 并不是一个好主意。最好使用 HTML 解析器。

# c# - How to set subject and message part in email with attachment while share charm usage in XAML/C# Windows store app

> ID：13249102
> 
> 赞同：1
> 
> 时间：2012-11-06T10:31:38.133
> 
> 标签：c#, xaml, microsoft-metro, windows-runtime, share

my app has share charm. It is used to share files and rich text. I have set `Title` (TextBlock) and `Description` (RichEditBox) properties and used `SetStorageItems()` & `SetRtf()` methods to share files of class [`DataPackage`](http://msdn.microsoft.com/en-us/library/windows/apps/br205873.aspx), but while using mail app in share charm the `Title` should be fill as subject and the `Description` should be set as body of email but it is not working, please help me.

If I use only `SetText()` then it sets automatically.

PS : Here the [sample](http://code.msdn.microsoft.com/windowsapps/Sharing-Content-Source-App-d9bffd84) for sharing source content

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T07:23:39.483

尚不支持此功能。没有共享结构化电子邮件表单的标准方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T18:34:20.250

我认为微软的默认邮件应该升级。如果共享体验是最好的，那么用户将使用默认邮件应用程序，否则他们将使用另一个邮件应用程序。

# javascript - Cursor:pointer not working on input type file

> ID：13249103
> 
> 赞同：5
> 
> 时间：2012-11-06T10:31:39.920
> 
> 标签：javascript, jquery, html, css

> **Possible Duplicate:**
> [Change cursor type on input type=“file”</a>](https://stackoverflow.com/questions/1537223/change-cursor-type-on-input-type-file)
> 
> [](https://stackoverflow.com/questions/1537223/change-cursor-type-on-input-type-file)

 [This is my jsfiddle:](https://stackoverflow.com/questions/1537223/change-cursor-type-on-input-type-file) 

[http://jsfiddle.net/3zNMK/](http://jsfiddle.net/3zNMK/)

This class already has a cursor but not working:

```
.file
{
    cursor:pointer;
} 
```

I want that even though a hover is made on textbox inside input type file, it should change to hand icon. But it is not working.

Any way to change this behavior?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T10:41:19.150

尝试一些这样的操作

**HTML**

```
<span class="file-wrapper">
  <input type="file" name="photo" id="photo" />
  <span class="button">Choose a File</span>
</span> 
```

**​CSS**

 **```
.file-wrapper {
  cursor: pointer;
  display: inline-block;
  overflow: hidden;
  position: relative;
}
.file-wrapper input {
  cursor: pointer;
  font-size: 100px;
  filter: alpha(opacity=1);
  -moz-opacity: 0.01;
  opacity: 0.01;
  position: absolute;
  right: 0;
  top: 0;
}
.file-wrapper .button {
  background: #333;
  -moz-border-radius: 5px;
  -webkit-border-radius: 5px;
  border-radius: 5px;
  color: #fff;
  cursor: pointer;
  display: inline-block;
  font-size: 11px;
  font-weight: bold;
  margin-right: 5px;
  padding: 4px 18px;
  text-transform: uppercase;
}
​ 
```

**[演示](http://jsfiddle.net/3zNMK/21/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T10:36:19.203

`cursor:hand`IE6 等少数老浏览器都能理解。`cursor:pointer`而是用户

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T10:35:07.053

你用`cursor:hand;`你的小提琴，这是过时的。

如果你使用`cursor:pointer;`，当你悬停输入时会出现手形光标。**

# python - Efficient & pythonic check for singular matrix

> ID：13249108
> 
> 赞同：36
> 
> 时间：2012-11-06T10:31:43.860
> 
> 标签：python, numpy, linear-algebra

Working on some matrix algebra here. Sometimes I need to invert a matrix that may be singular or ill-conditioned. I understand it is pythonic to simply do this:

```
try:
    i = linalg.inv(x)
except LinAlgErr as err:
    #handle it 
```

but am not sure how efficient that is. Wouldn't this be better?

```
if linalg.cond(x) < 1/sys.float_info.epsilon:
    i = linalg.inv(x)
else:
    #handle it 
```

Does numpy.linalg simply perform up front the test I proscribed?

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-07T13:26:47.363

因此，根据此处的输入，我将使用显式测试标记我的原始代码块作为解决方案：

```
if linalg.cond(x) < 1/sys.float_info.epsilon:
    i = linalg.inv(x)
else:
    #handle it 
```

令人惊讶的是， numpy.linalg.inv 函数不执行此测试。我检查了代码，发现它经历了所有的阴谋，然后只调用了 lapack 例程——似乎效率很低。此外，我要第二点 DaveP 提出的观点：除非明确需要，否则不应计算矩阵的逆矩阵。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-11-07T07:20:51.840

您的第一个解决方案捕获了矩阵如此奇异以至于 numpy 根本无法应对的情况 - 可能是一个非常极端的情况。您的第二个解决方案更好，因为它捕捉到了 numpy 给出答案的情况，但该答案可能被舍入错误破坏 - 这似乎更明智。

如果您试图反转病态矩阵，那么您应该考虑使用[奇异值分解](http://en.wikipedia.org/wiki/Singular_value_decomposition)。如果仔细使用，它可以在其他例程失败的情况下给你一个明智的答案。

如果您不想要 SVD，请参阅我关于使用 lu_factor 而不是 inv 的评论。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-06T13:55:05.570

您应该计算矩阵的[条件数](http://en.wikipedia.org/wiki/Condition_number)以查看它是否可逆。

```
import numpy.linalg

if numpy.isfinite(numpy.linalg.cond(A)):
    B = numpy.linalg.inv(A)
else:
    # handle it 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-09T07:54:29.293

检查行列式是否非零（但要小心，请参阅下面的注释）：

```
det = numpy.linalg.det(A)
if not numpy.isclose(det, 0):
   #proceed 
```

# php - 在 tpl 文件中使用 base64_encode

> ID：13249113
> 
> 赞同：0
> 
> 时间：2012-11-06T10:31:57.120
> 
> 标签：php, base64, smarty

我是聪明的新手，并试图在其中做点什么。

现在，我的 login.tpl（智能模板）文件中有以下代码

```
<input type="hidden" name="redirectTo" value="{$smarty.get.redirectTo}" /> 
```

根据我的一点理解，无论来自 url 的 GET 数据被放入隐藏字段的值中。

现在，我想使用 base64_encode 函数对这个 url 数据进行编码。但是我如何使用 base64_encode 对其进行编码，因为它不是 php 代码。我也试过这样：

```
{base64_encode($smarty.get.redirectTo)} 
```

但这不起作用。

需要帮忙...

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T22:09:56.513

你也可以在 PHP 中创建 $smarty 类的地方创建一个修饰符：

`$smarty->registerPlugin("modifier",'base64_encode', 'base64_encode');`

然后在 TPL 中调用它：

`{$string_to_encode|base64_encode}`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T11:06:49.227

您可以在之前将输出分配给 smarty 变量

```
$smarty->assign('yourVarforsmarty', base64_encode($yourVar)); 
```

而不是在 smarty 模板中简单地使用

```
{$yourVarforsmarty} 
```

或者

像这样调用php函数

```
{php} 
  $temp = base64_encode($smarty.get.redirectTo); 
{/php}

<input type="hidden" name="redirectTo" value="{$temp}" /> 
```

# python - 通过保留引用子字符串的空格将字符串拆分为 N 个元素

> ID：13249121
> 
> 赞同：3
> 
> 时间：2012-11-06T10:32:30.320
> 
> 标签：python

我想通过空格将一个字符串拆分为 3 个元素，但我不希望引用的子字符串被拆分（它们也可以包含反斜杠来转义引号）。

例如：

```
"command argument other arguments and options"
>> ['command', 'argument', 'other arguments and options']

'command "my argument" other arguments and options'
>> ['command', 'my argument', 'other arguments and options']

'command "my \"ugly\" argument" other "arguments" and options'
>> ['command', 'my "ugly" argument', 'other "arguments" and options'] 
```

我看过这个[类似的问题](https://stackoverflow.com/questions/79968/split-a-string-by-spaces-preserving-quoted-substrings-in-python)，但`shlex.split()`也会拆分字符串的结尾（它会删除引号和空格），而我想保持第三个元素完整。

我尝试使用`shlex.split(mystring)[0:2]`以获得前两个元素，但后来我无法找到一个好的解决方案来从原始字符串中提取第三个元素。实际上，我希望我可以使用带参数`shlex.split()`的方法。`str.split()``maxsplit`

有没有比使用更好的方法来做到这一点`shlex.split()`？也许正则表达式？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T10:39:13.807

您应该能够通过访问`shlex`对象的解析器状态来破解解决方案：

```
>>> import shlex
>>> s = shlex.shlex("command 'my \'ugly\' argument' other \"arguments\" and options", posix=True)
>>> s.whitespace_split = True
>>> s.commenters = ''
>>> next(s)
'command'
>>> next(s)
'my ugly argument'
>>> s.instream.read()
'other "arguments" and options' 
```

请参阅[shlex.py](http://hg.python.org/cpython/file/tip/Lib/shlex.py#l271)模块源代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T10:34:46.290

为什么不重新加入剩余的论点，用`shlex`?

```
command = command[:2] + [' '.join(command[2:])] 
```

或者，您必须自己驱动`shlex.shlex()`实例：

```
>>> import shlex
>>> input = "command 'my \'ugly\' argument' other \"arguments\" and options"
>>> lex = shlex.shlex(input, posix=True)
>>> lex.whitespace_split=True
>>> lex.commenters = ''
>>> command = [lex.next(), lex.next(), lex.instream.read()]
>>> command
['command', 'my ugly argument', 'other "arguments" and options'] 
```

该`.instream`属性是保存被解析文本的类文件对象，因此将包含解析前两个参数后的剩余部分。

不过，您可能需要访问 pushback 状态，其中词法分析器存储了它查看但当前令牌不需要的令牌：

```
>>> command = [lex.next(), lex.next(), ''.join(list(lex.pushback)) + lex.instream.read()] 
```

# c++ - code example "switch" (b.eckel) doesn't buil/run on Xcode but build/run on QT

> ID：13249126
> 
> 赞同：0
> 
> 时间：2012-11-06T10:32:59.133
> 
> 标签：c++, switch-statement, case

This code is ok on QT SDK (installed on Windows) but reports expected expression error on Xcode 4 (Mac).

```
#include <iostream>
using namespace std;
int main() {
    bool quit = false; // Flag for quitting
    while(quit == false) {
        cout << "Select a, b, c or q to quit: ";
        char response;
        cin >> response;
        switch(response) {
        case 'a' :
            cout << "you chose 'a'" << endl;
            break;
        case 'b' :
            cout << "you chose 'b'" << endl;
            break;
        case 'c' :
            cout << "you chose 'c'" << endl;
            break;
        case 'q' :
            cout << "quitting menu" << endl;
            quit = true;
            break;
        default :
            cout << "Please use a,b,c or q!" << endl;
        }
    }
} ///:~ 
```

The error is displayed on default instruction: "expected expression".

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T10:56:08.267

我解决了这个问题，但我不明白它的根源。假设从 Eckel 关于 QT sdk 的书中复制的代码没有出错，我尝试删除第一个闭合花括号之前的一些空格，因此我也在 Xcode 平台上成功构建/运行。是不是很奇怪？Boh SW的奥秘。

# android - 使用 sqlite 数据库时 close() 游标和数据库

> ID：13249129
> 
> 赞同：2
> 
> 时间：2012-11-06T10:33:09.290
> 
> 标签：android, database, sqlite, cursor

在我的应用程序中`sqlite Database`，当我运行应用程序 Logcat 时显示我

```
close() was never explicitly called on database '/data/data/com.MAT.CanadaImmigrationApp/databases/CanadaianImmigrationApp' 
E/Database(13822): android.database.sqlite.DatabaseObjectNotClosedException: Application did not close the cursor or database object that was opened here 
```

我在谷歌上搜索，我发现

```
db.close();  // to close your Database,
cur.close();     //to close your cursor 
```

但是我不知道在哪里添加此代码？

**DbHelper.class**

```
public class DbHelper extends SQLiteOpenHelper {
// Database attributes

public static final String DB_NAME = "DB_NAME";
public static final int DB_VERSION = 1;

public static final String TABLE_QUESTIONS = "Questions_Answers";
public static final String COLUMN_CHAPTERS = "Chapters";
public static final String COLUMN_QUESTIONS = "Question";
public static final String COLUMN_CORRECT_ANSWER = "Correct_Answer";
public static final String COLUMN_OPT1 = "Answer1";
public static final String COLUMN_OPT2 = "Answer2";
public static final String COLUMN_OPT3 = "Answer3";

public DbHelper(Context context) {
    super(context, DB_NAME, null, DB_VERSION);
}

@Override
public void onCreate(SQLiteDatabase db) {

    String createTable = "create table if not exists " + TABLE_QUESTIONS + " ( " + BaseColumns._ID + " integer primary key autoincrement, " 
                                                            + COLUMN_CHAPTERS + " text not null, "
                                                            + COLUMN_QUESTIONS + " text not null, "
                                                            + COLUMN_CORRECT_ANSWER + " text not null, "
                                                            + COLUMN_OPT1 + " text not null, "
                                                            + COLUMN_OPT2 + " text not null, "
                                                            + COLUMN_OPT3 + " text not null);";

    // Execute a single SQL statement that is NOT a SELECT or any other SQL statement that returns data.
    db.execSQL(createTable);
}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    db.execSQL("DROP TABLE IF EXISTS "+ TABLE_QUESTIONS);
    onCreate(db);
} 
```

}

**Db_Adapter.class**

```
 public class Db_Adapter  {

public static final String TABLE_QUESTIONS = "Questions_Answers";
public static final String COLUMN_CHAPTERS = "Chapters";
public static final String COLUMN_QUESTIONS = "Question";
public static final String COLUMN_CORRECT_ANSWER = "Correct_Answer";
public static final String COLUMN_OPT1 = "Answer1";
public static final String COLUMN_OPT2 = "Answer2";
public static final String COLUMN_OPT3 = "Answer3";

public static  SQLiteDatabase databasesql;
private  DbHelper Android_OpenDb_Helper;
private   Context mycontext;

public static List<String> question_Set;
public static List<String> Answers_Set;
public static List<String> Option1;
public static List<String> Option2;
public static List<String> Option3;

public Db_Adapter( Context context)
{
    this.mycontext =context;
}
public void close() {
    Android_OpenDb_Helper.close();
  }

public DbHelper createDatabase()
{
    Android_OpenDb_Helper = new DbHelper(mycontext);
    databasesql = Android_OpenDb_Helper.getWritableDatabase();
    return Android_OpenDb_Helper;

} 

public long addToDB(String chapters, String question,
        String correctAnswer, String answer1, String answer2, String answer3)
{
    return databasesql.insert(TABLE_QUESTIONS,null, createContentValues(chapters,question,correctAnswer,answer1,answer2,answer3));
} 

  private ContentValues createContentValues(String chapters, String question,
        String correctAnswer, String answer1, String answer2, String answer3)
{
    ContentValues myContentVal =  new ContentValues();
    myContentVal.put(COLUMN_CHAPTERS, chapters);
    myContentVal.put(COLUMN_QUESTIONS, question);
    myContentVal.put(COLUMN_CORRECT_ANSWER, correctAnswer);
    myContentVal.put(COLUMN_OPT1, answer1);
    myContentVal.put(COLUMN_OPT2, answer2);
    myContentVal.put(COLUMN_OPT3, answer3);

    return myContentVal;
} 

public Cursor readData()
{
    return databasesql.query(TABLE_QUESTIONS, new String[]{COLUMN_CHAPTERS,COLUMN_QUESTIONS,COLUMN_CORRECT_ANSWER,COLUMN_OPT1,COLUMN_OPT2,COLUMN_OPT3}, null, null, null, null, null);
}

public Cursor getQuestion()
{
    return databasesql.query(TABLE_QUESTIONS, new String[]{COLUMN_QUESTIONS}, null, null, null, null, null); 
}

public Cursor getQuizQuestions(int numQ)
{
    return databasesql.rawQuery(
            "select * from "+ TABLE_QUESTIONS +" ORDER BY RANDOM() LIMIT "
                    + numQ, null);
}

public List<String> getQuestions(String difficulty) {

    question_Set = new ArrayList<String>();
    Answers_Set = new ArrayList<String>();

    Option1= new ArrayList<String>();
    Option2 = new ArrayList<String>();
    Option3 = new ArrayList<String>();

    Cursor c = databasesql.rawQuery(
            "select * from "+TABLE_QUESTIONS+" where CHAPTERS = ?",
            new String[] { difficulty });

    while (c.moveToNext()) {

        question_Set.add(c.getString(2).trim());
        Answers_Set.add(c.getString(3).trim());
        Option1.add(c.getString(4).trim());
        Option2.add(c.getString(5).trim());
        Option3.add(c.getString(6).trim());

    }

    return question_Set;
} 

public int DropTable()
{

    return databasesql.delete(TABLE_QUESTIONS, null, null);
} 

} 
```

我称这种方法为：

获取问题：

```
Cursor cursor = DB_Adapter.getQuestion(); 
```

对于获取插入：

```
DB_Adapter.addToDB(Chapters,Question,CorrectAnswer,Answer1,Answer2,Answer3); 
```

请让我知道我应该在哪里添加**`db.close();`** 和 **`cur.close();`**

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T10:34:40.137

调用后： -

```
DB_Adapter.addToDB(Chapters,Question,CorrectAnswer,Answer1,Answer2,Answer3); 
**db.close();** 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T10:35:07.123

有两种方法可以关闭`Cursor`和`Database object.`

**第一种方法** 在使用后关闭两个对象。（即每当与您的光标相关的过程完成时）

**第二种方式**

将其添加到`OnStop()`或中`onDestroy()`。

In`OnStop()`或`onDestroy()`检查游标和数据库对象是否为空。如果没有，则关闭它。

```
public void onStop(){
 if(db!=null)
   {db.close();}
 if(cur!=null)
  { cur.close();}
} 
```

它应该工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-03T05:29:23.587

使用此方法创建数据库

我的构造函数

```
public DBClass(Context context) {
		super(context, DATABASE_NAME, null, DATABASE_VERSION);

		this.context = context;

	}
```

```
@Override
	public void onCreate(SQLiteDatabase db) {

		context.openOrCreateDatabase(DATABASE_NAME, Context.MODE_PRIVATE, null);
		db.execSQL("CREATE TABLE IF NOT EXISTS prediction(country1 VARCHAR,Country2 VARCHAR,winner VARCHAR,pool VARCHAR);");
	}
```

然后在您的数据库访问函数中使用这些

```
public void databaseInsertOperations(String c1, String c2, String c3) {
		db = this.getWritableDatabase();
		ContentValues cv = new ContentValues();
		cv.put(DBClass.COUNTRY_1, c1);
		cv.put(DBClass.COUNTRY_2, c2);
		cv.put(DBClass.WINNER, c3);
		db.insert(DBClass.TABLE, null, cv);
		db.close();
	}

	public ArrayList<String> databaseRetriveOperation() {

		db = this.getWritableDatabase();

		ArrayList<String> buffer = new ArrayList<String>();

cursor = db.rawQuery("select * from prediction", null);

		if (cursor.getCount() == 0) {
			System.out.println("Error No records found");

		} else {

			while (cursor.moveToNext()) {
				buffer.add(cursor.getString(0) + "/" + cursor.getString(1)
						+ "/" + cursor.getString(2));
			}

		}

		db.close();		cursor.close();
		return buffer;

	}
```

当我遇到此错误时为我解决了

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T10:39:50.390

试试这个场景：

当您想使用数据库帮助功能访问或触发任何查询时，请使用**打开**数据库。

使用该函数或查询后，请始终**关闭**该数据库。

例如：

```
db.open(); // function to open database for the use
db.YOUR_QUERY or ANY_FUNCTION
db.close(); 
```

数据库的打开和关闭用于以可写/可读等特定模式打开数据库并关闭它。

您可以在 databaseHelper 类中使用以下函数来打开和关闭数据库。

```
 //---opens the database---
public DBAdapter2 open() throws SQLException 
{
        db = DBHelper.getWritableDatabase();

    return this;
}

//---closes the database---    
public void close() 
{
    DBHelper.close();
} 
```

希望它会帮助你。

**更新**

改变这个：

```
 question_Set.add(c.getString(2).trim());
    Answers_Set.add(c.getString(3).trim());
    Option1.add(c.getString(4).trim());
    Option2.add(c.getString(5).trim());
    Option3.add(c.getString(6).trim()); 
```

与以下：

```
 db.open();
    question_Set.add(c.getString(2).trim());
    db.close();
    db.open();
    Answers_Set.add(c.getString(3).trim());
    db.close();
    db.open();
    Option1.add(c.getString(4).trim());
    db.close();
    db.open();
    Option2.add(c.getString(5).trim());
    db.close();
    db.open();
    Option3.add(c.getString(6).trim());
    db.close(); 
```

# ruby-on-rails-3 - How to maintain the "updated_at" variable in rails application?

> ID：13249132
> 
> 赞同：0
> 
> 时间：2012-11-06T10:33:24.860
> 
> 标签：ruby-on-rails-3

I am making an application in which there is only model that is Project and in the view of the project i can see the table with the variables that generate automatically i.e created _at and updated_at. I want to keep track the updated_at variable means that if user updates the project 10 times it will show the updated_at variable 10 times so that i can track the project model.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T11:07:37.470

您将需要另一个模型来跟踪随时间的变化，并在创建项目模型时使用活动记录回调。

假设您正在通过一个名为 ProjectChanges 的模型跟踪您的更改

```
rails g model ProjectChange project_id:integer change:string when:datetime 
```

然后将实现回调挂钩添加到您的项目模型中

```
class Project < ActiveRecord::Base
  has_many :project_changes
  after_create :record_update( 'create' )
  after_save :record_update( 'update' )
  ...
  def record_update( what_happened )
    # not forgetting to add attr_accessible to the ProjectChange class if you want to mass assign like this
    ProjectChange.new( { :change => what_happened, :when => Time.now } )
  end
end 
```

# neo4j - 如何在 Neo4JClient 中包含网络凭据？

> ID：13249133
> 
> 赞同：1
> 
> 时间：2012-11-06T10:33:32.857
> 
> 标签：neo4j, neo4jclient

因此，如果您在开发环境中安装 Neo4j，您将拥有 Neo4Jserver 的本地托管版本，通常您可以通过以下方式浏览：localhost:7474/db/data。

你的代码是这样的：

```
var client = new GraphClient(new Uri("http://localhost:7474/db/data"));
client.Connect(); 
```

但是，有一天您会想要连接到基于云的 Neo4J 服务器（Heroku、Azure 等）。当然，这意味着您必须提供网络凭据。如果你只用你的双手，它可能是这样的：

```
var http = (HttpWebRequest)WebRequest.Create(new Uri("http://<<your_REST_query"));
var cred = new NetworkCredential("yourusername", "yourpassword");

http.Credentials = cred;

var response = http.GetResponse();
var stream = response.GetResponseStream(); 
```

但是如何包含网络凭据以连接 Neo4JClient？还是有其他我不知道的选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T11:36:27.380

我们支持基本身份验证凭据的标准 URI 语法：

```
var client = new GraphClient(new Uri("http://user:pass@localhost:7474/db/data")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-14T03:39:46.027

从[版本 1.1.0.0](https://github.com/Readify/Neo4jClient/wiki/connecting)

```
var username = "app_username"
var password = "1@mGr@phG0d"    
var client = new GraphClient(new Uri("http://localhost:7474/db/data"), username, password); 
```

# python - 在 Mac OSX 上安装 Pandas

> ID：13249135
> 
> 赞同：24
> 
> 时间：2012-11-06T10:33:34.617
> 
> 标签：python, pandas

我在我的 Mac OSX 计算机上安装 Python Pandas 库时遇到问题。

我在终端中输入以下内容：

```
$ sudo easy_install pandas 
```

但后来我得到以下信息：

```
Searching for pandas
Reading http://pypi.python.org/simple/pandas/
Reading http://pandas.pydata.org
Reading http://pandas.sourceforge.net
Best match: pandas 0.9.0
Downloading http://pypi.python.org/packages/source/p/pandas/pandas-
0.9.0.zip#md5=04b1d8e11cc0fc30ae777499d89003ec
Processing pandas-0.9.0.zip
Writing /tmp/easy_install-ixjbQO/pandas-0.9.0/setup.cfg
Running pandas-0.9.0/setup.py -q bdist_egg --dist-dir /tmp/easy_install-ixjbQO/pandas-
0.9.0/egg-dist-tmp-EGREoT
warning: no files found matching 'setupegg.py'
no previously-included directories found matching 'doc/build'
warning: no previously-included files matching '*.so' found anywhere in distribution
warning: no previously-included files matching '*.pyd' found anywhere in distribution
warning: no previously-included files matching '*.pyc' found anywhere in distribution
warning: no previously-included files matching '.git*' found anywhere in distribution
warning: no previously-included files matching '.DS_Store' found anywhere in distribution
warning: no previously-included files matching '*.png' found anywhere in distribution
unable to execute gcc: No such file or directory
error: Setup script exited with error: command 'gcc' failed with exit status 1 
```

我确实安装了 Xcode 和 gcc，但是，只有在我键入时才会找到 gcc：

```
$ gcc
-bash: gcc: command not found

$ gcc-4.2
i686-apple-darwin11-gcc-4.2.1: no input files 
```

我应该怎么办？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2014-02-08T17:30:51.643

安装`pip`.

然后`pandas`安装`pip`：

```
pip install pandas 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-04-03T20:36:36.473

您可以使用自制软件安装 python：

```
brew install python 
```

确保 OSX 使用正确的路径：

```
which python 
```

然后就可以使用pip工具安装pandas了：

```
pip install pandas 
```

确保安装了所有依赖项。我遵循了本教程： http: [//penandpants.com/2013/04/04/install-scientific-python-on-mac-os-x/](http://penandpants.com/2013/04/04/install-scientific-python-on-mac-os-x/)

在我的机器上工作正常。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-11-06T14:09:43.830

您需要安装 XCode 并且需要确保为 XCode 安装**命令行工具**，以便获得 gcc。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2017-12-05T22:49:17.053

尝试

```
pip3 install pandas 
```

从终端。也许您原来的 pip install pandas 正在引用 anaconda 发行版

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-11-06T11:30:50.547

我会推荐使用 macport 或 fink 来安装 pandas：

1.  从 App Store 安装 XCode，这将安装 3 个编译器，clang、gcc ("apple") 和 gcc ("normal")
2.  安装 macports (www.macports.org) 或 fink (www.finkproject.org)
3.  永远不要再次使用你的 mac python，并通过 fink/macport 安装所有 python 模块，并享受它为你照顾依赖关系。

在 macports 中安装 pandas 很简单： sudo port install py27-pandas

你通常在 /opt/local 中安装 macport，在 /sw 中安装 fink，我建议（尽管这可能是个坏建议）你将你的 fink/mac 端口 python 符号链接到你的系统 python，如下所示：/usr/bin/python -> /opt/local/Library/Frameworks/Python.framework/Versions/2.7/bin/python2.7

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2019-07-05T18:47:59.927

在 Mac 终端中（我们可以通过在 Spotlight 搜索*Command + 空格中搜索来启动 Mac***终端**）现在，使用以下命令：

 *> pip3 安装熊猫

由于我使用的是**Python 版本 3**，我需要使用 pip3 install pandas。

如果您使用的是**python 版本 2** ，则使用命令：

> 点安装熊猫

确保**pip**已安装在设备中

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-09-19T19:27:03.670

`pip install pandas``pip 18.0`与on一起工作正常`macOS 10.13.6`。此外，要使用 Xlsx 文件，您需要`xlrd`安装。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-02-06T06:30:56.150

这不是一种创新方式，但以下两个步骤可能会节省大量时间和精力。

1.  **更新（安装命令行工具）代码。**

这可以通过 openinig XCode -> Menu -> Preference -> Components -> Command Line Tool 来完成

2.  **删除除 Python 2.7 之外的所有内容**

我确实在不同的时间安装了不同的 python 实例，除 2.7 之外的所有实例对我来说都是有帮助的。注意：您可能必须在完成后安装模块。所以准备好使用 pip/easy_install/ports。

卸载可以通过以下链接中提到的超级简单步骤完成。

[如何在 Mac OS X 10.6.4 上卸载 Python 2.7？](https://stackoverflow.com/questions/3819449/how-to-uninstall-python-2-7-on-a-mac-os-x-10-6-4/3819829#3819829)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-09-13T17:26:14.390

我相信你需要一个 sim 链接

```
$ ln -s gcc gcc-4.2 
```

这应该告诉您的终端在您运行 $ gcc 时调用 gcc-4.2。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-07-21T10:30:06.183

对于 Mac 在终端中运行给定的命令

```
sudo easy_install pip
pip3 install pandas 
```

如果你想安装 pandas 分析然后运行

```
pip3 install pandas-profiling 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-02-09T21:37:32.067

写下这个并尝试再次导入熊猫！

```
import sys
!{sys.executable} -m pip install pandas 
```

它对我有用，希望对你也有用。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-10-17T09:41:57.020

您需要从 appStore 安装最新版本的 xCode。它包含适用于 mac 的 C(gcc) 和 C++(g++) 的编译器。然后你就可以毫无问题地安装 pandas 了。在终端中使用以下命令：

1.  xcode-选择--安装

2.  pip3 安装熊猫

它也安装其他软件包可能需要一些时间。请耐心等待。

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2016-12-03T03:20:37.930

pip install 对我有用，但由于权限问题而失败，当我使用时已解决

sudo pip 安装熊猫

我看到最好的 sudo 解决方法来自 /tmp：[在 sudo 下运行 pip install 是否可以接受且安全？](https://stackoverflow.com/questions/15028648/is-it-acceptable-and-safe-to-run-pip-install-under-sudo)*

# java - 用于关闭连接的 Java 弱引用

> ID：13249136
> 
> 赞同：4
> 
> 时间：2012-11-06T10:33:35.207
> 
> 标签：java, weak-references

我试图找出当我的对象被取消时关闭与服务的连接的最佳方法。

我有这样的事情：

```
class something {
  public final LongConnection lc;
  public something ()  {
    lc = new LongConnection ();
    lc.initConnection ();
    new Thread (new Runnable () { 
      public void run () { 
        ReferenceQueue<LongConnection> rq = new ReferenceQueue<LongConnection> ();
        WeakReference<LongConnection> wr = new WeakReference<LongConnection> (lc, rq);

        // now it should start listening for the object to be added to the queue
        while (true) {
          Reference<? extends LongConnection> ref = rq.remove ();
          if (rq != null) { 
            rq.get ().shutdown ();
            break;
          }
        }
        // will fall through and die! 
      }
    }).start ()
  } 
```

这样我可以实例化这样的东西：

```
somefunction () { 
  something = new something ()
} 
```

并且当方法返回（并且被取消范围/gc'd）时，它将正确关闭连接。

问题：（1）这真的很糟糕吗？！？！(2) 它会起作用吗（测试……正在进行中……）？（3）什么是关闭某物的“正确”方式？如果可以避免的话，我不想将关机的问题推广到程序的下一层。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T10:36:40.277

是的：在 Java 中，将任何资源的管理与内存管理相结合是一种不当行为。除了内存管理之外的所有事情都必须明确地完成。Java 7 引入了一个有用的新结构，称为“自动资源管理”，它有助于处理所涉及的样板。

具体来说，您无法保证：

1.  JVM何时会意识到对象是弱可达的；
2.  何时清除弱引用；
3.  当 JVM 将通过将其排入您的参考队列来通知您该事实时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T10:38:44.710

`ResultSet`稀有资源（如 SQL 、或文件句柄`Statement`）的垃圾收集*不会*关闭该资源。您应该在获取它的方法范围内的 finally 块中执行此操作。`Connection`

# android - 如何从 Android 中的 SFTP 服务器获取文件列表？

> ID：13249143
> 
> 赞同：0
> 
> 时间：2012-11-06T10:33:44.397
> 
> 标签：android, sftp, jsch

我开发了一个代码，但它不起作用。请帮助我。

```
ChannelSftp sftpChannel = (ChannelSftp) channel;
                try {
                    Vector ls=sftpChannel.ls("/home/");
                    for(int i=0;i<ls.size();i++){

                    t.setText("\n"+ls.get(i)+"\n");

                    }

                } catch (SftpException e1) {
                    // TODO Auto-generated catch block
                } 
```

这是例外：

```
11-06 12:29:15.801: E/AndroidRuntime(9624): android.view.ViewRootImpl$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views.
11-06 12:29:15.801: E/AndroidRuntime(9624):     at android.view.ViewRootImpl.checkThread(ViewRootImpl.java:4267)
11-06 12:29:15.801: E/AndroidRuntime(9624):     at android.view.ViewRootImpl.invalidateChild(ViewRootImpl.java:855)
11-06 12:29:15.801: E/AndroidRuntime(9624):     at android.view.ViewRootImpl.invalidateChildInParent(ViewRootImpl.java:904)
11-06 12:29:15.801: E/AndroidRuntime(9624):     at android.view.ViewGroup.invalidateChild(ViewGroup.java:4005)
11-06 12:29:15.801: E/AndroidRuntime(9624):     at android.view.View.invalidate(View.java:8716)
11-06 12:29:15.801: E/AndroidRuntime(9624):     at android.view.View.invalidate(View.java:8667)
11-06 12:29:15.801: E/AndroidRuntime(9624):     at android.widget.TextView.updateAfterEdit(TextView.java:6265)
11-06 12:29:15.801: E/AndroidRuntime(9624):     at android.widget.TextView.handleTextChanged(TextView.java:7909)
11-06 12:29:15.801: E/AndroidRuntime(9624):     at android.widget.TextView$ChangeWatcher.onTextChanged(TextView.java:8286)
11-06 12:29:15.801: E/AndroidRuntime(9624):     at android.text.SpannableStringBuilder.sendTextChange(SpannableStringBuilder.java:892)
11-06 12:29:15.801: E/AndroidRuntime(9624):     at android.text.SpannableStringBuilder.change(SpannableStringBuilder.java:352)
11-06 12:29:15.801: E/AndroidRuntime(9624):     at android.text.SpannableStringBuilder.change(SpannableStringBuilder.java:266)
11-06 12:29:15.801: E/AndroidRuntime(9624):     at android.text.SpannableStringBuilder.replace(SpannableStringBuilder.java:443)
11-06 12:29:15.801: E/AndroidRuntime(9624):     at android.text.SpannableStringBuilder.append(SpannableStringBuilder.java:257)
11-06 12:29:15.801: E/AndroidRuntime(9624):     at android.text.SpannableStringBuilder.append(SpannableStringBuilder.java:29)
11-06 12:29:41.941: W/IInputConnectionWrapper(9624): showStatusIcon on inactive InputConnection 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T10:39:34.143

您不能`t.setText()`从后台线程修改 UI ( )：例如，`post()`如果您当前处于后台线程中，则可以使用方法在 UI 线程中执行可运行对象。

此外，在您的代码中，您正在替换字段的文本，而不是追加新行。

尝试使用以下代码：

```
 ChannelSftp sftpChannel = (ChannelSftp) channel;
            try {
                Vector ls=sftpChannel.ls("/home/");
                String text = "";
                for(int i=0;i<ls.size();i++){
                    text += ls.get(i)+"\n";
                }
                t.post(new Runnable() {
                    public void run() {
                       t.setText(text);
                    }
                });
            } catch (SftpException e1) {
                // TODO Auto-generated catch block
            } 
```

实际上最好用`ListView`. 一个快速（和肮脏）的例子：

```
 listView.setAdapter(new BaseAdapter() {

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            TextView view = new TextView(parent.getContext());
            view.setText(((LsEntry)ls.get(i)).getFilename());
            return view;
        }

        @Override
        public int getCount() {
            return ls.size();
        }

        @Override
        public long getItemId(int position) {
            return 0;
        }

        @Override
        public Object getItem(int position) {
            return null;
        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-18T10:10:16.970

如果您只想列出文件名：

```
 new Thread(new Runnable() {
            @Override
            public void run() {
                Session session = startSession();
                String local = "/home/";
                String remote = "/tmp/";
                Channel channel = null;
                try {
                    channel = session.openChannel("sftp");
                    channel.connect();
                    ChannelSftp sftp = (ChannelSftp) channel;
                    Vector<ChannelSftp.LsEntry> list = sftp.ls(remote);
                    String file = "";
                    for(ChannelSftp.LsEntry entry : list) {
                        file = entry.getFilename();
                        // This is just the name of the file
                    }
                } catch (SftpException e1) {

                } catch (JSchException e) {
                    e.printStackTrace();
                } finally {
                    if (channel != null) {
                       channel.disconnect();
                    }
                }
            }
                endSession(session);
                // You need to handle start and end session.
            }
        }).start();
    } 
```

# python - Python/Google Apps 脚本集成

> ID：13249147
> 
> 赞同：0
> 
> 时间：2012-11-06T10:34:09.507
> 
> 标签：python, google-apps-script

某种类型的 Python 脚本是否有可能检查在 linux 机器上运行的服务，并与谷歌应用程序脚本集成，然后它会填充一个谷歌文档电子表格，说明服务是否正在运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T10:40:23.007

是的。不过，您需要第一次对其进行授权并从脚本中实现 oAuth。我强烈建议您切换到 Google Drive API。

# regex - 正则表达式在 grep 中不起作用

> ID：13249148
> 
> 赞同：1
> 
> 时间：2012-11-06T10:34:09.880
> 
> 标签：regex, macos, grep

为什么 grep 不匹配“COL1，COL2，COL3”，这个正则表达式符合预期，而是“COL1，COL2，COL3，COL4，COL5，COL6”？它在文本编辑器中正确匹配但不使用 grep，我是否缺少任何特殊的转义或..？（使用 OS X Lion）

文本：

```
COL1,COL2,COL3,COL4,COL5,COL6,COL7,COL8,COL9 
```

命令：

```
grep -E --color=auto '^([^,]*,){3}' file.csv 
```

grep 版本：
grep (GNU grep) 2.5.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T10:39:51.530

你的命令：

```
grep -E --color=auto '^([^,]*,){3}' file.csv 
```

只会对字符串进行`COL1,COL2,COL3,`不同的着色，但如果您希望在输出中使用该字符串，请使用`-o`如下选项：

```
grep -E -o '^([^,]*,){3}' 
```

# windows - Windows 7 中域用户的设备驱动程序访问权限

> ID：13249151
> 
> 赞同：1
> 
> 时间：2012-11-06T10:34:15.913
> 
> 标签：windows, permissions, driver, inf

我正在为自定义 USB 设备编写 Windows 设备驱动程序，但是当用户程序作为域用户运行时，我无法从我的用户程序（使用 CreateFile）打开设备。如果我以本地用户或管理员（或“运行身份”管理员）身份运行，我可以正常打开驱动程序，但作为域用户`GetLastError`返回 5（拒绝访问）。

我原本本地用户也有这个问题，发现我必须在.inf文件中添加以下SDDL条目，这解决了本地用户的问题：

```
HKR,,Security,,"D:P(A;;GA;;;SY)(A;;GA;;;BA)(A;;GRGW;;;BU) 
```

从这个参考： http: [//msdn.microsoft.com/en-us/library/windows/hardware/ff563667 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/hardware/ff563667(v=vs.85).aspx)

当我发现域用户没有访问权限时，我认为只需将他们添加到此 SDDL 条目即可授予他们访问权限，但它似乎不起作用：我仍然拒绝访问。我什至尝试过极端的解决方案，例如为所有用户（所有人（WD）、未经身份验证的用户等）提供完全访问权限，但这也不起作用，这让我认为问题出在其他地方；即其他东西拒绝域用户访问，这优先于驱动程序 inf 中 SDDL 条目中的许可。

所以我的问题是，让域用户（或所有用户）访问连接到驱动程序需要什么？或者有没有其他解决这个问题的方法（比如连接驱动作为服务，然后从用户程序访问这个服务）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-05-06T08:52:04.640

HKR,,Security,,"D:P(A;;GA;;;WD)"

设置每个人都可以访问，试试吧！

# android - AOSP 自定义构建在启动时给出“不幸的是，com.android.phone 进程已停止”

> ID：13249154
> 
> 赞同：1
> 
> 时间：2012-11-06T10:34:26.690
> 
> 标签：android, android-source

我有一个为 Maguro（Android 版本 4.0.4）定制的 Android 开源项目。不知何故，它在某些操作员（但不是全部）启动期间给出了错误“不幸的是，进程 com.android.phone 已停止”。

其他人有同样的问题以及如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T10:56:56.903

ROM 可能不支持特定的运算符。每个自定义 ROM 都必须针对预期可以使用的所有运营商、手机型号等进行适当的测试。但由于缺乏严格和纪律严明的组织，测试往往在开源开发中处于次要地位。

rom中有一个错误导致它崩溃。“com.android.phone”是手机操作必不可少的核心进程之一，如果它崩溃了，那么你无能为力。这是开发人员必须解决的问题。

您可以向开发人员提交包含您的设备和运营商详细信息的错误报告，他们可能会对其进行调查并在下一个版本中进行修复。

# asp.net-mvc - 在 MVC 中刷新用户控件

> ID：13249155
> 
> 赞同：2
> 
> 时间：2012-11-06T10:34:26.563
> 
> 标签：asp.net-mvc

我的 MVC 应用程序的 aspx 页面中有 3 个用户控件。我从一个控制器绑定数据库中的数据。

在选择“过滤器/状态”时，我想将数据（刷新）绑定到“列表”用户控件，而不刷新“过滤器和状态”用户控件。

下面是我在 aspx 页面中的用户控件。请帮助我如何刷新部分页面/用户控件。

我试过只返回“ListView”视图数据。但它正在搜索其他 2 个视图并抛出异常。

```
 <td>
                <%Html.RenderPartial("Filter", ViewData["FilterView"]); %>
            </td>

            <td valign="top" width="15%">
                <%Html.RenderPartial("Status", this.ViewData["StatusView"]); %>

            </td>
            <td valign="top" width="85%">

                <%Html.RenderPartial("List", this.ViewData["ListingView"]); %>

            </td> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T12:37:58.143

这样做

1.  html（aspx页面）：

> ```
>  <div id="ListingView">
>     <%Html.RenderPartial("List", this.ViewData["ListingView"]); %>
>     </div>
>     ...
>     <input type="button" id="refreshListingView" /> 
> ```

1.  javascript来处理它：

    ```
     $('#refreshListingView').click(function () {
        var selectedStatusId = 'get here proper status id';
        $.ajax({
            url: '/YourController/GetListingView',
            type: "GET",
            data: { "statusId": selectedStatusId },
            success: function (response) {
                $('#ListingView').html(response);
            }
        });
    }); 
    ```

2.  你的控制器：

    ```
    [HttpGet]
    public ActionResult GetListingView(int statusId)
    {
         ViewData["ListingView"] = your data filtered by statusId or what you want;
        return PartialView("List",ViewData["ListingView"]);
    } 
    ```

我会使用专用模型而不是 ViewData["ListingView"]，但这只是一个示例。它应该工作。

# jqgrid - jQgrid 根据内容删除值

> ID：13249156
> 
> 赞同：0
> 
> 时间：2012-11-06T10:34:27.000
> 
> 标签：jqgrid

我只想根据其内容删除单元格的值。如果内容为 0，我想在尝试编辑它时将其删除。所以我选择了 beforeEditCell 事件并尝试以这种方式删除内容。

```
beforeEditCell:function(rowid, cellname, value, iRow, iCol){
                            if(value == 0) value = '';
                       }, 
```

我用警报对其进行了测试，因此事件会触发警报，但我不知道如何删除旧内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T17:09:14.363

[链接 1](https://stackoverflow.com/questions/9655426/jqgrid-setcell-calculated-value)

[链接 2](https://stackoverflow.com/questions/5247138/jqgrid-change-cell-value-and-stay-in-edit-mode)

[来自http://www.trirand.com/blog/?page_id=393/help/set-cell-value-to-empty/](http://www.trirand.com/blog/?page_id=393/help/set-cell-value-to-empty/)的示例

（他们将值更改为空）

```
setCell("10″, "tax", '', {color:'red','text-align':'center'}',{title:'Sales Tax'})) 
```

# ios - 分发签名 ios 应用程序

> ID：13249159
> 
> 赞同：-1
> 
> 时间：2012-11-06T10:34:35.520
> 
> 标签：ios, xcode4.2, distribution, code-signing

我有什么错？证书和密钥是从 xcode Organizer 新生成的。看起来有效。

我收到错误消息：

错误：协同设计检查失败：/var/folders/zj/dx92zg8j0ds8sb_z2p7q1t7c0000gn/T/jQeOcYAITo/Payload/Direct Check-In.app：在磁盘上有效/var/folders/zj/dx92zg8j0ds8sb_z2p7q1t7c0000gn/T/jQeOcYAITo/InPayload/Direct Check- .app：不满足其指定的要求 /var/folders/zj/dx92zg8j0ds8sb_z2p7q1t7c0000gn/T/jQeOcYAITo/Payload/Direct Check-In.app：满足明确要求

问题可能出在哪里，我该如何解决。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T11:33:24.907

所以我发现了问题。为 Release 设置了错误的认证。我认为分发证书用于存档。但这取决于构建方案，并且我在存档选项卡中有发布。我在 Release 中设置了分发证书，它工作正常。

# php - 错误：HTTPFault 字符串：未经授权 + 共享点 Web 服务

> ID：13249163
> 
> 赞同：0
> 
> 时间：2012-11-06T10:34:46.100
> 
> 标签：php, sharepoint, wsdl, sharepoint-2007

我在本地 Windows 服务器中安装了共享点，可通过 LAN 访问。现在我在我的本地 apache 服务器上运行 php 中的 web 服务，如下所示：

```
<?php

//Authentication details
$authParams = array('login' => 'username', 'password' => 'password'); \

$listName = "TestList1";
$rowLimit = '150';
$wsdl = "http://www.blah.com/sharepoint/ListsWSDL.wsdl";

//Creating the SOAP client and initializing the GetListItems method parameters
$soapClient = new SoapClient($wsdl, $authParams);
$params = array('listName' => $listName, 'rowLimit' => $rowLimit);

//Calling the GetListItems Web Service
$rawXMLresponse = null;
try{
    $rawXMLresponse = $soapClient->GetListItems($params)->GetListItemsResult->any;
}
catch(SoapFault $fault){
    echo 'Fault code: '.$fault->faultcode;
    echo 'Fault string: '.$fault->faultstring;
}
echo '<pre>' . $rawXMLresponse . '</pre>';

//Loading the XML result into parsable DOM elements
$dom = new DOMDocument();
$dom->loadXML($rawXMLresponse);
$results = $dom->getElementsByTagNameNS("#RowsetSchema", "*");

//Fetching the elements values. Specify more attributes as necessary
foreach($results as $result){
    echo $result->getAttribute("ows_LinkTitle")."<br/>";
}
unset($soapClient);
?>
<body>
</body>
</html> 
```

但控制将捕获块，错误显示为：

```
Fault code: HTTPFault string: Unauthorized 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T10:45:41.933

首先检查 WSDL 文件，服务器位置在 wsdl 文件中，就在底部。请确保此服务器位置正确。

请为您尝试访问的此共享点站点激活“基本身份验证”（在 IIS6 中）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T10:46:45.443

您是否在 IIS 中启用了基本身份验证？

看看这个链接：http: [//blogs.iis.net/nitashav/archive/2010/02/22/iis6-0-ui-vs-iis7-x-ui-series-basic-authentication.aspx](http://blogs.iis.net/nitashav/archive/2010/02/22/iis6-0-ui-vs-iis7-x-ui-series-basic-authentication.aspx)

检查您的凭据。

尝试将 IIS 身份验证设置更改为 Kerberos。

# java - Android：使用来自 NativeActivity 的 JNI

> ID：13249164
> 
> 赞同：8
> 
> 时间：2012-11-06T10:34:46.133
> 
> 标签：java, android, java-native-interface

我们正在使用[NativeActivity](http://developer.android.com/reference/android/app/NativeActivity.html)类在 android 上开发 OpenGL 游戏。到目前为止一切正常，但现在我们需要访问一些似乎只能从 Java 获得的功能。

还有更多，但我们认为有用的第一个是访问显示 DPI。[如此处](http://developer.android.com/reference/android/util/DisplayMetrics.html)所述，Java 代码如下所示：

```
DisplayMetrics metrics = new DisplayMetrics();
getWindowManager().getDefaultDisplay().getMetrics(metrics); 
```

这是不幸的相应 C++ 代码：

```
// My checking routine.
#define JNI_ASSERT(jni, cond) { \
  if (!(cond)) {\
    std::stringstream ss; \
    ss << __FILE__ << ":" << __LINE__; \
    throw std::runtime_error(ss.str()); \
  } \
  if (jni->ExceptionCheck()) { \
    std::stringstream ss; \
    ss << __FILE__ << ":" << __LINE__; \
    throw std::runtime_error("Exception: " + ss.str()); \
  } \
}

void print_dpi(android_app* app) {
  JNIEnv* jni;
  app->activity->vm->AttachCurrentThread(&jni, NULL);

  jclass activityClass = jni->FindClass("android/app/NativeActivity");
  JNI_ASSERT(jni, activityClass);

  jmethodID getWindowManager = jni->GetMethodID
                                    ( activityClass
                                    , "getWindowManager"
                                    , "()Landroid/view/WindowManager;"); 
  JNI_ASSERT(jni, getWindowManager);

  jobject wm = jni->CallObjectMethod(app->activity->clazz, getWindowManager);
  JNI_ASSERT(jni, wm);

  jclass windowManagerClass = jni->FindClass("android/view/WindowManager");
  JNI_ASSERT(jni, windowManagerClass);

  jmethodID getDefaultDisplay = jni->GetMethodID( windowManagerClass
                                                , "getDefaultDisplay"
                                                , "()Landroid/view/Display;");
  JNI_ASSERT(jni, getDefaultDisplay);

  jobject display = jni->CallObjectMethod(wm, getDefaultDisplay);
  JNI_ASSERT(jni, display);

  jclass displayClass = jni->FindClass("android/view/Display");
  JNI_ASSERT(jni, displayClass);

  // Check if everything is OK so far, it is, the values it prints
  // are sensible.
  { 
    jmethodID getWidth = jni->GetMethodID(displayClass, "getWidth", "()I");
    JNI_ASSERT(jni, getWidth);

    jmethodID getHeight = jni->GetMethodID(displayClass, "getHeight", "()I");
    JNI_ASSERT(jni, getHeight);

    int width = jni->CallIntMethod(display, getWidth);
    JNI_ASSERT(jni, true);
    log("Width: ", width); // Width: 320

    int height = jni->CallIntMethod(display, getHeight);
    JNI_ASSERT(jni, true);
    log("Height: ", height); // Height: 480
  }

  jclass displayMetricsClass = jni->FindClass("android/util/DisplayMetrics");
  JNI_ASSERT(jni, displayMetricsClass);

  jmethodID displayMetricsConstructor = jni->GetMethodID( displayMetricsClass
                                                        , "<init>", "()V");
  JNI_ASSERT(jni, displayMetricsConstructor);

  jobject displayMetrics = jni->NewObject( displayMetricsClass
                                         , displayMetricsConstructor);
  JNI_ASSERT(jni, displayMetrics);

  jmethodID getMetrics = jni->GetMethodID( displayClass
                                         , "getMetrics"
                                         , "(Landroid/util/DisplayMetrics;)V");
  JNI_ASSERT(jni, getMetrics);

  jni->CallVoidMethod(display, getMetrics, displayMetrics);
  JNI_ASSERT(jni, true);

  {
    jfieldID xdpi_id = jni->GetFieldID(displayMetricsClass, "xdpi", "F");
    JNI_ASSERT(jni, xdpi_id);

    float xdpi = jni->GetFloatField(displayMetricsClass, xdpi_id);
    JNI_ASSERT(jni, true);

    log("XDPI: ", xdpi); // XDPI: 0
  }

  {
    jfieldID height_id = jni->GetFieldID( displayMetricsClass
                                        , "heightPixels", "I");
    JNI_ASSERT(jni, height_id);

    int height = jni->GetIntField(displayMetricsClass, height_id);
    JNI_ASSERT(jni, true);

    log("Height: ", height); // Height: 0
  }
  // TODO: Delete objects here.
  app->activity->vm->DetachCurrentThread();
} 
```

代码输出：

```
Width: 320
Height: 480
XDPI: 0
Height: 0 
```

就好像*displayMetrics*对象没有在调用中设置

```
jni->CallVoidMethod(display, getMetrics, displayMetrics); 
```

JNI 是否不允许我使用参数作为返回值？如果是这样，鉴于我们使用的是 NativeActivity 胶水，我们该如何解决它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T14:22:49.977

呃，我盯着代码看了几个小时，没看到。然后离开办公桌，回来发现它是：

而不是这两行

```
float xdpi = jni->GetFloatField(displayMetricsClass, xdpi_id);
int height = jni->GetIntField(displayMetricsClass, height_id); 
```

我应该使用：

```
float xdpi = jni->GetFloatField(displayMetrics, xdpi_id);
int height = jni->GetIntField(displayMetrics, height_id); 
```

多哈:)

（至少它可以作为一个例子，如果有人想以困难的方式获得 DPI :)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T13:13:10.170

首先，我必须注意我对 JNI 不是很好 :)

也就是说，我怀疑问题是`displayMetrics`必须将变量作为全局引用

```
displayMetrics = jni->NewGlobalRef(displayMetrics); 
```

或类似的东西。记得用 .unref 取消引用它`DeleteGlobalRef`。LocalRef 也可能工作......

但是，如果我要解决这个问题，我会将整个事情包装在一个 java 函数中，然后从本机调用它，然后让 java 端完成大部分函数调用——涉及的 java-native 栅栏的跳跃也更少.

# regex - Flex 按点拆分字符串不起作用

> ID：13249166
> 
> 赞同：0
> 
> 时间：2012-11-06T10:34:53.763
> 
> 标签：regex, apache-flex

我在 flex 中有一个文本框，我试图在其中拆分用户输入的金额。代码类似于：

```
var splitAmount:Array = toAmountLocal.split("\\."); 
```

尝试使用 dot(.) 使用不同的选项，但没有任何效果，每次`splitAmount.length`它只返回 1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T11:20:41.270

如果您使用 String 作为`split`方法的参数，则不必转义任何内容；做就是了：

```
toAmountLocal.split("."); 
```

但是，如果您希望使用正则表达式作为参数，那么您将不得不使用一个反斜杠来转义点，如下所示：

```
toAmountLocal.split(/\./); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T11:50:12.157

下面的代码可能会对您有所帮助：我添加了评论您在逻辑中缺少的内容。

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600"
               creationComplete="init()">

    <fx:Script>
        <![CDATA[
            import mx.controls.Alert;

            [Bindable]
            private var toAmountLocal:String = "123.45.6.78";

            private function onClickHandler():void
            {
                //if user is entering value your local variable should be updated.
                toAmountLocal = inputID.text;
                var splitAmount:Array = toAmountLocal.split('.');
                Alert.show(splitAmount.length.toString())
            }
        ]]>
    </fx:Script>

    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
    </fx:Declarations>

    <s:layout>
        <s:VerticalLayout/>
    </s:layout>

    <s:TextInput id="inputID" text="{toAmountLocal}"/>
    <s:Button label="Split" click="onClickHandler()"/>

</s:Application> 
```

# blackberry - 在此应用程序完成初始密钥生成之前无法请求签名

> ID：13249167
> 
> 赞同：0
> 
> 时间：2012-11-06T10:34:54.957
> 
> 标签：blackberry, code-signing

当我尝试在命令行中使用 Ant 工具为黑莓编译 WordPress 应用程序时。一些错误发生如下，我已经在eclipse中安装了singing key。我不知道问题出在哪里。我正在使用 BB SDK5.0。

请帮我。

> [rapc] 添加：WordPress-15.cod(in = 73752) (out= 73752)(已存储 0%)
> [rapc] 添加：WordPress-16.cod(in = 78672) (out= 78672)(已存储 0%)
> [rapc] 添加：WordPress-17.cod(in = 75156) (out= 75156)(已存储 0%)
> [rapc] 添加：WordPress-18.cod(in = 65592) (out= 65592)(已存储 0%)
> [rapc] 没有错误。
> 
> sign:
> [copy] 复制27个文件到E:\Develop\BBWP\WordpressBB\release\os50\sign
> 
> [echo] 请签署位于 E:/Develop/BBWP/WordpressBB/release/os50/sign
> [java] 2012-11-06 18:05:00:0032 的 .cod 文件：SignatureTool 已启动
> 
> [java] 查找文件...
> [java] 失败。
> [java]**在此应用程序完成初始密钥生成之前无法请求签名。**
> 
> 构建失败
> E:\Develop\BBWP\WordpressBB\build\build.xml:128：执行此行时出现以下错误：
> E:\Develop\BBWP\WordpressBB\build\build_single.xml:136：Java 返回：-1

起初我检查了很多次，我确定我已经安装并激活了我的歌唱键。后来我尝试为每个版本的黑莓 SDK 使用相同的唱歌键，但效果不佳。似乎不能为所有 SDK 使用相同的唱歌键，所以我为不同版本的 SDK 订购了许多键。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T17:15:54.090

这是正确的。您需要一组有效且已激活的 BlackBerry 签名密钥。在此处阅读有关签名密钥的更多信息：

[https://developer.blackberry.com/java/documentation/code_signing_1977871_11.html](https://developer.blackberry.com/java/documentation/code_signing_1977871_11.html)

[https://developer.blackberry.com/html5/documentation/signing_setup_smartphone_apps_1920010_11.html](https://developer.blackberry.com/html5/documentation/signing_setup_smartphone_apps_1920010_11.html)

你可以在这里请求他们：

[https://www.blackberry.com/SignedKeys/codesigning.html](https://www.blackberry.com/SignedKeys/codesigning.html)

# javascript - 通过类名脚本获取元素不起作用

> ID：13249168
> 
> 赞同：4
> 
> 时间：2012-11-06T10:35:03.420
> 
> 标签：javascript, toggle, getelementsbyclassname

我知道，它不受 IE 支持，但我在网上找到了一个很酷的脚本，有人慷慨地免费提供，但我不知道为什么它不起作用。我已经盯着这个几个小时了，请指出我正确的方向！

我的代码：

```
<script language="javascript" type="text/javascript" src="getbyclass.js"></script>
<script type="text/javascript" language="javascript">
function editToggle(toggle){
    if (toggle == "off"){
    getElementsByClassName("editp").style.display ="none";
    document.getElementById('editToggle').innerHTML="<a href=\"#\" onclick=\"editToggle(\"off\"); return false;\">>Edit Mode: <span style=\"color:red;\">OFF</span></a>";
    toggle="on";
    }else{
    getElementsByClassName("editp").style.display ="inline";
    document.getElementById('editToggle').innerHTML="<a href=\"#\" onclick=\"editToggle(\"on\"); return false;\">>Edit Mode: <span style=\"color:green;\">on</span></a>";
    toggle="off";
    }
} 
```

还：

```
echo "<span id=\"editToggle\"><a href=\"#\" onclick=\"editToggle(); return false;\">Edit Mode: <span style=\"color:red;\">OFF</span></a></span>"; 
```

[从这里](http://robertnyman.com/2008/05/27/the-ultimate-getelementsbyclassname-anno-2008/)`getbyclass.js`可以看到代码。

* * *

为了回应下面的答案，我试过这个：

```
function editToggle(toggle){
    var list = getElementsByClassName("editp");
    if (toggle == "off"){
    //getElementsByClassName("editp").style.display ="none";
        for (index = 0; index < list.length; ++index) {
            list[index].style.display ="none";
        }
    document.getElementById('editToggle').innerHTML="<a href=\"#\" onclick=\"editToggle(\"off\"); return false;\">>Editfalse;\">Edit Mode: <span style=\"color:red;\">OFF</span></a>";
    toggle="on";
    }else{
    //getElementsByClassName("editp").style.display ="inline";
        for (index = 0; index < list.length; ++index) {
            list[index].style.display ="inline";
        }
    document.getElementById('editToggle').innerHTML="<a href=\"#\" onclick=\"editToggle(\"on\"); return false;\">>Editfalse;\">Edit Mode: <span style=\"color:green;\">on</span></a>";
    toggle="off";
    }
} 
```

但它仍然无法正常工作。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-06T10:40:31.693

`getElementsByClassName`返回一个集合。您可能需要遍历结果，如下所示：

```
var elements = document.getElementsByClassName('editp');
for(var i=0; i<elements.length; i++) { 
  elements[i].style.display='none';
} 
```

*   elements 是按它们在树中出现的顺序找到的元素的实时 NodeList。
*   names 是一个字符串，表示要匹配的类名列表；类名由空格分隔
*   getElementsByClassName 可以在任何元素上调用，而不仅仅是在文档上。调用它的元素将用作搜索的根。

应该通过[这个](https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByClassName)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T10:40:18.353

`getElementsByClassName`返回 a `NodeList`（或者如果它不是内置的，则返回一个数组），但是您`HTMLElement`通过直接引用其上的`style`属性来使用它，就好像它是 a 一样：

```
getElementsByClassName("editp").style.display ="none";
// here ------------------------^ 
```

您应该在 JavaScript 控制台中看到一个错误，因为您正在尝试`display`从`undefined`(since `getElementsByClassName("editp").style`will be `undefined`) 检索该属性。

如果要对第*一个*匹配元素进行操作：

```
var elm = getElementsByClassName("editp")[0];
if (elm) {
    elm.style.display ="none";
} 
```

...或者如果您想对所有这些采取行动：

```
var index;
var list = getElementsByClassName("editp");
for (index = 0; index < list.length; ++index) {
    list[index].style.display ="none";
} 
```

* * *

**更新**：

在某些时候，您编辑了问题并`var toggle = "off"`从代码中删除（在全局范围内，就在函数上方）并`toggle`为`editToggle`. 但是你没有`editToggle`根据引用的标记传递任何东西，即使你是，`toggle`如果它是一个函数参数，在函数中设置一个新值也不会产生任何持久的影响，因为在函数返回后没有任何东西引用它.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T10:40:46.283

您创建的标记中可能有未终止的字符串文字。似乎还存在其他帖子中提到的其他问题。

改变：

```
 "<a href=\"#\">Edit Mode: <span style=\"color:red;>OFF</span></a>"; 
```

至

```
"<a href=\"#\">Edit Mode: <span style=\"color:red;\">OFF</span></a>"; 
```

这种情况也存在于您创建的其他标记中。

改变：

```
"<a href=\"#\">Edit Mode: <span style=\"color:green;>on</span></a>"; 
```

至

```
"<a href=\"#\">Edit Mode: <span style=\"color:green;\">on</span></a>"; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-06T10:56:50.067

您似乎在`var toggle="off"`.

确保`editToggle()`在代码中的某处调用。

我建议您使用浏览器或扩展程序中内置的检查器。例如 Firefox 或 Chrome Inspector 的 Firebug 扩展。使用控制台调试并查看您的 javascript 中是否存在错误。

# ruby - RSpec -- 测试方法是否调用了它的块参数

> ID：13249177
> 
> 赞同：4
> 
> 时间：2012-11-06T10:35:23.240
> 
> 标签：ruby, methods, rspec, call, block

我有一个将代码块作为参数的方法。问题是：如果这个方法调用了块，如何使用 RSpec 进行测试？

可以在方法需要的任何范围内评估该块，不一定使用 a`yield`或`block.call`。它被传递给另一个类，或者在匿名类对象或其他地方对其进行评估。为了使测试通过，作为方法调用的结果，在某处评估块就足够了。

有没有办法使用 RSpec 来测试这样的东西？

* * *

另请参阅[this](https://stackoverflow.com/questions/13279966/rspec-test-if-block-called-with-block-defined-in-before)以了解更复杂的情况`lets`和模拟。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-08-23T15:07:55.287

我喜欢使用`throw`而不是`raise`解决这类问题，因为它不能被任意救援处理程序救援。所以它可能看起来像这样：

```
my_proc = proc { throw :my_proc_was_called }
expect {
  my_proc.call
}.to throw_symbol :my_proc_was_called 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T17:07:50.303

我通常会做类似的事情

```
a = 1
b.go { a = 2}
a.should == 2 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T15:06:58.493

感谢戴夫牛顿在上面评论中的建议，我做了这样的事情：

```
 it "should run block defining the node" do
   message="This message is raised if block is properly evaluated."
   expect do
     node do
       raise message
     end 
   end.to raise_error message
 end 
```

如果出现错误，则会打印消息：

```
 Failure/Error: expect do
   expected Exception with "This message is raised if block is properly evaluated." but nothing was raised 
```

我觉得信息量足够大。

再次感谢您的帮助！

# ios - 使用 NSURL 类引用从视频应用程序中查看我的应用程序中的视频

> ID：13249181
> 
> 赞同：1
> 
> 时间：2012-11-06T10:35:40.910
> 
> 标签：ios, ipad, video, local, nsurl

我的 ipad 本地视频库中有视频。当我在我创建的应用程序中单击视频时，视频会在本地视频库中打开，而不是在应用程序中。有谁知道我如何从本地视频库中获取在应用程序中播放的视频？使用 NSURL 类参考

我已经与我认识的大多数开发人员交谈过，他们告诉我这是不可能的。我觉得如果有意愿的话，会有一点帮助的方法:)

# jquery - 具有许多元素的 jQuery BlockUI

> ID：13249182
> 
> 赞同：1
> 
> 时间：2012-11-06T10:35:44.270
> 
> 标签：jquery, jquery-ui

我知道我们可以使用 jQuery BlockUI 阻止任何元素：

```
<script type="text/javascript"> 
$(document).ready(function() { 
    $('#blockButton2').click(function() { 
        $('div.test').block({ 
            message: '<h1>Processing</h1>', 
            css: { border: '3px solid #a00' } 
        }); 
    }); 
}); 
```

但是，如何在同一时间和行动中阻止许多元素？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T10:44:04.400

您可以根据需要阻止任意数量的元素。您的代码将适用于所有具有类文本的 div 元素，而不仅仅是一个。

请参阅此[演示](http://jsfiddle.net/9khTc/1/)。

使用此 HTML 标记：

```
<div class="block">Lorem Ipsum</div>
<div>Second div</div>
<div class="block">Third div</div>
<input type="button" id="block" value="block" /> 
```

此脚本将同时阻止第一个和第三个 div：

```
$('#block').click(function() {
    $('div.block').block();
});​ 
```

# compiler-construction - 有没有办法继续部分完成的 MinGW 构建？

> ID：13249186
> 
> 赞同：1
> 
> 时间：2012-11-05T19:49:35.730
> 
> 标签：compiler-construction, build

我只是想熟悉 MinGW（以及更复杂的命令行编译器工具）

我有一个非常庞大的项目要构建，我成功地使用 CMake 生成了 makefile，并开始了 mingw。

经过一个多小时的努力，成功搭建了几十个库，搭建以报错告终。看来我在 CMake 中添加了一个我的系统不支持的选项。我的问题是，我想不出一种方法来跳过该库并继续构建过程。如果我删除 CMake 中的选项并再次启动 mingw，它会从头开始并重建所有内容，甚至是那些已经构建的库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T20:05:23.577

尝试添加 -k install 标志，即：

```
make -k install 
```

生成make文件时。

======================

根据我们下面的讨论：

*   你所要求的不可能是afaik。Make 风格构建系统被设计为在错误时失败 - “不部分安装策略”。如果构建没有 100% 完成，系统将中止。
*   Makefile 创建者应该检查每个依赖项并单独决定每个依赖项是明确的还是可选的要求。

# model - MVC4 - EditorFor 助手不反映模型或 DefaultValue 的变化

> ID：13249191
> 
> 赞同：0
> 
> 时间：2012-11-06T10:36:17.037
> 
> 标签：model, asp.net-mvc-4, helpers

在我的 MVC4 项目中，操作后，我的 HtmlEditorFor 助手不会反映模型属性的变化，也不会考虑`[DefaultValue("Some string ...")]`.

在这里我如何编写 EditorFor 代码，也许它有问题？

```
@Html.EditorFor(model => model.Name) 
```

但是这种“纯”的 html/value 行确实

```
<h2>@this.Model.SomePropertyThatHasChanged</h2> 
```

如果你能帮助我，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T11:56:46.973

我`this.ModelState.Clear();`之前添加`return this.View([View name], [Model]);`，现在它可以反映模型更改。

这并没有解决 DefaultValues 根本不显示的问题。

# wix - 确定先安装哪个快捷方式

> ID：13249196
> 
> 赞同：0
> 
> 时间：2012-11-06T10:36:32.190
> 
> 标签：wix

我正在安装许多多个快捷方式，并注意到第一个安装的快捷方式似乎会在您单击开始按钮时出现，然后剩余的快捷方式位于所有程序 - 产品名称下。我的问题是我希望我的主要产品作为一个大图标出现在开始菜单中。我的其他快捷方式之一正在显示。这是我的代码：

此快捷方式应仅位于所有程序 - 产品名称 - 记录器文件夹中。它是，但它也在主开始菜单上。

```
 <Component Id="Logger1Shortcut" Guid="31987043-21B3-49F7-ADA2-A2BBC6FA446D">
    <Condition><![CDATA[(NUMLOGGERS >= "1") AND (NUMLOGGERS <> "0")]]></Condition>
    <Shortcut Id="Logger1Shortcut" Directory="ProgramMenuSubFolder" Name="LOGGER 1" Icon="stand_cf_Logger1" IconIndex="0" Target="[BIN]stand_cf.exe">
      <Icon Id="stand_cf_Logger1" SourceFile="$(var.Bin)\stand_cf.exe"/>
    </Shortcut>
    <RegistryValue Root='HKCU' Key='Software\Measuresoft\[PRODUCTNAME]' Type='string' Value='' KeyPath='yes' />
  </Component> 
```

这是我的主要应用程序组件：

```
 <Component Id="MainApplicationShortcut" Guid="C130E034-BDC0-4700-A924-60C816AF6D01">
    <Shortcut Id="MainApp" Directory="ProgramMenuDir" Name="Orchestrator" Icon="mainmenu.exe" IconIndex="0" Target="[BIN]mainmenu.exe">
      <Icon Id="mainmenu.exe" SourceFile="$(var.Bin)\mainmenu.exe"/>
    </Shortcut>

    <Shortcut Id="ChannelMonitor" Directory="ProgramMenuDir" Name="Channel Monitor" Icon="mon_nt.exe" IconIndex="0" Target="[BIN]mon_nt.exe">
      <Icon Id="mon_nt.exe" SourceFile="$(var.Bin)\mon_nt.exe"/>
    </Shortcut>
    <RemoveFolder Id='ProgramMenuDir' On='uninstall' Directory='ProgramMenuDir'/>
    <RegistryValue Root='HKCU' Key='Software\Measuresoft\[PRODUCTNAME]' Type='string' Value='' KeyPath='yes' />
  </Component> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T07:01:23.467

不，您无法确定快捷方式的安装顺序。要实现您想要的，您应该以另一种方式进行：用 . 标记所有辅助快捷方式[`System.AppUserModel.ExcludeFromShowInNewInstall`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd391568%28v=vs.85%29.aspx)。

只需将[`ShortcutProperty`](http://wix.sourceforge.net/manual-wix3/wix_xsd_shortcutproperty.htm)元素添加为您的子元素`Shortcut`：

```
<Shortcut Id="ChannelMonitor" …&gt;
    <Icon … />
    <ShortcutProperty Key="System.AppUserModel.ExcludeFromShowInNewInstall" />
</Shortcut> 
```

# php - 使用 PHP 在 HTML 选择元素中保留用户选择

> ID：13249199
> 
> 赞同：1
> 
> 时间：2012-11-06T10:36:44.810
> 
> 标签：php, select, input

当并非所有字段都未正确填写并提交表单时，我一直在努力使用**select 元素来保留用户输入。**

```
<form action="" method="post">
  First name: <input type="text" name="fname"><br>
  Last name: <input type="text" name="lname"><br>
    <select name="cars">
      <option value="volvo">Volvo</option>
      <option value="saab">Saab</option>
      <option value="mercedes">Mercedes</option>
      <option value="audi">Audi</option>
    </select>
  <input type="submit" value="Submit">
</form> 
```

使用输入元素，我可以使用这样的简单函数：

```
function input_value($x){
    if(isset($_POST[$x])) {
    echo $_POST[$x];
    }else{
    echo '';
    }
} 
```

并像这样调用它：

```
<input type="text" name="fname" value="<?php input_value('fname');?>"> 
```

并且价值正在被保留。但对于选择元素，它不是。

因此，如果可能的话，我将非常感谢有关如何使用自定义函数简单地保留用户输入的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T10:41:45.953

这不起作用，因为您不能只为您的选择输入设置一个值。您需要将`"selected"`属性添加到`<option>`先前选择的属性中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T10:44:11.380

select 元素没有`value`设置默认选定选项的属性。相反，选项元素有一个`selected`属性。如果将它包含在选项元素中，它会显示“嘿，我被选中了”。;)

我建议您将函数中的`echo`语句替换为：`input_value()``return`

```
function input_value($x){
    if (isset($_POST[$x])) {
        return $_POST[$x];
    }
    else {
        return '';
    }
} 
```

这使您可以执行以下操作：

```
<select name="cars">
    <option value="volvo" <?php echo (input_value('cars') == 'volvo') ? 'selected="selected"' : ''; ?>>Volvo</option>
    <option value="saab" <?php echo (input_value('cars') == 'saab') ? 'selected="selected"' : ''; ?>>Saab</option>
    <option value="mercedes" <?php echo (input_value('cars') == 'mercedes') ? 'selected="selected"' : ''; ?>>Mercedes</option>
    <option value="audi" <?php echo (input_value('cars') == 'audi') ? 'selected="selected"' : ''; ?>>Audi</option>
</select> 
```

不要忘记`echo`“普通”文本字段中的函数结果：

```
<input type="text" name="fname" value="<?php echo input_value('fname');?>"> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T10:46:21.810

在你的选择框中试试这个

```
<option value="volvo" <?php echo (input_value('cars') == 'volvo') ? 'selected="selected"' : ''; ?> >Volvo</option> 
```

编辑：

`input_value($x)`将您的功能修改为

```
function input_value($x){
    if (isset($_POST[$x])) {
        return $_POST[$x];
    } else {
        return '';
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T10:38:42.573

您只能[`jquery-cookie`](https://github.com/carhartl/jquery-cookie)用于读取、写入和删除 cookie。

你可以这样做：

1.  创建会话 cookie：

    ```
     $.cookie('userInput', 'selectValue'); 
    ```

2.  读取 cookie：

    ```
     $.cookie('userInput'); // => "selectValue" 
    ```

3.  使用它，`selected`设置`option`.

### 或者对于`$_POST`函数：

您需要以这种方式使用代码：

```
<select name="cars">
  <option value="volvo"<?php echo (input_value('cars') == 'volvo') ? ' selected="selected"' : ""; ?>>Volvo</option>
  <option value="saab"<?php echo (input_value('cars') == 'saab') ? ' selected="selected"' : ""; ?>>Saab</option>
  <option value="mercedes"<?php echo (input_value('cars') == 'mercedes') ? ' selected="selected"' : ""; ?>>Mercedes</option>
  <option value="audi"<?php echo (input_value('cars') == 'audi') ? ' selected="selected"' : ""; ?>>Audi</option>
</select> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-06T10:41:28.043

请试试这个

```
function input_value($x){
        if(isset($_POST[$x])) {
        return $_POST[$x];
        }else{
        return null;
        }
    } 
```

你可以这样打电话

`<input type="text" name="fname" value="<?php echo input_value('fname');?>">`

# url - sed 更改配置文件中的 url 子变量

> ID：13249200
> 
> 赞同：0
> 
> 时间：2012-11-06T10:36:49.430
> 
> 标签：url, variables, sed, substitution

我需要更改配置文件中的一行。这条线是

```
http://127.0.0.1:8080/subfolder/subfolder. 
```

我正在从客户端收集 URL 并将其存储在名为 variables.sh 的文件中，并将其包含在脚本文件中，该脚本文件被调用以更改包含列出的默认 url 的配置文件。

脚本是：

```
. variables.sh

echo " $dbuser is database user name "

echo " "

cd /home/$dbuser/ris/config

if [ -f /home/$dbuser/ris/config/slsservers.list ];

   then

        echo "$url is now being added "

        cat slsservers.list | \sed 's|127.0.0.1:8190|$url|g' > slsservers.list.1

           echo "URL changed and temp file slservers.list.1 created"

    else

         echo "slsservers.list missing or corrupt"

 fi 
```

问题是输出是 http://$url/subfolder/subfolder。我需要什么来代替收集的 url

```
127.0.0.1:8080? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T10:46:05.793

您需要使用双引号而不是单引号。单引号使所有内容都成为“文字”，而双引号将允许变量扩展。

例如，[这里](http://www.howtogeek.com/howto/29980/whats-the-difference-between-single-and-double-quotes-in-the-bash-shell/)很好地证明了这一点。

# e4 - 以编程方式加载 e4 应用程序模型

> ID：13249203
> 
> 赞同：0
> 
> 时间：2012-11-06T10:36:54.937
> 
> 标签：e4

我正在尝试以编程方式加载 e4 应用程序模型，以便能够迭代模型元素。目前我面临的问题是，我不知道如何正确加载它。

鉴于`Application.e4xmi`我尝试使用简单[加载现有模型](http://www.vogella.com/articles/EclipseEMFPersistence/article.html#javacode_load)来简单地加载文件，但这并没有导致填充资源（null）。

然后我发现`org.eclipse.e4.tools.emf.ui.common.XMIModelResource`，但是我无法使用以下代码实例化模型

```
URI uriNew = URI.createURI("file:///Users/marco/github-clones/osara/at.osara.rcp/Application.e4xmi");
XMIModelResource xmimr = new XMIModelResource(uriNew); 
```

当我得到`Package with uri 'http://www.eclipse.org/ui/2010/UIModel/application' not found.`这个ecore但是位于已经导入的`org.eclipse.e4.ui.model.workbench`

有人对此有提示吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T08:52:02.187

您可以使用注入的`EModelService`或`MApplication`类。 [这里](http://www.vogella.com/blog/2010/12/01/e4-emodelservice/)有更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-10T08:26:32.020

原因很简单；相应的 EMF 模型尚未在工作区中注册。为此，必须在加载模型之前执行以下代码：

```
import org.eclipse.e4.ui.model.application.impl.ApplicationPackageImpl;
ApplicationPackageImpl.init(); 
```

下面是一个完整的代码示例，用于在独立的 main 方法中加载 Eclipse 4 应用程序模型：

```
import org.eclipse.e4.ui.internal.workbench.E4XMIResourceFactory;
import org.eclipse.e4.ui.model.application.MApplication;
import org.eclipse.e4.ui.model.application.impl.ApplicationPackageImpl;
import org.eclipse.emf.common.util.URI;
import org.eclipse.emf.ecore.resource.Resource;
import org.eclipse.emf.ecore.resource.ResourceSet;
import org.eclipse.emf.ecore.resource.impl.ResourceSetImpl;

public class LoadAppModel {

    private static ResourceSet resourceSet = new ResourceSetImpl();

    public static void main(String[] args) {
        ApplicationPackageImpl.init();
        URI uri = URI
                .createURI("file:///Users/marco/git/pharmacy_at/at.medevit.ecrit.pharmacy_at.application/Application.e4xmi");

        resourceSet.getResourceFactoryRegistry().getExtensionToFactoryMap()
                .put("e4xmi", new E4XMIResourceFactory());

        Resource res = resourceSet.getResource(uri, true);
        MApplication app = (MApplication) res.getContents().get(0);
        System.out.println(app.getElementId());
    }

} 
```

# c++ - boost::apply_visitor 的返回类型是什么（延迟版）

> ID：13249204
> 
> 赞同：3
> 
> 时间：2012-11-06T10:36:55.743
> 
> 标签：c++, boost, apply-visitor

在下面的代码中，我将延迟的结果存储`apply_visitor`在一个`auto`变量中。我可以用什么类型代替`auto`？可以使用`std::function`吗？

```
#include "boost/variant/variant.hpp"
#include "boost/variant/apply_visitor.hpp"

using namespace std;
using namespace boost;

class times_two_generic
    : public boost::static_visitor<>
{
public:

    template <typename T>
    void operator()( T & operand ) const
    {
        operand += operand;
    }

};

int main(int argc, char **argv) 
{
    variant<int, string> v = 5;
    times_two_generic visitor;

    cout << v << endl;

    apply_visitor(visitor)(v); // v => 10
    auto appliedVisitor = apply_visitor(visitor);
    appliedVisitor(v); // v => 20

    cout << v << endl;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T10:48:23.560

根据[http://www.boost.org/doc/libs/1_52_0/doc/html/boost/apply_visitor.html](http://www.boost.org/doc/libs/1_52_0/doc/html/boost/apply_visitor.html)，实际类型是[`apply_visitor_delayed_t<times_two_generic>`](http://www.boost.org/doc/libs/1_52_0/doc/html/boost/apply_visitor_delayed_t.html).

由于它只是另一个函数对象，因此您也可以使用`std::function`，但这比使用真实类型的成本更高。

# c# - 在运行时检查属性类型并将相同的类型赋予通用 lambda 表达式参数 T

> ID：13249206
> 
> 赞同：2
> 
> 时间：2012-11-06T10:36:58.190
> 
> 标签：c#, .net, linq, generics, lambda

我有一些代码片段如下：

想通过在运行时检查类型来解决这种情况。

```
PropertyInfo pi = type.GetProperty("propertyName");

var expression = new Object(); // this give me error after expression runs!

    // Want to resolve this conditation by checking the type at runtime.
    if (pi.PropertyType == typeof(DateTime))
            {
               // Want to pass the generic type parameter which has a same type created at runtime by identifying the property type.
                expression = BuildExpression<T, DateTime>(data, group.Member);
            }

private Func<T, V> BuildExpression<T, V>(IEnumerable<T> items, string propertyName)
    {
      Type type = typeof(T);
      PropertyInfo pi = type.GetProperty(propertyName);
      Type PropertyType = pi.DeclaringType;
      var parameter = Expression.Parameter(typeof(T), propertyName);
      var cast = Expression.TypeAs(parameter, pi.DeclaringType);
      var getterBody = Expression.Property(cast, pi);
      var exp = Expression.Lambda<Func<T, V>>(getterBody, parameter);
      return exp.Compile();
    } 
```

**问题：** 我必须在类型上写条件我必须通过反射检查属性的类型，然后必须构建表达式。

**我想要什么：** 我想检查属性类型的运行时时间，并想构建与属性类型相同的该类型的运行时通用参数。

基本上我想删除*类型检查*`If`的条件，我想要的是，代码应该并传递相同的类型，这样我就不必检查所有有条件的类型。像*`automatically detect the property type``Generic parameter argument``If``string, decimal, double etc..`*

 *您能否让我知道该解决方案，因为我想`property`在运行时检查类型并希望使用`Generic parameter type`与*property 相同的类型*进行创建。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T10:49:52.480

有一个返回的方法`Func<T,V>`（对于 object`T`和 member-type `V`）是有问题的，因为在运行时你不能真正用它做任何有用的事情。您不能在编译时不知道`T`and的情况下将其分配给类型化委托，并且使用不是一个好主意。坦率地说，您最好构建一个，并在运行时处理。反射和泛型不能很好地混合。`V``DynamicInvoke``Func<object,object>``object`

```
private static Func<object, object> BuildExpression(
    Type type, string propertyName)
{
    var parameter = Expression.Parameter(typeof(object));
    var body = Expression.TypeAs(Expression.PropertyOrField(Expression.TypeAs(
        parameter, type), propertyName), typeof(object));
    return Expression.Lambda<Func<object, object>>(body, parameter).Compile();
} 
```

但是，此时您可以，IMO，只需切换到[FastMember 之](http://nuget.org/packages/FastMember)类的库，并使用基于名称的访问：

```
var accessor = TypeAccessor.Create(type);
var obj = ...
var propVal = accessor[obj, propertyName]; 
```*

# jquery - 无法弄清楚如何从我的 ajax 控制器的 symfomy2 获得响应

> ID：13249208
> 
> 赞同：0
> 
> 时间：2012-11-06T10:37:05.410
> 
> 标签：jquery, ajax, symfony

我已经实现了一个通过 ajax 成功提交其值的登录表单。当值与数据库之一匹配时，一切都已设置，当值不匹配时，用户自然不会连接。

问题是，作为控制器的响应，我总是得到 200 状态，我无法判断该过程是对还是错。

我知道 php 在技术上一切正常时总是返回 200 状态，但是我如何设置并从我的控制器获取正确的值，我可以在我的 javascript 代码中读取并能够判断事情是否正常？

这是我的代码的一些部分：

//控制器

```
[...]
if ($logForm -> isValid()) {
            //Check user infos in database
            [...]

            if ( ! $user) {
                //We set an error
                $resp = array('responseCode' => 400, "message" => "Bad authentification");
            } else {

                $resp = array('responseCode' => 200, "message" => "Good authentification");
            }

            $resp = json_encode($resp);
            return new Response($resp, 200, array('Content-Type'=>'application/json'));
        }
[...] 
```

//jQuery

```
$('#signInForm').submit(function(e) {
    e.preventDefault();
    var form = $(this).closest('form');
    //console.log(form);

    if(form) {
        $.ajax({
            type: "POST",
            url: Routing.generate('ajax_sign_in'),
            data: form.serialize(),
            cache: false,
            statusCode: {
                200: function(v) {
                    console.log("Success");
                },
                400: function(e) {
                    console.log("Error");
                }
            },
            dataType: 'json',
        });
    } else {
        alert("Error submitting form");
    }
}) 
```

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T20:10:47.290

谢谢你们花时间帮助我！我终于让它工作了。此代码正在运行。问题来自路由。由于我在激活 javascript 和未激活 javascript 时都在处理，所以当我只使用一个时，我应该使用两条不同的路由。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T15:12:37.940

也许我错过了一些东西，但为什么不这样做呢？

```
return new Response($resp, $resp['responseCode'], array('Content-Type'=>'application/json')); 
```

# python - 使用 python 2.7.3 和 pysqlite2 2.6.3 升级 sqlite3 版本

> ID：13249211
> 
> 赞同：5
> 
> 时间：2012-11-06T10:37:20.513
> 
> 标签：python, windows, sqlite

再会。

我最近一直在学习 python 和 sqlite，安装最新版本的 sqlite3 (3.7.14.1) 时遇到问题。我在 Windows 7 中使用 python 2.7.3 并使用 Windows 安装程序安装了最新的 pysqlite2 版本（2.6.3）。我使用以下代码导入 pysqlite 并检查版本，结果如​​下：

```
>>> from pysqlite2 import dbapi2 as sqlite3
>>> sqlite3.version
'2.6.3'
>>> sqlite3.sqlite_version
'3.7.6.2' 
```

根据上面的代码，使用的 sqlite3 版本是较旧的版本。我已经下载了最新的 sqlite3.dll 并覆盖了 Python27\DLLs\ 目录中的那个。但是当我运行 sqlite3.sqlite_version 时，它仍然给我旧版本。但是，当使用默认的 python sqlite3 模块时，它会显示模块的旧版本（2.6.0）和我刚刚复制的 sqlite3.dll 的最新版本。请参见下面的代码：

```
>>> import sqlite3
>>> sqlite3.version
'2.6.0'
>>> sqlite3.sqlite_version
'3.7.14.1' 
```

我的问题是，如何升级 pysqlite2 2.6.3 的 sqlite3 3.7.14.1？谁能帮我？

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T10:55:07.673

`pysqlite2`您可能从[这里](http://code.google.com/p/pysqlite/downloads/list)获得的安装程序包含`sqlite3`编译到`_sqlite.pyd`的，它不使用在 DLLs 目录中找到的 dll（该 dll 仅由`sqlite3`模块使用）。

所以如果你想升级使用的sqlite版本，你必须`pysqlite2`自己重新编译。

或者，与`pysqlite2`几乎相同`sqlite3`，您也可以将完整的包替换为`pysqlite2.py`仅包含的文件：

```
from sqlite3 import * 
```

# c# - 将文本 SQL 与 LINQ 结合使用

> ID：13249220
> 
> 赞同：10
> 
> 时间：2012-11-06T10:38:12.303
> 
> 标签：c#, sql, sql-server, linq, linq-to-sql

我目前在为我的项目使用 LINQ to SQL 时遇到问题。这是因为大部分冗长的 SQL 查询（或者更确切地说是*视图*）都被硬编码到 C# 中，而我们一直在做的就是使用`context.Database.SqlQuery<ClassName>(sql, sqlParams)`.

它通常非常有效，但现在我们需要一些更有活力的东西。我们需要插入类似的东西`.Where(x => x.Name.Contains("Anonymous")).Take(20)`或其他东西。但是，直接插入前面提到的代码行会导致以下结果：

`context.Database.SqlQuery<ClassName>(sql, sqlParams).Where(x => x.Name.Contains("Anonymous")).Take(20);`

虽然它确实有效并提取了名称包含“匿名”的前 20 条记录，但性能非常糟糕。它在幕后所做的是从该表中获取所有记录，然后在将它们加载到内存后最终过滤它们。

然后我想问一下，有没有办法将文本 SQL 转换为 LINQ，或者将 LINQ 转换为 SQL，这样我就可以在一个语句中执行我的文本 SQL 和 LINQ。如果您实际上没有解决方案，我也很乐意提出建议......！

**编辑：**我考虑过使用表达式树，但我不确定它们如何真正适合图片。另外，我考虑过使用数据库视图。但是有这么多的视图（每个表相当多），将所有内容移植到 MS SQL 然后重写所有查询逻辑肯定会很麻烦。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-14T08:37:54.003

您不能真正做到这一点，因为表达式树从动态构建的表达式生成 SQL，即从您可以“编译”SQL 的表达式中生成 SQL，您所要求的类似于要求“SQL-to-LINQ 反汇编程序”。

我对您的问题的建议是 - 获取您的 SQL 查询并将它们保存为数据库中的视图，然后将您的视图映射到 LINQ-To-SQL .dbml 文件中，并在其上添加您的 LINQ 查询。

```
context.viewSavedFromYourSql.Where(x => x.Name.Contains("Anonymous")).Take(20); 
```

这样 LINQ 将从您的视图中查询，并仅返回您需要的数据。

*（您也可以使用表值函数代替视图）*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T11:25:40.173

[观点]

没有大量的努力是不可能的。

您似乎要求的是 sql -> sql 模型标记器或完整的 sql -> IQueryable 标记器，这两者都将是实施的重大努力。

我的建议是编写一个粗略的 sql 解析器，然后放入所需的语句，或者将您的视图重写为 LinqToDatabase 查询。

作为解释，当您创建 IQueryable 表达式时，其表达式树是查询的对象逻辑，然后您的提供程序采用该逻辑并尝试将其映射到一系列要执行的 sql 语句和结果的映射器。您似乎要求相反，因此您希望将一系列 sql 语句转换回表达式树。

这对我来说似乎有点双重工作，因为您将映射到表达式树，附加到它，然后映射回来。尤其是因为一个完美的地图可能是不可能的，所以你会发现你会得到等价的但不是你期望的 sql。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-14T07:44:41.130

您可能想看看[Linker](http://www.sqltolinq.com/)。

它将 SQL 语句转换为 LINQ 语句。显然它不能转换所有类型的 SQL 查询，但是如果您想将所有硬编码的 SQL 查询转换为 LINQ 语句，它对您有很大帮助。

对不起，如果它不是免费的！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-14T08:47:14.643

您不能将您的查询存储到存储过程中并使用您的搜索文本作为参数调用它们吗？可以通过您的 LINQ-To-SQL 调用过程。那应该可以节省你一些时间..

有关调用简单/复杂过程的更多信息的链接：http: [//www.codeproject.com/Articles/230380/LINQ-to-SQL-Advanced-Concepts-and-Features](http://www.codeproject.com/Articles/230380/LINQ-to-SQL-Advanced-Concepts-and-Features)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-18T21:46:22.293

要查看 Visual Studio 中生成的 SQL，请设置断点并将鼠标光标移动到变量上（linq 查询不应以 .ToList() 或 ToArray() 结尾）或使用此方法[如何查看 LINQ 生成的 SQL 语句？](https://stackoverflow.com/questions/4899974/how-to-view-linq-generated-sql-statements). 要将 sql 转换为 linq，请看这里：[http ://www.sqltolinq.com/](http://www.sqltolinq.com/)

您可以创建快速且高质量的存储过程，并将其添加到数据上下文中以便在 linq 查询中使用。

# scp - 无法通过 scp 发送文件

> ID：13249225
> 
> 赞同：1
> 
> 时间：2012-11-06T10:38:42.683
> 
> 标签：scp

我有两个不同主机的 root 权限。但是我无法通过 scp 命令将文件从一台主机发送到另一台主机。问题是什么？请帮助我。

这是我使用的命令及其输出

```
 scp -vr cvschangelogbuilder_zivah_miscellaneous* root@192.168.1.11:/var/www/cvsreport/images/ZIVAH.zivah_miscs
Executing: program /usr/bin/ssh host 192.168.1.11, user root, command scp -v -r -d -t -- /var/www/cvsreport/images/ZIVAH.zivah_miscs
OpenSSH_5.5p1 Debian-6, OpenSSL 0.9.8o 01 Jun 2010
debug1: Reading configuration data /etc/ssh/ssh_config
debug1: Applying options for *
debug1: Connecting to 192.168.1.11 [192.168.1.11] port 22.
debug1: Connection established.
debug1: permanently_set_uid: 0/0
debug1: identity file /root/.ssh/id_rsa type 1
debug1: Checking blacklist file /usr/share/ssh/blacklist.RSA-2048
debug1: Checking blacklist file /etc/ssh/blacklist.RSA-2048
debug1: identity file /root/.ssh/id_rsa-cert type -1
debug1: identity file /root/.ssh/id_dsa type -1
debug1: identity file /root/.ssh/id_dsa-cert type -1
debug1: Remote protocol version 2.0, remote software version OpenSSH_4.3p2 Debian-5
debug1: match: OpenSSH_4.3p2 Debian-5 pat OpenSSH_4*
debug1: Enabling compatibility mode for protocol 2.0
debug1: Local version string SSH-2.0-OpenSSH_5.5p1 Debian-6
debug1: SSH2_MSG_KEXINIT sent
debug1: SSH2_MSG_KEXINIT received
debug1: kex: server->client aes128-ctr hmac-md5 none
debug1: kex: client->server aes128-ctr hmac-md5 none
debug1: SSH2_MSG_KEX_DH_GEX_REQUEST(1024<1024<8192) sent
debug1: expecting SSH2_MSG_KEX_DH_GEX_GROUP
debug1: SSH2_MSG_KEX_DH_GEX_INIT sent
debug1: expecting SSH2_MSG_KEX_DH_GEX_REPLY
debug1: Host '192.168.1.11' is known and matches the RSA host key.
debug1: Found key in /root/.ssh/known_hosts:8
debug1: ssh_rsa_verify: signature correct
debug1: SSH2_MSG_NEWKEYS sent
debug1: expecting SSH2_MSG_NEWKEYS
debug1: SSH2_MSG_NEWKEYS received
debug1: Roaming not allowed by server
debug1: SSH2_MSG_SERVICE_REQUEST sent
debug1: SSH2_MSG_SERVICE_ACCEPT received
debug1: Authentications that can continue: publickey,password
debug1: Next authentication method: publickey
debug1: Offering public key: /root/.ssh/id_rsa
debug1: Authentications that can continue: publickey,password
debug1: Trying private key: /root/.ssh/id_dsa
debug1: Next authentication method: password
root@192.168.1.11's password: 
debug1: Authentication succeeded (password).
debug1: channel 0: new [client-session]
debug1: Entering interactive session.
debug1: Sending environment.
debug1: Sending env LANG = en_IN
debug1: Sending command: scp -v -r -d -t -- /var/www/cvsreport/images/ZIVAH.zivah_miscs
=================== SUPER USER Login; Please Take Care  ==================
GitServer:~# debug1: client_input_channel_req: channel 0 rtype exit-status reply 0
debug1: channel 0: free: client-session, nchannels 1
debug1: fd 0 clearing O_NONBLOCK
debug1: fd 1 clearing O_NONBLOCK
Transferred: sent 1864, received 2456 bytes, in 0.3 seconds
Bytes per second: sent 6134.7, received 8083.1
debug1: Exit status 0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-18T06:17:54.680

我遇到过类似的问题。那就是我有`scp`0 退出，但文件没有传输。

而且我在[这里](https://bugzilla.redhat.com/show_bug.cgi?id=20527)发现该线程是一个错误。[并在这里](https://unix.stackexchange.com/questions/18231/scp-fails-without-error)进行解释。

问题在于`echo`两个文件中的命令`/etc/bash.bashrc`和`~/.bashrc`. `scp`具有非交互式外壳的启动并从中读取数据。由于非交互式 shell 会读取这两个配置文件。它们的输出与来自 的输出`scp`将混淆`scp`，因此没有文件输出。

我检查了您的输出，发现有一行：

> =================== 超级用户登录；请保重==================

删除`echo`命令或添加

```
# If not running interactively, don't do anything
[[ $- == *i* ]] || return 
```

以防止出现问题。

# yii - 如何在 yii 中定义别名变量？

> ID：13249230
> 
> 赞同：3
> 
> 时间：2012-11-06T10:39:11.413
> 
> 标签：yii, yii-components

如何在 yii 中定义别名变量？在我的 yii 应用程序中，它们是 3 种类型的角色，

1.  超级管理员
2.  行政，
3.  用户，

超级管理员可以做管理员功能主义者和更多的事情，所以
我如何定义一个别名角色**super-admin==admin**但不是**反之亦然**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T11:13:25.830

请参阅指南中的[Auth Hierarchy](http://www.yiiframework.com/doc/guide/1.1/en/topics.auth#defining-authorization-hierarchy)，您可以定义*admin*是*super-admin*的子级，*user*也可以是*admin*的子级。

您可以使用扩展名，例如[yii-rights](http://www.yiiframework.com/extension/rights/)来处理这个问题。

# javascript - 在 jquery 执行之前触发 scrollTop

> ID：13249233
> 
> 赞同：1
> 
> 时间：2012-11-06T10:39:29.000
> 
> 标签：javascript, jquery, scroll, operator-precedence

我想不通。我正在调用一个基于以下加载的函数：

```
var option = self.document.location.hash.substring(1);

if(option != ''){
    subshow(option);
}

function subshow(this_id){

    if($('#'+this_id).hasClass('selected') == false){
        $('.page').wrap('<div class="click_off" onclick="javascript:deselect_block(event);" />');
        $('#'+this_id).children().show();
        $('#'+this_id).addClass('top');
        $('#'+this_id).addClass('selected');
        $(window).scrollTop();
} 
```

一切正常，除了`scrollTop()`在 jQuery 执行之前触发的调用。一旦`scrollTop()`执行，页面跳转到元素`#this_id`任何想法为什么？铬 22。

我也试过`document.body.scrollTop = 0;`, `window.scrollTo(0,0)`, 和

```
$('html').animate({scrollTop:0}, 'slow');//IE, FF
$('body').animate({scrollTop:0}, 'slow'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T10:46:17.500

如果这没有包含在 $(document).ready() 或类似的文件中，该函数将在 DOM 加载之前触发，因此所有与 DOM 相关的脚本将被跳过并且 $(window).scrollTop() 事件会开火。

如果您要将所有内容打包并等待 DOM 加载，它应该会为您提供所需的功能

# python - mincemeatpy 和 octopy 的替代品

> ID：13249234
> 
> 赞同：4
> 
> 时间：2012-11-06T10:39:29.590
> 
> 标签：python, mapreduce

简而言之，octopy 和 mincemeatpy 是 map-reduce（轻量级）的 python 实现，客户端可以以 ad-hoc 方式加入集群而无需任何安装（当然，python 除外）。这是项目详细信息[OCTOPY](http://code.google.com/p/octopy/)和[Mincemeatpy](https://github.com/michaelfairley/mincemeatpy)。

这些问题是它们需要将整个数据保存在内存中（包括中间键值对）。因此，即使对于中等大小的数据，它们也会抛出内存不足异常。

我使用它们的主要原因是：

1.  Python。
2.  无需集群安装。
3.  我只是原型，一旦我准备好我就可以直接移植算法。

所以我的问题是：是否有任何包可以处理相同的东西，但不仅仅是内存（可以处理中等大小的数据）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T12:16:02.093

尝试[PyMapReduce](https://github.com/fdouetteau/PyMapReduce)。它在您自己的机器上运行，但在多个进程上运行 - 因此您不需要构建主节点架构，并且它有很多运行器，例如[DiskBasedRunner](https://github.com/fdouetteau/PyMapReduce/blob/master/pymapreduce/__init__.py#L145)，它似乎将地图数据存储到临时文件并在减少它们之后。

# jquery - 如何使用 jquery 在标签标签中呈现 html 内容

> ID：13249240
> 
> 赞同：0
> 
> 时间：2012-11-06T10:39:49.920
> 
> 标签：jquery, asp.net-mvc

我正在研究 asp.net mvc。我有一个 javascript 变量，例如，

```
var note="&lt;strong&gt;&lt;em&gt;&lt;span style='color:#ed1c24;'&gt;Hai&lt;/span&gt;&lt;/em&gt;&lt;span style='color:#ed1c24;'&gt;Welcome&lt;/span&gt;&lt;/strong&gt; "; 
```

我需要在标签中显示为 html，所以我尝试了一下，

```
$('#lblNote').html(note); 
```

但它不会呈现 html 内容，而是按原样显示 html 标签，

```
<label id="lblNote"><strong><em><span style=""color:#ed1c24;"">
    Hai</span></em><span style=""color:#ed1c24;"">
    Welcome</span></strong> </label> 
```

请指导我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T10:45:20.523

您的代码中有两个语法错误，1\. 将换行引号更改为单引号或对其进行转义 2\. 删除换行符或连接字符串。

```
var note = '<strong><em><span style="color:#ed1c24;">Hai</span></em><span style="color:#ed1c24;">Welcome</span></strong>'; 
```

[http://jsfiddle.net/VsGqg/](http://jsfiddle.net/VsGqg/)

* * *

您应该替换字符：

```
$('#lblNote').html(note.replace(/&lt;/g, '<').replace(/&gt;/g, '>')) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T10:42:41.337

像这样逃避你的双引号

```
var note="<strong><em><span style=\"color:#ed1c24;\">
Hai</span></em><span style=\"color:#ed1c24;\">
Welcome</span></strong> "; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T10:42:56.203

尝试这个

```
var note="<strong><em><span style='color:#ed1c24;'>Hai</span></em><span style='color:#ed1c24;'>
Welcome</span></strong> ";

$('#lblNote').html(note); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-06T10:43:24.363

正确格式化您的字符串。注意应该是

```
var note="<strong><em><span style=\"color:#ed1c24;\">
Hai</span></em><span style=\"color:#ed1c24;\">
Welcome</span></strong> "; 
```

# android - Android MediaPlayer 上 seekBar 的奇怪流程

> ID：13249242
> 
> 赞同：2
> 
> 时间：2012-11-06T10:40:02.133
> 
> 标签：android, android-mediaplayer, media

我使用 MediaPlayer 从网络播放一首 MP3 歌曲。数据源是从网络下载的文件。这些文件以大块的形式出现。

假设我们有以下播放状态。

歌曲时长：4:00

播放器中加载的当前块：1:00

假设我想跳过歌曲的某些部分并向前搜索。我用 MediaPlayer.seekTo() 方法来做。如果我寻求定位 (1:40) 它没有正确执行，则搜索栏会在开始位置 (00:00) 并且播放器停止。

```
public static void seekTo(int progress) {
try {
    MediaPlayer mp = new MediaPlayer();
    mp.setDataSource(sFilePath);
    mp.prepare();
    int offset = (progress * mp.getDuration()) / 100;

    if (sCompleted)
        return;
    sLastSeek = offset;

    if (offset > sMediaPlayer.getDuration()) {
        sMediaPlayer.reset();
        sMediaPlayer.setDataSource(sFilePath);
        sMediaPlayer.prepareAsync();

    } else {
        sMediaPlayer.seekTo(offset);
    }
} catch (Exception ex) {
    ex.printStackTrace();
}
} 
```

# iphone - 选择一个国家时获取一个国家的状态

> ID：13249244
> 
> 赞同：3
> 
> 时间：2012-11-06T10:40:17.297
> 
> 标签：iphone, ios, ios5, ios4, ios6

我有一个代码，它显示所有国家，我们可以从中选择一个特定的国家。我现在想要的是当我选择一个国家时，我想查看那个国家的州列表。有人可以帮我吗？有它的方法或API吗？任何帮助表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T10:46:54.227

用于`db`获取`countries and its states`. 只需[下载](http://www.mediafire.com/?bvrl7zauyacj41q)它。

现在使用这个数据库进行如下查询：

```
NSString *queryString = [NSString stringWithFormat:@"select zone_id , name from
                   zone where country_id = %d", countryID]; //here countryID is country code 
```

**编辑**：通过这样的查询获取所有国家/地区：

```
NSString *queryStrAllCountries = [NSString stringWithFormat:@"select name from
                   countries"]; 
```

从使用如下查询选择的国家/地区获取 countryID：

```
 NSString *queryStrCountry = [NSString stringWithFormat:@"select country_id from
                   countries where name='%@'", countryName]; //provide country name selected 
```

请参阅提供相同信息的[此答案。](https://stackoverflow.com/questions/12348872/get-states-list-of-states-according-to-selected-country)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T10:49:15.600

这取决于您如何实施解决方案。我假设您使用的是`UITableView`.

那么最好的方法是将 a 设置`UINavigationController`为您的`rootViewController`（在 Interface Builders 主 nib 中）并将`UITableViewController`视图用作`UINavigationController`. 然后在第一个表格的一行被选项卡时**按下另一个。`UITableViewController`**

如果您已经掌握了一些关于 UINavigationController 的信息，这些行可能会对您有所帮助：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    DetailViewController *detailViewController = [[DetailViewController alloc] initWithNibName:@"DetailViewController" bundle:nil];
    [self.navigationController pushViewController:detailViewController animated:YES];
} 
```

如果您正在寻找有关 UINavigationBar 和 UITableView 的教程，请查看[此处](http://iosdeveloperzone.com/2011/05/18/tutorial-using-uitableview-adding-a-detail-view-in-xcode-4/)。如果您想自己搜索教程，请搜索`UITableView detail view`.

# excel-2007 - 连接公式

> ID：13249246
> 
> 赞同：0
> 
> 时间：2012-11-06T10:40:19.870
> 
> 标签：excel-2007

我使用以下公式将文本字符串组合到一个新单元格中，并在我的结果单元格中得到 FALSE。

=连接（左（D2,3），A2）

我正在尝试创建一个唯一的参考号，将客户名称的前三个字符与条目号相结合。

公式框向我显示了正确答案，但在我的结果单元格中显示为 FALSE，我不知道如何更正它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T10:43:06.227

请尝试以下公式：

```
=MID(D2,1,3) & A2 
```

# c# - 如何强制 IWpfTextView 刷新/使其布局无效？

> ID：13249249
> 
> 赞同：4
> 
> 时间：2012-11-06T10:40:39.870
> 
> 标签：c#, visual-studio-2010, visual-studio-2012, vsx

我目前正在编写一个提供自定义`TextFormattingParagraphProperties`（通过`ITextParagraphPropertiesFactoryService`）的扩展。这似乎工作正常，除非我想更新行的格式，因为文档中的其他地方发生了变化。

似乎`ITextParagraphPropertiesFactoryService.Create()`仅对编辑器确定为“无效”的每一行调用（如果该行更改或它在屏幕上可见）。

有什么方法可以强制 IWpfTextView 刷新它的布局（整个可见文档或理想情况下的特定行）？

PS`TextFormattingParagraphProperties`我正在使用的特定功能是`TextTabProperties`和AFAIK，这是修改标签的各个间距的唯一方法（即它们并不都是统一的）

谢谢

# java - 通过属性文件配置 Selenium Server

> ID：13249252
> 
> 赞同：0
> 
> 时间：2012-11-06T10:40:54.860
> 
> 标签：java, selenium, selenium-rc, ui-automation

Selenium 是否有这样的功能，可以在任何属性文件中提及 selenium 服务器配置，并且在启动服务器之前，它会自动从该属性文件中读取属性并相应地执行，即它可以执行多个实例，不同机器上的不同浏览器具有不同港口。我知道我们可以通过编程方式或通过 json 或命令提示符进行配置。

现在我正在手动编写一个属性文件，以编程方式读取它并以编程方式配置 selenium 服务器。

我正在使用这些方法配置 selenium，

```
Properties properties = new Properties();
DesiredCapabilities capability = DesiredCapabilities.firefox();
capability.setBrowserName(properties.get("Browser"));
capability.setVersion(properties.get("Version"));
capability.setPlatform(Platform.valueOf(properties.get("Platform")));
selenium = new DefaultSelenium(properties.get("Host"), Integer.parseInt(properties.get("Port")), properties.get("browser") ,url);
seleniumserver.start();
selenium.start(); 
```

如果 selenium 提供了一个功能，它可以读取属性文件、配置功能、主机等，然后它只是在调用 seleniumserver.start() 时运行服务器，我想要的是而不是做所有这些。和 selenium.start();

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T12:29:49.230

据我所知，没有这样的功能。您最好的选择是手动编写它，就像您现在正在做的那样。

在过去的项目中，我创建了一个配置类，它读取/接收 selenium 参数，然后用作任何有关配置的查询的单例。

# c# - 使用 savedialog 将图表保存为 txt 文件

> ID：13249254
> 
> 赞同：0
> 
> 时间：2012-11-06T10:40:57.823
> 
> 标签：c#, charts, savefiledialog

我有一个`listbox`，我用以下代码将它保存到一个 txt 文件中。

```
 String[] array = new String[listBox2.Items.Count];
            listBox2.Items.CopyTo(array, 0);
            Microsoft.Win32.SaveFileDialog saveFileDialog1 = new Microsoft.Win32.SaveFileDialog();

            saveFileDialog1.FileName = "per_" ;
            saveFileDialog1.DefaultExt = ".txt";
            saveFileDialog1.Filter = "Text files (.txt)|*.txt";

            Nullable<bool> res = saveFileDialog1.ShowDialog();

            if (res == true)
            {
                string filename = saveFileDialog1.FileName;

                File.WriteAllLines(filename, array, Encoding.UTF8);

                MessageBox.Show("File saved successfully");
            } 
```

我将图表保存到 c://

```
chart2.SaveImage("C://", System.Drawing.Imaging.ImageFormat.Jpeg); 
```

但是，我想将图表保存在用户选择的相同方向`savefiledialog`。我应该怎么做才能管理这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T11:12:41.567

试试这个

```
chart2.SaveImage(Path.GetDirectoryName(saveFileDialog1.FileName), System.Drawing.Imaging.ImageFormat.Jpeg); 
```

或这个

```
chart2.SaveImage(Path.GetDirectoryName(saveFileDialog1.FileName) + "\\chart.jpg", System.Drawing.Imaging.ImageFormat.Jpeg); 
```

如果 SaveImage 方法需要一个文件名

# css - Twitter Bootstrap 2.3.2 上的置顶页脚

> ID：13249256
> 
> 赞同：4
> 
> 时间：2012-11-06T10:41:00.867
> 
> 标签：css, twitter-bootstrap, responsive-design, sticky-footer, twitter-bootstrap-2

我希望我的引导页面的页脚始终位于页面底部，而我找到的解决方案对我不起作用。这里没有提出任何解决方案

[将页脚刷新到页面底部，twitter bootstrap](https://stackoverflow.com/questions/10099422/flushing-footer-to-bottom-of-the-page-twitter-bootstrap)对我不起作用。由于页面的高度不同，这很棘手，对吧？无论我尝试什么，页脚下方总是有空格。由于我不想要一个**固定的页脚**，我应该如何实现这一点，因为我的引导站点是响应式的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T08:20:58.777

我只需要坚持这个：

[http://getbootstrap.com/2.3.2/examples/sticky-footer.html](http://getbootstrap.com/2.3.2/examples/sticky-footer.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-22T21:48:45.280

考虑一下：[https ://gist.github.com/aalaap/3066704](https://gist.github.com/aalaap/3066704)

我必须进行一些调整才能使其与 Bootstrap 一起使用，但它运行良好并且不需要固定高度的页脚，这是响应式的。

# php - 在网站管理员工具中，googlebot 正在从服务器获取抓取错误 500

> ID：13249258
> 
> 赞同：0
> 
> 时间：2012-11-06T10:41:01.083
> 
> 标签：php, error-handling, googlebot

我注意到我的网站排名不如以前，当我检查网站管理员工具时，我发现 gooblebot 无法抓取我可以用浏览器完美抓取的页面，并且出现 500 错误。

这些网站不是 WordPress，而是使用 PHP。

什么可能导致这个问题？

这是 WMT 中的实际错误

```
HTTP/1.1 500 Internal Server Error
Date: Tue, 06 Nov 2012 21:04:38 GMT
Server: Apache
Expires: Thu, 19 Nov 1981 08:52:00 GMT
Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0
Pragma: no-cache
Set-Cookie: PHPSESSID=blkss9toirna36p2mjl44htv01; path=/
Vary: Accept-Encoding
Content-Encoding: gzip
Content-Length: 3840
Connection: close
Content-Type: text/html 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T13:39:38.903

您可能使用 .htaccess、robots.txt 或其他方式（可能是防火墙设置？）阻止了 Googlebot

一个。情况不妙

湾。您应该使用 WMT 来获取 Crawl stats/Crawl Error 报告并使用它们来更好地理解这个问题（在什么 URLs/这种情况发生的频率......）

另外，尝试查看您上次的 Google 缓存日期（直接搜索域并单击预览窗口中的缓存链接）

这可能是暂时的、与停机时间相关的问题，可以自行解决，也可能是您需要更改的站点范围的阻止规则。

总帐

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T13:49:47.447

如果您仍然遇到 googlebot 收到 500 错误代码的问题，我建议您注册 Google Webmaster Tools 而不是 Analytics。如果您选择健康，那么以 Google 方式获取。您应该得到 googlebot 收到的内容并查看错误是什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-18T01:55:51.707

我遇到了同样的问题，发现这是导致此问题的插件之一。基本上我禁用了每个插件，然后重新启用一个，测试，重新启用下一个.......花了大约 1 小时找到罪魁祸首，但现在一切都很好

# javascript - 如何在 Javascript 中获取 HTML 的非 DOM 属性

> ID：13249259
> 
> 赞同：0
> 
> 时间：2012-11-06T10:41:06.747
> 
> 标签：javascript, html, xpath

说一个这样的 HTML 片段：

```
<div a_example = "x" b_example = "y" class = "z"></div> 
```

在Javascript中获取**a_example**和**b_example**的相应属性的正确方法是什么？

xpath 可以完成这项工作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T10:45:47.730

使用[`getAttribute`](https://developer.mozilla.org/en/docs/DOM/element.getAttribute)：

```
var elem = document.getElementsByClassName("z")[0],
    a = elem.getAttribute("a_example"); 
```

这是一个[工作示例](http://jsfiddle.net/jamesallardice/BSG3g/)。

但是，正如已经提到的，您确实应该使用 HTML5`data-*`属性，否则您的标记是无效的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T10:47:26.143

一些浏览器会将所有属性添加为 DOM 元素的命名属性，而其他浏览器只会添加标准属性。在这两种情况下，您都可以使用 获取非标准属性`getAttribute`，但不建议使用这种方案。

通常使用标准属性和 DOM 属性，并且仅在必要时使用 getAttribute，因为它在不同浏览器中的实现不一致。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T10:43:59.243

你应该看看 HTML5 数据属性，这里有一篇有用的文章：[http ://html5doctor.com/html5-custom-data-attributes/](http://html5doctor.com/html5-custom-data-attributes/)

从标签中读取数据属性非常容易，并且可以为旧版浏览器提供回退。文章中的一个例子：

```
<div id="sunflower" data-leaves="47" data-plant-height="2.4m"></div>

<script>
// 'Getting' data-attributes using dataset 
var plant = document.getElementById('sunflower');
var leaves = plant.dataset.leaves; // leaves = 47;
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T10:44:36.733

如果您使用的是 jQuery，就这么简单：

HTML

```
<div id="testDiv" a_example = "x" b_example = "y" class = "z"></div> 
```

Javascript：

```
var attr1 = $('#testDiv').attr('a_example'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-06T10:45:55.270

```
element.getAttribute(attributename) 
```

这应该适合你。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-06T10:47:55.220

我同意您应该查看数据属性和添加非标准属性的更好方法，但这是您问题的“原始”答案，但我不会将其视为普遍支持（或建议）：

```
 alert(document.getElementsByTagName('div')[0].getAttribute('b_example')); 
```

# mysql - JPA 和 Mysql - 多个客户端连接但只有一个用户帐户

> ID：13249260
> 
> 赞同：0
> 
> 时间：2012-11-06T10:41:12.163
> 
> 标签：mysql, jpa, parallel-processing

有一个中央数据库和许多客户端，每个 JPA 并行访问它。客户端与数据库具有永久连接。状态同步仅由数据库实现。客户端只是更新他们的视图并盲目地写回每个 JPA 的一些输入。

每个客户是否有可能没有单独的数据库用户帐户？我想为所有正在运行的客户端只使用一个用户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T13:35:55.443

不确定我是否理解您的问题，但这是正常配置。

如果您使用连接池或数据源，它将定义一个用于连接的用户 ID，并且您将拥有这些连接的池。

# ios - ios：uitableview部分标题锚定到表格顶部

> ID：13249261
> 
> 赞同：25
> 
> 时间：2012-11-06T10:41:13.470
> 
> 标签：ios, uitableview, sectionheader

我正在尝试制作一个包含多个部分（如联系人应用程序）的表格，一切顺利，我在每个部分的顶部创建了自定义部分标题，显示代表该部分的字符..问题是我希望它像联系人正是标题停留在顶部的位置，直到下一个标题随之崩溃……这怎么可能发生

我正在使用以下代码（让您更容易弄清楚

```
 - (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{

    // Return the number of sections.
   return [stateIndex count];
}

- (UIView *)tableView:(UITableView *)aTableView viewForHeaderInSection:(NSInteger)section
{

    UILabel *sectionHeader = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 200, 40)];
    sectionHeader.backgroundColor = [UIColor clearColor];
    sectionHeader.font = [UIFont boldSystemFontOfSize:18];
    sectionHeader.textColor = [UIColor whiteColor];
    sectionHeader.text = [stateIndex objectAtIndex:section];
    sectionHeader.textAlignment=UITextAlignmentCenter;
    return sectionHeader;
}
//---set the index for the table---
- (NSArray *)sectionIndexTitlesForTableView:(UITableView *)tableView {
    return stateIndex;
}
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {

    //---get the letter in each section; e.g., A, B, C, etc.---
    NSString *alphabet = [stateIndex objectAtIndex:section];

    //---get all states beginning with the letter---
    NSPredicate *predicate =
    [NSPredicate predicateWithFormat:@"SELF beginswith[c] %@", alphabet];
    NSArray *states = [resultPoets filteredArrayUsingPredicate:predicate];

    //---return the number of states beginning with the letter---
    return [states count];

}

- (UITableViewCell *)tableView:(UITableView *)aTableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    static NSString *CellIdentifier = @"Cell";
    PoemsCell *cell = [aTableView dequeueReusableCellWithIdentifier:CellIdentifier];
    int row = indexPath.row;

    //---get the letter in the current section---
    NSString *alphabet = [stateIndex objectAtIndex:[indexPath section]];

    //---get all states beginning with the letter---
    NSPredicate *predicate =
    [NSPredicate predicateWithFormat:@"SELF beginswith[c] %@", alphabet];
    NSArray *states = [resultPoets filteredArrayUsingPredicate:predicate];

    if ([states count]>0) {
        //---extract the relevant state from the states object---
        NSString *cellValue = [states objectAtIndex:row];

        cell.poemText.text = cellValue;

    }

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-11-06T10:58:18.547

如果您使用表格视图样式“普通”而不是“分组”，这应该会自动工作。

从文档中：

> **UITableViewStylePlain：**一个普通的表格视图。滚动表格视图时，任何部分的页眉或页脚都显示为内联分隔符并浮动。
> 
> **UITableViewStyleGrouped：**一个表格视图，其部分呈现不同的行组。部分页眉和页脚不浮动。

# javascript - angularjs中的验证缓存

> ID：13249269
> 
> 赞同：0
> 
> 时间：2012-11-06T10:41:31.603
> 
> 标签：javascript, web, angularjs

我在下面有某个 angularjs 服务..

```
angular.service('SubmitPayment', function($resource){
  return $resource('api/SubmitPayment', {}, {
    query: {method:'GET', params:{}, isArray:false, verifyCache: false}
  });
}); 
```

有谁知道 verifyCache 是做什么的？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T20:49:24.143

旧版本的 AngularJS 有这个选项：

> verifyCache – {boolean=} – 如果为 true，那么每当缓存命中时，对象就会返回，并向服务器发出异步请求，并且在收到响应时更新资源和缓存。

请参阅第 7360 行，[http://code.google.com/p/freality/source/browse/trunk/space/war/angular.js ?r=105](http://code.google.com/p/freality/source/browse/trunk/space/war/angular.js?r=105)

引用 Vojta 的话：“我们摆脱了整个 $resource 缓存。” -- [https://groups.google.com/d/msg/angular/qWQyiXNNjqs/OMquMSVIF58J](https://groups.google.com/d/msg/angular/qWQyiXNNjqs/OMquMSVIF58J)

$resource 服务的当前代码没有这个选项： [https ://github.com/angular/angular.js/blob/master/src/ngResource/resource.js#L43](https://github.com/angular/angular.js/blob/master/src/ngResource/resource.js#L43)

我认为您现在可以操纵发送的标头。

# wso2 - WSO2 CEP 获取 UDP 提要

> ID：13249272
> 
> 赞同：0
> 
> 时间：2012-11-06T10:41:37.787
> 
> 标签：wso2, complex-event-processing, wso2cep

我已经在 Solaris 10 机器上成功安装了 wso2 cep 引擎。作为事件，我正在接收 UDP 提要（管道分隔的数据线）。如何配置 CEP 引擎以接收 UDP 提要并对其进行处理？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T08:40:03.490

我们还没有 UDP 数据接收器，但我们欢迎您编写一个 :)。您可以将事件直接推送到 CEP 引擎（看看当前的数据接收器是如何做的），或者如果您想将它发送到远程 CEP 引擎（通过 thrift .. 这有点傻！ ）。如果你选择写一篇，请加入 architecture@wso2.org 并寻求帮助/建议。请参阅[http://wso2.org/mail](http://wso2.org/mail)。

# charts - JavaFx 2 绘制箭头

> ID：13249275
> 
> 赞同：0
> 
> 时间：2012-11-06T10:41:59.570
> 
> 标签：charts, line, javafx-2

这段代码绘制了一个简单的 XY 线图

```
import javafx.application.Application;
import javafx.event.EventHandler;
import javafx.scene.Scene;
import javafx.scene.chart.CategoryAxis;
import javafx.scene.chart.LineChart;
import javafx.scene.chart.NumberAxis;
import javafx.scene.chart.XYChart;
import javafx.scene.input.MouseEvent;
import javafx.scene.layout.BorderPane;
import javafx.stage.Stage;

public class XyChart extends Application {

@Override
public void start(Stage stage) {
   stage.setTitle("Line plot");

   final CategoryAxis xAxis = new CategoryAxis();
   final NumberAxis yAxis = new NumberAxis(1, 21,0.1);

   yAxis.setTickUnit(1);
   yAxis.setPrefWidth(35);
   yAxis.setMinorTickCount(10);

   yAxis.setTickLabelFormatter(new NumberAxis.DefaultFormatter(yAxis){
        @Override
    public String toString(Number object){
            String label;
            label = String.format("%7.2f", object.floatValue());
            return label;
    }
});
final LineChart<String, Number>lineChart = new LineChart<String, Number>(xAxis, yAxis);

   lineChart.setCreateSymbols(false);
   lineChart.setAlternativeRowFillVisible(false);
   lineChart.setLegendVisible(false);

   XYChart.Series series1 = new XYChart.Series();

    series1.getData().add(new XYChart.Data("Jan", 1));
    series1.getData().add(new XYChart.Data("Feb", 4));
    series1.getData().add(new XYChart.Data("Mar", 2.5));
    series1.getData().add(new XYChart.Data("Apr", 5));
    series1.getData().add(new XYChart.Data("May", 6));
    series1.getData().add(new XYChart.Data("Jun", 8));
    series1.getData().add(new XYChart.Data("Jul", 12));
    series1.getData().add(new XYChart.Data("Aug", 8));
    series1.getData().add(new XYChart.Data("Sep", 11));
    series1.getData().add(new XYChart.Data("Oct", 13));
    series1.getData().add(new XYChart.Data("Nov", 10));
    series1.getData().add(new XYChart.Data("Dec", 20));

    BorderPane pane = new BorderPane();
    pane.setCenter(lineChart);          
    Scene scene = new Scene(pane, 800, 600);
    lineChart.setAnimated(false);
    lineChart.getData().addAll(series1);       

    stage.setScene(scene);
    stage.show();
}

public static void main(String[] args) {
    launch(args);
}   
} 
```

我想通过按住鼠标左键并移动来在图表上绘制箭头，例如这个例子

![在此处输入图像描述](../Images/07a3dae9208d479d35f50d14b0a74498.png)

这该怎么做？

谢谢大家。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T00:47:31.270

您可以将鼠标处理程序添加到边框窗格并在鼠标移动时绘制箭头。可能有更好的方法，但这是我想出的：

将鼠标处理程序添加到边框窗格：

```
MouseHandler mh = new MouseHandler( pane );
pane.setOnMouseClicked( mh );
pane.setOnMouseMoved( mh ); 
```

处理程序类可能如下：

```
class MouseHandler implements EventHandler< MouseEvent > {
    private boolean gotFirst    = false;
    private Line    line, head1, head2;
    private Pane    pane;
    private double  x1, y1, x2, y2;
    double          phi         = Math.toRadians( 40 );
    double          barb        = 20;

    public MouseHandler( Pane pane ) {
        this.pane = pane;
    }

    @Override
    public void handle( MouseEvent event ) {
        if( event.getEventType() == MouseEvent.MOUSE_CLICKED ) {
            if( !gotFirst ) {
                x1 = x2 = event.getX();
                y1 = y2 = event.getY();
                line = new Line( x1, y1, x2, y2 );
                head1 = new Line( x2, y2, x2, y2 );
                head2 = new Line( x2, y2, x2, y2 );
                pane.getChildren().add( line );
                pane.getChildren().add( head1 );
                pane.getChildren().add( head2 );
                gotFirst = true;
            } else {
                line = null;
                gotFirst = false;
            }
        } else {
            if( line != null ) {
                x2 = event.getX();
                y2 = event.getY();
                // update line
                line.setEndX( x2 );
                line.setEndY( y2 );
                // draw head
                // http://www.coderanch.com/t/340443/GUI/java/Draw-arrow-head-end-line
                double dx = x2 - x1;
                double dy = y2 - y1;
                double theta = Math.atan2( dy, dx );
                double x, y, rho = theta + phi;

                x = x2 - barb * Math.cos( rho );
                y = y2 - barb * Math.sin( rho );
                head1.setStartX( x2 );
                head1.setStartY( y2 );
                head1.setEndX( x );
                head1.setEndY( y );
                rho = theta - phi;
                x = x2 - barb * Math.cos( rho );
                y = y2 - barb * Math.sin( rho );
                head2.setStartX( x2 );
                head2.setStartY( y2 );
                head2.setEndX( x );
                head2.setEndY( y );
            }
        }
    }

} 
```

# php - 在 MYSQL 计数查询中获取额外数据

> ID：13249281
> 
> 赞同：0
> 
> 时间：2012-11-06T10:42:23.560
> 
> 标签：php, mysql

大家好，我从 bluefleet (BF) 得到了一个 mysql 查询的帮助，我现在将它放入了一个 php 文件中，查询工作正常，但我发现我需要获取额外的数据以及计数，所以我需要什么当找到匹配项时，我需要在表 tview3 中查找用户名。

无论找到哪个表 ip 匹配，都会有一个名为 UID 的列，在表 tview3 中也会有一个名为 USERNAME 的列，我想做的是获取匹配项的用户名，然后使用它们一个文本文件。

我必须声明我是一个完整的新手，感谢所有帮助

```
$myquery= "select sum(total)
from
(
    SELECT count(*) as total
    FROM " .TABLE_PREFIX."tview v
    where v.ipaddress = '$ips'
    union all
    SELECT count(*) as total
    FROM " .TABLE_PREFIX."tview2 v1
    where v1.ipaddress = '$ips'
    union all
    SELECT count(*) as total
    FROM " .TABLE_PREFIX."tview3 v3
    where v3.ipaddress = '$ips'
) src";

 $result = mysql_query($myquery);
    $rowCount = mysql_num_rows($result);
    If($rowCount !=0){
       echo "NOT EMPTY";
    }else{
      echo "EMPTY";
    }
   mysql_free_result($result);

$UAM = strtoupper($_SERVER['HTTP_USER_AGENT']);
$ips = strtoupper($_SERVER['REMOTE_ADDR']);
$fp = fopen("logtext.txt", "a");
$DateOfRequest = date('m-d-Y H:i:s');

fwrite($fp, "$DateOfRequest . \nMatched Member: . $username . \nWith User Agent:  . $UAM . \n\nIP: . $ips . \n\n"); 
```

所以我想用找到匹配项的用户名填充一个变量**$username 。**

问候，筒仓

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T11:37:14.340

改变：

`SELECT count(*) as total`

至

```
 SELECT count(*) as total, username 
```

然后你可以做类似的事情：

```
$row = mysql_fetch_array($query);
$username = $row['username']; 
```

希望有帮助。另请查看此问题以获取更多详细信息：[如何在我的 MySQL 表中的列中找到最常见的结果](https://stackoverflow.com/questions/739143/how-do-i-find-the-most-common-result-in-a-column-in-my-mysql-table)

# php - 将按钮单击时的数据从 javascript 发送到数据库

> ID：13249282
> 
> 赞同：2
> 
> 时间：2012-11-06T10:42:24.457
> 
> 标签：php, jquery, database

所以我有一个 php 页面，它从数据库中获取数据并显示一个表格。每个 td 都象征着电影院的一个座位。我想要做的是当用户单击一个或多个 td 并单击发送时，数据库中每个 td 的状态列从 0（默认）更改为 1。下次访问数据库时，status=1的td的颜色不同。到目前为止，我的代码是：

```
 <div id="screen">SCREEN</div>
<div id="Seatings">
    <?php echo "<table border='1'>
        <tr>
        <th>Seating</th>
        </tr>";
        $count=0;
    echo "<tr>";
    echo"<td id='Seat_rn'>A</td>";
    while($row = mysql_fetch_array($sql))
    {

        if($count<10){
        echo "<td id='Seat_A' class='count'>" . $row['Seat'] . "</td>";  
        }
    $count++;
    }   
    echo "</tr>";
   $sql=mysql_query("SELECT * FROM Seating_para_20 Where Seat > '10'");
   echo "<tr>";
   echo"<td id='Seat_rn'>B</td>";
   while($row = mysql_fetch_array($sql))
   {
      if($count>=10){
       echo "<td id='Seat_B' class='count'>" . $row['Seat'] . "</td>";  
      }
   $count++;
   }
   echo"</tr>";
   echo "</table>";
   ?>
</div>
<input type="button" value="Done" name="done" onclick="window.close()"> 
```

我的jQuery代码是：

```
 $("td #Seat_A").click(function(){
    $(this).css("background", "red");
        });
        $("td #Seat_B").click(function(){
    $(this).css("background", "red");
        });
        $(document."done").click(function(){
    alert(price:750 Baht);
        }) 
```

我离我想要的还很远，如果我的任何代码是“业余的”，我很抱歉，但我对此并不陌生，我一直在努力。我会很感激我能得到的任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T10:55:04.840

首先，您必须为表上的每个 TD 添加一个 ID，即`Seat ID`，例如：

```
echo "<td id='Seat_A' data-seat='". $row['id'] ."'class='count'>" . $row['Seat'] . "</td>"; 
```

然后使用 Ajax 将此 ID 发送到您的 PHP 脚本：

```
$("td #Seat_A").click(function(){
    var seat_number = $(this).data("seat");

    $.ajax({
        type: 'POST',
        url: "/take_a_seat.php",
        data: 'seat_number='+seat_number,
        success: function(data){
            $(this).css("background", "red");
        }
        dataType: "json"
    });
}); 
```

在 PHP 脚本上，您必须使用此 ID 对座位执行您想要的操作并返回`true`或`false`作为结果。假设您`reserved`的数据库表中有一个名为的字段。例如，您可以获取唯一 ID 并将该行更新`reserved = 1`为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T10:55:10.130

试试这个易于使用的 ajax 脚本来完成你的任务

`beforeSend`特点：您可以在将数据发送到 db部分之前显示 gif img
从部分中的 php 文件获取响应 在`success`部分
中的 db 中插入数据后隐藏 img`complete`并显示成功或不成功 msg

```
var myVar = 'your desire data you want to send to db';
$.ajax({           
            type: "POST",  
            url:"scripts/dummy.php",  
            data:"myVar="+myVar,

            beforeSend: function()
            {                   

            },
            success: function(resp)
            {               

            }, 

            complete: function()
            {

            },

            error: function(e)
            {  
            alert('Error: ' + e);  
            }  

    }); //end Ajax 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T10:45:34.117

Javascript是客户端。你的数据库是服务器端的。所以你必须使用 php 来更改你的数据库条目。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-06T10:49:47.270

简而言之，如果你想在不重新加载页面的情况下执行 PHP 的东西，那就使用 AJAX。您可以将它[与您最喜欢的 JQuery 一起](http://api.jquery.com/category/ajax/)使用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-06T10:56:32.077

这是一个概述。对于现有记录，您应该这样做

```
 <?php
  $count=1;
  $res = mysql_query("SELECT * FROM Seating_para_20 Where Seat > '10'");
  while($row = mysql_fetch_array($sql)) {

    if($row['status']==1) {
      $tdcolor = 'red';
    } else {
       $tdcolor = 'blue';

    }
    ?>

    <td id="td-<?php echo $count;?>" sytle="background-color:<?php echo $tdcolor; ?>" onclick="reserveseat(<?php echo $count; ?>);" >
    <?php
    $count++;
  }
  ?> 
```

为了在页面加载后进行更改，您将执行 ajax 操作

```
 <script type="text/javascript" language="javascript">
 function reserveseat(count) {
   $.ajax({
    type: 'POST',
    url: "bookseat.php",
    data: '',
    success: function(data){
        $("#td-"+count).css("background-color", "red");
    }

   });
 }

 </script> 
```

在`bookseat.php`您将更改状态... :-) 从[此处](http://api.jquery.com/jQuery.ajax/)阅读有关 ajax 的信息。:-)

# objective-c - ios中应用程序内按钮的气泡通知

> ID：13249294
> 
> 赞同：1
> 
> 时间：2012-11-06T10:43:11.460
> 
> 标签：objective-c, ios, notifications

我想知道如何在 ios 中获取徽章通知。我的意思是在应用程序内部。我不能发图。按照此[链接](http://i.stack.imgur.com/myunZ.jpg) ，我想通过按钮在应用程序内获取该徽章通知。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T10:59:17.197

我不知道您所说的“气泡通知”是什么意思，但也许您的意思是在 UIButton 上加上徽章？也许[CustomBadge](https://github.com/ckteebe/CustomBadge)可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T10:50:20.537

我不知道这是否是你要找的，但看看[CMPopTipView](https://github.com/chrismiles/CMPopTipView)！

# java - java.sql.SQLException: ORA-00604: 递归 SQL 级别 1 发生错误

> ID：13249297
> 
> 赞同：2
> 
> 时间：2012-11-06T10:43:22.950
> 
> 标签：java, oracle, jdbc

我收到以下 SQL 异常，但我不知道此异常的根本原因是什么？我也在关闭数据库连接和语句。

```
java.sql.SQLException: ORA-00604: error occurred at recursive SQL level 1
ORA-01000: maximum open cursors exceeded
ORA-00604: error occurred at recursive SQL level 1
ORA-01000: maximum open cursors exceeded
ORA-01000: maximum open cursors exceeded 
```

以下是我的代码：

```
 while(true)
 {

   Statement stmt2 = conn1.createStatement();
   ResultSet rs2 = null;

   int rec_count=0;
   rs2 = stmt2.executeQuery("select count(*) as cnt from   some_table");                                  
    while(rs2.next())
   {
     rec_count = rs2.getInt("cnt");
   }

   if(rec_count>0)
   {
     update_qry_b_trg1 = "update some_table set to_be_triggered=1,algo_status='D',dealer_id='HD001',price_trig_date=sysdate where buy_sell = 'SELL' and ordertype = 'BNLD' and to_be_triggered = 0 and algo_status = 'P' and Mod(group_ref_no,5)="+th_id;

   String final_qry = "BEGIN \n"+update_qry_b_trg1+";\n"+";\n END;";

   int rows = stmt1.executeUpdate(final_qry);
   stmt1.close();
   }

   rs2.close();
   stmt2.close();

   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T17:13:22.030

无论在哪里初始化 stmt1，最好在 finally 块中关闭它。在您的情况下，您将在 if 条件下关闭它。如果条件不通过，语句将保持打开状态，您将得到这个

```
java.sql.SQLException: ORA-00604: error occurred at recursive SQL level 1 
```

你也有这个在一个while循环中运行，所以你需要确保你关闭每一个打开的语句。

# asp.net - 使用 response.redirect 函数保持滚动位置

> ID：13249302
> 
> 赞同：0
> 
> 时间：2012-11-06T10:43:42.963
> 
> 标签：asp.net, gridview

我的asp.net 网站上有一个主页。

在那个页面中，我使用了带有超链接字段的 gridview。

单击任何超链接，应用程序将重定向到详细页面。

返回主页时，我想保持滚动位置而不是进入页面顶部。

我尝试过维护滚动位置脚本，但它不起作用。

我也用过母版页。

我使用了详细页面上的按钮，并且 onclick 我使用了 response.redirect。

在这种情况下如何保持滚动位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T13:11:29.290

由于您要离开页面并返回，因此您无法将数据存储在 javascript 或`ViewState`. 这使您有两个选择：

将滚动位置保存在会话变量中。您将不得不使用隐藏字段将 javascript 变量发送到服务器以保存它。

您还可以使用具有适当到期时间的 cookie 来记住滚动位置。使用 cookie 可以实现纯 JavaScript 解决方案。

在我看来，使用 cookie 是一个更简单、更好的选择。

# c# - 在哪里可以找到设备类 ID

> ID：13249303
> 
> 赞同：0
> 
> 时间：2012-11-06T10:43:43.373
> 
> 标签：c#

我正在尝试使用以下方式检测特定的 USB 智能卡读卡器：

```
public IntPtr HwndHandler(IntPtr hwnd, int msg, IntPtr wParam, IntPtr LParam, ref bool handled) 
```

我在哪里可以知道班级 ID？

```
private const string USBClassID = "A5DCBF10-6530-11D2-901F-00C04FB951ED"; 
```

所有设备的所有类 ID 都相同吗？

# c# - ASP.NET MVC 3 模型绑定对我不起作用？

> ID：13249304
> 
> 赞同：0
> 
> 时间：2012-11-06T10:43:43.527
> 
> 标签：c#, asp.net-mvc-3, model-binding

这是行不通的行：

```
ModelBinders.Binders.Add(typeof(decimal), new DecimalModelBinder()) 
```

更准确地说。粘合剂是高度重视的。

[我找到](http://haacked.com/archive/2011/03/19/fixing-binding-to-decimals.aspx)了 Phil Haack 的这篇文章。

我做了它所说的一切，将`using System.Web.Http.ModelBinding.Binders;` 添加类的引用添加`public class DecimalModelBinder : IModelBinder`到一个新文件夹中，并告诉 Global.ascx 该文件夹。但是红线一直显示在**Binder**下方。你能帮助我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T11:05:50.903

从错误来看，它看起来像是将`ModelBinders`命名空间（存在于您的项目中）而不是框架类。

尝试使用下面的行来解决歧义。

```
 System.Web.Mvc.ModelBinders.Binders.Add(typeof(decimal), new DecimalModelBinder()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T11:05:35.760

编译器将对 ModelBinders 的引用解释为对 RoomReservation.Wep.ModelBinders 的引用。尝试使用

```
System.Web.Http.ModelBinding.Binders.Add(typeof(decimal), new DecimalModelBinder()) 
```

# c# - 如何使用 c# 从后面的代码中找到 SQL Server 实例名称和服务器名称？

> ID：13249306
> 
> 赞同：3
> 
> 时间：2012-11-06T10:43:46.740
> 
> 标签：c#, sql-server

> **可能重复：**
> [SqlDataSourceEnumerator.Instance.GetDataSources() 未找到本地 SQL Server 2008 实例](https://stackoverflow.com/questions/6824188/sqldatasourceenumerator-instance-getdatasources-does-not-locate-local-sql-serv)

我正在使用下面的代码来获取本地机器中的所有实例名称和服务器名称，但它似乎只返回一个实例；如何在我的本地计算机中获取所有实例名称和服务器名称列表？

```
string myServer = Environment.MachineName;

DataTable servers = SqlDataSourceEnumerator.Instance.GetDataSources();

for (int i = 0; i < servers.Rows.Count; i++)
{
        if (myServer == servers.Rows[i]["ServerName"].ToString()) 
        {
            if ((servers.Rows[i]["InstanceName"] as string) != null)
            {
                CmbServerName.Visibility = Visibility.Visible;
                CmbServerName.Items.Add(servers.Rows[i]["ServerName"] + "\\" + servers.Rows[i]["InstanceName"]);

            }
            else
            {
                CmbServerName.Visibility = Visibility.Visible;
                CmbServerName.Items.Add(servers.Rows[i]["ServerName"]);

            }
        }
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T10:52:57.707

获取已安装的 sql server 实例名称的另一种方法是读取您的计算机注册表。它将从您的本地计算机获取所有 sql 实例。

```
RegistryKey rk = Registry.LocalMachine.OpenSubKey(@"SOFTWARE\Microsoft\Microsoft SQL Server");
            String[] instances = (String[])rk.GetValue("InstalledInstances");
            if (instances.Length > 0)
            {
                foreach (String element in instances)
                {
                    if (element == "MSSQLSERVER")
                        Console.WriteLine(System.Environment.MachineName);
                    else
                        Console.WriteLine(System.Environment.MachineName + @"\" + element);

                }
                Console.ReadLine();
            } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T11:14:38.287

另一种解决方案：

[Microsoft.SqlServer.Management.Smo.SmoApplication.EnumAvailableSqlServers](http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.management.smo.smoapplication.enumavailablesqlservers.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T10:56:14.237

这可能不是它，但值得一试。[SQL Server Browser 服务](http://msdn.microsoft.com/en-us/library/ms165724%28v=sql.90%29.aspx)是否在您的计算机上运行？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-06T10:56:19.077

[`GetDataSource()`](http://msdn.microsoft.com/en-us/library/system.data.sql.sqldatasourceenumerator.getdatasources%28v=vs.100%29.aspx)检索从您的机器可见的所有实例。*ServerName*是托管 istance 的机器的名称，看起来您的机器上只有一个 istance 。

粗体部分是什么意思：“如何**在我的本地机器中获取所有实例名称和服务器名称**列表”？如果你想从你的机器上看到每一个可见的服务器，你必须删除*if 语句*

```
if (myServer == servers.Rows[i]["ServerName"].ToString()) 
```

因为只有一台服务器具有您的本地计算机名称，因此您无法获得任何其他服务器名称。

请注意，[文档](http://msdn.microsoft.com/en-us/library/system.data.sql.sqldatasourceenumerator.getdatasources%28v=vs.100%29.aspx)报告

> 由于 SqlDataSourceEnumerator 用于在网络上定位数据源的机制的性质，**该方法不会总是返回可用服务器的完整列表，并且每次调用时该列表可能都不相同**。如果您打算使用此功能让用户从列表中选择服务器，请确保您始终提供一个选项以键入不在列表中的名称，以防服务器枚举未返回所有可用服务器. 此外，此方法可能会花费大量时间来执行，因此在性能至关重要时调用它时要小心。

所以这可能是由于这个问题。

# sql - T-SQL Unpivot 与列值

> ID：13249308
> 
> 赞同：0
> 
> 时间：2012-11-06T10:43:50.033
> 
> 标签：sql, tsql

我有一个如下表：

> ## 支票 | 账单总额 | D1 | D2 | D3 | D4 | D5 |
> 
> ```
> 1              100       10           2
> 2               50       10                   5    7 
> ```

D1 - D5 代表不同的折扣类型，我怎样才能得到以下？

> ## 支票 | 账单总额 | 折扣类型 | 折扣 |
> 
> ```
> 1        100            D1             10
> 1        100            D3              2
> 2        100            D1             10
> 2        100            D4              5
> 2        100            D5              7 
> ```

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T10:59:41.897

请检查 unpivot 的示例：

```
CREATE TABLE #pvt (VendorID int, Emp1 int, Emp2 int, Emp3 int, Emp4 int, Emp5 int);

INSERT INTO #pvt VALUES (1,4,3,5,4,4);
INSERT INTO #pvt VALUES (2,4,1,5,5,5);
INSERT INTO #pvt VALUES (3,4,3,5,4,4);
INSERT INTO #pvt VALUES (4,4,2,5,5,4);
INSERT INTO #pvt VALUES (5,5,1,5,5,5);

select * from #pvt

--Unpivot the table.
SELECT VendorID, Employee, Orders
FROM 
   (SELECT VendorID, Emp1, Emp2, Emp3, Emp4, Emp5
   FROM #pvt) p
UNPIVOT
   (Orders FOR Employee IN 
      (Emp1, Emp2, Emp3, Emp4, Emp5)
)AS unpvt;

drop table #pvt 
```

# java - 与 ThreadLocal 与 InheritableThreadLocal 同步？

> ID：13249309
> 
> 赞同：2
> 
> 时间：2012-11-06T10:43:52.350
> 
> 标签：java, multithreading, concurrency, vaadin

我正在按照这个[线程本地模式](https://vaadin.com/wiki/-/wiki/Main/ThreadLocal%20Pattern)实现一个 vaadin 应用程序。

应用程序的状态由多个工作线程修改。因此，为了通知应用程序其状态已更改，我添加了一个进度指示器。

阅读进度指示器示例，我看到了：

```
 // All modifications to Vaadin components should be synchronized
        // over application instance. For normal requests this is done
        // by the servlet. Here we are changing the application state
        // via a separate thread.
        synchronized (getApplication()) {
            prosessed();
        } 
```

所以基本上，我想我只需要修改调用来`getApplication`获取我的应用程序的实例（只需调用`getCurrent`）：

```
 private static ThreadLocal<MyApplication> currentApplication = new ThreadLocal<MyApplication>();

    @Override
    public void init() {
        setCurrent(this); // So that we immediately have access to the current application

        // initialize mainWindow and other stuff

        // Register a transaction listener that updates our ThreadLocal with each request
        if (getContext() != null) {
            getContext().addTransactionListener(this);
        }   
    }

    /**
     * @return the current application instance
     */
    public static MyApplication getCurrent() {
        return currentApplication.get();
    } 
```

问题是我的工作线程死于饥饿，因为它无法获取应用程序上的互斥锁。vaadin 论坛提供的一种解决方案是使用[InheritableThreadLocal](http://docs.oracle.com/javase/6/docs/api/java/lang/InheritableThreadLocal.html)。它有效，但我不明白为什么。

从 javadoc ：

> 此类扩展 ThreadLocal 以提供从父线程到子线程的值继承：当创建子线程时，子线程接收父线程具有值的所有可继承线程局部变量的初始值。通常，孩子的价值观与父母的价值观相同；但是，通过覆盖此类中的 childValue 方法，可以使子项的值成为父项的任意函数。
> 
> 当在变量中维护的每个线程属性（例如，用户 ID、事务 ID）必须自动传输到创建的任何子线程时，可继承的线程局部变量优先于普通线程局部变量使用。

我的工作线程无法获得锁，因为它没有收到初始值？我误解了什么吗？除了[这个问题](https://stackoverflow.com/questions/9012371/using-inheritablethreadlocal-with-threadpoolexecutor-or-a-threadpoolexecut)，我应该注意使用 InheritableThreadLocal 的潜在陷阱是什么？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T12:00:58.323

理解其工作原理的关键是 ThreadLocal 类中的方法：

```
static ThreadLocalMap createInheritedMap(ThreadLocalMap parentMap) {
   return new ThreadLocalMap(parentMap);
} 
```

它被设计为只能从 Thread 构造函数中调用。方法

```
protected Object childValue(Object parentValue) 
```

类`InheritableThreadLocal`用于将`InheritableThreadLocal`子线程中变量的初始值设置`ThreadLocal`为父线程中变量（作为参数传递）的函数。在创建子线程之前从父线程中调用此方法，默认实现将使子值与父值相同，但我们可以重写该`childValue()`方法以将子值设置为父值的`ThreadLocals`函数父线程中的值。默认情况下，`childValue()`返回相同的输入参数，但再次覆盖该`childValue()`方法也可能会改变这种行为。

所以`InheritableThreadLocal`工作起来几乎一样`ThreadLocal`，并且它具有相同的同步陷阱。

# windows - 在 Windows 中使用范围和实时输出到 txt 文件

> ID：13249314
> 
> 赞同：1
> 
> 时间：2012-11-06T10:44:13.900
> 
> 标签：windows, grep, tail

我正在从 Server 2003 运行 tail 和 grep 并且遇到问题

a：搜索范围（在我正在阅读的日志文件中用管道分隔，例如：

```
|100|2012/11/04 23:18:23|error string here|service name|host name|9|0|||0|824|3132| 
```

b：将匹配的行实时输出到文本文件

这就是我正在使用的：

```
tail -f 20121106.log | grep -n "|8-9|" >> output.txt 
```

我基本上希望将它在第 6 个管道（即 8 或 9）之后找到的任何内容输出到文本文件，根据我的应用程序，这是一个错误。

如果我不输出到 txt 文件并查找“|8|” 或“|9|” （我无法让范围工作，所以我必须做一个或另一个）然后它会在 cmd 提示窗口中实时正确显示它们

任何人都可以帮助我吗？将不胜感激！

干杯

尼日

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T13:06:54.590

你可以这样做`GNU awk`：

```
tail -f 20121106.log | awk -F "|" '{ for(i=7; i<=NF; i++) if ($i=="8" || $i == "9") { print NR ":" $0; next } }' >> output.txt 
```

快速解释：

循环第 6 个管道之后的字段，如果字段是“8”或“9”，则打印行号 ( `NR`)、冒号 ( ) 和包含匹配字段`:`的整行 ( )。然后跳出循环以读取下一行输入。HTH。`$0``next`

***编辑：***

```
tail -f 20121106.log | perl -F\\\| -ane 'for ($i=6; $i<=@F; $i++) { if ($F[$i]=="8" || $F[$i] == "9") { print "$.:$_"; last } }' >> output.txt 
```

# excel - 未排序数据的 vlookup 不起作用

> ID：13249315
> 
> 赞同：0
> 
> 时间：2012-11-06T10:44:19.340
> 
> 标签：excel, excel-2007, excel-formula, excel-2010

我有一个如下表，我想使用 vlookup 但它不起作用。 ![在此处输入图像描述](../Images/075a6e9bae41477a8375b8feb2bb3857.png)

b 和 c 列的格式单元格是文本。我想从 C 列中找到 B 列中的文本。我的公式是：

```
=VLOOKUP(F5,B:C,1,FALSE)
f5=مركز بهداشت دانشگاه تهران 
```

但它返回：#n/a 当我想从 B 列中找到 C 列时，它运行良好。请帮我。我该怎么办？与阿拉伯语有什么不匹配的地方吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T11:11:14.947

`K_B`对您的公式为什么不起作用的解释是正确的，您不能用于`VLookup`搜索列`C`并从列返回`B`

你可以使用`INDEX`and`MATCH`代替，像这样

```
=INDEX(B:B,MATCH(F5,C:C,0)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T10:52:28.313

我不是说阿拉伯语的人，但根据您所说的，您在单元格 F5 中有一个值，您想在 B 列中查找该值并从 C 列返回相应的值。假设这是正确的，那么您的公式应该是

```
=vlookup(F5, B:C, 2, FALSE) 
```

但是，这不会导致返回 #n/a。在我看来，您的示例数据中的 B 列中的 F5 给出的值并不存在 - 您能确认一下吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T10:55:49.863

该公式要求在第二个参数的第一列中找到文本（`B:C`在您的情况下）。

然后它将第 i 列中的值返回给您，其中 i 是公式的第三个参数（`1`在您的情况下）。

这只能以一种方式工作（在 B 中搜索，从 C 返回），而从不以其他方式工作（在 C 中搜索从 B 返回）。

如果您需要以相反的方式工作，则必须将列以相反的顺序放置或用`=B1`等填充 D 列...并在`C:D`.

现在，每当您的第一列中不存在搜索的文本时，结果将始终为`#n/a`

# android - PendingIntent getBroadcast 和 getActivity 同时进行

> ID：13249319
> 
> 赞同：5
> 
> 时间：2012-11-06T10:44:28.603
> 
> 标签：android, android-intent

我想同时实现pendingIntent.getbroadcast 和pendingIntent.getactivity。实际上，当用户单击我的通知时，我的应用程序正在发送通知，我的应用程序将启动（通过使用 getActivity），并且它还广播到我的广播接收器以通过我的广播接收器执行一些活动。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T12:55:43.193

您可以：

*   使用 a`getBroadcast()` `PendingIntent`并`BroadcastReceiver`调用`startActivity()`来启动活动，或者

*   使用 a`getActivity()` `PendingIntent`并`Activity`调用`sendBroadcast()`发送广播

如果活动将用于除此之外的其他事情`Notification`，则第一个解决方案可能更容易实现。

# c# - 带有子报表的水晶报表不在子报表中显示数据

> ID：13249324
> 
> 赞同：0
> 
> 时间：2012-11-06T10:44:48.230
> 
> 标签：c#, asp.net, crystal-reports, subreport

我有一个使用水晶报表的 Web 应用程序。在主水晶报表中，我想显示两个子报表，但是当我尝试这样做时，它会显示主报表的数据，但其他两个子报表数据没有显示。我尝试了以下代码但不起作用。

```
ReportDocument rptDoc = new ReportDocument();
DataTable dt1, dt2;
dt1 = new SalesMasterRepository().GetSalesHeaderData(Salesid);

 dt2 = new SalesMasterRepository().GetSalesFooterData(Salesid);

 DataTable dtproductview=getProductViewDetails();
  rptDoc.Load(Server.MapPath("../Reports/SalesProductReport.rpt"));
            rptDoc.SetDataSource(dtproductview);
            rptDoc.Subreports[0].SetDataSource(dt1);
            rptDoc.Subreports[1].SetDataSource(dt2);
 CrystalReportViewer1.ReportSource = rptDoc; 
```

就是这样，我没有收到任何错误，但数据也没有显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T11:51:12.983

我有解决办法

```
SalesProductReport rptDoc = new SalesProductReport(); //Main report

    DataTable dt1, dt2;
    dt1 = new SalesMasterRepository().GetSalesHeaderData(Salesid);

     dt2 = new SalesMasterRepository().GetSalesFooterData(Salesid);

     DataTable dtproductview=getProductViewDetails();
    salesrpt.Subreports["Sales_header1.rpt"].SetDataSource(dt1);//datasource for subreport

        rptDoc .SetDataSource(dtproductview);//Mainreport datasourcce
       rptDoc .Subreports["SalesFooter.rpt"].SetDataSource(dt2);//datasource for subreport

    CrystalReportViewer1.ReportSource = rptDoc ; 
```

# iphone - 如何使用 ios sdk 从通讯录创建 vCard？

> ID：13249327
> 
> 赞同：4
> 
> 时间：2012-11-06T10:45:06.920
> 
> 标签：iphone, ios, addressbook

我不知道如何从通讯录创建 vCard。我可以通过搜索为 vCard 数据生成 NSString，但我不知道如何将 NSString 转换为 .vcf。这是我的 vCard 数据的 NSString 代码。

```
NSString *vcard = @"BEGIN:VCARD\nVERSION:3.0\n";

    // Name
    vcard = [vcard stringByAppendingFormat:@"N:%@;%@;%@;%@;%@\n",
             (contact.lastname ? contact.lastname : @""),
             (contact.firstname ? contact.firstname : @""),
             (contact.middlename ? contact.middlename : @""),
             (contact.prefix ? contact.prefix : @""),
             (contact.suffix ? contact.suffix : @"")
             ];

    vcard = [vcard stringByAppendingFormat:@"FN:%@\n",contact.compositeName];
    if(  contact.nickname ) vcard = [vcard stringByAppendingFormat:@"NICKNAME:%@\n",contact.nickname];
    if(  contact.firstnamephonetic ) vcard = [vcard stringByAppendingFormat:@"X-PHONETIC-FIRST-NAME:%@\n",contact.firstnamephonetic];
    if(  contact.lastnamephonetic ) vcard = [vcard stringByAppendingFormat:@"X-PHONETIC-LAST-NAME:%@\n",contact.lastnamephonetic];

    // Work
    if( contact.organization || contact.department ) vcard = [vcard stringByAppendingFormat:@"ORG:%@;%@\n",(contact.organization?contact.organization:@""),(contact.department?contact.department:@"")];
    if( contact.jobtitle ) vcard = [vcard stringByAppendingFormat:@"TITLE:%@\n",contact.jobtitle];

    // Mail
    vcard = [vcard stringByAppendingString:[VCard toVcardField:@"email" items:contact.emailArray labels:contact.emailLabels]];

    // Tel
    vcard = [vcard stringByAppendingString:[VCard toVcardField:@"phone" items:contact.phoneArray labels:contact.phoneLabels]];

    // Adress
    vcard = [vcard stringByAppendingString:[VCard toVcardField:@"address" items:contact.addressArray labels:contact.addressLabels]];

    // url
    vcard = [vcard stringByAppendingString:[VCard toVcardField:@"url" items:contact.urlArray labels:contact.urlLabels]];

    // IM
    vcard = [vcard stringByAppendingString:[VCard toVcardField:@"im" items:contact.smsArray labels:contact.smsLabels]];

    // birthday
    NSDate *birthday = contact.birthday;
    if (birthday)
    {
        NSString *bday = [NSString stringWithFormat:@"%@",birthday];
        NSArray *bdayArr = [bday componentsSeparatedByString:@" "];
        bday = [bdayArr objectAtIndex:0];

        vcard = [vcard stringByAppendingFormat:@"BDAY;value=date:%@\n",bday];
    }

    // Photo
    NSData *imageData = contact.thumbData;//contact.imageData;
    if (imageData)
    {
        //vcard = [vcard stringByAppendingFormat:@"PHOTO;BASE64:%@\n",[imageData base64Encoding]];
    }

    // end
    vcard = [vcard stringByAppendingString:@"END:VCARD"]; 
```

我得到 NSSTring 作为输出：

```
vCard : BEGIN:VCARD
VERSION:3.0
N:def;Abc;;;
FN:Abc def
ORG:slk;
EMAIL;type=INTERNET;type=HOME:fdf@gmail.com
TEL;type=CELL:(258) 963-4889
TEL;type=IPHONE:(435) 768-6343
item1.ADR;type=HOME:;;aashram road;Ahmedabad;;;India
item1.X-ABADR:in
END:VCARD 
```

任何人都可以帮我将此 NSString 转换为 .vcf 文件以获取 vCard 吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T09:41:39.447

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0]; // Get documents directory

NSError *error;
BOOL succeed = [yourNSString writeToFile:[documentsDirectory stringByAppendingPathComponent:@"contact.vcf"]
                          atomically:YES encoding:NSUTF8StringEncoding error:&error];
if (!succeed){
    // Handle error here
    NSLog(@"Error");
} 
```

此代码将 vcard 保存在应用程序的 Documents 目录中。

yourNSString 是您在生成 vcard 时使用的变量

# django - 设计问题：应该在多大程度上使用 Django 管理站点？

> ID：13249328
> 
> 赞同：5
> 
> 时间：2012-11-06T10:45:09.157
> 
> 标签：django, django-admin

我对 Django 比较陌生，对管理功能尤其陌生。我已经阅读了许多阐述内置管理站点的好处的文章，但我不确定它们应该在多大程度上使用。

一些一般性问题：

*   什么样的数据库交互应该在管理员中，哪些应该是一般站点功能的一部分？
*   我知道可以在管理站点上轻松更改/删除模型，但这是添加新对象而不是自定义页面的最佳方式吗？

一个更具体的问题：

*   我正在创建一个用于跟踪包裹的网站。这个想法是工作人员每天会扫描并将许多（数百个）包插入数据库。我不确定这是否可以在管理员中有效地完成，因为当前添加模型的过程是一个缓慢的多步骤过程（我不知道可以定制到什么程度）。由于这是该站点的主要功能之一，它驻留在管理站点中似乎也很奇怪。在 Django 框架中编写我自己的页面会更有意义吗？还是我只是重写（可能效率较低）已经用 django-admin 创建的内容？

你们的任何建议或 Django 标准将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T10:59:55.890

通常 django-admin 应该用于 CRUD（创建、读取、更新和删除）操作。它应该用于您想要快速设置设施以允许人们管理数据的地方。它可以处理复杂的数据库关系和内联编辑，但是如果您的管理设施是定制的，那么构建一个单独的 django 应用程序会更合适。Django-admin 可以进行大量定制，您可以对其内部工作进行子类化，但是从长远来看，编写和维护您自己的应用程序要容易得多，尽管启动和运行它需要更长的时间。

确定 django-admin 是否适合使用的一种方法是选择一个重要的需求并尝试实现它，如果感觉在 django-admin 中实现它需要做很多工作，那么这可能是一个案例的鞋拔。我认为有时要求被开发人员硬塞到 django-admin 中，他们认为这是一个万能的解决方案，但它根本不是。

# python - 导入模块时抑制 scapy 警告消息

> ID：13249341
> 
> 赞同：14
> 
> 时间：2012-11-06T10:45:44.337
> 
> 标签：python, hide, stderr, scapy, output

我正在编写一个小脚本，它使用 scapy 收集一些信息，然后返回一些 xml 代码，我将传递给 metasploit 的 xmlrpc 接口。我希望我的脚本只返回 xml，没有额外的警告等。

`verbose=0`通过将选项添加到我的 sr1 命令，我可以抑制大多数 scapy 输出。在每次输出之前我仍然得到的，我假设它在我加载模块时返回这个警告，是：

> 警告：没有找到 IPv6 目的地的路由 ::（没有默认路由？）

通过这样调用我的脚本，我可以轻松地重定向该输出：

```
 ./myscript 2> /dev/null 
```

但我想将其合并到脚本中。为此，我找到了一个提示，可以有一个 NullDevice 类，它不写任何东西，然后设置`sys.stderr`为该 NullDevice 类的实例化。

不幸的是，这仅在我已经加载模块后才有效，因此我仍然有警告，并且它只会重定向发送到 stderr 的任何以下消息。

如何禁止该警告消息出现在我的屏幕上？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-11-06T10:52:17.573

您可以通过添加以下内容来消除 scapy 的警告：

```
logging.getLogger("scapy.runtime").setLevel(logging.ERROR) 
```

**在**导入 Scapy 之前。这将抑制所有严重程度低于错误消息的消息。

* * *

**例如：**

```
import logging
logging.getLogger("scapy.runtime").setLevel(logging.ERROR)
from scapy.all import *
... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-06-29T14:49:14.370

我认为这是正确的方法。

```
>>> import sys
>>> sys.stderr = None            # suppress stderr
>>> from scapy.all import *
>>> sys.stderr = sys.__stderr__  # restore stderr
>>> print("other errors can be shown", file=sys.stderr)
other errors can be shown
>>> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-09T13:14:25.850

我认为也许 python3 版本的 scapy 会打印来自不同记录器或更高级别的消息。这是我用来抑制模块导入输出的一些代码。

```
from contextlib import contextmanager

# It looks like redirect_stderr will be part of Python 3.5 as follows:
# from contextlib import redirect_stderr
# Perhaps if you're looking at this code and 3.5 is out, this function could be
# removed.
@contextmanager
def redirect_stderr(new_target):
    """
    A context manager to temporarily redirect stderr. Example use:
    with open(os.devnull, 'w') as f:
        with redirect_stderr(f):
            # stderr redirected to os.devnull. No annoying import messages
            # printed on module import
            from scapy.all import *
    # stderr restored
    """
    import sys
    old_target, sys.stderr = sys.stderr, new_target # replace sys.stdout
    try:
        yield new_target # run some code with the replaced stdout
    finally:
        sys.stderr = old_target # restore to the previous value

# Don't print the annoying warning message that occurs on import
with open(os.devnull, 'w') as errf:
    with redirect_stderr(errf):
        from scapy.all import sr, ICMP, IP, traceroute 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-24T11:41:51.450

With Python3, [redefining sys.stderr to None](https://stackoverflow.com/a/44828451/1097104) threw an exception *AttributeError: 'NoneType' object has no attribute 'write'*. Instead, defining it to `os.devnull` does the job:

```
import os
import sys
sys.stderr = os.devnull # suppress stderr
from scapy.all import *
sys.stderr = sys.__stderr__ # restore stderr 
```

# android - 将当前系统日期和时间与存储在 android 数据和时间库中的日期进行比较

> ID：13249343
> 
> 赞同：0
> 
> 时间：2012-11-06T10:45:45.770
> 
> 标签：android, database, date, time

如何将当前系统时间与存储在android数据库中的时间进行比较？我使用这个代码：

```
 public static long s ;
.
.
.
.

Time now = new Time();
 now.setToNow();
String query = "SELECT Cart_ID,Cart_Date from Tbl_Cart where Cart_ID="+lastId+" ";
         // String queryt = "SELECT Cart_Date from Tbl_Cart where Cart_ID="+lastId+" ";
          Cursor c = db.rawQuery(query, null);
           if (c != null && c.moveToFirst() ) {
               s = c.getLong(0);

           }

          if(s==now.setToNow())
{
...
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T11:02:59.967

此代码仅适用于您也可以对时间执行相同操作的数据。SimpleDateFormat dateFormat = new SimpleDateFormat("MM-dd-yyyy");

```
 CalCurrentDate = Calendar.getInstance();
            // that will pass cureent date .
    Current_Date = dateFormat.format(CalCurrentDate.getTime()); 
```

**使用 SQL 查询从数据库中获取日期和时间：**

Current_Date ：当前数据并通过此查询进行比较。

```
selectQuery = "SELECT  * FROM MY_TABLE WHERE `Date`>='"+Current_Date+"'"; 
```

现在您可以将此查询作为**rawQuery()**运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T10:58:48.903

如果您存储的时间以毫秒为单位，那么您可以与`System.currentTimeMillis()`. 您也可以仔细考虑与 '==' 进行比较。因为长时间变化如此之快，很难与系统时间匹配。您可以更好地寻找更少/更大或等于某个时间范围。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T11:18:22.230

它取决于您如何在数据库中存储数据时间。

如果您像日期时间一样存储，那么您可以将单个对象放入日历中，然后将其与 System.currentTimeMillis();

例如：

```
 Calendar start_time = new GregorianCalendar();
  start_time.set(Calendar.HOUR_OF_DAY, sHour);
  start_time.set(Calendar.MINUTE, sMinute); 
```

然后将其与系统时间进行比较

**If(start_time.getTimeInMillis() <= System.currentTimeMillis())**

或者

如果您将日期时间存储在 Millis 格式的时间中，那么您可以直接比较它。

例如：

**if(yourTimes <= System.currentTimeMillis())**

希望它会帮助你。

# mysql - 计算重复字段连接的结果

> ID：13249346
> 
> 赞同：2
> 
> 时间：2012-11-06T10:46:04.363
> 
> 标签：mysql, join, count, distinct

我有一个包含重复列值的 table1

表格1

```
id   code
1   201202  0000    1111
2   201202  0000    9999
3   201203  0000    9999
4   201203  0000    0999
5   201204  1000    1999
6   201204  2000    2999
7   201205  3000    3999
8   201205  4000    4999
9   201205  5000    5999 
```

表 2

```
id   numbers
1   2012020010  
2   2012024929  
3   2012033838
4   2012052434
5   2012052229
6   2012052232 
```

我想计算 table2 中作为表 1 中不同代码子串的所有数字，即结果应该是

```
code   frequency
201202   2
201203   1
201205   3 
```

我已经能够获得每个代码的所有数字，但无法弄清楚如何计算它们

```
SELECT DISTINCT table1.code , table1.id, table2.number AS ph_npa, count( * )
FROM table1
INNER JOIN table2 ON substr( table2.number, 1, 6 ) = table1.code
GROUP BY table1.number 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T10:51:35.523

我并不是真正使用“内连接”语法的人，而是更喜欢在数据上使用看起来更简洁的隐式连接。

```
select
  count(*)
from
  npanxxsmall n, phone_numbers p
where
  substr(n.code, 1, 6) = substr(p.number, 1, 6); 
```

让我知道这个是否奏效！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T10:58:14.540

```
SELECT t1.code, COUNT(*) AS frequency
FROM table_one AS t1
LEFT JOIN table_two AS t2
ON t2.numbers LIKE CONCAT(t1.code, '%')
GROUP BY t1.code 
```

使用`LEFT JOIN`或`INNER JOIN`取决于您是否想要行`frequency = 0`。我所做的基本上就是使用通配符运行`LIKE`as 连接条件。`%`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T19:46:24.980

试试下面的。它可能会对大型数据集产生性能影响，但可以帮助您入门。它正在处理我的测试数据。

```
SELECT SUBSTR(t2.numbers, 1,6) AS CODE, COUNT(*) AS frequency
FROM table_2 t2
WHERE SUBSTR(t2.numbers, 1,6) IN (SELECT t1.code FROM table_1 t1)
GROUP BY SUBSTR(t2.numbers, 1,6) 
```

让我知道它是否有效！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T20:33:25.830

好的，我开始工作了，查询速度超级快

选择

DISTINCT A.code as code, B.Counts AS frequency FROM table1 AS A

内部联接 （

SELECT substr(number, 1, 6) AS subnumber, count(1) AS Counts FROM table2 GROUP BY substr(number, 1, 6) ) AS B ON A.code = B.subnumber

即从表2中选择数字的数量和频率，然后用不同的代码形式加入表1

# sql - 将 2d 多边形挤压成 3d 多边形

> ID：13249348
> 
> 赞同：1
> 
> 时间：2012-11-06T10:46:08.800
> 
> 标签：sql, database, geospatial, postgis

我正在使用 postgresql，并且我有一个包含 2d 多边形（PostGIS 几何类型）的表。现在我的问题是如何将这个多边形挤压成一个漂亮的 3d 建筑。

有人可以帮忙吗？因为我找不到一个好的教程。

非常感谢

# r - 按包含关键字的行拆分 R 数据帧

> ID：13249350
> 
> 赞同：1
> 
> 时间：2012-11-06T10:46:15.827
> 
> 标签：r

有没有一种快速的方法来按关键字拆分大型 data.frame

因此，例如，如果我有下面的数据集，是否有一种快速的方法可以在每次出现该`source:restaurant`行时拆分数据框？对这个问题的另一个看法是，是否有一种基于截止列表（在这种情况下`c(3,7,10)`）为数据框创建因子的快速方法，然后会给我例如`factors=c(A,A,A,B,B,B,B,C,C,C)`我可以在`split(mylist,factors)`公式中使用的？谢谢

```
mylist=structure(list(V1 = structure(c(5L, 3L, 7L, 8L, 6L, 4L, 7L, 2L, 
1L, 7L), .Label = c("cider", "claret", "custard", "krispies", 
"rhubarb", "shreddies", "source:restaurant", "weetabix"), class = "factor"), 
    V2 = c(1L, 5L, NA, 9L, 13L, 17L, NA, 21L, 25L, NA), V3 = c(2L, 
    6L, NA, 10L, 14L, 18L, NA, 22L, 26L, NA), V4 = c(3L, 7L, 
    NA, 11L, 15L, 19L, NA, 23L, 27L, NA), V5 = c(4L, 8L, NA, 
    12L, 16L, 20L, NA, 24L, 28L, NA)), .Names = c("V1", "V2", 
"V3", "V4", "V5"), class = "data.frame", row.names = c(NA, -10L
)) 
```

下面是一个非常笨拙的可能解决方案，但我希望有一些更优雅的东西..

```
temp=NULL
a=which(mylist[,1] == 'source:restaurant')
for(i in seq_along(a)){temp=c(temp,rep(letters[i],(a[i]-length(temp))))}
temp=as.factor(temp)
split(mylist,temp) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T11:18:22.113

因素：

```
factor(cumsum(mylist$V1 == "source:restaurant") + 1) 
```

分裂：

```
split(mylist, cumsum(mylist$V1 == "source:restaurant")) 
```

更新：您可能`restaurant:soure`在它标记的每个组的末尾都有 ，为此您可以使用：

```
factor(cumsum(c(0, head(mylist$V1 == "source:restaurant", -1))) + 1)
split(mylist, cumsum(c(0, head(mylist$V1 == "source:restaurant", -1)))) 
```

会更好。

# ckeditor - 在带有 KCFinder 的 CKEditor 中没有“浏览服务器”按钮

> ID：13249353
> 
> 赞同：3
> 
> 时间：2012-11-06T10:46:35.017
> 
> 标签：ckeditor

我正在尝试在我的 Symfony2 项目中将 KCFinder 集成到 CKEditor 中。

我成功地为我的 textarea 字段显示了 CKEditor，但我在图像属性窗口中看不到“浏览服务器”按钮。

然而 KCFinder 在独立模式下工作得很好（用 Chrome 访问 kcfinder/browse.php 文件）

在 ckeditor 文件夹中，这里是我的 config.js 文件：

```
/*
Copyright (c) 2003-2012, CKSource - Frederico Knabben. All rights reserved.
For licensing, see LICENSE.html or http://ckeditor.com/license
*/

CKEDITOR.editorConfig = function( config )
{
    // Define changes to default configuration here. For example:
    // config.language = 'fr';
    // config.uiColor = '#AADC6E';
    config.filebrowserBrowseUrl = '/Symfony/web/kcfinder/browse.php?type=files';
    config.filebrowserImageBrowseUrl = '/Symfony/web/kcfinder/browse.php?type=images';
    config.filebrowserFlashBrowseUrl = '/Symfony/web/kcfinder/browse.php?type=flash';
    config.filebrowserUploadUrl = '/Symfony/web/kcfinder/upload.php?type=files';
    config.filebrowserImageUploadUrl = '/Symfony/web/kcfinder/upload.php?type=images';
    config.filebrowserFlashUploadUrl = '/Symfony/web/kcfinder/upload.php?type=flash';
}; 
```

它在 Firefox 中运行，而不是在 Chrome 中运行？为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-07-16T09:38:24.790

他们解决了问题，但显然没有在压缩的 js 文件中……我改用 ckeditor_source.js ，效果很好！

# tomcat - tomcat7 maven插件部署失败

> ID：13249354
> 
> 赞同：4
> 
> 时间：2012-11-06T10:46:35.350
> 
> 标签：tomcat, maven, deployment, tomcat7

我在将 tomcat 安装为服务的情况下部署到远程计算机时遇到问题。我的tomcat用户如下：

```
<tomcat-users>
<role rolename="manager"/>
<user username="admin" password="admin" roles="tomcat, admin, manager-gui, manager-script"/>

</tomcat-users> 
```

我的 settings.xml 是：

```
<settings>
<pluginGroups>
<pluginGroup>org.apache.tomcat.maven</pluginGroup>
</pluginGroups>
<servers>
<server>
  <id>tomcat7</id>
  <username>admin</username>
  <password>admin</password>
</server>

</servers>

</settings> 
```

我的 pom.xml 有以下内容：

```
 <plugin>
                <groupId>org.apache.tomcat.maven</groupId>
                <artifactId>tomcat7-maven-plugin</artifactId>
                <configuration>
                    <server>tomcat7</server>
                    <url>http://localhost:8081/manager/text</url>
                    <warFile>target/editor-${project.version}.war</warFile>
                </configuration> 
```

而且我继续在 maven 控制台的输出上获得 401 Unauthorized 。你能告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-30T05:45:46.817

以下方式对我有用。

1.  请更改您的`pom.xml`以包括

    ```
    <project>
        ...
        <build>    
            <plugins>    
            ....
                <plugin>
                    <groupId>org.apache.tomcat.maven</groupId>
                    <artifactId>tomcat7-maven-plugin</artifactId>
                    <version>2.1</version>
                    <configuration>
                        <url>http://localhost:8080/manager/text</url>
                        <server>my-tomcat</server>
                        <path>/myapp</path>
                    </configuration>
                </plugin>
            </plugins>
            ...
        </build>
        ...
    </project> 
    ```

2.  确保您的 Tomcat 7 服务器上有以下几行`TOMCAT_HOME/conf/tomcat-users.xml`：

    ```
    <!-- Role to manage WAR files via HTML /manager. The name should be as is! -->
    <role rolename="manager-gui"/>
    <!-- Role to manage WAR files via script like Maven. The name should be as is! -->
    <role rolename="manager-script"/>

    <!-- One user cannot have manager-gui and manager-script roles -->
    <user username="managerGui" password="managerPwd" roles="manager-gui"/>
    <user username="manager" password="managerPwd" roles="manager-script"/> 
    ```

3.  配置您`USER_HOME/.m2/settings.xml`以包含密码。

    ```
    <settings>
        ...
        <servers>
            ...
            <server>
                <id>my-tomcat</id>
                <username>manager</username>
                <password>managerPwd</password>
            </server>
        </servers>

    </settings> 
    ```

4.  部署使用`mvn tomcat7:redeploy`

阅读更多关于[http://tomcat.apache.org/tomcat-7.0-doc/manager-howto.html](http://tomcat.apache.org/tomcat-7.0-doc/manager-howto.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-08T14:08:10.507

尝试使用 -x -e 运行 mvn 然后你会看到什么样的信息正在发送到服务器。我的猜测是服务器没有获得用户名/通行证。这意味着配置文件有问题，即：settings.xml

tomcat7-maven-plugin 怎么知道 settings.xml 在哪里？

编辑：查看这个[which-maven-settings-xml-files](https://stackoverflow.com/questions/1261215/which-maven-settings-xml-files)

**elek**在那里提供了使用 -X 运行 mvn 并在开始时看到“从 .user/.m2/settings.xml 读取用户设置..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T17:24:23.280

`mvn tomcat7:redeploy -Dtomcat.username=tomcatscript -Dtomcat.password=s3cret`

也可以。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T10:54:12.410

您应该在 tomcat-users.xml 中声明所有角色：

```
<role rolename="tomcat"/>
<role rolename="manager-gui"/>
<role rolename="manager-script"/>
<role rolename="admin"/>
<role rolename="manager-script"/> 
```

HIH

# c# - 是否有任何方式（或建议）来加速 c#/WPF 项目的构建？

> ID：13249356
> 
> 赞同：4
> 
> 时间：2012-11-06T10:46:37.307
> 
> 标签：c#, .net, wpf, visual-studio-2010

我有 +-10 个项目的应用程序（VS2010 中的解决方案）。其中一些项目非常大（数十个文件夹和数百个文件）。

当我对较低级别的项目进行更改并且我想运行我的测试（+-10 秒）时，我必须等待 2 分钟才能构建项目。这是非常低效的。

有什么方法可以加快构建速度吗？例如，将当前项目拆分为多个项目或其他？

或者是否有一些通用的建议和建议可以加快在 Visual Studio 中构建项目的速度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T11:08:50.400

试试这个：转到“工具”菜单->“选项”->“项目和解决方案”->“构建和运行”并将“最大并行项目构建数”的值增加到 32 或更大。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T10:56:59.143

尝试使用允许并发测试执行和影子构建的工具 - NCrunch 或 MightyMoose。还要尝试摆脱未使用的引用 - 例如，将仅测试您的核心项目的所有测试移至单独的项目，以便它们在构建核心后立即执行。尽量不要使用 MS 访问器，因为它们会强制完全重新编译它们引用的所有项目。当然也可以使用 SSD 磁盘。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T10:57:42.553

根据我的经验，大量项目的解决方案在 vs2010 上构建缓慢，您对此无能为力：

1.  减少项目数量 - 较大的单个项目将比许多较小的项目构建得更快。
2.  准备一组构建配置 Build->ConfigruationManager 以仅构建项目的一部分，因为如果公共接口未更改，您不必构建依赖于已更改项目的项目。这可能很难使用，并且在运行时可能会出现一些意外错误。还要确保所有项目都指向单个`Bin\Debug Bin\Release`文件夹，以便在应用程序启动时加载新的 dll。这是必需的，因为如果您不构建项目，它的依赖项将不会被复制到其输出目录。
3.  升级到 vs 2012。这是您可以选择的最佳选择。

# luabind - 使用 luabind 绑定返回 btVector3 的函数

> ID：13249361
> 
> 赞同：1
> 
> 时间：2012-11-06T10:46:58.253
> 
> 标签：luabind, bullet

我正在尝试使用 btVector3 绑定类。将 btVector3 与构造函数绑定可以正常工作。绑定函数如：

```
void SetPosition(const btVector3& position) 
```

工作正常，但绑定这个：

```
btVector3 GetPosition() 
```

给我以下错误：

> 错误 C2719：“未命名参数”：带有 __declspec(align('16')) 的形式参数不会对齐

我了解 btVector3 已对齐，如何修复/解决此问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T19:09:09.383

不知道它是否是完全相同的问题（如果它仍然与您相关，差不多两个月后），但我在使用 Luabind 绑定 Bullet btTransforms 时遇到了麻烦。例如，这给出了您描述的相同错误：

```
void bindBtTransform(lua_State *L) {
    luabind::module(L)
    [
        luabind::class_<btTransform>("btTransform")
            // constructors
            .def(luabind::constructor<>())

            // methods
            // INCORRECT -------------------------------------------------------
            .def("getOrigin", &btTransform::getOrigin)
    ];

    return;
} 
```

但是，当我给出 getOrigin() 函数的完整签名时，它起作用了：

```
void bindBtTransform(lua_State *L) {
    luabind::module(L)
    [
        luabind::class_<btTransform>("btTransform")
            // constructors
            .def(luabind::constructor<>())

            // methods
            // CHANGE TO THIS-------------------------------------------------
            .def("getOrigin", (const btVector3& (btTransform::*)() const)&btTransform::getOrigin)
    ];

    return;
} 
```

希望对你有用；当我做出改变时，我的问题就解决了。

我现在仍然收到错误，但只有当我为 btQuaternions 定义乘法运算符时。我希望这是一个类似的修复。

# raphael - Raphael Image Rotator 和 Zurb 基金会

> ID：13249362
> 
> 赞同：1
> 
> 时间：2012-11-06T10:47:02.657
> 
> 标签：raphael, zurb-foundation

我正在尝试实现 Raphael 图像旋转演示：

[http://raphaeljs.com/image-rotation.html](http://raphaeljs.com/image-rotation.html)

作为Foundation框架中的一个滑块，但是我不能让它在旋转时不切掉侧面就让它居中，请看这里

[http://jcfolio.co.uk/current/index-raphael.html](http://jcfolio.co.uk/current/index-raphael.html)

```
<script>
    window.onload = function () {

        var src = document.getElementById("bee").src,
            angle = 0;
        document.getElementById("globe-holder").innerHTML = "";
        var R = Raphael("globe-holder", 1000 , 500);
        var img = R.image(src,-535, -150, 2000, 2000);

        var butt1 = R.set(),
            butt2 = R.set();
        butt1.push(R.circle(24.833, 26.917, 26.667).attr({stroke: "none", fill: "#66c100", "fill-opacity": .5 }),
        R.path("M12.582,9.551C3.251,16.237,0.921,29.021,7.08,38.564l-2.36,1.689l4.893,2.262l4.893,2.262l-0.568-5.36l-0.567-5.359l-2.365,1.694c-4.657-7.375-2.83-17.185,4.352-22.33c7.451-5.338,17.817-3.625,23.156,3.824c5.337,7.449,3.625,17.813-3.821,23.152l2.857,3.988c9.617-6.893,11.827-20.277,4.935-29.896C35.591,4.87,22.204,2.658,12.582,9.551z").attr({stroke: "none", fill: "#fff"}),
                   R.circle(24.833, 26.917, 26.667).attr({fill: "#fff", opacity: 0, cursor: "pointer" }));
        butt2.push(R.circle(24.833, 26.917, 26.667).attr({stroke: "none", fill: "#66c100", "fill-opacity": .5 }),
                  R.path("M37.566,9.551c9.331,6.686,11.661,19.471,5.502,29.014l2.36,1.689l-4.893,2.262l-4.893,2.262l0.568-5.36l0.567-5.359l2.365,1.694c4.657-7.375,2.83-17.185-4.352-22.33c-7.451-5.338-17.817-3.625-23.156,3.824C6.3,24.695,8.012,35.06,15.458,40.398l-2.857,3.988C2.983,37.494,0.773,24.109,7.666,14.49C14.558,4.87,27.944,2.658,37.566,9.551z").attr({stroke: "none", fill: "#fff"}),
                   R.circle(24.833, 26.917, 26.667).attr({fill: "#fff", opacity: 0, cursor: "pointer" }));
        butt1.translate(35, 380);
        butt2.translate(850, 380);
        butt1[2].click(function () {
            angle -= 120;
            img.stop().animate({transform: "r" + angle}, 1000, "backOut");
        }).mouseover(function () {
            butt1[1].animate({fill: "#66c100"}, 300);
        }).mouseout(function () {
            butt1[1].stop().attr({fill: "#fff"});
        });
        butt2[2].click(function () {
            angle += 120;
            img.animate({transform: "r" + angle}, 1000, "backOut");
        }).mouseover(function () {
            butt2[1].animate({fill: "#66c100"}, 300);
        }).mouseout(function () {
            butt2[1].stop().attr({fill: "#fff"});
        });
        // setTimeout(function () {R.safari();});
    };
</script> 
```

当我将地球仪宽度增加到 2000 像素（png 的全宽）时，它不会居中！

认为这可能是我错过的简单事情！非常感谢任何帮助。

詹姆士

# php - 这是一种合法的长轮询方法吗？

> ID：13249364
> 
> 赞同：0
> 
> 时间：2012-11-06T10:47:07.440
> 
> 标签：php, mysql, ajax, long-polling

这个 PhP 脚本是一种合法的长轮询方法还是对服务器来说很重？

```
$FoundNewContent = false;

$tokens = array();

while(!$FoundNewContent) {
    usleep(300000);
    clearstatcache();
    $SQL1 = "SELECT * FROM tokens WHERE  ID > ".$_GET['tokenID'];
    $result1 = mysql_query($SQL1);
    while($row1 = mysql_fetch_array($result1, MYSQL_ASSOC)) {
        array_push($tokens, $row1);
        $FoundNewContent = true;
    }
}

// Parse XML array    

flush() 
```

我通过 Ajax 调用这个脚本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T10:56:07.420

取决于您的服务器设置 - 只要您不使用会话，它应该可以正常工作，但如果一次连接太多，它可能会停止服务器。

另外我会添加一个时间限制，它什么都不返回并重新启动轮询。否则，如果没有添加数据并且服务器超时设置为无限制，脚本可能会永远运行。我通常会添加 30 秒的限制。

就像是：

```
$FoundNewContent = false;
$tokens = array();
$time = time();
while(!$FoundNewContent) {
  usleep(300000);
  clearstatcache();
  $SQL1 = "SELECT * FROM tokens WHERE  ID > ".$_GET['tokenID'];
  $result1 = mysql_query($SQL1);
  while($row1 = mysql_fetch_array($result1, MYSQL_ASSOC)) {
    array_push($tokens, $row1);
    $FoundNewContent = true;
  }
  if($time<time()-30) break;
}
flush() 
```

# c++ - 查询内存位置

> ID：13249367
> 
> 赞同：9
> 
> 时间：2012-11-06T10:47:25.420
> 
> 标签：c++, c, pointers, memory-management

假设有一个变量`a`和一个指向`p`地址的指针`a`。

```
int a;
int *p=&a; 
```

现在，由于我有一个指向变量位置的指针，我知道确切的内存位置（或内存块）。

我的问题是：

1.  给定一个地址，我们能找到哪个变量正在使用它们吗？（我认为这是不可能的）。
2.  给定一个地址，我们至少可以找到该内存地址所属的内存块有多大。（我知道这很愚蠢，但仍然如此）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T10:54:15.453

1.  您可以枚举所有（可疑）变量并检查它们是否指向与您的指针相同的位置（例如，您可以比较指针是否相等）
2.  如果您的指针被定义为 int *p，您可以假设它指向一个整数。当然，您的假设可能会被证明是错误的，例如，如果指针值为 null 或者您干预了指针的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T11:13:04.457

您可以将内存视为一个大字节数组：

现在如果你有一个指向数组中间某处的指针，你能告诉我有多少其他指针指向与你的指针相同的位置吗？或者你能告诉我我在你指向的内存位置存储了多少信息吗？或者你至少能告诉我在你的指针位置存储了什么样的对象？回答所有这些问题真的是不可能的，而且这个问题看起来很奇怪。一些语言在它们的内存管理例程中添加了额外的信息，它们可以在以后跟踪这些信息，但是在 C++ 中我们有最小的开销，所以你的答案是否定的，这是不可能的。

对于您的第一个问题，您可以使用智能指针来处理它，例如`shared_ptr`使用引用计数器来了解有多少`shared_ptr`指向内存位置并能够控制对象的生命周期（但当前的设计`shared_ptr`不允许您读取柜台）。

有非标准平台相关的解决方案来查询动态分配内存的大小（例如`_msize`在 Windows 和`memory_size`Unix 上），但仅适用于使用分配`malloc`且不可移植的动态内存，在 C++ 中，您应该注意这一点，如果您需要此功能，请为其实施解决方案，如果您不需要它，那么您永远不会为此支付额外费用

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-06T10:50:17.633

> 给定一个地址，我们能找到哪个变量正在使用它们吗？

不，这是不可能的。变量指向内存，而不是相反。没有办法从编译的代码中获取变量名，除了可能通过符号表，读取哪个反过来可能需要弄乱汇编。

* * *

> 给定一个地址，我们至少可以找到该内存地址所属的内存块有多大。

不，仅给出地址就无法做到这一点。~~您可以在取消引用地址后找到**sizeof()**，但不能从地址本身找到。~~

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-06T13:11:06.873

问题1\.
**A：**原生无法完成，可以通过Valgrind memcheck工具完成。VM 跟踪所有变量和分配的内存空间/堆栈。然而，它并不是为了回答这样的问题而设计的，但是通过一些修改，memcheck 工具可以回答这个问题。例如，它可以将无效的内存访问或内存泄漏地址与源代码中的变量相关联。因此，给定一个有效且已知的内存地址，它必须能够找到相应的变量。

问题 2\.
**A：**可以像上面那样做，但也可以用一些 PRELOADED 库为`malloc`, `calloc`, `strdup`,`free`等本地完成。通过手动指示的内存分配函数，您可以节省分配的地址和大小。`__builtin_return_address()`并且还通过或`backtrace()`知道内存块被分配的位置保存返回地址。您必须将所有分配的地址和大小保存到树中。然后你应该可以查询地址属于哪个chunk和chunk大小，以及哪个函数分配了chunk。

# ios - 我可以在 didReceiveRemoteNotification 中采取行动吗：当应用程序处于后台/暂停时？

> ID：13249369
> 
> 赞同：0
> 
> 时间：2012-11-06T10:47:25.223
> 
> 标签：ios, background, apple-push-notifications

该应用程序会“唤醒一段时间”还是什么？

当通知到达时（而不是在应用程序打开时），我必须向远程服务器发送一些数据。

是否可以使用推送通知来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T10:56:37.633

通过实现推送通知，如果您的应用程序在后台并收到通知，则用户将收到 ok 警报或查看稍后的消息，如果用户按下 Ok 则您的应用程序将启动并且您可以做任何您想做的事情，否则您可以检查下一次发布的待处理通知！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T21:09:52.427

当应用程序处于后台或挂起时不会调用此委托，但当应用程序从后台唤醒或打开推送通知后启动时会调用它。

# asp.net - SQL Azure 不支持 SqlCacheDependency？有什么替代品吗

> ID：13249375
> 
> 赞同：5
> 
> 时间：2012-11-06T10:47:49.793
> 
> 标签：asp.net, azure-sql-database

当 SQL Azure 不支持 SqlCacheDependency 时，如何实现 SQL 缓存依赖项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-14T14:50:45.757

MSDN 文章[Caching in ASP.NET with the SqlCacheDependency Class](http://msdn.microsoft.com/en-us/library/ms178604%28v=vs.80%29.aspx)描述了如何`SqlCacheDependency`实现。从 SQL Server 2005 开始，`SqlCacheDependency`该类能够利用 SQL Server 服务代理和查询通知。由于 SQL Server Service Broker 是随 SQL Server 2005 引入的，因此`SqlCacheDependency`早期版本的 SQL Server 的实现使用了不同的技术：轮询。

SQL Azure 当前不支持 SQL Server Service Broker，但它支持轮询。因此，要么`SqlCacheDependency`使用轮询机制进行设置，要么创建您自己的自定义`CacheDependency`.

# javascript - 使用数组来定位 jQuery/JS 中重复类中的特定元素

> ID：13249378
> 
> 赞同：2
> 
> 时间：2012-11-06T10:48:01.033
> 
> 标签：javascript, jquery

我在页面上有一个动态生成的 HTML 部分，其中包含大量重复元素，其类为`<div class="paraContent">`

我可以访问`<head>`CMS 中的此页面，并希望在数组或脚本中指定元素以隐藏某些元素。

到目前为止我的代码：

```
var excContent = ['0', '1', '25']

$(".paraContent").each(function(index[excContent]) {
    $(this).hide();
}) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T10:51:08.273

如果我了解您要做什么，那就是`paraContent`根据索引隐藏一些具有类的元素，您可以这样做

```
$.each(excContent, function(){$('.paraContent:eq('+this+')').hide()}); 
```

或（如果你有一个大数组更快）：

```
var $all = $('.paraContent');
$.each(excContent, function(){$all.eq(this).hide()}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T11:07:23.827

虽然[这个其他答案](https://stackoverflow.com/a/13249420/447356)是正确的并且非常理想，但我将继续提供替代方法，该方法仍然非常有效并且会迭代所有元素，从而允许您为不在您的项目数组中隐藏的元素做一些事情：

```
var excContent = {'1': true, '0': true};
$(".paraContent").each(function(index) {
    if (excContent[index.toString()])
        $(this).hide();
}) 
```

如您所见，诀窍是使用关联数组而不是普通数组，然后搜索它就变成了一个微不足道的动作。

[现场测试用例](http://jsfiddle.net/8veeE/2/)。

# jasper-reports - jasperreports 条形图计算

> ID：13249379
> 
> 赞同：2
> 
> 时间：2012-11-06T10:48:04.373
> 
> 标签：jasper-reports

我正在尝试使用 iReports 生成报告。我必须计算表达式为 " `new Double( $F{stock}.doubleValue() / $V{stock_SUM}.doubleValue() )`" 的某些数据的百分比。当我将数据放在详细信息带的列中时，这可以正常工作

`new Double( $F{stock}.doubleValue() / $V{stock_SUM}.doubleValue() ) *100`但是当我在摘要中对我的条形图使用相同的表达式（“ ”表示百分比）时，这并没有给我正确的结果。

是否有任何属性在条形图中与评估时间“自动”对表达式的作用相同。如果没有，那么我们如何在条形图中实现正确的百分比计算。我曾尝试更改评估时间以报告图表，但这也没有奏效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-27T11:41:25.367

你的数据源是什么？如果是 SQL 查询，我建议在其中准备所需的数据并在您的字符中使用它。要在不重写太多的情况下计算 stock_SUM，可以使用[窗口函数](http://en.wikipedia.org/wiki/Select_%28SQL%29#Window_function)。:)

# sql-server-ce - SQL Server Compact 4.0 DateTime 精度不包括秒

> ID：13249380
> 
> 赞同：1
> 
> 时间：2012-11-06T10:48:03.920
> 
> 标签：sql-server-ce, sql-server-ce-4

根据此链接[http://msdn.microsoft.com/en-us/library/ms172424.aspx](http://msdn.microsoft.com/en-us/library/ms172424.aspx) SQL Server Compact Edition 4.0 支持`DateTime`通常的 SQL Server 精度（秒和毫秒到 3.33）。

但是，我正在使用 SQL Server CE ADO.NET 提供程序创建记录，`DateTime`但数据仅存储到分钟精度。

我创建了 SQL 来返回数据，`DataReader.GetDateTime(x)`并且在没有秒或毫秒的情况下返回值。

SQL Server Compact 4.0 是否真的支持较低的精度？

我的 DDL 是：

```
CREATE TABLE [Message]
(
   [Id] UNIQUEIDENTIFIER NOT NULL DEFAULT NEWID(),
   [CreatedTimestamp] DATETIME NOT NULL,
   [ProcessedTimestamp] DATETIME NOT NULL,
   [QueueName] NVARCHAR(255) NOT NULL,
   [MessageType] NVARCHAR(512) NOT NULL,
   [MessageContent] NTEXT NOT NULL,
   [MessageState] INT NOT NULL DEFAULT 0
); 
```

我的代码是：

```
using (SqlCeConnection connection = new SqlCeConnection(connectionString))
{
   connection.Open();

   using (SqlCeCommand command = new SqlCeCommand(
        "INSERT INTO Message " +
        "(Id, CreatedTimestamp, ProcessedTimestamp, QueueName, MessageType, MessageContent)" +
        "VALUES " +
        "(@Id, @CreatedTimestamp, @ProcessedTimestamp, @QueueName, @MessageType, @MessageContent)", connection))
   {
       command.Parameters.Add(new SqlCeParameter("@Id", message.MessageId) { DbType = DbType.Guid });
       command.Parameters.Add(new SqlCeParameter("@CreatedTimestamp", DateTime.UtcNow.ToString("yyyy-MM-dd HH:mm:ss.fff")) { DbType = DbType.DateTime });
       command.Parameters.Add(new SqlCeParameter("@ProcessedTimestamp", DateTime.UtcNow.ToString("yyyy-MM-dd HH:mm:ss.fff")) { DbType = DbType.DateTime });
       command.Parameters.Add(new SqlCeParameter("@QueueName", queue) { DbType = DbType.String });

       //Code snipped...

       command.ExecuteNonQuery();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-11T13:07:39.933

我有类似的问题。我的原因是使用 SDF Viewer 来探索数据库。此应用程序不在日期时间字段中显示秒和毫秒。但是 SQL Server Compact 4.0 实际上以高精度存储日期时间，正如它所记录的那样。

这个问题很老，但也许我的回答对某人有用。

# html - 正则表达式解析多行 HTML

> ID：13249392
> 
> 赞同：-7
> 
> 时间：2012-11-06T10:49:10.923
> 
> 标签：html, regex, perl, html-parsing, multiline

我正在尝试使用正则表达式解析多行 html 文件。

HTML 代码：

```
<td>Details</td></tr>  
<tr class=d1>
<td>uss_vod_translator</td> 
```

正则表达式：

```
if ($line =~ m/Details<\/td>\s*<\/tr>\s*<tr\s*class=d1>\s*<td>(\w*)<\/td>/)
{
    print "$1";
} 
```

我将`/s*`(space) 用于多行，但它不起作用。我搜索了它，甚至用于`/\?`多线，但这也不起作用。

谁能建议我如何解析多行 HTML？

我知道正则表达式是解析 HTML 的糟糕解决方案。但是我有一个遗留的 HTML 代码，我需要对其进行解析并且别无选择。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-06T10:53:39.513

> 谁能建议我如何解析多行 HTML？

停止尝试使用正则表达式并使用将为您解析它的模块。

[HTML::TreeBuilder](https://metacpan.org/module/HTML::TreeBuilder)是一个很好的解决方案。

[HTML::TreeBuilder::LibXML](https://metacpan.org/module/HTML::TreeBuilder::LibXML)为您提供相同的 API，但由快速解析器提供支持。

[HTML::TreeBuilder::XPath](https://metacpan.org/module/HTML::TreeBuilder::XPath)添加了 XPath 支持以及快速解析器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T10:48:00.903

如上所述，**永远不要使用正则表达式来解析 HTML**。

我正在使用 HTML::TreeBuilder::XPath 来解析 HTML，这*大大*减少了每个抓取/解析程序的创建时间。

以下是您的任务可以如何实施：

```
use Modern::Perl;
use HTML::TreeBuilder::XPath;

my $html = <<END;
<tr><td>General Info</td></tr>  
<tr class=d1>
<td>some info</td></tr>
<tr><td>Details</td></tr>  
<tr class=d1>
<td>uss_vod_translator</td></tr>
<tr><td>Another header</td></tr>  
<tr class=d1>
<td>some other info</td></tr>
END

my $tree = HTML::TreeBuilder::XPath->new_from_content($html);

my ($details) = $tree->findvalues('//tr[ td[ text() = "Details" ] ]/following-sibling::tr[1]/td[1]');
say $details; 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-11-06T11:25:40.020

在匹配您的模式之前尝试以下行

```
 $line=~s/>(\n|\t|\s)+</></gs; 
```

然后您可以将 HTML 字符串设置为单行。

# text - 使用rapidminer提取文本信息

> ID：13249396
> 
> 赞同：1
> 
> 时间：2012-11-06T10:49:25.220
> 
> 标签：text, full-text-search, text-processing, rapidminer

我有一个文本数据列表，我想从中提取某些部分。我目前正在使用正则表达式来提取我想要的数据，但它开始变得非常复杂，因为每条记录都略有不同。有没有办法使用 Rapidminer 根据一些典型示例“学习”正则表达式？

例如，对于以下每条记录，我想将文本提取`24`到`18`两个新属性中：

```
word 24 on line 18
Wrd 24 of Ln 18
Line 18, Word 24
Word 24 comes after word 22 on line 18 (not line 19) 
```

我看过所有的文本处理视频，但没有一个显示如何做这种事情，我真的不知道从哪里开始。除了手动创建正则表达式之外，任何人都可以建议一种方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-10T22:22:43.507

[TXR 语言](http://www.nongnu.org/txr)有一种直接的方式来表达模式匹配变体，而无需神秘的正则表达式：

这是您的数据文件：

```
$ cat 13249396.dat 
word 24 on line 18
Wrd 24 of Ln 18
Line 18, Word 24
Word 24 comes after word 22 on line 18 (not line 19) 
```

这是 txr 脚本：

```
@(collect)
@  (some)
word @wd on line @ln
@  (or)
Wrd @wd of Ln @ln
@  (or)
Line @ln, Word @wd
@  (or)
Word @wd comes after word @nil on line @ln (@(skip)
@  (end)
@(end)
@(output)
@  (repeat)
@wd:@ln
@  (end)
@(end) 
```

测试运行：

```
$ txr 13249396.txr 13249396.dat
24:18
24:18
24:18
24:18 
```

该脚本是通过从示例文件中获取案例并用特殊语法替换一些内容而开发的。

# xcode - 如何在 Xcode 中设置默认注释？

> ID：13249399
> 
> 赞同：2
> 
> 时间：2012-11-06T10:49:43.957
> 
> 标签：xcode

> **可能重复：**
> [如何编辑默认 Xcode 模板？](https://stackoverflow.com/questions/1285221/how-to-edit-an-default-xcode-template)
> [如何在 Xcode 4.5 中设置 ___COPYRIGHT___](https://stackoverflow.com/questions/12588846/how-to-set-copyright-in-xcode-4-5)

当我们添加一个新文件时，

在 .h 和 .m 文件中，顶部总是有一个注释/文档部分。

例子。

```
 //
    //  abc.h
    //  Project name
    //
    //  Created by myname on 06/11/12.
    //
    // 
```

如何将这些默认注释修改为：

```
 // File Name: abc.h
    // Created By: myName
    // Created On: 06/11/12.
    // Purpose: 
    // Copyright (c) 2012 mycompany name. All rights reserved. 
```

请帮我解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T10:56:17.920

如果您使用的是 Xcode 4.5 及更高版本，请按照以下流程操作。

转到 Xcode 的路径。（右键单击 Xcode + 在 Finder 中显示）。右键显示包内容Contents->Developer->Library->Xcode->Templates->File Templates->Cocoa。

选择一个模板。里面会有文件`___FILEBASENAME___`。编辑并保存它。

同样，您可以编辑您需要的所有模板。

# settings - 如何在 MediaWiki 中存储扩展设置？

> ID：13249405
> 
> 赞同：1
> 
> 时间：2012-11-06T10:50:07.377
> 
> 标签：settings, mediawiki, storing-data

我查找了一些插件，发现它们中的大多数都要求在数据库中手动创建一个表，或者将它们的设置存储在某个文件中。

什么是最好的方法？谢谢。

PS 我真的不认为客户想在他的数据库中手动创建任何东西。

**更新** 现在我正在使用带有表单的特殊页面，并将设置作为序列化数据存储在文件中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-26T19:20:20.347

正如安装手册所说，拥有对服务器的 shell 访问权限是一项要求。有一些解决方法，但不要指望一切都能正常工作。

# android - 在 Android 上播放本地存储的 HTML5 视频

> ID：13249412
> 
> 赞同：5
> 
> 时间：2012-11-06T10:50:38.803
> 
> 标签：android, html, video

我正在制作一个需要在 Android 4.1 平板电脑上完全离线运行的网页。我正在尝试使用 HTML5`<video>`标签将本地存储在 SD 卡上的视频嵌入。Source 属性使用相对路径指向包含该视频的子目录。

问题是，点击播放按钮后，视频保持黑色并且只播放声音。启用视频全屏后，它可以正常播放。本机浏览器和 Chrome 中的行为相同。当我将源设置为在线存储的相同视频，或在平板电脑上启用 Web 服务器并从 localhost 加载视频时，一切正常并且嵌入的视频播放良好。

有没有办法强制本地视频在 Android 上以嵌入式模式播放？还是出于某些安全原因这种行为？

# c# - HttpWebResponse 始终为空

> ID：13249413
> 
> 赞同：5
> 
> 时间：2012-11-06T10:50:41.093
> 
> 标签：c#, http, exception, post

我有方法可以使`HTTP POST`

我用这样的try catch调用这个方法

```
try
{
   returnString = MakePost(gatewayEnpoint, data);
   return returnString;
}
catch (System.Net.WebException ex)
{
   var response = (HttpWebResponse)ex.Response;
   if (response.StatusCode != HttpStatusCode.RequestTimeout || response.StatusCode != HttpStatusCode.InternalServerError)
   {
       return ex.Message.ToString();
   }
} 
```

但`response`始终为空。

我如何处理 HTTP 异常？我需要状态码

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T10:52:53.633

如果客户端甚至没有设法联系服务器，则不会有响应。

会有响应的*情况*是 404 状态代码。

如果您*从未*得到响应，那么您可能犯了其他错误（例如，尝试联系不存在的服务器）。

顺便说一句，我*强烈*建议您不要以与现在相同的方式返回成功和错误情况。

# django - form.is_valid() 返回 false

> ID：13249414
> 
> 赞同：2
> 
> 时间：2012-11-06T10:50:42.570
> 
> 标签：django, django-models, django-forms

我有一个模型类。

```
class Search(forms.Form):
    query=forms.CharField() 
```

并且，一个视图功能。

```
def search(request):
  c = {}
  c.update(csrf(request))
  if request.method == 'POST': 
    form = Search(request.POST) 
      if form.is_valid():
        search_query=form.cleaned_data['query']
            return HttpResponse("your query: %s" %search_query  , c) 
      else:
        return HttpResponse(form , c)
  else:
    return render_to_response('polls/search.html', c) 
```

而且，这是我的 search.html：

```
 <form action="/polls/search" method="post">{% csrf_token %}
  <p><label for="query_label">query:</label>
    <input type="text" name="query_txt" id="query_txt_id" /></p>
  <input type="submit" value="Submit" />
 </form> 
```

在输入一些字符后，它总是以纯文本形式显示以下内容（不是错误）。

> “发生服务器错误。请联系管理员。”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T10:57:21.063

您的`id`查询字段不正确。Django 期望它是`id_query`.

您不需要对表单输入进行硬编码。如果您包含`{{ form.as_p }}`在模板中，Django 将正确[呈现表单](https://docs.djangoproject.com/en/dev/topics/forms/?from=olddocs#displaying-a-form-using-a-template)。

```
<form action="/polls/search" method="post">{% csrf_token %}
  {{ form.as_p }}
  <input type="submit" value="Submit" />
</form> 
```

如果您真的想在模板中对表单进行硬编码，请从 Django 生成的工作 html 开始，然后从那里自定义它。请注意，模板中的表单和下面的代码段不会显示错误。[有关更多详细信息，请参阅有关自定义表单模板](https://docs.djangoproject.com/en/dev/topics/forms/?from=olddocs#customizing-the-form-template)的文档。

```
<form action="/polls/search" method="post">{% csrf_token %}
  <p><label for="id_query">Query:</label> <input type="text" name="query" id="id_query" /></p>
  <input type="submit" value="Submit" />
</form> 
```

# python - 使用 JSON 模块进行漂亮打印时如何实现自定义缩进？

> ID：13249415
> 
> 赞同：55
> 
> 时间：2012-11-06T10:50:49.173
> 
> 标签：python, json, indentation

所以我使用 Python 2.7，使用`json`模块对以下数据结构进行编码：

```
'layer1': {
    'layer2': {
        'layer3_1': [ long_list_of_stuff ],
        'layer3_2': 'string'
    }
} 
```

我的问题是我正在使用漂亮的打印来打印所有内容，如下所示：

```
json.dumps(data_structure, indent=2) 
```

太好了，除了我想缩进所有内容，除了其中的内容`"layer3_1"`— 这是一个列出坐标的庞大字典，因此，在每个坐标上设置一个值可以使漂亮的打印创建一个包含数千行的文件，其中包含示例如下：

```
{
  "layer1": {
    "layer2": {
      "layer3_1": [
        {
          "x": 1,
          "y": 7
        },
        {
          "x": 0,
          "y": 4
        },
        {
          "x": 5,
          "y": 3
        },
        {
          "x": 6,
          "y": 9
        }
      ],
      "layer3_2": "string"
    }
  }
} 
```

我真正想要的是类似于以下内容：

```
{
  "layer1": {
    "layer2": {
      "layer3_1": [{"x":1,"y":7},{"x":0,"y":4},{"x":5,"y":3},{"x":6,"y":9}],
      "layer3_2": "string"
    }
  }
} 
```

我听说可以扩展`json`模块：是否可以将其设置为仅在对象内部时关闭缩进`"layer3_1"`？如果是这样，有人能告诉我怎么做吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-06T13:31:18.383

^(（**注意：** 此答案中的代码仅适用于`json.dumps()`返回 JSON 格式的字符串，但*不适*用于`json.dump()`直接写入类似文件的对象。在我对[写二维问题的回答中，它的修改版本适用于两者列表到 JSON 文件](https://stackoverflow.com/questions/42710879/write-two-dimensional-list-to-json-file)。）)

**更新**

以下是我的原始答案的一个版本，经过多次修改。与原版不同，我发布它只是为了展示如何在 JFSebastian 的[回答](https://stackoverflow.com/a/13249927/355230)中获得第一个想法来工作，并且像他的一样，返回对象的非缩进*字符串*表示。最新更新的版本返回单独格式化的 Python 对象 JSON。

根据 OP 的注释，每个坐标的键`dict`将按排序顺序显示，但前提是在驱动进程`sort_keys=True`的初始调用中指定了关键字参数`json.dumps()`，并且它不再将对象的类型更改为字符串。换句话说，现在维护“包装”对象的实际类型。

我认为不理解我的帖子的初衷导致很多人对它投了反对票——所以，主要是因为这个原因，我已经“修复”并多次改进了我的答案。当前版本是我的原始答案与@Erik Allik 在他的[答案](https://stackoverflow.com/questions/13249415/how-to-implement-custom-indentation-when-pretty-printing-with-the-json-module/25935321#25935321)中使用的一些想法的混合体，以及此答案下方评论中显示的其他用户的有用反馈。

以下代码在 Python 2.7.16 和 3.7.4 中似乎都没有改变。

```
from _ctypes import PyObj_FromPtr
import json
import re

class NoIndent(object):
    """ Value wrapper. """
    def __init__(self, value):
        self.value = value

class MyEncoder(json.JSONEncoder):
    FORMAT_SPEC = '@@{}@@'
    regex = re.compile(FORMAT_SPEC.format(r'(\d+)'))

    def __init__(self, **kwargs):
        # Save copy of any keyword argument values needed for use here.
        self.__sort_keys = kwargs.get('sort_keys', None)
        super(MyEncoder, self).__init__(**kwargs)

    def default(self, obj):
        return (self.FORMAT_SPEC.format(id(obj)) if isinstance(obj, NoIndent)
                else super(MyEncoder, self).default(obj))

    def encode(self, obj):
        format_spec = self.FORMAT_SPEC  # Local var to expedite access.
        json_repr = super(MyEncoder, self).encode(obj)  # Default JSON.

        # Replace any marked-up object ids in the JSON repr with the
        # value returned from the json.dumps() of the corresponding
        # wrapped Python object.
        for match in self.regex.finditer(json_repr):
            # see https://stackoverflow.com/a/15012814/355230
            id = int(match.group(1))
            no_indent = PyObj_FromPtr(id)
            json_obj_repr = json.dumps(no_indent.value, sort_keys=self.__sort_keys)

            # Replace the matched id string with json formatted representation
            # of the corresponding Python object.
            json_repr = json_repr.replace(
                            '"{}"'.format(format_spec.format(id)), json_obj_repr)

        return json_repr

if __name__ == '__main__':
    from string import ascii_lowercase as letters

    data_structure = {
        'layer1': {
            'layer2': {
                'layer3_1': NoIndent([{"x":1,"y":7}, {"x":0,"y":4}, {"x":5,"y":3},
                                      {"x":6,"y":9},
                                      {k: v for v, k in enumerate(letters)}]),
                'layer3_2': 'string',
                'layer3_3': NoIndent([{"x":2,"y":8,"z":3}, {"x":1,"y":5,"z":4},
                                      {"x":6,"y":9,"z":8}]),
                'layer3_4': NoIndent(list(range(20))),
            }
        }
    }

    print(json.dumps(data_structure, cls=MyEncoder, sort_keys=True, indent=2)) 
```

输出：

```
{
  "layer1": {
    "layer2": {
      "layer3_1": [{"x": 1, "y": 7}, {"x": 0, "y": 4}, {"x": 5, "y": 3}, {"x": 6, "y": 9}, {"a": 0, "b": 1, "c": 2, "d": 3, "e": 4, "f": 5, "g": 6, "h": 7, "i": 8, "j": 9, "k": 10, "l": 11, "m": 12, "n": 13, "o": 14, "p": 15, "q": 16, "r": 17, "s": 18, "t": 19, "u": 20, "v": 21, "w": 22, "x": 23, "y": 24, "z": 25}],
      "layer3_2": "string",
      "layer3_3": [{"x": 2, "y": 8, "z": 3}, {"x": 1, "y": 5, "z": 4}, {"x": 6, "y": 9, "z": 8}],
      "layer3_4": [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19]
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-11-06T11:21:02.813

一个错误，但是一旦你从 dumps() 中获得了字符串，你可以对其执行正则表达式替换，如果你确定它的内容格式的话。类似于以下内容：

```
s = json.dumps(data_structure, indent=2)
s = re.sub('\s*{\s*"(.)": (\d+),\s*"(.)": (\d+)\s*}(,?)\s*', r'{"\1":\2,"\3":\4}\5', s) 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-09-19T13:38:22.967

以下解决方案似乎在 Python 2.7.x 上正常工作。它使用从[Python 2.7 中的自定义 JSON 编码器获取的解决方法来插入纯 JavaScript 代码](https://stackoverflow.com/questions/13188719/custom-json-encoder-in-python-2-7-to-insert-plain-javascript-code)，以避免使用基于 UUID 的替换方案在输出中以 JSON 字符串结尾的自定义编码对象。

```
class NoIndent(object):
    def __init__(self, value):
        self.value = value

class NoIndentEncoder(json.JSONEncoder):
    def __init__(self, *args, **kwargs):
        super(NoIndentEncoder, self).__init__(*args, **kwargs)
        self.kwargs = dict(kwargs)
        del self.kwargs['indent']
        self._replacement_map = {}

    def default(self, o):
        if isinstance(o, NoIndent):
            key = uuid.uuid4().hex
            self._replacement_map[key] = json.dumps(o.value, **self.kwargs)
            return "@@%s@@" % (key,)
        else:
            return super(NoIndentEncoder, self).default(o)

    def encode(self, o):
        result = super(NoIndentEncoder, self).encode(o)
        for k, v in self._replacement_map.iteritems():
            result = result.replace('"@@%s@@"' % (k,), v)
        return result 
```

那么这个

```
obj = {
  "layer1": {
    "layer2": {
      "layer3_2": "string", 
      "layer3_1": NoIndent([{"y": 7, "x": 1}, {"y": 4, "x": 0}, {"y": 3, "x": 5}, {"y": 9, "x": 6}])
    }
  }
}
print json.dumps(obj, indent=2, cls=NoIndentEncoder) 
```

产生以下**输出：**

```
{
  "layer1": {
    "layer2": {
      "layer3_2": "string", 
      "layer3_1": [{"y": 7, "x": 1}, {"y": 4, "x": 0}, {"y": 3, "x": 5}, {"y": 9, "x": 6}]
    }
  }
} 
```

* * *

它还正确地将所有选项（除了`indent`）传递`sort_keys=True`给嵌套`json.dumps`调用。

```
obj = {
    "layer1": {
        "layer2": {
            "layer3_1": NoIndent([{"y": 7, "x": 1, }, {"y": 4, "x": 0}, {"y": 3, "x": 5, }, {"y": 9, "x": 6}]),
            "layer3_2": "string",
        }
    }
}    
print json.dumps(obj, indent=2, sort_keys=True, cls=NoIndentEncoder) 
```

正确**输出**：

```
{
  "layer1": {
    "layer2": {
      "layer3_1": [{"x": 1, "y": 7}, {"x": 0, "y": 4}, {"x": 5, "y": 3}, {"x": 6, "y": 9}], 
      "layer3_2": "string"
    }
  }
} 
```

* * *

它也可以与例如`collections.OrderedDict`：

```
obj = {
    "layer1": {
        "layer2": {
            "layer3_2": "string",
            "layer3_3": NoIndent(OrderedDict([("b", 1), ("a", 2)]))
        }
    }
}
print json.dumps(obj, indent=2, cls=NoIndentEncoder) 
```

**输出**：

```
{
  "layer1": {
    "layer2": {
      "layer3_3": {"b": 1, "a": 2}, 
      "layer3_2": "string"
    }
  }
} 
```

**更新**：在 Python 3 中，没有`iteritems`. 你可以`encode`用这个替换：

```
def encode(self, o):
    result = super(NoIndentEncoder, self).encode(o)
    for k, v in iter(self._replacement_map.items()):
        result = result.replace('"@@%s@@"' % (k,), v)
    return result 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2016-09-27T16:55:52.660

这产生了 OP 的预期结果：

```
import json

class MyJSONEncoder(json.JSONEncoder):

  def iterencode(self, o, _one_shot=False):
    list_lvl = 0
    for s in super(MyJSONEncoder, self).iterencode(o, _one_shot=_one_shot):
      if s.startswith('['):
        list_lvl += 1
        s = s.replace('\n', '').rstrip()
      elif 0 < list_lvl:
        s = s.replace('\n', '').rstrip()
        if s and s[-1] == ',':
          s = s[:-1] + self.item_separator
        elif s and s[-1] == ':':
          s = s[:-1] + self.key_separator
      if s.endswith(']'):
        list_lvl -= 1
      yield s

o = {
  "layer1":{
    "layer2":{
      "layer3_1":[{"y":7,"x":1},{"y":4,"x":0},{"y":3,"x":5},{"y":9,"x":6}],
      "layer3_2":"string",
      "layer3_3":["aaa\nbbb","ccc\nddd",{"aaa\nbbb":"ccc\nddd"}],
      "layer3_4":"aaa\nbbb",
    }
  }
}

jsonstr = json.dumps(o, indent=2, separators=(',', ':'), sort_keys=True,
    cls=MyJSONEncoder)
print(jsonstr)
o2 = json.loads(jsonstr)
print('identical objects: {}'.format((o == o2))) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-06T11:21:14.723

你可以试试：

*   将不应缩进的列表标记为`NoIndentList`：

    ```
    class NoIndentList(list):
        pass 
    ```

*   覆盖[json.Encoder.default 方法](http://hg.python.org/cpython/file/ec00f8570c55/Lib/json/encoder.py#l151)来为`NoIndentList`.

    您可以将其转换回列表并调用 json.dumps() 而无需`indent`获得一行

**似乎上述方法不适用于 json 模块：**

```
import json
import sys

class NoIndent(object):
    def __init__(self, value):
        self.value = value

def default(o, encoder=json.JSONEncoder()):
    if isinstance(o, NoIndent):
        return json.dumps(o.value)
    return encoder.default(o)

L = [dict(x=x, y=y) for x in range(1) for y in range(2)]
obj = [NoIndent(L), L]
json.dump(obj, sys.stdout, default=default, indent=4) 
```

它产生无效的输出（列表被序列化为字符串）：

```
[
    "[{\"y\": 0, \"x\": 0}, {\"y\": 1, \"x\": 0}]", 
    [
        {
            "y": 0, 
            "x": 0
        }, 
        {
            "y": 1, 
            "x": 0
        }
    ]
] 
```

如果可以使用`yaml`，则该方法有效：

```
import sys
import yaml

class NoIndentList(list):
    pass

def noindent_list_presenter(dumper, data):
    return dumper.represent_sequence(u'tag:yaml.org,2002:seq', data,
                                     flow_style=True)
yaml.add_representer(NoIndentList, noindent_list_presenter)

obj = [
    [dict(x=x, y=y) for x in range(2) for y in range(1)],
    [dict(x=x, y=y) for x in range(1) for y in range(2)],
    ]
obj[0] = NoIndentList(obj[0])
yaml.dump(obj, stream=sys.stdout, indent=4) 
```

它产生：

```
- [{x: 0, y: 0}, {x: 1, y: 0}]
-   - {x: 0, y: 0}
    - {x: 0, y: 1} 
```

即，第一个列表使用序列化`[]`并且所有项目都在一行上，第二个列表使用每个项目一行。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-06T12:11:30.083

该解决方案不像其他解决方案那样优雅和通用，您不会从中学到很多东西，但它快速简单。

```
def custom_print(data_structure, indent):
    for key, value in data_structure.items():
        print "\n%s%s:" % (' '*indent,str(key)),
        if isinstance(value, dict):
            custom_print(value, indent+1)
        else:
            print "%s" % (str(value)), 
```

用法和输出：

```
>>> custom_print(data_structure,1)

 layer1:
  layer2:
   layer3_2: string
   layer3_1: [{'y': 7, 'x': 1}, {'y': 4, 'x': 0}, {'y': 3, 'x': 5}, {'y': 9, 'x': 6}] 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-07-18T06:26:44.207

最佳性能代码（10MB 文本花费 1s）：

```
import json
def dumps_json(data, indent=2, depth=2):
    assert depth > 0
    space = ' '*indent
    s = json.dumps(data, indent=indent)
    lines = s.splitlines()
    N = len(lines)
    # determine which lines to be shortened
    is_over_depth_line = lambda i: i in range(N) and lines[i].startswith(space*(depth+1))
    is_open_bracket_line = lambda i: not is_over_depth_line(i) and is_over_depth_line(i+1)
    is_close_bracket_line = lambda i: not is_over_depth_line(i) and is_over_depth_line(i-1)
    # 
    def shorten_line(line_index):
        if not is_open_bracket_line(line_index):
            return lines[line_index]
        # shorten over-depth lines
        start = line_index
        end = start
        while not is_close_bracket_line(end):
            end += 1
        has_trailing_comma = lines[end][-1] == ','
        _lines = [lines[start][-1], *lines[start+1:end], lines[end].replace(',','')]
        d = json.dumps(json.loads(' '.join(_lines)))
        return lines[line_index][:-1] + d + (',' if has_trailing_comma else '')
    # 
    s = '\n'.join([
        shorten_line(i)
        for i in range(N) if not is_over_depth_line(i) and not is_close_bracket_line(i)
    ])
    #
    return s 
```

更新：这是我的解释：

首先我们使用 json.dumps 来获取 json 字符串已经缩进。例子：

```
>>>  print(json.dumps({'0':{'1a':{'2a':None,'2b':None},'1b':{'2':None}}}, indent=2))
[0]  {
[1]    "0": {
[2]      "1a": {
[3]        "2a": null,
[4]        "2b": null
[5]      },
[6]      "1b": {
[7]        "2": null
[8]      }
[9]    }
[10] } 
```

如果我们设置`indent=2`and `depth = 2`，那么深度线也以 6 个空格开头

我们有 4 种类型的线路：

1.  法线
2.  开括号线 (2,6)
3.  超过深度线 (3,4,7)
4.  右括号线 (5,8)

我们将尝试将一系列行（类型 2 + 3 + 4）合并为一行。例子：

```
[2]      "1a": {
[3]        "2a": null,
[4]        "2b": null
[5]      }, 
```

将合并为：

```
[2]      "1a": {"2a": null, "2b": null}, 
```

注意：右括号行可能有尾随逗号

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-07-13T15:41:27.020

确实，YAML 比 JSON 更好的一件事。

我无法让 NoIndentEncoder 工作......，但我可以在 JSON 字符串上使用正则表达式......

```
def collapse_json(text, list_length=5):
    for length in range(list_length):
        re_pattern = r'\[' + (r'\s*(.+)\s*,' * length)[:-1] + r'\]'
        re_repl = r'[' + ''.join(r'\{}, '.format(i+1) for i in range(length))[:-2] + r']'

        text = re.sub(re_pattern, re_repl, text)

    return text 
```

问题是，如何在嵌套列表上执行此操作？

前：

```
[
  0,
  "any",
  [
    2,
    3
  ]
] 
```

后：

```
[0, "any", [2, 3]] 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-02-19T20:02:29.287

如果您有太多不同类型的对象对 JSON 有贡献而无法尝试 JSONEncoder 方法，并且有太多不同类型无法使用正则表达式，那么这里是一个后处理解决方案。此函数在指定级别后折叠空白，而无需知道数据本身的细节。

```
def collapse_json(text, indent=12):
    """Compacts a string of json data by collapsing whitespace after the
    specified indent level

    NOTE: will not produce correct results when indent level is not a multiple
    of the json indent level
    """
    initial = " " * indent
    out = []  # final json output
    sublevel = []  # accumulation list for sublevel entries
    pending = None  # holder for consecutive entries at exact indent level
    for line in text.splitlines():
        if line.startswith(initial):
            if line[indent] == " ":
                # found a line indented further than the indent level, so add
                # it to the sublevel list
                if pending:
                    # the first item in the sublevel will be the pending item
                    # that was the previous line in the json
                    sublevel.append(pending)
                    pending = None
                item = line.strip()
                sublevel.append(item)
                if item.endswith(","):
                    sublevel.append(" ")
            elif sublevel:
                # found a line at the exact indent level *and* we have sublevel
                # items. This means the sublevel items have come to an end
                sublevel.append(line.strip())
                out.append("".join(sublevel))
                sublevel = []
            else:
                # found a line at the exact indent level but no items indented
                # further, so possibly start a new sub-level
                if pending:
                    # if there is already a pending item, it means that
                    # consecutive entries in the json had the exact same
                    # indentation and that last pending item was not the start
                    # of a new sublevel.
                    out.append(pending)
                pending = line.rstrip()
        else:
            if pending:
                # it's possible that an item will be pending but not added to
                # the output yet, so make sure it's not forgotten.
                out.append(pending)
                pending = None
            if sublevel:
                out.append("".join(sublevel))
            out.append(line)
    return "\n".join(out) 
```

例如，使用此结构作为缩进级别为 4 的 json.dumps 的输入：

```
text = json.dumps({"zero": ["first", {"second": 2, "third": 3, "fourth": 4, "items": [[1,2,3,4], [5,6,7,8], 9, 10, [11, [12, [13, [14, 15]]]]]}]}, indent=4) 
```

这是函数在不同缩进级别的输出：

```
>>> print collapse_json(text, indent=0)
{"zero": ["first", {"items": [[1, 2, 3, 4], [5, 6, 7, 8], 9, 10, [11, [12, [13, [14, 15]]]]], "second": 2, "fourth": 4, "third": 3}]}
>>> print collapse_json(text, indent=4)
{
    "zero": ["first", {"items": [[1, 2, 3, 4], [5, 6, 7, 8], 9, 10, [11, [12, [13, [14, 15]]]]], "second": 2, "fourth": 4, "third": 3}]
}
>>> print collapse_json(text, indent=8)
{
    "zero": [
        "first",
        {"items": [[1, 2, 3, 4], [5, 6, 7, 8], 9, 10, [11, [12, [13, [14, 15]]]]], "second": 2, "fourth": 4, "third": 3}
    ]
}
>>> print collapse_json(text, indent=12)
{
    "zero": [
        "first", 
        {
            "items": [[1, 2, 3, 4], [5, 6, 7, 8], 9, 10, [11, [12, [13, [14, 15]]]]],
            "second": 2,
            "fourth": 4,
            "third": 3
        }
    ]
}
>>> print collapse_json(text, indent=16)
{
    "zero": [
        "first", 
        {
            "items": [
                [1, 2, 3, 4],
                [5, 6, 7, 8],
                9,
                10,
                [11, [12, [13, [14, 15]]]]
            ], 
            "second": 2, 
            "fourth": 4, 
            "third": 3
        }
    ]
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-08-31T23:43:41.980

附带说明一下，这个网站有一个内置的 JavaScript，当行短于 70 个字符时，它将避免 JSON 字符串中的换行：

[http://www.csvjson.com/json_beautifier](http://www.csvjson.com/json_beautifier)

[（使用JSON-js](http://github.com/douglascrockford/JSON-js)的修改版本实现）

选择“内联短数组”

非常适合快速查看复制缓冲区中的数据。

# excel - Scripting.Dictionary 还在 VBA 中常用吗？

> ID：13249417
> 
> 赞同：3
> 
> 时间：2012-11-06T10:50:58.853
> 
> 标签：excel, vba

我不得不在 Excel/VBA 中拼凑一些代码，并且模糊地记得我们曾经添加对 Microsoft Scripting Runtime 的引用以使用 Dictionary。现在在 Office 2010 时代，这仍然是访问类似结构的字典的首选方式还是继续进行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T11:27:59.607

字典在 Excel VBA 中仍然以同样的方式使用——在此处阅读更多内容 [VBA 有字典结构吗？](https://stackoverflow.com/questions/915317/does-vba-have-dictionary-structure)

但是还有字典对象的替代方法`Collections` ，在这里使用更多信息：[在 Excel VBA 中使用字典对象](https://stackoverflow.com/questions/6834141/using-dictionary-object-in-excel-vba)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-12-14T10:22:33.720

意识到！Microsoft 脚本运行时不适用于 Mac。不过有一个解决方法。获取此[https://github.com/VBA-tools/VBA-Dictionary](https://github.com/VBA-tools/VBA-Dictionary) 并将 Dictionary.cls 导入您的 VBA 项目。这将创建一个 Dictionary 类，而不是 Microsoft Scripting Runtime 中的类

# android - android中的图像降噪

> ID：13249418
> 
> 赞同：1
> 
> 时间：2012-11-06T10:51:04.060
> 
> 标签：android, image-processing

我编写了一个相机应用程序，允许用户捕捉纸质账单的图像，发送到服务器进行打印。

问题：当我打印图像时，由于捕获图像中的噪点，背景是黑色的。我想要的只是一个干净的白色背景。我已经尝试过 Bitmap 的压缩方法以不同比例（1-100）以 JPEG/PNG 格式保存图像，但没有多大帮助。我已经看到 camscanner 应用程序非常出色地做到了这一点，但不知道怎么做。

任何实现这一点的指针都会有所帮助。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T11:04:02.290

改变压缩比对这个问题没有任何帮助。强大的过滤器将帮助您减少噪音。试着看看这个[链接](http://www.jhlabs.com/ip/filters/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T23:40:52.190

如果问题是一些随机噪声，您可以使用一些去噪滤波器（即中值滤波器或双边滤波器）。

图像是否已经二值化（转换为严格的黑白像素）？您需要在此之前进行过滤。

编辑（在对深灰色进行澄清后）：由于背景是深灰色，我猜问题只是对比度低，并且由于它将是自然图像，因此对比度的差值会有所不同。我建议为此使用 Sauvola 二值化，它将黑色和深灰色分离为黑色和白色。以下是 Sauvola 的一些细节和示例结果：http: [//www.leptonica.com/binarization.html](http://www.leptonica.com/binarization.html)。要运行一些测试以查看哪种二值化算法最好，您可以在[此处找到一个库](http://liris.cnrs.fr/christian.wolf/software/binarize/index.html)

# java - Java 十进制转二进制 - 大数转二进制

> ID：13249419
> 
> 赞同：0
> 
> 时间：2012-11-06T10:51:06.860
> 
> 标签：java, binary

我的程序应该将十进制数字转换为二进制。对于大数，它给我一个负数而不是二进制数。为什么是这样？

例如，如果我提供`2321`我得到`100100010001`，这很好。但如果我提供 `241242141`我得到`-2127232070093227171`.

我不能使用字符串、数组、函数。还有另一个选项没有将其定义为字符串？输出？

```
import java.util.Scanner;

public class d {

  public static void main(String[] args) {   

    long num = 0;
    long temp = 0L;

    Scanner sc = new Scanner(System.in);
    num = sc.nextLong();

    long place = 1L;
    long output = 0;
    //System.out.print(""+ num%2+ (num%2)%2);
    while(num != 0) {
      temp = num % 2;
      num = num / 2;    

      output += (place*temp);
      place *=10;
    }

    System.out.print(""+output);    
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T11:08:25.620

你的问题在这里

```
 output += (place*temp);
  place *=10; 
```

这会产生一个溢出的数字。

一个简单的替代方法是创建一个字符串，而不是生成一个无论如何您都将转换为字符串的数字。

```
StringBuilder output = new StringBuilder();
while(num != 0) {
  output.append(num & 1);
  num >>>= 1;    
}

System.out.print(output.reverse()); 
```

甚至

```
StringBuilder output = new StringBuilder();
for(long num = sc.netLong(); num != 0; num >>>= 1) 
  output.append(num & 1);

System.out.print(output.reverse()); 
```

* * *

**如果您不想使用除输入或输出之外的任何功能。**

```
long num = 241242141;
int shift = 63;
while (num >>> shift == 0 && shift > 0) shift--;
for (; shift >= 0; shift--)
    System.out.print((num >>> shift) & 1);

// for comparison only
System.out.println("\n"+Long.toBinaryString(num)); 
```

印刷

```
1110011000010001000000011101
1110011000010001000000011101 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T11:20:42.267

使用递归：

```
public class d {
   static void toBinaryString( long number )
   {
      if( number > 1 ) toBinaryString( number / 2L );
      System.out.print( number % 2L );
   }
   public static void main(String[] args) {
      long num = 241242141L;
      System.out.println( Long.toBinaryString( num ));
      toBinaryString( num );
   }
} 
```

输出：

```
1110011000010001000000011101
1110011000010001000000011101 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T11:10:10.957

问题是，您将您的存储`Binary Equivalent`在 a`long type`中，它不能存储这么长的值。

您应该使用 a`StringBuilder`并将您的附加`remainder - temp`在其中。然后反向打印：-

```
 StringBuilder builder = new StringBuilder();
    while(num != 0) {
      temp = num % 2;
      num = num / 2;    

      builder.append(temp);
      output += (place*temp);
      place *=10;
    }

    System.out.println(builder.reverse()); 
```

如果您不需要使用 any `methods`，则只需使用`String Concatenation`, 然后循环以反向打印字符串：-

```
 String builder = "";
    while(num != 0) {
      temp = num % 2;
      num = num / 2;    

      builder += temp;
      output += (place*temp);
      place *=10;
    }

    for (int i = builder.length() - 1; i >= 0; i--) {
        System.out.print(builder.charAt(i));
    } 
```

但是，请注意，这会产生大量的`String objects`on `Heap`。此外，您在这里使用了`charAt`一种您必须使用的方法。

# c++ - 尝试使用 crypto++ 编译我的项目时出现错误 C2711

> ID：13249421
> 
> 赞同：0
> 
> 时间：2012-11-06T10:51:13.097
> 
> 标签：c++, visual-studio-2008, compilation, clr, crypto++

我正在尝试使用crypto++编译一个项目。我的项目正在使用 clr ，当我尝试编译代码时，最终出现以下错误：

```
'main' : this function cannot be compiled as managed, consider using #pragma unmanaged

'int main(cli::array<Type> ^)' : managed type or function cannot be used in an unmanaged function 
```

我的项目正在使用`clr`，我正在`/MD`用作运行时库。我在编译crypto++时设置了相同的参数。

编辑：我的主要功能

```
 int main(array<System::String ^> ^args)
{
    Console::WriteLine(L"Hello World");

    // Generate keys
    AutoSeededRandomPool rng;

    InvertibleRSAFunction params;
    params.GenerateRandomWithKeySize( rng, 1536 );

    RSA::PrivateKey privateKey( params );
    RSA::PublicKey publicKey( params );

    std::string plain="RSA Encryption", cipher, recovered;

    // Encryption
    RSAES_OAEP_SHA_Encryptor e( publicKey );

    StringSource( plain, true,
        new PK_EncryptorFilter( rng, e,
            new StringSink( cipher )
        ) // PK_EncryptorFilter
     ); // StringSource

    // Decryption
    RSAES_OAEP_SHA_Decryptor d( privateKey );

    StringSource( cipher, true,
        new PK_DecryptorFilter( rng, d,
            new StringSink( recovered )
        ) // PK_DecryptorFilter
     ); // StringSource

    assert( plain == recovered );
    std::cin.ignore();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T11:15:37.897

如果您尝试在托管代码中执行任何非托管指令，您将收到此错误。见[这里](http://msdn.microsoft.com/en-us/library/z3sskk32.aspx)。

`assert()`和之`std::string`类的分别是本地方法/类型，这意味着它们处理原始指针并且不遵守托管 C++ 的规则。[通过使用PInvoke/DllImport](http://msdn.microsoft.com/en-us/library/ms235282.aspx)可以实现将此类非托管代码与托管代码混合。

# r - 层次聚类：确定最佳聚类数并统计描述聚类

> ID：13249422
> 
> 赞同：13
> 
> 时间：2012-11-06T10:51:20.753
> 
> 标签：r, data-mining, cluster-analysis

我可以对 R 中的方法使用一些建议来确定最佳集群数量，然后用不同的统计标准描述集群。我是 R 新手，对聚类分析的统计基础有基本的了解。

1.  **确定集群数量的方法：**在文献中，一种常用的方法是所谓的“肘部标准”，它比较不同集群解决方案的平方差之和 (SSD)。因此，SSD 是针对分析中的集群数量绘制的，并且通过识别图中的“弯头”来确定最佳集群数量（例如，此处：[https://en.wikipedia.org/wiki/File:DataClustering_ElbowCriterion。 JPG](https://en.wikipedia.org/wiki/File:DataClustering_ElbowCriterion.JPG) ) 这种方法是获得主观印象的第一种方法。因此我想在 R 中实现它。互联网上关于这方面的信息很少。这里有一个很好的例子：http: [//www.mattpeeples.net/kmeans.html](http://www.mattpeeples.net/kmeans.html)作者还做了一个有趣的迭代方法，以查看在多次重复聚类过程后肘部是否稳定（尽管它用于划分聚类方法而不是分层）。文献中的其他方法包括所谓的“停止规则”。MILLIGAN & COOPER 在他们的论文“An 检查用于确定数据集中集群数量的程序”（可在此处获取：http://link.springer.com/article/10.1007%2FBF02294245）中比较了其中的 30 条停止规则[，](http://link.springer.com/article/10.1007%2FBF02294245)发现Calinski 和 Harabasz 的停止规则在蒙特卡洛评估中提供了最好的结果。在 R 中实现这一点的信息甚至更少。因此，如果有人曾经实施过这个或另一个停止规则（或其他方法），一些建议会非常有帮助。

2.  **统计描述集群**：为了描述集群，我想到了使用均值和某种方差标准。我的数据是关于农业用地的，显示了每个城市不同作物的产量。我的目标是在我的数据集中找到类似的土地利用模式。

我为对象子集制作了一个脚本来进行第一次测试运行。它看起来像这样（脚本中的步骤说明，以下来源）。

```
 #Clusteranalysis agriculture

    #Load data
    agriculture <-read.table ("C:\\Users\\etc...", header=T,sep=";")
    attach(agriculture)

    #Define Dataframe to work with
    df<-data.frame(agriculture)

    #Define a Subset of objects to first test the script
    a<-df[1,]
    b<-df[2,]
    c<-df[3,]
    d<-df[4,]
    e<-df[5,]
    f<-df[6,]
    g<-df[7,]
    h<-df[8,]
    i<-df[9,]
    j<-df[10,]
    k<-df[11,]
    #Bind the objects
    aTOk<-rbind(a,b,c,d,e,f,g,h,i,j,k)

    #Calculate euclidian distances including only the columns 4 to 24
    dist.euklid<-dist(aTOk[,4:24],method="euclidean",diag=TRUE,upper=FALSE, p=2)
    print(dist.euklid)

    #Cluster with Ward
    cluster.ward<-hclust(dist.euklid,method="ward")

    #Plot the dendogramm. define Labels with labels=df$Geocode didn't work
    plot(cluster.ward, hang = -0.01, cex = 0.7)

    #here are missing methods to determine the optimal number of clusters

    #Calculate different solutions with different number of clusters
    n.cluster<-sapply(2:5, function(n.cluster)table(cutree(cluster.ward,n.cluster)))
    n.cluster

    #Show the objects within clusters for the three cluster solution
    three.cluster<-cutree(cluster.ward,3)
    sapply(unique(three.cluster), function(g)aTOk$Geocode[three.cluster==g])

    #Calculate some statistics to describe the clusters
    three.cluster.median<-aggregate(aTOk[,4:24],list(three.cluster),median)
    three.cluster.median
    three.cluster.min<-aggregate(aTOk[,4:24],list(three.cluster),min)
    three.cluster.min
    three.cluster.max<-aggregate(aTOk[,4:24],list(three.cluster),max)
    three.cluster.max
    #Summary statistics for one variable
    three.cluster.summary<-aggregate(aTOk[,4],list(three.cluster),summary)
    three.cluster.summary

    detach(agriculture) 
```

**资料来源**：

*   [http://www.r-tutor.com/gpu-computing/clustering/distance-matrix](http://www.r-tutor.com/gpu-computing/clustering/distance-matrix)
*   [如何使用 R 应用分层或 k 均值聚类分析？](https://stackoverflow.com/questions/5648383/how-to-apply-a-hierarchical-or-k-means-cluster-analysis-using-r/5648425#5648425)
*   [http://statistics.berkeley.edu/classes/s133/Cluster2a.html](http://statistics.berkeley.edu/classes/s133/Cluster2a.html)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-06T20:54:20.387

如您的链接所示，肘部标准适用于**k-means**。此外，聚类均值显然与 k-means 相关，不适用于链接聚类（尤其不适用于单链接，请参阅单链接效应）。

但是，您的问题标题提到了**层次聚类**，您的代码也是如此吗？

请注意，肘部标准不会选择最佳聚类数。它选择最佳数量的**k-means 聚类**。如果您使用不同的聚类方法，则可能需要不同数量的聚类。

没有**客观上最好的聚类这样的东西**。因此，也没有客观上最好的集群数量。k-means 有一个经验法则，它在集群数量和最小化目标函数之间选择（也许是最好的）权衡（因为增加集群的数量*总是*可以改善目标函数）；但这主要是为了应对 k-means 的*不足*。这绝不是客观的。

聚类分析本身并不是一项客观的任务。聚类可能在数学上很好，但没用。聚类可能在数学上得分更差，但它可以让您**深入了解**无法以数学方式衡量的数据。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-12-24T02:37:39.500

这是一个非常晚的答案，可能不再对提问者有用 - 但可能对其他人有用。查看包 NbClust。它包含 26 个索引，可为您提供建议的集群数量（您也可以选择集群类型）。您可以以这样的方式运行它，以便获得所有索引的结果，然后您基本上可以使用大多数索引推荐的集群数量。是的，我认为基本统计数据是描述集群的最佳方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T21:57:11.853

您也可以尝试 R-NN 曲线方法。 [http://rguha.net/writing/pres/rnn.pdf](http://rguha.net/writing/pres/rnn.pdf)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-23T09:16:44.960

K 表示聚类对数据的规模高度敏感，例如对于一个人的年龄和薪水，如果未标准化，K 意味着将薪金视为更重要的聚类变量，而不是年龄，这是您不想要的。因此，在应用聚类算法之前，将数据规模标准化，将它们置于同一水平，然后应用 CA，这始终是一个很好的做法。

# apache - 如何使用 apache 或 nginx 作为节点应用程序的前端？

> ID：13249427
> 
> 赞同：0
> 
> 时间：2012-11-06T10:51:35.730
> 
> 标签：apache, node.js, nginx

我正在尝试开发**Node.js** Web 应用程序，但我的生产环境已经在托管**Apache/2.2.22**。所以我不能让 Node 使用端口 80，我不希望我的用户必须去[http://myapp.com:4000/](http://myapp.com:4000/)。

是否有执行此操作的 apache 模块，也许像 mod_jk 为 Tomcat 执行此操作？

同样的问题也适用于**nginx**。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T10:54:31.763

`mod_proxy`可以做到（对于apache）

```
<VirtualHost nodejs.host.com>
    ProxyRequests Off
    ProxyPreserveHost On

    ProxyPass             /           http://localhost:4000
    ProxyPassReverse      /           http://localhost:4000
</VirtualHost> 
```

将该虚拟主机上的所有内容转发到 Node.js

# asp.net-mvc - ASP.Net MVC - 跨不同控制器保留表单值的推荐方法是什么？

> ID：13249429
> 
> 赞同：3
> 
> 时间：2012-11-06T10:51:41.923
> 
> 标签：asp.net-mvc, forms, controller

假设我有一个 HomeController，它有一个 Index 操作，在 Index.cshtml 视图中我将回发到另一个控制器 (DocumentsController) 中的操作，在操作完成后我重定向回 Home/Index。

维护用户在 Index.cshtml 视图中提交的表单值的推荐/最干净的方法是什么？鉴于它是从另一个控制器重定向的？

编辑：我目前正在使用 RedirectToAction：

`return RedirectToAction("Index", "Home");`

那么使用这种方法如何保留表单值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T11:09:28.620

您可以将数据存储在`TempData`or中`Session`，调用`RedirectToAction`，然后从`TempData`or`Session`再次检索值。

`TempData`很特别。它将内容存储在 Session 中，但是，通过存储的数据`TempData`仅保留用于当前请求和后续请求。之后，数据被丢弃。这听起来很适合您的需求，但如果您需要数据保留更长时间，只需使用 Session。

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
         var someData = TempData["SomeData"] as string; // can be anything, using a string as an example;

         return View(someData);
    }
}

public class DocumentsController : Controller
{
    public ActionResult DoSomething()
    {
        TempData["SomeData"] = "Hello, world!";

        return RedirectToAction("Index", "Home");
    }
} 
```

当您第一次访问时`Home/Index`，`"SomeData"`将丢失（null）。当您访问 时`Documents/DoSomething`，它将设置`"SomeData"`为一个字符串，然后将您重定向到`Home/Index`. 此时，`Index`将看到我们放置的字符串`"SomeData"`，您可以在`Index`视图中使用它。*但是，在*那之后，所有临时数据都将被清除。

因此，例如，如果用户`Index`在重定向后多次刷新，则在刷新期间临时数据将丢失。如果这不可接受，则不要使用 TempData，而是将其保留在 Session 中。

# android - 以 API 1 友好的方式重新定位视图

> ID：13249434
> 
> 赞同：0
> 
> 时间：2012-11-06T10:52:06.540
> 
> 标签：android

下面的代码需要 API 11 - 我将如何编写它来支持 API 级别 1？我只想重新定位一个视图。

```
ImageView imageviewLogo = (ImageView)findViewById(R.id.imageViewLogo);
imageviewLogo.setY(imageviewLogo.getHeight()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T11:12:28.173

您需要更新边距并使用它来重新定位视图。这是取自这里的一个很好的[例子](https://stackoverflow.com/a/3416242/969325)：

```
LinearLayout.LayoutParams lp = new LinearLayout.LayoutParams(LinearLayout.LayoutParams.WRAP_CONTENT, LinearLayout.LayoutParams.WRAP_CONTENT);
lp.setMargins(left, top, right, bottom);
imageView.setLayoutParams(lp); 
```

并且可能在边距更新后使布局无效。

# c# - 实体框架代码第一个复合键上的一对一关系

> ID：13249438
> 
> 赞同：3
> 
> 时间：2012-11-06T10:52:24.990
> 
> 标签：c#, .net, entity-framework-4, composite-key

基本上我想要实现的是我有三个表，一个父级将始终在其中有一个条目，并且只会填充另外两个表中的一个。我正在处理的复杂性是表的主键是两个字段的组合

```
ParentTable
-----------
UniqueID
OwnerID
[Some more fields]

ChildTable1
-----------
UniqueID
OwnerID
[Some more fields]

ChildTable2
-----------
UniqueID
OwnerID
[Some more fields] 
```

我想知道是否有人对如何通过 EF Code First 最好使用 Fluent API 最好地做到这一点有任何建议。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-06T15:49:36.980

您只需要定义主键是复合...

```
modelBuilder.Entity<Parent>().HasKey(p => new { p.UniqueID, p.OwnerID });
modelBuilder.Entity<Child1>().HasKey(c => new { c.UniqueID, c.OwnerID });
modelBuilder.Entity<Child2>().HasKey(c => new { c.UniqueID, c.OwnerID }); 
```

...然后定义两个一对一的关系：

```
modelBuilder.Entity<Parent>()
    .HasOptional(p => p.Child1)
    .WithRequired(); // or .WithRequired(c => c.Parent)

modelBuilder.Entity<Parent>()
    .HasOptional(p => p.Child2)
    .WithRequired(); // or .WithRequired(c => c.Parent) 
```

但是，您不能定义约束（可能通过在数据库中定义触发器除外）以确保给定的父级只能引用两个子级之一，但不能同时引用这两个子级。您必须在应用程序的业务逻辑中处理此限制。

# android - 需要有关如何使用 Google Maps API 的帮助

> ID：13249441
> 
> 赞同：0
> 
> 时间：2012-11-06T10:52:37.600
> 
> 标签：android

有些人有关于 Google Maps API 的文档和课程可以分享给我，因为我为我的最后一次考试准备了关于 Google Maps API 的项目。我知道我可以在 developer.android.com 上找到有关 google maps api 的指南，但我不明白

有人有文档，有关 Google Maps API 的课程可以分享给我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T11:01:01.063

以下链接可能对您有所帮助：

[https://developers.google.com/maps/documentation/android/](https://developers.google.com/maps/documentation/android/)

[https://developers.google.com/maps/documentation/android/hello-mapview](https://developers.google.com/maps/documentation/android/hello-mapview)

[http://mobiforge.com/developing/story/using-google-maps-android](http://mobiforge.com/developing/story/using-google-maps-android)

[http://www.javacodegeeks.com/2011/02/android-google-maps-tutorial.html](http://www.javacodegeeks.com/2011/02/android-google-maps-tutorial.html)

[http://www.guidingtech.com/11106/use-offline-google-maps-android/](http://www.guidingtech.com/11106/use-offline-google-maps-android/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T11:03:07.323

首先在你的系统中找出你的 debug.keystore

你会在这里找到它

```
Windows Vista: C:\Users\<user>\.android\debug.keystore
Windows XP: C:\Documents and Settings\<user>\.android\debug.keystore
OS X and Linux: ~/.android/debug.keystore 
```

然后

在命令行中触发此命令

```
$ keytool -list -alias androiddebugkey \
-keystore <path_to_debug_keystore>.keystore \
-storepass android -keypass android 
```

您将获得 md5 密钥作为输出

你需要点击这个

```
https://developers.google.com/android/maps-api-signup 
```

按照这个步骤

```
If you don't have a Google account, use the link on the page to set one up.
Read the Android Maps API Terms of Service carefully. If you agree to the terms, indicate so using the checkbox on the screen.
Paste the MD5 certificate fingerprint of the certificate that you are registering into the appropriate form field.
Click "Generate API Key" 
```

将您生成的密钥添加到您的代码中

```
<com.google.android.maps.MapView
 android:layout_width="fill_parent"
 android:layout_height="fill_parent"
 android:enabled="true"
 android:clickable="true"
 android:apiKey="example_Maps_ApiKey_String"
 /> 
```

也添加这个

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
 package="com.example.package.name">
 ...
 <application android:name="MyApplication" >
   <uses-library android:name="com.google.android.maps" />
 ...
 </application> 
```

而已

# sitecore - Sitecore 6.4：用户配置文件启动 URL 和 Workbox

> ID：13249443
> 
> 赞同：1
> 
> 时间：2012-11-06T10:52:44.117
> 
> 标签：sitecore, sitecore6

我需要在登录到 sitecore 管理界面时向用户展示 Workbox。我已经确定这可以通过将用户配置文件启动 URL 设置为 /sitecore/shell/applications/workbox.aspx 来完成。这有效 - 当用户登录时，他们会获得工作框，但顶部菜单中缺少注销链接（当您通过内容编辑器访问工作框时会出现该链接 - 但如果您通过菜单项访问它，我不会注意到） .

有没有办法让这个注销按钮回来，或者添加一个自定义按钮？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T12:25:55.600

我已经在 Sitecore 6.6 中检查过，默认情况下工作框中也没有注销按钮。

解决这个问题很容易。登录到 Sitecore 桌面，切换到“核心”数据库，打开内容编辑器并导航到节点：

```
/sitecore/content/Applications/Workbox/Ribbon/Home/Write/Logoff 
```

有一个值为“workbox:logout”的“Click”字段。只需将值更改为“系统：注销”，注销按钮就会出现。

# java - java中在单独的线程中运行许多方法并等待所有方法完成的最简单方法是什么？

> ID：13249451
> 
> 赞同：2
> 
> 时间：2012-11-06T10:53:06.440
> 
> 标签：java, multithreading, function

**我想要一个在不同线程**中运行 2 个或更多方法的方法。我想确保在所有线程完成之前该方法不会完成。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T10:58:34.237

最好的方法是利用 Executor Service API 来管理线程池，而不是自己启动无限数量的线程。

```
ExecutorService pool = Executors.newCachedThreadPool();
for (Runnable r : new Runnable[] {
    new R() { void r() { myMethod1(); }},
    new R() { void r() { myMethod2(); }},
})
  pool.execute(r);
pool.shutdown();
pool.awaitTermination(60, TimeUnit.SECONDS); 
```

* * *

```
abstract class R implements Runnable
  public final void run() { r(); }
  abstract void r();
} 
```

* * *

请注意，坚持每个方法都在其自己的单独线程中运行是不可取的。线程是相当重量级的（每个都分配一个完整的调用堆栈），随着线程数的增加远远超过可用处理器内核的数量，性能实际上会降低。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T10:53:06.440

我的解决方案是

**功能：**

```
public void runParallel(Runnable... runnables) throws InterruptedException {

List<Thread> threads = new ArrayList<Thread>(runnables.length);

for (Runnable runnable :runnables) {
    Thread th = new Thread(runnable);
    threads.add(th);
    th.start();
}

for (Thread th : threads) {
    th.join();
} 
```

**采用：**

```
runParallel(new Runnable() {
                @Override
                public void run() {
                    method1()
                }
            }, new Runnable() {
                @Override
                public void run() {
                    method2()
                }
            }
); 
```

有更好的主意吗？也许有一种我不知道的更短的方法；）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-06T11:00:01.100

我更喜欢这样的东西：

```
public static void runParallel(Runnable... runnables) throws InterruptedException {
    final CountDownLatch done = new CountDownLatch(runnables.length);
    for (final Runnable r: runnables) {
        new Thread(new Runnable() {
             public void run() {
                 try {
                     r.run();
                 } finally {
                     done.countDown();
                 }
             }
        }).start();
    }
   done.await();
} 
```

这种方法的一个优点是它也适用于线程池（即您可以替换`new Thread(...).start()`为`executor.submit(...)`）。

它还允许您使用预先存在的线程池，这与基于`awaitTermination()`强制您为每次调用创建新池的解决方案不同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T11:00:05.453

遵循*damienix*给出的 API ：

```
public void runParallel(Runnable... runnables) throws InterruptedException {
    final ExecutorService pool = Executors.newFixedThreadPool(runnables.length);
    for (Runnable runnable: runnables) {
        pool.submit(runnable);
    }
    pool.shutdown();
    pool.awaitTermination(1, TimeUnit.MINUTES);
} 
```

# excel - 运行时错误 - 类型不匹配

> ID：13249460
> 
> 赞同：-1
> 
> 时间：2012-11-06T10:53:52.600
> 
> 标签：excel, vba

我有一个宏，可以将特定的值添加到特定的字符串。但是我目前遇到运行时错误，我不知道为什么？

```
Case "L"

    If UCase(Left(Dn, 3)) = "L/M" Then
        Dn.Offset(, 1) = Val(Mid(Dn, 4, 2)) + 35

    ElseIf UCase(Left(Dn, 2)) = "LM" Then
        'Dn.Offset(, 1) = Val(Mid(Dn, 3, 3)) + 3.5
        If IsNumeric(Mid(Dn, 3, 1)) And IsNumeric(Mid(Dn, 4, 1)) Then
            If Mid(Dn, 4, 1) = "0" Then
                Dn.Offset(, 1) = Mid(Dn, 3, 2) + 3.5
            Else
                Dn.Offset(, 1) = Mid(Dn, 3, 2) + 0.35
            End If
        End If

        If IsNumeric(Mid(Dn, 4, 1)) And IsNumeric(Mid(Dn, 5, 1)) Then
            If Mid(Dn, 5, 1) = "0" Then
                Dn.Offset(, 1) = Mid(Dn, 3, 3) + 35
            Else
                Dn.Offset(, 1) = Mid(Dn, 3, 3) + 0.35
            End If
        End If

    ElseIf UCase(Left(Dn, 3)) = "LOW" Then
        Dn.Offset(, 1) = Val(Mid(Dn, 4, 2)) + 20
    ElseIf UCase(Left(Dn, 3)) = "LO-" Then
        Dn.Offset(, 1) = Val(Mid(Dn, 4, 2)) + 20
    ElseIf UCase(Left(Dn, 6)) = "LO MID" Then
        Dn.Offset(, 1) = Val(Mid(Dn, 7, 3)) + 35
    ElseIf UCase(Left(Dn, 2)) = "L+" Then
        Dn.Offset(, 1) = Num
    ElseIf UCase(Left(Dn, 3)) = "LO " Then
        Dn.Offset(, 1) = Val(Mid(Dn, 4, 2)) + 20

        'ElseIf UCase(Left(Dn, 1)) = "L" Then
        'Dn.Offset(, 1) = Val(Mid(Dn, 2, 3)) + 2
        'ElseIf IsNumeric(Mid(Dn, 2, 1)) Then
        'Dn.Offset(, 1) = IIf(IsNumeric(Mid(Dn, 2, 1) + Mid(Dn, 3, 1)), Val(Mid(Dn, 2, 3)) + 2, Val(Mid(Dn, 2, 1)) + 0.2)

    ElseIf IsNumeric(Mid(Dn, 2, 1)) And IsNumeric(Mid(Dn, 3, 1)) Then
        If Mid(Dn, 3, 1) = "0" Then
            Dn.Offset(, 1) = Mid(Dn, 2, 2) + 2
        Else
            Dn.Offset(, 1) = Mid(Dn, 2, 2) + 0.2
        End If
    Else
        Dn.Offset(, 1) = Val(Mid(Dn, 2, 3)) + 20
    End If
    If IsNumeric(Mid(Dn, 3, 1)) And IsNumeric(Mid(Dn, 4, 1)) Then
        If Mid(Dn, 4, 1) = "0" Then
            Dn.Offset(, 1) = Mid(Dn, 2, 3) + 20
        Else
            Dn.Offset(, 1) = Mid(Dn, 2, 3) + 0.2
        End If

    End If 
```

输入数据

```
*vh105 --> 105.9
*h107 --> 107.8
*l107 --> 107.2
*lm106 --> 106.35
*lm106  
*l107   
*44 
```

对此问题的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T11:59:56.990

隔离`Val(Mid(Dn,4,2))`甚至 ，`Mid(Dn,4,2)`因为我认为 Val 没有从`Mid`函数中获得正确的数字字符串来使用

在第 2 行和第 3 行之间使用它：

> `Debug.Print Mid(Dn,4,2)
> Debug.Print Val(Mid(Dn,4,2))`

让我们知道您在即时窗口中得到了什么（如果不存在，请转到查看 > 即时窗口）

# c# - Fluent NHibernate 一对一映射插入问题

> ID：13249462
> 
> 赞同：1
> 
> 时间：2012-11-06T10:53:58.263
> 
> 标签：c#, nhibernate, fluent-nhibernate, foreign-key-relationship

在基于波纹管映射检索值时，一对一映射可以正常工作。但是在插入值时

> 无法解析属性：MasterData

被抛出。

下表列出

> MasterDataTable [MasterDataID (PK), 名称]
> 
> OtherDataTable [MasterDataID (PK)(FK), OtherName]

流利的 NHibernare 课程是

```
Public class MasterData{
public virtual long MasterDataID {get;set;}
public virtual string Name {get;set;}
public virtual OtherData OtherDataProp {get;set;}
}

public class OtherData{
public virtual long MasterDataID {get;set;}
public virtual string OtherName {get;set;}
}

public class MasterDataMap: ClassMap<MasterData>{
 public MasterDataMap(){
 //table declaration

   Id(x => x.MasterDataID).Column("MasterDataID").GeneratedBy.gui.Sequence("MASTER_DATA_SEQ");
 Map(x => x.Name).Column("Name");
}
}

public class OtherDataMap: ClassMap<OtherData>{
 public OtherDataMap(){
 //table declaration

   Id(x => x.MasterDataID, "MASTER_DATA_ID").GeneratedBy.Foreign("MasterData")
 Map(x => x.Name).Column("OtherName");
}
} 
```

请让我知道解决此问题还需要哪些其他信息。我能够检索值，但是当我插入值时我不能。

问候， 戴斯蒙德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T11:22:37.527

在您的情况下，将存在一对一的映射（`MasterData`唯一 ID 可能只有一个实例，也可能只有一个`OtherData`）。在这种情况下，*从属*实体`OtherData`还必须引用其*主控* `MasterData`

```
public class OtherData
{
  public virtual long MasterDataID {get;set;}
  public virtual string OtherName {get;set;}
  public virtual MasterData MasterData {get;set;}
} 
```

然后我们可以按照这个链接正确地一对一映射： [https ://github.com/jagregory/fluent-nhibernate/wiki/Fluent-mapping](https://github.com/jagregory/fluent-nhibernate/wiki/Fluent-mapping)

### 主要的数据

```
public MasterDataMap()
{
   Id(x => x.MasterDataID).Column("MasterDataID")
     .GeneratedBy.gui.Sequence("MASTER_DATA_SEQ");
   Map(x => x.Name).Column("Name");
   HasOne(x => x.OtherData);
} 
```

### 其他数据

```
public OtherDataMap()
{
   Id(x => x.MasterDataID, "MasterDataID")
      .GeneratedBy.Foreign("MasterData")
   Map(x => x.OtherName).Column("OtherName"); // change from x.Name
   HasOne(x => x.MasterData);
} 
```

我们想要实现的是在 XML 中得到它

### 主要的数据

```
 <class name="MasterData" ...>
  ...
  <one-to-one cascade="delete-orphan" lazy="proxy" name="OtherData />
  ..
 </class> 
```

### 其他数据

```
<class name="OtherData" ...>    
  <id name="MasterDataID" column="MasterDataId">
    <generator class="foreign">
      <param name="property">MasterData</param>
    </generator>
  </id>
  <one-to-one name="MasterData" constrained="true" />
  ...
</class> 
```

# c# - 在 PowerPoint 中以编程方式添加幻灯片时，滑块上出现灰框错误

> ID：13249464
> 
> 赞同：2
> 
> 时间：2012-11-06T10:54:02.233
> 
> 标签：c#, powerpoint

我正在通过 C# 替换 PowerPoint 演示文稿中的幻灯片。我的方法是实例化现有幻灯片的一个对象，然后Slide.delete()。然后我从另一个 PowerPoint 文件中插入 InsertFromFile()。

这很好用，但我添加的幻灯片的幻灯片预览框显示为灰色（而不是提供预览！）。当我单击演示文稿或滑动条中的任意位置时，这会快速更改为正确的预览；不幸的是，它不能通过以编程方式选择幻灯片来解决。

有什么建议么？

# c++ - 在线程上的 2D 向量上 push_back 是否安全？

> ID：13249472
> 
> 赞同：1
> 
> 时间：2012-11-06T10:54:27.543
> 
> 标签：c++, multithreading, boost, vector

假设我有一个二维数组和这个函数：

```
void addVec(std::vector<std::vector<short> >& arr, size_t idx){ 
   arr[idx].push_back(idx);
}

std::vector<std::vector<short> > arr(2);
boost::threads th1(addVec, boost::ref(arr), 0);
boost::threads th2(addVec, booost::ref(arr), 1);
th1.join();
th2.join(); 
```

现在我应该有 arr[0][0] = 0; 和 arr[1][0] = 1; 问题是这是否安全？在内部，线程应该将值添加到向量内存的不同部分，并且因为它是在大小为 2 的开头构造的，所以只有内部向量会调整大小，因此具有线程独占访问权限。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T11:01:05.300

这应该是安全的，因为每个线程都访问一个单独的向量。但是，如果您做了任何可能导致`arr`调整大小的事情，那么所有的赌注都没有了......

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-06T12:00:31.777

我建议您退后一步，考虑一下您的目标是什么，然后再继续前进。

首先，你为什么要并行化你的代码？我假设您希望您的程序运行得更快。这意味着

1.  您应该从编写一个有效的顺序实现开始。
2.  您应该分析和调整该实现。
3.  如果（且仅当）您的程序对于您的目的来说仍然太慢，您应该在以下情况下并行化它：
    1.  程序的很大一部分可以并行化（查看[Amdahl 定律](http://en.wikipedia.org/wiki/Amdahl%27s_law)）。
    2.  您的顺序实现很好地利用了[缓存](http://en.wikipedia.org/wiki/CPU_cache)。即使对于顺序代码，缓存也很可能成为瓶颈，因此如果您的代码缓存效率不高，那么并行化它时它可能会变慢。

第 1 点和第 2 点可能是您应该花时间的地方。奇怪的是，高度调整的顺序实现足以满足您的需求，并且开发和维护它会*更*便宜/更容易/更快。

如果你决定并行化你的代码，你应该看看[OpenMP](http://en.wikipedia.org/wiki/OpenMP)。线程可能是编写人类已知的并行程序的最糟糕的方法之一。您可能认为 OpenMP 的运行时系统对您来说太慢了，但同样，您应该退后一步想想原因。

如果您的算法需要大量锁和屏障，则可以通过使用更快的锁和屏障来获得较小的加速。如果你改进你的算法以使用更少的锁和障碍，你可以实现更大的加速。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-06T11:00:02.193

这是安全的，尽管从设计的角度来看，给每个线程只提供其内部向量会更安全，因此未来发生不安全行为的可能性较小

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-06T11:00:15.377

是的，它在您的用例中是安全的，因为您不会修改共享数据。但是，我更愿意将引用传递`std::vector<short>`给每个线程以简化使用：

```
void addVec(std::vector<short> & arr)
{ 
   arr.push_back(some_data);
}

std::vector<std::vector<short> > arr(2);
boost::threads th1(addVec, boost::ref(arr[0]));
boost::threads th2(addVec, booost::ref(arr[1]));
th1.join();
th2.join(); 
```

# android - 在 Android 上使用 google http 客户端进行 HttpDigest 身份验证

> ID：13249474
> 
> 赞同：1
> 
> 时间：2012-11-06T10:54:34.750
> 
> 标签：android, google-api-java-client

无论如何我可以在Android上使用Google Http Java Client实现Http Digest Authentication，该请求似乎没有任何可以指定身份验证的公开方法。

谢谢。

阿克谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T20:05:33.683

这里有一个功能请求：[http ://code.google.com/p/google-http-java-client/issues/detail?id=163](http://code.google.com/p/google-http-java-client/issues/detail?id=163)

您可以通过调用 HttpRequest.getHeaders().setAuthorization(String) 手动实现这一点，但您需要实现计算“授权”标头的逻辑。如果有人可以提供 Java 逻辑来计算 HTTP Digest 的“授权”标头，请在此处发布，我们可以将其标记为更好的答案:)

# ios - IOS：在视图控制器中禁用手势

> ID：13249478
> 
> 赞同：3
> 
> 时间：2012-11-06T10:54:46.760
> 
> 标签：ios, xcode, uiviewcontroller, uigesturerecognizer

在我的应用程序中，我遇到了这种情况：我有我的主视图控制器，我在其中分配了一个“flipwiecontroller”并以这种方式添加它的视图

```
self.flipViewController.view.frame = CGRectMake (...);
[self.view addSubview:self.flipViewController.view]; 
```

在这个 FlipViewController 上我添加了一些手势（作为我在它上面使用的一些控件的 pangesture、swipegesture 和 tapgesture）

当我在这个视图中按下一个按钮时，我以这种方式分配另一个视图控制器“paintingviewcontroller”

```
[self.view addSubview:paintingViewController.view]; 
```

在第二个视图控制器中，我有一些按钮和另一个功能，但是当我尝试进行滑动手势或点击手势时，它会识别我的“flipviewcontroller”事件

我不明白，如果我在另一个视图控制器上添加一个视图控制器，为什么翻转视图控制器的手势仍然处于活动状态？

感恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T11:02:02.547

也许你在paintingViewController上禁用了userIntercation，然后，它的事件被发送到他的superview。您也可以使用`[UIView removeGestureRecognizer:UIGestureRecognizer]`删除手势。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T11:05:27.473

你是如何添加手势识别器的？它们应该被添加到视图中，而不是窗口中。也许这就是问题所在。

如果你有这样的事情：

```
[self.view.window addGestureRecognizer:panGestureRecognizer]; 
```

你应该把它改成这样：

```
[self.view addGestureRecognizer:panGestureRecognizer]; 
```

# python - 从模块中动态导入多个名称

> ID：13249481
> 
> 赞同：3
> 
> 时间：2012-11-06T10:54:54.997
> 
> 标签：python

我正在尝试将一些符号从一个包导入另一个包。我尝试了以下方法，但没有运气，因为两者都是语法错误。

```
from signal import SIG* 
```

或者

```
import _signal
import _re
from signal import [i for i in dir(_signal) if _re.search("^SIG",i)!=None ] 
```

有没有办法做到这一点。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-06T10:59:58.853

使用[`importlib`](http://docs.python.org/2/library/importlib.html)：

```
import importlib

mod = importlib.import_module('signal')
loc = locals()
for name in dir(mod):
    if name.startswith('SIG'):
        loc[name] = getattr(mod, name)
del mod, loc, importlib 
```

# ruby-on-rails - iframe 内容的 Rspec 测试

> ID：13249483
> 
> 赞同：6
> 
> 时间：2012-11-06T10:54:58.610
> 
> 标签：ruby-on-rails, rspec, ruby-on-rails-3.2, capybara

如何为 iframe 内容编写 rspec 测试？我的 iframe 看起来像

```
<iframe src="/any url" name="Original">
   ...
   <div>test </div>
</iframe> 
```

在 iframe 无论内容之间，我想为该内容编写 rspec 测试用例。我能怎么做 ？

我如何使用 rspec 检查 iframe 中的“测试”？我在下面写但没有通过

```
page.should have_content("test") 
```

**错误如**

```
Failure/Error: page.should have_content("test")
       expected there to be content "test" in "Customize .... 
```

我使用 capybara - 1.1.2 和 rspec - 2.11.0 和 rails 3.2.8

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-06T12:11:18.373

以下一个适用于 selenium 驱动程序，也可能适用于其他驱动程序，但不适用于 rack_test。

/index.html：

```
<!DOCTYPE html>
<html>
  <body>
    <h1>Header</h1>
    <iframe src="/iframer" id='ident' name='pretty_name'></iframe>
  </body>
</html> 
```

/iframer.html：

```
<!DOCTYPE html>
<html>
  <body>
    <h3>Inner Header</h3>
  </body>
</html> 
```

规格：

```
visit "/"
page.should have_selector 'h1'
page.should have_selector 'iframe'

page.within_frame 'ident' do
  page.should have_selector 'h3'
  page.should have_no_selector 'h1'
end

page.within_frame 'pretty_name' do
  page.should have_selector 'h3'
  page.should have_no_selector 'h1'
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-10-15T17:08:47.057

就我而言，我需要检查一个没有名称或 ID 的 iframe。例如

**html**

```
<iframe class="body" src='messages/1.html'>...</iframe> 
```

**rspec**

```
expect(page).to have_content "From email@test.html"

within_frame '.body' do
  expect(page).have_content 'You can confirm your account email through the link below:'
end 
```

所以我无法以任何方式找到 iframe，直到我在水豚内脏中找到了这个例子。[水豚源代码](https://github.com/jnicklas/capybara/blob/4b431c0b4e56e1886bda5aef893583b7b4223526/lib/capybara/spec/session/within_frame_spec.rb#L38)

有了这个我得到了这个解决方案：

```
expect(page).to have_content "From email@test.html"

within_frame find('iframe.body') do
  expect(page).have_content 'You can confirm your account email through the link below:'
end 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-03-16T17:45:13.910

**上面的答案很棒，尽管我仍然想用以下内容扩展它们：**

如果您只想断言页面中存在某些文本并想自动检查任何现有 iframe 内部，那么我执行了以下通用代码来完成此操作：

```
Then (/^I should see the text "(.*?)" in less than "(.*?)" seconds$/) do |text,time|
    result = false
    Capybara.default_wait_time = 5
    time_start = Time.now
    begin
        time_running = Time.now - time_start #Calculate how much time have been checking
        result = page.has_text?(text)
        unless result #If not found in normal DOM, look inside iframes
            if page.has_css?("iframe") #Check inside iframes if present
                (page.all(:css,"iframe")).each do |element| #If multiple iframes found, check on each of them
                    within_frame(element) do 
                        result = page.has_text?(text)
                        break if result #Stop searching if text is found
                    end
                end
            end
        end
    end until (time_running.to_i >= time.to_i) || (result == true)
    expect(result).to be true
end 
```

请注意，它会一直检查页面，直到启动的计时器达到给定的秒数，或者直到在页面或 iframe 中找到给定的文本。我相信代码非常清晰易懂，但如果您有任何问题，请告诉我。

# forms - symfony2：在表单外设置表单字段的值，在控制器操作内

> ID：13249485
> 
> 赞同：10
> 
> 时间：2012-11-06T10:55:04.093
> 
> 标签：forms, symfony, doctrine-orm, symfony-forms, image-upload

我需要设置 symfony2 表单元素的值。我在 Controllers Action 中使用了一个 dictionary2 实体、一个**Symfony\Component\Form\AbstractType**和 createForm() 方法。

```
$saleDataForm = $this->createForm(new SaleType(), $sale); 
```

现在，我如何从该表单中获取元素，以及如何设置它的值？我想做这样的事情，但它不起作用：

```
$saleDataForm->get('image')->setValue('someimapge.jpg'); 
```

仅供参考：我需要这样做才能正确呈现该字段（使用[这种方法](http://symfony.com/doc/current/cookbook/doctrine/file_uploads.html)，我的*图像*字段始终为空，我需要将其设置为*imagePath*的内容以呈现上传图像的预览）

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-06T11:56:33.133

**要获得更准确的答案，您应该在此表单中包含您使用的实体，以便我们可以看到 getter 和 setter。但是根据您的问题，这应该可行：** 在控制器内部执行以下操作：

```
$saleDataForm->getData()->getImage()->setValue('someimage.jpg');
$form->setData($form->getData()); 
```

这是如果表单已经创建，那么：

```
$saleDataForm = $this->createForm(new SaleType(), $sale);
$saleDataForm->getData()->getImage()->setValue('someimage.jpg');
$form->setData($form->getData()); 
```

要获取数据，请使用以下命令：

```
$saleDataForm->getData()->getImage()->getValue(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-01-10T08:59:04.150

感谢 MatsRietdijk，你帮助了我，但我不得不将代码更改为此

```
$form = $this->createForm(new SaleType(), $sale);
$form->getData()->setImage('someimage.jpg');
$form->setData($form->getData()); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-06T12:09:49.893

如果您尝试填写文件上传字段 - 这是错误的想法。问问自己：应该有哪些数据？如果用户上传图像，则此字段中将是其本地系统上图像的路径。但是在上传文件后，您会更改其名称和位置，因此您不需要有关此路径的信息，并且您只是不保留它。

适当的方式应该在图像下方（或上方，或任何你拥有它的地方）留空上传字段。然后在提交表单后，如果该字段不为空，您应该更改已编辑的图像。

# sql - 选择语句以针对 2 个变量检查 多行

> ID：13249492
> 
> 赞同：2
> 
> 时间：2012-11-06T10:55:52.010
> 
> 标签：sql, select, asp-classic

我有下表：

```
alertID inspectorID datelive                dateread
1       none       2012-11-06 10:36:03.350  NULL
2       none       2012-11-06 10:36:25.043  NULL
3       none       2012-11-06 10:36:42.433  NULL
1       31030      2012-11-06 10:37:19.193  2012-06-11 10:34:47.000 
```

我想选择没有针对它的检查员 ID 的警报，并且警报 ID 与具有针对它的检查员 ID 的警报 ID 不匹配，即检查员已读取警报 1，所以我只希望它返回警报 2 和 3

我正在使用经典 ASP 和 MS-SQL

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T11:02:53.293

尝试这个

```
Select * From Alerts
Where AlertId Not In (Select AlertID From Alerts Where InspectorID IS NOT NULL) 
```

这个想法是知道哪些 ID 对他们有 InspectorID，然后将它们从结果中排除`NOT IN`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T11:03:53.440

```
SELECT *
FROM alertsTable
WHERE inspectorID IS NULL
AND alertID NOT IN (SELECT alertID FROM alertsTable where inspectorID IS NOT NULL) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T11:05:47.617

```
Select * From Table
Where alertID Not In 
(Select alertID From Table Where inspectorID != 'none') 
```

# sql - 列中的 SQL XML 查询

> ID：13249503
> 
> 赞同：1
> 
> 时间：2012-11-06T10:56:25.263
> 
> 标签：sql, sql-server, xml

如何从 SQL Server 列中的这种 XML 中选择文件名？

1.  `VALUE`仅当高级标记是具有`File` 这样名称的对象时，文件名才在属性中

    ```
    <Object NAME="File">
        <Parameter ID="1" NAME="Name" VALUE="\\mysvr\fiels\readme1.txt" />
    </Object> 
    ```

2.  此子层次结构可以放置在任何级别的 xml 上（参见下面的示例）

3.  XML 列可以包含 0-N 个文件名，我需要这样的列表：

    ```
    id, filename
    --- ------------------------
     1  \\mysvr\fiels\readme1.txt
     1  \\mysvr\fiels\readme2.txt
     2  \\mysvr\fiels\readme3.txt
     2  \\mysvr\fiels\readme4.txt 
    ```

XML 内容示例：

```
declare @t1 table
(   id int,
   x XML
)

insert into @t1 (id, x)
select 1,N'<root name="name" id="12">
<class1>
  <Object NAME="File">
              <Parameter ID="1" NAME="Name" VALUE="\\mysvr\fiels\readme1.txt" />
   </Object>
</class1>
<class1>
<subclass1>
<Object NAME="File">
              <Parameter ID="10" NAME="Name" VALUE="\\mysvr\fiels\readme2.txt" />
</Object>
<Object NAME="bitmap">
              <Parameter ID="11" NAME="my1" VALUE="bmp" />
</Object>
</subclass1>
</class1>
</root>'
union 
select 2,N'<root name="name" id="12">
<class1>
  <Object NAME="File">
              <Parameter ID="13" NAME="Name" VALUE="\\mysvr\fiels\readme3.txt" />
  </Object>
  <Object NAME="Font">
              <Parameter ID="22" NAME="Tahoma" VALUE="11" />
  </Object>
</class1>
<class1>
<subclass1>
  <Object NAME="File">
              <Parameter ID="14" NAME="Name" VALUE="\\mysvr\fiels\readme4.txt" />
  </Object>
</subclass1>
</class1>
</root>' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T12:15:52.830

试试这个：

```
SELECT
    id,
    Filename = ObjPrm.value('@VALUE', 'varchar(100)')
FROM @t1
CROSS APPLY x.nodes('//Object[@NAME="File"]/Parameter') AS Tbl(ObjPrm) 
```

给我一个输出：

![在此处输入图像描述](../Images/e65db176eba9ae198a35c6b513333227.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T11:07:37.383

为此，您可以执行以下操作。

定义要显示的特定详细信息的字符串。

您想显示 id 和 Name 以便您的字符串看起来像这样。

```
String holder = "#id# -- #VALUE#" 
```

然后在整个字符串中搜索两个“#”符号之间的值。

当您找到它们时，只需搜索引号内的值并显示它们。

# git - 第二次合并没有冲突

> ID：13249504
> 
> 赞同：0
> 
> 时间：2012-11-06T10:56:28.010
> 
> 标签：git, git-merge

我是 git 的新手。我检查了一个带有“myfile.txt”的文件，内容为

```
first commit in master. 
```

提交 master 分支的更改`git commit -a -m "first commit"`

在第二步中，我从 master 分支创建了一个`mysecondbranch`分支。并添加第二行。

```
first commit in master.
**second commit in mysecondbranch.** 
```

再次提交更改`mysecondbranch`

现在切换回`master`分支。并将新内容添加为

```
frst commit in master.
**second commit in newbranch.** 
```

并将更改提交到 master 分支。

接下来我想使用以下命令合并 mysecondbranch 中的更改

```
git merge mysecondbranch 
```

这次不出所料，合并时发生冲突..

问题从这里开始我放弃使用合并的更改

```
git reset HEAD myfile 
```

再次尝试合并但我很惊讶这次没有冲突并且没有结果 `git diff`

我收到错误消息 **`fatal: commit your changes before you can merge.`**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T11:12:41.760

当你发出

```
git reset HEAD myfile 
```

您不会丢弃合并的更改。做一个

```
git status 
```

重置后，您会看到您有未暂存的更改。如果您想真正放弃合并中的更改，请执行

```
git reset --hard HEAD 
```

调用合并后。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T11:15:01.157

利用

```
git reset --hard master 
```

代替

```
git reset HEAD myfile 
```

放弃更改

# c# - 显示自动隐藏窗口任务栏

> ID：13249511
> 
> 赞同：0
> 
> 时间：2012-11-06T10:56:55.800
> 
> 标签：c#, .net, taskbar

我已将 Windows 任务栏定义为自动隐藏。现在我正在展示一种从 C# 代码显示任务栏的方法。有人可以通过一些代码剪辑来帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T11:05:40.687

AppBar 中的任务栏。可以使用[SHAppBarMessage](http://msdn.microsoft.com/en-us/library/bb762108%28VS.85%29.aspx) API 进行控制。

这是一篇关于 AppBar 的单独文章，可以帮助您更好地了解如何使用 API： http: [//www.codeproject.com/Articles/3728/C-does-Shell-Part-3](http://www.codeproject.com/Articles/3728/C-does-Shell-Part-3)

**编辑：** 如果您需要查找任务栏本身的句柄，您可以使用[FindWindow](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633499%28v=vs.85%29.aspx)方法。任务栏名为“ `Shell_traywnd`”

# c# - Linq：获取丢失的记录

> ID：13249515
> 
> 赞同：3
> 
> 时间：2012-11-06T10:57:06.713
> 
> 标签：c#, .net, linq, lambda

所以这是我的情况，我得到了 2 个表，其中一个是语言，一个是资源，我想做的是找到每种语言中缺少的所有资源......

我想要使​​用的默认语言是 languageId = 1

**表“资源”**

```
Id    Key    Value    LanguageId
1     k1     test     1
2     k1     test     2
3     k1     test     3 
```

**表“语言”**

```
Id   
1
2
3
4
5
6
7 
```

language 包含大约 10 行语言。

现在我想做的是取出那些存在的资源 **（前结果）**

```
Key   Value   LanguageId
k1    test    1
k1    test    2
k1    test    3
k1    null    4
k1    null    5
k1    null    6
k1    null    7 
```

关于如何解决这个问题的任何建议，我都尝试过使用 GroupJoin 和 SelectMany 但没有好的结果。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T11:04:38.657

在我看来，实际上您的结构还不太正确：您应该有第三个 ResourceKeys 表，其中包含`k1`in。这样，当您添加资源键时，您添加的第一件事是 ResourceKeys 中的一个条目，此时*所有*语言都将缺少该翻译。否则，您将无法表示“没有翻译的资源”，这是一个有意义的 IMO 概念。

然后，您可以*交叉加入*语言和资源键，并针对资源进行*分组加入：*

```
var query = from language in Languages
            from resourceKey in ResourceKeys
            join resource in Resources
                 on new { LangId = language.Id, ResId = resourceKey.Id }
                 equals new { LangId = resource.LanguageId,
                              ResId = resource.Key }
                 into values
            select new { LangId = language.Id,
                         ResId = resourceKey.Id,
                         Value = values.SingleOrDefault() }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T11:01:37.957

```
from lang in context.Languages
where !context.Resources.Contains(r => r.LanguageId == lang.LanguageId)
select lang 
```

# matlab - 使用 CUDA 在 GPU 上的并行 Kronecker 张量积

> ID：13249520
> 
> 赞同：5
> 
> 时间：2012-11-06T10:57:29.200
> 
> 标签：matlab, parallel-processing, cuda, gpu, linear-algebra

我正在使用 [PTX 文件和 matlab parallel.gpu.CUDAkernel][2] 在 GPU 上并行化 [this file][1]。我对 [kron 张量积][3] 的问题如下。我的代码应该`kron(a,b)`通过将第一个向量的每个元素乘以`a=<32x1>`另一个向量的所有元素来将两个向量相乘`b=<1x32>`，并且输出向量的大小将为`k<32x32>=a.*b`. 我尝试用 C++ 编写它并且它有效，因为我只关心对 2d 数组的所有元素求和。我认为我可以将其简化为一维数组，因为这`m=sum(sum(kron(a,b)))`是我正在处理的代码

```
for(i=0;i<32;i++)
 for(j=0;j<32;j++)
   k[i*32+j]=a[i]*b[j] 
```

这意味着让`a[i]`第一个元素乘以每个元素`b`，我虽然与`32`块一起使用，每个块都有一个`32`线程，代码应该是

```
__global__ void myKrom(int* c,int* a, int*b) {
  int i=blockDim.x*blockIdx.x+threadIdx.x;
  while(i<32) {
    c[i]=a[blockIdx.x]+b[blockDim.x*blockIdx.x+threadIdx.x];
  } 
```

这应该是诀窍，因为它`blockIdx.x`是外循环，但事实并非如此。任何人都可以告诉我在哪里，我可以要求并行方式来进行并行求和。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T12:45:05.807

您实际上可能是这样的：

```
__global__ void myKrom(int* c,int* a, int*b)
{
  int i=blockDim.x*blockIdx.x+threadIdx.x;
  if(i<32*32){
    c[i]=a[blockIdx.x]+b[threadIdx.x];
  }

} 
```

当你调用内核时`myKrom<<<32, 32>>> (c, a, b);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-24T07:09:40.807

如果第一个操作数是单位矩阵，则可以使用 cuSPARSE 的`bsr`格式简单地表示 Kronecker 乘积的结果。

下面，一个实现以下 Matlab 指令的简单示例

```
 m = 5;
 I = speye(m);
 e = ones(m, 1);
 T = spdiags([e -4 * e e],[-1 0 1], m, m);
 kron(I, T) 
```

**克朗(I, T)**

```
#include <stdio.h>
#include <assert.h>

#include <cusparse.h>

#define blockMatrixSize         3           // --- Each block of the sparse block matrix is blockMatrixSize x blockMatrixSize

/*******************/
/* iDivUp FUNCTION */
/*******************/
int iDivUp(int a, int b){ return ((a % b) != 0) ? (a / b + 1) : (a / b); }

/********************/
/* CUDA ERROR CHECK */
/********************/
// --- Credit to http://stackoverflow.com/questions/14038589/what-is-the-canonical-way-to-check-for-errors-using-the-cuda-runtime-api
void gpuAssert(cudaError_t code, const char *file, int line, bool abort = true)
{
    if (code != cudaSuccess)
    {
        fprintf(stderr, "GPUassert: %s %s %d\n", cudaGetErrorString(code), file, line);
        if (abort) { exit(code); }
    }
}

void gpuErrchk(cudaError_t ans) { gpuAssert((ans), __FILE__, __LINE__); }

/***************************/
/* CUSPARSE ERROR CHECKING */
/***************************/
static const char *_cusparseGetErrorEnum(cusparseStatus_t error)
{
    switch (error)
    {

    case CUSPARSE_STATUS_SUCCESS:
        return "CUSPARSE_STATUS_SUCCESS";

    case CUSPARSE_STATUS_NOT_INITIALIZED:
        return "CUSPARSE_STATUS_NOT_INITIALIZED";

    case CUSPARSE_STATUS_ALLOC_FAILED:
        return "CUSPARSE_STATUS_ALLOC_FAILED";

    case CUSPARSE_STATUS_INVALID_VALUE:
        return "CUSPARSE_STATUS_INVALID_VALUE";

    case CUSPARSE_STATUS_ARCH_MISMATCH:
        return "CUSPARSE_STATUS_ARCH_MISMATCH";

    case CUSPARSE_STATUS_MAPPING_ERROR:
        return "CUSPARSE_STATUS_MAPPING_ERROR";

    case CUSPARSE_STATUS_EXECUTION_FAILED:
        return "CUSPARSE_STATUS_EXECUTION_FAILED";

    case CUSPARSE_STATUS_INTERNAL_ERROR:
        return "CUSPARSE_STATUS_INTERNAL_ERROR";

    case CUSPARSE_STATUS_MATRIX_TYPE_NOT_SUPPORTED:
        return "CUSPARSE_STATUS_MATRIX_TYPE_NOT_SUPPORTED";

    case CUSPARSE_STATUS_ZERO_PIVOT:
        return "CUSPARSE_STATUS_ZERO_PIVOT";
    }

    return "<unknown>";
}

inline void __cusparseSafeCall(cusparseStatus_t err, const char *file, const int line)
{
    if (CUSPARSE_STATUS_SUCCESS != err) {
        fprintf(stderr, "CUSPARSE error in file '%s', line %d, error %s\nterminating!\n", __FILE__, __LINE__, \
            _cusparseGetErrorEnum(err)); \
            assert(0); \
    }
}

extern "C" void cusparseSafeCall(cusparseStatus_t err) { __cusparseSafeCall(err, __FILE__, __LINE__); }

/********/
/* MAIN */
/********/
int main() {

    // --- Initialize cuSPARSE
    cusparseHandle_t handle;    cusparseSafeCall(cusparseCreate(&handle));

    // --- Initialize matrix descriptors
    cusparseMatDescr_t descrA, descrC;
    cusparseSafeCall(cusparseCreateMatDescr(&descrA));
    cusparseSafeCall(cusparseCreateMatDescr(&descrC));

    const int Mb = 5;                                       // --- Number of blocks along rows
    const int Nb = 5;                                       // --- Number of blocks along columns

    const int M = Mb * blockMatrixSize;                     // --- Number of rows
    const int N = Nb * blockMatrixSize;                     // --- Number of columns

    const int nnzb = Mb;                                    // --- Number of non-zero blocks

    float h_block[blockMatrixSize * blockMatrixSize] = { 4.f, -1.f, 0.f, -1.f, 4.f, -1.f, 0.f, -1.f, 4.f };

    // --- Host vectors defining the block-sparse matrix
    float *h_bsrValA = (float *)malloc(blockMatrixSize * blockMatrixSize * nnzb * sizeof(float));
    int *h_bsrRowPtrA = (int *)malloc((Mb + 1) * sizeof(int));
    int *h_bsrColIndA = (int *)malloc(nnzb * sizeof(int));

    for (int k = 0; k < nnzb; k++) memcpy(h_bsrValA + k * blockMatrixSize * blockMatrixSize, h_block, blockMatrixSize * blockMatrixSize * sizeof(float));

    h_bsrRowPtrA[0] = 0;
    h_bsrRowPtrA[1] = 1;
    h_bsrRowPtrA[2] = 2;
    h_bsrRowPtrA[3] = 3;
    h_bsrRowPtrA[4] = 4;
    h_bsrRowPtrA[5] = 5;

    h_bsrColIndA[0] = 0;
    h_bsrColIndA[1] = 1;
    h_bsrColIndA[2] = 2;
    h_bsrColIndA[3] = 3;
    h_bsrColIndA[4] = 4;

    // --- Device vectors defining the block-sparse matrix
    float *d_bsrValA;       gpuErrchk(cudaMalloc(&d_bsrValA, blockMatrixSize * blockMatrixSize * nnzb * sizeof(float)));
    int *d_bsrRowPtrA;      gpuErrchk(cudaMalloc(&d_bsrRowPtrA, (Mb + 1) * sizeof(int)));
    int *d_bsrColIndA;      gpuErrchk(cudaMalloc(&d_bsrColIndA, nnzb * sizeof(int)));

    gpuErrchk(cudaMemcpy(d_bsrValA, h_bsrValA, blockMatrixSize * blockMatrixSize * nnzb * sizeof(float), cudaMemcpyHostToDevice));
    gpuErrchk(cudaMemcpy(d_bsrRowPtrA, h_bsrRowPtrA, (Mb + 1) * sizeof(int), cudaMemcpyHostToDevice));
    gpuErrchk(cudaMemcpy(d_bsrColIndA, h_bsrColIndA, nnzb * sizeof(int), cudaMemcpyHostToDevice));

    // --- Transforming bsr to csr format
    cusparseDirection_t dir = CUSPARSE_DIRECTION_COLUMN;
    const int nnz = nnzb * blockMatrixSize * blockMatrixSize; // --- Number of non-zero elements
    int *d_csrRowPtrC;      gpuErrchk(cudaMalloc(&d_csrRowPtrC, (M + 1) * sizeof(int)));
    int *d_csrColIndC;      gpuErrchk(cudaMalloc(&d_csrColIndC, nnz     * sizeof(int)));
    float *d_csrValC;       gpuErrchk(cudaMalloc(&d_csrValC, nnz        * sizeof(float)));
    cusparseSafeCall(cusparseSbsr2csr(handle, dir, Mb, Nb, descrA, d_bsrValA, d_bsrRowPtrA, d_bsrColIndA, blockMatrixSize, descrC, d_csrValC, d_csrRowPtrC, d_csrColIndC));

    // --- Transforming csr to dense format
    float *d_A;             gpuErrchk(cudaMalloc(&d_A, M * N * sizeof(float)));
    cusparseSafeCall(cusparseScsr2dense(handle, M, N, descrC, d_csrValC, d_csrRowPtrC, d_csrColIndC, d_A, M));

    float *h_A = (float *)malloc(M * N * sizeof(float));
    gpuErrchk(cudaMemcpy(h_A, d_A, M * N * sizeof(float), cudaMemcpyDeviceToHost));

    // --- m is row index, n column index
    for (int m = 0; m < M; m++) {
        for (int n = 0; n < N; n++) {
            printf("%f ", h_A[m + n * M]);
        }
        printf("\n");
    }

    return 0;
} 
```

同样在第二个操作数是单位矩阵的简单情况下，克罗内克积的结果可以使用 cuSPARSE 的`bsr`格式表示。

下面，一个简单的例子

```
m = 5;
I = speye(3);
e = ones(m, 1);
S = spdiags([e e], [-1 1], m, m);
kron(S, I) 
```

**克朗(S, I)**

```
#include <stdio.h>
#include <assert.h>

#include <cusparse.h>

#define blockMatrixSize         3           // --- Each block of the sparse block matrix is blockMatrixSize x blockMatrixSize

/*******************/
/* iDivUp FUNCTION */
/*******************/
int iDivUp(int a, int b){ return ((a % b) != 0) ? (a / b + 1) : (a / b); }

/********************/
/* CUDA ERROR CHECK */
/********************/
// --- Credit to http://stackoverflow.com/questions/14038589/what-is-the-canonical-way-to-check-for-errors-using-the-cuda-runtime-api
void gpuAssert(cudaError_t code, const char *file, int line, bool abort = true)
{
    if (code != cudaSuccess)
    {
        fprintf(stderr, "GPUassert: %s %s %d\n", cudaGetErrorString(code), file, line);
        if (abort) { exit(code); }
    }
}

void gpuErrchk(cudaError_t ans) { gpuAssert((ans), __FILE__, __LINE__); }

/***************************/
/* CUSPARSE ERROR CHECKING */
/***************************/
static const char *_cusparseGetErrorEnum(cusparseStatus_t error)
{
    switch (error)
    {

    case CUSPARSE_STATUS_SUCCESS:
        return "CUSPARSE_STATUS_SUCCESS";

    case CUSPARSE_STATUS_NOT_INITIALIZED:
        return "CUSPARSE_STATUS_NOT_INITIALIZED";

    case CUSPARSE_STATUS_ALLOC_FAILED:
        return "CUSPARSE_STATUS_ALLOC_FAILED";

    case CUSPARSE_STATUS_INVALID_VALUE:
        return "CUSPARSE_STATUS_INVALID_VALUE";

    case CUSPARSE_STATUS_ARCH_MISMATCH:
        return "CUSPARSE_STATUS_ARCH_MISMATCH";

    case CUSPARSE_STATUS_MAPPING_ERROR:
        return "CUSPARSE_STATUS_MAPPING_ERROR";

    case CUSPARSE_STATUS_EXECUTION_FAILED:
        return "CUSPARSE_STATUS_EXECUTION_FAILED";

    case CUSPARSE_STATUS_INTERNAL_ERROR:
        return "CUSPARSE_STATUS_INTERNAL_ERROR";

    case CUSPARSE_STATUS_MATRIX_TYPE_NOT_SUPPORTED:
        return "CUSPARSE_STATUS_MATRIX_TYPE_NOT_SUPPORTED";

    case CUSPARSE_STATUS_ZERO_PIVOT:
        return "CUSPARSE_STATUS_ZERO_PIVOT";
    }

    return "<unknown>";
}

inline void __cusparseSafeCall(cusparseStatus_t err, const char *file, const int line)
{
    if (CUSPARSE_STATUS_SUCCESS != err) {
        fprintf(stderr, "CUSPARSE error in file '%s', line %d, error %s\nterminating!\n", __FILE__, __LINE__, \
            _cusparseGetErrorEnum(err)); \
            assert(0); \
    }
}

extern "C" void cusparseSafeCall(cusparseStatus_t err) { __cusparseSafeCall(err, __FILE__, __LINE__); }

/********/
/* MAIN */
/********/
int main() {

    // --- Initialize cuSPARSE
    cusparseHandle_t handle;    cusparseSafeCall(cusparseCreate(&handle));

    // --- Initialize matrix descriptors
    cusparseMatDescr_t descrA, descrC;
    cusparseSafeCall(cusparseCreateMatDescr(&descrA));
    cusparseSafeCall(cusparseCreateMatDescr(&descrC));

    const int Mb = 5;                                       // --- Number of blocks along rows
    const int Nb = 5;                                       // --- Number of blocks along columns

    const int M = Mb * blockMatrixSize;                     // --- Number of rows
    const int N = Nb * blockMatrixSize;                     // --- Number of columns

    const int nnzb = 2 * (Mb - 1);                          // --- Number of non-zero blocks

    float h_block[blockMatrixSize * blockMatrixSize] = { 1.f, 0.f, 0.f, 0.f, 1.f, 0.f, 0.f, 0.f, 1.f };

    // --- Host vectors defining the block-sparse matrix
    float *h_bsrValA = (float *)malloc(blockMatrixSize * blockMatrixSize * nnzb * sizeof(float));
    int *h_bsrRowPtrA = (int *)malloc((Mb + 1) * sizeof(int));
    int *h_bsrColIndA = (int *)malloc(nnzb * sizeof(int));

    for (int k = 0; k < nnzb; k++) memcpy(h_bsrValA + k * blockMatrixSize * blockMatrixSize, h_block, blockMatrixSize * blockMatrixSize * sizeof(float));

    h_bsrRowPtrA[0] = 0;
    h_bsrRowPtrA[1] = 1;
    h_bsrRowPtrA[2] = 3;
    h_bsrRowPtrA[3] = 5;
    h_bsrRowPtrA[4] = 7;
    h_bsrRowPtrA[5] = 2 * (Mb - 1);

    h_bsrColIndA[0] = 1;
    h_bsrColIndA[1] = 0;
    h_bsrColIndA[2] = 2;
    h_bsrColIndA[3] = 1;
    h_bsrColIndA[4] = 3;
    h_bsrColIndA[5] = 2;
    h_bsrColIndA[6] = 4;
    h_bsrColIndA[7] = 3;

    // --- Device vectors defining the block-sparse matrix
    float *d_bsrValA;       gpuErrchk(cudaMalloc(&d_bsrValA, blockMatrixSize * blockMatrixSize * nnzb * sizeof(float)));
    int *d_bsrRowPtrA;      gpuErrchk(cudaMalloc(&d_bsrRowPtrA, (Mb + 1) * sizeof(int)));
    int *d_bsrColIndA;      gpuErrchk(cudaMalloc(&d_bsrColIndA, nnzb * sizeof(int)));

    gpuErrchk(cudaMemcpy(d_bsrValA, h_bsrValA, blockMatrixSize * blockMatrixSize * nnzb * sizeof(float), cudaMemcpyHostToDevice));
    gpuErrchk(cudaMemcpy(d_bsrRowPtrA, h_bsrRowPtrA, (Mb + 1) * sizeof(int), cudaMemcpyHostToDevice));
    gpuErrchk(cudaMemcpy(d_bsrColIndA, h_bsrColIndA, nnzb * sizeof(int), cudaMemcpyHostToDevice));

    // --- Transforming bsr to csr format
    cusparseDirection_t dir = CUSPARSE_DIRECTION_COLUMN;
    const int nnz = nnzb * blockMatrixSize * blockMatrixSize; // --- Number of non-zero elements
    int *d_csrRowPtrC;      gpuErrchk(cudaMalloc(&d_csrRowPtrC, (M + 1) * sizeof(int)));
    int *d_csrColIndC;      gpuErrchk(cudaMalloc(&d_csrColIndC, nnz     * sizeof(int)));
    float *d_csrValC;       gpuErrchk(cudaMalloc(&d_csrValC, nnz        * sizeof(float)));
    cusparseSafeCall(cusparseSbsr2csr(handle, dir, Mb, Nb, descrA, d_bsrValA, d_bsrRowPtrA, d_bsrColIndA, blockMatrixSize, descrC, d_csrValC, d_csrRowPtrC, d_csrColIndC));

    // --- Transforming csr to dense format
    float *d_A;             gpuErrchk(cudaMalloc(&d_A, M * N * sizeof(float)));
    cusparseSafeCall(cusparseScsr2dense(handle, M, N, descrC, d_csrValC, d_csrRowPtrC, d_csrColIndC, d_A, M));

    float *h_A = (float *)malloc(M * N * sizeof(float));
    gpuErrchk(cudaMemcpy(h_A, d_A, M * N * sizeof(float), cudaMemcpyDeviceToHost));

    // --- m is row index, n column index
    for (int m = 0; m < M; m++) {
        for (int n = 0; n < N; n++) {
            printf("%f ", h_A[m + n * M]);
        }
        printf("\n");
    }

    return 0;
} 
```

# c# - 试图在 IHttpHandler 中获取控件的 HTML

> ID：13249521
> 
> 赞同：0
> 
> 时间：2012-11-06T10:57:32.350
> 
> 标签：c#, asp.net, .net-3.5, page-lifecycle, ihttphandler

我创建了一个实现 IHttpHandler 的类，我需要它来返回我制作的数据绑定用户控件的呈现 HTML。虽然我可以让它工作，但它并没有像我希望的那样工作......基本上，我创建了一个新的 Page()，并向其中添加了一个中继器，将该中继器的项目模板设置为我的用户控件(.ascx)，设置数据源，然后进行数据绑定。最后，我要求它进行渲染，然后收集该 HTML 并将其发送回管道。

问题是只有我的用户控件上的任何控件的 Render() 方法被触发，没有 Init()、Load() 等事件。为什么是这样？我怎样才能让他们像你通常期望的那样开火？

```
StringBuilder sb = new StringBuilder();
StringWriter tw = new StringWriter(sb);
HtmlTextWriter hw = new HtmlTextWriter(tw);

Page page = new Page();
Repeater rpt = new Repeater();

page.Controls.Add(rpt);

rpt.ItemTemplate = ResourceServices.LoadTemplate("mytemplate.ascx");
rpt.DataSource = datasource;
rpt.DataBind();

rpt.RenderControl(hw);

HTML = sb.ToString(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T13:09:46.210

您需要执行页面以触发事件。尝试将您的`RenderControl`行替换为：

```
context.Server.Execute(page, hw, false); 
```

[http://msdn.microsoft.com/en-us/library/ms150027.aspx](http://msdn.microsoft.com/en-us/library/ms150027.aspx)

# java - hadoop：reducer 的数量保持不变 4

> ID：13249522
> 
> 赞同：1
> 
> 时间：2012-11-06T10:57:40.703
> 
> 标签：java, hadoop, mapreduce, distributed-computing

我正在运行一个hadoop工作`mapred.reduce.tasks = 100`（只是在试验）。生成的地图数量为 537，因为这取决于输入拆分。问题是并行“运行”的减速器的数量不会超过 4。即使在地图 100% 完成之后。有没有办法增加运行的减速器的数量，因为 CPU 使用率不是最佳的并且减速器非常慢。

我也设置了`mapred.tasktracker.reduce.tasks.maximum = 100`。但这似乎不会影响并行运行的减速器的数量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T16:26:04.833

检查分区器使用的哈希码；如果你的键只返回 4 个 hashcode 值，Hadoop 将只安排 4 个 reducer。

您可能需要实现自己的分区器以获取更多减速器，但是如果您的映射器仅生成 4 个键，则 4 是减速器的最大数量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T04:59:46.050

事实证明，您只需在更改 mapred-site.xml 后重新启动 mapred 和 dfs 守护程序即可。`mapred.tasktracker.reduce.tasks.maximum`确实是为增加 Reduce 容量而设置的正确参数。

无法理解为什么 hadoop 在`mapred-site`每次提交作业时都选择不重新加载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T11:57:36.050

您可以使用作业配置指定减速器的数量，如下所示：

job.setNumReduceTasks(6);

此外，当您执行 jar 时，您可以传递如下属性：

-D mapred.reduce.tasks=6

# matlab - 从向量中提取给定值的倍数

> ID：13249525
> 
> 赞同：1
> 
> 时间：2012-11-06T10:58:15.100
> 
> 标签：matlab, vector

从以下向量：

```
depth = [0:0.1:20]; 
```

我如何创建一个具有与“深度”相同的数据但每 0.5 取一个值的新向量，提供以下结果：

```
d2 = depth(1:5:end); 
```

由于我的数据实际上不是以 0.1 的间隔间隔而是随机间隔的，所以我不能应用上面显示的简单方法。实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T11:04:12.953

如果你想在数组中找到最接近线性间隔网格的点，你可以这样做：

```
% some example data
A = zeros(40,1);
for ii = 2:numel(A); A(ii)=A(ii-1)+rand; end

% your linear grid
Linds = A(1) : 0.5 : A(end);

% nearest indices
[~,inds] = min( abs(bsxfun(@minus, A, Linds)) ); 
```

请注意，其中的条目`inds`可能会重复。否则，如果您想在向量中进行插值，则需要`interp1`. 从文档中：

> YI = INTERP1(X,Y,XI) 进行插值以找到 YI，即数组 XI 中点处的基础函数 Y 的值。X 必须是长度为 N 的向量。

请注意，可以使用多个不同的插值内核，例如 、`'linear'`等`'spline'`。有关`help interp1`更多信息，请咨询。

# javascript - 点击时Javascript更新/增加变量值

> ID：13249528
> 
> 赞同：10
> 
> 时间：2012-11-06T10:58:23.150
> 
> 标签：javascript, increment

我有以下代码：[JS Fiddle](http://jsfiddle.net/TSaaJ/1/)

```
<html>
    <head>
        <script>            
            function increase(){
                var a = 1;
                var textBox = document.getElementById("text");
                textBox.value = a;
                a++;
            }            
        </script>
    </head>

    <body>
        <button type="button" onclick="increase()">show</button>
        <input type="text" id="text">
    </body>
</html>​ 
```

我想做的是：

1.  单击按钮时，“a”的值将显示在文本框中，并且“a”将递增。
2.  现在再次单击时，应显示增加的值，但这不会发生。

我哪里错了？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-06T11:00:17.137

您只是在增加一个在函数结束时消失的局部变量。你可以这样做：

```
 var a = 1;
      function increase(){
            var textBox = document.getElementById("text");
            textBox.value = a;
            a++;
      } 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-06T11:00:52.040

```
<input type="text" id="text" value="1"/> 
```

```
function increase(){
    var textBox = document.getElementById("text");
    textBox.value++;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T11:02:33.903

最好检查文本字段的值。如果它是空的`a=1`，否则`textfield.value++`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T11:03:22.960

我的意思是`var a=1;`应该在函数之前声明

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-06T11:04:02.530

你可以使用这个。只需复制和粘贴

```
 <html>
    <head>
        <script type="text/javascript">  
        var a = 1;          
            function increase(){

                document.getElementById("text").value=a;
                a=a+1;

            }            
        </script>
    </head>

    <body>
        <button type="button" onclick="increase()">show</button>
        <input type="text" id="text">
    </body>
</html>​ 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-02-10T09:36:18.827

使用此代码

```
 var k = 1;
    function shashi() {
        document.getElementById('para').innerHTML = k;
        k++;
    }
    k = k;
</script><br/> 
```

并在点击事件上调用 shashi() 函数

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-05-18T09:45:27.510

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-01-27T06:04:06.137

```
 <input type="text" id="text" value="1" />
<p id="plus">+</p>
<script>
    const plus = document.getElementById('plus');
    plus.addEventListener('click', function() {
        var textBox = document.getElementById("text").value;
        let inputNumber = parseFloat(textBox);
        console.log(inputNumber);
        inputNumber += 1;
        document.getElementById("text").value = inputNumber;
    })
</script> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-05-30T03:56:22.690

您也在按钮编码中的函数 increase() 之前和之后加上引号

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2016-08-17T09:44:45.830

您有一个更简单的方法来实现递增和递减按钮。 *使用内联 javascript 的快速示例：*

```
<!-- increment button -->
<input type='button' name='add' onclick='javascript: document.getElementById("qty").value++;' value='+'/>
<!-- quantity input -->
<input name='qty' id='qty' style="text-align:center;" type="text" value="1"  autocomplete="off" size="2">
<!-- decrement button -->
<input type='button' name='subtract' onclick='javascript: document.getElementById("qty").value--;' value='-'/> 
```

# wpf - 当应用程序窗口不活动时单击 Wpf 按钮

> ID：13249529
> 
> 赞同：0
> 
> 时间：2012-11-06T10:58:29.430
> 
> 标签：wpf, button, click, focus

我有一个 WPF 应用程序窗口，其中包含一组三个按钮（按钮 A、B、C），这些按钮具有与各自视图模型属性的命令绑定。

单击按钮 A 时，它的命令执行（启动另一个应用程序，按钮 A 被禁用，因为 CommandCanExecute 条件更新为返回 false）。这会导致应用程序窗口被停用。

单击按钮 B 不会执行它的命令，而只会激活窗口并将焦点设置到主窗口。按钮 B 需要第二次单击才能执行其命令。

所需的功能是在单击按钮 B 时，当应用程序窗口未激活时，应用程序窗口将激活并执行与按钮 B 关联的命令。我也尝试删除命令并添加一个单击处理程序以进行测试，但这显示了相同的行为。

感谢您对这个问题的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T13:36:00.433

查看[在视图模型中执行命令逻辑，](http://www.codeproject.com/Articles/101881/Executing-Command-Logic-in-a-View-Model)看看文章后面部分中描述的 DataContextCommandAdapter 是否可以链接/调用按钮 B 所需的命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T16:46:10.977

确定了与我们的 Command 绑定设置方式有关的问题。

解决方案是触发`CanExecuteChanged event`，以便`CommandCanExecute`框架重新评估相关性。当条件改变时，我用委托命令的方法替换了我们的`ICommand`实现`Prism DelegateCommand`并调用了方法。`RaiseCanExecuteChanged()`

在使用 Prism DelegateCommand 之前，我尝试调用`CommandManager.InvalidateRequerySuggested()`但在这种情况下没有帮助。我还没有完全调查原因，但我们已经在其他应用程序中使用 PRISM，所以在这里使用 DelegateCommand 就足够了。

非常感谢

# objective-c - 使用 textview 光标移动到下一行

> ID：13249533
> 
> 赞同：1
> 
> 时间：2012-11-06T10:58:48.530
> 
> 标签：objective-c, ios

嗨朋友们，我正在尝试将光标移动到下一行。它可以工作，但是当我在 textview 光标中输入一个字符时再次回到第一行。请帮帮我。我正在写下面的代码。

```
if (textView == mailBodyTxtVew)
    {

        textView.text= [textView.text stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];
        //[textView resignFirstResponder];
       // return NO;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T11:05:30.050

```
textView.text= [textView.text stringByAppendingString:@"\n"]; 
```

# ios - 禁用 Safari 时更新 iOS 应用程序

> ID：13249535
> 
> 赞同：0
> 
> 时间：2012-11-06T10:58:52.490
> 
> 标签：ios, safari

在受限（禁用 safari）iOS 设备上，有一种方法可以从 appstore 更新应用程序，我一直在寻找这个，但找不到任何解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T11:32:31.290

要更新应用程序，您不需要 Safari。您从 App Store 更新 App。

# jquery - jQuery验证插件刷新IE8

> ID：13249537
> 
> 赞同：2
> 
> 时间：2012-11-06T10:58:59.090
> 
> 标签：jquery, validation, internet-explorer-8, jquery-ui-dialog

使用 jQuery 验证插件 (v1.10.0) 和 jQueryUI 对话框 (v1.9.0，而不是 CDN 的 1.9.1) 验证表单，当然 jQuery (v1.8.2) 会刷新 IE7 和 IE8 上的页面并且不会产生任何错误，而它在任何其他经过测试的浏览器（Chrome、Firefox、Safari 和 IE9）上都像魅力一样工作。

这是完整的代码：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="x-ua-compatible" content="IE=edge">
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.8.2.min.js"></script>
<script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jquery.ui/1.9.0/jquery-ui.min.js"></script>
<script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.10.0/jquery.validate.min.js"></script>
<link id="theme" rel="stylesheet" type="text/css" href="http://ajax.aspnetcdn.com/ajax/jquery.ui/1.9.0/themes/redmond/jquery-ui.css" media="screen" />
<script type="text/javascript">
var deleteTestAndReload;
var deleteTestWithMotive;
var display;
$(document).ready(function(){

    var $deleteTestDialog = $('<div id="delete-test-dialog"></div>').dialog({
        autoOpen:   false,
        title:      'Delete test',
        height:     340,
        width:      590,
        modal:      true,
        position:   ['center', 50]
    });

    deleteTestAndReload = function() {
        alert("Aouch, Charlie!");
        $deleteTestDialog.dialog('close');
    }

    deleteTestWithMotive = function() {
        html = '    <form id="delete-test-dialog-form" name="delete-test-dialog-form" onsubmit="deleteTestAndReload(); return false;" method="post">\n';
        html += '   Why?<br />\n';
        html += '   <input type="radio" id="motive-1" name="motive" value="1" checked="checked" />Charlie bit me<br />\n';
        html += '   <div style="text-align:right;">\n';
        html += '   <button id="validate_test_deletion" name="validate_test_deletion" type="submit" value="test_deletion">Delete</button>\n';
        html += '   </div>';
        html += '   </form>\n';

        $("#delete-test-dialog").html(html);

        $("#delete-test-dialog-form").validate({
            rules: {
                motive: { required: true }
            }
        });

        $("#validate_test_deletion", "#delete-test-dialog-form").button();
    }

    display = function() {
        alert('display');
        html = '<button type="button" name="delete_test" value="delete_test" class="my-buttonset-button" onclick="deleteTestWithMotive();">Delete</button>\n';
        $("#main-content").html(html);

        $("button[name='delete_test']").button().click(function() {
            $deleteTestDialog.dialog('open');
            return false;
        });
    }

    display();
});
</script>
</head>
<body>

<div id="main-content" class="main-content"></div>

</body>
</html> 
```

在加载时，调用第一个 javascript 警报（'display'）。单击“删除”按钮时，会打开一个对话框，其中包含一个表单，并且当该表单被验证（选中单选按钮并单击“删除”按钮）时，调用第二个函数（deleteTestAndReload），它会发出一条消息（它会触发一个 ajax 调用）完整版）并关闭对话框实例。

在 IE7/IE8 上，页面刷新并显示第一个警报（“显示”）（重新加载是错误，因为它不应该）。

但是，如果我删除以下验证代码，则无需重新加载即可使用。

```
$("#delete-test-dialog-form").validate({
    rules: {
        motive: { required: true }
    }
}); 
```

所以我假设在验证表单时出现问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T20:00:32.347

亚历克斯，

您可以更改几个选项以使其跨浏览器工作。我继续在 jsFiddle [http://jsfiddle.net/cWea7/](http://jsfiddle.net/cWea7/)中重新创建了您的上述场景，以便我可以进行一些调整并在下面显示它们。

### 选项1

`submitHandler`设置`validate`插件时使用该属性

```
$("#delete-test-dialog-form").validate({
    submitHandler: deleteTestAndReload,
    rules: {
        motive: {
            required: true
        }
    }
}); 
```

注意：我`onsubmit`从标签中删除了该属性，`form`因为它将由`submitHandler`上面的代码片段中所示的 处理。

示例：http: [//jsfiddle.net/cWea7/9/](http://jsfiddle.net/cWea7/9/)

### 选项 2

在事件处理程序中，使用插件的方法`submit`手动检查表单的有效性。`valid`

```
deleteTestAndReload = function( e ) {
    e.preventDefault();
    if ( $("#delete-test-dialog-form").valid() ) {
        alert("Aouch, Charlie!");
        $deleteTestDialog.dialog('close');
    }
}; 
```

注意：我`onsubmit`从标签中删除了属性`form`，而是使用 jQuery 来连接`submit`事件。

示例：http: [//jsfiddle.net/cWea7/8/](http://jsfiddle.net/cWea7/8/)

# php - wpautop() - 当短代码属性在新行时 -breaks args 数组

> ID：13249539
> 
> 赞同：4
> 
> 时间：2012-11-06T10:59:19.200
> 
> 标签：php, arrays, wordpress, shortcode

我有一个带有一些属性的自定义短代码标签，我希望能够在新行上显示其属性 - 使其对内容编辑器更具可读性：

```
[component
    attr1 ="value1"
    attr2 ="value of the second one"
    attr3 ="another"
    attr4 ="value"
    ...
    attrN ="valueN"] 
```

此要求背后的原因是一些属性的内容可能非常冗长。不幸的是，`wpautop()`添加了一些讨厌的额外标记，像这样破坏`args`数组（使用 php `print_r($args)`）：

```
Array ( [0] => attr1 [1] => ="value1"
/> [3] => attr2 = [4] => "value [5] => of [6] => the [7] => second [8] => one"
/> [10] => "" //...and more like this) 
```

我试过使用属性**inline**：

```
[component attr1 ="value1" attr2 ="value of the second one" ="value"... attrN ="valueN"] 
```

并且输出如预期：

```
Array ( [attr1] => value1 [attr2] => value of the second one [attr3] => //...and so on) 
```

有没有办法让属性有意图并避免破坏`$args`数组的额外标记？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T16:33:28.040

接受的答案 - 归功于@Stephen

好的，我从来没有见过以这种方式完成的短代码，所以我把一些代码放在一起来测试你的场景。并且我得到与标准简码格式工作得很好的代码相同的结果。

**标准简码格式**

```
[shortcode name1="value1" name2="value2"] 
```

我不相信这是 wpautop() 的结果，而是解析短代码属性的方式的结果。看上面的例子，你会发现唯一的未加引号的空格用于分隔短代码和 name=>value 对（即 name 和 '=' 之间没有空格，每个 name=>value 之间只有一个空格一对）。在这种情况下，
也被认为是空白。

我还没有深入研究短代码解析的特定内部结构，所以我无法提供有关钩子或过滤器的建议，这会有所帮助。也许这里的另一个用户对此有一些想法。

如果您必须像您拥有的那样格式化您的简码，我认为您将不得不编写自定义代码来解析传递给您的简码函数的数组。所有的值都在那里，所以你应该能够将它们拼凑在一起。

另一种选择可能是为最终用户提供表单以输入值，然后在您的内容中填充短代码。

**我的答案的更新**

我的回答让我很烦，所以我又看了一遍。你是正确的 wpautop() 对页面的输出有影响。但我认为这不是您的短代码问题的原因。

# ruby-on-rails - 为什么从 rails 应用程序目录和非 rails 目录运行 rails 命令不同？

> ID：13249544
> 
> 赞同：0
> 
> 时间：2012-11-06T10:59:35.047
> 
> 标签：ruby-on-rails

一个愚蠢的问题：

当我在 rails 应用程序中运行 rails 时，它显示

```
Usage: rails COMMAND [ARGS]

The most common rails commands are:
generate    Generate new code (short-cut alias: "g")
..... 
```

但在rails应用程序之外，它显示：

```
Usage:
rails new APP_PATH [options]

Options:
 -r, [--ruby=PATH]              # Path to the Ruby binary of your choice
 ..... 
```

为什么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T13:47:52.990

如果您检查[源代码](https://github.com/rails/rails/blob/master/railties/lib/rails/script_rails_loader.rb)，您会发现它基本上会检查“./script/rails”是否存在并在找到时运行它。因此，如果没有这样的 - 它只会显示不同的输出。

# solr - 如何使用 db-data-config.xml 配置 solr 以索引来自多个源的文档

> ID：13249550
> 
> 赞同：0
> 
> 时间：2012-11-06T10:59:55.327
> 
> 标签：solr, configuration-files, multiple-databases

我正在尝试将多个数据库索引到一个 solr 索引中。我一直在阅读有关多个数据源的 solr wiki 并尝试使用不同类型的设置，但我无法获得所需的结果。

我的配置如下所示：

```
<dataConfig>
  <!-- Has 10000 items -->
  <dataSource name="ds1" driver="org.h2.Driver" url="jdbc:h2:file:/path/to/first" />
  <!-- Has ~7000 items -->
  <dataSource name="ds2" driver="org.h2.Driver" url="jdbc:h2:file:/path/to/second" />

  <document name="myDocName">
    <entity name="firstEntity" rootEntity="true" 
            dataSource="ds1" query="SELECT * FROM BLAH"  
            transformer="my.Transformer" threads="4">
      ... <!-- field configuration here -->
    </entity>

    <entity name="secondEntity" rootEntity="true"  
            dataSource="ds2" query="SELECT * FROM BLAH"  
            transformer="my.Transformer" threads="4">
      ... <!-- field configuration here -->
    </entity>
  </document>
</dataConfig> 
```

现在，我们目前正在使用 testdata，所以我知道每个数据库中有多少条记录，第一个包含 ~7000，第二个包含 10000。当我开始索引时，我收到一条信息消息，有 ~17000 个添加：

```
INFO: {deleteByQuery=*:*,add=[5, 1, 2, 6, 7, 4, 8, 3, ... (17069 adds)],commit=} 0 
```

但是，当我在 Web 界面中运行 * : * 查询时，我只得到 10000 个结果（这正是最大数据库中的项目数。这似乎表明 7096 个文档必须包含其中的实体，而剩下的只有一个。

我试图在配置文件中记录元素，但这导致只有一个被导入（可能是因为它们具有相同的名称，即文档名称=“myDocName”为两个文档元素配置相同）。

在这一点上，我被卡住了，不知道如何正确配置它。我唯一能想到的就是我必须分别索引两个数据库，但我也不清楚这方面的工作流程。任何帮助，将不胜感激。

**更新 1：**我尝试为这两个实体提供不同的名称（无论如何，这都是根据文档所必需的），但这会导致以下行为。第一个文档从第一个数据库添加，接下来前 N 个现有文档被第二个数据库中的文档覆盖，其中 N 是第二个数据库中的记录数。显然这不是我想要的，我想要 N*个额外*的文件。在配置中添加第二个文档元素似乎也不起作用。

**更新 2：**根据此错误报告中的评论：[https](https://issues.apache.org/jira/browse/SOLR-895) ://issues.apache.org/jira/browse/SOLR-895 ，文档标签中的根实体应为这些实体生成新文档。这不是我正在发生的事情。在每个实体标签上显式设置 rootEntity="true" 也不会改变任何东西。结果仍然是导入后我只有 10000 个文档，而不是预期的 17000 个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T13:14:49.627

我想你有唯一的键冲突。您在两个不同的数据库中是否有相同的 ID？尝试将查询更改为

```
 - ds1 - "SELECT "ds1" || id AS id, field1, field2 FROM table1"
 - ds2 - "SELECT "ds2" || id AS id, field1, field2 FROM table2" 
```

我会删除多线程选项（threads="4"），与单线程情况相比没有真正显着的性能改进，而且它不是很稳定（它在 4.0 版本中被删除）。

# jquery - jquery $ajax 关闭

> ID：13249569
> 
> 赞同：0
> 
> 时间：2012-11-06T11:01:01.550
> 
> 标签：jquery, ajax, closures

我有以下函数，它接受这个频率参数并调用 api，但参数频率没有在 SUCCESS 回调中定义，我需要它。如何将该参数传递给我的回调？

```
 init : function(frequency) {
    $.ajax({
        url: 'api/v1/dashboard',
        type: "GET",
        dataType: "json",
        data : {username : "demo",frequency : frequency},
        success: function(data) {
            dashboard_hander.set_data(data.dashboard);
                            //here frequency is undefined

        }
    });
}, 
```

编辑 2 =====

它通过定义参数来工作= {用户名：“演示”，频率：频率}；在 $.ajax 之外并作为数据对象传递，或在更高范围内定义频率，例如：

```
 var dashboard_hander = {
frequency : "",
init : function(frequency) {
    this.frequency = frequency;

       ...
    }
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T11:03:24.457

只需在更高的范围内定义它。

```
 init : function(frequency) {
        var myData = {username : "demo",frequency : frequency};
        $.ajax({
            url: 'api/v1/dashboard',
            type: "GET",
            dataType: "json",
            data : myData,
            success: function(data) {
                alert(myData.frequency);
                dashboard_hander.set_data(data.dashboard);
                                //here frequency is undefined

            }
        });
    }, 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T11:08:48.973

演示[http://jsfiddle.net/B2h8m/2/](http://jsfiddle.net/B2h8m/2/) 这是它的代码：

```
var test = {init : function(frequency) {
    (function() {
        $.ajax({
            url: 'api/v1/dashboard',
            type: "GET",
            dataType: "json",
            data : {username : "demo",frequency : frequency},
            success: function(data) {
                alert(frequency);

            },
            error: function(data) {
                alert(frequency);

            }
        });
    })();
}}
test.init(10); 
```

包装 $.ajax 的附加函数将创建一个闭包，这样您就可以访问频率。

**编辑：** 此外，奇怪的是你在那个地方没有定义它。看[这个](http://jsfiddle.net/B2h8m/4/)演示。它使用与您相同的代码。并且工作正常。不需要我添加的其他函数，因为成功回调函数也会创建一个闭包。除了您显示的代码与您有问题的代码不同之外，您的代码成功定义如下：

```
success: successHandlerFunctionName 
```

在这种情况下，您可以将其更改为：

```
success:function(data) {successHandlerFunctionName(data, frequency);} 
```

频率将从关闭中获取

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T11:09:01.560

参数`frequency` *被*定义，因为它由闭包保存。只有在 ajax 调用之后更改它才会消失。

[使用此代码进行演示：](http://dystroy.org/stackoverflow/frequency/index3.html)

```
<script>
var obj = {
    init : function(frequency) {
    $.ajax({
        url: 'index2.html',
        type: "GET",
        dataType: "html",
        data : {username : "demo",frequency : frequency},
        success: function(data) {
            alert('frequency:' + frequency);
        }
    });
}};
obj.init(33);
</script> 
```

# html - 需要显示具有等长下划线的多行文本

> ID：13249574
> 
> 赞同：3
> 
> 时间：2012-11-06T11:01:13.937
> 
> 标签：html, css, xslt

我需要实现以下标记： ![在此处输入图像描述](../Images/1fefea99db89554a8cab1b84ddb6c578.png)

问题是我只能使用 HTML+CSS 和 XSLT 来生成它。

我想写一个模板，用 XSL 将文本分成几行，然后`<p>`用`border-bottom`set 将每一行打印为不同的段落。有没有更简单的方法可以通过 HTML+CSS 实现这一点？

**一个小的更新：**这里的重点是让这个下划线延伸到文本之外并占据所有可用的宽度。所以所有行的长度都相同（就像字帖中的行），除了第一行可能更短

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-06T11:14:08.150

您可以使用内联元素，例如`<span>`将`border-bottom`下划线视为：

```
<p>
    <span>
        <del>Lorem ipsum dolor sit amet, consectetur adipisicing elit,</del> sed do
eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam
    </span>
</p> 
```

和 CSS：

```
span {
    border-bottom: 4px solid black;
}
del {
    color: red;
} 
```

[演示在这里。](http://jsfiddle.net/jfrej/W7w9s/1/)

使用上述标记的结果：

![结果是铬](../Images/7b947143627fcf7d4015e92a2c7aa4f1.png)

**编辑：**

**1.**

扩展@aefxx 的[答案](https://stackoverflow.com/a/13249959/206614)，如果你可以使用 CSS3 试试这个：

```
.strike {
    background-image: -moz-linear-gradient(top , rgba(255, 255, 255, 0) 34px, #000000 34px, #000000 38px);
    background-image: -webkit-linear-gradient(rgba(255, 255, 255, 0) 34px, #000000 34px, #000000 38px);
    background-image: linear-gradient(to bottom, rgba(255, 255, 255, 0) 34px, #000000 34px, #000000 38px);
    background-repeat: repeat-y;
    background-size: 100% 38px;
}
p {
    line-height: 38px;
}
p:before {
    background: #fff;
    content:"\00a0";
    display: inline-block;
    height: 38px;
    width: 50px;
}
del span {
    color: red;
} 
```

[此处演示](http://jsfiddle.net/W7w9s/6/)- 这仅适用于最新的浏览器，包括 Firefox 和 Chrome。

在 Chrome 中的结果：

![使用梯度的结果](../Images/fdfb63ff1a7e783d8fd06f1ca8c2f72e.png)

* * *

**2.**

如果您对合理的文本感到满意：

```
p,span {
    border-bottom: 4px solid black;
    line-height: 30px;
    text-align: justify;
    text-indent: 50px;
}
p>span {
    padding-bottom: 5px;
    vertical-align: top;
}
del span {
    border-bottom: 0 none;
    color: red;
} 
```

[演示在这里。](http://jsfiddle.net/W7w9s/11/)​行高有一些问题，但应该很容易弄清楚。

在 Chrome 中的结果：

![在此处输入图像描述](../Images/c0acdefa78f6ed41a0bfb487647b6325.png)

* * *

除此之外，恐怕您可能不得不将您的线路包装在一些容器中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T11:23:34.243

使用纯标记可能不会比这更好：**[jsfiddle demo](http://jsfiddle.net/PFbR6/)**。

**编辑**
根据问卷的评论更新：

**预习：**
![在此处输入图像描述](../Images/5320fc5b2447c309f541e0e9e8c698fc.png)

```
p span.indent {
    width: 160px; height: 30px;
    vertical-align: top;
    background: #fff;
    display: inline-block;
}

p span.strike {
    color: #000;
    text-decoration: line-through;
}    

p del {
    color: #ff0000;
    text-decoration: none;
}

p {
    width: 490px;
    font-family: Arial, sans-serif;
    line-height: 30px;
    background: url('http://img84.imageshack.us/img84/1889/63051094.gif') left top;
} 
```

```
<p>
    <span class="indent"></span><span class="strike"><del>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod</del></span> tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation
</p> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T11:12:13.947

**HTML**

```
<div id="content">
<p><span id="strike">some content that you need to display</span>
<span id="underline">Some more content that will come here</span></p>
</div>​ 
```

**CSS**

```
 #content
    {
        height:auto;
        width:200px;
    }
    #content #strike
    {
        text-decoration:line-through;
        color:Red;
    }

    #content #underline
    {
     text-decoration:underline;   
    }

    span
   {
    border-bottom:4px solid Black;
   } 
```

**[现场样品](http://jsfiddle.net/q3CAS/3/)** ​</p>

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T11:03:27.817

围绕您想要格式化的内容创建一个 div，并在 CSS 中使用该 div 来进行必要的格式化。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-06T11:26:24.070

您实际上并不需要每一行都位于其自己的 HTML 元素中以具有底部边框。您可以将边框应用于内联元素，并且边框将应用于元素中的每一行。

为了使删除线颜色与文本颜色不同，您还需要一个额外的 HTML 元素。（虽然[Firefox 已经实现了`-moz-text-decoration-color`](http://www.browsersupport.net/CSS/-moz-text-decoration-color)。）

### HTML

```
<span class="fake-underline">
    <del><span>Final blitz by Obama and Romney as election arrives.</span></del> Candidates attend rallies late into the night as US prepares to go to the polls.
</span> 
```

### CSS

```
.fake-underline {
    line-height: 2;
    border-bottom: solid 5px black;
}
del {
    text-decoration: line-through;
}
del span {
    color: red;
} 
```

*   [http://jsfiddle.net/g5bRc/](http://jsfiddle.net/g5bRc/)

# javascript - 如何在此函数中调用事件 jQuery-File-Upload？

> ID：13249578
> 
> 赞同：0
> 
> 时间：2012-11-06T11:01:25.447
> 
> 标签：javascript, jquery, ajax, blueimp

我想在上传文件之前先从 api 检查

```
$('.file_upload_button_wrapper').live('click', function () {
        // check here
        $.ajax({
            url: '/?app=files&getfile=ajax%2Fupload.php',
            dataType: "json",
            success: function(data) {
                //$('.result').html(data);

                if (data.data.message =="DAT"){

                    $.confirm({
                        'title'     : 'Lỗi',
                        'message'   : 'Tài khoản đã hết hạn sử dụng. <br />Bạn có muốn gia hạn để tiếp tục upload ?',
                        'buttons'   : {
                            'Yes'   : {
                                'class' : 'blue',
                                'action': function(){
                                    window.location="http://id.kgp.vn";

                                }
                            },
                            'No'    : {
                                'class' : 'gray',
                                'action': function(){}  // Nothing to do in this case. You can as well omit the action property.
                            }
                        }

                    });

                }

                else{

                    $('.file_upload_start').trigger('click');
                }

            }

        });
 // $('.file_upload_start').trigger('click');
return false;
    }); 
```

我有打开文件和上传的功能。

```
$(function () {
        $('.file_upload_start').fileupload({
            dropZone:$('#content'), // restrict dropZone to content div
            add:function (e, data) {
                var files = data.files;
                var totalSize = 0;

                if (files) { 
```

……

当它成功时在 ajax 中调用此函数时我遇到问题，因为 ajax 先检查然后再上传文件。

`if I call $('.file_upload_start').trigger('click');`在成功的ajax它不起作用但我打电话

`$('.file_upload_button_wrapper').live('click', function () { }`

有用。

如何在ajax中调用这个事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T13:30:05.407

我已经通过在 ajax 中分配解决了这个问题，`async:False`并且效果很好。

# php - 如何在 linux 服务器上升级 php？

> ID：13249580
> 
> 赞同：0
> 
> 时间：2012-11-06T11:01:37.277
> 
> 标签：php, linux, centos

我正在使用 php 版本 5.1.6 在我的 Linux 服务器上运行 Joomla 网站。如何将 PHP 版本升级到 5.3，同时确保我的 Joomla 网站保持不变。

服务器正在运行 Centos

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T11:08:44.243

如果您没有通过官方存储库获得该版本（请咨询 yum），您可以添加原子存储库。到目前为止，它们在我看来足够可靠（我现在在生产服务器上使用它们几年了）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T11:07:35.513

对于 Joomla 测试：

使用版本 5.3 进行本地 PHP 安装（虚拟机上的 IE）。尝试让您的 Joomla 安装运行它，如果它有效？升级服务器上的 PHP 版本。

如果您自己拥有服务器并拥有对其的 shell 访问权限，则可以使用它`yum`来升级您的 PHP 安装。这是一个将 PHP 5.1 升级到 5.2 的指南，它应该可以帮助您了解升级到 PHP 5.3 的基本知识：

[http://wiki.centos.org/HowTos/PHP_5.1_To_5.2](http://wiki.centos.org/HowTos/PHP_5.1_To_5.2)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T11:07:49.053

我从未使用过 Centos，但由于它只是 RHEL 的重建，您可以使用 YUM 包管理器来完成它。当然，您必须对服务器具有某种形式的 SSH 访问权限，否则您将不得不致电您的提供商为您完成此操作。

阅读并遵循此操作指南：[http ://chrisjean.com/2011/06/24/upgrade-php-5-1-or-5-2-to-5-3-on-centos/](http://chrisjean.com/2011/06/24/upgrade-php-5-1-or-5-2-to-5-3-on-centos/)

PS：不要忘记在此处阅读 PHP 5.3.x 中已弃用的功能列表[http://php.net/manual/en/migration53.deprecated.php](http://php.net/manual/en/migration53.deprecated.php)

# objective-c - 在 Objective-C 中解压缩 Multi Archive 文件

> ID：13249590
> 
> 赞同：2
> 
> 时间：2012-11-06T11:02:29.663
> 
> 标签：objective-c, ios, unzip

我想在我的 iPad 应用程序中解压缩 Zip 文件。为了做到这一点，我在不同的主题（在 stackoverflow ^^）中找到了 minizip 包。但我的问题是如何解压缩多存档，如 .zip.001、.zip.002 等...？

如果您需要更多信息，请询问我。

提前感谢您的考虑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T11:45:48.507

编辑：如果文件命名是`.zip.001`那么它实际上不是一个多文件 zip 存档。该文件被简单地分成几个文件，您唯一需要做的就是将它们放在一起。多文件 zip 存档将被命名`.z01` `.z02` `.zip`

如果您已经有一个可以读取 zip 存档的工作代码，那么通过读取多文件存档的能力来扩展它应该很简单，请参考：

[http://www.pkware.com/documents/casestudies/APPNOTE.TXT](http://www.pkware.com/documents/casestudies/APPNOTE.TXT)

> 8.2.1 文件拆分是跨越的新派生。
> 拆分遵循与跨越相同的分段过程，但是，它不需要将每个分段写入唯一的可移动介质，而是支持将所有分段放置到本地或不可移动位置，例如文件系统、本地驱动器、文件夹等。
> 
> 8.3.3 拆分 ZIP 文件通常被写入相同的位置，如果使用跨区名称格式，则会发生名称冲突，因为每个段将驻留在同一驱动器上。为避免名称冲突，拆分档案的名称如下。
> 
> 段 1 = 文件名
> .z01 段 n-1 = 文件名.z(n-1)
> 段 n = 文件名.zip
> 
> 8.3.4 最后一段使用.ZIP扩展名，支持快速读取中心目录。段号 n 应该是十进制值。

# javascript - jQuery 延迟 Ajax 调用和返回 Ajax 响应

> ID：13249592
> 
> 赞同：0
> 
> 时间：2012-11-06T11:02:31.807
> 
> 标签：javascript, ajax, jquery, deferred

我现在在 jQuery 中进行同步 AJAX 调用。父函数有什么方法可以在保持异步调用的同时返回 Ajax 响应。我能找到的唯一解决方案是使用回调函数。我真的不想编写回调函数，因为我打算将此对象放入变量中。

例如

```
var ajax = serviceinterface.rawServiceCall(“http://user.myservice.com/endpoint”, “post”, {name : “xyz”}); 
```

我可能也想这样使用它

```
$.when(serviceinterface.rawServiceCall(endpoint1, “get”), serviceinterface.rawSCACall(endpoint2, ‘get’)).done(function(){
    // do something here
}); 
```

这是我的函数代码，同步调用工作得很好，但我想进行异步调用。

```
rawServiceCall : function(endpoint, type, payload) {
                     type = typeof type !== 'undefined' ? type : "get";
                     payload = typeof type !== 'undefined' ? payload : null;

                     return $.ajax({
                           url : endpoint,
                           type : type,
                           data : payload,
                           async : false,
                           dataType : 'json',
                           headers: {
                                 accept : "application/json"
                           },
                           success : function(data){
                                 return data;
                           }
                    });

              } 
```

PS - 我不想浪费 CPU 周期或让网页的其他部分等待它首先加载。或者有什么更好的方法呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T09:14:52.193

简单回答是不。行为将是完全同步的或完全异步的。

但我认为您没有问题，因为您的代码是您寻求的解决方案的 99%。您只需要知道如何评估回调`data`中的返回值。`.done()`

答案是回调接受的参数与定义为 ajax 选项的`.done()`回调中的参数相同，即。,和.`success``data``textStatus``jqXHR`

```
rawServiceCall: function(endpoint, type, payload) {
    type = type || "get";
    payload = payload || null;
    return $.ajax({
        url: endpoint,
        type: type,
        data: payload,
        async: false,
        dataType: 'json',
        headers: {
            accept: "application/json"
        }
    });
}

serviceinterface.rawServiceCall(endpoint1).done(function(data, textStatus, jqXHR) {
    //do something here
});

$.when(serviceinterface.rawServiceCall(endpoint1), serviceinterface.rawServiceCall(endpoint2)).done(function(data, textStatus, jqXHR) {
    // do something here
}); 
```

`error`和回调也是如此`complete`，因此 jQuery.ajax 承诺的回调等价物的完整列表是：

*   `.done(function(data, textStatus, jqXHR){...})`相当于`success: function(data, textStatus, jqXHR){...}`

*   `.fail(function(jqXHR, textStatus, errorThrown){...})`相当于`error: function(jqXHR, textStatus, errorThrown){...}`

*   `.always(function((jqXHR, textStatus){...})`相当于`complete: function((jqXHR, textStatus){...}`

每个 jQuery Promise 对象都有`.done()`,`.fail()`和`.always()`方法，但是这些方法的回调（如果有的话）所采用的参数取决于原始 Deferred （从中派生 Promise）被解析/拒绝时传递的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T10:08:07.960

您不能在**不**浪费 CPU 周期的情况下将异步方法转换为 JavaScript 中的同步。

停止执行代码的唯一方法是使用 alert()。在 JS 中你从不睡觉，你只是闲着。

# android - 如何在具有可聚焦视图（例如按钮）的列表视图中获得点击反馈

> ID：13249598
> 
> 赞同：2
> 
> 时间：2012-11-06T11:02:42.187
> 
> 标签：android, view

我有一个显示自定义列表视图项目的列表视图。我在每个列表项中都有一个可聚焦的视图，我需要能够单击列表视图项本身的按钮。我通过在列表视图适配器中添加一个 ClickEvent 来实现这一点。现在可以单击两个视图，问题是单击时按钮会改变颜色，但列表视图项不会。更改颜色是指单击视图时视图更改为的不同颜色。

是否有可能让这种视觉反馈颜色恢复保持按钮可点击？

PD 为了添加更多信息，我在按钮中添加了 android:focusable="false" 也没有任何运气。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-08-29T20:49:32.873

我认为 drawSelectorOnTop 可能是您正在寻找的。当您使用自己的 OnItemClickListener 时，默认单击列表会被覆盖，因此即使您设置 clickable=true，也不会给您单击反馈，但您可以指定 AbsListView（ListView 和 GridView 的基类）以仍然绘制选择器：

```
<ListView
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:drawSelectorOnTop="true" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T11:27:59.460

```
listView = (ListView) findViewById(R.id.listView1);
        listView.setOnItemClickListener(new AdapterView.OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> adapterView, View view, int i, long l) {
                YourAdapterClass object = (YourAdapterClass)adapterView.getItemAtPosition(i);
            }
        }); 
```

# android - 如何在文件上传到 ftp 服务器时使用 AsyncTask

> ID：13249599
> 
> 赞同：0
> 
> 时间：2012-11-06T11:02:43.923
> 
> 标签：android, ftp, android-asynctask, uploading

我使用 FTPClient 将文件（由用户选择）上传到我的 FTPServer。并且用于上传的代码正在工作。:) 但是当我为“上传...”对话框添加 AsyncTask 时，该对话框向用户显示它正在上传。它在我的应用程序中显示了上传对话框，然后它崩溃了，并且上传对话框没有消失....

来自 LogCat 的以下错误：

```
11-06 12:01:05.153: I/System.out(27121):    ARGUMENT :: /storage/sdcard0/data-app/Z29sb2NrZXJpbmRlcGVuZGVudHZlcnNpb24
11-06 12:01:05.188: D/dalvikvm(27121):      GC_CONCURRENT freed 107K, 9% free 12896K/14151K, paused 1ms+1ms, total 13ms
11-06 12:01:13.923: I/System.out(27121):    status :: 211-Status of 'ProFTPD'

11-06 12:01:13.923: I/System.out(27121):    Connected from 109.164.221.167 (109.164.221.167)

11-06 12:01:13.923: I/System.out(27121):    Logged in as ftp031220

11-06 12:01:13.923: I/System.out(27121):    TYPE: BINARY, STRUcture: File, Mode: Stream

11-06 12:01:13.923: I/System.out(27121):    No data connection

11-06 12:01:13.923: I/System.out(27121):    211 End of status

11-06 12:01:25.988: W/System.err(27121):    java.lang.RuntimeException: Can't create handler inside thread that has not called Looper.prepare()
11-06 12:01:25.988: W/System.err(27121):    at android.os.Handler.<init>(Handler.java:121)
11-06 12:01:25.988: W/System.err(27121):    at android.app.Dialog.<init>(Dialog.java:107)
11-06 12:01:25.988: W/System.err(27121):    at android.app.AlertDialog.<init>(AlertDialog.java:114)
11-06 12:01:25.993: W/System.err(27121):    at android.app.AlertDialog$Builder.create(AlertDialog.java:913)
11-06 12:01:25.993: W/System.err(27121):    at android.app.AlertDialog$Builder.show(AlertDialog.java:931)
11-06 12:01:25.993: W/System.err(27121):    at com.mseiz.give.your.apps.upload.upload(upload.java:124)
11-06 12:01:25.993: W/System.err(27121):    at com.mseiz.give.your.apps.upload$DownloadFilesTask.doInBackground(upload.java:153)
11-06 12:01:25.993: W/System.err(27121):    at com.mseiz.give.your.apps.upload$DownloadFilesTask.doInBackground(upload.java:1)
11-06 12:01:25.993: W/System.err(27121):    at android.os.AsyncTask$2.call(AsyncTask.java:287)
11-06 12:01:25.993: W/System.err(27121):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
11-06 12:01:25.993: W/System.err(27121):    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
11-06 12:01:25.993: W/System.err(27121):    at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
11-06 12:01:25.993: W/System.err(27121):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
11-06 12:01:25.993: W/System.err(27121):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
11-06 12:01:25.993: W/System.err(27121):    at java.lang.Thread.run(Thread.java:856) 
```

> ==== 点击项目... ====

```
 @Override
 protected void onListItemClick(ListView l, View v, int position, long id) {
  // TODO Auto-generated method stub
  File file = new File(path.get(position));

  if (file.isDirectory())
  {
   if(file.canRead()){
    getDir(path.get(position));
   }else{
    new AlertDialog.Builder(this)
     .setIcon(R.drawable.ic_launcher)
     .setTitle("[" + file.getName() + "] folder can't be read!")
     .setPositiveButton("OK", null).show(); 
   } 
  }else {
      new DownloadFilesTask().execute(path.get(position), file.getName());   
    }
 } 
```

> ==== 异步任务 ====

```
 private class DownloadFilesTask extends AsyncTask<String, Integer, String> {
     ProgressDialog dialog;

     @Override
     protected void onPreExecute() {
         dialog = new ProgressDialog(upload.this);
         dialog.setIcon(R.drawable.ic_launcher);
         dialog.setTitle("Datei wird hochgeladen...");
         dialog.setMessage("Bitte warten...");
         dialog.setIndeterminate(true);
         dialog.show();
     }

     protected String doInBackground(String... args){
         System.out.println("ARGUMENT :: " + args[0]);
         upload(args[0], args[1]);
         return root;

     }

    protected void onPostExecute(Void unused) {
         dialog.dismiss();
     }
 } 
```

> ==== 上传功能 ====

```
 public void upload(String upload, String datei)
{
    try {
        connectFTP("176.28.25.46");

    // Prepare file to be uploaded to FTP Server
    File file = new File(upload);
    FileInputStream ifile = new FileInputStream(file);

    // Upload file to FTP Server
    if(ftpClient.storeFile("/subdomains/giveyourapps/httpdocs/apps/"+datei, ifile)){
        new AlertDialog.Builder(this)
        .setIcon(R.drawable.ic_launcher)
        .setTitle("Datei wurde hochgeladen!")
        .setPositiveButton("OK", null).show(); 
    } else {
        new AlertDialog.Builder(this)
        .setIcon(R.drawable.ic_launcher)
        .setTitle("Fehler!")
        .setPositiveButton("OK", null).show(); 
    }
    ftpClient.disconnect();
}catch (Exception e) {
    e.printStackTrace();
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T11:07:33.547

您不能在任务中显示对话框。事实上，您不能在主 (UI) 线程之外执行任何 UI 更改。有关更多信息，请参阅[进程和线程参考](http://developer.android.com/guide/components/processes-and-threads.html#Threads)。

在 you`Asynctask`中，您应该使用`publishProgress()`和`onProgressUpdate()`来执行 UI 更新。

阅读[AsyncTask 参考](http://developer.android.com/reference/android/os/AsyncTask.html)以获取更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-25T19:45:43.510

尝试这个

```
public class loadVideo extends AsyncTask<Void, Integer, Void> {

    int progress = 0;
    long duration;
    Notification notification;
    NotificationManager notificationManager;
    int id = 10;
    long pk;
    protected void onPreExecute() {
        Toast.makeText(getApplicationContext(),
                "Check upload Status in the Notification Bar", 1).show();
        Intent intent = new Intent();
        final PendingIntent pendingIntent = PendingIntent.getActivity(
                getApplicationContext(), 0, intent, 0);
        notification = new Notification(R.drawable.ic_launcher,
                "Uploading file", System.currentTimeMillis());
        notification.flags = notification.flags
                | Notification.FLAG_ONGOING_EVENT;
        notification.contentView = new RemoteViews(getApplicationContext()
                .getPackageName(), R.layout.upload_progress_bar);
        notification.contentIntent = pendingIntent;
        notification.contentView.setImageViewResource(R.id.imageView1,
                R.drawable.ic_launcher);
        notification.contentView.setTextViewText(R.id.textView1,
                "Uploading...");
        // notification.contentView.setProgressBar(R.id.progressBar1, 100,
        // progress[0], false);
        getApplicationContext();
        notificationManager = (NotificationManager) getApplicationContext()
                .getSystemService(Context.NOTIFICATION_SERVICE);
        notificationManager.notify(id, notification);
        System.out.println("DOMAIN...+" + str_edt_domain_name
                + "DOMAINPASSWORD..." + str_edt_username + "PASSOWRD"
                + str_edt_password);
    }

    @Override
    protected Void doInBackground(Void... params) {
        int count = 0;
        FTPClient ObjFtpCon = new FTPClient();
        // Toast.makeText(con, "FTPasync doInBackground() is called"
        // ,Toast.LENGTH_SHORT).show();
        try {
            runOnUiThread(new Runnable() {
                public void run() {
                    System.out.println("man 0");
                    // bar.setProgress(0);
                    // real_time.setText(0 + " secs");
                    // test_avg.setText(0+ " kbps");
                    // peak.setText(0+" kbps");
                }
            });
            // updateUI(pp, R.drawable.pause);
            // ObjFtpCon.connect("ftp.customhdclips.com");
            ObjFtpCon.connect("domainname");
            // updateUI(status, "Connecting");
            System.out.println("man connecting");

            // if (ObjFtpCon.login("fstech@customhdclips.com", "fstech123"))
            // {
            if (ObjFtpCon.login("username", "password")) {
                // updateUI(status, "Connected");
                System.out.println("man CONNECTED");

                // toast("Connected to FTP Server : ftp.customhdclips.com");
                ObjFtpCon.enterLocalPassiveMode(); // important!
                //ObjFtpCon.cwd("/");// to send the FTP CWD command to the
                                    // server, receive the reply, and return
                                    // the reply code.

                // ObjFtpCon.connect("ftp."+map.get("url").toString());
                // updateUI(status, "Connecting");
                //
                // ObjFtpCon.login(map.get("username").toString(),
                // map.get("password").toString());
                // ObjFtpCon.enterLocalPassiveMode();
                // ObjFtpCon.cwd("/var/www/html/BevdogAnd");

                ObjFtpCon.setFileType(FTP.BINARY_FILE_TYPE);

                final long started = System.currentTimeMillis();
                long sleepingTime = 0;
                // String sourceFileUri
                // =extStorageDirectory+"/zkfile"+filename;
                File file = new File(path);
                long fileSize = file.length();
                int sentBytes = 0;
                InputStream inputStream = new FileInputStream(file);

                System.out.println("Start uploading second file");
                OutputStream outputStream = ObjFtpCon
                        .storeFileStream("Meera Nandan at 60th Filmfare Awards 2013 _99_.jpg");
                byte[] bytesIn = new byte[512];
                int read = 0;
                while ((read = inputStream.read(bytesIn)) != -1) {
                    //updateUI(status, "Uploading");
                    System.out.println("man Uploading");

                    outputStream.write(bytesIn, 0, read);
                    sentBytes += read;
                    final int progress = (int) ((sentBytes * 100) / fileSize);
                    final long speed = sentBytes;

                    duration = ((System.currentTimeMillis() - started) - sleepingTime) / 1000;
                    runOnUiThread(new Runnable() {
                        public void run() {

                        //  bar.setProgress(progress);
                            if (duration != 0) {
                                //   test_avg.setText((((speed /
                                // duration)*1000)*0.0078125) + " kbps");
  //                                    test_avg.setText((speed / duration) / 1024
//                                          + " kbps");
                            System.out.println("MAN spped"+(speed / duration) / 1024
                                        + " kbps"+"and "+progress);
                                if (pk <= (speed / duration) / 1024) {
                                    pk = (speed / duration) / 1024;
                                }
                                /*
                                 * if (pk <= ((speed /
                                 * duration)*1000)*0.0078125) { pk =
                                 * (long)(((speed /
                                 * duration)*1000)*0.0078125); }
                                 */
                                // peak.setText(pk + " kbps");

                            }
                        }
                    });
                }
                inputStream.close();
                outputStream.close();

                boolean completed = ObjFtpCon.completePendingCommand();
//                  updateUI(status, "Completed");
                System.out.println("MAN completed");
                if (completed) {

                }

            }

            /*-------------------------------------------------------------*/
            /*
             * URL url = new URL(map.get("url").toString()); URLConnection
             * conexion = url.openConnection(); conexion.connect();
             * updateUI(status, "Connected");
             * 
             * final int lenghtOfFile = conexion.getContentLength();
             * InputStream input = new
             * BufferedInputStream(url.openStream()); OutputStream output =
             * new FileOutputStream(
             * Environment.getExternalStorageDirectory() + File.separator +
             * Info.getInfo(con).HTTP_DOWNLOAD_FILE_NAME); byte data[] = new
             * byte[1024]; long total = 0; final long started =
             * System.currentTimeMillis(); long sleepingTime= 0;
             * System.out.println("started time --"+started);
             * updateUI(status, "Downloading"); while ((count =
             * input.read(data)) != -1) { while (sleep) {
             * Thread.sleep(1000); sleepingTime +=1000; } total += count;
             * final int progress = (int) ((total * 100) / lenghtOfFile);
             * final long speed = total; duration =
             * ((System.currentTimeMillis() - started)-sleepingTime) / 1000;
             * runOnUiThread(new Runnable() { public void run() {
             * bar.setProgress(progress);
             */

            /*-----------------------------------------------------------------------*/

            else {
                System.out.println("password entered is incorrect");
                // Toast.makeText(con,
                // "Username or/and password is incorrect",
                // Toast.LENGTH_SHORT).show();
            }
        } catch (Exception e) {
            e.printStackTrace();
            // toast(e.getLocalizedMessage());
        }

        try {
            ObjFtpCon.logout();
            ObjFtpCon.disconnect();
        } catch (IOException e) {
            e.printStackTrace();
            // toast(e.getLocalizedMessage());
        }
        return null;
    }

    // @Override
    // protected void onProgressUpdate(Integer... progress) {
    //
    // Intent intent = new Intent();
    // final PendingIntent pendingIntent = PendingIntent.getActivity(
    // getApplicationContext(), 0, intent, 0);
    // notification = new Notification(R.drawable.ic_launcher,
    // "Uploading file", System.currentTimeMillis());
    // notification.flags = notification.flags
    // | Notification.FLAG_ONGOING_EVENT;
    // notification.contentView = new RemoteViews(getApplicationContext()
    // .getPackageName(), R.layout.upload_progress_bar);
    // notification.contentIntent = pendingIntent;
    // notification.contentView.setImageViewResource(R.id.imageView1,
    // R.drawable.ic_launcher);
    // notification.contentView.setTextViewText(R.id.textView1,
    // "Uploading...");
    // notification.contentView.setProgressBar(R.id.progressBar1, 100,
    // progress[0], false);
    // getApplicationContext();
    // notificationManager = (NotificationManager) getApplicationContext()
    // .getSystemService(Context.NOTIFICATION_SERVICE);
    // notificationManager.notify(id, notification);
    // }

    protected void onPostExecute(Void result) {
        System.out.println("status_string.." + status_string);
        Notification notification = new Notification();
        Intent intent1 = new Intent(MainActivity.this, MainActivity.class);
        final PendingIntent pendingIntent = PendingIntent.getActivity(
                getApplicationContext(), 0, intent1, 0);
        int icon = R.drawable.ic_launcher; // icon from resources
        CharSequence tickerText = "Video Uploaded Successfully"; // ticker-text
        CharSequence contentTitle = getResources().getString(
                R.string.app_name); // expanded message
        // title
        CharSequence contentText = ""; // expanded
        if (upload_result == true && status_string.equals("1")) {

            contentText = "Video Uploaded Successfully";
            // message
        } else {
            contentText = "Video Uploaded Failed";

        }
        long when = System.currentTimeMillis(); // notification time
        Context context = getApplicationContext(); // application
                                                        // Context
        notification = new Notification(icon, tickerText, when);
        notification.flags |= Notification.FLAG_AUTO_CANCEL;
        notification.setLatestEventInfo(context, contentTitle, contentText,
                pendingIntent);
        String notificationService = Context.NOTIFICATION_SERVICE;
        notificationManager = (NotificationManager) context
                .getSystemService(notificationService);
        notificationManager.notify(id, notification);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T11:13:32.743

您不能在上传（）中显示对话框。该方法是从 doInBackground 中调用的，并且该方法在后台线程中运行，而不是在 UI 线程中。

查看 AsyncTask 文档，了解哪些 AsyncTask 方法在哪个线程中执行以及在任一线程中允许和禁止什么。

# c++ - 如何比较 strstr(LPCWSTR, CHAR*);

> ID：13249606
> 
> 赞同：2
> 
> 时间：2012-11-06T11:03:00.900
> 
> 标签：c++, c, winapi, visual-c++

```
LPCWSTR location_url;
m_spWebBrowser->get_LocationURL((BSTR*)&location_url); 
```

我如何`LPCWSTR` 与`const char *`in进行比较`strstr`？

例子：

```
if(strstr((location_url, ".html")) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T11:11:18.187

您也可以将目标扩展设为宽字符串并使用[wcsstr](http://msdn.microsoft.com/en-us/library/z9da80kz%28v=vs.80%29.aspx)

```
wchar_t* ext = L".html";
if (wcsstr(location_url, ext)) 
```

# makefile - 如何在 makefile 中使用 LDFLAGS

> ID：13249610
> 
> 赞同：80
> 
> 时间：2012-11-06T11:03:10.580
> 
> 标签：makefile, ldflags

我是 Linux 操作系统的新手。我正在尝试`.c`使用 makefile 编译文件。必须链接数学库。我的生成文件如下所示：

```
CC=gcc
CFLAGS=-Wall -lm

all:client

.PHONY: clean
clean:
    rm *~ *.o client 
```

当我运行时`make`，我收到以下错误：

```
"undefined reference to rint" 
```

所以它无法链接数学库。

但是当我使用显式编译时

```
gcc client.c -lm -o client 
```

它成功编译。

那么我应该如何更改我的 makefile 以使其正常工作。我已经尝试添加`LDFLAGS=-lm`. 但我得到同样的错误。

我还应该补充一点，当我运行时`make`，它会扩展为

```
gcc -Wall -lm client.c -o client 
```

（请注意，当我最后`gcc`明确运行`-lm`时，它可以工作）。

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-11-06T11:29:45.887

您的链接器（ld）显然不喜欢 make 排列 GCC 参数的顺序，因此您必须稍微更改 Makefile：

```
CC=gcc
CFLAGS=-Wall
LDFLAGS=-lm

.PHONY: all
all: client

.PHONY: clean
clean:
    $(RM) *~ *.o client

OBJECTS=client.o
client: $(OBJECTS)
    $(CC) $(CFLAGS) $(OBJECTS) -o client $(LDFLAGS) 
```

在定义*客户端*`$(LDFLAGS)`目标的行中，根据需要更改顺序。

* * *

## 回答 #2

> 赞同：55
> 
> 时间：2012-11-06T15:01:02.370

在更复杂的构建场景中，通常将编译分解为多个阶段，首先进行编译和组装（输出到目标文件），然后将目标文件链接到最终的可执行文件或库中——这样可以避免在编译时重新编译所有目标文件。他们的源文件没有改变。这就是为什么在你放入链接标志`-lm`时包含它不起作用`CFLAGS`（`CFLAGS`在编译阶段使用）。

要链接的库的约定是将它们放在其中一个`LOADLIBES`或中`LDLIBS`（GNU make 包括两者，但您的里程可能会有所不同）：

```
LDLIBS=-lm 
```

这应该允许您继续使用内置规则，而不必编写自己的链接规则。对于其他品牌，应该有一个输出内置规则的标志（对于 GNU 品牌，这是`-p`）。如果您的 make 版本没有内置的链接规则（或者如果它没有`-l`指令的占位符），您需要编写自己的：

```
client.o: client.c
    $(CC) $(CFLAGS) $(CPPFLAGS) $(TARGET_ARCH) -c -o $@ $<

client: client.o
    $(CC) $(LDFLAGS) $(TARGET_ARCH) $^ $(LOADLIBES) $(LDLIBS) -o $@ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-10T04:07:09.703

似乎链接标志的顺序在旧版本的 gcc 中不是问题。例如`gcc (GCC) 4.4.7 20120313 (Red Hat 4.4.7-16)`，Centos-6.7 在 inputfile 之前对链接器选项感到满意；但 ubuntu 16.04 的 gcc`gcc (Ubuntu 5.3.1-14ubuntu2.1) 5.3.1 20160413`不允许。

它不仅仅是 gcc 版本，我对发行版有所了解

# javascript - 如何让 TinyMce 用内联样式替换不推荐使用的标签？

> ID：13249612
> 
> 赞同：2
> 
> 时间：2012-11-06T11:03:18.663
> 
> 标签：javascript, tinymce

我是 tinyMce 的菜鸟。我想实现 tinymce，以便将不推荐使用`strong,b,i,em`的标签替换为相应的内联样式，如`'font-weight:bold', etc`.

我尝试使用自定义格式

```
formats : {
     bold: {inline : 'span', 'styles' : 'font-weight:bold'}
} 
```

但是当我尝试应用粗体格式时，出现错误：

```
Uncaught TypeError: Object 0 has no method 'replace' 
(anonymous function) tiny_mce.js:1
e.create.run tiny_mce.js:1
e.create.setStyle tiny_mce.js:1
(anonymous function) tiny_mce.js:1
c.each tiny_mce.js:1
ab tiny_mce.js:1
an tiny_mce.js:1
Y tiny_mce.js:1
F tiny_mce.js:1
s tiny_mce.js:1
u.Bold,Italic,Underline,Strikethrough,Superscript,Subscript tiny_mce.js:1
r tiny_mce.js:1
k.create.execCommand tiny_mce.js:1
i.onclick tiny_mce.js:1
(anonymous function) tiny_mce.js:1
j tiny_mce.js:1
y tiny_mce.js:1 
```

这是一个[**JSFIDDLE**](http://jsfiddle.net/YPaEv/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T11:13:43.570

这应该这样做：

```
 formats : {
          bold : {inline : 'span', styles : {fontWeight : 'bold'}},
    } 
```

# java - 无法读取 jar 文件中的图像

> ID：13249613
> 
> 赞同：2
> 
> 时间：2012-11-06T11:03:20.643
> 
> 标签：java, jar, nullpointerexception, embedded-resource

当我构建一个 jar 文件并运行它时，由于找不到 imageicon，它显示一个空指针异常

```
new ImageIcon(getClass().getClassLoader().getResource("icons/exit.png"))); 
```

这是我运行 jar 文件时遇到的错误

```
Exception in thread "main" java.lang.NullPointerException
        at javax.swing.ImageIcon.<init>(Unknown Source)
        at mediaplayer.MediaPlayer.buildtoolbar(MediaPlayer.java:130)
        at mediaplayer.MediaPlayer.<init>(MediaPlayer.java:81)
        at mediaplayer.MediaPlayer.main(MediaPlayer.java:464) 
```

但是当我在 NetBeans 中运行该项目时，它运行良好

这是我列出 jar 中的所有文件时的输出

```
META-INF/
META-INF/MANIFEST.MF
helliker/
helliker/id3/
icons/
mediaplayer/
Thumbs.db
exit.png
ff1.png
helliker/id3/BinaryParser.class
helliker/id3/CorruptHeaderException.class
helliker/id3/ID3Exception.class
helliker/id3/ID3FieldDataException.class
helliker/id3/ID3Tag.class
helliker/id3/ID3v1Tag.class
helliker/id3/ID3v2ExtendedHeader.class
helliker/id3/ID3v2Footer.class
helliker/id3/ID3v2FormatException.class
helliker/id3/ID3v2Frame.class
helliker/id3/ID3v2Frames.class
helliker/id3/ID3v2Header.class
helliker/id3/ID3v2Tag.class
helliker/id3/MP3Comparator.class
helliker/id3/MP3File.class
helliker/id3/MP3FileFilter.class
helliker/id3/MPEGAudioFrameHeader.class
helliker/id3/NoMPEGFramesException.class
helliker/id3/NullsoftID3GenreTable.class
helliker/id3/Playlist.class
helliker/id3/PlaylistException.class
helliker/id3/XingVBRHeader.class
icons/Thumbs.db
icons/exit.png
icons/ff1.png
icons/label.jpg
icons/openpl.gif
icons/pause1.png
icons/play1.png
icons/playlist.png
icons/rr.png
icons/rr1.PNG
icons/stop.png
label.jpg
mediaplayer/MediaPlayer$1.class
mediaplayer/MediaPlayer$PlaylistFilter.class
mediaplayer/MediaPlayer.class
mediaplayer/PlaylistManager$1.class
mediaplayer/PlaylistManager$MP3Filter.class
mediaplayer/PlaylistManager$PlaylistFilter.class
mediaplayer/PlaylistManager.class
mediaplayer/Settings.class
mediaplayer/TagEditor.class
mediaplayer/Thumbs.db
openpl.gif
pause1.png
play1.png
playlist.png
rr.png
rr1.PNG 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T11:25:34.820

jar文件是如何构建的问题中缺少一些信息，但目录布局如下

```
├── bin
│   ├── com
│   │   └── example
│   │       └── ImageIconTest.class
│   └── icons
│       └── exit.png
└── src
    ├── MANIFEST.MF
    └── com
        └── example
            └── ImageIconTest.java 
```

和下面的代码`ImageIconTest.java`

```
package com.example;
import javax.swing.ImageIcon;

public class ImageIconTest {
   public void run() {
      ImageIcon ii = new ImageIcon(getClass().getClassLoader().getResource("icons/exit.png"));
      System.out.println(ii);
   }
   public static void main(String[] args) {
      ImageIconTest app = new ImageIconTest();
      app.run();
   }
} 
```

您可以从文件系统正确运行示例

```
$ java -classpath bin com.example.ImageIconTest 
```

使用具有以下内容的 MANIFEST.MF 文件：

```
Manifest-Version: 1.0
Main-Class: com.example.ImageIconTest 
```

您可以将其打包成可执行的 jar 文件并从 jar 文件中运行它：

```
$ jar cvfm app.jar src/MANIFEST.MF -C bin .
$ java -jar app.jar 
```

两种方法都可以正常工作，重要的细节是**确保图标目录包含在正确位置的 jar 文件中**。

列出 jar 文件内容时，应如下所示：

```
 0 Tue Nov 06 12:27:56 CET 2012 META-INF/
107 Tue Nov 06 12:27:56 CET 2012 META-INF/MANIFEST.MF
  0 Tue Nov 06 12:27:56 CET 2012 com/
  0 Tue Nov 06 12:27:56 CET 2012 com/example/
950 Tue Nov 06 12:27:56 CET 2012 com/example/ImageIconTest.class
  0 Tue Nov 06 12:00:36 CET 2012 icons/
873 Tue Nov 06 12:00:36 CET 2012 icons/exit.png 
```

注意图标目录的位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T14:39:27.253

当`MediaPlayer`在包中 `mediaplayer`调用嵌入式资源时发生异常`"icons/exit.png"`。这将解决以下路径：

```
mediaplayer/icons/exit.png 
```

我猜那不是路径，*实际上是*.

```
icons/exit.png 
```

* * *

这就是为什么`String`需要**`"/icons/exit.png"`**- 注意**`/`前缀。**

`/`前面的通知`String`类加载器我们的意思是它从类路径的根目录中搜索资源，而不是从调用它的类的包中搜索资源。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T08:37:17.453

非常感谢大家。我想出了答案

```
button = new JButton(new ImageIcon(getClass().getResource("/icons/playlist.png"))); 
```

我删除了 ClassLoader() 并且它起作用了，但我只是不知道为什么。有人可以解释一下这背后的理论吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T11:34:07.543

此代码运行良好：

```
ClassLoader cl = getClass().getClassLoader();
InputStream stream = cl.getResourceAsStream( "hpms/study/Starbucks.jpg" );
if( stream == null ) System.err.println( "resource not found" );
BufferedImage image = ImageIO.read( stream );
ImageIcon icon = new ImageIcon( image ); 
```

# javascript - 如何在 RadMultiPage 中的 RadPageView 中获取元素？

> ID：13249615
> 
> 赞同：0
> 
> 时间：2012-11-06T11:03:21.300
> 
> 标签：javascript, html, telerik

我有这样的html代码：

```
<telerik:RadMultiPage ID="MultiPage" runat="server">   
   <telerik:RadPageView ID="TablePage" runat="server">  
      <Cx:DataObjectDefinitionTree ID="TableOverview"   runat="server"/>  
   </telerik:RadPageView>  
</telerik:RadMultiPage> 
```

我可以通过以下方式获得 Multipage：`var multiPage = $find('<%= MultiPage.ClientID %>');`
但我无法获得 the`PageView`或`DataObjectDefinitionTree`.
虽然我需要`DataObjectDefinitionTree`.
我试图`PageView`从 the中获取`MultiPage`，然后`DataObjectDefinitionTree`从 that 中获取，但这也不起作用。

我怎样才能`DataObjectDefinitionTree`进入 Javascript 中的变量？

编辑：我只想调用两个方法`DataObjectDefinitionTree`（它与 a 基本相同`RadTreeView`）。
这些方法是`_getAllItems()`和`get_selectedNode()`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T15:22:48.933

Telerik 的客户端 API 非常完整，[请](http://www.telerik.com/help/aspnet-ajax/tabstrip-mutlipage-client-object.html)自行查看：

```
var multiPage = $find('<%= MultiPage.ClientID %>');
var pageView = multiPage.findPageViewByID("TablePage"); 
```

至于`DataObjectDefinitionTree`，您应该能够获取 pageView 的 DOM 元素：

```
var domElement = pageView.get_element();
dataObjDefTree = domElement.getElementById('<%=TableOverview.ClientID %>'); 
```

或者你可以尝试这样的事情：

```
var dataObjDefTree = document.getElementById('<%=TableOverview.ClientID %>'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T16:46:15.593

好的，这里的主要问题是如何`WebUserControl`从父页面访问您的 javascript。您需要`DataObjectDefinitionTree`使用与您的 UserControl 相同的 ID 将您的内容包装在一个 div 中。这是一个解释这一点的[链接。](http://programmerramblings.blogspot.ca/2011/07/clientside-api-for-aspnet-user-controls.html)

然后从 UserControl 声明您自己的函数访问`RadTreeView`的客户端 API（`_getAllItems()`和`get_selectedNode()`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T10:34:18.697

好的，我发现了错误：
`<%=TableOverview.ClientID %>`给出了错误的 ID。要获得正确的 ID，我必须将以下内容添加到我的 ASPX-Control 中`DataObjectDefinitionTree`：
`public override string ClientID {
get { return TableTree.ClientID; }
//TableTree is the base object of DataObjectDefinitionTree
}`

现在，当我打电话时，我得到了正确的 ID `<%=TableOverview.ClientID %>`。
不过，感谢您的帮助。:)

# java - 如何使用 Hibernate IN 关键字从数据库中选择多个值？

> ID：13249620
> 
> 赞同：0
> 
> 时间：2012-11-06T11:03:29.167
> 
> 标签：java, mysql, hibernate, apache-flex

我有示例应用 Flex+Java（使用 mysql 数据库）。实际上我正在将搜索结果从 flex 发送到 java 方法，它正在工作一个值。

```
for ex: we are giving flex textbox value---- "java" ------it is working fine 
```

但是我们提供了两个以上的关键字`forex: java,flex`----它不起作用

这是mysql查询：

```
from Course where coursename in (:name) 
```

和设置参数....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T07:42:16.230

将字符串“java,flex”转换为一个集合，例如使用 split(',') ，然后将其提供给查询。

# file-upload - 如何防止 Coldfusion 中的多文件上传超时？

> ID：13249623
> 
> 赞同：2
> 
> 时间：2012-11-06T11:03:38.970
> 
> 标签：file-upload, coldfusion, timeout

我有一个自动例程，可由用户触发以将图像上传到 Amazon S3。用户通常会上传超过 500 个项目，我正在努力寻找一种方法来避免进程超时。

现在我正在这样做：

```
<form action="hs_import.cfm?ansicht=Bilder&RequestTimeout=5000" method="post" name="uploader">
...
    <input type="button" OnClick="bilder_upload()" value="#tx_gen_run#">
    <input type="hidden" name="artikel_uploaden" value="ja">
    <input type="hidden" name="ansicht" value="imageloader">
</form> 
```

这触发了一个javascript函数，它触发了我的上传（没有详细信息）：

```
<cfif isdefined("artikel_uploaden")>
<cfscript>
        S3 variables
</cfscript>

    <!--- get img paths to upload --->
    <cfquery datasource="db" name="img_paths">
    SELECT DISTINCT imgpath
</cfquery>

    <cfif img_paths.recordcount GT 0>
        <cfloop query="img_paths">
            <cfif img_paths.typ NEQ "img">
                <cfset variables.testFilePath = img_paths.bildpfad & img_paths.bilddateiname>
                <cfset variables.fileExt = ListLast(variables.testFilePath, ".")>

                <!--- get image --->
                <cfhttp timeout="45" 
                    throwonerror="no" 
                    url="#variables.testFilePath#" 
                    method="get" 
                    useragent="Mozilla/5.0 (Windows; U; Windows NT 6.0; en-US; rv:1.8.1.12) Gecko/20080201 Firefox/2.0.0.12" 
                    getasbinary="yes" 
                    result="variables.objGet">

                <!--- validate --->
                <!--- upload 4 sizes (s,m,l,xl) to S3 --->          
                <cftry>
                    <cfset objImage = ImageNew(variables.objGet.FileContent )>
                    <cfimage source="#objImage#" action="write" quality=".99" destination="#variables.tempDirectory#_base_#img_paths.bilddateiname#" overwrite="yes">
                    <cfset variables.basePath = variables.tempDirectory & "_base_" & img_paths.bilddateiname>
                    <cfimage action="read" source="#variables.basePath#" name="base">
                    <cfset variables.imageSrc = variables.tempDirectory>
                    <cfscript>
                        if ( ImageGetWidth( base ) LT ImageGetHeight( base ) ) {
                        // portrait                                     
                        } else {
                        // landscape/square

                        }
                        // cleanup
                    </cfscript>

                    <!--- create IMG entry in media table  --->
                    <cfquery datasource="db"></cfquery>
                </cfif>
            <cfcatch>
                <cfset variables.errorCount = variables.errorCount+1>
                <cfset variables.failedLoads = variables.failedLoads & img_paths.bilddateiname & "  (" & tx_pop_error & ":" & tx_errors_import_ext & "), ">
            </cfcatch>
        </cftry>
    </cfif>
  </cfloop>
  <!--- alert on success and errors --->
</cfif> 
```

这可以正常工作，但是如果图像数量太大，浏览器就会挂起/超时，所以我通常会看到一个加载屏幕，它永远不会完成并且不会提醒成功/错误。

**问题**：
处理这样的大文件上传有什么更好的选择？例如，这是否应该进入 a `cfschedule`，以便它可以在后台运行？

感谢提示！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T14:24:12.020

You're trying to do an awful lot in a single request. While one or five images may not generate timeouts, hundreds of messages certainly will. From the code you provided above, you're doing the following in a single request:

1.  Upload [n] images
2.  Make an http request to fetch each image
3.  Resize each image (possibly into 4 different sizes, not entirely clear from the sample)
4.  Upload each manipulated version of each image to S3

That's a lot of work, especially given that both cfhttp and, more specifically, cfimage are not the fastest tags in the language. Image manipulation via cfimage can be quite slow.

You're probably much better off doing what you suggested: breaking these tasks apart and doing as much of the processing on the backend so that the original customer request doesn't have to wait. You could do the initial image upload and then end the customer request, notifying them that it may take a few minutes for all of their images to be processed.

You then have the option of using a scheduled task or a task queue (ie; Rabbit MQ) to do the image processing and uploading to S3\. I'd even suggest that you have a separate instance which handles scheduled tasks, so that this processing work isn't done on the instances where customers are interacting directly with your web app. Breaking the image manipulation and S3 upload into separate tasks might even be better, so that you can have error handling to capture problems with image manipulation (ie; bad file formats) without also borking the S3 upload process. This requires a bit more tracking work on the backend (ie; which images still need processing, which images still need uploading to S3) but this isn't hard to implement and gives you a more robust workflow setup overall.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T17:53:52.897

如果您希望用户触发请求，您可以通过 AJAX 调用来实现，而无需等待回复。只需告诉用户请求正在后台运行。您还可以在完成页面线程并显示“正在处理的请求”页面时使用 cfthread 启动大请求。

[问 Ben：在 ColdFusion 中使用 CFThread 处理文件](http://www.bennadel.com/blog/1886-Ask-Ben-Processing-Files-With-CFThread-In-ColdFusion.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T14:21:10.933

您正在循环执行 cfquery，这样做非常糟糕，并且可能导致严重的减速。解决此问题的一种方法是将 100 个查询存储到一个变量中，然后一次运行多个查询（连接的打开和关闭可能需要很长时间。）当我使用这种样式进行大规模更新时，会得到性能提高了 90%。

这可能足以让您的流程正常工作。当然，如果你有很多非常大的图像，那也没什么可做的（限制图像大小除外）

# mapreduce - RavenDb - 查询在 Reduce 函数中聚合的字段

> ID：13249633
> 
> 赞同：4
> 
> 时间：2012-11-06T11:04:17.477
> 
> 标签：mapreduce, ravendb

我有一组代表一些工作项的文档：

```
public class WorkItem
{
    public string Id {get;set;
    public string DocumentId { get; set; }
    public string FieldId { get; set; }
    public bool IsValidated { get; set; }
}

public class ExtractionUser
{
    public string Id {get;set;}
    public string Name {get;set;}
    public string[] AssignedFields {get;set;}
} 
```

用户有权访问一组 FieldId。我需要根据这组字段查询 WorkItems 并获取每个文档的状态：

```
public class UserWorkItems
{
    public string DocumentId { get; set; }
    public int Validated { get; set; }
    public int Total { get; set; }
} 
```

我的查询是这样的：

```
using (var session = RavenDb.OpenSession())
{
    string[] userFields = session.Load<User>("users/1").Fields;
    session.Query<WorkItem>()
        .Where(w => w.FieldId.In(userFields))
        .GroupBy(w => w.DocumentId)
        .Select(g => new
        {
            DocumentId = g.Key,
            Validated = g.Where(w => w.IsValidated).Count(),
            Total = g.Count()
        }).Skip(page * perPage).Take(perPage)
        .ToArray();
} 
```

我曾尝试创建一个 Map/Reduce 索引，但主要问题是我需要能够对未包含在 Reduce 输出中的 FieldId 应用过滤器，因为它是被计算的属性。

我还尝试在查询部分的 FieldId 和 TransformResults 上做一个简单的 Map 索引来执行 GroupBy - 但由于分页是在 TransformResults 之前应用的，所以页面和总计反映了分组之前的文档，这是不好的。

然后我尝试使用 Multi Map 索引来映射用户及其字段集合，并映射工作项和字段，然后尝试将结果减少到我想要的。我用索引定义创建[了一个要点。](https://gist.github.com/4024002)减少部分涉及按字段分组，然后是多个 SelectMany 和最后一个 GroupBy 和 Select。该索引已被 raven 接受，但 i 不返回任何结果。我有点卡在 Multi Map 索引上，因为我不知道如何实际调试它。

我想最后我的问题可能会减少（双关语）如何查询“减少”字段？

有什么想法可以实现这样的功能吗？除了 Map/MultiMap/Reduce/TransformResults 之外，我还有其他选择吗？

**更新**：在阅读[Ayende 的 Map Reduce 帖子](http://ayende.com/blog/4435/map-reduce-a-visual-explanation)时，我意识到我正在接近 mapreduce 错误。仍在寻找解决方案...

**更新 2**：经过更多研究，我最终得到了这个索引，它看起来像我想要做的，但不返回任何数据（索引直接在工作室中定义）：

地图：

```
from user in docs
where user["@metadata"]["Raven-Entity-Name"] == "ExtractionUsers"
from field in user.AssignedFields
from item in docs
where item["@metadata"]["Raven-Entity-Name"] == "WorkItems" && item.FieldId == field
select new {
    UserId = user.Id,
    DocumentId = item.DocumentId,
    Validated = item.Status=="Validated"? 1: 0,
    Count = 1
} 
```

减少：

```
from r in results
group r by new { r.UserId , r.DocumentId } into g
select new {
    UserId = g.Key.UserId,
    DocumentId = g.Key.DocumentId,
    Validated = g.Sum(d => d.Validated),
    Count = g.Sum(d => d.Count),
} 
```

这个想法是尝试在索引中映射所有文档，并从用户链接到字段和工作项。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T15:27:21.520

一周后，我设法解决了这个问题。我采用了一种稍微不同（关系较少）的方法，这种方法很简单，而且看起来效果很好。以下是其他人遇到此类问题的详细信息：

我按 DocumentId 对 WorkItems 进行分组，并将 Validated 和 NonValidated 字段放入一个集合中。map reduce 的结果如下所示：

```
public class Result
{
    public string DocumentId { get; set; }
    public string[] ValidatedFields { get; set; }
    public string[] ReadyFields { get; set; }
} 
```

**地图**函数如下所示：

```
Map = items => items.Select(i => new
{
    DocumentId = i.DocumentId,
    ValidatedFields = i.IsValidated ? new string[] { i.FieldId } : new string[0],
    ReadyFields = !i.IsValidated ? new string[] { i.FieldId } : new string[0]
}); 
```

和**减少**：

```
Reduce = result => result
    .GroupBy(i => i.DocumentId)
    .Select(g => new
    {
        DocumentId = g.Key,
        ValidatedFields = g.SelectMany(i => i.ValidatedFields),
        ReadyFields = g.SelectMany(i => i.ReadyFields)
    }); 
```

要查询索引，我现在使用以下表达式：

```
User user = session.Load<User>("users/1");
var result = session.Query<WorkItem, UserWorkItemIndex>()
    .As<UserWorkItemIndex.Result>()
    .Where(d => d.ValidatedFields.Any(f => f.In(user.AssignedFields)))
    .ToArray(); 
```

我唯一需要做的就是客户端只计算属于用户的字段。

该解决方案还有一个[要点](https://gist.github.com/4051366)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T16:45:00.440

**首先，免责声明：**我之前从未在真实系统中使用过 RavenDB，但我阅读了一些文章，观看了一些视频，并且非常喜欢它背后的想法。我认为这个问题是一个有趣的练习。因此，这种方法可能并不理想；欢迎评论和改进。

我的想法是必须在集合上创建一个索引`WorkItems`以包含这些字段：

*   `DocumentId`（因为这就是我们最后要分组的内容）
*   `FieldId`（因为这是我们将过滤的字段）
*   `ValidatedCount`（具有`IsValidated`= true 的记录数）
*   `TotalCount`

创建此索引后，我们可以使用`.Where(x => x.FieldId.In(userFields))`过滤器对其进行查询，并返回一组具有上述结构的结果。

为了得到最终结果，我们需要`DocumentId`对这些结果进行更多的分组。

我想出的代码是这样的：

### 索引定义

```
public class WorkItems_ValidationStatistics :
    AbstractIndexCreationTask<WorkItem, WorkItems_ValidationStatistics.ReduceResult>
{
    public class ReduceResult
    {
        public string DocumentId { get; set; }
        public string FieldId { get; set; }
        public int ValidatedCount { get; set; }
        public int TotalCount { get; set; }
    }

    public WorkItems_ValidationStatistics()
    {
        Map = workItems =>
              from workItem in workItems
              select new
                    {
                        workItem.DocumentId,
                        workItem.FieldId,
                        ValidatedCount = workItem.IsValidated ? 1 : 0,
                        TotalCount = 1
                    };

        Reduce = results =>
                 from result in results
                 group result by new { result.FieldId, result.DocumentId }
                     into g
                     select new
                        {
                            g.Key.DocumentId,
                            g.Key.FieldId,
                            ValidatedCount = g.Sum(x => x.ValidatedCount),
                            TotalCount = g.Sum(x => x.TotalCount)
                        };
    }
} 
```

### 在数据库中创建索引的代码：

```
public void CreateIndex()
{
    using (var store = CreateDocumentStore())
    {
        IndexCreation.CreateIndexes(
            typeof(WorkItems_ValidationStatistics).Assembly, store);
    }
} 
```

***注意：**或者，您可以直接在 RavenDB Management Studio 中创建索引*

### 查询索引并进行最终聚合的代码：

```
public void GetWorkItemStatisticsGroupedByDocumentId()
{
    using (var store = CreateDocumentStore())
    using (var documentSession = store.OpenSession())
    {
        var userFields = new[] { "fields/11", "fields/13" };

        var items = documentSession
            .Query<WorkItems_ValidationStatistics.ReduceResult, WorkItems_ValidationStatistics>()
            .Where(x => x.FieldId.In(userFields))
            .ToList();

        var results = items
            .GroupBy(x => x.DocumentId)
            .Select(g => new
                {
                    DocumentId = g.Key,
                    ValidatedCount = g.Sum(x => x.ValidatedCount),
                    TotalCount = g.Sum(x => x.TotalCount)
                });

        foreach (var r in results)
        {
            Console.WriteLine("DocId={0}: validated: {1}/{2}", 
                r.DocumentId, r.ValidatedCount, r.TotalCount);
        }
    }
} 
```

# c# - ...是一种类型，但用作变量

> ID：13249635
> 
> 赞同：0
> 
> 时间：2012-11-06T11:04:28.363
> 
> 标签：c#

我的想法是创建一个基于文本的冒险游戏。

我正在尝试在我的主要课程中使用一个课程。当我尝试这样做时，它给了我错误：

**“MyAdventure.Window”是一种“类型”，但用作“变量”**

我不确定如何解决这个问题。我尝试创建该类的新实例，但似乎没有用。我对此很陌生，但是有人可以帮忙吗？

提前致谢。

这是我的主类（Program.cs）的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace MyAdventure
{
class Program
{
    static void Main(string[] args)
    {

        Console.WriteLine("You cannot feel your body. You don't know where you are.\nThe room you're in is dark. You cannot see much.");
        Console.WriteLine("You decide to stand up, and take a look around. You see a door and a window.\nWhich do you check out first?");
        Console.WriteLine("A. Window\nB. Door");

        string userInput = Console.ReadLine();
        //Window theWindow = new Window();

        if (userInput.StartsWith("A", StringComparison.CurrentCultureIgnoreCase))
        {
            Window();
        }
        else if (userInput.StartsWith("B", StringComparison.CurrentCultureIgnoreCase))
        {
            Console.WriteLine("You chose the door.");
        }

        Console.ReadKey();

    }
} 
```

}

这是另一个类 Window.cs 的代码（到目前为止）：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace MyAdventure
{
public class Window
{
    static void theWindow()
    {

        Console.WriteLine("You approach the window.");
        Console.ReadKey();

    }
} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T11:08:31.237

调用类的静态方法的正确语法如下

```
 if (userInput.StartsWith("A", StringComparison.CurrentCultureIgnoreCase))
   {
        Window.theWindow();
   } 
```

您不能只使用类的名称，但您应该指定要调用的静态方法（可能是多种方法中的一种）

[调用静态方法](http://www.dotnetperls.com/static-method)

此外，方法“theWindow”应该公开，否则[默认情况下在类中是私有的](http://msdn.microsoft.com/en-us/library/ms173121.aspx)

> 类成员和结构成员（包括嵌套类和结构）的访问级别默认为私有

```
public static void theWindow()
{
    Console.WriteLine("You approach the window.");
    Console.ReadKey();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T11:08:11.000

您可能需要致电

```
....
...
if (userInput.StartsWith("A", StringComparison.CurrentCultureIgnoreCase))
{
      Window.theWindow();
}
...
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T11:10:04.023

`theWindow()`是一种静态方法。`ClassName.MethodName()`在您的情况下，静态成员被称为`Window.theWindow()`

当您这样做时`Window theWindow = new Window();`，您正在创建`Window`该类的一个实例。不能从类的实例访问静态成员。

要从实例调用该方法，您需要删除`static`修饰符

```
public class Window
{
    public void theWindow()
    {
        Console.WriteLine("You approach the window.");
        Console.ReadKey();

    }
} 
```

用法

```
Window w = new Window(); //creating an instance of Window
w.theWindow(); 
```

# windows - 将日期/唯一标识符附加到文件并移动它

> ID：13249639
> 
> 赞同：1
> 
> 时间：2012-11-06T11:04:46.357
> 
> 标签：windows, batch-file

我开发了一个简单的批处理文件，我想将其设置为计划任务来移动文件。

目前，这是我的代码；

```
move /-y "C:\Folder\Folder\Folder\*File*.csv" "C:\Folder\Folder\Folder\Folder\File.csv"

pause 
```

但是，这显然会导致重复（以及第二次传输后的覆盖冲突）

如何附加日期（文件每天仅移动一次）或唯一标识符来解决此问题？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T11:26:31.090

尝试

```
 move /-y "C:\Folder\Folder\Folder\*File*.csv" "C:\Folder\Folder\Folder\Folder\File_%date:~6,4%_%date:~3,2%_%date:~0,2%.csv" 
```

注意：上述命令中的数字 6,4 3,2 0,2 取决于您的日期格式。检查您的控制面板（或使用`echo %date%`）以获取您的默认日期格式。当然，您可以更改顺序:-)

我的默认日期格式是 DD/MM/YYYY 并且此代码段将其更改为 YYYY_MM_DD

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T08:37:38.650

问题很简单，但解决方案批量难看。例如，上面列出的答案之一为我产生了以下输出：

```
C:\>echo %date:~6,4%_%date:~3,2%_%date:~0,2%
/08/_ 1_Th 
```

显然，它并不总是有效。幸运的是，Rob Van der Woude 已经准备并收集了[这样的](http://www.robvanderwoude.com/datetimentparse.php)解决方案。该代码为我生成以下输出：

```
DateParsed=20121108 
```

为了便于使用，我复制了 Rob 的代码并在此处引用了他的源代码。

```
:: One of the ugliest scripts required for such a seemingly simple thing is getting dates parsed
:: http://www.robvanderwoude.com/datetimentparse.php
SET Today=%Date: =0%
SET Year=%Today:~-4%
:: Include 1 extra character, which will be either a leading zero or a trailing separator
SET Month=%Today:~-10,3%
:: Remove separator
SET Month=%Month:-=%
SET Month=%Month:/=%
:: Clear leading zeroes

SET /A Month = 100%Month% %% 100
:: And add one again, if necessary
SET /A Month = 100 + %Month%
SET Month=%Month:~-2%
SET Day=%Today:~-7,2%
:: Remove separator
SET Day=%Day:-=%
SET Day=%Day:/=%
:: Clear leading zeroes, as there may be 2 leading zeroes
SET /A Day = 100%Day% %% 100
:: And add one again, if necessary
SET /A Day = 100 + %Day%
SET Day=%Day:~-2%

SET DateParsed=%year%%month%%day%
echo DateParsed=%DateParsed% 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T11:26:27.847

您可以执行类似的操作将日期时间附加到文件名...

for /f "tokens=1-5 delims=/ " %%d in ("%date%") 重命名 "C:\Folder\Folder\Folder\Folder\File.csv" %%e-%%f- %%g.csv

测试 - 在桌面上创建 test.txt 运行 .bat （更改文件名和位置以匹配我在 .bat 文件中的测试文件的名称和位置。）

在我运行 .bat 后，文件名更改为 11-06-2012.txt。

希望这可以帮助。

# java - 确定 URL 是否应该在 Java 的末尾有一个正斜杠

> ID：13249640
> 
> 赞同：0
> 
> 时间：2012-11-06T11:04:55.777
> 
> 标签：java, url, relative-url

我正在尝试进行一些网络爬虫，但遇到了何时添加斜杠的问题。我知道有些网站最后确实有它，而有些则没有，但在浏览器中输入错误的网站只会将您重定向到正确的网站。规范化会在末尾添加斜杠，但在尝试将相对 URL 转换为绝对 URL 时会导致问题。

例如，如果用户选择了绝对 URL `http://stack.com/more`，但实际（重定向）URL 是`http://stack.com/more/`，而相对 URL 是`index.html`

然后做`URL newurl = new URL(url, relativeURL);`

产量`http://stack.com/index.html`（不存在的页面）

什么时候应该是`http://stack.com/more/index.html`（真实页面）

有谁知道在末尾正确附加斜线的好方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T11:08:21.263

如果相对 URL 以 a 开头`/`，则它仅相对于根（域）。所以两者

```
http://stack.com/more/ + /index.html
```

和

```
http://stack.com/more + /index.html
```

正确解析为

```
http://stack.com/index.html
```

**不是**

```
http://stack.com/more/index.html
```

`/`在您的示例中，无论`more`.

当相对 URL 上没有前导斜杠时，技巧就出现了，例如`index.html`. 解决这些问题时，您应该删除最后一段并将其替换为相对路径。在这种情况下会有所不同，因为

```
http://stack.com/more/ + index.html
```

解决为

```
http://stack.com/more/index.html
```

但

```
http://stack.com/more + index.html
```

解决为

```
http://stack.com/index.html
```

（`index.html`替换`more`，因为`more`是最后一段）。

# c# - 关闭 WinForm 时触发 Combox SelectedIndexChanged

> ID：13249642
> 
> 赞同：3
> 
> 时间：2012-11-06T11:04:58.607
> 
> 标签：c#

我正在使用 Combobox SelectedIndexChanged 事件来执行一些任务。它工作得很好。但是当我关闭表单时，SelectedIndexChanged 被触发并且我得到“对象引用未设置为对象的实例”。例外。我的代码如下 -

```
 private void cmbProductName_SelectedIndexChanged(object sender, EventArgs e)
    {
        try
        {
            Product p =(Product) cmbProductName.SelectedItem;

            RawItems = RawItem.GetEntityList(p.Id, ConnectionString);

        }
        catch (Exception ex)
        {
            CustomMessageBox.ShowSystemException(ex);
        }
    } 
```

如何避免在表单关闭时触发 SelectedIndexChanged 事件？

谢谢SK保罗。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T11:14:16.580

尝试在 FormClosing 事件处理程序中取消注册该事件：

MyComboBox.SelectedIndexChanged -= combox_SelectedIndexChanged;

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-06T11:17:10.093

如果您只想在用户更改组合框中的选定项目时执行任务，最好实现[`SelectionChangeCommitted`](http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.selectionchangecommitted.aspx)事件

**[编辑]**

According to MSDN docs `SelectionChangeCommitted`occurs only when the `ComboBox`selection changes by user (via keyboard or mouse) and it is not raised when the selection changes programmatically.

当列表中的值发生更改时，`SelectionChangeCommitted`首先触发事件，然后`SelectedIndexChanged`触发事件。

因此，如果我们需要对 执行任何操作`SelectedIndexChanged`，我们可以将其删除并在`SelectionChangeCommitted`事件处理程序中执行相同的工作。

只需处理此事件，而不是`SelectedIndexChanged`如下：

```
private void cmbProductName_SelectionChangeCommitted(object sender, EventArgs e)
{
    /*
      Your event handling code
    */
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-06T11:14:37.047

在关闭期间，您可以删除 ComboBox 事件处理程序。因此，您需要`Closing`表单的事件处理程序，并且您必须删除`cmbProductName_SelectedIndexChanged`回调。

在这里您可以阅读有关[Form.Closing](http://msdn.microsoft.com/ru-ru/library/system.windows.forms.form.closing.aspx)以及[如何删除事件处理程序](https://stackoverflow.com/questions/91778/how-to-remove-all-event-handlers-from-a-control)的信息。

# iscroll - 滚动空白空间

> ID：13249643
> 
> 赞同：0
> 
> 时间：2012-11-06T11:05:09.497
> 
> 标签：iscroll

我成功实现了 iScroll。但问题是即使没有内容，屏幕也会滚动。
有什么建议可以解决这个问题吗？
我正在尝试这样做：

```
// enter code here
onScrollMove: function(e){
    var cont =$('.wrapper');
    alert($(cont).height());
    var docViewBottom = that.y + $(cont).height();
    if (docViewBottom<=0) {
        that.y=-($(cont).height())+30;
        that.startY = that.y;
        that.refresh();
        e.preventDefault();
    }
}, 
```

但问题是每次高度都达到 426 像素。有没有办法获得内容的真实高度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T18:31:53.337

尝试禁用`bounce`：

```
myScroll = new iScroll('wrapper', { 
    scrollbarClass: 'myScrollbar',
    bounce:false
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-06T06:34:52.947

我已经通过在 Iscroll Height 上设置屏幕高度来解决

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-30T06:47:39.403

在你的 html 正文的底部保留一些东西是一个很好的技巧。当检测上拉负载的底部时，我使用了一个***空白来实现这一点更多：***

```
 <sapn id="bottomLine">&nbsp;</span>
      <table id="bottomRefreshImg" style="display:none">
        <tr><td><img src="refreshGreen.gif" /></td></tr>
        <tr><td>loading...</td></tr>
      </table>
    </div> //close scroller
  </div>  //close wrapper
  <div id="footer"></div>
  <script src="./jquery-2.2.3.min.js"></script>
  <script src="./iscroll.js"></script>
  <script src="./page.js"></script>
</body> 
```

第一行是***空白***，在 css 中，它看起来像：

```
 #bottomLine{
    height:1px; //it's ivisible
    font-size:1px;
} 
```

以及page.js中对应的js代码：

```
var myScroll;
var myScroolHasCausedAddNew=0;

function loaded () {
    myScroll = new IScroll('#wrapper', {
                       scrollbars: true,
                       scrollbars: 'custom',
                       mouseWheel: true,
                       click:true,
                       interactiveScrollbars: true,
                       shrinkScrollbars: 'scale',
                       fadeScrollbars: true,
                       snap:true,
                       snap:'table',
    });
    myScroll.on('scrollStart',function(){
        if($("#bottomLine").position().top + myScroll.y-myScroll.wrapperHeight<11){
            if(myScroll.directionY==1){
                $("#bottomRefreshImg").show();
                myScroolHasCausedAddNew=1;
            }
        }       
        return false;
    });
    myScroll.on('scrollEnd',function(){
        if(myScroolHasCausedAddNew==1){
            myScroolHasCausedAddNew=0;
            $("#bottomRefreshImg").hide();
            loadMore();
        }
        return false;
    });

} 
```

您的问题的答案在“ *$("#bottomLine").position().top + myScroll.y-myScroll.wrapperHeight<11* ”行中，其中 11 是公差，实际上是 $("#bottomLine" ).position().top === myScroll.wrapperHeigh + Math.abs(myScroll.y)。

请注意，您实际上并不需要设置这么多 iscroll 属性来使这些代码正常工作，我只是从我的项目中复制它们。有关 iscroll 属性的更多信息，请查看 iscroll 的文档。

希望这可以帮助。

**关于 iscroll-refresh 的其他读者的更多信息：** 不要忘记在加载新项目后更新您的 iscroll，这在 iscroll 文档中进行了说明。

# jquery - jQuery $.ajax 运行两次

> ID：13249656
> 
> 赞同：0
> 
> 时间：2012-11-06T11:05:53.317
> 
> 标签：jquery, ajax

我有一些`onClick`为某个类的复选框运行的 ajax，但由于某种原因，我的 ajax 代码被调用了两次，而且它似乎也改变了调用中复选框的值，但不是在页面上。

这是我的html

```
<label class="facilities mainfac"><input name="Foo1" id="Foo1" type="checkbox" value="1">Foo1</label>
<label class="facilities mainfac"><input name="Bar2" id="Bar2" type="checkbox" value="1">Bar2</label>
<label class="facilities mainfac"><input name="Foo3" id="Foo3" type="checkbox" value="1">Foo3</label>
<label class="facilities mainfac"><input name="Bar4" id="Bar4" type="checkbox" value="1">Bar4</label>
<label class="facilities mainfac"><input name="Foo5" id="Foo5" type="checkbox" value="1">Foo5</label>
<label class="facilities mainfac"><input name="Bar6" id="Bar6" type="checkbox" value="1">Bar6</label>
<label class="facilities mainfac"><input name="Foo7" id="Foo7" type="checkbox" value="1">Foo7</label>
<label class="facilities mainfac"><input name="Bar8" id="Bar8" type="checkbox" value="1">Bar8</label> 
```

然后我使用以下命令运行 ajax；

```
$(function() {

    getCount();

    $('.mainfac').on('click', function() {
        getCount();
    });

}); 
```

最后是ajax请求中涉及的函数

```
function urlStringFormChoices()
{
    var urlVars = '';

    urlVas = urlVas + '&Foo1=' + ($('#Foo1').is(':checked') ? '1' : '0');
    urlVas = urlVas + '&Bar2=' + ($('#Bar2').is(':checked') ? '1' : '0');
    urlVas = urlVas + '&Foo3=' + ($('#Foo3').is(':checked') ? '1' : '0');
    urlVas = urlVas + '&Bar4=' + ($('#Bar4').is(':checked') ? '1' : '0');
    urlVas = urlVas + '&Foo5=' + ($('#Foo5').is(':checked') ? '1' : '0');
    urlVas = urlVas + '&Bar6=' + ($('#Bar6').is(':checked') ? '1' : '0');
    urlVas = urlVas + '&Foo7=' + ($('#Foo7').is(':checked') ? '1' : '0');
    urlVas = urlVas + '&Bar8=' + ($('#Bar8').is(':checked') ? '1' : '0');

    return urlVas;
}

function getCount()
{
    var data = urlStringFormChoices();
    // show loading info to the user
    $('#c-bookable').hide();
    $('#c-loader').show();
    $.ajax({
        url:  '/inc/get-count.php',
        data: data,
        type: 'get'
    }).done( function(count) {
        $('#c-loader').hide();
        if(count != "n/a")
        {
            if($('#bookable').is(':checked')) {
                $('#c-bookable').html('<span class="c-bookable-count">' + count + '</span> available').show();
            } else {
                $('#c-bookable').html('<span class="c-bookable-count">' + count + '</span>')).show();
            }
        }
    });
} 
```

php 页面返回一个数字或“n/a”。当单击其中一个复选框时，例如 Bar2，我在控制台中看到两个请求按照这些方式进行了操作

```
.../get-count.php?Foo1=0&Bar2=1&Foo3=0&Bar4=0&Foo5=0&Bar6=0&Foo7=0&Bar8=0.

.../get-count.php?Foo1=0&Bar2=0&Foo3=0&Bar4=0&Foo5=0&Bar6=0&Foo7=0&Bar8=0. 
```

所以发送的第一个请求是正确的，但第二个请求将 1 恢复为 0 取消更改，因此返回一个不正确的数字。

然而，复选框的作用没有什么不同，选中它会保持选中状态，反之亦然。

周围还有其他代码，但没有其他代码调用该`getCount()`函数。

什么可能导致这种相当奇怪的行为？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T11:15:42.877

### 解决方案：不要将事件监听器附加到`label`包含`input`.

好的，这里的问题是当 a`label`被触发一个事件时，它里面有一个`input`，它`input`也会被触发相同的事件，从而产生两个事件。因此，最好将事件附加到包含的`input`而不是。`label``input`

### 请将您的代码更改为：

```
$(function() {

    getCount();

    $('.mainfac input').on('click', function() {
        getCount();
    });

}); 
```

# objective-c - UITableViewCell 不可点击

> ID：13249658
> 
> 赞同：6
> 
> 时间：2012-11-06T11:05:55.583
> 
> 标签：objective-c, ios5, uitableview

我有一个自定义 UITableViewCell 有很多按钮、文本字段、标签和一个视图。我将它们隐藏并显示在每个索引路径上需要它们的位置。但由于某种原因/s 行不可点击！

我什至通过代码完成了以下事情，以确保如果 IB 中出现问题，可以通过这些行修复它但没有用。

```
cell.selectionStyle = UITableViewCellSelectionStyleBlue;
cell.userInteractionEnabled = YES; 
```

我想知道隐藏视图是否是这里的罪魁祸首或其他原因？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T18:24:15.547

尝试这个 `tableView.allowsSelection=YES;`

你可以实施`-(NSIndexPath *)tableView:(UITableView *)tableView willSelectRowAtIndexPath:`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T09:54:47.357

我在我的 UITableViewCells 中也使用了很多不同的 UI 元素，为什么不尝试继承 UITableViewCell 并滚动你自己的类，将项目作为单元格的属性？似乎对我有用。

**在 VincentsAwesomeCell.h 中：**

```
@interface VincentsAwesomeCell : UITableViewCell

@property (weak, nonatomic) IBOutlet UILabel *FooLabel;
@property (weak, nonatomic) IBOutlet UILabel *BarLabel;
@property (weak, nonatomic) IBOutlet UIImageView *ShimmyIcon;
@property (weak, nonatomic) IBOutlet UILabel *DooWopLabel;
@property (weak, nonatomic) IBOutlet UIImageView *UseIcon;
@property (weak, nonatomic) IBOutlet UILabel *TheForceLabel;
@property (weak, nonatomic) IBOutlet UIImageView *bobSledIcon;
@property (weak, nonatomic) IBOutlet UILabel *WristWatchLabel;
@property (weak, nonatomic) IBOutlet UILabel *MeatLoafLabel;
@property (weak, nonatomic) IBOutlet UILabel *SciFiLabel;
@property (weak, nonatomic) IBOutlet UILabel *CollinderLabel;
@property (weak, nonatomic) IBOutlet UILabel *RhubarbLabel;
@property (weak, nonatomic) IBOutlet UITextField *SuperTextField;
@property (weak, nonatomic) IBOutlet UIStepper *stepper;
@property (strong, nonatomic) IBOutlet UILabel *amountOfAwesomeness; 
```

不要忘记使用：

**在 VincentsAwesomeCell.m 中：**

```
- (void)prepareForReuse {
    [super prepareForReuse];
    // Always call this!
    // Reset custom stuff
} 
```

重置单元格的属性以供重用。

然后在您的 TableViewController.m 中：

```
- (void) viewDidLoad
{
    [super viewDidLoad];
    // Register the custom VincentsAwesomeCell NIB with the tableview
    UINib *nib = [UINib nibWithNibName:@"VincentsAwesomeCell" bundle:nil];
    [[self tableView] registerNib:nib forCellReuseIdentifier:@"VincentsAwesomeCell"];
} 
```

至于

```
- (UITableViewCell *) tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
```

我将它用于 UIStepper 以跟踪按下哪个步进器，例如：

```
[[cell stepper]setTag:indexPath.row];
    [[cell stepper]addTarget:self action:@selector(stepperChanged:) forControlEvents:UIControlEventValueChanged]; 
```

希望这可以帮助！

附言

我使用 .xib 文件来创建自定义单元格的布局。只需将 UITableViewCell 拖入 InterFaceBuilder 并自定义即可！不要忘记链接属性！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-14T09:16:34.400

这是自定义的示例`UITableView`

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell    = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {

    cell= [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];

}
cell.selectionStyle = UITableViewCellSelectionStyleNone;

UILabel *lbl = [[UILabel alloc]initWithFrame:cell.frame];
lbl.backgroundColor = [UIColor clearColor];

UIImageView *cellImage = [[UIImageView alloc]initWithImage:    [arrayImages objectAtIndex:indexPath.row]];
if (pointRange.location!=NSNotFound) {

    cellImage.frame = CGRectMake(25,12.5, 75, 75);
    lbl.frame = CGRectMake(0, 0, tableView.frame.size.width, 100);
    lbl.font =  [UIFont fontWithName:@"PineappleDemo" size:30.0];
}

lbl.textColor =[UIColor colorWithRed:38.0/255.0 green:34.0/255.0 blue:98.0/255.0 alpha:1.0];
lbl.text =[arrayData objectAtIndex:indexPath.row];

for(UIView *v in [cell subviews])
{
    if([v isKindOfClass:[UILabel class]]||[v isKindOfClass:[UIImageView class]]||[v isKindOfClass:[UIButton class]])
        [v removeFromSuperview];
}
if (index == indexPath.row) {

    UILabel *lbl2 = [[UILabel alloc]initWithFrame:CGRectMake(50, 90, tableView.frame.size.width-200, 100)];
     lbl2.backgroundColor = [UIColor clearColor];
     lbl2.numberOfLines = 0;
    lbl2.text = [arrayOffers objectAtIndex:indexPath.row];
    [cell addSubview:lbl2];
    [lbl2 release];

    UIButton *btn = [UIButton buttonWithType:UIButtonTypeCustom];
    btn.frame = CGRectMake(tableView.frame.size.width-150, 100, 120, 84);
    btn.backgroundColor = [UIColor clearColor];

    if (indexPath.row<=2) {
        switch (indexPath.row ) {
            case 0:
                [btn setImage:[UIImage imageNamed:@"lickFB.png"] forState:UIControlStateNormal];

                [btn addTarget:self action:@selector(facebook) forControlEvents:UIControlEventTouchUpInside];
                break;
            case 1:
                [btn setImage:[UIImage imageNamed:@"follow.png"] forState:UIControlStateNormal];

                [btn addTarget:self action:@selector(twitter) forControlEvents:UIControlEventTouchUpInside];
                break;
            case 2:

                [btn setImage:[UIImage imageNamed:@"rateUs.png"] forState:UIControlStateNormal];

                [btn addTarget:self action:@selector(rateAction) forControlEvents:UIControlEventTouchUpInside];

                break;

            default:
                break;
        }

    }
    else{
        [btn setImage:[UIImage imageNamed:@"Buy_Button.png"] forState:UIControlStateNormal];
        switch (indexPath.row) {
            case 3:
                [btn addTarget:self action:@selector(deal1) forControlEvents:UIControlEventTouchUpInside];
                break;
            case 4:
                [btn addTarget:self action:@selector(deal2) forControlEvents:UIControlEventTouchUpInside];
                break;
            case 5:
                [btn addTarget:self action:@selector(deal3) forControlEvents:UIControlEventTouchUpInside];
                break;

            case 6:
                [btn addTarget:self action:@selector(deal4) forControlEvents:UIControlEventTouchUpInside];
                break;

            default:
                break;
        }

    }
    [cell addSubview:btn];

}

[cell addSubview:lbl];
[cell addSubview:cellImage];
[cellImage release];
[lbl release];
return cell;

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-12T18:39:38.253

在您的自定义 UITableViewCell 中，您是否将 btn、文本字段等添加到 contentView？

也许如果您将所有内容添加到 contentView，那应该可以解决您的问题。希望能帮助到你。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-09T20:45:27.010

如果您的表格视图是可编辑的，这可能是单元格不可点击的原因

如果是这种情况，并且您确实需要在编辑时可以单击单元格 - 只需执行以下操作：

```
tableView.allowsSelectionDuringEditing = YES; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-17T06:06:54.133

如果您不能真正正确触发“didSelectRowAtIndexPath”，请放置一个占据整个单元格的 BIG UIButton 并在按钮单击中执行必要的操作。只是一个想法！:-)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-10-18T22:06:47.667

我有类似的问题。解决了但添加

```
self.clipsToBounds = YES; 
```

到我的 tableView 所在的视图。所以我确定，我的 tableView 超出了其父视图的框架。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-11T13:08:42.547

实现这个方法：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
```

# vb.net - MS Chart：如何在其扩展中放置轴标签

> ID：13249660
> 
> 赞同：0
> 
> 时间：2012-11-06T11:05:55.890
> 
> 标签：vb.net, visual-studio-2010, .net-4.0, charts, axis-labels

我有一个简单的图表，其中一条线从负上升到正：它穿过水平轴。为了可读性，我确实将 AxisY 交叉设置为零。

```
ChartAmortisation.ChartAreas("Amortisation").AxisY.Crossing = 0 
```

但是这样做，我的 x 轴标签保持在图表下方，而 x 轴位于图表区域中间的上方。

如何在轴下方或旁边设置 AxisX 标签？

![轴标签应跟随轴](../Images/6b5e2577dec091b58d62b8e3fc4c4f44.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T18:18:23.007

我认为不可能做你想做的事，除非你从 MS Chart 类派生，并覆盖它绘制轴标题的方式。
相反，您可以将 X 轴留在底部，然后检测 0（零）值是否在 Y 值中，如果是这种情况 - 在 y = 0 处绘制一条自定义水平线。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T12:35:34.547

我成功使用`Annotations`. 我为两个轴做了这个，以保持视觉连贯性。这是我的垂直轴代码。

```
Dim caLabelAxisY As New TextAnnotation
With caLabelAxisY
        .AnchorX = 0
        .AxisX = ChartAmortisation.ChartAreas(0).AxisX
        .AnchorY = ChartAmortisation.ChartAreas(0).AxisY.Maximum 
        .AxisY = ChartAmortisation.ChartAreas(0).AxisY

        .Name = "Label AxisY"
        .Text = "Investition / Überschuss"
        .Font = New Font("Microsoft Sans Serif", 9, FontStyle.Bold)

        .AnchorAlignment = ContentAlignment.TopLeft
End With 
```

奇怪的是，设置`AnchorY`不与图表的名称一起使用，而仅与它的索引一起使用。这表示：

```
'What works:
caLabelAxisY.AnchorY = ChartAmortisation.ChartAreas(0).AxisY.Maximum  
'What doesnot work:
caLabelAxisY.AnchorY = ChartAmortisation.ChartAreas("Amortisation").AxisY.Maximum 
```

此外，这仅在我以`Annotations`编程方式设置时才有效。在 Visual Studio 2010 的设计器中设置这些有助于我可视化结果，但在运行时没有显示任何内容。

最后，这就是它现在的样子。 ![问题解决了](../Images/e7251737ddb233786da9f0128da7b7dd.png)

标签位于图表内，以便更方便地放置它们（否则我应该担心轴上数字的大小）

# c# - 使用 System.Data.SQLite 中的单个连接对象更新多个表

> ID：13249669
> 
> 赞同：1
> 
> 时间：2012-11-06T11:06:28.463
> 
> 标签：c#, .net, sqlite, compact-framework, system.data.sqlite

我正在使用 Compact Framework`SQLite ADO adapter(System.Data.SQLite)`更新设备上的数据库。我将我的存储`DB`在文件中。数据库包含 3-4 个可以同时访问的表。我的查询是，我可以使用单个`SQLiteConnection`对象对这些表执行插入、更新、读取吗？

谢谢， 奥姆基

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T12:22:39.150

我找到了这个[链接][1][1]：[http](http://sqlite.phxsoftware.com/forums/t/56.aspx) ://sqlite.phxsoftware.com/forums/t/56.aspx ，发现不建议这样做。

谢谢， 奥姆基

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T16:42:13.233

> 我可以使用单个 SQLiteConnection 对象在这些表上执行插入、更新、读取吗？

绝对地。是的。

看看我如何在我的一个公共方法中将开放`SQLiteConnection`对象传递给 foreach 循环`Save(Location)`以将数据保存在其他表中：

```
public static int Save(Location location) {
  if ((location == null) || (location.Text == Location.NEW_LOCATION)) {
    return 0;
  }
  location.Result = 0;
  using (SQLiteConnection con = GetConnection) {
    try {
      con.Open();
      using (SQLiteTransaction txn = con.BeginTransaction()) {
        if (!String.IsNullOrEmpty(location.Text) && (location.Text != Location.NEW_LOCATION) && location.HasChanged) {
          string description = (location.Description != Location.NEW_LOCATION) ? location.Description : null;
          using (SQLiteCommand cmd = new SQLiteCommand(null, con)) {
            cmd.CommandText = Location.SQL_UPDATE;
            cmd.Parameters.AddWithValue(Location.AT_ID, location.ID);
            cmd.Parameters.AddWithValue(Location.AT_NUSE, location.InUse);
            cmd.Parameters.AddWithValue(Location.AT_TEXT, location.Text);
            if (location.Text == location.Description) {
              cmd.Parameters.AddWithValue(Location.AT_DESC, DBNull.Value);
            } else {
              cmd.Parameters.AddWithValue(Location.AT_DESC, location.Description);
            }
            location.Result = cmd.ExecuteNonQuery();
            location.HasChanged = false;
          }
        }
        foreach (var tank in location.Tanks) {
          tank.LocationID = location.ID;
          location.Result += Save(tank, con);
        }
        txn.Commit();
      }
      if (0 < location.Result) {
        dataSet.Tables.Remove(Location.TABLENAME);
        DataTable locationTable = new DataTable(Location.TABLENAME);
        using (SQLiteCommand cmd = new SQLiteCommand(Location.SQL_SELECT, con)) {
          locationTable.Load(cmd.ExecuteReader());
        }
        dataSet.Tables.Add(locationTable);
      }
    } catch (SQLiteException err) {
      location.Result = -1;
      LogError("Save(Location)", err);
    } finally {
      con.Close();
    }
  }
  return location.Result;
} 
```

这是我的私有`Save(Tank)`方法，它采用 open ，然后在类似的 foreach 循环`SQLiteConnection`中调用另一个私有方法：`Save(Task)`

```
private static int Save(Tank tank, SQLiteConnection con) {
  if ((tank == null) || (tank.Text == Location.NEW_TANK)) {
    return 0;
  }
  if (tank.LocationID < 0) {
    throw ExceptionFor("Location");
  }
  tank.Result = 0;
  if (!String.IsNullOrEmpty(tank.Text) && (tank.Text != Tank.NEW_TANK) && tank.HasChanged) {
    object description = (tank.Description != tank.Text) ? tank.Description : null;
    using (SQLiteCommand cmd = new SQLiteCommand(Tank.SQL_UPDATE, con)) {
      cmd.Parameters.AddWithValue(Tank.AT_ID, tank.ID);
      cmd.Parameters.AddWithValue(Tank.AT_LOC, tank.LocationID);
      cmd.Parameters.AddWithValue(Tank.AT_NUSE, tank.InUse);
      cmd.Parameters.AddWithValue(Tank.AT_TEXT, tank.Text);
      cmd.Parameters.AddWithValue(Tank.AT_DESC, description);
      try {
        tank.Result = cmd.ExecuteNonQuery();
      } catch (SQLiteException err) {
        tank.Result = -1;
        LogError("Save(Tank)", err);
      }
    }
  }
  if (0 < tank.Result) {
    tank.HasChanged = false;
    dataSet.Tables.Remove(Tank.TABLENAME);
    DataTable tanksTable = new DataTable(Tank.TABLENAME);
    using (SQLiteCommand cmd = new SQLiteCommand(Tank.SQL_SELECT, con)) {
      tanksTable.Load(cmd.ExecuteReader());
    }
    dataSet.Tables.Add(tanksTable);
    tank.Feeding.TankID = tank.ID;
    tank.Cleaning.TankID = tank.ID;
    tank.Filters.TankID = tank.ID;
  }
  tank.Result += Save(tank.Feeding, con);
  tank.Result += Save(tank.Cleaning, con);
  tank.Result += Save(tank.Filters, con);
  return tank.Result;
} 
```

这是我的私有`Save(Task)`方法，它也采用相同的开放`SQLiteConnection`对象：

```
private static int Save(Task task, SQLiteConnection con) {
  if (task.TankID < 0) {
    throw ExceptionFor("Tank");
  }
  //task.Date.TaskID = task.ID;
  task.Result = 0;
  task.DateResult = 0;
  if (!String.IsNullOrEmpty(task.Text)) {
    if (task.HasChanged || task.DateHasChanged) {
      using (SQLiteCommand cmd = new SQLiteCommand(Task.SQL_UPDATE, con)) {
        cmd.Parameters.AddWithValue(Task.AT_ID, task.ID);
        cmd.Parameters.AddWithValue(Task.AT_TANK, task.TankID);
        cmd.Parameters.AddWithValue(Task.AT_NUSE, task.InUse);
        cmd.Parameters.AddWithValue(Task.AT_TEXT, task.Text);
        cmd.Parameters.AddWithValue(Task.AT_LASTID, task.DateID);
        cmd.Parameters.AddWithValue(Task.AT_NUMBER, task.Number);
        cmd.Parameters.AddWithValue(Task.AT_UNIT, task.Units);
        if (task.Text == task.Description) {
          cmd.Parameters.AddWithValue(Task.AT_DESC, DBNull.Value);
        } else {
          cmd.Parameters.AddWithValue(Task.AT_DESC, task.Description);
        }
        try {
          if (task.HasChanged) {
            task.Result = cmd.ExecuteNonQuery();
          }
          if (0 < Save(task.GetDate(), con)) {
            if (task.DateHasChanged) {
              task.Date(GetLastInsertRowID(con), task.ID, DateTime.Today);
              cmd.Parameters[Task.AT_LASTID].Value = task.DateID;
              task.Result += cmd.ExecuteNonQuery();
            }
          }
        } catch (SQLiteException err) {
          task.Result = -1;
          LogError("Save(Task)", err);
        }
      }
      if (0 < task.Result) {
        dataSet.Tables.Remove(Task.TABLENAME);
        DataTable tasksTable = new DataTable(Task.TABLENAME);
        using (SQLiteCommand cmd = new SQLiteCommand(Task.SQL_SELECT, con)) {
          tasksTable.Load(cmd.ExecuteReader());
        }
        dataSet.Tables.Add(tasksTable);
      }
      task.HasChanged = false;
    }
  }
  return task.Result;
} 
```

# sql - SQL 选择两个表

> ID：13249671
> 
> 赞同：1
> 
> 时间：2012-11-06T11:06:43.550
> 
> 标签：sql

我不知道如何编写 select 语句以仅使用学生 ID 获取有关干预细节的信息。

如果学生 id 是 2。我想找到有关名为 MENTORING 的干预的信息。

## student_intervention 表

```
id   student_id inter_details_id   start_date                   end_date         staff_id
 1      2          1            2029-09-12 00:00:00     2029-10-12 00:00:00 0
 2      2          1            2029-09-12 00:50:00     2029-10-12 00:00:00 0 
```

## 干预细节

```
 id      name           description
    1      MENTORING      MENTORING2
    2      BESPOKE        BESPOKE 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T11:10:52.760

尝试：

```
SELECT start_date, end_date, staff_id
FROM student_intervention, intervention_details
WHERE student_intervention.inter_details_id = intervention_details.id
And student_intervention.student_id = 2
And intervention_details.name = 'MENTORING' 
```

这不使用'inner join'语法，但应该仍然有效

# jquery - 如何在 JQuery 端实现 WS-Security？

> ID：13249675
> 
> 赞同：3
> 
> 时间：2012-11-06T11:06:55.633
> 
> 标签：jquery, wcf, soap, wcf-binding, wshttpbinding

我遵循了这个 codeproject[示例](http://www.codeproject.com/Articles/311908/Calling-WCF-service-exposed-with-different-binding)。
在**使用 JQuery 中的 wsHttpBinding 公开的服务**部分，它写道：

> 使用“wsHttpBinding”绑定公开的服务实现了 WS-* 系列 Web 服务规范的 WS-Security。由于绑定使用安全性，请求将被拒绝。如果不在 JQuery 端实现 WS-Security，则无法调用该服务。因此，为了调用服务方法，我们必须在安全性上做出妥协。

他们正在实施一个非安全`<wsHttpBinding>`端点。

但我希望我的`<wsHttpBinding>`意志是`<security mode="Message">`，
这种偏离路线不起作用并返回以下错误：

> 无法处理该消息。这很可能是因为“http://www.enghouse.com/CosmoCom/WebAdminAPIServiceLibrary/IQueue/GetAllQueues”操作不正确，或者因为消息包含无效或过期的安全上下文令牌，或者因为绑定之间不匹配。如果服务由于不活动而中止通道，则安全上下文令牌将无效。为了防止服务过早中止空闲会话，请增加服务端点绑定的接收超时。

如果我将其更改为`<security mode="None">`它可以完美运行。

所以我的问题是我该如何实施`<security mode="Message">`？
我需要做什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T14:00:53.913

[查看 Ws.js](http://www.codeproject.com/Articles/373317/Ws-js-A-Ws-implementation-for-Node-js)。它是一个帮助实现 ws-security 的 JavaScript 库。

就我个人而言，只有当我必须将 Web 客户端与我没有源代码的现有 WCF 服务集成时，我才会这样做。开销太大，无法为 Web 客户端维护 SOAP 协议和 WCF 安全性而没有任何额外的好处。如果您控制此服务的源，我将使用[ASP.NET Web API](http://www.asp.net/web-api)为 Web 客户端提供一个 REST API，并使用带有 HTTP 基本安全性的 SSL。

# java - 在 Windows XP 上的 APPDATA 文件夹中创建文件夹（文件夹是只读的）

> ID：13249676
> 
> 赞同：0
> 
> 时间：2012-11-06T11:07:02.993
> 
> 标签：java, appdata

在我的 Java 应用程序中，我找到了 APPDATA 文件夹，然后尝试创建自己的子文件夹：

```
 if (System.getProperty("os.name").startsWith("Windows")) { 
        settingsDir = System.getenv("APPDATA") + "\\MyApp\\";

        if (!(new File(settingsDir)).isDirectory()) {
            if (!(new File(settingsDir)).getParentFile().mkdirs()) {
                Error("Failed to create directory " + settingsDir);
            }
        }
    } 
```

在 Windows XP 上这会失败，说无法创建文件夹。

隐藏的应用程序数据文件夹是只读的，显然无法更改。

这可能是创建新文件夹失败的原因吗？如果是这样，从 Java 在 APPDATA 文件夹中创建新文件夹的典型方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T14:34:18.180

哎呀，这似乎是我自己的代码中的一个错误。我在代码中有一个剩余`getParentFile()`部分。正确的版本是：

```
if (System.getProperty("os.name").startsWith("Windows")) { 
    settingsDir = System.getenv("APPDATA") + "\\MyApp\\";

    if (!(new File(settingsDir)).isDirectory()) {
        if (!(new File(settingsDir)).mkdirs()) {
            Error("Failed to create directory " + settingsDir);
        }
    }
} 
```

我在 APPDATA 文件夹的*父*文件夹中创建了一个文件夹。这是不允许的。

显然，虽然 APPDATA 文件夹的属性显示为“只读”，但允许在此目录中创建文件和文件夹。

我的坏，对不起噪音。我将把这个话题留在这里作为档案。

# jquery - 拉斐尔，分配数据后，我无法得到它

> ID：13249681
> 
> 赞同：0
> 
> 时间：2012-11-06T11:07:31.143
> 
> 标签：jquery, raphael

我通过循环分配数据值，但是当我检查每个元素时，没有找到任何属性......任何人纠正了我的功能？

```
var paper = new Raphael('slideContainer', 930, 420);

    //mainpage circles;-
var mainPageCircle = {
    circles :{
        cR:{color:'#730000',text:'Content'},
        cB:{color:'#004f74',text:'Consulting'},
        cG:{color:'#146c00',text:'Commerce'}
    },
    radious:100,
    stroke:10,
    strokeColor:'#fff',
    opacity:0.7
}

 $.each(mainCrProp.circles, function (n) {
        pCircles =  paper.circle(
                                     n==='cR' ? (paperWidth/2) - mainCrProp.radious/2 :
                                     n==='cB' ? paper.getById('cR').attr('cx') + mainCrProp.radious : (paperWidth/2),
                                     n==='cR' ? (paperHeight/2) - mainCrProp.radious/2 :
                                     n==='cB' ? paper.getById('cR').attr('cy') : 
                                     n==='cG' ? paper.getById('cR').attr('cy') + mainCrProp.radious : paperHeight/2,
                                     mainCrProp.radious)
        .attr({fill:this.color,'stroke-width':mainCrProp.stroke,stroke:mainCrProp.strokeColor,opacity:mainCrProp.opacity})
        .data('dClass',(i+'Group'))//i am setting my data..
        .id = n;
        //
        pText = paper.text(          n==='cR' ? (paperWidth/2) - mainCrProp.radious:
                                     n==='cB' ? paper.getById('cR').attr('cx') + mainCrProp.radious*1.5 : (paperWidth/2),
                                     n==='cR' ? (paperHeight/2) - mainCrProp.radious/2 :
                                     n==='cB' ? paper.getById('cR').attr('cy') : 
                                     n==='cG' ? paper.getById('cR').attr('cy') + mainCrProp.radious*1.5 : paperHeight/2,
                                     this.text)
        .data('dClass',(i+'Group'))//i am setting my data
        .id = n+'text';
        pGroup[i] = paper.set(pCircles,pText);
        i++;
    } )

    paper.forEach(function (el) {
        console.log(el.data('dClass'));// i  am not getting any data value..    
    } ) 
```

[样品工作在这里](http://jsfiddle.net/h6U87/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T13:26:02.660

好的，首先`id`是为您提供的，`Raphael`所以不要覆盖它。这就是为什么你失去了`data`我认为的原因，看看这个阅读`id`并设置一些的例子`user data`：

```
var paper = new Raphael('container',500,500);

for (var i = 0; i < 5; i++) {
paper.circle(10 + 25 * i, 10, 10)
     .attr({fill: "#000"})
    .data("myData", {customId: "customId:" + i})
     .click(function () {
        console.log(this.data("myData").customId);
 });
} 
```

这里的例子 - [http://jsfiddle.net/h6U87/3/](http://jsfiddle.net/h6U87/3/)

# java - 二维表和 NullPointerException

> ID：13249684
> 
> 赞同：0
> 
> 时间：2012-11-06T11:07:33.833
> 
> 标签：java

我对这段代码有疑问：

```
PointerCoords[][]srodki = new PointerCoords[n2][];

for(int i = 0; i < n2; i++)
{
        srodki[i] = new PointerCoords[n2];
}

for(int i = 0; i < n2; i++)
{
        for(int j = 0; j < n2; j++)
        {
                srodki[i][j].y = r + j*k;
                srodki[i][j].x = r + i*k;
        }

} 
```

为什么我会收到 NullPointerException？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T11:17:18.793

`srodki[i][j]`问题是您在执行插入之前没有初始化 的内容 ：

```
srodki[i][j].y = r + j*k;
srodki[i][j].x = r + i*k; 
```

所以首先，你需要执行：

```
srodki[i][j] = new PointerCoords(); 
```

然后就可以了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T11:10:25.503

在您的代码中，您不会初始化数组中的对象。`null`最初，除非您像这样显式初始化它们，否则所有数组元素都是：

```
for(int i = 0; i < n2; i++)
    {
            for(int j = 0; j < n2; j++)
            {
                    // your constructor goes here
                    srodki[i][j] = new PointerCoords();
                    srodki[i][j].y = r + j*k;
                    srodki[i][j].x = r + i*k;
            }

    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T11:11:37.707

因为您还没有**初始化***引用*。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-06T11:23:09.417

按如下方式初始化您的数组：

```
PointerCoords[][] srodki = new PointerCoords[n2][n2];
for (int i = 0; i < n2; i++) {
    srodki[i] = new PointerCoords[n2];
    for (int j = 0; j < n2; j++) {
       srodki[i][j] = new PointerCoords();
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-06T11:10:53.263

初始化数组后，它包含一个 n2 * n2 空值矩阵。

为了真正能够`PointerCoords`在数组内设置对象的属性，您必须首先执行

```
array[i][j] = new PointerCoords(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-06T11:13:19.373

避免空指针的正确方法是

```
PointerCoords[][]srodki = new PointerCoords[n2][];

    for(int i = 0; i < n2; i++)
    {
            srodki[i] = new PointerCoords[n2];
    }

    for(int i = 0; i < n2; i++)
    {
            for(int j = 0; j < n2; j++)
            {
                    srodki[i][j]= new PointerCoords(); // added line
                    srodki[i][j].y = r + j*k;
                    srodki[i][j].x = r + i*k;
            }

    } 
```

# c# - 日期时间精度？

> ID：13249688
> 
> 赞同：9
> 
> 时间：2012-11-06T11:07:39.630
> 
> 标签：c#, .net, datetime

*（忽略优化的编译器标志）*

这段代码会不会在某些系统上进入块？

```
if (Datetime.Now!=Datetime.Now)
{
 ...
} 
```

我的意思是，它如何评估这里的值？（是按顺序）？

是否存在条件*可能*为真的情况？

再次，*忽略*优化标志。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T11:10:04.340

`DateTime`精度为 100ns。但是在典型的实现中，`DateTime.Now`每隔几毫秒就会改变一次。

`Datetime.Now != Datetime.Now`可能是真的，但它极不可能发生。这是您在多线程代码中经常看到的典型竞争条件。即，您不应该依赖于`DateTime.Now`不更改，而是将副本存储在局部变量中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-06T11:25:05.280

`DateTime.Now`内部调用：

```
public static DateTime Now
{
    get
    {
        return DateTime.UtcNow.ToLocalTime();
    }
} 
```

在内部调用：

```
public static DateTime UtcNow
{
    get
    {
        long systemTimeAsFileTime = DateTime.GetSystemTimeAsFileTime();
        return new DateTime((ulong)(systemTimeAsFileTime + 504911232000000000L | 4611686018427387904L));
    }
} 
```

其中[GetSystemTimeAsFile](https://stackoverflow.com/questions/7685762/windows-7-timing-functions-how-to-use-getsystemtimeadjustment-correctly)是返回*系统*时钟信息的 WindowsAPI 函数。准确度取决于系统，所以。

如果您有延迟，由于不同的 get ( `DateTime.Now`) 之间的某种原因，它**可能会**产生足够不同的结果，导致相等比较器失败。但就我个人而言，在我的经验中，从未遇到过这种情况。

# wso2 - ESB 4.5.1 Windows 服务

> ID：13249690
> 
> 赞同：2
> 
> 时间：2012-11-06T11:07:43.943
> 
> 标签：wso2, esb, wso2esb, wso2carbon

WSO2 ESB 4.0.3 具有将 ESB 4.0.3 安装为 Windows 服务的安装包。在 WSO2 ESB 4.5.1 上，没有这样的软件包可以将 ESB 4.5.1 安装为 Windows 服务。

1.  是否有任何理由删除将 WSO2 ESB 4.5.1 作为 Windows 服务安装的包？
2.  我们在哪里可以找到将 WSO2 ESB 4.5.1 安装为 Windows 服务的包？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T11:32:45.917

与 WSO2 ESB 4.5.1 有完全相同的问题，并尝试了 YAJSW（Dileepas 答案）回答的费用。但没有奏效。

然后我提到这篇文章将[.bat 作为 Windows 服务运行](https://serverfault.com/questions/54676/how-to-create-a-service-running-a-bat-file-on-windows-2008-server)，并且能够使用这些产品将 WSO2 ESB 作为服务运行：

*   [AlwaysUp](http://www.coretechnologies.com/products/AlwaysUp/)：服务管理的绝佳应用。但代价高昂
*   [AppToService](http://www.basta.com/Product.aspx?pid=22#.ULnpopPjlbs)：简单易行。这就是我选择的产品。（有免费的 2.2 版本）

我现在正在使用 AppToService - 只需将 WSO2 ESB .bat 添加为服务。

不幸的是，除了免费的 AppToService，我尝试过的所有其他产品都不能正常工作（作为真正的 Windows 服务）。java 包装器（如 YAJSW）在某种程度上太复杂了，因为它正在替换现有的 .bat 脚本——我也不希望这样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T18:55:24.837

在 Carbon 4.0.0（WSO2 ESB 4.5.1 基于此）之后，该功能已从 WSO2 产品中删除，如果您需要使用 3rd 方项目对其进行配置，这篇[文章可能会对您有所帮助。](http://engwar.com/post/678)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-30T21:47:17.800

当您使用 YAJSW 运行任何 WSO2 Carbon 4.0 和更高版本的产品时，您需要使用配置为运行 WSO2 Carbon 产品的最小 wrapper.conf。要获取 wrapper.conf 和所需步骤，请参阅 [1] 中有关“作为 Windows 服务安装”的 Carbon 文档

谢谢，迪丽热巴

[1] [http://docs.wso2.org/wiki/display/Carbon403/Installing+as+a+Windows+Service](http://docs.wso2.org/wiki/display/Carbon403/Installing+as+a+Windows+Service)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-18T20:29:31.567

我用过[http://nssm.cc/usage](http://nssm.cc/usage)。只需告知**wso2server.bat**文件位置并感到高兴:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-27T20:55:03.973

[您可以使用YAJSW](http://yajsw.sourceforge.net/)将任何 Carbon 4.0.0 以上的产品作为 Windows 服务运行

# c++ - 避免最麻烦的解析

> ID：13249694
> 
> 赞同：6
> 
> 时间：2012-11-06T11:07:52.683
> 
> 标签：c++, most-vexing-parse

如何让编译器创建临时对象，在它们上使用默认构造函数而不定义函数？

```
struct B {};
template<class T> struct C {};

template<class T,class T1>
struct A
{
  A(const T& t,const T1& t1): m_t(t),m_t1(t1)
  {
    std::cout << __PRETTY_FUNCTION__ << "\n";
  }

  T m_t;
  T1 m_t1;
};

int main() {
  A< B , C<B> > a0( B() , C<B>() );   // Function definition
  A< B , C<B> > a1( B b , C<B> c );   // dito, *at least A(const T& t,const T1& t1) not called
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T11:11:03.350

您可以将其中一个参数包装在一组额外的括号中，以阻止它被解析为函数声明：

```
A< B , C<B> > a0( (B()) , C<B>() ); 
```

或者更好的是，如果您可以访问 C++11 编译器，请使用大括号初始化：

```
A< B , C<B> > a0{ B() , C<B>() }; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-06T11:11:33.410

两种方式：

1.  通过赋值初始化：

    ```
    auto a0 = A<B, C<B>>(B(), C<B>()); 
    ```

    请注意，在 C++17 之前，这会更改语义，因为它要求该类型可以使用复制或移动构造函数（即使这将被省略，因此生成的代码是相同的）。

2.  在至少一个参数周围使用更多括号：

    ```
    A<B, C<B>> a0((B()), C<B>()); 
    ```

要么工作。第二种方式可能不可读，“多余的”括号会让不熟悉这种行为的人感到惊讶。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-06T11:10:10.357

```
A< B , C<B> > a0((B()), (C<B>()));
//               ^   ^  ^      ^ 
```

使用外括号，每个参数只能是表达式而不是声明。

实际上，您只需要*其中一个*参数是这种情况，以防止整行被解析为表达式。你可以选择哪个，或者两者都做。

不要忘记在代码旁边写注释，解释“额外”括号是有充分理由的，否则天知道有一天会有人出现并在“次要”VCS 提交中删除它们。

# javascript - jQuery/Javascript 将函数绑定到窗口/文档而不指定事件

> ID：13249695
> 
> 赞同：1
> 
> 时间：2012-11-06T11:07:55.450
> 
> 标签：javascript, jquery, function, binding

无论如何在不使用事件或 setInterval/timeout 的情况下将函数绑定到文档/窗口？

我的意思是我想绑定函数，如：

```
$(document).bind(function(){
 //if element changed class remove element
}); 
```

也许这是一个愚蠢的问题，但我不想在元素上使用循环。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T11:22:07.820

如果您指的是“关于 DOM 更改”事件，请查看以下答案：

*   [DOM 属性更改时触发事件](https://stackoverflow.com/questions/4561845/firing-event-on-dom-attribute-change/)
*   [是否有任何“关于 DOM 更改”事件？](https://stackoverflow.com/questions/9470931/is-there-any-on-dom-change-event/)

# android - 带有日期选择器的 Android 文本微调器

> ID：13249696
> 
> 赞同：1
> 
> 时间：2012-11-06T11:07:55.940
> 
> 标签：android, android-4.0-ice-cream-sandwich, android-spinner, android-datepicker

我是 android 词的新手。

我正在做一个带有时间和日期选择器的文本视图微调器。

1.  默认情况下如何在文本视图中设置当前时间和日期。
2.  选择时间/日期并单击“设置”按钮后，为什么我的时间/日期选择为空

这是我的 activity_main.xml

```
<?xml version="1.0" encoding="utf-8"?><LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:paddingLeft="16dp"
android:paddingRight="16dp"
android:orientation="vertical" >

<TextView
    android:id="@+id/startTime"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"                 
    style="@android:style/Widget.Holo.Spinner" 
    android:onClick="showTimePickerDialog"/>
<TextView
    android:id="@+id/endTime"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"                 
    style="@android:style/Widget.Holo.Spinner" 
    android:onClick="showTimePickerDialog"/>
<TextView
    android:id="@+id/date"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"                 
    style="@android:style/Widget.Holo.Spinner" 
    android:onClick="showDatePickerDialog"/> 
```

这是我的 MainActivity.java

```
import java.util.Calendar;
import android.os.Bundle;
import android.app.Activity;
import android.app.DatePickerDialog;
import android.app.Dialog;
import android.app.DialogFragment;
import android.app.TimePickerDialog;
import android.text.format.DateFormat;
import android.view.Menu;
import android.view.View;
import android.widget.DatePicker;
import android.widget.TimePicker;

public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    public void showTimePickerDialog(View v) {
        DialogFragment newFragment = new TimePickerFragment();
        newFragment.show(getFragmentManager(), "timePicker");
    }

    public void showDatePickerDialog(View v) {
        DialogFragment newFragment = new DatePickerFragment();
        newFragment.show(getFragmentManager(), "datePicker");
    }

    public static class TimePickerFragment extends DialogFragment implements TimePickerDialog.OnTimeSetListener {

        @Override
        public Dialog onCreateDialog(Bundle savedInstanceState) {
            // Use the current time as the default values for the picker
            final Calendar c = Calendar.getInstance();
            int hour = c.get(Calendar.HOUR_OF_DAY);
            int minute = c.get(Calendar.MINUTE);

            // Create a new instance of TimePickerDialog and return it
            return new TimePickerDialog(getActivity(), this, hour, minute,
                    DateFormat.is24HourFormat(getActivity()));
        }

        public void onTimeSet(TimePicker view, int hourOfDay, int minute) {
            // Do something with the time chosen by the user
        }
    }

    public static class DatePickerFragment extends DialogFragment implements DatePickerDialog.OnDateSetListener {

        @Override
        public Dialog onCreateDialog(Bundle savedInstanceState) {
            // Use the current date as the default date in the picker
            final Calendar c = Calendar.getInstance();
            int year = c.get(Calendar.YEAR);
            int month = c.get(Calendar.MONTH);
            int day = c.get(Calendar.DAY_OF_MONTH);

            // Create a new instance of DatePickerDialog and return it
            return new DatePickerDialog(getActivity(), this, year, month, day);
        }

        public void onDateSet(DatePicker view, int year, int month, int day) {
            // Do something with the date chosen by the user
        }
    }
} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T04:39:42.923

您应该编写语句以在 TextView 上显示日期/时间。并定义为类变量。

```
View v = null;      

  public void showTimePickerDialog(View v) {
    this.v = v;
    DialogFragment newFragment = new TimePickerFragment();
    newFragment.show(getFragmentManager(), "timePicker");

} 
```

和

```
public void onTimeSet(TimePicker view, int hourOfDay, int minute) {
        // Do something with the time chosen by the user
         v.setText(""+hourOfDay+":"+minute);

    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T08:39:34.993

我看到的问题是您的`DatePickerFragment`and`TimePickerFragments`是静态的，因此他们无法访问您的活动的文本视图。如果它们不是静态的，那么您需要做的就是`timeTextView.setText(...)`在`onTimeSet(...)`方法内部。（顺便说一句，保持它们静态是好的，因为如果需要，您可以在另一个活动中重用。）

解决此问题的一种方法是创建一个额外的接口，然后在创建它们时将其传递给您的选择器对话框片段，然后进行回调。但是，当 OnDateSetListener 和 OnTimeSetListener 接口已经存在时，为什么要这样做呢？

我将仅参考下面的 DatePickerFragment，但同样适用于 TimePickerFragment。

您`MainActivity`应该实施`OnDateSetListener`，而不是您的`DatePickerFragment`. OnDateSetListener 中的一种覆盖方法是`onDateSet(...)`在 TextView 中设置日期。例如：

```
@Override
public void onDateSet(DatePicker view, int year, int monthOfYear,
        int dayOfMonth) {
    Calendar cal = new GregorianCalendar(year, monthOfYear, dayOfMonth);
    mDateTextView.setText(DATE_FORMATTER.format(cal.getTime()));
} 
```

你`DatePickerFragment`应该有一个构造函数，它接受一个`OnDateSetListener`作为参数并持有对它的引用。在此处查看如何实现您的 DatePickerFragment [https://gist.github.com/2935353](https://gist.github.com/2935353)

现在在你的内部`showDatePickerDialog(View v)`，像这样传递你的 MainActivity（它也是一个 OnDateSetListener）：

```
FragmentTransaction ft = getFragmentManager().beginTransaction();
DialogFragment newFragment = new DatePickerDialogFragment(MainActivity.this);
newFragment.show(ft, "date_dialog"); 
```

然后，当时间设置好后，实现“OnDateSetListener”的 MainActivity 将获得回调，并且您的 textview 将被更新。

希望这能澄清一点。

PS你还应该有空的构造函数`DatePickerFragment`，它会防止你的应用程序在设备旋转时崩溃。

# linux - HAL - UDISKS，人类可读，在 bash 脚本中将字节转换为千兆字节

> ID：13249698
> 
> 赞同：0
> 
> 时间：2012-11-06T11:08:03.857
> 
> 标签：linux, bash, shell

**第一个问题**

我目前在 bash 脚本中使用 HAL 来使用以下命令获取特定设备的大小。

```
HAL_SIZE=$(hal-get-property --udi $UDI --key storage.removable.media_size) 
```

结果（例如）：*4110188544/*

但是如何将此值转换为人类可读的格式，如 GB：

```
4 110 188 544 bytes = 3.82791138 gigabytes 
```

**第二个问题**

```
 for UDI in $(hal-find-by-property --key storage.bus --string usb)
do
    HAL_TMP=`hal-get-property --udi $UDI --key storage.removable.media_available`
    if [ "$HAL_TMP" = "true" ]; then
        HAL_DEV=$(hal-get-property --udi $UDI --key block.device)
        HAL_SIZE=$(hal-get-property --udi $UDI --key storage.removable.media_size)
        HAL_TYPE=$(hal-get-property --udi $UDI --key storage.drive_type) 
```

*是否有人对udisks*有一些过期，因为大多数 linux 发行版不再支持 HAL，所以我正在考虑使用*udisks*

我如何调整上述命令但使用*udisks*而不是*hal*

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T15:21:07.953

对 q1 的回答：

```
>bytes="4110188544/"; echo $(echo "scale=3;${bytes%/*}/1024/1024/1024"|bc)GB
3.827GB 
```

这会去除尾部的正斜杠并使用“bc”将字节转换为 GB。修改比例整数以提高准确性

# javascript - 在对象内声明变量给我错误

> ID：13249701
> 
> 赞同：2
> 
> 时间：2012-11-06T11:08:18.560
> 
> 标签：javascript, jquery

我正在尝试按如下方式在对象内创建变量，但它给了我错误。这是[演示](http://jsfiddle.net/wnFUn/)

下面是相同的代码

```
var One = {
    var var1, var2;
    init: function () {
      var1 = 'some1';
      var2 = 'some2';
    }        
}

One.init(); 
```

​</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T11:12:47.033

对象具有属性而不是变量：

```
var One = {
    prop: "",
    prop2: "",
    init: function() {
       this.prop = 'some1';
       this.prop2 = 'some2';
    }        
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T11:12:20.357

对象应如下所示：

```
var Object = {

  /**
   * Documantation.
   */
  var1: null,

  /**
   * Documantation.
   */
  var2: null,

  /**
   * Documantation.
   */
  init: function () {
    this.var1 = 'some1';
    this.var2 = 'some1';
  }
};

Object.init(); 
```

但是关于要完成的任务的更多信息会很好，答案会更清楚。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T11:17:42.747

作为替代方案，您可以这样做：

```
function One(Var1, Var2)
{
    this.var1 = Var1;
    this.var2 = Var2;
}

var OneExample = new One('some1','some2');

var OneExampleVar1 = OneExample.var1; 
```

编辑 - 这是一个[小提琴](http://jsfiddle.net/PDeEk/)演示

# android - ListView onScroll 导致 SocketException

> ID：13249704
> 
> 赞同：1
> 
> 时间：2012-11-06T11:08:25.177
> 
> 标签：android, listview, socketexception

我的 ListView 从 Web 服务器获取数据。

最初将获取 10 个项目，然后再滚动 10 个，依此类推。

这适用于 4-5 卷轴，但后来给出了这个例外：

```
java.net.SocketException: Socket closed. 
```

在这之后：

```
E/OSNetworkSystem(27034): JNI EX in read 
```

有时而不是**Socket closed**，甚至会发生这种异常：

```
java.io.IOException: Attempted read on closed stream 
```

然后不是添加 10 个新项目，而是添加 10 个以前获取的项目。这是因为我没有替换适配器中使用的 ArrayList 中的项目，因为异常。

是什么导致了这个异常？

**编辑：**

它适用于前 3-5 次滚动，然后由于此异常而给我一些错误的数据（以前的数据），如果我继续滚动，它稍后会正常工作，稍后会随机再次给出异常。

**获取列表项的代码：**

*postData 从网络服务器获取数据*

```
public static String PostData(String url, String sa[][]) {

        DefaultHttpClient client = getThreadSafeClient();
        ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
        int n = sa.length;
        for (int i = 0; i < n; i++) {
            nameValuePairs.add(new BasicNameValuePair(sa[i][0], sa[i][1]));
            Log.d(sa[i][0], "" + sa[i][1]);
        }
        HttpPost httppost;
        try {
            httppost = new HttpPost(baseUrl + url);
        } catch (Exception e) {
        }
        try {
            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
        } catch (UnsupportedEncodingException e) {
        }
        HttpResponse response = null;
        try {
            response = client.execute(httppost);
        } catch (ClientProtocolException e) {
        } catch (IOException e) {
        } catch (Exception e) {
        }
        HttpEntity entity = response.getEntity();
        try {
            is = entity.getContent();
        } catch (IllegalStateException e) {
        } catch (IOException e) {
        }
        try {
            BufferedReader reader = new BufferedReader(new InputStreamReader(
                    is, "iso-8859-1"), 8);
            sb = new StringBuilder();
            sb.append(reader.readLine());
            String line = "0";
            while ((line = reader.readLine()) != null) {
                sb.append("\n" + line);
            }
            is.close();
            result = sb.toString();
        } catch (Exception e) {
        }
        return result;
    } 
```

*我在 PostData 中使用的 ThreadSafeClient*

```
 public static DefaultHttpClient getThreadSafeClient() {

    DefaultHttpClient client = new DefaultHttpClient();
    ClientConnectionManager mgr = client.getConnectionManager();
    HttpParams params = client.getParams();
    client = new DefaultHttpClient(new ThreadSafeClientConnManager(params,
            mgr.getSchemeRegistry()), params);
    return client;
} 
```

*AsyncTask 在我的 Activity 中获取新的数据 onScroll。这在 onScroll 中被调用*

```
AsyncTask{

ArrayList<item> itemList = new Arraylist<item>();
doInBackground(){

    String response = PostData(url, sa);
    //sa has namevaluepairs as a 2-dimensional array
    JSONArray JArray = new JSONArray(response);
    for(int i = 0; i < jArray.length; i++){

        itemList.add(convertToItem(JArrya.getJSONObject("items")));
    }
}
onPostExecute(){

    for(int i = 0; i < itemList.size(); i++){
        mListAdapter.add(itemList.get(i));
    }
    mListAdapter.notifyDataSetChanged();
}
} 
```

*它的代码很长，所以只粘贴重要的行*

任何帮助表示赞赏。

**编辑：**

将**PostData**方法更改为此后，它工作正常。

```
public static String PostData(String url, String sa[][]) {

    ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
    int n = sa.length;
    for (int i = 0; i < n; i++) {
        nameValuePairs.add(new BasicNameValuePair(sa[i][0], sa[i][1]));
    }
    HttpPost httppost;
    httppost = new HttpPost(baseUrl + url);
    httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

    HttpResponse response = null;
    response = client.execute(httppost);
    HttpEntity entity = response.getEntity();
    String res = EntityUtils.toString(entity);
    return res;
} 
```

那么，是不是因为前一种情况下**is(InputStream)**和**sb(Stringbuilder)**不是**局部变量**呢？

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T14:39:44.230

每次您的 ListView 的 y 坐标发生更改时都会调用 On scroll ，因此您可能会在滚动列表时与服务器建立许多连接，这可能会导致异常。

这可能对您有所帮助：http: [//benjii.me/2010/08/endless-scrolling-listview-in-android/](http://benjii.me/2010/08/endless-scrolling-listview-in-android/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T15:20:38.730

您的方法`PostData()`不是线程安全的，因为您使用了两个未在方法中定义的对象：

```
is = entity.getContent();
sb = new StringBuilder(); 
```

这导致来自其他正在运行的线程的 sockect 通过以下方式关闭：

```
is.close(); 
```

将它们都在本地定义为方法，它应该可以解决问题。

问候。

# actionscript-3 - AS3 - 任务切换后重新激活 Air for Android 中的“后退按钮”覆盖

> ID：13249707
> 
> 赞同：-1
> 
> 时间：2012-11-06T11:08:35.927
> 
> 标签：actionscript-3, air, air-android

我找不到这个问题的答案，也许这里有人可以帮助我。我正在使用 flash/as3 为 Android 编写游戏，并覆盖“后退”和“菜单”按钮。通过添加事件侦听器并防止默认设置可以正常工作：

```
NativeApplication.nativeApplication.addEventListener(KeyboardEvent.KEY_DOWN, myaction); 
```

但是，当我按下“主页”时，游戏会最小化（应该如此）。但是当用户在那之后返回游戏时，这些监听器将不再触发。创建我调用的新事件侦听`Event.ACTIVATE`器（因此当应用程序重新聚焦时）也无济于事。当用户任务切换回来时，如何“重新激活”后退按钮侦听器？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T15:15:49.893

好吧，我发现了“我的”错误。重新打开应用程序时，我调用了一行代码

“stage.displayState = StageDisplayState.FULL_SCREEN；”

....显然这禁用了键盘监听器。不知道为什么......但是地狱，它现在可以工作了^^

# ruby-on-rails-3.1 - 延迟作业错误 - DlayedJob 不是模块？

> ID：13249711
> 
> 赞同：0
> 
> 时间：2012-11-06T11:08:44.430
> 
> 标签：ruby-on-rails-3.1, delayed-job

我正在为我的应用程序使用 rails 3.1.3。对于后台作业延迟作业 2.1.4 正在使用。现在我正在尝试将延迟的作业更新到 3.x。

安装了delayed_job 3.x 和delayed_job_active_record gem。

在 bundle install 尝试运行 rails **generate delayed_job:active_record**和**rails generate delayed_job:upgrade**之后。但是两个生成器命令都抛出错误。第一次投掷

**无法加载生成器“generators/delayed_job/active_record_generator”。错误：DelayedJob 不是模块**

稍后投掷

**无法加载生成器“generators/delayed_job/upgrade_generator”。错误：DelayedJob 不是模块**

谁能告诉我一个解决方案以及我做错了什么。

谢谢问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T04:56:58.097

问题是，从delayed_jobs 旧版本升级到新版本时，延迟作业表已经存在。所以可能是延迟鲍勃生成器不会在那里。表结构的主要区别是一个名为**queue**的附加列。所以我们需要将此列添加到delayed_jobs 表中。生成器命令也做同样的工作。它生成迁移以更改表并添加列。我通过阅读源代码找到了它。所以我们可以手动编写一个迁移来改变表。

```
 rails g migration migration name 
```

然后将以下代码添加到迁移并运行迁移。

```
 def up
      add_column :delayed_jobs, :queue, :string
    end
    def down
      remove_column :delayed_jobs, :queue
    end 
```

现在您可以处理多个延迟的作业并根据队列分配作业。

# solr - Solr 查询语法问题

> ID：13249717
> 
> 赞同：3
> 
> 时间：2012-11-06T11:08:54.523
> 
> 标签：solr

我正在尝试使用 Solr 执行以下查询：

```
time:90000 OR (-time:[1521 TO *] AND -(time:[* TO 1519] OR time:[1521 TO *])) 
```

它只返回一个带有 tag 的结果`time=90000`，但我有两个`time`带有 value`90000`和`1520`. 我想要他们两个。

谁能给我一些解释？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T08:38:02.477

我找到了解决方案：当我执行否定查询时，我必须写：

> `*:* -<query>`

对于我的问题，解决方案是：

> `time:90000 OR (time:* -time:[1521 TO *] AND (time:* -(time:[* TO 1519] OR time:[1521 TO *])))`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T13:08:16.273

我认为这是因为仅在顶层允许否定查询。请参阅[http://wiki.apache.org/solr/SolrQuerySyntax](http://wiki.apache.org/solr/SolrQuerySyntax)

```
Pure negative queries (all clauses prohibited) are allowed. 
```

尝试将这些负面查询移出并在此处发布您的发现

# asp.net - 电子商务网站运行时服务器 CPU 保持 100%

> ID：13249718
> 
> 赞同：2
> 
> 时间：2012-11-06T11:08:56.443
> 
> 标签：asp.net, performance, iis-7, cpu-usage

我在 .NET umbraco 上开发了一个电子商务网站。部署后，我对 100 个用户（[loadimapct](http://loadimpact.com/)）进行了负载测试。当超过 30 个用户尝试访问该站点时，它会冻结并且 CPU 使用率保持在 100%，直到测试结束。该站点正在内部访问部署在 Tomcat 服务器上的索引引擎 (Fact-Finder)。这是情况的快照。

[快照](http://my.jetscreenshot.com/7391/20121106-xhtd-222kb.jpg)

我已经使用分析器检查了该站点，但是我看不到正在运行的繁重进程。

我已经使用 DebugDiag 工具（[在 IIS 7.x 应用程序池中排除高 CPU 故障](http://www.iis.net/learn/troubleshoot/performance-issues/troubleshooting-high-cpu-in-an-iis-7x-application-pool)）进行了检查。它表明 CPU 使用率很高，但我无法理解我网站上的哪个页面或资源造成了这种情况，所以我附上了一份报告。 [详细报告链接](http://www.streamfile.com/myid/nIDcoYgd3tW9)

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T12:14:53.543

您看到的症状可能是多种因素造成的。

故障排除和调试这些问题，以下工具将为您提供帮助。

1.  [调试诊断](http://www.microsoft.com/download/en/details.aspx?id=26798)
2.  性能监视器（`perfmon.exe`随 windows 一起提供）

您可以设置调试诊断以在 CPU 使用率超过时捕获内存转储，并使用自动转储分析可以帮助您确定根本原因。

有关更详细的分步说明，您可以按照[IIS 7.x 应用程序池中的高 CPU 故障排除中的步骤进行操作](http://www.iis.net/learn/troubleshoot/performance-issues/troubleshooting-high-cpu-in-an-iis-7x-application-pool)

# javascript - 如何使用 jQuery / javascript 对文本进行分页？

> ID：13249719
> 
> 赞同：5
> 
> 时间：2012-11-06T11:08:56.753
> 
> 标签：javascript, jquery, wordpress, pagination

## 这是简短的...

我需要使用 jQuery 或 javascript 对大量文本进行分页。现在我考虑过进行字符计数等，但问题是我没有使用等宽文本，所以这是行不通的。

相反，我使用的是动态输入的文本（直接来自我最好的朋友 wordpress）。

这是设置：

* * *

![我的设置](../Images/163da1ffd0776cd1e474a852f517a3e6.png)

* * *

我已将文本放在一个名为**bodytext**的 div 中，它的溢出设置为 auto。这是它的样式：

```
.bodytext {
width: 465px;
height: 454px;
display: block;
position: absolute;
display: block;
margin: 136px 25px;
font-family: 'Gentium Basic', serif;
color: #141414;
line-height: 1.5;
line-height: 1.5;
font-size: 17px;
overflow: hidden;
} 
```

无论如何...文本溢出。

我想要做的是创建一系列 div（带有**bodytext**类），所有这些都在彼此旁边，我可以将我的按钮连接起来以在它们之间切换。

不过，我发现了这一点很好的信息：每 18 行我需要创建一个新的 div。

**我不知道如何解决这个问题。**

我还需要它能够处理大量文本......一次可能最多 1000 个单词......导致说 10 页......

* * *

任何帮助都会很可爱！谢谢阅读！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-12-28T20:27:34.377

这个概念证明可以工作（也适用于 css3 列），但要注意，这会消耗 CPU；它是 DOM 密集型的，并且需要 jQuery。

这需要将文本分成更短的段落（或任何其他标记），但如果文本太大，甚至应该可以在客户端进行。

伪标记：

```
文章
  标题，介绍等
  部分
    带有（文本）内容的段落、div、span 等

```

代码：

```
function paginate() {
  var screen_height = $(window).height();
  var max_page_height = screen_height * 0.8;

  var articles = $('article').toArray().map(function(node) {
    node = $(node);
    var sections = node.find('section');

    return {
      node: node,
      sections: sections,
      sectionChildren: sections.children(),
    };
  });

  function appendNewSection(article) {
    var section = $('<section class="columns page">')
    article.append(section);
    return section;
  }

  function re_paginate(article) {
    article.sections.detach(); // Important magic
    var section = appendNewSection(article.node);

    // Clone `sectionChildren` and append to DOM
    article.sectionChildren.clone().each(function(_, child) {
      child = $(child);

      if (section.height() > max_page_height) {
        section = appendNewSection(article.node);
      }

      if (child.is('ul') || child.is('ol')) {
        // Split list into shorter lists
        // NOTE! This approach can also be used to split long paragraphs...
        var list_children = child.children();
        list_children.detach(); // Important magic
        var blueprint = child.clone(); // Empty list blueprint
        var list = child;

        section.append(list);

        list_children.each(function(_, list_child) {
          if (section.height() > max_page_height) {
            // Append a new section with a new list and continue appending `list_children` therein
            section = appendNewSection(article.node);
            list = blueprint.clone();
            section.append(list);
          }
          list.append(list_child);
        });
      }
      else {
        section.append(child);
      }
    });
  }

  // Re-paginate articles
  confirm('Paginate articles to screen height?') && articles.filter(re_paginate);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T12:40:05.333

假设您的目标浏览器支持 CSS3 多列布局，它将完成这项工作：http: [//caniuse.com/#feat=multicolumn](http://caniuse.com/#feat=multicolumn)

您需要裁剪文本的外部 div、具有固定宽度和高度的列的内部 div 以及可以修改内部 div 左侧边距的按钮。

许多功能只是部分支持（根据我的经验 Opera 表现最好），但对于许多情况来说应该足够了。请参阅[http://www.w3.org/TR/css3-multicol/](http://www.w3.org/TR/css3-multicol/)，您可以在其中找到许多很好的示例（尤其是示例 XXIII，“多列元素之外的分页和溢出”）。

# mysql - 选择连接表的列值作为结果列名

> ID：13249724
> 
> 赞同：2
> 
> 时间：2012-11-06T11:09:22.587
> 
> 标签：mysql, sql, wordpress, join, pivot

我有一个带有下表的 WordPress 数据库

帖子

```
+--------------+
| Field        |
+--------------+
| ID           |
| post_author  |
| post_title   | 
| post_type    | 
+--------------+ 
```

后元

```
+--------------+
| Field        |
+--------------+
| meta_id      |
| post_id      |
| meta_key     |
| meta_value   |
+--------------+ 
```

并有记录`meta_key`值`latitude`和`longitude`

如何编写 SQL 来显示`latitude`并`longitude`作为结果列名？

```
+--------------+
| Field        |
+--------------+
| ID           |
| post_author  |
| post_title   |
| latitude     |
| longitude    | 
+--------------+ 
```

下面的查询是我的起点

```
SELECT ID, post_title, meta_key, meta_value FROM `wp_posts` 
LEFT JOIN `wp_postmeta` on ID=post_id 
WHERE post_type='place' AND (meta_key='latitude' OR meta_key='longitude') 
ORDER BY ID ASC 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T11:27:49.427

听起来你想要and值`PIVOT`。不幸的是，MySQL 没有函数，但您可以使用带有语句的聚合函数来复制它：`latitude``longitude``PIVOT``CASE`

```
SELECT p.ID, 
  p.post_title, 
  p.post_author,
  max(case when pm.meta_key='latitude' then pm.meta_value end) latitude,
  max(case when pm.meta_key='longitude' then pm.meta_value end) longitude
FROM `wp_posts` p
LEFT JOIN `wp_postmeta` pm
  on p.ID=pm.post_id 
WHERE p.post_type='place' 
  AND (pm.meta_key='latitude' OR pm.meta_key='longitude') 
GROUP BY p.ID, p.post_title, p.post_author
ORDER BY p.ID ASC 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/93d5b/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T11:29:15.020

你可以使用这样的东西：

```
SELECT
  wp_posts.ID,
  wp_posts.post_title,
  wp_post_1.meta_value as latitude,
  wp_post_2.meta_value as longitude
FROM
  wp_posts
  LEFT JOIN wp_postmeta wp_post_1
  ON wp_posts.ID=wp_post_1.post_id and wp_post_1.meta_key = 'latitude'
  LEFT JOIN wp_postmeta wp_post_2
  ON wp_posts.ID=wp_post_2.post_id and wp_post_2.meta_key = 'longitude'
WHERE post_type='place'
ORDER BY ID ASC 
```

# objective-c - NSURLConnections 是否属于我的模型或控制器？

> ID：13249728
> 
> 赞同：5
> 
> 时间：2012-11-06T11:09:33.133
> 
> 标签：objective-c, ios, xcode, cocoa-touch, cocoa

假设我使用**JSON**或**XML** API 从使用异步 NSURLConnection 的 URL 获取有关我的项目的数据，将其解析为**NSMutableArray**，然后填充**NSTableView**。

我有一个模型：**项目** 我有一个控制器：**TableViewController**（充当表数据源和委托）

**我应该将启动请求并将结果解析为NSMutableArray**的代码放在哪里。

我应该有：

1：

Project 中的一个方法调用`-(NSMutableArray* ) getAllProjects`并从我的 Controller 调用它。

或 2：

我是否应该枚举**Project*对象的****NSMutableArray**，例如在我的控制器中调用**ProjectsArray* ；**每次打电话？****`[[Project alloc] init]`****

 ****选项 1 对我来说更有意义，因为我可能想从多个控制器中获取所有项目，这样可以节省重复代码，我只需要在我的项目模型中调用公共方法。在这种情况下，我会做很多`[[self alloc] init]`陈述吗？这个可以吗？我的模型也需要是一个**NSURLConnection**委托。它是否正确？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T14:31:22.940

**毫无疑问，它必须在您的模型中。**

原因 ：

因为您将需要从不同的控制器多次更新它，所以您将来可以使用 KVO。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T16:39:13.487

根据我的经验，我认为好的方法是在模型（ProjectsArray）中使用解析例程，在另一个类中使用连接内容，它会启动连接并返回原始 NSData（例如通过委托），然后将其传递给模型解析它。这样您的模型或视图控制器将不会有多个角色。

至于`[[Project alloc] init]`每次需要数据时调用 - 您可以在模型类中使用静态引用，然后通过类似的方式获取它`- (ProjectsArray *)instance`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T04:14:34.020

```
/*
 * UITableViewController has the word "controller" in it but that
 * does not make it a controller... it's a view. Pure and simple.
 *
 * /This/ is a controller...
 */

@implementation MyController 

@synthesize data; // assume readonly @property in interface

-(void)fetchData {

   NSURLConnection *connection;

   // Set up URL connection, etc. Speaking very loosely, and
   // lossing over some important threading details...

   NSURLResponse *response = GetResponse();

   NSError *__autoreleasing error;

   @autoreleasepool {
      // build objects. premature optimization is the root of all evil,
      // but if you're really worried about too much allocation, you
      // can resist duplication with custom logic in parse().
      self.data = parse([response data], &error);
   }

   if (data == nil) {
     // Error notification
   }

   else { // Success notification
      NSNotification *didFetch = [NSNotification notificationWithName:@"didFetch" object:self.data userInfo:nil];
      [[NSNotificationCenter defaultCenter] performSelectorOnMainThread:@selector(postNotification:) withObject:didFetch waitUntilDone:NO];
   }
}

@end

@interface MyTableViewController ()
   @property (unsafe_unretained) MyController *controller;
   @property (strong, nonatomic) NSArray *dataView;
@end

@implementation MyTableViewController

@synthesize controller = _controller;
@synthesize dataView = _dataView;

-(void)viewDidLoad {
   _controller = [MyController controller]; // singleton
   [[NSNotificationCenter defaultCenter] addObserver:self
                                            selector:@selector(updateData:)
                                                name:@"didFetch"
                                              object:nil];
}

-(IBAction)buttonPress {
   [_controller fetchData]; // again, I'm glossing over threading details...
}

-(void)updateData {
   // Controller owns the data, we just get a view of it here.
   self.dataView = [[_controller data] arrayOfSomeSort];
   [self.view reloadData];
}

@end 
```****

# xslt - 我可以使用 XSL 获取 MSBuild 项目中包含的所有文件的列表吗？

> ID：13249730
> 
> 赞同：1
> 
> 时间：2012-11-06T11:09:48.583
> 
> 标签：xslt, msbuild

行。我有一个文件 application.proj ，它看起来像......

```
<?xml version="1.0"?>
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003" DefaultTargets="PreBuild;Build;PostBuild;Deploy;PostDeploy;Test" >

    <PropertyGroup>
        <ApplicationName>application</ApplicationName>
        <SolutionPath>C:\Projects\application\Solution\application.sln</SolutionPath>
    </PropertyGroup>

    <Import Project="$(SolutionPath)\SharedBuild.properties"/>
    <Import Project="$(ApplicationName).properties"/>
</Project> 
```

每个包含的项目也可以包括无限的项目。所以我想要一些方法来深入研究并获得每个文件的实际路径。

我可以在 XSL 中执行此操作，还是需要恢复为 C# 或其他方式？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T09:15:20.503

根.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<Project>  
  <PropertyGroup>
    <ApplicationName>application</ApplicationName>
  </PropertyGroup>

  <Import Project="project1.xml"/>
  <Import Project="project2.xml"/>
</Project> 
```

项目1.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<Project>  
  <PropertyGroup>
    <ApplicationName>project1</ApplicationName>
  </PropertyGroup>
  <Import Project="project3.xml"/>
</Project> 
```

项目2.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<Project>  
  <PropertyGroup>
    <ApplicationName>project2</ApplicationName>
  </PropertyGroup>
</Project> 
```

项目3.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<Project>  
  <PropertyGroup>
    <ApplicationName>project3</ApplicationName>
  </PropertyGroup>
</Project> 
```

那么这可能是那种事情？

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:xs="http://www.w3.org/2001/XMLSchema"
  version="2.0">

  <xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes"/>

  <xsl:template match="/">
    <projects>
      <!--<xsl:sequence select="test:project(document-uri(.), /Project)" />-->
      <xsl:apply-templates select="/Project">
        <xsl:with-param name="cur-path" select="document-uri(.)" />
      </xsl:apply-templates>
    </projects>
  </xsl:template>

  <xsl:template match="Project">
    <xsl:param name="cur-path" as="xs:anyURI" />
    <project path="{$cur-path}">
      <name><xsl:value-of select="//ApplicationName" /></name>
    </project>
    <xsl:for-each select="//Import">
      <xsl:variable name="path" select="resolve-uri(@Project, $cur-path)" />
      <xsl:apply-templates select="document(@Project)/Project">
        <xsl:with-param name="cur-path" select="$path" />
      </xsl:apply-templates>
    </xsl:for-each>
  </xsl:template>
</xsl:stylesheet> 
```

针对 root.xml 运行给出：

```
<?xml version="1.0" encoding="UTF-8"?>
<projects xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:test="urn:test">
   <project path="file:/C:/Dropbox/Public/xsl/recursive/root.xml">
      <name>application</name>
   </project>
   <project path="file:/C:/Dropbox/Public/xsl/recursive/project1.xml">
      <name>project1</name>
   </project>
   <project path="file:/C:/Dropbox/Public/xsl/recursive/project3.xml">
      <name>project3</name>
   </project>
   <project path="file:/C:/Dropbox/Public/xsl/recursive/project2.xml">
      <name>project2</name>
   </project>
</projects> 
```

# jquery - jQuery列表框onChange刷新第二个列表框选项

> ID：13249733
> 
> 赞同：1
> 
> 时间：2012-11-06T11:10:01.127
> 
> 标签：jquery, forms, select, drop-down-menu, listbox

我有一个搜索表单，用户可以在其中选择事件、地区、地方当局、地点等。地区、地方当局和地点搜索字段是列表框。

地方当局和地点都分配给一个区域，所以我想要做的是在从列表中选择一个区域时更新这两个下拉列表，以便只向用户显示相关值。

有没有办法用 jQuery 来做这件事，不需要我提交表单，因为这将执行查询，尽管用户可能没有选择他们想要的所有搜索字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T11:55:47.613

```
 $('#IDofRegionList').change(function(){
      $("select").remove();
      $("IDofVenue").append ("<option value=anything> anything </option>");
    }); 
```

# html-table - 比萨html2pdf转换表不将高度应用于td

> ID：13249738
> 
> 赞同：3
> 
> 时间：2012-11-06T11:10:03.990
> 
> 标签：html-table, html2pdf, pisa

我使用**pisa xhtml2pdf**将 html 代码转换为 pdf。

我有个问题！比萨没有对我的表格应用一些样式，例如**高度**和**垂直对齐**

```
<table style='overflow: hidden;' border='1' cellpadding='0' cellspacing='0' 
width="300px">
<tr style="background-color : yellow; height:100px;">
<td style="color: red; height:100px; vertical-align: middle;">
A lot of  data
</td></tr></table> 
```

但是在将此html转换为pdf后，表格tds和vertical-align的高度不正确！请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T15:12:11.537

您还需要为`height:100px;`表格指定一个高度（）例如：

```
<table style='overflow: hidden; height:100px;' border='1' cellpadding='0' cellspacing='0' width="300px">
    <tr style="background-color : yellow;height:100px;">
        <td style="color: red; height:100px; vertical-align: middle;">
            <!-- A lot of  data -->
        </td>
    </tr>
</table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-30T07:20:25.647

我设法通过这个 hack 获得了单元格的高度：

```
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr>
    <td width="100%" style="border: 1px solid #000"><!-- content goes here --></td>
    <td width="0"><br><br><br><br><br></td><!-- special cell to keep the height of the table -->
</tr>
</table> 
```

第二个单元格完全不可见，上面的代码绘制了一个宽度为 100% 的框，高度由第二个单元格中的 <br>s 数量或第一个单元格中的文本数量定义（以较长者为准）

# php - google-api-php-client-0.5.0 回调网址？

> ID：13249741
> 
> 赞同：4
> 
> 时间：2012-11-06T11:10:09.973
> 
> 标签：php, api, google-api

我是集成 api 的新手，我正在尝试使用 `google-api-php-client-0.6.0`，我在 Google 注册了我的应用程序，还在`simple.php`dev.siva.com 虚拟主机中配置了它们

```
<?php
/*
 * Copyright 2012 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

require_once 'src/Google_Client.php';
session_start();

$client = new Google_Client();
$client->setApplicationName('Google Contacts PHP Sample');
$client->setScopes("http://www.google.com/m8/contacts/");
// Documentation: http://code.google.com/apis/gdata/docs/2.0/basics.html
// Visit https://code.google.com/apis/console?api=contacts to generate your
// oauth2_client_id, oauth2_client_secret, and register your oauth2_redirect_uri.
// $client->setClientId('insert_your_oauth2_client_id');
// $client->setClientSecret('insert_your_oauth2_client_secret');
// $client->setRedirectUri('insert_your_redirect_uri');
// $client->setDeveloperKey('insert_your_developer_key');

if (isset($_GET['code'])) {
  $client->authenticate();
  $_SESSION['token'] = $client->getAccessToken();
  $redirect = 'http://' . $_SERVER['HTTP_HOST'] . $_SERVER['PHP_SELF'];
  header('Location: ' . filter_var($redirect, FILTER_SANITIZE_URL));
}

if (isset($_SESSION['token'])) {
 $client->setAccessToken($_SESSION['token']);
}

if (isset($_REQUEST['logout'])) {
  unset($_SESSION['token']);
  $client->revokeToken();
}

if ($client->getAccessToken()) {
  $req = new Google_HttpRequest("https://www.google.com/m8/feeds/contacts/default/full");
  $val = $client->getIo()->authenticatedRequest($req);

  // The contacts api only returns XML responses.
  $response = json_encode(simplexml_load_string($val->getResponseBody()));
  print "<pre>" . print_r(json_decode($response, true), true) . "</pre>";

  // The access token may have been updated lazily.
  $_SESSION['token'] = $client->getAccessToken();
} else {
  $auth = $client->createAuthUrl();
}

if (isset($auth)) {
    print "<a class=login href='$auth'>Connect Me!</a>";
  } else {
    print "<a class=logout href='?logout'>Logout</a>";
} 
```

我能够登录，并将重定向 url 提供给上述代码，我正在被重定向，但问题是我无法连接页面。为什么？

重定向后的url是这样的

```
 https://dev.siva.com/simple.php?code=4/hqJo9FDtjcn46uuP6JXE
DuWLKTQn.Eo91flf65bgaXE-sT2ZLcbRbNNSqdQI 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T08:31:06.127

您不能将虚拟主机用作重定向 uri - 有关详细信息，请参阅[https://developers.google.com/accounts/docs/OAuth2InstalledApp 。](https://developers.google.com/accounts/docs/OAuth2InstalledApp)所以你有两个选择 - 在 {http://localhost} 上处理它或在标题栏中获取代码而不是查询参数。我会选择第一个。

# ms-access - 的意思 ！和 。在访问对象和属性时

> ID：13249751
> 
> 赞同：1
> 
> 时间：2012-11-06T11:10:28.257
> 
> 标签：ms-access, vba

在 MS Access 中编程时，在某些地方对象由`!`运算符引用，其属性由`.`运算符引用。

例如，

```
Forms![Form Name].Visible 
```

我只是想知道，有没有什么具体的方法可以知道什么是什么？我的意思是我们如何确定`!`是要使用还是`.`要使用？

另外，是否有任何具体原因，为什么对象和属性使用两个不同的符号？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T15:26:29.517

句点始终用于属性和方法。
前任：`recordset.MoveNext`

感叹号用于子对象。您将使用的最常见的子对象是表的字段。
前任：`recordset!fieldname = "John"`

在上面的示例中，[Form Name] 是表单集（包括所有表单）的子表单。[] 用于带有空格的对象。

**警告**：访问是相当宽容的，通常会允许使用句号而不是感叹号。
例如：`recordset.fieldname = "John"`
这是糟糕的编码，但我举了一个例子，所以当你看到它时你不会感到困惑。

# tomcat - Tomcat7 中的多主机与服务

> ID：13249753
> 
> 赞同：1
> 
> 时间：2012-11-06T11:10:33.507
> 
> 标签：tomcat, web-applications

我在多个端口上运行多个网络应用程序。而且我想知道在同一服务中运行多个主机与使用不同主机运行多个服务之间的真正区别是什么。

我知道这可以用来共享连接器，但是还有什么比其他更好的原因吗？

**配置 1：多台主机**

```
 <Engine>
            //APP 1
            <Host>
                <Context .... />
            </Host>
            //APP 2
            <Host>
                <Context .... />
            </Host>
        </Engine>
    </Service>
</Server> 
```

**配置 2：多个服务**

```
<Server>
    //APP 1
    <Service>
        <Connector ... />
        <Connector ... />

        <Engine>
            <Host>
                <Context .... />
            </Host>
        </Engine>
    </Service>
    //APP 2
    <Service>
        <Connector ... />
        <Connector ... />

        <Engine>
            <Host>
                <Context .... />
            </Host>
        </Engine>
    </Service>
</Server> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T20:10:43.910

拥有单独的 s 的唯一真正充分的理由`<Service>`是，如果您想要一个`<Connector>`将（或不会）服务于`<Host>`s 或（因此）`<Context>`s 的特定子集的服务。

# php - 网络爬虫：仅获取有用的 html 内容以加快 php 中的获取速度

> ID：13249754
> 
> 赞同：1
> 
> 时间：2012-11-06T11:10:41.337
> 
> 标签：php, web, web-crawler

我正在设计一个网络爬虫来从网站获取产品列表。我尝试过**简单的 HTML DOM 解析器**和**file_get_contents()**来获取 HTML 并解析它。但是获取 HTML 内容需要花费太多时间。还有很多解析开销，因为它是一个巨大的页面。如果可能的话，我正在寻找一种方法来仅获取所需的 HTML 内容以加快获取速度。喜欢.. 在 file_get_contents() 中使用 offset 和 maxlen 参数。但是远程文件不支持搜索（偏移）。

```
 string file_get_contents ( string $filename,false, 9000, 5000) 
```

还有其他方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T08:30:11.447

`Range`可以使用请求中的标头在 HTTP 协议级别执行此操作。但是，不能保证其他服务器理解或尊重它们。此外，您*真的*知道您感兴趣的内容的确切字节偏移量吗？听起来那会很脆。此外，如果您只获取部分 HTML 文档，您可能很难解析它。

查看有关设置 HTTP 标头的 Contexts的`$context`参数和相关文档并尝试使用标头。`file_get_contents``Range`

# c - 来自 -Wcast-qual 的显式忽略警告：cast 从指针目标类型中丢弃 '__attribute__((const))' 限定符

> ID：13249756
> 
> 赞同：8
> 
> 时间：2012-11-06T11:10:42.913
> 
> 标签：c, gcc, warnings

```
static char buf[8];
void foo(){
    const char* ptr = buf;
    /* ... */
    char* q = (char*)ptr;
} 
```

上面的代码片段将生成`"warning: cast discards ‘__attribute__((const))’ qualifier from pointer target type [-Wcast-qual]"`. 我喜欢`-Wcast-qual`它，因为它可以帮助我避免意外写入我不应该写入的内存。

但现在我只想抛弃 const 一次（而不是整个文件或项目）。它指向的内存是可写的（就像`buf`上面一样）。我宁愿不删除 const ，`ptr`因为它在其他地方使用并且保持指针（一个 const 和一个非常量）似乎是一个更糟糕的主意。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-07-29T14:01:56.853

```
#include <stdint.h>

const char * ptr = buf;
....
char * p = (char *)(uintptr_t)ptr; 
```

或者，没有 stdint.h：

```
char *  p = (char *)(unsigned long)ptr; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-06T15:17:27.283

在 GCC 4.2 及更高版本中，您可以使用#pragma 来抑制函数的警告。缺点是您必须在整个函数中抑制警告；您不能只将它用于某些代码行。

```
#pragma GCC diagnostic push  // require GCC 4.6
#pragma GCC diagnostic ignored "-Wcast-qual"
void foo(){
    const char* ptr = buf;
    /* ... */
    char* q = (char*)ptr;
}
#pragma GCC diagnostic pop   // require GCC 4.6 
```

优点是您的整个项目可以使用相同的警告/错误检查选项。而且您确实知道代码的作用，只是让 GCC 忽略对一段代码的一些显式检查。
由于这个 pragma 的限制，你必须从当前函数中提取必要的代码到新函数中，并用这个#pragma 单独创建新函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-08T12:10:21.293

只要您对 GCC/clang 特定代码没问题，那么[这](https://github.com/gcc-mirror/gcc/blob/da8dff89fa9398f04b107e388cb706517ced9505/gcc/tsystem.h#L131-L132)应该可以完成工作：

```
#define CONST_CAST2(TOTYPE,FROMTYPE,X) ((__extension__(union {FROMTYPE _q; TOTYPE _nq;})(X))._nq)
#define CONST_CAST(TYPE,X) CONST_CAST2 (TYPE, const TYPE, (X))

const char *ptr = buf;
char *q = CONST_CAST(char *, ptr); 
```

或者，基于[Is cast of pointer to anonymous union 在 C11 中有效吗？](https://stackoverflow.com/questions/51231405/is-cast-of-pointer-to-anonymous-union-valid-in-c11)：

```
#define CONST_CAST2(TOTYPE,FROMTYPE,X) ((union {FROMTYPE _q; TOTYPE _nq;}){._q=constBoo}._nq) 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-12-20T20:47:20.053

有点晚了，但你也可以做到这一点，而完全不用警告：

```
static char buf[8];
void foo(){
    const char* ptr = buf;
    /* ... */
    char* q = buf + (ptr-buf);
} 
```

您最终得到`q = buf + ptr - buf = ptr + buf - buf = ptr`，但具有`buf`' 常数。

（是的，这允许您`const`从任何指针中删除；`const`是建议性的，而不是安全机制。）

# autocomplete - 使用 KnockoutJS 的自动完成选项

> ID：13249761
> 
> 赞同：0
> 
> 时间：2012-11-06T11:10:49.567
> 
> 标签：autocomplete, knockout.js

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T13:25:21.230

我可以使用 [https://github.com/madcapnmckay/Knockout-UI/tree/master/examples让自动完成文本框工作](https://github.com/madcapnmckay/Knockout-UI/tree/master/examples)

# postgresql - 按不同时间间隔过滤数据

> ID：13249768
> 
> 赞同：0
> 
> 时间：2012-11-06T11:11:06.470
> 
> 标签：postgresql

我需要用不同的时间间隔过滤我的查询，如下所示：

```
...
where
date >= '2011-07-01' and date <='2011-09-30'
and date >='2012-07-01' and date >='2012-09-30' 
```

我想这样的代码不好，因为这些日期相互冲突。但是如何仅过滤这两个间隔，跳过其他所有内容？甚至可能吗？因为如果我这样查询，我不会得到任何结果。我尝试使用 BETWEEN，但它做同样的事情。

我通过从年份中提取季度并仅计算第三季度来绕过这一点。但是其他季度的总和显示为零，我不能忽略这些总和列为零值的行。我试图过滤哪里`price > 0`（总和所在的列），但它说该列不存在。所以我把它全部`FROM`放在'（''）'括号下，使它在where子句之前计算总和，但它仍然给我这样的列不存在的错误。

另外，如果您需要查看我现在的查询，我可以发布它，只需告诉我是否需要。

我想这样做，因为我需要比较两个不同年份的第三季度（也许我应该使用另一种方法）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T11:57:45.463

你不会得到任何结果，因为你不能有一个日期在 2011 年 7 月 1 日到 2011 年 9 月 30 日之间以及 2012 年 7 月 1 日之后和 2012 年 9 月 30 日之后。

您的日期**可以**在 20122 年 7月 1 日到 2011 年 9 月 30 日之间**或**2012 年 7 月 1 日到 2012 年 9 月 30 日之间。

```
SELECT col1 FROM table1
WHERE date BETWEEN '7/1/2011' AND '9/30/2011' OR date BETWEEN '7/1/2012' AND '9/30/2012'; 
```

# ruby-on-rails - Paperclip::Errors::NotIdentifiedByImageMagickError:

> ID：13249770
> 
> 赞同：6
> 
> 时间：2012-11-06T11:11:09.520
> 
> 标签：ruby-on-rails, paperclip, identify

使用回形针上传图片错误：

命令 :: identify -format %wx%h '/tmp/103120121106-20384-i7dnzy.png[0]' [paperclip] 处理时收到错误： **# < Paperclip::Errors::NotIdentifiedByImageMagickError: /tmp/103120121106- 20384-i7dnzy.png 无法被“识别”命令识别。>**

我发现识别：

```
joinall@nxbbs-server:/nxbbs$ type identify  
identify is hashed (/usr/local/bin/identify) 
joinall@nxbbs-server:/nxbbs$ convert logo: 2.jpg 
joinall@nxbbs-server:/nxbbs$ identify  2.jpg
2.jpg GIF 640x480 640x480+0+0 8-bit sRGB 256c 31.7KB 0.000u 0:00.000 
```

在 config/environments/development.rb

```
 Paperclip.options[:command_path] = "/user/local/bin" 
```

在 app/models/user.rb

```
attr_accessible :avatar
has_attached_file :avatar, :styles=> {:s120 => "120x120>",:s48 => "48x48>",:s16 => "16x16>"} 
```

请帮助我，我找不到问题

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T04:09:38.407

我遇到了类似的问题，我发现我使用的是 Paperclip 2.5，而 Paperclip 内部使用的是可卡因宝石。可卡因 0.4.2 不向后兼容，所以我将可卡因降级为 0.3.2，这一切都很神奇。在您的 Gemfile 中，只需编写

```
gem 'cocaine', '0.3.2' 
```

并运行

```
bundle update 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-07T16:30:44.280

给我自己和通过谷歌搜索错误类型的任何其他人的说明：如果 Imagemagick 无法识别文件类型，它将抛出此错误。

当用户尝试上传图片时，我收到了这个错误。我一直无法重现该问题，这绝对不是卸载依赖项的问题。原来他们正试图上传一种无法识别的 mime 类型——相机原始图像。

# css - 网络字体什么时候加载，你可以预加载它们吗？

> ID：13249773
> 
> 赞同：26
> 
> 时间：2012-11-06T11:11:13.287
> 
> 标签：css, fonts, webfonts

我注意到在使用网络字体时，它们最初可能需要一秒钟才能出现；就像您创建一个下拉导航菜单一样，当您第一次将鼠标悬停在菜单上时，整个菜单将显示为背景颜色一秒钟，然后出现文本。

这并不是很理想，它让我相信加载 CSS 文件时不会下载 webfonts，而是在您第一次在页面上查看它们时下载。

但另一方面，我已经在我的电脑上安装了字体，所以不需要下载它们，所以这就提出了他们为什么要这样做的问题！？

这是我用来加载我的 webfonts 的 CSS：

```
@font-face {
    font-family: 'Roboto';
    src: url('../fonts/Roboto-Regular-webfont.eot');
    src: url('../fonts/Roboto-Regular-webfont.eot?#iefix') format('embedded-opentype'),
         url('../fonts/Roboto-Regular-webfont.woff') format('woff'),
         url('../fonts/Roboto-Regular-webfont.ttf') format('truetype'),
         url('../fonts/Roboto-Regular-webfont.svg#RobotoRegular') format('svg');
    font-weight: normal;
    font-style: normal;
}

@font-face {
    font-family: 'Roboto';
    src: url('../fonts/Roboto-Italic-webfont.eot');
    src: url('../fonts/Roboto-Italic-webfont.eot?#iefix') format('embedded-opentype'),
         url('../fonts/Roboto-Italic-webfont.woff') format('woff'),
         url('../fonts/Roboto-Italic-webfont.ttf') format('truetype'),
         url('../fonts/Roboto-Italic-webfont.svg#RobotoItalic') format('svg');
    font-weight: normal;
    font-style: italic;
}

@font-face {
    font-family: 'Roboto';
    src: url('../fonts/Roboto-Bold-webfont.eot');
    src: url('../fonts/Roboto-Bold-webfont.eot?#iefix') format('embedded-opentype'),
         url('../fonts/Roboto-Bold-webfont.woff') format('woff'),
         url('../fonts/Roboto-Bold-webfont.ttf') format('truetype'),
         url('../fonts/Roboto-Bold-webfont.svg#RobotoBold') format('svg');
    font-weight: bold;
    font-style: normal;
}

@font-face {
    font-family: 'Roboto';
    src: url('../fonts/Roboto-Light-webfont.eot');
    src: url('../fonts/Roboto-Light-webfont.eot?#iefix') format('embedded-opentype'),
         url('../fonts/Roboto-Light-webfont.woff') format('woff'),
         url('../fonts/Roboto-Light-webfont.ttf') format('truetype'),
         url('../fonts/Roboto-Light-webfont.svg#RobotoLight') format('svg');
    font-weight: 300;
    font-style: normal;
}

@font-face {
    font-family: 'Roboto';
    src: url('../fonts/Roboto-Medium-webfont.eot');
    src: url('../fonts/Roboto-Medium-webfont.eot?#iefix') format('embedded-opentype'),
         url('../fonts/Roboto-Medium-webfont.woff') format('woff'),
         url('../fonts/Roboto-Medium-webfont.ttf') format('truetype'),
         url('../fonts/Roboto-Medium-webfont.svg#RobotoMedium') format('svg');
    font-weight: 500;
    font-style: normal;
} 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-07T06:55:10.683

**什么时候下载 webfonts？**

Paul Irish 做了一个简单的页面来测试这个：[http ://dl.getdropbox.com/u/39519/webfontsdemo/loadtest.html](http://dl.getdropbox.com/u/39519/webfontsdemo/loadtest.html)

它表明大多数浏览器在页面中使用字体而不是在 CSS 中声明时下载字体。我相信 IE 是个例外，但我现在没有运行它来测试。

下载使用而不是声明的原因是为了减少不必要的网络流量，例如，如果声明了字体但未使用。

**可以避免字体下载吗？**

没错，如果字体已经安装，则不需要下载它们。正如@Patrick 上面所说，这可以使用`local()`. 它被放置`url()`在 CSS 的前面并采用字体的名称（Mac OS X 上的 Safari 随后需要 PostScript 名称）。尝试对您的 CSS 进行以下更改：

```
@font-face {
    font-family: 'Roboto';
    src: url('../fonts/Roboto-Regular-webfont.eot');
    src: local(Roboto Regular), local(Roboto-Regular),
         url('../fonts/Roboto-Regular-webfont.eot?#iefix') format('embedded-opentype'),
         url('../fonts/Roboto-Regular-webfont.woff') format('woff'),
         url('../fonts/Roboto-Regular-webfont.ttf') format('truetype'),
         url('../fonts/Roboto-Regular-webfont.svg#RobotoRegular') format('svg');
    font-weight: normal;
    font-style: normal;
} 
```

最后，为了减少字体下载时间，您可以确保执行以下操作：

*   将 CSS 放在 JavaScript 之前
*   为字体添加未来的`Expires`标题（以便浏览器缓存它们）
*   GZip 压缩字体

这是处理字体显示延迟的一个很好的总结：http: [//paulirish.com/2009/fighting-the-font-face-fout/](http://paulirish.com/2009/fighting-the-font-face-fout/)

# c# - 谷歌算法的虚线文本

> ID：13249778
> 
> 赞同：1
> 
> 时间：2012-11-06T11:11:30.323
> 
> 标签：c#, algorithm, google-maps

我想知道使用哪种算法`Google`在地图上显示文本（如街道/河流名称等）？特别是我想知道它们如何呈现折叠的字符串（例如`N Cahuenga Blvd`）。

我试图看看`Google API`，但我找不到任何有用的东西...... :(

![例子](../Images/5f9d466942994214333b6a22a44c5188.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T17:53:06.060

如果您在弯曲的道路上仔细查看 Google 地图，您会看到字母接触的地方，以及每个字母似乎有不同坡度的地方。

他们的系统可能在概念上很简单，就像绘制两条平行于道路中心的曲线——间隔一个标准字形高度。然后，如果线条向字母顶部弯曲，则通过测量顶线的一个字母宽度来间隔下一个字母。如果它向下弯曲，则使用下面的线。在结果点处垂直于线绘制每个字母。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T17:29:53.007

这是一个猜测（我不知道他们使用什么算法）：

我会使用一条曲线来绘制街道，这条曲线穿过你所谓的“虚线”的所有角点。具体来说，我会尝试使用[贝塞尔曲线](https://en.wikipedia.org/wiki/Bezier_curve)（一种对图形具有有用属性的参数曲线，例如使用整数算术进行简单快速的计算和很好的结果）。为了布置文本，我会做一些事情来确保文本沿着曲线流动 - 例如[这里](http://www.planetclegg.com/projects/WarpingTextToSplines.html)描述的。

# jsf - 从另一个对话框jsf调用对话框时的多个表单提交

> ID：13249781
> 
> 赞同：2
> 
> 时间：2012-11-06T11:12:04.490
> 
> 标签：jsf, multiple-forms

我正在尝试从另一个对话框调用一个对话框（p:dialog）。在我的页面中，单击链接会打开一个对话框，该对话框有两个部分，一个用于登录，另一个用于注册。目前我的页面结构如下所示。

```
<h:form>
    <h:outputLink value="javascript:void(0)" onclick="dlg.show()" title="Login" />
</h:form>

<p:dialog id="dialog" header="Login" widgetVar="dlg" appendToBody="true" modal="true" width="750">
    <h:form id="loginForm">
        ...
    </h:form>

    <h:form id="signupForm">
        ...
        <p:commandButton id="submitButton" value="SignUp" 
            onstart="statusDialog.show();" 
            action="# {signupBean.doSignup}" 
            update="growl" 
            oncomplete="statusDialog.hide();dlg.hide();welcome.show();"/>
    </h:form>
</p:dialog>

<p:dialog header="Welcome" id="welcome" resizable="false" widgetVar="welcome" width="700" closable="false" modal ="true">

</p:dialog> 
```

我面临的问题是，每当我点击提交并且页面上出现验证错误时，都会显示错误消息并显示新对话框。新对话框应该仅在表单成功完成且没有任何验证错误时显示。

我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T11:35:43.057

验证结果在`oncomplete`JavaScript 变量可用的 PrimeFaces 组件的属性中，该`args.validationFailed`变量返回一个`boolean`. 只是利用它。

```
oncomplete="if (!args.validationFailed) { statusDialog.hide(); dlg.hide(); welcome.show(); }"/> 
```

# image-processing - 用于确定图像（内）同质性的函数/算法

> ID：13249783
> 
> 赞同：1
> 
> 时间：2012-11-06T11:12:16.983
> 
> 标签：image-processing, opencv

SHORT：OpenCV 中是否有可以返回图像同质性索引的函数或通用算法？

长版 :-) 我正在实现基于图像数据评估的自动对焦。我的图像是生物细胞，它们在图像区域中以相似的密度分布。不幸的是，有时我的算法会受到保护玻璃上的污垢的干扰，这些污垢大多是一些亮点。所以我的想法是，丢弃由不均匀图像引起的焦点函数峰值。

感谢您的任何建议！

要求的示例图像：（不是最好的，但应该公平地显示问题） ![自动聚焦污垢-ERROR](../Images/c2d0d8580ed237199c8d1a7b67b9802b.png) ![自动聚焦单元格-OK](../Images/2f3c7c95eb3ae5b72463833d84145514.png)

左图因脏污而在错误的 Z 位置拍摄。右边的没问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T13:03:53.950

查看图像，您可以将其分成不同的部分（例如 4x4 子图像），计算每个子图像的方差，并查看最低和最高方差之间的差异是否很大。

# prototypejs - 原型：失去焦点是什么事件？

> ID：13249784
> 
> 赞同：1
> 
> 时间：2012-11-06T11:12:18.457
> 
> 标签：prototypejs, observers

一旦失去焦点，我想对文本字段进行一些更改，但我无法弄清楚我需要的事件。这是我的代码：

```
Event.observe('my_text_field', '????', function(event) {
    do something here
} 
```

那么，我必须放入什么而不是 ???? ?

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T11:15:20.650

您正在寻找[`blur`活动](https://developer.mozilla.org/en-US/docs/Mozilla_event_reference/blur_%28event%29)：

> 当元素失去焦点时会触发 blur 事件。

并且来自[DOM2 事件规范](http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-eventgroupings-htmlevents)：

> 当元素通过定点设备或标签导航失去焦点时，会发生模糊事件。此事件对以下元素有效：LABEL、INPUT、SELECT、TEXTAREA 和 BUTTON。

# linux-kernel - 将设备功能保留在设备控制器而不是操作系统内核中。后果是什么？

> ID：13249788
> 
> 赞同：0
> 
> 时间：2012-11-06T11:12:29.780
> 
> 标签：linux-kernel, device-driver, hardware-interface

我的一个朋友在课堂上问我这个问题，我无法回答。他问：

因为我们知道内核通过设备驱动程序控制物理硬件。如果所有这些功能都保存在设备控制器本身而不是由内核管理它们会怎样。这种情况会产生什么后果？是好是坏？

我在网上搜索了这个问题，但无法获得有关这种情况的信息。可能是我没有在正确的关键字中搜索。

你对此的洞察力将帮助我理清我的概念。

请回答。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T21:20:40.150

您的问题似乎建议通过“保持” *“控制（的）物理硬件......在设备控制器内部”来消除“设备驱动程序”*。这样做的前提似乎是：

> 内核通过设备驱动程序控制物理硬件。

对设备驱动程序的描述类似于我对最终用户的理解，而不是从开发人员的角度来看。最终用户知道设备，并且设备驱动程序采用该抽象并可以控制该设备到每个设备端口的特定控制位。

但是设备驱动程序负责日常的内务处理任务，例如：

*   维护设备状态和可用性；
*   配置设备以进行操作；
*   管理数据流，建立/拆除数据传输，在用户空间和内核空间之间复制数据；
*   处理中断和异常。

这些任务是设备驱动程序不可或缺的。这些任务不能从内核驱动程序的范围转移到外围设备。

有时设备驱动程序只能尝试*管理*设备，而不是完全控制它，例如，在数据包泛滥期间的 NIC 驱动程序。

*无论有多少“所有这些功能都保存在设备控制器本身内部”*，您根本不可能消除设备驱动程序。并且仍然会从设备驱动程序向外围设备发出控制指令/命令。

所讨论的硬件设备应该是*计算机外围*设备，而不是自主机器人设备。该设备应设计为*与*计算机一起操作。处理器和设备之间的任何接口都应该适合该任务。如果外围设备做得更“智能”，那么也许 CPU 可以减轻负担，一个高级命令接口可以代替低级子操作指令。但是只有“一些”功能可以转移到外设，而不是“全部”。

# c - 这些 volatile 与 C 中的指针是什么意思？

> ID：13249791
> 
> 赞同：7
> 
> 时间：2012-11-06T11:12:33.800
> 
> 标签：c, pointers, volatile

```
volatile void * ptr; 
```

无论`ptr`is`volatile`还是 it 指向`volatile location`.

所以实际的疑问是：上述声明是否与`const`限定符一样适用？

一点解释对我有很大帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-06T11:14:28.483

它是指向易失性数据的指针。如果指针本身应该是 volatile 但不是它指向的数据，您可以使用：

```
void * volatile ptr; 
```

所以是的，它的工作方式与`const`修饰符相同。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-06T11:16:47.263

[微软](http://msdn.microsoft.com/en-us/library/145yc477.aspx)的解释：

> volatile 关键字指定与后面的名称关联的值可以通过用户应用程序中的操作以外的操作进行修改。

volatile 关键字对于在共享内存中声明可以被多个进程访问的对象很有用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-06T11:25:15.903

`const`和都是[类型限定符](http://en.wikipedia.org/wiki/C_syntax#Type_qualifiers)（事实上，它们是 C 中唯一的类型限定符）`volatile`。使用它们的语法是相同的。

# c++ - 比较浮点变量

> ID：13249796
> 
> 赞同：1
> 
> 时间：2012-11-06T11:12:46.777
> 
> 标签：c++, c

> **可能重复：**
> [浮点和双重比较的最有效方法](https://stackoverflow.com/questions/17333/most-effective-way-for-float-and-double-comparison)
> [比较浮点值有多危险？](https://stackoverflow.com/questions/10334688/how-dangerous-is-it-to-compare-floating-point-values)

我有`const float M = 0.000001;`和`float input;`。我不想对它们进行平等检查。但我知道直接检查有副作用`M != input`。那么，我的问题是如何比较两个浮点值而没有副作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T11:14:55.267

```
const double epsilon = 1e-12; 

if(fabs(input - M) < epsilon) //input == M
{
    //...
}
if(fabs(input - M) >= epsilon) // input != M
{
    //...
} 
```

epsilon 的值越小，比较就越准确，因此它告诉您两个值不相等而您希望它们被视为相等的可能性就越大。epsilon 的值越大，它告诉您结果相等的可能性就越大，而实际上您希望它们不相等。应根据手头任务的具体情况选择 epsilon 的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T11:17:31.397

比较浮点数时，您必须比较它们是否“接近”而不是“相等”。有多种方法可以根据您的需要定义“关闭”。然而，一个典型的方法可能是这样的：

```
namespace FloatCmp {

const float Eps = 1e-6f;

bool eq(float a, float b, float eps = Eps) {
  return fabs(a - b) < eps;
}

//etc. for neq, lt, gt, ...

} 
```

然后，使用`FloatCmp::eq()`而不是`==`比较浮点数。

# objective-c - 无法获得 PSTitleValueSpecifier 的值

> ID：13249797
> 
> 赞同：1
> 
> 时间：2012-11-06T11:13:00.013
> 
> 标签：objective-c, ios, settings

我试图在我的代码中从 Settings.bundle->Root.plist 获取/设置值：

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
NSString *val = [defaults objectForKey:@"NUMBER"]; 
```

但 val 为零。在我的代码中一切都正确吗？

这是我的 Root.plist

```
 <dict>
        <key>Type</key>
        <string>PSTitleValueSpecifier</string>
        <key>Title</key>
        <string>MyTitle</string>
        <key>Key</key>
        <string>NUMBER</string>
        <key>DefaultValue</key>
        <string>SavedNumbers</string>
        <key>Values</key>
        <array>
            <string>SavedNumbers</string>
        </array>
        <key>Titles</key>
        <array>
            <string>5</string>
        </array>
    </dict> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T11:37:03.520

在标签中指定键，下面的相应标签是值（它可以是任何值，等等）。

因此，当您调用 objectForKey: 时，您需要传递该值，以便它将返回该键的对象。

但是在您的情况下，您传递的是值“NUMBER”而不是键。

字典由键值对组成。

如果您需要您需要使用的对象的所有键

```
- (NSArray *)allKeysForObject:(id)anObject 
```

# android - 如何在android中滚动时始终使用一种颜色保持listview的中心项

> ID：13249802
> 
> 赞同：4
> 
> 时间：2012-11-06T11:13:18.887
> 
> 标签：android

我有一个列表视图。列表的中心项目应该是不同的颜色。当滚动时，项目出现在那个特定的位置应该改变那个颜色并继续。越过该位置后返回原始颜色。你知道怎么回事吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T11:28:10.583

好吧，您可能可以使用 Android 轮子选择器

[http://code.google.com/p/android-wheel/](http://code.google.com/p/android-wheel/)

它突出显示中心项目，并且可以修改，但是您希望它在您想要的项目到达中心时看起来。

# c# - 将更新后的 excel 值导入数据库

> ID：13249804
> 
> 赞同：0
> 
> 时间：2012-11-06T11:13:26.657
> 
> 标签：c#, sql-server-2008, excel

我在一个大约有 2000 行的 Excel 表中有大量数据。我已经在 sql server 中导入了表，没有错误。我现在必须修改 excel 并更新数据库中的相同更改。我无法删除表并再次导入，因为我有大量数据并且添加了额外的列。

所以请帮助我如何更新新值以及现有值。我使用 C#.Net。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T11:17:46.973

导入临时表，然后使用该[`MERGE`](http://technet.microsoft.com/en-us/library/bb510625.aspx)语句更新您的主表。

# jquery - 选择数字上升的元素

> ID：13249807
> 
> 赞同：0
> 
> 时间：2012-11-06T11:13:52.713
> 
> 标签：jquery, select

我对 jQuery 有疑问。在我的 HTML 代码中，我有一些元素的数字不断增加，如下所示：

```
<ul class="flexer-0"> ... <ul class="flexer-1"> ... <ul class="flexer-2"> 
```

ul 使用以下代码对此类进行分类：

```
$('ul').addClass(function(index) {
    return 'flexer-' + index;
}); 
```

以后如何通过 jQuery 选择这些元素。

我的想法是这样的：

```
$("ul.flexer-0") ...
$("ul.flexer-1") ...
$("ul.flexer-2") ... 
```

这很有压力，因为它会变成一个有很多 ul-lists 的长页面。应该可以使用 jQuery 获取索引号。

有人有想法吗？

凯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T11:16:30.827

如果`flexer-n`是元素属性中的**唯一**类，则`class`可以使用[以选择器开头的属性](http://api.jquery.com/attribute-starts-with-selector/)来选择所有匹配项：

```
$('ul[class^="flexer"]') 
```

这将匹配任何`ul`属性*以*.`class` *`flexer`*

 *但请注意，如果您有其他课程，它将不起作用，例如：

```
<ul class="foo flexer-3"> 
```

* * *

我会退后一步问：为什么你有所有这些`flexer-n`课程？这听起来像一个单一的类，也许与`id`s 或单个 flexers 上的一个[`data-*`属性](http://www.w3.org/TR/html5/global-attributes.html#embedding-custom-non-visible-data-with-the-data-%2a-attributes)结合，会更有意义。*

# android - 在布局背景上绘制的路径上移动图像位图

> ID：13249808
> 
> 赞同：0
> 
> 时间：2012-11-06T11:13:54.123
> 
> 标签：android, animation, background, path, imageview

我需要在布局背景中绘制的路径上移动位图图像，它也可以是位图在另一个位图中的移动。运动是由智能手机的加速度计引起的。有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T18:22:37.840

有史以来最短的答案 - '使用 OpenGL，Luke' 您还可以使用 OGL 框架之一，即 AndEngine。

# java - 如何调用以 SelectEvnet 作为参数的方法？

> ID：13249813
> 
> 赞同：0
> 
> 时间：2012-11-06T11:14:16.837
> 
> 标签：java, jsf, primefaces

伙计们，我将 SelectEvent 作为参数传递给一个方法（用于 ajax 目的）。现在我如何在另一个方法中调用该方法。?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T11:22:01.517

一般来说，您可以像调用 java 中的任何其他方法一样调用它。但是，如果方法依赖于选择事件，例如触发事件的组件，则必须小心。

如果该方法不依赖于 SelectionEvent，您可以像这样调用它

```
mySelectionListener(null); 
```

或者你创建一个新的 SelectionEvent

```
SelectionEvent myEvent = new SelectionEvent();
mySelectionListener(myEvent); 
```

# java - 溢出是隐藏的，但在关键事件上滚动页面

> ID：13249820
> 
> 赞同：1
> 
> 时间：2012-11-06T11:14:37.013
> 
> 标签：java, javascript, gwt, gxt

在`BorderLayout`面板上（隐藏溢出），当按下或时`Page Down`，页面向下滚动，隐藏其顶部。如何预防？`↓``End`

同样的问题也出现在[Ext GWT 示例网站上](http://www.sencha.com/examples-2/#overview)。要重现它，左键单击空白区域的选项卡面板标题，然后按`Page Down`。

这是说明问题的[屏幕截图。](http://www.imageurlhost.com/images/qs4r1rfr1qneo2jyslk9_Description.jpg)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T10:45:51.487

我找到了解决这个问题的方法，我给我的视口留出了余量

```
 x-viewport {margin-bottom: -16px;} 
```

并做了！

# testing - 如何拥有 Azure 测试和生产网站

> ID：13249823
> 
> 赞同：1
> 
> 时间：2012-11-06T11:14:50.440
> 
> 标签：testing, azure

我正在切换到 Azure，并且对我的设置有疑问。我正在运行 2 个 Azure 网站....1 个用于测试，1 个用于生产。我已将我的团队基础服务帐户链接到我的测试网站，这非常适合持续集成。当我对测试站点上的构建感到满意时，我想将其推送到生产站点。我能看到如何做到这一点的唯一方法就是手动从我的本地机器直接部署到生产网站，我不想这样做。有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T12:08:39.017

我看到的一种方法是将您的 TFS 服务也链接到生产网站。然后编辑在链接期间自动创建的构建定义，使其不是 CI 构建（在每次签入时执行），而是成为“手动触发器”。然后，当您想要推送到生产环境时，触发该构建。

**更新**

不知何故，我知道编辑构建定义会有问题。只需打开“团队资源管理器”，导航到“构建”，右键单击您的构建定义，然后单击上下文菜单上的“编辑”：

![Tfs 编辑构建定义](../Images/d83fb6f124860d61bba2a48485cdc2bd.png)

**更新 2**

尽管这更改为纯 TFS/构建定义问题，但我将添加 - 请注意，当您第一次链接您的开发/测试站点时，它创建了一个针对该站点的构建定义。当您将生产网站链接到***TFS 中的相同解决方案时***，它将创建另一个针对该生产网站的构建定义。现在，您将拥有同一个***Team Project***的两个构建定义。实际上，您可以拥有任意数量的构建定义（您甚至可以手动创建）。休息是构建配置编辑，值得另一个问题，很可能是在 ServerFault 上。

# rest - 如何安排我的多语言 REST API？

> ID：13249825
> 
> 赞同：5
> 
> 时间：2012-11-06T11:14:51.883
> 
> 标签：rest, spoken-language

我刚刚开始构建多语言 REST API，不确定是否有任何关于如何正确集成多语言的约定。

以下是我提出的替代方案列表，不知道哪个最有意义。

**选项 1：**
URI 中的语言变量：`http://myapi.com/en/users/john`

**选项 2：**
仅返回翻译客户端的错误代码： `GET http://myapi.com/users/john => HTTP 404 {status: false, error_code: "321"}`

**选项 3：**
以所有可用语言返回：`GET http://myapi.com/users/john => {status: false, error_en: "User not found", error_sv: "Anvandaren finns inte"}`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-06T11:27:31.930

对于[内容协商](https://en.wikipedia.org/wiki/Content_negotiation)和协商表示的自然语言，HTTP 提供[请求标头`Accept-Language`](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.4)：

```
Accept-Language: da, en-gb;q=0.8, en;q=0.7 
```

[如果可能，服务器会使用响应标头`Content-Language`](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.12)回复此请求：

```
Content-Language: da 
```

只有当资源是*不同语言的**不同*资源时，语言才应该是 URI 的一部分。如果不是，则应使用内容协商。

# packet-capture - IEEE 1394/火线嗅探器？

> ID：13249829
> 
> 赞同：4
> 
> 时间：2012-11-06T11:15:10.877
> 
> 标签：packet-capture, packet-sniffers, sniffing, firewire

有谁知道任何软件（对于 win7 或 winXP）可以让我捕获或简单地查看 Firewire 设备和应用程序之间传输的数据。

我希望看到在火线上工作的 (ASIO) 音频接口和我的录音/混音软件之间的数据流。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T23:57:20.350

是的——你需要一个火线总线协议分析器。在 ebay 上查找 CATC (Lecroy) FireInspector。最近上市了一些，一些价格合理，一些没有。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-23T17:27:16.330

还有 Bushound ( [http://perisoft.net/bushound/](http://perisoft.net/bushound/) )，它允许在纯软件级别上进行总线 I/O 分析。

# javascript - 删除表中所有相同的 id tr

> ID：13249830
> 
> 赞同：0
> 
> 时间：2012-11-06T11:15:13.040
> 
> 标签：javascript, ajax, jquery

```
<table>
<tr id="Name"></tr>
<tr id="Name"></tr>
<tr id="Name"></tr>
<tr id="Name"></tr>
<tr id="Name"></tr>
<tr id="address"></tr>
</table> 
```

这是我的问题。我想在不使用任何循环的情况下删除所有`tr`的。`id``Name`

这是我的代码

```
jQuery('#Name').remove(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T11:16:36.787

Yopu 最好使用一些类而不是 id，因为 id 对于 dom 中的元素应该是唯一的。

**[现场演示](http://jsfiddle.net/JMwXJ/1/)**

```
$('.someclass').remove(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T11:18:02.350

不要使用`ID`属性，如果它不是标识符！标识符在整个文档中必须是唯一的，否则您会遇到类似的错误。

如果多个元素应该共享某些属性（例如在您的情况下可以一起选择），请使用其他属性，例如[`data-`](https://developer.mozilla.org/en-US/docs/DOM/element.dataset), [`name`](https://developer.mozilla.org/en-US/docs/DOM/element.name)（有时）或[`class`](https://developer.mozilla.org/en-US/docs/HTML/Global_attributes#attr-class).

在您的情况下，您想使用 name 或 class 属性。如果您决定使用 class 属性，则 JS 可能如下所示：

```
jQuery('.Name').remove(); 
```

有了这个 HTML

```
<table>
 <tr class="Name"></tr>
 <tr class="Name"></tr>
 <tr class="Name"></tr>
 <tr class="Name"></tr>
 <tr class="Name"></tr>
 <tr class="address"></tr>
</table> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T11:17:47.667

Id 是唯一的，您不能使用相同的 Id 两次，但是您可以使用相同的类“n”次

```
<table>
<tr class="Name"></tr>
<tr class="Name"></tr>
<tr class="Name"></tr>
<tr class="Name"></tr>
<tr class="Name"></tr>
<tr id="address"></tr>
</table>

<script>
   jQuery('.Name').remove();
</script> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-06T11:19:53.547

使用 jQuery 属性选择器查找元素：

**不要将 id 用于同一文档中的多个元素。**

```
$("tr[id='Name']").remove() 
```

在这里演示：[jsfiddle](http://jsfiddle.net/UVErG/1/)

# java - Java：wait（）是否从同步块中释放锁

> ID：13249835
> 
> 赞同：71
> 
> 时间：2012-11-06T11:15:33.843
> 
> 标签：java, multithreading, concurrency, locking, wait

我的印象是 wait() 释放所有锁，但我发现这篇文章说

“在同步方法中调用等待是获取内在锁的简单方法”

请澄清我有点困惑。

[http://docs.oracle.com/javase/tutorial/essential/concurrency/guardmeth.html](http://docs.oracle.com/javase/tutorial/essential/concurrency/guardmeth.html)

* * *

## 回答 #1

> 赞同：167
> 
> 时间：2012-12-01T21:51:28.133

“在同步方法中调用等待是获取内在锁的简单方法”

**这句话是错误的，它是文档中的错误。**

**线程在进入**同步方法时获取内在锁。同步方法内部的线程被设置为锁的所有者，并处于**RUNNABLE**状态。任何试图进入锁定方法的线程都会变成**BLOCKED**。

当线程调用 wait 时，它会释放当前对象锁（它保留来自其他对象的所有锁），然后进入**WAITING**状态。

当其他一些线程在同一个对象上调用 notify 或 notifyAll 时，第一个线程将状态从 WAITING 更改为 BLOCKED，Notified 线程不会自动重新获取锁或变为 RUNNABLE，实际上它必须与所有其他阻塞线程争夺锁。

WAITING 和 BLOCKED 状态都阻止线程运行，但它们非常不同。

WAITING 线程必须通过来自其他线程的通知显式转换为 BLOCKED 线程。

WAITING 永远不会直接进入 RUNNABLE。

当 RUNNABLE 线程释放锁（通过离开监视器或等待）时，BLOCKED 线程之一自动取代它的位置。

综上所述，线程在进入同步方法或等待**后**重新进入同步方法时获取锁。

```
public synchronized guardedJoy() {
    // must get lock before entering here
    while(!joy) {
        try {
            wait(); // releases lock here
            // must regain the lock to reentering here
        } catch (InterruptedException e) {}
    }
    System.out.println("Joy and efficiency have been achieved!");
} 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2016-03-29T06:19:16.390

我准备了一个小测试类（一些非常脏的代码，对不起）来证明等待实际上释放了锁。

```
public class Test {
    public static void main(String[] args) throws Exception {
        testCuncurrency();
    }

    private static void testCuncurrency() throws InterruptedException {
        Object lock = new Object();
        Thread t1 = new Thread(new WaitTester(lock));
        Thread t2 = new Thread(new WaitTester(lock));
        t1.start();
        t2.start();
        Thread.sleep(15 * 1000);
        synchronized (lock) {
            System.out.println("Time: " + new Date().toString()+ ";" + "Notifying all");
            lock.notifyAll();
        }
    }

    private static class WaitTester implements Runnable {
        private Object lock;
        public WaitTester(Object lock) {
            this.lock = lock;
        }

        @Override
        public void run() {
            try {
                synchronized (lock) {
                    System.out.println(getTimeAndThreadName() + ":only one thread can be in synchronized block");
                    Thread.sleep(5 * 1000);

                    System.out.println(getTimeAndThreadName() + ":thread goes into waiting state and releases the lock");
                    lock.wait();

                    System.out.println(getTimeAndThreadName() + ":thread is awake and have reacquired the lock");

                    System.out.println(getTimeAndThreadName() + ":syncronized block have finished");
                }
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
    }
    private static String getTimeAndThreadName() {
        return "Time: " + new Date().toString() + ";" + Thread.currentThread().getName();
    }
} 
```

在我的机器上运行这个类会返回下一个结果：

```
Time: Tue Mar 29 09:16:37 EEST 2016;Thread-0:only one thread can be in synchronized block
Time: Tue Mar 29 09:16:42 EEST 2016;Thread-0:thread goes into waiting state and releases the lock
Time: Tue Mar 29 09:16:42 EEST 2016;Thread-1:only one thread can be in synchronized block
Time: Tue Mar 29 09:16:47 EEST 2016;Thread-1:thread goes into waiting state and releases the lock
Time: Tue Mar 29 09:16:52 EEST 2016;Notifying all
Time: Tue Mar 29 09:16:52 EEST 2016;Thread-1:thread is awake and have reacquired the lock
Time: Tue Mar 29 09:16:57 EEST 2016;Thread-1:syncronized block have finished
Time: Tue Mar 29 09:16:57 EEST 2016;Thread-0:thread is awake and have reacquired the lock
Time: Tue Mar 29 09:17:02 EEST 2016;Thread-0:syncronized block have finished 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-06-15T06:34:10.497

> `wait`:: 是`java.lang.Object`类的一部分，所以我们只能在对象上调用这个方法。调用它需要对该对象进行监视器（锁定），否则 `IllegalMonitorStateException`将被抛出，例如）Thread.currentThread().wait() 将在下面的代码中抛出此异常。
> 
> ```
>  Example1
>    public void doSomething() {                                          Line 1
>         synchronized(lockObject) { //lock acquired                      Line 2
>             lockObject.wait();     // NOT Thread.currentThread().wait() Line 3
>         }
>     } 
> ```
> 
> 现在在第 3 行调用 wait 将释放在第 2 行获取的锁。因此进入第 1 行并等待获取锁的任何其他线程`lockObject`将获取此锁并继续。
> 
> 现在让我们考虑一下`Example2`；这里只有`lockObject2`锁被释放，并且当前线程仍然持有`lockObject1`锁。这会导致死锁；所以用户在这种情况下应该更加小心。
> 
> ```
>  Example2 
>         public void doSomething() {                                     Line 1
>              synchronized(lockObject1) { //lock1 acquired               Line 2
>                  synchronized(lockObject2) { //lock2 acquired           Line 3
>                      lockObject2.wait();                                Line 4
>                  }
>              }
>         } 
> ```
> 
> 如果这个等待被替换为`sleep, yield, or join`他们没有能力释放锁。只有等待才能释放它持有的锁。
> 
> 请注意`t1.sleep()/t1.yield()`静态 api 的位置，并且始终会在`currentThread`不在线程上执行操作`t1`。
> 
> `suspend`那么让我们了解一下和这些api有什么区别`sleep, yield, join`；因为`suspend`被弃用以避免线程持有锁的情况，当它处于挂起（非运行状态）未定义的时间时会导致死锁。这对于其他 api 也是相同的行为。
> 
> 答案是暂停/恢复将在其他线程上执行，例如`t1.suspend()`这些 api 暂停 `Thread.currentThread()`. 因此，用户在调用这些 api 之前注意不要持有任何锁以避免死锁。调用时不是这种情况`suspend`。被调用者线程不知道它将执行挂起的调用者线程（锁定）状态，因此不推荐使用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-11-18T19:43:24.843

我认为应该在完整的背景下看待这个声明。

> 当线程调用 d.wait 时，它必须拥有 d 的内在锁——否则会引发错误。在同步方法中调用 wait 是获取内在锁的一种简单方法。

我知道他们应该将其简化为：

> 方法的调用会`synchronized`获取对象的锁定，我们可以简单地将`wait()`调用放在`synchronized`方法中。

# c++ - 如何检查类型化指针是否针对该类型正确对齐？

> ID：13249841
> 
> 赞同：2
> 
> 时间：2012-11-06T11:16:06.397
> 
> 标签：c++, alignment

假设我有一个模板函数，它处理指向未知类型的指针`T`。现在，如果类型`T`恰好`void*`在 64 位平台上，那么它必须是 8 字节对齐的，但如果`T`碰巧`char`它必须是 1 字节对齐的，并且如果`T`碰巧是一个类，那么它的对齐要求将取决于它的成员变量。

这一切都可以在纸上计算，但是如何让编译器产生给定类型的对齐要求`T`？

有没有办法在编译时找到给定类型的对齐要求？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T11:20:53.610

在 C++11 中，您可以使用[alignof](http://en.cppreference.com/w/cpp/language/alignof)和[alignas](http://en.cppreference.com/w/cpp/language/alignas)进行断言并提供对齐要求。另请查看[std::align](http://en.cppreference.com/w/cpp/memory/align)以控制运行时的对齐方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T11:22:59.960

在没有 C++11 的情况下，最容易使用大于或等于`sizeof(T)`. 您可能还希望将其限制为最大基元的对齐方式。8 是 64 位架构上的一个相当安全的赌注（尽管您可能需要留意诸如 SSE 数据类型之类的东西）。

# interface - 鸭子在 Go 中打字

> ID：13249843
> 
> 赞同：7
> 
> 时间：2012-11-06T11:16:24.003
> 
> 标签：interface, go, duck-typing

我想编写一个`Join`函数，该函数使用方法获取任意对象`String()`：

```
package main

import (
    "fmt"
    "strings"
)

type myint int

func (i myint) String() string {
    return fmt.Sprintf("%d", i)
}

func main() {
    parts := []myint{myint(1), myint(5), myint(6)}
    fmt.Println(Join(parts, ", "))
}

func Join(parts []fmt.Stringer, sep string) string {
    stringParts := make([]string, len(parts))
    for i, part := range(parts) {
        stringParts [i] = part.String()
    }
    return strings.Join(stringParts , sep)
} 
```

[http://play.golang.org/p/EhkbyibzHw](http://play.golang.org/p/EhkbyibzHw)

`[]myint`不能传递给`Join`，因为它不是 type `fmt.Stringer`，所以我必须写：

```
parts := []fmt.Stringer{myint(1), myint(5), myint(6)} 
```

但是，如果我需要`parts`另一个值必须是整数的操作怎么办？我应该把一片片投到一片`myint`片上`Stringer`吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T12:12:45.280

> 问：我应该把一片片投到一片`myint`片上`Stringer`吗？

Go 中没有强制转换——只有转换。但是从一个具体的、非接口类型的切片转换为一个接口类型的切片是不可能的，除非在循环中显式地进行。原因是，例如在您的情况下，`[]myint`后备数组的内存布局与`[]fmt.Stringer`以往不同。（[相关常见问题解答](http://golang.org/doc/go_faq.html#convert_slice_of_interface)）

在旁注中，您不必写：

```
parts := []myint{myint(1), myint(5), myint(6)} 
```

这应该同样有效：

```
parts := []myint{1, 5, 6} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-30T12:56:35.110

将 Join 函数更改为

```
func Join(sep string, parts ...fmt.Stringer) string {
} 
```

使它更容易：

```
package main

import (
    "fmt"
    "strings"
)

type myint int

func (i myint) String() string {
    return fmt.Sprintf("%d", i)
}

type myfloat float32

func (f myfloat) String() string {
    return fmt.Sprintf("%0.2f", f)
}

func main() {
    fmt.Println(Join(", ", myint(3), myfloat(3.5543)))
}

func Join(sep string, parts ...fmt.Stringer) string {
    stringParts := make([]string, len(parts))
    for i, part := range parts {
        stringParts[i] = part.String()
    }
    return strings.Join(stringParts, sep)
} 
```

# jsf - 通过查看参数功能可添加书签

> ID：13249844
> 
> 赞同：11
> 
> 时间：2012-11-06T11:16:24.820
> 
> 标签：jsf, jsf-2, bookmarks

`includeViewParams=true`通过使用带有 JSF 隐式导航的查询参数是否可以实现书签功能？如果是，那么如何？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-06T12:12:38.943

首先，我们需要了解究竟什么是“书签性”以及究竟是什么`includeViewParams`。这样可以更好地理解两者结合的效果。

如您在浏览器的地址栏中看到的，可收藏性与 HTTP 请求 URL 的确切格式有关。这正是最终用户将存储在其书签中和/或将复制粘贴为其他地方的链接的 URL，例如论坛、聊天框、某些社交媒体或只是一个新的浏览器窗口/选项卡等。当链接被点击时或者将 URL 复制粘贴到浏览器的地址栏中，则默认情况下会触发 HTTP GET 请求。如果结果每次都**完全相同**（将授权/身份验证和页面的时间敏感特性——搜索结果、最新消息等——排除在外），那么我们可以讨论一个可收藏的 URL。技术术语是“[幂等](http://en.wikipedia.org/wiki/Idempotence)HTTP 请求”。

但是，如果最终用户事先在该 URL 上提交了一个 POST 表单，而该表单没有执行重定向，则该 URL 不一定是可收藏的。提交的表单数据不会反映在 URL 中。将 URL 复制粘贴到新的浏览器窗口/选项卡可能不一定会产生与表单提交后完全相同的结果。这样一个 URL 就不能加入书签。POST 不是幂等的。这就是为什么[通过命令链接进行页面到页面导航不好](https://stackoverflow.com/questions/4317684)的原因。

可书签性通常通过 URL 路径和/或查询参数的特定构造来实现。如果您查看 Google，由于`q`查询字符串参数，搜索结果是可收藏的。

> [http://google.com/search?q=bookmarkability](http://google.com/search?q=bookmarkability)

在 JSF 术语中，可以通过以下方式设置（并转换和验证）这些请求参数[`<f:viewParam>`](https://stackoverflow.com/questions/6377798)：

```
<f:metadata>
    <f:viewParam name="q" value="#{bean.query}" />
    <f:viewAction action="#{bean.search}" />
</f:metadata> 
```

如果您需要执行例如分页，并且您希望保持 URL 可收藏，那么您可以添加另一个请求参数：

> [http://google.com/search?q=bookmarkability&start=10](http://google.com/search?q=bookmarkability&start=10)

和

```
<f:metadata>
    <f:viewParam name="q" value="#{bean.query}" />
    <f:viewParam name="start" value="#{bean.start}" />
    <f:viewAction action="#{bean.search}" />
</f:metadata> 
```

`includeViewParams="true"`基本上在生成的 GET 链接中包含所有这些视图参数。借助此功能，分页链接可以如下所示，无需重复`q`参数：

```
<h:link value="1" outcome="search" includeViewParams="true">
    <f:param name="start" value="#{null}" />
</h:link>
<h:link value="2" outcome="search" includeViewParams="true">
    <f:param name="start" value="10" />
</h:link>
<h:link value="3" outcome="search" includeViewParams="true">
    <f:param name="start" value="20" />
</h:link>
... 
```

*（当然是由一些`<ui:repeat>`左右产生的）*

当进入带有 的页面时`q=bookmarkability`，这将产生以下链接

```
/search.xhtml?q=bookmarkability
/search.xhtml?start=10&q=bookmarkability
/search.xhtml?start=20&q=bookmarkability 
```

这些是可收藏的 URL，`includeViewParams`使创建它们更加方便。

# php - php中的友好URL？在 htaccess 中阅读其他页面

> ID：13249846
> 
> 赞同：0
> 
> 时间：2012-11-06T11:16:28.573
> 
> 标签：php, .htaccess, url, mod-rewrite

我有 2 页从 mysql 中选择数据。第一页 - readmore.php，`url`从表格帖子中获取帖子。`caturl`第二页 - categories.php从表类别中获取数据。

.htaccess 中的 readmore.php

```
 RewriteEngine On
    RewriteRule ^([a-zA-Z0-9-/]+).html$ readmore.php?url=$1
    RewriteRule ^([a-zA-Z0-9-/]+).html/$ readmore.php?url=$1 
```

.htaccess 中的 categories.php

```
 RewriteEngine On
    RewriteRule ^([a-zA-Z0-9-/]+).html$ categories.php?caturl=$1
    RewriteRule ^([a-zA-Z0-9-/]+).html/$ categories.php?caturl=$1 
```

当 get caturl htaccess 将我重定向到 readmore.php 但我想重定向到 categories.php 时发现我的问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T11:21:36.620

您正在将 *.html 重定向到一个新`readmore.php?url=*`的 url，因此 url 会发生变化。由于 url 现在`readmore.php?url=*`是第二组规则不会触发（不再有匹配 *.html 的模式）。

因此永远不会加载类别。您需要在 url 中添加一个参数来区分不同的类型。

因此，请确保您的所有文章（或类别）在 url 中有一个共同的部分，以表明它是该类型的页面。

**例子：**

```
RewriteRule ^article_([a-zA-Z0-9-/]+).html$ readmore.php?url=$1
RewriteRule ^cat_([a-zA-Z0-9-/]+).html$ categories.php?caturl=$1 
```

所以一篇被调用的文章`article_firstpost.html`会链接到`readmore.php?url=firstpost`并且`cat_cars.html`会链接到`categories.php?caturl=cars`

# c - 如何使用 fork() 和 execlp() 在不同的终端上运行命令

> ID：13249847
> 
> 赞同：0
> 
> 时间：2012-11-06T11:16:28.717
> 
> 标签：c

我使用 NCURSES 编写了一个程序，其中我在一个终端上显示一个菜单，并希望在同一个程序中使用 fork() 和 execlp() 但是我使用 fork() 和 execlp() 运行的任何命令都必须执行在不同的终端或后台。如何做到这一点。我只是在使用

```
if(fork())
wait(0);
else
execlp("ls","ls",(char *)NULL); 
```

在一个条件语句中，该语句在主终端上显示一条消息，并将在后台执行 execlp 中的命令

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T11:21:46.493

您可能需要启动一个新终端，并将运行命令交给它。

如果您查看例如[gnome-terminal](http://pwet.fr/man/linux/commandes/gnome_terminal)的命令行参数，您可以弄清楚如何格式化命令行。

# javascript - 在鼠标单击时使用 javascript 隐藏元素并在第二次单击时显示

> ID：13249849
> 
> 赞同：3
> 
> 时间：2012-11-06T11:16:30.517
> 
> 标签：javascript, class

CSS：

```
ol{display: block;} // display: ""; throws an error in the console(FF) 
```

HTML：

```
<!DOCTYPE html>
<html>
<head><script type="text/javascript">!js is here!</script>
<body>
<h2>Title</h2>
<input type="button" id="btn" value="expand" />
<ol>
    <li>Value 1</li>
    <li>Value 1</li>
    <li>Value 1</li>
</ol>
</body>
</html> 
```

Javascript: // 尝试暂时隐藏元素

```
window.onload = function() {
    function expand() {
        var ol = document.getElementByTagName('ol');
        ol.style.display('none');
    }
    function init() {
        var btn = document.getElementById('btn');
        btn.addEventListener('click', expand, false);
    }
} 
```

我一直在寻找类似的东西，我发现的所有东西都使用了一个额外的库（utility.js、jquery 等），但出于学习目的，我想在纯 JS 中执行此操作。

每个来源在线引用`element.className = "newClass";`。我通过创建一个类`.hide{display: none;}`和来尝试过`.show{display: "";}`，但它似乎没有做任何事情。然后我切换到操纵样式 ( `element.style.display("none");`)，但这似乎也不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T11:27:37.180

由于您的 JavaScript 在元素加载到 DOM 之前出现，因此您需要等到窗口加载完毕（或文档准备就绪，此代码段中未显示），然后才能将事件侦听器添加到按钮。

```
window.addEventListener('load', function() {
  document.getElementById('btn').addEventListener('click', function(e) {
    var style = document.getElementsByTagName('ol')[0].style;
    style.display = (style.display == 'none') ? 'block' : 'none';
  }, true);
}, true); 
```

要切换显示，您可以使用`display`CSS 属性设置`block`为显示为块元素，或`none`根本不显示。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-06T11:30:02.717

好吧，您可能想使用 getElementsByTagName 而不是 getElementByTagName，注意它的复数形式。这将返回一个数组。

```
var arrayOfElements = document.getElementsByTagName('ol');
var aSingleElement = document.getElementsByTagName('ol')[0];

aSingleElement .style.display('none'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T11:22:47.490

试试这个代码：

```
window.onload = function() {
    function expand() {
        var ol = document.getElementsByTagName('ol');
        ol[0].style.display = 'none';
    }
    function init() {
        var btn = document.getElementById('btn');
        btn.addEventListener('click', expand, false);
    }
    init();
}​ 
```

第一： `element.style.display("none")`应该`element.style.display = "none"`

第二：

`var ol = document.getElementByTagName('ol');`应该是`var ol = document.getElementByTagName('ol')`；加上它返回一个对象数组，您必须像这样访问您的 OL：（`ol[0].style.display = 'none';`假设它是您页面上唯一的 OL）

还：

```
ol{display: block;} // display: ""; throws an error in the console(FF) 
```

抛出错误，因为“”不是显示的允许值。但是你可以设置`element.style.display = "";`

# ip - 插入 LTE 调制解调器时，是什么阻止了 Windows 的开放 IP 连接？

> ID：13249851
> 
> 赞同：0
> 
> 时间：2012-11-06T11:16:34.703
> 
> 标签：ip, telecommunication, cellular-network, lte, mobile-broadband-api

当您插入 LTE 调制解调器时，作为 LTE 网络附加过程的一部分，它会设置默认 EPS 承载来承载信令流量。此默认承载是具有适合信令流量的流量模板的 IP 连接。该规范还允许网络可以更改默认 EPS 承载的 TFT，以便它可以承载数据（TS 24.301 6.4.1.1，最后一句）。

因此，如果网络确实设置了默认的 EPS 承载来承载数据（并且没有创建专用的 EPS 承载），我的测试表明 Windows 将不允许您在 Internet 上浏览，直到您在传统方式，例如在 Win 7 中调用 Mobile Broadband API Connect 函数。

问题来了：考虑到具有合适服务质量的 IP 连接已经打开，Windows 还需要做什么才能允许 Internet 浏览？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T09:02:56.153

我在 SuperUser 上问了一个关于如何解释这个调制解调器的 Ping 结果的问题，这个问题的答案也包含在那里： [https ://superuser.com/questions/512849/what-does-this-ping-answer-意思是](https://superuser.com/questions/512849/what-does-this-ping-answer-mean)

# css - 溢出内容自动在溢出隐藏？

> ID：13249856
> 
> 赞同：7
> 
> 时间：2012-11-06T11:16:53.723
> 
> 标签：css, overflow

我有一个 div`height in %`和`overflow: hidden;`。当内容很大时，在 div 内部`overflow: auto`不显示滚动。

可以做我想做的吗？

直播： http: [//indorio.ru/inside-box.html](http://indorio.ru/inside-box.html)（#overlay-box 流体，高度为 %）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-06T11:22:51.770

溢出需要指定高度，否则元素将包装其内容。根据您的情况，您可以将高度指定为 100%：

```
#outer {
  height: 400px;
  padding: 10px;
  background: red;
}
#inner {
  height: 75%;
  padding: 10px;
  background: blue;
}
#scroll {
  overflow: auto;
  height: 100%;
  background: green;
}
#content {
  height:400px;
} 
```

[http://jsfiddle.net/3xe7k/](http://jsfiddle.net/3xe7k/)

# java - 在 Ubuntu 12.10 中安装后无法识别 JDK

> ID：13249857
> 
> 赞同：0
> 
> 时间：2012-11-06T11:16:56.477
> 
> 标签：java, ubuntu-12.10

我做了这些步骤没有错误：

1.  JDK路径：

    ```
    Downloads/jdk-6u37-linux-x64.bin 
    ```

2.  终端中的命令：

    ```
    mkdir Programs
    cd Programs
    bash ../Downloads/jdk-6u37-linux-x64.bin
    ln -s jdk-6u37-linux-x64 jdk 
    ```

3.  设置 JAVA_HOME 和路径：

    我在文件末尾添加了以下几行`.bashrc`：

    ```
    export JAVA_HOME=$Home/Programs/jdk
    export PATH=:$JAVA_HOME/bin:$PATH 
    ```

* * *

这是执行命令的结果`echo $JAVA_HOME`：

```
/Programs/jdk 
```

这是执行命令的结果`echo $PATH`：

```
:/Programs/jdk/bin:/usr/lib/lightdm/lightdm:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games1 
```

* * *

问题是：
这是执行命令的结果

```
$ java -version

The program 'java' can be found in the following packages:
 * default-jre
 * gcj-4.6-jre-headless
 * gcj-4.7-jre-headless
 * openjdk-7-jre-headless
 * openjdk-6-jre-headless
Try: sudo apt-get install 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T13:08:54.083

我认为问题是环境变量在 linux 中是区分大小写的，所以你的

```
export JAVA_HOME=$Home/Programs/jdk 
```

应该

```
export JAVA_HOME=$HOME/Programs/jdk 
```

在您的`echo $JAVA_HOME`输出中，您可以看到您没有`/home/yourname`预先添加...

希望有帮助。

干杯，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T13:17:12.523

[此处](https://github.com/flexiondotorg/oab-java6)的脚本将帮助您在 Ubuntu 上安装 sun 的 jdk。真正有用的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-09T06:46:50.710

试试这个命令

```
sudo update-alternatives --config java 
```

这将列出所有已安装和配置的 Java 版本。

如果您看到一个或多个安装，它将为您提供以数字开头的每个元素的列表。只需选择与您要默认使用的版本相对应的数字即可。

# java - 如何在 Java 中从分数格式的字符串转换为十进制或浮点数？

> ID：13249858
> 
> 赞同：8
> 
> 时间：2012-11-06T11:17:01.840
> 
> 标签：java, android, math

我从数据库中获取的字符串值很少，例如

```
"1/4","2/3" 
```

但是在显示为 Android ListView 内容时，我需要将其显示为`0.25`, `0.66`。

现在我不想拆分字符串，然后将单个字符串转换为数字，然后将它们分开以获得结果。

有谁知道，任何直接功能喜欢`Double.valueOf`或`parseDouble`种类？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-06T11:28:30.843

为什么您*“不想拆分字符串，然后将单个字符串转换为数字，然后将它们分开以获得结果”*？

我不知道有任何内置函数可以做到这一点，所以最简单的解决方案是：

```
double parse(String ratio) {
    if (ratio.contains("/")) {
        String[] rat = ratio.split("/");
        return Double.parseDouble(rat[0]) / Double.parseDouble(rat[1]);
    } else {
        return Double.parseDouble(ratio);
    }
} 
```

它还涵盖了比率的整数表示的情况

```
parse("1/2") => 0.5
parse("3/7") => 0.42857142857142855
parse("1") => 1.0 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-02-07T01:26:03.597

我想你在过去 2 年里已经解决了这个问题；但是，您可以使用[Apache commons fraction class](http://commons.apache.org/proper/commons-math/userguide/fraction.html)。

它有一个内置的解析器，所以如果你要调用：

```
Fraction fraction = Fraction.getFraction("1/2");
double d = fraction.doubleValue(); 
```

那么 d 应该包含 0.5。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T11:20:18.273

您可以使用 拆分分数`split("/")`。然后您可以将值转换为`Double`并执行除法。我对Android一无所知，这就是我在Java中的做法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-06T11:30:13.420

在 java 中，我们没有像 JavaScript 中的 eval 这样的东西，所以你可以使用[this](https://github.com/MarkyVasconcelos/Towel/wiki/Expression)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-06T11:46:25.123

我不认为有这样的事情。但我不明白为什么你不会像这样创建自己的函数：

```
public static double fromStringFraction(String fraction){
    String[] fractionArray = fraction.split("/");
    try {
        if (fractionArray.length != 2){
            if (fractionArray.length == 1){
                return Double.parseDouble(fractionArray[0]);
            }
            else {
                return 0d;
            }
        }
        double b = Double.parseDouble(fractionArray[1]);
        if (b==0d){
            return 0d;
        }
        Double a = Double.parseDouble(fractionArray[0]);
        return a/b;
    }
    catch (NumberFormatException e){
        return 0d;
    }
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-11-06T11:19:09.913

尝试使用

```
SpannableStringBuilder test = new SpannableStringBuilder();
test.append("\n");
test.append(Html.fromHtml("<sup>5</sup>/<sub>9</sub>"));
test.append("\n"); 
```

# jquery - 彩盒未正确显示内容

> ID：13249862
> 
> 赞同：2
> 
> 时间：2012-11-06T11:17:23.333
> 
> 标签：jquery, jsp, colorbox

我想创建/测试一个基于 colorbox 插件的简单弹出窗口。我有一个简单的可能的 html 页面，没有任何额外的 css，只有 jquery、colorbox 和 colorbox.css，但不知道为什么弹出窗口没有正确显示。你可以在这里试试这个页面[http://goo.gl/VWQRC](http://goo.gl/VWQRC)

点击问题登录后？链接我在 chrome 中得到这个 ![在此处输入图像描述](../Images/4fdb59f03d70d59ca146035938334914.png)

这是我的js代码

```
$(document).ready(function() {
    // Using a jQuery object:
    var $p = $("#reset-popup");
    $("#problem-link").colorbox({inline:true, href:$p});

}); 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T12:58:08.897

我发现我使用的是 jquery v1.4.2。那与彩盒不兼容。我使用了来自 jquery.com (v1.8.2) 的最新版本，现在它工作正常。您不需要在设置中设置弹出窗口的宽度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T12:33:15.013

尝试使用另一个 colorbox.css（甚至可能是另一个版本的 colorbox）。你的看起来是不同的版本或什么。您可以尝试使用[chridam](https://stackoverflow.com/users/122005/chridam)在他的示例中使用的样式和 JS（来自 v1.3.16）。

此外，它与样式没有任何共同之处，但这`href:$p`看起来是一个错误的代码。实际上，您根本不需要它，因为 colorbox 应该获取单击的链接 href 并找到您`#reset-popup`使用它。并且您提供了一个指向用 jquery 包装的 div 对象的链接，而不是带有链接/选择器的字符串。

正如我从测试页面中看到的那样，结果宽度为`#cboxContent`,`#cboxTopCenter`和的宽度`#cboxBottomCenter`相同`#cboxWrapper`，当它应该小于该宽度以便为`#cboxMiddleLeft`and留出空间时`#cboxMiddleRight`。如果我将这三个元素的宽度更改为更小的一个，我将得到几乎正确的颜色框。对我来说，该版本的颜色框​​似乎需要一些不同的样式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T11:58:26.820

尝试指定颜色框`width`选项，例如：

```
$(document).ready(function() {
    // Using a jQuery object:
    var $p = $("#reset-popup");
    $("#problem-link").colorbox({
          inline: true, 
          width: "50%",
          href: $p
    });
}); 
```

例如，这个标记包含内联调用的隐藏内容（#reset-popup）：

```
<div style='display:none'>
    <div id='reset-popup' style='padding:10px; background:#fff;'>
         <p><strong>This content comes from a hidden element on this page.</strong></p>                     
    </div>
</div> 
```

**演示**：http: [//jsfiddle.net/WGTVY/](http://jsfiddle.net/WGTVY/)

# c# - 如何使用 C# 向 SOAP 请求添加自定义标头？

> ID：13249864
> 
> 赞同：0
> 
> 时间：2012-11-06T11:17:26.577
> 
> 标签：c#, visual-studio-2010, web-services, soap, remobjects

我正在使用 C# 客户端连接到用 Delphi 编写的 RemObjects SDK SOAP 服务器。我可以进行初始登录，但后续请求需要一个自定义 SOAP 标头，如下所示：

```
 <SOAP-ENV:Header SOAP-ENV:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" xmlns:NS1="urn:MyAPI">
    <NS1:ROClientIDHeader xsi:type="NS1:ROClientIDHeader">
      <ID xsi:type="xsd:string">{3EC5A9DF-C6DC-4BFB-8134-37DDCF07910D}</ID>
    </NS1:ROClientIDHeader>
  </SOAP-ENV:Header> 
```

我现有的代码如下所示：

```
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace WindowsFormsApplication1
{
    public partial class MainForm : Form
    {
        public MainForm()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            // Create a new instance of the login service
            MyLibrary.LoginServiceClient LoginClient = new MyLibrary.LoginServiceClient();

            // Call the Login method on the server
            MyLibrary.TLoginInfo LoginInfo = LoginClient.Login("Administrator", "master", 0, 0, MyLibrary.TClientType.ctWindowsClient);

            // Set the Session ID
            var SessionID = LoginInfo.SessionId;

            // Create a new instance of the Utils service
            MyLibrary.UtilsClient UtilsClient = new MyLibrary.UtilsClient();

            // Set the SOAP header //
            //  <SOAP-ENV:Header SOAP-ENV:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" xmlns:NS1="urn:EasyIPv6API">
            //    <NS1:ROClientIDHeader xsi:type="NS1:ROClientIDHeader">
            //      <ID xsi:type="xsd:string">{3EC5A9DF-C6DC-4BFB-8134-37DDCF07910D}</ID>
            //    </NS1:ROClientIDHeader>
            //  </SOAP-ENV:Header>

            // Make the call
            var AddResult = UtilsClient.AddValues(1, 1);
        }
    }
} 
```

如何将自定义标头添加到请求中？请记住，我目前对 C# 完全一无所知。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T13:10:59.530

在 RemObjects 的帮助下，我们终于完成了这项工作。如果有人感兴趣，他们已经制作了一篇文章来解释它是如何完成的。你可以找到它[http://wiki.remobjects.com/wiki/WIP:Consuming_RemObjects_SOAP_services_with_third_party_clients](http://wiki.remobjects.com/wiki/WIP:Consuming_RemObjects_SOAP_services_with_third_party_clients)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T11:47:26.437

如果后续请求需要一个 Soap Header，那么 UtilsClient 应该有一个公开的属性，如您可以设置的 SoapHeaderValue。

# c++ - boost::asio 多播示例

> ID：13249865
> 
> 赞同：9
> 
> 时间：2012-11-06T11:17:29.603
> 
> 标签：c++, sockets, boost, boost-asio, multicast

我刚刚开始阅读有关使用 boost::asio 的多播传输的信息，我对以下内容感到有些困惑：

为什么我们在下面的 boost::asio 示例中需要一个“监听地址”？那有什么意义呢？为什么要选择与 localhost 不同的东西？

[http://www.boost.org/doc/libs/1_37_0/doc/html/boost_asio/example/multicast/receiver.cpp](http://www.boost.org/doc/libs/1_37_0/doc/html/boost_asio/example/multicast/receiver.cpp)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-06T12:06:12.253

如果您有多个网络接口卡（每个 NIC 绑定到不同的 IP 地址），则需要指定侦听 IP 地址。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-06T12:09:53.510

# 在你的公寓...

当您在家中使用笔记本电脑工作时，您可能不在乎。主要目标通常是将任何东西连接到机器中它想要的所有东西，在这种情况下`localhost`就可以了。

# ...但是服务器*确实*在乎！

另一方面，高端服务器通常有**多个网卡**。更好的是，高性能网卡通常具有多个物理插头，并且它们都可能在不同的 DHCP 租约下处于活动状态。

服务器通常也是**公共和专用网络**的一部分，它们可能包括也可能不包括具有自己的子网和可访问性参数的**VPN 。**系统管理员经常考虑这些地址，他们*非常*关心每个服务可用的特定地址。是私人服务吗？是否存在不应发出这些请求的不受信任的子网？

这些问题涉及**安全和系统组织**问题。它并非特定于多播：由于上述所有原因[，UNIX`bind`系统调用](http://linux.about.com/library/cmd/blcmdl2_bind.htm)也采用特定地址。

# android - 在android中编辑SVG文件中的文本

> ID：13249867
> 
> 赞同：1
> 
> 时间：2012-11-06T11:17:33.230
> 
> 标签：android, webview, svg

我制作了一个 SVG 文件，我可以在 android webview 中渲染它。SVG 文件还包含文本。

```
@font-face {
  font-family: "Arvo";
  font-style: normal;
  font-weight: 400;
  src: local("Arvo"), url("http://fonts.gstatic.com/s/arvo/v8/J0GYVYTizO1mjpT3aOcSbQ.woff2") format("woff2"), url("http://fonts.gstatic.com/s/arvo/v8/WJ6D195CfbTRlIs49IbkFw.woff") format("woff");
}
```

```
<svg width="1280px" height="800px">
  <text id="text1_x5F_left_1_" transform="matrix(1 0 0 1 18.333 32.96)">
    <tspan x="0" y="0" font-family="'Arvo'" font-size="21">DDDDDDDDDDDDDDDDDDDDDDD</tspan>
    <tspan x="0" y="25.2" font-family="'Arvo'" font-size="21">DDDDDDDDDDDDDDDDDDDDDDD</tspan>
    <tspan x="0" y="50.4" font-family="'Arvo'" font-size="21">DDDDDDDDDDDDDDDDDDDDDDD</tspan>
    <tspan x="0" y="75.6" font-family="'Arvo'" font-size="21">D</tspan>
  </text>
</svg>
```

我想在运行时编辑文本。我还有一个适用于 iPhone 的 JavaScript，但不适用于 android。我该如何编辑它？

编辑：我正在使用[这个](http://code.google.com/p/svg-android)库和这个补丁来解析 SVG 中的文本标签。 [在 svg 补丁中启用文本解析](http://code.google.com/p/svg-android/issues/attachmentText?id=20&aid=200000000&name=enableText.patch&token=QICiCxYTECcEyM3_Id65MkfdjN8:1352200670131)

我不确定如何使用它。现在 SVG 被渲染并且 SVG 上的示例文本消失了。如果我想给它添加文字，应该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-27T10:22:00.650

您可以在 webview 中注入 javascript 来修改`svg`android java 代码中的内容。[如此处](http://www.techrepublic.com/article/pro-tip-inject-javascript-into-an-android-web-view-for-a-more-dynamic-ux/)
所述

```
String newText="new text 1";
String javascript="javascript:document.getElementsByTagName("tspan")[0].innerHTML='"+newText+"';"
webView.loadUrl(javascript);

String newText="new text 2";
String javascript="javascript:document.getElementsByTagName("tspan")[1].innerHTML='"+newText+"';"
webView.loadUrl(javascript);

...

String newText="new text 4";
String javascript="javascript:document.getElementsByTagName("tspan")[3].innerHTML='"+newText+"';"
webView.loadUrl(javascript); 
```

当然，您必须正确转义需要在 javascript 中插入的 java 字符串（例如替换`"`为`\"`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-23T16:41:40.823

我还没有在移动设备上进行过测试，但是您可以通过添加 HTML5 标签使文档的任何部分都可编辑`contenteditable`，甚至是之前声明的 svg 文本。

```
@font-face {
  font-family: "Arvo";
  font-style: normal;
  font-weight: 400;
  src: local("Arvo"), url("http://fonts.gstatic.com/s/arvo/v8/J0GYVYTizO1mjpT3aOcSbQ.woff2") format("woff2"), url("http://fonts.gstatic.com/s/arvo/v8/WJ6D195CfbTRlIs49IbkFw.woff") format("woff");
}
#editable {
  border: 1px;
  border-style: dashed;
}
```

```
<div id="editable" contenteditable="true">
  <svg width="1280px" height="800px">
    <text id="text1_x5F_left_1_" transform="matrix(1 0 0 1 18.333 32.96)">
      <tspan x="0" y="0" font-family="'Arvo'" font-size="21">DDDDDDDDDDDDDDDDDDDDDDD</tspan>
      <tspan x="0" y="25.2" font-family="'Arvo'" font-size="21">DDDDDDDDDDDDDDDDDDDDDDD</tspan>
      <tspan x="0" y="50.4" font-family="'Arvo'" font-size="21">DDDDDDDDDDDDDDDDDDDDDDD</tspan>
      <tspan x="0" y="75.6" font-family="'Arvo'" font-size="21">D</tspan>
    </text>
  </svg>
</div>
```

据我所知，您可以插入 HTML（也许还有自定义标签），但我不太确定。请参阅[Document.execComand()](https://developer.mozilla.org/en-US/docs/Web/API/Document/execCommand)函数并注意`formatBlock`描述，以防您不仅需要编辑现有 svg 的元素，但要添加新元素。

更新：即使我不能直接从自定义应用程序中的 web 视图测试它，我也在默认 android 浏览器的 Sphere 选项卡上测试过。 ![截屏](../Images/6bdc04d24f0f8a5091644f254fb4e9e1.png)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-09-12T06:09:08.953

我使用此代码使用 javascript 动态更改 svg 文本的内容。

// ***** **** *在Javascript中

```
var svgNS = "http://www.w3.org/2000/svg";

var  text = document.createElementNS(svgNS, "text");    

text.setAttribute("x", x_cooridnates);
text.setAttribute("y", y_cooridnates);    

text.textContent = 'Dynamic Content'; //You can add any text you want 

document.getElementById("text_group").appendChild(text); 
```

// ***** **** *在html正文部分

```
<svg width="1280px" height="800px">
        <g id="text_group" fill="#000000" ></g>
</svg> 
```

希望这是你想要的输出。

# mysql - 从mysql查询中获取拒绝值

> ID：13249868
> 
> 赞同：0
> 
> 时间：2012-11-06T11:17:41.367
> 
> 标签：mysql, select

我想知道我们是否可以从 mysql 选择查询中获取被拒绝的值。

例如：

```
SELECT * FROM table where column1 ='value1' and cloumn2 ='value2' 
```

这将从 column1 和 column2 所在的表中获取所有数据。在这种情况下，将不会选择数据库中的一些值。我也想获得这些值。这可能吗。

我尝试使用`where column !='value'`，但在某些情况下这不适用。有什么建议么。

# ruby-on-rails - 红宝石的“任何？” 和所有？” 空数组和散列的方法行为

> ID：13249872
> 
> 赞同：13
> 
> 时间：2012-11-06T11:17:48.043
> 
> 标签：ruby-on-rails, ruby, enumeration

首先，我在有关这些方法的文档中找到了两篇有用的文章：

*   [http://www.ruby-doc.org/core-1.9.3/Enumerable.html](http://www.ruby-doc.org/core-1.9.3/Enumerable.html)
*   [http://www.globalnerdy.com/2008/01/29/enumerating-rubys-enumerable-module-part-1-all-and-any/](http://www.globalnerdy.com/2008/01/29/enumerating-rubys-enumerable-module-part-1-all-and-any/)

> all?：将集合的每个元素传递给给定的块。如果块从不返回 false 或 nil，则该方法返回 true。
> 
> any?：将集合的每个元素传递给给定的块。如果块曾经返回 false 或 nil 以外的值，则该方法返回 true。

但如果是空数组和哈希，我得到：

```
irb(main):004:0> [nil, "car", "bus"].all?
=> false
irb(main):005:0> ["nil", "car", "bus"].all?
=> true
irb(main):006:0> [].all?
=> true
irb(main):007:0> ["nil", "car", "bus"].any?
=> true
irb(main):008:0> [nil, "car", "bus"].any?
=> true
irb(main):009:0> [nil].any?
=> false
irb(main):010:0> [].any?
=> false 
```

有人可以向我解释为什么空数组`false`在`any?`方法和`true`情况下给我`all?`吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-06T11:22:14.427

> 如果块从不返回 false 或 nil，则该方法返回 true。

因此，由于块永远不会被调用，当然它永远不会返回 false 或 nil，因此`all`返回 true。

这同样适用于`any`：

> 如果块曾经返回 false 或 nil 以外的值，则该方法返回 true。

由于该块永远不会被调用，它永远不会返回除 false 或 nil 之外的值，因此`any`返回 false。

# tcplistener - Winsock 错误代码 10054 和 10053

> ID：13249874
> 
> 赞同：2
> 
> 时间：2012-11-06T11:17:58.213
> 
> 标签：tcplistener

我有一个应用程序正在侦听通过正常 TCP 连接从现场的 GPRS 单元接收到的数据。我收到 Winsock 10054 和 10053 错误。

正如微软解释的那样

10053：软件导致连接中止。已建立的连接被主机中的软件中止，可能是由于数据传输超时或协议错误。

和

10054：对等方重置连接。现有连接被远程主机强行关闭。如果远程主机上的对等应用程序突然停止、主机重新启动或远程主机使用硬关闭，这通常会导致（有关远程套接字上的 SO_LINGER 选项的更多信息，请参阅 setsockopt（Windows 套接字）。）此错误如果在一个或多个操作正在进行时，由于保活活动检测到故障而导致连接中断，也可能导致。正在进行的操作因 WSAENETRESET 而失败。后续操作因 WSAECONNRESET 而失败。

我不确定如何解释这一点。我如何确定错误是在服务器上还是由发送信息的客户端引起的？

# c++ - 从 C++ 中的 Dll 中提取

> ID：13249875
> 
> 赞同：1
> 
> 时间：2012-11-06T11:18:01.303
> 
> 标签：c++, api, dll

我有一个名为`Lib.ddl`. 在 dll 中，我有一个名为 add 的函数，它接受一个整数作为参数。

使用 windows API 并使用以下类。

```
class WindoswAPI
{
    public:
         WindowsAPI();//constructor 
         //helper functions
         ~WindowsAPI();
    private:
} 
```

如何在类的构造函数中加载这个库。通过辅助函数提取函数，并在析构函数中卸载函数？我在互联网上寻找解决方案和帮助，但我找不到任何解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T11:21:40.887

您应该首先查看[LoadLibraryEx()](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684179%28v=vs.85%29.aspx)以便在您的进程中加载​​ dll，然后您可以使用[GetProcAddress()](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683212%28v=vs.85%29.aspx)通过名称获取指向函数的指针。请注意，`HMODULE`从第二个函数请求的参数由第一个函数返回。您必须仔细了解函数签名才能在不引起 GPF 的情况下调用它，因此如果您必须在它工作之前进行一些调试，请不要感到惊讶。无论如何，要检查的第一件事是两个函数的返回值：第一个应该返回不同于零的值（它实际上返回加载 dll 的虚拟地址），如果它返回`NULL`，使用[GetLastError](http://msdn.microsoft.com/en-us/library/windows/desktop/ms679360%28v=vs.85%29.aspx)有一些提示。同样对于`GetProcAddress`，如果它返回零，则某些东西不起作用，通常是函数名的拼写错误。正如我在返回地址之前所说的，`GetProcAddress`并不能保证您已经完成：您必须完全知道如何调用该函数。如果您在发现从 dll 中公开的名称方面需要帮助，您会发现有用[的 DUMPBIN.EXE](http://msdn.microsoft.com/en-us/library/c1h23y6c%28VS.71%29.aspx)，您应该已经可以从 Visual Studio 工具命令提示符处获得它。当您的代码完成 dll 后，您可以尝试使用[FreeLibrary()](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683152%28v=vs.85%29.aspx)将其卸载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T11:27:42.437

查看[POCO C++ Libraries](http://pocoproject.org)，它包含非常好的来自[DLL-Loader](http://pocoproject.org/slides/120-SharedLibraries.pdf)的交叉平台，以避免手写变通方法和样板。

# delphi - 如何使用 DPROJ 在德尔福代码中？

> ID：13249877
> 
> 赞同：0
> 
> 时间：2012-11-06T11:18:02.770
> 
> 标签：delphi, guid, delphi-xe3, msbuild-projectreference

我想使用 GUID 来唯一标识我的应用程序并从代码中获取此值。我看到 DPROJ 中有一个非常理想的 GUID：

```
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
    <PropertyGroup>
        <ProjectGuid>{D4DB842C-FB4C-481B-8952-77DA04E37102}</ProjectGuid> 
```

这是否会在任何地方进入 exe，例如作为资源？如果不是，那么将此 GUID 值链接到我的 exe 文件并在代码中读取它的最简洁方法是什么。上面的 GUID 位于一个专用的文本文件中，并使用我的[DprojMaker 工具](http://delphi-divining.blogspot.co.uk/2012/10/dprojmaker-tool-to-create-delphi.html#!/2012/10/dprojmaker-tool-to-create-delphi.html)粘贴到 DPROJ 中，因此我可以将它包含在您可能建议的任何内容中。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T17:30:27.547

AFAIK`<ProjectGUID>`未嵌入在 Exe 文件中，但您可以创建一个应用程序来读取项目 guid 并作为资源插入到您的 exe 中。

检查此示例应用程序，该应用程序读取文件并在 exe 中创建/更新资源。

```
program UpdateResEXE;

{$APPTYPE CONSOLE}

uses
  Classes,
  Windows,
  SysUtils;

//you can improve this method to read the ProjectGUID value directly from the dproj file using XML.
procedure UpdateExeResource(Const Source, ResourceName, ExeFile:string);
var
  LStream    : TFileStream;
  hUpdate    : THANDLE;
  lpData     : Pointer;
  cbData     : DWORD;
begin
  LStream := TFileStream.Create(Source,fmOpenRead or fmShareDenyNone);
  try
    LStream.Seek(0, soFromBeginning);
    cbData:=LStream.Size;
    if cbData>0 then
    begin
      GetMem(lpData,cbData);
      try
        LStream.Read(lpData^, cbData);
        hUpdate:= BeginUpdateResource(PChar(ExeFile), False);
        if hUpdate <> 0 then
          if UpdateResource(hUpdate, RT_RCDATA, PChar(ResourceName),0,lpData,cbData) then
          begin
            if not EndUpdateResource(hUpdate,FALSE) then RaiseLastOSError
          end
          else
          RaiseLastOSError
        else
        RaiseLastOSError;
      finally
        FreeMem(lpData);
      end;
    end;
  finally
    LStream.Free;
  end;
end;

begin
  try
    if ParamCount<>3 then
    begin
     Writeln('Wrong parameters number');
     Halt(1);
    end;
    Writeln(Format('Adding/Updating resource %s in %s',[ParamStr(2), ParamStr(3)]));
    UpdateExeResource( ParamStr(1), ParamStr(2), ParamStr(3));
    Writeln('Done');
  except
    on E: Exception do
      Writeln(E.ClassName, ': ', E.Message);
  end;
end. 
```

现在从您的应用程序中，您可以使用 Post build 事件以这种方式调用此应用程序

```
"C:\The path where is the tool goes here\UpdateResEXE.exe"  "C:\The path of the file which contains the ProjectGUID goes here\Foo.txt"  Project_GUID  "$(OUTPUTPATH)" 
```

并像这样使用：

```
{$APPTYPE CONSOLE}

uses
  Windows,
  Classes,
  System.SysUtils;

function GetProjectGUID : string;
var
  RS: TResourceStream;
  SS: TStringStream;
begin
  RS := TResourceStream.Create(HInstance, 'Project_GUID', RT_RCDATA);
  try
    SS:=TStringStream.Create;
    try
      SS.CopyFrom(RS, RS.Size);
      Result:= SS.DataString;
    finally
     SS.Free;
    end;
  finally
    RS.Free;
  end;
end;

begin
  try
    Writeln(Format('Project GUID %s',[GetProjectGUID]));
  except
    on E: Exception do
      Writeln(E.ClassName, ': ', E.Message);
  end;
  readln;
end. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T19:08:25.770

为什么不在自己的代码中硬编码自己的 GUID？代码编辑器有一个`CTRL+SHIFT+G`键盘快捷键，用于在当前活动的代码行生成新的 GUID 字符串。您可以将该声明调整为常量变量，以便您的代码根据需要使用，例如：

```
const
  MyGuid: TGUID = '{04573E0E-DE08-4796-A5BB-E5F1F17D51F7}'; 
```

# python - 为什么使用 virtualenv 时 Python 构建突然不是 Framework 构建？

> ID：13249880
> 
> 赞同：7
> 
> 时间：2012-11-06T11:18:11.397
> 
> 标签：python, macos, wxpython, virtualenv

我已经在我的 Mac 上安装了 Python 2.7 作为框架构建。我已经安装并确认 wxPython 可以与这个 Python 版本一起使用。但是当我使用 virtualenv 创建虚拟环境时，生成的 Python 可执行文件不是框架构建，或者至少不是根据 wxPython：

```
该程序需要访问屏幕。
请使用 python 的框架构建运行，并且仅当您是
在 Mac 的主显示屏上登录。
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T13:49:07.927

另一种解决方案是将以下脚本添加到 /Path/To/VirtualEnv/bin：

```
ENV=`python -c "import sys; print sys.prefix"`
PYTHON=`python -c "import sys; print sys.real_prefix"`/bin/python
export PYTHONHOME=$ENV
exec $PYTHON "$@" 
```

然后，每当您想运行 GUI（例如 wxPython）时，请使用`my_script main.py`（确保 virtualenv*处于活动状态*）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-08T12:31:17.663

同样的问题，`pythonw`不能作为框架使用。有一个可用的[解决方法](https://github.com/gldnspud/virtualenv-pythonw-osx/)。我们像这样使用它`pythonw`作为框架应用程序包提供：

```
curl -O https://raw.githubusercontent.com/gldnspud/virtualenv-pythonw-osx/master/install_pythonw.py
curl -O https://raw.githubusercontent.com/gldnspud/virtualenv-pythonw-osx/master/pythonw.c
python install_pythonw.py `which python`/../..
rm install_pythonw.py pythonw.c 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-06-05T00:10:08.013

在 10.10.3 上，使用 virtualenv（如果重要，通过 pyenv），我做了一个`brew install wxmac`.

我的应用程序脚本上有这个

```
import site
site.addsitedir("/usr/local/lib/python2.7/site-packages") 
```

我使用这个包装器来运行我的脚本，称为“app.py”

```
#!/bin/bash

# what real Python executable to use
PYVER=2.7
PYTHON=/System/Library/Frameworks/Python.framework/Versions/$PYVER/bin/python$PYVER

# pythonw is key here!
PYTHON="pythonw"

# now run Python with the virtualenv set as Python's HOME
export PYTHONHOME=$VIRTUAL_ENV
exec $PYTHON "$@" 
```

运行它`fwpy app.py`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-03-04T23:56:14.790

要回答所提出的问题：virtualenv 中的 Python 可执行文件是执行主要 Python 可执行文件的存根，并且不存在于可以自动识别包的路径中。这导致`Foundation.NSBundle.mainBundle()`返回一个`NSBundle`刚刚指向`bin/`virtualenv 中的目录，没有关联`Info.plist`，因此没有关联`bundleIdentifier`；这使得无法使用某些 API（例如，正如您所注意到的，Cocoa GUI API）。

我将这些解决方法打包成一个小工具，您可以`pip install`将其放入您的 virtualenv 中，然后运行：

*   [https://github.com/glyph/venvdotapp/](https://github.com/glyph/venvdotapp/)

现在很原始。你只需要`pip install venvdotapp; venvdotapp`在你的 virtualenv 中做。`import venvdotapp; venvdotapp.require_bundle()`如果您正在编写一些需要您的 venv 捆绑的代码，您也可以这样做。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-05-19T11:07:41.413

添加

```
export PYTHONHOME=$VIRTUAL_ENV
alias python=/Library/Frameworks/Python.framework/Versions/3.6/bin/python3  # set path to ur python 
```

在 venv**激活**脚本的末尾

# hibernate - 查找具有特定 spring 安全角色的用户

> ID：13249884
> 
> 赞同：0
> 
> 时间：2012-11-06T11:18:25.433
> 
> 标签：hibernate, grails, groovy, spring-security, hql

我有以下内容：

```
def userInstance=User.findAll("from User u where u.merchant is not null and u.merchant.id = ? and u.authorities.authority.contains('ROLE_MERCHANT')", merchantId) 
```

并得到以下错误：

```
org.hibernate.hql.ast.QuerySyntaxException: unexpected AST node: ( near line 1, column 121 [from com.testing.tests.User u where u.merchant is not null and u.merchant.id = ? and u.authorities.authority.contains('ROLE_MERCHANT')]
    at $Proxy20.createQuery(Unknown Source)
    at testing.admin.UserService.findByMerchantId(UserService.groovy:14) 
```

如何仅返回具有特定角色的用户？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T13:11:59.347

如果您查看默认实现，`User#getAuthorities`您会注意到该属性本身是通过动态查找器调用实现的：

```
UserRole.findAllByUser(this).collect { it.role } as Set 
```

因此在HSQL查询中不能引用`authorities`，但是可以通过`UserRole`多种方式查询关联域类上具有特定角色的用户：

```
def users = UserRole.withCriteria {
   role{
       eq 'authority', 'ROLE_SOMETHING'
   }
   projections{
      property 'user'
   }
} 
```

或者

```
def users = UserRole.findAllByRole(domainRole)?.user 
```

# android - 为什么在 AutoCompleteTextView 中只选择了一个联系人？

> ID：13249885
> 
> 赞同：0
> 
> 时间：2012-11-06T11:18:28.297
> 
> 标签：android

我想从 autocompletetextview 中选择多个联系人。但现在我只能选择一个联系人。

代码如下。

**MainActivity.java**

```
public class MainActivity extends Activity {

private ArrayList<Map<String, String>> mPeopleList;
private SimpleAdapter mAdapter;
private AutoCompleteTextView mTxtPhoneNo;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    mPeopleList = new ArrayList<Map<String, String>>();
    PopulatePeopleList();
    mTxtPhoneNo = (AutoCompleteTextView) findViewById(R.id.mmWhoNo);
    mAdapter = new SimpleAdapter(this, mPeopleList, R.layout.custcontview,
            new String[] { "Name", "Phone", "Type" }, new int[] {
                    R.id.ccontName, R.id.ccontNo, R.id.ccontType });
    mTxtPhoneNo.setAdapter(mAdapter);

    mTxtPhoneNo.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> av, View arg1, int index,
                long arg3) {
            Map<String, String> map = (Map<String, String>) av.getItemAtPosition(index);

            String name  = map.get("Name");
            String number = map.get("Phone");
            mTxtPhoneNo.setText(""+name+"<"+number+">");

        }

    });

}

public void PopulatePeopleList() {
    mPeopleList.clear();
    Cursor people = getContentResolver().query(
            ContactsContract.Contacts.CONTENT_URI, null, null, null, null);
    while (people.moveToNext()) {
        String contactName = people.getString(people
                .getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));
        String contactId = people.getString(people
                .getColumnIndex(ContactsContract.Contacts._ID));
        String hasPhone = people
                .getString(people
                        .getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER));

        if ((Integer.parseInt(hasPhone) > 0)){
            // You know have the number so now query it like this
            Cursor phones = getContentResolver().query(
            ContactsContract.CommonDataKinds.Phone.CONTENT_URI,
            null,
            ContactsContract.CommonDataKinds.Phone.CONTACT_ID +" = "+ contactId,
            null, null);
            while (phones.moveToNext()){
                //store numbers and display a dialog letting the user select which.
                String phoneNumber = phones.getString(
                phones.getColumnIndex(
                ContactsContract.CommonDataKinds.Phone.NUMBER));
                String numberType = phones.getString(phones.getColumnIndex(
                ContactsContract.CommonDataKinds.Phone.TYPE));
                Map<String, String> NamePhoneType = new HashMap<String, String>();
                NamePhoneType.put("Name", contactName);
                NamePhoneType.put("Phone", phoneNumber);
                if(numberType.equals("0"))
                    NamePhoneType.put("Type", "Work");
                    else
                    if(numberType.equals("1"))
                    NamePhoneType.put("Type", "Home");
                    else if(numberType.equals("2"))
                    NamePhoneType.put("Type",  "Mobile");
                    else
                    NamePhoneType.put("Type", "Other");
                    //Then add this map to the list.
                    mPeopleList.add(NamePhoneType);
            }
            phones.close();
        }
    }
    people.close();
    startManagingCursor(people);
}

public void onItemClick(AdapterView<?> av, View v, int index, long arg){
    Map<String, String> map = (Map<String, String>) av.getItemAtPosition(index);
    Iterator<String> myVeryOwnIterator = map.keySet().iterator();
    while(myVeryOwnIterator.hasNext()) {
        String key=(String)myVeryOwnIterator.next();
        String value=(String)map.get(key);
        mTxtPhoneNo.setText(value);
    }
}

} 
```

**activity_main.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<AutoCompleteTextView
    android:id="@+id/mmWhoNo"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:hint="To...." 
    android:textColor="#A5AA0000"
    >
</AutoCompleteTextView>

</LinearLayout> 
```

**custcontview.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<TextView
    android:id="@+id/ccontName"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Large Text"
    android:textAppearance="?android:attr/textAppearanceLarge"
    android:textColor="#A5AA0000" />

<TextView
    android:id="@+id/ccontNo"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@id/ccontName"
    android:text="Medium Text"
    android:textAppearance="?android:attr/textAppearanceMedium"
    android:textColor="#A5AA0000" />

<TextView
    android:id="@+id/ccontType"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@id/ccontNo"
    android:layout_alignParentRight="true"
    android:layout_marginRight="14dp"
    android:text="Small Text"
    android:textAppearance="?android:attr/textAppearanceSmall"
    android:textColor="#A5AA0000" />
 </LinearLayout> 
```

**AndroidManifest.xml**

```
<uses-permission android:name="android.permission.READ_CONTACTS"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T11:20:31.300

与其编写使用列表视图选择多个联系人的逻辑，我们可以简单地使用`MultiAutoCompleteTextView`. 代码与`AutoCompleteTextView`. 通过这个我们可以选择多个联系人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T12:26:49.827

使用`MultiAutoCompleteTextView`, 代替。

```
mTxtPhoneNo = (MultiAutoCompleteTextView) findViewById(R.id.mmWhoNo);
mTxtPhoneNo.setTokenizer(new MultiAutoCompleteTextView.CommaTokenizer()); 
```

希望能帮助到你！

# javascript - 从数组中的最大对象属性返回值 - JS

> ID：13249886
> 
> 赞同：1
> 
> 时间：2012-11-06T11:18:33.977
> 
> 标签：javascript

这个问题的标题可能有点误导，但它最准确地描述了我遇到的问题。

我目前正在编写一个自定义灯箱脚本，类似于可以在 Facebook 和 airbnb 上找到的那个。一旦用户单击图像，灯箱不会根据内容调整大小，而是图像以围绕它的黑色区域为中心（如果您是普通的 FB 用户，您应该知道我的意思）。

我将要用于灯箱的图像存储在 JS 数组中，如下所示（从 MySQL 数据库生成：

```
var item_images = [
    { 'id': 2, 'url': '50929ab7ae8e5.jpg', 'caption': 'My Photo # 1', 'width': 1000, 'height': 750 },
    { 'id': 7, 'url': '50929ab7ae8e8.jpg', 'caption': 'My Photo # 1', 'width': 1000, 'height': 800 },
    { 'id': 3, 'url': '50929ac161d10.jpg', 'caption': 'My Photo # 2', 'width': 1000, 'height': 750 },
    { 'id': 4, 'url': '50929acbe8dc8.jpg', 'caption': 'My Photo # 3', 'width': 1000, 'height': 750 }
]; 
```

我需要 JS 中的一个函数来查找图像所需的最大宽度和最大高度。例如，给定上面的数据，我想要一个函数`GetMaxSizes()`，它将返回`800`（数组中的最大高度）和`1000`（数组中的最大宽度）。

有没有比遍历整个数组并比较所有内容更有效的方法？我担心如果里面有很多元素，这会变慢`item_images`：

```
function GetRequiredHeight()
{
    var req_height = 0, 
         req_width = 0;

    for(var i in item_images)
    {
        var image = item_images[i];
        if(image.width > req_width) { req_width = image.width };
        if(image.height > req_height) { req_height = image.height };
    }

    return { width: req_width, height: req_height };
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T11:34:04.777

这是 O(n) 复杂度，我想不出比这更好的了。多年来，迭代具有 10000 个元素的数组并不是什么大问题。你想在这里存储多少张照片？百万？如果您的算法变慢，我会寻找不同的原因。

我假设您执行一次此迭代。如果您想经常更改此数组，可以进行一些优化以避免一直遍历整个数组。我有一些好主意，但更多的是写作，所以如果你需要它，请评论这个答案。

# pyqt - 表格视图中的按钮委托

> ID：13249887
> 
> 赞同：0
> 
> 时间：2012-11-06T11:18:34.533
> 
> 标签：pyqt, pyqt4

我正在尝试在表格视图中每行嵌入一个按钮。我的按钮绘制正确，但对任何点击都没有反应。我应该为此列设置标志吗？到目前为止，我有类似的东西：

```
 if index.column() == 14:
        flags |=  QtCore.Qt.ItemIsSelectable  | QtCore.Qt.ItemIsUserCheckable | Qt.ItemIsEnabled
    return flags 
```

这是代表：

```
class AButton(QtGui.QStyledItemDelegate):
mouse_isPressed = False

def __init__(self, parent = None):
    QtGui.QStyledItemDelegate.__init__(self, parent)

def boundingRect(self):
    return QtCore.QRectF(0, 0, 40, 40)

def paint(self, painter, option, widget = 0):
    opt = QtGui.QStyleOptionButton()

    opt.state = ((QtGui.QStyle.State_Sunken if self.mouse_isPressed else QtGui.QStyle.State_Raised) | QtGui.QStyle.State_Enabled)
    opt.text = self.text()
    opt.icon = self.icon()
    opt.rect = option.rect
    opt.palette = option.palette
    QtGui.QApplication.style().drawControl(QtGui.QStyle.CE_PushButton, opt, painter)

def text(self):
    return QtCore.QString("hi")

def icon(self):
    return QtGui.QIcon()

def mousePressEvent(self, event):
    self.mouse_isPressed = True
    print "HELLO"
    self.update()

def mouseReleaseEvent(self, event):
    self.mouse_isPressed = False
    self.update() 
```

有没有我可以看的例子？

在此先感谢，克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T14:54:37.317

Qt 委托不像 QWidget 那样提供特定的事件处理程序（如 mousePressEvent、mouseReleaseEvent、...）。如果您想对用户操作做出反应，您应该重新实现该[`editorEvent`](http://doc.qt.nokia.com/4.7/qstyleditemdelegate.html#editorEvent)方法。顺便说一句，没有`'update'`定义这样的方法`QStyledItemDelegate`

# c# - 如何使用 EF 将对象保存到数据库并从数据库中创建主键？

> ID：13249888
> 
> 赞同：3
> 
> 时间：2012-11-06T11:18:34.840
> 
> 标签：c#, entity-framework

我正在使用 C#、.NET Framework 4.0 开发 WCF JSon Web 服务，`Entity Framework`用于访问数据库。

我必须创建一个新`EReportDB.EReport`对象，填充它，将其保存在数据库中并获取它的新 pk `EReportDb.Ereport.eReportId`。

这是我的代码，但我不知道该怎么做：

```
 public bool SaveEReport(EReportContract eContractReport)
    {
        if (eContractReport == null)
            throw new ArgumentNullException("eContractReport", "SaveEReport: eReport is null");

        using (EReportDB.EReportEntities context = new EReportDB.EReportEntities())
        {
            EReportDB.EReport eReport = new EReportDB.EReport();
            eReport.orderId = eContractReport.orderId;
            eReport.timeIn = DateTime.Parse(eContractReport.timeIn, new CultureInfo("en-GB", false));
            eReport.timeOut = DateTime.Parse(eContractReport.timeOut, new CultureInfo("en-GB", false));
            eReport.isProducFact = eContractReport.isProducFact;
            /*
              ..snip..
            */
            eReport.olPkSizeRs_ = eContractReport.olPkSizeRs;
            eReport.olPkWeightRs = eContractReport.olPkWeightRs;
        }
        return false;
    } 
```

**我怎样才能做到这一点？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T11:34:15.127

```
int id = 0; // assuming the datatype for eReportId is int

using (EReportDB.EReportEntities objectContext = new EReportDB.EReportEntities())
{
   EReportDB.EReport eReport = new EReportDB.EReport();
   eReport.orderId = eContractReport.orderId;
   eReport.timeIn = DateTime.Parse(eContractReport.timeIn, new CultureInfo("en-GB", false));
   eReport.timeOut = DateTime.Parse(eContractReport.timeOut, new CultureInfo("en-GB", false));
   eReport.isProducFact = eContractReport.isProducFact;
   /*
     ..snip..
   */
   eReport.olPkSizeRs_ = eContractReport.olPkSizeRs;
   eReport.olPkWeightRs = eContractReport.olPkWeightRs;

   objectContext.AddObject(eReport); // method to insert the entity 
   objectContext.SaveChanges();
   id = eReport.eReportId;

   transaction.Complete();
} 
```

id 是插入记录的 PK。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T11:33:57.570

EF已经为你填好了。打电话

```
context.AddObject(eReport); 
context.Save(); 
```

在你的块的末尾，`using`你会找到你的钥匙`eReport.eReportId`。

# c# - 为什么我不能为 WPF 中范围为 Internal 的 UserControl 分配 Name 值？

> ID：13249891
> 
> 赞同：2
> 
> 时间：2012-11-06T11:18:44.223
> 
> 标签：c#, wpf

我有一个用户控件，我已将其设置为内部：

```
UserControl x:Class="ClassName"
             x:ClassModifier="internal"
```

它是匹配的 .cs 文件：

```
 internal partial class ClassName : UserControl
    {
        public ClassName()
        {
            InitializeComponent();
        }
    }
```

现在，当我尝试在窗口上使用控件时，如下所示：

```
 uControls:ClassName x:Name="instanceName" Margin="0,0,8,0" Height="60" VerticalAlignment="Top" Width="60" HorizontalAlignment="Right" MouseLeftButtonUp="instanceName_MouseLeftButtonUp" Cursor="ScrollNW" 
```

我收到一条错误消息：

```
The type 'ClassName' cannot have a Name attribute. Value types and types without a default constructor can be used as items within a ResourceDictionary. Line 12 Position 44.
```

如果我将访问修饰符更改为公共，则一切都按预期工作。

为什么我不能有内部用户控制？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T14:12:12.017

我相信这是由 WPF 的编译模型引起的。我从内存中引用它并且找不到资源来备份它，但我相信 WPF 编译发生在两次传递中：基本上“代码隐藏”部分首先编译为中间程序集，然后 XAML 编译为引用该中间体，并将结果合并到最终组装中。

因此，必须公开声明 XAML 引用的类/成员，因为（就编译器而言）它们位于 XAML 的单独程序集中。

**编辑：在**[此处](http://msdn.microsoft.com/en-us/library/aa970678.aspx)找到了概述该过程的 Microsoft 参考资料。特别是，在支持我上面所说的方面，它说：

> 如果项目中的一个或多个 XAML 文件引用了本地定义的类型，则会生成一个临时 .dll 文件，以便在第二遍标记编译完成后创建最终的应用程序程序集。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T14:01:19.473

例如，我知道 XAML 中使用的资源必须是公共的，即使在同一个程序集中也是如此。我相信那是因为他正在使用反射并且只考虑公共的东西，但我对内部实现有点猜测。

我知道我在公共/内部访问修饰符方面还有其他问题，但我现在不记得了。

您可能会遇到有关 UserControl 名称属性的相同限制。

总的来说，考虑到我在 WPF 方面的有限经验，它是一个非常强大的框架，但不幸的是，您必须在此过程中“忘记”一些好的实践。

例如，依赖属性指定起来很麻烦。我总是觉得缺少一个 DependencyProperty 关键字来将我从这一切中抽象出来。

# mysql - IN Mysql 函数如何返回多行

> ID：13249894
> 
> 赞同：1
> 
> 时间：2012-11-06T11:18:56.440
> 
> 标签：mysql, sql

我正在使用 MySQL。我可以在 MySQL 程序中获得更多行，但不能在函数中获得。我想通过返回不止一行的值来编写函数。我附上我的部分代码：

```
drop function if exists test_splitfn;
DELIMITER $$

CREATE Function test_splitfn( sSepar VARCHAR(255), saVal TEXT )
Returns @MyTable table 
body:

BEGIN

  DROP TEMPORARY TABLE IF EXISTS lib_Explode;
  CREATE TEMPORARY TABLE lib_Explode(
    pos int unsigned NOT NULL auto_increment,
    val VARCHAR(255) NOT NULL,
    PRIMARY KEY  (pos)
  ) ENGINE=Memory COMMENT='Explode() results.';

  IF sSepar IS NULL OR saVal IS NULL THEN LEAVE body; END IF;

  SET @saTail = saVal;
  SET @iSeparLen = LENGTH( sSepar );

  create_layers:
  WHILE @saTail != '' DO

    # Get the next value
    SET @sHead = SUBSTRING_INDEX(@saTail, sSepar, 1);
    SET @saTail = SUBSTRING( @saTail, LENGTH(@sHead) + 1 + @iSeparLen );
    INSERT INTO lib_Explode SET val = @sHead;

  END WHILE;

     Insert @MyTable
      SELECT val  FROM lib_Explode;

    return @MyTable;
END; $$
DELIMITER ; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T17:11:45.937

在 MySQL 函数中，您无法返回表..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T11:24:53.583

尝试这样的事情：

```
DROP FUNCTION IF EXISTS test_splitfn;
DELIMITER $$

CREATE PROCEDURE test_splitfn (IN sSepar VARCHAR(255), saVal TEXT)
body:BEGIN

    DROP TEMPORARY TABLE IF EXISTS lib_Explode;
    CREATE TEMPORARY TABLE lib_Explode(
        pos int unsigned NOT NULL auto_increment,
        val VARCHAR(255) NOT NULL,
        PRIMARY KEY  (pos)
    ) ENGINE=Memory COMMENT='Explode() results.';

    IF sSepar IS NULL OR saVal IS NULL THEN
        LEAVE body;
    END IF;

    SET @saTail = saVal;
    SET @iSeparLen = LENGTH( sSepar );

    WHILE (@saTail != '') DO
        SET @sHead = SUBSTRING_INDEX(@saTail, sSepar, 1);
        SET @saTail = SUBSTRING( @saTail, LENGTH(@sHead) + 1 + @iSeparLen );
        INSERT INTO lib_Explode SET val = @sHead;
    END WHILE;

    SELECT val FROM lib_Explode;
END$$
DELIMITER ; 
```

# c# - 将单个属性绑定到父项源

> ID：13249895
> 
> 赞同：0
> 
> 时间：2012-11-06T11:19:00.143
> 
> 标签：c#, wpf

我想在 ListBox 中显示问题列表。每个 ListBoxItem 都包含问题和一个带有显示答案选项的 RadioButtons 的 ListBox。第一个 ListBox 的 ItemsSource 是一个带有 Question 类对象的可观察集合。第二个 ListBox 的 ItemsSource 是 QuestionClass 中的一个列表属性：QuestionObj.Answers。我的问题是将 RadioButton 属性 GroupName 绑定到 Question 属性 QuestionObj.Index。我该如何解决这个问题？

这是类问题的代码：

```
public class Question
{
    private static int countQuestions;

    private int index;
    private string questionText;
    private List<String> answers = new List<String>();

    public Question()
    {
        countQuestions++;
    }
    public Question(string type, bool isRequired, string questionText, List<String> answers = null) :this()    
    {
        this.index = countQuestions;
        this.questionText = questionText;
        this.answers = answers;
    }

    public int Index
    {
        get { return index; }
    }
    public string QuestionText
    {
        get { return questionText; }
    }
    public List<String> Answers
    {
        get { return answers; }
    }
} 
```

这里是xaml：

```
<ListBox x:Name="Questions" ItemsSource="{Binding QuestionList}" >
    <ListBox.ItemTemplate>
        <DataTemplate>
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition/>
                    <RowDefinition/>
                </Grid.RowDefinitions>
                <Label Grid.Row="0" Content="{Binding QuestionText}"/>
                <ListBox x:Name="AnswerOptions" Grid.Row="1" ItemsSource="{Binding Answers}">
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <RadioButton Content="{Binding}" GroupName={Binding ??????}/>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>
            </Grid>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T11:32:21.947

编辑：将 SelectedIndex 更改为 SelectedItem.Index

```
<RadioButton Content="{Binding}" 
             GroupName={Binding ElementName=Questions, Path=SelectedItem.Index}/> 
```

看看这里。[www.nbdtech.com/Free/WpfBinding.pdf](http://www.nbdtech.com/Free/WpfBinding.pdf)

# c# - C# - SharpSSH 以 ASCII 模式传输？

> ID：13249896
> 
> 赞同：3
> 
> 时间：2012-11-06T11:19:08.557
> 
> 标签：c#, sharpssh

我正在使用 SharpSSH 将 xml 文件传输到 unix 机器。这是写入文件的代码：

```
public override void WriteFile(string directoryName, string fileName, string responseText) {
    try {
        sshExec.RunCommand(@"echo """ + responseText + @""" > " + directoryName + "/" + fileName);
    } catch (Exception e) {
        log.Error("Failed to write file at " + directoryName + "/" + fileName);
        throw new Exception("Failed to write file to " + directoryName + "/" + fileName, e);
    }
} 
```

问题是这些文件无法通过 XSD 验证。在传输前检查它们时，它们通过了验证。我怀疑问题在于它们以 ASCII 模式复制，特别是问题可能是行尾字符。我们之前在使用 WinSCP 时遇到过这个问题，直到我们将其配置为以二进制模式传输。
重要的是，即使接收应用程序在 unix 上运行，它确实需要 windows 字符集并且知道如何处理它。
SharpSSH 的开发者[声称该实现只支持二进制模式](http://www.tamirgal.com/blog/category/SharpSSH.aspx)。有没有人对这个库有任何经验并且可以阐明这一点？

**编辑**
似乎发送的响应没有任何 Crlf 字符，所以我现在完全被难住了。

# .net - 在 Visual Studio 2010 中 ClickOnce 部署 .NET 4.0.3

> ID：13249898
> 
> 赞同：1
> 
> 时间：2012-11-06T11:19:10.267
> 
> 标签：.net, visual-studio-2010, clickonce

[我已将.NET](http://en.wikipedia.org/wiki/.NET_Framework) 4.0.3的更新安装[到 Visual Studio 2010](http://support.microsoft.com/kb/2600214)中，现在可以针对框架 4.0.3，但是当我查看 ClickOnce 中的选项时，它不能作为先决条件。

如何通过 ClickOnce 部署它？

# mysql - MySQL通过引用一个数据字段来选择多行

> ID：13249903
> 
> 赞同：0
> 
> 时间：2012-11-06T11:19:30.137
> 
> 标签：mysql, sql, select, group-by, having

```
===========================
= id = model_id = property =
===========================
= 14 = 1        = 1       =
===========================
= 15 = 1        = 3       =
===========================
= 16 = 2        = 1       = 
```

我有一个像上面这样的表，我只想选择 model_ids 属性等于 1 AND 3

如果你能告诉我怎么做，我会很高兴

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T11:43:22.783

听起来你想要这个：

```
select model_id
from yourtable
where property in (1, 3)
group by model_id
having count(*) > 1; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/1823b/7)

或者，您可以使用以下内容：

```
select model_id
from yourtable t1
where property = 1
  and exists (select model_id
              from yourtable t2
              where t1.model_id = t2.model_id
                and property = 3) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/1823b/8)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T11:21:38.553

### 您可以使用[`IN`](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_in)子句：

```
SELECT `model_id`
  FROM `table`
  WHERE `property` IN (1, 3) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T11:22:09.037

```
select model_ids from yourtable where property in(1,3) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T11:38:50.927

试试这个：

```
SELECT DISTINCT model_ids 
FROM tableName 
WHERE property in (1,3) 
GROUP BY model_ids 
HAVING COUNT( DISTINCT property ) = 2 
```

# c++ - FMOD OpenCallback 上的不可预测的 EXC_BAD_ACCESS

> ID：13249904
> 
> 赞同：0
> 
> 时间：2012-11-06T11:19:32.020
> 
> 标签：c++, macos, exc-bad-access, callstack, fmod

我遇到了一个奇怪的崩溃，表现为一个 EXC_BAD_ACCESS，它总是发生在 FMOD 打开的线程调用堆栈上的某个地方，调用它是 OpenCallback（当 FMOD 在内存中找不到声音时调用的函数，所以需要加载它从磁盘）。崩溃发生在许多不同的地方，我似乎找不到任何改变的原因，因为执行路径基本上是相同的。我注意到的一件事是，在调用堆栈中有两个对同一个非递归构造函数的调用彼此相邻。也就是说，调试器（Xcode/LLDB，但我已经用 Xcode/GDB 尝试过）认为这个构造函数正在调用自己，但事实并非如此。

我注意到的另一件事是这些调用的偏移量是不同的，即使它们指的是同一个函数。有谁知道可能会发生什么？我很困惑，因为我什至不知道这种问题叫什么（因此不能谷歌它）。

这是其中一次崩溃的调用堆栈（有些东西为了匿名而被重命名，但我试图保持命名约定一致）。请注意，CString 和 PIFilePath 构造函数分别被调用两次，并且是相邻的。

```
* thread #49: tid = 0x6003, 0x009d3220 MyProject`SpinLock::Lock() + 64 at spinlock.h:73, stop reason = EXC_BAD_ACCESS (code=2, address=0xb01f7ffc)
frame #0: 0x009d3220 MyProject`SpinLock::Lock() + 64 at spinlock.h:73
frame #1: 0x0099d8e0 MyProject`tcmalloc::CentralFreeList::RemoveRange(void**, void**, int) + 160 at central_freelist.cc:211
frame #2: 0x009b4989 MyProject`tcmalloc::ThreadCache::FetchFromCentralCache(unsigned long, unsigned long) + 281 at thread_cache.cc:149
frame #3: 0x009d66fc MyProject`tcmalloc::ThreadCache::Allocate(unsigned long, unsigned long) + 332 at thread_cache.h:330
frame #4: 0x009ce123 MyProject`do_malloc + 227 at tcmalloc.cc:960
frame #5: 0x009ce1e5 MyProject`do_malloc_or_cpp_alloc + 85 at tcmalloc.cc:897
frame #6: 0x009d1285 MyProject`MallocBlock::Allocate(unsigned long, int) + 517 at debugallocation.cc:534
frame #7: 0x009ce460 MyProject`DebugAllocate + 48 at debugallocation.cc:968
frame #8: 0x011cc942 MyProject`malloc + 50
frame #9: 0x00a80bbf MyProject`CSystemUtilities::CSAllocate(long, unsigned long, void*) + 47 at CSystemUtilities.cpp:2358
frame #10: 0x96a08d17 CoreFoundation`CFAllocatorAllocate + 343
frame #11: 0x96a0de4b CoreFoundation`__CFStringChangeSizeMultiple + 1179
frame #12: 0x96a219d6 CoreFoundation`CFStringCreateMutableCopy + 454
frame #13: 0x00a9bae2 MyProject`CString::SetCFString(__CFString const*, bool) + 114 at CString.cpp:527
frame #14: 0x00a9bcb0 MyProject`CString::CString(CString const&) + 112 at CString.cpp:189
frame #15: 0x00a9bc1f MyProject`CString::CString(CString const&) + 47 at CString.cpp:190
frame #16: 0x00aa3a9e MyProject`PIFilePath::NormalisePath(CString const&, long, bool, unsigned short) + 2142 at PIFilePath.cpp:2021
frame #17: 0x00aa2dc9 MyProject`PIFilePath::FindPathInList(CString const&, std::vector<CString, std::allocator<CString> > const&) + 89 at PIFilePath.cpp:1716
frame #18: 0x00aa3d26 MyProject`PIFilePath::IsAbsolutePath(CString const&) + 134 at PIFilePath.cpp:465
frame #19: 0x00aa62d1 MyProject`PIFilePath::ApplyMappingsToPath(CString const&, CString const&, bool) + 1041 at PIFilePath.cpp:1323
frame #20: 0x00aa292d MyProject`PIFilePath::TranslatePath(CString const&) const + 4157 at PIFilePath.cpp:1645
frame #21: 0x00aa15ad MyProject`PIFilePath::SetPath(CString const&, PIFilePath::ConvertPathMode) + 253 at PIFilePath.cpp:175
frame #22: 0x00aa1460 MyProject`PIFilePath::PIFilePath(CString const&, PIFilePath::ConvertPathMode) + 96 at PIFilePath.cpp:122
frame #23: 0x00aa13dd MyProject`PIFilePath::PIFilePath(CString const&, PIFilePath::ConvertPathMode) + 61 at PIFilePath.cpp:123
frame #24: 0x00becad8 MyProject`FileAttributes + 88 at pi_files.cpp:3341
frame #25: 0x0090702b MyProject`SystemStuff::CWinFS::Exists(char const*) + 219 at fsWin.cpp:627
frame #26: 0x008e2892 MyProject`SystemStuff::CMultiFS::FindFS(char const*) + 162 at fsMulti.cpp:390
frame #27: 0x008e1466 MyProject`SystemStuff::CMultiFS::Open(SystemStuff::RCPtr<SystemStuff::IBlock>&, char const*, unsigned long) + 134 at fsMulti.cpp:223
frame #28: 0x008db911 MyProject`SystemStuff::CDispatchFS::Open(SystemStuff::RCPtr<SystemStuff::IBlock>&, char const*, unsigned long) + 321 at fsDispatch.cpp:158
frame #29: 0x008cbb89 MyProject`SystemStuff::FS::Open(SystemStuff::RCPtr<SystemStuff::IBlock>&, char const*, unsigned long) + 233 at fs.cpp:135
frame #30: 0x00985611 MyProject`OpenCallback(char const*, int, unsigned int*, void**, void**) + 177 at sndFMODEx.cpp:324
frame #31: 0x029ecf59 libfmodex.dylib`FMOD::DSP::disconnectFrom(FMOD::DSP*) + 25999
frame #32: 0x029ee7cb libfmodex.dylib`FMOD_File_SetDiskBusy + 4861
frame #33: 0x02a0c15b libfmodex.dylib`FMOD::SystemI::createSoundInternal(char const*, unsigned int, unsigned int, unsigned int, FMOD_CREATESOUNDEXINFO*, FMOD::File**, bool, FMOD::SoundI**) + 2413
frame #34: 0x0298b6aa libfmodex.dylib
frame #35: 0x02a11d2c libfmodex.dylib`FMOD::SystemI::createSoundInternal(char const*, unsigned int, unsigned int, unsigned int, FMOD_CREATESOUNDEXINFO*, FMOD::File**, bool, FMOD::SoundI**) + 25918
frame #36: 0x91b6d557 libsystem_c.dylib`_pthread_start + 344 
```

这是我大约 40% 的时间发生的崩溃，另外 60% 的时间它失败了`NormalisePath`（但上面的调用堆栈是相同的）。

# java - 在 POJO 中使用 EJB 注入

> ID：13249908
> 
> 赞同：6
> 
> 时间：2012-11-06T11:20:05.187
> 
> 标签：java, jsf, jakarta-ee, ejb, pojo

我知道使用 @EJB 注释的注入只能在 EJB 类、servlet 或 JSF 托管 bean 中进行，但同时我需要在 POJO 类中拥有一些注入业务接口的实例，所以我想过做以下事情：

在我的 JSF 托管 bean

```
@EJB BusinessInterfaceLocal businessInterface;

private void someMethod(){
    PojoInterface pojo = new PojoClass(this.businessInterface);
} 
```

在我的 POJO 类中，我有这个构造函数

```
BusinessInterfaceLocal businessInterface;    

public PojoClass(BusinessInterfaceLocal businessInterface){
   this.businessInterface = businessInterface;

   //The following throws a Null Pointer Exception
   this.businessInterface.someMethodCall();
} 
```

以上不应该正常工作吗？但事实并非如此，PojoClass 中的 businessInterface 对象被评估为 null，从而引发空指针异常。

我希望有人能指出我做错了什么。

提前致谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-06T11:29:15.463

**确认**

是否有可能在注入 EJB 之前创建 PojoClass。我的意思是，你在哪里调用“someMethod”？它在托管bean的构造函数中吗？变量不会丢失其引用值。

您说您可以看到托管 bean 中的 BusinessInterfaceLocalbean 不为空，您能在检查后验证您创建了 Pojo 吗？

**替代解决方案：**

**解决方案 1** 您可以将 POJO 用作无状态 bean，我认为这样做没有任何问题，除非您当然尝试在 EE 容器之外使用 POJO，也就是说，看起来并非如此.

使 POJO 无状态将使您能够注入 EJB。

**解决方案 2** 或 JNDI 查找，实现如下：

```
@Stateless(name="myEJB")
public class MyEJB {

  public void ejbMethod() {
  // business logic
  }

}

public class TestEJB {

  public static void main() {
  MyEJB ejbRef = (MyEJB) new InitialContext().lookup("java:comp/env/myEJB");
  ejbRef.ejbMethod();
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T12:15:07.790

`NullPointerException`使用上面显示的代码，可以在指示的行处抛出a 的唯一方法是`businessInterface`托管 bean 中的字段是否为空。当从一个对象传递到另一个对象时，引用不会神秘地变为空，并且`PojoClass`不会做任何会导致变量变为空的事情。我建议您进行一些调试或日志记录，以确定在调用构造函数时托管 bean 中字段的值。如果它为空，那么问题出在注入到 bean 中，与 POJO 无关，您应该修复它。

如果抛出的异常实际上比您显示的行更深，那么这可能是在错误的上下文中使用 EJB 代理的问题。您可能知道，对 EJB 的引用通常不是对 EJB 本身的引用，而是对某种将方法调用传递给 EJB 的代理。代理存在，因此容器可以介入并执行诸如启动事务、检查授权等操作。代理可能需要调用某些上下文资源来完成其工作，这些资源在从托管 bean 访问 EJB 时可用，但由于某些不明显和扭曲的原因，从 POJO 访问时不可用。这些资源的不可用可能导致`NullPointerException`. 现在，我认为简单地将托管 bean 的引用传递给 POJO 不太可能让您陷入这种情况；仅当您执行诸如从不同线程访问托管 bean 之类的操作时才会发生这种情况。所以，应该不是这个！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T09:37:10.913

The problem was caused by me trying to use the businessInterface object in the constructor, while the container injects the ejb only after it's done instantiating the managed bean,

reference to a similar question [https://stackoverflow.com/a/6537228/1249304](https://stackoverflow.com/a/6537228/1249304)

What I did is that I created a method and annotated it with the @PostConstruct annotation, this way after the container is done with instantiating the managed bean, the annotated method gets called and the businessInterface object is no longer null

```
@PostContsruct
public void onInit(){
   //businessInterface is no longer null
   businessInterface.someMethod();
} 
```

# css - 从 css 编写 html

> ID：13249919
> 
> 赞同：0
> 
> 时间：2012-11-06T11:20:51.190
> 
> 标签：css, escaping, html

我很难通过 CSS 插入 html 标签并将其解释为 html。

我想写`<noscript><h2>Please enable javascript!</h2></noscript>`在所有页面上的 h1 标题之后；所以我有

```
h1:after
{ 
content: "\003cnoscript\003e\003ch2\003ePlease enable javascript! \003c/h2\003e\003c/noscript\003e";
} 
```

在我的 CSS 中。

虽然这成功写入

```
<noscript><h2>Please enable javascript!</h2></noscript> 
```

它被视为字符串文字，并作为原始 h1 标头的一部分显示在页面上。

出于显而易见的原因，我不能将 javascript 用于此特定任务：P

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T11:29:16.400

从[W3](http://www.w3.org/TR/CSS21/generate.html#content)开始：

> 生成的内容不会改变文档树。特别是，它不会被反馈给文档语言处理器（例如，用于重新解析）。

**仅**当禁用 javascript 时`<noscript>`才会显示内容。

# ember.js - 如何使用 ember-data 和 couchdb-adapter 在一个请求中获取嵌入式对象

> ID：13249920
> 
> 赞同：3
> 
> 时间：2012-11-06T11:20:51.987
> 
> 标签：ember.js, ember-data

我正在使用 ember.js 和沙发数据库后端开发应用程序。到目前为止，我使用 ember-resource 作为数据库驱动程序，但我正在考虑切换到 ember-data，因为这似乎更可持续。

由于我正在使用 couch DB，因此我正在使用[Couch DB-Adapter](https://github.com/pangratz/ember-couchdb-adapter)。

我的数据库中的文档包含完整的对象结构，因此我必须在数据库驱动程序中指定嵌入的对象。

但是，尽管我将我的子对象指定为嵌入的，但 ember-data 似乎使用单独的请求来获取这些对象，而不是仅仅将它们从主 json 中取出。

我的对象定义如下：

```
App.UserProfile = DS.Model.extend({
    type:              DS.attr('string'),
    fullname:          DS.attr('string'),
    email:             DS.attr('string'),
    pictureUrl:        DS.attr('string'),
    social:            DS.hasMany('App.SocialWebAccount', { embedded: true }),
    .....
});

App.SocialWebAccount = DS.Model.extend({
    profile: DS.belongsTo('CaiMan.UserProfile'),
    site:    DS.attr('string'),
    account: DS.attr('string'),
    .....
}); 
```

并且服务器数据是这样的：

```
{
  "_id": "thoherr",
  "_rev": "55-d4abcb745b42fe61f1a2f3b31c461cce",
  "type": "UserProfile",
  "fullname": "Thomas Herrmann",
  "email": "test@thoherr.de",
  "pictureUrl": "",
  "social": [
      {
          "site": "socialFacebook",
          "account": "thoherr"
      },
      {
          "site": "socialXing",
          "account": "Thomas_Herrmann7"
      },
      {
          "site": "socialEmail",
          "account": "test@thoherr.de"
      }
   ]
} 
```

加载后，UserProfile 确实包含我的社交数据的 ArrayProxy，它由三个条目填充，但它们都是未定义的，而不是 SocialWebAccount 的实例！

如果我尝试访问这个数组，ember-data 似乎会执行单独的数据库访问来获取数据，这会导致错误，因为沙发 DB-adapter 访问了一个 _id 字段，该字段在 undefined 中不可用。...

我错过了什么？

我认为“嵌入式”标志表明数据已经在 json 中并且可以从 json 实例化对象？

为什么 ember-data 会尝试获取嵌入的数据？

有什么提示吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T23:38:07.093

嵌入式选项似乎最近发生了变化。我在ember-data github 上的[测试文件中找到了一些信息。](https://github.com/emberjs/data/blob/master/packages/ember-data/tests/integration/embedded/embedded_without_ids_test.js)

在这些测试文件中，嵌入的内容是这样定义的

```
Comment = App.Comment = DS.Model.extend({
  title: attr('string'),
  user: DS.belongsTo(User)
});

Post = App.Post = DS.Model.extend({
  title: attr('string'),
  comments: DS.hasMany(Comment)
});
Adapter = DS.RESTAdapter.extend();
Adapter.map(Comment, {
  user: { embedded: 'always' }
}); 
```

或者

```
Adapter = DS.RESTAdapter.extend();
Adapter.map(Comment, {
  user: { embedded: 'load' }
}); 
```

'always' 似乎用于没有 id 的嵌入式数据（您的情况），例如

```
id: 1,
title: "Why not use a more lightweight solution?",
user: {
  name: "mongodb_expert"
} 
```

'load' 似乎用于带有 id 的嵌入式数据

```
id: 1,
user: {
  id: 2,
  name: "Yehuda Katz"
} 
```

希望它对您的特定情况有所帮助。最近我在 hasMany 关系方面遇到了很多麻烦（我不得不修改我的适配器才能让它工作）

# javascript - 数据的使用和意义：jQuery ajax + JSON 中的 { get_param: 'value' }

> ID：13249923
> 
> 赞同：0
> 
> 时间：2012-11-06T11:21:02.050
> 
> 标签：javascript, ajax, json, jquery

我正在用 jquery $.ajax 解析生成的 json，但是有一个我不明白的选项。我在一些例子中看到了它，并试图在 jquery.com 上寻找，但仍然不确定：

这个选项是：

```
data: { get_param: 'value' } 
```

像这样使用：

```
$.ajax({ 
                type: 'GET', 
                url: 'http://example/functions.php', 
                data: { get_param: 'value' }, //why we shell use that in that case?
                success: function (data) { 
                                    var names = data
                    $('#cand').html(data);
                }
          }); 
```

我知道“**数据：** ”是发送到服务器但解析 JSON 我认为我不发送而是从具有 GET 类型的服务器检索的内容。在这种情况下，下一部分“ **get_param：'value'** ”对我来说也没有意义，谁能解释一下何时、何地以及在什么情况下使用它？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T11:24:54.290

> 我知道“数据”是发送到服务器的

是的。如果`data`是一个对象，它会被序列化为一个`application/x-www-form-urlencoded`字符串，然后根据请求类型 (GET/POST) 放置在查询字符串或请求正文中。

jQuery 完成了所有必要的转义。

`[]`（默认情况下，它还通过添加键名将嵌套数据结构（您的示例中没有）折叠成 PHP 样式）。

> 但解析 JSON

不涉及 JSON（除非服务器响应一些）。

> 何时何地以及在什么情况下使用它

每当您想将数据传递给服务器而不是请求静态 URI 时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T11:25:28.090

您不发送 JSON（通常），您发送简单的 GET 或 POST HTTP 参数。它们通常以对象文字形式提供给`ajax`方法，但您也可以使用 string `"getparam=value"`。如果您提供一个对象，jQuery 将为您进行参数序列化和 URL 编码 - 它们以`x-www-form-urlencoded`.

从[文档中](http://api.jquery.com/jquery.ajax/)引用：

> **数据**( `Object`, `String`)
> 
> 要发送到服务器的数据。如果还不是字符串，则将其转换为查询字符串。它附加到 GET 请求的 url。请参阅 `processData`阻止此自动处理的选项。*对象必须是键/值对*。如果 value 是一个数组，jQuery 根据设置的值序列化多个具有相同键的值`traditional`。

# jquery - jQuery `data` 方法不转换值

> ID：13249935
> 
> 赞同：0
> 
> 时间：2012-11-06T11:21:49.450
> 
> 标签：jquery, asp.net-mvc

我在视图中有以下代码：

```
<div id="wiz_main"  data-place-schema="@Model.IsAgent">
...
</div> 
```

这是渲染的代码：

```
<div id="wiz_main" data-agent="True">
...
</div> 
```

我编写的javascript文件中的代码：

```
if ($('#wiz_main').data('agent'))
        limit = 1000;
else
        limit = 5; 
```

问题在于，`limit`总是等于`5`。为什么？我认为`data`很聪明，可以将价值转换为`bool`. 我不想写以下内容：

```
if ($('#wiz_main').data('agent') == 'True')
       limit = 1000;
else
       limit = 5; 
```

版本`jQuery`是 1.7.2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T11:28:40.037

你试过这个吗？

```
if ( $('#wiz_main').attr('data-agent') == 'True' ){....} 
```

**编辑**

```
if ( $('#wiz_main').attr('data-agent') ){....} 
```

另外，你为什么不写`true`而不是写`True`在你的html中？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T12:05:13.983

如果您要使用该`data`方法设置数据，则可以将其保存为布尔值：

```
$('#wiz_main').data({ agent: true });
var agentbool = $('#wiz_main').data('agent');
console.log(typeof agentbool); //boolean 
```

但是，html5 数据属性将始终存储为字符串

```
console.log(typeof $('#wiz_main').data('agent')); //string 
```

最接近布尔解析的东西是

```
function parseBool(str){
    return typeof str === 'string' && str.toLowerCase() === 'true';
}

var str = $('#wiz_main').data('agent');
var agentbool = parseBool(str); 
```

# sql - 向表中添加一列，其默认值等于现有列的值

> ID：13249936
> 
> 赞同：110
> 
> 时间：2012-11-06T11:21:52.243
> 
> 标签：sql, sql-server-2008

如何将默认值等于现有列的值的列添加到 SQL Server 表？

我试过这个 T-SQL 语句：

```
ALTER TABLE tablename 
ADD newcolumn type NOT NULL DEFAULT (oldcolumn) 
```

但它给出了一个错误：

> *在此上下文中不允许使用名称“oldcolumn”。有效表达式是常量、常量表达式和（在某些情况下）变量。不允许使用列名。*

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2012-11-06T11:25:56.130

试试这个：

```
ALTER TABLE tablename ADD newcolumn type NOT NULL DEFAULT (0)
Go
Update tablename SET newcolumn = oldcolumn Where newcolumn = 0
Go 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-09-09T09:19:13.283

由于`AFTER INSERT`额外的`UPDATE`语句，触发方法涉及开销。我建议使用`INSTEAD OF INSERT`触发器，如下所示：

```
CREATE TRIGGER tablename_on_insert ON tablename 
INSTEAD OF INSERT 
AS
INSERT INTO tablename (oldcolumn, newcolumn)
SELECT oldcolumn, ISNULL(newcolumn, oldcolumn)
FROM inserted 
```

`oldcolumn`如果是自动标识列，这将不起作用。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-11-06T11:40:37.367

我不太喜欢它们，但这里是你可以用`AFTER INSERT`触发器做到这一点的方法：

```
CREATE TRIGGER TableX_AfterInsert_TRG 
  ON TableX 
AFTER INSERT
AS
  UPDATE TableX AS t
  SET t.newcolumn = t.oldcolumn
  FROM Inserted AS i
  WHERE t.PK = i.PK ;              -- where PK is the PRIMARY KEY of the table 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-04-21T15:57:55.240

要扩展[Kapil](https://stackoverflow.com/users/1371805/kapil-khandelwal)的答案并避免不需要的默认约束，请尝试以下操作：

```
ALTER TABLE tablename ADD newcolumn type NOT NULL CONSTRAINT DF_TMP_TABLENAME_NEWCOLUMN DEFAULT -9999
Go
Update tablename SET newcolumn = oldcolumn
Go
ALTER TABLE tablename DROP CONSTRAINT DF_TMP_TABLENAME_NEWCOLUMN
Go 
```

如果您的类型是 varchar、nvarchar、datetime 或其他类型的任何兼容数据，请将 -9999 替换为“noData”：具体值无关紧要，它将被第二条指令擦除。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-07-26T17:01:40.290

您可以使用计算列根据现有列值在表中插入新列

```
ALTER TABLE dbo.TableName ADD NewColumn AS (OldColumn) PERSISTED; 
```

或者，如果您想根据现有列值对值进行一些更改，请使用

```
ALTER TABLE dbo.TableName ADD NewColumn AS (OldColumn * 1.5) PERSISTED; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-11-04T07:35:43.367

就我而言，我想添加一个名为 CODE 的新的非空唯一列，但我不知道创建时的值。我通过从 NewID() 获取默认值来设置它的默认值，然后稍后更新。

```
ALTER TABLE [WIDGET] ADD [CODE] CHAR(5) NOT NULL DEFAULT(SUBSTRING(CONVERT(CHAR(36), NEWID()), 1, 5))

ALTER TABLE [dbo].[WIDGET] WITH CHECK ADD CONSTRAINT [UQ_WIDGET_CODE] UNIQUE ([CODE]) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-05-21T15:42:12.073

使用计算列，它甚至可以处理`IDENTITY`列值：

```
CREATE TABLE #This
( Id        INT IDENTITY(1,1)
 ,MyName    VARCHAR(10)
 ,FullName  AS (Myname + CONVERT(VARCHAR(10),Id)) PERSISTED);

INSERT #This VALUES ('Item'),('Item');

SELECT * FROM #This;

DROP TABLE #This; 
```

产生以下结果：

[![结果为网格](../Images/c09d324fb1aaf86a140cc1a9e7129e35.png)](https://i.stack.imgur.com/HHqET.png)

* * *

## 回答 #8

> 赞同：-3
> 
> 时间：2016-10-19T07:54:45.767

我认为如果您使用`Set Identity_Insert <TableName> OFF`并且在您编写的插入语句之后使用`Set Identity_Insert <TableName> ON`.

# c++ - 在调用析构函数（可能）之后使用对象引用

> ID：13249941
> 
> 赞同：3
> 
> 时间：2012-11-06T11:22:12.547
> 
> 标签：c++, asynchronous, concurrency, constructor, destructor

假设，我有以下代码：

```
class Data
{
  private:
    int *m_arr;
    int m_size;
    bool m_deAlloc;
  public:
    Data(int *arr, int size): m_arr(arr), m_size(size), m_deAlloc(false) {}
    ~Data(){ if(m_deAlloc) delete[] m_arr; }
...
};

void foo(Data &d)
{
   // uses d ...
}  

void foo_wrapper(int *arr, int size)
{
   Data d(arr, size); // should I create it as new Data(arr, size)?

   foo(d); // asynchronous call...

} // ~Data() will be called but m_arr array will not be erased...

int main()
{
  int *arr = new int[...];
  ...
  foo_wrapper(arr,...); // internally calls foo asynchronously...
  ...
  // wait for foo execution completion....
  ...
  delete[] arr;
} 
```

我用 gcc 尝试过，它显然可以工作，但我认为它不是一个有效的程序，因为从“foo_wrapper”传递给“foo”的“数据”引用可能是无效的，因为传递的对象的析构函数可能在 foo 完成执行之前被调用（异步执行）。虽然我没有删除数据（m_arr），但是当调用析构函数时对象引用仍然会发生什么？

C++ (gcc) 编译器是否只调用析构函数。例如，当调用对象“d”的析构函数时，它是否会重新分配对象“d”的内存分配并将“d”设置为某个无效引用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T11:29:01.283

取决于数组的初始化方式。如果您在堆栈上对其进行初始化，那么这是`undefined behavior`因为如果`foo()`是异步的，那么数组确实可以在`foo()`完成之前被销毁。但是如果它是在堆上分配的，那么在 foo 中或在 foo 调用之后删除数组是安全的。

> 但是使用[std::shared_ptr](http://en.cppreference.com/w/cpp/memory/shared_ptr)更安全。管理异步调用之间的指针是完美的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T11:33:34.920

在这种情况下，您传递给的`Data`实例 ( )只会被放置在主线程的堆栈上——它肯定会在返回之前被破坏并超出范围（例如，当主线程继续执行时可能会被重用）。这是未定义的行为。即使分配没有被覆盖，你也不应该使用被破坏的对象。`d``foo()``foo()`

一种或另一种方式，您需要确保参数有效并且在返回`d`之后才被破坏。`foo()`

# c# - 使用 LINQ 获取分页数据

> ID：13249947
> 
> 赞同：0
> 
> 时间：2012-11-06T11:22:39.443
> 
> 标签：c#, linq, linq-to-sql, pagination

我正在使用 LINQ 实现分页，并且正在考虑可能遇到的性能问题。假设我的页面大小为 10，并且我在表中有 100 条记录。如果我要使用以下

```
var myList = _dataContext.Person.Skip(PageNumber * PageSize).Take(10); 
```

它会给我我想要的数据。现在，如果我要采用这种情况，并将其应用于 1,000,000 条记录。这会影响性能吗？在性能方面，使用 sql 存储过程是否更值得？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T11:26:16.367

在跳过和获取之前，这*不会*返回数据库中的所有行。如果你在`ToList`之后做了一个`.Person`，那么那将是非常低效的。你有什么应该没问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T11:26:19.677

与 Linq 提供程序为您生成的纯 SQL 文本相比，存储过程没有任何优势。

*顺便说一句*，您的查询将生成类似于以下 SQL 的内容

```
SELECT /* [t0] fields */
FROM (
    SELECT ROW_NUMBER() OVER (ORDER BY /* [t0] fields */
    FROM [Person] AS [t0]
    ) AS [t1]
WHERE [t1].[ROW_NUMBER] BETWEEN @p0 + 1 AND @p0 + @p1
ORDER BY [t1].[ROW_NUMBER] 
```

它只会在你使用`myList`变量时执行（例如 call `ToList()`, `Count()`, enumerate it）。因此，您在数据库中有多少人并不重要（好吧，这很重要，但这是数据库的一部分，而不是内存中的对象），并且您不会因使用存储过程而获得性能提升。

# javascript - 表格边框顶部仅在第一行没有css3

> ID：13249949
> 
> 赞同：6
> 
> 时间：2012-11-06T11:22:48.660
> 
> 标签：javascript, jquery, css

如何使用 css 或 jquery 仅在表格的第一行添加边框顶部？

我正在使用下面的代码来获取每个 td 的边框，但我也需要顶部第一行的边框。

顺便说一句，我不能在这个项目中使用 CSS3。

**是）我有的：**

内容

* * *

内容

* * *

内容

* * *

**我想要的是：**

* * *

内容

* * *

内容

* * *

内容

* * *

```
.MyCarTable td {
    border-bottom: 1px solid grey;
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-06T11:23:25.617

一切都可以仅使用 CSS 完成，在这种情况下，出于性能原因，这是首选方式。除非您确实必须这样做，否则不要使用 javascript，因为它不能以任何其他方式完成。

## 解决方案1：使用`first-child`伪类

添加额外的样式定义。

```
.MyCarTable td {
    border-bottom: 1px solid #ccc;
}
    .MyCarTable tr:first-child td {
        border-top: 1px solid grey;
    } 
```

别担心。浏览器长期以来一直支持这种特殊的伪类。甚至 IE 从版本 7 开始就支持它。这是一个[JSFiddle](http://jsfiddle.net/w9RES/)，它显示了它的工作原理。

## 解决方案2：使用`th`元素的表头

如果您的表格有标题行，则使用`th`元素而不是其中的元素`td`，并为标题单元格设置不同的样式。但仅当您的第一行单元格的语义内容实际上是下面行的单元格标题描述时才使用此选项。否则我不会建议。

## 连续表问题

如果您在同一个容器中有连续的表，则下一个表从上一个表的最后一行获取顶部边框。而且您不希望他们在第一行应用顶部边框，因为这会重复边框。

解决方案（如在[此 JSFiddle](http://jsfiddle.net/w9RES/1/)中所见）类似，也仅适用于第一个表：

```
.MyCarTable td {
    border-bottom: 1px solid #ccc;
}
    .MyCarTable:first-child tr:first-child td {
        border-top: 1px solid #f99;
    }​ 
```

如您所见，顶行的边框仅针对第一个表和其中的第一行设置。所有连续的表都不会设置它。这个例子当然只与上面的第一个解决方案兼容。如果您采用`th`元素的路径，那么应该使用两者的组合（`th`和伪类）。

但是正如您所说，您已经合并了中继器代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T11:24:13.913

```
$(".MyCarTable tr:first").css({
    borderTop: "1px solid grey"
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T11:36:26.750

试试这个：

```
.MyCarTable tr{border-top: 1px solid grey;}
.MyCarTable tr + tr {border-top: none !important;} 
```

或者

```
.MyCarTable tr td {border-top: 1px solid grey;}
.MyCarTable tr + tr td {border-top: none !important;} 
```

“+”是 CSS 中的相邻选择器。IE7+ 和所有其他现代浏览器都支持相邻选择器。

# sql-server-2008 - 如何获取名称中带有空格的记录集中列的值？

> ID：13249950
> 
> 赞同：1
> 
> 时间：2012-11-06T11:22:48.557
> 
> 标签：sql-server-2008, asp-classic, whitespace, recordset

我们已经更改了客户端的服务器，我正在尝试消除我在新服务器中遇到的所有错误，我遇到了这种情况：

昨天，在旧服务器上这工作正常：

```
sql = "SELECT * FROM tableName INNER JOIN tableName2 ON tableName.Code = tableName2.[Global dimension 1 code] WHERE [No_]="&request("aNumber")
set rs = conn.execute(sql)

if not rs.EOF then
subCat = rs("Global dimension 1 code")
else
subCat = 0
end if 
```

今天，在具有 IIS6 和与旧版本相同的 sql server 2008 的新服务器上，我将变量“subCat”为空，但如果我写：

```
subCat = rs("code") 
```

一切顺利。还：

```
do until rs.EOF
  for each x in rs.Fields
    Response.Write(x.name)
    Response.Write(" = ")
    Response.Write(x.value & "<br>")
  next
  Response.Write("<br>")
  rs.MoveNext
  loop 
```

给出所有的列，还有那些有空格的，比如：

```
subCat = rs("[Global dimension 1 code]")
subCat = rs("'Global dimension 1 code'")
subCat = rs("[tableName].[Global dimension 1 code]") 
```

出现 500 服务器错误。

任何人都有提示在记录集中用空格指向一列？我正在使用 ASP 经典。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T06:13:01.613

明确指定要选择的字段：

```
Select fieldname1, fieldname2 from ... 
```

代替

```
Select * from ... 
```

# ruby - 如何在几秒钟内获得领先的 0？

> ID：13249952
> 
> 赞同：2
> 
> 时间：2012-11-06T11:22:54.970
> 
> 标签：ruby, date

我正在尝试从当前时间获取小时、分钟和秒，并将其打印为“小时分钟秒”格式。例如“121103”。但是当我尝试使用下一个代码执行此操作时，没有打印前导零

```
irb(main):021:0> ct = Time.now
=> 2012-11-06 12:11:03 +0100
irb(main):022:0> "#{ct.hour}#{ct.min}#{ct.sec}"
=> 12113 
```

输出是“12113”，但我想要“121103”。

是否有方法或选项。我可以用正则表达式提取它，但只是想知道是否有更简单的方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T11:29:25.877

您应该使用[时间格式](http://www.ruby-doc.org/core-1.9.3/Time.html#method-i-strftime)：

```
ct = Time.now
ct # => Tue Nov 06 15:31:03 +0400 2012
ct.strftime('%H%M%S') # => "153103" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T11:55:11.063

您应该接受 Sergio 的回答，因为这是处理日期/时间对象的正确方法。

但是，如果您必须使用 String 类执行此操作，则可以使用[rjust](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-rjust)方法添加前导零。

```
"#{ct.hour}#{ct.min}#{ct.sec}" # 12113
"#{ct.hour}#{ct.min}#{String(ct.sec).rjust(2,"0")}" # 121103 
```

# php - wordpress xml-rpc 超时

> ID：13249958
> 
> 赞同：1
> 
> 时间：2012-11-06T11:23:25.463
> 
> 标签：php, wordpress, xml-rpc

我正在尝试使用 xml-rpc 在 wordpress 安装上执行某些任务。

这就是我正在使用的

```
include_once '/local/www/xxxxxxxx/wp-includes/class-IXR.php';
$objClient = new IXR_Client('http://xxxxxxxx/xmlrpc.php'); 
```

如果我在 objClient 上执行 print_r，我会得到以下信息

```
IXR_Client Object
(
    [server] => xxxxxxxx
    [port] => 80
    [path] => /library/xmlrpc.php
    [useragent] => The Incutio XML-RPC PHP Library
    [response] => 
    [message] => 
    [debug] => 
    [timeout] => 15
    [headers] => Array
    (
    )
    [error] => 
) 
```

我无法弄清楚超时时的 15 是什么意思以及超时的原因。有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T11:34:24.980

15 是最长时间（以*秒*为单位），如果在此之前没有与服务器建立连接，客户端将停止尝试。[您可以通过查看IXR 文档](http://phpdoc.wordpress.org/trunk/IXR/IXR_Client.html)尝试将其设置为更高的值。

就像是

```
$objClient = new IXR_Client('xxxxxxxx', 'library/xmlrpc.php', 80, 30); 
```

将时间限制增加到30秒，应该足够了。

# jquery - jqGrid 导航没有响应

> ID：13249963
> 
> 赞同：0
> 
> 时间：2012-11-06T11:23:53.417
> 
> 标签：jquery, asp.net-mvc, jqgrid

我在 MVC3 中工作并使用 jqGrid 4.4.1，我是 jqGrid 的新手，所以这是基本问题。

我已成功将数据传输到 Grid 并显示第一个站点。但是当我点击下一页时，我没有得到任何回应。

```
var myMeasurementsGrid = $("#gridMeasurementsTableView" + randomId);

myMeasurementsGrid.jqGrid({
        url: '/DataMonitor/CreateMeasurementTableView/',
        datatype: "json",
        mtype: 'POST',
        postData: { "mrpId": dataToSend.mrpId, "chartId": dataToSend.chartId, "mrpStartTime": dataToSend.mrpFilter.FilterTimeWindow.StartTimeStamp, "mrpEndTime": dataToSend.mrpFilter.FilterTimeWindow.EndTimestamp },
        jsonReader : {
            root: "data",
            page: "Page",
            total: "total",
            records: "records",  
            repeatitems: false,
            cell: "cell",
            id: "id" 
           },  
        colNames: ['Date', 'Value'],
        colModel: [
            { name: 'Timestamp', index: 'Timestamp', width: 260, 
                formatter: function (cellvalue, options, rowObject) {
                        return new Date(parseInt(cellvalue.substr(6, cellvalue.length - 8), 10));
                    }  
            },
            { name: 'Value', index: 'Value', width: 160, align: 'center' }  
        ],
        loadui: "disable",
        loadtext: "Loading",
        viewrecords: true,
        gridview: true,
        rowNum: 10,
        height: "100%",
        caption: "Measurements2",
        pager: $("#gridpager" + randomId),
        loadonce: true,
        sortname: 'Timestamp',
        sortorder: "asc",
        rowList: [10, 50, 100]
    }); 
```

后面的函数是：

```
 [HttpPost]
        public ActionResult CreateMeasurementTableView(string sidx, string sord, int page, int rows, int mrpId, string divId, string chartId, DateTime mrpStartTime, DateTime mrpEndTime)
        {
... here is my code, for getting data

return Json(new
            {
                total = listaAvailableMeasurements.Count(),
                records = listaAvailableMeasurements.Count(),
                data = listaAvailableMeasurements,
                Page = page,
                SortColumn = sidx,
                SortOrder = sord
            }); 
```

有谁知道，为什么导航没有响应？

兄弟，一月

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T12:20:32.333

您可能只从服务器 ( `CreateMeasurementTableView`) 返回了第一页。如果你使用`loadonce: true`你应该返回**所有数据**。如果使用`loadonce: true`jqGrid在第一次加载数据后更改`datatype`为。`"local"`因此不再与服务器通信，分页、排序和过滤（搜索）将由 jqGrid 内部实现。

如果网格中的行数不多，这可能是个好方法，但您必须一次返回所有数据。数据应正确排序。如果要*在服务器端*实现排序、分页和过滤，则必须删除`loadonce: true`选项。

# windows-phone-8 - Windows Phone 8 是否支持 ftp 功能？

> ID：13249969
> 
> 赞同：0
> 
> 时间：2012-11-06T11:24:33.150
> 
> 标签：windows-phone-8

因为Windows Phone 7没有FTP库，最近发现Windows Phone 8 SDK发布了，不知道能不能支持FTP库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-25T01:11:43.720

我正在使用上面的链接，当设置位图源时 FTP 将无法工作。换句话说，如果我想在 FTP 之前预览一张图片……它是行不通的。如果未设置位图，则 FTP 工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-25T05:44:54.603

您可以实现 FTP 库。请参阅这篇关于“在 Windows Phone 8 中添加 FTP 支持”的文章[msdn.microsoft.com/en-us/magazine/dn385710.aspx](http://msdn.microsoft.com/en-us/magazine/dn385710.aspx)

# javascript - Javascript正则表达式允许负双值？

> ID：13249971
> 
> 赞同：1
> 
> 时间：2012-11-06T11:24:38.150
> 
> 标签：javascript, regex

嗨，我有一个正则表达式，它可以帮助我验证用户输入。

它只允许带 2 个小数位的正数，这是我的正则表达式：

```
^[0-9]+\.[0-9][0-9]$ 
```

我希望它也适用于负数。
如何更改正则表达式以允许负值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T11:26:54.737

如下所示：

```
^(\-)?[0-9]+\.[0-9][0-9]$ 
```

查看工作[**演示**](http://refiddle.com/gc3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T11:27:23.413

认为这会起作用：

```
^(-?)[0-9]+\.[0-9][0-9]$ 
```

# sql - 删除中间表

> ID：13249974
> 
> 赞同：0
> 
> 时间：2012-11-06T11:24:42.013
> 
> 标签：sql, postgresql

给定下表：

```
Table1
| id | intermediate_id |

Itermediate
| id |

Table2
| id | intermediate_id | table1_id| 
```

**如何使用 Table1.ids 更新 Table2？**

我正在尝试以下操作：

```
update Table2
set table1_id = 
(select table1.id 
 from table1
 where table1.intermediate_id = table2.intermediate_id); 
```

这给了我“错误：用作表达式的子查询返回的不止一行”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T11:57:36.807

```
update Table2
set table1_id = table1.id
  from table1
  where table1.intermediate_id = table2.intermediate_id 
```

# mysql - 将特定的一组行从一个表复制到另一个表

> ID：13249977
> 
> 赞同：0
> 
> 时间：2012-11-06T11:24:52.653
> 
> 标签：mysql

我有两个表都有相同的列，但行数不同。

```
Generation
{Date,
location,
location_id,
turbine_id,
Generation,}

Generation_copy
{date,
location,
location_id,
turbine_id,
Generation} 
```

在 Generation 表中，我有 5000 行，其中的行是最新的，而在 Generation_copy 中，我只有 4500 行，我上周没有更新表

现在我需要将未填充的 500 行填充到表 Generation_copy 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T11:45:59.933

```
 insert into generation_copy 
  select * from generation where (date,location)
  not in 
 (select date,location from generation_copy ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T11:34:07.013

你试过这个吗？

从 Generation_copy 中删除；

- 然后只需重新复制这些值。

INSERT INTO Generation_copy (Date,location,location_id,turbine_id,Generation) SELECT Date,location,location_id,turbine_id,Generation from Generation

# c# - 在被另一个程序写入时读取文件（Windows）

> ID：13249985
> 
> 赞同：4
> 
> 时间：2012-11-06T11:25:09.897
> 
> 标签：c#, c++, windows

所以基本上，我试图在游戏运行时从游戏中读取日志文件，以便让我的程序以动态方式对其做出反应。我知道这是*可能*的，因为 Notepad(++) 等其他程序能够做到这一点。但是，在寻找答案之后，我能想到的大部分都只是与 Linux 相关的。

我不知道如何解决这个问题，使用 C++ 或 C# 帮助这样做会很棒。即使我更喜欢原生 C++ 而不是 C#。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T14:07:04.810

“本机” winapi 解决方案是`CreateFile`，尤其是它的`dwShareMode`参数。

# java - 使用 EMF 以字符串格式解析 XML

> ID：13249987
> 
> 赞同：2
> 
> 时间：2012-11-06T11:25:13.843
> 
> 标签：java, xml, eclipse-emf

我使用 EMF 来生成基于 XSD 的访问函数。我可以在生成的示例中看到如何从磁盘文件加载输入。但是，我要解析的 XML 存储在一个字符串中。有什么方法可以在不将字符串转储到文件中然后再读回的情况下继续进行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T04:49:25.550

这是一个示例方法，采用您的模型字符串和解析 xml 并返回 EObject 的 ECorePackage 实例。

```
public static EObject loadEObjectFromString(String myModelXml, EPackage ePackage) throws IOException { 
    // Create a ResourceSet
    ResourceSet resourceSet = new ResourceSetImpl();
    // register XMIRegistryResourceFactoryIml
    resourceSet.getResourceFactoryRegistry().getExtensionToFactoryMap().put
    (Resource.Factory.Registry.DEFAULT_EXTENSION, 
     new XMIResourceFactoryImpl());
     // register your epackage to the resource set so it has a reference to your ecore
     // you can get an instance to your epackage by calling YourEPackageClass.getInstace();
    resourceSet.getPackageRegistry().put(ePackage.getNsURI(), ePackage);
    Resource resource = resourceSet.createResource(URI.createURI("*.modelextension"));
    resource.load(new URIConverter.ReadableInputStream(myModelXml), null);
    // return the root model object and there you have it, all you need is to
    // cast it to the right EObject based on your model 
    return resource.getContents().get(0);
} 
```

# android - 无尽的水平滚动视图以动态绘制内容

> ID：13249990
> 
> 赞同：1
> 
> 时间：2012-11-06T11:25:22.917
> 
> 标签：android, android-layout

我想创建以下视图/一组视图，它们的行为方式如下：

1.  我有大量的点已存储到 Web 服务器中的数据库中。
2.  我的客户端应用程序下载了这些，并且应该绘制关于数据的曲线。
3.  我应该在这里使用什么组件来让这个“无限”滚动视图动态地绘制内容。
4.  不需要捕捉，所以它应该是平滑的并且可以停止到每个 X 位置。

我是否应该通过将 Horizo​​ntalScrollView 与水平 LinearLayout 一起使用并基于滚动删除/添加视图来继续此操作，然后转换滚动位置并提供滚动不会突然停止的 fling。

还是只有一个画布可以使用和绘制内容来模拟滚动？

也许是一个水平滚动的 ListView 组件？

该解决方案应该是高效的并且使用最少的内存。您推荐哪种解决方案，或者您有除上述之外的一些新想法吗？

高度赞赏所有建议。谢谢。

![展示组件的图片](../Images/35a58a54dedbf4ef97c528a7af35e222.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T12:20:26.247

有几种可能性：

创建自定义`View`类并`GestureDetector`在那里实现。您可以获取手指的移动，计算当前可见区域并仅绘制内容的可见部分。

可能这个解决方案不是最容易实现的，但它会很快并且不需要任何资源。

# android - Android - 自定义自定义适配器数组列表替换为过滤器数组列表

> ID：13249993
> 
> 赞同：0
> 
> 时间：2012-11-06T11:25:28.087
> 
> 标签：android, arraylist

我有一个自定义的 ArrayAdaptor。在添加 getFilter 功能时，我意识到过滤器项目在我的下一次搜索中变得越来越少。即使我删除了 EditText 中的文本，它也只保留了我最后的搜索记录。

*prodlistrowadapter.java*

* * *

```
public prodlistrowAdapter(Context context, int layoutResourceId,
        ArrayList<clsProducts> data) {
    super(context, layoutResourceId, data);
    this.layoutResourceId = layoutResourceId;
    this.context = context;
    this.itemsdata = data;

    //Log.e("context", String.valueOf(data.size()));
    uploadedimgpath = context.getString(R.string.uploadedimgpath);
    //this.original = new ArrayList<clsProducts> data;
    originalItems = data;
}
static class ListHolder {
    ImageView imgIcon;
    TextView txtTitle;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    View row = convertView;
    final clsProducts prod = getItem(position);

    final  ListHolder holder =  new ListHolder();
    try {

        // if (row == null) {
        LayoutInflater inflater = ((Activity) context).getLayoutInflater();
        // LayoutInflater inflater = LayoutInflater.from(context);
        row = inflater.inflate(layoutResourceId, parent, false);

        holder.imgIcon = (ImageView) row
                .findViewById(R.id.rowProdImageView);
        holder.txtTitle = (TextView) row.findViewById(R.id.rowProdTextView);
        // row.setTag(holder);
        // } else {
        // holder = (ListHolder) row.getTag();
        // }

        // clsProducts prod = items.get(position);

        // holder.imgIcon.setImageResource(R.drawable.a1326965813select);
        Drawable image = ImageOperations(context, uploadedimgpath
                + prod.image, "image.jpg");
        holder.imgIcon.setImageDrawable(image);
        holder.txtTitle.setText(prod.prod_name);

        row.setFocusable(false);
        row.setTag(prod.server_id);

        // row.setClickable(true);

        row.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                try {
                    Intent packlistIntent = new Intent(v.getContext(),
                            catelist.class);
                    packlistIntent.putExtra("prodidselected",
                            String.valueOf(v.getTag()));
                    v.getContext().startActivity(packlistIntent);
                } catch (Exception e) {
                    // Log.e("Exception - prodlistrowadapter",
                    // e.toString());
                }
            }
        });
    } catch (Exception ex) {
        // Log.e("prodlistrowadap", ex.toString());
    }
    return row;
}

@Override
public void add(clsProducts item) {
    itemsdata.add(item);
}

public Filter getFilter() {
    if (filter == null)
        filter = new PkmnNameFilter();
    return filter;
}

@Override
public int getCount() {
    synchronized (mLock) {
        return itemsdata.size();
    }
}
protected FilterResults performFiltering(CharSequence constraint) {
    FilterResults results = new FilterResults();
    String prefix = constraint.toString().toLowerCase();

    if (prefix == null || prefix.length() == 0) {
        synchronized (mLock) {
            results.values = itemsdata;
            results.count = itemsdata.size();
    }
    } else {

            synchronized (mLock) {
                //Log.e("second",prefix);
                final ArrayList<clsProducts> localItems = new ArrayList<clsProducts>();
                final ArrayList<clsProducts> filteredItems = new ArrayList<clsProducts>();
                localItems.addAll(itemsdata);
                final int count = localItems.size();
                for (int i = 0; i < count; i++) {
                    final clsProducts pkmn = localItems.get(i);
                    final String value = pkmn.getprodname().toLowerCase();

                    if (value.startsWith(prefix)) {
                        filteredItems.add(pkmn);
                    }
                }
                results.values = filteredItems;
                results.count = filteredItems.size();
            }
        }
        return results;
    }

    @SuppressWarnings("unchecked")
    @Override
    protected void publishResults(CharSequence constraint,
            FilterResults results) {

        synchronized (mLock) {
            final ArrayList<clsProducts> localItems = (ArrayList<clsProducts>) results.values;
            notifyDataSetChanged();
            clear();
            for (clsProducts gi : localItems) {
                add(gi);
            }
        }
    }
} 
```

*catelist.java*

* * *

```
List<clsProducts> prodList = cls.prodGetList(strSql);
ArrayList<clsProducts> proddata = (ArrayList<clsProducts>) prodList;
final prodlistrowAdapter adapter = new prodlistrowAdapter(this,                         R.layout.prodlistrow, proddata);
listView1 = (ListView) findViewById(R.id.lvCateList);       
listView1.setTextFilterEnabled(true);
listView1.setAdapter(adapter);
EditText etinputSearch = (EditText)findViewById(R.id.etinputSearch);
etinputSearch.addTextChangedListener(new TextWatcher() {

    public void onTextChanged(CharSequence arg0, int arg1, int arg2, int arg3) {
          adapter.getFilter().filter(arg0);
          //adapter.notifyDataSetChanged();
   }

public void beforeTextChanged(CharSequence arg0, int arg1, int arg2,
                        int arg3) {
    }
    public void afterTextChanged(Editable text) {
       }
                }); 
```

* * *

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T11:30:47.050

您需要创建一个 setfilter 函数而不是调用 getFilter.filter(arg0)。

```
public void SetFilter(CharSequence arg0) 
{

// clean old filter and set new filter params

} 
```

# mercurial - 汞拉/克隆

> ID：13249999
> 
> 赞同：0
> 
> 时间：2012-11-06T11:25:46.667
> 
> 标签：mercurial

我有一种情况，我正在为一个处理大量存储库、配置、构建和运行内容的系统编写代码。有一个任务也可以调用`sync-repository`，用户应该能够调用它来确保最新版本的存储库到达客户端。

回购可能已经存在，在这种情况下，我想做一个`hg update`. 回购也可能不存在，在这种情况下，我想做一个`hg clone`. 用户不必关心是哪种情况。哦，存储库很大，所以`clone`每次只擦除目录和 ing 不是一种选择。

是否`hg`提供了一个单独的命令`clone`，`update`这取决于哪个是合适的？还是我必须用 bash 来做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T14:35:22.233

> 用户不必关心是哪种情况。

是的，但**你必须关心并知道**，你有没有克隆。你想如何管理它？

如果你有一些配置文件，fe

Reponame = /full/path/to/clone

您可以检测是否存在克隆并使用 if-then-else 逻辑。如果您没有信息，您将无法做出决定

**添加在**

不，Mercurial 核心中不是这样的“组合”命令（我希望它们永远不会出现在其中），因为 Mercurial 不会采用 git 方式“用于不同不相关任务的一个命令”并遵循 Unix 方式（“注意你的自己的生意！”）更严格

但是，从另一方面来说，它让你可以自由地做你想做的事——你可以定义自己的 Mercurial 命令（如果你问过这个），这可能是不相关的原始命令的大杂烩（请参阅[别名扩展](http://mercurial.selenic.com/wiki/AliasExtension)（维基页面稍微过时）和[[ .hgrc 中的alias] 部分](http://www.selenic.com/mercurial/hgrc.5.html#alias)- 最新），甚至在 Mercurial 别名中使用 shell 命令