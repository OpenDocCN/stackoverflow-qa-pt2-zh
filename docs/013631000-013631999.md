# StackOverflow 问答 13631000-13631999

# javascript - 表单输入和清除状态的合并属性

> ID：13631004
> 
> 赞同：1
> 
> 时间：2012-11-29T17:07:58.100
> 
> 标签：javascript, jquery, forms, internet-explorer

我正在使用一种解决方法来使用 jQuery 克隆表单输入元素，并使其在 Internet Explorer 中工作。以下代码成功克隆了元素，但它也克隆了输入状态和值。清除状态和值的最佳方法是什么？问题是收音机、复选框和文本字段混合在一起，所以我不能只清除输入值，必须考虑选中和选中状态。

感谢您的任何指点！

```
function setElementName(elems, name) {
    if ($.browser.msie === true){
        $(elems).each(function() {
            this.mergeAttributes(document.createElement("<input name='" + name + "'/>"), false);
        });
    } else {
        $(elems).attr('name', name);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T14:24:17.873

终于找到了一个解决方法，如下：

```
switch(this.type) {
            case 'password':
            case 'select-multiple':
            case 'select-one':
            case 'text':
            case 'textarea':
                $(this).val('');
                break;
            case 'checkbox':
            case 'radio':
                this.checked = false;
        } 
```

# gnuplot - gnuplot中的@是如何产生的？

> ID：13631006
> 
> 赞同：3
> 
> 时间：2012-11-29T17:08:01.337
> 
> 标签：gnuplot, title, symbols

我正在尝试使用 GnuPlot，使用 Helvetica 字体将“P@10”作为绘图的标题。

我所做的是这样的：

> 设置编码 iso_8859_1
> 
> 设置标题“P \100 10”

\100 来自[unicode](http://www.fileformat.info/info/unicode/char/0040/index.htm)中 at 符号的八进制表示。然而，最后的情节用一个简单的空格替换了@。其他符号按预期工作。

我还尝试了[此处](http://judsonsnotes.com/notes/index.php?option=com_content&view=article&id=629%3asymbols-in-gnuplot&catid=48%3aengineering&Itemid=69)提供的 matlab 脚本，以在至少 4000 个不同的代码中查找 @ 符号，但我找不到它。

这可能吗，即使使用另一种字体？

编辑：我在三个不同的系统上尝试过这个，Ubuntu和Windows，但无济于事..

EDIT2：最小的工作示例：

> 设置术语后记 eps 增强颜色
> 
> 设置编码 iso_8859_1
> 
> 设置标题“测试 \@ 测试” - 或 - 设置标题“测试 \100 测试”
> 
> 列出“example.eps”
> 
> 绘制 sin(x)

我的输出标题中没有任何 @ 符号。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T19:45:22.107

[这篇文章](https://stackoverflow.com/questions/13144394/how-to-show-in-title-with-gnuplot-and-the-output-format-is-png/)可能会有所帮助。如果您使用的是“增强型”终端，则必须转义（“\@”）@ 符号。

# jquery - 使用 jquery 滑动一张图片和一张新图片

> ID：13631008
> 
> 赞同：0
> 
> 时间：2012-11-29T17:08:12.603
> 
> 标签：jquery, arrays, jquery-animate, gallery, slide

我正在使用我自己的 animate() 方法创建一个自定义滑动画廊。我有一个脚本，它为画廊预加载图像并在页面完成加载后显示图像 [0]。在 2 秒的时间间隔后，到目前为止，我可以使用 css() 方法将图像元素向左滑动。到目前为止，这有效。

```
$(document).ready(function () {

            //pre-load images
            var i = 0;
            var images = new Array();
            images[0] = "images/environments/img0.jpg"
            images[1] = "images/environments/img1.jpg"
            images[2] = "images/environments/img2.jpg"
            images[3] = "images/environments/img3.jpg"

            $("img#cover").attr("src", images[0]);
                $(this).attr("src", images[1]).css("marginLeft","630px");

            $(function () {
                setInterval(function () {

                    $("img#cover").animate({
                        marginLeft: '-980px',
                        opacity: '1'
                    }, 2000);
                }, 2000);
            });

}); //end of document function 
```

我现在想要一种方法来滑过画廊（数组）并在同一个 img 元素或 div 标签中显示下一个图像，无论哪个效果最好。因此，在 2 秒间隔后，“新”的滑入，“旧”的同时滑出。

我不确定您是否可以在 img 标签中存储两个图像？这是可能的还是将 div 标签滑到左边更好？

HTML：

```
<div id="mainimage"><img id="cover" src="" /></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T17:11:15.283

我认为最好将整个 img 标签添加到您的 div 中。像这样：

```
<div id="mainimage">
   <img id="cover1" src="scr1.jpg" style="display:none;"/>
   <img id="cover2" src="scr2.jpg" style="display:none;"/>
   <img id="cover3" src="scr3.jpg" style="display:none;"/>
</div> 
```

并根据需要将它们淡入淡出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T17:16:34.000

您可以滑出旧图像，然后在动画完成后更改img src并将其从另一侧滑入（1-更改src，2-设置显示：隐藏，3-将图像定位在另一侧， 4 组显示：块，5 幻灯片动画）。

滑出和滑入不会同时进行，但您可以获得很好的效果。

如果您需要同时滑入/滑出，我也会选择两个 img 标签。

希望这个想法有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T17:18:54.847

您最好拥有四个图像并使用overflow:hidden 属性将它们蒙版到一个div。

```
// Your markup
<div id="imgMask" style="overflow:hidden; height:200px; width:200px;">
    <div id="inner" style="position:relative; left:0;">
        <img src="images/environments/img0.jpg" />
        <img src="images/environments/img1.jpg" />
        <img src="images/environments/img2.jpg" />
        <img src="images/environments/img3.jpg" />
    </div>
</div>

// Your js
function slideLeft(){
    $('#inner').animate({
        left: -200px;
    },2000, function(){
        $('#inner img').eq(0).remove().appendTo('#inner');
        $('#inner').css({
            'left',0
        });
    });
} 
```

这样你只滑动一个父元素而不是多个图像。希望它有所帮助 - 上面的代码未经测试，但假设您的图像高度和宽度为 200 像素，当然样式表中的样式比像这样内联更好。

# mysql - MySQL LIKE IN() 并使用 AND

> ID：13631013
> 
> 赞同：0
> 
> 时间：2012-11-29T17:08:33.530
> 
> 标签：mysql, regex, full-text-search, sql-like

我正在尝试压缩以下查询，该查询可能具有基于 Web 表单字段的无限选项。用户可以输入由逗号分隔的尽可能多的标题关键字。所以我的查询将像下面这样构造，具有无限的参数：

```
"SELECT title FROM titles WHERE 
 title LIKE '%blue%' 
 AND
 title like '%red%'
 AND
 title like '%green%'
 AND
 title like '%yellow%'
 ..."; 
```

查看此链接，[MySQL LIKE IN()?](https://stackoverflow.com/questions/1127088/mysql-like-in) ，它展示了一个使用正则表达式的好例子，但它使用的是“OR”。

```
SELECT * from fiberbox where field REGEXP '1740|1938|1940'; 
```

使用“AND”的等价物是什么？例如，在准 SQL 中：

```
SELECT * from titles WHERE title REGEXP 'blue && red && green && yellow'; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T19:27:11.207

AND 对正则表达式的处理有点困难，而且对于 MySQL 有限的正则表达式语法似乎是不可能的。如果您使用的是 myISAM 引擎或 MySQL 5.6，您可以使用[MATCH()](http://dev.mysql.com/doc/refman/5.1/en/fulltext-boolean.html)函数来获得大部分您想要的内容：

```
SELECT title FROM titles WHERE MATCH (title)
AGAINST ('+red* +green* +yellow*' IN BOOLEAN MODE); 
```

但是，我建议坚持使用简单的 AND 链接。它不那么脆弱，更强大，更容易编码。

# php - facebook PHP SDK SSL 错误 - 为什么？

> ID：13631019
> 
> 赞同：0
> 
> 时间：2012-11-29T17:09:08.397
> 
> 标签：php, facebook

我们正在尝试使用 facebook connect 登录。它在本地主机上工作，但在此行的服务器上失败：

```
$user_profile = $facebook->api('/me'); 
```

有脸书例外：

```
object(FacebookApiException)#2 (8) {
["result":protected]=>
array(2) {
["error_code"]=>
int(60)
["error"]=>
array(2) {
  ["message"]=>
  string(146) "SSL certificate problem, verify that the CA cert is OK. Details:
 error:14090086:SSL routines:SSL3_GET_SERVER_CERTIFICATE:certificate verify failed"
   ["type"]=>
   string(13) "CurlException"
  }
 }
["message":protected]=>
string(146) "SSL certificate problem, verify that the CA cert is OK. Details:
 error:14090086:SSL routines:SSL3_GET_SERVER_CERTIFICATE:certificate verify failed"
["string":"Exception":private]=>
string(0) ""
["code":protected]=>
int(60)
["file":protected]=>
string(43) "C:\xampp\htdocs\taska\api\base_facebook.php"
["line":protected]=>
int(967)
["trace":"Exception":private]=>
array(5) {
[0]=>
array(6) {
  ["file"]=>
  string(43) "C:\xampp\htdocs\taska\api\base_facebook.php"
  ["line"]=>
  int(899)
  ["function"]=>
  string(11) "makeRequest"
  ["class"]=>
  string(12) "BaseFacebook"
  ["type"]=>
  string(2) "->"
  ["args"]=>
  array(2) {
    [0]=>
    string(29) "https://graph.facebook.com/me"
    [1]=>
    array(2) {
      ["method"]=>
      string(3) "GET"
      ["access_token"]=>
      string(48) "2750040a2d1e2"
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T16:56:05.020

您的 fb_ca_chain_bundle.crt 可能需要更新。[您可以在Facebook PHP SDK github 页面](https://github.com/facebook/facebook-php-sdk/blob/master/src/fb_ca_chain_bundle.crt)上找到最新版本。

[Facebook 上的这个错误报告](https://developers.facebook.com/bugs/412291762177195/)指出：

> sdk 提供的 fb_ca_chain_bundle.crt 由 DigiCert High Assurance CA-3 发布，但 graph.facebook.com/ 使用来自 www.verisign.com/CPS Incorp.by Ref 的证书。LIABILITY LTD.(c)97 VeriSign

不确定这个答案在事后 2 个月有多大帮助，但更新这个文件对我有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T17:12:41.793

确保您已`ssl_module`在 Apache中启用

你可以这样做

```
LoadModule ssl_module modules/mod_ssl.so 
```

# c# - 实体框架先插入多对多数据库

> ID：13631027
> 
> 赞同：1
> 
> 时间：2012-11-29T17:09:37.497
> 
> 标签：c#, entity-framework, entity-framework-4.1, many-to-many, entity-relationship

```
 pessoas objPessoa;
DataTable dtTelefones;
DataTable dtEnderecos;
private void salvar()
{
    using (EarthWorkEntities ctx = new EarthWorkEntities())
    {
        frame2objeto();
        ctx.AddTopessoas(objPessoa);
        ctx.SaveChanges();
    }
}

private void frame2objeto()
        {
            using (EarthWorkEntities ctx = new EarthWorkEntities())
            {
                objPessoa = new pessoas();
                //Pessoa
                objPessoa.pes_cpfcnpj = textCpf.Text;
                objPessoa.pes_nome = textNome.Text;
                objPessoa.pes_sexo = cbSexo.SelectedIndex == 0 ? "M" : "F";

                //Cliente
                clientes cliente = new clientes();
                cliente.cli_dt_ultima = DateTime.Now;
                objPessoa.clientes.Add(cliente);
                //Telefones
                foreach (DataRow row in dtTelefones.Rows)
                {
                    telefones objTelefones;
                    objTelefones = new telefones();
                    objTelefones.EntityKey = null;
                    objTelefones.tel_contato = row["Contato"].ToString();
                    objTelefones.tel_ddd = row["DDD"].ToString();
                    objTelefones.tel_numero = row["Numero"].ToString();
                    string tipo = row["Tipo"].ToString();
                    tipos_telefones tipo_telefone = (from t in ctx.tipos_telefones
                                         where t.tptel_descr == tipo
                                         select t).FirstOrDefault<tipos_telefones>();
                    objTelefones.tipos_telefones = tipo_telefone;
                    objPessoa.telefones.Add(objTelefones);
                }
                //Endereço
                foreach (DataRow row in dtEnderecos.Rows)
                {
                    enderecos objEnderecos;
                    objEnderecos = new enderecos();
                    objEnderecos.EntityKey = null;
                    objEnderecos.end_bairro = row["Bairro"].ToString();
                    objEnderecos.end_cep = row["CEP"].ToString();
                    objEnderecos.end_cidade = row["Cidade"].ToString();
                    objEnderecos.end_complemento = row["Complemento"].ToString();
                    objEnderecos.end_logradouro = row["Logradouro"].ToString();
                    objEnderecos.end_numero = row["Numero"].ToString();
                    string tipo = row["Tipo"].ToString();
                    tipos_enderecos tipo_endereco = (from t in ctx.tipos_enderecos
                                         where t.tpend_descr == tipo
                                         select t).FirstOrDefault<tipos_enderecos>();
                    objEnderecos.tipos_enderecos = tipo_endereco;
                    objPessoa.enderecos.Add(objEnderecos);
                }
            }
        } 
```

运行命令“AddTopessoas()”时返回如下错误：“EntityKey 属性只能在属性的当前值为空时设置。”

表： pessoas >> pessoas_telefones << 电话 pessoas >> pessoas_enderecos << enderecos

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T18:26:58.953

我不太明白你的代码。但是我确实注意到你没有调用`SaveChanges()`inside `frame2objeto()`，所以一旦你退出 using 块，它们就会被丢弃。

即使您确实保存了更改，当您从它返回到您的`salvar()`时，您也不会看到任何更改，因为它完全是一个单独的上下文。

# unit-testing - 我应该在 Grails 应用程序中将 Groovy 类的测试用例放在哪里？

> ID：13631031
> 
> 赞同：5
> 
> 时间：2012-11-29T17:09:51.693
> 
> 标签：unit-testing, grails, groovy

我的应用程序中有几个 Groovy 类，位于`src/groovy`. 相关的测试类应该去哪里，应该使用mixins()`GroovyTestCase`还是 mixins( `TestFor`)？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T18:24:43.070

您可以为班级选择单元测试或集成测试。从[文档](http://grails.org/doc/latest/guide/testing.html)中您可以看到它们之间的区别：

**单元测试**

> 单元测试是“单元”级别的测试。换句话说，您正在测试单个方法或代码块，而不考虑周围的基础设施。单元测试通常在不存在涉及 I/O 等数据库、套接字连接或文件的物理资源的情况下运行。这是为了确保它们尽可能快地运行，因为快速反馈很重要。

**集成测试**

> 集成测试与单元测试的不同之处在于您可以完全访问测试中的 Grails 环境。

所以如果你需要访问数据库或者需要完整的环境，做一个集成测试。如果没有，请创建一个单元测试（这将使用内存数据库）。

`@TestFor`旨在用于单元测试，因为这将模拟基本（请参阅 参考资料）`GrailsUnitTestMixin`。如果您选择集成测试，请不要使用注释。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T18:15:21.003

把它们放进去`test/unit`。如果他们需要 spring 上下文或休眠会话，请将它们放入`test/integration`. 您可以使用`GroovyTestCase`或 mixins，但它们是完全可选的。测试只需要遵循以下约定：

*   类名必须以`Tests`or结尾`Test`
*   测试方法必须以 JUnit 的注解开头`test`或被注解`@Test`

# scala - 在 Scala 中注释掉部分代码

> ID：13631038
> 
> 赞同：9
> 
> 时间：2012-11-29T17:10:06.967
> 
> 标签：scala, comments

我正在寻找一种类似于 C(++)`#if 0`的方式来注释掉整个 Scala 源代码，以便在一段时间内保留实验性或过期代码。

我尝试了几种替代方法，想听听您使用的是什么，以及您是否想出了更好的方法？

```
// Simply block-marking N lines by '//' is one way... 
//  <tags> """ anything 
```

我的编辑器使这很容易，但这并不是真正的事情。它很容易与实际的单行注释混合。

然后我认为有原生 XML 支持，所以：

```
<!-- 
  ... did not work
--> 
```

包装在 XML 中是有效的，除非你`<tags>`在块中：

```
class none { val a= <ignore>
  ...
  cannot have //<tags> <here> (not even in end-of-line comments!)
</ignore> } 
```

对于多行字符串来说，这似乎是最好的，但是有很多样板文件（在 Scala 中并不流行）来取悦编译器（如果你在一个类或一个对象中这样做，那就更少了）：

```
object none { val ignore= """ This seems like
  ...
  <truly> <anything goes> but three "'s of course
""" } 
```

这样做的“正确”方法可能是：

```
/***
  /*
  ... works but not properly syntax highlighed in SubEthaEdit (or StackOverflow)
  */
***/ 
```

`/*`..但这与and only匹配，而`*/`不是 ie `/***`to `***/`。这意味着需要平衡块内的注释。并且 - SubEthaEdit 当前的 Scala 语法高亮模式在这方面失败了。

作为比较，[Lua](http://www.lua.org/manual/5.2/manual.html#3.1)有`--[==[`匹配`]==]`等等。我觉得我被宠坏了？

那么 - 我正在监督一些有用的技巧吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T17:12:56.940

为什么不直接使用您的源代码控制机制？将代码分开，将其作为单独的文件签入并忘记它。我不希望我的日常代码库被这种东西弄得一团糟。

但是请注意，如果您不经常使用此代码（例如在自动化测试中等），它将遭受[代码腐烂](http://en.wikipedia.org/wiki/Software_rot)。一旦您注释掉或以其他方式搁置这些东西，依赖关系就会继续，您会发现不久之后它就不会链接到现有的代码库。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-30T11:02:46.413

我修改了 Scala 模式`SyntaxDefinition.xml`以支持`/***...***/`样式注释。

这与 Scala 解析器对嵌套`/*...*/`注释的支持不同，但我没有为我的编辑器找到表达这一点的方法。

如果有人想做同样的事情，这里是：

```
<!-- AK 30-Nov-2012
-
- The Scala parser handles nested '/*...*/' style comments, but the SEE
- syntax highlighting seems not. 
-
- We introduce '/***...***/' style comments (starting with three asterisks
- since JavaDoc uses '/**..*/' style) and deeper levels, to be used for
- blocking out code blocks, even if they contain '/*..*/' comments within.
-
- Note: Original comment handling misses a 'type="comment"' field. Is that vital?
-
- Test: If this works right, the following will be highlighted as a single comment:
-     <<
-       /***
-       */
-       ***/    <- green, not black (note: Scala parses these differently; this is just to test the mode)
-     <<
-->
<state id="Multilevel Comment AK" color="#236E25" type="comment" font-style="italic">
  <begin><regex>/\*\*(?'commentCatch'\*+)</regex></begin>
  <end><regex>(?#see-insert-start-group:commentCatch)\*\*/</regex></end>
  <import mode="Base" state="EmailAndURLContainerState" keywords-only="yes"/>
</state> 
```

您可能还想添加`type="comment"`到现有的少数评论突出显示规则。我不确定这是否至关重要（除了 Scala 的其他模式）。

关于[SubEthaEdit 模式](http://www.codingmonkeys.de/subethaedit/mode.html)的信息。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-09-10T11:42:55.913

您还漏掉了一个选项。任何类型的注释都有禁用语法突出显示的缺点，并且不包含在 IDE 重构（Emacs+Ensime、IDEA、Eclipse 等）或其他代码智能工具中，因此我更喜欢以下方法：

```
def ignore(block: => Any) = ()
def ignoreIf(cond: Boolean)(block: => Any): Unit = if (!cond) block

ignore {
  // experimental and/or disabled code
  syntaxHighlightingEnabled(true, 3, "foobar")
}

ignoreIf(SomeFeatureEnabled) {
  // experimental and conditionally enabled code
  syntaxHighlightingEnabled(true, 3, "foobar")
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-26T15:36:19.733

我使用“删除度”。(1) 注释掉。(2) 如果它是我不再需要但可能在以后/其他地方发现有用的代码，我有一个**“.boneyard”文件夹**，我将代码片段放在其中（就在生产源代码树之外）——非常方便。(3) 只需删除它，如果我需要它，请依赖源代码管理。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-11-06T14:48:51.400

受我使用的 Lua 编程语言的启发：

```
def */ = () // noop function, def or val

/*

println("Hello world!")
// more code

*/ 
```

要启用整个代码块，只需在“/*”中添加一个“/”，即

```
def */ = () // noop function

//*

println("Hello world!")
// more code

*/ 
```

现在它打印“Hello world！”。

# jquery - Jquery创建具有动态键和多个值的关联数组

> ID：13631039
> 
> 赞同：0
> 
> 时间：2012-11-29T17:10:07.140
> 
> 标签：jquery, arrays, object, multidimensional-array, associative-array

尝试创建以下内容：

> 数组（'12345' => 'A01', 'A02', 'A03'
> '22222' => 'B01',
> '33333' => 'C01', 'C02')

所以基本上每个键都是从另一个数组动态生成的。假设在某个事件被触发后变量编号为“12345”。

我们有一个名为 location 的数组，例如 ('A01', 'A02', 'A03')

因此，然后在主阵列上，它将两个数字与位置映射。这是每次发生事件时我都需要保存的数组。

在下一次事件执行中，我们将在数字变量上获得一个新值，例如“22222”，然后一个新的数组位置将用 ('B01') 覆盖另一个位置，依此类推。

请记住，键将始终是动态的，并且值可以从 1 到 50，例如我们不知道。我知道这更像是 Jquery 上的 Object Literals。提前谢谢。

这是一段代码，需要能够获取key和value

```
 $.each(dragarray, function(index, value) {

                    dragid_loc['value'] = [];
                    // do loop to add each element of other array
                    $.each(draglocation, function(index2, value2) {
                        dragid_loc.value.push(value2);
                    });

            });

            console.log(dragid_loc); 
```

这条线似乎导致了我不会将另一个数组拖动位置的值推入每个的问题。需要获取密钥和值。

```
dragid_loc.value.push(value2); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T18:54:10.087

根据评论，我认为您需要的是：

*   `obj["newProp"] = []; // A new property is added to the object with key newProp and an empty array as value`
*   `obj.newProp.push(newElement); // A new element is added to the array in newProp of object`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T12:19:12.063

变量对象={}

var val1='12345';

对象[val1]={0:'A01',1:'A02',2:'A03'};

var val2='22222';

对象[val2]={0:'B01'};

警报（JSON.stringify（Obj））；

# java - 提取不带小数的整数

> ID：13631041
> 
> 赞同：0
> 
> 时间：2012-11-29T17:10:12.987
> 
> 标签：java, regex

我需要正则表达式的帮助来从缺少小数的字符串中提取数字。

```
Input
2 4.0 6.0 7 8 4.60

Output
2 7 8 
```

**编辑：**关于 Regex 和 Java 的另一个后续问题。假设我想在我发现的内容中添加一些东西（我真正想要的是取 2 4.0 7.5 并将其转换为 2.0 4.0 7.5，这意味着将缺少的 .0 添加到没有小数的那些），我将如何做到这一点并且仍然保持我的字符串不变的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T17:14:30.077

与罗伯特哈维的评论一起，我会用空格分割它，然后迭代结果以寻找“。”。它比使用正则表达式更容易阅读和维护。

```
string[] splitStr = "2 4.0 6.0 7 8 4.60".split(' '); 
foreach(string s in splitStr){
   if(false == s.Contains("."))
       //do something
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T17:11:13.870

**对于第二个问题： -**

这是您的第二个要求的解决方案：-

```
String str = "2 4.0 6.0 7.5 8 4.60";
str = str.replaceAll("(?<=^|[ ])(\\d+)(?=$|[ ])", "$1.0");

System.out.println(str);  // Prints 2.0 4.0 6.0 7.5 8.0 4.60 
```

* * *

**对于第一个问题： -**

您可以使用此正则表达式：-

```
(?<=^|[ ])(\\d+)(?=$|[ ]) 
```

这将匹配`digits`后面和前面的任何序列`space`。`^`此外，它使用和匹配字符串末尾的数字`$`。

这是实现： -

```
 String str = "2 4.0 6.0 7 8 4.60";
    Pattern pattern = Pattern.compile("(?<=^|[ ])(\\d+)(?=[$ ])");

    Matcher matcher = pattern.matcher(str);

    while (matcher.find()) {
        System.out.print(matcher.group(1) + " ");
    } 
```

**输出 ： -**

```
2 7 8 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T17:21:46.733

我的版本： `(?<![\.\d])\d+(?!\.\d+)`

# ios - 在 iOS5 中开发的游戏在 iPhone 5 中执行时看起来并不居中。但在 iPhone 4s 中运行良好

> ID：13631044
> 
> 赞同：2
> 
> 时间：2012-11-29T17:10:19.673
> 
> 标签：ios, xcode, cocos2d-iphone

我开发了一款在 iOS5 模拟器和 iPhone4s 上运行良好的游戏。但是当同样的游戏在 iPhone5 中执行时，问题就存在了。它看起来并不居中，它看起来像[http://screencast.com/t/nOYlLtjguuUJ](http://screencast.com/t/nOYlLtjguuUJ)。听说iPhone5的尺寸已经增加到568 * 320。我的游戏在横向模式下运行。谁能帮我解决这个问题。提前致谢。

# xml - XML Driven Skitter 中的 HTML 链接

> ID：13631049
> 
> 赞同：0
> 
> 时间：2012-11-29T17:10:29.187
> 
> 标签：xml

我正在使用带有 XML 加载选项的 Skitter 滑块，但我需要使图像/幻灯片可点击链接。有没有办法在 XML 中做到这一点？

这是源代码。 [http://thiagosf.net/projects/jquery/skitter/?type_loading=xml](http://thiagosf.net/projects/jquery/skitter/?type_loading=xml)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T17:46:32.880

经过一些资源搜索后，您可以使用一行代码在 Skitter xml 文件中添加一个链接。

```
<?xml version="1.0" encoding="utf-8"?>
<skitter>
    <slide>
        <link>http://foo.com</link>
        <image type="directionTop">images/bar.jpg</image>
    </slide>
</skitter> 
```

这里的所有都是它的。

# svg - 如何防止 SVG 标记继承其形状的 stroke-dasharray？

> ID：13631050
> 
> 赞同：0
> 
> 时间：2012-11-29T17:10:29.960
> 
> 标签：svg

我试图在我的 SVG 线的起点/终点有实线，但标记使用它们保持形状的值。有什么办法可以防止这种情况发生吗？

这是我当前的 SVG：

```
<svg xmlns="http://www.w3.org/2000/svg">
    <defs>
        <marker id="start" refX="5" refY="5" markerUnits="userSpaceOnUse" markerWidth="10" markerHeight="10" orient="auto">
            <circle cx="5" cy="5" r="5" fill="none" stroke="black" />
        </marker>
        <marker id="end" refX="10" refY="5" markerUnits="userSpaceOnUse" markerWidth="10" markerHeight="10" orient="auto">
            <path id="arrow" d="M 0 0 L 10 5 L 0 10 L 0 0" fill="none" stroke="black" />
        </marker>
    </defs>
    <g>
        <path d="M10 50 L70 50" stroke="black" fill="none" stroke-width="0.75pt" stroke-dasharray="10,4" marker-start="url(#start)" marker-end="url(#end)" />       
    </g>
</svg> 
```

我希望圆圈和箭头是实心的。我尝试在圆圈和路径上添加 stroke-dasharray="none" ，但没有成功。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T18:51:03.197

嗯，这看起来像一个 webkit 错误。`stroke-dasharray="none"`根据规范应该是正确的属性，但`stroke-dasharray="0"`适用于所有浏览器，它应该达到相同的结果（根据规范）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T20:41:39.450

Safari 6 似乎忽略了该`stroke-dasharray="0"`属性。我能找到的唯一解决方法是将 stroke-dasharray 设置为大于`markerWidth`/的值`markerHeight`。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-03-06T06:45:44.447

也不`stroke-dasharray="0"`适合`..="none"`我。
[esad的回答](https://stackoverflow.com/a/13663557/7664275)启发了我。
但我认为更好的做法是`stroke-dasharray="100%"`

# spring - 如何在不受 Spring 管理的 pojo 中从 Spring Context 获取属性？

> ID：13631052
> 
> 赞同：6
> 
> 时间：2012-11-29T17:10:32.887
> 
> 标签：spring, properties, pojo

我有一个在 spring 上下文 xml 文件中配置的属性文件。我从文件中加载值很好。我正在尝试从该属性文件中加载一个非弹簧管理的常规 pojo 中的属性。由于 Spring 已经加载了该属性，我想知道是否有办法获取该值，而不必手动加载属性文件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-29T19:21:06.437

如果您的 pojo 不是由 Spring 管理的，您可以以静态方式访问 Spring 上下文。

**将 bean 添加到您的应用程序 xml：**

```
<bean id="StaticSpringApplicationContext" class="com.package.StaticSpringApplicationContext"/> 
```

**创建一个类：**

```
public class StaticSpringApplicationContext implements ApplicationContextAware  {
    private static ApplicationContext CONTEXT;

      public void setApplicationContext(ApplicationContext context) throws BeansException {
        CONTEXT = context;
      }

      public static Object getBean(String beanName) {
        return CONTEXT.getBean(beanName);
      }

} 
```

**然后，您可以使用以下方法从 POJO 访问任何 Spring bean：**

```
StaticSpringApplicationContext.getBean("yourBean") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-08-07T10:34:53.063

对于使用注释和实现泛型的更现代的方法，您可以使用此版本，基于 Wickramarachi 响应：

```
import org.springframework.beans.BeansException;
import org.springframework.context.ApplicationContext;
import org.springframework.context.ApplicationContextAware;
import org.springframework.stereotype.Component;

@Component
public class StaticSpringApplicationContext implements ApplicationContextAware {
    private static ApplicationContext applicationContext;

    @Override
    public void setApplicationContext(ApplicationContext applicationContext) throws BeansException {
        StaticSpringApplicationContext.applicationContext = applicationContext;
    }

    public static <T> T getBean(Class<T> requiredType) {
        return applicationContext.getBean(requiredType);
    }

    public static <T> T getBean(String beanName, Class<T> requiredType) {
        return applicationContext.getBean(beanName, requiredType);
    }

} 
```

用法如下：

```
SpringJPAPersistenceChannel bean = StaticSpringApplicationContext.getBean(MyBean.class); 
```

# c - 指向数组的指针和双指针

> ID：13631053
> 
> 赞同：1
> 
> 时间：2012-11-29T17:10:36.343
> 
> 标签：c, pointers, multidimensional-array

> **可能重复：**
> [二维数组是双指针吗？](https://stackoverflow.com/questions/7586702/is-2d-array-a-double-pointer)

```
void fun(int **ptr,int n)
{
int i=0;j=0;
for(i=0;i<n;i++)
for(j=0;j<n;j++)
 printf("%d  ",a[i][j]);

}

Int main()
{
int arr[20][20];
int **ptr=arr;  //Statement 1
fun(arr,20);
} 
```

为什么语句 1 给出警告而函数调用没有？我看到这是函数调用中的一个例外情况。这背后有什么原因吗？指向数组的指针“arr”如何变成双指针“ptr”，而我们仍然可以像使用指向数组的指针一样使用它？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T17:54:58.273

因为`int **`和`int (*)[20]`是两种根本不同的类型。对于后者，它指向的数组的大小在编译时是固定的。

当您取消引用 an 时，`int **`您希望找到一个`int*`指向`int`. 当您取消引用 a 时，`int (*)[20]`您希望找到一个 20`int`秒的块，而不是更多的指针。

当你分配`int arr[20][20]`then`arr`是一个编译时符号，相当于`int (*)[20]`, not `int **`。如果您想要后者，则必须分配 a`int * arr[20]`然后填充指向另一个包含`int [20]`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T17:16:21.303

> 为什么语句 1 给出警告而函数调用没有？

在修复代码以便编译之后，它确实如此：

```
danger.c: In function ‘main’:
danger.c:15:11: warning: initialization from incompatible pointer type [enabled by default]
danger.c:16:1: warning: passing argument 1 of ‘fun’ from incompatible pointer type [enabled by default]
danger.c:3:6: note: expected ‘int **’ but argument is of type ‘int (*)[20]’ 
```

并且警告的原因得到了很好的解释（应该是一个错误，IMO，但 gcc 是非常宽容的）。您正在传递不兼容的指针类型。即使默认警告级别也会出现该警告。

# xamarin.ios - 如何在使用 splitview 和 touch.dialog 时使用导航栏

> ID：13631057
> 
> 赞同：2
> 
> 时间：2012-11-29T17:10:43.730
> 
> 标签：xamarin.ios, uinavigationbar, uisplitviewcontroller, monotouch.dialog, mvvmcross

SplitView 的问题是导航栏……它不见了。我使用平板电脑演示器，就像在 MVVMCross 示例中一样。尝试添加导航栏项目时，例如 CustomerManagement 示例中所示，它不会显示。

我认为这与 UINavigation 控制器丢失有关，但我不知道如何使用平板电脑演示器来实现它。

我的视图是使用 Dialog 构建的，我的演示者使用的是 MvxBaseTouchViewPresenter。

谁能告诉我在使用拆分视图和对话框时如何使用导航栏？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T09:04:20.400

从您的描述中，我对您的 UI 不是 100% 清楚 - 如果我的想法有误，那么一些图片可能会有所帮助。

但是...基本上我相信您可以在纯 MonoTouch 中实现的任何 UI，您也应该能够在 MvvmCross 中实现。

看起来你已经解决了很多这个问题，但只是回顾一下：

*   请求导航时
*   系统要求容器构造一个“视图”（这是一个 UIViewController - 不是 UIView）
*   系统将加载的 View 传递给 Presenter
*   Presenter 可以显示这个视图，但它想要显示 - 例如弹出窗口、拆分视图、导航子视图、模式等 - 并且还可以进行其他 UI 更改（动画、选项卡切换等）
*   当 UIView 本身被加载（在 UIViewController ViewDidLoad 中）时，MvxView 基类加载 ViewModel 以供 View 使用。

在您的示例中，听起来您可能想要专门化您的拆分视图之一，以便它包含一个 UINavigationController - 然后您希望您的 Presenter 将您的新视图传递给该 UINavigationController 以进行推送。

这只是 C# 代码——它只是在你的 UI 项目中——你可以像“普通的 MonoTouch”一样随意编写它。

“高级”演示者的一个示例是会议示例 - 了解它如何将显示操作委托给选项卡栏 - [https://github.com/slodge/MvvmCross/blob/vnext/Sample%20-%20CirriousConference/Cirrious。 Conference.UI.Touch/ConferencePresenter.cs](https://github.com/slodge/MvvmCross/blob/vnext/Sample%20-%20CirriousConference/Cirrious.Conference.UI.Touch/ConferencePresenter.cs)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T09:05:34.630

我设法回答了我自己的问题。如果我的方法有误，请纠正我！

我使用与 github 上的 MVVMCross 示例中相同的设置。我对 SplitViewController 做了一个小改动：

1.  我创建了两个 UINavigationController，分别称为 _detailNav 和 _rootNav。
2.  UINavigationController 构造函数允许将 UIViewController 设置为 RootViewController。在此处设置一个 ViewController（在示例中：new EmptyViewController()）。
3.  更改名为 SetPrimaryView 和 SetSecondaryView 的两个方法，因此它使用 UINavigationController 更改 ViewControllers。

例如，改变这个： this.ViewControllers = new UIViewController[] { controller, ViewControllers[1] };

为此：_detailNav.PushViewController(controller, true);

现在 _detailNav（一个 UINavigationController）用于更改视图，而不是在 SplitView 中设置新的 ViewControllers 数组。

# python - elif 和列表索引超出范围 - Python

> ID：13631063
> 
> 赞同：0
> 
> 时间：2012-11-29T17:11:12.877
> 
> 标签：python, arrays, if-statement, indexing

本质上，我的代码精炼了一个数组。如果下一位数据太远，它会搜索上方和下方索引以查看该数据是否更适合在其索引中，即

```
def distance(x, y):
    if x > y:
        result = x - y
    else:
        result = y - x
    return result

for y in range(0,10):
    for x in range(0,10):
        newarray[y][0] = myarray[y][0]
        if distance(myarray[y][x],myarray[y][x+1]) > myerror:
            if distance(myarray[y-1][x+1],newarrayarray[y][x]) <= myerror:
                newarray[y][x+1] = myarray[y-1][x+1]
            elif distance(myarray[y-2][x+1],newarrayarray[y][x]) <= myerror:
                newarray[y][x+1] = myarray[y-2][x+1]
            elif distance(myarray[y+1][x+1],newarrayarray[y][x]) <= myerror:
                newarray[y][x+1] = myarray[y+1][x+1]
            elif distance(myarray[y+2][x+1],newarrayarray[y][x]) <= myerror:
                newarray[y][x+1] = myarray[y+2][x+1]
            else:
                newarray[y][x+1] = myarray[y][x+1]
        else:
            newarray[y][x+1] = myarray[y][x+1] 
```

所以这段代码对于 y 的特定值非常有效，更具体地说是数组的中间值。我遇到的问题是外部值，因为显然对于 y=10 没有 y+1 值。

我想要发生的是，如果它超出了索引范围，我希望它只是将其视为不符合我的设定条件，而不是将其视为错误。因此，当 y=10 时，当它寻找 y=11 而不是因为它不存在而发出嘶嘶声时，我希望它只是说不，这不是真的，继续下一个 if。

我希望这是有道理的，如果没有，请发表评论，我会尝试清除它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T17:15:36.247

您想要的是，在每个 if 中进行距离计算之前，检查您要测试的相邻 x 或 y 值是否在范围内，并在其与距离检查之间进行逻辑和。由于它使用惰性求值，如果第一个条件失败，它将永远不会求值第二个条件，并且您将永远不会出错。

# jquery - 如何创建流畅的网格样式布局？

> ID：13631067
> 
> 赞同：0
> 
> 时间：2012-11-29T17:11:21.197
> 
> 标签：jquery, html, css

我知道如何设置砌体布局，但我不知道如何让每个项目具有不同的大小，如下面的屏幕截图。

我该如何做到这一点？

[http://www.sitebuildertips.com/wp-content/uploads/2012/11/Fluid-Grid.png](http://www.sitebuildertips.com/wp-content/uploads/2012/11/Fluid-Grid.png)

# sql - MS SQL Studio 2008 - 使用 SUM 选择子查询

> ID：13631069
> 
> 赞同：1
> 
> 时间：2012-11-29T17:11:43.433
> 
> 标签：sql, sql-server-2008-r2

使用 SUM 的这个子查询有问题。该查询将汇总特定日期范围内的几条记录的利润列。我将这个总利润按附在记录上的帐号分组。使用一个帐号，它就可以正常工作：

```
select
    [ACCOUNT ID],
    (
     select SUM(PROFIT)
     from [Transaction Table]
     where [ACCOUNT ID] in ('1001')
     and [ACTIVITY DATE] in ('5/31/2012')
    ) as 'May Profit'

from
    [Transaction Table]

where
    [ACCOUNT ID] in ('1001')

group by
    [ACCOUNT ID] 
```

给出正确的结果：

```
 | ACCOUNT ID | May Profit |
    ---------------------------
    |    1001    |   $61.97   | 
```

麻烦来自多个帐号：

```
select
    [ACCOUNT ID],
    (
     select SUM(PROFIT)
     from [Transaction Table]
     where [ACCOUNT ID] in ('1001','2001')
     and [ACTIVITY DATE] in ('5/31/2012')
    ) as 'May Profit'

from
    [Transaction Table]

where
    [ACCOUNT ID] in ('1001','2001')

group by
    [ACCOUNT ID] 
```

给出不正确的结果：

```
 | ACCOUNT ID | May Profit |
    ---------------------------
    |    1001    |  $127.34   |
    |    2001    |  $127.34   | 
```

每条记录上的两个账户的“五月利润”都在合计。我需要每个帐号的个人利润总额。

有什么想法吗？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T17:14:45.197

你不需要使用子查询

```
 select
     [ACCOUNT ID],
     SUM(PROFIT)
 from [Transaction Table]
 where [ACCOUNT ID] in ('1001','2001') and [ACTIVITY DATE] in ('5/31/2012')
 group by [ACCOUNT ID] 
```

您的查询只计算了两个帐户的总和并在每一行中显示

**更新：**

实际上，对于多个金额，我会做这样的事情

```
 select
     [ACCOUNT ID],
     SUM(case when [ACTIVITY DATE] in ('5/31/2012') then PROFIT else 0 end) as 'May Profit',
     SUM(case when [ACTIVITY DATE] in ('4/31/2012') then PROFIT else 0 end) as 'April Profit'
 from [Transaction Table]
 where [ACCOUNT ID] in ('1001','2001') and 
 group by [ACCOUNT ID] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T17:17:29.207

您不需要使用子查询，但您可以通过以下两种方式来实现：

第一种方式，使用您的查询（不推荐） - 注意 Account Id = T.Account Id：

```
select
    [ACCOUNT ID],
    (
     select SUM(PROFIT)
     from [Transaction Table]
     where [ACCOUNT ID] = T.[ACCOUNT ID]
     and [ACTIVITY DATE] in ('5/31/2012')
    ) as 'May Profit'
from
    [Transaction Table] T
where
    [ACCOUNT ID] in ('1001','2001')
group by
    [ACCOUNT ID] 
```

更好的方法：

```
select
     [ACCOUNT ID],
     SUM(PROFIT)
from [Transaction Table]
where [ACCOUNT ID] in ('1001','2001') and [ACTIVITY DATE] in ('5/31/2012')
group by [ACCOUNT ID] 
```

# javascript - 正则表达式：文件名 Javascript 中的空格

> ID：13631072
> 
> 赞同：1
> 
> 时间：2012-11-29T17:12:08.947
> 
> 标签：javascript, regex, whitespace

我有一个正则表达式，可以在文件名中查找空格、连字符、下划线和 %20

```
/\s+|-+|_+|%20+/gi 
```

如果文件名有任何连字符 etch 那么它们将被转换为空格。我不担心延期

*   this-is_my%20file­which-is-an_image

将改为

*   这是我的文件，它是一个图像

它工作正常，但我不确定使用 case OR case OR case 方法是否是正确的方法。此外，上述内容与软连字符不匹配，但我不知道该怎么做。干杯。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T17:18:10.783

这在一定程度上取决于您的用例。

如果您想用一个破折号替换所有空格。就这样`"abc_-def"`变成了`"abc-def"`。在这种情况下，您当前的正则表达式将`"abc--def"`改为给出。

要修改它，您可以移动`+`，如下所示：

```
"abc-_def".replace(/([\s\-_]|%20)+/gi, "-"); // "abc-def" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T17:18:34.233

您可以使用较短的版本，如下所示：

```
/(\s|-|_|%20)+/gi 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T17:15:18.013

我们在这里需要一些上下文。如果您只想查看文件名是否包含其中之一，请使用以下命令：

```
/\s|\-|%20/ 
```

如果文件名包含其中任何一个，则返回 true，否则返回 false。

如果您想要更多，您需要告诉我们您需要它的用途。你想用别的东西代替它们吗？如果它们都存在，你想返回 true 吗？

编辑：您已经编辑了您的问题，谢谢。你这样做的方式很好，是的。

# android - 带有 CursorAdapter 的列表视图

> ID：13631075
> 
> 赞同：8
> 
> 时间：2012-11-29T17:12:19.823
> 
> 标签：android, listview, android-cursoradapter

我正在开发一个使用 CursorAdapter 显示电话联系人的应用程序。当我运行它时，我遇到了一个列表视图，它只重复一个联系人如下所示（“大卫”是我的联系人之一，只是在列表视图中重复）

大卫 017224860

大卫 017224860

大卫 017224860

大卫 017224860

大卫 017224860

大卫 017224860。

.

.

.

我的活动看起来像

```
public class Contacts extends Activity {    
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.contacts);

    Cursor cursor = getContentResolver()
        .query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI,
               null, null, null, null);

    startManagingCursor(cursor);

    ContactCursorAdapterCT adapter= new ContactCursorAdapterCT(Contacts.this, cursor);
     ListView contactLV = (ListView) findViewById(R.id.listviewblcontactsDB);

    contactLV.setAdapter(adapter); 
```

我的 cursorAdapter 看起来像：

```
public class ContactCursorAdapterCT extends CursorAdapter {
       public ContactCursorAdapterCT(Context context, Cursor c) {
    super(context, c);
    // TODO Auto-generated constructor stub
}

@Override
public void bindView(View view, Context context, Cursor cursor) {

    while (cursor.moveToNext()) {

        TextView name = (TextView)view.findViewById(R.id.blacklistDB1);               
          name.setText(cursor.getString(cursor.getColumnIndex
          (ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME)));

        TextView phone = (TextView)view.findViewById(R.id.blacklistDB2); 
          phone.setText(cursor.getString(cursor.getColumnIndex
          (ContactsContract.CommonDataKinds.Phone.NUMBER)));

    }
}

@Override
public View newView(Context context, Cursor cursor, ViewGroup parent)
{
    // TODO Auto-generated method stub

    LayoutInflater inflater = LayoutInflater.from(context);

    View v = inflater.inflate(R.layout.lv, parent, false);
            bindView(v, context, cursor);
           return v;
} 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-11-29T17:16:34.667

我注意到几点：

1.  CursorAdapter 为您移动 Cursor，将您的呼叫转移到`cursor.moveToNext()`.
2.  适配器的`getView()`调用`newView()`和`bindView()`它自己的；你不应该自己调用这些方法。
3.  [您应该在 Google IO](http://youtu.be/wDBM6wVEO70)上观看 Android 开发人员的讲座，以了解有关加快适配器速度的提示和技巧。提示如下：
    *   使用 ViewHolder，而不是`findViewById()`重复调用。
    *   保存光标的索引，而不是`getColumnIndex()`重复调用。
    *   一次获取 LayoutInflater 并保留本地引用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-29T21:27:19.260

另外，我建议您从使用 CursorManager 切换到使用 CursorLoader。这记录在 Android API 指南的 Loaders 下。[此处](http://developer.android.com/guide/components/loaders.html#example)是您可能会发现有用的一个具体示例 。

游标适配器将游标“连接”到 ListView。Cursor 是数据的数据视图，ListView 是相同数据的 UI 视图。您无需编写任何程序来使 ListView 与 Cursor 保持同步，这一切都是自动处理的。

You do need to tell the ListView which columns in the Cursor it should display, See the documentation for the [SimpleCursorAdapter](http://developer.android.com/reference/android/widget/SimpleCursorAdapter.html#SimpleCursorAdapter%28android.content.Context,%20int,%20android.database.Cursor,%20java.lang.String%5B%5D,%20int%5B%5D,%20int%29) class. I usually use that class unless I have to modify the data as I move it from the Cursor to the ListView.

# javascript - 将html放入变量时保持缩进结构

> ID：13631078
> 
> 赞同：0
> 
> 时间：2012-11-29T17:12:28.797
> 
> 标签：javascript, jquery, regex

我正在尝试制作一个 javascript 函数，该函数将`<td>`在字符串中找到所有标签并将它们设为红色。这样我就可以找到一个没有同伴的走错标签`</td>`。我的问题是，当我复制页面的 html 时，它会丢失所有缩进结构。无论如何要保持这种结构？

```
$(document).ready(function(){
   var html = $('body').html(); 

   html.replace('<td>', '<td><span class="red">'); 
   html.replace('</td>', '</td></span>'); 
   $('#result').text(html);
}); 
```

[http://jsfiddle.net/KL3u3/2/](http://jsfiddle.net/KL3u3/2/)

此外，字符串替换似乎根本不起作用。但一次只做一件事。

感谢您的任何想法！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T17:55:37.103

```
$.ajax({
    url: document.location,
    dataType: "html" // get plain source
}).done(function(text) {
    $(function() {
         $("body").text(text).html(function(_, old) {
             return old.replace(/&lt;\/?td&gt;/g, '<span class="red">$&</span>');
         }).css({"white-space":"pre-wrap", "text-align":"left", "font-family":"monospace"});
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T17:14:35.190

字符串替换仅替换第一次出现。要进行全局替换，您需要使用正则表达式。

```
var html = $('body').html(); 
    html = html.replace(/(<td>)/gi, '<td><span class="red">'); 
    html = html.replace(/(<\/td>)/gi, '</span></td>'); 
$('#result').text(html); 
```

[**小提琴**](http://jsfiddle.net/KL3u3/3/)

另请注意，字符串替换是不可变的，必须再次声明回变量。

为什么不直接用 jQuery 包装 TD？

```
$('body').find('td').wrap('<span class="red" />'); 
```

# javascript - 使用 javascript 连接数据库并检索值

> ID：13631089
> 
> 赞同：0
> 
> 时间：2012-11-29T17:12:59.313
> 
> 标签：javascript, mysql

我想连接到数据库并使用 javascript 从数据库中检索值，因为我构建了一个 javascript 条形图。如果有人可以调查并帮助我，下面是我的代码。

```
<?php
ini_set('display_errors',1); 
error_reporting(E_ALL);
$link = mysql_connect('localhost', 'root', 'root');
mysql_select_db('sarc', $link);
$result = mysql_query('SELECT 73');

$val = mysql_fetch_row($result);
$val = $val[0];

?>

<link rel="stylesheet" type="text/css" href="progressbar.css" />
<script type="text/javascript" src="progressbar.js"></script>
<style type="text/css">
.my_progress_bar {
border-width: 0px;
}

</style>

<div id="my_progress_bar_1"></div>

<script type="text/javascript">
var currentValue = [<?php echo $val; ?>];
var myProgressBar = null
var timerId = null
function loadProgressBar(){
myProgressBar = [
     new ProgressBar("my_progress_bar_1",{
         height: 400,
         width: 129,
         orientation: ProgressBar.Orientation.Vertical,
         direction: ProgressBar.Direction.BottomToTop,
         animationStyle: ProgressBar.AnimationStyle.StaticFull,
         showLabel: false,
         imageUrl: 'images/bottle-in.png',
         markerUrl: 'images/marker-bottle.png',
         extraClassName: {
             wrapper: 'my_progress_bar',
             left: 'my_progress_bar',
             right: 'my_progress_bar',
             middle: 'my_progress_bar',
             marker: 'my_progress_bar',
             parent: 'my_progress_bar',
             background: 'my_progress_bar'
         },
     })
 ];

 myProgressBar[0].setValue(currentValue);
}

loadProgressBar();
</script> 
```

此代码在我运行时显示空白页。有人可以帮我吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T21:15:23.480

对于不熟悉 AJAX 和 jQuery 的人来说，这是一个很大的进步。我建议你从这里开始：

**AJAX 教程**：[http ://www.w3schools.com/ajax/default.asp](http://www.w3schools.com/ajax/default.asp)

**jQuery 教程**：[http ://www.w3schools.com/jquery/default.asp](http://www.w3schools.com/jquery/default.asp)

在你熟悉了这两个之后，你会想要这样的东西：

**文件 1**：ajax_landing.php

```
// This file needs to search your database using PHP, and echo the results.
$data = mysql_fetch_assoc(mysql_query("SELECT myCol FROM myTable WHERE condition = value"));
echo json_encode($data);

// This should output something like...
{ myCol: 73 } 
```

**文件 2**：chart_page.html（或 .php）

```
<script>
$.getJSON("ajax_landing.php", function(response) {
    var value = response['myCol'];

    example_10(value);
});
</script> 
```

当然，这只是表面上的问题，但希望能为您指明正确的方向。

请不要对链接 w3schools 投反对票。他们没*那么*可怕...... ;)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T17:40:50.833

好吧，这个@Rajan 没有简单的答案，尽管 AJAX 看起来很复杂，但它是你的朋友。您必须添加一个 PHP 页面，该页面从 db 读取数据并将其作为 JSON 返回（不是包含所有 HTML 的大页面，只是一个**JSON**字符串 ex `{ value: 73 }`，然后使用客户端 JavaScript 库（例如[jQuery](http://jquery.com/)）来访问它页面，使用 ajax 并将值传递给您的函数。

```
$.ajax({
  url: 'yourserver/phppage.php',
  dataType: 'json',
  data: data,
  success: function(data) { example_10(data.value); }
}); 
```

此代码不会按原样工作，但希望它可以为您提供指导。您还需要修改 example_10 函数以接受参数。:)

我们无法为您编写整个程序。但我们当然可以在您遇到困难的地方提供帮助。所以你必须开始你自己。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T17:16:14.357

如果您在 Web 浏览器中执行此 javascript，就像我假设的那样，那么从数据库获取数据的最常见方法是通过服务器。这意味着您需要某种动态服务器。在 Java 世界中，这将是一个 Servlet 容器，您很可能会在该 servelt 容器之上使用一个 Web 应用程序框架来提供帮助。您的 javasript 将对服务器进行 ajax 调用，java 代码将连接到 DB，然后从该数据中准备一个 ajax 适当的响应，例如 json 或 xml。

这有帮助吗？请注意，您可能可以直接从 javascript 中找到其他类型的数据库，但这是高级主题。我需要您提出更多要求才能知道是否需要更专业的案例。

# iphone - Vaadin Touchkit / Web 应用程序 - 锁定移动屏幕方向

> ID：13631092
> 
> 赞同：1
> 
> 时间：2012-11-29T17:13:05.583
> 
> 标签：iphone, html, vaadin, vaadin-touchkit

我想知道在查看网站（特别是 vaadin touchkit 应用程序）时是否可以锁定移动设备的屏幕方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T14:22:04.930

使用 Vaadin Touchkit，您无法使用任何移动平台特定功能，如通知、警报服务、帐户服务等。您只能构建无法锁定移动屏幕方向的 Web 应用程序。如需了解有关 Vaadin Touchkit 的更多详细信息以及与 ZK Mobile 等类似技术的比较，请访问：http: [//jtechnoprojects.blogspot.in/2012/12/vaadin-touchkit-vs-zk-mobile-vs.html](http://jtechnoprojects.blogspot.in/2012/12/vaadin-touchkit-vs-zk-mobile-vs.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T17:10:21.893

不，Vaadin 遵循与所有 Web 应用程序相同的规则，并且这个问题在 StackOverflow 上已经被问过/回答了很多次。[这个问题](https://stackoverflow.com/questions/5298467/prevent-orientation-change-in-ios-safari)有一个技巧来补偿方向，但这绝对不是理想的。

# vb.net - 从字符串中获取子短语的所有组合

> ID：13631109
> 
> 赞同：0
> 
> 时间：2012-11-29T17:14:04.687
> 
> 标签：vb.net, string, combinations

为了进行某种“模糊”匹配，我需要从用户可以输入的字符串中提取子短语的所有变体。

我尝试过的几个例子似乎并没有完成全部工作 - 它们似乎循环并抓取仅并排但不分布在各处的子短语 - 例如：

原始输入 - “重型电缆卷筒” - 在获得 2 个单词子短语时给出：

重负

电缆

电缆卷筒

但我也想要：

重型电缆

沉重的卷轴

责任卷轴

因此，实际上在构建子短语时会“遗漏”单词。理想情况下，我需要为 4 个单词的原始输入返回 3 和 2 个单词的子短语，为 5 个单词的输入返回 4、3 和 2 个等等。

```
For i As Integer = lst.Count To 1 Step -1 
    For j As Integer = 1 To i 
        Dim sb As New StringBuilder 
        sb.Append("( ") 
        For k As Integer = 0 To (lst.Count - i) 
            sb.Append(lst(j + k - 1) & ":" & j & ":" & k & ":" & i & " ") 
            Next 
        sb.Append(")") 
        rlst.Add(sb.ToString()) 
    Next 
Next 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T17:38:35.407

两个嵌套的 for 循环将对两个单词的组合执行此操作

```
Dim s = "heavy duty cable reel".Split()

For i As Integer = 0 To s.Length - 2
    For k As Integer = i + 1 To s.Length - 1
        Console.WriteLine(s(i) + " " + s(k))
    Next
Next 
```

输出是

```
重负
重型电缆
沉重的卷轴
电缆
责任卷轴
电缆卷筒

```

* * *

**更新**

这是一个将所有短语长度从 2 到单词数 - 1 的版本。我为此创建了一个类。

```
Public Class PhraseBuilder
    Private words As String()
    Private phrases As List(Of String)

    Public Function GetList(ByVal initialPhrase As String) As List(Of String)
        words = initialPhrase.Split()
        phrases = New List(Of String)()
        For phraseLength As Integer = 2 To words.Length - 1
            AddPhrases("", 0, phraseLength)
        Next
        Return phrases
    End Function

    Private Sub AddPhrases(ByVal phrase As String, ByVal start As Integer,
                           ByVal wordCount As Integer)
        If wordCount >= 1 Then
            For i As Integer = start To words.Length - wordCount
                AddPhrases(phrase + " " + words(i), i + 1, wordCount - 1)
            Next i
        Else
            phrases.Add(phrase.TrimStart())
        End If
    End Sub
End Class 
```

你可以用

```
Sub PrintPhrases()
    Dim phraseBuilder = New PhraseBuilder()
    Dim phrases = phraseBuilder.GetList("heavy duty cable reel")
    For Each phrase As String In phrases
        Console.WriteLine(phrase)
    Next
End Sub 
```

结果将是

```
重负
重型电缆
沉重的卷轴
电缆
责任卷轴
电缆卷筒
重型电缆
重型卷轴
重型电缆卷筒
电缆卷筒

```

* * *

请注意，我在这里使用了递归。递归允许将 for 语句嵌套到任意深度。我没有使用 a `StringBuilder`，因为我们必须创建短语开头的副本。使用自动执行此操作的字符串更容易完成，因为它们是不可变的。没有简单的方法来克隆`StringBuilder`.

# r - data.frame 精简版

> ID：13631112
> 
> 赞同：0
> 
> 时间：2012-11-29T17:14:22.523
> 
> 标签：r, bioinformatics, bioconductor

数据框：

```
200.01  117:10520   227137.56097561
200.01  155:24  227137.56097561
200.01  265:47  227137.56097561
200.01  266:37  227137.56097561
200.01  281:568 227137.56097561
200.01  282:246 227137.56097561
200.31  190:3374    227360
200.56  110:1261    227545.365853659
200.56  186:571 227545.365853659
200.66  114:969 227619.512195122
200.66  118:3886    227619.512195122 
```

数据是呈现的数据。问题：我想从重复的列中创建一行。例子 ：

```
200.01  117:10520 155:24 265:47  266:37 281:568 282:246 227137.56097561 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T17:46:57.573

正如评论中提到的，这是一个非常简单的`aggregate`问题：

您的数据：

```
dat <- read.table(header = FALSE, stringsAsFactors=FALSE, text = "
                    200.01  117:10520   227137.56097561
                    200.01  155:24  227137.56097561
                    200.01  265:47  227137.56097561
                    200.01  266:37  227137.56097561
                    200.01  281:568 227137.56097561
                    200.01  282:246 227137.56097561
                    200.31  190:3374    227360
                    200.56  110:1261    227545.365853659
                    200.56  186:571 227545.365853659
                    200.66  114:969 227619.512195122
                    200.66  118:3886    227619.512195122") 
```

聚合的两个选项。在第一个中，`V2`是一个`list`。在第二个选项中，`V2`是一个字符串。

```
aggregate(V2 ~ V1 + V3, dat, c)
#       V1       V3                                                  V2
# 1 200.01 227137.6 117:10520, 155:24, 265:47, 266:37, 281:568, 282:246
# 2 200.31 227360.0                                            190:3374
# 3 200.56 227545.4                                   110:1261, 186:571
# 4 200.66 227619.5                                   114:969, 118:3886
aggregate(V2 ~ V1 + V3, dat, paste, collapse=" ")
#       V1       V3                                             V2
# 1 200.01 227137.6 117:10520 155:24 265:47 266:37 281:568 282:246
# 2 200.31 227360.0                                       190:3374
# 3 200.56 227545.4                               110:1261 186:571
# 4 200.66 227619.5                               114:969 118:3886 
```

另请参阅：[R 分组函数：sapply vs. lapply vs. apply。vs. tapply vs. by vs. aggregate](https://stackoverflow.com/questions/3505701/r-grouping-functions-sapply-vs-lapply-vs-apply-vs-tapply-vs-by-vs-aggrega)

* * *

如果需要多个列，您可能仍需要聚合，然后稍后使用自定义函数拆分列。[@RicardoSaporta](https://stackoverflow.com/users/1492421/ricardo-saporta)`tableFlatten`共享一个示例函数，它将创建与最长列表项一样多的列。但是，正如@Justin 在评论中提到的那样，根据您要执行的操作，列表可能更有用。

```
dat2 <-  aggregate(V2 ~ V1 + V3, dat, c)
(dat2 <- tableFlatten(dat2))
#       V1       V3     V2.01    V2.02  V2.03  V2.04   V2.05   V2.06
# 1 200.01 227137.6 117:10520   155:24 265:47 266:37 281:568 282:246
# 2 200.31 227360.0  190:3374                                       
# 3 200.56 227545.4  110:1261  186:571                              
# 4 200.66 227619.5   114:969 118:3886 
```

# c# - DataAnnotations - Validator.TryValidateObject 在未指定错误消息时不验证

> ID：13631122
> 
> 赞同：4
> 
> 时间：2012-11-29T17:14:47.300
> 
> 标签：c#, asp.net-mvc, validation, data-annotations

我刚刚编写了一个扩展方法来提供对 DataContracts 的验证，然后再将它们通过网络发送到我的 API。

扩展方法是：

```
 public static bool IsValid(this object obj, out List<ValidationResult> validations)
    {
        ValidationContext context = new ValidationContext(obj, null, null);
        validations = new List<ValidationResult>();
        return Validator.TryValidateObject(obj, context, validations, true);
    } 
```

为简洁起见，我将仅列出我正在验证的对象的一个​​属性：

```
 [Required]
    [Display(Name = "X coordinate")]
    [Range(-50, 50)]
    [DataMember(IsRequired=true)]
    public int XCo { get; set; } 
```

如果将此属性设置为 51 并对其进行验证，则返回 true！

```
 [Required]
    [Display(Name = "X coordinate")]
    [Range(-50, 50, ErrorMessage="Xco outside accepted range")]
    [DataMember(IsRequired=true)]
    public int XCo { get; set; } 
```

如果将此属性设置为 51 并对其进行验证，则返回 false！

即使使用 null ErrorMessage，我也不希望 Validator 仅仅因为未设置用户提供的字符串属性而在无效对象上返回 true。

有谁知道即使没有设置错误消息属性，是否有办法配置它以正确验证？

我知道这不一定是一个好的解决方案，因为好的错误报告显然非常有用，但我宁愿这个过程以数据为中心。

# c++ - 重载后 std::endl 的 'operator<<' 不匹配

> ID：13631124
> 
> 赞同：1
> 
> 时间：2012-11-29T17:14:51.240
> 
> 标签：c++, iostream, manipulators

很抱歉我重复[了这个问题](https://stackoverflow.com/questions/1134388/stdendl-is-of-unknown-type-when-overloading-operator)，但我没有在那里发表评论所需的声誉，而且那里的答案对我来说没有说服力。

```
#include<iostream>

class my_ostream : public std::ostream
{
    public:
    std::string prefix;

    my_ostream():prefix("*"){}

    my_ostream& operator<<(const std::string &s){
        std::cout << this->prefix << s;
        return *this;
    }
};

int main(){
  my_ostream s;
  std::string str("text");
  s << str << std::endl;
} 
```

我在这里得到：

> 's.my_ostream::operator<<(((const std::string&)((const std::string*)(& str))) 中的 'operator<<' 不匹配) << std::endl' </p>

我不明白为什么。如果它适用于 ostream，它应该适用于 my_ostream。该程序有效：

```
#include <iostream>
using namespace std;

class a{};
class b:public a{};
class c:public b{};

void f(a){cout << 'a' << endl;}
void f(b){cout << 'b' << endl;}
void f(b, a){cout << "b, a" << endl;}
void f(c){cout << 'c' << endl;}
void f(c, int){cout << "c, int" << endl;}

void f(a*){cout << "pa" << endl;}
void f(b*){cout << "pb" << endl;}
void f(b*, a*){cout << "pb, pa" << endl;}
void f(c*){cout << "pc" << endl;}
void f(c*, int){cout << "pc, int" << endl;}

int main(){
  a ao; b bo; c co;
  f(ao); f(bo); f(co);
  f(co, ao);
  a *pa=new(a); b *pb=new(b); c *pc=new(c);
  f(pa); f(pb); f(pc);
  f(pc, pa);
  return 0;} 
```

它输出：

```
a
b
c
b, a
pa
pb
pc
pb, pa 
```

如此简单的重载并不能解释这个错误。另外，我这里不介绍模板，所以未确定的模板类型参数应该不会起作用。阅读 iostream 代码被证明是非常困难的，所以我很感激任何见解。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T09:37:09.707

简单的重载*确实*解释了这个错误。事实上，`std::cout`只是使问题复杂化。以下也不起作用：

```
int main(){
  my_ostream s;
  s << 1;
} 
```

问题是您的`operator <<`重载实际上*隐藏*了为基类定义的所有重载。

粗略地说，C++ 在范围解析之后会重载解析。所以 C++ 首先检查你的类的范围内是否有`operator <<`定义。有！所以它停止在那里搜索更通用的函数，只考虑已经找到的函数来解决重载问题。唉，只有一个重载，`std::string`所以调用失败了。

这可以通过不定义`operator <<`为成员函数而是定义为自由函数来简单地解决：

```
my_ostream& operator<<(my_ostream& out, const std::string &s) {
    std::cout << out.prefix << s;
    return out;
} 
```

…但是当然这只能解决你的一些问题，因为你的类定义在语义上是错误的；你不能像这样子类化 IO 流。在这里我的知识失败了，但我认为为了做你想做的事，你应该覆盖流缓冲区的`uflow`功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-02-21T02:33:40.973

解决此问题的另一种方法是将 operator<< 重载声明为友元。

```
class my_ostream : public std::ostream
{
   public:
     std::string prefix;

   my_ostream():prefix("*"){}

   template <class T>
     friend my_ostream& operator<<(my_ostream& my_os, const T& s){
        std::cout << my_os.prefix << s;
     return my_os;
   }
}; 
```

# linux - pthread 和调用多个线程的正确方法

> ID：13631125
> 
> 赞同：0
> 
> 时间：2012-11-29T17:14:51.287
> 
> 标签：linux, multithreading, pthreads

我有这个代码

我的范围是：程序创建 MAX_THREAD 线程，在这种情况下为三个，每个线程打印 Thread-ID 并退出。

```
#include <stdio.h>
#include <stdlib.h>
#include <errno.h>
#include <string.h>
#include <pthread.h>

#define MAX_THREAD 3

void *thr_func(void *arg);

int main(void) {
    pthread_t thr[MAX_THREAD];
    int i, thr_err;

    /* I expected three threads ... but there is only one */
    for (i=0; i<MAX_THREAD; i++) {

        printf("thread %d: - ", i);

        if ((thr_err = pthread_create(&thr[i],NULL, thr_func, NULL)) != 0) {
            fprintf(stderr, "Err. pthread_create() %s\n", strerror(thr_err));
            exit(EXIT_FAILURE);
        }

        if (pthread_join(thr[i], NULL) != 0) {
            fprintf(stderr, "Err. pthread_join() %s\n", strerror(errno));
            exit(EXIT_FAILURE);
        }
    }

    return(EXIT_SUCCESS);
}

void *thr_func(void *arg)
{
    pthread_t tid = pthread_self();
    printf("TID %lu - Address 0x%x\n", tid, (unsigned int)pthread_self());

    pthread_exit((void*)0);
} 
```

输出是：

```
thread 0: - TID 3075976048 - Address 0xb757ab70
thread 1: - TID 3075976048 - Address 0xb757ab70
thread 2: - TID 3075976048 - Address 0xb757ab70 
```

我不明白为什么只有一个线程！

我对这个声明有疑问：

```
 pthread_t thr[MAX_THREAD]; 
```

我可以创建一个包含三个线程的数组，或者这只是一个线程？？？？

**解决了**

新代码（我刚刚将 pthread_joiun() 放在 for 循环之外）

```
#include <stdio.h>
#include <stdlib.h>
#include <errno.h>
#include <string.h>
#include <pthread.h>
#include <unistd.h>
#include <sys/syscall.h>

#define MAX_THREAD 3

void *thr_func(void *thr_num);

int main(void) {
    pthread_t thr[MAX_THREAD];
    int i, thr_err;

    for (i=0; i<MAX_THREAD; i++) {

        if ((thr_err = pthread_create(&thr[i],NULL, thr_func, (void*)i)) != 0) {
            fprintf(stderr, "Err. pthread_create() %s\n", strerror(thr_err));
            exit(EXIT_FAILURE);
        }
    }

    for (i=0; i<MAX_THREAD; i++) {
        if (pthread_join(thr[i], NULL) != 0) {
            fprintf(stderr, "Err. pthread_join() %s\n", strerror(errno));
            exit(EXIT_FAILURE);
        }
    }

    return(EXIT_SUCCESS);
}

void *thr_func(void *thr_num)
{
    pthread_t tid;

    if ((tid = syscall(SYS_gettid)) == -1) {
        fprintf(stderr, "Err. syscall() %s\n", strerror(errno));
        exit(EXIT_FAILURE);
    }

    printf("thread '%d' - TID %lu - Address 0x%x\n",
            (int)thr_num, tid, (unsigned int)tid);

    pthread_exit((void*)0);
} 
```

输出是：

```
thread '1' - TID 8780 - Address 0x224c
thread '0' - TID 8779 - Address 0x224b
thread '2' - TID 8781 - Address 0x224d 
```

地址和线程 ID 现在不同了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T17:57:47.363

您可能会获得相同的 TID 和地址，因为您`pthread_join()`每个线程都在开始下一个线程之前。该`pthreads`库似乎对回收关联的数据结构有点懒惰（可能是为了提高效率），因此您生成的下一个线程只使用与前一个相同的数据结构。尝试编写两个循环，一个用于创建线程，另一个用于在`pthread_join()`创建所有线程后执行 s。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T17:30:24.527

我突然想到的一个直接问题是在循环中使用 for (i=1; i<=MAX_THREAD; i++)。您的数据结构 (pthread_t thr[MAX_THREAD]) 是 0 索引的。因此，运行循环可能是最简单的 for (i=0; i

没有其他东西*出现*损坏。您的代码很奇怪，因为您正在启动每个线程（从执行 main 的线程），然后在继续分叉下一个线程之前通过 pthread_join 阻止其完成。

这并不能解释为什么您的输出每次都显示“线程 0：”......我希望在您当前的程序中看到这个以 1 开头，并且还会增加“i”在您的循环中增加。如果您不进行 pthread 生成和加入，您的代码会打印什么？如上所述修复循环绑定后，它是否输出“线程0：线程1：线程2：”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T07:15:26.030

我认为，在启动新线程之前，旧线程正在退出，因此新线程获得相同的 TID。尝试通过保持旧线程活着来打开新线程，我相信它会给出不同的 TID。

# java - 可比 不适用于树状图

> ID：13631126
> 
> 赞同：0
> 
> 时间：2012-11-29T17:14:53.560
> 
> 标签：java, treemap, comparable

我正在尝试构建一个树形图，并为键类实现了我自己的 Comparable 接口，但我仍然收到“无法转换为可比较”异常，我真的不明白为什么。这是我的代码的相关部分：

界面：

```
public interface Comparable<T> {

public int compareTo(T o);

} 
```

键类：

```
public class PriorityBuy implements Comparable<PriorityBuy>{

protected double _priceDouble;
protected DollarValue _priceDollarValue = new DollarValue(_priceDouble);
protected Price _price = new Price(_priceDollarValue);
protected long _time;

public PriorityBuy(Price price, long time) {

    this._price = price;
    this._time = time;

}

public Price getPrice() {
    return _price;
}

public long getTime() {
    return _time;
}

/**
 * The following provides a new choice of hash function for this class.  The reason is that
 * we need to create a new equals method to match the compareTo method, and we need to know
 * that equal objects return equal hashCode.
 */

@Override
public int hashCode() {
    return (int) (((_price.hashCode())*13)^(_time));
}

/**
 * We re-implement the equals method to match our compareTo method, which depends on both price
 * and on time.
 */

@Override
public boolean equals(Object o) {
    if(! (o instanceof PriorityBuy)) {
        return false;
    }
    PriorityBuy p = (PriorityBuy) o;
    if(p.getPrice().getDollarValue().getValue() == _price.getDollarValue().getValue() && p.getTime() == _time) {
        return true;
    }

    return false;
}

/**
 * We are writing a compareTo method so that this class can implement Comparable<Priority>, which
 * in turn allows any treemap constructed with Priority as the class of keys to order the tree
 * according to the ordering defined by the compareTo method defined below, instead of using
 * the "natural ordering" as it usually does.
 */

@Override
public int compareTo(PriorityBuy a) {

    if(a.getPrice().getDollarValue().getValue() > this.getPrice().getDollarValue().getValue()) {
        return -1;
    }
    else if(a.getPrice().getDollarValue().getValue() < this.getPrice().getDollarValue().getValue()) {
        return 1;
    }
    else if(a.getTime() < this.getTime()) {
        return -1;
    }
    else if(a.getTime() > this.getTime()) {
        return 1;
    }
    else {
        return 0;   
    }
}

} 
```

我向树中添加元素的部分：

```
public void addToBuyBook(OrderBookMessage obm) throws Exception {
    Order order = this.createOrder(obm);
    TreeMap<PriorityBuy,Order> buyBookTree = _buyBook.get(obm.getTicker());
    buyBookTree.put(order.getPriorityBuy(), order);
    _buyBook.put(obm.getTicker(), buyBookTree);
    this.addBuyOrder(obm.getOrderID(), obm.getTicker(), obm.getLimitPrice(), obm.getQuantity());
} 
```

现在，当我使用测试来测试这段代码时：

```
public void testAddToBuyBook() throws Exception {
    OrderBookManager manager = new OrderBookManager();
    OrderBookMessage obm1 = new OrderBookMessage("IBM");
    OrderBookMessage obm2 = new OrderBookMessage("IBM");

    manager.addToBuyBook(obm1);

    manager.addToBuyBook(obm2);

} 
```

然后它返回 PriorityBuy 无法解析为可比较的异常。但似乎我已经构建了这个程序，所以它应该可以工作。所以.....谁能帮我看看为什么不是？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T17:16:57.157

您无法创建自己的`Comparable`界面；您必须使用内置的`java.lang.Comparable`.

# data-structures - 为什么下一个/上一个有序遍历节点总是外部节点？

> ID：13631127
> 
> 赞同：1
> 
> 时间：2012-11-29T17:14:57.640
> 
> 标签：data-structures, binary-search-tree

在二叉搜索树中，如果取任何内部（非叶）节点，为什么该节点的下一个（或上一个）有序遍历节点总是外部（叶）节点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T06:24:05.030

这不一定是真的。试试这棵树：

```
1
 \
  2
   \
    3
     \
      4 
```

这里，2的中序后继是3，是一个内部节点，它的中序前导是1，也是一个内部节点。

希望这可以帮助！

# php - ORA-06502 来自 PHP OCI 调用但不是 SQL Developer 的字符串缓冲区太小

> ID：13631128
> 
> 赞同：0
> 
> 时间：2012-11-29T17:14:58.227
> 
> 标签：php, oracle, plsql, oracle-sqldeveloper

我编写了一个包含存储过程的 PL/SQL (Ora10gR2) 包。标题如下所示：

```
procedure updateAddress(
  sid       in     varchar2,
  addID     in out number,
  roomNo    in     varchar2,
  poBox     in     varchar2,
  add1      in     varchar2,
  add2      in     varchar2,
  add3      in     varchar2,
  add4      in     varchar2,
  add5      in     varchar2,
  postCode  in     varchar2,
  country   in     varchar2,
  phone1    in     varchar2,
  phone2    in     varchar2,
  success   out    number
); 
```

此过程的目的是更新/附加数据库中的地址。如果`addID`为null，则插入并设置`addID`为新插入的地址ID；如果`addID`不为空，它只是更新（我还没有写这个）......无论如何，很简单。

在 SQL Developer 中调用此过程绝对可以正常工作。例如，以下工作完美：

```
set serveroutput on;

declare
  addID number;
  status number;
begin
  addID := null;

  mypackage.updateaddress('XXX11341976', addID, null, null, 'somewhere', 'else', 'NCx 1234', 'UA', null, null, null, null, null, status);

  dbms_output.put_line('Status ' || status || ' - New ID ' || addID);
end;
/ 
```

它输出类似的`Status 20 - New ID 3`内容，其中 20 是我的所有 OK 代码，如果我查询地址表，新地址将作为 ID 3 坐在那里。

但是，当我从使用 OCI8 的 PHP 脚本中调用此代码时，出现`ORA-06502`错误：

```
ORA-06502: PL/SQL: numeric or value error: character string buffer too small
ORA-06512: at line 1 
```

我知道这个错误通常表明您试图将太多数据放入某种类型；例如，放入`999`等`number(2)`。但是，我的 SP 并非如此：对类型没有限制，就像我说的，它在 SQL Developer 中运行良好。同样，我没有`dbms_output`在 SP 的任何地方使用。

当我将 PHP 脚本硬编码为与上述 PL/SQL 块完全相同的参数时，或者即使我完全删除了过程的主体并将其替换为`success := 20`. 后者让我相信通过 PHP 调用 OCI 存在一些问题，而不是我的 PL/SQL 包。但是，我不知道它可能是什么！诚然，我在其他地方使用此代码，过程更简单，而且效果很好。

任何想法可能是来源，或者我可以寻找什么？这让我有点发疯！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T17:18:47.757

OK：我发现问题了！...

结果是我的 Oracle 库代码在`maxlength`绑定变量时忽略了设置属性。我将它设置为 32767，你瞧，它有效！！

# ruby - 如何将一些数据添加到 ruby 中已经存在的 CSV 行中？

> ID：13631133
> 
> 赞同：0
> 
> 时间：2012-11-29T17:15:12.720
> 
> 标签：ruby, csv

例如，我的 CSV 文件的第一行是这样的 A、B、C

接下来我要添加“D”，但我希望它在同一行中，如下所示 A、B、C、D

不像这样

A,B,C
D

有没有办法在 Ruby 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T18:50:51.820

您需要重写文件的行，这没什么大不了的。诀窍是该行末尾有一个换行符——在用 . 重写之前去掉它`chomp`。

```
file_in = File.new("test.csv", "r")
file_out = File.new("test_out.csv", "w")
while (line = file_in.gets)
    file_out.puts "#{line.chomp},D"
end
file_in.close
file_out.close 
```

# powershell - 合并两个相似的 PSObject

> ID：13631136
> 
> 赞同：3
> 
> 时间：2012-11-29T17:15:19.023
> 
> 标签：powershell, powershell-3.0

执行 Get-ADObject 查询后，我得到了两个 PSObject（用于 2 个单独的 OU），我们称它们为 $query1 和 $query2，它们包含类型的成员对象

```
Selected.Microsoft.ActiveDirectory.Management.ADObject 
```

现在我想将这两个 PSObject（$query1 和 $query2）合并到一个包含两个查询的 ADObject 的 PSObject 中，但我真的不知道该怎么做。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T17:25:07.160

我用数组快速测试了它，它应该与 AD 对象的集合一起工作（只是现在没有时间测试它）。如果没有，请告诉我，如果更详细，还有更明确​​的方法。

```
$combined = @()
$combined += $query1
$combined += $query2 
```

# javascript - 在javascript函数中插入多行字符串作为变量

> ID：13631137
> 
> 赞同：2
> 
> 时间：2012-11-29T17:15:21.737
> 
> 标签：javascript, jquery, ruby-on-rails

我想通过 RJS 插入从 textarea 获取的多行字符串。正在做：

```
$('#description').text('<%= simple_format description %>'); 
```

不起作用，因为它会生成如下内容：

```
$('#description').text('<p>first line
<br />second line</p>

<p>fourth line</p>'); 
```

因为字符串不在一行，所以 JS 调用失败。所以现在 simple_format 正确地格式化了字符串，我怎样才能将它全部打印在我的 RJS 文件中的一行上？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T17:18:06.903

尝试这个：

```
$('#description').text('<%= simple_format(description).gsub("\n", "\\n").gsub("\r", "\\r").gsub("\t", "\\t").gsub("'","\\'")  %>'); 
```

这将换行符替换为 Javascript 可以理解的转义序列。类似的其他字符，如回车和制表符。此外，它将作为字符串分隔符的 ' 字符替换为转义序列，以便诸如“It's mine”之类的字符串不会引起任何意外。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-07T05:04:33.610

您可以（最好）使用内置的`escape_javascript()`或`j()`方法：

```
$('#description').text('<%= j(simple_format(description)) %>'); 
```

[http://api.rubyonrails.org/classes/ActionView/Helpers/JavaScriptHelper.html#method-i-escape_javascript](http://api.rubyonrails.org/classes/ActionView/Helpers/JavaScriptHelper.html#method-i-escape_javascript)

# lisp - 优化 lisp 中的函数（内存） - trie 数据结构

> ID：13631138
> 
> 赞同：2
> 
> 时间：2012-11-29T17:15:35.353
> 
> 标签：lisp, trie

我是一个 lisp 初学者，我正在尝试编写一个包，它为 trie 定义一个类并将整个拼字游戏字典读入其中。该结构充当一个节点，每个节点都有一个关联列表，用于跟踪源自它的字母（导致其他子尝试）。

这是我的课程代码

```
(DEFCLASS n-trie ()
  ((word :accessor word
         :initform 'nil
         :initarg :word)
   (word-count :accessor wcount
               :initform 0
               :initarg :wcount)
   (next-letters :accessor next-letters
                 :initform 'nil
                 :initarg :next-letters))) 
```

这是我的添加词功能

```
(defun add-word (string trie) ;;iterative method for looping through string
  (let ((s (coerce string 'list))
        (tri trie))
    (dolist (item s)
      (cond
       ((assoc item (next-letters tri))
        (incf (wcount tri))
        (setf tri (cdr (assoc item (next-letters tri)))))
       (t
        (incf (wcount tri))
        (setf (next-letters tri) (acons item (make-instance 'n-trie) (next-letters tri)))
        (setf tri (cdr (assoc item (next-letters tri)))))))
    (setf (word tri) string))) 
```

这是打开我的文件（拼字游戏字典）并读取每一行的函数

```
(defun read-words (file trie)
  (let((str (open file)))
    (labels ((rec (tri)
                  (let ((line (read-line str nil nil)))
                    (cond 
                     (line (add-word line tri)
                           (rec tri))
                     (t (close str)
                        trie)))))
      (rec trie)))) 
```

每当我尝试加载整个字典时，都会出现堆栈溢出。拼字游戏词典中有超过 10 万个单词，但在 6000 时失败了……我的内存使用有问题，但我似乎不知道是什么。

我在这些定义中所做的事情在内存方面本质上是昂贵的吗？我尝试使 trie 节点成为结构而不是类，并得到了类似的结果。我也有一个从字典中添加单词的递归算法，但它同样糟糕。

我已经为此苦苦挣扎了几个小时，我有点沮丧......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T19:40:23.017

我要改变的第一件事是函数`read-words`。它使用尾递归，看起来像在 Scheme 中。这在 Common Lisp 中不是惯用的。用于`WITH-OPEN-FILE`打开文件并使用循环构造来读取行。如果 Common Lisp 系统没有优化尾递归，这个递归已经在大文本文件上造成了堆栈溢出。

所以：

*   不要在不必要的地方使用尾递归，并且您知道您的 CL 实现实际上支持并理解它。例如，高调试模式通常会阻止尾递归优化。

*   使用`WITH-OPEN-FILE`. 不要使用`OPEN`/ `CLOSE`。

*   使用`IF`代替`COND`- 特别是当我们处理正常的真/假谓词时。

# .htaccess - htaccess mod_rewrite 清理 URL

> ID：13631142
> 
> 赞同：0
> 
> 时间：2012-11-29T17:15:45.777
> 
> 标签：.htaccess, mod-rewrite

有谁知道我可以添加到 htaccess 的 mod_rewrite 规则，以从 URL 中删除所有字符，这些字符除外？

AZ, az, 0-9, -, ?, =, &, :, /

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T20:29:55.233

这个规则怎么样：

```
RewriteRule ^(.*)[^A-Za-z0-9\-\?=&:/](.*)$ $1$2 [L] 
```

# jenkins - 在 Jenkins 中记录更改

> ID：13631145
> 
> 赞同：2
> 
> 时间：2012-11-29T17:15:50.253
> 
> 标签：jenkins

在这里继续我的问题： [Jenkins pass or fail build on external executable](https://stackoverflow.com/questions/13596479/jenkins-pass-or-fail-build-on-external-executable)

我的构建过程现在使用 MS Build 从源代码构建，并在构建过程中执行自定义程序。我在程序中写入控制台的任何内容都记录在控制台输出中。

但是，我还想在用户界面的“更改”和/或“状态”部分中记录一些条目（类似于 SVN 所做的）。

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-18T21:32:37.810

这是我在每次构建时将自己的日志添加到正常的 Jenkins 'Changes' 链接中所做的：我最终不得不编写我的 svn ant 例程（使用 svnant）来进行检查和更新等......

我让它工作的技巧：
1.) 在“源代码管理”下添加“Subversion 模块”。不要填写该部分。我不希望它检查任何东西。我必须这样做才能让 Jenkins 显示我创建的 changelog.xml 文件，否则它可以存在但 Jenkins 不会显示它。在作业 config.xml 文件中，您将看到 SCM...null... 没有这个。当您添加空的 svn 存储库时，它认为您正在使用 svn，然后让您的 changelog.xml 显示出来。（谁知道这会工作多久？）

在您的构建中，您希望按以下顺序执行这些步骤：
2.) 编写一个 create-changelog 目标。它应该在您的构建文件夹中找到代码的修订版。在 svn 中找到代码的修订版本。从 start-rev 到 stop-rev 执行 svn log asXml="true" 或 "--xml"。如果需要，将多个日志文件连接在一起以创建 ${Jenkins_Home}/jobs/${MYJOB}/builds/${BUILD_NUMBER}/changelog.xml

3.) 现在您可以根据需要删除 $workspace 区域。

4.) svn checkout 更新

5.) 构建

6.) 构建后，“更改”链接将显示您的 changelog.xml

我遇到的问题：
scm polling 没有做标签。
scm url 不够灵活。
groovy-postbuild-plugin 搞砸了我的 jenkins ui，所以我现在无法使用它。
sidebar-link-plugin 似乎不允许您为每个构建执行此操作。你也许可以用其他插件来做一些构建历史的事情，但我现在没有追求它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T04:16:11.657

```
// This is a deliciously convoluted and fragile hack to force Jenkins to show the
// changes via a Groovy Postbuild script:

// fake a Subversion changelog.xml file
changes = new File(manager.build.getRootDir(), "../../workspace/changes.txt")
changelog = new File(manager.build.getRootDir(), "changelog.xml")
changelog.withWriter {
  out ->
out.println("<?xml version=\"1.0\" encoding=\"UTF-8\"?><log><logentry revision=\""
  + manager.build.number + "\"><date>"
  + new java.util.Date() + "</date><paths>")
message  = ""
changes.eachLine {
   line ->
     if (line.startsWith("./")) line = line.substring(2)
     if (!".checksums".equals(line)) {
       out.println("<path action=\"M\">" + line + "</path>")
       message += line + "\n"
    }
   }
  out.println("</paths><msg>" + message + "</msg></logentry></log>")
}

// get an instance of the SubversionChangeLogParser
import java.net.URL;
import java.net.URLClassLoader;
baseDir = new File(jenkins.model.Jenkins.getInstance().getRootDir(),
  "plugins/subversion/WEB-INF/")
urls = new URL[2];
urls[0] = new File(baseDir, "classes/").toURI().toURL() 
urls[1] = new File(baseDir, "lib/svnkit-1.3.4-hudson-2.jar").toURI().toURL() 
loader = new URLClassLoader(urls,  manager.getClass().getClassLoader())
svn = loader.loadClass("hudson.scm.SubversionChangeLogParser").newInstance()

// force the current build to take that parser, parse the changelog.xml,
// and force it down AbstractBuild's throat, too
scmField = manager.build.getClass().getSuperclass().getSuperclass().getDeclaredField("scm")
scmField.setAccessible(true)
scmField.set(manager.build, svn)

changeSet = svn.parse(manager.build, changelog)
changeSetField = manager.build.getClass().getSuperclass().getSuperclass().getDeclaredField("changeSet");
changeSetField.setAccessible(true)
import java.lang.ref.WeakReference;
if (changeSetField.getDeclaringClass().isAssignableFrom(WeakReference.class))
  changeSet = new WeakReference(changeSet)
changeSetField.set(manager.build, changeSet) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T17:54:08.907

又是我 ：）

在最简单的一端，只需在侧边栏添加另一个链接，以及“更改”和“状态”链接，有一个**侧边栏链接插件**
[https://wiki.jenkins-ci.org/display/JENKINS /侧边栏链接+插件](https://wiki.jenkins-ci.org/display/JENKINS/Sidebar-Link+Plugin)

它允许您在作业页面上创建一个链接（但不是单独的作业运行），该链接可以链接到绝对或相对（到作业的配置）位置。您可以通过将以下内容放入链接 URL 中来引用工作区中的文件：

```
ws/my_output.txt 
```

然而，这意味着该文件始终存在于工作空间中，并且充其量它会显示上次作业执行的结果。此外，单击链接会将您带到工作区中的文件，它不会再显示 Jenkins UI 的其余部分。

更高级的方法是使用 Groovy 脚本
[https://wiki.jenkins-ci.org/display/JENKINS/Groovy+Postbuild+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Groovy+Postbuild+Plugin)

查看示例 #1 和 #6
![在此处输入图像描述](../Images/c1fd93cf00493c2e31afb9bc0bcd37f4.png) ![在此处输入图像描述](../Images/dac9de70a0071447c8578ac0e15a7dcd.png)

黄色感叹号图标旁边的东西是这个插件添加到工作状态页面的东西，这是完全可定制的，并且允许 HTML 代码。然而，这需要了解 Groovy 脚本，但这些示例提供了足够的能力来快速完成一些事情

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2015-09-10T07:02:07.550

我创建了一个简单的詹金斯插件来做到这一点......

[https://github.com/rmalchow/changelog-appender](https://github.com/rmalchow/changelog-appender)

这需要创建一个自上次成功构建以来所有构建的变更集列表，并将它们写入文件，标题包含版本或构建号和日期。

更新：

这是针对 jenkins 的旧版本，并且很长时间没有更新（我们切换到 gitlab-ci），所以我删除了那个 repo。

# c# - 从 RESTful Web 服务获取响应

> ID：13631148
> 
> 赞同：0
> 
> 时间：2012-11-29T17:15:57.170
> 
> 标签：c#, asp.net, web-services

我有以下代码连接到 Web 服务并查询 API 以获得成功的结果。但我面临两个问题

1.  我无法捕获 XML 格式的响应。

2.  我无法从页面重定向回返回 URL。

请帮助 TIA

字符串网址 = "";

```
 string Method = "";

    string Group = "";

    string FormName = "";

    string return_url = "";

    Url = "https://abc.com/ws/";
    Method = "getRates";
    Group = "rates";
    FormName = "form1";
    return_url = "~/app/Public/PaymentTest.aspx?DR={DR}";

    NameValueCollection FormFields = new NameValueCollection();
    FormFields.Add("username", "xxx");
    FormFields.Add("password", "xxxx");
    FormFields.Add("pin", "xxxx");
    FormFields.Add("dest_country", "Kenya");
    FormFields.Add("return_url", return_url);

    Response.Write("<html><head>");
    Response.Write(string.Format("</head><body onload=\"document.{0}.submit()\">", FormName));
    Response.Write(string.Format("<form name=\"{0}\" method=\"{1}\" action=\"{2}\" >", FormName, "post", Url + Group + "/" + Method));

    for (int i = 0; i < FormFields.Keys.Count; i++)
    {
        Response.Write(string.Format("<input name=\"{0}\" type=\"hidden\" value=\"{1}\">", FormFields.Keys[i], FormFields[FormFields.Keys[i]]));
    }
    Response.Write("</form>");
    Response.Write("</body></html>");
    Response.End(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T18:01:31.290

将返回的 xml 加载到数据集中（注意：returnds），然后我检索 xml 响应，如下所示：

```
int i = 0;
string current = null;
for (i = 0; i <= returnds.Tables(0).Rows.Count - 1; i++) {
  if (Information.IsDBNull(returnds.Tables(0).Rows(i)("ValueOfXML")) == true) {
    current = "";} 
else {
    current = Convert.ToString(returnds.Tables(0).Rows(i)("ValueOfXML"));
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T18:12:23.357

您似乎正在尝试创建仅 HTML 的解决方案。（您使用 ASP.NET 生成 HTML 会分散注意力）。您将需要在 onload 上编写额外的 javascript——您可能不想提交表单，这会告诉浏览器您已完成该页面。您会想要进行 javascript Web 服务调用，jquery 方式比原始 XmlHttp 更容易

参考：[如何从 jQuery 调用 Web 服务](https://stackoverflow.com/questions/861784/how-to-call-a-web-service-from-jquery)

# android - 如何在手指上进行流畅快速的绘图

> ID：13631149
> 
> 赞同：0
> 
> 时间：2012-11-29T17:16:01.003
> 
> 标签：android, draw, android-canvas

在使用画布的手指绘画应用程序中，当我打电话时`invalidate()`，绘图质量很好，但绘图速度很慢，当我打电话时`invalidate(mRect)`，我有类似手部振动的感觉。
![在此处输入图像描述](../Images/813f9c94c7021b061bdfc5c729a0d5c2.png)

```
private boolean touch_move(int x, int y)
    {

        float dx = Math.abs(x - mX);
        float dy = Math.abs(y - mY);            
        int rr = 10;
        Rect mRect = new Rect();
        if (dx >= TOUCH_TOLERANCE || dy >= TOUCH_TOLERANCE)
        {
            mPath.quadTo(mX, mY, (x +mX) / 2, (y + mY) / 2);
            TabiCal.myPoints.add(new MyPoint(x, y, mX, mY, TabiCal.color_flag,
                    TabiCal.thick_flag, 2));                
            mRect.set(x - rr, y - rr, x + rr, y + rr);
            invalidate(mRect);
            mX = x;
            mY = y;         
        }
        return true;
    } 
```

我用过`antiAlias(true)`，但没有帮助我。什么是解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T01:01:54.580

你可以看看我前段时间给出的一个答案： [Android How to draw a smooth line following your finger](https://stackoverflow.com/questions/8287949/android-how-to-draw-a-smooth-line-following-your-finger/8289516#8289516)

或者Square工程师的这篇文章，非常不错：[http ://corner.squareup.com/2010/07/smooth-signatures.html](http://corner.squareup.com/2010/07/smooth-signatures.html)

# java - 序列化 JTextPane 的 Document 是否序列化 JTextPane 的侦听器？

> ID：13631150
> 
> 赞同：2
> 
> 时间：2012-11-29T17:16:05.330
> 
> 标签：java, swing, serialization, listener, jtextpane

我正在序列化 a`JTextPane`以`Document`将其样式文本保存到数据库中。我有一个`caretListener`附加的`JTextPane`，我想知道是否序列化这个`Document`序列化也是`caretListener`如此。我需要知道这一点的原因是因为自定义 caretListener 类包含`JComboBox`并且当我尝试序列化时出现以下异常：

```
java.io.NotSerializableException: com.apple.laf.AquaComboBoxUI 
```

我怀疑如果 Document 包含 caretListener，这就是这个异常的原因。

这是序列化它的代码：

```
DefaultStyledDocument doc = (DefaultStyledDocument) getCellEditor().getCellEditorValue();
doc.setDocumentFilter(null);
ByteArrayOutputStream bos = new ByteArrayOutputStream();
ObjectOutputStream oos = new ObjectOutputStream(bos);
oos.writeObject((DefaultStyledDocument) doc);
oos.flush();

byte[] data = bos.toByteArray();

oos.close();
bos.close(); 
```

然后我只是保存`data`在数据库中。

**附录**

这是自定义插入符号侦听器：

```
MyTextPane textpane = new MyTextPane();
textpane.addCaretListener(new caretListener());
public class caretListener implements CaretListener {

    MyTextpane textArea;
    JToggleButton boldbutton;
    JToggleButton italicbutton;
    JToggleButton underlinebutton;
    JComboBox fontscomboBox;
    JComboBox fontSizecombobox;
    // Methods
    ...
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T17:55:32.613

`Document`通过序列化`Writer`和反序列化`Reader`。使用套件的`JTextPane`'s`getEditorKit()`和 write/read 方法。

# java - 在android开发中将字符串值从一个活动传递到另一个活动

> ID：13631155
> 
> 赞同：-1
> 
> 时间：2012-11-29T17:16:23.500
> 
> 标签：java, android, android-intent, pass-data

嗨，我试图将用户从一个活动输入的字符串值传递到另一个活动，并将这些值显示在第二个活动的表格中，但是当我们移动到第二个活动时，表格显示但它是空的，我想知道是否有人可以帮助我找到我的代码中的问题所在，

```
<h1>Activity 1 where user enters information</h1>  

`package com.example.scheduler;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;

public class Save extends Activity implements OnClickListener
{
    Button sbm,bk;
    EditText fname,lname,course,time,inst,title;
    private static final int table = 1810;
    private String newfname,newlname,newcourse,newtitle,newtime,newinst;

    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.newb);
        sbm = (Button) findViewById(R.id.button1);
        sbm.setOnClickListener(this);
        bk = (Button) findViewById(R.id.button2);
        bk.setOnClickListener(this);
        fname = (EditText) findViewById(R.id.editText1);
        lname = (EditText) findViewById(R.id.editText2);
        course = (EditText) findViewById(R.id.editText3);
        time = (EditText) findViewById(R.id.editText4);
        inst = (EditText) findViewById(R.id.editText5);
        title = (EditText) findViewById(R.id.editText6);
    }

    public void onClick(View v)  
    {
        v.getId();
        try
        {
        Intent launch = new Intent(Save.this,table.class);
        Bundle myData = new Bundle();

        if(sbm.isPressed())
        {
            if(fname.getText().toString().length()==0||lname.getText().toString().length()==0||course.getText().toString().length()==0||time.getText().toString().length()==0
            ||inst.getText().toString().length()==0||title.getText().toString().length()==0)
            {
                Toast.makeText(this, "Please fill in all fields!", Toast.LENGTH_LONG).show();
            }else
            {
                newfname = fname.getText().toString();
                newlname = lname.getText().toString();
                newcourse = course.getText().toString();
                newtime = time.getText().toString();
                newinst = inst.getText().toString();
                newtitle = title.getText().toString();
                myData.putString("fname", newfname);
                myData.putString("lname", newlname);
                myData.putString("course", newcourse);
                myData.putString("time", newtime);
                myData.putString("instructor", newinst);
                myData.putString("title", newtitle);
                startActivityForResult(launch,table);
            }
        }
        }catch(Exception e)
        {
            Toast.makeText(getBaseContext(), e.getMessage(),
                    Toast.LENGTH_LONG).show();
        }
        if(bk.isPressed())
            {
                finish();
            }
    }
}
`  

<h1>Activity 2 where information is displayed</h1>  

    package com.example.scheduler;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.widget.TextView;
import android.widget.Toast;

public class table extends Activity
{
    TextView titletv,fnametv,lnametv,coursetv,timetv,insttv;

    public void onCreate(Bundle savedInstance)
    {
        super.onCreate(savedInstance);
        setContentView(R.layout.schedule_table);
        titletv = (TextView) findViewById(R.id.titleTextView);
        fnametv = (TextView) findViewById(R.id.fnameTextView);
        lnametv = (TextView) findViewById(R.id.lnameTextView);
        coursetv = (TextView) findViewById(R.id.courseTextView);
        timetv = (TextView) findViewById(R.id.timeTextView);
        insttv = (TextView) findViewById(R.id.instructorTextView);
        try
        {
        Intent myLocalIntent = getIntent();
        Bundle myBundle = myLocalIntent.getExtras();

        String strfname = myBundle.getString("fname");
        String strlname = myBundle.getString("lname");
        String strcourse = myBundle.getString("course");
        String strtime = myBundle.getString("time");
        String strinst = myBundle.getString("instructor");
        String strtitle = myBundle.getString("title");
        titletv.setText(strtitle);
        fnametv.setText(strfname);
        lnametv.setText(strlname);
        coursetv.setText(strcourse);
        timetv.setText(strtime);
        insttv.setText(strinst);
        myLocalIntent.putExtras(myBundle);
        setResult(Activity.RESULT_OK, myLocalIntent);
        }catch(Exception e)
        {
            Toast.makeText(getBaseContext(), e.getMessage(),
                    Toast.LENGTH_LONG).show();
        }
        finally
        {

        }
    }
}` 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T17:19:56.097

你必须把`bundle`里面`Intent`

```
launch.putExtras(myData) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T17:21:49.733

您声明：

```
 Bundle myData = new Bundle(); 
```

但是您正在使用表格开始活动：

```
 startActivityForResult(launch,table); 
```

将其更改为：

```
 launch.putExtras(myData) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-17T13:52:49.000

如果这仍然是开放的并且正在被查看，那么您真的应该为此使用共享首选项。[http://developer.android.com/guide/topics/data/data-storage.html#pref](http://developer.android.com/guide/topics/data/data-storage.html#pref)

比意图更简单、更高效，并且通过共享首选项，您可以将数据传递给片段和活动，反之亦然

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T17:44:22.533

您可以像这样在主要活动中声明字符串

```
static String yourString=""; 
```

将值分配给您的字符串

```
yourString="what_Ever_Value"; 
```

并从其他活动中调用它，如下所示：

```
String yourString=packgeName.ClassName.yourString; 
```

# windows - 是否有适用于 Windows 的免费高性能 Fortran (HPF) 编译器？

> ID：13631159
> 
> 赞同：-1
> 
> 时间：2012-11-29T17:16:38.743
> 
> 标签：windows, fortran, hpf

我必须在 HPF 中做作业，但我找不到适用于 Windows 的免费编译器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T17:25:02.023

我很确定这个编译会支持它，即使它不在描述中：

[http://www.pgroup.com/products/pvf.htm](http://www.pgroup.com/products/pvf.htm)

也许打电话给他们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T19:57:22.470

还没有人提到明显的...... [MinGW 和 gfortran](http://gcc.gnu.org/wiki/GFortranBinaries)。免费而且还不错。

[英特尔 Fortran](http://software.intel.com/en-us/intel-composer-xe/)也可免费用于非商业用途（但它必须是真正的非商业用途 - 学术工作不算在内）。

[G95](http://www.g95.org/)是另一个主要的免费/开源竞争者，值得一试——但我只有第一手在 Windows 上使用 gfortran 取得了成功（只是因为我从未尝试过 g95）。

我仍在寻找可以在 Windows 上构建 64 位 Matlab mex 文件的免费 Fortran 编译器。英特尔 Fortran 可以工作，gfortran 可以在 32 位上工作（需要做一些工作），但我无法让 gfortran 在 64 位上工作……如果有人知道，我很想听听！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-29T18:52:03.780

[这个](http://www.pathscale.com/ekopath4-open-source-announcement)呢。他们的首页说他们已经开源了。你可以看看他们。还有一种叫做*ADAPTER*的东西，但我没有找到任何有用的实时链接。你可能会尝试追捕它。SourceForge 或其他存储库上也可能有一些开源项目。

干杯！

# php - 我可以从另一个函数返回返回值吗？

> ID：13631161
> 
> 赞同：0
> 
> 时间：2012-11-29T17:16:55.343
> 
> 标签：php, oop

我有这样的课：

```
class Example {

    private function _test($value)
    {
         if ($value == 'xyz') return FALSE;
    }

    public function check()
    {
        $this->_test('xyz');

        // more code follows here...
    }

} 
```

基本上我想要做的是“冒泡”方法_test（）的返回值FALSE作为方法check（）的实际返回值，以便调用

```
$this->_test('xyz'); 
```

将返回 FALSE

```
return $this->_test('xyz'); 
```

行不通，因为如果值与“xyz”不匹配，我不想返回。

这有可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T17:20:41.510

我不明白 100% 你在找什么，所以如果这不是你的意思，请多解释一下你想要什么。

```
public function check()
{
    if($this->_test('xyz') === FALSE){
         return FALSE;
    }

    // more code follows here...
} 
```

# c - 在C中打印字节字符

> ID：13631164
> 
> 赞同：1
> 
> 时间：2012-11-29T17:16:57.040
> 
> 标签：c, string, byte

我有一个输入 c 字符串，它似乎以字节或八位字节为单位。当我通过做打印它时

```
printf("this is string[%s]\n", inputCstr); 
```

它不会打印整个内容。所以我试着像循环一样

```
for (int i=0; i<len; i++) {
    printf("inputCstr[%d] = %c", i, inputCstr[i]);
} 
```

这循环整个字符串，但这实际上跳过了一些索引。例如，如果字符串是“abcdefg”，它会给出类似

```
inputCstr[0] = a
inputCstr[2] = c
inputCstr[5] = f 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T17:30:13.610

这是因为字节数组中有控制字符由控制台专门解释。

在您的情况下，您可能遇到过例如`\r`或类似的情况，将光标移动到第一列并且下一行覆盖前一行。

你可以试试：

```
for (int i=0; i<len; i++) {
    printf("inputCstr[%d] = %02X\n", i, (unsigned char)inputCstr[i]);
} 
```

并查看真实代码。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-29T17:29:21.313

来自维基百科（[http://en.wikipedia.org/wiki/Null-terminated_string](http://en.wikipedia.org/wiki/Null-terminated_string)）：

> 在计算机编程中，以空字符结尾的字符串是存储为包含字符的数组并以空字符（'\0'，在 ASCII 中称为 NUL）结尾的字符串。替代名称是 C 字符串，它指的是 C 编程语言和 ASCIIZ（请注意，C 字符串并不意味着使用 ASCII）。
> 
> 通过搜索（第一个）NUL 字节找到 C 字符串的长度

在您的情况下，我不得不说您可能正在使用一个宽字符字符串（unicode），它为每个字符使用 2 个字节。这就是为什么在打印字符串时只看到第一个字符（因为第二个字节是 '\0'）。

为了正确打印字符串，您必须选择：

1.  将字符串从wide-char更改为char（wchar to char）
2.  使用 wprintf 而不是 printf 以打印宽字符字符串

祝你好运，

塔尔。

# php - 无法从 PHP 中的 URL 末尾删除 & 符号

> ID：13631167
> 
> 赞同：0
> 
> 时间：2012-11-29T17:17:01.553
> 
> 标签：php, regex

我一直在用锤子打断我的头来解决这个问题，但这里就可以了。我目前正在抓取从各种来源获得的一些页面，并且这些 URL 的末尾通常附有 Google Analytics 废话，以这种方式：

```
&utm_medium=something&utm_source=other 
```

我正在尝试从 URL 中删除这些内容。由于这些附加在 URL 的末尾，我这样做：

```
 $pattern = "^utm_source.*^";
 $interUrl = preg_replace($pattern, '', $url); 
```

utm_source 是用于谷歌分析的 URL 的必需部分。这是我的问题出现了。出于某种原因，我无法让模式匹配这样的＆符号：“^\&utm_source.*^”。没有＆符号（及其转义），我得到匹配。所以我想“没什么大不了的，我只是一个 substr”，如下所示：

```
 $finalUrl = substr($interUrl, 0, strlen($interUrl) - 1); 
```

但什么也没有发生。我将 -1 数字增加到 -3 甚至 -4 但没有任何内容被切断，甚至连字符后面的字符也没有。我也尝试过 str_replace 甚至 rtrim 但没有一个可以过滤掉＆符号。这令人沮丧，因为我留下了错误的 URL。不仅如此，当我尝试卷曲页面时，我得到一个 404，而如果我通过浏览器访问该站点，我会被重定向到正确的页面。

关于为什么会发生这种情况的任何想法？

**回答**

虽然所有的答案都很好而且技术性很强，但我一直在尝试使用正则表达式，直到我弄明白了一些事情。由于某种原因（可能是我的检索方法），这些 URL 被编码了，所以我最终调整了正则表达式，如下所示：

```
$pattern = "/&amp;utm_source.*/"; 
```

它有效！感谢大家的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T17:20:57.007

在您的情况下`&`，在 reg 表达式前面添加可以达成交易`^&utm_source.*^`

```
<?php 
  $ptn = "^&utm_source.*^";
  $str = "http://someurl.com?index.php&utm_medium=something&utm_source=other";
  $rpltxt = "";
  echo preg_replace($ptn, $rpltxt, $str); // http://someurl.com?index.php&utm_medium=something
?> 
```

我通常使用[`explode()`](http://phpfiddle.org/main/code/yzf-9b5), 来简化事情，但是你需要重新组合 url

但是您可以尝试[`parse_url()`](http://us3.php.net/parse_url)代替正则表达式，在这种情况下它可能更合适。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T17:35:53.650

您可以使用[`parse_str`](http://php.net/manual/en/function.parse-str.php)和的组合[`http_build_query`](http://www.php.net/manual/en/function.http-build-query.php)

```
parse_str($url, $vars);

if (isset($vars['utm_source'])) unset($vars['utm_source']);
// unset any other unwanted params the same way...

$finalUrl = http_build_query($vars); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T17:42:28.603

通过像其他人建议的那样使用 parse_url ：

```
<?php
$str = 'http://www.mydomain.com/something.php?herp=derp&some=thing&utm_medium=something&utm_source=other';
$url_arr = parse_url($str);
$query_arr = explode('&', $url_arr['query']);
$final_arr = array();

for($i=0;$i<count($query_arr);$i++) {
        $tmp_arr = explode('=', $query_arr[$i]);
        if(!preg_match('/^utm_/', $tmp_arr[0])) {
                $final_query[] = $query_arr[$i];
        }
}

echo $finished_url = $url_arr['scheme'] . '://' . $url_arr['host'] . $url_arr['path'] . '?' . implode('&', $final_query);

//output: http://www.mydomain.com/something.php?herp=derp&some=thing 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T18:01:26.827

虽然所有的答案都很好而且技术性很强，但我一直在尝试使用正则表达式，直到我弄明白了一些事情。由于某种原因（可能是我的检索方法），这些 URL 被编码了，所以我最终调整了正则表达式，如下所示：

```
$pattern = "/&amp;utm_source.*/"; 
```

它有效。

为什么我没有早点抓住它？我在 laravel 上运行我的应用程序，每当我使用日志记录系统时，它似乎使用的是实际的 & 符号而不是 & 因此看起来一切都很好。

有一次，我去检查数据库以了解正在发生的事情，并注意到我的 URL 以 & 而不是 & 结尾（它在我的视图中以这种方式显示）。

谢谢大家！

# bash - 添加 .bashrc 文件的路径？

> ID：13631173
> 
> 赞同：15
> 
> 时间：2012-11-29T17:17:25.747
> 
> 标签：bash, path, edit, fedora

目前我正在尝试将 ns-2 的路径添加到我的 .bashrc 文件中，我已经安装了 ns-allinone-2.34 但命令 ns 给出了结果：进入 shell 时找不到命令。

这是我的 .bashrc 文件当前的样子，我使用 gedit 对其进行了编辑：

```
# .bashrc

# Source global definitions
if [ -f /etc/bashrc ]; then
. /etc/bashrc
fi

# User specific aliases and functions
export PATH=/home/michael/ns-allinone-2.34/bin/ns:/home/michael/ns-allinone-2.34/bin/nam:$PATH 
```

有人可以解释为什么这不起作用或可能的解决方案是什么？我正在使用 Fedora 17。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-11-29T18:07:17.147

此外，如果您像这样导出路径，您也想保留旧的 PATH，因此也要包含它。

```
export PATH=$PATH:/home/michael/ns-allinone-2.34/bin/ 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-29T17:29:27.833

`PATH`应该包含二进制文件的目录*，*而不是二进制文件本身。

例如，在上面：

```
export PATH=/home/michael/ns-allinone-2.34/bin/ns:.. 
```

实际上应该是：

```
export PATH=/home/michael/ns-allinone-2.34/bin:... 
```

# sql-server - 确定存储过程的依赖关系。

> ID：13631177
> 
> 赞同：0
> 
> 时间：2012-11-29T17:17:41.877
> 
> 标签：sql-server, tsql, stored-procedures, dependencies, proc

有没有办法（或者，理想情况下，查询）来确定存储过程访问的所有表，包括由它自己调用的其他存储过程访问的那些表（以及它们调用的那些，等等。在调用堆栈中）。

如果有人可以制造这样的查询，是否还可以确定是否访问表以进行更新、选择或删除？

是否有可能确定相同的观点被投入到混合中？

我的存储过程不包含任何动态构造的调用，因此至少稍微简化了它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-06T02:53:30.170

试试这个链接：

[如何在 sql-server 中查找表的所有依赖项](http://sqlhints.com/2013/05/06/how-to-find-all-dependencies-of-a-table-in-sql-server/)

或者这个来搜索文本：

```
DECLARE @Search varchar(255)
SET @Search='cost_centre'
SELECT DISTINCT
    o.name AS Object_Name,o.type_desc
    FROM sys.sql_modules        m 
        INNER JOIN sys.objects  o ON m.object_id=o.object_id
    WHERE m.definition Like '%'+@Search+'%'
    ORDER BY 2,1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T20:11:18.113

我目前无法访问 sql-server，但我知道您可以检查依赖项 - 我已经这样做了，确定访问表的视图。

看看`sys.all_objects`和`sysdepends`。你可以加入他们`object_id`和`depid`。包括`type`-column `sysdepends`，您应该能够获取由 SP 访问的表。

明天会看看，如果仍然有必要的话 - 但你应该能够检查上述信息来获取你的信息！

@edit：刚刚看到[Aaron](https://stackoverflow.com/users/61305/aaron-bertrand)的评论。一切都在那里解释。也许在我的情况下获得正确的依赖关系是幸运的；）

# javascript - jquery DatePicker - 数字月份下拉菜单

> ID：13631179
> 
> 赞同：1
> 
> 时间：2012-11-29T17:17:45.010
> 
> 标签：javascript, jquery, date, dom, datepicker

我的日期选择器有一个 HTML 输入元素……很正常

```
<input type="text" id="from_date"> 
```

以及允许月份/年份更改的非常正常的设置

```
$('#from_date').datepicker({
    dateFormat: "mm/yy",
    changeMonth: true,
    changeYear: true
}); 
```

但月份下拉菜单显示的名称如“Jan”而不是“1”或“01”

如何将下拉值更改为数字表示？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-29T17:35:03.330

在此处检查日期选择器选项：http: [//api.jqueryui.com/datepicker/](http://api.jqueryui.com/datepicker/)

```
$('#from_date').datepicker({
    dateFormat: "mm/yy",
    changeMonth: true,
    changeYear: true,
    monthNames: ["1","2","3","4","5","6","7","8","9","10","11","12"],
    monthNamesShort: ["1","2","3","4","5","6","7","8","9","10","11","12"]
}); 
```

这可能是一个解决方案。

# mysql - MySQL 中的大唯一键

> ID：13631190
> 
> 赞同：3
> 
> 时间：2012-11-29T17:18:12.953
> 
> 标签：mysql, database, utf-8, myisam

我正在为我正在创建的网站实现一个非常简单的用户数据库，自然我想确保我的工作尽可能接近“最佳实践”。数据库在 MySQL 中，我正在为表定义而苦苦挣扎。

```
CREATE TABLE IF NOT EXISTS 'users' (
  `user_id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT 'auto incrementing user_id of each user, unique index',
  `user_email` varchar(254) COLLATE utf8_unicode_ci COMMENT 'user''s email',
  `user_password_hash` text COLLATE utf8_unicode_ci NOT NULL COMMENT 'user''s password in salted and hashed format',
  PRIMARY KEY (`user_id`),
  UNIQUE KEY `user_email` (`user_email`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='user data' AUTO_INCREMENT=1 ; 
```

我从 php-login.net 借用了这个表定义，并对其进行了编辑以使 user_email 成为唯一键（原始将其作为文本字段，非唯一）。

在做了一些阅读之后，我看到一些评论说拥有这么大的唯一键/索引（254 * 3 字节）意味着数据库设计不好，而 MySQL 的最大键长度为 1000 字节的事实让我觉得我做错了什么。这个数据库可以改进还是它现在的方式很好？

我不知道 MySQL 中索引的内部工作原理以及所涉及的开销量，所以我认为这么大的键很可能效率不高。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T17:23:28.047

使电子邮件成为唯一索引可以作为约束并改善电子邮件查找，但为什么不减小电子邮件字段的大小呢？您计划拥有多少个 254 字符的电子邮件地址，您可以通过将列设为 varchar(128) 来牺牲它们吗？我不会将它用作您的主键，请保持您的自动递增 bigint。

至于其他最佳实践，为什么要附加`user_`到用户表中的每一列？用户表中是否有任何列不适用于用户记录？只需使用`id`等`email`...在编写查询时`user.id`， and`user.email`比`user.user_id`and更干净`user.user_email`。此外，当您在其他表中使用 as 外键时，您只需将它们称为`user_id`，从中我可以看出外键是表的`id`列`user`。在整个数据库中始终如一地执行此操作。

# sparql - 使用 dotnetRDF 查询 dbpedia sparql 端点 - RDFParseException

> ID：13631193
> 
> 赞同：3
> 
> 时间：2012-11-29T17:18:19.130
> 
> 标签：sparql, dbpedia, dotnetrdf

当我使用 (dotnetRDF)在[http://dbpedia.org/sparql](http://dbpedia.org/sparql)上执行以下查询时，`VDS.RDF.Query.SparqlRemoteEndpoint.QueryWithResultSet()`一切正常。

```
SELECT ?film ?p ?o
WHERE {
    ?film <http://purl.org/dc/terms/subject> <http://dbpedia.org/resource/Category:Japanese_films> .
    ?film ?p ?o
}
limit 500 
```

但是当我尝试使用这个查询时`SparqlRemoteEndpoint.QueryWithResultGraph()`

```
CONSTRUCT { ?film ?p ?o}
WHERE {
    ?film <http://purl.org/dc/terms/subject> <http://dbpedia.org/resource/Category:Japanese_films> .
    ?film ?p ?o
}
limit 500 
```

我收到带有消息的 RdfParseException

```
"[Line 456 Column 29] Unexpected Character (Code 8211) – was encountered" 
```

我尝试为 ResultsAcceptHeader 和 RdfAcceptHeader 属性设置值，但没有成功。

如果在第二个查询中我将限制从 500 更改为例如 100，则它可以正常工作。

你可以帮帮我吗？

* * *

现在，如果 limit 的值为 456\. `[Line 495 Column 25] Unexpected Character (Code 8211) – was encountered`，则会引发异常，这是第 495 行`ns19:???_???5555 .`。第 25 列的值为`_`

在这里，您有 wiki 格式的数据[http://dbpedia.org/page/Interstella_5555:_The_5tory_of_the_5ecret_5tar_5ystem](http://dbpedia.org/page/Interstella_5555:_The_5tory_of_the_5ecret_5tar_5ystem)，我想，财产价值存在问题`dbpprop:kanji`（因ターステラ5555）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T00:58:53.597

DBPedia 已知编码问题，可能只是 DBPedia 正在生成无用数据。

您可以尝试在 dotNetRDF 中进一步调试此问题的方法是使用以下代码包装调用查询的代码：

```
try
{
   Options.HttpDebugging = true;
   Options.HttpFullDebugging = true;

  //Try your query here
}
finally
{
   Options.HttpDebugging = false;
   Options.HttpFullDebugging = false;
} 
```

这将导致解析失败（出现不同的错误），但会将原始 HTTP 响应转储到控制台以进行调试。如果您可以编辑您的问题以包含转储第 456 行周围的内容，那么人们可能会为您提供更多帮助。

**编辑**

因此，怀疑问题确实出在 DBPedia 产生无用数据，而不是 dotNetRDF 本身。

当我以 Turtle 格式下载您提到的文件并尝试解析它时，我收到了相同的错误消息，它与以下行有关：

```
ns6:Avalon_–_Spiel_um_dein_Leben , 
```

虽然乍一看可能看起来有效（因为`-`在前缀名称中允许使用简单的连字符），但问题是它不是连字符，它实际上是字符代码 8211（正如 AndyS 提到的 2013 年十六进制），这是不可接受的前缀名称字符的范围。

顺便说一句，我也用 Jena 的 Turtle 解析器确认了这一点，以确保它确实不是 dotNetRDF 问题。

因此，基本上 DBPedia 数据已损坏，您可以尝试通过适当地设置接受标头来强制它向您发送回 RDF/XML 或 NTriples，但不能保证这些格式的数据也不会变坏。我建议您联系 DBPedia 人员将此报告为错误 - dbpedia-discussion@lists.sf.net

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T10:18:57.467

看到第 456 行会很有用。尝试使用 wget 发出请求（它对 URL 进行编码，curl 没有，使其更易于从命令行使用）。

Unicode 代码点 8211 是 EN DASH（十六进制 2013）。

CONSTRUCT 中的 LIMIT 是图形模式中的行数，而不是 CONSTRUCT 模板。您可能会得到更多的三元组，这些三元组被 SELECT ... LIMIT 覆盖。在 SELECT 中尝试更大的 LIMIT 并查看它是否中断。

# c - spinlock_t 在第一次使用时已经锁定

> ID：13631194
> 
> 赞同：3
> 
> 时间：2012-11-29T17:18:23.157
> 
> 标签：c, linux-kernel, spinlock

嗨，我是第一次编写内核（2.6），我在使用自旋锁时遇到了问题。

我正在尝试添加这个系统调用（inserisci_nodo），它外部化一个结构（一个ibrid列表哈希表）并尝试在这个结构中添加一个节点（Persona），如果节点已经存在，它将被更新。

我在第一次“更新”时遇到问题，事实上，如果我尝试插入所有新节点，它就可以工作！但是如果我尝试插入一个已经存在的节点，这似乎已经被锁定了。我不明白为什么。

这是代码。

```
 asmlinkage long sys_inserisci_nodo(key_t id, char* nome, int eta){
    persona *p;
    spin_lock(&htable.lock);
    printk("<3> PRESO SPIN_LOCK TABELLA\n");

    if((p=lookup(id))!=NULL){   //Update an already existent node
        printk("<3> NODO %d, AGGIORNAMENTO IN CORSO....\n",id);    <--- system locked.
        spin_lock(&(p->lock));
        printk("<3> PRESO SPIN_LOCK NODO %d\n",id);

        p->eta=eta;
        strcpy(p->nome, nome);
        printk("<3> NODO %d, AGGIORNAMENTO... OK\n",id);

        spin_unlock(&p->lock);

        printk("<3> RILASCIATO SPIN_LOCK NODO %d\n",id);
        spin_unlock(&htable.lock);
        printk("<3> RILASCIATO SPIN_LOCK TABELLA\n");

        return p->id;
    }
    else{       //Insert new node.
        p = (persona *) kmalloc(sizeof(persona),GFP_KERNEL);
        if(p==NULL){
            printk("<3> ERRORE NELL'ALLOCARE MEMORIA PER PERSONA CON ID: %d\n",id);
            spin_unlock(&htable.lock);
            printk("<3> RILASCIATO SPIN_LOCK TABELLA\n");
            return -1;
        }
        p->id = id;
        p->eta=eta;
        p->nome = (char*) kmalloc(sizeof(nome),GFP_KERNEL);
        strcpy(p->nome, nome);
        printk("<3> NODO %d, AGGIUNTO\n",id);

        int h = hashfunc(id);
        p->next=htable.persone[h];
        htable.persone[h] = p;
        spin_unlock(&htable.lock);
        printk("<3> RILASCIATO SPIN_LOCK TABELLA\n");
        return h;   

    }
} 
```

对不起，代码上的意大利语，我在代码上添加了一些英文注释。

这是两个结构（散列表和“角色”（节点））。

```
typedef struct _persona{
    key_t id;
    char *nome;
    int eta;
    spinlock_t lock;
    struct _persona *next;
}persona;

typedef struct _hashtable{
    spinlock_t lock;
    int occupati;
    persona* persone[MAX_NUM];
}hashtable; 
```

“lookup(key)”和“hash(key)”是从结构中获取节点的两个简单函数。

我希望你对此有一个想法:)

再见！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T17:22:48.817

您需要初始化自旋锁：

```
p->id = id;
p->eta=eta;
p->nome = (char*) kmalloc(sizeof(nome),GFP_KERNEL);
spin_lock_init(&p->lock); // <- don't forget to initialize the locks! 
```

# php - 从类内的函数传递变量并在类外回显

> ID：13631199
> 
> 赞同：2
> 
> 时间：2012-11-29T17:18:45.997
> 
> 标签：php, class, function, variables

说我有这个代码：

```
class cats {

    function cats_suck() {
        $this->cats = "monkeys";
    }

}

$cats = new cats;
$cats->cats_suck();
echo $cats->cats; //Monkeys? 
```

我想传递`$cats`到我的班级之外，我通常只返回 $cats 然后回显函数，但我的代码中有很多变量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T17:26:28.177

您可以添加一个吸气剂：

```
function getcatmonkeys() {
    return $this->cats;
} 
```

那么：

```
$cats = new cats;
$cats->cats_suck();
echo $cats->getcatmonkeys(); 
```

* * *

或者您可以将所有私有数据存储在一个数组中，并添加一个神奇的方法来获取：

```
private $data = array();

function cats_suck() {
    $this->data['cats'] = "monkeys";
}

public function __get($name)
{
    return $this->data[$name];
} 
```

那么：

```
$cats = new cats;
$cats->cats_suck();
echo $cats->cats; //Monkeys 
```

哪种方式违背了拥有私人的目的，但我们不要质疑为什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T17:29:26.447

将 $cats 定义为类中的公共变量：

```
class cats {
    public $cats;

    function cats_suck() {
        $this->cats = "monkeys";
    }

} 
```

# javascript - 中心对齐的跨浏览器问题

> ID：13631200
> 
> 赞同：1
> 
> 时间：2012-11-29T17:18:48.077
> 
> 标签：javascript, html, css

我是编码新手，在使页面在所有浏览器上正确显示时遇到问题。现在它可以完美地与 IE 配合使用，但是当我在 Firefox 或 Chrome 中打开时会丢失格式。

这是我正在使用的代码的摘录：

```
 <style type="text/css">

#headerIMG {
    padding:0;
    margin:0;
    margin-bottom:15px;
    width:100%;
    }
label {
    padding-right:10px;
    text-align:left;
    {
table   {
    width: 580px;
    margin: 0 auto;
    text-align: center;
    align: center;
    }

.centerspacer {
    width:50%;
    }
tr  {
    width: 580px;
    margin: 0 px;
    }

td {
    padding:5px;
    }
.center {
    text-align:center;
    }
.button {
    float:none;
    display:block;
    margin: 10px auto;
    text-align:center;
    }

form    {
    width: 580px;
    margin: 0 auto;
    }
.rectbcontent {
    width: 580px;
    margin: 0 auto;
    text-align:center;
    }
table.tbody {
    width: 580px;
    margin: 0 auto;
    }
</style>

 <form action="https://test.salesforce.com/servlet/servlet.WebToLead?encoding=UTF-8" method="POST">

<input type=hidden name="oid" value="00DK0000005Iu4O">
<input type=hidden name="retURL" value="http://www.vela-ins.com">

<table class="tbody">

<tr>
<td class="centerspacer"> </td>
<td><label  for="first_name">First Name</label></td>
<td><input  id="first_name" maxlength="40" name="first_name" size="20" type="text" />          </td>
<td class="centerspacer"> </td>
</tr>
<tr>

<td class="centerspacer"></td>
<td><label  for="last_name">Last Name</label></td>
<td><input  id="last_name" maxlength="80" name="last_name" size="20" type="text" /></td>
<td class="centerspacer"> </td>
</tr>

<tr>
<td class="centerspacer"></td>
<td><label  for="email">Email</label></td>
<td><input  id="email" maxlength="80" name="email" size="20" type="text" /></td>
<td class="centerspacer"> </td>
</tr>

<tr>
<td class="centerspacer"></td>
<td><label  for="phone">Phone</label></td>
<td><input  id="phone" maxlength="15" name="phone" size="20" type="text" /></td>
<td class="centerspacer"> </td>
</tr>

 <tr>
<td class="centerspacer"></td>
<td><label  for="company">Company</label></td>
<td><input  id="company" maxlength="40" name="company" size="20" type="text" /></td>
<td class="centerspacer"> </td>
</tr>

<tr>
<td class="centerspacer"></td><td>
<label  for="city">City</label></td>
<td><input  id="city" maxlength="40" name="city" size="20" type="text" /></td>
<td class="centerspacer"></td>
</tr>

<tr>
 <td class="centerspacer"></td>
<td><label  for="state">State/Province</label></td><td><input  id="state" maxlength="20" name="state" size="20" type="text" /></td><td class="centerspacer"></td>
</tr>

 </table>
</select>
</form>

 <script>
var x = 'https://images.wrberkley.com/imageserver/WRBTS/VELA/site/images/';

var assignrule;
var imageURL;
var lob = getQueryVariable('product');

lob = lob.toLowerCase().charAt(0);

switch (lob)
{
//change this case to look at first character for construction
case 'c':

imageURL=x + 'Headlines/constructionheader.png';

assignrule='Construction';
break;

case 'm':
imageURL=x + 'Headlines/manufacturingheader.png';

assignrule="Manufacturing";
break;
case 'p': 
imageURL=x + 'Headlines/professionalliabilityheader.png';
assignrule="Professional Liability";
break;
case 'g':
imageURL=x + 'Headlines/generalcasualtyheader.png';
assignrule="General Casualty";
break;
default:
imageURL=x + 'header.png';
assignrule="default";
}
document.getElementById('headerIMG').src = imageURL
document.getElementById("00NK0000000Yqv2").value = assignrule;
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T17:36:38.883

`centerspacer`要使表格居中，请从标记中删除这些单元格，并仅使用

```
table {
    margin-left: auto;
    margin-right: auto;
} 
```

此外，您的 css 声明中存在语法错误`label`，这将导致以下任何样式崩溃。检查浏览器的错误控制台！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T18:15:00.253

对于相对定位的元素：

```
margin:0 auto; 
```

对于其他一切：

[http://jqueryui.com/position/](http://jqueryui.com/position/)

# javascript - 如何对 navigator.notification.alert 进行单元测试

> ID：13631203
> 
> 赞同：1
> 
> 时间：2012-11-29T17:18:54.397
> 
> 标签：javascript, qunit

我正在尝试对 javascript 函数进行单元测试，但无法伪造 navigator.notification.alert。有没有人有任何想法？这是我尝试过的代码：

```
navigator = {  
      notification = {  
          alert: function( textStatus, null, title, button ) {  
               alert("Success!);  
      }  
   }  
}; 
```

这似乎对我不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T00:18:20.590

您可以尝试*模拟*吸气剂（即定义一个自定义吸气剂）。这应该适用于大多数浏览器：

```
navigator.__defineGetter__('notification', function () {
    return {
        alert: function () {
            document.write("Success!");
        }
    }
}); 
```

[请参阅 jsFiddle](http://jsfiddle.net/odi86/L2Jce/)自己尝试一下。

# javascript - javascript中此菜单按钮的回调函数

> ID：13631204
> 
> 赞同：0
> 
> 时间：2012-11-29T17:18:56.807
> 
> 标签：javascript

它在这里定义

```
var CMenu = cc.Sprite.extend({

onClickCallback: null,

onClick: function (callback) {
    this.onClickCallback = callback;
},
handleTouches: function (touch, evt) {
    (this.hovered && this.onClickCallback) && this.onClickCallback();}); 
```

它在这里被调用

```
backMenu.onClick(function () {
    window.location.href = "http://www.test.com";
}); 
```

是`this.onClickCallback = this.onClickCallback()`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T17:22:39.907

`this.onClickCallback`只是指对象的`onClickCallback`属性`this`。这将为您提供功能本身。另一方面，`this.onClickCallback()` *执行*该属性将其视为一个函数并将返回其结果。

所以`this.onClickCallback`不一样`this.onClickCallback()`

# javascript - HTML5 应用缓存似乎在 Android 上缓存了它自己的清单文件

> ID：13631205
> 
> 赞同：3
> 
> 时间：2012-11-29T17:18:56.870
> 
> 标签：javascript, android, html, caching, manifest

我有一个问题，我确信这是一个仅限 Android 的错误，但我需要确定并需要解决它，所以我希望你们中的一个可以帮助:)

这就是发生的事情：

*   您在浏览器中访问索引文件
*   清单文件中声明的文件被缓存
*   一切正常，您可以离线访问文件
*   在这种情况下，您可以更改清单中的版本号，并且文件在浏览器中更新得很好（在交换和刷新之后），但是......
*   ...不在 Android 上（三星 Galaxy SIII Jelly Bean）。它卡住了，无论我做什么，都永远不会从服务器读取清单文件并再次更新，直到我清除设置中的缓存。

我认为它可能与其他缓存机制有关，但没有标头设置会有所帮助。

一个有趣的观察：

1.  我可以直接调用应用缓存清单并在浏览器中显示。我可以更改内容并再次刷新，这些更改会在浏览器中显示。
2.  然后我调用 index.html 文件来调用应用程序缓存，然后
3.  我重复第 1 步并直接调用应用程序缓存 - 现在它始终是一个正在显示的缓存版本！- 但不适用于 iOS、Firefox、Safari、Chrome 等。

这让我得出结论，浏览器缓存了清单文件本身，这有点糟糕......

代码可以在这里下载[http://bit.ly/Tw9Qqy](http://bit.ly/Tw9Qqy)

索引.html

```
<!--[if IEMobile 7 ]>    <html class="no-js iem7"> <![endif]-->
  <!--[if (gt IEMobile 7)|!(IEMobile)]><!--> <html class="no-js" manifest="app.manifest"> <!--<![endif]-->
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta charset="utf-8">
    <title>test</title>
    <meta name="description" content="">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta http-equiv="cleartype" content="on">

    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">

    <link rel="stylesheet" type="text/css" href="style.css">
  </head>
  <body>
    <div id="test">test4</div>
    <img src="test.png"/>
  </body>
</html> 
```

app.manifest 缓存清单 # v127

```
CACHE:
style.css
test.png

FALLBACK:

NETWORK:
* 
```

样式.css

```
#test{
  color: blue; 
} 
```

它真的没有什么花哨的，我试图把它煮沸并消除所有噪音。

非常感谢任何帮助、解决方案、尝试的想法等！:)

# php - PHP & curl_multi 和 CURLOPT_FILE = 没有文件内容

> ID：13631207
> 
> 赞同：1
> 
> 时间：2012-11-29T17:19:00.510
> 
> 标签：php, curl-multi

当使用 CURLOPT_FILE（将内容发送到文件）并行（使用 curl_mult_exec）处理调用时，当内容很小（不确定确切大小，但在本例中为 100 - 300 字节）时，文件内容始终为 0。

通话结束后，我必须在文件上调用 fclose() 才能写入内容。

使用普通 curl_exec 内容被正确写入。我在 ubuntu 上使用 PHP 5.3.10。

这是一个错误，预期的行为吗？我在网上找不到与此相关的任何内容

# c# - 将 JSON 对象层次结构反序列化为 Dictionary 的层次结构

> ID：13631208
> 
> 赞同：4
> 
> 时间：2012-11-29T17:19:28.010
> 
> 标签：c#, json, windows-8

我在**.NET for WinRT (C#)**中，我想将 JSON 字符串反序列化为 a `Dictionary<string, object>`，稍后可以将字典值转换为实际类型。JSON 字符串可以包含对象层次结构，我也希望包含子对象`Dictionary<string, object>`。

这是它应该能够处理的示例 JSON：

```
{
  "Name":"John Smith",
  "Age":42,
  "Parent":
  {
    "Name":"Brian Smith",
    "Age":65,
    "Parent":
    {
       "Name":"James Smith",
       "Age":87,
    }
  }
} 
```

我尝试使用**DataContractJsonSerializer**这样做：

```
using (MemoryStream ms = new MemoryStream(Encoding.UTF8.GetBytes(json)))
{
    DataContractJsonSerializerSettings settings = new DataContractJsonSerializerSettings();
    settings.UseSimpleDictionaryFormat = true;

    DataContractJsonSerializer serializer = new DataContractJsonSerializer(typeof(Dictionary<string, object>), settings);
    Dictionary<string, object> results = (Dictionary<string, object>)serializer.ReadObject(ms);
} 
```

这实际上适用于第一级，但*“父”*只是一个不能转换为的对象`Dictionary<string, object>`：

```
Dictionary<string, object> parent = (Dictionary<string, object>)results["Parent"];
Cannot cast 'results["Parent"]' (which has an actual type of 'object') to 'System.Collections.Generic.Dictionary<string,object>' 
```

然后我尝试使用**Json.NET**但子对象本身就是 JObject `IDictionary<string, JToken>`，这迫使我遍历整个层次结构并再次转换它们。

有人知道如何使用现有的序列化程序解决这个问题吗？

**编辑**

我正在使用`Dictionary<string, object>`，因为我的对象从一个服务器调用到另一个服务器调用不同（例如，*“Id”*属性可能是*“id”*、*“cust_id”* 或*“customerId”*，具体取决于请求）并且我的应用程序不是唯一的使用这些服务的应用程序，我无法改变这一点，至少现在是这样。

因此，我发现在这种情况下使用*DataContractAttribute*和*DataMemberAttribute 很不方便。*相反，我想将所有内容存储在通用字典中，并有一个强类型属性“Id”，它在字典中查找“id”、“cust_id”或“customerId”，使其对 UI 透明。

这个系统与 JSON.NET 配合得很好，但是如果服务器返回一个对象层次结构，子对象将作为 JObjects 存储在我的字典中，而不是另一个字典中。

总而言之，我正在寻找一个有效的系统来将对象层次结构转换为`Dictionary<string, object>`使用 WinRT 中可用的 JSON 序列化程序的层次结构。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T17:12:25.630

我正在使用 JSON.NET 库和 ExpandoObject 类的组合在 WinRT 应用程序中解决同样的问题。该库能够很好地将 JSON 数据反序列化为实现 IDictionary 的 ExpandoObjects。ExpandoObject 的键值对的值可以很容易地被视为另一个 ExpandoObject。

这是我使用的方法，适用于您的示例：

```
void LoadJSONData()
{
    string testData = "{ \"Name\":\"John Smith\", \"Age\":42, \"Parent\": { \"Name\":\"Brian Smith\", \"Age\":65, \"Parent\": { \"Name\":\"James Smith\", \"Age\":87, } } }";

    ExpandoObject dataObj = JsonConvert.DeserializeObject<ExpandoObject>(testData, new ExpandoObjectConverter());

    // Grab the parent object directly (if it exists) and treat as ExpandoObject
    var parentElement = dataObj.Where(el => el.Key == "Parent").FirstOrDefault();
    if (parentElement.Value != null && parentElement.Value is ExpandoObject)
    {
        ExpandoObject parentObj = (ExpandoObject)parentElement.Value;
        // do something with the parent object...
    }

    // Alternately, iterate through the properties of the expando
    foreach (var property in (IDictionary<String, Object>)dataObj)
    {
        if (property.Key == "Parent" && property.Value != null && property.Value is ExpandoObject)
        {
            foreach (var parentProp in (ExpandoObject)property.Value)
            {
                // do something with the properties in the parent expando
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-29T17:26:10.827

试试这段代码片段：

```
var d = new System.Web.Script.Serialization.JavaScriptSerializer();
var results = d.Deserialize<Dictionary<string, object>>(jsonString);
var parent = (Dictionary<string, object>)results["Parent"]; 
```

根据参考资料，[JavaScriptSerializer 类](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptserializer.aspx)支持*Windows 8*。

对于反序列化，[Json.NET](http://json.codeplex.com/)也是*Windows 8*支持考虑的一个选项。

**添加**，对于`WinRT`：

1.  `DataContract`根据您的 JSON定义。

    ```
    [DataContract]
    public class CustomObject
    {
        [DataMember(Name = "Name")]
        public string Name { get; set; }

        [DataMember(Name = "Age")]
        public string Age { get; set; }

        [DataMember(Name = "Parent")]
        public Dictionary<string, object> Parent { get; set; }
    } 
    ```

2.  在反序列化时使用`DataContract`该类。

    ```
    using (MemoryStream ms = new MemoryStream(Encoding.UTF8.GetBytes(json)))
    {
        DataContractJsonSerializerSettings settings = 
                new DataContractJsonSerializerSettings();
        settings.UseSimpleDictionaryFormat = true;

        DataContractJsonSerializer serializer = 
                new DataContractJsonSerializer(typeof(CustomObject), settings);

        CustomObject results = (CustomObject)serializer.ReadObject(ms);
        Dictionary<string, object> parent = results.Parent;
    } 
    ```

参考：[使用 DataContractJsonSerializer 从 JSON 创建 .NET 对象](http://kashfarooq.wordpress.com/2011/01/31/creating-net-objects-from-json-using-datacontractjsonserializer/)

# python - 编写 Python 函数来迭代行——接受字符串或类似文件的对象

> ID：13631210
> 
> 赞同：1
> 
> 时间：2012-11-29T17:19:42.737
> 
> 标签：python, text-processing

我想编写一个 Python 函数，它遍历输入参数的行，但可以接受字符串或类似文件的对象。有没有办法做到这一点？

```
def myfunc(x):
   for line in x:
       doSomething(line) 
```

上面的代码适用于类似文件的对象，但不适用于字符串，我宁愿只写一个函数而不是两个，因为我的实际任务比上面的要复杂得多。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T17:23:57.157

使用鸭子打字：

```
def myfunc(x):
    try:
        lines = x.split('\n')
    except AttributeError:
        lines = x
    for line in lines:
        doSomething(line) 
```

如果您愿意，还可以检查类型：

```
def myfunc(x):
    if isinstance(x, basestring):  # will work in Python >=2.3, <3.x
        lines = x.split('\n')
    else:
        lines = x
    for line in lines:
        doSomething(line) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T17:24:24.400

您可以在这里使用大约一百万种变体`try-except`

```
def myfunc(x):
    try:
       x = x.splitlines(True)
    except AttributeError:
       pass #likely a file

    for line in x:
       doSomething(line) 
```

另一个版本（稍微不那么宽松——见评论）：

```
try:
   from cStringIO import StringIO
except ImportError:   #python 3
   from io import StringIO

def myfunc(x):
    try:
       x.seek(0)
    except AttributeError: #likely a string
       x = StringIO(x)

    for line in x:
       doSomething(line) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T17:23:09.783

它也适用于字符串，但它会逐个字符地迭代字符串。用户应该使用字符串*列表*来调用您的函数。

如果您明确希望支持传入一个字符串，然后将其解释为一行，则必须对此进行测试：

```
def myfunc(x):
    if isinstance(x, basestring):
        # Interpret argument as one line
        x = [x]
    for line in x:
        doSomething(line) 
```

或者，您可以在换行符上拆分字符串：

```
def myfunc(x):
    if hasattr(x, 'splitlines'):
        # Interpret argument as multiple lines:
        x = x.splitlines()
    for line in x:
        doSomething(line) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-29T17:24:22.227

如果您只接受类似文件的对象，则可以指示调用者将字符串参数包装在[`StringIO`](http://docs.python.org/2/library/stringio.html)：

```
myfunc(StringIO(s)) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-29T17:26:06.403

isinstance(var, str) 检查 var 是否为 str 类型。

我不记得手头文件的类型，但您可以通过文件 var 找出答案。它将显示在 < ... >

你可以使用：

```
def myfunc(x):
   for line in x:
       if isinstance(line, str):
           print line
       else:
           # Its a file so do file things 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-29T17:48:16.117

一种方法是使用类似 isinstance 的方法来确定 x 是否为字符串。如果是，您可以将其传递给 StringIO（或 cStringIO）以使其成为像对象一样的文件，然后按照您的意愿进行操作。我没有对此进行测试，但它看起来大致如下：

```
def myfunc(x):
   if isinstance(x, str):
      x = StringIO.StringIO(x)
   for line in x:
      doSomething(line) 
```

# python - Django 什么时候查找外键的主键？

> ID：13631211
> 
> 赞同：22
> 
> 时间：2012-11-29T17:19:45.713
> 
> 标签：python, django, django-orm

我有两个简单的模型，一个代表电影，另一个代表电影的评分。

```
class Movie(models.Model):
    id = models.AutoField(primary_key=True)

    title = models.TextField()

class Rating(models.Model):
    id = models.AutoField(primary_key=True)

    movie = models.ForeignKey(Movie)
    rating = models.FloatField() 
```

我的期望是，我能够首先创建一个`Movie`和一个`Review`引用该电影的内容，然后将它们都提交到数据库中，只要我提交了`Movie`第一个，以便为它提供一个主键以供`Review`引用。

```
the_hobbit = Movie(title="The Hobbit")
my_rating = Rating(movie=the_hobbit, rating=8.5)
the_hobbit.save()
my_rating.save() 
```

令我惊讶的是，它仍然`IntegrityError`抱怨我试图指定一个空外键，即使`Movie`已经提交并且现在有一个主键。

```
IntegrityError: null value in column "movie_id" violates not-null constraint 
```

我通过添加一些`print`语句来确认这一点：

```
print "the_hobbit.id =", the_hobbit.id           # None
print "my_rating.movie.id =", my_rating.movie.id # None
print "my_rating.movie_id =", my_rating.movie_id # None

the_hobbit.save()

print "the_hobbit.id =", the_hobbit.id           # 3
print "my_rating.movie.id =", my_rating.movie.id # 3
print "my_rating.movie_id =", my_rating.movie_id # None

my_rating.save()                                 # raises IntegrityError 
```

该`.movie`属性指的是一个`Movie`实例，它确实有一个非`None` `.id`-，但`.movie_id`它保留了`None`它在创建`Movie`实例时所具有的值。

`.movie.id`当我尝试提交时，我希望 Django 抬头`Review`，但显然这不是它正在做的事情。

* * *

### 在旁边

就我而言，我通过在某些模型上覆盖该方法来处理此行为，`.save()`以便它们在保存之前再次查找外键的主键。

```
def save(self, *a, **kw):
    for field in self._meta.fields:
        if isinstance(field, ForeignKey):
            id_attname = field.attname
            instance_attname = id_attname.rpartition("_id")[0]
            instance = getattr(self, instance_attname)
            instance_id = instance.pk
            setattr(self, id_attname, instance_id)

    return Model.save(self, *a, **kw) 
```

这很 hacky，但它对我有用，所以*我并不是真的在寻找解决这个特定问题的方法*。

* * *

我正在寻找对 Django 行为的解释。Django 在什么时候查找外键的主键？请具体；最好参考 Django 源代码。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-29T18:30:56.987

如文档所述：

> 关键字参数只是您在模型上定义的字段的名称。请注意，实例化模型绝不会触及您的数据库；为此，您需要保存（）。

在模型类上添加一个类方法：

```
class Book(models.Model):
    title = models.CharField(max_length=100)

    @classmethod
    def create(cls, title):
        book = cls(title=title)
        # do something with the book
        return book

book = Book.create("Pride and Prejudice") 
```

在自定义管理器上添加一个方法（通常是首选）：

```
class BookManager(models.Manager):
    def create_book(self, title):
        book = self.create(title=title)
        # do something with the book
        return book

class Book(models.Model):
    title = models.CharField(max_length=100)

    objects = BookManager()

book = Book.objects.create_book("Pride and Prejudice") 
```

**来源：** [https ://docs.djangoproject.com/en/dev/ref/models/instances/?from=olddocs#creating-objects](https://docs.djangoproject.com/en/dev/ref/models/instances/?from=olddocs#creating-objects)

当您分配 the_hobbit 时，您正在分配一个 Movie 实例，因此不会访问数据库。一旦你调用“保存”，数据库确实会填满，但是你的变量仍然指向内存中的对象，不知道数据库的突然变化。

也就是说，更改序列的顺序也应该有效地创建对象：

```
the_hobbit = Movie(title="The Hobbit")
the_hobbit.save()
my_rating = Rating(movie=the_hobbit, rating=8.5)
my_rating.save() 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-04T11:15:30.583

主要问题与是否需要的副作用有关。并且变量实际上是指向 Python 中对象的指针。

当您从模型中创建对象时，它还没有主键，因为您还没有保存它。但是，保存它时，Django 是否必须确保它更新已经存在的对象的属性？主键是合乎逻辑的，但它也会导致您期望其他属性被更新。

一个例子是 Django 的 unicode 处理。无论您为放入数据库的文本提供何种字符集：一旦您再次将其取出，Django 就会为您提供 unicode。但是如果你创建一个对象（带有一些非 unicode 属性）并保存它，Django 是否应该修改你现有对象的文本属性？这听起来已经有点危险了。这（可能）是为什么 Django 不会对您要求它存储在数据库中的对象进行任何即时更新。

从数据库重新加载对象会给你一个完美的对象，一切都设置好了，但它也让你的变量指向不同的对象。因此，如果您已经在“旧”电影对象上为 Rating 提供了一个指针，那么这对您的示例没有帮助。

Hedde`Movie.objects.create(title="The Hobbit")`提到的就是这里的诀窍。*它从数据库*返回一个电影对象，所以它已经有一个 id。

```
the_hobbit = Movie.objects.create(title="The Hobbit")
my_rating = Rating(movie=the_hobbit, rating=8.5)
# No need to save the_hobbit, btw, it is already saved.
my_rating.save() 
```

（当我新创建的对象没有输出 unicode 时，我的对象和数据库中的对象之间的差异也有问题。我在博客上的[解释](http://reinout.vanrees.org/weblog/2011/11/18/django_unicodedecodeerror.html)与上面相同，但措辞有点不同。）

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-12-10T12:13:21.613

查看[Django 源代码](https://github.com/django/django/blob/1.4/django/db/models/fields/related.py#L287)，答案在于 Django 用来提供其漂亮 API 的一些魔法。

当你实例化一个`Rating`对象时，Django 设置（虽然有一些更多的间接使这个通用）`self.movie`到`the_hobbit`. 但是，`self.movie`不是常规属性，而是通过`__set__`. 该`__set__`方法（上面链接）查看值 ( `the_hobbit`) 并尝试设置属性`movie_id`而不是`movie`，因为它是一个`ForeignKey`字段。但是，由于`the_hobbit.pk`是 None，它只是设置`movie`为`the_hobbit`。一旦您尝试保存评分，它就会尝试再次查找`movie_id`，但失败了（它甚至不会尝试查看`movie`。）

有趣的是，这种行为似乎在[Django 1.5](https://github.com/django/django/blob/stable/1.5.x/django/db/models/fields/related.py#L310)中发生了变化。

代替

```
setattr(value, self.related.field.attname, getattr(
    instance, self.related.field.rel.get_related_field().attname))
# "self.movie_id = movie.pk" 
```

现在可以了

```
 related_pk = getattr(instance, self.related.field.rel.get_related_field().attname)
    if related_pk is None:
        raise ValueError('Cannot assign "%r": "%s" instance isn\'t saved in the database.' %
                            (value, instance._meta.object_name)) 
```

在您的情况下，这将导致更有用的错误消息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T15:24:01.040

只是为了完成，因为我无法发表评论......

您也可能（但不是在这种情况下）愿意更改数据库端的行为。这*对于运行一些*可能导致类似问题的测试可能很有用（因为它们是在提交和回滚中完成的）。有时最好使用这个 hacky 命令来使测试尽可能接近应用程序的真实行为，而不是将它们打包在 TransactionalTestCase 中：

它与约束的属性有关......执行以下[SQL](http://www.postgresql.org/docs/9.1/static/sql-set-constraints.html)命令也将解决问题（仅限 PostgreSQL）：

```
SET CONSTRAINTS [ALL / NAME] DEFERRABLE INITIALLY IMMEDIATE; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-05T13:16:51.067

我的观点是，在您调用 hobbit 对象的**save()**方法后，该对象被保存。**但是您的my_rating**对象中存在的本地引用并不真正知道它必须使用数据库中存在的值来更新自身。

因此，当您调用**my_rating.movi​​e.id**时， django 没有认识到需要再次对电影对象进行数据库查询，因此您得到**None**，这是该对象的本地实例包含的值。

但是**my_rating.movi​​e_id**不依赖于本地实例上存在哪些数据 - 这是要求 django 查看数据库并通过外键关系查看有哪些信息的明确方式。

# c# - 组合框自动完成行为

> ID：13631213
> 
> 赞同：1
> 
> 时间：2012-11-29T17:19:51.573
> 
> 标签：c#, winforms

我们有一个带有 AutoCompleteMode = SuggestAppend 和 AutoCompleteSource = ListItems 的组合框（下拉样式）。

每当我们打开下拉列表然后开始在组合框的文本字段部分中写入时，sugest 框会覆盖所有下拉值的列表，但下拉值列表仍然保持焦点，我们无法选择 sugest 框中的任何项目.

这是一个非常烦人的行为，我希望这不是它的默认行为。其他人有同样的问题，并发现如何预防？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T06:05:08.153

您正在使用 AutoCompleteMode 属性。您的问题是建议框涵盖了列表下拉列表。这是自动完成的另一种方式。

```
//ComboBox TextChanged Event
    private void txtName1_TextChanged(object sender, EventArgs e)
    {
        SqlDataAdapter daTemp = new SqlDataAdapter("select Name from Names where Name like '" + txtName1.Text + "%'", strConnection);
        DataTable dtTemp = new DataTable();
        daTemp.Fill(dtTemp);
        MessageBox.Show(dtTemp.Rows.Count.ToString());
        String[] Names = new String[dtTemp.Rows.Count + 1];
        if (dtTemp.Rows.Count > 0)
        {
            for (int x = 0; x <= dtTemp.Rows.Count - 1; x++)
            {
                Names[x] = dtTemp.Rows[x][0].ToString();
            }
        }
        else
        {
            MessageBox.Show("Data not found");
        }
        contextMenuStrip1.Items.Clear();
        for (int y = 0; y <= dtTemp.Rows.Count - 1; y++)
        {
            //Set The Desired Location (e.g. Besides of ComboBox) Of ContextMenuStrip
            contextMenuStrip1.Left = 80;
            contextMenuStrip1.Top = 90;
            contextMenuStrip1.Items.Add(Names[y].ToString());
            contextMenuStrip1.Visible = true;
        }
    } 
```

相同的事情可以应用于 DropDownLost。现在您从 ContextMenuStrip 中选择适当的值并将其提供给您的 ComboBox（或 DropDownList）。为此，请将以下代码添加到 ContextMenuStrip 的 ItemClicked 事件中。

```
private void contextMenuStrip1_ItemClicked(object sender, ToolStripItemClickedEventArgs e)
    {
        txtName1.Text = e.ClickedItem.ToString();
    } 
```

# windows-phone-7 - Windows Phone 如何避免更改 XAML 中的可见性

> ID：13631214
> 
> 赞同：1
> 
> 时间：2012-11-29T17:19:52.103
> 
> 标签：windows-phone-7, xaml, windows-phone-7.1

我正在为 Windows Phone 开发一个应用程序，我需要显示元素取决于某些条件（文本框或 starRating ）。我知道我可以使用可见性转换器但我知道改变可见性正在刷新视图但我有很多这样的元素（Longlistselector）。您可以在下面看到我当前的 XAML 代码。

我有任何替代方法可以避免使用可见性转换器吗？

```
<toolkit:LongListSelector.GroupHeaderTemplate>
  <DataTemplate>
    <StackPanel>
      <TextBlock Text="{Binding Title}"
                 Visibility="{Binding Title, ConverterParameter=textblock, Converter={StaticResource SortToVisibilityConverter}}" />
      <toolkit:Rating Value="{Binding Title}"
                      Background="{StaticResource TransparentBrush}"
                      ReadOnly="True"
                      Visibility="{Binding Title, ConverterParameter=stars, Converter={StaticResource SortToVisibilityConverter}}" />
    </StackPanel>
  </DataTemplate>
</toolkit:LongListSelector.GroupHeaderTemplate> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T20:15:25.023

好吧，“不是”真的。我说“不”是因为您始终可以手动切换后面代码中的可见性。但我们强烈反对这样做。

使用转换器，它可以与本身推荐的 MVVM 一起正常工作。

# knockout.js - 按钮单击功能的数据绑定给出了敲除错误

> ID：13631216
> 
> 赞同：2
> 
> 时间：2012-11-29T17:19:58.250
> 
> 标签：knockout.js

我收到错误“无法解析绑定，ReferenceError：'calculateTotalPrice' 未定义；绑定值：单击：calculateTotalPrice

下面是我的简单代码片段

```
<div style="background-color:black; color:white; overflow:scroll; height:350px;width:300px" id="pricesku">
<span id="total" data-bind="text: totalCost"></span> 
<ul data-bind="foreach: price_quantity" style="list-style-type:none;">
<li>                  
<button data-bind="click: calculateTotalPrice(price)">CLICK THIS TO UPDATE TOTAL</button>                   
</li>             
</ul>
</div> 
```

但是当我这样做时，单击并提供函数名称，上面会出现错误。

这是我的视图模式

函数 ViewPriceObjectOnWeb(d) {

```
this.price_quantity = ko.observableArray(d);
this.totalCost = ko.observable(100);
this.calculateTotalPrice = function (p) {
var tp = this.totalCost() + p;
//$('#total').text(tp);
} 
```

}

并在准备好文档时进行 AJAX 调用，从服务器获取数据（这工作正常），如下所示

```
$(document).ready(function () {   
var sku = "abcd";
$.ajax({
    url: "/api/values?clientSKU=" + sku, //this would give SKU/Price collection as JSON Serialized object from .NET/Server Side
    dataType: "json",
    asyc: false,
    type: "get",
    success: function (msg) {
    var skuandprice = $.parseJSON(msg);          
    ko.applyBindings(new ViewPriceObjectOnWeb(skuandprice), document.getElementById('pricesku'));
    },
    error: function (jqXHR, textStatus, errorThrown) {
    alert(textStatus + '  ' + errorThrown);
    }
    });
}); 
```

谁能帮助我在这里做错了什么（我打赌我是）？提前谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T17:33:31.930

当您在`foreach`循环中时，Knockout 期望数据绑定中的任何函数或属性都在数组的条目中定义，在这种情况下是`price_quantity`. 要访问在包含数组的对象中定义的函数和属性，请使用`$parent`标识符。因此，要`calculateTotalPrice`在循环中使用，您需要执行以下操作：

```
<li>                  
    <button data-bind="click: $parent.calculateTotalPrice">CLICK THIS TO UPDATE TOTAL</button>                   
</li> 
```

视图模型：

```
function ViewPriceObjectOnWeb(d) {
    var self = this;
    self.price_quantity = ko.observableArray(d);
    self.totalCost = ko.observable(100);
    self.calculateTotalPrice = function (p) {
        var tp = self.totalCost() + p;
        self.totalCost(tp);
    };
} 
```

工作示例（使用硬编码价格）：http: [//jsfiddle.net/jonhopkins/fn7vc/2/](http://jsfiddle.net/jonhopkins/fn7vc/2/)

# android - KEYCODE_SEARCH 不适用于 Nexus S

> ID：13631217
> 
> 赞同：1
> 
> 时间：2012-11-29T17:20:05.093
> 
> 标签：android

我试图在显示对话框时禁用设备的搜索按钮。

`keyCode == KeyEvent.KEYCODE_SEARCH`

这不适用于 Nexus S 设备。有谁知道如何在 Nexus S 设备上完成？有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T07:54:59.520

从未使用过它，但尝试[onSearchRequested()](http://developer.android.com/reference/android/app/Dialog.html#onSearchRequested%28%29)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-03T22:15:57.997

在带有 Android 4.4.4 (Cyanogenmod) 的 Nexus S 上，必须在系统设置中更改 SEARCH 键的行为。

确保在短按时它具有“应用程序搜索”功能，而不是“搜索助手”或其他功能。

您可以使用捆绑的 Apollo 应用程序对其进行测试，一旦您找到正确的设置，该应用程序就会对密钥做出反应。

# wpf - ItemsControl 中的 ListView 是否有等效的 SharedSizeGroup？

> ID：13631218
> 
> 赞同：4
> 
> 时间：2012-11-29T17:20:05.977
> 
> 标签：wpf, xaml, listview, itemscontrol, sharedsizegroup

我使用一个 ItemsControl 代表国家。对于每个国家，我使用 ListView 来显示其城市：

```
<ItemsControl ItemsSource="{Binding Countries}">
  <ItemsControl.ItemsPanel>
    <ItemsPanelTemplate>
      <StackPanel Orientation="Vertical" />
    </ItemsPanelTemplate>
  </ItemsControl.ItemsPanel>
  <ItemsControl.ItemTemplate>
    <DataTemplate>
      <ListView Margin="10"
                ItemsSource="{Binding Cities}">
        <ListView.View>
          <GridView>
            <GridViewColumn Width="140"
                            Header="City"
                            DisplayMemberBinding="{Binding Name}" />
            <GridViewColumn Width="90"
                            Header="Population"
                            DisplayMemberBinding="{Binding Population}" />
          </GridView>
        </ListView.View>
      </ListView>
    </DataTemplate>
  </ItemsControl.ItemTemplate>
</ItemsControl> 
```

结果：

![在此处输入图像描述](../Images/0d3974b6b187bdb12ac48dc86f11ca7e.png)

我需要每当用户更改第一个列表视图中的列宽时，第二个会相应地调整其宽度（类似于网格的**SharedGroupSize**）。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-21T14:37:38.290

创建一个自定义 UserControl，它对每个列宽都有一个依赖属性。然后双向绑定列宽。

```
<UserControl x:Class="CountryList" x:Name="countryList">
    <ItemsControl ......
        <GridView>
            <GridViewColumn Width="{Binding ColumnWidth1,Mode=TwoWay, ElementName=countryList}"
                        Header="City"
                        DisplayMemberBinding="{Binding Name}" />
            <GridViewColumn Width="{Binding ColumnWidth2,Mode=TwoWay, ElementName=countryList}"
                        Header="Population"
                        DisplayMemberBinding="{Binding Population}" />
        </GridView>
    .......
</UserControl> 
```

和后面的代码

```
public partial class CountryList : UserControl
{
    public static readonly DependencyProperty ColumnWidth1Property = 
        DependencyProperty.Register("ColumnWidth1", typeof(int), typeof(CountryList),
        new PropertyMetadata(140));

    public int ColumnWidth1
    {
        get { return (int)GetValue(ColumnWidth1Property); }
        set { SetValue(ColumnWidth1Property, value); }
    }

    .......
} 
```

# c# - NService 总线消息大小

> ID：13631222
> 
> 赞同：1
> 
> 时间：2012-11-29T17:20:12.250
> 
> 标签：c#, message-queue, nservicebus

我看到消息的最大大小是 4 MB。我有一个要求，我需要发送更大尺寸的消息以避免数据库往返。有没有办法做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T20:11:41.770

是的，您可以启用名为 databus 的功能并将属性标记为 DataBusProperty，这将通过文件共享或 Windows azure blob 存储以另一种方式发送。

请参阅以下示例了解如何执行此操作： [https ://github.com/Particular/NServiceBus.Msmq.Samples/tree/master/DataBus](https://github.com/Particular/NServiceBus.Msmq.Samples/tree/master/DataBus)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T01:06:38.297

执行此操作的一般方法是让消息引用数据，而不是让数据成为消息正文的一部分。引用的数据本身可以存储在数据库或键/值存储或文件系统中。将有一个往返，因为必须首先存储然后检索引用的数据，但您可以将其整体忽略不计。过分关注自己的往返行程是过早的优化。

正如**Yves Goeleven**所指出的，使用 NServiceBus v3+，您可以将要发送的消息属性标记为引用并存储在文件系统或其他东西中。这是以对消息处理代码非常透明的方式完成的。

# sharepoint - __RemoteAppManagementInfo__ SharePoint 2013 - 未配置远程托管服务

> ID：13631223
> 
> 赞同：4
> 
> 时间：2012-11-29T17:20:23.173
> 
> 标签：sharepoint, sharepoint-2013

我看到使用**Visual Studio 2012在我的新****SharePoint 2013**服务器上部署简单的 Hello World 应用程序时出现奇怪的错误。错误是“*未配置远程托管服务*”，内部消息和堆栈跟踪是：

 ***> Microsoft.Office.SecureStoreService.Server.SecureStoreServiceTargetApplicationNotFoundException：找不到目标应用程序（应用程序 ID：__RemoteAppManagementInfo__）。在 Microsoft.SharePoint.Utilities.SecureStoreHelper.ExecuteSecureStoreMethod(String methodName, Object[] args) 在 Microsoft.SharePoint.Administration.AppDeployment.RemoteWebSiteAccount.Initialize() 在 Microsoft.SharePoint.Packaging.SPRemoteWebSiteDeploymentGroup.ConfigureClientAndAccount() 在 Microsoft.SharePoint。 Packaging.SPRemoteWebSiteDeploymentGroup.DeployInternal() 在 Microsoft.SharePoint.Packaging.SPRemoteWebSiteDeploymentGroup.Deploy() 在 Microsoft.SharePoint.Administration.SPAppTask.DeployOperation() 在 Microsoft.SharePoint.Lifecycle.MonitoredTaskExecution.DoTask()

我知道我可能会进入**Secure Store Service**并使用该应用程序 ID 配置一个新的安全存储目标应用程序，但我在任何设置文档中都没有看到这一点，我真的很想知道它来自哪里. 我觉得我在某处缺少一个简单的配置设置，但我找不到它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-05T15:38:20.347

听起来您正在创建**自动托管**应用程序。

****仅Office 365 SharePoint Online**支持**自动托管应用程序**。**在SharePoint 2013**发布后的一段时间内，这种情况可能仍然存在。*****

# oracle - oracle 找出两个表之间的差异

> ID：13631224
> 
> 赞同：5
> 
> 时间：2012-11-29T17:20:24.473
> 
> 标签：oracle

我有 2 个结构相同的表。一种是临时的，另一种是刺激的。每次都会加载整个数据集，有时该数据集会从先前的数据集中删除记录。我首先将数据集加载到临时表中，如果删除了任何记录，我也想从 prod 表中删除它们。

那么如何找到 prod 中存在但 temp 中不存在的记录？我尝试了外部连接，但它似乎不起作用。它根据左外连接或右外连接返回左侧或右侧表中的所有记录。

然后我还想删除 prod 表中的那些记录。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-11-29T17:25:18.097

一种方法是使用`MINUS`运算符

```
SELECT * FROM table1
MINUS
SELECT * FROM table2 
```

`table1`将显示其中没有完全匹配的所有行`table2`（如果您只对确定两个表中是否存在特定键感兴趣，您显然可以指定一个较小的列列表）。

另一种方法是使用`NOT EXISTS`

```
SELECT *
  FROM table1 t1
 WHERE NOT EXISTS( SELECT 1
                     FROM table2 t2
                    WHERE t1.some_key = t2.some_key ) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-29T17:23:28.060

怎么样：

```
SELECT * FROM ProdTable WHERE ID NOT IN
   (select ID from TempTable); 
```

它也与`DELETE`语句相同：

```
DELETE FROM ProdTable WHERE ID NOT IN
   (select ID from TempTable); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-29T17:25:31.270

MINUS 可以在这里工作 以下语句将结果与 MINUS 运算符组合在一起，该运算符仅返回第一个查询返回的行，而不是第二个查询返回的行：

```
SELECT * FROM prod
MINUS
SELECT * FROM temp; 
```

减号仅在表结构相同时才有效

# haskell - Haskell 对 HUnit 中 ErrorCall 的单元测试

> ID：13631226
> 
> 赞同：4
> 
> 时间：2012-11-29T17:20:30.097
> 
> 标签：haskell, hunit

我有一个功能：

```
unify :: [Constraint] -> [Substitution] 
```

在某些情况下，它会抛出`error`函数异常：

```
error "Circular constraint" 
```

我正在使用`Test.HUnit`单元测试，我想制作一个测试用例，断言这些错误是在某些输入上引发的。我发现[了这个](https://stackoverflow.com/questions/6147435/is-there-an-assertexception-in-any-of-the-haskell-test-frameworks/6147930#6147930)，它提供了一种测试异常的方法，它是 的实例`Eq`，但`error`似乎给出[了一个`ErrorCall`异常](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Control-Exception-Base.html#t:ErrorCall)，它不是 的实例`Eq`，所以我得到了错误：

```
No instance for (Eq ErrorCall)
  arising from a use of `assertException' 
```

**如何编写一个`TestCase`断言`error`被调用并（最好）检查消息的断言？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T17:33:48.337

理想情况下，我会将您的功能重构为

```
unify' :: [Constraint] -> Maybe [Substitution]
unify' = -- your original function, but return Nothing instead of calling error,
         -- and return Just x when your original function would return x

unify = fromMaybe (error "Circular constraint") . unify' 
```

然后我会 test`unify'`而不是 testing `unify`。

如果有不止一个可能的错误消息，我会改成这样重构它：

```
unify' :: [Constraint] -> Either String [Substitution]
    -- and return Left foo instead of calling error foo

unify = either error id . unify' 
```

（顺便说一句，如果这是其他程序员将使用的库，他们中的一些人更愿意调用`unify'`而不是偏函数`unify`。）

* * *

如果你不能重构你的代码，我会修改你链接到的代码，替换`assertException`为：

```
assertErrorCall :: String -> IO a -> IO ()
assertErrorCall desiredErrorMessage action
    = handleJust isWanted (const $ return ()) $ do
        action
        assertFailure $ "Expected exception: " ++ desiredErrorMessage
  where isWanted (ErrorCall actualErrorMessage)
            = guard $ actualErrorMessage == desiredErrorMessage 
```

# javascript - mongoDB中的多个查询

> ID：13631229
> 
> 赞同：1
> 
> 时间：2012-11-29T17:20:38.973
> 
> 标签：javascript, mongodb, gtfs

我想在mongodb中查询多个集合，我有一些这样的数据

```
Collection stops {
    { stop_id : 1, stop_name: 'a'},
    { stop_id : 2, stop_name: 'b'}, ...

Collection stop_time {
    { stop_id : 1, trip_id: 40},
    { stop_id : 2, trip_id: 41}, ...

Collection trips {
    { trip_id : 40, route_id: 400},
    { trip_id : 41, route_id: 401}, ...

Collection route {
    { route_id : 400, route_name: 'foo'},
    { route_id : 401, route_name: 'bar'}, ... 
```

而对于每一个stop_name，我想知道与之匹配的route_name...（顺便说一下，我没有选择他的数据结构，那是GTFS格式...）

有没有办法轻松地进行查询以响应我的问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T18:04:25.003

这种方法对 mongodb 不好。您应该创建一个包含所有数据的集合，并且只进行一次查询。

这非常重要，因为：

1.  没有交易
2.  没有连接
3.  一个文档只有原子操作
4.  您将无法使用聚合框架

如果无法迁移到一个集合模式，那么您可能应该执行以下操作：

```
 var _ = require("underscore")._;
    function get_all(cb) {
        stops.find({}, function(err, stps, cb) {

            stop_time.find({}, function(err, stptime) {

                var all = _.map(stps, function(e) {
                    e.trip_id = stptime[e.stop_id].trip_id;
                    return e;
                });

                trips.find({}, function(err, trips) {

                    all = _.map(all, function(e) {
                        e.route_id = trips[e.trip_id].route_id;
                        return e;
                    });

                    route.find({}, function(err, routes) {

                        all = _.map(all, function(e) {
                            e.route_name = routes[e.route_id].route_name;
                            return e;
                        });

                        cb(all)
                    });
                });

            });
        });
    } 
```

请注意，如果数据库中有大量数据，那么您可能应该使用游标。[http://mongoosejs.com/docs/api.html#querystream_QueryStream](http://mongoosejs.com/docs/api.html#querystream_QueryStream)

# abcpdf - 有没有人能够让 ABCPDF（HTML 转换）在 azure 网站上工作

> ID：13631232
> 
> 赞同：11
> 
> 时间：2012-11-29T17:20:50.913
> 
> 标签：abcpdf, azure-web-app-service

Webforms 页面代码背后

```
 XSettings.InstallRedistributionLicense("REDACTED");
        var theDoc = new Doc();
        theDoc.HtmlOptions.Engine = EngineType.Gecko;
        theDoc.Rect.Inset(72, 144);
        theDoc.Page = theDoc.AddPage();
        int theID = theDoc.AddImageUrl("http://www.woot.com/");
        while (true)
        {
            theDoc.FrameRect(); // add a black border
            if (!theDoc.Chainable(theID))
                break;
            theDoc.Page = theDoc.AddPage();
            theID = theDoc.AddImageToChain(theID);
        }
        for (int i = 1; i <= theDoc.PageCount; i++)
        {
            theDoc.PageNumber = i;
            theDoc.Flatten();
        }
        Response.Buffer = false;
        Response.AddHeader("Content-Disposition", "inline; filename=\"rept.pdf\"");
        Response.ContentType = "application/pdf";
        theDoc.Save(Response.OutputStream);
        Response.Flush(); 
```

应该工作得很好..但是得到

```
 Failed to add HTML: RPC to Gecko engine process failed.Remote process terminated unexpectedly. 
```

在 bin 文件夹中运行完全信任

*   XULRunner 文件夹和 C:\Program Files (x86)\WebSupergoo\ABCpdf .NET 9.0\ABCGecko 中的所有内容
*   ABCGecko.dll
*   ABCpdf.dll
*   ABCpdf9-32.dll

打包/发布 Web 此项目文件夹中的所有文件

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-04T23:16:28.843

您不得在[Windows Azure 网站](https://www.windowsazure.com/en-us/home/scenarios/web-sites/)内运行外部进程，因为这会对共享基础架构造成风险。

请参阅MSFT 员工的[这篇文章](http://social.msdn.microsoft.com/Forums/uk/windowsazurewebsitespreview/thread/5b51ec05-da97-4ea8-a495-98d45224cde4)[或](http://social.msdn.microsoft.com/Forums/uk/windowsazurewebsitespreview/thread/939df0a0-30c9-4a5d-a44c-95765e1a4db7)同一员工谈论与本机 API 相关的其他限制的文章。

您可以通过不将 HTML 图像添加到文档中来验证问题是否与外部启动的[Gecko有关。](https://developer.mozilla.org/en/docs/Gecko)对我来说，PDF 的创建取得了进一步的进展，但由于缺少许可证而失败。

看起来您必须找到一个完全托管的/.NET HTML 渲染引擎（如果将网站转换为 PDF 是您的用例），或者希望保留模式的网站获得执行本机/外部进程的权利。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-06T17:24:23.000

这里有完整的 ABCpdf Azure 部署指南：

[http://www.websupergoo.com/support-azure-abcpdf.htm](http://www.websupergoo.com/support-azure-abcpdf.htm)

# c# - 当从 ASP.NET 网页调用时，C# dll 方法调用无法写入/读取注册表

> ID：13631235
> 
> 赞同：0
> 
> 时间：2012-11-29T17:20:56.193
> 
> 标签：c#, asp.net, .net, registry

我在 dll 中有一个类，该类具有以下写入注册表的方法：

```
public Boolean WriteDBConnectionInfoToRegistry(string txtDSN, string txtServer, string txtDatabase, string txtUser, string txtPassword, bool trusted)
        {
            SymmetricAlgorithm rijn = SymmetricAlgorithm.Create();
            rijn.GenerateKey();
            rijn.GenerateIV();
            Boolean b1 = RegistryWrite("Software\\MyApp", "IV", Reverse(Convert.ToBase64String(rijn.IV)));
            Boolean b2 = RegistryWrite("Software\\MyApp", "Key", Reverse(Convert.ToBase64String(rijn.Key)));
            Boolean b3 = RegistryWrite("Software\\MyApp", "DSN", Convert.ToBase64String(System.Text.Encoding.UTF8.GetBytes(Reverse(txtDSN))));
            Boolean b4 = RegistryWrite("Software\\MyApp", "Server", Convert.ToBase64String(System.Text.Encoding.UTF8.GetBytes(Reverse(txtServer))));
            Boolean b5 = RegistryWrite("Software\\MyApp", "Database", Convert.ToBase64String(System.Text.Encoding.UTF8.GetBytes(Reverse(txtDatabase))));
            Boolean b6 = RegistryWrite("Software\\MyApp", "User", EncryptString(Convert.ToBase64String(System.Text.Encoding.UTF8.GetBytes(Reverse(txtUser))),rijn.IV,rijn.Key));
            Boolean b7 = RegistryWrite("Software\\MyApp", "Password", EncryptString(Convert.ToBase64String(System.Text.Encoding.UTF8.GetBytes(Reverse(txtPassword))), rijn.IV, rijn.Key));
            Boolean b8 = RegistryWrite("Software\\MyApp", "Trusted", Convert.ToBase64String(System.Text.Encoding.UTF8.GetBytes(Reverse(trusted ? "1" : "0"))));

            if (b1 && b2 && b3 && b4 & b5 & b6 & b7 & b8)
            {
                return true;
            }
            else
            {
                return false;
            }
        }

  private bool RegistryWrite(string subKey, string KeyName, object Value)
        {
            try
            {
                RegistryKey rk = Registry.LocalMachine;
                RegistryKey sk1 = rk.CreateSubKey(subKey);
                sk1.SetValue(KeyName.ToUpper(), Value);
                return true;
            }
            catch (Exception e)
            {
            }
            return false;
        } 
```

这些方法包含在一个公共类中，它是我在 ASP.NET 网页中安装的 dll 的一部分。当从 Windows 应用程序调用该方法进行测试时，这些方法成功写入注册表，但是当从网站后面的代码调用该方法时，尽管返回 true，但它无法写入创建文件夹和键。我怎样才能解决这个问题？.dll 的框架是 .Net 2.0，Web 应用程序是 4.0。感谢您的帮助。

# python - 在 matplotlib 中绘制彩色立方体

> ID：13631236
> 
> 赞同：8
> 
> 时间：2012-11-29T17:20:59.910
> 
> 标签：python, matlab, graph, 3d, matplotlib

我使用 Matlab 生成各种图表的统计代码。图形类型范围从简单的饼图和条形图到 3D 直方图格。

现在我们想要一个漂亮的 GUI 来配合软件。我们有一个 Matlab GUI 原型，但 Matlab 的 GUI 存在许多问题，因此我们希望转向更强大的 GUI。我最好的选择似乎是 PySide + matplotlib，但到目前为止我还没有找到绘制 3D 点阵的方法。matlab 代码使用轮廓切片。matplotlib 中似乎没有类似的调用。那么，谁能帮我弄清楚如何使用 matplotlib 获得这样的图表？到目前为止，我唯一的想法是绘制 6 个曲面来制作一个立方体。

实际上，也欢迎对其他 GUI/图形库组合的建议。基本统计代码是 C++，因此 Python 只是众多选项之一。从我在 StackOverflow 上看到的一些答案来看，matplotlib 的 3D 速度可能慢得让人无法接受。也许R会更好？

![用轮廓切片制作的彩色 3D 立方体](../Images/d90b490077aa14319afc7e9ca3a47e92.png)

这是matlab代码：

```
clf
xlo = -1.800000e+01; 
xhi = 1.000000e+01; 
ylo = 1.000000e+01; 
yhi = 3.000000e+01; 
zlo = -1.000000e+03; 
zhi = 1.000000e+03; 
X=zeros(16,16,16);
Y=zeros(16,16,16);
Z=zeros(16,16,16);
V=zeros(16,16,16);
% fill in X, Y, Z, and V  huge amount of text
xt = [-1.800000e+01:2.800000e-01:1.000000e+01];
yt = [1.000000e+01:2.000000e-01:3.000000e+01];
zt = [-1.000000e+03:2.000000e+01:1.000000e+03];
isoval = -1.428280e+01;
h = patch(isosurface(X,Y,Z,V,isoval),... 
'FaceColor', 'blue', ... 
'EdgeColor', 'none', ... 
'AmbientStrength', 0.2, ... 
'SpecularStrength', 0.7, ... 
'DiffuseStrength', 0.4);
isonormals(X,Y,Z,V,h);
patch(isocaps(X,Y,Z,V,isoval), ...
'FaceColor', 'interp', ... 
'EdgeColor', 'none'); 
axis([xlo xhi ylo yhi zlo zhi])
daspect([2.800000e+01,2.000000e+01,2.000000e+03])
set(gca,'linewidth',2)
set(gca,'fontweight','bold')
set(gca,'fontsize',12)
grid on
box on
colormap('default'); colorbar

view(3) 
set(gcf,'Renderer','zbuffer')
lighting phong
cin = 'n';
if (cin == 'y')
xin = questdlg('Axis to slide through ?', 'Axis', 'X', 'Y', 'Z', 'X');
xin = lower(xin);
for i = 1 : 101
if gcf ~= plotFigure
return
end
if (xin == 'y')
h = contourslice(X,Y,Z,V,xt(i),[],[],101);
elseif (xin == 'x')
h = contourslice(X,Y,Z,V,[],yt(i),[],101);
elseif (xin == 'z')
h = contourslice(X,Y,Z,V,[],[],zt(i),101);
end
axis([-1.8000e+01  1.0000e+01  1.0000e+01  3.0000e+01 -1.0000e+03  1.0000e+03 -8.6774e+01  4.2066e+02])
set(gca,'linewidth',2)
set(gca,'fontweight','bold')
set(gca,'fontsize',12)
grid on
box on
view(3)
set(h, 'Linewidth', 10)
colorbar
pause(0.3)
if (i < 101)
clf
end
end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T14:46:34.757

You may want to have a look at [`mayavi`](http://docs.enthought.com/mayavi/mayavi/auto/examples.html) If you are using Windows, it comes by default with [Python(x,y)](http://code.google.com/p/pythonxy/).

# android - 将 DatePicker 中的第一天设置为星期一

> ID：13631244
> 
> 赞同：8
> 
> 时间：2012-11-29T17:21:31.647
> 
> 标签：android, date, calendar, datepicker

我有一个 DatePicker，我在其中禁用了 SpinnerView，现在只使用 CalendarView。但它从星期天开始，我想用星期一作为一周的第一天。我该如何改变呢？我猜第一天将取决于手机设置，但在我的瑞士手机上它仍然是错误的......

我还没有找到任何 set Method 或任何 XML 命令。

```
<DatePicker
   android:id="@+id/date_picker"
   android:layout_width="wrap_content"
   android:layout_height="wrap_content"
   android:layout_alignParentLeft="true"
   android:layout_alignParentRight="true" /> 
```

和

```
DatePicker datePicker = (DatePicker)   convertView.findViewById(R.id.date_picker);
datePicker.setSpinnersShown(false); 
```

**- - - - - - 编辑： - - - - - -**

我试图改变语言环境：

```
Locale.setDefault(Locale.GERMAN); 
```

但这并没有改变任何以太。所以我阅读了 android-17.android.widget.DatePicker.java 我发现：

```
public DatePicker(Context context, AttributeSet attrs, int defStyle) {
  //...  
  // initialization based on locale
        setCurrentLocale(Locale.getDefault());
  //...
}

 /**
 * Sets the current locale.
 *
 * @param locale The current locale.
 */
private void setCurrentLocale(Locale locale) {
    if (locale.equals(mCurrentLocale)) {
        return;
    }

    mCurrentLocale = locale;

    mTempDate = getCalendarForLocale(mTempDate, locale);
    mMinDate = getCalendarForLocale(mMinDate, locale);
    mMaxDate = getCalendarForLocale(mMaxDate, locale);
    mCurrentDate = getCalendarForLocale(mCurrentDate, locale);

    mNumberOfMonths = mTempDate.getActualMaximum(Calendar.MONTH) + 1;
    mShortMonths = new String[mNumberOfMonths];
    for (int i = 0; i < mNumberOfMonths; i++) {
        mShortMonths[i] = DateUtils.getMonthString(Calendar.JANUARY + i,
                DateUtils.LENGTH_MEDIUM);
    }
}

 /**
 * Gets a calendar for locale bootstrapped with the value of a given calendar.
 *
 * @param oldCalendar The old calendar.
 * @param locale The locale.
 */
private Calendar getCalendarForLocale(Calendar oldCalendar, Locale locale) {
    if (oldCalendar == null) {
        return Calendar.getInstance(locale);
    } else {
        final long currentTimeMillis = oldCalendar.getTimeInMillis();
        Calendar newCalendar = Calendar.getInstance(locale);
        newCalendar.setTimeInMillis(currentTimeMillis);
        return newCalendar;
    }
} 
```

那么为什么 Locale.setDefault(Locale.GERMAN) 不起作用？！正如您在上面看到的，我从 XML 中获取了 DatePicker .. 有什么错误吗？！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-20T10:16:15.997

您必须手动设置一周的第一天，例如在活动/片段的 onCreate()/onCreateView() 中：

```
date = (DatePicker) value.findViewById(R.id.date);
if (Build.VERSION.SDK_INT >= VERSION_CODES.HONEYCOMB_MR1) {
    date.setSpinnersShown(false);
    date.setCalendarViewShown(true);
    date.getCalendarView().setFirstDayOfWeek(Calendar.getInstance().getFirstDayOfWeek());
} 
```

上面的示例使用默认语言环境（实际上是 Calendar.getInstance()），但是您可以手动指定日期：

```
date.getCalendarView().setFirstDayOfWeek(Calendar.MONDAY); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2017-04-09T19:21:17.103

当前接受的答案 using`getCalendarView()`已弃用 Material 样式。

`setFirstDayOfWeek()`但是，您可以调用`DatePicker`实例。或者，如果您要开始`DatePickerDialog`：

```
DatePickerDialog datePickerDlg = new DatePickerDialog(...);
datePickerDlg.getDatePicker().setFirstDayOfWeek(Calendar.MONDAY);
datePickerDlg.show(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T17:26:07.293

这取决于您设备的本地化。

看看这里：[如何让 GWT DatePicker 使用星期一作为一周的第一天？](https://stackoverflow.com/questions/3508213/how-to-make-gwt-datepicker-to-use-monday-as-the-first-day-of-the-week)

# python - 可以在python中使用urllib2实现HTMLParser流吗

> ID：13631245
> 
> 赞同：0
> 
> 时间：2012-11-29T17:21:33.930
> 
> 标签：python, streaming, html-parsing, urllib2, pycurl

我正在用 python 编写 HTMLParser 实现，它将处理从互联网下载的网页。

这是我的代码：

```
class Parser(HTMLParser.HTMLParser):

...

parser=Parser()

httpRequest = urllib2.Request("http://www......")
pageContent = urllib2.urlopen(httpRequest)

while (True):
          htmlTextPortion = pageContent.read()
          parser.feed(htmlTextPortion) 
```

我的问题是：“读取”调用会阻塞直到整个 HTML 页面被下载，还是每次都会返回到目前为止已加载的页面块？

这对我很重要，因为我需要尽快开始处理网页，而不是等到它结束。

我听说**pycurl**库可以选择流式传输，但我确定需要切换到 pycurl，或者我可以使用**urllib2**实现相同的功能吗？

非常感谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T17:34:41.070

`urllib2``urlopen()`的默认处理程序实际上似乎在调用时获取整个页面。`read()`不会阻止，因为整个页面已经可用。您可能可以编写自己的处理程序来流式传输数据（开启程序返回一个类似文件的对象，该对象通过`read()`响应公开，并且可以流式传输）但是如果另一个库已经具有该功能，我会使用相反。

# jquery - 如何使该字段仅接受 int？看法？模型？jQuery？

> ID：13631248
> 
> 赞同：-2
> 
> 时间：2012-11-29T17:21:36.270
> 
> 标签：jquery, asp.net-mvc-3, razor, view

为了使输入在 mvc3 视图中只接受 int，我需要做什么？谢谢。

```
[Display(Name = "Utilização")]
public int? utilizacao { get; set; }

[Display(Name = "Ordenação")]
public int? ordenacao { get; set; } 
```

例如：我的模型中有这些字段，它们是 int 并且在我看来

```
@Html.LabelFor(m => m.utilizacao):
@Html.TextBoxFor(m => m.utilizacao) 
```

用户可以写字符串而不是只写int，我怎么把字段只接受int？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T17:56:20.197

您需要使用数据注释。这是上一个问题的[链接](https://stackoverflow.com/questions/10753977/how-to-range-validation-integer-asp-net-mvc-3)，该问题详细解释了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T18:41:12.567

听起来您正在寻找可能是客户端驱动的东西，基于按键。这是我想出的。

```
$("#Utilização").keypress(function (e) {
            var keyCode = e.keyCode;
            if (keyCode == 32 || (keyCode >= 65 && keyCode <= 122))
                return e.returnValue = false;
        }); 
```

祝你好运。

# ruby - 无法通过 Ruby 获得 URL 响应

> ID：13631253
> 
> 赞同：1
> 
> 时间：2012-11-29T17:22:04.387
> 
> 标签：ruby, url, response

我在 Ruby 中连接到下面列出的 URL 时出错，即使该 URL 存在。这是为什么？

```
1.9.3p194 :003 > require 'uri'
 => true 
1.9.3p194 :004 > require 'net/http'
 => true 
1.9.3p194 :005 > url = "https://blogs.oracle.com/ksplice/entry/introducing_redpatch"
 => "https://blogs.oracle.com/ksplice/entry/introducing_redpatch" 
1.9.3p194 :006 > url_parsed = URI.parse(url)
 => #<URI::HTTPS:0x00000001939288 URL:https://blogs.oracle.com/ksplice/entry/introducing_redpatch> 
1.9.3p194 :007 > response = Net::HTTP.get_response(url_parsed)
Errno::ECONNRESET: Connection reset by peer 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T17:29:22.933

用这个

```
url = "https://blogs.oracle.com/ksplice/entry/introducing_redpatch"
uri = URI.parse(url)
http = Net::HTTP.new(uri.host, uri.port)
http.use_ssl = true
http.verify_mode = OpenSSL::SSL::VERIFY_NONE

request = Net::HTTP::Get.new(uri.request_uri)

response = http.request(request)
response.body 
```

它取自这里：[http ://www.rubyinside.com/nethttp-cheat-sheet-2940.html](http://www.rubyinside.com/nethttp-cheat-sheet-2940.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T19:11:42.803

与其使用 Net::HTTP，不如简化您的生活并使用 Ruby 的[OpenURI](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/open-uri/rdoc/OpenURI.html)。除非您需要低级控制或低级值的可见性，否则您会发现 OpenURI 已经足够好：

```
require 'open-uri'
url = "https://blogs.oracle.com/ksplice/entry/introducing_redpatch"
open(url).read.size
=> 35493 
```

# email - 用于备份的云端邮件客户端

> ID：13631256
> 
> 赞同：1
> 
> 时间：2012-11-29T17:22:08.160
> 
> 标签：email, cloud

我是云存储的新手，我想知道正在运行的邮件客户端，比如运行 RedHat 的机架空间服务器，如何将电子邮件本地存储在它的机器上，以便我们可以备份电子邮件。我正在尝试找到可以满足这些要求的最佳邮件客户端：

这些电子邮件帐户的备份如下： 1）每个电子邮件帐户必须每天单独备份 2）我们必须能够重建我们的邮件帐户，因为它在过去的某个日期看起来。3) 这些电子邮件帐户之间的电子邮件不能混用。换句话说，如果我们被要求恢复我们的“支持”邮件帐户，我们不应该包含来自“报告”邮件帐户的电子邮件。

该客户端将： 1) 坐在我们可访问的安全服务器上 2) 通过 IMAP 安全地连接到每个目标电子邮件帐户 3) 同步每个帐户的所有电子邮件并将电子邮件保留在文件系统上。每个邮件帐户必须存储在与我们正在备份的其他帐户位置不同的位置（根据上述监管要求）。例如，Thunderbird 支持配置文件的概念。4) 每个 Profile 在 fs 上维护自己独特的文件夹结构。然后，每个配置文件只负责提取邮件帐户的数据。5) 存储在这些配置文件中的邮件应使用我们拥有的安全密钥进行加密。我们选择的服务器基础设施很可能会满足这一要求，即亚马逊的云服务器将在加密文件系统上运行。

如果有人对雷鸟的理想替代品有任何想法，那将有很大帮助。

谢谢，康纳

# sql - Hive SQL 中的嵌套查询

> ID：13631259
> 
> 赞同：8
> 
> 时间：2012-11-29T17:22:26.723
> 
> 标签：sql, hive

我有一个数据库，我使用查询来生成一个像这样的中间表：

```
id    a      b    
xx    1      2    
yy    7      11 
```

我想为具有 < avg(a) 的用户计算 b 的标准偏差

我以这种方式计算 avg(a) 并且效果很好：

```
select avg(select a from (query to produce intermediate table)) from table; 
```

但是查询：

```
select stddev_pop(b) 
from (query to produce intermediate table) 
where a < (select avg(select a 
                     from (query to produce intermediate table))
          from table); 
```

返回一个错误，更准确地说，我被告知无法识别来自 avg(select a from...) 的“a”。这让我很困惑，因为它在前面的查询中有效。

如果有人可以提供帮助，我将不胜感激。

编辑：

我将查询结果存储到临时表中，以生成中间表，但仍然遇到同样的问题。非工作查询变为：

```
select stddev_pop(b) from temp where a < (select avg(a) from temp); 
```

虽然这有效：

```
select avg(a) from temp; 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-30T10:27:14.720

好的，同事帮我做的。如果有人遇到同样的问题，我会发布答案：

```
select stddev_pop(b)
from temp x
join (select avg(a) as average from temp) y
where x.a < y.average; 
```

基本上 hive 不会将表缓存为变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-05T06:34:49.670

好的，首先，hive 不支持仅在 from 子句之外的任何地方的子查询。所以你不能在 where 子句中使用子查询，你必须在 from 子句中创建一个临时表，你可以使用该表。现在，如果您创建一个临时表，并且在 where 子句中使用它，而不是引用该临时表，则它必须再次运行获取查询，因此它将不再支持 .

Bob 我认为 hive 将不支持这种 select stddev_pop(b) from temp where a < ( select * from (select avg(a) from temp) x );

但是是的 select stddev_pop(b) from temp x join (select avg(a) as average from temp) y where xa < y.average;

如果我们可以物理地创建一个临时表并将数据选择 avg(a) 作为 temp 的平均值，那么我们可以参考这个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T17:43:26.137

您可能需要在`WHERE`子句中移动括号。尝试这个：

```
select stddev_pop(b) 
from (query to produce intermediate table) 
where c < ( select avg(a) 
            from (query to produce intermediate table)
          ); 
```

而且，你的问题是指一个专栏`c`；你的意思是`a`？

更新：我今天看到了[一个类似的问题](https://stackoverflow.com/questions/13631344/deleting-outliers-with-mysql-using-standard-deviation)`MySQL`；抱歉，我不知道`Hive`。看看这是否有效：

```
select stddev_pop(b) 
from   temp 
where  a < ( select *
             from (select avg(a) from temp) x
          ); 
```

# maven - 使用 gradle 将 features.xml 部署到 nexus？

> ID：13631260
> 
> 赞同：2
> 
> 时间：2012-11-29T17:22:33.773
> 
> 标签：maven, deployment, gradle, nexus

我正在尝试创建一个 gradle 构建文件以将 features.xml 文件部署到本地 nexus maven 存储库中。除了直接使用 maven 之外，我还没有找到任何关于如何执行此操作的示例。任何人都有任何关于如何使用 gradle 执行此操作的示例？我也附上了工作的 maven POM。

谢谢，--克里斯蒂安

```
<project xmlns="http://maven.apache.org/POM/4.0.0"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
<modelVersion>4.0.0</modelVersion>

<groupId>company.dept</groupId>
<artifactId>deploy-feature</artifactId>
<packaging>pom</packaging>
<version>1.0</version>
<name>feature.xml</name>
<distributionManagement>
    <repository>
        <id>nexus.repo</id>
        <url>http://nexus:80/nexus/content/repositories/releases/</url>
    </repository>
</distributionManagement>

<build>
    <plugins>
        <plugin>
            <artifactId>maven-resources-plugin</artifactId>
            <version>2.4.3</version>
            <executions>
                <execution>
                    <id>copy-resources</id>
                    <phase>validate</phase>
                    <goals>
                        <goal>copy-resources</goal>
                    </goals>
                    <configuration>
                        <outputDirectory>${basedir}/target</outputDirectory>
                        <resources>
                            <resource>
                                <directory>resources</directory>
                                <filtering>true</filtering>
                            </resource>
                        </resources>
                    </configuration>
                </execution>
            </executions>
        </plugin>
        <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>build-helper-maven-plugin</artifactId>
            <executions>
                <execution>
                    <id>attach-artifacts</id>
                    <phase>package</phase>
                    <goals>
                        <goal>attach-artifact</goal>
                    </goals>
                    <configuration>
                        <artifacts>
                            <artifact>
                                <file>target/features.xml</file>
                                <type>xml</type>
                                <classifier>features</classifier>
                            </artifact>
                        </artifacts>
                    </configuration>
                </execution>
            </executions>
        </plugin>
    </plugins>
</build> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T14:34:31.573

在 gradle.properties 中设置位置

```
mavenServer=http://localServer:8042
mavenRepo=/nexus/content/groups/public
mavenReleases=/nexus/content/repositories/releases/
repoUsername=admin
repoPassword=password 
```

在 build.gradle

```
apply plugin: 'maven'

repositories {
  maven {
    url = mavenServer+mavenRepo
  }
}

artifacts {
  archives file('yourxmlfile')
}

uploadArchives {
  repositories {
    mavenDeployer {

      pom.artifactId = 'yourID'

      repository(url: mavenServer+mvnReleases) {
        authentication(username:repoUsername, password:repoPassword)
      }
    }
  }
} 
```

在 /.m2/ 目录中的 settings.xml 中

```
<settings xsd="<apache maven xsd>">
<mirrors>
  <mirror>
    <id>sonatype</id>
    <name>local sonatype nexus</name>
    <url>http://localServer/nexus/content/groups/public</url>
    <mirrorOf>*, !snapshots, !releases</mirrorOf>
  </mirror>
</mirrors>
</settings> 
```

最后一点将您的 Maven 镜像与**可**发布的工件分开

# ajax - 有条件地暂停 Javascript 以等待 ajax

> ID：13631264
> 
> 赞同：0
> 
> 时间：2012-11-29T17:22:50.500
> 
> 标签：ajax, jquery-ui, jquery

变量 ajaxdata 在成功函数中被修改，如果还没有完成，我想等待 2 秒，然后继续没有它。

该用例用于 jqueryui 自动完成字段。自动完成源是一个 ajax 请求，但如果用户快速键入并在列表加载之前退出该字段，则该字段保持未设置。使用自动完成上的“更改”事件，我检查用户是否在未选择的情况下输入了有效选项，但如果在更改事件触发时未加载源，这将不起作用。因此，如果源（存储在变量“ajaxdata”中）为空，我想延迟等待的更改函数。

代码：

```
input.autocomplete({
            source: function (request, response){
                    $.ajax(
                        {
                            type: "GET",
                            url: "/some/url",
                            dataType: "json",
                            success: function(data){
                                response($.map(data,function(item){
                                    return{
                                        label: item.label,
                                        value: item.value
                                    }
                                }));
                                ajaxdata = data;
                            }
                        }
                    );
                    // ajaxopts = ajaxsource(request,response,ajaxurl,xtraqry)
                },                   
            change: function(event, ui) {
                if (!ui.item) {
                    // user didn't select an option, but what they typed may still match
                    var enteredString = $(this).val();
                    var stringMatch = false;
                    if (ajaxdata.length==0){
                        ///  THIS IS WHERE I NEED A 2 SECOND DELAY
                    }
                    var opts = ajaxdata;
                    for (var i=0; i < opts.length; i++){
                        if(opts[i].label.toLowerCase() == enteredString.toLowerCase()){
                            $(this).val(opts[i].label);// corrects any incorrect case
                            stringMatch = true;
                            break;
                        }
                    }
            }
            },
        }); 
```

编辑：

更具体地说明问题：这种延迟需要是有条件的。这意味着如果数据已经加载（因为它来自静态源，或者来自更早的 ajax 调用）我不想有延迟。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T17:43:54.547

我不太确定你想要做什么，但我很确定这样的事情会是一种更好的方法：

```
input.autocomplete({
    source: function(request, response) {
        return $.ajax({
            type: "GET",
            url: "/some/url",
            dataType: "json"
        });
    },
    change: function(event, ui) {
        if (!ui.item) {
            // user didn't select an option, but what they typed may still match
            var enteredString = this.value;
            var stringMatch = false;
            //make sure ajax is complete
            this.source().done(function(data) {
                var opts = $.map(data, function(item) {
                    return {
                        label: item.label,
                        value: item.value
                    }
                });
                for (var i = 0; i < opts.length; i++) {
                    if (opts[i].label.toLowerCase() == enteredString.toLowerCase()) {
                        $(this).val(opts[i].label); // corrects any incorrect case
                        stringMatch = true;
                    }
                }
            });
        }
    }
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T16:33:49.177

如果我对您的理解正确，我想您只是想检查一下是否`ajaxdata`已填充；但如果没有，只需再等两秒钟，然后继续进行。

试试这个：

```
change: function(event, ui) {
    if (!ui.item) {
        // user didn't select an option, but what they typed may still match

        if (ajaxdata.length==0){
            ///  THIS IS WHERE I NEED A 2 SECOND DELAY

            //pass in 'this' so that you can use it
            setTimeout(function() {correctCase(this);}, 2000);
        }       
    }
} 
```

. . . . .

```
function correctCase(inThis){       

    //I'm not sure what this variable does.  do you really need it???   
    var stringMatch = false;

    var enteredString = $(inThis).val();
    //you still want to be sure that ajaxdata is not empty here
    if (ajaxdata.length==0){
        var opts = ajaxdata;
        for (var i=0; i < opts.length; i++){
            if(opts[i].label.toLowerCase() == enteredString.toLowerCase()){
                $(inThis).val(opts[i].label);   // corrects any incorrect case
                stringMatch = true;  //this variable doesn't seem to do anything after this???
                break;
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-18T15:59:36.833

默认情况下，JavaScript 在遇到异步函数时是异步的，它会将该函数排队以备后用。但是，如果您想要暂停 js（ajax 调用或任何东西），您可以使用 Promise 案例 1：输出 hello（不会等待 setTimeout） [https://jsfiddle.net/shashankgpt270/h0vr53qy/](https://jsfiddle.net/shashankgpt270/h0vr53qy/)

```
//async 
function myFunction() {
let result1='hello'
//promise =new Promise((resolve,reject)=>{
setTimeout(function(){ 
resolve("done");
result1="done1";
}, 3000);
//});
 //result = await promise
 alert(result1);
}
myFunction(); 
```

案例2：输出done1（将等待setTimeout） [https://jsfiddle.net/shashankgpt270/1o79fudt/](https://jsfiddle.net/shashankgpt270/1o79fudt/)

```
async function myFunction() {
let result1='hello'
promise =new Promise((resolve,reject)=>{
setTimeout(function(){ 
resolve("done");
result1="done1";
}, 3000);
});
 result = await promise
 alert(result1);
}
myFunction(); 
```

# workflow - Jira - Greenhopper KanBan - 自定义完成操作（移动到新板 - 更改状态）

> ID：13631265
> 
> 赞同：0
> 
> 时间：2012-11-29T17:22:58.580
> 
> 标签：workflow, jira, jira-agile, jira-ondemand

我们将 jira 与 Greenhopper 插件一起使用。

我正在尝试找到一种链接工作流程的方法。

所以可以说我们有一个开发工作流程

```
backlog -> queued -> development -> testing -> signoff -> done 
```

很简单，但我想创建一个可能导致此的规划工作流程，例如它可能是：

```
Feature request -> Priority -> Specification -> Signoff -> Done 
```

就其本身而言足够简单，但我希望在完成（或从完成中释放）中删除的项目跳转到开发工作流程的积压列。

所以我正在寻找一种控制“完成”操作的方法，或者使用状态转换将任务移动到新的项目/板（如果存在子任务）并更改状态。

我知道我可以使用一个长工作流程和不同的板，我可以隐藏列，但我希望能够链接几个可能不相关的工作流程。

我很感激任何线索。

* * *

编辑 - 我正在使用托管的 Jira。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T22:42:08.003

事实证明，你无法得到我需要的结果。您几乎可以通过使用一个长工作流程来获得我想要的效果，该工作流程为每个状态使用一个独特的状态。您可以将板设置为分组，或不显示某些状态。因此，通过在同一个工作流程上使用多个板，以及一些手动移动问题/任务，这种工作需要。但缺乏自动化是一种打击。

# ruby-on-rails - heroku 部署、DateTime 和 strftime 的问题

> ID：13631266
> 
> 赞同：0
> 
> 时间：2012-11-29T17:23:00.917
> 
> 标签：ruby-on-rails, datetime, heroku, strftime

我无法将我的 rails 应用程序部署到 Heroku。我像往常一样做了，但这次我在控制台上遇到了这些错误。

我想知道它们是如何出现的，因为我什至没有`gsub!`在这里使用过。

在我正常的生产环境中它工作得很好，那么在这种情况下我忘了考虑什么？

谢谢你的帮助！

错误提示：（顺便说一下，数据库内容不是零或类似的东西）

```
Started GET "/tournaments" for XXX at 2012-11-29 17:14:18 +0000
Processing by TournamentsController#index as HTML
  Rendered tournaments/index.html.erb within layouts/application (74.9ms)
Completed 500 Internal Server Error in 193ms

    31:     <td><%= raw tournament.address.split(", ").join("<br />") %></td>
    33:     <td><%= DateTime.parse(tournament.date).strftime("%H:%M") %></td>
ActionView::Template::Error (undefined method `gsub!' for 2012-12-08 15:00:00 UTC:Time):
    30:     <td><%= tournament.place %> von <%= tournament.participants %></td>
    35:     <td><%= link_to 'Show', tournament %></td>
  app/views/tournaments/index.html.erb:32:in `block in _app_views_tournaments_index_html_erb___1016767371206226983_23066580'
  app/views/tournaments/index.html.erb:26:in `each'
  app/views/tournaments/index.html.erb:26:in `_app_views_tournaments_index_html_erb___1016767371206226983_23066580'
    29:     <td><%= tournament.user.name %></td>

  app/controllers/tournaments_controller.rb:11:in `index'
    32:     <td><%= DateTime.parse(tournament.date).strftime("%d.%m.%Y") %></td>
    34:     <td><%= tournament.kind %></td> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T18:56:01.963

看起来返回的对象`tournament.date`是 type `Time`，其中`DateTime.parse`需要一个字符串。该`parse`方法的底层实现对`gsub!`传递的参数执行 a 。因此错误。

你有两个解决方案：

1.  如果你总是`Time`从那里得到一个对象，`tournament.date`你可以使用`tournament.date.to_datetime`（虽然我不认为你真的需要一个`DateTime`对象。你可以使用`Time`对象`strftime`）

2.  如果你不能保证一个`Time`对象，那么将字符串化对象传递给`parse`这样`DateTime.parse(tournament.date.to_s)`

PS：我不知道这段代码在你的本地机器上是如何为你工作的。可能是因为两种设置中的 ruby​​ 版本不同。我的答案基于 MRI 1.9.2。

# ios - 为什么 IOS-API 在我自己的页面上发布 Facebook 页面上的照片？

> ID：13631272
> 
> 赞同：1
> 
> 时间：2012-11-29T17:23:24.213
> 
> 标签：ios, facebook-graph-api, post, photo

我使用下面的代码在 Facebook PAGE 上发布照片，而不是我自己的页面。

```
 [FBRequestConnection
      startWithGraphPath:@"/PAGE_ID/photos"
      parameters:self.postParams
      HTTPMethod:@"POST" 
```

但是，在请求这个之后，上传到我自己页面上的照片不是 PAGE_ID 的墙。

我不明白..我只是跟着这个，[http://developers.facebook.com/docs/reference/api/page/#photos](http://developers.facebook.com/docs/reference/api/page/#photos)

但结果不是我所期望的.. :(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T18:27:19.830

使用页面访问令牌而不是用户的访问令牌发布 -

您在此处注意到的差异（指定对象（页面）被忽略以支持访问令牌所有者（用户）是一个已知问题，据我所知，将在未来几个月内解决

# mercurial - Mercurial：移植 vs. 记录 vs. qrecord vs. shelve vs. 移植 vs. dirstate vs. queue

> ID：13631273
> 
> 赞同：11
> 
> 时间：2012-11-29T17:23:25.167
> 
> 标签：mercurial, shelving

我是 Mercurial 的新手，并且不知何故仍处于评估过程中，所以这四个概念对我来说有点混乱。有些被提到等同于 Git 的 Staging/Index 概念，有些甚至比 Git 的 Staging 更好。

四个命令`hg graft`、`hg record`和（和`hg qrecord`，但这在[Graft vs. Transplant](https://stackoverflow.com/questions/8009632/graft-vs-transplant)中已经解释过）如何相互比较，以及**队列**和**dirstate**的概念如何？在哪些用例中选择一个而不是另一个？`hg shelve``hg transplant`

 ****我知道每个页面都有帮助页面，但是仍然很难弄清楚每个页面的作用，因为通常 VCS 对我来说是一个新主题。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-29T17:42:55.640

Mercurial 的设计根本不包括暂存区的概念。即本地修改和提交之间没有中间状态。

以下是您提到的每个概念的概述：

[`hg graft`](https://www.mercurial-scm.org/repo/hg/help/graft)相当于[`git cherry-pick`](http://www.kernel.org/pub/software/scm/git/docs/git-cherry-pick.html)。它将提交从一个分支复制到另一个分支。此功能的典型用例是将错误修复从一个发布分支复制到另一个。此命令替换旧的（现在已过时的）[`hg transplant`](https://www.mercurial-scm.org/wiki/TransplantExtension)扩展。

[`hg record`](https://www.mercurial-scm.org/wiki/RecordExtension)并且`hg qrecord`类似于[`git add --patch`](http://www.kernel.org/pub/software/scm/git/docs/git-add.html)。它们允许您以交互方式选择要提交的块。因此，如果您修改了一个文件的多个不同区域，您可以选择您实际想要提交的区域（即大块）以及您想要保留哪些区域作为本地修改。

`qrecord`仅当您`mq`启用时才可用。它提交`mq`补丁而不是标准提交。

[`hg shelve`](https://www.mercurial-scm.org/wiki/ShelveExtension)类似于[`git stash`](http://www.kernel.org/pub/software/scm/git/docs/git-stash.html)。它允许您暂时搁置对文件（或文件大块）的本地修改。这些修改可以`unshelved`在您准备好时进行。

`dirstate`是 Mercurial 源代码的内部类。它不会暴露给用户。

[`Mercurial Queues`](https://www.mercurial-scm.org/wiki/MqExtension)（也称为`mq`）可能是您最接近 Mercurial 暂存区的位置。以下是 Mercurial wiki 的描述：

> 更改作为提交到 Mercurial 的补丁进行维护。可以删除或重新排序提交，并且可以根据工作目录中所做的更改刷新底层补丁。补丁目录也可以置于版本控制之下，因此您可以拥有对补丁所做更改的单独历史记录。

`mq`通常用于完善/返工您在本地测试但尚未推送到公共位置的提交。有些人还使用它来维护对 3rd 方代码的一组修改。****

# node.js - 从另一个节点应用程序调用下载节点应用程序依赖项

> ID：13631278
> 
> 赞同：0
> 
> 时间：2012-11-29T17:23:32.543
> 
> 标签：node.js, npm

我有一个使用节点开发的命令工具应用程序。当我运行命令时指向文件夹时，它应该安装文件夹中 package.json 文件中指定的节点依赖项。有可能这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T17:28:21.893

你需要使用

```
 exec = require('child_process').exec;
 exec(#your command starts here 
```

但一般来说，你应该在提问之前进行谷歌搜索：[http ://nodejs.org/api/child_process.html](http://nodejs.org/api/child_process.html)

还请记住，执行您的工具的用户应该具有访问权限（例如根或目标文件夹所有者）

PS：很抱歉格式错误和文字很少 - 从手机输入:)

# django - Django 管理员根据多对多关系选择对象

> ID：13631279
> 
> 赞同：0
> 
> 时间：2012-11-29T17:23:35.613
> 
> 标签：django, python-2.7, django-admin

我正在构建一个扩展 Mezzanine 项目的 django 应用程序。Mezzanine 有一个 Gallery 应用程序（照片）。我想创建一个“投资组合”页面，作为一个登陆页面，它有一个图像和指向每个画廊页面的链接。

每个画廊（Gallery）可以有多个图像（GalleryImage）。我想通过管理员选择一个画廊，然后选择要显示的图像。但是，我似乎无法弄清楚该怎么做。

这是我的模型：

```
class GalleriesThumb(models.Model):
    relatedlandingpage = models.ForeignKey(LandingPage)
    relatedgallery = models.ForeignKey(Galleries)
    thumb = models.ManyToManyField(GalleryImage)

    def __unicode__(self):
        return self.name

class Galleries(models.Model):
    landingpage = models.ForeignKey(LandingPage)
    tagline = models.CharField(max_length=100)
    galleries = models.ManyToManyField(Gallery)

    def __unicode__(self):
        return self.name
class LandingPage(models.Model):

    gallerytitle = models.CharField(max_length=200)

    def __unicode__(self):
        return self.name 
```

我的管理员是这样的：

```
class GalleryInline(admin.InlineModelAdmin)
    model = Galleries
    model = GalleriesThumb
    list_display = galleries
    list_display = thumb

class LangingPageAdmin(admin.ModelAdmin):
    fieldsets = (
        (None, {
            'fields': ('gallerytitle')
        })
    inlines = [GalleryInline,] 
```

我意识到这不会做我想要的，但我如何在与画廊相关的图像上获得 list_display。我很确定它需要是一种方法，或者如果所做的选择将定义页面上的内容，我是否采取了完全错误的方法。（我意识到我也缺少存储选择的字段。）

如果这是一个愚蠢的问题，我很抱歉，但这是我在现实世界中第一次尝试应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T23:27:25.920

我认为此链接将解决您的问题

[多对多字段的 Django 1.2.1 内联管理](https://stackoverflow.com/questions/3153026/django-1-2-1-inline-admin-for-many-to-many-fields/3162027#3162027)

```
class GalleryInline(admin.InlineModelAdmin)
    model = Galleries.galleries.through 
```

# stored-procedures - 在 VBA 中使用参数执行 SQL 存储过程

> ID：13631280
> 
> 赞同：2
> 
> 时间：2012-11-29T17:23:39.167
> 
> 标签：stored-procedures, excel, vba

我对此很陌生。我正在尝试在 VBA 中编写一个从 excel 执行存储过程并返回记录集的过程。它目前在电子表格 2 中返回存储过程的结果，但我不得不将参数硬编码到 SQL 代码中。这是我从其他在线论坛中摘录的内容。

```
Option Explicit

Public Sub OpenConnection()

'Set the variables
Dim conn As ADODB.Connection
Dim str As String
Dim cmd As ADODB.Command
Dim rs As ADODB.Recordset
Dim fld
Dim i As Integer

'Error handler
On Error GoTo errlbl

'Open database connection
Set conn = New ADODB.Connection

'First, construct the connection string.

'ODBC CONNECTION YOU'VE ALREADY SET UP:
conn.ConnectionString = "DSN=PC_Tool_Coding"

conn.Open       'Here's where the connection is opened.

Debug.Print conn.ConnectionString  'This can be very handy to help debug!

'Recordset
Set rs = New ADODB.Recordset

str = "exec Select_account_info"

'recordset is opened here
rs.Open str, conn, adOpenStatic, adLockReadOnly

If Not IsEmptyRecordset(rs) Then
    rs.MoveFirst

    'Populate the first row of the sheet with recordset’s field names
    i = 0
    For Each fld In rs.Fields
        Sheet2.Cells(1, i + 1).Value = rs.Fields.Item(i).Name
        i = i + 1
    Next fld
    'Populate the sheet with the data from the recordset
    Sheet2.Range("A2").CopyFromRecordset rs

Else
    MsgBox "Unable to open recordset, or unable to connect to database.", _
       vbCritical, "Can't get requested records"

End If

'Cleanup
rs.Close
Set rs = Nothing
conn.Close
Set conn = Nothing

exitlbl:
  Debug.Print "Error: " & Err.Number
  If Err.Number = 0 Then
    MsgBox "Done", vbOKOnly, "All Done."
  End If
  Exit Sub
errlbl:
   MsgBox "Error #: " & Err.Number & ", Description:  " & Err.Description, vbCritical, "Error in OpenConnection()"
Exit Sub
'Resume exitlbl
End Sub 
```

我已经环顾四周如何让它与参数一起工作，但我似乎无法到达那里。我将使用的参数在 SQL 中称为 @accgrpnum。它是一个 12 个字母的字符串。

非常感谢提前提供的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T21:42:19.320

看看 bonCodigo 的链接或

我也能够通过发送多个语句来做到这一点（使用 SQL Server 2008），但在 SQL 语句中分开

```
str = "SET @accgrpnum = 'my_account'; exec Select_account_info;" 
```

# bash - 将输入传递给脚本：标准输入与 argv 中的文件路径

> ID：13631285
> 
> 赞同：1
> 
> 时间：2012-11-29T17:23:51.930
> 
> 标签：bash, shell, coding-style

我编写了许多简单的脚本来测试或处理 CSV 文件。大多数脚本具有相同的逻辑：读取一个文件并将输出写入控制台或另一个文件。对于这种情况，我通常使用最简单的实现方法： read from `stdin`， write to `stdout`，所以调用就像：

```
script < input.csv > output.csv 
```

你能给出一些我为什么更喜欢这种风格的观点吗：

```
script input.csv > output.csv 
```

甚至：

```
script input.csv output.csv 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T18:52:50.427

以下是如何拥有一个同时处理两者的脚本（不能保证 100% 安全，也许有人可以提供更好的选择或在评论中指出严重的问题）：

```
#!/bin/bash

if [[ -n $1 ]]; then
    exec "$0" < "$1" || exit $?
fi

# your program starts here, reading stdin, e.g.,
while read; do
   echo "$REPLY"
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-23T19:26:00.950

这就是我现在处理相同任务的方式，类似于@gniourf_gniourf 的答案（除了我的脚本在 Haskell 中）。

当使用参数调用程序时，例如`CMD INPUT1 [INPUT2 [...]]`，将它们视为输入文件并忽略标准输入，除非一个或多个参数为`-`.

当没有给出参数时，读取标准输入。所以`CMD`不带参数的调用等效于`CMD -`.

# actionscript-3 - Flash Builder 4.6 接口编程

> ID：13631296
> 
> 赞同：0
> 
> 时间：2012-11-29T17:24:25.460
> 
> 标签：actionscript-3, apache-flex, flash-builder

我很难找到许多面向桌面应用程序编程的 Flash Builder 4.6 可用资源。

我正在尝试完成一项简单（或至少我认为简单）的任务。我有一个应用程序，应用程序中有一个按钮。当用户单击按钮时，我希望加载一个新窗口，而不是在当前窗口中加载；作为一个完全独立的窗口。

我曾经设法做到这一点，但我使用的代码给出了一个警告（来自 Adob​​e Flash Builder 4.6），告诉我最好使用“界面”，因为新窗口现在是窗口的子窗口打开它。（因为我一直在尝试其他东西，比如 ModuleLoader，所以我丢失了这段代码）。

基本上我的问题是，有人可以提供一个示例，说明如何以可以加载 2 个单独的窗口应用程序并且它们可以通过事件相互通信的方式正确实现接口吗？

作为奖励，如果有人可以向我指出一个好的资源的方向，我也会很感激（书或网站）。:) 我读过一本 Flex 4 书，它对我理解基本知识有很大帮助，但不适合 AIR 桌面编程（也没有提到界面）。

感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T13:07:24.043

我是如何解决这个问题的。这篇文章有帮助：[Flex 应用程序中的双显示器支持](https://stackoverflow.com/questions/11880104/dual-monitor-support-in-flex-application/11888089#11888089)。

在 Adob​​e Flash Builder 4.6 中创建项目后，转到文件 > 新建 > MXML 组件。输入您认为最适合您的应用程序的详细信息，但在“基于”字段下，输入“spark.components.Window”。完成所有详细信息后，单击“完成”。

在您的主应用程序中，使用以下代码将您刚刚创建的新窗口组件拉到一个单独的窗口中。出于此代码的目的，我假设您的新窗口位于“assets.components”下并称为 CompNewWindow。用您自己的替换这些详细信息。

```
<s:Button x="0" y="0" label="Button" click="_loadNewWindow(event)" />

<fx:Script>
    <![CDATA[

        import assets.components.CompNewWindow;

        private var myNewWindow:CompNewWindow;

        private function _loadNewWindow(event:MouseEvent):void
        {
            if (!myNewWindow) {
                myNewWindow = new CompNewWindow();
                myNewWindow.addEventListener(Event.CLOSE, _onNewWindowClose);
                myNewWindow.open();
            }
         }

        private function _onNewWindowClose(event:Event):void
        {
            myNewWindow.removeEventListener(Event.CLOSE, _onNewWindowClose);
            myNewWindow = null;
        }

    ]]>
</fx:Script> 
```

# youtube - 更新政策最新提要

> ID：13631298
> 
> 赞同：0
> 
> 时间：2012-11-29T17:24:27.537
> 
> 标签：youtube, youtube-api

有谁知道（德语或任何其他特定语言的）“最新”动态（“新闻与政治”）类别（“新闻与政治”）实时更新或如何获取此类别中的最新视频？它似乎不包括此类别中上传的所有视频...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T16:36:57.063

很遗憾，我们没有为给定类别中新更新的视频提供真正的“消防水带”供稿。“最新”提要会延迟更新，并且更新的实际间隔会有所不同。

# excel - 在 Excel 中合并和旋转多年数据

> ID：13631303
> 
> 赞同：0
> 
> 时间：2012-11-29T17:24:57.527
> 
> 标签：excel, worksheet-function

我目前有大量的 Excel 数据，它们以“国家”和“系列”作为行标题，不同年份（1960-2012）作为单独的列标题。我想旋转数据，因此我将“国家”和“年份”作为行标题，将各种系列作为列标题。如何合并年份（1960-2012）以便创建这样的数据透视表？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T18:13:49.553

尝试在此处使用我的 unpivot 加载项进行 unpivoting：http: [//tduhameau.wordpress.com/2012/09/24/the-unpivot-add-in/](http://tduhameau.wordpress.com/2012/09/24/the-unpivot-add-in/)

# android - ImageView - 左对齐 - 缩放高度 - 裁剪宽度，没人知道吗？

> ID：13631311
> 
> 赞同：2
> 
> 时间：2012-11-29T17:25:20.947
> 
> 标签：android, android-layout, android-widget

我试图让 ImageView 内的图像缩放以填充高度，保持与左侧对齐，并相应地裁剪宽度以保持宽度/高度比。

Scaletype - centercrop 有点这样做，但对齐图像中心（顾名思义），但我希望图像向左对齐，所以我没有得到图像左侧的任何裁剪。

这是我当前的布局：

```
<ScrollView android:id="@+id/MainScrollView"
android:layout_width="fill_parent"
android:layout_height="fill_parent" 
xmlns:android="http://schemas.android.com/apk/res/android" 
android:background="#000000"
android:fillViewport="true">

<LinearLayout
android:id="@+id/lineLayout1"
android:layout_width="match_parent"
android:layout_height="wrap_content" 
android:orientation="vertical">

<RelativeLayout
    android:id="@+id/RelativeLayout1"
    android:layout_width="fill_parent" android:layout_height="93dp">
    <ImageView 
      android:id="@+id/imageView1" 
      android:layout_width="wrap_content" 
      android:layout_height="fill_parent" 
      android:src="@drawable/top"
      android:layout_gravity="right"
      android:scaleType="centerCrop" /> 
```

有什么建议么？

谢谢。

# c# - 比较两个对象属性的最快方法

> ID：13631312
> 
> 赞同：0
> 
> 时间：2012-11-29T17:25:22.840
> 
> 标签：c#, .net, reflection

有人建议为此使用反射。我的方法效果很好，但是经过 800,000 次迭代后，我得出了一个明显的结论（大多数人已经得出），即反射并不能解决问题。

这是我的 Helper 类的一部分：

```
public static class Helper
{
    public static string[] ignoredProperties =
    { 
        "EntityState", 
        "EntityKey", 
        "Prop1", 
        "Prop2", 
        "Whatever", 
    };

    /// <summary>
    /// Check if properties of two objects are the same. Bypasses specified properties.
    /// </summary>
    /// <typeparam name="T"></typeparam>
    /// <param name="first"></param>
    /// <param name="other"></param>
    /// <param name="ignoreProperties"></param>
    /// <returns></returns>
    public static bool PropertiesEquals<T>(this T first, T other, string[] ignoreProperties)
    {
        var propertyInfos = first.GetType().GetProperties();
        foreach (PropertyInfo propertyInfo in propertyInfos)
        {
            //Faster with custom method ? Nah...
            //if (FindElementIndex(ignoreProperties, propertyInfo.Name) < 0)

            //Probably faster if hardcoded.... Nah, not really either...
            //if (propertyInfo.Name != "EntityKey" && propertyInfo.Name != "EntityState" && propertyInfo.Name != "Group_ID" && propertyInfo.Name != "Import_status")

            if (Array.IndexOf(ignoreProperties, propertyInfo.Name) < 0)
                if (!Equals(propertyInfo.GetValue(first, null), propertyInfo.GetValue(other, null)))
                    return false;
        }
        return true;
    }

    public static int FindElementIndex(string[] input, string value)
    {
        int arraySize = input.Length - 1;
        Type valueType = value.GetType();

        for (int x = 0; x <= arraySize; x++)
        {
            if (input[x] == value)
                return x;
        }

        return -1;
    } 
```

问题是这些对象，根据类型，最多可以检查 50 个属性。所以我真的不能在那里做一堆`if`s 。

有什么办法可以加快速度吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T17:29:14.617

您可以使用[Reflection.Emit](http://msdn.microsoft.com/en-us/library/3y322t50.aspx)动态创建比较方法，然后简单地运行它。代码将被 JITted 并运行得相当快。

有一个缺点 - 你必须知道 IL 是如何工作的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T17:30:30.500

> 有什么办法可以加快速度吗？

绝对地。如果您要为不同的对象多次获取相同的属性，请为每个属性创建一个委托（有关一些示例，请参阅我不久前写的[这篇博](https://codeblog.jonskeet.uk/2008/08/09/making-reflection-fly-and-exploring-delegates/)文）或使用[Hyperdescriptor 之](http://www.codeproject.com/Articles/18450/HyperDescriptor-Accelerated-dynamic-property-acces)类的项目。

（从 .NET 3.5 开始，另一种创建委托的方法是使用表达式树并编译它们。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T17:31:15.080

您可以构建一个**[表达式](http://msdn.microsoft.com/en-us/library/bb397951.aspx)**，您可以在其中指定应比较哪些属性。然后，您可以将其编译为 lambda 表达式，并使用它来比较项目与委托调用的性能。

# ruby-on-rails - 如何在 Rails 应用程序中创建 redis 侦听器

> ID：13631318
> 
> 赞同：4
> 
> 时间：2012-11-29T17:25:51.177
> 
> 标签：ruby-on-rails, ruby, redis

我的情况如下：

我有一个 Rails 应用程序，它有一个用于记录系统事件的活动记录模型。这些系统事件可以来自 rails 应用程序或单独的 Ruby 应用程序。ruby 应用程序当前将其事件发布到 Redis 队列。

Rails 应用程序中是否有办法启动 Redis 侦听器并订阅队列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T21:27:24.257

正如@sergio 所提到的，您的 rails 应用程序不是 redis**客户端**的地方。Rails Web 应用程序是响应客户端请求的**服务器**端应用程序。这就是为什么您需要一个单独的进程（最好是守护进程），它充当您的 redis 服务器的客户端。

要守护你的 redis 客户端，你可以使用`daemons`gem。我通常将我的守护进程放在`<app-root>/lib/daemons/`

您可以在您的守护进程中加载​​完整的 Rails 环境，方法是在开头包含以下几行：

```
require File.dirname(__FILE__) + "/../config/application"
Rails.application.require_environment! 
```

这样您就可以访问您的模型，并可以通过您的模型类与您的数据库进行交互。

# javascript - jQuery UI TypeError：e.widget.extend 不是函数

> ID：13631325
> 
> 赞同：22
> 
> 时间：2012-11-29T17:26:11.790
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-tooltip

我已经更新了我的 jQuery 文件，包括 jQUery UI 以使用工具提示功能。

但现在 Javascript 因以下错误而死：

```
TypeError: e.widget.extend is not a function 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-11-29T19:40:13.387

jQuery Ui 被包含两次（第二次因为另一个错误而隐藏）问题已解决

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-15T02:32:39.293

我收到 tag-it.min.js 的类似错误

b.widget 不是函数 tag-it.min.js

当我检查时，发现在这种情况下我的文件正在加载

```
<script src="/scripts/tag-it.min.js">
<script src="/scripts/jquery-ui-1.11.1.js"> 
```

只是颠倒顺序，它是固定的

也许它可以帮助某人

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-04T02:47:02.607

我不得不添加 wp_deregister_script( 'jquery-ui-widget' ); 到 admin-footer.php 只为 widgets.php 文件例外。

# java - 如何将文件保存在内存中并在其他java程序中读取

> ID：13631332
> 
> 赞同：0
> 
> 时间：2012-11-29T17:26:35.540
> 
> 标签：java

我有一个巨大的数据文件。每次在内存中读取这个文件非常耗时。我想将此文件始终保存在内存中，就像后台进程一样，我的其他 java 程序可以按需从内存中读取它。谁能告诉我该怎么做

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T17:33:48.960

操作系统确定哪些文件保存在其磁盘缓存中的内存中。如果您重复读取同一个文件，它应该在内存中，除非它的大小与您的内存大小或更多。

如果重复读取需要很长时间，则可能是文件的读取/解析需要时间，而不是加载/读取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T18:49:18.757

通常的方法是将巨大的数据文件导入到表示文件内容的 java 对象中。在内存中，这个对象可能需要更少的内存或更多的空间，这取决于。

一旦你有了那个对象，你就不需要再导入它了。

第一次需要该对象时，您读取文件。
稍后当您再次需要该数据时，您可以访问您的对象但不再读取该文件。

# php - 在 Symfony 中禁用错误 页面

> ID：13631334
> 
> 赞同：2
> 
> 时间：2012-11-29T17:26:48.737
> 
> 标签：php, symfony

我想完全禁用 Symfony 中的树枝错误页面。我不想像这里描述的那样自定义它们：http: [//symfony.com/doc/2.0/cookbook/controller/error_pages.html](http://symfony.com/doc/2.0/cookbook/controller/error_pages.html)而是简单地拔掉twig的异常处理机制并最终得到简单的旧php错误。

有可能吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-29T19:13:37.330

要禁用树枝错误页面，您只需添加类似

```
services:
   twig.exception_listener:
     class: DateTime #or another dummy class 
```

到你的 app/config.yml

在此之后，您将看到由 Symfony\Component\HttpKernel\Debug\ExceptionHandler 生成的许多简单屏幕。如果您想删除此行为 - 替换此类或仅注释 set_exception_handler 调用。

```
public static function register($debug = true)
{
    $handler = new static($debug);

    set_exception_handler(array($handler, 'handle'));

    return $handler;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-07T08:42:06.490

在 Symfony 3.x 中，可以这样做：

在**services.yml**中，添加监听器覆盖（如@Ziumin 的回答）：

```
services:
  twig.exception_listener:
    class: stdObject 
```

在**app_dev.php**中，注释掉该行`Debug::enable();`，这将禁用甚至简化的错误处理页面（然后无需从框架修改文件）。

然后，您可以添加自己的异常处理程序：

```
// Disable error handling page:
// Debug::enable();

set_exception_handler(function($e) {
    $msg = array();
    $msg[] = 'Exception: ' . $e->getMessage() . ' at ' . $e->getFile() . ':' . $e->getLine();
    $msg[] = '';
    $msg[] = $e->getTraceAsString();
    echo implode("\n", $msg);
}); 
```

# java - java awt setLocationRelativeTo 与多个监视器 p

> ID：13631335
> 
> 赞同：0
> 
> 时间：2012-11-29T17:26:50.670
> 
> 标签：java, awt

我有 Jpanel，它在单击按钮时最大化。我通过将尺寸设置为屏幕大小然后调用 setLocationRelativeTo(null) 来做到这一点。如果我在主监视器中有面板，这很好用，但是当面板在其他监视器上时，单击按钮总是使面板移动到主监视器。有没有办法获取当前使用的面板监视器并将其用于新位置。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T22:22:32.987

我家里只有一个屏幕，周一会回到工作岗位，但以下代码在 Windows 7 64 位下将 JFrame 的标题设置为“\Display0”。我想这个字符串是屏幕的 ID，第二个屏幕被命名为“\Display1”。

*   [组件.getGraphicsConfiguration()](http://docs.oracle.com/javase/7/docs/api/java/awt/Component.html#getGraphicsConfiguration%28%29)
*   [GraphicsConfiguration.getDevice()](http://docs.oracle.com/javase/7/docs/api/java/awt/GraphicsConfiguration.html#getDevice%28%29)
*   [GraphicsDevice.getIDstring()](http://docs.oracle.com/javase/7/docs/api/java/awt/GraphicsDevice.html#getIDstring%28%29)

我建议在多屏 PC 上运行这个应用程序来评估它。

```
import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.SwingUtilities;

public class Frm
   extends
      JFrame
   implements
      ActionListener
{
   Frm()
   {
      setDefaultCloseOperation( EXIT_ON_CLOSE );
      setPreferredSize( new Dimension( 640, 480 ));
      setLayout( new BorderLayout());
      JButton getScreenBtn = new JButton( "Get Screen ID" );
      add( getScreenBtn, BorderLayout.CENTER );
      getScreenBtn.addActionListener( this );
      pack();
      setLocationRelativeTo( null );
      setVisible( true );
   }

   @Override
   public void actionPerformed( ActionEvent e ) {
      setTitle( getGraphicsConfiguration().getDevice().getIDstring());
   }

   public static void main( String[] args ) {
      SwingUtilities.invokeLater( new Runnable() {
         @Override public void run() { new Frm(); }});
   }
} 
```

# java - 在数组中查找最小和最大元素并打印元素的位置

> ID：13631343
> 
> 赞同：0
> 
> 时间：2012-11-29T17:27:49.237
> 
> 标签：java, arrays

在不使用算法的情况下找到数组中最大和最小元素并打印其索引位置的最简单方法是什么。有没有办法使用循环或 if 语句来做到这一点，因为我是 java 新手，就我目前所知。

这是我的数组代码：

```
import java.io.*;
public class Tut2ArraysQ4
{

public static void main(String [] args) throws IOException
{
 BufferedReader kbd = new BufferedReader(new InputStreamReader(System.in));

int []item=new int[5];
    for (int i = 0; i < item.length; i++)
        {
            System.out.println("Enter a number: ");
            int num=Integer.parseInt(kbd.readLine());
            System.out.println("Index " + i + " Contains Number "     + num);
        }

}//end class
}//end main 
```

我很感激你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T17:32:30.337

您声明两个变量等于数组第一个位置的元素，两个变量等于第一个位置。

```
int min = array[0];
int max = array[0];
int posMin = 0;
int posMax = 0; 
```

对数组的所有位置进行 for 迭代：

```
 for(all the position of the array)
      // if current position bigger than max
         // max = element of the array in the current position
         // posMin = current position
     // if current position smaller than min
        // min = element of the array in the current position
        // posMax = current position 
```

另一种方法是对数组进行排序，最小的元素位于数组的第一个位置，最大的元素位于数组的最后一个位置。但是，此解决方案通常需要`N lg N`我在`N`. 如果您使用的是基数排序，则需要 k N，但是：

> 有时 k 表示为一个常数，这将使基数排序（对于足够大的 n）比最好的基于比较的排序算法更好，这些算法都是 O(n·log(n))。然而，一般来说，k 不能被认为是一个常数。

阅读更多[关于](http://en.wikipedia.org/wiki/Radix_sort)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T22:36:04.907

很抱歉，但不幸的是，如果不使用算法，就无法做你想做的事情。

即使您选择了 2 个数字并认为您是对的，您也将使用算法。

# mysql - 使用标准偏差使用mysql删除异常值

> ID：13631344
> 
> 赞同：0
> 
> 时间：2012-11-29T17:27:50.873
> 
> 标签：mysql, sql

我使用下面的查询来删除异常值（sd 的 1.5 倍）。

```
DELETE FROM sv_condition_sw 
WHERE snow_mountain > (
    SELECT AVG(snow_mountain)+1.5*STDDEV(snow_mountain) 
    FROM sv_condition_sw 
    WHERE lud='2012-11-28' AND res_id=769)
AND lud='2012-11-28' 
AND res_id=769 
```

但是它给出了这个错误：

询问：`delete FROM sv_condition_sw WHERE snow_mountain > (SELECT AVG(snow_mountain)+1.5*STDDEV(snow_mountain) FROM sv_condition_sw WHER...`

```
Error Code: 1093
You can't specify target table 'sv_condition_sw' for update in FROM clause 
```

我不知道这是什么意思。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T17:29:40.533

您可以使用另一个子选择来欺骗 MySQL

```
DELETE FROM sv_condition_sw 
WHERE snow_mountain > (select * from (SELECT AVG(snow_mountain)+1.5*STDDEV(snow_mountain) 
                                      FROM sv_condition_sw 
                                      WHERE lud='2012-11-28' 
                                      AND res_id=769) x)
 AND lud='2012-11-28' AND res_id=769 
```

# ios - EventKit 不使用日历或提醒应用程序

> ID：13631346
> 
> 赞同：6
> 
> 时间：2012-11-29T17:27:59.777
> 
> 标签：ios, xcode, macos, events, eventkit

我很好奇是否有一种方法可以使用 EventKit 的功能——创建事件、重复规则等——而无需实际与日历和提醒应用程序交互？

关于要求等的更多细节：

1.  用户启动我的应用程序，并在那里创建一个新的事件样式条目
2.  事件样式条目实际上**并未**出现在“提醒”或“日历”应用程序中
3.  我的应用程序仍然可以访问事件样式条目及其相关选项

注意：可能/将会有一个偏好选项，使创建的事件样式条目在提醒/日历应用程序中可见。

基本上，为了实现使用或不使用提醒/日历应用程序的能力，我不想编写两个版本的代码——一个使用我自己的 EventKit-esque 实现——另一个使用*真正的*EventKit 框架 API .

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T17:32:34.963

不——EventKit 旨在与日历和提醒可以访问的现有日历存储一起使用。如果您想创建他们不知道的事件，您必须推出自己的日历存储。您当然可以在 EventKit 之后对其进行建模，以便在两者之间进行相对轻松的切换，但是您需要重新实现您计划使用的 API 功能的任何部分。

# c# - 如何执行这种特定类型的锁定？

> ID：13631349
> 
> 赞同：1
> 
> 时间：2012-11-29T17:28:08.087
> 
> 标签：c#, locking

我有以下代码：

```
 var sequence = from row in CicApplication.DistributorBackpressure44Cache
                   where row.Coater == this.Coater && row.IsDistributorInUse
                   select new GenericValue
                   {
                       ReadTime = row.CoaterTime.Value,
                       Value = row.BackpressureLeft
                   };

    this.EvaluateBackpressure(sequence, "BackpressureLeftTarget"); 
```

而 DistributorBackpressure44Cache 定义如下：

```
internal static List<DistributorBackpressure44> DistributorBackpressure44Cache
{
    get
    {
        return _distributorBackpressure44;
    }
} 
```

这是一个重线程应用程序的一部分，其中 DistributorBackpressure44Cache 可以在一个线程中刷新，并从另一个线程中查询，如上所示。上面的变量 'sequence' 是一个 IEnumerable，它被传递给所示的方法，然后在实际执行之前可能传递给其他方法。我关心的是这个。如果在实际执行查询时正在刷新（清除并重新填充）DistributorBackpressure44Cache，上述查询会发生什么情况？

锁定这段代码并没有任何好处，因为这个查询实际上会在稍后的某个时间执行（除非我要立即将其转换为列表）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T17:38:49.040

您可以立即将其转换为列表（可能是最好的--）

或者

您可以在与缓存刷新锁同步的 DistributorBackpressure44 的 get 中放置一个锁。您可能想要包括一个锁定和解锁的访问器；当要立即使用结果时使用未锁定的访问器，当要在延迟执行情况下使用访问器时使用锁定的访问器。

请注意，如果缓存刷新使列表 _distributorBackpress44 发生变异，即使它仅替换引用的列表也不会起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T17:39:27.367

如果您的设计可以容忍它，您可以使用此代码确保快照级别隔离并完全避免锁定。但是，您需要执行以下操作：

1.  `DistributorBackpressure44Cache`改为返回 a ，`ReadOnlyCollection<T>`这样就明确表明您不应该改变这些数据。

2.  确保`_distributorBackpressure44`在副本上发生任何突变并导致原子分配回到`_distributorBackpressure44`完成时。

    ```
    var cache = _distributorBackpressure44.ToList();
    this.RefreshCache(cache); // this assumes you *need* to know 
                              // about the structure of the old list
                              // a design where this is not required
                              // is preferred

    _distributorBackpressure44 = cache; // some readers will have "old"
                                        // views of the cache, but all readers
                                        // from some time T (where T < Twrite)
                                        // will use the same "snapshot" 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T17:37:02.860

在不了解您的架构选项的情况下，您可以执行类似的操作。

```
lock(CicApplication.DistributorBackpressure44Cache)
{
    var sequence = from row in CicApplication.DistributorBackpressure44Cache
                   where row.Coater == this.Coater && row.IsDistributorInUse
                   select new GenericValue
                   {
                       ReadTime = row.CoaterTime.Value,
                       Value = row.BackpressureLeft
                   };
}

this.EvaluateBackpressure(sequence, "BackpressureLeftTarget"); 
```

然后在您执行清除/更新的代码中，您将拥有类似的内容。

```
lock(CicApplication.DistributorBackpressure44Cache)
{
    var objCache = CicApplication.DistributorBackpressure44Cache

    objCache.Clear();

    // code to add back items here
    // [...]
} 
```

拥有一个控制缓存周围所有内容的中心类（也许是单例模式？）会更干净。但我不知道这是多么可行（即将查询代码放入另一个类并传入参数）。只要您在每次读/写此对象时始终记得 lock() ，上述解决方案就可以代替更高级的东西。

# c# - 聚合根和聚合的代码示例

> ID：13631352
> 
> 赞同：3
> 
> 时间：2012-11-29T17:28:15.607
> 
> 标签：c#, domain-driven-design, aggregate, aggregateroot

我试图了解如何使用聚合根和聚合，但我找不到任何具体信息或示例。

例如，我有以下三个实体：

1.  民意调查
2.  问题组
3.  问题

如果没有**Survey**或**QuestionGroup**实体，就不能存在**Question**实体。所有问题都属于一个 QuestionGroup，所以我的理解是

 ****> QuestionGroup 是 Question 的聚合根

QuestionGroup 也不能不作为调查的一部分而存在，因此

> 调查是 QuestionGroup 的聚合根

上面似乎是嵌套聚合根的情况。

**Q1。**您如何在 C# 中实际创建聚合根和聚合？这在代码中是什么样子的？您使用内部类还是聚合根拥有引用？我找不到任何好的例子。

**Q2。**更进一步，如何编写嵌套聚合根？

谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-29T17:31:52.623

调查是聚合根。

```
class Survey {
    public IEnumerable<QuestionGroup> QuestionGroups { get ... }
}
class QuestionGroup {
    public IEnumerable<Question> Questions { get ... }
}
class Question {
    ...
} 
```****

# android - Android在应用程序中加密和解密资源文件

> ID：13631354
> 
> 赞同：0
> 
> 时间：2012-11-29T17:28:21.357
> 
> 标签：android, encryption, resources

在 Android 中，如何解密资源文件夹中的文本文件并使用其中的数据。这样我就可以在该 apk 的资源文件夹中维护一个加密文件。帮我搞定这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T17:32:52.240

看看 javax.crypto.Cipher 包。

这里的例子：

[Android 文件加密](https://stackoverflow.com/questions/9156545/android-file-cryptography)

# c# - 如何在winforms中动态地将项目添加到listview中

> ID：13631356
> 
> 赞同：0
> 
> 时间：2012-11-29T17:28:32.543
> 
> 标签：c#, winforms

我有列表视图。它有列“FirmName”“AccountNo”“Amount”。我从文本框中获取值，而不是从数据库中获取值。实际上我的问题是，**“当我单击按钮时，如何从文本框中动态地将项目添加到我的列表视图中”**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T17:48:31.043

请参阅[**ListView.ListViewItemCollection.Add 方法 (ListViewItem)**](http://msdn.microsoft.com/en-us/library/3a7fwahe.aspx)和[**ListViewItem 构造函数 (String[])**](http://msdn.microsoft.com/en-us/library/faw83h4f.aspx)

如：

```
private void btnAdd_Click(object sender, EventArgs e) {
    listView1.Items.Add(
        new ListViewItem(new[] { 
            txtFirmName.Text, txtAccountNo.Text, txtAmount.Text }));
} 
```

# javascript - 如何使用 Testacular + AngularJS 测试外部服务的应用程序

> ID：13631360
> 
> 赞同：3
> 
> 时间：2012-11-29T17:28:41.593
> 
> 标签：javascript, angularjs, jasmine, karma-runner

我有一个正在运行的应用程序`http://localhost:6543`- 它是一个 Pyramid 应用程序。

*   这个应用程序在 / 处为 AngularJS 应用程序提供服务
*   这个应用程序使用 socket.io 本身

问题是： **是否可以使用这些工具测试该应用程序？**

我的`scenario.js`文件中有这个：

```
beforeEach(function() {
   browser().navigateTo('http://localhost:6543/');
}); 
```

但是当我启动 testacular（使用`run`or `start`）时，我收到以下错误消息：

```
Chrome 23.0 registration: should delete all cookies when user clicks on "remove all" button FAILED
browser navigate to 'http://localhost:6543/'
/home/abourget/myapp/jstests/scenarios/registration_scenario.js:9:5: Sandbox Error: Application document not accessible. 
```

所以我知道浏览器不允许访问`iframe`'s 文档，因为这会违反一些跨域。

我尝试了什么：

*   使用 Testacular Web 服务器（带有`proxies`选项）代理到我的应用程序，但`/`会与 Testacular 自己的框架服务冲突。此外，这两个应用程序最终都会尝试使用`/socket.io`，这也会发生冲突。
*   做相反的事情（调整我的应用程序以代理到 Testacular 的服务器），但是，我们会遇到同样的问题`/socket.io`。

感谢这些伟大的工具，顺便说一句！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T02:17:54.083

而不是拥有

```
beforeEach(function() {
    browser().navigateTo('http://localhost:6543/');
}); 
```

将其更改为

```
beforeEach(function() {
    browser().navigateTo('/');
}); 
```

然后在你的 testacular-e2e.conf.js 文件中添加：

```
proxies = {
    '/': 'http://localhost:6543/'
}; 
```

您可能还有其他问题，但我可以重现“沙盒错误：无法访问应用程序文档”。仅带有[Pyramid Hello World 应用程序](http://docs.pylonsproject.org/projects/pyramid/en/latest/narr/firstapp.html)和此配置问题的消息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T12:04:20.243

我们遇到了类似的问题，并且已经有了代理和 navigateTo('/')。我们需要添加一些 urlRoot 以避免加载 socket.io 时发生冲突。我们只是添加了“/e2e”，这足以解决冲突。实际上，针对这个问题运行 testacular 时有一条警告消息。

# php - 多租户数据库和一个模型 - MVC 和 Joomla

> ID：13631372
> 
> 赞同：2
> 
> 时间：2012-11-29T17:29:23.653
> 
> 标签：php, mysql, database, model-view-controller, joomla

我正在开发一个具有以下结构的组件。该系统是在多租户概念下开发的。

![在此处输入图像描述](../Images/62d9f336f6ab4c9d8a9bdc69b4918377.png)

www.a.com、www.b.com、www.c.com 是位于**不同域但运行相同系统的**网站。每个网站在其本地数据库中都有自己的**模板和网页**。这是可行的。

在这**三个站点上运行的系统独立**于上述（模板等）。www.a.com、www.b.com、www.c.com**拥有一个大型数据库**，所有**系统数据都保存**在其中。由于系统是根据 MVC 开发的，所以我想做的是拥有一个包含所有逻辑的模型（多个模型）。因此**，如果我对模型进行一次更改，它会影响 3 个站点。**

根据我的研究，模型应该在云端维护。如何使用 MVC 实现这样的要求（假设我使用 Joomla 作为我的 CMS，MySQL 作为数据库）？我怎样才能为所有 3 个站点提供一个模型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T19:49:11.903

您可以在同一个 joomla 安装中放置多个域而无需任何更改，只需添加一个名为 virtualdomains 的插件，它允许您（免费）选择模板，因此 - 每个域的菜单、扩展和可用页面；维护方面这将很容易，因为一切都在一个盒子里；但用户会看到三个具有不同内容、布局和网址的站点。

只是几个警告：1）确保没有使用 url (http://www.a.com/template/xxx/js/jquery.autocomplete.js) 与 /template/ 调用脚本或 css 或其他本地资源xxx/js/jquery.autocomplete.js，第一个将无法与缓存一起使用。2) 使用 .htaccess 处理不同域上的相同 URL 等任何复杂问题；使用 sh404 或类似组件来管理 SEF url。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-28T12:47:58.633

这个模型对我来说看起来很复杂。

这要看这个的主要目标是什么？它只是将所有文章/用户一起获取？但为什么？

如果您正在处理在多个 Joomla 安装上运行一个项目的问题，我可以建议您将它们放在单个 Joomla 上，而不是使用虚拟域（[http://extensions.joomla.org/extensions/core-enhancements/multiple-sites/ 7557](http://extensions.joomla.org/extensions/core-enhancements/multiple-sites/7557)）用于“复制”其他域上的网站。然后，您将为所有项目创建一个数据库。

这样做的一个缺点是它主要适用于具有相同组件和文章结构的项目。例如本地新闻按不同域下的区域划分的含义等。

供参考：该解决方案在 Joomla 2.5 最新更新上运行得非常快。

# javascript - 带有socketio的nodejs中的redis pubsub：发布者不发布消息吗？

> ID：13631375
> 
> 赞同：0
> 
> 时间：2012-11-29T17:29:32.807
> 
> 标签：javascript, websocket, redis, socket.io, publish-subscribe

我正在 nodejs 中使用 redis 和 socketio 尝试 pubsub。

我的服务器端代码是：

```
var io = require('socket.io').listen(server);
var pub = redis.createClient();

io.sockets.on("connection", function(socket) {
    console.log('connecteed');

    var sub = redis.createClient();

    sub.subscribe("messages");
    sub.on("message", function(channel, message) {
      console.log('message',message);
      socket.emit(channel,message);
    });

    socket.on("disconnect", function() {
      sub.unsubscribe("messages");
      sub.quit();
    });
});
pub.publish("messages", JSON.stringify({type: "foo", content: "bar"})); 
```

我的 html 页面 index.html 包含以下脚本：

```
var host = window.location.host.split(':')[0];
var socket = io.connect('http://' + host);
socket.on('messages',function(msg){
    console.log(msg);
}) 
```

但在 index.html 中，console.log 永远不会执行。

这是基本的，但我没有在我的代码中找到错误。它在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T16:05:56.727

这可能是因为您在发布消息时没有连接任何客户端（提示 io.socket.on 连接函数在 pub.publish 之后执行）。尝试更换

```
pub.publish("messages", JSON.stringify({type: "foo", content: "bar"})); 
```

和

```
setIntervall(function(){
    pub.publish("messages", JSON.stringify({type: "foo", content: "bar"}));
},1000); 
```

这将每秒发送消息，并为您提供足够的时间来验证您的设置。

# html - 缩进一个无序列表而不缩进盒子模型

> ID：13631379
> 
> 赞同：1
> 
> 时间：2012-11-29T17:29:41.343
> 
> 标签：html, css, html-lists

我想显示一个简单的、嵌套的、缩进的、无序列表，每个列表项之间都有边框。

我正在寻找一种解决方案来缩进的内容`<li>`而不缩进整个元素。其实我的边界也是有意的。

示例：http: [//jsfiddle.net/kcRfT/](http://jsfiddle.net/kcRfT/)

一种可能的解决方案是，从`<li>`节点中获取缩进（左填充）并使用 text-indent 代替（如上面的 jsfiddle 中所述）。

这个问题还有另一个更漂亮的解决方案吗？有任何想法吗？

问候尼尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T17:42:56.450

也许您可以尝试在`li`

[http://jsfiddle.net/5yV3P/1/](http://jsfiddle.net/5yV3P/1/)

# c# - ViewBag - 转换为 html 实体

> ID：13631380
> 
> 赞同：0
> 
> 时间：2012-11-29T17:29:46.777
> 
> 标签：c#, .net

我正在尝试将查询结果转换为 json。

```
 string esql = "select d.dpr_ts, d.dpr_close from Entities3.dpr_mm as d";//where dpr_qot_id=2029543939 and dpr_ts>='" + start + "' and  dpr_ts<='" + end + "'";
    EntityConnection econn = new EntityConnection("name=Entities3");

    econn.Open();

    EntityCommand ecmd = econn.CreateCommand();
    ecmd.CommandText = esql;
    EntityDataReader ereader = ecmd.ExecuteReader(CommandBehavior.SequentialAccess);
    Console.WriteLine("Entity SQL Result");
    StringBuilder result = new StringBuilder();
    int i = 0;
    while (ereader.Read())
    {
        if (i > 0) result.Append(","); i++;
        result.Append("['" + ereader.GetDateTime(0).ToShortDateString() + "'," + ereader.GetValue(1) + "]");
    }
    ViewBag.ChartData = "[" + result.ToString() + "]"; 
```

我想把它保存在 ViewBag 中。但结果字符串看起来像：（`[&#39;10.01.2011&#39;,3,9990],[&#39;11.01.2011&#39;]`所以`"'"` 被转换为`&#39;`）。我怎样才能避免它？

顺便说一句：我通常可以更好地完成这项任务吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T17:37:20.957

1.  将结果从 sql 转换为对象，即使是动态对象也可以。
2.  将对象放入`ViewBag`
3.  在视图中将对象呈现为 JSON 使用`Json.Net`

这是一个例子

控制器

```
var data = GetDataFromDatabaseAndMapToObject();
ViewBag.TheData = data;

return View(model); 
```

看法

```
<script type="text/javascript">
    var json = @Html.Raw(JsonConvert.Serilaized(ViewBag.TheData));
    //use json however you would like.
</script> 
```

# powerpoint - 如何在 Powerpoint 中获取形状的位置和尺寸？

> ID：13631381
> 
> 赞同：5
> 
> 时间：2012-11-29T17:29:51.590
> 
> 标签：powerpoint, openxml, openxml-sdk

我正在使用 OpenXmlSDK，看看它是否是满足我们的 Powerpoint 需求的可行解决方案。需要的一件事是能够在 Powerpoint 中定位形状。我一直在寻找一种获取形状位置的方法，但只遇到过 MSDN“如何” [http://msdn.microsoft.com/en-us/library/cc850828.aspx](http://msdn.microsoft.com/en-us/library/cc850828.aspx)和一个位置类（但无法从形状中获取）[http://msdn.microsoft.com/en-us/library/office/documentformat.openxml.wordprocessing.position%28v=office.14%29.aspx](http://msdn.microsoft.com/en-us/library/office/documentformat.openxml.wordprocessing.position%28v=office.14%29.aspx)。

我该怎么做：

```
PresentationDocument presentationDocument =  PresentationDocument.Open("C:\\MyDoc.pptx", true);
IdPartPair pp = presentationDocument.PresentationPart.SlideParts.First().Parts.FirstOrDefault();
var shape = pp.OpenXmlPart;
// How do I get the position and dimensions? 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-21T09:23:42.917

您有 2 个用于形状尺寸的变量： - 偏移量给出了形状顶角的位置 - 范围给出了形状的大小

```
shape.ShapeProperties.Transform2D.Offset.X //gives the x position of top left corner
shape.ShapeProperties.Transform2D.Offset.Y //gives the y position of top left corner

shape.ShapeProperties.Transform2D.Extents.X //gives the x size of the shape : the width
shape.ShapeProperties.Transform2D.Extents.Y //gives the y size of the shape : the height 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T21:07:51.250

浏览相关幻灯片的 XML 并查找应包含 off（偏移）和 ext（范围）子元素的 xfrm 元素。测量值以 EMU 为单位（参见 Wouter van Vugt 文档的最后一页）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-03T21:07:39.033

有时*ShapeProperties*不显示为*Shape*属性，您必须编写

```
var sP = ((DocumentFormat.OpenXml.Presentation.Shape)shape).ShapeProperties; 
```

在您可以使用 Transform2D 并找到[Deunz](https://stackoverflow.com/users/2376892/deunz)所写的坐标之后。

# django - 如何使模块连接到外部 REST api？

> ID：13631383
> 
> 赞同：0
> 
> 时间：2012-11-29T17:30:06.787
> 
> 标签：django

我正在做一个简单的应用程序，它必须连接到外部 REST api，以 json 格式获取数据并为用户打印。我的问题是：

1.  我应该在哪里放置/创建一个将连接到外部 REST api 的模块？我的意思是我可以在views.py中编写一些代码，它连接到REST api并将结果传递给模板，但我想将它分离到一些我可以在views.py中使用的自主模块中`myapimodule.get_devices()`，例如将连接并获取来自 example.com/api/device/get 的数据。我今天第一次尝试了 python 和 django，所以我只想知道你在 django 应用程序中放置（以及如何）这些模块？

2.  如何使用 django 连接到 RESTAPI？例如，我有 http auth 的用户名和密码以及 example.com/api/device/get 之类的地址 - django lib 的哪些部分将允许我使用 restapi 并从中检索数据（以 json 格式）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T18:59:21.563

1.  真的没有“正确”的答案。这仅取决于最适合您的需求。

2.  要连接到外部 REST API，请查看优秀的[Requests](http://docs.python-requests.org/en/latest/)库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-16T22:25:40.333

Requests 库值得学习。它会为你省去很多悲伤。

你试过了吗：

```
pip install chardet 
```

前

```
pip install requests 
```

?

# cloud-foundry - Spring 的“云”配置文件没有被独立的兔子应用程序识别

> ID：13631390
> 
> 赞同：0
> 
> 时间：2012-11-29T17:30:43.397
> 
> 标签：cloud-foundry

我有一个具有以下配置的独立 spring / rabbit 应用程序：

```
<rabbit:template id="amqpTemplate" connection-factory="connectionFactory" reply-timeout="1000"/>

<rabbit:admin connection-factory="connectionFactory" />

<beans profile="cloud">
    <cloud:rabbit-connection-factory id="connectionFactory"/>
</beans>

<beans profile="default">
    <rabbit:connection-factory id="connectionFactory"/>
</beans> 
```

我有一个兔子服务正确绑定到我的应用程序。

当我直接将以下内容放入文件时，它可以正常工作：

```
<cloud:rabbit-connection-factory id="connectionFactory"/> 
```

在尝试使用配置文件时，连接被拒绝。关于为什么配置文件不起作用的任何想法？所有文档似乎都建议应该自动激活配置文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T18:48:34.413

Spring 自动重新配置支持仅在使用应用程序类型“Spring”推送应用程序时才有效。当作为独立应用程序（或 JavaWeb，或除 Spring 之外的任何其他应用程序）推送时，不会完成 Spring 自动重新配置。

如果您只想在独立应用程序中激活云配置文件，则可以添加`-Dspring.profiles.active="cloud"`到您在将应用程序推送到 CF 时指定的命令行。

如果您需要进行更复杂的配置，另一种选择是使用[Spring Java Configuration](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/beans.html#beans-java-basic-concepts)和[CloudFoundry Java Runtime API](https://github.com/cloudfoundry/vcap-java/tree/master/cloudfoundry-runtime)。在`@Bean`Spring`@Configuration`类的方法中，您可以调用该类的`isCloudFoundry()`方法`CloudEnvironment`（包含在 CF Runtime API 中）来检测应用程序是否在 CloudFoundry 上运行。基于此，您可以适当地实例化 RabbitMQ bean。

# java - 通过 PHP/JSON 将 Android App 连接到 MySQL db

> ID：13631391
> 
> 赞同：0
> 
> 时间：2012-11-29T17:30:55.273
> 
> 标签：java, android

我有一个带有一个唯一表的 MySQL 数据库：**geopoints**，它有 3 列：**id**、**lat**和**long**，并且该表已经填满了 4 个条目， 4 个 lat 和 long 值（1E6 因为它用于地图视图） .

我的目标是使用生成 json 数组的 php 脚本和 httpPost 等在地图视图上动态标记所有这 4 个地理点...

这是我到目前为止的代码：

```
getjson = (Button) findViewById(R.id.button1);

    getjson.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {

            JSONArray jArray;
            String result = null;
            InputStream is = null;
            StringBuilder sb = null;
            ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();//Whats this for?

            try {

                HttpClient httpclient = new DefaultHttpClient();
                HttpPost httpPost = new HttpPost(
                        "http://????????.com/????/getGeopoints.php");
                HttpResponse response = httpclient.execute(httpPost);
                httpPost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
                HttpEntity entity = response.getEntity();
                is = entity.getContent();

            } catch (Exception e) {
                Log.e("log_tag", "Error connecting to http " + e.toString());
            }

            try {
                BufferedReader reader = new BufferedReader(
                        new InputStreamReader(is, "iso-8859-1"), 8);
                sb = new StringBuilder();
                String line = null;
                while ((line = reader.readLine()) != null) {
                    sb.append(line + "\n");
                }
                is.close();

                result = sb.toString();
            } catch (Exception e) {
                Log.e("log_tag", "Error converting  " + e.toString());
            }

            try {

                jArray = new JSONArray(result);

                for (int i = 0; i <= jArray.length(); i++) {

                    JSONObject json_data = jArray.getJSONObject(i);

                    Log.i("log_tag", "id: " + json_data.getInt("id")
                            + ", latitude: " + json_data.getInt("lat")
                            + ", longitude: " + json_data.getInt("long"));

                }
            } catch (JSONException e) {
                Log.e("log_tag", "Error parsing data " + e.toString());
            }
        }
    }); 
```

这是php文件：

```
 <?php
mysql_connect("?????.com", "username", "password");
mysql_select_db("database_name");

$q = mysql_query("SELECT * FROM geopoints");
while ($e = mysql_fetch_assoc($q))
    $output[] = $e;

print(json_encode($output));
mysql_close();
?> 
```

我让这个文件正常运行，因为当我在浏览器上输入 url 时，它会生成包含我想要的确切信息的确切 json 数组。只是觉得我不明白，HttpEntity 是干什么用的？因为我跟进了一个教程，并且在那里它使用了一个包含信息的数组来从数据库中过滤，因为我不想过滤任何信息（我想要所有数据库表条目，而不仅仅是一个或两个）我刚刚离开它是空白的。

我的代码有什么问题？我在 logcat 中得到的错误是所有捕获消息“11-29 12:47:29.662: E/log_tag(898): Error connected to http Http android.os.NetworkOnMainThreadException”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T17:37:39.183

`android.os.NetworkOnMainThreadException`

android >= 3.0 不允许主 UI 线程上的网络请求。您需要使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)来调用网络请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T17:37:36.803

那是因为您正在阻塞主 UI 线程。尝试将 AsyncTasks 用于 Http 请求。

# r - 如何在R中创建一组具有不同行和列的数据

> ID：13631395
> 
> 赞同：0
> 
> 时间：2012-11-29T17:31:15.130
> 
> 标签：r, list, dataframe

也许有人可以帮助我。我在 R 中计算了不同的结果，现在我试图将它们合并到一个 txt 中。数据。但是，不知何故，我无法创建一个可以概览所有内容的数据文件。

一个名为“min.temp”的数据框，包含 13 行和 3 列（id、日期和值）

```
id Date      Temperature

1\. 1967-04-25 -3.086980
2\. 1969-04-20 -4.489397
3\. 1972-04-26 -5.587154 
4\. 1976-04-29 -5.684246 
5\. 1976-04-30 -5.297752 
6\. 1977-04-20 -3.615099 
7\. 1981-04-21 -3.672259 
8\. 1981-04-24 -3.860317 
9\. 1991-04-20 -4.021680 
10\. 1991-04-21 -6.366689 
11\. 1991-04-22 -4.785906 
12\. 1997-04-21 -4.989829 
13\. 1997-04-22 -4.447067 
```

和 2 个其他值“aver.temp”和“max.temp”，每个只有 1 行和 2 列：

```
Average temperature: 10 

Maximum temperature: 25 
```

我试图将所有信息合并到一个列表中，但是当我尝试整合所有这些信息时，它会以某种方式破坏我的列表。我的目标是获得一个名为 temperature.txt 的 txt.file，我可以在其中为 aver.temp 和 max.temp 设置单独的行，然后是其余的行。最后，它应该看起来像这样。

```
Average temperature: 10

Maximum temperature: 25

id. Date      Temperature

1\. 1967-04-25 -3.086980
2\. 1969-04-20 -4.489397  
3\. 1972-04-26 -5.587154
4\. 1976-04-29 -5.684246 
5\. 1976-04-30 -5.297752 
6\. 1977-04-20 -3.615099 
7\. 1981-04-21 -3.672259 
8\. 1981-04-24 -3.860317 
9\. 1991-04-20 -4.021680 
10\. 1991-04-21 -6.366689 
11\. 1991-04-22 -4.785906 
12\. 1997-04-21 -4.989829 
13\. 1997-04-22 -4.447067 
```

任何人都可以帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T18:03:14.423

大多数用于写入文件的函数（`cat`、`write`、`write.table`等）也可以写入文件连接，这是将多个内容写入文件的更好方法。在您的情况下，它看起来像这样：

```
fh <- file("output.txt", "w")   # creates a file connection

cat("Average temperature: 10", "\n", file = fh)
cat("Maximum temperature: 25", "\n", file = fh)
write.table(min.temp, file = fh)

close(fh)   # closes the file connection 
```

另一种方法是使用`append`大多数这些功能还提供的选项：

```
cat("Average temperature: 10", "\n", file = "output.txt", append = TRUE)
cat("Maximum temperature: 25", "\n", file = "output.txt", append = TRUE)
write.table(min.temp,  file = "output.txt", append = TRUE) 
```

但是第二种方法不如第一种方法有效，因为每次您想向其中添加内容时都会打开和关闭文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T17:48:54.873

`data.frame`s 可以是列表的元素。

```
FinalTextFile <- list()
FinalTextFile$DataFrame <- DF
FinalTextFile$AverageTemperature <- mean(DF$Temperature)
FinalTextFile$MaximumTemperature <- max(DF$Temperature) 
```

# c# - 如何在其范围之外访问匿名对象的属性？

> ID：13631397
> 
> 赞同：1
> 
> 时间：2012-11-29T17:31:18.793
> 
> 标签：c#, linq, anonymous-types, var

范围可能不是正确的词。使用以下代码，我无法访问集合元素的对象属性。是否有更好的返回数据类型或访问这些属性的方法？

```
protected object Modules()
{
    DirectoryInfo di = new DirectoryInfo(Server.MapPath("~/"));
    var folders = from x in di.GetDirectories()
                    where
                    !(new string[] {
                        "app_data","bin","obj","scripts","styles","properties"
                        }).Contains<string>(x.Name.ToLower())
                    select new
                    {
                        Name = x.Name,
                        Path = x.FullName
                    };
    return folders
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T17:34:55.640

有两种可行的解决方案：

1.  为它创建一个真正的类。这是首选的解决方案。
2.  让您的方法返回`dynamic`而不是`object`. 这样做的问题是您失去了对使用此方法结果的代码的编译时检查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T17:34:27.373

一旦离开定义匿名类型的范围，就必须使用反射来获取其成员。

我能想到的另外两个选项是使用动态类型（如果使用 4.0 框架或更高版本）或创建定义类型而不是匿名类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T17:35:21.660

我建议简单地创建一个新类型来传递数据。如果数据的范围受到保护，您可以使用受保护的嵌套子类来防止小型数据类的过度增殖。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T17:34:19.247

改为使用`IEnumerable<dynamic>`。

根据 msdn 的说法，“动态类型使发生它的操作能够绕过编译时类型检查。相反，这些操作在运行时解决。动态类型简化了对 COM API 的访问，例如 Office 自动化 API，并且还动态 API，例如 IronPython 库，以及 HTML 文档对象模型 (DOM)。”

[http://msdn.microsoft.com/en-us/library/dd264741.aspx](http://msdn.microsoft.com/en-us/library/dd264741.aspx)

# java - String.replaceFirst 不同的行为

> ID：13631398
> 
> 赞同：0
> 
> 时间：2012-11-29T17:31:20.933
> 
> 标签：java

以下例程在 WIN XP x32、JAVA 版本 7 更新 9 和 WIN7 x64、JAVA 版本 6 更新 32 上的行为不同。

```
private int getNrOfMatches(String temp, String regex) {
            String prev;
            int nrOfIterations = -1;
            do {
                nrOfIterations++;
                prev = temp;
                temp = temp.replaceFirst(regex, " ");
            } while (temp != prev);
            return nrOfIterations;
        } 
```

如果 replaceFirst() 没有修改任何内容并且循环在 WIN XP 上结束，则它返回相同的对象。在 Win7 上，它会进入无限循环，`!=`因为该例程会返回一个新对象，即使它没有更改任何内容，它也会始终返回 false。使用`.equals()`而不是`!=`解决这个问题，但我的问题是任何人都可以解释这种行为吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T17:33:59.417

永远不要将字符串与`==`or进行比较`!=`

使用`(str1.equals(str2))`或`(!str1.equals(str2))`

`==`并`!=`比较非原始类型的对象引用。

`equals()`当类重写它继承自的此方法时，比较对象的内容`Object`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T17:38:34.823

因此，尝试回答为什么它有时会起作用的部分问题。JVM 有一些切割器优化，尝试并重用相同字符串的引用，而不是创建具有相同内容的新引用。在 Win XP 上运行时，您的 JVM 可能有这些优化，而您的 Win 7 没有（它们是相同的版本吗？）

[这个 SO Question](https://stackoverflow.com/questions/9698260/what-makes-reference-comparison-work-for-some-strings-in-java)很好地涵盖了这个主题，并且接受的答案讨论了将字符串实际添加到常量池（调用`.intern()`）的方法。在确定相等性方面，这不是一个稳定的解决方案，因为 JVM 将始终优先于您在 Java 代码中做出的任何内存管理选择。

在深入研究[JVM 选项](http://www.oracle.com/technetwork/java/javase/tech/vmoptions-jsp-140102.html)时，我确实发现了这个有趣的选项 ( `-XX:+UseStringCache`) 和这个关于它的作用的[SO question 。](https://stackoverflow.com/questions/1049983/jvm-xxstringcache-argument)也许你的 Win XP JVM 有 -server 优化，而你的 Win 7 没有？

# java - NetBeans 语言支持：CTRL-S 不保存文本文件更改

> ID：13631400
> 
> 赞同：0
> 
> 时间：2012-11-29T17:31:26.620
> 
> 标签：java, netbeans, module, programming-languages

**问题**

我一直在开发一个 NetBeans 模块，该模块支持两行元素数据格式的词法分析/解析（从这里开始称为“TLE 文件”），如下所述：

[http://www.celestrak.com/columns/v04n03/](http://www.celestrak.com/columns/v04n03/)

每个 TLE 文件都遵循以下基本格式，其中`N`=0-9、`C`='U' 或 'S'、`A`=aZ、0-9、`+`=' `'、'+' 或 '-'，以及`-`='+' 或 '- '。所有其他字符，包括空格，必须完全相同，并且每行数据必须正好有 69 列：`

 ````
1 NNNNNC NNNNNAAA NNNNN.NNNNNNNN +.NNNNNNNN +NNNNN-N +NNNNN-N N NNNNN
2 NNNNN NNN.NNNN NNN.NNNN NNNNNNN NNN.NNNN NNN.NNNN NN.NNNNNNNNNNNNNN 
```

我的词法分析器和解析器分别用 和 来`org.netbeans.spi.lexer.Lexer`实现`org.netbeans.modules.parsing.spi.Parser`。两者都工作得很好，我得到了我最初打算创建的语法突出显示/错误更正，但一个小问题仍然让我难以理解。当我在 NetBeans 文本编辑器中更改 TLE 文件时，我无法使用`CTRL`-`S`键盘快捷方式来保存更改。相反，我必须选择“文件”->“保存”。关于为什么会这样的任何想法？

**附加信息**

1.  我正在使用我的模块的`layer.xml`配置文件使用该`languageProvider.instance`标志向 NetBeans 注册我的自定义词法分析器/解析器。
2.  我正在`org-netbeans-modules-editor-NbEditorKit`用作我的语言的编辑器。
3.  到目前为止，我还*没有*向我的模块添加任何自定义操作。

诚然，我对 NetBeans 模块开发非常陌生，因此我不能 100% 确定可能需要哪些信息来解决此问题。如果您认为需要更多信息，请告诉我，我会在此处添加。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T20:08:06.650

我想到了。答案相对简单。我所要做的就是将以下基本级别的`folder`条目添加到由我的模块文件定义的`layer.xml`文件系统中：

```
<folder name="Shortcuts">
    <file name="D-S.shadow">
        <attr name="originalFile" stringvalue="Actions/System/org-openide-actions-SaveAction.instance"/>
    </file>
</folder> 
````

# ssl - SignalR - Web 客户端如何连接到具有基本身份验证和 SSL 的自托管集线器

> ID：13631404
> 
> 赞同：3
> 
> 时间：2012-11-29T17:31:33.327
> 
> 标签：ssl, https, forms-authentication, signalr, basic-authentication

我们有一个使用基本身份验证和 SSL 的自托管（在控制台应用程序中）SignalR 集线器。

中心类是：

```
[HubName("TestingHub")]
[Authorize(Mode=AuthorizeMode.Both)]
public class TestingHub : Hub
{
    public void TestMethod(int arg)
    {
        Console.WriteLine("Arg: {0}", arg); 
    }

    public string TestWebClientCall(string message)
    {
        Clients.Caller.clientFunction(string.Format("From the server : {0}", message));
        return "Call Worked";
    }
} 
```

自托管按如下方式完成：

```
var url = "https://localhost:3232/";
var server = new Server(url);
server.Configuration.DisconnectTimeout = TimeSpan.Zero;
var authoriser = new Authoriser();
server.HubPipeline.AddModule(new AuthorizeModule(authoriser, authoriser));
server.AuthenticationSchemes = AuthenticationSchemes.Basic;
server.MapHubs();            
server.Start(); 
```

Authoriser 类是：

```
public class Authoriser : IAuthorizeHubConnection, IAuthorizeHubMethodInvocation
{
    bool isAuthorised(HttpListenerBasicIdentity identity)
    {
        var authorised = Membership.Provider.ValidateUser(identity.Name, identity.Password);
        return authorised;
    }

    public bool AuthorizeHubConnection(HubDescriptor hubDescriptor, IRequest request)
    {
        var identity = (HttpListenerBasicIdentity)request.User.Identity;
        return isAuthorised(identity);
    }

    public bool AuthorizeHubMethodInvocation(IHubIncomingInvokerContext hubIncomingInvokerContext)
    {
        var identity = (HttpListenerBasicIdentity)hubIncomingInvokerContext.Hub.Context.User.Identity;
        return isAuthorised(identity);
    }
} 
```

然后MVC Razor页面javascript如下：

```
$(document).ready(function () {
    var hubUrl = "https://localhost:3232/";
    $.connection.hub.url = hubUrl;
    var hub = $.connection.TestingHub;
    if (hub == undefined) {
        alert("hub not found at " + hubUrl);
    }
    else {

        $.extend(hub, {
            clientFunction: function (textMessage) {
                alert("clientFunction called : " + textMessage);
            }
        });

        $.connection.hub.start()
            .done(function() {
                hub.server.testWebClientCall('Hello from the client')
                .done(function (message) {
                    alert(message);
                });
            })
            .fail(function() {
                alert("could not connect!");
            });
    }

}); 
```

这是发生的事情：

1.  页面加载并弹出Basic Auth登录框-输入用户名/密码
2.  再次弹出基本身份验证登录框 - 我猜是 SignalR/集线器的脚本包含
3.  'hub' 对象是有效的 - 即可以看到 'TestingHub'
4.  $.connection.hub.start() 调用总是转到 .fail 并且 hub.server.testWebClientCall 甚至从未尝试过。

因为我们可以从 .NET 控制台应用程序客户端访问，所以 SSL 证书对于自托管来说都是很好的设置。

所以问题是，对于这个涉及基本身份验证和 SSL 的自托管集线器，应该如何处理？如何将用户名/密码组合传递到 SignalR 集线器/调用以通过身份验证？

作为参考，我们正在测试这种方法，因为我们目前有一个 MVC3 站点，该站点通过 HTTPS/SSL 上的表单身份验证进行保护，并且根据我的另一个问题，访问不安全的自托管 SignalR 集线器（即非 HTTPS /SSL) 来自 HTTP/SSL 下的 MVC 站点似乎不起作用。

在 SignalR 示例中，我找到了有关“托管”（即 AuthHub 类）授权的详细信息，但我找不到有关如何从 Web 客户端连接的任何信息 - 似乎缺少“现实世界”示例 - 即具有完整身份验证和 SSL 加密。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T20:25:06.793

我认为这与 Self host 或 SSL 没有任何关系。我想您是在问如何将用户名和密码传递给需要来自 javascript（“Web 客户端”）的基本身份验证的服务。无法使用 SignalR JS API 更改标头，因此您很幸运。

做这样的事情可能会有所帮助：

[http://coderseye.com/2007/how-to-do-http-basic-auth-in-ajax.html](http://coderseye.com/2007/how-to-do-http-basic-auth-in-ajax.html)

您可以尝试使用 $.ajaxSetup 来影响所有传出的 ajax 请求，但我不确定这是否适用于 websockets。

似乎 websockets 不支持授权标头：

[websockets的基本认证](https://stackoverflow.com/questions/6714966/basic-authentication-for-websockets)

所以你必须求助于使用查询字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-20T10:14:31.997

在建立 SignalR 连接之前使用以下代码：

```
 $.ajaxSetup({
      headers: {
        'Authorization': "your auth token"
      }
    }); 
```

好消息是：SignalR 与 auth 一起使用！

坏消息是：SignalR 回退到来自 websocket 的长轮询。

我更喜欢这个，因为我根本不能接受 url 或方法调用中的任何丑陋参数！

# actionscript-3 - 将 scaleX/scaleY 应用于影片剪辑会导致图像被裁剪

> ID：13631409
> 
> 赞同：2
> 
> 时间：2012-11-29T17:31:40.823
> 
> 标签：actionscript-3, flash, flash-builder

所以我在 Flash Builder 中使用了一个包含影片剪辑的 swc。

我遇到的问题是我需要用 scaleX 和 scaleY 缩放这个影片剪辑。如果我跟踪对象的宽度/高度值，这部分工作正常，但是当您实际看到该对象时，它看起来像是被裁剪而不是调整大小。

例如，如果我应用 0.5 的比例因子，那么我只会看到原始图像的四分之一，即左上角。

正在使用并导出到 swc 的元件由一个包含另一个影片剪辑的影片剪辑组成，而第二个影片剪辑包含一个形状。不确定，这是否会以某种方式影响缩放。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T20:59:32.063

您的movieClip 内容原点不是0,0。当您缩放 MovieClip（或任何其他 DisplayObject）时，您是在相对于其原点缩放它。

假设您的 MovieClip 内容是一个大小为 200x200 的黑色矩形，但该矩形是从 100、100 绘制的。MovieClip 可能放置在 -100,-100 以“坐在”原点上。所以现在，当你把它缩放到 0.5 时，你只会看到右下角...

您所要做的就是从 0,0 绘制内容。并将movieClip 放在0,0 上，现在当你缩放它时，它会从左上角开始缩放。

这可能会有所帮助： http: [//flashexplained.com/basics/understanding-how-the-coordinate-system-in-flash-works/](http://flashexplained.com/basics/understanding-how-the-coordinate-system-in-flash-works/)

# c# - 功能不适用于网络服务

> ID：13631410
> 
> 赞同：1
> 
> 时间：2012-11-29T17:31:40.377
> 
> 标签：c#, asp.net, vb.net, socialauth

这个片段在我的业务逻辑层类文件中：

```
Public Shared Function getAccIDFromSocialAuthSession() As Object
        Dim db As SqlDatabase = Connection.connection
        Dim accID As Integer
        If SocialAuthUser.IsLoggedIn Then
            Using cmd As SqlCommand = db.GetSqlStringCommand("SELECT AccountID FROM UserAccounts WHERE FBID=@fbID")
                db.AddInParameter(cmd, "fbID", SqlDbType.VarChar, SocialAuthUser.GetCurrentUser.GetProfile.ID)
                accID = db.ExecuteScalar(cmd)
            End Using
        End If

        Return accID
    End Function 
```

我正在使用[SocialAuth.Net](http://code.google.com/p/socialauth-net/)。`SocialAuth.NET`将所有内容存储在会话中。例如，要获取我们调用的 Facebook 用户 ID `SocialAuthUser.GetCurrentUser.GetProfile.ID`，因为它是基于会话的，所以当我尝试从 web 服务 (asmx.vb) 文件调用时，我会收到此错误消息**“对象引用未设置为对象的实例” 。**`SocialAuthUser.GetCurrentUser.GetProfile.ID`我这样称呼它**（ClassName.FunctionName-->BLL.getAccIDFromSocialAuthSession）**

当我从页面调用相同的函数时，`aspx.vb`它可以正常工作，但当我从`asmx.vb`页面调用它时却不行。

由于我不知道会话变量名称，我无法使用`System.Web.HttpContext.Current.Session("NameHere")`

有什么解决办法？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T19:14:36.597

这是一些工作代码的开始：

```
Imports System.Web.Services
Imports System.ComponentModel

<System.Web.Script.Services.ScriptService()> _
<System.Web.Services.WebService(Namespace:="http://tempuri.org/")> _
<System.Web.Services.WebServiceBinding(ConformsTo:=WsiProfiles.BasicProfile1_1)> _
<ToolboxItem(False)> _
Public Class LightboxService
    Inherits WebService

    <WebMethod(EnableSession:=True)> _
    Public Function AddToLightbox(ByVal filename As String) As String
        Dim user As String = CStr(Session("username"))

'...etc. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T17:36:23.827

听起来您需要`Implements IRequiresSessionState`在服务类上实现。

没有这个，再多的调用`HttpContext.Current.Session("NameHere")`都不起作用。

示例：（伪代码）

```
 <WebService(Namespace:="http://tempuri.org/")> _
    <WebServiceBinding(ConformsTo:=WsiProfiles.BasicProfile1_1)> 
    <System.Web.Script.Services.ScriptService()>
    Public Class MyService
            Inherits System.Web.Services.WebService
            Implements IRequiresSessionState '' <-- This is the part you need

            '' Code in here
    End Class 
```

**更新**

我无法澄清，尽管它可能不适用于您的网络服务。Web 服务是无状态的。这意味着它独立于您的实际网站运行。因此，无论`SocialAuthUser`何时实例化，网络服务器都不会对此一无所知。它在那里运行它自己的独立代码。

**另一个更新**

在这种情况下，不要使用 Web 服务，而是尝试在您的 .aspx 页面代码隐藏上使用 Web 方法。

所以是这样的：

```
 <ScriptMethod(ResponseFormat:=ResponseFormat.Json)> <Services.WebMethod(EnableSession:=True)> _
     Public Shared Function getAccIDFromSocialAuthSession() As Object
          Dim db As SqlDatabase = Connection.connection
          Dim accID As Integer
          If SocialAuthUser.IsLoggedIn Then
              Using cmd As SqlCommand = db.GetSqlStringCommand("SELECT AccountID FROM UserAccounts WHERE FBID=@fbID")
                  db.AddInParameter(cmd, "fbID", SqlDbType.VarChar, SocialAuthUser.GetCurrentUser.GetProfile.ID)
                  accID = db.ExecuteScalar(cmd)
              End Using
          End If

        Return accID
    End Function 
```

# facebook - Facebook iOS6 集成强制重新认证

> ID：13631412
> 
> 赞同：1
> 
> 时间：2012-11-29T17:31:46.837
> 
> 标签：facebook, ios6, facebook-ios-sdk

我找不到有关如何（使用新的 iOS6 FB 集成）强制用户重新进行身份验证的任何信息。

使用

```
[FBSession openActiveSessionWithReadPermissions:nil allowLoginUI:allowLoginUI completionHandler:^(FBSession *session, FBSessionState state, NSError *error) {
    [self sessionStateChanged:session state:state error:error];
}]; 
```

并将 allowLoginUI 设置为 YES 仅使用 iOS FB 设置中的凭据。我也尝试在 FBSession 上使用 closeAndClearTokenInformation 执行此操作，但结果相同。

我需要向用户显示一个登录视图，以允许他使用与设置中不同的一组凭据登录到 FB。

我该怎么做呢？

# java - 从另一个类实例访问一个类实例（调用方法）

> ID：13631413
> 
> 赞同：-1
> 
> 时间：2012-11-29T17:31:49.160
> 
> 标签：java

所以我的程序包含两个类 1\. 我的主类处理 GUI，它扩展了 JFrame 所以我需要实例化它来配置我的 JFrame 。2\. MyClass，它使用 API 请求和处理从服务器请求的数据，该 API 必须有一个 API 类的实例，该类另外处理请求。（它是一个可运行的类并实现了 API 的包装器）

因此，如果我在我的主类中简单地实例化 MyClass，例如 (Runnable Processor = new MyClass())，并使用它创建一个线程并运行 . 我无法访问 MyClass 或 API 类方法的方法（我对连接杀手方法特别感兴趣）。我试图像 Processor.API.eDisconnect() 一样访问它。那行不通。

但如果这样做： 创建 MyClass 的 Arraylist 然后将 MyClass 的实例添加到列表中。创建一个线程，如 Thread myThread = new Thread(List.get(0)) 。我可以访问我的 API 类方法，例如 List.get(0).API.eDisconnect()。

那么为什么第二种方法有效呢？唯一的区别是类实例是自变量还是在列表中。

是否正确练习会出现什么问题？有更好的方法吗？

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package basket;

import java.awt.BorderLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.WindowAdapter;
import java.awt.event.WindowEvent;
import java.util.ArrayList;
import java.util.List;
import javax.swing.JButton;
import javax.swing.JFrame;

/**
 *
 * @author ivan
 */
public class Basket extends JFrame implements ActionListener{
    protected List<TwsHandler> TWS = new ArrayList<>();
    public static void main(String[] args) 
    {
       Basket main = new Basket();
       main.Launch();
    }
    public void Launch()
    {
        TWS.add(new TwsHandler());
        BorderLayout MainLayout = new BorderLayout();
        JButton Start = new JButton("Start");
        Start.addActionListener(this);
        Start.setActionCommand("Start");
        JButton Stop = new JButton("Stop");
        Stop.addActionListener(this);
        Stop.setActionCommand("Stop");
        this.setLayout(MainLayout);
        this.add(Start , BorderLayout.SOUTH);
        this.add(Stop , BorderLayout.WEST);
        this.addWindowListener(new WindowAdapter()
        {
            @Override
            public void windowClosing(WindowEvent e){System.exit(0);}
        });
        this.setTitle("Option basket robot");
        this.setBounds(100, 100, 800, 600);
        this.setVisible(true);

    }
    @Override
    public void actionPerformed(ActionEvent e) 
    {
        switch (e.getActionCommand()) {
            case "Start":
                Thread Processor = new Thread(TWS.get(0));
                Processor.start();
                break;
            case "Stop":
                System.out.println(TWS.get(0).Eclient.isConnected());
                break;

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T17:41:09.460

唯一的区别是，在第一种情况下，您将`MyClass`实例引用为 a `Runnable`，而在第二种情况下，您将其引用为 a `MyClass`（通过 an `ArrayList`，这没有任何用途）。

代替

```
Runnable processor = new MyClass(); 
```

采用

```
MyClass processor = new MyClass(); 
```

因为您希望能够调用`MyClass`方法。

# c# - MVC4 中的 Html.TextBox 和 Html.Editor 有什么区别？

> ID：13631417
> 
> 赞同：3
> 
> 时间：2012-11-29T17:32:01.977
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4

它们在网页上看起来很相似，但它们各自的 HTML 却大不相同：

```
<input id="TEST" name="TEST" type="text" value="this one's filled in, but editor isn't">
<input class="text-box single-line" id="TEST" name="TEST" type="text" value=""> 
```

[文档](http://msdn.microsoft.com/en-us/library/ee310225%28v=vs.108%29.aspx)说`Returns an HTML input element for each property in the object that is represented by the expression.`Html.Editor _

虽然[Html.TextBox](http://msdn.microsoft.com/en-us/library/dd492494%28v=vs.108%29.aspx)说`Returns a text input element by using the specified HTML helper and the name of the form field.`

这是否意味着您将模型的字符串名称传递给`Html.Editor`它，然后它将为其每个属性创建一个文本输入，而`Html.TextBox`' 将只是一个愚蠢的文本输入，在幕后没有其他任何东西？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-29T18:00:04.223

**HTML.文本框：**

使用指定的 HTML 帮助器和表单字段的名称返回文本输入元素。

**HTML.编辑器：**

此方法根据正在呈现的属性的数据类型以及该属性是否使用某些属性进行标记，生成不同的 HTML 标记。

*   如果属性被键入为基本类型（整数、字符串等），则该方法为文本框呈现 HTML 输入元素。

*   如果属性标记有数据类型属性或 UIHintAttribute 属性，则该属性指定为属性生成的标记。例如，如果属性用 MultilineText 特性标记，则该方法会为多行文本框生成标记。

*   如果对象包含多个属性，则该方法会为每个属性生成一个字符串，该字符串由属性名称的标记和用于编辑属性值的输入元素组成。
*   如果属性是布尔值，那么它将加载一个复选框。

# php - ZF2是基于MOVE的吗？

> ID：13631418
> 
> 赞同：7
> 
> 时间：2012-11-29T17:32:03.093
> 
> 标签：php, zend-framework, zend-framework2

我想知道 ZF2 是否完全基于 MOVE 而不是经典的 MVC。

我读到的某处确实基于 MOVE（http://cirw.in/blog/time-to-move-on），但例如在“入门教程”（http://zf2.readthedocs.org/en/ latest/user-guide/overview.html）他们说“使用模型-视图-控制器范例创建一个简单的数据库驱动应用程序”。

那么，它现在的依据是什么？两者都支持吗？

我有点困惑。ZF1和ZF2在MVC上有什么区别？

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-16T10:20:49.380

```
MOVE (Models, Operations, Views and Events)
MVC (Models, Views, Controllers) 
```

MVC 的问题在于您最终将过多的代码填充到控制器中，为了克服这个问题，MOVE 是 zf2 项目中另一个可能的选择，因为在这种架构中，您可以将控制器拆分为事件和操作。

**问：ZF2 是否完全基于 MOVE 架构？**

我不认为 ZF2 完全是基于 MOVE 架构设计的。ZF2 遵循[SOLID 面向对象的设计](http://framework.zend.com/about)原则，采用松散耦合的[MVC 架构](http://www.zend.com/en/company/news/event/1129_webinar-the-mvc-architecture-of-zf2)，在可用性方面提供了更大的灵活性。

**问：我可以使用 ZF2 中的 MOVE 架构开发我的项目吗？**

是的，ZF2 为您提供了支持两种架构（MOVE、MVC）的一切。它提供模型、视图、控制器（操作）、事件。由开发人员决定他想使用哪种架构。

[ZF1 和 ZF2 在另一个线程中进行比较。](https://stackoverflow.com/questions/12314300/zend-framework-1-vs-zend-framework-2-performance)

[MVC 或移动](http://news.ixwebhosting.mobi/2012/07/15/14067.html)

[SOLID 面向对象编程](http://www.codeproject.com/Articles/60845/The-S-O-L-I-D-Object-Oriented-Programming-OOP-Prin)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-27T18:31:16.033

我仍然是 zf2 的初学者，因为我已经将我的 zf1 代码完全移植到新的 zf2 框架，所以我在这里写作。我只能说新框架有很多优势，一旦你获得了某些新概念和新特性。您可以通过重用模块/组件等来节省大量开发新项目的时间。

在 zf2 中，大多数库组件被设计为独立的，即松散耦合，正如所说的那样，它提供了更大的灵活性，并且可以通过多种方式完成任务（就像 PHP 一样）。我看到的主要优势是模块，我可以轻松地将我的项目拆分为多个模块并单独测试并非常轻松地集成，而无需任何额外的代码。甚至我的模块文件夹中都有我的所有资源，如图像、css 和 JavaScript 文件，并且可以毫无问题地访问它（当然，在 index.php 中有一个小代码）

对我来说，ZF1 有固定的规则、流程等，而 zf2 已经解放了流程和规则，新增了事件命名空间、配置和延迟加载、组装对象、使用 servicemanger 注入依赖项。在 zf1 中，路由是自动的（程序化的），在 zf2 中我们需要路由定义，在 zf1 中控制器是自动选择的，而在 zf2 中，我们需要将控制器定义为可调用对象，这是一些需要一些时间才能进入的事情明白你会感到使用新的 zf2 框架的舒适

首先你可以做这个步骤

1.  学习服务经理
2.  配置的工作原理
3.  事件如何运作

组件方面或多或少与 zf1 中的工作方式相同（至少在我的情况下）

以下是我受益的以下优势

1.  完整的 OOP 感觉
2.  模块化应用开发
3.  设计然后开发到 PHP 应用程序
4.  网络应用（RIA）平台

# c# - 如何在背景上方插入图像

> ID：13631423
> 
> 赞同：3
> 
> 时间：2012-11-29T17:32:21.583
> 
> 标签：c#, wpf, xaml

我可以创建带有渐变背景的矩形。如何通过给出其路径在其上方插入图片？

```
<Rectangle StrokeThickness="2" Height="77" Canvas.Left="184" Canvas.Top="477" Width="119">
    <Rectangle.Fill>
        <LinearGradientBrush StartPoint="0,0.5" EndPoint="1,0.5">
            <GradientStop Color="Black" Offset="0" />
            <GradientStop Color="White" Offset="0.5" />
            <GradientStop Color="Black" Offset="1" />
        </LinearGradientBrush>
    </Rectangle.Fill>
</Rectangle> 
```

我想要的是：

![背景上方的图像](../Images/cb47fc8ad3d13a622e3ce8d4804e7a7d.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T18:51:18.240

将`Border`包含一个内容，因此如果您只有这些内容，则以下内容可以正常工作：

```
<Border>
  <Border.Background>
    <LinearGradientBrush StartPoint="0,0.5"
                         EndPoint="1,0.5">
      <GradientStop Color="Black"
                    Offset="0" />
      <GradientStop Color="White"
                    Offset="0.5" />
      <GradientStop Color="Black"
                    Offset="1" />
    </LinearGradientBrush>
  </Border.Background>
  <Image HorizontalAlignment="Center"
         VerticalAlignment="Center" />
</Border> 
```

如果您需要分层更多形状/路径/图像，那么您可以使用`Grid`支持多个子对象的对象：

```
<Grid>
  <!--Object 1-->
  <Ellipse StrokeThickness="2"
           Height="77"
           Width="119"
           HorizontalAlignment="Center"
           VerticalAlignment="Center">
    <Ellipse.Fill>
      <LinearGradientBrush StartPoint="0,0.5"
                           EndPoint="1,0.5">
        <GradientStop Color="Black"
                      Offset="0" />
        <GradientStop Color="White"
                      Offset="0.5" />
        <GradientStop Color="Black"
                      Offset="1" />
      </LinearGradientBrush>
    </Ellipse.Fill>
  </Ellipse>
  <!--Object 2-->
  <Image HorizontalAlignment="Center"
         VerticalAlignment="Center" />
</Grid> 
```

请记住，WPF 从 XAML 的开头开始绘制控件，因此 XAML 列表中定义的最后一个控件是在顶部绘制的控件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T17:41:31.303

由于 Rectangle 不支持直接内容，因此您可以将图像放置在与矩形相关的位置，并为其赋予更高的 Canvas.ZIndex 属性，以便它将呈现在矩形顶部。

前任：

```
<Rectangle StrokeThickness="2"
           Height="77"
           Canvas.Left="184"
           Canvas.Top="477"
           Width="119"
           Canvas.ZIndex="1">
  <Rectangle.Fill>
    <LinearGradientBrush StartPoint="0,0.5"
                         EndPoint="1,0.5">
      <GradientStop Color="Black"
                    Offset="0" />
      <GradientStop Color="White"
                    Offset="0.5" />
      <GradientStop Color="Black"
                    Offset="1" />
    </LinearGradientBrush>
  </Rectangle.Fill>
</Rectangle>
<Image Height="50"
       Canvas.Left="184"
       Canvas.Top="477"
       Width="50"
       Canvas.ZIndex="2" /> 
```

**编辑**

在矩形中居中图像始终是一个不同的问题。您可以在代码中包含一个属性，该属性表示计算出的矩形中心坐标，当您移动矩形时（通过事件），该坐标会发生变化。然后，您可以将您的图像位置绑定到该属性。

# mysql - mySQL 'SELECT' 限制为变量字符串

> ID：13631424
> 
> 赞同：0
> 
> 时间：2012-11-29T17:32:22.623
> 
> 标签：mysql

我正在尝试运行以下命令：

```
SELECT * FROM my_table WHERE thecolum = thevar; 
```

我的实际命令是：

```
SELECT * FROM jos_mls WHERE mstlistbrd = 3675E4340E0560; 
```

控制台正在反击我：

```
"ERROR 1367 (22007): Illegal double '3675E4340' value found during parsing 
```

读到这里，我看到两件事：

1.  它两次找到该值（我想要它，因为我希望它为该值提取所有行。
2.  它切断了 5 位数字的值。

除了发现重复之外，它是否只是出于某种原因而进入值的第 9 位？如何让它打印重复值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T17:34:54.350

您忘记了字符串周围的引号

```
SELECT * FROM jos_mls WHERE mstlistbrd = '3675E4340E0560' 
```

没有它们，它会尝试将其解释为失败的数字并给你你得到的错误。

# syntax-highlighting - 如何在 Aptana 中突出显示 Blade 语法

> ID：13631425
> 
> 赞同：8
> 
> 时间：2012-11-29T17:32:22.797
> 
> 标签：syntax-highlighting, laravel, blade

有谁知道如何为 Laravel 在 Aptana 中使用的 Blade 模板语言获得语法高亮显示？

我找到了这个，但找不到可以从中安装任何类似东西的存储库。

[https://github.com/Medalink/Laravel-Blade](https://github.com/Medalink/Laravel-Blade)

* * *

## 回答 #1

> 赞同：-5
> 
> 时间：2012-11-30T10:47:01.870

[https://github.com/Medalink/Laravel-Blade/blob/master/Blade.tmLanguage](https://github.com/Medalink/Laravel-Blade/blob/master/Blade.tmLanguage) 在这里您可以突出显示崇高文本 2。我不知道这些类型的文件如何与 aptana 有关联。您可以搜索并转换它。请记住：Aptana 就像 Eclipse（尽管它是建立在 eclipse 之上的），所以您也可以搜索 eclipse。

祝你好运。

PS YU 不使用 SUBLIME？:)

# c++ - libcurl、OSX、curl_multi_perform 访问错误

> ID：13631427
> 
> 赞同：3
> 
> 时间：2012-11-29T17:32:28.897
> 
> 标签：c++, objective-c, macos, exc-bad-access, libcurl

我最近编写了一个使用 libcurl 处理 http 请求的 C++ 库。我的一个同事开始在 OSX 上使用它来开发一个用 Objective-C 编写的应用程序。在大多数情况下，它工作得很好。但由于某种原因，在多部分后调用中，我们在 curl_multi_perform 调用中看到了 EXC_BAD_ACCESS。

现在我被困住了，我最初是在我的 Linux 机器上开发的，并且后来编写了使用该库的程序，没有任何问题。作为 *nix 开发生态系统的新手，并且几乎没有在 OSX 上开发的经验，我不太确定如何进行调试。

我确实在这个例子中插入了一个逐行的 post 函数，只是为了得到一个基线，看看问题是否仍然存在，确实如此。

[http://curl.haxx.se/libcurl/c/postit2.html](http://curl.haxx.se/libcurl/c/postit2.html)

回顾一下，lib 本身是用 C++ 编写的，调用 libcurl 方法。它在我测试过的几台 linux 机器上运行良好。在 OSX 上，在 Objective C 项目中，当调用 multipart post 函数时，访问错误。

我从这里去哪里？我怎样才能进一步缩小这个问题？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T18:21:48.340

我认为您需要更熟悉 OSX 和 Xcode。Xcode 提供了非常广泛的内存错误调试方法。Libcurl 可能是错误的原因。我建议获取您自己的 libcurl 调试版本。

请参考这篇文档：[Mac OS X Debugging Magic](http://developer.apple.com/library/mac/#technotes/tn2124/_index.html)

# ios - 动态添加的 UIBarButtonItem 的奇怪行为

> ID：13631428
> 
> 赞同：1
> 
> 时间：2012-11-29T17:32:29.820
> 
> 标签：ios, selector, uibarbuttonitem, uitoolbar

我正在开发一个动态添加`UIBarButtonItem`的应用程序。`UIToolbar`当用户单击条形按钮时。我正在将它的色调更改为红色。但是对于某些条形按钮，它不起作用并且应用程序正在崩溃。

**这是我的代码：**

```
@interface myClass : UIViewController

@property (nonatomic, retain) NSMutableArray *barButtonItems;
@property (nonatomic, retain) IBOutlet UIToolbar *toolBar;

@end

@implementation myClass 

@sythesize barButtonItems, toolBar;

- (void)viewDidLoad
{
  [super viewDidLoad];
  barButtonItems = [[NSMutableArray alloc] init];
  [self initToolBar];
}

//To set the tool bar 
- (void)initToolBar
{
   [self addBarItem:@"PlantDetails" actionName:@"createPlantDetails:"];
   [self addBarItem:@"ElectricalEquipmentInventory" actionName:@"createInventory:button:"];
   toolBar.items = barButtonItems;
}

//Create bar button item
- (void)addBarItem:(NSString*)barButtonName actionName:(NSString*)methodName
{
   UIBarButtonItem *plantDetails = [[UIBarButtonItem alloc] initWithTitle:barButtonName style:UIBarButtonItemStyleDone target:self action:NSSelectorFromString(methodName)];
   [barButtonItems addObject:plantDetails];
   [plantDetails release];
   plantDetails = nil; 
}

//Changes the barbutton tintcolor when user selected
-(void)changeSelection:(UIBarButtonItem *)button
{
   NSArray *tempArray = toolBar.items;
   for(int loop = 0; loop<[tempArray count]; loop++)
       [[tempArray objectAtIndex:loop] setTintColor:[UIColor blackColor]];
   [button setTintColor:[UIColor redColor]];
}

//First bar button method
- (void)createPlantDetails:(UIBarButtonItem *)button
{
   [self changeSelection:button];
   NSLog(@"createPlantDetails");
}

//second bar button method
- (void)createInventory:(int)selectedIndex button:(UIBarButtonItem *)button
{
   [self changeSelection:button];
   NSLog(@"createInventory");
}

@end 
```

这里我的问题是在它的选择器中只有一个参数的条形按钮工作正常（`createPlantDetails`）但是当我点击在它的选择器中有两个参数的条形按钮（`createInventory`）时，应用程序正在崩溃`[button setTintColor:[UIColor redColor]];`的`changeSelection`方法。

崩溃日志类似于：`touches event have no method like setTintColor .`

我搜索了很多，但找不到解决方案。请帮我。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T18:45:50.160

属性的方法`action`必须具有以下三种形式之一：

```
- (void)methodName;
- (void)methodName:(id)sender;
- (void)methodName:(id)sender withEvent:(UIEvent *)event; 
```

您不能使用任意格式或自定义参数（按钮不知道为它们传递什么）。

该`createPlantDetails:`方法有效，因为它匹配第二种形式。

该`createInventory:button:`方法失败，因为它不匹配任何预期的签名。
由于您的方法有两个参数，因此当按钮调用该方法时，按钮会`UIEvent`在第二个参数中传递一个对象，该对象在您的方法中*名为* `button`。

在`changeSelection:`中，它在尝试调用时崩溃，`setTintColor:`因为`button`它实际上是 a`UIEvent`而不是`UIBarButtonItem`（即发送者）。

# android - 无法解析 LoginActivity 的超类扩展 FacebookActivity

> ID：13631432
> 
> 赞同：-1
> 
> 时间：2012-11-29T17:32:40.073
> 
> 标签：android, android-manifest, runtime-error, oncreate, main-activity

```
11-29 11:23:06.101: E/AndroidRuntime(301):  at 
com.mypackage.myapp.MainActivity.onCreate(MainActivity.java:41) 
```

我通常看不到这一点，除非它是 Manifest 的问题或活动未正确初始化。唯一的问题是，它在 Manifest 中已初始化且正确、拼写、键入等。任何人都有任何其他想法，这可能是什么。

```
public class MainActivity extends FragmentActivity
{
    public static Intent loginActivityIntent;

    @Override
    protected void onCreate(Bundle MainActivityState)
    {
        super.onCreate(MainActivityState);
        setContentView(R.layout.activity_main);
Line41->loginActivityIntent = new Intent(this, LoginActivity.class);
    }
} 
```

AndroidManifest.xml

```
LoginActivity
        <activity
            android:name="com.mypackage.myapp.LoginActivity"
            android:theme="@style/FullscreenTheme">
                <action android:name="android.intent.action.LOGIN"/>
                <category android:name="android.intent.category.DEFAULT"/>
        </activity> 
```

在这个 logcat 的顶部，它声明“无法解析 loginactivity 的超类。LoginActivity 来自 Facebook SDK，超类是 FacebookActivity，在编辑过程中它不会给我一个错误。

```
11-29 11:38:41.642: W/dalvikvm(330): Unable to resolve superclass of Lcom/limbones/profilelife/LoginActivity; (462)
11-29 11:38:41.683: W/dalvikvm(330): Link of class 'Lcom/limbones/profilelife/LoginActivity;' failed
11-29 11:38:41.683: W/dalvikvm(330): Unable to resolve superclass of Lcom/limbones/profilelife/PLLoginActivity; (471)
11-29 11:38:41.683: W/dalvikvm(330): Link of class 'Lcom/limbones/profilelife/PLLoginActivity;' failed
11-29 11:38:41.692: E/dalvikvm(330): Could not find class 'com.limbones.profilelife.PLLoginActivity', referenced from method com.limbones.profilelife.PLMainActivity.onCreate
11-29 11:38:41.692: W/dalvikvm(330): VFY: unable to resolve const-class 475 (Lcom/limbones/profilelife/PLLoginActivity;) in Lcom/limbones/profilelife/PLMainActivity;
11-29 11:38:41.692: D/dalvikvm(330): VFY: replacing opcode 0x1c at 0x000a
11-29 11:38:41.702: D/dalvikvm(330): VFY: dead code 0x000c-002b in Lcom/limbones/profilelife/PLMainActivity;.onCreate (Landroid/os/Bundle;)V
11-29 11:38:41.942: D/AndroidRuntime(330): Shutting down VM
11-29 11:38:41.942: W/dalvikvm(330): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
11-29 11:38:42.072: E/AndroidRuntime(330): FATAL EXCEPTION: main
11-29 11:38:42.072: E/AndroidRuntime(330): java.lang.NoClassDefFoundError: com.limbones.profilelife.PLLoginActivity
11-29 11:38:42.072: E/AndroidRuntime(330):  at com.limbones.profilelife.PLMainActivity.onCreate(PLMainActivity.java:43)
11-29 11:38:42.072: E/AndroidRuntime(330):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
11-29 11:38:42.072: E/AndroidRuntime(330):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
11-29 11:38:42.072: E/AndroidRuntime(330):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
11-29 11:38:42.072: E/AndroidRuntime(330):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
11-29 11:38:42.072: E/AndroidRuntime(330):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
11-29 11:38:42.072: E/AndroidRuntime(330):  at android.os.Handler.dispatchMessage(Handler.java:99)
11-29 11:38:42.072: E/AndroidRuntime(330):  at android.os.Looper.loop(Looper.java:123)
11-29 11:38:42.072: E/AndroidRuntime(330):  at android.app.ActivityThread.main(ActivityThread.java:4627)
11-29 11:38:42.072: E/AndroidRuntime(330):  at java.lang.reflect.Method.invokeNative(Native Method)
11-29 11:38:42.072: E/AndroidRuntime(330):  at java.lang.reflect.Method.invoke(Method.java:521)
11-29 11:38:42.072: E/AndroidRuntime(330):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
11-29 11:38:42.072: E/AndroidRuntime(330):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
11-29 11:38:42.072: E/AndroidRuntime(330):  at dalvik.system.NativeStart.main(Native Method)
11-29 11:38:44.592: I/Process(330): Sending signal. PID: 330 SIG: 9 
```

更新：

这是我的清单中唯一不同的地方

```
 <activity
        android:name="com.facebook.LoginActivity"
        android:label="">
        <action android:name="android.intent.action.LOGINACTIVITY"/>
        <category android:name="android.intent.category.DEFAULT"/>
    </activity> 
```

它链接到的活动只是称为 LoginActivity，我是否也应该包含前缀？

登录活动.java

```
package com.limbones.profilelife;

import android.os.Bundle;
import android.widget.TextView;

import com.facebook.FacebookActivity;
import com.facebook.Request;
import com.facebook.Response;
import com.facebook.SessionState;
import com.facebook.model.GraphUser;

public class LoginActivity extends FacebookActivity
{
    public void onCreate(Bundle LoginActivity)
    {
        super.onCreate(LoginActivity);
        setContentView(R.layout.facebook_login_activity);
        this.openSession();
    }

    @Override
    protected void onSessionStateChange(SessionState state, Exception exception)
    {
        if (state.isOpened())
        {
            @SuppressWarnings("unused")
            Request request = Request.newMeRequest(
            this.getSession(), new Request.GraphUserCallback()
            {
                @Override
                public void onCompleted(GraphUser user, Response response)
                {
                    if (user != null)
                    {
                        TextView welcome = (TextView) findViewById(R.id.facebookWelcome);
                        welcome.setText("Hello " + user.getName() + "!");
                    }
                }
            });
        }
    }
} 
```

PLLoginActivity.Java

```
package com.limbones.profilelife;

import android.content.Intent;
import android.os.Bundle;
import android.view.View;

public class PLLoginActivity extends LoginActivity
{
    public Intent registerActivityIntent;
    public Intent notImplementedIntent;
    public Intent facebookLoginIntent;

    public void onCreate(Bundle LoginPage)
    {
        super.onCreate(LoginPage);
        setContentView(R.layout.login_page);
        registerActivityIntent = new Intent(this, PLRegisterActivity.class);
        notImplementedIntent = new Intent(this, PLNotImplemented.class);
        facebookLoginIntent = new Intent(this, LoginActivity.class);
    }

    public void backButton(View v)
    {
        finish();
    }

    public void registerButton(View v)
    {
        this.startActivity(registerActivityIntent);
    }

    public void loginButton(View v)
    {
        this.startActivity(notImplementedIntent);
    }

    public void fbLogin(View v)
    {
        this.startActivity(facebookLoginIntent);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T18:54:16.233

我会检查项目设置。从您的日志猫：

```
11-29 11:38:41.642: W/dalvikvm(330): Unable to resolve superclass of Lcom/limbones/profilelife/LoginActivity; (462)
11-29 11:38:41.683: W/dalvikvm(330): Link of class 'Lcom/limbones/profilelife/LoginActivity;' failed
11-29 11:38:41.683: W/dalvikvm(330): Unable to resolve superclass of Lcom/limbones/profilelife/PLLoginActivity; (471)
11-29 11:38:41.683: W/dalvikvm(330): Link of class 'Lcom/limbones/profilelife/PLLoginActivity;' failed 
```

好像你错过了 FacebookActivity？

# javascript - 如何判断一行是否包含带有javascript文本框的单元格

> ID：13631434
> 
> 赞同：1
> 
> 时间：2012-11-29T17:32:49.400
> 
> 标签：javascript, html

我有一个从用户指定的查询动态构建到数据库的表，我想为用户提供从生成的 HTML 表中编辑数据的选项。当用户双击包含他们要编辑的数据的行时，我会在其下方出现一个新行，并带有文本框供他们提交新值。现在，当用户单击双击两行时，两行文本框都保留在表中，我想在第二行出现之前删除第一行。我的问题是，找到包含文本框的表格行以便我可以使用 JavaScript 的`deleteRow()`函数有什么好处？

我正在生成这样的行：

```
function editRow(row) {
    var table = document.getElementById("data");
    var newRow = table.insertRow(row.rowIndex + 1);
    var cell;

    for (var i = 0; i < row.childNodes.length; i++) {
        cell = newRow.insertCell(i);
        textBox = document.createElement("input");
        textBox.type = "text";
        textBox.placeholder = row.childNodes[i].innerHTML;
        textBox.style.textAlign = "center";
        textBox.style.width = "90%";
        cell.appendChild(textBox);
    }
} 
```

我能想到的唯一方法是（伪代码）：

```
for all table rows 
    if row.childNodes.innerHTML contains 'input' 
        deleteRow(index) 
```

谢谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T17:40:31.803

你可以使用[jQuery](http://api.jquery.com/jQuery/)。假设`row`是一个 DOM 元素，这应该可以工作：

```
var textBoxes = $("input:text", row); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T17:36:52.987

我想最简单的选择是将创建的行添加到数组中。这样，您只需删除数组中的行，而不是遍历整个表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T19:31:22.560

我最终做了以下事情：

```
function editRow(row) {
    var table = document.getElementById("data");
    clearExistingTextBoxes(table);
    ...
}

function clearExistingTextBoxes(table) {
    var tBoxRow = table.getElementsByTagName("input");
    if (tBoxRow.length > 0) {
    tBoxRow = tBoxRow[0].parentNode.parentNode;
    table.deleteRow(tBoxRow.rowIndex);
    }
} 
```

假设我一次只清理一排。

# android - 如果托管在我的服务器上，mp4 视频无法在 android 中播放

> ID：13631456
> 
> 赞同：0
> 
> 时间：2012-11-29T17:34:24.850
> 
> 标签：android, html, apache, html5-video

我面临一个奇怪的问题。我尝试**在 android 设备上播放 mp4 视频，**当视频托管在我的服务器上时无法播放，但如果托管在其他服务器上，相同的视频文件在相同的 android 设备上播放。我**只在 android 设备**上遇到这个问题，我可以在我的桌面上播放视频，无论它在哪里托管。有没有其他人遇到过这样的问题？

显然是服务器问题。但我不知道如何更改使 mp4 能够在 android 设备中播放的设置！

服务器：apache2.2.3

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T17:51:35.580

更新您`httpd.conf`以添加 mp4 的 MIME 类型

```
AddType video/mp4 .mp4 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-27T12:53:12.407

如果您有密码限制（如 .htaccess），请尝试删除它并再次测试。即使 Chrome 知道您的密码，视频播放器也可能不知道，也不会提示您输入密码。全屏播放时，播放器只会说“抱歉，此视频无法播放”。

# apache2 - 多个 apache 根进程

> ID：13631459
> 
> 赞同：3
> 
> 时间：2012-11-29T17:34:37.667
> 
> 标签：apache2

我今天注意到，当从我们的网络服务器发出请求时，事情相当缓慢。我开始研究它，我发现了很多 root 拥有的 apache 进程。

我不确定这实际上是导致事情变慢的原因，但无论如何，它看起来并不好。

问题是，我不知道从这里做什么？我如何找出为什么有这么多根进程？有人可以推荐一组测试吗？我试过跟踪其中一些，他们似乎在做某事，但 strace 的输出超出了我的范围。

```
root     30918  1.8  1.3  84284 52296 ?        Ss   14:11   0:01 /usr/sbin/apache2 -k restart
root     30919  0.0  1.1  84420 45612 ?        S    14:11   0:00 /usr/sbin/apache2 -k restart
root     30920  0.0  1.1  84420 45604 ?        S    14:11   0:00 /usr/sbin/apache2 -k restart
root     30921  0.0  1.1  84420 45612 ?        S    14:11   0:00 /usr/sbin/apache2 -k restart
root     30922  0.1  1.1  84420 45612 ?        S    14:11   0:00 /usr/sbin/apache2 -k restart
root     30923  0.0  1.1  84420 45612 ?        S    14:11   0:00 /usr/sbin/apache2 -k restart
www-data 30926  6.6  1.5 104964 61336 ?        S    14:12   0:03 /usr/sbin/apache2 -k restart
root     30930  0.1  1.1  84420 45616 ?        S    14:12   0:00 /usr/sbin/apache2 -k restart
root     30933  0.0  1.1  84420 45616 ?        S    14:12   0:00 /usr/sbin/apache2 -k restart
root     30935  0.0  1.1  84420 45616 ?        S    14:12   0:00 /usr/sbin/apache2 -k restart
root     30936  0.0  1.1  84420 45616 ?        S    14:12   0:00 /usr/sbin/apache2 -k restart
root     30937  0.0  1.1  84420 45616 ?        S    14:12   0:00 /usr/sbin/apache2 -k restart
root     30938  0.0  1.1  84420 45616 ?        S    14:12   0:00 /usr/sbin/apache2 -k restart
root     30961  0.0  1.1  84420 45612 ?        S    14:12   0:00 /usr/sbin/apache2 -k restart
root     30989  0.0  1.1  84420 45612 ?        S    14:12   0:00 /usr/sbin/apache2 -k restart
root     30990  0.0  1.1  84420 45612 ?        S    14:12   0:00 /usr/sbin/apache2 -k restart
root     31011  0.1  1.1  84420 45612 ?        S    14:12   0:00 /usr/sbin/apache2 -k restart
root     31013  0.1  1.1  84420 45612 ?        S    14:12   0:00 /usr/sbin/apache2 -k restart
root     31014  0.0  1.1  84420 45612 ?        S    14:12   0:00 /usr/sbin/apache2 -k restart
www-data 31175  2.5  1.5 104168 60524 ?        S    14:12   0:00 /usr/sbin/apache2 -k restart
www-data 31189  2.3  1.4 102360 58920 ?        S    14:12   0:00 /usr/sbin/apache2 -k restart
www-data 31190  1.5  1.4 101904 58356 ?        S    14:12   0:00 /usr/sbin/apache2 -k restart
www-data 31191  0.3  1.1  84556 46760 ?        S    14:12   0:00 /usr/sbin/apache2 -k restart
www-data 31192  1.4  1.4 101916 58384 ?        S    14:12   0:00 /usr/sbin/apache2 -k restart
www-data 31193  1.5  1.4 101916 58376 ?        S    14:12   0:00 /usr/sbin/apache2 -k restart
root     31240  0.1  1.1  84420 45612 ?        S    14:12   0:00 /usr/sbin/apache2 -k restart 
```

这是其中一个进程的 strace 输出示例。

```
--- SIGCHLD (Child exited) @ 0 (0) ---
read(6, 0xff87f6ef, 1)                  = -1 EAGAIN (Resource temporarily unavailable)
getuid32()                              = 0
close(17)                               = 0
gettimeofday({1354109303, 670988}, NULL) = 0
semop(5668864, {{0, -1, SEM_UNDO}}, 1)  = 0
accept(4, {sa_family=AF_INET, sin_port=htons(48107), sin_addr=inet_addr("192.168.16.12")}, [16]) = 17
fcntl64(17, F_GETFD)                    = 0
fcntl64(17, F_SETFD, FD_CLOEXEC)        = 0
semop(5668864, {{0, 1, SEM_UNDO}}, 1)   = 0
clone(child_stack=0, flags=CLONE_CHILD_CLEARTID|CLONE_CHILD_SETTID|SIGCHLD, child_tidptr=0xf74a2768) = 1949
waitpid(1949, [{WIFEXITED(s) && WEXITSTATUS(s) == 0}], 0) = 1949
--- SIGCHLD (Child exited) @ 0 (0) ---
read(6, 0xff87f6ef, 1)                  = -1 EAGAIN (Resource temporarily unavailable)
getuid32()                              = 0
close(17)                               = 0
gettimeofday({1354109305, 724358}, NULL) = 0
semop(5668864, {{0, -1, SEM_UNDO}}, 1)  = 0
accept(4, {sa_family=AF_INET, sin_port=htons(48132), sin_addr=inet_addr("192.168.16.12")}, [16]) = 17
fcntl64(17, F_GETFD)                    = 0
fcntl64(17, F_SETFD, FD_CLOEXEC)        = 0
semop(5668864, {{0, 1, SEM_UNDO}}, 1)   = 0
clone(child_stack=0, flags=CLONE_CHILD_CLEARTID|CLONE_CHILD_SETTID|SIGCHLD, child_tidptr=0xf74a2768) = 1974
waitpid(1974, [{WIFEXITED(s) && WEXITSTATUS(s) == 0}], 0) = 1974
--- SIGCHLD (Child exited) @ 0 (0) --- 
```

我已经禁用了 mods-enabled 中的所有模块，除了 auth、env、siteenv 和 alias 等基本模块并启动了服务器。在这种情况下，我仍然得到 6 个根 apache 进程和 1 个 www-data 拥有的 apache 进程。

我确保所有模块都是最新的。

日志中没有明显的错误。

配置跟随；

```
ServerRoot "/etc/apache2"

LockFile /var/lock/apache2/accept.lock

PidFile ${APACHE_PID_FILE}

Timeout 300

KeepAlive On

MaxKeepAliveRequests 100

KeepAliveTimeout 15

<IfModule mpm_worker_module>
StartServers          2
MaxClients          150
MinSpareThreads      25
MaxSpareThreads      75 
ThreadsPerChild      25
MaxRequestsPerChild   0
</IfModule>

User ${APACHE_RUN_USER}
Group ${APACHE_RUN_GROUP}

AccessFileName .htaccess

<Files ~ "^\.ht">
Order allow,deny
Deny from all
</Files>

DefaultType text/plain

HostnameLookups Off

ErrorLog /var/log/apache2/error.log

LogLevel warn

Include /etc/apache2/mods-enabled/*.load
Include /etc/apache2/mods-enabled/*.conf

Include /etc/apache2/httpd.conf

Include /etc/apache2/ports.conf

LogFormat "%v:%p %h %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\"" vhost_combined
LogFormat "%h %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\"" combined
LogFormat "%h %l %u %t \"%r\" %>s %b" common
LogFormat "%{Referer}i -> %U" referer
LogFormat "%{User-agent}i" agent

CustomLog /var/log/apache2/other_vhosts_access.log vhost_combined

Include /etc/apache2/conf.d/

Include /etc/apache2/sites-enabled/ 
```

在模块中编译为： 在模块中编译： core.c mod_log_config.c mod_logio.c itk.c http_core.c mod_so.c

所以我现在只运行 mpm_worker 配置。

```
DEBUG UPDATER
When I restart apache, and ps, I get something like this;
    root     26921  0.5  1.3  80008 52452 ?        Ss   21:27   0:02 /usr/sbin/apache2 -k start
    root     27114  0.0  1.1  80144 44804 ?        S    21:34   0:00 /usr/sbin/apache2 -k start
    root     27115  0.0  1.1  80144 44820 ?        S    21:34   0:00 /usr/sbin/apache2 -k start
    root     27116  0.0  1.1  80144 44804 ?        S    21:34   0:00 /usr/sbin/apache2 -k start
    root     27117  0.0  1.1  80144 44804 ?        S    21:34   0:00 /usr/sbin/apache2 -k start
    root     27119  0.0  1.1  80144 44804 ?        S    21:34   0:00 /usr/sbin/apache2 -k start 
```

如果我将 LogLevel 调试并重新启动，那么我会从 mod_proxy 看到这些消息

```
[Thu Nov 29 21:34:01 2012] [info] Server built: Sep  9 2012 21:17:36
[Thu Nov 29 21:34:01 2012] [debug] itk.c(1100): AcceptMutex: sysvsem (default: sysvsem)
[Thu Nov 29 21:34:01 2012] [debug] proxy_util.c(1818): proxy: grabbed scoreboard slot 0 in child 27115 for worker proxy:reverse
[Thu Nov 29 21:34:01 2012] [debug] proxy_util.c(1818): proxy: grabbed scoreboard slot 0 in child 27114 for worker proxy:reverse
[Thu Nov 29 21:34:01 2012] [debug] proxy_util.c(1934): proxy: initialized single connection worker 0 in child 27115 for (*)
[Thu Nov 29 21:34:01 2012] [debug] proxy_util.c(1837): proxy: worker proxy:reverse already initialized
[Thu Nov 29 21:34:01 2012] [debug] proxy_util.c(1934): proxy: initialized single connection worker 0 in child 27114 for (*)
[Thu Nov 29 21:34:01 2012] [debug] proxy_util.c(1818): proxy: grabbed scoreboard slot 0 in child 27117 for worker proxy:reverse
[Thu Nov 29 21:34:01 2012] [debug] proxy_util.c(1837): proxy: worker proxy:reverse already initialized
[Thu Nov 29 21:34:01 2012] [debug] proxy_util.c(1934): proxy: initialized single connection worker 0 in child 27117 for (*)
[Thu Nov 29 21:34:01 2012] [debug] proxy_util.c(1818): proxy: grabbed scoreboard slot 0 in child 27119 for worker proxy:reverse
[Thu Nov 29 21:34:01 2012] [debug] proxy_util.c(1837): proxy: worker proxy:reverse already initialized
[Thu Nov 29 21:34:01 2012] [debug] proxy_util.c(1934): proxy: initialized single connection worker 0 in child 27119 for (*)
[Thu Nov 29 21:34:01 2012] [debug] proxy_util.c(1818): proxy: grabbed scoreboard slot 0 in child 27116 for worker proxy:reverse
[Thu Nov 29 21:34:01 2012] [debug] proxy_util.c(1837): proxy: worker proxy:reverse already initialized
[Thu Nov 29 21:34:01 2012] [debug] proxy_util.c(1934): proxy: initialized single connection worker 0 in child 27116 for (*)
[Thu Nov 29 21:36:20 2012] [notice] SIGHUP received.  Attempting to restart 
```

注意 pids 匹配。但是，如果我禁用 mod_proxy，那么这些消息就会消失，但我仍然会启动相同数量的根进程，所以我相信这是一个症状而不是原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T17:39:46.350

这对于 Apache 来说是绝对正常的。每个进程一次处理一个请求。因此，如果只有一个进程（称为 worker），那么如果有很多用户，它会非常慢。

我看到的问题是这些不应该是根拥有的进程。根据您的平台，它应该有自己的用户。就像在 Debian 中，用户是 www-data。然后只有一个进程归根用户所有，其余进程归该用户所有。

然而，速度是由几个因素决定的——硬件、Web 服务器和 Web 应用程序。

确保您运行的硬件符合要求（足够的内存和 CPU）

在硬件能力差的情况下减少工人数量，如果它非常好，则增加工人数量。

确保 Web 应用程序（如果有的话，通常是 php 应用程序）不是性能瓶颈。

PS：很抱歉格式不好，从手机打字很闷。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-03T17:05:21.463

知道我玩游戏有点晚了，但我遇到了同样的问题，并且正在疯狂地试图弄清楚发生了什么。我在 apache 2.4.7 上比你更新一点，但大体上是一样的。

我必须查看 /etc/apache2/mods-enabled/mpm_prefork.conf 才能找到我的 mpm 配置，但你在这里找到了它：

```
<IfModule mpm_worker_module>
 StartServers          2
 MaxClients          150
 MinSpareThreads      25
 MaxSpareThreads      75 
 ThreadsPerChild      25
 MaxRequestsPerChild   0
</IfModule> 
```

看起来像一个有效的配置，它就是。但是，像我的一样，您的 MaxRequestsPerChild 设置为 0。我已将其调整为大约 10（可能会更高，但现在只是测试），我认为这解决了我的问题。希望这可以帮助！

# javascript - 如何在域的所有页面上运行 javascript 脚本？

> ID：13631462
> 
> 赞同：0
> 
> 时间：2012-11-29T17:34:46.030
> 
> 标签：javascript, jquery, html, cookies, salesforce

我在销售人员工作。有些页面完全无法访问，即我无法在这些页面中添加任何 javascript。但是有些页面我可以添加一些 javascript，这两个页面都在同一个域上。我可以以某种方式将脚本存储在 cookie 或本地存储或其他东西中，以便当页面（可访问）加载时，我可以存储脚本并在不可访问的页面加载时执行它？

请帮忙！！

问候萨米尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T17:37:46.217

您不能在 SalesForce.com 上运行自己的 JS，但您当然可以使用 SF 的[API](http://www.salesforce.com/us/developer/docs/api/index.htm)和[SOQL](http://www.salesforce.com/us/developer/docs/api/Content/sforce_api_calls_soql.htm)来获取服务器所需的任何数据并在该页面上运行 JS

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-29T17:37:57.757

不，这是不可能的，除非您有权以某种方式修改页面上显示的内容。如果可能的话，黑客只会在任何人的机器上存放 cookie，从而破坏互联网。

# automation - 是否有任何编程功能可以自动检测计算重复？

> ID：13631464
> 
> 赞同：1
> 
> 时间：2012-11-29T17:34:55.343
> 
> 标签：automation, computation

我是编程新手，正在学习麻省理工学院的 6.00。在观看[动态编程](http://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-00sc-introduction-to-computer-science-and-programming-spring-2011/unit-3/lecture-23-dynamic-programming/)讲座时，我想到了一个简单的问题：是否有任何内置功能（一般用于计算机）来检测重复性任务并进行补偿？

我意识到这很模糊。我正在使用我祖父的电脑，因为他一直抱怨它很慢。实际上，它一次最多会延迟 15 秒，等待程序打开等。当我升级 RAM 时，问题就消失了。因此，如果计算机经常不得不将页面输入和页面输出写入磁盘，为什么它不能弹出一条提示 RAM 升级的小消息呢？这样可以节省不少时间。

计算机擅长快速执行任务，但慢代码可能会很慢。这可以自动化吗？这甚至是一个合理的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T17:53:36.200

在您描述的示例中，代码并不慢，因为它正在读取/写入磁盘。它很慢，因为它实际上并没有做任何事情，而是等待操作系统将页面输入和输出到磁盘。

此外，RAM 升级并不总是频繁分页的解决方案（比如错误程序泄漏内存或其他问题）。

从一般意义上说，操作系统实际上不可能检测到所有可能的问题并提出解决方案。这实际上是[停机问题](http://en.wikipedia.org/wiki/Halting_problem)的一种变体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T18:20:52.893

一般来说，计算机不可能知道缓慢是因为它正在运行一项基本上需要很长时间才能完成的操作，还是因为它所花费的时间比实际需要的多。

此外，即使您已确定操作速度很慢，也更难以诊断出操作速度缓慢的确切原因。有时是因为您需要更多的 RAM，有时是因为网络速度慢、磁盘速度慢或 CPU 速度慢。如果检查器在运行它的同一台机器上运行，这将更加困难，因为它本身也遇到了缓慢的问题。

但是，在某些有限的情况下可以做几件事。许多流行的操作系统（例如 Windows、Linux、Android）可以检测到对用户输入的缓慢响应，并且会提供更多时间或强制关闭应用程序 (Android) 或以灰度 (Linux) 或淡蓝色绘制无响应窗口(Windows)，如果应用程序在一定时间内未能响应用户输入。

# javascript - 在网页上显示数据的最佳方式

> ID：13631468
> 
> 赞同：-3
> 
> 时间：2012-11-29T17:35:05.753
> 
> 标签：javascript, python, html, ajax

我正在创建一个从数据库访问测试数据并将结果显示回通用 HTML 网页的 Intranet 站点。

现在，我将 Python 设置为 cgi，并获得了我现在需要的预期结果。但是现在有一个要求实时显示一些信息。

我是通过这种方式进入网络编程世界的新手，但是在不重新加载的情况下运行 Python 脚本并在 HTML 页面上显示信息的最佳方式是什么。

我知道如何在 Python 服务器端获取信息并在 HTML 端正确显示信息，但我缺少的是如何将两者链接在一起或从 HTML 端调用 Python 方法。

任何建议或简单的例子都会很棒。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T17:38:38.457

一个简单的谷歌搜索将帮助您找到如何创建 python 网站。

[这是一个例子](http://net.tutsplus.com/tutorials/python-tutorials/python-from-scratch-creating-a-dynamic-website/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T17:47:21.157

如果“重新加载”是指用户不必在浏览器中点击“重新加载”/“刷新”，那么您需要设置一个端点 URL，以某种格式（JSON/XML 或甚至可以直接插入 DOM 的 HTML），并使用 AJAX 定期轮询该 URL 并进行更新。要么，要么查看Web Sockets。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T18:18:51.623

如果你想*重新加载整个页面*，那么只需`meta refresh`在 HEAD 部分的 HTML 中添加一个标签：

```
<meta http-equiv="refresh" content="20" /> 
```

并且页面将每 20 秒重新加载一次。

如果您想定期填充页面的元素，并且您不太关心它的外观（或者可以花时间调整子页面的外观），您可以使用 IFRAME 通过第二个 CGI 显示子页面，在其 HTML 中进行元刷新：

```
<iframe class="realtime-data" src="/cgi-bin/realtime.py"></iframe> 
```

`load()`其他更灵活的情况还需要您提供第二个 CGI，它会在调用时发布实时数据，并使用例如 jQuery 的方法从主页轮询该 CGI ：

```
setInterval(function() {
    $('#div_where_html_goes').load('/cgi-bin/realtime.py')
}, 20000); // 20k milliseconds 
```

以上只是一个提示，并不是一个好的编程习惯：

*   没有规定加载错误
*   没有延迟和脚本堆积的规定
*   CGI 不仅要提供数据，而且可能还要提供一些布局

...但这应该足以让您入门。基本上，您安装 jQuery（如果从 Google 加载，则为一行 HTML 代码），并在页面末尾提供 init 代码。你把Javascript代码放在那里：

```
<script type="text/javascript">
// <![CDATA[ <!--
    (function($){
        $(function(){

            setInterval(function() {
                $('#div_where_html_goes').load('/cgi-bin/realtime.py')
            }, 20000); // 20k milliseconds

        })
    })(jQuery);
// --> ]]>
</script>
</body> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T17:43:11.753

你可以用[瓶子](http://bottlepy.org/docs/dev/tutorial.html#tutorial)。本教程将引导您创建一个简单的站点。

要更新，您将需要 javascript（在页面中）与服务器交互。

# maven-2 - 从 Maven 命令行界面切换到 Eclipse 插件

> ID：13631472
> 
> 赞同：0
> 
> 时间：2012-11-29T17:35:24.633
> 
> 标签：maven-2, eclipse-plugin, maven-plugin, m2eclipse, compile-time-weaving

我正在开发一个使用 maven 构建的项目，以便在编译时编织 AspectJ 注释。到目前为止，它是这样工作的：

1）在eclipse中关闭“自动构建”

2) 在 Eclipse 中更改代码

3）在命令行导航到项目文件夹

4) 从命令行运行 Maven

5) 在 Eclipse 中刷新

6）在Eclipse中运行程序

由于存在用于 Maven 集成的 Eclipse 插件，我想弄清楚如何使用它们来简化这个过程。但是，我只找到了关于如何使用该插件开始一个新的 Maven 项目的说明——在任何关于转换现有项目的教程或文档中都没有。我需要重新导入我的项目吗？或者，还有更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T19:01:33.620

只需安装[m2eclipse](http://eclipse.org/m2e/)，从工作区中删除您的 maven 项目，然后将其重新导入为现有的 maven 项目，如下所示：

![导入maven项目](../Images/fb2fb7ab0811438ce3bcf43457abfd75.png)

# active-directory - 无法通过 RDP 连接

> ID：13631475
> 
> 赞同：0
> 
> 时间：2012-11-29T17:35:43.040
> 
> 标签：active-directory, windows-7-x64, remote-desktop, rdp

我有一个非常奇怪的问题。

尝试通过 RDP 连接到已断开网络几天的远程笔记本电脑时。再次连接到网络时，我无法使用 DNS 名称进行 RDP，但可以使用 IP。操作系统是使用 AD 的 windows 7 Enterprise x64。

将其从域中删除并再次添加无济于事。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T17:44:52.760

您可以通过命令提示符 ping DNS 名称吗？听起来像重新加入网络可能已为别名分配了不同的 IP。

要排除防火墙问题，您也可以暂时禁用防火墙并重试 - 尽管我怀疑防火墙是问题，因为您可以通过 IP 地址访问它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T10:29:52.123

DNS是问题所在。它没有发布相关的 IP。必须清除所有旧数据并安排自动定期清除。

# blackberry-android - 移植的 Android 应用程序被拒绝：“进程已意外停止”（尽管在 Dev Alpha 上测试过）

> ID：13631476
> 
> 赞同：0
> 
> 时间：2012-11-29T17:35:44.547
> 
> 标签：blackberry-android

我有一个移植的 Android 游戏（通过 Online Packager 打包）。该游戏在 PlayBook (OS 2.0.1) 和真正的 Dev Alpha 设备 (OS 10.0.9.388) 上运行良好。但是在 AppWorld 中测试时被拒绝：“ ...在 BlackBerry Dev Alpha（操作系统版本 10.0.9.1103）上测试您的应用程序。应用程序无法启动并显示以下错误消息“（进程 xxxxxx）已意外停止.. 。”

两个 Dev Alpha OS 版本之间是否有任何区别（在 Android 支持方面）？如何获取 AppWorld 测试的日志？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T17:12:27.290

您可以通过以下门户直接联系 BlackBerry App World 团队以获得供应商支持。

联系 App World 供应商支持 [https://www.blackberry.com/profile/?eventId=8109](https://www.blackberry.com/profile/?eventId=8109)

您还可以使用最新发布的 BlackBerry 10 开发人员软件 (10.0.09.1675) 版本重新测试应用程序。

更新 BlackBerry 10 Dev Alpha 设备软件 [https://developer.blackberry.com/devzone/blackberry10devalpha/devalpha_update.html](https://developer.blackberry.com/devzone/blackberry10devalpha/devalpha_update.html)

# asp.net - asp.net中的自定义保存按钮

> ID：13631479
> 
> 赞同：1
> 
> 时间：2012-11-29T17:35:57.707
> 
> 标签：asp.net, vb.net, detailsview

我的问题很简单，如何为在详细视图中输入的记录创建自定义保存和更新按钮。我不想使用给定的那些。多谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T18:06:16.447

你有几个选择。一个是`OnItemCommand`，您将滚动自己的命令。 [http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.detailsview.itemcommand.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.detailsview.itemcommand.aspx)

更简单的方法是使用`OnItemInserted`and`OnItemUpdating`事件。只需根据需要发送*插入*或*更新*命令，您就可以更轻松地使用`EventArgs` [http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.detailsview.iteminserting.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.detailsview.iteminserting.aspx) < [http://msdn .microsoft.com/en-us/library/system.web.ui.webcontrols.detailsview.itemupdating.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.detailsview.itemupdating.aspx)

从这些页面中，基本上您要做的就是从`DetailsView`.

**使用 ItemCommand 自定义“添加”命令**

```
Sub CustomerDetailView_ItemCommand(ByVal sender As Object, ByVal e As DetailsViewCommandEventArgs)

    ' Use the CommandName property to determine which button
    ' was clicked. 
    If e.CommandName = "Add" Then
        ' Do your work here if Add Contact is clicked
    End If
End Sub 
```

**使用 ItemInserting 更容易内置插入命令**

```
Sub CustomerDetailView_ItemInserting((ByVal sender As Object, ByVal e As DetailsViewInsertEventArgs)
    ' Access the actual rows with
    Some variable1 = e.Values("CustomerID")
    Some variable2 = e.Values("CompanyName")
    Some variable3 = e.Values("City")

    ' Do something with them
End Sub 
```

**代码前端**

```
<asp:DetailsView ID="CustomerDetailView" 
    DataSourceID="DetailsViewSource"
    AutoGenerateRows="false" 
    DataKeyNames="CustomerID" 
    AllowPaging="true" 
    OnItemCommand="CustomerDetailView_ItemCommand"
    OnItemInserting="CustomerDetailView_ItemInserting"
    OnItemUpdating="CustomerDetailView_ItemUpdating"
    runat="server">
    <FieldHeaderStyle BackColor="Navy" ForeColor="White" />
    <Fields>
        <asp:BoundField DataField="CustomerID" HeaderText="Store ID" />
        <asp:BoundField DataField="CompanyName" HeaderText="Store Name" />
        <asp:BoundField DataField="City" HeaderText="City" />
        <asp:TemplateField HeaderText="Name">
            <InsertItemTemplate>
                <asp:Button ID="btAddContact" runat="server" Text="Add Contact" CommandName="Add" />
                            Or
                <asp:Button ID="btAddContact" runat="server" Text="Add Contact" CommandName="Insert" />
            </InsertItemTemplate>
            <EditItemTemplate>
                <asp:Button ID="btAddContact" runat="server" Text="Save Contact" CommandName="Update" />
            </EditItemTemplate>
        </asp:TemplateField>
    </Fields>
</asp:DetailsView> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T18:05:06.547

您可以使用任何实现该`IButtonControl`界面的按钮。关键是正确设置CommandName。希望这将使您可以自由地按照需要的方式设置按钮样式。

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.button.commandname.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.button.commandname.aspx)

您可以在此处找到相关命令名称的列表：

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listview.itemcommand.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listview.itemcommand.aspx)

```
<asp:ImageButton runat="server" ... CommandName="Save" />
<asp:LinkButton runat="server" ... CommandName="Update" /> 
```

# javascript - Ember 绑定在不需要时触发，在需要时不触发

> ID：13631486
> 
> 赞同：1
> 
> 时间：2012-11-29T17:36:14.977
> 
> 标签：javascript, ember.js

嘿，我在我的 ember 应用程序中遇到了两个不同的问题，这两个问题都涉及绑定。

首先，当我不​​想要它时，我有一个绑定触发。基本上我想要实现的（我正在构建一个调查创建者前端应用程序）是，当任何文本输入到问题的“名称”字段中时，我想添加一个新的问题对象，它将呈现在用户正在添加的问题列表的末尾输出另一个空白问题。这具有总是有一个新问题的效果，因此不需要添加问题按钮。绑定正在工作，并且正在添加一个新对象：但是，由于绑定来自最新的问题对象，因此在创建新对象时再次触发绑定，这反过来又创建了一个新对象，从而再次触发绑定....这显然最终导致浏览器崩溃。我试过使用 Ember._suspendObserver 函数，但没有 有很多关于此的文档，我认为我用错了 - 无论如何它并没有暂停观察者或暂停绑定。代码中的观察者在第 27 行左右（contentsNameObserver）

我遇到的另一个问题 - 我有一个选择下拉框，可以选择用户想要的问题类型（单选、多选等），但是选择框和 {{#each} 之间的绑定呈现这种问题的助手没有触发。我正在使用 Ember.Select 视图助手，因此使用 get/set 触发绑定应该没有任何问题。我正在使用计算属性根据问题类型 id 的值返回问题类型的字段数组。计算的属性在第 13 行 (App.SurveyContent.types) 和模板 templates/step3。快速提醒您，此应用程序可能会扩展到调查之外，因此“问题”在代码中通常称为“内容”。

我对 ember 很陌生（这是我的第一个真正的应用程序），所以我的代码很可能在这些问题之外还有很多问题......所以任何关于我如何构建我的应用程序的评论也将不胜感激！

Javascript ember 应用程序：

```
App = Ember.Application.create({
  rootElement: '#emberContainer'
});

App.SurveyContent = Ember.Object.extend({
  name: "",
  content_type: 1,
  content_pos: 1,
  hash: Em.A([]),

  types: function() {
    alert("redraw");
    return App.ContentTypes[this.content_type-1].hash;
  }.property()

});

App.Surveys = Ember.Object.create({
  name: null,
  start: $.datepicker.formatDate('mm/dd/yy' , new Date()),
  end: $.datepicker.formatDate('mm/dd/yy' , new Date()),
  themeID: 0,
  contents: [App.SurveyContent.create()],    //Pushing an instance of App.SurveyContent onto this

  contentsNameObserver: function() {
    context = this;
    console.log("entering");
    Em._suspendObserver(App.Surveys, "contents.lastObject.name", false, false, function() {
      console.log("suspend handler");
      context.contents.pushObject(App.SurveyContent.create());
    })
  }.observes("contents.lastObject.name")

});

App.ContentTypes = [
  Ember.Object.create({name: 'Text question', id:1, hash: [Ember.Object.create({name: 'Question', help: 'Enter the question here', type: 'text'})]}),

  Ember.Object.create({name: 'Multichoice question', id:2, hash: [Ember.Object.create({name: 'Question', help: 'Enter the question here', type: 'text'}), 
                        Ember.Object.create({name: 'Answer', help: 'Enter possible answers here', type: 'text', multiple: true})]})
];

App.ViewTypeConvention = Ember.Mixin.create({
  viewType: function() {
    console.log(this);
    return Em.get("Ember.TextField");
  }.property().cacheable()
});

App.CRMData = Ember.Object.extend();

App.CRMData.reopenClass ({
  crm_data: [],
  org_data: [],
  org_display_data: [],

  loadData: function() {
    context = this;
    context.crm_data = [];
    $.getJSON ("ajax/crm_data", function(data) {
      data.forEach(function(crm) {
        context.crm_data.pushObject(App.CRMData.create({id: crm.crm_id, name: crm.crm_name}));
        crm.orgs.forEach(function(org) {
          context.org_data.pushObject(App.CRMData.create({id: org.org_id, name: org.org_name, crm_id: crm.crm_id}));
        }, context)
      }, context)
      context.updateOrganisations(5);
    }); 
    return this.crm_data;
  },
  updateOrganisations: function(crm_id) {
    context = this;
    this.org_display_data.clear();
    console.log("clearing the buffer")
    console.log(this.org_display_data)
    context.org_data.forEach(function(org) {
      if(org.crm_id == crm_id) {
        context.org_display_data.pushObject(App.CRMData.create({id: org.id, name: org.name}));
      }
    }, context)
  }
});

App.DateField = Ember.TextField.extend({
  attributeBindings: ['id', 'class']
});

App.CRMSelect = Ember.Select.extend({
  attributeBindings: ['id'],
  change: function(evt) {
    console.log(evt)
    App.CRMData.updateOrganisations($('#crm').val())
  }
});

App.ApplicationController = Ember.Controller.extend();

App.Step1Controller = Ember.ArrayController.extend({});

App.Step2Controller = Ember.ArrayController.extend({});

App.Step2Controller = Ember.ArrayController.extend({});

App.ApplicationView = Ember.View.extend({
  templateName: 'app'
});

App.Step0View = Ember.View.extend ({
  templateName: 'templates/step0'
});

App.Step1View = Ember.View.extend ({
  templateName: 'templates/step1'
});

App.Step2View = Ember.View.extend ({
  templateName: 'templates/step2',
  didInsertElement: function() {
    $( ".jquery-ui-datepicker" ).datepicker();
  }
});

App.Step3View = Ember.View.extend ({
  templateName: 'templates/step3',
});

App.Router = Em.Router.extend ({
  enableLogging: true,

  root: Em.Route.extend ({
    showstep1: Ember.Route.transitionTo('step1'),
    showstep2: Ember.Route.transitionTo('step2'),
    showstep3: Ember.Route.transitionTo('step3'),

    index: Ember.Route.extend({
      route: '/',
      connectOutlets: function(router){
        router.get('applicationController').connectOutlet( 'step0');
      }      
    }),

    step1: Ember.Route.extend ({
      route: 'step1',
      connectOutlets: function(router){
        router.get('applicationController').connectOutlet( 'step1', App.CRMData.loadData());
      }
    }),

    step2: Ember.Route.extend ({
      route: 'step2',
      connectOutlets: function(router) {
        router.get('applicationController').connectOutlet('step2')
      },
    }),

    step3: Ember.Route.extend ({
      route: 'step3',
      connectOutlets: function(router) {
        router.get('applicationController').connectOutlet('step3')
      },
    })
  })
});

Ember.LOG_BINDINGS=true;

App.LOG_BINDINGS = true;

App.ContentTypes.forEach(function(object) {
  object.hash.forEach(function(hash) {
    hash.reopen(App.ViewTypeConvention);
  }, this);
}, this); 
```

Html 模板（我在 haml 中有这些模板，所以这只是重要模板的代表）

```
<script  type="text/x-handlebars" data-template-name="app"> 
{{outlet}}
</script>

<script  type="text/x-handlebars" data-template-name="templates/step3"> 
<h1> Add content to {{App.Surveys.name}} </h1>
<br>

<div id = "accordion2" class = "accordion">
  {{#each content in App.Surveys.contents}}
  <div class="accordion-group">
    <div class = "accordion-heading">
      <a class = "accordion-toggle" data-parent = "#accordion2" data-toggle = "collapse" href = "#collapseOne">
        {{content.name}}
      </a>
    </div>  
    <div id = "collapseOne" class = "accordion-body collapse in">
      {{view Ember.TextField valueBinding="content.name" class="txtName"}}
      <form class = "form-horizontal">
        <div class = "accordion-inner">
          <div class = "control-group">
            <label class = "control-label" for ="organisation"> 
              Content Type
              <div class = "controls">
                {{view Ember.Select contentBinding="App.ContentTypes" optionValuePath="content.id" optionLabelPath="content.name" valueBinding="content.content_type"}}
              </div>  
            </div>  
          </div>  
          {{#each item in content.types }}
          <div class = "control-group" >
            <label class = "control-label" for = "organisation">
              {{item.name}}
              <div class = "controls">
                {{view item.viewType }}
              </div>  
          {{/each}}
          </div>  
      </form> 
    </div> 
  {{/each}}
  </div>
</div>

<br>

<div class = "btn" {:_action => 'showstep3'}>  Next Step > </div>
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-28T09:09:56.023

我意识到这是一个老问题，但是我也找不到任何文档和宝贵的少量信息，因此分享了我在这里找到的工作。

我发现有效的是调用`Ember._suspendObserver`如下：

```
somePropertyDidChange: function(key) {
  var that = this;

  Ember._suspendObserver(this, key, null,
    'somePropertyDidChange', function() {

    // do stuff which would normally cause feedback loops
    that.set('some.property', 'immune to feedback');
  });
}.observes('some.property'); 
```

您还可以使用多个观察者变体，如下所示：

```
somePropertiesDidChange: function(key) {
  var that = this;
  Ember._suspendObservers(this, ['some.property', 'another.property'],
    null, 'somePropertiesDidChange', function() {

    // do stuff which would normally cause feedback loops
    that.set('some.property', 'immune to feedback');
    that.set('another.property', 'also immune to feedback');
  });
}.observes('some.property', 'another.property'); 
```

在我的确切用例中，我实际上是`Ember._suspendObservers`从`Ember.run.once()`观察者设置的函数中调用的，因为我想确保在进行计算之前已经解决了许多相关属性，这反过来又会改变其中的一些属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T09:03:46.927

我已经解决了第一个问题，虽然我没有让 suspendObserver 属性正常工作，但我使用 if 语句检查前一个元素，删除了无限循环。

```
contentsNameObserver: function() {
  context = this;
  if(this.get('contents.lastObject').name) {
    context.contents.pushObject(App.SurveyContent.create());  
  }
}.observes("contents.lastObject.name") 
```

任何关于如何让 _suspendObserver 处理程序工作的评论都将不胜感激，这是应该工作的，但我做错了什么

我在[http://jsfiddle.net/reubenposthuma/sHPv4/创建了一个精简的 jsfiddle](http://jsfiddle.net/reubenposthuma/sHPv4/)

它被设置为直接进入问题步骤，步骤 3，这样我就不需要包含所有以前的模板。

我仍然坚持绑定不触发的问题。我期望的行为是，当“内容类型”下拉框发生变化时，下面的文本框应该会发生变化，它应该用两个文本框重新呈现。

# c# - 如何绑定到 Style.Resource 中的附加属性？

> ID：13631491
> 
> 赞同：9
> 
> 时间：2012-11-29T17:36:43.670
> 
> 标签：c#, .net, wpf, xaml

我正在尝试使用附加属性在 TextBox 的背景中创建提示文本标签，但我无法解析与样式资源中文本标题的绑定：

风格定义：

```
<Style x:Key="CueBannerTextBoxStyle"
       TargetType="TextBox">
  <Style.Resources>
    <VisualBrush x:Key="CueBannerBrush"
                 AlignmentX="Left"
                 AlignmentY="Center"
                 Stretch="None">
      <VisualBrush.Visual>
        <Label Content="{Binding Path=(EnhancedControls:CueBannerTextBox.Caption), RelativeSource={RelativeSource AncestorType={x:Type TextBox}}}"
               Foreground="LightGray"
               Background="White"
               Width="200" />
      </VisualBrush.Visual>
    </VisualBrush>
  </Style.Resources>
  <Style.Triggers>
    <Trigger Property="Text"
             Value="{x:Static sys:String.Empty}">
      <Setter Property="Background"
              Value="{DynamicResource CueBannerBrush}" />
    </Trigger>
    <Trigger Property="Text"
             Value="{x:Null}">
      <Setter Property="Background"
              Value="{DynamicResource CueBannerBrush}" />
    </Trigger>
    <Trigger Property="IsKeyboardFocused"
             Value="True">
      <Setter Property="Background"
              Value="White" />
    </Trigger>
  </Style.Triggers>
</Style> 
```

附楼：

```
 public class CueBannerTextBox
{
    public static String GetCaption(DependencyObject obj)
    {
        return (String)obj.GetValue(CaptionProperty);
    }

    public static void SetCaption(DependencyObject obj, String value)
    {
        obj.SetValue(CaptionProperty, value);
    }

    public static readonly DependencyProperty CaptionProperty =
        DependencyProperty.RegisterAttached("Caption", typeof(String), typeof(CueBannerTextBox), new UIPropertyMetadata(null));
} 
```

用法：

```
<TextBox x:Name="txtProductInterfaceStorageId" 
                 EnhancedControls:CueBannerTextBox.Caption="myCustomCaption"
                 Width="200" 
                 Margin="5" 
                 Style="{StaticResource CueBannerTextBoxStyle}" /> 
```

这个想法是您可以在创建文本框时定义视觉画笔中使用的文本提示，但我遇到了绑定错误：

`System.Windows.Data Error: 4 : Cannot find source for binding with reference 'RelativeSource FindAncestor, AncestorType='System.Windows.Controls.TextBox', AncestorLevel='1''. BindingExpression:Path=(0); DataItem=null; target element is 'Label' (Name=''); target property is 'Content' (type 'Object')`

如果我只是硬编码样式中的 Label.Content 属性，代码就可以正常工作。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T19:55:45.777

~~这里的问题与`Style`工作方式有关：基本上，将创建一个“副本” `Style`（在第一次引用时），此时，`TextBox`您可能希望将其应用于多个控件`Style`-它将用于哪个控件相对来源？~~

~~（可能的）答案是使用 a`Template`而不是`Style`- 与控件或数据模板，您将能够访问 的可视化树`TemplatedParent`，这应该可以让您到达您需要的位置。~~

编辑：进一步考虑，我在这里可能不正确......当我回到电脑前时，我会拼凑一个快速测试工具，看看我是否可以证明/反驳这一点。

进一步编辑：虽然我最初所说的可以说是“真实的”，但这不是你的问题；劳尔所说的关于：视觉树是正确的：

*   您正在将`Background`属性设置`TextBox`为`VisualBrush`实例。
*   该`Visual`画笔的*没有*映射到控件的可视树中。
*   结果，**任何** `{RelativeSource FindAncestor}`导航都将失败，因为该视觉对象的父级将为空。
*   无论它是声明为 a`Style`还是 a ，情况都是如此`ControlTemplate`。
*   综上所述，绝对依赖`ElementName`是不理想的，因为它降低了定义的可重用性。

那么该怎么办？

我整夜都在绞尽脑汁，试图想出一种方法来将正确的继承上下文编组到包含的画笔，但收效甚微……我确实想出了这个**超级hacky的**方法，但是：

首先，helper 属性（注意：我通常不会以这种方式设置我的代码样式，但会尽量节省空间）：

```
public class HackyMess 
{
    public static String GetCaption(DependencyObject obj)
    {
        return (String)obj.GetValue(CaptionProperty);
    }

    public static void SetCaption(DependencyObject obj, String value)
    {
        Debug.WriteLine("obj '{0}' setting caption to '{1}'", obj, value);
        obj.SetValue(CaptionProperty, value);
    }

    public static readonly DependencyProperty CaptionProperty =
        DependencyProperty.RegisterAttached("Caption", typeof(String), typeof(HackyMess),
            new FrameworkPropertyMetadata(null));

    public static object GetContext(DependencyObject obj) { return obj.GetValue(ContextProperty); }
    public static void SetContext(DependencyObject obj, object value) { obj.SetValue(ContextProperty, value); }

    public static void SetBackground(DependencyObject obj, Brush value) { obj.SetValue(BackgroundProperty, value); }
    public static Brush GetBackground(DependencyObject obj) { return (Brush) obj.GetValue(BackgroundProperty); }

    public static readonly DependencyProperty ContextProperty = DependencyProperty.RegisterAttached(
        "Context", typeof(object), typeof(HackyMess),
        new FrameworkPropertyMetadata(default(HackyMess), FrameworkPropertyMetadataOptions.OverridesInheritanceBehavior | FrameworkPropertyMetadataOptions.Inherits));
    public static readonly DependencyProperty BackgroundProperty = DependencyProperty.RegisterAttached(
        "Background", typeof(Brush), typeof(HackyMess),
        new UIPropertyMetadata(default(Brush), OnBackgroundChanged));

    private static void OnBackgroundChanged(DependencyObject obj, DependencyPropertyChangedEventArgs args)
    {
        var rawValue = args.NewValue;
        if (rawValue is Brush)
        {
            var brush = rawValue as Brush;
            var previousContext = obj.GetValue(ContextProperty);
            if (previousContext != null && previousContext != DependencyProperty.UnsetValue)
            {
                if (brush is VisualBrush)
                {
                    // If our hosted visual is a framework element, set it's data context to our inherited one
                    var currentVisual = (brush as VisualBrush).GetValue(VisualBrush.VisualProperty);
                    if(currentVisual is FrameworkElement)
                    {
                        (currentVisual as FrameworkElement).SetValue(FrameworkElement.DataContextProperty, previousContext);
                    }
                }
            }
            // Why can't there be just *one* background property? *sigh*
            if (obj is TextBlock) { obj.SetValue(TextBlock.BackgroundProperty, brush); }
            else if (obj is Control) { obj.SetValue(Control.BackgroundProperty, brush); }
            else if (obj is Panel) { obj.SetValue(Panel.BackgroundProperty, brush); }
            else if (obj is Border) { obj.SetValue(Border.BackgroundProperty, brush); }
        }
    }
} 
```

现在更新的 XAML：

```
<Style x:Key="CueBannerTextBoxStyle"
       TargetType="{x:Type TextBox}">
  <Style.Triggers>
    <Trigger Property="TextBox.Text"
             Value="{x:Static sys:String.Empty}">
      <Setter Property="local:HackyMess.Background">
        <Setter.Value>
          <VisualBrush AlignmentX="Left"
                       AlignmentY="Center"
                       Stretch="None">
            <VisualBrush.Visual>
              <Label Content="{Binding Path=(local:HackyMess.Caption)}"
                     Foreground="LightGray"
                     Background="White"
                     Width="200" />
            </VisualBrush.Visual>
          </VisualBrush>
        </Setter.Value>
      </Setter>
    </Trigger>
    <Trigger Property="IsKeyboardFocused"
             Value="True">
      <Setter Property="local:HackyMess.Background"
              Value="White" />
    </Trigger>
  </Style.Triggers>
</Style>
<TextBox x:Name="txtProductInterfaceStorageId"
         local:HackyMess.Caption="myCustomCaption"
         local:HackyMess.Context="{Binding RelativeSource={RelativeSource Self}}"
         Width="200"
         Margin="5"
         Style="{StaticResource CueBannerTextBoxStyle}" />
<TextBox x:Name="txtProductInterfaceStorageId2"
         local:HackyMess.Caption="myCustomCaption2"
         local:HackyMess.Context="{Binding RelativeSource={RelativeSource Self}}"
         Width="200"
         Margin="5"
         Style="{StaticResource CueBannerTextBoxStyle}" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T20:29:39.913

问题是`Label`内部`VisualBrush`不是 的可视子级`TextBox`，这就是该绑定不起作用的原因。我对这个问题的解决方案是使用`ElementName`绑定。但是您正在创建的视觉画笔位于 a`Style`的字典资源中，然后`ElementName`绑定将不起作用，因为找不到元素 ID。解决方案是`VisualBrush`在全局字典资源中创建。请参阅此 XAML 代码以删除`VisualBrush`：

```
<Window.Resources>
  <VisualBrush x:Key="CueBannerBrush"
               AlignmentX="Left"
               AlignmentY="Center"
               Stretch="None">
    <VisualBrush.Visual>
      <Label Content="{Binding Path=(EnhancedControls:CueBannerTextBox.Caption), ElementName=txtProductInterfaceStorageId}"
             Foreground="#4F48DD"
             Background="#B72121"
             Width="200"
             Height="200" />
    </VisualBrush.Visual>
  </VisualBrush>
  <Style x:Key="CueBannerTextBoxStyle"
         TargetType="{x:Type TextBox}">
    <Style.Triggers>
      <Trigger Property="Text"
               Value="{x:Static System:String.Empty}">
        <Setter Property="Background"
                Value="{DynamicResource CueBannerBrush}" />
      </Trigger>
      <Trigger Property="Text"
               Value="{x:Null}">
        <Setter Property="Background"
                Value="{DynamicResource CueBannerBrush}" />
      </Trigger>
      <Trigger Property="IsKeyboardFocused"
               Value="True">
        <Setter Property="Background"
                Value="White" />
      </Trigger>
    </Style.Triggers>
  </Style>
</Window.Resources> 
```

这段代码应该可以工作。无需更改更多代码，因此我不会重写所有代码。

希望此解决方案对您有用...

# sql - NewID() 不返回随机样本

> ID：13631494
> 
> 赞同：1
> 
> 时间：2012-11-29T17:36:57.833
> 
> 标签：sql, sql-server, tsql

> **可能重复：**
> [来自大型数据集的随机抽样](https://stackoverflow.com/questions/13627486/random-sampling-from-a-large-dataset)

我之前[在这里发布了一个问题](https://stackoverflow.com/questions/13627486/random-sampling-from-a-large-dataset)

我以为一切都很好，花花公子，但是当我去检查结果的随机性时，我发现没有。查询的其他方面工作正常，但`top X`无论我尝试做什么，我都从表中获取数字。由于 SQL Server 不允许您在子查询中使用 order by 子句，我怎样才能解决这个问题以确保我得到一个真正随机的样本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T17:44:46.620

`ORDER BY`只要指定`TOP`子句，就可以在子查询中使用。

旧的技巧是`SELECT TOP 100 PERCENT ... ORDER BY NEWID()`在您的子查询中使用来欺骗优化器以实现子查询中间查询。

SQL 优化器团队的高级人员后来表示，优化器现在知道将返回所有行并忽略它（尽管它仍然值得一试）

如果失败，请尝试`SELECT TOP 2147483647 ... ORDER BY NEWID()`完成与`TOP 100 PERCENT`

# strophe - 使用 XMPHP 连接到 BOSH 服务后 fulljid 为空

> ID：13631495
> 
> 赞同：0
> 
> 时间：2012-11-29T17:37:02.177
> 
> 标签：strophe, xmpphp

我正在尝试通过 XMPHP 预绑定 XMPP 会话并将 rid/sid/jid 传递给 strophe 客户端以附加到会话。

连接代码在这里：

```
$conn = new CIRCUIT_BOSH('server.com', 7070, $username, $pass, $resource, 'server.com', $printlog=true, $loglevel=XMPPHP_Log::LEVEL_VERBOSE);
$conn->autoSubscribe();

try{
  $conn->connect('http://xmpp.server.com/http-bind', 1, true);
  $log->lwrite('Connected!');
}catch(XMPPHP_Exception $e){
  die($e->getMessage());
} 
```

我正在摆脱和 sid，但 $conn 对象中的 fulljid 保持为空，我看不到在我的 openfire 管理控制台上启动了会话。

如果我通过使用给定资源手动创建 jid 并将 jid/rid/sid 传递给 strophe 以在附加中使用，我将获得 ATTACHED 状态并且我看到客户端对 BOSH ip 的调用但我仍然没有看到会话并且我无法使用连接。

Strophe 客户端代码：

要求准备好文件：

```
var sid = $.cookie('sid');
var rid = $.cookie('rid');
var jid = $.cookie('jid');
    $(document).trigger('attach', {
      sid: sid,
      rid: rid,
      jid: jid,
    });

$(document).bind('attach', function (ev, data) {

    var conn = new Strophe.Connection(
        "http://xmpp.server.com/http-bind");

    conn.attach(data.jid, data.sid, data.rid, function (status) {
        if (status === Strophe.Status.CONNECTED) {
            $(document).trigger('connected');
        } else if (status === Strophe.Status.DISCONNECTED) {
            $(document).trigger('disconnected');
        } else if (status === Strophe.Status.ATTACHED){
            $(document).trigger('attached');
        }
    });

    Object.connection = conn;

}); 
```

我认为问题始于未正确创建会话的 XMPPHP 端。'attached' 被触发但从未'connected'，是否应该发送状态'connected'？我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T02:21:11.217

好的，解决了，我看到 XMPPHP lib 根本没有在 openfire 服务器上创建会话，所以我为 XMPP 类编写了一个简单的测试并创建了会话，并为 XMPP_BOSH 类没有管理创建一个。然后我在这里看到了问题报告：[http](http://code.google.com/p/xmpphp/issues/detail?id=47) ://code.google.com/p/xmpphp/issues/detail?id= 47 comment no.9 有效，它通过将`processUntil()`XMLStream.php 中的函数复制到 BOSH 来解决问题.php，仍然无法弄清楚为什么这是有效的。然后我发现我在 openfire 服务器上为用户设置的一些密码也有一个重叠的错误。这些密码包含这些 `! # % ^`字符，由于某种原因，XMPP_BOSH 发送的密码已损坏或已更改，因此出现 Auth Failed 异常。更改密码解决了这个问题，我现在可以附加到使用 Strophe.js 库创建的会话 XMPPHP。

# mysql - MySQL 中的 group_concat 性能问题

> ID：13631499
> 
> 赞同：5
> 
> 时间：2012-11-29T17:37:14.900
> 
> 标签：mysql, sql

我`group_concat`在查询中添加了一个并杀死了性能。在我添加它之前和之后的解释计划是相同的，所以我对如何优化它感到困惑。

这是查询的简化版本：

```
SELECT @curRow := @curRow + 1 AS row_number,
docID,
docTypeID,
CASE WHEN COUNT(1) > 1
     THEN group_concat( makeID )
     -- THEN 'multiple makes found'
     ELSE MIN(makeID)
END AS makeID,
MIN(desc) AS desc
FROM simplified_mysql_table,
(SELECT @curRow := 0) r
GROUP BY docID, docTypeID,
CASE WHEN docTypeID = 1
     THEN 0
     ELSE row_number
END; 
```

注意 中的`CASE`声明`SELECT`。`group_concat`杀戮的表现。如果我评论该行并仅输出“找到多个结果”，它将执行得非常快。知道是什么原因造成的吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-30T18:07:32.613

在这个查询的原始非简化版本中，我们有一个`DISTINCT`，这是完全不必要的，并导致 group_concat 的性能问题。我不确定它为什么会导致这样的问题，但删除它可以解决性能问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-29T18:23:16.173

在 MySQL 中，`group_concat`性能不应该*扼杀*查询性能。这是涉及字符串的额外工作，因此预计会有所放缓。但更像是 10% 而不是 10X。你能量化查询时间的差异吗？

问题：MakeID 是字符串还是整数？我想知道从整数到字符串的转换是否会影响性能。

其次，性能会是什么而`concat(min(MakeId), '-', max(MakedId))`不是`group_concat`？

三、真的`group_concat`用`DISTINCT`or`ORDER BY`吗？这些可能会减慢速度，尤其是在内存有限的环境中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T21:23:36.417

一个想法是将查询分成两部分，一部分`WHEN docTypeID = 1`用于其余部分。

尝试先添加索引`(docTypeID, docID, makeID, desc)`：

```
SELECT 
    docID,
    docTypeID,
    CAST(makeID AS CHAR) AS makeID,
    `desc`
FROM 
    simplified_mysql_table,
WHERE 
    NOT docTypeID = 1

UNION ALL

SELECT 
    docID,
    1,
    GROUP_CONCAT( makeID ),
    `desc`                        -- this is not standard SQL
FROM 
    simplified_mysql_table,
WHERE 
    docTypeID = 1
GROUP BY 
    docTypeID,
    docID ; 
```

# scala - 变量的嵌套/内部范围

> ID：13631502
> 
> 赞同：1
> 
> 时间：2012-11-29T17:37:31.453
> 
> 标签：scala, scope

Scala 中有关变量的范围的确切处理是什么？

当我打开大括号时，我仍然可以访问外部变量的值（如果是变量，则修改它们）：

```
scala> var mmm = 4
mmm: Int = 4

scala> {
     | println(mmm)
     | mmm += 2
     | println(mmm)
     | }
4
6

scala> println(mmm)
6 
```

但是奥德斯基在第 180 页或他的书中说

> 在 Scala 程序中，内部变量被称为遮蔽了同名的外部变量，因为外部变量在内部范围内变得不可见。

这似乎更奇怪：

```
scala> val a = 4
a: Int = 4

scala> {
     | println(a)
     | }
4 
```

那么我是否可以获得在内部范围内创建的副本？

```
scala> val a = 4
a: Int = 4

scala> {
     | val a = 8
     | } 
```

如果 val 是不可变的，为什么我还要再说一遍？

```
scala> val a = 4
a: Int = 4

scala> {
     | println(a)
     | val a = 8
     | println(a)
     | } 
```

但是对于这个我得到一个错误：

```
error: forward reference extends over definition of value a
              println(a) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T17:44:24.247

如果您在块中创建一个新的，则新的会影响旧的（外部）。如果你不这样做，你指的是外部的。

在块中创建新块的位置无关紧要。如果它出现*在任何地方*，它会遮蔽外部。

所以，

```
val a = 5
{ println(a) }  // This is outer a

val a = 5
{ val a = 8; println(a) }  // This is inner a

val a = 5
{ println(a); val a = 8 }  // This is broken
                           // you try to print the inner a
                           // but it doesn't exist yet 
```

* * *

编辑：让我们打开最后一个

```
val a = 5
// Okay, I have something called a

{  // Oh, new block beginning!  Maybe there are local variables
  println(a)
  val a = 8    // Yeah, there's one!
               // And it's got the same name as the outer one
               // Oh well, who needs the outer one anyway?
}

// Waitaminute, what was that block supposed to do?
{
  println(a)   // Inner block has an a, so this must be the inner a
  val a = 8    // Which is 8
}

// Hang on, operations happen in order
{
  println(a)   // What inner a?!

// Abort, abort, abort!!!! 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T17:44:03.703

块本身不会改变外部变量的可见性。仅当您在内部范围内声明具有相同名称的变量时，正如 Odersky 引用所解释的那样。

您的前两个示例没有这样做，因此外部变量在内部范围内是显而易见的，并且 Odersky 的引用不适用。内部`a`作用域中的 与外部作用域中的 相同`a`，不涉及复制。

然而，在第三个示例中，两个`a`s 是两个自`val`变量，即 inner`a`没有*重新定义*external `a`，只是按照 Odersky 的引用对其进行了*遮蔽*，例如：

```
val a = 4
println(a)  // prints 4 - outer a
{
  val a = 8;
  println(a)  // prints 8 - inner a
}
println(a)  // prints 4 - outer a in scope again 
```

即退出内部块后，您会看到`a`具有原始值的外部块仍然存在。

但是，您在第三个示例中显示的代码非常模棱两可，因为如果不深入了解语言规范，就很难确定您的第一条`println(a)`语句所指的变量是哪个变量。我手头没有确切的参考资料，但我相信编译器不允许这样的代码，因为这种风格没有任何好处，而它本身就容易出错。

# python - Python 中的惰性 for-comprehensions 文档

> ID：13631505
> 
> 赞同：2
> 
> 时间：2012-11-29T17:37:42.927
> 
> 标签：python, generator, list-comprehension

看起来 Python 中的这个构造并不懒惰：

```
g1 = ["'"+x+"'" for x in f2] 
```

这个是：

```
g2 = ("'"+x+"'" for x in f2) 
```

因为 g2 有一个`next()`方法，而 g1 没有。

这是在哪里记录的？我似乎无法在 python 文档中找到相关页面，不知道要查找什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T17:39:46.027

您正在寻找[列表显示](http://docs.python.org/2/reference/expressions.html#list-displays)和[生成器表达式](http://docs.python.org/2/reference/expressions.html#generator-expressions)。第一种形式称为“列表推导”，是定义​​列表的一种特殊形式。

至于第二种形式，生成器表达式，这是文档中所说的：

> 生成器表达式产生一个新的生成器对象。它的语法与推导式相同，只是用括号而不是括号或花括号括起来。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T17:41:44.160

你可能想看看这里： http: [//www.python.org/dev/peps/pep-0289/](http://www.python.org/dev/peps/pep-0289/)

这是描述生成器表达式及其背后原理的 PEP。

# permissions - Samba（无法写入）问题

> ID：13631510
> 
> 赞同：2
> 
> 时间：2012-11-29T17:38:21.220
> 
> 标签：permissions, samba

我在两个 linux 机器（Ubuntu Desktop 12.10 和 Ubuntu Server 12.04）之间设置了 Samba。由于某种原因，我无法写入我的 samba 共享。在我看来，我拥有正确的权限。下面是我的 smb.conf、文件系统权限以及我遵循的步骤。我肯定有它配置错误，但我不知道如何。任何帮助，将不胜感激。克雷格

1.  在 ubuntu 服务器 (craig) 中创建了一个用户
2.  在 samba 中创建用户和密码“smbuseradd -a craig”设置密码
3.  从 linux 桌面挂载 samba 共享。这似乎安装得很好
4.  试图写一个文件，它说我没有写权限

从服务器“drwxrwxrwx 4 Craig Craig”查看时对服务器的权限从 ubuntu 桌面查看时的权限“drwxr-xr-x 0 root root”

```
[global]
follow symlinks = yes
wide links = yes
unix extensions = no

workgroup = Ubuntu Precise
security = user

unix password sync = yes

[homes]
comment = Home Directories
browseable = yes
writable=yes
create mask = 0777
directory mask = 0777
guest ok = yes

[share]
comment = Precise File Server
path = /home/craig
browsable = yes
guest ok = yes
read only = no
writable = yes
create mask = 0777
directory mask = 0777 
```

编辑：如果我以 root 身份打开我的 samba 共享，那么我可以写入文件夹。我尝试做一个 chmod 和 chgrp 但这似乎没有任何影响。我宁愿不必以 root 身份浏览/写入 :)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-29T19:09:31.783

好的，想通了。它不在我的 samba 设置中。错误实际上在于我如何“永久”安装我的 samba 共享。

我在做：

```
//192.168.1.11/craig /home/craig/musicServer cifs username=craig,password=MYPASSWORD 0 0 
```

但我需要

```
//192.168.1.11/craig /home/craig/musicServer cifs username=craig,password=MYPASSWORD,file_mode=0777,dir_mode=0777 0 0 
```

添加 file_mode 和 dir_mode 解决了它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-22T22:35:01.133

所有者打印输出的差异可能是由于您在本地和远程计算机上的 UID/GID 不同。

您可以`noperm`在 mount 处使用选项（不需要`file_mode`or `dir_mode`）。此选项关闭本地文件权限检查（因此 UID/GID 不一致会正常）并假定您在挂载时验证的远程身份。仍然强制执行远程访问控制。

# javascript - IE 不允许设置 tbody 高度

> ID：13631511
> 
> 赞同：0
> 
> 时间：2012-11-29T17:38:24.000
> 
> 标签：javascript, jquery, html, css, internet-explorer

我有以下内容，主要是 css 可滚动表。在 Chrome 和 Firefox 中效果很好，但它不会在 IE 9 中设置 tbody 元素的高度。有什么想法吗？

[http://jsfiddle.net/BvPNK/3/](http://jsfiddle.net/BvPNK/3/)

```
function scrollify(table,height){

   table.find('thead').addClass('fixed_header');
   table.find('tbody').addClass('scroll_content').height(height);
   $('<div/>').addClass('table_wrap').appendTo(table.parent()).append(table);

} 
```

css

```
.fixed_header th,tbody.scroll_content td{
   display:block;
   float:left;
   width:3em;/*this is dynamically set in full function*/
}
.table_wrap{
    float:left;
}
.fixed_header tr{
     position:relative;

}
.scroll_content{
    display:block;
    overflow-y:scroll;
    overflow-x:show;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T18:42:23.420

看来这只是 IE 不尊重 tbody （或表）`height`css 属性的问题。我一辈子都无法为 IE 中的 table 或 tbody 元素设置高度。您可以在[这个答案](https://stackoverflow.com/a/4457290/550309)中看到，最后一条评论提到它不适用于 IE。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T18:13:45.093

要设置 ein 元素的 css 高度，您应该使用 css 函数。高度函数应该用来做数学的东西。

你在第二小提琴中做对了。如果你这样做，你应该用一个字符串作为参数调用你的函数，你的单位：

```
scrollify($('table'), "300px"); 
```

编辑：高度和ie9似乎确实存在问题。innerHeight 虽然应该工作。

我更新了小提琴：http: [//jsfiddle.net/BvPNK/10/](http://jsfiddle.net/BvPNK/10/)

# mysql - 使用 UNIONS 优化 MySQL 查询

> ID：13631516
> 
> 赞同：2
> 
> 时间：2012-11-29T17:39:05.967
> 
> 标签：mysql, union

我有一个查询（有效）来显示对包含特定关键字的消息的平均回复数。

但我认为它可以被优化——我们担心随着数据库的增长，这个查询会变得非常慢，特别是如果我们使用更大的日期范围。

这是当前查询的示例：

```
SELECT 'text1' AS "text", ROUND(AVG (a.rt_count),2) AS "Average over 100 days"
FROM 
(SELECT COUNT(reply.id) AS rt_count
FROM message LEFT OUTER JOIN reply ON (message.id = reply.message)
WHERE message.text LIKE '%text1%'
AND message.created_date >= (CURDATE() - INTERVAL 100 DAY)
GROUP BY message.id
) AS a
UNION
SELECT 'text2' AS "text", ROUND(AVG (a.rt_count),2) AS "Average over 100 days"
FROM 
(SELECT COUNT(reply.id) AS rt_count
FROM message LEFT OUTER JOIN reply ON (message.id = reply.message)
WHERE message.text LIKE '%text2%'
AND message.created_date >= (CURDATE() - INTERVAL 100 DAY)
GROUP BY message.id
) AS a 
UNION
SELECT 'text3' AS "text", ROUND(AVG (a.rt_count),2) AS "Average over 100 days"
FROM 
(SELECT COUNT(reply.id) AS rt_count
FROM message LEFT OUTER JOIN reply ON (message.id = reply.message)
WHERE message.text LIKE '%text3%'
AND message.created_date >= (CURDATE() - INTERVAL 100 DAY)
GROUP BY message.id
) AS a 
```

如您所见，唯一真正改变的是`WHERE message.text LIKE '%text1%'`添加了大量冗余代码。有什么优化思路吗？- 非常感谢所有建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T17:40:56.993

```
SELECT case when message.text like '%text1%'
            then 'text1'
            when message.text like '%text2%'
            then 'text2'
            when message.text like '%text3%'
            then 'text3'
       end AS "text", 
       ROUND(AVG (a.rt_count),2) AS "Average over 100 days"
FROM 
(SELECT COUNT(reply.id) AS rt_count
FROM message LEFT OUTER JOIN reply ON (message.id = reply.message)
WHERE (message.text like '%text1%'
or message.text like '%text2%'
or message.text like '%text3%')
AND message.created_date >= (CURDATE() - INTERVAL 100 DAY)
GROUP BY message.id
) AS a 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T18:36:18.223

为了使您的查询更好地执行，请使用`UNION ALL`而不是`UNION`. 这将消除消除重复的不必要步骤。

如果一行最多可以匹配其中一个文本，则以下内容将起作用：

```
SELECT MatchText AS "text", ROUND(AVG (a.rt_count),2) AS "Average over 100 days"
FROM (SELECT MatchText, m.Id, COUNT(reply.id) AS rt_count
      FROM (select m.*,
                   (case when m.text like '%text1%' then 'Text1'
                         when m.text like '%text2%' then 'Text2'
                         when m.text like '%text3%' then 'Text3'
                    end) as MatchText
            from message m
           ) m LEFT OUTER JOIN
           repl
           ON (m.id = reply.message)
      WHERE MatchText is not NULL AND
            message.created_date >= (CURDATE() - INTERVAL 100 DAY)
      group by MatchText, m.Id
     ) t
group by MatchText 
```

# android - 如何检查Android设备GPS模块是否支持A-GPS

> ID：13631519
> 
> 赞同：1
> 
> 时间：2012-11-29T17:39:19.093
> 
> 标签：android, gps, hardware

要强制下载 AGPS 数据，我必须执行以下代码：

```
LocationManager locationmanager = (LocationManager)context.getSystemService("location");
Bundle bundle = new Bundle();
locationmanager.sendExtraCommand("gps", "force_xtra_injection", bundle);
locationmanager.sendExtraCommand("gps", "force_time_injection", bundle); 
```

这是否可以检查设备是否支持 AGPS？我想确定，执行这段代码是必要的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T17:41:07.733

要检查它是否有硬件支持，请使用：

```
PackageManager pm = getPackageManager();
boolean hasGps = pm.hasSystemFeature(PackageManager.FEATURE_LOCATION_GPS); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T15:12:45.927

通常根本不需要这种 hack，这就是为什么它不在常规 API 中的原因。在这里，您可以阅读[类似问题的绝佳答案](https://stackoverflow.com/a/6127446/813951)。

但即使某个设备不支持它，调用这些方法也不会受到伤害。

# java - 如何使用 Java HashMap 和 IdentityHashMap？

> ID：13631521
> 
> 赞同：3
> 
> 时间：2012-11-29T17:39:22.437
> 
> 标签：java

我正在使用哈希映射。

下面是示例代码。

MyKey 和 MyValue 类以简单的方式从 Object 继承。

Java 文档说对象和方法 hashCode() 和 equals()：

“在合理可行的情况下，由 Object 类定义的 hashCode 方法确实为不同的对象返回不同的整数。（这通常通过将对象的内部地址转换为整数来实现，但 JavaTM 不需要这种实现技术编程语言。）”

“Object 类的 equals 方法实现了对象上最有区别的可能等价关系；也就是说，对于任何非空引用值 x 和 y，当且仅当 x 和 y 引用同一个对象（x = = y 的值为真）。”

我的问题是：

我可以相信 HashMap 在我的示例中有效吗？如果不是，在不重写方法 hashCode() 和 equals() 的情况下，将简单对象放入 map 中的正确方法是什么？

我不确定，但我听说 Java 可能会在程序执行期间更改用户对象的位置和地址（是 GC 可能会这样做吗？）

如果 key2 的地址和哈希码在该行之前发生了变化

```
 MyValue v = m.get(key2); 
```

那么调用 m.get(key2) 会返回错误的值，null？

如果这是真的，那么我相信 IdentityHashMap() 出于同样的原因也是无用的。

```
class MyKey
{
  Integer v;
  //<Perhaps more fields>
  MyKey(Integer v) {this.v=v;}
}

class MyValue
{
  String s;
  //<Perhaps more fields>
  MyValue(String s) {this.s = s;}
}

Then some code:

Map<MyKey,MyValue> m = new HashMap<MyKey,MyValue>();

MyKey key1 = new MyKey(5);
MyKey key2 = new MyKey(6);
MyKey key3 = new MyKey(7);

m.put(key1, new MyValue("AAA"));
m.put(key2, new MyValue("BBB"));
m.put(key3, new MyValue("CCC"));

.
.

//Is it sure that I will get value "AAA" here
//if entry with key2 has not been removed from map m?
MyValue v = m.get(key2);
System.out.println("s="+v.s); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T17:42:51.677

> 我可以相信 HashMap 在我的示例中有效吗？如果不是，在不重写方法 hashCode() 和 equals() 的情况下，将简单对象放入 map 中的正确方法是什么？

你不能避免提供一个合理的 hashCode 和 equals 方法，它是 HashMap 和其他 Hash 集合工作所必需的。（IdentityHashMap 除外）

> 我不确定，但我听说 Java 可能会在程序执行期间更改用户对象的位置和地址（是 GC 可能会这样做吗？）

虽然这是真的，但这与您的主要问题无关。

> 如果 key2 的地址和哈希码在该行之前发生了变化

地址和 hashCode 彼此无关。如果地址更改，它不会更改 hashCode，如果您更改 hashCode，它不会更改地址。

> 如果这是真的，那么我相信 IdentityHashMap() 出于同样的原因也是无用的。

即使您假设 hashCode 无用，这也不会影响 IndentityHashCode，因为它不使用`hashCode`or`equals`方法。

* * *

对象基本上是从 Eden 空间连续分配到内存中的。如果你跑

```
Object[] objects = new Object[20];
for (int i = 0; i < objects.length; i++)
    objects[i] = new Object();

Field theUnsafe = Unsafe.class.getDeclaredField("theUnsafe");
theUnsafe.setAccessible(true);
Unsafe unsafe = (Unsafe) theUnsafe.get(null);
for (int i = 0; i < objects.length; i++) {
    int location = unsafe.getInt(objects, Unsafe.ARRAY_OBJECT_BASE_OFFSET + Unsafe.ARRAY_OBJECT_INDEX_SCALE * i);
    System.out.println(Integer.toHexString(location) + ": hashCode=" + Integer.toHexString(objects[i].hashCode()));
} 
```

如果跟随某个内存位置，您可能希望它们是连续的，但它们不是

```
eac89d10: hashCode=634e3372
eac89d20: hashCode=2313b44d
eac89d30: hashCode=62a23d38
eac89d40: hashCode=9615a1f
eac89d50: hashCode=233aa44
eac89d60: hashCode=59243f75
eac89d70: hashCode=5ac2480b
eac89d80: hashCode=907f8ba
eac89d90: hashCode=6a5a7ff7
eac89da0: hashCode=5b8767ad
eac89db0: hashCode=50ba0dfc
eac89dc0: hashCode=2198a037
eac89dd0: hashCode=2b3e8c1c
eac89de0: hashCode=17609872
eac89df0: hashCode=46b8705b
eac89e00: hashCode=76d88aa2
eac89e10: hashCode=275cea3
eac89e20: hashCode=4513098
eac89e30: hashCode=6e4d4d5e
eac89e40: hashCode=15128ee5 
```

Java 有四种不同的 32 位和 64 位引用编码方式，但是如果您的最大堆大小小于 2 GB，它将是一个简单的 32 位地址，就像我运行这个示例时一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T17:48:29.970

> 我可以相信 HashMap 在我的示例中有效吗？如果不是，在不重写方法 hashCode() 和 equals() 的情况下，将简单对象放入 map 中的正确方法是什么？

您的示例不提供 hashCode 或 equals，因此它将使用默认值。默认值与对象标识一起使用，这意味着仅当 o 和 o2 引用同一对象时 o.equals(o2) 才会为真。

```
 MyKey m = new MyKey(1);
 MyKey m2 = new MyKey(1);
 MyKey m3 = m;

 map.put(m,...);
 map.get(m);//works
 map.get(m2); //different object
 map.get(m3);//works same object 
```

> 我不确定，但我听说 Java 可能会在程序执行期间更改用户对象的位置和地址（是 GC 可能会这样做吗？）

对象的地址是不相关的，而默认的 hashCode 可能会使用它，这对每个对象只发生一次，然后保持不变。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T17:54:34.350

首先，对象的默认哈希码在构造后不会更改，因此 IdentityHashMap 并非无用。Java 可以在内存中移动对象，但不会更改它们的身份哈希码。

其次，如果您不定义自己的`equals()`方法，那么您构造的每个对象都不会`equals()`相互关联。这意味着如果您想将它们用作 HashMap（或 IdentityHashMap）中的键，您将只能通过使用原始对象来检索它们。

例如：

```
MyKey key = new MyKey(5);
m.put(key, value);
...
MyKey newKey = new MyKey(5);
m.get(newKey); // Will not find the value 
```

由于`newKey`和`key`是不同的对象，它们不是`==`。这就是为什么建议您为您的对象覆盖`equals()`（和）的原因。`hashcode()`

`HashMap`如果你不覆盖你的对象， A仍然有效`equals()`，`hashcode()`但它通常不会做你想做的事 - 在这种情况下，它变得等同于`IdentityHashMap`

# wpf - 在选项卡控件中创建多行

> ID：13631524
> 
> 赞同：2
> 
> 时间：2012-11-29T17:39:36.653
> 
> 标签：wpf, tabcontrol

我知道 TabControl 的默认行为是包装标签，但在我的情况下没有发生。我认为这是因为放置了 TabControl 的网格。

我有一个选项卡控件。这被放置在堆栈面板内。这有足够的空间容纳 3 个选项卡。现在我想添加第四个选项卡，它没有换行。我做了一些研究，发现如果我们使用任何 Style 或 ControlTemplate，这将阻止 Tabcontrol 换行。

以下是我用于 TabControl 的 ControlTemplate 的代码。我看到同一行中的所有选项卡，而我实际上希望它在第三个选项卡之后换行。有人可以告诉我如何实现这一目标。

```
 <Grid VerticalAlignment="Top" Height="700">
  <Grid.Resources>
    <Style TargetType="{x:Type TabItem}">
      <Setter Property="Template">
        <Setter.Value>
          <ControlTemplate TargetType="{x:Type TabItem}">
            <Grid>
              <Border Name="Border" CornerRadius="6,6,0,0" Height="30" Margin="0,0,2,0" BorderBrush="Black" BorderThickness="1,1,1,1" >
                <ContentPresenter x:Name="ContentSite" VerticalAlignment="Center" HorizontalAlignment="Center" ContentSource="Header" Margin="12,2,12,2" />
              </Border>
            </Grid>
            <ControlTemplate.Triggers>
              <Trigger Property="IsSelected" Value="True">
                <Setter TargetName="Border" Property="Background" Value="#BEC39F" />
                <Setter Property="Foreground" Value="Black" />
              </Trigger>
              <Trigger Property="IsSelected" Value="False">
                <Setter TargetName="Border" Property="Background" Value="#8A863D" />
                <Setter Property="Foreground" Value="White" />
              </Trigger>
            </ControlTemplate.Triggers>
          </ControlTemplate>
        </Setter.Value>
      </Setter>
    </Style>
    <Style TargetType="{x:Type TabControl}">
      <Setter Property="Template">
        <Setter.Value>
          <ControlTemplate TargetType="{x:Type TabControl}">
            <Grid Height="525">
              <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
              </Grid.RowDefinitions>
              <TabPanel Grid.Row="0" Panel.ZIndex="1" Margin="0,0,4,-1" IsItemsHost="True" Background="Transparent" />
              <Border Grid.Row="1" BorderBrush="Black" BorderThickness="1" CornerRadius="0, 12, 12, 12">
                <Border.Background>
                  <LinearGradientBrush>
                    <GradientStop Color="#BEC39F" Offset="0" />
                    <GradientStop Color="White" Offset="1" />
                  </LinearGradientBrush>
                </Border.Background>
                <ContentPresenter ContentSource="SelectedContent" />
              </Border>
            </Grid>
          </ControlTemplate>
        </Setter.Value>
      </Setter>
    </Style>
  </Grid.Resources>
  <Grid.RowDefinitions>
    <RowDefinition Height="Auto" MinHeight="150" />
    <RowDefinition Height="Auto" MinHeight="484" />
  </Grid.RowDefinitions>
  <StackPanel Grid.Row="1" Margin="0,20,0,0">
    <TabControl Margin="0,0,0,-61" Name="tabControl1" >
      <TabItem Name="tab0" >
        <TabItem.Header>
          Tab0
        </TabItem.Header>
      </TabItem>
      <TabItem Name="tab1">
        <TabItem.Header>
          Tab1
        </TabItem.Header>
      </TabItem>
      <TabItem Header="Tab2" Name="tab2">
      </TabItem>
      <TabItem Header="Tab3" Name="tab3"></TabItem>
    </TabControl>
  </StackPanel>
</Grid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T19:58:34.347

如果我理解您的问题，您希望标签 3 换行，但事实并非如此。我玩过您的代码，并且 TabControl 包装没有问题，我看到的是它以某种方式完成它。基本上它不会只包装一件物品，因为它看起来很有趣。将模板中的 TabPanel 替换为 wrap 面板，您将明白我的意思。

在下面粘贴代码可以做到这一点 - 一次包装一个项目：

```
<Style TargetType="{x:Type TabControl}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type TabControl}">
                    <Grid Height="525">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>
                            <WrapPanel Margin="0,0,4,-1" IsItemsHost="True"/>
                            <Border Grid.Row="1" BorderBrush="Black" BorderThickness="1" CornerRadius="0, 12, 12, 12">
                                <Border.Background>
                                        <LinearGradientBrush>
                                            <GradientStop Color="#BEC39F" Offset="0" />
                                            <GradientStop Color="White" Offset="1" />
                                        </LinearGradientBrush>
                                </Border.Background>
                                <ContentPresenter ContentSource="SelectedContent" HorizontalAlignment="Stretch"/>
                            </Border>
                        </Grid>                         
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

如果你对你的标签项目进行硬编码，你可以给你的 tab3 一定的宽度，它看起来不会那么奇怪

```
<TabItem Header="Tab3" Name="tab3"/> 
```

# c++ - C++ 地图行为不正常

> ID：13631526
> 
> 赞同：0
> 
> 时间：2012-11-29T17:39:44.580
> 
> 标签：c++, data-structures, stl, map

我已经定义了我的类*SumClass*并尝试在地图中使用它，如下面的代码所示。我已经定义了所需的*<、=*和*==*运算符。

```
#include <iostream>
#include <vector>
#include <map>

using namespace std;

class SumClass {
    public:
    int id;
    int sum;
    SumClass() { id = sum = 0;}
    bool operator<(const SumClass& rhs) const{
        if( (id < rhs.id) && (sum< rhs.sum)) return true;
        else return false;
    }
    bool operator==(const SumClass& rhs) const{
        //if(this == &rhs) return true;
        if( (id == rhs.id) && (sum == rhs.sum) ) return true;
        else return false;
    }
    void set(int idd, int summ) { id = idd; sum = summ; }
    SumClass& operator=(const SumClass& rhs){
        id = rhs.id;
        sum = rhs.sum;
        return *this;
    }
};

void test(){
    map<SumClass, int> m;
    SumClass temp;
    temp.set(0,3);
    m[temp] = -1;
    temp.set(-1, 3);
    m[temp] = -1;
    temp.set(-1, 2);
    m[temp] = -1;
    temp.set(0, 1);
    cout << "Test: " << m[temp] << endl;
}

int main(){
    test();
} 
```

上面代码的输出是：“测试：-1”。但预期的输出是“测试：0”，因为我试图找到的 SumClass 元素在地图中不存在。谁能指出我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T17:42:35.387

您`operator<`没有提供[严格的弱排序](http://en.wikipedia.org/wiki/Strict_weak_ordering)。

试试这个：

```
bool operator<(const SumClass& rhs) const{
  return std::tie(id, sum) < std::tie(rhs.id, rhs.sum);
} 
```

或者，如果您不能使用 C++11 功能：

```
bool operator<(const SumClass& rhs) const{
  return std::make_pair(id, sum) < std::make_pair(rhs.id, rhs.sum);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T17:43:50.630

您尚未定义所需的运算符；你`operator<`的不是严格的弱排序。

例如，`(0, 0) < (1, 1)`，但既不`(0, 0) < (0, 1)`也不`(0, 1) < (1, 1)`成立，违反了等价的传递性。

有关如何编写严格的弱排序，请参阅[Operator< 和严格的弱排序。](https://stackoverflow.com/questions/979759/operator-and-strict-weak-ordering)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T17:43:29.940

我怀疑这是错误的：

```
 bool operator<(const SumClass& rhs) const{
        if( (id < rhs.id) && (sum< rhs.sum)) return true;
        else return false;
    } 
```

他们真的会**一直**保持这种关系吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T17:45:49.740

`map::operator[]`正在尝试在地图中找到值。如果找到它，它会返回对它的引用。如果它没有找到它，那么它会创建它。您可以考虑使用`map::find`.

# c# - 要锁定的最佳静态对象类型是什么？有没有比别人更好的？

> ID：13631531
> 
> 赞同：-1
> 
> 时间：2012-11-29T17:39:54.297
> 
> 标签：c#, multithreading, concurrency, locking

> **可能重复：**
> [是否有任何理由锁定新对象（）以外的东西？](https://stackoverflow.com/questions/5361284/is-there-any-reason-to-lock-on-something-other-than-new-object)

我想知道要锁定的最佳私有静态对象是什么，如果确实有区别的话。

目前，我的大部分代码包括：

```
private static object m_lockObject = new object();

lock(m_lockObject)
{
    ..critical thread code here
} 
```

我应该使用不同的类型，而不是只锁定一个对象吗？像自定义类实例、int 或字符串等...？还是没关系？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T17:44:21.650

`Lock`语句只是底层**[`Monitor`](http://msdn.microsoft.com/en-us/library/system.threading.monitor.aspx)**对象的语法糖。出于锁定的目的，它使用引用。从监视器的角度来看，它是什么参考并不重要！然而，锁定可能会导致意外的结果，例如，`string`由于字符串被**[拦截。](http://broadcast.oreilly.com/2010/08/understanding-c-stringintern-m.html)**由于装箱，锁定值类型会使您异常。

TL;DR 版本 - 你做得很好（如果这`static`部分真的是你想要的行为）

# sql - 单表查询的 SQL 查询帮助

> ID：13631532
> 
> 赞同：3
> 
> 时间：2012-11-29T17:40:01.753
> 
> 标签：sql

我有一张记录课程进度状态的表格。当课程开始时，会为每个用户/课程组合添加一条新记录。当课程完成时，该记录将更新为“完成”状态。我需要查找从未完成任何课程的用户的记录。

示例表：

```
User  Course  Status
A      1       S
A      2       C
B      1       S
C      2       S
D      2       C
C      3       S 
```

我需要一个能找到以下内容的查询：

```
User  Course  Status
B      1        S
C      2        S
C      3        S 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T17:42:41.130

```
select user, course, status
from your_table
where user in 
(
    select user
    from your_table
    group by user
    having sum(CASE WHEN status = 'C' THEN 1 ELSE 0 END) = 0
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T17:42:13.083

```
Select User, Course, Status from MyTable where User not in (Select Distinct User from MyTable where Status = 'C') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T17:44:17.370

```
SELECT User,Course,Status FROM YourTable a
LEFT JOIN
(SELECT DISTINCT User FROM YourTable WHERE Status='C') CompletedAnything
ON a.User=CompletedAnything.User
WHERE COmpletedAnything.User IS NULL 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T17:53:09.170

这是一个 SQL Fiddle，可以为您提供所需的内容： [http ://sqlfiddle.com/#!2/b6988/1](http://sqlfiddle.com/#!2/b6988/1)

查询是这样的：

```
select User, Course, Status
from mytable
where User not in 
  (select distinct User from mytable where status = 'C' ans User is not null) 
```

# java - JTable CustomRenderer 问题

> ID：13631535
> 
> 赞同：1
> 
> 时间：2012-11-29T17:40:22.533
> 
> 标签：java, swing, jtable, tablecellrenderer

我创建了一个 Jtable。这个表由两列名称和时间戳组成。如果名称是“jane”，我想将行的颜色设为黄色。以下是该代码：-

```
 class CustomRenderer extends DefaultTableCellRenderer {

    public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {
        Component c = super.getTableCellRendererComponent(table, value, isSelected, hasFocus, row, column);
        String name = table.getModel().getValueAt(row, 0).toString();

        if (name.trim().equals("jane")) {
            c.setBackground(Color.YELLOW);
        }
        return c;
    }
} 
```

但是，不是将特定名称的行颜色更改为黄色，而是更改每一行的颜色。我将表的数据设置如下

```
tableModelName = (DefaultTableModel)jTableName.getModel();

jTableName.setDefaultRenderer(Object.class,new CustomRenderer());

for(int i=0; i<records.size(); i++)
         {
            tableModelName.addRow(records.get(i));          

         } 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T17:45:59.473

`else`如果名称不是“jane”，您需要一个子句将背景颜色设置为黄色以外的颜色。单个渲染器实例用于所有渲染，因此一旦在该实例上将颜色设置为黄色，它就会保持黄色。

查看 JTable 源代码，了解内置渲染器的工作原理：

```
 if (isSelected) {
        setForeground(table.getSelectionForeground());
        super.setBackground(table.getSelectionBackground());
    }
    else {
        setForeground(table.getForeground());
        setBackground(table.getBackground());
    } 
```

为了更简单地执行此操作，您可以尝试继承 JTable 并覆盖[prepareRenderer](http://docs.oracle.com/javase/6/docs/api/javax/swing/JTable.html#prepareRenderer%28javax.swing.table.TableCellRenderer,%20int,%20int%29)。这对于像这样影响整个行的更改很方便，因此您可以对单个单元格使用自定义渲染器，并在`prepareRenderer`方法中调整一行的所有渲染器。

# css - 创建 CSS 以放大复选框

> ID：13631537
> 
> 赞同：28
> 
> 时间：2012-11-29T17:40:29.047
> 
> 标签：css, resize, label, checkbox

我试图在几页上将复选框的大小加倍。如何在 CSS 中实现这一点？我不想为悬停设置样式。

想法？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2015-03-31T02:07:02.847

要将复选框的大小加倍，您可以使用 CSS scale 属性。(2,2) 表示原始宽度的 2 倍和高度的 2 倍，但这会非常大。

```
input[type="checkbox"] {
  transform:scale(2, 2);
} 
```

您也可以使用十进制值，只是稍微大一点的复选框。

```
input[type="checkbox"] {
      transform:scale(1.3, 1.3);
    } 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2017-09-20T20:28:38.767

这行得通。它使用相对大小，因此它可以根据您当前的字体大小进行缩放。

```
input[type="checkbox"] {
  width: 1.2em;
  height: 1.2em;
} 
```

不过，您可能需要调整边距。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-11-29T17:42:41.067

样式化复选框是有风险的事情。这是似乎永远无法与所有浏览器一致的事情之一。

或者你可以试试

```
 style="zoom:1.2" 
```

jQuery 提供了一个[插件](http://archive.plugins.jquery.com/project/ui-checkbox)来替换复选框

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-11-29T17:57:38.890

您总是可以使用复选框 hack 来制作您自己的复选框。这允许更多跨浏览器兼容的解决方案。

[我在这里](http://jsfiddle.net/EZHwR/1/)做了一个快速演示，显然你必须得到一个透明的.png，而不是我得到的那个。

```
input[type=checkbox]:checked ~ div label{
    background: url(http://ramyasspace.files.wordpress.com/2011/06/tick.jpg);
    background-size: 100%;
} 
```

* * *

```
input {
  display: none;
}

label input[type=checkbox] ~ span {
  display: inline-block;
  vertical-align: middle;
  cursor: pointer;
  background: #fff;
  border: 1px solid #888;
  padding: 1px;
  height: 20px;
  width: 20px;
}

label input[type=checkbox]:checked ~ span {
  /* image: Picol.org, cc-by 3.0, https://commons.wikimedia.org/wiki/File:Accept_Picol_icon.svg */
  background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><path d="M14 18L26 6l4 4-16 16L4 16l4-4z"/></svg>');
  background-size: 100%;
}
```

```
<label>
  Click me:
  <input type="checkbox" />
  <span></span>
</label>
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-11-29T17:52:17.557

我认为你能做的最好的就是给它更大的字体大小。从那里开始取决于浏览器如何处理它，除非您制作一个控制隐藏复选框的模拟 div 元素。它并没有扩大那么多。

```
input[type="checkbox"] {
  font-size: 50px;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-04-22T18:03:44.343

我已经成功使用了这个库

[http://plugins.krajee.com/checkbox-x](http://plugins.krajee.com/checkbox-x)

它需要 jQuery 和 bootstrap 3.x

在此处下载 zip：[https ://github.com/kartik-v/bootstrap-checkbox-x/zipball/master](https://github.com/kartik-v/bootstrap-checkbox-x/zipball/master)

将 zip 的内容放在项目中的文件夹中

在标题中弹出所需的库

```
<link href="http://netdna.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet">
<link href="path/to/css/checkbox-x.min.css" media="all" rel="stylesheet" type="text/css" />
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.12.3/jquery.min.js"></script>
<script src="path/to/js/checkbox-x.min.js" type="text/javascript"></script> 
```

使用 data-size="xl" 将数据控件添加到元素以更改大小，如下所示[http://plugins.krajee.com/cbx-sizes-demo](http://plugins.krajee.com/cbx-sizes-demo)

```
<label for="element_id">CheckME</label>
<input type="checkbox" name="my_element" id="element_id" value="1" data-toggle="checkbox-x" data-three-state="false" data-size="xl"/> 
```

如果您浏览插件站点，还有许多其他功能。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-29T17:44:44.853

样式复选框是一个非常奇怪的世界，完全解决了跨浏览器问题。更多信息可以在这里找到[http://www.456bereastreet.com/lab/form_controls/checkboxes/](http://www.456bereastreet.com/lab/form_controls/checkboxes/)您也可以使用 javascript 创建自己的，但这对于用户可访问性来说不是很好。

所以我会尽可能避免改变。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-07-27T05:20:45.437

只需将背景图像添加到复选框。并根据需要调整尺寸。

**下面的代码在选中**时会自动添加背景，并且在**未选中**状态下大小保持不变。

无需指定如下：

```
input[type=checkbox]:checked 
```

**或者**

```
input[type=checkbox]:checked ~ div label 
```

**例如，所有复选框**：

```
input[type="checkbox"]{
  background: url('http://refundfx.com.au/uploads/image/checkbox_full.png');
  background-size: 20px;
  background-repeat: no-repeat;
  width: 20px;
  height: 20px;
  margin: 0;
} 
```

[在这里](https://jsfiddle.net/2ac5f2ob/)看小提琴。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2016-05-18T19:55:07.220

或者简单地使用这样的高度和宽度来设置它：

```
<input style="height: 26px; width:26px; margin-left:-30px" value="" type="checkbox"> 
```

PS。我已经将它与引导程序和“checkbox-inline”类一起使用

# perl - perl 中的数组访问复杂度是 O(1) 还是 O(n)？

> ID：13631538
> 
> 赞同：0
> 
> 时间：2012-11-29T17:40:29.787
> 
> 标签：perl, caching, complexity-theory

我正在缓存函数 f(1)、f(2)、...、f(1e7) 的结果。缓存中的元素将被随机读取。在 C 中，我将其存储在向量中，因为访问复杂度为 O(1)。在 Perl 中，我应该将缓存存储在向量还是散列中？

我觉得将它存储在哈希中不会利用输入是连续整数的事实。但另一方面，我可能想多了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-29T17:48:54.063

与其自己缓存函数的结果，不如使用为您处理它的[Memoize 核心模块](http://perldoc.perl.org/Memoize.html)。

```
use Memoize;
memoize('slow_function');
slow_function(arguments); # Is faster than it was before 
```

这就是它的全部内容，它已经存在了很长时间并且经过了很好的测试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T17:43:15.887

除了在您进行分析之前担心效率的通常免责声明之外，我会说将其存储在一个数组中。哈希在计算哈希键时会产生额外的开销。此外，数组是最自然的表示形式，除非您知道自己的表现不佳，否则请务必清楚。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T17:50:23.677

Perl 中的数组和哈希都是 O(1)。但是，我敢打赌，数组的 O(1) 在绝对时钟时间内会更快。在顺序整数数组的情况下，由于其简单的索引数学，数组可能会更快。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T21:23:40.007

访问存在的数组元素将比插入散列更快。从好的方面来说，两者的表现相似。（复杂性分析衡量事物的扩展性，而不是它的速度。）

数组元素的最坏情况访问：

```
$x = $a[$i];           # O(1)
$a[$i] = $x;   $i<@a   # O(1)
$a[$i] = $x;           # O(1), amortized 
```

哈希元素的最坏情况访问（对于有界长度的键）：

```
$x = $h{$k};           # O(1)
$h{$k} = $x;           # O(1), amortized 
```

（“摊销 O(1)”表示其中 N 个操作的 O(N)。）

鉴于您的键是连续整数，您绝对应该使用数组。

```
my @cache;
sub func {
    my ($n) = @_;
    return $cache[$n] //= ...;
} 
```

相反，如果您的密钥稀疏，则最好使用散列来节省内存。

```
my %cache;
sub func {
    my ($n) = @_;
    return $cache{$n} //= ...;
} 
```

# java - 我的 Activity 是否可以将生成的触摸/运动事件发送到其子视图？

> ID：13631539
> 
> 赞同：1
> 
> 时间：2012-11-29T17:40:31.350
> 
> 标签：java, android

我有一个`Activity`生成一些`MotionEvent`s （通过`MotionEvent.obtain()`）。我想将这些生成的触摸/运动事件传递给`Activity`的子视图。从文档中，`Activity.onTouchEvent()`仅当其中一个子视图不处理事件时才调用，这意味着我不能调用它来将生成的触摸事件传递给孩子。

有没有办法将生成的触摸事件*从父`MainActivity`*视图发送到其子视图，以使它们正常响应（例如，如果子视图有一个`OnClickListener`集合，并且我将生成的向下/向上触摸事件发送到子视图，我希望`OnClickListener`被调用）？

请注意，我并没有尝试将触摸事件从一个活动发送到另一个活动，而这一切都在我自己的应用程序中。另外，我的设备没有root，所以需要root的解决方案对我没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T17:47:30.507

刚刚想通了。解决方案是使用[`Activity.dispatchTouchEvent()`](http://developer.android.com/reference/android/app/Activity.html#dispatchTouchEvent%28android.view.MotionEvent%29). 例如，以下注册为我的视图上的点击事件：

```
dispatchTouchEvent(MotionEvent.obtain(SystemClock.uptimeMillis(), SystemClock.uptimeMillis(), MotionEvent.ACTION_DOWN, 200, 200, 0));
dispatchTouchEvent(MotionEvent.obtain(SystemClock.uptimeMillis(), SystemClock.uptimeMillis(), MotionEvent.ACTION_UP, 200, 200, 0)); 
```

# android - SharedPreferences 或 SQlite

> ID：13631546
> 
> 赞同：3
> 
> 时间：2012-11-29T17:41:04.623
> 
> 标签：android, database, sqlite, android-widget, sharedpreferences

我正在开发一个 Android AppWidget，它显示从配置活动输入的短文本。在存储数据时我有点困惑，我应该使用 sharedpreferences 还是 SQlite 数据库？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T17:46:11.567

这完全取决于您要存储的数据。

**共享偏好**

*   小数据
*   非结构化
*   比如登录信息、用户偏好等

**方镁石**

*   大数据
*   结构化的
*   有组织的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T17:43:24.937

这取决于您要存储的数据。使用 sharedPreferences 您可以存储名称 - 值数据，使用 sqlite 您拥有关系数据库的所有功能。

我想说这取决于数据量以及您需要执行的查询类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T17:43:35.207

取决于您计划存储的数据。如果它很简单，sharedPreferences 就可以完成这项工作。如果它更复杂，请使用 DB。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T17:44:58.633

对于单个字符串 SharedPrefs 会简单得多。

# xpages - 动态添加/删除重复控件中的字段并将它们保存到文档

> ID：13631547
> 
> 赞同：0
> 
> 时间：2012-11-29T17:41:07.283
> 
> 标签：xpages

我发现这个[讨论](https://stackoverflow.com/questions/9719778/xpages-more-fields-unlimited-at-the-click-of-a-button)描述了如何将输入文本放入重复控件中并无限次重复并将其动态绑定到文档中的字段。

这就是我所做的。我创建了一个这样的重复：

```
<xp:repeat indexVar="fieldSuffix" value="#{viewScope.rowCount}">
 <xp:div>
  <xc:dynamicInputText dataSource="#{contact}" fieldName="fullName_#{fieldSuffix}" />
 </xp:div>
</xp:repeat> 
```

在自定义控件`dynamicInputText`中，我编写了这样的输入文本控件：

`<inputText value="#{compositeData.dataSource[compositeData.fieldName]}" />`

然后我创建了一个添加按钮，在该按钮上增加`viewScope.rowCount`1 并部分刷新重复控件。这会添加一行新的输入文本。同样，我在单击时创建了一个删除按钮，该按钮减`viewScope.rowCount`1 并部分刷新重复控件。这将删除最后添加的输入文本。

现在，如果单击添加三次，我会在网页上获得三个输入文本字段。我在每个人中输入信息。然后我单击删除以删除第三个（最后一个）输入文本。现在，当我保存数据源时，所有三个字段（包括我删除的最后一个字段）都保存在文档中。

为什么会这样？如何停止我删除的第三个字段保存在文档中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T23:06:18.117

您只是隐藏了该字段的渲染。绑定后，您的删除按钮必须清除其值或从 DDS 中删除该项目。例如`DDS.replaceItemValue( field, "" )`或（最好）`DDS.removeItem( field )`。

# makefile - make echo 在生成的文件中包含引号

> ID：13631551
> 
> 赞同：3
> 
> 时间：2012-11-29T17:41:20.413
> 
> 标签：makefile, gnu-make

我有一个生成文件规则，它根据列表的内容生成一个 C 文件。

```
LIST = foo \
       bar

generated.c:
    @echo "Creating $@"
    (echo "#include <stuff.h>";      \
    echo "void init_local() {";      \
    for i in $(LIST) ; do            \
       echo "    init_$$i();";       \
    done;
    echo "}") > $@ 
```

在 Linux 平台上，这给了我期望的结果：

```
#include <stuff.h>
void init_local() {
    init_foo();
    init_bar();
} 
```

但是，在我的带有 GNU Make 3.82 (x86_64-w64-mingw32) 的 windows 7 64 位平台上，
我得到以下信息（全部在一行上）：

```
"#include <stuff.h>";   \"void init_local() {"  \ 
   for i in foo bar; do echo "  init_$i();"; done; echo "}" 
```

我也试图打破个别行的规则：

```
 echo "#include <stuff.h>" > %@
    echo "void init_local() {" >> $@
    ... 
```

使用该解决方案，我每行有 1 个字符串，但引号仍然存在！

我将如何更改规则以使生成的文件在 Linux 和 Windows 平台上都正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T21:32:57.863

这是因为 DOS 有自己的命令分隔符 - **&**（类似于bash 中的**;**）。但我建议使用 make echo 而不是在 DOS 和 bash 中工作的 shell echo：

但这还不是全部，据我所知，您不需要在输出中使用引号 ( **""** )，这就是为什么您不应该将它们传递给 echo，而是使用**^**转义特殊符号。

```
ifeq ($(OS_TYPE),linux)
    Q="
    ESC=
else
    Q=
    ESC=^
endif

generated.c:
    @echo "Creating $@"
    echo $(Q)#include $(ESC)<stuff.h$(ESC)>$(Q) > $@ 
    echo $(Q)void init_local() {$(Q) >> $@
    ... 
```

此外，你的 bash **for..;do..;done;** loop 应替换为 make **$(foreach, $(LIST), echo ...)**以对两个 shell 都正确。

是的，我知道，这看起来很难看，但那是因为奇怪的 DOS 规则。如果你需要生成很多东西，我建议使用 awk、python 或 perl。

# python - 如何更改 networkx / matplotlib 图形绘图的属性？

> ID：13631553
> 
> 赞同：7
> 
> 时间：2012-11-29T17:41:37.030
> 
> 标签：python, matplotlib, networkx, ipython-notebook

NetworkX 包括使用[matplotlib绘制图形的](http://matplotlib.org/)[函数](http://networkx.lanl.gov/reference/drawing.html)。这是一个使用出色的 IPython Notebook 的示例（以 开头）：`ipython3 notebook --pylab inline`

![在此处输入图像描述](../Images/1ba6ff3e5c3485397d4626b214703eca.png)

很好，开始吧。但是如何影响绘图的属性，例如颜色、线宽和标签？我以前没有使用过 matplotlib。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-29T17:57:43.120

IPython 是找出函数（和对象）可以做什么的好工具。如果你输入

```
[1]: import networkx as nx
[2]: nx.draw? 
```

你看

> 定义：nx.draw(G, pos=None, ax=None, hold=None, **kwds)
> 
> ```
> **kwds: optional keywords
>    See networkx.draw_networkx() for a description of optional keywords. 
> ```

如果您因此键入

```
[10]: nx.draw_networkx? 
```

你会看见

```
node_color: color string, or array of floats
edge_color: color string, or array of floats
width: float
   Line width of edges (default =1.0)
labels: dictionary
   Node labels in a dictionary keyed by node of text labels (default=None) 
```

因此，有了这些信息和一些实验，不难得出：

```
import matplotlib.pyplot as plt
import numpy as np
import networkx as nx
import string

G = nx.generators.erdos_renyi_graph(18, 0.2)
nx.draw(G,
        node_color = np.linspace(0,1,len(G.nodes())),
        edge_color = np.linspace(0,1,len(G.edges())),
        width = 3.0,
        labels = {n:l for n,l in zip(G.nodes(),string.ascii_uppercase)}
        )
plt.show() 
```

产生

![在此处输入图像描述](../Images/54599f829f9cbf949db01427ce7fe020.png)

# git - 重新创建 Gitolite-admin 存储库

> ID：13631555
> 
> 赞同：5
> 
> 时间：2012-11-29T17:41:41.850
> 
> 标签：git, repository, gitolite, git-clone

我接管了一个项目，以前的管理员没有提供任何帮助，没有文档，也没有移交……我正在尝试克隆 gitolite-admin 存储库，以便我可以将自己添加为用户。

问题是当我跑步时

```
git clone gitolite@repo1:gitolite-admin.git 
```

我收到错误

```
R access for gitolite-admin DENIED to macbook
(Or there may be no repository at the given path. Did you spell it correctly?)
fatal: The remote end hung up unexpectedly 
```

服务器的 conf/gitolit.conf 文件包含

```
repo    gitolite-admin
    RW+     =   macbook 
```

我的存储库包含 gitolite-admin.git 等，我成功运行

```
git clone gitolite@repo1:wp_of_travel 
```

当我跑

```
ssh gitolite@repo1 info 
```

我收到了一些项目，但 gitolite-admin 没有在此处列出。

我的情况是绝望还是我错过了可以重建回购并再次克隆它的东西？

如果有帮助，我确实可以完全控制服务器...

任何关于此事的帮助或建议都非常受欢迎。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T17:53:44.540

> 当我跑

```
ssh gitolite@repo1 info 
```

> 我收到了一些项目，但 gitolite-admin 没有在此处列出。

这是正常的：如果 macbook 没有在`gitolite.conf`repo 的那个项目中注册（不是您自己的 local `gitolite.conf`，而是当前存储在`gitolite-admin.git`repo 中的那个），您将不会看到它列出。

如果您可以访问服务器，则可以在`gitolite-admin.git`本地克隆（文件协议，此处没有 ssh），添加您的姓名（在您的公共 ssh 密钥之后），推回并运行`gitolite setup`（如果您使用的是 gitolite v3），以便gitolite 来更新`~/.ssh/authorized_keys`文件。

* * *

对于 gitolite V2，页面**`gl-admin-push`: bypassing gitolite for the gitolite-admin repo**很有帮助：

> 将 repo 克隆到某个安全位置并 cd 到它：

```
cd /tmp
git clone ~/repositories/gitolite-admin.git
cd gitolite-admin 
```

> 对该克隆进行任何更改并提交。您可以添加新密钥、更改 conf 文件或任何需要修复的内容。如果这是修复某些可能导致您失去访问权限的配置问题的最简单方法，您甚至可以重置为较旧的提交（回退）。
> 
> 完成后`git push <push arguments>`，请使用此程序代替 。
> 例如，代替`git push -f`，使用**`gl-admin-push -f`**。

[OP edwardgd](https://stackoverflow.com/users/1166885/edwardgd)[在评论](https://stackoverflow.com/questions/13631555/recreating-gitolite-admin-repo#comment18701770_13631762)中确认：

> 看起来以前的系统管理员对 root 以及用户 gitolite 进行了失败的安装，这就是我感到困惑的原因。
> 作为参考，`adminpush`一旦您知道在哪里应用该方法，该方法就非常简单。

# arrays - TypeScript 对象作为 C# 中的字典类型

> ID：13631557
> 
> 赞同：385
> 
> 时间：2012-11-29T17:41:44.580
> 
> 标签：arrays, object, dictionary, typescript

我有一些使用对象作为字典的 JavaScript 代码；例如，“人”对象将保存一些与电子邮件地址相关的个人详细信息。

```
var people = {<email> : <'some personal data'>};

adding   > "people[<email>] = <data>;" 
getting  > "var data = people[<email>];" 
deleting > "delete people[<email>];" 
```

是否可以在 Typescript 中描述这一点？还是我必须使用数组？

* * *

## 回答 #1

> 赞同：607
> 
> 时间：2012-11-29T17:51:40.263

在较新版本的打字稿中，您可以使用：

```
type Customers = Record<string, Customer> 
```

在旧版本中，您可以使用：

```
var map: { [email: string]: Customer; } = { };
map['foo@gmail.com'] = new Customer(); // OK
map[14] = new Customer(); // Not OK, 14 is not a string
map['bar@hotmail.com'] = 'x'; // Not OK, 'x' is not a customer 
```

如果您不想每次都输入整个类型注释，您也可以创建一个接口：

```
interface StringToCustomerMap {
    [email: string]: Customer;
}

var map: StringToCustomerMap = { };
// Equivalent to first line of above 
```

* * *

## 回答 #2

> 赞同：149
> 
> 时间：2017-02-14T10:36:14.767

除了使用*类似*map 的对象外，现在还有一个实际的[`Map`对象，当编译到 ES6 或使用带有 ES6](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map)[类型定义](https://github.com/DefinitelyTyped/DefinitelyTyped/tree/4869992bc079b88280b9ff91213528904109e8ae/es6-shim)的 polyfill 时，它在 TypeScript 中可用：

```
let people = new Map<string, Person>(); 
```

它支持与 相同的功能`Object`，甚至更多，但语法略有不同：

```
// Adding an item (a key-value pair):
people.set("John", { firstName: "John", lastName: "Doe" });

// Checking for the presence of a key:
people.has("John"); // true

// Retrieving a value by a key:
people.get("John").lastName; // "Doe"

// Deleting an item by a key:
people.delete("John"); 
```

*与使用类似*地图的对象相比，仅此一项就有几个优点，例如：

*   支持非基于字符串的键，例如数字或对象，它们都不支持`Object`（不，`Object`不支持数字，它将它们转换为字符串）
*   不使用时出错的空间更小`--noImplicitAny`，因为 a`Map`始终具有*键*类型和*值*类型，而对象*可能*没有索引签名
*   添加/删除项目（键值对）的功能针对任务进行了优化，这[与在`Object`](https://ariya.io/2012/02/javascript-object-structure-speed-matters)

此外，一个`Map`对象为常见任务提供了一个更强大和优雅的 API，其中大部分在 simple `Object`s 中无法使用，而无需将辅助函数组合在一起（尽管其中一些需要完整的 ES6 迭代器/可迭代的 polyfill 用于 ES5 目标或以下目标）：

```
// Iterate over Map entries:
people.forEach((person, key) => ...);

// Clear the Map:
people.clear();

// Get Map size:
people.size;

// Extract keys into array (in insertion order):
let keys = Array.from(people.keys());

// Extract values into array (in insertion order):
let values = Array.from(people.values()); 
```

* * *

## 回答 #3

> 赞同：83
> 
> 时间：2015-09-26T14:59:33.533

您可以使用这样的模板化接口：

```
interface Map<T> {
    [K: string]: T;
}

let dict: Map<number> = {};
dict["one"] = 1; 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2018-03-26T15:18:22.313

您还可以在 typescript 中使用 Record 类型：

```
export interface nameInterface { 
    propName : Record<string, otherComplexInterface> 
} 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2019-09-30T14:02:34.263

您可以`Record`为此使用：

[https://www.typescriptlang.org/docs/handbook/utility-types.html#recordkt](https://www.typescriptlang.org/docs/handbook/utility-types.html#recordkt)

示例（AppointmentStatus 枚举和一些元数据之间的映射）：

```
 const iconMapping: Record<AppointmentStatus, Icon> = {
    [AppointmentStatus.Failed]: { Name: 'calendar times', Color: 'red' },
    [AppointmentStatus.Canceled]: { Name: 'calendar times outline', Color: 'red' },
    [AppointmentStatus.Confirmed]: { Name: 'calendar check outline', Color: 'green' },
    [AppointmentStatus.Requested]: { Name: 'calendar alternate outline', Color: 'orange' },
    [AppointmentStatus.None]: { Name: 'calendar outline', Color: 'blue' }
  } 
```

现在以接口为值：

`interface Icon { Name: string Color: string }`

用法：

`const icon: SemanticIcon = iconMapping[appointment.Status]`

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2017-10-25T17:20:28.053

Lodash 有一个简单的 Dictionary 实现并且有很好的 TypeScript 支持

安装 Lodash：

```
npm install lodash @types/lodash --save 
```

导入和使用：

```
import { Dictionary } from "lodash";
let properties : Dictionary<string> = {
    "key": "value"        
}
console.log(properties["key"]) 
```

# opencv - OpenCV 中的对象跟踪

> ID：13631558
> 
> 赞同：0
> 
> 时间：2012-11-29T17:41:48.510
> 
> 标签：opencv, tracking

我一直在使用 LK 算法来检测角点和感兴趣的跟踪点。但是，我被困在这一点上，我需要有一个类似矩形框的东西来跟随被跟踪的对象。我现在只有很多点显示我的移动对象。

有什么方法或建议吗？另外，有什么想法可以在窗口中添加计数器，以便我的对象进出屏幕也可以计数吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T20:05:57.100

有[很多](http://opencv.willowgarage.com/documentation/c/motion_analysis_and_object_tracking.html)选择！在 OpenCV 中，我建议使用[CamShift](http://docs.opencv.org/modules/video/doc/motion_analysis_and_object_tracking.html#RotatedRect%20CamShift%28InputArray%20probImage,%20Rect&%20window,%20TermCriteria%20criteria%29)作为起点，因为它相对容易使用。CamShift 使用均值偏移迭代地搜索连续帧中的对象。

请注意，您需要使用某种输入为跟踪器播种。您可以让用户在对象周围绘制一个矩形，或者使用检测器获取初始输入。例如，如果你想跟踪人脸，OpenCV 有一个[级联分类器](http://docs.opencv.org/modules/objdetect/doc/cascade_classification.html#cascadeclassifier)和包含人脸检测器的训练数据。

# php - 回显 json 数据然后休眠

> ID：13631560
> 
> 赞同：2
> 
> 时间：2012-11-29T17:41:54.047
> 
> 标签：php, json

在我的 php 脚本中，我想在运行函数之前将数据输出到浏览器，然后 sleep() 2 秒。下面似乎没有在睡觉前输出json，有人有什么想法吗？

```
if ($_POST['process'] == '1') {
    // adding stuff to $data here
    }

    echo json_encode($data);
    ob_flush();
    flush();
    sleep(2);
    // Do something else
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T17:48:02.287

是的，这就是你的做法。基本上，您关闭连接并将响应返回给用户，而 apache 继续处理文件......

```
ignore_user_abort(true);
header('Content-Type: application/json');
header('Connection: close');
header('Content-Length: ' . strlen($YOUR_JSON_RESPONSE));

echo $YOUR_JSON_RESPONSE;
flush();

sleep(2);
your_cool_function_to_run();
die(); 
```

* * *

非常适合需要立即响应和/或需要很长时间才能实际完成工作的快速 ajax 调用。

我必须警告您谨慎使用这种类型的东西......每次发生这种情况时，都会打开一个新的进程/线程来处理您的其余请求。做太多太快，你会用完进程。（取决于您的设置）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T17:49:13.837

您可以尝试关闭`STDOUT`，向 Web 服务器发出信号，表明您的脚本已完成向 HTTP 客户端发送数据。

```
fclose( STDOUT); 
```

# java - JSON 将数据库解析为字符串

> ID：13631562
> 
> 赞同：0
> 
> 时间：2012-11-29T17:42:11.757
> 
> 标签：java, json

我创建了一个使用 JSON 作为数据库的应用程序，它似乎写得很好，文件阅读器也能很好地读取数据库，但我似乎无法从数据库值中获取数据库值。

这是我的解析代码：

```
 String userEnteredString = UserEntered.getText(); 
    String userHomeLocal = Tutschedule.userHome; 
    Reader dataFile = null; 
    try {
        dataFile = new FileReader(userHomeLocal+"/Users/"+userEnteredString+".data");
    } catch (FileNotFoundException ex) {
        Logger.getLogger(LoginForm.class.getName()).log(Level.SEVERE, null, ex);
    }
    String dbData = dataFile.toString();
    try {
        JSONObject dbObject = new JSONObject(dbData);
    } catch (JSONException ex) {
        Logger.getLogger(LoginForm.class.getName()).log(Level.SEVERE, null, ex);
    }
    System.out.println(dbData); 
    JSONObject dataInfo = new JSONObject(dbData);
    String password = dataInfo.getString("password");
    System.out.println(password); 

    BufferedReader buffered = new BufferedReader(dataFile); 
    String test = null; 
    try { 
        test = buffered.readLine();
    } catch (IOException ex) {
        Logger.getLogger(LoginForm.class.getName()).log(Level.SEVERE, null, ex);
    } 
```

问题是当我打印密码时它不打印任何东西，导致我认为密码字段没有被处理。

这是数据库的示例：

```
{"username":"user","password":"test"} 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T18:00:12.177

我不相信 FileReader.toString() 正在做你认为它正在做的事情。FileReader 从 object 继承 toString，这意味着它只会打印出引用，而不是文件的内容，但您正试图将其解析为 JSON。在这种情况下，您应该有一个严重的日志消息。

为了读取文件的内容，您应该使用`read`阅读器上的方法或让自己轻松并使用 commons-io FileUtils#readFileToString 或类似的东西。

# c# - 从相关表中的另一个属性值分配属性值

> ID：13631571
> 
> 赞同：0
> 
> 时间：2012-11-29T17:42:38.617
> 
> 标签：c#, visual-studio-2010, silverlight, visual-studio-lightswitch

我有一个名为 的表`PRODUCT`，其中`Price`存储了 Product 的 。因为我知道产品的价格可以随时更改，所以我有一个名为 的表`ORDER`，其中包含`Quantity`某人正在订购的产品`TodaysPrice`的价格，以及应该从列`Price`中提取的价格交易完成的时刻。

问题是，我不知道如何提取属性的值并将该值分配给 LightSwitch 中的另一个属性。

* * *

到目前为止，我设法将其包含在`Order_Created()`：

`this.Order.SelectedItem.Price = this.Order.SelectedItem.Product.Price;`

但是上面的代码不起作用，我得到了这个异常：

`NullReferenceException was unhandled by user code`

我不确定这是否正确，任何帮助将不胜感激。我想知道如何使用 Visual Studio 2010 在 LightSwitch 2011 中执行此操作。

提前非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T08:23:46.520

*当SelectedItem*或*Product*当前没有值时，您的代码可能正在运行。在引用实体的任何属性之前，您应该始终检查 null。

像这样（注意在引用该实体的任何属性之前如何检查每个实体：

```
if (this.Order != null) 
    && (this.Order.SelectedItem != null) 
    && (this.Order.SelectedItem.Product != null)
{
    this.Order.SelectedItem.Price = this.Order.SelectedItem.Product.Price;
} 
```

*Order_Created* 方法不是拥有此代码的正确位置，因为在创建*订单*时，您还不知道要*选择*哪个产品。The correct place to put this code is in the *Product_Changed* method, so that when the *Product* is selected (or changed), the *Product* 's current price then gets enetered in the *Order* .

另外一点，除非您为示例简化了表格，否则我认为您缺少表格。*订单*通常会有关联的Customer *、* Date*等*内容。它还会有*OrderLines*（或类似名称）的集合*。OrderLine*应该有产品/数量/价格详细信息，而不是*订单*本身。

# ruby-on-rails - 使用 resque 运行的同一个 worker 在 heroku 上运行多个 rails 任务

> ID：13631574
> 
> 赞同：1
> 
> 时间：2012-11-29T17:42:41.710
> 
> 标签：ruby-on-rails, heroku, amazon-web-services, resque, amazon-sqs

使用下面的命令，我启动了一个运行[resque的工作人员](https://github.com/defunkt/resque)

```
heroku ps:scale worker=1 
```

**但我想知道：**既然我将支付整个工人的费用只是为了运行 resque，为什么不能运行多个正在运行的任务？

例如：我需要轮询一个 AWS SQS，而让另一个工作人员参与这个轮询会很浪费。

然后我尝试输入：Resque，AWS_QUEUE 来监听转换后的文件。但是 Heroku 使工人崩溃。

```
=== worker: `bundle exec rake worker:all`
worker.1: crashed for 2m 
```

**档案**

```
web: bundle exec unicorn -p $PORT -c ./config/unicorn.rb
worker: bundle exec rake worker:all 
```

**工人.rake**

```
namespace :worker do
   task :all => [:environment, "sqs:listen_converted", "resque:work"] do
     puts "All workers started"
   end
end 
```

**sqs.rake**

```
task "sqs:listen_converted" => :environment do

   puts "Start to listen converted..."

   Thread.new do
      queue = AWS::SQS::Queue.new(SQSADDR['incoming'])
      queue.poll do |msg|
      ...
   end
end 
```

可以做到吗？谢谢！！

# php - 使用 PHP 将 HTML 转换为显示链接 URL

> ID：13631575
> 
> 赞同：-1
> 
> 时间：2012-11-29T17:42:42.067
> 
> 标签：php, regex, html-parsing

是否可以使用 PHP 将第一个文本块转换为第二个文本块？如果是这样，怎么做？谢谢

```
<div>
 <p>Some text & a <a href="http://abc.com/index.php?x=123&y=abc">link</a>. Done</p>
 <p>More text & a <a href="http://abc.com/index.php?x=123&y=abc">link</a>. Done</p>
</div>

<div>
 <p>Some text & a <strong>link</strong> <i>(http://abc.com/index.php?x=123&y=abc)</i>. Done</p>
 <p>More text & a <strong>link</strong> <i>(http://abc.com/index.php?x=123&y=abc)</i>. Done</p>
</div> 
```

编辑。根据安迪的建议，查看类似以下内容。仍在为链接转换而苦苦挣扎，但这看起来是一个好的开始。

```
libxml_use_internal_errors(true);   //Temporarily disable errors resulting from improperly formed HTML
$doc = new DOMDocument();
$doc->loadHTML($array['message_text']);
$a = $doc->getElementsByTagName('a');
foreach ($a as $link)
{
    //Where do I go from here?
}
$array['message_text'] = $doc->saveHTML();
libxml_use_internal_errors(false); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T18:07:54.210

首先，您的 HTML 格式不正确，`&`需要将其编码为 HTML entity `&amp;`。解决这个问题给我们：

```
$html = '<div>
 <p>Some text &amp; a <a href="http://abc.com/index.php?x=123&amp;y=abc">link</a>. Done</p>
 <p>More text &amp; a <a href="http://abc.com/index.php?x=123&amp;y=abc">link</a>. Done</p>
</div>'; 
```

从这里开始，您不应该使用正则表达式。它非常脆弱，不适合解析 HTML。相反，您可以使用 PHP 的[`DOMDocument`](http://php.net/domdocument)类来解析 HTML，提取`<a>`标签，从中提取您想要的信息，创建新的 HTML 元素，并将它们插入到适当的位置。

```
$doc = new DOMDocument;
$doc->loadHTML( $html);

$xpath = new DOMXPath($doc);
foreach( $xpath->query( '//a') as $a) {
    $strong = $doc->createElement( 'strong', $a->textContent);
    $i = $doc->createElement( 'i', htmlentities( $a->getAttribute('href')));
    $a->parentNode->insertBefore( $strong, $a);
    $a->parentNode->insertBefore( $i, $a);
    $a->parentNode->removeChild( $a);
} 
```

这[打印](http://viper-7.com/OZb5AQ)：

```
<p>Some text &amp; a <strong>link</strong><i>http://abc.com/index.php?x=123&amp;y=abc</i>. Done</p> 
<p>More text &amp; a <strong>link</strong><i>http://abc.com/index.php?x=123&amp;y=abc</i>. Done</p> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-29T17:53:46.550

您将需要使用正则表达式。

```
$newHtml = preg_replace(/<a[\s\w"'=\t\n]*href="(.*?)"[\s\w"'=\t\n]*>(.*?)<\/a>/i, "<strong>${2}</strong> <i>${1}</i>", $html); 
```

你可以在[这里看到正则表达式](http://rubular.com/r/DKx2AUoaAZ)

# javascript - 通过 ajax 上传图片时遇到问题

> ID：13631580
> 
> 赞同：0
> 
> 时间：2012-11-29T17:42:50.410
> 
> 标签：javascript, jquery, ajax

如果标题描述性不够，请见谅！

这个想法是有一个 div 弹出窗口并允许用户输入他们的反馈并可能提交屏幕截图。

这是页面内的 javascript（通过 ajax 调用到 div 中）。

## Javascript

```
$("#submitFeedback").click(function(){
  //Check if the form is valid
  if($("#form").valid()){
    $("#form").hide(); //Hide the form
    $("#feedbackReport").append("<h2 style='color:white'>Submitting!</h2><hr />" +
      "<div style='text-align: center'><img src='images/loader.gif' /></div>");//Display loading spinner
    $.ajax({  
      type: "POST",  
      url: "ajax/submit_feedback.php",
      cache: false,
      data: $("#form").serialize(),//serialize form for submission
      success: function(data) {
        $("#feedbackReport").empty();//Clear form after submission
        $("#feedbackReport").append("<h2>Thank you!</h2><span id='close'>&#10006;</span><hr />"
          +"Your feedback has been submitted successfully!"
          +"<br /><br /><span id='cancel'>Close</span>");
        $("#cancel,#close").click(function(){
          $("#feedbackReport").parent().hide();
        });
      }
    });
    return false;//Prevent page from changing
  }
}); 
```

现在，如果将我的浏览器指向实际的 ajax 页面 (ajax/feedback.php) 并提交图像，它就可以正常工作了！当我从 index.php 运行它并通过 ajax 调用反馈窗口时，它不会提交我的图片，只有文本。

我知道我的 submit_feedback.php 页面因此工作正常，我只是不知道为什么它不能正确发布图像。

任何提示或帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T17:44:06.683

Ajax 不能进行文件上传。您必须使用不同的东西，例如[https://github.com/valums/file-uploader](https://github.com/valums/file-uploader)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-29T17:48:48.027

Ajax 不允许文件上传，但巧妙的技巧是使用 iframe 保存文件上传表单并在选择文件时自动提交。

这样，只有 iframe 被重定向，它给人一种 ajax 的感觉。

[在这里阅读更多](http://www.alfajango.com/blog/ajax-file-uploads-with-the-iframe-method/)

# google-apps-script - 如何使用 Google 电子表格中的 ImportRange 函数强制重新计算单元格？

> ID：13631584
> 
> 赞同：5
> 
> 时间：2012-11-29T17:42:55.860
> 
> 标签：google-apps-script, google-sheets, google-sheets-formula, importrange

我有一个电子表格目标，它使用 ImportRange 从另一个电子表格源获取一些数据，如

```
A6 = query(ImportRange("mykey", "Weekly!B:BI"), CONCATENATE("select * WHERE Col1='",B3,"'"), 0) 
```

select 子句是子选择与 B3 中的值匹配的数据 - 如果此单元格值发生更改，则“立即”更新导入。

如果有人更改源电子表格中的某些内容，我希望能够强制更新，以便我们“立即”看到它反映在目标中。目前，这只发生在“某个未指定的时间之后”，最多一分钟左右，对于我的目的来说太慢了。

更新：

根据下面的答案和评论，我在 Source 中添加了一个函数 UpdateTarget，该函数从编辑触发器 * 调用：

```
function UpdateTarget() {
  try {
    var ss = SpreadsheetApp.openById("targetID");
  }
  catch(err)
  {
    Browser.msgBox(err);
  }
  var sheet = ss.getSheetByName("Weekly");
  sheet.getRange("A4").setValue("=query(ImportRange("sourceID", "Weekly!B:BI"), CONCATENATE("select * WHERE Col1='",B3,"'"), 0) ");
  SpreadsheetApp.flush();
} 
```

这似乎更有效，但如果我沿着这条路线走，我也可以有一个脚本将更新的值直接写入目标。

我真的希望目标成为其他用户可以复制的模板，并且可以从主源中提取特定的“实时”数据，我不愿意在源中实现需要在添加新目标时维护的脚本。

我认为我真正需要的是一种重新陈述公式的方法，使其依赖于可以编辑的单元格并触发重新计算 - 但对结果没有影响？

（*旁白：我发现 openByID 函数返回“不允许操作”异常，除非它通过显式触发器调用 - 禁止 onEdit 编辑其他电子表格 -请参阅[https://developers.google.com/apps-script/understanding_triggers](https://developers.google.com/apps-script/understanding_triggers)）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T18:25:28.150

当用户打开电子表格或更改影响公式的单元格（在同一电子表格中）时，将重新计算公式。

由于您使用的是两个不同的电子表格，因此后一种情况不适用。

您从哪个电子表格调用 flush() 函数。我假设它在目标电子表格中。这将毫无用处。

一种解决方案是在源电子表格中编写一个脚本，该脚本将在每次编辑源时修改目标电子表格

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-30T19:31:04.053

## 通过恢复单元格公式强制重新计算 importrange

***必需的：***

导入的数据 - 将所有内容复制到的目标。

导入的数据配置 - 具有以下字段：

```
+----------------------------------------------------------+--- ---------------------------------------------+
| 一个 | 乙|
+----------------------------------------------------------+--- ---------------------------------------------+
| 使用以下键从电子表格导入数据：| 关键 |
| 从范围之间的电子表格导入数据：| 答：AA |
| 导入的数据选择列：| 选择 * |
| 导入数据标准：| 其中 Col15 包含“提供”|
| 导入的数据应按列排序：| 由 Col1 订购 |
+----------------------------------------------------------+--- ---------------------------------------------+

```

***脚本：***

```
function onOpen() {
try {
var ss = SpreadsheetApp.getActiveSpreadsheet();
}
catch(err)
{
Browser.msgBox(err);
}

var configsheet = ss.getSheetByName("Imported Data Config");

var configkey = configsheet.getRange("B1").getValue();
var configrange = configsheet.getRange("B2").getValue();
var configselect = configsheet.getRange("B3").getValue();
var configwhere = configsheet.getRange("B4").getValue();
var configorderby = configsheet.getRange("B5").getValue();

var importedsheet = ss.getSheetByName("Imported Data");
importedsheet.getRange("A1").setValue('=QUERY(IMPORTRANGE("' + configkey + '","' + configrange + '"),"' + configselect + ' ' + configwhere + ' ' + configorderby + '")');

SpreadsheetApp.flush();

// Solution of sourcecode is: http://stackoverflow.com/questions/13631584/how-can-i-force-a-recalculation-of-cell-using-importrange-function-in-a-google-s
// OnOpen Trigger: https://developers.google.com/apps-script/understanding_triggers
// Active Spreadsheet solution: https://productforums.google.com/forum/#!topic/docs/XIY0WNX0uL8

Browser.msgBox("Sync Complete!");
} 
```

这使您可以在不编辑脚本的情况下更改公式，并且可以更轻松地跨不同工作表传输脚本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-09T04:09:43.553

我也有这个问题。我只需要导入一个固定位置的单元格。

我为自己解决这个问题所做的是使用在目标表上触发 onEdit 的以下函数。

```
function Refresh() {
  var ss = SpreadsheetApp.openById('*yourtargetsheetID*');
  var sheet = ss.getSheetByName('*yourtargetsheetname*');
  sheet.getRange('*locationofyourimportrangeformula*').setFormula('*yourimportrangeformula*');
} 
```

# c#-4.0 - ValidationResult 和 ViewModel

> ID：13631594
> 
> 赞同：2
> 
> 时间：2012-11-29T17:43:29.233
> 
> 标签：c#-4.0, asp.net-mvc-4, entity-framework-5

我最近创建了一个使用 MVC4 和 EF5 的新应用程序。表已经存在，所以我们首先使用数据库。这对我来说是全新的，这是我第一次接触 MVC 或 EF。

我的 EMDX 文件中有一些模型，其中一个模型继承了 IValidatableObject 并将一些代码放入 Validate 函数中。这工作正常，然后我将视图更改为使用 ViewModel，现在我从验证中收到错误，我很难过。它仍在调用我的验证功能，但不再将其发布回屏幕，我只是得到一个黄色屏幕。

错误：

```
Validation failed for one or more entities. See 'EntityValidationErrors' property for more details. 
```

模型：

```
public partial class Names : IValidatableObject {
  public int Id { get; set; }
  public string Name { get; set; }
  public bool Active { get; set; }

  public IEnumerable<ValidationResult> Validate(ValidationContext validationContext) {
    // some logic, this works
  }
} 
```

视图模型：

```
public class NamesVM {
  public Names Name { get; set; }
  // some other stuff in this model, but not part of this problem
} 
```

控制器：编辑功能：

```
[HttpPost]
public ActionResult Edit(NamesVM nvm) {

  if (ModelState.IsValid) {
    dbCommon.Entry(nvm.Name).State = EntityState.Modified;
    dbCommon.SaveChanges();
    return RedirectToAction("Index");
  }

  return View(nvm);
} 
```

看法：

```
@model NamesVM
<div class="editor-label">
  @Html.LabelFor(model => model.Name.Id)
</div>
<div class="editor-field">
  @Html.EditorFor(model => model.Name.Id)
  @Html.ValidationMessageFor(model => model.Name.Id)
</div>

<div class="editor-label">
  @Html.LabelFor(model => model.Name.Name)
</div>
<div class="editor-field">
  @Html.EditorFor(model => model.Name.Name)
  @Html.ValidationMessageFor(model => model.Name.Name)
</div>

<div class="editor-label">
  @Html.LabelFor(model => model.Name.Active)
</div>
<div class="editor-field">
  @Html.EditorFor(model => model.Name.Active)
  @Html.ValidationMessageFor(model => model.Name.Active)
</div>
<input type="submit" value="Save" /> 
```

如果屏幕上的一切都正确，则代码可以正常工作，但是当验证失败时，我没有收到一个很好的错误，我得到一个黄色屏幕。我确定我错过了一些东西，我只是不知道是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T13:54:16.133

终于解决了。IValidatableObject 需要移动到 ViewModel，以及它的逻辑。

模型

```
public partial class Names { //: IValidatableObject { //Remove the IValidateableObject from here
    public int Id { get; set; }
    public string Name { get; set; }
    public bool Active { get; set; }

    // this whole method can be commented out
    //public IEnumerable<ValidationResult> Validate(ValidationContext validationContext) {
        // some logic, this works
    //}
} 
```

查看模型

```
public class NamesVM : IValidatableObject { // add the IValidatableObject to your view model
    public Names Name { get; set; }
        // some other stuff in this model, but not part of this problem

    // and move your validation logic to here
    public IEnumerable<ValidationResult> Validate(ValidationContext validationContext) {
        // some logic, this works
    }
} 
```

# jquery - mouseleave 和 mouseout 都过于频繁地触发

> ID：13631598
> 
> 赞同：4
> 
> 时间：2012-11-29T17:43:49.087
> 
> 标签：jquery, triggers, d3.js, mouseout, mouseleave

这里相对较新的编码器。我正在使用 D3 和 jquery 创建一个跳跃效果，当光标移动到一个 svg 圆圈上时触发。

圆的示例如下所示：

```
<circle cx="20.61855670103093" cy="730" class="top1000 Ragtime albumDot" id="0" r="5.5"></circle> 
```

影响圆圈的 CSS 是这样的：

```
.albumDot {
  fill: #fff;
  z-index: 250;
  cursor: pointer; /*-- Does not work 90% of the time --*/
  stroke: #111;
  stroke-width: 3px;
  opacity: 1;
} 
```

处理悬停的代码如下所示：

```
$('.albumDot').mouseenter(function() {
   console.log("mouseover"+ this.id); 
   hopup(jazzdata[this.id]);      
});
$(".albumDot").mouseleave( function() {
   console.log("mouseout"); 
   d3.select("#hopup").attr("style","display:none; opacity:0;");
} 
```

悬停功能工作得很好，但是当我将鼠标移动到这些 svg 形状中的任何一个上时，mouseenter 和 mouseleave 会一遍又一遍地触发。我没有离开这个形状，只是在它里面移动。

以前，我一直在使用 mouseover 和 mouseoff，但我遇到了同样的问题。圆圈没有子元素。

这发生在 Mac 上的 Safari 和 Chrome 中。

编辑：这是 Dropbox 上的一个**活生生的例子**。

[http://dl.dropbox.com/u/2272508/jazz_history/index.html](http://dl.dropbox.com/u/2272508/jazz_history/index.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T18:54:15.517

在 DOM 中，您有一个元素`<svg id="HopupTriangle">`，它似乎没有被使用。跳跃一出现，这个元素就会出现在点的顶部，它会从鼠标中窃取焦点。简单地给它`display:none`解决问题。因此，如果您不需要它，请摆脱它。

如果你确实需要它——我猜你打算在里面放一个箭头——你需要确保它永远不会与点重叠。首先给这个元素一个a `background-color:#f00`，这样你就可以清楚地看到它的位置，然后调整它的高度一个位置。

最后，如果此元素*必须*与点重叠，则为其添加一个 CSS 属性`pointer-events:none`，这将导致浏览器忽略其鼠标事件。不幸的是，这个属性在 IE 中不起作用，并且 AFAIK 没有简单的解决方法来解决这个问题——除了通过始终为 IE 浏览器隐藏这个元素来优雅地降级。

# asp.net - 无法加载文件或程序集“EPiServer.Framework”

> ID：13631616
> 
> 赞同：1
> 
> 时间：2012-11-29T17:44:46.557
> 
> 标签：asp.net, iis, upgrade, episerver

我在配置 EPi CMS 5 以在 IIS7.5 下运行时遇到此异常。

> 异常详细信息：System.IO.FileNotFoundException：无法加载文件或程序集“EPiServer.Framework”或其依赖项之一。
> 
> 源错误：在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。程序集加载跟踪：以下信息有助于确定无法加载程序集“EPiServer.Framework”的原因。
> 
> ```
>  WRN: Assembly binding logging is turned OFF. To enable assembly bind failure logging, set the registry value 
> ```
> 
> [HKLM\Software\Microsoft\Fusion!EnableLog] (DWORD) 为 1。注意：与程序集绑定失败日志记录相关的一些性能损失。要关闭此功能，请删除注册表值 [HKLM\Software\Microsoft\Fusion!EnableLog]。堆栈跟踪：
> 
> ```
>  [FileNotFoundException: Could not load file or assembly 'EPiServer.Framework' or one of its dependencies. Det går inte att 
> ```
> 
> 命中文件。] System.RuntimeTypeHandle.GetTypeByName（字符串名称，布尔 throwOnError，布尔 ignoreCase，布尔反射仅，StackCrawlMarkHandle stackMark，布尔 loadTypeFromPartialName，ObjectHandleOnStack 类型）+0
> System.RuntimeTypeHandle.GetTypeByName（字符串名称，布尔 throwOnError，布尔 ignoreCase，布尔反射, StackCrawlMark& stackMark, Boolean loadTypeFromPartialName) +95
> System.RuntimeType.GetType(String typeName, Boolean throwOnError, Boolean ignoreCase, Boolean reflectOnly, StackCrawlMark& stackMark) +54 System.Type.GetType(String typeName, Boolean throwOnError, Boolean ignoreCase) +65
> System .Web.Compilation.BuildManager.GetType(String typeName, Boolean throwOnError, Boolean ignoreCase) +69
> System.Web.Configuration.ConfigUtil.GetType(String typeName, String propertyName, ConfigurationElement configElement, XmlNode node, Boolean checkAptcaBit, Boolean ignoreCase) +52 [ConfigurationErrorsException: 无法加载文件或程序集“EPiServer.Framework”或其依赖项之一。Det går inte att hitta filen.] System.Web.Configuration.ConfigUtil.GetType(String typeName, String propertyName, ConfigurationElement configElement, XmlNode node, Boolean checkAptcaBit, Boolean ignoreCase) +360
> System.Web.Configuration.ConfigUtil.GetType(String typeName , String propertyName, ConfigurationElement configElement, Boolean checkAptcaBit) +27
> System.Web.Configuration.Common.ModulesEntry.SecureGetType(String typeName, String propertyName, ConfigurationElement configElement) +44 System.Web.Configuration.Common.ModulesEntry..ctor(String name, String typeName, String propertyName, ConfigurationElement configElement) +52 System.Web.HttpApplication.BuildIntegratedModuleCollection(List`1 moduleList) +200
> System.Web.HttpApplication.GetModuleCollection(IntPtr appContext) +1365 System.Web.HttpApplication.RegisterEventSubscriptionsWithIIS(IntPtr appContext, HttpContext context, MethodInfo[] handlers) +95
> System .Web.HttpApplication.InitSpecial（HttpApplicationState 状态，MethodInfo[] 处理程序，IntPtr appContext，HttpContext 上下文）+194
> System.Web.HttpApplicationFactory.GetSpecialApplicationInstance(IntPtr appContext, HttpContext context) +339
> System.Web.Hosting.PipelineRuntime.InitializeApplication(IntPtr appContext) +253 [HttpException (0x80004005): 无法加载文件或程序集“EPiServer.Framework”或一个其依赖项。详细信息。] System.Web.HttpRuntime.FirstRequestInit(HttpContext context) +9080108
> System.Web.HttpRuntime.EnsureFirstRequestInit(HttpContext context) +97 System.Web.HttpRuntime.ProcessRequestNotificationPrivate(IIS7WorkerRequest wr, HttpContext context) +256

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T08:09:40.783

检查应用程序的 /Bin 文件夹并查看 EPiServer.Framework DLL 是否存在。如果不是，您可以通过右键单击解决方案资源管理器中的“引用”文件夹中的 DLL 并选择“属性”将 DLL 设置为“复制本地”，然后将“复制本地”设置为“真”。现在，当您构建解决方案时，DLL 将从它的参考位置复制到 Bin 文件夹中。您可能需要对所有 EPiServer DLL 执行此操作。

我过去曾遇到过这种情况，即使启用了“特定版本”，加载正确的 DLL 仍然存在问题。我们解决它的一种方法是将所有 EPiServer DLL 复制到我们解决方案目录中的 Lib 文件夹中，并添加对这些 DLL 的引用，保持特定版本和复制本地设置为 true。

# tomcat - logbback 在启动时在 Tomcat 控制台上生成太多日志

> ID：13631622
> 
> 赞同：3
> 
> 时间：2012-11-29T17:45:13.830
> 
> 标签：tomcat, logback

将 logback.xml 放入我的网络应用程序的 src/main/resources/ 文件夹时，它工作正常。

但是，当在 web.xml 中使用[LogbackConfigListener](https://github.com/qos-ch/logback-extensions/tree/master/spring/src/main/java/ch/qos/logback/ext/spring/web)（如此[处](https://stackoverflow.com/questions/13577889/log4jconfiglistener-for-logback-in-spring-mvc-application/13578156#13578156)所述）来配置 logback.xml 文件的位置时。日志文件生成成功。

但是，另外有太多的调试日志消息出现在 tomcat 服务器的控制台上。它延迟了tomcat服务器的启动时间。这些 DEBUG 消息是 Hibernate 等 3rd 方库文件的一部分。

logback.xml 文件：

```
<configuration>

<!-- Appenders -->
<appender name="util" class="ch.qos.logback.core.FileAppender">
    <File>${demo.root}/WEB-INF/app.log</File>
    <Append>true</Append>
    <encoder>
        <pattern>%t %-5p %c{2} - %m%n</pattern>
    </encoder>
</appender>

<logger name="org.springframework" level="info" />

<root level="info">
    <appender-ref ref="util" />
</root>

</configuration> 
```

日志跟踪太大。我从 tomcat 服务器的启动窗口中复制了其中的一部分：

```
00:42:09.422 [pool-2-thread-1] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Fini
shed creating instance of bean '(inner bean)#45'
00:42:09.432 [pool-2-thread-1] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Eage
rly caching bean 'org.springframework.security.access.vote.AffirmativeBased#0' t
o allow for resolving potential circular references
00:42:09.452 [pool-2-thread-1] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Invo
king afterPropertiesSet() on bean with name 'org.springframework.security.access
.vote.AffirmativeBased#0'
00:42:09.459 [pool-2-thread-1] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Fini
shed creating instance of bean 'org.springframework.security.access.vote.Affirma
tiveBased#0'
00:42:09.468 [pool-2-thread-1] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Retu
rning cached instance of singleton bean 'org.springframework.security.authentica
tion.ProviderManager#0'
00:42:09.476 [pool-2-thread-1] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Crea
ting instance of bean '(inner bean)#46'
00:42:09.483 [pool-2-thread-1] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Crea
ting instance of bean '(inner bean)#46'
00:42:09.489 [pool-2-thread-1] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Fini
shed creating instance of bean '(inner bean)#46'
00:42:09.499 [pool-2-thread-1] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Crea
ting instance of bean '(inner bean)#47'
00:42:09.520 [pool-2-thread-1] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Fini
shed creating instance of bean '(inner bean)#47'
00:42:09.525 [pool-2-thread-1] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Retu
rning cached instance of singleton bean 'org.springframework.security.web.access
.expression.DefaultWebSecurityExpressionHandler#0'
00:42:09.536 [pool-2-thread-1] DEBUG o.s.s.w.a.e.ExpressionBasedFilterInvocation
SecurityMetadataSource - Adding web access control expression 'hasRole('ROLE_ADM
IN')', for Ant [pattern='/admin.htm']
00:42:09.633 [pool-2-thread-1] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Fini
shed creating instance of bean '(inner bean)#46'
00:42:09.638 [pool-2-thread-1] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Invo
king afterPropertiesSet() on bean with name 'org.springframework.security.web.ac
cess.intercept.FilterSecurityInterceptor#0'
00:42:09.646 [pool-2-thread-1] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Val
idated configuration attributes
00:42:09.651 [pool-2-thread-1] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Fini
shed creating instance of bean 'org.springframework.security.web.access.intercep
t.FilterSecurityInterceptor#0'
00:42:09.660 [pool-2-thread-1] DEBUG o.s.core.env.StandardEnvironment - Initiali
zing new StandardEnvironment
00:42:09.665 [pool-2-thread-1] DEBUG o.s.core.env.StandardEnvironment - Adding [
systemProperties] PropertySource with lowest search precedence
00:42:09.670 [pool-2-thread-1] DEBUG o.s.core.env.StandardEnvironment - Adding [
systemEnvironment] PropertySource with lowest search precedence
00:42:09.675 [pool-2-thread-1] DEBUG o.s.core.env.StandardEnvironment - Initiali
zed StandardEnvironment with PropertySources [systemProperties,systemEnvironment
]
00:42:09.684 [pool-2-thread-1] DEBUG o.s.core.env.StandardEnvironment - Initiali
zing new StandardEnvironment
00:42:09.689 [pool-2-thread-1] DEBUG o.s.core.env.StandardEnvironment - Adding [
systemProperties] PropertySource with lowest search precedence
00:42:09.694 [pool-2-thread-1] DEBUG o.s.core.env.StandardEnvironment - Adding [
systemEnvironment] PropertySource with lowest search precedence
00:42:09.699 [pool-2-thread-1] DEBUG o.s.core.env.StandardEnvironment - Initiali
zed StandardEnvironment with PropertySources [systemProperties,systemEnvironment
]
00:42:09.708 [pool-2-thread-1] DEBUG o.s.core.env.StandardEnvironment - Initiali
zing new StandardEnvironment
00:42:09.713 [pool-2-thread-1] DEBUG o.s.core.env.StandardEnvironment - Adding [
systemProperties] PropertySource with lowest search precedence
00:42:09.718 [pool-2-thread-1] DEBUG o.s.core.env.StandardEnvironment - Adding [
systemEnvironment] PropertySource with lowest search precedence
00:42:09.723 [pool-2-thread-1] DEBUG o.s.core.env.StandardEnvironment - Initiali
zed StandardEnvironment with PropertySources [systemProperties,systemEnvironment
]
00:42:09.732 [pool-2-thread-1] DEBUG o.s.core.env.StandardEnvironment - Initiali
zing new StandardEnvironment
00:42:09.737 [pool-2-thread-1] DEBUG o.s.core.env.StandardEnvironment - Adding [
systemProperties] PropertySource with lowest search precedence
00:42:09.741 [pool-2-thread-1] DEBUG o.s.core.env.StandardEnvironment - Adding [
systemEnvironment] PropertySource with lowest search precedence
00:42:09.747 [pool-2-thread-1] DEBUG o.s.core.env.StandardEnvironment - Initiali
zed StandardEnvironment with PropertySources [systemProperties,systemEnvironment
]
00:42:09.755 [pool-2-thread-1] DEBUG o.s.core.env.StandardEnvironment - Initiali
zing new StandardEnvironment
00:42:09.761 [pool-2-thread-1] DEBUG o.s.core.env.StandardEnvironment - Adding [
systemProperties] PropertySource with lowest search precedence
00:42:09.765 [pool-2-thread-1] DEBUG o.s.core.env.StandardEnvironment - Adding [
systemEnvironment] PropertySource with lowest search precedence
00:42:09.773 [pool-2-thread-1] DEBUG o.s.core.env.StandardEnvironment - Initiali
zed StandardEnvironment with PropertySources [systemProperties,systemEnvironment
]
00:42:09.782 [pool-2-thread-1] INFO  o.s.s.web.DefaultSecurityFilterChain - Crea
ting filter chain: org.springframework.security.web.util.AnyRequestMatcher@1, [o
rg.springframework.security.web.context.SecurityContextPersistenceFilter@fd9b4d,
 org.springframework.security.web.authentication.logout.LogoutFilter@1dee0d7, or
g.springframework.security.web.authentication.UsernamePasswordAuthenticationFilt
er@17b650a, org.springframework.security.web.authentication.www.BasicAuthenticat
ionFilter@267b76, org.springframework.security.web.savedrequest.RequestCacheAwar
eFilter@73b879, org.springframework.security.web.servletapi.SecurityContextHolde
rAwareRequestFilter@1542094, org.springframework.security.web.authentication.rem
emberme.RememberMeAuthenticationFilter@26db62, org.springframework.security.web.
authentication.AnonymousAuthenticationFilter@10d0630, org.springframework.securi
ty.web.session.SessionManagementFilter@114629, org.springframework.security.web.
access.ExceptionTranslationFilter@154145, org.springframework.security.web.acces
s.intercept.FilterSecurityInterceptor@17035c6]
00:42:09.817 [pool-2-thread-1] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Eage
rly caching bean 'org.springframework.security.web.DefaultSecurityFilterChain#1'
 to allow for resolving potential circular references
00:42:09.826 [pool-2-thread-1] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Fini
shed creating instance of bean 'org.springframework.security.web.DefaultSecurity
FilterChain#1'
00:42:09.834 [pool-2-thread-1] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Invo
king afterPropertiesSet() on bean with name 'org.springframework.security.filter
Chains'
00:42:09.844 [pool-2-thread-1] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Fini
shed creating instance of bean 'org.springframework.security.filterChains'
00:42:09.851 [pool-2-thread-1] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Crea
ting shared instance of singleton bean 'org.springframework.security.filterChain
Proxy'
00:42:09.859 [pool-2-thread-1] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Crea
ting instance of bean 'org.springframework.security.filterChainProxy'
00:42:09.864 [pool-2-thread-1] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Retu
rning cached instance of singleton bean 'org.springframework.security.filterChai
ns'
00:42:09.874 [pool-2-thread-1] DEBUG o.s.core.env.StandardEnvironment - Initiali
zing new StandardEnvironment
00:42:09.879 [pool-2-thread-1] DEBUG o.s.core.env.StandardEnvironment - Adding [
systemProperties] PropertySource with lowest search precedence
00:42:09.885 [pool-2-thread-1] DEBUG o.s.core.env.StandardEnvironment - Adding [
systemEnvironment] PropertySource with lowest search precedence
00:42:09.890 [pool-2-thread-1] DEBUG o.s.core.env.StandardEnvironment - Initiali
zed StandardEnvironment with PropertySources [systemProperties,systemEnvironment
]
00:42:09.897 [pool-2-thread-1] DEBUG o.s.core.env.StandardEnvironment - Initiali
zing new StandardEnvironment
00:42:09.902 [pool-2-thread-1] DEBUG o.s.core.env.StandardEnvironment - Adding [
systemProperties] PropertySource with lowest search precedence
00:42:09.908 [pool-2-thread-1] DEBUG o.s.core.env.StandardEnvironment - Adding [
systemEnvironment] PropertySource with lowest search precedence
00:42:09.913 [pool-2-thread-1] DEBUG o.s.core.env.StandardEnvironment - Initiali
zed StandardEnvironment with PropertySources [systemProperties,systemEnvironment
]
00:42:09.921 [pool-2-thread-1] DEBUG o.s.core.env.StandardEnvironment - Initiali
zing new StandardEnvironment
00:42:09.926 [pool-2-thread-1] DEBUG o.s.core.env.StandardEnvironment - Adding [
systemProperties] PropertySource with lowest search precedence
00:42:09.931 [pool-2-thread-1] DEBUG o.s.core.env.StandardEnvironment - Adding [
systemEnvironment] PropertySource with lowest search precedence
00:42:09.937 [pool-2-thread-1] DEBUG o.s.core.env.StandardEnvironment - Initiali
zed StandardEnvironment with PropertySources [systemProperties,systemEnvironment
]
00:42:09.950 [pool-2-thread-1] DEBUG o.s.core.env.StandardEnvironment - Initiali
zing new StandardEnvironment
00:42:09.957 [pool-2-thread-1] DEBUG o.s.core.env.StandardEnvironment - Adding [
systemProperties] PropertySource with lowest search precedence
00:42:09.961 [pool-2-thread-1] DEBUG o.s.core.env.StandardEnvironment - Adding [
systemEnvironment] PropertySource with lowest search precedence
00:42:09.965 [pool-2-thread-1] DEBUG o.s.core.env.StandardEnvironment - Initiali
zed StandardEnvironment with PropertySources [systemProperties,systemEnvironment
]
00:42:09.973 [pool-2-thread-1] DEBUG o.s.core.env.StandardEnvironment - Initiali
zing new StandardEnvironment
00:42:09.978 [pool-2-thread-1] DEBUG o.s.core.env.StandardEnvironment - Adding [
systemProperties] PropertySource with lowest search precedence
00:42:09.984 [pool-2-thread-1] DEBUG o.s.core.env.StandardEnvironment - Adding [
systemEnvironment] PropertySource with lowest search precedence
00:42:09.988 [pool-2-thread-1] DEBUG o.s.core.env.StandardEnvironment - Initiali
zed StandardEnvironment with PropertySources [systemProperties,systemEnvironment
]
00:42:10.001 [pool-2-thread-1] DEBUG org.springframework.beans.BeanUtils - No pr
operty editor [org.springframework.security.web.SecurityFilterChainEditor] found
 for type org.springframework.security.web.SecurityFilterChain according to 'Edi
tor' suffix convention
00:42:10.017 [pool-2-thread-1] DEBUG o.s.w.c.s.StandardServletEnvironment - Init
ializing new StandardServletEnvironment
00:42:10.021 [pool-2-thread-1] DEBUG o.s.w.c.s.StandardServletEnvironment - Addi
ng [servletConfigInitParams] PropertySource with lowest search precedence
00:42:10.026 [pool-2-thread-1] DEBUG o.s.w.c.s.StandardServletEnvironment - Addi
ng [servletContextInitParams] PropertySource with lowest search precedence
00:42:10.032 [pool-2-thread-1] DEBUG o.s.w.c.s.StandardServletEnvironment - Addi
ng [jndiProperties] PropertySource with lowest search precedence
00:42:10.038 [pool-2-thread-1] DEBUG o.s.w.c.s.StandardServletEnvironment - Addi
ng [systemProperties] PropertySource with lowest search precedence
00:42:10.044 [pool-2-thread-1] DEBUG o.s.w.c.s.StandardServletEnvironment - Addi
ng [systemEnvironment] PropertySource with lowest search precedence
00:42:10.049 [pool-2-thread-1] DEBUG o.s.w.c.s.StandardServletEnvironment - Init
ialized StandardServletEnvironment with PropertySources [servletConfigInitParams
,servletContextInitParams,jndiProperties,systemProperties,systemEnvironment]
00:42:10.095 [pool-2-thread-1] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Eage
rly caching bean 'org.springframework.security.filterChainProxy' to allow for re
solving potential circular references
00:42:10.110 [pool-2-thread-1] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Crea
ting instance of bean '(inner bean)#48'
00:42:10.118 [pool-2-thread-1] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Fini
shed creating instance of bean '(inner bean)#48'
00:42:10.123 [pool-2-thread-1] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Invo
king afterPropertiesSet() on bean with name 'org.springframework.security.filter
ChainProxy'
00:42:10.133 [pool-2-thread-1] INFO  o.s.s.c.h.DefaultFilterChainValidator - Che
cking whether login URL '/login.htm' is accessible with your configuration
00:42:10.146 [pool-2-thread-1] DEBUG o.s.s.web.util.AntPathRequestMatcher - Chec
king match of request : '/login.htm'; against '/resources'
00:42:10.154 [pool-2-thread-1] DEBUG o.s.s.web.util.AntPathRequestMatcher - Chec
king match of request : '/login.htm'; against '/admin.htm'
00:42:10.158 [pool-2-thread-1] DEBUG o.s.s.c.h.DefaultFilterChainValidator - No
access attributes defined for login page URL
00:42:10.164 [pool-2-thread-1] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Fini
shed creating instance of bean 'org.springframework.security.filterChainProxy'
00:42:10.172 [pool-2-thread-1] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Retu
rning cached instance of singleton bean 'org.springframework.security.web.Defaul
tSecurityFilterChain#0'
00:42:10.180 [pool-2-thread-1] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Retu
rning cached instance of singleton bean 'org.springframework.security.web.PortMa
pperImpl#0'
00:42:10.187 [pool-2-thread-1] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Retu
rning cached instance of singleton bean 'org.springframework.security.web.PortRe
solverImpl#0'
00:42:10.195 [pool-2-thread-1] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Retu
rning cached instance of singleton bean 'org.springframework.security.config.aut
hentication.AuthenticationManagerFactoryBean#0'
00:42:10.202 [pool-2-thread-1] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Retu
rning cached instance of singleton bean 'org.springframework.security.authentica
tion.ProviderManager#0'
00:42:10.210 [pool-2-thread-1] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Retu
rning cached instance of singleton bean 'org.springframework.security.web.contex
t.HttpSessionSecurityContextRepository#0'
00:42:10.218 [pool-2-thread-1] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Retu
rning cached instance of singleton bean 'org.springframework.security.web.authen
tication.session.SessionFixationProtectionStrategy#0'
00:42:10.226 [pool-2-thread-1] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Retu
rning cached instance of singleton bean 'org.springframework.security.web.savedr
equest.HttpSessionRequestCache#0'
00:42:10.234 [pool-2-thread-1] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Retu
rning cached instance of singleton bean 'org.springframework.security.web.access
.expression.DefaultWebSecurityExpressionHandler#0'
00:42:10.241 [pool-2-thread-1] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Retu
rning cached instance of singleton bean 'org.springframework.security.access.vot
e.AffirmativeBased#0'
00:42:10.249 [pool-2-thread-1] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Retu
rning cached instance of singleton bean 'org.springframework.security.web.access
.intercept.FilterSecurityInterceptor#0'
00:42:10.256 [pool-2-thread-1] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Crea
ting shared instance of singleton bean 'org.springframework.security.web.access.
DefaultWebInvocationPrivilegeEvaluator#0'
00:42:10.264 [pool-2-thread-1] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Crea
ting instance of bean 'org.springframework.security.web.access.DefaultWebInvocat
ionPrivilegeEvaluator#0'
00:42:10.272 [pool-2-thread-1] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Retu
rning cached instance of singleton bean 'org.springframework.security.web.access
.intercept.FilterSecurityInterceptor#0'
00:42:10.282 [pool-2-thread-1] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Eage
rly caching bean 'org.springframework.security.web.access.DefaultWebInvocationPr
ivilegeEvaluator#0' to allow for resolving potential circular references
00:42:10.298 [pool-2-thread-1] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Fini
shed creating instance of bean 'org.springframework.security.web.access.DefaultW
ebInvocationPrivilegeEvaluator#0'
00:42:10.306 [pool-2-thread-1] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Retu
rning cached instance of singleton bean 'org.springframework.security.authentica
tion.AnonymousAuthenticationProvider#0'
00:42:10.311 [pool-2-thread-1] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Retu
rning cached instance of singleton bean 'org.springframework.security.web.authen
tication.rememberme.TokenBasedRememberMeServices#0'
00:42:10.319 [pool-2-thread-1] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Retu
rning cached instance of singleton bean 'org.springframework.security.authentica
tion.RememberMeAuthenticationProvider#0'
00:42:10.326 [pool-2-thread-1] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Retu
rning cached instance of singleton bean 'org.springframework.security.web.authen
tication.www.BasicAuthenticationEntryPoint#0'
00:42:10.335 [pool-2-thread-1] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Retu
rning cached instance of singleton bean 'org.springframework.security.web.authen
tication.UsernamePasswordAuthenticationFilter#0'
00:42:10.342 [pool-2-thread-1] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Retu
rning cached instance of singleton bean 'org.springframework.security.userDetail
sServiceFactory'
00:42:10.350 [pool-2-thread-1] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Retu
rning cached instance of singleton bean 'org.springframework.security.web.Defaul
tSecurityFilterChain#1'
00:42:10.361 [pool-2-thread-1] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Retu
rning cached instance of singleton bean 'org.springframework.security.authentica
tion.dao.DaoAuthenticationProvider#0'
00:42:10.376 [pool-2-thread-1] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Retu
rning cached instance of singleton bean 'org.springframework.security.authentica
tion.DefaultAuthenticationEventPublisher#0'
00:42:10.386 [pool-2-thread-1] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Retu
rning cached instance of singleton bean 'org.springframework.security.authentica
tionManager'
00:42:10.396 [pool-2-thread-1] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Retu
rning cached instance of singleton bean 'org.springframework.context.annotation.
ConfigurationClassPostProcessor$ImportAwareBeanPostProcessor#0'
00:42:10.409 [pool-2-thread-1] DEBUG o.s.w.c.s.XmlWebApplicationContext - Unable
 to locate LifecycleProcessor with name 'lifecycleProcessor': using default [org
.springframework.context.support.DefaultLifecycleProcessor@10cdec1]
00:42:10.421 [pool-2-thread-1] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Retu
rning cached instance of singleton bean 'lifecycleProcessor'
00:42:10.429 [pool-2-thread-1] DEBUG o.s.web.context.ContextLoader - Published r
oot WebApplicationContext as ServletContext attribute with name [org.springframe
work.web.context.WebApplicationContext.ROOT]
00:42:10.438 [pool-2-thread-1] INFO  o.s.web.context.ContextLoader - Root WebApp
licationContext: initialization completed in 27447 ms
30-Nov-2012 00:42:11 org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["http-apr-8080"]
30-Nov-2012 00:42:11 org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["ajp-apr-8009"]
30-Nov-2012 00:42:11 org.apache.catalina.startup.Catalina start
INFO: Server startup in 31631 ms 
```

以下是jar依赖：

```
compile "org.slf4j:jcl-over-slf4j:$slf4jVersion"
compile "org.slf4j:slf4j-api:$slf4jVersion"

compile "ch.qos.logback:logback-classic:${logbackVersion}"
compile "ch.qos.logback:logback-core:${logbackVersion}"
compile "ch.qos.logback:logback-access:${logbackVersion}" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T17:10:42.933

我已经解决了这个问题。

正如[这里](http://jira.qos.ch/browse/LOGBACK-557)所解释的，LogbackConfigListener 应该是 web.xml 文件中的第一个侦听器。

我在 Spring 的 ContextLoaderListener 下编写 LogbackConfigListener。该序列与 Log4jConfigListener 一起使用可能是因为两个侦听器都是 Spring 框架的一部分。

# c++ - 运行一个新线程 Qt C++

> ID：13631624
> 
> 赞同：2
> 
> 时间：2012-11-29T17:45:18.443
> 
> 标签：c++, multithreading, qt, class, qthread

我想在主应用程序的单独线程中运行代码，为此我创建了一些文件：

线程2.h

```
#ifndef THREAD2_H
#define THREAD2_H
#include <QThread>

class thread2 : public QThread
{
    Q_OBJECT

public:
    thread2();

protected:
    void run();

};

#endif // THREAD2_H 
```

线程2.cpp

```
#include "thread2.h"

thread2::thread2()
{
    //qDebug("dfd");
}
void thread2::run()
{
    int test = 0;
} 
```

主文件名为 main.cpp

```
#include <QApplication>
#include <QThread>
#include "thread1.cpp"
#include "thread2.h"

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);

    thread2::run();

    return a.exec();
} 
```

但它不起作用...

Qt Creator 告诉我：“不能在没有对象的情况下调用成员函数‘virtual void thread2::run()’”

谢谢 ！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-29T17:48:42.413

像这样调用它：`thread2::run()`是调用`static`函数的方式，但事实`run()`并非如此。

此外，要启动一个不`run()`显式调用该方法的线程，您需要创建一个线程对象并调用`start()`它，它应该`run()`在适当的线程中调用您的方法：

```
thread2 thread;
thread.start()
... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-17T15:44:40.367

一个简单的线程类，允许您将指针传递给函数，如下所示：

```
typedef struct TThread_tag{
int (*funct)(int, void*);
char* Name;
int Flags;
}TThread;

 class Thread : public QThread {
 public:
   TThread ThreadInfoParm;
   void setFunction(TThread* ThreadInfoIn) 
   {
      ThreadInfoParm.funct = ThreadInfoIn->funct;   
   }
 protected:
    void run() 
    {
      ThreadInfoParm.funct(0, 0);   
     }
    };

 TThread* ThreadInfo = (TThread*)Parameter;
 //Create the thread objedt
 Thread* thread = new Thread;
 thread->setFunction(ThreadInfo);//Set the thread info
 thread->start();  //start the thread 
```

# c++ - 为什么我会收到此访问冲突？

> ID：13631625
> 
> 赞同：0
> 
> 时间：2012-11-29T17:45:21.470
> 
> 标签：c++, access-violation, char-pointer

我可能在这里做了一些愚蠢的事情，但是自从我在 C++ 中工作以来已经有一段时间了，并且由于某种原因，当调用 sprintf 时我不断遇到访问冲突。无论如何，这是我正在使用的代码：

```
char *value, *result;
int len;
result = "";
mgr.GetObjValue(0, value, len);

for (int i = 0; i < len; i++) 
{
  sprintf(result, "%s %X", result, value[i]);
}

printf("ObjVal: %s\n\n", result); 
```

如果有人好奇 GetObjValue 做了什么，它只是从我正在使用的 API 中检索 SNMP 对象值。这是它的声明：

```
int SNMPMgr::GetObjValue(int iObjIndex, char *&lpObjValue, int &lenObjValue); 
```

任何帮助将非常感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T17:49:52.160

`sprintf`不进行内存分配。它期望得到一个指针，指向一个足够长的可写缓冲区来保存数据。

```
char *result; 
```

此时，结果的内容是未定义的。

```
result = ""; 
```

此时，result 指向一个 1 字节的静态只读字符串（终止空值）。

```
sprintf(result, "%s %X", result, value[i]); 
```

此时，您只是尝试将任意长的字符串写入大小为 1 的只读区域。哎呀。

改为执行以下操作：

```
char result[1024];
sprintf(result, "%s %X", result, value[i]); 
```

请注意，使用[snprintf](http://linux.die.net/man/3/snprintf)或[sprintf_s](http://msdn.microsoft.com/en-us/library/ce3zzk1k.aspx)来避免覆盖缓冲区的可能性可能是一个好主意。（由于您使用的是 C++，您还可以轻松地使用其中一个 C++ 格式化库，例如[Boost.Format](http://www.boost.org/libs/format/)，它会为您分配内存 - 但这是另一个话题。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T17:49:32.613

问题在这里：`char* result = "";`

您正在尝试打印到常量字符串（空字符串）。从关于第一个参数的 sprintf 的文档中：

> 指向存储结果 C 字符串的缓冲区的指针。缓冲区应该足够大以包含结果字符串。

您需要分配一个缓冲区来打印。

# asp.net - 如何捕获实体数据源异常

> ID：13631627
> 
> 赞同：3
> 
> 时间：2012-11-29T17:45:28.257
> 
> 标签：asp.net, entity-framework, error-handling

我有一个绑定到实体数据源的网格视图。我使用从工具箱中的 asp.net 控件拖放并使用实体数据模型创建了它。我在代码隐藏中几乎没有输入。出于测试目的，我编辑了 gridview 并添加了无效的数据。然后我单击更新以导致异常。

所以我的问题是我想尝试在我自己的错误处理程序中捕获异常，但我不知道在哪里或如何做到这一点，因为我不确定我应该关注哪个事件。我只想知道从哪里开始。

非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T11:39:59.310

您可以在 EntityDataSource 的 OnUpdated 事件中捕获异常：

```
protected void EntityDataSource1_OnUpdated(object sender, EntityDataSourceChangedEventArgs e)
{
   if (e.Exception != null) 
   {
         // handle here
          e.ExceptionHandled = true;
   }
} 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T17:53:01.840

您可以在 global.asax 中捕获异常，但它会显示一般错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T17:49:35.503

您将无法给出表单是使用拖放、声明性语法设计的。您最好在将用户输入提交到服务器之前对其进行验证。这应该捕获大多数异常。

您的另一个选择是用代码中的代码替换声明性标记，您可以在调用之前捕获异常或调用验证`SaveChanges()`；

# c++ - 如何为每个新文件名分配一个计数器

> ID：13631628
> 
> 赞同：0
> 
> 时间：2012-11-29T17:45:30.957
> 
> 标签：c++, string, file-io

我有一个这样的方法签名：

```
vector<int> findRow(string filename); 
```

它输入不同的文件并返回特定的行。我将在许多不同的文件上使用此方法，并且需要跟踪哪个文件返回哪一行。所以我想为每个文件名分配一个唯一的文件编号，然后使用这个文件编号来引用文件及其相应的返回值。我该怎么做呢？我完全迷路了！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T17:50:34.037

您可以使用静态局部变量作为计数器，并使用一个或两个[`std::unordered_map`](http://en.cppreference.com/w/cpp/container/unordered_map)将 id 映射到向量，并可能将 id 映射到文件名：

```
std::unordered_map<int, std::vector<int>> id_to_row;
std::unordered_map<int, std::string> id_to_file;

// This will be the next id to assign to a row/file
// I.e. the current row-id is `id_counter - 1` if `id_counter > 0`
// It can also be seen as the number of mappings made (or rows loaded)
int id_counter = 0;

std::vector<int>& findRow(std::string filename)
{
    // Do your stuff
    for (...)
    {
        ...

        id_to_row[id_counter].push_back(row_value);

        ...
    }

    // Map the id to the filename as well
    id_to_file[id] = filename;

    // Return a reference to the actual vector, while incrementing id value
    return id_to_row[id_counter++];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T18:02:34.537

`info`定义一个将文件名和行号作为属性的结构（甚至是类）怎么样？定义一个向量`info`。对于每个文件，将名称和行存储在一个新的`info`中，并附加到向量中。这个向量的索引是你想要的数字。

# c# - 为什么当字符串相等时这个 AppendText 依赖属性不打印？

> ID：13631633
> 
> 赞同：2
> 
> 时间：2012-11-29T17:45:46.653
> 
> 标签：c#, wpf, mvvm

发生的情况是，如果字符串相同，它不会在 WPF 表单文本框中打印/绑定/发布到视图。例如，如果我使用 random 来生成我正在制作成字符串的字节数组，那么它确实会发布到视图中。

这是视图绑定到的我的 ViewModel：

```
 public class ViewModel : INotifyPropertyChanged
   {
      public StringBuilder Data
      {
         get { return _data; }
         set
         {
            _data = value;
            OnPropertyChanged("Data");
         }
      }

      private Service service = new Service();
      private StringBuilder _data;

      public ViewModel()
      {
         service.BytesArrived += ServiceOnBytesArrived;
         ThreadPool.QueueUserWorkItem(starupService);
      }

      private void starupService(object state)
      {
         service.Start();
      }

      private void ServiceOnBytesArrived(byte[] bytes)
      {
         var sBuilder = new StringBuilder();
         foreach (var b in bytes)
         {
            sBuilder.Append(b.ToString() + ", ");
         }

         Data = sBuilder;
      }

      public event PropertyChangedEventHandler PropertyChanged;

      protected virtual void OnPropertyChanged(string propertyName)
      {
         var handler = PropertyChanged;
         if (handler != null) handler(this, new PropertyChangedEventArgs(propertyName));
      }
   } 
```

这是只为我打印字节的服务（如果使用 random 则可以正常工作：

```
 public class Service
   {
      public void Start()
      {
         var random = new Random(DateTime.Now.Minute);

       while (true)
       {
        //random.NextBytes(bytes);
        for (int i = 0; i < 10; i++)
        {
           bytes[i] = 0;
           Thread.Sleep(10);
        }
        //Thread.Sleep(100);
        BytesArrived(bytes);
       }
    }

  private byte[] bytes = new byte[10];
  public event Action<byte[]> BytesArrived;
} 
```

这是我正在使用的使用 AppendText 的依赖属性：

```
 public static class TextBoxAttachedBehaviors
   {
      #region AppendText Attached Property

      public static string GetAppendText(TextBox textBox)
      {
         return (string)textBox.GetValue(AppendTextProperty);
      }

      public static void SetAppendText(
         TextBox textBox, string value)
      {
         textBox.SetValue(AppendTextProperty, value);
      }

      public static readonly DependencyProperty AppendTextProperty =
         DependencyProperty.RegisterAttached(
            "AppendText",
            typeof(string),
            typeof(TextBoxAttachedBehaviors),
            new UIPropertyMetadata(null, OnAppendTextChanged));

      private static void OnAppendTextChanged(DependencyObject d,
                                              DependencyPropertyChangedEventArgs e)
      {
         if (e.NewValue == null)
            return;
         TextBox textBox = d as TextBox;
         textBox.AppendText(e.NewValue.ToString());
      }

      #endregion
   } 
```

XAML：

```
<TextBox attachedBehaviors:TextBoxAttachedBehaviors.AppendText="{Binding TextBoxAppend}"/> 
```

如果你有 ReSharper，它会提供替换命名空间，例如`attachedBehaviors:`用实际附加行为的类的链接，在我的例子中是`xmlns:attachedBehaviors="clr-namespace:Support.NetworkMonitor.AttachedBehaviors"`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T18:18:06.710

DependencyProperties 在触发通知之前比较它们的旧值和新值，并且仅在确实存在差异时才触发它。解决方案很简单：在设置字符串之前将 AppendText 设置为 null，例如

```
 public StringBuilder Data
  {
     get { return _data; }
     set
     {
        _data = null;
        OnPropertyChanged("Data");
        _data = value;
        OnPropertyChanged("Data");
     }
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T18:58:06.813

我从我写的一个工作应用程序中找到了这个......也许这有帮助。

```
 Public Class TextBoxLog
    Inherits Freezable
    Implements WPFGlue.Framework.IStickyComponent

    Private _AppendTextDelegate As Action(Of String)
    Private _ScrollToEndDelegate As Action
    Private _ResetDelegate As Action

    Public Shared ReadOnly LogProperty As DependencyProperty = DependencyProperty.RegisterAttached("Log", GetType(TextBoxLog), GetType(TextBoxLog), New PropertyMetadata(AddressOf WPFGlue.Framework.StickyComponentManager.OnStickyComponentChanged))
    Public Shared Function GetLog(ByVal d As DependencyObject) As TextBoxLog
        Return d.GetValue(LogProperty)
    End Function
    Public Shared Sub SetLog(ByVal d As DependencyObject, ByVal value As TextBoxLog)
        d.SetValue(LogProperty, value)
    End Sub

    Public Shared ReadOnly LogMessageProperty As DependencyProperty = DependencyProperty.Register("LogMessage", GetType(String), GetType(TextBoxLog), New PropertyMetadata(AddressOf OnLogMessageChanged))
    Public Property LogMessage As String
        Get
            Return GetValue(LogMessageProperty)
        End Get
        Set(ByVal value As String)
            SetValue(LogMessageProperty, value)
        End Set
    End Property
    Private Shared Sub OnLogMessageChanged(ByVal d As TextBoxLog, ByVal e As DependencyPropertyChangedEventArgs)
        If e.NewValue IsNot Nothing Then
            d.WriteLine(e.NewValue)
        End If
    End Sub

    Protected Overridable Sub Attach(base As Object)
        If Not TypeOf base Is System.Windows.Controls.Primitives.TextBoxBase Then
            Throw New ArgumentException("Can only be attached to elements of type TextBoxBase")
        End If
        Dim tb As System.Windows.Controls.Primitives.TextBoxBase = base
        _AppendTextDelegate = AddressOf tb.AppendText
        _ScrollToEndDelegate = AddressOf tb.ScrollToEnd
        _ResetDelegate = AddressOf Me.Reset
    End Sub

    Protected Overridable Sub Detach(ByVal base As Object)
        _AppendTextDelegate = Nothing
        _ScrollToEndDelegate = Nothing
        _ResetDelegate = Nothing
    End Sub

    Private Sub Reset()
        SetCurrentValue(LogMessageProperty, Nothing)
    End Sub

    Protected Overrides Function CreateInstanceCore() As System.Windows.Freezable
        Return New TextBoxLog
    End Function

    Public Overridable Sub Write(message As String)
        If _AppendTextDelegate IsNot Nothing Then
            _AppendTextDelegate.Invoke(message)
            _ScrollToEndDelegate.Invoke()
            '               Me.Dispatcher.Invoke(_ResetDelegate, Windows.Threading.DispatcherPriority.Background)
        End If
    End Sub

    Public Overridable Sub WriteLine(message As String)
        If _AppendTextDelegate IsNot Nothing Then
            _AppendTextDelegate.Invoke(message)
            _AppendTextDelegate.Invoke(vbNewLine)
            _ScrollToEndDelegate.Invoke()
            '                Me.Dispatcher.Invoke(_ResetDelegate, Windows.Threading.DispatcherPriority.Background)
        End If
    End Sub

    Public ReadOnly Property Mode As Framework.AttachMode Implements Framework.IStickyComponent.Mode
        Get
            Return Framework.AttachMode.Immediate
        End Get
    End Property

    Public Sub OnAttach(base As Object, e As System.EventArgs) Implements Framework.IStickyComponent.OnAttach
        If e Is System.EventArgs.Empty Then
            Attach(base)
        End If
    End Sub

    Public Sub OnDetach(base As Object, e As System.EventArgs) Implements Framework.IStickyComponent.OnDetach
        If e Is System.EventArgs.Empty Then
            Detach(base)
        End If
    End Sub
End Class 
```

出于本文的目的，您可以假设在设置 Log 附加属性时调用 OnAttach，在未设置或卸载时调用 OnDetach。

# oop - 如何对集合中的一个特定字段进行排序？

> ID：13631634
> 
> 赞同：-5
> 
> 时间：2012-11-29T17:45:46.607
> 
> 标签：oop, collections

我为 Employee 类创建了一个 Arraylist，并为 Empid、Empname、DOJ、Salary 等数据成员初始化了值……在初始化之后，我想针对任何一个特定字段进行排序。这在收藏或任何概念中是否可能？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T17:48:49.547

如果您使用的是 c# 和 Linq，您可以尝试：

```
var List = TheList.OrderBy(p => p.Empid); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T17:49:25.413

我相信 linq(in **c#** ) 有这个 orderby 扩展方法

```
List<MyObj> ol = myList.OrderBy(myOb => myOb.AProperty).ToList(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T17:50:38.283

**爪哇**：

如果你总是想在同一个字段上排序，让你的类`Employee`实现`Comparable<Employee>`. 比你可以使用[`Collections.sort(List)`](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#sort%28java.util.List%29)

如果要对不同的字段进行排序，请实现不同的[`Comparator`](http://docs.oracle.com/javase/7/docs/api/java/util/Comparator.html)类并使用[`Collections.sort(List, Comparator)`](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#sort%28java.util.List,%20java.util.Comparator%29)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T17:50:45.113

...在 C# 中，这很容易通过[Linq](http://msdn.microsoft.com/en-us/library/bb397926.aspx)实现- 也可以[在这里](http://code.msdn.microsoft.com/101-LINQ-Samples-3fb9811b)查看更多示例。

# visual-studio - 查找T4文本模板类代码

> ID：13631635
> 
> 赞同：1
> 
> 时间：2012-11-29T17:45:47.583
> 
> 标签：visual-studio, t4

T4 文本模板不仅可用于生成代码，还可以使用 Visual Studio 生成任何类型的文本。

我已经阅读了有关 T4 的博客和教程，据我所知，Visual Studio 在后台动态构建一个类，编译并运行该类中的代码以构建文本输出。

是否可以看到该类的源代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T22:41:34.797

是的，最简单的方法是在解决方案资源管理器中选择模板文件时更改属性窗口中的自定义工具。

默认情况下，它将是“TextTemplatingFileGenerator”。

如果您将自定义工具更改为“TextTemplatingFilePreprocessor”，您将获得基础模板类，而不是生成到项目中的模板输出。

准确地说，这段代码与幕后运行的代码并不完全相同，但会非常接近。

如果您需要绝对准确的代码，您应该不理会自定义工具，但在 <#@ template #> 指令上设置 debug="true" 标志。然后，这会将生成的代码留在您的 %TEMP% 目录中随机命名的“.cs”或“vb”文件中。只需按时间对目录进行排序，它应该在顶部。

# iphone - MPMoviePlayerController 中断播放音频

> ID：13631638
> 
> 赞同：4
> 
> 时间：2012-11-29T17:46:02.393
> 
> 标签：iphone, ios, audio, mpmovieplayercontroller

我正在开发一个可以播放在线视频的 iPhone 应用程序，我想在加载视频数据时先播放广告。
首先，我请求一个 AdColony 视频广告并开始播放，然后使用`MPMoviePlayerController`加载视频数据，但是当视频准备播放时，它会打断之前的广告声音，并导致广告停止。

这是我使用的代码：

```
// Play Ad first
[AdColony playVideoAdForSlot:1 withDelegate:self]; // It also use MPMoviePlayerController to play video

// Load video for playing
moviePlayer = [[MPMoviePlayerController alloc]
               init];
moviePlayer.scalingMode = MPMovieScalingModeAspectFit;
moviePlayer.controlStyle = MPMovieControlStyleNone;
moviePlayer.shouldAutoplay = NO;
moviePlayer.view.frame = CGRectMake(0,44,320,320);
moviePlayer.view.userInteractionEnabled = YES;
[moviePlayer prepareToPlay]; // Interrupt Ad playing 

```

官方文档说“通话`prepareToPlay`可能会中断电影播放器​​的音频会话”，因此广告被中断。如果我删除`prepareToPlay`，视频数据将不会被预加载
我试图放在 `[AdColony playVideoAdForSlot:1 withDelegate:self];`下面`[moviePlayer prepareToPlay];`

但它不起作用。有谁知道如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-01T10:22:58.037

有办法处理中断，

通读他的苹果指南

[http://developer.apple.com/library/ios/#documentation/Audio/Conceptual/AudioSessionProgrammingGuide/HandlingAudioInterruptions/HandlingAudioInterruptions.html#//apple_ref/doc/uid/TP40007875-CH11-SW1](http://developer.apple.com/library/ios/#documentation/Audio/Conceptual/AudioSessionProgrammingGuide/HandlingAudioInterruptions/HandlingAudioInterruptions.html#//apple_ref/doc/uid/TP40007875-CH11-SW1)

# algorithm - ACM ICPC 速成实践

> ID：13631640
> 
> 赞同：0
> 
> 时间：2012-11-29T17:46:16.477
> 
> 标签：algorithm

我被选入了ACM ICPC区域总决赛。但我只剩下1周的准备时间了。我已经为此准备了 1 年，但由于我的考试，在过去的两周里我不能花太多时间在编程上。

**有人可以发布一些链接，在那里我可以找到涵盖所有重要练习主题的问题集以及解决方案，以便我可以很好地复习**。当然我知道有 ACM ICPC 过去的档案，但他们没有解决方案。

另外请给我一些好的链接，我也可以在其中找到要学习的资源材料。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T17:54:26.957

你不需要解决方案来练习 ICPC。您很少获得参考解决方案。只需解决问题，让在线评委测试您的解决方案。

以下是一些有用的网络资源：

*   TopCoder 算法：[http ://www.topcoder.com/tc](http://www.topcoder.com/tc)
*   SPOJ在线评委：[http ://www.spoj.pl/](http://www.spoj.pl/)
*   巴利亚多利德的在线法官：http: [//uva.onlinejudge.org/](http://uva.onlinejudge.org/)

*   热门书籍：编程挑战， http: [//www.programming-challenges.com/](http://www.programming-challenges.com/)

*   [http://www.acmsolver.org/](http://www.acmsolver.org/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T18:04:21.870

我参加 ACM ICPC 已经三年了。如果你想成为一名优秀的 ACMer，没有捷径可走。以下是我自己改进的一些网站。我想你可以找到一些有用的东西。

1.  [http://codeforces.com](http://codeforces.com) （许多聪明人分享他们的代码，竞争很有趣。）
2.  [http://train.usaco.org/usacogate](http://train.usaco.org/usacogate)（好火车）
3.  [http://poj.org/](http://poj.org/) （很多华人ACMer都是从这个网站开始的。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-22T11:42:39.773

恭喜 ：）

您可以浏览以下书籍

1.  竞争性编程
2.  从贝勒到贝勒
3.  编程挑战

上述书籍可用于对给定问题进行分类，并帮助您开发有关如何解决这些问题的想法。方便的谷歌搜索可以为您提供一些网站列表，提供一些常见问题及其针对 ACM ICPC 的解决方案。

# c++ - BOOST MPL 添加两个 list_c 对象会导致意外行为

> ID：13631641
> 
> 赞同：4
> 
> 时间：2012-11-29T17:46:17.200
> 
> 标签：c++, boost, transform, typedef, boost-mpl

我有以下代码：

```
#include <boost/mpl/list_c.hpp>
#include <boost/mpl/transform.hpp>
#include <boost/mpl/plus.hpp>
#include <boost/mpl/equal.hpp>
#include <boost/mpl/equal_to.hpp>
#include <boost/mpl/assert.hpp>
#include <iostream>
#include <typeinfo>
#include <assert.h>

using namespace boost::mpl;

typedef list_c<long,0,2,4,6,8,10> evens;
typedef list_c<long,2,3,5,7,11,13> primes;
typedef list_c<long,2,5,9,13,19,23> sums;

typedef transform< evens, primes, plus<> >::type result;
BOOST_MPL_ASSERT(( equal< result,sums,equal_to<_1,_2> > ));

int main()
{
    std::cout << typeid(sums).name() << std::endl << typeid(result).name() << std::endl;
    assert(typeid(sums) == typeid(result));
} 
```

它编译，所以 BOOST_MPL_ASSERT 成立。但是，在运行它时，main 函数中的断言失败。这是什么意思？包含相同元素的两个 list_c 事物（我似乎缺少正确的词）不应该定义相同的类型吗？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T18:24:54.920

`transform`输出未指定的序列类型（`integral_c<long, n>`元素），而不是`list_c`.

将结果`transform`转换为已知类型的一种方法是`insert_range`在 a 上使用`list`：

```
insert_range<list0<>, begin<list0<> >::type, result>::type 
```

不幸的是，这不会产生一个`list`，而是一个内部`mpl::l_item`类型，所以你必须在两边都做同样的操作：

```
BOOST_MPL_ASSERT((is_same<
      insert_range<list0<>, begin<list0<> >::type, result>::type,
      insert_range<list0<>, begin<list0<> >::type, sums>::type>)); 
```

等效地，您可以使用`reverse_copy`前插入器：

```
BOOST_MPL_ASSERT((is_same<
      reverse_copy<result, front_inserter<list0<> > >::type,
      reverse_copy<sums, front_inserter<list0<> > >::type
      >)); 
```

实际上，因为`front_inserter`是根据内在元函数 实现的`push_front`，所以它产生与 相同的类型`insert_range`。

然而，仅仅依靠`copy`总是产生相同的未指定序列类型更容易：

```
BOOST_MPL_ASSERT((is_same<copy<result>::type, copy<sums>::type>)); 
```

由于`copy`是一个转换算法，它返回与 相同的类型`transform`，所以你可以写：

```
BOOST_MPL_ASSERT((is_same<result, copy<sums>::type>));

assert(typeid(copy<sums>::type) == typeid(result)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T18:13:04.967

MPL 不对 MPL 算法产生的确切类型做出任何保证。

# sql - 如果我的号码是个位数，如何在我的号码前面添加一个空格？

> ID：13631642
> 
> 赞同：1
> 
> 时间：2012-11-29T17:46:24.200
> 
> 标签：sql, oracle, plsql

处理目前看起来像这样的报告：

```
5 - Kirk Korver, UMKC
15 - Kendall Anthony, Richmond

Players With 30:
41 - Matt Staff, Texas State 
```

我想让它看起来像下面这样：

```
 5 - Kirk Korver, UMKC
 15 - Kendall Anthony, Richmond

Players With 30:
41 - Matt Staff, Texas State 
```

`*notice how the dashes are in line`

我可以使用 pl/sql 中的内置函数吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T17:53:20.367

不要认为它是“如果我的号码是个位数，请在我的号码前面添加一个空格”。相反，您正在打印一个右对齐的空格填充的两位数字。

您想像这样使用 Oracle`TO_CHAR()`功能。

```
SELECT TO_CHAR( player_number, '99' ) AS formatted_player_number FROM.... 
```

这是一个[讨论数字格式模型的页面](http://docs.oracle.com/cd/B19306_01/server.102/b14200/sql_elements004.htm#i34510)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T17:56:46.587

你可以做：

```
RIGHT('00' + cast([Id] AS VARCHAR(2)), 2) AS PaddedId 
```

或者

```
LPAD(Id, 2, '0') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T20:53:53.057

试试这个：

```
LPAD(player_number, 2,' ') 
```

# windows - SetThreadPriority 和 SetPriorityClass

> ID：13631644
> 
> 赞同：4
> 
> 时间：2012-11-29T17:46:26.683
> 
> 标签：windows, multithreading

我不明白如何使用`SetThreadPriority`和`SetPriorityClass`降低和提高线程的优先级。

我的理解是`SetPriorityClass`选择进程可用的优先级范围并`SetThreadPriority`设置类中的相对优先级。

例如，对线程执行此操作的结果是什么：

```
SetPriorityClass(GetCurrentProcess(), PROCESS_MODE_BACKGROUND_BEGIN);

SetThreadPriority(GetCurrentThread(), THREAD_MODE_BACKGROUND_END); 
```

感谢帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-05-28T14:23:40.380

`PROCESS_MODE_BACKGROUND_BEGIN`我观察到但显然没有记录的一件事是，至少在 Windows 7 下，无论进程如何访问内存，它都会**永久清空进程的工作集- 直到后台模式结束。**

例如，通常没有`PROCESS_MODE_BACKGROUND_BEGIN`，当我的机器有千兆字节的空闲内存，并且进程需要消耗并不断处理千兆字节的内存时，**进程工作集**将大约等于分配大小。也就是说，该进程获得了它在其工作集中使用的所有内存。好的。
现在，**工作集**`PROCESS_MODE_BACKGROUND_BEGIN`将有几十兆！ 不好的结果是，这会导致**不断的页面错误**并且计算运行得更慢！页面错误可能不是页面文件，而是 Windows 缓存。但是页面错误仍然会显着降低计算速度，同时也会导致 CPU 被无意义的负载消耗。

 ****总之，`PROCESS_MODE_BACKGROUND_BEGIN`不适合低优先级的后台**工作**。这项工作会非常**省时又省力**。
`PROCESS_MODE_BACKGROUND_BEGIN`仅当进程确实不打算**在后台执行任何消耗**操作时才适用。

**相反**，`THREAD_MODE_BACKGROUND_BEGIN`即使线程是进程中的唯一线程，也不会产生如此可怕的影响。
另请注意，您需要永久关闭`PROCESS_MODE_BACKGROUND_BEGIN`，仅使用`PROCESS_MODE_BACKGROUND_END`. `THREAD_MODE_BACKGROUND_END`调用after是不够的`PROCESS_MODE_BACKGROUND_BEGIN`。
因此，Arno 的说法并不完全正确，即`THREAD_MODE_BACKGROUND_END`取消`PROCESS_MODE_BACKGROUND_BEGIN`了单个线程的影响。

附加说明：`SetProcessPriorityBoost`with`bDisablePriorityBoost = TRUE`对工作集没有任何此类影响。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T09:07:32.880

进程优先级和线程优先级正在构建`base priority`线程。请参阅[调度优先级](http://msdn.microsoft.com/en-us/library/windows/desktop/ms685100%28v=vs.85%29.aspx)以了解如何组合优先级。通过查看此列表，您可以清楚地看出您的理解是正确的；在某个优先级内，`base priority`可以有不同的值，由`thread priority`.

并非所有 Windows 版本都支持value `PROCESS_MODE_BACKGROUND_BEGIN`for和value for 。`SetPriorityClass``THREAD_MODE_BACKGROUND_END``SetThreadPriority`

**PROCESS_MODE_BACKGROUND_BEGIN：** *系统降低进程（及其线程）的资源调度优先级，使其可以在不显着影响前台活动的情况下执行后台工作。*

**THREAD_MODE_BACKGROUND_END：** *结束后台处理模式。系统将线程的资源调度优先级恢复为线程进入后台处理模式之前的状态。*

这里所讨论的场景的后果是可以预测的：`SetPriorityClass`将把进程及其所有线程设置为`background processing mode`. 以下`SetThreadPriority`只会从 中释放 a 线程`background processing mode`。但是该进程的所有其他可能线程**将保持**在后台处理模式。

**注意：**只有 和 的`process priority class` **组合** `thread priority`决定`base priority`. 因此，无论是调用`GetThreadPriority`还是调用都`GetPriorityClass`不会返回基本优先级。只有它们的组合才会释放上面“调度优先级”链接中描述的基本优先级。不幸的是，新`background processing mode`值尚未包含在`base priority`列表中。但是名称`base priority`说明了这里的重要性：基于基本优先级（从进程优先级和线程优先级派生），调度程序可以动态调整调度优先级。后台模式只是`fine tune`调度优先级的另一种方式。另一种方法是[优先级提升](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684828%28v=vs.85%29.aspx)。优先级提升功能存在了一段时间。新的访问权限`background processing mode`值`SetThreadPriority`并`SetPriorityClass`直接打开优先级提升能力。在 Windows XP 中，这必须通过调用[SetProcessPriorityBoost](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686225%28v=vs.85%29.aspx)来完成。****

# android - ClassCastExcptionAndroid

> ID：13631647
> 
> 赞同：0
> 
> 时间：2012-11-29T17:46:40.860
> 
> 标签：android

主要活动

```
 public class MainActivity extends Activity {
// Declare our Views, so we can access them later
private CheckUsernameEditText etUsername;
private EditText etPassword;
private EditText etPassword2;
private Button btnRegister;
private Button btnCancel;
private TextView lblUserStatus;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // Set Activity Layout
    setContentView(R.layout.activity_main);

    // Get the EditText and Button References
    etUsername = (CheckUsernameEditText) findViewById(R.id.username);
    etPassword = (EditText) findViewById(R.id.password);
    etPassword2 = (EditText) findViewById(R.id.password2);
    btnRegister = (Button) findViewById(R.id.register_button);
    btnCancel = (Button) findViewById(R.id.cancel_button);
    lblUserStatus = (TextView) findViewById(R.id.userstatus);

    // Set our new Listener to the Username EditText view
    etUsername.setOnUsernameAvailableListener(new OnUsernameAvailableListener() {
                @Override
                public void onAvailableChecked(String username,
                        boolean available) {
                    // Handle the event here
                    if (!available) {
                        etUsername.setTextColor(Color.RED);
                        lblUserStatus
                                .setText(username
                                        + " is already taken. Please choose another login name.");
                    } else {
                        etUsername.setTextColor(Color.GREEN);
                        lblUserStatus.setText(username + " is available.");
                    }
                }
            });

    // Set Click Listener
    btnRegister.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            // create Account
        }
    });
    btnCancel.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            // Close the application
            finish();
        }
    });
} 
```

对应的 XML

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:orientation="vertical" >

           *
           *
<EditText
    android:id="@+id/username"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:singleLine="true" />

           *
           *
</LinearLayout> 
```

检查用户名编辑文本

```
 public class CheckUsernameEditText extends EditText implements OnKeyListener {

OnUsernameAvailableListener onUsernameAvailableListener = null;
final private static String[] registeredUsers = new String[] {
        // This is just a fixed List for tutorial purposes
        // in a real application you'd check this server sided or inside the
        // database
        "tseng", "admin", "root", "joedoe", "john" };

   public CheckUsernameEditText(Context context) {
    super(context);
    // Set KeyListener to ourself
    this.setOnKeyListener(this);
}

public CheckUsernameEditText(Context context, AttributeSet attrs,
        int defStyle) {
    super(context, attrs, defStyle);
    // Set KeyListener to ourself
    this.setOnKeyListener(this);
}

public CheckUsernameEditText(Context context, AttributeSet attrs) {
    super(context, attrs);
    // Set KeyListener to ourself
    this.setOnKeyListener(this);
}

// Allows the user to set an Listener and react to the event
public void setOnUsernameAvailableListener(
        OnUsernameAvailableListener listener) {
    onUsernameAvailableListener = listener;
}

// This function is called after the check was complete
private void OnUserChecked(String username, boolean available) {
    // Check if the Listener was set, otherwise we'll get an Exception when
    // we try to call it
    if (onUsernameAvailableListener != null) {
        // Only trigger the event, when we have a username
        if (!TextUtils.isEmpty(username)) {
            onUsernameAvailableListener.onAvailableChecked(username,
                    available);
        }
    }
}

@Override
public boolean onKey(View v, int keycode, KeyEvent keyevent) {
    // We only want to handle ACTION_UP events, when user releases a key
    if (keyevent.getAction() == KeyEvent.ACTION_DOWN)
        return false;

    boolean available = true;

    // Whenever a user press a key, check if the username is available
    String username = getText().toString().toLowerCase();
    if (!TextUtils.isEmpty(username)) {
        // Only perform check, if we have anything inside the EditText box
        for (int i = 0; i < registeredUsers.length; i++) {
            if (registeredUsers[i].equals(username)) {
                available = false;
                // Finish the loop, as the name is already taken
                break;
            }
        }
        // Trigger the Event and notify the user of our widget
        OnUserChecked(username, available);
        return false;
    }
    return false;
}

// Define our custom Listener interface
public interface OnUsernameAvailableListener {
    public abstract void onAvailableChecked(String username,
            boolean available);
}
   } 
```

问题是我接受了一个类分类异常。因为我在 xml 中将用户名声明为 edittext，而在主代码中我将其声明为 CheckUsernameEditText。我该如何解决这个问题？为什么转换不起作用，尤其是现在 CheckUsernameEditText 扩展了 EditText 类？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T17:50:57.687

所有`CheckUsernameEditText`对象都是`EditText`对象，
*但*并非所有`EditText`对象都是`CheckUsernameEditText`对象。

您应该在 XML 中使用您的自定义类：

```
<your.package.name.CheckUsernameEditText
    android:id="@+id/username"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:singleLine="true" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T17:51:18.137

我相信如果您有一个自定义视图（在您的情况下为 CheckUsernameEditText），您必须在 XML 中声明它......请记住，正如@Sam 指出的那样，您不能向下转换为派生类，您只能向上转换到父类中，因此您始终可以将 CheckUsernameEditText 视图转换为 EditText （或只是视图），但您不能采用其他方式。

# ruby - 在单个 csv.new() 行中创建带有标题的新 Ruby CSV 对象

> ID：13631648
> 
> 赞同：5
> 
> 时间：2012-11-29T17:46:41.797
> 
> 标签：ruby, csv

我正在尝试创建一个新的 CSV 对象，其中只有标题行，但在我调用之前不会设置标题`read()`：

```
[32] pry(main)> c = CSV.new("Keyword,Index,Page,Index in Page,Type,Title,URL", :headers => :first_row, :write_headers => true, :return_headers => true)
=> <#CSV io_type:StringIO encoding:UTF-8 lineno:0 col_sep:"," row_sep:"\n" quote_char:"\"" headers:true>
[33] pry(main)> c.headers
=> true
[34] pry(main)> c.read
=> #<CSV::Table mode:col_or_row row_count:1>
[35] pry(main)> c.headers
=> ["Keyword", "Index", "Page", "Index in Page", "Type", "Title", "URL"] 
```

这是为什么？为什么我不能用我的单行得到一个正常工作的 CSV 对象`CSV.new`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T18:13:29.337

正如[文档](http://ruby-doc.org/stdlib-1.9.2/libdoc/csv/rdoc/CSV.html#method-c-new)将告诉您的那样，它将字符串视为文件的内容（即 StringIO），因此您仍然必须像读取任何其他 IO 源一样读取字符串。

如果要显式设置标头，请将数组作为`:headers`参数传递。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T19:27:20.093

似乎没有一种方法可以在一次调用中执行此操作，但您可以使用自己的自定义方法轻松解决此问题：

鉴于：

```
def new_csv(headers, data)
  csv = CSV.new(data, headers: headers, write_headers: true, return_headers: true)
  csv.read
  csv
end 
```

您可以将其用作：

```
csv = new_csv("Header 1, Header 2", "abc,def") 
=> <#CSV io_type:StringIO encoding:UTF-8 lineno:1 col_sep:"," row_sep:"\n" quote_char:"\"" headers:["abc", "def"]>

csv.headers
=> ["Header 1", "Header 2"] 
```

希望有帮助。

# c# - 关于迭代的架构问题

> ID：13631651
> 
> 赞同：0
> 
> 时间：2012-11-29T17:47:13.127
> 
> 标签：c#, architecture

我正在导入一个如下所示的数据集：

数量 100-500

加工平版、平版

克重 80, 120

这些都在一个记录中。问题是上面代表了 8 个不同的潜在价格，每个变量选项的每个组合都有一个，所以从这个记录中我们制作了 8 个定价记录：

*   100、光刻、80
*   100、光刻、120
*   100，普通，80
*   100，平原，120
*   500、光刻、80
*   500、光刻、120
*   500，普通，80
*   500，普通，120

但实际上有更多的变量和选项，因此这一记录会产生超过 1000 条定价记录。

所以我的问题是优雅的代码之一；是否有任何典型的模式可以代表它，如何最好地在 C# 中建模？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T17:58:56.890

[http://blog.noldorin.com/2010/05/combinatorics-in-csharp/](http://blog.noldorin.com/2010/05/combinatorics-in-csharp/)

他是列表的 GetCombinations() 扩展的一些工作示例。它可能无法按原样解决您的问题，但它应该为您提供如何处理组合的良好起点。这可能是一个难题。

# c# - 子类特定的静态成员数据

> ID：13631652
> 
> 赞同：0
> 
> 时间：2012-11-29T17:47:14.573
> 
> 标签：c#, inheritance, static

我正在尝试实现一个类家族，这些类跟踪每个类存在多少个实例。因为所有这些类都有这种行为，所以我想把它拉到一个超类中，这样我就不必对每个类重复实现了。考虑以下代码：

```
class Base
{
    protected static int _instances=0;
    protected int _id;

    protected Base()
    {
        // I would really like to use the instances of this's class--not
        // specifically Base._instances
        this._id = Base._instances;
        Base._instances++;
    }
}

class Derived : Base
{
                                // Values below are desired,
                                // not actual:
    Derived d1 = new Derived(); // d1._id = 0
    Derived d2 = new Derived(); // d2._id = 1
    Derived d3 = new Derived(); // d3._id = 2

    public Derived() : base() { }
}

class OtherDerived : Base
{
                                            // Values below are desired,
                                            // not actual:
    OtherDerived od1 = new OtherDerived();  // od1._id = 0
    OtherDerived od2 = new OtherDerived();  // od2._id = 1
    OtherDerived od3 = new OtherDerived();  // od3._id = 2

    public OtherDerived() : base() { }
} 
```

如何实现每个类的实例计数器（与基类的计数器分开的计数器）？我试过混合静态和抽象（不编译）。请指教。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T17:50:41.633

不，你不能那样做。但是你*可以*有一个静态`Dictionary<Type, int>`的，并通过调用在执行时找出类型`GetType`。

```
class Base
{
    private static readonly IDictionary<Type, int> instanceCounterMap
        = new Dictionary<Type, int>();
    protected int _id;

    protected Base()
    {
        // I don't normally like locking on other objects, but I trust
        // Dictionary not to lock on itself
        lock (instanceCounterMap)
        {
            // Ignore the return value - we'll get 0 if it's not already there
            instanceCounterMap.TryGetValue(GetType(), out _id);
            instanceCounterMap[GetType()] = _id + 1;    
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T17:49:16.770

我建议不要试图让一个类来计算其自身的实例，而是创建一个管理实例生命周期的工厂类。而不是新建一个“OtherDerived”，而是用一个 Build 或 Create 方法实现一个 OtherDerivedFactory 来为它们提供服务。在内部，它可以计算实例。

哎呀，使用接口对其进行更多抽象，然后您可以在运行时注入工厂。非常适合测试、替代实现等。

# python - 在 python 中，以相同别名导入新模块是否允许垃圾收集拾取先前分配的模块？

> ID：13631661
> 
> 赞同：4
> 
> 时间：2012-11-29T17:47:44.970
> 
> 标签：python, import, garbage-collection

此代码或类似代码是否允许在取消引用后通过垃圾收集拾取“某物”？

```
import something as this

if condition:
    import somethingelse as this 
```

我想根据条件导入不同的模块以将其他模块替换为相同的别名，而不是在所有模块同时“加载”的情况下占用大量内存

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T17:50:22.710

不，原始模块仍缓存`sys.modules`为`sys.modules['something']`. 完全卸载模块通常非常困难；请参阅[在 Python 中卸载模块](https://stackoverflow.com/questions/3105801/unload-a-module-in-python)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T17:50:26.763

加载的模块被缓存，因此消除您的引用并不会消除所有引用。它不会被垃圾收集。

# sql - oracle - 当 WHERE 语句中没有绑定时，将 SQL 代码与 PLSQL 混合

> ID：13631668
> 
> 赞同：1
> 
> 时间：2012-11-29T17:48:16.200
> 
> 标签：sql, oracle, dynamic, binding, plsql

我正在尝试编写一个非常简单的 sql 脚本： select * from table_X; 如果有的话，我想在 oracle sqlplus 中查看结果。这些结果对于进一步分析很重要。还要提一下，这取决于最初创建了多少表，因此 table_X 可能根本不在数据库中。但是我想避免在解析时出现错误，在上面运行该脚本时 table_X 不存在。

所以我试图将该 SQL 包装到一些 PLSQL 动态代码中，如下所示：

```
Define table_X="MY_TAB"
    DECLARE
       stmt_     VARCHAR2(2000);
       exist_ number := 0;
       CURSOR table_exist IS
         SELECT 1
           FROM user_tables
          WHERE table_name = '&table_X';
    BEGIN
       OPEN table_exist;
       FETCH table_exist INTO exist_;
       CLOSE table_exist;

       IF exist_ = 1 THEN
          stmt_ := 'SELECT * FROM &table_X';
          EXECUTE IMMEDIATE stmt_;
       ELSE
          dbms_output.put_line('This functionality is not installed.');
       END IF;
    END;
/ 
```

1.  如果 MY_TAB 中有数据，为什么我看不到任何结果（记录）？我真的需要绑定一些列并使用 ex. dbms_output 能看到一些信息吗？
2.  如果该表不存在（理想情况下仅使用 SQL），是否有任何简单的方法来查询表而不获取“ORA-00942：表或视图不存在”？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T11:04:34.257

而不是`execute immediate 'query'`你可以使用`execute immediate 'query' bulk collect into`然后循环它并使用它`dbms_output`来打印它。

[http://docs.oracle.com/cd/B19306_01/appdev.102/b14261/executeimmediate_statement.htm](http://docs.oracle.com/cd/B19306_01/appdev.102/b14261/executeimmediate_statement.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T18:11:42.780

如果你想在sqlplus中这样：

```
SQL> var c refcursor;
SQL> create or replace function get_table(p_tab in varchar2)
  2  return sys_refcursor
  3  is
  4  v_r sys_refcursor;
  5  NO_TABLE exception;
  6  pragma exception_init(NO_TABLE, -942);
  7  begin
  8    open v_r for 'select * from ' || dbms_assert.simple_sql_name(p_tab);
  9    return v_r;
 10  exception
 11    when NO_TABLE
 12    then
 13      open v_r for select 'NO TABLE ' || p_tab as oops from dual;
 14      return v_r;
 15  end;
 16  /

Function created.

SQL> exec :c := get_table('DUAL2');

PL/SQL procedure successfully completed.

SQL> print c

OOPS
-----------------------------------------
NO TABLE DUAL2

SQL>
SQL> exec :c := get_table('DUAL');

PL/SQL procedure successfully completed.

SQL> print c

D
-
X 
```

# c - 带有终端的 fork() 和 stderr

> ID：13631669
> 
> 赞同：1
> 
> 时间：2012-11-29T17:48:19.477
> 
> 标签：c, terminal, fork, stderr

我使用 fork() 来使不同的进程运行并打印一条简单的消息。代码的结果让我感到困惑。看看代码：

```
#include <stdlib.h>
#include <stdio.h>
#include <unistd.h>
#include <errno.h>
#include <math.h>
#include <sys/types.h>
#include <sys/ipc.h>
#include <sys/sem.h>
#include <time.h>

int main(void)
{

    fork();
    fork();
    fork();
    fprintf(stderr,"hello world\n");

} 
```

输出是：

```
mario@ubuntu:~/OS$ ./main
hello world
hello world
hello world
hello world
hello world
hello world
mario@ubuntu:~/OS$ hello world
hello world

mario@ubuntu:~/OS$ 
```

请注意，我在终端的第一行执行程序，但输出不是我所期望的。请帮我！提前致谢！如果用 printf("......") 更改 fprintf，也会发生同样的事情

编辑：我不明白为什么打印是这样的。终端线之前的六个，它旁边的一个和它后面的 1 个......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T18:44:36.637

当父程序退出时，运行父程序的 shell `mario@ubuntu:~/OS$`在屏幕上打印 shell 提示符。到那时尚未打印的任何子程序都`hello world`将在提示后打印。如果您希望提示不出现在所有`hello world`s 之前，则需要让父级等待它的所有子程序和孙子程序终止。

检查[这个](https://stackoverflow.com/questions/279729/how-to-wait-untill-all-child-processes-called-by-fork-complete)看看如何让父母等待。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T18:47:34.977

您正在创建 8 个进程。每个都`fork`将过程分为两部分。它的原始父级完成了我仍在执行的其他进程。因此，如果原始进程完成执行，则尽管其他进程仍在执行，shell 仍会执行并打印提示。

# c# - 向文本框发送 LeftClick 事件

> ID：13631670
> 
> 赞同：-1
> 
> 时间：2012-11-29T17:48:27.270
> 
> 标签：c#, winforms, textbox

有什么办法可以将左键单击事件发送到`TextBox`？出于什么原因，虽然我正在做 a`TextBox.Focus()`并且光标在里面闪烁，`TextBox`但我无法开始输入，但是如果我在文本框中用鼠标额外单击，那么我可以开始输入。所以，我想知道如何将该事件发送给它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T23:10:37.697

要发送鼠标事件，您需要导入`user32.dll`并使用`mouse_event(long dwFlags, long dx, long dy, long cButtons, long dwExtraInfo);`

**例子**

```
class Mouse
{
    [DllImport("user32.dll", CharSet = CharSet.Auto, CallingConvention = CallingConvention.StdCall)]
    public static extern void mouse_event(long dwFlags, long dx, long dy, long cButtons, long dwExtraInfo);

    private const int MOUSEEVENTF_LEFTDOWN = 0x02; //Left click
    private const int MOUSEEVENTF_LEFTUP = 0x04;
    private const int MOUSEEVENTF_RIGHTDOWN = 0x08; //Right click
    private const int MOUSEEVENTF_RIGHTUP = 0x10;

    public static void sendMouseRightclick(Point p)
    {
        mouse_event(MOUSEEVENTF_RIGHTDOWN | MOUSEEVENTF_RIGHTUP, p.X, p.Y, 0, 0); //Sends a mouse right click at the specified Point
    }
    public static void sendMouseClick(Point p)
    {
        mouse_event(MOUSEEVENTF_LEFTDOWN | MOUSEEVENTF_LEFTUP, p.X, p.Y, 0, 0); //Sends a mouse left click at the specified Point
    }
} 
```

使用此功能时，您可以调用`Mouse.sendMouseClick(Point p)`以在指定点发送鼠标左键单击。

在您的情况下，我认为您可能希望使用`Mouse.sendMouseClick(TextBox.Location);`鼠标左键单击当前`TextBox`位置。

谢谢，
祝你有美好的一天:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T22:02:36.940

好的，首先要解决这个问题，我们应该确保表单本身已激活。为此，在 Form_Shown 事件中，我们应该调用 this.Activate()

# machine-learning - 如何制作 U 矩阵？

> ID：13631673
> 
> 赞同：18
> 
> 时间：2012-11-29T17:48:34.300
> 
> 标签：machine-learning, neural-network, som, self-organizing-maps

为了可视化[自组织图](http://en.wikipedia.org/wiki/Self-organizing_map)，U 矩阵究竟是如何构造的？更具体地说，假设我有一个 3x3 节点的输出网格（已经训练过），我如何从中构造一个 U 矩阵？例如，您可以假设神经元（和输入）的维度为 4。

我在网上找到了几个资源，但不是很清楚或者是相互矛盾的。例如，[原始论文](http://www.uni-marburg.de/fb12/datenbionik/pdf/pubs/1990/UltschSiemon90)充满了错别字。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-30T09:26:08.320

U 矩阵是输入数据维度空间中神经元之间距离的直观表示。也就是说，您可以使用经过训练的向量计算相邻神经元之间的距离。如果您的输入维度是 4，那么训练映射中的每个神经元也对应一个 4 维向量。假设您有一个 3x3 六边形地图。

![地图格子](../Images/b663f71b831921e4fd0f54fe95d90d67.png)

U 矩阵将是一个 5x5 矩阵，其中包含两个神经元之间的每个连接的插值元素，如下所示

![u-mat格子](../Images/09364ab0756230357b45ba17662d93c6.png)

{x,y} 元素是神经元 x 和 y 之间的距离，{x} 元素中的值是周围值的平均值。例如，{4,5} = distance(4,5) 和 {4} = mean({1,4}, {2,4}, {4,5}, {4,7})。对于距离的计算，您使用每个神经元的经过训练的 4 维向量和用于训练地图的距离公式（通常是欧几里得距离）。因此，U 矩阵的值只是数字（不是向量）。然后，您可以将浅灰色分配给这些值中的最大值，将深灰色分配给最小值，将其他值分配给相应的灰色阴影。您可以使用这些颜色来绘制 U 矩阵的单元格，并以可视化方式表示神经元之间的距离。

也看看[这篇网络文章](http://users.ics.aalto.fi/jhollmen/dippa/node24.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-06T16:34:31.187

问题中引用的原始论文指出：

> Kohonen 算法的一个幼稚应用，尽管保留输入数据的拓扑结构并不能显示输入数据中固有的集群。

首先，这是真的，其次，这是对 SOM 的深刻误解，第三，也是对 SOM 计算目的的误解。

仅以RGB色彩空间为例：有3种颜色（RGB），6种（RGBCMY），8种（+BW），还是更多？您如何定义独立于目的的，即数据本身固有的？

我的建议是根本不使用集群边界的最大似然估计器——甚至不使用像 U-Matrix 这样的原始估计器——因为基本​​论点已经存在缺陷。无论您随后使用哪种方法来确定集群，都会继承该缺陷。更准确地说，集群边界的确定根本没有意义，它正在失去关于构建 SOM 的真实意图的信息。那么，为什么我们要从数据中构建 SOM？让我们从一些基础知识开始：

1.  任何 SOM 都是数据空间的代表模型，因为它降低了后者的维数。因为它是一个模型，它可以用作诊断和预测工具。然而，这两种情况都没有某种普遍的客观性。相反，模型在很大程度上取决于目的和可接受的相关错误风险。
2.  让我们暂时假设 U-Matrix（或类似的）是合理的。所以我们在地图上确定了一些集群。如何证明标准的合理性不仅是一个问题（在目的本身之外），这也是一个问题，因为任何进一步的计算都会破坏一些信息（它是关于模型的模型）。
3.  SOM 上唯一有趣的是准确度本身，即分类误差，而不是对其的某种估计。因此，模型在验证和稳健性方面的估计是唯一有趣的事情。
4.  任何预测都是有目的的，预测的接受度是准确性的函数，而准确性又可以用分类误差来表示。请注意，可以为 2 类模型和多类模型确定分类误差。如果你没有目的，你不应该对你的数据做任何事情。
5.  相反，“簇数”的概念完全依赖于“簇内允许发散”的标准，因此它掩盖了数据结构中最重要的东西。它还取决于您愿意承担的风险和风险结构（就 I/II 类错误而言）。
6.  那么，我们如何确定 SOM 上的数字类别？如果没有可用的外部先验推理，唯一可行的方法是对拟合优度进行后验检查。在给定的 SOM 上，施加不同数量的类并根据误分类成本测量偏差，然后（主观地）选择最令人满意的一个（使用一些奇特的启发式方法，如奥卡姆剃刀）

总而言之，U 矩阵在没有客观性的地方假装客观性。这完全是对建模的严重误解。恕我直言，SOM 的最大优势之一是它所隐含的所有参数都可以访问和开放以进行参数化。像 U 矩阵这样的方法通过无视这种透明度并用不透明的统计推理再次关闭它来破坏这一点。

# sharepoint - 下拉菜单 SharePoint 2010 - 简单

> ID：13631675
> 
> 赞同：0
> 
> 时间：2012-11-29T17:48:48.117
> 
> 标签：sharepoint, drop-down-menu

我想创建一个简单的下拉菜单，其中包含单独的选项，当将其转发到关联的URL时。这在纯 JavaScript 中很简单，但我遇到了 SharePoint 的问题。是否有任何仅使用 JS 或 SharePoint webparts / 在浏览器选项中的解决方案（而不是在 Visual Studio 中编码或使用 Designer）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T23:55:19.787

如果您不想使用 Visual Studio 或 SharePoint Designer，也可以使用默认的“内容编辑器 Webpart”。您可以上传包含所需 html、javascript 等的文件，然后将该文件用作内容编辑器 Webpart 的内容源。这是添加“增强”内容的快速方法。

首选方法是在 Visual Studio 中创建 webpart，在部署到 SharePoint 的包中添加所需的 css 和 javascript，并在 webpart 中链接所需的文件。

# graph - NEO4J Cypher 查询 START 索引查询与多个节点

> ID：13631678
> 
> 赞同：3
> 
> 时间：2012-11-29T17:48:49.157
> 
> 标签：graph, neo4j, cypher

是否可以编写一个可以从多个节点的精确索引查询开始的密码查询？

例如：

```
START n=node:indexName (key="value1", key="value2" ...) 
```

我无法实现上述目标，我将探索这是否可以通过 lucene 查询来完成。

非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T21:00:36.467

我刚刚问了一个非常相似的问题：

[使用带有 Cypher 的 neo4j 中的索引使用“IN”子句进行查询](https://stackoverflow.com/questions/13634179/querying-with-an-in-clause-using-the-index-in-neo4j-with-cypher)

彼得回答如下

```
start n = node:indexName('key:123 OR key:456') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-06T16:57:45.330

你可以：

```
START thing1 = node:topic('name:(keyword1)'), thing2 = node:topic('name:(keyword2)') 
```

它将寻找两个主题，每个主题包含不同的值；

```
start n=node:topic('name:(keyword1 AND keyword2)') return n 
```

它将在同一个节点中查找多个关键字

# php - number_format 正在四舍五入最终十进制数并增加到下一轮十进制数

> ID：13631681
> 
> 赞同：1
> 
> 时间：2012-11-29T17:48:56.007
> 
> 标签：php, decimal, rounding, number-formatting, decimal-point

我的 MySQL 表中有一个 DOUBLE 数据类型列，我的值为：

```
14.5299 
```

但是 PHP`number_format`将该值四舍五入为：

```
14.5300 
```

如果我只是`echo 14.5299`，它会输出：

```
14.53 
```

如何`14.5299`在不对 HTML 标记中的任何内容进行硬编码的情况下输出？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-29T17:54:01.700

利用`sprintf()`

```
echo sprintf("%2.4f", 14.5399); 
```

文档：[http ://us2.php.net/sprintf](http://us2.php.net/sprintf)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-29T17:55:03.547

这对我有用：

```
<?php
$double = 14.5299;
echo number_format(floor($double*100)/100, 2);
?> 
```

结果是：14.52

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-29T17:55:48.783

```
$double = 14.5299;
var_dump( number_format($double, 4, '.', ',') ); 
```

... 印刷：

```
string(7) "14.5299" 
```

......正如预期的那样。

我有根据的猜测是您的号码实际上有更多的 9：

```
$double = 14.52999; 
```

...在这种情况下，`14.5300`是正确的四舍五入方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-03T08:55:41.200

下一个功能应该可以工作：

```
function fixedNumberFormat($float, $decimals, $withFormat = true) {
   $decPoint = ($withFormat) ? "," : null;
   $thousandsSep = ($withFormat) ? "," : null;
   return substr(number_format($float, $decimals + 1), 0, -1);
}

fixedNumberFormat(14.5299, 4); 
```

# ios - iOS SocketRocket 和长轮询

> ID：13631683
> 
> 赞同：3
> 
> 时间：2012-11-29T17:49:13.383
> 
> 标签：ios, websocket, long-polling, socketrocket

有没有人在他们还需要回退到长轮询的情况下使用 SocketRocket？如果是这样，SocketRocket 是否支持这种情况？对于原生 iOS 客户端的这种情况，你有什么细节或想法吗？

# batch-file - 批处理文件合并另一个批处理，将目录中修改的文件复制到另一个目录

> ID：13631690
> 
> 赞同：0
> 
> 时间：2012-11-29T17:49:33.017
> 
> 标签：batch-file, compare, filenames, last-modified, save-as

这是我想出的，但是我无法从 Aacini 在另一篇文章中提供的代码中获得正确的 xcopy 引用。cmd控制台会说找不到文件“！lastName！！baseExt！” 然后显示已复制 0 个文件。它不是复制，因为我认为 xcopy 语法不允许替换 xcopy 之后的“源”“目录”关系。

任何帮助将非常感激。谢谢

```
@Echo Off
:: variables
set drive=C:\Users\me\Desktop\Test Source Folder
set backupcmd=xcopy /m /s /c /d /e /h /i /r /y /exclude:AutoFileCopy_Rev1.bat

set basename=
for %%a in ("C:\Users\me\Desktop\Test Source Folder") do (
    if not defined baseName (
    rem Is first name of first set
    set baseName=%%~Na
    set baseExt=%%~Xa
    set lastname=%%~Na
    ) else (
    rem Check if this name begin with same baseName
    set name=%%~Na
    for %%b in (!baseName!) do set name=!name:*%%b=!
      if "!name!" neq "%%~Na" (
         rem Yes: Is next name of same set
         set lastName=%%~Na
      ) else (
         rem No: Is first name of next set: copy previous set and pass to next one
         %backupcmd% "!lastName!!baseExt!" "C:\Users\me\Desktop\Test Source Folder\!    baseName!!baseExt!"
         set baseName=%%~Na
         set baseExt=%%~Xa
         set lastName=%%~Na
      )
   )      
)
rem Copy last set

Set _Delay=10
Set _Monitor=C:\Users\me\Desktop\Test Source Folder\
Set _Base=%temp%\BaselineState.dir
Set _Chck=%temp%\ChkState.dir
Set _OS=6
Ver|Findstr /I /C:"Version 5">Nul
If %Errorlevel%==0 Set _OS=5 & Set /A _Delay=_Delay*1000
:_StartMon
Call :_SetBaseline "%_Base%" "%_Monitor%"
:_MonLoop
If %_OS%==5 (Ping 1.0.0.0 -n 1 -w %_Delay%>Nul) Else Timeout %_Delay%>Nul
Call :_SetBaseline "%_Chck%" "%_Monitor%"
FC /A /L "%_Base%" "%_Chck%">Nul
If %ErrorLevel%==0 Goto _MonLoop

echo ___ Backing up JobBoss files...
::%backupcmd% "C:\Users\john.weakley\Desktop\Test Source     Folder" "C:\Users\me\Desktop\Test Destination Folder\"

::CALL "C:\users\me\Desktop\Test Source Folder\Test.bat"

ECHO ___ Checking for new file revisions...
%backupcmd% "!lastName!!baseExt!" "C:\Users\me\Desktop\Test Source Folder\!baseName!!    baseExt!"

Echo.Backup Complete!

Goto :_StartMon
:::::::::::::::::::::::::::::::::::::::::::::::::::
:: Subroutine
:::::::::::::::::::::::::::::::::::::::::::::::::::
:_SetBaseline
If Exist "%temp%\tempfmstate.dir" Del "%temp%\tempfmstate.dir"
For /F "Tokens=* Delims=" %%I In ('Dir /S "%~2"') Do (
Set _Last=%%I
>>"%temp%\tempfmstate.dir" Echo.%%I
)
>"%~1" Findstr /V /C:"%_Last%" "%temp%\tempfmstate.dir"
Goto :EOF 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T17:57:07.217

您需要启用延迟扩展以支持`!VAR!`语法。

将第一行更改为：

```
@echo off & setlocal ENABLEEXTENSIONS ENABLEDELAYEDEXPANSION 
```

# java - RESTEasy 是否有客户端模拟框架？

> ID：13631692
> 
> 赞同：8
> 
> 时间：2012-11-29T17:49:36.513
> 
> 标签：java, unit-testing, jax-rs, resteasy

RESTEasy 提供了用于模拟服务器请求的[服务器端模拟框架。](http://docs.jboss.org/resteasy/docs/2.3.5.Final/userguide/html/RESTEasy_Server-side_Mock_Framework.html)是否有对[客户端框架](http://docs.jboss.org/resteasy/docs/2.3.5.Final/userguide/html/RESTEasy_Client_Framework.html)进行单元测试的等价物？

[InMemoryClientExecutor](http://docs.jboss.org/resteasy/docs/2.3.5.Final/javadocs/org/jboss/resteasy/client/core/executors/InMemoryClientExecutor.html)是否用于此目的？我无法找到有关如何使用此类的文档和示例。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-29T18:55:27.023

看起来`InMemoryClientExecutor`可以用于客户端模拟。查看[源代码](http://grepcode.com/file/repo1.maven.org/maven2/org.jboss.resteasy/resteasy-jaxrs/2.3.4.Final/org/jboss/resteasy/client/core/executors/InMemoryClientExecutor.java#InMemoryClientExecutor)，它在内部使用与服务器端模拟框架相同的类，即`MockHttpRequest`和`MockHttpResponse`。

`InMemoryClientExecutor`使您能够覆盖模拟响应，并且如果您想以这种方式自定义和拦截调用，`createResponse`还具有一个构造函数，该构造函数采用 a 。`Dispatcher`

[这是一个利用客户端框架](http://docs.jboss.org/resteasy/docs/2.3.5.Final/userguide/html/RESTEasy_Client_Framework.html)示例的快速而肮脏的片段，

```
import javax.ws.rs.*;
import javax.ws.rs.core.Response.*;

import org.jboss.resteasy.client.*;
import org.jboss.resteasy.client.core.*;
import org.jboss.resteasy.client.core.executors.*;
import org.jboss.resteasy.mock.*;
import org.jboss.resteasy.plugins.providers.*;
import org.jboss.resteasy.spi.*;

public class InMemoryClientExecutorExample {
    public interface SimpleClient {
       @GET
       @Path("basic")
       @Produces("text/plain")
       String getBasic();

       @PUT
       @Path("basic")
       @Consumes("text/plain")
       void putBasic(String body);

       @GET
       @Path("queryParam")
       @Produces("text/plain")
       String getQueryParam(@QueryParam("param")String param);

       @GET
       @Path("matrixParam")
       @Produces("text/plain")
       String getMatrixParam(@MatrixParam("param")String param);

       @GET
       @Path("uriParam/{param}")
       @Produces("text/plain")
       int getUriParam(@PathParam("param")int param);
    }  

    public static void main(String[] args) {
        RegisterBuiltin.register(ResteasyProviderFactory.getInstance());

        ClientExecutor executor = new InMemoryClientExecutor() {
            @Override
            protected BaseClientResponse<?> createResponse(ClientRequest request, MockHttpResponse mockResponse) {
                try {                    
                    System.out.println("Client requesting " + request.getHttpMethod() + " on " + request.getUri());
                }
                catch(Exception ex) {
                    ex.printStackTrace();
                }
                mockResponse.setStatus(Status.OK.getStatusCode());
                return super.createResponse(request, mockResponse);
            }
        };

        SimpleClient client = ProxyFactory.create(SimpleClient.class, "http://localhost:8081", executor);
        client.putBasic("hello world");
    }
} 
```

# wpf - WPF DataGrid 列宽自动和滚动条

> ID：13631694
> 
> 赞同：17
> 
> 时间：2012-11-29T17:49:39.603
> 
> 标签：wpf, xaml, user-interface, width

我有一个包含许多列的 DataGrid。

`Width="Auto"`如果窗口比所有列都窄，我希望滚动条显示所有内容。如果窗口更宽，我希望列跨越空白空间，因此没有死区。

基本上我希望列最小宽度完全适合内容或标题。如果窗口更宽，则扩大到更大。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-05-21T04:17:43.940

为了`DataGrid`按照您的指定“填充” WPF 中的所有水平空间，请确保您在**XAML**中设置了这些属性：

```
<DataGrid 
   HorizontalAlignment="Stretch" 
   HorizontalContentAlignment="Stretch" 
   ColumnWidth="*" /> 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-29T19:11:27.493

在 XAML 中设置 DataGrid`ColumnWidth="Auto"`

在 UserControl 构造函数中添加

```
dataGrid.Loaded += (s, e) => { // Column widths
    dataGrid.Columns.AsParallel().ForEach(column => {
        column.MinWidth = column.ActualWidth;
        column.Width = new DataGridLength(1, DataGridLengthUnitType.Star);
    });
}; 
```

将其与自定义 DataGrid 一起使用，效果很好。

# memory-leaks - 淘汰赛映射插件无法正确处理分层数据

> ID：13631700
> 
> 赞同：1
> 
> 时间：2012-11-29T17:50:04.723
> 
> 标签：memory-leaks, knockout.js, hierarchical-data, knockout-mapping-plugin

*   我有分层的 JSON 结构，在服务器端的每个新 JSON 之后都不同。鉴于我的模板，这并不能充分显示模型更新。故障排除后，我注意到映射插件没有正确映射子元素（或者我做错了）

*   我还可以跟踪数据模型中每次更新时内存不断增长的情况。

任何帮助将不胜感激。

这个简单的测试是在 JSFiddle [http://jsfiddle.net/Bru5a/1/](http://jsfiddle.net/Bru5a/1/)

这是我的看法

```
<div id="view">
The behavior is different depending on the order you load the model.
<a href="#" id="first">First</a>
<a href="#" id="second">Second</a>
<a href="#" id="third">Third</a>
<span data-bind="text: name"></span>
    <div data-bind="if: $data.child">    
         <b data-bind="text: child.name"></b>
         <div data-bind="if: child.sub">
             <b data-bind="text: child.sub.name"></b>
         </div>
    </div>

</div> 
```

这是我的Javascript：

```
var BaseModel = function(om) {
    ko.mapping.fromJS(om, {}, this);
};
var resourceModel = null;
function applyJson(json) {
    try {
    if(resourceModel){
        ko.mapping.fromJS(json, {} ,resourceModel);
    } else {
        resourceModel = new BaseModel(json);
        ko.applyBindings(resourceModel, $("#view")[0]);
    }
    } catch(e) {
        alert(e);
    }
}
function loadFirst() {
    var json = { "name" : "1",
                 "child" : {
                     "name": "Child One"
                 }
    };
    applyJson(json);
}
function loadSecond() {
     var json = { "name" : "2"  };
    applyJson(json);
}
function loadThird() {
     var json = { "name" : "3",
                 "child" : {
                     "name": "Child Three",
                    "sub" : {
                         "name" : "Third Sub Child"

                     }
                 }
    };
    applyJson(json);
}
$(document).ready(function () {

    $("#second").click(function(){
            loadSecond();
            });
    $("#third").click(function(){
        loadThird();
        });
    $("#first").click(function(){
        loadFirst();
        });
    });​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T02:45:46.127

在您的情况下发生的事情是淘汰赛的行为符合设计。

要查看发生了什么，请在外部 div 中添加以下行

```
<div data-bind="text: ko.toJSON($root)"></div> 
```

您可以查看视图模型中绑定的内容。

要了解正在显示的内容，请在选择不同链接时观察视图模型发生的情况。当您更新模型时，您会看到一旦创建了属性，它就会保留在那里。这是映射器如何工作的设计。

接下来，您必须记住 ko.applyBindings 只被调用*一次*。因此，绑定只应用于调用 applyBindings 时存在的属性一次。当您稍后将属性添加到视图模型时，它们不会自动绑定到数据绑定。

为了使这个示例工作，您需要重新考虑您的视图模型，以便在您调用应用绑定时所有属性都存在。

* * *

**编辑** 我已经编辑了你的小提琴，以展示我在[http://jsfiddle.net/photo_tom/Bru5a/5/上所说的内容](http://jsfiddle.net/photo_tom/Bru5a/5/)

# .net - 有没有办法使用 DBC 视图查询表的列级 DDL？

> ID：13631705
> 
> 赞同：2
> 
> 时间：2012-11-29T17:50:24.600
> 
> 标签：.net, sql, teradata

我正在编写一个 .NET 实用程序，它每小时自动将数据从源表备份到历史表。如果存档表不存在，则必须以编程方式创建它。通常，SQL`create db.historytable as db.sourcetable with no data`可以解决问题。但是，`create table as`不适用于使用标识列的表。这意味着在运行新的 DDL 之前，您必须获取源表的 DDL，更改表的名称，然后将标识列更改为整数（因为我们不希望历史表使用标识列）。

如果我可以为表中每一列的定义获得列级 DDL，那么我可以使用 DataReader 遍历它并重建 DDL。如果 COLUMNTYPE 为 2（2 是标识列），那么我将知道从以下位置修改该列的定义：

```
ID INTEGER GENERATED BY DEFAULT AS IDENTITY
   (START WITH 1 
    INCREMENT BY 1 
    MINVALUE 0 
    MAXVALUE 100000000 
    NO CYCLE) 
```

..只是：

```
ID INTEGER 
```

作为最后的手段，我只对试用感兴趣的其他选项是 1) 使用复杂的正则表达式将标识列定义替换为常规 INTEGER 或 2) 查询 dbc.columns 和 dbc.tables 并使用那里的元数据进行构建整个表的 DDL 从头开始​​。

本质上，我希望我可以在概念上加入 dbc.columnddl 之类的东西，我可以加入 dbc.columns，但我知道，我对此做了很长的尝试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T21:36:42.913

AFAIK，您在 Teradata 数据字典中寻找的格式中没有“列 DDL”。正如您所建议的，您必须从 DBC.Columns 重建类型等。

此外，您可能会发现这很有用：以下是如何获取系统中具有标识列的所有表的列表：

```
locking row for access select  trim (d.databasename) || '.' || trim(v.TVMName)
FROM DBC.IdCol id, DBC.TVM v, dbc.dbase d
where 1=1
and id.tableid = v.TVMId
and v.TableKind='T'
and id.databaseid = d.databaseid
and d.databasename <> 'DBC'
; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T01:26:36.740

您已经很好地考虑了这个问题，我同意您提到的两种方法可能是最简单的，即使它们并不重要。但是，如果您只是想为您的数据创建存档，我建议您使用 Teradata 的存档实用程序 ARCMAIN。ARCMAIN 轻松解决了这个问题。这是stackexchange [Teradata上另一个答案的引用：如何备份使用标识列的表？](https://stackoverflow.com/questions/10386043/teradata-how-to-back-up-a-table-that-uses-an-identity-column)

> 制作备份以供以后使用相同的密钥恢复的方法是使用存档/恢复工具 ARCMAIN。
> 
> 像这样备份：
> 
> ```
> logon my_server/my_user, my_password; 
> archive data tables (my_database.my_table), release lock, file=backup_file; 
> ```
> 
> 像这样恢复：
> 
> ```
> logon my_server/my_user, my_password;
> restore data tables (my_database.my_table), release lock, file=backup_file; 
> ```

# loops - 循环中的 MIPS 递归调用，保留循环变量

> ID：13631718
> 
> 赞同：1
> 
> 时间：2012-11-29T17:50:57.840
> 
> 标签：loops, assembly, recursion, stack, mips

我正在将以下递归 java 程序转换为 MIPS asm。该算法计算所有可能的数字排序/排列。但是递归调用在 for 循环中。我需要在我的 MIPS 版本中保留变量“i”，但我不知道在哪里添加它。我的算法是正确的，只是我的 $t0（即“i”）永远不会重置为 0。我只是不知道如何/在何处将其保存在堆栈中或何时将其从堆栈中取出。任何帮助表示赞赏。

```
import java.util.Arrays;

public class Test 
{
    private static void swap(int[] v, int i, int j) 
    {
        int t = v[i]; 
        v[i] = v[j]; 
        v[j] = t;
    }

    public void permute(int[] v, int n) 
    {
        if (n == 1) 
            System.out.println(Arrays.toString(v));
        else 
        {
            for (int i = 0; i < n; i++) 
            {
                permute(v, n-1);
                if (n % 2 == 1) 
                    swap(v, 0, n-1);
                else 
                    swap(v, i, n-1);
            }
        }
    }

    public static void main(String[] args) 
    {
        int[] ns = {1, 2, 3, 4};
        new Test().permute(ns, ns.length);
    } 
```

}

和 mips 函数注意：我正在排列字符串，而不是整数，但算法是相同的。

```
#----------------------------------------------
# anagram - Prints all the permutations of 
# the given word
#     a0 - the word to compute the anagrams
#     s0 - n, the length of the word
#     a1 - n - 1 (length-1)
#----------------------------------------------
anagram:
addi $sp, $sp, -16

sw $a0, 0($sp)
sw $a1, 4($sp)
sw $s0, 8($sp)
sw $ra, 12($sp)

add $s0, $a1, $zero         # this is n

addi $a1, $s0, -1           # n-1
beq $s0, 1, printS
init: move $t0, $zero       # t0 = i = 0
logic: slt $t1, $t0, $s0        # Set t1 = 1 if t0 < length
       beqz $t1, endAnagram     # if it's zero, it's the end of the loop

jal anagram

li $t2, 2
div $s0, $t2
mfhi $t3

beqz $t3, even          # if even branch to even, otherwise it will go to odd
odd: # swap the n-1 char with the first
add $t4, $a0, $zero
add $t5, $a0, $a1

lb $t6, 0($t4)          # first char
lb $t7, 0($t5)          # n-1 char

sb $t7, 0($t4)          # swap the two
sb $t6, 0($t5)

j inc # skip the even section

even: # swap the ith char with n-1 char
add $t4, $a0, $t0           # ith char
add $t5, $a0, $a1           # n-1 char

lb $t6, 0($t4)          # ith char
lb $t7, 0($t5)          # n-1 char

sb $t7, 0($t4)          # swap the two
sb $t6, 0($t5)

inc: addi $t0, $t0, 1           # t0++;
j logic

endAnagram:
# reset stack pointers
lw $a0, 0($sp)
lw $a1, 4($sp)
lw $s0, 8($sp)
lw $ra, 12($sp)
addi $sp, $sp, 16           # adjust stack
jr $ra

printS: # print string and jump to return
   jal printString # calls printString function which prints the string

   j endAnagram 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T22:19:56.337

`$t0`根据约定，跨子例程调用不保留，您似乎遵循该约定。因此，您有两个选择：

1.  您可以存储`i`在保留的寄存器中，在这种情况下，您需要自己在序言/尾声中保留该寄存器。您已经为`$s0`.
2.  或者您将`$t0`自己保存在堆栈中，围绕子程序调用

在这两种情况下，您都需要为当地人提供额外的空间，因此请更改`addi $sp, $sp, -16`为`addi $sp, $sp, -20`（以及尾声中的匹配代码）。如果您选择选项 #1，例如使用`$s1`存储`i`. 添加代码以保存和恢复`$s1`，就像您为`$s0`. 如果您选择选项 #2，请在 之前添加`jal anagram`写入`$t0`堆栈的代码`jal`，然后在之后重新加载它。

# jquery - 设置动态列表项的点击功能（使用Knockout.js）

> ID：13631719
> 
> 赞同：0
> 
> 时间：2012-11-29T17:51:02.600
> 
> 标签：jquery, knockout.js, click

我正在使用 Knockout.js 将项目添加到下拉列表中的无序列表中。我想捕获对这些列表项的点击，但我不知道该怎么做。

我认为现在该列表正在被正文单击（隐藏所有下拉菜单）取消，但在单击时添加 e.stopPropagation() 甚至似乎都不起作用。

**[这是下面的代码片段（为了可读性而隔开......但这种方式无效），您可以在此处](http://jonathonmoore.com/search1/index.html)**看到正在运行的搜索栏（带有完整代码）。

```
$("#dropdown").append("
   <ul id='list' data-bind=\"template: { 
         name:'obj', foreach:objects }, 
         click: function() {
               $('.listObjItem').on('click', function() {   
                     // CAPTURE THE CLICK (not working)          
                     alert($('#search').val($(this).text())); 
         });}
   \">
   </ul>");

$("#searchContainer").append(
      "<script type='text/html' id='obj'>
             <li class='listObjItem'>
                    <span data-bind='text: name'></span>&nbsp;in&nbsp;
                    <strong data-bind='text: type'></strong>
             </li>
       </script>"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T18:08:34.543

尝试**委派活动**..

代替

```
$('.listObjItem').on('click', function() { 
```

做这个

```
$('body').on('click','.listObjItem' , function() { 
```

`'body'`可以用任何静态父容器替换..

# python - 优化的切割/切片排序列表的方法

> ID：13631720
> 
> 赞同：9
> 
> 时间：2012-11-29T17:51:03.103
> 
> 标签：python, list, find

Python中是否有任何预制的优化工具/库来剪切/切片列表以获取“小于”的值？

这是问题所在：假设我有一个类似的列表：

```
a=[1,3,5,7,9] 
```

我想删除所有`<=`6 的数字，所以结果列表是

```
[7,9] 
```

6 不在列表中，所以无法使用列表的内置`index(6)`方法。我可以做这样的事情：

```
#!/usr/bin/env python
a = [1, 3, 5, 7, 9]
cut=6
for i in range(len(a)-1, -2, -1):
    if a[i] <= cut:
        break
b = a[i+1:]
print "Cut list: %s" % b 
```

如果要从中剪切的索引接近列表的末尾，这将是一种相当快速的方法，但是如果项目接近列表的开头（假设我想删除所有`>2`，会有很多次迭代）。

我也可以使用二进制搜索等实现我自己的 find 方法，但我想知道是否有一个更广泛的内置库来处理我可以在其他情况下重用的此类事物（例如，如果我需要删除所有的数字`>=6`）。

先感谢您。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T17:54:13.823

您可以使用[bisect 模块](http://docs.python.org/2/library/bisect.html)执行排序搜索：

```
>>> import bisect
>>> a[bisect.bisect_left(a, 6):]
[7, 9] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-29T17:53:10.257

[`bisect.bisect_left`](http://docs.python.org/2/library/bisect.html)是你要找的，我猜。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-29T18:04:12.853

如果您只想过滤满足特定条件的所有元素的列表，那么最直接的方法是使用内置[`filter`](https://docs.python.org/3/library/functions.html#filter)函数。

这是一个例子：

```
a_list = [10,2,3,8,1,9]

# filter all elements smaller than 6:
filtered_list = filter(lambda x: x<6, a_list) 
```

`filtered_list`遗嘱包含：

```
 [2, 3, 1] 
```

**注意：**此方法不依赖于列表的排序，因此对于非常大的列表，可能为有序搜索优化的方法（如[bisect](http://docs.python.org/2/library/bisect.html)）在速度方面表现更好。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-11-24T17:12:03.283

**二等分左右辅助函数**

```
#!/usr/bin/env python3

import bisect

def get_slice(list_, left, right):
    return list_[
        bisect.bisect_left(list_, left):
        bisect.bisect_left(list_, right)
    ]

assert get_slice([0, 1, 1, 3, 4, 4, 5, 6], 1, 5) == [1, 1, 3, 4, 4] 
```

在 Ubuntu 16.04、Python 3.5.2 中测试。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-29T18:05:03.370

添加到乔恩的答案中，如果您需要实际删除小于 6 的元素并希望保留对列表的相同引用，而不是返回一个新的引用。

```
del a[:bisect.bisect_right(a,6)] 
```

您还应该注意，这`bisect`仅适用于排序列表。

# javascript - Jquery jscrollpane getContentPositionY 不起作用

> ID：13631723
> 
> 赞同：0
> 
> 时间：2012-11-29T17:51:22.880
> 
> 标签：javascript, jquery, jscrollpane

差不多就是这样。当我尝试使用 getter getContentPositionY() 时，整个脚本会冻结。有任何想法吗？或者我可以获得 jscrollpane 滚动条位置的任何其他方式都会很棒。

这是我的代码：

```
$(document).ready(function() {
$('#text-content').load(function() {
    $('#right').jScrollPane({
        verticalDragMinHeight: 10,
        verticalDragMaxHeight: 10,
        horizontalDragMinWidth: 10,
        horizontalDragMaxWidth: 10
    });
});

var pane_api = $("#right").data('jsp');
alert(pane_api.getContentPositionY());
}); 
```

和标记：

```
<div id="right">
    <img src="pics/BIOGRAPHY/tretji_stolpec/text_bio.png" id="text-content" />
</div> 
```

CSS：

```
#right {
float:left;
width:50%;
height:95%;
margin-left:35px;
margin-top:15px;
margin-bottom:15px;
overflow:auto;
} 
```

感谢您的任何建议。干杯，瓦尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T18:59:08.110

您可能误解了这一行：

```
$('#text-content').load(function() { 
```

load 需要一个从哪里加载的 url。你只是在提供一个功能。你想达到什么目的？？？

# vb.net - 在 VB.NET 中设置 asp:checkbox 样式

> ID：13631725
> 
> 赞同：0
> 
> 时间：2012-11-29T17:51:26.003
> 
> 标签：vb.net, checkbox, styles

我想在 VB.NET 中使用 asp:checkbox 为复选框本身添加一些样式。现在我发现的所有 CSS 仅适用于输入，我正在使用 asp:checkbox 和 asp:checkboxlists 并希望能够设置它们的样式。

是否可以通过仅 CSS 或其他方法来做和做。我只喜欢 CSS，因为我的表单很复杂。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T17:58:21.013

asp:checkbox 呈现如下：

```
<span class="checkbox">
<label>option one</label>
<input type="checkbox" name="option" />
</span> 
```

将**CssClass**属性应用于控件，如“复选框”，并使用该类名称创建一个 css：

```
.checkbox{
padding:10px;
margin:5px;
cursor:pointer;
color:#ffffff;
-moz-border-radius: 10px; -webkit-border-radius: 10px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T17:58:36.347

您可以使用 asp:Checkbox **CssClass 属性**将类分配给复选框。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-17T20:42:27.333

使用 CSS 选择器继承来指定仅对呈现的 HTML 的控制。这会将样式应用于位于具有“myclass”类的容器中的所有 input[type=checkbox] 实例。

```
<style>
    .myclass input[type=checkbox] {width: 24px; height: 24px;position: relative;top: 6px;}
</style>
<asp:checkbox id="Checkbox1" text="the label text" cssclass="myclass" runat="server" checked="true" /> 
```

# ios - iOS / xcode：我没有得到项目文件（.xcodeproj），只有源代码。我如何构建项目？

> ID：13631726
> 
> 赞同：3
> 
> 时间：2012-11-29T17:51:28.637
> 
> 标签：ios, xcode

> **可能重复：**
> [有没有办法重建 Xcode 项目文件？](https://stackoverflow.com/questions/10569230/is-there-a-way-to-reconstruct-an-xcode-project-file)

我是 ios 和 xcode 的新手。要查看应用程序的功能，我通常会获得一个项目文件 (.xcodeproj) 以及源代码。我双击项目文件，一切都在 xcode 中很好地打开了。

这次我没有得到项目文件。我只有一个文件夹，里面有源代码。

如何获取源代码并从中制作项目？我尝试创建一个新的 Xcode 项目，以及连接到存储库，但到目前为止还没有成功。再说一次，我是新手，不知道我在做什么。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T18:10:07.413

苹果提供的本[指南](http://developer.apple.com/library/ios/#documentation/ToolsLanguages/Conceptual/Xcode4UserGuide/020-Start_a_Project/start_project.html)应该为您提供创建新项目的良好分步过程。

创建项目后，将所有头文件 (.h) 和主 (.m) 文件以及接口 (.xib) 文件放入项目中。

如果您拥有所有正确的文件并且程序构建正确，那么总体上应该不会有问题。如果您在完成此操作后遇到更多问题，那么您的文件很可能存在问题。

# ios - 让图像沿 x 轴跟随您的手指，但具有固定的 y 坐标

> ID：13631728
> 
> 赞同：0
> 
> 时间：2012-11-29T17:51:34.830
> 
> 标签：ios, objective-c, cocoa-touch

我正在使用 touchesMoved 方法让图像沿着屏幕底部“跟随”某人的手指。所以图像将跟随手指的 x 位置，但它忽略 y 位置并保持垂直固定在底部（但不是水平固定）。有什么方法可以实现吗？

这是我的代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    // create basket image that will be shown on the screen
    basketView = [[UIImageView alloc]
    initWithImage:[UIImage imageNamed:@"bucket.png"]];
    basketView.frame = CGRectMake(130.0, 412.0, 50.0, 50.0);
    [self.view addSubview:basketView];
}

-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    // get current touch location
    UITouch *touch = [[event touchesForView:self.view] anyObject];
    CGPoint point = [touch locationInView:self.view];
    // update location of the image
    basketView.center = point;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T17:57:41.423

保持y位置，改变x

```
basketView.center = CGPointMake(point.x, basketView.center.y); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T17:58:12.167

在 touchesMoved 中执行此操作

```
-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    // get current touch location
    UITouch *touch = [[event touchesForView:self.view] anyObject];
    CGPoint point = [touch locationInView:self.view];
    // update location of the image
    basketView.center = CGPointMake(point.x,basketView.center.y);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T17:59:56.200

执行以下操作...

```
-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
    {
        // get current touch location
        UITouch *touch = [[event touchesForView:self.view] anyObject];
        CGPoint point = [touch locationInView:self.view];

        point.y=basketView.center.y;   //Fix 'y' of basket
        // update location of the image
        basketView.center = point;
    } 
```

# javascript - 如何锁定滚动条并使其可见

> ID：13631730
> 
> 赞同：8
> 
> 时间：2012-11-29T17:51:34.677
> 
> 标签：javascript, css, scrollbar

当用户点击任何公寓时，我会出现一个对话框。

如果视口高度大于 550px，我想要做的是锁定滚动条。现在我适用`overflow:hidden`于正文，但这会导致滚动条隐藏时站点跳转。我想禁用滚动，但仍显示滚动条。可能吗？

提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-29T19:10:11.847

您可以通过检测滚动来模拟滚动条锁定，然后滚动回之前的位置..（这在某些浏览器上可能会显得生涩，特别是如果您拖动滚动条本身）

```
function lockScroll() {
    var lockX = window.scrollX;
    var lockY = window.scrollY;

    function lockIt() {
        window.scrollTo(lockX,lockY);
        return false;
    }

    window.addEventListener("scroll",lockIt,false)

    return {
        stop: function(){
            window.removeEventListener("scroll",lockIt,false)
        }
    }
} 
```

用法：

```
var locker = lockScroll(); // locks scrolling 
```

完成后，您可以重新启用滚动

```
locker.stop();  // unlocks scrolling 
```

# entity-framework - 使用 EF Power Tools Beta 2 和 VS2012 Update 1 逆向工程师代码优先时出错

> ID：13631738
> 
> 赞同：12
> 
> 时间：2012-11-29T17:52:04.143
> 
> 标签：entity-framework

只是尝试使用 EF Power Tools Beta 2“逆向工程师代码优先”工具为现有数据库生成 POCO 对象、上下文等。

我在 Windows 7 64 位上使用 VS2012 Ultimate 和 Update 1。

我将它指向我现有的数据库并点击确定。我在构建输出窗口中收到以下错误：

> 处理模板“Entity.tt”时出现一个或多个错误。C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\Extensions\Microsoft\Entity Framework Tools\Templates\Includes\EF.Utility.CS.ttinclude(1,4) ：错误：名为“T4VSHost”的处理器'找不到名为“CleanupBehavior”的指令。转换将不会运行。引发了以下异常：System.InvalidOperationException：找不到指令“T4VSHost”的处理器。在 Microsoft.DbContextPackage.Utilities.EfTextTemplateHost.Microsoft.VisualStudio.TextTemplating.ITextTemplatingEngineHost.ResolveDirectiveProcessor（字符串处理器名称）在 Microsoft.VisualStudio.TextTemplating.Engine.ProcessCustomDirectives（ITextTemplatingEngineHost 主机，TemplateProcessingSession 会话，

有任何想法吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-29T21:15:57.633

看起来这是[实体框架和 Visual Studio 2012 更新 1的已确认问题](http://connect.microsoft.com/VisualStudio/feedback/details/769934/entityframework-bug-in-vs2012-update-1-ctp)

该链接目前确实包含 2 个解决方法

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-29T22:24:01.560

这是 EF Power Tools 上的一个合法问题，但它与 CTP 问题无关，该问题已在最终的 VS 更新版本中解决。EF 电动工具的修复工作正在进行中。

大卫奥班多

实体框架团队

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T00:28:44.223

我也遇到了同样的问题。罪魁祸首是一个名为 Entity Framework Power Tool Beta 3 的包。更新了这个，一切都恢复正常了。

# ruby-on-rails - 如何像登录 Rails 2.0.x 一样启用 Rails 3

> ID：13631739
> 
> 赞同：0
> 
> 时间：2012-11-29T17:52:07.737
> 
> 标签：ruby-on-rails, debugging, logging, ruby-on-rails-2

我有一个必须使用的旧项目，我`Rails 2.0.2.`遇到了调试应用程序错误的问题。当前的问题是我在开发环境中的日志输出很短：

*   没有 SQL 查询；
*   没有错误跟踪；
*   没有参数检查；
*   没有响应时间等等。

我所拥有的（对于每个请求）：

```
127.0.0.1 - - [29/nov/2012:17:54:41 EET] "POST /products/1/nested HTTP/1.1" 500 60
- -> /products/1/nested 
```

在配置中，我已`log_level`启用`:debug`（默认情况下已启用 :debug）。

知道如何改进登录`Rails 2.0.2`以使其看起来像吗`Rails 2.3.x`？`3.x`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T18:13:40.583

您发布的日志是 apache（或其他 Web 服务器）日志。您想要登录`app/log/<environment>.log`其中包含所有好东西的日志，就像在 Rails 2 中一样。

# c# - 多维数组是一个不错的选择吗？

> ID：13631741
> 
> 赞同：0
> 
> 时间：2012-11-29T17:52:13.057
> 
> 标签：c#, multidimensional-array

对于我的解析器，我想（取决于用户输入）为用户选择解析的站点保存解析统计信息。

假设用户选择站点 A、站点 B 和站点 D：

然后我从我的线程中希望能够添加不同的统计信息，例如；解析的链接，解析的页面，找到的重复项等（因此基本上是网站的 int 值）。

我将如何将它创建到 c# 中？我的想法是制作某种多维数组？

有没有更好的办法？

非常欢迎任何建议:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T17:54:39.647

我将创建一个封装统计信息的类，然后使用以网站名称为键的字典。

```
public class Statistics
{
    public int PagesParsed { get; set; }
}

var collection = new Dictionary<string, Statistics>();

collection.Add("Site A", new Statistics { PagesParsed = 42 });
var siteAStatistics = collection["Site A"]; 
```

# c# - C# UserControl Not 和 Yes 带文本

> ID：13631744
> 
> 赞同：-4
> 
> 时间：2012-11-29T17:52:26.610
> 
> 标签：c#, user-controls, overflow

默认为无复选框

当我运行程序并单击是复选框时，程序溢出

```
private void checkEdit1_Click(object sender, EventArgs e)
        {
            checkEdit2.Checked = false;
            textEdit1.Enabled = true;
            answered = true;
            optional = textEdit1.Text;

            if (!checkEdit1.Checked)
            {
                checkEdit1.Checked = true;
                checkEdit2.Checked = false;
                textEdit1.Enabled = true;
                optional = textEdit1.Text;
            }

        }

        private void checkEdit2_Click(object sender, EventArgs e)
        {
            checkEdit1.Checked = false;
            textEdit1.Enabled = false;
            answered = false;

            if (!checkEdit2.Checked)
            {
                checkEdit2.Checked = true;
                checkEdit1.Checked = false;
                textEdit1.Enabled = false;
                answered = false;
            }

        } 
```

你认为是什么错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T18:11:36.487

而不是`Click`事件，您应该`CheckedChanged`以这种方式使用事件：

```
checkEdit1.CheckedChenged += new EventHandler(checkEdit1_CheckedChanged);
checkEdit2.CheckedChenged += new EventHandler(checkEdit2_CheckedChanged); 
```

* * *

```
private void checkEdit1_CheckedChanged(object sender, EventArgs e)
{
    if(checkEdit1.Checked == checkEdit2.Checked)
      checkEdit2.Checked = !checkEdit.Checked;
}

private void checkEdit2_CheckedChanged(object sender, EventArgs e)
{
    if(checkEdit1.Checked == checkEdit2.Checked)
      checkEdit2.Checked = !checkEdit.Checked;
} 
```

但在这种情况下，最好的方法是使用一组单选按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T18:04:27.940

假设这些方法已连接到`checkEdit1`并且`checkEdit2`我建议您不要更改`checkEdit1`in`checkEdit1_Click`因为它已经更改 - 仅修改备用的状态。

然而，当你修改对方的状态时，除非你小心，否则你会被回调。最终计算机放弃了——溢出！

正如@Cyborgx37 的评论中提到的，单选按钮是这里更好的用户体验选择！

一种可能的解决方案，将单个方法绑定到 OnClick to BOTH 复选框：

```
private bool internallyUpdating = false;

private void CheckboxClick(object sender, EventArgs e)
{
    if ( !internallyUpdating )
    {
        // Prevent subsequent changes
        internallyUpdating = true;

        // Exchange 'checked' state
        if ( sender == checkEdit1 )
        {
            checkEdit2.Checked = !checkEdit2.Checked;
        } 
        else // if (sender == checkEdit2)
        {
            checkEdit1.Checked = !checkEdit1.Checked;
        }

        // other logic here..

        // restore 'on change' functionality.
        internallyUpdating = false;
    } 
```

# android - 检测状态栏可见性/TYPE_SYSTEM_OVERLAY 未自动调整大小

> ID：13631745
> 
> 赞同：37
> 
> 时间：2012-11-29T17:52:28.297
> 
> 标签：android, layout, params

我正在使用众所周知的`TYPE_SYSTEM_OVERLAY`方法来创建始终位于其他视图之上的全屏覆盖。

当状态栏被另一个应用程序隐藏时，通过`Moto Atrix2 API15`覆盖`AVD`视图自动调整大小（垂直扩展）。正如我认为的那样，叠加层似乎“保持在所有其他视图的顶部”。当状态栏再次出现时，叠加层会再次自动缩小它的大小（减少垂直像素，基本上减去状态栏的高度）。`API 10``17`

这是所需的行为，并且我倾向于认为这不是例外或有缺陷的行为，因为它适用于许多不同的仿真器以及至少一个设备制造商（*摩托罗拉*），也许更多，但我无法访问`addtl devices.`

**问题：** 在`Samsung GS2 (API15)`& 上也测试过`Kindle Fire (API10?)`，当状态栏被另一个应用程序隐藏（全屏应用程序后面的状态栏）时，覆盖不会自动调整大小（填充状态栏曾经所在的空间）。在这些设备上，第一次创建视图后，我不再从视图的 onSizeChanged 覆盖中获得任何事件。

这是相关的代码：

```
params = new WindowManager.LayoutParams( 
    1, WindowManager.LayoutParams.MATCH_PARENT, 
    WindowManager.LayoutParams.TYPE_SYSTEM_OVERLAY, 
    WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE
    |WindowManager.LayoutParams.FLAG_NOT_TOUCH_MODAL, 
    PixelFormat.TRANSPARENT);
wm.addView(sizeLayout, params); 
```

sizeLayout 具有 onSizeChanged 覆盖。

我几乎玩遍了所有`windowmanager` `layoutparam`我能找到的东西，包括 SYSTEM_ALERT、FLAG_LAYOUT_IN_SCREEN 等。在我弄清楚之前我不会睡觉！

**2012 年11 月 30 日编辑**：我从@deviant 找到了这个：[https](https://stackoverflow.com/a/9195733/1851478) ://stackoverflow.com/a/9195733/1851478这基本上就是我正在做的事情，但是问题仍然存在于某些设备没有自动调整 system_overlay 的大小。也许我应该提出一个错误。

更多信息：如果我在视图树顶部有一个全屏应用程序时强制重绘（或者甚至只是加载覆盖应用程序），我的覆盖仍然不会在状态栏通常占用的空间上绘制（即使状态栏在绘制时不在视图中），所以看起来好像覆盖没有“覆盖”在全屏的最前面窗口的顶部（我已经创建并测试了许多全屏应用程序使用多种方法使它们全屏显示）。在这些设备上，让覆盖在状态栏上绘制的唯一方法（即使状态栏不在视图中）是使用标志`FLAG_LAYOUT_IN_SCREEN`，但是布局的大小永远不会改变，总是全屏，并且因此回到最初的问题，为什么这适用于某些设备而不适用于其他设备。

***2012 年 12 月 12 日编辑***：所以我对此没有任何进一步的运气，我确实尝试在视图上使用 getLocalVisibleRect，但不幸的是，由于我的应用程序不拥有 SystemUI 视图，它无法检测到覆盖下方的内容。我想使用自定义 ROM 我可以做到这一点，但我需要一个没有 root 的解决方案。

我确实看到市场上的其他应用程序在检测我上面列出的非工作手机上的状态栏时遇到了同样的问题。示例：酷工具，欧米茄状态栏和状态栏+。赏金提高。

***编辑 12/19/12***添加图片。请注意，在工作设备上，灰色区域也“覆盖”黑色区域（当前全屏的任何应用程序），黑色区域实际上覆盖整个屏幕，我只是将灰色区域显示为我的叠加层，即使它也是全屏（减去或加上状态栏的高度，取决于工作/非工作设备以及它是否在视图中）。

![在此处输入图像描述](../Images/6fc2cbf8745d8cc8a4eef4f895470d14.png) ![在此处输入图像描述](../Images/e4d6f8fe326e0a527be11cd8dc907a94.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T09:51:58.310

希望我了解您在这里的目的，但是在我的应用程序（TEAM BatteryBar）中，我遇到了类似的问题。（没有root最低权限）

我无法在 API11 以下的任何设备上检测到全屏（并且在 API11 以上的某些（主要是三星）设备上是间歇性的）。因此，我通过使用不同的布局参数向 WindowManager 添加第二个布局，然后通过检查窗口大小覆盖 onLayout 以检查 statusBar 是否仍然存在，从而为其创建了一个自定义侦听器。从那里你可以对你的主视图做任何你需要做的事情。

我打算整理它，但它起作用了，所以我没有：P 代码已经有一年多了，而且是从我第一次开始为 android 编码时开始的，所以是的。值得深思。希望能帮助到你。

[这是我的 github](https://github.com/pvyParts/Android-Helpers)上的 repo 中的代码，直接从我的应用程序中复制粘贴，说明我是如何使用它的。这里的小片段

```
wm.addView(sizeLayout, params);// add your view

// then add the next one
Screendetect mDetector;
mDetector = new Screendetect(this);
mDetector.setOnFullScreenListener(new OnFullScreenListener() {
            @Override
            public void fsChanged(boolean FS_Bool) {
                // TODO rethink this to be better.... bit hacky...
                if (FS_Bool) {
                    Log.d("battbardetect", "Statusbar hidden");
                    FS_vissible(); // do what ever you need to
                } else if (!FS_Bool) {
                    Log.d("battbardetect", "Statusbar Vissible"); 
                    FS_hidden(); // do what ever you need to
                }
            }
        });
wm.addView(mDetector, params); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T05:51:22.380

我认为这可能与在系统将可见性设置为隐藏而不是消失的对话框窗口上隐藏标题栏相同的问题。这会导致对话框窗口不正确地居中。

为此，这就是我修复它的方法。这可能适用于您的情况，但您可能需要根据状态栏标识符的名称对其进行调整。

```
Window window = dialog.getWindow();
View view = window.getDecorView();
int topPanelId = getResources().getIdentifier("topPanel", "id", "android");
LinearLayout topPanel = (LinearLayout) view.findViewById(topPanelId);
topPanel.setVisibility(View.GONE); 
```

# c - 使用 free() 会产生分段错误

> ID：13631747
> 
> 赞同：2
> 
> 时间：2012-11-29T17:52:48.610
> 
> 标签：c, segmentation-fault, malloc, free

我遇到了一个似乎无法通过内存分配解决的问题。

我使用 malloc 创建了 3 个动态分配的数组（ipiv、k、b），但是当我尝试释放它们时，我得到了一个 seg 错误。如果我不释放它们，代码就可以正常工作（但如果我运行太多迭代，我的内存就会用完）。

这是代码...我已经删除了所有不使用 3 个数组的部分，因为代码很长。

```
#include<stdio.h>
#include <string.h>
#include<stdlib.h>
#include<math.h>
#include <mpi.h>
#include "mkl.h"

#define K(i,j) k[(i)+(j)*(n)]

void dgesv_( const MKL_INT* n, const MKL_INT* nrhs, double* a,
            const MKL_INT* lda, MKL_INT* ipiv, double* b, 
            const MKL_INT* ldb, MKL_INT* info );

int main()
{
    int *ipiv=malloc(n*sizeof(int));
    for (i=0; i<n; i++) {
        ipiv[i]=0;
    }

    for (globloop=0; globloop<=lasti; globloop++) {

        double a[ndofs];
        double rhs[ndofs];
        double F[ndofs];

        double *k=malloc(n*n*sizeof(double));

        //var for stiffness matrix (this is the one acutally fed to dgesv) 
            //see define at top
        for (i=0; i<n; i++) {
            for (j=0; j<n; j++) {
                K(i,j)=0.0;
            }
        }   

            //bunch of stuff modified, a,rhs,and F filled... ect

        while (sos>=ep && nonlinloop<=maxit) {

            double KFull[ndofs][ndofs];
            for (i=0; i<ndofs; i++) {
                for (j=0; j<ndofs; j++) {
                    KFull[i][j]=0.0;
                }
            }

                    //KFull filled with values..

            //trim the arrays to account for bcs 
            double *b=malloc(n*sizeof(double));
            for (i=0; i<n; i++) {
                b[i]=rhs[i+2];
            }

            //k array filled
                    //see define above
            for (i=0; i<n; i++) {
                for (j=0; j<ndofs-2; j++) {
                    K(i,j)=KFull[i+2][j+2];
                }
            }

            //SOLVER
            dgesv_(&n,&one,k,&n,ipiv,b,&n,&info);

            //now we must take our solution in b, and place back into rhs
            for (i=0; i<n; i++) {
                rhs[i+2]=b[i];
            }
            nonlinloop++;
            free(b);
        }
        free(k);
    }
    free(ipiv);
    return 0;
} 
```

释放这三个变量中的任何一个都会给我一个分段错误。我对此感到非常困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T19:37:49.193

如果`n=ndofs-4`（如 OP 的评论中所述） then`ndofs-2` **大于** `n`. 然后代码将破坏内存

```
K(i,j)=KFull[i+2][j+2]; 
```

因为`j`跑到`ndofs-2-1`并且`K`（仅）定义为`K[0..n-1][0..n-1]`。

# c# - 将所有基类定义移至通用 dll

> ID：13631755
> 
> 赞同：0
> 
> 时间：2012-11-29T17:53:24.757
> 
> 标签：c#, architecture, mef

我在我的应用程序中使用 MEF。我的应用程序有 4 个部分（类库）和一个主模块，主模块的职责是与上述部分交互并将工作委托给它们。

我已经在一个名为“Common”的库中编写了所有接口和抽象基类，并将其引用到所有其他具有从这些基类继承的类的 dll。我将所有基类和接口定义移至“Common”库，以便我可以在我的主程序中添加对该 dll 的引用，并且所有基类和接口都可以随时使用。

这是正确的方法吗？MEF 中的另一个选项是什么，我可以使用它来引用主模块中的基类而不引用 dll。

例如：- 抽象类 baseAbc 和接口 IAbc 定义在 common.dll 中，是否可以在我的主模块中引用 baseAbc 和 IAbc 而无需添加对 Common.dll 的引用

# python - 如何合并 2 个 Shapely 对象？

> ID：13631765
> 
> 赞同：9
> 
> 时间：2012-11-29T17:53:46.940
> 
> 标签：python, merge, shapely

我尝试在我的 Python 项目中合并两个[Shapely对象。](https://shapely.readthedocs.io/en/latest/manual.html#shapely.ops.cascaded_union)有一种手册描述了 Shapely 的一些特性，例如`cascaded_union()`但我只适用于多边形。该`shapely.ops.unary_union()`方法也应该适用于其他几何形状，但我无法让它工作。

简而言之：如何合并 2 个 LinearRing 对象？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T12:23:37.583

我实际上自己解决了这个问题。

```
p1 = Polygon(ring.coords) 
p2 = Polygon(ring2.coords) 
```

用我的戒指制作多边形。然后我用这些多边形创建一个数组。将它们与 cascaded_union 合并并从新多边形创建一个 LinearRing。

```
pols = [p1, p2] 
new_pol = ops.cascaded_union(pols) 
new_ring = LinearRing(new_pol.exterior.coords) 
```

# jquery - Django - 如何从 js 文件中获取响应变量？

> ID：13631769
> 
> 赞同：0
> 
> 时间：2012-11-29T17:54:11.303
> 
> 标签：jquery, django, django-views, simplejson

从我的角度来看，我正在向 jquery 端发送一个变量。我想要的是在我的 js 文件中获取并使用该值。我试过 $.post 或 response.xx 但没有用。这是我的相关视图部分：

```
 try:
                    post = Post(title=title, body=body, isdraft=isdraft, owner=owner)
                    post.save()
                except:
                    post = None
                json_dump = simplejson.dumps(post.id)
                return HttpResponse(json_dump, mimetype='application/json') 
```

我可以`post.id`在萤火虫的响应部分看到。但是我如何在我的 js 文件中使用该值。我想做的是：

```
 var auto_save_id = $('#auto_save_id').val();
        if (VALUE_FROM_JSON)){
            auto_save_id = VALUE_FROM_JSON;
        } 
```

谢谢你

编辑：这是我所有相关的视图部分：

```
if 'auto_save_id' in request.POST:
        if request.POST['auto_save_id'] == "0":
            title = request.POST['title']
            body = request.POST['body']
            get_isdraft = request.POST['isdraft']
            if get_isdraft == "True":
                isdraft = True
            else:
                isdraft = False
            owner = request.user
            if request.is_ajax():
                try:
                    post = Post(title=title, body=body, isdraft=isdraft, owner=owner)
                    post.save()
                except:
                    post = None
                json_dump = simplejson.dumps(post.id)
            return HttpResponse(json_dump, mimetype='application/json')
        else:

            post_id = request.POST['auto_save_id']
            title = request.POST['title']
            body = request.POST['body']
            get_isdraft = request.POST['isdraft']
            if get_isdraft == "True":
                isdraft = True
            else:
                isdraft = False
            owner = request.user
            post = Post.objects.get(id=eval(post_id))
            if request.is_ajax():
                post.title = title
                post.body = body
                post.isdraft = isdraft
                post.owner = owner
                post.save()
                json_dump = simplejson.dumps(post.id)
            return HttpResponse(json_dump, mimetype='application/json') 
```

我有一个隐藏的输入，其值为“0”。在第一次加载页面时，该值为“0” 10 秒后 auto_save 函数运行并发送数据以查看。在视图中，我检查 auto_save_id = 0：如果是，我创建新帖子并将该帖子的 id 发送到模板端。之后每 10 秒 ajax 必须更新该帖子。为了防止每 10 秒创建新帖子，我需要保存帖子的 ID。

我希望这很清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T18:44:53.003

首先，我想你想发送一本字典来`simplejson.dumps()`喜欢：

```
json_dump = simplejson.dumps({'pid': post.id}) 
```

然后，在您的 javascript 函数中，您将使用您的 argument.pid 获取 id，例如：

```
function myCallback(data){
    alert(data.pid);
} 
```

# asp.net - 从 MVC 视图中的数据库渲染 PDF？

> ID：13631773
> 
> 赞同：1
> 
> 时间：2012-11-29T17:54:19.147
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, pdf

我想知道是否可以在不使用 MVC 3 中的 3rd 方组件的情况下执行此操作。（尽管我对免费组件持开放态度。）那里有几个链接，但它们似乎主要关注报告和其他代码示例确实声称做这种事情似乎没有编译。我在数据库中保存和检索 PDF 时没有任何问题，但是当我将 PDF 作为 a`File`或 a返回时`FileStreamResult`提示用户下载。更理想的方法是在浏览器中实际呈现 PDF。我看过 iTextSHArp，它在一定程度上完成了这项工作，但它不是一个完整的解决方案。例如，当且仅当客户端安装了 Adob​​e Reader 时，它才会在视图中显示 PDF，否则会提示下载。所以从技术上讲，我主要是在寻找一个 PDF 查看器。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T12:07:51.983

到目前为止，[这](http://www.codeproject.com/Articles/41933/ASP-NET-PDF-Viewer-User-Control-Without-Acrobat-Re)似乎是最好的解决方案，尽管我还没有尝试过。它需要移植到 C# 并使 MVC 兼容，但如果您不想在[Syncfusion 之类](http://www.syncfusion.com/products/reporting-edition/pdf-viewer)的 3rd 方组件上大放异彩，这似乎是可行的方法。

**编辑 12 月 4 日**

我花了好几天寻找解决方法，我想我找到了一个很好的解决方法。Ghostscript 转换器已经有许多 C# 包装器，那么为什么不推出自己的方案呢？（我最终做了）。包装：

[马克雷德曼的包装](http://redmanscave.blogspot.com)

[马特以法莲的包装](http://www.mattephraim.com/blog/2009/01/06/a-simple-c-wrapper-for-ghostscript/)

如果你想要一个更实用的解决方案，Codeproject 上有 2 篇很棒的文章：

[如何使用 Ghostscript API 将 PDF 转换为图像](http://www.codeproject.com/Articles/32274/How-To-Convert-PDF-to-Image-Using-Ghostscript-API)

[使用 C# 和 GhostScript 将 PDF 转换为一系列图像](http://www.codeproject.com/Articles/317700/Convert-a-PDF-into-a-series-of-images-using-Csharp)

但是我觉得解决方案仍然不是最佳的。例如，Ghostscript 转换器适用于文件目录，这意味着您必须在磁盘上生成 PDF 文件的物理副本以供转换器使用，如果这可以使用字节数组来实现会好得多。不过，可能有一种方法可以解决这个问题。

**编辑 12 月 21 日**

最后，为了完整起见并回答实际问题：

经过更多研究，我得出结论，目前最好的 PDF 查看器是出色的[PDF.js](https://github.com/mozilla/pdf.js)库。我已经尝试了一些，对我来说这是迄今为止最好的。我什至尝试过第三方组件（[Syncfusion 的 Pdf Viewer](http://www.syncfusion.com/products/user-interface-edition/aspnet-mvc/pdf-viewer)），甚至不如 PDF.js 一致或可靠。PDF.js 的缺点：

1.  有点混乱和难以开始，文档有点弱
2.  它只适用于最新的浏览器（很自然，因为它使用了如此多的 HTML5）。我已经在 Firefox 17 和 Chrome 23 中成功测试了它。它在 IE9 中存在一些问题，但在 IE10 中运行良好。但我一点也不介意。如果您的网站浏览者期望您的应用程序（或任何其他网络应用程序）具有如此强大的功能，那么他们应该使用最新的技术。
3.  似乎没有办法（至少我不知道）将 PDF 作为字节数组/流加载，因此如果您希望显示它，则必须在磁盘上创建 PDF 的副本。除了这些微不足道的小问题之外，PDF.js 真的很棒。

我在[这里](https://skydrive.live.com/redir?resid=EE97D7BBF7088816!167&authkey=!ANYAE-mbLaosXFs)创建了一个 PDF.js 的小型但功能齐全的 MVC 演示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T21:25:24.550

我一直在使用 iTextSharp，效果很好。我可以设法在单独的窗口中打开 pdf，即使没有安装 Adob​​e（我在我的 comp 中使用 Foxit Reader）。实际上，在我的示例中，我根本没有使用 iTextSharp。

**我的观点：**

```
<a href="@Url.Action("RetreiveFile", "File", new { id = fileId })" target="_blank">
    OpenPdf
</a> 
```

**我的控制器：**

```
 public ActionResult RetreiveFile(int id)
    {
        ComplexClass myClass= _FileModel.GetFile(id);
        byte[] img = myClass.ContentData.ToArray();
        Response.AppendHeader("Content-Disposition", "inline; filename=xyz.pdf");
        return File(img, "application/pdf");
    } 
```

而我的内容数据作为二进制数据存储在数据库中。

无论如何，也许我误解了你的问题，但这就是我在项目中处理 pdf 的方式，而且我的浏览器从不要求我下载 pdf :)

问候。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-29T18:02:50.947

[iTextSharp](http://sourceforge.net/projects/itextsharp/)是解决这个问题的首选。

# jquery - 图像溢出

> ID：13631774
> 
> 赞同：-2
> 
> 时间：2012-11-29T17:54:20.210
> 
> 标签：jquery, wordpress, css

我正在为我的 wordpress 网站编写一个 wordpress 图像滑块，滑块上的图像不断溢出并落在其他内容上。我已经尝试过其他代码，它在普通的 html 文件上运行良好，但不适用于 wordpress 主题。我知道这是css，但我找不到问题。我做错了什么？我的标记示例在这里，然后是我的整个网站的 css 代码，

```
 <div style="background-color: gray; height: 300px;padding: 0px 0px 0px 10px;margin:10px 10px 10px 10px;">

            <!--Start WOWSlider.com BODY section id = slider-container-->
            <div id = "slider-container">
                <div class = "ws_images"><ul>
                        <li><a href = "http://link addresss1.com"><img src = "http://mysite.loc/files/2012/11/mysite-wall-art-Online29-697x10241.jpg" alt = "Beera-Mu-Klass-Black-500x447" title = "Beera-Mu-Klass-Black-500x447" id = "wows1_0"/></a>Beera mu klass 1</li>
                        <li><a href = "http://link addresss2.com"><img src = "http://mysite.loc/files/2012/11/mysite-wall-art-Online29-697x10241.jpg" title = "Beera-Mu-Klass-White-500x447" id = "wows1_1"/></a>Beera mu klass 2</li>
                        <li><a href = "http://link addresss3.com"><img src = "http://mysite.loc/files/2012/11/mysite-wall-art-Online29-697x10241.jpg" alt = "Celebrating-50-Years-500x447" title = "Celebrating-50-Years-500x447" id = "wows1_2"/></a>Celebrating 50 yrs</li>
                        <li><a href = "http://link addresss4.com"><img src = "http://mysite.loc/files/2012/11/mysite-wall-art-Online29-697x10241.jpg" alt = "mysite-wall-art-Online29-697x1024" title = "mysite-wall-art-Online29-697x1024" id = "wows1_3"/></a>mysite baby!!!</li>
                    </ul></div>
                <div class = "ws_bullets"><div>
                        <a href = "#" title = "Beera-Mu-Klass-Black-500x447">1</a>
                        <a href = "#" title = "Beera-Mu-Klass-White-500x447">2</a>
                        <a href = "#" title = "Celebrating-50-Years-500x447">3</a>
                        <a href = "#" title = "mysite-wall-art-Online29-697x1024">4</a>
                    </div></div>
                <a href = "#" class = "ws_frame"></a>
                <div class = "ws_shadow"></div>
            </div>

            <script src = "<?php bloginfo('stylesheet_directory'); ?>/js/wowslider.js" type = "text/javascript" charset = "utf-8"></script>
            <script src="<?php bloginfo('stylesheet_directory'); ?>/js/script.js" type="text/javascript" charset="utf-8"></script> 
```

我的 CSS 文件。

```
 </div>

/* Global */
* { margin: 0; padding: 0; }
body { font-size: 12px; font-family: verdana, arial, georgia; color: #333333; }
#main_container { width: 1015px; margin: 0 auto; }
h1,h2,h3,h4,h5,p { margin: 10px 0; }
.left { float: left; }
.right { float: right; }
.clear { clear: both; }
img { border: none; }
a { color: #666; text-decoration: none; }
a:hover { color:#333; }

/* Header */
#header { padding: 10px 0 30px; }
#menu_container { padding-bottom: 25px; }
#menu_container ul { list-style-type: none; margin-right: 25px; float: left; }
#menu_container ul li { float: left; }
#menu_container ul li a { color: #fff; text-decoration: none; background-color: #000; padding: 6px 5px; margin-right: 5px; -moz-border-radius: 5px; -webkit-border-radius: 5px; -khtml-border-radius: 5px; border-radius: 5px; display: block; }
#menu_container ul li a:hover { background-color: #858585; }
#menu_container ul li.current-menu-item a, #menu_container ul li.current_page_item a { background-color: #858585; }
#menu_container input[type=text] { width: 172px; height: 25px; background-color: #000; color: #fff; -moz-border-radius: 5px; -webkit-border-radius: 5px; -khtml-border-radius: 5px; border-radius: 5px; float: right; border: none; padding: 0 5px; }

.header_social_icons_cont { float: right; margin-right: 5px; }
.header_social_icons_cont img { float: left; margin-right: 7px; }

/* Content */
.home_post_cont { float: left; margin-right: 34px; width: 228px; min-height: 331px; margin-bottom: 35px; position: relative; }
.home_post_cont_last { margin-right: 0; }
.home_post_cont img { width: 228px; height: 331px; -moz-border-radius: 5px; -webkit-border-radius: 5px; -khtml-border-radius: 5px; border-radius: 5px; }
.home_post_cont h3 { font-size: 14px; }
.home_post_cont h3 a { color: #000; text-decoration: none; }
.home_post_cont h3 a:hover {  text-decoration: none; color: #666; }

.home_post_content { color: #A0A0A0; font-size: 12px; padding-right: 30px; font-weight: normal; height: 270px; }
.home_post_content .in_title { color: #fff; font-size: 14px; margin: 0; font-weight: bold; }
.home_post_content h4 a { color: #fff; font-size: 14px; margin: 0; }
/*.home_post_cat { position: absolute; bottom: -20px; left: 10px; color: #A0A0A0; font-size: 10px; font-weight: normal; padding-right: 40px; }*/
.home_post_cat { color: #A0A0A0; font-size: 10px; font-weight: normal; padding-right: 40px; }
.home_post_cat a { color: #A0A0A0 !important; text-decoration: none; }
.home_post_cat a:hover {  text-decoration: none; color: #666; }

.single_left { float: left; width: 665px; }
.single_left h1 { font-size: 13px; margin-top: 0; }

    .hover_caption {
      /* If you can count of CSS3 support: */
      background-color: /*rgba(0, 0, 0, 0.7)*/ #000; -moz-border-radius: 5px; -webkit-border-radius: 5px; -khtml-border-radius: 5px; border-radius: 5px;

      /* Or use a transparent image if you need to support bad browsers: */
      /*background-image: url(images/hover_caption_bg.png);*/

      /* NOTE: If you're img elements have paddings or margins you'll need to
      match them here to get things lined up properly. */
    }

#commentform input[type=submit] { background-color: #000; border: none; color: #fff; padding: 8px 10px; }
#commentform a { color: #000; }

.commentlist a { color: #000; }    
.iphone-home-image { width: 300px !important; }

/* Sidebar */
#sidebar { float: right; width: 270px; }
.side_box { margin-bottom: 25px; }
.side_box h3 { padding: 5px 5px; background-color: #000; margin-top: 0; color: #fff; }
.side_box p { padding: 0px 5px; }
.side_box ul { list-style-type: none; margin-left: 5px; }
.side_box ul li { margin-bottom: 3px; }
.textwidget { padding: 5px; }

/* Footer */
#footer { margin: 25px 0; padding: 12px 0; border-top: 1px solid #CBCBCB; border-bottom: 1px solid #CBCBCB; color: #8C8889; text-align: right; }
#footer a { color: #8C8889; text-decoration: none; }
#footer a:hover { text-decoration: underline; }

#infscr-loading { text-align: center; }

@media screen and (max-width: 480px) {

#main_container { width: 320px; }
#menu_container { display: none; }
.home_post_cont { margin-right: auto; margin-left: auto; float: none; clear: both; }
#footer { display: none; }
#commentform textarea { width: 220px; }
#sidebar { display: none; }
.single_left { float: none; width: 228px; margin-left: auto; margin-right: auto; }
.single_left img { width: 228px; height:inherit; }

}

#slider-container { 
    zoom: 1;
position: relative;
max-width: 920px;
max-height: 300px;
z-index: 100;
border: none;
text-align: left;
}
* html #slider-container{ width:920px }
#slider-container .ws_images ul{
    position:relative;
    width: 10000%; 
    height:auto;
    left:0;
    list-style:none;
    margin:0;
    padding:0;
    border-spacing:0;
    overflow: visible;
    /*table-layout:fixed;*/
}
#slider-container .ws_images ul li{
    width:1%;
    line-height:0; /*opera*/
    float:left;
    font-size:0;
    padding:0 0 0 0 !important;
    margin:0 0 0 0 !important;
}

#slider-container .ws_images{
    position: relative;
left: 0;
top: 0;
width: 100%;
overflow: hidden;
}
#slider-container .ws_images a{
    width:100%;
    display:block;
    color:transparent;
}
#slider-container img{
    max-width: none !important;
}
#slider-container .ws_images img{
    width:100%;
    border:none 0;
    max-width: none;
}
#slider-container a{ 
    text-decoration: none; 
    outline: none; 
    border: none; 
}

#slider-container  .ws_bullets { 
    font-size: 0px; 
    float: left;
    position:absolute;
    z-index:70;
}
#slider-container  .ws_bullets div{
    position:relative;
    float:left;
}
#slider-container  a.wsl{
    display:none;
}

#slider-container .ws_bullets { 
    padding: 10px; 
}
#slider-container .ws_bullets a { 
    margin-left: 5px; 
    height: 10px; 
    width: 10px; 
    float: left; 
    border: 1px solid #B8C4CF; 
    color: transparent; 
    text-indent: 0px; 
    background-image:url("data:image/gif;base64,");
    position:relative;
}
#slider-container .ws_selbull { 
    background-color: #B8C4CF; 
    color: #FFFFFF; 
}

#slider-container .ws_bullets a:hover, #slider-container .ws_overbull { 
    background-color: #dae9f6;
    color: #FFFFFF; 
}

#slider-container a.ws_next, #slider-container a.ws_prev {
    font-family: Tahoma,Arial,Helvetica;
    font-size: 14px;
    position:absolute;
    display:none;
    top:50%;
    margin-top:-15px;
    line-height:30px;
    z-index:60;
    background-color: #000000; 
    color: #FFFFFF; 
    padding: 0px 10px; 
    opacity:0.7;
    filter:progid:DXImageTransform.Microsoft.Alpha(opacity=70);
}
#slider-container a.ws_next{
    right:0;
}
#slider-container a.ws_prev {
    left:0;
}
* html #slider-container a.ws_next,* html #slider-container a.ws_prev{display:block}
#slider-container:hover a.ws_next, #slider-container:hover a.ws_prev {display:block}
/* bottom center */
#slider-container  .ws_bullets {
    top:0;
    right: 0;
}

#slider-container .ws-title{
    position: absolute;
    bottom:0;
    left: 0;
    margin-right:5px;
    z-index: 50;
    background-color:#000000;
    color:#FFFFFF;
    padding:10px 1%;
    width:98%;
    font-family: Tahoma,Arial,Helvetica;
    font-size: 14px;
    opacity:0.55;
    filter:progid:DXImageTransform.Microsoft.Alpha(opacity=55); 
}
#slider-container .ws-title div{
    padding-top:5px;
    font-size: 12px;
}
#slider-container .ws_images ul{
    animation: wsBasic 16.8s infinite;
    -moz-animation: wsBasic 16.8s infinite;
    -webkit-animation: wsBasic 16.8s infinite;
}
@keyframes wsBasic{0%{left:-0%} 12.5%{left:-0%} 25%{left:-100%} 37.5%{left:-100%} 50%{left:-200%} 62.5%{left:-200%} 75%{left:-300%} 87.5%{left:-300%} }
@-moz-keyframes wsBasic{0%{left:-0%} 12.5%{left:-0%} 25%{left:-100%} 37.5%{left:-100%} 50%{left:-200%} 62.5%{left:-200%} 75%{left:-300%} 87.5%{left:-300%} }
@-webkit-keyframes wsBasic{0%{left:-0%} 12.5%{left:-0%} 25%{left:-100%} 37.5%{left:-100%} 50%{left:-200%} 62.5%{left:-200%} 75%{left:-300%} 87.5%{left:-300%} }

#slider-container .ws_bullets  a img{
    text-indent:0;
    display:block;
    top:12px;
    left:-79px;
    visibility:hidden;
    position:absolute;
    border: 2px solid #B8C4CF;
    max-width:none;
}
#slider-container .ws_bullets a:hover img{
    visibility:visible;
}

#slider-container .ws_bulframe div div{
    height:48px;
    overflow:visible;
    position:relative;
}
#slider-container .ws_bulframe div {
    left:0;
    overflow:hidden;
    position:relative;
    background-color:#B8C4CF;
    width:157px;
}
#slider-container  .ws_bullets .ws_bulframe{
    display:none;
    top:25px;
    overflow:visible;
    position:absolute;
    cursor:pointer;
    border: 2px solid #B8C4CF;
}
#slider-container .ws_bulframe span{
    position:absolute;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T16:27:24.607

只是`overflow:hidden`在一些 div 中使用。

# api - 如何从 Foursquare /checkins/reply 打开原生 iOS 应用程序？

> ID：13631775
> 
> 赞同：4
> 
> 时间：2012-11-29T17:54:20.453
> 
> 标签：api, foursquare

我正在使用 Foursquare 的 checkins/reply API 端点[https://developer.foursquare.com/docs/checkins/reply](https://developer.foursquare.com/docs/checkins/reply)。

我希望回复打开本机应用程序[https://developer.foursquare.com/resources/client#appintegration](https://developer.foursquare.com/resources/client#appintegration)

但是，如果对 checkins/reply 的调用的 url 参数包含我们的 iOS 应用程序协议（如 ourapp://），则会导致错误，因为（似乎）它不是 http://、https://、foursquare:// 之一、mailto://、tel:// 或 sms://。

我已经尝试了许多 contentId 的变体，这个讨厌的东西：fsq+LC_CLIENT_ID+ACTION_TYPE:// 和其他没有正面结果的。

有没有人能够从 Foursquare 签到回复中打开原生 iOS 应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T21:19:35.200

在[此页面上](https://developer.foursquare.com/docs/checkins/reply)，您将能够`contentId`在您的签入/回复请求中找到该参数的文档。

[此页面](https://developer.foursquare.com/resources/client#appintegration)指示如何`contentId`使用 注册`fsq+CLIENT_ID+reply://`链接。

您需要在您的应用程序 .plist 配置中注册正确的 URL 才能使链接正常工作。

# c - 为什么打印常量会改变单个核心/流程应用程序的结果？

> ID：13631776
> 
> 赞同：3
> 
> 时间：2012-11-29T17:54:23.813
> 
> 标签：c

我编写了一个简短的（450 行）程序，它计算了四人连线游戏中实际可能发生的一些情况。该程序尝试构建游戏树并识别是否已经发生情况（如果仅发生对称版本，我也会跳过分支）。

我数了数我遇到已经发生的情况的次数`int alreadyCounter`。但是我在执行时注意到了一些奇怪的事情：

添加

```
printf("abcdefghijklm"); 
```

改变我的结果`alreadyCounter`！

我不使用其他核心/进程/线程。我用

```
gcc -g -W -Wall -Werror -std=c99 -o connectfour 
```

完整源代码位于[GitHub](https://github.com/MartinThoma/connect-four/tree/master/C)。（对不起，我无法使代码显着缩短）

看看`connectfour.c`和`connectfour-strange.c`。它们仅在第 386 行有所不同。

但他们给出了——除了许多“abcdefghijklm”——不同的结果：

连接四：

```
[...]abcdefghijklmabcdefghijklm########################Finish:
Maximum of 20000 reached
alreadyCounter: 1547
mirroredCounter: 0 
```

连接四怪：

```
[...]
########################Finish:
Maximum of 20000 reached
alreadyCounter: 1566
mirroredCounter: 0 
```

**当我只添加一些恒定输出时，为什么我在单个内核/进程/线程程序上得到不同的结果？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T17:59:13.690

我在学校担任助理的工作中已经多次看到这个问题。

一些学生的程序段错误，除非他们在某处添加了 printf。

Printf 分配一些内存并用它做一些疯狂的事情。

我的猜测是您在某处有缓冲区溢出，或者您没有为结构分配足够的内存，并且 printf 将其擦除。

尝试运行 valgrind 以查看是否出现问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T20:03:02.127

我不知道这是否是您观察的原因，但在第 334 行，

```
char mirrored[BOARD_WIDTH][BOARD_HEIGHT];
for (int x = 0; x<BOARD_WIDTH; x++) {
    for (int y=0; y<BOARD_HEIGHT; y++) {
        mirrored[x+1-BOARD_WIDTH][y] = board[x][y];
    }
} 
```

您在分配的内存之外写入（您的行索引从`-(BOARD_WIDTH)`到`-1`），从而调用未定义的行为。

此外，这并不反映董事会。你很可能是说

```
mirrored[BOARD_WIDTH - 1 - x][y] = board[x][y]; 
```

那里。除此之外，我没有看到像越界写入这样的明显候选者。

在`isBoardFinished`（第 43 行）中，您在到达第 0 行/第 0 列之前停止检查：

```
while (xTemp > 0) 
```

（同样适用`y`于自上而下的检查，以及对角线检查）。那应该是`x >= 0`使用全板。但这不能覆盖`alreadyCounter`，但它仍然可能有用。

但是在打开警告**和优化**的情况下编译代码显示了可能的原因：

```
connect-four.c: In function ‘getFirstIndex’:
connect-four.c:202:19: warning: ‘index’ may be used uninitialized in this function [-Wuninitialized]
connect-four.c: In function ‘getNewIndex’:
connect-four.c:202:19: warning: ‘index’ may be used uninitialized in this function [-Wuninitialized]
connect-four.c:199:18: note: ‘index’ was declared here
connect-four.c: In function ‘getMyIndex’:
connect-four.c:202:19: warning: ‘index’ may be used uninitialized in this function [-Wuninitialized]
connect-four.c:199:18: note: ‘index’ was declared here
connect-four.c: In function ‘makeTurns’:
connect-four.c:202:19: warning: ‘index’ may be used uninitialized in this function [-Wuninitialized]
connect-four.c:199:18: note: ‘index’ was declared here
connect-four.c:202:19: warning: ‘index’ may be used uninitialized in this function [-Wuninitialized]
connect-four.c:199:18: note: ‘index’ was declared here 
```

所以警告和随附的注释（由于内联，它多次出现，具有不同的函数名称但位置相同）告诉我们它应该是

```
unsigned int getFirstIndex(char board[BOARD_WIDTH][BOARD_HEIGHT]) {
    unsigned int index = 0;
    //               ^^^^^^^ 
```

`getFirstIndex`通过调用相同的板来获得确定的结果。由于您在返回索引之前取模`MAXIMUM_SITUATIONS`，因此返回的索引不应超出范围，因此不会因此而崩溃。但是当你打印出一些东西时，这可能会导致堆栈分配（不需要，参数和返回地址*都*`index`可以在寄存器中传递），如果是这样，那会影响分配位置的位模式下次`getFirstIndex`叫。这会改变返回的值，并且您在 中查找错误的插槽，因此您错过了先前出现的相同板，因此与*仅*产生`database`该值相比，您获得的重复次数更少`getFirstIndex`*取决于传入的板（而不是碰巧占据特定堆栈位置的位）。*

 *请注意 - 对于我的 gcc 版本 - 必须同时调整警告和优化才能获得警告。`clang`即使将警告和优化调到最高级别，我也不会对此发出警告。其他版本的 gcc 和 clang，以及其他编译器在识别问题方面可能有不同的成功。

`index`初始化为 0 in ，我得到`getFirstIndex`一个一致的

```
########################Finish:
Maximum of 20000 reached
alreadyCounter: 4412 
```

与是否打印字符串和优化级别无关。如果没有初始化， 的值`alreadyCounter`取决于这两个因素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T17:58:58.833

我不会通过 500 行代码来找到它，但这几乎总是一个内存问题。

通常，它类似于堆栈损坏，您正在索引超出末尾的数组，因此 print 语句修改堆栈，因此越界访问结果被更改。

通过像 valgrind 这样的工具运行它，它应该有助于查明违规行为。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T18:51:40.220

我没有找到它的实例，但这是使用宏并将 i++ 之类的东西传递给它时的常见结果。这`ABS(outcome)`是一个插入代码的宏， `(outcome) (outcome < 0 ? -outcome : outcome)` 如果结果作为 i++ 传递，那么你会得到 `(i++) (i++ < 0 ? -i++ : i++)`

也许在线程版本中，宏被编译器以某种方式引入*

# sql - SQL 复制失败

> ID：13631778
> 
> 赞同：1
> 
> 时间：2012-11-29T17:54:29.220
> 
> 标签：sql, sql-server, database-replication

我已经建立了一个新的发布来发布我的数据库中的一个表 (tbl_User)

当我启动代理时，我到了这一点

[97%] 在生成快照时锁定已发布的表

然后失败并出现以下错误

> 错误消息：消息：无法创建 AppDomain“mssqlsystemresource.dbo[runtime].128”。调用的目标已引发异常。未能创建 AppDomain “mssqlsystemresource.dbo[runtime].129”。调用的目标已引发异常。命令文本：if object_id('sys.sp_replcleanupccsprocs') < 0 exec sp_replcleanupccsprocs @publication 参数：@publication = PercyPub
> 
> Microsoft.SqlServer.Replication.AgentCore.Run() 上的 SqlServer.Replication.SnapshotGenerationAgent.InternalRun()（来源：MSSQLServer，错误号：6517） 获取帮助：http://help/6517 服务器 SQL，级别 16，状态 1，过程 sp_MSpost_auto_proc，第 88 行无法创建 AppDomain“mssqlsystemresource.dbo[runtime].129”。调用的目标已引发异常。（来源：MSSQLServer，错误号：6517）获取帮助：http://help/6517 服务器 SQL，级别 16，状态 1，过程 sp_MSpost_auto_proc，第 88 行无法创建 AppDomain“mssqlsystemresource.dbo[runtime].129”。调用的目标已引发异常。（来源：MSSQLServer，错误号：6517）获取帮助：http://help/6517 Run()（来源：MSSQLServer，错误号：6517）获取帮助：http://help/6517 服务器 SQL，级别 16，状态 1，过程 sp_MSpost_auto_proc，第 88 行无法创建 AppDomain “mssqlsystemresource.dbo[runtime].129 ”。调用的目标已引发异常。（来源：MSSQLServer，错误号：6517）获取帮助：http://help/6517 服务器 SQL，级别 16，状态 1，过程 sp_MSpost_auto_proc，第 88 行无法创建 AppDomain“mssqlsystemresource.dbo[runtime].129”。调用的目标已引发异常。（来源：MSSQLServer，错误号：6517）获取帮助：http://help/6517 Run()（来源：MSSQLServer，错误号：6517）获取帮助：http://help/6517 服务器 SQL，级别 16，状态 1，过程 sp_MSpost_auto_proc，第 88 行无法创建 AppDomain “mssqlsystemresource.dbo[runtime].129 ”。调用的目标已引发异常。（来源：MSSQLServer，错误号：6517）获取帮助：http://help/6517 服务器 SQL，级别 16，状态 1，过程 sp_MSpost_auto_proc，第 88 行无法创建 AppDomain“mssqlsystemresource.dbo[runtime].129”。调用的目标已引发异常。（来源：MSSQLServer，错误号：6517）获取帮助：http://help/6517

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T18:05:52.000

原来是我的 sql server 内存接近其极限并增加它+重新启动修复它。

# java - JSTL 不使用嵌入式 Jetty 和 jetty-console-maven-plugin 进行评估

> ID：13631783
> 
> 赞同：1
> 
> 时间：2012-11-29T17:54:50.413
> 
> 标签：java, maven, jetty, jstl

长话短说：我把它作为输出

```
<html><body><c:if test="false">
   strange
</c:if></body></html> 
```

将 JSTL 与嵌入式 Jetty 一起使用时。

长话短说：

我的目录结构：

```
web-example+
           |_src+
           |     \_main+
           |            \_webapp+
           |                    |_index.jspx
           |                    |_WEB-INF+
           |                              \_web.xml
            \_pom.xml 
```

我的 web.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    id="WebExample"
    version="2.5">

</web-app> 
```

我的 index.jspx：

```
<?xml version="1.0" encoding="UTF-8" ?>
<jsp:root xmlns:jsp="http://java.sun.com/JSP/Page" version="2.1" xmlns:c="http://java.sun.com/jsp/jstl/core" xmlns:parts="urn:jsptagdir:/WEB-INF/tags">

<jsp:directive.page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8" />

<html><body>
    <c:if test="${'1' == true}">
        strange
    </c:if>
</body></html>

</jsp:root> 
```

最后，我的 pom.xml：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
<modelVersion>4.0.0</modelVersion>
<groupId>com.example</groupId>
<artifactId>web-example</artifactId>
<packaging>war</packaging>
<version>0.0.1-SNAPSHOT</version>
<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.3.2</version>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.simplericity.jettyconsole</groupId>
            <artifactId>jetty-console-maven-plugin</artifactId>
            <version>1.47</version>
            <executions>
                <execution>
                    <goals>
                        <goal>createconsole</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>
    </plugins>
</build>
<dependencies>
    <dependency>
        <groupId>org.eclipse.jetty</groupId>
        <artifactId>jetty-http</artifactId>
        <version>8.1.4.v20120524</version>
        <type>jar</type>
        <scope>compile</scope>
    </dependency>
    <dependency>
        <groupId>org.eclipse.jetty</groupId>
        <artifactId>jetty-server</artifactId>
        <version>8.1.4.v20120524</version>
        <type>jar</type>
        <scope>compile</scope>
    </dependency>
    <dependency>
        <groupId>org.eclipse.jetty</groupId>
        <artifactId>jetty-jsp</artifactId>
        <version>8.1.4.v20120524</version>
        <type>jar</type>
        <scope>compile</scope>
    </dependency>
    <dependency>
        <groupId>org.eclipse.jetty</groupId>
        <artifactId>jetty-servlet</artifactId>
        <version>8.1.4.v20120524</version>
        <type>jar</type>
        <scope>compile</scope>
    </dependency>
    <dependency>
        <groupId>org.eclipse.jetty</groupId>
        <artifactId>jetty-webapp</artifactId>
        <version>8.1.4.v20120524</version>
        <type>jar</type>
        <scope>compile</scope>
    </dependency>
</dependencies>
</project> 
```

我认为这是特定于 jetty-console-maven-plugin 的问题，因为当我在 Eclipse 中启动 webapp 时一切正常（使用一个启动 Jetty 的小型 Java 类，我没有在这里包含）。

我查看了其他答案，例如，从[无法在嵌入式 Jetty 服务器中加载 JSTL taglib](https://stackoverflow.com/questions/2151075/cannot-load-jstl-taglib-within-embedded-jetty-server)和[JSTL 未在嵌入式 Jetty 实例上运行的 JSP 页面中解析，](https://stackoverflow.com/questions/11519161/jstl-not-parsed-in-a-jsp-page-running-on-an-embedded-jetty-instance)从而改变了一些帮助我到目前为止的事情，例如，我更新了jetty-console-maven-plugin 为了没有旧的 servlet 规范代码，我从 /usr/share/java 中删除了 jsp 和 servlet JAR，我更新了 web.xml 和 index.jspx 的 XML 规范，等等但它没有帮助。

有人知道出了什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-15T09:55:54.717

我是 JettyConsole 的创建者，我无法使用您提供的代码示例重现您描述的问题。

我使用您提供的文件的内容重新创建了您的目录结构，运行了干净的 Maven 安装并在生成的 jetty-console 战争上运行了 java -jar。

```
http://localhost:8080/index.jspx 
```

按预期呈现，并正确解析了 JSLT 代码。

```
http://localhost:8080/ 
```

呈现 403 禁止，可能是因为 index.jspx 不在您的欢迎文件列表中，并且 Jetty 想要隐藏 JSP 源代码。

我想说这个问题应该改进以重现问题，或者关闭。

# windows-8 - 将桌面应用程序嵌入 Windows 8 应用程序

> ID：13631784
> 
> 赞同：1
> 
> 时间：2012-11-29T17:54:52.417
> 
> 标签：windows-8, desktop-application, windows-store-apps

恐怕我知道答案，但希望忽略一些事情。是否可以将桌面应用程序嵌入到 Windows 8 应用程序中？

我想说这是不可能的，因为应用程序也应该在 ARM 架构下运行，而桌面应用程序不能在那里运行，但希望有人能想象出一种解决方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T18:09:01.547

# **不**

不仅仅是因为 ARM 架构，因为您还可以使用 Windows 商店应用程序以 x86 或 x64 为目标，还因为 api 和限制之间的差异。WinRT/Windows 商店应用程序在沙箱中运行，并且无法访问关键系统功能/api。您可以将桌面应用程序嵌入到 Windows 商店应用程序中，但它不会做任何事情。您将无法安装或使用它。此外，如果您计划将应用程序上传到 Windows 8 商店，则它不会获得批准。

尽管您可以通过他们可以下载和安装桌面应用程序来为您的应用程序中的用户提供链接，但这就是您真正可以做的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T18:01:10.523

不，这是不可能的。不仅因为处理器架构的差异，还因为安全性和运行时环境大不相同。还有很多其他的原因，但没有必要深入探讨。:)

# asp.net-mvc - 使用 Ajax.ActionLink 更新整个页面

> ID：13631786
> 
> 赞同：8
> 
> 时间：2012-11-29T17:55:00.533
> 
> 标签：asp.net-mvc, visual-studio

是否可以使用 Ajax.ActionLink(...,...) 来刷新整个页面而不是 UpdatetargetID？

我更喜欢使用 Ajax.ActionLink 因为经典的 Html.ActionLink 不是 POST 方法。

我尝试：

```
@Ajax.ActionLink("Click me", "MyAction", "MyController", new { value = '1234' }, new AjaxOptions { HttpMethod = "POST", Confirm = "Are you sure ?" },  null) 
```

但是页面没有刷新，我只好按F5。

谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-22T21:13:14.593

您实际上可以结合 gardarvalur 提出的两种方法来获得不需要将整个页面包装在 div 中的类似 MVC 的代码。将 window.location.reload() 调用移动到 AjaxOptions 对象的 OnSuccess 属性，如下所示：

```
@Ajax.ActionLink("Click me", "MyAction", "MyController", new { value = '1234' }, new AjaxOptions { HttpMethod = "POST", OnSuccess="window.location.reload()" }) 
```

不涉及 jQuery，只是 MVC Ajax ActionLink 中的一些普通的旧 javascript。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T18:11:44.113

Jquery 中的 doin ajax 调用呢？像这样的东西。

```
<button onclick="SomeFunction()" type="button" >Click me</button> 
```

然后在 Jquery 中是这样的：

```
function SomeFunction()
{
    var url = '/MyController/MyAction/';

    $.ajax({
        type: "POST",
        url: url,
        data: { value: '1234' }, //if there are any parameters
        dataType: "html", //or some other type
        success: function (data) {
            window.location.reload(true);
            // or something in that area, maybe with the 'data'
        },
        error: function () {
        //some derp
        }
    }); 
```

我希望我没有误解你的问题（我意识到这并不完全是使用 ajax.actionlink）。;） 问候！

**##########已编辑#########**

或者可能是一个牵强附会的想法，告诉链接到 updatetargetid 包装你的整个页面。像这样的东西：

```
@Ajax.ActionLink("Click me", "MyAction", "MyController", new { value = '1234' }, new AjaxOptions { HttpMethod = "POST", Confirm = "Are you sure ?", UpdateTargetId = "TheDivToUpdate" },  null) 
```

然后用这个 div 标签包装你的页面内容：

```
<div id="TheDivToUpdate">
    //The content of your page
</div> 
```

我知道，这不是最漂亮的解决方案，但也许它对你有用？

# ios - TTTAttributedLabel 多种颜色

> ID：13631788
> 
> 赞同：0
> 
> 时间：2012-11-29T17:55:10.397
> 
> 标签：ios, uikit

我有这个代码

```
[label setText:@"ddddasdasdas" afterInheritingLabelAttributesAndConfiguringWithBlock:^ NSMutableAttributedString *(NSMutableAttributedString *mutableAttributedString) {
            [mutableAttributedString addAttribute:(NSString*)kCTForegroundColorAttributeName value:(id)[UIColor blackColor] range:NSMakeRange(0,1)];
            [mutableAttributedString addAttribute:(NSString*)kCTForegroundColorAttributeName value:(id)[UIColor redColor] range:NSMakeRange(2,3)];
            [mutableAttributedString addAttribute:(NSString*)kCTForegroundColorAttributeName value:(id)[UIColor greenColor] range:NSMakeRange(5,2)];
            return mutableAttributedString;}]; 
```

并且只有第一个字符改变颜色，但其余文本没有改变。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-22T19:08:39.453

尝试：

```
[mutableAttributedString addAttribute:(NSString*)kCTForegroundColorAttributeName value:(id)[[UIColor blackColor] CGColor] range:NSMakeRange(0,1)]; 
```

或者：

```
[mutableAttributedString addAttribute:(NSString*)NSForegroundColorAttributeName value:(id)[[UIColor blackColor] CGColor] range:NSMakeRange(0,1)]; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-29T20:30:59.903

问题是我需要在每种颜色上加上 .CGRef，我的错

# maven-2 - Windows 7 64 位上的 Maven 2.2.1

> ID：13631789
> 
> 赞同：4
> 
> 时间：2012-11-29T17:55:10.327
> 
> 标签：maven-2, 32bit-64bit, java, windows-7-x64

由于各种原因，我必须坚持使用旧版本的 Java (6) 和 Maven (2.2)。所以我介意，我安装了[Maven 2.2.1](http://www.apache.org/dyn/closer.cgi/maven/maven-2/2.2.1/binaries/apache-maven-2.2.1-bin.zip)，而我的系统使用**64 位**JDK 6。

我试图通过运行来验证它是否正确安装，`mvn --version`我收到的响应是：

```
ERROR: JAVA_HOME is set to an invalid directory.
JAVA_HOME = "C:\Windows:\Program Files\Java\jdk1.6.0_37"
Please set the JAVA_HOME variable in your environment to match the
location of your Java installation 
```

我怀疑 Maven 需要**32 位**版本的 Java，它不能处理 64 位 Java。这是真的？

如果确实是这种情况，则将`%JAVA_HOME%`环境变量设置为指向 32 位版本（已安装）**不是**我想做的，因为它会使我的 PC 上安装的其他依赖它指向 64-的工具失败位版本。

有没有解决的办法？

**更新：**通过插入`maven.bat`以下行（就在之前`=== START VALIDATION ===`）解决了问题：

```
set JAVA_HOME=C:\Program Files (x86)\Java\jdk1.6.0_37 
```

这样，这个`%JAVA_HOME%`环境变化就本地化到了 Maven 中，在外面是不可见的。

如果有更好的解决方案，我很乐意知道。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T17:03:53.567

问题的根源一直在我眼前，但我没有看到：

%JAVA_HOME% 环境变量设置为`%SystemRoot%\Program Files (x86)\Java\jdk1.6.0_37`而不是`%SystemDrive%\Program Files (x86)\Java\jdk1.6.0_37`.

固定后，无需修改`maven.bat`。

# php - 自定义字段值未发送到邮件

> ID：13631790
> 
> 赞同：1
> 
> 时间：2012-11-29T17:55:12.183
> 
> 标签：php, html, woocommerce

我正在使用 woocommerce 插件...实际上这是我对 php 的怀疑。我正在使用一些自定义字段，所以我应该将这些自定义字段的值获取到我的电子邮件中。

当我使用一个自定义字段“我的字段”时，我正在为我的电子邮件获取价值，但我不了解如何将所有自定义字段的值获取到我的电子邮件..

**以下是适用于单个自定义字段的代码：（**来自这里`https://gist.github.com/3905785`：）

```
/**
 * Add the field to the checkout
 **/
add_action('woocommerce_after_order_notes', 'my_custom_checkout_field');

function my_custom_checkout_field( $checkout ) {

    echo '<div id="my_custom_checkout_field"><h3>'.__('My Field').'</h3>';
    woocommerce_form_field( 'my_field_name', array( 
        'type'          => 'checkbox', 
        'class'         => array('my-field-class form-row-wide'), 
        'label'         => __('Fill in this field'), 
        'placeholder'   => __('Enter a number'),
        ), $checkout->get_value( 'my_field_name' ));

    echo '</div>';
}

/**
 * Update the order meta with field value
 **/
add_action('woocommerce_checkout_update_order_meta', 'my_custom_checkout_field_update_order_meta');

function my_custom_checkout_field_update_order_meta( $order_id ) {
    if ($_POST['my_field_name']) update_post_meta( $order_id, 'My Field', esc_attr($_POST['my_field_name']));
}

/**
 * Add the field to order emails
 **/
add_filter('woocommerce_email_order_meta_keys', 'my_custom_checkout_field_order_meta_keys');

function my_custom_checkout_field_order_meta_keys( $keys ) {
    $keys[] = 'My Field';
    return $keys;
} 
```

**我为 2 个自定义字段尝试了下面的代码：（下面的代码没有将任何自定义字段值发送到我的邮件..）请告诉我我在下面的代码中做错了什么：**

```
/**
 * Add the field to the checkout
 **/
add_action('woocommerce_after_order_notes', 'my_custom_checkout_field');

function my_custom_checkout_field( $checkout ) {

    echo '<div id="my_custom_checkout_field"><h3>'.__('My Field').'</h3>';
    woocommerce_form_field( 'my_field_name', array( 
        'type'          => 'checkbox', 
        'class'         => array('my-field-class form-row-wide'), 
        'label'         => __('Fill in this field'), 
        'placeholder'   => __('Enter a number'),
        ), $checkout->get_value( 'my_field_name' ));

    echo '</div>';

  echo '<div id="my_custom_checkout_field"><h3>'.__('Keywords').'</h3>';

    woocommerce_form_field( 'keywords', array(
        'type'          => 'text',
        'class'         => array('my-field-class form-row-wide'),
        'label'         => __('Fill in this field'),
        'placeholder'       => __('Enter something'),
        ), $checkout->get_value( 'keywords' ));

    echo '</div>';
}

/**
 * Update the order meta with field value
 **/
add_action('woocommerce_checkout_update_order_meta', 'my_custom_checkout_field_update_order_meta');

function my_custom_checkout_field_update_order_meta( $order_id ) {
    if ($_POST['my_field_name']) update_post_meta( $order_id, 'My Field', esc_attr($_POST['my_field_name']));

        if ($_POST['keywords']) update_post_meta( $order_id, 'Keywords', esc_attr($_POST['keywords']));
}

/**
 * Add the field to order emails
 **/
add_filter('woocommerce_email_order_meta_keys', 'my_custom_checkout_field_order_meta_keys');

function my_custom_checkout_field_order_meta_keys( $keys ) {
    $keys[] = 'My Field,Keywords';
    return $keys;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T18:27:29.983

首先是一行：

```
$keys[] = 'My Field,Keywords'; 
```

应改为：

```
$keys[] = 'My Field';
$keys[] = 'Keywords'; 
```

您的代码是使用字符串“My Field,Keywords”创建一个数组条目，而不是使用字符串“My Field”和“Keywords”创建 2 个数组条目。

这绝对是问题的原因之一。

这可能并不重要，但您应该更改第二个 div 标签的 id - 具有相同 id 的多个元素并不好。

进行这些更改，然后重试。如果还有其他问题，我们可以依次解决。

我希望这有帮助。

# jquery - 在图像的元素标签之前插入 div

> ID：13631793
> 
> 赞同：3
> 
> 时间：2012-11-29T17:55:27.410
> 
> 标签：jquery

我有以下代码将在 div 中查找并查找所有图像。然后它将图像包装在一个新的 div 中，创建第二个包含按钮的 div，这用于使用另一个脚本执行图像悬停效果

```
$(document).ready(function(){
    // Get the images from whatever element contains them.    
    var postImgs = $('#primary img');

    postImgs.each(function applyPinterestButton(){

    // This allows the post-writer to add a class of "nopin" to
    // whatever images they don't want to have pinned.
    if($(this).attr('class').indexOf('nopin') == -1){       
        // Wrap the image in a container.
        $(this).wrap('<div class="showPin"/>');         

        // Add the pinterest button and link into the container.
        $(this).parent().prepend('<div class ="pinIt"><a href="buttonlink.html" target="_blank"><img src="button.jpg" /></a></div>');           
    }
}); 
```

之前的 jQuery html 看起来像这样：

```
<a href="http://originalimagelink.html"><img src="originalimage.jpg"></a> 
```

但在脚本之后，jquery 只包装 img，如下所示：

```
<a href="originalimagelink.html">
<div class="showPin">
    <div class="pinIt">
        <a href="buttonlink.html">
            <img src="button.jpg">
        </a>
    </div>
    <img src="originalimage.jpg">
</div>
</a> 
```

我需要它来包装`img`和`a`元素。所以最终结果是这样的：

```
<div class="showPin">
    <div class="pinIt">
        <a href="buttonlink.html">
            <img src="button.jpg">
        </a>
    </div>
    <a href="originalimagelink.html"><img src="originalimage.jpg"></a>
</div> 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T18:07:46.397

1.  您可能希望从图像的父元素开始。

    ```
    // Get the images from whatever element contains them.    
    var postImgs = $('#primary img').parent();
                                  --^^^^^^^^^-- 
    ```

2.  您可以使用该[`.hasClass()`](http://api.jquery.com/hasClass/)功能。

    ```
    // This allows the post-writer to add a class of "nopin" to
    // whatever images they don't want to have pinned.
    if(!$(this).hasClass('nopin')){
             --^^^^^^^^^^^^^^^^^^-- 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T18:09:00.217

试试这个代码：

```
$(document).ready(function(){
  // Get the images from whatever element contains them.    
  var postImgs = $('#primary img');
  postImgs.each(function() {

  // This allows the post-writer to add a class of "nopin" to
  // whatever images they don't want to have pinned.
  if(!$(this).hasClass('nopin')) {      

    // Wrap the image in a container.
    $(this).parent().wrap('<div class="showPin"/>');         

    // Add the pinterest button and link into the container.
    $(this).parent().parent().prepend('<div class ="pinIt"><a href="buttonlink.html" target="_blank"><img src="button.jpg" /></a></div>');           

  }
  });
});
​ 
```

演示：http: [//jsfiddle.net/gfE7m/2/](http://jsfiddle.net/gfE7m/2/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-29T18:16:39.863

试试[这个](http://jsfiddle.net/YcEjF/39/)代码：

```
$(function(){
    $('img').not('.nopin').each(function(){
        $(this).closest('a').wrap('<div class="showPin"/>').before('<div class="pinIt"><a href="buttonlink.html"><img src="button.jpg"></a></div>');
  })
});​ 
```

# java - 从不同的对象访问数组

> ID：13631799
> 
> 赞同：0
> 
> 时间：2012-11-29T17:55:50.710
> 
> 标签：java, arrays, object, compare

我一直在为学校做评估。它要求我在不同的对象中制作 2 个数组。没有什么太花哨的只是得到一些随机数。一切都按照我想要的方式进行，但是..当我尝试比较来自两个不同对象的两个数组时，它出错了。这是我的代码

```
public class Opdracht8 {

    public static void main(String[] args) {

    Verzameling A = new Verzameling (20, 3);
    System.out.println("Verzameling A:\n" + A);
    System.out.println();

    Verzameling B = new Verzameling (20, 4);
    System.out.println("Verzameling B:\n" + B);

    System.out.println();
    System.out.println("A deelverzameling van B? " + A.deelverzamelingVan(B));

    }
} 
```

和“计算部分”

```
import java.util.Random;

class Verzameling {
   static int [] elementen;

    Verzameling(int aantal, int seed) {
        elementen = new int[aantal];
        Random randomGenerator = new Random(seed);
        int [] tijdelijkeArray = new int [100];
        /* Vullen van de vergelijkings array met de waarde van 1 tot 100 
         */

        for (int counter = 0; counter < 100; counter ++) {
            tijdelijkeArray[counter] = counter + 1;
        }

        /* Random getal genereerder. Hier vind het ook het swappen plaats dmv een 
         * temporary variable
         */

        for (int index = 0; index < aantal; index ++) {
            int randomNumber = index + randomGenerator.nextInt(100 - index);

            int temp = tijdelijkeArray[index];
            tijdelijkeArray[index] =  tijdelijkeArray[randomNumber];
            tijdelijkeArray[randomNumber] = temp;

        }   

        for(int index = 0; index < aantal; index++) {
            elementen[index] =  tijdelijkeArray[index];
        }
    } 

    Verzameling(int[] elementen) {
        this.elementen = elementen;

    }

    boolean deelverzamelingVan(Verzameling V) {

        for (int counter = 0; counter < this.elementen.length; counter ++) {
            if (this.elementen[counter] == V.elementen[counter]) {
                System.out.println(this.elementen[counter] +" " +  V.elementen[counter]);
                if (counter == (this.elementen.length - 1)) {
                    return true;
                }    
                continue;
            }
            else
                return false;

        }
        return false;

    }

    public String toString () {
        String reeks = "";
        for (int i = 0; i < elementen.length; i ++)
            reeks = reeks + elementen[i] + " ";

        return reeks;
    }   
} 
```

我很抱歉选择了奇怪的变量名。但是你知道如何解决这个问题。我已经尝试了很多事情，现在变得非常沮丧。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T18:00:25.860

对于数组比较，您可以使用 Java SE 方法`Arrays.equals(array1, array2)`。

您还声明您的`elementen`为**static**。

# php - 更新mysql中的多条记录

> ID：13631800
> 
> 赞同：0
> 
> 时间：2012-11-29T17:56:03.077
> 
> 标签：php, mysql

我试图更新我表中的多条记录，所以我想知道这个脚本是否有问题，因为我只更新了最后一条记录。这是完整的代码[http://pastie.org/5453954](http://pastie.org/5453954)

```
 for ($i = 0; $i < count($_POST['id_servtype']); $i++){

    $servtype = $_POST['id_servtype'][$i];    
    $project = $_POST['id_project'][$i];
    $quantity = $_POST['tableQuantity'][$i];
    $pus = $_POST['tablePus'][$i];
    $puc = $_POST['tablePuc'][$i];
    $totalitem = $_POST['tableTotal'][$i];

    $sql = "update sales_order_items
    set
    id_project=?,
    id_service_type=?,
quantity=?,
    unit_price_no_tax=?,
    unit_price=?,
    total_item_imp=?
    where
    id_so=?
    and
    id_soitems=?
    ";

    $stmt = $this->dbh->prepare($sql);
    $stmt->bindValue(1, $project, PDO::PARAM_INT);
    $stmt->bindValue(2, $servtype, PDO::PARAM_INT);
    $stmt->bindValue(3, $quantity, PDO::PARAM_STR);
    $stmt->bindValue(4, $pus, PDO::PARAM_STR);
    $stmt->bindValue(5, $puc, PDO::PARAM_STR);
    $stmt->bindValue(6, $totalitem, PDO::PARAM_STR);
    $stmt->bindValue(7, $_POST["id"], PDO::PARAM_STR);
    $stmt->bindValue(8, $_POST["iditem"], PDO::PARAM_STR);
    $stmt->execute();

    }

    echo("Correct edition"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T18:03:06.640

您的逻辑有问题：您的`WHERE`子句中使用的值始终相同，因此您总是更新*所有*记录，每次使用新值。
从逻辑上讲，当您的脚本完成后，只有最后一次更新可见，所有以前的更新都已被覆盖。一个简单的例子：

```
$newVals = array(1,2,3);
while($val = array_shift($newVals))
{
    $query = 'UPDATE myDB.tbl SET someField = :val WHERE id = 1';
    $stmt = $pdo->prepare($query);
    $stmt->execute(array('val' => $val));
} 
```

和写法一样：

```
UPDATE myDB.tbl SET someField = 1 WHERE id = 1;
UPDATE myDB.tbl SET someField = 2 WHERE id = 1;
UPDATE myDB.tbl SET someField = 3 WHERE id = 1; 
```

所以 id 为 1 的记录一共更新了 3 次，每次都撤消上一次更新

# java - JAI RenderedOp：检查损坏的图像而不渲染

> ID：13631810
> 
> 赞同：1
> 
> 时间：2012-11-29T17:57:10.650
> 
> 标签：java, image-processing, jai

有没有办法在不渲染的情况下检查 renderOp 是否损坏？

我有一个用户上传图片的网站，我需要验证它不是损坏的图片。目前我可以通过执行以下操作来做到这一点：

```
try{
   RenderedOp imageOp = JAI.create("stream", inputStream);
   imageOp.getRendering();
} catch (Exception e) {
   //Image is corrupt/can't be rendered
} 
```

有不同的方法吗？渲染花费的时间比我想要的要长，这就是我要问的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T18:49:21.603

我相信查看图像是否有效的唯一方法是渲染它并查看返回的值是否为空，这意味着它无法被渲染。或者它应该抛出一个异常，就像你一样。渲染图像的方法有很多，例如 getHeight 和 getWidth。

# magento - 仅将 Magento 的特定组成员同步到 mailchimpg？

> ID：13631820
> 
> 赞同：0
> 
> 时间：2012-11-29T17:58:12.677
> 
> 标签：magento, mailchimp

我已将 magemonkey mailchimp 扩展集成到我的 magento 1.7 中。它工作正常，所有订阅 magento 的 magento 都会自动与 mailchimp 列表同步。但是我的客户要求我只同步添加到magento批发商组的成员，而不管他们是否订阅。情况：我开发了一个自定义模块，允许用户请求特殊组，即批发商。因此，如果我们将它们添加到批发商组，我们希望它们自动添加到我们的 mailchimp 列表中。请建议您是否有任何解决方案或任何想法？

# javascript - 如何动态调整 bootstrap-wysihtml5 的大小

> ID：13631824
> 
> 赞同：8
> 
> 时间：2012-11-29T17:58:29.483
> 
> 标签：javascript, jquery-ui

我们使用 bootstrap-wysihtml5 来允许用户输入注释。我需要允许用户在有很多输入时扩展编辑区域，最好给他们一个全屏选项。（TinyMCE 内置）

我找不到该选项，也不知道如何或在哪里对其进行编码。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T08:35:29.567

浏览[文档](https://github.com/jhollingworth/bootstrap-wysihtml5/#options)我找不到任何通用的调整大小选项。

*   您可以尝试[jQuery UI 调整大小](http://jqueryui.com/resizable/#textarea)。
*   还有[这个较小的脚本](http://www.twinhelix.com/javascript/dragresize/)，稍加调整就可以解决您的问题。

# asp.net - 局部视图参数

> ID：13631826
> 
> 赞同：0
> 
> 时间：2012-11-29T17:58:32.187
> 
> 标签：asp.net, asp.net-mvc, razor

我想从使用局部视图的视图向局部视图发送一个字符串参数。

**示例：**我希望能够从视图中创建对局部视图的调用并将创建的字符串发送到局部视图中。

我可以这样做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T18:07:25.493

如果我理解正确，您所说的是您希望能够将参数从视图传递到内部的局部视图？

是的你可以。

你可以简单地打电话

```
@{Html.RenderAction("ActionMethodName",new {parameterName = value})} 
```

或者，如果您需要对传入的变量进行额外处理，可以通过操作方法将其传递。

1）创建您的视图（为了示例，我们将其称为“用户”）

2）创建一个部分视图（我们将其称为“_UserInfo”作为相同的示例）

3) 创建一个 Action 方法，它将“_userInfo”部分视图返回到您的父用户视图以及您要将字符串传递到的位置：

```
public PartialViewResult UserInfo(string userName)
{
 return PartialView("_UserInfo",userName);
} 
```

4）所以现在，为了传递一个字符串，你可以简单地将它添加到你的主视图中：@Model User

```
@{Html.RenderAction("UserInfo","ControllerName",new {userName=Model.UserName}} //Note that the parameter name has to match with the parameter name you're receiving at the Action Method (UserInfo method above ). It has to be reflected in routing as well. 
```

ps 这个问题之前被问过很多次了。例如看下面的问题： [将参数传递给我的局部视图？](https://stackoverflow.com/questions/1909134/passing-parameters-to-my-partial-view)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T18:07:16.210

通过调用返回局部视图的操作来呈现局部视图

```
@Html.RenderAction("actionName", "controllerName", new {parameterName= value}); 
```

# java - 为什么Android Activity在更改背景后会移动按钮？

> ID：13631833
> 
> 赞同：1
> 
> 时间：2012-11-29T17:59:13.183
> 
> 标签：java, android

我有一个带有以下图像按钮的活动：

```
<ImageButton android:id="@+id/nextPage"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"       
    android:contentDescription="@string/nextPageString"
    android:alignParentRight="True"
    android:alignParentBottom="True"
    android:onClick="NextPage" /> 
```

正如我所料，我的按钮出现在屏幕的右下角。

当我单击按钮时，我使用以下代码更改背景：

```
public void NextPage(View view){
    Resources res = this.getResources();
    Drawable d = res.getDrawable(R.drawable.nextBackgroundImage);
    view.setBackground(d);
} 
```

在我第一次单击该按钮后，它会完全按照我的意愿显示我的新背景，但是，它将图像按钮移动到屏幕的中心。不知道为什么。我希望它留在右下角。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T18:42:46.610

正如这里的一些评论所指出的，您的背景图像的大小可能是您按钮“移动”的原因。`layout_width`设置为 wrap 后，如果视图的内容（包括其`layout_height`背景）发生变化，尺寸也会发生变化。

为亚历克斯+1，尝试在那里设置一个特定的大小来测试，看看会发生什么（例如，200dp 宽度 x 80dp 高度）。

# algorithm - 以下代码的增长顺序？

> ID：13631838
> 
> 赞同：-2
> 
> 时间：2012-11-29T17:59:24.660
> 
> 标签：algorithm, big-o, nested-loops

我收到了以下问题，无法确定正确答案：

```
for (int i=1; i<=n/2; i++)
  for(int j=i; j<=n-i;j++)
    for(int k=i;k<=j;k++)
      x++; 
```

x 作为 n 的函数的增长顺序是什么？

1.  Ω(n^3)。
2.  Θ(n^2.5)
3.  Θ(n^2)
4.  Ο(nlogn)
5.  以上都不是

我设法弄清楚：

```
T(n) = n*(n-1) + T(n-2) 
```

但这并不能真正帮助我弄清楚增长的顺序。也许有更好的方法来找到它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T18:09:59.610

这看起来像一个家庭作业问题，所以我只会给你提示。

1）假设你只有内循环。作为 i 和 j 的函数，你经历了多少次内循环？循环的每次迭代执行多少次操作？总共应该执行多少操作？

2）现在假设你只有内部的两个循环。作为 i 和 n 的函数，你通过外循环多少次？每次经过外循环，您要经过多少次内循环？（提示：这应该根据 j 的不同而有所不同）总共应该执行多少操作？

3) 现在你已经准备好查看整个问题了。你经历了多少次内部的两个循环（作为 n 的函数），每次迭代应该执行多少操作？总共执行了多少次操作？（这是你的答案）

* * *

好吧，你说这不是作业问题，实际上它比我想象的要难，所以我就给你答案。

每个内部循环在时间 j - i 中运行。

第二个循环按时间运行 (i - i) + (i + 1 - i) + ... + (i + n - 2i - i) = 1 + 2 + ... + (n - 2i) = (n - 2i)(n - 2i + 1)/2，通过数学归纳法。

计算增长顺序时，1项相比n项非常小，所以外循环运行在大约n^2/2 + (n-2)^2/2 + (n-4)^2/2 + ... + 1/2。

这大约是 1^2 + 2^2 + ... + n^2 的四分之一，归纳起来是 n(n+1)(2n+1)/6。因此增长的顺序是Omega(n^3)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T18:30:17.690

有人在上面的评论中提到了打印语句。这里有一些：

```
n = 20 --> x = 715
n = 21 --> x = 825
n = 22 --> x = 946
n = 23 --> x = 1078
n = 24 --> x = 1222
n = 25 --> x = 1378
n = 26 --> x = 1547
n = 27 --> x = 1729
n = 28 --> x = 1925
n = 29 --> x = 2135
n = 30 --> x = 2360
n = 31 --> x = 2600
n = 32 --> x = 2856
n = 33 --> x = 3128
n = 34 --> x = 3417
n = 35 --> x = 3723
n = 36 --> x = 4047
n = 37 --> x = 4389
n = 38 --> x = 4750
n = 39 --> x = 5130
n = 40 --> x = 5530 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-29T18:29:11.720

我试图计算它~~，我发现`T(n) = (13/12) * n * (n² + 3*n + 2)`~~（数学规则！）。所以它是立方的。->**回答 1。**

**编辑**：计算中有错误。真正的答案是`T(n) = n * (n + 2) * (2*n - 1) / 24`：

![示范](../Images/ca81aac2bcea8751e1d7ac1880257e95.png)

但是它仍然是立方的。

# c++ - 对向量 os 字符串进行排序 c++ Visual Studio 2010 - 错误 C2784 无法推断模板参数

> ID：13631842
> 
> 赞同：1
> 
> 时间：2012-11-29T17:59:31.527
> 
> 标签：c++, visual-studio-2010

我想确认这是否是 Visual Studio 2010 中的错误。如果是，那么可以更改任何设置吗？或者我该如何解决？

```
#include <iostream>
#include <vector>
#include <algorithm>

std::vector<std::string> test;

test.push_back("hello"); test.push_back("ABC");

std::sort(test.begin(), test.end()); 
```

**好吧，这是因为我没有包含 std::string header 。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T18:12:36.740

我的第一个猜测是您忘记包含标题（可能`<string>`）。您可以从不同的标头中得到一些最小的前向声明（或类似的东西），让部分代码编译，但其他部分以奇怪的方式中断，导致误导性错误消息。

在快速测试中，这可以与 VS 2008 到 2012 一起编译：

```
#include <vector>
#include <string>
#include <algorithm>

int main() {

    std::vector<std::string> test;

    test.push_back("hello");
    test.push_back("ABC");

    std::sort(test.begin(), test.end());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T18:10:07.813

它编译得很好......

```
#include "stdafx.h"
#include <string>
#include <vector>
#include <algorithm>

int _tmain(int argc, _TCHAR* argv[])
{
std::vector<std::string> test;

test.push_back("hello");
test.push_back("ABC");

std::sort(test.begin(), test.end());
return 0;
} 
```

# android - 用于我的设置的带有操作栏的导航选项卡

> ID：13631844
> 
> 赞同：2
> 
> 时间：2012-11-29T17:59:43.520
> 
> 标签：android, android-actionbar, actionbarsherlock

我对 Android 有点陌生，但是，我正在创建一个将使用 Tab 进行导航的应用程序，并且我正在使用 ActionBarSherlock 作为库来使用 FragmentsTabs。我成功创建了我的标签:)！我是这样做的：

```
public class Main extends SherlockFragmentActivity {

protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    ActionBar bar = getSupportActionBar();
    bar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
    ActionBar.Tab tab1 = bar.newTab();
    ActionBar.Tab tab2 = bar.newTab();
    tab1.setText("HOW IT WORKS");
    tab2.setText("CURRENT POSITION");
    tab1.setTabListener(new MyTabListener());
    tab2.setTabListener(new MyTabListener());
    bar.addTab(tab1);
    bar.addTab(tab2);

} 
```

然后我有我的 TabListener 来处理选项卡之间的内容替换，这工作正常。但我的问题是，既然我有标签，我怎么能添加一个选项菜单？我知道我正在将选项卡添加到操作栏，但我需要在我的应用程序的设置中添加一个选项菜单。所以这将是下一个示例：

[顶部带有 OptionMenu 的选项卡导航的图像](http://blog.stylingandroid.com/wp-content/uploads/2012/07/movies.png)

如您所见，有选项卡导航，但在顶部您会看到徽标和选项菜单，我不知道如何使用已实现的选项卡来做到这一点，我尝试将其作为通常的实现OptionsMenu 并添加到`public boolean onCreateOptionsMenu(Menu menu)`我的 Activity 里面并在那里膨胀我的菜单，但我收到了这个错误：

```
- Cannot override the final method from SherlockFragmentActivity
- overrides 
 com.actionbarsherlock.app.SherlockFragmentActivity.onCreateOptionsMenu 
```

这是该应用程序外观的屏幕截图，因此您可以理解我。

[MyApp 带有标签，但我需要放置 optionsMenu](https://www.dropbox.com/sh/vogbw5eubqdjut2/qSUM4QN4h8#f%3astack.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T18:30:41.697

覆盖错误可能是因为您导入的是标准 Android 菜单，而不是 ABS 菜单。

检查您的导入以确保您`onCreateOptionsMenu(Menu menu)`基于`com.actionbarsherlock.view.Menu`（而不是`android.view.MenuItem`）。

# javascript - jQuery Mobile / Photoswipe / 主页导航中断

> ID：13631848
> 
> 赞同：1
> 
> 时间：2012-11-29T17:59:59.073
> 
> 标签：javascript, jquery, ios, jquery-mobile, photoswipe

我目前正在为一个使用 jQuery Mobile (http://jquerymobile.com/) 和 Photoswipe (http://www.photoswipe.com/) 的照片库的客户端开发一个移动站点。

到目前为止，我正在尝试解决的当前问题是：

*   转到照片库页面
*   点击“返回”按钮或Logo返回首页
*   尝试单击前 3 个导航按钮中的任何一个（这些链接到移动站点内的内部“页面”（div）），但没有任何反应。您可以在地址栏中看到 URL 已更新，但内容实际上并未更改，因此这些导航按钮本质上是死链接。

到目前为止，我一直在 iPhone 设备上遇到这个问题，我可以在 Safari 中复制这个问题。我已经为此绞尽脑汁好几个小时了，无法弄清楚是什么导致了这个问题。

您可以在此处查看实时 URL： [http ://cms.vizergy.com/vsites/Preview.aspx?siteguid=af91c21b-1717-4e57-935c-a617fed2303b](http://cms.vizergy.com/vsites/Preview.aspx?siteguid=af91c21b-1717-4e57-935c-a617fed2303b)

这是我将 Photoswipe 附加到页面的代码：

```
 /*
 * IMPORTANT!!!
 * REMEMBER TO ADD  rel="external"  to your anchor tags. 
 * If you don't this will mess with how jQuery Mobile works
 */

(function(window, $, PhotoSwipe){

     var options = {jQueryMobile: false};
     $(document).ready(function(){

     /* var activePage = $('.ui-page-active'); */

     var activePage = $('.ui-page-active');
     if($(".ui-page-active").is(".pGalOn")) {          
          photoSwipeInstance = $("ul.pGal a", activePage).photoSwipe(options,  activePage.attr('id'));
     }

          $('div.pGalOn')
               .live('pageshow', function(e){

                    var 
                         currentPage = $(e.target),
                         photoSwipeInstance = $("ul.pGal a", e.target).photoSwipe(options,  currentPage.attr('id'));

                    return true;

               })

               .live('pagehide', function(e){

                    var 
                         currentPage = $(e.target),
                         photoSwipeInstance = PhotoSwipe.getInstance(currentPage.attr('id'));

                    if (typeof photoSwipeInstance != "undefined" && photoSwipeInstance != null) {
                         Code.PhotoSwipe.detatch(photoSwipeInstance);
                    }

                    return true;

               });

     });

}(window, window.jQuery, window.Code.PhotoSwipe)); 
```

任何帮助/见解将不胜感激！

编辑：

从我出色的开发同事那里得到帮助，他发现 Photoswipe 的代码存在缺陷。看起来有一行说如果“windowsHashChangeHandler”为空，则从“hashChange”事件中删除所有事件处理程序，使后退按钮无用。基本上改变你的photoswipe.js文件中的以下内容：

```
if (this.isBackEventSupported && this.settings.backButtonHideEnabled){         Util.Events.remove(window, 'hashchange', this.windowHashChangeHandler);

   } 
```

对此：

```
if (this.isBackEventSupported && this.settings.backButtonHideEnabled && this.windowHashChangeHandler !== null){
                    Util.Events.remove(window, 'hashchange', this.windowHashChangeHandler);
               } 
```

详细信息可以在这里找到： [https ://github.com/codecomputerlove/PhotoSwipe/pull/351](https://github.com/codecomputerlove/PhotoSwipe/pull/351)

# jquery - jqplot 和 barcharts 中条形图和 Y 轴的不同缩放比例

> ID：13631849
> 
> 赞同：3
> 
> 时间：2012-11-29T18:00:00.307
> 
> 标签：jquery, jqplot, bar-chart

在使用 jqplot 时，我必须创建具有 2 个系列的条形图，每个系列都包含 3 个不同的值（类别）。问题是第一个值大约是 50000，另外两个大约是 (-3) - (3)。因此，在一张图表上绘制时，只有 2 条可见。我正在考虑将 LogRenderer 用于 y 轴，但它似乎根本不起作用。最好的选择是为每个刻度组（类别）设置不同的 y 轴，但是在搜索后我没有找到任何方法来做到这一点。（重要的是必须只有 2 个系列 - 这是日期比较，因此不可能更改系列中的内容）

有谁知道如何实现这一目标？或者有没有其他方法可以在一张图表上显示所有数据（主要使用条形图）。

JS 摆弄我的工作示例：http: [//jsfiddle.net/F5N4r/](http://jsfiddle.net/F5N4r/)

标题：

```
<script type="text/javascript" src="https://bitbucket.org/armata007/jqplot/downloads/jquery.jqplot.min.js"></script>
<script type="text/javascript" src="https://bitbucket.org/armata007/jqplot/downloads/jqplot.barRenderer.min.js"></script>
<script type="text/javascript" src="https://bitbucket.org/armata007/jqplot/downloads/jqplot.canvasAxisTickRenderer.min.js"></script>
<script type="text/javascript" src="https://bitbucket.org/armata007/jqplot/downloads/jqplot.categoryAxisRenderer.min.js"></script>
<script type="text/javascript" src="https://bitbucket.org/armata007/jqplot/downloads/jqplot.enhancedLegendRenderer.min.js"></script>
<script type="text/javascript" src="https://bitbucket.org/armata007/jqplot/downloads/jqplot.logAxisRenderer.min.js"></script>
<div id="plot"></div>​ 
```

编码：

```
var s1 = [50000, 0.11, 2.3];
var s2 = [55000, -0.20, 1.4];

var ticks = ['category 1', 'category 2', 'category 3'];

var plot1 = $.jqplot('plot', [s1, s2], {
    seriesDefaults: {
        renderer: $.jqplot.BarRenderer,
        rendererOptions: {
            fillToZero: true
        }
    },
    series: [
        {
        label: 'January 2012'},
    {
        label: 'February 2012'}
    ],
    legend: {
        show: true,
        placement: "outside",
        location: "s",
        renderer: $.jqplot.EnhancedLegendRenderer,
        rendererOptions: {
            numberRows: 1
        },
        marginTop: "34px"
    },
    axes: {

        xaxis: {
            renderer: $.jqplot.CategoryAxisRenderer,
            ticks: ticks
        },

        yaxis: {
            //renderer: $.jqplot.LogAxisRenderer,
            pad: 1.05,
            tickOptions: {
                formatString: '%d'
            }
        }
    }
});​ 
```

结果： [http ://www.roslaw.pl/pics/2012-11-29_18-56-55_835341x930andWndpnd.png](http://www.roslaw.pl/pics/2012-11-29_18-56-55_835341x930andWndpnd.png)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-01T16:08:23.020

我自己一直在玩这个，希望这可以节省一些时间。

您需要为传递给函数的每个系列定义一个单独的系列（在您的情况下为 s1 和 s2 ）。您定义它们的顺序对应于它们被传递的顺序。

```
series: [
    {
        label: 'January 2012',
    }, 
    {
        yaxis:'y2axis',
        label: 'February 2012'
    }
],

...

axes: {
    xaxis: {
        },
        yaxis: {
            label: "y axis 1"
        },
        y2axis: {
            label: 'y axis 2',
        }
} 
```

# actionscript-3 - 旋转最近的矩形

> ID：13631852
> 
> 赞同：0
> 
> 时间：2012-11-29T18:00:15.800
> 
> 标签：actionscript-3, flash, actionscript

主要代码（初始化）：

```
package  {
    import flash.display.Sprite;
    import flash.display.Bitmap;
    import flash.display.BitmapData;
    import flash.geom.Rectangle;
    import flash.geom.Point;
    import flash.events.Event;
    import flash.utils.Timer;
    import flash.events.TimerEvent;

    public class Init extends Sprite {

        var parts:Array,
        images:Array,
        w:Number = 20,
        h:Number = 80,
        numParts:int = stage.stageWidth / w,
        i:int,
        imgCount:int = 0,
        timer:Timer,
        rc:Number = 0,
        vr:Number = 10;
        public function Init() {
            init();
        }

        function init():void
        {
            parts = new Array();
            images = new Array(new Img1(), new Img2());

            for(i = 0; i < numParts; i++)
            {
                var img2:BitmapData = new BitmapData(w, h);
                img2.copyPixels(images[imgCount], new Rectangle(i * w, 0, w, h), new Point());
                var bitmap:Bitmap = new Bitmap(img2);
                bitmap.x = -w / 2
                var rect:Rect = new Rect();
                rect.addChild(bitmap);
                rect.x = i * w + w / 2;
                addChild(rect);
                parts.push(rect);
            }
            i = 0;
            timer = new Timer(2000);
            timer.addEventListener(TimerEvent.TIMER, onTick);
            timer.start();
        }

        function onTick(e:TimerEvent):void
        {
            addEventListener(Event.ENTER_FRAME, onEnterFrame);
            timer.stop();
        }

        function onEnterFrame(e:Event):void
        {
            rotate2();
        }

        function rotate2()
        {
            parts[i].rotationY += vr;
            parts[i].rc += vr;
            if(parts[i].rc >= 180)
            {
                parts[i].rc = 0;
                parts[i].rotationY = 0;
                i++;
                if(i >= numParts)
                {
                    i = 0;
                    removeEventListener(Event.ENTER_FRAME, onEnterFrame);
                    timer.start();
                }
            }
            else
            if(parts[i].rc == 90)
            {

                parts[i].imgCount++;
                if(parts[i].imgCount >= images.length){parts[i].imgCount = 0;}
                    var img2:BitmapData = new BitmapData(w, h);
                    img2.copyPixels(images[parts[i].imgCount], new Rectangle(i * w, 0, w, h), new Point());
                    var bitmap:Bitmap = new Bitmap(img2);
                    bitmap.x = -w / 2
                    parts[i].redraw(bitmap);
                    parts[i].rotationY = -90;

            }

        }

        function rotate1()
        {
            for(i = 0; i < numParts; i++)
            {
                parts[i].rotationY += vr;
            }
            rc += vr;
            if(rc == 180)
            {
                removeEventListener(Event.ENTER_FRAME, onEnterFrame);
                timer.start();
                rc = 0;
            }
            else
            if(rc == 90)
            {
                imgCount++;
                if(imgCount >= images.length){imgCount = 0;}
                for(i = 0; i < numParts; i++)
                {
                    var img2:BitmapData = new BitmapData(w, h);
                    img2.copyPixels(images[imgCount], new Rectangle(i * w, 0, w, h), new Point());
                    var bitmap:Bitmap = new Bitmap(img2);
                    bitmap.x = -w / 2
                    parts[i].redraw(bitmap);
                    parts[i].rotationY = -90;
                }

            }
        }

    }

} 
```

矩形类：

```
package  {
    import flash.display.Sprite;
    import flash.events.Event;

    public class Rect extends Sprite {

        public var imgCount:int = 0,
        rc:int = 0;
        public function Rect() {
            init();
        }

        private function init():void
        {

        }

        public function redraw(bitmap):void
        {
            removeChildAt(0);
            addChild(bitmap);
        }

    }

} 
```

描述：

这里我有2个方法，rotate1 - 一次旋转所有矩形，而rotate2在旋转180度后旋转每个矩形，然后旋转下一个矩形，所以我要做的是从当前旋转最近的矩形，假设最近的 3 个矩形，它们从当前旋转一半的速度，我怎么能用这个代码来做到这一点..

ps：您可以通过导入一些图像来尝试此代码...

# c# - 如何使复选框始终处于选中状态，直到有人更改

> ID：13631854
> 
> 赞同：0
> 
> 时间：2012-11-29T18:00:17.533
> 
> 标签：c#, .net, winforms, visual-studio-2010, checkbox

我有两个复选框 m_chkRegex 和 m_chkCaseSensitive 将通过下面显示的代码进行检查

```
public PropertyFilter InFilter
  {
     get{ return m_inFilter; }
     set{ m_inFilter = value; }
  }
  private PropertyFilter m_inFilter = null;
        m_operatorComboBox.SelectedIndex = 0;
     if( Property != null )
     {
        m_propertyLabel.Text = Property.DisplayName;
        if( InFilter != null )
        {
           m_operatorComboBox.SelectedItem = InFilter.GetOperatorAsString();
           m_valueTextBox.Text = InFilter.GetValueAsString();
           m_chkRegex.Checked = ( InFilter.FilterType == PropertyFilter.enumFilterType.regularExpr );
           m_chkCaseSensitive.Checked = InFilter.CaseSensitive;
        }
     } 
```

由于某些原因，“InFilter”变为空，并且两个复选框都未选中。所以我想制定一个这样的硬性规则，一旦这两个复选框被选中，就应该被选中，直到有人来改变它。在 ASP.NET 中，我听说我们有 IsPostBack 属性，这将使复选框被选中，但是我们在 winform 中是否有任何机制来实现它。

**更新**

现在我明白了，以下是导致代码变量 pFilt 变为 null 的问题，但我不知道该怎么办

```
private void LinkClicked(object sender, LinkLabelLinkClickedEventArgs e)
      {
         // Get appropriate information.
         PropertyFilter pFilt = (PropertyFilter)e.Link.LinkData; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T18:18:31.423

首先，你没有测试正确的东西。你的代码应该是这样的（如果我知道你要去哪里的话）。

```
private PropertyFilter m_inFilter = null;
if( m_inFilter != null )
{
     //CheckBox logic.
} 
```

我相信你知道这是`CheckBox`语法：`CheckBox.Checked(bool);`
所以这里的逻辑是检查（带断点）为什么

```
InFilter.FilterType == PropertyFilter.enumFilterType.regularExpr  

//And

InFilter.CaseSensitive 
```

两者都返回`false`。（暗示你没有用错误的东西进行测试。`InFilter`而不是`m_inFilter`）。

# php - 设置 PHPUnit Mock 后，我可以更改方法吗？

> ID：13631855
> 
> 赞同：29
> 
> 时间：2012-11-29T18:00:23.083
> 
> 标签：php, mocking, phpunit

我正在尝试在 setUp 中创建一个模拟实例，其中所有覆盖方法的默认值，然后在几个不同的测试中根据我正在测试的内容更改某些方法的返回值，而无需设置整个 Mock . 有没有办法做到这一点？

这是我尝试过的，但天真的方法不起作用。该方法仍然返回原始期望设置的值。

第一个设置：

```
$my_mock->expects($this->any())
        ->method('one_of_many_methods')
        ->will($this->returnValue(true)); 
```

在另一个断言之前的另一个测试中：

```
$my_mock->expects($this->any())
        ->method('one_of_many_methods')
        ->will($this->returnValue(false)); 
```

重复这个问题：[PHPUnit Mock 稍后更改期望](https://stackoverflow.com/questions/10165831/phpunit-mock-change-the-expectations-later)，但没有得到回应，我认为一个新问题可能会将问题带到前台。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-21T03:36:46.067

如果您多次使用相同的方法，则应在代码中执行的位置使用具有正确计数的“at”声明。这样 PHPUnit 就知道你指的是哪一个，并且可以正确地满足期望/断言。

以下是一个通用示例，其中多次使用方法“运行”：

```
public function testRunUsingAt()
    {
        $test = $this->getMock('Dummy');

        $test->expects($this->at(0))
            ->method('run')
            ->with('f', 'o', 'o')
            ->will($this->returnValue('first'));

        $test->expects($this->at(1))
            ->method('run')
            ->with('b', 'a', 'r')
            ->will($this->returnValue('second'));

        $test->expects($this->at(2))
            ->method('run')
            ->with('l', 'o', 'l')
            ->will($this->returnValue('third'));

        $this->assertEquals($test->run('f', 'o', 'o'), 'first');
        $this->assertEquals($test->run('b', 'a', 'r'), 'second');
        $this->assertEquals($test->run('l', 'o', 'l'), 'third');
    } 
```

我想这就是你要找的东西，但如果我有误解，请告诉我。

现在就模拟任何东西而言，您可以根据需要模拟多次，但您不会希望使用与设置中相同的名称来模拟它，否则每次使用它时都指的是设置。如果您需要在不同的场景中测试类似的方法，那么为每个测试模拟它。您可以在设置中创建一个模拟，但对于一个测试，在单个测试中使用类似项目的不同模拟，但不是全局名称。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-05-30T12:13:49.837

您可以使用 lambda 回调来执行此操作：

```
$one_of_many_methods_return = true;
$my_mock->expects($this->any())
        ->method('one_of_many_methods')
        ->will(
             $this->returnCallback(
                 function () use (&$one_of_many_methods_return) {
                     return $one_of_many_methods_return;
                 }
              )         
          );
$this->assertTrue($my_mock->one_of_many_methods());

$one_of_many_methods_return = false;

$this->assertFalse($my_mock->one_of_many_methods()); 
```

注意声明`&`中的。`use`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-29T20:20:21.147

一种方法是使用[数据提供者](http://www.phpunit.de/manual/current/en/writing-tests-for-phpunit.html#writing-tests-for-phpunit.data-providers)，例如：

```
/**
 * @dataProvider methodValueProvider
 */
public function testMethodReturnValues($method, $expected) {
  // ...
  $my_mock->expects($this->any())
          ->method($method)
          ->will($this->returnValue($expected));
  // ...
}

public function methodValueProvider() {
  return array(
    array('one_of_many_methods', true),
    array('another_one_of_many', false)
  );
} 
```

编辑：对不起，我误读了你的问题。以上（显然）不是你要找的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-30T14:47:59.150

我没有尝试过，但你能不能在设置中设置模拟，然后在每个测试中：

```
public function testMethodReturnsTrue
{
    $this->my_mock->will($this->returnValue(true));
    $this->assertTrue( ... );
    ...
} 
```

我不确定这是否可行，因为我试图在测试中设置 will() 方法，而不是在创建初始模拟时。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-09-18T09:59:57.933

与其尝试覆盖模拟方法，我发现覆盖模拟对象本身更容易。例如：

```
class ThingTest extends \PHPUnit_Framework_TestCase
    public function setUp()
    {
        $this->initFoo();
        $this->initBar();
    }

    public function testOne()
    {
        // Uses default [method => value] map for foo and bar
        $this->assertSomething($this->thing->someMethod());
    }

    public function testTwo()
    {
        // Override foo's map
        $this->initFoo(['method1' => 'some other value']);
        $this->assertSomethingElse($this->thing->someMethod());
    }

    public function testThree()
    {
        // Override bar explicitly, so we can use 'once'
        $this->initBar([]);
        $this->bar->expects($this->once())
                  ->method('method1');
        $this->thing->someOtherMethod();
    }

    private function initFoo($methods = null)
    {
        $this->init('foo',
                    $this->getMock('Foo'),
                    is_null($methods)? ['method1' => 'default value 1']
                                    : $methods);
    }

    private function initBar($methods = null)
    {
        $this->init('bar',
                    $this->getMock('Bar'),
                    is_null($methods)? ['method1' => 'default value 1']
                                     : $methods);
    }

    private function init($name, $object, $methods)
    {
        $this->$name = $object;
        foreach ($methods as $method => $value) {
            $this->$name->expects($this->any())
                        ->method($method)
                        ->will($this->returnValue($value));
        }
        $this->thing = new Thing($this->foo, $this->bar);
    }
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-01-20T16:12:34.493

您还可以在单​​独的进程中运行测试：

```
/**
 * @runTestsInSeparateProcesses b/c we change the return value of same expectation
 * @see http://stackoverflow.com/questions/13631855
 */
class ThingTest extends \PHPUnit_Framework_TestCase
{
    public function setUp() {
        $this->config = Mockery::mock('alias:Config');
    }

    public function test_thing_with_valid_config() {
        $this->config_set('default', 'valid');
        $sut = new \Thing();
    }

    /**
     * @dataProvider provides_broken_configs
     * @expectedException \RuntimeException
     */
    public function test_thing_with_broken_config($default) {
        $this->config_set('default', $default);
        $sut = new \Thing();
    }

    public function provides_broken_configs() {
        return [ [ null ] ];
    }

    protected function config_set($key, $value) {
        $this->config->shouldReceive('get')->with($key)->andReturn($value);
    }
} 
```

在这个例子中，我碰巧使用了 Mockery，但模式是一样的。因为每个测试每次运行都有新鲜的记忆，所以我们不会遇到“覆盖”先前设定的期望的限制。

# jquery - 中心响应 DIV

> ID：13631857
> 
> 赞同：1
> 
> 时间：2012-11-29T18:00:31.117
> 
> 标签：jquery, html, css

我有以下代码：

**更新：**

[http://jsfiddle.net/Zdevq/2/](http://jsfiddle.net/Zdevq/2/)

```
.container {
  height: 100%;
  width: 100%;
  background: #eee;
  position: absolute;

}

.box {
  height: 100px;
  width: 100px;
  background: #222;
  position: absolute;

  /*Centering Method 2*/
  margin: -50px 0 0 -50px;
  left: 50%;
  top: 50%;
} 
```

来自：[http ://designshack.net/articles/css/how-to-center-anything-with-css/](http://designshack.net/articles/css/how-to-center-anything-with-css/)

== 但我想要的是模态框具有相对于响应容器 div 的宽度。

有什么方法可以在响应 div 中创建一个真正响应的模态框？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T18:32:37.267

您没有以正确的方式使用它，必须使用最新的 jquery 在准备好的文档上初始化该函数。

> [http://jsfiddle.net/n29up/1/](http://jsfiddle.net/n29up/1/)

这是`jQuery`代码-以这种方式使用jquery：

但请确保添加最新的 jquery 插件

```
<script src='https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js' type='text/javascript'></script>

<script type='text/javascript'>
  $(function(){

    $.fn.center = function () {
         this.css("position","absolute");
         this.css("top", ( $(window).height() - this.height() ) / 2  + "px");
         this.css("left", ( $(window).width() - this.width() ) / 2 + "px");
         return this;
    }

    $(".box").center();   // on page load div will be entered                                               

    $(window).resize(function(){ // whatever the screen size this
         $(".box").center();       // this will make it center when
    });                          // window resize happens

  });
</script> 
```

你的小`updated css`：

```
.container {
    height: 100%;
    width: 100%;
    background: #eee;
    position: absolute;
}

.box {
   height: auto;
   width: 70%;
   background: gray;
   position: absolute;
   margin: 0;
   left:0;
   top:0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T18:06:34.090

这个怎么样

**[检查小提琴](http://jsfiddle.net/sushanth009/Zdevq/3/)**

`margin`从盒子中取出并为容器添加了`min-height`和`max-height`..

```
.container {
  height: 100%;
  width: 100%;
  background: #eee;
  position: absolute;
}

.box {
  height: auto;
  width: 70%;
  background: gray;
  position: absolute;
  /*Centering Method 2*/
  left: 15%;
  top: 45%;
}​ 
```

# stored-procedures - 存储过程中的 Oracle For 循环不循环

> ID：13631859
> 
> 赞同：0
> 
> 时间：2012-11-29T18:00:38.293
> 
> 标签：stored-procedures, for-loop, plsql, oracle10g, oracle11g

在尝试在我们的一个系统中提高 SP 的可维护性时，我决定使用循环比硬编码一组值（在这种情况下为表名）更好，并尝试相应地重构代码以便添加或将表删除到系统不需要编辑数组。暂时撇开循环的原因和原因（我非常清楚反对它们的论点），任何人都可以解释发生了什么吗？

想象一下，两个用户 SourceUser 和 DestUser 都在同一个数据库中，每个用户的表都在同一个表空间中。SourceUser 中的一堆存储过程将 SourceUser 中的数据填充到 DestUser 以用于报告目的。作为其中的一部分，要运行的第一个过程会删除 DestUser 中的所有表并重新创建它们。同样，这里不讨论这样做的相对优点。

SourceUser 对 DestUser 具有 Drop Any Table 和 Create Any Table 权限。我们要保留 DestUser 中的一张表。所以，我在过程中构造的 SQL 如下所示：

```
Begin
  For T In (SELECT TABLE_NAME FROM all_tables WHERE TABLE_NAME != 'MIDBLOG' AND OWNER = sTarget_DB) Loop
    Begin
      Execute Immediate('Drop Table ' || sTarget_DB || '.' || T.TABLE_NAME);

    Exception
      When Others Then
        --Don't care if we get an exception here as most likely the table wasn't there to be dropped in the first place.
        NULL;
    End;
  End Loop;
End; 
```

在这种情况下，sTarget_DB 设置为 DestUser，并且此代码针对 SourceUser 运行。

当程序运行时，我发现没有表被删除（我在开始之前确认有几十个表，包括一个名为 MIDBLOG 的表）。我在 SQL Developer 调试模式下运行它，执行甚至从未进入循环内部，因为它似乎认为它没有要处理的行，但我确定 select 语句将返回几十个表名。

接下来我将其修改为：

```
Begin
  For T In (SELECT TABLE_NAME FROM all_tables WHERE OWNER = sTarget_DB) Loop
    Begin
      If T.TABLE_NAME != 'MIDBLOG' THEN
        Execute Immediate('Drop Table ' || sTarget_DB || '.' || T.TABLE_NAME);
      End If;
    Exception
      When Others Then
        --Don't care if we get an exception here as most likely the table wasn't there to be dropped in the first place.
        NULL;
    End;
  End Loop;
End; 
```

运行这个之后，唯一被删除的表就是我不想删除的那个！更奇怪的是循环只执行了一次，就好像选择查询只返回一行一样。如果我在 SQL Developer 3.2 的调试中运行该过程，我可以看到它正在发生。我们在同事的 PC 上使用 SQL Developer（可能是 3.1）做了同样的事情，循环只执行了一次，但这次它正确地决定不删除表 MIDBLOG 并再次留下其他所有内容。

如果我在 SQL Developer 中将上述示例中的任何一个作为匿名块运行，它就会完全符合我的预期。我尝试了更详细的显式游标声明，结果与以前相同。我从来没有得到任何例外。

所有这些都在 Oracle 10g Enterprise Edition Release 10.2.0.4.0（64 位）上。只要在 Oracle 11g Enterprise Edition Release 11.2.0.1.0 (64bit) 上尝试过，它就可以正常工作。为什么这样一个基本要求会在两个版本中表现出如此截然不同的行为？它可以在两个版本中使用相同的代码按我想要的方式工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T19:12:46.953

我的猜测是问题与权限有关，而不是 Oracle 的版本。权限`DestUser`是通过一个数据库中的角色授予还是`SrcUser`通过另一个数据库中的直接授予？

在运行匿名 PL/SQL 块之前，如果先禁用角色会发生什么？

```
set role none;
<<run the anonymous PL/SQL block>> 
```

If you add instrumentation to the code, does the query against `all_tables` return the set of tables that you expect? My guess is that when the code fails, it is in a definer's rights stored procedure where the owner of the procedure has access to the `DestUser` tables via a role. Since privileges granted through a role are not visible in a definer's rights stored procedure, this would cause the `SELECT` statement in your loop to return 0 rows (though running the same query interactively would return the rows you expect). If the privileges on the `DestUser` tables are granted directly, on the other hand, the same definer's rights stored procedure would run successfully. And it would work in an anonymous PL/SQL block.

# templates - Scala 模板集变量

> ID：13631861
> 
> 赞同：2
> 
> 时间：2012-11-29T18:00:40.977
> 
> 标签：templates, scala, playframework, playframework-2.0

我是 Scala 的新手（Play 2 框架中的 Scala 模板），我想做以下事情：传递一个参数 isEdit 并根据这个参数定义一个值，伪代码：

```
variable myTitle;

if(isEdit)
    myTitle="edit question";
else
    myTitle="create question"; 
```

如何在 Play 2.0 的 Scala 模板中制定这个？传递 isEdit 不是问题，只创建新变量 myTitle。谢谢 ：-）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T16:00:59.653

首先，查看 Playframework 文档，因为那里有很多关于模板的好信息。 [http://www.playframework.org/documentation/2.0.4/ScalaTemplates](http://www.playframework.org/documentation/2.0.4/ScalaTemplates)

现在，如果您需要在整个模板中重用该值，那么您可以在模板顶部声明它（可能在任何@imports 之后）：

```
@myTitle = @{ if(isEdit) "edit question" else "create question" } 
```

如果你只在一个地方需要它，那么你真的只需要 if-else 块：

```
<h1>
  @if(isEdit) {
    edit question
  } else {
    create question
  }
</h1> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T12:55:26.877

您不能在视图模板中以这种方式使用变量（如果我错了，请纠正我）。我会使用 javascript 来做你想做的事，即将 isEdit 传递给一些 javascript 函数并从中设置标题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-12T15:27:34.887

你可以试试这个，在类似的情况下为我工作

```
@import java.lang.String; val myTitle = { if(isEdit) "edit question" else "create question" }

<h1>
    @myTitle
</h1> 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-11-29T18:10:16.803

不太确定你在问什么，你可以这样做：

```
var myTitle = ""
if (isEdit)
    myTitle="edit question"
else
    myTitle="create question" 
```

或这个：

```
val myTitle = if (isEdit) "edit question" else "create question" 
```

# c - 使用循环中的变量访问相似的结构

> ID：13631866
> 
> 赞同：3
> 
> 时间：2012-11-29T18:01:15.453
> 
> 标签：c, structure, field

如何使用变量访问多个相似的结构，例如 P1、P2。我希望能够使用数字部分的变量在循环中访问子字段 turn，例如 P1.turn、P2.turn。当我编译时，我得到错误“错误：请求成员'转'不是结构或联合”。代码如下：

```
while (((strcat("P", (char)&pplayer_num))).turn == 0){ 
```

&pplayer_num 以 int 开头。

我尝试将字符串转换为结构，但出现其他错误。我知道这可能很简单，我只是忽略了任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T18:05:38.010

如果您想动态计算变量的名称然后访问这些变量，C 不是您想要的语言。最接近的近似值是将这些变量（甚至更好的是指向它们的指针）放在数组的元素中，因为它们可以通过它们的索引动态标识。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T18:49:22.683

C 不能以这种方式工作。看起来您将代码在编译之前的外观与编译后的行为方式混淆了。或者更确切地说，您将编译时与运行时混合在一起。

也就是说，理论上您可以使用类似于您的代码的东西来生成 C 代码（每个播放器对象），但是您需要编译输出以获得您想要的行为。脚本语言（如 python）可以在运行时查找值，但 C 不能。它不知道您希望您创建的字符串 (P1) 映射到名为 P1 的对象/指针。

# sqlite - SQL 查询以查找具有某些属性但缺少其他属性的文章

> ID：13631867
> 
> 赞同：1
> 
> 时间：2012-11-29T18:01:24.260
> 
> 标签：sqlite, select, filter, key-value, entity-attribute-value

在 SQLite 中，我想编写一个 SELECT 查询来查找具有某些属性+值或不具有某些属性的文章，其中属性位于另一个表中。

这就是我组织数据库的方式：

```
Articles:

ID  Name
1   Paper clip
2   Water hose
3   Rubber duck

Features
ID    Articles_ID  Name    Value
1     1            Color   White
2     2            Color   Yellow
3     2            Length  1.4m
4     3            Color   Yellow 
```

如果我想找到黄色的文章，我可以这样做：

```
SELECT distinct a.Name from Articles a join Features f
             where a.ID = f.Articles_ID
               and f.Name = "Color"
               and f.Value = "Yellow"; 
```

但是，如果我想查找颜色为黄色但*没有*任何长度特征的文章怎么办。即我想要橡皮鸭，因为它没有长度，但我不想要水管。

在我的 UI 中可以选择：

```
Color: [ ] <empty>
       [x] Yellow
       [ ] White
       [ ] ...

Length: [x] <empty>
        [ ] 0.7m
        [ ] 1.4m
        [ ] ... 
```

我的文章表有 ~20k 行和 ~200k 特征。

也许我的数据库不适合这种查询？如有必要，我可以轻松地重新生成它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T10:37:43.710

（注意：您可能需要文章 ID，在这种情况下您不需要`DISTINCT`；并且连接的语法应该是`tableA JOIN tableB ON condition`。）

有三种可能：你可以得到所有黄色文章，然后[排除](http://www.sqlite.org/lang_select.html#compound)所有有长度的文章：

```
SELECT a.ID,
       a.Name
FROM Articles a
JOIN Features f ON a.ID = f.Articles_ID
WHERE f.Name = 'Color'
  AND f.Value = 'Yellow'
EXCEPT
SELECT a.ID,
       a.Name
FROM Articles a
JOIN Features f ON a.ID = f.Articles_ID
WHERE f.Name = 'Length' 
```

或者，使用子查询来匹配`Length`不存在相应记录的记录：

```
SELECT a.ID,
       a.Name
FROM Articles a
JOIN Features f ON a.ID = f.Articles_ID
WHERE f.Name = 'Color'
  AND f.Value = 'Yellow'
  AND NOT EXISTS (SELECT ID
                  FROM Features f2
                  WHERE f2.Articles_ID = a.ID
                    AND f2.Name = 'Length') 
```

或者，使用 a`LEFT JOIN`与所有`Length`要素连接，并匹配此类连接未成功的那些记录。（使用`Color`第一个特征连接中的条件，这个查询是最常规的。）

```
SELECT a.ID,
       a.Name
FROM Articles a
JOIN      Features f1 ON  a.ID = f1.Articles_ID
                      AND f1.Name = 'Color'
LEFT JOIN Features f2 ON  a.ID = f2.Articles_ID
                      AND f2.Name = 'Length'
WHERE f1.Value = 'Yellow'
  AND f2.Value IS NULL 
```

* * *

哪种查询最有效取决于您拥有哪些索引以及 SQLite 是否决定使用它们。使用[EXPLAIN QUERY PLAN](http://www.sqlite.org/eqp.html)进行检查。

# css - div 填充超过 100% 的屏幕高度

> ID：13631870
> 
> 赞同：1
> 
> 时间：2012-11-29T18:01:32.443
> 
> 标签：css, html

我的页面顶部有一个 133 像素高的标题栏。我将我的身体设置为位置：绝对和高度：100%。

我现在在下面还有两个 div 用于定位。我将它们设置为相对高度 100% 的位置，现在它从我的页面底部延伸了额外的 133 像素。如果我删除顶栏，高度是完美的 - 但顶栏将 100% 推到 100% + 133px。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <title></title>
  <style type="text/css">
    body {
      margin: 0px;
      padding: 0px;
    }
    div#god {
      position: absolute;
      width: 100%;
      height: 100%;
    }  
    div#topbar {
      position: relative;
      top: 0px;
      left: 0px;
      width: 100%;
      height:133px;
      background-image :url(bkgnd_header_tile.jpg);
    }
    div#logo {
      width: 187px;
      height: 133px;
      background-image:url('headerlogo_home.jpg');
      float: left;
    }
    div#text {
      height: 133px;
      float: right;
    }
    div#campuses {
      height: 68px;
      padding-top: 10px;
      color: White;
      text-align: right;
    }
    div#title {
      height: 41px;
      color: White;
      text-align: right;
      padding-top: 14px;
    }
    div#body { 
      position: relative;
      height: 100%;
    }
    div#sidebar {
      width: 300px;
      float: right;
      background-color: #EFEFEF;
      height: 100%;
    }
    div#content {
      height: 100%;
      overflow: hidden;
      background-color: #FEFEFE;
    }
    span.text {
      padding-left: 15px;
      padding-right: 15px;
      font-family: Sans-Serif;
      font-size: small;
    }
    span.name {
      padding-left: 15px;
      padding-right: 15px;
      font-family: Sans-Serif;
      font-size: x-large;
    }  
  </style>
</head>
<body>
<div id="god">
  <div id="topbar">
    <div id="logo"></div>
    <div id="text">
      <div id="campuses">
        <span class="text">St. John's Campus</span>
        <span class="text">Grenfell Campus</span>
        <span class="text">Marine Institute</span>
        <span class="text">Harlow Campus</span>
        <span class="text">Distance Education</span>
      </div>
      <div id="title"><span class="name">Memorial Self Service</span></div>
    </div>
  </div>
  <div id="body">
    <div id="sidebar">
      &nbsp;afasdfadsfadf
    </div>
    <div id="content">
      &nbsp;fdsafdasdfa
    </div>
  </div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T18:28:21.940

也使顶栏成为绝对：

```
div#topbar {
    position: absolute;
    z-index: 1;
} 
```

并为您的内容和侧边栏添加包装器 div，这些 div 具有顶部边缘：

```
<style>
    div.topbar-padding {
       margin-top: 133px;
    }
</style>    
<div id="body">
    <div id="sidebar">
        <div class="topbar-padding">
            &nbsp;afasdfadsfadf
        </div>
    </div>
    <div id="content">
      <div class="topbar-padding">
            &nbsp;afasdfadsfadf
        </div>
    </div>
  </div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T18:06:18.723

顶栏也应该是绝对的。

```
div#topbar {
    position:absolute;
    z-index:2;
} 
```

# python - 计算距离并打印出来

> ID：13631872
> 
> 赞同：4
> 
> 时间：2012-11-29T18:01:35.567
> 
> 标签：python, distance, output

我的任务是计算一个矩形和坐标系中 0/0 点之间的距离并打印一个特定的答案。如果接近100m（系统单位是米，1单位=1米），应该打印100m，如果距离<200m，打印101m...

我了解到我可以使用勾股定理来获得两个坐标之间的距离。我将它实现到我的程序中（在 Python 中），但输出时遇到了一些问题。

让我们尝试一个例子。坐标为 (–400,200) 的矩形；(–300, 200); (–300, 300); (–400, 300) 距离点 (0/0) 360m。正确的输出是“103m”。

以前有人问过这样的问题，他们说，您必须将距离除以 100 并将其添加到“10{}”。

```
print("10{}m".format(distance//100)) 
```

实际上，这适用于 1000 以下的所有内容。如果坐标为 (–4000,2000)；(–3000, 2000); (–3000, 3000); (–4000, 3000)，正确的距离应该是“3605m”，它应该输出“136m”。

希望你能理解我的案例/问题！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T18:10:06.330

```
print("{:d}m".format(100+(distance//100))) 
```

例如，

```
In [16]: distance = 50; "{:d}m".format(100+(distance//100))
Out[16]: '100m'

In [17]: distance = 360; "{:d}m".format(100+(distance//100))
Out[17]: '103m'

In [18]: distance = 3605; "{:d}m".format(100+(distance//100))
Out[18]: '136m' 
```

# jakarta-ee - 为什么 SingularAttribute 不可序列化？

> ID：13631873
> 
> 赞同：0
> 
> 时间：2012-11-29T18:01:38.027
> 
> 标签：jakarta-ee, jpa, eclipselink

我想将 JPA 实体的元模型属性作为参数传递给会话 bean 的远程接口。如您所知，此对象的类型是`javax.persistence.metamodel.SingularAttribute`. 我之前使用的是 Hibernate 并且没有问题，但是现在使用 EclipseLink，元模型属性不是`Serializable`. 似乎 EclipseLink 使用不可序列化的对象填充属性。为什么？
我正在使用 Glassfish 3.1.2.2，我的项目依赖项如下：

```
 <dependency>
        <groupId>org.eclipse.persistence</groupId>
        <artifactId>eclipselink</artifactId>
        <version>2.3.2</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>org.eclipse.persistence</groupId>
        <artifactId>javax.persistence</artifactId>
        <version>2.0.3</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>org.eclipse.persistence</groupId>
        <artifactId>org.eclipse.persistence.jpa.modelgen.processor</artifactId>
        <version>2.3.2</version>
        <scope>provided</scope>
    </dependency> 
```

异常堆栈跟踪是：

```
WARNING: IOP00100006: Class org.eclipse.persistence.descriptors.FetchGroupManager is not Serializable
org.omg.CORBA.BAD_PARAM: WARNING: IOP00100006: Class org.eclipse.persistence.descriptors.FetchGroupManager is not Serializable  vmcid: SUN  minor code: 6 completed: Maybe
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
    at com.sun.corba.ee.spi.orbutil.logex.corba.CorbaExtension.makeException(CorbaExtension.java:248)
    at com.sun.corba.ee.spi.orbutil.logex.corba.CorbaExtension.makeException(CorbaExtension.java:95)
    at com.sun.corba.ee.spi.orbutil.logex.WrapperGenerator.handleFullLogging(WrapperGenerator.java:387)
    at com.sun.corba.ee.spi.orbutil.logex.WrapperGenerator.access$400(WrapperGenerator.java:107)
    at com.sun.corba.ee.spi.orbutil.logex.WrapperGenerator$2.invoke(WrapperGenerator.java:511)
    at com.sun.corba.ee.spi.orbutil.proxy.CompositeInvocationHandlerImpl.invoke(CompositeInvocationHandlerImpl.java:99)
    at $Proxy158.notSerializable(Unknown Source)
    at com.sun.corba.ee.impl.util.Utility.throwNotSerializableForCorba(Utility.java:968)
    at com.sun.corba.ee.impl.io.IIOPOutputStream.writeObjectField(IIOPOutputStream.java:781)
    at com.sun.corba.ee.impl.io.IIOPOutputStream.outputClassFields(IIOPOutputStream.java:846)
    at com.sun.corba.ee.impl.io.IIOPOutputStream.defaultWriteObjectDelegate(IIOPOutputStream.java:245)
    at com.sun.corba.ee.impl.io.IIOPOutputStream.outputObject(IIOPOutputStream.java:614)
    at com.sun.corba.ee.impl.io.IIOPOutputStream.simpleWriteObject(IIOPOutputStream.java:196)
    at com.sun.corba.ee.impl.io.ValueHandlerImpl.writeValueInternal(ValueHandlerImpl.java:235)
    at com.sun.corba.ee.impl.io.ValueHandlerImpl.writeValueWithVersion(ValueHandlerImpl.java:216)
    at com.sun.corba.ee.impl.io.ValueHandlerImpl.writeValue(ValueHandlerImpl.java:180)
    at com.sun.corba.ee.impl.encoding.CDROutputStream_1_0.callWriteValue(CDROutputStream_1_0.java:852)
    at com.sun.corba.ee.impl.encoding.CDROutputStream_1_0.writeRMIIIOPValueType(CDROutputStream_1_0.java:837)
    at com.sun.corba.ee.impl.encoding.CDROutputStream_1_0.write_value(CDROutputStream_1_0.java:962)
    at com.sun.corba.ee.impl.encoding.CDROutputStream_1_0.write_value(CDROutputStream_1_0.java:976)
    at com.sun.corba.ee.impl.encoding.CDROutputStream_1_0.write_value(CDROutputStream_1_0.java:706)
    at com.sun.corba.ee.impl.encoding.CDROutputObject.write_value(CDROutputObject.java:527)
    at com.sun.corba.ee.impl.io.IIOPOutputStream.writeObjectField(IIOPOutputStream.java:775)
    at com.sun.corba.ee.impl.io.IIOPOutputStream.outputClassFields(IIOPOutputStream.java:846)
    at com.sun.corba.ee.impl.io.IIOPOutputStream.defaultWriteObjectDelegate(IIOPOutputStream.java:245)
    at com.sun.corba.ee.impl.io.IIOPOutputStream.outputObject(IIOPOutputStream.java:614)
    at com.sun.corba.ee.impl.io.IIOPOutputStream.simpleWriteObject(IIOPOutputStream.java:196)
    at com.sun.corba.ee.impl.io.ValueHandlerImpl.writeValueInternal(ValueHandlerImpl.java:235)
    at com.sun.corba.ee.impl.io.ValueHandlerImpl.writeValueWithVersion(ValueHandlerImpl.java:216)
    at com.sun.corba.ee.impl.io.ValueHandlerImpl.writeValue(ValueHandlerImpl.java:180)
    at com.sun.corba.ee.impl.encoding.CDROutputStream_1_0.callWriteValue(CDROutputStream_1_0.java:852)
    at com.sun.corba.ee.impl.encoding.CDROutputStream_1_0.writeRMIIIOPValueType(CDROutputStream_1_0.java:837)
    at com.sun.corba.ee.impl.encoding.CDROutputStream_1_0.write_value(CDROutputStream_1_0.java:962)
    at com.sun.corba.ee.impl.encoding.CDROutputStream_1_0.write_value(CDROutputStream_1_0.java:976)
    at com.sun.corba.ee.impl.encoding.CDROutputStream_1_0.write_value(CDROutputStream_1_0.java:706)
    at com.sun.corba.ee.impl.encoding.CDROutputObject.write_value(CDROutputObject.java:527)
    at com.sun.corba.ee.impl.io.IIOPOutputStream.writeObjectField(IIOPOutputStream.java:775)
    at com.sun.corba.ee.impl.io.IIOPOutputStream.outputClassFields(IIOPOutputStream.java:846)
    at com.sun.corba.ee.impl.io.IIOPOutputStream.defaultWriteObjectDelegate(IIOPOutputStream.java:245)
    at com.sun.corba.ee.impl.io.IIOPOutputStream.outputObject(IIOPOutputStream.java:614)
    at com.sun.corba.ee.impl.io.IIOPOutputStream.simpleWriteObject(IIOPOutputStream.java:196)
    at com.sun.corba.ee.impl.io.ValueHandlerImpl.writeValueInternal(ValueHandlerImpl.java:235)
    at com.sun.corba.ee.impl.io.ValueHandlerImpl.writeValueWithVersion(ValueHandlerImpl.java:216)
    at com.sun.corba.ee.impl.io.ValueHandlerImpl.writeValue(ValueHandlerImpl.java:180)
    at com.sun.corba.ee.impl.encoding.CDROutputStream_1_0.callWriteValue(CDROutputStream_1_0.java:852)
    at com.sun.corba.ee.impl.encoding.CDROutputStream_1_0.writeRMIIIOPValueType(CDROutputStream_1_0.java:837)
    at com.sun.corba.ee.impl.encoding.CDROutputStream_1_0.write_value(CDROutputStream_1_0.java:962)
    at com.sun.corba.ee.impl.encoding.CDROutputStream_1_0.write_value(CDROutputStream_1_0.java:976)
    at com.sun.corba.ee.impl.encoding.CDROutputObject.write_value(CDROutputObject.java:521)
    at com.sun.corba.ee.impl.corba.TCUtility.marshalIn(TCUtility.java:157)
    at com.sun.corba.ee.impl.corba.AnyImpl.write_value(AnyImpl.java:627)
    at com.sun.corba.ee.impl.encoding.CDROutputStream_1_0.write_any(CDROutputStream_1_0.java:627)
    at com.sun.corba.ee.impl.encoding.CDROutputObject.write_any(CDROutputObject.java:489)
    at com.sun.corba.ee.impl.javax.rmi.CORBA.Util.writeAny(Util.java:366)
    at com.sun.corba.ee.impl.io.ValueHandlerImpl.write_Array(ValueHandlerImpl.java:499)
    at com.sun.corba.ee.impl.io.ValueHandlerImpl.writeValueInternal(ValueHandlerImpl.java:233)
    at com.sun.corba.ee.impl.io.ValueHandlerImpl.writeValueWithVersion(ValueHandlerImpl.java:216)
    at com.sun.corba.ee.impl.io.ValueHandlerImpl.writeValue(ValueHandlerImpl.java:180)
    at com.sun.corba.ee.impl.encoding.CDROutputStream_1_0.callWriteValue(CDROutputStream_1_0.java:852)
    at com.sun.corba.ee.impl.encoding.CDROutputStream_1_0.writeArray(CDROutputStream_1_0.java:768)
    at com.sun.corba.ee.impl.encoding.CDROutputStream_1_0.write_value(CDROutputStream_1_0.java:949)
    at com.sun.corba.ee.impl.encoding.CDROutputStream_1_0.write_value(CDROutputStream_1_0.java:976)
    at com.sun.corba.ee.impl.encoding.CDROutputObject.write_value(CDROutputObject.java:521)
    at com.sun.corba.ee.impl.copyobject.ORBStreamObjectCopierImpl.copy(ORBStreamObjectCopierImpl.java:76)
    at com.sun.corba.ee.impl.copyobject.ORBStreamObjectCopierImpl.copy(ORBStreamObjectCopierImpl.java:65)
    at com.sun.corba.ee.impl.orbutil.copyobject.FallbackObjectCopierImpl.copy(FallbackObjectCopierImpl.java:69)
    at com.sun.corba.ee.impl.orbutil.copyobject.FallbackObjectCopierImpl.copy(FallbackObjectCopierImpl.java:59)
    at com.sun.corba.ee.impl.javax.rmi.CORBA.Util.copyObject(Util.java:771)
    at com.sun.corba.ee.impl.javax.rmi.CORBA.Util.copyObjects(Util.java:742)
    at com.sun.corba.ee.impl.presentation.rmi.DynamicMethodMarshallerImpl.copyArguments(DynamicMethodMarshallerImpl.java:439)
    at com.sun.corba.ee.impl.presentation.rmi.StubInvocationHandlerImpl.privateInvoke(StubInvocationHandlerImpl.java:227)
    at com.sun.corba.ee.impl.presentation.rmi.StubInvocationHandlerImpl.invoke(StubInvocationHandlerImpl.java:152)
    at com.sun.corba.ee.impl.presentation.rmi.codegen.CodegenStubBase.invoke(CodegenStubBase.java:227)
    at ejb.test.__TestSBRemote_Remote_DynamicStub.test(ejb/test/__TestSBRemote_Remote_DynamicStub.java)
    at ejb.test._TestSBRemote_Wrapper.test(ejb/test/_TestSBRemote_Wrapper.java)
    at web.test.TestMB.getValue(TestMB.java:34)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at javax.el.BeanELResolver.getValue(BeanELResolver.java:363)
    at com.sun.faces.el.DemuxCompositeELResolver._getValue(DemuxCompositeELResolver.java:176)
    at com.sun.faces.el.DemuxCompositeELResolver.getValue(DemuxCompositeELResolver.java:203)
    at com.sun.el.parser.AstValue.getValue(AstValue.java:138)
    at com.sun.el.parser.AstValue.getValue(AstValue.java:183)
    at com.sun.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:224)
    at org.jboss.weld.el.WeldValueExpression.getValue(WeldValueExpression.java:50)
    at com.sun.faces.facelets.el.TagValueExpression.getValue(TagValueExpression.java:109)
    at javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:194)
    at javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:182)
    at javax.faces.component.UIOutput.getValue(UIOutput.java:169)
    at com.sun.faces.renderkit.html_basic.HtmlBasicInputRenderer.getValue(HtmlBasicInputRenderer.java:205)
    at com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.getCurrentValue(HtmlBasicRenderer.java:355)
    at com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.encodeEnd(HtmlBasicRenderer.java:164)
    at javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:875)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1764)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1760)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1760)
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:402)
    at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:131)
    at javax.faces.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:288)
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722)

SEVERE: Error Rendering View[/test.xhtml]
javax.el.ELException: /test.xhtml @11,49 value="#{testMB.value}": javax.ejb.EJBException: java.rmi.MarshalException: CORBA BAD_PARAM 1398079494 Maybe; nested exception is: 
    java.io.NotSerializableException: WARNING: IOP00100006: Class org.eclipse.persistence.descriptors.FetchGroupManager is not Serializable
    at com.sun.faces.facelets.el.TagValueExpression.getValue(TagValueExpression.java:114)
    at javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:194)
    at javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:182)
    at javax.faces.component.UIOutput.getValue(UIOutput.java:169)
    at com.sun.faces.renderkit.html_basic.HtmlBasicInputRenderer.getValue(HtmlBasicInputRenderer.java:205)
    at com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.getCurrentValue(HtmlBasicRenderer.java:355)
    at com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.encodeEnd(HtmlBasicRenderer.java:164)
    at javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:875)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1764)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1760)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1760)
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:402)
    at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:131)
    at javax.faces.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:288)
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722)
Caused by: javax.ejb.EJBException: java.rmi.MarshalException: CORBA BAD_PARAM 1398079494 Maybe; nested exception is: 
    java.io.NotSerializableException: WARNING: IOP00100006: Class org.eclipse.persistence.descriptors.FetchGroupManager is not Serializable
    at ejb.test._TestSBRemote_Wrapper.test(ejb/test/_TestSBRemote_Wrapper.java)
    at web.test.TestMB.getValue(TestMB.java:34)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at javax.el.BeanELResolver.getValue(BeanELResolver.java:363)
    at com.sun.faces.el.DemuxCompositeELResolver._getValue(DemuxCompositeELResolver.java:176)
    at com.sun.faces.el.DemuxCompositeELResolver.getValue(DemuxCompositeELResolver.java:203)
    at com.sun.el.parser.AstValue.getValue(AstValue.java:138)
    at com.sun.el.parser.AstValue.getValue(AstValue.java:183)
    at com.sun.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:224)
    at org.jboss.weld.el.WeldValueExpression.getValue(WeldValueExpression.java:50)
    at com.sun.faces.facelets.el.TagValueExpression.getValue(TagValueExpression.java:109)
    ... 41 more
Caused by: java.rmi.MarshalException: CORBA BAD_PARAM 1398079494 Maybe; nested exception is: 
    java.io.NotSerializableException: WARNING: IOP00100006: Class org.eclipse.persistence.descriptors.FetchGroupManager is not Serializable
    at com.sun.corba.ee.impl.javax.rmi.CORBA.Util.mapSystemException(Util.java:301)
    at com.sun.corba.ee.impl.javax.rmi.CORBA.Util.wrapException(Util.java:696)
    at com.sun.corba.ee.impl.presentation.rmi.StubInvocationHandlerImpl.privateInvoke(StubInvocationHandlerImpl.java:259)
    at com.sun.corba.ee.impl.presentation.rmi.StubInvocationHandlerImpl.invoke(StubInvocationHandlerImpl.java:152)
    at com.sun.corba.ee.impl.presentation.rmi.codegen.CodegenStubBase.invoke(CodegenStubBase.java:227)
    at ejb.test.__TestSBRemote_Remote_DynamicStub.test(ejb/test/__TestSBRemote_Remote_DynamicStub.java)
    ... 55 more
Caused by: java.io.NotSerializableException: WARNING: IOP00100006: Class org.eclipse.persistence.descriptors.FetchGroupManager is not Serializable
    at com.sun.corba.ee.impl.javax.rmi.CORBA.Util.mapSystemException(Util.java:293)
    ... 60 more
Caused by: org.omg.CORBA.BAD_PARAM: WARNING: IOP00100006: Class org.eclipse.persistence.descriptors.FetchGroupManager is not Serializable  vmcid: SUN  minor code: 6 completed: Maybe
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
    at com.sun.corba.ee.spi.orbutil.logex.corba.CorbaExtension.makeException(CorbaExtension.java:248)
    at com.sun.corba.ee.spi.orbutil.logex.corba.CorbaExtension.makeException(CorbaExtension.java:95)
    at com.sun.corba.ee.spi.orbutil.logex.WrapperGenerator.handleFullLogging(WrapperGenerator.java:387)
    at com.sun.corba.ee.spi.orbutil.logex.WrapperGenerator.access$400(WrapperGenerator.java:107)
    at com.sun.corba.ee.spi.orbutil.logex.WrapperGenerator$2.invoke(WrapperGenerator.java:511)
    at com.sun.corba.ee.spi.orbutil.proxy.CompositeInvocationHandlerImpl.invoke(CompositeInvocationHandlerImpl.java:99)
    at $Proxy158.notSerializable(Unknown Source)
    at com.sun.corba.ee.impl.util.Utility.throwNotSerializableForCorba(Utility.java:968)
    at com.sun.corba.ee.impl.io.IIOPOutputStream.writeObjectField(IIOPOutputStream.java:781)
    at com.sun.corba.ee.impl.io.IIOPOutputStream.outputClassFields(IIOPOutputStream.java:846)
    at com.sun.corba.ee.impl.io.IIOPOutputStream.defaultWriteObjectDelegate(IIOPOutputStream.java:245)
    at com.sun.corba.ee.impl.io.IIOPOutputStream.outputObject(IIOPOutputStream.java:614)
    at com.sun.corba.ee.impl.io.IIOPOutputStream.simpleWriteObject(IIOPOutputStream.java:196)
    at com.sun.corba.ee.impl.io.ValueHandlerImpl.writeValueInternal(ValueHandlerImpl.java:235)
    at com.sun.corba.ee.impl.io.ValueHandlerImpl.writeValueWithVersion(ValueHandlerImpl.java:216)
    at com.sun.corba.ee.impl.io.ValueHandlerImpl.writeValue(ValueHandlerImpl.java:180)
    at com.sun.corba.ee.impl.encoding.CDROutputStream_1_0.callWriteValue(CDROutputStream_1_0.java:852)
    at com.sun.corba.ee.impl.encoding.CDROutputStream_1_0.writeRMIIIOPValueType(CDROutputStream_1_0.java:837)
    at com.sun.corba.ee.impl.encoding.CDROutputStream_1_0.write_value(CDROutputStream_1_0.java:962)
    at com.sun.corba.ee.impl.encoding.CDROutputStream_1_0.write_value(CDROutputStream_1_0.java:976)
    at com.sun.corba.ee.impl.encoding.CDROutputStream_1_0.write_value(CDROutputStream_1_0.java:706)
    at com.sun.corba.ee.impl.encoding.CDROutputObject.write_value(CDROutputObject.java:527)
    at com.sun.corba.ee.impl.io.IIOPOutputStream.writeObjectField(IIOPOutputStream.java:775)
    at com.sun.corba.ee.impl.io.IIOPOutputStream.outputClassFields(IIOPOutputStream.java:846)
    at com.sun.corba.ee.impl.io.IIOPOutputStream.defaultWriteObjectDelegate(IIOPOutputStream.java:245)
    at com.sun.corba.ee.impl.io.IIOPOutputStream.outputObject(IIOPOutputStream.java:614)
    at com.sun.corba.ee.impl.io.IIOPOutputStream.simpleWriteObject(IIOPOutputStream.java:196)
    at com.sun.corba.ee.impl.io.ValueHandlerImpl.writeValueInternal(ValueHandlerImpl.java:235)
    at com.sun.corba.ee.impl.io.ValueHandlerImpl.writeValueWithVersion(ValueHandlerImpl.java:216)
    at com.sun.corba.ee.impl.io.ValueHandlerImpl.writeValue(ValueHandlerImpl.java:180)
    at com.sun.corba.ee.impl.encoding.CDROutputStream_1_0.callWriteValue(CDROutputStream_1_0.java:852)
    at com.sun.corba.ee.impl.encoding.CDROutputStream_1_0.writeRMIIIOPValueType(CDROutputStream_1_0.java:837)
    at com.sun.corba.ee.impl.encoding.CDROutputStream_1_0.write_value(CDROutputStream_1_0.java:962)
    at com.sun.corba.ee.impl.encoding.CDROutputStream_1_0.write_value(CDROutputStream_1_0.java:976)
    at com.sun.corba.ee.impl.encoding.CDROutputStream_1_0.write_value(CDROutputStream_1_0.java:706)
    at com.sun.corba.ee.impl.encoding.CDROutputObject.write_value(CDROutputObject.java:527)
    at com.sun.corba.ee.impl.io.IIOPOutputStream.writeObjectField(IIOPOutputStream.java:775)
    at com.sun.corba.ee.impl.io.IIOPOutputStream.outputClassFields(IIOPOutputStream.java:846)
    at com.sun.corba.ee.impl.io.IIOPOutputStream.defaultWriteObjectDelegate(IIOPOutputStream.java:245)
    at com.sun.corba.ee.impl.io.IIOPOutputStream.outputObject(IIOPOutputStream.java:614)
    at com.sun.corba.ee.impl.io.IIOPOutputStream.simpleWriteObject(IIOPOutputStream.java:196)
    at com.sun.corba.ee.impl.io.ValueHandlerImpl.writeValueInternal(ValueHandlerImpl.java:235)
    at com.sun.corba.ee.impl.io.ValueHandlerImpl.writeValueWithVersion(ValueHandlerImpl.java:216)
    at com.sun.corba.ee.impl.io.ValueHandlerImpl.writeValue(ValueHandlerImpl.java:180)
    at com.sun.corba.ee.impl.encoding.CDROutputStream_1_0.callWriteValue(CDROutputStream_1_0.java:852)
    at com.sun.corba.ee.impl.encoding.CDROutputStream_1_0.writeRMIIIOPValueType(CDROutputStream_1_0.java:837)
    at com.sun.corba.ee.impl.encoding.CDROutputStream_1_0.write_value(CDROutputStream_1_0.java:962)
    at com.sun.corba.ee.impl.encoding.CDROutputStream_1_0.write_value(CDROutputStream_1_0.java:976)
    at com.sun.corba.ee.impl.encoding.CDROutputObject.write_value(CDROutputObject.java:521)
    at com.sun.corba.ee.impl.corba.TCUtility.marshalIn(TCUtility.java:157)
    at com.sun.corba.ee.impl.corba.AnyImpl.write_value(AnyImpl.java:627)
    at com.sun.corba.ee.impl.encoding.CDROutputStream_1_0.write_any(CDROutputStream_1_0.java:627)
    at com.sun.corba.ee.impl.encoding.CDROutputObject.write_any(CDROutputObject.java:489)
    at com.sun.corba.ee.impl.javax.rmi.CORBA.Util.writeAny(Util.java:366)
    at com.sun.corba.ee.impl.io.ValueHandlerImpl.write_Array(ValueHandlerImpl.java:499)
    at com.sun.corba.ee.impl.io.ValueHandlerImpl.writeValueInternal(ValueHandlerImpl.java:233)
    at com.sun.corba.ee.impl.io.ValueHandlerImpl.writeValueWithVersion(ValueHandlerImpl.java:216)
    at com.sun.corba.ee.impl.io.ValueHandlerImpl.writeValue(ValueHandlerImpl.java:180)
    at com.sun.corba.ee.impl.encoding.CDROutputStream_1_0.callWriteValue(CDROutputStream_1_0.java:852)
    at com.sun.corba.ee.impl.encoding.CDROutputStream_1_0.writeArray(CDROutputStream_1_0.java:768)
    at com.sun.corba.ee.impl.encoding.CDROutputStream_1_0.write_value(CDROutputStream_1_0.java:949)
    at com.sun.corba.ee.impl.encoding.CDROutputStream_1_0.write_value(CDROutputStream_1_0.java:976)
    at com.sun.corba.ee.impl.encoding.CDROutputObject.write_value(CDROutputObject.java:521)
    at com.sun.corba.ee.impl.copyobject.ORBStreamObjectCopierImpl.copy(ORBStreamObjectCopierImpl.java:76)
    at com.sun.corba.ee.impl.copyobject.ORBStreamObjectCopierImpl.copy(ORBStreamObjectCopierImpl.java:65)
    at com.sun.corba.ee.impl.orbutil.copyobject.FallbackObjectCopierImpl.copy(FallbackObjectCopierImpl.java:69)
    at com.sun.corba.ee.impl.orbutil.copyobject.FallbackObjectCopierImpl.copy(FallbackObjectCopierImpl.java:59)
    at com.sun.corba.ee.impl.javax.rmi.CORBA.Util.copyObject(Util.java:771)
    at com.sun.corba.ee.impl.javax.rmi.CORBA.Util.copyObjects(Util.java:742)
    at com.sun.corba.ee.impl.presentation.rmi.DynamicMethodMarshallerImpl.copyArguments(DynamicMethodMarshallerImpl.java:439)
    at com.sun.corba.ee.impl.presentation.rmi.StubInvocationHandlerImpl.privateInvoke(StubInvocationHandlerImpl.java:227)
    ... 58 more 
```

# function - 调用具有计算参数的函数

> ID：13631878
> 
> 赞同：0
> 
> 时间：2012-11-29T18:01:49.060
> 
> 标签：function, powershell

我是PowerShell的新手。我正在调用我创建的一个函数，它将我的两个参数分成了几个。如何使计算的参数在传递之前实际计算？

```
dir -Recurse -Path $source | foreach {MoveFile $_.FullName ($destination + "\" + $_.Extension.Substring(1, ($_.Extension.Length - 1))) } 
```

就是这部分：

```
($destination + "\" + $_.Extension.Substring(1, ($_.Extension.Length - 1)) 
```

那有问题。它分离它而不是计算它。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T18:13:46.543

通过将参数表达式放在括号中，您可以正确地做到这一点。当我在我的机器上使用该片段和 Copy-Item 时，它工作得很好。您可能需要展示您的 MoveFile 函数的外观。在您的情况下，可能是 $_.Extension 正在评估为 $null。您似乎没有过滤具有扩展名的文件。

顺便说一句，使用内置的 Move-Item 您可以将其简化为：

```
dir $source -r *.* | Move-Item -Dest {"$destination\$($_.Extension.Substring(1))"} 
```

有一个重载`String.Substring`只需要开始索引，并为您提供从该点到结束的其余字符串。因此，您不必指定字符串其余部分的长度。

# php - preg_match 以单词或空格之间的单词开头、结尾

> ID：13631881
> 
> 赞同：0
> 
> 时间：2012-11-29T18:02:10.367
> 
> 标签：php, preg-match

我试图为 php preg_match 函数构建一个正则表达式，但这种逻辑我真的很糟糕。

我有一个单词列表，即：

“这是我的测试是的”“测试是件好事”“这是一本好书”

目标是了解列表中是否存在特定单词。例如，我想检索单词“yeah”，“test”或“book”，但前提是它们是完整的单词，而不是像“my-test”这样的组合词来查找测试......

正则表达式必须测试搜索的单词是否在空格之间、字符串的开头或结尾。但我没有找到正确的方法。

我从这个开始：

```
"/^.+ (yeah|test|book|) .+/" 
```

但我不知道如何进行测试，例如：如果这个词是在第一个或最后的地方，或者如果这个词是在空格之间......我想这样的事情：

```
"/(^.+ |^)(yeah|test|book)( .+|)" 
```

任何帮助，将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T18:10:26.940

这是您可以使用的模式：

```
$pattern = "/\b(yeah|test|book)/"; 
```

`\b`用于[单词](http://www.regular-expressions.info/wordboundaries.html)边界。

例子：

```
$a = "this is my-test yeah";
$b = "test is a good thing";
$c = "this is a good book";

preg_match($mine,$a,$m1);
preg_match($mine,$b,$m2);
preg_match($mine,$c,$m3);

var_dump($m1,$m2,$m3); 
```

这将打印：

```
array(2) {
  [0]=>
  string(4) "test"
  [1]=>
  string(4) "test"
}
array(2) {
  [0]=>
  string(4) "test"
  [1]=>
  string(4) "test"
}
array(2) {
  [0]=>
  string(4) "book"
  [1]=>
  string(4) "book"
} 
```

# 更新

由于单词边界被认为`my-test`是 2 个单词，所以我建议：

1.  首先进行字符串替换以删除破折号
2.  运行正则表达式模式。

    $a = str_replace("-","",$a); preg_match($mine,$a,$m1);

现在这是你得到的输出：

```
array(2) {
  [0]=>
  string(4) "yeah"
  [1]=>
  string(4) "yeah"
} 
```

# google-maps - 如何在 MapquestApi 中请求带有航点（多个位置）的方向？

> ID：13631883
> 
> 赞同：1
> 
> 时间：2012-11-29T18:02:18.747
> 
> 标签：google-maps, map, mapquest

我使用的是谷歌地图，为了做类似的事情，我只需要添加参数 WayPoints：

[http://maps.googleapis.com/maps/api/directions/xml?origin=18.4543467001058,-69.9294914999045&destination=18.4804850999499,-69.932457299903&sensor=false&alternatives=true&](http://maps.googleapis.com/maps/api/directions/xml?origin=18.4543467001058,-69.9294914999045&destination=18.4804850999499,-69.932457299903&sensor=false&alternatives=true&)**航点= 18.4543467001058，-69.9294914999045 | 18.4543467001058，-69.9294914999045 | 18.4779706000118， - 69.9026079000905|18.4794135999982,-69.8832237999886|**

但是现在我想使用 MapQuest，但我不知道该怎么做。

我尝试将它们添加到 Location 参数中，但没有奏效：

[http://open.mapquestapi.com/directions/v0/route?callback=renderAdvancedNarrative&outFormat=xml&routeType=shortest&timeType=1&narrativeType=html&enhancedNarrative=false&shapeFormat=raw&generalize=200&locale=en_US&unit=k&from=18.4574500999879,-69.9374951999635&to=18.4739507000195,-69.9658190000337&drivingStyle= 2 highwayEfficiency = 21.0＆](http://open.mapquestapi.com/directions/v0/route?callback=renderAdvancedNarrative&outFormat=xml&routeType=shortest&timeType=1&narrativeType=html&enhancedNarrative=false&shapeFormat=raw&generalize=200&locale=en_US&unit=k&from=18.4574500999879,-69.9374951999635&to=18.4739507000195,-69.9658190000337&drivingStyle=2&highwayEfficiency=21.0&)**位置= 18.4574500999879，-69.9374951999635 | 18.4574500999879，-69.9374951999635 | 18.4574500999879，-69.9374951999635 | 18.4641813000198，-69.937076299917 | 18.4801647000131，-69.9080942999572 | 18.4934515000205，-69.9272894002497 |**

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T15:25:47.453

使用[MapQuest Open Directions API](http://open.mapquestapi.com/directions/)时，您需要沿这样的路线指定多个停靠点，无需管道 - 并使用“&to=...”在 &from= 和最终目的地之间添加多个停靠点：

[http://open.mapquestapi.com/directions/v1/route?key=YOUR-KEY-HERE&outFormat=xml&routeType=shortest&enhancedNarrative=false&locale=en_US&unit=m&drivingStyle=2&highwayEfficiency=21.0&from=39.750560,-104.999388&to=39.745940,-104.985805&to =39.734952,-104.989947](http://open.mapquestapi.com/directions/v1/route?key=YOUR-KEY-HERE&outFormat=xml&routeType=shortest&enhancedNarrative=false&locale=en_US&unit=m&drivingStyle=2&highwayEfficiency=21.0&from=39.750560,-104.999388&to=39.745940,-104.985805&to=39.734952,-104.989947)

API 还接受 JSON 和 XML 输入以及键/值对。

不要忘记注册一个免费的应用程序密钥！

# google-app-engine - NDB 在重复的 Expando StructuredProperty 中查询 GenericProperty

> ID：13631884
> 
> 赞同：2
> 
> 时间：2012-11-29T18:02:23.567
> 
> 标签：google-app-engine, python-2.7, app-engine-ndb

嘿伙计们，我想弄清楚如何为以下情况构建我的查询

首先我定义了一个模型

```
class Variant(ndb.Expando):
    test = ndb.StringProperty()

class Item(ndb.Model):
    test2 = ndb.StringProperty()
    variants = ndb.StructuredProperty(Variant, repeated=True)

variant = Variant(test="test", dynamic="a")
item = Item(test2="test", variants=[variant, ])
item.put() 
```

然后是查询的东西..到目前为止我已经尝试过

```
dynamic = "dynamic"
Item.query(ndb.GenericProperty("variants.%s" % dynamic) == "a")
Item.query(Item._properties["variants.%s" % dynamic] == "a")
Item.query(getattr(Item.variants, dynamic) == "a")
Item.query(getattr(Item, "variants.%s" % dynamic) == "a")
Item.query(ndb.query.FilterNode("variants.%s" % dynamic, "=", "a"))

generic_prop = ndb.GenericProperty()
generic_prop._name = "variants.%s" % dynamic
Item.query(generic_prop == "a") 
```

这些都不起作用。这应该是完全可能的，因为数据存储中的属性名称是

```
variants.dynamic = ["a", ] 
```

感谢您的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T17:59:48.580

使用 GQL 很容易：

```
Item.gql("WHERE variants.dynamic = 'a'").fetch() 
```

这也有效：

```
s = StringProperty()
s._name = 'variants.dynamic')
Item.query(s == 'a').fetch() 
```

请提交功能请求；然而，这将是一个平衡的行为。您想使用什么语法？

**更新：**

同样的事情也适用于 GenericProperty() 或任何其他 Property 子类。

GenericProperty('variants.dynamic') 被禁止的原因是为了防止人们做这样的黑客攻击：

```
class MyHack(ndb.Model):
  foo = StringProperty('bar.baz') 
```

这会混淆序列化和反序列化代码。

也许我们可以向 Property 添加一个标志来跳过此检查，但随后不允许在模型定义中使用该属性（它只允许在查询中使用它）。

或者也许我们可以完成这项工作（但我认为这很难）：

```
Item.query(Item.variants.dynamic == 'a').fetch() 
```

（仅当变体是 Expando 时）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T07:37:22.020

你可以用一点魔法来做到这一点。

**简短的回答**：

```
variants_dynamic_property = ndb.GenericProperty()
variants_dynamic_property._name = 'variants.dynamic'
q = Item.query(variants_dynamic_property == 'a') 
```

**长答案**：

由于您要查询 a `GenericProperty`，因此您需要创建一个作为[文档](https://developers.google.com/appengine/docs/python/ndb/queries#properties_by_string)状态，例如：

```
FlexEmployee.query(ndb.GenericProperty('location') == 'SF') 
```

同样，在查询 a 时`StucturedProperty`，[文档](https://developers.google.com/appengine/docs/python/ndb/queries#filtering_structured_properties)声明您可以使用该属性的属性，例如：

```
Contact.query(Contact.address.city == 'Amsterdam') 
```

所以结合这些，你需要

```
Item.query(ndb.GenericProperty('variants.dynamic') == 'a') 
```

但尝试通过构造属性`ndb.GenericProperty('variants.dynamic')`会导致以下异常：

```
 File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/ext/ndb/utils.py", line 136, in positional_wrapper
    return wrapped(*args, **kwds)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/ext/ndb/model.py", line 2366, in __init__
    super(GenericProperty, self).__init__(name=name, **kwds)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/ext/ndb/utils.py", line 136, in positional_wrapper
    return wrapped(*args, **kwds)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/ext/ndb/model.py", line 765, in __init__
    raise ValueError('Name %r cannot contain period characters' % (name,))
ValueError: Name 'variants.dynamic' cannot contain period characters 
```

但是您可以通过使用没有属性名称的构造函数然后在事后设置名称来解决这个问题：

```
variants_dynamic_property = ndb.GenericProperty()
variants_dynamic_property._name = 'variants.dynamic' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T13:32:42.070

**黑客解决方案**：

一个临时解决方案：`ComputedProperty`在我们的例子中使用 a 来查询：

（将以下内容添加到模型定义中）

```
computed_prop = ndb.ComputedProperty(lambda self: self.repeating_prop[0].sub_prop if self.repeating_prop else None) 
```

# java - 提高 Eclipse swt 性能

> ID：13631888
> 
> 赞同：2
> 
> 时间：2012-11-29T18:02:42.287
> 
> 标签：java, eclipse, performance, swt

有什么方法可以加快创建 SWT Composites 的速度，即它所花费的时间：

```
new MyComposite(parent, SWT.NONE) 
```

去完成？

我有几个组合显示在我的 RCP 应用程序中的编辑器中。在调整数据库查询的内容后，我发现创建组合本身现在是主要瓶颈。例如，我们最重要的合成需要 350 毫秒才能创建（在 Windows 7 上）。它完全不包含任何逻辑，所有代码都是由 SWT 设计器生成的。（编辑：所以这段时间完全花在创建 UI 组件上；这个问题与数据访问无关）

您认为这是合理的时间还是很长的时间？

我最重要的合成有四个部分，四个表格查看器，每个最多有 6 列，其中两个隐藏在 CTabFolder 中，6 个文本区域/字段，5 个按钮，两个 ComboViewer 和两个工具栏，总共 12 个工具项。我使用的唯一布局是gridlayout。

我使用 FormToolKit 来创建我的组件。当我不使用它并且不使用图像时，对 Composite 构造函数的调用仍然需要 300ms 以上。

编辑：今天打开的应用程序较少，在 200 毫秒内创建复合运行

使用 gridlayout 或 filllayout 在 Shell 中创建 700 个文本控件需要 640 毫秒我的复合材料中所有控件的确切计数（使用 Composite.getChildren() 递归计数）：

```
Composite -> 9
Text -> 6
Button -> 5
Label -> 5
Table -> 4
Section -> 4
Combo -> 2
ToolBar -> 2 (containing 13 toolitems)
TabFolder -> 1 
```

编辑 2：我运行了 JVisualVM 分析器，发现调用 Section.setExpanded(true) 是我通过简单地将扩展属性设置为 true 来添加的 SWT 设计器需要很多时间。这些调用是不必要的，因为它们已经被扩展了！这将时间减少了 25% 到 150 毫秒。接下来最重要的事情是创建表格查看器，这需要 15% 的时间，然后设置列宽需要另外 8% 的时间。几乎所有这些时间都花在了对 Windows 的本机调用上。在此之后，大部分时间都花在创建部分、合成、组合查看器等......所以我想我无法做太多进一步提高性能的事情。

# c++ - 将 decltype 和 std::function 与 lambda 一起使用

> ID：13631890
> 
> 赞同：10
> 
> 时间：2012-11-29T18:02:45.420
> 
> 标签：c++, function, c++11, lambda, decltype

这有效...

```
auto x = 4;
typedef decltype(x) x_t;
x_t y = 5; 
```

……那为什么不呢？

```
int j = 4;  
auto func = [&] (int i) { cout << "Hello: i=" << i << "  j=" << j << endl;};
typedef decltype(func) lambda_t;
lambda_t func2 = [&] (int i) { cout << "Bye: i=" << i << "  j=" << j << endl;}; 
```

...以及如何`lambda_t`使用 std::function 手动声明？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-29T18:07:40.033

> ......那么为什么这不[工作]？

因为 lambda 的每个词法实例都有不同的类型。是否使用相同的字符并不重要。

> ..我将如何使用 std::function 手动声明 lambda_t？

lambda 接受一个 int 参数并且不返回任何内容......因此：

```
typedef std::function<void(int)> lambda_t; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-29T18:10:12.873

Lambda 类型是无法*说出*的（无法命名），这就是您无法按照您的要求做的原因。除此之外，每个 lambda 都是不同的类型，因此即使您可以命名类型，也无法将第二个 lambda 分配给第一个。如果您将 lambda 语法视为更清晰的函数对象的快捷方式：`operator()`每个 lambda 的成员都不同，因此它们属于不同的类型。

另一方面，您可以将 lambda 分配给`std::function<>`适当签名的对象，在您的情况下是`std::function<void(int)>`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-25T00:01:07.253

这里有一些确凿的证据证明这是行不通的。类似的场景：

```
int foo = 3;
int bar = 3;

std::cout << (typeid(foo).hash_code() == typeid(bar).hash_code()); // prints one -- obviously - they are the same type 
```

现在，让我们使用完全相同的代码，但使用 lambdas。你认为会有什么反应。

```
 auto foo = [](){std::cout << "HELLO\n"; };

  auto bar = [](){std::cout << "HELLO\n"; };

  std::cout << (typeid(foo).hash_code() == typeid(bar).hash_code()); // prints 0 -- different type even though they are declared exactly the same. 
```

# css - 下拉菜单没有 JS - 过渡持续时间不起作用

> ID：13631897
> 
> 赞同：1
> 
> 时间：2012-11-29T18:03:27.090
> 
> 标签：css, drop-down-menu, menu

我们有这个问题

在这里你可以看到我的菜单的基本结构

[http://jsfiddle.net/L8FLe/2/](http://jsfiddle.net/L8FLe/2/)

当您使用鼠标指针快速跟随箭头（从标题到底部交叉菜单）时，您会立即看到子菜单。

我正在尝试使用属性 transition-duration ma 延迟此操作（0.7 秒）不起作用。实际上，我会延迟子菜单的外观，当鼠标指针从按钮gender1转到gender2时，当您快速移动鼠标越过菜单时，您看不到子菜单。

谢谢大家，我的英语很糟糕，对不起！

* * *

我的html

```
<p style="margin-left:50px">FOLLOW THE ARROW <BR /><BR /> &darr;</p>

<ul class='dd_menu'>
<li><a href='#nogo'>Gender 1</a>
    <div id="pluto">
    <a href='#nogo1'>Male</a><br />
    <a href='#nogo2'>Female</a>
    </div>
</li>
<li><a href='#nogo'>Gender 2</a>
    <div id="pluto">
    <a href='#nogo1'>Male</a><br />
    <a href='#nogo2'>Female</a>
    </div>
</li>

</ul>
---- 
```

* * *

我的 CSS

```
.dd_menu { padding:0px; margin:0; list-style-type:none; height:30px; width:500px; margin:55px 0 0 55px; border:#CCC 1px dashed}
.dd_menu li {float:left; height:30px; border-right: solid 1px white; width:95px; }
.dd_menu li a {display:block;  height:28px;  padding:3px 5px 3px 5px;}

.dd_menu li:hover {position:relative; background-color:#DDD;  }

#pluto  {border:#CCC 1px solid; width:100px; display:none;}

.dd_menu li:hover #pluto { display:inline; width:95px; display:block;  -webkit-transition-duration: 1s;
    transition-duration: 0.7s;
    -moz-transition-duration: 0.7s;
    -o-transition-duration: 0.7s;
    -ms-transition-duration: 0.7s; } 
```

* * *

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T18:32:41.620

这是一篇关于 css3 下拉菜单、过渡效果、过渡时间等的精彩文章还有一个关于正确使用过渡进行延迟的部分。检查它会很棒： [http](http://www.identifydesign.net/tutorials/css/pure-css-animated-dropdown-menu/) ://www.identifydesign.net/tutorials/css/pure-css-animated-dropdown-menu/ 您需要的信息在**添加时序**标题下。

您也可以查看：关于过渡延迟的 W3school 文章：http: [//www.w3schools.com/cssref/css3_pr_transition-duration.asp](http://www.w3schools.com/cssref/css3_pr_transition-duration.asp)

**编辑：**

这可能是因为错误的顺序应该是这样的：

```
 transition-duration: 0.7s;
   -moz-transition-duration: 0.7s; /* Firefox 4 */
   -webkit-transition-duration: 0.7s; /* Safari and Chrome */
   -o-transition-duration: 0.7s; /* Opera * 
```

# elasticsearch - Elasticsearch 在 django-haystack 中获取 API？

> ID：13631904
> 
> 赞同：0
> 
> 时间：2012-11-29T18:04:09.390
> 
> 标签：elasticsearch, django-haystack

我想要一种优雅的方式从 haystack 中的弹性搜索索引中获取文档。Haystack 似乎只提供查询，但没有实现 Get API，我发现了许多可以派上用场的示例。

我将 SearchQuerySet 与内部 _id 字段一起使用（经过反复试验后找到）。

```
from haystack.query import SearchQuerySet

    doc_id = myapp.my_model.id

    model_instance = SearchQuerySet().filter(_id__exact=doc_id)[0].object 
```

我认为这将始终保持一致，但我想知道是否有更优雅的方式。

任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T22:54:56.660

如果您只是想获取一个已经拥有 id 的对象，我建议您使用数据库，而不是使用来自干草堆的任何内容来**搜索**内容。

```
model_instance = SearchQuerySet().filter(_id__exact=doc_id)[0].object
                                                              ^^^^^^^ 
```

此外，通过调用*object*，您已经在执行与 Model.objects.get(pk=doc_id) 相同的操作。

# sqlite - sqlite 3 次尝试添加列

> ID：13631907
> 
> 赞同：2
> 
> 时间：2012-11-29T18:04:13.460
> 
> 标签：sqlite

我有一个 sqlite 3 数据库并尝试了几个 PHP 接口。一个表有超过 1500 行，并且似乎没有一个接口可以处理向这种大小的表添加一列。我尝试使用新列创建一个新表，然后将记录从一个复制到另一个。同样的问题。

例如，当我执行添加列命令时，使用 phpliteadmin 我从服务器得到一个空响应（Chrome 中未收到数据，Firefox 中已重置连接）。

只是想把我的头发撕掉 - 有什么建议可以通过界面或代码添加列吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T12:46:36.890

[SQLite 所理解的 SQL](http://www.sqlite.org/lang.html)是您的朋友。

添加列的 SQL 语句很简单

```
ALTER TABLE mytable ADD COLUMN foobar CHAR; 
```

我假设接口超时，因为发出的命令失败。1500 行不算什么，除非它们包含大量数据。我建议您下载数据库文件（假设它在网络服务器上），然后`sqlite3`从终端启动并尝试执行代码。

# python - 烧瓶会话不在heroku上持续存在

> ID：13631908
> 
> 赞同：4
> 
> 时间：2012-11-29T18:04:13.880
> 
> 标签：python, heroku, flask

当用户登录到我的示例应用程序时，我将用户名键添加到会话对象中，并将用户对象挂在全局“g”对象之外。见下文。

```
@app.route('/login/', methods=['GET', 'POST'])
def login():
    """Logs the user in."""

    error = None
    if request.method == 'POST':
        print("login hit")
        user = get_user(request.form['username'])
        if user is None:
            error = 'Invalid username'
            print error
        elif not check_password_hash(user.password, request.form['password']):
            error = 'Invalid password'
            print error
        else:
            flash('You were logged in')
            print "logged in"
            session['username'] = request.form['username']
            g.user = request.form['username']
            print error, "error"
            return redirect(url_for('main')) 
```

现在，如果用户成功登录（正在发生的事情），他将重定向到主页。这将拆除旧的请求并产生一个新的请求。问题是当一个新请求开始时会话被擦除。我正在打印会话密钥，它们都是空的。这只发生在heroku上，而不是我的本地机器上。我究竟做错了什么。

```
 @app.before_request
    def before_request():
        print session.keys(), session.values()  # shows [] []
        print("before request")
        print ('username' in session, "in session?")
        g.db = connect_db()
        g.user = None
        if "username" in session:
            g.user = get_user(session['username']) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T23:46:03.910

好吧，由于有多名工作人员，这确实是答案，我将把它从评论部分移开。:) 您不希望 redis 在 gunicorn 层，而是在您的应用程序中。这四个链接应该可以帮助您：

1)[首先，在 Heroku 中启用/安装 Redis](https://devcenter.heroku.com/articles/redistogo#install-redis-in-python)

2）[然后检查一下](http://flask.pocoo.org/snippets/75/)（将用基于 redis 的驱动程序替换 Flasks 整个会话驱动程序）：这可能有点矫枉过正，我只是在应用程序中使用 redis 作为密钥存储值（检查我的第三个链接）但你可能喜欢这种方法。

3)[不相关，但显示了一些使用示例（带有 redis 的烧瓶队列系统）](http://flask.pocoo.org/snippets/73/)

4）[python基础redis教程](http://degizmo.com/2010/03/22/getting-started-redis-and-python/)

这三个链接应该可以帮助您入门，如果还不够，我会挖掘更多示例，因此请询问您是否需要它们！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-01T02:15:31.100

尝试在你的 app.py 中包含这个

```
from flask import session
from flask_session import Session 
app.secret_key = 'A0AKR5TGD\ R~XHH!jmN]LWX/,?RT'
app.config["SESSION_PERMANENT"] = True
app.config["SESSION_TYPE"] = "filesystem"
Session(app) 
```

不提供有关目录的任何信息

# database - hadoop pig返回前5行

> ID：13631909
> 
> 赞同：4
> 
> 时间：2012-11-29T18:04:13.813
> 
> 标签：database, hadoop, apache-pig

我想返回一个组的前 5 行。基本上我有一个表格，上面有一些州名和他们的城市，按州名分组。我想拥有该州排名前 5 的城市，而不是所有城市。

我怎么能用猪来做到这一点？先感谢您。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-29T19:10:07.743

在 a 之后`GROUP BY`，在 a `FOREACH`... 中你可以先做一个`ORDER BY`，然后`LIMIT`。这将首先按城市大小对每个组中的事物进行排序，然后拉出前 5 名。

```
B = GROUP A BY state;
C = FOREACH B {                          
   DA = ORDER A BY citysize DESC;                
   DB = LIMIT DA 5;                         
   GENERATE FLATTEN(group), FLATTEN(DB.citysize), FLATTEN(DB.cityname);
} 
```

# java - Java 中的泛型类参数

> ID：13631913
> 
> 赞同：7
> 
> 时间：2012-11-29T18:04:21.910
> 
> 标签：java, android

所以我在我的 Android 应用程序中到处传递活动和意图来处理线程（我确信有一个更好的范例，因为我的代码开始变得烦人的意大利面条式 - 通常是我的标志没有做正确的事）。

但无论如何，我正在尝试做这样的事情：

```
public class SomeCoolActivity extends Activity {
    private class DoSomeTaskThatInvolvesEitherTheNetworkOrASleepStatementWithoutScrewingUpTheUiThread extends AsyncTask<Void, Void, Void> {
        @Override
        protected Void doInBackground(Void... params) {
            // Do something useful on a non-UI thread...
            return null;
        }

        @Override
        protected void onPostExecute(Void result) {
            // Now that's done, I need to progress to the next activity. If I do that here,
            // I will get errors. So instead, I will call a method on my parent activity class:
            loadNextActivity(NextActivity.class);
        }
    }

    protected void loadNextActivity(Class<Activity> activityToLoad) {
        startActivity(new Intent(this, activityToLoad));
    }
} 
```

但这不起作用，因为它告诉我有一个错误，即

```
NextActivity.class 
```

不是活动。是的，显然它不是完全相同的类，但是人们希望我能够传入任何派生自 Activity 的类（包括 NextActivity），但不能传入任何不能传入的类（如果我定义 loadNextActivity 它实际上可以正常工作作为

```
protected void loadNextActivity(Class<?> activityToLoad) 
```

但这不太理想，因为那时我可以传递任何我想要的东西，也许不是 Activity 的东西……毕竟这是 Java，而不是 Ruby）。而且，如果它只允许我通过一门课……这​​到底有什么好处？

那么我该如何进行这项工作呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T18:07:33.597

你可以这样写通配符：

```
protected void loadNextActivity(Class<? extends Activity> activityToLoad) 
```

使用它不是一个好习惯`Class<?>`。您不会知道类令牌的确切类型。嗯，尝试使用通配符为您的方法定义全局行为，就像我上面写的那样。

顺便说一句，请确保您添加到`Manifest.xml`文件中的每个活动，例如：

```
<activity android:name=".com.bla.bla.YourOtherActivity" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T18:37:37.820

您的代码注释说“如果我在这里这样做，我会得到错误。”。你得到什么错误？是不是你有一个无效的上下文作为 getIntent() 的参数？或者 startActivity() 无效？可能的原因是 onPostExecute() 是从内部类调用的，而不是 Activity 本身。

试试这个：

```
 onPostExecute(Void result) {
    Intent intent = new Intent(SomeCoolActivity.this, NextActivity.class);
    startActivity(intent);
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T18:44:48.320

附带说明：您不想传递活动，*也*不想将它们保存在变量中。如果你这样做，你会泄漏整个视图层次结构，并且会很快用完 ram。

# perl - 在 Emacs 中执行 Perl，最基本的

> ID：13631915
> 
> 赞同：4
> 
> 时间：2012-11-29T18:04:25.447
> 
> 标签：perl, emacs, execute

我正在学习如何在 Emacs 中使用 Perl。我曾经用 R-Studio 运行 R。

如何在不离开 Emacs 的情况下执行命令？

**示例：**在 R-studio 中输入

```
 print("hello world") 
```

然后按`Ctrl`+`Enter`和 R-studio 执行命令并打印`"hello world"`. 如何在 Emacs 中为 Perl 命令执行相同的操作？

我通常输入`Ctrl`++ `X` `Ctrl`test.pl`F`

```
 print "hello world"; 
```

然后我不知道 Emacs 执行命令该怎么做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T18:51:54.407

对于各种解释语言，我使用[isend-mode](https://github.com/ffevotte/isend-mode.el)，它允许将缓冲区的一部分发送到另一个缓冲区中的终端。

以下是您将如何使用它（安装后）：

1.  打开`ansi-term`缓冲区：

    `M-x``ansi-term``RET``/bin/bash``RET`

    并在里面运行一个交互式 perl 会话：

    `perl -d -e 42``RET`

    或者，安装[term-run.el](https://github.com/10sr/term-run-el)`term`并直接在缓冲区中启动交互式 perl 会话：

    `M-x``term-run-shell-command``RET``perl -d -e 42``RET`

2.  使用要执行的代码打开缓冲区，并将其关联到解释器缓冲区：

    `M-x``isend``RET``*ansi-term*``RET`

3.  点击`C-RET`perl 缓冲区以将当前行发送到`ansi-term`缓冲区中的解释器。如果某个区域处于活动状态，则将发送跨越该区域的所有行。

* * *

下面是一个建议的设置，可以更好地利用 perl 调试器特定的命令。使用以下自定义，除命令`x`之外的所有指令（以便您查看结果）之前。`print`

```
(defun isend--perl (buf-name)
  "Prepend 'x ' to normal perl instructions.
Leave 'print' instructions untouched."
  (with-current-buffer buf-name
    (goto-char (point-min))
    (unless (looking-at "[[:space:]]*print")
      (insert "x ")))
  (insert-buffer-substring buf-name))

(defun isend-default-perl-setup ()
  (when (eq major-mode 'perl-mode)
    (set (make-local-variable 'isend-send-line-function) #'isend--perl)))

(add-hook 'isend-mode-hook #'isend-default-perl-setup) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T18:08:08.817

这就是我使用的：

`Meta``-x shell`

`perl test.pl`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-29T18:23:47.080

如果您可以加载 CPerl 模式（如果您加载扩展名为 .pl 的文件，Emacs 应该默认这样做），您还应该在菜单栏中获得 Perl 菜单（假设您在 GUI 中运行，而不是在简单的终端中运行） .

从 Perl 菜单中，只需选择“运行”！当前缓冲区（Perl 脚本）将运行（首先会提示您输入任何参数），结果将显示在新缓冲区中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-30T17:41:18.723

如果我在 Emacs 中运行 Perl，通常是处理文本区域或将命令的结果插入缓冲区。

`M-!`（即 Meta-Shift-1）将执行一个 shell 命令，并在迷你缓冲区中显示结果。

使用前缀参数 (M-1) 为命令添加前缀将在该点插入命令的输出。

例如，将 (x)HTML 文件存根到空缓冲区中： `M-1 M-!` `perl -MCGI=:standard -e 'print start_html("Hello World"),end_html'`

将产生以下内容：

```
<!DOCTYPE html
    PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US">
<head>
<title>Hello World</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
</head>
<body> 
```

# c# - MemoryStream 类命名空间

> ID：13631918
> 
> 赞同：-4
> 
> 时间：2012-11-29T18:04:30.360
> 
> 标签：c#

我正在尝试使用 memorystream 类将我的字节数组转换为图像。但是我缺少这个类所属的指令或命名空间，我需要在我的项目中包含什么 dll 或 .net 程序集才能使用它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T18:06:11.440

在代码文件的顶部：

```
using System.IO; 
```

如果您使用的是 Visual Studio，实际上有一种简单的方法可以检查这一点。

如果单击`MemoryStream`，您可能会在其左侧看到一个蓝色的小矩形。

*   将鼠标悬停在该矩形上，可能会出现一个按钮。
*   如果单击该按钮，您将获得有关如何解决错误的提示
*   这些提示之一应该是**"Using System.IO"**。单击它，它应该会自动添加它。

这也适用于其他类库。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-29T18:08:12.210

试试这个： -

```
using System.IO; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T18:06:54.900

`System.IO`IIRC

只是为了让它30个字符

# php - 在服务器端打开目录并打开其中的文件

> ID：13631919
> 
> 赞同：0
> 
> 时间：2012-11-29T18:04:39.430
> 
> 标签：php

我的服务器中有一个目录，里面有一个完整的 PDF 文件，我想打开该文件并能够单击 PDF 的名称并查看其内容。现在我只得到列表中文件的名称，仅此而已。我想按名称并打开 PDF。

```
<?php 
$sub = ($_GET['dir']); 
$path = 'pedidos/'; 
$path = $path . "$sub"; 
$dh = opendir($path); 
$i=1; 
while (($file = readdir($dh)) !==   false) {
  if($file != "." && $file != "..") {
      if (substr($file, -4, -3) =="."){
          echo "$i. $file <br />";
      }else{                  
          echo "$i. <a href='?dir=$sub/$file'>$file</a><br />";
      }
      $i++;
   } } 
closedir($dh); ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-09T05:33:50.157

我修改了您的代码并为我工作：

```
<?php
$sub = ($_GET['dir']);
$path = 'machotes/';
$path = $path . "$sub";
$dh = opendir($path);
$i=1;
while (($file = readdir($dh)) !==   false) {
    if($file != "." && $file != "..") {
        if (substr($file, -4, -3) =="."){
            echo "$i. <a href='$path/$file'>$file</a><br />";
        }
        $i++;
    }
}
closedir($dh);
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T18:19:17.807

您在 a href 中的 URL 似乎是错误的尝试：

```
echo "$i. <a href='$path/$file'>$file</a><br />"; 
```

只需确保 $path 是正确的相对路径

这将链接到实际的 pdf 文件，允许用户 pdf 阅读器访问它，它不会使用 php 解析和显示 pdf

# asp.net - 如何从 CKEditor 服务器端 (.NET) 获取 .getData()？

> ID：13631924
> 
> 赞同：2
> 
> 时间：2012-11-29T18:04:51.447
> 
> 标签：asp.net, ckeditor, xss

在 APS.NET 中，CKeditor *.Text*服务器端属性不返回与*.getData()*客户端方法相同的方法。

示例：如果我 `<script>`在 WYSIWYG 编辑器上编写，服务器端*.Text*属性返回`<p><script></p>`，客户端*.getData()*返回`<p>&lt;script&gt;</p>`

我找不到任何返回*.getData*功能的服务器端属性。我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T11:07:02.687

要获得与客户端相同的值，请使用`String value = Server.HtmlEncode(ckeditor.text)`.

但这也会编码`<p>`和`</p>`标记。
如果您不想要它，请全部替换`<p>`并`</p>`用一些字符对其进行编码并用`<p>`和`</p>`标签替换字符。

# objective-c - Is a check for isKindOfClass:[NSNumber class] sufficient for plist safety?

> ID：13631925
> 
> 赞同：0
> 
> 时间：2012-11-29T18:04:56.593
> 
> 标签：objective-c, plist

I'm trying to check that a value can be safely added to a plist. I've read [Apple's documentation on plists](http://developer.apple.com/library/ios/#documentation/General/Conceptual/DevPedia-CocoaCore/PropertyList.html).

I'm storing values in an `NSMutableDictionary` and then serializing them using `NSPropertyListSerialization`. If I want to check that a value added to my dictionary will be serializable, can I use `[value isKindOfClass:[NSNumber class]]` or do I need to check against the core foundation types backing it?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T18:07:10.453

That's safe enough. But did you know that you can write plists by simply doing:

```
[dict writeToFile:path atomically:YES]; 
```

As long as you only have plist compatible objects in the dictionary of course.

# rss - 如何使用 Yii 阅读 RSS 提要

> ID：13631931
> 
> 赞同：-1
> 
> 时间：2012-11-29T18:05:16.790
> 
> 标签：rss, yii, feed

我想使用框架在我的网站中阅读其他网站的提要，我`yii`该怎么做？如果`yii`不好，你怎么看？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T18:51:31.377

Yii 是一个框架——只是你手中的工具。你想做什么，就可以做什么。据我所知，没有解析 RSS 的扩展。你可以在 Yii 项目中使用[lib或单独使用。](http://rssphp.net/)

# javascript - Adobe Edge 幻灯片后退按钮

> ID：13631934
> 
> 赞同：0
> 
> 时间：2012-11-29T18:05:30.177
> 
> 标签：javascript, adobe-edge

我使用 Edge Animate 创建了一个幻灯片，它有一组选定的图片（图片数量暂时不会增加），它们会在 5 秒后自动更改。幻灯片还包括两个按钮：下一步和返回。下一个按钮工作正常，它具有以下代码：

```
sym.play(); 
```

就那么简单。我以为 sym.playReverse(); 可以解决我的后退按钮问题，但没有。它只是回到上一张照片并在那里停留不到一秒钟，然后再次前进。我想将此后退按钮延迟到正常的延迟时间，即 5 秒。所以当有人点击返回时，他会回到上一张图片并在那里停留 5 秒。

仅供参考，这是我的代码，它会在 5 秒后自动“滑动”图片：

```
sym.stop();
setTimeout(function(){sym.play();},5500); 
```

每张图片（带标签的）都有这个代码。

那么如何让我的后退按钮正常工作呢？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T03:20:18.447

您应该使用`sym.play()`，但指定一个参数。该参数应该以毫秒为单位，您似乎已经理解了。

所以你可能有类似的东西：

```
sym.play(3000)
sym.stop();
setTimeout(function(){sym.play();},5500); 
```

这将使您的动画回到上一张幻灯片，假设它在您的时间轴上为 3 秒，那么您的自动滑动将再次启动。

如果您有更多问题，请发表评论。希望这可以帮助。

# php - 什么样的脚本被用来检测网站访问者的国家并重定向到特定的本地化？

> ID：13631938
> 
> 赞同：1
> 
> 时间：2012-11-29T18:05:38.650
> 
> 标签：php, html, redirect, localization

我的网站是俄语和英语的。我想知道您可以推荐哪种 php 脚本或其他（可能是插件），以便将用户从俄罗斯（或其他俄语国家）重定向到网站的俄语版本。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T18:23:39.277

你需要这样的东西：

[http://php.net/manual/en/book.geoip.php](http://php.net/manual/en/book.geoip.php)

然后简单

`if(geoip_country_name_by_name ($ip) <>'Rusia') {header("Location:". $english) else {header ("Location:". $russian}`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T18:20:11.933

有两种方法可以做到这一点，使用 HTTP 标头或使用 IP 查找数据库。

使用 HTTP 标头，您可以检查类似...

```
<?php
     switch ($_SERVER['HTTP_ACCEPT_LANGUAGE']){
         case "ru":
             // Serve Russian Page
             break;
         default:
             // Serve English Page
             break;
     }
?> 
```

~~或者您可以通过执行类似的操作来使用 IP 查找数据库...~~

```
<?php
    $return = file_get_contents("http://api.hostip.info/get_html.php?ip=" . $_SERVER['REMOTE_HOST']);
    $returndata = explode("\n", $return);
    if( $returndata[0] == "Country: RUSSIAN FEDERATION (RU)" ){
        // Serve Russian Page
    }else{
        // Serve English Page
    }
?> 
```

使用 HTTP 标头应该更好，因为这是设计的，当用户位于代理服务器后面时它也应该工作（尽管取决于类型）。但是，这取决于您使用哪种方法。

**编辑：最好使用第一种方法**

# javascript - 从 Windows 运行时组件调用可移植代码库中的异步方法

> ID：13631939
> 
> 赞同：2
> 
> 时间：2012-11-29T18:05:42.703
> 
> 标签：javascript, windows-runtime, portable-class-library, winrt-async

# 背景

我正在构建一个可在 Windows 8（作为商店应用程序）和 Windows 7（作为 WPF 桌面应用程序）上使用的应用程序。这些应用程序将允许浏览一堆（大约 500 多个应用程序“页面”）的内容。

虽然我不能在他们之间共享很多代码，但我确实希望尽可能多地共享。因此，我创建了一个针对 .NET 4.5、Silverlight 4+ 和 Windows 8 的便携式代码库 (PCL)。由于 Win 8 应用程序是用 JavaScript 编写的（出于各种原因，不是这个问题的一部分），我也有一个 Windows运行时组件，充当 JavaScript 和 PCL 之间的代理。换句话说，来自 JavaScript 的异步调用首先调用 WinRT 组件上的方法，然后调用 PCL 中的相应方法。

# 问题

为了支持 PCL 中的异步操作，我通过 NuGet 安装了 Microsoft.Bcl 和 Microsoft.Bcl.Async 包。这些，除其他外，定义了异步方法所需的 Task 和 Task<> 类，但它们在自己的程序集中这样做。WinRT 组件不需要这些库，因为已经为它定义了 Task 和 Task<>。问题是当我在 WinRT 组件中添加代码以调用返回 Task<> 对象的 PCL 中的 Async 方法时，我收到以下构建错误：

> WINMDEXP：错误 WME1007：无法解析引用“程序集（名称=System.Threading.Tasks，版本=1.5.11.0，文化=中性，PublicKeyToken=b03f5f7f11d50a3a）”。

# 我试过的

我已经尝试了很多东西，但可能出现的主要两个是：

1.  修改 WinRT 组件的 app.Config 以为程序集添加 bindingRedirect。
2.  通过从内部执行的异步调用中取回 Task 对象并在其上调用 Wait()，使 PCL 调用在外部非异步。等待永远不会返回抛出一个神秘的异常。

那么，关于如何实现这一点的任何想法？

谢谢，
戴夫帕克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-30T16:00:46.700

这是 WinMDExp 的一个已知问题，已在 Visual Studio 2013 中修复。

我们在此页面上提供了一种解决方法（参见第 7 期）：http: [//blogs.msdn.com/b/bclteam/p/asynctargetingpackkb.aspx](http://blogs.msdn.com/b/bclteam/p/asynctargetingpackkb.aspx)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-30T19:02:52.557

Windows 运行时组件是面向 Windows 运行时子集的特殊类型的项目，可用于以 JavaScript、C# 和 C++ 编写的 Windows 应用商店应用。并且它们还要求其中包含特定类型的类和属性，例如要密封的所有公共类，没有公共字段，没有返回任务的公共方法，只有 IAsyncAction 或 IAsyncOperation ...
您可以在其中引用您的可移植类库，但有一些限制。

**已编辑**：要解决您的问题，您不能在 Windows 运行时组件中返回任何非 WinRT 类型 - 您不能从可移植库返回任何类型，您必须创建包装器类型。
您也不能返回 Task 和 Task 类型，因为它们不是 WinRT 类型，但您可以创建包装方法并返回正确的等待类型，如下所示：

```
public IAsyncAction DoActionAsync()
{
    return DoAsync().AsAsyncAction();
}

internal async Task DoAsync()
{
}

public IAsyncOperation<int> DoIntOperationAsync()
{
    return DoIntAsync().AsAsyncOperation();
}

internal async Task<int> DoIntAsync()
{
    return 42;
} 
```

# automapper - 使用 ValueInjector 或 Automapper 时，如何防止“目标”对象中的值被“源”对象的空值覆盖？嵌套映射问题？

> ID：13631942
> 
> 赞同：2
> 
> 时间：2012-11-29T18:05:55.693
> 
> 标签：automapper, valueinjecter, automapper-2

**我的问题**

“源”对象视图中不存在的同一类的属性用空值覆盖“目标”对象中的相同属性。我该如何防止这种情况？影响我如何确保仅填充（非空）属性合并到“目标”对象中。我也用 Automapper 尝试过，但失败了，但我很乐意使用 Automapper 解决方案作为替代方案。

我很欣赏这个“空映射”问题以前出现过，但我担心我的情况会更复杂，因为有嵌套对象。好吧，我尝试了建议的选项，但无法使它们起作用。所以我在这里。

**非常感谢任何帮助。**

我很欣赏这是一个复杂的问题，并且真的非常感谢任何帮助，特别是如果有人可以为我制作代码示例。这几天我把头发拉出来了:(

**我尝试过的**

我有 2 个对象，一个是原始对象（“目标”），一个（“源”）由一个表单（即视图）填充。

原始的“目标”对象（myOrigDoc）如下所示：

![在此处输入图像描述](../Images/9c1eef00f317d63fe34cdea54966769a.png)

表单“源”对象（myDoc）如下所示：

![在此处输入图像描述](../Images/e329fe3413078cc7fef39b41654bc4cf.png)

然后我做映射：

```
 myOrigDoc.Introduction.InjectFrom<StrNotNull>(myDoc.Introduction); 
```

使用以下注射器：

```
 public class StrNotNull: ConventionInjection
{
    bool blnNotNull = false;
    bool blnMatch = false;
    protected override bool Match(ConventionInfo c)
    {
        blnNotNull = false;
        blnMatch = false;

        //if ((c.SourceProp.Type == typeof(string)) && (c.SourceProp.Value != null))
        //    blnAssignable = true;

        if (c.SourceProp.Value != null)
            blnNotNull = true;

        if ((c.SourceProp.Name == c.TargetProp.Name) && (blnNotNull)) 
            blnMatch = true;

        return blnMatch;
    }
} 
```

我最终得到：

![在此处输入图像描述](../Images/cf9f889fcc781df8659e8a3f86f368e6.png)

表单上没有“DateOfBirth”字段，因此我怀疑模型绑定正在为新的“MyDoc”对象上的“DataOfBirth”属性创建空值，当我调用时：

```
 public ActionResult Index(Document myDoc) 
```

非常感谢，埃德。

**EDIT1：**我相信这是由于子类的嵌套映射问题。不确定我如何在 ValueInjector 中对其进行排序。

**EDIT2：**嵌套映射文档中可能的 Automapper 解决方案，但我无法让它工作。我仍然让我的空值进入目标。：

```
Mapper.CreateMap<XSD_Smart2.Document, XSD_Smart2.Document> 
().ForAllMembers(opt => opt.Condition(srs => !srs.IsSourceValueNull));

Mapper.CreateMap<XSD_Smart2.DocumentIntroduction, XSD_Smart2.DocumentIntroduction>  
().ForAllMembers(opt => opt.Condition(srs => !srs.IsSourceValueNull));

Mapper.CreateMap<XSD_Smart2.Client, XSD_Smart2.Client>().ForAllMembers(opt => 
opt.Condition(srs => !srs.IsSourceValueNull)); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T23:06:03.563

**ValueInjecter 3 的更新**

```
public class IgnoreNulls : LoopInjection
{
    protected override void SetValue(object source, object target, PropertyInfo sp, PropertyInfo tp)
    {
        var val = sp.GetValue(source);
        if (val != null)
        {
            tp.SetValue(target, val);
        }
    }
} 
```

* * *

**以前的版本**

创建一个将具有此行为的自定义注入：

```
 public class IgnoreNulls : ConventionInjection
    {
        protected override bool Match(ConventionInfo c)
        {
            return c.SourceProp.Name == c.TargetProp.Name
                  && c.SourceProp.Value != null;
        }
    } 
```

并使用它：

```
 target.InjectFrom<IgnoreNulls>(source); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T02:02:48.873

这个简单`AutoMapper`的测试对我有用：

**课程**

```
public class Client
{
    public string FirstName { get; set; }
    public string LastName { get; set; }
} 
```

**自动映射器配置**

```
public class MyProfile : Profile
{
    protected override void Configure()
    {
        CreateMap<Client, Client>()
            .ForAllMembers(opt => opt.Condition(src => !src.IsSourceValueNull));
    }
} 
```

**单元测试**

```
[TestFixture]
public class MappingTests
{
    [Test]
    public void AutoMapper_Configuration_IsValid()
    {
        Mapper.Initialize(m => m.AddProfile<MyProfile>());
        Mapper.AssertConfigurationIsValid();
    }

    [Test]
    public void AutoMapper_ClientMapping_IsValid()
    {
        Mapper.Initialize(m => m.AddProfile<MyProfile>());
        Mapper.AssertConfigurationIsValid();

        var source = new Client
            {
                FirstName = "SourceFirstName1",
                LastName = null
            };

        var destination = new Client
            {
                FirstName = "DestinationFirstName1",
                LastName = "DestinationLastName1"
            };

        destination = Mapper.Map(source, destination);

        Assert.That(destination, Is.Not.Null);
        Assert.That(destination.FirstName, Is.EqualTo("SourceFirstName1"));
        Assert.That(destination.LastName, Is.EqualTo("DestinationLastName1"));
    }
} 
```

**更新**

有趣的是，当您使用此映射来映射列表时，它会失败。IE - 此测试失败：

```
[Test]
public void AutoMapper_ClientListMapping_IsValid()
{
    Mapper.Initialize(m => m.AddProfile<MyProfile>());
    Mapper.AssertConfigurationIsValid();

    var source = new List<Client>
        {
            new Client
                {
                    FirstName = "SourceFirstName1",
                    LastName = null
                },
            new Client
                {
                    FirstName = null,
                    LastName = "SourceLastName2"
                }
        };

    var destination = new List<Client>
        {
            new Client
                {
                    FirstName = "DestinationFirstName1",
                    LastName = "DestinationLastName1"
                },
            new Client
                {
                    FirstName = "DestinationFirstName2",
                    LastName = "DestinationLastName2"
                }
        };

    destination = Mapper.Map(source, destination);

    Assert.That(destination, Is.Not.Null);
    Assert.That(destination.Count, Is.EqualTo(2));
    Assert.That(destination[0].FirstName, Is.EqualTo("SourceFirstName1"));
    Assert.That(destination[0].LastName, Is.EqualTo("DestinationLastName1"));
    //  /\  Line above went BANG!  /\
    Assert.That(destination[1].FirstName, Is.EqualTo("DestinationFirstName2"));
    Assert.That(destination[1].LastName, Is.EqualTo("SourceLastName2"));
} 
```

这看起来像是 AutoMapper 中的一个错误（在 2.2.0 和 2.2.1-ci9000 中）

# spring - 使用 Spring MVC POST 到外部 URL

> ID：13631946
> 
> 赞同：1
> 
> 时间：2012-11-29T18:06:14.217
> 
> 标签：spring, spring-mvc

我知道有一个 Spring 重定向功能，但有谁知道您是否可以 POST 到外部 URL，然后加载该页面？

我想在 Spring 中重新创建此功能：

[http://jsfiddle.net/bk64U/2/](http://jsfiddle.net/bk64U/2/)：在我的浏览器中使用这个表单，我将我的数据发布到一个外部 URL，我的浏览器将我导航到那个 URL。我想在 Spring 中执行此操作，而不使用任何 HTML/Javascript/AJAX/等。有谁知道这是否可能？

进一步说明：POST 必须实际将用户重定向到表单操作中指定的页面。显示一个空白页面，或者仅仅获得 http 响应是不够的。

```
<html>
<head> <title> Something Token Request</title> </head>
<body>
<h2> Something Token Request</h2>
<form action=https://some.external.com/site/whatever.php method="POST">
<table align=center border=1>
<tr>
<td> custid </td>
<td> <input type=text name=custid value="someuserid"> </td>
<td> This is your Something custid (required) </td>
</tr>
<tr>
<td> password </td>
<td> <input type=password name=password value="somepassword"> </td>
<td> This is your Something password (required) </td>
</tr>
</table>
<input type="submit" value="Submit">
</form>
</body>
</html> 
```

# visual-studio - 在 MSVC 上按位转换从 __m128 到 __m128i

> ID：13631951
> 
> 赞同：10
> 
> 时间：2012-11-29T18:06:25.493
> 
> 标签：visual-studio, sse

在 Linux 和 Mac 上，可以做到

```
__m128 x;
__m128i n = (__m128i)x; 
```

此操作将 x 的位表示复制到 n，并且对于实现在 SSE 浮点寄存器上操作的各种无分支条件操作很有用。在 MSVC 11 上，它给出了

```
eikonal-generated.h(1228) : error C2440: 'type cast' : cannot convert from '__m128' to '__m128i'; No constructor could take the source type, or constructor overload resolution was ambiguous 
```

Microsoft Visual Studio 中的等价物是什么？

请注意，我不是要求标准的浮点到整数转换函数 _mm_cvtepi32_ps，它进行数值上有意义的转换。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-29T19:01:12.253

使用 MSVC，您需要使用：

[_mm_castsi128_ps](http://msdn.microsoft.com/en-us/library/bb514029%28v=vs.90%29.aspx)用于按位转换从`__m128i`到`__m128`

和

[_mm_castps_si128](http://msdn.microsoft.com/en-us/library/bb514099%28v=vs.90%29.aspx)用于按位转换从`__m128`到`__m128i`

对于其他编译器（gcc、ICC*等*），您可以只使用普通类型转换。

# c# - 当类是变量时创建变量

> ID：13631959
> 
> 赞同：2
> 
> 时间：2012-11-29T18:06:58.880
> 
> 标签：c#, asp.net, .net

我有一个带有子类的父类访问`InpatientVisit`，`ClinicVisit`等等。 **最终我想创建一个访问列表，其中类型可以是父类或任何子类**。到目前为止，我可以这样做：

```
Type visitType = null;
        Visit visit = new Visit();
        switch (typeOfVisit)
        {
            case VisitType.All:
                visit = new Visit();
                break;
            case VisitType.Inpatient:
                visit = new InpatientVisit();
                break;
            case VisitType.Clinic:
                visit = new ClinicVisit();
                break;
            case VisitType.Emergency:
                visit = new EmergencyVisit();
                break;
            case VisitType.DaySurgery:
                visit = new DaySurgeryVisit();
                break;
            default:
                break;
        }

        visitType = visit.GetType(); 
```

这是我卡住的地方。最终我想做这样的事情：

```
for (int rowCounter = 0; rowCounter < data.Rows.Count; rowCounter++)
        {
            Visit thisVisit = new Visit(data, rowCounter);
            this.Add(thisVisit);
        } 
```

**我需要替换 `Visit thisVisit = new Visit(data, rowCounter);**

当前或将存在适当的构造函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T18:19:24.860

创建一个他们都实现的接口：

```
public interface IVisit
{
    // put any common function signatures here 
} 
```

您的列表可以输入为 a `List<IVisit>`，此时存储哪种访问类型并不重要。然后你可以创建一个工厂方法，它的职责是知道返回哪种类型的IVisit

```
public static IVisit GetVisitInstance(VisitType typeToCreate)
{
     switch(typeToCreate)
     {
        case VisitType.All:
           return new Visit();

        case VisitType.Inpatient:
            return new InpatientVisit();

        case VisitType.Clinic:
            return new ClinicVisit();

        case VisitType.Emergency:
            return new EmergencyVisit();

        case VisitType.DaySurgery:
            return new DaySurgeryVisit();

        default:
            return null;
     }
} 
```

这不是最具可扩展性的解决方案，如果您四处搜索，您会发现执行此操作的更好（重新：可扩展）工厂实现。但是鉴于您已经拥有的东西，这应该是一种相当简单的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T18:26:03.170

如果你想创建一个 type 的类`Visit`，并在这个类中插入 classes: 的对象`Visit, InpatientVisit, linicVisit, EmergencyVisit`，那么最好的方法是使用所`@Joel Etherton`指出的接口。
但是您可以创建父类列表，然后将派生类添加到列表中。
假设您具有以下结构：

```
 class Visit
    {
        public string VisitName { get; set; }
    }
    class ImpatientVisit : Visit
    {
        public int ImpatientProperty { get; set; }
    } 
```

然后你可以像这样创建访问列表：

```
 List<Visit> listOfVisits = new List<Visit>();

            var regularVisit = new Visit();
            regularVisit.VisitName = "regular";

            var impatientVisit = new ImpatientVisit();
            impatientVisit.VisitName = "impatient";
            impatientVisit.ImpatientProperty = 3;

            listOfVisits.Add(regularVisit);
            listOfVisits.Add(impatientVisit); 
```

然后你可以像这样遍历列表：

```
 foreach (var visit in listOfVisits)
            {
                Console.WriteLine(visit.VisitName);
            } 
```

这将打印出来

```
regular
patient 
```

但是你不能在`ImpatientVisit`没有强制转换的情况下访问属性。
所以你可以做这样的事情：

```
 foreach (var visit in listOfVisits)
            {
                var impVisit = visit as ImpatientVisit;
                if (impVisit != null)
                {
                    Console.WriteLine(impVisit.ImpatientProperty + " "+ impVisit.VisitName);
                }
                else
                {
                    Console.WriteLine(visit.VisitName);
                }
            } 
```

这将打印出来

```
regular
3 impatient 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T18:57:29.450

使用 Activator 类，您可以创建一个工厂方法来执行此操作：

```
public static T CreateVisit<T>(DataSet ds, int row) where T : IVisit, new()
{
    return (T)Activator.CreateInstance(typeof(T), new object[] { ds, row });
} 
```

注意：所有类都需要实现一个接口，IVisit

然后将从您的代码中调用它，如下所示：

```
InpatientVisit inpatientVisit = CreateVisit<Inpatient>(data, row); 
```

# jquery - 花式盒子和预订日历 - Wordpress 中的 JQuery 冲突

> ID：13631960
> 
> 赞同：1
> 
> 时间：2012-11-29T18:07:00.563
> 
> 标签：jquery, wordpress, fancybox

我更新了我的 WP 网站上的预订日历插件。由于脚本错误，它无法正常工作，我使用以下解决方案修复了它：[http ://wpbookingcalendar.com/faq/loading-jquery-twice/](http://wpbookingcalendar.com/faq/loading-jquery-twice/)

问题是，编辑该行会使 FancyBox 不再工作。我已经更新了 FancyBox 和 JQuery 文件，但仍然有同样的问题：我必须在 Booking Calendar 或 FancyBox 之间进行选择才能工作，编辑或退出对 Jquery 的调用。

这就是页面标题现在的样子。无论如何我可以让这两件事同时工作吗？

谢谢！

```
 <?php if ( is_page('Booking Calendar Name') ) { ?><?php wp_head(); ?><?php } ?>

<link rel="stylesheet" href="<?php bloginfo('stylesheet_url'); ?>" type="text/css" media="screen" />
<!-- <script type="text/javascript" src="<?php bloginfo('template_directory'); ?>/js/jquery-1.8.3.min.js"></script> -->

<script type="text/javascript" src="<?php bloginfo('template_directory'); ?>/js/jquery.flow.1.2.min.js"></script>
<script type="text/javascript" src="<?php bloginfo('template_directory'); ?>/js/jquery.form.js"></script>
<script type="text/javascript" src="<?php bloginfo('template_directory'); ?>/js/jquery.easing.1.3.js"></script>
<script type="text/javascript" src="<?php bloginfo('template_directory'); ?>/js/init_form.js"></script>
<script type="text/javascript" src="<?php bloginfo('template_directory'); ?>/js/init.js"></script>
<script type="text/javascript" src="<?php bloginfo('template_directory'); ?>/js/easySlider1.5.js"></script>
<script type="text/javascript" src="<?php bloginfo('template_url'); ?>/js/dropdowns.js"></script>
<script type="text/javascript" src="<?php bloginfo('template_directory'); ?>/fancybox/jquery.mousewheel-3.0.6.pack.js"></script>
<script type="text/javascript" src="<?php bloginfo('template_directory'); ?>/fancybox/jquery.fancybox.js"></script>
<link rel="stylesheet" type="text/css" href="<?php bloginfo('template_directory'); ?>/fancybox/jquery.fancybox.css" media="screen" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T19:49:10.867

无法查看您网站上的源代码，很难说，但@JFK 指出的内容让我认为您的网站上没有 jQuery，除非您在使用日历插件的页面上。在任何一种情况下，我都会尝试注销脚本并通过你的functions.php加载你想要的脚本，如下所示：

```
wp_deregister_script('jquery');
    if(!is_admin()) { 
    wp_register_script('jquery', 'http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js');
    wp_enqueue_script('jquery');
} 
```

您可以删除标题中的 jQuery，因为它将在此处加载。

# php - 计算 joomla 中标记为“在索引页面上精选”的文章

> ID：13631961
> 
> 赞同：1
> 
> 时间：2012-11-29T18:07:03.120
> 
> 标签：php, joomla2.5

我希望能够预测何时`<jdoc:include type="component" />`不返回任何内容。

像这样的东西：

```
<?php if( count(<jdoc:include type="component" />)>=1 ) : ?> 
 <jdoc:include type="component" />
<?php else :?>
 Sorry No Content
<?php endif ; ?> 
```

到处搜索，但找不到任何与此相关的内容。抱歉，如果这是补救措施。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T22:55:51.347

我有这个用于测试组件加载错误的代码片段......不确定是否适合你

```
<?php if ($this->getBuffer('message')) : ?>  
 <div class="error">  
<h2> Message </h2>
<jdoc:include type="message" />
</div>
<?php endif; ?>
<jdoc:include type="component" /> 
```

祝你好运！

# ios - 从容器中的 UITableView 转到新的 UIViewController

> ID：13631969
> 
> 赞同：3
> 
> 时间：2012-11-29T18:07:20.710
> 
> 标签：ios, xcode, uitableview, uiviewcontroller, segue

我试图从嵌入在容器中的 UITableViewController 转移到另一个 UIViewController。问题是，Storyboard 不断调整新 UIViewController 的大小以适应容器......我对覆盖 PrepareForSegue 和其他人很陌生，我觉得这就是我需要做的...... ![第一次尝试](../Images/16889197004366616d3ced027de54a7a.png)

这是我首先尝试的，对 SecondPracticeViewController 的 segue 来自 UITableViewController 静态单元格上的第一个单元格。请注意，SecondViewController 已调整大小以适合容器。

然后我进行了设置，因此 segue 来自 PracticeTableViewContainer，并将 segue 命名为“SegueFromContainer”

![SegueFromContainer](../Images/3d375f64dbf2555b357ef8eddcec560a.png)

这是我认为我需要做的截图。我需要做什么才能使其正常工作？我不知道究竟要覆盖什么。非常感谢你！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T19:18:36.620

我刚刚尝试了一些东西，发现如果你从 TableViewController 进行推送，SecondPracticeViewController 会显示全尺寸，即使它在 IB 中看起来很小。因此，要解决这个问题，您可以在属性检查器中将该控制器的大小从“推断”更改为“自由形式”——这将允许您将其视图的大小调整为您想要的任何大小，以便您可以布局视觉上的子视图。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-19T17:53:10.017

如果您决定以您在问题中提到的后一种方式执行此操作，则可以在 tableViewController 中覆盖 tableView:didSelectRowAtIndexPath 并调用

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    [self.parentViewController performSegueWithIdentifier:@"Segue" sender:self];
} 
```

# java - 当布局大于屏幕时，Horizo ntalScrollView 和 LinearLayout 居中

> ID：13631978
> 
> 赞同：0
> 
> 时间：2012-11-29T18:07:55.277
> 
> 标签：java, android, android-linearlayout

我正在开发家谱应用程序。现在，树视图可以很大，我允许用户左右导航（例如，如果您有 7 个兄弟姐妹）。但是当我打开树视图时，它总是从左角开始，您可以向右滚动以查看更多内容。我希望树视图始终在布局中间打开。

这是代码：

```
 <?xml version="1.0" encoding="UTF-8"?>
    <HorizontalScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/HorizontalScrollView01"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@color/light_green" >

    <LinearLayout
        android:id="@+id/Top_Level_View_Family_Tree"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:orientation="vertical"  >

        <TextView
            android:id="@+id/TextView_view_family_members_title"
            android:layout_width="fill_parent"
            android:layout_height="0dp"
            android:layout_weight="3"
            android:text="Family Tree"
            android:gravity="center_horizontal"
            android:textSize="@dimen/font_large" />

        <LinearLayout
            android:id="@+id/Family_Tree_parentLL"
            android:layout_width="fill_parent"
            android:layout_height="0dp"
            android:layout_weight="4"
            android:gravity="center_horizontal"
            android:orientation="horizontal"  >
        </LinearLayout>

        <LinearLayout
            android:id="@+id/Family_Tree_yourLL"
            android:layout_width="fill_parent"
            android:layout_height="0dp"
            android:layout_weight="4"
            android:gravity="center_horizontal"
            android:orientation="horizontal" >
        </LinearLayout>
        <LinearLayout
            android:id="@+id/Family_Tree_siblingLL"
            android:layout_width="fill_parent"
            android:layout_height="0dp"
            android:layout_weight="4"
            android:gravity="center_horizontal"
            android:orientation="horizontal" >
        </LinearLayout>

        <LinearLayout
            android:id="@+id/Family_Tree_childLL"
            android:layout_width="fill_parent"
            android:layout_height="0dp"
            android:layout_weight="4"
            android:gravity="center_horizontal"
            android:orientation="horizontal" >
        </LinearLayout>
    </LinearLayout>

</HorizontalScrollView> 
```

这是应用程序：http:
[//img838.imageshack.us/img838/310/appa.png](http://img838.imageshack.us/img838/310/appa.png)

伟大的帮助： [Android 计算水平滚动视图中的滚动位置](https://stackoverflow.com/questions/7002282/android-calculate-scrollto-position-in-horizontalscrollview)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T18:19:29.993

您必须将其放置在代码中，不能在 XML 中进行。使用 的[`scrollTo`](http://developer.android.com/reference/android/widget/HorizontalScrollView.html#scrollTo%28int,%20int%29)方法`HorizontalScrollView`来完成此操作。您必须根据顶级 LinearLayout 的宽度计算需要滚动到自己的位置。

类似于以下内容：

```
HorizontalScrollView hView = findViewById( R.id.HorizontalScrollView01 );
LinearLayout lin = findViewById( R.id.Top_Level_View_Family_Tree );

int width = lin.getWidth();
hView.scrollTo( width / 2, 0 ); 
```

现在，您将需要编辑该`scrollTo`部分，因为我确定它不是滚动到的正确位置，它可能滚动到视图左侧的某个位置，而我所做的假设它去了中央。你必须玩弄计算才能让它做你想做的事。

# c++ - 尽管运算符重载，但 object = -object 无法编译

> ID：13631986
> 
> 赞同：1
> 
> 时间：2012-11-29T18:08:34.307
> 
> 标签：c++, operator-overloading

> **可能重复：**
> [如何在 C++ 中重载一元减号运算符？](https://stackoverflow.com/questions/2155275/how-to-overload-unary-minus-operator-in-c)

我有一个 C 类，它重载了许多运算符：

```
class C
{
  ...
  C& operator-=(const C& other) {...}
  const C operator-(const C& other) {...}
}
inline const C operator*(const double& lhs, const C& rhs) 
```

现在我想反转 C 类型的对象

```
c = -c; 
```

gcc 给了我以下错误：

```
no match for >>operator-<< in >>-d<<
candidate is: const C C::operator-(const C&) 
```

使用 c = -1*c 有效，但我希望能够缩短它。我的课缺少什么？

* * *

已解决：添加一元运算符-：

```
C operator-() const {...} 
```

作为C的一员。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T18:22:23.863

您重载了二元 - 运算符。您还需要重载一元 - 运算符

看

[如何在 C++ 中重载一元减号运算符？](https://stackoverflow.com/questions/2155275/how-to-overload-unary-minus-operator-in-c)

关于如何重载一元运算符

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-29T18:29:16.943

您重载了*二元* `-`、二元`*`和复合赋值`-=`运算符。表达式`c = -c`使用*unary* `-`，您从未重载过。

如果您想`-`通过独立（也许是朋友）函数重载一元，则必须相应地声明它。只需添加`friend`关键字即可在类定义中完成

```
class C
{
  ...
  friend C operator-(const C& other) {...}
}; 
```

或通过将函数声明移到类定义之外

```
class C
{
  ...
};

inline C operator -(const C& other) {...} 
```

或者，如果要将一元声明`-`为成员，则必须在不带参数的情况下声明它

```
class C
{
  ...
  C operator-() const {...}
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T18:25:50.020

进行此更改：

```
const C operator-() {...} 
```

# c# - 在 C# 上使用 try 和 catch 关键字自定义异常

> ID：13631987
> 
> 赞同：0
> 
> 时间：2012-11-29T18:08:42.843
> 
> 标签：c#, try-catch

如果用户等待 5 分钟，当他们点击“有效”按钮时，我的表单会显示以下消息

**服务器无法处理请求。---> 原始错误消息：获取实体失败时出现数据库问题。---> [IBM U2][UODOTNET - UNICLIENT][ErrorCode=45002] 无法对空记录 ID 执行操作**

所以我想使用 try 和 catch 关键字，

但我有一个错误信息，这段代码：

```
try
            {

                SetPageState();
                Session["NewStep"] = "NewStepConfirm";
                Response.Redirect(stepone.aspx");
            }
            catch (Exception ex)
            {
                if (ex.ErrorCode == 45002)
                {
                    ErrorLabel.Text = "We are very sorry but don't wait for long time";
                }
                else
                {
                    ErrorLabel.Text = ex.Message;
                }
                ErrorLabel.Visible = true;
            } 
```

这是一条消息错误

**编译器错误消息：CS1061：“System.Exception”不包含“ErrorCode”的定义，并且找不到接受“System.Exception”类型的第一个参数的扩展方法“ErrorCode”（您是否缺少 using 指令或装配参考？）**

源错误：

```
if (ex.ErrorCode == 45002) 
```

如何使用 try 和 catch 关键字

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T18:15:57.897

删除 ErrorCode 的测试，在 catch 块中设置断点，在调试器中运行您的应用程序并重现故障。

当调试器在断点处停止时，检查异常对象。它是什么类型的？它有哪些领域？此异常对象可能具有您所追求的 ErrorCode。如果是这样，你就完成了。编辑您的 catch 子句以捕获该特定异常类型。

但是，错误消息的结构（“-->”和“原始消息”）向我表明这可能是一个包装异常 - 核心代码抛出的异常 A 被中间代码捕获，中间代码抛出异常 B。希望B 将在 InnerException 属性中保留对原始异常 A 的引用。检查异常对象的 InnerException 属性，以及该对象的 InnerException 属性，依此类推，以找到原始异常，因为它最有可能包含您需要的数据。

您在文本中看到的错误代码可能不是任何异常对象的正式属性，它可能只是嵌入在字符串中的数据。

如果您所追求的数据被埋在 InnerException 中，您将无法捕捉到它。您必须捕获最外层异常的类型（调试器在断点处停止时 ex 变量的类型），然后在 InnerException 链中挖掘以提取您所需要的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T18:15:15.230

您需要捕获抛出的特定类型的异常。

捕获基本异常类被认为是不好的做法（或至少是最后的努力）。如果您捕获特定的异常类型，您将可以访问您正在寻找的属性。

```
try
{
  DoSomethingThatThrowsACustomWidgetException() ;
}
catch (CustomWidgetException e )
{
  int errorCode = e.ErrorCode ;
  ...
} 
```

如果您捕获了基 Exception 类，则需要将其*向下转换*为它的类型：

```
try
{
  DoSomethingThatThrowsACustomWidgetException() ;
}
catch ( Exception e )
{
  CustomWidgetException cwe = e as CustomWidgetException ;

  if ( cwe == null ) throw ;

  int errorCode = cwe.ErrorCode ;
  ...

} 
```

简单的！

# c++ - C++ 编译器错误“不能是线程本地的，因为它具有非 POD 类型””

> ID：13631989
> 
> 赞同：5
> 
> 时间：2012-11-29T18:08:51.823
> 
> 标签：c++, multithreading

这个说法：

```
___thread A a; 
```

生成此错误：

> 不能是线程本地的，因为它具有非 POD 类型

其中 A 是

```
class A{
       public:
               // function declaration
       private:
               // data members
}; 
```

我正在尝试在 Linux 上进行编译，使用命令 ogs includes & ogs mk。我们有静态线程，即在我们的应用程序进入之前，我们知道线程的数量，因此目前的工作是通过声明 A 的数组来完成，即

```
A a[Number of threads]. 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T18:12:30.143

假设您使用`gcc`，仅支持`POD`类型的线程本地存储，即仅数据结构。您可以尝试将数据提取到一个单独的文件中`struct`并使其成为线程本地的（实际上，这在任何情况下都可能是一个好主意，因为将方法设为线程本地没有多大意义）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T18:37:37.667

不幸的是，在 C++03 中没有线程本地资源的动态初始化（和销毁）（无论如何，它对线程一无所知）。

在 C++11 中，`thread_local`storage 关键字允许以运行时开销为代价进行动态初始化（基本上，相当于拥有一个线程局部静态变量），因此可以在没有构造函数的类型的情况下使用。

同样，在 C++11 中，`constexpr`可能会调用构造函数来进行静态初始化，因此应该与说明`__thread`符兼容，前提是您的编译器实现了它。

# asp.net - 禁用缓存和销毁会话 (asp.net)

> ID：13631995
> 
> 赞同：1
> 
> 时间：2012-11-29T18:09:09.193
> 
> 标签：asp.net, vb.net, session, caching

我的仪表板窗口（Dashboard.aspx）上有一个超链接，我必须使用它来注销页面。现在我已经使用“NavigateURL”将它重定向到主登录页面（LoginPage.aspx）。在登录页面上，我不想再次返回仪表板。顺便说一句，我是新手，所以我想我必须禁用浏览器缓存或在登录时创建会话并销毁它等。**我不希望用户应该能够在单击时返回到 dashboard.aspx 页面浏览器的后退按钮。**请向我提供相同的步骤/**代码（vb.net）**。在互联网上查看，但无法理解这些东西。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T18:16:39.773

在导航出仪表板之前。通过 session.abandon 杀死你的会话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T18:19:25.523

如果您在整个应用程序中使用会话来维护您的页面访问，您可以使用`Session.Clear()`和 `Session.Abondon()`之前将您的页面重定向到“LoginPage.aspx”。

我希望这回答了你的问题。如果是，请将其标记为“已回答”。