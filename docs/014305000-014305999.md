# StackOverflow 问答 14305000-14305999

# ruby-on-rails - Rails 错误：nil:NilClass 的未定义方法“”

> ID：14305001
> 
> 赞同：2
> 
> 时间：2013-01-13T15:39:07.697
> 
> 标签：ruby-on-rails, methods, undefined, cart, nomethoderror

所以，由于我对 Rails（和 ruby​​）还很陌生，所以我仍然试图了解*这里哪里*出了问题。我正在网上商店的购物车上工作。用户获得一个存储他的购物车项目（在本例中为 line_item.rb）的会话。

**问题：** 当我单击一个项目时，它会通过购物车方法 add_product 添加到购物车中。如果您再次单击同一个项目，而不是两次添加相同的项目，它应该简单地 ++1 到该项目的数量属性。但是，当我第二次单击它时，我得到错误页面：

**LineItemsController#create 中的 NoMethodError**

```
undefined method `+' for nil:NilClass 
```

这是我的购物车.rb：

```
class Cart < ActiveRecord::Base
  has_many :line_items, dependent: :destroy

  def add_product(product_id)
    current_item = line_items.find_by_product_id(product_id)
    if current_item
      current_item.quantity += 1
      Rails.logger.debug(current_item.quantity)
    else
      current_item = line_items.build(:product_id => product_id)
    end
    current_item
  end
end 
```

line_item 的数量属性是整数类型。应该能够向它添加整数，对吧？这就是我此刻感到困惑的地方。

这是 line_items_controller.rb 中的“create”方法：

```
 def create
@cart = current_cart
product = Product.find(params[:product_id])
@line_item = @cart.add_product(product.id)
@line_item.product = product

respond_to do |format|
  if @line_item.save
    format.html { redirect_to @line_item.cart,
      notice: 'Line item was successfully created.' }
    format.json { render json: @line_item,
      status: :created, location: @line_item }
  else
    format.html { render action: "new" }
    format.json { render json: @line_item.errors,
      status: :unprocessable_entity }
  end
end 
```

结尾

有任何想法吗？

干杯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T16:20:17.170

我认为这是因为 current_item 没有任何数量。可能没有默认值。您期望它为 0，但实际上是`nil`.

我设置了一个默认值，并确保该列不能为零。此外，您可以定义一个`before_create`在保存之前将该值设置为 0 的方法（如果它为 nil）。

解决此问题的另一种方法是确保那里没有 nil ：

```
current_item.quantity = current_item.quantity.blank? ? 1 : current_item.quantity + 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T16:21:51.340

这表示 current_item.quantity 为空。这可以是整数，但在数据库中存储为空。如果是这样，您可以默认设置一个值（在迁移中），或者当您第一次创建时，您可以将数量值设置为 1。

# python - django 错误：异常值：'FieldFile' 对象不可下标

> ID：14305006
> 
> 赞同：4
> 
> 时间：2013-01-13T15:39:40.160
> 
> 标签：python, django

我在 Mac OS X 10.8.2 和 Python 2.7.2 上使用 django 版本 1.5c1

我在`model.py`文件中定义了以下模型：

```
class MyFile(models.Model):
    filename = models.FileField(upload_to = '%Y/%m/%d') 
```

并通过在文件中添加以下行将其注册到自动管理界面`admin.py`：

```
class FileAdmin(admin.ModelAdmin):
    list_display = ('filename',)
    fields = ('filename',)

admin.site.register(MyFile, FileAdmin) 
```

使用管理网络界面向数据库添加新`File`对象时，我总是收到以下错误消息：

```
Environment:

Request Method: POST
Request URL: http://127.0.0.1:8000/admin/mytest/myfile/add/

Django Version: 1.5c1
Python Version: 2.7.2
Installed Applications:
('django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'django.contrib.admin',
 'registry',
 'mytest')
Installed Middleware:
('django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware')

Traceback:
File "/Library/Python/2.7/site-packages/django/core/handlers/base.py" in get_response
  115\.                         response = callback(request, *callback_args,     **callback_kwargs)
File "/Library/Python/2.7/site-packages/django/contrib/admin/options.py" in wrapper
  372\.                 return self.admin_site.admin_view(view)(*args, **kwargs)
File "/Library/Python/2.7/site-packages/django/utils/decorators.py" in _wrapped_view
  91\.                     response = view_func(request, *args, **kwargs)
File "/Library/Python/2.7/site-packages/django/views/decorators/cache.py" in _wrapped_view_func
  89\.         response = view_func(request, *args, **kwargs)
File "/Library/Python/2.7/site-packages/django/contrib/admin/sites.py" in inner
  202\.             return view(request, *args, **kwargs)
File "/Library/Python/2.7/site-packages/django/utils/decorators.py" in _wrapper
  25\.             return bound_func(*args, **kwargs)
File "/Library/Python/2.7/site-packages/django/utils/decorators.py" in _wrapped_view
  91\.                     response = view_func(request, *args, **kwargs)
File "/Library/Python/2.7/site-packages/django/utils/decorators.py" in bound_func
  21\.                 return func(self, *args2, **kwargs2)
File "/Library/Python/2.7/site-packages/django/db/transaction.py" in inner
  208\.                 return func(*args, **kwargs)
File "/Library/Python/2.7/site-packages/django/contrib/admin/options.py" in add_view
  1009\.                 self.log_addition(request, new_object)
File "/Library/Python/2.7/site-packages/django/contrib/admin/options.py" in log_addition
  530\.             action_flag     = ADDITION
File "/Library/Python/2.7/site-packages/django/contrib/admin/models.py" in log_action
  18\.         e = self.model(None, None, user_id, content_type_id,   smart_text(object_id), object_repr[:200], action_flag, change_message)

Exception Type: TypeError at /admin/mytest/myfile/add/
Exception Value: 'FieldFile' object is not subscriptable 
```

该文件保存在正确的位置，但没有任何内容添加到数据库中。有关如何解释此`'FieldFile' object is not subscriptable`错误消息的任何线索？

亲切的问候，汉斯

# php - 如何使用 CodeIgniter 在同一个控制器中加载两个模型？

> ID：14305012
> 
> 赞同：2
> 
> 时间：2013-01-13T15:40:03.980
> 
> 标签：php, codeigniter

我一直在互联网和stackoverflow上搜索，但我没有找到解决方案，或者不是同一个问题。

我需要在同一个控制器和同一个函数中加载两个模型。一个是“model_membre”，另一个是“model_annonce”。它是类、文件和对象的名称。

单独来说，它们工作得很好，我可以访问属性和方法，但是当我加载两个模型时，无论我如何加载它（自动加载、、），我都无法访问第二个`$this->load->model('model_name')`模型`$this->load->model('model_name', 'object_name')`。

我简化为一个“测试”控制器，看看是否不是我的代码的另一部分导致了问题：

```
 public function index()
{
    $this->load->model('model_membre', 'membre');
    $this->load->model('model_annonce', 'annonce');
    $liste = $this->annonce->listerEspeces();
    $membre = $this->membre->obtenirMembre(1);
} 
```

我试图改变顺序，第二次加载永远无法工作。我收到这条消息：

> 遇到 PHP 错误 严重性：通知消息：未定义属性：Test::$annonce 文件名：controllers/test.php 行号：15

> 致命错误：在第 15 行的 /homez.604/animalix/beta/application/controllers/test.php 中的非对象上调用成员函数 listerEspeces()

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T18:03:22.313

请尝试以下方法...

```
 public function index()
{
    $this->load->model(array('membre','annonce'));
    $liste = $this->annonce->listerEspeces();
    $membre = $this->membre->obtenirMembre(1);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T19:50:56.570

模型应该扩展 CI_Model 而不是 CI_Controller！这就是问题的根源。

# ios - NSNumberFormatter 仅在 ipad 设备上不显示卢比符号

> ID：14305016
> 
> 赞同：0
> 
> 时间：2013-01-13T15:40:14.453
> 
> 标签：ios, nsnumberformatter

我正在使用 NSNumberFormatter 和 NSNumberFormatterCurrencyStyle 在我的通用 iOS 应用程序中显示应用程序购买价格。我的位置是印度，格式化程序在我测试的大多数设备（ipad 模拟器、ipad 3 设备、iphone 3gs 设备、iphone 4 设备）中正确显示了印度卢比符号。但是，仅在 ipad 第一代（运行 iOS 5.1.1）上，它显示一个正方形而不是卢比符号。

所有设备都运行它们支持的最新 ios（ipad 3、iphone 4 和 iphone 3gs 上的 iOS 6.0.1；iPad 1 上的 iOS 5.1.1）。

我们用来格式化货币的函数是：

```
@implementation SKProduct (LocalizedPrice)

- (NSString *)localizedPrice
{
    NSNumberFormatter *numberFormatter = [[NSNumberFormatter alloc] init];
    [numberFormatter setFormatterBehavior:NSNumberFormatterBehavior10_4];
    [numberFormatter setNumberStyle:NSNumberFormatterCurrencyStyle];
    [numberFormatter setLocale:self.priceLocale];
    NSString *formattedString = [numberFormatter stringFromNumber:self.price];
    [numberFormatter release];
    return formattedString;
}

@end 
```

Update1：​​这似乎只发生在 iOS 5.1 而不是 iOS 6.0 - 我尝试在 ios 6 和 ios 5.1 上的 ipad 模拟器上运行 - 它适用于 ios 6 模拟器，但不适用于 ios 5.1。有没有办法在 ios 5.1 上显示货币符号？

Update2：目前，我检查操作系统版本并仅在 >= 6.0 中显示符号。这就是其他一些应用程序似乎正在做的事情。

谢谢阿南德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T15:45:11.597

如果这不适用于特定版本的 iOS 或设备，您应该提交雷达。

[苹果错误报告器](https://bugreport.apple.com)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T17:20:06.287

你看到这个了吗？

![在此处输入图像描述](../Images/e760226e88b0f8394b1b281b40a37eb3.png)

那就是“通用货币符号”，当格式化程序没有要使用的特定已知符号时使用它。

`NSNumberFormatter`在我看来，您在 iOS 5.1 上没有卢比符号似乎很奇怪，因为这是一个相当标准的符号。但如果情况确实如此（很抱歉，我没有 iOS 5.1 设备可供检查），您可以在格式化字符串中进行查找和替换，以用卢比替换通用货币符号象征。

# ruby-on-rails - Ruby on Rails - 回形针和动态参数

> ID：14305018
> 
> 赞同：8
> 
> 时间：2013-01-13T15:40:33.547
> 
> 标签：ruby-on-rails, ruby, paperclip

我正在用 Paperclip 为 Ruby on Rails 编写一些图像上传代码，我有一个可行的解决方案，但它非常hacky，所以我非常感谢关于如何更好地实现它的建议。我有一个“资产”类，其中包含有关上传图像的信息，包括回形针附件，以及一个封装尺寸信息的“生成器”类。每个“项目”都有多个资产和生成器；所有资产都应根据每个生成器指定的大小调整大小；因此，每个项目都具有其所有资产都应具有的特定大小。

发电机型号：

```
class Generator < ActiveRecord::Base
  attr_accessible :height, :width

  belongs_to :project

  def sym
    "#{self.width}x#{self.height}".to_sym
  end
end 
```

资产模型：

```
class Asset < ActiveRecord::Base
  attr_accessible :filename,
    :image # etc.
  attr_accessor :generators

  has_attached_file :image,
    :styles => lambda { |a| a.instance.styles }

  belongs_to :project

  # this is utterly horrendous
  def styles
    s = {}
    if @generators == nil
      @generators = self.project.generators
    end

    @generators.each do |g|
      s[g.sym] = "#{g.width}x#{g.height}"
    end
    s
  end
end 
```

资产控制器创建方法：

```
 def create
    @project = Project.find(params[:project_id])
    @asset = Asset.new
    @asset.generators = @project.generators
    @asset.update_attributes(params[:asset])
    @asset.project = @project
    @asset.uploaded_by = current_user

    respond_to do |format|
      if @asset.save_(current_user)
        @project.last_asset = @asset
        @project.save

        format.html { redirect_to project_asset_url(@asset.project, @asset), notice: 'Asset was successfully created.' }
        format.json { render json: @asset, status: :created, location: @asset }
      else
        format.html { render action: "new" }
        format.json { render json: @asset.errors, status: :unprocessable_entity }
      end
    end
  end 
```

我遇到的问题是鸡蛋问题：新创建的资产在正确实例化之前不知道要使用哪些生成器（大小规格）。我尝试使用@project.assets.build，但在资产获得其项目关联集并取消我之前，Paperclip 代码仍然执行。

'if @generators == nil' hack 是这样，更新方法可以在控制器中进行进一步的黑客攻击。

总而言之，感觉很糟糕。任何人都可以建议如何以更明智的方式编写这个，甚至是一种处理这种事情的方法吗？

提前致谢！:)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-26T17:43:46.893

我在一个项目中遇到了相同的回形针鸡/蛋问题，该项目试图使用基于具有多态关系的关联模型的动态样式。我已经根据您现有的代码调整了我的解决方案。解释如下：

```
class Asset < ActiveRecord::Base
  attr_accessible :image, :deferred_image
  attr_writer :deferred_image

  has_attached_file :image,
    :styles => lambda { |a| a.instance.styles }

  belongs_to :project

  after_save :assign_deferred_image

  def styles
    project.generators.each_with_object({}) { |g, hsh| hsh[g.sym] = "#{g.width}x#{g.height}" }
  end

  private
  def assign_deferred_image
    if @deferred_image
      self.image = @deferred_image
      @deferred_image = nil
      save!
    end
  end
end 
```

基本上，为了解决 Paperclip 在传播项目关系信息之前尝试检索动态样式的问题，您可以将所有`image`属性分配给非 Paperclip 属性（在本例中，我将其命名为`deferred_image`）。`after_save`钩子分配`@deferred_image`to的值`self.image`，这将启动所有 Paperclip 爵士乐。

你的控制器变成：

```
# AssetsController
def create
  @project = Project.find(params[:project_id])
  @asset = @project.assets.build(params[:asset])
  @asset.uploaded_by = current_user

  respond_to do |format|
    # all this is unrelated and can stay the same
  end
end 
```

和观点：

```
<%= form_for @asset do |f| %>
  <%# other asset attributes %>
  <%= f.label :deferred_upload %>
  <%= f.file_field :deferred_upload %>
  <%= f.submit %>
<% end %> 
```

该解决方案还允许使用模型`accepts_nested_attributes`中的`assets`关系`Project`（这是我目前使用它的方式 - 上传资产作为创建/编辑项目的一部分）。

这种方法有一些缺点（例如，验证与实例`image`有效性相关的 Paperclip`Asset`变得很棘手），但这是我能想到的最好的方法，没有猴子修补 Paperclip 以某种方式将`style`方法的执行推迟到关联之后信息已被填充。

我会密切关注这个问题，看看是否有人有更好的解决方案！

* * *

至少，如果您选择继续使用相同的解决方案，您可以对您的`Asset#styles`方法进行以下风格改进：

```
def styles
  (@generators || project.generators).each_with_object({}) { |g, hsh| hsh[g.sym] = "#{g.width}x#{g.height}" }
end 
```

与您现有的方法完全相同，但更简洁。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-30T20:43:31.083

虽然我真的很喜欢 Cade 的解决方案，但只是一个建议。看起来“样式”属于一个项目……那你为什么不在那里计算生成器呢？

例如：

```
class Asset < ActiveRecord::Base
  attr_accessible :filename,
  :image # etc.
   attr_accessor :generators

   has_attached_file :image,
     :styles => lambda { |a| a.instance.project.styles }
end

 class Project < ActiveRecord::Base
   ....

   def styles
     @generators ||= self.generators.inject {} do |hash, g|
       hash[g.sym] = "#{g.width}x#{g.height}"
     end
   end
end 
```

编辑：尝试将您的控制器更改为（假设项目有很多资产）：

```
def create
  @project = Project.find(params[:project_id])
  @asset = @project.assets.new
  @asset.generators = @project.generators
  @asset.update_attributes(params[:asset])
  @asset.uploaded_by = current_user
end 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-05T16:23:52.980

我刚刚解决了一个类似的问题。在我的“样式” lambda 中，我根据“类别”属性的值返回不同的样式。但问题是 Image.new(attrs) 和 image.update_attributes(attrs) 没有以可预测的顺序设置属性，因此我不能保证 image.category 在我的样式 lambda 之前会有一个值叫做。我的解决方案是在我的 Image 模型中覆盖 attributes=()，如下所示：

```
class Image
  ...
  has_attached_file :image, :styles => my_lambda, ...
  ...
  def attributes=(new_attributes, guard_protected_attributes = true)
    return unless new_attributes.is_a?(Hash)
    if new_attributes.key?("image")
      only_attached_file    = {
        "image" => new_attributes["image"]
      }
      without_attached_file = new_attributes
      without_attached_file.delete("image") 
      # set the non-paperclip attributes first
      super(without_attached_file, guard_protected_attributes)
      # set the paperclip attribute(s) after
      super(only_attached_file, guard_protected_attributes)
    else
      super(new_attributes, guard_protected_attributes)
    end
  end
  ...
end 
```

这确保了回形针属性设置在其他属性之后，因此可以在 :style lambda 中使用它们。

在“手动”设置回形针属性的情况下，它显然无济于事。但是，在这些情况下，您可以通过指定合理的顺序来帮助自己。就我而言，我可以写：

```
image = Image.new
image.category = "some category"
image.image = File.open("/somefile") # styles lambda can use the "category" attribute
image.save! 
```

（回形针 2.7.4，导轨 3，红宝石 1.8.7）

# java - 如何使用 sqoop api 执行 sqoop 命令？

> ID：14305026
> 
> 赞同：0
> 
> 时间：2013-01-13T15:41:14.250
> 
> 标签：java, sqoop

我知道如何从命令行执行 import、import-all-tables 和其他命令。

是否有用于 sqoop 1.4.2 的 Java API，以便我可以直接从命令行执行这些命令？如果是，如何？

sqoop Java 文档或简单示例的链接将非常有帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T06:52:13.563

我猜您是在要求 Java API，以便您可以通过编程方式而不是从命令行启动 Sqoop。恐怕 Sqoop 1 没有这样的官方 API。

一些用户直接调用 Sqoop.run() [1] 以便从 Java 中启动 Sqoop。然而，这种调用不受支持并且有其局限性，例如 Hive 导入似乎不起作用，并且 Sqoop 代码通常不是线程安全的 [2]。

雅尔切克

链接：

1：[https ://github.com/apache/sqoop/blob/trunk/src/java/org/apache/sqoop/Sqoop.java#L120](https://github.com/apache/sqoop/blob/trunk/src/java/org/apache/sqoop/Sqoop.java#L120)

2：[https ://issues.apache.org/jira/browse/SQOOP-477](https://issues.apache.org/jira/browse/SQOOP-477)

# android - android-support-v4.jar 在构建路径上但得到 noClassDefFoundError

> ID：14305027
> 
> 赞同：0
> 
> 时间：2013-01-13T15:41:16.350
> 
> 标签：android, noclassdeffounderror

我有一个使用 android-support-v4.jar 的应用程序。这个 jar 在 Eclipse 的构建路径上。如果我右键单击包并配置构建路径，它会作为库出现在那里。在源代码中我可以使用它并且 eclipse 知道它是什么，但是如果我运行应用程序我会得到这个运行时错误

```
01-13 15:39:51.838: E/AndroidRuntime(12398): FATAL EXCEPTION: main
01-13 15:39:51.838: E/AndroidRuntime(12398): java.lang.NoClassDefFoundError: android.support.v4.content.LocalBroadcastManager
01-13 15:39:51.838: E/AndroidRuntime(12398):    at com.carefreegroup.NfcscannerActivity.processTagWithGPS(NfcscannerActivity.java:1568)
01-13 15:39:51.838: E/AndroidRuntime(12398):    at com.carefreegroup.NfcscannerActivity.onActivityResult(NfcscannerActivity.java:1742)
01-13 15:39:51.838: E/AndroidRuntime(12398):    at android.app.Activity.dispatchActivityResult(Activity.java:4747)
01-13 15:39:51.838: E/AndroidRuntime(12398):    at android.app.ActivityThread.deliverResults(ActivityThread.java:3394)
01-13 15:39:51.838: E/AndroidRuntime(12398):    at android.app.ActivityThread.handleSendResult(ActivityThread.java:3448)
01-13 15:39:51.838: E/AndroidRuntime(12398):    at android.app.ActivityThread.access$1100(ActivityThread.java:139)
01-13 15:39:51.838: E/AndroidRuntime(12398):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1292)
01-13 15:39:51.838: E/AndroidRuntime(12398):    at android.os.Handler.dispatchMessage(Handler.java:99)
01-13 15:39:51.838: E/AndroidRuntime(12398):    at android.os.Looper.loop(Looper.java:156)
01-13 15:39:51.838: E/AndroidRuntime(12398):    at android.app.ActivityThread.main(ActivityThread.java:4987)
01-13 15:39:51.838: E/AndroidRuntime(12398):    at java.lang.reflect.Method.invokeNative(Native Method)
01-13 15:39:51.838: E/AndroidRuntime(12398):    at java.lang.reflect.Method.invoke(Method.java:511)
01-13 15:39:51.838: E/AndroidRuntime(12398):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
01-13 15:39:51.838: E/AndroidRuntime(12398):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
01-13 15:39:51.838: E/AndroidRuntime(12398):    at dalvik.system.NativeStart.main(Native Method) 
```

有人知道为什么吗？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T15:43:32.217

> 这个 jar 在 Eclipse 的构建路径上。

如果您通过手动修改构建路径来做到这一点，那就是您的困难的根源。将 JAR 放入`libs/`您的项目并撤消您的构建路径更改。中的所有`libs/`内容都会自动添加到您的编译构建路径中*，并*打包到您的 APK 中以分发到设备。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-13T15:54:19.493

将 jar 文件放在 libs/ 文件夹中，以便它也位于项目的工作区中。这就是我一直没有问题的方式。

将 .jar 拖到 libs 文件夹，然后在构建路径属性中指向它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-17T07:19:38.017

这个问题困扰了我将近六个月，没有解决方案对我有帮助，但今天我自己设法找到了正确的解决方案。

当您选择项目目标版本大于或等于 Android 4.0 Android SDK 在您的项目“libs”文件夹中包含“android-support-v4.jar”文件。此 jar 包含所有与 Android 4.0 或更高版本相关的类和方法

您可以看到您的问题，android 正在尝试查找“android-support-v4.jar”中的类定义，这意味着您尚未配置“android-support-v4.jar”文件的构建路径。请按照以下步骤操作：

1.打开您的项目属性
2.从左侧菜单中选择“Java Build Path”
3.选择“库”选项卡
4.按“添加外部 Jar”
5.最重要的步骤：-
选择“android-support-v4”jar 文件您当前项目位置的“libs”文件夹（路径应该仅属于您的项目，而不是 android sdk）。
6.选择“订购和导出”选项卡和“勾选”“android-support-v4.jar”复选框

就是这样，你完成了！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-21T23:30:27.563

1.  将 android-support-v4.jar 放在项目的 libs/ 中
2.  将 wearable-preview-support.jar 放在项目的 libs/ 中

干净的构建，它对我有用。

# android - Gmail like listview 项目删除

> ID：14305033
> 
> 赞同：1
> 
> 时间：2013-01-13T15:42:03.887
> 
> 标签：android, android-listview, android-animation

我正在尝试实现 Gmail 应用程序 (ICS) 在删除邮件时提供的功能。我不想删除单元格下方的所有行都向上移动并覆盖已删除的单元格。

这是工作动画：

```
<set xmlns:android="http://schemas.android.com/apk/res/android"
    android:shareInterpolator="false" >

        <translate android:fromYDelta="0%" android:toYDelta="-100%"
            android:duration="@android:integer/config_mediumAnimTime"/>
        <alpha android:fromAlpha="0.0" android:toAlpha="1.0"
            android:duration="@android:integer/config_mediumAnimTime" />

</set> 
```

到目前为止，我想出的是：

```
public static List<View> getCellsBelow(ListView listView, int position) {
    List<View> cells = new ArrayList<View>();       

    for (int i = position + 1; i <= listView.getLastVisiblePosition(); i++) {
        cells.add(listView.getChildAt(i));
    }

    return cells;
} 
```

我在所选单元格下方收集可见单元格，然后在 foreach 中为它们设置动画。我担心这是性能灾难。我也很难通知适配器它应该重新加载它的内容。通常我会打电话`notifyDataSetChanged`，`onAnimationEnd`但现在有几个动画一个接一个地播放。

有什么建议吗？也许有一些东西可以刺激地为几个视图设置动画？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T18:15:31.380

**更新：：**我建议查看在 Android 团队工作的 Chet Haase 的[这个解决方案。](https://plus.google.com/u/0/104755487586666698979/posts/RRTm14JsPQY)特别是如果您不是为 Android 2.3 及更低版本开发。

* * *

这应该正是您想要的。

```
list.setOnItemLongClickListener(new OnItemLongClickListener() {

    @Override
    public boolean onItemLongClick(AdapterView<?> parent,
            final View view, final int position, long id) {
        removeRow(view, position);
        return true;
    }
});

private void removeRow(final View row, final int position) {
    final int initialHeight = row.getHeight();
    Animation animation = new Animation() {
        @Override
        protected void applyTransformation(float interpolatedTime,
                Transformation t) {
            super.applyTransformation(interpolatedTime, t);
            int newHeight = (int) (initialHeight * (1 - interpolatedTime));
            if (newHeight > 0) {
                row.getLayoutParams().height = newHeight;
                row.requestLayout();
            }
        }
    };
    animation.setAnimationListener(new AnimationListener() {
        @Override
        public void onAnimationStart(Animation animation) {
        }
        @Override
        public void onAnimationRepeat(Animation animation) {
        }
        @Override
        public void onAnimationEnd(Animation animation) {
            row.getLayoutParams().height = initialHeight;
            row.requestLayout();
            items.remove(position);
            ((BaseAdapter) list.getAdapter()).notifyDataSetChanged();
        }
    });
    animation.setDuration(300);
    row.startAnimation(animation);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T17:06:44.907

你可以试试我为此制作的 ListView。它在[Github](https://github.com/yDelouis/SwipeToDeleteListView)上。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T17:24:26.183

本文的原作者在此处将代码作为 Gist 发布：[https](https://gist.github.com/2980593) ://gist.github.com/2980593 ，这是来自 Roman Nurik 的原始 Google+ 帖子：https: [//plus.google.com/113735310430199015092/posts/Fgo1p5uWZLu](https://plus.google.com/113735310430199015092/posts/Fgo1p5uWZLu)

# java - 应用引擎上的泽西岛设置

> ID：14305035
> 
> 赞同：2
> 
> 时间：2013-01-13T15:42:35.043
> 
> 标签：java, google-app-engine, jersey

我最近将球衣添加到我的应用程序引擎项目中，在我的本地计算机上一切正常，但是当我尝试访问已部署站点上的页面时出现错误。我想我可能会包括一个不受支持的课程，但我认为我没有使用任何课程。我的大部分代码都是本指南中设置[jQuery 上传的精确副本](https://github.com/blueimp/jQuery-File-Upload/wiki/Google-App-Engine-Java)

这是我的代码：

```
@GET
@Path("/url")
public Response getCallbackUrl() {
  /* this is /_ah/upload and it redirects to its given path */
  String url = blobstoreService.createUploadUrl("/rest/file");
  return Response.ok(new FileUrl(url), MediaType.APPLICATION_JSON).build();
} 
```

网页.xml：

```
<servlet>
    <servlet-name>jersey</servlet-name>
    <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
    <init-param>
        <param-name>com.sun.jersey.config.property.packages</param-name>
        <param-value>com.thedailycaption</param-value>
    </init-param>
    <init-param>
           <param-name>com.sun.jersey.api.json.POJOMappingFeature</param-name>
         <param-value>true</param-value>
    </init-param>
</servlet>
<servlet-mapping>
    <servlet-name>jersey</servlet-name>
    <url-pattern>/rest/*</url-pattern>
</servlet-mapping> 
```

这是我得到的错误：

```
Uncaught exception from servlet
java.lang.NullPointerException
    at com.sun.jersey.spi.container.ContainerRequest.<init>(ContainerRequest.java:188)
    at com.sun.jersey.spi.container.servlet.WebComponent.createRequest(WebComponent.java:450)
    at com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:380)
    at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:538)
    at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:716)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
    at com.thedailycaption.Controller.FacebookLogin.doFilter(FacebookLogin.java:165)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.utils.servlet.ParseBlobUploadFilter.doFilter(ParseBlobUploadFilter.java:102)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157) 
```

以下是启动时的错误：

```
java.lang.SecurityException: Unable to get members for class com.sun.jersey.atom.rome.impl.provider.entity.AtomFeedProvider
at com.google.appengine.runtime.Request.process-51d788e4ae40f0dc(Request.java)
at java.lang.Class.getDeclaredMethods(Class.java:253)
at com.sun.jersey.core.reflection.MethodList.getAllDeclaredMethods(MethodList.java:70)
at com.sun.jersey.core.reflection.MethodList.<init>(MethodList.java:64)
at com.sun.jersey.core.spi.component.ComponentConstructor.getPostConstructMethods(ComponentConstructor.java:131)
at com.sun.jersey.core.spi.component.ComponentConstructor.<init>(ComponentConstructor.java:123)
at com.sun.jersey.core.spi.component.ProviderFactory.__getComponentProvider(ProviderFactory.java:165)
at com.sun.jersey.core.spi.component.ProviderFactory.getComponentProvider(ProviderFactory.java:137) 
```

和

```
 com.sun.jersey.core.spi.component.ProviderFactory __getComponentProvider: The provider class, class com.sun.jersey.atom.rome.impl.provider.entity.AtomEntryProvider, could not be instantiated. Processing will continue but the class will not be utilized
java.lang.SecurityException: Unable to get members for class com.sun.jersey.atom.rome.impl.provider.entity.AtomEntryProvider
    at com.google.appengine.runtime.Request.process-51d788e4ae40f0dc(Request.java)
    at java.lang.Class.getDeclaredMethods(Class.java:253)
    at com.sun.jersey.core.reflection.MethodList.getAllDeclaredMethods(MethodList.java:70)
    at com.sun.jersey.core.reflection.MethodList.<init>(MethodList.java:64)
    at com.sun.jersey.core.spi.component.ComponentConstructor.getPostConstructMethods(ComponentConstructor.java:131)
    at com.sun.jersey.core.spi.component.ComponentConstructor.<init>(ComponentConstructor.java:123)
    at com.sun.jersey.core.spi.component.ProviderFactory.__getComponentProvider(ProviderFactory.java:165)
    at com.sun.jersey.core.spi.component.ProviderFactory.getComponentProvider(ProviderFactory.java:137)
    at com.sun.jersey.core.spi.component.ProviderServices.getComponent(ProviderServices.java:256)
    at com.sun.jersey.core.spi.component.ProviderServices.getServices(ProviderServices.java:160)
    at com.sun.jersey.core.spi.factory.MessageBodyFactory.initReaders(MessageBodyFactory.java:176) 
```

和

```
 com.sun.jersey.core.spi.component.ProviderFactory __getComponentProvider: The provider class, class com.sun.jersey.atom.rome.impl.provider.entity.AtomFeedProvider, could not be instantiated. Processing will continue but the class will not be utilized
java.lang.SecurityException: Unable to get members for class com.sun.jersey.atom.rome.impl.provider.entity.AtomFeedProvider
    at com.google.appengine.runtime.Request.process-51d788e4ae40f0dc(Request.java)
    at java.lang.Class.getDeclaredMethods(Class.java:253)
    at com.sun.jersey.core.reflection.MethodList.getAllDeclaredMethods(MethodList.java:70)
    at com.sun.jersey.core.reflection.MethodList.<init>(MethodList.java:64)
    at com.sun.jersey.core.spi.component.ComponentConstructor.getPostConstructMethods(ComponentConstructor.java:131)
    at com.sun.jersey.core.spi.component.ComponentConstructor.<init>(ComponentConstructor.java:123)
    at com.sun.jersey.core.spi.component.ProviderFactory.__getComponentProvider(ProviderFactory.java:165)
    at com.sun.jersey.core.spi.component.ProviderFactory.getComponentProvider(ProviderFactory.java:137)
    at com.sun.jersey.core.spi.component.ProviderServices.getComponent(ProviderServices.java:256)
    at com.sun.jersey.core.spi.component.ProviderServices.getServices(ProviderServices.java:160)
    at com.sun.jersey.core.spi.factory.MessageBodyFactory.initWriters(MessageBodyFactory.java:207)
    at com.sun.jersey.core.spi.factory.MessageBodyFactory.init(MessageBodyFactory.java:163)
    at com.sun.jersey.server.impl.application.WebApplicationImpl._initiate(WebApplicationImpl.java:1310)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.access$700(WebApplicationImpl.java:168) 
```

和

```
com.sun.jersey.core.spi.component.ProviderFactory __getComponentProvider: The provider class, class com.sun.jersey.atom.rome.impl.provider.entity.AtomEntryProvider, could not be instantiated. Processing will continue but the class will not be utilized
java.lang.SecurityException: Unable to get members for class com.sun.jersey.atom.rome.impl.provider.entity.AtomEntryProvider
    at com.google.appengine.runtime.Request.process-51d788e4ae40f0dc(Request.java)
    at java.lang.Class.getDeclaredMethods(Class.java:253)
    at com.sun.jersey.core.reflection.MethodList.getAllDeclaredMethods(MethodList.java:70)
    at com.sun.jersey.core.reflection.MethodList.<init>(MethodList.java:64)
    at com.sun.jersey.core.spi.component.ComponentConstructor.getPostConstructMethods(ComponentConstructor.java:131)
    at com.sun.jersey.core.spi.component.ComponentConstructor.<init>(ComponentConstructor.java:123)
    at com.sun.jersey.core.spi.component.ProviderFactory.__getComponentProvider(ProviderFactory.java:165)
    at com.sun.jersey.core.spi.component.ProviderFactory.getComponentProvider(ProviderFactory.java:137)
    at com.sun.jersey.core.spi.component.ProviderServices.getComponent(ProviderServices.java:256) 
```

和

```
Uncaught exception from servlet
java.lang.ExceptionInInitializerError
    at com.sun.xml.bind.v2.runtime.reflect.opt.AccessorInjector.prepare(AccessorInjector.java:83)
    at com.sun.xml.bind.v2.runtime.reflect.opt.OptimizedAccessorFactory.get(OptimizedAccessorFactory.java:176)
    at com.sun.xml.bind.v2.runtime.reflect.Accessor$FieldReflection.optimize(Accessor.java:282)
    at com.sun.xml.bind.v2.runtime.property.ArrayProperty.<init>(ArrayProperty.java:69)
    at com.sun.xml.bind.v2.runtime.property.ArrayERProperty.<init>(ArrayERProperty.java:88)
    at com.sun.xml.bind.v2.runtime.property.ArrayElementProperty.<init>(ArrayElementProperty.java:100)
    at com.sun.xml.bind.v2.runtime.property.ArrayElementNodeProperty.<init>(ArrayElementNodeProperty.java:62)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:33) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T17:14:21.203

您需要添加

```
<init-param>
    <param-name>com.sun.jersey.config.feature.DisableWADL</param-name>
    <param-value>true</param-value>
</init-param> 
```

到 web.xml

这可以防止使用反射的类，这在应用引擎上是不允许的。

# php - 有没有办法减少 php createimagefromjpeg 内存使用？

> ID：14305038
> 
> 赞同：-2
> 
> 时间：2013-01-13T15:42:55.783
> 
> 标签：php, image-uploading, large-files, memory-limit

我正在建立一个网站，我应该能够上传非常大的图像（从 2MB 到 50MB）。当然我需要调整它们的大小，但是[createimagefromjpeg](http://php.net/manual/en/function.imagecreatefromjpeg.php)函数会占用大量内存。某些图像的内存使用量达到 800 兆字节，但我使用的是 hostgator 的共享计划，并且那里的最大内存为 256M。我可以以某种方式减少此功能使用的内存吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T15:57:25.577

根据[Hostgator 论坛](http://forums.hostgator.com/would-like-see-imagemagick-installed-t57.html?s=c85eeaedd5d8cd75dd5ce5a3783dafa7&)ImageMagick 应该安装在您的服务器上。由于纯粹的效率，我建议使用二进制文件来调整图像大小。要做你想做的事，这样的命令就足够了（假设你想要你要求的 2 MB）：

```
$SCALED_VALUE = (2097152/filesize($OLD_IMAGE))*100; #< Get the percentage of scaling that is required to go to 2MB
shell_exec('convert '. $OLD_IMAGE . '-resize ' . $SCALED_VALUE . '% new_image.jpg'); #< Perform scaling 
```

在评论中回答有关 php_memory_limit 的问题；此限制在 PHP 内，不会影响 ImageMagick（或 PHP 以外的任何其他应用程序）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T15:47:22.870

尝试切换到不同的图像处理库，如[ImageMagick](http://www.imagemagick.org/script/index.php)或[Gmagick](http://uk3.php.net/GMagick)，而不是依赖 GD 扩展。您必须安装这些依赖项并重新启动 Apache。

如果这是不可能的，请考虑按照[此答案](https://stackoverflow.com/a/4619441/427992)中所述减小图像的像素大小。

# xml - 显示树/嵌套元素的 XSD 文件查看器/网站

> ID：14305040
> 
> 赞同：1
> 
> 时间：2013-01-13T15:43:04.670
> 
> 标签：xml, xsd

我正在寻找一个简单的 XSD 查看器，它需要一些原始文本/文件，并生成 XSD 文件的树，从而可以使用 +/- 按钮轻松切换每个元素。有没有这样的东西可用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T15:58:49.680

我将在[此处](http://en.wikipedia.org/wiki/XML_Schema_%28W3C%29)找到的 XML 片段保存为 x.xsd，然后从 Firefox 中打开该文件。

我看到了这种可折叠的树结构。

![在此处输入图像描述](../Images/2549cdfc34550f880c7afb97369a70db.png)

希望我能很好地理解你的问题。

# android-notifications - 根据时间更改 Android 默认通知声音

> ID：14305044
> 
> 赞同：1
> 
> 时间：2013-01-13T15:43:27.457
> 
> 标签：android-notifications

我想知道是否可以根据时间以编程方式更改 Android 手机上的默认通知声音。例如，我希望在晚上 11 点之后将默认通知声音更改为静音，然后在上午 8 点恢复为声音。我有 Java 的工作知识，但从未做过任何 Android 开发。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T06:15:15.793

无需过多介绍，我将通过首先创建一个[AlarmService来解决此问题，该服务将定期运行并通过](http://developer.android.com/reference/android/app/AlarmManager.html)[RingtoneManager](http://developer.android.com/reference/android/media/RingtoneManager.html#setActualDefaultRingtoneUri%28android.content.Context,%20int,%20android.net.Uri%29)根据您一天中所需的时间更改默认铃声

AlarmManager 设置定期调用 "RingToneChanger.class" ，如下所示：

```
AlarmManager am=(AlarmManager)context.getSystemService(Context.ALARM_SERVICE);
         Intent i = new Intent(context, Alarm.class);
         PendingIntent pi = PendingIntent.getBroadcast(context, 0, i, 0);
         am.setRepeating(AlarmManager.RTC_WAKEUP, System.currentTimeMillis(), 1000 * 60 * 10, pi); // Millisec * Second * Minute 
```

然后在触发的 RingToneChanger.class 中，可以像这样更改铃声：

```
if(isNoon) {
   RingtoneManager.setActualDefaultRingtoneUri(Context context, RingtoneManager. TYPE_NOTIFICATION , Uri lunchtimeNotificationSound);
} else {
   RingtoneManager.setActualDefaultRingtoneUri(Context context, RingtoneManager. TYPE_NOTIFICATION , Uri defaultNotificationsound);
} 
```

希望能帮助到你。否则请不要犹豫。

# button - 单个页面中有两个提交按钮的错误

> ID：14305050
> 
> 赞同：0
> 
> 时间：2013-01-13T15:43:52.873
> 
> 标签：button, submit

我是一名使用[PHP](http://php.net)做一个小型项目的学生。在我的管理员页面中，我有一个错误。即，首先它提示。

```
-->Hall ticket No 
-->Semester of the particular student. 
```

每当管理员输入这些详细信息并单击第一个提交按钮时，它都会在文本框中显示特定学生的分数。
如果标记不可用，它会显示空文本框，这些文本框允许管理员为该特定学生插入标记。
每当他单击第二个提交按钮时输入标记后，必须将标记插入数据库表中。
**注意：**标记和第二次提交按钮仅在管理员通过输入 Hallticketno 和学期单击第一次提交按钮时出现。
错误是当我用主题标记填充文本框并单击第二个提交按钮时，它会为表中的所有主题插入“0”而不是在文本框中输入标记。这是我的代码：

```
<html>
         <body bgcolor="#abcdfg">
            <center><h2>WELCOME TO ADMINISTRATOR</H2>
                   <form name="admin" action="admin1.php" method="POST">
                  Hall Ticket No.:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    <input type="text" name="rno" value=""/>
                      <br>
                      <br>
                       Enter The Semister:
                    <input type="text" name="sem" value=""/>
                        <br>
                             <br>
                       <input type="submit" name="submit1" value="Load the marks">
                          </form>

                     <?php
                  if(isset($_POST['submit1']))
                  {
                  $id=$_POST['rno'];
                  $semester=$_POST['sem'];
                  $link = mysql_connect('127.0.0.1', 'root', '');

                           if (!$link) {
                                  die('Could not connect: ' . mysql_error());
                                                 }

                $db_selected = mysql_select_db('etudient', $link);
                        if (!$db_selected) {
                               die ('Can\'t use etudient : ' . mysql_error());
                               }
  $sql='SELECT *
                               FROM `2-1`
                               WHERE id='."'".$id."'";
                               $result=mysql_query($sql);

                             if (mysql_num_rows($result)==0)
                               {
                               echo 'marks were not entered for '.$id.' in '.$semester. ' semester'.'<br>'; 
                                    $empty='SELECT subname
                               FROM `2-1subjects`';

                               $eresult=mysql_query($empty);
                               if(!$eresult)
                        {
                        die('invalid Query:'.mysql_error());
                        }
                        Print "<table border=0 cellpadding=10>"; 
                        //Print "<th>SUBJECT CODE</th>";
                        Print "<th>SUBJECT NAME</th>";
                        Print "<th>MARKS</th>";
                        while($cow = mysql_fetch_array($eresult))
                                {
                                      Print "<tr>";
                                //Print "<td>".$row['subcode'] . "</td> ";
                                print "<td>".$cow['subname'] . "</td> ";
                                //Print "<td>".$row['marks'] . "</td> "; 
                                ?>
                                <form method="POST">
                            <td> <input type="text" name="mark" style="text-align:center" value=""/></td>
                            </form>
                                <?php
                                Print "</tr>";                              
                                   }
                                  Print "</table>"; 
                                  ?>

                                   <input type="submit" name="submit2" value="Insert Marks"/>

                                   <?php
                                     if(isset($_POST['submit2']))
                                        {
                                          $insq='SELECT subcode
                                           FROM `2-1subjects`'; 
                                            if(!$insq)
                                          {
                                          die('invalid Query:'.mysql_error());
                                          }                                        

                                          $insre=mysql_query($insq);
                                          while($subrow=mysql_fetch_array($insre))
                                          {
                                          $mr=$_POST['mark'];
                                          $inser='INSERT into `2-1`(id,subcode,marks)
                                          VALUES('."'".$id."'".','
                                                  ."'".$subrow['subcode']."'".','
                                                  ."'".$mr."'".')';
                                          $inseresult=mysql_query($inser);
                                          if(!$inseresult)
                                          {
                                          die('invalid Query:'.mysql_error());
                                          }
                                          }
                                            echo "successfully Inserted.";

                                        }
                                        else{
                                        echo 'not submitted.';
                                        }

                                }

                               else
                               {
                               echo 'Marks Details of  '.$id.'   in  '.$semester.'  semester'.'<br>';
                               $query='SELECT subname,marks
                               FROM `2-1subjects`
                               JOIN `2-1`
                               ON `2-1subjects`.subcode=`2-1`.subcode
                               WHERE id='."'".$id."'";

                               $sql=mysql_query($query);
                               if(!$sql)
                        {
                        die('invalid Query:'.mysql_error());
                        }
                        Print "<table border=0 cellpadding=10>"; 
                        //Print "<th>SUBJECT CODE</th>";
                        Print "<th>SUBJECT NAME</th>";
                        Print "<th>MARKS</th>";
                        while($row = mysql_fetch_array($sql))
                                {
                                      Print "<tr>";
                                //Print "<td>".$row['subcode'] . "</td> ";
                                print "<td>".$row['subname'] . "</td> ";
                                //Print "<td>".$row['marks'] . "</td> "; 
                                ?>

                            <td> <input type="text" style="text-align:center" value="<?php echo $row['marks'] ?>" /></td>
                                <?php
                                Print "</tr>";                              
                                   }
                                  Print "</table>"; 
                                  print '<input type="submit" name="submit" value="Update Marks"/>';
                                  } 
```

并且这些值以相反的顺序插入到表中，这意味着从下到上，而不是我在插入文本框时输入的值。请更正我的代码。提前致谢。

# java - Java 多行输入

> ID：14305053
> 
> 赞同：2
> 
> 时间：2013-01-13T15:44:04.513
> 
> 标签：java, jcreator

我正在尝试解决在线编程问题（这里是：[http](http://acm.timus.ru/problem.aspx?space=1&num=1002) ://acm.timus.ru/problem.aspx?space=1&num=1002 ）。
但是，每当我尝试第一个输入数据时：

```
7325189087（要破译的电话号码）
20（要输入的总字数）
...（在此处输入最多 20 行的单词）

```

Java 控制台在第 20 行之后没有响应/挂起。谁能帮我指出错误发生在哪里？我尝试了 Scanner 和 BufferedReader，以及 Windows 命令提示符和 JCreator 的命令行，但无济于事。
这是代码：

```
import java.util.*;
import java.io.*;

class PhoneNumbers {

    static List<String> cmb = new ArrayList<String>();
    static List<String> indices = new ArrayList<String>();
    static List<String> outputs = new ArrayList<String>();

    public static void main(String[] args) throws IOException{
        //BufferedReader in = new BufferedReader(new InputStreamReader((System.in)));
        Scanner in = new Scanner(new BufferedInputStream(System.in));
        String inp = "";
        while(true) {
            System.out.print(" ");
            inp = in.nextLine();
            if(inp.equals("-1")) break;
            System.out.print(" ");
            int loops = Integer.parseInt(in.nextLine());
            //String[] words = new String[loops];
            List<String> words = new ArrayList<String>();
            for(int i = 0; i < loops; i++){
                System.out.print(" ");
                words.add(in.nextLine());       //Error occurs here. if loop is 20 line or more.
            }
            String nums = "";
            for(int i = 0; i < words.size(); i++)
                nums += i;
            Combi("",nums,words,inp.length());
            boolean isfound = false;
            String ind = "";
            int len = 100;
            for(int i = 0; i < cmb.size(); i++){
                String result = "";
                for(int i2 = 0; i2 < cmb.get(i).length(); i2++) {   
                    result += getVal((cmb.get(i).charAt(i2) + "").toLowerCase());
                }
                if(inp.equals(result)) {
                    isfound = true;
                    int len2 = indices.get(i).length();
                    if(len2 < len){
                        len = len2;
                        ind = indices.get(i);
                    }
                }
            }
            if(isfound){
                String out = "";
                for(int i = 0; i < ind.length(); i++) {
                    int x = Integer.parseInt(ind.charAt(i) + "");
                    out += words.get(x);
                    if(i < ind.length() - 1)
                        out += " ";
                }
                outputs.add(out);
            }
            else
                outputs.add("No solution.");
            cmb.clear();
            indices.clear();
        }

        cmb.clear();
        indices.clear();
        for(int i = 0; i < outputs.size(); i++)
            System.out.println(outputs.get(i));
    }

    public static void Combi(String pre, String s, List<String> col, int len) {
        if(!pre.equals("")){
            String nval = "";
            for(int i = 0; i < pre.length(); i++){
                nval += col.get(Integer.parseInt(pre.charAt(i) + ""));
            }
            if(nval.length() == len){
                cmb.add(nval);
                indices.add(pre);
                Perm("",pre,col,len);
            }
        }
        for(int i = 0; i < s.length(); i++)
            Combi(pre + s.charAt(i), s.substring(i + 1),col,len);
    }

    public static void Perm(String pre, String s, List<String> col, int len) {
        int n = s.length();
        if(n == 0){
            String nval = "";
            for(int i = 0; i < pre.length(); i++){
                nval += col.get(Integer.parseInt(pre.charAt(i) + ""));
            }
            if(cmb.contains(nval) == false){
                cmb.add(nval);
                indices.add(pre);
            }
        } else{
            for(int i = 0; i < n; i++)
                Perm(pre + s.charAt(i), s.substring(0,i) + s.substring(i + 1, n),col,len);
        }
    }

    public static int getVal(String ltr) {
        if (ltr.equals("i") || ltr.equals("j"))
            return 1;
        if (ltr.equals("a") || ltr.equals("b") || ltr.equals("c"))
            return 2;
        if (ltr.equals("d") || ltr.equals("e") ||ltr.equals("f"))
            return 3;
        if(ltr.equals("g") || ltr.equals("h"))
            return 4;
        if (ltr.equals("k") || ltr.equals("l"))
            return 5;
        if (ltr.equals("m") || ltr.equals("n"))
            return 6;
        if (ltr.equals("p") || ltr.equals("r") || ltr.equals("s"))
            return 7;
        if (ltr.equals("t") || ltr.equals("u") || ltr.equals("v"))
            return 8;
        if (ltr.equals("w") || ltr.equals("x") || ltr.equals("y"))
            return 9;
        if (ltr.equals("o") || ltr.equals("q") || ltr.equals("z"))
            return 0;
        return -1;
    }
} 
```

PS - 如果我的代码仍然没有那么高效，我深表歉意。我还在练习 :D
- 有一些 System.Print(" ") 因为 JCreator 的控制台在处理输入时非常错误，而没有先打印一些东西。
- 我不寻求有关此问题的帮助。我只是问为什么Java没有任何理由挂在第20行。

预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T15:56:51.557

如果不使用调试器单步执行，我猜代码会挂在这一行：

```
inp = in.nextLine(); 
```

第 20 行是“-1”吗？如果不是，那么这肯定是它挂起的地方，因为没有其他方法可以退出`while(true)`循环。如果是，请确保您正确输入了数据，并且当到达“-1”行时，的值`inp`正好是`"-1"`，不是`"-1\n"`或类似的东西。

我建议在您的 while 循环中添加一个打印语句，该语句仅打印每个`inp`读取的值，或者按照其他人的建议并逐步执行调试器。

# node.js - nodejs ejs 包含意外的标识符

> ID：14305064
> 
> 赞同：6
> 
> 时间：2013-01-13T15:45:26.017
> 
> 标签：node.js, express, ejs

我正在使用 nodejs + express + ejs，当我尝试包含另一个视图时遇到问题。

当我尝试：

```
<% include dochead %> 
```

我得到“意外的标识符”；
当我尝试：

```
<% include /admin/global/dochead %> 
```

我得到'包含未定义'；

到底是怎么回事？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-03-23T06:56:13.737

**尝试**

```
<%- include ('dochead') %> 
```

**或者**

```
<%- include ('admin/global/dochead') %> 
```

**放**

```
app.set('view engine', 'ejs');
app.set('views', 'YOUR CUSTOM VIEW FOLDER PATH FROM ROOT FILE'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T12:59:27.813

我想这里`<% include /admin/global/dochead %>`应该是

`<% include ../admin/global/dochead %>`

或者

`<% include admin/global/dochead %>`

取决于位置。还要检查您使用的视图引擎

`app.set('view engine', 'ejs');`

# ios - iOs 和应用程序中的 PushNotification 图标被单击

> ID：14305066
> 
> 赞同：0
> 
> 时间：2013-01-13T15:45:48.320
> 
> 标签：ios, apple-push-notifications, uiapplicationdelegate

我收到 PushNotification 作为徽章和警报，并在应用程序图标上显示为徽章。

当我点击出现在屏幕顶部区域的警报时，我成功接收到了有效负载。

但是，如果收到通知并且我单击应用程序图标，我不会在下面提到的任何方法中获得有效负载。

```
application:didFinishLaunchingWithOptions:
application:didReceiveRemoteNotification: 
```

那么，可能是什么问题，或者我在处理这种情况时错过了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T16:21:58.880

那将是预期的行为。如果用户自己没有主动选择点击警报，您不想为用户显示推送通知。如果用户在接收通知时在您的应用程序中，您可以询问用户是否要查看或关闭它。

# iphone - iOS 6 模拟器中的 ABAddresBook 权限

> ID：14305070
> 
> 赞同：2
> 
> 时间：2013-01-13T15:46:22.653
> 
> 标签：iphone, ios, objective-c, abaddressbook

你知道权限是否在模拟器上工作吗？我请求访问，但在 Pricacy 设置中看不到我的应用程序，而且我确实取回了所有联系人的数组等。根据我的代码，访问权限已经被授予。这是模拟器问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T02:01:32.307

iOS6 发行说明（请参阅[此处](http://developer.apple.com/library/ios/#releasenotes/General/RN-iOSSDK-6_0/_index.html)）明确指出，对于访问照片、通讯录、日历和提醒的应用程序，不会显示任何隐私警报。

您必须在真实设备上测试隐私。

iOS 6 发行说明中引用的模拟器限制：

```
Simulator
* No privacy alerts are displayed in iOS Simulator for apps that access Photos, Contacts, Calendar, and Reminders.
* For this release, iOS Simulator does not support testing In-App Purchase. Please use a device to test your apps that use this feature.
* When attempting to play an MP3 sound in Simulator, you will hear a popping sound instead. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T16:54:31.743

我不会指望模拟器。我自己在模拟器和询问日历/通讯录权限方面遇到了问题。为了安全起见，我建议您针对真实设备进行测试。

# php - 西里尔文和 PHPWord

> ID：14305071
> 
> 赞同：1
> 
> 时间：2013-01-13T15:46:26.520
> 
> 标签：php, unicode, encoding, phpword

我页面中的默认编码是 UTF-8。我必须用西里尔文写文件。整个应用程序是拉丁文的，所以我可以将每个符号从一个转换成另一个，但是我不能让 PHPWord 写出西里尔字母。我让它写扩展拉丁语（ŠĐĆČŽ），但我需要它写ЉЊШЂЋЏЦ等...

如何让 PHPWord 写出西里尔字母？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T01:06:25.373

我已通过以下方式修复了此错误：

```
header('Content-Type: text/html; charset=utf-8'); 
```

没关系，我在 html 元标记中定义了它，它就像这样工作！

# mysql - 将多个表中的数据插入到一个表中

> ID：14305073
> 
> 赞同：2
> 
> 时间：2013-01-13T15:46:55.897
> 
> 标签：mysql, ms-access, ms-access-2003

我试图使用下面的这个 SQl 将表中的数据添加到一个表中：

```
INSERT INTO myNewTable
SELECT *
FROM 2010-tbl, 2011-tbl, 2013-tbl
WHERE fldName = 'value'; 
```

所有表都具有完全相同的结构 - 但每个表中的值不同。第一个表（myNewTable）没有值，将接受其他表插入的所有值。那么我该怎么做呢？我需要某种 JOIN 语句吗？

***编辑***

只有一件事 - 我试图在插入之前删除其中的先前记录 - 但 MS Access 抛出此错误：

```
Characters found after end of SQL statement 
```

这是代码：

```
DELETE * FROM myNewTable
INSERT INTO myNewTable
SELECT * FROM 2012-tbl WHERE  (((2012-tbl.[field])=[Text])); 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T15:48:45.307

`Union`在你的`SELECT`陈述中使用 a

```
INSERT INTO myTable 
SELECT * 
FROM 2010-tbl 
WHERE fldName = 'value'
UNION
SELECT * 
FROM 2011-tbl 
WHERE fldName = 'value'
UNION
SELECT * 
FROM 2013-tbl 
WHERE fldName = 'value' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T15:49:28.167

你正在寻找工会

[http://dev.mysql.com/doc/refman/5.0/en/union.html](http://dev.mysql.com/doc/refman/5.0/en/union.html)

```
INSERT INTO myNewTable
(
  SELECT *
  FROM 2010-tbl
  WHERE fldName = 'value';
) UNION (
  SELECT *
  FROM 2011-tbl
  WHERE fldName = 'value';
) UNION (
  SELECT *
  FROM 2013-tbl
  WHERE fldName = 'value';
) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-19T13:59:14.417

执行此操作的简单方法是将**UNION ALL**与**SELECT**一起使用。如果要消除重复行，请使用 UNION 而不是 UNION ALL。

```
DELETE * FROM   mynewtable;

INSERT INTO mytable 
SELECT * FROM 2010-tbl WHERE fldname = 'value' 
UNION ALL 
SELECT * FROM 2011-tbl WHERE fldname = 'value' 
UNION ALL 
SELECT * FROM 2012-tbl WHERE  fldname = 'value'; 
```

如果这些表的记录数较少，这可以正常工作，但如果这些表包含大量记录，则它会给出***与堆内存相关的错误***。为避免这种情况，您可以使用以下模块化片段来完成您的工作！

```
DELETE * FROM mynewtable;

INSERT INTO mytable SELECT * FROM 2010-tbl WHERE fldname = 'value';

INSERT INTO mytable SELECT * FROM 2011-tbl WHERE fldname = 'value';

INSERT INTO mytable SELECT * FROM 2012-tbl WHERE fldname = 'value'; 
```

如果您有太多表格，那么使用上述（第二种方式）可能会很耗时，因为您必须一个一个地输入每个命令，因此为了方便起见，您可以将此代码段放在一个文本文件中，然后使用 source 命令运行这些命令一次。例子：

1.  创建名为**allCommands**的文件并将这些命令放入其中： $ cat > allCommands DELETE * FROM mynewtable;

    ```
    INSERT INTO mytable SELECT * FROM 2010-tbl WHERE fldname = 'value';

    INSERT INTO mytable SELECT * FROM 2011-tbl WHERE fldname = 'value';

    INSERT INTO mytable SELECT * FROM 2012-tbl WHERE fldname = 'value'; 
    ```

2.  从终端/cmd启动***mysql***

    ```
    shell> mysql 
    ```

3.  使用***source***命令运行此脚本。***不要忘记提供 allCommands 文件的正确路径。***

    ```
    mysql> use db_name;
    mysql> source allCommands; 
    ```

# c++ - 解析对象。通过opengl文件

> ID：14305078
> 
> 赞同：-2
> 
> 时间：2013-01-13T15:47:16.033
> 
> 标签：c++, opengl, .obj

我有一个对象。文件几乎完成。我在最后一部分卡住了一个错误。

```
 //load the filename textures (only BMP, R5G6B5 format)
    unsigned int objloader::loadTexture(const char* filename){

unsigned int num;
glGenTextures(1,&num);
SDL_Surface* img=SDL_LoadBMP(filename);
glBindTexture(GL_TEXTURE_2D,num);
glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MIN_FILTER,GL_LINEAR);
glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MAG_FILTER,GL_LINEAR);
glTexImage2D(GL_TEXTURE_2D,0,GL_RGB,img->w,img->h,0,GL_RGB,GL_UNSIGNED_SHORT_5_6_5,img->pixels);
glTexEnvi(GL_TEXTURE_2D,GL_TEXTURE_ENV_MODE,GL_MODULATE);   
SDL_FreeSurface(img);
texture.push_back(num);
return num;}

objloader::objloader() {
//at default we set all booleans to false, so we don't use anything
ismaterial=false;
isnormals=false;
istexture=false; } 
```

我得到的错误信息是：

> 错误 33 错误 C2065：“GL_UNSIGNED_SHORT_5_6_5”：未声明的标识符

如果还需要什么，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T19:20:22.950

尝试包括`<gl/glext.h>`
来源：[http ://www.gamedev.net/topic/523837-rgb565/](http://www.gamedev.net/topic/523837-rgb565/)

# python - Pygame (Python) - TypeError: Argument must be rect style object

> ID：14305083
> 
> 赞同：-4
> 
> 时间：2013-01-13T15:47:33.200
> 
> 标签：python, pygame, typeerror

这很令人沮丧，我正在尝试用 Pygame (Python) 制作一个破砖游戏，但我遇到了一个错误。过去几个小时我一直在尝试解决这个问题，但我仍然没有。

所以请尝试帮助我，我真的很想继续编程，而不是陷入这个错误......

代码：

```
import pygame, sys, time, random
from pygame.locals import *
pygame.init()
fpsclock = pygame.time.Clock()

WINDOWWIDTH = 450
WINDOWHEIGHT = 650
mainwindow = pygame.display.set_mode((WINDOWWIDTH, WINDOWHEIGHT), 0, 32)
pygame.display.set_caption('Luzion - Brick Breaker')

paddle = pygame.image.load('Brick Breaker - Paddle.png')
paddlerect = paddle.get_rect()
paddlerect.topleft = (190, 575)

ball = pygame.image.load ('ball.png')
ballrect = ball.get_rect()
ballrect.topleft = (195, 565)

cooltext = pygame.image.load('cooltext1.png')
cooltextrect = cooltext.get_rect()
cooltextrect.topleft = (0, 0)

BLACK = (0, 0, 0)
WHITE = (255, 255, 255)
RED = (255, 0, 0)
GREEN = (0, 128, 0)
BLUE = (0, 0, 255)
LIME = (0, 255, 0)
TEXTCOLOR = WHITE

font = pygame.font.SysFont(None, 48)

def displaytext(text, font, surface, x, y):
    text = font.render(text, 1, TEXTCOLOR)
    textrect = text.get_rect()
    textrect.topleft = (x, y)
    surface.blit(text, textrect)

def waitforplayer():
    while True:
        for event in pygame.event.get():
            if event.type == QUIT:
                pygame.quit()
                sys.exit()
            if event.type == KEYDOWN:
                if event.key == K_ESCAPE:
                    pygame.quit()
                    sys.exit()
                return

rb = pygame.image.load('redblock.png')

rbrect = rb.get_rect().topleft = (0, 0)
rb1rect = rb.get_rect().topleft = (40, 0)
rb2rect = rb.get_rect().topleft = (80, 0)
level1rects = [rbrect, rb1rect, rb2rect]

moveleft = False
moveright = False
SPEED = 7

bmoveup = bmovedown = bmoveleft = bmoveright = False
BALLSPEED = 8

mainwindow.blit(cooltext, cooltextrect)
pygame.display.update()
time.sleep(1)

displaytext('Level 1', font, mainwindow, 150, 100)
pygame.display.update()
time.sleep(1)

displaytext('Press any key to begin...', font, mainwindow, 22, 200)
pygame.display.update()
waitforplayer()

while True:
    number = 1
    for event in pygame.event.get():
        if event.type == QUIT:
            pygame.quit()
            sys.exit()
        if event.type == KEYDOWN:
            if event.key == ord('a') or event.key == K_LEFT:
                moveleft = True
                moveright = False
            if event.key == ord('d') or event.key == K_RIGHT:
                moveleft = False
                moveright = True
            if event.key == ord('g'):
                bmoveup = True
                if number == 1:
                    bmoveleft = True
                else:
                    bmoveright = True
        if event.type == KEYUP:
            if event.key == ord('a') or event.key == K_LEFT:
                moveleft = False
            if event.key == ord('d') or event.key == K_RIGHT:
                moveright = False

    if moveleft and paddlerect.left > 0:
        paddlerect.left -= SPEED
    if moveright and paddlerect.right < WINDOWWIDTH:
        paddlerect.right += SPEED

    if bmovedown and ballrect.bottom < WINDOWHEIGHT:
        ballrect.top += BALLSPEED
    if bmoveup and ballrect.top > 0:
        ballrect.top -= BALLSPEED
    if bmoveleft and ballrect.left > 0:
        ballrect.left -= BALLSPEED
    if bmoveright and ballrect.right < WINDOWWIDTH:
        ballrect.right += BALLSPEED

    if ballrect.top <= 0:
        bmovedown = not bmovedown
        bmoveup = not bmoveup
    if ballrect.left <= 0:
        bmoveleft = not bmoveleft
        bmoveright = not bmoveright
    if ballrect.right >= WINDOWWIDTH:
        bmoveleft = not bmoveleft
        bmoveright = not bmoveright
    if ballrect.bottom >= WINDOWHEIGHT:
        bmovedown = not bmovedown
        bmoveup = not bmoveup

    mainwindow.fill(WHITE)
    mainwindow.blit(paddle, paddlerect)
    mainwindow.blit(ball, ballrect)

    for b in range(len(level1rects)):
        mainwindow.blit(rb, level1rects[b])

    for x in level1rects:
        if ballrect.colliderect(x):
            level1rects.remove(x)
            bmovedown = not bmovedown
            bmoveup = not bmoveup
            bmoveleft = not bmoveleft
            bmoveright = not bmoveright

    if ballrect.colliderect(paddlerect):
        bmovedown = not bmovedown
        bmoveup = not bmoveup
        bmoveleft = not bmoveleft
        bmoveright = not bmoveright

    pygame.display.update()
    fpsclock.tick(35) 
```

错误：

```
Traceback (most recent call last):
  File "C:\Python32\brick breaker", line 139, in <module>
    if ballrect.colliderect(x):
TypeError: Argument must be rect style object 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T15:49:50.593

看看你定义的地方`level1rects`：

```
rbrect = rb.get_rect().topleft = (0, 0)
rb1rect = rb.get_rect().topleft = (40, 0)
rb2rect = rb.get_rect().topleft = (80, 0)
level1rects = [rbrect, rb1rect, rb2rect] 
```

`x`在循环的每次迭代中是一个坐标，而不是一个矩形，因此是错误的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T15:55:00.877

试试这个代码：

```
rb = pygame.image.load('redblock.png')

rbrect = rb.get_rect()
rbrect.topleft = (0, 0)
rb1rect = rb.get_rect()
rb1rect.topleft = (40, 0)
rb2rect = rb.get_rect()
rb2rect.topleft = (80, 0) 
```

# sql - SQL中BETWEEN子句的真正目的是什么？

> ID：14305085
> 
> 赞同：1
> 
> 时间：2013-01-13T15:48:10.300
> 
> 标签：sql, sql-server, tsql

为了正确使用索引，您必须将过滤谓词作为搜索参数，因此在这种情况下您不能使用`DATETIME`函数。

您需要使用`<=`and`>=`操作数进行日期和时间比较，但也有`BETWEEN`子句。

因此，建议使用简单的算术操作数，因为`BETWEEN`结束日期有问题。

有没有比and`BETWEEN`更可取的上下文？`<=``>=`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-13T16:11:17.440

如果您问两者之间是否有任何区别

```
where X between 1 and 10 
```

相对

```
where X >= 1 and X <= 10 
```

那么不，没有区别。它只是对语言的一种方便的增强，是许多试图让生活更轻松的语言之一；一个`BETWEEN`表达式非常清楚地表达了期望的结果。

它类似于`COALESCE`函数，它只是编写`CASE`检查`NULL`值的表达式的一种更快捷的方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-13T16:59:02.083

> 因此，建议使用简单的算术操作数，因为 **BETWEEN 有 end dates 的问题**。

不。BETWEEN 对结束日期（对于日期和时间值）没有问题，但开发人员因为有些人忘记了日期和时间（**DATETIME**数据类型）值也有时间组件。

所以，写

```
SELECT ...
FROM MyTable 
WHERE MyDateTimeColumn BETWEEN '20130101' AND '20130113' 
```

当您想显示这两个日期之间的所有记录时是错误的，因为`'20130113'`表示`'20130113 00:00:00.000'`（而不是`'20130113 23:59:59.997'`）和`BETWEEN '20130101' AND '20130113'`表示`BETWEEN '20130101' AND '20130113 00:00:000.000'`。

一些解决方案：

1)

```
SELECT ...
FROM MyTable 
WHERE MyDateTimeColumn BETWEEN '20130101' AND '20130113 23:59:59.997' 
```

2)

```
SELECT ...
FROM MyTable 
WHERE CONVERT(DATE, MyDateTimeColumn) BETWEEN '20130101' AND '20130113' 
```

3)

```
DECLARE @StartDate DATETIME = '20120103'
DECLARE @EndDate DATETIME = '20120103'

SET @EndDate = DATEADD(MILLISECOND, -3, DATEADD(DAY, 0, DATEDIFF(DAY, 0, @EndDate)+1))

SELECT @StartDate AS [SD], @EndDate [ED]

SELECT ...
FROM MyTable 
WHERE MyDateTimeColumn BETWEEN @StartDate AND @EndDate 
```

结果：

```
SD                      ED
----------------------- -----------------------
2012-01-03 00:00:00.000 2012-01-03 23:59:59.997

(1 row(s) affected)

... 
```

注意：`DATETIME`值[“四舍五入到 0.000、0.003 或 0.007 秒的增量”](http://msdn.microsoft.com/en-us/library/ms187819.aspx)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T15:51:38.510

使用数字类型时，它有利于提高可读性。

如果您需要检查两个整数值之间的整数列值：

```
theColumn BETWEEN 5 and 25 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-13T15:59:52.550

BETWEEN 被翻译成两个单独的操作，用 or 连接：`a BETWEEN b AND c`相当于`a >= B AND a <= c`. 在这种情况下，等价意味着功能上的等价。它将在优化器和执行引擎中产生相同的行为。

问题在于自然语言中的单词之间是模糊的。是否意味着包含或不包含边界取决于许多并不总是显而易见的因素。我们需要远离编程的模糊行为。

虽然 T-SQL BETWEEN 具有明确定义的行为，但很容易忘记它是哪一个。由于代码的阅读频率远高于编写代码的频率，因此使其尽可能具有可读性很重要。每次读者遇到 BETWEEN 关键字时，他都必须停下来思考边界行为。这会分散注意力，也会导致难以找到错误。

您听说日期计算中的结束边界存在问题的原因是，人们最常错误地使用 BETWEEN 就是这种情况。

# jquery - 带有用户名可用性检查的jQuery表单验证

> ID：14305090
> 
> 赞同：0
> 
> 时间：2013-01-13T15:48:54.217
> 
> 标签：jquery, jquery-validate

我正在使用 jQuery (jquery.validate.js) 进行表单验证。我需要检查用户名是否可用，但我不知道该怎么做。请帮忙。

HTML：

```
<input type="text" name="username" class="required checkAvailability" /> 
```

jQuery：

```
$(document).ready(function(){

  $.validator.addMethod("checkAvailability", function(username) {
    var isSuccess = false;
    $.ajax({ url: "/checkAvailibility",
      data: "username=" + username,
      async: false,
      success: function(available) {
        if (available == "TRUE")
            isSuccess = true;
        return $("message", returnData).text() == "Username available";
      }
    });
  }, "Username not available");

  $("#formID").validate();

}); 
```

服务器端程序返回一个字符串，它是“TRUE”或“FALSE”（由“returnData”变量返回）。

我的问题：如何将消息和检查结果都返回给 validate() 以便消息可以显示在字段旁边并且如果用户名不可用则不会提交表单？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T18:42:23.990

在服务器上检查表单域的标准和最简单的方法是使用“远程”方法。从您的服务器端方法只返回文本“true”或“false”，而不是 returnData=true 或其他任何内容。

Javascript应该是这样的

```
<script>
$(function () {
    $('form').validate({
        rules: { username: 
            {
            remote: '/checkAvailibility'
            }
        }
    });
});
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T17:03:11.010

你能稍微重构一下你的代码吗？就像是：

```
$(document).ready(function(){

  $validUsername = false;

  $("input.checkAvailability").keyup(function(){

    $.ajax({ url: "/checkAvailibility",
      data: "username=" + $(this).val(),
      success: function(available) {
        if (available == "TRUE"){
            $validUsername = true;
            $("message", returnData).text("Username available");
        }
        else{
            // Do something
        }
      }
    });

  }); 

  $.validator.addMethod("checkAvailability", function(username) {
    return $validUsername;
  }, "Username not available");

  $("#formID").validate();

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-11T09:57:27.060

我通过使用 codeigniter 实现了这一点。愿这对你有帮助。

控制器功能：

```
 function checkUserName()
{
    $user_name=$_GET['user_name'];
    if(isset($user_name))
    {
        $arr=$this->home_model->checkUserName($user_name);
        $cnt=count($arr);
        if($cnt > 0)
            echo json_encode(false);
        else
            echo json_encode(true);
    }
} 
```

型号功能：

```
function checkUserName($user_name)
{
    $this->db->select('a.id');
    $this->db->like('a.user_name',$user_name,'none');
    return $this->db->get('accounts a')->result();
    $this->db->get('accounts a')->result();
    echo $this->db->last_query();
    die;
} 
```

HTML 和 JS：

```
<input type="text" name="user_name" placeholder="User name" id="user_name" class="form-control" value=""> 
```

JS：

```
$('#signup').validate(
{
    rules: 
    {
        user_name: 
        {
               //required: true,
        remote: baseUrl+'home/checkUserName'
        }
    }

    //Your Code here.......
} 
```

# css - CSS垂直扩展元素并移动伪元素

> ID：14305091
> 
> 赞同：0
> 
> 时间：2013-01-13T15:48:57.387
> 
> 标签：css, ribbon, pseudo-element

在我正在创建的网站上，我在页面顶部有一个导航栏，我想在悬停时垂直展开/动画。我还使用*:after*伪元素来创建丝带效果。问题是当菜单项悬停时，我似乎无法让“功能区部分”向下移动。我已经玩了一段时间了，我知道这很简单，但我就是想不通。

我在这里有关于 pastebin 的代码：http: [//pastebin.com/FTf4pBEi](http://pastebin.com/FTf4pBEi)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T16:06:06.770

我增加了悬停高度，功能区似乎起作用了。由于没有子菜单项，我不确定您到底在追求什么。

[http://jsfiddle.net/Kts5y/3/](http://jsfiddle.net/Kts5y/3/)

```
.menu_item:hover {
  height:150px;
} 
```

# asp.net-mvc - 剑道用户界面许可

> ID：14305092
> 
> 赞同：2
> 
> 时间：2013-01-13T15:49:08.537
> 
> 标签：asp.net-mvc, telerik, kendo-ui, telerik-mvc

有没有人有剑道 UI 许可的经验？我是团队中的 MVC 开发人员，如果我购买了单个开发人员许可证，如果我是唯一使用 Kendo 的开发人员，我可以在我们的项目中使用它吗？还是每个开发人员都需要许可证？

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T16:18:27.737

引用[许可协议](https://www.kendoui.com/purchase/license-agreement/kendo-ui-web-commercial.aspx)：

> 1.1.1 开发者许可授予。如果您购买了开发人员许可，您的许可开发人员可以在开发您的集成产品时以源代码和缩小形式使用该软件。
> 
> 为本协议之目的：
> 
> “您的集成产品”仅限于那些软件应用程序： (i) 由您的许可开发人员开发；(ii) 在软件集成组件提供的功能之外添加大量功能；(iii) 不是软件或软件的任何组件的商业替代品或在市场上与软件或软件的任何组件竞争。
> 
> “许可开发人员”(i) 仅限于您授权使用该软件专门为您开发软件的您的员工或承包商的数量，并且 (ii) 必须对应于您根据本协议从 Telerik 购买的最大席位数量。这意味着，在任何给定时间，许可开发人员的数量都不能超过您从 Telerik 购买的席位数量，并且您已根据本协议向 Telerik 支付了所有适用的许可费用。当软件被加载到临时内存（即 RAM）或安装到永久内存（例如硬盘或其他存储设备）中时，该软件在计算机上“使用”。您的许可开发人员可以在多台机器上安装软件，

所以基本上只有拥有开发者许可证的开发者才能使用它。

# list - 如何忽略方案中的内部列表？

> ID：14305094
> 
> 赞同：0
> 
> 时间：2013-01-13T15:49:20.417
> 
> 标签：list, scheme, racket

我编写了一个从列表中获取每个值并返回每个值为 -1 的列表的过程（例如）

```
(define (Set-list a val)
  (if ( null? a) (list)
    (append (list val) (Set-list (cdr a) val))
))

(Set-list '(2 3 4) -1) //returns '(-1 -1 -1)
(Set-list '(A(2 3) B(2 3) C(2 3)) -1) // returns '(-1 -1 -1 -1 -1 -1) 
```

我如何让它返回-1 -1 -1？我不想获取列表的内部成员？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T17:42:05.717

由于 Anton 提到了一个惯用的解决方案，这是我在 Racket 中的惯用解决方案（我相信使用高阶函数，如`map`,`filter-not`和可以说`const`比手动循环和过滤更惯用）。:-)

```
(define (set-list lst val)
  (map (const val) (filter-not list? lst))) 
```

（Racket 确实提供`filter-map`了，但它以与我们想要做的相反的顺序应用`filter`and 。）`map`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T16:17:54.123

也许您对列表在 Scheme 中的工作方式感到困惑。此列表：`'(A(2 3) B(2 3) C(2 3))`与此列表：*完全相同*`'(A (2 3) B (2 3) C (2 3))`。也就是说，它是一个六元素列表。如果要将符号和数字的组合视为单个元素，请将它们打包在一个列表中：`'((A 2 3) (B 2 3) (C 2 3))`

作为旁注，`set-list`编写过程的方式不是惯用的，特别`append`是在构建列表时使用不是将元素放在首位的最佳方式，请使用`cons`它。这是编写过程的更好方法：

```
(define (set-list a val)
  (if (null? a)
      '()
      (cons val
            (set-list (cdr a) val)))) 
```

现在，按照我上面的建议，它是如何工作的：

```
(set-list '((A 2 3) (B 2 3) (C 2 3)) -1)
=> '(-1 -1 -1) 
```

**更新：**

现在，如果确实对列表的工作方式没有误解，并且您只想用给定值替换列表中的所有子列表，那么这将起作用：

```
(define (set-list a val)
  (build-list (length (filter (negate list?) a))
              (lambda (x) val))) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T02:15:24.203

如果要创建一个长度与给定列表长度相同的值列表，

```
(define (set-list list value)
    (build-list (length list) (lambda (x) value))) 
```

所以，

```
(set-list '(2 3 4) -1) //returns '(-1 -1 -1)
(set-list '(A (2 3) B (2 3) C (2 3)) -1) // returns '(-1 -1 -1 -1 -1 -1)
(set-list '(2 3 4) -2) //returns '(-2 -2 -2)
(set-list '(A (2 3) B (2 3) C (2 3)) -2) // returns '(-2 -2 -2 -2 -2 -2) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-13T16:25:51.417

这是我的尝试（可能不是惯用的方案，请注意这样做`append`是错误的）。正如您在评论中解释的那样，我假设您想完全跳过子列表。

```
(define (Set-list a val)
  (if (null? a)
      (list)     
      (append (if (list? (car a))
                  (list)
                  (list val))
              (Set-list (cdr a) val)))) 
```

# jquery - Jquery：隐藏一个文本框然后显示它

> ID：14305095
> 
> 赞同：2
> 
> 时间：2013-01-13T15:49:23.293
> 
> 标签：jquery

我对 jquery 很陌生。我在这里有一个重大疑问。基本上我想在 jquery 中做一种递归的事情！我在 div 中有一个文本框。用户将在文本框中输入他的名字，然后当他点击文本框时，我想隐藏文本框并打印用户在该部门的文本框中写的任何内容（我可以做得很好，但是问题摆在面前）。假设如果用户在键入时犯了一些错误，现在我想要的是当用户点击该 div 时我想要返回相同的文本框。然后当他再次点击该文本框时，文本框应该隐藏并且输入的文本应该打印在 div 中。

我的 HTML 代码：

```
 <html>
<body>
<div style="width:18px; font-weight:bold; text-align:center;" id="filltheblank1" >  <input   type="text"  /></div>
</body>
</html> 
```

查询：

```
$(document).ready(function () {
  $("#filltheblank1").children(this).blur(function () {
    if ($(this).val()) {
      var entered = $(this).val().toUpperCase();
    }
    $(this).hide(500, function () {
      $(this).parent(this).html(entered).click(function () {
        //now what to do here. I want that when user clicks o the div, the textbox should come back and when he clicks out again, it should go away and the text he entered should be preinted

      });
    });
  });
}); 
```

请帮助某人

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T16:07:02.667

首先，我会添加另一个 div 来显示文本，`display:none`第一次隐藏它：

```
<html>
 <body>
  <div style="width:18px; font-weight:bold; text-align:center;" id="filltheblank1" >       
    <input type="text"  />
  </div>
  <div id="message" style="display:none"></div>
</body>
</html> 
```

然后在 JS 代码中，您必须改进 CSS 选择器以访问输入元素 htm，假设只有一个输入，我会这样做：

```
$(document).ready(function(){

 $("#filltheblank1 input").on('blur', function(){ //on is how it should be done on jQuery 1.7 and up
    if($(this).val()){
      var entered = $(this).val().toUpperCase();
    }
    $("#filltheblank1").fadeOut(500, function(){
     $("#message").html(entered);
     $("#message").show(); //shows hidden div
    }
 });

 //event to show the input when user clicks the div
 $("#message").on('click', function(){
    $(this).hide();
    $("#filltheblank1").fadeIn();
 });
}); 
```

我做了分离事件来做你想做的事，并为元素添加了 id 以使 javascript 代码更容易和更快。

# c# - 尝试投射匿名对象 Razor 时出错

> ID：14305099
> 
> 赞同：1
> 
> 时间：2013-01-13T15:49:37.313
> 
> 标签：c#, linq, lambda, umbraco

我正在尝试转换一组匿名对象，其中每个对象如下所示：

```
new {type="internal",title="Linktitle",target="_blank",link="http://www.google.se"} 
```

我已经声明了一个类“链接”，匿名对象应该被投射到该类

```
class Link{
    public string type {get;set;}
    public string target {get;set;}
    public string title {get;set;}
    public string link {get;set;}
} 
```

现在我正在尝试投射对象，就像这样

```
List<Link> links = Model.relatedLinks.Select(l => new Link{type=l.type,target=l.target,title=l.title,link=l.link}).ToList(); 
```

然后我得到错误

```
Cannot use a lambda expression as an argument to a dynamically dispatched operation without first casting it to a delegate or expression tree type 
```

我发现[this](https://stackoverflow.com/questions/445984/convert-anonymous-type-to-class) page on how to cast anonymous objects，但我也是这样做的。还是我错过了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-13T15:57:46.837

如果`relatedLinks`它本身是一个动态值，你会遇到两个问题：

*   已经报告的 lambda 表达式部分
*   不能对动态值调用扩展方法（*作为*扩展方法）。这会影响`Select`和`ToList`方法。

您可以通过转换 lambda 表达式来解决第一个问题。您可以通过直接调用来解决第二个问题`Enumerable.Select`：

```
// Note: don't use var here. We need the implicit conversion from
// dynamic
IEnumerable<Link> query = Enumerable.Select(Model.relatedLinks, 
                              (Func<dynamic, Link>) (l => new Link { 
                                                            type = l.type,
                                                            target = l.target,
                                                            title = l.title,
                                                            link = l.link } );
var links = query.ToList(); 
```

或者为了格式化：

```
Func<dynamic, Link> projection = l => new Link { 
                                        type = l.type,
                                        target = l.target,
                                        title = l.title,
                                        link = l.link };
IEnumerable<Link> query = Enumerable.Select(Model.relatedLinks, projection);
var links = query.ToList(); 
```

如果`Model.relatedLinks`已经`IEnumerable<dynamic>`（或类似的东西），那么您可以`Select`改为作为扩展方法调用 - 但您仍然需要有一个强类型的委托。因此，例如，后一个版本将变为：

```
Func<dynamic, Link> projection = l => new Link { 
                                        type = l.type,
                                        target = l.target,
                                        title = l.title,
                                        link = l.link };
IEnumerable<Link> query = Model.relatedLinks.Select(projection);
var links = query.ToList(); 
```

# java - 如何使用 for 语句在 java 中的数组中创建多个图像？

> ID：14305100
> 
> 赞同：0
> 
> 时间：2013-01-13T15:49:42.453
> 
> 标签：java, arrays, eclipse, image, slick2d

我希望将 52 张卡片图像链接到一个数组，但不单独添加它们。我在想像创建一个数组并使用这样的一段代码。

```
Image[] card;
card = new int[52];
for (int c = 1; c<=52;c++)
{
    card[c] = 
} 
```

我不确定如何继续，但文件中的卡片标记为 1-52，所以我认为这将是创建卡片值的更简单方法（也是给老师留下深刻印象的更好方法）。我想我可能还必须更改排名系统并使用它。我正在为图形使用 slick2d。

如何使用那段代码（或另一段代码）将图像分配给变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T06:16:33.860

查看[http://www.slick2d.org/javadoc/](http://www.slick2d.org/javadoc/)上的 slick2d javadoc并找到您尝试使用的 Image 类。

试试这个代码

```
Image[] card = new Image[52];
for (int i = 0; i < 52; i++)
    {
        card[i] = new Image(/*insert constructors here*/);
    } 
```

如果您阅读文档，您会发现有许多不同的方法可以创建新的图像对象。例如，我下载了一张黑桃 A 图像，下面的代码应该创建一个包含 52 个黑桃 A 的数组

```
Image[] card = new Image[52];
String fileLocation = "C:\\Users\\con25m\\Pictures\\ace_spades.jpg";
for (int i = 0; i < 52; i++)
    {
        card[i] = new Image(fileLocation);
    } 
```

您可以查看 slick2d 是否具有标准 52 套牌中所有卡片的图像，或者自己下载每张卡片的图像，为图像提出命名约定，然后在 forloop 中更新 fileLocation 字符串。例如

```
Image[] card = new Image[52];
String fileLocation = new String();
for (int i = 0; i < 52; i++)
    {
        fileLocation = "C:\\Users\\con25m\\Pictures\\" + i + ".jpg";
        card[i] = new Image(fileLocation);
    } 
```

注意：不要一直使用数字 52，而是考虑使用最终变量并使用该变量。例如

```
final int NUMBER_OF_CARDS = 52;
Image[] card = new Image[NUMBER_OF_CARDS];
for (int i = 0; i < NUMBER_OF_CARDS; i++)... 
```

# html - 如何用html5画布做透视图

> ID：14305104
> 
> 赞同：9
> 
> 时间：2013-01-13T15:49:51.613
> 
> 标签：html, transform

我想在 html5 画布中将图像制作成倾斜/透视/旋转的图像。下图正是我想要做的。

![看法](../Images/0255364887c02fbd5139bdea7556f4d8.png)

我有这段代码可以在画布中使用转换，但我不能用它做正面或反面。有人可以帮助我吗？

此外，我只希望在 HTML5 Canvas 而不是 css 中完成此操作。

```
var cs = Math.cos(angle1), sn = Math.sin(angle1);
var h = Math.cos(angle2);

var a = 100*cs, b = -100*sn, c = 200;
var d = h*100*sn, e = h*100*cs, f = 200;

ctx.setTransform(a, d, b, e, c, f); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-02T12:59:53.817

不幸的是，不可能使用画布上下文`setTransform`方法来执行透视变换（您仅限于平移、缩放、旋转和倾斜）。

但是，根据您的用例，您可以伪造它：

[http://tulrich.com/geekstuff/canvas/perspective.html](http://tulrich.com/geekstuff/canvas/perspective.html) [http://yuiblog.com/blog/2008/06/23/slicing/](http://yuiblog.com/blog/2008/06/23/slicing/)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-06-08T17:34:54.800

任何仍然想知道的人，您可以使用[http://evanw.github.io/glfx.js/docs/轻松完成此操作](http://evanw.github.io/glfx.js/docs/)

# ios - 将 didFinishLaunchingWithOptions: 方法移动到带有按钮触发器的 viewcontroller 方法

> ID：14305112
> 
> 赞同：0
> 
> 时间：2013-01-13T15:51:20.270
> 
> 标签：ios, cocoa-touch

我有以下代码在 AppDelegate.h/.m 中工作，但无法将其更改为在 ViewController 中使用按钮触发它。

```
@implementation BSViewController

@synthesize imageView;
@synthesize workingImage;
- (IBAction) chooseImage:(id) sender {

    UIImage* testCard = [UIImage imageNamed:@"ipad 7D.JPG"];
    CGImageRef num = CGImageCreateWithImageInRect([testCard CGImage],CGRectMake(532, 0, 104, 104));
    UIGraphicsBeginImageContext(CGSizeMake( 250,650));
    CGContextRef con = UIGraphicsGetCurrentContext();
    UIImage* im = UIGraphicsGetImageFromCurrentImageContext();
    CGContextDrawImage(con, CGRectMake(0, 0, 13, 13) ,num);
    UIGraphicsEndImageContext();
    CGImageRelease(num);

    UIImageView* iv = [[UIImageView alloc] initWithImage:im];
    [self.imageView addSubview: iv];
    iv.center = self.imageView.center;
    [iv release]; 
```

我在模拟器中看到名为“选择图像”的按钮，但在那里看不到图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T16:27:27.590

您尚未添加`self.imageView`到任何视图。你需要

```
[self.view addSubview:self.imageView]; 
```

显示您的 imageView。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T16:52:40.223

我能够让它工作，但让我先问你一些愚蠢的问题。您可以跳过这些并直接跳到最后以获得答案：

*   以前有效吗？
*   你为什么不使用ARC？
*   您是否`chooseImage:`使用 Interface Builder 或以编程方式将按钮链接到按钮？我有时会忘记这个基本步骤，当然没有任何效果:)
*   为什么要添加`iv`为子视图`self.imageView`而不是仅更改`self.imageView`. 知道这一点可能有助于正确回答。
*   假设您有充分的理由添加`iv`为子视图，请注意`iv.center = self.imageView.center`中心位于两个不同的坐标系中。
    形成[Apple 文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html)：

    > 中心在其父视图的坐标系中指定，并以点为单位进行测量。设置此属性会相应地更改框架属性的值。

**编辑：其他要检查的事情**

*   `self.imageView`存在吗？我的意思是，你是用 IB 添加它并将其链接到 IBOutlet，还是以编程方式定义它？
*   在里面加个断点`chooseImage:`，一步一步去，确保你在那里生成的对象没有`nil`
*   测试：尝试`self.imageView setImage:im`代替`self.imageView addSubview:iv`，即使这不是您想要做的，如果其他一切正常，您应该会看到图像。

* * *

如果您切换和的顺序，它会
`UIImage* im = UIGraphicsGetImageFromCurrentImageContext();`
起作用
`CGContextDrawImage(con, CGRectMake(0, 0, 13, 13) ,num);`

否则，您将要求`im`使用上下文的内容进行创建，而其中没有任何内容。

然后代码将变为：

```
UIImage* testCard = [UIImage imageNamed:@"ipad 7D.JPG"];
CGImageRef num = CGImageCreateWithImageInRect([testCard CGImage],CGRectMake(532, 0, 104, 104));
UIGraphicsBeginImageContext(CGSizeMake( 250,650));
CGContextRef con = UIGraphicsGetCurrentContext();
CGContextDrawImage(con, CGRectMake(0, 0, 13, 13) ,num);
UIImage* im = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();
CGImageRelease(num); 
```

希望能帮助到你。:D

# leveldb - 为什么 LevelDB 需要两个以上的级别？

> ID：14305113
> 
> 赞同：11
> 
> 时间：2013-01-13T15:51:24.017
> 
> 标签：leveldb, okvs

我认为只有两个级别（级别 0 和级别 1）是可以的，为什么 LevelDB 需要级别 2、级别 3 等等？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-14T10:54:27.817

我将为您指明有关 LevelDB 及其底层存储结构的一些文章的方向。

因此，在[LevelDB 的文档中，](https://github.com/google/leveldb/blob/master/doc/impl.md) 它讨论了级别之间的合并。

> 这些合并具有将新更新从年轻级别逐渐迁移到仅使用批量读取和写入的最大级别的效果（即，最大限度地减少昂贵的查找）。

LevelDB 在结构上类似于[Log Structured Merge Trees](http://nosqlsummer.org/paper/lsm-tree)。如果您有兴趣对其进行分析，本文将讨论不同的级别。如果你能理解数学，那么理解数据结构似乎是你最好的选择。

更容易阅读的 levelDB[分析讨论了数据存储与 LSM 树的关系，但就您对级别的问题而言，它所说的只是：](http://www.igvita.com/2012/02/06/sstable-and-log-structured-storage-leveldb/)

> 最后，拥有数百个磁盘上的 SSTable 也不是一个好主意，因此我们将定期运行一个流程来合并磁盘上的 SSTable。

可能 LevelDB 文档提供了最好的答案：（最大化写入和读取的大小，因为 LevelDB 是磁盘上（慢速查找）数据存储）。

祝你好运！

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-05-08T19:44:57.073

我认为这主要与简单快速的关卡合并有关。

在 Leveldb 中，level-(i+1) 大约有。10 倍于 level-i 的数据。这更类似于多级缓存结构，如果数据库在键 x1 到 x2 之间有 1000 条记录，那么该范围内最常访问的 10 个记录将位于级别 1，而同一范围内的 100 个记录将是在第 2 级，在第 3 级休息（这并不准确，只是为了直观地了解关卡）。在此设置中，要合并级别-i 中的文件，我们最多需要查看级别-(i+1) 中的 10 个文件，并且可以将它们全部放入内存中，快速合并完成并写回。这些导致为每个压缩/合并操作读取相对较小的数据块。

另一方面，如果您只有 2 个级别，则一个级别 0 文件中的键范围可能与级别 1 中的 1000 个文件匹配，并且所有这些文件都需要打开以进行合并，这将非常慢。请注意，这里的一个重要假设是我们有固定大小的文件（比如 2MB）。使用级别 1 中的可变长度文件，您的想法仍然可行，我认为 HBase 和 Cassandra 等系统中使用了这种变体。

现在，如果您担心多级查找延迟，这又类似于多级缓存结构，最近写入的数据将位于更高级别以帮助典型的参考局部性。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-03-16T14:25:12.047

级别 0 是内存中的数据，其他级别是磁盘数据。重要的部分是对级别中的数据进行排序。如果 level1 由 3 个 2Mb 文件组成，那么在 file1 中，它是 file2 150..200 和 file3 300..400 中的键 0..50（已排序）（例如）。因此，当内存级别已满时，我们需要以最有效的方式将其数据插入磁盘，即顺序写入（使用尽可能少的磁盘寻道）。想象一下，在内存中我们有 60-120 键，很酷，我们只是将它们按顺序写入文件，然后在 level1 中变成 file2。非常有效率！但是现在想象 level1 比 level0 大得多（这是合理的，因为 level0 是内存）。在这种情况下，level1 中有很多文件。现在我们在内存中的键（60-120）属于许多文件，因为 level1 中的键范围非常细。现在要将 level0 与 level1 合并，我们需要读取许多文件并进行大量随机搜索，在内存中创建新文件并写入它们。所以这就是多层次想法发挥作用的地方，我们将有很多层，每一层都比前一个（x10）大一些，但不会大很多，所以当我们必须将数据从 i-1 迁移到第 i 层时，我们有一个必须阅读最少数量的文件的好机会。

现在，由于数据可能会更改，因此可能不需要将其传播到更高更昂贵的层（它可能会被更改或删除），因此我们完全避免了昂贵的合并。最终进入最后一层的数据在统计上变化的可能性最小，因此最适合与最后一层最昂贵的合并。

# c# - 在 SVG 中合并相似的标签

> ID：14305116
> 
> 赞同：0
> 
> 时间：2013-01-13T15:52:02.063
> 
> 标签：c#, svg

我有一个 SVG 文件包含大约 20000 个路径，如下所示：

```
<rect x="0" y="0" fill="#191915" width="1" height="1"/>
<rect x="0" y="1" fill="#191915" width="1" height="1"/>
<rect x="0" y="2" fill="#191915" width="1" height="1"/>
<rect x="0" y="3" fill="#191915" width="1" height="1"/>
<rect x="0" y="4" fill="#191915" width="1" height="1"/>
<rect x="0" y="5" fill="#191915" width="1" height="1"/>
<rect x="0" y="6" fill="#191915" width="1" height="1"/>
<rect x="0" y="7" fill="#FF00FF" width="1" height="1"/>
<rect x="0" y="8" fill="#191915" width="1" height="1"/>
<rect x="0" y="9" fill="#191915" width="1" height="1"/>
<rect x="0" y="10" fill="#191915" width="1" height="1"/>
<rect x="0" y="11" fill="#191915" width="1" height="1"/>
<rect x="0" y="12" fill="#191915" width="1" height="1"/> 
```

ETC...

每个标签都包含路径的位置、颜色填充以及它的宽度和高度（始终为 1 像素）我需要一个工具来自动将相似的连接标签彼此合并为一个标签，例如：

```
<polygon fill="#191915" points="0,0 0,1 0,2 0,3 0,4 0,5 0,6 1.6 1.5 1.4 1.3 1.2 1.1 1.0"\>
<rect x="0" y="6" fill="#FF00FF" width="1" height="1"/>
<polygon fill="#191915" points="0.8 0.9 0.10 0.11 0.12 1.12 1.11 1.10 1.9 1.8"\> 
```

# c# - KeyDow 上的 Windows 应用商店应用 OEM 密钥

> ID：14305118
> 
> 赞同：1
> 
> 时间：2013-01-13T15:52:05.073
> 
> 标签：c#, c++, windows-runtime

我正在编写一个 Windows 应用商店应用程序，为了使功能正常工作，我需要处理 +、-、*、/、？、！的 OEM 键。等在 KeyDown 事件处理程序中。但是 VirtualKey 类没有包含这些键，我找不到任何可以帮助的参考。如何识别这些密钥？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T21:40:51.907

不要**尝试**自己翻译虚拟按键。这在具有非标准键盘布局的机器上不会有好的结果。就像世界其他地区的其他 20 亿人一样。在分发有限的桌面应用程序中，您可能会忽略这一点，但不再是在全球销售的商店应用程序中。当您尝试时，您的应用程序可能不会通过商店验证。

不知道为什么要这样做，但 CoreWindow.CharacterReceived 事件往往很难找到。这是您获得可靠翻译所需要的。

# c# - 编写正则表达式命令以在 C# 中拆分数组

> ID：14305121
> 
> 赞同：0
> 
> 时间：2013-01-13T15:52:13.987
> 
> 标签：c#, .net, regex

正则表达式是我希望能够自己编写的东西之一，虽然我对它的工作原理有基本的了解，但我从来没有发现自己处于需要使用它的情况下，它还没有广泛存在在网络上（例如用于验证电子邮件地址）。

我遇到的一个问题是我收到了一个逗号分隔的字符串，但是一些字符串值也包含逗号。例如，我可能会收到：

> $COMMAND=1,2,3,"string","another,string",4,5,6

一般来说，我永远不会收到这样的东西，但是向我发送这个字符串数组的设备允许它发生，所以我希望能够在它发生时相应地拆分数组。

所以显然只是像这样拆分它（部分删除`rawResponse`的地方：`$COMMAND=`

```
string[] response = rawResponse.Split(','); 
```

还不够好！我认为正则表达式是完成这项工作的正确工具，有人可以帮我写吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T15:57:12.487

```
string rawResponse = @"1,2,3,""string"",""another,string"",4,5";
string pattern = @"[^,""]+|""([^""]*)""";
foreach(Match match in  Regex.Matches(rawResponse, pattern))
       // use match.Value 
```

结果：

```
1
2
3
"string"
"another,string"
4
5 
```

如果您需要将响应作为字符串数组，您可以使用 Linq：

```
var response = Regex.Matches(rawResponse, pattern).Cast<Match>()
                    .Select(m => m.Value).ToArray(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T16:14:49.423

```
string originalString = @"1,2,3,""string"",""another,string"",4,5,6";
string regexPattern = @"(("".*?"")|(.*?))(,|$)";
foreach(Match match in  Regex.Matches(originalString, regexPattern))
{

} 
```

# events - C++ 中的自定义事件/中断处理

> ID：14305122
> 
> 赞同：1
> 
> 时间：2013-01-13T15:52:17.253
> 
> 标签：events, opencv, user-interface

微控制器/嵌入式系统中是否有任何与低级中断等效的通用编程？

我隐约熟悉事件（鼠标事件等）的概念，它看起来很相似但不够笼统。是否有一种机制（本机或其他），特别是在 C/C++ 中，来处理自定义事件，即触发由用户定义的条件决定的事件，例如当鼠标指针移动到特定区域时发生了特定的用户操作？

为了提供一些上下文，我正在开发一个基于 OpenCV 的交互式项目，我想在用户指向屏幕上的特定位置时触发特定操作。

在视频流的每次迭代中检查指针当前是否位于屏幕上的某某位置似乎是一种特别的计算浪费，我想根据预定义的条件自动调用函数。

或者有没有其他（更有效的）机制可以改进这个过程？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T16:28:18.530

1.  C/C++ 中没有 microP 或 microC 中的中断编程。
2.  如果您的屏幕是触摸屏，那么您尝试获取操作系统的 SDK 或操作系统的 API，以便在触摸发生时得到通知。（操作系统内部维护了一个用于触摸或键盘按下或鼠标移动的中断表。我们可以编写我们想要在此类事件上执行的逻辑，仅此而已..）。
3.  如果它没有触摸，那么您必须使用传感器监控用户的位置，通常是摄像头（网络摄像头）。为此，您必须检查相机的每一帧以确定用户的位置。 **编辑 ：**
4.  你提到的是正确的方法。最好检查每一帧，否则你的系统响应会很慢。您可以将计数器分配为 1，并随每一帧增加它，并在达到任何所需值时将其重置。这几乎等同于无限循环。
5.  或者你可以接受键盘上的一些键来打破循环（OpenCV 有这样的功能）
6.  一种更高级的方法是在与执行程序的主线程不同的线程中从相机中抓取帧。所以你需要做的就是启动和停止那个线程。

# java - 通过将 Array 转换为 List，添加元素并再次将其转换回来，将元素添加到 Array

> ID：14305124
> 
> 赞同：0
> 
> 时间：2013-01-13T15:52:22.437
> 
> 标签：java, arrays, list

我需要将 en int 元素添加到数组中。

我想过将数组转换为arrayList，添加int，然后再次将arrayList转换为数组。

正如所料，我完全失败了。

aGrades 是一个数组，lGrades 是一个 ArrayList

```
// add one grade from 1-5
    public void enter (int grade){
    ArrayList<Integer> lGrades = new ArrayList<Integer>(Arrays.asList(aGrades));
    lGrades.add(grade);
    aGrades = listArray.toArray(lGrades);
  } 
```

现在的错误是：

```
Histo.java:28: error: no suitable constructor found for ArrayList(List<int[]>)
    ArrayList<Integer> lGrades = new ArrayList<Integer>(Arrays.asList(aGrades));
                                 ^
constructor ArrayList.ArrayList(Collection<? extends Integer>) is not applicable
  (actual argument List<int[]> cannot be converted to Collection<? extends Integer> by method invocation conversion)
constructor ArrayList.ArrayList() is not applicable
  (actual and formal argument lists differ in length)
constructor ArrayList.ArrayList(int) is not applicable
  (actual argument List<int[]> cannot be converted to int by method invocation conversion)
Histo.java:30: error: incompatible types
    aGrades = lGrades.toArray(new Integer[lGrades.size()]);
                             ^
  required: int[]
  found:    Integer[] 
```

这可能是一团糟，但我已经搜索了很多关于这个的线程，现在我很困惑。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T16:04:40.123

如果您的问题是编译时错误，则位于以下行：

```
aGrades = listArray.toArray(lGrades); 
```

只需替换为：

```
aGrades = lGrades.toArray(new Integer[lGrades.size()]); 
```

虽然我建议`List<Integer>`首先使用 a 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T16:05:11.183

If you need to add elements to your array, you are probably better off just using and `ArrayList` instead of converting back and forth. If for some reason you don't want to do that though, a more efficient way to lengthen your array would be something like this:

```
int [] newAGrades = new int[aGrades.length + 1];

System.arraycopy(aGrades, 0, newAGrades, 0, aGrades.length);

newAGrades[aGrades.length] = grade;

aGrades = newAGrades; 
```

Although, again, just using an `ArrayList` would be a far better idea:

```
aGrades.add(grade) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T16:09:14.277

try

```
 aGrades = Arrays.copyOf(aGrades, aGrades.length + 1);
    aGrades[aGrades.length - 1] = grade; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-13T22:32:19.513

As others have stated, your best bet is to use an ArrayList with Integer objects. If you want to stick with an array of int primitives, you'd be better off managing the resizing yourself with the arrays.

```
 // add one grade from 1-5
  public void enter (int grade){
    int[] aGradesTmp = new int[aGrades.length+1];
    System.arraycopy(aGrades, 0, aGradesTmp, 0, aGrades.length);
    aGradesTmp[aGrades.length] = grade;
    aGrades = aGradesTmp;
  } 
```

What you are doing above is memory and processor inefficient. This workaround is memory inefficient, but more efficient on the processor since System.arraycopy() is implemented as a native method.

Ultimately you just want to stay away from arrays whenever you can and just use the collection classes.

# json - Neo4j 节点属性包含原始 json 作为元数据

> ID：14305125
> 
> 赞同：4
> 
> 时间：2013-01-13T15:52:24.563
> 
> 标签：json, neo4j, cypher

这是否可以将节点属性作为 json 原始字符串并使用 cypher 对其进行过滤？我有一个具有一些已定义属性和元数据（json 原始字符串）的节点。我想选择或过滤这些元数据属性。这是这样的：

```
START movie=node:TYPE_INDEX(Type = 'MOVIE') // Start with the reference
MATCH movie-[t:TAG]->tag 
WHERE collect(movie.Metadata).RatingPress > 3
RETURN distinct movie.Label 
```

元数据是这样的：

```
{"RatingPress" : "0","RatingSpectator" : 3"} 
```

我希望使用 collect 函数来调用这样的属性：

```
collect(movie.Metadata).RatingPress 
```

但是，当然失败了……

这是一种将节点属性中的一些 json 字符串与 cypher 绑定的方法吗？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T16:21:47.903

这违背了属性的原则。为什么不直接在节点上设置 JSON 元数据中的属性？

但要回答你的问题：

不，cypher 不了解 JSON。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-15T17:52:16.107

我们将整个 Node 视为 JSON blob。由于 Neo4j 不支持分层属性，我们在保存时将 JSON 扁平化为分隔的属性名称，并在读取时将它们展开。然后，您可以在（例如）属性名称“foo.bar.baz”上形成 Cypher 查询。查询往往看起来有点古怪，因为您需要使用单反引号来引用它们，但它确实有效。

# java - ImageView 在不应该拉伸时被拉伸 - Android

> ID：14305126
> 
> 赞同：0
> 
> 时间：2013-01-13T15:52:27.867
> 
> 标签：java, android, imageview

第 0 列应该是红色 x 或绿色复选标记的图片。出于测试目的，我只为第 1 行放了一张图片。如下图所示，红色的 x 图像是长方形。我希望它是一个小方形图像。即使我将 layout_width 和 layout_height 分别设置为 50dp、10dp 或在我的代码中如下所示，图像似乎与下面显示的相同。图片的尺寸是 100x100 PNG 图片——如果重要的话。

我的问题是为什么要拉伸图像，我将如何使它成为一个小方形图像。预先感谢您的帮助！

结果.java

```
ImageView q1Image = (ImageView)findViewById(R.id.q1Image);
q1Image.setScaleType(ImageView.ScaleType.FIT_CENTER); 
```

结果main.xml

```
<TableRow
    android:id="@+id/row4"
    android:layout_width="0dip"
    android:layout_height="wrap_content"
    android:stretchColumns="0,1,2,3"
    android:layout_weight="1" >

    <ImageView
        android:id="@+id/q1Image"
        android:layout_width="5dp"
        android:layout_height="10dp"
        android:layout_weight=".1" />

    <TextView
        android:id="@+id/q1Question"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_weight=".5"
        android:textSize="8sp" />

    <TextView
        android:id="@+id/q1Answer"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_weight=".2"
        android:textSize="8sp"
        android:gravity="center_horizontal" />

    <TextView
        android:id="@+id/q1Verse"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_weight=".2"
        android:textSize="8sp"
        android:gravity="center_horizontal" />
</TableRow> 
```

![在此处输入图像描述](../Images/be452e54e83fc766bf6b7b0d1e1002e2.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T16:26:44.020

**尝试这个：**

```
<TableRow
    android:id="@+id/row4"
    android:layout_width="0dip"
    android:layout_height="wrap_content"
    android:stretchColumns="0,1,2,3"
    android:weightSum="1" >

    <ImageView
        android:id="@+id/q1Image"
        android:layout_width="5dp"
        android:layout_height="10dp"
        android:layout_weight=".1"
       />

    <TextView
        android:id="@+id/q1Question"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_weight=".5"
        android:textSize="8sp" />

    <TextView
        android:id="@+id/q1Answer"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_weight=".2"
        android:textSize="8sp"
        android:gravity="center_horizontal" />

    <TextView
        android:id="@+id/q1Verse"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_weight=".2"
        android:textSize="8sp"
        android:gravity="center_horizontal" />
</TableRow> 
```

# javascript - 如何使用 JSONP

> ID：14305128
> 
> 赞同：2
> 
> 时间：2013-01-13T15:52:48.517
> 
> 标签：javascript, ajax, cross-domain, jsonp

我有以下代码

```
function exista(word) {
    alert(word);
    var exists = 1;
    jQuery.ajax({
        async: false, 
        url: "http://api.wordreference.com/0.8/key/json/roen/" + word,
        dataType: 'json',
        method: "GET",
        success: function(transport) {
            if (transport.Error || transport.Response)
                exists = 0;
        }

    });
    return exists;
} 
```

它验证字典中是否存在单词。问题是它给出了 Access-Control-Allow-Origin 错误。从我收集的信息来看，我似乎必须使用 JSONP，但我无法真正弄清楚如何使用（抱歉，我才刚刚开始学习 JavaScript 等等）。那么，对如何修改上述代码有任何想法吗？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T15:55:25.463

你`dataType`应该是`jsonp`，而不是'json'。

**更新**

根据[http://www.wordreference.com/docs/api.aspx](http://www.wordreference.com/docs/api.aspx)：

> 此外，对于 JSPONp，JSON API 可以在查询字符串中采用可选的回调函数；只需将“?callback={yourCallback}”添加到 URL 的末尾。

所以 API 确实支持 JSONP。

此外，JSONP 表示“带有填充的 JSON”，因此您将收到 JSON 响应。JSONP 仅允许使用[CORS](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)。

通过将您更改[`dataType`](http://api.jquery.com/jQuery.ajax/)为`jsonp`：

> “jsonp”：使用 JSONP 加载到 JSON 块中。添加一个额外的“？callback =？” 到 URL 的末尾以指定回调。通过将查询字符串参数“_=[TIMESTAMP]”附加到 URL 来禁用缓存，除非缓存选项设置为 true。

您可以通过使用设置指定一个来覆盖默认回调`jsonpCallback`。

最后，您还应该添加一个错误处理程序并设置`async`为`true`：

```
jQuery.ajax({
    "async": true, //cannot be false for JSONP
    "url": "http://api.wordreference.com/0.8/key/json/roen/" + word,
    "dataType": 'jsonp',
    "method": "GET",
    "error": function (jqXHR, textStatus, errorThrown) {
        //included so you can see any errors
        console.log(textStatus + ': ' + errorThrown);
    },
    "success": function (data, textStatus, jqXHR) {
        //According to API documentation
        //data will not likely contain either Error, or Response
        //so, exists will likely not change to 0
        if (data.Error || data.Response) {
            exists = 0;
        }
    }
}); 
```

**更新：**

错误和“需要同步”的解决方案将是[Pointy](https://stackoverflow.com/users/182668/pointy)之前指出的。您必须创建一个与您的脚本在同一域上运行的服务器端代理。

服务器端代理可以返回 JSONP，但坦率地说，简单地返回 JSON 或 XML 更简单，因为[CORS](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)不是问题，并且代理可以是同步的。对于 PHP 示例脚本，[Yahoo! Developer Network](http://developer.yahoo.com/)托管[一个简单代理的源代码](http://developer.yahoo.com/javascript/samples/proxy/php_proxy_simple.txt)。

对于有关服务器端 Web 服务代理的任何其他内容，您需要指定您正在使用的服务器语言（它可能更适合作为不同的问题）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T15:55:18.380

要使 JSONP 正常工作，您不仅需要为它编写代码，而且*您*的目标站点也必须期望以这种方式使用，并相应地响应请求。

如果其他站点还没有 JSONP API，并且您无法控制它，那么 JSONP 不是一个答案。您必须创建自己的服务器端代理。

*编辑*——根据网站，他们确实支持 JSONP。您只需要添加“？callback =？” 到 URL 的末尾。

# c# - Sql Server精简版查询错误

> ID：14305130
> 
> 赞同：1
> 
> 时间：2013-01-13T15:53:15.167
> 
> 标签：c#, sql-server-ce

解析查询时出错。`[ Token line number = 1,Token line offset = 51,Token in error = select ]`

这是我的查询：

```
select * from SystemSettings where remainingtime=(select min(remainingtime)
from SystemSettings where remainingtime >=@available) 
```

此查询在 Sql Server 数据库中工作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T15:58:14.437

SQL Server CE 不支持嵌套查询。对不起。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-05T09:42:07.703

如此处所述[http://technet.microsoft.com/en-us/library/ms172417.aspx](http://technet.microsoft.com/en-us/library/ms172417.aspx)

Ms SQL Server CE 3.5 版本支持嵌套查询，但仅限于 FROM 子句 exmp。FROM=（选择语句）

# java - 通过浏览器连接小程序 <-> 数据库

> ID：14305132
> 
> 赞同：0
> 
> 时间：2013-01-13T15:53:47.380
> 
> 标签：java, mysql, jdbc, applet, database-connection

我的小程序有问题。它在小程序查看器中运行良好，但在`Web browser`它引发异常。

异常详情：

```
`SQLException: No suitable driver found for jdbc:mysql://s46.eatj.com:3307/cmentarz
Exception in thread "AWT-EventQueue-2" java.lang.NullPointerException
at JDBC.LogIn(JDBC.java:49)
at AdminPanelLogIn$1.actionPerformed(AdminPanelLogIn.java:64)
at javax.swing.AbstractButton.fireActionPerformed(Unknown Source)
at javax.swing.AbstractButton$Handler.actionPerformed(Unknown Source)
at javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source)
at javax.swing.DefaultButtonModel.setPressed(Unknown Source)
at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(Unknown Source)
at java.awt.Component.processMouseEvent(Unknown Source)
at javax.swing.JComponent.processMouseEvent(Unknown Source)
at java.awt.Component.processEvent(Unknown Source)
at java.awt.Container.processEvent(Unknown Source)
at java.awt.Component.dispatchEventImpl(Unknown Source)
at java.awt.Container.dispatchEventImpl(Unknown Source)
at java.awt.Component.dispatchEvent(Unknown Source)
at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)
at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)
at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)
at java.awt.Container.dispatchEventImpl(Unknown Source)
at java.awt.Component.dispatchEvent(Unknown Source)
at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
at java.awt.EventQueue.access$200(Unknown Source)
at java.awt.EventQueue$3.run(Unknown Source)
at java.awt.EventQueue$3.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
at java.awt.EventQueue$4.run(Unknown Source)
at java.awt.EventQueue$4.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
at java.awt.EventQueue.dispatchEvent(Unknown Source)
at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.run(Unknown Source)` 
```

我已经使用 JARmaker 签署了我的 jar 文件。

我的`getConnection`方法代码：

```
public Connection getConnection() throws SQLException {

    try {
        Class.forName("com.mysql.jdbc.Driver");
    } catch (java.lang.ClassNotFoundException e) {
        System.err.print("ClassNotFoundException: ");
        System.err.println(e.getMessage());
    }

    try {
        con = DriverManager.getConnection(url, userid, password);
    } catch (SQLException ex) {
        System.err.println("SQLException: " + ex.getMessage());
    }
    return con;
} 
```

`Userid`，`password`并且`url`是正确的，因为它适用于小程序查看器。

`static String url = "jdbc:mysql://s46.eatj.com:3307/cmentarz";`

那么，可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T16:03:38.797

确保`MySQL`在浏览器中运行时，该 jar 可用于您的小程序。你可以在你的`applet`（或`object`）标签中指定这个：

```
<applet code="org.package.MyApplet" width="800" height="600" archive="myappletjar.jar,mysql-connector-java-5.1.6-bin.jar">
</applet> 
```

还要确保 jar 文件与您的 applet jar 文件存在于同一位置，以便可以下载。

# linux - 为 AWS 选择共享 Linux AMI 机器映像

> ID：14305134
> 
> 赞同：0
> 
> 时间：2013-01-13T15:53:53.950
> 
> 标签：linux, apache, amazon-web-services, amazon-ec2, web-hosting

我对服务器管理几乎一无所知，并且刚刚开始使用 Amazon Web Services。

我想部署一个运行 Apache、MySQL、phpMyAdmin 以及电子邮件功能（帐户管理和 webmail 界面）和备份功能的 Linux 服务器。我想用像 cPanel 这样**漂亮的 Web 用户界面来管理服务器，执行文件管理、电子邮件帐户管理、访问 phpMyAdmin 等操作。**

因此，我考虑部署一个共享的 Linux AMI，而不是自己构建和配置服务器。我想让我的生活变得轻松，也就是说，部署一些易于管理的预先存在的东西（Web 用户界面），因为我现在没有时间学习所有关于服务器管理的知识。

我找到[了这张](https://aws.amazon.com/amis?platform=Red+Hat&selection=platform)图片列表。其中哪一项符合我的要求？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T19:02:29.600

这是一个不适合 EC2 的用例。正如亚马逊首席技术官 Werner Vogels 几个月前所说，*“EC2 实例不是服务器，它是一个构建块。”* EC2 用于为跨多个松散耦合服务的应用程序提供计算资源。它不是标准 VPS 的替代品。

这并不是说很多人没有使用 EC2 实例作为服务器。然而，这些人通常是同样的人，他们痛苦地抱怨 AWS 停机时间过长，却没有意识到这主要是他们自己的错。当应用程序构建在 AWS 等 IaaS 平台上时，它**必须**设计为部署在基于云的环境中。如果您的应用程序不知道自动扩展组和其他高可用性功能，那么传统的专用托管将比 AWS 更便宜、更简单且更耐用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T17:02:52.740

我知道 AMI 用于 webmin，但不知道用于 cPanel。链接在这里：

[https://www.virtualmin.com/documentation/aws/virtualmin_gpl_ami](https://www.virtualmin.com/documentation/aws/virtualmin_gpl_ami)

我会回应@jamieb 的评论，但是这对于 EC2 来说确实不是一个好的用例。每个实例仅限于一个弹性 IP，因此您无法像使用典型 VPS 那样创建基于 IP 的虚拟主机。

# maven - 将码头嵌入战争文件的最佳方法是什么？

> ID：14305136
> 
> 赞同：3
> 
> 时间：2013-01-13T15:53:56.417
> 
> 标签：maven, jetty

我正在尝试将码头嵌入战争文件中，以便我可以从命令行启动它，但我正在努力。我正在使用maven，以前有人这样做过吗？

谢谢！斯蒂芬

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T16:18:16.307

我不知道你是否已经这样做了，但据我记得，你需要将你的 war 文件中*提供*的所有依赖项复制为 jetty 插件的直接依赖项。

提供有关您当前架构和问题的更多详细信息可能会有所帮助...

# java - 将值插入文本字段 SQLServer 2008

> ID：14305140
> 
> 赞同：0
> 
> 时间：2013-01-13T15:54:25.650
> 
> 标签：java, sql-server, sql-server-2008, prepared-statement

我正在使用准备好的语句将记录插入到 SQL Server 2008 表中。

我一般插入值的逻辑是首先获取表元日期并获取所有字段类型，然后根据字段类型将值设置为准备好的 statemnt。

这是“文本”的示例

```
if(table.type_list.get(i).toUpperCase().equals("TEXT"))
{
    type = java.sql.Types.CHAR;
        prd.setString(i+1, value);
} 
```

我的问题是对于“文本”字段，我应该使用什么类型（即 java.sql.types.???），我应该使用什么样的集合？

我的代码示例中的一个抛出异常：“字符串或二进制数据将被截断”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T16:04:17.083

我认为[这个问题](https://stackoverflow.com/questions/6772594/what-is-the-java-sql-types-equivalent-for-the-mysql-text.)与您的问题非常相似。您遇到的问题`Types.CHAR`实际上是一个字符（代码中指定的最大长度在哪里？）并且您正在尝试绑定整个字符串。

# mysql - Codeigniter mysql插入查询剥离字符串

> ID：14305144
> 
> 赞同：1
> 
> 时间：2013-01-13T15:54:54.807
> 
> 标签：mysql, codeigniter, xss

## 添加了示例代码

请阅读下面的详细信息，这是一个示例函数，可以放入生成相同结果的控制器中。数据库结构进一步向下发布：

```
public function test()
    {
        if(isset($_POST['comment_original']))
        {
            $this->load->library('form_validation');

            $comment_original = $this->form_validation->xss_clean(html_escape($_POST['comment_original']));

            var_dump($comment_original);

            $this->db->insert('comments', array(
                'comment_set_id'        =>  2993,
                'comment_user_id'       =>  40,
                'comment_original'      =>  $comment_original,
                'comment_enabled'       =>  1,
                'comment_is_spam'       =>  0,
                'comment_time_added'    =>  1358090826,
                'comment_time_updated'  =>  1358090826
            ));

            var_dump($this->db->last_query());
        }

        $this->output->set_output('<form method="post">
            <textarea name="comment_original"></textarea>
            <br />
            <input type="submit" />
        </form>');
    } 
```

## 原来的问题

嘿伙计们，当我尝试将这样的字符串插入到我的数据库中时，插入到 TEXT 列中。

> [http://img.chronofoot.com/éric-di-meco/interview-eric-di-meco_66454_w250.jpg](http://img.chronofoot.com) _

它在数据库中结束为：

> [http://img.chronofoot.com/](http://img.chronofoot.com/)

我已经完成了 $this->db->last_query() 以显示 Codeigniter 正在运行什么查询，它返回：

```
INSERT INTO `comments` (`comment_set_id`, `comment_user_id`, `comment_original`, `comment_html`, `comment_enabled`, `comment_is_spam`, `comment_time_added`, `comment_time_updated`, `comment_ip_address`) VALUES (2993, 40, 'http://img.chronofoot.com/éric-di-meco/interview-eric-di-meco_66454_w250.jpg', 'http://img.chronofoot.com/éric-di-meco/interview-eric-di-meco_66454_w250.jpg', 1, 0, 1358090826, 1358090826, 'XXX') 
```

因此，在尝试插入之前，它似乎没有被剥离。将那个确切的字符串放入 php 我的管理员用完整的字符串插入就好了。

有人知道为什么会这样吗？

## 额外的信息

它将删除“é”之后的任何内容，因此同样的事情也会发生在这样的字符串上：

> [http://img.chronofoot.com](http://img.chronofoot.com) /éric-di-meco/interview-eric-di-meco_66454_w250.jpg 这是额外的虚拟文本

表单中发布的字符串实际上是这样的：

> [http://img.chronofoot.com/%E9ric-di-meco/interview-eric-di-meco_66454_w250.jpg](http://img.chronofoot.com/%E9ric-di-meco/interview-eric-di-meco_66454_w250.jpg)

但是 xss_clean 将 %E9 转换为 é 这实际上不是我想要的，但我想对核心 xxs_clean 函数做任何事情。

最后一点，这就是我的桌子的样子，尽管我认为这没有任何区别：

```
CREATE TABLE IF NOT EXISTS `comments` (
  `comment_id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `comment_set_id` int(10) unsigned NOT NULL,
  `comment_user_id` mediumint(6) unsigned NOT NULL,
  `comment_original` text NOT NULL,
  `comment_html` text NOT NULL,
  `comment_attachments` text,
  `comment_time_added` int(10) unsigned NOT NULL,
  `comment_time_updated` int(10) unsigned NOT NULL,
  `comment_enabled` tinyint(1) NOT NULL DEFAULT '1',
  `comment_is_spam` tinyint(1) NOT NULL DEFAULT '0',
  `comment_has_attachments` tinyint(1) NOT NULL DEFAULT '0',
  `comment_has_edits` tinyint(1) NOT NULL DEFAULT '0',
  `comment_ip_address` varchar(64) DEFAULT NULL,
  PRIMARY KEY (`comment_id`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 
```

## 更新的问题：转义 HTML

只是想我会提供一些额外的信息。

所以就像我说的实际发布的字符串是这样的：

> [http://img.chronofoot.com/%E9ric-di-meco/interview-eric-di-meco_66454_w250.jpg](http://img.chronofoot.com/%E9ric-di-meco/interview-eric-di-meco_66454_w250.jpg)

这通过 html_escape 和 xss_clean。如果我先通过 xss_clean 然后它返回一个空字符串

```
var_dump($this->form_validation->xss_clean(html_escape($_POST['comment_original'])))
//Returns http://img.chronofoot.com/éric-di-meco/interview-eric-di-meco_66454_w250.jpg 
```

首先是 xss_clean

```
var_dump(html_escape($this->form_validation->xss_clean($_POST['comment_original'])))
//Returns '' 
```

htmlentities 将以某种方式解决它，因为它将字符串转换为：

> [http://img.chronofoot.com/éric-di-meco/interview-eric-di-meco_66454_w250.jpg](http://img.chronofoot.com/éric-di-meco/interview-eric-di-meco_66454_w250.jpg)

但是这个表单只是添加评论，所以可以添加任意数量的文本和 htmlentities，所以如果发布这样的内容：

> 这不起作用[http://img.chronofoot.com/%E9ric-di-meco/interview-eric-di-meco_66454_w250.jpg](http://img.chronofoot.com/%E9ric-di-meco/interview-eric-di-meco_66454_w250.jpg)

html_escape() 会将其转换为此

> 这不起作用[http://img.chronofoot.com/%E9ric-di-meco/interview-eric-di-meco_66454_w250.jpg](http://img.chronofoot.com/%E9ric-di-meco/interview-eric-di-meco_66454_w250.jpg)

xss_clean() 然后将其转换为此

> 这不起作用[http://img.chronofoot.com](http://img.chronofoot.com) /éric-di-meco/interview-eric-di-meco_66454_w250.jpg

然后 htmlentities() 会将其转换为：

> 这不会工作[http://img.chronofoot.com/éric-di-meco/interview-eric-di-meco_66454_w250.jpg](http://img.chronofoot.com/éric-di-meco/interview-eric-di-meco_66454_w250.jpg)

这当然会破坏“不会”这个词，因为＆符号将被转换两次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T17:27:46.487

尝试这个：

```
$array =  array(
                'comment_set_id'        =>  2993,
                'comment_user_id'       =>  40,
                'comment_enabled'       =>  1,
                'comment_is_spam'       =>  0,
                'comment_time_added'    =>  1358090826,
                'comment_time_updated'  =>  1358090826
            );
$this->db->set('comment_original',$comment_original,FALSE);
$this->db->set($array);
$this->db->insert('comments'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T08:04:51.643

是否有任何理由在 $this->input->post() 上使用 $_POST？然后您可以将表单验证规则与 xss_clean 一起使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T16:21:36.543

您应该`urlencode()`在将数据插入表时使用 URL 编码，并`urldecode()`在选择数据后使用。

它更干净，您不必担心特殊字符。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-13T16:44:09.417

在将它传递给数据库之前，尝试使用 htmlentities 转换该 url。

```
$comment_html = htmlentities($string); 
```

另外，确保你 var_dump（不是 echo）$this->db->last_query()。特殊字符会以不同的方式输出。

```
var_dump($this->db->last_query()); 
```

# android - ViewPager 导航按钮

> ID：14305150
> 
> 赞同：1
> 
> 时间：2013-01-13T15:55:44.120
> 
> 标签：android, button, swipe, pager

我的 xml-pager 文件中已经有两个按钮“左”和“右”。我想设置它们：当我点击“左”按钮时，页面自动向左滑动，当我点击“右”按钮时它会自动向右移动.. 有人可以给我代码以放入我的活动文件吗？谢谢你！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-13T16:10:51.880

要转到下一页/上一页，请使用以下内容：

```
private void nextPage() {
    int currentPage = viewPager.getCurrent();
    int totalPages = viewPager.getAdapter().getCount();

    int nextPage = currentPage+1;
    if (nextPage >= totalPages) {
        // We can't go forward anymore.
        // Loop to the first page. If you don't want looping just
        // return here.
        nextPage = 0;
    }

    viewPager.setCurrentItem(nextPage, true);
}

private void previousPage() {
    int currentPage = viewPager.getCurrent();
    int totalPages = viewPager.getAdapter().getCount();

    int previousPage = currentPage-1;
    if (previousPage < 0) {
        // We can't go back anymore.
        // Loop to the last page. If you don't want looping just
        // return here.
        previousPage = totalPages - 1;
    }

    viewPager.setCurrentItem(previousPage, true);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-08T02:43:20.550

对于 android.support.v4，您可以使用以下内容：

```
ViewPager pager;
pager = (ViewPager) findViewById(R.id.viewPager);       
pager.setAdapter(new MyPagerAdapter(getSupportFragmentManager())); 
```

有一个像这样的 veiwpager 适配器类：

```
private class MyPagerAdapter extends FragmentPagerAdapter {

    public MyPagerAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public Fragment getItem(int pos) {

        switch(pos)
        {
            case 0: return WelcomeFrag1.newInstance("Page 1");
            case 1: return WelcomeFrag2.newInstance("Page 2");
            case 2: return WelcomeFrag3.newInstance("Page 3");
            case 3: return WelcomeFrag4.newInstance("Page 4");
            case 4: return WelcomeFrag5.newInstance("Page 5");
            default: return WelcomeFrag1.newInstance("Page 1");
        }           
    }

    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return 5;
    }       
} 
```

最后有两个方法 nextPage() 和 previousPage() 像这样：

```
private void nextPage() {
    int currentPage = pager.getCurrentItem();
    int totalPages = pager.getAdapter().getCount();

    int nextPage = currentPage+1;
    if (nextPage >= totalPages) {
        // We can't go forward anymore.
        // Loop to the first page. If you don't want looping just
        // return here.
        nextPage = 0;
    }

    pager.setCurrentItem(nextPage, true);
}

private void previousPage() {
    int currentPage = pager.getCurrentItem();
    int totalPages = pager.getAdapter().getCount();

    int previousPage = currentPage-1;
    if (previousPage < 0) {
        // We can't go back anymore.
        // Loop to the last page. If you don't want looping just
        // return here.
        previousPage = totalPages - 1;
    }

    pager.setCurrentItem(previousPage, true);
} 
```

注意：我使用 getCurrentItem() 来获取当前页面的索引

# c# - C# 语法 - 带索引器的类名？

> ID：14305152
> 
> 赞同：0
> 
> 时间：2013-01-13T15:56:10.913
> 
> 标签：c#

这可能是一个愚蠢的问题，但在这里。我的程序中有这样的声明：

```
 // No node should be shown as selected
 mdxTreeList.Selection.Set(new TreeListNode[0]); 
```

变量 mdxTreeList 是 DevExpress XtraTreeList.TreeList 控件的一个实例，TreeListNode 是另一个 DevExpress 类的名称。但是语法“new TreeListNode[0]”到底是什么意思呢？我会认为这是一个语法错误，但它工作正常。（如果我没记错的话，这句话最初来自一个 DevExpress 示例程序。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T15:56:54.683

`TreeListNode[]`这只是一个具有零元素的类型数组。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-13T15:57:46.980

它是一个长度为零的一维数组（即零个成员）。类型是`TreeListNode[]`。

有些人更喜欢写相同的东西，`new TreeListNode[] { }`但这只是一个品味问题。

顺便说一句，由于[`static`C# 中不允许使用索引器](https://stackoverflow.com/questions/154489)，因此这不可能是索引器访问。（当然，索​​引器*旨在*“看起来像”数组，因此两者都使用方括号`[]`语法并非偶然。）

# ios - 在应用中使用多个 UISplitViewController

> ID：14305153
> 
> 赞同：0
> 
> 时间：2013-01-13T15:56:16.507
> 
> 标签：ios, uiviewcontroller, uisplitviewcontroller, uitabbar

我正在寻找在 iOS 应用程序中的多个 UISplitViewControllers 之间切换的最佳方式。

我听说 Apple 不希望 UISPlitViewControllers 不是 rootViewControllers，所以我不能使用 UITabBar。有什么想法我可以使用吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T17:28:30.730

您可以使用 self.view.window.rootViewController = myNewSplitViewController; 切换到代码中的新代码（从按钮或其他）

# mysql - MySQL控制台中的级联删除

> ID：14305158
> 
> 赞同：0
> 
> 时间：2013-01-13T15:56:52.457
> 
> 标签：mysql, sql

为了保持参照完整性，我在几个表上设置了外键约束，*没有* `ON CASCADE DELETE`.

但是有时我想放松一下，主要的例子是在开发环境中我想创建生产数据集的修剪/清理副本。所以我希望能够做类似的事情：

```
DELETE FROM x WHERE foo = 'bar' 
```

并删除另一个表`y`中引用已删除行的行`x`。目前，在我的约束到位的情况下，这失败了：

```
Cannot delete or update a parent row: a foreign key constraint fails 
```

有没有办法在 MySQL 中做到这一点而不改变表？我隐约记得`DELETE CASCADE FROM x WHERE foo = 'bar'`Oracle 或 Postgres 之类的东西，但我不确定如何在 MySQL 中执行此操作。

我知道`FOREIGN_KEY_CHECKS = 0`，但这只会将悬空引用留在`y`; 我希望他们被删除。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T16:00:54.913

尝试这个，

```
DELETE x, y
FROM  x 
      INNER JOIN y ON x.foo = y.foo
WHERE x.foo = 'bar' 
```

# sql - sql查询中的正则表达式和变量

> ID：14305160
> 
> 赞同：-1
> 
> 时间：2013-01-13T15:57:00.553
> 
> 标签：sql, regex, variables, sql-like

我正在尝试在段落中搜索一个单词：

`WHERE paragraph LIKE '%$term%'`

但是如果我正在搜索“in”，因为`$term`我也会得到“against”、“reading”等，所以我想要空格之间的 $term。`% $term %`似乎不起作用，并且该术语可以在标点符号之前或之后。

我阅读了`RLIKE`or `REGEXP_LIKE`，但是可以在变量周围使用正则表达式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T17:55:49.583

您应该使用 mysqli[准备好的语句](http://php.net/manual/en/mysqli.quickstart.prepared-statements.php)来避免 SQL 注入漏洞：

```
$stmt = $db->prepare("select * from table where paragraph regexp ?")
$stmt->bind_param('s', "[,. ]{$term}[,. ]") 
```

# smali - 法律标签名称 smali

> ID：14305161
> 
> 赞同：0
> 
> 时间：2013-01-13T15:57:01.247
> 
> 标签：smali

smali 标签的法定名称是什么？

我知道`a-z`并且`_`是合法的并且`\n`不明显，但是关于标签名称有什么规则吗？

我知道字节码不使用标签，dalvik 汇编器（smali）将其转换为文件中的位置，所以这并不重要，但是 smali 会接受什么作为标签名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T00:32:54.917

Smali 对标签名称使用与任何其他标识符相同的字符集。[有效字符在dex 规范](http://source.android.com/tech/dalvik/dex-format.html)的 SimpleName 部分中定义。

```
SimpleName → SimpleNameChar (SimpleNameChar)*
SimpleNameChar →
    'A' … 'Z'
  | 'a' … 'z'
  | '0' … '9'
  | '$'
  | '-'
  | '_'
  | U+00a1 … U+1fff
  | U+2010 … U+2027
  | U+2030 … U+d7ff
  | U+e000 … U+ffef
  | U+10000 … U+10ffff 
```

# html - 有什么方法可以从 EPUB 中检测 iBooks 中的深色主题是否处于活动状态？

> ID：14305164
> 
> 赞同：3
> 
> 时间：2013-01-13T15:57:24.067
> 
> 标签：html, publishing, epub, ibooks

iBooks 是否添加了诸如 CSS 类之类的东西或其他任何东西，以便在夜间模式处于活动状态时能够以不同的方式（以较浅的颜色）对书的某些部分进行样式设置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-11-23T17:19:25.410

iBooks 为元素添加了一个`__ibooks_internal_theme`属性，该属性`:root (html)`的值随所选主题而变化。

继续这个：

```
:root[__ibooks_internal_theme*="Sepia"]    
:root[__ibooks_internal_theme*="Night"] 
```

您可以在 GitHub 上找到更多详细信息：[theme-detect.css](https://gist.github.com/adaptivegarage/aef95223fab9a39db45f)

我最终将添加有关这三个主题的 CSS 限制的详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T11:41:48.867

## 计算样式

你可以尝试做一个`window.getComputedStyle(document.body).backgroundColor`. 这未经测试。

编辑：关于 getComputedStyle，我的错误 - 背景颜色（假设这是 iBooks 使用的）不是继承的，所以 getComputedStyle 不会给你买任何东西。由于 HTML 元素上的样式具有不同级别的支持（HTML4 在技术上甚至不允许 HTML 元素 AFAIK 上的样式属性），理论上您的继承技巧可能不起作用。我会坚持一个

```
alert(document.documentElement.style.backgroundColor); 
```

看看会出现什么。另一种蛮力方法是做一个

```
alert(document.documentElement.outerHTML); 
```

您将在警报框中获得大量内容，但它应该会为您滚动，您可能会在其中看到有用的内容。

FWIW，Readium 显然在 html 元素上使用背景颜色为 rgb(20,20,20) 的夜间模式。

## 媒体查询

据悉，苹果引入了专有的媒体查询“分页”和“非分页”来检测用户是否在使用 iBooks 3.0 中的新滚动模式。它**可能**已经为黑暗主题（实际上称为“夜晚”）引入了媒体查询，但我只是猜测。无论如何，据我所知，没有办法枚举媒体查询，因此试图找到它将是一个纯粹的试错过程。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-16T02:33:35.943

没有 iBooks 的帮助，您可以为夜间模式添加另一个 css。只需在

```
<link rel="stylesheet" href="nightmode.css" class="night" /> 
```

另一种解决方案是将自定义媒体查询添加到您的 css 文件中：

```
/* Sepia */
@media sepia {
* { color: #000000; }
body { background-color: #eae4d3; }
}

/* Black */
@media black {
* { color: #ffffff; }
body { background-color: #000000; color: #ffffff; }
}

/* White */
@media white {
* { color: #000000; }
body { background-color: #ffffff; }
} 
```

# ruby - 如何检测我的 ruby 应用程序是否在没有 config:add 的 heroku 上运行？

> ID：14305171
> 
> 赞同：1
> 
> 时间：2013-01-13T15:58:10.210
> 
> 标签：ruby, heroku, bundler

在 Gemfile 中，我想编写伪代码：

```
ruby: '1.9.3' if ENV['HEROKU'] 
```

因为我想在另一个平台上运行我的应用程序，比如 jruby，ruby2.0.0 如果！heroku。我认为这是 heroku 特定的 var，HEROKU_POSTGRESQL_VIOLET_URL

```
ruby: '1.9.3' if ENV['HEROKU_POSTGRESQL_VIOLET_URL'] 
```

有什么更好的方法？

相关： [如何检测我的应用程序是否在 Heroku 上运行？](https://stackoverflow.com/questions/11819322/how-to-detect-if-my-app-is-running-on-heroku)

糟糕，HEROKU_POSTGRESQL_{VIOLET,SLIVER,RED,...}_URL，这是分布式的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-15T18:58:20.867

在我看来，这`if ENV.keys.any? {|var_name| var_name.match(/heroku/i) }`将是一种相对理智的方法。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-15T01:25:53.827

如果您不想添加另一个环境变量，您可以将 Rails 环境从“生产”更改为“heroku”（但`RAILS_ENV`无论如何都应该通过更改环境变量来完成）。

因此，在本地，您的 Rails 环境将是开发/测试/生产环境，但在 Heroku 上它将是“heroku”，您将能够检查：

```
Rails.env.heroku? 
```

希望能帮助到你。

# sql - SQL 多次使用相同的数据库项

> ID：14305173
> 
> 赞同：1
> 
> 时间：2013-01-13T15:58:22.750
> 
> 标签：sql, ms-access

桌子：

```
Value | Win
 12      3
 22      4
 44      5
 12      11 
```

`sum(Win)`在 get和 order by的那一刻`Value`，它返回。所以都是以价值取胜。

```
Value | Win
 12      14
 22      4
 44      5 
```

现在我不想按顺序订购`Value`，我想这样做：

返回所有奖金，其中 value 大于 10, 20, 30,40 ：

所以回报应该是：

```
Value | Win
 10+      23
 20+      9
 30+      5
 40+      5 
```

这件事可能吗？建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T17:17:48.723

分组表可能有一些优点，例如：

![组表](../Images/02bb6228221ca0386c15d9cf93e416cd.png)

这将允许您构建：

![组表2](../Images/8a9c25c50b4e7625a4d487a898100ddc.png)

使用：

```
SELECT Groups.GroupName, ta.Value
FROM Groups, ta
WHERE ta.Value Between [low] And [high] 
```

甚至

```
WHERE ta.Value >= [low] 
```

并最终确定：

```
SELECT GroupName, Count([Value]) , Sum(Win)
FROM (SELECT Groups.GroupName, ta.Value, ta.Win
FROM Groups, ta
WHERE ta.Value >= [low]) q
GROUP BY GroupName 
```

一个优点是您可以通过编辑表格非常轻松地添加和删除组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T17:35:02.737

```
SELECT '10+' AS v,
SUM(IIF (myvalue>10, win)) AS w
FROM mytable

UNION ALL

SELECT '20+' AS v,
SUM(IIF (myvalue>20, win)) AS w
FROM mytable

UNION ALL

SELECT '30+' AS v,
SUM(IIF (myvalue>30, win)) AS w
FROM mytable

UNION ALL

SELECT '40+' AS v,
SUM(IIF (myvalue>40, win)) AS w
FROM mytable 
```

**注意**：我使用的字段名称与问题中使用的名称略有不同......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T16:25:12.463

在大多数数据库中，您会使用 case 语句：

```
select (case when value >= 40 then '40+'
             when value >= 30 then '30+'
             when value >= 20 then '20+'
             when value > 10 then '10+'
         end) 
```

不幸的是，MS-Access 不支持这种情况，因此您必须`iif`改用：

最简单的方法是将表达式放在子查询中：

```
select valuegroup, sum(win)
from (select t.*,
             iif(value > 40, '40+',
                 iif(value > 30, '30+',
                     iif(value > 20, '20+',
                         iif(value > 10, '10+', '<10'
                 )))) as valuegroup
      from t
     ) t
group by valuegroup 
```

要获得运行总和，您需要进行自我加入。很傻，但是 Access 没有窗口功能：

```
select valuegroup, sum(cumwin)
from (select t.*, sum(t2.win) as cumwin,
             iif(t.value > 40, '40+',
                 iift.(value > 30, '30+',
                     iif(t.value > 20, '20+',
                         iif(t.value > 10, '10+', '<10'
                 )))) as valuegroup
      from t join
           t t2
           on t.value <= t2.value
      group by t.value
     ) t
group by valuegroup 
```

如果 MS Access 不允许您`valuegroup`输入`group by`外部查询，那么您必须输入整个表达式。

# sql-server - 在 SQL Sever 中查找树的叶节点

> ID：14305175
> 
> 赞同：3
> 
> 时间：2013-01-13T15:58:32.283
> 
> 标签：sql-server, stored-procedures

这是我的表的架构：

```
Create Table OBJECT_TREE 
( PARENT_ID     int, 
CHILD_ID    int ) 
```

该表中的示例数据如下所示：

```
PARENT_ID   CHILD_ID
---------------------
1             2
2             3
2             4
2             5
3             6
3             7
4             8
4             9

1 ________2________3_______6
                   |       |
                   |       |______7
                   |
                   |
                   |______4_______8
                   |              |
                   |              |______9
                   |
                   |
                   |______5 
```

SQL Server 存储过程应返回给定节点层次结构中“向下”的所有对象（节点 2 的所有向下层次结构对象为 3、4、5、6、7、8、9）

请帮助找到树的叶子节点。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-13T16:05:47.417

幸运的是，这是少数不需要递归*的情况之一：*

```
SELECT DISTINCT child_id
FROM object_tree ot
WHERE NOT EXISTS (
    SELECT *
    FROM object_tree nx
    WHERE nx.parent_id = ot.child_id
    ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-01T13:16:54.880

此查询将返回所有没有子节点的叶节点。

```
 SELECT  ot.child_id
FROM object_tree ot
left join object_tree nx on  nx.parent_id = ot.child_id
where nx. parent_id is null 
```

# visual-studio-2012 - 如何将 Visual Studio 2012 深色主题与 Windows 8 高对比度主题一起使用？

> ID：14305176
> 
> 赞同：24
> 
> 时间：2013-01-13T15:58:34.143
> 
> 标签：visual-studio-2012, windows-8, themes, high-contrast

当我在 Windows 8 中使用标准的 Windows aero 主题时，VS2012 允许我在浅色和深色主题之间进行选择，但我在 Windows 8 中为自己创建了一个方便的高对比度主题，现在 VS 设置中只有一个灰色选项说“高对比度”，我无法改变它。

我属于少数喜欢 Visual Studio 新的深色主题的人，但遗憾的是我无法将它与新的高对比度 Windows 主题一起使用。

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-08-23T10:29:38.443

当 Windows 使用高对比度模式时，我的同事找到了在 Visual Studio 中使用深色主题的方法。他遵循以下步骤：

1.  导出此注册表项：

HKEY_CURRENT_USER\Software\Microsoft\VisualStudio\11.0_Config\Themes{1ded0138-47ce-435e-84ef-9ec1f439b749}（这应该是黑暗主题的关键）

1.  在导出的文件中，将深色主题的 GUID ({1ded0138-47ce-435e-84ef-9ec1f439b749}) 替换为高对比度主题的 GUID ({a5c004b4-2d4b-494e-bf01-45fc492522c7})：

2.  导入reg文件

启动 Visual Studio。这对他有用。甚至可以将高对比度主题的主题设置与深色主题的主题设置混合。只需将其中一个子键内容替换为另一个主题的子键之一。

在我们的两个系统上，主题的 GUID 似乎是相同的。但是在尝试之前，您应该始终检查它们。还建议备份密钥！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-07-21T10:52:13.630

这是在 Visual Studio 2015 中将高对比度皮肤更改为深色皮肤的寄存器更改。通过应用此文件，您可以在 Windows 以高对比度运行时使用深色皮肤。

使用风险自负！！！

从 HKEY_CURRENT_USER\Software\Microsoft\VisualStudio\14.0_Config\Themes\ 导出高对比度和深色皮肤的 reg 值（您可以从名称字段的值中看到它是哪一个）

将深色皮肤导出中的 GUID 更改为高对比度皮肤导出中的 GUID。（使用“全部替换”来执行此操作）（GUID 看起来像这样：{a5c004b4-2d4b-494e-bf01-45fc492522c7}）

补充：从高对比度皮肤导出的工作流设计器部分复制值并将其粘贴到深色皮肤导出中（此布局比此设计器的深色皮肤布局更好）

保存更改的深色皮肤导出并在 VS2015 未运行时执行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-06-13T19:02:33.630

我为此制作了一个 PowerShell 脚本，因为每次更新时我都必须更新注册表值。

这适用于 Visual Studio 2015。您只需要更新其他位置的值。

```
$HighConstrastTheme = "HKCU:\SOFTWARE\Microsoft\VisualStudio\14.0_Config\Themes\{a5c004b4-2d4b-494e-bf01-45fc492522c7}"
$DarkTheme = "HKCU:\SOFTWARE\Microsoft\VisualStudio\14.0_Config\Themes\{1ded0138-47ce-435e-84ef-9ec1f439b749}"

Remove-Item -Path $HighConstrastTheme -Recurse
Copy-Item -Path $DarkTheme -Destination $HighConstrastTheme -Recurse 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-15T01:55:44.360

如您所见，Visual Studio 中的高对比度主题自动链接到在“轻松访问”中启用 Windows 的“高对比度”模式。

虽然在该模式处于活动状态时您无法更改主题，但您仍然可以直接通过工具 -> 选项 -> 环境 -> 字体和颜色更改某些颜色设置（编辑器、窗口等）。许多设置直接来自 Windows，但您仍然有一些选项。

不适用于这种情况，但仅供任何有兴趣调整主题的人参考，[Visual Studio 2012 颜色主题编辑器](http://visualstudiogallery.msdn.microsoft.com/366ad100-0003-4c9a-81a8-337d4e7ace05)扩展非常方便。Scott H. 有一篇[关于使用它](http://www.hanselman.com/blog/YourColorfulVisualStudio2012WithTheColorThemeEditorVS2010ColorsToo.aspx)的帖子。

# javascript - 绘制具有 3 个以上控制点的贝塞尔曲线

> ID：14305179
> 
> 赞同：0
> 
> 时间：2013-01-13T15:58:42.737
> 
> 标签：javascript, kineticjs, bezier

我知道我可以使用 bezierCurveTo() 绘制带有 3 个控制点的贝塞尔曲线。如何绘制具有 3 个以上控制点的贝塞尔曲线？我尝试使用 KineticJS 中的样条曲线（因为我可以指定任意数量的点），但生成的曲线看起来不像贝塞尔曲线（例如，如果我只设置了 3 个点）。我可以以某种方式将更多的二次贝塞尔曲线连接在一起以获得超过 3 个控制点的曲线吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T16:09:08.030

假设您有 3 条曲线：

```
 curve1, curve2, and curve3 
```

你想要一条将所有曲线连接在一起的曲线，称之为：

```
 curve 4 
```

使用 kineticJS（此时为 4.3.1），您可以：

```
 var points1 = curve1.getPoints();
 var points2 = curve2.getPoints();
 var points3 = curve2.getPoints();
 var joined = points1.concat(points2,points3);

 curve4.setPoints(joined);
 // make sure to redraw the layer 
```

# javascript - 传递连接变量 onClick

> ID：14305184
> 
> 赞同：0
> 
> 时间：2013-01-13T15:59:26.323
> 
> 标签：javascript

我的提交按钮上有这个

```
onClick="jsfunction('my-php.php','var1','Wait Message Here...')" 
```

它将 3 个参数传递给我的 javascript 函数

```
1st - my PHP File that will process the data
2nd - a variable of the data that will be processed
3rd - a wait message 
```

现在我想在第二个参数中传递多个变量，用逗号分隔（像这样 - var,var2,var3

我怎样才能做到这一点。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T16:02:24.370

要加入`var1`,`var2`并`var3`成一个用逗号分隔的字符串，只需将 then 放入一个数组并加入它们：

```
jsfunction('my-php.php', [var1, var2, var3].join(','),'Wait Message Here...') 
```

或者，如果您愿意，您可以简单地连接它们。

```
var1 + "," + var2 + "," + var3 
```

# c++ - + 头文件，将文件包含在定义块中或仅在文件顶部

> ID：14305189
> 
> 赞同：1
> 
> 时间：2013-01-13T16:00:14.950
> 
> 标签：c++

C++ 中包含文件的最佳位置是什么？例如：

```
/*Foo.h*/
#include <string>       //Should I place this between the #ifndef #endif?
#include "FooBar.h"
using namespace std;

#ifndef Foo_class
#define Foo_class
class Foo
{   
    /*XXX*/
}
#endif

/*FooBar.h*/
#ifndef FooBar_class
#define FooBar_class
class FooBar
{   
    /*XXX*/
}
#endif

/*Foo.cpp*/
#include "Foo.h"
/*XXX*/

/*FooBar.cpp*/
#include "FooBar.h"
/*XXX*/ 
```

我是否应该将包含放在定义之间，以便仅在需要时才包含在内？当你不这样做时，它对系统有影响吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T16:02:10.433

```
#ifndef Foo_class
#define Foo_class 
```

`.h`这对应该始终是任何文件的第一对行。

如果您包含其他`.h`文件或包含受保护的库文件，这可能无关紧要，但仍然是一个好习惯。

另一个好习惯，避免`using namespace std;`出现在标题中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-13T16:02:36.800

通常，系统头文件**确实可以防止错误的过度包含，**所以这并不重要。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-13T16:01:47.677

库头文件已经包含他们自己`#ifdef`的，所以如果包含在多个文件中，一切都会得到解决。所以不管你把它放在哪里。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-13T16:13:43.207

最好的地方是在顶部。

**仅在有技术原因时才做与其他人不同的事情。**

在这种情况下： - 正如其他答案所指出的那样，两者之间没有技术差异。- 我遇到的所有代码都将包含守卫放在顶部。虽然有时他们在版权声明之后，但守卫从不关注其他人`#includes`。

因此：把它放在顶部。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-13T16:22:07.347

在大多数情况下，只要内部包含的文件具有包含保护，它就没有真正的区别。把它放在你认为最有意义的地方！

然而，把它放在里面的约定是有原因的`#ifndef GUARD`，也就是说，当文件需要很长时间加载时（例如，它们在负载很重的网络驱动器上，或者在慢速磁盘上），在一个大型项目中，同样头文件可能多次包含在同一个项目中

假设我们有一个“common.h”：

```
#include <iostream>
#include "lesser_common.h"
#include "not_so_common.h"

#ifndef COMMON_H
#define COMMON_H

... stuff goes here ...

#endif 
```

在 main.c 中，我们有

```
#include <iostream>
#incldue "common.h"
#include "myheader1.h"
#include "myheader2.h"
#include "myheader3.h" 
```

其中 myheader{1,2,3}.h 还包括 common.h。

现在理论上，预处理器必须通读所有 common.h 4 次，以及 iostream 5 次。如果我们把 include 守卫移出去，这样当 common.h 被包含时，就不会包含其他文件了，至少我们保存了 iostream 的三个读取。对于一个大型项目，包含大量其他文件的大量文件[特别是如果您遵守“在使用此文件之前不必包含其他文件”的原则]，这可以加起来相当多的文件阅读。它不应该是您安排文件的方式/位置的主要选择，但记住一点是个好主意。

话虽如此，大多数预处理器都很“聪明”，并且第一次了解文件的顶部和底部是否包含保护，下次不需要读取标题。

此外，除非确实需要，否则不将文件包含到头文件中是一个非常好的主意 - 当然，这同样适用于源文件。

# asp.net - 使用 datagridview ASP.NET Web 窗体进行高级编辑、插入、删除

> ID：14305190
> 
> 赞同：0
> 
> 时间：2013-01-13T16:00:23.547
> 
> 标签：asp.net, datagridview, ado.net

我正在从 Windows 窗体迁移到 ASP.NET Web 窗体，但遇到了麻烦。我正在尝试插入、删除、编辑和更新。下面是我有的两张桌子。

人员表 - PersonID、人员公司表 - CompanyID、公司、PersonID

如何正确使用数据网格，以便在下拉列表中使用 Person 字段而不是 PersonID，以便用户可以从中选择一个值，同时我可以进行插入、删除、编辑、更新。

我希望你能明白我的意思，并会在某种程度上帮助我。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T16:47:10.533

这很容易做到。

您需要在网格中附加公司表的数据源，默认情况下它将显示人员 ID。为了将其连接到人员表，请将人员 ID 列更改为模板。在编辑模板中导入一个下拉列表并将另一个数据源的人员表附加到它。相应地选择值和键。

对于一个基本的想法看看： http: [//odetocode.com/articles/231.aspx](http://odetocode.com/articles/231.aspx)

# objective-c - what was the second parameter in "id (*IMP)(id, SEL, ...) " used for?

> ID：14305191
> 
> 赞同：2
> 
> 时间：2013-01-13T16:00:28.473
> 
> 标签：objective-c, gnustep

my question as the title says.obviously, the first parameter was used for this pointer , in some taste of c++.what about the second one? thak you.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-13T21:54:24.383

The signature of `objc_msgSend()` is:

```
id objc_msgSend(id self, SEL op, ...); 
```

Every method call is compiled down to a call to this function. I.e., if you call:

```
[anArray objectAtIndex:42]; 
```

That will be compiled as if it were:

```
objc_msgSend(anArray, @selector(objectAtIndex:), 42); 
```

Now, to your question, why do methods get compiled down to a function that has the SEL as the second argument. Or, more specifically, why is this method:

```
- (id)objectAtIndex:(NSUInteger)index; 
```

Exactly equivalent to this C function:

```
id object_at_index(id object, SEL _cmd, NSUInteger index); 
```

The answer is speed *speed* **speed**.

# Speed

Specifically, by doing this, then `objc_msgSend()` never has to rewrite the stack frame* and it can also use a tail call optimization to jump directly to the method invocation. This is the same reason why you never see `objc_msgSend()` in backtraces in the debugger (save for when you actually crash/break in the messenger).

`objc_msgSend()` uses the `object` and the `_cmd` to look up the implementation of the method and then, quite literally, jumps to that implementation.

Very fast. Stack frame untouched.

And, as others have stated, having `_cmd` around in the method implementation can be handy for a variety of reasons. As well, it also means that the messenger can do neat tricks like proxy support via NSInvocation and the like.

*rewriting the stack frame can be insanely complex and expensive. Some of the arguments might be in registers some of the time, etc... All architecture dependent ABI nastiness. One of the biggest challenges to writing things like `imp_implementationWithBlock()` was figuring out how to do so *without touching the stack* because doing so would have been too slow and too bloated to be viable.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T16:30:32.497

The purpose of having the second parameter contain the selector is to enable a common dispatch mechanism. As such, the method dispatch code always expects the second parameter to be the selector, and dispatches based on that, or follows the inheritance chain up, or even creates an `NSInvocation` and calls `forwardInvocation:`.

Generally, only system-level routines use the selector argument, although it's rather nice to have it when you hit an exception or are in the debugger trying to figure out what routine is giving you difficulties if you are using `forwardInvocation`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T16:04:59.080

**From the documentation:**

> **Discussion**
> 
> This data type is a pointer to the start of the function that implements the method. This function uses standard C calling conventions as implemented for the current CPU architecture. The first argument is a pointer to self (that is, the memory for the particular instance of this class, or, for a class method, a pointer to the metaclass). The second argument is the method selector. The method arguments follow.

In Objective-C when you call a method you need to know the target, the selector and the eventual arguments. Let's suppose that you are trying to do this manually: how can you know which method to call if you don't know the selector? Do you call some random method? No, you call the right method because you know the method name.

# mercurial - Mercurial 存储库 - 中文输出

> ID：14305197
> 
> 赞同：0
> 
> 时间：2013-01-13T16:01:02.280
> 
> 标签：mercurial, repository

我使用的是 Ubuntu 12.10，我刚刚安装了 Mercurial。

我创建了一个新的存储库，例如，当我显示日志时，输出 It's in chinese。

我怎样才能改变这个？

例子：

```
修改集:      1:b2f2b495c5a0
标签:        tip
用户:        yo
日期:        Sun Jan 13 16:33:28 2013 +0100
摘要:        actualización de ficheros 
```

我的语言环境

```
yo@yo:~/Projects/wik$ locale
LANG=es_ES.UTF-8
LANGUAGE=es_ES:es_HN:es_CR:es_CO:es_CL:es_AR:zh_CN:en
LC_CTYPE="es_ES.UTF-8"
LC_NUMERIC=es_ES.UTF-8
LC_TIME=es_ES.UTF-8
LC_COLLATE="es_ES.UTF-8"
LC_MONETARY=es_ES.UTF-8
LC_MESSAGES="es_ES.UTF-8"
LC_PAPER=es_ES.UTF-8
LC_NAME=es_ES.UTF-8
LC_ADDRESS=es_ES.UTF-8
LC_TELEPHONE=es_ES.UTF-8
LC_MEASUREMENT=es_ES.UTF-8
LC_IDENTIFICATION=es_ES.UTF-8
LC_ALL= 
```

我已经厌倦了

```
export LANG=en_US.UTF-8 
```

但对我不起作用。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T08:00:30.947

你的问题出在这里：

```
LANGUAGE=es_ES:es_HN:es_CR:es_CO:es_CL:es_AR:zh_CN:en
                                             ^^^^^ 
```

在您的会话中嵌入了中文。检查您的本地化设置为什么它在那里。

您可以在输入时在 shell 中禁用它

```
LANGUAGE=es_ES:es_HN:es_CR:es_CO:es_CL:es_AR:en
export LANGUAGE 
```

你也可以把它放在你的 .bashrc 中，这样每次你运行交互式 shell 时它都会被执行。

# xcode - 阻止 Xcode 记住我以前打开的项目

> ID：14305201
> 
> 赞同：5
> 
> 时间：2013-01-13T16:01:48.160
> 
> 标签：xcode

这真的把我逼疯了！在任何时候，我都在从事多个项目。当我退出 Xcode 时，下次我打开 Xcode 时，我前一天的所有项目都会自动打开。

我经常最终编辑错误的文件，啊啊啊啊啊啊！！我可以阻止这种行为的唯一方法是在退出 Xcode 之前关闭所有项目，转到 Open Recent，选择 Clear Menu，然后转到 Organizer 以一一删除所有项目。必须有一种更简单的方法来阻止 Xcode “记住”我的项目。

我曾多次询问 Apple，但 Apple 人一直告诉我去 Xcode Preferences 将其关闭，而且他们似乎经常将其与我关闭的 Mountain Lion 的 Reopen Preferences 混淆。我在我的 Xcode 4.5.2 中没有发现这样的选项，Apple 人坚持认为它在那里。

你们有没有人在 Xcode 4.5.2 上有这个选项？还是苹果把我挑出来省略了那个选项，只是为了惹恼我？最重要的是，我怎样才能阻止这种滋扰？当我重新启动 Xcode 时，我想要一个干净的开始 >:|

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T16:42:39.710

您可以修改应用程序是否重新加载其窗口的设置，如[本问题](https://stackoverflow.com/questions/7288765/how-to-disable-10-7-window-restoration-feature/7288809#7288809)所示。

Xcode 的标识符是`com.apple.dt.Xcode`所以更改默认值的命令是

```
defaults write com.apple.dt.Xcode NSQuitAlwaysKeepsWindows -bool NO 
```

在我的测试中，可能需要一两次重新启动才能坚持。如果您只想关闭所有窗口一次，您也可以使用*退出并关闭所有窗口*（⌘⌥Q）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T16:37:42.507

**系统偏好设置 > 常规 > 退出应用程序时关闭窗口**

在这里您可以找到一个复选框来禁用“功能”。另外，请参阅这个类似的[问题](https://stackoverflow.com/questions/6920158/how-to-turn-off-reopen-projects-on-xcode-launch-in-xcode-4-1-later)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-24T13:01:40.143

对于 Xcode 版本 6.3 (6D570)

删除这个目录~/Library/Saved Application State/com.apple.dt.Xcode.savedState

# javascript - 与javascript中的html标签不匹配的正则表达式

> ID：14305202
> 
> 赞同：0
> 
> 时间：2013-01-13T16:01:53.027
> 
> 标签：javascript, jquery, search, highlight

> **可能重复：**
> [使用正则表达式和 javascript 突出显示 html 中的单词 - 几乎就在那里](https://stackoverflow.com/questions/10416643/highlight-words-in-html-using-regex-javascript-almost-there)

更新 --> 最终脚本，一旦解决，就是：

```
var regex;
var filterSize;

function normalizar(str) {
    var fin=str.toLowerCase().replace('á','a').replace('é','e').replace('í','i').replace('ó','o').replace('ú','u');

    return fin;
}

function highlight(fin) {
    htmlFin="";
    while ((match = regex.exec(normalizar(fin))) != null) {
        posIni=match.index;
        posEnd = posIni+filterSize;
        var ini="";
        if (posIni != 0) ini=fin.substring(0, posIni);
        var sub=fin.substring(posIni, posEnd);
        fin=fin.substring(posEnd, fin.length);

        htmlFin += ini+"<span class='highlight'>"+sub+"</span>";
    }
    htmlFin += fin;

    return htmlFin;
}

function procesar(elemento) {
    elemento.children().each(function() {
        var mas=$(this).children().size();
        if (mas == 0) {
            $(this).html(highlight($(this).text()));
        } else {
            procesar($(this));
        }
    });
}

$(document).ready(function(){

    $(".filter").keyup(function(){

        // Cogemos el texto de búsqueda
        var filter = $(this).val();
        //Ponemos el contador a 0
        var count = 0;
        $('span.highlight').each(function() {
            $(this).replaceWith($(this).text());
        });

        //Por cada elemento de la lista...
        $(".list tr:not(:first-child)").each(function(){
            var html=$(this).html();
            var posIni = -1;
            var posEnd = -1;

            filterNorm=normalizar(filter);
            filterSize=filter.length;
            regex=new RegExp(filterNorm, 'gi');
            var buscar=normalizar($(this).text()).search(regex);
            var htmlFin="";
            if (buscar > -1) {
                if (filter) procesar($(this));
                $(this).show();
                count++;

            } else $(this).fadeOut();
        });

        // Actualizamos la cuenta
        if (filter) {
            var numberItems = count;
            //Si no hay coincidencias lo mostramos en rojo.
            if (count==0) $(".cuenta").html("<span class='error'>Coincidencias = "+count+"</span>");
            else $(".cuenta").text("Coincidencias: "+count);
            //Si no hay filtro, limpiamos el html de cuentas.
        } else $(".cuenta").text("");
    });
}); 
```

目标是使用 jquery/javascript 制作一个搜索脚本，以突出显示输入中的匹配项。它必须忽略大小写和变音符号（重音）符号和 html 标签

我很接近这样做，但它失败了，因为它不会忽略 html 标签，我的意思是，脚本突出显示 html 标签也匹配......

例如：

更新：您可以在此处尝试脚本 [jsfiddle.net/josecash/nD6dg/2](http://jsfiddle.net/josecash/nD6dg/2)，只需键入 td 或 < 或 > 即可查看错误。

假设我有一张这样的桌子：

```
<table>
<tr><th>Name</th><th>Kind</th><th>Type</th></tr>
<tr>
<td><strong>Fedora</strong></td>
<td>Linux</td>
<td>Operative System</td>
</tr>
</table> 
```

如果我在输入中键入字母 o，我的脚本将突出显示 Fed **o** ra 和**O** operating System 中的 o，以及标签 str **o** ng 中的 o。

我想我可以用正则表达式中的正则表达式来做到这一点，但我想不通......

任何帮助将不胜感激

脚本如下所示：

```
$(document).ready(function(){

    $(".filter").keyup(function(){

        // Input text
        var filter = $(this).val();
        //Ponemos el contador a 0
        var count = 0;
        $('span.highlight').each(function() {
            $(this).replaceWith($(this).text());
        });

        //Foreach tr in the table
        $(".list tr:not(:first-child)").each(function(){
            var html=$(this).html();
            var posIni = -1;
            var posEnd = -1;

                    // normalizar just replace accents
            filterNorm=normalizar(filter);
            var filterSize=filter.length;
            var regex=new RegExp(filterNorm, 'gi');
            var buscar=normalizar($(this).text()).search(regex);
            var htmlFin="";

            if (buscar > -1) {
                if (filter) {
                    var end=html;
                    while ((match = regex.exec(normalizar(end))) != null) {
                        posIni=match.index;
                        posEnd = posIni+filterSize;
                        var ini="";
                        if (posIni != 0) ini=end.substring(0, posIni);

                        var sub=end.substring(posIni, posEnd);
                        end=end.substring(posEnd, end.length);

                        htmlFin += ini+"<span class='highlight'>"+sub+"</span>";
                    }
                    htmlFin += end;
                }
                if (filter) $(this).show().html(htmlFin);
                else $(this).show();
                count++;
            } else $(this).fadeOut();
        });
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T20:48:14.337

@Josecash，

避免处理 HTML 标记本身的一个好方法是：

*   使用纯 javascript 而不是 jQuery 发现子节点
*   对待遇到的文本节点
*   在遇到元素节点时（递归地）进一步深入。

整体代码将是这样的：

```
$(document).ready(function(){
    //Highlighter function
    function highlight(text) {
        //Your highlight code here
        //...
        //return text with added HTML markup
    }

    //Recursive scanner function to penetrate the DOM tree.
    function scanNode(index, node) {
        //node is a plain javascript reference to a DOM node, not jQuery-wrapped.
        if(node.nodeType == 3) {//hurray, it's a TEXT_NODE
            $(node).replaceWith(highlight(node.nodeValue));
        }
        else if(node.nodeType == 1){//it's an ELEMENT_NODE
            //Here, for convenience, we use jQuery's utility `.each() method
            //but we are still essentially working in plain javascript.
            $.each(node.childNodes, scanNode);
        }
    }

    var $list = $(".list");
    //master routine
    $(".filter").keyup(function() {
        $list.find('span.highlight').each(function() {
            var $this = $(this);
            $this.replaceWith($this.text());
        }).find("tr:gt(1)").each(scanNode);
    });
}); 
```

*感谢@Bergi 在下面的输入*

您将不得不编写`highlight()`函数，这将是对您上面提出的代码的相当轻的修改。确保函数返回标记的文本字符串。

临界线`$(node).replaceWith(highlight(node.nodeValue));`已经过测试（在 Opera 12.12 和 IE9 中）；[jsFiddle](http://jsfiddle.net/YphgN/)

其他一切都未经测试，因此可能需要调试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T16:25:17.580

您不应该使用 'html' 作为您的正则表达式测试字符串，而是使用生成的文本。测试以下代码：

```
if (filter) {
      //replace this line:: var end=html;  by
      var end= $(this).text();
    ....
} 
```

# python - IPython - 在导入的文件中设置断点

> ID：14305203
> 
> 赞同：13
> 
> 时间：2013-01-13T16:01:56.133
> 
> 标签：python, breakpoints, ipython, pdb

`IPython`可以像这样在+中设置断点`pdb`：

```
run -d -b 150 file1.py 
```

这将中断第`file1.py`150 行的执行。现在，如何在被调用的文件中设置断点`file1.py`？类似于以下内容：

```
run -d -b file2.py:106 file1.py 
```

where 在`file2.py`里面被导入和调用`file1.py`。

非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T17:04:11.630

您可能会发现可行的一个选项是制作`file1.py`一个 IPython 脚本，即将名称更改为`file1.ipy`, 然后，而不是

```
import file2 
```

做

```
%run -d -b 106 file2.py 
```

我意识到这可能并不理想，因为它需要编辑`file1.py`。

**编辑**：这确实是`%run`命令中的一个有用功能。我在这里添加了它：[https ://github.com/ellbur/ipython](https://github.com/ellbur/ipython)

此外，如果您有使用的解决方案，`pdb`您可能也希望将其作为答案发布。

# php - Zend框架当前方法获取单行

> ID：14305210
> 
> 赞同：1
> 
> 时间：2013-01-13T16:03:03.633
> 
> 标签：php, zend-framework, zend-db, zend-db-table

我是 zend 框架的新手，在这个简单的函数中，我想获得一个“帖子”，然后我想在相关表中找到所有评论

```
public function getPost($idPost)
{
    $db=  Zend_Registry::get('db');

    $select=$db->select()
            ->from($this->_name, '*')
            ->where("idPost= ".$db->quote($idPost, 'INTEGER'));

    $stmt=$select->query();
    $rowset=$stmt->fetchAll();
    $post=$rowset->current();

    //ora devo aggiungerci i commenti che questo post ha ricevuto
    $comm=$post->findDependentRowset('commenti');

    $ris=array($post, $comm);

    return $ris;

} 
```

在我的索引控制器 ii 中只需调用此函数，但我收到此错误：

```
Call to a member function current() on a non-object in C:\xampp\htdocs\... 
```

哪里错了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T17:51:48.650

我认为您对如何使用 Zend_Db 有一些误解。

### 1.你没有使用 ORM，只是 PDO 包装器

这意味着，您的查询不会返回 Zend 行集和行，因此您不能使用您可以对它们使用的方法。

### 2.默认取模式

Zend_Db_Statement fetchAll() 方法的默认获取模式是数组，如果您希望它返回一个对象（stdClass），请在获取数据之前更改获取模式：

```
$stmt->setFetchMode(Zend_Db::FETCH_OBJ); 
```

### 3\. 当你真正想要一行时使用 fetchAll()

如果你只想要一行，那就不要取整张桌子！使用 Zend_Db_Statement，例如使用：

```
$row = $stmt->fetch(); 
```

或者

```
$rowObj = $stmt->fetchObject(); 
```

...再次，这不是一个 zend 行对象，只是一个 stdClass 实例，但你可以这样做：

```
$rowObj->some_field; 
```

在上面。

另一方面，如果这是 Post 模型中的一个方法，它应该类似于：

```
public function getPost($idPost)
{
    return $this->getRow($idPost);
} 
```

这将返回帖子，然后，如果您正确设置了表关系，您还可以查询相关数据或单独获取具有该 ID 的所有评论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T06:14:56.620

问题是，除非您像前面提到[的那样定义表类](http://framework.zend.com/manual/1.12/en/zend.db.table.html#zend.db.table.defining)，否则您不能使用依赖行集或父行集。

要使您当前的功能正常工作，最好使用两个功能，并保持简单：

```
public function getPost($idPost)
{
    $db= new Zend_Db_Table($this->_name);

    $select=$db->select()
            ->where("idPost= ?", $idPost);
    /*Fetch just the row you want, or use fetchAll() if you need to match return types*/   
    $row = $db->fetchRow($select);

    return $row;

}

public function getComments($table='comments', $id) {

    $db = new Zend_Db_table($table);

    $select = $db->select()->where('post_id = ?', $id)->order('date ASC');
    $rowset = $db->fetchAll($select);

    return $rowset/* or you could return an array ->$rowset->toArray() */

} 
```

`Zend_Db_Table`将尝试使用当前的数据库适配器，因此您需要做的就是传入表名。

还有一点需要注意的是：使用时不需要使用任何`quote()`功能`select()`。

但非常重要的是，如果您要使用 Zend_Db，您需要了解*“定义表类”*。至少足以在您自己的课程中使用它们。

我希望这有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T16:27:01.473

要获取行集和相关行集，您必须使用`Zend_Db_Table`. 您只使用`Zend_Db_Adapter`with `Zend_Db_Select`。

从[这里](http://framework.zend.com/manual/1.12/en/zend.db.table.html)阅读。所以你必须定义一个从`Zend_Db_Table_Abstract`.

例子：

```
class Bugs extends Zend_Db_Table_Abstract
{
    protected $_name = 'bugs';
    protected $_primary = 'bug_id';
} 
```

要获取`Zend_Db_Table_Rowset`对象，请使用：

```
$bugs   = new Bugs();
$rowset = $bugs->fetchAll("bug_status = 'NEW'"); 
```

要查找相关行集，您必须在表类中定义关系。看看[这里](http://framework.zend.com/manual/1.12/en/zend.db.table.relationships.html)如何定义关系。

# c - 当一个字符串只包含 '\0' 时会发生什么？C

> ID：14305212
> 
> 赞同：2
> 
> 时间：2013-01-13T16:03:11.370
> 
> 标签：c, string

在我的程序中，我从 .txt 文件中读取单词，并将它们插入到链表和哈希表中。

如果在一个单词之后连续读取两个 '\n' 字符，那么程序将读取的第二个单词将是 '\n'，但是我用 '\0' 覆盖它，所以基本上字符串只包含 '\0 '。

是否值得我放一个 if 语句，以便我的程序的下一部分仅在单词是真实单词时执行（即 word[0] ！= '\n'）？字符串 '\0' 会用完散列表/链表中的空间吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T16:08:46.347

在 C 中，第一个元素为的字符数组`\0`是一个*空字符串*，即长度为零。如果您要问的话，将空字符串保留在容器中没有多大意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T16:33:26.910

这取决于您是否将空字符串视为有效条目。您似乎在存储单词，所以我猜想空字符串是没有意义的，但这是特定于应用程序的。

例如，可以存在一个环境变量（`getenv`返回一个有效指针），但该值可以是“未设置”：一个空字符串。在这种情况下，值是空字符串这一事实可能很重要。

那么，如果一个空字符串不重要，是否值得添加一条`if`语句来忽略它？通常这将是“是”，因为存储和维护空字符串的开销可能远远超过`if`每个条目的一条语句。但当然这只是一个猜测，我不知道您的开销是多少，`if`执行多少次，以及您将保存多少个空字符串条目。你可能也不知道，所以我的后备立场是只存储重要的数据。

# facebook-graph-api - 使用 Graph API 发布到页面时定位年龄

> ID：14305213
> 
> 赞同：0
> 
> 时间：2013-01-13T16:03:12.560
> 
> 标签：facebook-graph-api, facebook-page, targeting

我想在使用 Graph API 向 facebook 页面添加帖子时按年龄定位粉丝，我认为我不能使用“定位”字段，因为它提到它用于定位国家、城市、地区或地区。我为照片找到了“feed_targeting”，但没有为帖子找到解决方案。

请帮我 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T16:01:14.497

*   确保为页面打开门控![门](../Images/bfceb2c9a27cdc76c2f7f40a321e93ea.png)

*   确保您使用**页面令牌**而不是用户令牌。

*   然后，当您使用 api 创建您的帖子时，目标参数将执行门控，而 feed_targeting 参数将执行新闻提要目标。

注意：门控仅适用于语言和国家。

# actionscript-3 - 1120：访问未定义的属性 startButton

> ID：14305214
> 
> 赞同：-1
> 
> 时间：2013-01-13T16:03:13.060
> 
> 标签：actionscript-3, flash

我究竟做错了什么？startButton 是一个按钮，在movieclip (menuScreen) 内，该按钮的实例名称是startButton。

第 12 行 1120：访问未定义的属性 startButton。第 13 1120 行：未定义属性 startButton 的访问

```
package 
{
import flash.display.MovieClip;
import flash.display.SimpleButton;
import flash.events.MouseEvent;

public class MenuScreen extends MovieClip 
{
    var startButton:StartButton;
    public function MenuScreen();
    {
        startButton = new StartButton();
        startButton.addEventListener( MouseEvent.CLICK, onClickStart );
    }

    public function onClickStart( event:MouseEvent ):void
    {
        dispatchEvent( new NavigationEvent( NavigationEvent.START ) );
    }
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T16:18:57.877

尝试删除线条

```
var startButton:StartButton 
```

和

```
startButton = new StartButton(); 
```

因为如果您已经在movieclip 中添加了按钮并为其分配了实例名称，则您可以在movieclips 类中访问它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T16:20:54.003

你在这一行多了一个分号：

```
public function MenuScreen(); 
```

这使 Flash 认为以下 {} 块与 MenuScreen() 无关。

此外，正如 Johan 所指出的，在时间轴上有一个 StartButton 实例意味着第 9 行和第 12 行基本上已经为您完成，因此您不需要声明变量或创建实例。

# mysql - 显示最大计数mysql的结果

> ID：14305215
> 
> 赞同：0
> 
> 时间：2013-01-13T16:03:16.177
> 
> 标签：mysql, count

我需要向用户展示最多的评论。我有两张桌子：

表：**用户**

```
ID   |  USERNAME   |    EMAIL
------------------------------
1    |   USER01    |   EMAIL01
2    |   USER02    |   EMAIL02
3    |   USER03    |   EMAIL03
4    |   USER04    |   EMAIL04 
```

表：**评论**

```
ID   |  AUTHOR     |    COMMENT
----------------------------------
1    |   USER01    |   COMMENT...
2    |   USER02    |   COMMENT...
3    |   USER01    |   COMMENT...
4    |   USER03    |   COMMENT... 
```

在这个例子中`user01`，评论最多，但可以说我必须用他们拥有的评论数来计算它们。而且结果我必须向用户显示存储在用户表中的电子邮件。

如何计算并同时检查两个表以返回结果？还是我应该先获取用户信息然后计数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T16:08:44.430

下面的这个查询处理具有最多评论数的重复行，

```
SELECT  a.userName
FROM    Users a
        INNER JOIN Comments b
            ON a.username = b.author
GROUP BY    a.userName
HAVING  COUNT(*) = 
    (
        SELECT MAX(totalCount)
        FROM
        (
            SELECT author, COUNT(*) totalCount
            FROM    comments
            GROUP BY author
        ) a
    ) 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/f34e0/1)
*   [SQLFiddle 演示（*有重复*）](http://sqlfiddle.com/#!2/3aa09/1)

但如果你不想处理它，可以简单地通过使用`ORDER BY`和`LIMIT`

```
SELECT  a.userName, COUNT(*) totalCount
FROM    Users a
        INNER JOIN Comments b
            ON a.username = b.author
GROUP BY    a.userName
ORDER BY totalCount DESC
LIMIT 1 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/f34e0/2)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T16:10:24.210

```
select username,email,count(*) as cnt 
from users, comments 
where author = username 
 group by username
 order by cnt desc
 limit 1 
```

# java - Java SQL 简单更新语法问题

> ID：14305216
> 
> 赞同：-1
> 
> 时间：2013-01-13T16:03:19.420
> 
> 标签：java, sql, jdbc, sql-update

我有一个名为**books**的表，其中包含 bookID、bookName、count、orderCount

我想编写一个sql查询，将所有books.orderCount更新为books.orderCount+1。

我该怎么做`executeQuery("UPDATE books....");`呢？我在语法上有问题。

我尝试在网上搜索信息，但是大多数文章都是关于 INSERT 或 DELETE 命令的，唯一相关的文章建议将 orderCount 检索到 Java，更新它，然后将其写回 SQL。如果可能的话，我宁愿避免它，因为它可能会导致严重的问题（此任务不需要锁定记录，所以我不能使用它们来避免问题）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T16:04:17.707

这应该很简单，

```
UPDATE books 
SET orderCount = orderCount + 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T16:20:00.123

如果是关于一个`primary key:`

此外，您可以自动递增。

```
CREATE TABLE Persons
 (
 P_Id int NOT NULL AUTO_INCREMENT,
 LastName varchar(255) NOT NULL,
 FirstName varchar(255),
 Address varchar(255),
 City varchar(255),
 PRIMARY KEY (P_Id)
 ) 
```

要让 AUTO_INCREMENT 序列以另一个值开始，请使用以下 SQL 语句：

```
ALTER TABLE Persons AUTO_INCREMENT=100 
```

要将新记录插入“Persons”表，我们不必为“P_Id”列指定值（将自动添加唯一值）：

```
INSERT INTO Persons (FirstName,LastName)
VALUES ('Lars','Monsen') 
```

# python - Python查找列表项函数的最小值，但返回列表项

> ID：14305217
> 
> 赞同：2
> 
> 时间：2013-01-13T16:03:20.593
> 
> 标签：python, list, minimum

抱歉，在标题中解释我的问题有点困难，但基本上，我有一个职位列表，每个职位都可以通过一个函数传递，以获得一个数字，为​​您提供有关职位的数据。我想要做的是返回列表中数据值最低的位置，但我似乎找不到这样做的方法。

一些伪代码应该会有所帮助：

```
def posfunc(self,pos):
    x,y = pos
    return x**2-y

def minpos(self)
    returns position with the least x**2-y value 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-13T16:05:02.403

Python 很酷 :D:

```
min(positions, key=posfunc) 
```

从内置文档：

```
>>> help(min)
min(...)
    min(iterable[, key=func]) -> value
    min(a, b, c, ...[, key=func]) -> value

    With a single iterable argument, return its smallest item.
    With two or more arguments, return the smallest argument. 
```

lambda 在这里值得一提：

```
min(positions, key=lambda x: x[0]**2 - x[1]) 
```

如果您不在`posfunc`其他地方使用，大致相同，但我认为更具可读性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-13T16:12:25.067

你基本上可以使用 min() 函数

```
pos = [(234, 4365), (234, 22346), (2342, 674)]

def posfunc(pos):
    x,y = pos
    return x**2-y

min(pos, key=posfunc) 
```

# php - Joomla 2.5 - 为 iPad 添加自定义 CSS

> ID：14305220
> 
> 赞同：0
> 
> 时间：2013-01-13T16:03:36.117
> 
> 标签：php, html, css, joomla, joomla2.5

我想在 iPad 上查看我的 joomla 网站时加载一个 css 文件。

我使用的 joomla 版本是 2.5。

我目前为浏览器设置了样式表，例如 Internet Explorer 和 Firefox，但不知道如何告诉网站专门为 iPad 等设备加载 css 文件。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T17:32:11.393

@isher 的回答是一个好方法，但是要导入 CSS 文件，我会这样做，使用 Joomla 编码标准：

```
<?php
$isiPad = (bool) strpos($_SERVER['HTTP_USER_AGENT'],'iPad');

if ($isiPad){    
   $doc = JFactory::getDocument(); //only include if line doesn't already exist
   $doc->addStyleSheet (JURI::root() . "template/template-name/ipad-styles.css" );
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T04:52:03.997

或者您可以使用此脚本并添加到您的模板或自定义模块（分配给所有页面）：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script type="text/javascript">
jQuery(function($){ 
var userAgent = navigator.userAgent.toLowerCase();
var regex = new RegExp('ipad',"i"); 
if(userAgent.match(regex)){
    $('<link href="css/ipad.css" rel="stylesheet" type="text/css"/>').appendTo($('head'));
}});
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T16:11:03.307

这样的事情应该这样做：

```
<?php
$isiPad = (bool) strpos($_SERVER['HTTP_USER_AGENT'],'iPad');

if $isiPad;    
  echo "<link href='ipad-styles.css' rel='stylesheet' type='text/css'>";
?> 
```

# sql-server - 将列从 NVARCHAR 更改为 NBINARY

> ID：14305224
> 
> 赞同：3
> 
> 时间：2013-01-13T16:03:59.127
> 
> 标签：sql-server, sql-server-2008-r2

我不小心创建了一个类型错误的列`NVARCHAR`（用于存储密码盐），我想将其转换为`NVARBINARY`.

我试过

```
ALTER TABLE [dbo].[TableName]
    ALTER COLUMN [ColumnName] [varbinary] (20) NOT NULL
GO 
```

但它说

> *不允许从数据类型 nvarchar 到 varbinary 的隐式转换。使用 CONVERT 函数运行此查询。*

有没有办法做到这一点？`CONVERT`似乎只是为了表达，而不是为了改变。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T16:53:32.557

改变的唯一方法是：

```
Create Table a (id int,blb Nvarchar(10))

insert into a Values
(1,'Test'),
(2,N'Test2');

BEGIN Transaction
ALTER TABLE a
ADD blb_New [varbinary] (20) NULL
GO

UPDATE a
SET blb_new = CAST(blb AS varbinary(20))
GO

ALTER TABLE a
DROP COLUMN blb
GO

EXEC sp_rename 'a.blb_new', 'blb', 'COLUMN'
GO
COMMIT Transaction

Select *,CAST(blb as Nvarchar(20)) from a

Drop Table a 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T17:00:05.210

您可以先将同一列中的所有值从 NVARCHAR 转换为 NVARBINARY。转换所有值后使用 Alter table

您可以参考以下链接： [Converting NVARCHAR(255) to DATE](https://stackoverflow.com/questions/13124944/converting-nvarchar255-to-date)

# php - Preg_replace ：“foo”、“bar”、“foo bar”和“bar foo”

> ID：14305228
> 
> 赞同：0
> 
> 时间：2013-01-13T16:04:16.940
> 
> 标签：php, html, regex

我使用正则表达式来查找一些单词，并对单词/字符串做一些事情。

我的例子：

我不想用我找到的所有单词设置`<strong>`标签：

```
$string = 'Hello, there is foo, after there is bar but now I need foo bar.'

$html = preg_replace('/(foo|bar)/', '<strong>$1</strong>', $string);

$html will be 'Hello, there is <strong>foo</strong>, after there is <strong>bar</strong> but now I need <strong>foo</strong> <strong>bar</strong>.' 
```

而且我不想，如果他们是 1 个单词，然后是 1 个搜索的其他单词，那么结果：

```
'Hello, there is <strong>foo</strong>, after there is <strong>bar</strong> but now I need <strong>foo bar</strong>.' 
```

如何修改我的正则表达式以获取我们之间的 2 个单词并在没有分隔标签的情况下对其进行处理？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T16:07:07.117

```
$search = 'foo bar blah';
$string = 'Hello, there is foo, after there is bar but now I need foo bar blah.';

$search = preg_quote($search);
$regex = $search . '|' . str_replace(' ', '|', $search);

$html = preg_replace('/\b(' . $regex . ')\b/', '<strong>$1</strong>', $string);

echo $html; // Outputs: Hello, there is <strong>foo</strong>, after there is <strong>bar</strong> but now I need <strong>foo bar blah</strong>. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T16:14:35.723

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T16:07:07.753

```
$string = 'Hello, there is foo, after there is bar but now I need foo bar.';
$string.= ' Lets throw a bar foo in there as well!';

$html = preg_replace('/(bar foo|foo bar|foo|bar)/', '<strong>$1</strong>', $string);

echo $html; 
```

# sql-server - 如何在 ServiceStack OrmLite 中检索自动递增的 ID？

> ID：14305232
> 
> 赞同：22
> 
> 时间：2013-01-13T16:04:29.947
> 
> 标签：sql-server, servicestack, ormlite-servicestack

对于具有标识的表：

```
 [AutoIncrement]
    public int Id { get; set;} 
```

向数据库中插入新行时，检索对象 Id 的最佳方法是什么？

例如：

> db.Insert<> (new User());

插入后Id的值为0，但在数据库中显然不是这样。我能看到的唯一可能性如下：

```
Id = (int)db.GetLastInsertId(); 
```

但是，我不相信这是一个安全的电话。如果同时发生 100 个插入，则可能会返回另一个插入的 Id。在 EF 中，当您执行插入操作时，会为您设置 ID。

有谁知道解决这个问题的最佳方法？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-14T13:13:54.090

在默认使用参数化查询的**ServiceStack.OrmLite v4**中，有几个选项`db.Save()`可以自动填充 AutoIncrement Id，例如：

```
db.Save(item);
item.Id //populated with the auto-incremented id 
```

否则，您可以使用以下命令选择最后一个插入 ID：

```
var itemId = db.Insert(item, selectIdentity:true); 
```

以下是[展示 OrmLite 新 API 的更多示例](https://github.com/ServiceStack/ServiceStack.OrmLite/blob/master/tests/ServiceStack.OrmLite.Tests/ApiSqlServerTests.cs)。

* * *

对于 OrmLite **v3**

正确的调用是`db.GetLastInsertId()`SQL Server 引擎盖下的调用，例如调用[SELECT SCOPE_IDENTITY()](https://github.com/ServiceStack/ServiceStack.OrmLite/blob/master/src/ServiceStack.OrmLite.SqlServer/SqlServerOrmLiteDialectProvider.cs#L127)，它返回该**连接**的最后插入的 id 。

这是安全的，因为可能发生的所有其他并发插入都使用不同的数据库连接。为了让其他人使用相同的连接，需要将其处理并释放回池中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T12:58:44.117

您绝对应该使用工作单元模式，特别是在这种情况下，您将与数据库相关的代码包装在事务范围内。

在 ormLite 中，您可以通过 IDbCommand 和 IDbTransaction 实现这一点（参见此处的示例[http://code.google.com/p/servicestack/source/browse/trunk/Common/ServiceStack.OrmLite/ServiceStack.OrmLite.Tests/ShippersExample.cs](http://code.google.com/p/servicestack/source/browse/trunk/Common/ServiceStack.OrmLite/ServiceStack.OrmLite.Tests/ShippersExample.cs) )

查看代码，您会发现它会变得不那么神奇而更多地手动编码，但这是一种方式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-04-29T19:55:39.117

更新：如此处所示[，](https://github.com/ServiceStack/Issues/issues/12)如果您使用的是 ServiceStack/ORMLite v4，则需要利用参数化查询来获取插入的 ID。例如：

```
var UserId = db.Insert<User>(new User(), selectIdentity: true); 
```

# javascript - 如何将 js 文件包含到 Velocity 模板中？

> ID：14305235
> 
> 赞同：0
> 
> 时间：2013-01-13T16:04:40.727
> 
> 标签：javascript, liferay, velocity

我是速度新手。

我想使用引导程序创建新的 Liferay 主题。但不知道如何`js`在模板中包含文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T09:01:45.157

实际上，这与使用 HTML 页面的方式相同：

```
<script type="text/javascript" src="/my-theme/js/jquery.min.js"></script> 
```

只需确保 JavaScript 位于主题文件夹结构中的相关 js 文件夹中即可。

# algorithm - 强连通图的最小添加

> ID：14305236
> 
> 赞同：16
> 
> 时间：2013-01-13T16:04:41.057
> 
> 标签：algorithm, graph-theory, graph-algorithm

我有一组节点和它们之间的一组有向边。边缘没有重量。

我怎样才能找到必须添加以使图形强连接的最少边数（即，应该有从每个节点到所有其他节点的路径）？这个问题有名字吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-14T12:20:43.450

这是一个非常经典的图问题。

1.  运行类似 Tarjan-SCC 算法的算法来查找所有 SCC。将每个 SCC 视为一个新顶点，根据原图在这些**新顶点之间连接一条边，就可以得到一个新图。**显然，新图是有向无环图（DAG）。
2.  在DAG中，找到所有入度为0的顶点，我们定义它们为{X}；找到所有出度为0的顶点，我们定义它们{Y}。
3.  如果 DAG 只有一个顶点，则答案为 0；否则，答案是 max(|X|, |Y|)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T16:11:45.173

Off the top of my head, it seems the simplest (fewest edges) way to make a directed graph strongly connected would be to just have a cycle involving all nodes; so the minimum number of edges would just be N where N is the number of nodes. If there are already edges, just do something like connect longest existing directed path to the next longest path that doesn't overlap with your current path, until you form a complete cycle (once your path contains all nodes, connect the ends to form the cycle.)

Not sure if there is a more formal definition of any of this, but is seems logical to me.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T19:35:20.103

我会找到所有弱连接的组件，并将它们捆绑在一个循环中。

编辑：

更明确地说，这个想法是，如果您有 WCC `W(1),...,W(n)`，则可以从, for`W(i%n + 1)`中的任何节点访问所有内容。`W(i)``i=1 to n`

# ruby-on-rails - Ruby on Rails 模型自定义 to_s 方法，排除 nill 或空白值

> ID：14305245
> 
> 赞同：0
> 
> 时间：2013-01-13T16:05:32.527
> 
> 标签：ruby-on-rails, ruby

我定义了以下模型（使用 Mongoid，非活动记录）

```
class Address
  include Mongoid::Document

  field :extra, type: String
  field :street, type: String
  field :area, type: String
  field :city, type: String
  field :code, type: Integer

  validates :street, :city, presence: true

  def to_s
    "#{extra},#{street},#{area},#{city},#{code}"
  end
end 
```

我正在定义 to_s 方法，所以我可以使用：

```
<%= address %> 
```

在我看来，它会正确打印出地址。但是，上面代码的问题是，如果任何属性为空白或 nil，我最终会得到以下结果：

```
1.9.3p327 :015 > a
 => #<Address _id: 50f2da2c8bffa6e877000002, _type: nil, extra: "hello", street: nil, area: nil, city: nil, code: nil> 
1.9.3p327 :016 > puts a
hello,,,,,
 => nil 
```

使用一堆除非语句来检查值是空白还是 nil 似乎是错误的方法（我可以让它像那样工作，但看起来很hackish）

有什么更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T16:07:21.667

你可以用这个

```
def to_s
  [extra, street, area, city, code].select{|f| !f.blank?}.join(',')
end 
```

将元素存储在数组中，抛出无效值，使用分隔符连接。

# python - Django 中的后台作业

> ID：14305246
> 
> 赞同：-1
> 
> 时间：2013-01-13T16:05:32.827
> 
> 标签：python, django, twitter

我想创建 twitter-parser，使用 tweepy - 没关系。而且，我想使用 django 来保存和列出结果。首先，我遇到了问题 - 使用解析器将我的模型导入文件。

project_path/app_path/daemon.py - 如何导入模型？或者也许对于 Django 中现有的更合乎逻辑的方式的这种操作（对于一些后台作业，但使用 django）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T16:34:34.860

首先，追加`project_path`到`sys.path`以便python可以导入它：

```
import os
import sys
sys.path.append('/path/towhere/myproject/') 

os.environ['DJANGO_SETTINGS_MODULE'] = 'project_path.settings'

from app_path.models import *

#write your cron job. 
```

我认为您需要运行计划作业，更好的方法是编写[自定义命令](https://docs.djangoproject.com/en/dev/howto/custom-management-commands/)，这是此类实现的示例：[https ://github.com/tivix/django-cron](https://github.com/tivix/django-cron)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T16:35:00.540

编写脚本以与 django 交互的首选方法是创建[自定义管理命令](https://docs.djangoproject.com/en/dev/howto/custom-management-commands/)。这些将允许您创建一个命令行程序，让您与 django 交互。Django 提供了一个非常简单的框架来执行此操作，上面的文档中对此进行了清楚的解释。因此，您可以轻松地将其设置为 cron 作业。

如果您正在寻找处理后台作业的实时解决方案，[Celery](http://docs.celeryproject.org:8000/en/latest/getting-started/introduction.html)是一个绝佳的选择。

# json - 动态 JSON 文件与 API

> ID：14305247
> 
> 赞同：2
> 
> 时间：2013-01-13T16:05:44.263
> 
> 标签：json, architecture, asp.net-web-api

我正在设计一个包含大约 30,000 个对象的系统，但无法在两者之间做出决定：要么为每个对象预先计算一个 JSON 文件，然后通过指向文件的 URL 来获取数据（我认为 Twitter 做了类似的事情），要么有一个PHP/Perl/其他脚本会在请求时从数据库中即时生成 JSON 对象，然后将其发回。一个比另一个更适合吗？我想如果生成 JSON 数据需要很长时间，最好已经完成 JSON 文件。如果生成与访问数据库一样快怎么办？虽然我想一个人在数据库中有一个专门为此的专用表。数据不会经常更改，因此更新不是一成不变的事情。在这方面，数据对于所有强度和目的都是静态的。

无论如何，任何想法将不胜感激！

亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T16:07:14.050

您可能想尝试 MongoDB，它将对象检索为 JSON，并且具有高度可扩展性且易于设置。

# node.js - NodeJS 中的 MongoDB GridFS 驱动程序覆盖同名文件

> ID：14305249
> 
> 赞同：0
> 
> 时间：2013-01-13T16:06:01.710
> 
> 标签：node.js, mongodb, gridfs, node-mongodb-native

我有以下使用 node-mongodb-native 的代码（删除了错误检查以保持简洁）。

```
var mongo = require('mongodb').MongoClient;
var grid = require('mongodb').GridStore;
var url = 'mongodb://localhost:27017/mydatabase';

mongo.connect(url, function(err, db) {
    var gs = new grid(db, 'myfile.txt', 'w', {
        "metadata": {
            // metadata here
        }   
    }); 
    gs.open(function(err, store) {
        gs.writeFile('~/myfile.txt', function(err, doc) {
            fs.unlink(req.files.save.path, function (err) {
                // error checking etc
            }); 
        }   
    }); 
}); 
```

如果我运行它一次它工作正常并将文件存储在 GridFS 中。

现在，如果我在我的系统上删除该文件并创建一个具有相同名称但内容不同的新文件，然后再次通过该代码运行它，它会上传它。但是，它似乎覆盖了已经存储在 GridFS 中的文件。`_id`保持不变，但`md5`已更新为新值。因此，即使文件不同，因为名称相同，它也会覆盖 GridFS 中的当前文件。

有没有办法上传两个同名文件？如果`_id`是唯一的，为什么驱动程序仅根据文件名覆盖文件？

我在 GitHub 上发现了一个[类似的问题](https://github.com/mongodb/node-mongodb-native/issues/531)，但我使用的是最新版本的驱动程序`npm`，它完成了我上面解释的操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T17:06:50.317

就像一个真正的文件系统一样，文件名成为 GridFS 中用于读写的逻辑键。您不能有两个同名的文件。

您需要提供某种二级索引或新生成的文件名。

例如，为文件名添加时间戳。

或者，创建另一个集合，将生成的文件名映射到 GridFS 结构到您需要的任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-22T12:39:45.937

为了避免为您的文件创建额外的唯一标识符，您应该省略“写入模式”选项。这将允许 gridfs 创建一个新文件，即使它包含完全相同的数据。

'w' 覆盖数据，这就是覆盖现有文件的原因。

[http://mongodb.github.io/node-mongodb-native/api-generated/gridstore.html](http://mongodb.github.io/node-mongodb-native/api-generated/gridstore.html)

# plone - 使用@@search 页面作为主页

> ID：14305251
> 
> 赞同：3
> 
> 时间：2013-01-13T16:06:07.670
> 
> 标签：plone

我们想定制 Plone 网站主页，使其看起来像 Google 风格，因为它的主要用途是搜索内容。最近的基地是 /@@search 浏览器视图的结果。是否有任何快速且推荐的方法来实现这种定制？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-13T22:13:59.600

添加`search`到：`available view methods`_`ZMI -> portal_types -> Plone Site`

![在此处输入图像描述](../Images/4df6d06f8b9d009ef44ab865bc8fcada.png)

从 中选择`search`视图`display menu`：

![在此处输入图像描述](../Images/7561a2d801ff31a3d1e02c2c131feb5e.png)

享受搜索视图

![在此处输入图像描述](../Images/f768100904cbe6b22aa6e14b2dbabd7f.png)

通过以下方式将自定义导出到文件系统附加组件的奖励积分`ZMI -> portal_setup`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T17:28:09.477

这就是您可以将`@@search`视图设置为 plone 站点根目录上的默认视图的方法：

*   去`http://your.domain/site/manage_propertiesForm`
*   如果有`layout`属性，设置为值`@@search`
*   如果没有属性，则使用此名称、类型和值`layout`创建一个新的`string``@@search`

然后，您可以根据需要使用 CSS 设置搜索表单的样式。您可以使用 CSS-selector 使自定义更加具体`.template-search.portaltype-plone-site #searchform`。

# java - java虚拟机启动器错误：无法访问jarfile

> ID：14305253
> 
> 赞同：5
> 
> 时间：2013-01-13T16:06:14.350
> 
> 标签：java, jar

我已经下载了一个可以在 Windows XP 上运行的程序。根据说明，打开包含调用 .jar 文件的命令的 .bat 文件就足够了。然而程序并没有打开。在朋友的计算机中，该程序确实打开了。

我已经正确设置了java相关的环境变量。Java 工作正常。我已将 .jar 文件与 java sdk 相关联。

从 cmd 调用命令 javaw -Xms128M -Xmx512M -jar filename.jar 时出现 java 虚拟机启动器错误：无法访问 jarfile

然后我在jar所在的文件夹上调用了相同的命令，我没有错误，但程序的gui仍然没有打开。

有任何想法吗？

在 Windows 上支持建议卸载并手动重新安装 java，但 java 在任何其他应用程序中都可以正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-10T16:52:54.413

尝试以下一些方法：

1.  直接从 .exe 运行，所以 "C:...\jre\javaw.exe" -jar
2.  尝试使用 java -jar 而不是 javaw -jar。
3.  尝试移动文件。它可能位于权限敏感目录中。

此外，如果程序是使用 64 位 JDK 编译的，则可能需要 64 位 JRE 才能运行。在这种情况下，您需要有 64 位 OS/JRE 才能运行它。

# javascript - 如何解决在 Android OS 上的 textarea 上书写时显示字母的问题？

> ID：14305254
> 
> 赞同：1
> 
> 时间：2013-01-13T16:06:34.043
> 
> 标签：javascript, jquery-mobile

我正在使用 jQuery mobile 为 PhoneGap 开发一个 .Net 项目。我有一个包含文本框的表单，并且在页面末尾有一个文本区域：

```
<table width="100%" style="border-spacing: 4px;" class="tdContactUSLabel">
    <tbody>
        <tr>
            <td style="width: 25%">
                Sender
            </td>
            <td style="width: 75%">
                <input type="text" name="txtSender" id="txtComplaintPreUserFullName"  value="" />
            </td>
        </tr>
        <tr>
            <td>
                Email
            </td>
            <td>
                <input type="email" name="txtemail" id="txtemail" value="" />
            </td>
        </tr>
        <tr>
            <td valign="top">
                Message
            </td>
            <td>
                <textarea name="txtMessage" id="txtMessage" class="textarea2" rows="8"
                    cols="15"></textarea>
            </td>
        </tr>
    </tbody>
</table> 
```

当我单击该文本区域时，键盘打开，而我在书写时文本区域中没有出现任何字母，直到我关闭键盘。关闭键盘后，我输入的所有字母突然出现。任何人都知道为什么会发生这种情况？

顺便说一下，这个问题只发生在运行 Android 操作系统的设备上。

# javascript - Ember - 自动重定向到 firstObject

> ID：14305255
> 
> 赞同：17
> 
> 时间：2013-01-13T16:06:36.960
> 
> 标签：javascript, ember.js, ember-router

我想要一个 Ember 路径`/clinic/1`来自动重定向以显示第一个医生：`/clinic/1/doctor/1`.

每个诊所都有很多医生。

不幸的是，如果我使用此代码：

```
var doctor = clinicController.get('content.doctors.firstObject');
router.transitionTo('clinic.doctor.index', doctor); 
```

`content.doctors.length`...它不起作用，`0`当这段代码在`app_router.js`.

有任何想法吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-13T18:36:31.810

你应该能够做到这一点：

```
App.DoctorsRoute = Ember.Route.extend({
  model: function() {
    return App.Doctor.find();
  },

  redirect: function() {
    var doctor = this.modelFor('doctors').get('firstObject');
    this.transitionToRoute('doctor', doctor);
  }
}); 
```

这将起作用，因为：

*   如果模型挂钩返回尚未加载的对象，则其余挂钩将在模型完全加载之前不会运行。
*   如果`redirect`钩子转换到另一个路由，其余的钩子将不会运行。

请注意，从[2426cb9 开始](https://github.com/emberjs/ember.js/commit/2426cb93ef9844d96219f399577e32fd7b667597)，您可以`.index`在转换时不使用隐式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-05T11:16:31.517

在基于 ember 数据的应用程序中，在 Route 上重定向对我不起作用，因为在重定向点未加载数据，但这对我有用......

在角色控制器中，我转换到加载 firstObject 的角色路由。

```
Application.RolesController = Ember.ArrayController.extend({

    selectFirstObject: function () {
        if (this.get('content').get('isLoaded')) {
            var role = this.get('firstObject');
            this.transitionToRoute('role', role);
        }
    }.observes('content.isLoaded')

}); 
```

HTH，格里

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-21T23:39:37.323

作为更新，如果您不想重定向，因为您有嵌套路由，您将需要基于预期路由使用条件重定向。

`redirect`有两个参数传递给它，模型和转换对象。转换具有`targetName`您可以根据其值有条件地重定向的属性。

```
redirect: function(model, transition){
  if(transition.targetName ==='doctors.index'){
    this.transitionTo('doctor', model.get('firstObject'));
  }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-29T14:16:44.753

对于 EmberCLI 用户，您可以通过执行以下操作来实现相同的目的：

```
//app/routes/clinics/show.js
import Ember from 'ember';

export default Ember.Route.extend({
  redirect: function(model) {
    var firstDoctor = model.get('doctors.firstObject');
    this.transitionTo('doctor', firstDoctor);
  }
}); 
```

# ios - 从类别中显示模态 VC

> ID：14305256
> 
> 赞同：0
> 
> 时间：2013-01-13T16:06:41.013
> 
> 标签：ios, uitabbarcontroller, uialertview, categories

我有一个从 NSMangedObject 子类分支出来的类别。它处理核心数据对象的创建和删除。

在我的创建方法中，我向用户显示 UIAlert 询问他们是否要配置新对象。响应 UIAlert 的委托是同一类别。

我想从这里将配置对话框推送到屏幕上。这样做的最佳方法是什么。我的整个应用程序基于 UITabBarController

这看起来对吗……

```
-(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex{
    AppDelegate *dc = [[UIApplication sharedApplication]delegate];

    //push the Configuration dialog to the screen from here
    NewVC *newVC = [[NewVC alloc]initWithNibName:@"New VC" bundle:nil];

    [dc.tabBarController presentViewController:newVC animated:YES completion:nil];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T16:08:33.063

你应该让你的 View Controller 成为它的代表，`UIAlertView`并从那里展示你的模式。所以`clickedButtonAtIndex`应该把它移到你的视图控制器的代码中。

# javascript - Javascript在数组中搜索文本

> ID：14305257
> 
> 赞同：0
> 
> 时间：2013-01-13T16:06:56.167
> 
> 标签：javascript, python, json

我在搜索数组中的一些文本时遇到问题。我只想搜索数组中的一些文本，而不是全部。

我的数组：

```
var myJSONObject = [
    "2013-01-08: (7:24) vs (7:35)",
    "2013-01-08: (2:15) vs (1:10)",... 
```

`document.write(include(myJSONObject, "2013-01-08: (3:4) vs (8:3)") + "<br>");`是真的。

`document.write(include(myJSONObject, "(8:3)") + "<br>");`不是。

那么，我如何仅搜索 (8:3) 并打印所有包含 (8:3) 的字符串。

我在python中这样做：`[x for x in list if "(8:3)" in x]`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T16:09:49.233

您可以使用 Array.filter (http://www.tutorialspoint.com/javascript/array_filter.htm)：

```
 var search = "(8:3)",
     res = Array.filter(myJSONObject, function(in) {
       return in.indexOf(search) > -1;
     }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T16:09:52.150

做这个

```
var myJSONObject = [ "2013-01-08: (7:24) vs (7:35)", "2013-01-08: (2:15) vs (1:10)",...
for(var i =0;i<myJSONObject.length;i++){
if(myJSONObject[i].indexOf("8:3")!=-1){
   document.writeln(myJSONObject[i]);
}else
   document.writeln("8:3 not found");
} 
```

# css - 使用 CSS 将鼠标悬停在另一个 div 上时显示一个 div

> ID：14305262
> 
> 赞同：1
> 
> 时间：2013-01-13T16:07:08.027
> 
> 标签：css, ruby-on-rails, popup, hover, mousehover

将鼠标悬停在导航选项卡上后，我需要显示图像。从下面的 ruby​​ 代码中，您可以看到我为每个导航提供了一个 id（如果需要，我也可以提供一个类）：

```
<div class="top-container">
<nav class="navbar">
  <ul>
  <% Placement.all.each do |placement| %>
  <li class=<%= "highlightedTopNav" if placement.id==params[:id].to_i %>> <%= link_to placement.placementname, placement_path(placement.id), :id => placement.placementname %> </li>
  <%end%>
  </ul>
</nav>
</div> 

<div class="container">
  <div style="background-image:url('images/pointingup.png');">
    <img src="images/...">
  </div>
</div> 
```

现在，我需要为每个导航显示带有上面“容器”div 的不同图像

我在网上尝试了很多解决方案，但没有一个对我有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T16:20:42.930

很多可能取决于您在这里尝试实现的整体设计，但在 css 中，需要与您悬停的元素和您想要影响的元素建立某种父/兄弟关系。

例如：

```
<li>
   <div>Hello</div>
</li> 
```

在您的样式表中，您可以：`li:hover div { background: red; }`

由于 div 是可以工作的 LI 元素的子元素，因此在您的示例中，您正在影响的 div 在 dom 中与您悬停的元素没有关系。这意味着您很可能必须在 javascript 中执行此操作。

或者，您可以在 li 元素中放置一个空元素，`<i>`这种“图标”技术通常很受欢迎，并在其上设置您的样式和背景图像，类似于产品查找器下拉菜单中的内容：[http:// www.havells-sylvania.com/](http://www.havells-sylvania.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T16:27:14.117

就像 Barking Tiger 提到的那样，显示`<div>`需要是您悬停的那个的孩子才能仅使用 css。

如果你想使用 Javascript 或 jQuery，你可以尝试这样的事情：

```
$("#navid").hover(
  function () {
    $(this).show(IMAGE);
  },
  function () {
    $(this).hide(IMAGE);
  }
); 
```

编辑：如果你不介意有一个子图像，你可能会做这样的事情：

如果您的 HTML 最终是这样的：

你会按照这些思路做一些事情来改变悬停时的图像。

```
#navid
{

}

#navid:hover .hidden
{
    display:block;
}

.hidden
{
        display:none;
        position:absolute;
        z-index:999;
        top:10;
        left:10px;

} 
```

请注意绝对定位和 z-index，这将使您的图像保持在导航前面。如果没有 CSS 的代码示例，很难准确说出您想要它的样式，所以只需从那里调整它。

# html - 浏览器支持 HTML5 全屏 API

> ID：14305267
> 
> 赞同：2
> 
> 时间：2013-01-13T16:08:05.067
> 
> 标签：html, fullscreen

谁能告诉我主流浏览器对 HTML5 全屏 API 的支持情况如何？具体来说，每个浏览器的最低版本支持它的成熟？对于那些不知道的人（我强烈怀疑 IE 就是其中之一），是否有任何第三方库可以帮助将其标准化为该浏览器版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T16:19:54.757

这将回答您的问题：[http ://www.longtailvideo.com/html5/fullscreen](http://www.longtailvideo.com/html5/fullscreen)

浏览器/设备市场份额 HTML5 视频 Flash 视频 Chrome 30% 是 是 Firefox 19% 是 是 Internet Explorer 9 16% 是 是 Internet Explorer 6/7/8 13% 否 是 Safari 4% 是 是 Opera 1% 是 是 iOS 5%是 否 Android 4% 是 否 其他（功能手机） 8% 否 否

当前规范：[https ://dvcs.w3.org/hg/fullscreen/raw-file/tip/Overview.html](https://dvcs.w3.org/hg/fullscreen/raw-file/tip/Overview.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-12T10:22:51.990

检查浏览器支持的最佳网站：http: [//caniuse.com/#feat=fullscreen](http://caniuse.com/#feat=fullscreen)

# asp.net - cdata 注意到在 asp.net xml 中关闭

> ID：14305271
> 
> 赞同：0
> 
> 时间：2013-01-13T16:08:38.317
> 
> 标签：asp.net, xml, visual-studio-2010

我正在制作一个带有 asp.net 加载 xml 文件的项目

在其中一个 xml 文件中，我有一个问题，我想显示一张图片并在不同的问题中闪烁。

```
<![CDATA[<a><img src="Study/1.png"/><a>]]> 
```

那是我在 xml 中使用的代码，我的问题是它可以很好地显示 flash 内容和图像，但它没有关闭 cdata 属性，即

> ]]> 直接在图像或对象之后。

有任何想法吗？

这是我的xml

```
<?xml version="1.0" encoding="UTF-8"?>
<quiz xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"      xsi:noNamespaceSchemaLocation="quiz.xsd">
<mchoice>
    <question>For aircraft flying over the high seas, which rules shall be in force?  <![CDATA[<a><img src="Study/1.png"/></a>]]></question>
    <answer>The rules established by the state(s) adjacent to the high seas over flown </answer>
    <answer>The rules established by the state of the operator of the aircraft </answer>
    <answer correct="yes">The rules established by the state of registry of the aircraft </answer>
    <answer>The rules established under the Convention of international civil aviation </answer>
</mchoice>
     </quiz> 
```

这是我的架构

```
 <?xml version="1.0" encoding="UTF-8"?>
   <xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"    elementFormDefault="qualified" attributeFormDefault="unqualified">
<xs:element name="quiz">
    <xs:complexType>
        <xs:choice>
            <xs:element name="mchoice" maxOccurs="unbounded">
                <xs:complexType>
                    <xs:sequence>
                        <xs:element name="question" type="xs:string"/>
                        <xs:element name="answer" minOccurs="2" maxOccurs="unbounded">
                            <xs:complexType>
                                <xs:simpleContent>
                                        <xs:extension base="xs:string">
                                        <xs:attribute name="correct" use="optional">
                                            <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                    <xs:enumeration value="yes"/>
                                                    <xs:enumeration value="no"/>
                                                </xs:restriction>
                                            </xs:simpleType>
                                               </xs:attribute>
                                         </xs:extension>
                                </xs:simpleContent>
                            </xs:complexType>
                        </xs:element>
                    </xs:sequence>
                </xs:complexType>
            </xs:element>
        </xs:choice>
    </xs:complexType>
</xs:element>
 </xs:schema> 
```

这是我的 xml 的 asp.net 代码

```
 Public Shared Function GetQuizDataFromXML(ByVal XMLFileName As String) As ArrayList
    Dim strXmlFilePath As String = XMLFileName
    Dim xDoc As XmlDocument = New XmlDocument()
    xDoc.Load(strXmlFilePath)
    Dim Arl As New ArrayList
    If Not IsNothing(xDoc) AndAlso xDoc.SelectNodes("/quiz/mchoice").Count > 0 Then
        Dim TotalQuestions As Integer = 0
        TotalQuestions = xDoc.SelectNodes("/quiz/mchoice").Count
        For i As Integer = 1 To TotalQuestions
            Dim strXPath As String = ""
            strXPath = "/quiz/mchoice[" & i.ToString() & "]"
            Dim oQ As New Questions
            oQ.QuestionID = i + 1
            oQ.Question = xDoc.SelectSingleNode(strXPath & "/question").InnerXml
            Dim xNodeList As XmlNodeList
            xNodeList = xDoc.SelectNodes(strXPath & "/answer")
            For j As Integer = 0 To xNodeList.Count - 1
                Dim oA As New Answers
                oA.QuestionID = oQ.QuestionID
                oA.Answer = xNodeList.Item(j).InnerText
                oA.AnswerID = j + 1
                Dim xNodeAttr As Object
                'Extract correct answer
                xNodeAttr = xNodeList.Item(j).Attributes.ItemOf("correct")
                oA.IsAnswer = False
                If Not xNodeAttr Is Nothing Then
                    If xNodeAttr.Value = "yes" Then
                        oA.IsAnswer = True
                    End If
                End If
                oQ.Answers.Add(oA)
            Next
            Arl.Add(oQ)
        Next
    End If
    Return Arl
    End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T09:46:42.660

也许尝试将整个问题放在下面的`CDATA`部分中

```
<question>
    <![CDATA[For aircraft flying over the high seas, which rules shall be in force? <a><img src="Study/1.png"/></a>]]>
</question> 
```

如果这不能解决您的问题，请解决问题。从可行的方法开始并增加复杂性，直到出现问题。例如，`<question>`按此顺序修改标签（第一个应该可以）。

1.  `<question>This is a test question</question>`
2.  `<question><![CDATA[This is a test question inside a CDATA tag]]></question>`
3.  `<question><![CDATA[This is a test question inside a CDATA tag with a <a>link</a>]]></question>`
4.  `<question><![CDATA[This is a test question inside a CDATA tag with a <a>link</a> and an image <img src="Study/1.png" />]]></question>`
5.  `<question><![CDATA[This is a test question inside a CDATA tag with a linked image <a><img src="Study/1.png" /></a>]]></question>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T16:18:44.080

可能是因为`<a>`标签没有关闭吗？应该是`</a>`。

**更新**

[好吧，根据W3C 规范](http://www.w3.org/TR/REC-xml/#sec-cdata-sect)`CDATA`，该部分的标记似乎没有任何问题。

但是，由于您使用的是 ASP.net，根据[这篇 MSDN 文章](http://msdn.microsoft.com/en-us/library/ms256076.aspx)，您可以尝试用 替换`]]>`，`] ]>`看看是否可行。

# java - 支持 Android 应用的插件

> ID：14305278
> 
> 赞同：2
> 
> 时间：2013-01-13T16:09:11.377
> 
> 标签：java, android, eclipse, eclipse-plugin, webview

嗨！我想在 Android 应用程序中使用 Flash 播放器。如果我使用“wSettings.setPluginsEnabled(true);” 然后日食写这个：

> 不推荐使用 WebSettings 类型的方法 setPluginsEnabled(boolean)

因此我使用这个：

```
 wSettings.setPluginState(PluginState.ON); 
```

但因此无法使用 Flash 播放器。我的代码是这样的：

```
package com.exm.be;
import android.os.Bundle;
import android.annotation.SuppressLint;
import android.app.Activity;
import android.view.Menu;
import android.webkit.WebSettings;
import android.webkit.WebSettings.PluginState;
import android.webkit.WebView;
import android.webkit.WebViewClient;
@SuppressLint("SetJavaScriptEnabled")
public class MainActivity extends Activity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        WebView mywebview = (WebView) findViewById(R.id.webView);
        WebSettings wSettings = mywebview.getSettings();
        wSettings.setJavaScriptEnabled(true);
        wSettings.setPluginState(PluginState.ON);
        mywebview.setWebViewClient(new WebViewClient());
         mywebview.loadUrl("http://www.youtube.com/watch?v=940rzFtFNbs");
    }
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);  
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-17T06:06:38.187

将 android:hardwareAccelerated="true" 添加到清单文件中。

```
<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" 
    android:hardwareAccelerated="true"> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-15T09:41:21.837

> 请检查 adobe flash 播放器。

在那之后 。

mWebView.setFocusable(true); mWebView.setFocusableInTouchMode(true); mWebView.getSettings().setJavaScriptEnabled(true); mWebView.getSettings().setPluginsEnabled(true);

# c# - LINQ to SQL 中的 Guid 类型和（'>' 大于比较）

> ID：14305282
> 
> 赞同：5
> 
> 时间：2013-01-13T16:09:24.333
> 
> 标签：c#, asp.net, .net, linq-to-sql

请帮我。我尝试在 .Where() 查询方法中比较两个 guid。但我得到编译错误。错误 1 ​​运算符“>”不能应用于“System.Guid”和“System.Guid”类型的操作数

```
Guid startUser = ////Here I get user by url id param
List<Friends> friends = Common.DataContext.Friends.Where(u => u.FriendID > startUser).Take(5); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T16:11:06.420

与 ：

```
u.FriendID.CompareTo(startUser) > 0 
```

?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-02T15:27:12.197

我知道这是一个老问题，但我以前看过这个数据案例，它可能与将来的某个人有关。当您出于某种原因将表（物理组织，默认使用主键）聚集在唯一标识符上时，这可能是相关的。如果您需要批量读取或分页表，您可能会得到如下 SQL 查询：

```
SELECT TOP (@batchsize)
    *
FROM myTable
WHERE UserId > @previousBatchUserId 
```

这通常不是一个非常优化的设计，并且正如您所观察到的，它不适用于 LINQ-to-SQL。此外，如果您稍后在添加更多行后执行相同的查询，批处理中的内容将会改变。如果您有一个 CreatedDate(time) 列，那么按它排序会好得多。或者使用创建的日期列作为第一个条件，然后使用 != 检查 GUID（如果可以使用相同的标记创建多个）。理想情况下，您将添加一个代理标识列（并在其上集群），然后您可以过滤该 ID，该 ID 大于与您所需的 GUID 对应的那个。

它可能看起来像：

```
Guid startUser = //some guid
int startUserId = Common.DataContext.Friends.Single(u => u.FriendID == startUser).Id;
List<Friends> friends = Common.DataContext.Friends.Where(u => u.Id > startUserId); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-13T16:14:30.400

将大于或小于应用于 Guid 是没有意义的。

`0f8fad5b-d9cb-469f-a165-70867728950e`和 `7c9e6679-7425-40de-944b-e07fc1f90ae7`

两个向导，但哪个更大？你放弃 - 并计算十六进制的总数吗？或者如何在 - 之间添加十六进制的总和？

它只是没有完成（尽管它可能是）

但是，应用逻辑 == 和 != 确实有意义。Guid 结构确实重载了 == 和 != 运算符，因此使用它们，您还可以轻松比较字符串值，即

`var isEqual = guid.ToString().Equals(otherGuid.ToString());`

# android - 登录以从应用程序播放开发者控制台

> ID：14305292
> 
> 赞同：-1
> 
> 时间：2013-01-13T16:10:30.403
> 
> 标签：android

我想制作一个应用程序，以一种易于阅读的方式显示来自 Play 开发者控制台的信息。

最好使用什么程序来获取我可以从中刮取信息的 html 文件？

是否有可以简化此过程的库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T13:03:09.280

我目前正在尝试在我正在开发的 php 网站上执行此操作。到目前为止，我已经设法通过服务进行身份验证，获取各种统计信息的 JSON 响应，我目前正在尝试解析它们。

如果您需要一些帮助/指南，请随时问我一些问题，我很乐意提供帮助。（为了做到这一点，我受到了 Andlytics android app github 项目的启发）

我知道您想使用 Android 来执行此操作，但主要步骤是相同的​​。我真的建议你检查一下 Andlytics 是如何做到的。

另外，我可以确认还没有可用的库，在尝试做自己的事情之前我已经搜索了一段时间。

# ruby-on-rails - 将命名路由传递给 RSpec 中的控制器宏

> ID：14305293
> 
> 赞同：4
> 
> 时间：2013-01-13T16:10:32.273
> 
> 标签：ruby-on-rails, rspec

我正在尝试通过为常用测试添加一些控制器宏来干燥我的 RSpec 示例。在这个稍微简化的示例中，我创建了一个宏来简单地测试获取页面是否会导致直接到另一个页面：

```
def it_should_redirect(method, path)
  it "#{method} should redirect to #{path}" do
    get method
    response.should redirect_to(path)
  end
end 
```

我试图这样称呼它：

```
context "new user" do
  it_should_redirect 'cancel', account_path
end 
```

当我运行测试时，我收到一条错误消息，指出它无法识别 account_path：

> 未定义的局部变量或方法 `account_path' for ... (NameError)

[我尝试根据此 SO 线程中](https://stackoverflow.com/questions/9475857/rspec-and-named-routes)给出的关于 RSpec 中命名路由的指南包含 Rails.application.routes.url_helpers ，但仍然收到相同的错误。

如何将命名路由作为参数传递给控制器​​宏？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T17:56:04.620

附带的 url 助手`config.include Rails.application.routes.url_helpers`仅在示例中有效（使用`it`或设置的块`specify`）。在示例组（上下文或描述）中，您不能使用它。尝试使用符号，`send`而不是像

```
# macro should be defined as class method, use def self.method instead of def method
def self.it_should_redirect(method, path)
  it "#{method} should redirect to #{path}" do
    get method
    response.should redirect_to(send(path))
  end
end

context "new user" do
  it_should_redirect 'cancel', :account_path
end 
```

不要忘记在配置中包含 url_helpers。

或者调用示例中的宏：

```
def should_redirect(method, path)
  get method
  response.should redirect_to(path)
end

it { should_redirect 'cancel', account_path } 
```

# javascript - 如果图像宽度小于 X，则添加类

> ID：14305299
> 
> 赞同：0
> 
> 时间：2013-01-13T16:11:16.503
> 
> 标签：javascript, jquery, image

正如标题所暗示的，我希望有一点 jQuery - 如果图像小于定义的宽度，它会为某个元素添加一个类。对我来说，这似乎很容易，但由于某种原因它不起作用。

```
$(document).ready(function() {
    var image = $('.work-each img');
        if (image.width() < 500) {
            $('.work-text').addClass('work-text-small');
        }
}); 
```

如果在每个 .work-each 下找到的图像小于 500 像素，则应该向元素 'work-text' 添加一个类 'work-text-small'。

HTML 示例（每个）

```
<div class="work-each">
   <div>
      <img src=""/>
      <div class="work-text">
         <p>Title</p>
         <p>Text</p>
      </div>
   </div>
</div>
<div class="work-each">
   <div>
      <img src=""/>
      <div class="work-text">
         <p>Title</p>
         <p>Text</p>
      </div>
   </div>
</div>
<div class="work-each">
   <div>
      <img src=""/>
      <div class="work-text">
         <p>Title</p>
         <p>Text</p>
      </div>
   </div>
</div> 
```

谢谢，R

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-13T16:13:36.910

Use `load` instead, when DOM is ready only `img` tag is defined but the image isn't loaded yet. Its size comes when it's fully loaded

```
$(window).load(function () {
    var image = $('.work-each img');
    if (image.width() < 500) {
        $('.work-text').addClass('work-text-small');
    }
}); 
```

However as @rdck pointed if there are more images with `class=".work-each img"` code won't work so in that case you go trough each image and apply the class

```
$(window).load(function () {
    var image = $('.work-each img');
    image.each(function () {
        var that = $(this);
        if (that.width() < 500) {
            that.next('div.work-text').addClass('work-text-small');
        }
    })

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T16:37:18.007

如果您使用服务器代码获取尺寸并相应地设置类，则无需等待图像加载，并且 css 会在 html 存在时立即生效

# java - 从 XML 文件中拆分字符串

> ID：14305301
> 
> 赞同：1
> 
> 时间：2013-01-13T16:11:18.967
> 
> 标签：java, xml

我正在读取一个 xml 文件，其中包含一个类的许多对象的属性；我正在使用 DOM xml 解析器；在这个类中还有一个数组字段（NEARBOXID），所以我想知道是否是从 xml 文件中读取它的好方法，比如单个字符串，然后拆分它的内容，或者有没有更好的方法来做到这一点？

文件是这样的：

```
<CONFIGURATION>
<CONFIG> 
    <BOXID>1</BOXID> 
    <LENGTH>100</LENGTH>
    <NEARBOXID>2,3,4,5</NEARBOXID>
</CONFIG>
    <CONFIG> 
    <BOXID>2</BOXID> 
    <LENGTH>200</LENGTH>
    <NEARBOXID>1,8</NEARBOXID>
</CONFIG> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T16:13:27.333

You should read as string and split it. Using a loop convert the numbers into integer using `ParseInt`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T16:13:59.653

No, it's up to you to split that field. The [`String.split`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split%28java.lang.String%29) method will do it just fine.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T16:17:31.650

您需要使用[XPath](http://www.ibm.com/developerworks/library/x-javaxpathapi/index.html)提取所需标记中的完整数据，然后使用[`String.split()`](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#split%28java.lang.String%29), 从完整字符串中获取所需的值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-13T18:26:50.580

由于您要将 XML 转换为 Java 对象，因此我将演示如何使用[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)实现来完成此操作。从 Java SE 6 开始，JAXB 实现包含在 JDK/JRE 中。

我建议将`NEARBOXID`元素的内容更改为空格分隔。

```
<NEARBOXID>2 3 4 5</NEARBOXID> 
```

对应于 XML 模式中的以下条目。这意味着您可以验证元素是否包含空格分隔的 int 值而不是空格分隔的字符串。

```
 <xs:element name="NEARBOXID" minOccurs="0">
    <xs:simpleType>
      <xs:list itemType="xs:int"/>
    </xs:simpleType>
  </xs:element> 
```

**配置**

然后您可以使用 JAXB 的`@XmlList`注释映射元素（请参阅：[http](http://blog.bdoughan.com/2010/09/jaxb-collection-properties.html) ://blog.bdoughan.com/2010/09/jaxb-collection-properties.html ）。

```
import javax.xml.bind.annotation.*;

@XmlAccessorType(XmlAccessType.FIELD)
public class Config {

    @XmlElement(name="BOXID")
    private int boxId;

    @XmlElement(name="LENGTH")
    private int length;

    @XmlElement(name="NEARBOXID")
    @XmlList
    private int[] nearBoxIds;

} 
```

**配置**

下面的对象将映射到 XML 文档的根。

```
import java.util.List;
import javax.xml.bind.annotation.*;

@XmlRootElement(name="CONFIGURATION")
@XmlAccessorType(XmlAccessType.FIELD)
public class Configuration {

    @XmlElement(name="CONFIG")
    private List<Config> configs;

} 
```

**演示**

下面是一些演示代码，以证明一切正常。

```
import java.io.File;
import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Configuration.class);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        File xml = new File("src/forum14305301/input.xml");
        Configuration configuration = (Configuration) unmarshaller.unmarshal(xml);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(configuration, System.out);
    }

} 
```

**输入.xml/输出**

下面是运行演示代码的输入和输出。

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<CONFIGURATION>
    <CONFIG>
        <BOXID>1</BOXID>
        <LENGTH>100</LENGTH>
        <NEARBOXID>2 3 4 5</NEARBOXID>
    </CONFIG>
    <CONFIG>
        <BOXID>2</BOXID>
        <LENGTH>200</LENGTH>
        <NEARBOXID>1 8</NEARBOXID>
    </CONFIG>
</CONFIGURATION> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-13T16:25:21.977

我认为这是一个选择问题。你可以这样使用它：

```
<NEARBOXID>2,3,4,5</NEARBOXID> 
```

或者你这样使用它：

```
<NEARBOXID>2</NEARBOXID>
<NEARBOXID>3</NEARBOXID>
<NEARBOXID>4</NEARBOXID>
<NEARBOXID>5</NEARBOXID> 
```

第二种方式需要您使用与第一种不同的解析代码，但您可以节省一些用于拆分和处理字符串的代码。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-13T16:30:19.893

将数据提取为字符串并对其执行 split() 。

更好的方法是维护单个标签，例如

```
<NEARBOXID>2</NEARBOXID>
<NEARBOXID>3</NEARBOXID>
<NEARBOXID>4</NEARBOXID>
<NEARBOXID>5</NEARBOXID> 
```

对于解析 xml 查询，您可以根据需要使用 XPath、XQuery 或 JAXB。

# scala - Combining 2 Options into 1

> ID：14305308
> 
> 赞同：26
> 
> 时间：2013-01-13T16:11:45.100
> 
> 标签：scala, scala-option

Is there a predefined function x in Scala that combine 2 Options so that

```
Some(a) x None => Some(a)
None x Some(b) => Some(b)
None x None => None 
```

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-01-13T16:13:17.297

Yes, this is the `orElse` method. It chooses the first defined value, or `None` if neither is defined.

```
scala> Some(1) orElse None
res0: Option[Int] = Some(1)

scala> None orElse Some(1)
res1: Option[Int] = Some(1)

scala> None orElse None
res2: Option[Nothing] = None

scala> Some(1) orElse Some(2)
res3: Option[Int] = Some(1) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-13T16:14:28.150

手动操作并不难：

```
scala> val a = Some(1)
a: Some[Int] = Some(1)

scala> val b = Some(2)
b: Some[Int] = Some(2)

scala> Seq(a,b).flatten.headOption
res0: Option[Int] = Some(1) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-13T22:58:42.773

在问题评论中，你提到你不能拥有`Some(a)`and `Some(b)`，所以你真正拥有的是`Option[Either[Int,Int]]`。在这种情况下，您可以使用`x.map(_.merge)`回到`Option[Int]`，例如

```
scala> val x:Option[Either[Int,Int]] = Some(Left(2))
x: Option[Either[Int,Int]] = Some(Left(2))

scala> x.map(_.merge)
res0: Option[Int] = Some(2) 
```

# c# - 实现窗口拖放 WPF

> ID：14305310
> 
> 赞同：0
> 
> 时间：2013-01-13T16:11:50.997
> 
> 标签：c#, .net, wpf, drag-and-drop, window

[我不得不像这样](http://mahapps.com/MahApps.Metro/#roll_your_own_window)使用 MahApps.Metro 从头开始​​创建一个新窗口。这将为您创建一个没有标准窗口按钮（关闭、恢复或最小化）的无边框窗口。

我实现了这些按钮，效果很好。我看到的与其他所有窗口不同的是允许用户使用拖放更改窗口位置的行为。

我一直在寻找，但我不知道该怎么做。

我应该如何在非标准窗口中实现拖放行为？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T06:43:08.787

让您的窗口处理事件**MouseLeftButtonDown**：

```
 private void Window_MouseLeftButtonDown(object sender, MouseButtonEventArgs e)
    {
        this.DragMove();
    } 
```

这适用于标准 WPF 应用程序，不确定 Metro 应用程序是否可以使用它。

如果您愿意，可以使用另一个控件来处理此事件。例如，您可以使用模拟标题栏的图像控件来处理它。

# wcf - WCF Service hosted in Worker Role on Windows Azure that acts like a proxy and needs to call other services hosted in other Worker Roles

> ID：14305312
> 
> 赞同：1
> 
> 时间：2013-01-13T16:12:05.297
> 
> 标签：wcf, azure, azure-worker-roles

as you can see, I am relatively new on SO please don't kill me after posting this question :) I will do my best to describe the dilemma I am currently in.

I am creating something like a "Guardian Service" that is hosted on Windows Azure inside a Worker Role. This service has external ports, that can be accessed via HTTPS to allow clients to call it's service methods.

The WCF service is meant to call other services hosted in other Worker Roles that have only internal ports open, and which can be accessed only through the use of the Guardian Service. That's the main idea. Similar to a proxy or something.

I read already an excellent article from Jim O'Neil, what the caveats are when you try to access internal service points from within other WCF Services hosted in worker Roles:

His blog [Troubleshooting Endpoints on a WCF Web Role](http://blogs.msdn.com/b/jimoneil/archive/2011/07/11/troubleshooting-endpoints-on-a-wcf-web-role.aspx)

This is not the point for this question, and totally clear to me how to do that.

I have no idea at the moment, how I could do this, without implementing every contract from every single service I want to make accessible from within the Guardian Service to the outside world.

There must be a better way to decouple those things.

Any tips are appreciated.

Thank you.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T16:34:44.697

我不知道您项目的确切要求，但我会说您正在寻找的是 WCF 路由。我过去曾使用它来重定向不同版本的 Workflow 实例的请求。

它的工作方式对于连接到其端点的客户端是完全透明的。路由器实现必须根据请求数据（消息头和正文）决定将请求发送到哪里。

在您的情况下，如果您正确使用 SOAP 和命名空间，您可能能够根据消息肥皂地址做出决定，然后将请求发送到正确的端点。您还可以查看消息的 Action 属性。

一些可能有用的链接：http: [//msdn.microsoft.com/en-us/library/ee517423.aspx](http://msdn.microsoft.com/en-us/library/ee517423.aspx) [http://www.codeproject.com/Articles/227699/RoutingService-on-Azure](http://www.codeproject.com/Articles/227699/RoutingService-on-Azure)

# javascript - Further parsing of url hostname with javascript

> ID：14305322
> 
> 赞同：0
> 
> 时间：2013-01-13T16:13:25.893
> 
> 标签：javascript, parsing, url, uri

There are a lot of posts looking for way to parse a url and get the hostname. The normal solution is to create a document element, set a url, and access the .hostname property. It's a great solution. I'm having trouble going a bit beyond this technique.

I have a function which successfully extracts the base host from a hostname. To describe what I mean by base host (not sure the correct nomenclature) I will show the function and give some example input outputs.

```
function parseURL(url) {
    var parser = document.createElement('a');
    parser.href = url;  
    url = parser.hostname; 
    //get a version of the url with the last "." and everything beyond it truncated.
    //Uses this as a trick in the next step to get the "second to last" index. 
    url = url.substr(0, url.lastIndexOf("."));
    //get a version of the url with everything before the second to last "." truncated. 
    url = parser.hostname.substr(url.lastIndexOf(".")+1); 
    return url; 
};
parseURL("http://code.google.com/p/jsuri/") 
//google.com - I don't think jsuri handle hosts any more effectively
parseURL("http://www.nytimes.com/pages/nyregion/index.html") 
//nytimes.com
parseURL("http://fivethirtyeight.blogs.nytimes.com/2013/01/12/in-cooperstown-a-crowded-waiting-room/" 
//nytimes.com
parseURL("http://www.guardian.co.uk/uk/2013/jan/13/fears-lulworth-cove-development-heritage" 
//co.uk 
```

The last example is the exception I fear, and why I'm looking for a more viable solution. The .hostname method for getting a host is a great first step, I just am looking for a better method of hacking off the sub-hosts that sometimes precede the base level host.

Any help appreciated (if only correcting my terminology).

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T16:46:39.860

您应该能够根据`.uk`示例中的 ccTLD 始终为 2 个字符（为清楚起见声明的变量）这一事实来分支您的代码：

```
// Grab the last bit (the top level domain)
var tld = url.subtr(url.lastIndexOf("."))
if (tld.length === 2)
    //do stuff
else if (tld.length === 3)
    //do other stuff 
```

此外，我相信您正在寻找的词是“域”，尽管根据某些推算确实包括“子域”（docs.google.com 中的 google 之前的位）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-10T23:27:31.140

```
function parseURL(str) {
    var re = /^(?:([a-zA-Z]+:)\/\/)?(?:([-+._a-zA-Z0-9]+)(?::([-+._a-zA-Z0-9]+))?@)?(([^-~!@#$%^^&*\(\)_+=\[\]{}:;'"\\,.\/?\s]+(?:[^~!@#$%^^&*\(\)_+=\[\]{}:;'"\\,.\/?\s]+[^-~!@#$%^^&*\(\)_+=\[\]{}:;'"\\,.\/?\s])*(?:\.[^-~!@#$%^^&*\(\)_+=\[\]{}:;'"\\,.\/?\s]+(?:[^~!@#$%^^&*\(\)_+=\[\]{}:;'"\\,.\/?\s]+[^-~!@#$%^^&*\(\)_+=\[\]{}:;'"\\,.\/?\s])*)*)(?::(\d+))?)?(\/[^?#]*)?(\?[^#]*)?(#.*)?$/;
    var scheme = ['protocol', 'user', 'password', 'hostname', 'host', 'port', 'pathname', 'search', 'hash'], parts = re.exec(str);

    if (parts != null) {
        for (var i = 0, l = scheme.length, obj = {}; i < l;) {
            obj[ scheme[i] ] = parts[++i] != undefined ? parts[i] : '';
        }

        return obj;
    }

    return false;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T17:04:01.570

当我想解析一个 URL 时，我会做这样的事情

```
function parseURL(url) {
    var a = document.createElement('a'), obj, i, j;
    a.href = url;
    obj = {
        'domain': '',
        'hash': a.hash.slice(1),
        'host': a.host,
        'hostname': a.hostname,
        'href': a.href, // copy back from <a>
        'origin': a.origin,
        'pathname': a.pathname,
        'port': a.port,
        'protocol': a.protocol.slice(0, -1),
        'search': a.search.slice(1),
        'subdomain': ''
    };
    i = obj.hostname.lastIndexOf('.');
    if (obj.hostname.length - i === 3) { // if .yz
        j = obj.hostname.lastIndexOf('.', i-1);
        if (j === i - 3 || j === i - 4) { // test .vwx.yz or .wx.yz
            i = j;
        }
    }
    j = obj.hostname.lastIndexOf('.', i-1);
    if (j !== -1) { // move back one more .
        i = j;
    }
    obj.domain = obj.hostname.slice(i+1);
    obj.subdomain = obj.hostname.slice(0, i);
    return obj; 
}; 
```

现在如果你使用它，

```
var myURL = parseURL('http://www.example.co.uk:8080/hello/world.html?foo=bar#anchor');
/* {
    "domain": "example.co.uk",
    "hash": "anchor",
    "host": "www.example.co.uk:8080",
    "hostname": "www.example.co.uk",
    "href": "http://www.example.co.uk:8080/hello/world.html?foo=bar#anchor",
    "origin": "http://www.example.co.uk:8080",
    "pathname": "/hello/world.html",
    "port": "8080",
    "protocol": "http",
    "search": "foo=bar",
    "subdomain": "www"
} */ 
```

因此，对于您想要的，您可以使用`myURL.domain`（或从函数中删除其余部分）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-09T18:25:01.397

我经常使用这个函数从 URL 中解析主机：

```
function urlParseHost(url){
  var re = new RegExp("^(?:f|ht)tp(?:s)?\://([^/]+)", "im");
  return(url.match(re)[1].toString());
} 
```

[您可以在此处](http://bit.ly/1Mb20zE)从 GitHub 获取工作代码。

# mysql - 确保 MySql 表中的某些默认排序顺序

> ID：14305326
> 
> 赞同：0
> 
> 时间：2013-01-13T16:13:33.043
> 
> 标签：mysql, sql, database-design

我有一个超过 1100 万行的大型 MySql 表。这只是一个庞大的数据集，我的任务是能够根据某些规则分析数据集。

每一行都属于某一个`category`。有 200 万个不同的类别。我想获取一个类别的所有行并对其执行操作。

因此，目前，我执行以下操作：

1.  从表中选择不同的类别。
2.  对于每个类别：从表中选择字段 WHERE `category`=category

即使我的`category`列已编入索引，执行也需要很长时间`Step 2`。这主要是因为庞大的数据集。

或者，我可以使用 GROUP BY 子句，但是我不确定它是否会一样快，因为在如此庞大的数据集上使用 GROUP BY 可能会很昂贵，尤其是考虑到我将在部分数据集上运行多次分析时。一种永久确保排序表的方法会很有用。

因此，作为替代方案，如果只有我的表预先排序，我可以加快查询速度`category`。现在我可以逐行读取表格并在更快的时间内执行相同的操作，因为一个行的所有行都`category`将被连续获取。

由于数据集（MySql 表）是固定的，不会对其进行更新、删除、插入操作。我希望能够确保一种方法来维护默认排序顺序`category`。任何人都可以提出一个技巧来确保行的默认排序顺序。

也许读取所有行并将它们重写到一个新表或添加一个新的主键来确保这个顺序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T16:39:09.890

> 即使我的类别列已编入索引

由**二级**索引索引？如果是这样，您可能会遇到以下性能问题：

*   InnoDB 表始终是[聚集](http://use-the-index-luke.com/sql/clustering/index-organized-clustered-index)的，并且聚集表中的二级索引可能需要**双重查找（请参阅**[本文](http://www.ovaistariq.net/521/understanding-innodb-clustered-indexes/)中的“集群的缺点” ）。
*   索引行可能分散在各处（索引可能具有不良的[聚集因子](http://oracle-online-help.blogspot.com/2006/11/clustering-factor_28.html)- 链接适用于 Oracle，但原理相同）。如果是这样，索引**范围**扫描（例如`WHERE category = whatever`）最终可能会加载许多表页，即使实际使用了索引并且实际上只选择了一小部分行。这会破坏范围扫描性能。

* * *

作为二级索引的替代方案，考虑使用自然主键，它在 InnoDB 表中也充当集群键。主键/集群键`{category, no}`将保持同一类别的行物理上靠近在一起，使您的两个查询（尤其是第二个）最大效率。

OTOH，如果您想保留二级索引，请考虑[覆盖](http://use-the-index-luke.com/sql/glossary/covering-index)您查询的所有字段，因此根本不必触及主 B-Tree。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T16:40:36.570

无论索引如何，您都可以通过执行以下操作（伪代码）一步完成此操作：

```
Declare @LastCategory int = Null
Declare @Category int

For Each Row In
Select
  @Category = Category,
  ...
From
  Table
Order By 
  Category

  If @LastCategory Is Null Or @LastCategory != @Category
    Do any "New Category Steps"
    Set @LastCategory = @Category
  End
  Process Row

End For 
```

使用类别索引，我希望这可以执行。您的性能问题可能取决于您在处理每一行时所做的事情。

这是一个例子：[http ://sqlfiddle.com/#!2/e53c98/1](http://sqlfiddle.com/#!2/e53c98/1)

# spring - Spring JPA Hibernate Oracle @OneToOne with Shared Primary Key fails on insert - foreign key violation

> ID：14305329
> 
> 赞同：1
> 
> 时间：2013-01-13T16:13:52.630
> 
> 标签：spring, hibernate, jpa, oracle11g, one-to-one

I have 2 Entities that I am trying to set up using a @OneToOne relationship.

I am using Oracle 11g as the database and User Table has a generated ID via a sequence. This Id from the user table is the Primary Key and Foreign key in the UserProfile table.

So basically a User is mapped to 1 and only 1 User Profile and a User Profile maps back to only 1 User.

I have seeded data in my database and I can read User Object with a User Profile without problem. But when I try to insert a new User Object with a New UserProfile object in a transaction it fails with a Foreign Key Violation in my UserProfile table.

It seems to be a common problem out there with a @OneToOne with Shared primary key, but I can't see to find a answer that works. Can someone point me in the right direction?

I can see that the Id in USerProfile gets set correctly, just on the commit to the database it throws the violation. It almost seems like the UserProfile is being committed to the database before User. Is there a way to persist the User first without have to persist these objects separately?

Here are my entities:

```
package com.company.ca.domain;

import java.io.Serializable;
import java.util.Date;

import javax.persistence.CascadeType;
import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;
import javax.persistence.OneToOne;
import javax.persistence.PrimaryKeyJoinColumn;
import javax.persistence.SequenceGenerator;
import javax.persistence.Table;

@Entity
@Table(name="USERS")
@SequenceGenerator(name="USERS_SEQ", sequenceName="USERS_SEQ", allocationSize=1)
public class Users implements Serializable {

private static final long serialVersionUID = 1L;

@Id
@GeneratedValue(strategy = GenerationType.SEQUENCE, generator="USERS_SEQ")
private Long id;
@Column(name="USERNAME", unique=true)
private String email;
private String password;

@Column(name="CREATED_DATE", insertable=false, updatable=false)
private Date createdDate;
@Column(name="CREATED_BY")
private String createdBy;
@Column(name="LAST_UPDATED_DATE")
private Date lastUpdatedDate;
@Column(name="LAST_UPDATED_BY")
private String lastUpdatedBy;
private int enabled;

@OneToOne(cascade = CascadeType.ALL, mappedBy="user")
@PrimaryKeyJoinColumn(name="ID", referencedColumnName="USER_ID")
private UsersProfile usersProfile;

public Users() {
}

public Long getId() {
    return id;
}

public void setId(Long id) {
    this.id = id;
}

public String getEmail() {
    return email;
}

public void setEmail(String email) {
    this.email = email;
}

public String getPassword() {
    return password;
}

public void setPassword(String password) {
    this.password = password;
}

public int getEnabled() {
    return enabled;
}

public void setEnabled(int enabled) {
    this.enabled = enabled;
}

public Date getCreatedDate() {
    return createdDate;
}

public void setCreatedDate(Date createdDate) {
    this.createdDate = createdDate;
}

public String getCreatedBy() {
    return createdBy;
}

public void setCreatedBy(String createdBy) {
    this.createdBy = createdBy;
}

public Date getLastUpdatedDate() {
    return lastUpdatedDate;
}

public void setLastUpdatedDate(Date lastUpdatedDate) {
    this.lastUpdatedDate = lastUpdatedDate;
}

public String getLastUpdatedBy() {
    return lastUpdatedBy;
}

public void setLastUpdatedBy(String lastUpdatedBy) {
    this.lastUpdatedBy = lastUpdatedBy;
}

public UsersProfile getUsersProfile() {
    return usersProfile;
}

public void setUsersProfile(UsersProfile usersProfile) {
    this.usersProfile = usersProfile;
}
}

package com.company.ca.domain;

import java.io.Serializable;
import java.util.Date;

import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.Id;
import javax.persistence.OneToOne;
import javax.persistence.PrimaryKeyJoinColumn;
import javax.persistence.Table;

@Entity
@Table(name="USERS_PROFILE")
@org.hibernate.annotations.GenericGenerator(name="user-primarykey", strategy="foreign",
    parameters={@org.hibernate.annotations.Parameter(name="property", value="user")
})
public class UsersProfile implements Serializable {

private static final long serialVersionUID = 1L;

@Id
@GeneratedValue(generator = "user-primarykey")
@Column(name = "USER_ID")
private Long userId;

@OneToOne
@PrimaryKeyJoinColumn(name="USER_ID", referencedColumnName="ID")
private Users user;

@Column(name="FIRST_NAME")
private String firstName;
@Column(name="LAST_NAME")
private String lastName;
@Column(name="PHONE_NUMBER")
private String phoneNumber;
@Column(name="CREATED_DATE", insertable=false, updatable=false)
private Date createdDate;
@Column(name="CREATED_BY")
private String createdBy;
@Column(name="LAST_UPDATED_DATE")
private Date lastUpdatedDate;
@Column(name="LAST_UPDATED_BY")
private String lastUpdatedBy;

public UsersProfile() {
    super();
}

public String getFirstName() {
    return firstName;
}

public void setFirstName(String firstName) {
    this.firstName = firstName;
}

public String getLastName() {
    return lastName;
}

public void setLastName(String lastName) {
    this.lastName = lastName;
}

public String getPhoneNumber() {
    return phoneNumber;
}

public void setPhoneNumber(String phoneNumber) {
    this.phoneNumber = phoneNumber;
}

public Users getUser() {
    return user;
}

public void setUser(Users user) {
    this.user = user;
}

public Date getCreatedDate() {
    return createdDate;
}

public void setCreatedDate(Date createdDate) {
    this.createdDate = createdDate;
}

public String getCreatedBy() {
    return createdBy;
}

public void setCreatedBy(String createdBy) {
    this.createdBy = createdBy;
}

public Date getLastUpdatedDate() {
    return lastUpdatedDate;
}

public void setLastUpdatedDate(Date lastUpdatedDate) {
    this.lastUpdatedDate = lastUpdatedDate;
}

public String getLastUpdatedBy() {
    return lastUpdatedBy;
}

public void setLastUpdatedBy(String lastUpdatedBy) {
    this.lastUpdatedBy = lastUpdatedBy;
}

public Long getUserId() {
    return userId;
}

public void setUserId(Long userId) {
    this.userId = userId;
}
} 
```

Here is my DAO and JUnit:

```
package com.company.ca.persistence;

import org.springframework.data.repository.CrudRepository;

import com.company.ca.domain.Users;

public interface UserDAO extends CrudRepository<Users, Long> {

}

package com.company.ca.persistence.test;

import org.apache.commons.logging.Log;
import org.apache.commons.logging.LogFactory;
import org.junit.Assert;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;
import org.springframework.test.context.ContextConfiguration;
import org.springframework.test.context.junit4.AbstractTransactionalJUnit4SpringContextTests;
import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;
import org.springframework.test.context.transaction.TransactionConfiguration;

import com.company.ca.domain.Users;
import com.company.ca.domain.UsersProfile;
import com.company.ca.persistence.UserDAO;

@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration
(
        locations = {
                "classpath*:/spring-persistence.xml"
        } 
)
@TransactionConfiguration(defaultRollback=false)
@Service
public class UserDAOImplTest extends AbstractTransactionalJUnit4SpringContextTests {

protected final Log logger = LogFactory.getLog(getClass());

@Autowired
UserDAO userDAO;

@Test
public void testFindUser() {
    Users testUser = userDAO.findOne(new Long(2));
    Assert.assertNotNull("User Object should not be null", testUser);
    Assert.assertNotNull("User Profile should not be null", testUser.getUsersProfile());
}

@Test
//@Transactional(propagation=Propagation.MANDATORY)
public void testCreateUser() {
    String email = "test.user2@testCompany.com";
    String firstName = "Test 2";
    String lastName = "User";
    String phoneNumber = "1234567890";
    String createdBy = "IT_SYSTEM@system.com";
    String password = "password";

    // now lets create the user
    Users user = new Users();
    user.setCreatedBy(createdBy);
    user.setPassword(password);
    user.setEmail(email);
    user.setEnabled(0);

    UsersProfile userProfile = new UsersProfile();
    userProfile.setCreatedBy(createdBy);
    userProfile.setFirstName(firstName);
    userProfile.setLastName(lastName);
    userProfile.setPhoneNumber(phoneNumber);
    userProfile.setUser(user);

    user.setUsersProfile(userProfile);

    userDAO.save(user);
    Assert.assertNotNull("UserId was not returned...", user.getId());
    Assert.assertEquals("Expected email not set correctly", email, 

user.getEmail());
    }
}

<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"    
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"    
    xmlns:jdbc="http://www.springframework.org/schema/jdbc" 
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:aop="http://www.springframework.org/schema/aop"
    xmlns:jpa="http://www.springframework.org/schema/data/jpa"
    xsi:schemaLocation="http://www.springframework.org/schema/beans              
    http://www.springframework.org/schema/beans/spring-beans-3.1.xsd              
    http://www.springframework.org/schema/jdbc              
    http://www.springframework.org/schema/jdbc/spring-jdbc-3.1.xsd
    http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.0.xsd
    http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
    http://www.springframework.org/schema/context 
    http://www.springframework.org/schema/context/spring-context-3.1.xsd
    http://www.springframework.org/schema/data/jpa 
    http://www.springframework.org/schema/data/jpa/spring-jpa.xsd"> 

<context:annotation-config />
<context:property-placeholder location="classpath*:/persistence.properties" />

<jpa:repositories base-package="com.company.ca.persistence"/>

<bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
    <property name="driverClassName" value="${database.driver}" />
    <property name="url" value="${database.url}" />
    <property name="username" value="${database.username}" />
    <property name="password" value="${database.password}" />
</bean>         

<bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
  <property name="dataSource" ref="dataSource" />
  <property name="packagesToScan" value="com.company.ca.domain" />
  <property name="persistenceProviderClass" value="org.hibernate.ejb.HibernatePersistence" />
  <property name="loadTimeWeaver">
    <bean class="org.springframework.instrument.classloading.InstrumentationLoadTimeWeaver" />
  </property>
  <property name="jpaProperties">
    <props>
      <prop key="hibernate.dialect">org.hibernate.dialect.Oracle10gDialect</prop>
      <prop key="hibernate.max_fetch_depth">5</prop>
      <prop key="hibernate.jdbc.fetch_size">50</prop>
      <prop key="hibernate.jdbc.batch_size">10</prop>
      <prop key="hibernate.show_sql">true</prop>
    </props>
  </property>
</bean>

<bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
  <property name="entityManagerFactory" ref="entityManagerFactory" />
</bean>

<tx:annotation-driven transaction-manager="transactionManager"/> 
```

And here is my output:

```
10:28:13,400 DEBUG SQL:104 - select USERS_SEQ.nextval from dual
Hibernate: select USERS_SEQ.nextval from dual
10:28:13,500 DEBUG SQL:104 - insert into USERS (CREATED_BY, USERNAME, enabled, LAST_UPDATED_BY, LAST_UPDATED_DATE, password, id) values (?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into USERS (CREATED_BY, USERNAME, enabled, LAST_UPDATED_BY, LAST_UPDATED_DATE, password, id) values (?, ?, ?, ?, ?, ?, ?)
10:28:13,501 TRACE BasicBinder:83 - binding parameter [1] as [VARCHAR] - VRS_SYSTEM@audatex.com
10:28:13,501 TRACE BasicBinder:83 - binding parameter [2] as [VARCHAR] - colin.moore3@audatex.com
10:28:13,502 TRACE BasicBinder:83 - binding parameter [3] as [INTEGER] - 0
10:28:13,502 TRACE BasicBinder:71 - binding parameter [4] as [VARCHAR] - <null>
10:28:13,504 TRACE BasicBinder:71 - binding parameter [5] as [TIMESTAMP] - <null>
10:28:13,505 TRACE BasicBinder:83 - binding parameter [6] as [VARCHAR] - test
10:28:13,505 TRACE BasicBinder:83 - binding parameter [7] as [BIGINT] - 117
10:28:13,577 DEBUG SQL:104 - insert into USERS_PROFILE (CREATED_BY, FIRST_NAME, LAST_NAME, LAST_UPDATED_BY, LAST_UPDATED_DATE, PHONE_NUMBER, USER_ID) values (?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into USERS_PROFILE (CREATED_BY, FIRST_NAME, LAST_NAME, LAST_UPDATED_BY, LAST_UPDATED_DATE, PHONE_NUMBER, USER_ID) values (?, ?, ?, ?, ?, ?, ?)
10:28:13,579 TRACE BasicBinder:83 - binding parameter [1] as [VARCHAR] - VRS_SYSTEM@audatex.com
10:28:13,579 TRACE BasicBinder:83 - binding parameter [2] as [VARCHAR] - Colin
10:28:13,579 TRACE BasicBinder:83 - binding parameter [3] as [VARCHAR] - Moore
10:28:13,580 TRACE BasicBinder:71 - binding parameter [4] as [VARCHAR] - <null>
10:28:13,580 TRACE BasicBinder:71 - binding parameter [5] as [TIMESTAMP] - <null>
10:28:13,580 TRACE BasicBinder:83 - binding parameter [6] as [VARCHAR] - 4164983787
10:28:13,581 TRACE BasicBinder:83 - binding parameter [7] as [BIGINT] - 117
10:28:13,715  WARN SqlExceptionHelper:143 - SQL Error: 2291, SQLState: 23000
10:28:13,716 ERROR SqlExceptionHelper:144 - ORA-02291: integrity constraint (SYSTEM.FK_USER_ID) violated - parent key not found

10:28:13,716  WARN SqlExceptionHelper:143 - SQL Error: 2291, SQLState: 23000
10:28:13,716 ERROR SqlExceptionHelper:144 - ORA-02291: integrity constraint (SYSTEM.FK_USER_ID) violated - parent key not found

10:28:13,719 ERROR BatchingBatch:119 - HHH000315: Exception executing batch [ORA-02291: integrity constraint (SYSTEM.FK_USER_ID) violated - parent key not found 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T16:38:21.127

你的映射是错误的。在双向关联中，一侧是关联的所有者，并说明关联是如何映射的。另一边是反面，使用`mappedBy`属性只是说“看另一边的映射”。

请参阅[文档](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#d0e5617)以获取示例：

```
@Entity
class UserProfile {
    @Id Integer id;

    @MapsId @OneToOne
    @JoinColumn(name = "user_id")
    User user;
}

@Entity
class Person {
    @Id @GeneratedValue 
    Integer id;

    @OneToOne(mappedBy = "user")
    private UserProfile profile;
} 
```

# php - 致命错误：调用未定义函数 mcrypt_get_block_size()

> ID：14305332
> 
> 赞同：3
> 
> 时间：2013-01-13T16:14:19.437
> 
> 标签：php

我正在将我的网站上传到服务器上，并且上传成功。之后，当我运行时，它给了我这个错误：

> 致命错误：调用未定义函数 mcrypt_get_block_size()。

我还检查了我服务器上的[PHP](http://en.wikipedia.org/wiki/PHP)版本是 5.3.14。我无法弄清楚我该如何处理这个问题。我将此函数用于查询字符串加密。我在谷歌上搜索了这个，有人说你必须让你的主机安装它。有没有另一种方法来安装这个或替代函数，就像这个 mcrypt_get_block_size() 一样工作？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-13T16:18:15.273

您必须安装并启用[mcrypt](http://en.wikipedia.org/wiki/Mcrypt)。

在基于[Debian](http://en.wikipedia.org/wiki/Debian)的 Linux 发行版（如[Ubuntu](http://en.wikipedia.org/wiki/Ubuntu_%28operating_system%29)）上，从命令行运行：

```
sudo apt-get install php5-mcrypt 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-05-02T18:06:12.913

正如亚历克斯所说，您需要安装该库，但不要忘记启用它。

```
 sudo apt-get install mcrypt php5-mcrypt
  sudo php5enmod mcrypt
  sudo /etc/init.d/apache2 restart 
```

# c# - Get what char the user typed, when ContextMenuStrip has focus

> ID：14305334
> 
> 赞同：0
> 
> 时间：2013-01-13T16:14:27.703
> 
> 标签：c#, .net, winforms

When a `ContextMenuStrip` is opened, if the user types the first letter of a possible selection - it's as if he clicked on it. I want to intercept that and get the character that he clicked.

The following code does that, but with hard-coding the possible character. I want a generic way to do this, either by disabling the automatic selection by key stroke (leaving only the mouse clicks) or some way to intercept the character.

The following simplified code assumes I want to have a winform's `Text` to be the character typed, and the `ContextMenuStrip` has one option which is "A".

```
public Form1()
{
    InitializeComponent();
    contextMenuStrip1.KeyDown += contextMenuStrip1_KeyDown;
}

private void button1_Click(object sender, EventArgs e)
{
    contextMenuStrip1.Show();
}

void contextMenuStrip1_KeyDown(object sender, KeyEventArgs e)
{
    e.SuppressKeyPress = true;
    if (e.KeyCode == Keys.A)
    {
        if (e.Shift) Text = "A";
        else Text = "a";
    }
} 
```

Using the `KeyPress` event and checking `e.KeyChar` doesn't work because it doesn't get fired. (the "A" click-event gets fired instead.)

Using one of these: `e.KeyCode`, `e.KeyData`, or `e.KeyValue` doesn't work (without further hard-coding) because they accept a `Shift` as a Key.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T18:06:11.477

如评论中所述，您必须从 ContextMenuStrip 派生您自己的类，以便您可以覆盖 ProcessMnemonic() 方法。

稍微注释一下，键盘处理在 Winforms 中非常复杂。快捷键击键很早就被处理，在它们被分派到具有焦点的控件之前。必然如此，您不希望为每个控件实现 KeyDown 事件，以便您可以使快捷键起作用。

这从外向内工作，涉及几个受保护的方法，ProcessCmdKey、ProcessDialogChar 和 ProcessMnemonic。如果设置了表单的 KeyPreview 属性，则与 OnKeyDown 一样，这是一个 VB6 兼容功能。因此，表单首先对其进行了尝试，然后它从那里迭代控件，从容器到子控件。

ToolStrip 类（ContextMenuStrip 的基类）覆盖 ProcessMnemonic() 方法以识别按键，并将它们映射到菜单项。因此，为了拦截这个默认处理，您必须自己重写 ProcessMnemonic() 才能首先获得按键操作。

# python - TkCanvas 中的动画 NetworkX Graph：背景颜色

> ID：14305337
> 
> 赞同：0
> 
> 时间：2013-01-13T16:14:31.333
> 
> 标签：python, matplotlib, tkinter, background-color, networkx

为了演示 Graph 算法，我需要将 networkx 图绘制到 Tkinter Canvas 并能够在运行时修改该图（和绘图）。

我拼凑了以下代码（我希望它是导致我的问题的最小代码，但我是新手，所以我不确定）：

```
import matplotlib
matplotlib.use('TkAgg')
from matplotlib.backends.backend_tkagg import FigureCanvasTkAgg
import matplotlib.pyplot as plt
import Tkinter as Tk
import networkx as nx
from tkMessageBox import showinfo

root = Tk.Tk()
root.wm_title("Animated Graph embedded in TK")
root.wm_protocol('WM_DELETE_WINDOW', root.quit())

f = plt.figure(figsize=(5,4))
a = f.add_subplot(111)
plt.axis('off')

# the networkx part
G=nx.complete_graph(5)
nx.draw_networkx(G,pos=nx.spring_layout(G),ax=a)

# a tk.DrawingArea
canvas = FigureCanvasTkAgg(f, master=root)
canvas.show()
canvas.get_tk_widget().pack(side=Tk.TOP, fill=Tk.BOTH, expand=1)

def next_graph():
    if G.order():
        a.cla()
        G.remove_node(G.nodes()[-1])
        nx.draw(G, pos=nx.circular_layout(G), ax=a)
        canvas.draw()

b = Tk.Button(root, text="next",command=next_graph)
b.pack()  

Tk.mainloop() 
```

我现在的问题是：图表的第一次显示就像我想要的一样（背景颜色），但是在您第一次单击“下一步”后，图表的背景颜色变为白色。我尝试更改图形和画布的背景颜色。我什至不知道是什么带来了这种变化，我认为它只是在同一个画布上画了两次。

如何修改代码以使图形始终具有相同的背景颜色？

在不相关的说明中：我添加的 root.quit() 无助于正确结束应用程序。这对我来说可能很愚蠢，但是这里出了什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T20:18:25.893

我觉得你很亲近。如果您`nx.draw_networkx()`在事件循环中使用它，那么它可以工作（也关闭那里的轴）。

这是您的示例，其中包含这些修改以及在循环中重用的开头计算的单个布局：

```
import matplotlib
matplotlib.use('TkAgg')
from matplotlib.backends.backend_tkagg import FigureCanvasTkAgg
import matplotlib.pyplot as plt
import Tkinter as Tk
import networkx as nx
from tkMessageBox import showinfo

root = Tk.Tk()
root.wm_title("Animated Graph embedded in TK")
# Quit when the window is done
root.wm_protocol('WM_DELETE_WINDOW', root.quit)

f = plt.figure(figsize=(5,4))
a = f.add_subplot(111)
plt.axis('off')

# the networkx part
G=nx.complete_graph(5)
pos=nx.circular_layout(G)
nx.draw_networkx(G,pos=pos,ax=a)
xlim=a.get_xlim()
ylim=a.get_ylim()

# a tk.DrawingArea
canvas = FigureCanvasTkAgg(f, master=root)
canvas.show()
canvas.get_tk_widget().pack(side=Tk.TOP, fill=Tk.BOTH, expand=1)

def next_graph():
    if G.order():
        a.cla()
        G.remove_node(G.nodes()[-1])
        nx.draw_networkx(G, pos, ax=a)
        a.set_xlim(xlim)
        a.set_ylim(ylim)
        plt.axis('off')
        canvas.draw()

b = Tk.Button(root, text="next",command=next_graph)
b.pack()

Tk.mainloop() 
```

# c# - 转换为值类型“Int32”失败的空值 LINQ

> ID：14305338
> 
> 赞同：4
> 
> 时间：2013-01-13T16:14:34.423
> 
> 标签：c#, asp.net, linq

我正在尝试使用视图和 LINQ 将一些值添加在一起，这是我下面的代码

```
var getProducts = from p in Entity.Products
                  join od in getOrderDetails on p.id equals od.productId into proDetails
                  orderby proDetails.Sum(q => q.quantity) descending
                  select new Common.Views.ProductQuantitySold()
                  {
                      productId = p.id,
                      productName = p.name,
                      productDesc = p.description,
                      qtySold = proDetails.Sum(q => q.quantity)
                  };
return getProducts.Take(10).AsQueryable(); 
```

在这一行中`qtySold = proDetails.Sum(q => q.quantity)`，我收到了强制转换值错误。我知道这与 null 或零有关，但我应该如何实现它？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-13T16:18:19.030

尝试替换以下行：

```
qtySold = proDetails.Sum(q => q.quantity) 
```

至

```
qtySold = proDetails.Sum(q => (int?)q.quantity) ?? 0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T16:17:58.550

我认为这是一个编译错误。如果不是，请发表评论。尝试将 sum 的结果转换为 an`int`或将 的每个元素`proDetails`转换为 an `int`。

例子：

```
qtySold = (int) proDetails.Sum(q => q.quantity) 
```

或者：

```
qtySold = proDetails.Cast<int>().Sum(q => q.quantity) 
```

请让我知道它是否有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T16:23:18.017

```
qtySold = proDetails.Sum(q => (Int32?)q.quantity) ?? 0 
```

# android - Android：应用重新安装失败

> ID：14305340
> 
> 赞同：0
> 
> 时间：2013-01-13T16:14:37.793
> 
> 标签：android, installation

我已经使用手机上的选项卸载了我的应用程序（调试版）。但是，如果我用另一个版本（签名）重新安装它，我会收到一条错误消息，表明它已经存在。但我没有在电话中看到一个符号。我必须使用 adb 卸载。这发生在不同的设备上。

这是正常行为还是我的应用程序有问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T15:34:23.033

问题是我使用了 2 个包

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T16:24:58.390

如果签名不匹配，则必须先卸载旧应用程序，然后才能安装具有相同包名的另一个应用程序。可以从命令行卸载旧应用程序（adb 卸载）或仅使用普通的 Android UI（转到所有应用程序视图，长按那里的应用程序图标并将其拖到应出现在顶部的垃圾箱中）。

如果您根本没有应用程序图标，那真是非常奇怪和错误。即使您不提供，默认图标（绿色 Android）也应与您的应用程序名称一起使用。但也许您正在谈论默认情况下可能未安装图标的主桌面。您需要转到应用程序列表。对于 4.1.0，应用程序列表打开时，按钮在底部中心有两排六个白点，全部被圆圈包围。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T16:26:49.927

如果您尝试安装与未签名版本具有相同包名的签名应用程序，它将返回一个错误，指出无法完成。您需要做的是在安装新的签名版本之前检查该应用程序是否确实已在您的设备上卸载。

# ios - NSString 正则表达式查找和替换

> ID：14305341
> 
> 赞同：1
> 
> 时间：2013-01-13T16:14:45.693
> 
> 标签：ios, objective-c, regex

构建需要在 UIWebView 对象中显示一些 HTML 字符串的 iOS 应用程序。我正在尝试搜索、查找模式并替换为图像的正确链接。图像链接是原始的，例如`[pic:brand:123]`，其中`pic`is always `pic`，`brand`可以是任何字母数字，并且`123`is 也可以是任何非空白字母数字。

到目前为止，我已经尝试了一些，包括：

```
NSString *pattern = @"\\[pic:([^\\s:\\]]+):([^\\]])\\]"; 
```

但到目前为止，没有一个有效。

这是一个示例代码：

```
NSString *str = @"veryLongHTMLSTRING";
NSLog(@"Original test: %@",[str substringToIndex:500]);
NSError *error = nil;
// use regular expression to replace the emoji
NSRegularExpression *regex = [NSRegularExpression
                                  regularExpressionWithPattern:@"\\[pic:([^\\s:\\]]+):([^\\]])\\]"
                                  options:NSRegularExpressionCaseInsensitive error:&error];
if(error != nil){
    NSLog(@"ERror: %@",error);
}else{
    [regex stringByReplacingMatchesInString:str
                                    options:0
                                      range:NSMakeRange(0, [str length])
                               withTemplate:[NSString stringWithFormat:@"/%@/photo/%@.gif",
                                             IMAGE_BASE_URL, @"$1/$2"]];

NSLog(@"Replaced test: %@",[str substringToIndex:500]); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-13T16:25:35.430

我看到两个错误：`+`正则表达式模式的第二个捕获组中缺少一个，应该是

```
NSString *pattern = @"\\[pic:([^\\s:\\]]+):([^\\]]+)\\]"; 
```

并`stringByReplacingMatchesInString`返回一个*新字符串*，它不会替换匹配的字符串。因此，您必须将结果分配给新字符串，或`replaceMatchesInString:options:range:withTemplate:`与`NSMutableString`.

以下修改后的代码

```
NSString *pattern = @"\\[pic:([^\\s:\\]]+):([^\\]]+)\\]";
NSString *str = @"bla bla [pic:brand:123] bla bla";
NSLog(@"Original test: %@",str);
NSError *error = nil;
NSRegularExpression *regex = [NSRegularExpression
                              regularExpressionWithPattern:pattern
                              options:NSRegularExpressionCaseInsensitive error:&error];
if(error != nil){
    NSLog(@"ERror: %@",error);
} else{
    NSString *replaced = [regex stringByReplacingMatchesInString:str
                                    options:0
                                      range:NSMakeRange(0, [str length])
                               withTemplate:[NSString stringWithFormat:@"/%@/photo/%@.gif",
                                             @"IMAGE_BASE_URL", @"$1/$2"]];

    NSLog(@"Replaced test: %@",replaced);
} 
```

产生输出

```
Original test: bla bla [pic:brand:123] bla bla
Replaced test: bla bla /IMAGE_BASE_URL/photo/brand/123.gif bla bla 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T16:30:38.163

您误解了应该如何形成模板。此外，`stringByReplacingMatchesInString`不会更改原始字符串。试试这个（测试）：

```
NSString *target = @"longHTML [pic:whatever:123] longHTMLcontinues";
NSMutableString *s = [target mutableCopy];

NSError *err = nil;
NSRegularExpression *expr = [NSRegularExpression regularExpressionWithPattern:@"\\[pic\\:([a-zA-Z0-9]*)\\:([a-zA-Z0-9]*)\\]" options:0 error:&err];
if (err) {
    NSLog(@"%@", err);
    exit(-1);
}

[expr replaceMatchesInString:s options:0 range:NSMakeRange(0, s.length) withTemplate:@"/photo/$1/$2.gif"]; 
```

# c# - 计时器如何在 .NET 中工作？

> ID：14305345
> 
> 赞同：9
> 
> 时间：2013-01-13T16:11:20.950
> 
> 标签：c#, .net, multithreading, timer

我正在用 C# 编写一个控制台应用程序，我的代码是这样的：

```
 while(true)
 {
 //do some stuff
     System.Threading.Thread.Sleep(60000)
 } 
```

我注意到“睡眠”时我的应用程序的内存使用量约为 14k。但后来我引用了 System.Windows.Forms 并使用了一个计时器，我注意到内存使用量大幅下降。

我的问题是，在不使用那么多内存的情况下每隔几秒执行一次的正确方法是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-13T16:18:00.450

你应该使用[System.Timers.Timer](http://msdn.microsoft.com/en-us/library/system.timers.timer.aspx)

添加将处理`Elapsed`事件并执行所需代码的方法。在你的情况下：

```
System.Timers.Timer _timer = new System.Timers.Timer();

_timer.Elapsed += new ElapsedEventHandler(OnTimedEvent);
_timer.Interval = 60000;
_timer.Enabled = true;

private static void OnTimedEvent(object source, ElapsedEventArgs e)
{
   // add your code here
} 
```

这是一篇关于两者之间区别的好帖子`Timers`：

*   [SO：System.Timers.Timer 与 System.Threading.Timer](https://stackoverflow.com/questions/1416803/system-timers-timer-vs-system-threading-timer)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-13T16:22:05.380

你需要使用`Timer`类。

有多个内置定时器（`System.Timers.Timer`, `System.Threading.Timer`, `System.Windows.Forms.Timer`, `System.Windows.Threading.DispatcherTimer`），这取决于使用哪个定时器的要求。

阅读[此](https://stackoverflow.com/a/14296704/649524)答案以了解应在何处使用哪个计时器。

以下是有趣的阅读。
[比较 .NET Framework 类库中的计时器类](http://msdn.microsoft.com/en-us/magazine/cc164015.aspx)

# php - 如何从 PHP 访问#anchors？

> ID：14305346
> 
> 赞同：-3
> 
> 时间：2013-01-13T16:14:53.753
> 
> 标签：php, javascript, anchor

我不认为直接可以，所以我考虑使用 javascript 访问锚点并将其传递给 PHP，但我不知道如何。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T16:24:08.707

使用 jQuery：

```
$.post('getHash.php', {hash: window.location.hash}); 
```

比在你的`getHash.php`文件中

```
<?php
   $hash = $_POST['hash'];
   /* ... */
?> 
```

不过，您的问题并没有提供足够的信息让我们正确回答。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T16:16:55.507

如果您指的是 URL 的散列部分（即 之后的所有内容`#`），则 Web 浏览器不会将其发送到服务器。所以你不能从 PHP 访问它。

听起来您有正确的方法来通知服务器有关哈希的信息，即使用 JavaScript。您可以在浏览器中使用`window.location.hash`. 要将其发送到服务器，您可以使用 XMLHTTPRequest 对象将其发布到服务器。

# postgresql - 从 PostgreSQL 到 Solr4 的预定导入

> ID：14305348
> 
> 赞同：1
> 
> 时间：2013-01-13T16:15:27.943
> 
> 标签：postgresql, solr, solr4

我们在 PostgreSQL 数据库中有“文章”表，其结构如下（简化）：

```
CREATE TABLE article
(
  id integer,
  header text,
  body text,
  isSolrized boolean
) 
```

我想定期将所有非 solrized 行导入 solr4。

是否有工具或内置 solr 的机制来执行此操作？

我将~~使用 blackjack 和 hookers~~实现我自己的导入工具，并使用 cron 运行它。有没有更好的办法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T20:33:00.983

选择了 DataImportHandler。

1.  下载 postgresql 的 jdbc 驱动并放在 dist/ 目录下

2.  将模块添加到配置文件：

    ```
    <lib dir="../../dist/" regex="apache-solr-dataimporthandler-\d.*\.jar" />
    <lib dir="../../dist/" regex="postgresql-\d.*\.jar" /> 
    ```

3.  按照[Solr wiki上的说明进行操作](http://wiki.apache.org/solr/DIHQuickStart)

4.  记得在**scheme.xml中声明你的方案**

30分钟内完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T16:26:29.357

在 PostgeSQL 中实现一个外部数据包装器（[这里](http://wiki.postgresql.org/wiki/Foreign_data_wrappers)有详细信息和示例）可能会更好。它可以包含您想要的任何逻辑。

实现后，可以在简单的触发器中使用，也可以用cron（或PostgreSQL自己的planner）调用。

如果你开源，这样的东西可能对其他人有用。

# javascript - 访问json中的数据？

> ID：14305349
> 
> 赞同：0
> 
> 时间：2013-01-13T16:15:33.700
> 
> 标签：javascript, html, json, parsing

我想从 youtube api 的 json 响应中获取一些元素：我在脚本中得到了这个响应：

```
{
  "version": "1.0",
  "encoding": "UTF-8",
  "feed": {
    "xmlns": "http://www.w3.org/2005/Atom",
    "xmlns$media": "http://search.yahoo.com/mrss/",
    "xmlns$openSearch": "http://a9.com/-/spec/opensearchrss/1.0/",
    "xmlns$gd": "http://schemas.google.com/g/2005",
    "xmlns$yt": "http://gdata.youtube.com/schemas/2007",
    "id": {
      "$t": "http://gdata.youtube.com/feeds/api/videos"
    },
    "updated": {
      "$t": "2013-01-13T15:48:18.863Z"
    },
    "category": [
      {
        "scheme": "http://schemas.google.com/g/2005#kind",
        "term": "http://gdata.youtube.com/schemas/2007#video"
      }
    ],
    "title": {
      "$t": "Videos matching: humor",
      "type": "text"
    },
    "logo": {
      "$t": "http://www.youtube.com/img/pic_youtubelogo_123x63.gif"
    },
    "link": [
      {
        "rel": "alternate",
        "type": "text/html",
        "href": "http://www.youtube.com"
      },
      {
        "rel": "http://schemas.google.com/g/2005#feed",
        "type": "application/atom+xml",
        "href": "http://gdata.youtube.com/feeds/api/videos"
      },
      {
        "rel": "http://schemas.google.com/g/2005#batch",
        "type": "application/atom+xml",
        "href": "http://gdata.youtube.com/feeds/api/videos/batch"
      },
      {
        "rel": "self",
        "type": "application/atom+xml",
        "href": "http://gdata.youtube.com/feeds/api/videos?alt=json&q=humor&start-index=1&max-results=1&lr=es&orderby=published"
      },
      {
        "rel": "next",
        "type": "application/atom+xml",
        "href": "http://gdata.youtube.com/feeds/api/videos?alt=json&q=humor&start-index=2&max-results=1&lr=es&orderby=published"
      }
    ],
    "author": [
      {
        "name": {
          "$t": "YouTube"
        },
        "uri": {
          "$t": "http://www.youtube.com/"
        }
      }
    ],
    "generator": {
      "$t": "YouTube data API",
      "version": "2.1",
      "uri": "http://gdata.youtube.com"
    },
    "openSearch$totalResults": {
      "$t": 10595
    },
    "openSearch$startIndex": {
      "$t": 1
    },
    "openSearch$itemsPerPage": {
      "$t": 1
    },
    "entry": [
      {
        "id": {
          "$t": "http://gdata.youtube.com/feeds/api/videos/HAUdFeouzgM"
        },
        "published": {
          "$t": "2013-01-13T15:43:26.000Z"
        },
        "updated": {
          "$t": "2013-01-13T15:43:26.000Z"
        },
        "category": [
          {
            "scheme": "http://schemas.google.com/g/2005#kind",
            "term": "http://gdata.youtube.com/schemas/2007#video"
          },
          {
            "scheme": "http://gdata.youtube.com/schemas/2007/categories.cat",
            "term": "Film",
            "label": "Cine y animación"
          }
        ],
        "title": {
          "$t": "Chica Troll en dibujo: TiparracoSA (IrukoArt)",
          "type": "text"
        },
        "content": {
          "$t": "Canal del artista creador: www.youtube.com Si quieres ver camaras ocultas dale aqui: www.youtube.com Si quieres ver a la chica troll VS pervertidos aqui: www.youtube.com Canal principal --- (Bromas con camara oculta y humor) www.youtube.com Sigueme en Twitter: twitter.com Sigueme en Facebook: www.facebook.com",
          "type": "text"
        },
        "link": [
          {
            "rel": "alternate",
            "type": "text/html",
            "href": "http://www.youtube.com/watch?v=HAUdFeouzgM&feature=youtube_gdata"
          },
          {
            "rel": "http://gdata.youtube.com/schemas/2007#video.responses",
            "type": "application/atom+xml",
            "href": "http://gdata.youtube.com/feeds/api/videos/HAUdFeouzgM/responses"
          },
          {
            "rel": "http://gdata.youtube.com/schemas/2007#video.related",
            "type": "application/atom+xml",
            "href": "http://gdata.youtube.com/feeds/api/videos/HAUdFeouzgM/related"
          },
          {
            "rel": "http://gdata.youtube.com/schemas/2007#mobile",
            "type": "text/html",
            "href": "http://m.youtube.com/details?v=HAUdFeouzgM"
          },
          {
            "rel": "self",
            "type": "application/atom+xml",
            "href": "http://gdata.youtube.com/feeds/api/videos/HAUdFeouzgM"
          }
        ],
        "author": [
          {
            "name": {
              "$t": "TiparracoTV"
            },
            "uri": {
              "$t": "http://gdata.youtube.com/feeds/api/users/TiparracoTV"
            }
          }
        ],
        "gd$comments": {
          "gd$feedLink": {
            "rel": "http://gdata.youtube.com/schemas/2007#comments",
            "href": "http://gdata.youtube.com/feeds/api/videos/HAUdFeouzgM/comments",
            "countHint": 0
          }
        },
        "media$group": {
          "media$category": [
            {
              "$t": "Film",
              "label": "Cine y animación",
              "scheme": "http://gdata.youtube.com/schemas/2007/categories.cat"
            }
          ],
          "media$content": [
            {
              "url": "http://www.youtube.com/v/HAUdFeouzgM?version=3&f=videos&app=youtube_gdata",
              "type": "application/x-shockwave-flash",
              "medium": "video",
              "isDefault": "true",
              "expression": "full",
              "duration": 324,
              "yt$format": 5
            },
            {
              "url": "rtsp://v1.cache2.c.youtube.com/CiILENy73wIaGQkDzi7qFR0FHBMYDSANFEgGUgZ2aWRlb3MM/0/0/0/video.3gp",
              "type": "video/3gpp",
              "medium": "video",
              "expression": "full",
              "duration": 324,
              "yt$format": 1
            },
            {
              "url": "rtsp://v1.cache2.c.youtube.com/CiILENy73wIaGQkDzi7qFR0FHBMYESARFEgGUgZ2aWRlb3MM/0/0/0/video.3gp",
              "type": "video/3gpp",
              "medium": "video",
              "expression": "full",
              "duration": 324,
              "yt$format": 6
            }
          ],
          "media$description": {
            "$t": "Canal del artista creador: www.youtube.com Si quieres ver camaras ocultas dale aqui: www.youtube.com Si quieres ver a la chica troll VS pervertidos aqui: www.youtube.com Canal principal --- (Bromas con camara oculta y humor) www.youtube.com Sigueme en Twitter: twitter.com Sigueme en Facebook: www.facebook.com",
            "type": "plain"
          },
          "media$keywords": {

          },
          "media$player": [
            {
              "url": "http://www.youtube.com/watch?v=HAUdFeouzgM&feature=youtube_gdata_player"
            }
          ],
          "media$thumbnail": [
            {
              "url": "http://i.ytimg.com/vi/HAUdFeouzgM/0.jpg",
              "height": 360,
              "width": 480,
              "time": "00:02:42"
            },
            {
              "url": "http://i.ytimg.com/vi/HAUdFeouzgM/1.jpg",
              "height": 90,
              "width": 120,
              "time": "00:01:21"
            },
            {
              "url": "http://i.ytimg.com/vi/HAUdFeouzgM/2.jpg",
              "height": 90,
              "width": 120,
              "time": "00:02:42"
            },
            {
              "url": "http://i.ytimg.com/vi/HAUdFeouzgM/3.jpg",
              "height": 90,
              "width": 120,
              "time": "00:04:03"
            }
          ],
          "media$title": {
            "$t": "Chica Troll en dibujo: TiparracoSA (IrukoArt)",
            "type": "plain"
          },
          "yt$duration": {
            "seconds": "324"
          }
        },
        "yt$statistics": {
          "favoriteCount": "0",
          "viewCount": "1"
        }
      }
    ]
  }
} 
```

我想访问一些元素，如标题、标签和链接以在我的脚本中使用。我评估 json 并尝试访问元素，但在数组和我认为的另一个 json 对象中，无法使脚本工作：

```
 var datos=data.responseText;

    var respuesta = eval("(" + data.responseText + ")");

    alert(respuesta.entry.title); 
```

此代码不起作用，我如何访问元素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T16:17:25.973

试试`alert(respuesta.entry[0].title);`吧。`entry`是一个数组。

**编辑**同样正如我们在评论`entry`中指出的那样，json 更深一层。正确的表达其实是：`alert(respuesta.feed.entry[0].title);`. 我建议您使用[Online JSON Beautifier](http://jsbeautifier.org/)来美化您的 json 并使其更易于理解。

# c++ - 如何让 Qt 快速导航树项目？

> ID：14305350
> 
> 赞同：4
> 
> 时间：2013-01-13T16:15:38.517
> 
> 标签：c++, qt, treeview, treemodel

我在一个节点下开发了一个包含 1,000,000 个项目的 Qt 树。该代码类似于[http://qt-project.org/doc/qt-5.0/qtwidgets/itemviews-simpletreemodel.html](http://qt-project.org/doc/qt-5.0/qtwidgets/itemviews-simpletreemodel.html)上的简单树模型示例。

当我单击“结束”键时，需要 15 秒才能转到最后一项。有什么办法让它更快？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T21:32:15.940

将[uniformRowHeights](http://qt-project.org/doc/qt-4.8/qtreeview.html#uniformRowHeights-prop)设置为 true。然后行高只计算一次，而不是一百万次，使 QTreeView 更快。

# java - 在 Hadoop 中将减少的数据拆分为输出和新输入

> ID：14305351
> 
> 赞同：5
> 
> 时间：2013-01-13T16:15:47.473
> 
> 标签：java, hadoop, split, mapreduce

几天来，我一直在寻找一种方法，试图找到一种使用减少数据在 hadoop 中进一步映射的方法。我将类对象`A`作为输入数据，将类对象`B`作为输出数据。问题是，虽然映射不仅生成了 s，`B`而且还生成了新`A`的 s。

这是我想要实现的目标：

```
1.1 input: a list of As
1.2 map result: for each A a list of new As and a list of Bs is generated
1.3 reduce: filtered Bs are saved as output, filtered As are added to the map jobs

2.1 input: a list of As produced by the first map/reduce
2.2 map result: for each A a list of new As and a list of Bs is generated
2.3 ...

3.1 ... 
```

你应该得到基本的想法。

我已经阅读了很多关于链接的内容，但我不确定如何将 ChainReducer 和 ChainMapper 结合起来，或者即使这是否是正确的方法。

所以这是我的问题：如何拆分映射数据，同时减少将一部分保存为输出，另一部分保存为新的输入数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T18:48:47.213

尝试使用[MultipleOutputs](http://hadoop.apache.org/docs/mapreduce/r0.21.0/api/org/apache/hadoop/mapreduce/lib/output/MultipleOutputs.html)。正如 Javadoc 所建议的那样：

> MultipleOutputs 类简化了将输出数据写入多个输出的过程
> 
> 案例一：写入作业默认输出以外的其他输出。每个额外的输出，或命名的输出，都可以配置有它自己的 OutputFormat、它自己的键类和它自己的值类。
> 
> 案例二：向用户提供的不同文件写入数据

**作业提交的使用模式：**

```
Job job = new Job();

 FileInputFormat.setInputPath(job, inDir);
 FileOutputFormat.setOutputPath(job, outDir);

 job.setMapperClass(MOMap.class);
 job.setReducerClass(MOReduce.class);
 ...

 // Defines additional single text based output 'text' for the job
 MultipleOutputs.addNamedOutput(job, "text", TextOutputFormat.class,
 LongWritable.class, Text.class);

 // Defines additional sequence-file based output 'sequence' for the job
 MultipleOutputs.addNamedOutput(job, "seq",
   SequenceFileOutputFormat.class,
   LongWritable.class, Text.class);
 ...

 job.waitForCompletion(true);
 ... 
```

**在减速机中的用法：**

```
 String generateFileName(K k, V v) {
   return k.toString() + "_" + v.toString();
 }

 public class MOReduce extends
   Reducer<WritableComparable, Writable,WritableComparable, Writable> {
 private MultipleOutputs mos;
 public void setup(Context context) {
 ...
 mos = new MultipleOutputs(context);
 }

 public void reduce(WritableComparable key, Iterator<Writable> values,
 Context context)
 throws IOException {
 ...
 mos.write("text", , key, new Text("Hello"));
 mos.write("seq", LongWritable(1), new Text("Bye"), "seq_a");
 mos.write("seq", LongWritable(2), key, new Text("Chau"), "seq_b");
 mos.write(key, new Text("value"), generateFileName(key, new Text("value")));
 ...
 }

 public void cleanup(Context) throws IOException {
 mos.close();
 ...
 }

 } 
```

# php - 是什么导致 php foreach 循环终止？

> ID：14305355
> 
> 赞同：0
> 
> 时间：2013-01-13T16:16:17.533
> 
> 标签：php, loops, foreach, terminate

我在我的一个 foreach 循环中遇到问题，其中循环的一部分在一次迭代后终止，没有输出或错误。

在网上搜索答案后，我仍然不知道这个问题的任何可能原因（并且代码太大而对社区没有用......）

因此我的问题是，“foreach 循环在一次迭代后终止的可能原因是什么？” （假设需要更多的迭代）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T16:22:27.860

有多种方法可以停止 foreach 循环。这里有一些例子：

```
<?php
$range = range(1,10);

// continue;
foreach($range as $r){
    if($r!=1){
        continue;
    }
    echo $r.'<br>';
}

// break;
foreach($range as $r){
    if($r>1){
        break;
    }
    echo $r.'<br>';
}

// die;
foreach($range as $r){
    if($r>1){
        die;
    }
} 
```

注意：`continue`不会跳出foreach循环，但会导致数据行被“跳过”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T16:24:33.290

它仅适用于数组和对象，当您尝试在具有不同数据类型的变量或未初始化的变量上使用它时会发出错误。

我认为您应该遵循此链接[http://php.net/manual/en/control-structures.foreach.php](http://php.net/manual/en/control-structures.foreach.php)以更好地了解 foreach 循环。

# c - Visual Studio 2010：应用程序无法启动，因为它的并排配置不正确

> ID：14305356
> 
> 赞同：1
> 
> 时间：2013-01-13T16:16:23.213
> 
> 标签：c, visual-studio-2010

我使用 c 在 Visual Studio 2010 中构建了一个项目并获得了一个 DLL，并试图在 postgresql 9.2 中使用该 DLL。但我收到此错误：错误：无法加载库“C:\projmpt.dll”：应用程序无法启动，因为它的并排配置不正确。我安装了最新版本的 Visual C++ Redistributable Packages 但仍然无法正常工作。任何人对此问题有任何想法？

# windows-8 - Windows 8 Metro 风格剪贴板异常

> ID：14305357
> 
> 赞同：1
> 
> 时间：2013-01-13T16:16:38.317
> 
> 标签：windows-8, microsoft-metro, clipboard

我开发了一个以`DispatcherTimer Tick()`方法读取剪贴板数据的应用程序。每秒都会读取剪贴板数据。

该应用程序在开发机器中没有抛出异常（在调试或发布模式下），但是如果我在 Win RT 平板电脑设备上发布应用程序，我在读取剪贴板时会出现异常，但奇怪的是仅在“快照视图”模式下。

在全视图模式下，它可以正常工作。

例外是：

```
"Access is denied. (Exception from HRESULT: 0x80070005 (E_ACCESSDENIED))". 
```

代码看起来像；

```
private async Task Populate()
{
    try
    {

        var clipboardText = await this.GetTextFromClipboard();
           .....
    }
    catch (Exception ex)
    {
        this.HandleException("Error occured while reading clipboard: ", ex);
    }
 }

private async Task<string> GetTextFromClipboard()
{
    var dataPackageView = Clipboard.GetContent(); // Exception occurs here!!!
    if (dataPackageView.Contains(StandardDataFormats.Text))
    {
        var clipboardText = await dataPackageView.GetTextAsync();
        return clipboardText;
    }

    return string.Empty;
} 
```

这里有什么问题，为什么它只在快照视图模式下发生？

# spring - spring+hibernate+jpa是怎么工作的？

> ID：14305360
> 
> 赞同：0
> 
> 时间：2013-01-13T16:16:56.863
> 
> 标签：spring, hibernate, jpa

在我加入的新项目中，他们一直交替使用术语 Hibernate 和 JPA。因此，我尝试深入研究代码并尝试了解整个事情是如何工作的（我是 Spring、JPA 和 Hibernate 世界的新手）。我将尝试将代码放在这里以便更好地理解：1）有一个@Configuration 类，它们具有以下内容：

```
@Resource
private HibernateJpaVendorAdapter hibernateOracleJpaVendorAdapter;

LocalContainerEntityManagerFactoryBean entityManager = 
new LocalContainerEntityManagerFactoryBean();
entityManager.setJpaVendorAdapter(hibernateOracleJpaVendorAdapter);
entityManager.setPersistenceUnitName("abc");
             .
             . 
```

所以，在这个配置类中，我们返回一个 EntityManagerFactory。

2）然后有一个标记为@Persistor的持久化类，其中调用了存储库的方法（例如，用于保存操作）：

```
 blahblahRepository.save(blahblahEntity, abcdef); 
```

3) 最后有一个被注释为@Repository 的存储库类。再说一次，他们有这段代码：

```
@PersistenceContext(unitName = "same as the name in persistence.xml")
protected EntityManager entityManager; 
```

“save”方法围绕着 JPA 的 persist 方法：

```
getEntityManager().persist(entityObject); 
```

我的问题如下： 1）除了 hibernateJpaVendorAdapter 之外，没有关于 Hibernate 的消息。我搜索了整个工作区，它只显示了 3 次出现 hibernate 一词，都在配置文件中。2）根据我所掌握的任何知识，应该使用 EntityManagerFactory 或 EntityManager 但我们两者都做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T16:23:25.270

Hibernate 是 JPA 规范的实现之一。由于您的项目选择 Hibernate 作为其 JPA 实现，因此它使用委托 Hibernate 的 JPA API。就像您使用 JDBC API 时一样，它委托给特定的 Oracle 或 PostgreSQL 驱动程序。

EntityManagerFactory，顾名思义，是EntityManager 的工厂。我不明白你为什么不同时使用两者。EntityManager 是 JPA API 的主接口，用于执行所有数据库操作（查找、持久化、合并、查询等）。EntityManagerFactory 必须在要求它创建 EntityManager 之前进行配置。

# configuration - 狮身人面像 sql 字段字符串

> ID：14305362
> 
> 赞同：0
> 
> 时间：2013-01-13T16:17:13.553
> 
> 标签：configuration, search-engine, sphinx

在我的 Debian 服务器上安装了 sphinx 包，但是当我尝试运行索引器时，我的配置会产生以下错误。

```
using config file '/etc/sphinxsearch/sphinx.conf'...
ERROR: unknown key name 'sql_field_string' in /etc/sphinxsearch/sphinx.conf line 26 col 25.
FATAL: failed to parse config file '/etc/sphinxsearch/sphinx.conf' 
```

索引器应该没问题，因为我在本地开发（osx）上运行相同的配置，sphinx 编译版本。

看起来我确实错过了一个包裹或什么？希望有人可以帮助我！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T23:41:07.670

您安装的软件包几乎可以肯定是用于旧版本的 sphinx。一个没有字符串属性的。

当您运行索引器时，它将在第一行打印它的版本。与您在本地运行索引器时比较。

可以在这里获取 .deb 文件... [http://sphinxsearch.com/downloads/release/](http://sphinxsearch.com/downloads/release/)

# mysql - 从其他列中按年、月、日、小时和分钟填充mysql中的日期字段

> ID：14305365
> 
> 赞同：0
> 
> 时间：2013-01-13T16:17:32.207
> 
> 标签：mysql, sql, database, datetime

我有一个充满测量数据的 MySql 表。

表中的测量日期存储在 5 个单独的列中：`year, month, day, hour, minute.`

我想做的是以 DateTime 格式添加一个包含完整日期的额外列。

所以当我有价值观时

```
 year, month, day, hour, minute
  2013  ,1,    13,  17,    15, 
```

有一个日期时间字段填充了该值`'2013-01-13 17:15:00'`

我将首先添加列，然后我想执行一条 sql 语句来填充日期时间字段。

你能帮我这个sql语句吗？

（我不知道这是否重要，但该语句应该从 phpmyadmin 运行）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T16:24:57.560

试试这个

```
UPDATE myTable set completeValue=CONCAT(year,"-",month,"-",day," ",hour,":",minute) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T16:25:55.910

执行此操作的 SQL 标准方法是：

```
SELECT COALESCE(field1, '-') || COALESCE(field2, '-') || COALESCE(field3, '-') || COALESCE(field4, ':') || COALESCE(field5, ':') FROM table into table.field6 
```

# linq - 使用 IRavenQueryable 的 RavenDB 全文搜索字典

> ID：14305366
> 
> 赞同：3
> 
> 时间：2013-01-13T16:17:49.587
> 
> 标签：linq, lucene, full-text-search, ravendb

请告诉我如何正确地在字典字段上进行全文搜索。

我已经像这样索引了所有可翻译的字段：

```
public class TranTest
{
    public string Id { get; set; }
    public IDictionary<string, string> Trans1 { get; set; }
    public IDictionary<string, string> Trans2 { get; set; }

    //for index queries
    public IDictionary<string, string> Trans { get; set; }
}

public class TranTestIndex : AbstractIndexCreationTask<TranTest>
{
    public TranTestIndex()
    {
        Map = docs =>
            from doc in docs
            select new
            {
                _ = doc.Trans1.Select(x => CreateField("Trans_" + x.Key, x.Value)),
                Trans2 = doc.Trans2.Select(x => CreateField("Trans_" + x.Key, x.Value)),
                /* etc. */
            };

        Index("Trans_en", FieldIndexing.Analyzed);
        Index("Trans_fi", FieldIndexing.Analyzed);
        /* etc. */
    }
} 
```

这（查询转换为：Trans_en:(term)）返回正确的结果：

```
var luceneQ = session.Advanced.LuceneQuery<TranTest, TranTestIndex>().Search(x => x.Trans["en"], searchTerms).ToList(); 
```

但我更喜欢使用 IRavenQueryable API。不幸的是，该 API 中的类似查询会产生 InvalidOperationException：无法理解如何将 'x.Trans.get_Item("en")' 转换为 RavenDB 查询：

```
var ravenQ = session.Query<TranTest, TranTestIndex>().Search(x => x.Trans["en"], searchTerms);
results = ravenQ.ToList();  //Exception! 
```

这很奇怪，考虑到这完美无缺（翻译为：Trans_en：“term *”）：

```
session.Query<TranTest, TranTestIndex>().Where(x => x.Trans["en"].StartsWith(searchTerms)) 
```

我关于这个问题的问题：

1.  **如何使用 IRavenQueryable linq API 在字典字段上创建多词全文搜索查询？**
2.  是否可以将 IRavenQueryable 和 IDocumentQuery 组合成一个查询？
3.  是否有另一种/更好的方法来创建索引？
    *   它必须支持动态添加新语言
    *   它必须支持对具体语言的搜索
    *   搜索应在多个领域进行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T21:31:10.680

你发现了一个错误。我已经通过[这些单元测试](https://gist.github.com/4526281)进行了验证，并将其提交给[RavenDB 问题跟踪器](http://issues.hibernatingrhinos.com/issue/RavenDB-827)。

要暂时解决问题，请使用 Lucene 查询方法，或者（正如您在第二个问题中提到的那样）您可以自定义 IRavenQueryable 的底层 DocumentQuery，如下所示：

```
session.Query<TranTest, TranTestIndex>()
       .Customize(x => ((IDocumentQuery<TranTest>) x)
                           .Search(q => q.Trans["en"], searchTerms)) 
```

# javascript - document.getElementById(...) 为 null 或不是对象....但它是吗？

> ID：14305376
> 
> 赞同：0
> 
> 时间：2013-01-13T16:18:25.380
> 
> 标签：javascript, arrays, getelementbyid, xhtml-transitional

嘿，所以我有点困惑为什么我会收到错误，'document.getElementById(...)' 为空或不是对象。我是 javascript 新手并练习编写数组。这个脚本在我只是有`document.write(r_card[i]);`并且没有`function`. 该页面将加载并随机选择一张卡片。但是后来我想练习函数并调用它们，所以我添加了该`function bar() {`部分并更改`document.write(r_card[i]);`为`document.getElementById(foo).innerHTML = (r_card[i]);`但现在它不起作用。通常，当我遇到此类问题时会出现语法错误，因为我是自己编写 javascript 的新手。做了一些搜索，但找不到有同样错误的人。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="description" content="" />
    <meta name="keywords" content="" />
    <title>Pick a Card!</title>
</head>

<body>
    <script type="text/javascript">
        function bar() {
            var r_card = new Array();
            r_card[0] = "Ace of Diamonds";
            r_card[1] = "Two of Diamonds";
            r_card[2] = "Three of Diamonds";
            r_card[3] = "Four of Diamonds";
            r_card[4] = "Five of Diamonds";
            r_card[5] = "Six of Diamonds";
            r_card[6] = "Seven of Diamonds";
            r_card[7] = "Eight of Diamonds";
            r_card[8] = "Nine of Diamonds";
            r_card[9] = "Ten of Diamonds";
            r_card[10] = "Jack of Diamonds";
            r_card[11] = "Queen of Diamonds";
            r_card[12] = "King of Diamonds";
            r_card[13] = "Ace of Clubs";
            r_card[14] = "Two of Clubs";
            r_card[15] = "Three of Clubs";
            r_card[16] = "Four of Clubs";
            r_card[17] = "Five of Clubs";
            r_card[18] = "Six of Clubs";
            r_card[19] = "Seven of Clubs";
            r_card[20] = "Eight of Clubs";
            r_card[21] = "Nine of Clubs";
            r_card[22] = "Ten of Clubs";
            r_card[23] = "Jack of Clubs";
            r_card[24] = "Queen of Clubs";
            r_card[25] = "King of Clubs";
            r_card[26] = "Ace of Hearts";
            r_card[27] = "Two of Hearts";
            r_card[28] = "Three of Hearts";
            r_card[29] = "Four of Hearts";
            r_card[30] = "Five of Hearts";
            r_card[31] = "Six of Hearts";
            r_card[32] = "Seven of Hearts";
            r_card[33] = "Eight of Hearts";
            r_card[34] = "Nine of Hearts";
            r_card[35] = "Ten of Hearts";
            r_card[36] = "Jack of Hearts";
            r_card[37] = "Queen of Hearts";
            r_card[38] = "King of Hearts";
            r_card[39] = "Ace of Spades";
            r_card[40] = "Two of Spades";
            r_card[41] = "Three of Spades";
            r_card[42] = "Four of Spades";
            r_card[43] = "Five of Spades";
            r_card[44] = "Six of Spades";
            r_card[45] = "Seven of Spades";
            r_card[46] = "Eight of Spades";
            r_card[47] = "Nine of Spades";
            r_card[48] = "Ten of Spades";
            r_card[49] = "Jack of Spades";
            r_card[50] = "Queen of Spades";
            r_card[51] = "King of Spades"
            var i = Math.floor(52 * Math.random())
            document.getElementById(foo).innerHTML = (r_card[i]);
        }
    </script>
    <input type="button" value="Pick a Card!" onclick="bar()" />
    <br />
    <div id="foo">Test</div>
</body>

</html> 
```

您能提供的任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T16:20:40.890

代替

```
document.getElementById(foo).innerHTML = (r_card[i]); 
```

和

```
document.getElementById('foo').innerHTML = (r_card[i]); 
```

您没有名为 的变量`foo`。

作为旁注，您可以使数组声明更清洁

```
var r_card = [
     "Ace of Diamonds",
     "Two of Diamonds"
     ...
]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T16:21:58.373

你需要报价。

```
document.getElementById('foo').innerHTML 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T16:22:14.727

尝试将 'foo' 放在引号中：

```
document.getElementById('foo') 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-13T16:22:19.047

您必须用引号标识 id，因此：

```
document.getElementById('foo').innerHTML 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-13T16:24:04.120

首先看一下，我看到 r_card[51] = "King of Spades" 实际上应该是 r_card[51] = "King of Spades"; 和 var i = Math.floor(52 * Math.random()) 应该是 var i = Math.floor(52 * Math.random());

那些讨厌的;很重要。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-13T16:34:32.953

您忘记将 Id 放入“...”

```
 var i = Math.floor(52 * Math.random())
            document.getElementById("foo").innerHTML = (r_card[i]); 
```

我认为这应该有效

# php - 使用位置标记将一行写入文件

> ID：14305378
> 
> 赞同：0
> 
> 时间：2013-01-13T16:18:31.040
> 
> 标签：php, replace

我想从我的 php 网页在我的服务器上的模板文件中写几行，然后下载它的副本。

我将使用包含要填写的表单的 main.php。它有 changeme1 和 changeme2 的输入字段。

我将使用 create.php 从 main.php 读取 POST 的详细信息，并将它们写到 template.php，其结构如下（但更大更复杂）：

```
<html>
<head>
<title>Test1</title>
</head>

<body>
<p>{changeme1}</p>
<p>{changeme2}</p>

</body>
</html> 
```

有没有办法我可以读入这个 template.php，把 mod 改成 {changeme1} 和 {changeme2} 并写回一个可下载的文件？我正在考虑搜索和替换？

我已经设法通过使用在 SO 上找到的其他信息工作的标头下载文件： [PHP create file for download without save on server](https://stackoverflow.com/questions/5560373/php-create-file-for-download-without-saving-on-server)

但是这种方法与我需要简单地写大括号所在位置的 html 内容相呼应。由于 template.php 回显的最终大小不合适，因为这意味着每次模板更改后都需要大量工作，修改适合 php 回显的模板（希望您在这里理解我）。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T16:36:06.643

[您可以使用file_get_contents()](http://www.php.net/file_get_contents)将文件内容加载到变量中，然后使用[str_replace()](http://www.php.net/str_replace)替换问题中的字符串。

```
<?php
$search  = array('{changeme1}', '{changeme2}');   // what will be searched for
$replace = array('foo', 'bar');                   // replace it with this

$file = file_get_contents ('filename.tpl');
$new  = str_replace ($search, $replace, $file);

// $new now contains the template file contents with the values replaced, 
// do what you want with it
echo $new; 
```

希望这可以帮助。

# angularjs - 编写用于验证图像 url 的指令

> ID：14305383
> 
> 赞同：0
> 
> 时间：2013-01-13T16:18:57.800
> 
> 标签：angularjs

这是我为 AngularJS 编写的第一个指令。我想检查插入到文本输入中的图像 url 是否有效。

这就是我到目前为止所拥有的：

```
angular.module('directives', [])
.directive('imageUrlVerify', function() {
    return {
        restrict: 'A',
        require: 'ngModel',
        link: function(scope, element, attrs, ctrl) {
            var image = new Image();

            scope.$watch(function() {
                if (ctrl.$viewValue) {
                    image.src = ctrl.$viewValue;

                    if (image.complete) {
                        scope[attrs.imageValid] = true;
                    } else {
                        scope[attrs.imageValid] = false;
                    }
                } else {
                    scope[attrs.imageValid] = false;
                }
            });
        }
    }
}) 
```

我用它：

```
<input type="text" ng-model="imageUrl" placeholder="Image URL..." data-image-valid="imageOk" image-url-verify> 
```

这实际上是有效的，但作为我的第一个指令，我想确保我以正确的方式做事......

我错过了什么吗？

编辑：按照@Josh-David-Miller 的回答我想出了这个：

```
angular.module('directives', [])
.directive('imageUrlVerify', function() {
    return {
        restrict: 'A',
        replace: true,
        scope: { url: '=', imageValid: '=' },
        template: '<input ng-model="url" placeholder="Image URL..."/>',
        link: function(scope, element, attrs) {
            var image = new Image();

            scope.$watch('url', function() {
                scope.imageValid = false;
            });

            element.on( 'blur', function() {
                image.src = scope.url;
            });

            image.onload = function() {
                scope.$apply(function() {
                    scope.imageValid = true;
                });
            };

            image.onerror = function() {
                scope.$apply(function() {
                    scope.imageValid = false;
                });
            };
        }
    }
}) 
```

并像这样使用它：

```
<input image-url-verify url="imageUrl" image-valid="imageOk" /> 
```

它看起来更好吗？还有什么地方可以改进？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T20:05:06.140

我不确定我是否遵循您的指令的目的，但可以稍微清理一下。

首先，可重用指令应该有一个隔离作用域，所以它们不能弄乱它们不应该弄乱的任何东西。在您的情况下，它实际上使代码更简单。

其次，$watch 语句没有观察任何东西。$watch 采用第一个参数，该参数是要针对当前范围进行评估的字符串表达式，或者是要与每个摘要一起执行以确定值是否更改的方法。你的方法没有返回任何东西，所以没有什么可看的。您的代码实际上只是在每个摘要上执行相同的代码。也许您可以详细说明您要在这里做什么。

最后，您的验证将在每次击键时进行，这可能不是很有帮助。我将其更改为在焦点离开输入元素时运行。

这是更新的代码：

```
angular.module('directives', [])
.directive('imageUrlVerify', function() {
  return {
    restrict: 'A',
    replace: true,
    scope: { url: '=', imageValid: '=' },
    template: '<input ng-bind="url" placeholder="Image URL..." valid="imageValid" />',
    link: function(scope, element, attrs) {
      var image = new Image();

      element.on( 'blur', function() {
        image.src = url;
        imageValid = url != "" && image.complete ? true : false;
      });
    }
  }
}) 
```

然后它的用法改为：

```
<input image-url-verify url="imageUrl" image-valid="imageOk" /> 
```

这些设计选择中的一些是偏好，一些将取决于您的具体用法，但两者都没有，这就是我将重写您的指令的方式。

# ruby - 为什么 -n 开关不打印每一行？

> ID：14305386
> 
> 赞同：1
> 
> 时间：2013-01-13T16:18:58.950
> 
> 标签：ruby, shell, command-line

我正在尝试通过管道输出这样的命令：

```
some_command | ruby -ne "puts $_ if some_condition($_)" 
```

但是，我看到的只是空行。每行存储在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T16:30:32.467

这应该工作得很好。例如，`ls | ruby -ne 'puts $_ if $_[0] == "r"'`打印出我所期望的。您应该确保您`some_command`实际上正在输出到标准输出。

# winapi - 使用 DirectShow 的视频录制分辨率

> ID：14305387
> 
> 赞同：3
> 
> 时间：2013-01-13T16:19:13.213
> 
> 标签：winapi, video, directshow

在directshow中录制时如何更改视频的屏幕分辨率？因为我有一个 8 兆像素的网络摄像头，我用它来录制视频，但是在保存视频后，当我查看视频时，它的播放就像是使用 1.3 兆像素的摄像头录制的一样。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-13T16:25:29.760

您需要使用`IAMStreamConfig`界面。一些 MSDN 为您提供线索：

[配置视频输出格式 (Windows)](http://msdn.microsoft.com/en-us/library/windows/desktop/dd387907%28v=vs.85%29.aspx)：

> 要配置捕获设备的输出格式，应用程序应使用 pmt 参数中的 IAMStreamConfig::GetFormat 返回的 AM_MEDIA_TYPE 结构。

[IAMStreamConfig::GetFormat 方法 (Windows)](http://msdn.microsoft.com/en-us/library/windows/desktop/dd319785%28v=vs.85%29.aspx)：

> 如果引脚已连接，则此方法返回引脚当前使用的格式。否则，该方法为下一个 pin 连接返回**pin 的首选格式**。如果您已调用 IAMStreamConfig::SetFormat 方法设置格式，则 GetFormat 返回相同的格式。如果不是，它返回 pin 的首选格式列表中的第一个格式，由 IPin::EnumMediaTypes 方法确定。

更多的：

*   [如何在 DirectShow 中更改输出引脚大小和颜色空间/压缩](https://stackoverflow.com/questions/708862/how-to-change-output-pin-size-colorspace-compression-in-directshow/4994417#4994417)
*   [我如何以编程方式设置 Directshow 过滤器的选项？](https://stackoverflow.com/questions/6471999/how-can-i-programmatically-set-a-directshow-filters-options/6472333#6472333)
*   [DirectShow - IAMStreamConfig::SetFormat 和 ICaptureGraphBuilder2::RenderStream 的调用顺序会在某些摄像机中产生问题](https://stackoverflow.com/questions/9834902/directshow-order-of-invocation-of-iamstreamconfigsetformat-and-icapturegraph)

此外，由于后处理功能，您的网络摄像头可能具有较低的视频流分辨率，而用于拍摄静止图像的分辨率较高。

# scala - Scala - 一个不可疑的隐式方法正在搞乱整个 CanBuildFrom 的事情

> ID：14305390
> 
> 赞同：1
> 
> 时间：2013-01-13T16:19:38.283
> 
> 标签：scala, types, implicit

我有以下代码：

```
trait DBO
trait BSONWriter[S]

trait HasWriter {
   implicit def writer[T <: BSONWriter[_ <: DBO]]: T
} 
```

一切都很好！除了当我将它混合到我`objects`的`map`.`CanBuildFrom`

> *   模棱两可的隐含值​​：类型为 [T <: reactivemongo.bson.handlers.BSONWriter[_ <: traits.DBO]]=> T 的 trait Saving 中的方法 writer 和类型为 [A]=> scala 的对象缓冲区中的方法 canBuildFrom。 collection.generic.CanBuildFrom[scala.collection.mutable.Buffer.Coll,A,scala.collection.mutable.Buffer[A]] 匹配预期类型 scala.collection.generic.CanBuildFrom[scala.collection.mutable.Buffer[models. world.Star],traits.IsInWorld with org.bundlelib.traits.Groupable {def asBSON: reactivemongo.bson.AppendableBSONDocument},That]

现在我不明白，为什么会这样？混淆的隐式方法的签名是不同的！我怎样才能防止这种情况发生？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-13T16:40:08.997

我认为一个简短的示例将显示问题：

```
trait Foo

trait Implicits {
    implicit def b[T <: String]: T

    implicit def run = implicitly[Foo]
} 
```

这编译正确 - 那么发生了什么？运行`-Xprint:typer`：

```
implicit def run: foo.Foo = scala.this.Predef.implicitly[foo.Foo](Implicits.this.b[Nothing]) 
```

问题是`Nothing`（和其他类型，据编译器所知）都是`Foo`and `<: String`。的类型`b`太多态了，所以它基本上匹配你所追求的*任何*隐式。这就是您的示例中发生的情况：`Nothing`is both `T <: BSONWriter[_ <: DBO]`and `CanBuildFrom[...]`.

我想我对你的建议是不要制作如此多态的隐式方法。在您的示例中，我实际上想知道您是否真的想要`writer`像它一样多态。也许这就是你想要的？

```
trait HasWriter[T <: BSONWriter[_ <: DBO]] {
   implicit def writer: T
} 
```

这将避免隐含的问题。

# web-applications - 我应该为不同的项目创建多少个 AppID

> ID：14305391
> 
> 赞同：0
> 
> 时间：2013-01-13T16:19:46.217
> 
> 标签：web-applications, facebook-like, facebook-javascript-sdk

我是一名开发人员，希望为客户提供 facebook 集成网站。Facebook for Websites[页面](http://developers.facebook.com/docs/guides/web/#personalization)说我需要一个 appId 来实现一些集成功能，例如 facebook 登录。但是要创建一个 AppId，企业 facebook 帐户似乎无法获取 AppId。

在这种情况下创建 AppId 的做法是什么？我是否使用我的个人 Facebook 帐户创建 AppId，然后将其用于所有项目？或者在我的账户下为每个项目创建一个新的AppId？或者为每个项目创建一个虚拟用户帐户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T16:29:58.330

使用您的个人帐户创建一个应用程序，如果您还需要企业拥有控制权，可以将人员添加为管理员。一般来说，您应该为每个正在构建的公司/企业创建 1 个应用程序。这样可以确保人们不会访问该帐户上其他企业的客户数据。

# ruby - Hash 的 compare_by_identity 是如何工作的？

> ID：14305398
> 
> 赞同：1
> 
> 时间：2013-01-13T16:20:10.220
> 
> 标签：ruby, hash

我首先运行了下面的第一部分代码并获得了所需的输出，现在只是为了解决它并做一些我在第二部分所做的研究。

### 第一部分

```
irb(main):001:0> h1 = { "a" => 100, "b" => 200, :c => "c" }
=> {"a"=>100, "b"=>200, :c=>"c"}
irb(main):002:0> h1["a"]
=> 100
irb(main):002:0> h1[:c]
=> "c" 
```

### 第二部分

```
irb(main):003:0> h1.compare_by_identity
=> {"a"=>100, "b"=>200, :c=>"c"}
irb(main):004:0> h1.compare_by_identity?
=> true
irb(main):005:0> h1["a"]
=> nil
irb(main):006:0> h1[:c]
=> "c"
irb(main):007:0> 
```

如何`h1["a"]`在第一部分和第二部分给出不同的值但不一样`h1[:c]`？

我正在使用 Ruby 1.9.3。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-13T16:42:29.103

[文档是`compare_by_identity`](http://ruby-doc.org/core-1.9.3/Hash.html#method-i-compare_by_identity)这样说的：

> 通过它们的身份`hsh`比较它的键，即它会将完全相同的对象视为相同的键。

通常，哈希键将使用 匹配`eql?`，但`compare_by_identity`将使用匹配它们`equal?`（这大致相当于比较`object_id`s*）。由于具有相同值的字符串的不同实例具有不同`object_id`的 s，因此它不匹配。但是，符号始终具有相同的`object_id`，因此它会继续匹配。

```
hash = { 'a' => 'str a', 'b' => 'str b', :c => 'sym c' }
hash.compare_by_identity

hash.keys.map(&:object_id)      #=> [70179407935200, 70179407935180, 358408]
['a', 'b', :c].map(&:object_id) #=> [70179405705480, 70179405705460, 358408]

hash.keys.zip(['a', 'b', :c]).map { |pair| pair.inject(:eql?) }   #=> [true, true, true]
hash.keys.zip(['a', 'b', :c]).map { |pair| pair.inject(:equal?) } #=> [false, false, true]

a_key = hash.keys.first  #=> 'a'
hash['a']   #=> nil
hash[a_key] #=> 'str a'
hash[:c]    #=> 'sym c' 
```

如您所见，`object_id`字符串的 s 与散列中键的 s 不匹配`object_id`，但符号匹配。事实上，如果你反复运行`'a'.object_id`& `'b'.object_id`（或调用`object_id`任何字符串），你每次都会得到不同的值。

[*这里的警告是可以覆盖`object_id`，但它不会对比较产生影响，因为`equal?`实际上并没有使用`object_id`. 此外，重新定义`equal?`会改变这一点，但在 Ruby 文档中不明确建议这样做。]

# database-design - 数据库设计 - 如何存储与如何显示

> ID：14305401
> 
> 赞同：0
> 
> 时间：2013-01-13T16:20:39.280
> 
> 标签：database-design, web-applications

假设您在调查中有以下问题，您需要将这些问题转置到数据库中，然后在 webapp 中使用：

> 在上个周末，您吃了以下哪些？
> 
> *   冰淇淋
> *   沙拉
> *   炸鸡

在上面我们自动建立连接。但是为了让问题在数据库中有意义，**它们应该像这样存储吗？：**

*   上周末，你吃冰淇淋了吗？
*   上周末，你吃沙拉了吗？
*   上个周末，你吃油炸检查了吗？

假设您正在使用像[Micheal's](https://stackoverflow.com/questions/540885/db-design-survey-quiz-with-questions-and-answers)这样的设计，将它们存储在这样的表中似乎是合理的：

```
[During the last weekend, did you eat ice cream] -> questions_table.question_name
[Yes/No] -> Option_group_table.option_group_name
[Yes][No] -> option_choices_table.option_choice_name
[True or False] -> answers_table.answers_yn 
```

然而，如果你想从这些数据中构建一个网页，它会被杂乱无章地显示：

*   上周末，你吃冰淇淋了吗？
*   上周末，你吃沙拉了吗？
*   上个周末，你吃油炸检查了吗？

**前端 webapp 应该解决这个问题吗？通过正则表达式之类的方式？**

```
Function_to_help_properly_display_string("String") 
```

这种方法的缺点似乎是不能以相同的方式处理不同的 questions.question_names （字符串）。例如：

> 你周末去了以下哪个？
> 
> *   德国
> *   法国

无法像我们最初的问题一样处理。

**或者数据库应该考虑到这可能有更多的列？**

```
[Question table]
[question.heading] -> During the last weekend, which of the following did you eat?:
[question.list] -> ice cream
[question.full] -> During the last weekend, did you eat ice cream? 
```

做这样的事情的缺点是它看起来重复和混乱。

*他们很可能是我没有展示的第三种选择*，请随时分享！提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T23:51:31.233

我已经为调查做过几次数据库设计/UI设计，这就是我用过的：

**表：问题**

字段：question_id、question_text、display_order、question_type、必填

请注意，display_order、question_type 和 required 字段都是 UI 的提示。我们没有将问题和答案一起存储在文本中，但我们已经向 Web 开发人员提供了有关如何在 UI 中显示问题的提示。我们告诉他们他们应该出现什么顺序，它是什么类型的问题（复选框/多选-或-单选按钮/一个选择），以及是否需要问题。

**表：question_options**

字段：question_option_id、question_id、option_text、display_order

这里也一样。我们有一些关于显示顺序和选项文本的 UI 帮助。请注意，使用我们的选项，我们并没有规定 UI 中会发生什么。那是在问题级别举行的。这意味着您可以轻松更改选项的显示方式（下拉菜单、单选按钮、复选框等）

另请注意，我们保留加入问题的能力。

**表：答案**

字段：user_id、question_id、question_option_id

这只是告诉我们给定用户和给定问题，用户回答了什么。

所有这三种结构都是在数据库中进行调查的良好开端。UI 非常自然地由此而来。您必须编写查询/存储过程才能将数据返回到 Web 应用程序，但这并不难。

（一般来说，我认为尝试将字符串解析作为数据库数据显示的一部分是不明智的。换句话说，我认为尝试使用正则表达式来编写问题/答案以在 UI 中显示是不明智的。模型正确的数据库，您会发现应用程序的其余部分不会很难编码。）

# mongodb - 地理空间集群 (MongoDB)

> ID：14305402
> 
> 赞同：8
> 
> 时间：2013-01-13T16:20:39.477
> 
> 标签：mongodb, geospatial, cluster-analysis, markerclusterer

我在地图上有数十万个对象。并且从几乎所有的基础中选择（在小规模的地图容器矩形内）是非常糟糕的做法。需要在数据库内进行聚类。在关系数据库中经常使用附加表——簇，这是首先选择的。在 MongoDB 中是否有一些地理空间集群的最佳实践？谷歌什么也没说。

UPD。想要这样，但在 MongoDB 中：[https ://gis.stackexchange.com/questions/11567/spatial-clustering-with-postgis](https://gis.stackexchange.com/questions/11567/spatial-clustering-with-postgis)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-13T17:28:07.093

对于数十万个项目，内置的[MongoDB 地理空间索引](http://docs.mongodb.org/manual/applications/geospatial-indexes/)可以很好地工作，具体取决于您在做什么。

Mongo [“干草堆查询”](http://docs.mongodb.org/manual/core/geospatial-indexes/#geospatial-indexes-haystack-index)也可能与您的想法一致。

[与 RMDBS 相比，](https://gis.stackexchange.com/questions/8991/how-to-store-lines-and-polygons-in-json-documents/12728#12728)您可能还对Mongo 的 GIS 功能的讨论感兴趣

# c++ - QT中第3方库（Qextserial）的多重定义错误

> ID：14305410
> 
> 赞同：0
> 
> 时间：2013-01-13T16:21:47.677
> 
> 标签：c++, qt

我正在使用 QT 做 UI 应用程序。应用程序将在桌面上运行以从用户那里获取 bin 文件，并将通过串行端口对微控制器进行编程。我选择了“qextserialport”库进行串口通信。

我在课堂上包含了 qextserialport 标头，例如：

```
#ifndef __SERIALHELPER_H
#define __SERIALHELPER_H
#include <serialPortDriver/qextserialport.h>
#include "QThread"

class serialHelper : public QThread
{ etc..... 
```

在 .pro 文件中，我为 qextSerial 添加了这一行

```
include(qextserialport.pri) 
```

现在我收到多个定义错误：

./debug\moc_qextserialenumerator.o：在函数“ZN20QextSerialEnumerator18qt_static_metacallEP7QObjectN11QMetaObject4CallEiPPv”中：

D:\QTNTloader-build-minGW-Debug/debug/moc_qextserialenumerator.cpp:47: 'QextSerialEnumerator::qt_static_metacall(QObject*, QMetaObject::Call, int, void**)'的多重定义

./debug\qextserialenumerator.o:D:\QTNTloader-build-minGW-Debug/../QTNTloader2/serialPortDriver//moc_qextserialenumerator.cpp:47：这里首先定义

因为这是我第一个使用 QT 的 UI 程序，所以我找不到解决方案。您对错误的原因有任何想法吗？

现在，当我下载 qextserial 时，我又想到了一件事情，我将它作为项目打开，构建它并获取 .moc 文件并手动将它们添加到我的项目中。我这样做是因为我收到有关丢失 moc 文件的错误，我做了吗我不应该做的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T17:15:47.473

您不必手动将 .moc 文件添加到项目中，让 qmake 为您完成。打开 Visual Studio 命令提示符（从“开始”菜单），转到包含 .pro 文件的文件夹，然后运行：

```
qmake -tp vc 
```

这应该会创建一个可以在 Visual Studio 中打开的 vcproj 文件，其中包含编译和链接所需的所有文件。

# javascript - 无法使用 .attr() 设置多个属性

> ID：14305413
> 
> 赞同：1
> 
> 时间：2013-01-13T16:21:53.493
> 
> 标签：javascript, jquery

如何使用下面的变量设置`.attr()`我的？`iframe``attrs`

```
iosocket.on('content', function (object) {
    var attrs = '';
    for (var key in object) {
        attrs = attrs.concat(",'" + key + "':'" + object[key] + "'");
    }
    attrs = '{' + attrs.substring(1) + '}';
    console.log(attrs);
    var i = $('<iframe></iframe').attr(attrs);
    $('#in').append(i);
}); 
```

console.log 说得对，但它不起作用，我的 iframe 永远不会得到 attrs 并且没有错误被丢弃。

```
{'width':'853','height':'480','src':'https://www.youtube-nocookie.com/embed/qNaknTgIbIg?rel=0','frameborder':'0','allowfullscreen':''} 
```

我也尝试过`.attr(eval(attrs))`，同样的问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T16:25:25.753

`.attr()`当用作 setter 时，该函数接受 Object 以及其他选项。但是，`attrs`是一个字符串，在这种情况下，它将作为一个 getter 而不是作为一个 setter 作出反应。

我怀疑您需要在收到信息时传递信息。

```
iosocket.on('content', function(attrs) {
  $('<iframe></iframe>').attr(attrs).appendTo('#in');
}); 
```

# xquery - 如何向需要相交的列表中的节点添加额外的元素

> ID：14305414
> 
> 赞同：1
> 
> 时间：2013-01-13T16:21:55.177
> 
> 标签：xquery, exist-db

我有两个元素列表，用于查询第三种类型的元素（在 eXist DB 中）。但是由于我只想要两个查询都找到的结果（即满足两组初始参数），所以我对这两个子结果进行了交集：

```
let $aList1 := for $elementB in $elementListB return //ElementA[ft:query(@referenceB, $elementB/@id)]
let $aList2 := for $elementC in $elementListC return //ElementA[ft:query(@referenceC, $elementC/@id)]
let $results := $aList1 intersect $aList2 
```

问题是，我需要在起始列表中的每个元素上调用一个函数来获取一些额外的信息。通常我会做这样的事情：

```
let $aList1 := for $elementB in $elementListB
    let $additionalInfo := additionalInfoFunction($elementB)
    return
        <wrapper>
        <additionalInfo>{$additionalInfo}</additionalInfo>
        {
             //ElementA[ft:query(@referenceB, $elementB/@id)]
        }
        </wrapper> 
```

但是，如果我这样做，我将无法执行交集，`$aList1`因为`$aList2`交集与引用而不是值一起使用。

我想像这样调用`additionalInfoFunction`路口之后：

```
return for $result in $results
let $elementB := $elementListB[@id = $result/@referenceB]
let $additionalInfo := additionalInfoFunction($elementB)
return
    <wrapper>
    <additionalInfo>{$additionalInfo}</additionalInfo>
    {
         BLA BLA
    }
    </wrapper> 
```

但这里的问题是，虽然`$elementListB`只`$elementListC`包含几个元素，`$results`但可以包含数百个元素，这是一个问题，因为`additionalInfoFunction`它相对昂贵。

这里有一些我看不到的聪明的解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T20:28:22.670

XQuery 是一种具有不可变变量的函数式语言，因此没有副作用。

> 但是，如果我这样做，我将无法执行交集， `$aList1`因为`$aList2`交集与引用而不是值一起使用。

函数或运算符是否`intersects`会返回引用仅与实现相关（引用可能更快），但由于所有值都是不可变的，这对您来说永远不会成为问题。

* * *

实际问题是相关的，但不相似；`intersects`不做深度相等，而只查看一些内部“节点ID”（如果需要，也可以参考）。创建两个元素 - 尽管包含相同的内容 - 将创建不同的节点，因此`intersect`不会返回任何结果。

您将不得不建立自己的交叉点，这并不难：

```
let $a := (<a><a1/><a2/></a>, <b><b1/><b2/></b>),
    $b := (<a><a1/><a2/></a>, <c><c1/><c2/></c>)

return $a[
  some $e in $b
  satisfies deep-equal(., $e)
] 
```

这将返回所有元素`$a`，其中有一些元素`$b`深度等于 from `$a`。

# ruby-on-rails - Rails：I18n 在占位符中产生奇怪的结果

> ID：14305419
> 
> 赞同：2
> 
> 时间：2013-01-13T16:22:09.670
> 
> 标签：ruby-on-rails, internationalization, placeholder

在我看来，我有以下代码：

```
<%= form_tag searches_path, :method => 'get', :class => "nav_search" do %>
  <%= hidden_field_tag "type", "publications" %>
  <%= text_field_tag :query, nil, :placeholder => t('publications') %>
<% end %> 
```

这在我的 en.yml 文件中：

```
en:
  views:
    layout:
      publications: 'publications' 
```

尽管 I18n 在网站上的其他地方工作，但每当我将它放在这样的占位符中时，我都会得到奇怪的结果。文本字段包含此作为占位符：

```
<span class= 
```

后跟占位符之外的此文本：

```
Publications" type="text" /> 
```

知道会发生什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T17:51:47.437

这里最简单的事情是像这样指定完整的翻译键：

```
<%= text_field_tag :query, nil, :placeholder => t('views.layout.publications') %> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-29T14:04:56.047

在 Rails 4.2 中，您现在可以这样做：

`<%= f.text_field :query, placeholder: true %>`

i18n 将从以下位置拉取占位符：

`en.helpers.placeholder.model_name.query`

# php - 如何将 PHP 数组中的值绘制到 Jqplot 中？

> ID：14305420
> 
> 赞同：0
> 
> 时间：2013-01-13T16:22:11.900
> 
> 标签：php, html, arrays, graph, jqplot

我是 PHP、javascript 和 Jqplot 的新手。我正在制作一个网站，在 PHP 中可以说 array1 输出

```
Array ( [0] => 0.0024 [1] => 0.0024 [2] => 0.0024 [3] => 0.0024 [4] => 0.00098765432098765 [5] => 0.00098765432098765 [6] => 0.00098765432098765 [7] => 0.001953125 [8] => 0.001953125 [9] => 1 [10] => 1 [11] => 1 [12] => 0.2 [13] => 0.2 [14] => 0.2 [15] => 0.2 [16] => 0.25 [17] => 2 ) 
```

阵列 2 个输出

```
Array ( [0] => 2013-01-13 14:13:05 [1] => 2013-01-13 14:14:56 [2] => 2013-01-13 14:15:05 [3] => 2013-01-13 14:15:13 [4] => 2013-01-13 14:16:48 [5] => 2013-01-13 14:17:20 [6] => 2013-01-13 14:17:56 [7] => 2013-01-13 14:25:06 [8] => 2013-01-13 14:27:28 [9] => 2013-01-13 14:29:41 [10] => 2013-01-13 14:30:36 [11] => 2013-01-13 14:30:53 [12] => 2013-01-13 14:35:37 [13] => 2013-01-13 14:39:52 [14] => 2013-01-13 14:48:30 [15] => 2013-01-13 14:49:40 [16] => 2013-01-13 14:51:23 [17] => 2013-01-13 14:55:05 ) 
```

如何在 jqplot 中绘制这些数据？

如果有任何帮助，我将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T16:42:39.040

我假设您希望 array1 成为 y 轴，而 array2 成为 x 轴。只需在 PHP 循环中输出 javascript 行，它就可以解决问题。

```
<script type="text/javascript">
    var lines = [];

<? for ($i=0; $i<count($array1); $i++) { ?>
    lines[<?=$i?>] = ['<?=$array2[$i]?>', <?=$array1[$i]?>];
<? } ?>

    // The array 'lines' will be plotted into 'chart1' when the document loads
    $(document).ready(function(){
        var plot1 = $.jqplot ('chart1', [ lines ]);
    });

</script>

<!-- This is the div where the graph will be displayed -->
<div id="chart1" style="height:300px; width:500px;"></div> 
```

绘制上面的`lines`数组，你应该得到你想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T09:42:33.740

这是我尝试过的一个简单示例：

有一个名为 mysql 的表`attendence`，我将创建一些数据数组。

```
<?php
    $query = mysql_query("SELECT * FROM attendence");
    $results = array(array());

    while($line = mysql_fetch_array($query)){
        $results[] = $line;
    }

    $empNames = array();
    $attendence = array();
    foreach( $results as $g )
    {
        $empNames[] = $g[EmpId];
        $attendence[] = $g[attendence];
    }

?> 
```

这是HTML代码：

```
 <div id="content"> 
    <h2>Charts</h2>
        <div id="chart1b" style="height:300px; width:500px;"></div>
        <br>
        <div id="chart1" style="height:300px; width:500px;"></div>
        <br>
        <div id="chart2" style="height:300px; width:500px;"></div>
  </div> 
```

这是我的javascript代码：

```
<script type="text/javascript">
$(document).ready(function(){
var line1 = <?php echo json_encode($results); ?>;
var plot1b = $.jqplot('chart1b', [line1], {
    title: 'Employee vs. Attendence',
        series:[{renderer:$.jqplot.BarRenderer}],
    axesDefaults: {
    tickRenderer: $.jqplot.CanvasAxisTickRenderer ,
    tickOptions: {
        fontFamily: 'Georgia',
        fontSize: '10pt',
        angle: -30
        }
    },
    axes: {
     yaxis: {
         autoscale:true
         },
     xaxis: {
     renderer: $.jqplot.CategoryAxisRenderer
     }
    }
    });
});
  </script>         
  <!-- End code -->

  <!-- Chart Two code -->
  <script type="text/javascript">
$(document).ready(function(){
    var data = <?php echo json_encode($results); ?>;
    var plot1 = jQuery.jqplot ('chart1', [data], 
    { 
    seriesDefaults: {
    // Make this a pie chart.
    renderer: jQuery.jqplot.PieRenderer, 
    rendererOptions: {
    // Put data labels on the pie slices.
        // By default, labels show the percentage of the slice.
    showDataLabels: true
    }
        }, 
    legend: { show:true, location: 'e' }
          });
    });
</script>
    <!-- End code -->

    <!-- Chart three code -->
    <script type="text/javascript">
    $(document).ready(function(){
       var line1 = <?php echo str_replace('"','',json_encode($attendence)); ?>;
        var plot3 = $.jqplot('chart2', [line1], {
        title: 'Bar Chart with Point Labels', 
        seriesDefaults: {renderer: $.jqplot.BarRenderer},
         series:[
            {pointLabels:{
              show: true,
              labels:<?php echo json_encode($empNames); ?>
          }}],
          axes: {
             xaxis:{renderer:$.jqplot.CategoryAxisRenderer},
             yaxis:{padMax:1.3}}
          });
        });
   </script>
   <!-- End code --> 
```

好好享受 ：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T17:31:33.277

我有一个像你的问题的例子，你必须创建一个像给定的第 1 行数组一样的数组，你可以得到你的结果，

```
 <script class="code" type="text/javascript">

$(document).ready(function(){
  var line1=[['2008-06-30 8:00AM',4], ['2008-7-14 8:00AM',6.5], ['2008-7-28 8:00AM',5.7], ['2008-8-11 8:00AM',9], ['2008-8-25 8:00AM',8.2]];
  var plot2 = $.jqplot('chart2', [line1], {
      title:'Customized Date Axis', 
      axes:{
        xaxis:{
          renderer:$.jqplot.DateAxisRenderer, 
          tickOptions:{formatString:'%b %#d, %#I %p'},
          min:'June 16, 2008 8:00AM', 
          tickInterval:'2 weeks'
        }
      },
      series:[{lineWidth:4, markerOptions:{style:'square'}}]
  });
});
</script> 
```

如果您发现任何问题，您还可以在以下链接中查看示例代码[http://www.jqplot.com/tests/date-axes.php](http://www.jqplot.com/tests/date-axes.php)

# ios - IOS 中的 C 样式常量及其值

> ID：14305424
> 
> 赞同：-1
> 
> 时间：2013-01-13T16:22:19.530
> 
> 标签：ios, objective-c, xcode, constants, c-preprocessor

首先，我是 IOS 应用程序开发的新手，但熟悉 C 风格的语言，因为我来自 Java 世界。[我按照这本书http://books.google.kz/books/about/Foundation_iPhone_App_Development.html?id=68L0dC2Sl8IC&redir_esc=y](http://books.google.kz/books/about/Foundation_iPhone_App_Development.html?id=68L0dC2Sl8IC&redir_esc=y)学习为 IOS 开发。我的问题来自第 9 章。

第一个问题是当我尝试构建时，它说“Objective-C 指针类型“UIColor”到 C 指针类型“GCColorRef”（又名“struct CGColor *”）的隐式转换需要桥接强制转换”。代码如下（错误行标有注释）：

```
#define kFontLightOnDarkTextColour [UIColor colorWithRed: 255.0/255 green:251.0/255 blue: 218.0/255 alpha:1.0];
#define kFontDarkOnLightTextColour [UIColor colorWithRed: 1.0/255 green:1.0/255 blue:1.0/255 alpha: 1.0];

#define kFontNavigationTextColour [UIColor colorWithRed: 106.f/255.f green:62.f/255.f blue:29.f/255.f alpha: 1.f];
#define kFontNavigationDisabledTextColour [UIColor colorWithRed: 106.f/255.f green: 62.f/255.f blue: 39.f/255.f alpha: 0.6f];
#define kNavigationButtonBackgroundColour [UIColor colorWithRed: 255.f/255.f green: 245.f/255.f blue: 225.f/255.f alpha: 1.f];
#define kToolbarButtonBackgroundColour [UIColor colorWithRed: 39.f/255.f green: 17.f/255.f blue: 5.f/255.f alpha: 1.f];
#define kLargeButtonTextColour [UIColor whiteColor];

#define kFontNavigation [UIFont fontWithName: @"HelveticaNeue-Bold" size:18.f];
#define kFontName [UIFont fontWithName: @"HelveticaNeue-Bold" size:30.f];
#define kFontBirthdayDate [UIFont fontWithName: @"HelveticaNeue" size:13.f];
#define kFontDaysUntilBirthday [UIFont fontWithName: @"HelveticaNeue-Bold" size:25.f];
#define kFontDaysUntilBirthdaySubText [UIFont fontWithName: @"HelveticaNeue" size:9.f];
#define kFontLarge [UIFont fontWithName: @"HelveticaNeue-Bold" size:17.f];
#define kFontButton [UIFont fontWithName: @"HelveticaNeue-Bold" size:30.f];
#define kFontNotes [UIFont fontWithName: @"HelveticaNeue" size:16.f];
#define kFontPicPhoto [UIFont fontWithName: @"HelveticaNeue-Bold" size:12.f];
#define kFontDropShadowColour [UIColor colorWithRed:1.0/255 green:1.0/255 blue:1.0/255 alpha:0.75];

+(void) styleLabel: (UILabel *)label withType:(TSKLabelType) labelType {
switch(labelType) {
    case TSKLabelTypeName:
        label.font = kFontName;
        label.layer.shadowColor = kFontDropShadowColour.CGColor;//error is here, when I try to use CGColor
        label.layer.shadowOffset = CGSizeMake(1.0f, 1.0f);
        label.layer.shadowRadius = 0.0f;
        label.layer.masksToBounds = NO;
        label.textColor = kFontLightOnDarkTextColour;
        break; }} 
```

第二个问题的代码如下：

```
+(void) initStyles {
NSDictionary* titleTextAttributes = [NSDictionary dictionaryWithObjectsAndKeys: kFontNavigationTextColour, UITextAttributeTextColor, [UIColor whiteColor], UITextAttributeTextShadowColor, [NSValue valueWithUIOffset:UIOffsetMake(0, 2)], UITextAttributeTextShadowOffset, kFontNavigation, UITextAttributeFont, nil];
[[UINavigationBar appearance] setTitleTextAttributes:titleTextAttributes];
[[UINavigationBar appearance] setBackgroundImage:[UIImage imageNamed:@"navigation-bar-background.png"] forBarMetrics:UIBarMetricsDefault];} 
```

通过引用“kFontNavigation”常量，定义“titleTextAttributes”的行说我“预期']'”。但是，该行没有错误，而是带有“kFontNavigationTextColour”的行说我“预期']'”。

这些问题是什么？我正在编写和运行与书中所写相同的代码。也许问题出在IDE或编译器中？我的 Xcode 是 4.5.2 和 OS X Lion 10.7.5。

PS：所有常量（定义）和静态方法都定义在一个类中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T16:26:20.013

删除常量定义末尾的分号：

```
#define kFontNavigationTextColour [UIColor colorWithRed: 106.f/255.f green:62.f/255.f blue:29.f/255.f alpha: 1.f]; 
```

#define 语句不需要终止分号。如果您确实添加了它们，编译器会将它们识别为您尝试分配给宏变量的字符串的一部分。

# ios - 是否有一种安全的方法可以从外部更新音频队列的用户数据结构中的字段？

> ID：14305427
> 
> 赞同：1
> 
> 时间：2013-01-13T16:22:58.997
> 
> 标签：ios, objective-c, concurrency, locking, core-audio

我正在使用音频队列构建一个用于学习目的的简单录音机。回调函数接收一个指向结构体的指针，该结构体的定义如下：

```
typedef struct RecorderUserData {
    AudioFileID outputFileID;
    SInt64 recordPacket;
    BOOL recording;
} RecorderUserData; 
```

访问该结构的回调函数字段。这个回调函数被Core Audio*异步调用。*

```
static void RecorderAudioQueueInputCallback(void *inUserData, 
    AudioQueueRef inQueue,
    AudioQueueBufferRef inBuffer,
    const AudioTimeStamp *inStartTime,
    UInt32 inNumPackets,
    const AudioStreamPacketDescription *inPacketDesc) {

    UXAudioRecorderUserData *recorderUserData = (UXAudioRecorderUserData *)inUserData;

    if (recorderUserData->recording) {
        // do something while recording
    }

    // much more code
} 
```

问题是，我想从外部方法调用开始/停止录制。当记录开始时，结构体准备好，记录字段设置为 YES。

当录制必须结束时，我必须将录制字段设置为 NO。

在 Kevin Avila 和 Chris Adamson 撰写的 Core Audio 书中，他们在一个巨大的单片主函数中完成了这一切，我仍然可以在脚下访问这个结构。

但是由于 Core Audio 正在异步访问这个结构，一旦我的 -stopRecording 方法被调用，我怎样才能安全地将录制字段设置为 NO？问题是我可能需要在我的记录器类中指向该结构的指针，但也需要一种锁定对它的访问的方法，因此我不会在回调函数读取它时将其更改为 NO。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T20:43:24.517

不应等待 Core Audio 回调中的任何锁。

处理此问题的一种方法是使用简单的原子写入大小（1 个字）标志，该​​标志只能在一个线程中写入，并且只能在任何其他回调或方法中读取一次。然后，只要音频回调不能写入标志，并且在开始时只读取一次，从主线程切换该标志应该是安全的。但请注意，在切换标志（并且数据缓存被刷新等）之后，回调仍然可能“做某事”，因此您可能需要等待一段时间（最大音频单元缓冲区大小），或者等待另一个完成握手标志，然后确保您的记录标志状态的变化被识别。

# php - 检查字符串是否包含数据库中的用户名以使消息变为绿色

> ID：14305428
> 
> 赞同：0
> 
> 时间：2013-01-13T16:23:05.770
> 
> 标签：php, mysql

我正在尝试从数据库中获取用户名列表，以查看消息是否包含@username，现在我有以下代码：

```
if (strpos($data[3], '@') !== false) {
    $user_array_thing = array();
    $user_query = mysql_query("SELECT username FROM users");
    while($user_username = mysql_fetch_array($user_query) && in_array($data[4],$user_array_thing) === false){
        if(strpos($data[3],'@'.$user_username['username']) !== false){
            //echo a message to somebody
            echo '<li class="qn"><a href="/status/index.php?user='.$prof_user.'&status='.$data[4].'" class="qn_vis"><font color="#007a00"><b><< '.$data[2].':</b>&nbsp;&nbsp;'.$data[3].'</font> - <font size="1" color="#a3a3a3">'.Timesince(strtotime($time)).' ago</font></a></a><!--<div id="delete'.$data[4].'" style="display:none; margin:0px;" class="qn_div"><form method="post" action=""><input type="hidden" name="messageid" id="messageid" value="'.$data[4].'" /><input class="button small red" type="submit" id="delete" name="delete" value="Delete" /></form><br></div>-->';
            $user_array_thing[] = $data[4];
        }
    }
} else { 
    $data[3] = preg_replace('|\B#([\d\w_]+)|i', '<font color="#8020E0">$0</font>', $data[3]);
    $data[3] = preg_replace('|\B\@([\d\w_]+)|i', '<font color="#1378E0">$0</font>', $data[3]);
    echo '<li class="qn"><a href="/status/index.php?user='.$prof_user.'&status='.$data[4].'" class="qn_vis"><img src="/images/icons/web/Bubble3.png" /><font color="#147CE6"><b>'.$data[2].' said</font>:</b>&nbsp;&nbsp;'.$data[3].'<font size="1" color="#a3a3a3"> - '.$commentcount.''.Timesince(strtotime($time)).' ago</font></a></a>';
} 
```

它可以完美运行，直到您发布带有电子邮件地址的内容，例如“someone@gmail.com”

gmail.com 不在数据库中，但仍然变绿。我不确定我做错了什么，我已经尝试了几天来解决这个问题，但无济于事。任何建议都会很好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T16:29:39.467

为什么不直接使用数据库为您完成这项工作？

```
<?php
$username = mysql_real_escape_string ($data['username']); // or wherever you're getting the username from 
$query    = mysql_query ("SELECT id FROM users WHERE username='$username'");

if (mysql_num_rows($query) > 0) {
    // that username sure does exist in the database!
}
else {
    // poo!
} 
```

另请注意，它`ext/mysql`已被正式弃用（从 PHP 5.5.0 开始）并且不应使用。建议您使用[MySQLi](http://php.net/manual/en/book.mysqli.php)或[PDO MySQL](http://php.net/manual/en/ref.pdo-mysql.php)来连接 MySQL。

希望这可以帮助

# javascript - 图像交换后对不同尺寸的图像应用垂直居中

> ID：14305430
> 
> 赞同：0
> 
> 时间：2013-01-13T16:23:21.727
> 
> 标签：javascript, jquery, vertical-alignment, fluid-layout

我目前正在使用此脚本循环浏览单个文件夹中的图像。

```
$(function(){
  $(".img-swap").on('click', function() {
    var self = this,
        file = this.src,
        common = file.substring(0, file.length-6)
        currentId =  +file.substr(-6,2),
        id = ('0' + (currentId+1)).substr(-2),
        nextimage = new Image();

    nextimage.onload = function(){
      // image was preloaded so it exists
      var img = this;
      $(self).fadeOut('slow', function(){self.src = img.src; $(self).fadeIn(300)});
    };
    nextimage.onerror = function(){
      // error occured while preloading. we assume image does not exist
      $(self).fadeOut('slow', function(){self.src = common+ '01.jpg'; $(self).fadeIn(300)});
    };
    nextimage.src = common + id + '.jpg';
  });
}); 
```

问题如下：图像具有所有基于 % 的大小，并且在具有此脚本的容器中垂直排列：

```
 $(window).resize(function(){
  $( ".vertical").each(function() {
    $(this).css({
      position:'relative',
      marginTop: ($(this).parent().outerHeight() 
                  - ($(this).outerHeight()+15))/2
    });
  });
});

$(window).load(function() {
  $( ".vertical").each(function() {
    $(this).css({
      position:'relative',
      marginTop: ($(this).parent().outerHeight() 
                  - ($(this).outerHeight()+15))/2
    });
  });
}); 
```

现在：如果新加载的图像与初始图像的高度不同，则垂直边距不会使图像居中，因为它使用初始图像的高度，直到我调整窗口大小。

是否可以在不调整窗口大小的情况下将边距顶部应用于每个新加载的图像？

这是测试版网站：[http ://www.zeiteffekt.de/relaunch](http://www.zeiteffekt.de/relaunch)

非常感谢每一个帮助。

# c++ - C++ 不能让指针工作

> ID：14305431
> 
> 赞同：0
> 
> 时间：2013-01-13T16:23:25.097
> 
> 标签：c++, pointers

我在 C++ 中使用指针时遇到问题，我不知道它是什么；

我有一个名为 LectureNode 的类：

```
class LectureNode
{
public:
Lecture *LecturePtr;

LectureNode(Lecture lec)
{
    LecturePtr = &lec;
}
}; 
```

这个类的构造函数工作得很好。我还有一堂课：

```
class LectureForest
{
LectureNode *LecNode;
list<Lecture>::iterator it;

public:
LectureForest(list<Lecture> lecs)
{
    Makeset(lecs);
}

void Makeset(list<Lecture> lecs)
{
    for(it = lecs.begin(); it != lecs.end(); it++)
    {
        LecNode = LectureNode(*it); 
    }
} 
```

问题出现在最后一行。(*it) 被传递给 LectureNode 构造函数，LectureNode 创建成功，但是 LecNode 没有指向它，而是调试器说错误的指针。

谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-13T16:25:16.783

一个问题，代码

```
LectureNode(Lecture lec)
{
    LecturePtr = &lec;
} 
```

存储指向按值参数的指针，一个本地的。如果稍后使用该指针，那么您将具有**未定义的行为**，因为按值参数不再存在。

* * *

一种合理的解决方案是

```
LectureNode(Lecture* const lec)
    : lecturePtr_( lec )
{} 
```

在哪里

*   传递一个指针，这是存储指针时的常规做法（也解决了 UB 问题）

*   在构造函数体中使用*初始化列表*而不是赋值，这是一个好习惯（它更通用，适用于更多情况，也可以更高效）

*   使用统一的命名约定（`lec`和的首字母小写`lecturePtr_`），数据成员使用通用的后缀约定（下划线结尾）。

* * *

顺便提一下，“初始化列表”一词有多个含义。它还指的是初始值的花括号列表。构造函数初始化列表的神圣标准术语是*mem-initializer*，但我从未听说或见过有人使用该术语。

# php - PHP SMTP邮件功能不适用于phpmailer

> ID：14305440
> 
> 赞同：1
> 
> 时间：2013-01-13T16:24:20.280
> 
> 标签：php, smtp

PHP SMTP 邮件功能无法与 phpmailer 一起使用并引发以下错误

> **错误：** SMTP 错误：无法加载语言字符串：tls。

我的代码是：

```
require_once('class.phpmailer.php');

$mail  = new PHPMailer();   
$mail->IsSMTP();    
$mail->SMTPAuth   = True;                  // enable SMTP authentication
$mail->SMTPSecure = "tls";                 // sets the prefix to the server
$mail->Host       = "localhost";      
$mail->Port       = 25;                 
$mail->Username   = "xxxxxx@xxxxx.org.in";  // my username
$mail->Password   = "xxxx";            // my password

$mail->From       = "xxxxxxx@xxxxx.org.in";
$mail->FromName   = "you name";
$mail->Subject    = "some subject";
$mail->MsgHTML("the message");

$mail->AddAddress("yyyyyy@gmail.com","logan");
$mail->IsHTML(true); // send as HTML

if(!$mail->Send()) {//to see if we return a message or a value bolean
    echo "Mailer Error: " . $mail->ErrorInfo;
} else  echo "Message sent!"; 
```

我已经获得了我的网络服务提供商的主机和端口详细信息，但无法正常工作。

当我调试时，以下是错误：

```
SMTP -> FROM SERVER:220 We do not authorize the use of this system to transport unsolicited, and/or bulk e-mail.
SMTP -> FROM SERVER: 250-mail02.clientns.net [127.0.0.1], this server offers 4 extensions 250-AUTH LOGIN 250-SIZE 52428800 250-HELP 250 AUTH=LOGIN
SMTP -> FROM SERVER:503 Bad sequence of commands
SMTP -> ERROR: STARTTLS not accepted from server: 503 Bad sequence of commands
SMTP -> FROM SERVER:250 Requested mail action okay, completed
Language string failed to load: tls Mailer Error: Language string failed to load: tls 
```

谁能告诉我为什么连接不上？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-13T17:47:50.593

当我删除以下内容时，它对我有用。

```
//$mail->SMTPSecure = "tls"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T17:08:42.640

您告诉 PHPMailler 使用托管在您服务器上的安全邮件服务。如果您不知道是否是这种情况，请将这些行注释为 this 并对其进行测试（它将使用 php 本机“mail()”函数，如此[处](http://phpmailer.worxware.com/index.php?pg=exampleamail)所述）：

```
require_once('class.phpmailer.php');

$mail  = new PHPMailer();   
//$mail->IsSMTP();    
//$mail->SMTPAuth   = false;                  // enable SMTP authentication
//$mail->SMTPSecure = "ssl";                 // sets the prefix to the server
//$mail->Host       = "localhost";      
//$mail->Port       = 25;                 
//$mail->Username   = "xxxxxx@xxxxx.org.in";  // my username
//$mail->Password   = "xxxx";            // my password

$mail->From       = "xxxxxxx@xxxxx.org.in";
$mail->FromName   = "you name";
$mail->Subject    = "some subject";
$mail->MsgHTML("the message");

$mail->AddAddress("yyyyyy@gmail.com","logan");
$mail->IsHTML(true); // send as HTML

if(!$mail->Send()) {//to see if we return a message or a value bolean
    echo "Mailer Error: " . $mail->ErrorInfo;
} else  echo "Message sent!"; 
```

# uitableview - UITableView 编辑模式

> ID：14305443
> 
> 赞同：0
> 
> 时间：2013-01-13T16:24:36.053
> 
> 标签：uitableview

`UITableView`我在使用`editingStyleForRowAtIndexPath`返回`UITableViewCellEditingStyleInsert`或的编辑模式下做事`UITableViewCellEditingStyleDelete`。

它工作得很好，但是我尝试了一件事没有成功。我使用按位或运算符尝试了以下操作：

```
return UITableViewCellEditingStyleInsert|UITableViewCellEditingStyleDelete; 
```

希望能回来`UITableViewCellEditingStyleInsert`的`UITableViewCellEditingStyleDelete`同时也能回来。

我不明白为什么不可能。我的意思是我希望能够删除该单元格，并且我还希望能够在之前插入另一个单元格。但实际情况如何？我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T14:29:31.900

这是设计使然，一个单元格只能有一种编辑样式。此外，控件放置在同一位置。还有枚举的定义方式：

```
typedef enum {
    UITableViewCellEditingStyleNone,
    UITableViewCellEditingStyleDelete,
    UITableViewCellEditingStyleInsert
} UITableViewCellEditingStyle; 
```

它不是为 ORing 设计的，就像某些选项枚举一样，例如`UIViewAutoResizingMask`from `UIView`：

```
enum {
    UIViewAutoresizingNone                 = 0,
    UIViewAutoresizingFlexibleLeftMargin   = 1 << 0,
    UIViewAutoresizingFlexibleWidth        = 1 << 1,
    UIViewAutoresizingFlexibleRightMargin  = 1 << 2,
    UIViewAutoresizingFlexibleTopMargin    = 1 << 3,
    UIViewAutoresizingFlexibleHeight       = 1 << 4,
    UIViewAutoresizingFlexibleBottomMargin = 1 << 5
};
typedef NSUInteger UIViewAutoresizing; 
```

# c# - dataAdapter .Fill 和 .Update 的比较

> ID：14305447
> 
> 赞同：6
> 
> 时间：2013-01-13T16:25:01.550
> 
> 标签：c#, database, dataadapter

我一直在阅读 MSDN 资源和几个论坛，但仍然不明白这两者`dataAdapter.Fill()`和之间有什么区别`dataAdapter.Update()`，我尝试使用它们从我的程序更新数据库并且它可以工作，但是当我尝试删除该`update()`功能，它仍然可以正常工作，因此我认为它没用。

谁能澄清一下？

编辑：这是我要删除的代码：

```
string connString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\\Users\\Public\\Documents\\inventorySystem\\branches\\Database\\inventorySystemDatabase.accdb";
string query = "DELETE FROM Product WHERE product_id=" + productDataGridView[1, e.RowIndex].Value.ToString();
OleDbDataAdapter dAdapter = new OleDbDataAdapter(query, connString);
OleDbCommandBuilder deleteBuilder = new OleDbCommandBuilder(dAdapter);
DataTable deleteTable = new DataTable();
dAdapter.Update(deleteTable); 
```

-- 我必须做一个额外的选择命令来更新 datagridview --

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-13T16:31:52.633

工作样本

```
using System;
using System.Data;
using System.Windows.Forms;
using System.Data.OleDb;

namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        private OleDbConnection con =
            new OleDbConnection("Provider=Microsoft.Jet.OLEDB.4.0;Data Source=\"C:\\test.mdb\";");

        private OleDbDataAdapter adapter;
        DataTable table = new DataTable("person"); 

        public Form1()
        {
            InitializeComponent();

        }

        private void Form1_Load(object sender, EventArgs e)
        {
            con.Open();
            ;
            adapter = new OleDbDataAdapter("select ID, p_name, p_age from person", con);
            adapter.Fill(table);
            OleDbCommandBuilder builder = new OleDbCommandBuilder(adapter);
            adapter.DeleteCommand = builder.GetDeleteCommand();
            adapter.UpdateCommand = builder.GetUpdateCommand();
            adapter.InsertCommand = builder.GetInsertCommand();
            dataGridView1.DataSource = table;

        }

        private void Form1_FormClosing(object sender, FormClosingEventArgs e)
        {
            con.Close();
            con.Dispose();
        }

        private void btnDelete_Click(object sender, EventArgs e)
        {
            DataRow[] row = table.Select("p_age = 10");
            if (row.Length > 0)
            {
                for (int i = 0; i < row.Length; i++)
                {
                    row[i].Delete();
                }
            }
            adapter.Update(table);
        }

    }
} 
```

简单来说。

[DataAdapter.Fill()](http://msdn.microsoft.com/en-us/library/377a8x4t.aspx)用于从数据库加载数据

示例：将数据从数据库显示到 gridview

```
using (DataTable table = new DataTable()) {

    using (OleDbDataAdapter adapter = new OleDbDataAdapter("select name,age from person", conObject)) {

        adapter.Fill(table);
        BindingSource bs = new BindingSource { DataSource = table };
        dgReader.DataSource = bs;    
    }

} 
```

完成编辑后，[DataAdapter.Update()](http://msdn.microsoft.com/en-us/library/system.data.common.dataadapter.update.aspx)使用底层连接将所有更改的数据信息提交到数据库。

**[数据适配器.Fill()](http://msdn.microsoft.com/en-us/library/377a8x4t.aspx)**

> Fill 方法使用关联的 SelectCommand 属性指定的 SELECT 语句从数据源中检索行。与 SELECT 语句关联的连接对象必须有效，但不需要打开。如果在调用 Fill 之前关闭连接，则打开它以检索数据，然后关闭。如果在调用 Fill 之前连接已打开，则它保持打开状态。
> 
> Fill 操作然后将行添加到 DataSet 中的目标 DataTable 对象，如果 DataTable 对象不存在，则创建它们。创建 DataTable 对象时，Fill 操作通常只创建列名元数据。但是，如果 MissingSchemaAction 属性设置为 AddWithKey，还会创建相应的主键和约束。

**[DataAdapter.Update()](http://msdn.microsoft.com/en-us/library/system.data.common.dataadapter.update.aspx)**

> 更新是逐行执行的。对于每个插入、修改和删除的行，Update 方法确定对其执行的更改类型（插入、更新或删除）。根据更改的类型，执行插入、更新或删除命令模板以将修改的行传播到数据源。当应用程序调用 Update 方法时，DataAdapter 会检查 RowState 属性，并根据 DataSet 中配置的索引的顺序为每一行迭代地执行所需的 INSERT、UPDATE 或 DELETE 语句。例如，由于 DataTable 中行的顺序，Update 可能会执行一个 DELETE 语句，然后是一个 INSERT 语句，然后是另一个 DELETE 语句。
> 
> 需要注意的是，这些语句不是作为批处理执行的；每行单独更新。在您必须控制语句类型顺序的情况下（例如，INSERT before UPDATE），应用程序可以调用 GetChanges 方法。有关详细信息，请参阅使用 DataAdapters (ADO.NET) 更新数据源。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-13T16:35:25.703

简称定义。

`DataAdapter.Fill()`代表从服务器到数据库的*SELECT*查询语句。

```
// 1
// Open connection
using (SqlConnection c = new SqlConnection(
        Properties.Settings.Default.DataConnectionString))
{
   c.Open();
   // 2
   // Create new DataAdapter
   using (SqlDataAdapter a = new SqlDataAdapter("SELECT * FROM EmployeeIDs", c))
     {
      // 3
      // Use DataAdapter to fill DataTable
         DataTable t = new DataTable();
         a.Fill(t);

         // 4
         // Render data onto the screen
         // dataGridView1.DataSource = t; // <-- From your designer
    }
  } 
```

`DataAdapter.Update()`代表从服务器到数据库的*更新*、*插入*和*删除*查询语句。

```
public DataSet CreateCmdsAndUpdate(DataSet myDataSet,string myConnection,string mySelectQuery,string myTableName) 
{
    OleDbConnection myConn = new OleDbConnection(myConnection);
    OleDbDataAdapter myDataAdapter = new OleDbDataAdapter();
    myDataAdapter.SelectCommand = new OleDbCommand(mySelectQuery, myConn);
    OleDbCommandBuilder custCB = new OleDbCommandBuilder(myDataAdapter);

    myConn.Open();

    DataSet custDS = new DataSet();
    myDataAdapter.Fill(custDS);

    //code to modify data in dataset here

    //Without the OleDbCommandBuilder this line would fail
    myDataAdapter.Update(custDS);

    myConn.Close();

    return custDS;
 } 
```

参考：
[C# SqlDataAdapter](http://www.dotnetperls.com/sqldataadapter)
[DataAdapter.Update 方法](http://msdn.microsoft.com/en-us/library/system.data.common.dataadapter.update%28v=vs.71%29.aspx)

# r - heatmap.2 (gplots package) - 如何去除某些单元格中恼人的线条？

> ID：14305448
> 
> 赞同：1
> 
> 时间：2013-01-13T16:25:04.180
> 
> 标签：r, heatmap, bioconductor

我正在尝试生成一个简单的热图，其中每一行和每一列都由一条黑线分隔。但是，由于某种原因，这只发生在第一个和最后一个颜色上。我的命令中的中间颜色`colorpanel()` 有一条额外的水平和垂直线，我想在使用`heatmap.2()`. 关于我为什么看到这些行的任何建议？

```
library(gplots)

my.matrix <- cbind(func.1 = c(1,2,2,1,1,3,1,2,3,1,1,2,2,3,1), func.2 =
c(2,2,1,1,3,3,1,1,2,2,1,3,3,2,1))

mycol <- colorpanel(n=3,"green","grey","red")

heatmap.2(my.matrix,Rowv=FALSE, Colv="Rowv", col=mycol, trace="both",
tracecol="black", key=FALSE, symm=FALSE, vline=NULL, hline=NULL) 
```

链接到我得到的情节：[https ://dl.dropbox.com/u/8900971/heatmap.png](https://dl.dropbox.com/u/8900971/heatmap.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T20:21:01.010

可能有一种方法可以做你想做的事，但是当我读到你的最后一条评论时，我想到了 ggplot2。你没有说它必须是一个`heatmap.2`解决方案，所以这里有一个 ggplot2 。虽然我假设 gplots 版本很有趣：

```
library(reshape2, ggplot2)
dat <- melt(my.matrix)

ggplot(dat, aes(x=Var2,y=Var1))+ 
    geom_tile(aes(fill = value),colour='black') +
    scale_fill_gradientn(colours=c("green","gray","red"),
    values  = rescale(c(min(dat$value), 1000, max(dat$value)))) +
    coord_equal() 
```

# css - CSS to png 生成器

> ID：14305450
> 
> 赞同：5
> 
> 时间：2013-01-13T16:25:16.453
> 
> 标签：css, png

我喜欢人们正在做的所有粗糙的 CSS3 背景的事情。但我想做的是：

1：使用CSS3设计一个很酷的背景。
2：将其导出为png/gif，以便您可以在所有浏览器中使用它。
3：设置一个很酷的脚本，为旧浏览器自动将 CSS3 转换为 pngs。

好的，所以我一直在研究这个，似乎有很多工具可以将 png 转换为 CSS3，但没有一个可以反过来。基本上，我正在寻找与此相反的逻辑：

[http://www.stubbornella.org/content/2011/04/25/css-3-gradients/](http://www.stubbornella.org/content/2011/04/25/css-3-gradients/)

有人有建议吗？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-13T17:03:17.827

您可以使用 PhantomJS：[https ://github.com/ariya/phantomjs/wiki/Screen-Capture](https://github.com/ariya/phantomjs/wiki/Screen-Capture)

```
phantomjs rasterize.js gradient.html gradient.png 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T16:44:31.177

不是真正的生成器，但你可以这样做：

1.  下载并安装最新的 Firefox
2.  安装名为 Abduction 的 Firefox 插件 - [https://addons.mozilla.org/en-US/firefox/addon/abduction/?src=api](https://addons.mozilla.org/en-US/firefox/addon/abduction/?src=api)
3.  使用 CSS3 设计背景
4.  在 Firefox 中加载该背景
5.  右键单击您的页面，选择“将页面另存为图像”
6.  将图像保存为 PNG

# gdb - 在 std::cerr 上打印某些内容时设置 gdb 断点

> ID：14305461
> 
> 赞同：2
> 
> 时间：2013-01-13T16:25:57.017
> 
> 标签：gdb, qt-creator, stderr

我使用 qt-creator 作为 gdb 的 IDE 和前端。如何在 std::cerr 变量上调用 operator<< 时设置断点？是否可以从 qt-creator 或我必须独立运行 gdb？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T16:49:22.740

> 如何在 std::cerr 设置断点

你的问题没有意义：`std::cerr`是一个全局*变量*。您只能在函数上设置断点。您还可以在变量上设置观察点，因此 GDB 会在变量被修改时停止，但这也可能不是您想要的。

您*可能*`STDERR_FILENO`要问的是：“当某些内容写入文件描述符时，我该如何停止？”。

如果是这种情况，`catch syscall write`可能就是答案（但真正的答案取决于您的操作系统，您没有透露）。

**更新：**

> 我相信捕获系统调用写入不是一个选项，因为我经常写入文件

您可以使系统调用捕获点以写入为条件`STDERR_FILENO`（在 Linux 上为 2）。示例（这将适用于 Linux/x86_64，但需要针对 Linux/ix86 进行调整）：

```
cat t.cc
#include <iostream>
using namespace std;

int main()
{
   cout << "Hello,";
   cerr << "error 1" << endl;
   cout << " World!" << endl;
   cerr << "error 2" << endl;
}

gcc -g t.cc
gdb -q ./a.out
Reading symbols from /tmp/a.out...done.

(gdb) catch syscall write
Catchpoint 2 (syscall 'write' [1])

# Make the catchpoint conditional on writing to stderr:
(gdb) cond 2 $rdi == 2

# By default, "catch syscall" will stop both before and after the actual syscall
# Ignoring the catchpoint once will skip past the "after" stop.
(gdb) command 2 
Type commands for breakpoint(s) 2, one per line.
End with a line saying just "end".
>ignore 2 1
>end

(gdb) r
Starting program: /tmp/a.out 
Hello,
Catchpoint 2 (call to syscall write), 0x00007ffff7383ff0 in __write_nocancel () at ../sysdeps/unix/syscall-template.S:82
82  ../sysdeps/unix/syscall-template.S: No such file or directory.
(gdb) x/s $rsi
0x400a83:   "error 1"    # Good: we caught our first write to std::cerr

(gdb) c
Continuing.
error 1
Catchpoint 2 (call to syscall write), 0x00007ffff7383ff0 in __write_nocancel () at ../sysdeps/unix/syscall-template.S:82
82  in ../sysdeps/unix/syscall-template.S
(gdb) x/s $rsi
0x7ffff76298e3 <_IO_2_1_stderr_+131>:   "\n"  # I didn't know endl gets a separate write syscall.
(gdb) c
Continuing.

 World!

Catchpoint 2 (call to syscall write), 0x00007ffff7383ff0 in __write_nocancel () at ../sysdeps/unix/syscall-template.S:82
82  in ../sysdeps/unix/syscall-template.S
(gdb) x/s $rsi
0x400a93:   "error 2"
(gdb) c
Continuing.
error 2
Catchpoint 2 (call to syscall write), 0x00007ffff7383ff0 in __write_nocancel () at ../sysdeps/unix/syscall-template.S:82
82  in ../sysdeps/unix/syscall-template.S
(gdb) x/s $rsi
0x7ffff76298e3 <_IO_2_1_stderr_+131>:   "\n"
(gdb) c
Continuing.

[Inferior 1 (process 17291) exited normally] 
```

# c++ - 使用 C++ 静态类成员来控制所有类实例的“模式”

> ID：14305467
> 
> 赞同：0
> 
> 时间：2013-01-13T16:26:45.087
> 
> 标签：c++, class, constructor, static-members

这是一个简单的问题，但我想就如何解决它提出建议。我有一个`Policy`带构造函数的类`Policy::Policy(const int& mode)`。

根据 的值`mode`，`Policy`对象可以具有不同的行为和特征。例如，假设有 3 种可能的运行我的程序的模式，分别对应于`mode=1`、`mode=2`和`mode=3`。现在，任何时候都不会有`Policy`具有不同模式值的对象。

所以，对我来说，有一个变量是有道理的，`static int Policy::MODE`这样所有的`Policy`对象都知道它们应该在什么模式下运行。创建的第一个`Policy`对象将在其构造函数中设置此静态类变量的值。`Policy`然后，如果尝试使用**不同**的值创建任何其他对象`mode`，则实例化将退出并出现错误（因为这不应该发生）。

关于如何解决这个问题的任何建议？

**[根据评论请求在下面添加了其他解释。]**

该计划旨在优化疾病筛查政策。每个`Policy`对象代表一个筛选策略，并具有许多必要的功能，以便跟踪反映在人群中实施该策略的影响的统计数据。在优化的说法中，每个筛选策略都是决策变量的向量，并且通过使用疾病的自然历史模型模拟策略来估计目标函数。

该`Policy`对象需要能够无缝地适应多个复杂的优化框架。它不仅需要能够表示疾病筛查策略，还需要能够表示任意数量的标准测试问题，这些问题可用于测试优化算法是否运行良好。基于类的`MODE`值而改变的特征/特征`Policy`如下：（1）用于评估策略的模拟模型，（2）构造函数中的代码，用于设置诸如决策变量向量的长度之类的东西，以及 (3) 用于显示有关给定策略及其估计性能的信息的代码。

对于任何特定的模拟模型（即目标函数），都有多个“策略表达式”（即决策变量的向量）可以解码为模拟模型所需的策略表达式。因此，每个“模式”都代表了一种表达筛选策略的方式与特定模拟模型的配对，以评估该策略。

撇开很多不相关的东西，如果只有 2 种不同的运行模式，这将是类的结构：

```
class Policy {
public:

    vector<double> x; // encoded representation of a policy (decision variables)

    explicit Policy(const int& mode) {

        // set Policy::MODE if not already set (code not shown)

        switch(MODE) {
        case 1:
            // code...
            break;
        case 2:
            // code...
            break;
        }
    }

    void simulate() {

        switch(MODE) {
        case 1:
            // code...
            break;
        case 2:
            // code...
            break;
        }
    }

    void displayInfo() {

        switch(MODE) {
        case 1:
            // code...
            break;
        case 2:
            // code...
            break;
        }
    }

private:
    static int MODE;
}; 
```

在高层次上，您可以说每个众数值代表解决方案与估计器的配对。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T16:31:57.970

您是否要求这样的事情：

```
static int Policy::MODE=-1;
Policy::Policy(const int& mode) {
  if (MODE==-1) {
    MODE=mode;
  }
  else {
    if (mode!=MODE) {
      cout <<"mode mismatch "<<...<<endl;
      exit (1); // or throw something, set some flags, depending on your needs
    }
  }
} 
```

# c++ - cout hex 后引用的变量不同

> ID：14305469
> 
> 赞同：0
> 
> 时间：2013-01-13T16:26:54.327
> 
> 标签：c++

我不知道怎么问，但我尽力了；
简单地

```
int a = 19;
int& b=a;
cout<<b<<endl;    //Output : 19 
```

但现在输出在 cout 与 hex 之后有所不同

```
int a = 19;
int& b=a;
cout<<hex<<&a<<endl;     //0031F788
cout<<b<<endl;        //Output : 13 
```

那么为什么最后一个输出是 13 呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T16:30:17.547

因为`19`is `0x13`，并且您告诉流以十六进制输出数字。

`hex`是“粘性的”，这意味着它在流对象上保持有效，直到你另有说明，所以`dec`当你完成它时你应该流式传输：

```
#include <iostream>
using namespace std;

int main()
{
   int  a = 19;
   int& b = a;

   cout << hex << &a << dec << endl;
   cout << b << endl;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-13T16:30:10.153

因为流基数设置为十六进制，并且永远不会回到十进制。

```
cout<<hex<<&a<<dec<<endl; // back to dec immediately, as it's done usually. 
```

# java - 如何在Java中用字符数组复制替换现有字符串

> ID：14305471
> 
> 赞同：0
> 
> 时间：2013-01-13T16:27:11.337
> 
> 标签：java

我有一个已经初始化的字符串。现在我想用字符数组替换内容。我想知道是否执行以下操作：

```
stringObj = new String(charArr); 
```

好吗？

这会导致任何内存泄漏吗？

抱歉，如果这个问题已经回答了，我根本找不到答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T16:29:11.590

当然，没关系。该引用引用了一个新字符串。旧的有资格获得 GC。

实习生和烫发空间有一些注意事项，但没有内存泄漏。这就是 Java 的工作原理。

您的代码不会受到这种构造的损害。注意最佳实践固然很好，但没有数据的过早优化是一场失败的游戏。尽你所能编写你的应用程序，如果性能不可接受，则对其进行分析，并修复对你的性能问题影响最大的问题。不要试图想象你知道问题出在哪里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T16:30:33.043

不用担心。垃圾收集器正在处理它！-> [http://javarevisited.blogspot.co.at/2011/04/garbage-collection-in-java.html](http://javarevisited.blogspot.co.at/2011/04/garbage-collection-in-java.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T16:35:31.427

由于字符串是不可变的，最终你会得到新的对象，它不会被以前的对象替换。对于这个例子，不会有内存泄漏，因为这只是一个字符串，但是如果你的应用程序是基于大量的字符串操作，这样做会有内存泄漏。您应该使用 StringBuffer 或 String Builder。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-13T16:38:19.653

重要的是要了解您只更改了对字符串的一个引用。如果您有任何其他引用，它们仍然指向旧的 String 对象。这既会阻止垃圾收集，又会导致继续使用旧值。

特别是，如果您在作为参数传递 stringObj 的方法中执行此操作，则调用者的引用不受分配的影响。

换句话说 stringObj**不是**一个对象。它是一个指向对象的指针。您正在更改那个指针，使其指向一个新对象。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-13T16:59:07.903

```
String stringobj = "This is fine";

stringobj = new String(charArray); 
```

实际上，现在 stringobj 将包含包含新字符数组的内存位置的引用，并且之前的位置将由垃圾收集器处理。

# php - Magento 迁移中断 - 子页面返回 404

> ID：14305473
> 
> 赞同：0
> 
> 时间：2013-01-13T16:27:21.520
> 
> 标签：php, mysql, .htaccess, magento, magento-1.7

最近收到一位客户的请求，要求将他们的 magento 站点从一台主机迁移到另一台主机。他们最近刚刚升级到 magento 1.7。我设法充实了所有数据库问题并将必要的索引重置为 0，因此主页现在可以正确显示并且我可以访问管理员。

但是，我遇到了一个令人不安的问题，即迁移站点上的所有子页面都返回 404。以供参考：

现场直播：

```
http://seacadetshipsstore.com/magento/uniform-items.html 
```

迁移站点：

```
http://173.239.43.221/~seacadet/magento/uniform-items.html 
```

有没有人遇到过这样的事情？两种环境的另一个区别是实时站点管理员位于 /magento/admin/，但迁移的站点位于 /magento/index.php/admin/.....所以我想知道它是否可能是.htaccess 问题？这对我来说都是比较新的，所以如果它是愚蠢的简单的话，请原谅我——只是不想浪费时间在我可以给专家因果报应时用石头敲打它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T16:45:07.417

基本上你需要检查你的主机设置

http://173\. 239 .43\. 221/~seacadet/magento/index.php/uniform-items.html

这个链接完美。没有 htaccess 问题。只需要在主机上的服务器上重写模块。

# c++ - 如何检查字符串的第一个字符是否为大写？

> ID：14305476
> 
> 赞同：-1
> 
> 时间：2013-01-13T16:27:36.297
> 
> 标签：c++, string, char, uppercase

我有一个将字符串作为参数的函数。我想要做的是检查字符串是否以大写字母开头。如果这是真的，那么我想返回真。如果它不是以大写字母开头，那么我希望返回 false。够简单吗？

我使用的代码是这样的：

```
bool filter(string word)
    {
        char cWord[50];
        char c;
        for(int i = 0; i <= word.size(); i++)
        {
            cWord[i] = word[i];
        }
        c = cWord[0];
        if(isupper(c)){return true;}
        else{return false;}
    } 
```

但是，我认为它的功能不像我想要的那样。谁能确认我的功能应该正常工作，或者是否有更好的方法来检查第一个字符是否为大写字母？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-13T16:30:48.300

这应该像这样简单：

```
bool firstUpper(const string& word) { return word.size() && std::isupper(word[0]); } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T16:31:13.883

在检查字符串不为空后，您可以简单地使用`std::isupper`from header 。`<cctype>`

```
bool filter(const std::string& word)
{
  return (!word.empty()) && std::isupper(word[0]);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T16:45:35.853

只要您的参数`word`少于 50 个字符，您的函数就可以工作。如果`word`更长，您将覆盖`cWord`并损坏您的堆栈。正如其他人已经表明的那样，不需要复制`word`来测试第一个字符。

# java - 扩展 FragmentActivity 使后退按钮指向最新的新 Activity

> ID：14305479
> 
> 赞同：0
> 
> 时间：2013-01-13T16:28:00.500
> 
> 标签：java, android, back-button, android-fragmentactivity

如果这已经被问及回答，对不起，但还没有找到。我是安卓新手。

在我的应用程序的基础上，我有一个扩展 Activity 的类。它包含三个按钮，其中两个指向同样扩展活动的新类。在这些情况下，物理后退按钮会返回三个按钮，这就是我想要的。在第三种情况下，按钮指向一个扩展 FragmentActivity 的类。在这里按下物理后退按钮会退出程序。该类似乎需要扩展 FragmentActivity 而不是活动，因为它有一个按钮数组，按下时会显示对话框，而且这些似乎需要包含在扩展 FragmentActivity 的类中！

我是否需要覆盖后退按钮，或者我是否缺少明显的东西？

这是显示对话框的调用：

```
 public void showInfoVeryLight(View view){
        VeryLightDialogFragment vldf = new VeryLightDialogFragment();
        vldf.show(getSupportFragmentManager(),"very light");
    } 
```

这是 VeryLightDialogFragment 类：

```
public class VeryLightDialogFragment extends DialogFragment {
    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
        builder.setMessage(R.string.dialog_message_veryLight)
               .setPositiveButton(R.string.ok, new DialogInterface.OnClickListener() {
                   public void onClick(DialogInterface dialog, int id) {
                   }
               });
        return builder.create();
    }
} 
```

谢谢你的帮助！：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T16:43:58.563

这真的很奇怪，但是我断断续续地解决了这个问题一个星期，一旦我发布了这个问题，我就进行了测试，问题就消失了！

现在，之前从应用程序中引出的违规类改为返回到三个按钮，但它扩展了 FragmentActivity。所以我想这会让我的问题无效——如果我弄清楚发生了什么事情，我会来发帖的。:) :P

# iphone - 使用 SQLITE3 和 Objective C 转换 DATETIME 的问题

> ID：14305482
> 
> 赞同：0
> 
> 时间：2013-01-13T16:28:09.847
> 
> 标签：iphone, datetime, sqlite, nsdate

我有一个带有 DATETIME 列的 sqlite3 数据库，其中包含格式如下的值：
`2013-01-09 04:00:00`

我试图弄清楚如何确定时间是上午还是下午？

以下是我使用 Objective-C 从我的 Sqlite3 DB 读取和转换 DATETIME 对象的方法：

```
NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
[dateFormat setDateFormat:@"yyyy-MM-dd hh:mm:ss"];
char *DateTimeColumn = (char *)sqlite3_column_text(statement, 13);
NSDate *myDate =[dateFormat dateFromString:[NSString stringWithUTF8String:DateTimeColumn]]; 
```

这非常有效，只是它无法确定这是凌晨 4:00 还是下午 4:00。

我看到一篇帖子建议`a`在格式化程序字符串的末尾添加一个，如下所示：
`"yyyy-MM-dd hh:mm:ss a"`
... 找出 AM/PM - 但这会导致崩溃。（我当然也像这样在我的 DATETIME 列中添加了`AM`和`PM`实际值：
`2013-01-09 04:00:00 AM`
但它仍然崩溃。

不确定我是否做错了什么 - 或者这是否无法完成。

是唯一的解决方案数据库本身的条目都采用 24 小时格式（意思是：下午 4:00 应输入为 16:00） - 然后使用`IF`语句从 > 12 的值中减去 12 以确定时间的上午或下午？
我原以为会有一些自动化功能……有什么想法吗？

==================================

编辑/更新：
将字符串转换为 NSDate 后，我突然得到一个“（null）”。这是代码的当前版本：

```
NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
[dateFormat setDateFormat:@"yyyy-MM-dd hh:mm:ss"];
char *DateTimeColumn = (char *)sqlite3_column_text(statement, 13);
NSString *DateTimeString = [NSString stringWithUTF8String:DateTimeColumn];
NSLog(@"DateTimeString = %@", DateTimeString);
   // This NSLog gives me a good string: "DateTimeString = 2013-01-09 16:00:00"
// But when I create an NSDate object from this string:
NSDate *myDate =[dateFormat dateFromString:DateTimeString];
// ... and log it out: 
NSLog(@"the REAL DATETIME object = %@", [myDate description]);
// the console shows: "the REAL DATETIME object = (null)"
// and when I add this NSDate object to my Array of NSDates, I crash:
[tempNSDateObjectsArray addObject:myDate];

Console shows: 
*** Terminating app due to uncaught exception 'NSInvalidArgumentException',     
reason: '*** -[__NSArrayM insertObject:atIndex:]: object cannot be nil'
*** First throw call stack: 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T16:55:48.267

`HH`, not `hh`, 用于 24 小时日期格式：

```
[dateFormat setDateFormat:@"yyyy-MM-dd HH:mm:ss"]; 
```

使用 as hour-format 解析“2013-01-09 16:00:00”`hh`失败，因此返回`nil`.

请注意`NSDateFormatter`，除非您设置了明确的时区，否则它将根据本地时区解释日期字符串。您可能希望将时区信息添加到字符串中，或​​使用不同的格式（例如 UNIX 时间，自 1.1.1970 以来的秒数）来存储日期。

* * *

**添加：** SQLite`datetime()`函数返回一个字符串“YYYY-MM-DD HH:MM:SS”，它是 UTC/GMT 中的日期和时间。要将这样的字符串转换为 a `NSDate`，请使用 a`NSDateFormatter`并将时区设置为 GMT：

```
NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
[dateFormat setDateFormat:@"yyyy-MM-dd HH:mm:ss"];
[dateFormat setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0]];

NSString *dateTimeString = @"2013-01-09 16:00:00";
NSLog(@"DateTimeString = %@", dateTimeString);

NSDate *myDate =[dateFormat dateFromString:dateTimeString];
NSLog(@"myDate:          %@", myDate); 
```

*输出：*

```
dateTimeString = 2013-01-09 16:00:00
myDate:        = 2013-01-09 16:00:00 +0000 
```

要向*用户显示日期*，请转换`NSDate`为`NSString`，使用`stringFromDate`，但不要设置时区（以便使用本地时区）：

```
NSDateFormatter *dateFormat2 = [[NSDateFormatter alloc] init];
[dateFormat2 setDateFormat:@"yyyy-MM-dd HH:mm:ss"];

NSString *localDateString = [dateFormat2 stringFromDate:myDate];
NSLog(@"localDateString: %@", localDateString); 
```

*输出：*

```
localDateString: 2013-01-09 17:00:00 
```

时间现在显示为`17:00:00`，因为我的本地时区是“GMT+01”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T16:52:40.093

24 小时格式是SQLite 日期字段中*唯一有效的格式。*

请注意，数据库中的字符串并不打算直接显示给用户；为用户的时区和格式偏好修改它们是应用程序的工作。

# notepad++ - 不显示 \r\n 的文本编辑器？

> ID：14305487
> 
> 赞同：0
> 
> 时间：2013-01-13T16:28:39.550
> 
> 标签：notepad++

notepad++ 中是否有可以放置实际换行符而不是 \r\n 的功能

*   与[这个](https://stackoverflow.com/questions/1446370/text-editor-which-shows-r-n)问题和解决方案相反

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T11:22:58.927

寻找

```
\\r\\n 
```

用。。。来代替

```
\r\n 
```

必须选中“扩展（\n、\r、\t、\0、\x...）”框

# php - mysql查询插入不适用于一个值，但适用于所有其他值

> ID：14305488
> 
> 赞同：-1
> 
> 时间：2013-01-13T16:28:52.987
> 
> 标签：php, mysql, actionscript-3, insert

我通过 php 脚本从 AS3 接收变量并插入到数据库中。正如您在地址栏中看到的那样，所有变量都被传递..（我想对公众隐藏但不知道如何）..然后我得到变量并插入到 db 表中。我想所有的桌子都设置好了。我也在捕捉 vars 以获得回声。所有 vars 都可以工作，但 "image_name" 并且它也没有转换为 echo 的 $tmp_name。关于这个的任何想法.. 这是浏览器中保存变量的行。

```
http://xx.xxx.xx.xxx/wordpress/?page_id=81imageName=WhitetailJackalope%2Epng&imageURL=http%3A%2F%2Flocalhost%2Fxxx%2Fxxx%2FserverImages%2FwhiteTailJackalopeEgg%2Epng&imageID=40 
```

这是PHP

```
<?php

$tmp_id=$_GET['imageID'];
$tmp_url=$_GET['imageURL'];
$tmp_name=$_GET['imageName'];

mysql_connect("localhost", "xxx", "xxx") or die(mysql_error()); 
    mysql_query ( "INSERT INTO wp_image_data (`image_id`, `image_url`, `user_name`, `image_name`, `stage`)
        VALUES ('$tmp_id' , '$tmp_url' , '$current_user->user_login' , '$tmp_name' , 1)"); 
    echo 'Testing: ' . $tmp_id . '<br/>'; //displays ok
    echo 'Image: ' . $tmp_name . '<br/>'; //does not display or insert to table
    echo 'Owner: ' . $current_user->user_login . '<br/>'; //displays ok

?> 
```

数据库中 image_name 的表是 VARCHAR(100) utf8_ganeral_ci

有任何想法吗 ？

我已经按照 PDO 格式的建议重组了 php，这似乎对我有好处。感谢您提供这些信息:) 这是重组后的代码。它工作正常，除了我需要弄清楚现在如何在 wordpress 中重组我的 url 的 image_name 。

```
try {

$conn = new PDO("mysql:host=$hostdb; dbname=$namedb", $userdb, $passdb);
$conn->exec("SET CHARACTER SET utf8");      

$sql = "INSERT INTO wp_image_data (image_id, image_url, user_name, image_name, stage)
    VALUES ('$tmp_id', '$tmp_url', '{$current_user->user_login}', '$tmp_name', '1')"; 
$q = $conn->exec($sql);   
$conn = null; 
}
catch(PDOException $e) {
  echo $e->getMessage();
}

    echo 'Testing: ' . $tmp_id . '<br/>';
    echo 'Image: ' . $tmp_name . '<br/>'; 
    echo 'Owner: ' . $current_user->user_login . '<br/>'; 
```

现在开始处理 url ... YAY 并且当我这样做的时候有没有办法在地址栏中隐藏传递的变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T16:32:29.560

您的 URL 需要重构以在 page_id 值之后包含一个 & 符号：

`http://xx.xxx.xx.xxx/wordpress/?page_id=81&imageName=WhitetailJackalope%2Epng&imageURL=http%3A%2F%2Flocalhost%2Fxxx%2Fxxx%2FserverImages%2FwhiteTailJackalopeEgg%2Epng&imageID=40`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T16:32:36.423

您应该设置您的查询并回显它以查看正在传递的内容。

```
$query = "INSERT INTO wp_image_data (`image_id`, `image_url`, `user_name`, `image_name`, `stage`)
        VALUES ('$tmp_id' , '$tmp_url' , '$current_user->user_login' , '$tmp_name' , 1)";

echo $query; 
```

我建议在周围使用大括号`$current_user->user_login`：

```
{$current_user->user_login} 
```

您需要立即停止使用`mysql_`函数。您的代码容易受到 SQL 注入的攻击。有关详细信息，请参阅我的评论。

# assembly - 大会美元符号减号

> ID：14305489
> 
> 赞同：1
> 
> 时间：2013-01-13T16:28:57.963
> 
> 标签：assembly, x86, x86-16, tasm

假设我有以下代码（它提供了一个错误：）`Expected scalar type`：

```
a db 10 dup(2)
b db $-3 
```

有什么办法可以在组装中做一些等效的事情吗？编辑：我将 TASM 用于 8086

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T16:57:59.200

哪个汇编程序？`dup`看起来像马斯麦。在 Nasm 中，`b db ($-$$) - 3`会这样做。您似乎不太可能将此值放在一个字节中。我会选择`dd`or in 64-bit code `dq`。

我认为您不会在 Nasm 手册的任何地方找到“标量”一词，但它的意思是“不是可重定位的值”。`$`与任何标签一样，是可重定位的，但两个标签之间的差异是“标量”值。

与 C 不同，我们没有“汇编语言标准委员会”。汇编程序作者可以自由使用他们喜欢的任何语法 - 他们确实这样做了！在 AT&T 语法中（这不是）`$`具有完全不同的含义。可能不适用于 Masm，但值得一试。您确实需要指定哪个汇编程序！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-07T18:57:13.140

它不是标量类型，因为**db**变量保存**一个**字节，($-3) 表示当前偏移量减去 3（偏移量在 16 位模式下是一个字（**2**字节）**或**在32 位模式）

# android - 使用 ViewPager 时未显示 webview 内容

> ID：14305493
> 
> 赞同：0
> 
> 时间：2013-01-13T16:29:20.187
> 
> 标签：android, android-fragments, android-webview

我有一个 Fragment，ViewPager，它有一个 FragmentPagerAdapter 和一个
在 Fragment 内的 WebView。这个想法是使用 ViewPager 在内部具有 webview 的片段之间滑动，实际上我使用相同的片段，但更改了适配器中 webview 的 url。所以在 FragmentPagerAdapter 我有这个代码

```
MyFragment frag1 = new MyFragment();
            if(position==0)
            {
                frag1.setUrl("www.google.com");

            }
            else
            {
                frag1.setUrl("www.yahoo.com");
            } 
```

我在 MyFragment 的 onCreateView 中加载 url

```
public View onCreateView(final LayoutInflater inflater,
            final ViewGroup container, final Bundle savedInstanceState) {

        View view = (ViewGroup) inflater.inflate(R.layout.web_vew_fragment,
                container, false);
webview.loadUrl(url);
        return view;
    } 
```

未加载 webView 内容。所以我有一个 webview 说：网页不可用 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T10:46:33.043

这不是有效的 URL **“www.google.com”**，因此请尝试以下操作：-

```
 frag1.setUrl("http://www.google.com"); 
```

# c# - QuickGraph - 我怎样才能让 A* 跳过特定的边缘？

> ID：14305495
> 
> 赞同：5
> 
> 时间：2013-01-13T16:29:37.690
> 
> 标签：c#, graph, path-finding, quickgraph

我进行了一个寻路库。QuickGraph，开放式图形库，符合我的所有要求，但我遇到了一个问题。我需要最短路径算法来跳过当前移动代理无法通过的边缘。我想要的是这样的：

```
Func<SEquatableEdge<VectorD3>, double> cityDistances = delegate(SEquatableEdge<VectorD3> edge)
{

    if(edge.IsPassableBy(agent))
        return edgeWeight; // Edge is passable, return its weight
    else
        return -1; // Edge is impassable, return -1, which means, that path finder should skip it

};

Func<VectorD3, double> heuristic = ...;

TryFunc<VectorD3, IEnumerable<SEquatableEdge<VectorD3>>> tryGetPath = graph2.ShortestPathsAStar(cityDistances, heuristic, sourceCity); 
```

我可以想象通过创建图形副本并删除无法通过的边来解决这个问题，但这对计算机资源来说是不必要的浪费。有人可以提示我如何解决这个问题吗？还是没有解决方案，我应该更新源？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-20T19:52:02.797

鉴于您的权重是`double`类型，您应该能够使用无法通过`double.PositiveInfinity`的边缘的权重。

正如 Eric Lippert 所说，高权重的失败案例是一条完整的路径，但是任何加法或减法`double.PositiveInfinity`都应该是无限的。该`double`类型有一个`IsPositiveInfinity`测试方法。

因此，尝试将不可通过权重设置为无穷大并测试最终路径长度。

# arrays - 切片 IOArray（或一般的 MArray）

> ID：14305496
> 
> 赞同：5
> 
> 时间：2013-01-13T16:29:37.960
> 
> 标签：arrays, haskell, slice, marray

[`IOArray`](http://hackage.haskell.org/packages/archive/array/latest/doc/html/Data-Array-IO.html#t%3aIOArray)有没有一种方法可以有效地从或一般情况下构造切片（子数组视图）[`MArray`](http://hackage.haskell.org/packages/archive/array/latest/doc/html/Data-Array-MArray.html#t%3aMArray)？也就是说，取同一个数组，只是限制边界。签名可以是

```
(MArray a e m, Ix i) => a i e -> i -> i -> m (a i e) 
```

例如，获取一个有边界的数组`(1,1000)`并创建一个视图，该视图只允许访问具有`(500,700)`原始数组边界的元素。我搜索了文档，但找不到任何此类功能。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T19:13:45.597

考虑到数组类型是如何实现的，这并不是数组真正的特性，这可能就是为什么这些方面已经不存在的原因。

回想一下，数组是一个连续的内存块，因此在某种程度上，每个包含`n`元素的数组都有 bounds `(0, n-1)`。然而，想要从零开始的整数以外的索引是很常见的，以至于 Haskell 提供[了一个类型类](http://hackage.haskell.org/packages/archive/base/4.5.0.0/doc/html/Data-Ix.html)来定义任意边界并将这些边界内的元素转换为实际内存块的基于 0 的整数索引。

这会给您想要做的事情带来一些困难，因为假设数组的边界覆盖了它的整个范围。因此，如果您要简单地创建使用相同内存块但边界不同的现有数组的副本，则索引不会对齐 - 在您的示例中，子数组中的索引 500 将与原始数组中的索引 1 相同大批。没有帮助。

这里最简单的方法是定义您自己的数组类型，该数组类型包装现有数组并存储转换索引所需的任何额外信息，以便它将自己的边界报告为较小的范围，但根据全系列。然后，您可以在任何地方使用包装的数组类型（并为其提供所有预期的实例等），只需使用与“真实”数组相同的边界即可。您可以在此处对索引执行所需的任何转换，因此这种方法应该推广到也没有线性顺序的索引类型（例如，由元组索引的“多维”数组）。

您可能还可以做一些涉及围绕索引类型的包装器的事情，并为包装器版本提供一个奇怪的`Ix`实例，以某种方式自动翻译事物，这将让您使用现有的数组类型。不过，要正确工作可能会更棘手。

我认为没有任何方法可以在不更改数组或索引类型的情况下做到这一点。

# ruby - Ruby：一个编码数据到另一个编码多行的csv？

> ID：14305497
> 
> 赞同：1
> 
> 时间：2013-01-13T16:29:38.770
> 
> 标签：ruby, csv, encoding

如何输出和转换编码？

输入：UTF-8 上的数据对象

输出：CP932 上的 CSV（不是特定的 cp932，关键是数据在“to encoding”中包含未定义的字符串）

```
# coding: utf-8
# input values with utf-8
# output csv with cp932
require 'csv'
headers = %w|sa sa ta tsu|
bodys = []
bodys << ["ka", "ra", "揚げ", "\u00A0"] # \u00a0 is valid in UTF-8, is undef in cp932
bodys << [1000, "1", nil, "\u00A0"]

path_to_file = './file.csv'
CSV.open(path_to_file, 'w:cp932') do |csv|
  csv << headers
  bodys.each do |values|
    csv << values
  end
end 
```

# 临时解决方案

```
CSV.open(path_to_file, 'w:cp932') do |csv|
  csv << headers
  bodys.each do |values|
    csv << values.map {|v| v.instance_of?(String) ?
                       v.encode('cp932', 'utf-8', invalid: :replace, undef: :replace, replace: ' ') :
                       v }
  end
end 
```

**结尾**

```
$ ruby -v
ruby 1.9.3p327 (2012-11-10 revision 37606) [x86_64-darwin11.4.2]
Encoding::UndefinedConversionError: U+00A0 from UTF-8 to Windows-31J
from /Users/sane/.rbenv/versions/1.9.3-p327/lib/ruby/1.9.1/csv.rb:1736:in `write'
$ ruby -v
ruby 2.0.0dev (2013-01-07 trunk 38733) [x86_64-darwin11.4.2]
Encoding::UndefinedConversionError: U+00A0 from UTF-8 to Windows-31J
from /Users/sane/.rbenv/versions/2.0.0-rc1/lib/ruby/2.0.0/csv.rb:1788:in `write' 
```

# javascript - 插入功能不起作用

> ID：14305500
> 
> 赞同：0
> 
> 时间：2013-01-13T16:29:40.527
> 
> 标签：javascript, sqlite

我正在使用 Phonegap 在我的项目中实现 Sqlite db。我知道问题与我的插入语句有关，因为当我将数据库成功指向我的查询并最终指向我的 querysuccess 函数时，我收到查询成功并且添加的行数为 0 的警报。我尝试过并尝试过这是各种不同的方法，但无济于事。（如果有明显的错误，那是因为我在自学。）

```
 function insertRecord(dbtx, userName, imagePath){
db = window.openDatabase("database", "1.0", "Profiles", 5000);
userName=document.getElementById('userName').value;
imagePath;
var insertRec="INSERT INTO USERS (username, imagePath) values ("+userName+", "+imagePath+")";
    db.transaction(function(dbtx){dbtx.executeSql(insertRec, [], queryDB, insFail);
    });
    }
function insFail(){
    alert('The insert is still failing');
}
   ....
   function successCB() {
    db = window.openDatabase("Database", "1.0", "Profiles", 5000);
    db.transaction(insertRecord, errorCB);// IF I PUT THE QUERYDB HERE INSTEAD OF INSERTRECORD IT WORKS BUT OBVIOUSLY THE RETURN IS ALWAYS 0
    console.log('The db and table are working'); 
```

这是我要插入的按钮

```
 <input id="saveProfile" type="button" value="Save" onClick="insertRecord(dbtx, userName, imagePath);"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T17:03:05.470

通过使用参数化查询，您可以避免此类错误和可能的[sql 注入](http://xkcd.com/327/)

```
var insertRec="INSERT INTO USERS (username, imagePath) values (?, ?)";

db.transaction(function(dbtx){
    dbtx.executeSql(insertRec, [userName, imagePath], queryDB, insFail);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T16:51:30.973

您需要像这样添加撇号：

```
var insertRec="INSERT INTO USERS (username, imagePath) 
               values ('"+userName+"', '"+imagePath+"')"; 
```

并防止多个空白插入简单地将您的插入语句包装在：

```
if(userName != '' && imagePath != ''){
    // Your code
} 
```

# jquery - jquery兄弟在悬停时淡出其他div的问题

> ID：14305501
> 
> 赞同：0
> 
> 时间：2013-01-13T16:29:43.353
> 
> 标签：jquery, fade, siblings

我在这里找到了我想要完成的工作的 JSfiddle：http: [//jsfiddle.net/gdoron/YwKVt/3/](http://jsfiddle.net/gdoron/YwKVt/3/)

我有一个 foreach 循环：

```
<div class="box-product">
  <?php
  $counter = 0;
  ?>
   <?php foreach ($products as $product) { ?>
    <?php $counter++; ?>
    <div class="feature prod-<?php echo $counter ?>">
    <?php if ($product['thumb']) { ?>
    <div class="image"><a href="<?php echo $product['href']; ?>"><img src="<?php echo    $product['thumb']; ?>" alt="<?php echo $product['name']; ?>" /></a></div>
    <?php } ?>
    <div class="name"><a href="<?php echo $product['href']; ?>"><?php echo $product['name']; ?></a></div>
    <?php if ($product['price']) { ?>
    <div class="price">
      <?php if (!$product['special']) { ?>
      <?php echo $product['price']; ?>
      <?php } else { ?>
      <span class="price-old"><?php echo $product['price']; ?></span> <span class="price-new"><?php echo $product['special']; ?></span>
      <?php } ?>
    </div>
    <?php } ?>
    <?php if ($product['rating']) { ?>
    <div class="rating"><img src="catalog/view/theme/default/image/stars-<?php echo $product['rating']; ?>.png" alt="<?php echo $product['reviews']; ?>" /></div>
    <?php } ?> 
```

```
 <div class="cart"><input type="button" value="<?php echo $button_cart; ?>" onclick="addToCart('<?php echo $product['product_id']; ?>');" class="button" /></div>
  </div>
  <?php } ?>
   </div> 
```

输出是这样的：

```
 <div class="box-product">
   <div class="feature prod-1">
   <div class="feature prod-2">
   <div class="feature prod-3">
   <div class="feature prod-4">
 </div> 
```

我试图通过添加到我的标题来实现该 js fiddle 的解决方案：

```
<script type="text/javascript">
$('.feature').hover(function(){
$(this).siblings().addClass('fade');
}, function(){
$(this).siblings().removeClass('fade');
});
</script> 
```

并添加了课程：

```
.fade{opacity:.5;} 
```

没有运气。有没有更好的方法来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T16:36:45.310

我不确定，但您会在 DOM 准备好之前尝试执行它吗？

[http://api.jquery.com/ready/](http://api.jquery.com/ready/)
[http://api.jquery.com/load-event/](http://api.jquery.com/load-event/)

这两个是页面加载时触发的事件。在页面完全加载之前，您正在使用的代码将无法工作。

另外，您的 html 标记中存在错误，`<div>`需要使用正确关闭`</div>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T17:22:49.477

刚刚添加，效果很好：

```
<script type="text/javascript">
 jQuery(document).ready(function($) {
  $('.feature').hover(function(){
  $(this).siblings().addClass('fade');
  }, function(){
  $(this).siblings().removeClass('fade');
  });
   });
 </script> 
```

# java - 数据、网络、瘦客户端和 MMORPG

> ID：14305506
> 
> 赞同：1
> 
> 时间：2013-01-13T16:30:16.007
> 
> 标签：java, networking, applet, network-programming, mmo

我正在创建一个 2D MMORPG 游戏（以小程序形式），我有一个简单的问题。

我知道，出于安全目的，作为一种通用的反黑客技术，客户端应该包含尽可能少的逻辑数据（因此它不能被操纵和利用）。

**我的问题是这样的**：假设我将数据从服务器发送到客户端（人们认为这种情况经常发生）。在接收到数据包的客户端代码中，我将所述数据包解析为其“块”，并将该数据逻辑地存储在其准确的对应变量中。假设其中一个变量存储了玩家的健康状况。这是否意味着这个变量实际上不能用于计算——因为它是一个逻辑数据块（因此可以操作，因为它存储在客户端上），唯一的选择是读取包含如果我需要健康金额，与健康相关的信息？

感谢您花时间阅读我的问题。-布莱恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T16:40:24.290

我会说这取决于您将其用于哪些计算。对于不重要的事情，比如 UI 显示，您可以安全地使用局部变量。如果您使用它来确定玩家是否死亡，那么您需要让服务器做出该确定。在高延迟情况下，您可以暂时使用局部变量，直到服务器能够更新客户端；但客户端的版本不应该*是*规范版本。

详细说明：使用唯一受影响的人是玩家的局部变量，因此他们是否操纵自己的数据并不重要。在所有其他情况下依赖服务器变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T17:58:59.947

我这样做的方式是让服务器根据在客户端上执行的操作执行它自己的计算。客户端可以执行相同的操作来为客户端提供更快的更新，但服务器应该是所发生情况的可信确定者。这意味着您不需要在客户端和服务器之间进行太多交互来仔细检查发生的所有事情。

# twitter-bootstrap - 扩展 Bootstrap 流体网格中的中间列

> ID：14305507
> 
> 赞同：0
> 
> 时间：2013-01-13T16:30:16.613
> 
> 标签：twitter-bootstrap

我正在尝试在这里实现类似寻呼机的东西：

![在此处输入图像描述](../Images/8e59930458ba616d16aa0fa87b378e59.png)

这是我的标记：

```
<div id="tour-marker-icon-container" class="pagination-centered row-fluid">

    <div class="span1">
        <button class="btn"><i class="icon-arrow-left"></i></button>
    </div>

    <div class="span6" id="current-marker-icon-page" data-page-id="1">
        @foreach (var markerIcon in Model)
        {
            <img src="@Url.Content(markerIcon.Path)" data-id="@markerIcon.Id" class="marker-icon"/>
        }
    </div>

    <div class="span1">
        <button class="btn"><i class="icon-arrow-right"></i></button>
    </div>
</div> 
```

如何指定要扩展的中间列并仍然保持响应？它应该如下所示：

![在此处输入图像描述](../Images/b602909d0ac8f7a008a5bd51f52e7719.png)

**更新 ：**

span10 现在似乎可以工作，但我正确的 div 不在其父级中。为什么会这样？

![在此处输入图像描述](../Images/656a349a84b35716dcd4fceced2e857a.png)

另外我想知道当我调整窗口大小时是否有办法让按钮保持在侧面。这是目前的情况。

![在此处输入图像描述](../Images/b454504729d97016ad3598d9ea90f2b7.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T16:35:44.017

假设您要占用整行...尝试更改：

```
<div class="span6" id="current-marker-icon-page" data-page-id="1"> 
```

到

```
<div class="span10" id="current-marker-icon-page" data-page-id="1"> 
```

有 12 列，所以 span1 + span10 + span1 会给你一共 span12

请参阅 jsFiddle：http: [//jsfiddle.net/NzSCH/](http://jsfiddle.net/NzSCH/)

# drupal - Drupal 商务属性与 skus、产品捆绑

> ID：14305514
> 
> 赞同：0
> 
> 时间：2013-01-13T16:30:38.877
> 
> 标签：drupal, bundle, commerce

我正在创建一个 Drupal Commerce 站点。需要具有 3 组不同选项的产品，每组选项都有独特的价格和自己的 sku，它会因产品而异。我通过使用可定制的产品让它工作了一些，但没有 sku，需要一个 sku 的选项。然后尝试了产品捆绑包，但根本无法让它工作，这对 Drupal 来说相当新。有人知道如何将 sku 添加到可定制的产品中吗？或者让产品包真正起作用？步骤是什么，在产品包上找不到像样的说明。Josh Miller 有一个关于可定制产品（披萨配料）的视频，这就是我让这些产品工作的方式，天哪，只需要为每个项目提供一个 sku。请帮忙，严重落后的项目。想改用Ubercart，我从来没用过。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T06:42:55.450

我认为您需要阅读有关 drupal 商务模块的工作原理。基本上drupal commerce 提供一个产品实体类型，这些产品在站点上是不可见的。您必须创建自己的具有“产品参考”字段类型的“产品展示”节点类型。当您编辑“产品展示”时，您将选择（通过在产品参考字段中选择）要在此产品展示上展示哪些产品。每个“产品选项”都有自己独特的产品（和 sku）。网上有大量教程可以帮助您完成整个过程。[http://bit.ly/W6CoWI](http://bit.ly/W6CoWI)

# javascript - 从动态 js 菜单中检索数量

> ID：14305516
> 
> 赞同：0
> 
> 时间：2013-01-13T16:30:57.597
> 
> 标签：javascript

```
 function showNumber(selectId, divNumber) {
    //this takes value from select option and grabs div for displaying it
    var select = document.getElementById(selectId);
    var noItems = document.getElementById(divNumber);

//loop for creating 0-20 drop down
    for (var i = 0; i <= 20; i++) {
    var option = document.createElement('option');
    option.innerHTML = i;
    option.value = i;

    select.appendChild(option);
    }

    //onchange shows in a div how many items were selected
    select.onchange = function () {
    var noZero = select.value;
    if (noZero > 0) {
    noItems.innerHTML = noZero;
    } else noItems.innerHTML = " ";
    };
    }

    //function takes parameters of the previous one and displays number of items of a particular product in a div
    function showDivs(){
    showNumber('item1', 'div1');
    showNumber('item2', 'div2');
    showNumber('item3', 'div3');
    showNumber('item4', 'div4');
    } 
```

我的问题是我想添加所有产品（item1、item2 等）的数量以计算它们的总数。我似乎没有得到任何帮助，非常感谢任何帮助！...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T17:04:33.953

在使用您的函数初始化项目时构建一个选择框数组`showNumber()`，然后在您的`onchange`事件中运行一个*总计函数*来检查每个选择框中的值。

[演示 jsfiddle](http://jsfiddle.net/pxfunc/XRpxr/)

```
// totaling vars (add #1)
var totalDiv = document.getElementById("divTotal"),
    items = [];

function showNumber(selectId, divNumber) {
  var select = document.getElementById(selectId);

  select.onchange = function () {
    ...
    calcTotal(); // run the total calculation with this event (add #4)
    ...
  };

  // add item to array (for checking totals) (add #2)
  items.push(select);
}

...    

// calculate totals using the items array (add #3)
function calcTotal() {
  var totalQty = 0,
      itemLen = items.length;

  // loop through the items, sum values
  for (var i = 0; i < itemLen; i++) {
    totalQty += parseInt(items[i].value);
  }

  // show total
  totalDiv.innerHTML = totalQty;
} 
```

# smalltalk - SLL 文件类型的经验，可能是 Serena 或 Synergex PVCS 文件？

> ID：14305517
> 
> 赞同：2
> 
> 时间：2013-01-13T16:31:08.353
> 
> 标签：smalltalk, pvcs

我有一组扩展名为 .sll（不是 ssl）的文件，我们正试图弄清楚（我们有权对它们做任何事情）

这些应该是 Smalltalk 文件，但据我所知，这些可能是 Serena PVCS 文件（带有 Smalltalk 内容？）作为第一行（编辑二进制文件的样子）：

**VOL1000 ... 06/10/2005 15:03:50b ... 存储库：r004 (PVCS)**

这让我觉得这些可能是 Serena（或 Synergex？）PVCS 文件。有没有人有这种文件类型的经验？我在这方面是正确的吗？有没有办法解析它们？

我向 Serena 查询过同样的问题，但从我的网络搜索来看，这个软件似乎很贵而且也不是很好。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T18:29:11.650

我不了解 Serena，但在 Smalltalk SLL 的情况下是*Smalltalk 链接库*文件。如果您有[Visual Smalltalk (VSE)](http://en.wikipedia.org/wiki/Visual_Smalltalk_Enterprise)，您可以从文件 -> 安装菜单加载它们。要加载它们，您可能需要一个名为 vdevw.exe 的文件。

SLL 是对象的容器。SLL 中的对象以正确的加载顺序和二进制格式保存，这意味着加载与加载虚拟图像一样快，并且比 File In 操作快得多。例如，如果 SLL 已经初始化了类变量或池字典，则它们的值可能已经可用，而无需手动初始化。

这意味着应用程序可以通过按需加载或卸载部件来实现模块化。SLL 也可能包含开发工具。您还可以查找扩展名为 .bnd 的文件，其中包含 SLL 的加载顺序。

*关于与 Fuel 的区别：* VSE 是第一个具有这些模块化功能的 Smalltalk，尽管今天大多数 Smalltalk 都有类似的东西。我使用[Fuel](http://rmod.lille.inria.fr/web/pier/software/Fuel)作为序列化库，但我想它也可以用作模块化库。

SLL 可以动态绑定到图像，并在保存应用程序图像后变为静态绑定。SLL 可以独立于虚拟机和编译器。我不知道 Fuel 现在如何匹配这些功能。

VSE 的不同之处在于映像是一个 .EXE 文件，对于快速应用程序部署非常有用。并且应用程序可以决定从潜在的大图像中加载什么 SLL。例如，在 VSE 中，要访问开发工具，您需要启动加载映像 (v.exe) 和开发 SLL 的 vdevw.exe。如果您没有 vdevw.exe，即使您有 SLL，您也可能永远无法访问开发对象（尽管您的应用程序可能会“手动”加载它们）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-01T17:40:23.077

这些文件来自 Visual Smalltalk。它们包含二进制代码、对象以及可能的代码源。请参阅@Hermán 的答案以获得更好的解释。

对“PVCS”的引用表明它们是使用 Enterprice 版本（Visual Smalltalk Enterprice）创建的。该产品使用 PVCS 作为（内置）版本控制系统。

# r - 当向量很大时，如何获取 R 中向量的所有可能分区的列表？

> ID：14305519
> 
> 赞同：2
> 
> 时间：2013-01-13T16:31:21.620
> 
> 标签：r, vector, combinatorics

我正在尝试使用 R 找到将`x`长度向量`n`划分为最多`m`分区的所有可能方法。我知道在小的时候该怎么做`n`：

```
library(partitions)
x <- c(10, 20, 30, 40)
n <- length(x)
m <- 3

# In how many ways can we partition n objects into at most m patitions
parts <- restrictedparts(n, m)
sets <- setparts(parts) 
```

在本例中，值为`sets`：

```
[1,] 1 1 1 1 2 1 1 1 1 1 1 2 2 2
[2,] 1 1 1 2 1 2 1 2 2 1 2 1 1 3
[3,] 1 2 1 1 1 2 2 1 3 2 1 3 1 1
[4,] 1 1 2 1 1 1 2 2 1 3 3 1 3 1 
```

的每一列都`sets`告诉我，对于每个独特的排列，`x`应该将每个项目分配到哪个分区。

大时会出现问题`n`：

```
n <- 15
m <- 4
parts <- restrictedparts(n, m)
# This expression will max out your CPU usage and eventually run out of memory.
sets <- setparts(parts) 
```

如何在不耗尽内存的情况下执行此操作？我怀疑是否有一种快速的方法可以做到这一点，所以我怀疑我必须分批完成并写入磁盘。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T19:30:08.020

如果像我一样你不是组合学的超级明星，但你相信`partitions`它是正确的，那么至少你可以利用包的代码来计算最终的分区数。在这里，我破解了这个`setparts`函数，所以它返回的不是分区本身，而是分区的数量：

```
num.partitions <- function (x) {
    if (length(x) == 1) {
        if (x < 1) {
            stop("if single value, x must be >= 1")
        }
        else if (x == 1) {
            out <- 1
        }
        else return(Recall(parts(x)))
    }
    if (is.matrix(x)) {
        out <- sum(apply(x, 2, num.partitions))
    }
    else {
        x   <- sort(x[x > 0], decreasing = TRUE)
        out <- factorial(sum(x))/(prod(c(factorial(x), 
                                         factorial(table(x)))))
    }
    return(out)
} 
```

让我们检查该函数是否返回正确的分区数：

```
num.partitions(restrictedparts(4, 3))
# [1] 14
ncol(setparts(restrictedparts(4, 3)))
# [1] 14

num.partitions(restrictedparts(8, 4))
# [1] 2795
ncol(setparts(restrictedparts(8, 4)))
# [1] 2795 
```

现在让我们看看你的大案子：

```
num.partitions(restrictedparts(15, 4))
# [1] 44747435 
```

那确实是相当多的分区......无论`setparts`写得有多好，输出都无法放入单个数组中：

```
sets <- matrix(1, 15, 44747435)
# Error in matrix(1, 15, 44747435) : 
#  cannot allocate vector of length 671211525 
```

所以是的，你必须编写自己的算法并存储到矩阵列表中，或者如果它对你的记忆来说太多了，如果这确实是你想要做的，那么写入一个文件。否则，考虑到相当多的排列以及你想用它们做什么，回到绘图板......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T18:27:08.923

如果您想分批计算它们，似乎至少对于某些列来说这可能是可能的。我无法在`restrictedparts(15,4)`像您这样的机器上完成对几个单独列的计算。直到第 40 列，我一次可以在 5-10 列的批次中获得成功，但在此之上，有几个单列在引发 malloc 错误之前确实报告了许多列。所以你可能只需要一台更大的机器。在我的 Mac 上，构建第 53 列的 32 GB 占用了一半的内存。大机器上的列数估计与 4GB 机器上的报告一致：

```
> ncol( setparts( restrictedparts(15,4)[,53]))
[1] 6306300
R(317,0xa077a720) malloc: *** mmap(size=378380288) failed (error code=12)
*** error: can't allocate region
*** set a breakpoint in malloc_error_break to debug 
```

（我对这是否是一个明智的项目没有意见。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-30T11:26:52.070

由于我无法安装分区包（缺少库），我想出了这个：

```
 ## Recursive function to get all partitions of a vector 
 ## Returns a list of logical vectors
 parts <- function(x) { 
   if (length(x) == 1) return(list(FALSE, TRUE))
   do.call(c, lapply(parts(x[-1]), function(y) list(c(FALSE, y), c(TRUE, y))))
 } 
```

这个函数接受一个向量并返回一个相同大小的逻辑向量列表。列表中的向量数是可能的分区数，(2^n)。它无法处理巨大的 n，但在我的电脑上，它在不到一秒的时间内运行 n=19。

如果您只想要非空分区并且没有重复，请使用：

```
 partitions <- parts(x)
 partitions <- partitions[1:(length(partitions)/2)][-1] 
```

# ruby - 让 SublimeText2 知道本地项目

> ID：14305520
> 
> 赞同：0
> 
> 时间：2013-01-13T16:31:30.483
> 
> 标签：ruby, rubymotion

我正在为一个项目编写自己的课程。显然 RubyMotion 可以识别一些 CocoaTouch 类，但如果我要编写自己的类，Sublime 不会意识到这一点。我该如何纠正这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T16:49:15.107

您是否也在使用 Sublime 进行 RubyMotion 开发？如果是这样，您是否使用 RubyMotion 完成？这可能就是您看到 CocoaTouch 类完成的原因。

Sublime 没有内置的代码智能引擎，所以如果你编写自己的类，它不会知道它们。

也就是说，有些软件包可能会提供您正在寻找的内容：

[https://github.com/Kronuz/SublimeCodeIntel](https://github.com/Kronuz/SublimeCodeIntel)

[https://github.com/alienhard/SublimeAllAutocomplete](https://github.com/alienhard/SublimeAllAutocomplete)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T22:36:28.797

我一直在使用这个崇高的包：[https ://github.com/diemer/RubyMotionSublimeCompletions](https://github.com/diemer/RubyMotionSublimeCompletions)

这也可以通过 Package Control 安装，只需键入 RubyMotion 即可看到

这个工具很好地帮助你输入长的Objective-C名字，它也知道你自己的类。唯一的问题是所有默认名称和方法都在您自己的类和方法之前（有时会很烦人）

# html - html5画布拉伸矩形的边

> ID：14305521
> 
> 赞同：1
> 
> 时间：2013-01-13T16:31:30.500
> 
> 标签：html, canvas

是否有可能我可以拉伸矩形的一侧并将其形状从直线更改为其他形状，如弧形或通过从中心拉伸它来改变形状，如下所示

![在此处输入图像描述](../Images/07ac05f85b48c28f84b5a1251786fd53.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T22:45:22.897

您可能不想按照其他人的建议使用弧线，因为弧线只会给您提供弧线。更好的方法是将矩形（4 条边）表示为 4 个立方贝塞尔曲线。具有与起点和终点共线的控制点的三次贝塞尔曲线将产生一条直线，因此您仍然可以表示一个正常的矩形。然后，当您想将两侧拉伸成曲线时，您只需根据您想要的曲线将控制点向外、向内、向上或向下移动。[快速了解贝塞尔曲线](http://en.wikipedia.org/wiki/B%C3%A9zier_curve)可能会有所帮助。

我将制作一张图片来更好地说明这一点，并在几分钟内将其包含在内。

![用三次贝塞尔曲线构造一个矩形](../Images/5e18e68ba86a328170ebec5d33430f7a.png)

因此，当我们绘制矩形时，代码将如下所示：

```
ctx.moveTo(p1.x,p1.y);
ctx.bezierCurveTo(cp1.x,cp1.y,cp2.x,cp2.y,p2.x,p2.y);
ctx.bezierCurveTo(cp3.x,cp3.y,cp4.x,cp4.y,p3.x,p3.y);
ctx.bezierCurveTo(cp5.x,cp5.y,cp6.x,cp6.y,p4.x,p4.y);
ctx.bezierCurveTo(cp7.x,cp7.y,cp8.x,cp8.y,p1.x,p1.y); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-08T11:29:33.037

您可以使用 quadraticCurveTo 函数，它有 4 个参数，并且非常易于使用，请查看示例

[http://jsfiddle.net/55Ws3/](http://jsfiddle.net/55Ws3/)

```
<canvas width="800" height="800" id="world" style="border: 1px solid red;"><p class="noCanvas">You need a <a href="#">modern browser</a> to view this.</p></canvas>

var canvasElement = document.getElementById('world');
// Always check for properties and methods, to make sure your code doesn't break 
// in other browsers.
if (canvasElement && canvasElement.getContext) {
    // Get the 2d canvasContext.
    // Remember: you can only initialize one canvasContext per element.
    var canvasContext = canvasElement.getContext('2d');
    if (canvasContext) {
        canvasContext.beginPath();
        canvasContext.moveTo(100, 200);
        canvasContext.lineTo(200, 200);
        canvasContext.quadraticCurveTo(325, 250, 200, 300);
        canvasContext.lineTo(100, 300);
        canvasContext.lineTo(100, 200);
        canvasContext.fillStyle = 'red';
        canvasContext.strokeStyle = 'red';
        canvasContext.lineWidth = 2;
        canvasContext.fill();
        canvasContext.stroke();
        canvasContext.closePath();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T16:45:06.670

您无法通过简单地绘制一个矩形来实现这一点。但是，您可以绘制三条线并为第四条边绘制弧线。[这里有一个](http://www.html5canvastutorials.com/tutorials/html5-canvas-arcs/)关于`context.arc()`.

# xaml - 您如何手动创建 GridView 组并用项目填充它们？

> ID：14305526
> 
> 赞同：0
> 
> 时间：2013-01-13T16:32:06.177
> 
> 标签：xaml, windows-runtime, windows-store-apps, winrt-xaml

我刚刚创建了一个`GroupedItemsPage`，我想添加一些组，然后用项目填充它们。我不想使用 a`databinding`因为项目不需要通过代码修改。我希望这些项目来自特定模板并能够设置组标题。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T21:48:31.503

您可以使用 Style="{StaticResource Horizo​​ntalScrollViewerStyle}" 的 ScrollViewer 并在其中放置一个 Orientation="Horizo​​ntal" 的 StackPanel，然后使用 Grids、WrapGrids 和/或 VariableSizedWrapGrids 来显示内容。如果不使用 ItemsSource 绑定 - 您最好从头开始构建它。

# permissions - Windows 7 64位中“Temp”文件夹的权限不断变化

> ID：14305535
> 
> 赞同：-1
> 
> 时间：2013-01-13T16:33:12.113
> 
> 标签：permissions, automation, windows-7-x64, temp

我刚买了一台装有 Win7 64 位的新笔记本电脑。最近我遇到了一些错误，包括无法保存某些文件、Windows Installer 错误和文件提取问题。我发现它们都与我的 %Temp% 文件夹的权限设置为只读有关。我在这里发现我必须将所有权限设置为完全控制，更改所有权并添加一个名为“SYSTEM”的权限持有者。我做了所有这些，没有更多的错误。然而一段时间后，问题又回来了。我检查了 %Temp% 文件夹，再次进入只读状态，并且删除了“SYSTEM”用户。恢复这些设置有效，但它们不断变回。我无法追踪这些变化何时发生，但没有运气。另外，我在另一台PC上使用过Win7 64位和32位，从来没有遇到过这个问题，然后想起来，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T09:24:01.480

它可能与用 dll 修补的 adobe acrobat 而不是正确的许可有关...

# javascript - 使用 Greasemonkey 编辑表中的值

> ID：14305537
> 
> 赞同：0
> 
> 时间：2013-01-13T16:33:19.087
> 
> 标签：javascript, greasemonkey, edit, html-table

我对 javascript 很陌生，我需要一些帮助来编辑表格单元格的内容。

例如，我想将比赛的赢、平和输的值更改[**为此页面**](http://www.goal.com/en-us/results-standings/69/serie-a/table)中的百分比值。

我不是要书面代码（但如果你愿意，那不会让我不高兴），只是要一个解释如何做的页面链接。

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T17:08:16.897

如果您查看如何使用greasemonkey 插入jQuery，可以使用以下内容，该内容在使用浏览器控制台的页面上进行了测试：

```
$(function(){
    function percent_of_GP( gp, val){
       return parseInt( (100*val)/gp,10)
    }

    $('.teamStandings tbody tr').each(function(){
      var $cells=$(this).find('td')
       var gp=parseInt($cells.eq(4).text(),10) ;
       $cells.slice(5,14).each(function(){
          $(this).html(function(i, html){
            return percent_of_GP( gp,html)+'%'
          })
       });       
    });
}); 
```

将所有 3 列中的所有赢/输/平更改为百分比

# javascript - 不使用 SWFObject 将嵌入的 YouTube 视频静音

> ID：14305542
> 
> 赞同：1
> 
> 时间：2013-01-13T16:33:43.053
> 
> 标签：javascript, youtube, youtube-api, youtube-javascript-api

从[这里](https://developers.google.com/youtube/js_api_reference#Requirements)看来：使用 a`SWFObject`是可选的。由于我有一个简单的要求（- 仅将视频静音），因此我尝试了以下代码，但`onYouTubePlayerReady`根本没有被调用（-我放在`alert`那里并且它从未触发）。

这段代码缺少什么？

```
<iframe id="id1" width="640" height="360" src="http://www.youtube.com/embed/shbgRyColvE?version=3;enablejsapi=1" allowscriptaccess="true" ></iframe> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T20:34:59.680

首先，您使用的是 iframe 播放器，这很好——它比仅 Flash 的播放器（这是`SWFObject`发挥作用的地方）更新，而且我们推荐用于新开发。

但是，如果您想对 iframe Player 进行 API 调用，则需要对事物进行一些不同的初始化。您可以按照以下示例进行操作

[https://developers.google.com/youtube/iframe_api_reference#Getting_Started](https://developers.google.com/youtube/iframe_api_reference#Getting_Started)

并修改该`onPlayerReady`示例中的事件处理程序以显式静音播放器，即

```
function onPlayerReady(event) {
  event.target.mute();
  // Anything else you want to do, like start playback...
} 
```

# io - 使用 lua 读取/写入属性文件

> ID：14305543
> 
> 赞同：1
> 
> 时间：2013-01-13T16:33:51.993
> 
> 标签：io, lua

在 java 中，我习惯于使用内置类来读取和写入属性文件，但 lua 不存在类似的东西。

将名称和值保存到文件然后使用名称取回值的最简单方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T18:39:05.587

最*简单*的方法是这样的：

```
local name, value = "abc", 123
local f = io.open("outfile", "w")
f:write("return {" .. name .. " = " .. value .. "}")
f:close()

---

local t = dofile("outfile")
print( t[name] )
--> 123 
```

这可行，但不是很安全，因为`dofile()`它只是执行它在文件中找到的任何 Lua 代码。如果该文件返回一个完整的表格，其中包含您保存的值，那么它工作得很好，但是有人可以轻松地编辑此文件以包含`os.execute("sudo rm -rf /")`或其他令人愉快的乐趣。

`setfenv()`明智地使用and可以使其更加健壮`debug.sethook()`，但是如果您想正确地做到这一点，您应该使用 Lua 的众多序列化库之一，可以在[此处](http://lua-users.org/wiki/TableSerialization)找到其中的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-05T07:46:59.230

参考这个例子， [https://flicsdb.com/read-properties-file-in-lua/](https://flicsdb.com/read-properties-file-in-lua/) 它解释了如何读取属性文件并忽略空格或#

# iphone - 视图永远不会被释放

> ID：14305544
> 
> 赞同：0
> 
> 时间：2013-01-13T16:33:54.770
> 
> 标签：iphone, ios, xcode, automatic-ref-counting

**问题：**

我用 nslog 检查每个视图以检查视图是否已释放，detailViewController 永远不会释放，一段时间后我收到内存警告，唯一调用的是 ViewDidUnload。

**视图是如何调用的以及将哪些项目推送给它**

该视图被调用并推送到一个表中，在 detailViewController 我有一个 searchResult 具有：

```
@property (nonatomic,weak) SearchResult *searchResult; 
```

这是调用的 detailViewController：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

DetailViewController *controller = [[DetailViewController alloc]initWithNibName:@"DetailViewController" bundle:nil];

SearchResult *searchResult = [search.searchResults objectAtIndex:indexPath.row];
controller.searchResult = searchResult;
[self.navigationController pushViewController:controller animated:YES];

//made a property with (nonatomic,weak) DetailViewController and set it to the    controller
self.detailViewController = controller;
} 
```

**detailViewController 是如何处理的**

```
-(void)back:(UIButton *)sender{

[self.navigationController popViewControllerAnimated:YES];

} 
```

**我认为问题是什么**

我只是在猜测..我分配了一些函数，这些函数在 detailViewController 中分配了一些东西，但是如果我回去，那么这些东西会自动释放吗？它必须是保留的东西，但我无法弄清楚 detailViewController 中有什么我在 detailViewController 中有这些私有属性，例如：

```
@property (nonatomic, retain) iCarousel *carousel;
@property (nonatomic, retain) UINavigationItem *navItem; 
```

但如果我离开视野，我该如何释放这些对象？或者这不是问题吗？

更新：

当我向后推时：

```
NSLog(@"%@", [self navigationController]);
[self.navigationController popViewControllerAnimated:NO];
NSLog(@"%@", [self navigationController]); 
```

日志：

```
2013-01-13 19:33:30.703 App[21683:707] <UINavigationController: 0xfeafbf0>
2013-01-13 19:33:30.705 App[21683:707] (null) 
```

我正在使用 ARC

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T13:57:05.987

存储后`controller`，`self.detailViewController`您必须释放控制器，因为它是在此方法中较早分配的。所以代码会变成

```
self.detailViewController = controller;
[controller release]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T16:51:17.890

您可能对 detailViewController 有一些强引用。

在您的 didSelectRow 方法中。您正在使用以下代码创建强引用：

```
self.detailViewController = controller; 
```

弹出 detailViewController 后或收到内存警告时，只需设置

```
self.detailViewController = nil; 
```

如果这不起作用，请检查您的其他代码以查看您是否正在创建任何其他强引用或保留循环，其中 detailViewController 可能对调用视图控制器具有强引用。

祝你好运

# c# - 专注于第三方应用并返回

> ID：14305545
> 
> 赞同：0
> 
> 时间：2013-01-13T16:33:57.520
> 
> 标签：c#, .net, focus

我正在用 C# 编写。

我有一个过程可以午餐嵌入在我的程序中的第三方应用程序。我还有一个 RichTextBox，我在其中编写文本，然后将其实时显示在嵌入式应用程序中。一切正常，但我需要移动鼠标，因为应用程序将获得焦点，然后刷新并向我显示更改。

这是过程：

```
private void button2_Click(object sender, EventArgs e)
{
    System.IO.File.WriteAllText(@"ForParsing.txt", textBox1.Text);

    pdf.StartInfo.FileName = @"yap.exe";
    pdf.StartInfo.Arguments = "ForParsing.dvi";
    pdf.Start();
    pdf.WaitForInputIdle(-1);
    SetParent(pdf.MainWindowHandle, this.splitContainer2.Panel1.Handle);
    SetWindowPos(pdf.MainWindowHandle, HWND_TOP,
        this.splitContainer2.Panel1.ClientRectangle.Left,
        this.splitContainer2.Panel1.ClientRectangle.Top,
        this.splitContainer2.Panel1.ClientRectangle.Width,
        this.splitContainer2.Panel1.ClientRectangle.Height,
        SWP_NOACTIVATE | SWP_SHOWWINDOW);
} 
```

我在下面有一个用于 TextBox 的按键处理程序。当按键被按下时，我专注于嵌入在我的程序中的第三方应用程序。

```
private void richTextBox1_TextChanged(object sender, EventArgs e)
{
            System.IO.File.WriteAllText(@"ForParsing.txt", textBox1.Text);
            //Focus on third party application
            SetForegroundWindow(pdf.MainWindowHandle);
} 
```

到现在为止还挺好。现在的问题：我希望焦点立即返回到课程在 TextBox 中的同一位置。我希望能够继续在 TextBox 中写入，就像除了实时刷新嵌入式应用程序之外什么都没有发生。

简而言之，我需要第三方应用程序立即刷新（获得焦点），并且我能够在我停止的当前位置在 TextBox 中不受干扰地输入。

有可能吗？有没有更好，更简单的解决方案？很乐意听取任何建议。

由于不允许我回答自己的问题，我将在这里写下：

我找到了修补人们问题的解决方案

这是我所做的：

私人无效richTextBox1_TextChanged（对象发件人，EventArgs e）{ System.IO.File.WriteAllText（@“ForParsing.txt”，textBox1.Text）；

```
 //Focus on third party application
        SetForegroundWindow(pdf.MainWindowHandle);

        //Restore focus
        pdf.WaitForInputIdle();
        SetForegroundWindow(this.Handle);
        this.Focus(); 
```

}

感谢大家的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T17:37:42.637

当您需要它重新集中注意力时：

```
if (!handle.Equals(IntPtr.Zero))
{
    if (NativeMethods.IsIconic(WindowHandle))
        NativeMethods.ShowWindow(WindowHandle, 0x9); // Restore

    NativeMethods.SetForegroundWindow(handle);
} 
```

在哪里：

```
[DllImport("User32.dll", CharSet = CharSet.Unicode, ExactSpelling = true, SetLastError = true)]
[return: MarshalAs(UnmanagedType.Bool)]
internal static extern Boolean IsIconic([In] IntPtr windowHandle);

[DllImport("User32.dll", CharSet = CharSet.Unicode, ExactSpelling = true, SetLastError = true)]
[return: MarshalAs(UnmanagedType.Bool)]
internal static extern Boolean SetForegroundWindow([In] IntPtr windowHandle);

[DllImport("User32.dll", CharSet = CharSet.Unicode, ExactSpelling = true, SetLastError = true)]
[return: MarshalAs(UnmanagedType.Bool)]
internal static extern Boolean ShowWindow([In] IntPtr windowHandle, [In] Int32 command); 
```

通常，当您重新聚焦时，tabindex 始终位于您离开它的相同位置。所以应该问题不大...

# batch-file - XP上batfile中管道的奇怪限制

> ID：14305546
> 
> 赞同：11
> 
> 时间：2013-01-13T16:34:05.520
> 
> 标签：batch-file, windows-xp, dos

我在 XP Pro SP3 系统上创建的 BAT 文件每次都能完美运行。
安装在另一个 XP [也是 Pro SP3] 系统上，它每次都会失败（“挂断”）。

问题出在多步管道中。为了隔离它，我一直在简化，直到我到达这个最小的 [人工] 测试用例

```
 echo. | date | find "/" | find "/" | find "/"
```

注意：前两个步骤没有缩短，`date /t`因为某些用户的系统是 XP 之前的系统[因此缺少命令扩展]。另外：仔细测试表明它`date`正在执行 MS-DOS 内部`DATE`命令，并且`find`正在执行在“C:\WINDOWS\system32\”中找到的 vanilla“FIND.EXE，2004 年 8 月 4 日，9216”[与“中的安全副本相同” C:\i386\"]。

在失败的系统上，每个具有 4 或更多 |s 的命令都会在第五步中挂起，即使 - 就像这里一样 - 程序很简单并且它们正在处理的文本量是微不足道的。

> 昨天我对用户的系统做了一些进一步的测试，发现了一个我不知道的微妙之处。我在命令提示符处输入了简化的命令 [上图]。正如预期的那样，它失败了[“挂起”]。然而，当我重新启动并在做任何其他事情之前再次尝试时[这种情况在用户的正常操作中永远不会发生]，我感到震惊：它起作用了[即，MS-DOS DATE 命令的输出按预期显示]。它再次起作用了。然后在第三次尝试时，故障模式再次出现，此后一直保持一致。

> 我确认这`files=40`对两个系统都有效，然后放弃了。我仍然很好奇，但我不能花很多时间在一个小项目上让一个***公益***客户分析一个我很容易解决的问题。

> 感谢大家快速而有用的回复。

在原始系统上，具有 4 个或更多 |s 的命令可以正常工作，而不管调用哪些程序以及它们正在处理多少文本 [在合理范围内]。

一旦认识到限制，就会有许多微不足道的解决方法，所以我的问题只是出于好奇：任何人都可以提出限制来自哪里以及 [XP 中] 是否存在会提高/消除它的设置？

注意：任一系统上均不存在 HKEY_LOCAL_MACHINE\Software\Microsoft\Command Processor\AutoRun 和 HKEY_CURRENT_USER\Software\Microsoft\Command Processor\AutoRun。

另外：我很抱歉通过重复编辑我的原始帖子来回答评论，但无论我使用哪个浏览器登录，“添加评论”弹出窗口 [或任何它应该是的] 都不会出现。也许我的理解是，在我自己的帖子中添加评论不需要声誉点数是错误的。但是，现在我看到“显示 # 更多评论”也不起作用。

最后：我在使用此站点时遇到的问题 [主要症状是 javascript 控制台消息“未捕获的 ReferenceError：未定义 StackExchange”] 与此处讨论的问题相同[https://meta.stackexchange.com/questions/117730 /stack-overflow-onclick-actions-broken](https://meta.stackexchange.com/questions/117730/stack-overflow-onclick-actions-broken)大约一年前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:08:46.180

使用 ^ 避免特殊字符
示例回显。^| 日期^| 找到“/”^| 找到“/”^| 寻找 ”/”

[http://www.robvanderwoude.com/escapechars.php](http://www.robvanderwoude.com/escapechars.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T04:40:52.030

有时，如果注册表中的某些内容丢失，您必须手动添加它以使其正常工作。或者，获取一些高级 windows BAT 编辑器，它将扩展您的批处理脚本的可能性，使其超出标准 windows 命令等。为此，他们通常将您的批处理文件附加并转换为 exe ，因为可执行文件是扩展功能的引擎。它们中的大多数是共享软件，但是，请注意它们的规格，在这种情况下，您所需要的只是带有引擎的简单编辑器，它将批处理文件提取到临时目录并执行它。您可能不需要用于混淆您的批处理文件的东西。

# c++ - 如何将小部件对象传递给 Qt 中的函数？

> ID：14305548
> 
> 赞同：2
> 
> 时间：2013-01-13T16:34:25.973
> 
> 标签：c++, qt, function, object, reference

我对 Qt 相当陌生，如果有人能帮助我解决这个问题，我将不胜感激。我正在使用 Qt Creator 并创建了一个带有`PlainTextEdit`. 我正在尝试使用 if 语句来验证在此文本框中输入的文本。我做了一个如下的函数

```
void validateText (QPlainTextEdit *myWidget)
{
    if ((myWidget->toPlainText().endsWith("1")) ||
        (myWidget->toPlainText().endsWith("2")) ||
        (myWidget->toPlainText().endsWith("3")) ||
        (myWidget->toPlainText().endsWith("4")) ||
        (myWidget->toPlainText().endsWith("5")) ||
        (myWidget->toPlainText().endsWith("6")) ||
        (myWidget->toPlainText().endsWith("7")) ||
        (myWidget->toPlainText().endsWith("8")) ||
        (myWidget->toPlainText().endsWith("9")) ||
        (myWidget->toPlainText().endsWith("0"))
    )
    {
        qDebug() << "Integer entered";
    }
    else
    {
        qDebug() << "Non-integer entered";
    }
} 
```

但是，当我从插槽调用此函数时`on_plainTextEdit_textChanged()`，出现错误：

```
undefined reference to validateText(QPlainTextEdit*) 
```

目前，到目前为止，我在 textchanged 插槽中有这段代码：

```
void Options::on_plainTextEdit_textChanged()
{
    validateText(qobject_cast<QPlainTextEdit*>(qApp->widgetAt(180,30)));
} 
```

如您所见，我正在尝试获取对对象本身的引用并将其传递给函数，但我遇到了问题。我做错了什么，还是有更简单的方法将小部件对象传递给 Qt 中的函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T01:09:53.740

好吧，正如丹尼尔在评论中所建议的那样，我添加了一个验证器类并解决了我遇到的问题。这是将来遇到相同问题的任何人的代码。

**验证器.cpp**

```
...
Validator::Validator(QPlainTextEdit *textEdit)
{
    this->myWidget = textEdit;
}
void Validator::validateText ()
{
    if (   (myWidget->toPlainText().endsWith("1")) ||
           (myWidget->toPlainText().endsWith("2")) ||
           (myWidget->toPlainText().endsWith("3")) ||
           (myWidget->toPlainText().endsWith("4")) ||
           (myWidget->toPlainText().endsWith("5")) ||
           (myWidget->toPlainText().endsWith("6")) ||
           (myWidget->toPlainText().endsWith("7")) ||
           (myWidget->toPlainText().endsWith("8")) ||
           (myWidget->toPlainText().endsWith("9")) ||
           (myWidget->toPlainText().endsWith("0"))
        )
    {
        qDebug() << "Integer entered";
    }
    else
    {
        qDebug() << "Non-integer entered";
    }
} 
```

和函数调用

```
void Options::on_plainTextEdit_textChanged()
{
    Validator* val = new Validator(ui->plainTextEdit);
    val->validateText();
} 
```

这完全跳过了从 QWidget 转换为 QPlainTextEdit 或任何废话的需要。

# algorithm - 元素搜索成本

> ID：14305554
> 
> 赞同：1
> 
> 时间：2013-01-13T16:34:42.117
> 
> 标签：algorithm, sorting

我有一个由 n 个元素组成的数组。这些元素是数字。我现在要做的是在我的数组中找到很多。我将不得不进行`sqrt(n)`搜索。

从效率的角度来看，什么是对我更好的选择？

1.  线性搜索
2.  数组排序（让我们说线性时间，例如，当我们使用 RadixSort 时）然后使用二分搜索搜索元素 -`O(logn)`

我有一些直觉，但我不知道如何检查和证明。线性搜索成本是（在最坏的情况下）:) `O(n) * O(sqrt(n)`。排序后的二进制搜索将是`O(n) + O(logn) * O(sqrt(n))`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T16:44:19.147

正如你所说，你有两个选择：

1.  线性搜索`sqrt(n)`时间。成本是`O(n * sqrt(n))`。
2.  对数组进行排序`O(n)`，然后是二进制搜索`sqrt(n)`时间。
    成本是`O(n + log(n) * sqrt(n))`。对于所有积极的人来说都`n`更大。 [证明](http://www.wolframalpha.com/input/?i=x%20%3E%20logx%2asqrtx)。 多亏了这一点，我们可以写. 排序部分占主导地位，这是瓶颈。`log(n) * sqrt(n)``n`
    `O(n + log(n) * sqrt(n)) = O(n)`

因此，对于 big ，第二种方法`n`应该更快 - 近似线性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T16:50:21.867

您有两种方法可以解决您的问题：

1.  排序然后搜索
2.  只是搜索

制作一张复杂性表格，您将获得解决方案。也许你可以使用像[http://rechneronline.de/function-graphs/](http://rechneronline.de/function-graphs/)这样的工具来比较两个复杂性。

您有不同的情况：

1.  线性搜索 sqrt(n) 次 = O(n * sqrt(n))。
2.  线性排序然后二分查找 sqrt(n) 次 = O(n) + O(log(n) * sqrt(n)= O(n)

第二个似乎是最有希望的。

# c - 在 c 中为动态结构数组输入 malloc 函数中的元素数

> ID：14305558
> 
> 赞同：2
> 
> 时间：2013-01-13T16:34:48.267
> 
> 标签：c, arrays, pointers, dynamic, malloc

目前，我尝试理解 C 中的动态数组。当我为指针“ptr”分配内存时，它可以在不输入我需要的元素数量（在 malloc 函数中）的情况下工作。
现在，问题是，不明白它为什么起作用。
如果有人能给我一些建议，那就太好了。谢谢。

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>

struct daten
{
    char name[20];
    int alter;
};

int main(void)
{
    struct daten *ptr;
    int i;

    ptr = malloc(sizeof(struct daten *)); //works fine!!
    //ptr = malloc(sizeof(struct daten *)*4);
    strcpy(ptr[0].name, "Daniel");
    ptr[0].alter = 23;

    strcpy(ptr[1].name, "Fabian");
    ptr[1].alter = 29;

    strcpy(ptr[2].name, "Helmut");
    ptr[2].alter = 34;

    strcpy(ptr[3].name, "Katrin");
    ptr[3].alter = 21;

    for(i = 0; i<4; i++)
    {
        printf("%s\t", ptr[i].name);
        printf("%d\n", ptr[i].alter);

    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T16:37:01.463

由于这是一种未定义的行为，任何事情都可能发生：您的程序可能运行良好。但这并不意味着它是一个*正确*的程序。

因此，您*必须*分配足够的内存来执行此操作，即`sizeof(struct daten) * 4`字节。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T16:37:41.173

关键字是它不能“正常工作”。最多它似乎在工作。

您在这里拥有的是**未定义的行为**（因为您正在为一个结构分配空间，但是，您正在写入更大的空间）。未定义的行为可以做任何事情；这并不意味着程序**必须崩溃。**这包括它可能“工作正常”。

此外，您误解了应该分配多少内存。对于`T`分配给 type 指针的 type `T *`，`sizeof(T)`应该分配字节，如下所示：

```
ptr = malloc(sizeof(struct daten) * 4); 
```

更好的是：

```
ptr = malloc(sizeof(*ptr) * 4); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T16:37:58.060

这是未定义的行为。你只是（不）幸运的是它的工作。如果你在不同的系统上尝试这个，它可能会也可能不会。

你应该做 ：

```
ptr = malloc(sizeof(struct daten)*4); 
```

操作成功，因为数据可能在分配空间之后被写入内存。由于这是未分配的空间，因此您没有任何问题，它是`working`. 当您尝试使用此空间时，您**也会遇到问题。**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-13T16:39:51.467

嗯，你只是写到未分配的区域。这可以工作，但从长远来看，您会遇到崩溃，因为您的堆很可能会因写入未分配的区域而损坏，因此连续的 malloc 可能会失败或使您的程序崩溃。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-13T16:43:18.490

`ptr[3]`也可以表示为`*(ptr + 3)`，其中 '3' 缩放为`(3 * sizeof(*p))`。因此，它将数据复制到超出您分配的内存的某个内存位置。

你很幸运，或者我应该说你很不幸。你所做的有点像随意刺伤某人，你可能会击中一个重要器官，也可能不会。这次你没有，编译代码而不调试（例如）来改变内存布局，你可能会遇到一些会杀死进程的东西。或者也许不杀死它，而只是伤害它。

您已经遇到了必须遵守 C 语言编程的原因之一。不，它没有“工作”，你的测试不足以证明它失败了。

另请参阅`calloc`。

# gtk# - 如何以编程方式关闭 Gtk# 窗口？

> ID：14305560
> 
> 赞同：2
> 
> 时间：2013-01-13T16:34:53.430
> 
> 标签：gtk#

我试图`Window`通过单击一个按钮来关闭代码中的 Gtk#。也就是说，按钮应该与`X`标题栏中的按钮具有相同的效果。

然而，当窗口关闭`DeleteEvent`时，单击我自己的按钮时不会触发，而不是单击`X`标题栏按钮。

这是一些最小的示例代码：

```
 using System;

    using Gtk;

    namespace GtkSharpTest
    {
        class Program
        {
            [STAThread]
            public static void Main(string[] args)
            {
                Application.Init();

                using (Window win = new Window("Test")) {
                    win.SetSizeRequest(300, 200);
                    win.Hidden += delegate(object sender, EventArgs e) {
                        Application.Quit();
                    };
                    win.DeleteEvent += delegate(object o, DeleteEventArgs e) {
                        using (MessageDialog dlg = new MessageDialog(win,
                                                                     DialogFlags.Modal,
                                                                     MessageType.Question,
                                                                     ButtonsType.YesNo,
                                                                     "Really close?")) {
                            ResponseType result = (ResponseType)dlg.Run();
                            dlg.Destroy();
                            if (result == ResponseType.No) {
                                e.RetVal = true;
                            }
                        }
                    };

                    Button bClose = Button.NewWithLabel("Close");
                    bClose.Clicked += delegate(object sender, EventArgs e) {
                        // ???
                    };
                    win.Add(bClose);

                    win.ShowAll();
                    Application.Run();
                }
            }
        }
    } 
```

我正在寻找的行标有`// ???`。

我在那里尝试了各种电话：

*   `win.Hide();`
*   `win.HideAll();`
*   `win.Destroy();`

两者都在[这个论坛](http://ubuntuforums.org/showthread.php?t=722111)`Hide`中`Destroy`被建议关闭 Gtk 窗口。[这篇 SO 帖子中的选定答案](https://stackoverflow.com/questions/6005612/programmically-close-gtk-window)也暗示了，甚至声称在调用该方法时会触发该事件。但是，我无法重现该主张；所有上述方法只会使窗口消失，但只有当我使用标题栏按钮关闭窗口时才会触发。`Destroy``delete``DeleteEvent``X`

换句话说，您可以说我正在寻找与 Windows 窗体/WPF`Close()`方法等效的 Gtk#。调用这些完全模拟了对`X`标题栏按钮的单击，因为相应的`Closing`事件被触发并且仍然有机会阻止表单/窗口被关闭。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T12:56:08.107

你是对的，删除事件仅在窗口管理器尝试关闭窗口时触发（即用户单击 X 按钮。）

您可以使用`Destroy`来关闭一个窗口。我不是 100% 确定，但我认为这会触发`DestroyEvent`.

但是，如果您想精确模拟单击 X 按钮，则需要发送一个`DeleteEvent`with `window.Event()`。

# spring - spring security 3 - 限制对实际用户的角色访问

> ID：14305564
> 
> 赞同：0
> 
> 时间：2013-01-13T16:35:08.527
> 
> 标签：spring, spring-security, roles

在我的 Web 应用程序中，我希望用户（角色 USER）拥有他们只能看到自己的私人页面。我还想要一个超级管理员（角色 ADMIN），它可以查看所有用户的所有私人页面。

所以我按照以下方式对网址进行建模：

```
/user/{userId}/... 
```

现在除了 ADMIN 之外，只有具有用户 ID 的 USER 应该能够调用此页面。可以动态添加用户，他们的用户 ID 将是一个生成的序列号。

我开始这样建模：

```
<http pattern="/user/**" use-expressions="true"  >
    ...
    <intercept-url pattern="/user/**" access="hasAnyRole('ROLE_USER', 'ROLE_ADMIN')" />
    ... 
</http> 
```

但这样做会例如使用户 ID 为 2 的 USER 能够调用`/user/1/...`

这样做的正确方法是什么？有人可以给我一个例子吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T02:59:58.070

`/user/{userId}/`仅当用户具有 ADMIN 角色时，userId in才有意义。对于其他用户，只需忽略参数并使用

```
UserDetails userDetails =
      (UserDetails)SecurityContextHolder.getContext().getAuthentication().getPrincipal();

if('ROLE_ADMIN' in userDetails.getAuthorities() ){
    //get user indentified by userId
}
else{
   //get current user 
} 
```

获取当前用户相关信息。

# twitter - Twitter Bootstrap - 导航中心

> ID：14305577
> 
> 赞同：0
> 
> 时间：2013-01-13T16:36:32.520
> 
> 标签：twitter, twitter-bootstrap, center, navbar

我有 Twitter Bootstrap 框架，并且导航没有居中。那是我的代码：

```
 <div id="subnav" align="center">
       <div class="container">
           <a href="index.php">Startseite</a>
           <a href="youdesk.php">YouDesk</a>
           <a href="help.php">Hilfe</a> 
           <a href="imprint.php">Impressum</a>
       </div>
    </div> 
```

如何使导航居中？

谢谢你的帮助。

对不起我的英语不好 - 我来自德国。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T16:41:25.900

尝试添加这个：

```
 .navbar .nav,
    .navbar .nav > li {
      float:none;
      display:inline-block;
      vertical-align: top;
    }

    .navbar-inner {
      text-align:center;
    } 
```

演示：http: [//jsfiddle.net/qDUH3/10/](http://jsfiddle.net/qDUH3/10/)

# c# - 获取将返回列表的文件夹和子文件夹中的所有文件的方法

> ID：14305581
> 
> 赞同：60
> 
> 时间：2013-01-13T16:37:00.513
> 
> 标签：c#, file, methods, recursion, directory

我有一个方法可以遍历文件夹及其所有子文件夹并获取文件路径列表。但是，我只能弄清楚如何创建它并将文件添加到公共列表，但不知道如何返回列表。这是方法：

```
public List<String> files = new List<String>();

private void DirSearch(string sDir)
    {
        try
        {
            foreach (string f in Directory.GetFiles(sDir))
            {
                files.Add(f);
            }
            foreach (string d in Directory.GetDirectories(sDir))
            {
                DirSearch(d);
            }
        }
        catch (System.Exception excpt)
        {
            MessageBox.Show(excpt.Message);
        }
    } 
```

所以，我只是`DirSearch()`在我的代码中的某个时刻调用它并用路径“填充”列表，但我希望能够多次使用它来创建具有不同目录的不同列表等。

* * *

## 回答 #1

> 赞同：168
> 
> 时间：2013-01-13T16:40:00.297

您可以使用[Directory.GetFiles](http://msdn.microsoft.com/en-us/library/ms143316.aspx)替换您的方法。

```
 Directory.GetFiles(dirPath, "*", SearchOption.AllDirectories) 
```

* * *

## 回答 #2

> 赞同：60
> 
> 时间：2013-01-13T16:40:23.000

```
private List<String> DirSearch(string sDir)
{
    List<String> files = new List<String>();
    try
    {
        foreach (string f in Directory.GetFiles(sDir))
        {
            files.Add(f);
        }
        foreach (string d in Directory.GetDirectories(sDir))
        {
            files.AddRange(DirSearch(d));
        }
    }
    catch (System.Exception excpt)
    {
        MessageBox.Show(excpt.Message);
    }

    return files;
} 
```

如果您不想将整个列表加载到内存中并避免阻塞，您可以查看[`following answer`](https://stackoverflow.com/a/2107294/29407).

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2013-01-13T16:45:21.833

只需使用这个：

```
public static List<String> GetAllFiles(String directory)
{
    return Directory.GetFiles(directory, "*.*", SearchOption.AllDirectories).ToList();
} 
```

如果您想要每个文件，甚至是无扩展名的文件：

```
public static List<String> GetAllFiles(String directory)
{
    return Directory.GetFiles(directory, "*", SearchOption.AllDirectories).ToList();
} 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2014-12-07T00:54:57.690

你可以使用这样的东西：

```
string [] filePaths = Directory.GetFiles(path, "*.*", SearchOption.AllDirectories); 
```

而不是使用“ *.* ”，您可以键入文件的名称或仅键入“* .txt”之类的类型 SearchOption.AllDirectories 是在所有子文件夹中搜索，如果您只想要更多关于如何使用它的级别，您可以更改它在[这里](http://www.dotnetperls.com/recursive-file-list)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-01-13T16:39:45.117

我不确定您为什么要将字符串添加到`files`，它被声明为字段而不是临时变量。您可以将签名更改`DirSearch`为：

```
private List<string> DirSearch(string sDir) 
```

并且，在`catch`块之后，添加：

```
return files; 
```

或者，您可以在方法内创建一个临时变量并返回它，在我看来，这似乎是您可能想要的方法。否则，每次调用该方法时，新找到的字符串都将添加到与以前相同的列表中，并且您将有重复项。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-04-03T17:39:15.773

这适用于任何试图获取文件夹及其子文件夹中所有文件的列表并将其保存在文本文档中的人。下面是完整的代码，包括“使用”语句、“命名空间”、“类”、“方法”等。我尝试在整个代码中尽可能多地进行注释，以便您了解每个部分的作用。这将创建一个文本文档，其中包含任何给定根文件夹的所有文件夹和子文件夹中的所有文件的列表。毕竟，如果你不能用它做点什么，那么一个列表（比如在 Console.WriteLine 中）有什么好处。在这里，我在 C 盘上创建了一个名为“Folder1”的文件夹，并在其中创建了一个名为“Folder2”的文件夹。接下来，我在文件夹 2 中填充了一堆文件、文件夹以及这些文件夹中的文件和文件夹。此示例代码将获取所有文件并在文本文档中创建一个列表并将该文本文档放在 Folder1 中。注意：您不应该将文本文档保存到 Folder2（您正在读取的文件夹），这只是一种不好的做法。始终将其保存到另一个文件夹。
我希望这可以帮助某人。

```
using System;
using System.IO;

namespace ConsoleApplication4
{
    class Program
    {
        public static void Main(string[] args)
        {
            // Create a header for your text file
            string[] HeaderA = { "****** List of Files ******" };
            System.IO.File.WriteAllLines(@"c:\Folder1\ListOfFiles.txt", HeaderA);

            // Get all files from a folder and all its sub-folders. Here we are getting all files in the folder
            // named "Folder2" that is in "Folder1" on the C: drive. Notice the use of the 'forward and back slash'.
            string[] arrayA = Directory.GetFiles(@"c:\Folder1/Folder2", "*.*", SearchOption.AllDirectories);
            {
                //Now that we have a list of files, write them to a text file.
                WriteAllLines(@"c:\Folder1\ListOfFiles.txt", arrayA);
            }

            // Now, append the header and list to the text file.
            using (System.IO.StreamWriter file =
                new System.IO.StreamWriter(@"c:\Folder1\ListOfFiles.txt"))
            {
                // First - call the header 
                foreach (string line in HeaderA)
                {
                    file.WriteLine(line);
                }

                file.WriteLine(); // This line just puts a blank space between the header and list of files. 

                // Now, call teh list of files.
                foreach (string name in arrayA)
                {
                    file.WriteLine(name);
                }

            }
          }

        // These are just the "throw new exception" calls that are needed when converting the array's to strings. 

        // This one is for the Header.
        private static void WriteAllLines(string v, string file)
        {
            //throw new NotImplementedException();
        }

        // And this one is for the list of files. 
        private static void WriteAllLines(string v, string[] arrayA)
        {
            //throw new NotImplementedException();
        }

    }
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-09-03T01:48:20.983

```
String[] allfiles = System.IO.Directory.GetFiles("path/to/dir", "*.*", System.IO.SearchOption.AllDirectories); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-11-30T06:20:09.610

试试这个
类 Program { static void Main(string[] args) {

```
 getfiles get = new getfiles();
        List<string> files =  get.GetAllFiles(@"D:\Rishi");

        foreach(string f in files)
        {
            Console.WriteLine(f);
        }

        Console.Read();
    }

}

class getfiles
{
    public List<string> GetAllFiles(string sDirt)
    {
        List<string> files = new List<string>();

        try
        {
            foreach (string file in Directory.GetFiles(sDirt))
            {
                files.Add(file);
            }
            foreach (string fl in Directory.GetDirectories(sDirt))
            {
                files.AddRange(GetAllFiles(fl));
            }
        }
        catch (Exception ex)
        {

            Console.WriteLine(ex.Message);
        }

        return files;
    }
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-10-19T11:49:11.727

[LINQ](https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/concepts/linq/)解决方案：

```
public IEnumerable<FileInfo> DirSearch(string sDir){
            var directoryInfo = new DirectoryInfo(sDir);
            return directoryInfo.GetDirectories()
                .SelectMany(directory => directory.GetFiles());
} 
```

这将返回 FileInfos 而不是字符串，因为我认为它们更容易使用。

# html - 每次单击按钮时更改 div 的位置

> ID：14305584
> 
> 赞同：0
> 
> 时间：2013-01-13T16:37:34.597
> 
> 标签：html, containers, slide

我正在尝试构建一个包含三个不同 div 的 div 容器。当我单击图像时，容器 div 应该完全滑动。那么可能改变它的利润率？

图像是指向左右的箭头。

例如：

```
<div id = "container">
   <div id = "content1">This is the content1</div>
   <div id = "content2">This is the content2</div>
   <div id = "content3">This is the content3</div>
</div>

<div id ="buttonLeft">path/of/imageLeft</div>
<div id ="buttonReft">path/of/imageRight</div> 
```

我已将容器放入尺寸设置为 1024x768 像素的包装器中。容器具有相同的尺寸，现在只显示第一个内容，但我希望它在单击按钮时改变位置。

我应该为此尝试 Jquery 吗？或者你有什么推荐的？

我已经尝试过 slideToggle 但这并不是我想要的，尽管缓动非常适合设计。

目前我有这个，但它不工作：

```
$('#leftarrow').click(function() {
$('#content').animate({
marginLeft: -200px
}, 5000, function() {
// Animation complete.
});
}); 
```

# twitter-bootstrap - 在第一个提交后加载相同的 twitter 引导模式

> ID：14305588
> 
> 赞同：2
> 
> 时间：2013-01-13T16:37:44.787
> 
> 标签：twitter-bootstrap, modal-dialog

我有一个具有表单的引导模式，它成功提交并获得成功消息，假设我想添加一个指向相同模式的链接以从当前打开的模式加载相同的表单。

当我单击链接时，模式隐藏了。

这是我链接到模态的链接。

```
<a class="registerBtn" data-toggle="modal" href="#registerModalForm" >Register</a> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T00:45:33.437

我解决这个问题的方法是将表单数据放在一个隐藏的 div 中（我们称之为它`formData`），它与模态 div 完全分开。例如：

```
<div id="formData" class="hide">
   <form href="#" action="post">
      Name: <input id="nameText" type="text"/>
      <a href="#" id="mySubmit" class="btn btn-primary">Submit</a>
   </form>
</div> 
```

然后创建一个事件，这样当 modal 显示时，它会将表单数据加载到 modal 的 body 中：

```
$("#myModal").on("show", function() {
    // load the modal with content from the div formData
    $(".modal-body", this).html($("#formData").html());
}); 
```

最后，向重新加载表单的按钮添加一个事件（这里的按钮有一个 id = `myReload`：

```
$("body").on('click', 'a.btn-primary', function() {
      // A button with the class btn-primary was clicked. If this is the reload button
      // reload the HTML into the modal
      if ($(this).attr("id") == "myReload") {
                 $(this).parent().html($("#formData").html());
      }
}); 
```

[JSFiddle 在这里](http://jsfiddle.net/mccannf/WSepU/5/)。（忽略提交按钮的代码，这里只是模拟表单提交）。

# java - 如何在 Java 中拆分具有多个分隔符的字符串

> ID：14305593
> 
> 赞同：4
> 
> 时间：2013-01-13T16:38:19.020
> 
> 标签：java, string, stringtokenizer

我正在尝试获得这样的期望输出：

```
555
555
5555 
```

通过使用代码：

```
public class Split {

/**
 * @param args
 */
public static void main(String[] args) {
    // TODO Auto-generated method stub

    String phoneNumber = "(555) 555-5555";

    String[] splitNumberParts = phoneNumber.split(" |-");

    for(String part : splitNumberParts)
        System.out.println(part); 
```

但不知道如何摆脱第一个元素中的“（）”。

提前致谢。

问候

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-13T16:42:58.963

[StringTokenizer](https://docs.oracle.com/javase/7/docs/api/java/util/StringTokenizer.html)支持多个分隔符，这些分隔符可以作为第二个参数列在字符串中。

```
StringTokenizer tok = new StringTokenizer(phoneNumber, "()- ");
String a = tok.nextToken();
String b = tok.nextToken();
String c = tok.nextToken(); 
```

在您的情况下，这将给出 a = 555，b = 555，c = 5555。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-13T16:42:08.947

为什么不先更换？

```
String phoneNumber = "(555) 555-5555";
String cleaned = phoneNumber.replaceAll("[^0-9]",""); // "5555555555" 
```

然后你可以使用 substring 来获取你想要的部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T16:51:23.500

如果您只想按顺序排列数字，那么您可以使用[Pattern](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html)和[Matcher](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html)类来查找与特定模式匹配的所有子字符串，在您的情况下，`\d+`.

您需要使用[`Matcher#find()`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#find%28%29)方法来获取与您的模式匹配的所有子字符串。并用于[`Matcher#group()`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#group%28%29)打印匹配的子字符串。

这是你如何做到的： -

```
String phoneNumber = "(555) 555-5555";

// Create a Pattern object for your required Regex pattern
Pattern pattern = Pattern.compile("\\d+");

// Create a Matcher object for matching the above pattern in your string
Matcher matcher = pattern.matcher(phoneNumber);

// Use Matcher#find method to fetch all matching pattern.
while (matcher.find()) {
    System.out.println(matcher.group());
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-13T16:59:32.353

当您使用 split java 将返回一个字符串数组，该数组与您提供的项目的出现位置分开，因此如果您像现在这样在哪里进行拆分，您可以添加如下内容：

```
phoneNumber.split(" |-|\\(|\\) "); 
```

但这不是很好看，现在是吗？所以我们可以做这样的事情，它基本上告诉java删除任何不是数字的东西：

```
String[] splitNumberParts = phoneNumber.split("\\D+"); 
```

# ios - 由于 SBJson 框架错误，无法将我的 iOS 项目转换为 Objective-C ARC

> ID：14305596
> 
> 赞同：1
> 
> 时间：2013-01-13T16:38:24.433
> 
> 标签：ios, objective-c, automatic-ref-counting, sbjson

我试图通过 Xcode 中的 Edit->Refactor 将我的非 ARC 项目与 release 等转换为 Objective-C ARC 但在转换过程中我在 SBJson 解析器源文件中遇到错误：“这个源文件必须在启用 ARC 的情况下编译！”。但我使用的是 ARC 版本的 SBJson 3.1。

所以我不明白出了什么问题。有人可以帮忙吗？

PS我试图遵循答案中的建议，但结果是一样的：

![在此处输入图像描述](../Images/0b568abaab87bd7b9b31202a154a7e14.png)

![在此处输入图像描述](../Images/e5593053afac5aa58f3cbc2568c59685.png)

如您所见，添加此标志没有帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T16:57:36.893

错误消息来自 SBJson。

[NSObject+SBJson.m](https://github.com/stig/json-framework/blob/master/Classes/NSObject%2BSBJson.m)：

```
#if !__has_feature(objc_arc)
#error "This source file must be compiled with ARC enabled!"
#endif 
```

作为猜测，重构任务尝试在没有 ARC 的情况下编译项目，以检查其中的所有对象。

我不确定这个重构工具，可能有一种方法可以从重构中排除一些文件。如果失败，那么我会尝试在任何 SBJson 文件上注释这些行，直到重构完成，然后在重构项目后，您可以恢复 SBJson 文件。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-13T16:44:10.743

转到您的项目设置并单击“构建阶段”。打开“编译源”，突出显示所有 SBJson 文件并双击其中一个。输入`-fobjc-arc`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-04T18:53:45.523

另一种方法，并在[SBJson 文档](https://github.com/stig/json-framework)中推荐：

[http://deshartman.wordpress.com/2011/09/02/configuring-sbjson-framework-for-xcode-4-2/](http://deshartman.wordpress.com/2011/09/02/configuring-sbjson-framework-for-xcode-4-2/)

基本上，您将 sbjson 框架作为项目包含在项目中，然后将二进制文件链接到框架。然后单独编译框架，因此没有 ARC 冲突。

请注意，如何将 SBJson.xcodeproj 拖到项目中很重要 - 确保它位于项目的文件树中，而不是创建为创建工作区的单独项目。上面的链接显示了它的外观截图。请注意，在将 SBJson.xcodeproj 拖入我的项目后，我必须重新启动 Xcode 才能使其正确显示。

另一种方法是使用工作区。您将创建一个包含两个项目的工作区，然后以类似的方式链接 sbjson 框架。当我这样做时，不需要在“目标依赖项”中添加任何内容，如上面的链接所示，但我确实需要在“将二进制文件与库链接”中添加项目。这是此设置在我的机器上的外观，其中“SBJSONTestWorkspaces”是我要使用 SBJson 的项目的名称：

![在此处输入图像描述](../Images/393e4b8a387504dc955b162337e0265c.png)

以下是有关工作区的一些文档：

[http://developer.apple.com/library/mac/#featuredarticles/XcodeConcepts/Concept-Workspace.html#//apple_ref/doc/uid/TP40009328-CH7](http://developer.apple.com/library/mac/#featuredarticles/XcodeConcepts/Concept-Workspace.html#//apple_ref/doc/uid/TP40009328-CH7)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-13T17:01:41.777

由于您的项目是在 ARC 中创建的，因此 xcode 期望每个文件都与 ARC 兼容。而 SBJSON 文件不得符合 ARC 标准。您需要从 ARC 检查中排除这些文件。这可以通过选择不需要检查 ARC 的文件来完成。如果您转到项目设置 -> 构建阶段 -> 编译源，则可以完成此操作。会有您的 SBJSON 文件，您可以在此处添加不同的标志。要忽略 ARC 检查，您必须添加“-fobjc-arc”标志。您可以通过双击一个文件，弹出一个新窗口并在该窗口中添加上述标志来执行此操作。

# android - 在 Android 中尝试从 SQLite 数据库查询数据时出现“没有这样的表”错误

> ID：14305597
> 
> 赞同：1
> 
> 时间：2013-01-13T16:38:27.343
> 
> 标签：android, sqlite

我在一个 android 应用程序（产品、列表和项目）中有一个包含 3 个表的数据库。但是，当尝试进行查询时，我得到异常“没有这样的表项”。

我的 DatabaseHelper 的代码：

```
@Override
    public void onCreate(SQLiteDatabase db)
    {

        db.execSQL("CREATE TABLE lista(" +
                    "id INT AUTO_INCREMENT, " +
                    "nome VARCHAR(50), " +
                    "data VARCHAR(10), " +
                    "total REAL, " +
                    "primary key(id));");

        db.execSQL("CREATE TABLE items( " +
                    "id INT AUTO_INCREMENT, " +
                    "lista INT, " +
                    "produto INT, " +
                    "valor REAL, " +
                    "primary key(id));");

        db.execSQL("CREATE TABLE produtos(" +
                "id INT AUTO_INCREMENT, " +
                "descricao VARCHAR(100), " +                
                "primary key(id));");
    } 
```

我在这部分代码中得到了异常：

```
String sql = "SELECT i.id, i.valor, i.lista, p.descricao " +
                       "FROM items i " +
                       "INNER JOIN produtos p " +
                       "ON (i.produto = p.id) " +
                       "WHERE (items.lista = ?)";

        try
        {
            Cursor cursor = banco.rawQuery(sql, new String[]{String.valueOf(lista)}); //the exception
            cursor.moveToFirst();
            while(!cursor.isAfterLast())
            {
                Item i = new Item();
                i.setId(cursor.getInt(0));
                i.setValor(cursor.getDouble(1));
                i.setLista(cursor.getInt(2));
                i.setDescricao(cursor.getString(3));
                l.add(i);
                cursor.moveToNext();
            }
            cursor.close();
        }
        catch(SQLiteException e)
        {
            Toast.makeText(contexto, e.getMessage(), 100000).show();
        } 
```

我创建了另外两个表，并且在查询时对它们没有任何问题，我认为错误在查询字符串中，但我不知道为什么。

奇怪的是，显然我可以在这个表中插入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T16:41:56.550

尝试使用“WHERE (i.lista = ?)”

您为“项目”分配了别名。

# actionscript-3 - 如何在动态文本上嵌入字体

> ID：14305599
> 
> 赞同：0
> 
> 时间：2013-01-13T16:38:40.733
> 
> 标签：actionscript-3, flash, fonts

> 字体应该嵌入任何可以在运行时编辑的文本，而不是具有“使用设备字体”设置的文本。使用文本 > 字体嵌入命令嵌入字体。

做过的研究：

*   [ReferenceError：错误 #1056 - 实例名称错误](https://stackoverflow.com/questions/2240011/referenceerror-error-1056-instance-name-error)

上面的链接为问题提供了一个很好的方向（在答案中）：

片段：

> ...如果您尝试将变量动态分配给自然不接受文本字段等对象的对象，也可能会出现此错误。

所以我必须点击包含文本的movieclip，然后点击文本并嵌入它。

但是当我单击所有必需的符号并重新运行电影时，它仍然会出现错误？

这可能很简单，但我不知道如何使嵌入“坚持”，因为每次我重试嵌入时，选择都消失了......？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T17:47:02.560

您使用的是什么版本的 Flash IDE？在 Flash CS 6 中，当您在文本字段中嵌入字体时，它会出现在 fla 文件的库 (F11) 中。您可以在此处编辑字符范围，并且此 fla 文件中的所有文本字段都将使用它，因此您不必为每个字段嵌入字体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-21T15:09:57.217

在 Animate 中打开 FLA 文件后，通过执行以下操作之一打开“字体嵌入”对话框：

选择文本 > 字体嵌入。

从“库”面板选项菜单中，选择“添加字体”。

右键单击库面板树视图中的空白区域，然后选择新建字体。

在文本属性检查器中，单击嵌入按钮。

[https://helpx.adobe.com/animate/using/embed-fonts-consistent-text-appearance.html](https://helpx.adobe.com/animate/using/embed-fonts-consistent-text-appearance.html)

# python - 在 Python 中过滤 SQL 语句以防止恶意注入

> ID：14305606
> 
> 赞同：3
> 
> 时间：2013-01-13T16:39:16.737
> 
> 标签：python, postgresql, sqlalchemy, sql-injection

希望允许客户端应用程序对我们的数据库执行 SQL 查询。

查询将是对数据的请求，客户端永远不能修改数据。

有没有办法让客户端发送一条 SQL 语句，然后筛选它是否有恶意注入，然后通过数据库传递它？

我们正在针对 PostgreSQL 数据库使用 Python 的 SQLAlchemy 库。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T16:42:24.100

比尝试解释恶意查询更简单的选择是创建具有只读权限的 db 用户。然后，您的最终用户将使用该帐户运行 SELECT 查询。您无需担心恶意插入和删除，因为不允许“写入”查询。您还可以进一步修改权限，以不允许访问您不希望客户看到的数据等。

有关创建“只读”用户的一些信息，请参阅此[SO 问题和答案。](https://stackoverflow.com/questions/760210/how-do-you-create-a-read-only-user-in-postgresql)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T17:03:00.557

执行sql查询时使用prepared statement，使用`sqlalchemy.sql.expression.text`方法

```
from sqlalchemy.sql.expression import text

t = text("SELECT * FROM users WHERE id=:user_id")
result = connection.execute(t, user_id=12) 
```

有关方法的完整介绍，请参阅[sqlalchemy 文档](http://docs.sqlalchemy.org/en/rel_0_8/core/expression_api.html#sqlalchemy.sql.expression.text)`text`。

但是即使 DBA 阻止从用户创建和写入角色，保护您的应用程序免受用户定义的 sql 语句的影响也是非常困难的。考虑在开始之前阅读[这篇博文](http://bernardodamele.blogspot.com/2009/01/command-execution-with-postgresql-udf.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-24T11:27:03.167

您始终可以在从属模式下使用仅接受读取连接的第二个数据库来改进您的安全系统。

[https://www.postgresql.org/docs/9.2/static/high-availability.html](https://www.postgresql.org/docs/9.2/static/high-availability.html)

此策略允许您将数据库以读取模式扩展两、三或四倍。

# php - 不使用 order by 子句对结果进行排序

> ID：14305611
> 
> 赞同：1
> 
> 时间：2013-01-13T16:40:01.460
> 
> 标签：php

我参加了一次面试，面试官问我一个问题，我们如何在不使用 PHP 中的 ORDER BY 子句的情况下对 MySQL 结果进行排序？有可能吗？如果答案是肯定的，那怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T16:43:59.910

一种可能性是将值加载到 PHP 中的数组中，然后使用 PHP 中的某种排序算法对数组进行排序。这有时会让你使用比 MySQL 提供给你的更复杂的排序算法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T16:49:07.703

您需要先将结果[作为数组](http://php.net/manual/en/mysqli-result.fetch-array.php)获取。

# c++ - 二叉树和传递参数

> ID：14305613
> 
> 赞同：0
> 
> 时间：2013-01-13T16:40:11.010
> 
> 标签：c++, function, arguments

我在 C++ 中有一个二叉树程序，它解析一串字符，然后根据它形成一棵二叉树。我在将参数传输到我的函数时遇到问题。我尝试阅读有关将参数传递给 c 中的函数的教程，并更改了我的代码，但它似乎不起作用。我希望有人帮助我修复参数的传递。

标题：

```
 #define NULL 0

 struct TreeEl {

   char inf;
struct TreeEl * st, * dr;

};

typedef struct TreeEl root;

root* add(root *r, char st[], int &pos, int &n);
root* create(root *r, char st[100], int n);

void visit(root*);
void preorder(root *r, void visit(root*));
void inorder(root *r, void visit(root*));
void postorder(root *r, void visit(root*)); 
```

和代码：

```
 #include "arbore_binar.h"
#include <stdio.h>

using namespace std;

void visit(root *r)
    {

    printf("Node %c",r->inf);

    }

root* add(root *r, char st[], int &pos, int &n)
{

int done=0;

do
{
    pos++;
    printf(" procesing character:,%c \n",st[pos]);
    switch (st[pos])
    {
        case '(':
        {
            add(r->st, st, pos, n);
            break;
        }
        case ')':
        {
            done=1;
            break;
        }
        case ',':
        {
            add(r->dr, st, pos, n);
            break;
        }
        case '$':
        {
            if (st[pos+1]==',')
                done=1;
            if (st[pos+1]==')')
                done=1;
            break;
        }
        default:
        {
            if ((st[pos]>=65)&&(st[pos]<=90))
             {
                 printf(" Added: ,%c \n" ,st[pos]);

                 root *p;
                 p = new root;
                 p->inf=st[pos];
                 p->st=NULL;
                 p->dr=NULL;
                 r=p;
                 if (st[pos+1]==',')
                    done=1;
                 if (st[pos+1]==')')

                    done=1;

             }
             else
                printf("Error,unknown character: %d ",st[pos]);
        }
    }
} while ((done==0)&&(pos<n));
return r;
}

root* create(root *r, char st[100], int n)
{

    int pos=-1;
    root* nod = add(r, st, pos, n);
    return nod;
}
void preorder(root *v, void visit(root*))
{
  if (v == NULL)

      return;

else {
visit(v);
preorder(v->st, visit);
preorder(v->dr, visit);
}
}
void inorder(root *v, void visit(root*))
{
  if (v == NULL) return;
else {
inorder(v->st, visit);
visit(v);
inorder(v->dr, visit);
}
}
void postorder(root *v, void visit(root*))
{
  if (v == NULL) return;
else {
postorder(v->st, visit);
postorder(v->dr, visit);
visit(v);
}
}

void print(root* x)
{
    printf("%c" , x->inf ,"  " );
}

int main()
{
//char a[100] = "A(B(J,$),C(X,D(E,F($,Y))))";
//char a[100] = "A(B,C(X,D(E,F($,Y))))";
char a[100] = "A(B(C(M,$),D),E(F(X,$),G($,Y)))";
root *r;
r=NULL;
r=create(r, a, 31);

printf("Preorder traversal:" );
preorder(r, print);
printf("\n");
printf("Inorder traversal: ");
inorder(r, print);
printf("\n");
printf("Postorder traversal: ");
postorder 
```

（r，打印）；printf("\n");

获取字符（）；返回0；

```
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T16:47:24.810

请记住，C 按值传递指针。因此，类似代码`root *p;r=p;`不会修改函数外部存在的 root 的值。

在要重新分配的函数中`r`，您可能希望将其作为指向指针的指针传递，或者`root **r`. 您可以调用诸如 create(&r, a, 31); 之类的函数。将指针变量的地址作为指向指针的指针传递给函数`r`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T16:48:04.187

您面临的麻烦与通过按值和按引用语义传递参数有关。在 C 中，**所有变量都是按值传递的**。指针通常被称为“按引用”传递，但事实并非如此。相反，它们能够以类似于引用语义的方式修改其他值。

问题是你有 add 功能：

```
void create(root *r, char st[100], int n); 
```

`create`将 a`root*`作为第一个参数。因此，它可以更改此参数指向的内存。函数执行后，所指向的内存`r`可能不同，但`r`本身会具有相同的值——即指针变量`r`总是指向同一个地方。

为什么这是相关的？查看您的`main`函数并注意 的初始`r`值为`NULL`。传递`r`给`create`函数后，`r` **必须仍然是** `NULL`. 因此，您根本没有指向树的指针！

这对您来说可能不是这种情况，因为在函数中，您为（特别是 line ）`create`分配了一个值。不幸的是，该行仅修改 的*函数本地副本*，因此更改不会反映在.`r``r=p`*`r``main`*

 *你怎么能解决这个问题？与其尝试修改函数内的`main`-local 副本，不如将函数更改为 return而不是. 然后，在 中，将您对函数的调用更改为：`r``create``create``root*``void``main`

```
r = create(r, a, 31); 
```

如果`create`返回一个指向树根的指针，您现在将能够在任何地方维护对您的树的引用，并且它应该与您的其他函数一起正常工作。*

# python - 饼图中楔形文字的细粒度调整

> ID：14305621
> 
> 赞同：0
> 
> 时间：2013-01-13T16:40:47.013
> 
> 标签：python, matplotlib, position, pie-chart

我有一个带有三个楔形的饼图。我正在使用`autopct`设置显示楔形本身中每个楔形的百分比值。其中一个楔子很小，楔子的内部文本与楔子的边缘重叠，看起来不太好。

我想将内部文本从楔形的中心移动到楔形的外边缘，因为文本有更多空间。但文本仍应完全位于楔形内部。`pctdistance`这可以通过调整值同时用于所有楔形的内部文本。但是，我只想为一个楔子做这件事。

我可以调整单个楔形的内部文本相对于楔形的位置，而不必使用指定绝对坐标[`Text.set_position`](http://matplotlib.org/api/artist_api.html#matplotlib.text.Text.set_position)吗？

# gwt - runTarget 缺失或无效 - 在 GWT Maven 项目上

> ID：14305624
> 
> 赞同：1
> 
> 时间：2013-01-13T16:41:25.537
> 
> 标签：gwt, maven

当尝试从 maven 命令行运行我们的 GWT 应用程序时，我收到以下错误：

目标 org.codehaus.mojo:gwt-maven-plugin:2.4.0:run 的参数“runTarget”丢失或无效。

但是，这是 pom.xml 中的以下内容：

```
<plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>gwt-maven-plugin</artifactId>
            <!-- <version>2.5.0</version> 2.1.0-1 -->
            <version>${gwt.version}</version>
            <configuration>
                <configuration>
                    <runTarget>com.magick.webtrader/Webtrader.html</runTarget>
                    <buildOutputDirectory>${project.build.outputDirectory}</buildOutputDirectory>
                    <generateDirectory>${project.build.directory}/generated-sources/gwt</generateDirectory>
                    <hostedWebapp>${webappDirectory}</hostedWebapp>
                    <copyWebApp>true</copyWebApp>
                    <draftCompile>true</draftCompile>
                    <webXml>${basedir}/war/WEB-INF/web.xml</webXml>
                </configuration>

            </configuration>

            <executions>
                <execution>
                    <goals>
                        <goal>compile</goal>
                        <goal>test</goal>
                        <goal>generateAsync</goal>
                    </goals>
                </execution>
            </executions>
        </plugin> 
```

我做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T06:53:30.013

我认为您不需要将这些`<Configuration>`元素嵌套`<Configuration>`在另一个`<Configuration>`. 尝试解决这个问题，看看它是否有效。`<buildOutputDirectory>`附带说明一下，如果您仍然使用默认值，则不需要明确指定参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T16:58:18.397

如果您使用 eclipse 和 m2e - 在 pom 编辑器中打开 pom 文件，它将在您的 POM.xml 中指出错误。

**`Conifugration`**您的标签中有一个这样的错误。确保删除额外的配置标签。

还要始终检查您的 pom.xml wrt 以从 GWT 团队中取样 -

1)[验证](http://code.google.com/p/google-web-toolkit/source/browse/#svn/trunk/samples/validation)

2) [Dynatablerf](http://code.google.com/p/google-web-toolkit/source/browse/#svn/trunk/samples/dynatablerf)

3)[移动网络应用](http://code.google.com/p/google-web-toolkit/source/browse/#svn/trunk/samples/mobilewebapp)

# ruby - 安装 vmc 时出错，vmc 需要 multi_json (~> 1.4.0, runtime)

> ID：14305630
> 
> 赞同：3
> 
> 时间：2013-01-13T16:41:58.007
> 
> 标签：ruby, vmc

我正在尝试在我的 mac（10.8.2）上安装云代工工具：vmc。在终端中，我输入了这个命令，但得到了错误：

> 错误：安装 vmc 时出错：vmc 需要 multi_json（~> 1.4.0，运行时）*

然后我检查了我的 mac 中 Multi_json 的版本，它似乎已经安装了 1.5.0：

```
$ gem list multi_json
*** LOCAL GEMS ***
multi_json (1.5.0)* 
```

我不知道为什么它会在 vmc install 中出现错误，有人遇到同样的问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T17:12:54.353

`~> 1.4.0`表示 >= 1.4.0 和 < 1.5.0

由于没有 > 1.4.0 只需安装 1.4.0 版本

`sudo gem install multi_json --version 1.4.0`

请注意，这可能会使其他一些宝石崩溃。在系统范围内安装 gems 很糟糕，但我猜你不是在用 ruby​​ 开发，对吧？所以你应该没问题

# jquery - 为每个滑块 DIV 生成 Swipe JS 滑块

> ID：14305631
> 
> 赞同：3
> 
> 时间：2013-01-13T16:42:02.370
> 
> 标签：jquery, slider, swipe

我首先要说我不是程序员，我是设计师。我对 jQuery 的了解有限，尽管经过足够的修补，我经常可以得到我需要工作的东西。所以请容忍我在这里。

我正在制作一个网站（可能由 Wordpress 提供支持），该网站将在单个页面上有多个滑块。我已经设法让 Swipe JS 在一个滑块上正常工作，但我需要一些代码来搜索我所有的滑块 DIV 并为它们创建一个新的 Swipe 对象。

我用于一个滑块的代码是“var slider = new Swipe(document.getElementById('slider'));” 但这不适用于多个滑块。

HTML 的结构如下所示：

```
<div class="slider">
    <ul>
        <li style="display:block;"><img src="01.jpg"></li>
        <li style="display:none;"><img src="02.jpg"></li>
        <li style="display:none;"><img src="03.jpg"></li>
    </ul>

    <a class="prev" href="#" onclick='slider.prev();return false;'>prev</a> 
    <a class="next" href="#" onclick='slider.next();return false;'>next</a>
</div> 
```

我会很感激你们能提供的任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T16:50:55.990

如果你想要所有这样的滑动

```
var swipes = []
$('.slider').each(function(i, obj) {
        swipes[i] = new Swipe(obj);
    }); 
```

您只需要为所有滑动分配`class="slider"`属性。

```
<div class="slider" id="slider_1">...</div>
<div class="slider" id="slider_xy">...</div>
<div class="slider" id="foobar">...</div> 
```

无论 ID 如何，它都应该起作用，因为我们选择了具有特定类的元素。

您可以使用访问每次滑动

```
swipes[1].prev();
swipes[9].prev(); 
```

数字要求您有多少次滑动，但请记住：滑动否。1将是`swipes[0]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T12:33:22.260

@tylorreimer

我将 swipe.js 用于 ajax 添加的动态内容。我所做的只是为每个添加的滑块添加一个计数器。所以对于每个 next 和 prevbuttons 我做了一个`onclick="swipes[swipeSliderCounter].next()`

顺便说一句，我以 mercen 的方式初始化滑块。

```
$('.slider').each(function(i, obj) {
        swipes[i] = new Swipe(obj);
    }); 
```

# jquery - 如何在 ajax 调用时将变量传递给 ajax 成功函数？

> ID：14305641
> 
> 赞同：0
> 
> 时间：2013-01-13T16:42:39.113
> 
> 标签：jquery, ajax, variables, scope

所以这是我的 ajax 调用（几乎是标准的 jQuery，但使用的是 couchdb jquery 库，[http](http://daleharvey.github.com/jquery.couch.js/) ://daleharvey.github.com/jquery.couch.js/ ）：

```
var stuff = "some stuff";
$.couch.db("test_db").create({
    success: enyo.bind(this, function (data) {
        console.log(stuff);
    })
});
stuff = "a change in stuff"; 
```

而且我希望 console.log 的输出是“一些东西”而不是“东西的变化”。

这样做的方法越多越好，因为我认为某些方法可能需要我不使用“enyo.bind”（[http://enyojs.com/](http://enyojs.com/)），但也许我可以用这些方法完成同样的事情。 .

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T16:50:43.337

您可以为它使用一个函数。

```
var create = function (stuff) {
  $.couch.db("test_db").create({
    success: enyo.bind(this, function (data) {
      console.log(stuff);
    })
  });
};

create(stuff); 
```

或者，它相当于一个匿名函数。

```
!function(stuff) {
  $.couch.db("test_db").create({
    success: enyo.bind(this, function (data) {
      console.log(stuff);
    })
  });
}(stuff); 
```

请参阅[函数前的感叹号有什么作用？](https://stackoverflow.com/q/3755606/417685)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T16:44:12.547

您可以通过执行以下操作“锚定”一个变量：

```
(function(varname) {
    // code that relies on varname
})(varname); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T16:48:21.873

```
var stuff = "some stuff";
var callback = (function(stuff){ 
    return function(data){ console.log( stuff ) }; 
}(stuff));

$.couch.db("test_db").create({
    success: enyo.bind(this,  callback );
});
stuff = "a change in stuff"; 
```

# android - Google Drive API 不允许使用的身份验证方法

> ID：14305648
> 
> 赞同：1
> 
> 时间：2013-01-13T16:42:58.473
> 
> 标签：android, google-api, google-drive-api

我正在使用`google-api-client-android2-1.10.3-beta.jar`.

我有一段代码，半年前就可以使用。就在最近，当我再次尝试运行它们时，它们不再起作用。我收到以下异常。

```
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
{
  "code": 403,
  "errors": [
    {
      "domain": "global",
      "location": "Authorization",
      "locationType": "header",
      "message": "The authentication method used is not allowed.",
      "reason": "authenticationMethod"
    }
  ],
  "message": "The authentication method used is not allowed."
} 
```

期间抛出异常

```
// request = service.files().list().setQ("title contains 'jstock-" + Utils.getJStockUUID().substring(0, 19) + "' and trashed = false");
FileList files = request.execute(); 
```

我的一段代码，基本上是执行请求

**`https://www.googleapis.com/drive/v2/files?q=title+contains+%27jstock-fe78440e-e0fe-4efb-%27+and+trashed+%3d+false`**，通过使用来自的 AuthToken`com.google.api.client.googleapis.extensions.android2.auth.GoogleAccountManager`

我在 oAuth 2.0 游乐场尝试请求。它工作正常。但是，我不确定为什么我的半年前有效的代码不再有效。

## 这是用于获取 AuthToken 的代码

```
package com.jstock.cloud;

import java.io.IOException;

import android.accounts.Account;
import android.accounts.AccountManager;
import android.accounts.AccountManagerCallback;
import android.accounts.AccountManagerFuture;
import android.accounts.AuthenticatorException;
import android.accounts.OperationCanceledException;
import android.app.Activity;
import android.app.ProgressDialog;
import android.content.Intent;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;

import com.google.api.client.googleapis.extensions.android2.auth.GoogleAccountManager;
import com.jstock.engine.Subject;
import com.jstock.gui.JStockApplication;
import com.jstock.gui.Preferences;
import com.jstock.gui.R;

// The code is picked from http://code.google.com/p/google-api-java-client/source/browse/tasks-android-sample/src/main/java/com/google/api/services/samples/tasks/android/TasksSample.java?repo=samples
public class LoginManager extends Subject<LoginManager, String> {
    public LoginManager(Activity activity) {
        // TODO : Need to revise API key.
        ClientCredentials.errorIfNotSpecified();

        // Noted, the passed in activity, should override the following method.
        // protected void onActivityResult(int requestCode, int resultCode, Intent data)
        // In the overriden method, it should call LoginManager's onActivityResult.
        this.activity = activity;

        dialog = new ProgressDialog(activity);
        dialog.setMessage(activity.getString(R.string.login));

        // TODO : #12 Decide usage of SharedPreferences over JStockOptions        
        authToken = Preferences.getAuthTOken();
        accountManager = new GoogleAccountManager(JStockApplication.instance());
        accountName = Preferences.getAccountName();
    }

    public void gotAccount() {
        Account account = accountManager.getAccountByName(accountName);
        if (account == null) {
            chooseAccount();
            return;
        }
        if (authToken != null) {
            onAuthToken(authToken);
            return;
        }
        dialog.show();
        accountManager.getAccountManager().getAuthToken(account, AUTH_TOKEN_TYPE, true, new AccountManagerCallback<Bundle>() {
            public void run(AccountManagerFuture<Bundle> future) {
                try {
                    Bundle bundle = future.getResult();
                    if (bundle.containsKey(AccountManager.KEY_INTENT)) {
                        Intent intent = bundle.getParcelable(AccountManager.KEY_INTENT);
                        intent.setFlags(intent.getFlags() & ~Intent.FLAG_ACTIVITY_NEW_TASK);
                        activity.startActivityForResult(intent, REQUEST_AUTHENTICATE);
                        return;
                    } else if (bundle.containsKey(AccountManager.KEY_AUTHTOKEN)) {
                        final String authToken = bundle.getString(AccountManager.KEY_AUTHTOKEN);
                        setAuthToken(authToken);
                        onAuthToken(authToken);
                        return;
                    }
                } catch (Exception e) {
                    Log.e(TAG, e.getMessage(), e);
                }
                onAuthToken(null);
            }
        }, null);
    }

    public void chooseAccount() {
        dialog.show();
        accountManager.getAccountManager().getAuthTokenByFeatures(GoogleAccountManager.ACCOUNT_TYPE,
            AUTH_TOKEN_TYPE,
            null,
            activity,
            null,
            null,
            new AccountManagerCallback<Bundle>() {
                public void run(AccountManagerFuture<Bundle> future) {
                    Bundle bundle;
                    try {
                        bundle = future.getResult();
                        setAccountName(bundle.getString(AccountManager.KEY_ACCOUNT_NAME));
                        final String authToken = bundle.getString(AccountManager.KEY_AUTHTOKEN);
                        setAuthToken(authToken);
                        onAuthToken(authToken);
                        return;
                    } catch (OperationCanceledException e) {
                        // user canceled
                    } catch (AuthenticatorException e) {
                        Log.e(TAG, e.getMessage(), e);
                    } catch (IOException e) {
                        Log.e(TAG, e.getMessage(), e);
                    }
                    onAuthToken(null);
                }
            },
            null);
    }

    private void setAccountName(String accountName) {
        // TODO : #12 Decide usage of SharedPreferences over JStockOptions
        Preferences.setAccountName(accountName);
        this.accountName = accountName;
    }

    private void setAuthToken(String authToken) {
        // TODO : #12 Decide usage of SharedPreferences over JStockOptions
        Preferences.setAuthToken(authToken);
        this.authToken = authToken;
    }

    // To be consumed by this.activity.
    public void onActivityResult(int requestCode, int resultCode, Intent data) {
        switch (requestCode) {
        case REQUEST_AUTHENTICATE:
            if (resultCode == Activity.RESULT_OK) {
                gotAccount();
            } else {
                chooseAccount();
            }
            break;
        }
    }

    private void onAuthToken(final String authToken) {
        // Need to run on AsyncTask. This method is currently executed by main
        // thread, as we are using null in the last parameter of 
        // getAuthTokenByFeatures and getAuthToken. I try not to notify through
        // main thread, as I believe callers will most probably perform non-UI
        // task.
        new AsyncTask<Void, Void, Void>() {

            @Override
            protected void onPreExecute() {
                dialog.dismiss();
            } 

            @Override
            protected Void doInBackground(Void... arg0) {
                // authToken possible null, which indicates failure.
                LoginManager.this.notify(LoginManager.this, authToken);
                return null;
            }

            @Override
            protected void onPostExecute(Void result) {
            }            
        }.execute();
    }

    public void invalidateAuthToken() {
        // TODO : #12 Decide usage of SharedPreferences over JStockOptions        
        accountManager.invalidateAuthToken(authToken);
        authToken = null;
        Preferences.removeAuthToken();
    }

    private static final String AUTH_TOKEN_TYPE = "oauth2:https://www.googleapis.com/auth/drive";
    private static final int REQUEST_AUTHENTICATE = 0;
    private final GoogleAccountManager accountManager;
    private final Activity activity;
    private String accountName;
    private final ProgressDialog dialog;
    private String authToken;
    private static final String TAG = "LoginManager";
} 
```

## 这是用于执行 API 请求的代码

```
package com.jstock.cloud;

import java.io.IOException;
import java.util.ArrayList;
import java.util.LinkedHashMap;
import java.util.List;
import java.util.Map;
import java.util.regex.Matcher;
import java.util.regex.Pattern;

import android.util.Log;

import com.google.api.client.googleapis.auth.oauth2.GoogleCredential;
import com.google.api.client.googleapis.services.GoogleKeyInitializer;
import com.google.api.client.http.HttpTransport;
import com.google.api.client.json.JsonFactory;
import com.google.api.client.json.gson.GsonFactory;
import com.google.api.client.extensions.android2.AndroidHttp;
import com.google.api.services.drive.Drive;
import com.google.api.services.drive.Drive.Files;
import com.google.api.services.drive.model.File;
import com.google.api.services.drive.model.FileList;
import com.jstock.gui.Utils;

public class CloudFile {
    public final java.io.File file;
    public final long checksum;
    public final long date;
    public final int version;
    private CloudFile(java.io.File file, long checksum, long date, int version) {
        this.file = file;
        this.checksum = checksum;
        this.date = date;
        this.version = version;
    }

    public static CloudFile newInstance(java.io.File file, long checksum, long date, int version) {
        return new CloudFile(file, checksum, date, version);
    }

    public static CloudFile loadFromGoogleDrive(String authToken) {
        final HttpTransport transport = AndroidHttp.newCompatibleTransport();
        final JsonFactory jsonFactory = new GsonFactory();
        GoogleCredential credential = new GoogleCredential();
        Log.i("CHEOK", "authToken = " + authToken);
        credential.setAccessToken(authToken);
        Drive service = new Drive.Builder(transport, jsonFactory, credential)
            .setApplicationName(Utils.getApplicationName())
            .setJsonHttpRequestInitializer(new GoogleKeyInitializer(ClientCredentials.KEY))
            .build();
        List<File> files = retrieveAllJStockFiles(service);

        long checksum = 0;
        long date = 0;
        int version = 0;  
        File file = null;

        for (File _file : files) {
            file = _file;
            // Use title, not filename.
            final String title = file.getTitle();
            final String downloadUrl = file.getDownloadUrl();
            if (title == null || downloadUrl == null) {
                // Do we really need to perform null checking?
                continue;
            }

            // Retrieve checksum, date and version information from filename.
            final Matcher matcher = googleDocTitlePattern.matcher(title);
            String _checksum = null;
            String _date = null;
            String _version = null;
            if (matcher.find()){
                if (matcher.groupCount() == 3) {
                    _checksum = matcher.group(1);
                    _date = matcher.group(2);
                    _version = matcher.group(3);
                }
            }
            if (_checksum == null || _date == null || _version == null) {
                continue;
            }

            try {
                checksum = Long.parseLong(_checksum);
                date = Long.parseLong(_date);
                version = Integer.parseInt(_version);
            } catch (NumberFormatException ex) {
                Log.e(TAG, "", ex);
                continue;
            } 
        }   // for

        if (file == null) {
            return null;
        }

        final java.io.File temp = Utils.createTempFileOnExternalCacheDir(Utils.getJStockUUID(), ".zip");
        if (temp == null) {
            return null;
        }       
        // Delete temp file when program exits.
        temp.deleteOnExit();
        // Delete temp file when program exits.

        Map<String, String> headers = new LinkedHashMap<String, String>();
        headers.put("Authorization", "OAuth " + authToken);
        java.io.File downloadedFile = Utils.downloadAsTempFile(file.getDownloadUrl(), headers, temp);
        if (downloadedFile == null) {
            return null;
        }
        return CloudFile.newInstance(downloadedFile, checksum, date, version);
    }

    /**
     * Retrieve a list of File resources.
     *
     * @param service Drive API service instance.
     * @return List of File resources.
     */
    private static List<File> retrieveAllJStockFiles(Drive service) {
        List<File> result = new ArrayList<File>();
        Files.List request = null;
        try {
            // Not sure why. In oAuth 2 playground, I cannot use full JStock
            // UUID. Perhaps it places restriction on length of query.
            // https://www.googleapis.com/drive/v2/files?q=title+contains+%27jstock-fe78440e-e0fe-4efb-%27+and+trashed+%3d+false
            //request = service.files().list();
            request = service.files().list().setQ("title contains 'jstock-" + Utils.getJStockUUID().substring(0, 19) + "' and trashed = false");
        } catch (IOException e) {
            Log.e(TAG, "", e);
            return result;
        }

        do {
            try {
                FileList files = request.execute();

                result.addAll(files.getItems());
                request.setPageToken(files.getNextPageToken());
            } catch (IOException e) {
                Log.e(TAG, "", e);
                request.setPageToken(null);
            }
        } while (request.getPageToken() != null && request.getPageToken().length() > 0);

        return result;
    } 

    // http://stackoverflow.com/questions/1360113/is-java-regex-thread-safe
    private static final Pattern googleDocTitlePattern = Pattern.compile("jstock-" + Utils.getJStockUUID() +  "-checksum=([0-9]+)-date=([0-9]+)-version=([0-9]+)\\.zip", Pattern.CASE_INSENSITIVE);    
    private static final String TAG = "CloudFile";
} 
```

这是我们执行 API 调用的方式

```
// authToken is String, which obtained from LoginManager.
CloudFile.loadFromGoogleDrive(authToken); 
```

知道为什么会抛出上述异常吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-09T10:58:38.873

我相信您正在使用 API 密钥来获取访问令牌。相反，您需要在请求令牌时传递您的 clientID/clientSecret。也就是说，如果您不使用 Google PlayServices。

了解如何遵循[OAuth2.0 授权代码流程](http://code.google.com/p/google-api-java-client/wiki/OAuth2#Authorization_Code_Flow)并使用[GoogleAuthorizationCodeFlow](http://javadoc.google-api-java-client.googlecode.com/hg/1.16.0-rc/com/google/api/client/googleapis/auth/oauth2/GoogleAuthorizationCodeFlow.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-09T10:08:22.590

Google Play 服务可能是一种新的 Google Drive 身份验证方法，但它不一定比旧方法更好。

根据这篇文章[How setup Google Drive Credentials within Android App?](https://stackoverflow.com/questions/12405252/how-setup-google-drive-credentials-within-android-app) 它仅适用于 SDK 11 (Honeycomb)。

不知道为什么，但我确认这是真的。

顺便说一句，使用最新版本的驱动 SDK (google-api-services-drive-v2-rev97-1.16.0-rc.jar) 有必要以这种方式初始化驱动对象(setJsonHttpRequestInitializer 不再存在)

```
//request auth by AccountManager
AccountManager mgr = AccountManager.get(mContext);
String t = obtainToken(mgr.getAuthToken(getAccount(), "oauth2:"+DriveScopes.DRIVE, null, activity, callback, null));

if (t != null) {//refresh the token
    AccountManager.get(mContext).invalidateAuthToken("com.google", t);
    t = obtainToken(mgr.getAuthToken(getAccount(), "oauth2:"+DriveScopes.DRIVE, null, activity, callback, null));
}

//token is actually provided in the initializer
//credential = new GoogleCredential().setAccessToken(t);

final String token = t;

// prepare drive
if (drive == null) {
    drive = new Drive.Builder(new NetHttpTransport(), new JacksonFactory(), null)
    .setGoogleClientRequestInitializer(new GoogleClientRequestInitializer() {

        @Override
        public void initialize(AbstractGoogleClientRequest<?> request) throws IOException {
            DriveRequest driveRequest = (DriveRequest) request;
            driveRequest.setPrettyPrint(true);
            driveRequest.setKey(SIMPLE_API_ACCESS_KEY);
            driveRequest.setOauthToken(token);
        }
    })
    .build();
} 
```

# session - 不能对多个 GWT 应用程序使用相同的 cookie

> ID：14305654
> 
> 赞同：1
> 
> 时间：2013-01-13T16:43:20.930
> 
> 标签：session, gwt, cookies

我正在开发一个应用程序网络，我想向我的用户提供多个应用程序，他们只需注册/登录一次并使用相同的登录名使用所有应用程序。

为此，我创建了一个 cookie，其中存储了用户的会话 ID（他在登录时收到）。每次用户打开应用程序时，启动模块都会尝试查找 cookie 并向服务器发送请求以检查该会话是否仍然有效。

当我在本地开发机器上测试时，一切正常，但在我的预测试服务器上，我在一个应用程序中创建的 cookie 没有被另一个应用程序找到。

我的测试服务器是 Tomcat 7。通过 .war-upload 部署的应用程序

Cookie 最初是使用以下命令创建的：`Cookies.setCookie("WebsiteName", result.getSessionId());`

每一个帮助表示赞赏！

**编辑 1**

我在让一切按我想要的方式工作方面做得更进一步。

本来我并没有实现HttpServlet Session，而是一个自己的Session管理系统，在cookie中存储了我自己的Session ID。检查服务器日志，我发现如果两个应用程序都部署在子路径下，则应用程序 1 的会话输出如下：

```
Test HttpSession ID: 34446C7F3F345F74A0AAB5E292A47021 | Own Session ID: 3a25884692c499d5e72f07bb2b214a40f63f5a4a842852c58f30e1b46cf7bee7bc8a3394a9fe83a04ac4e1dcb4069dbca95a8f0001e012bc643934e08af35ec2 
```

对于应用程序 2

```
Test HttpSession ID: 429388DE8F0F76F877B077433FE16B66 | Own Session ID: 4e6b19a7621893de0cd0826b298ea4d8eb5ffecf4a7503f3274f729c2df28f4a1e9ce52179730b4139804f256591149fd712be76ad3afd87bade4f58aab4234f 
```

我怀疑 Tomcat 会为每个 Web 应用程序生成另一个会话 ID，因此我将主应用程序的 .war-File 重命名为`ROOT.war`并将其部署为 Root 应用程序。ROOT 应用程序的输出如下：

```
Test HttpSession ID: B9F2D14A716C3A06E328F58ED0995D95 | Own Session ID: 039b1c0cd2726dcfa1d8585da589e05984cfb6c971e083423d8456673837ea954ead42728aecf93be358ed13c757e3848ee3eb061a2253350c7d6dc1a14c970c 
```

并且对于 path 处的应用程序`root/webapp1/`：

```
Test HttpSession ID: BFD836C297B1BF8204D243387401CCA7 | Own Session ID: 039b1c0cd2726dcfa1d8585da589e05984cfb6c971e083423d8456673837ea954ead42728aecf93be358ed13c757e3848ee3eb061a2253350c7d6dc1a14c970c 
```

自己的会话 ID 存储在 cookie 中并由服务器检查。我的结论是，浏览器为我的域的每个子路径创建不同的 cookie。

向 Cookie 添加域名终于成功了，我很傻 :-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T17:55:35.750

你检查过日志吗？您在日志或开发人员工具控制台（萤火虫？）中遇到什么错误？详细的日志将有助于获得答案。

但是，如果您遵循正确的方法，您尝试的方法绝对是可能的。

**第 1 步**：创建会话

```
 void createSession(String Username) 
 {
    getThreadLocalRequest().getSession().setAttribute("Username", Username);
 } 
```

**第 2 步**：正确设置 cookie

```
String sessionID = /*(Get sessionID from server's response to your login request.)*/;
final long DURATION = 1000 * 60 * 60 * 24 * 14; 
Date expires = new Date(System.currentTimeMillis() + DURATION);
Cookies.setCookie("sessionId", sessionID, expires, null, "/", false); 
```

**第 3 步**：根据您设置的 cookie 和用户凭据验证用户会话。

```
boolean sessionAndUserValidFlag = false;
String sessionID = Cookies.getCookie("sessionId");
if ( sessionID != null )
{
   sessionAndUserValidFlag = validateSession(sessionID);
}
if (sessionAndUserValidFlag)
{
   //Continue login
}
else
{
  //Display Login Popup
} 
```

**您的 validateSession 方法可能看起来像这样**

```
public boolean validateSession(String sessionId)
{
    if (getThreadLocalRequest().getSession().getId.equals(sessionId))
    {
       if ( getThreadLocalRequest().getSession().getAttribute("UserName") != null )
       {
             return true;
       }
    }
    return false;
} 
```

# java - 泽西岛客户服务 - 关闭资源

> ID：14305655
> 
> 赞同：5
> 
> 时间：2013-01-13T16:43:32.273
> 
> 标签：java, spring, rest, jakarta-ee, jersey

我有一个服务类，它有许多对 Spring REST 服务进行 REST 调用的方法。每个方法如下所示：

```
public void getUser() {

        ClientConfig config = new DefaultClientConfig();
        Client client = Client.create(config);
        WebResource service = client.resource(RESOURCE_URL);

        // Get response as String
        String response = service.path("/addUser").accept(MediaType.TEXT_PLAIN)
                .get(String.class);

        return response;
    } 
```

以上工作正常，但我有点担心每次调用该方法时，都会创建 ClientConfig、Client 和 WebResource 的新实例。我更改上述内容并将 ClientConfig、Client 和 WebResource 作为类级实例变量会有什么副作用？即更改为：

```
ClientConfig config = new DefaultClientConfig();
Client client = Client.create(config);
WebResource service = client.resource(RESOURCE_URL);

public void getUser() {         

        // Get response as String
        String response = service.path("/addUser").accept(MediaType.TEXT_PLAIN)
                .get(String.class);

        return response;
    }

 public void getUserAccount() {         

        // Get response as String
        String response = service.path("/getUserAccount").accept(MediaType.TEXT_PLAIN)
                .get(String.class);

        return response;
    } 
```

如果多个用户同时调用不同的方法，上述方法是否可能会失败？构建上述内容的最佳方法是什么？

如果 Jersey 客户端方法有 close() 方法，我可以让它们保持原样，只关闭方法内的资源。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-13T17:07:05.173

从[泽西岛文档](http://jersey.java.net/nonav/apidocs/1.4/jersey/com/sun/jersey/api/client/package-summary.html)：

对于[客户](http://jersey.java.net/nonav/apidocs/1.4/jersey/com/sun/jersey/api/client/Client.html)：

> 创建 WebResource 实例的方法是线程安全的。修改配置和/或过滤器的方法不能保证是线程安全的。
> 
> Client 实例的创建是一项昂贵的操作，并且该实例可能会使用并保留许多资源。因此，建议重用 Client 实例来创建需要相同配置设置的 WebResource 实例

对于[网络资源](http://jersey.java.net/nonav/apidocs/1.4/jersey/com/sun/jersey/api/client/WebResource.html)：

> 创建请求和返回响应的方法是线程安全的。不保证修改过滤器的方法是线程安全的

虽然没有明确`ClientConfig`的并发文档，但从其源代码中可以清楚地看出它在多线程环境中使用是安全的。该类`Client`也是线程安全的，只`WebResource`需要考虑。根据它的文档，我将为`WebResource`每个线程指定一个新线程，这意味着您的代码应该看起来更像这样：

```
ClientConfig config = new DefaultClientConfig();
Client client = Client.create(config);

public void getUser() {         
    WebResource service = client.resource(RESOURCE_URL);

    // Get response as String
    String response = service
        .path("/addUser")
        .accept(MediaType.TEXT_PLAIN)
        .get(String.class);

        return response;
} 
```

# json - JSON数组问题

> ID：14305661
> 
> 赞同：-1
> 
> 时间：2013-01-13T16:44:16.557
> 
> 标签：json

我在 JSON 中使用以下数据

```
{ "question":"abcd",
   "question":"xyz",
   "question":"wer",
            ...
            ...
} 
```

我知道对于数组可以使用方括号。但**在这里我的第一个元素本身**是一个数组。那么这是有效的吗？ -

```
{ ["question":"abcd",
   "question":"xyz",
   "question":"wer",
            ...
            ...
]} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T16:48:09.750

如果第一个元素是一个数组，它应该是这样的：

```
{
    "question" : ["abcd", "xyz", "wer"]
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T16:45:39.297

不，这不对。如果您想要一个简单的对象数组，每个对象只有一个名为 的属性`question`，请这样做：

```
[{"question":"abcd"},
   {"question":"xyz"},
   {"question":"wer"},
            ...
            ...
] 
```

但是在 JSON 中， a`{`引入了一个对象，并且后面必须跟一个属性名：

![在此处输入图像描述](../Images/8f8cd2e09a7d7252bf4e6766a7b7c591.png)

请注意，整个标准，特别容易阅读，可在[JSON.org 获得](http://json.org/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T16:46:15.750

不，它不是，原因有很多。第一个原因是如果根元素是一个对象，那么键必须存在。第二个正好相反：在一个数组中，不可能有键。目前尚不清楚您要做什么，但是要将字典放入数组中，您可以使用

```
[
    {
        "key": "value",
        "foo": "bar"
    }
] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-13T16:47:52.883

不知道你到底在问什么，你想要一个带有 property 的对象`question`，它是一个数组吗？

```
{
    "question": [
        "xyz", "abcd" ...
    ]
} 
```

# php - 循环到每条记录并计算mysql

> ID：14305668
> 
> 赞同：0
> 
> 时间：2013-01-13T16:44:57.600
> 
> 标签：php, mysql, sql, loops

首先我要感谢所有朋友，我遇到了一个让我的 php 程序运行很慢的案例。这就是问题所在，我正在为特定分支上的每个项目更新新价格。例如：我得到了表调用库存，带有列-项目，旧价格，新价格，分支。我在同一个表中总共有 3 个分支库存。我会喜欢打折分行调用“CA”的所有股票。所以我

```
select * from stock where branch =="CA" 
```

循环并检索旧价格 - 20% 插入新价格

这种方法真的很耗时，我得到了超过 500 万的记录。有没有人有更好的解决方案，我真的很感激。再次感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T16:47:24.070

做一个更新声明，

```
UPDATE  stock
SET     newPrice = oldPrice - (oldPrice * .2)
WHERE   branch = 'CA' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T16:50:31.177

呃，这不是'0.8 * old_price'吗

# php - 单击时更改按钮文本并在再次单击时将其更改回

> ID：14305671
> 
> 赞同：0
> 
> 时间：2013-01-13T16:45:10.923
> 
> 标签：php, javascript, jquery, html

单击时如何更改按钮的文本？并在再次单击时将其更改回来？我有我制作的这个 javascript。它没有给我我想要的东西。请帮忙？

```
 $('#addbtn').click(function (){
    if(document.getElementById('addMat').style.display == "none"){
        document.getElementById('addMat').style.display= "inline";
        $(this).val('Cancel');
    }else
        document.getElementById('addMat').style.display= "none";
        $(this).val('Add Material');
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T16:48:36.590

只需使用 jQuery 语法即可：

```
$('#addbtn').click(function (){
    var addMat = $('#addMat');
    if( addMat.css('display')  === 'none' ) {
      addMat.css('display','inline');
      $(this).val('Cancel');
    } else {
      addMat.css('display','none');
      $(this).val('Add Material');
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T16:48:41.950

```
$('#addbtn').click(function (){
    if(document.getElementById('addMat').style.display === "none"){
        document.getElementById('addMat').style.display = "inline";
        $(this).attr("value","Cancel");
    }else{
        document.getElementById('addMat').style.display = "none";
        $(this).attr("value","Add Material");
    }
}); 
```

或更好...

```
$('#addbtn').click(function (){
    if( $('#addMat').css('display')  === 'none' ){
      $('#addMat').css('display','inline');
      $(this).attr("value","Cancel");
    } else {
      $('#addMat').css('display','none');
      $(this).attr("value","Add Material");
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T16:55:58.180

```
$(this).prop('value', 'Cancel'); 
```

或者

```
$(this).html('Cancel'); 
```

最好的方法是创建一个按钮并在文本周围放置一个 span 标签

```
$("span", this).text("My NEW Text"); 
```

# http - 如果我为 http expires 设置了遥远的未来日期，我如何推送意外的更改？

> ID：14305680
> 
> 赞同：1
> 
> 时间：2013-01-13T16:46:13.863
> 
> 标签：http, caching, web-applications

我想为一些常用但相对不变的内容设置过期日期，但我想知道如何通知网络/浏览器缓存以从服务器获取最新内容，以防我不得不意外地将新内容推送给用户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T00:21:12.550

添加带有版本号或时间戳的查询字符串。

```
<link rel="stylesheet" href="style.css?v=1.1" />
<script src="script.js?v=1.1"></script>
<img src="image.png?v=1.1" /> 
```

网络浏览器将具有不同查询字符串的 URL 视为完全不同的资源，因此如果之前没有请求，则将被迫在其上触发新的 HTTP 请求，而不是从缓存中获取具有相同 URI 的请求。

更改文件名也可以，但很笨拙。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T17:09:41.413

如果资源更改，可以更改其名称以强制缓存下载新的资源文件。但是，引用资源的页面需要有一个到期时间。

# regex - TRegExpr(exec)：超出循环堆栈；

> ID：14305682
> 
> 赞同：0
> 
> 时间：2013-01-13T16:46:17.620
> 
> 标签：regex, stack-overflow, pascal

我有使用正则表达式搜索定义类型的帕斯卡程序。这是我的正则表达式：`type\s((([\w\d]+?=(([\w\d^():]+?;)|(record.*?end;)))+?)+)`

我在这个输入字符串上收到了这个错误：

```
type ElementListyWsk=^ElementListy;ElementListy=record wskaznik:pointer;nstElement:ElementListyWsk;end;OperacjaNaTypiePtr=procedure(cos:pointer);StalaWsk=^Stala;Stala=record nazwa:string;wartosc:string;end;ZmiennaWsk=^Zmienna;Zmienna=record nazwa:string;typ:string;end;TypWsk=^Typ;Typ=record nazwa:string;definicja:string;end;ProceduraWsk=^Procedura;Procedura=record deklaracja:string;stale:ElementListyWsk;zmienne:ElementListyWsk;typy:ElementListyWsk;end; 
```

虽然我在较短的字符串上没有收到任何错误。下一个字符串只是缩短上述字符串的一部分：

```
type OperacjaNaTypiePtr=procedure(cos:pointer);StalaWsk=^Stala;Stala=record nazwa:string;wartosc:string;end;ZmiennaWsk=^Zmienna;Zmienna=record nazwa:string;typ:string;end;TypWsk=^Typ;Typ=record nazwa:string;definicja:string;end;ProceduraWsk=^Procedura;Procedura=record deklaracja:string;stale:ElementListyWsk;zmienne:ElementListyWsk;typy:ElementListyWsk;end; 
```

为什么我会收到这个错误？如果您需要更多信息，请询问。

# c# - Windows Phone Dev C#：在页面之间发送信息

> ID：14305688
> 
> 赞同：0
> 
> 时间：2013-01-13T16:46:48.803
> 
> 标签：c#, .net, windows, vb.net, windows-phone-7

我正在尝试在两页之间发送几个字符串。但是，接收页面仅将其解释为一个。关于如何解决此问题的任何建议。

第 1 页

```
private void button1_Click(object sender, RoutedEventArgs e)
        {
            string urlofdestinationpage = "/Page1.xaml";
            urlofdestinationpage += string.Format("?SelectedIndex=" + playersList.SelectedIndex);
            urlofdestinationpage += string.Format("?Player1=" + textBox1.Text);
            NavigationService.Navigate(new Uri(urlofdestinationpage, UriKind.Relative));
        } 
```

第2页

```
protected override void OnNavigatedTo(System.Windows.Navigation.NavigationEventArgs e)
        {
            IDictionary<string, string> x = this.NavigationContext.QueryString;
            String size = Convert.ToString(x["SelectedIndex"]);
            MessageBox.Show(size);
String player = Convert.ToString(x["Player1"]);
                MessageBox.Show(player1);
            base.OnNavigatedTo(e);
        } 
```

接收页面输出一条消息“0?Player1=”并且不将 player1 识别为值。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T17:21:20.463

您的 URI 格式不正确。表示参数的`?`开头，每个参数必须用 分隔`&`。

您正在构建的 URI 是：

> Page1.xaml?SelectedIndex=0?Player1=...

您应该构造的 URI 是：

> Page1.xaml?SelectedIndex=0&Player1=...

```
private void button1_Click(object sender, RoutedEventArgs e)
{
    string urlofdestinationpage = "/Page1.xaml";
    urlofdestinationpage += string.Format("?SelectedIndex=" + playersList.SelectedIndex);
    urlofdestinationpage += string.Format("&Player1=" + textBox1.Text);
    NavigationService.Navigate(new Uri(urlofdestinationpage, UriKind.Relative));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T17:20:52.053

您应该使用 & not 应用第二个参数和任何附加参数？就像在 URL 中一样：/Page1.xml?param1=x¶m2=y

# r - 不同图表的图例比例相同

> ID：14305691
> 
> 赞同：2
> 
> 时间：2013-01-13T16:47:03.203
> 
> 标签：r, ggplot2

我画了两个图表，但希望两者都有相同的点比例以进行比较

```
geofirmen<-data.frame(lon=c(1,2,3), lat=c(1,2,3), freqplz=c(5,10,15))
ggplot(data= geofirmen) + geom_point(aes(x = lon, y = lat, size=freqplz, alpha=.7), colour = "dodgerblue4") 
```

和

```
geofirmen<-data.frame(lon=c(1,2,3), lat=c(1,2,3), freqplz=c(5,10,20))
ggplot(data= geofirmen) + geom_point(aes(x = lon, y = lat, size=freqplz, alpha=.7), colour = "dodgerblue4") 
```

![看起来一样，但更小](../Images/4dcc84a629537ccf3f2d54f0acd66c0f.png) ![看起来一样，但更大](../Images/67f824d772e61be33c23dfabf6406b4c.png)

我希望两者都具有更大比例的传奇比例。注意，图表的比例没有改变，因为我画了一张地理地图，但 freqplz 的大小必须相同，值为 10 等。这是如何工作的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T15:13:15.793

如果您确实需要两个单独的图，那么您可以`scale_size()`对两个图使用相同的定义（添加到两个`ggplot()`命令），您可以在其中定义`breaks=`并设置`limits=`包含两个图的值。

```
+ scale_size(breaks=c(5,10,15,20),limits=c(0,20)) 
```

另一种解决方案是将所有数据放在一个包含分组列的数据框中（`group`在示例数据中）。然后添加`facet_wrap()`为每个级别制作方面。在这种情况下，只有一个图例。`coord_fixed()`用于确保`x`和`y`轴之间的固定纵横比。

```
geofirmen.new<-data.frame(lon=c(1,2,3,1,2,3), lat=c(1,2,3,1,2,3), 
    freqplz=c(5,10,15,5,10,20),group=c(1,1,1,2,2,2))

ggplot(data= geofirmen.new,aes(x = lon, y = lat, size=freqplz)) + 
    geom_point(alpha=.7, colour = "dodgerblue4") + 
    facet_wrap(~group,ncol=1) + coord_fixed() 
```

![在此处输入图像描述](../Images/a02326f61a2772c002386d3368bd0b19.png)

# php - 获取 SQL 记录

> ID：14305700
> 
> 赞同：0
> 
> 时间：2013-01-13T16:47:35.417
> 
> 标签：php, mysql, database, fetch

啊，我写了一个脚本，但我已经忘记了如何获取 MySQL 记录......所以......我有这个问题

资源编号#X

```
$QUERY = "SELECT id FROM WORKING TABLE VARIABLE WHERE username='WORKING USERNAME VARIABLE' and password='WORKING PASSWORD VARIABLE'";
$QUERY1 = mysql_query($QUERY);
$myusername = $QUERY1
echo $myusername; 
```

我知道我必须在这里取。我在互联网上尝试了很多方法。但它们都不起作用。意味着通过我得到任何结果。请帮忙？

如果没有此代码...我会得到所有信息，例如密码、电子邮件和用户名（alpha 版）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T16:55:01.557

试试这个

```
 $QUERY = "SELECT * FROM WORKING TABLE VARIABLE WHERE username='WORKING USERNAME VARIABLE' and password='WORKING PASSWORD VARIABLE'";
   $QUERY1 = mysql_query($QUERY);
 while($row = mysql_fetch_array($QUERY1))
  {
   $row['username'] =  $myusername;
    echo $row['username'];
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T16:56:21.930

试试这个：

```
$QUERY = "SELECT id FROM WORKING TABLE VARIABLE WHERE username='WORKING USERNAME VARIABLE' 
and password='WORKING PASSWORD VARIABLE' ";
$QUERY1 = mysql_query($QUERY);

while($row = mysql_fetch_array($QUERY1))
  {
  echo $row['id'];//you are selecting id not username
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T17:01:51.097

尝试：

```
echo $myusername[0]['id']; 
```

如果您想实际获取这样的单个结果，我会使用 mysqli_fetch_object。

# javascript - 增加 var 作为数字

> ID：14305701
> 
> 赞同：0
> 
> 时间：2013-01-13T16:47:37.613
> 
> 标签：javascript, jquery

我得到以下代码：

```
window.setInterval(function(){
    var id = $('.slidermenu.currentone').attr('data-id');
    var newid = parseInt(id) + 1;
    //alert(newid + ' - ' + id);

    $('.slidermenu.currentone').animate({backgroundColor: 'white'}, 'slow');
    $('.slidermenu.currentone').removeClass("currentone");
    $('slidermenu[date-id='+newid+']').animate({backgroundColor: '#f3f3f3'}, 'slow');
    $('slidermenu[date-id='+newid+']').addClass("currentone");
    $('#activeimage img.currentone').fadeOut('slow');
    $('#activeimage img.currentone').removeClass("currentone");
    $('#activeimage img[data-id='+newid+']').fadeIn('slow');
    $('#activeimage img[data-id='+newid+']').addClass("currentone");
}, 3000); 
```

我正在尝试制作一个每 3 秒运行一次的函数，然后让我的滑块显示下一张图像。好吧，它第一次运行时效果很好。但是第二次，它就是行不通。

我认为问题可能在于使`var newid`具有 from`id`和 plus的数量`1`。

此外，我实际上需要它来执行此操作直到第 5 位，然后再降到第 1 位。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T17:01:58.810

看起来您缺少 . 将新滑块菜单设置为当前菜单时的选择器。尝试这个：

```
$('.slidermenu[date-id='+newid+']').animate({backgroundColor: '#f3f3f3'}, 'slow');
$('.slidermenu[date-id='+newid+']').addClass("currentone"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T17:09:43.880

要递增 id，您需要在递增函数之外创建 id 变量，然后在每次调用间隔函数时递增它。您可以从闭包中使其可用，而不是全局使用，这通常是首选。

```
// make an anonymous function which reads the id attr and stores it in the id var.
var intervalFunction = (function(){
var id = $('.slidermenu.currentone').attr('data-id')
  , id = parseInt(id);

// return a function which will be run after every 3s and will increment the id
return function(){
  console.log(id++);
  // your slider code here
}})();

window.setInterval(intervalFunction, 1000); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T17:59:50.087

问题是每次你的区间函数运行时，它都会给 的值加 1 `data-id`，这不会改变。由于您要遍历 5 个值，因此您需要将增量存储在间隔函数之外的单独值中 - 在以下代码中使用闭包：

```
window.setInterval(function() {
  var inc = 0;
  return function() {
    inc = 1 + inc % 5;
    var id = $('.slidermenu.currentone').attr('data-id');
    var newid = parseInt(id) + inc;
    alert(inc);
    // slider code
  }
}(), 3000); 
```

# java - 音乐无法在应用程序中播放 (javax.sound.sampled.Clip)

> ID：14305712
> 
> 赞同：2
> 
> 时间：2013-01-13T16:48:42.300
> 
> 标签：java, javasound

```
import javax.sound.sampled.*;
import java.io.File;
public class PlayAudio{
public static void main(String args[])throws Exception{

    File wavFile = new File("C:\\Users\\User\\Desktop\\Wate.wav");
    AudioInputStream ais = AudioSystem.getAudioInputStream(wavFile);
    Clip clip=AudioSystem.getClip();
    clip.open(ais);
    clip.start();
 }
} 
```

我的问题是：为什么音乐不能在这个应用程序中播放？（IDE 是 Eclipse）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T17:16:30.757

问题是您的主应用程序线程在声音剪辑可以播放之前退出。您可以`Thread.sleep`在 之后使用任意超时调用`clip.start()`，但最好创建一个专用`Thread`来跟踪播放的音频数据：

```
public class PlayAudio {

    AudioFormat audioFormat;
    AudioInputStream audioInputStream;
    SourceDataLine sourceDataLine;

    boolean stopPlayback = false;

    public void playAudio(File soundFile) throws UnsupportedAudioFileException,
            IOException, LineUnavailableException {
        audioInputStream = AudioSystem.getAudioInputStream(soundFile);
        audioFormat = audioInputStream.getFormat();
        DataLine.Info dataLineInfo = new DataLine.Info(SourceDataLine.class, audioFormat);
        sourceDataLine = (SourceDataLine) AudioSystem.getLine(dataLineInfo);
        new Thread(new PlayThread()).start();
    }

    public static void main(String[] args) throws UnsupportedAudioFileException, IOException, LineUnavailableException {
        new PlayAudio().playAudio(new File("myclip.wav"));
    }

    class PlayThread implements Runnable {
        byte soundBuffer[] = new byte[10000];

        @Override
        public void run() {
            try {
                sourceDataLine.open(audioFormat);
                sourceDataLine.start();
                int cnt;
                while ((cnt = audioInputStream.read(soundBuffer, 0,
                        soundBuffer.length)) != -1 && stopPlayback == false) {
                    if (cnt > 1) {
                        sourceDataLine.write(soundBuffer, 0, cnt);
                    }
                }
                sourceDataLine.drain();
                sourceDataLine.close();
                stopPlayback = false;
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    }
} 
```

# c++ - C ++ fstream：到达eof时抛出异常

> ID：14305722
> 
> 赞同：4
> 
> 时间：2013-01-13T16:49:39.557
> 
> 标签：c++

我想从两个文件中读取，直到到达其中一个文件的末尾。如果出现问题，fstream 应该抛出异常。

问题是，当设置了 eof 位时，也会设置 bad 或 fail 位。

```
ifstream input1;
input1.exceptions(ios_base::failbit | ios_base::badbit);
input1.open("input1", ios_base::binary | ios_base::in);

ifstream input2;
input2.exceptions(ios_base::failbit | ios_base::badbit);
input2.open("input2", ios_base::binary | ios_base::in);

ofstream output;
output.exceptions(ios_base::failbit | ios_base:: badbit);
output.open("output", ios_base::binary | ios_base::out | ios_base::trunc);

char in1, in2, out;

while(!input1.eof() && !input2.eof()) {
    input1.read((char*) &in1, 1);
    input2.read((char*) &in2, 1);
    out = in1^in2;
    output.write((const char*) &out, 1);
}

input1.close();
input2.close();
output.close(); 
```

这将导致

```
$ ./test
terminate called after throwing an instance of 'std::ios_base::failure'
  what():  basic_ios::clear 
```

怎么做才对？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-13T20:07:19.073

您的代码中的基本问题是[FAQ](https://isocpp.org/wiki/faq/input-output#istream-and-eof)。您永远不应该将`eof()`其用作读取循环的测试条件，因为在 C/C++ 中（*与*其他一些语言不同）在您读取文件*末尾*`eof()`之前不会设置为 true ，因此循环体也将输入*一次很多*次。

 **惯用正确的过程是将读取操作本身置于循环条件中，以便退出发生在正确的点：

```
 while ( input1.get(in1) && input2.get(in2) ) { /* etc */ }
  // here, after the loop, you can test eof(), fail(), etc 
  // if you're really interested in why the loop ended. 
```

这个循环会随着较小的输入文件的耗尽而自然结束，这正是你想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T16:54:58.500

只需删除`.eof()` `if(fstream)`检查所有位（eof bad 和 fail）。

所以将while重新写为：

```
 while(input1 && input2) 
```

然后可能验证 eof() 是否为最后一个流返回 true。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T17:07:59.477

根本不要抛出异常并在您的 while 条件下使用`input1.read`or`istream::get`

```
while (input1.get(in1) && input2.get(in2)) {
...
} 
```

如果您阅读循环体中的字符，您的输出中将有一个额外的字符，没有相应的输入字符。也许这就是你最初使用的原因`std::ios::exeptions`。**

# html - 为什么使用 HTML5 标签？

> ID：14305723
> 
> 赞同：11
> 
> 时间：2013-01-13T16:49:43.040
> 
> 标签：html, tags, html4

> **可能重复：**
> [像 <section> 和 <article> 这样的新 HTML5 元素是否毫无意义？](https://stackoverflow.com/questions/3822024/are-new-html5-elements-like-section-and-article-pointless)

最后，我决定转向使用 HTML5 设计网站。我有一个关于新标签的问题。

有新的标签，例如；页眉、页脚、导航栏等。为什么这些标签比使用 DIV ID 的旧方法更受欢迎（例如。`<div id="header">`）。我可以理解为什么这会使事情变得更简单，但是让一些使用 HTML5 的标签和一些使用旧方法的标签不会更令人困惑吗？我个人认为使用全部或不使用比混合使用更合乎逻辑。

如果我完全错过了这一点，请告诉我。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-13T16:54:18.807

这不是一个非此即彼的情况。HTML5 仍然有`<div>`s。它仍然有`<span>`s。新标签可以为您提供更多表达自由并标准化常见元素。例如，大多数页面都有导航栏，但到目前为止还没有关于如何标记的标准。如果它们被明确标记为`<nav>`，程序可以开始有效地使用这些信息。搜索引擎可以忽略或解析它们，辅助技术可以帮助用户浏览网站。

它还使您可以更轻松地使用代码。`<nav>`比 . 更容易被发现`<div class="main nav foobar baz">`。

新标签是一个*补充*，而不是一个全新的集合替换旧标签。

# c# - 替换 KeyUp 中的非小数

> ID：14305724
> 
> 赞同：1
> 
> 时间：2013-01-13T16:50:05.363
> 
> 标签：c#, regex

感谢 Joey 在这个问题中[删除非数字、非小数、重复小数](https://stackoverflow.com/questions/11077384/remove-non-digits-non-decimals-repeating-decimals)。我有一个`Regex.Replace`，看起来像这样

```
Regex.Replace(Txt, "[^-?\d+\.]|(?<=\.[^.]*)\.", ""); 
```

但是现在我希望它只允许一个逗号（`,`），并且用户可以使用逗号或点，但不能同时使用

我该如何实施？

所以合法的数字可能是

```
2.324324
0.34345325
2,5454
0,453453 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-31T15:30:40.827

试试这个：

```
string result = Regex.Replace(Txt, @"[^\d.,]|(?<=[.,][^.,]*)[.,]", ""); 
```

# jquery - 如何为“显示密码”功能创建 HTML？

> ID：14305727
> 
> 赞同：10
> 
> 时间：2013-01-13T16:50:30.090
> 
> 标签：jquery, html, button, passwords

> **可能重复：**
> [JQuery 更改输入字段的类型](https://stackoverflow.com/questions/1544317/jquery-change-type-of-input-field)

演示在这里：

[http://jsbin.com/welcome/73795/edit](http://jsbin.com/welcome/73795/edit)

* * *

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>

<input type="password" name="password" />
<button>Show Password</button>

$(document).ready(function() {
  $('button').click(function() {
    $('input').attr('type', 'text');
  });
}); 
```

* * *

我正在尝试创建一个按钮（或复选框），用户可以切换该按钮以查看以纯文本形式编写的密码。

这基本上适用于输入密码很痛苦的便携式设备，而在写作时以纯文本形式查看密码是一种用户体验改进。

在我上面的示例中，更改输入的类型不起作用。

关于如何解决这个问题的任何建议？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-13T17:16:47.883

您无法更改`type`属性.. 请参阅此处的解决方法：http: [//jsfiddle.net/Ngtp7/2/](http://jsfiddle.net/Ngtp7/2/)

和这里的一个变化：http: [//jsfiddle.net/Ngtp7/](http://jsfiddle.net/Ngtp7/)

# php - 检查值是否存在于多维数组中

> ID：14305731
> 
> 赞同：-4
> 
> 时间：2013-01-13T16:50:50.260
> 
> 标签：php, arrays

我需要帮助可能很简单的代码。

```
while ($row=mysql_fetch_array($result)){
    $id= $row["id"];
    $city = $row["city"];
    $name = $row["name"];
    $country = $row["country"];
    $iata = $row["iata"];
    //array here
} 
```

我想检查国家/地区是否已经在数组中，如果是，则将城市添加到该国家/地区数组中

就像是：

```
$result{
  'United Kingdom' => 'London', 'Oxford'
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T17:01:47.950

以下可能是您需要的：

```
if (isset($result[$country]) {
    $result[$country][] = $city;
}
else {
    $result[$country] = array($city);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T17:03:15.340

如果您想要一个以国家为索引的数组和一个以城市数组为值的数组，那么：

```
$arr = Array(){'uk' => Array(){'london', 'Oxford'},
               'foo' => Array(){'bar'}
       }; 
```

试试这个：

```
var $arr = Array();
while ($row=mysql_fetch_array($result)){
    $id= $row["id"];
    $city = $row["city"];
    $name = $row["name"];
    $country = $row["country"];
    $iata = $row["iata"];

    $arr[$country][] = $city;
} 
```

# php - 如何给这个名字一个 ID；？> 这样我就可以在 AJAX 中访问该属性

> ID：14305735
> 
> 赞同：0
> 
> 时间：2013-01-13T16:50:56.690
> 
> 标签：php, jquery, ajax, codeigniter

我是 Code Igniter 的新手......我在每一行前面都有一个编辑按钮。现在，我想要的是，在我单击编辑按钮后，应该会出现一个弹出/模型框/灯箱而不刷新页面，并且所有字段都应该出现在该框中。

```
 <?php foreach($records as $row){?>
<tr>
<td class = "click"><?php echo $row->name; ?>  </td>

    <script type="text/javascript">
   $(document).ready(function() {
   $('.click').editable('<?php echo site_url('categoryController/editCategory');?>',
       {

     });

        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T06:55:36.757

包括元素的`id`and `name`，例如：

```
<tr>
<td class = "click" id="field" name="field_name"><?php echo $row->name; ?>  </td>
</tr> 
```

然后在你的js中：

```
$("#field").editable("<?php echo site_url('categoryController/editCategory'); ?>",
 { 
        indicator : "<img src='img/indicator.gif'>", // or any image
        onblur    : 'cancel',
        tooltip   : 'Click to edit...',
        cancel    : 'Cancel',
        submit    : 'OK'
}); 
```

然后在您的控制器中检索值：

```
$this->input->post('field_name'); 
```

有关更多信息，请参阅[jeditable](http://www.appelsiini.net/projects/jeditable)网站。

# javascript - getElementById() 的父级

> ID：14305738
> 
> 赞同：0
> 
> 时间：2013-01-13T16:51:24.443
> 
> 标签：javascript, google-apps-script

`getElementById()`在部署为 Web 应用程序的 Google Apps 脚本中执行操作时，是否可以知道 Google Apps 脚本中此元素的父级？

我已经尝试过像`.parentNode`and一样`.parentElement`的 javascript 表达式，并且没有`.id` 表达式。我也使用了该`parent()`功能，但都返回错误。

[在这里](https://sites.google.com/a/lagaroo.com.br/dev-test/dev-test/dev-test-elements)你可以看到我尝试过的所有不同的可能性。
错误是：
-*在对象按钮中找不到父*
级 -*无法调用未定义的方法添加*

我看到在 htmlservice 中您可以使用 parentNode 在部署为 Web 应用程序的谷歌应用程序脚本中不可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T17:35:49.377

没有这样的方法可用。但是您可以通过 setTag 在标签中存储父母的 id：

```
var aLabel = app.createLabel("A Label").setId('alabel').setVisible(true).setTag ('vpanel'); 
```

所以你可以在你的事件处理程序中写：

```
var vPanel = app.getElementById(app.getElementById('alabel').getTag()); 
```

# java - AppEngine 数据存储区管理员：无法备份到云存储区

> ID：14305741
> 
> 赞同：2
> 
> 时间：2013-01-13T16:51:41.293
> 
> 标签：java, google-app-engine, backup, google-cloud-storage, datastore-admin

我正在尝试通过 Datastore Admin 将我的 Java 应用程序中的一些实体备份到 cloudstore 并遇到一些问题。

我启用了 Datastore Admin 并将我的应用程序的 google 服务帐户 ID (my_app_id@appspot.gserviceaccount.com) 作为开发人员添加到云存储桶“团队”中，如此[处](https://developers.google.com/appengine/docs/python/googlestorage/overview#Prerequisites)所述(5.e)。

我在存储桶“团队”（[应用引擎仪表板](http://i.imgur.com/VrKpa.png)的屏幕截图）上将邀请视为“待处理”，但**我不知道如何接受邀请**，或者这是否是自动的，我只需要等待。

当我尝试备份到我的 cloudstore 存储桶 [ `gs/my_bucket/my_folder`] 时，我得到了`Bucket "my_bucket" is not accessible`（如果我尝试随机存储桶名称，我会得到同样的错误）。

我正在使用同一个帐户（所有内容的所有者）来执行上述所有操作。

任何帮助表示赞赏！

**编辑**：

我正在通过[Google Cloud Console](https://cloud.google.com/console)创建项目，这导致（显然是一个错误）我的项目被创建为一个应用程序引擎应用程序，所以每当我从 Google API 控制台单击“团队”时，我都会被重定向到 AppEngine仪表板权限选项卡。

如果我从 Google API 控制台创建项目，那么一切正常，我可以添加权限而无需重定向到 AppEngine 仪表板。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T18:53:25.147

根据您的项目创建步骤的屏幕截图，您似乎是通过[http://cloud.google.com/console](http://cloud.google.com/console)创建了项目。我怀疑该路径存在问题——我建议尝试通过[http://code.google.com/apis/console](http://code.google.com/apis/console)创建您的项目，看看是否效果更好。如果你让我知道那个实验的结果，我可以提交一个错误报告。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T17:13:14.860

编辑：这里的问题似乎是从[http://cloud.google.com/products/cloud-storage](http://cloud.google.com/products/cloud-storage)而不是在 API 控制台中创建 API 项目时出现奇怪的行为。

上一个答案：

我对您链接到的 5.e 的解读是，您应该将应用程序的服务帐户名称添加到*API 项目*（在 Google API 控制台中）而不是 App Engine 项目中。我认为它不应该是您的 App Engine 应用程序的开发人员。

也就是说，您已将 App Engine 应用程序作为开发人员添加到您的 App Engine 应用程序中。相反，您希望将其添加为 API 项目的成员（包括云存储访问）。

# bash - 如何在 ZSH 中重复最后一个命令参数

> ID：14305744
> 
> 赞同：0
> 
> 时间：2013-01-13T16:52:09.650
> 
> 标签：bash, shell, zsh, readline

我经常需要将文件从一个位置移动到另一个位置，但这需要复制和粘贴大部分命令。例如：

```
mv ~/Projects/foo/bar/baz.img ~/Projects/foo/bar/fiz.dmg 
```

输入`~/Projects/foo/bar/baz.iso`上述命令的一部分后是否可以使用一些复制它的快捷方式，以便我可以将最后更改为`fiz.dmg`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T17:49:11.413

你不需要这个：

```
mv ~/Projects/foo/bar/baz.img ~/Projects/foo/bar/fiz.dmg 
```

很容易变成

```
mv ~/Projects/foo/bar/{baz,fiz}.img 
```

. 注意：zsh 补全在您编写时仍然可用`{`（除非您有`}`立即关闭的习惯），如果您愿意的话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T16:52:09.650

我实际上发现了一种可能的解决方案。只需按：

`Ctrl`+`W`几次然后`Ctrl`+`Y`两次（以及粘贴之间的空间）。

# java - 在java中下载文件时进度条冻结

> ID：14305747
> 
> 赞同：2
> 
> 时间：2013-01-13T16:52:31.090
> 
> 标签：java, swing, swingworker, event-dispatch-thread, jprogressbar

> **可能重复：**
> [JProgressBar 不会更新](https://stackoverflow.com/questions/14271902/jprogressbar-wont-update)

所以我试图显示一个用 Java 下载的文件的下载进度。我可以将当​​前百分比作为字符串输出到控制台，但是当我尝试更新 UI 时，它会冻结，直到下载完成。

```
 public void downloadFile(String fileName) {
    try {
       long startTime = System.currentTimeMillis();

       System.out.println("Connecting to site...\n");

       URL url = new URL("http://assets.minecraft.net/"+fileName+"/minecraft.jar");
       URLConnection connection = url.openConnection();
        try (InputStream reader = url.openStream(); FileOutputStream writer = new FileOutputStream("minecraft.jar")) {
            byte[] buffer = new byte[153600];
            int totalBytesRead = 0;
            int bytesRead = 0;
            int totalSize = connection.getContentLength();
            jProgressBar1.setMaximum(totalSize);

            System.out.println("Downloading\n");

            while ((bytesRead = reader.read(buffer)) > 0) {  
               writer.write(buffer, 0, bytesRead);
               buffer = new byte[153600];
               totalBytesRead += bytesRead;
               jProgressBar1.setValue(totalBytesRead);
               System.out.println(totalBytesRead*100/totalSize+"% complete");
            }

            long endTime = System.currentTimeMillis();

            System.out.println("Done. " + (new Integer(totalBytesRead).toString()) + " bytes read (" + (new Long(endTime - startTime).toString()) + " millseconds).\n");
        }
    }
    catch (MalformedURLException e) {
    }
    catch (IOException e) {
    }
} 
```

我在某处读到您需要使用另一个线程，但我无法成功地做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T16:59:26.943

一种选择是使用[SwingWorker](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)。以下是您可以考虑的一些有用的答案：

*   [复制目录和文件时需要有 JProgress bar 来衡量进度](https://stackoverflow.com/a/13576203/597657)
*   [SwingWorker 的工作原理](https://stackoverflow.com/a/11546203/597657)

# reflection - 列出对象方法和属性

> ID：14305750
> 
> 赞同：23
> 
> 时间：2013-01-13T16:52:44.643
> 
> 标签：reflection, vbscript

有没有办法列出 VBS 中创建的对象的可用方法？

例如：

```
Set IE = CreateObject("InternetExplorer.Application") 
```

我想列出这个对象的可用属性，如：

```
IE.AddressBar
IE.Application
IE.Busy
... 
```

或方法：

```
IE.ClientToWindow
IE.ExecWB
IE.GetProperty
... 
```

如何在 VBS 中发现任意有效对象的可用属性？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2017-06-09T13:55:14.620

使用`TypeLib Information Objects`from`tlbinf32.dll`可以列出一个类的所有成员。

[`tlbinf32.dll` 是 *Visual Studio 6.0* 的一部分，它是 2000 年左右的当前版本。Microsoft 似乎不再提供 DLL 供下载（2017 年中期的情况），但您可以从各个站点下载它互联网。我在 https://www.dll4free.com/tlbinf32.dll.html 或其他网站上找到了版本 *1.1.88.4、Build 8804、版权 Matthew Curland 1996、Microsoft 1997-2000、大小 148.480 字节*。] [要在 Win32 中安装 DLL，请将其复制到 `%windir%\System32` 并 *作为管理员* 从该目录调用 `regsvr32.exe tlbinf32.dll`。] [要在 Win64 中安装 DLL，请将其复制到 `%windir%\syswow64`，然后*以管理员身份* 注册到 `%windir%\syswow64\regsvr32.exe`，最后使用 `%windir%\syswow64\ 运行 vbscript cscript.exe`（或`wscript.exe`）。感谢 [BuvinJ](/users/3220983/buvinj) 的 [提示](/questions/14305750/list-object-methods-and-properties/44459670?noredirect=1#comment86169321_44459670)]

以下脚本演示了包含的函数，该函数`VariableInfo`将返回具有传递变量类型的字符串，如果是 Object，则返回所有成员的详细信息，包括类型`Property`、可调用类型（`Sub`或`Function`），以及参数名称和返回类型以防万一的功能。如果是对象，则对象的类型名称`COM`将是已实现接口的名称。不确定它是否适用于多个实现的接口，但是AFAIK`COM`无论如何都不可能在一个类中实现多个接口。

它不以任何方式支持递归，因为这会导致某些类型的无限循环。

这**将使您**在 VBS 中获得几乎完整的工作**反思。**非常适合探索 API，例如使用*Microsoft Script Debugger*。

```
' Reflection for VBScript via tlbinfo32.dll
'
' Patrick Strasser-Mikhail 2017-2021
' Ansgar Wiechers 2019
' https://stackoverflow.com/questions/14305750/list-object-methods-and-properties/44459670#44459670
'
' v1.1 2021-02-01: Show values of arrays and objects, but only one level

' Returns a String describing the passed object/variable on the first level,
' no recursion.
Function VariableInfo(obj)
    VariableInfo = VariableInfoToLevel(obj, 0, 1)
End Function

' Returns a String describing the passed object/variable on the first level,
' recurse down to level max_level(0=no recursion).
Function VariableInfoToLevel(obj, level, max_level)
    Const invokeKindPropertyGet = 0     ' simple data member
    Const invokeKindFunction = 1        ' method: Sub or Function
    Const invokeKindPropertyPut = 2     ' Docs: has a value setter; reality: more like is settable
    Const invokeKindPropertyPutRef = 4  ' Docs: has a reference setter; reality: more like is not settable

    If level > max_level Then
        VariableInfoToLevel = ""
        Exit Function
    End If

    Dim indent : indent = Space(4 * level)
    VariableInfoToLevel = indent

    If isEmpty(obj) Or _
       isNull(obj) _
    Then
        VariableInfoToLevel = VariableInfoToLevel & TypeNameFromVarType(VarType(obj))
    ElseIf Not IsObject(obj) Then
        If Not isArray(obj) Then
            VariableInfoToLevel = indent & TypeNameFromVarType(VarType(obj)) & ", Value: [" & obj & "]"
        Else
            VariableInfoToLevel = indent & TypeNameFromVarType(VarType(obj))
            Dim dimension
            ReDim sizes(0)
            Dim size

            On Error Resume Next
            Err.Clear

            For dimension = 0 To 10 ' deliberate limit to prevent infinite loop
                size = Ubound(obj, dimension + 1)
                If Err.Number <> 0 Then
                    ' report ther then Index out of Bounds
                    If Err.Number <> 9 Then 
                        WScript.Echo "Exception " & Err.Number & ": " & Err.Description & "; in " & Err.Source
                    End If
                    Exit For
                End If
                ReDim Preserve sizes(dimension)
                sizes(dimension) = size  
            Next
            On Error Goto 0

            VariableInfoToLevel = VariableInfoToLevel & "(" & Join(sizes, ",") & ")"
            Select Case dimension
              Case 1
                VariableInfoToLevel = VariableInfoToLevel & " {"  & vbCrlf
                Dim idx
                For idx = LBound(obj) To UBound(obj)
                    VariableInfoToLevel = VariableInfoToLevel & indent & _
                        "     " & idx & ":" & _
                        Trim(VariableInfoToLevel(obj(idx), level + 1, max_level)) & vbCrlf
                Next

                VariableInfoToLevel = VariableInfoToLevel & indent & "}" & vbCrlf

              Case 2
                VariableInfoToLevel = indent & "{" & vbCrlf

                Dim idx1, idx2
                For idx1 = LBound(obj, 1) To UBound(obj, 1)
                    For idx2 = LBound(obj, 2) To UBound(obj, 2)
                        VariableInfoToLevel = VariableInfoToLevel & indent & _
                            "     " & idx1 & "," & idx2 & ":" & _
                            Trim(VariableInfoToLevel(obj(idx1, idx2), level + 1, max_level)) & vbCrlf
                    Next
                Next

                VariableInfoToLevel = VariableInfoToLevel & indent & "    }" & vbCrlf

              Case Else
                ' 0 is empty anyway, more is too complicated to print, just leave it for now
            End Select
        End If
    ElseIf TypeName(obj) = "Nothing" Then
        VariableInfoToLevel = indent & "Nothing (The Invalid Object)"
    Else
        ' Object
        VariableInfoToLevel = indent & "Object " & TypeName(obj)
        '' Need to think about that... True for Err, but not for System.Dictionary
        '' Seems Err is very special, and we should compare explicitly with internal/predifined Objects (Err, WScript)
        'If varType(obj) <> vbObject Then
            ' hm, interresting...
        '   VariableInfoToLevel = VariableInfoToLevel & " with default property (no analysis possible)"
        '   Exit Function
        'End If

        Dim TLI
        Dim MemberInfo
        Dim TypeInfo
        Set TLI = CreateObject("TLI.TLIApplication")
        VariableInfoToLevel = indent & "Object " & TypeName(obj)

        On Error Resume Next
        Err.Clear
        Set TypeInfo = TLI.InterfaceInfoFromObject(obj)

        If Err.Number <> 0 Then

            VariableInfoToLevel = VariableInfoToLevel & "; Error " & Err.Number
            VariableInfoToLevel = VariableInfoToLevel & ": " & Err.Description
            Err.Clear
            On Error Goto 0
            Exit Function
        End If
        On Error Goto 0

        For Each MemberInfo In TypeInfo.Members
            Dim Desc
            Dim printNextLevel : printNextLevel = vbFalse
            Desc = ""
            ' based on .Net System.Runtime.IteropService.ComTypes
            '' FIXME: Call by Value/Reference and settable seems to be switched some
            '' InvokeKind seems to not encode value passing, rather settable/not settable
            '' Needs more work to decode byValue/byReference
            Select Case MemberInfo.InvokeKind
                Case InvokeKindFunction
                    If MemberInfo.ReturnType.VarType <> 24 Then
                        Desc = "  Function " & TypeNameFromVarType(MemberInfo.ReturnType.VarType)
                    Else
                        Desc = "  Sub"
                    End If

                    Desc = Desc & " " & MemberInfo.Name
                    Dim ParameterList
                    ParameterList = Array()
                    Dim Parameter
                    For Each Parameter In MemberInfo.Parameters
                        ReDim Preserve parameterList(UBound(ParameterList) + 1)
                        ParameterList(Ubound(parameterList)) = Parameter.Name
                    Next
                    Desc = Desc & "(" & Join(ParameterList, ", ") & ")"
                    'Set parameters = Nothing
                Case InvokeKindPropertyGet
                    Desc = "  Data Member " & MemberInfo.Name
                    printNextLevel = vbTrue
                Case InvokeKindPropertyPut
                    ' Seems to be 
                    Desc = "  Property " & MemberInfo.Name & " [set by val"
                    If IsGettable(obj, MemberInfo.Name) Then 
                        Desc = Desc & "/get"
                        printNextLevel = vbTrue
                    End If
                    Desc = Desc & "]"
                    'Stop
                Case InvokeKindPropertyPutRef
                    'Stop
                    Desc = "  Property " & MemberInfo.Name & " [set by ref"
                    If IsGettable(obj, MemberInfo.Name) Then 
                        Desc = Desc & "/get"
                        printNextLevel = vbTrue
                    End If
                    Desc = Desc & "]"
                    'Stop
                Case Else
                    Desc = "  Unknown member, InvokeKind " & MemberInfo.InvokeKind
            End Select
            VariableInfoToLevel = VariableInfoToLevel & vbNewLine & _
                                  indent & Desc
            If printNextLevel And level < max_level Then
                VariableInfoToLevel = VariableInfoToLevel & vbNewLine & _
                    VariableInfoToLevel(eval("obj." & MemberInfo.Name), level + 1, max_level)
            End If
        Next

        Set TypeInfo = Nothing
        Set TLI = Nothing
    End If
End Function

Function IsGettable(obj, memberName)
    Dim value
    On Error Resume Next
    Err.Clear
    value = eval("obj." & memberName)
    Stop
    If Err.Number <> 0 And _
       Err.Number <> 438 And _
       Err.Number <> 450 Then
        WScript.Echo Err.Number & ": " & Err.Description
    End If

    '438: Object doesn't support this property or method
    '450: Wrong number of arguments or invalid property assignment
    If Err.Number = 438 Or _
       Err.Number = 450 Then
        IsGettable = vbFalse
    Else
        IsGettable = vbTrue
    End If

End Function

Function IsSimpleType(obj)
    If (isEmpty(obj) Or isNull(obj)) And (Not IsObject(obj)) And (Not isArray(obj)) Then
        IsSimpleType = vbTrue
    Else
        IsSimpleType = vbFalse
    End If
End Function 

' Decode Type Number to something readable
Function TypeNameFromVarType(typeNr)
    Dim typeDetails
    set typeDetails = CreateObject("Scripting.Dictionary")

    typeDetails.add 0,  "vbEmpty (uninitialized variable)"
    typeDetails.add 1,  "vbNull (value unknown)"
    typeDetails.add 2,  "vbInteger" ' Short?
    typeDetails.add 3,  "vbLong" ' Integer?
    typeDetails.add 4,  "vbSingle"
    typeDetails.add 5,  "vbDouble"
    typeDetails.add 6,  "vbCurrency"
    typeDetails.add 7,  "vbDate"
    typeDetails.add 8,  "vbString"
    typeDetails.add 9,  "vbObject"
    typeDetails.add 10, "Exception"
    typeDetails.add 11, "vbBoolean"
    typeDetails.add 12, "vbVariant"
    typeDetails.add 13, "DataObject"
    typeDetails.add 14, "vbDecimal"
    typeDetails.add 17, "vbByte"
    typeDetails.add 18, "vbChar"
    typeDetails.add 19, "ULong"
    typeDetails.add 20, "Long" ' realy Long?
    typeDetails.add 24, "(void)"
    typeDetails.add 36, "UserDefinedType"

    If typeDetails.Exists(typeNr) Then
        TypeNameFromVarType = typeDetails(typeNr)
    ElseIf typeNr > 8192 Then
        TypeNameFromVarType = "vbArray{" & TypeNameFromVarType(typeNr - 8192) & "}"
    Else
        typeNameFromVarType = "Unknown Type " & typeNr
    End If
End Function

' Some nice example class to demonstrate all possible interfaces.
Class MyClass
    Dim Name_
    Dim Name2_
    Dim Name3_
    Dim Name4_
    Dim dict

    Private Sub Class_Initialize()
        Name_ = "foo"
        Name2_ = "bar"
        Name3_ = "baz"
        Name4_ = "spam"
        Set dict = CreateObject("Scripting.Dictionary")
    End Sub

    Private Sub Class_Terminate()
        Set dict = Nothing
    End Sub

    Public Property Get Name
        Name = Name_
    End Property

    Public Property Let Name(ByVal Value)
      Name_ = Value
    End Property

    Public Property Let Name2(ByRef Value)
      Set Name2_ = Value
    End Property

    Public Property Get Name3
      Name3 = Name3_
    End Property

    Public Property Set Name3(ByVal Value)
      Set Name3_ = Value
    End Property

    Public Property Get Name4
      Name4 = Name4_
    End Property

    Public Property Set Name4(ByRef Value)
      Set Name4_ = Value
    End Property

    Sub TestSub()
        WScript.Echo "Test"
    End Sub

    Sub TestFunc(message)
        WScript.Echo "Test: " & message
    End Sub

    Sub TestFunc2(ByRef message)
        WScript.Echo "Test: " & message
    End Sub

    Function Add(first, second)
        Add = first + second
    End Function

    Function Substract(ByVal first, ByRef second)
        Add = first - second
    End Function

End Class

Sub testVariableInfo()
    Dim variable
    ' vbEmpty
    Wscript.Echo VariableInfo(variable)

    variable = Null
    Wscript.Echo VariableInfo(variable)

    Set variable = Nothing
    Wscript.Echo VariableInfo(variable)

    Wscript.Echo VariableInfo(Int(23))
    Wscript.Echo VariableInfo(cLng(23))
    Wscript.Echo VariableInfo(2147483647)
    Wscript.Echo VariableInfo(5/4)
    Wscript.Echo VariableInfo(4 * Atn(1)) ' Simplest way to pi, not all inverse functions like arcsin are defined.
    Wscript.Echo VariableInfo(3.4E38)
    Wscript.Echo VariableInfo(CDbl(3.4E38))
    Wscript.Echo VariableInfo(cCur(20.123456))
    Wscript.Echo VariableInfo(now)
    Wscript.Echo VariableInfo("Some Text")
    Wscript.Echo VariableInfo(Err)

    Dim MyObject
    Set MyObject = new MyClass
    Wscript.Echo VariableInfo(MyObject)
    Set MyObject = Nothing

    Dim TestAEmpty()
    Wscript.Echo VariableInfo(TestAEmpty)

    ReDim TestA1(17)
    Wscript.Echo VariableInfo(TestA1)

    Dim TestA2(3, 7)
    Wscript.Echo VariableInfo(TestA2)

    Dim TestA3
    TestA3 = Array(4, 5, 6)
    Wscript.Echo VariableInfo(TestA3)

    Dim dict
    Set dict = CreateObject("Scripting.Dictionary")
    WScript.Echo VariableInfo(dict)
    Set dict = Nothing
End Sub

testVariableInfo 
```

有关Typelib*接口的更多信息，请从*[Microsoft KB 文章 224331](https://web.archive.org/web/20080328233800/support.microsoft.com/kb/224331)获取文档帮助文件

Matthew Curland 在网站上为他的书[Advanced Visual Basic 6](http://www.powervb.com/default.htm)提供了下载，作为评估版本的不错的程序[类型库编辑器 (EditTLBEval.exe)](http://www.powervb.com/edittlbeval.htm)，以及相应的[文档](http://www.powervb.com/TLBEditorDocs/default.htm)

[尤其是在这种情况下，我真的很喜欢这句话*如果你是一个拒绝承认 VB 普遍接受的局限性的 Visual Basic 开发人员，那么这本书绝对适合你。*通过泰德帕蒂森。只需在这里用 VBScript 替换 VB。]

[VBWebProfi 给出了](https://stackoverflow.com/a/38208166/2613492)TLI 的提示，谢谢。不过，制定细节和编写代码需要几个小时的工作；-)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-14T00:00:04.620

VBScript 本身不支持[`TypeName`](https://docs.microsoft.com/en-us/previous-versions//y58s1cs6%28v%3dvs.85%29)and[`VarType`](https://docs.microsoft.com/en-us/previous-versions//3kfz157h%28v%3dvs.85%29)函数之外的类型自省，它会为您提供对象的类型，但不会让您访问其内部结构。

正如其他答案所解释的那样，有一个 DLL 可以提供此功能，但它不随 Windows 一起提供，并且由于它是 Visual Studio 旧版本的一部分，现在可能没有合法的方式来获取它。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-02-26T16:51:11.323

虽然这部分正确，但它不完整.... Google、GetObjectText_、Methods_ 和 Propeties_

引用的方法仅适用于通过 WbemScripting.SWbemLocator 对象连接到远程主机的 cimv2 命名空间时收集的对象。如果这个对象有能力在本地主机上工作，那对我来说是不明显的。

完成此操作后，您可以查询其中包含的任何类 [Win32_Services、Win32_Drives 等]，并使用对象上的 For-Next 循环询问结果集中的对象，如下所示...

```
For Each oProp in oObject.Properties_
    'be careful here because some propeties may be an object or an array.
    'so test for that here using "typename" or "vartype"
    wScript.Echo oProp.Name & vbTab & oProp
Next 
```

或者...

```
For Each oMethod in oObject.Methods_
    wScript.Echo oProp.Name
Next 
```

最后， ...

```
For Each oProp in oObject.Properties_
   'This will display all of an objects properties
   oProp.GetObjectText_
Next 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-11-04T19:49:37.320

如果您碰巧使用的是 HP UFT 或 QTP，请执行以下步骤：

1) 将任何版本的 MS Visual Studio 安装到您的笔记本电脑上。（不用担心许可，你不会运行 VS）

2) 重新启动计算机。

3) 启动 UFT 或 QTP，加载脚本并按 F11，（或在要检查的对象附近的任何代码处暂停）。

4) 将对象添加到 Watch 窗口。它可以是对象存储库对象或程序描述。

如果对象存在，则该对象现在将在 Watch 窗口中显示两个加号 (+)，可以展开以显示所有可用的方法和属性，以及可以展开的子对象。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-07-05T16:16:48.617

使用 TLI。类`TLI.TLIApplication`(from `tlbinf32.dll`) 可以从它们的实例中检查各种 COM 对象。在 Excel 或其他支持脚本并具有能够添加引用的脚本编辑器的 Microsoft 产品中探索 TLI 库，然后添加`tlbinf32.dll`. 参考文献中的名称是“Typelib 信息”。

但请注意，该 DLL 不随 Windows 一起提供。

使用`InterfaceInfoFromObject()`VBScript 类的方法，或者尝试`ClassInfoFromObject()`.

```
Option Explicit

Dim TLI
Dim MyObject
Dim TypeInfo
Dim MemberInfo

Set TLI = CreateObject("TLI.TLIApplication")
Set MyObject = New MyClass
Set TypeInfo = TLI.InterfaceInfoFromObject(MyObject)

For Each MemberInfo In TypeInfo.Members
    WScript.Echo MemberInfo.Name
Next

Class MyClass
    Dim Name_

    Public Property Get Name
        Name = Name_
    End Property

    Public Property Let Name(ByVal Value)
        Name_ = Value
    End Property
End Class 
```

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2015-11-18T14:52:49.070

试试这个 ...

```
For i = 0 To webElementCount-1 Step 1

  innertextProp = myValue2(i).GetROProperty("innertext")
  print i & innertextProp
  print innertextProp

Next 
```

# android - android中的倒数计时器

> ID：14305752
> 
> 赞同：0
> 
> 时间：2013-01-13T16:53:05.627
> 
> 标签：android, timer

我正在尝试创建一个计时器并在屏幕上显示每个滴答声的计时器。问题是，我得到了一个 javanullexception。

这是我的java代码：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // requesting to turn the title OFF
    requestWindowFeature(Window.FEATURE_NO_TITLE);

    // making it full screen
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);

    setContentView(R.layout.main);

    timer = (TextView)findViewById(R.id.timer);

     getWindow().setFormat(PixelFormat.UNKNOWN);
     surfaceView = (SurfaceView)findViewById(R.id.camerapreview);
     surfaceHolder = surfaceView.getHolder();  
     surfaceHolder.addCallback(this);
     surfaceHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);

     controlInflater = LayoutInflater.from(getBaseContext());
     View viewControl = controlInflater.inflate(R.layout.activity_gameplay, null);
     LayoutParams layoutParamsControl
      = new LayoutParams(LayoutParams.FILL_PARENT,
      LayoutParams.FILL_PARENT);
     this.addContentView(viewControl, layoutParamsControl);

     //Create Timer
     new CountDownTimer(60000, 1000) {

         public void onTick(long millisUntilFinished) {
            timer.setText(String.valueOf(millisUntilFinished / 1000));
         }

         public void onFinish() {

         }
         }.start();

} 
```

这是我的 main.xml：

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:layout_width="fill_parent"
 android:layout_height="fill_parent"
 >
<SurfaceView
android:id="@+id/camerapreview"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
/>
</LinearLayout> 
```

这是我的 activity_gameplay.xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_alignParentBottom="true"
android:layout_alignParentRight="true">

    <TextView
        android:id="@+id/timer"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/lifefull" 
        android:layout_marginLeft="10dp"
        android:layout_marginTop="10dp"
        android:text="Timer : "
        android:textSize="20dp"
        android:textColor="#FFFF00" 
        android:textStyle="bold"
        android:layout_marginBottom="10dp"
        android:layout_marginRight="10dp"/>

</LinearLayout> 
```

堆栈跟踪：

```
01-14 00:57:37.192: E/AndroidRuntime(1235): FATAL EXCEPTION: main
01-14 00:57:37.192: E/AndroidRuntime(1235): java.lang.NullPointerException
01-14 00:57:37.192: E/AndroidRuntime(1235):     at com.example.gems.GamePlay$1.onTick(GamePlay.java:62)
01-14 00:57:37.192: E/AndroidRuntime(1235):     at android.os.CountDownTimer$1.handleMessage(CountDownTimer.java:124)
01-14 00:57:37.192: E/AndroidRuntime(1235):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-14 00:57:37.192: E/AndroidRuntime(1235):     at android.os.Looper.loop(Looper.java:137)
01-14 00:57:37.192: E/AndroidRuntime(1235):     at android.app.ActivityThread.main(ActivityThread.java:4745)
01-14 00:57:37.192: E/AndroidRuntime(1235):     at java.lang.reflect.Method.invokeNative(Native Method)
01-14 00:57:37.192: E/AndroidRuntime(1235):     at java.lang.reflect.Method.invoke(Method.java:511)
01-14 00:57:37.192: E/AndroidRuntime(1235):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
01-14 00:57:37.192: E/AndroidRuntime(1235):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
01-14 00:57:37.192: E/AndroidRuntime(1235):     at dalvik.system.NativeStart.main(Native Method) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T16:55:10.180

您必须从布局膨胀中访问计时器，因为那是它实际所在的位置。

```
timer = (TextView)viewControl.findViewById(R.id.timer); 
```

所以这条线需要在你膨胀之后。

# python - 在 python x,y 中使用 gspread python lib

> ID：14305754
> 
> 赞同：0
> 
> 时间：2013-01-13T16:53:08.820
> 
> 标签：python, pythonxy

```
import gspread 
```

# 其余的代码。

错误 ：

**Traceback（最近一次调用最后一次）：文件“C:\QSTK\Examples\MyCodes\gspread.py”，第 1 行，在 import gspread**

当我尝试在 spyder 中运行代码时，出现此错误。

代码在 python idle 中工作正常

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T16:55:08.243

重命名您的脚本。您将其命名为与您尝试使用的模块相同的名称`gspread`，这会导致循环依赖。

# nsis - NSIS：在 .onInit (MUI2) 中为 MessageBox 使用选定的语言

> ID：14305761
> 
> 赞同：3
> 
> 时间：2013-01-13T16:54:08.497
> 
> 标签：nsis

我尝试在 .onInit 方法中获取本地化消息框，该方法失败并显示以下代码：

```
!insertmacro MUI_LANGUAGE "English"
!insertmacro MUI_LANGUAGE "German"

LangString Message ${LANG_ENGLISH} "This is a message."
LangString Message ${LANG_GERMAN} "Dies ist eine Nachricht"

Function .onInit
  !insertmacro MUI_LANGDLL_DISPLAY
  MessageBox MB_OK "$(Message)"
FunctionEnd 
```

MessageBox 始终显示相同的语言字符串。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T16:54:08.497

问题是，语言是在.onInit 方法*之后处理的。*

解决此问题的方法是将自定义代码从 .onInit 方法放入 .onGUIInit 方法。

使用 MUI2 可以按如下方式完成：

```
!define MUI_CUSTOMFUNCTION_GUIINIT myGuiInit

!include "MUI2.nsh"

!insertmacro MUI_LANGUAGE "English"
!insertmacro MUI_LANGUAGE "German"

LangString Message ${LANG_ENGLISH} "This is a message."
LangString Message ${LANG_GERMAN} "Dies ist eine Nachricht"

Function .onInit
  !insertmacro MUI_LANGDLL_DISPLAY
FunctionEnd

Function myGuiInit
  MessageBox MB_OK "$(Message)"
FunctionEnd 
```

现在 MessageBox 应该显示正确本地化的消息。

# java - 使用通用图像加载器的 FileNotFoundException

> ID：14305765
> 
> 赞同：7
> 
> 时间：2013-01-13T16:54:22.817
> 
> 标签：java, android, universal-image-loader

这个问题是关于这个流行的 Android 库，**Universal Image Loader for Android**：[https ://github.com/nostra13/Android-Universal-Image-Loader](https://github.com/nostra13/Android-Universal-Image-Loader)

1.  我确保添加了 WRITE_EXTERNAL_STORAGE。
2.  我启用了内存和磁盘缓存
3.  我使用 UnlimitedDiscCache 进行磁盘缓存
4.  我正在针对 Android 2.2 SDK 构建。当我在 Android 4.1.2 Nexus S 设备上测试应用程序时发现异常。
5.  对于我的大多数图像，加载都很流畅。但是，对于某些图像，我总是遇到同样的异常。下面是一个例子。

图片网址：http: [//i10.topit.me/l046/10046137034b1c0db0.jpg](http://i10.topit.me/l046/10046137034b1c0db0.jpg)

回溯：

```
01-14 00:24:42.125: 

ERROR/ImageLoader(1671): http://i10.topit.me/l046/10046137034b1c0db0.jpg

java.io.FileNotFoundException: http://i10.topit.me/l046/10046137034b1c0db0.jpg

at libcore.net.http.HttpURLConnectionImpl.getInputStream(HttpURLConnectionImpl.java:177)

at com.nostra13.universalimageloader.core.download.URLConnectionImageDownloader.getStreamFromNetwork(URLConnectionImageDownloader.java:40)

at com.nostra13.universalimageloader.core.download.ImageDownloader.getStream(ImageDownloader.java:27)

at com.nostra13.universalimageloader.core.LoadAndDisplayImageTask.saveImageOnDisc(LoadAndDisplayImageTask.java:296)

at com.nostra13.universalimageloader.core.LoadAndDisplayImageTask.tryLoadBitmap(LoadAndDisplayImageTask.java:204)

at com.nostra13.universalimageloader.core.LoadAndDisplayImageTask.run(LoadAndDisplayImageTask.java:128)

at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:442) 
```

请帮忙。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-05T14:03:20.683

跟进：

我终于在不更改一行服务器代码的情况下解决了我的问题。我所做的是用 HttpClientImageDownloader 替换默认**的****URLConnectionImageDownloader**

 **代码示例：

```
 HttpParams params = new BasicHttpParams();
        // Turn off stale checking. Our connections break all the time anyway,
        // and it's not worth it to pay the penalty of checking every time.
        HttpConnectionParams.setStaleCheckingEnabled(params, false);
        // Default connection and socket timeout of 10 seconds. Tweak to taste.
        HttpConnectionParams.setConnectionTimeout(params, 10 * 1000);
        HttpConnectionParams.setSoTimeout(params, 10 * 1000);
        HttpConnectionParams.setSocketBufferSize(params, 8192);

        // Don't handle redirects -- return them to the caller. Our code
        // often wants to re-POST after a redirect, which we must do ourselves.
        HttpClientParams.setRedirecting(params, false);
        // Set the specified user agent and register standard protocols.
        HttpProtocolParams.setUserAgent(params, "some_randome_user_agent");
        SchemeRegistry schemeRegistry = new SchemeRegistry();
        schemeRegistry.register(new Scheme("http", PlainSocketFactory.getSocketFactory(), 80));
        schemeRegistry.register(new Scheme("https", SSLSocketFactory.getSocketFactory(), 443));

        ClientConnectionManager manager = new ThreadSafeClientConnManager(params, schemeRegistry);

        ImageLoaderConfiguration config =
                new ImageLoaderConfiguration
                        .Builder(MainActivity.sharedMainActivity.getApplicationContext())
                        .defaultDisplayImageOptions(defaultOptions)
                        .discCache(new UnlimitedDiscCache(cacheDir))
                        .threadPoolSize(1)
                        .memoryCache(new WeakMemoryCache())
                        .imageDownloader(new HttpClientImageDownloader(new DefaultHttpClient(manager, params)))
                        .build(); 
```

:)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-13T17:02:11.760

寻找实施`libcore.net.http.HttpURLConnectionImpl.getInputStream()`

```
 @Override
    public InputStream getInputStream() throws IOException {
        if (!doInput) {
            throw new ProtocolException("This protocol does not support input");
        }

        retrieveResponse();

        /*
         * if the requested file does not exist, throw an exception formerly the
         * Error page from the server was returned if the requested file was
         * text/html this has changed to return FileNotFoundException for all
         * file types
         */
        if (responseCode >= HTTP_BAD_REQUEST) {
            throw new FileNotFoundException(url.toString());
        }

        if (responseBodyIn == null) {
            throw new IOException("No response body exists; responseCode=" + responseCode);
        }

        return responseBodyIn;
    } 
```

据此，即使发生服务器错误或未经授权，它也可以抛出 FileNotFoundException。

我没有找到 HTTP_BAD_REQUEST 的值，但它总是 400。源代码链接 [http://www.java2s.com/Open-Source/Android/android-core/platform-libcore/org/apache/harmony/luni/internal/网络/www/protocol/http/HttpURLConnectionImpl.java.htm](http://www.java2s.com/Open-Source/Android/android-core/platform-libcore/org/apache/harmony/luni/internal/net/www/protocol/http/HttpURLConnectionImpl.java.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-05T10:00:41.827

您唯一能做的就是完全禁用日志记录`L.disableLogging()`。或者根据您的需要更改来源。资料来源：[nostra13 对此问题的回答](https://github.com/nostra13/Android-Universal-Image-Loader/issues/558)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-30T16:51:10.730

此配置调整是自定义的。您可以调整每个选项，您可以调整其中的一些，或者您可以通过`ImageLoaderConfiguration.createDefault(this);`方法创建默认配置。

```
 public static void initImageLoader(Context context) {

    ImageLoaderConfiguration.Builder config = new ImageLoaderConfiguration.Builder(context);
    config.threadPriority(Thread.NORM_PRIORITY - 2);
    config.denyCacheImageMultipleSizesInMemory();
    config.diskCacheFileNameGenerator(new Md5FileNameGenerator());
    config.diskCacheSize(50 * 1024 * 1024); // 50 MiB
    config.tasksProcessingOrder(QueueProcessingType.LIFO);
    config.writeDebugLogs(); // Remove for release app

    // Initialize ImageLoader with configuration.
    ImageLoader.getInstance().init(config.build());
} 
```

我希望这对任何人都有帮助。**

# javascript - 如何远程模拟下拉选择

> ID：14305766
> 
> 赞同：1
> 
> 时间：2013-01-13T16:54:24.830
> 
> 标签：javascript, jquery, prototypejs, dom-events

我有几个下拉选择菜单，其中第一个的选择会更改第二个的选项，第二个的选择会更改第三个的选项，依此类推。

我想远程模拟下拉菜单中的更改（即没有用户单击选择菜单），这将激活 Javascript 以设置下一个下拉菜单的选项。仅设置选择菜单的值 - `document.getElementById('...').value='....'`- 不会刺激下拉菜单上的 Javascript 事件。

注意：我无权访问控制选择菜单的 Javascript，也不知道它在选择菜单上查找哪个触发器（我假设为“onselect”）。

我正在使用 Javascript 和 jQuery 库。当然，我需要解决方案来跨浏览器工作。

这是为下拉列表设置侦听器的整个 js 代码（似乎在原型中）：

```
/**************************** CONFIGURABLE PRODUCT **************************/
Product.Config = Class.create();
Product.Config.prototype = {
    initialize: function(config){
        this.config     = config;
        this.taxConfig  = this.config.taxConfig;
        this.settings   = $$('.super-attribute-select');
        this.state      = new Hash();
        this.priceTemplate = new Template(this.config.template);
        this.prices     = config.prices;

        this.settings.each(function(element){
            Event.observe(element, 'change', this.configure.bind(this))
        }.bind(this));

        // fill state
        this.settings.each(function(element){
            var attributeId = element.id.replace(/[a-z]*/, '');
            if(attributeId && this.config.attributes[attributeId]) {
                element.config = this.config.attributes[attributeId];
                element.attributeId = attributeId;
                this.state[attributeId] = false;
            }
        }.bind(this))

        // Init settings dropdown
        var childSettings = [];
        for(var i=this.settings.length-1;i>=0;i--){
            var prevSetting = this.settings[i-1] ? this.settings[i-1] : false;
            var nextSetting = this.settings[i+1] ? this.settings[i+1] : false;
            if(i==0){
                this.fillSelect(this.settings[i])
            }
            else {
                this.settings[i].disabled=true;
            }
            $(this.settings[i]).childSettings = childSettings.clone();
            $(this.settings[i]).prevSetting   = prevSetting;
            $(this.settings[i]).nextSetting   = nextSetting;
            childSettings.push(this.settings[i]);
        }

        // Set default values - from config and overwrite them by url values
        if (config.defaultValues) {
            this.values = config.defaultValues;
        }

        var separatorIndex = window.location.href.indexOf('#');
        if (separatorIndex != -1) {
            var paramsStr = window.location.href.substr(separatorIndex+1);
            var urlValues = paramsStr.toQueryParams();
            if (!this.values) {
                this.values = {};
            }
            for (var i in urlValues) {
                this.values[i] = urlValues[i];
            }
        }

        this.configureForValues();
        document.observe("dom:loaded", this.configureForValues.bind(this));
    },

    configureForValues: function () {
        if (this.values) {
            this.settings.each(function(element){
                var attributeId = element.attributeId;
                element.value = (typeof(this.values[attributeId]) == 'undefined')? '' : this.values[attributeId];
                this.configureElement(element);
            }.bind(this));
        }
    },

    configure: function(event){
        var element = Event.element(event);
        this.configureElement(element);
    },

    configureElement : function(element) {
        this.reloadOptionLabels(element);
        if(element.value){
            this.state[element.config.id] = element.value;
            if(element.nextSetting){
                element.nextSetting.disabled = false;
                this.fillSelect(element.nextSetting);
                this.resetChildren(element.nextSetting);
            }
        }
        else {
            this.resetChildren(element);
        }
        this.reloadPrice();
//      Calculator.updatePrice();
    },

    reloadOptionLabels: function(element){
        var selectedPrice;
        if(element.options[element.selectedIndex].config){
            selectedPrice = parseFloat(element.options[element.selectedIndex].config.price)
        }
        else{
            selectedPrice = 0;
        }
        for(var i=0;i<element.options.length;i++){
            if(element.options[i].config){
                element.options[i].text = this.getOptionLabel(element.options[i].config, element.options[i].config.price-selectedPrice);
            }
        }
    },

    resetChildren : function(element){
        if(element.childSettings) {
            for(var i=0;i<element.childSettings.length;i++){
                element.childSettings[i].selectedIndex = 0;
                element.childSettings[i].disabled = true;
                if(element.config){
                    this.state[element.config.id] = false;
                }
            }
        }
    },

    fillSelect: function(element){
        var attributeId = element.id.replace(/[a-z]*/, '');
        var options = this.getAttributeOptions(attributeId);
        this.clearSelect(element);
        element.options[0] = new Option(this.config.chooseText, '');

        var prevConfig = false;
        if(element.prevSetting){
            prevConfig = element.prevSetting.options[element.prevSetting.selectedIndex];
        }

        if(options) {
            var index = 1;
            for(var i=0;i<options.length;i++){
                var allowedProducts = [];
                if(prevConfig) {
                    for(var j=0;j<options[i].products.length;j++){
                        if(prevConfig.config.allowedProducts
                            && prevConfig.config.allowedProducts.indexOf(options[i].products[j])>-1){
                            allowedProducts.push(options[i].products[j]);
                        }
                    }
                } else {
                    allowedProducts = options[i].products.clone();
                }

                if(allowedProducts.size()>0){
                    options[i].allowedProducts = allowedProducts;
                    element.options[index] = new Option(this.getOptionLabel(options[i], options[i].price), options[i].id);
                    element.options[index].config = options[i];
                    index++;
                }
            }
        }
    },

    getOptionLabel: function(option, price){
        var price = parseFloat(price);
        if (this.taxConfig.includeTax) {
            var tax = price / (100 + this.taxConfig.defaultTax) * this.taxConfig.defaultTax;
            var excl = price - tax;
            var incl = excl*(1+(this.taxConfig.currentTax/100));
        } else {
            var tax = price * (this.taxConfig.currentTax / 100);
            var excl = price;
            var incl = excl + tax;
        }

        if (this.taxConfig.showIncludeTax || this.taxConfig.showBothPrices) {
            price = incl;
        } else {
            price = excl;
        }

        var str = option.label;
        if(price){
            if (this.taxConfig.showBothPrices) {
                str+= ' ' + this.formatPrice(excl, true) + ' (' + this.formatPrice(price, true) + ' ' + this.taxConfig.inclTaxTitle + ')';
            } else {
                str+= ' ' + this.formatPrice(price, true);
            }
        }
        return str;
    },

    formatPrice: function(price, showSign){
        var str = '';
        price = parseFloat(price);
        if(showSign){
            if(price<0){
                str+= '-';
                price = -price;
            }
            else{
                str+= '+';
            }
        }

        var roundedPrice = (Math.round(price*100)/100).toString();

        if (this.prices && this.prices[roundedPrice]) {
            str+= this.prices[roundedPrice];
        }
        else {
            str+= this.priceTemplate.evaluate({price:price.toFixed(2)});
        }
        return str;
    },

    clearSelect: function(element){
        for(var i=element.options.length-1;i>=0;i--){
            element.remove(i);
        }
    },

    getAttributeOptions: function(attributeId){
        if(this.config.attributes[attributeId]){
            return this.config.attributes[attributeId].options;
        }
    },

    reloadPrice: function(){
        var price    = 0;
        var oldPrice = 0;
        for(var i=this.settings.length-1;i>=0;i--){
            var selected = this.settings[i].options[this.settings[i].selectedIndex];
            if(selected.config){
                price    += parseFloat(selected.config.price);
                oldPrice += parseFloat(selected.config.oldPrice);
            }
        }

        optionsPrice.changePrice('config', {'price': price, 'oldPrice': oldPrice});
        optionsPrice.reload();

        return price;

        if($('product-price-'+this.config.productId)){
            $('product-price-'+this.config.productId).innerHTML = price;
        }
        this.reloadOldPrice();
    },

    reloadOldPrice: function(){
        if ($('old-price-'+this.config.productId)) {

            var price = parseFloat(this.config.oldPrice);
            for(var i=this.settings.length-1;i>=0;i--){
                var selected = this.settings[i].options[this.settings[i].selectedIndex];
                if(selected.config){
                    var parsedOldPrice = parseFloat(selected.config.oldPrice);
                    price += isNaN(parsedOldPrice) ? 0 : parsedOldPrice;
                }
            }
            if (price < 0)
                price = 0;
            price = this.formatPrice(price);

            if($('old-price-'+this.config.productId)){
                $('old-price-'+this.config.productId).innerHTML = price;
            }

        }
    }
} 
```

所有选择菜单都有“超级属性选择”类

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T17:08:20.307

为了这

```
<select name="blah">
    <option value="1">One</option>
    <option value="2">Two</option>
    <option value="3">Three</option>
</select> 
```

你会

```
$('select[name="blah"]').val(3).trigger('change'); 
```

不知道你是在找`.trigger('select');`还是`trigger('onselect');`我从来没用过。

[**演示**](http://jsfiddle.net/wnr8g/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T16:59:12.007

像这样的一些想法可能会起作用：

```
$('select option[value=yourValue]').click(); 
```

或者：

```
$('select').find('option[value=yourValue]').attr('selected', 'selected').end().trigger('onselect'); 
```

# ruby-on-rails - ubuntu 12上的乘客+ apache与SHH的奇怪行为

> ID：14305767
> 
> 赞同：0
> 
> 时间：2013-01-13T16:54:31.210
> 
> 标签：ruby-on-rails, ubuntu, passenger

我安装了 rvm + rails + Passenger + apache 的 ubuntu 12.10 服务器。我有一个奇怪的问题：当我在 windows 上通过 putty 进行 ssh 会话时，应用程序工作正常。关闭会话后，我收到 403 Forbidden 错误！nginx也发生了同样的情况，但是我收到了404错误。我不知道打开 ssh 与此有何关系。有什么线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T19:45:12.143

也许您没有在后台运行 apache（或任何实际运行代码的服务器）服务，一旦您终止 ssh 会话，它就会终止终端，而您的服务仅在该终端上运行？

# c - 如何使用 exec() 命令运行 a.out

> ID：14305777
> 
> 赞同：1
> 
> 时间：2013-01-13T16:55:17.203
> 
> 标签：c

如何像`a.out`使用标准 C 库函数一样运行可执行文件`exec()`。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T16:57:39.467

不管是什么`exec`，它都不是 C 标准。

如果您正在谈论`execve`（POSIX），请查看文档。

```
int execve(const char *filename, char *const argv[], char *const envp[]); 
```

所以：

```
#include <unistd.h>

char *args[] = { "./a.out", /* other arguments */, NULL };

execve("a.out", args, NULL); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T19:39:59.627

可以在[此处](http://pubs.opengroup.org/onlinepubs/009695399/functions/exec.html)找到 exec 函数系列的文档（向下滚动到底部以查看示例）。但是如果你想从你自己的内部运行一个外部程序，你也可以使用[system()](http://pubs.opengroup.org/onlinepubs/009695399/functions/system.html)。我不建议使用它，因为它不是很安全。但是，如果您只是在玩 C，那么使用它应该没问题。

# tree - Dart 树节点示例

> ID：14305782
> 
> 赞同：0
> 
> 时间：2013-01-13T16:56:04.553
> 
> 标签：tree, dart, dartium, dart-webui

我是 dart 的新手，开始构建自己的网页。有没有人有任何关于 dart 中树结构的好例子（类似于 smartgwt treenode）？

如果那里已经有很好的例子，我不想不得不从头开始构建一个。

非常感谢你。

克雷格

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T20:08:18.670

Buckshot UI（类似于 WPF 的 Dart UI 框架）有一个 TreeView 组件——它可以帮助你入门。

查看演示树视图演示：[http ://www.buckshotui.org/sandbox/?demo=treeview](http://www.buckshotui.org/sandbox/?demo=treeview)

并查看源码：[https ://github.com/prujohn/Buckshot/](https://github.com/prujohn/Buckshot/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T17:11:11.727

我不知道这样的小部件（用 dart 写的）是否存在，但如果你找到类似的 Javascript 小部件（看起来[有一些](http://www.ajaxline.com/best-javascript-tree-widgets)），你可以通过[js 包](http://pub.dartlang.org/packages/js)使用它。

# c# - 显示数据视图信息

> ID：14305785
> 
> 赞同：1
> 
> 时间：2013-01-13T16:56:37.720
> 
> 标签：c#, datagridview, radio-button

如何使用 对分配给数据视图的信息进行排序`RadioButtons`？

```
private void btnSearchByGender_Click(object sender, EventArgs e)
{
    DataView data = new DataView(pID2dbDataSet.customer);

    data.RowFilter = "Gender=" + rdoMale.Select();
    customerDataGridView.DataSource = data;
} 
```

到目前为止，我已经有了这个，但我不确定如何选择单选按钮的功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T17:24:31.087

```
private void btnSearchByGender_Click(object sender, EventArgs e)
{
    DataView data = new DataView(pID2dbDataSet.customer);

    string gender;
    if (rdoMale.Checked)
        gender = "Male"
    else
       gender = "Female"
    data.RowFilter = "Gender = '" + gender + "'";
    customerDataGridView.DataSource = data;
} 
```

# r - R grep for aZ 除了 e-

> ID：14305786
> 
> 赞同：1
> 
> 时间：2013-01-13T16:56:53.220
> 
> 标签：r, regex

我有一个`data.frame`假设 5 列和 30 行。我遍历每一列并使用该`grep`函数通过查找字母 aZ 来识别非数字行。我做了很多测试，它似乎工作正常。但是，我刚刚遇到一个数字是 0.0000000009 的情况，它被 R 翻译成 9e-10。这个行/数字被 grep 识别为不是数字，即使它显然是一个数字。我现在的问题是，我怎样才能 grep 字母 aZ 但排除模式“e-”？这是我的 R 代码：

```
for(i in 1:ncol(m)) {

    if(length(grep("[a-zA-Z]", m[,1])) > 0) { # do something...}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T17:17:58.593

只是写它作为答案：

```
df <- data.frame(x = c(1:5, 9e-6, letters[1:5]), y = c(1e-11, rep("e", 5), 6:10))
df$x <- factor(df$x)
df$y <- factor(df$y)
sapply(df, function(w) which(is.na(as.numeric(as.character(w))))) 
```

忽略来自的警告`as.numeric`。

# c# - Windows 8 博客阅读器教程 NullPointerException

> ID：14305787
> 
> 赞同：0
> 
> 时间：2013-01-13T16:56:55.240
> 
> 标签：c#, xaml, microsoft-metro

[我在这里](http://msdn.microsoft.com/en-us/library/windows/apps/jj676792.aspx)关注 Microsoft Windows Blog Reader 示例。

进行到一半时，我得到了 NullPointerException，所以我想我可能没有正确遵循教程。

他们还提供了完整的代码，所以我复制了这个并创建了一个新项目，当我去运行它时，我得到了相同的 NullPointerException。

我很难相信微软会有一个包含错误的教程，所以我想知道它只是我吗？

如果有问题，在哪里可以找到完整的代码？

这是导致异常的行，但不是唯一的。

```
var matches = _feedDataSource.Feeds.Where((feed) => feed.Title.Equals(title)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-03T08:13:00.653

在过去的几天里，我正在开发另一个应用程序：**Channel9 博客阅读器**。它与**Windows 8 博客阅读器**相同，主要区别在于提要链接从“ *windowsteamblog.com* ”或“ *blogs.windows.com* ”更改为“ *channel9.msdn.com* ”。

还有一些小的变化，因为它是 Windows 8.1 应用程序而不是 Windows 8 应用程序，所以如果您阅读这篇关于*将 Windows 8 应用程序迁移到 Windows 8.1 应用程序的*文章会更好：- [将 Win 8 应用程序迁移到赢 8.1 应用程序](http://blogs.windows.com/buildingapps/2013/11/05/managing-your-app-on-windows-8-and-windows-8-1/)

这是应用程序源代码的链接：- [Channel9 博客阅读器应用程序源代码](https://onedrive.live.com/?cid=685D07B09AF813E2&id=685D07B09AF813E2!1170)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T01:52:14.493

正如 Hans 所说，您最好从[http://code.msdn.microsoft.com/windowsapps](http://code.msdn.microsoft.com/windowsapps)获取其中一个示例。

在上述站点访问示例的一个好处是每个示例的代码都可以在线浏览，因此您可以在下载之前了解示例是否适合您的需求。

但另一个很酷的技巧是，您还可以使用 Visual Studio 2012 中的“新建项目”对话框获取这些应用程序。只需使用“文件”>“新建项目”，然后在左侧窗格中查找“在线”部分（见下文）：

![新建项目对话框](../Images/77c00f71f99ef783d3beae090bd04368.png)

进入所选语言的在线部分后，您可以使用右上角的搜索框来筛选您想要示例的功能。在我准备实施新功能时，我经常使用它来了解新功能。

有关开发 Windows 应用商店应用程序的更多信息，请查看[生成应用程序](http://bit.ly/gd30tolaunch)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-30T09:28:12.037

某些提要链接已损坏，因此返回的提要数据包含一些空提要，解析它们会导致此异常。

更改这行代码：

```
var matches = _feedDataSource.Feeds.Where((feed) => feed.Title.Equals(title)); 
```

至 ：

```
var matches = _feedDataSource.Feeds.Where((feed) => feed != null && feed.Title.Equals(title)); 
```

这将忽略那些空提要。

# c# - 转换格式异常处理

> ID：14305788
> 
> 赞同：2
> 
> 时间：2013-01-13T16:56:58.670
> 
> 标签：c#, .net, .net-4.0, exception-handling, formatexception

我正在使用转换器将 a`List<string>`转换为`List<UInt32>`

它做得很好，但是当数组元素之一不可转换时， ToUint32 throw `FormatException`。

我想通知用户失败的元素。

```
try
{
    List<UInt32> MyList = SomeStringList.ConvertAll(new Converter<string, UInt32>(element => Convert.ToUInt32(element)));
}

catch (FormatException ex)
{
      //Want to display some message here regarding element.
} 
```

我正在捕获 FormatException 但找不到它是否包含字符串名称。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T16:58:10.183

您可以使用以下[`TryParse`](http://msdn.microsoft.com/en-us/library/thh25zy8.aspx)方法：

```
var myList = someStringList.ConvertAll(element =>
{
    uint result;
    if (!uint.TryParse(element, out result))
    {
        throw new FormatException(string.Format("Unable to parse the value {0} to an UInt32", element));
    }
    return result;
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-13T17:00:15.267

您可以在 lambda 中捕获异常：

```
List<UInt32> MyList = SomeStringList.ConvertAll(new Converter<string, UInt32>(element =>
{
    try
    {
        return Convert.ToUInt32(element);
    }
    catch (FormatException ex)
    {
       // here you have access to element
       return default(uint);
    }
})); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T17:20:21.587

这是我将在本次比赛中使用的：

```
List<String> input = new List<String> { "1", "2", "three", "4", "-2" };

List<UInt32?> converted = input.ConvertAll(s =>
{
    UInt32? result;

    try
    {
        result = UInt32.Parse(s);
    }
    catch
    {
        result = null;
        Console.WriteLine("Attempted conversion of '{0}' failed.", s);
    }

    return result;
}); 
```

以后您总是可以使用 Where() 方法过滤空值：

```
Where(u => u != null) 
```

# java - 序列化问题java

> ID：14305789
> 
> 赞同：0
> 
> 时间：2013-01-13T16:57:28.997
> 
> 标签：java, file, serialization, xml-serialization, java-3d

我有几个 3D 对象添加到[`TransformGroup`](http://download.java.net/media/java3d/javadoc/1.5.2/index.html?javax/media/j3d/TransformGroup.html). 3D对象不作为变量存在，而是例如添加到`TransformGroup`via[`new Sphere()`](http://download.java.net/media/java3d/javadoc/1.5.2/index.html?com/sun/j3d/utils/geometry/Sphere.html)中，但是`TransformGroup`该类不实现[`Serializable`](http://docs.oracle.com/javase/7/docs/api/index.html?java/io/Serializable.html)接口。
那么，我应该如何将我的对象序列化为文件并在读取文件时访问我的对象？

PS我真的不知道如何序列化为XML文件，我不确定这是否是我需要的一个好选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T18:56:32.043

不仅`TransformGroup`，而且您的个人原语`Sphere`也都缺少`Serializable`接口。因此，尽管您可以很容易地获得所有孩子的列表，但序列化该列表并不是向前迈出的一大步。至少乍一看，这些对象*看起来像 Java Bean。*如果它们确实是，那么您可以使用 a[`XMLEncoder`](http://docs.oracle.com/javase/7/docs/api/index.html?java/beans/XMLEncoder.html)来序列化它们。请注意，以这种方式生成的 XML 可能包含相当多的任意 Java 命令，因此从不受信任的源反序列化此类文件可能存在安全隐患。我想有第三方 Bean 编码器可以避免这个问题。但这`XMLEncoder`可能是一个合理的第一步，看看这是否有效，或者如果没有，它会在哪里失败。

# lua - 如何在 Linux 系统上安装多个版本的 Lua（并让它们与 Luarocks 一起工作）？

> ID：14305796
> 
> 赞同：5
> 
> 时间：2013-01-13T16:57:59.427
> 
> 标签：lua, luarocks

我想在我的 Linux 计算机上同时安装 Lua 5.2 和 5.1。这只是以通常的方式安装每个版本的问题`make linux install`还是还有其他问题？特别是，我担心头文件和库文件，因为它们似乎位于没有以版本号命名的目录中，例如 /usr/local/include。

除此之外，是否可以设置 Luarocks 以便它可以同时安装 5.1 和 5.2 库？我知道 Luarocks 命名空间在 5.2 或 5.1 目录中，然后设置 LUA_PATH_5_X 和 LUA_CPATH_5_X 变量应该可以用于配置 Lua，但我不明白 Luarocks 如何决定编译 C 库的 Lua 版本。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-09-01T12:56:25.140

你可以使用[luaver](https://github.com/DhavalKapil/luaver)来安装、管理和切换不同版本的 lua。这是一个非常易于使用的程序。

要安装`luaver`运行：

> 卷曲[https://raw.githubusercontent.com/dhavalkapil/luaver/master/install.sh](https://raw.githubusercontent.com/dhavalkapil/luaver/master/install.sh) -o install.sh && 。./install.sh

然后就可以安装和使用多个版本的lua了，如下：

> luaver install 5.3.1 # 安装lua 5.3.1版本
> 
> luaver install 5.3.0 # 安装 lua 版本 5.3.0
> 
> luaver use 5.3.1 # 切换到 lua 版本 5.3.1

有关详细信息，请参阅[https://dhavalkapil.com/luaver/ 。](https://dhavalkapil.com/luaver/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T17:32:36.000

如果您想使用`make linux install`但创建名称空间，请相应地编辑`Makefile`和更改`INSTALL_TOP`其他变量。

# iphone - Xcode - NSTimeInterval 年双值，如何获得更多小数？

> ID：14305799
> 
> 赞同：0
> 
> 时间：2013-01-13T16:58:15.893
> 
> 标签：iphone, objective-c, xcode, nstimeinterval, decimal

我不知道 2 个 NSDate 之间到底有多少年。（当前日期和日期选择器日期）

我正在使用 NSTimeInterval (seconds) 如何使它达到几年？

此代码将使值为 Years：

```
NSTimeInterval distanceBetweenDates = [now timeIntervalSinceDate:date];

double secondsInAnYear = 31536000;
double YearsBetweenDates = distanceBetweenDates / secondsInAnYear;

NSString *dateString = [NSString stringWithFormat:@"%f", YearsBetweenDates];

labelView.text = dateString; 
```

但我只得到 6 位小数！

我想要超过 6 位小数。如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T17:19:34.800

看看`-[NSCalendar (NSDateComponents *)components:(NSUInteger)unitFlags fromDate:(NSDate *)startingDate toDate:(NSDate *)resultDate options:(NSUInteger)opts]`。这样计算正确。您不能假设一年总是正好是 31536000 秒（闰年，甚至是偶尔添加的闰秒）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T17:03:35.623

您是否尝试过使用which 是/值`%lf`的指定说明符？`long float``double`

```
NSString *dateString = [NSString stringWithFormat:@"%lf", YearsBetweenDate]; 
```

# python - 如何在 PyQt4 中 loadFinished 后返回值

> ID：14305800
> 
> 赞同：1
> 
> 时间：2013-01-13T16:58:23.383
> 
> 标签：python, qt, pyqt, pyside

我有一个脚本，效果很好：

```
if __name__ == '__main__':
    app = QApplication(sys.argv)
    bot = GBot()
    bot.search('hot tea', num=20)
    if signal.signal(signal.SIGINT, signal.SIG_DFL):
        sys.exit(app.exec_())
    app.exec_() 
```

当我调用 search() 时，程序开始工作，并加载网站：

```
def _loadFinished(self, ok):
        current_url = self.page().currentFrame().url().toString()
        if str(current_url).endswith('.com/'):
            self.home_search()
        else:
            self.get_links_text_from_page()

        if self.count >= self.desired_number_of_results:
            self.close() 
```

加载完成 1 次后，它会检查另一个条件并决定下一步做什么。最后，程序加载多个网站后。所需数据收集在名为 的变量中`self.results`。

所以我的问题是如何通过检查 loadFinished() 的条件从 search() 返回结果。

换句话说，我需要想出某种算法来检查 loadFinished 是否不会加载任何其他网站，并且`search()`函数将返回所需的变量。我正在考虑创建另一个变量`self.result = False`，而不是更改条件中`loadFinished()`的`search()`所有内容`while loop`，然后再更改`return`结果。但它不起作用...

# 搜索（）

```
def search(self, keyword, num=None, output=None):
    self.keyword = keyword
    if output is "json":
    # need to return `self.results` ONLY after program finished. because before that,
    # this variable is empty
    self.load('somewebsite.com')
    pass 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T06:46:04.640

看起来你可以在这里使用生成器。在此`QWebView`示例中，`loadWebsites`调用 until`StopIteration`引发，在这种情况下`procDone`，将与加载的网站数量一起发出。该信号的输出被捕获在 slot 中`on_procDone`。（这种情况下的输出是`3`，因为`["http://www.example.com"]*3`）：

```
#!/usr/bin/env python
#-*- coding:utf-8 -*-

from PyQt4 import QtCore, QtGui, QtWebKit, QtNetwork

class myWindow(QtWebKit.QWebView):
    procDone = QtCore.pyqtSignal(int)

    def __init__(self, parent=None):
        super(myWindow, self).__init__(parent)

        self.websites      = iter(["http://www.example.com"]*3)
        self.websitesTotal = 0

        self.loadFinished.connect(self.on_loadFinished)
        self.procDone.connect(self.on_procDone)

        self.loadWebsites()

    def loadWebsites(self):
        try:
            website = self.websites.next()

        except StopIteration:
            self.procDone.emit(self.websitesTotal)

        else:
            self.load(QtCore.QUrl(website))

    @QtCore.pyqtSlot(bool)
    def on_loadFinished(self, ok):
        self.websitesTotal += 1
        print "Loaded: {0}".format(self.url().toString())
        self.loadWebsites()

    @QtCore.pyqtSlot(int)
    def on_procDone(self, total):
        print "Total of websites: {0}".format(total)
        self.websitesTotal = 0

if __name__ == "__main__":
    import sys

    app = QtGui.QApplication(sys.argv)
    app.setApplicationName('myWindow')

    main = myWindow()
    main.show()

    sys.exit(app.exec_()) 
```

# vb6 - VB6：标准差失败

> ID：14305803
> 
> 赞同：0
> 
> 时间：2013-01-13T16:58:27.930
> 
> 标签：vb6

我有一个代码来计算标准偏差：

```
Public Function StandardDeviation(ByRef arr() As Double) As Double

'standard deviation
Dim sum As Double
Dim sumSquare As Double
Dim value As Double
Dim count As Long
Dim index As Long
sum = 0
sumSquare = 0
value = 0
count = 0
index = 0

' evaluate sum of values
For index = LBound(arr) To UBound(arr)
    value = arr(index)
    count = count + 1
    sum = sum + value
    sumSquare = sumSquare + value * value
Next

StandardDeviation = Sqr((sumSquare - (sum * sum / count)) / count)

End Function 
```

它似乎工作正常。

碰巧的是，这些值有时都是相同的，例如：

```
 0.419208025523645
    0.419208025523645
    0.419208025523645
    0.419208025523645
    0.419208025523645
    0.419208025523645
    0.419208025523645
    0.419208025523645
    0.419208025523645
    0.419208025523645
    0.419208025523645
    0.419208025523645
    0.419208025523645
    0.419208025523645
    0.419208025523645
    0.419208025523645
    0.419208025523645
    0.419208025523645
    0.419208025523645
    0.419208025523645
    0.419208025523645
    0.419208025523645
    0.419208025523645
    0.419208025523645
    0.419208025523645
    0.419208025523645
    0.419208025523645
    0.419208025523645
    0.419208025523645
    0.419208025523645
    0.419208025523645
    0.419208025523645
    0.419208025523645
    0.419208025523645
    0.419208025523645
    0.419208025523645
    0.419208025523645
    0.419208025523645
    0.419208025523645
    0.419208025523645
    0.419208025523645
    0.419208025523645
    0.419208025523645
    0.419208025523645
    0.419208025523645
    0.419208025523645
    0.419208025523645
    0.419208025523645
    0.419208025523645
    0.419208025523645 
```

在这种情况下，我在这一行中收到错误“无效参数”：

```
StandardDeviation = Sqr((sumSquare - (sum * sum / count)) / count) 
```

有人看到我的错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T19:49:41.870

我的猜测是你遇到了一个问题，你“试​​图”取负值的平方根。当数字都相同时，sumSquare 应该与 (sum * sum / count) 相同。

我建议使用以下代码。

```
If ((sum * sum / count)) > sumSquare Then
    StandardDeviation = 0
Else
    StandardDeviation = Sqr((sumSquare - (sum * sum / count)) / count)
End If 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T15:11:54.543

您可以通过删除循环外的计数器来加快计算速度

```
For index = LBound(arr) To UBound(arr)
  value = arr(index)
  sum = sum + value
  sumSquare = sumSquare + value * value
Next

count = UBound(arr) - LBound(arr)  + 1 
```

# selenium - 使用 Javascript 进行敏捷开发

> ID：14305806
> 
> 赞同：4
> 
> 时间：2013-01-13T16:58:52.193
> 
> 标签：selenium, cucumber, jasmine, mocha.js, zombie.js

我希望在后端基于*web2py*和前端基于*Ember的项目中采用敏捷开发。*为此，我想使用*行为驱动开发 (BDD)*工具，例如*Cucumber*和*Capybara* for *Rails*。*一个隐含的要求是编写用户故事的团队成员应该能够编写和运行 BDD 测试，而无需深入了解正在开发的代码*。

我认为`Cucumber.js`结合`Zombie.js`or`Selenium`将是一个很好的方法，但是还有`Jasmine`and `Mocha`。两者都声称为 JavaScript 启用*BDD*测试，但我觉得它们更适合*单元测试*，而不是通过模拟真实用户如何与应用程序交互来测试 Web 应用程序。

*任何尝试过BDD*的人都可以`Cucumber.js`分享`Jasmine`他们`Mocha`的观点，即哪一个是使用 javascript 进行 BDD 的更好选择吗？

另外，还有其他选择吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T17:35:59.667

对于完整的 BDD 测试堆栈，您可以使用：

1）[cucumber.js](https://github.com/cucumber/cucumber-js) + [selenium](http://seleniumhq.org/) + [Soda](https://github.com/LearnBoost/soda)（或其他节点适配器）+ [node.js](http://nodejs.org/)

**或者**

2)[黄瓜](https://github.com/cucumber/cucumber-js).js +[僵尸.js](http://zombie.labnotes.org/) +节点[.js](http://nodejs.org/)

我个人会选择第二个选项，因为 cucumber.js 在解析用 Gherkin 语法编写的场景/功能/步骤定义后为您提供了存根 javascript 代码。您可以使用此代码并另外设置您的僵尸世界，并为您的测试套件提供所有必要的断言辅助函数，并且您已全部设置完毕。我在 selenium 中看到的唯一优势是他的 Webdriver 功能（酱实验室等）和记录功能，但我认为zombie.js 中用于驱动测试的语法非常严格，也许你不需要所有功能硒为您提供。

关于 mocha 和 jasmine，如果您想要 Gherkin 语法，那么没有人会为您提供此功能，但是如果您想以 Rspec 语法样式编写所有测试，您可以使用其中之一而不是 cucumber.js，这完全取决于重要程度Gherkin 风格适合您。

# c++ - 我不断收到错误消息：“没有运算符 >> 与 int 和 bool 的变量匹配”。在 >> 运算符重载中

> ID：14305809
> 
> 赞同：1
> 
> 时间：2013-01-13T16:59:00.370
> 
> 标签：c++, overloading, operands

```
class user
{
private:
    std::string  first_name;
    std::string middle_name;
    std::string  last_name;
     int ID;
     static int next_id;

public:

         static int next_user_id()
        {
        next_id++;
        return next_id;
        }
        group User_Group;   
        void set_ID(int c)
        {
        ID=c;
        }
        int get_ID()
        {
        return ID;
        }
        void set_first_name(std::string c)
        {
            first_name=c;
        }
        string get_first_name()
        {
        return first_name;
        }
        void set_middle_name(std::string c)
        {
            middle_name=c;
        }
        string get_middle_name()
        {
            return middle_name;
        }
        void set_last_name(std::string c)
        {
            last_name=c;
        }
        string get_last_name()
        {
             return last_name;
        }
        user()
        {
            ID = user::next_id++;
        }
friend istream operator>>(istream is, user User);
friend ostream operator<<(ostream os, user User);
};
int user::next_id;
istream operator>>(istream is, user User)
{
    is >> User.get_first_name();
    is >> User.get_middle_name();
    is >> User.get_last_name();
    is >> User.get_ID();
    is >> User.User_Group.get_name();
    for(int j=0;j<=4;j++)
    {
        is >> User.User_Group.Week_Food[j].get_breakfsat();
        is >> User.User_Group.Week_Food[j].get_lunch();
        is >> User.User_Group.Week_Food[j].get_dinner();
    }
    for (int j=0;j<=30;j++) 
    {
        is >> User.User_Group.Month_Food[j].get_breakfsat();
        is >> User.User_Group.Month_Food[j].get_lunch();
        is >> User.User_Group.Month_Food[j].get_dinner();
    }
}

ostream operator<<(ostream os, user User)
{
    os<<User.get_first_name()<<" "<< User.get_middle_name() <<" "<<User.get_last_name()<<" ";
        for(int j=0;j<=4;j++)
        {
        os<<User.User_Group.Week_Food[j].get_breakfsat()<<" "<<User.User_Group.Week_Food[j].get_lunch()<<" "<< User.User_Group.Week_Food[j].get_dinner()<<" ";
        }
        for (int j=0;j<=30;j++) 
        {
        os<< User.User_Group.Month_Food[j].get_breakfsat()<<" "<<User.User_Group.Month_Food[j].get_lunch()<<" "<<User.User_Group.Month_Food[j].get_dinner();
        }
} 
```

我是 C++ 新手，也许这是一个愚蠢的问题，但我需要将对象数组写入文件并通过重载 << 和 >> 运算符从那里读取它。当我尝试将它用于 int 和 bool 类的成员时，我得到了错误。它似乎适用于字符串类型，所以我不知道如何继续。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T17:00:37.377

问题之一在这里：

```
is >> User.get_ID(); 
```

`get_ID()`返回一个`int`按值。为了将值“流式传输”到`ID`变量中，您需要返回对它的（非常量）引用：

```
class user {
  ....
  int& get_ID() { return ID; }  // non-const version (e.g. for istream)
  const int& get_ID() { return ID; } // const version
  ...
 }; 
```

此外，您需要运算符获取和返回对流的引用：

```
friend istream& operator>>(istream& is, user User);
friend ostream& operator<<(ostream& os, user User); 
```

您可能还希望`User`通过传递引用来避免复制对象：

```
friend istream& operator>>(istream& is, user& User); // modifies user so no const
friend ostream& operator<<(ostream& os, const user& User); // should not modify user 
```

这将要求您制作 getter 方法`const`，无论如何您都应该这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T17:45:46.213

在您的阅读器功能中，您有这样的行：

```
is >> User.get_first_name();
is >> User.get_middle_name();
is >> User.get_last_name();
is >> User.get_ID(); 
```

这些函数返回*左*值或可以*从*不能*写入的*东西中读取的值。您*可以*像这样添加这些函数的重载：

```
int & get_ID() // Note return of reference to member variable!
{
return ID;
} 
```

但是随后您将不得不使您现在拥有的 getter 为 const （无论如何您都应该这样做，因为它们查询对象 - 而不是更改它）：

```
int get_ID() const // <- note const - meaning this fn doesn't change user.
{
return ID;
} 
```

这是因为重载不能仅通过返回类型来区分。使 getter const 使隐式 this 参数 const&。

说了这么多，我*不会*添加返回引用的重载。这是不好的做法，因为它会以潜在的破坏性方式暴露您的成员变量。我建议从 istream 读取本地变量，然后使用您的设置器。这就是他们的目的。

```
int myID;
is >> myID;
set_ID(myID); 
```

这开启了以下可能性：

1.  您的设置器可以通过直接读取您的类对象来检查您的输入短路。

2.  您可以在从输入流中读取后添加一个检查是否存在错误。

这为您提供了灵活性。我发现最好保护自己免受格式错误的文件和数据库的侵害。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T17:57:13.140

代码无法编译的原因是您正在读入一个临时文件，编译器不允许您这样做。关键是调用`get_ID()`返回用户结构中值的*副本*（！）。如果您随后在该副本中存储了一些值，那么无论如何它都会使原始文件保持不变。请记住，默认情况下，所有传递给函数和从函数返回的参数都会被复制。

要解决此问题，而不是使用`is >> User.get_ID()`use `is >> User.ID`。我会为输出做类似的事情，但这并不重要。您可以访问这些私有变量，因为`operator>>`and`operator<<`是友元函数。

# c# - EF Code First 使用现有映射类的多对多映射

> ID：14305812
> 
> 赞同：4
> 
> 时间：2013-01-13T16:59:11.240
> 
> 标签：c#, entity-framework, ef-code-first

我有三个班

```
public class User
{
    public int Id { get; set; }
    public string Name { get; set; }
    public virtual ICollection<Product> Products { get; set; }
}

public class Product
{
    public int Id { get; set; }
    public string Name { get; set; }
    public virtual ICollection<User> Users { get; set; }
}

public class ProductXUser // Mapping class
{
    public int Id { get; set; }
    public int User_Id { get; set; }
    public int Product_Id { get; set; }
    public DateTime DateMapped { get; set; }
} 
```

如何使用类作为映射表在`User`类和类之间映射多对多关系（使用 Fluent API） ？`Product``ProductXUser`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T17:12:20.417

你不能。一旦将联结表公开为实体，就不能使用多对多关系。您必须改为使用两个一对多关系。一个从`User`to `ProductXUser`，第二个从`Product`to `ProductXUser`。`Product`您还必须更改和中的导航属性`User`以指向`ProductXUser`. 仅当您不将联结表作为实体公开时，直接多对多关系才有效。

# php - 查询多个日期变量

> ID：14305817
> 
> 赞同：-3
> 
> 时间：2013-01-13T16:59:35.413
> 
> 标签：php, mysql

我对 PHP 和 MySQL 很陌生。我遇到了一个问题，我会尝试解释我的问题。

```
 TODAY = 2013-01-13 18:37:00
 PRODUCT = P000001 
```

表：组装

```
 -----------------------------------------------------------------
  ∣ PRODUCT ∣ COMPONENT ∣      BEINFORCE      ∣     WILLEXPIRE      ∣
  -----------------------------------------------------------------
  ∣ P000001 ∣ C000001   ∣ 2013-01-01 18:37:00 ∣ 0000-00-00 00:00:00 ∣
  -----------------------------------------------------------------
  ∣ P000001 ∣ C000002   ∣ 2013-02-01 18:37:00 ∣ 0000-00-00 00:00:00 ∣
  -----------------------------------------------------------------
  ∣ P000001 ∣ C000003   ∣ 2013-01-01 18:37:00 ∣ 2013-01-10 18:37:00 ∣
  ----------------------------------------------------------------- 
```

输出必须是：

```
 -----------------------------------------------------------------
  ∣ PRODUCT ∣ COMPONENT ∣      BEINFORCE      ∣     WILLEXPIRE      ∣
  -----------------------------------------------------------------
  ∣ P000001 ∣ C000001   ∣ 2013-01-01 18:37:00 ∣ 0000-00-00 00:00:00 ∣
  ----------------------------------------------------------------- 
```

从表 ASSEMBLY 查询必须检查 PRODUCT、BEINFORCE 和 WILLEXPIRE 和输出表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T18:46:29.580

如果我对您的理解正确，包括您问题下方的评论，那么您想要其中的那些`ASSEMBLY`行

1.  `BEINFORCE`小于或等于`TODAY`
2.  有一个`WILLEXPIRE`为零，我用它来表示未来的日期
3.  符合`PRODUCT`您的要求

您可以使用以下查询来实现此目的，假设用户变量代表您的参数。您当然也可以使用准备好的查询占位符。

```
SELECT *
FROM ASSEMBLY
WHERE BEINFORCE <= @TODAY
  AND WILLEXPIRE = '0000-00-00 00:00:00'
  AND PRODUCT = @PRODUCT 
```

# asp.net-mvc - 如何在 Razor MVC 3 中显示属性文本而不是 ID

> ID：14305818
> 
> 赞同：2
> 
> 时间：2013-01-13T16:59:43.573
> 
> 标签：asp.net-mvc, data-binding, razor, drop-down-menu

也许这很简单，但是当我在 stackoverflow 或谷歌上搜索时，我找不到好词。

我有一个模型，这个模型包含一个整数的“国家”属性。当我在编辑视图中时，此属性以这种方式使用并且运行良好。

```
@Html.DropDownListFor(model => model.Country, new SelectList(ViewBag.Countries, "IDCountry", "Name")) 
```

在详细信息视图中，我只想显示国家/地区的名称，但我不知道如何！现在，我正在这样做，但它只显示 ID，我找不到给他列表的方法，所以它将它用作数据源或类似的东西来显示“加拿大”而不是 42。

```
@Html.DisplayFor(model => model.Country) 
```

如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T17:04:24.700

> 如何做到这一点？

当然通过使用视图模型：

```
public class CountryViewModel
{
    public int CountryId { get; set; }
    public string CountryName { get; set; }
} 
```

然后您将在应该呈现您的显示视图的控制器操作中填充此视图模型：

```
public ActionResult Display(int id)
{
    Country country = ... go and fetch from your db the corresponding country from the id

    // Now build a view model:
    var model = new CountryViewModel();
    model.CountryId = country.Id;
    model.CountryName = country.Name;

    // and pass the view model to the view for displaying purposes
    return View(model);
} 
```

现在您的视图将被强类型化到视图模型中：

```
@model CountryViewModel
@Html.DisplayFor(x => x.CountryName) 
```

因此，正如您在 ASP.NET MVC 中看到的，您应该始终使用视图模型。考虑在给定视图中需要使用哪些信息，您应该做的第一件事是定义视图模型。然后，为视图提供服务的控制器操作负责填充视图模型。这个视图模型的值来自哪里并不重要。将视图模型视为许多数据源的单一聚合点。

就观点而言，它们应该尽可能地愚蠢。只需使用视图模型中可用的内容。

# ruby - capybara 匹配器在 rspec 中总是 eval 为 TRUE。为什么？

> ID：14305820
> 
> 赞同：1
> 
> 时间：2013-01-13T16:59:59.123
> 
> 标签：ruby, rspec, capybara, padrino

capybara 和 rspec 发生了一些奇怪的事情，我在 Ruby 1.9.3、Padrino 0.10.7、rspec 2.11.0、capybara 2.0.2 上进行了设置。

一个基本的 Padrino 项目设置了 haml 和 rspec（还没有自定义代码！），而不仅仅是加载一个“/”页面（我验证它确实按以下规范中的“puts page.content”呈现）。这是简单的规格。“Bogus”不存在，但“Home”确实......请注意，当我进入控制台时，预期的真/假是正确的，但由于某种原因，匹配器没有正确看到真/假。

到目前为止，我的一个线索在于使用 should have_content('Bogus') 的第二个规范，它报告说 Proc 是预期的......

./spec/controllers/hello_world_spec.rb

```
require 'spec_helper'

require 'capybara'
require 'capybara/rspec'

describe 'The HelloWorld App', :type => :feature do

  context "per documentation" do 
    it "has bogus content" do
      visit '/'
      page.has_content?('Bogus')
    end

    it "does not have bogus content" do
      visit '/'
      page.should have_content("Bogus")
    end
  end

  context "should tests" do 
    it "has bogus content" do
      visit '/'
      page.has_content?('Bogus').should == true
    end

    it "does not have bogus content" do
      visit '/'
      page.has_content?('Bogus').should == false
    end
  end

  context "variables" do 
    it "has bogus content" do
      visit '/'
      result = page.has_content?('Bogus')
      puts result
      result.should == true
    end

    it "has Home content (expect TRUE!)" do
      visit '/'
      result = page.has_content?('Home')
      puts result
      result.should == true
    end

    it "does not have bogus content" do
      visit '/'
      result = page.has_content?('Bogus')
      puts result
      result.should == false
    end
  end
end 
```

spec_helper.rb

```
PADRINO_ENV = 'test' unless defined?(PADRINO_ENV)
require File.expand_path(File.dirname(__FILE__) + "/../config/boot")

def app
  ##
  # You can handle all padrino applications using instead:
  Padrino.application
  # Askme.tap do |app|
  # end
end

RSpec.configure do |conf|
  conf.include Rack::Test::Methods
  Capybara.app = app
end 
```

输出：

```
11:40:57:website >> bundle exec rspec spec/app/controllers/hello_world_controller_spec.rb 
WARNING: Nokogiri was built against LibXML version 2.8.0, but has dynamically loaded 2.7.8

The HelloWorld App
  per documentation
    has bogus content
    does not have bogus content (FAILED - 1)
  should tests
    has bogus content
    does not have bogus content
  variables
false
    has bogus content
true
    has Home content (expect TRUE!)
false
    does not have bogus content

Failures:

  1) The HelloWorld App per documentation does not have bogus content
     Failure/Error: page.should have_content("Bogus")
     TypeError:
       wrong argument type Capybara::RSpecMatchers::HaveText (expected Proc)
     # ./spec/app/controllers/hello_world_controller_spec.rb:16:in `block (3 levels) in <top (required)>'

Finished in 1.66 seconds
7 examples, 1 failure

Failed examples:

rspec ./spec/app/controllers/hello_world_controller_spec.rb:14 # The HelloWorld App per documentation does not have bogus content 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T17:41:26.413

原来罪魁祸首是在 Gemfile 中同时包含“bacon”和“rspec”。Capybara 被介绍到一个使用 bacon 作为测试套件的项目中，并且正在尝试的示例是 rspec。一旦 bacon 从捆绑的 gem 中移除，capybara 规范就会按照文档运行。

由于 bacon 脚本或多或少按原样在 rspec 下运行，因此项目决定是删除 bacon 并使用 rspec 进行测试套件，并对 bacon 脚本进行细微调整以在 rspec 下运行所有​​规范。

# iis - url不变的静态子域转发

> ID：14305823
> 
> 赞同：0
> 
> 时间：2013-01-13T17:00:23.360
> 
> 标签：iis, url-rewriting, url-redirection

运行 IIS7 服务器，我不知道如何设置静态子域 url 重定向。

我想要这个网址：

```
subdomain.mysite.com 
```

转发至：

```
mysite.com/index.php?query=string 
```

但网址仍然看起来像

```
subdomain.mysite.com 
```

在浏览器中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T14:50:04.680

解决方法是在windows服务器的DNS管理器中设置通配符域。 [这](http://dirk.net/2008/05/28/wildcard-host-header-binding-and-subdomains-with-iis7/)是一个不错的解决方法。

# shell - shell - 获取“make”版本的便携方式

> ID：14305824
> 
> 赞同：0
> 
> 时间：2013-01-13T17:00:24.060
> 
> 标签：shell, makefile

我正在为我的包编写自己的“配置”脚本。Makefile 使用了某些版本中添加到 GNU make 中的一些功能（例如：“调用”功能）。我想检查安装的“make”实用程序是否是 GNU 的，以及它是否支持该功能，但我不知道如何去做。

由于“配置”脚本应该是可移植的（我想避免使用 Autoconf、SCons ......以及任何其他，尽管这不是问题）我需要一个可移植的解决方案。我浏览了我的 GNU make 的文档并没有发现任何有用的东西。

提前致谢（当然，如果这个问题无关紧要，或者如果您猜想检查“make”工具的存在性和可用性不是配置工作的一部分，我们深表歉意）。

PS：我刚刚找到了 `make -p' 选项，它的第一行为我打印*了 # GNU Make 3.81*，但是，另外一次，我不知道这是另一个 GNU 扩展还是“标准”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T17:17:30.903

我会跑`make --version`。

如果它是 GNU make，它将类似于：

```
GNU Make 3.81
Copyright (C) 2006  Free Software Foundation, Inc.
This is free software; see the source for copying conditions.
There is NO warranty; not even for MERCHANTABILITY or FITNESS FOR A
PARTICULAR PURPOSE. 
```

所以第一行包含版本版本并表明它是 GNU make。如果第一行包含其他内容，包括可能不支持版本选项的错误消息，则不支持。

您还可以从您的配置脚本中发出一个临时 Makefile，其中包含您需要的那些命令。如果您找到的 make 可以无错误地运行它，即退出代码为 0，那么您很好。无需确定确切的版本。检查功能符合“真正的”自动配置的精神，并且可能比检查版本号和使用它们支持和不支持的隐含知识更可靠。

最后，考虑查看“真正的”configure / autoconf 工具，看看他们是如何做到的——或者甚至使用它来代替你自己的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T17:13:04.477

`make --version`是 GNU 工具的“本地标准”。如果您不打算支持其他`make`s，这足以满足您的目的，假设：

1.  您知道添加了您使用的功能的 GNU make 的版本号，
2.  的其他一些实现`make`不会以`--version`有害的方式解释，也不会将自己描述为`GNU Make 9.99`.

# python - python 正则表达式字母后面必须跟另一个字母

> ID：14305826
> 
> 赞同：0
> 
> 时间：2013-01-13T17:00:32.747
> 
> 标签：python, regex

一个字符串由字母和数字组成，但如果它包含一个“c”，那么“c”后面的字母必须是“h”或“k”，有谁知道如何为 Python 编写这样的正则表达式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T17:10:06.690

我建议如下：

```
^(?!.*c(?![hk]))[^\W_]+$ 
```

**解释：**

```
^       # Start of string
(?!     # Assert that it's not possible to match...
 .*     #  Any string, followed by
 c      #  the letter c
 (?!    #  unless that is followed by
  [hk]  #   h or k
 )      #  (End of inner negative lookahead)
)       # (End of outer negative lookahead).
[^\W_]+ # Match one or more letters or digits.
$       # End of string 
```

`[^\W_]`表示“匹配任何由 匹配的字符`\w`，不包括`_`”。

```
>>> import re
>>> strings = ["test", "check", "tick", "pic", "cow"]
>>> for item in strings:
...     print("{0} is {1}".format(item,
...           "valid" if re.match(r"^(?!.*c(?![hk]))[^\W_]+$", item)
...           else "invalid"))
...
test is valid
check is valid
tick is valid
pic is invalid
cow is invalid 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T17:38:52.910

该表达式`^([^\Wc]*(c[hk])*)*$`也有效。它说整个字符串（从`^`到`$`）必须由重复的块组成，其中每个块有任意数量的非 c 字符，`[^\Wc]*`以及任意数量的`ch`或`ck`对，`(c[hk])*`。

例如：
`re.search(r'^([^\Wc]*(c[hk])*)*$', 'checkchek').group()`
给出
'checkchek'

如果您不想匹配空字符串，请将最后一个替换`*`为`+`. 通常，当输入字符串不匹配时，为避免出现注释中提到的错误，请将搜索结果分配给变量并测试 not none：

```
In [88]: y = re.search(r'^([^\Wc]*(c[hk])*)*$', 'ca')

In [89]: if y:
   ....:     print y.group()
   ....: else:
   ....:     print 'No match'
   ....:     
No match 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-13T17:08:47.760

以下代码检测 myinputstring 中是否存在“c not follow by h or k”，如果是，则打印“problem”：

```
import re
if ((re.findall(r'c(?!(h|k))', myinputstring).length)>0):
    print "problem" 
```

# javascript - 如何优化 requireJS 应用程序设置？

> ID：14305833
> 
> 赞同：0
> 
> 时间：2013-01-13T17:01:42.007
> 
> 标签：javascript, jquery, requirejs

我有一个正在使用的工作应用程序`requirejs`，我正在尝试对其进行优化。我分两步启动应用程序：

首先我从一个设置文件开始`setup.js`，我从页面源代码调用它：

```
<script data-main="../js/setup" src="../js/l/require/require.js"></script> 
```

此文件包含我的要求设置

```
var IS_LOCAL = /(:\/\/localhost|file:\/\/)/.test(document.location.href);

requirejs.config({
    waitSeconds: (IS_LOCAL ? 2 : 45),
    baseUrl: "../js",
    paths: {
        intro: 'intro',
        overrides: 'overrides',
        jquery: 'l/jquery/jquery-1.8.2.min',
        mobile: 'l/jquery-mobile/jquery-mobile-1.3pre.min',
        multiview: 'p/multiview/multiview.min',
        respond: 'p/respond/respond.min',
        i18next: 'p/i18next.min.js'
      },
  shim: {
    'overrides': { deps: ['jquery'] },
    'mobile': { deps: ['jquery'] },
    'multiview': { deps: ['jquery', 'mobile'] },
    'respond': { deps: ['jquery'] },
    'i18next': { deps: ['jquery'] }
  }
});
// launch application - works, but I'm not happy with it
requirejs('overrides','jquery','mobile','multiview','respond','i18next','intro'],
    function (overrides, $, mobile, multiview, respond, i18next, Intro) {
      'use strict';
      Intro.start(overrides, $, mobile, multiview, respond, i18next);
     }
 ); 
```

这“触发”了我的应用程序控制器`intro.js`，如下所示：

```
define([], function () {
    'use strict';
     var start = function () {
        require(['overrides','jquery','mobile','multiview','respond','i18next'], 
            function () {
                // stuff
            }
        ); // end require
     } // end start
     return {
        "start": start
     };
 }); 
```

我还在想办法使用requireJS，所以虽然上面的初始化正确，但我不确定这是否是最好的处理方式。具体来说，我想知道：

**问题：**
1) 在我的 setup.js 文件中，我`Intro.start()`使用大量参数触发。我需要那里的参数还是应该`intro.js`在我进行第二次 require 调用时将它们放在里面？
2）我是否需要第一个要求，因为我需要所有文件，然后触发一个“文件”（介绍），这又需要一切？
3) 如何使 intro.js 中的对象可用？假设我需要`i18next`里面的对象`intro.js`来做一些手动翻译。我是否在垫片中导出并通过我的两个要求？

感谢您的一些见解！

# haskell - Haskell：编写一个函数来添加由函数映射到 Ints 的 Ints 和 Chars

> ID：14305838
> 
> 赞同：1
> 
> 时间：2013-01-13T17:01:57.117
> 
> 标签：haskell

下面的代码非常适合这样的输入：

```
*Main> eval 'y' (21 :: Int)
42
*Main> eval 'x' 'a'
42
*Main> eval (21 :: Int) (21 :: Int)
42
*Main> eval (42 :: Int) 'a'
42 
```

这背后的一般问题是我想添加两件事。添加到`Int`s 并不难实现（它已经内置）。但是我有一个给定的函数（here `geti`），它将 s 解析`Char`为`Int`s 并且我的`add`-function 现在应该添加两个`Int`s 以及`Int`与`Char`（在每个排列中）结合。`Char`s 由函数转换为`geti`s`Int`以便可以添加它们。我想到了另一个解决方案，它可能是：

```
eval (geti 'a') (42 :: Int) 
```

但这对我来说是不可能的。

**所以总的来说，我的问题是：有没有办法让它更简单或更优雅地实现？**

*这是代码：*

```
-- A static function only used to resolve some demo data
geti :: Char -> Int
geti c | c == 'x' = 42
       | c == 'y' = 21
       | c == 'z' = 10
       | otherwise = 0

-- Here comes the problem:
class Eval t1 t2 where 
    eval :: t1 -> t2 -> Int

instance Eval Int Int where
    eval a b = a + b

instance Eval Int Char where
    eval a c = a + (geti c)

instance Eval Char Int where
    eval c b = (geti c) + b

instance Eval Char Char where
    eval c1 c2 = (geti c1) + (geti c2) 
```

PS：我还尝试将[此处](https://stackoverflow.com/questions/14304765/haskell-overload-siginiture-and-return-different-results-for-different-input-ty/14304833#comment19872020_14304833)的解决方案与“通用”（是的，它是 Java 语言，但我是 Haskell 的新手...... sry）函数结合起来，但这不起作用......

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-13T17:11:37.967

我认为为“可以转换为`Int`”构建一个类型类并使用它来实现会更直接`eval`：

```
class Intable a where
   intify :: a -> Int

instance Intable Int where
   intify = id

instance Intable Char where
   intify = geti

eval :: (Intable a, Intable b) => a -> b -> Int
eval a b = intify a + intify b 
```

# jquery - 通过按键打开菜单

> ID：14305840
> 
> 赞同：1
> 
> 时间：2013-01-13T17:01:58.897
> 
> 标签：jquery, menu

好的，所以我在上面有一个菜单。

```
jQuery(document).ready(function()
{
jQuery(".clickMeToOpenMenu").toggle(function()
{ 
jQuery('#menu').stop().animate({'height':'500px'},500)
},function()
{
jQuery('#menu').stop().animate({'height':'0px'},500)
}); 
```

所以这工作得很好，菜单向下滑动然后我点击它。

**现在我的问题是我希望只需按一个键 ( `CTRL`) 即可打开菜单。**

```
jQuery('body, html').live('keypress', openMenu)
});
function openMenu(e)
{
if(e.keyCode == '17') // KEY 17 = CTRL
{
e.preventDefault()
jQuery('.clickMeToOpenMenu').trigger('click');
}
} 
```

将“ `jQuery('.clickMeToOpenMenu').trigger('click');`”放在控制台中可以正常工作并打开菜单，但是当我按下时`CTRL`什么也没发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T17:07:03.647

您需要使用`keydown`事件来表达 ctrl 键事件

```
jQuery('body, html').on('keydown', openMenu)

function openMenu(e) {
  console.log(e.keyCode)
  if (e.keyCode == '17') // KEY 17 = CTRL
  {
    e.preventDefault()
    jQuery('.clickMeToOpenMenu').trigger('click');
  }
} 
```

现场示例（按下 ctrl 键时的警报框）：http: [//jsfiddle.net/YbJ2q/29/show/](http://jsfiddle.net/YbJ2q/29/show/)

来源[http://jsfiddle.net/YbJ2q/29/](http://jsfiddle.net/YbJ2q/29/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-13T17:07:51.963

您不能`CTRL`单独使用 key in `keypress`，因为它是修饰键。

试试`keydown`吧。

# node.js - 如何将一组标准参数传递给 async.js 系列中的每个函数？

> ID：14305843
> 
> 赞同：3
> 
> 时间：2013-01-13T17:02:23.460
> 
> 标签：node.js, middleware, async.js

给定以下 node.js 模块，我将如何调用数组中的函数，`orderedListOfFunctions`将每个函数传递给`response`变量？

```
var async = require("async");
var one = require("./one.js");
var two = require("./two.js");

module.exports = function (options) {

var orderedListOfFunctions = [
    one,
    two
];

return function (request, response, next) {

    // This is where I'm a bit confused...
    async.series(orderedListOfFunctions, function (error, returns) {
        console.log(returns);
        next();
    });

}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T17:18:13.913

您可以[`bind`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)像这样使用：

```
module.exports = function (options) {
  return function (request, response, next) {
    var orderedListOfFunctions = [
      one.bind(this, response),
      two.bind(this, response)
    ];

    async.series(orderedListOfFunctions, function (error, resultsArray) {
      console.log(resultArray);
      next();
    });
}; 
```

当由 调用时，该`bind`调用会`response`添加到提供给`one`和`two`函数的参数列表中`async.series`。

请注意，我还在`next()`回调中移动了结果和处理，因为这可能是您想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-04T15:01:37.730

在不关闭返回函数中的 orderredListOfFunctions 的情况下，符合 OP 的愿望：

```
var async = require("async");
var one = require("./one.js");
var two = require("./two.js");

module.exports = function (options) {

  var orderedListOfFunctions = function (response) {return [
      one.bind(this, response),
      two.bind(this, response)
   ];};

   return function (request, response, next) {
      async.series(orderedListOfFunctions(response), function (error, returns) {
         console.log(returns);
         next();
      });
   };
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-10T07:46:37.097

简单的替代方法是**applyEachSeries** -

```
applyEachSeries(tasks, args..., [callback]) 
```

例子 -

```
function one(arg1, arg2, callback) {
    // Do something
    return callback();
}

function two(arg1, arg2, callback) {
    // Do something
    return callback();
}

async.applyEachSeries([one, two], 'argument 1', 'argument 2', function finalCallback(err) {
    // This will run after one and two
}); 
```

# android - 在不知道其包名称的情况下使用特定应用程序

> ID：14305848
> 
> 赞同：0
> 
> 时间：2013-01-13T17:02:39.187
> 
> 标签：android, android-intent

我的主要目的是在用户单击按钮时打开安装在客户端（用户手机）上的日历应用程序。

问题是那里有这么多不同的 Android 设备，每个都有不同的包名称用于库存日历应用程序。第二个问题是如果用户有第三方日历应用程序，如 Jorte。

所以我想到的是使用 Intent 过滤特定应用程序的解决方案，在本例中为日历应用程序。因此用户可以选择要选择的日历应用程序。[我在这里](http://regis.decamps.info/blog/2011/06/intent-to-open-twitter-client-on-android/)看到了一个例子，但它需要我们知道包名。

基于我上面提到的第一个问题（各种包名）。如何在不需要知道日历包名称的情况下做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T18:54:54.857

根据@M_K，答案是正确的

最后，我使用 PackageManager，循环并过滤包含“日历”一词的包名，并将其存储在列表中。然后循环出列表，让用户从列表中选择要运行的日历应用程序。

谢谢

# jquery - Webgrid：在行单击时获取模型项

> ID：14305850
> 
> 赞同：2
> 
> 时间：2013-01-13T17:02:48.810
> 
> 标签：jquery, asp.net-mvc, webgrid

我正在尝试找到一种使整行可点击的方法。到目前为止，我发现的教程使用表上可见的项目为每一行创建链接。例如

```
$(function(){
    $('tbody tr').live('hover', function(){
        $(this).toggleClass('clickable');
    }).live('click', function(){
        location.href = '/Details/' + $(this).find('td:first').text();  
    }); 
}); 
```

`td`这将使用存储在每行的 html 标记中的模型项。但是，我希望能够使用未存储在表中，而是存储在该行表示的模型项目中的项目。我想使用一个我不想出现在桌子上的 id。

例如，假设我的 webgrid 使用包含参数 SSN、FirstName 和 Lastname 的模型。但我的 webgrid 只显示 FirstNmae 和 Lastname。我想让这些行可点击，而是使用 SSN 来构建点击链接位置。

我想包括一个隐藏的列，我在其中传递 id。然而，隐藏的列确实在表格上创造了一些额外的空间，尽管它们是不可见的；我不想要这个。

我怎样才能做到这一点？单击一行时，如何在模型中获取值而不是在表格中获取值。是否可以使用 id 设置我的列之一，这将是我想用来在行单击时创建链接的模型项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T20:58:59.373

您不必显示该值，但您显然需要能够访问它，正如您似乎已经指出的那样。例如，您可以将其应用为行中元素的 id 属性值，也可以使用隐藏的表单字段。或者，如果您使用的是 HTML5 文档类型，则可以使用[自定义数据属性](http://ejohn.org/blog/html-5-data-attributes/)

# c# - 如何在数据库查询结果中按列值求和结果

> ID：14305854
> 
> 赞同：1
> 
> 时间：2013-01-13T17:03:02.967
> 
> 标签：c#, asp.net, sql, linq

我的数据库有一个销售表，其中包含如下条目：

```
_____________________________________
| id |  title_id   |       qty      |
-------------------------------------
| 0  |  6          |        10      |
-------------------------------------
| 1  | 5           |        5       |
-------------------------------------
| 2  |  6          |        2       |
------------------------------------- 
```

Title_id 是指向 Titles 表的外键，如下所示：

```
_____________________________________
| id |  title_id   |       title    |
-------------------------------------
| 0  |  5          |       Soda     |
-------------------------------------
| 1  |  6          |      Coffee    |
------------------------------------- 
```

我想找到销量最高的 5 种产品，这意味着我需要计算每个产品在销售表中输入的所有产品的数量值，然后按数量按降序排列结果并将选择限制为 5。

但是，我是 C# ASP.NET 的新手，对 SQL 也有些陌生。我不知道如何用 LINQ 做到这一点。到目前为止，这是我的代码：

```
 var getIds = (from sale in db.sales
                      join tit in db.titles on sale.title_id equals tit.title_id
                      group sale by sale.qty into result
                      orderby result.Sum(i => i.qty) descending
                      select new Publication 
                      { 
                        PubID = sales.title_id, Title = tit.title
                      }
                      ).Take(5); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T17:15:55.173

假设您有一个导航属性`Sale.Title`，应该这样做：

```
var tops = 
  db.Sales
    .GroupBy( o => o.Title )
    .Select( o => new { Title = o.Key, Sum = o.Sum( x => x.Quantity ) } )
    .OrderByDescending( o => o.Sum )
    .Take( 5 )
    .ToList(); 
```

`tops`然后是具有两个属性的匿名类型的列表：`Title`对象和数量之和。

* * *

然后你可以得到这样的值：

```
foreach( var top in tops )
{
  int titleId = top.Title.title_id;
  string title = top.Title.title;
  int sumOfQuantities = top.Sum;
  ... 
```

* * *

如果您只想要顶部的`Title`对象，可以像这样选择它们：

```
List<Title> topTitles = tops.Select( o => o.Title ).ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T17:21:42.570

```
var result= (from p in sales
              let k = new
              {
                  Name = p.Name
              }
              group p by k into t
              orderby Name descending
              select new
              {
                  Name = t.Name,
                  Qty = t.Sum(p => p.Qty)
              }).Take(5); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T17:39:34.463

如果 Sales 表中的条目每个项目超过一个（即：在您的示例中，您有 'Soda' 10 + 'Soda' 2，那么您需要`GroupBy()`使用名称作为键（或者它的相关 id，如果它在另一个表），但不是数量。

```
var topSales = db.sales.GroupBy(x => x.title)
                       .Select(g => new 
                                    { 
                                       Title = g.Key, 
                                       Qty = g.Sum(x => x.qty)
                                    })
                       .OrderByDescending(x => x.Qty)
                       .Select(x => new Publication 
                                    { 
                                       PubID = x.Title.title_id, 
                                       Title = x.Title.title1
                                    })
                       .Take(5)
                       .ToList(); 
```

请注意，假设您在 sales.title_id -> title.id 之间有一个外键，并且您使用的是 LINQ to SQL，我省略了 join 语句。另请注意，我已经避免使用查询语法来支持链式方法语法，我认为在这个用例中它很清楚（尽管并不总是如此，即：交叉连接）。

此外，SQL 和 LINQ 有一些相似之处，但不要让子句/方法的名称欺骗你，LINQ 不是 SQL，恕我直言，微软只是试图通过让它看起来相似来让人们感到舒服；）

**编辑**：固定 GroupBy()

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-13T17:53:32.203

```
var result= (from p in sales
              let k = new
              {
                  Name = p.Name
              }
              group p by k into t
              select new
              {
                  Name = t.Name,
                  Qty = t.Sum(p => p.Qty)
              }).OrderByDescending(i => i.Qty).Take(5); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-13T17:13:14.113

您需要查看 GroupBy；这会给你你需要的

[http://code.msdn.microsoft.com/101-LINQ-Samples-3fb9811b](http://code.msdn.microsoft.com/101-LINQ-Samples-3fb9811b)

# c++ - c++ DLNA字幕显示实现与platinium库

> ID：14305855
> 
> 赞同：1
> 
> 时间：2013-01-13T17:03:04.933
> 
> 标签：c++, subtitle, dlna

在播放媒体文件（视频）而不转码视频文件时，任何人都可以解释一下可用外部字幕（.srt 文件）的 DLNA 标准传递信息是否可行。

如果可能的话，任何人都可以告诉我DLNA标准中的解释吗？或者如何实施？

我正在尝试使用 platinium 库来实现这一点，但不知道该怎么做或者这是否可能。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T10:29:32.473

可能的？是的。标准化？不，可靠吗？绝对不。在 UPnP 或 DLNA 中都没有关于如何正确制作字幕的规范。这最终是一个问题，即 DMR 如何希望 DMS 提供字幕，因此这在很大程度上取决于您要使用的特定 DMR。一些 DMR 需要在媒体描述中使用特定的非标准 DIDL-Lite 字段（三星电视似乎正在推广`<sec:CaptionInfoEx>`），一些 DMR 对有点标准的`<res protocolInfo="http-get:*:text/srt:*">`. 当然，这两种情况都包含您的 SRT 文件的 URL。您的 DMR 完全有可能根本不支持字幕。UPnP 或 DLNA 中都没有这样的要求（我已经说过了吗？）。

所以 Platinum 没有任何开箱即用的字幕支持。您可以`<res>`使用现有逻辑创建标签 - 设置`PLT_ProtocolInfo`ContentType 为 text/srt 并分配给`PLT_MediaItemResource`您`m_Uri`的 SRT 文件（由您的 DMS 提供）。

添加一个新字段更加棘手，`PLT_Didl`有一组固定的字段，您必须扩展这些字段，这些字段`PLT_MediaObject::ToDidl`在其操作中非常固定。与框架其余部分的可见设计工作相比，我认为 Platinum 的这一部分有些仓促。

在任何情况下，您的 DMS 还必须准备好充当字幕的 HTTP 服务器，这意味着将权力赋予您作为`PLT_MediaServerDelegate::ProcessFileRequest`.

# jboss - 如何在 Jboss AS 上部署 JBoss ESB

> ID：14305859
> 
> 赞同：1
> 
> 时间：2013-01-13T17:03:13.723
> 
> 标签：jboss, soa, jboss-esb

我正在尝试使用 Ant 在 Jboss AS 上部署 Jboss esb。但我收到以下错误，它让我构建失败。我当然已经使用正确的服务器主目录和服务器配置路径更改了 .Properties 文件。下面是我得到的错误

我还有 Jboss 5.1.0 AS 和 Jbossesb 4.1.0 我不确定我需要对 build.xml 文件进行哪些更改。

```
C:\jbossesb-4.10\install>ant deploy
Buildfile: C:\jbossesb-4.10\install\build.xml

check.deploy.props:

dependencies.source:

dependencies.jbossesb:

dependencies:

init.bindings.props:

undeploy.bindings:

undeploy.jbossas5:

undeploy.jbossas6:

undeploy:

BUILD FAILED
C:\jbossesb-4.10\install\build.xml:480: Directory does not exist: C:\jbossesb-4.10\install\jboss-5.1.0.GA\server\all\lib 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-10T13:08:30.563

为了将 jboss-esb 部署到 jboss-上，您需要有deployment.properties**文件**

您的 jboss-esb 安装文件夹（例如：\jbossesb-4.6\jbossesb-4.6\install）

在该部署属性文件中，您需要将**jboss-as home**

例如：org.jboss.esb.server.home=D:/J Boss Book Installs/jboss-5.1.0.GA-jdk6/jboss-5.1.0.GA

注意：斜杠的方向**非常重要**，它应该是**正斜杠（/）** （如上例中指定的），因为它被索引到给定的 server.home 位置。

**否则**，您将得到**directory doesn't exist**错误，就像您在上面在问题中指定的错误一样。

检查您的 deployment.properties 文件并更正 server.home 它可能会解决您的错误！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T22:59:01.773

您可能在属性文件中设置了错误的服务器路径。您是否将服务器解压到“C:\jbossesb-4.10\install\jboss-5.1.0.GA\”目录？

您需要设置 jboss-as 目录的路径。正确的可能是这样的。

```
C:\jbossesb-4.10\install\jboss-5.1.0.GA\jboss-as\ 
```

# c++ - c++ - 在运行时创建自定义事件

> ID：14305866
> 
> 赞同：0
> 
> 时间：2013-01-13T17:03:45.623
> 
> 标签：c++, function, pointers, runtime

我正在使用 Allegro 用 C++ 创建一个 2D RPG 游戏引擎。我已经到了需要实现脚本系统的地步。所以，我的问题是这个：

我有一个名为**Event**的结构。在这个结构内部有一个函数指针，它指向我想要在事件触发时执行的函数。所以，这里有一个例子：

```
struct Event {
    //...
    void (*func)(Player*, void*);
    //...
} 
```

现在，要创建一个事件，我有这个功能：

```
Event* Events::register_event_source(int x, int y, std::string name, Player* player, void (*func)(Player*, void*)); 
```

所以，要使用它，我只需要使用这个签名创建一个函数：

```
void test_event(Player* p, void* data)
{
    //Do something cool here
} 
```

然后注册一个事件源，为该函数提供地址：

```
//...
Player* player = new Player(0, 0);
//...
Event* evt = Events::register_event_source(10, 10, "test event", player, &test_event);
//Eventually set some data for the event
evt->set_data(new std::string("Just some test data")); 
```

这样，当玩家越过指定的位置（在本例中 x = 10，y = 10）时，事件将触发，执行**test_event**函数中的任何代码。

现在，我的问题是：是否有可能在运行时执行或至少接近此过程？...我需要在运行时创建函数（在本例中为“test_event”），但我做了一些研究，我认为我理解的是在运行时创建函数实际上是不可能的。那么，我应该采用哪种方法？...我知道这是一个抽象的问题...但我真的不知道如何解决这个问题。

感谢您提供任何帮助的建议！抱歉我的解释能力不好……英语不是我的语言！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T17:15:24.887

如果我正确理解您要表达的内容，那么您正在编写一个脚本引擎，它将运行时构建的一些逻辑解释为一个字符串，这应该确定在`Player`和`data`. 如果是这样，我可以想象你应该有一个像

```
void InterpretScriptCode(Player* p, void* data, string const& code) 
```

*或解释和执行*`code`on`p`和中描述的逻辑的等价物`data`。

然后，您可以使用`std::bind`and`std::function`封装对脚本引擎的调用：

```
// Header <functional> needs to be included, and a proper "using namespace"
// directive must be present for bringing placeholders _1 and _2 into scope

std::function<void(Player*, void*)> fxn = std::bind(
    &InterpretScriptCode,
     _1,
     _2,
    "int x = 0; ... blah blah" // this should be your run-time generated script
    ); 
```

并将`fxn`输入传递给您的`register_event_source()`函数。

顺便说一句，您可能有兴趣使用 Boost.Signals/Boost.Signals2 来实现事件注册/处理。

如果您不使用 C++11，则可以使用`boost::bind`and`boost::function`代替`std::bind`and `std::function`。

# algorithm - for i 的复杂度是多少：for o = i+1

> ID：14305869
> 
> 赞同：0
> 
> 时间：2013-01-13T17:04:11.470
> 
> 标签：algorithm, complexity-theory

```
for i = 0 to size(arr)
   for o = i + 1 to size(arr)
      do stuff here 
```

这个最坏的时间复杂度是多少？它不是 N^2，因为第二个在每个 i 循环中减一。不是N，应该更大。N-1 + N-2 + N-3 + ... + N-N+1。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-13T17:05:55.437

它**是** `N ^ 2`，因为它是两个线性复杂度的乘积。

**（渐近复杂性被称为渐近**而不**相同**是有原因的......）

请参阅[Wikipedia 对所做简化的解释](http://en.wikipedia.org/wiki/Big_O_notation#Example)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T17:09:39.873

把它想象成你正在使用 anxn 矩阵。您正在处理矩阵中大约一半的元素，但 O(n^2/2) 与 O(n^2) 相同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T17:10:26.843

它`n*(n-1)/2`等于`O(n^2)`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-14T18:40:23.370

当你想确定一个算法的复杂度等级时，你只需要在算法的复杂度函数中找到增长最快的项。例如，如果你有复杂度函数`f(n)=n^2-10000*n+400`，要查找`O(f(n))`，你只需要在函数中找到“最强”项。为什么？因为`n`足够大，只有这个术语决定了整个函数的行为。话虽如此，很容易看出`f1(n)=n^2-n-4`和`f2(n)=n^2`都在`O(n^2)`. 但是，对于相同的输入大小`n`，它们不会运行相同的时间。

在您的算法中，如果`n=size(arr)`，`do stuff here`代码将运行`f(n)=n+(n-1)+(n-2)+...+2+1`时间。很容易看出`f(n)`表示算术级数的总和，这意味着`f(n)=n*(n+1)/2`，即`f(n)=0.5*n^2+0.5*n`。如果我们假设`do stuff here`是`O(1)`，那么您的算法具有`O(n^2)`复杂性。

> 对于 i = 0 到 size(arr)

我假设循环在`i`大于`size(arr)`，不等于时结束。但是，如果是后者，则比`f(n)=0.5*n^2-0.5*n`，它仍然在`O(n^2)`。请记住`O(1),O(n),0(n^2)`，... 是复杂度类，算法的复杂度函数是描述对于输入大小 n，算法中有多少步的函数。

# javascript - 如何移动谷歌地图的中心位置

> ID：14305876
> 
> 赞同：9
> 
> 时间：2013-01-13T17:04:46.247
> 
> 标签：javascript, google-maps-api-3

我正在使用以下代码在脚本中创建谷歌地图 -

```
var mapElement,
    parent,
    mapOptions,
    map,
    marker,
    latLong,
    openMarker;

parent = document.getElementsByClassName('parent')[0];
mapElement = document.createElement('div');
latLong = new google.maps.LatLng(some_lat_from_db, some_long_from_db);

mapOptions = {
    center: latLong,
    zoom: 14,
    mapTypeId: google.maps.MapTypeId.ROADMAP
};

map = new google.maps.Map(mapElement, mapOptions);
marker = new google.maps.Marker({
    position: latLong,
    map: map,
    title: 'some title'
});

openMarker = function () {
    var infowindow = new google.maps.InfoWindow();
    infowindow.setContent('Some Content');
    infowindow.open(map, marker);
};

google.maps.event.addListener(marker, 'click', openMarker);
parent.appendChild(mapElement);
openMarker(); 
```

使用此代码时，默认打开的信息窗口位于地图视口之外，因此不可见。我首先尝试减小信息窗口的大小，但没有成功。所以我想稍微移动地图的中心，以便信息窗口保留在视口中。

那么，如何将中心移动一些像素以使信息窗口保留在视口中？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-01-13T17:11:06.297

您可以使用[`.setCenter()`](https://developers.google.com/maps/documentation/javascript/reference#Map)移动地图的中心

```
map.setCenter(marker.getPosition()); 
```

**更新**

将`LatLng`with [.fromLatLngToDivPixel()](https://developers.google.com/maps/documentation/javascript/reference?hl=de#MapCanvasProjection)转换为[`Point`](https://developers.google.com/maps/documentation/javascript/reference?hl=de#Point)添加偏移量并将其转换回`LatLng`with [.fromDivPixelToLatLng()](https://developers.google.com/maps/documentation/javascript/reference?hl=de#MapCanvasProjection)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-02-23T06:13:16.160

忘记所有这些废话，如果您想重复使用谷歌地图标记或移动谷歌地图标记，或者重新定位谷歌地图标记，这就是有效的方法。

```
var lo = <yourval>;
var la = <yourval>;
var midpoint = {lat:la, lng:lo };
marker.setPosition(midpoint); 
```

如果您想销毁谷歌地图标记或删除谷歌地图标记

```
marker.setMap(null); 
```

# ios - 调整专辑艺术作品表格 mp3 文件的大小

> ID：14305877
> 
> 赞同：0
> 
> 时间：2013-01-13T17:04:46.010
> 
> 标签：ios, image, resize, imageview

我必须从使用此代码获得的文件中调整专辑插图的大小：

```
for (NSString *format in [asset availableMetadataFormats]) {
        for (AVMetadataItem *item in [asset metadataForFormat:format]) {
            if ([[item commonKey] isEqualToString:@"title"]) {
                //NSLog(@"name: %@", (NSString *)[item value]);
                downloadedCell.nameLabel.text = (NSString *)[item value];

            }
            if ([[item commonKey] isEqualToString:@"artist"]) {
                downloadedCell.artistLabel.text = (NSString *)[item value];
            }
            if ([[item commonKey] isEqualToString:@"albumName"]) {
                //musicItem.strAlbumName = (NSString *)[item value];
            }
            if ([[item commonKey] isEqualToString:@"artwork"]) {
                UIImage *img = nil;
                if ([item.keySpace isEqualToString:AVMetadataKeySpaceiTunes]) {
                    img = [UIImage imageWithData:[item.value copyWithZone:nil]];
                }
                else { // if ([item.keySpace isEqualToString:AVMetadataKeySpaceID3]) {
                    NSData *data = [(NSDictionary *)[item value] objectForKey:@"data"];
                    img = [UIImage imageWithData:data];

                }
                // musicItem.imgArtwork = img;
                UIImage *newImage = [self resizeImage:img width:70.0f height:70.0f];
                downloadedCell.artworkImage.image = newImage;

            } 
```

当我应用这种方法时：

```
- (UIImage *)resizeImage:(UIImage *)image width:(int)width height:(int)height {
    //NSLog(@"resizing");
    CGImageRef imageRef = [image CGImage];
    CGImageAlphaInfo alphaInfo = CGImageGetAlphaInfo(imageRef);

    //if (alphaInfo == kCGImageAlphaNone)
    alphaInfo = kCGImageAlphaNoneSkipLast;

    CGContextRef bitmap = CGBitmapContextCreate(NULL, width, height, CGImageGetBitsPerComponent(imageRef),
                                                4 * width, CGImageGetColorSpace(imageRef), alphaInfo);
    CGContextDrawImage(bitmap, CGRectMake(0, 0, width, height), imageRef);
    CGImageRef ref = CGBitmapContextCreateImage(bitmap);
    UIImage *result = [UIImage imageWithCGImage:ref];

    CGContextRelease(bitmap);
    CGImageRelease(ref);

    return result; 
} 
```

我总是得到一个像你在上面的照片中看到的噪声图像。 [http://postimage.org/image/jltpfza11/](http://postimage.org/image/jltpfza11/)

如何获得分辨率更高的图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T17:44:11.790

尝试使用以下方法明确指定上下文的插值级别：

```
CGContextSetInterpolationQuality(bitmap, kCGInterpolationHigh); 
```

您的 resizeImage:width:height: 方法因此变为：

```
-(UIImage *)resizeImage:(UIImage *)image width:(int)width height:(int)height {
   //NSLog(@"resizing");
   CGImageRef imageRef = [image CGImage];
   CGImageAlphaInfo alphaInfo = CGImageGetAlphaInfo(imageRef);

   //if (alphaInfo == kCGImageAlphaNone)
   alphaInfo = kCGImageAlphaNoneSkipLast;

   CGContextRef bitmap = CGBitmapContextCreate(NULL, width, height, CGImageGetBitsPerComponent(imageRef),
                                            4 * width, CGImageGetColorSpace(imageRef), alphaInfo);
   CGContextSetInterpolationQuality(bitmap, kCGInterpolationHigh);
   CGContextDrawImage(bitmap, CGRectMake(0, 0, width, height), imageRef);
   CGImageRef ref = CGBitmapContextCreateImage(bitmap);
   UIImage *result = [UIImage imageWithCGImage:ref];

   CGContextRelease(bitmap);
   CGImageRelease(ref);

   return result; 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T18:58:53.197

如果您的视图是 74x74，您应该在 Retina 显示器上调整为两倍。所以，像：

```
CGFloat imageSize = 74.0f * [[UIScreen mainScreen] scale];
UIImage *newImage = [self resizeImage:img width:imageSize height:imageSize]; 
```

然后你需要将你的图像视图的 contentMode 设置为 UIViewContentModeScaleAspectFill 之类的东西。

# java - 加载图像

> ID：14305880
> 
> 赞同：1
> 
> 时间：2013-01-13T17:05:04.613
> 
> 标签：java, swing, graphics, overriding

这是我用来加载名为“boat.png”的图像的代码

```
@Override
public void paint(Graphics g) {
    BufferedImage img = null;
    try {
       img = ImageIO.read(new File("boat.png"));
       } catch (IOException e) {
           System.out.println("Can't load the image");
    }
} 
```

这两行会产生错误

```
BufferedImage img = null;
img = ImageIO.read(new File("boat.png")); 
```

虽然我已经包括

```
import java.io.*;
import java.awt.*; 
```

请帮我找出错误！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T17:07:01.040

我相信问题在于`BufferedImage`包装`java.awt.image`中，而不仅仅是`java.awt`，所以你需要：

```
import java.awt.image.*; 
```

或者

```
import java.awt.image.BufferedImage; 
```

一些 IDE 会通过建议导入哪个包来帮助您修复此错误 - Eclipse 肯定会这样做。

编辑：您*还*需要导入`javax.imageio.*`或`javax.imageio.ImageIO`- 但您肯定也需要较早的导入之一......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-13T17:10:48.263

ImageIO 类位于[javax.imageio](http://docs.oracle.com/javase/6/docs/api/javax/imageio/ImageIO.html)包中。

尝试导入该包：

```
import javax.imageio.ImageIO; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T17:08:37.327

```
 import java.awt.image.BufferedImage 
```

应包括此导入声明。

# git - 将版本合并到主版本中，没有结果差异

> ID：14305882
> 
> 赞同：4
> 
> 时间：2013-01-13T17:05:18.887
> 
> 标签：git, git-flow

在工作中，我们有一个基于 git flow 的 git 工作流。我们有 3 个主要分支：dev、release 和 master

Dev 是我们目前正在做的事情，master 是我们在生产中所拥有的，而 release 是我们进行发布并进行最后一次错误修复的时候。当发布准备好时，发布分支被合并到 master 并推送到生产中。

在 master 中制作的任何修补程序也被推送到 dev （和发布分支（如果当前正在运行））

现在的问题是我们如何确保发布分支中的代码在合并后实际上是 master 中的代码？换句话说，release 和 master 之间应该没有差异（合并后）。

当从发布分支合并到 master 时，我们也不想处理冲突，所以任何一个都应该自动处理。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T19:56:12.590

为了避免在合并到 master 时发生冲突，您可以使用 `git merge --ours' 忽略 master 中可能与发布更改发生冲突的任何更改，但是当您有多个开发流时，这可能会出现问题。例如，如果您有修复生产（主）代码的支持问题，或者如果您有多个发布分支。

与分支合作时，合并冲突是一揽子交易；它们会发生，只需调整您的工作流程以单独处理它们，以尽量减少任何不利影响。

为了说明这一点，请考虑这样一个场景：生产中存在已修复错误的现有版本，以及准备将发布分支移动到生产（合并到主）的发布分支。它看起来像这样：

```
master  -A---------E------G
          \   \   /      /
bug-fix    \   C-D      /
            \          /
release      B--*--*--F 
```

在此，B & C 是从 A 分支出来的，E 是提交 D 在**bug-fix**到**master**的合并提交，G 是提交 F 在**release**到**master**的合并提交。

如果在**bug-fix**和**release**中更改了相同的文件，则在 G 中可能会出现合并冲突。如果`git merge --ours`已在 G 处使用，则在 E 处所做的更改可能会丢失。

可以通过分支 master 并将 release 合并到其中来处理合并，然后将这个一次性分支重新定位到 master 上。只有在流程受到良好控制的情况下才应该这样做，例如指定一个人将所有合并到 master 中。

此时，G 将与 F 不完全相同，它还将包括在 E 的错误修复提交中引入的更改。

也可以将**bug-fix**合并到**release**和**master**中，这将使 F 和 G 再次相同。但是，有一种最佳做法是*永远不要合并*。这意味着，按照图中的顺序排列的分支（在顶部更稳定），合并应该始终从较低的分支到较高的分支。这有两个主要好处，第一个是稳定的代码不会合并到不太稳定的代码中，并且分支保持*纯粹*，因为它们只包含与它们引入的特性相关的更改。例如，如果 D 被合并到**发布**中，则需要与**发布一起测试**然后 release 包含它正在引入的功能的更改集和错误修复的更改集。

为了防止这成为问题，我总是检查更稳定的分支，将不太稳定的分支合并到其中并从那里开始。

另外，请注意，`--ours`这是签出的分支，是`--theirs`正在合并的另一个分支。当您更改合并的方向时，它们所指的更改将被交换。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T19:50:51.867

release 和 master 合并后不可能不同。两个分支都指向同一个提交，合并提交将分支捆绑在一起。因此它们是完全相同的。

如果你想确保发布分支的内容成为主分支的内容，你想使用ours合并策略。这忽略了主分支中的变化，只是很好地取代了主分支的旧历史。所以你会做

```
git checkout release
git pull --strategy=ours . master 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T17:12:50.710

您想要的是“我们的”合并策略。[正如git merge 手册页](http://git-scm.com/docs/git-merge)中所指出的，它将始终使用合并的“我们”一侧，而忽略“他们”一侧的所有内容。它明确提到，当一方完全取代另一方时使用它。

编辑：请注意，“递归”策略有一个“我们的”策略和一个“我们的”选项。您想要前者，即策略**而**不是**策略***选项*。

# plsql - TOAD 显示存储过程返回的游标记录集

> ID：14305883
> 
> 赞同：0
> 
> 时间：2013-01-13T17:05:19.070
> 
> 标签：plsql, procedure, toad

请问如何从返回的光标打印recorset结果。下面执行得很好，但我需要看到结果。

这是 TOAD 中的块，调用包 sp AMD_NEEDMSG：

```
DECLARE 
     RETURN_RECORDSET CTI_MATRIX.AMD.REF_CURSOR;
    BEGIN 
     CTI_MATRIX.AMD.AMD_NEEDMSG ( '88888888885', RETURN_RECORDSET );
END; 
```

此包装规格：

```
 CREATE OR REPLACE PACKAGE CTI_MATRIX.AMD AS
      TYPE REF_CURSOR IS REF CURSOR;
      PROCEDURE AMD_NEEDMSG (v_CRN IN VARCHAR2, return_recordset OUT REF_CURSOR);
    END AMD; 
```

这是包体：

```
CREATE OR REPLACE PACKAGE BODY CTI_MATRIX.AMD AS

PROCEDURE AMD_NEEDMSG (v_CRN IN VARCHAR2, return_recordset OUT REF_CURSOR) IS

return_flag INTEGER;
row_cnt INTEGER;
number_of_days INTEGER;
var_DATE DATE;

CURSOR ACCNTSEARCH (P_CRN IN VARCHAR2) IS
    SELECT DISTINCT COUNT(*) , AMD.MSG_DATE    
       FROM TBL_AMD_NEEDMSG AMD
      WHERE AMD.PHONE_NUMBER = P_CRN AND ROWNUM = 1;

BEGIN 
 OPEN ACCNTSEARCH(v_CRN);
 FETCH ACCNTSEARCH INTO row_cnt, var_DATE;
 CLOSE ACCNTSEARCH;

 IF (row_cnt = 0)
 THEN
        INSERT INTO TBL_AMD_NEEDMSG (PHONE_NUMBER, MSG_DATE) VALUES (v_CRN , SYSDATE); 
        return_flag := 1;
 ELSE
    SELECT SYSDATE-var_DATE INTO number_of_days FROM dual;

     IF (number_of_days>7)
     THEN 
        UPDATE TBL_AMD_NEEDMSG SET MSG_DATE = SYSDATE WHERE PHONE_NUMBER = v_CRN;
        return_flag := 1;
    ELSE
         return_flag := 0;
    END IF;

 END IF;    

 COMMIT;

 OPEN return_recordset FOR 
 SELECT return_flag AS ReturnFLag FROM DUAL;

EXCEPTION
 WHEN OTHERS THEN
    ROLLBACK;

END AMD_NEEDMSG;

END AMD;
/ 
```

底线是以记录集的形式向客户端返回一个 return_flag 的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T14:33:21.530

要返回 return_flag，即 int=1 或 0，您需要返回单个值而不是记录集的函数。以下是一般记录集示例 - 希望这会有所帮助：

```
DECLARE
  TYPE empcurtyp IS REF CURSOR;
  emp_cv  empcurtyp;
--
  TYPE namelist IS TABLE OF scott.emp.ename%TYPE;
  TYPE sallist  IS TABLE OF scott.emp.sal%TYPE;
  names   namelist;
  sals    sallist;
BEGIN
  OPEN emp_cv FOR
    SELECT ename, sal FROM scott.emp
      WHERE job = 'MANAGER' ORDER BY sal DESC;
--
  FETCH emp_cv BULK COLLECT INTO names, sals;
  CLOSE emp_cv;

-- loop through the names and sals collections
 FOR i IN names.FIRST .. names.LAST LOOP
   DBMS_OUTPUT.PUT_LINE
     ('Name = ' || names(i) || ', salary = ' || sals(i));
   END LOOP;
END;
/

-- SYS_REFCURSOR example --
DECLARE
  p_rc_type  SYS_REFCURSOR;
  emp_rec    scott.emp%ROWTYPE;
 --
 PROCEDURE p_Emp_Info (p_cur_var OUT SYS_REFCURSOR)
 IS 
 BEGIN
    OPEN p_cur_var FOR 
     SELECT ename, job FROM scott.emp WHERE job = 'MANAGER';
   LOOP
    FETCH p_cur_var INTO emp_rec.ename, emp_rec.job;
    EXIT WHEN p_cur_var%NOTFOUND;
     dbms_output.put_line(emp_rec.ename ||' '|| emp_rec.job);
   END LOOP;
  CLOSE p_cur_var;
 END p_Emp_Info;
 --
 BEGIN
  p_Emp_Info(p_rc_type);
END;
/ 
```

# c# - 计算文件到 pendrive 的传输速度

> ID：14305902
> 
> 赞同：1
> 
> 时间：2013-01-13T17:08:06.373
> 
> 标签：c#, copy, file-transfer

我想用 c# 将文件复制到 pendrive 或硬盘驱动器。当我复制它们时，我可以通过检查时间和我已经复制了多少千字节来检查传输速度。但是有没有办法在开始复制之前快速猜测速度？我想知道复制需要多长时间。有办法吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T17:18:07.857

> 但是有没有办法在开始复制之前快速猜测速度？

我不这么认为。

如果有办法，Windows Copy-Paste 持续时间（剩余时间）预测会好得多。

目前我认为，对于任何复制粘贴操作，Windows 都会找出要复制的所有数据的长度。然后在复制操作期间，它找出复制了多少，剩下多少。基于它，它猜测剩余时间。在整个复制粘贴过程中，剩余时间会一次又一次地重新计算。

例如，
假设要复制的数据是 100 MB。
如果 1 分钟后复制 1 MB，则剩余时间为 99 分钟。
如果 2 分钟后复制了 4 MB，则剩余时间为 48 分钟。
如果 10 分钟后，复制 5MB，剩余时间为 190 分钟。

注意->以上是我的观察，并不是基于内部算法实现的权威答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T17:18:30.897

距离 = 速率 * 时间

将距离（剩余千比特）除以速率（每秒千比特）。您应该能够在几秒钟内获得粗略的时间。

# php - 为什么imagettftext返回的负值那么大而且不合理？

> ID：14305903
> 
> 赞同：0
> 
> 时间：2013-01-13T17:08:12.737
> 
> 标签：php, gd

我正在编写一个非常简单的关于在 png 文件中写入文本的 php。

```
var_dump(imagettftext ($img, 36, 0, 100,100, 0x000000, './arial.ttf','test')); 
```

我在 Linux 2.6.9 和 php 5.2.17 运行它，但是它不起作用，什么也没写。然后我在 Win7 和 php 5.2.17 运行它，它确实在图像中写入文本。

我发现他们的输出是不同的。

在 Linux 中：

```
array(8) {
  [0]=>
  int(-1783466488)
  [1]=>
  int(42)
  [2]=>
  int(22134784)
  [3]=>
  int(0)
  [4]=>
  int(-1073754768)
  [5]=>
  int(127)
  [6]=>
  int(57)
  [7]=>
  int(1)
} 
```

在 Win7 中：

```
array(8) {
  [0]=>
  int(100)
  [1]=>
  int(102)
  [2]=>
  int(200)
  [3]=>
  int(102)
  [4]=>
  int(200)
  [5]=>
  int(66)
  [6]=>
  int(100)
  [7]=>
  int(66)
} 
```

在Linux中太奇怪了，但我不知道为什么它的输出是这样的。

# java - 使用 CDI 进行会话 bean 注入

> ID：14305907
> 
> 赞同：1
> 
> 时间：2013-01-13T17:08:28.040
> 
> 标签：java, dependency-injection, cdi, jboss-weld

我试图将一个会话 bean 注入另一个会话 bean（在这种特殊情况下，它是同一个会话 bean），我得到了这个错误：

> org.jboss.weld.exceptions.UnsatisfiedResolutionException：WELD-001308 无法解析任何类型的 bean：[接口 com.windriver.dsm.labmanagement.ejb.stub.GeneralSession]；绑定：[@javax.enterprise.inject.New(value=com.windriver.dsm.labmanagement.ejb.stub.GeneralSession.class)]

这就是我尝试这样做的方式：

```
@Stateless
@TransactionManagement(value=TransactionManagementType.CONTAINER)
@TransactionAttribute(value=TransactionAttributeType.REQUIRED)
@Local(GeneralSessionLocal.class)
@Remote(GeneralSession.class)
public class GeneralSessionBean extends CRUDSessionBase
{
    @Inject @New
    Instance<GeneralSession> generalSessionInstance;

    // ...
} 
```

我打电话时收到此错误`generalSessionInstance.get();`。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T18:35:34.763

尝试指定 bean 类 (GeneralSessionBean) 实现 GeneralSession。

在你的情况下：

```
@Stateless
@TransactionManagement(value=TransactionManagementType.CONTAINER)
@TransactionAttribute(value=TransactionAttributeType.REQUIRED)
@Local(GeneralSessionLocal.class)
@Remote(GeneralSession.class)
public class GeneralSessionBean extends CRUDSessionBase implements GeneralSession
{
    @Inject @New
    Instance<GeneralSession> generalSessionInstance;

    // ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T18:46:14.737

根据 WebBeans 规范，远程接口不是对注入有效的 bean 类型。因此，您必须为字段类型采用本地接口（在这种情况下为 GeneralSessionLocal）（并且您还应该实现此接口，因为否则它也不是您的 EJB 的 bean 类型）。

# android - 应用程序无法在模拟器中运行

> ID：14305917
> 
> 赞同：0
> 
> 时间：2013-01-13T17:09:23.050
> 
> 标签：android, android-emulator, android-manifest, android-debug

我编写了一个应用程序。代码中的一切都很好。但它不在模拟器中运行。它给出了一些错误如下：

1.  D:\Android Workspace\DbTuts\AndroidManifest.xml 的解析器异常：元素类型“application”必须由匹配的结束标记“”终止。

2.  运行时没有命令输出：'am start -n com.android.tuts/com.android.tuts.MyActivity -a android.intent.action.MAIN -c android.intent.category.LAUNCHER'​​ on device emulator-5556

清单代码如下：

```
 <?xml version="1.0" encoding="utf-8"?>
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
  package="com.android.tuts"
  android:versionCode="1"
  android:versionName="1.0">
 <uses-sdk android:minSdkVersion="8" />
 <application android:name=".ApplicationContextProvider"
         android:label="@string/app_name"></application> 

 <application android:icon="@drawable/icon" android:label="@string/app_name">
    <activity android:name=".MyActivity"
              android:label="@string/app_name">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

  </application>
  </manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T17:10:23.713

尝试使用：

```
<?xml version="1.0" encoding="utf-8"?>
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
  package="com.android.tuts"
  android:versionCode="1"
  android:versionName="1.0">
 <uses-sdk android:minSdkVersion="8" />

 <application android:name=".ApplicationContextProvider" android:icon="@drawable/icon" android:label="@string/app_name">
    <activity android:name=".MyActivity"
              android:label="@string/app_name">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

  </application>
  </manifest> 
```

您之前使用了两个单独的`<application>`元素，这是不允许的。

# r - DocumentTermmatrix 中的相似度矩阵

> ID：14305918
> 
> 赞同：1
> 
> 时间：2013-01-13T17:09:28.197
> 
> 标签：r, matrix, similarity

我需要从文档术语矩阵创建一个相似度矩阵，以便对文档执行最大捕获聚类。到目前为止只找到了距离矩阵的解决方案。尝试了 dist 方法，但它给了我错误的输出。有没有办法使用 R 创建相似度矩阵？我在下面的代码中使用了 tm 包，但我并不局限于此，如果有其他好的包，请告诉我。到目前为止的代码：

```
install.packages("tm")
install.packages("rJava")
install.packages("Snowball")
install.packages("RWeka")
install.packages("RWekajars")
install.packages("XML")
install.packages("openNLP")
install.packages("openNLPmodels.en")

Sys.setenv(NOAWT=TRUE)

library(XML)
library(rJava)
library(Snowball)
library(RWeka)
library(tm)
library(openNLP)
library(openNLPmodels.en)

sample = c(
"cc ee aa", 
"dd bb ee",   
"bb cc ee dd",
"cc ee dd aa",
"bb ee",
"cc dd aa",
"bb cc aa",
"bb cc",
"cc ee dd"
)
print(sample)
corpus <- Corpus(VectorSource(sample))
inspect(corpus)

corpus <- tm_map(corpus, removeNumbers)
corpus <- tm_map(corpus, removePunctuation)
corpus <- tm_map(corpus, tolower)
corpus <- tm_map(corpus, removeWords, stopwords("english"))
corpus <- tm_map(corpus, stemDocument,language="english")
corpus <- tm_map(corpus, stripWhitespace)
corpus <- tm_map(corpus, tmTagPOS)
inspect(corpus)

dtm <- DocumentTermMatrix(corpus)
inspect(dtm)

# need to create similarity matrix here
dist(dtm, method = "manhattan", diag = FALSE, upper = FALSE) 
```

给定样本的输出应如下所示

![相似矩阵](../Images/a0983058c2d77621fecb21e504c5f837.png)

相似度矩阵定义为：

```
if (i < j) 
    a[i][j] = sim[i][j] 
else 
    a[i][j] = 0 
```

# java - 检测 JTextField“取消选择”事件

> ID：14305921
> 
> 赞同：3
> 
> 时间：2013-01-13T17:09:40.723
> 
> 标签：java, swing, validation, jtextfield, focuslistener

是否有某种方法可以检测是否取消选择了 JTextField，即该字段已被选中，但现在您选择了其他内容。我想这样做的原因是因为我想在他们尝试提交数据之前检查我的用户表单是否有任何非法字符。如果有一些更简单的方法可以做到这一点，而不是我试图解决它的方式，我很乐意接受启蒙。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-13T17:12:08.527

起初虽然使用 a[`FocusAdapter`](http://docs.oracle.com/javase/tutorial/uiswing/events/focuslistener.html)和 override `focusLost(FocusEvent fe)`，当失去焦点时将调用它`JTextField`，即选择另一个组件。

但是，因为您有一个目的：

> 我想在他们尝试提交数据之前检查我的用户表单是否有任何非法字符

我建议阅读[如何使用焦点子系统 - 验证输入](http://docs.oracle.com/javase/tutorial/uiswing/misc/focus.html#inputVerification)

`FocusAdapter`比为验证/限制用户输入量身定制的更好的选择：

*   [`DocumentFilter`](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/DocumentFilter.html). 有关示例，请参见[此处](https://stackoverflow.com/questions/14058505/jtextfield-accept-only-alphabet-and-white-space/14060047#14060047)和[此](https://stackoverflow.com/questions/14174776/how-to-auto-calculate-input-numeric-values-of-text-field-in-java/14174868#14174868)变体。
*   [`InputVerifier`](http://docs.oracle.com/javase/7/docs/api/javax/swing/InputVerifier.html). 有关示例，请参见[此处](https://stackoverflow.com/a/11818946/1133011)
*   [`JFormattedTextField`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JFormattedTextField.html). 有关示例，请参见[此处](https://stackoverflow.com/questions/11881301/best-way-to-constrain-user-to-enter-a-time-in-a-jtextfield/11881523#11881523)

# java - Java-单元格更改时如何保存JTable？

> ID：14305925
> 
> 赞同：2
> 
> 时间：2013-01-13T17:09:56.690
> 
> 标签：java, swing, jtable

我的 JPanel 中有一个 JTable，我想知道如何保存已编辑的单元格。现在发生的情况是，当我编辑一个单元格并按 ENTER 时，会显示新数据。但是当我关闭程序并再次打开它时，数据会变回原来的样子。

图片：

编辑 JTable 时：

![在此处输入图像描述](../Images/45b9d71ea723b34ac31739601115466a.png)

重启程序后：

![在此处输入图像描述](../Images/1c06f0523576a4cf9e9f2d7c6cb021c0.png)

提前致谢

编辑：

我想尝试从项目中的 .txt 文件中获取数据。我不确定该怎么做。我不知道如何将保存的数据放入 .txt 文件或如何将其实现到 JTable 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T17:18:29.080

您可能使用的[DefaultTableModel](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/table/DefaultTableModel.html)（因为您没有谈论任何其他）是可序列化的。使用[JTable.getModel()](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTable.html#getModel%28%29)获取它并在关闭时使用 ObjectOutputStream 写入文件。[在程序启动时，使用ObjectInputStream](http://docs.oracle.com/javase/7/docs/api/java/io/ObjectInput.html)将其加载回来并为表设置。

如果您不知道您的应用程序何时终止，请[添加窗口关闭侦听](http://docs.oracle.com/javase/7/docs/api/java/awt/event/WindowListener.html#windowClosing%28java.awt.event.WindowEvent%29)器并将您的表模型保存在那里。

当然，还有许多其他方法可以在运行之间保存表格。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T17:59:57.683

您应该使用 TableModelListeners 的方法，并在发生变化时触发写入磁盘（以与加载数据时使用的格式相同的格式）。所以，写一些像

```
myTable.getModel().addTableModelListener(new TableModelListener() {
   @Override
   public void tableChanged(TableModelEvent e) {
       // access the values of the model and save them to the file here
   }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T18:22:00.903

Swing 在构建时考虑了 MVC。您可能知道 MVC 代表模型视图控制器。所以模型是包含数据的东西，它与视图分离，视图是数据的图形表示。

该模型是默认表模型（或者您可能有其他实现）。视图本身就是一个 JTable。现在它是这样工作的：控制器更改模型。模型将事件发送给任何有兴趣了解此类更改的人。在这种情况下，控制器也是一个 JTable（它允许编辑的部分）。因此，实际上在您编辑单元格之后，位于 JTable 后面的表格模型会发生变化（请记住，控制器知道谁是它的模型，所以它会更改它）。现在模型说（在摇摆中它发送事件）：“我变了” - 所以有一个变化事件。

唯一的问题是可能没有人处理此事件，因此模型的更改将在重新启动后持续存在。

我相信您应该做的是：实现一个侦听器，该侦听器将采用模型并将其序列化到文件中/放入 xml 文件或数据库中 - 无论在重启后仍然存在（您可以考虑最合适的格式）。

虽然我没有指出特定的类（已经建议使用 TableModelListener），但我认为这里的整体解释不会有害。

希望这可以帮助

# mysql - 更新 MySQL 中最高的自动递增主键

> ID：14305928
> 
> 赞同：0
> 
> 时间：2013-01-13T17:10:15.520
> 
> 标签：mysql

我想更新最新的数据，或者最高的ID。

MAX 功能似乎不适用于更新。

编辑：

```
UPDATE table SET name='test_name' ORDER BY id DESC LIMIT 1; 
```

似乎工作。但我不确定它是否真的是解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T17:12:55.117

试试这个：

```
UPDATE table
SET field = yourvalue
WHERE Id = (SELECT MAX(Id) FROM table) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T17:17:05.830

你在寻找`LAST_INSERT_ID()`

```
 Update table SET name='test_name'
 where id = LAST_INSERT_ID() 
```

# c# - 抛出字节溢出

> ID：14305934
> 
> 赞同：2
> 
> 时间：2013-01-13T17:10:31.700
> 
> 标签：c#

我正在学习在 C# 中处理文件，我想在文件中编写`Program.cs`另外一条语句。但我收到一个对我说的错误`ThrowBytesOverFlow`。

![在此处输入图像描述](../Images/f5a558b17666dba73b81edd5dd20db44.png)

我认为我必须将要写入的所有内容转换为`char`数组，然后将其编码为`bytes`.

我不知道我该如何解决这个问题！

```
FileStream afile = new FileStream(@"..\..\Program.cs", FileMode.Open, FileAccess.Read);
        byte[] byteData = new byte[afile.Length];
        char[] charData = new char[afile.Length];
        afile.Seek(0, SeekOrigin.Begin);
        afile.Read(byteData, 0, (int)afile.Length);
        Decoder d = Encoding.UTF8.GetDecoder();
        d.GetChars(byteData, 0, byteData.Length, charData, 0);
        Console.WriteLine(charData);
        afile.Close();

        byte[] bdata;
        char[] cdata;
        FileStream stream = new FileStream(@"..\..\My file.txt", FileMode.Create);
        cdata = "Testing Text!\n".ToCharArray();
        bdata = new byte[cdata.Length];            
        Encoder e = Encoding.UTF8.GetEncoder();
        e.GetBytes(cdata, 0,cdata.Length, bdata, 0, true);
        stream.Seek(0, SeekOrigin.Begin);
        stream.Write(bdata, 0, bdata.Length);

        byte[] bydata = new byte[charData.Length];
        e.GetBytes(charData, 0, charData.Length, bydata, 0, true);
        stream.Write(bydata, 0, bydata.Length);
        stream.Close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T14:33:09.633

我不知道您是否故意在字节和编码级别工作以了解更多信息。如果是这样，那么这个答案将没有帮助。但是，以下代码应该可以满足您的目标：

```
string contents = File.ReadAllText(@"..\..\Program.cs");
using (StreamWriter file = new StreamWriter(@"..\..\My file.txt"))
{
    file.WriteLine("Testing Text!");
    file.Write(contents);
} 
```

“using”语句，如果你不熟悉的话，它会在程序到达块的末尾时自动关闭我们正在写入的文件。相当于写：

```
StreamWriter file = new StreamWriter(@"..\..\My file.txt"))
file.WriteLine("Testing Text!");
file.Write(contents);
file.Close(); 
```

除了如果在 using 块内引发异常，则文件仍将关闭。

# javascript - 带下划线和主干的 JSON 对象树递归

> ID：14305939
> 
> 赞同：4
> 
> 时间：2013-01-13T17:10:57.987
> 
> 标签：javascript, jquery, backbone.js, underscore.js

假设我有一个包含未知深度的嵌套数组的 json 对象。我想将每个数组提供给 _.template 函数。例如，我的 json 对象可能如下所示：

```
$start_elements = array (
        array(
            "elementTag"=>"li",
            "elementClass"=>"dashboard",
            "elementContent"=>array(
                "elementTag"=>"a",
                "elementContent"=>"Dashboard",
                "href"=>"#home"
                ) 
        ),
        array(
            "elementTag"=>"li", 
            "elementClass"=>"count indicator", 
            "elementContent"=>array(
                array(
                    "elementTag"=>"span", 
                    "elementClass"=>"data-count='8'", 
                    "elementContent"=>"Notifications"
                ), 
                array(
                    "elementTag"=>"ul", 
                    "elementClass"=>" ",
                    "elementContent"=>array(
                        "elementTag"=>"li", 
                        "elementContent"=>array(
                            "elementTag"=>"a",
                            "href"=>"#", 
                            "elementExtra"=>"data-modal",
                            "elementContent"=>array(
                                array(
                                    "elementTag"=>"h4",
                                    "elementContent"=>"Lorem Ipsum"
                                    ), 
                                array(
                                    "elementTag"=>"<p>",
                                    "elementContent"=>"Lorem ipsum dolor sit imet smd ddm lksdm lkdsm"
                                )
                            )
                        )
                    )
                )
            )
        )
);
json_encode($start_elements); 
```

_。模板：

```
_.template('<<%= elementTag %> class="<%= elementClass %>" href="<%= href %>"><%= elementContent %></<%= elementTag %>') 
```

数组的嵌套结构很重要，因为我想以相同的嵌套结构输出 html。例如，上面的对象会输出一个 li 对象，里面有一个锚标签。如何在保留此结构的同时将模板应用于每个嵌套数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T03:22:23.017

我会围绕您的模板制作一个包装器函数，以保持您的模板无逻辑。然后你可以使用 underscore 的实用方法来检查你手中是否有一个数组、对象（或字符串）（`_.isArray`和`_.isObject`）。

您需要将包装函数传递到模板中，以便使用它。您可以只`_.extend`使用`{tmpl: tmpl}`.

这是一个有效的示例，虽然是简化的：

```
 var data = {
    elementTag: "li",
    elementContent: [{
        elementTag: "a",
        elementContent: "Dashboard"
    }, {
        elementTag: "div",
        elementContent: "Hello"
    }]
};

var tmpl = _.template('<<%= elementTag %>><%= template(elementContent) %></<%= elementTag %>>');

function template(elData) {
    var html = "";
    if (_.isArray(elData)) {
        _.each(elData, function (el) {
            html += template(el);
        });
    } else if (_.isObject(elData)) {
        html = tmpl(_.extend({
            template: template
        }, elData));
    } else {
        html = elData;
    }
    return html;
}

console.log(template(data)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T17:21:35.730

您可以执行以下操作：

```
函数应用模板（obj）{
  如果 _.has(obj, "elementContent"){
     obj.elementContent = applyTemplate(obj.elementContent)
  }
  return _.template("templateString", obj)
}

```

基本上，您遍历整个树并将`elementContent`其替换为自下而上的模板值。

# python - 对一组自动化测试只运行一次 setUp

> ID：14305941
> 
> 赞同：94
> 
> 时间：2013-01-13T17:11:02.620
> 
> 标签：python, unit-testing

我的 Python 版本是 2.6。

我只想执行一次测试 setUp 方法，因为我在那里做了所有测试都需要的事情。

我的想法是创建一个布尔变量，在第一次执行后将其设置为“true”，然后禁用对 setup 方法的多个调用。

```
class mySelTest(unittest.TestCase):
    setup_done = False

    def setUp(self):
        print str(self.setup_done)

        if self.setup_done:
            return
        self.setup_done = True
        print str(self.setup_done) 
```

输出：

```
False

True

--- Test 1 ---

False

True

--- Test 2 --- 
```

为什么这不起作用？我错过了什么吗？

* * *

## 回答 #1

> 赞同：123
> 
> 时间：2013-01-13T17:21:48.747

您可以[`setUpClass`](http://docs.python.org/library/unittest.html#unittest.TestCase.setUpClass)用来定义每个测试套件只运行一次的方法。

* * *

## 回答 #2

> 赞同：73
> 
> 时间：2015-12-03T12:01:04.183

[丹尼尔的回答](https://stackoverflow.com/a/14306074/3357935)是正确的，但是这里有一个例子可以避免我发现的一些常见错误，例如不调用when是(like in `super()`or )的子类。`setUpClass()``TestCase``unittest.TestCase``django.test``falcon.testing`

的文档[`setUpClass()`](https://docs.python.org/2/library/unittest.html#unittest.TestCase.setUpClass)没有提到你需要`super()`在这种情况下打电话。如果不这样做，您将收到错误，如[相关问题](https://stackoverflow.com/questions/29653129/update-to-django-1-8-attributeerror-django-test-testcase-has-no-attribute-cl)所示。

```
class SomeTest(TestCase):
    def setUp(self):
        self.user1 = UserProfile.objects.create_user(resource=SomeTest.the_resource)

    @classmethod
    def setUpClass(cls):
        """ get_some_resource() is slow, to avoid calling it for each test use setUpClass()
            and store the result as class variable
        """
        super(SomeTest, cls).setUpClass()
        cls.the_resource = get_some_resource() 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2020-03-06T01:32:55.260

我正在使用 Python 3，发现该方法`cls`中也提供了该引用`setup`，因此可以使用以下方法：

```
class TestThing(unittest.TestCase):

  @classmethod
  def setUpClass(cls):
    cls.thing = Thing() # the `thing` is only instantiated once

  def setup(self):
    self.thing = TestThing.thing # ...but set on each test case instance

  def test_the_thing(self):
    self.assertTrue(self.thing is not None) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-01-04T17:48:12.037

If you ended up here because of need to load some data for testing... then as far as you are using Django 1.9+ please go for [setUpTestData](https://docs.djangoproject.com/en/2.1/topics/testing/tools/#django.test.TestCase.setUpTestData):

```
class MyTests(TestCase):

    @classmethod
    def setUpTestData(cls):
        # Set up data for the whole TestCase
        cls.foo = Foo.objects.create(bar="Test")

    def test1(self):
        self.assertEqual(self.foo.bar, 'Test') 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-03-23T21:01:27.153

setup_done 是一个类变量，而不是实例变量。

您将其作为实例变量引用：

`self.setup_done`

但是您需要将其作为类变量引用：

`mySelTest.setup_done`

这是更正后的代码：

```
class mySelTest(unittest.TestCase):
    setup_done = False

    def setUp(self):
        print str(mySelTest.setup_done)

        if mySelTest.setup_done:
            return
        mySelTest.setup_done = True
        print str(mySelTest.setup_done) 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-01-13T18:22:10.460

不要尝试对 setUp 的调用进行重复数据删除，只需调用一次即可。

例如：

```
class MyClass(object):
    ...

def _set_up():
    code to do one-time setup

_set_up() 
```

这将在模块第一次加载时调用 _set_up()。我将它定义为模块级函数，但您同样可以将其设为 MyClass 的类方法。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-02-19T13:46:57.337

将您想要设置的所有代码放在 mySelTest 之外。

```
setup_done = False

class mySelTest(unittest.TestCase):

    def setUp(self):
        print str(setup_done)

        if setup_done:
            return

        setup_done = True
        print str(setup_done) 
```

另一种可能性是有一个您在其中实例化的 Singleton 类`setUp()`，它只会运行`__new__`一次代码并为其余调用返回对象实例。请参阅：[是否有一种简单、优雅的方式来定义单例？](https://stackoverflow.com/questions/31875/is-there-a-simple-elegant-way-to-define-singletons-in-python)

```
class Singleton(object):
    _instance = None
    def __new__(cls, *args, **kwargs):
        if not cls._instance:
            cls._instance = super(Singleton, cls).__new__(
                            cls, *args, **kwargs)
            # PUT YOUR SETUP ONCE CODE HERE!
            cls.setUpBool = True

        return cls._instance

class mySelTest(unittest.TestCase):

    def setUp(self):
        # The first call initializes singleton, ever additional call returns the instantiated reference.
        print(Singleton().setUpBool) 
```

不过你的方法也行。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-11-18T11:59:05.273

对于 python >3，您可以通过定义`startTestRun`, `stopTestRun`of来做到这一点`unittest.TestResult class`。回答[https://stackoverflow.com/a/64892396/2679740](https://stackoverflow.com/a/64892396/2679740)

# c# - 使用 C# 获取网页元素的内容

> ID：14305945
> 
> 赞同：3
> 
> 时间：2013-01-13T17:11:36.423
> 
> 标签：c#, browser

有什么方法可以从 ac# 应用程序获取浏览器中打开网页的元素或控件的内容？

我试图让窗口前，但我不知道如何使用它与它进行任何形式的通信。我也试过这段代码：

```
using (var client = new WebClient())
{
    var contents = client.DownloadString("http://www.google.com");
    Console.WriteLine(contents);
} 
```

这段代码给了我很多我无法使用的数据。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T17:13:26.787

您可以使用 HTML 解析器，例如[`HTML Agility Pack`](http://html-agility-pack.net/?z=codeplex)从下载的 HTML 中提取您感兴趣的信息：

```
using (var client = new WebClient())
{
    // Download the HTML
    string html = client.DownloadString("http://www.google.com");

    // Now feed it to HTML Agility Pack:
    HtmlDocument doc = new HtmlDocument();
    doc.LoadHtml(html);

    // Now you could query the DOM. For example you could extract
    // all href attributes from all anchors:
    foreach(HtmlNode link in doc.DocumentNode.SelectNodes("//a[@href]"))
    {
        HtmlAttribute href = link.Attributes["href"];
        if (href != null)
        {
            Console.WriteLine(href.Value);
        }
    }
} 
```

# javascript - 为什么在 safari 中定义了两次警报？

> ID：14305947
> 
> 赞同：3
> 
> 时间：2013-01-13T17:11:39.640
> 
> 标签：javascript, safari

为什么在 safari 中定义了两次警报？

Safari 5.1.7(7534.57.2)

```
window.hasOwnProperty('alert'); //true

var w = Object.getPrototypeOf(window);

w.hasOwnProperty('alert'); //true 
```

其他浏览器：Chrome 24.0.1312.52 m,FireFox 18.0,IE 9.0.8112.16421CO,Opera 12.12 1707

```
window.hasOwnProperty('alert'); //false

var w = Object.getPrototypeOf(window);

w.hasOwnProperty('alert'); //true 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T04:03:31.690

这意味着在 Safari 中，他们将警报设置为原型和窗口实例上的函数。

```
function Window() {
    this.alert = function() { //code here };
}

Window.prototype.alert = function() { //code here }; 
```

而在其他浏览器中，他们只会进行原型声明。

# java - 构造函数中的 NullPointerException

> ID：14305948
> 
> 赞同：0
> 
> 时间：2013-01-13T17:11:45.577
> 
> 标签：java, swing, user-interface, nullpointerexception, actionlistener

我已将问题缩小到 GUI 中的一行 Java 代码。

```
Shop1.addProduct(new Product(proid, proName, proPrice, proQis)); 
```

每次我点击我附加的按钮。它不是按钮，因为没有它运行良好。

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
    at ShopFrame$AddListener.actionPerformed(ShopFrame.java:56)
    at javax.swing.AbstractButton.fireActionPerformed(Unknown Source)
    at javax.swing.AbstractButton$Handler.actionPerformed(Unknown Source)
    at javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source)
    at javax.swing.DefaultButtonModel.setPressed(Unknown Source)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(Unknown Source)
    at java.awt.Component.processMouseEvent(Unknown Source)
    at javax.swing.JComponent.processMouseEvent(Unknown Source)
    at java.awt.Component.processEvent(Unknown Source)
    at java.awt.Container.processEvent(Unknown Source)
    at java.awt.Component.dispatchEventImpl(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)
    at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)
    at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Window.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
    at java.awt.EventQueue.access$200(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue$4.run(Unknown Source)
    at java.awt.EventQueue$4.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue.dispatchEvent(Unknown Source)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.run(Unknown Source) 
```

我不能为我的生活找出问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-13T17:14:10.847

似乎`Shop1`是`null`。尝试添加一个空检查：

```
if(Shop1 != null) Shop1.addProduct(new Product(proid, proName, proPrice, proQis)); 
```

另外，作为旁注，请遵循 Java 命名约定，不要以大写字母开头变量。而不是`Shop1`，使用`shop1`.

# c# - 如何在 C# 中使 UserControls BackColor 透明？

> ID：14305950
> 
> 赞同：2
> 
> 时间：2013-01-13T17:12:02.570
> 
> 标签：c#, user-controls, drawing

我在 Windows 窗体用户控件中创建了一个简单的棒人（由一个单选按钮和三个标签和一个进度条组成）。

我将新用户控件的背景颜色设置为透明，这样当我将它拖到表单上时，它会与表单上的其他颜色和绘图混合。我没有得到我想要达到的目标。

这是图片：

![在此处输入图像描述](../Images/3383641724be6a3d4e63ba34582fa422.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-13T17:55:52.833

UserControl 已经支持这个，它的 ControlStyles.SupportsTransparentBackColor 样式标志已经打开。您所要做的就是将 BackColor 属性设置为 Color.Transparent。

接下来你必须记住，这种透明度是模拟的，它是通过要求控件的父级绘制自身以产生背景来完成的。因此，重要的是您正确设置了 Parent 。如果父级不是容器控件，这有点棘手。就像一个图片框。设计器将使表单成为父级，因此您将看到表单的背景，而不是图片框。您需要在代码中修复它，编辑表单构造函数并使其看起来与此类似：

```
var pos = this.PointToScreen(userControl11.Location);
userControl11.Parent = pictureBox1;
userControl11.Location = pictureBox1.PointToClient(pos); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-13T17:18:27.463

在构造函数中设置控件样式以支持透明背景色

```
SetStyle(ControlStyles.SupportsTransparentBackColor, true); 
```

然后将背景设置为透明色

```
this.BackColor = Color.Transparent; 
```

来自[MSDN](http://msdn.microsoft.com/en-us/library/wk5b13s4%28v=vs.90%29.aspx)

[此处描述了](https://stackoverflow.com/questions/9358500/winforms-making-a-control-transparent)一种更复杂的方法（并且可能是有效的方法）- 覆盖`CreateParams`和`OnPaint`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-12-21T20:48:09.780

为什么所有这些事情？UserControl 类具有属性 Region。将此设置为您喜欢的任何形状，无需其他调整。

```
public partial class TranspBackground : UserControl
{
    public TranspBackground()
    {
        InitializeComponent();
    }

    GraphicsPath GrPath
    {
        get
        {
            GraphicsPath grPath = new GraphicsPath();
            grPath.AddEllipse(this.ClientRectangle);
            return grPath;
        }
    }

    protected override void OnPaint(PaintEventArgs e)
    {
        // set the region property to the desired path like this
        this.Region = new System.Drawing.Region(GrPath);

        // other drawing goes here
        e.Graphics.FillEllipse(new SolidBrush(ForeColor), ClientRectangle);
    }

} 
```

结果如下图所示：

[![在此处输入图像描述](../Images/70d31d647e37d2dc33301c8d5f1b0ab4.png)](https://i.stack.imgur.com/W7bSa.png) 没有低级代码，没有调整，简单干净。然而，有一个问题，但在大多数情况下，它可能未被检测到，边缘不平滑，抗锯齿也无济于事。但解决方法相当简单。实际上比所有那些复杂的后台处理要容易得多..

# android - Xamarin Android 安装失败

> ID：14305951
> 
> 赞同：7
> 
> 时间：2013-01-13T17:12:05.113
> 
> 标签：android, xamarin.android, xamarin

我正在尝试为 Android 安装 Xamarin，但我遇到了一个非常奇怪的问题，我在任何地方都找不到任何帮助。安装开始后，我单击屏幕上的下一步按钮，并回答是否要收集信息，它不会做任何事情。检查日志文件它总是由于内部错误而取消安装，我将复制给我信息的日志部分：

```
[287C:256C][2013-01-13T14:02:06]: Caching bundle from: 'C:\Users\MAXIPO~1\AppData\Local\Temp\{e9ab888e-6304-4ba3-b36a-b1a350d36592}\.be\XamarinSetup.exe' to: 'C:\ProgramData\Package Cache\{e9ab888e-6304-4ba3-b36a-b1a350d36592}\XamarinSetup.exe'
[287C:256C][2013-01-13T14:02:07]: Registering bundle dependency provider: {e9ab888e-6304-4ba3-b36a-b1a350d36592}, version: 3.0.0.0
[2464:19E4][2013-01-13T14:02:07]: Prompt for source of container: WixAttachedContainer, path: C:\Soft\Android\XamarinSetup.exe
[2464:19E4][2013-01-13T14:02:07]: Failed to resolve source for file: C:\Soft\Android\XamarinSetup.exe, error: 0x80070642.
[2464:19E4][2013-01-13T14:02:07]: Error 0x80070642: Failed while prompting for source (original path 'C:\Soft\Android\XamarinSetup.exe').
[2464:19E4][2013-01-13T14:02:07]: Failed to acquire container: WixAttachedContainer to working path: C:\Users\MAXIPO~1\AppData\Local\Temp\{e9ab888e-6304-4ba3-b36a-b1a350d36592}\4675EB82A6A7F3C48F80571AB6E8495BD1C803BA, error: 0x80070642.
[2464:2930][2013-01-13T14:02:07]: Error 0x80070642: Failed while caching, aborting execution. 
```

无法解析文件的源：XamarinSetup.exe。这个文件从来不存在，我从来没有发现它甚至在安装过程中一遍又一遍地刷新文件夹，以防它在过程中被删除。我可以看到它开始将文件复制到临时文件夹中，然后突然所有文件都消失了（我确定是因为取消了）。我在 Windows 7 中运行它，知道吗？几天来，我一直在寻找解决方案，甚至更改系统中的权限，授予来宾、我的用户、管理员访问权限，以防万一。

问候。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-15T21:09:21.803

尽管问题本身我终于可以安装一切。感谢 Xamarin 支持，我知道自动安装并不总是有效，因此手动安装每个包要好得多。所以他们给我的指示如下：

看起来手动安装会安装 Mono for Android 的试用版。请按照以下说明进行操作： 请按照列出的顺序下载并安装如下所示的软件包：

1.  JDK 1.6：[http](http://www.oracle.com/technetwork/java/javase/downloads/jdk-6u31-download-1501634.html) ://www.oracle.com/technetwork/java/javase/downloads/jdk-6u31-download-1501634.html 请从上面的列表中选择 jdk-6u31-windows-i586.exe 安装程序。

2.  Android SDK： http: [//dl.google.com/android/installer_r20-windows.exe](http://dl.google.com/android/installer_r20-windows.exe) 主安装完成后，请打开SDK Manager并安装以下平台API：7,8,10,12,14

3.  GTK#：http: [//download.xamarin.com/Installer/gtk-sharp-2.12.10.win32.msi](http://download.xamarin.com/Installer/gtk-sharp-2.12.10.win32.msi)

4.  MonoDevelop：http: [//download.xamarin.com/monodevelop/Windows/MonoDevelop-3.0.5.msi](http://download.xamarin.com/monodevelop/Windows/MonoDevelop-3.0.5.msi)

5.  适用于 Android SDK 的 Mono：http: [//download.xamarin.com/MonoforAndroid/Windows/mono-android-4.4.55.104956787.msi](http://download.xamarin.com/MonoforAndroid/Windows/mono-android-4.4.55.104956787.msi)

如果您不需要/不想使用 MonoDevelop 并改用 VisualStudio（2010 Professional 或更高版本），则可以跳过第 3 步和第 4 步。在这种情况下，您必须先安装 VS，然后才能继续第 5 步。

始终牢记在第 2 步中安装 API，JDK 1.6 也不再是最后一个，因此它会提示您安装 1.7 而不是这个。

# c# - 我们如何调用Skype等第三方Windows应用程序并使用c#填写用户名和密码？

> ID：14305953
> 
> 赞同：0
> 
> 时间：2013-01-13T17:12:17.673
> 
> 标签：c#, winforms, automation

> **可能重复：**
> [.NET Windows 自动化库有什么好的（如果有的话）？](https://stackoverflow.com/questions/2052915/whats-a-good-if-any-net-windows-automation-library)

我正在尝试使用 C# 调用第三方应用程序

```
var Proc = new System.Diagnostics.Process();
Proc.StartInfo.FileName = "C:\\Program Files (x86)\\Skype\\Phone\\Skype.exe"; 
```

但是我想使用 c# 代码填写用户名和密码，并使用代码点击登录。

任何想法？

# regex - 忽略来自 qx 的空白变量返回

> ID：14305958
> 
> 赞同：0
> 
> 时间：2013-01-13T17:12:46.093
> 
> 标签：regex, perl, iptables

我的一点点代码有困难。

```
open ("files","$list");
while (my $sort = <files>) {
  chomp $sort;
  foreach my $key (sort keys %ips) {
    if ($key =~ $sort) {
      print "key $key\n";
      my $match =qx(iptables -nL | grep $key 2>&1);
      print "Match Results $match\n";
      chomp $match;
      my $banned = $1 if $match =~ (/(\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3})/);
      print "Banned Results $banned\n";
      if ($key =~ $banned) {
        print "Already banned $banned\n";
      } else {
        system ("iptables -A INPUT -s $key -j DROP");
        open my $fh, '>>', 'banned.out';
        print "Match Found we need to block it $key\n";
        print $fh "$key:$timestamp\n";
        close $fh;
      }
    }
  }
} 
```

所以基本上我正在做的是每行打开一个地址列表 1。

接下来，我从脚本的另一部分对关键变量进行排序，并将其与我的列表匹配，如果匹配，则继续执行 if 语句。

现在使用匹配的密钥，我需要检查它是否已经被阻止，所以我使用 qx 来执行 iptables 和 grep 来获取该变量。如果它匹配一切都会完美运行。

如果它不匹配，换句话说，我`iptables -nL | grep $key`返回一个空白值，而不是继续我的 else 语句，它“抓住” $match 的空白值并继续执行。

对于我的生活，我无法弄清楚如何去除那个空白值并基本上将其显示为没有回报。

我知道有用于 iptables 等的模块，但是我必须使这个脚本尽可能通用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T17:49:13.727

我建议您将整个输出`iptables -nL`放入一个数组并`grep`使用 Perl。这样，您将只调用该实用程序一次，并且很容易检测到一个空列表。

如果你写

```
my @iptables = qx(iptables -nL); 
```

在代码的顶部，然后您可以通过以下方式查询此输出

```
my @match = grep /\b$key\b/, @iptables; 
```

如果没有包含 IP 地址的记录，则后续

```
if (@match) { ... } 
```

将失败。

您的代码还有一些其他问题。首先，您*必须始终* 在程序开始时声明所有变量，并在第一次使用时声明它们`use strict`。`use warnings`这将发现许多您可能很容易忽略的简单错误，尤其是在您寻求代码帮助时。

你的`open`电话应该看起来像

```
open my $fh, '<', $file or die $!; 
```

和...一起

```
while (my $sort = <$fh>) { ... } 
```

而且您似乎错过了哈希的重点。无需通读散列中的所有键来寻找匹配项，因为可以使用 直接访问散列元素`$ips{$sort}`。如果返回的值是`undef`该元素不存在，或者您可以使用 显式检查它的存在`if (exists $ips{$sort}) { ... }`。

我无法进一步提供帮助，因为我无法访问提供`iptables`. 如果您需要更多帮助，请发布该实用程序的一些输出。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T17:50:32.643

问题是，当`iptables`没有返回结果时，`$banned`它的默认值是`undef`. 用作正则表达式， $banned 匹配每个字符串，所以你的条件：

```
if ($key =~ $banned) { 
```

总是匹配。我想你的意思可能是

```
if ($key eq $banned) { 
```

如果`$banned`是`undef`（因为`$matched`为空或与正则表达式不匹配）或者您使用正则表达式提取的 IP 地址与`$key`.

如果您确信结果中的第一个 IP`iptables`将与您的条件相同，`$key`那么您可以将条件简化为

```
if ($match =~ /(\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3})/) { 
```

# multithreading - read() 操作期间的线程

> ID：14305962
> 
> 赞同：1
> 
> 时间：2013-01-13T17:13:01.807
> 
> 标签：multithreading, file-io

在线程中调用磁盘操作（阻塞操作）中的 read() 时。线程中会发生什么？

1.) CPU 空闲单元数据是否传输到内存？或 Wait() 和调度程序切换到另一个线程？
2.) 如果线程处于等待状态，它是如何唤醒的？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T22:40:54.353

这是一个非常开放的问题，无法简明地回答。发生的情况在很大程度上取决于您使用的操作系统。您说的是 Linux，但即便如此，根据版本、配置和其他一系列因素，也无法说出可能（或可能不会）发生的事情。

Linux 是一个抢占式多任务内核。有很多文章、博客和其他资源介绍了此类内核的工作原理。例如，[http](http://en.wikipedia.org/wiki/Computer_multitasking) ://en.wikipedia.org/wiki/Computer_multitasking 。

直接解决您的问题：

1.）根据硬件和驱动程序，是的，数据可能会在 CPU 空闲时传输到内存中。如果还有其他进程要运行，内核可能会在等待读取数据的同时运行它们。

2.) 磁盘控制器产生的硬件中断可以唤醒空闲的 CPU，让内核将数据返回给调用 read() 的用户级进程。

如果您对究竟发生了什么感到好奇，我可以鼓励您深入研究内核代码。每个人都可以看到，为什么不呢，对吧？;)

# jquery - 使用 JS/jQuery 查找字母顺序错误的单词

> ID：14305963
> 
> 赞同：4
> 
> 时间：2013-01-13T17:13:02.977
> 
> 标签：jquery, regex, string, find, match

我如何找到与搜索条件不匹配的单词，但其中包含相同的字母？

这是一个可以玩的[小提琴。](http://jsfiddle.net/ARTsinn/V6357/0/)

如果，则显示用户键入的`au`第一个 2nd 条目。但是当用户输入时，我怎样才能实现同样的事情`ua`呢？

**JS**

我使用以下内容搜索`value`from an`input`并检查它是否存在于列表中：

```
$("#search").on("keyup click", function () {
  var value = this.value.toLowerCase();

  $("#list").children().each(function () {
    var text = this.innerText.toLowerCase();
    $(this)[text.indexOf(value) !== 0 ? 'hide' : 'show']();
  });
}); 
```

**HTML**

```
<input type="search" id="search">

<ul id="list">
    <li><a href="#/australia/">Australia</a></li>
    <li><a href="#/austria/">Austria</a></li>
    <li><a href="#/belgium/">Belgium</a></li>
    <li><a href="#/brazil/">Brazil</a></li>
    <li><a href="#/canada/">Canada</a></li>
    <li><a href="#/denmark/">Denmark</a></li>
    <li><a href="#/finland/">Finland</a></li>
    <li><a href="#/france/">France</a></li>
    <li><a href="#/germany/">Germany</a></li>
    ...and so on...
</ul> 
```

我不是很熟悉`RegExp`，但我认为这会成功吗？！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T18:38:00.543

我只是编造了这个功能。如果`text`包含子字符串，则返回 true `value`；即使字母被打乱了**：

```
function fuzzyContains(text, value) {
    // for value = "THE", build the regex /[the]{3}/ and test
    var valueCopy = value.toLowerCase().replace(/\W/g, "");
    var regexp = new RegExp("[" + valueCopy + "]{" + valueCopy.length + "}");
    return regexp.test(text.toLowerCase());
}
fuzzyContains("Netherlands", "Nethe") // true
fuzzyContains("Netherlands", "Neteh") // true
fuzzyContains("Netherlands", "Nethl") // false 
```

[**演示在这里**](http://jsfiddle.net/salman/V6357/4/)

**更新**

这是该功能的修订版。如果`text`包含来自`value`** 的所有字符，则返回 true：

```
function fuzzyContains_v2(text, value) {
    var textCopy = text.toLowerCase();
    var valueCopy = value.toLowerCase().split("");
    console.log(textCopy, valueCopy);
    var a = $.grep(valueCopy, function (value) {
        return textCopy.indexOf(value) == -1;
    });
    return a.length == 0;
}
fuzzyContains("Netherlands", "Nethe")    // true
fuzzyContains("Netherlands", "Neteh")    // true
fuzzyContains("Netherlands", "Nethl")    // true
fuzzyContains("Netherlands", "Netlands") // true 
```

[**演示在这里**](http://jsfiddle.net/salman/V6357/5/)

** 我没有测试`value`包含重复字符时的行为。但是我相信结果仍然是可以接受的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T17:54:34.297

RegExp 无法做到这一点，但是您可以使用以下功能来满足您的需求：

```
function looseCharacterMatch(a, b) {
  a = a.split("");
  b = b.substring(0,a.length);
  var c = true;
  for (var i = 0; i < a.length; i++) {
    if (b.replace(a[i], "") == b) {
      c = false;
    }
    b = b.replace(a[i], "");
  }
  return c;
} 
```

[演示](http://jsfiddle.net/V6357/2/show)| [演示源](http://jsfiddle.net/V6357/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T17:23:07.407

试试这个：

```
var text = this.innerText.toLowerCase();

text = text.replace(/([a-z]*)([A-Z]*)/, '$2$1'); 
```

# c++ - OpenCV HOGDescriptor 错误

> ID：14305971
> 
> 赞同：13
> 
> 时间：2013-01-13T17:13:33.690
> 
> 标签：c++, macos, opencv, stl, feature-detection

我在 Mac OS X 10.8 上运行 OpenCV 2.4.3。我正在尝试使用 cv::HOGDescriptor 在视频序列中获取行人。

这是我用来进行检测和绘制边界框的代码。

```
 cv::VideoCapture input("file.avi");
  assert(input.isOpened());
  cv::HOGDescriptor body;
  assert(body.load("hogcascade_pedestrians.xml"));
  cv::Mat frame, gray;
  cv::namedWindow("video");

  while (input.read(frame)) {
    vector<cv::Rect> rects;
    cv::cvtColor(frame, gray, cv::COLOR_RGB2GRAY);
    cv::equalizeHist(gray, gray);

    body.detectMultiScale(gray, rects);
    for (unsigned int i=0;i<rects.size();i++) {
      cv::rectangle(frame, cv::Point(rects[i].x, rects[i].y),
          cv::Point(rects[i].x+rects[i].width, rects[i].y+rects[i].height),
          cv::Scalar(255, 0, 255));
    }
    cv::imshow("video", frame);
  } 
```

但是，当执行到达该行时`body.detectMultiScale(gray, rects);`，我得到一个错误并且整个应用程序崩溃

```
libc++abi.dylib: terminate called throwing an exception
[1]    92156 abort      ../bin/DetectPedestrians 
```

出了什么问题？我似乎无法从`gdb`or`lldb`输出中获得任何新信息。我正在使用 CMake 构建编译代码，所以我想这不是链接的问题。

这是来自崩溃线程的堆栈跟踪 -

```
Thread 0 Crashed:: Dispatch queue: com.apple.root.default-priority
0   libsystem_kernel.dylib          0x00007fff8c001212 __pthread_kill + 10
1   libsystem_c.dylib               0x00007fff8e7afaf4 pthread_kill + 90
2   libsystem_c.dylib               0x00007fff8e7f3dce abort + 143
3   libc++abi.dylib                 0x00007fff94096a17 abort_message + 257
4   libc++abi.dylib                 0x00007fff940943c6 default_terminate() + 28
5   libobjc.A.dylib                 0x00007fff8e11f887 _objc_terminate() + 111
6   libc++.1.dylib                  0x00007fff96b0b8fe std::terminate() + 20
7   libobjc.A.dylib                 0x00007fff8e11f5de objc_terminate + 9
8   libdispatch.dylib               0x00007fff8c4ecfa0 _dispatch_client_callout2 + 28
9   libdispatch.dylib               0x00007fff8c4ed686 _dispatch_apply_serial + 28
10  libdispatch.dylib               0x00007fff8c4e80b6 _dispatch_client_callout + 8
11  libdispatch.dylib               0x00007fff8c4ebae8 _dispatch_sync_f_invoke + 39
12  libopencv_core.2.4.3.dylib      0x0000000101d5d900 cv::parallel_for_(cv::Range const&, cv::ParallelLoopBody const&, double) + 116
13  libopencv_objdetect.2.4.3.dylib 0x000000010257fa21 cv::HOGDescriptor::detectMultiScale(cv::Mat const&, std::vector<cv::Rect_<int>, std::allocator<cv::Rect_<int> > >&, std::vector<double, std::allocator<double> >&, double, cv::Size_<int>, cv::Size_<int>, double, double, bool) const + 559
14  libopencv_objdetect.2.4.3.dylib 0x000000010257fdc2 cv::HOGDescriptor::detectMultiScale(cv::Mat const&, std::vector<cv::Rect_<int>, std::allocator<cv::Rect_<int> > >&, double, cv::Size_<int>, cv::Size_<int>, double, double, bool) const + 80
15  DetectPedestrians               0x0000000101a7886c main + 2572 (detect.cpp:41)
16  libdyld.dylib                   0x00007fff8d89f7e1 start + 1 
```

在 Linux 系统上，相同的代码给了我一个错误提示 -

```
OpenCV Error: Assertion failed (dsize.area() || (inv_scale_x > 0 && inv_scale_y > 0)) in resize, file /home/subho/OpenCV/OpenCV-2.4.3/modules/imgproc/src/imgwarp.cpp, line 1726
terminate called after throwing an instance of 'tbb::captured_exception'
  what():  /home/subho/OpenCV/OpenCV-2.4.3/modules/imgproc/src/imgwarp.cpp:1726: error: (-215) dsize.area() || (inv_scale_x > 0 && inv_scale_y > 0) in function resize 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-21T09:52:24.790

我无法追查到底为什么会发生此错误。然而，它与如何将 XML HOG 级联文件加载到内存中有关。

我已将此报告为 OpenCV 问题跟踪器中的一个错误，正在等待开发人员的回复。

暂时，我对这个问题的解决方法是直接在`cv::HOGDescriptor`类中设置 SVM 参数，如下所示

```
cv::HOGDescriptor human;
human.setSVMDetector(cv::HOGDescriptor::getDefaultPeopleDetector()); 
```

这似乎适用于 Mac OSX 和 OpenCV 2.4.3 的 linux 版本

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-20T22:25:42.310

我不是这方面的专家，但我认为你得到了大小不匹配问题的断言失败错误原因。我建议用一些预定义的大小初始化矩形，看看你是否得到同样的错误。希望这可以帮助

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-06-13T09:13:00.657

我在这里遇到了和你一样的问题：[HOGDescriptor Error and Assertion Failed](https://stackoverflow.com/questions/17078901/resolved-hogdescriptor-error-and-assertion-failed)

但试试这个！

改变你的...

```
cv::HOGDescriptor body; 
```

到...

```
cv::CascadeClassifier body; 
```

它就像一个魅力！它可以检测到行人！:)

但是还有一个问题，这个程序运行很慢！太迟钝了！:))

# android - android中的OnClickListener问题

> ID：14305972
> 
> 赞同：0
> 
> 时间：2013-01-13T17:13:37.347
> 
> 标签：android, onclicklistener

```
package com.example.firstproject;

import android.app.Activity;

import android.os.Bundle;
import android.widget.Button;
import android.widget.TextView;
import android.view.View.OnClickListener;
import android.view.View;
public class MainActivity extends Activity {

int counter;

TextView display;
Button add,sub;

@Override
    protected void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.activity_main);

       counter=0;
       add=(Button)findViewById(R.id.bAdd);
       sub=(Button)findViewById(R.id.bSub);
       display =(TextView)findViewById(R.id.tvDisplay);

      add.setOnClickListener(new OnClickListener......);

     }
} 
```

问题是： OnClickListener 无法解析为变量

我检查了其他帖子并修复了它的进口但仍然没有得到原因

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T17:20:55.567

试试这样：

```
add.setOnClickListener(new View.OnClickListener() {

    public void onClick(View v) {
        // Your code here.
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T17:36:30.140

```
add.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
        //IMPLEMENTATION
    }
}); 
```

# python - Python 中的标头检查 (GAE)

> ID：14305974
> 
> 赞同：1
> 
> 时间：2013-01-13T17:13:41.980
> 
> 标签：python, security, google-app-engine

我想知道如何检查 HTTP 标头以确定请求是有效的还是格式错误的。我如何在 Python 中做到这一点，更具体地说，如何在 GAE 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T17:25:03.193

对于一些调试和查看带有标头的请求，我使用以下 DDTHandler 类。

```
import cgi
import wsgiref.handlers
import webapp2

class DDTHandler(webapp2.RequestHandler):

    def __start_display(self):
        self.response.out.write("<!--\n")

    def __end_display(self):
        self.response.out.write("-->\n")

    def __show_dictionary_items(self,dictionary,title):
        if (len(dictionary) > 0):
            request = self.request
            out = self.response.out
            out.write("\n" + title + ":\n")
            for key, value in dictionary.iteritems():
                out.write(key + " = " + value + "\n")

    def __show_request_members(self):
        request = self.request
        out = self.response.out
        out.write(request.url+"\n")
        out.write("Query = "+request.query_string+"\n")
        out.write("Remote = "+request.remote_addr+"\n")
        out.write("Path = "+request.path+"\n\n")
        out.write("Request payload:\n")
        if (len(request.arguments()) > 0): 
            for argument in request.arguments():
                value = cgi.escape(request.get(argument))
                out.write(argument+" = "+value+"\n")
        else:
            out.write("Empty\n")

        self.__show_dictionary_items(request.headers, "Headers")
        self.__show_dictionary_items(request.cookies, "Cookies")

    def view_request(self):
        self.__start_display()
        self.__show_request_members()
        self.__end_display()

    def view(self, aString):
        self.__start_display()
        self.response.out.write(aString+"\n")
        self.__end_display() 
```

例子：

```
class RootPage(DDTHandler):

    def get(self):      
        self.view_request() 
```

将输出请求并**包含标头**。

所以检查代码并得到你需要的东西。如上所述，格式错误的“无效”请求可​​能不会影响您的应用程序。

```
<!--
http://localhost:8081/
Query = 
Remote = 127.0.0.1
Path = /

Request payload:
Empty

Headers:
Referer = http://localhost:8081/_ah/login?continue=http%3A//localhost%3A8081/
Accept-Charset = ISO-8859-7,utf-8;q=0.7,*;q=0.3
Cookie = hl=en_US; dev_appserver_login="test@example.com:False:185804764220139124118"
User-Agent = Mozilla/5.0 (Macintosh; Intel Mac OS X 10_6_8) AppleWebKit/537.17 (KHTML, like Gecko) Chrome/24.0.1312.52 Safari/537.17
Host = localhost:8081
Accept = text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language = en-US,en;q=0.8,el;q=0.6

Cookies:
dev_appserver_login = test@example.com:False:185804764220139124118
hl = en_US
--> 
```

# javascript - jQuery JavaScript：如何跟踪用户所做的操作？

> ID：14305976
> 
> 赞同：1
> 
> 时间：2013-01-13T17:13:50.463
> 
> 标签：javascript, jquery

我有一个带有图像的网页。用户可以单击图像来显示（）或海德（）这些图像。

有时，用户会打开一个弹出窗口来观看视频。

然后代码 hide() 之前打开的所有元素。

当用户关闭视频时，我需要知道之前打开了哪些元素以便只显示它们。

最好的方法是什么？

我做了什么：

我创建了一个数组，并将图像名称推入其中。

```
var arr_popup_open = []; 
```

然后，当用户打开弹出窗口并隐藏所有元素时调用此函数：

```
function toggleAllPopup() {
if( $('#popup_micro_1').is(":visible"))
        {
            $('#popup_micro_1').hide();
            arr_popup_open.push('#popup_micro_1');
        }
if( $('#popup_micro_2').is(":visible"))
        {
            $('#popup_micro_2').hide();
            arr_popup_open.push('#popup_micro_2');
        }
if( $('#popup_micro_3').is(":visible"))
        {
            $('#popup_micro_3').hide();
            arr_popup_open.push('#popup_micro_3');
        }
    }
// and so on ... I have 7 images so it seems it's not very well optimized 
```

当我只需要显示以前打开的图像时，我执行此代码，循环显示（）数组中的元素。

```
$('#close_pop_up').click(function() {
    for(var i= 0; i < arr_popup_open.length; i++)
    {
        $(arr_popup_open[i]).show();
    }
}); 
```

你怎么看？有更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T17:26:49.607

有几种方法可以使用 jQuery 来解决这个问题。您的方式应该可行，但是如果您想减少代码量，可以执行以下操作：

```
var visibleDivs = $('div:visible', '#ContainerDiv'); 
```

或者，您可以在显示所有可见元素并使用它们时将特定类添加到：

```
var visibleDivs = $('.someClassName'); 
```

由于弹出窗口而隐藏它们时，您可以将列表存储在任何元素的数据中。在这种情况下，将其放在 #close_pop_up 上可能有意义：

```
visibleDivs.hide();
$('#close_pop_up').data('myDivs', visibleDivs); 
```

当您想在点击功能中再次显示它们时：

```
$('#close_pop_up').click(function() {
    $(this).data('myDivs').show();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T17:20:42.753

在我看来很好。只需记住`arr_popup_open`在 toggleopen 函数的开头清除即可。

如果您真的想要，您可以做的替代方法是将打开或关闭的信息保留在 Javascript 变量中，这些变量会在您打开和关闭事物时更新。这样你就不需要依赖复杂的东西，比如`is(:visible)`

# mysql - 具有 Null 值的多个 MySQL 列的唯一约束

> ID：14305981
> 
> 赞同：0
> 
> 时间：2013-01-13T17:14:24.363
> 
> 标签：mysql, database

在我的问题中，我的“人员”数据库中有两列。一列存储此人所属的组，一列存储他是该组的管理员。一次组只能有一个管理员。

我的想法是我应该在两列上放置一个独特的约束。但问题是，对于不是管理员的其他用户，他们的唯一约束被打破了。

他问题的正确解决方案应该是什么。

示例数据库

```
----------------------------------
Person_id | Group_Id  |  Is_admin
----------------------------------
1         | 9         | null
2         | 9         | null
3         | 9         | null
4         | 9         | 1
5         | 9         | null
6         | 4         | null
7         | 4         | null
8         | 4         | null
9         | 4         | 1 
```

现在，如果我对 Group_Id 和 Is_admin 应用唯一约束，它们是唯一的，但在此人不是管理员的情况下则不然。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T17:45:35.033

考虑创建一个新表来包含有关您的组的信息，`group_id`主索引在哪里，并且类似的列作为外键`admin_id`引用您的表。`person`这样一来，您就可以`is_admin`完全消除该列并进行更相关的设计。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T17:41:38.803

它对我来说没问题...

```
DROP TABLE IF EXISTS person_group;

CREATE TABLE person_group
(Person_id INT NOT NULL PRIMARY KEY
,Group_Id  INT NOT NULL
,Is_admin TINYINT NULL
,UNIQUE (group_id,is_admin)
);

INSERT INTO person_group VALUES
(1         , 9         , null),
(2         , 9         , null),
(3         , 9         , null),
(4         , 9         , 1),
(5         , 9         , null),
(6         , 4         , null),
(7         , 4         , null),
(8         , 4         , null),
(9         , 4         , 1);

SELECT * FROM person_group;
+-----------+----------+----------+
| Person_id | Group_Id | Is_admin |
+-----------+----------+----------+
|         6 |        4 |     NULL |
|         7 |        4 |     NULL |
|         8 |        4 |     NULL |
|         9 |        4 |        1 |
|         1 |        9 |     NULL |
|         2 |        9 |     NULL |
|         3 |        9 |     NULL |
|         5 |        9 |     NULL |
|         4 |        9 |        1 |
+-----------+----------+----------+

INSERT INTO person_group VALUES (10, 9, null);
Query OK, 1 row affected (0.00 sec)

INSERT INTO person_group VALUES (11, 9, null);
Query OK, 1 row affected (0.00 sec) 
```

# android - 将按钮与另一个布局内的图像对齐

> ID：14305983
> 
> 赞同：1
> 
> 时间：2013-01-13T17:14:37.153
> 
> 标签：android, android-relativelayout

为令人困惑的标题道歉。下图更好地解释了我的问题：![在此处输入图像描述](../Images/86a1b9ae12db78f2ffb56d9d195fa81b.png)

我需要绿色按钮与图像的顶部对齐，但图像在另一个布局内。这可能吗？

如有必要，可以在代码中完成；XML 不是必需的。我的目标是 Android 2.2 及更高版本。

编辑：

我目前的实现是简单地设置 Button 的 MarginTop 属性，但是当我需要更改 LinearLayout 内的文本大小时，这很不方便，我打算根据屏幕大小来做。

我认为它可以通过某种方式找到图像的 Y 坐标来解决，也许可以通过添加 TextViews 的高度，然后将其设置为 Button 的 MarginTop，但这听起来很麻烦。真的没有其他选择了吗？

LinearLayout 将被放置在 ViewPager 内（具有多个视图，所有视图都具有相同位置的图像），这就是为什么我不能按照 preeya 解释的方式进行操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T17:52:59.027

你可以使用线性布局来显示图像和按钮，如下所示：

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
   >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
          android:id="@+id/longText"
          android:gravity="center"
        android:text="Some very long text" />
       <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:id="@+id/subtitle"
        android:layout_below="@+id/longText"
        android:text="subtitle" />
        <Button
               android:id="@+id/button1"
               android:layout_width="wrap_content"
                 android:layout_below="@+id/subtitle"   
                android:layout_toLeftOf="@+id/subtitle"
               android:layout_height="wrap_content"
               android:text="button" />

       <LinearLayout 
          android:layout_width="match_parent"
             android:layout_height="match_parent"
              android:layout_toRightOf="@+id/button1"
         android:layout_below="@+id/subtitle"   
         android:orientation="horizontal"
           >

           <ImageView
               android:id="@+id/imageView2"
               android:layout_width="fill_parent"
               android:layout_height="wrap_content"
               android:src="@drawable/ic_launcher" />

       </LinearLayout>

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T11:49:04.517

这是可能的，但比将按钮包含在同一布局中更复杂。如果您绝对不想这样做，则不能使用 XML（它总是更快）。您必须在代码中执行 3 个步骤：

**1.) 等到视图被绘制**

```
private void waitForViewToBeDrawn(){
    // get your layout
    final RelativeLayout mainLayout = (RelativeLayout) findViewById(R.id.mainLayout);
    ViewTreeObserver vto = mainLayout.getViewTreeObserver();
    // add a listener
    vto.addOnGlobalLayoutListener(new OnGlobalLayoutListener() {
        public void onGlobalLayout() {
            // you also want to remove that listener
            mainLayout.getViewTreeObserver().removeGlobalOnLayoutListener(this);
            // go on to next step
            getPositionOfImageView();

        }
    }); 
} 
```

这种方法最适合我，但如果您遇到问题 -[这里](http://developer.android.com/reference/android/view/View.html#setTop%28int%29)有一些替代方案。当您使用 API 级别 11 及更高级别时，还有 [更多解决方案][2]...

**2.) 获取 imageView 的顶部位置**

```
 private void getPositionOfImageView(){                
        ImageView imageView = (ImageView) findViewById(R.id.imageView);
        // Top position view relative to parent (Button and ImageView have same parent)
        int topCoordinate = imageView.getTop();
        adjustButton(topCoordinate);
    } 
```

**3.) 添加或调整按钮以与图像对齐**

```
 public void adjustButton(int topCoordinate){
        Button button = (Button) findViewById(R.id.button);
        RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT, RelativeLayout.LayoutParams.WRAP_CONTENT);
        params.topMargin = topCoordinate;
        button.setLayoutParams(params);
    } 
```

通过使用 API 11，这一步会更顺畅：[button.setTop(topCoordinate)](http://developer.android.com/reference/android/view/View.html#setTop%28int%29)

当然你可以把它全部缩短并放在一个单一的方法中，只是认为3个步骤更好地解释。希望代码有助于入门！

# coffeescript - 为什么缩进字典在 CoffeeScript 中不起作用？

> ID：14305991
> 
> 赞同：0
> 
> 时间：2013-01-13T17:15:23.400
> 
> 标签：coffeescript

我无法理解为什么会这样

```
$.ajax({ url: "http://ruzzle-map.herokuapp.com/bad", 
         data: { word: $(".words-list li > span.word").eq(current_word).text() },
         dataType: 'jsonp',
         jsonp: 'jsoncall' }) 
```

失败，而这

```
$.ajax({ url: "http://ruzzle-map.herokuapp.com/bad", data: { word: $(".words-list li > span.word").eq(current_word).text() }, dataType: 'jsonp', jsonp: 'jsoncall' }) 
```

编译得很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T18:05:42.413

编译器似乎弄乱了对象文字上的缩进，如果在它编译的第一个左大括号之后添加一个新行：

```
$.ajax({
  url: "http://ruzzle-map.herokuapp.com/bad", 
  data: { word: $(".words-list li > span.word").eq(current_word).text() },
  dataType: 'jsonp',
  jsonp: 'jsoncall' 
}) 
```

鉴于这是 CoffeeScript，您可以省略函数调用括号并信任对象文字的缩进和换行符，而不是使用大括号和逗号：

```
$.ajax
  url: "http://ruzzle-map.herokuapp.com/bad"
  data: 
    word: $(".words-list li > span.word").eq(current_word).text()
  dataType: 'jsonp'
  jsonp: 'jsoncall' 
```

# lambda - 定义带和不带 lambda 的方案函数，有区别吗

> ID：14305993
> 
> 赞同：3
> 
> 时间：2013-01-13T17:15:26.120
> 
> 标签：lambda, scheme

考虑 2 个`Scheme`函数

```
; Define function
(define (square n) (* n n ))
(square 12)
144

; Another way to define same function
(define square (lambda (n) (* n n)))
(square 12)
144 
```

两者似乎产生相同的结果。

这些函数声明之间有什么功能上的区别吗？在某些情况下是否应该优先选择一个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T17:19:10.860

这两个定义没有区别——前者是后者的语法糖。

您更喜欢哪一个是风格问题，但我的印象是前者通常是定义函数的首选方式，因为它更简洁，也许也更具可读性。

介绍性文本经常使用后者来明确命名函数只是一个包含 lambda 的变量 - 在使用第一个变体时并不那么清楚。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T18:00:50.277

sepp2k 是绝对正确的，因为您定义的两个过程是相同的。在像这样的简单程序定义中，要么是正确的，要么归结为偏好问题。

使用显式语句确实有意义的一种情况`lambda`是，如果您需要跟踪过程中的某种状态。例如，我们可以制作这样的计数器：

```
(define counter
    (let ((count 0))
      (lambda ()
          (set! count (+ count 1))
          count)))

(counter) ;=> 1
(counter) ;=> 2
(counter) ;=> 3 
```

# plot - 将函数拟合到在 gnuplot 中使用频率创建的直方图

> ID：14305994
> 
> 赞同：4
> 
> 时间：2013-01-13T17:15:36.200
> 
> 标签：plot, gnuplot, histogram, data-fitting, binning

# 介绍

在 gnuplot 中，有一个解决方案可以从名为`hist.dat`what likes的文件创建直方图

```
1
2
2
2
3 
```

通过使用命令

```
binwidth=1
set boxwidth binwidth
bin(x,width)=width*floor(x/width) + binwidth/2.0
plot [0:5][0:*] "hist.dat" u (bin($1,binwidth)):(1.0) smooth freq with boxes 
```

[从其他 SO 页面](https://stackoverflow.com/questions/2471884/histogram-using-gnuplot)生成这样的直方图。

# 问题

我怎样才能使我的函数适合这个直方图？我定义了一个高斯函数并初始化了它的值

```
f(x) = a*exp(-((x-m)/s)**2)
a=3; m=2.5; s=1 
```

在输出中，函数很好地遵循直方图。

不幸的是，我无法使用命令适应此直方图

```
fit f(x) "hist.dat" u (bin($1,binwidth)):(1.0) smooth freq via a,m,s  
                                                      ^
         Need via and either parameter list or file 
```

那么如何在不创建包含分箱值的新文件的情况下适应我的函数呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T10:38:53.293

我面临着类似的问题，我发现了一种不太优雅的解决方案。

```
binwidth=1
set boxwidth binwidth
bin(x,width)=width*floor(x/width) + binwidth/2.0
set table 'hist.temp'
plot [0:5][0:*] "hist.dat" u (bin($1,binwidth)):(1.0) smooth freq with boxes
unset table 
```

然后您可以根据自己的喜好调整文件。我知道可能有一些更好的方法可以做到这一点，但对我来说，这是一个快速且有效的解决方案。我希望这对你有帮助。

干杯!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-26T05:16:07.973

我使用了它并且它有效：

```
gauss(x)=a/(sqrt(2*pi)sigma)*exp(-(x-mean)**2/(2*sigma**2))

fit gauss(x) 'data.txt' via a,sigma,mean 
```

经过 83 次迭代后，GNUplot 计算出我的 a、sigma 和均值

# networking - 如何在 Windows Phone 8 上以编程方式启用 WiFi？

> ID：14305995
> 
> 赞同：1
> 
> 时间：2013-01-13T17:15:37.327
> 
> 标签：networking, windows-phone-8

> **可能重复：**
> [如何在 WP7 上以编程方式打开/关闭 WiFi](https://stackoverflow.com/questions/9247958/how-can-i-turn-on-off-wifi-programatically-on-wp7)

如何在 Windows Phone 8 上以编程方式启用 WiFi？到目前为止，我只在网络上找到了状态信息，但没有设置 WiFi 启用/禁用的实际方法。我真的必须通过 WiFi 设置页面来设置状态吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-13T17:58:51.840

无法通过代码修改 WiFi、蓝牙或其他系统设置。您唯一能做的就是使用[ConnectionSettingsTask](http://msdn.microsoft.com/en-US/library/windowsphone/develop/microsoft.phone.tasks.connectionsettingstask%28v=vs.105%29.aspx)启动器让用户进入 WiFi 系统屏幕，将 ConnectionSettingsType 建立为 WiFi。